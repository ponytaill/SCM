/**
 * @fileoverview added by tsickle
 * Generated from: lib/webcmp/bif-manual-creation-target.webcmp.service.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Injectable, Optional } from '@angular/core';
import { MessagerService } from '@farris/ui-messager';
import { BindingData, Entity, ViewModel, FrameContext } from '@farris/devkit';
import { StateMachineService, CardDataService } from '@farris/command-services';
import { FormCreateArgs, FormUpdateArgs } from '../ref';
import { BifTargetUiService } from '../bif-manual-creation/service/bif-target-ui.service';
import { BifDataService } from '../bif-manual-creation/service/bif-data.service';
import { FormBillCreationProcessExecutorArgs } from '../entity/form-rest/FormBillCreationProcessExecutorArgs';
import { LocalePipe } from '../bif-manual-creation/pipe/locale.pipe';
import { ManualCreationMode } from '../entity/form-rest/ManualCreationMode';
/**
 * 手工生单目标端服务类
 */
export class BifManualCreationTargetWebCmpService {
    /**
     * @param {?} dataService
     * @param {?} targetUiService
     * @param {?} stateMachineService
     * @param {?} bindingData
     * @param {?} messagerService
     * @param {?} cardDataService
     * @param {?} viewModel
     * @param {?} frameContext
     */
    constructor(dataService, targetUiService, stateMachineService, bindingData, messagerService, cardDataService, viewModel, frameContext) {
        this.dataService = dataService;
        this.targetUiService = targetUiService;
        this.stateMachineService = stateMachineService;
        this.bindingData = bindingData;
        this.messagerService = messagerService;
        this.cardDataService = cardDataService;
        this.viewModel = viewModel;
        this.frameContext = frameContext;
        this.localePipe = new LocalePipe(this.targetUiService && this.targetUiService.localeId || 'zh-CHS');
    }
    /**
     * 加载单据流生单流程执行后数据
     * @param {?} formVoId 表单绑定视图对象 Id
     * @return {?}
     */
    bifLoad(formVoId) {
        /** @type {?} */
        const args = new FormCreateArgs();
        args.formVoId = formVoId;
        //获取生单流程执行结果
        this.targetUiService.getCreationResult().subscribe((/**
         * @param {?} res
         * @return {?}
         */
        res => {
            args.rpcCreationRuleExecutorResult = res.creationRuleExecutorResult.ConvertToJson();
            //创建实体数据
            this.dataService.createEntityDatas(args).subscribe((/**
             * @param {?} result
             * @return {?}
             */
            (result) => {
                //切换状态机至 “新增”
                this.stateMachineService.transit("Create");
            }), (/**
             * @param {?} err
             * @return {?}
             */
            (err) => {
                this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
            }));
        }));
    }
    /**
     * 参照，根据目标VO Id打开生单流程选择器并执行选中的生单流程
     *
     * @param {?} targetVoId 单据流目标视图对象 Id
     * @param {?=} targetDataIds 目标单据主表Id列表
     * @param {?=} bizFlowchartId 业务场景图Id
     * @param {?=} modalOptions1 生单流程选择器模态框配置
     * @param {?=} customSelectorModuleUrl 生单流程选择器自定义选择器url
     * @param {?=} modalOptions2 来源单据选择器模态框配置
     * @param {?=} extParams1 打开生单流程选择器弹窗扩展参数
     * @param {?=} extParams2 打开来源单据选择器扩展参数
     * @return {?}
     */
    referByTargetVoId(targetVoId, targetDataIds, bizFlowchartId, modalOptions1, customSelectorModuleUrl, modalOptions2, extParams1, extParams2) {
        bizFlowchartId = bizFlowchartId === "" || bizFlowchartId == null ? undefined : bizFlowchartId;
        targetDataIds = (/** @type {?} */ (targetDataIds)) === "" || targetDataIds == null ? [this.bindingData.getObject().id] : targetDataIds;
        modalOptions1 = (/** @type {?} */ (modalOptions1)) === "" || modalOptions1 == null ? undefined : modalOptions1;
        customSelectorModuleUrl = customSelectorModuleUrl === "" || customSelectorModuleUrl == null ? undefined : customSelectorModuleUrl;
        modalOptions2 = (/** @type {?} */ (modalOptions2)) === "" || modalOptions2 == null ? {
            title: this.localePipe.transform("selectUpstreamBill"),
            width: 1100,
            height: 550,
        } : modalOptions2;
        extParams1 = extParams1 === "" || extParams1 == null ? undefined : extParams1;
        extParams2 = (/** @type {?} */ (extParams2)) === "" || extParams2 == null ? undefined : extParams2;
        //更新表单现有变更集
        this.cardDataService.update().subscribe((/**
         * @return {?}
         */
        () => {
            //打开生单流程选择器
            this.targetUiService.openBillCreationProcessSelector4Pull(targetVoId, bizFlowchartId, modalOptions1, customSelectorModuleUrl, extParams1).subscribe((/**
             * @param {?} cp
             * @return {?}
             */
            (cp) => {
                //获取表单配置
                this.dataService.getFormSettingsById(cp.formSettingsId).subscribe((/**
                 * @param {?} formSettings
                 * @return {?}
                 */
                (formSettings) => {
                    //打开来源单据选择器模态框
                    this.targetUiService.openSourceDataSelector4Pull(formSettings, modalOptions2, extParams2).subscribe((/**
                     * @param {?} entities
                     * @return {?}
                     */
                    (entities) => {
                        //构造生单流程执行参数实体
                        /** @type {?} */
                        const args = new FormBillCreationProcessExecutorArgs();
                        args.billCreationProcessId = cp.id;
                        args.creationRuleId = cp.creationRuleId;
                        //FormBillCreationProcessExecutorArgs的sourceVoEntityDatas属性为前端实体序列化后的字符串列表
                        //sourceVoEntityDatas列表中的每个字符串，在结构上应与单据流定义中所选中的上游视图对象一致。
                        args.sourceVoEntityDatas = entities.map((/**
                         * @param {?} item
                         * @return {?}
                         */
                        item => {
                            if (item instanceof Entity) {
                                // 如果是Entity
                                return JSON.stringify(item.toJSON(false, true));
                            }
                            else if (item["__type__"] == "BindingObject") {
                                //如果来自BindingData
                                /** @type {?} */
                                const bindingObject = (/** @type {?} */ (item));
                                return JSON.stringify(bindingObject.toJSON({ useFullMultiLangProperty: true }));
                            }
                            else {
                                /** @type {?} */
                                const e = (/** @type {?} */ (item));
                                return JSON.stringify(e.toJSON(false, true));
                            }
                        }));
                        args.targetVoDataIds = targetDataIds;
                        args.manualCreationMode = ManualCreationMode.Pull;
                        //执行生单流程
                        this.dataService.executeBillCreationProcess(args).subscribe((/**
                         * @param {?} result
                         * @return {?}
                         */
                        (result) => {
                            /** @type {?} */
                            const args = new FormUpdateArgs();
                            //Mapping执行条件判断结果为true时才会执行生单流程得到生单结果
                            if (result.conditionResult.conditionExecutionResult == true) {
                                //生单结果不为空
                                if (result.creationRuleExecutorResult && result.creationRuleExecutorResult.mappingResults && result.creationRuleExecutorResult.mappingResults.length > 0) {
                                    args.rpcCreationRuleExecutorResult = result.creationRuleExecutorResult.ConvertToJson();
                                    //更新表单数据
                                    this.dataService.updateEntityDatas(args).subscribe((/**
                                     * @param {?} res
                                     * @return {?}
                                     */
                                    (res) => {
                                        //重新加载表单数据
                                        this.cardDataService.load(targetDataIds[0]).subscribe();
                                    }), (/**
                                     * @param {?} err
                                     * @return {?}
                                     */
                                    (err) => {
                                        this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                                    }));
                                }
                                else {
                                    this.messagerService.error(this.localePipe.transform("creationResultEmpty"));
                                }
                            }
                            else {
                                //为false时可得到配置的错误提示信息
                                this.messagerService.error(result.conditionResult.message || this.localePipe.transform("creationExecutionError"));
                            }
                        }));
                    }));
                }));
            }));
        }), (/**
         * @param {?} err
         * @return {?}
         */
        (err) => {
            this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
        }));
    }
    /**
     * 特定参照，根据来源VO Id和目标VO Id打开生单流程选择器并执行选中的生单流程
     *
     * @param {?} sourceVoId 单据流来源视图对象 Id
     * @param {?} targetVoId 单据流目标视图对象 Id
     * @param {?=} targetDataIds 目标单据主表Id列表
     * @param {?=} bizFlowchartId 业务场景图Id
     * @param {?=} modalOptions1 生单流程选择器模态框配置
     * @param {?=} customSelectorModuleUrl 生单流程选择器自定义选择器url
     * @param {?=} modalOptions2 来源单据选择器模态框配置
     * @param {?=} extParams1 打开生单流程选择器弹窗扩展参数
     * @param {?=} extParams2 打开来源单据选择器扩展参数
     * @return {?}
     */
    referBySourceVoIdAndTargetVoId(sourceVoId, targetVoId, targetDataIds, bizFlowchartId, modalOptions1, customSelectorModuleUrl, modalOptions2, extParams1, extParams2) {
        bizFlowchartId = bizFlowchartId === "" || bizFlowchartId == null ? undefined : bizFlowchartId;
        targetDataIds = (/** @type {?} */ (targetDataIds)) === "" || targetDataIds == null ? [this.bindingData.getObject().id] : targetDataIds;
        modalOptions1 = (/** @type {?} */ (modalOptions1)) === "" || modalOptions1 == null ? undefined : modalOptions1;
        customSelectorModuleUrl = customSelectorModuleUrl === "" || customSelectorModuleUrl == null ? undefined : customSelectorModuleUrl;
        modalOptions2 = (/** @type {?} */ (modalOptions2)) === "" || modalOptions2 == null ? {
            title: this.localePipe.transform("selectUpstreamBill"),
            width: 1100,
            height: 550,
        } : modalOptions2;
        extParams1 = extParams1 === "" || extParams1 == null ? undefined : extParams1;
        extParams2 = (/** @type {?} */ (extParams2)) === "" || extParams2 == null ? undefined : extParams2;
        //更新表单现有变更集
        this.cardDataService.update().subscribe((/**
         * @return {?}
         */
        () => {
            //打开生单流程选择器
            this.targetUiService.openBillCreationProcessSelector4SpecificPull(sourceVoId, targetVoId, bizFlowchartId, modalOptions1, customSelectorModuleUrl, extParams1).subscribe((/**
             * @param {?} cp
             * @return {?}
             */
            (cp) => {
                //获取表单配置
                this.dataService.getFormSettingsById(cp.formSettingsId).subscribe((/**
                 * @param {?} formSettings
                 * @return {?}
                 */
                (formSettings) => {
                    //打开来源单据选择器模态框
                    this.targetUiService.openSourceDataSelector4Pull(formSettings, modalOptions2, extParams2).subscribe((/**
                     * @param {?} entities
                     * @return {?}
                     */
                    (entities) => {
                        //构造生单流程执行参数实体
                        /** @type {?} */
                        const args = new FormBillCreationProcessExecutorArgs();
                        args.billCreationProcessId = cp.id;
                        args.creationRuleId = cp.creationRuleId;
                        //FormBillCreationProcessExecutorArgs的sourceVoEntityDatas属性为前端实体序列化后的字符串列表
                        //sourceVoEntityDatas列表中的每个字符串，在结构上应与单据流定义中所选中的上游视图对象一致。
                        args.sourceVoEntityDatas = entities.map((/**
                         * @param {?} item
                         * @return {?}
                         */
                        item => {
                            if (item instanceof Entity) {
                                // 如果是Entity
                                return JSON.stringify(item.toJSON(false, true));
                            }
                            else if (item["__type__"] == "BindingObject") {
                                //如果来自BindingData
                                /** @type {?} */
                                const bindingObject = (/** @type {?} */ (item));
                                return JSON.stringify(bindingObject.toJSON({ useFullMultiLangProperty: true }));
                            }
                            else {
                                /** @type {?} */
                                const e = (/** @type {?} */ (item));
                                return JSON.stringify(e.toJSON(false, true));
                            }
                        }));
                        args.targetVoDataIds = targetDataIds;
                        args.manualCreationMode = ManualCreationMode.SpecificPull;
                        //执行生单流程
                        this.dataService.executeBillCreationProcess(args).subscribe((/**
                         * @param {?} result
                         * @return {?}
                         */
                        (result) => {
                            /** @type {?} */
                            const args = new FormUpdateArgs();
                            //Mapping执行条件判断结果为true时才会执行生单流程得到生单结果
                            if (result.conditionResult.conditionExecutionResult == true) {
                                //生单结果不为空
                                if (result.creationRuleExecutorResult && result.creationRuleExecutorResult.mappingResults && result.creationRuleExecutorResult.mappingResults.length > 0) {
                                    args.rpcCreationRuleExecutorResult = result.creationRuleExecutorResult.ConvertToJson();
                                    //更新表单数据
                                    this.dataService.updateEntityDatas(args).subscribe((/**
                                     * @param {?} res
                                     * @return {?}
                                     */
                                    (res) => {
                                        //重新加载表单数据
                                        this.cardDataService.load(targetDataIds[0]).subscribe();
                                    }), (/**
                                     * @param {?} err
                                     * @return {?}
                                     */
                                    (err) => {
                                        this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                                    }));
                                }
                                else {
                                    this.messagerService.error(this.localePipe.transform("creationResultEmpty"));
                                }
                            }
                            else {
                                //为false时可得到配置的错误提示信息
                                this.messagerService.error(result.conditionResult.message || this.localePipe.transform("creationExecutionError"));
                            }
                        }));
                    }));
                }));
            }));
        }), (/**
         * @param {?} err
         * @return {?}
         */
        (err) => {
            this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
        }));
    }
    /**
     * 特定参照，根据生单流程ID执行选中的生单流程
     *
     * @param {?} processId 单据流生单流程 Id
     * @param {?=} targetDataIds 目标单据主表Id列表
     * @param {?=} modalOptions 来源单据选择器模态框配置
     * @param {?=} extParams 打开来源单据选择器扩展参数
     * @return {?}
     */
    referByCreationProcessId(processId, targetDataIds, modalOptions, extParams) {
        targetDataIds = (/** @type {?} */ (targetDataIds)) === "" || targetDataIds == null ? [this.bindingData.getObject().id] : targetDataIds;
        modalOptions = (/** @type {?} */ (modalOptions)) === "" || modalOptions == null ? {
            title: this.localePipe.transform("selectUpstreamBill"),
            width: 1100,
            height: 550,
        } : modalOptions;
        extParams = (/** @type {?} */ (extParams)) === "" || extParams == null ? undefined : extParams;
        //更新表单现有变更集
        this.cardDataService.update().subscribe((/**
         * @return {?}
         */
        () => {
            //打开生单流程选择器
            this.dataService.getSlimBillCreationProcessEntityExById(processId).subscribe((/**
             * @param {?} cp
             * @return {?}
             */
            (cp) => {
                //获取表单配置
                this.dataService.getFormSettingsById(cp.formSettingsId).subscribe((/**
                 * @param {?} formSettings
                 * @return {?}
                 */
                (formSettings) => {
                    //打开来源单据选择器模态框
                    this.targetUiService.openSourceDataSelector4Pull(formSettings, modalOptions, extParams).subscribe((/**
                     * @param {?} entities
                     * @return {?}
                     */
                    (entities) => {
                        //构造生单流程执行参数实体
                        /** @type {?} */
                        const args = new FormBillCreationProcessExecutorArgs();
                        args.billCreationProcessId = cp.id;
                        args.creationRuleId = cp.creationRuleId;
                        //FormBillCreationProcessExecutorArgs的sourceVoEntityDatas属性为前端实体序列化后的字符串列表
                        //sourceVoEntityDatas列表中的每个字符串，在结构上应与单据流定义中所选中的上游视图对象一致。
                        args.sourceVoEntityDatas = entities.map((/**
                         * @param {?} item
                         * @return {?}
                         */
                        item => {
                            if (item instanceof Entity) {
                                // 如果是Entity
                                return JSON.stringify(item.toJSON(false, true));
                            }
                            else if (item["__type__"] == "BindingObject") {
                                //如果来自BindingData
                                /** @type {?} */
                                const bindingObject = (/** @type {?} */ (item));
                                return JSON.stringify(bindingObject.toJSON({ useFullMultiLangProperty: true }));
                            }
                            else {
                                /** @type {?} */
                                const e = (/** @type {?} */ (item));
                                return JSON.stringify(e.toJSON(false, true));
                            }
                        }));
                        args.targetVoDataIds = targetDataIds;
                        args.manualCreationMode = ManualCreationMode.SpecificPull;
                        //执行生单流程
                        this.dataService.executeBillCreationProcess(args).subscribe((/**
                         * @param {?} result
                         * @return {?}
                         */
                        (result) => {
                            /** @type {?} */
                            const args = new FormUpdateArgs();
                            //Mapping执行条件判断结果为true时才会执行生单流程得到生单结果
                            if (result.conditionResult.conditionExecutionResult == true) {
                                //生单结果不为空
                                if (result.creationRuleExecutorResult && result.creationRuleExecutorResult.mappingResults && result.creationRuleExecutorResult.mappingResults.length > 0) {
                                    args.rpcCreationRuleExecutorResult = result.creationRuleExecutorResult.ConvertToJson();
                                    //更新表单数据
                                    this.dataService.updateEntityDatas(args).subscribe((/**
                                     * @param {?} res
                                     * @return {?}
                                     */
                                    (res) => {
                                        //重新加载表单数据
                                        this.cardDataService.load(targetDataIds[0]).subscribe();
                                    }), (/**
                                     * @param {?} err
                                     * @return {?}
                                     */
                                    (err) => {
                                        this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                                    }));
                                }
                                else {
                                    this.messagerService.error(this.localePipe.transform("creationResultEmpty"));
                                }
                            }
                            else {
                                //为false时可得到配置的错误提示信息
                                this.messagerService.error(result.conditionResult.message || this.localePipe.transform("creationExecutionError"));
                            }
                        }));
                    }));
                }));
            }));
        }), (/**
         * @param {?} err
         * @return {?}
         */
        (err) => {
            this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
        }));
    }
    /**
     * \@Deprecated 已弃用，请使用 {\@link getCreationResult }
     * 获取来源界面传入的生单流程执行结果
     * @return {?} creationResult 生单流程执行结果 \@type { FormBillCreationProcessExecutorResult }
     */
    getFormBillCreationProcessExecutorResult() {
        return this.targetUiService.getFormBillCreationProcessExecutorResult();
    }
    /**
     * 根据目标VO Id打开生单流程选择器查找生单流程
     * @param {?} targetVoId 目标VO Id
     * @param {?=} bizFlowchartId 业务场景图Id
     * @param {?=} modalOptions 模态框配置
     * @param {?=} customSelectorModuleUrl 自定义选择器Url
     * @param {?=} extParams 扩展参数
     * @return {?} creationProcess 生单流程 \@type { Observable<IRtSlimBillCreationProcessEntityEx> }
     */
    openBillCreationProcessSelector4Pull(targetVoId, bizFlowchartId, modalOptions, customSelectorModuleUrl, extParams) {
        bizFlowchartId = bizFlowchartId === "" || bizFlowchartId == null ? undefined : bizFlowchartId;
        modalOptions = (/** @type {?} */ (modalOptions)) === "" || modalOptions == null ? undefined : modalOptions;
        customSelectorModuleUrl = customSelectorModuleUrl === "" || customSelectorModuleUrl == null ? undefined : customSelectorModuleUrl;
        extParams = extParams === "" || extParams == null ? undefined : extParams;
        //打开生单流程选择器
        return this.targetUiService.openBillCreationProcessSelector4Pull(targetVoId, bizFlowchartId, modalOptions, customSelectorModuleUrl, extParams);
    }
    /**
     * 根据来源VO Id和目标VO Id打开生单流程选择器查找生单流程
     * @param {?} sourceVoId 来源VO Id
     * @param {?} targetVoId 目标VO Id
     * @param {?=} bizFlowchartId 业务场景图Id
     * @param {?=} modalOptions 模态框配置
     * @param {?=} customSelectorModuleUrl 自定义选择器Url
     * @param {?=} extParams 扩展参数
     * @return {?} creationProcess 生单流程 \@type { Observable<IRtSlimBillCreationProcessEntityEx> }
     */
    openBillCreationProcessSelector4SpecificPull(sourceVoId, targetVoId, bizFlowchartId, modalOptions, customSelectorModuleUrl, extParams) {
        bizFlowchartId = bizFlowchartId === "" || bizFlowchartId == null ? undefined : bizFlowchartId;
        modalOptions = (/** @type {?} */ (modalOptions)) === "" || modalOptions == null ? undefined : modalOptions;
        customSelectorModuleUrl = customSelectorModuleUrl === "" || customSelectorModuleUrl == null ? undefined : customSelectorModuleUrl;
        extParams = (/** @type {?} */ (extParams)) === "" || extParams == null ? undefined : extParams;
        return this.targetUiService.openBillCreationProcessSelector4SpecificPull(sourceVoId, targetVoId, bizFlowchartId, modalOptions, customSelectorModuleUrl, extParams);
    }
    /**
     * 打开来源单据选择器选择数据
     * @param {?} formSettings 表单配置
     * @param {?=} modalOptions 模态框配置
     * @param {?=} extParams 扩展参数
     * @return {?} entities 数据列表 \@type { Observable<Entity[]> }
     */
    openSourceDataSelector4Pull(formSettings, modalOptions, extParams) {
        modalOptions = (/** @type {?} */ (modalOptions)) === "" || modalOptions == null ? {
            title: this.localePipe.transform("selectUpstreamBill"),
            width: 1100,
            height: 550,
        } : modalOptions;
        extParams = (/** @type {?} */ (extParams)) === "" || extParams == null ? undefined : extParams;
        //打开来源单据选择器模态框
        return this.targetUiService.openSourceDataSelector4Pull(formSettings, modalOptions, extParams);
    }
    /**
     * 获取传到根组件UIState上的生单规则执行器结果
     * @return {?} creationResult 生单流程执行结果 \@type { FormBillCreationProcessExecutorResult }
     */
    getCreationResult() {
        return this.targetUiService.getCreationResult();
    }
}
BifManualCreationTargetWebCmpService.decorators = [
    { type: Injectable }
];
/** @nocollapse */
BifManualCreationTargetWebCmpService.ctorParameters = () => [
    { type: BifDataService },
    { type: BifTargetUiService },
    { type: StateMachineService },
    { type: BindingData },
    { type: MessagerService },
    { type: CardDataService },
    { type: ViewModel, decorators: [{ type: Optional }] },
    { type: FrameContext, decorators: [{ type: Optional }] }
];
if (false) {
    /** @type {?} */
    BifManualCreationTargetWebCmpService.prototype.localePipe;
    /** @type {?} */
    BifManualCreationTargetWebCmpService.prototype.dataService;
    /** @type {?} */
    BifManualCreationTargetWebCmpService.prototype.targetUiService;
    /** @type {?} */
    BifManualCreationTargetWebCmpService.prototype.stateMachineService;
    /** @type {?} */
    BifManualCreationTargetWebCmpService.prototype.bindingData;
    /** @type {?} */
    BifManualCreationTargetWebCmpService.prototype.messagerService;
    /** @type {?} */
    BifManualCreationTargetWebCmpService.prototype.cardDataService;
    /** @type {?} */
    BifManualCreationTargetWebCmpService.prototype.viewModel;
    /** @type {?} */
    BifManualCreationTargetWebCmpService.prototype.frameContext;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmlmLW1hbnVhbC1jcmVhdGlvbi10YXJnZXQud2ViY21wLnNlcnZpY2UuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZWRwLWJpZi9ydW50aW1lLWFwaS8iLCJzb3VyY2VzIjpbImxpYi93ZWJjbXAvYmlmLW1hbnVhbC1jcmVhdGlvbi10YXJnZXQud2ViY21wLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUVyRCxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFFdEQsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBaUIsTUFBTSxnQkFBZ0IsQ0FBQztBQUM3RixPQUFPLEVBQUUsbUJBQW1CLEVBQUUsZUFBZSxFQUFFLE1BQU0sMEJBQTBCLENBQUM7QUFJaEYsT0FBTyxFQUFFLGNBQWMsRUFBb0IsY0FBYyxFQUFvQixNQUFNLFFBQVEsQ0FBQztBQUM1RixPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxzREFBc0QsQ0FBQztBQUMxRixPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0saURBQWlELENBQUM7QUFDakYsT0FBTyxFQUFFLG1DQUFtQyxFQUFFLE1BQU0seURBQXlELENBQUM7QUFHOUcsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLHlDQUF5QyxDQUFDO0FBQ3JFLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLHdDQUF3QyxDQUFDOzs7O0FBTTVFLE1BQU0sT0FBTyxvQ0FBb0M7Ozs7Ozs7Ozs7O0lBRTdDLFlBQ1csV0FBMkIsRUFDM0IsZUFBbUMsRUFDbkMsbUJBQXdDLEVBQ3hDLFdBQXdCLEVBQ3hCLGVBQWdDLEVBQ2hDLGVBQWdDLEVBQ3BCLFNBQW9CLEVBQ3BCLFlBQTBCO1FBUHRDLGdCQUFXLEdBQVgsV0FBVyxDQUFnQjtRQUMzQixvQkFBZSxHQUFmLGVBQWUsQ0FBb0I7UUFD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QiwyREFBa0M7O0lBQ2xDLCtEQUEwQzs7SUFDMUMsbUVBQStDOztJQUMvQywyREFBK0I7O0lBQy9CLCtEQUF1Qzs7SUFDdkMsK0RBQXVDOztJQUN2Qyx5REFBdUM7O0lBQ3ZDLDREQUE2QyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUsIE9wdGlvbmFsIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcblxyXG5pbXBvcnQgeyBNZXNzYWdlclNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLW1lc3NhZ2VyJztcclxuaW1wb3J0IHsgTW9kYWxPcHRpb25zIH0gZnJvbSAnQGZhcnJpcy91aS1tb2RhbCc7XHJcbmltcG9ydCB7IEJpbmRpbmdEYXRhLCBFbnRpdHksIFZpZXdNb2RlbCwgRnJhbWVDb250ZXh0LCBCaW5kaW5nT2JqZWN0IH0gZnJvbSAnQGZhcnJpcy9kZXZraXQnO1xyXG5pbXBvcnQgeyBTdGF0ZU1hY2hpbmVTZXJ2aWNlLCBDYXJkRGF0YVNlcnZpY2UgfSBmcm9tICdAZmFycmlzL2NvbW1hbmQtc2VydmljZXMnO1xyXG5cclxuaW1wb3J0IHsgRm9ybVNldHRpbmdzIH0gZnJvbSAnQGVkcC1haWYvY29tbW9uLWFwaSc7XHJcbmltcG9ydCB7IElSdFNsaW1CaWxsQ3JlYXRpb25Qcm9jZXNzRW50aXR5RXggfSBmcm9tIFwiQGVkcC1iaWYvY29tbW9uLWFwaVwiO1xyXG5pbXBvcnQgeyBGb3JtQ3JlYXRlQXJncywgRm9ybUNyZWF0ZVJlc3VsdCwgRm9ybVVwZGF0ZUFyZ3MsIEZvcm1VcGRhdGVSZXN1bHQgfSBmcm9tICcuLi9yZWYnO1xyXG5pbXBvcnQgeyBCaWZUYXJnZXRVaVNlcnZpY2UgfSBmcm9tICcuLi9iaWYtbWFudWFsLWNyZWF0aW9uL3NlcnZpY2UvYmlmLXRhcmdldC11aS5zZXJ2aWNlJztcclxuaW1wb3J0IHsgQmlmRGF0YVNlcnZpY2UgfSBmcm9tICcuLi9iaWYtbWFudWFsLWNyZWF0aW9uL3NlcnZpY2UvYmlmLWRhdGEuc2VydmljZSc7XHJcbmltcG9ydCB7IEZvcm1CaWxsQ3JlYXRpb25Qcm9jZXNzRXhlY3V0b3JBcmdzIH0gZnJvbSAnLi4vZW50aXR5L2Zvcm0tcmVzdC9Gb3JtQmlsbENyZWF0aW9uUHJvY2Vzc0V4ZWN1dG9yQXJncyc7XHJcbmltcG9ydCB7IEZvcm1CaWxsQ3JlYXRpb25Qcm9jZXNzRXhlY3V0b3JSZXN1bHQgfSBmcm9tICdAZWRwLWFpZi9ydW50aW1lLWFwaSc7XHJcbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHsgTG9jYWxlUGlwZSB9IGZyb20gJy4uL2JpZi1tYW51YWwtY3JlYXRpb24vcGlwZS9sb2NhbGUucGlwZSc7XHJcbmltcG9ydCB7IE1hbnVhbENyZWF0aW9uTW9kZSB9IGZyb20gJy4uL2VudGl0eS9mb3JtLXJlc3QvTWFudWFsQ3JlYXRpb25Nb2RlJztcclxuXHJcbi8qKlxyXG4gKiDmiYvlt6XnlJ/ljZXnm67moIfnq6/mnI3liqHnsbtcclxuICovXHJcbkBJbmplY3RhYmxlKClcclxuZXhwb3J0IGNsYXNzIEJpZk1hbnVhbENyZWF0aW9uVGFyZ2V0V2ViQ21wU2VydmljZSB7XHJcbiAgICBwdWJsaWMgbG9jYWxlUGlwZTogTG9jYWxlUGlwZTtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHB1YmxpYyBkYXRhU2VydmljZTogQmlmRGF0YVNlcnZpY2UsXHJcbiAgICAgICAgcHVibGljIHRhcmdldFVpU2VydmljZTogQmlmVGFyZ2V0VWlTZXJ2aWNlLFxyXG4gICAgICAgIHB1YmxpYyBzdGF0ZU1hY2hpbmVTZXJ2aWNlOiBTdGF0ZU1hY2hpbmVTZXJ2aWNlLFxyXG4gICAgICAgIHB1YmxpYyBiaW5kaW5nRGF0YTogQmluZGluZ0RhdGEsXHJcbiAgICAgICAgcHVibGljIG1lc3NhZ2VyU2VydmljZTogTWVzc2FnZXJTZXJ2aWNlLFxyXG4gICAgICAgIHB1YmxpYyBjYXJkRGF0YVNlcnZpY2U6IENhcmREYXRhU2VydmljZSxcclxuICAgICAgICBAT3B0aW9uYWwoKSBwdWJsaWMgdmlld01vZGVsOiBWaWV3TW9kZWwsXHJcbiAgICAgICAgQE9wdGlvbmFsKCkgcHVibGljIGZyYW1lQ29udGV4dDogRnJhbWVDb250ZXh0LFxyXG4gICAgKSB7XHJcbiAgICAgICAgdGhpcy5sb2NhbGVQaXBlID0gbmV3IExvY2FsZVBpcGUodGhpcy50YXJnZXRVaVNlcnZpY2UgJiYgdGhpcy50YXJnZXRVaVNlcnZpY2UubG9jYWxlSWQgfHwgJ3poLUNIUycpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5Yqg6L295Y2V5o2u5rWB55Sf5Y2V5rWB56iL5omn6KGM5ZCO5pWw5o2uXHJcbiAgICAgKiBAcGFyYW0gZm9ybVZvSWQg6KGo5Y2V57uR5a6a6KeG5Zu+5a+56LGhIElkXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBiaWZMb2FkKGZvcm1Wb0lkOiBzdHJpbmcpIHtcclxuICAgICAgICBjb25zdCBhcmdzID0gbmV3IEZvcm1DcmVhdGVBcmdzKCk7XHJcbiAgICAgICAgYXJncy5mb3JtVm9JZCA9IGZvcm1Wb0lkO1xyXG4gICAgICAgIC8v6I635Y+W55Sf5Y2V5rWB56iL5omn6KGM57uT5p6cXHJcbiAgICAgICAgdGhpcy50YXJnZXRVaVNlcnZpY2UuZ2V0Q3JlYXRpb25SZXN1bHQoKS5zdWJzY3JpYmUocmVzID0+IHtcclxuICAgICAgICAgICAgYXJncy5ycGNDcmVhdGlvblJ1bGVFeGVjdXRvclJlc3VsdCA9IHJlcy5jcmVhdGlvblJ1bGVFeGVjdXRvclJlc3VsdC5Db252ZXJ0VG9Kc29uKCk7XHJcbiAgICAgICAgICAgIC8v5Yib5bu65a6e5L2T5pWw5o2uXHJcbiAgICAgICAgICAgIHRoaXMuZGF0YVNlcnZpY2UuY3JlYXRlRW50aXR5RGF0YXMoYXJncykuc3Vic2NyaWJlKFxyXG4gICAgICAgICAgICAgICAgKHJlc3VsdDogRm9ybUNyZWF0ZVJlc3VsdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8v5YiH5o2i54q25oCB5py66IezIOKAnOaWsOWinuKAnVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVNYWNoaW5lU2VydmljZS50cmFuc2l0KFwiQ3JlYXRlXCIpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VyU2VydmljZS5lcnJvcihlcnIuZXJyb3IgPT0gbnVsbCA/IGVyci5tZXNzYWdlIDogKGVyci5lcnJvci5NZXNzYWdlIHx8IGVyci5lcnJvci5tZXNzYWdlIHx8IGVyci5tZXNzYWdlKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlj4LnhafvvIzmoLnmja7nm67moIdWTyBJZOaJk+W8gOeUn+WNlea1geeoi+mAieaLqeWZqOW5tuaJp+ihjOmAieS4reeahOeUn+WNlea1geeoi1xyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0gdGFyZ2V0Vm9JZCDljZXmja7mtYHnm67moIfop4blm77lr7nosaEgSWRcclxuICAgICAqIEBwYXJhbSB0YXJnZXREYXRhSWRzIOebruagh+WNleaNruS4u+ihqElk5YiX6KGoXHJcbiAgICAgKiBAcGFyYW0gYml6Rmxvd2NoYXJ0SWQg5Lia5Yqh5Zy65pmv5Zu+SWRcclxuICAgICAqIEBwYXJhbSBtb2RhbE9wdGlvbnMxIOeUn+WNlea1geeoi+mAieaLqeWZqOaooeaAgeahhumFjee9rlxyXG4gICAgICogQHBhcmFtIGN1c3RvbVNlbGVjdG9yTW9kdWxlVXJsIOeUn+WNlea1geeoi+mAieaLqeWZqOiHquWumuS5iemAieaLqeWZqHVybFxyXG4gICAgICogQHBhcmFtIG1vZGFsT3B0aW9uczIg5p2l5rqQ5Y2V5o2u6YCJ5oup5Zmo5qih5oCB5qGG6YWN572uXHJcbiAgICAgKiBAcGFyYW0gZXh0UGFyYW1zMSDmiZPlvIDnlJ/ljZXmtYHnqIvpgInmi6nlmajlvLnnqpfmianlsZXlj4LmlbBcclxuICAgICAqIEBwYXJhbSBleHRQYXJhbXMyIOaJk+W8gOadpea6kOWNleaNrumAieaLqeWZqOaJqeWxleWPguaVsFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcmVmZXJCeVRhcmdldFZvSWQodGFyZ2V0Vm9JZDogc3RyaW5nLCB0YXJnZXREYXRhSWRzPzogc3RyaW5nW10sIGJpekZsb3djaGFydElkPzogc3RyaW5nLCBtb2RhbE9wdGlvbnMxPzogTW9kYWxPcHRpb25zLCBjdXN0b21TZWxlY3Rvck1vZHVsZVVybD86IHN0cmluZywgbW9kYWxPcHRpb25zMj86IE1vZGFsT3B0aW9ucywgZXh0UGFyYW1zMT86IHt9LCBleHRQYXJhbXMyPzogeyBba2V5OiBzdHJpbmddOiBhbnk7IGJvb3RzdHJhcENvbXBvbmVudFNlbGVjdG9yPzogc3RyaW5nOyB9KSB7XHJcbiAgICAgICAgYml6Rmxvd2NoYXJ0SWQgPSBiaXpGbG93Y2hhcnRJZCA9PT0gXCJcIiB8fCBiaXpGbG93Y2hhcnRJZCA9PSBudWxsID8gdW5kZWZpbmVkIDogYml6Rmxvd2NoYXJ0SWQ7XHJcbiAgICAgICAgdGFyZ2V0RGF0YUlkcyA9IHRhcmdldERhdGFJZHMgYXMgYW55ID09PSBcIlwiIHx8IHRhcmdldERhdGFJZHMgPT0gbnVsbCA/IFt0aGlzLmJpbmRpbmdEYXRhLmdldE9iamVjdCgpLmlkXSA6IHRhcmdldERhdGFJZHM7XHJcbiAgICAgICAgbW9kYWxPcHRpb25zMSA9IG1vZGFsT3B0aW9uczEgYXMgYW55ID09PSBcIlwiIHx8IG1vZGFsT3B0aW9uczEgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IG1vZGFsT3B0aW9uczE7XHJcbiAgICAgICAgY3VzdG9tU2VsZWN0b3JNb2R1bGVVcmwgPSBjdXN0b21TZWxlY3Rvck1vZHVsZVVybCA9PT0gXCJcIiB8fCBjdXN0b21TZWxlY3Rvck1vZHVsZVVybCA9PSBudWxsID8gdW5kZWZpbmVkIDogY3VzdG9tU2VsZWN0b3JNb2R1bGVVcmw7XHJcbiAgICAgICAgbW9kYWxPcHRpb25zMiA9IG1vZGFsT3B0aW9uczIgYXMgYW55ID09PSBcIlwiIHx8IG1vZGFsT3B0aW9uczIgPT0gbnVsbCA/IHtcclxuICAgICAgICAgICAgdGl0bGU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oXCJzZWxlY3RVcHN0cmVhbUJpbGxcIiksXHJcbiAgICAgICAgICAgIHdpZHRoOiAxMTAwLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IDU1MCxcclxuICAgICAgICB9IDogbW9kYWxPcHRpb25zMjtcclxuICAgICAgICBleHRQYXJhbXMxID0gZXh0UGFyYW1zMSA9PT0gXCJcIiB8fCBleHRQYXJhbXMxID09IG51bGwgPyB1bmRlZmluZWQgOiBleHRQYXJhbXMxO1xyXG4gICAgICAgIGV4dFBhcmFtczIgPSBleHRQYXJhbXMyIGFzIGFueSA9PT0gXCJcIiB8fCBleHRQYXJhbXMyID09IG51bGwgPyB1bmRlZmluZWQgOiBleHRQYXJhbXMyO1xyXG5cclxuICAgICAgICAvL+abtOaWsOihqOWNleeOsOacieWPmOabtOmbhlxyXG4gICAgICAgIHRoaXMuY2FyZERhdGFTZXJ2aWNlLnVwZGF0ZSgpLnN1YnNjcmliZShcclxuICAgICAgICAgICAgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy/miZPlvIDnlJ/ljZXmtYHnqIvpgInmi6nlmahcclxuICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0VWlTZXJ2aWNlLm9wZW5CaWxsQ3JlYXRpb25Qcm9jZXNzU2VsZWN0b3I0UHVsbCh0YXJnZXRWb0lkLCBiaXpGbG93Y2hhcnRJZCwgbW9kYWxPcHRpb25zMSwgY3VzdG9tU2VsZWN0b3JNb2R1bGVVcmwsIGV4dFBhcmFtczEpLnN1YnNjcmliZShcclxuICAgICAgICAgICAgICAgICAgICAoY3A6IElSdFNsaW1CaWxsQ3JlYXRpb25Qcm9jZXNzRW50aXR5RXgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy/ojrflj5booajljZXphY3nva5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhU2VydmljZS5nZXRGb3JtU2V0dGluZ3NCeUlkKGNwLmZvcm1TZXR0aW5nc0lkKS5zdWJzY3JpYmUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZm9ybVNldHRpbmdzOiBGb3JtU2V0dGluZ3MpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+aJk+W8gOadpea6kOWNleaNrumAieaLqeWZqOaooeaAgeahhlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0VWlTZXJ2aWNlLm9wZW5Tb3VyY2VEYXRhU2VsZWN0b3I0UHVsbChmb3JtU2V0dGluZ3MsIG1vZGFsT3B0aW9uczIsIGV4dFBhcmFtczIpLnN1YnNjcmliZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGVudGl0aWVzOiBFbnRpdHlbXSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/mnoTpgKDnlJ/ljZXmtYHnqIvmiafooYzlj4LmlbDlrp7kvZNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFyZ3MgPSBuZXcgRm9ybUJpbGxDcmVhdGlvblByb2Nlc3NFeGVjdXRvckFyZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MuYmlsbENyZWF0aW9uUHJvY2Vzc0lkID0gY3AuaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzLmNyZWF0aW9uUnVsZUlkID0gY3AuY3JlYXRpb25SdWxlSWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL0Zvcm1CaWxsQ3JlYXRpb25Qcm9jZXNzRXhlY3V0b3JBcmdz55qEc291cmNlVm9FbnRpdHlEYXRhc+WxnuaAp+S4uuWJjeerr+WunuS9k+W6j+WIl+WMluWQjueahOWtl+espuS4suWIl+ihqFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9zb3VyY2VWb0VudGl0eURhdGFz5YiX6KGo5Lit55qE5q+P5Liq5a2X56ym5Liy77yM5Zyo57uT5p6E5LiK5bqU5LiO5Y2V5o2u5rWB5a6a5LmJ5Lit5omA6YCJ5Lit55qE5LiK5ri46KeG5Zu+5a+56LGh5LiA6Ie044CCXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzLnNvdXJjZVZvRW50aXR5RGF0YXMgPSBlbnRpdGllcy5tYXAoaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBFbnRpdHkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5aaC5p6c5pivRW50aXR5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShpdGVtLnRvSlNPTihmYWxzZSwgdHJ1ZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXRlbVtcIl9fdHlwZV9fXCJdID09IFwiQmluZGluZ09iamVjdFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5aaC5p6c5p2l6IeqQmluZGluZ0RhdGFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmluZGluZ09iamVjdCA9IGl0ZW0gYXMgQmluZGluZ09iamVjdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGJpbmRpbmdPYmplY3QudG9KU09OKHsgdXNlRnVsbE11bHRpTGFuZ1Byb3BlcnR5OiB0cnVlIH0pKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gaXRlbSBhcyBFbnRpdHk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShlLnRvSlNPTihmYWxzZSwgdHJ1ZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJncy50YXJnZXRWb0RhdGFJZHMgPSB0YXJnZXREYXRhSWRzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJncy5tYW51YWxDcmVhdGlvbk1vZGUgPSBNYW51YWxDcmVhdGlvbk1vZGUuUHVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5omn6KGM55Sf5Y2V5rWB56iLXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFTZXJ2aWNlLmV4ZWN1dGVCaWxsQ3JlYXRpb25Qcm9jZXNzKGFyZ3MpLnN1YnNjcmliZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocmVzdWx0OiBGb3JtQmlsbENyZWF0aW9uUHJvY2Vzc0V4ZWN1dG9yUmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFyZ3MgPSBuZXcgRm9ybVVwZGF0ZUFyZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9NYXBwaW5n5omn6KGM5p2h5Lu25Yik5pat57uT5p6c5Li6dHJ1ZeaXtuaJjeS8muaJp+ihjOeUn+WNlea1geeoi+W+l+WIsOeUn+WNlee7k+aenFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmNvbmRpdGlvblJlc3VsdC5jb25kaXRpb25FeGVjdXRpb25SZXN1bHQgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/nlJ/ljZXnu5PmnpzkuI3kuLrnqbpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuY3JlYXRpb25SdWxlRXhlY3V0b3JSZXN1bHQgJiYgcmVzdWx0LmNyZWF0aW9uUnVsZUV4ZWN1dG9yUmVzdWx0Lm1hcHBpbmdSZXN1bHRzICYmIHJlc3VsdC5jcmVhdGlvblJ1bGVFeGVjdXRvclJlc3VsdC5tYXBwaW5nUmVzdWx0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJncy5ycGNDcmVhdGlvblJ1bGVFeGVjdXRvclJlc3VsdCA9IHJlc3VsdC5jcmVhdGlvblJ1bGVFeGVjdXRvclJlc3VsdC5Db252ZXJ0VG9Kc29uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/mm7TmlrDooajljZXmlbDmja5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFTZXJ2aWNlLnVwZGF0ZUVudGl0eURhdGFzKGFyZ3MpLnN1YnNjcmliZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHJlczogRm9ybVVwZGF0ZVJlc3VsdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/ph43mlrDliqDovb3ooajljZXmlbDmja5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2FyZERhdGFTZXJ2aWNlLmxvYWQodGFyZ2V0RGF0YUlkc1swXSkuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXJTZXJ2aWNlLmVycm9yKGVyci5lcnJvciA9PSBudWxsID8gZXJyLm1lc3NhZ2UgOiAoZXJyLmVycm9yLk1lc3NhZ2UgfHwgZXJyLmVycm9yLm1lc3NhZ2UgfHwgZXJyLm1lc3NhZ2UpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXJTZXJ2aWNlLmVycm9yKHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oXCJjcmVhdGlvblJlc3VsdEVtcHR5XCIpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5Li6ZmFsc2Xml7blj6/lvpfliLDphY3nva7nmoTplJnor6/mj5DnpLrkv6Hmga9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXJTZXJ2aWNlLmVycm9yKHJlc3VsdC5jb25kaXRpb25SZXN1bHQubWVzc2FnZSB8fCB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKFwiY3JlYXRpb25FeGVjdXRpb25FcnJvclwiKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VyU2VydmljZS5lcnJvcihlcnIuZXJyb3IgPT0gbnVsbCA/IGVyci5tZXNzYWdlIDogKGVyci5lcnJvci5NZXNzYWdlIHx8IGVyci5lcnJvci5tZXNzYWdlIHx8IGVyci5tZXNzYWdlKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog54m55a6a5Y+C54Wn77yM5qC55o2u5p2l5rqQVk8gSWTlkoznm67moIdWTyBJZOaJk+W8gOeUn+WNlea1geeoi+mAieaLqeWZqOW5tuaJp+ihjOmAieS4reeahOeUn+WNlea1geeoi1xyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0gc291cmNlVm9JZCDljZXmja7mtYHmnaXmupDop4blm77lr7nosaEgSWRcclxuICAgICAqIEBwYXJhbSB0YXJnZXRWb0lkIOWNleaNrua1geebruagh+inhuWbvuWvueixoSBJZFxyXG4gICAgICogQHBhcmFtIHRhcmdldERhdGFJZHMg55uu5qCH5Y2V5o2u5Li76KGoSWTliJfooahcclxuICAgICAqIEBwYXJhbSBiaXpGbG93Y2hhcnRJZCDkuJrliqHlnLrmma/lm75JZFxyXG4gICAgICogQHBhcmFtIG1vZGFsT3B0aW9uczEg55Sf5Y2V5rWB56iL6YCJ5oup5Zmo5qih5oCB5qGG6YWN572uXHJcbiAgICAgKiBAcGFyYW0gY3VzdG9tU2VsZWN0b3JNb2R1bGVVcmwg55Sf5Y2V5rWB56iL6YCJ5oup5Zmo6Ieq5a6a5LmJ6YCJ5oup5ZmodXJsXHJcbiAgICAgKiBAcGFyYW0gbW9kYWxPcHRpb25zMiDmnaXmupDljZXmja7pgInmi6nlmajmqKHmgIHmoYbphY3nva5cclxuICAgICAqIEBwYXJhbSBleHRQYXJhbXMxIOaJk+W8gOeUn+WNlea1geeoi+mAieaLqeWZqOW8ueeql+aJqeWxleWPguaVsFxyXG4gICAgICogQHBhcmFtIGV4dFBhcmFtczIg5omT5byA5p2l5rqQ5Y2V5o2u6YCJ5oup5Zmo5omp5bGV5Y+C5pWwXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyByZWZlckJ5U291cmNlVm9JZEFuZFRhcmdldFZvSWQoc291cmNlVm9JZDogc3RyaW5nLCB0YXJnZXRWb0lkOiBzdHJpbmcsIHRhcmdldERhdGFJZHM/OiBzdHJpbmdbXSwgYml6Rmxvd2NoYXJ0SWQ/OiBzdHJpbmcsIG1vZGFsT3B0aW9uczE/OiBNb2RhbE9wdGlvbnMsIGN1c3RvbVNlbGVjdG9yTW9kdWxlVXJsPzogc3RyaW5nLCBtb2RhbE9wdGlvbnMyPzogTW9kYWxPcHRpb25zLCBleHRQYXJhbXMxPzoge30sIGV4dFBhcmFtczI/OiB7IFtrZXk6IHN0cmluZ106IGFueTsgYm9vdHN0cmFwQ29tcG9uZW50U2VsZWN0b3I/OiBzdHJpbmc7IH0pIHtcclxuICAgICAgICBiaXpGbG93Y2hhcnRJZCA9IGJpekZsb3djaGFydElkID09PSBcIlwiIHx8IGJpekZsb3djaGFydElkID09IG51bGwgPyB1bmRlZmluZWQgOiBiaXpGbG93Y2hhcnRJZDtcclxuICAgICAgICB0YXJnZXREYXRhSWRzID0gdGFyZ2V0RGF0YUlkcyBhcyBhbnkgPT09IFwiXCIgfHwgdGFyZ2V0RGF0YUlkcyA9PSBudWxsID8gW3RoaXMuYmluZGluZ0RhdGEuZ2V0T2JqZWN0KCkuaWRdIDogdGFyZ2V0RGF0YUlkcztcclxuICAgICAgICBtb2RhbE9wdGlvbnMxID0gbW9kYWxPcHRpb25zMSBhcyBhbnkgPT09IFwiXCIgfHwgbW9kYWxPcHRpb25zMSA9PSBudWxsID8gdW5kZWZpbmVkIDogbW9kYWxPcHRpb25zMTtcclxuICAgICAgICBjdXN0b21TZWxlY3Rvck1vZHVsZVVybCA9IGN1c3RvbVNlbGVjdG9yTW9kdWxlVXJsID09PSBcIlwiIHx8IGN1c3RvbVNlbGVjdG9yTW9kdWxlVXJsID09IG51bGwgPyB1bmRlZmluZWQgOiBjdXN0b21TZWxlY3Rvck1vZHVsZVVybDtcclxuICAgICAgICBtb2RhbE9wdGlvbnMyID0gbW9kYWxPcHRpb25zMiBhcyBhbnkgPT09IFwiXCIgfHwgbW9kYWxPcHRpb25zMiA9PSBudWxsID8ge1xyXG4gICAgICAgICAgICB0aXRsZTogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybShcInNlbGVjdFVwc3RyZWFtQmlsbFwiKSxcclxuICAgICAgICAgICAgd2lkdGg6IDExMDAsXHJcbiAgICAgICAgICAgIGhlaWdodDogNTUwLFxyXG4gICAgICAgIH0gOiBtb2RhbE9wdGlvbnMyO1xyXG4gICAgICAgIGV4dFBhcmFtczEgPSBleHRQYXJhbXMxID09PSBcIlwiIHx8IGV4dFBhcmFtczEgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IGV4dFBhcmFtczE7XHJcbiAgICAgICAgZXh0UGFyYW1zMiA9IGV4dFBhcmFtczIgYXMgYW55ID09PSBcIlwiIHx8IGV4dFBhcmFtczIgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IGV4dFBhcmFtczI7XHJcblxyXG4gICAgICAgIC8v5pu05paw6KGo5Y2V546w5pyJ5Y+Y5pu06ZuGXHJcbiAgICAgICAgdGhpcy5jYXJkRGF0YVNlcnZpY2UudXBkYXRlKCkuc3Vic2NyaWJlKFxyXG4gICAgICAgICAgICAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvL+aJk+W8gOeUn+WNlea1geeoi+mAieaLqeWZqFxyXG4gICAgICAgICAgICAgICAgdGhpcy50YXJnZXRVaVNlcnZpY2Uub3BlbkJpbGxDcmVhdGlvblByb2Nlc3NTZWxlY3RvcjRTcGVjaWZpY1B1bGwoc291cmNlVm9JZCwgdGFyZ2V0Vm9JZCwgYml6Rmxvd2NoYXJ0SWQsIG1vZGFsT3B0aW9uczEsIGN1c3RvbVNlbGVjdG9yTW9kdWxlVXJsLCBleHRQYXJhbXMxKS5zdWJzY3JpYmUoXHJcbiAgICAgICAgICAgICAgICAgICAgKGNwOiBJUnRTbGltQmlsbENyZWF0aW9uUHJvY2Vzc0VudGl0eUV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8v6I635Y+W6KGo5Y2V6YWN572uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVNlcnZpY2UuZ2V0Rm9ybVNldHRpbmdzQnlJZChjcC5mb3JtU2V0dGluZ3NJZCkuc3Vic2NyaWJlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKGZvcm1TZXR0aW5nczogRm9ybVNldHRpbmdzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/miZPlvIDmnaXmupDljZXmja7pgInmi6nlmajmqKHmgIHmoYZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRhcmdldFVpU2VydmljZS5vcGVuU291cmNlRGF0YVNlbGVjdG9yNFB1bGwoZm9ybVNldHRpbmdzLCBtb2RhbE9wdGlvbnMyLCBleHRQYXJhbXMyKS5zdWJzY3JpYmUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChlbnRpdGllczogRW50aXR5W10pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5p6E6YCg55Sf5Y2V5rWB56iL5omn6KGM5Y+C5pWw5a6e5L2TXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhcmdzID0gbmV3IEZvcm1CaWxsQ3JlYXRpb25Qcm9jZXNzRXhlY3V0b3JBcmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzLmJpbGxDcmVhdGlvblByb2Nlc3NJZCA9IGNwLmlkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJncy5jcmVhdGlvblJ1bGVJZCA9IGNwLmNyZWF0aW9uUnVsZUlkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9Gb3JtQmlsbENyZWF0aW9uUHJvY2Vzc0V4ZWN1dG9yQXJnc+eahHNvdXJjZVZvRW50aXR5RGF0YXPlsZ7mgKfkuLrliY3nq6/lrp7kvZPluo/liJfljJblkI7nmoTlrZfnrKbkuLLliJfooahcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vc291cmNlVm9FbnRpdHlEYXRhc+WIl+ihqOS4reeahOavj+S4quWtl+espuS4su+8jOWcqOe7k+aehOS4iuW6lOS4juWNleaNrua1geWumuS5ieS4reaJgOmAieS4reeahOS4iua4uOinhuWbvuWvueixoeS4gOiHtOOAglxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJncy5zb3VyY2VWb0VudGl0eURhdGFzID0gZW50aXRpZXMubWFwKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtIGluc3RhbmNlb2YgRW50aXR5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWmguaenOaYr0VudGl0eVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoaXRlbS50b0pTT04oZmFsc2UsIHRydWUpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGl0ZW1bXCJfX3R5cGVfX1wiXSA9PSBcIkJpbmRpbmdPYmplY3RcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+WmguaenOadpeiHqkJpbmRpbmdEYXRhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJpbmRpbmdPYmplY3QgPSBpdGVtIGFzIEJpbmRpbmdPYmplY3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShiaW5kaW5nT2JqZWN0LnRvSlNPTih7IHVzZUZ1bGxNdWx0aUxhbmdQcm9wZXJ0eTogdHJ1ZSB9KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IGl0ZW0gYXMgRW50aXR5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZS50b0pTT04oZmFsc2UsIHRydWUpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MudGFyZ2V0Vm9EYXRhSWRzID0gdGFyZ2V0RGF0YUlkcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MubWFudWFsQ3JlYXRpb25Nb2RlID0gTWFudWFsQ3JlYXRpb25Nb2RlLlNwZWNpZmljUHVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5omn6KGM55Sf5Y2V5rWB56iLXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFTZXJ2aWNlLmV4ZWN1dGVCaWxsQ3JlYXRpb25Qcm9jZXNzKGFyZ3MpLnN1YnNjcmliZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocmVzdWx0OiBGb3JtQmlsbENyZWF0aW9uUHJvY2Vzc0V4ZWN1dG9yUmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFyZ3MgPSBuZXcgRm9ybVVwZGF0ZUFyZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9NYXBwaW5n5omn6KGM5p2h5Lu25Yik5pat57uT5p6c5Li6dHJ1ZeaXtuaJjeS8muaJp+ihjOeUn+WNlea1geeoi+W+l+WIsOeUn+WNlee7k+aenFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmNvbmRpdGlvblJlc3VsdC5jb25kaXRpb25FeGVjdXRpb25SZXN1bHQgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/nlJ/ljZXnu5PmnpzkuI3kuLrnqbpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuY3JlYXRpb25SdWxlRXhlY3V0b3JSZXN1bHQgJiYgcmVzdWx0LmNyZWF0aW9uUnVsZUV4ZWN1dG9yUmVzdWx0Lm1hcHBpbmdSZXN1bHRzICYmIHJlc3VsdC5jcmVhdGlvblJ1bGVFeGVjdXRvclJlc3VsdC5tYXBwaW5nUmVzdWx0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJncy5ycGNDcmVhdGlvblJ1bGVFeGVjdXRvclJlc3VsdCA9IHJlc3VsdC5jcmVhdGlvblJ1bGVFeGVjdXRvclJlc3VsdC5Db252ZXJ0VG9Kc29uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/mm7TmlrDooajljZXmlbDmja5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFTZXJ2aWNlLnVwZGF0ZUVudGl0eURhdGFzKGFyZ3MpLnN1YnNjcmliZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHJlczogRm9ybVVwZGF0ZVJlc3VsdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/ph43mlrDliqDovb3ooajljZXmlbDmja5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2FyZERhdGFTZXJ2aWNlLmxvYWQodGFyZ2V0RGF0YUlkc1swXSkuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXJTZXJ2aWNlLmVycm9yKGVyci5lcnJvciA9PSBudWxsID8gZXJyLm1lc3NhZ2UgOiAoZXJyLmVycm9yLk1lc3NhZ2UgfHwgZXJyLmVycm9yLm1lc3NhZ2UgfHwgZXJyLm1lc3NhZ2UpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXJTZXJ2aWNlLmVycm9yKHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oXCJjcmVhdGlvblJlc3VsdEVtcHR5XCIpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5Li6ZmFsc2Xml7blj6/lvpfliLDphY3nva7nmoTplJnor6/mj5DnpLrkv6Hmga9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXJTZXJ2aWNlLmVycm9yKHJlc3VsdC5jb25kaXRpb25SZXN1bHQubWVzc2FnZSB8fCB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKFwiY3JlYXRpb25FeGVjdXRpb25FcnJvclwiKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VyU2VydmljZS5lcnJvcihlcnIuZXJyb3IgPT0gbnVsbCA/IGVyci5tZXNzYWdlIDogKGVyci5lcnJvci5NZXNzYWdlIHx8IGVyci5lcnJvci5tZXNzYWdlIHx8IGVyci5tZXNzYWdlKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog54m55a6a5Y+C54Wn77yM5qC55o2u55Sf5Y2V5rWB56iLSUTmiafooYzpgInkuK3nmoTnlJ/ljZXmtYHnqItcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHByb2Nlc3NJZCDljZXmja7mtYHnlJ/ljZXmtYHnqIsgSWRcclxuICAgICAqIEBwYXJhbSB0YXJnZXREYXRhSWRzIOebruagh+WNleaNruS4u+ihqElk5YiX6KGoXHJcbiAgICAgKiBAcGFyYW0gbW9kYWxPcHRpb25zIOadpea6kOWNleaNrumAieaLqeWZqOaooeaAgeahhumFjee9rlxyXG4gICAgICogQHBhcmFtIGV4dFBhcmFtcyDmiZPlvIDmnaXmupDljZXmja7pgInmi6nlmajmianlsZXlj4LmlbBcclxuICAgICAqL1xyXG4gICAgcHVibGljIHJlZmVyQnlDcmVhdGlvblByb2Nlc3NJZChwcm9jZXNzSWQ6IHN0cmluZywgdGFyZ2V0RGF0YUlkcz86IHN0cmluZ1tdLCBtb2RhbE9wdGlvbnM/OiBNb2RhbE9wdGlvbnMsIGV4dFBhcmFtcz86IHsgW2tleTogc3RyaW5nXTogYW55OyBib290c3RyYXBDb21wb25lbnRTZWxlY3Rvcj86IHN0cmluZzsgfSkge1xyXG4gICAgICAgIHRhcmdldERhdGFJZHMgPSB0YXJnZXREYXRhSWRzIGFzIGFueSA9PT0gXCJcIiB8fCB0YXJnZXREYXRhSWRzID09IG51bGwgPyBbdGhpcy5iaW5kaW5nRGF0YS5nZXRPYmplY3QoKS5pZF0gOiB0YXJnZXREYXRhSWRzO1xyXG4gICAgICAgIG1vZGFsT3B0aW9ucyA9IG1vZGFsT3B0aW9ucyBhcyBhbnkgPT09IFwiXCIgfHwgbW9kYWxPcHRpb25zID09IG51bGwgPyB7XHJcbiAgICAgICAgICAgIHRpdGxlOiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKFwic2VsZWN0VXBzdHJlYW1CaWxsXCIpLFxyXG4gICAgICAgICAgICB3aWR0aDogMTEwMCxcclxuICAgICAgICAgICAgaGVpZ2h0OiA1NTAsXHJcbiAgICAgICAgfSA6IG1vZGFsT3B0aW9ucztcclxuICAgICAgICBleHRQYXJhbXMgPSBleHRQYXJhbXMgYXMgYW55ID09PSBcIlwiIHx8IGV4dFBhcmFtcyA9PSBudWxsID8gdW5kZWZpbmVkIDogZXh0UGFyYW1zO1xyXG5cclxuICAgICAgICAvL+abtOaWsOihqOWNleeOsOacieWPmOabtOmbhlxyXG4gICAgICAgIHRoaXMuY2FyZERhdGFTZXJ2aWNlLnVwZGF0ZSgpLnN1YnNjcmliZShcclxuICAgICAgICAgICAgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy/miZPlvIDnlJ/ljZXmtYHnqIvpgInmi6nlmahcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YVNlcnZpY2UuZ2V0U2xpbUJpbGxDcmVhdGlvblByb2Nlc3NFbnRpdHlFeEJ5SWQocHJvY2Vzc0lkKS5zdWJzY3JpYmUoXHJcbiAgICAgICAgICAgICAgICAgICAgKGNwOiBJUnRTbGltQmlsbENyZWF0aW9uUHJvY2Vzc0VudGl0eUV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8v6I635Y+W6KGo5Y2V6YWN572uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVNlcnZpY2UuZ2V0Rm9ybVNldHRpbmdzQnlJZChjcC5mb3JtU2V0dGluZ3NJZCkuc3Vic2NyaWJlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKGZvcm1TZXR0aW5nczogRm9ybVNldHRpbmdzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/miZPlvIDmnaXmupDljZXmja7pgInmi6nlmajmqKHmgIHmoYZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRhcmdldFVpU2VydmljZS5vcGVuU291cmNlRGF0YVNlbGVjdG9yNFB1bGwoZm9ybVNldHRpbmdzLCBtb2RhbE9wdGlvbnMsIGV4dFBhcmFtcykuc3Vic2NyaWJlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZW50aXRpZXM6IEVudGl0eVtdKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+aehOmAoOeUn+WNlea1geeoi+aJp+ihjOWPguaVsOWunuS9k1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYXJncyA9IG5ldyBGb3JtQmlsbENyZWF0aW9uUHJvY2Vzc0V4ZWN1dG9yQXJncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJncy5iaWxsQ3JlYXRpb25Qcm9jZXNzSWQgPSBjcC5pZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MuY3JlYXRpb25SdWxlSWQgPSBjcC5jcmVhdGlvblJ1bGVJZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vRm9ybUJpbGxDcmVhdGlvblByb2Nlc3NFeGVjdXRvckFyZ3PnmoRzb3VyY2VWb0VudGl0eURhdGFz5bGe5oCn5Li65YmN56uv5a6e5L2T5bqP5YiX5YyW5ZCO55qE5a2X56ym5Liy5YiX6KGoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3NvdXJjZVZvRW50aXR5RGF0YXPliJfooajkuK3nmoTmr4/kuKrlrZfnrKbkuLLvvIzlnKjnu5PmnoTkuIrlupTkuI7ljZXmja7mtYHlrprkuYnkuK3miYDpgInkuK3nmoTkuIrmuLjop4blm77lr7nosaHkuIDoh7TjgIJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3Muc291cmNlVm9FbnRpdHlEYXRhcyA9IGVudGl0aWVzLm1hcChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIEVudGl0eSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDlpoLmnpzmmK9FbnRpdHlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGl0ZW0udG9KU09OKGZhbHNlLCB0cnVlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpdGVtW1wiX190eXBlX19cIl0gPT0gXCJCaW5kaW5nT2JqZWN0XCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lpoLmnpzmnaXoh6pCaW5kaW5nRGF0YVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBiaW5kaW5nT2JqZWN0ID0gaXRlbSBhcyBCaW5kaW5nT2JqZWN0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoYmluZGluZ09iamVjdC50b0pTT04oeyB1c2VGdWxsTXVsdGlMYW5nUHJvcGVydHk6IHRydWUgfSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBpdGVtIGFzIEVudGl0eTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGUudG9KU09OKGZhbHNlLCB0cnVlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzLnRhcmdldFZvRGF0YUlkcyA9IHRhcmdldERhdGFJZHM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzLm1hbnVhbENyZWF0aW9uTW9kZSA9IE1hbnVhbENyZWF0aW9uTW9kZS5TcGVjaWZpY1B1bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+aJp+ihjOeUn+WNlea1geeoi1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhU2VydmljZS5leGVjdXRlQmlsbENyZWF0aW9uUHJvY2VzcyhhcmdzKS5zdWJzY3JpYmUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHJlc3VsdDogRm9ybUJpbGxDcmVhdGlvblByb2Nlc3NFeGVjdXRvclJlc3VsdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhcmdzID0gbmV3IEZvcm1VcGRhdGVBcmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vTWFwcGluZ+aJp+ihjOadoeS7tuWIpOaWree7k+aenOS4unRydWXml7bmiY3kvJrmiafooYznlJ/ljZXmtYHnqIvlvpfliLDnlJ/ljZXnu5PmnpxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jb25kaXRpb25SZXN1bHQuY29uZGl0aW9uRXhlY3V0aW9uUmVzdWx0ID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v55Sf5Y2V57uT5p6c5LiN5Li656m6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmNyZWF0aW9uUnVsZUV4ZWN1dG9yUmVzdWx0ICYmIHJlc3VsdC5jcmVhdGlvblJ1bGVFeGVjdXRvclJlc3VsdC5tYXBwaW5nUmVzdWx0cyAmJiByZXN1bHQuY3JlYXRpb25SdWxlRXhlY3V0b3JSZXN1bHQubWFwcGluZ1Jlc3VsdHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MucnBjQ3JlYXRpb25SdWxlRXhlY3V0b3JSZXN1bHQgPSByZXN1bHQuY3JlYXRpb25SdWxlRXhlY3V0b3JSZXN1bHQuQ29udmVydFRvSnNvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5pu05paw6KGo5Y2V5pWw5o2uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhU2VydmljZS51cGRhdGVFbnRpdHlEYXRhcyhhcmdzKS5zdWJzY3JpYmUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChyZXM6IEZvcm1VcGRhdGVSZXN1bHQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v6YeN5paw5Yqg6L296KGo5Y2V5pWw5o2uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhcmREYXRhU2VydmljZS5sb2FkKHRhcmdldERhdGFJZHNbMF0pLnN1YnNjcmliZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VyU2VydmljZS5lcnJvcihlcnIuZXJyb3IgPT0gbnVsbCA/IGVyci5tZXNzYWdlIDogKGVyci5lcnJvci5NZXNzYWdlIHx8IGVyci5lcnJvci5tZXNzYWdlIHx8IGVyci5tZXNzYWdlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VyU2VydmljZS5lcnJvcih0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKFwiY3JlYXRpb25SZXN1bHRFbXB0eVwiKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+S4umZhbHNl5pe25Y+v5b6X5Yiw6YWN572u55qE6ZSZ6K+v5o+Q56S65L+h5oGvXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VyU2VydmljZS5lcnJvcihyZXN1bHQuY29uZGl0aW9uUmVzdWx0Lm1lc3NhZ2UgfHwgdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybShcImNyZWF0aW9uRXhlY3V0aW9uRXJyb3JcIikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlclNlcnZpY2UuZXJyb3IoZXJyLmVycm9yID09IG51bGwgPyBlcnIubWVzc2FnZSA6IChlcnIuZXJyb3IuTWVzc2FnZSB8fCBlcnIuZXJyb3IubWVzc2FnZSB8fCBlcnIubWVzc2FnZSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBEZXByZWNhdGVkIOW3suW8g+eUqO+8jOivt+S9v+eUqCB7QGxpbmsgZ2V0Q3JlYXRpb25SZXN1bHQgfVxyXG4gICAgICog6I635Y+W5p2l5rqQ55WM6Z2i5Lyg5YWl55qE55Sf5Y2V5rWB56iL5omn6KGM57uT5p6cXHJcbiAgICAgKiBAcmV0dXJucyBjcmVhdGlvblJlc3VsdCDnlJ/ljZXmtYHnqIvmiafooYznu5PmnpwgQHR5cGUgeyBGb3JtQmlsbENyZWF0aW9uUHJvY2Vzc0V4ZWN1dG9yUmVzdWx0IH1cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldEZvcm1CaWxsQ3JlYXRpb25Qcm9jZXNzRXhlY3V0b3JSZXN1bHQoKTogRm9ybUJpbGxDcmVhdGlvblByb2Nlc3NFeGVjdXRvclJlc3VsdCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudGFyZ2V0VWlTZXJ2aWNlLmdldEZvcm1CaWxsQ3JlYXRpb25Qcm9jZXNzRXhlY3V0b3JSZXN1bHQoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOagueaNruebruagh1ZPIElk5omT5byA55Sf5Y2V5rWB56iL6YCJ5oup5Zmo5p+l5om+55Sf5Y2V5rWB56iLXHJcbiAgICAgKiBAcGFyYW0gdGFyZ2V0Vm9JZCDnm67moIdWTyBJZFxyXG4gICAgICogQHBhcmFtIGJpekZsb3djaGFydElkIOS4muWKoeWcuuaZr+WbvklkXHJcbiAgICAgKiBAcGFyYW0gbW9kYWxPcHRpb25zIOaooeaAgeahhumFjee9rlxyXG4gICAgICogQHBhcmFtIGN1c3RvbVNlbGVjdG9yTW9kdWxlVXJsIOiHquWumuS5iemAieaLqeWZqFVybCBcclxuICAgICAqIEBwYXJhbSBleHRQYXJhbXMg5omp5bGV5Y+C5pWwXHJcbiAgICAgKiBAcmV0dXJucyBjcmVhdGlvblByb2Nlc3Mg55Sf5Y2V5rWB56iLIEB0eXBlIHsgT2JzZXJ2YWJsZTxJUnRTbGltQmlsbENyZWF0aW9uUHJvY2Vzc0VudGl0eUV4PiB9XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBvcGVuQmlsbENyZWF0aW9uUHJvY2Vzc1NlbGVjdG9yNFB1bGwodGFyZ2V0Vm9JZDogc3RyaW5nLCBiaXpGbG93Y2hhcnRJZD86IHN0cmluZywgbW9kYWxPcHRpb25zPzogTW9kYWxPcHRpb25zLCBjdXN0b21TZWxlY3Rvck1vZHVsZVVybD86IHN0cmluZywgZXh0UGFyYW1zPzoge30pOiBPYnNlcnZhYmxlPElSdFNsaW1CaWxsQ3JlYXRpb25Qcm9jZXNzRW50aXR5RXg+IHtcclxuICAgICAgICBiaXpGbG93Y2hhcnRJZCA9IGJpekZsb3djaGFydElkID09PSBcIlwiIHx8IGJpekZsb3djaGFydElkID09IG51bGwgPyB1bmRlZmluZWQgOiBiaXpGbG93Y2hhcnRJZDtcclxuICAgICAgICBtb2RhbE9wdGlvbnMgPSBtb2RhbE9wdGlvbnMgYXMgYW55ID09PSBcIlwiIHx8IG1vZGFsT3B0aW9ucyA9PSBudWxsID8gdW5kZWZpbmVkIDogbW9kYWxPcHRpb25zO1xyXG4gICAgICAgIGN1c3RvbVNlbGVjdG9yTW9kdWxlVXJsID0gY3VzdG9tU2VsZWN0b3JNb2R1bGVVcmwgPT09IFwiXCIgfHwgY3VzdG9tU2VsZWN0b3JNb2R1bGVVcmwgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IGN1c3RvbVNlbGVjdG9yTW9kdWxlVXJsO1xyXG4gICAgICAgIGV4dFBhcmFtcyA9IGV4dFBhcmFtcyA9PT0gXCJcIiB8fCBleHRQYXJhbXMgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IGV4dFBhcmFtcztcclxuICAgICAgICAvL+aJk+W8gOeUn+WNlea1geeoi+mAieaLqeWZqFxyXG4gICAgICAgIHJldHVybiB0aGlzLnRhcmdldFVpU2VydmljZS5vcGVuQmlsbENyZWF0aW9uUHJvY2Vzc1NlbGVjdG9yNFB1bGwodGFyZ2V0Vm9JZCwgYml6Rmxvd2NoYXJ0SWQsIG1vZGFsT3B0aW9ucywgY3VzdG9tU2VsZWN0b3JNb2R1bGVVcmwsIGV4dFBhcmFtcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmoLnmja7mnaXmupBWTyBJZOWSjOebruagh1ZPIElk5omT5byA55Sf5Y2V5rWB56iL6YCJ5oup5Zmo5p+l5om+55Sf5Y2V5rWB56iLXHJcbiAgICAgKiBAcGFyYW0gc291cmNlVm9JZCDmnaXmupBWTyBJZFxyXG4gICAgICogQHBhcmFtIHRhcmdldFZvSWQg55uu5qCHVk8gSWRcclxuICAgICAqIEBwYXJhbSBiaXpGbG93Y2hhcnRJZCDkuJrliqHlnLrmma/lm75JZFxyXG4gICAgICogQHBhcmFtIG1vZGFsT3B0aW9ucyDmqKHmgIHmoYbphY3nva5cclxuICAgICAqIEBwYXJhbSBjdXN0b21TZWxlY3Rvck1vZHVsZVVybCDoh6rlrprkuYnpgInmi6nlmahVcmwgXHJcbiAgICAgKiBAcGFyYW0gZXh0UGFyYW1zIOaJqeWxleWPguaVsFxyXG4gICAgICogQHJldHVybnMgY3JlYXRpb25Qcm9jZXNzIOeUn+WNlea1geeoiyBAdHlwZSB7IE9ic2VydmFibGU8SVJ0U2xpbUJpbGxDcmVhdGlvblByb2Nlc3NFbnRpdHlFeD4gfVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgb3BlbkJpbGxDcmVhdGlvblByb2Nlc3NTZWxlY3RvcjRTcGVjaWZpY1B1bGwoc291cmNlVm9JZDogc3RyaW5nLCB0YXJnZXRWb0lkOiBzdHJpbmcsIGJpekZsb3djaGFydElkPzogc3RyaW5nLCBtb2RhbE9wdGlvbnM/OiBNb2RhbE9wdGlvbnMsIGN1c3RvbVNlbGVjdG9yTW9kdWxlVXJsPzogc3RyaW5nLCBleHRQYXJhbXM/OiB7fSk6IE9ic2VydmFibGU8SVJ0U2xpbUJpbGxDcmVhdGlvblByb2Nlc3NFbnRpdHlFeD4ge1xyXG4gICAgICAgIGJpekZsb3djaGFydElkID0gYml6Rmxvd2NoYXJ0SWQgPT09IFwiXCIgfHwgYml6Rmxvd2NoYXJ0SWQgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IGJpekZsb3djaGFydElkO1xyXG4gICAgICAgIG1vZGFsT3B0aW9ucyA9IG1vZGFsT3B0aW9ucyBhcyBhbnkgPT09IFwiXCIgfHwgbW9kYWxPcHRpb25zID09IG51bGwgPyB1bmRlZmluZWQgOiBtb2RhbE9wdGlvbnM7XHJcbiAgICAgICAgY3VzdG9tU2VsZWN0b3JNb2R1bGVVcmwgPSBjdXN0b21TZWxlY3Rvck1vZHVsZVVybCA9PT0gXCJcIiB8fCBjdXN0b21TZWxlY3Rvck1vZHVsZVVybCA9PSBudWxsID8gdW5kZWZpbmVkIDogY3VzdG9tU2VsZWN0b3JNb2R1bGVVcmw7XHJcbiAgICAgICAgZXh0UGFyYW1zID0gZXh0UGFyYW1zIGFzIGFueSA9PT0gXCJcIiB8fCBleHRQYXJhbXMgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IGV4dFBhcmFtcztcclxuICAgICAgICByZXR1cm4gdGhpcy50YXJnZXRVaVNlcnZpY2Uub3BlbkJpbGxDcmVhdGlvblByb2Nlc3NTZWxlY3RvcjRTcGVjaWZpY1B1bGwoc291cmNlVm9JZCwgdGFyZ2V0Vm9JZCwgYml6Rmxvd2NoYXJ0SWQsIG1vZGFsT3B0aW9ucywgY3VzdG9tU2VsZWN0b3JNb2R1bGVVcmwsIGV4dFBhcmFtcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmiZPlvIDmnaXmupDljZXmja7pgInmi6nlmajpgInmi6nmlbDmja5cclxuICAgICAqIEBwYXJhbSBmb3JtU2V0dGluZ3Mg6KGo5Y2V6YWN572uXHJcbiAgICAgKiBAcGFyYW0gbW9kYWxPcHRpb25zIOaooeaAgeahhumFjee9rlxyXG4gICAgICogQHBhcmFtIGV4dFBhcmFtcyDmianlsZXlj4LmlbBcclxuICAgICAqIEByZXR1cm5zIGVudGl0aWVzIOaVsOaNruWIl+ihqCBAdHlwZSB7IE9ic2VydmFibGU8RW50aXR5W10+IH1cclxuICAgICAqL1xyXG4gICAgcHVibGljIG9wZW5Tb3VyY2VEYXRhU2VsZWN0b3I0UHVsbChmb3JtU2V0dGluZ3M6IEZvcm1TZXR0aW5ncywgbW9kYWxPcHRpb25zPzogTW9kYWxPcHRpb25zLCBleHRQYXJhbXM/OiB7IGJvb3RzdHJhcENvbXBvbmVudFNlbGVjdG9yPzogc3RyaW5nLCBsb2FkQ29tbWFuZD86IHN0cmluZywgbG9hZFBhcmFtcz86IGFueSwgW2tleTogc3RyaW5nXTogYW55IH0pOiBPYnNlcnZhYmxlPEVudGl0eVtdPiB7XHJcbiAgICAgICAgbW9kYWxPcHRpb25zID0gbW9kYWxPcHRpb25zIGFzIGFueSA9PT0gXCJcIiB8fCBtb2RhbE9wdGlvbnMgPT0gbnVsbCA/IHtcclxuICAgICAgICAgICAgdGl0bGU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oXCJzZWxlY3RVcHN0cmVhbUJpbGxcIiksXHJcbiAgICAgICAgICAgIHdpZHRoOiAxMTAwLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IDU1MCxcclxuICAgICAgICB9IDogbW9kYWxPcHRpb25zO1xyXG4gICAgICAgIGV4dFBhcmFtcyA9IGV4dFBhcmFtcyBhcyBhbnkgPT09IFwiXCIgfHwgZXh0UGFyYW1zID09IG51bGwgPyB1bmRlZmluZWQgOiBleHRQYXJhbXM7XHJcblxyXG4gICAgICAgIC8v5omT5byA5p2l5rqQ5Y2V5o2u6YCJ5oup5Zmo5qih5oCB5qGGXHJcbiAgICAgICAgcmV0dXJuIHRoaXMudGFyZ2V0VWlTZXJ2aWNlLm9wZW5Tb3VyY2VEYXRhU2VsZWN0b3I0UHVsbChmb3JtU2V0dGluZ3MsIG1vZGFsT3B0aW9ucywgZXh0UGFyYW1zKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPluS8oOWIsOaguee7hOS7tlVJU3RhdGXkuIrnmoTnlJ/ljZXop4TliJnmiafooYzlmajnu5PmnpxcclxuICAgICAqIEByZXR1cm5zIGNyZWF0aW9uUmVzdWx0IOeUn+WNlea1geeoi+aJp+ihjOe7k+aenCBAdHlwZSB7IEZvcm1CaWxsQ3JlYXRpb25Qcm9jZXNzRXhlY3V0b3JSZXN1bHQgfVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0Q3JlYXRpb25SZXN1bHQoKTogT2JzZXJ2YWJsZTxGb3JtQmlsbENyZWF0aW9uUHJvY2Vzc0V4ZWN1dG9yUmVzdWx0PiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudGFyZ2V0VWlTZXJ2aWNlLmdldENyZWF0aW9uUmVzdWx0KCk7XHJcbiAgICB9XHJcbn0iXX0=