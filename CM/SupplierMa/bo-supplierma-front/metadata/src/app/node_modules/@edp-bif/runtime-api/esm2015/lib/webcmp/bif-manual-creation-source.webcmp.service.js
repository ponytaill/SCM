/**
 * @fileoverview added by tsickle
 * Generated from: lib/webcmp/bif-manual-creation-source.webcmp.service.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Injectable, Optional } from '@angular/core';
import { MessagerService } from "@farris/ui-messager";
import { Entity, BindingData, ViewModel, FrameContext } from "@farris/devkit";
import { PushCreationMode } from "@edp-aif/common-api";
import { FormBillCreationProcessExecutorArgs } from '../entity/form-rest/FormBillCreationProcessExecutorArgs';
import { BifDataService } from '../bif-manual-creation/service/bif-data.service';
import { BifSourceUiService } from '../bif-manual-creation/service/bif-source-ui.service';
import { LocalePipe } from '../bif-manual-creation/pipe/locale.pipe';
import { PushTaskArgs } from '../bif-manual-creation/args/PushTaskArgs';
import { ManualCreationMode } from '../entity/form-rest/ManualCreationMode';
/**
 * 手工生单来源端服务类
 */
export class BifManualCreationSourceWebCmpService {
    /**
     * @param {?} sourceUiService
     * @param {?} dataService
     * @param {?} bindingData
     * @param {?} messagerService
     * @param {?} viewModel
     * @param {?} frameContext
     */
    constructor(sourceUiService, dataService, bindingData, messagerService, viewModel, frameContext) {
        this.sourceUiService = sourceUiService;
        this.dataService = dataService;
        this.bindingData = bindingData;
        this.messagerService = messagerService;
        this.viewModel = viewModel;
        this.frameContext = frameContext;
        this.localePipe = new LocalePipe(this.sourceUiService && this.sourceUiService.localeId || 'zh-CHS');
    }
    /**
     * 下推，根据来源VO Id打开生单流程选择器并执行选中的生单流程
     *
     * @param {?} sourceVoId 单据流来源视图对象 Id
     * @param {?} entities 参与生单的来源单据列表
     * @param {?=} targetCommand 目标单据'单据流加载'命令的编号
     * @param {?=} bizFlowchartId 业务场景图Id
     * @param {?=} modalOptions 弹窗配置
     * @param {?=} customSelectorModuleUrl 自定义选择器url
     * @param {?=} extParams1 打开生单流程选择器弹窗扩展参数
     * @param {?=} extParams2 打开目标单据制单界面扩展参数
     * @return {?}
     */
    pushBySourceVoId(sourceVoId, entities, targetCommand, bizFlowchartId, modalOptions, customSelectorModuleUrl, extParams1, extParams2) {
        if (entities == null) {
            throw "entities is null.";
        }
        if (entities instanceof Map) {
            entities = Array.from(entities.values());
        }
        entities = Array.isArray(entities) ? entities : [entities];
        if (targetCommand == null || targetCommand == "") {
            targetCommand = "rootviewmodelbifLoad1";
        }
        bizFlowchartId = bizFlowchartId === "" || bizFlowchartId == null ? undefined : bizFlowchartId;
        modalOptions = (/** @type {?} */ (modalOptions)) === "" || modalOptions == null ? undefined : modalOptions;
        customSelectorModuleUrl = customSelectorModuleUrl === "" || customSelectorModuleUrl == null ? undefined : customSelectorModuleUrl;
        extParams1 = extParams1 === "" || extParams1 == null ? undefined : extParams1;
        extParams2 = extParams2 === "" || extParams2 == null ? undefined : extParams2;
        //打开生单流程选择器
        this.sourceUiService.openBillCreationProcessSelector4Push(sourceVoId, bizFlowchartId, modalOptions, customSelectorModuleUrl, extParams1).subscribe((/**
         * @param {?} cp
         * @return {?}
         */
        (cp) => {
            //查询表单配置
            this.dataService.getFormSettingsById(cp.formSettingsId).subscribe((/**
             * @param {?} formSettings
             * @return {?}
             */
            (formSettings) => {
                //创建执行生单流程参数对象
                /** @type {?} */
                const args = new FormBillCreationProcessExecutorArgs();
                args.billCreationProcessId = cp.id;
                args.creationRuleId = cp.creationRuleId;
                //FormCreationRuleExecutorArgs的sourceVoEntityDatas属性为前端实体序列化后的字符串列表
                //sourceVoEntityDatas列表中的每个字符串，在结构上应与单据流定义中所选中的上游视图对象一致。
                args.sourceVoEntityDatas = entities.map((/**
                 * @param {?} item
                 * @return {?}
                 */
                item => {
                    if (item instanceof Entity) {
                        // 如果是Entity
                        return JSON.stringify(item.toJSON(false, true));
                    }
                    else if (item["__type__"] == "BindingObject") {
                        //如果来自BindingData
                        /** @type {?} */
                        const bindingObject = (/** @type {?} */ (item));
                        return JSON.stringify(bindingObject.toJSON({ useFullMultiLangProperty: true }));
                    }
                    else {
                        /** @type {?} */
                        const e = (/** @type {?} */ (item));
                        return JSON.stringify(e.toJSON(false, true));
                    }
                }));
                //下推过程中不存在目标主表单据Id，所以targetVoDataIds为空列表。
                args.targetVoDataIds = [];
                args.manualCreationMode = ManualCreationMode.Push;
                //执行生单流程
                this.dataService.executeBillCreationProcess(args).subscribe((/**
                 * @param {?} result
                 * @return {?}
                 */
                (result) => {
                    //Mapping执行条件判断结果为true时才会执行生单流程得到生单结果
                    if (result.conditionResult.conditionExecutionResult == true) {
                        //生单结果不为空
                        if (result.creationRuleExecutorResult && result.creationRuleExecutorResult.mappingResults && result.creationRuleExecutorResult.mappingResults.length > 0) {
                            if (result.pushCreationMode == null || result.pushCreationMode == PushCreationMode.CREATION) {
                                this.dataService.addFormBillCreationProcessExecutorResult(result).subscribe((/**
                                 * @param {?} res
                                 * @return {?}
                                 */
                                (res) => {
                                    //打开目标单据制单界面
                                    this.sourceUiService.openTargetApp(formSettings, result.conditionResult, res, Object.assign({ action: targetCommand }, extParams2));
                                }));
                            }
                            else if (result.pushCreationMode == PushCreationMode.TASKCENTER) {
                                //推送任务中心
                                /** @type {?} */
                                const pushTaskArgs = new PushTaskArgs();
                                pushTaskArgs.suCode = result.downBillSuCode;
                                pushTaskArgs.creationRuleExecutorResult = result.creationRuleExecutorResult;
                                this.dataService.pushTaskCenter(pushTaskArgs).subscribe((/**
                                 * @return {?}
                                 */
                                () => {
                                    this.messagerService.success(this.localePipe.transform("pushTaskCenterSuccess"));
                                }), (/**
                                 * @param {?} err
                                 * @return {?}
                                 */
                                (err) => {
                                    this.messagerService.error((err.error == null ? err.message : (err.error.innerMessage || err.error.Message || err.error.message || err.message)) || this.localePipe.transform("pushTaskCenterFailed"));
                                }));
                            }
                        }
                        else {
                            this.messagerService.error(this.localePipe.transform("creationResultEmpty"));
                        }
                    }
                    else {
                        //为false时可得到配置的错误提示信息
                        this.messagerService.error(result.conditionResult.message || this.localePipe.transform("creationExecutionError"));
                    }
                }), (/**
                 * @param {?} err
                 * @return {?}
                 */
                (err) => {
                    this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                }));
            }));
        }));
    }
    /**
     * 特定下推，根据来源VO Id和目标VO Id打开生单流程选择器并执行选中的生单流程
     *
     * @param {?} sourceVoId 单据流来源视图对象 Id
     * @param {?} targetVoId 单据流目标视图对象 Id
     * @param {?} entities 参与生单的来源单据列表
     * @param {?=} targetCommand 目标单据'单据流加载'命令的编号
     * @param {?=} bizFlowchartId 业务场景图Id
     * @param {?=} modalOptions 弹窗配置
     * @param {?=} customSelectorModuleUrl 自定义选择器url
     * @param {?=} extParams1 打开生单流程选择器弹窗扩展参数
     * @param {?=} extParams2 打开目标单据制单界面扩展参数
     * @return {?}
     */
    pushBySourceVoIdAndTargetVoId(sourceVoId, targetVoId, entities, targetCommand, bizFlowchartId, modalOptions, customSelectorModuleUrl, extParams1, extParams2) {
        if (entities == null) {
            throw "entities is null.";
        }
        if (entities instanceof Map) {
            entities = Array.from(entities.values());
        }
        entities = Array.isArray(entities) ? entities : [entities];
        if (targetCommand == null || targetCommand == "") {
            targetCommand = "rootviewmodelbifLoad1";
        }
        bizFlowchartId = bizFlowchartId === "" || bizFlowchartId == null ? undefined : bizFlowchartId;
        modalOptions = (/** @type {?} */ (modalOptions)) === "" || modalOptions == null ? undefined : modalOptions;
        customSelectorModuleUrl = customSelectorModuleUrl === "" || customSelectorModuleUrl == null ? undefined : customSelectorModuleUrl;
        extParams1 = extParams1 === "" || extParams1 == null ? undefined : extParams1;
        extParams2 = extParams2 === "" || extParams2 == null ? undefined : extParams2;
        //打开生单流程选择器
        this.sourceUiService.openBillCreationProcessSelector4SpecificPush(sourceVoId, targetVoId, bizFlowchartId, modalOptions, customSelectorModuleUrl, extParams1).subscribe((/**
         * @param {?} cp
         * @return {?}
         */
        (cp) => {
            //查询表单配置
            this.dataService.getFormSettingsById(cp.formSettingsId).subscribe((/**
             * @param {?} formSettings
             * @return {?}
             */
            (formSettings) => {
                //创建执行生单流程参数对象
                /** @type {?} */
                const args = new FormBillCreationProcessExecutorArgs();
                args.billCreationProcessId = cp.id;
                args.creationRuleId = cp.creationRuleId;
                //FormCreationRuleExecutorArgs的sourceVoEntityDatas属性为前端实体序列化后的字符串列表
                //sourceVoEntityDatas列表中的每个字符串，在结构上应与单据流定义中所选中的上游视图对象一致。
                args.sourceVoEntityDatas = entities.map((/**
                 * @param {?} item
                 * @return {?}
                 */
                item => {
                    if (item instanceof Entity) {
                        // 如果是Entity
                        return JSON.stringify(item.toJSON(false, true));
                    }
                    else if (item["__type__"] == "BindingObject") {
                        //如果来自BindingData
                        /** @type {?} */
                        const bindingObject = (/** @type {?} */ (item));
                        return JSON.stringify(bindingObject.toJSON({ useFullMultiLangProperty: true }));
                    }
                    else {
                        /** @type {?} */
                        const e = (/** @type {?} */ (item));
                        return JSON.stringify(e.toJSON(false, true));
                    }
                }));
                //下推过程中不存在目标主表单据Id，所以targetVoDataIds为空列表。
                args.targetVoDataIds = [];
                args.manualCreationMode = ManualCreationMode.SpecificPush;
                //执行生单流程
                this.dataService.executeBillCreationProcess(args).subscribe((/**
                 * @param {?} result
                 * @return {?}
                 */
                (result) => {
                    //Mapping执行条件判断结果为true时才会执行生单流程得到生单结果
                    if (result.conditionResult.conditionExecutionResult == true) {
                        //生单结果不为空
                        if (result.creationRuleExecutorResult && result.creationRuleExecutorResult.mappingResults && result.creationRuleExecutorResult.mappingResults.length > 0) {
                            if (result.pushCreationMode == null || result.pushCreationMode == PushCreationMode.CREATION) {
                                this.dataService.addFormBillCreationProcessExecutorResult(result).subscribe((/**
                                 * @param {?} res
                                 * @return {?}
                                 */
                                (res) => {
                                    //打开目标单据制单界面
                                    this.sourceUiService.openTargetApp(formSettings, result.conditionResult, res, Object.assign({ action: targetCommand }, extParams2));
                                }));
                            }
                            else if (result.pushCreationMode == PushCreationMode.TASKCENTER) {
                                //推送任务中心
                                /** @type {?} */
                                const pushTaskArgs = new PushTaskArgs();
                                pushTaskArgs.suCode = result.downBillSuCode;
                                pushTaskArgs.creationRuleExecutorResult = result.creationRuleExecutorResult;
                                this.dataService.pushTaskCenter(pushTaskArgs).subscribe((/**
                                 * @return {?}
                                 */
                                () => {
                                    this.messagerService.success(this.localePipe.transform("pushTaskCenterSuccess"));
                                }), (/**
                                 * @param {?} err
                                 * @return {?}
                                 */
                                (err) => {
                                    this.messagerService.error((err.error == null ? err.message : (err.error.innerMessage || err.error.Message || err.error.message || err.message)) || this.localePipe.transform("pushTaskCenterFailed"));
                                }));
                            }
                        }
                        else {
                            this.messagerService.error(this.localePipe.transform("creationResultEmpty"));
                        }
                    }
                    else {
                        //为false时可得到配置的错误提示信息
                        this.messagerService.error(result.conditionResult.message || this.localePipe.transform("creationExecutionError"));
                    }
                }), (/**
                 * @param {?} err
                 * @return {?}
                 */
                (err) => {
                    this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                }));
            }));
        }));
    }
    /**
     * 特定下推，根据生单流程ID执行选中的生单流程
     *
     * @param {?} processId 单据流生单流程 Id
     * @param {?} entities 参与生单的来源单据列表
     * @param {?=} targetCommand 目标单据'单据流加载'命令的编号
     * @param {?=} extParams 打开目标单据制单界面扩展参数
     * @return {?}
     */
    pushByCreationProcessId(processId, entities, targetCommand, extParams) {
        if (entities == null) {
            throw "entities is null.";
        }
        if (entities instanceof Map) {
            entities = Array.from(entities.values());
        }
        entities = Array.isArray(entities) ? entities : [entities];
        extParams = extParams === "" || extParams == null ? undefined : extParams;
        if (targetCommand == null || targetCommand == "") {
            targetCommand = "rootviewmodelbifLoad1";
        }
        //查找生单流程
        this.dataService.getSlimBillCreationProcessEntityExById(processId).subscribe((/**
         * @param {?} cp
         * @return {?}
         */
        (cp) => {
            //查询表单配置
            this.dataService.getFormSettingsById(cp.formSettingsId).subscribe((/**
             * @param {?} formSettings
             * @return {?}
             */
            (formSettings) => {
                //创建执行生单流程参数对象
                /** @type {?} */
                const args = new FormBillCreationProcessExecutorArgs();
                args.billCreationProcessId = cp.id;
                args.creationRuleId = cp.creationRuleId;
                //FormCreationRuleExecutorArgs的sourceVoEntityDatas属性为前端实体序列化后的字符串列表
                //sourceVoEntityDatas列表中的每个字符串，在结构上应与单据流定义中所选中的上游视图对象一致。
                args.sourceVoEntityDatas = entities.map((/**
                 * @param {?} item
                 * @return {?}
                 */
                item => {
                    if (item instanceof Entity) {
                        // 如果是Entity
                        return JSON.stringify(item.toJSON(false, true));
                    }
                    else if (item["__type__"] == "BindingObject") {
                        //如果来自BindingData
                        /** @type {?} */
                        const bindingObject = (/** @type {?} */ (item));
                        return JSON.stringify(bindingObject.toJSON({ useFullMultiLangProperty: true }));
                    }
                    else {
                        /** @type {?} */
                        const e = (/** @type {?} */ (item));
                        return JSON.stringify(e.toJSON(false, true));
                    }
                }));
                //下推过程中不存在目标主表单据Id，所以targetVoDataIds为空列表。
                args.targetVoDataIds = [];
                args.manualCreationMode = ManualCreationMode.SpecificPush;
                //执行生单流程
                this.dataService.executeBillCreationProcess(args).subscribe((/**
                 * @param {?} result
                 * @return {?}
                 */
                (result) => {
                    //Mapping执行条件判断结果为true时才会执行生单流程得到生单结果
                    if (result.conditionResult.conditionExecutionResult == true) {
                        //生单结果不为空
                        if (result.creationRuleExecutorResult && result.creationRuleExecutorResult.mappingResults && result.creationRuleExecutorResult.mappingResults.length > 0) {
                            if (result.pushCreationMode == null || result.pushCreationMode == PushCreationMode.CREATION) {
                                this.dataService.addFormBillCreationProcessExecutorResult(result).subscribe((/**
                                 * @param {?} res
                                 * @return {?}
                                 */
                                (res) => {
                                    //打开目标单据制单界面
                                    this.sourceUiService.openTargetApp(formSettings, result.conditionResult, res, Object.assign({ action: targetCommand }, extParams));
                                }));
                            }
                            else if (result.pushCreationMode == PushCreationMode.TASKCENTER) {
                                //推送任务中心
                                /** @type {?} */
                                const pushTaskArgs = new PushTaskArgs();
                                pushTaskArgs.suCode = result.downBillSuCode;
                                pushTaskArgs.creationRuleExecutorResult = result.creationRuleExecutorResult;
                                this.dataService.pushTaskCenter(pushTaskArgs).subscribe((/**
                                 * @return {?}
                                 */
                                () => {
                                    this.messagerService.success(this.localePipe.transform("pushTaskCenterSuccess"));
                                }), (/**
                                 * @param {?} err
                                 * @return {?}
                                 */
                                (err) => {
                                    this.messagerService.error((err.error == null ? err.message : (err.error.innerMessage || err.error.Message || err.error.message || err.message)) || this.localePipe.transform("pushTaskCenterFailed"));
                                }));
                            }
                        }
                        else {
                            this.messagerService.error(this.localePipe.transform("creationResultEmpty"));
                        }
                    }
                    else {
                        //为false时可得到配置的错误提示信息
                        this.messagerService.error(result.conditionResult.message || this.localePipe.transform("creationExecutionError"));
                    }
                }), (/**
                 * @param {?} err
                 * @return {?}
                 */
                (err) => {
                    this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                }));
            }));
        }));
    }
    /**
     * 根据来源VO Id打开生单流程选择器选择生单流程
     * @param {?} sourceVoId 来源VO Id
     * @param {?=} bizFlowchartId 业务场景图Id
     * @param {?=} modalOptions 模态框配置
     * @param {?=} customSelectorModuleUrl 自定义选择器Url
     * @param {?=} extParams 扩展参数
     * @return {?} creationProcess 生单流程 \@type { Observable<IRtSlimBillCreationProcessEntityEx> }
     */
    openBillCreationProcessSelector4Push(sourceVoId, bizFlowchartId, modalOptions, customSelectorModuleUrl, extParams) {
        bizFlowchartId = bizFlowchartId === "" || bizFlowchartId == null ? undefined : bizFlowchartId;
        modalOptions = (/** @type {?} */ (modalOptions)) === "" || modalOptions == null ? undefined : modalOptions;
        customSelectorModuleUrl = customSelectorModuleUrl === "" || customSelectorModuleUrl == null ? undefined : customSelectorModuleUrl;
        extParams = extParams === "" || extParams == null ? undefined : extParams;
        return this.sourceUiService.openBillCreationProcessSelector4Push(sourceVoId, bizFlowchartId, modalOptions, customSelectorModuleUrl, extParams);
    }
    /**
     * 根据来源VO Id和目标VO Id打开生单流程选择器选择生单流程
     * @param {?} sourceVoId 来源VO Id
     * @param {?} targetVoId 目标VO Id
     * @param {?=} bizFlowchartId 业务场景图Id
     * @param {?=} modalOptions 模态框配置
     * @param {?=} customSelectorModuleUrl 自定义选择器Url
     * @param {?=} extParams 扩展参数
     * @return {?} creationProcess 生单流程 \@type { Observable<IRtSlimBillCreationProcessEntityEx> }
     */
    openBillCreationProcessSelector4SpecificPush(sourceVoId, targetVoId, bizFlowchartId, modalOptions, customSelectorModuleUrl, extParams) {
        bizFlowchartId = bizFlowchartId === "" || bizFlowchartId == null ? undefined : bizFlowchartId;
        modalOptions = (/** @type {?} */ (modalOptions)) === "" || modalOptions == null ? undefined : modalOptions;
        customSelectorModuleUrl = customSelectorModuleUrl === "" || customSelectorModuleUrl == null ? undefined : customSelectorModuleUrl;
        extParams = extParams === "" || extParams == null ? undefined : extParams;
        //打开生单流程选择器
        return this.sourceUiService.openBillCreationProcessSelector4SpecificPush(sourceVoId, targetVoId, bizFlowchartId, modalOptions, customSelectorModuleUrl, extParams);
    }
    /**
     * \@Deprecated 已弃用，请使用 {\@link openTargetApp }
     * 打开目标单据制单界面
     * @param {?} formSettings 表单配置
     * @param {?} result 生单流程执行结果
     * @param {?=} targetCommand 目标表单命令
     * @param {?=} extParams 扩展参数
     * @return {?}
     */
    openTargetForm(formSettings, result, targetCommand, extParams) {
        if (targetCommand == null || targetCommand == "") {
            targetCommand = "rootviewmodelbifLoad1";
        }
        this.sourceUiService.openTargetForm(formSettings, result, Object.assign({ action: targetCommand }, extParams));
    }
    /**
     * 打开目标单据制单界面
     * @param {?} formSettings 表单配置
     * @param {?} conditionResult 执行条件计算结果
     * @param {?} textIdWithDataIds
     * @param {?=} targetCommand 目标表单命令
     * @param {?=} extParams 扩展参数
     * @return {?}
     */
    openTargetApp(formSettings, conditionResult, textIdWithDataIds, targetCommand, extParams) {
        if (targetCommand == null || targetCommand == "") {
            targetCommand = "rootviewmodelbifLoad1";
        }
        this.sourceUiService.openTargetApp(formSettings, conditionResult, textIdWithDataIds, Object.assign({ action: targetCommand }, extParams));
    }
}
BifManualCreationSourceWebCmpService.decorators = [
    { type: Injectable }
];
/** @nocollapse */
BifManualCreationSourceWebCmpService.ctorParameters = () => [
    { type: BifSourceUiService },
    { type: BifDataService },
    { type: BindingData },
    { type: MessagerService },
    { type: ViewModel, decorators: [{ type: Optional }] },
    { type: FrameContext, decorators: [{ type: Optional }] }
];
if (false) {
    /** @type {?} */
    BifManualCreationSourceWebCmpService.prototype.localePipe;
    /** @type {?} */
    BifManualCreationSourceWebCmpService.prototype.sourceUiService;
    /** @type {?} */
    BifManualCreationSourceWebCmpService.prototype.dataService;
    /** @type {?} */
    BifManualCreationSourceWebCmpService.prototype.bindingData;
    /** @type {?} */
    BifManualCreationSourceWebCmpService.prototype.messagerService;
    /** @type {?} */
    BifManualCreationSourceWebCmpService.prototype.viewModel;
    /** @type {?} */
    BifManualCreationSourceWebCmpService.prototype.frameContext;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmlmLW1hbnVhbC1jcmVhdGlvbi1zb3VyY2Uud2ViY21wLnNlcnZpY2UuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZWRwLWJpZi9ydW50aW1lLWFwaS8iLCJzb3VyY2VzIjpbImxpYi93ZWJjbXAvYmlmLW1hbnVhbC1jcmVhdGlvbi1zb3VyY2Uud2ViY21wLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUdyRCxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFHdEQsT0FBTyxFQUFFLE1BQU0sRUFBRSxXQUFXLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBaUIsTUFBTSxnQkFBZ0IsQ0FBQztBQUU3RixPQUFPLEVBQWdCLGdCQUFnQixFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFFckUsT0FBTyxFQUFFLG1DQUFtQyxFQUFFLE1BQU0seURBQXlELENBQUM7QUFFOUcsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLGlEQUFpRCxDQUFDO0FBQ2pGLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLHNEQUFzRCxDQUFDO0FBQzFGLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSx5Q0FBeUMsQ0FBQztBQUNyRSxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sMENBQTBDLENBQUM7QUFFeEUsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sd0NBQXdDLENBQUM7Ozs7QUFNNUUsTUFBTSxPQUFPLG9DQUFvQzs7Ozs7Ozs7O0lBRzdDLFlBQ1csZUFBbUMsRUFDbkMsV0FBMkIsRUFDM0IsV0FBd0IsRUFDeEIsZUFBZ0MsRUFDcEIsU0FBb0IsRUFDcEIsWUFBMEI7UUFMdEMsb0JBQWUsR0FBZixlQUFlLENBQW9CO1FBQ25DLGdCQUFXLEdBQVgsV0FBVyxDQUFnQjtRQUMzQixnQkFBVyxHQUFYLFdBQVcsQ0FBYTtRQUN4QixvQkFBZSxHQUFmLGVBQWUs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QUFTLENBQUMsQ0FBQztJQUN2SyxDQUFDOzs7Ozs7Ozs7O0lBVU0sY0FBYyxDQUFDLFlBQTBCLEVBQUUsTUFBNkMsRUFBRSxhQUFzQixFQUFFLFNBQWM7UUFDbkksSUFBSSxhQUFhLElBQUksSUFBSSxJQUFJLGFBQWEsSUFBSSxFQUFFLEVBQUU7WUFDOUMsYUFBYSxHQUFHLHVCQUF1QixDQUFDO1NBQzNDO1FBQ0QsSUFBSSxDQUFDLGVBQWUsQ0FBQyxjQUFjLENBQUMsWUFBWSxFQUFFLE1BQU0sa0JBQUksTUFBTSxFQUFFLGFBQWEsSUFBSyxTQUFTLEVBQUcsQ0FBQztJQUN2RyxDQUFDOzs7Ozs7Ozs7O0lBU00sYUFBYSxDQUFDLFlBQTBCLEVBQUUsZUFBZ0MsRUFBRSxpQkFBNEMsRUFBRSxhQUFzQixFQUFFLFNBQWM7UUFDbkssSUFBSSxhQUFhLElBQUksSUFBSSxJQUFJLGFBQWEsSUFBSSxFQUFFLEVBQUU7WUFDOUMsYUFBYSxHQUFHLHVCQUF1QixDQUFDO1NBQzNDO1FBQ0QsSUFBSSxDQUFDLGVBQWUsQ0FBQyxhQUFhLENBQUMsWUFBWSxFQUFFLGVBQWUsRUFBRSxpQkFBaUIsa0JBQUksTUFBTSxFQUFFLGFBQWEsSUFBSyxTQUFTLEVBQUcsQ0FBQztJQUNsSSxDQUFDOzs7WUF6WEosVUFBVTs7OztZQVRGLGtCQUFrQjtZQURsQixjQUFjO1lBTk4sV0FBVztZQUhuQixlQUFlO1lBR00sU0FBUyx1QkF5QjlCLFFBQVE7WUF6QndCLFlBQVksdUJBMEI1QyxRQUFROzs7O0lBUmIsMERBQThCOztJQUcxQiwrREFBMEM7O0lBQzFDLDJEQUFrQzs7SUFDbEMsMkRBQStCOztJQUMvQiwrREFBdUM7O0lBQ3ZDLHlEQUF1Qzs7SUFDdkMsNERBQTZDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSwgT3B0aW9uYWwgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xyXG5cclxuaW1wb3J0IHsgTWVzc2FnZXJTZXJ2aWNlIH0gZnJvbSBcIkBmYXJyaXMvdWktbWVzc2FnZXJcIjtcclxuaW1wb3J0IHsgTW9kYWxPcHRpb25zIH0gZnJvbSAnQGZhcnJpcy91aS1tb2RhbCc7XHJcblxyXG5pbXBvcnQgeyBFbnRpdHksIEJpbmRpbmdEYXRhLCBWaWV3TW9kZWwsIEZyYW1lQ29udGV4dCwgQmluZGluZ09iamVjdCB9IGZyb20gXCJAZmFycmlzL2RldmtpdFwiO1xyXG5cclxuaW1wb3J0IHsgRm9ybVNldHRpbmdzLCBQdXNoQ3JlYXRpb25Nb2RlIH0gZnJvbSBcIkBlZHAtYWlmL2NvbW1vbi1hcGlcIjtcclxuaW1wb3J0IHsgSVJ0U2xpbUJpbGxDcmVhdGlvblByb2Nlc3NFbnRpdHlFeCB9IGZyb20gXCJAZWRwLWJpZi9jb21tb24tYXBpXCI7XHJcbmltcG9ydCB7IEZvcm1CaWxsQ3JlYXRpb25Qcm9jZXNzRXhlY3V0b3JBcmdzIH0gZnJvbSAnLi4vZW50aXR5L2Zvcm0tcmVzdC9Gb3JtQmlsbENyZWF0aW9uUHJvY2Vzc0V4ZWN1dG9yQXJncyc7XHJcbmltcG9ydCB7IENvbmRpdGlvblJlc3VsdCwgRm9ybUJpbGxDcmVhdGlvblByb2Nlc3NFeGVjdXRvclJlc3VsdCB9IGZyb20gJ0BlZHAtYWlmL3J1bnRpbWUtYXBpJztcclxuaW1wb3J0IHsgQmlmRGF0YVNlcnZpY2UgfSBmcm9tICcuLi9iaWYtbWFudWFsLWNyZWF0aW9uL3NlcnZpY2UvYmlmLWRhdGEuc2VydmljZSc7XHJcbmltcG9ydCB7IEJpZlNvdXJjZVVpU2VydmljZSB9IGZyb20gJy4uL2JpZi1tYW51YWwtY3JlYXRpb24vc2VydmljZS9iaWYtc291cmNlLXVpLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBMb2NhbGVQaXBlIH0gZnJvbSAnLi4vYmlmLW1hbnVhbC1jcmVhdGlvbi9waXBlL2xvY2FsZS5waXBlJztcclxuaW1wb3J0IHsgUHVzaFRhc2tBcmdzIH0gZnJvbSAnLi4vYmlmLW1hbnVhbC1jcmVhdGlvbi9hcmdzL1B1c2hUYXNrQXJncyc7XHJcbmltcG9ydCB7IEdlbmVyYWxUZXh0SWRXaXRoRGF0YUlkIH0gZnJvbSAnLi4vZW50aXR5L2Zvcm0tcmVzdC9HZW5lcmFsVGV4dElkV2l0aERhdGFJZCc7XHJcbmltcG9ydCB7IE1hbnVhbENyZWF0aW9uTW9kZSB9IGZyb20gJy4uL2VudGl0eS9mb3JtLXJlc3QvTWFudWFsQ3JlYXRpb25Nb2RlJztcclxuXHJcbi8qKlxyXG4gKiDmiYvlt6XnlJ/ljZXmnaXmupDnq6/mnI3liqHnsbtcclxuICovXHJcbkBJbmplY3RhYmxlKClcclxuZXhwb3J0IGNsYXNzIEJpZk1hbnVhbENyZWF0aW9uU291cmNlV2ViQ21wU2VydmljZSB7XHJcbiAgICBwdWJsaWMgbG9jYWxlUGlwZTogTG9jYWxlUGlwZTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwdWJsaWMgc291cmNlVWlTZXJ2aWNlOiBCaWZTb3VyY2VVaVNlcnZpY2UsXHJcbiAgICAgICAgcHVibGljIGRhdGFTZXJ2aWNlOiBCaWZEYXRhU2VydmljZSxcclxuICAgICAgICBwdWJsaWMgYmluZGluZ0RhdGE6IEJpbmRpbmdEYXRhLFxyXG4gICAgICAgIHB1YmxpYyBtZXNzYWdlclNlcnZpY2U6IE1lc3NhZ2VyU2VydmljZSxcclxuICAgICAgICBAT3B0aW9uYWwoKSBwdWJsaWMgdmlld01vZGVsOiBWaWV3TW9kZWwsXHJcbiAgICAgICAgQE9wdGlvbmFsKCkgcHVibGljIGZyYW1lQ29udGV4dDogRnJhbWVDb250ZXh0LFxyXG4gICAgKSB7XHJcbiAgICAgICAgdGhpcy5sb2NhbGVQaXBlID0gbmV3IExvY2FsZVBpcGUodGhpcy5zb3VyY2VVaVNlcnZpY2UgJiYgdGhpcy5zb3VyY2VVaVNlcnZpY2UubG9jYWxlSWQgfHwgJ3poLUNIUycpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5LiL5o6o77yM5qC55o2u5p2l5rqQVk8gSWTmiZPlvIDnlJ/ljZXmtYHnqIvpgInmi6nlmajlubbmiafooYzpgInkuK3nmoTnlJ/ljZXmtYHnqItcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHNvdXJjZVZvSWQg5Y2V5o2u5rWB5p2l5rqQ6KeG5Zu+5a+56LGhIElkXHJcbiAgICAgKiBAcGFyYW0gZW50aXRpZXMg5Y+C5LiO55Sf5Y2V55qE5p2l5rqQ5Y2V5o2u5YiX6KGoXHJcbiAgICAgKiBAcGFyYW0gdGFyZ2V0Q29tbWFuZCDnm67moIfljZXmja4n5Y2V5o2u5rWB5Yqg6L29J+WRveS7pOeahOe8luWPt1xyXG4gICAgICogQHBhcmFtIGJpekZsb3djaGFydElkIOS4muWKoeWcuuaZr+WbvklkXHJcbiAgICAgKiBAcGFyYW0gbW9kYWxPcHRpb25zIOW8ueeql+mFjee9rlxyXG4gICAgICogQHBhcmFtIGN1c3RvbVNlbGVjdG9yTW9kdWxlVXJsIOiHquWumuS5iemAieaLqeWZqHVybFxyXG4gICAgICogQHBhcmFtIGV4dFBhcmFtczEg5omT5byA55Sf5Y2V5rWB56iL6YCJ5oup5Zmo5by556qX5omp5bGV5Y+C5pWwXHJcbiAgICAgKiBAcGFyYW0gZXh0UGFyYW1zMiDmiZPlvIDnm67moIfljZXmja7liLbljZXnlYzpnaLmianlsZXlj4LmlbBcclxuICAgICAqL1xyXG4gICAgcHVibGljIHB1c2hCeVNvdXJjZVZvSWQoc291cmNlVm9JZDogc3RyaW5nLCBlbnRpdGllczogYW55W10sIHRhcmdldENvbW1hbmQ/OiBzdHJpbmcsIGJpekZsb3djaGFydElkPzogc3RyaW5nLCBtb2RhbE9wdGlvbnM/OiBNb2RhbE9wdGlvbnMsIGN1c3RvbVNlbGVjdG9yTW9kdWxlVXJsPzogc3RyaW5nLCBleHRQYXJhbXMxPzoge30sIGV4dFBhcmFtczI/OiB7fSkge1xyXG4gICAgICAgIGlmIChlbnRpdGllcyA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRocm93IFwiZW50aXRpZXMgaXMgbnVsbC5cIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGVudGl0aWVzIGluc3RhbmNlb2YgTWFwKSB7XHJcbiAgICAgICAgICAgIGVudGl0aWVzID0gQXJyYXkuZnJvbShlbnRpdGllcy52YWx1ZXMoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVudGl0aWVzID0gQXJyYXkuaXNBcnJheShlbnRpdGllcykgPyBlbnRpdGllcyA6IFtlbnRpdGllc107XHJcbiAgICAgICAgaWYgKHRhcmdldENvbW1hbmQgPT0gbnVsbCB8fCB0YXJnZXRDb21tYW5kID09IFwiXCIpIHtcclxuICAgICAgICAgICAgdGFyZ2V0Q29tbWFuZCA9IFwicm9vdHZpZXdtb2RlbGJpZkxvYWQxXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJpekZsb3djaGFydElkID0gYml6Rmxvd2NoYXJ0SWQgPT09IFwiXCIgfHwgYml6Rmxvd2NoYXJ0SWQgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IGJpekZsb3djaGFydElkO1xyXG4gICAgICAgIG1vZGFsT3B0aW9ucyA9IG1vZGFsT3B0aW9ucyBhcyBhbnkgPT09IFwiXCIgfHwgbW9kYWxPcHRpb25zID09IG51bGwgPyB1bmRlZmluZWQgOiBtb2RhbE9wdGlvbnM7XHJcbiAgICAgICAgY3VzdG9tU2VsZWN0b3JNb2R1bGVVcmwgPSBjdXN0b21TZWxlY3Rvck1vZHVsZVVybCA9PT0gXCJcIiB8fCBjdXN0b21TZWxlY3Rvck1vZHVsZVVybCA9PSBudWxsID8gdW5kZWZpbmVkIDogY3VzdG9tU2VsZWN0b3JNb2R1bGVVcmw7XHJcbiAgICAgICAgZXh0UGFyYW1zMSA9IGV4dFBhcmFtczEgPT09IFwiXCIgfHwgZXh0UGFyYW1zMSA9PSBudWxsID8gdW5kZWZpbmVkIDogZXh0UGFyYW1zMTtcclxuICAgICAgICBleHRQYXJhbXMyID0gZXh0UGFyYW1zMiA9PT0gXCJcIiB8fCBleHRQYXJhbXMyID09IG51bGwgPyB1bmRlZmluZWQgOiBleHRQYXJhbXMyO1xyXG4gICAgICAgIC8v5omT5byA55Sf5Y2V5rWB56iL6YCJ5oup5ZmoXHJcbiAgICAgICAgdGhpcy5zb3VyY2VVaVNlcnZpY2Uub3BlbkJpbGxDcmVhdGlvblByb2Nlc3NTZWxlY3RvcjRQdXNoKHNvdXJjZVZvSWQsIGJpekZsb3djaGFydElkLCBtb2RhbE9wdGlvbnMsIGN1c3RvbVNlbGVjdG9yTW9kdWxlVXJsLCBleHRQYXJhbXMxKS5zdWJzY3JpYmUoXHJcbiAgICAgICAgICAgIChjcDogSVJ0U2xpbUJpbGxDcmVhdGlvblByb2Nlc3NFbnRpdHlFeCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy/mn6Xor6LooajljZXphY3nva5cclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YVNlcnZpY2UuZ2V0Rm9ybVNldHRpbmdzQnlJZChjcC5mb3JtU2V0dGluZ3NJZCkuc3Vic2NyaWJlKFxyXG4gICAgICAgICAgICAgICAgICAgIChmb3JtU2V0dGluZ3M6IEZvcm1TZXR0aW5ncykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL+WIm+W7uuaJp+ihjOeUn+WNlea1geeoi+WPguaVsOWvueixoVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhcmdzID0gbmV3IEZvcm1CaWxsQ3JlYXRpb25Qcm9jZXNzRXhlY3V0b3JBcmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MuYmlsbENyZWF0aW9uUHJvY2Vzc0lkID0gY3AuaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MuY3JlYXRpb25SdWxlSWQgPSBjcC5jcmVhdGlvblJ1bGVJZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9Gb3JtQ3JlYXRpb25SdWxlRXhlY3V0b3JBcmdz55qEc291cmNlVm9FbnRpdHlEYXRhc+WxnuaAp+S4uuWJjeerr+WunuS9k+W6j+WIl+WMluWQjueahOWtl+espuS4suWIl+ihqFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3NvdXJjZVZvRW50aXR5RGF0YXPliJfooajkuK3nmoTmr4/kuKrlrZfnrKbkuLLvvIzlnKjnu5PmnoTkuIrlupTkuI7ljZXmja7mtYHlrprkuYnkuK3miYDpgInkuK3nmoTkuIrmuLjop4blm77lr7nosaHkuIDoh7TjgIJcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXJncy5zb3VyY2VWb0VudGl0eURhdGFzID0gZW50aXRpZXMubWFwKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBFbnRpdHkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDlpoLmnpzmmK9FbnRpdHlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoaXRlbS50b0pTT04oZmFsc2UsIHRydWUpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXRlbVtcIl9fdHlwZV9fXCJdID09IFwiQmluZGluZ09iamVjdFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lpoLmnpzmnaXoh6pCaW5kaW5nRGF0YVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJpbmRpbmdPYmplY3QgPSBpdGVtIGFzIEJpbmRpbmdPYmplY3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGJpbmRpbmdPYmplY3QudG9KU09OKHsgdXNlRnVsbE11bHRpTGFuZ1Byb3BlcnR5OiB0cnVlIH0pKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IGl0ZW0gYXMgRW50aXR5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShlLnRvSlNPTihmYWxzZSwgdHJ1ZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy/kuIvmjqjov4fnqIvkuK3kuI3lrZjlnKjnm67moIfkuLvooajljZXmja5JZO+8jOaJgOS7pXRhcmdldFZvRGF0YUlkc+S4uuepuuWIl+ihqOOAglxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzLnRhcmdldFZvRGF0YUlkcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzLm1hbnVhbENyZWF0aW9uTW9kZSA9IE1hbnVhbENyZWF0aW9uTW9kZS5QdXNoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL+aJp+ihjOeUn+WNlea1geeoi1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFTZXJ2aWNlLmV4ZWN1dGVCaWxsQ3JlYXRpb25Qcm9jZXNzKGFyZ3MpLnN1YnNjcmliZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChyZXN1bHQ6IEZvcm1CaWxsQ3JlYXRpb25Qcm9jZXNzRXhlY3V0b3JSZXN1bHQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL01hcHBpbmfmiafooYzmnaHku7bliKTmlq3nu5PmnpzkuLp0cnVl5pe25omN5Lya5omn6KGM55Sf5Y2V5rWB56iL5b6X5Yiw55Sf5Y2V57uT5p6cXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jb25kaXRpb25SZXN1bHQuY29uZGl0aW9uRXhlY3V0aW9uUmVzdWx0ID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/nlJ/ljZXnu5PmnpzkuI3kuLrnqbpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jcmVhdGlvblJ1bGVFeGVjdXRvclJlc3VsdCAmJiByZXN1bHQuY3JlYXRpb25SdWxlRXhlY3V0b3JSZXN1bHQubWFwcGluZ1Jlc3VsdHMgJiYgcmVzdWx0LmNyZWF0aW9uUnVsZUV4ZWN1dG9yUmVzdWx0Lm1hcHBpbmdSZXN1bHRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQucHVzaENyZWF0aW9uTW9kZSA9PSBudWxsIHx8IHJlc3VsdC5wdXNoQ3JlYXRpb25Nb2RlID09IFB1c2hDcmVhdGlvbk1vZGUuQ1JFQVRJT04pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFTZXJ2aWNlLmFkZEZvcm1CaWxsQ3JlYXRpb25Qcm9jZXNzRXhlY3V0b3JSZXN1bHQocmVzdWx0KS5zdWJzY3JpYmUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChyZXMpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5omT5byA55uu5qCH5Y2V5o2u5Yi25Y2V55WM6Z2iXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNvdXJjZVVpU2VydmljZS5vcGVuVGFyZ2V0QXBwKGZvcm1TZXR0aW5ncywgcmVzdWx0LmNvbmRpdGlvblJlc3VsdCwgcmVzLCB7IGFjdGlvbjogdGFyZ2V0Q29tbWFuZCwgLi4uZXh0UGFyYW1zMiB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdC5wdXNoQ3JlYXRpb25Nb2RlID09IFB1c2hDcmVhdGlvbk1vZGUuVEFTS0NFTlRFUikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5o6o6YCB5Lu75Yqh5Lit5b+DXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHVzaFRhc2tBcmdzID0gbmV3IFB1c2hUYXNrQXJncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1c2hUYXNrQXJncy5zdUNvZGUgPSByZXN1bHQuZG93bkJpbGxTdUNvZGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHVzaFRhc2tBcmdzLmNyZWF0aW9uUnVsZUV4ZWN1dG9yUmVzdWx0ID0gcmVzdWx0LmNyZWF0aW9uUnVsZUV4ZWN1dG9yUmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVNlcnZpY2UucHVzaFRhc2tDZW50ZXIocHVzaFRhc2tBcmdzKS5zdWJzY3JpYmUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXJTZXJ2aWNlLnN1Y2Nlc3ModGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybShcInB1c2hUYXNrQ2VudGVyU3VjY2Vzc1wiKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXJTZXJ2aWNlLmVycm9yKChlcnIuZXJyb3IgPT0gbnVsbCA/IGVyci5tZXNzYWdlIDogKGVyci5lcnJvci5pbm5lck1lc3NhZ2UgfHwgZXJyLmVycm9yLk1lc3NhZ2UgfHwgZXJyLmVycm9yLm1lc3NhZ2UgfHwgZXJyLm1lc3NhZ2UpKSB8fCB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKFwicHVzaFRhc2tDZW50ZXJGYWlsZWRcIikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXJTZXJ2aWNlLmVycm9yKHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oXCJjcmVhdGlvblJlc3VsdEVtcHR5XCIpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5Li6ZmFsc2Xml7blj6/lvpfliLDphY3nva7nmoTplJnor6/mj5DnpLrkv6Hmga9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlclNlcnZpY2UuZXJyb3IocmVzdWx0LmNvbmRpdGlvblJlc3VsdC5tZXNzYWdlIHx8IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oXCJjcmVhdGlvbkV4ZWN1dGlvbkVycm9yXCIpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXJTZXJ2aWNlLmVycm9yKGVyci5lcnJvciA9PSBudWxsID8gZXJyLm1lc3NhZ2UgOiAoZXJyLmVycm9yLk1lc3NhZ2UgfHwgZXJyLmVycm9yLm1lc3NhZ2UgfHwgZXJyLm1lc3NhZ2UpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOeJueWumuS4i+aOqO+8jOagueaNruadpea6kFZPIElk5ZKM55uu5qCHVk8gSWTmiZPlvIDnlJ/ljZXmtYHnqIvpgInmi6nlmajlubbmiafooYzpgInkuK3nmoTnlJ/ljZXmtYHnqItcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHNvdXJjZVZvSWQg5Y2V5o2u5rWB5p2l5rqQ6KeG5Zu+5a+56LGhIElkXHJcbiAgICAgKiBAcGFyYW0gdGFyZ2V0Vm9JZCDljZXmja7mtYHnm67moIfop4blm77lr7nosaEgSWRcclxuICAgICAqIEBwYXJhbSBlbnRpdGllcyDlj4LkuI7nlJ/ljZXnmoTmnaXmupDljZXmja7liJfooahcclxuICAgICAqIEBwYXJhbSB0YXJnZXRDb21tYW5kIOebruagh+WNleaNrifljZXmja7mtYHliqDovb0n5ZG95Luk55qE57yW5Y+3XHJcbiAgICAgKiBAcGFyYW0gYml6Rmxvd2NoYXJ0SWQg5Lia5Yqh5Zy65pmv5Zu+SWRcclxuICAgICAqIEBwYXJhbSBtb2RhbE9wdGlvbnMg5by556qX6YWN572uXHJcbiAgICAgKiBAcGFyYW0gY3VzdG9tU2VsZWN0b3JNb2R1bGVVcmwg6Ieq5a6a5LmJ6YCJ5oup5ZmodXJsXHJcbiAgICAgKiBAcGFyYW0gZXh0UGFyYW1zMSDmiZPlvIDnlJ/ljZXmtYHnqIvpgInmi6nlmajlvLnnqpfmianlsZXlj4LmlbBcclxuICAgICAqIEBwYXJhbSBleHRQYXJhbXMyIOaJk+W8gOebruagh+WNleaNruWItuWNleeVjOmdouaJqeWxleWPguaVsFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcHVzaEJ5U291cmNlVm9JZEFuZFRhcmdldFZvSWQoc291cmNlVm9JZDogc3RyaW5nLCB0YXJnZXRWb0lkOiBzdHJpbmcsIGVudGl0aWVzOiBFbnRpdHlbXSwgdGFyZ2V0Q29tbWFuZD86IHN0cmluZywgYml6Rmxvd2NoYXJ0SWQ/OiBzdHJpbmcsIG1vZGFsT3B0aW9ucz86IE1vZGFsT3B0aW9ucywgY3VzdG9tU2VsZWN0b3JNb2R1bGVVcmw/OiBzdHJpbmcsIGV4dFBhcmFtczE/OiB7fSwgZXh0UGFyYW1zMj86IHt9KSB7XHJcbiAgICAgICAgaWYgKGVudGl0aWVzID09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhyb3cgXCJlbnRpdGllcyBpcyBudWxsLlwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZW50aXRpZXMgaW5zdGFuY2VvZiBNYXApIHtcclxuICAgICAgICAgICAgZW50aXRpZXMgPSBBcnJheS5mcm9tKGVudGl0aWVzLnZhbHVlcygpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZW50aXRpZXMgPSBBcnJheS5pc0FycmF5KGVudGl0aWVzKSA/IGVudGl0aWVzIDogW2VudGl0aWVzXTtcclxuICAgICAgICBpZiAodGFyZ2V0Q29tbWFuZCA9PSBudWxsIHx8IHRhcmdldENvbW1hbmQgPT0gXCJcIikge1xyXG4gICAgICAgICAgICB0YXJnZXRDb21tYW5kID0gXCJyb290dmlld21vZGVsYmlmTG9hZDFcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgYml6Rmxvd2NoYXJ0SWQgPSBiaXpGbG93Y2hhcnRJZCA9PT0gXCJcIiB8fCBiaXpGbG93Y2hhcnRJZCA9PSBudWxsID8gdW5kZWZpbmVkIDogYml6Rmxvd2NoYXJ0SWQ7XHJcbiAgICAgICAgbW9kYWxPcHRpb25zID0gbW9kYWxPcHRpb25zIGFzIGFueSA9PT0gXCJcIiB8fCBtb2RhbE9wdGlvbnMgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IG1vZGFsT3B0aW9ucztcclxuICAgICAgICBjdXN0b21TZWxlY3Rvck1vZHVsZVVybCA9IGN1c3RvbVNlbGVjdG9yTW9kdWxlVXJsID09PSBcIlwiIHx8IGN1c3RvbVNlbGVjdG9yTW9kdWxlVXJsID09IG51bGwgPyB1bmRlZmluZWQgOiBjdXN0b21TZWxlY3Rvck1vZHVsZVVybDtcclxuICAgICAgICBleHRQYXJhbXMxID0gZXh0UGFyYW1zMSA9PT0gXCJcIiB8fCBleHRQYXJhbXMxID09IG51bGwgPyB1bmRlZmluZWQgOiBleHRQYXJhbXMxO1xyXG4gICAgICAgIGV4dFBhcmFtczIgPSBleHRQYXJhbXMyID09PSBcIlwiIHx8IGV4dFBhcmFtczIgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IGV4dFBhcmFtczI7XHJcbiAgICAgICAgLy/miZPlvIDnlJ/ljZXmtYHnqIvpgInmi6nlmahcclxuICAgICAgICB0aGlzLnNvdXJjZVVpU2VydmljZS5vcGVuQmlsbENyZWF0aW9uUHJvY2Vzc1NlbGVjdG9yNFNwZWNpZmljUHVzaChzb3VyY2VWb0lkLCB0YXJnZXRWb0lkLCBiaXpGbG93Y2hhcnRJZCwgbW9kYWxPcHRpb25zLCBjdXN0b21TZWxlY3Rvck1vZHVsZVVybCwgZXh0UGFyYW1zMSkuc3Vic2NyaWJlKFxyXG4gICAgICAgICAgICAoY3A6IElSdFNsaW1CaWxsQ3JlYXRpb25Qcm9jZXNzRW50aXR5RXgpID0+IHtcclxuICAgICAgICAgICAgICAgIC8v5p+l6K+i6KGo5Y2V6YWN572uXHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFTZXJ2aWNlLmdldEZvcm1TZXR0aW5nc0J5SWQoY3AuZm9ybVNldHRpbmdzSWQpLnN1YnNjcmliZShcclxuICAgICAgICAgICAgICAgICAgICAoZm9ybVNldHRpbmdzOiBGb3JtU2V0dGluZ3MpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy/liJvlu7rmiafooYznlJ/ljZXmtYHnqIvlj4LmlbDlr7nosaFcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYXJncyA9IG5ldyBGb3JtQmlsbENyZWF0aW9uUHJvY2Vzc0V4ZWN1dG9yQXJncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzLmJpbGxDcmVhdGlvblByb2Nlc3NJZCA9IGNwLmlkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzLmNyZWF0aW9uUnVsZUlkID0gY3AuY3JlYXRpb25SdWxlSWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vRm9ybUNyZWF0aW9uUnVsZUV4ZWN1dG9yQXJnc+eahHNvdXJjZVZvRW50aXR5RGF0YXPlsZ7mgKfkuLrliY3nq6/lrp7kvZPluo/liJfljJblkI7nmoTlrZfnrKbkuLLliJfooahcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9zb3VyY2VWb0VudGl0eURhdGFz5YiX6KGo5Lit55qE5q+P5Liq5a2X56ym5Liy77yM5Zyo57uT5p6E5LiK5bqU5LiO5Y2V5o2u5rWB5a6a5LmJ5Lit5omA6YCJ5Lit55qE5LiK5ri46KeG5Zu+5a+56LGh5LiA6Ie044CCXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3Muc291cmNlVm9FbnRpdHlEYXRhcyA9IGVudGl0aWVzLm1hcChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtIGluc3RhbmNlb2YgRW50aXR5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5aaC5p6c5pivRW50aXR5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGl0ZW0udG9KU09OKGZhbHNlLCB0cnVlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGl0ZW1bXCJfX3R5cGVfX1wiXSA9PSBcIkJpbmRpbmdPYmplY3RcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5aaC5p6c5p2l6IeqQmluZGluZ0RhdGFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBiaW5kaW5nT2JqZWN0ID0gaXRlbSBhcyBCaW5kaW5nT2JqZWN0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShiaW5kaW5nT2JqZWN0LnRvSlNPTih7IHVzZUZ1bGxNdWx0aUxhbmdQcm9wZXJ0eTogdHJ1ZSB9KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBpdGVtIGFzIEVudGl0eTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZS50b0pTT04oZmFsc2UsIHRydWUpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8v5LiL5o6o6L+H56iL5Lit5LiN5a2Y5Zyo55uu5qCH5Li76KGo5Y2V5o2uSWTvvIzmiYDku6V0YXJnZXRWb0RhdGFJZHPkuLrnqbrliJfooajjgIJcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXJncy50YXJnZXRWb0RhdGFJZHMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXJncy5tYW51YWxDcmVhdGlvbk1vZGUgPSBNYW51YWxDcmVhdGlvbk1vZGUuU3BlY2lmaWNQdXNoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL+aJp+ihjOeUn+WNlea1geeoi1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFTZXJ2aWNlLmV4ZWN1dGVCaWxsQ3JlYXRpb25Qcm9jZXNzKGFyZ3MpLnN1YnNjcmliZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChyZXN1bHQ6IEZvcm1CaWxsQ3JlYXRpb25Qcm9jZXNzRXhlY3V0b3JSZXN1bHQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL01hcHBpbmfmiafooYzmnaHku7bliKTmlq3nu5PmnpzkuLp0cnVl5pe25omN5Lya5omn6KGM55Sf5Y2V5rWB56iL5b6X5Yiw55Sf5Y2V57uT5p6cXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jb25kaXRpb25SZXN1bHQuY29uZGl0aW9uRXhlY3V0aW9uUmVzdWx0ID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/nlJ/ljZXnu5PmnpzkuI3kuLrnqbpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jcmVhdGlvblJ1bGVFeGVjdXRvclJlc3VsdCAmJiByZXN1bHQuY3JlYXRpb25SdWxlRXhlY3V0b3JSZXN1bHQubWFwcGluZ1Jlc3VsdHMgJiYgcmVzdWx0LmNyZWF0aW9uUnVsZUV4ZWN1dG9yUmVzdWx0Lm1hcHBpbmdSZXN1bHRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQucHVzaENyZWF0aW9uTW9kZSA9PSBudWxsIHx8IHJlc3VsdC5wdXNoQ3JlYXRpb25Nb2RlID09IFB1c2hDcmVhdGlvbk1vZGUuQ1JFQVRJT04pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFTZXJ2aWNlLmFkZEZvcm1CaWxsQ3JlYXRpb25Qcm9jZXNzRXhlY3V0b3JSZXN1bHQocmVzdWx0KS5zdWJzY3JpYmUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChyZXMpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5omT5byA55uu5qCH5Y2V5o2u5Yi25Y2V55WM6Z2iXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNvdXJjZVVpU2VydmljZS5vcGVuVGFyZ2V0QXBwKGZvcm1TZXR0aW5ncywgcmVzdWx0LmNvbmRpdGlvblJlc3VsdCwgcmVzLCB7IGFjdGlvbjogdGFyZ2V0Q29tbWFuZCwgLi4uZXh0UGFyYW1zMiB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdC5wdXNoQ3JlYXRpb25Nb2RlID09IFB1c2hDcmVhdGlvbk1vZGUuVEFTS0NFTlRFUikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5o6o6YCB5Lu75Yqh5Lit5b+DXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHVzaFRhc2tBcmdzID0gbmV3IFB1c2hUYXNrQXJncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1c2hUYXNrQXJncy5zdUNvZGUgPSByZXN1bHQuZG93bkJpbGxTdUNvZGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHVzaFRhc2tBcmdzLmNyZWF0aW9uUnVsZUV4ZWN1dG9yUmVzdWx0ID0gcmVzdWx0LmNyZWF0aW9uUnVsZUV4ZWN1dG9yUmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVNlcnZpY2UucHVzaFRhc2tDZW50ZXIocHVzaFRhc2tBcmdzKS5zdWJzY3JpYmUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXJTZXJ2aWNlLnN1Y2Nlc3ModGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybShcInB1c2hUYXNrQ2VudGVyU3VjY2Vzc1wiKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXJTZXJ2aWNlLmVycm9yKChlcnIuZXJyb3IgPT0gbnVsbCA/IGVyci5tZXNzYWdlIDogKGVyci5lcnJvci5pbm5lck1lc3NhZ2UgfHwgZXJyLmVycm9yLk1lc3NhZ2UgfHwgZXJyLmVycm9yLm1lc3NhZ2UgfHwgZXJyLm1lc3NhZ2UpKSB8fCB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKFwicHVzaFRhc2tDZW50ZXJGYWlsZWRcIikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXJTZXJ2aWNlLmVycm9yKHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oXCJjcmVhdGlvblJlc3VsdEVtcHR5XCIpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5Li6ZmFsc2Xml7blj6/lvpfliLDphY3nva7nmoTplJnor6/mj5DnpLrkv6Hmga9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlclNlcnZpY2UuZXJyb3IocmVzdWx0LmNvbmRpdGlvblJlc3VsdC5tZXNzYWdlIHx8IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oXCJjcmVhdGlvbkV4ZWN1dGlvbkVycm9yXCIpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXJTZXJ2aWNlLmVycm9yKGVyci5lcnJvciA9PSBudWxsID8gZXJyLm1lc3NhZ2UgOiAoZXJyLmVycm9yLk1lc3NhZ2UgfHwgZXJyLmVycm9yLm1lc3NhZ2UgfHwgZXJyLm1lc3NhZ2UpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOeJueWumuS4i+aOqO+8jOagueaNrueUn+WNlea1geeoi0lE5omn6KGM6YCJ5Lit55qE55Sf5Y2V5rWB56iLXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSBwcm9jZXNzSWQg5Y2V5o2u5rWB55Sf5Y2V5rWB56iLIElkXHJcbiAgICAgKiBAcGFyYW0gZW50aXRpZXMg5Y+C5LiO55Sf5Y2V55qE5p2l5rqQ5Y2V5o2u5YiX6KGoXHJcbiAgICAgKiBAcGFyYW0gdGFyZ2V0Q29tbWFuZCDnm67moIfljZXmja4n5Y2V5o2u5rWB5Yqg6L29J+WRveS7pOeahOe8luWPt1xyXG4gICAgICogQHBhcmFtIGV4dFBhcmFtcyDmiZPlvIDnm67moIfljZXmja7liLbljZXnlYzpnaLmianlsZXlj4LmlbBcclxuICAgICAqL1xyXG4gICAgcHVibGljIHB1c2hCeUNyZWF0aW9uUHJvY2Vzc0lkKHByb2Nlc3NJZDogc3RyaW5nLCBlbnRpdGllczogRW50aXR5W10sIHRhcmdldENvbW1hbmQ/OiBzdHJpbmcsIGV4dFBhcmFtcz86IHt9KSB7XHJcbiAgICAgICAgaWYgKGVudGl0aWVzID09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhyb3cgXCJlbnRpdGllcyBpcyBudWxsLlwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZW50aXRpZXMgaW5zdGFuY2VvZiBNYXApIHtcclxuICAgICAgICAgICAgZW50aXRpZXMgPSBBcnJheS5mcm9tKGVudGl0aWVzLnZhbHVlcygpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZW50aXRpZXMgPSBBcnJheS5pc0FycmF5KGVudGl0aWVzKSA/IGVudGl0aWVzIDogW2VudGl0aWVzXTtcclxuICAgICAgICBleHRQYXJhbXMgPSBleHRQYXJhbXMgPT09IFwiXCIgfHwgZXh0UGFyYW1zID09IG51bGwgPyB1bmRlZmluZWQgOiBleHRQYXJhbXM7XHJcbiAgICAgICAgaWYgKHRhcmdldENvbW1hbmQgPT0gbnVsbCB8fCB0YXJnZXRDb21tYW5kID09IFwiXCIpIHtcclxuICAgICAgICAgICAgdGFyZ2V0Q29tbWFuZCA9IFwicm9vdHZpZXdtb2RlbGJpZkxvYWQxXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8v5p+l5om+55Sf5Y2V5rWB56iLXHJcbiAgICAgICAgdGhpcy5kYXRhU2VydmljZS5nZXRTbGltQmlsbENyZWF0aW9uUHJvY2Vzc0VudGl0eUV4QnlJZChwcm9jZXNzSWQpLnN1YnNjcmliZShcclxuICAgICAgICAgICAgKGNwOiBJUnRTbGltQmlsbENyZWF0aW9uUHJvY2Vzc0VudGl0eUV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvL+afpeivouihqOWNlemFjee9rlxyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhU2VydmljZS5nZXRGb3JtU2V0dGluZ3NCeUlkKGNwLmZvcm1TZXR0aW5nc0lkKS5zdWJzY3JpYmUoXHJcbiAgICAgICAgICAgICAgICAgICAgKGZvcm1TZXR0aW5nczogRm9ybVNldHRpbmdzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8v5Yib5bu65omn6KGM55Sf5Y2V5rWB56iL5Y+C5pWw5a+56LGhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFyZ3MgPSBuZXcgRm9ybUJpbGxDcmVhdGlvblByb2Nlc3NFeGVjdXRvckFyZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXJncy5iaWxsQ3JlYXRpb25Qcm9jZXNzSWQgPSBjcC5pZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXJncy5jcmVhdGlvblJ1bGVJZCA9IGNwLmNyZWF0aW9uUnVsZUlkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL0Zvcm1DcmVhdGlvblJ1bGVFeGVjdXRvckFyZ3PnmoRzb3VyY2VWb0VudGl0eURhdGFz5bGe5oCn5Li65YmN56uv5a6e5L2T5bqP5YiX5YyW5ZCO55qE5a2X56ym5Liy5YiX6KGoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vc291cmNlVm9FbnRpdHlEYXRhc+WIl+ihqOS4reeahOavj+S4quWtl+espuS4su+8jOWcqOe7k+aehOS4iuW6lOS4juWNleaNrua1geWumuS5ieS4reaJgOmAieS4reeahOS4iua4uOinhuWbvuWvueixoeS4gOiHtOOAglxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzLnNvdXJjZVZvRW50aXR5RGF0YXMgPSBlbnRpdGllcy5tYXAoaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIEVudGl0eSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWmguaenOaYr0VudGl0eVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShpdGVtLnRvSlNPTihmYWxzZSwgdHJ1ZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpdGVtW1wiX190eXBlX19cIl0gPT0gXCJCaW5kaW5nT2JqZWN0XCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+WmguaenOadpeiHqkJpbmRpbmdEYXRhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmluZGluZ09iamVjdCA9IGl0ZW0gYXMgQmluZGluZ09iamVjdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoYmluZGluZ09iamVjdC50b0pTT04oeyB1c2VGdWxsTXVsdGlMYW5nUHJvcGVydHk6IHRydWUgfSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gaXRlbSBhcyBFbnRpdHk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGUudG9KU09OKGZhbHNlLCB0cnVlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL+S4i+aOqOi/h+eoi+S4reS4jeWtmOWcqOebruagh+S4u+ihqOWNleaNrklk77yM5omA5LuldGFyZ2V0Vm9EYXRhSWRz5Li656m65YiX6KGo44CCXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MudGFyZ2V0Vm9EYXRhSWRzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MubWFudWFsQ3JlYXRpb25Nb2RlID0gTWFudWFsQ3JlYXRpb25Nb2RlLlNwZWNpZmljUHVzaDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy/miafooYznlJ/ljZXmtYHnqItcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhU2VydmljZS5leGVjdXRlQmlsbENyZWF0aW9uUHJvY2VzcyhhcmdzKS5zdWJzY3JpYmUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAocmVzdWx0OiBGb3JtQmlsbENyZWF0aW9uUHJvY2Vzc0V4ZWN1dG9yUmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9NYXBwaW5n5omn6KGM5p2h5Lu25Yik5pat57uT5p6c5Li6dHJ1ZeaXtuaJjeS8muaJp+ihjOeUn+WNlea1geeoi+W+l+WIsOeUn+WNlee7k+aenFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuY29uZGl0aW9uUmVzdWx0LmNvbmRpdGlvbkV4ZWN1dGlvblJlc3VsdCA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v55Sf5Y2V57uT5p6c5LiN5Li656m6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuY3JlYXRpb25SdWxlRXhlY3V0b3JSZXN1bHQgJiYgcmVzdWx0LmNyZWF0aW9uUnVsZUV4ZWN1dG9yUmVzdWx0Lm1hcHBpbmdSZXN1bHRzICYmIHJlc3VsdC5jcmVhdGlvblJ1bGVFeGVjdXRvclJlc3VsdC5tYXBwaW5nUmVzdWx0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnB1c2hDcmVhdGlvbk1vZGUgPT0gbnVsbCB8fCByZXN1bHQucHVzaENyZWF0aW9uTW9kZSA9PSBQdXNoQ3JlYXRpb25Nb2RlLkNSRUFUSU9OKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhU2VydmljZS5hZGRGb3JtQmlsbENyZWF0aW9uUHJvY2Vzc0V4ZWN1dG9yUmVzdWx0KHJlc3VsdCkuc3Vic2NyaWJlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocmVzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+aJk+W8gOebruagh+WNleaNruWItuWNleeVjOmdolxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zb3VyY2VVaVNlcnZpY2Uub3BlblRhcmdldEFwcChmb3JtU2V0dGluZ3MsIHJlc3VsdC5jb25kaXRpb25SZXN1bHQsIHJlcywgeyBhY3Rpb246IHRhcmdldENvbW1hbmQsIC4uLmV4dFBhcmFtcyB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdC5wdXNoQ3JlYXRpb25Nb2RlID09IFB1c2hDcmVhdGlvbk1vZGUuVEFTS0NFTlRFUikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5o6o6YCB5Lu75Yqh5Lit5b+DXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHVzaFRhc2tBcmdzID0gbmV3IFB1c2hUYXNrQXJncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1c2hUYXNrQXJncy5zdUNvZGUgPSByZXN1bHQuZG93bkJpbGxTdUNvZGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHVzaFRhc2tBcmdzLmNyZWF0aW9uUnVsZUV4ZWN1dG9yUmVzdWx0ID0gcmVzdWx0LmNyZWF0aW9uUnVsZUV4ZWN1dG9yUmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVNlcnZpY2UucHVzaFRhc2tDZW50ZXIocHVzaFRhc2tBcmdzKS5zdWJzY3JpYmUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXJTZXJ2aWNlLnN1Y2Nlc3ModGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybShcInB1c2hUYXNrQ2VudGVyU3VjY2Vzc1wiKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXJTZXJ2aWNlLmVycm9yKChlcnIuZXJyb3IgPT0gbnVsbCA/IGVyci5tZXNzYWdlIDogKGVyci5lcnJvci5pbm5lck1lc3NhZ2UgfHwgZXJyLmVycm9yLk1lc3NhZ2UgfHwgZXJyLmVycm9yLm1lc3NhZ2UgfHwgZXJyLm1lc3NhZ2UpKSB8fCB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKFwicHVzaFRhc2tDZW50ZXJGYWlsZWRcIikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXJTZXJ2aWNlLmVycm9yKHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oXCJjcmVhdGlvblJlc3VsdEVtcHR5XCIpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5Li6ZmFsc2Xml7blj6/lvpfliLDphY3nva7nmoTplJnor6/mj5DnpLrkv6Hmga9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlclNlcnZpY2UuZXJyb3IocmVzdWx0LmNvbmRpdGlvblJlc3VsdC5tZXNzYWdlIHx8IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oXCJjcmVhdGlvbkV4ZWN1dGlvbkVycm9yXCIpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXJTZXJ2aWNlLmVycm9yKGVyci5lcnJvciA9PSBudWxsID8gZXJyLm1lc3NhZ2UgOiAoZXJyLmVycm9yLk1lc3NhZ2UgfHwgZXJyLmVycm9yLm1lc3NhZ2UgfHwgZXJyLm1lc3NhZ2UpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOagueaNruadpea6kFZPIElk5omT5byA55Sf5Y2V5rWB56iL6YCJ5oup5Zmo6YCJ5oup55Sf5Y2V5rWB56iLXHJcbiAgICAgKiBAcGFyYW0gc291cmNlVm9JZCDmnaXmupBWTyBJZFxyXG4gICAgICogQHBhcmFtIGJpekZsb3djaGFydElkIOS4muWKoeWcuuaZr+WbvklkXHJcbiAgICAgKiBAcGFyYW0gbW9kYWxPcHRpb25zIOaooeaAgeahhumFjee9rlxyXG4gICAgICogQHBhcmFtIGN1c3RvbVNlbGVjdG9yTW9kdWxlVXJsIOiHquWumuS5iemAieaLqeWZqFVybFxyXG4gICAgICogQHBhcmFtIGV4dFBhcmFtcyDmianlsZXlj4LmlbAgXHJcbiAgICAgKiBAcmV0dXJucyBjcmVhdGlvblByb2Nlc3Mg55Sf5Y2V5rWB56iLIEB0eXBlIHsgT2JzZXJ2YWJsZTxJUnRTbGltQmlsbENyZWF0aW9uUHJvY2Vzc0VudGl0eUV4PiB9XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBvcGVuQmlsbENyZWF0aW9uUHJvY2Vzc1NlbGVjdG9yNFB1c2goc291cmNlVm9JZDogc3RyaW5nLCBiaXpGbG93Y2hhcnRJZD86IHN0cmluZywgbW9kYWxPcHRpb25zPzogTW9kYWxPcHRpb25zLCBjdXN0b21TZWxlY3Rvck1vZHVsZVVybD86IHN0cmluZywgZXh0UGFyYW1zPzoge30pOiBPYnNlcnZhYmxlPElSdFNsaW1CaWxsQ3JlYXRpb25Qcm9jZXNzRW50aXR5RXg+IHtcclxuICAgICAgICBiaXpGbG93Y2hhcnRJZCA9IGJpekZsb3djaGFydElkID09PSBcIlwiIHx8IGJpekZsb3djaGFydElkID09IG51bGwgPyB1bmRlZmluZWQgOiBiaXpGbG93Y2hhcnRJZDtcclxuICAgICAgICBtb2RhbE9wdGlvbnMgPSBtb2RhbE9wdGlvbnMgYXMgYW55ID09PSBcIlwiIHx8IG1vZGFsT3B0aW9ucyA9PSBudWxsID8gdW5kZWZpbmVkIDogbW9kYWxPcHRpb25zO1xyXG4gICAgICAgIGN1c3RvbVNlbGVjdG9yTW9kdWxlVXJsID0gY3VzdG9tU2VsZWN0b3JNb2R1bGVVcmwgPT09IFwiXCIgfHwgY3VzdG9tU2VsZWN0b3JNb2R1bGVVcmwgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IGN1c3RvbVNlbGVjdG9yTW9kdWxlVXJsO1xyXG4gICAgICAgIGV4dFBhcmFtcyA9IGV4dFBhcmFtcyA9PT0gXCJcIiB8fCBleHRQYXJhbXMgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IGV4dFBhcmFtcztcclxuICAgICAgICByZXR1cm4gdGhpcy5zb3VyY2VVaVNlcnZpY2Uub3BlbkJpbGxDcmVhdGlvblByb2Nlc3NTZWxlY3RvcjRQdXNoKHNvdXJjZVZvSWQsIGJpekZsb3djaGFydElkLCBtb2RhbE9wdGlvbnMsIGN1c3RvbVNlbGVjdG9yTW9kdWxlVXJsLCBleHRQYXJhbXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5qC55o2u5p2l5rqQVk8gSWTlkoznm67moIdWTyBJZOaJk+W8gOeUn+WNlea1geeoi+mAieaLqeWZqOmAieaLqeeUn+WNlea1geeoi1xyXG4gICAgICogQHBhcmFtIHNvdXJjZVZvSWQg5p2l5rqQVk8gSWRcclxuICAgICAqIEBwYXJhbSB0YXJnZXRWb0lkIOebruagh1ZPIElkXHJcbiAgICAgKiBAcGFyYW0gYml6Rmxvd2NoYXJ0SWQg5Lia5Yqh5Zy65pmv5Zu+SWRcclxuICAgICAqIEBwYXJhbSBtb2RhbE9wdGlvbnMg5qih5oCB5qGG6YWN572uXHJcbiAgICAgKiBAcGFyYW0gY3VzdG9tU2VsZWN0b3JNb2R1bGVVcmwg6Ieq5a6a5LmJ6YCJ5oup5ZmoVXJsXHJcbiAgICAgKiBAcGFyYW0gZXh0UGFyYW1zIOaJqeWxleWPguaVsFxyXG4gICAgICogQHJldHVybnMgY3JlYXRpb25Qcm9jZXNzIOeUn+WNlea1geeoiyBAdHlwZSB7IE9ic2VydmFibGU8SVJ0U2xpbUJpbGxDcmVhdGlvblByb2Nlc3NFbnRpdHlFeD4gfVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgb3BlbkJpbGxDcmVhdGlvblByb2Nlc3NTZWxlY3RvcjRTcGVjaWZpY1B1c2goc291cmNlVm9JZDogc3RyaW5nLCB0YXJnZXRWb0lkOiBzdHJpbmcsIGJpekZsb3djaGFydElkPzogc3RyaW5nLCBtb2RhbE9wdGlvbnM/OiBNb2RhbE9wdGlvbnMsIGN1c3RvbVNlbGVjdG9yTW9kdWxlVXJsPzogc3RyaW5nLCBleHRQYXJhbXM/OiB7fSk6IE9ic2VydmFibGU8SVJ0U2xpbUJpbGxDcmVhdGlvblByb2Nlc3NFbnRpdHlFeD4ge1xyXG4gICAgICAgIGJpekZsb3djaGFydElkID0gYml6Rmxvd2NoYXJ0SWQgPT09IFwiXCIgfHwgYml6Rmxvd2NoYXJ0SWQgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IGJpekZsb3djaGFydElkO1xyXG4gICAgICAgIG1vZGFsT3B0aW9ucyA9IG1vZGFsT3B0aW9ucyBhcyBhbnkgPT09IFwiXCIgfHwgbW9kYWxPcHRpb25zID09IG51bGwgPyB1bmRlZmluZWQgOiBtb2RhbE9wdGlvbnM7XHJcbiAgICAgICAgY3VzdG9tU2VsZWN0b3JNb2R1bGVVcmwgPSBjdXN0b21TZWxlY3Rvck1vZHVsZVVybCA9PT0gXCJcIiB8fCBjdXN0b21TZWxlY3Rvck1vZHVsZVVybCA9PSBudWxsID8gdW5kZWZpbmVkIDogY3VzdG9tU2VsZWN0b3JNb2R1bGVVcmw7XHJcbiAgICAgICAgZXh0UGFyYW1zID0gZXh0UGFyYW1zID09PSBcIlwiIHx8IGV4dFBhcmFtcyA9PSBudWxsID8gdW5kZWZpbmVkIDogZXh0UGFyYW1zO1xyXG4gICAgICAgIC8v5omT5byA55Sf5Y2V5rWB56iL6YCJ5oup5ZmoXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlVWlTZXJ2aWNlLm9wZW5CaWxsQ3JlYXRpb25Qcm9jZXNzU2VsZWN0b3I0U3BlY2lmaWNQdXNoKHNvdXJjZVZvSWQsIHRhcmdldFZvSWQsIGJpekZsb3djaGFydElkLCBtb2RhbE9wdGlvbnMsIGN1c3RvbVNlbGVjdG9yTW9kdWxlVXJsLCBleHRQYXJhbXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQERlcHJlY2F0ZWQg5bey5byD55So77yM6K+35L2/55SoIHtAbGluayBvcGVuVGFyZ2V0QXBwIH1cclxuICAgICAqIOaJk+W8gOebruagh+WNleaNruWItuWNleeVjOmdolxyXG4gICAgICogQHBhcmFtIGZvcm1TZXR0aW5ncyDooajljZXphY3nva5cclxuICAgICAqIEBwYXJhbSByZXN1bHQg55Sf5Y2V5rWB56iL5omn6KGM57uT5p6cXHJcbiAgICAgKiBAcGFyYW0gdGFyZ2V0Q29tbWFuZCDnm67moIfooajljZXlkb3ku6RcclxuICAgICAqIEBwYXJhbSBleHRQYXJhbXMg5omp5bGV5Y+C5pWwXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBvcGVuVGFyZ2V0Rm9ybShmb3JtU2V0dGluZ3M6IEZvcm1TZXR0aW5ncywgcmVzdWx0OiBGb3JtQmlsbENyZWF0aW9uUHJvY2Vzc0V4ZWN1dG9yUmVzdWx0LCB0YXJnZXRDb21tYW5kPzogc3RyaW5nLCBleHRQYXJhbXM/OiB7fSkge1xyXG4gICAgICAgIGlmICh0YXJnZXRDb21tYW5kID09IG51bGwgfHwgdGFyZ2V0Q29tbWFuZCA9PSBcIlwiKSB7XHJcbiAgICAgICAgICAgIHRhcmdldENvbW1hbmQgPSBcInJvb3R2aWV3bW9kZWxiaWZMb2FkMVwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNvdXJjZVVpU2VydmljZS5vcGVuVGFyZ2V0Rm9ybShmb3JtU2V0dGluZ3MsIHJlc3VsdCwgeyBhY3Rpb246IHRhcmdldENvbW1hbmQsIC4uLmV4dFBhcmFtcyB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOaJk+W8gOebruagh+WNleaNruWItuWNleeVjOmdolxyXG4gICAgICogQHBhcmFtIGZvcm1TZXR0aW5ncyDooajljZXphY3nva5cclxuICAgICAqIEBwYXJhbSBjb25kaXRpb25SZXN1bHQg5omn6KGM5p2h5Lu26K6h566X57uT5p6cXHJcbiAgICAgKiBAcGFyYW0gdGFyZ2V0Q29tbWFuZCDnm67moIfooajljZXlkb3ku6RcclxuICAgICAqIEBwYXJhbSBleHRQYXJhbXMg5omp5bGV5Y+C5pWwXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBvcGVuVGFyZ2V0QXBwKGZvcm1TZXR0aW5nczogRm9ybVNldHRpbmdzLCBjb25kaXRpb25SZXN1bHQ6IENvbmRpdGlvblJlc3VsdCwgdGV4dElkV2l0aERhdGFJZHM6IEdlbmVyYWxUZXh0SWRXaXRoRGF0YUlkW10sIHRhcmdldENvbW1hbmQ/OiBzdHJpbmcsIGV4dFBhcmFtcz86IHt9KSB7XHJcbiAgICAgICAgaWYgKHRhcmdldENvbW1hbmQgPT0gbnVsbCB8fCB0YXJnZXRDb21tYW5kID09IFwiXCIpIHtcclxuICAgICAgICAgICAgdGFyZ2V0Q29tbWFuZCA9IFwicm9vdHZpZXdtb2RlbGJpZkxvYWQxXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc291cmNlVWlTZXJ2aWNlLm9wZW5UYXJnZXRBcHAoZm9ybVNldHRpbmdzLCBjb25kaXRpb25SZXN1bHQsIHRleHRJZFdpdGhEYXRhSWRzLCB7IGFjdGlvbjogdGFyZ2V0Q29tbWFuZCwgLi4uZXh0UGFyYW1zIH0pO1xyXG4gICAgfVxyXG59Il19