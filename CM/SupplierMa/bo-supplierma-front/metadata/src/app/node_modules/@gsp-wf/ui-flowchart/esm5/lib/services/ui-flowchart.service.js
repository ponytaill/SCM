/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Injectable } from '@angular/core';
import { from } from 'rxjs';
import { HttpService } from '@ecp-caf/caf-common';
import { translate } from './i18n/index';
import { map } from 'rxjs/operators';
var UiFlowchartService = /** @class */ (function () {
    function UiFlowchartService(httpSvc) {
        this.httpSvc = httpSvc;
    }
    /**
     * @param {?} payload
     * @return {?}
     */
    UiFlowchartService.prototype.getForecastProcessListByPayload = /**
     * @param {?} payload
     * @return {?}
     */
    function (payload) {
        /** @type {?} */
        var url = '/api/runtime/wf/v1.0/processInstances/startProcess-simulation';
        return this.httpSvc.post(url, payload).pipe(map(function (re) { return re.procDefs; }));
    };
    /**
     * @param {?} dataId
     * @return {?}
     */
    UiFlowchartService.prototype.getRuntimeProcInstsByDataId = /**
     * @param {?} dataId
     * @return {?}
     */
    function (dataId) {
        if (dataId) {
            /** @type {?} */
            var url = "/api/runtime/wf/v1.0/processInstances/runtimeProcInstList?dataId=" + dataId;
            return this.httpSvc.get(url);
        }
        else {
            return from(new Array());
        }
    };
    /**
     * @param {?} dataId
     * @return {?}
     */
    UiFlowchartService.prototype.getHistoricProcInstsByDataId = /**
     * @param {?} dataId
     * @return {?}
     */
    function (dataId) {
        if (dataId) {
            /** @type {?} */
            var url = "/api/runtime/wf/v1.0/processInstances/historicProcInstList?dataId=" + dataId;
            return this.httpSvc.get(url);
        }
        else {
            return from(new Array());
        }
    };
    /**
     * 基于流程实例ID获取流程实例
     * @param procInstId 流程实例id
     */
    /**
     * 基于流程实例ID获取流程实例
     * @param {?} procInstId 流程实例id
     * @return {?}
     */
    UiFlowchartService.prototype.getProcInstanceById = /**
     * 基于流程实例ID获取流程实例
     * @param {?} procInstId 流程实例id
     * @return {?}
     */
    function (procInstId) {
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/processInstances/" + procInstId;
        return this.httpSvc.get(url);
    };
    /**
     * 基于流程实例ID获取bpmnModel
     */
    /**
     * 基于流程实例ID获取bpmnModel
     * @param {?} procInstId
     * @return {?}
     */
    UiFlowchartService.prototype.getBpmnModelbyProcInstId = /**
     * 基于流程实例ID获取bpmnModel
     * @param {?} procInstId
     * @return {?}
     */
    function (procInstId) {
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/processInstances/" + procInstId + "/bpmnModel";
        return this.httpSvc.get(url);
    };
    /**
     * 基于流程定义ID获取bpmnModel
     */
    /**
     * 基于流程定义ID获取bpmnModel
     * @param {?} procDefId
     * @return {?}
     */
    UiFlowchartService.prototype.getBpmnModelbyProcDefId = /**
     * 基于流程定义ID获取bpmnModel
     * @param {?} procDefId
     * @return {?}
     */
    function (procDefId) {
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/procDefs/" + procDefId + "/bpmnModel";
        return this.httpSvc.get(url);
    };
    /**
     * @param {?} superActInstId
     * @param {?} superProcInstId
     * @return {?}
     */
    UiFlowchartService.prototype.getSubProcessInstance = /**
     * @param {?} superActInstId
     * @param {?} superProcInstId
     * @return {?}
     */
    function (superActInstId, superProcInstId) {
        if (superActInstId) {
            /** @type {?} */
            var url = "/api/runtime/wf/v1.0/processInstances/subProcInst?superActInstId=" + superActInstId + "&superProcInstId=" + superProcInstId;
            return this.httpSvc.get(url);
        }
    };
    /**
     * 获取所有包含预解析的流程实例信息
     */
    /**
     * 获取所有包含预解析的流程实例信息
     * @param {?} procInstId
     * @return {?}
     */
    UiFlowchartService.prototype.getForecastProcessByProcInstId = /**
     * 获取所有包含预解析的流程实例信息
     * @param {?} procInstId
     * @return {?}
     */
    function (procInstId) {
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/processInstances/" + procInstId + "/forecastProcess";
        return this.httpSvc.get(url);
    };
    /**
     * 获取流程预测数据
     */
    /**
     * 获取流程预测数据
     * @param {?} payload
     * @return {?}
     */
    UiFlowchartService.prototype.getForecastProcessByPayload = /**
     * 获取流程预测数据
     * @param {?} payload
     * @return {?}
     */
    function (payload) {
        /** @type {?} */
        var url = '/api/runtime/wf/v1.0/processInstances/forecastProcess';
        return this.httpSvc.post(url, payload);
    };
    /**
     * @param {?} procInstId
     * @return {?}
     */
    UiFlowchartService.prototype.getCompleteProcessInfoByProcInstId = /**
     * @param {?} procInstId
     * @return {?}
     */
    function (procInstId) {
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/processInstances/" + procInstId + "/flowChartInfo";
        return this.httpSvc.get(url);
    };
    /**
     * 基于流程实例Id获取所有活动实例
     * @param procInstId procInstId
     */
    /**
     * 基于流程实例Id获取所有活动实例
     * @param {?} procInstId procInstId
     * @return {?}
     */
    UiFlowchartService.prototype.getAllActiInstsbyProcInstId = /**
     * 基于流程实例Id获取所有活动实例
     * @param {?} procInstId procInstId
     * @return {?}
     */
    function (procInstId) {
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/processInstances/" + procInstId + "/activityInstanceSlims";
        return this.httpSvc.get(url);
    };
    /**
     * 基于流程实例ID获取所有的流转实例
     * @param procInstId procInstId
     */
    /**
     * 基于流程实例ID获取所有的流转实例
     * @param {?} procInstId procInstId
     * @return {?}
     */
    UiFlowchartService.prototype.getTransitionInstanceSlimsByProcInstId = /**
     * 基于流程实例ID获取所有的流转实例
     * @param {?} procInstId procInstId
     * @return {?}
     */
    function (procInstId) {
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/processInstances/" + procInstId + "/transitionInstanceSlims";
        return this.httpSvc.get(url);
    };
    /**
     * @param {?} procInstId
     * @return {?}
     */
    UiFlowchartService.prototype.getFormInfoByProcInstId = /**
     * @param {?} procInstId
     * @return {?}
     */
    function (procInstId) {
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/processInstances/" + procInstId + "/formInfo";
        return this.httpSvc.get(url);
    };
    /**
     * @param {?} procInstId
     * @param {?} actInstId
     * @return {?}
     */
    UiFlowchartService.prototype.getFormInfoByActInstId = /**
     * @param {?} procInstId
     * @param {?} actInstId
     * @return {?}
     */
    function (procInstId, actInstId) {
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/processInstances/" + procInstId + "/formInfo";
        if (actInstId) {
            url += "?actInstId=" + actInstId;
        }
        return this.httpSvc.get(url);
    };
    /**
     * 获取审批日志信息
     * @param ProcInstId ProcInstId
     * 新改造的接口
     */
    /**
     * 获取审批日志信息
     * @param {?} procInstId
     * @param {?=} activityDefinitionId
     * @return {?}
     */
    UiFlowchartService.prototype.getWorkItemLogs = /**
     * 获取审批日志信息
     * @param {?} procInstId
     * @param {?=} activityDefinitionId
     * @return {?}
     */
    function (procInstId, activityDefinitionId) {
        /** @type {?} */
        var logUrl = activityDefinitionId ?
            "/api/runtime/wf/v1.0/processInstances/" + procInstId + "/logs?activityDefinitionId=" + activityDefinitionId :
            "/api/runtime/wf/v1.0/processInstances/" + procInstId + "/logs";
        return this.httpSvc.get(logUrl);
    };
    /**
     * @param {?} name
     * @return {?}
     */
    UiFlowchartService.prototype.getI18nValue = /**
     * @param {?} name
     * @return {?}
     */
    function (name) {
        if (!name) {
            return '';
        }
        /** @type {?} */
        var defaultLang = localStorage.getItem('languageCode');
        /** @type {?} */
        var langData = defaultLang ? translate[defaultLang] : translate['zh-CHS'];
        /** @type {?} */
        var resultVal = '';
        if (name.indexOf('.') === -1) {
            resultVal = langData[name];
        }
        else {
            resultVal = name.split('.').reduce(function (obj, key) {
                if (obj) {
                    return obj[key];
                }
                else {
                    return null;
                }
            }, langData);
        }
        return resultVal;
    };
    /**
     * @param {?} processId
     * @return {?}
     */
    UiFlowchartService.prototype.getProcessInstanceById = /**
     * @param {?} processId
     * @return {?}
     */
    function (processId) {
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/processInstances/" + processId;
        return this.httpSvc.get(url);
    };
    /**
     * @param {?} dataId
     * @return {?}
     */
    UiFlowchartService.prototype.getProcInstIdByDataId = /**
     * @param {?} dataId
     * @return {?}
     */
    function (dataId) {
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/processInstances/procInstId?bizInstId=" + dataId;
        return this.httpSvc.get(url);
    };
    /**
     * @param {?} procInstId
     * @param {?} actInstId
     * @param {?} bizInstId
     * @return {?}
     */
    UiFlowchartService.prototype.retryAifCreation = /**
     * @param {?} procInstId
     * @param {?} actInstId
     * @param {?} bizInstId
     * @return {?}
     */
    function (procInstId, actInstId, bizInstId) {
        return this.httpSvc.post("/api/runtime/wf/v1.0/aifactivityinstance/retry", actInstId);
    };
    UiFlowchartService.decorators = [
        { type: Injectable }
    ];
    /** @nocollapse */
    UiFlowchartService.ctorParameters = function () { return [
        { type: HttpService }
    ]; };
    return UiFlowchartService;
}());
export { UiFlowchartService };
if (false) {
    /**
     * @type {?}
     * @private
     */
    UiFlowchartService.prototype.httpSvc;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidWktZmxvd2NoYXJ0LnNlcnZpY2UuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZ3NwLXdmL3VpLWZsb3djaGFydC8iLCJzb3VyY2VzIjpbImxpYi9zZXJ2aWNlcy91aS1mbG93Y2hhcnQuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUMzQyxPQUFPLEVBQWMsSUFBSSxFQUFNLE1BQU0sTUFBTSxDQUFDO0FBQzVDLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUNsRCxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sY0FBYyxDQUFDO0FBRXpDLE9BQU8sRUFBRSxHQUFHLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUVyQztJQUdFLDRCQUFvQixPQUFvQjtRQUFwQixZQUFPLEdBQVAsT0FBTyxDQUFhO0lBQUksQ0FBQzs7Ozs7SUFFN0MsNERBQStCOzs7O0lBQS9CLFVBQWdDLE9BQStCOztZQUN2RCxHQUFHLEdBQUcsK0RBQStEO1FBQzNFLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FDekMsR0FBRyxDQUFDLFVBQUMsRUFBTyxJQUFLLE9BQUEsRUFBRSxDQUFDLFFBQVEsRUFBWCxDQUFXLENBQUMsQ0FDOUIsQ0FBQztJQUNKLENBQUM7Ozs7O0lBRUQsd0RBQTJCOzs7O0lBQTNCLFVBQTRCLE1BQWM7UUFDeEMsSUFBSSxNQUFNLEVBQUU7O2dCQUNKLEdBQUcsR0FBRyxzRUFBb0UsTUFBUTtZQUN4RixPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1NBQzlCO2FBQU07WUFDTCxPQUFPLElBQUksQ0FBQyxJQUFJLEtBQUssRUFBRSxDQUFDLENBQUM7U0FDMUI7SUFDSCxDQUFDOzs7OztJQUVELHlEQUE0Qjs7OztJQUE1QixVQUE2QixN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QUFDLENBQUM7U0FDZDtRQUNELE9BQU8sU0FBUyxDQUFDO0lBQ25CLENBQUM7Ozs7O0lBRUQsbURBQXNCOzs7O0lBQXRCLFVBQXVCLFNBQWlCOztZQUNoQyxHQUFHLEdBQUcsMkNBQXlDLFNBQVc7UUFDaEUsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUMvQixDQUFDOzs7OztJQUVELGtEQUFxQjs7OztJQUFyQixVQUFzQixNQUFjOztZQUM1QixHQUFHLEdBQUcsZ0VBQThELE1BQVE7UUFDbEYsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUMvQixDQUFDOzs7Ozs7O0lBRUQsNkNBQWdCOzs7Ozs7SUFBaEIsVUFBaUIsVUFBa0IsRUFBRSxTQUFpQixFQUFFLFNBQWlCO1FBQ3ZFLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsZ0RBQWdELEVBQUUsU0FBUyxDQUFDLENBQUM7SUFDeEYsQ0FBQzs7Z0JBNUpGLFVBQVU7Ozs7Z0JBTEYsV0FBVzs7SUFrS3BCLHlCQUFDO0NBQUEsQUE3SkQsSUE2SkM7U0E1Slksa0JBQWtCOzs7Ozs7SUFFakIscUNBQTRCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBmcm9tLCBvZiB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBIdHRwU2VydmljZSB9IGZyb20gJ0BlY3AtY2FmL2NhZi1jb21tb24nO1xyXG5pbXBvcnQgeyB0cmFuc2xhdGUgfSBmcm9tICcuL2kxOG4vaW5kZXgnO1xyXG5pbXBvcnQgeyBGb3JlY2FzdFByb2Nlc3NQYXlsb2FkIH0gZnJvbSAnLi4vZW50aXR5L2ZvcmVjYXN0LXByb2Nlc3MtcGF5bG9hZCc7XHJcbmltcG9ydCB7IG1hcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcclxuXHJcbkBJbmplY3RhYmxlKClcclxuZXhwb3J0IGNsYXNzIFVpRmxvd2NoYXJ0U2VydmljZSB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgaHR0cFN2YzogSHR0cFNlcnZpY2UpIHsgfVxyXG5cclxuICBnZXRGb3JlY2FzdFByb2Nlc3NMaXN0QnlQYXlsb2FkKHBheWxvYWQ6IEZvcmVjYXN0UHJvY2Vzc1BheWxvYWQpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgY29uc3QgdXJsID0gJy9hcGkvcnVudGltZS93Zi92MS4wL3Byb2Nlc3NJbnN0YW5jZXMvc3RhcnRQcm9jZXNzLXNpbXVsYXRpb24nO1xyXG4gICAgcmV0dXJuIHRoaXMuaHR0cFN2Yy5wb3N0KHVybCwgcGF5bG9hZCkucGlwZShcclxuICAgICAgbWFwKChyZTogYW55KSA9PiByZS5wcm9jRGVmcylcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBnZXRSdW50aW1lUHJvY0luc3RzQnlEYXRhSWQoZGF0YUlkOiBzdHJpbmcpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgaWYgKGRhdGFJZCkge1xyXG4gICAgICBjb25zdCB1cmwgPSBgL2FwaS9ydW50aW1lL3dmL3YxLjAvcHJvY2Vzc0luc3RhbmNlcy9ydW50aW1lUHJvY0luc3RMaXN0P2RhdGFJZD0ke2RhdGFJZH1gO1xyXG4gICAgICByZXR1cm4gdGhpcy5odHRwU3ZjLmdldCh1cmwpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIGZyb20obmV3IEFycmF5KCkpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0SGlzdG9yaWNQcm9jSW5zdHNCeURhdGFJZChkYXRhSWQ6IHN0cmluZyk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICBpZiAoZGF0YUlkKSB7XHJcbiAgICAgIGNvbnN0IHVybCA9IGAvYXBpL3J1bnRpbWUvd2YvdjEuMC9wcm9jZXNzSW5zdGFuY2VzL2hpc3RvcmljUHJvY0luc3RMaXN0P2RhdGFJZD0ke2RhdGFJZH1gO1xyXG4gICAgICByZXR1cm4gdGhpcy5odHRwU3ZjLmdldCh1cmwpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIGZyb20obmV3IEFycmF5KCkpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5Z+65LqO5rWB56iL5a6e5L6LSUTojrflj5bmtYHnqIvlrp7kvotcclxuICAgKiBAcGFyYW0gcHJvY0luc3RJZCDmtYHnqIvlrp7kvotpZFxyXG4gICAqL1xyXG4gIGdldFByb2NJbnN0YW5jZUJ5SWQocHJvY0luc3RJZDogc3RyaW5nKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgIGNvbnN0IHVybCA9IGAvYXBpL3J1bnRpbWUvd2YvdjEuMC9wcm9jZXNzSW5zdGFuY2VzLyR7cHJvY0luc3RJZH1gO1xyXG4gICAgcmV0dXJuIHRoaXMuaHR0cFN2Yy5nZXQodXJsKTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICog5Z+65LqO5rWB56iL5a6e5L6LSUTojrflj5ZicG1uTW9kZWxcclxuICAgKi9cclxuICBnZXRCcG1uTW9kZWxieVByb2NJbnN0SWQocHJvY0luc3RJZDogc3RyaW5nKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgIGNvbnN0IHVybCA9IGAvYXBpL3J1bnRpbWUvd2YvdjEuMC9wcm9jZXNzSW5zdGFuY2VzLyR7cHJvY0luc3RJZH0vYnBtbk1vZGVsYDtcclxuICAgIHJldHVybiB0aGlzLmh0dHBTdmMuZ2V0KHVybCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDln7rkuo7mtYHnqIvlrprkuYlJROiOt+WPlmJwbW5Nb2RlbFxyXG4gICAqL1xyXG4gIGdldEJwbW5Nb2RlbGJ5UHJvY0RlZklkKHByb2NEZWZJZDogc3RyaW5nKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgIGNvbnN0IHVybCA9IGAvYXBpL3J1bnRpbWUvd2YvdjEuMC9wcm9jRGVmcy8ke3Byb2NEZWZJZH0vYnBtbk1vZGVsYDtcclxuICAgIHJldHVybiB0aGlzLmh0dHBTdmMuZ2V0KHVybCk7XHJcbiAgfVxyXG5cclxuICBnZXRTdWJQcm9jZXNzSW5zdGFuY2Uoc3VwZXJBY3RJbnN0SWQ6IHN0cmluZywgc3VwZXJQcm9jSW5zdElkOiBzdHJpbmcpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgaWYgKHN1cGVyQWN0SW5zdElkKSB7XHJcbiAgICAgIGNvbnN0IHVybCA9IGAvYXBpL3J1bnRpbWUvd2YvdjEuMC9wcm9jZXNzSW5zdGFuY2VzL3N1YlByb2NJbnN0P3N1cGVyQWN0SW5zdElkPSR7c3VwZXJBY3RJbnN0SWR9JnN1cGVyUHJvY0luc3RJZD0ke3N1cGVyUHJvY0luc3RJZH1gO1xyXG4gICAgICByZXR1cm4gdGhpcy5odHRwU3ZjLmdldCh1cmwpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6I635Y+W5omA5pyJ5YyF5ZCr6aKE6Kej5p6Q55qE5rWB56iL5a6e5L6L5L+h5oGvXHJcbiAgICovXHJcbiAgZ2V0Rm9yZWNhc3RQcm9jZXNzQnlQcm9jSW5zdElkKHByb2NJbnN0SWQ6IHN0cmluZyk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICBjb25zdCB1cmwgPSBgL2FwaS9ydW50aW1lL3dmL3YxLjAvcHJvY2Vzc0luc3RhbmNlcy8ke3Byb2NJbnN0SWR9L2ZvcmVjYXN0UHJvY2Vzc2A7XHJcbiAgICByZXR1cm4gdGhpcy5odHRwU3ZjLmdldCh1cmwpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6I635Y+W5rWB56iL6aKE5rWL5pWw5o2uXHJcbiAgICovXHJcbiAgZ2V0Rm9yZWNhc3RQcm9jZXNzQnlQYXlsb2FkKHBheWxvYWQ6IGFueSkge1xyXG4gICAgY29uc3QgdXJsID0gJy9hcGkvcnVudGltZS93Zi92MS4wL3Byb2Nlc3NJbnN0YW5jZXMvZm9yZWNhc3RQcm9jZXNzJztcclxuICAgIHJldHVybiB0aGlzLmh0dHBTdmMucG9zdCh1cmwsIHBheWxvYWQpO1xyXG4gIH1cclxuXHJcbiAgZ2V0Q29tcGxldGVQcm9jZXNzSW5mb0J5UHJvY0luc3RJZChwcm9jSW5zdElkOiBzdHJpbmcpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgY29uc3QgdXJsID0gYC9hcGkvcnVudGltZS93Zi92MS4wL3Byb2Nlc3NJbnN0YW5jZXMvJHtwcm9jSW5zdElkfS9mbG93Q2hhcnRJbmZvYDtcclxuICAgIHJldHVybiB0aGlzLmh0dHBTdmMuZ2V0KHVybCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDln7rkuo7mtYHnqIvlrp7kvotJZOiOt+WPluaJgOaciea0u+WKqOWunuS+i1xyXG4gICAqIEBwYXJhbSBwcm9jSW5zdElkIHByb2NJbnN0SWRcclxuICAgKi9cclxuICBnZXRBbGxBY3RpSW5zdHNieVByb2NJbnN0SWQocHJvY0luc3RJZDogc3RyaW5nKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgIGNvbnN0IHVybCA9IGAvYXBpL3J1bnRpbWUvd2YvdjEuMC9wcm9jZXNzSW5zdGFuY2VzLyR7cHJvY0luc3RJZH0vYWN0aXZpdHlJbnN0YW5jZVNsaW1zYDtcclxuICAgIHJldHVybiB0aGlzLmh0dHBTdmMuZ2V0KHVybCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDln7rkuo7mtYHnqIvlrp7kvotJROiOt+WPluaJgOacieeahOa1gei9rOWunuS+i1xyXG4gICAqIEBwYXJhbSBwcm9jSW5zdElkIHByb2NJbnN0SWRcclxuICAgKi9cclxuICBnZXRUcmFuc2l0aW9uSW5zdGFuY2VTbGltc0J5UHJvY0luc3RJZChwcm9jSW5zdElkOiBzdHJpbmcpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgY29uc3QgdXJsID0gYC9hcGkvcnVudGltZS93Zi92MS4wL3Byb2Nlc3NJbnN0YW5jZXMvJHtwcm9jSW5zdElkfS90cmFuc2l0aW9uSW5zdGFuY2VTbGltc2A7XHJcbiAgICByZXR1cm4gdGhpcy5odHRwU3ZjLmdldCh1cmwpO1xyXG4gIH1cclxuXHJcbiAgZ2V0Rm9ybUluZm9CeVByb2NJbnN0SWQocHJvY0luc3RJZDogc3RyaW5nKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgIGNvbnN0IHVybCA9IGAvYXBpL3J1bnRpbWUvd2YvdjEuMC9wcm9jZXNzSW5zdGFuY2VzLyR7cHJvY0luc3RJZH0vZm9ybUluZm9gO1xyXG4gICAgcmV0dXJuIHRoaXMuaHR0cFN2Yy5nZXQodXJsKTtcclxuICB9XHJcblxyXG4gIGdldEZvcm1JbmZvQnlBY3RJbnN0SWQocHJvY0luc3RJZDogc3RyaW5nLCBhY3RJbnN0SWQ6IHN0cmluZyk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICBsZXQgdXJsID0gYC9hcGkvcnVudGltZS93Zi92MS4wL3Byb2Nlc3NJbnN0YW5jZXMvJHtwcm9jSW5zdElkfS9mb3JtSW5mb2A7XHJcbiAgICBpZiAoYWN0SW5zdElkKSB7XHJcbiAgICAgIHVybCArPSBgP2FjdEluc3RJZD0ke2FjdEluc3RJZH1gO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMuaHR0cFN2Yy5nZXQodXJsKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiOt+WPluWuoeaJueaXpeW/l+S/oeaBr1xyXG4gICAqIEBwYXJhbSBQcm9jSW5zdElkIFByb2NJbnN0SWRcclxuICAgKiDmlrDmlLnpgKDnmoTmjqXlj6NcclxuICAgKi9cclxuICBnZXRXb3JrSXRlbUxvZ3MocHJvY0luc3RJZDogc3RyaW5nLCBhY3Rpdml0eURlZmluaXRpb25JZD86IHN0cmluZyk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICBjb25zdCBsb2dVcmwgPSBhY3Rpdml0eURlZmluaXRpb25JZCA/XHJcbiAgICAgIGAvYXBpL3J1bnRpbWUvd2YvdjEuMC9wcm9jZXNzSW5zdGFuY2VzLyR7cHJvY0luc3RJZH0vbG9ncz9hY3Rpdml0eURlZmluaXRpb25JZD0ke2FjdGl2aXR5RGVmaW5pdGlvbklkfWAgOlxyXG4gICAgICBgL2FwaS9ydW50aW1lL3dmL3YxLjAvcHJvY2Vzc0luc3RhbmNlcy8ke3Byb2NJbnN0SWR9L2xvZ3NgO1xyXG4gICAgcmV0dXJuIHRoaXMuaHR0cFN2Yy5nZXQobG9nVXJsKTtcclxuICB9XHJcblxyXG4gIGdldEkxOG5WYWx1ZShuYW1lOiBzdHJpbmcpIHtcclxuICAgIGlmICghbmFtZSkgeyByZXR1cm4gJyc7IH1cclxuICAgIGNvbnN0IGRlZmF1bHRMYW5nID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2xhbmd1YWdlQ29kZScpO1xyXG4gICAgY29uc3QgbGFuZ0RhdGEgPSBkZWZhdWx0TGFuZyA/IHRyYW5zbGF0ZVtkZWZhdWx0TGFuZ10gOiB0cmFuc2xhdGVbJ3poLUNIUyddO1xyXG4gICAgbGV0IHJlc3VsdFZhbCA9ICcnO1xyXG4gICAgaWYgKG5hbWUuaW5kZXhPZignLicpID09PSAtMSkge1xyXG4gICAgICByZXN1bHRWYWwgPSBsYW5nRGF0YVtuYW1lXTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJlc3VsdFZhbCA9IG5hbWUuc3BsaXQoJy4nKS5yZWR1Y2UoKG9iaiwga2V5KSA9PiB7XHJcbiAgICAgICAgaWYgKG9iaikge1xyXG4gICAgICAgICAgcmV0dXJuIG9ialtrZXldO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgIH0sIGxhbmdEYXRhKTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHRWYWw7XHJcbiAgfVxyXG5cclxuICBnZXRQcm9jZXNzSW5zdGFuY2VCeUlkKHByb2Nlc3NJZDogc3RyaW5nKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgIGNvbnN0IHVybCA9IGAvYXBpL3J1bnRpbWUvd2YvdjEuMC9wcm9jZXNzSW5zdGFuY2VzLyR7cHJvY2Vzc0lkfWA7XHJcbiAgICByZXR1cm4gdGhpcy5odHRwU3ZjLmdldCh1cmwpO1xyXG4gIH1cclxuXHJcbiAgZ2V0UHJvY0luc3RJZEJ5RGF0YUlkKGRhdGFJZDogc3RyaW5nKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgIGNvbnN0IHVybCA9IGAvYXBpL3J1bnRpbWUvd2YvdjEuMC9wcm9jZXNzSW5zdGFuY2VzL3Byb2NJbnN0SWQ/Yml6SW5zdElkPSR7ZGF0YUlkfWA7XHJcbiAgICByZXR1cm4gdGhpcy5odHRwU3ZjLmdldCh1cmwpO1xyXG4gIH1cclxuXHJcbiAgcmV0cnlBaWZDcmVhdGlvbihwcm9jSW5zdElkOiBzdHJpbmcsIGFjdEluc3RJZDogc3RyaW5nLCBiaXpJbnN0SWQ6IHN0cmluZykge1xyXG4gICAgcmV0dXJuIHRoaXMuaHR0cFN2Yy5wb3N0KFwiL2FwaS9ydW50aW1lL3dmL3YxLjAvYWlmYWN0aXZpdHlpbnN0YW5jZS9yZXRyeVwiLCBhY3RJbnN0SWQpO1xyXG4gIH1cclxufVxyXG4iXX0=