/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, HostBinding, Output, EventEmitter, Input, ViewChild, TemplateRef } from '@angular/core';
import { ActionOrganizationScope, ActionScope, OrganizationPotentialOwner } from './actionOrganizationScope';
var OrganizationPotentialOwnerComponent = /** @class */ (function () {
    function OrganizationPotentialOwnerComponent() {
        var _this = this;
        this.cls = 'farris-main-area flex-column';
        this.closeModal = new EventEmitter();
        this.submitModal = new EventEmitter();
        this.modalConfig = {
            title: '选项设置',
            width: 425,
            height: 360,
            showButtons: true
        };
        this.organizationLevelCollection = [{
                value: 'GLOBAL',
                text: '全员',
                orgId: 'global',
            }, {
                value: 'UNIT',
                text: '本单位',
                orgId: 'currentUnit'
            }, {
                value: 'DEPARTMENT',
                text: '本部门',
                orgId: 'currentDepartment'
            }];
        this.actionCollection = [{
                value: ActionScope.AddSignBehind, name: '加签'
            }, {
                value: ActionScope.AddSignFront, name: '征询'
            }, {
                value: ActionScope.Transfer, name: '移交'
            }, {
                value: ActionScope.Notify, name: '知会'
            }];
        this.enable = false;
        this.organizationLevel = this.organizationLevelCollection[0].value;
        this.action = this.actionCollection[0].value;
        this.includeChildren = false;
        this.actionName = (/**
         * @return {?}
         */
        function () {
            return _this.actionCollection.find((/**
             * @param {?} a
             * @return {?}
             */
            function (a) { return a.value === _this.action; })).name;
        });
    }
    Object.defineProperty(OrganizationPotentialOwnerComponent.prototype, "value", {
        set: /**
         * @param {?} v
         * @return {?}
         */
        function (v) {
            this.action = v.action;
            if (this.action === this.actionCollection[2].value) {
                if (v.enable === null || v.enable === undefined) {
                    this.enable = true;
                }
                else {
                    this.enable = v.enable;
                }
            }
            else {
                this.enable = v.enable;
            }
            if (v.scope) {
                this.organizationLevel = v.scope.organizationLevel;
                this.includeChildren = v.scope.includeChildren;
            }
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    OrganizationPotentialOwnerComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
    };
    /**
     * @return {?}
     */
    OrganizationPotentialOwnerComponent.prototype.clickOK = /**
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var scope = new ActionOrganizationScope();
        scope.enable = this.enable;
        scope.action = this.action;
        if (scope.enable && this.organizationLevel !== this.organizationLevelCollection[0].value) {
            /** @type {?} */
            var potential = new OrganizationPotentialOwner();
            potential.actionScope = this.action;
            potential.organizationLevel = (/** @type {?} */ (this.organizationLevel));
            potential.organizationId = this.organizationLevelCollection.find((/**
             * @param {?} o
             * @return {?}
             */
            function (o) { return o.value === _this.organizationLevel; })).orgId;
            potential.organizationName = this.organizationLevelCollection.find((/**
             * @param {?} o
             * @return {?}
             */
            function (o) { return o.value === _this.organizationLevel; })).text;
            potential.includeChildren = this.includeChildren;
            potential.tag = 'variable';
            scope.scope = potential;
        }
        /** @type {?} */
        var object = { value: scope, parameters: null };
        this.submitModal.emit(object);
    };
    /**
     * @return {?}
     */
    OrganizationPotentialOwnerComponent.prototype.clickCancel = /**
     * @return {?}
     */
    function () {
        this.closeModal.emit();
    };
    /**
     * @param {?} event
     * @return {?}
     */
    OrganizationPotentialOwnerComponent.prototype.valueChange = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        switch (event.value) {
            case this.organizationLevelCollection[0].value:
                this.includeChildren = false;
                break;
            case this.organizationLevelCollection[1].value:
                this.includeChildren = true;
                break;
            case this.organizationLevelCollection[2].value:
                this.includeChildren = false;
                break;
        }
    };
    OrganizationPotentialOwnerComponent.decorators = [
        { type: Component, args: [{
                    selector: 'app-organization-potential-owner',
                    template: "<div class=\"f-page\">\r\n  <div class=\"f-utils-fill-flex-column farris-split-section m-2 h-100\">\r\n    <section class=\"f-utils-fill-flex-column h-100\">\r\n      <div class=\"f-section-header pt-2 mx-2\">\r\n        <div class=\"f-title\">\r\n          <h4 class=\"f-title-text\">{{actionName()+'\u9009\u9879'}}</h4>\r\n        </div>\r\n      </div>\r\n      <div class=\"f-utils-fill-flex-column h-100\">\r\n        <div class=\"farris-form form-inline farris-form-inline\">\r\n          <div class=\"col-12 farris-group-auto my-3 pr-5\">\r\n            <div class=\"farris-group-wrap\">\r\n              <div class=\"form-group farris-form-group\">\r\n                <label class=\"col-form-label\">\r\n                  <span class=\"farris-label-text\">\u662F\u5426\u542F\u7528</span>\r\n                </label>\r\n                <div class=\"farris-input-wrap ml-1\">\r\n                  <farris-switch [(ngModel)]=\"enable\" name=\"enable\"></farris-switch>\r\n                  <div class=\"farris-feedback valid-feedback\"></div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-12 farris-group-auto mt-4 pr-5\">\r\n            <div class=\"farris-group-wrap\">\r\n              <div class=\"form-group farris-form-group\">\r\n                <label class=\"col-form-label\">\r\n                  <span class=\"farris-label-text\">{{actionName()+'\u8303\u56F4'}}</span>\r\n                </label>\r\n                <div class=\"farris-input-wrap ml-1 pr-5\">\r\n                  <farris-combo-list [panelHeight]=\"100\" [(ngModel)]=\"organizationLevel\" name=\"actionScope\" [idField]=\"'value'\"\r\n                    [textField]=\"'text'\" [valueField]=\"'value'\" [data]=\"organizationLevelCollection\"\r\n                    (valueChange)=\"valueChange($event)\" [readonly]=\"enable===false\">\r\n                  </farris-combo-list>\r\n                  <div class=\"farris-feedback valid-feedback\"></div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div *ngIf=\"organizationLevel===organizationLevelCollection[2].value\" class=\"col-12 farris-group-auto my-3 pr-5\">\r\n            <div class=\"farris-group-wrap\">\r\n              <div class=\"form-group farris-form-group\">\r\n                <label class=\"col-form-label\">\r\n                  <span class=\"farris-label-text\">\u5305\u542B\u4E0B\u7EA7</span>\r\n                </label>\r\n                <div class=\"farris-input-wrap ml-1\">\r\n                  <farris-switch [(ngModel)]=\"includeChildren\" name=\"includeChildren\" [editable]=\"enable===true\"></farris-switch>\r\n                  <div class=\"farris-feedback valid-feedback\"></div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  </div>\r\n</div>\r\n\r\n<ng-template #iconSelectFooter>\r\n  <button type=\"button\" class=\"btn btn-primary btn-sm mx-2\" (click)=\"clickOK()\">\u786E\u5B9A</button>\r\n  <button type=\"button\" class=\"btn btn-secondary btn-sm mx-2\" (click)=\"clickCancel()\">\u53D6\u6D88</button>\r\n</ng-template>\r\n",
                    styles: [".title-content{color:#000;display:inline-flex;align-items:center;line-height:1.375rem;position:relative;overflow:hidden;padding:0 0 0 1rem;min-width:390px}.title-content ::before{content:'';width:.25rem;height:1.125rem;background:#59a1ff;border-radius:1px;position:absolute;top:50%;left:0;margin-top:-.5625rem}.title-text{font-size:1rem;line-height:1.375rem;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;margin-bottom:0;margin-right:10px}.title-line{flex-grow:1;border-bottom:1px dashed rgba(0,0,0,.1)}"]
                }] }
    ];
    /** @nocollapse */
    OrganizationPotentialOwnerComponent.ctorParameters = function () { return []; };
    OrganizationPotentialOwnerComponent.propDecorators = {
        cls: [{ type: HostBinding, args: ['class',] }],
        closeModal: [{ type: Output }],
        submitModal: [{ type: Output }],
        value: [{ type: Input }],
        modalFooter: [{ type: ViewChild, args: ['iconSelectFooter',] }]
    };
    return OrganizationPotentialOwnerComponent;
}());
export { OrganizationPotentialOwnerComponent };
if (false) {
    /** @type {?} */
    OrganizationPotentialOwnerComponent.prototype.cls;
    /** @type {?} */
    OrganizationPotentialOwnerComponent.prototype.closeModal;
    /** @type {?} */
    OrganizationPotentialOwnerComponent.prototype.submitModal;
    /** @type {?} */
    OrganizationPotentialOwnerComponent.prototype.modalFooter;
    /** @type {?} */
    OrganizationPotentialOwnerComponent.prototype.modalConfig;
    /** @type {?} */
    OrganizationPotentialOwnerComponent.prototype.organizationLevelCollection;
    /** @type {?} */
    OrganizationPotentialOwnerComponent.prototype.actionCollection;
    /** @type {?} */
    OrganizationPotentialOwnerComponent.prototype.enable;
    /** @type {?} */
    OrganizationPotentialOwnerComponent.prototype.organizationLevel;
    /** @type {?} */
    OrganizationPotentialOwnerComponent.prototype.action;
    /** @type {?} */
    OrganizationPotentialOwnerComponent.prototype.includeChildren;
    /** @type {?} */
    OrganizationPotentialOwnerComponent.prototype.actionName;
}
var OrganizationPotentialOwnerConverter = /** @class */ (function () {
    function OrganizationPotentialOwnerConverter() {
    }
    /**
     * @param {?} data
     * @return {?}
     */
    OrganizationPotentialOwnerConverter.prototype.convertTo = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        if (data.action === ActionScope.Transfer && (data.enable === null || data.enable === undefined)) {
            return '（已设置）';
        }
        else {
            if (data.enable) {
                return '（已设置）';
            }
            else {
                return '（未设置）';
            }
        }
    };
    return OrganizationPotentialOwnerConverter;
}());
export { OrganizationPotentialOwnerConverter };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3JnYW5pemF0aW9uLXBvdGVudGlhbC1vd25lci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZ3NwLXdmL3dmLXByb2Nlc3MtZWRpdG9yLyIsInNvdXJjZXMiOlsibGliL3ZpZXdzL29yZ2FuaXphdGlvbi1wb3RlbnRpYWwtb3duZXIvb3JnYW5pemF0aW9uLXBvdGVudGlhbC1vd25lci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsV0FBVyxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxXQUFXLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFcEgsT0FBTyxFQUFFLHVCQUF1QixFQUFFLFdBQVcsRUFBRSwwQkFBMEIsRUFBcUIsTUFBTSwyQkFBMkIsQ0FBQztBQUVoSTtJQWdFRTtRQUFBLGlCQUFpQjtRQXpEakIsUUFBRyxHQUFHLDhCQUE4QixDQUFDO1FBRTNCLGVBQVUsR0FBRyxJQUFJLFlBQVksRUFBTyxDQUFDO1FBQ3JDLGdCQUFXLEdBQUcsSUFBSSxZQUFZLEVBQU8sQ0FBQztRQXFCaEQsZ0JBQVcsR0FBRztZQUNaLEtBQUssRUFBRSxNQUFNO1lBQ2IsS0FBSyxFQUFFLEdBQUc7WUFDVixNQUFNLEVBQUUsR0FBRztZQUNYLFdBQVcsRUFBRSxJQUFJO1NBQ2xCLENBQUM7UUFDRixnQ0FBMkIsR0FBRyxDQUFDO2dCQUM3QixLQUFLLEVBQUUsUUFBUTtnQkFDZixJQUFJLEVBQUUsSUFBSTtnQkFDVixLQUFLLEVBQUUsUUFBUTthQUNoQixFQUFFO2dCQUNELEtBQUssRUFBRSxNQUFNO2dCQUNiLElBQUksRUFBRSxLQUFLO2dCQUNYLEtBQUssRUFBRSxhQUFhO2FBQ3JCLEVBQUU7Z0JBQ0QsS0FBSyxFQUFFLFlBQVk7Z0JBQ25CLElBQUksRUFBRSxLQUFLO2dCQUNYLEtBQUssRUFBRSxtQkFBbUI7YUFDekIsQ0FBQyxDQUFDO1FBQ0wscUJBQWdC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QUVFLFdBQVcsU0FBQyxPQUFPOzZCQUduQixNQUFNOzhCQUNOLE1BQU07d0JBRU4sS0FBSzs4QkFrQkwsU0FBUyxTQUFDLGtCQUFrQjs7SUEyRS9CLDBDQUFDO0NBQUEsQUF6R0QsSUF5R0M7U0FwR1ksbUNBQW1DOzs7SUFDOUMsa0RBQ3FDOztJQUVyQyx5REFBK0M7O0lBQy9DLDBEQUFnRDs7SUFvQmhELDBEQUE2RDs7SUFDN0QsMERBS0U7O0lBQ0YsMEVBWUs7O0lBQ0wsK0RBUUM7O0lBQ0QscURBQWU7O0lBQ2YsZ0VBQThEOztJQUM5RCxxREFBd0M7O0lBQ3hDLDhEQUF3Qjs7SUF3Q3hCLHlEQUVDOztBQUVIO0lBQ0U7SUFBZ0IsQ0FBQzs7Ozs7SUFFakIsdURBQVM7Ozs7SUFBVCxVQUFVLElBQTZCO1FBQ3JDLElBQUksSUFBSSxDQUFDLE1BQU0sS0FBSyxXQUFXLENBQUMsUUFBUSxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sS0FBSyxJQUFJLElBQUksSUFBSSxDQUFDLE1BQU0sS0FBSyxTQUFTLENBQUMsRUFBRTtZQUMvRixPQUFPLE9BQU8sQ0FBQztTQUNoQjthQUFNO1lBQ0wsSUFBSSxJQUFJLENBQUMsTUFBTSxFQUFFO2dCQUNiLE9BQU8sT0FBTyxDQUFDO2FBQ2xCO2lCQUFNO2dCQUNMLE9BQU8sT0FBTyxDQUFDO2FBQ2hCO1NBQ0Y7SUFDSCxDQUFDO0lBQ0gsMENBQUM7QUFBRCxDQUFDLEFBZEQsSUFjQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBIb3N0QmluZGluZywgT3V0cHV0LCBFdmVudEVtaXR0ZXIsIElucHV0LCBWaWV3Q2hpbGQsIFRlbXBsYXRlUmVmIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IFR5cGVDb252ZXJ0ZXIgfSBmcm9tICdAZmFycmlzL3VpLXByb3BlcnR5LXBhbmVsJztcclxuaW1wb3J0IHsgQWN0aW9uT3JnYW5pemF0aW9uU2NvcGUsIEFjdGlvblNjb3BlLCBPcmdhbml6YXRpb25Qb3RlbnRpYWxPd25lciwgT3JnYW5pemF0aW9uTGV2ZWwgfSBmcm9tICcuL2FjdGlvbk9yZ2FuaXphdGlvblNjb3BlJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnYXBwLW9yZ2FuaXphdGlvbi1wb3RlbnRpYWwtb3duZXInLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi9vcmdhbml6YXRpb24tcG90ZW50aWFsLW93bmVyLmNvbXBvbmVudC5odG1sJyxcclxuICBzdHlsZVVybHM6IFsnLi9vcmdhbml6YXRpb24tcG90ZW50aWFsLW93bmVyLmNvbXBvbmVudC5zY3NzJ11cclxufSlcclxuZXhwb3J0IGNsYXNzIE9yZ2FuaXphdGlvblBvdGVudGlhbE93bmVyQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcclxuICBASG9zdEJpbmRpbmcoJ2NsYXNzJylcclxuICBjbHMgPSAnZmFycmlzLW1haW4tYXJlYSBmbGV4LWNvbHVtbic7XHJcblxyXG4gIEBPdXRwdXQoKSBjbG9zZU1vZGFsID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcbiAgQE91dHB1dCgpIHN1Ym1pdE1vZGFsID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcblxyXG4gIEBJbnB1dCgpXHJcbiAgc2V0IHZhbHVlKHY6IEFjdGlvbk9yZ2FuaXphdGlvblNjb3BlKSB7XHJcbiAgICB0aGlzLmFjdGlvbiA9IHYuYWN0aW9uO1xyXG4gICAgaWYgKHRoaXMuYWN0aW9uID09PSB0aGlzLmFjdGlvbkNvbGxlY3Rpb25bMl0udmFsdWUpIHtcclxuICAgICAgaWYgKHYuZW5hYmxlID09PSBudWxsIHx8IHYuZW5hYmxlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICB0aGlzLmVuYWJsZSA9IHRydWU7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5lbmFibGUgPSB2LmVuYWJsZTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5lbmFibGUgPSB2LmVuYWJsZTtcclxuICAgIH1cclxuICAgIGlmICh2LnNjb3BlKSB7XHJcbiAgICAgIHRoaXMub3JnYW5pemF0aW9uTGV2ZWwgPSB2LnNjb3BlLm9yZ2FuaXphdGlvbkxldmVsO1xyXG4gICAgICB0aGlzLmluY2x1ZGVDaGlsZHJlbiA9IHYuc2NvcGUuaW5jbHVkZUNoaWxkcmVuO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgQFZpZXdDaGlsZCgnaWNvblNlbGVjdEZvb3RlcicpIG1vZGFsRm9vdGVyOiBUZW1wbGF0ZVJlZjxhbnk+O1xyXG4gIG1vZGFsQ29uZmlnID0ge1xyXG4gICAgdGl0bGU6ICfpgInpobnorr7nva4nLFxyXG4gICAgd2lkdGg6IDQyNSxcclxuICAgIGhlaWdodDogMzYwLFxyXG4gICAgc2hvd0J1dHRvbnM6IHRydWVcclxuICB9O1xyXG4gIG9yZ2FuaXphdGlvbkxldmVsQ29sbGVjdGlvbiA9IFt7XHJcbiAgICB2YWx1ZTogJ0dMT0JBTCcsXHJcbiAgICB0ZXh0OiAn5YWo5ZGYJyxcclxuICAgIG9yZ0lkOiAnZ2xvYmFsJyxcclxuICB9LCB7XHJcbiAgICB2YWx1ZTogJ1VOSVQnLFxyXG4gICAgdGV4dDogJ+acrOWNleS9jScsXHJcbiAgICBvcmdJZDogJ2N1cnJlbnRVbml0J1xyXG4gIH0sIHtcclxuICAgIHZhbHVlOiAnREVQQVJUTUVOVCcsXHJcbiAgICB0ZXh0OiAn5pys6YOo6ZeoJyxcclxuICAgIG9yZ0lkOiAnY3VycmVudERlcGFydG1lbnQnXHJcbiAgICB9XTtcclxuICBhY3Rpb25Db2xsZWN0aW9uID0gW3tcclxuICAgICAgdmFsdWU6IEFjdGlvblNjb3BlLkFkZFNpZ25CZWhpbmQsIG5hbWU6ICfliqDnrb4nXHJcbiAgfSwge1xyXG4gICAgICB2YWx1ZTogQWN0aW9uU2NvcGUuQWRkU2lnbkZyb250LCBuYW1lOiAn5b6B6K+iJ1xyXG4gIH0sIHtcclxuICAgICAgdmFsdWU6IEFjdGlvblNjb3BlLlRyYW5zZmVyLCBuYW1lOiAn56e75LqkJ1xyXG4gIH0sIHtcclxuICAgIHZhbHVlOiBBY3Rpb25TY29wZS5Ob3RpZnksIG5hbWU6ICfnn6XkvJonXHJcbn1dO1xyXG4gIGVuYWJsZSA9IGZhbHNlO1xyXG4gIG9yZ2FuaXphdGlvbkxldmVsID0gdGhpcy5vcmdhbml6YXRpb25MZXZlbENvbGxlY3Rpb25bMF0udmFsdWU7XHJcbiAgYWN0aW9uID0gdGhpcy5hY3Rpb25Db2xsZWN0aW9uWzBdLnZhbHVlO1xyXG4gIGluY2x1ZGVDaGlsZHJlbiA9IGZhbHNlO1xyXG5cclxuICBjb25zdHJ1Y3RvcigpIHsgfVxyXG5cclxuICBuZ09uSW5pdCgpIHtcclxuICB9XHJcblxyXG4gIGNsaWNrT0soKSB7XHJcbiAgICBjb25zdCBzY29wZSA9IG5ldyBBY3Rpb25Pcmdhbml6YXRpb25TY29wZSgpO1xyXG4gICAgc2NvcGUuZW5hYmxlID0gdGhpcy5lbmFibGU7XHJcbiAgICBzY29wZS5hY3Rpb24gPSB0aGlzLmFjdGlvbjtcclxuICAgIGlmIChzY29wZS5lbmFibGUgJiYgdGhpcy5vcmdhbml6YXRpb25MZXZlbCAhPT0gdGhpcy5vcmdhbml6YXRpb25MZXZlbENvbGxlY3Rpb25bMF0udmFsdWUpIHtcclxuICAgICAgY29uc3QgcG90ZW50aWFsID0gbmV3IE9yZ2FuaXphdGlvblBvdGVudGlhbE93bmVyKCk7XHJcbiAgICAgIHBvdGVudGlhbC5hY3Rpb25TY29wZSA9IHRoaXMuYWN0aW9uO1xyXG4gICAgICBwb3RlbnRpYWwub3JnYW5pemF0aW9uTGV2ZWwgPSB0aGlzLm9yZ2FuaXphdGlvbkxldmVsIGFzIE9yZ2FuaXphdGlvbkxldmVsO1xyXG4gICAgICBwb3RlbnRpYWwub3JnYW5pemF0aW9uSWQgPSB0aGlzLm9yZ2FuaXphdGlvbkxldmVsQ29sbGVjdGlvbi5maW5kKG8gPT4gby52YWx1ZSA9PT0gdGhpcy5vcmdhbml6YXRpb25MZXZlbCkub3JnSWQ7XHJcbiAgICAgIHBvdGVudGlhbC5vcmdhbml6YXRpb25OYW1lID0gdGhpcy5vcmdhbml6YXRpb25MZXZlbENvbGxlY3Rpb24uZmluZChvID0+IG8udmFsdWUgPT09IHRoaXMub3JnYW5pemF0aW9uTGV2ZWwpLnRleHQ7XHJcbiAgICAgIHBvdGVudGlhbC5pbmNsdWRlQ2hpbGRyZW4gPSB0aGlzLmluY2x1ZGVDaGlsZHJlbjtcclxuICAgICAgcG90ZW50aWFsLnRhZyA9ICd2YXJpYWJsZSc7XHJcbiAgICAgIHNjb3BlLnNjb3BlID0gcG90ZW50aWFsO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgb2JqZWN0ID0geyB2YWx1ZTogc2NvcGUsIHBhcmFtZXRlcnM6IG51bGwgfTtcclxuICAgIHRoaXMuc3VibWl0TW9kYWwuZW1pdChvYmplY3QpO1xyXG4gIH1cclxuICBjbGlja0NhbmNlbCgpIHtcclxuICAgIHRoaXMuY2xvc2VNb2RhbC5lbWl0KCk7XHJcbiAgfVxyXG4gIHZhbHVlQ2hhbmdlKGV2ZW50OiBhbnkpIHtcclxuICAgIHN3aXRjaCAoZXZlbnQudmFsdWUpIHtcclxuICAgICAgY2FzZSB0aGlzLm9yZ2FuaXphdGlvbkxldmVsQ29sbGVjdGlvblswXS52YWx1ZTpcclxuICAgICAgICB0aGlzLmluY2x1ZGVDaGlsZHJlbiA9IGZhbHNlO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIHRoaXMub3JnYW5pemF0aW9uTGV2ZWxDb2xsZWN0aW9uWzFdLnZhbHVlOlxyXG4gICAgICAgIHRoaXMuaW5jbHVkZUNoaWxkcmVuID0gdHJ1ZTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSB0aGlzLm9yZ2FuaXphdGlvbkxldmVsQ29sbGVjdGlvblsyXS52YWx1ZTpcclxuICAgICAgICB0aGlzLmluY2x1ZGVDaGlsZHJlbiA9IGZhbHNlO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gIH1cclxuICBhY3Rpb25OYW1lID0gKCkgPT4ge1xyXG4gICAgcmV0dXJuIHRoaXMuYWN0aW9uQ29sbGVjdGlvbi5maW5kKGEgPT4gYS52YWx1ZSA9PT0gdGhpcy5hY3Rpb24pLm5hbWU7XHJcbiAgfVxyXG59XHJcbmV4cG9ydCBjbGFzcyBPcmdhbml6YXRpb25Qb3RlbnRpYWxPd25lckNvbnZlcnRlciBpbXBsZW1lbnRzIFR5cGVDb252ZXJ0ZXIge1xyXG4gIGNvbnN0cnVjdG9yKCkgeyB9XHJcblxyXG4gIGNvbnZlcnRUbyhkYXRhOiBBY3Rpb25Pcmdhbml6YXRpb25TY29wZSk6IHN0cmluZyB7XHJcbiAgICBpZiAoZGF0YS5hY3Rpb24gPT09IEFjdGlvblNjb3BlLlRyYW5zZmVyICYmIChkYXRhLmVuYWJsZSA9PT0gbnVsbCB8fCBkYXRhLmVuYWJsZSA9PT0gdW5kZWZpbmVkKSkge1xyXG4gICAgICByZXR1cm4gJ++8iOW3suiuvue9ru+8iSc7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAoZGF0YS5lbmFibGUpIHtcclxuICAgICAgICAgIHJldHVybiAn77yI5bey6K6+572u77yJJztcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gJ++8iOacquiuvue9ru+8iSc7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn1cclxuIl19