/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, HostBinding, Output, EventEmitter, Input, ViewChild, TemplateRef, ComponentFactoryResolver, Injector } from '@angular/core';
import { PerformerUIState } from './performer.uistate';
import { PerformerRepository } from './performer.repository';
import { PerformerViewModel } from './performer.viewmodel';
import { FormBuilder } from '@angular/forms';
import { BsModalService } from '@farris/ui-modal';
import { PerformerEditComponent } from './views/performer-edit/performer-edit.component';
import { MessagerService } from '@farris/ui-messager';
import { PerformerOptionsComponent } from './views/performer-options/performer-options.component';
import { DialogComponent } from '@farris/ui-dialog';
import { ProcessDesignerUIState } from '../../app/process-designer.uistate';
import { ExpressionService, InjectedType, ExprEditMode } from '@gsp-svc/expression';
import { PerformerInfo } from './entities/performer-info.entity';
import { DatagridComponent } from '@farris/ui-datagrid';
import { of } from 'rxjs';
import { HttpService } from '@ecp-caf/caf-common';
var PerformerComponent = /** @class */ (function () {
    function PerformerComponent(viewModel, uistate, formBuilder, resolver, injector, modalService, message, designerUIState, expr, http) {
        var _this = this;
        this.viewModel = viewModel;
        this.uistate = uistate;
        this.formBuilder = formBuilder;
        this.resolver = resolver;
        this.injector = injector;
        this.modalService = modalService;
        this.message = message;
        this.designerUIState = designerUIState;
        this.expr = expr;
        this.http = http;
        this.cls = 'farris-main-area flex-column';
        this.display = true; // 控制矩阵参与者是否显示
        this.closeModal = new EventEmitter();
        this.submitModal = new EventEmitter();
        this.editorParams = {};
        this.isClose = true;
        this.modalConfig = {
            title: '参与者',
            width: 800,
            height: 515,
            showButtons: true
        };
        this.columns = [
            {
                field: 'type', width: 50, title: '类型',
                formatter: {
                    type: 'enum',
                    options: { valueField: 'value', textField: 'text', data: this.uistate.typeCollection }
                }
            },
            { field: 'performerName', width: 50, title: '名称' },
            { field: 'description', width: 100, title: '描述', showTips: true },
            {
                field: 'condition', width: 60, title: '启用条件', showTips: true,
                editor: {
                    type: 'input-group',
                    options: {
                        groupText: '<i class="f-icon f-icon-lookup"></i>',
                        editable: false,
                        clickHandle: (/**
                         * @param {?} e
                         * @return {?}
                         */
                        function (e) {
                            e.formControl.setValue(e.instance.value ? e.instance.value : '');
                            _this.editConditon(e);
                        }),
                        clear: (/**
                         * @param {?} e
                         * @return {?}
                         */
                        function (e) {
                            if (e.rowData.type === 'wf.ComponentParticipant') {
                                /** @type {?} */
                                var i = _this.uistate.performerInfo.components.findIndex((/**
                                 * @param {?} item
                                 * @return {?}
                                 */
                                function (item) { return item.id === e.rowData.id; }));
                                _this.uistate.performerInfo.components[i].condition = '';
                            }
                            else if (e.rowData.type === 'wf.ReportingLineParticipant') {
                                /** @type {?} */
                                var i = _this.uistate.performerInfo.reportingLines.findIndex((/**
                                 * @param {?} item
                                 * @return {?}
                                 */
                                function (item) { return item.id === e.rowData.id; }));
                                _this.uistate.performerInfo.reportingLines[i].condition = '';
                            }
                            else if (e.rowData.type === 'wf.MatrixParticipant') {
                                /** @type {?} */
                                var i = _this.uistate.performerInfo.matrixParticipants.findIndex((/**
                                 * @param {?} item
                                 * @return {?}
                                 */
                                function (item) { return item.id === e.rowData.id; }));
                                _this.uistate.performerInfo.matrixParticipants[i].condition = '';
                            }
                        })
                    }
                }
            }
        ];
        this.editState = 'new'; // 编辑状态，用于区分是新增还是编辑  new | edit
        this.afterEdit = (/**
         * @param {?} rowIndex
         * @param {?} rowData
         * @param {?=} column
         * @return {?}
         */
        function (rowIndex, rowData, column) {
            return of(true);
        });
        this.GetOrganizationType();
    }
    Object.defineProperty(PerformerComponent.prototype, "value", {
        set: /**
         * @param {?} partInfo
         * @return {?}
         */
        function (partInfo) {
            var _this = this;
            if (partInfo.performers && partInfo.performers.length > 0) {
                this.uistate.performerInfo.performers = partInfo.performers;
                this.uistate.performersList = this.uistate.performersList.concat((/** @type {?} */ (partInfo.performers)));
                this.uistate.performersList.map((/**
                 * @param {?} performer
                 * @return {?}
                 */
                function (performer) { return performer.description = _this.performerDescription((/** @type {?} */ (performer))); }));
            }
            if (partInfo.components && partInfo.components.length > 0) {
                this.uistate.performerInfo.components = partInfo.components;
                partInfo.components.forEach((/**
                 * @param {?} cmp
                 * @return {?}
                 */
                function (cmp) {
                    _this.uistate.performersList.push({
                        id: cmp.id,
                        type: 'wf.ComponentParticipant',
                        performerName: cmp.name,
                        description: _this.componentDescription(cmp),
                        condition: cmp.condition
                    });
                }));
            }
            if (partInfo.reportingLines && partInfo.reportingLines.length > 0) {
                this.uistate.performerInfo.reportingLines = partInfo.reportingLines;
                partInfo.reportingLines.forEach((/**
                 * @param {?} r
                 * @return {?}
                 */
                function (r) {
                    _this.uistate.performersList.push({
                        id: r.id,
                        type: 'wf.ReportingLineParticipant',
                        performerName: r.reportingLineDefName + '-' + r.dimension,
                        description: _this.reportingLineDescription(r),
                        condition: r.condition
                    });
                }));
            }
            if (partInfo.matrixParticipants && partInfo.matrixParticipants.length > 0) {
                this.uistate.performerInfo.matrixParticipants = partInfo.matrixParticipants;
                partInfo.matrixParticipants.forEach((/**
                 * @param {?} r
                 * @return {?}
                 */
                function (r) {
                    _this.uistate.performersList.push({
                        id: r.id,
                        type: 'wf.MatrixParticipant',
                        performerName: r.matrixDefName + '-' + r.dataFieldAlias,
                        description: _this.matrixDescription(r),
                        condition: r.condition
                    });
                }));
            }
            if (partInfo.options) {
                this.uistate.performerInfo.options = partInfo.options;
            }
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    PerformerComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.getMatrixConfig().subscribe((/**
         * @param {?} re
         * @return {?}
         */
        function (re) {
            if (re && re.currentValue === 'false') {
                _this.display = false;
            }
        }));
    };
    /**
     * @return {?}
     */
    PerformerComponent.prototype.add = /**
     * @return {?}
     */
    function () {
        this.editState = 'new';
        /** @type {?} */
        var compFactory = this.resolver.resolveComponentFactory(PerformerEditComponent);
        this.compRef = compFactory.create(this.injector);
        this.compRef.instance.display = this.display;
        /** @type {?} */
        var modalConfig = {
            title: '参与者选择',
            width: 800,
            height: 515,
            buttons: this.editFooter,
            showButtons: true
        };
        this.editDialog = this.modalService.show(this.compRef, modalConfig);
    };
    /**
     * @return {?}
     */
    PerformerComponent.prototype.edit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.editState = 'edit';
        if (this.uistate.curPerformer) {
            /** @type {?} */
            var modalConfig_1 = {
                title: '参与者选择',
                width: 800,
                height: 515,
                buttons: this.editFooter,
                showButtons: true
            };
            /** @type {?} */
            var compFactory = this.resolver.resolveComponentFactory(PerformerEditComponent);
            this.compRef = compFactory.create(this.injector);
            switch (this.uistate.curPerformer.type) {
                case 'wf.PositionParticipant':
                    this.compRef.instance.performer = {
                        type: 'wf.PositionParticipant',
                        value: this.uistate.performerInfo.performers.find((/**
                         * @param {?} p
                         * @return {?}
                         */
                        function (p) { return p.id === _this.uistate.curPerformer.id; }))
                    };
                    break;
                case 'wf.UserParticipant':
                    this.compRef.instance.performer = {
                        type: 'wf.UserParticipant',
                        value: this.uistate.performerInfo.performers.find((/**
                         * @param {?} p
                         * @return {?}
                         */
                        function (p) { return p.id === _this.uistate.curPerformer.id; }))
                    };
                    break;
                case 'wf.ReportingLineParticipant':
                    /** @type {?} */
                    var reportingLine = this.uistate.performerInfo.reportingLines.find((/**
                     * @param {?} r
                     * @return {?}
                     */
                    function (r) {
                        return r.id === _this.uistate.curPerformer.id;
                    }));
                    this.compRef.instance.performer = {
                        type: 'wf.ReportingLineParticipant',
                        value: reportingLine
                    };
                    /** @type {?} */
                    var url = '/api/runtime/wf/v1.0/reportingLineDefinitions/' + reportingLine.reportingLineDefId;
                    this.http.get(url).subscribe((/**
                     * @param {?} res
                     * @return {?}
                     */
                    function (res) {
                        if (!res) {
                            _this.message.error('该条汇报关系数据的定义已删除，该条数据将删除');
                            _this.remove();
                        }
                        else {
                            _this.editDialog = _this.modalService.show(_this.compRef, modalConfig_1);
                        }
                    }));
                    break;
                case 'wf.MatrixParticipant':
                    /** @type {?} */
                    var matrix = this.uistate.performerInfo.matrixParticipants.find((/**
                     * @param {?} r
                     * @return {?}
                     */
                    function (r) {
                        return r.id === _this.uistate.curPerformer.id;
                    }));
                    this.compRef.instance.performer = {
                        type: 'wf.MatrixParticipant',
                        value: matrix
                    };
                    /** @type {?} */
                    var urlMatrix = '/api/runtime/wf/v1.0/matrixDefinition/' + matrix.matrixDefId;
                    this.http.get(urlMatrix).subscribe((/**
                     * @param {?} res
                     * @return {?}
                     */
                    function (res) {
                        if (!res) {
                            _this.message.error('该条矩阵数据的定义已删除，该条数据将删除');
                            _this.remove();
                        }
                        else {
                            _this.editDialog = _this.modalService.show(_this.compRef, modalConfig_1);
                        }
                    }));
                    break;
                case 'wf.ComponentParticipant':
                    this.compRef.instance.performer = {
                        type: 'wf.ComponentParticipant',
                        value: this.uistate.performerInfo.components.find((/**
                         * @param {?} c
                         * @return {?}
                         */
                        function (c) {
                            return c.id === _this.uistate.curPerformer.id;
                        }))
                    };
                    break;
            }
            if (this.uistate.curPerformer.type !== 'wf.ReportingLineParticipant' &&
                this.uistate.curPerformer.type !== 'wf.MatrixParticipant') { // 汇报关系和矩阵单独处理
                this.editDialog = this.modalService.show(this.compRef, modalConfig_1);
            }
        }
    };
    /**
     * @return {?}
     */
    PerformerComponent.prototype.remove = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.grid.selectedRow) {
            this.grid.endCellEdit();
            if (this.grid.selectedRow.data.type === 'wf.ComponentParticipant') {
                /** @type {?} */
                var i = this.uistate.performerInfo.components.findIndex((/**
                 * @param {?} item
                 * @return {?}
                 */
                function (item) { return item.id === _this.grid.selectedRow.data.id; }));
                this.uistate.performerInfo.components.splice(i, 1);
            }
            else if (this.grid.selectedRow.data.type === 'wf.ReportingLineParticipant') {
                /** @type {?} */
                var i = this.uistate.performerInfo.reportingLines.findIndex((/**
                 * @param {?} item
                 * @return {?}
                 */
                function (item) { return item.id === _this.grid.selectedRow.data.id; }));
                this.uistate.performerInfo.reportingLines.splice(i, 1);
            }
            else if (this.grid.selectedRow.data.type === 'wf.MatrixParticipant') {
                /** @type {?} */
                var i = this.uistate.performerInfo.matrixParticipants.findIndex((/**
                 * @param {?} item
                 * @return {?}
                 */
                function (item) { return item.id === _this.grid.selectedRow.data.id; }));
                this.uistate.performerInfo.matrixParticipants.splice(i, 1);
            }
            else {
                /** @type {?} */
                var i = this.uistate.performerInfo.performers.findIndex((/**
                 * @param {?} item
                 * @return {?}
                 */
                function (item) { return item.id === _this.grid.selectedRow.data.id; }));
                this.uistate.performerInfo.performers.splice(i, 1);
            }
            /** @type {?} */
            var index = this.uistate.performersList.findIndex((/**
             * @param {?} p
             * @return {?}
             */
            function (p) { return p.id === _this.grid.selectedRow.data.id; }));
            this.uistate.performersList.splice(index, 1);
            this.grid.loadData(this.uistate.performersList);
        }
        else {
            this.message.info('请先选中一条参与者信息！');
        }
    };
    /**
     * @return {?}
     */
    PerformerComponent.prototype.clear = /**
     * @return {?}
     */
    function () {
        this.uistate.performerInfo.performers = [];
        this.uistate.performerInfo.components = [];
        this.uistate.performerInfo.reportingLines = [];
        this.uistate.performerInfo.matrixParticipants = [];
        this.uistate.performersList = [];
        this.grid.loadData(this.uistate.performersList);
    };
    /**
     * @return {?}
     */
    PerformerComponent.prototype.clickOK = /**
     * @return {?}
     */
    function () {
        this.grid.endCellEdit();
        /** @type {?} */
        var object = {
            value: this.uistate.performerInfo, parameters: null
        };
        this.submitModal.emit(object);
    };
    /**
     * @return {?}
     */
    PerformerComponent.prototype.clickCancel = /**
     * @return {?}
     */
    function () {
        this.closeModal.emit();
    };
    /**
     * @return {?}
     */
    PerformerComponent.prototype.editOK = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.compRef) {
            /** @type {?} */
            var re_1 = this.compRef.instance.getPerformers();
            if (re_1.userPerformers && re_1.userPerformers.length > 0) {
                re_1.userPerformers.forEach((/**
                 * @param {?} p
                 * @return {?}
                 */
                function (p) {
                    /** @type {?} */
                    var i = _this.uistate.performerInfo.performers.findIndex((/**
                     * @param {?} a
                     * @return {?}
                     */
                    function (a) { return (a.id === p.id || a.performerId === p.performerId); }));
                    if (i > -1) {
                        /** @type {?} */
                        var id_1 = _this.uistate.performerInfo.performers[i].id;
                        _this.uistate.performerInfo.performers[i] = p;
                        /** @type {?} */
                        var index = _this.uistate.performersList.findIndex((/**
                         * @param {?} a
                         * @return {?}
                         */
                        function (a) { return a.id === id_1; }));
                        _this.uistate.performersList[index] = p;
                    }
                    else {
                        if (_this.editState === 'edit') {
                            _this.remove();
                        }
                        _this.uistate.performerInfo.performers.push(p);
                        _this.uistate.performersList = _this.uistate.performersList.concat([p]);
                    }
                }));
                this.uistate.performersList
                    .filter((/**
                 * @param {?} p
                 * @return {?}
                 */
                function (p) { return p.type === _this.uistate.typeCollection[0].value || p.type === _this.uistate.typeCollection[1].value; }))
                    .map((/**
                 * @param {?} performer
                 * @return {?}
                 */
                function (performer) { return performer.description =
                    _this.performerDescription((/** @type {?} */ (performer))); }));
            }
            if (re_1.positionPerformers && re_1.positionPerformers.length > 0) {
                re_1.positionPerformers.forEach((/**
                 * @param {?} p
                 * @return {?}
                 */
                function (p) {
                    // (1)id一致，为编辑岗位；（2）performid一致，新增的用户，岗位已存在
                    /** @type {?} */
                    var i = _this.uistate.performerInfo.performers.findIndex((/**
                     * @param {?} a
                     * @return {?}
                     */
                    function (a) { return (a.id === p.id || a.performerId === p.performerId); }));
                    if (i > -1) {
                        /** @type {?} */
                        var id_2 = _this.uistate.performerInfo.performers[i].id;
                        _this.uistate.performerInfo.performers[i] = p;
                        /** @type {?} */
                        var index = _this.uistate.performersList.findIndex((/**
                         * @param {?} a
                         * @return {?}
                         */
                        function (a) { return a.id === id_2; }));
                        _this.uistate.performersList[index] = p;
                    }
                    else {
                        _this.uistate.performerInfo.performers.push(p);
                        _this.uistate.performersList = _this.uistate.performersList.concat([p]);
                    }
                }));
                this.uistate.performersList
                    .filter((/**
                 * @param {?} p
                 * @return {?}
                 */
                function (p) { return p.type === _this.uistate.typeCollection[0].value || p.type === _this.uistate.typeCollection[1].value; }))
                    .map((/**
                 * @param {?} performer
                 * @return {?}
                 */
                function (performer) { return performer.description =
                    _this.performerDescription((/** @type {?} */ (performer))); }));
            }
            if (re_1.component && re_1.component.metadataId && re_1.component.methodCode) {
                /** @type {?} */
                var i = this.uistate.performerInfo.components.findIndex((/**
                 * @param {?} a
                 * @return {?}
                 */
                function (a) { return a.id === re_1.component.id; }));
                if (i > -1) {
                    this.uistate.performerInfo.components[i] = re_1.component;
                    /** @type {?} */
                    var index = this.uistate.performersList.findIndex((/**
                     * @param {?} a
                     * @return {?}
                     */
                    function (a) { return a.id === re_1.component.id; }));
                    this.uistate.performersList[index] = {
                        id: re_1.component.id,
                        type: 'wf.ComponentParticipant',
                        performerName: re_1.component.name,
                        description: this.componentDescription(re_1.component),
                        condition: re_1.component.condition
                    };
                }
                else {
                    this.uistate.performerInfo.components.push(re_1.component);
                    this.uistate.performersList.push({
                        id: re_1.component.id,
                        type: 'wf.ComponentParticipant',
                        performerName: re_1.component.name,
                        description: this.componentDescription(re_1.component),
                        condition: ''
                    });
                }
            }
            if (re_1.reportingLine && re_1.reportingLine.reportingLineDefId && re_1.reportingLine.dimension) {
                if (re_1.reportingLine.reportingReferObject === 'dept' && !re_1.reportingLine.refOrgId) {
                    this.isClose = false;
                    this.message.info('“部门”汇报关系类型下，参照人所在部门不能为空');
                }
                else if (re_1.reportingLine.reportingReferObject !== 'dept' && !re_1.reportingLine.refUserId && !re_1.reportingLine.refEmployeeId) { // 用户及其他人员汇报对象类型，参照用户和参照员工不能全部为空
                    this.isClose = false;
                    this.message.info('“用户”汇报关系类型下，参照人不能为空');
                }
                else {
                    this.isClose = true;
                    this.addReportingLineData(re_1);
                }
            }
            if (re_1.matrix && re_1.matrix.matrixDefId) {
                if (!re_1.matrix.conditionField1 && !re_1.matrix.conditionField2 && !re_1.matrix.conditionField3) {
                    this.isClose = false;
                    this.message.info('条件字段至少要存在一个');
                }
                else if (!re_1.matrix.dataFieldAlias) {
                    this.isClose = false;
                    this.message.info('数据字段不能为空');
                }
                else {
                    this.isClose = true;
                    this.addMatrixData(re_1);
                }
            }
            this.grid.loadData(this.uistate.performersList);
        }
        if (this.editDialog && this.isClose) {
            this.editDialog.close();
        }
    };
    /**
     * @private
     * @param {?} re
     * @return {?}
     */
    PerformerComponent.prototype.addReportingLineData = /**
     * @private
     * @param {?} re
     * @return {?}
     */
    function (re) {
        var e_1, _a;
        /** @type {?} */
        var i = this.uistate.performerInfo.reportingLines.findIndex((/**
         * @param {?} a
         * @return {?}
         */
        function (a) { return a.id === re.reportingLine.id; }));
        if (i > -1) {
            this.uistate.performerInfo.reportingLines[i] = re.reportingLine;
            /** @type {?} */
            var index = this.uistate.performersList.findIndex((/**
             * @param {?} a
             * @return {?}
             */
            function (a) { return a.id === re.reportingLine.id; }));
            this.uistate.performersList[index] = {
                id: re.reportingLine.id,
                type: 'wf.ReportingLineParticipant',
                performerName: re.reportingLine.reportingLineDefName + '-' + re.reportingLine.dimension,
                description: this.reportingLineDescription(re.reportingLine),
                condition: re.reportingLine.condition
            };
        }
        else {
            try {
                for (var _b = tslib_1.__values(this.uistate.performerInfo.reportingLines), _c = _b.next(); !_c.done; _c = _b.next()) {
                    var reportingLineData = _c.value;
                    if (reportingLineData.reportingLineDefId === re.reportingLine.definitionId &&
                        reportingLineData.dimension === re.reportingLine.dimension &&
                        reportingLineData.refUserId === re.reportingLine.referUserId &&
                        reportingLineData.refEmployeeId === re.reportingLine.refEmployeeId &&
                        reportingLineData.refOrgId === re.reportingLine.referDeptId) {
                        this.message.error('该汇报关系已经进行过配置');
                        return;
                    }
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                }
                finally { if (e_1) throw e_1.error; }
            }
            this.uistate.performerInfo.reportingLines.push(re.reportingLine);
            this.uistate.performersList.push({
                id: re.reportingLine.id,
                type: 'wf.ReportingLineParticipant',
                performerName: re.reportingLine.reportingLineDefName + '-' + re.reportingLine.dimension,
                description: this.reportingLineDescription(re.reportingLine),
                condition: re.reportingLine.condition
            });
        }
    };
    /**
     * @private
     * @param {?} re
     * @return {?}
     */
    PerformerComponent.prototype.addMatrixData = /**
     * @private
     * @param {?} re
     * @return {?}
     */
    function (re) {
        var e_2, _a;
        /** @type {?} */
        var i = this.uistate.performerInfo.matrixParticipants.findIndex((/**
         * @param {?} a
         * @return {?}
         */
        function (a) { return a.id === re.matrix.id; }));
        if (i > -1) {
            this.uistate.performerInfo.matrixParticipants[i] = re.matrix;
            /** @type {?} */
            var index = this.uistate.performersList.findIndex((/**
             * @param {?} a
             * @return {?}
             */
            function (a) { return a.id === re.matrix.id; }));
            this.uistate.performersList[index] = {
                id: re.matrix.id,
                type: 'wf.MatrixParticipant',
                performerName: re.matrix.matrixDefName + '-' + re.matrix.dataFieldAlias,
                description: this.matrixDescription(re.matrix),
                condition: re.matrix.condition
            };
        }
        else {
            try {
                for (var _b = tslib_1.__values(this.uistate.performerInfo.matrixParticipants), _c = _b.next(); !_c.done; _c = _b.next()) {
                    var matrixData = _c.value;
                    if (matrixData.matrixDefId === re.matrix.matrixDefId &&
                        matrixData.conditionField1 === re.matrix.conditionField1 &&
                        matrixData.conditionField2 === re.matrix.conditionField2 &&
                        matrixData.conditionField3 === re.matrix.conditionField3 &&
                        matrixData.dataFieldAlias === re.matrix.dataFieldAlias) {
                        this.message.error('该矩阵已经进行过配置');
                        return;
                    }
                }
            }
            catch (e_2_1) { e_2 = { error: e_2_1 }; }
            finally {
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                }
                finally { if (e_2) throw e_2.error; }
            }
            this.uistate.performerInfo.matrixParticipants.push(re.matrix);
            this.uistate.performersList.push({
                id: re.matrix.id,
                type: 'wf.MatrixParticipant',
                performerName: re.matrix.matrixDefName + '-' + re.matrix.dataFieldAlias,
                description: this.matrixDescription(re.matrix),
                condition: re.matrix.condition
            });
        }
    };
    /**
     * @return {?}
     */
    PerformerComponent.prototype.editCancel = /**
     * @return {?}
     */
    function () {
        if (this.editDialog) {
            this.editDialog.close();
        }
    };
    /**
     * @return {?}
     */
    PerformerComponent.prototype.participantOptionsSet = /**
     * @return {?}
     */
    function () {
        this.uistate.performerInfo.options = this.options.getPerformerOptions();
        this.optionsDialog.close();
    };
    /**
     * @private
     * @param {?} performer
     * @return {?}
     */
    PerformerComponent.prototype.performerDescription = /**
     * @private
     * @param {?} performer
     * @return {?}
     */
    function (performer) {
        if (performer.type === 'wf.UserParticipant') {
            if (performer.tag === 'expression') {
                return performer.performerId;
            }
            else {
                if (performer.orgName) {
                    return "\u90E8\u95E8\uFF1A" + performer.orgName;
                }
                else {
                    return '';
                }
            }
        }
        else if (performer.type === 'wf.PositionParticipant') {
            if (((/** @type {?} */ (performer))).positionType === '1') {
                if (performer.orgId) {
                    return "\u5C97\u4F4D\u7C7B\u578B\uFF1A\u901A\u7528\u5C97\u4F4D\uFF0C\u90E8\u95E8\uFF1A" + performer.orgId;
                }
                else {
                    return "\u5C97\u4F4D\u7C7B\u578B\uFF1A\u901A\u7528\u5C97\u4F4D";
                }
            }
            else if (((/** @type {?} */ (performer))).positionType === '0') {
                return '岗位类型：组织岗位';
            }
        }
    };
    /**
     * @private
     * @param {?} component
     * @return {?}
     */
    PerformerComponent.prototype.componentDescription = /**
     * @private
     * @param {?} component
     * @return {?}
     */
    function (component) {
        /** @type {?} */
        var des = "\u6784\u4EF6\uFF1A" + component.name + ",\u53C2\u6570\uFF1A{";
        if (component.actualParameters && component.actualParameters.length > 0) {
            component.actualParameters.forEach((/**
             * @param {?} p
             * @return {?}
             */
            function (p) {
                des += p.code + "\uFF1A" + p.value + "\uFF0C";
            }));
            des = des.substring(0, des.length - 1);
        }
        des += '}';
        return des;
    };
    /**
     * @private
     * @param {?} reportingLine
     * @return {?}
     */
    PerformerComponent.prototype.reportingLineDescription = /**
     * @private
     * @param {?} reportingLine
     * @return {?}
     */
    function (reportingLine) {
        /** @type {?} */
        var description = '';
        if (reportingLine.refUserId) {
            description += "\u53C2\u7167\u4EBA\uFF1A" + reportingLine.refUserId;
        }
        if (reportingLine.refEmployeeId) {
            description += "\u53C2\u7167\u4EBA\uFF1A" + reportingLine.refEmployeeId;
        }
        if (reportingLine.refOrgId) {
            if (reportingLine.refUserId) {
                description += "\uFF0C";
            }
            if (reportingLine.refEmployeeId) {
                description += "\uFF0C";
            }
            description += "\u53C2\u7167\u7EC4\u7EC7\uFF1A" + reportingLine.refOrgId;
        }
        return description;
    };
    /**
     * @private
     * @param {?} matrix
     * @return {?}
     */
    PerformerComponent.prototype.matrixDescription = /**
     * @private
     * @param {?} matrix
     * @return {?}
     */
    function (matrix) {
        /** @type {?} */
        var description = '';
        if (matrix.conditionField1) {
            description += "\u6761\u4EF61\uFF1A" + matrix.conditionFieldText1 + "\uFF0C";
        }
        if (matrix.conditionField2) {
            description += "\u6761\u4EF62\uFF1A" + matrix.conditionFieldText2 + "\uFF0C";
        }
        if (matrix.conditionField3) {
            description += "\u6761\u4EF63\uFF1A" + matrix.conditionFieldText3 + "\uFF0C";
        }
        if (matrix.dataFieldAlias) {
            description += "\u6570\u636E\uFF1A" + matrix.dataFieldAlias + "\uFF0C";
        }
        return description.slice(0, description.length - 1);
    };
    /**
     * @param {?} e
     * @return {?}
     */
    PerformerComponent.prototype.editConditon = /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        var _this = this;
        var e_3, _a, e_4, _b, e_5, _c, e_6, _d, e_7, _e, e_8, _f, e_9, _g;
        if (this.designerUIState.schemas.length > 0) {
            try {
                for (var _h = tslib_1.__values(this.designerUIState.schemas), _j = _h.next(); !_j.done; _j = _h.next()) {
                    var schema = _j.value;
                    this.expr.addSchema('Schema', schema);
                }
            }
            catch (e_3_1) { e_3 = { error: e_3_1 }; }
            finally {
                try {
                    if (_j && !_j.done && (_a = _h.return)) _a.call(_h);
                }
                finally { if (e_3) throw e_3.error; }
            }
            if (this.designerUIState.schemas[0].entityTypes && this.designerUIState.schemas[0].entityTypes.length > 0) {
                /** @type {?} */
                var entityType = this.designerUIState.schemas[0].entityTypes[0];
                this.expr.addInjectedEntity(entityType.name, 'Schema', entityType.name, InjectedType.EntityType);
            }
        }
        /** @type {?} */
        var context = new Array();
        if (this.designerUIState.procInstContext.length > 0) {
            try {
                for (var _k = tslib_1.__values(this.designerUIState.procInstContext), _l = _k.next(); !_l.done; _l = _k.next()) {
                    var variable = _l.value;
                    context.push(variable);
                }
            }
            catch (e_4_1) { e_4 = { error: e_4_1 }; }
            finally {
                try {
                    if (_l && !_l.done && (_b = _k.return)) _b.call(_k);
                }
                finally { if (e_4) throw e_4.error; }
            }
        }
        if (this.designerUIState.formalParameterContext.length > 0) {
            var _loop_1 = function (variable) {
                if (!context.some((/**
                 * @param {?} c
                 * @return {?}
                 */
                function (c) { return c.key === variable.key; }))) {
                    context.push(variable);
                }
            };
            try {
                for (var _m = tslib_1.__values(this.designerUIState.formalParameterContext), _o = _m.next(); !_o.done; _o = _m.next()) {
                    var variable = _o.value;
                    _loop_1(variable);
                }
            }
            catch (e_5_1) { e_5 = { error: e_5_1 }; }
            finally {
                try {
                    if (_o && !_o.done && (_c = _m.return)) _c.call(_m);
                }
                finally { if (e_5) throw e_5.error; }
            }
        }
        if (this.designerUIState.participantContext.length > 0) {
            var _loop_2 = function (variable) {
                if (!context.some((/**
                 * @param {?} c
                 * @return {?}
                 */
                function (c) { return c.key === variable.key; }))) {
                    context.push(variable);
                }
            };
            try {
                for (var _p = tslib_1.__values(this.designerUIState.participantContext), _q = _p.next(); !_q.done; _q = _p.next()) {
                    var variable = _q.value;
                    _loop_2(variable);
                }
            }
            catch (e_6_1) { e_6 = { error: e_6_1 }; }
            finally {
                try {
                    if (_q && !_q.done && (_d = _p.return)) _d.call(_p);
                }
                finally { if (e_6) throw e_6.error; }
            }
        }
        if (this.designerUIState.processVariableContext.length > 0) {
            var _loop_3 = function (variable) {
                if (!context.some((/**
                 * @param {?} c
                 * @return {?}
                 */
                function (c) { return c.key === variable.key; }))) {
                    context.push(variable);
                }
            };
            try {
                for (var _r = tslib_1.__values(this.designerUIState.processVariableContext), _s = _r.next(); !_s.done; _s = _r.next()) {
                    var variable = _s.value;
                    _loop_3(variable);
                }
            }
            catch (e_7_1) { e_7 = { error: e_7_1 }; }
            finally {
                try {
                    if (_s && !_s.done && (_e = _r.return)) _e.call(_r);
                }
                finally { if (e_7) throw e_7.error; }
            }
        }
        if (this.designerUIState.activityComponentContext.length > 0) {
            var _loop_4 = function (variable) {
                if (!context.some((/**
                 * @param {?} c
                 * @return {?}
                 */
                function (c) { return c.key === variable.key; }))) {
                    context.push(variable);
                }
            };
            try {
                for (var _t = tslib_1.__values(this.designerUIState.activityComponentContext), _u = _t.next(); !_u.done; _u = _t.next()) {
                    var variable = _u.value;
                    _loop_4(variable);
                }
            }
            catch (e_8_1) { e_8 = { error: e_8_1 }; }
            finally {
                try {
                    if (_u && !_u.done && (_f = _t.return)) _f.call(_t);
                }
                finally { if (e_8) throw e_8.error; }
            }
        }
        if (context.length > 0) {
            try {
                for (var context_1 = tslib_1.__values(context), context_1_1 = context_1.next(); !context_1_1.done; context_1_1 = context_1.next()) {
                    var v = context_1_1.value;
                    this.expr.addContext(v);
                }
            }
            catch (e_9_1) { e_9 = { error: e_9_1 }; }
            finally {
                try {
                    if (context_1_1 && !context_1_1.done && (_g = context_1.return)) _g.call(context_1);
                }
                finally { if (e_9) throw e_9.error; }
            }
        }
        this.expr.addExpressionText(e.instance.value);
        this.expr.setEditPattern(ExprEditMode.Conditional); // 默认打开简易表达式编辑器
        this.expr.buildExpression().then((/**
         * @param {?} cond
         * @return {?}
         */
        function (cond) {
            if (_this.grid.selectedRow.data.type === 'wf.ComponentParticipant') {
                _this.uistate.performerInfo.components.find((/**
                 * @param {?} c
                 * @return {?}
                 */
                function (c) { return c.id === _this.grid.selectedRow.data.id; })).condition = cond;
            }
            else if (_this.grid.selectedRow.data.type === 'wf.ReportingLineParticipant') {
                _this.uistate.performerInfo.reportingLines.find((/**
                 * @param {?} c
                 * @return {?}
                 */
                function (c) { return c.id === _this.grid.selectedRow.data.id; })).condition = cond;
            }
            else if (_this.grid.selectedRow.data.type === 'wf.MatrixParticipant') {
                _this.uistate.performerInfo.matrixParticipants.find((/**
                 * @param {?} c
                 * @return {?}
                 */
                function (c) { return c.id === _this.grid.selectedRow.data.id; })).condition = cond;
            }
            else {
                _this.uistate.performerInfo.performers.find((/**
                 * @param {?} p
                 * @return {?}
                 */
                function (p) { return p.id === _this.grid.selectedRow.data.id; })).condition = cond;
            }
            e.formControl.setValue(cond);
            e.instance.cd.detectChanges();
        }));
    };
    /**
     * @param {?} data
     * @return {?}
     */
    PerformerComponent.prototype.selectChanged = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        this.uistate.curPerformer = data.data;
    };
    /**
     * @private
     * @return {?}
     */
    PerformerComponent.prototype.GetOrganizationType = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var url = '/api/runtime/sys/v1.0/authfields/globalauthfields';
        this.http.get(url)
            .subscribe((/**
         * @param {?} data
         * @return {?}
         */
        function (data) { return _this.designerUIState.orgTypeCollection = data.map((/**
         * @param {?} d
         * @return {?}
         */
        function (d) { return ({ value: d.id, text: d.name }); })); }));
    };
    /**
     * @private
     * @return {?}
     */
    PerformerComponent.prototype.getMatrixConfig = /**
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/generalConfig/Is_EnableMatrix";
        return this.http.get(url);
    };
    PerformerComponent.decorators = [
        { type: Component, args: [{
                    selector: 'app-performer',
                    template: "<div class=\"f-page\">\r\n  <div class=\"f-page-header\">\r\n    <nav class=\"f-page-header-base\">\r\n      <div class=\"f-title\">\r\n        <span class=\"f-title-icon f-text-orna-bill\">\r\n          <i class=\"f-icon f-icon-page-title-administer\"></i>\r\n        </span>\r\n        <h4 class=\"f-title-text\">\u53C2\u4E0E\u8005\u5217\u8868</h4>\r\n      </div>\r\n      <div class=\"btn-toolbar btn-group-lg\">\r\n      <button class=\"btn btn-primary mr-2\" (click)=\"add()\">\u65B0\u589E</button>\r\n      <button class=\"btn btn-secondary mr-2\" [disabled]=\"(!uistate.curPerformer)\"\r\n      (click)=\"edit()\">\u7F16\u8F91</button>\r\n      <button class=\"btn btn-secondary mr-2\" (click)=\"remove()\">\u79FB\u9664</button>\r\n      <button class=\"btn btn-secondary mr-2\" (click)=\"clear()\">\u6E05\u7A7A</button>\r\n      <button class=\"btn btn-secondary\" (click)=\"participantOptions.show()\">\u53C2\u4E0E\u8005\u9009\u9879</button>\r\n      </div>\r\n    </nav>\r\n  </div>\r\n  <div class=\"f-page-main f-utils-fill-flex-column h-100\">\r\n    <div class=\"f-utils-fill-flex-column farris-overflow-y-auto h-100\">\r\n      <farris-datagrid #grid [data]=\"uistate.performersList\" [columns]=\"columns\" [idField]=\"'id'\" [fit]=\"true\"\r\n        [fitColumns]=\"true\" [editable]=\"true\" [editMode]=\"'cell'\" [pagination]=\"false\" [showCheckbox]=\"false\"\r\n        [multiSelect]=\"false\" [afterEdit]=\"afterEdit\" (selectChanged)=\"selectChanged($event)\">\r\n      </farris-datagrid>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<ng-template #iconSelectFooter>\r\n  <button type=\"button\" class=\"btn btn-primary btn-sm px-3 mx-2\" (click)=\"clickOK()\">\u786E\u5B9A</button>\r\n  <button type=\"button\" class=\"btn btn-secondary btn-sm px-3 mx-2\" (click)=\"clickCancel()\">\u53D6\u6D88</button>\r\n</ng-template>\r\n\r\n<ng-template #editFooter>\r\n  <button type=\"button\" class=\"btn btn-primary btn-sm px-3 mx-2\" (click)=\"editOK()\">\u786E\u5B9A</button>\r\n  <button type=\"button\" class=\"btn btn-secondary btn-sm px-3 mx-2\" (click)=\"editCancel()\">\u53D6\u6D88</button>\r\n</ng-template>\r\n\r\n<farris-dialog #participantOptions [buttons]=\"buttonRef\" [width]=\"500\" [height]=\"530\" [title]=\"'\u53C2\u4E0E\u8005\u9009\u9879'\">\r\n  <app-performer-options [options]=\"uistate.performerInfo.options\"></app-performer-options>\r\n</farris-dialog>\r\n<ng-template #buttonRef>\r\n  <button class=\"btn btn-sm btn-primary px-3\" (click)=\"participantOptionsSet()\">\u786E\u5B9A</button>\r\n  <button class=\"btn btn-sm btn-default px-3\" (click)=\"participantOptions.close()\">\u53D6\u6D88</button>\r\n</ng-template>\r\n",
                    providers: [PerformerViewModel, PerformerRepository, PerformerUIState],
                    styles: [""]
                }] }
    ];
    /** @nocollapse */
    PerformerComponent.ctorParameters = function () { return [
        { type: PerformerViewModel },
        { type: PerformerUIState },
        { type: FormBuilder },
        { type: ComponentFactoryResolver },
        { type: Injector },
        { type: BsModalService },
        { type: MessagerService },
        { type: ProcessDesignerUIState },
        { type: ExpressionService },
        { type: HttpService }
    ]; };
    PerformerComponent.propDecorators = {
        cls: [{ type: HostBinding, args: ['class',] }],
        modalFooter: [{ type: ViewChild, args: ['iconSelectFooter',] }],
        editFooter: [{ type: ViewChild, args: ['editFooter',] }],
        options: [{ type: ViewChild, args: [PerformerOptionsComponent,] }],
        optionsDialog: [{ type: ViewChild, args: ['participantOptions',] }],
        grid: [{ type: ViewChild, args: [DatagridComponent,] }],
        closeModal: [{ type: Output }],
        submitModal: [{ type: Output }],
        value: [{ type: Input }],
        editorParams: [{ type: Input }]
    };
    return PerformerComponent;
}());
export { PerformerComponent };
if (false) {
    /** @type {?} */
    PerformerComponent.prototype.cls;
    /** @type {?} */
    PerformerComponent.prototype.display;
    /** @type {?} */
    PerformerComponent.prototype.modalFooter;
    /** @type {?} */
    PerformerComponent.prototype.editFooter;
    /** @type {?} */
    PerformerComponent.prototype.options;
    /** @type {?} */
    PerformerComponent.prototype.optionsDialog;
    /** @type {?} */
    PerformerComponent.prototype.grid;
    /** @type {?} */
    PerformerComponent.prototype.closeModal;
    /** @type {?} */
    PerformerComponent.prototype.submitModal;
    /** @type {?} */
    PerformerComponent.prototype.editorParams;
    /** @type {?} */
    PerformerComponent.prototype.editDialog;
    /** @type {?} */
    PerformerComponent.prototype.compRef;
    /** @type {?} */
    PerformerComponent.prototype.isClose;
    /** @type {?} */
    PerformerComponent.prototype.modalConfig;
    /** @type {?} */
    PerformerComponent.prototype.columns;
    /** @type {?} */
    PerformerComponent.prototype.curPerformer;
    /** @type {?} */
    PerformerComponent.prototype.editState;
    /** @type {?} */
    PerformerComponent.prototype.afterEdit;
    /** @type {?} */
    PerformerComponent.prototype.viewModel;
    /** @type {?} */
    PerformerComponent.prototype.uistate;
    /**
     * @type {?}
     * @private
     */
    PerformerComponent.prototype.formBuilder;
    /**
     * @type {?}
     * @private
     */
    PerformerComponent.prototype.resolver;
    /**
     * @type {?}
     * @private
     */
    PerformerComponent.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    PerformerComponent.prototype.modalService;
    /**
     * @type {?}
     * @private
     */
    PerformerComponent.prototype.message;
    /**
     * @type {?}
     * @private
     */
    PerformerComponent.prototype.designerUIState;
    /**
     * @type {?}
     * @private
     */
    PerformerComponent.prototype.expr;
    /**
     * @type {?}
     * @private
     */
    PerformerComponent.prototype.http;
}
var PerformerConverter = /** @class */ (function () {
    function PerformerConverter() {
    }
    /**
     * @param {?} data
     * @return {?}
     */
    PerformerConverter.prototype.convertTo = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        if ((data.performers && data.performers.length > 0)
            || (data.components && data.components.length > 0)
            || (data.reportingLines && data.reportingLines.length > 0)
            || (data.matrixParticipants && data.matrixParticipants.length > 0)) {
            return '（已设置）';
        }
        else {
            return '（未设置）';
        }
    };
    return PerformerConverter;
}());
export { PerformerConverter };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGVyZm9ybWVyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Bnc3Atd2Yvd2YtcHJvY2Vzcy1lZGl0b3IvIiwic291cmNlcyI6WyJsaWIvdmlld3MvcGVyZm9ybWVyL3BlcmZvcm1lci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFVLFdBQVcsRUFBRSxNQUFNLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsV0FBVyxFQUFFLHdCQUF3QixFQUFFLFFBQVEsRUFBZ0IsTUFBTSxlQUFlLENBQUM7QUFFdEssT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDdkQsT0FBTyxFQUFFLG1CQUFtQixFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFDN0QsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFDM0QsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQzdDLE9BQU8sRUFBRSxjQUFjLEVBQWMsTUFBTSxrQkFBa0IsQ0FBQztBQUM5RCxPQUFPLEVBQUUsc0JBQXNCLEVBQUUsTUFBTSxpREFBaUQsQ0FBQztBQUN6RixPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDdEQsT0FBTyxFQUFFLHlCQUF5QixFQUFFLE1BQU0sdURBQXVELENBQUM7QUFDbEcsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBRXBELE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxNQUFNLG9DQUFvQyxDQUFDO0FBQzVFLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxZQUFZLEVBQUUsWUFBWSxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFFcEYsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLGtDQUFrQyxDQUFDO0FBQ2pFLE9BQU8sRUFBYyxpQkFBaUIsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ3BFLE9BQU8sRUFBYyxFQUFFLEVBQUMsTUFBTSxNQUFNLENBQUM7QUFFckMsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBSWxEO0lBMEhFLDRCQUNTLFNBQTZCLEVBQzdCLE9BQXlCLEVBQ3hCLFdBQXdCLEVBQ3hCLFFBQWtDLEVBQ2xDLFFBQWtCLEVBQ2xCLFlBQTRCLEVBQzVCLE9BQXdCLEVBQ3hCLGVBQXVDLEVBQ3ZDLElBQXVCLEVBQ3ZCLElBQWlCO1FBVjNCLGlCQWFDO1FBWlEsY0FBUyxHQUFULFNBQVMsQ0FBb0I7UUFDN0IsWUFBTyxHQUFQLE9BQU8sQ0FBa0I7UUFDeEIsZ0JBQVcsR0FBWCxXQUFXLENBQWE7UUFDeEIsYUFBUSxHQUFSLFFBQVEsQ0FBMEI7UUFDbEMsYUFBUSxHQUFSLFFBQVEsQ0FBVTtRQUNsQixpQkFBWSxHQUFaLFlBQVksQ0FBZ0I7UUFDNUIsWUFBTyxHQUFQLE9BQU8sQ0FBaUI7UUFDeEIsb0JBQWUsR0FBZixlQUFlLENBQXdCO1FBQ3ZDLFNBQUksR0FBSixJQUFJLENBQW1CO1FBQ3ZCLFNBQUksR0FBSixJQUFJLENBQWE7UUE1SDNCLFFBQUcsR0FBRyw4QkFBOEIsQ0FBQztRQUVyQyxZQUFPLEdBQUcsSUFBSSxDQUFDLENBQUMsY0FBYztRQVFwQixlQUFVLEdBQUcsSUFBSSxZQUFZLEVBQU8sQ0FBQztRQUNyQyxnQkFBVyxHQUFHLElBQUksWUFBWSxFQUFPLENBQUM7UUFrRHZDLGlCQUFZLEdBQUcsRUFBRSxDQUFDO1FBSTNCLFlBQU8sR0FBRyxJQUFJLENBQUM7UUFFZixnQkFBVyxHQUFHO1lBQ1osS0FBSyxFQUFFLEtBQUs7WUFDWixLQUFLLEVBQUUsR0FBRztZQUNWLE1BQU0sRUFBRSxHQUFHO1lBQ1gsV0FBVyxFQUFFLElBQUk7U0FDbEIsQ0FBQztRQUNGLFlBQU8sR0FBRztZQUNSO2dCQUNFLEtBQUssRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsSUFBSTtnQkFDckMsU0FBUyxFQUFFO29CQUNULElBQUksRUFBRSxNQUFNO29CQUNaLE9BQU8sRUFBRSxFQUFFLFVBQVUsRUFBRSxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxjQUFjLEVBQUU7aUJBQ3ZGO2FBQ0Q7WUFDRixFQUFFLEtBQUssRUFBRSxlQUFlLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFO1lBQ2xELEVBQUUsS0FBSyxFQUFFLGFBQWEsRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRTtZQUNqRTtnQkFDRSxLQUFLLEVBQUUsV0FBVyxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsSUFBSTtnQkFDNUQsTUFBTSxFQUFFO29CQUNOLElBQUksRUFBRSxhQUFhO29CQUNuQixPQUFPLEVBQUU7d0JBQ1AsU0FBUyxFQUFFLHNDQUFzQzt3QkFDakQsUUFBUSxFQUFFLEtBQUs7d0JBQ2YsV0FBVzs7Ozt3QkFBRSxVQUFDLENBQUM7NEJBQ2IsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQzs0QkFDakUsS0FBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQzt3QkFDdkIsQ0FBQyxDQUFBO3dCQUNELEtBQUs7Ozs7d0JBQUUsVUFBQyxDQUFDOzRCQUNQLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLEtBQUsseUJBQXlCLEVBQUU7O29DQUMxQyxDQUFDLEdBQUcsS0FBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsVUFBVSxDQUFDLFNBQVM7Ozs7Z0NBQUMsVUFBQSxJQUFJLElBQUksT0FBQSxJQUFJLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxPQUFPLENBQUMsRUFBRSxFQUF4QixDQUF3QixFQUFDO2dDQUMzRixLQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxHQUFHLEVBQUUsQ0FBQzs2QkFDekQ7aUNBQU0sSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksS0FBSyw2QkFBNkIsRUFBRTs7b0NBQ3JELENBQUMsR0FBRyxLQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxjQUFjLENBQUMsU0FBUzs7OztnQ0FBQyxVQUFBLElBQUksSUFBSSxPQUFBLElBQUksQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQXhCLENBQXdCLEVBQUM7Z0NBQy9GLEtBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLEdBQUcsRUFBRSxDQUFDOzZCQUM3RDtpQ0FBTSxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxLQUFLLHNCQUFzQixFQUFFOztvQ0FDOUMsQ0FBQyxHQUFHLEtBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLGtCQUFrQixDQUFDLFNBQVM7Ozs7Z0NBQUMsVUFBQSxJQUFJLElBQUksT0FBQSxJQUFJLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxPQUFPLENBQUMsRUFBRSxFQUF4QixDQUF3QixFQUFDO2dDQUNuRyxLQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLEdBQUcsRUFBRSxDQUFDOzZCQUNqRTt3QkFDSCxDQUFDLENBQUE7cUJBQ0Y7aUJBQ0Y7YUFDRjtTQUNGLENBQUM7UUFHRixjQUFTLEdBQUcsS0FBSyxDQUFDLENBQUMsK0JBQStCO1FBcWRsRCxjQUFTOzs7Ozs7UUFBRyxVQUFDLFFBQWdCLEVBQUUsT0FBWSxFQUFFLE1BQW1CO1lBQzlELE9BQU8sRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2xCLENBQUMsRUFBQTtRQXpjQyxJQUFJLENBQUMsbUJBQW1CLEVBQUUsQ0FBQztJQUM3QixDQUFDO0lBbEhELHNCQUNJLHFDQUFLOzs7OztRQURULFVBQ1UsUUFBdUI7WUFEakMsaUJBOENDO1lBNUNDLElBQUksUUFBUSxDQUFDLFVBQVUsSUFBSSxRQUFRLENBQUMsVUFBVSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7Z0JBQ3pELElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLFVBQVUsR0FBRyxRQUFRLENBQUMsVUFBVSxDQUFDO2dCQUM1RCxJQUFJLENBQUMsT0FBTyxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsbUJBQUEsUUFBUSxDQUFDLFVBQVUsRUFBUyxDQUFDLENBQUM7Z0JBQy9GLElBQUksQ0FBQyxPQUFPLENBQUMsY0FBYyxDQUFDLEdBQUc7Ozs7Z0JBQUMsVUFBQSxTQUFTLElBQUksT0FBQSxTQUFTLENBQUMsV0FBVyxHQUFHLEtBQUksQ0FBQyxvQkFBb0IsQ0FBQyxtQkFBQSxTQUFTLEVBQU8sQ0FBQyxFQUFuRSxDQUFtRSxFQUFDLENBQUM7YUFDbkg7WUFDRCxJQUFJLFFBQVEsQ0FBQyxVQUFVLElBQUksUUFBUSxDQUFDLFVBQVUsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO2dCQUN6RCxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxVQUFVLEdBQUcsUUFBUSxDQUFDLFVBQVUsQ0FBQztnQkFDNUQsUUFBUSxDQUFDLFVBQVUsQ0FBQyxPQUFPOzs7O2dCQUFDLFVBQUEsR0FBRztvQkFDN0IsS0FBSSxDQUFDLE9BQU8sQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDO3dCQUMvQixFQUFFLEVBQUUsR0FBRyxDQUFDLEVBQUU7d0JBQ1YsSUFBSSxFQUFFLHlCQUF5Qjt3QkFDL0IsYUFBYSxFQUFFLEdBQUcsQ0FBQyxJQUFJO3dCQUN2QixXQUFXLEVBQUUsS0FBSSxDQUFDLG9CQUFvQixDQUFDLEdBQUcsQ0FBQzt3QkFDM0MsU0FBUyxFQUFFLEdBQUcsQ0FBQyxTQUFTO3FCQUN6QixDQUFDLENBQUM7Z0JBQ0wsQ0FBQyxFQUFDLENBQUM7YUFDSjtZQUNELElBQUksUUFBUSxDQUFDLGNBQWMsSUFBSSxRQUFRLENBQUMsY0FBYyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7Z0JBQ2pFLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLGNBQWMsR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDO2dCQUNwRSxRQUFRLENBQUMsY0FBYyxDQUFDLE9BQU87Ozs7Z0JBQUMsVUFBQSxDQUFDO29CQUMvQixLQUFJLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUM7d0JBQy9CLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRTt3QkFDUixJQUFJLEVBQUUsNkJBQTZCO3dCQUNuQyxhQUFhLEVBQUUsQ0FBQyxDQUFDLG9CQUFvQixHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUMsU0FBUzt3QkFDekQsV0FBVyxFQUFFLEtBQUksQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDLENBQUM7d0JBQzdDLFNBQVMsRUFBRSxDQUFDLENBQUMsU0FBUztxQkFDdkIsQ0FBQyxDQUFDO2dCQUNMLENBQUMsRUFBQyxDQUFDO2FBQ0o7WUFDRCxJQUFJLFFBQVEsQ0FBQyxrQkFBa0IsSUFBSSxRQUFRLENBQUMsa0JBQWtCLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtnQkFDekUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsa0JBQWtCLEdBQUcsUUFBUSxDQUFDLGtCQUFrQixDQUFDO2dCQUM1RSxRQUFRLENBQUMsa0JBQWtCLENBQUMsT0FBTzs7OztnQkFBQyxVQUFBLENBQUM7b0JBQ25DLEtBQUksQ0FBQyxPQUFPLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQzt3QkFDL0IsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFO3dCQUNSLElBQUksRUFBRSxzQkFBc0I7d0JBQzVCLGFBQWEsRUFBRSxDQUFDLENBQUMsYUFBYSxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUMsY0FBYzt3QkFDdkQsV0FBVyxFQUFFLEtBQUksQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLENBQUM7d0JBQ3RDLFNBQVMsRUFBRSxDQUFDLENBQUMsU0FBUztxQkFDdkIsQ0FBQyxDQUFDO2dCQUNMLENBQUMsRUFBQyxDQUFDO2FBQ0o7WUFDRCxJQUFJLFFBQVEsQ0FBQyxPQUFPLEVBQUU7Z0JBQ3BCLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLE9BQU8sR0FBRyxRQUFRLENBQUMsT0FBTyxDQUFDO2FBQ3ZEO1FBQ0gsQ0FBQzs7O09BQUE7Ozs7SUFzRUQscUNBQVE7OztJQUFSO1FBQUEsaUJBTUM7UUFMQyxJQUFJLENBQUMsZUFBZSxFQUFFLENBQUMsU0FBUzs7OztRQUFDLFVBQUEsRUFBRTtZQUNqQyxJQUFJLEVBQUUsSUFBSSxFQUFFLENBQUMsWUFBWSxLQUFLLE9BQU8sRUFBRTtnQkFDckMsS0FBSSxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUM7YUFDdEI7UUFDSCxDQUFDLEVBQUMsQ0FBQztJQUNMLENBQUM7Ozs7SUFDRCxnQ0FBRzs7O0lBQUg7UUFDRSxJQUFJLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQzs7WUFDakIsV0FBVyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsdUJBQXVCLENBQUMsc0JBQXNCLENBQUM7UUFDakYsSUFBSSxDQUFDLE9BQU8sR0FBRyxXQUFXLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUNqRCxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQzs7WUFFdkMsV0FBVyxHQUFHO1lBQ2xCLEtBQUssRUFBRSxPQUFPO1lBQ2QsS0FBSyxFQUFFLEdBQUc7WUFDVixNQUFNLEVBQUUsR0FBRztZQUNYLE9BQU8sRUFBRSxJQUFJLENBQUMsVUFBVTtZQUN4QixXQUFXLEVBQUUsSUFBSTtTQUNsQjtRQUNELElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxXQUFXLENBQUMsQ0FBQztJQUN0RSxDQUFDOzs7O0lBQ0QsaUNBQUk7OztJQUFKO1FBQUEsaUJBMkVDO1FBMUVDLElBQUksQ0FBQyxTQUFTLEdBQUcsTUFBTSxDQUFBO1FBQ3ZCLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxZQUFZLEVBQUU7O2dCQUN2QixhQUFXLEdBQUc7Z0JBQ2xCLEtBQUssRUFBRSxPQUFPO2dCQUNkLEtBQUssRUFBRSxHQUFHO2dCQUNWLE1BQU0sRUFBRSxHQUFHO2dCQUNYLE9BQU8sRUFBRSxJQUFJLENBQUMsVUFBVTtnQkFDeEIsV0FBVyxFQUFFLElBQUk7YUFDbEI7O2dCQUNLLFdBQVcsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLHVCQUF1QixDQUFDLHNCQUFzQixDQUFDO1lBQ2pGLElBQUksQ0FBQyxPQUFPLEdBQUcsV0FBVyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDakQsUUFBUSxJQUFJLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxJQUFJLEVBQUU7Z0JBQ3RDLEtBQUssd0JBQXdCO29CQUMzQixJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxTQUFTLEdBQUc7d0JBQ2hDLElBQUksRUFBRSx3QkFBd0I7d0JBQzlCLEtBQUssRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxVQUFVLENBQUMsSUFBSTs7Ozt3QkFBQyxVQUFBLENBQUMsSUFBSSxPQUFBLENBQUMsQ0FBQyxFQUFFLEtBQUssS0FBSSxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsRUFBRSxFQUFyQyxDQUFxQyxFQUFDO3FCQUM5RixDQUFDO29CQUNGLE1BQU07Z0JBQ1IsS0FBSyxvQkFBb0I7b0JBQ3ZCLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLFNBQVMsR0FBRzt3QkFDaEMsSUFBSSxFQUFFLG9CQUFvQjt3QkFDMUIsS0FBSyxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLFVBQVUsQ0FBQyxJQUFJOzs7O3dCQUFDLFVBQUEsQ0FBQyxJQUFJLE9BQUEsQ0FBQyxDQUFDLEVBQUUsS0FBSyxLQUFJLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxFQUFFLEVBQXJDLENBQXFDLEVBQUM7cUJBQzlGLENBQUE7b0JBQ0QsTUFBTTtnQkFDUixLQUFLLDZCQUE2Qjs7d0JBQzFCLGFBQWEsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxjQUFjLENBQUMsSUFBSTs7OztvQkFBQyxVQUFBLENBQUM7d0JBQ3BFLE9BQU8sQ0FBQyxDQUFDLEVBQUUsS0FBSyxLQUFJLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxFQUFFLENBQUM7b0JBQy9DLENBQUMsRUFBQztvQkFDRixJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxTQUFTLEdBQUc7d0JBQ2hDLElBQUksRUFBRSw2QkFBNkI7d0JBQ25DLEtBQUssRUFBRSxhQUFhO3FCQUNyQixDQUFDOzt3QkFDSSxHQUFHLEdBQUcsZ0RBQWdELEdBQUcsYUFBYSxDQUFDLGtCQUFrQjtvQkFDL0YsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsU0FBUzs7OztvQkFBQyxVQUFDLEdBQVE7d0JBQ3BDLElBQUksQ0FBQyxHQUFHLEVBQUU7NEJBQ1IsS0FBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsd0JBQXdCLENBQUMsQ0FBQTs0QkFDNUMsS0FBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO3lCQUNmOzZCQUFNOzRCQUNMLEtBQUksQ0FBQyxVQUFVLEdBQUcsS0FBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsS0FBSSxDQUFDLE9BQU8sRUFBRSxhQUFXLENBQUMsQ0FBQzt5QkFDckU7b0JBQ0gsQ0FBQyxFQUFDLENBQUM7b0JBQ0gsTUFBTTtnQkFDUixLQUFLLHNCQUFzQjs7d0JBQ25CLE1BQU0sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJOzs7O29CQUFDLFVBQUEsQ0FBQzt3QkFDakUsT0FBTyxDQUFDLENBQUMsRUFBRSxLQUFLLEtBQUksQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLEVBQUUsQ0FBQztvQkFDL0MsQ0FBQyxFQUFDO29CQUNGLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLFNBQVMsR0FBRzt3QkFDaEMsSUFBSSxFQUFFLHNCQUFzQjt3QkFDNUIsS0FBSyxFQUFFLE1BQU07cUJBQ2QsQ0FBQzs7d0JBQ0ksU0FBUyxHQUFHLHdDQUF3QyxHQUFHLE1BQU0sQ0FBQyxXQUFXO29CQUMvRSxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQyxTQUFTOzs7O29CQUFDLFVBQUMsR0FBUTt3QkFDMUMsSUFBSSxDQUFDLEdBQUcsRUFBRTs0QkFDUixLQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxzQkFBc0IsQ0FBQyxDQUFBOzRCQUMxQyxLQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7eUJBQ2Y7NkJBQU07NEJBQ0wsS0FBSSxDQUFDLFVBQVUsR0FBRyxLQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxLQUFJLENBQUMsT0FBTyxFQUFFLGFBQVcsQ0FBQyxDQUFDO3lCQUNyRTtvQkFDSCxDQUFDLEVBQUMsQ0FBQztvQkFDSCxNQUFNO2dCQUNSLEtBQUsseUJBQXlCO29CQUM1QixJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxTQUFTLEdBQUc7d0JBQ2hDLElBQUksRUFBRSx5QkFBeUI7d0JBQy9CLEtBQUssRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxVQUFVLENBQUMsSUFBSTs7Ozt3QkFBQyxVQUFBLENBQUM7NEJBQ2pELE9BQU8sQ0FBQyxDQUFDLEVBQUUsS0FBSyxLQUFJLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxFQUFFLENBQUM7d0JBQy9DLENBQUMsRUFBQztxQkFDSCxDQUFDO29CQUNGLE1BQU07YUFDVDtZQUNELElBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsSUFBSSxLQUFLLDZCQUE2QjtnQkFDakUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsSUFBSSxLQUFLLHNCQUFzQixFQUFDLEVBQUUsY0FBYztnQkFDMUUsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLGFBQVcsQ0FBQyxDQUFDO2FBQ3JFO1NBQ0Y7SUFDSCxDQUFDOzs7O0lBQ0QsbUNBQU07OztJQUFOO1FBQUEsaUJBdUJDO1FBdEJDLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUU7WUFDekIsSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztZQUN4QixJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxJQUFJLEtBQUsseUJBQXlCLEVBQUU7O29CQUMzRCxDQUFDLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsVUFBVSxDQUFDLFNBQVM7Ozs7Z0JBQUMsVUFBQSxJQUFJLElBQUksT0FBQSxJQUFJLENBQUMsRUFBRSxLQUFLLEtBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQXpDLENBQXlDLEVBQUM7Z0JBQzVHLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO2FBQ3BEO2lCQUFNLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLElBQUksS0FBSyw2QkFBNkIsRUFBRTs7b0JBQ3RFLENBQUMsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxjQUFjLENBQUMsU0FBUzs7OztnQkFBQyxVQUFBLElBQUksSUFBSSxPQUFBLElBQUksQ0FBQyxFQUFFLEtBQUssS0FBSSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLEVBQUUsRUFBekMsQ0FBeUMsRUFBQztnQkFDaEgsSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7YUFDeEQ7aUJBQU0sSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsSUFBSSxLQUFLLHNCQUFzQixFQUFFOztvQkFDL0QsQ0FBQyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLGtCQUFrQixDQUFDLFNBQVM7Ozs7Z0JBQUMsVUFBQSxJQUFJLElBQUksT0FBQSxJQUFJLENBQUMsRUFBRSxLQUFLLEtBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQXpDLENBQXlDLEVBQUM7Z0JBQ3BILElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLGtCQUFrQixDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7YUFDNUQ7aUJBQU07O29CQUNDLENBQUMsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxVQUFVLENBQUMsU0FBUzs7OztnQkFBQyxVQUFBLElBQUksSUFBSSxPQUFBLElBQUksQ0FBQyxFQUFFLEtBQUssS0FBSSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLEVBQUUsRUFBekMsQ0FBeUMsRUFBQztnQkFDNUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7YUFDcEQ7O2dCQUNLLEtBQUssR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyxTQUFTOzs7O1lBQUMsVUFBQSxDQUFDLElBQUksT0FBQSxDQUFDLENBQUMsRUFBRSxLQUFLLEtBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQXRDLENBQXNDLEVBQUM7WUFDaEcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQztZQUU3QyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyxDQUFDO1NBQ2pEO2FBQU07WUFDTCxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQztTQUNuQztJQUNILENBQUM7Ozs7SUFDRCxrQ0FBSzs7O0lBQUw7UUFDRSxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxVQUFVLEdBQUcsRUFBRSxDQUFDO1FBQzNDLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLFVBQVUsR0FBRyxFQUFFLENBQUM7UUFDM0MsSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsY0FBYyxHQUFHLEVBQUUsQ0FBQztRQUMvQyxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxrQkFBa0IsR0FBRyxFQUFFLENBQUM7UUFDbkQsSUFBSSxDQUFDLE9BQU8sQ0FBQyxjQUFjLEdBQUcsRUFBRSxDQUFDO1FBQ2pDLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsY0FBYyxDQUFDLENBQUM7SUFDbEQsQ0FBQzs7OztJQUNELG9DQUFPOzs7SUFBUDtRQUNFLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7O1lBQ2xCLE1BQU0sR0FBRztZQUNiLEtBQUssRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsRUFBRSxVQUFVLEVBQUUsSUFBSTtTQUNwRDtRQUNELElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ2hDLENBQUM7Ozs7SUFDRCx3Q0FBVzs7O0lBQVg7UUFDRSxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksRUFBRSxDQUFDO0lBQ3pCLENBQUM7Ozs7SUFDRCxtQ0FBTTs7O0lBQU47UUFBQSxpQkFnR0M7UUEvRkMsSUFBSSxJQUFJLENBQUMsT0FBTyxFQUFFOztnQkFDVixJQUFFLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsYUFBYSxFQUFFO1lBQ2hELElBQUksSUFBRSxDQUFDLGNBQWMsSUFBSSxJQUFFLENBQUMsY0FBYyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7Z0JBQ3JELElBQUUsQ0FBQyxjQUFjLENBQUMsT0FBTzs7OztnQkFBQyxVQUFBLENBQUM7O3dCQUNuQixDQUFDLEdBQUcsS0FBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsVUFBVSxDQUFDLFNBQVM7Ozs7b0JBQUMsVUFBQSxDQUFDLElBQUksT0FBQSxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsV0FBVyxLQUFLLENBQUMsQ0FBQyxXQUFXLENBQUMsRUFBbEQsQ0FBa0QsRUFBQztvQkFDbEgsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUU7OzRCQUNKLElBQUUsR0FBRyxLQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRTt3QkFDdEQsS0FBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQzs7NEJBQ3ZDLEtBQUssR0FBRyxLQUFJLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyxTQUFTOzs7O3dCQUFDLFVBQUEsQ0FBQyxJQUFJLE9BQUEsQ0FBQyxDQUFDLEVBQUUsS0FBSyxJQUFFLEVBQVgsQ0FBVyxFQUFDO3dCQUNyRSxLQUFJLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7cUJBQ3hDO3lCQUFNO3dCQUNMLElBQUksS0FBSSxDQUFDLFNBQVMsS0FBSyxNQUFNLEVBQUU7NEJBQzdCLEtBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQzt5QkFDZjt3QkFDRCxLQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO3dCQUM5QyxLQUFJLENBQUMsT0FBTyxDQUFDLGNBQWMsR0FBRyxLQUFJLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO3FCQUN2RTtnQkFDSCxDQUFDLEVBQUMsQ0FBQztnQkFDSCxJQUFJLENBQUMsT0FBTyxDQUFDLGNBQWM7cUJBQ3hCLE1BQU07Ozs7Z0JBQUMsVUFBQSxDQUFDLElBQUksT0FBQSxDQUFDLENBQUMsSUFBSSxLQUFLLEtBQUksQ0FBQyxPQUFPLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssSUFBSSxDQUFDLENBQUMsSUFBSSxLQUFLLEtBQUksQ0FBQyxPQUFPLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBbEcsQ0FBa0csRUFBRTtxQkFDaEgsR0FBRzs7OztnQkFBQyxVQUFBLFNBQVMsSUFBSSxPQUFBLFNBQVMsQ0FBQyxXQUFXO29CQUNyQyxLQUFJLENBQUMsb0JBQW9CLENBQUMsbUJBQUEsU0FBUyxFQUFPLENBQUMsRUFEM0IsQ0FDMkIsRUFBQyxDQUFDO2FBQ2xEO1lBQ0QsSUFBSSxJQUFFLENBQUMsa0JBQWtCLElBQUksSUFBRSxDQUFDLGtCQUFrQixDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7Z0JBQzdELElBQUUsQ0FBQyxrQkFBa0IsQ0FBQyxPQUFPOzs7O2dCQUFDLFVBQUEsQ0FBQzs7O3dCQUd2QixDQUFDLEdBQUcsS0FBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsVUFBVSxDQUFDLFNBQVM7Ozs7b0JBQUMsVUFBQSxDQUFDLElBQUksT0FBQSxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsV0FBVyxLQUFLLENBQUMsQ0FBQyxXQUFXLENBQUMsRUFBbEQsQ0FBa0QsRUFBQztvQkFDbEgsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUU7OzRCQUNKLElBQUUsR0FBRyxLQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRTt3QkFDdEQsS0FBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQzs7NEJBQ3ZDLEtBQUssR0FBRyxLQUFJLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyxTQUFTOzs7O3dCQUFDLFVBQUEsQ0FBQyxJQUFJLE9BQUEsQ0FBQyxDQUFDLEVBQUUsS0FBSyxJQUFFLEVBQVgsQ0FBVyxFQUFDO3dCQUNyRSxLQUFJLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7cUJBQ3hDO3lCQUFNO3dCQUNMLEtBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7d0JBQzlDLEtBQUksQ0FBQyxPQUFPLENBQUMsY0FBYyxHQUFHLEtBQUksQ0FBQyxPQUFPLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7cUJBQ3ZFO2dCQUNILENBQUMsRUFBQyxDQUFDO2dCQUNILElBQUksQ0FBQyxPQUFPLENBQUMsY0FBYztxQkFDeEIsTUFBTTs7OztnQkFBQyxVQUFBLENBQUMsSUFBSSxPQUFBLENBQUMsQ0FBQyxJQUFJLEtBQUssS0FBSSxDQUFDLE9BQU8sQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxJQUFJLENBQUMsQ0FBQyxJQUFJLEtBQUssS0FBSSxDQUFDLE9BQU8sQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFsRyxDQUFrRyxFQUFFO3FCQUNoSCxHQUFHOzs7O2dCQUFDLFVBQUEsU0FBUyxJQUFJLE9BQUEsU0FBUyxDQUFDLFdBQVc7b0JBQ3JDLEtBQUksQ0FBQyxvQkFBb0IsQ0FBQyxtQkFBQSxTQUFTLEVBQU8sQ0FBQyxFQUQzQixDQUMyQixFQUFDLENBQUM7YUFDbEQ7WUFDRCxJQUFJLElBQUUsQ0FBQyxTQUFTLElBQUksSUFBRSxDQUFDLFNBQVMsQ0FBQyxVQUFVLElBQUksSUFBRSxDQUFDLFNBQVMsQ0FBQyxVQUFVLEVBQUU7O29CQUNoRSxDQUFDLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsVUFBVSxDQUFDLFNBQVM7Ozs7Z0JBQUMsVUFBQSxDQUFDLElBQUksT0FBQSxDQUFDLENBQUMsRUFBRSxLQUFLLElBQUUsQ0FBQyxTQUFTLENBQUMsRUFBRSxFQUF4QixDQUF3QixFQUFDO2dCQUN4RixJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRTtvQkFDVixJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBRSxDQUFDLFNBQVMsQ0FBQzs7d0JBQ2xELEtBQUssR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyxTQUFTOzs7O29CQUFDLFVBQUEsQ0FBQyxJQUFJLE9BQUEsQ0FBQyxDQUFDLEVBQUUsS0FBSyxJQUFFLENBQUMsU0FBUyxDQUFDLEVBQUUsRUFBeEIsQ0FBd0IsRUFBQztvQkFDbEYsSUFBSSxDQUFDLE9BQU8sQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLEdBQUc7d0JBQ25DLEVBQUUsRUFBRSxJQUFFLENBQUMsU0FBUyxDQUFDLEVBQUU7d0JBQ25CLElBQUksRUFBRSx5QkFBeUI7d0JBQy9CLGFBQWEsRUFBRSxJQUFFLENBQUMsU0FBUyxDQUFDLElBQUk7d0JBQ2hDLFdBQVcsRUFBRSxJQUFJLENBQUMsb0JBQW9CLENBQUMsSUFBRSxDQUFDLFNBQVMsQ0FBQzt3QkFDcEQsU0FBUyxFQUFFLElBQUUsQ0FBQyxTQUFTLENBQUMsU0FBUztxQkFDbEMsQ0FBQztpQkFDSDtxQkFBTTtvQkFDTCxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLElBQUUsQ0FBQyxTQUFTLENBQUMsQ0FBQztvQkFDekQsSUFBSSxDQUFDLE9BQU8sQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDO3dCQUMvQixFQUFFLEVBQUUsSUFBRSxDQUFDLFNBQVMsQ0FBQyxFQUFFO3dCQUNuQixJQUFJLEVBQUUseUJBQXlCO3dCQUMvQixhQUFhLEVBQUUsSUFBRSxDQUFDLFNBQVMsQ0FBQyxJQUFJO3dCQUNoQyxXQUFXLEVBQUUsSUFBSSxDQUFDLG9CQUFvQixDQUFDLElBQUUsQ0FBQyxTQUFTLENBQUM7d0JBQ3BELFNBQVMsRUFBRSxFQUFFO3FCQUNkLENBQUMsQ0FBQztpQkFDSjthQUNGO1lBQ0QsSUFBSSxJQUFFLENBQUMsYUFBYSxJQUFJLElBQUUsQ0FBQyxhQUFhLENBQUMsa0JBQWtCLElBQUksSUFBRSxDQUFDLGFBQWEsQ0FBQyxTQUFTLEVBQUU7Z0JBQ3pGLElBQUcsSUFBRSxDQUFDLGFBQWEsQ0FBQyxvQkFBb0IsS0FBSyxNQUFNLElBQUksQ0FBQyxJQUFFLENBQUMsYUFBYSxDQUFDLFFBQVEsRUFBQztvQkFDaEYsSUFBSSxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUM7b0JBQ3JCLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLHlCQUF5QixDQUFDLENBQUM7aUJBQzlDO3FCQUFNLElBQUksSUFBRSxDQUFDLGFBQWEsQ0FBQyxvQkFBb0IsS0FBSyxNQUFNLElBQUksQ0FBQyxJQUFFLENBQUMsYUFBYSxDQUFDLFNBQVMsSUFBSSxDQUFDLElBQUUsQ0FBQyxhQUFhLENBQUMsYUFBYSxFQUFFLEVBQUUsZ0NBQWdDO29CQUMvSixJQUFJLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQztvQkFDckIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMscUJBQXFCLENBQUMsQ0FBQztpQkFDMUM7cUJBQU07b0JBQ0wsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUM7b0JBQ3BCLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxJQUFFLENBQUMsQ0FBQztpQkFDL0I7YUFDRjtZQUNELElBQUksSUFBRSxDQUFDLE1BQU0sSUFBSSxJQUFFLENBQUMsTUFBTSxDQUFDLFdBQVcsRUFBRTtnQkFDdEMsSUFBRyxDQUFDLElBQUUsQ0FBQyxNQUFNLENBQUMsZUFBZSxJQUFJLENBQUMsSUFBRSxDQUFDLE1BQU0sQ0FBQyxlQUFlLElBQUksQ0FBQyxJQUFFLENBQUMsTUFBTSxDQUFDLGVBQWUsRUFBQztvQkFDeEYsSUFBSSxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUM7b0JBQ3JCLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO2lCQUNsQztxQkFBTSxJQUFHLENBQUMsSUFBRSxDQUFDLE1BQU0sQ0FBQyxjQUFjLEVBQUM7b0JBQ2xDLElBQUksQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDO29CQUNyQixJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztpQkFDL0I7cUJBQU07b0JBQ0wsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUM7b0JBQ3BCLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBRSxDQUFDLENBQUM7aUJBQ3hCO2FBQ0Y7WUFDRCxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyxDQUFDO1NBQ2pEO1FBQ0QsSUFBSSxJQUFJLENBQUMsVUFBVSxJQUFJLElBQUksQ0FBQyxPQUFPLEVBQUU7WUFDbkMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxLQUFLLEVBQUUsQ0FBQztTQUN6QjtJQUNILENBQUM7Ozs7OztJQUNPLGlEQUFvQjs7Ozs7SUFBNUIsVUFBNkIsRUFBTzs7O1lBQzVCLENBQUMsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxjQUFjLENBQUMsU0FBUzs7OztRQUFDLFVBQUEsQ0FBQyxJQUFJLE9BQUEsQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsYUFBYSxDQUFDLEVBQUUsRUFBNUIsQ0FBNEIsRUFBQztRQUNoRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRTtZQUNWLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsYUFBYSxDQUFDOztnQkFDMUQsS0FBSyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsY0FBYyxDQUFDLFNBQVM7Ozs7WUFBQyxVQUFBLENBQUMsSUFBSSxPQUFBLENBQUMsQ0FBQyxFQUFFLEtBQUssRUFBRSxDQUFDLGFBQWEsQ0FBQyxFQUFFLEVBQTVCLENBQTRCLEVBQUM7WUFDdEYsSUFBSSxDQUFDLE9BQU8sQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLEdBQUc7Z0JBQ25DLEVBQUUsRUFBRSxFQUFFLENBQUMsYUFBYSxDQUFDLEVBQUU7Z0JBQ3ZCLElBQUksRUFBRSw2QkFBNkI7Z0JBQ25DLGFBQWEsRUFBRSxFQUFFLENBQUMsYUFBYSxDQUFDLG9CQUFvQixHQUFHLEdBQUcsR0FBRyxFQUFFLENBQUMsYUFBYSxDQUFDLFNBQVM7Z0JBQ3ZGLFdBQVcsRUFBRSxJQUFJLENBQUMsd0JBQXdCLENBQUMsRUFBRSxDQUFDLGFBQWEsQ0FBQztnQkFDNUQsU0FBUyxFQUFFLEVBQUUsQ0FBQyxhQUFhLENBQUMsU0FBUzthQUN0QyxDQUFDO1NBQ0g7YUFBTTs7Z0JBQ0wsS0FBK0IsSUFBQSxLQUFBLGlCQUFBLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLGNBQWMsQ0FBQSxnQkFBQSw0QkFBQztvQkFBckUsSUFBTSxpQkFBaUIsV0FBQTtvQkFDekIsSUFBRyxpQkFBaUIsQ0FBQyxrQkFBa0IsS0FBSyxFQUFFLENBQUMsYUFBYSxDQUFDLFlBQVk7d0JBQ3ZFLGlCQUFpQixDQUFDLFNBQVMsS0FBSyxFQUFFLENBQUMsYUFBYSxDQUFDLFNBQVM7d0JBQzFELGlCQUFpQixDQUFDLFNBQVMsS0FBSyxFQUFFLENBQUMsYUFBYSxDQUFDLFdBQVc7d0JBQzVELGlCQUFpQixDQUFDLGFBQWEsS0FBSyxFQUFFLENBQUMsYUFBYSxDQUFDLGFBQWE7d0JBQ2xFLGlCQUFpQixDQUFDLFFBQVEsS0FBSyxFQUFFLENBQUMsYUFBYSxDQUFDLFdBQVcsRUFDNUQ7d0JBQ0MsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsY0FBYyxDQUFDLENBQUM7d0JBQ25DLE9BQU87cUJBQ1I7aUJBQ0Y7Ozs7Ozs7OztZQUNELElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1lBQ2pFLElBQUksQ0FBQyxPQUFPLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQztnQkFDL0IsRUFBRSxFQUFFLEVBQUUsQ0FBQyxhQUFhLENBQUMsRUFBRTtnQkFDdkIsSUFBSSxFQUFFLDZCQUE2QjtnQkFDbkMsYUFBYSxFQUFFLEVBQUUsQ0FBQyxhQUFhLENBQUMsb0JBQW9CLEdBQUcsR0FBRyxHQUFHLEVBQUUsQ0FBQyxhQUFhLENBQUMsU0FBUztnQkFDdkYsV0FBVyxFQUFFLElBQUksQ0FBQyx3QkFBd0IsQ0FBQyxFQUFFLENBQUMsYUFBYSxDQUFDO2dCQUM1RCxTQUFTLEVBQUUsRUFBRSxDQUFDLGFBQWEsQ0FBQyxTQUFTO2FBQ3RDLENBQUMsQ0FBQztTQUNKO0lBQ0gsQ0FBQzs7Ozs7O0lBQ08sMENBQWE7Ozs7O0lBQXJCLFVBQXNCLEVBQU87OztZQUNyQixDQUFDLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsa0JBQWtCLENBQUMsU0FBUzs7OztRQUFDLFVBQUEsQ0FBQyxJQUFJLE9BQUEsQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBckIsQ0FBcUIsRUFBQztRQUM3RixJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRTtZQUNWLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLGtCQUFrQixDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxNQUFNLENBQUM7O2dCQUN2RCxLQUFLLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxjQUFjLENBQUMsU0FBUzs7OztZQUFDLFVBQUEsQ0FBQyxJQUFJLE9BQUEsQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBckIsQ0FBcUIsRUFBQztZQUMvRSxJQUFJLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsR0FBRztnQkFDbkMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxNQUFNLENBQUMsRUFBRTtnQkFDaEIsSUFBSSxFQUFFLHNCQUFzQjtnQkFDNUIsYUFBYSxFQUFFLEVBQUUsQ0FBQyxNQUFNLENBQUMsYUFBYSxHQUFHLEdBQUcsR0FBRyxFQUFFLENBQUMsTUFBTSxDQUFDLGNBQWM7Z0JBQ3ZFLFdBQVcsRUFBRSxJQUFJLENBQUMsaUJBQWlCLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQztnQkFDOUMsU0FBUyxFQUFFLEVBQUUsQ0FBQyxNQUFNLENBQUMsU0FBUzthQUMvQixDQUFDO1NBQ0g7YUFBTTs7Z0JBQ0wsS0FBd0IsSUFBQSxLQUFBLGlCQUFBLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLGtCQUFrQixDQUFBLGdCQUFBLDRCQUFDO29CQUFsRSxJQUFNLFVBQVUsV0FBQTtvQkFDbEIsSUFBRyxVQUFVLENBQUMsV0FBVyxLQUFLLEVBQUUsQ0FBQyxNQUFNLENBQUMsV0FBVzt3QkFDakQsVUFBVSxDQUFDLGVBQWUsS0FBSyxFQUFFLENBQUMsTUFBTSxDQUFDLGVBQWU7d0JBQ3hELFVBQVUsQ0FBQyxlQUFlLEtBQUssRUFBRSxDQUFDLE1BQU0sQ0FBQyxlQUFlO3dCQUN4RCxVQUFVLENBQUMsZUFBZSxLQUFLLEVBQUUsQ0FBQyxNQUFNLENBQUMsZUFBZTt3QkFDeEQsVUFBVSxDQUFDLGNBQWMsS0FBSyxFQUFFLENBQUMsTUFBTSxDQUFDLGNBQWMsRUFDdkQ7d0JBQ0MsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLENBQUM7d0JBQ2pDLE9BQU87cUJBQ1I7aUJBQ0Y7Ozs7Ozs7OztZQUNELElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDOUQsSUFBSSxDQUFDLE9BQU8sQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDO2dCQUMvQixFQUFFLEVBQUUsRUFBRSxDQUFDLE1BQU0sQ0FBQyxFQUFFO2dCQUNoQixJQUFJLEVBQUUsc0JBQXNCO2dCQUM1QixhQUFhLEVBQUUsRUFBRSxDQUFDLE1BQU0sQ0FBQyxhQUFhLEdBQUcsR0FBRyxHQUFHLEVBQUUsQ0FBQyxNQUFNLENBQUMsY0FBYztnQkFDdkUsV0FBVyxFQUFFLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDO2dCQUM5QyxTQUFTLEVBQUUsRUFBRSxDQUFDLE1BQU0sQ0FBQyxTQUFTO2FBQy9CLENBQUMsQ0FBQztTQUNKO0lBQ0gsQ0FBQzs7OztJQUNELHVDQUFVOzs7SUFBVjtRQUNFLElBQUksSUFBSSxDQUFDLFVBQVUsRUFBRTtZQUNuQixJQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssRUFBRSxDQUFDO1NBQ3pCO0lBQ0gsQ0FBQzs7OztJQUNELGtEQUFxQjs7O0lBQXJCO1FBQ0UsSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsbUJBQW1CLEVBQUUsQ0FBQztRQUN4RSxJQUFJLENBQUMsYUFBYSxDQUFDLEtBQUssRUFBRSxDQUFDO0lBQzdCLENBQUM7Ozs7OztJQUVPLGlEQUFvQjs7Ozs7SUFBNUIsVUFBNkIsU0FBMEI7UUFDckQsSUFBSSxTQUFTLENBQUMsSUFBSSxLQUFLLG9CQUFvQixFQUFFO1lBQzNDLElBQUksU0FBUyxDQUFDLEdBQUcsS0FBSyxZQUFZLEVBQUU7Z0JBQ2xDLE9BQU8sU0FBUyxDQUFDLFdBQVcsQ0FBQzthQUM5QjtpQkFBTTtnQkFDTCxJQUFJLFNBQVMsQ0FBQyxPQUFPLEVBQUU7b0JBQ3JCLE9BQU8sdUJBQU0sU0FBUyxDQUFDLE9BQVMsQ0FBQztpQkFDbEM7cUJBQU07b0JBQ0wsT0FBTyxFQUFFLENBQUM7aUJBQ1g7YUFDRjtTQUNGO2FBQU0sSUFBSSxTQUFTLENBQUMsSUFBSSxLQUFLLHdCQUF3QixFQUFFO1lBQ3RELElBQUksQ0FBQyxtQkFBQSxTQUFTLEVBQTJCLENBQUMsQ0FBQyxZQUFZLEtBQUssR0FBRyxFQUFFO2dCQUMvRCxJQUFJLFNBQVMsQ0FBQyxLQUFLLEVBQUU7b0JBQ25CLE9BQU8sbUZBQWdCLFNBQVMsQ0FBQyxLQUFPLENBQUM7aUJBQzFDO3FCQUFNO29CQUNMLE9BQU8sd0RBQVcsQ0FBQztpQkFDcEI7YUFDRjtpQkFBTSxJQUFJLENBQUMsbUJBQUEsU0FBUyxFQUEyQixDQUFDLENBQUMsWUFBWSxLQUFLLEdBQUcsRUFBRTtnQkFDdEUsT0FBTyxXQUFXLENBQUM7YUFDcEI7U0FDRjtJQUNILENBQUM7Ozs7OztJQUNPLGlEQUFvQjs7Ozs7SUFBNUIsVUFBNkIsU0FBNkI7O1lBQ3BELEdBQUcsR0FBRyx1QkFBTSxTQUFTLENBQUMsSUFBSSx5QkFBTztRQUNyQyxJQUFJLFNBQVMsQ0FBQyxnQkFBZ0IsSUFBSSxTQUFTLENBQUMsZ0JBQWdCLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtZQUN2RSxTQUFTLENBQUMsZ0JBQWdCLENBQUMsT0FBTzs7OztZQUFDLFVBQUEsQ0FBQztnQkFDbEMsR0FBRyxJQUFPLENBQUMsQ0FBQyxJQUFJLGNBQUksQ0FBQyxDQUFDLEtBQUssV0FBRyxDQUFDO1lBQ2pDLENBQUMsRUFBQyxDQUFDO1lBQ0gsR0FBRyxHQUFHLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUM7U0FDeEM7UUFDRCxHQUFHLElBQUksR0FBRyxDQUFDO1FBQ1gsT0FBTyxHQUFHLENBQUM7SUFDYixDQUFDOzs7Ozs7SUFDTyxxREFBd0I7Ozs7O0lBQWhDLFVBQWlDLGFBQXNDOztZQUNqRSxXQUFXLEdBQUcsRUFBRTtRQUNwQixJQUFHLGFBQWEsQ0FBQyxTQUFTLEVBQUM7WUFDekIsV0FBVyxJQUFJLDZCQUFPLGFBQWEsQ0FBQyxTQUFXLENBQUM7U0FDakQ7UUFDRCxJQUFHLGFBQWEsQ0FBQyxhQUFhLEVBQUM7WUFDN0IsV0FBVyxJQUFJLDZCQUFPLGFBQWEsQ0FBQyxhQUFlLENBQUM7U0FDckQ7UUFDRCxJQUFHLGFBQWEsQ0FBQyxRQUFRLEVBQUM7WUFDeEIsSUFBRyxhQUFhLENBQUMsU0FBUyxFQUFDO2dCQUN6QixXQUFXLElBQUksUUFBRyxDQUFDO2FBQ3BCO1lBQ0QsSUFBRyxhQUFhLENBQUMsYUFBYSxFQUFDO2dCQUM3QixXQUFXLElBQUksUUFBRyxDQUFDO2FBQ3BCO1lBQ0QsV0FBVyxJQUFJLG1DQUFRLGFBQWEsQ0FBQyxRQUFVLENBQUM7U0FDakQ7UUFDRCxPQUFPLFdBQVcsQ0FBQztJQUNyQixDQUFDOzs7Ozs7SUFDTyw4Q0FBaUI7Ozs7O0lBQXpCLFVBQTBCLE1BQTRCOztZQUNoRCxXQUFXLEdBQUcsRUFBRTtRQUNwQixJQUFHLE1BQU0sQ0FBQyxlQUFlLEVBQUM7WUFDeEIsV0FBVyxJQUFJLHdCQUFPLE1BQU0sQ0FBQyxtQkFBbUIsV0FBRyxDQUFDO1NBQ3JEO1FBQ0QsSUFBRyxNQUFNLENBQUMsZUFBZSxFQUFDO1lBQ3hCLFdBQVcsSUFBSSx3QkFBTyxNQUFNLENBQUMsbUJBQW1CLFdBQUcsQ0FBQztTQUNyRDtRQUNELElBQUcsTUFBTSxDQUFDLGVBQWUsRUFBQztZQUN4QixXQUFXLElBQUksd0JBQU8sTUFBTSxDQUFDLG1CQUFtQixXQUFHLENBQUM7U0FDckQ7UUFDRCxJQUFHLE1BQU0sQ0FBQyxjQUFjLEVBQUM7WUFDdkIsV0FBVyxJQUFJLHVCQUFNLE1BQU0sQ0FBQyxjQUFjLFdBQUcsQ0FBQztTQUMvQztRQUNELE9BQU8sV0FBVyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsV0FBVyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQztJQUN0RCxDQUFDOzs7OztJQUVELHlDQUFZOzs7O0lBQVosVUFBYSxDQUFNO1FBQW5CLGlCQWlFQzs7UUFoRUMsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFOztnQkFDM0MsS0FBcUIsSUFBQSxLQUFBLGlCQUFBLElBQUksQ0FBQyxlQUFlLENBQUMsT0FBTyxDQUFBLGdCQUFBLDRCQUFFO29CQUE5QyxJQUFNLE1BQU0sV0FBQTtvQkFDZixJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDLENBQUM7aUJBQ3ZDOzs7Ozs7Ozs7WUFDRCxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTs7b0JBQ25HLFVBQVUsR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDO2dCQUNqRSxJQUFJLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLFVBQVUsQ0FBQyxJQUFJLEVBQUUsUUFBUSxFQUNuRCxVQUFVLENBQUMsSUFBSSxFQUFFLFlBQVksQ0FBQyxVQUFVLENBQUMsQ0FBQzthQUM3QztTQUNGOztZQUNLLE9BQU8sR0FBRyxJQUFJLEtBQUssRUFBRTtRQUMzQixJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsZUFBZSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7O2dCQUNuRCxLQUF1QixJQUFBLEtBQUEsaUJBQUEsSUFBSSxDQUFDLGVBQWUsQ0FBQyxlQUFlLENBQUEsZ0JBQUEsNEJBQUU7b0JBQXhELElBQU0sUUFBUSxXQUFBO29CQUNqQixPQUFPLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO2lCQUN4Qjs7Ozs7Ozs7O1NBQ0Y7UUFDRCxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsc0JBQXNCLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtvQ0FDL0MsUUFBUTtnQkFDakIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJOzs7O2dCQUFDLFVBQUEsQ0FBQyxJQUFJLE9BQUEsQ0FBQyxDQUFDLEdBQUcsS0FBSyxRQUFRLENBQUMsR0FBRyxFQUF0QixDQUFzQixFQUFDLEVBQUU7b0JBQzlDLE9BQU8sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7aUJBQ3hCOzs7Z0JBSEgsS0FBdUIsSUFBQSxLQUFBLGlCQUFBLElBQUksQ0FBQyxlQUFlLENBQUMsc0JBQXNCLENBQUEsZ0JBQUE7b0JBQTdELElBQU0sUUFBUSxXQUFBOzRCQUFSLFFBQVE7aUJBSWxCOzs7Ozs7Ozs7U0FDRjtRQUNELElBQUksSUFBSSxDQUFDLGVBQWUsQ0FBQyxrQkFBa0IsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO29DQUMzQyxRQUFRO2dCQUNqQixJQUFJLENBQUMsT0FBTyxDQUFDLElBQUk7Ozs7Z0JBQUMsVUFBQSxDQUFDLElBQUksT0FBQSxDQUFDLENBQUMsR0FBRyxLQUFLLFFBQVEsQ0FBQyxHQUFHLEVBQXRCLENBQXNCLEVBQUMsRUFBRTtvQkFDOUMsT0FBTyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztpQkFDeEI7OztnQkFISCxLQUF1QixJQUFBLEtBQUEsaUJBQUEsSUFBSSxDQUFDLGVBQWUsQ0FBQyxrQkFBa0IsQ0FBQSxnQkFBQTtvQkFBekQsSUFBTSxRQUFRLFdBQUE7NEJBQVIsUUFBUTtpQkFJbEI7Ozs7Ozs7OztTQUNGO1FBQ0QsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLHNCQUFzQixDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7b0NBQy9DLFFBQVE7Z0JBQ2pCLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSTs7OztnQkFBQyxVQUFBLENBQUMsSUFBSSxPQUFBLENBQUMsQ0FBQyxHQUFHLEtBQUssUUFBUSxDQUFDLEdBQUcsRUFBdEIsQ0FBc0IsRUFBQyxFQUFFO29CQUM5QyxPQUFPLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO2lCQUN4Qjs7O2dCQUhILEtBQXVCLElBQUEsS0FBQSxpQkFBQSxJQUFJLENBQUMsZUFBZSxDQUFDLHNCQUFzQixDQUFBLGdCQUFBO29CQUE3RCxJQUFNLFFBQVEsV0FBQTs0QkFBUixRQUFRO2lCQUlsQjs7Ozs7Ozs7O1NBQ0Y7UUFDRCxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsd0JBQXdCLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtvQ0FDakQsUUFBUTtnQkFDakIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJOzs7O2dCQUFDLFVBQUEsQ0FBQyxJQUFJLE9BQUEsQ0FBQyxDQUFDLEdBQUcsS0FBSyxRQUFRLENBQUMsR0FBRyxFQUF0QixDQUFzQixFQUFDLEVBQUU7b0JBQzlDLE9BQU8sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7aUJBQ3hCOzs7Z0JBSEgsS0FBdUIsSUFBQSxLQUFBLGlCQUFBLElBQUksQ0FBQyxlQUFlLENBQUMsd0JBQXdCLENBQUEsZ0JBQUE7b0JBQS9ELElBQU0sUUFBUSxXQUFBOzRCQUFSLFFBQVE7aUJBSWxCOzs7Ozs7Ozs7U0FDRjtRQUNELElBQUksT0FBTyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7O2dCQUN0QixLQUFnQixJQUFBLFlBQUEsaUJBQUEsT0FBTyxDQUFBLGdDQUFBLHFEQUFFO29CQUFwQixJQUFNLENBQUMsb0JBQUE7b0JBQ1YsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUM7aUJBQ3pCOzs7Ozs7Ozs7U0FDRjtRQUNELElBQUksQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUM5QyxJQUFJLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxZQUFZLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxlQUFlO1FBQ25FLElBQUksQ0FBQyxJQUFJLENBQUMsZUFBZSxFQUFFLENBQUMsSUFBSTs7OztRQUFDLFVBQUMsSUFBWTtZQUM1QyxJQUFJLEtBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxJQUFJLEtBQUsseUJBQXlCLEVBQUU7Z0JBQ2pFLEtBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLFVBQVUsQ0FBQyxJQUFJOzs7O2dCQUFDLFVBQUEsQ0FBQyxJQUFJLE9BQUEsQ0FBQyxDQUFDLEVBQUUsS0FBSyxLQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUF0QyxDQUFzQyxFQUFDLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQzthQUMxRztpQkFBTSxJQUFJLEtBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxJQUFJLEtBQUssNkJBQTZCLEVBQUU7Z0JBQzVFLEtBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLGNBQWMsQ0FBQyxJQUFJOzs7O2dCQUFDLFVBQUEsQ0FBQyxJQUFJLE9BQUEsQ0FBQyxDQUFDLEVBQUUsS0FBSyxLQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUF0QyxDQUFzQyxFQUFDLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQzthQUM5RztpQkFBTSxJQUFJLEtBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxJQUFJLEtBQUssc0JBQXNCLEVBQUM7Z0JBQ3BFLEtBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLGtCQUFrQixDQUFDLElBQUk7Ozs7Z0JBQUMsVUFBQSxDQUFDLElBQUksT0FBQSxDQUFDLENBQUMsRUFBRSxLQUFLLEtBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQXRDLENBQXNDLEVBQUMsQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDO2FBQ2xIO2lCQUFNO2dCQUNMLEtBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLFVBQVUsQ0FBQyxJQUFJOzs7O2dCQUFDLFVBQUEsQ0FBQyxJQUFJLE9BQUEsQ0FBQyxDQUFDLEVBQUUsS0FBSyxLQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUF0QyxDQUFzQyxFQUFDLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQzthQUMxRztZQUNELENBQUMsQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQzdCLENBQUMsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLGFBQWEsRUFBRSxDQUFDO1FBQ2hDLENBQUMsRUFBQyxDQUFDO0lBQ0wsQ0FBQzs7Ozs7SUFNRCwwQ0FBYTs7OztJQUFiLFVBQWMsSUFBUztRQUNyQixJQUFJLENBQUMsT0FBTyxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDO0lBQ3hDLENBQUM7Ozs7O0lBRU8sZ0RBQW1COzs7O0lBQTNCO1FBQUEsaUJBSUM7O1lBSE8sR0FBRyxHQUFHLG1EQUFtRDtRQUMvRCxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUM7YUFDZixTQUFTOzs7O1FBQUMsVUFBQyxJQUFTLElBQUssT0FBQSxLQUFJLENBQUMsZUFBZSxDQUFDLGlCQUFpQixHQUFHLElBQUksQ0FBQyxHQUFHOzs7O1FBQUMsVUFBQSxDQUFDLElBQUksT0FBQSxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxFQUEvQixDQUErQixFQUFDLEVBQXZGLENBQXVGLEVBQUMsQ0FBQztJQUN2SCxDQUFDOzs7OztJQUVPLDRDQUFlOzs7O0lBQXZCOztZQUNRLEdBQUcsR0FBRyxvREFBb0Q7UUFDaEUsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUM1QixDQUFDOztnQkE5bEJGLFNBQVMsU0FBQztvQkFDVCxRQUFRLEVBQUUsZUFBZTtvQkFDekIsa25GQUF5QztvQkFFekMsU0FBUyxFQUFFLENBQUMsa0JBQWtCLEVBQUUsbUJBQW1CLEVBQUUsZ0JBQWdCLENBQUM7O2lCQUN2RTs7OztnQkF4QlEsa0JBQWtCO2dCQUZsQixnQkFBZ0I7Z0JBR2hCLFdBQVc7Z0JBTDBFLHdCQUF3QjtnQkFBRSxRQUFRO2dCQU12SCxjQUFjO2dCQUVkLGVBQWU7Z0JBSWYsc0JBQXNCO2dCQUN0QixpQkFBaUI7Z0JBTWpCLFdBQVc7OztzQkFXakIsV0FBVyxTQUFDLE9BQU87OEJBS25CLFNBQVMsU0FBQyxrQkFBa0I7NkJBQzVCLFNBQVMsU0FBQyxZQUFZOzBCQUN0QixTQUFTLFNBQUMseUJBQXlCO2dDQUNuQyxTQUFTLFNBQUMsb0JBQW9CO3VCQUM5QixTQUFTLFNBQUMsaUJBQWlCOzZCQUUzQixNQUFNOzhCQUNOLE1BQU07d0JBRU4sS0FBSzsrQkFnREwsS0FBSzs7SUEwaEJSLHlCQUFDO0NBQUEsQUEvbEJELElBK2xCQztTQXpsQlksa0JBQWtCOzs7SUFDN0IsaUNBQ3FDOztJQUVyQyxxQ0FBZTs7SUFFZix5Q0FBNkQ7O0lBQzdELHdDQUFzRDs7SUFDdEQscUNBQXlFOztJQUN6RSwyQ0FBZ0U7O0lBQ2hFLGtDQUFzRDs7SUFFdEQsd0NBQStDOztJQUMvQyx5Q0FBZ0Q7O0lBa0RoRCwwQ0FBMkI7O0lBRTNCLHdDQUF1Qjs7SUFDdkIscUNBQThDOztJQUM5QyxxQ0FBZTs7SUFFZix5Q0FLRTs7SUFDRixxQ0FvQ0U7O0lBRUYsMENBQWtCOztJQUNsQix1Q0FBa0I7O0lBcWRsQix1Q0FFQzs7SUFwZEMsdUNBQW9DOztJQUNwQyxxQ0FBZ0M7Ozs7O0lBQ2hDLHlDQUFnQzs7Ozs7SUFDaEMsc0NBQTBDOzs7OztJQUMxQyxzQ0FBMEI7Ozs7O0lBQzFCLDBDQUFvQzs7Ozs7SUFDcEMscUNBQWdDOzs7OztJQUNoQyw2Q0FBK0M7Ozs7O0lBQy9DLGtDQUErQjs7Ozs7SUFDL0Isa0NBQXlCOztBQTRkN0I7SUFDRTtJQUFnQixDQUFDOzs7OztJQUVqQixzQ0FBUzs7OztJQUFULFVBQVUsSUFBUztRQUNqQixJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7ZUFDOUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztlQUMvQyxDQUFDLElBQUksQ0FBQyxjQUFjLElBQUksSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO2VBQ3ZELENBQUMsSUFBSSxDQUFDLGtCQUFrQixJQUFJLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLEVBQ2xFO1lBQ0EsT0FBTyxPQUFPLENBQUM7U0FDaEI7YUFBTTtZQUNMLE9BQU8sT0FBTyxDQUFDO1NBQ2hCO0lBQ0gsQ0FBQztJQUNILHlCQUFDO0FBQUQsQ0FBQyxBQWRELElBY0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCwgSG9zdEJpbmRpbmcsIE91dHB1dCwgRXZlbnRFbWl0dGVyLCBJbnB1dCwgVmlld0NoaWxkLCBUZW1wbGF0ZVJlZiwgQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLCBJbmplY3RvciwgQ29tcG9uZW50UmVmIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IFR5cGVDb252ZXJ0ZXIgfSBmcm9tICdAZmFycmlzL3VpLXByb3BlcnR5LXBhbmVsJztcclxuaW1wb3J0IHsgUGVyZm9ybWVyVUlTdGF0ZSB9IGZyb20gJy4vcGVyZm9ybWVyLnVpc3RhdGUnO1xyXG5pbXBvcnQgeyBQZXJmb3JtZXJSZXBvc2l0b3J5IH0gZnJvbSAnLi9wZXJmb3JtZXIucmVwb3NpdG9yeSc7XHJcbmltcG9ydCB7IFBlcmZvcm1lclZpZXdNb2RlbCB9IGZyb20gJy4vcGVyZm9ybWVyLnZpZXdtb2RlbCc7XHJcbmltcG9ydCB7IEZvcm1CdWlsZGVyIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xyXG5pbXBvcnQgeyBCc01vZGFsU2VydmljZSwgQnNNb2RhbFJlZiB9IGZyb20gJ0BmYXJyaXMvdWktbW9kYWwnO1xyXG5pbXBvcnQgeyBQZXJmb3JtZXJFZGl0Q29tcG9uZW50IH0gZnJvbSAnLi92aWV3cy9wZXJmb3JtZXItZWRpdC9wZXJmb3JtZXItZWRpdC5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBNZXNzYWdlclNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLW1lc3NhZ2VyJztcclxuaW1wb3J0IHsgUGVyZm9ybWVyT3B0aW9uc0NvbXBvbmVudCB9IGZyb20gJy4vdmlld3MvcGVyZm9ybWVyLW9wdGlvbnMvcGVyZm9ybWVyLW9wdGlvbnMuY29tcG9uZW50JztcclxuaW1wb3J0IHsgRGlhbG9nQ29tcG9uZW50IH0gZnJvbSAnQGZhcnJpcy91aS1kaWFsb2cnO1xyXG5pbXBvcnQgeyBQZXJmb3JtZXJFbnRpdHkgfSBmcm9tICcuL2VudGl0aWVzL3BlcmZvcm1lci5lbnRpdHknO1xyXG5pbXBvcnQgeyBQcm9jZXNzRGVzaWduZXJVSVN0YXRlIH0gZnJvbSAnLi4vLi4vYXBwL3Byb2Nlc3MtZGVzaWduZXIudWlzdGF0ZSc7XHJcbmltcG9ydCB7IEV4cHJlc3Npb25TZXJ2aWNlLCBJbmplY3RlZFR5cGUsIEV4cHJFZGl0TW9kZSB9IGZyb20gJ0Bnc3Atc3ZjL2V4cHJlc3Npb24nO1xyXG5pbXBvcnQgeyBSZXBvcnRpbmdMaW5lRGF0YUVudGl0eSB9IGZyb20gJy4vdmlld3MvcmVwb3J0aW5nLWxpbmUvcmVwb3J0aW5nLWxpbmUtZGF0YS5lbnRpdHknO1xyXG5pbXBvcnQgeyBQZXJmb3JtZXJJbmZvIH0gZnJvbSAnLi9lbnRpdGllcy9wZXJmb3JtZXItaW5mby5lbnRpdHknO1xyXG5pbXBvcnQgeyBEYXRhQ29sdW1uLCBEYXRhZ3JpZENvbXBvbmVudCB9IGZyb20gJ0BmYXJyaXMvdWktZGF0YWdyaWQnO1xyXG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBvZn0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IFBvc2l0aW9uUGVyZm9ybWVyRW50aXR5IH0gZnJvbSAnLi9lbnRpdGllcy9wb3NpdGlvbi1wZXJmb3JtZXIuZW50aXR5JztcclxuaW1wb3J0IHsgSHR0cFNlcnZpY2UgfSBmcm9tICdAZWNwLWNhZi9jYWYtY29tbW9uJztcclxuaW1wb3J0IHsgQ29tcG9uZW50UGVyZm9ybWVyIH0gZnJvbSAnLi92aWV3cy9jb21wb25lbnQtcGVyZm9ybWVyL2NvbXBvbmVudC1wZXJmb3JtZXIuZW50aXR5JztcclxuaW1wb3J0IHtNYXRyaXhEYXRhSW5mb0VudGl0eX0gZnJvbSAnLi92aWV3cy9tYXRyaXgtcGVyZm9ybWVyL2VudGl0aXMvbWF0cml4LWRhdGEtaW5mby5lbnRpdHknO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICdhcHAtcGVyZm9ybWVyJyxcclxuICB0ZW1wbGF0ZVVybDogJy4vcGVyZm9ybWVyLmNvbXBvbmVudC5odG1sJyxcclxuICBzdHlsZVVybHM6IFsnLi9wZXJmb3JtZXIuY29tcG9uZW50LnNjc3MnXSxcclxuICBwcm92aWRlcnM6IFtQZXJmb3JtZXJWaWV3TW9kZWwsIFBlcmZvcm1lclJlcG9zaXRvcnksIFBlcmZvcm1lclVJU3RhdGVdXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBQZXJmb3JtZXJDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xyXG4gIEBIb3N0QmluZGluZygnY2xhc3MnKVxyXG4gIGNscyA9ICdmYXJyaXMtbWFpbi1hcmVhIGZsZXgtY29sdW1uJztcclxuXHJcbiAgZGlzcGxheSA9IHRydWU7IC8vIOaOp+WItuefqemYteWPguS4juiAheaYr+WQpuaYvuekulxyXG5cclxuICBAVmlld0NoaWxkKCdpY29uU2VsZWN0Rm9vdGVyJykgbW9kYWxGb290ZXI6IFRlbXBsYXRlUmVmPGFueT47XHJcbiAgQFZpZXdDaGlsZCgnZWRpdEZvb3RlcicpIGVkaXRGb290ZXI6IFRlbXBsYXRlUmVmPGFueT47XHJcbiAgQFZpZXdDaGlsZChQZXJmb3JtZXJPcHRpb25zQ29tcG9uZW50KSBvcHRpb25zOiBQZXJmb3JtZXJPcHRpb25zQ29tcG9uZW50O1xyXG4gIEBWaWV3Q2hpbGQoJ3BhcnRpY2lwYW50T3B0aW9ucycpIG9wdGlvbnNEaWFsb2c6IERpYWxvZ0NvbXBvbmVudDtcclxuICBAVmlld0NoaWxkKERhdGFncmlkQ29tcG9uZW50KSBncmlkOiBEYXRhZ3JpZENvbXBvbmVudDtcclxuXHJcbiAgQE91dHB1dCgpIGNsb3NlTW9kYWwgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuICBAT3V0cHV0KCkgc3VibWl0TW9kYWwgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuXHJcbiAgQElucHV0KClcclxuICBzZXQgdmFsdWUocGFydEluZm86IFBlcmZvcm1lckluZm8pIHtcclxuICAgIGlmIChwYXJ0SW5mby5wZXJmb3JtZXJzICYmIHBhcnRJbmZvLnBlcmZvcm1lcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby5wZXJmb3JtZXJzID0gcGFydEluZm8ucGVyZm9ybWVycztcclxuICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lcnNMaXN0ID0gdGhpcy51aXN0YXRlLnBlcmZvcm1lcnNMaXN0LmNvbmNhdChwYXJ0SW5mby5wZXJmb3JtZXJzIGFzIGFueVtdKTtcclxuICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lcnNMaXN0Lm1hcChwZXJmb3JtZXIgPT4gcGVyZm9ybWVyLmRlc2NyaXB0aW9uID0gdGhpcy5wZXJmb3JtZXJEZXNjcmlwdGlvbihwZXJmb3JtZXIgYXMgYW55KSk7XHJcbiAgICB9XHJcbiAgICBpZiAocGFydEluZm8uY29tcG9uZW50cyAmJiBwYXJ0SW5mby5jb21wb25lbnRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8uY29tcG9uZW50cyA9IHBhcnRJbmZvLmNvbXBvbmVudHM7XHJcbiAgICAgIHBhcnRJbmZvLmNvbXBvbmVudHMuZm9yRWFjaChjbXAgPT4ge1xyXG4gICAgICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJzTGlzdC5wdXNoKHtcclxuICAgICAgICAgIGlkOiBjbXAuaWQsXHJcbiAgICAgICAgICB0eXBlOiAnd2YuQ29tcG9uZW50UGFydGljaXBhbnQnLFxyXG4gICAgICAgICAgcGVyZm9ybWVyTmFtZTogY21wLm5hbWUsXHJcbiAgICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy5jb21wb25lbnREZXNjcmlwdGlvbihjbXApLFxyXG4gICAgICAgICAgY29uZGl0aW9uOiBjbXAuY29uZGl0aW9uXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHBhcnRJbmZvLnJlcG9ydGluZ0xpbmVzICYmIHBhcnRJbmZvLnJlcG9ydGluZ0xpbmVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8ucmVwb3J0aW5nTGluZXMgPSBwYXJ0SW5mby5yZXBvcnRpbmdMaW5lcztcclxuICAgICAgcGFydEluZm8ucmVwb3J0aW5nTGluZXMuZm9yRWFjaChyID0+IHtcclxuICAgICAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVyc0xpc3QucHVzaCh7XHJcbiAgICAgICAgICBpZDogci5pZCxcclxuICAgICAgICAgIHR5cGU6ICd3Zi5SZXBvcnRpbmdMaW5lUGFydGljaXBhbnQnLFxyXG4gICAgICAgICAgcGVyZm9ybWVyTmFtZTogci5yZXBvcnRpbmdMaW5lRGVmTmFtZSArICctJyArIHIuZGltZW5zaW9uLFxyXG4gICAgICAgICAgZGVzY3JpcHRpb246IHRoaXMucmVwb3J0aW5nTGluZURlc2NyaXB0aW9uKHIpLFxyXG4gICAgICAgICAgY29uZGl0aW9uOiByLmNvbmRpdGlvblxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIGlmIChwYXJ0SW5mby5tYXRyaXhQYXJ0aWNpcGFudHMgJiYgcGFydEluZm8ubWF0cml4UGFydGljaXBhbnRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8ubWF0cml4UGFydGljaXBhbnRzID0gcGFydEluZm8ubWF0cml4UGFydGljaXBhbnRzO1xyXG4gICAgICBwYXJ0SW5mby5tYXRyaXhQYXJ0aWNpcGFudHMuZm9yRWFjaChyID0+IHtcclxuICAgICAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVyc0xpc3QucHVzaCh7XHJcbiAgICAgICAgICBpZDogci5pZCxcclxuICAgICAgICAgIHR5cGU6ICd3Zi5NYXRyaXhQYXJ0aWNpcGFudCcsXHJcbiAgICAgICAgICBwZXJmb3JtZXJOYW1lOiByLm1hdHJpeERlZk5hbWUgKyAnLScgKyByLmRhdGFGaWVsZEFsaWFzLFxyXG4gICAgICAgICAgZGVzY3JpcHRpb246IHRoaXMubWF0cml4RGVzY3JpcHRpb24ociksXHJcbiAgICAgICAgICBjb25kaXRpb246IHIuY29uZGl0aW9uXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHBhcnRJbmZvLm9wdGlvbnMpIHtcclxuICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8ub3B0aW9ucyA9IHBhcnRJbmZvLm9wdGlvbnM7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBASW5wdXQoKSBlZGl0b3JQYXJhbXMgPSB7fTtcclxuXHJcbiAgZWRpdERpYWxvZzogQnNNb2RhbFJlZjtcclxuICBjb21wUmVmOiBDb21wb25lbnRSZWY8UGVyZm9ybWVyRWRpdENvbXBvbmVudD47XHJcbiAgaXNDbG9zZSA9IHRydWU7XHJcblxyXG4gIG1vZGFsQ29uZmlnID0ge1xyXG4gICAgdGl0bGU6ICflj4LkuI7ogIUnLFxyXG4gICAgd2lkdGg6IDgwMCxcclxuICAgIGhlaWdodDogNTE1LFxyXG4gICAgc2hvd0J1dHRvbnM6IHRydWVcclxuICB9O1xyXG4gIGNvbHVtbnMgPSBbXHJcbiAgICB7XHJcbiAgICAgIGZpZWxkOiAndHlwZScsIHdpZHRoOiA1MCwgdGl0bGU6ICfnsbvlnosnLFxyXG4gICAgICBmb3JtYXR0ZXI6IHtcclxuICAgICAgICB0eXBlOiAnZW51bScsXHJcbiAgICAgICAgb3B0aW9uczogeyB2YWx1ZUZpZWxkOiAndmFsdWUnLCB0ZXh0RmllbGQ6ICd0ZXh0JywgZGF0YTogdGhpcy51aXN0YXRlLnR5cGVDb2xsZWN0aW9uIH1cclxuICAgICAgfVxyXG4gICAgIH0sXHJcbiAgICB7IGZpZWxkOiAncGVyZm9ybWVyTmFtZScsIHdpZHRoOiA1MCwgdGl0bGU6ICflkI3np7AnIH0sXHJcbiAgICB7IGZpZWxkOiAnZGVzY3JpcHRpb24nLCB3aWR0aDogMTAwLCB0aXRsZTogJ+aPj+i/sCcsIHNob3dUaXBzOiB0cnVlIH0sXHJcbiAgICB7XHJcbiAgICAgIGZpZWxkOiAnY29uZGl0aW9uJywgd2lkdGg6IDYwLCB0aXRsZTogJ+WQr+eUqOadoeS7ticsIHNob3dUaXBzOiB0cnVlLFxyXG4gICAgICBlZGl0b3I6IHtcclxuICAgICAgICB0eXBlOiAnaW5wdXQtZ3JvdXAnLFxyXG4gICAgICAgIG9wdGlvbnM6IHtcclxuICAgICAgICAgIGdyb3VwVGV4dDogJzxpIGNsYXNzPVwiZi1pY29uIGYtaWNvbi1sb29rdXBcIj48L2k+JyxcclxuICAgICAgICAgIGVkaXRhYmxlOiBmYWxzZSxcclxuICAgICAgICAgIGNsaWNrSGFuZGxlOiAoZSkgPT4ge1xyXG4gICAgICAgICAgICBlLmZvcm1Db250cm9sLnNldFZhbHVlKGUuaW5zdGFuY2UudmFsdWUgPyBlLmluc3RhbmNlLnZhbHVlIDogJycpO1xyXG4gICAgICAgICAgICB0aGlzLmVkaXRDb25kaXRvbihlKTtcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBjbGVhcjogKGUpID0+IHtcclxuICAgICAgICAgICAgaWYgKGUucm93RGF0YS50eXBlID09PSAnd2YuQ29tcG9uZW50UGFydGljaXBhbnQnKSB7XHJcbiAgICAgICAgICAgICAgY29uc3QgaSA9IHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLmNvbXBvbmVudHMuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5pZCA9PT0gZS5yb3dEYXRhLmlkKTtcclxuICAgICAgICAgICAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby5jb21wb25lbnRzW2ldLmNvbmRpdGlvbiA9ICcnO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUucm93RGF0YS50eXBlID09PSAnd2YuUmVwb3J0aW5nTGluZVBhcnRpY2lwYW50Jykge1xyXG4gICAgICAgICAgICAgIGNvbnN0IGkgPSB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby5yZXBvcnRpbmdMaW5lcy5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLmlkID09PSBlLnJvd0RhdGEuaWQpO1xyXG4gICAgICAgICAgICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLnJlcG9ydGluZ0xpbmVzW2ldLmNvbmRpdGlvbiA9ICcnO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUucm93RGF0YS50eXBlID09PSAnd2YuTWF0cml4UGFydGljaXBhbnQnKSB7XHJcbiAgICAgICAgICAgICAgY29uc3QgaSA9IHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLm1hdHJpeFBhcnRpY2lwYW50cy5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLmlkID09PSBlLnJvd0RhdGEuaWQpO1xyXG4gICAgICAgICAgICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLm1hdHJpeFBhcnRpY2lwYW50c1tpXS5jb25kaXRpb24gPSAnJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIF07XHJcblxyXG4gIGN1clBlcmZvcm1lcjogYW55O1xyXG4gIGVkaXRTdGF0ZSA9ICduZXcnOyAvLyDnvJbovpHnirbmgIHvvIznlKjkuo7ljLrliIbmmK/mlrDlop7ov5jmmK/nvJbovpEgIG5ldyB8IGVkaXRcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBwdWJsaWMgdmlld01vZGVsOiBQZXJmb3JtZXJWaWV3TW9kZWwsXHJcbiAgICBwdWJsaWMgdWlzdGF0ZTogUGVyZm9ybWVyVUlTdGF0ZSxcclxuICAgIHByaXZhdGUgZm9ybUJ1aWxkZXI6IEZvcm1CdWlsZGVyLFxyXG4gICAgcHJpdmF0ZSByZXNvbHZlcjogQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLFxyXG4gICAgcHJpdmF0ZSBpbmplY3RvcjogSW5qZWN0b3IsXHJcbiAgICBwcml2YXRlIG1vZGFsU2VydmljZTogQnNNb2RhbFNlcnZpY2UsXHJcbiAgICBwcml2YXRlIG1lc3NhZ2U6IE1lc3NhZ2VyU2VydmljZSxcclxuICAgIHByaXZhdGUgZGVzaWduZXJVSVN0YXRlOiBQcm9jZXNzRGVzaWduZXJVSVN0YXRlLFxyXG4gICAgcHJpdmF0ZSBleHByOiBFeHByZXNzaW9uU2VydmljZSxcclxuICAgIHByaXZhdGUgaHR0cDogSHR0cFNlcnZpY2UsXHJcbiAgKSB7XHJcbiAgICB0aGlzLkdldE9yZ2FuaXphdGlvblR5cGUoKTtcclxuICB9XHJcblxyXG4gIG5nT25Jbml0KCkge1xyXG4gICAgdGhpcy5nZXRNYXRyaXhDb25maWcoKS5zdWJzY3JpYmUocmUgPT4ge1xyXG4gICAgICBpZiAocmUgJiYgcmUuY3VycmVudFZhbHVlID09PSAnZmFsc2UnKSB7XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5ID0gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuICBhZGQoKSB7XHJcbiAgICB0aGlzLmVkaXRTdGF0ZSA9ICduZXcnO1xyXG4gICAgY29uc3QgY29tcEZhY3RvcnkgPSB0aGlzLnJlc29sdmVyLnJlc29sdmVDb21wb25lbnRGYWN0b3J5KFBlcmZvcm1lckVkaXRDb21wb25lbnQpO1xyXG4gICAgdGhpcy5jb21wUmVmID0gY29tcEZhY3RvcnkuY3JlYXRlKHRoaXMuaW5qZWN0b3IpO1xyXG4gICAgdGhpcy5jb21wUmVmLmluc3RhbmNlLmRpc3BsYXkgPSB0aGlzLmRpc3BsYXk7XHJcblxyXG4gICAgY29uc3QgbW9kYWxDb25maWcgPSB7XHJcbiAgICAgIHRpdGxlOiAn5Y+C5LiO6ICF6YCJ5oupJyxcclxuICAgICAgd2lkdGg6IDgwMCxcclxuICAgICAgaGVpZ2h0OiA1MTUsXHJcbiAgICAgIGJ1dHRvbnM6IHRoaXMuZWRpdEZvb3RlcixcclxuICAgICAgc2hvd0J1dHRvbnM6IHRydWVcclxuICAgIH07XHJcbiAgICB0aGlzLmVkaXREaWFsb2cgPSB0aGlzLm1vZGFsU2VydmljZS5zaG93KHRoaXMuY29tcFJlZiwgbW9kYWxDb25maWcpO1xyXG4gIH1cclxuICBlZGl0KCkge1xyXG4gICAgdGhpcy5lZGl0U3RhdGUgPSAnZWRpdCdcclxuICAgIGlmICh0aGlzLnVpc3RhdGUuY3VyUGVyZm9ybWVyKSB7XHJcbiAgICAgIGNvbnN0IG1vZGFsQ29uZmlnID0ge1xyXG4gICAgICAgIHRpdGxlOiAn5Y+C5LiO6ICF6YCJ5oupJyxcclxuICAgICAgICB3aWR0aDogODAwLFxyXG4gICAgICAgIGhlaWdodDogNTE1LFxyXG4gICAgICAgIGJ1dHRvbnM6IHRoaXMuZWRpdEZvb3RlcixcclxuICAgICAgICBzaG93QnV0dG9uczogdHJ1ZVxyXG4gICAgICB9O1xyXG4gICAgICBjb25zdCBjb21wRmFjdG9yeSA9IHRoaXMucmVzb2x2ZXIucmVzb2x2ZUNvbXBvbmVudEZhY3RvcnkoUGVyZm9ybWVyRWRpdENvbXBvbmVudCk7XHJcbiAgICAgIHRoaXMuY29tcFJlZiA9IGNvbXBGYWN0b3J5LmNyZWF0ZSh0aGlzLmluamVjdG9yKTtcclxuICAgICAgc3dpdGNoICh0aGlzLnVpc3RhdGUuY3VyUGVyZm9ybWVyLnR5cGUpIHtcclxuICAgICAgICBjYXNlICd3Zi5Qb3NpdGlvblBhcnRpY2lwYW50JzpcclxuICAgICAgICAgIHRoaXMuY29tcFJlZi5pbnN0YW5jZS5wZXJmb3JtZXIgPSB7XHJcbiAgICAgICAgICAgIHR5cGU6ICd3Zi5Qb3NpdGlvblBhcnRpY2lwYW50JyxcclxuICAgICAgICAgICAgdmFsdWU6IHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLnBlcmZvcm1lcnMuZmluZChwID0+IHAuaWQgPT09IHRoaXMudWlzdGF0ZS5jdXJQZXJmb3JtZXIuaWQpXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnd2YuVXNlclBhcnRpY2lwYW50JzpcclxuICAgICAgICAgIHRoaXMuY29tcFJlZi5pbnN0YW5jZS5wZXJmb3JtZXIgPSB7XHJcbiAgICAgICAgICAgIHR5cGU6ICd3Zi5Vc2VyUGFydGljaXBhbnQnLFxyXG4gICAgICAgICAgICB2YWx1ZTogdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8ucGVyZm9ybWVycy5maW5kKHAgPT4gcC5pZCA9PT0gdGhpcy51aXN0YXRlLmN1clBlcmZvcm1lci5pZClcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ3dmLlJlcG9ydGluZ0xpbmVQYXJ0aWNpcGFudCc6XHJcbiAgICAgICAgICBjb25zdCByZXBvcnRpbmdMaW5lID0gdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8ucmVwb3J0aW5nTGluZXMuZmluZChyID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHIuaWQgPT09IHRoaXMudWlzdGF0ZS5jdXJQZXJmb3JtZXIuaWQ7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgdGhpcy5jb21wUmVmLmluc3RhbmNlLnBlcmZvcm1lciA9IHtcclxuICAgICAgICAgICAgdHlwZTogJ3dmLlJlcG9ydGluZ0xpbmVQYXJ0aWNpcGFudCcsXHJcbiAgICAgICAgICAgIHZhbHVlOiByZXBvcnRpbmdMaW5lXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgY29uc3QgdXJsID0gJy9hcGkvcnVudGltZS93Zi92MS4wL3JlcG9ydGluZ0xpbmVEZWZpbml0aW9ucy8nICsgcmVwb3J0aW5nTGluZS5yZXBvcnRpbmdMaW5lRGVmSWQ7XHJcbiAgICAgICAgICB0aGlzLmh0dHAuZ2V0KHVybCkuc3Vic2NyaWJlKChyZXM6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIXJlcykge1xyXG4gICAgICAgICAgICAgIHRoaXMubWVzc2FnZS5lcnJvcign6K+l5p2h5rGH5oql5YWz57O75pWw5o2u55qE5a6a5LmJ5bey5Yig6Zmk77yM6K+l5p2h5pWw5o2u5bCG5Yig6ZmkJylcclxuICAgICAgICAgICAgICB0aGlzLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHRoaXMuZWRpdERpYWxvZyA9IHRoaXMubW9kYWxTZXJ2aWNlLnNob3codGhpcy5jb21wUmVmLCBtb2RhbENvbmZpZyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnd2YuTWF0cml4UGFydGljaXBhbnQnOlxyXG4gICAgICAgICAgY29uc3QgbWF0cml4ID0gdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8ubWF0cml4UGFydGljaXBhbnRzLmZpbmQociA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiByLmlkID09PSB0aGlzLnVpc3RhdGUuY3VyUGVyZm9ybWVyLmlkO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIHRoaXMuY29tcFJlZi5pbnN0YW5jZS5wZXJmb3JtZXIgPSB7XHJcbiAgICAgICAgICAgIHR5cGU6ICd3Zi5NYXRyaXhQYXJ0aWNpcGFudCcsXHJcbiAgICAgICAgICAgIHZhbHVlOiBtYXRyaXhcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgICBjb25zdCB1cmxNYXRyaXggPSAnL2FwaS9ydW50aW1lL3dmL3YxLjAvbWF0cml4RGVmaW5pdGlvbi8nICsgbWF0cml4Lm1hdHJpeERlZklkO1xyXG4gICAgICAgICAgdGhpcy5odHRwLmdldCh1cmxNYXRyaXgpLnN1YnNjcmliZSgocmVzOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgaWYgKCFyZXMpIHtcclxuICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2UuZXJyb3IoJ+ivpeadoeefqemYteaVsOaNrueahOWumuS5ieW3suWIoOmZpO+8jOivpeadoeaVsOaNruWwhuWIoOmZpCcpXHJcbiAgICAgICAgICAgICAgdGhpcy5yZW1vdmUoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICB0aGlzLmVkaXREaWFsb2cgPSB0aGlzLm1vZGFsU2VydmljZS5zaG93KHRoaXMuY29tcFJlZiwgbW9kYWxDb25maWcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ3dmLkNvbXBvbmVudFBhcnRpY2lwYW50JzpcclxuICAgICAgICAgIHRoaXMuY29tcFJlZi5pbnN0YW5jZS5wZXJmb3JtZXIgPSB7XHJcbiAgICAgICAgICAgIHR5cGU6ICd3Zi5Db21wb25lbnRQYXJ0aWNpcGFudCcsXHJcbiAgICAgICAgICAgIHZhbHVlOiB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby5jb21wb25lbnRzLmZpbmQoYyA9PiB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGMuaWQgPT09IHRoaXMudWlzdGF0ZS5jdXJQZXJmb3JtZXIuaWQ7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgaWYodGhpcy51aXN0YXRlLmN1clBlcmZvcm1lci50eXBlICE9PSAnd2YuUmVwb3J0aW5nTGluZVBhcnRpY2lwYW50JyAmJlxyXG4gICAgICAgIHRoaXMudWlzdGF0ZS5jdXJQZXJmb3JtZXIudHlwZSAhPT0gJ3dmLk1hdHJpeFBhcnRpY2lwYW50Jyl7IC8vIOaxh+aKpeWFs+ezu+WSjOefqemYteWNleeLrOWkhOeQhlxyXG4gICAgICAgIHRoaXMuZWRpdERpYWxvZyA9IHRoaXMubW9kYWxTZXJ2aWNlLnNob3codGhpcy5jb21wUmVmLCBtb2RhbENvbmZpZyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbiAgcmVtb3ZlKCkge1xyXG4gICAgaWYgKHRoaXMuZ3JpZC5zZWxlY3RlZFJvdykge1xyXG4gICAgICB0aGlzLmdyaWQuZW5kQ2VsbEVkaXQoKTtcclxuICAgICAgaWYgKHRoaXMuZ3JpZC5zZWxlY3RlZFJvdy5kYXRhLnR5cGUgPT09ICd3Zi5Db21wb25lbnRQYXJ0aWNpcGFudCcpIHtcclxuICAgICAgICBjb25zdCBpID0gdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8uY29tcG9uZW50cy5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLmlkID09PSB0aGlzLmdyaWQuc2VsZWN0ZWRSb3cuZGF0YS5pZCk7XHJcbiAgICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8uY29tcG9uZW50cy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5ncmlkLnNlbGVjdGVkUm93LmRhdGEudHlwZSA9PT0gJ3dmLlJlcG9ydGluZ0xpbmVQYXJ0aWNpcGFudCcpIHtcclxuICAgICAgICBjb25zdCBpID0gdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8ucmVwb3J0aW5nTGluZXMuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5pZCA9PT0gdGhpcy5ncmlkLnNlbGVjdGVkUm93LmRhdGEuaWQpO1xyXG4gICAgICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLnJlcG9ydGluZ0xpbmVzLnNwbGljZShpLCAxKTtcclxuICAgICAgfSBlbHNlIGlmICh0aGlzLmdyaWQuc2VsZWN0ZWRSb3cuZGF0YS50eXBlID09PSAnd2YuTWF0cml4UGFydGljaXBhbnQnKSB7XHJcbiAgICAgICAgY29uc3QgaSA9IHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLm1hdHJpeFBhcnRpY2lwYW50cy5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLmlkID09PSB0aGlzLmdyaWQuc2VsZWN0ZWRSb3cuZGF0YS5pZCk7XHJcbiAgICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8ubWF0cml4UGFydGljaXBhbnRzLnNwbGljZShpLCAxKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zdCBpID0gdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8ucGVyZm9ybWVycy5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLmlkID09PSB0aGlzLmdyaWQuc2VsZWN0ZWRSb3cuZGF0YS5pZCk7XHJcbiAgICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8ucGVyZm9ybWVycy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnVpc3RhdGUucGVyZm9ybWVyc0xpc3QuZmluZEluZGV4KHAgPT4gcC5pZCA9PT0gdGhpcy5ncmlkLnNlbGVjdGVkUm93LmRhdGEuaWQpO1xyXG4gICAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVyc0xpc3Quc3BsaWNlKGluZGV4LCAxKTtcclxuXHJcbiAgICAgIHRoaXMuZ3JpZC5sb2FkRGF0YSh0aGlzLnVpc3RhdGUucGVyZm9ybWVyc0xpc3QpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5tZXNzYWdlLmluZm8oJ+ivt+WFiOmAieS4reS4gOadoeWPguS4juiAheS/oeaBr++8gScpO1xyXG4gICAgfVxyXG4gIH1cclxuICBjbGVhcigpIHtcclxuICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLnBlcmZvcm1lcnMgPSBbXTtcclxuICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLmNvbXBvbmVudHMgPSBbXTtcclxuICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLnJlcG9ydGluZ0xpbmVzID0gW107XHJcbiAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby5tYXRyaXhQYXJ0aWNpcGFudHMgPSBbXTtcclxuICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJzTGlzdCA9IFtdO1xyXG4gICAgdGhpcy5ncmlkLmxvYWREYXRhKHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJzTGlzdCk7XHJcbiAgfVxyXG4gIGNsaWNrT0soKSB7XHJcbiAgICB0aGlzLmdyaWQuZW5kQ2VsbEVkaXQoKTtcclxuICAgIGNvbnN0IG9iamVjdCA9IHtcclxuICAgICAgdmFsdWU6IHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLCBwYXJhbWV0ZXJzOiBudWxsXHJcbiAgICB9O1xyXG4gICAgdGhpcy5zdWJtaXRNb2RhbC5lbWl0KG9iamVjdCk7XHJcbiAgfVxyXG4gIGNsaWNrQ2FuY2VsKCkge1xyXG4gICAgdGhpcy5jbG9zZU1vZGFsLmVtaXQoKTtcclxuICB9XHJcbiAgZWRpdE9LKCkge1xyXG4gICAgaWYgKHRoaXMuY29tcFJlZikge1xyXG4gICAgICBjb25zdCByZSA9IHRoaXMuY29tcFJlZi5pbnN0YW5jZS5nZXRQZXJmb3JtZXJzKCk7XHJcbiAgICAgIGlmIChyZS51c2VyUGVyZm9ybWVycyAmJiByZS51c2VyUGVyZm9ybWVycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgcmUudXNlclBlcmZvcm1lcnMuZm9yRWFjaChwID0+IHtcclxuICAgICAgICAgIGNvbnN0IGkgPSB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby5wZXJmb3JtZXJzLmZpbmRJbmRleChhID0+IChhLmlkID09PSBwLmlkIHx8IGEucGVyZm9ybWVySWQgPT09IHAucGVyZm9ybWVySWQpKTtcclxuICAgICAgICAgIGlmIChpID4gLTEpIHtcclxuICAgICAgICAgICAgY29uc3QgaWQgPSB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby5wZXJmb3JtZXJzW2ldLmlkO1xyXG4gICAgICAgICAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby5wZXJmb3JtZXJzW2ldID0gcDtcclxuICAgICAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnVpc3RhdGUucGVyZm9ybWVyc0xpc3QuZmluZEluZGV4KGEgPT4gYS5pZCA9PT0gaWQpO1xyXG4gICAgICAgICAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVyc0xpc3RbaW5kZXhdID0gcDtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmVkaXRTdGF0ZSA9PT0gJ2VkaXQnKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5yZW1vdmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby5wZXJmb3JtZXJzLnB1c2gocCk7XHJcbiAgICAgICAgICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJzTGlzdCA9IHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJzTGlzdC5jb25jYXQoW3BdKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVyc0xpc3RcclxuICAgICAgICAgIC5maWx0ZXIocCA9PiBwLnR5cGUgPT09IHRoaXMudWlzdGF0ZS50eXBlQ29sbGVjdGlvblswXS52YWx1ZSB8fCBwLnR5cGUgPT09IHRoaXMudWlzdGF0ZS50eXBlQ29sbGVjdGlvblsxXS52YWx1ZSApXHJcbiAgICAgICAgICAubWFwKHBlcmZvcm1lciA9PiBwZXJmb3JtZXIuZGVzY3JpcHRpb24gPVxyXG4gICAgICAgICAgICB0aGlzLnBlcmZvcm1lckRlc2NyaXB0aW9uKHBlcmZvcm1lciBhcyBhbnkpKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAocmUucG9zaXRpb25QZXJmb3JtZXJzICYmIHJlLnBvc2l0aW9uUGVyZm9ybWVycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgcmUucG9zaXRpb25QZXJmb3JtZXJzLmZvckVhY2gocCA9PiB7XHJcblxyXG4gICAgICAgICAgLy8gKDEpaWTkuIDoh7TvvIzkuLrnvJbovpHlspfkvY3vvJvvvIgy77yJcGVyZm9ybWlk5LiA6Ie077yM5paw5aKe55qE55So5oi377yM5bKX5L2N5bey5a2Y5ZyoXHJcbiAgICAgICAgICBjb25zdCBpID0gdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8ucGVyZm9ybWVycy5maW5kSW5kZXgoYSA9PiAoYS5pZCA9PT0gcC5pZCB8fCBhLnBlcmZvcm1lcklkID09PSBwLnBlcmZvcm1lcklkKSk7XHJcbiAgICAgICAgICBpZiAoaSA+IC0xKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlkID0gdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8ucGVyZm9ybWVyc1tpXS5pZDtcclxuICAgICAgICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8ucGVyZm9ybWVyc1tpXSA9IHA7XHJcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy51aXN0YXRlLnBlcmZvcm1lcnNMaXN0LmZpbmRJbmRleChhID0+IGEuaWQgPT09IGlkKTtcclxuICAgICAgICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lcnNMaXN0W2luZGV4XSA9IHA7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby5wZXJmb3JtZXJzLnB1c2gocCk7XHJcbiAgICAgICAgICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJzTGlzdCA9IHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJzTGlzdC5jb25jYXQoW3BdKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVyc0xpc3RcclxuICAgICAgICAgIC5maWx0ZXIocCA9PiBwLnR5cGUgPT09IHRoaXMudWlzdGF0ZS50eXBlQ29sbGVjdGlvblswXS52YWx1ZSB8fCBwLnR5cGUgPT09IHRoaXMudWlzdGF0ZS50eXBlQ29sbGVjdGlvblsxXS52YWx1ZSApXHJcbiAgICAgICAgICAubWFwKHBlcmZvcm1lciA9PiBwZXJmb3JtZXIuZGVzY3JpcHRpb24gPVxyXG4gICAgICAgICAgICB0aGlzLnBlcmZvcm1lckRlc2NyaXB0aW9uKHBlcmZvcm1lciBhcyBhbnkpKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAocmUuY29tcG9uZW50ICYmIHJlLmNvbXBvbmVudC5tZXRhZGF0YUlkICYmIHJlLmNvbXBvbmVudC5tZXRob2RDb2RlKSB7XHJcbiAgICAgICAgY29uc3QgaSA9IHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLmNvbXBvbmVudHMuZmluZEluZGV4KGEgPT4gYS5pZCA9PT0gcmUuY29tcG9uZW50LmlkKTtcclxuICAgICAgICBpZiAoaSA+IC0xKSB7XHJcbiAgICAgICAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby5jb21wb25lbnRzW2ldID0gcmUuY29tcG9uZW50O1xyXG4gICAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnVpc3RhdGUucGVyZm9ybWVyc0xpc3QuZmluZEluZGV4KGEgPT4gYS5pZCA9PT0gcmUuY29tcG9uZW50LmlkKTtcclxuICAgICAgICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJzTGlzdFtpbmRleF0gPSB7XHJcbiAgICAgICAgICAgIGlkOiByZS5jb21wb25lbnQuaWQsXHJcbiAgICAgICAgICAgIHR5cGU6ICd3Zi5Db21wb25lbnRQYXJ0aWNpcGFudCcsXHJcbiAgICAgICAgICAgIHBlcmZvcm1lck5hbWU6IHJlLmNvbXBvbmVudC5uYW1lLFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy5jb21wb25lbnREZXNjcmlwdGlvbihyZS5jb21wb25lbnQpLFxyXG4gICAgICAgICAgICBjb25kaXRpb246IHJlLmNvbXBvbmVudC5jb25kaXRpb25cclxuICAgICAgICAgIH07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLmNvbXBvbmVudHMucHVzaChyZS5jb21wb25lbnQpO1xyXG4gICAgICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lcnNMaXN0LnB1c2goe1xyXG4gICAgICAgICAgICBpZDogcmUuY29tcG9uZW50LmlkLFxyXG4gICAgICAgICAgICB0eXBlOiAnd2YuQ29tcG9uZW50UGFydGljaXBhbnQnLFxyXG4gICAgICAgICAgICBwZXJmb3JtZXJOYW1lOiByZS5jb21wb25lbnQubmFtZSxcclxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHRoaXMuY29tcG9uZW50RGVzY3JpcHRpb24ocmUuY29tcG9uZW50KSxcclxuICAgICAgICAgICAgY29uZGl0aW9uOiAnJ1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGlmIChyZS5yZXBvcnRpbmdMaW5lICYmIHJlLnJlcG9ydGluZ0xpbmUucmVwb3J0aW5nTGluZURlZklkICYmIHJlLnJlcG9ydGluZ0xpbmUuZGltZW5zaW9uKSB7XHJcbiAgICAgICAgaWYocmUucmVwb3J0aW5nTGluZS5yZXBvcnRpbmdSZWZlck9iamVjdCA9PT0gJ2RlcHQnICYmICFyZS5yZXBvcnRpbmdMaW5lLnJlZk9yZ0lkKXtcclxuICAgICAgICAgIHRoaXMuaXNDbG9zZSA9IGZhbHNlO1xyXG4gICAgICAgICAgdGhpcy5tZXNzYWdlLmluZm8oJ+KAnOmDqOmXqOKAneaxh+aKpeWFs+ezu+exu+Wei+S4i++8jOWPgueFp+S6uuaJgOWcqOmDqOmXqOS4jeiDveS4uuepuicpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocmUucmVwb3J0aW5nTGluZS5yZXBvcnRpbmdSZWZlck9iamVjdCAhPT0gJ2RlcHQnICYmICFyZS5yZXBvcnRpbmdMaW5lLnJlZlVzZXJJZCAmJiAhcmUucmVwb3J0aW5nTGluZS5yZWZFbXBsb3llZUlkKSB7IC8vIOeUqOaIt+WPiuWFtuS7luS6uuWRmOaxh+aKpeWvueixoeexu+Wei++8jOWPgueFp+eUqOaIt+WSjOWPgueFp+WRmOW3peS4jeiDveWFqOmDqOS4uuepulxyXG4gICAgICAgICAgdGhpcy5pc0Nsb3NlID0gZmFsc2U7XHJcbiAgICAgICAgICB0aGlzLm1lc3NhZ2UuaW5mbygn4oCc55So5oi34oCd5rGH5oql5YWz57O757G75Z6L5LiL77yM5Y+C54Wn5Lq65LiN6IO95Li656m6Jyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuaXNDbG9zZSA9IHRydWU7XHJcbiAgICAgICAgICB0aGlzLmFkZFJlcG9ydGluZ0xpbmVEYXRhKHJlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHJlLm1hdHJpeCAmJiByZS5tYXRyaXgubWF0cml4RGVmSWQpIHtcclxuICAgICAgICBpZighcmUubWF0cml4LmNvbmRpdGlvbkZpZWxkMSAmJiAhcmUubWF0cml4LmNvbmRpdGlvbkZpZWxkMiAmJiAhcmUubWF0cml4LmNvbmRpdGlvbkZpZWxkMyl7XHJcbiAgICAgICAgICB0aGlzLmlzQ2xvc2UgPSBmYWxzZTtcclxuICAgICAgICAgIHRoaXMubWVzc2FnZS5pbmZvKCfmnaHku7blrZfmrrXoh7PlsJHopoHlrZjlnKjkuIDkuKonKTtcclxuICAgICAgICB9IGVsc2UgaWYoIXJlLm1hdHJpeC5kYXRhRmllbGRBbGlhcyl7XHJcbiAgICAgICAgICB0aGlzLmlzQ2xvc2UgPSBmYWxzZTtcclxuICAgICAgICAgIHRoaXMubWVzc2FnZS5pbmZvKCfmlbDmja7lrZfmrrXkuI3og73kuLrnqbonKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5pc0Nsb3NlID0gdHJ1ZTtcclxuICAgICAgICAgIHRoaXMuYWRkTWF0cml4RGF0YShyZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuZ3JpZC5sb2FkRGF0YSh0aGlzLnVpc3RhdGUucGVyZm9ybWVyc0xpc3QpO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuZWRpdERpYWxvZyAmJiB0aGlzLmlzQ2xvc2UpIHtcclxuICAgICAgdGhpcy5lZGl0RGlhbG9nLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHByaXZhdGUgYWRkUmVwb3J0aW5nTGluZURhdGEocmU6IGFueSl7XHJcbiAgICBjb25zdCBpID0gdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8ucmVwb3J0aW5nTGluZXMuZmluZEluZGV4KGEgPT4gYS5pZCA9PT0gcmUucmVwb3J0aW5nTGluZS5pZCk7XHJcbiAgICBpZiAoaSA+IC0xKSB7XHJcbiAgICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLnJlcG9ydGluZ0xpbmVzW2ldID0gcmUucmVwb3J0aW5nTGluZTtcclxuICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnVpc3RhdGUucGVyZm9ybWVyc0xpc3QuZmluZEluZGV4KGEgPT4gYS5pZCA9PT0gcmUucmVwb3J0aW5nTGluZS5pZCk7XHJcbiAgICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJzTGlzdFtpbmRleF0gPSB7XHJcbiAgICAgICAgaWQ6IHJlLnJlcG9ydGluZ0xpbmUuaWQsXHJcbiAgICAgICAgdHlwZTogJ3dmLlJlcG9ydGluZ0xpbmVQYXJ0aWNpcGFudCcsXHJcbiAgICAgICAgcGVyZm9ybWVyTmFtZTogcmUucmVwb3J0aW5nTGluZS5yZXBvcnRpbmdMaW5lRGVmTmFtZSArICctJyArIHJlLnJlcG9ydGluZ0xpbmUuZGltZW5zaW9uLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLnJlcG9ydGluZ0xpbmVEZXNjcmlwdGlvbihyZS5yZXBvcnRpbmdMaW5lKSxcclxuICAgICAgICBjb25kaXRpb246IHJlLnJlcG9ydGluZ0xpbmUuY29uZGl0aW9uXHJcbiAgICAgIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBmb3IoY29uc3QgcmVwb3J0aW5nTGluZURhdGEgb2YgdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8ucmVwb3J0aW5nTGluZXMpe1xyXG4gICAgICAgIGlmKHJlcG9ydGluZ0xpbmVEYXRhLnJlcG9ydGluZ0xpbmVEZWZJZCA9PT0gcmUucmVwb3J0aW5nTGluZS5kZWZpbml0aW9uSWQgJiZcclxuICAgICAgICAgIHJlcG9ydGluZ0xpbmVEYXRhLmRpbWVuc2lvbiA9PT0gcmUucmVwb3J0aW5nTGluZS5kaW1lbnNpb24gJiZcclxuICAgICAgICAgIHJlcG9ydGluZ0xpbmVEYXRhLnJlZlVzZXJJZCA9PT0gcmUucmVwb3J0aW5nTGluZS5yZWZlclVzZXJJZCAmJlxyXG4gICAgICAgICAgcmVwb3J0aW5nTGluZURhdGEucmVmRW1wbG95ZWVJZCA9PT0gcmUucmVwb3J0aW5nTGluZS5yZWZFbXBsb3llZUlkICYmXHJcbiAgICAgICAgICByZXBvcnRpbmdMaW5lRGF0YS5yZWZPcmdJZCA9PT0gcmUucmVwb3J0aW5nTGluZS5yZWZlckRlcHRJZFxyXG4gICAgICAgICl7XHJcbiAgICAgICAgICB0aGlzLm1lc3NhZ2UuZXJyb3IoJ+ivpeaxh+aKpeWFs+ezu+W3sue7j+i/m+ihjOi/h+mFjee9ricpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby5yZXBvcnRpbmdMaW5lcy5wdXNoKHJlLnJlcG9ydGluZ0xpbmUpO1xyXG4gICAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVyc0xpc3QucHVzaCh7XHJcbiAgICAgICAgaWQ6IHJlLnJlcG9ydGluZ0xpbmUuaWQsXHJcbiAgICAgICAgdHlwZTogJ3dmLlJlcG9ydGluZ0xpbmVQYXJ0aWNpcGFudCcsXHJcbiAgICAgICAgcGVyZm9ybWVyTmFtZTogcmUucmVwb3J0aW5nTGluZS5yZXBvcnRpbmdMaW5lRGVmTmFtZSArICctJyArIHJlLnJlcG9ydGluZ0xpbmUuZGltZW5zaW9uLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLnJlcG9ydGluZ0xpbmVEZXNjcmlwdGlvbihyZS5yZXBvcnRpbmdMaW5lKSxcclxuICAgICAgICBjb25kaXRpb246IHJlLnJlcG9ydGluZ0xpbmUuY29uZGl0aW9uXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuICBwcml2YXRlIGFkZE1hdHJpeERhdGEocmU6IGFueSl7XHJcbiAgICBjb25zdCBpID0gdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8ubWF0cml4UGFydGljaXBhbnRzLmZpbmRJbmRleChhID0+IGEuaWQgPT09IHJlLm1hdHJpeC5pZCk7XHJcbiAgICBpZiAoaSA+IC0xKSB7XHJcbiAgICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLm1hdHJpeFBhcnRpY2lwYW50c1tpXSA9IHJlLm1hdHJpeDtcclxuICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnVpc3RhdGUucGVyZm9ybWVyc0xpc3QuZmluZEluZGV4KGEgPT4gYS5pZCA9PT0gcmUubWF0cml4LmlkKTtcclxuICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lcnNMaXN0W2luZGV4XSA9IHtcclxuICAgICAgICBpZDogcmUubWF0cml4LmlkLFxyXG4gICAgICAgIHR5cGU6ICd3Zi5NYXRyaXhQYXJ0aWNpcGFudCcsXHJcbiAgICAgICAgcGVyZm9ybWVyTmFtZTogcmUubWF0cml4Lm1hdHJpeERlZk5hbWUgKyAnLScgKyByZS5tYXRyaXguZGF0YUZpZWxkQWxpYXMsXHJcbiAgICAgICAgZGVzY3JpcHRpb246IHRoaXMubWF0cml4RGVzY3JpcHRpb24ocmUubWF0cml4KSxcclxuICAgICAgICBjb25kaXRpb246IHJlLm1hdHJpeC5jb25kaXRpb25cclxuICAgICAgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGZvcihjb25zdCBtYXRyaXhEYXRhIG9mIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLm1hdHJpeFBhcnRpY2lwYW50cyl7XHJcbiAgICAgICAgaWYobWF0cml4RGF0YS5tYXRyaXhEZWZJZCA9PT0gcmUubWF0cml4Lm1hdHJpeERlZklkICYmXHJcbiAgICAgICAgICBtYXRyaXhEYXRhLmNvbmRpdGlvbkZpZWxkMSA9PT0gcmUubWF0cml4LmNvbmRpdGlvbkZpZWxkMSAmJlxyXG4gICAgICAgICAgbWF0cml4RGF0YS5jb25kaXRpb25GaWVsZDIgPT09IHJlLm1hdHJpeC5jb25kaXRpb25GaWVsZDIgJiZcclxuICAgICAgICAgIG1hdHJpeERhdGEuY29uZGl0aW9uRmllbGQzID09PSByZS5tYXRyaXguY29uZGl0aW9uRmllbGQzICYmXHJcbiAgICAgICAgICBtYXRyaXhEYXRhLmRhdGFGaWVsZEFsaWFzID09PSByZS5tYXRyaXguZGF0YUZpZWxkQWxpYXNcclxuICAgICAgICApe1xyXG4gICAgICAgICAgdGhpcy5tZXNzYWdlLmVycm9yKCfor6Xnn6npmLXlt7Lnu4/ov5vooYzov4fphY3nva4nKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8ubWF0cml4UGFydGljaXBhbnRzLnB1c2gocmUubWF0cml4KTtcclxuICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lcnNMaXN0LnB1c2goe1xyXG4gICAgICAgIGlkOiByZS5tYXRyaXguaWQsXHJcbiAgICAgICAgdHlwZTogJ3dmLk1hdHJpeFBhcnRpY2lwYW50JyxcclxuICAgICAgICBwZXJmb3JtZXJOYW1lOiByZS5tYXRyaXgubWF0cml4RGVmTmFtZSArICctJyArIHJlLm1hdHJpeC5kYXRhRmllbGRBbGlhcyxcclxuICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy5tYXRyaXhEZXNjcmlwdGlvbihyZS5tYXRyaXgpLFxyXG4gICAgICAgIGNvbmRpdGlvbjogcmUubWF0cml4LmNvbmRpdGlvblxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcbiAgZWRpdENhbmNlbCgpIHtcclxuICAgIGlmICh0aGlzLmVkaXREaWFsb2cpIHtcclxuICAgICAgdGhpcy5lZGl0RGlhbG9nLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHBhcnRpY2lwYW50T3B0aW9uc1NldCgpIHtcclxuICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLm9wdGlvbnMgPSB0aGlzLm9wdGlvbnMuZ2V0UGVyZm9ybWVyT3B0aW9ucygpO1xyXG4gICAgdGhpcy5vcHRpb25zRGlhbG9nLmNsb3NlKCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHBlcmZvcm1lckRlc2NyaXB0aW9uKHBlcmZvcm1lcjogUGVyZm9ybWVyRW50aXR5KSB7XHJcbiAgICBpZiAocGVyZm9ybWVyLnR5cGUgPT09ICd3Zi5Vc2VyUGFydGljaXBhbnQnKSB7XHJcbiAgICAgIGlmIChwZXJmb3JtZXIudGFnID09PSAnZXhwcmVzc2lvbicpIHtcclxuICAgICAgICByZXR1cm4gcGVyZm9ybWVyLnBlcmZvcm1lcklkO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmIChwZXJmb3JtZXIub3JnTmFtZSkge1xyXG4gICAgICAgICAgcmV0dXJuIGDpg6jpl6jvvJoke3BlcmZvcm1lci5vcmdOYW1lfWA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAocGVyZm9ybWVyLnR5cGUgPT09ICd3Zi5Qb3NpdGlvblBhcnRpY2lwYW50Jykge1xyXG4gICAgICBpZiAoKHBlcmZvcm1lciBhcyBQb3NpdGlvblBlcmZvcm1lckVudGl0eSkucG9zaXRpb25UeXBlID09PSAnMScpIHtcclxuICAgICAgICBpZiAocGVyZm9ybWVyLm9yZ0lkKSB7XHJcbiAgICAgICAgICByZXR1cm4gYOWyl+S9jeexu+Wei++8mumAmueUqOWyl+S9je+8jOmDqOmXqO+8miR7cGVyZm9ybWVyLm9yZ0lkfWA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHJldHVybiBg5bKX5L2N57G75Z6L77ya6YCa55So5bKX5L2NYDtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSBpZiAoKHBlcmZvcm1lciBhcyBQb3NpdGlvblBlcmZvcm1lckVudGl0eSkucG9zaXRpb25UeXBlID09PSAnMCcpIHtcclxuICAgICAgICByZXR1cm4gJ+Wyl+S9jeexu+Wei++8mue7hOe7h+Wyl+S9jSc7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbiAgcHJpdmF0ZSBjb21wb25lbnREZXNjcmlwdGlvbihjb21wb25lbnQ6IENvbXBvbmVudFBlcmZvcm1lcikge1xyXG4gICAgbGV0IGRlcyA9IGDmnoTku7bvvJoke2NvbXBvbmVudC5uYW1lfSzlj4LmlbDvvJp7YDtcclxuICAgIGlmIChjb21wb25lbnQuYWN0dWFsUGFyYW1ldGVycyAmJiBjb21wb25lbnQuYWN0dWFsUGFyYW1ldGVycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGNvbXBvbmVudC5hY3R1YWxQYXJhbWV0ZXJzLmZvckVhY2gocCA9PiB7XHJcbiAgICAgICAgZGVzICs9IGAke3AuY29kZX3vvJoke3AudmFsdWV977yMYDtcclxuICAgICAgfSk7XHJcbiAgICAgIGRlcyA9IGRlcy5zdWJzdHJpbmcoMCwgZGVzLmxlbmd0aCAtIDEpO1xyXG4gICAgfVxyXG4gICAgZGVzICs9ICd9JztcclxuICAgIHJldHVybiBkZXM7XHJcbiAgfVxyXG4gIHByaXZhdGUgcmVwb3J0aW5nTGluZURlc2NyaXB0aW9uKHJlcG9ydGluZ0xpbmU6IFJlcG9ydGluZ0xpbmVEYXRhRW50aXR5KSB7XHJcbiAgICBsZXQgZGVzY3JpcHRpb24gPSAnJztcclxuICAgIGlmKHJlcG9ydGluZ0xpbmUucmVmVXNlcklkKXtcclxuICAgICAgZGVzY3JpcHRpb24gKz0gYOWPgueFp+S6uu+8miR7cmVwb3J0aW5nTGluZS5yZWZVc2VySWR9YDtcclxuICAgIH1cclxuICAgIGlmKHJlcG9ydGluZ0xpbmUucmVmRW1wbG95ZWVJZCl7XHJcbiAgICAgIGRlc2NyaXB0aW9uICs9IGDlj4LnhafkurrvvJoke3JlcG9ydGluZ0xpbmUucmVmRW1wbG95ZWVJZH1gO1xyXG4gICAgfVxyXG4gICAgaWYocmVwb3J0aW5nTGluZS5yZWZPcmdJZCl7XHJcbiAgICAgIGlmKHJlcG9ydGluZ0xpbmUucmVmVXNlcklkKXtcclxuICAgICAgICBkZXNjcmlwdGlvbiArPSBg77yMYDtcclxuICAgICAgfVxyXG4gICAgICBpZihyZXBvcnRpbmdMaW5lLnJlZkVtcGxveWVlSWQpe1xyXG4gICAgICAgIGRlc2NyaXB0aW9uICs9IGDvvIxgO1xyXG4gICAgICB9XHJcbiAgICAgIGRlc2NyaXB0aW9uICs9IGDlj4Lnhafnu4Tnu4fvvJoke3JlcG9ydGluZ0xpbmUucmVmT3JnSWR9YDtcclxuICAgIH1cclxuICAgIHJldHVybiBkZXNjcmlwdGlvbjtcclxuICB9XHJcbiAgcHJpdmF0ZSBtYXRyaXhEZXNjcmlwdGlvbihtYXRyaXg6IE1hdHJpeERhdGFJbmZvRW50aXR5KSB7XHJcbiAgICBsZXQgZGVzY3JpcHRpb24gPSAnJztcclxuICAgIGlmKG1hdHJpeC5jb25kaXRpb25GaWVsZDEpe1xyXG4gICAgICBkZXNjcmlwdGlvbiArPSBg5p2h5Lu2Me+8miR7bWF0cml4LmNvbmRpdGlvbkZpZWxkVGV4dDF977yMYDtcclxuICAgIH1cclxuICAgIGlmKG1hdHJpeC5jb25kaXRpb25GaWVsZDIpe1xyXG4gICAgICBkZXNjcmlwdGlvbiArPSBg5p2h5Lu2Mu+8miR7bWF0cml4LmNvbmRpdGlvbkZpZWxkVGV4dDJ977yMYDtcclxuICAgIH1cclxuICAgIGlmKG1hdHJpeC5jb25kaXRpb25GaWVsZDMpe1xyXG4gICAgICBkZXNjcmlwdGlvbiArPSBg5p2h5Lu2M++8miR7bWF0cml4LmNvbmRpdGlvbkZpZWxkVGV4dDN977yMYDtcclxuICAgIH1cclxuICAgIGlmKG1hdHJpeC5kYXRhRmllbGRBbGlhcyl7XHJcbiAgICAgIGRlc2NyaXB0aW9uICs9IGDmlbDmja7vvJoke21hdHJpeC5kYXRhRmllbGRBbGlhc33vvIxgO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRlc2NyaXB0aW9uLnNsaWNlKDAsIGRlc2NyaXB0aW9uLmxlbmd0aCAtIDEpO1xyXG4gIH1cclxuXHJcbiAgZWRpdENvbmRpdG9uKGU6IGFueSkge1xyXG4gICAgaWYgKHRoaXMuZGVzaWduZXJVSVN0YXRlLnNjaGVtYXMubGVuZ3RoID4gMCkge1xyXG4gICAgICBmb3IgKGNvbnN0IHNjaGVtYSBvZiB0aGlzLmRlc2lnbmVyVUlTdGF0ZS5zY2hlbWFzKSB7XHJcbiAgICAgICAgdGhpcy5leHByLmFkZFNjaGVtYSgnU2NoZW1hJywgc2NoZW1hKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5kZXNpZ25lclVJU3RhdGUuc2NoZW1hc1swXS5lbnRpdHlUeXBlcyAmJiB0aGlzLmRlc2lnbmVyVUlTdGF0ZS5zY2hlbWFzWzBdLmVudGl0eVR5cGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBjb25zdCBlbnRpdHlUeXBlID0gdGhpcy5kZXNpZ25lclVJU3RhdGUuc2NoZW1hc1swXS5lbnRpdHlUeXBlc1swXTtcclxuICAgICAgICB0aGlzLmV4cHIuYWRkSW5qZWN0ZWRFbnRpdHkoZW50aXR5VHlwZS5uYW1lLCAnU2NoZW1hJyxcclxuICAgICAgICAgIGVudGl0eVR5cGUubmFtZSwgSW5qZWN0ZWRUeXBlLkVudGl0eVR5cGUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zdCBjb250ZXh0ID0gbmV3IEFycmF5KCk7XHJcbiAgICBpZiAodGhpcy5kZXNpZ25lclVJU3RhdGUucHJvY0luc3RDb250ZXh0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCB2YXJpYWJsZSBvZiB0aGlzLmRlc2lnbmVyVUlTdGF0ZS5wcm9jSW5zdENvbnRleHQpIHtcclxuICAgICAgICBjb250ZXh0LnB1c2godmFyaWFibGUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5kZXNpZ25lclVJU3RhdGUuZm9ybWFsUGFyYW1ldGVyQ29udGV4dC5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGZvciAoY29uc3QgdmFyaWFibGUgb2YgdGhpcy5kZXNpZ25lclVJU3RhdGUuZm9ybWFsUGFyYW1ldGVyQ29udGV4dCkge1xyXG4gICAgICAgIGlmICghY29udGV4dC5zb21lKGMgPT4gYy5rZXkgPT09IHZhcmlhYmxlLmtleSkpIHtcclxuICAgICAgICAgIGNvbnRleHQucHVzaCh2YXJpYWJsZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5kZXNpZ25lclVJU3RhdGUucGFydGljaXBhbnRDb250ZXh0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCB2YXJpYWJsZSBvZiB0aGlzLmRlc2lnbmVyVUlTdGF0ZS5wYXJ0aWNpcGFudENvbnRleHQpIHtcclxuICAgICAgICBpZiAoIWNvbnRleHQuc29tZShjID0+IGMua2V5ID09PSB2YXJpYWJsZS5rZXkpKSB7XHJcbiAgICAgICAgICBjb250ZXh0LnB1c2godmFyaWFibGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuZGVzaWduZXJVSVN0YXRlLnByb2Nlc3NWYXJpYWJsZUNvbnRleHQubGVuZ3RoID4gMCkge1xyXG4gICAgICBmb3IgKGNvbnN0IHZhcmlhYmxlIG9mIHRoaXMuZGVzaWduZXJVSVN0YXRlLnByb2Nlc3NWYXJpYWJsZUNvbnRleHQpIHtcclxuICAgICAgICBpZiAoIWNvbnRleHQuc29tZShjID0+IGMua2V5ID09PSB2YXJpYWJsZS5rZXkpKSB7XHJcbiAgICAgICAgICBjb250ZXh0LnB1c2godmFyaWFibGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuZGVzaWduZXJVSVN0YXRlLmFjdGl2aXR5Q29tcG9uZW50Q29udGV4dC5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGZvciAoY29uc3QgdmFyaWFibGUgb2YgdGhpcy5kZXNpZ25lclVJU3RhdGUuYWN0aXZpdHlDb21wb25lbnRDb250ZXh0KSB7XHJcbiAgICAgICAgaWYgKCFjb250ZXh0LnNvbWUoYyA9PiBjLmtleSA9PT0gdmFyaWFibGUua2V5KSkge1xyXG4gICAgICAgICAgY29udGV4dC5wdXNoKHZhcmlhYmxlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChjb250ZXh0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCB2IG9mIGNvbnRleHQpIHtcclxuICAgICAgICB0aGlzLmV4cHIuYWRkQ29udGV4dCh2KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgdGhpcy5leHByLmFkZEV4cHJlc3Npb25UZXh0KGUuaW5zdGFuY2UudmFsdWUpO1xyXG4gICAgdGhpcy5leHByLnNldEVkaXRQYXR0ZXJuKEV4cHJFZGl0TW9kZS5Db25kaXRpb25hbCk7IC8vIOm7mOiupOaJk+W8gOeugOaYk+ihqOi+vuW8j+e8lui+keWZqFxyXG4gICAgdGhpcy5leHByLmJ1aWxkRXhwcmVzc2lvbigpLnRoZW4oKGNvbmQ6IHN0cmluZykgPT4ge1xyXG4gICAgICBpZiAodGhpcy5ncmlkLnNlbGVjdGVkUm93LmRhdGEudHlwZSA9PT0gJ3dmLkNvbXBvbmVudFBhcnRpY2lwYW50Jykge1xyXG4gICAgICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLmNvbXBvbmVudHMuZmluZChjID0+IGMuaWQgPT09IHRoaXMuZ3JpZC5zZWxlY3RlZFJvdy5kYXRhLmlkKS5jb25kaXRpb24gPSBjb25kO1xyXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuZ3JpZC5zZWxlY3RlZFJvdy5kYXRhLnR5cGUgPT09ICd3Zi5SZXBvcnRpbmdMaW5lUGFydGljaXBhbnQnKSB7XHJcbiAgICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8ucmVwb3J0aW5nTGluZXMuZmluZChjID0+IGMuaWQgPT09IHRoaXMuZ3JpZC5zZWxlY3RlZFJvdy5kYXRhLmlkKS5jb25kaXRpb24gPSBjb25kO1xyXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuZ3JpZC5zZWxlY3RlZFJvdy5kYXRhLnR5cGUgPT09ICd3Zi5NYXRyaXhQYXJ0aWNpcGFudCcpe1xyXG4gICAgICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLm1hdHJpeFBhcnRpY2lwYW50cy5maW5kKGMgPT4gYy5pZCA9PT0gdGhpcy5ncmlkLnNlbGVjdGVkUm93LmRhdGEuaWQpLmNvbmRpdGlvbiA9IGNvbmQ7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8ucGVyZm9ybWVycy5maW5kKHAgPT4gcC5pZCA9PT0gdGhpcy5ncmlkLnNlbGVjdGVkUm93LmRhdGEuaWQpLmNvbmRpdGlvbiA9IGNvbmQ7XHJcbiAgICAgIH1cclxuICAgICAgZS5mb3JtQ29udHJvbC5zZXRWYWx1ZShjb25kKTtcclxuICAgICAgZS5pbnN0YW5jZS5jZC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFmdGVyRWRpdCA9IChyb3dJbmRleDogbnVtYmVyLCByb3dEYXRhOiBhbnksIGNvbHVtbj86IERhdGFDb2x1bW4pID0+IHtcclxuICAgIHJldHVybiBvZih0cnVlKTtcclxuICB9XHJcblxyXG4gIHNlbGVjdENoYW5nZWQoZGF0YTogYW55KSB7XHJcbiAgICB0aGlzLnVpc3RhdGUuY3VyUGVyZm9ybWVyID0gZGF0YS5kYXRhO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBHZXRPcmdhbml6YXRpb25UeXBlKCkge1xyXG4gICAgY29uc3QgdXJsID0gJy9hcGkvcnVudGltZS9zeXMvdjEuMC9hdXRoZmllbGRzL2dsb2JhbGF1dGhmaWVsZHMnO1xyXG4gICAgdGhpcy5odHRwLmdldCh1cmwpXHJcbiAgICAgIC5zdWJzY3JpYmUoKGRhdGE6IGFueSkgPT4gdGhpcy5kZXNpZ25lclVJU3RhdGUub3JnVHlwZUNvbGxlY3Rpb24gPSBkYXRhLm1hcChkID0+ICh7IHZhbHVlOiBkLmlkLCB0ZXh0OiBkLm5hbWUgfSkpKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0TWF0cml4Q29uZmlnKCk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICBjb25zdCB1cmwgPSBgL2FwaS9ydW50aW1lL3dmL3YxLjAvZ2VuZXJhbENvbmZpZy9Jc19FbmFibGVNYXRyaXhgO1xyXG4gICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQodXJsKTtcclxuICB9XHJcbn1cclxuZXhwb3J0IGNsYXNzIFBlcmZvcm1lckNvbnZlcnRlciBpbXBsZW1lbnRzIFR5cGVDb252ZXJ0ZXIge1xyXG4gIGNvbnN0cnVjdG9yKCkgeyB9XHJcblxyXG4gIGNvbnZlcnRUbyhkYXRhOiBhbnkpOiBzdHJpbmcge1xyXG4gICAgaWYgKChkYXRhLnBlcmZvcm1lcnMgJiYgZGF0YS5wZXJmb3JtZXJzLmxlbmd0aCA+IDApXHJcbiAgICAgIHx8IChkYXRhLmNvbXBvbmVudHMgJiYgZGF0YS5jb21wb25lbnRzLmxlbmd0aCA+IDApXHJcbiAgICAgIHx8IChkYXRhLnJlcG9ydGluZ0xpbmVzICYmIGRhdGEucmVwb3J0aW5nTGluZXMubGVuZ3RoID4gMClcclxuICAgICAgfHwgKGRhdGEubWF0cml4UGFydGljaXBhbnRzICYmIGRhdGEubWF0cml4UGFydGljaXBhbnRzLmxlbmd0aCA+IDApXHJcbiAgICApIHtcclxuICAgICAgcmV0dXJuICfvvIjlt7Lorr7nva7vvIknO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuICfvvIjmnKrorr7nva7vvIknO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iXX0=