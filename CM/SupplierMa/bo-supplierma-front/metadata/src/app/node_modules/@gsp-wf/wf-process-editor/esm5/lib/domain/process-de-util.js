/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Injectable } from '@angular/core';
var ProcessDeUtil = /** @class */ (function () {
    function ProcessDeUtil() {
    }
    /**
     * @return {?}
     */
    ProcessDeUtil.GenerateElementId = /**
     * @return {?}
     */
    function () {
        ++(this.generatedId);
        return '_' + this.Decimal2String(this.generatedId);
    };
    /**
     * @private
     * @param {?} a
     * @return {?}
     */
    ProcessDeUtil.Decimal2String = /**
     * @private
     * @param {?} a
     * @return {?}
     */
    function (a) {
        /** @type {?} */
        var c;
        /** @type {?} */
        var b = '';
        do {
            c = a % this.exponent, b = this.keys[c] + b, a = (a - c) / this.exponent;
        } while (a > 0);
        return b;
    };
    /**
     * 创建内码
     */
    /**
     * 创建内码
     * @return {?}
     */
    ProcessDeUtil.createNM = /**
     * 创建内码
     * @return {?}
     */
    function () {
        /**
         * @return {?}
         */
        function S4() {
            return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);
        }
        return (S4() + S4() + '-' + S4() + '-' + S4() + '-' + S4() + '-' + S4() + S4() + S4());
        // return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {
        //     const r = Math.random() * 16 | 0, v = c === 'x' ? r : (r & 0x3 | 0x8);
        //     return v.toString(16);
        // });
    };
    /**
     * @return {?}
     */
    ProcessDeUtil.prototype.getProcessDesignerRouter = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var url = 'processList';
        return url;
    };
    // 获取流程分类webapi
    // 获取流程分类webapi
    /**
     * @return {?}
     */
    ProcessDeUtil.prototype.getFlowFormWebApi = 
    // 获取流程分类webapi
    /**
     * @return {?}
     */
    function () {
        return '/api/runtime/wf/v1.0/flowForm';
    };
    // 获取参数列表webapi
    // 获取参数列表webapi
    /**
     * @return {?}
     */
    ProcessDeUtil.prototype.getFormalParametersWebApi = 
    // 获取参数列表webapi
    /**
     * @return {?}
     */
    function () {
        return '/api/runtime/wf/v1.0/formalParameter';
    };
    // 获取运行时元数据webapi
    // 获取运行时元数据webapi
    /**
     * @return {?}
     */
    ProcessDeUtil.prototype.getMetaDataRUWebApi = 
    // 获取运行时元数据webapi
    /**
     * @return {?}
     */
    function () {
        return '/api/runtime/lcm/v1.0/rt-metadatas/';
    };
    // 获取流程构件webapi
    // 获取流程构件webapi
    /**
     * @return {?}
     */
    ProcessDeUtil.prototype.getBizComponentsWebApi = 
    // 获取流程构件webapi
    /**
     * @return {?}
     */
    function () {
        return '/api/runtime/wf/v1.0/bizComponent';
    };
    // 基于流程分类获取表单定义
    // 基于流程分类获取表单定义
    /**
     * @return {?}
     */
    ProcessDeUtil.prototype.getExcuteFormsWebApi = 
    // 基于流程分类获取表单定义
    /**
     * @return {?}
     */
    function () {
        return '/api/runtime/wf/v1.0/excuteForm';
    };
    // 获取设计时流程定义WebAPi
    // 获取设计时流程定义WebAPi
    /**
     * @return {?}
     */
    ProcessDeUtil.prototype.getProcessDefinitionWebApi = 
    // 获取设计时流程定义WebAPi
    /**
     * @return {?}
     */
    function () {
        return '/api/runtime/wf/v1.0/dtProcDefs';
    };
    // 判断是否允许删除流程定义的api
    // 判断是否允许删除流程定义的api
    /**
     * @return {?}
     */
    ProcessDeUtil.prototype.getCheckExistActiveProcDefApi = 
    // 判断是否允许删除流程定义的api
    /**
     * @return {?}
     */
    function () {
        return '/api/runtime/wf/v1.0/procDefs/checkExistActiveProcDef';
    };
    /**
     * 获取业务活动webApi
     */
    /**
     * 获取业务活动webApi
     * @param {?} ffId
     * @return {?}
     */
    ProcessDeUtil.prototype.getBizActivityWebApi = /**
     * 获取业务活动webApi
     * @param {?} ffId
     * @return {?}
     */
    function (ffId) {
        return "/api/runtime/wf/v1.0/bizActivity?flowFormKey=" + ffId;
    };
    /**
     * @return {?}
     */
    ProcessDeUtil.prototype.getProcDefKeyWebApi = /**
     * @return {?}
     */
    function () {
        return '/api/runtime/wf/v1.0/procDefs/processDefinitionKeys';
    };
    // /**
    //  * 业务活动构件webApi
    //  */
    // getBizActCptWebApi() {
    //     return '/api/runtime/wf/v1.0/BizActivities/GetComponents';
    // }
    /**
     * 发布流程api
     */
    // /**
    //  * 业务活动构件webApi
    //  */
    // getBizActCptWebApi() {
    //     return '/api/runtime/wf/v1.0/BizActivities/GetComponents';
    // }
    /**
     * 发布流程api
     * @return {?}
     */
    ProcessDeUtil.prototype.deployWebApi = 
    // /**
    //  * 业务活动构件webApi
    //  */
    // getBizActCptWebApi() {
    //     return '/api/runtime/wf/v1.0/BizActivities/GetComponents';
    // }
    /**
     * 发布流程api
     * @return {?}
     */
    function () {
        return '/api/runtime/wf/v1.0/procDefs/deploy';
    };
    /**
     * 保存流程api
     */
    /**
     * 保存流程api
     * @return {?}
     */
    ProcessDeUtil.prototype.saveWebApi = /**
     * 保存流程api
     * @return {?}
     */
    function () {
        return '/api/runtime/wf/v1.0/DTProcessDefinitions/SaveBpmnModel';
    };
    /**
     * 获取审批动作webapi
     */
    /**
     * 获取审批动作webapi
     * @return {?}
     */
    ProcessDeUtil.prototype.getApprovalActionWebApi = /**
     * 获取审批动作webapi
     * @return {?}
     */
    function () {
        return '/api/runtime/wf/v1.0/approvalAction';
    };
    /**
     * 获取运行时流程定义WebAPi
     */
    /**
     * 获取运行时流程定义WebAPi
     * @return {?}
     */
    ProcessDeUtil.prototype.getRTProcessDefinitionWebApi = /**
     * 获取运行时流程定义WebAPi
     * @return {?}
     */
    function () {
        return '/api/runtime/wf/v1.0/procDefs';
    };
    /**
     * @param {?} data
     * @param {?} code
     * @return {?}
     */
    ProcessDeUtil.prototype.getValue = /**
     * @param {?} data
     * @param {?} code
     * @return {?}
     */
    function (data, code) {
        if (!code) {
            return '';
        }
        /** @type {?} */
        var resultVal = '';
        if (code.indexOf('.') === -1) {
            resultVal = data[code];
        }
        else {
            resultVal = code.split('.').reduce((/**
             * @param {?} obj
             * @param {?} key
             * @return {?}
             */
            function (obj, key) {
                if (obj) {
                    return obj[key];
                }
                else {
                    return null;
                }
            }), data);
        }
        return resultVal;
    };
    /**
     * 转换
     * @param jsonObj Object
     */
    /**
     * 转换
     * @param {?} jsonObj Object
     * @return {?}
     */
    ProcessDeUtil.prototype.toUpperCase = /**
     * 转换
     * @param {?} jsonObj Object
     * @return {?}
     */
    function (jsonObj) {
        var e_1, _a;
        if (typeof (jsonObj) === 'object') {
            try {
                for (var _b = tslib_1.__values(Object.keys(jsonObj)), _c = _b.next(); !_c.done; _c = _b.next()) {
                    var key = _c.value;
                    jsonObj[key.substring(0, 1).toUpperCase() + key.substring(1)] = jsonObj[key];
                    delete (jsonObj[key]);
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                }
                finally { if (e_1) throw e_1.error; }
            }
        }
        return jsonObj;
    };
    /**
     * @param {?} jsonObj
     * @return {?}
     */
    ProcessDeUtil.prototype.toLowCase = /**
     * @param {?} jsonObj
     * @return {?}
     */
    function (jsonObj) {
        var e_2, _a;
        if (typeof (jsonObj) === 'object') {
            try {
                for (var _b = tslib_1.__values(Object.keys(jsonObj)), _c = _b.next(); !_c.done; _c = _b.next()) {
                    var key = _c.value;
                    if ((key.substring(0, 1).toLowerCase() + key.substring(1)) !== key) {
                        jsonObj[key.substring(0, 1).toLowerCase() + key.substring(1)] = jsonObj[key];
                        delete (jsonObj[key]);
                    }
                }
            }
            catch (e_2_1) { e_2 = { error: e_2_1 }; }
            finally {
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                }
                finally { if (e_2) throw e_2.error; }
            }
        }
        return jsonObj;
    };
    ProcessDeUtil.generatedId = parseInt(Date.now().toString());
    ProcessDeUtil.keys = '0123456789ABCDEFGHJKLMNPQRSTUVWXYZ';
    ProcessDeUtil.exponent = 34;
    ProcessDeUtil.decorators = [
        { type: Injectable }
    ];
    /** @nocollapse */
    ProcessDeUtil.ctorParameters = function () { return []; };
    return ProcessDeUtil;
}());
export { ProcessDeUtil };
if (false) {
    /**
     * @type {?}
     * @private
     */
    ProcessDeUtil.generatedId;
    /**
     * @type {?}
     * @private
     */
    ProcessDeUtil.keys;
    /**
     * @type {?}
     * @private
     */
    ProcessDeUtil.exponent;
    /** @type {?} */
    ProcessDeUtil.prototype.funcId;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvY2Vzcy1kZS11dGlsLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGdzcC13Zi93Zi1wcm9jZXNzLWVkaXRvci8iLCJzb3VyY2VzIjpbImxpYi9kb21haW4vcHJvY2Vzcy1kZS11dGlsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUUzQztJQVNJO0lBQWdCLENBQUM7Ozs7SUFFViwrQkFBaUI7OztJQUF4QjtRQUNJLEVBQUUsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7UUFFckIsT0FBTyxHQUFHLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7SUFDdkQsQ0FBQzs7Ozs7O0lBRWMsNEJBQWM7Ozs7O0lBQTdCLFVBQThCLENBQVM7O1lBQy9CLENBQVM7O1lBQ1QsQ0FBQyxHQUFHLEVBQUU7UUFDVixHQUFHO1lBQ0MsQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQztTQUM1RSxRQUNNLENBQUMsR0FBRyxDQUFDLEVBQUU7UUFDZCxPQUFPLENBQUMsQ0FBQztJQUNiLENBQUM7SUFDRDs7T0FFRzs7Ozs7SUFDSSxzQkFBUTs7OztJQUFmOzs7O1FBQ0ksU0FBUyxFQUFFO1lBQ1AsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMzRSxDQUFDO1FBQ0QsT0FBTyxDQUFDLEVBQUUsRUFBRSxHQUFH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O1NBQ0o7UUFDRCxPQUFPLE9BQU8sQ0FBQztJQUNuQixDQUFDO0lBeEpjLHlCQUFXLEdBQVcsUUFBUSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDO0lBQ3RELGtCQUFJLEdBQUcsb0NBQW9DLENBQUM7SUFDNUMsc0JBQVEsR0FBRyxFQUFFLENBQUM7O2dCQU5oQyxVQUFVOzs7O0lBNkpYLG9CQUFDO0NBQUEsQUE3SkQsSUE2SkM7U0EzSlksYUFBYTs7Ozs7O0lBRXRCLDBCQUFxRTs7Ozs7SUFDckUsbUJBQTJEOzs7OztJQUMzRCx1QkFBNkI7O0lBRTdCLCtCQUFzQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuXHJcbkBJbmplY3RhYmxlKClcclxuXHJcbmV4cG9ydCBjbGFzcyBQcm9jZXNzRGVVdGlsIHtcclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyBnZW5lcmF0ZWRJZDogbnVtYmVyID0gcGFyc2VJbnQoRGF0ZS5ub3coKS50b1N0cmluZygpKTtcclxuICAgIHByaXZhdGUgc3RhdGljIGtleXMgPSAnMDEyMzQ1Njc4OUFCQ0RFRkdISktMTU5QUVJTVFVWV1hZWic7XHJcbiAgICBwcml2YXRlIHN0YXRpYyBleHBvbmVudCA9IDM0O1xyXG5cclxuICAgIHB1YmxpYyBmdW5jSWQ6IHN0cmluZztcclxuICAgIGNvbnN0cnVjdG9yKCkgeyB9XHJcblxyXG4gICAgc3RhdGljIEdlbmVyYXRlRWxlbWVudElkKCk6IHN0cmluZyB7XHJcbiAgICAgICAgKysodGhpcy5nZW5lcmF0ZWRJZCk7XHJcblxyXG4gICAgICAgIHJldHVybiAnXycgKyB0aGlzLkRlY2ltYWwyU3RyaW5nKHRoaXMuZ2VuZXJhdGVkSWQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIERlY2ltYWwyU3RyaW5nKGE6IG51bWJlcikge1xyXG4gICAgICAgIGxldCBjOiBudW1iZXI7XHJcbiAgICAgICAgbGV0IGIgPSAnJztcclxuICAgICAgICBkbyB7XHJcbiAgICAgICAgICAgIGMgPSBhICUgdGhpcy5leHBvbmVudCwgYiA9IHRoaXMua2V5c1tjXSArIGIsIGEgPSAoYSAtIGMpIC8gdGhpcy5leHBvbmVudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgd2hpbGUgKGEgPiAwKTtcclxuICAgICAgICByZXR1cm4gYjtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5Yib5bu65YaF56CBXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVhdGVOTSgpIHtcclxuICAgICAgICBmdW5jdGlvbiBTNCgpIHtcclxuICAgICAgICAgICAgcmV0dXJuICgoKDEgKyBNYXRoLnJhbmRvbSgpKSAqIDB4MTAwMDApIHwgMCkudG9TdHJpbmcoMTYpLnN1YnN0cmluZygxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIChTNCgpICsgUzQoKSArICctJyArIFM0KCkgKyAnLScgKyBTNCgpICsgJy0nICsgUzQoKSArICctJyArIFM0KCkgKyBTNCgpICsgUzQoKSk7XHJcbiAgICAgICAgLy8gcmV0dXJuICd4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHgnLnJlcGxhY2UoL1t4eV0vZywgKGMpID0+IHtcclxuICAgICAgICAvLyAgICAgY29uc3QgciA9IE1hdGgucmFuZG9tKCkgKiAxNiB8IDAsIHYgPSBjID09PSAneCcgPyByIDogKHIgJiAweDMgfCAweDgpO1xyXG4gICAgICAgIC8vICAgICByZXR1cm4gdi50b1N0cmluZygxNik7XHJcbiAgICAgICAgLy8gfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0UHJvY2Vzc0Rlc2lnbmVyUm91dGVyKCkge1xyXG4gICAgICAgIGNvbnN0IHVybCA9ICdwcm9jZXNzTGlzdCc7XHJcbiAgICAgICAgcmV0dXJuIHVybDtcclxuICAgIH1cclxuICAgIC8vIOiOt+WPlua1geeoi+WIhuexu3dlYmFwaVxyXG4gICAgZ2V0Rmxvd0Zvcm1XZWJBcGkoKSB7XHJcbiAgICAgICAgcmV0dXJuICcvYXBpL3J1bnRpbWUvd2YvdjEuMC9mbG93Rm9ybSc7XHJcbiAgICB9XHJcbiAgICAvLyDojrflj5blj4LmlbDliJfooah3ZWJhcGlcclxuICAgIGdldEZvcm1hbFBhcmFtZXRlcnNXZWJBcGkoKSB7XHJcbiAgICAgICAgcmV0dXJuICcvYXBpL3J1bnRpbWUvd2YvdjEuMC9mb3JtYWxQYXJhbWV0ZXInO1xyXG4gICAgfVxyXG4gICAgLy8g6I635Y+W6L+Q6KGM5pe25YWD5pWw5o2ud2ViYXBpXHJcbiAgICBnZXRNZXRhRGF0YVJVV2ViQXBpKCkge1xyXG4gICAgICAgIHJldHVybiAnL2FwaS9ydW50aW1lL2xjbS92MS4wL3J0LW1ldGFkYXRhcy8nO1xyXG4gICAgfVxyXG4gICAgLy8g6I635Y+W5rWB56iL5p6E5Lu2d2ViYXBpXHJcbiAgICBnZXRCaXpDb21wb25lbnRzV2ViQXBpKCkge1xyXG4gICAgICAgIHJldHVybiAnL2FwaS9ydW50aW1lL3dmL3YxLjAvYml6Q29tcG9uZW50JztcclxuICAgIH1cclxuICAgIC8vIOWfuuS6jua1geeoi+WIhuexu+iOt+WPluihqOWNleWumuS5iVxyXG4gICAgZ2V0RXhjdXRlRm9ybXNXZWJBcGkoKSB7XHJcbiAgICAgICAgcmV0dXJuICcvYXBpL3J1bnRpbWUvd2YvdjEuMC9leGN1dGVGb3JtJztcclxuICAgIH1cclxuICAgIC8vIOiOt+WPluiuvuiuoeaXtua1geeoi+WumuS5iVdlYkFQaVxyXG4gICAgZ2V0UHJvY2Vzc0RlZmluaXRpb25XZWJBcGkoKSB7XHJcbiAgICAgICAgcmV0dXJuICcvYXBpL3J1bnRpbWUvd2YvdjEuMC9kdFByb2NEZWZzJztcclxuICAgIH1cclxuXHJcbiAgICAvLyDliKTmlq3mmK/lkKblhYHorrjliKDpmaTmtYHnqIvlrprkuYnnmoRhcGlcclxuICAgIGdldENoZWNrRXhpc3RBY3RpdmVQcm9jRGVmQXBpKCkge1xyXG4gICAgICAgIHJldHVybiAnL2FwaS9ydW50aW1lL3dmL3YxLjAvcHJvY0RlZnMvY2hlY2tFeGlzdEFjdGl2ZVByb2NEZWYnO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflj5bkuJrliqHmtLvliqh3ZWJBcGlcclxuICAgICAqL1xyXG4gICAgZ2V0Qml6QWN0aXZpdHlXZWJBcGkoZmZJZDogc3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIGAvYXBpL3J1bnRpbWUvd2YvdjEuMC9iaXpBY3Rpdml0eT9mbG93Rm9ybUtleT0ke2ZmSWR9YDtcclxuICAgIH1cclxuXHJcbiAgICBnZXRQcm9jRGVmS2V5V2ViQXBpKCkge1xyXG4gICAgICAgIHJldHVybiAnL2FwaS9ydW50aW1lL3dmL3YxLjAvcHJvY0RlZnMvcHJvY2Vzc0RlZmluaXRpb25LZXlzJztcclxuICAgIH1cclxuICAgIC8vIC8qKlxyXG4gICAgLy8gICog5Lia5Yqh5rS75Yqo5p6E5Lu2d2ViQXBpXHJcbiAgICAvLyAgKi9cclxuICAgIC8vIGdldEJpekFjdENwdFdlYkFwaSgpIHtcclxuICAgIC8vICAgICByZXR1cm4gJy9hcGkvcnVudGltZS93Zi92MS4wL0JpekFjdGl2aXRpZXMvR2V0Q29tcG9uZW50cyc7XHJcbiAgICAvLyB9XHJcbiAgICAvKipcclxuICAgICAqIOWPkeW4g+a1geeoi2FwaVxyXG4gICAgICovXHJcbiAgICBkZXBsb3lXZWJBcGkoKSB7XHJcbiAgICAgICAgcmV0dXJuICcvYXBpL3J1bnRpbWUvd2YvdjEuMC9wcm9jRGVmcy9kZXBsb3knO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDkv53lrZjmtYHnqIthcGlcclxuICAgICAqL1xyXG4gICAgc2F2ZVdlYkFwaSgpIHtcclxuICAgICAgICByZXR1cm4gJy9hcGkvcnVudGltZS93Zi92MS4wL0RUUHJvY2Vzc0RlZmluaXRpb25zL1NhdmVCcG1uTW9kZWwnO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflj5blrqHmibnliqjkvZx3ZWJhcGlcclxuICAgICAqL1xyXG4gICAgZ2V0QXBwcm92YWxBY3Rpb25XZWJBcGkoKSB7XHJcbiAgICAgICAgcmV0dXJuICcvYXBpL3J1bnRpbWUvd2YvdjEuMC9hcHByb3ZhbEFjdGlvbic7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflj5bov5DooYzml7bmtYHnqIvlrprkuYlXZWJBUGlcclxuICAgICAqL1xyXG4gICAgZ2V0UlRQcm9jZXNzRGVmaW5pdGlvbldlYkFwaSgpIHtcclxuICAgICAgICByZXR1cm4gJy9hcGkvcnVudGltZS93Zi92MS4wL3Byb2NEZWZzJztcclxuICAgIH1cclxuXHJcbiAgICBnZXRWYWx1ZShkYXRhOiBhbnksIGNvZGU6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKCFjb2RlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHJlc3VsdFZhbCA9ICcnO1xyXG4gICAgICAgIGlmIChjb2RlLmluZGV4T2YoJy4nKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgcmVzdWx0VmFsID0gZGF0YVtjb2RlXTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXN1bHRWYWwgPSBjb2RlLnNwbGl0KCcuJykucmVkdWNlKChvYmosIGtleSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iaikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvYmpba2V5XTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIGRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0VmFsO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDovazmjaJcclxuICAgICAqIEBwYXJhbSBqc29uT2JqIE9iamVjdFxyXG4gICAgICovXHJcbiAgICB0b1VwcGVyQ2FzZShqc29uT2JqOiBPYmplY3QpOiBhbnkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgKGpzb25PYmopID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhqc29uT2JqKSkge1xyXG4gICAgICAgICAgICAgICAganNvbk9ialtrZXkuc3Vic3RyaW5nKDAsIDEpLnRvVXBwZXJDYXNlKCkgKyBrZXkuc3Vic3RyaW5nKDEpXSA9IGpzb25PYmpba2V5XTtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSAoanNvbk9ialtrZXldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4ganNvbk9iajtcclxuICAgIH1cclxuICAgIHRvTG93Q2FzZShqc29uT2JqOiBPYmplY3QpOiBhbnkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgKGpzb25PYmopID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhqc29uT2JqKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKChrZXkuc3Vic3RyaW5nKDAsIDEpLnRvTG93ZXJDYXNlKCkgKyBrZXkuc3Vic3RyaW5nKDEpKSAhPT0ga2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAganNvbk9ialtrZXkuc3Vic3RyaW5nKDAsIDEpLnRvTG93ZXJDYXNlKCkgKyBrZXkuc3Vic3RyaW5nKDEpXSA9IGpzb25PYmpba2V5XTtcclxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgKGpzb25PYmpba2V5XSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGpzb25PYmo7XHJcbiAgICB9XHJcbn1cclxuIl19