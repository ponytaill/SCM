/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, ViewChild, TemplateRef, Input, Injector } from '@angular/core';
import { TaskService } from '../../service/task.service';
import { StartProcessPayload, FlowNodeInfo } from '../../entity/start-process-payload';
import { LoadingService } from '@farris/ui-loading';
import { Subject } from 'rxjs';
import { NotifyService } from '@farris/ui-notify';
import { I18nService } from '../../service/i18n/i18n.service';
import { ComboListComponent } from '@farris/ui-combo-list';
import { MessageType } from '../../entity/postMessage';
import { MessagerService } from '@farris/ui-messager';
import { WfTaskHandlerService } from '../../wf-task-handler.service';
import { ConfigCode } from '../../entity/task-center-config';
import { WfContext } from '../../entity/wfContext';
import { TaskEntity } from '../../entity/task-entity';
import { TaskAction } from '../../entity/task-action';
import { SelectedProcessItem, StartProcessCache } from '../../entity/process-cache';
export class ProcessSelectorComponent {
    // task center-ui中start-process-menu使用了此选择器，构造方法改动时，需重新编译
    /**
     * @param {?} taskService
     * @param {?} loadingService
     * @param {?} notify
     * @param {?} i18nService
     * @param {?} messager
     * @param {?} injector
     * @param {?} handlerService
     */
    constructor(taskService, loadingService, notify, i18nService, messager, injector, handlerService) {
        this.taskService = taskService;
        this.loadingService = loadingService;
        this.notify = notify;
        this.i18nService = i18nService;
        this.messager = messager;
        this.injector = injector;
        this.handlerService = handlerService;
        this.destProcesses = []; //候选流程
        //候选流程
        this.destNodes = []; //候选下一环节
        //保存模拟流程后返回的内容，选择节点时使用
        this.assignInfos = [{
                selectedAssignees: [],
                assigneeInfo: null,
                assignees: [],
                activityName: '',
                dependency: '',
                anonymous: false,
                anonymousText: null,
                resolved: false,
            }]; //节点返回的指派信息（多个）
        //选择的下一环节ID，后续环节id的拼接
        this.payload = new StartProcessPayload; //保存表单上传来的payload
        //保存表单上传来的payload
        this.subject = new Subject(); //返回bool
        //返回bool
        this.subjectWithResponse = new Subject(); //返回流程上下文
        //返回流程上下文
        this.subjectCancel = new Subject(); //点击取消后的subject
        //点击取消后的subject
        this.submitDisable = false; //提交按钮是否禁用
        this.showButtons = false;
        this.curLanguage = localStorage.getItem('languageCode') || 'zh-CHS'; //系统当前语言
        //选择流程的placeholder
        this.wfContext = new WfContext(); //工作流上下文
        //确认取消按钮
        this.openFromIframe = false; //是否从iframe打开，应用IDP提交审批集成
    }
    /**
     * @return {?}
     */
    ngOnInit() {
    }
    //是否从iframe打开，应用IDP提交审批集成
    /**
     * @param {?} dataId
     * @return {?}
     */
    set dataId(dataId) {
        if (!dataId) {
            throw new Error("dataId为空");
        }
        this._dataId = dataId;
    }
    /**
     * @param {?} bizDefKey
     * @return {?}
     */
    set bizDefKey(bizDefKey) {
        if (!bizDefKey) {
            throw new Error("流程分类id为空");
        }
        this.showButtons = true;
        this._bizDefKey = bizDefKey;
        /** @type {?} */
        var payload = new StartProcessPayload();
        payload.dataId = this._dataId;
        payload.bizDefKey = this._bizDefKey;
        this.setParam(payload);
    }
    /**
     * @param {?} param
     * @return {?}
     */
    setParam(param) {
        /** @type {?} */
        let subject = new Subject();
        if (!param) {
            return;
        }
        this.payload.id = param.id;
        this.payload.processDefinitionId = param.processDefinitionId;
        this.payload.processDefinitionKey = param.processDefinitionKey;
        this.payload.bizDefKey = param.bizDefKey;
        this.payload.dataModelId = param.dataModelId;
        this.payload.dataId = param.dataId;
        this.payload.name = param.name;
        this.payload.startUserId = param.startUserId;
        this.payload.nextFlowNodes = [];
        this.wfContext.processCategoryId = param.bizDefKey;
        this.startProcessSimulate(this.payload, subject);
        return subject.asObservable();
    }
    /**
     * @param {?} payload
     * @param {?} subject
     * @return {?}
     */
    startProcessSimulate(payload, subject) {
        /** @type {?} */
        const load = this.loadingService.show();
        this.taskService.startProcessSimulate(payload).subscribe((response) => {
            load.close();
            subject.next(true);
            this.response = response;
            this.destProcesses = response.procDefs.map(process => ({ id: process.procDefId, name: process.procDefName + `(v${process.version}.0)` })); //增加流程的版本信息
            if (this.destProcesses.length === 1) { //只有一个候选流程时
                this.selectedProcessId = this.destProcesses[0].id;
                this.setNextNode(response);
                this.processPlaceholder = this.destProcesses[0].name;
            }
            else { //多个流程时，取上一次选择的
                //多个流程时，取上一次选择的
                /** @type {?} */
                const selectedProcessId = this.getSelectedProcessCache(this.payload.bizDefKey);
                if (selectedProcessId && this.destProcesses.findIndex(p => p.id === selectedProcessId.processDefinitionId) > -1) {
                    this.getDestNodes(selectedProcessId.processDefinitionId);
                    this.processPlaceholder = selectedProcessId.processDefinitionName;
                }
                else {
                    this.processPlaceholder = this.i18nService.getValue('task.selectPlaceholder');
                }
            }
        }, error => {
            load.close();
            subject.error(error);
            this.taskService.error(error);
        });
    }
    /**
     * 选择某个流程后
     * @param {?} data
     * @return {?}
     */
    selectProcessChange(data) {
        this.nodeCombo.onClear();
        this.getDestNodes(data.data.id);
    }
    /**
     * 根据选择的流程定义id获取下一环节信息
     * @private
     * @param {?} selectedProcessId
     * @return {?}
     */
    getDestNodes(selectedProcessId) {
        this.selectedProcessId = selectedProcessId;
        this.destNodes = [];
        this.nodePlaceholder = '';
        this.clearAssignInfos();
        /** @type {?} */
        var payload = new StartProcessPayload();
        payload.processDefinitionId = this.selectedProcessId;
        payload.dataId = this.payload.dataId;
        /** @type {?} */
        const load = this.loadingService.show();
        this.taskService.startProcessSimulate(payload).subscribe((response) => {
            load.close();
            this.response = response;
            this.setNextNode(response);
        }, error => {
            load.close();
            this.taskService.error(error);
        });
    }
    /**
     * 选择节点后事件
     * @param {?} data
     * @return {?}
     */
    selectNodeChange(data) {
        this.clearAssignInfos();
        this.selectedNodeId = data.data.id;
        /** @type {?} */
        const nodeNames = data.data.name.split('，');
        if (this.response.simulationPaths[data.index].nodeInfoList.every(node => node.resolved === true)) { //已预解析参与者
            this.setAssignInfo(this.response.simulationPaths[data.index]);
        }
        else { //未预解析参与者
            //未预解析参与者
            /** @type {?} */
            let payload = new StartProcessPayload();
            payload.processDefinitionId = this.selectedProcessId;
            payload.dataId = this.payload.dataId;
            payload.nextFlowNodes = [];
            this.selectedNodeId.split('，').forEach((nodeId, index) => {
                /** @type {?} */
                let nextFlowNode = new FlowNodeInfo();
                nextFlowNode.activityDefinitionId = nodeId;
                nextFlowNode.activityDefinitionName = nodeNames[index];
                payload.nextFlowNodes.push(nextFlowNode);
            });
            /** @type {?} */
            const load = this.loadingService.show();
            this.taskService.startProcessSimulate(payload).subscribe((response) => {
                load.close();
                this.setAssignInfo(response.simulationPaths[0]); //选择的下一环节应该在同一条路径上，故取simulationPaths[0]
            }, error => {
                load.close();
                this.taskService.error(error);
            });
        }
    }
    /**
     * 实现真正的提交
     * @return {?}
     */
    startProcessSubmit() {
        if (!this.selectedProcessId) {
            this.openFromIframe ? this.messager.warning(this.i18nService.getValue('startProcess.selectProcess')) :
                this.notify.warning(this.i18nService.getValue('startProcess.selectProcess'));
            return;
        }
        if (!this.selectedNodeId) {
            this.openFromIframe ? this.messager.warning(this.i18nService.getValue('startProcess.selectNode')) :
                this.notify.warning(this.i18nService.getValue('startProcess.selectNode'));
            return;
        }
        if (this.assignInfos.filter(info => (info.assigneeInfo || info.selectedAssignees.length) && !info.assignees.length).length) { //空参与者策略时，不提示选人
            this.openFromIframe ? this.messager.warning(this.i18nService.getValue('task.selectProcessor')) :
                this.notify.warning(this.i18nService.getValue('task.selectProcessor'));
            return;
        }
        /** @type {?} */
        const nodes = this.selectedNodeId.split('，');
        for (let i = 0; i < nodes.length; i++) {
            /** @type {?} */
            let nextFlowNode = {
                activityDefinitionId: nodes[i],
                activityDefinitionName: this.assignInfos[i].activityName,
                dependency: this.assignInfos[i].dependency,
                selectedAssignees: this.assignInfos[i].assigneeInfo ? this.assignInfos[i].assignees : [],
                assigneeInfo: null,
                resolved: false,
                anonymous: false,
                anonymousText: ''
            }
            //节点找不到人，且异常提示，前端控制住，不允许走提交请求（构件事务问题）。并行场景下暂不处理
            ;
            //节点找不到人，且异常提示，前端控制住，不允许走提交请求（构件事务问题）。并行场景下暂不处理
            if (this.response && this.response.simulationPaths.length && !this.response.simulationPaths[0].id.startsWith('ParallelGateway')) {
                if (nodes.length == 1 && nodes[i].startsWith('UserActivity') && this.assignInfos[i].resolved && !this.assignInfos[i].assigneeInfo && !this.assignInfos[i].selectedAssignees.length) {
                    /** @type {?} */
                    const str = this.assignInfos[i].activityName + this.i18nService.getValue('startProcess.node') + this.i18nService.getValue('startProcess.noUser');
                    this.openFromIframe ? this.messager.warning(str) : this.notify.warning(str);
                    return;
                }
            }
            this.payload.nextFlowNodes.push(nextFlowNode);
        }
        this.payload.processDefinitionId = this.selectedProcessId;
        this.submitDisable = true;
        /** @type {?} */
        const load = this.loadingService.show();
        this.taskService.startProcess(this.payload).subscribe((response) => {
            load.close();
            this.submitDisable = false;
            this.subject.next(true);
            this.subjectWithResponse.next(response);
            /** @type {?} */
            let messageAfterSubmit = this.i18nService.getValue('startProcess.submitSuccess');
            if (this.openFromIframe) {
                ((/** @type {?} */ (window.parent))).gspWfService.eventHandler({ data: { type: MessageType.SubmitSuccess, message: messageAfterSubmit } });
            }
            else {
                this.handlerService.handleSubmitMessage(ConfigCode.Info_After_Submit, this.payload.bizDefKey);
            }
            if (!this.openFromIframe && response.needInteraction) { //提交审批后需要指派场景
                this.notify.info(this.i18nService.getValue('cueWords.select')
                    + response.nextFlowNodes[0].activityDefinitionName
                    + this.i18nService.getValue('cueWords.processor'));
                /** @type {?} */
                let task = new TaskEntity();
                /** @type {?} */
                let action = new TaskAction();
                task.sourceId = response.nextFlowNodes[0].assigneeInfo.workItemId;
                action.code = 'AssignUser';
                action.name = this.i18nService.getValue('cueWords.assignUser');
                this.handlerService.execute(task, action).subscribe(re => { });
            }
            this.setSelectedProcessCache();
        }, (error) => {
            load.close();
            this.payload.nextFlowNodes = [];
            this.submitDisable = false;
            this.subject.next(false); //已经有人用了这个subject，提交失败的话返回false by fangpengfei@20210324
            this.taskService.error(error);
        });
    }
    /**
     * 选择流程清空
     * @return {?}
     */
    selectProcessClear() {
        this.selectedProcessId = '';
        this.destNodes = [];
        this.nodePlaceholder = '';
        this.selectedNodeId = '';
        this.clearAssignInfos();
        this.response = null;
    }
    /**
     * 选择节点清空
     * @return {?}
     */
    selectNodeClear() {
        this.selectedNodeId = '';
        this.clearAssignInfos();
    }
    /**
     * 用户帮助选人
     * @param {?} data
     * @param {?} index
     * @return {?}
     */
    afterConfirm(data, index) {
        this.assignInfos[index].assignees = data;
    }
    /**
     * 弹框点击取消
     * @return {?}
     */
    cancel() {
        if (this.openFromIframe) {
            ((/** @type {?} */ (window.parent))).gspWfService.eventHandler({ data: { type: MessageType.Cancel, message: '' } });
        }
        else {
            this.subjectCancel.next(false);
        }
    }
    /**
     * 获取提交审批后返回值（bool型，兼容历史）
     * @return {?}
     */
    getSubject() {
        return this.subject.asObservable();
    }
    /**
     * 获取提交审批后返回值（实体型，带流程上下文）
     * @return {?}
     */
    getSubjectWithResponse() {
        return this.subjectWithResponse.asObservable();
    }
    /**
     * 点击取消后的subject，关闭窗口使用
     * @return {?}
     */
    getSubjectCancel() {
        return this.subjectCancel.asObservable();
    }
    /**
     * 设置下一环节
     * @private
     * @param {?} response
     * @return {?}
     */
    setNextNode(response) {
        this.destNodes = response.simulationPaths && response.simulationPaths.map(path => ({
            id: path.nodeInfoList.map(node => node.activityDefinitionId).join('，'),
            name: path.nodeInfoList.map(node => node.activityDefinitionName).join('，')
        }));
        //处理默认分支，无默认分支返回-1
        /** @type {?} */
        const defaultIndex = response.simulationPaths.findIndex(a => a.default);
        if (defaultIndex > -1) {
            this.selectedNodeId = this.destNodes[defaultIndex].id;
            this.nodePlaceholder = this.destNodes[defaultIndex].name.indexOf('，') > -1 ? response.simulationPaths[defaultIndex].name : this.destNodes[defaultIndex].name;
            this.setAssignInfo(response.simulationPaths[defaultIndex]);
        }
        else {
            this.nodePlaceholder = this.i18nService.getValue('task.selectPlaceholder');
        }
    }
    /**
     * 设置当前指派信息帮助参数
     * @private
     * @param {?} simulationPaths
     * @return {?}
     */
    setAssignInfo(simulationPaths) {
        this.assignInfos = [];
        this.selectedNodeId.split('，').forEach(nodeId => {
            /** @type {?} */
            const node = simulationPaths.nodeInfoList.find(node => node.activityDefinitionId === nodeId);
            if (node) {
                this.assignInfos.push({
                    selectedAssignees: node.selectedAssignees,
                    assigneeInfo: node.assigneeInfo,
                    assignees: node.selectedAssignees.map(user => { return { id: user.id, name: user.name }; }),
                    activityName: node.activityDefinitionName,
                    dependency: node.dependency,
                    anonymous: node.anonymous,
                    anonymousText: node.anonymousText,
                    resolved: node.resolved
                });
            }
            else {
                this.assignInfos.push({
                    selectedAssignees: [],
                    assigneeInfo: null,
                    assignees: [],
                    activityName: '',
                    dependency: '',
                    anonymous: false,
                    anonymousText: '',
                    resolved: false,
                });
            }
        });
    }
    /**
     * 清空当前指派信息帮助参数
     * @private
     * @return {?}
     */
    clearAssignInfos() {
        this.assignInfos = [{
                selectedAssignees: [],
                assigneeInfo: null,
                assignees: [],
                activityName: '',
                dependency: '',
                anonymous: false,
                anonymousText: '',
                resolved: false,
            }];
    }
    /**
     * 获取浏览器缓存，上次流程选择的结果
     * @private
     * @param {?} processCategoryId
     * @return {?}
     */
    getSelectedProcessCache(processCategoryId) {
        /** @type {?} */
        let browserCache = (/** @type {?} */ (JSON.parse(localStorage.getItem("gspWfStartProcess"))));
        if (browserCache && browserCache.selectedProcessList) {
            return browserCache.selectedProcessList.find(a => a.processCategory == processCategoryId);
        }
        return undefined;
    }
    /**
     * 浏览器缓存记下流程选择的结果
     * @private
     * @return {?}
     */
    setSelectedProcessCache() {
        /** @type {?} */
        const processCategoryId = this.payload.bizDefKey;
        /** @type {?} */
        const processDefinitionId = this.payload.processDefinitionId;
        /** @type {?} */
        let process = this.destProcesses.find(a => a.id == processDefinitionId);
        /** @type {?} */
        const processDefinitionName = process && process.name;
        /** @type {?} */
        let browserCache = (/** @type {?} */ (JSON.parse(localStorage.getItem("gspWfStartProcess"))));
        if (browserCache && browserCache.selectedProcessList) {
            /** @type {?} */
            let selectedProcessList = browserCache.selectedProcessList;
            if (selectedProcessList.findIndex(a => a.processCategory == processCategoryId) > -1) {
                selectedProcessList.map(item => {
                    if (item.processCategory == processCategoryId) {
                        item.processDefinitionId = processDefinitionId;
                        item.processDefinitionName = processDefinitionName;
                        item.logTime = new Date();
                    }
                });
                browserCache.selectedProcessList = selectedProcessList;
                localStorage.setItem("gspWfStartProcess", JSON.stringify(browserCache));
            }
            else {
                /** @type {?} */
                let item = new SelectedProcessItem(processCategoryId, processDefinitionId, processDefinitionName);
                selectedProcessList.push(item);
                browserCache.selectedProcessList = selectedProcessList;
                localStorage.setItem("gspWfStartProcess", JSON.stringify(browserCache));
            }
        }
        else {
            /** @type {?} */
            let browserCache = new StartProcessCache();
            /** @type {?} */
            let selectedProcessList = [];
            /** @type {?} */
            let item = new SelectedProcessItem(processCategoryId, processDefinitionId, processDefinitionName);
            selectedProcessList.push(item);
            browserCache.selectedProcessList = selectedProcessList;
            localStorage.setItem("gspWfStartProcess", JSON.stringify(browserCache));
        }
    }
}
ProcessSelectorComponent.decorators = [
    { type: Component, args: [{
                selector: 'lib-process-selector',
                template: "<div style=\"padding: 10px 20px; overflow: hidden; background-color: white;\">\r\n  <!-- \u9009\u62E9\u6D41\u7A0B\u5B9A\u4E49\uFF0C\u4E0B\u62C9 -->\r\n  <div class=\"wf-task-handler-help-div wf-task-handler-help-div-submit\">\r\n    <div class=\"wf-task-handler-help-text\">\r\n      {{ \"startProcess.title\" | translate }}\r\n    </div>\r\n    <div class=\"d-flex\" style=\"flex: 1;\">\r\n      <farris-combo-list style=\"flex: 1;\"\r\n        [data]=\"destProcesses\"\r\n        [editable]=\"false\"\r\n        [textField]=\"'name'\"\r\n        [valueField]=\"'id'\"\r\n        [idField]=\"'id'\"\r\n        [readonly]=\"destProcesses.length > 1 ? false : true\"\r\n        (selectChange)=\"selectProcessChange($event)\"\r\n        (clear)=\"selectProcessClear()\"\r\n        [placeholder]=\"processPlaceholder\"\r\n        [forcePlaceholder]=\"true\"\r\n      >\r\n      </farris-combo-list>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- \u4E0B\u4E00\u8282\u70B9\uFF0C\u4E0B\u62C9 -->\r\n  <div class=\"wf-task-handler-help-div wf-task-handler-help-div-submit\">\r\n    <div class=\"wf-task-handler-help-text\">{{ \"task.nextNodeText\" | translate }}</div>\r\n    <div class=\"d-flex\" style=\"flex: 1;\">\r\n      <farris-combo-list style=\"flex: 1;\"\r\n        #nodeCombo\r\n        [data]=\"destNodes\"\r\n        [editable]=\"false\"\r\n        [textField]=\"'name'\"\r\n        [valueField]=\"'id'\"\r\n        [idField]=\"'id'\"\r\n        [readonly]=\"destNodes.length > 1 ? false : true\"\r\n        (selectChange)=\"selectNodeChange($event)\"\r\n        (clear)=\"selectNodeClear()\"\r\n        [placeholder]=\"nodePlaceholder\"\r\n        [forcePlaceholder]=\"true\"\r\n      >\r\n      </farris-combo-list>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- \u529E\u7406\u4EBA\u5458 -->\r\n  <lib-assignee-info *ngFor=\"let assignInfo of assignInfos; let i = index\"\r\n    [assigneeInfo]=\"assignInfo.assigneeInfo\"\r\n    [setAnonymous]=\"assignInfo.anonymous\"\r\n    [setAnonymousText]=\"assignInfo.anonymousText\"\r\n    [selectedAssignees]=\"assignInfo.selectedAssignees\"\r\n    [activityName]=\"assignInfos.length > 1 ? assignInfo.activityName : ''\"\r\n    [ifShowBlank]=\"assignInfos.length > 1 ? false : true\"\r\n    [openFromIframe]=\"openFromIframe\"\r\n    [wfContext]=\"wfContext\"\r\n    (afterConfirm)=\"afterConfirm($event, i)\"\r\n  ></lib-assignee-info>\r\n</div>\r\n\r\n\r\n<!-- \u5F39\u6846\u663E\u793A\u65F6\uFF0C\u663E\u793A\u6309\u94AE -->\r\n<div *ngIf=\"showButtons\" class=\"modal-footer\" style=\"float: right; width: 100%;\">\r\n  <div *ngIf=\"showButtons; then buttons\"></div>\r\n</div>\r\n\r\n<!-- \u6309\u94AE -->\r\n<ng-template #buttons>\r\n  <button type=\"button\" class=\"btn btn-secondary\" (click)=\"cancel()\">\r\n    {{ \"static.footCancel\" | translate }}\r\n  </button>\r\n  <button type=\"button\" class=\"btn btn-primary\" [disabled]=\"submitDisable\" directive-throttle (throttleClick)=\"startProcessSubmit()\">\r\n    {{ \"static.footOk\" | translate }}\r\n  </button>\r\n</ng-template>\r\n",
                styles: [".wf-task-handler-help-div{font-size:13px;color:#2d2f33;margin-bottom:20px}.wf-task-handler-help-div-submit{margin-bottom:20px}.wf-task-handler-help-text{padding-bottom:8px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]
            }] }
];
/** @nocollapse */
ProcessSelectorComponent.ctorParameters = () => [
    { type: TaskService },
    { type: LoadingService },
    { type: NotifyService },
    { type: I18nService },
    { type: MessagerService },
    { type: Injector },
    { type: WfTaskHandlerService }
];
ProcessSelectorComponent.propDecorators = {
    nodeCombo: [{ type: ViewChild, args: ['nodeCombo',] }],
    buttons: [{ type: ViewChild, args: ['buttons',] }],
    openFromIframe: [{ type: Input }],
    dataId: [{ type: Input }],
    bizDefKey: [{ type: Input }]
};
if (false) {
    /** @type {?} */
    ProcessSelectorComponent.prototype.destProcesses;
    /** @type {?} */
    ProcessSelectorComponent.prototype.destNodes;
    /** @type {?} */
    ProcessSelectorComponent.prototype.response;
    /** @type {?} */
    ProcessSelectorComponent.prototype.assignInfos;
    /** @type {?} */
    ProcessSelectorComponent.prototype.selectedProcessId;
    /** @type {?} */
    ProcessSelectorComponent.prototype.selectedNodeId;
    /** @type {?} */
    ProcessSelectorComponent.prototype.payload;
    /** @type {?} */
    ProcessSelectorComponent.prototype.subject;
    /** @type {?} */
    ProcessSelectorComponent.prototype.subjectWithResponse;
    /** @type {?} */
    ProcessSelectorComponent.prototype.subjectCancel;
    /** @type {?} */
    ProcessSelectorComponent.prototype.submitDisable;
    /** @type {?} */
    ProcessSelectorComponent.prototype._dataId;
    /** @type {?} */
    ProcessSelectorComponent.prototype._bizDefKey;
    /** @type {?} */
    ProcessSelectorComponent.prototype.showButtons;
    /** @type {?} */
    ProcessSelectorComponent.prototype.curLanguage;
    /** @type {?} */
    ProcessSelectorComponent.prototype.nodePlaceholder;
    /** @type {?} */
    ProcessSelectorComponent.prototype.processPlaceholder;
    /** @type {?} */
    ProcessSelectorComponent.prototype.wfContext;
    /** @type {?} */
    ProcessSelectorComponent.prototype.nodeCombo;
    /** @type {?} */
    ProcessSelectorComponent.prototype.buttons;
    /** @type {?} */
    ProcessSelectorComponent.prototype.openFromIframe;
    /**
     * @type {?}
     * @private
     */
    ProcessSelectorComponent.prototype.taskService;
    /**
     * @type {?}
     * @private
     */
    ProcessSelectorComponent.prototype.loadingService;
    /**
     * @type {?}
     * @private
     */
    ProcessSelectorComponent.prototype.notify;
    /**
     * @type {?}
     * @private
     */
    ProcessSelectorComponent.prototype.i18nService;
    /**
     * @type {?}
     * @private
     */
    ProcessSelectorComponent.prototype.messager;
    /**
     * @type {?}
     * @private
     */
    ProcessSelectorComponent.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    ProcessSelectorComponent.prototype.handlerService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvY2Vzcy1zZWxlY3Rvci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZ3NwLXdmL3dmLXRhc2staGFuZGxlci8iLCJzb3VyY2VzIjpbImxpYi9zdWJtaXQvcHJvY2Vzcy1zZWxlY3Rvci9wcm9jZXNzLXNlbGVjdG9yLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBVSxTQUFTLEVBQUUsV0FBVyxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDM0YsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLDRCQUE0QixDQUFDO0FBQ3pELE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxZQUFZLEVBQVksTUFBTSxvQ0FBb0MsQ0FBQztBQUVqRyxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sb0JBQW9CLENBQUE7QUFDbkQsT0FBTyxFQUFjLE9BQU8sRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUMzQyxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDbEQsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLGlDQUFpQyxDQUFDO0FBQzlELE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBQzNELE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQztBQUN2RCxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0scUJBQXFCLENBQUE7QUFHckQsT0FBTyxFQUFFLG9CQUFvQixFQUFFLE1BQU0sK0JBQStCLENBQUM7QUFDckUsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGlDQUFpQyxDQUFDO0FBQzdELE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUNuRCxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sMEJBQTBCLENBQUM7QUFDdEQsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBQ3RELE9B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Q3RDLDBDQUE2Qjs7Ozs7SUFDN0IsK0NBQWdDOzs7OztJQUNoQyw0Q0FBaUM7Ozs7O0lBQ2pDLDRDQUEwQjs7Ozs7SUFDMUIsa0RBQTRDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIFZpZXdDaGlsZCwgVGVtcGxhdGVSZWYsIElucHV0LCBJbmplY3RvciB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBUYXNrU2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2UvdGFzay5zZXJ2aWNlJztcclxuaW1wb3J0IHsgU3RhcnRQcm9jZXNzUGF5bG9hZCwgRmxvd05vZGVJbmZvLCBBc3NpZ25lZSB9IGZyb20gJy4uLy4uL2VudGl0eS9zdGFydC1wcm9jZXNzLXBheWxvYWQnO1xyXG5pbXBvcnQgeyBFeGVjdXRpb25SZXNwb25zZSB9IGZyb20gJy4uLy4uL2VudGl0eS9leGVjdXRpb24tcmVzcG9uc2UnO1xyXG5pbXBvcnQgeyBMb2FkaW5nU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbG9hZGluZydcclxuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBOb3RpZnlTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1ub3RpZnknO1xyXG5pbXBvcnQgeyBJMThuU2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2UvaTE4bi9pMThuLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBDb21ib0xpc3RDb21wb25lbnQgfSBmcm9tICdAZmFycmlzL3VpLWNvbWJvLWxpc3QnO1xyXG5pbXBvcnQgeyBNZXNzYWdlVHlwZSB9IGZyb20gJy4uLy4uL2VudGl0eS9wb3N0TWVzc2FnZSc7XHJcbmltcG9ydCB7IE1lc3NhZ2VyU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbWVzc2FnZXInXHJcbmltcG9ydCB7IFNpbXVsYXRlUmVzcG9uc2UsIFNpbXVsYXRpb25QYXRoIH0gZnJvbSAnLi4vLi4vZW50aXR5L3NpbXVsYXRlLXJlc3BvbnNlJztcclxuaW1wb3J0IHsgQXNzaWduSW5mb0hlbHBFbnRpdHkgfSBmcm9tICcuLi8uLi9lbnRpdHkvYXNzaWduSW5mb0hlbHAnO1xyXG5pbXBvcnQgeyBXZlRhc2tIYW5kbGVyU2VydmljZSB9IGZyb20gJy4uLy4uL3dmLXRhc2staGFuZGxlci5zZXJ2aWNlJztcclxuaW1wb3J0IHsgQ29uZmlnQ29kZSB9IGZyb20gJy4uLy4uL2VudGl0eS90YXNrLWNlbnRlci1jb25maWcnO1xyXG5pbXBvcnQgeyBXZkNvbnRleHQgfSBmcm9tICcuLi8uLi9lbnRpdHkvd2ZDb250ZXh0JztcclxuaW1wb3J0IHsgVGFza0VudGl0eSB9IGZyb20gJy4uLy4uL2VudGl0eS90YXNrLWVudGl0eSc7XHJcbmltcG9ydCB7IFRhc2tBY3Rpb24gfSBmcm9tICcuLi8uLi9lbnRpdHkvdGFzay1hY3Rpb24nO1xyXG5pbXBvcnQgeyBTZWxlY3RlZFByb2Nlc3NJdGVtLCBTdGFydFByb2Nlc3NDYWNoZSB9IGZyb20gJy4uLy4uL2VudGl0eS9wcm9jZXNzLWNhY2hlJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnbGliLXByb2Nlc3Mtc2VsZWN0b3InLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi9wcm9jZXNzLXNlbGVjdG9yLmNvbXBvbmVudC5odG1sJyxcclxuICBzdHlsZVVybHM6IFsnLi4vLi4vY29tcG9uZW50cy90YXNrLWV4ZWN1dGUvdGFzay1leGVjdXRlLmNvbXBvbmVudC5jc3MnXSxcclxufSlcclxuZXhwb3J0IGNsYXNzIFByb2Nlc3NTZWxlY3RvckNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XHJcblxyXG4gIC8vIHRhc2sgY2VudGVyLXVp5Litc3RhcnQtcHJvY2Vzcy1tZW515L2/55So5LqG5q2k6YCJ5oup5Zmo77yM5p6E6YCg5pa55rOV5pS55Yqo5pe277yM6ZyA6YeN5paw57yW6K+RXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBwcml2YXRlIHRhc2tTZXJ2aWNlOiBUYXNrU2VydmljZSxcclxuICAgIHByaXZhdGUgbG9hZGluZ1NlcnZpY2U6IExvYWRpbmdTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBub3RpZnk6IE5vdGlmeVNlcnZpY2UsXHJcbiAgICBwcml2YXRlIGkxOG5TZXJ2aWNlOiBJMThuU2VydmljZSxcclxuICAgIHByaXZhdGUgbWVzc2FnZXI6IE1lc3NhZ2VyU2VydmljZSxcclxuICAgIHByaXZhdGUgaW5qZWN0b3I6IEluamVjdG9yLFxyXG4gICAgcHJpdmF0ZSBoYW5kbGVyU2VydmljZTogV2ZUYXNrSGFuZGxlclNlcnZpY2VcclxuICApIHtcclxuICB9XHJcblxyXG4gIG5nT25Jbml0KCkge1xyXG4gIH1cclxuXHJcbiAgZGVzdFByb2Nlc3NlczogeyBpZDogc3RyaW5nLCBuYW1lOiBzdHJpbmcgfVtdID0gW107Ly/lgJnpgInmtYHnqItcclxuICBkZXN0Tm9kZXM6IHsgaWQ6IHN0cmluZywgbmFtZTogc3RyaW5nIH1bXSA9IFtdOy8v5YCZ6YCJ5LiL5LiA546v6IqCXHJcbiAgcmVzcG9uc2U6IFNpbXVsYXRlUmVzcG9uc2U7Ly/kv53lrZjmqKHmi5/mtYHnqIvlkI7ov5Tlm57nmoTlhoXlrrnvvIzpgInmi6noioLngrnml7bkvb/nlKhcclxuICBhc3NpZ25JbmZvczogQXNzaWduSW5mb0hlbHBFbnRpdHlbXSA9XHJcbiAgICBbe1xyXG4gICAgICBzZWxlY3RlZEFzc2lnbmVlczogW10sXHJcbiAgICAgIGFzc2lnbmVlSW5mbzogbnVsbCxcclxuICAgICAgYXNzaWduZWVzOiBbXSxcclxuICAgICAgYWN0aXZpdHlOYW1lOiAnJyxcclxuICAgICAgZGVwZW5kZW5jeTogJycsXHJcbiAgICAgIGFub255bW91czogZmFsc2UsXHJcbiAgICAgIGFub255bW91c1RleHQ6IG51bGwsXHJcbiAgICAgIHJlc29sdmVkOiBmYWxzZSxcclxuICAgIH1dOy8v6IqC54K56L+U5Zue55qE5oyH5rS+5L+h5oGv77yI5aSa5Liq77yJXHJcblxyXG4gIHNlbGVjdGVkUHJvY2Vzc0lkOiBzdHJpbmc7Ly/pgInmi6nnmoTmtYHnqIvlrprkuYlJRFxyXG4gIHNlbGVjdGVkTm9kZUlkOiBzdHJpbmc7IC8v6YCJ5oup55qE5LiL5LiA546v6IqCSUTvvIzlkI7nu63njq/oioJpZOeahOaLvOaOpVxyXG4gIHBheWxvYWQgPSBuZXcgU3RhcnRQcm9jZXNzUGF5bG9hZDsvL+S/neWtmOihqOWNleS4iuS8oOadpeeahHBheWxvYWRcclxuICBzdWJqZWN0ID0gbmV3IFN1YmplY3QoKTsvL+i/lOWbnmJvb2xcclxuICBzdWJqZWN0V2l0aFJlc3BvbnNlID0gbmV3IFN1YmplY3Q8YW55PigpOy8v6L+U5Zue5rWB56iL5LiK5LiL5paHXHJcbiAgc3ViamVjdENhbmNlbCA9IG5ldyBTdWJqZWN0KCk7Ly/ngrnlh7vlj5bmtojlkI7nmoRzdWJqZWN0XHJcbiAgc3VibWl0RGlzYWJsZTogYm9vbGVhbiA9IGZhbHNlOy8v5o+Q5Lqk5oyJ6ZKu5piv5ZCm56aB55SoXHJcbiAgX2RhdGFJZDogc3RyaW5nO1xyXG4gIF9iaXpEZWZLZXk6IHN0cmluZztcclxuICBzaG93QnV0dG9uczogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIGN1ckxhbmd1YWdlOiBzdHJpbmcgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbGFuZ3VhZ2VDb2RlJykgfHwgJ3poLUNIUyc7Ly/ns7vnu5/lvZPliY3or63oqIBcclxuICBub2RlUGxhY2Vob2xkZXI6IHN0cmluZzsvL+S4i+S4gOeOr+iKgueahHBsYWNlaG9sZGVyXHJcbiAgcHJvY2Vzc1BsYWNlaG9sZGVyOiBzdHJpbmc7Ly/pgInmi6nmtYHnqIvnmoRwbGFjZWhvbGRlclxyXG4gIHdmQ29udGV4dCA9IG5ldyBXZkNvbnRleHQoKTsvL+W3peS9nOa1geS4iuS4i+aWh1xyXG5cclxuICBAVmlld0NoaWxkKCdub2RlQ29tYm8nKSBub2RlQ29tYm86IENvbWJvTGlzdENvbXBvbmVudFxyXG4gIEBWaWV3Q2hpbGQoJ2J1dHRvbnMnKSBidXR0b25zOiBUZW1wbGF0ZVJlZjxhbnk+Oy8v56Gu6K6k5Y+W5raI5oyJ6ZKuXHJcbiAgQElucHV0KCkgb3BlbkZyb21JZnJhbWU6IGJvb2xlYW4gPSBmYWxzZTsvL+aYr+WQpuS7jmlmcmFtZeaJk+W8gO+8jOW6lOeUqElEUOaPkOS6pOWuoeaJuembhuaIkFxyXG5cclxuICBASW5wdXQoKVxyXG4gIHNldCBkYXRhSWQoZGF0YUlkOiBzdHJpbmcpIHtcclxuICAgIGlmICghZGF0YUlkKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcImRhdGFJZOS4uuepulwiKTtcclxuICAgIH1cclxuICAgIHRoaXMuX2RhdGFJZCA9IGRhdGFJZDtcclxuICB9XHJcblxyXG4gIEBJbnB1dCgpXHJcbiAgc2V0IGJpekRlZktleShiaXpEZWZLZXk6IHN0cmluZykge1xyXG4gICAgaWYgKCFiaXpEZWZLZXkpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwi5rWB56iL5YiG57G7aWTkuLrnqbpcIik7XHJcbiAgICB9XHJcbiAgICB0aGlzLnNob3dCdXR0b25zID0gdHJ1ZTtcclxuICAgIHRoaXMuX2JpekRlZktleSA9IGJpekRlZktleTtcclxuICAgIHZhciBwYXlsb2FkID0gbmV3IFN0YXJ0UHJvY2Vzc1BheWxvYWQoKTtcclxuICAgIHBheWxvYWQuZGF0YUlkID0gdGhpcy5fZGF0YUlkO1xyXG4gICAgcGF5bG9hZC5iaXpEZWZLZXkgPSB0aGlzLl9iaXpEZWZLZXk7XHJcbiAgICB0aGlzLnNldFBhcmFtKHBheWxvYWQpO1xyXG4gIH1cclxuXHJcbiAgc2V0UGFyYW0ocGFyYW06IFN0YXJ0UHJvY2Vzc1BheWxvYWQpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgbGV0IHN1YmplY3QgPSBuZXcgU3ViamVjdDxhbnk+KCk7XHJcbiAgICBpZiAoIXBhcmFtKSB7IHJldHVybjsgfVxyXG4gICAgdGhpcy5wYXlsb2FkLmlkID0gcGFyYW0uaWQ7XHJcbiAgICB0aGlzLnBheWxvYWQucHJvY2Vzc0RlZmluaXRpb25JZCA9IHBhcmFtLnByb2Nlc3NEZWZpbml0aW9uSWQ7XHJcbiAgICB0aGlzLnBheWxvYWQucHJvY2Vzc0RlZmluaXRpb25LZXkgPSBwYXJhbS5wcm9jZXNzRGVmaW5pdGlvbktleTtcclxuICAgIHRoaXMucGF5bG9hZC5iaXpEZWZLZXkgPSBwYXJhbS5iaXpEZWZLZXk7XHJcbiAgICB0aGlzLnBheWxvYWQuZGF0YU1vZGVsSWQgPSBwYXJhbS5kYXRhTW9kZWxJZDtcclxuICAgIHRoaXMucGF5bG9hZC5kYXRhSWQgPSBwYXJhbS5kYXRhSWQ7XHJcbiAgICB0aGlzLnBheWxvYWQubmFtZSA9IHBhcmFtLm5hbWU7XHJcbiAgICB0aGlzLnBheWxvYWQuc3RhcnRVc2VySWQgPSBwYXJhbS5zdGFydFVzZXJJZDtcclxuICAgIHRoaXMucGF5bG9hZC5uZXh0Rmxvd05vZGVzID0gW107XHJcbiAgICB0aGlzLndmQ29udGV4dC5wcm9jZXNzQ2F0ZWdvcnlJZCA9IHBhcmFtLmJpekRlZktleTtcclxuICAgIHRoaXMuc3RhcnRQcm9jZXNzU2ltdWxhdGUodGhpcy5wYXlsb2FkLCBzdWJqZWN0KTtcclxuICAgIHJldHVybiBzdWJqZWN0LmFzT2JzZXJ2YWJsZSgpO1xyXG4gIH1cclxuXHJcbiAgc3RhcnRQcm9jZXNzU2ltdWxhdGUocGF5bG9hZDogU3RhcnRQcm9jZXNzUGF5bG9hZCwgc3ViamVjdDogU3ViamVjdDxhbnk+KSB7XHJcbiAgICBjb25zdCBsb2FkID0gdGhpcy5sb2FkaW5nU2VydmljZS5zaG93KCk7XHJcbiAgICB0aGlzLnRhc2tTZXJ2aWNlLnN0YXJ0UHJvY2Vzc1NpbXVsYXRlKHBheWxvYWQpLnN1YnNjcmliZSgocmVzcG9uc2U6IFNpbXVsYXRlUmVzcG9uc2UpID0+IHtcclxuICAgICAgbG9hZC5jbG9zZSgpO1xyXG4gICAgICBzdWJqZWN0Lm5leHQodHJ1ZSk7XHJcbiAgICAgIHRoaXMucmVzcG9uc2UgPSByZXNwb25zZTtcclxuICAgICAgdGhpcy5kZXN0UHJvY2Vzc2VzID0gcmVzcG9uc2UucHJvY0RlZnMubWFwKHByb2Nlc3MgPT4gKHsgaWQ6IHByb2Nlc3MucHJvY0RlZklkLCBuYW1lOiBwcm9jZXNzLnByb2NEZWZOYW1lICsgYCh2JHtwcm9jZXNzLnZlcnNpb259LjApYCB9KSk7Ly/lop7liqDmtYHnqIvnmoTniYjmnKzkv6Hmga9cclxuICAgICAgaWYgKHRoaXMuZGVzdFByb2Nlc3Nlcy5sZW5ndGggPT09IDEpIHsvL+WPquacieS4gOS4quWAmemAiea1geeoi+aXtlxyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRQcm9jZXNzSWQgPSB0aGlzLmRlc3RQcm9jZXNzZXNbMF0uaWQ7XHJcbiAgICAgICAgdGhpcy5zZXROZXh0Tm9kZShyZXNwb25zZSk7XHJcbiAgICAgICAgdGhpcy5wcm9jZXNzUGxhY2Vob2xkZXIgPSB0aGlzLmRlc3RQcm9jZXNzZXNbMF0ubmFtZTtcclxuICAgICAgfSBlbHNlIHsvL+WkmuS4qua1geeoi+aXtu+8jOWPluS4iuS4gOasoemAieaLqeeahFxyXG4gICAgICAgIGNvbnN0IHNlbGVjdGVkUHJvY2Vzc0lkID0gdGhpcy5nZXRTZWxlY3RlZFByb2Nlc3NDYWNoZSh0aGlzLnBheWxvYWQuYml6RGVmS2V5KTtcclxuICAgICAgICBpZiAoc2VsZWN0ZWRQcm9jZXNzSWQgJiYgdGhpcy5kZXN0UHJvY2Vzc2VzLmZpbmRJbmRleChwID0+IHAuaWQgPT09IHNlbGVjdGVkUHJvY2Vzc0lkLnByb2Nlc3NEZWZpbml0aW9uSWQpID4gLTEpIHtcclxuICAgICAgICAgIHRoaXMuZ2V0RGVzdE5vZGVzKHNlbGVjdGVkUHJvY2Vzc0lkLnByb2Nlc3NEZWZpbml0aW9uSWQpO1xyXG4gICAgICAgICAgdGhpcy5wcm9jZXNzUGxhY2Vob2xkZXIgPSBzZWxlY3RlZFByb2Nlc3NJZC5wcm9jZXNzRGVmaW5pdGlvbk5hbWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMucHJvY2Vzc1BsYWNlaG9sZGVyID0gdGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgndGFzay5zZWxlY3RQbGFjZWhvbGRlcicpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSwgZXJyb3IgPT4ge1xyXG4gICAgICBsb2FkLmNsb3NlKCk7XHJcbiAgICAgIHN1YmplY3QuZXJyb3IoZXJyb3IpO1xyXG4gICAgICB0aGlzLnRhc2tTZXJ2aWNlLmVycm9yKGVycm9yKTtcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDpgInmi6nmn5DkuKrmtYHnqIvlkI5cclxuICAgKiBAcGFyYW0gZGF0YVxyXG4gICAqL1xyXG4gIHNlbGVjdFByb2Nlc3NDaGFuZ2UoZGF0YTogYW55KSB7XHJcbiAgICB0aGlzLm5vZGVDb21iby5vbkNsZWFyKCk7XHJcbiAgICB0aGlzLmdldERlc3ROb2RlcyhkYXRhLmRhdGEuaWQpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5qC55o2u6YCJ5oup55qE5rWB56iL5a6a5LmJaWTojrflj5bkuIvkuIDnjq/oioLkv6Hmga9cclxuICAgKiBAcGFyYW0gc2VsZWN0ZWRQcm9jZXNzSWQgXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBnZXREZXN0Tm9kZXMoc2VsZWN0ZWRQcm9jZXNzSWQ6IHN0cmluZykge1xyXG4gICAgdGhpcy5zZWxlY3RlZFByb2Nlc3NJZCA9IHNlbGVjdGVkUHJvY2Vzc0lkO1xyXG4gICAgdGhpcy5kZXN0Tm9kZXMgPSBbXTtcclxuICAgIHRoaXMubm9kZVBsYWNlaG9sZGVyID0gJyc7XHJcbiAgICB0aGlzLmNsZWFyQXNzaWduSW5mb3MoKTtcclxuXHJcbiAgICB2YXIgcGF5bG9hZCA9IG5ldyBTdGFydFByb2Nlc3NQYXlsb2FkKCk7XHJcbiAgICBwYXlsb2FkLnByb2Nlc3NEZWZpbml0aW9uSWQgPSB0aGlzLnNlbGVjdGVkUHJvY2Vzc0lkO1xyXG4gICAgcGF5bG9hZC5kYXRhSWQgPSB0aGlzLnBheWxvYWQuZGF0YUlkO1xyXG5cclxuICAgIGNvbnN0IGxvYWQgPSB0aGlzLmxvYWRpbmdTZXJ2aWNlLnNob3coKTtcclxuICAgIHRoaXMudGFza1NlcnZpY2Uuc3RhcnRQcm9jZXNzU2ltdWxhdGUocGF5bG9hZCkuc3Vic2NyaWJlKChyZXNwb25zZTogU2ltdWxhdGVSZXNwb25zZSkgPT4ge1xyXG4gICAgICBsb2FkLmNsb3NlKCk7XHJcbiAgICAgIHRoaXMucmVzcG9uc2UgPSByZXNwb25zZTtcclxuICAgICAgdGhpcy5zZXROZXh0Tm9kZShyZXNwb25zZSk7XHJcbiAgICB9LCBlcnJvciA9PiB7XHJcbiAgICAgIGxvYWQuY2xvc2UoKTtcclxuICAgICAgdGhpcy50YXNrU2VydmljZS5lcnJvcihlcnJvcik7XHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6YCJ5oup6IqC54K55ZCO5LqL5Lu2XHJcbiAgICovXHJcbiAgc2VsZWN0Tm9kZUNoYW5nZShkYXRhOiBhbnkpIHtcclxuICAgIHRoaXMuY2xlYXJBc3NpZ25JbmZvcygpO1xyXG4gICAgdGhpcy5zZWxlY3RlZE5vZGVJZCA9IGRhdGEuZGF0YS5pZDtcclxuICAgIGNvbnN0IG5vZGVOYW1lcyA9IGRhdGEuZGF0YS5uYW1lLnNwbGl0KCfvvIwnKTtcclxuXHJcbiAgICBpZiAodGhpcy5yZXNwb25zZS5zaW11bGF0aW9uUGF0aHNbZGF0YS5pbmRleF0ubm9kZUluZm9MaXN0LmV2ZXJ5KG5vZGUgPT4gbm9kZS5yZXNvbHZlZCA9PT0gdHJ1ZSkpIHsvL+W3sumihOino+aekOWPguS4juiAhVxyXG4gICAgICB0aGlzLnNldEFzc2lnbkluZm8odGhpcy5yZXNwb25zZS5zaW11bGF0aW9uUGF0aHNbZGF0YS5pbmRleF0pO1xyXG4gICAgfSBlbHNlIHsvL+acqumihOino+aekOWPguS4juiAhVxyXG4gICAgICBsZXQgcGF5bG9hZCA9IG5ldyBTdGFydFByb2Nlc3NQYXlsb2FkKCk7XHJcbiAgICAgIHBheWxvYWQucHJvY2Vzc0RlZmluaXRpb25JZCA9IHRoaXMuc2VsZWN0ZWRQcm9jZXNzSWQ7XHJcbiAgICAgIHBheWxvYWQuZGF0YUlkID0gdGhpcy5wYXlsb2FkLmRhdGFJZDtcclxuICAgICAgcGF5bG9hZC5uZXh0Rmxvd05vZGVzID0gW107XHJcblxyXG4gICAgICB0aGlzLnNlbGVjdGVkTm9kZUlkLnNwbGl0KCfvvIwnKS5mb3JFYWNoKChub2RlSWQsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgbGV0IG5leHRGbG93Tm9kZSA9IG5ldyBGbG93Tm9kZUluZm8oKTtcclxuICAgICAgICBuZXh0Rmxvd05vZGUuYWN0aXZpdHlEZWZpbml0aW9uSWQgPSBub2RlSWQ7XHJcbiAgICAgICAgbmV4dEZsb3dOb2RlLmFjdGl2aXR5RGVmaW5pdGlvbk5hbWUgPSBub2RlTmFtZXNbaW5kZXhdO1xyXG4gICAgICAgIHBheWxvYWQubmV4dEZsb3dOb2Rlcy5wdXNoKG5leHRGbG93Tm9kZSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgbG9hZCA9IHRoaXMubG9hZGluZ1NlcnZpY2Uuc2hvdygpO1xyXG4gICAgICB0aGlzLnRhc2tTZXJ2aWNlLnN0YXJ0UHJvY2Vzc1NpbXVsYXRlKHBheWxvYWQpLnN1YnNjcmliZSgocmVzcG9uc2U6IFNpbXVsYXRlUmVzcG9uc2UpID0+IHtcclxuICAgICAgICBsb2FkLmNsb3NlKCk7XHJcbiAgICAgICAgdGhpcy5zZXRBc3NpZ25JbmZvKHJlc3BvbnNlLnNpbXVsYXRpb25QYXRoc1swXSk7Ly/pgInmi6nnmoTkuIvkuIDnjq/oioLlupTor6XlnKjlkIzkuIDmnaHot6/lvoTkuIrvvIzmlYXlj5ZzaW11bGF0aW9uUGF0aHNbMF1cclxuICAgICAgfSwgZXJyb3IgPT4ge1xyXG4gICAgICAgIGxvYWQuY2xvc2UoKTtcclxuICAgICAgICB0aGlzLnRhc2tTZXJ2aWNlLmVycm9yKGVycm9yKTtcclxuICAgICAgfSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gKiDlrp7njrDnnJ/mraPnmoTmj5DkuqRcclxuICovXHJcbiAgc3RhcnRQcm9jZXNzU3VibWl0KCkge1xyXG4gICAgaWYgKCF0aGlzLnNlbGVjdGVkUHJvY2Vzc0lkKSB7XHJcbiAgICAgIHRoaXMub3BlbkZyb21JZnJhbWUgPyB0aGlzLm1lc3NhZ2VyLndhcm5pbmcodGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgnc3RhcnRQcm9jZXNzLnNlbGVjdFByb2Nlc3MnKSkgOlxyXG4gICAgICAgIHRoaXMubm90aWZ5Lndhcm5pbmcodGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgnc3RhcnRQcm9jZXNzLnNlbGVjdFByb2Nlc3MnKSk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICghdGhpcy5zZWxlY3RlZE5vZGVJZCkge1xyXG4gICAgICB0aGlzLm9wZW5Gcm9tSWZyYW1lID8gdGhpcy5tZXNzYWdlci53YXJuaW5nKHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3N0YXJ0UHJvY2Vzcy5zZWxlY3ROb2RlJykpIDpcclxuICAgICAgICB0aGlzLm5vdGlmeS53YXJuaW5nKHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3N0YXJ0UHJvY2Vzcy5zZWxlY3ROb2RlJykpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5hc3NpZ25JbmZvcy5maWx0ZXIoaW5mbyA9PiAoaW5mby5hc3NpZ25lZUluZm8gfHwgaW5mby5zZWxlY3RlZEFzc2lnbmVlcy5sZW5ndGgpICYmICFpbmZvLmFzc2lnbmVlcy5sZW5ndGgpLmxlbmd0aCkgey8v56m65Y+C5LiO6ICF562W55Wl5pe277yM5LiN5o+Q56S66YCJ5Lq6XHJcbiAgICAgIHRoaXMub3BlbkZyb21JZnJhbWUgPyB0aGlzLm1lc3NhZ2VyLndhcm5pbmcodGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgndGFzay5zZWxlY3RQcm9jZXNzb3InKSkgOlxyXG4gICAgICAgIHRoaXMubm90aWZ5Lndhcm5pbmcodGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgndGFzay5zZWxlY3RQcm9jZXNzb3InKSk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBub2Rlczogc3RyaW5nW10gPSB0aGlzLnNlbGVjdGVkTm9kZUlkLnNwbGl0KCfvvIwnKTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgbGV0IG5leHRGbG93Tm9kZTogRmxvd05vZGVJbmZvID0ge1xyXG4gICAgICAgIGFjdGl2aXR5RGVmaW5pdGlvbklkOiBub2Rlc1tpXSxcclxuICAgICAgICBhY3Rpdml0eURlZmluaXRpb25OYW1lOiB0aGlzLmFzc2lnbkluZm9zW2ldLmFjdGl2aXR5TmFtZSxcclxuICAgICAgICBkZXBlbmRlbmN5OiB0aGlzLmFzc2lnbkluZm9zW2ldLmRlcGVuZGVuY3ksXHJcbiAgICAgICAgc2VsZWN0ZWRBc3NpZ25lZXM6IHRoaXMuYXNzaWduSW5mb3NbaV0uYXNzaWduZWVJbmZvID8gdGhpcy5hc3NpZ25JbmZvc1tpXS5hc3NpZ25lZXMgOiBbXSxcclxuICAgICAgICBhc3NpZ25lZUluZm86IG51bGwsXHJcbiAgICAgICAgcmVzb2x2ZWQ6IGZhbHNlLFxyXG4gICAgICAgIGFub255bW91czogZmFsc2UsXHJcbiAgICAgICAgYW5vbnltb3VzVGV4dDogJydcclxuICAgICAgfVxyXG4gICAgICAvL+iKgueCueaJvuS4jeWIsOS6uu+8jOS4lOW8guW4uOaPkOekuu+8jOWJjeerr+aOp+WItuS9j++8jOS4jeWFgeiuuOi1sOaPkOS6pOivt+axgu+8iOaehOS7tuS6i+WKoemXrumimO+8ieOAguW5tuihjOWcuuaZr+S4i+aaguS4jeWkhOeQhlxyXG4gICAgICBpZiAodGhpcy5yZXNwb25zZSAmJiB0aGlzLnJlc3BvbnNlLnNpbXVsYXRpb25QYXRocy5sZW5ndGggJiYgIXRoaXMucmVzcG9uc2Uuc2ltdWxhdGlvblBhdGhzWzBdLmlkLnN0YXJ0c1dpdGgoJ1BhcmFsbGVsR2F0ZXdheScpKSB7XHJcbiAgICAgICAgaWYgKG5vZGVzLmxlbmd0aCA9PSAxICYmIG5vZGVzW2ldLnN0YXJ0c1dpdGgoJ1VzZXJBY3Rpdml0eScpICYmIHRoaXMuYXNzaWduSW5mb3NbaV0ucmVzb2x2ZWQgJiYgIXRoaXMuYXNzaWduSW5mb3NbaV0uYXNzaWduZWVJbmZvICYmICF0aGlzLmFzc2lnbkluZm9zW2ldLnNlbGVjdGVkQXNzaWduZWVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgY29uc3Qgc3RyID0gdGhpcy5hc3NpZ25JbmZvc1tpXS5hY3Rpdml0eU5hbWUgKyB0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCdzdGFydFByb2Nlc3Mubm9kZScpICsgdGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgnc3RhcnRQcm9jZXNzLm5vVXNlcicpO1xyXG4gICAgICAgICAgdGhpcy5vcGVuRnJvbUlmcmFtZSA/IHRoaXMubWVzc2FnZXIud2FybmluZyhzdHIpIDogdGhpcy5ub3RpZnkud2FybmluZyhzdHIpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICB0aGlzLnBheWxvYWQubmV4dEZsb3dOb2Rlcy5wdXNoKG5leHRGbG93Tm9kZSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLnBheWxvYWQucHJvY2Vzc0RlZmluaXRpb25JZCA9IHRoaXMuc2VsZWN0ZWRQcm9jZXNzSWQ7XHJcbiAgICB0aGlzLnN1Ym1pdERpc2FibGUgPSB0cnVlO1xyXG4gICAgY29uc3QgbG9hZCA9IHRoaXMubG9hZGluZ1NlcnZpY2Uuc2hvdygpO1xyXG4gICAgdGhpcy50YXNrU2VydmljZS5zdGFydFByb2Nlc3ModGhpcy5wYXlsb2FkKS5zdWJzY3JpYmUoKHJlc3BvbnNlOiBFeGVjdXRpb25SZXNwb25zZSkgPT4ge1xyXG4gICAgICBsb2FkLmNsb3NlKCk7XHJcbiAgICAgIHRoaXMuc3VibWl0RGlzYWJsZSA9IGZhbHNlO1xyXG4gICAgICB0aGlzLnN1YmplY3QubmV4dCh0cnVlKTtcclxuICAgICAgdGhpcy5zdWJqZWN0V2l0aFJlc3BvbnNlLm5leHQocmVzcG9uc2UpO1xyXG4gICAgICBsZXQgbWVzc2FnZUFmdGVyU3VibWl0ID0gdGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgnc3RhcnRQcm9jZXNzLnN1Ym1pdFN1Y2Nlc3MnKTtcclxuICAgICAgaWYgKHRoaXMub3BlbkZyb21JZnJhbWUpIHtcclxuICAgICAgICAod2luZG93LnBhcmVudCBhcyBhbnkpLmdzcFdmU2VydmljZS5ldmVudEhhbmRsZXIoeyBkYXRhOiB7IHR5cGU6IE1lc3NhZ2VUeXBlLlN1Ym1pdFN1Y2Nlc3MsIG1lc3NhZ2U6IG1lc3NhZ2VBZnRlclN1Ym1pdCB9IH0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuaGFuZGxlclNlcnZpY2UuaGFuZGxlU3VibWl0TWVzc2FnZShDb25maWdDb2RlLkluZm9fQWZ0ZXJfU3VibWl0LCB0aGlzLnBheWxvYWQuYml6RGVmS2V5KTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoIXRoaXMub3BlbkZyb21JZnJhbWUgJiYgcmVzcG9uc2UubmVlZEludGVyYWN0aW9uKSB7Ly/mj5DkuqTlrqHmibnlkI7pnIDopoHmjIfmtL7lnLrmma9cclxuICAgICAgICB0aGlzLm5vdGlmeS5pbmZvKHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ2N1ZVdvcmRzLnNlbGVjdCcpXHJcbiAgICAgICAgICArIHJlc3BvbnNlLm5leHRGbG93Tm9kZXNbMF0uYWN0aXZpdHlEZWZpbml0aW9uTmFtZVxyXG4gICAgICAgICAgKyB0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCdjdWVXb3Jkcy5wcm9jZXNzb3InKSk7XHJcbiAgICAgICAgbGV0IHRhc2sgPSBuZXcgVGFza0VudGl0eSgpO1xyXG4gICAgICAgIGxldCBhY3Rpb24gPSBuZXcgVGFza0FjdGlvbigpO1xyXG4gICAgICAgIHRhc2suc291cmNlSWQgPSByZXNwb25zZS5uZXh0Rmxvd05vZGVzWzBdLmFzc2lnbmVlSW5mby53b3JrSXRlbUlkO1xyXG4gICAgICAgIGFjdGlvbi5jb2RlID0gJ0Fzc2lnblVzZXInO1xyXG4gICAgICAgIGFjdGlvbi5uYW1lID0gdGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgnY3VlV29yZHMuYXNzaWduVXNlcicpO1xyXG4gICAgICAgIHRoaXMuaGFuZGxlclNlcnZpY2UuZXhlY3V0ZSh0YXNrLCBhY3Rpb24pLnN1YnNjcmliZShyZSA9PiB7IH0pO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuc2V0U2VsZWN0ZWRQcm9jZXNzQ2FjaGUoKTtcclxuICAgIH0sIChlcnJvcikgPT4ge1xyXG4gICAgICBsb2FkLmNsb3NlKCk7XHJcbiAgICAgIHRoaXMucGF5bG9hZC5uZXh0Rmxvd05vZGVzID0gW107XHJcbiAgICAgIHRoaXMuc3VibWl0RGlzYWJsZSA9IGZhbHNlO1xyXG4gICAgICB0aGlzLnN1YmplY3QubmV4dChmYWxzZSk7Ly/lt7Lnu4/mnInkurrnlKjkuobov5nkuKpzdWJqZWN077yM5o+Q5Lqk5aSx6LSl55qE6K+d6L+U5ZueZmFsc2UgYnkgZmFuZ3BlbmdmZWlAMjAyMTAzMjRcclxuICAgICAgdGhpcy50YXNrU2VydmljZS5lcnJvcihlcnJvcik7XHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6YCJ5oup5rWB56iL5riF56m6XHJcbiAgICovXHJcbiAgc2VsZWN0UHJvY2Vzc0NsZWFyKCkge1xyXG4gICAgdGhpcy5zZWxlY3RlZFByb2Nlc3NJZCA9ICcnO1xyXG4gICAgdGhpcy5kZXN0Tm9kZXMgPSBbXTtcclxuICAgIHRoaXMubm9kZVBsYWNlaG9sZGVyID0gJyc7XHJcbiAgICB0aGlzLnNlbGVjdGVkTm9kZUlkID0gJyc7XHJcbiAgICB0aGlzLmNsZWFyQXNzaWduSW5mb3MoKTtcclxuICAgIHRoaXMucmVzcG9uc2UgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6YCJ5oup6IqC54K55riF56m6XHJcbiAgICovXHJcbiAgc2VsZWN0Tm9kZUNsZWFyKCkge1xyXG4gICAgdGhpcy5zZWxlY3RlZE5vZGVJZCA9ICcnO1xyXG4gICAgdGhpcy5jbGVhckFzc2lnbkluZm9zKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDnlKjmiLfluK7liqnpgInkurpcclxuICAgKi9cclxuICBhZnRlckNvbmZpcm0oZGF0YTogQXNzaWduZWVbXSwgaW5kZXg6IG51bWJlcikge1xyXG4gICAgdGhpcy5hc3NpZ25JbmZvc1tpbmRleF0uYXNzaWduZWVzID0gZGF0YTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOW8ueahhueCueWHu+WPlua2iFxyXG4gICAqL1xyXG4gIGNhbmNlbCgpIHtcclxuICAgIGlmICh0aGlzLm9wZW5Gcm9tSWZyYW1lKSB7XHJcbiAgICAgICh3aW5kb3cucGFyZW50IGFzIGFueSkuZ3NwV2ZTZXJ2aWNlLmV2ZW50SGFuZGxlcih7IGRhdGE6IHsgdHlwZTogTWVzc2FnZVR5cGUuQ2FuY2VsLCBtZXNzYWdlOiAnJyB9IH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5zdWJqZWN0Q2FuY2VsLm5leHQoZmFsc2UpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6I635Y+W5o+Q5Lqk5a6h5om55ZCO6L+U5Zue5YC877yIYm9vbOWei++8jOWFvOWuueWOhuWPsu+8iVxyXG4gICAqL1xyXG4gIGdldFN1YmplY3QoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5zdWJqZWN0LmFzT2JzZXJ2YWJsZSgpO1xyXG4gIH1cclxuICAvKipcclxuICAgKiDojrflj5bmj5DkuqTlrqHmibnlkI7ov5Tlm57lgLzvvIjlrp7kvZPlnovvvIzluKbmtYHnqIvkuIrkuIvmlofvvIlcclxuICAgKi9cclxuICBnZXRTdWJqZWN0V2l0aFJlc3BvbnNlKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuc3ViamVjdFdpdGhSZXNwb25zZS5hc09ic2VydmFibGUoKTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICog54K55Ye75Y+W5raI5ZCO55qEc3ViamVjdO+8jOWFs+mXreeql+WPo+S9v+eUqFxyXG4gICAqIEByZXR1cm5zXHJcbiAgICovXHJcbiAgZ2V0U3ViamVjdENhbmNlbCgpIHtcclxuICAgIHJldHVybiB0aGlzLnN1YmplY3RDYW5jZWwuYXNPYnNlcnZhYmxlKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDorr7nva7kuIvkuIDnjq/oioJcclxuICAgKi9cclxuICBwcml2YXRlIHNldE5leHROb2RlKHJlc3BvbnNlOiBTaW11bGF0ZVJlc3BvbnNlKSB7XHJcbiAgICB0aGlzLmRlc3ROb2RlcyA9IHJlc3BvbnNlLnNpbXVsYXRpb25QYXRocyAmJiByZXNwb25zZS5zaW11bGF0aW9uUGF0aHMubWFwKHBhdGggPT4gKHtcclxuICAgICAgaWQ6IHBhdGgubm9kZUluZm9MaXN0Lm1hcChub2RlID0+IG5vZGUuYWN0aXZpdHlEZWZpbml0aW9uSWQpLmpvaW4oJ++8jCcpLFxyXG4gICAgICBuYW1lOiBwYXRoLm5vZGVJbmZvTGlzdC5tYXAobm9kZSA9PiBub2RlLmFjdGl2aXR5RGVmaW5pdGlvbk5hbWUpLmpvaW4oJ++8jCcpXHJcbiAgICB9KSk7XHJcbiAgICAvL+WkhOeQhum7mOiupOWIhuaUr++8jOaXoOm7mOiupOWIhuaUr+i/lOWbni0xXHJcbiAgICBjb25zdCBkZWZhdWx0SW5kZXggPSByZXNwb25zZS5zaW11bGF0aW9uUGF0aHMuZmluZEluZGV4KGEgPT4gYS5kZWZhdWx0KTtcclxuICAgIGlmIChkZWZhdWx0SW5kZXggPiAtMSkge1xyXG4gICAgICB0aGlzLnNlbGVjdGVkTm9kZUlkID0gdGhpcy5kZXN0Tm9kZXNbZGVmYXVsdEluZGV4XS5pZDtcclxuICAgICAgdGhpcy5ub2RlUGxhY2Vob2xkZXIgPSB0aGlzLmRlc3ROb2Rlc1tkZWZhdWx0SW5kZXhdLm5hbWUuaW5kZXhPZign77yMJykgPiAtMSA/IHJlc3BvbnNlLnNpbXVsYXRpb25QYXRoc1tkZWZhdWx0SW5kZXhdLm5hbWUgOiB0aGlzLmRlc3ROb2Rlc1tkZWZhdWx0SW5kZXhdLm5hbWU7XHJcbiAgICAgIHRoaXMuc2V0QXNzaWduSW5mbyhyZXNwb25zZS5zaW11bGF0aW9uUGF0aHNbZGVmYXVsdEluZGV4XSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLm5vZGVQbGFjZWhvbGRlciA9IHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3Rhc2suc2VsZWN0UGxhY2Vob2xkZXInKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiuvue9ruW9k+WJjeaMh+a0vuS/oeaBr+W4ruWKqeWPguaVsFxyXG4gICAqL1xyXG4gIHByaXZhdGUgc2V0QXNzaWduSW5mbyhzaW11bGF0aW9uUGF0aHM6IFNpbXVsYXRpb25QYXRoKSB7XHJcbiAgICB0aGlzLmFzc2lnbkluZm9zID0gW107XHJcbiAgICB0aGlzLnNlbGVjdGVkTm9kZUlkLnNwbGl0KCfvvIwnKS5mb3JFYWNoKG5vZGVJZCA9PiB7XHJcbiAgICAgIGNvbnN0IG5vZGUgPSBzaW11bGF0aW9uUGF0aHMubm9kZUluZm9MaXN0LmZpbmQobm9kZSA9PiBub2RlLmFjdGl2aXR5RGVmaW5pdGlvbklkID09PSBub2RlSWQpO1xyXG4gICAgICBpZiAobm9kZSkge1xyXG4gICAgICAgIHRoaXMuYXNzaWduSW5mb3MucHVzaCh7XHJcbiAgICAgICAgICBzZWxlY3RlZEFzc2lnbmVlczogbm9kZS5zZWxlY3RlZEFzc2lnbmVlcyxcclxuICAgICAgICAgIGFzc2lnbmVlSW5mbzogbm9kZS5hc3NpZ25lZUluZm8sXHJcbiAgICAgICAgICBhc3NpZ25lZXM6IG5vZGUuc2VsZWN0ZWRBc3NpZ25lZXMubWFwKHVzZXIgPT4geyByZXR1cm4geyBpZDogdXNlci5pZCwgbmFtZTogdXNlci5uYW1lIH0gfSksXHJcbiAgICAgICAgICBhY3Rpdml0eU5hbWU6IG5vZGUuYWN0aXZpdHlEZWZpbml0aW9uTmFtZSxcclxuICAgICAgICAgIGRlcGVuZGVuY3k6IG5vZGUuZGVwZW5kZW5jeSxcclxuICAgICAgICAgIGFub255bW91czogbm9kZS5hbm9ueW1vdXMsXHJcbiAgICAgICAgICBhbm9ueW1vdXNUZXh0OiBub2RlLmFub255bW91c1RleHQsXHJcbiAgICAgICAgICByZXNvbHZlZDogbm9kZS5yZXNvbHZlZFxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5hc3NpZ25JbmZvcy5wdXNoKHtcclxuICAgICAgICAgIHNlbGVjdGVkQXNzaWduZWVzOiBbXSxcclxuICAgICAgICAgIGFzc2lnbmVlSW5mbzogbnVsbCxcclxuICAgICAgICAgIGFzc2lnbmVlczogW10sXHJcbiAgICAgICAgICBhY3Rpdml0eU5hbWU6ICcnLFxyXG4gICAgICAgICAgZGVwZW5kZW5jeTogJycsXHJcbiAgICAgICAgICBhbm9ueW1vdXM6IGZhbHNlLFxyXG4gICAgICAgICAgYW5vbnltb3VzVGV4dDogJycsXHJcbiAgICAgICAgICByZXNvbHZlZDogZmFsc2UsXHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOa4heepuuW9k+WJjeaMh+a0vuS/oeaBr+W4ruWKqeWPguaVsFxyXG4gICAqL1xyXG4gIHByaXZhdGUgY2xlYXJBc3NpZ25JbmZvcygpIHtcclxuICAgIHRoaXMuYXNzaWduSW5mb3MgPSBbe1xyXG4gICAgICBzZWxlY3RlZEFzc2lnbmVlczogW10sXHJcbiAgICAgIGFzc2lnbmVlSW5mbzogbnVsbCxcclxuICAgICAgYXNzaWduZWVzOiBbXSxcclxuICAgICAgYWN0aXZpdHlOYW1lOiAnJyxcclxuICAgICAgZGVwZW5kZW5jeTogJycsXHJcbiAgICAgIGFub255bW91czogZmFsc2UsXHJcbiAgICAgIGFub255bW91c1RleHQ6ICcnLFxyXG4gICAgICByZXNvbHZlZDogZmFsc2UsXHJcbiAgICB9XTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiOt+WPlua1j+iniOWZqOe8k+WtmO+8jOS4iuasoea1geeoi+mAieaLqeeahOe7k+aenFxyXG4gICAqL1xyXG4gIHByaXZhdGUgZ2V0U2VsZWN0ZWRQcm9jZXNzQ2FjaGUocHJvY2Vzc0NhdGVnb3J5SWQ6IHN0cmluZykge1xyXG4gICAgbGV0IGJyb3dzZXJDYWNoZSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJnc3BXZlN0YXJ0UHJvY2Vzc1wiKSkgYXMgU3RhcnRQcm9jZXNzQ2FjaGU7XHJcbiAgICBpZiAoYnJvd3NlckNhY2hlICYmIGJyb3dzZXJDYWNoZS5zZWxlY3RlZFByb2Nlc3NMaXN0KSB7XHJcbiAgICAgIHJldHVybiBicm93c2VyQ2FjaGUuc2VsZWN0ZWRQcm9jZXNzTGlzdC5maW5kKGEgPT4gYS5wcm9jZXNzQ2F0ZWdvcnkgPT0gcHJvY2Vzc0NhdGVnb3J5SWQpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOa1j+iniOWZqOe8k+WtmOiusOS4i+a1geeoi+mAieaLqeeahOe7k+aenFxyXG4gICAqL1xyXG4gIHByaXZhdGUgc2V0U2VsZWN0ZWRQcm9jZXNzQ2FjaGUoKSB7XHJcbiAgICBjb25zdCBwcm9jZXNzQ2F0ZWdvcnlJZCA9IHRoaXMucGF5bG9hZC5iaXpEZWZLZXk7XHJcbiAgICBjb25zdCBwcm9jZXNzRGVmaW5pdGlvbklkID0gdGhpcy5wYXlsb2FkLnByb2Nlc3NEZWZpbml0aW9uSWQ7XHJcbiAgICBsZXQgcHJvY2VzcyA9IHRoaXMuZGVzdFByb2Nlc3Nlcy5maW5kKGEgPT4gYS5pZCA9PSBwcm9jZXNzRGVmaW5pdGlvbklkKTtcclxuICAgIGNvbnN0IHByb2Nlc3NEZWZpbml0aW9uTmFtZSA9IHByb2Nlc3MgJiYgcHJvY2Vzcy5uYW1lO1xyXG5cclxuICAgIGxldCBicm93c2VyQ2FjaGUgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiZ3NwV2ZTdGFydFByb2Nlc3NcIikpIGFzIFN0YXJ0UHJvY2Vzc0NhY2hlO1xyXG4gICAgaWYgKGJyb3dzZXJDYWNoZSAmJiBicm93c2VyQ2FjaGUuc2VsZWN0ZWRQcm9jZXNzTGlzdCkge1xyXG4gICAgICBsZXQgc2VsZWN0ZWRQcm9jZXNzTGlzdCA9IGJyb3dzZXJDYWNoZS5zZWxlY3RlZFByb2Nlc3NMaXN0O1xyXG4gICAgICBpZiAoc2VsZWN0ZWRQcm9jZXNzTGlzdC5maW5kSW5kZXgoYSA9PiBhLnByb2Nlc3NDYXRlZ29yeSA9PSBwcm9jZXNzQ2F0ZWdvcnlJZCkgPiAtMSkge1xyXG4gICAgICAgIHNlbGVjdGVkUHJvY2Vzc0xpc3QubWFwKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgaWYgKGl0ZW0ucHJvY2Vzc0NhdGVnb3J5ID09IHByb2Nlc3NDYXRlZ29yeUlkKSB7XHJcbiAgICAgICAgICAgIGl0ZW0ucHJvY2Vzc0RlZmluaXRpb25JZCA9IHByb2Nlc3NEZWZpbml0aW9uSWQ7XHJcbiAgICAgICAgICAgIGl0ZW0ucHJvY2Vzc0RlZmluaXRpb25OYW1lID0gcHJvY2Vzc0RlZmluaXRpb25OYW1lO1xyXG4gICAgICAgICAgICBpdGVtLmxvZ1RpbWUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGJyb3dzZXJDYWNoZS5zZWxlY3RlZFByb2Nlc3NMaXN0ID0gc2VsZWN0ZWRQcm9jZXNzTGlzdDtcclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImdzcFdmU3RhcnRQcm9jZXNzXCIsIEpTT04uc3RyaW5naWZ5KGJyb3dzZXJDYWNoZSkpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGxldCBpdGVtID0gbmV3IFNlbGVjdGVkUHJvY2Vzc0l0ZW0ocHJvY2Vzc0NhdGVnb3J5SWQsIHByb2Nlc3NEZWZpbml0aW9uSWQsIHByb2Nlc3NEZWZpbml0aW9uTmFtZSk7XHJcbiAgICAgICAgc2VsZWN0ZWRQcm9jZXNzTGlzdC5wdXNoKGl0ZW0pO1xyXG4gICAgICAgIGJyb3dzZXJDYWNoZS5zZWxlY3RlZFByb2Nlc3NMaXN0ID0gc2VsZWN0ZWRQcm9jZXNzTGlzdDtcclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImdzcFdmU3RhcnRQcm9jZXNzXCIsIEpTT04uc3RyaW5naWZ5KGJyb3dzZXJDYWNoZSkpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBsZXQgYnJvd3NlckNhY2hlID0gbmV3IFN0YXJ0UHJvY2Vzc0NhY2hlKCk7XHJcbiAgICAgIGxldCBzZWxlY3RlZFByb2Nlc3NMaXN0ID0gW107XHJcbiAgICAgIGxldCBpdGVtID0gbmV3IFNlbGVjdGVkUHJvY2Vzc0l0ZW0ocHJvY2Vzc0NhdGVnb3J5SWQsIHByb2Nlc3NEZWZpbml0aW9uSWQsIHByb2Nlc3NEZWZpbml0aW9uTmFtZSk7XHJcbiAgICAgIHNlbGVjdGVkUHJvY2Vzc0xpc3QucHVzaChpdGVtKTtcclxuICAgICAgYnJvd3NlckNhY2hlLnNlbGVjdGVkUHJvY2Vzc0xpc3QgPSBzZWxlY3RlZFByb2Nlc3NMaXN0O1xyXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImdzcFdmU3RhcnRQcm9jZXNzXCIsIEpTT04uc3RyaW5naWZ5KGJyb3dzZXJDYWNoZSkpO1xyXG5cclxuICAgIH1cclxuXHJcbiAgfVxyXG5cclxufVxyXG4iXX0=