/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, TemplateRef, ViewChild, Input } from '@angular/core';
import { HttpService } from '@ecp-caf/caf-common';
import { of, forkJoin } from 'rxjs';
import { FormFormat } from '../entities/form-format';
import { FormFormatConfig, FormButtonConfig, FormFieldConfig } from '../entities/form-format-config';
import { DatagridComponent } from '@farris/ui-datagrid';
import { MessagerService } from '@farris/ui-messager';
import { NotifyService } from '@farris/ui-notify';
import { switchMap, catchError } from 'rxjs/operators';
import { FormOperationConfigComponent } from '../form-operation-config/form-operation-config.component';
import { TreeTableComponent } from '@farris/ui-treetable';
var FormFormatConfigComponent = /** @class */ (function () {
    function FormFormatConfigComponent(http, message, notify) {
        this.http = http;
        this.message = message;
        this.notify = notify;
        this.config = new FormFormatConfig();
        this.formFormat = new FormFormat();
        this.state = 'edit';
        this.showMethodTab = true;
        this.buttonCols = [];
        this.buttonConfigs = new Array();
        this.fieldCols = [];
        this.fieldConfigs = new Array();
        this.formatFieldList = new Array();
    }
    Object.defineProperty(FormFormatConfigComponent.prototype, "formFormatId", {
        get: /**
         * @return {?}
         */
        function () {
            return this._formFormatId;
        },
        set: /**
         * @param {?} v
         * @return {?}
         */
        function (v) {
            this._formFormatId = v;
            this.config.formFormatId = v;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FormFormatConfigComponent.prototype, "formatConfigId", {
        get: /**
         * @return {?}
         */
        function () {
            return this._formatConfigId;
        },
        set: /**
         * @param {?} v
         * @return {?}
         */
        function (v) {
            this._formatConfigId = v;
            if (!v) {
                this.state = 'new';
            }
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    FormFormatConfigComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.buttonCols = [
            { field: 'buttonName', width: 100, title: '按钮名称' },
            // { field: 'buttonId', width: 100, title: '按钮标识' },
            {
                title: '是否可用',
                field: 'enable',
                width: 80,
                template: this.btnEnable,
                align: 'center',
                hAlign: 'center'
            },
            {
                title: '是否禁用',
                field: 'disabled',
                width: 80,
                template: this.btnDisabled,
                align: 'center',
                hAlign: 'center'
            },
            {
                title: '是否隐藏',
                field: 'hidden',
                width: 80,
                template: this.btnHidden,
                align: 'center',
                hAlign: 'center'
            }
        ];
        this.fieldCols = [
            { field: 'fieldName', width: 100, title: '字段名称' },
            // { field: 'fieldId', width: 100, title: '字段标识' },
            {
                title: '是否可写',
                field: 'editable',
                width: 80,
                template: this.fieldEditable,
                align: 'center',
                hAlign: 'center'
            },
            {
                title: '是否只读',
                field: 'readonly',
                width: 80,
                template: this.fieldReadonly,
                align: 'center',
                hAlign: 'center'
            },
            {
                title: '是否隐藏',
                field: 'hidden',
                width: 80,
                template: this.fieldHidden,
                align: 'center',
                hAlign: 'center'
            },
            {
                title: '是否必填',
                field: 'required',
                width: 80,
                template: this.fieldRequired,
                align: 'center',
                hAlign: 'center'
            }
        ];
        this.getConfig();
    };
    /**
     * @return {?}
     */
    FormFormatConfigComponent.prototype.submit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.validator()) {
            this.setBtnAndFieldConfigs();
            if (this.state === 'new' &&
                this.config.formButtonConfigs.length === 0 &&
                this.config.formFieldConfigs.length === 0 &&
                this.operationConfig.operations.length === 0) {
                return of({ result: true, configId: null });
            }
            else {
                return this.saveConfig(this.config).pipe(switchMap((/**
                 * @param {?} re
                 * @return {?}
                 */
                function (re) {
                    return of({ result: true, configId: _this.config.id });
                })), catchError((/**
                 * @param {?} re
                 * @return {?}
                 */
                function (re) {
                    _this.message.error('保存配置失败，请联系管理员查看原因！');
                    return of({ result: false, configId: _this.config.id });
                })));
            }
        }
        else {
            return of({ result: false, configId: null });
        }
    };
    /**
     * @param {?} bool
     * @param {?} field
     * @param {?} id
     * @return {?}
     */
    FormFormatConfigComponent.prototype.btnConfigChange = /**
     * @param {?} bool
     * @param {?} field
     * @param {?} id
     * @return {?}
     */
    function (bool, field, id) {
        var e_1, _a;
        if (bool) {
            try {
                for (var _b = tslib_1.__values(this.buttonConfigs), _c = _b.next(); !_c.done; _c = _b.next()) {
                    var b = _c.value;
                    if (b.id === id) {
                        switch (field) {
                            case 'enable':
                                b.enable = bool;
                                b.disabled = false;
                                b.hidden = false;
                                break;
                            case 'disabled':
                                b.disabled = bool;
                                b.enable = false;
                                b.hidden = false;
                                break;
                            case 'hidden':
                                b.hidden = bool;
                                b.disabled = false;
                                b.enable = false;
                                break;
                        }
                    }
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                }
                finally { if (e_1) throw e_1.error; }
            }
        }
    };
    /**
     * @param {?} operation
     * @return {?}
     */
    FormFormatConfigComponent.prototype.btnBatchOperate = /**
     * @param {?} operation
     * @return {?}
     */
    function (operation) {
        var e_2, _a;
        /** @type {?} */
        var checkeds = this.btnGrid.checkedRows;
        if (checkeds && checkeds.length > 0) {
            try {
                for (var checkeds_1 = tslib_1.__values(checkeds), checkeds_1_1 = checkeds_1.next(); !checkeds_1_1.done; checkeds_1_1 = checkeds_1.next()) {
                    var c = checkeds_1_1.value;
                    this.btnConfigChange(true, operation, c.id);
                }
            }
            catch (e_2_1) { e_2 = { error: e_2_1 }; }
            finally {
                try {
                    if (checkeds_1_1 && !checkeds_1_1.done && (_a = checkeds_1.return)) _a.call(checkeds_1);
                }
                finally { if (e_2) throw e_2.error; }
            }
        }
    };
    /**
     * @return {?}
     */
    FormFormatConfigComponent.prototype.btnBatchReset = /**
     * @return {?}
     */
    function () {
        var e_3, _a;
        /** @type {?} */
        var checkeds = this.btnGrid.checkedRows;
        if (checkeds && checkeds.length > 0) {
            var _loop_1 = function (c) {
                var e_4, _a;
                /** @type {?} */
                var button = this_1.formFormat.formButtons.find((/**
                 * @param {?} b
                 * @return {?}
                 */
                function (b) { return b.id === c.id; }));
                try {
                    for (var _b = tslib_1.__values(this_1.buttonConfigs), _c = _b.next(); !_c.done; _c = _b.next()) {
                        var b = _c.value;
                        if (b.id === c.id) {
                            b.enable = button.buttonState === 'Enable' ? true : false;
                            b.disabled = button.buttonState === 'Disabled' ? true : false;
                            b.hidden = button.buttonState === 'Hidden' ? true : false;
                        }
                    }
                }
                catch (e_4_1) { e_4 = { error: e_4_1 }; }
                finally {
                    try {
                        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                    }
                    finally { if (e_4) throw e_4.error; }
                }
            };
            var this_1 = this;
            try {
                for (var checkeds_2 = tslib_1.__values(checkeds), checkeds_2_1 = checkeds_2.next(); !checkeds_2_1.done; checkeds_2_1 = checkeds_2.next()) {
                    var c = checkeds_2_1.value;
                    _loop_1(c);
                }
            }
            catch (e_3_1) { e_3 = { error: e_3_1 }; }
            finally {
                try {
                    if (checkeds_2_1 && !checkeds_2_1.done && (_a = checkeds_2.return)) _a.call(checkeds_2);
                }
                finally { if (e_3) throw e_3.error; }
            }
        }
    };
    /**
     * @param {?} bool
     * @param {?} field
     * @param {?} id
     * @return {?}
     */
    FormFormatConfigComponent.prototype.fieldConfigChange = /**
     * @param {?} bool
     * @param {?} field
     * @param {?} id
     * @return {?}
     */
    function (bool, field, id) {
        if (bool) {
            this.fieldSwitchChange(this.fieldConfigs, field, id);
        }
    };
    /**
     * @private
     * @param {?} fieldConfigs
     * @param {?} field
     * @param {?} id
     * @return {?}
     */
    FormFormatConfigComponent.prototype.fieldSwitchChange = /**
     * @private
     * @param {?} fieldConfigs
     * @param {?} field
     * @param {?} id
     * @return {?}
     */
    function (fieldConfigs, field, id) {
        var e_5, _a;
        if (fieldConfigs.length > 0) {
            try {
                for (var fieldConfigs_1 = tslib_1.__values(fieldConfigs), fieldConfigs_1_1 = fieldConfigs_1.next(); !fieldConfigs_1_1.done; fieldConfigs_1_1 = fieldConfigs_1.next()) {
                    var f = fieldConfigs_1_1.value;
                    if (f.data.id === id) {
                        switch (field) {
                            case 'editable':
                                f.data.editable = true;
                                f.data.readonly = false;
                                f.data.hidden = false;
                                f.data.required = false;
                                break;
                            case 'readonly':
                                f.data.editable = false;
                                f.data.readonly = true;
                                f.data.hidden = false;
                                f.data.required = false;
                                break;
                            case 'hidden':
                                f.data.editable = false;
                                f.data.readonly = false;
                                f.data.hidden = true;
                                f.data.required = false;
                                break;
                            case 'required':
                                f.data.editable = false;
                                f.data.readonly = false;
                                f.data.hidden = false;
                                f.data.required = true;
                                break;
                        }
                        return;
                    }
                    else {
                        if (f.children && f.children.length > 0) {
                            this.fieldSwitchChange(f.children, field, id);
                        }
                    }
                }
            }
            catch (e_5_1) { e_5 = { error: e_5_1 }; }
            finally {
                try {
                    if (fieldConfigs_1_1 && !fieldConfigs_1_1.done && (_a = fieldConfigs_1.return)) _a.call(fieldConfigs_1);
                }
                finally { if (e_5) throw e_5.error; }
            }
        }
    };
    /**
     * @param {?} operation
     * @return {?}
     */
    FormFormatConfigComponent.prototype.fieldBatchOperate = /**
     * @param {?} operation
     * @return {?}
     */
    function (operation) {
        var e_6, _a;
        /** @type {?} */
        var checkeds = this.fieldTree.checkeds;
        if (checkeds && checkeds.length > 0) {
            try {
                for (var checkeds_3 = tslib_1.__values(checkeds), checkeds_3_1 = checkeds_3.next(); !checkeds_3_1.done; checkeds_3_1 = checkeds_3.next()) {
                    var c = checkeds_3_1.value;
                    this.fieldConfigChange(true, operation, c.data.id);
                }
            }
            catch (e_6_1) { e_6 = { error: e_6_1 }; }
            finally {
                try {
                    if (checkeds_3_1 && !checkeds_3_1.done && (_a = checkeds_3.return)) _a.call(checkeds_3);
                }
                finally { if (e_6) throw e_6.error; }
            }
        }
    };
    /**
     * @return {?}
     */
    FormFormatConfigComponent.prototype.fieldBatchReset = /**
     * @return {?}
     */
    function () {
        var e_7, _a;
        /** @type {?} */
        var checkeds = this.fieldTree.checkeds;
        if (checkeds && checkeds.length > 0) {
            var _loop_2 = function (c) {
                /** @type {?} */
                var field = this_2.formatFieldList.find((/**
                 * @param {?} f
                 * @return {?}
                 */
                function (f) { return f.id === c.data.id; }));
                this_2.resetFieldConfig(this_2.fieldConfigs, c.data.id, field);
            };
            var this_2 = this;
            try {
                for (var checkeds_4 = tslib_1.__values(checkeds), checkeds_4_1 = checkeds_4.next(); !checkeds_4_1.done; checkeds_4_1 = checkeds_4.next()) {
                    var c = checkeds_4_1.value;
                    _loop_2(c);
                }
            }
            catch (e_7_1) { e_7 = { error: e_7_1 }; }
            finally {
                try {
                    if (checkeds_4_1 && !checkeds_4_1.done && (_a = checkeds_4.return)) _a.call(checkeds_4);
                }
                finally { if (e_7) throw e_7.error; }
            }
        }
    };
    /**
     * @param {?} fieldConfigs
     * @param {?} id
     * @param {?} field
     * @return {?}
     */
    FormFormatConfigComponent.prototype.resetFieldConfig = /**
     * @param {?} fieldConfigs
     * @param {?} id
     * @param {?} field
     * @return {?}
     */
    function (fieldConfigs, id, field) {
        var e_8, _a;
        if (fieldConfigs.length > 0) {
            try {
                for (var fieldConfigs_2 = tslib_1.__values(fieldConfigs), fieldConfigs_2_1 = fieldConfigs_2.next(); !fieldConfigs_2_1.done; fieldConfigs_2_1 = fieldConfigs_2.next()) {
                    var f = fieldConfigs_2_1.value;
                    if (f.leaf === true && f.data.id === id) {
                        f.data.editable = field.fieldState === 'Editable' ? true : false;
                        f.data.readonly = field.fieldState === 'Readonly' ? true : false;
                        f.data.hidden = field.fieldState === 'Hidden' ? true : false;
                        f.data.required = field.fieldState === 'Required' ? true : false;
                        return;
                    }
                    else {
                        if (f.children && f.children.length > 0) {
                            this.resetFieldConfig(f.children, id, field);
                        }
                    }
                }
            }
            catch (e_8_1) { e_8 = { error: e_8_1 }; }
            finally {
                try {
                    if (fieldConfigs_2_1 && !fieldConfigs_2_1.done && (_a = fieldConfigs_2.return)) _a.call(fieldConfigs_2);
                }
                finally { if (e_8) throw e_8.error; }
            }
        }
    };
    /**
     * @private
     * @return {?}
     */
    FormFormatConfigComponent.prototype.validator = /**
     * @private
     * @return {?}
     */
    function () {
        return this.operationConfig.validator();
    };
    /**
     * @private
     * @return {?}
     */
    FormFormatConfigComponent.prototype.setBtnAndFieldConfigs = /**
     * @private
     * @return {?}
     */
    function () {
        var e_9, _a;
        this.config.formButtonConfigs = new Array();
        var _loop_3 = function (btn) {
            /** @type {?} */
            var button = this_3.formFormat.formButtons.find((/**
             * @param {?} b
             * @return {?}
             */
            function (b) { return b.buttonId === btn.buttonId; }));
            /** @type {?} */
            var btnConfig = new FormButtonConfig();
            btnConfig.buttonId = btn.buttonId;
            if (btn.enable) {
                btnConfig.buttonState = 'Enable';
            }
            else if (btn.disabled) {
                btnConfig.buttonState = 'Disabled';
            }
            else if (btn.hidden) {
                btnConfig.buttonState = 'Hidden';
            }
            else {
                return "continue";
            }
            if (!button.buttonState && btnConfig.buttonState) {
                this_3.config.formButtonConfigs.push(btnConfig);
            }
            if (button.buttonState && button.buttonState !== btnConfig.buttonState) {
                this_3.config.formButtonConfigs.push(btnConfig);
            }
        };
        var this_3 = this;
        try {
            for (var _b = tslib_1.__values(this.buttonConfigs), _c = _b.next(); !_c.done; _c = _b.next()) {
                var btn = _c.value;
                _loop_3(btn);
            }
        }
        catch (e_9_1) { e_9 = { error: e_9_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_9) throw e_9.error; }
        }
        this.config.formFieldConfigs = new Array();
        this.getFieldConfigs(this.fieldConfigs);
        this.config.formMethodConfigs = this.operationConfig.operations || new Array();
    };
    /**
     * @private
     * @param {?} fieldConfigs
     * @return {?}
     */
    FormFormatConfigComponent.prototype.getFieldConfigs = /**
     * @private
     * @param {?} fieldConfigs
     * @return {?}
     */
    function (fieldConfigs) {
        var e_10, _a;
        if (fieldConfigs && fieldConfigs.length > 0) {
            var _loop_4 = function (f) {
                if (f.children && f.children.length > 0) {
                    this_4.getFieldConfigs(f.children);
                }
                if (f.leaf === false) {
                    return "continue";
                }
                /** @type {?} */
                var field = this_4.formatFieldList.find((/**
                 * @param {?} fd
                 * @return {?}
                 */
                function (fd) { return fd.fieldId === f.data.fieldId; }));
                /** @type {?} */
                var fieldConfig = new FormFieldConfig();
                fieldConfig.fieldId = f.data.fieldId;
                if (f.data.editable) {
                    fieldConfig.fieldState = 'Editable';
                }
                else if (f.data.readonly) {
                    fieldConfig.fieldState = 'Readonly';
                }
                else if (f.data.hidden) {
                    fieldConfig.fieldState = 'Hidden';
                }
                else if (f.data.required) {
                    fieldConfig.fieldState = 'Required';
                }
                else {
                    return "continue";
                }
                if (!field.fieldState && fieldConfig.fieldState) {
                    this_4.config.formFieldConfigs.push(fieldConfig);
                }
                if (field.fieldState && field.fieldState !== fieldConfig.fieldState) {
                    this_4.config.formFieldConfigs.push(fieldConfig);
                }
            };
            var this_4 = this;
            try {
                for (var fieldConfigs_3 = tslib_1.__values(fieldConfigs), fieldConfigs_3_1 = fieldConfigs_3.next(); !fieldConfigs_3_1.done; fieldConfigs_3_1 = fieldConfigs_3.next()) {
                    var f = fieldConfigs_3_1.value;
                    _loop_4(f);
                }
            }
            catch (e_10_1) { e_10 = { error: e_10_1 }; }
            finally {
                try {
                    if (fieldConfigs_3_1 && !fieldConfigs_3_1.done && (_a = fieldConfigs_3.return)) _a.call(fieldConfigs_3);
                }
                finally { if (e_10) throw e_10.error; }
            }
        }
    };
    /**
     * @private
     * @return {?}
     */
    FormFormatConfigComponent.prototype.getConfig = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.formFormatId) {
            forkJoin(this.getFormFormat(), this.getFormFormatConfig()).subscribe((/**
             * @param {?} re
             * @return {?}
             */
            function (re) {
                var e_11, _a, e_12, _b, e_13, _c;
                /** @type {?} */
                var formFormat = (/** @type {?} */ (re[0]));
                if (formFormat) {
                    _this.formFormat = _this.convertFormFormat(formFormat);
                }
                /** @type {?} */
                var config = (/** @type {?} */ (re[1]));
                if (config) {
                    _this.config = config;
                }
                if (_this.formFormat.formButtons) {
                    _this.buttonConfigs = _this.formFormat.formButtons.map((/**
                     * @param {?} b
                     * @return {?}
                     */
                    function (b) { return Object.assign({}, b, {
                        enable: b.buttonState === 'Enable' ? true : false,
                        disabled: b.buttonState === 'Disabled' ? true : false,
                        hidden: b.buttonState === 'Hidden' ? true : false
                    }); }));
                    /** @type {?} */
                    var btnConfigs = new Array();
                    if (config && config.formButtonConfigs) {
                        btnConfigs = config.formButtonConfigs;
                    }
                    try {
                        for (var btnConfigs_1 = tslib_1.__values(btnConfigs), btnConfigs_1_1 = btnConfigs_1.next(); !btnConfigs_1_1.done; btnConfigs_1_1 = btnConfigs_1.next()) {
                            var b = btnConfigs_1_1.value;
                            try {
                                for (var _d = tslib_1.__values(_this.buttonConfigs), _e = _d.next(); !_e.done; _e = _d.next()) {
                                    var btn = _e.value;
                                    if (btn.buttonId === b.buttonId) {
                                        switch (b.buttonState) {
                                            case 'Enable':
                                                btn.enable = true;
                                                btn.disabled = false;
                                                btn.hidden = false;
                                                break;
                                            case 'Disabled':
                                                btn.enable = false;
                                                btn.disabled = true;
                                                btn.hidden = false;
                                                break;
                                            case 'Hidden':
                                                btn.enable = false;
                                                btn.disabled = false;
                                                btn.hidden = true;
                                                break;
                                        }
                                        break;
                                    }
                                }
                            }
                            catch (e_12_1) { e_12 = { error: e_12_1 }; }
                            finally {
                                try {
                                    if (_e && !_e.done && (_b = _d.return)) _b.call(_d);
                                }
                                finally { if (e_12) throw e_12.error; }
                            }
                        }
                    }
                    catch (e_11_1) { e_11 = { error: e_11_1 }; }
                    finally {
                        try {
                            if (btnConfigs_1_1 && !btnConfigs_1_1.done && (_a = btnConfigs_1.return)) _a.call(btnConfigs_1);
                        }
                        finally { if (e_11) throw e_11.error; }
                    }
                }
                if (_this.formFormat.formFields) {
                    _this.fieldConfigs = tslib_1.__spread(_this.formFormat.formFields);
                    _this.orgFieldConfigs(_this.fieldConfigs);
                    /** @type {?} */
                    var configs = new Array();
                    if (config && config.formFieldConfigs) {
                        configs = config.formFieldConfigs;
                    }
                    try {
                        for (var configs_1 = tslib_1.__values(configs), configs_1_1 = configs_1.next(); !configs_1_1.done; configs_1_1 = configs_1.next()) {
                            var f = configs_1_1.value;
                            _this.setFieldConfig(_this.fieldConfigs, f);
                        }
                    }
                    catch (e_13_1) { e_13 = { error: e_13_1 }; }
                    finally {
                        try {
                            if (configs_1_1 && !configs_1_1.done && (_c = configs_1.return)) _c.call(configs_1);
                        }
                        finally { if (e_13) throw e_13.error; }
                    }
                }
            }));
        }
    };
    /**
     * @private
     * @param {?} formFields
     * @return {?}
     */
    FormFormatConfigComponent.prototype.orgFieldConfigs = /**
     * @private
     * @param {?} formFields
     * @return {?}
     */
    function (formFields) {
        var e_14, _a;
        if (formFields.length > 0) {
            try {
                for (var formFields_1 = tslib_1.__values(formFields), formFields_1_1 = formFields_1.next(); !formFields_1_1.done; formFields_1_1 = formFields_1.next()) {
                    var d = formFields_1_1.value;
                    d.data = Object.assign({}, d.data, {
                        editable: d.data.fieldState === 'Editable' ? true : false,
                        readonly: d.data.fieldState === 'Readonly' ? true : false,
                        hidden: d.data.fieldState === 'Hidden' ? true : false,
                        required: d.data.fieldState === 'Required' ? true : false
                    });
                    if (d.children && d.children) {
                        this.orgFieldConfigs(d.children);
                    }
                }
            }
            catch (e_14_1) { e_14 = { error: e_14_1 }; }
            finally {
                try {
                    if (formFields_1_1 && !formFields_1_1.done && (_a = formFields_1.return)) _a.call(formFields_1);
                }
                finally { if (e_14) throw e_14.error; }
            }
        }
    };
    /**
     * @private
     * @param {?} fieldConfigs
     * @param {?} config
     * @return {?}
     */
    FormFormatConfigComponent.prototype.setFieldConfig = /**
     * @private
     * @param {?} fieldConfigs
     * @param {?} config
     * @return {?}
     */
    function (fieldConfigs, config) {
        var e_15, _a;
        if (fieldConfigs.length > 0) {
            try {
                for (var fieldConfigs_4 = tslib_1.__values(fieldConfigs), fieldConfigs_4_1 = fieldConfigs_4.next(); !fieldConfigs_4_1.done; fieldConfigs_4_1 = fieldConfigs_4.next()) {
                    var f = fieldConfigs_4_1.value;
                    if (f.data.fieldId === config.fieldId) {
                        switch (config.fieldState) {
                            case 'Editable':
                                f.data.editable = true;
                                f.data.readonly = false;
                                f.data.hidden = false;
                                f.data.required = false;
                                break;
                            case 'Readonly':
                                f.data.editable = false;
                                f.data.readonly = true;
                                f.data.hidden = false;
                                f.data.required = false;
                                break;
                            case 'Hidden':
                                f.data.editable = false;
                                f.data.readonly = false;
                                f.data.hidden = true;
                                f.data.required = false;
                                break;
                            case 'Required':
                                f.data.editable = false;
                                f.data.readonly = false;
                                f.data.hidden = false;
                                f.data.required = true;
                                break;
                        }
                        return;
                    }
                    else {
                        if (f.children && f.children.length > 0) {
                            this.setFieldConfig(f.children, config);
                        }
                    }
                }
            }
            catch (e_15_1) { e_15 = { error: e_15_1 }; }
            finally {
                try {
                    if (fieldConfigs_4_1 && !fieldConfigs_4_1.done && (_a = fieldConfigs_4.return)) _a.call(fieldConfigs_4);
                }
                finally { if (e_15) throw e_15.error; }
            }
        }
    };
    /**
     * @private
     * @param {?} config
     * @return {?}
     */
    FormFormatConfigComponent.prototype.saveConfig = /**
     * @private
     * @param {?} config
     * @return {?}
     */
    function (config) {
        /** @type {?} */
        var url = '/api/runtime/wf/v1.0/formFormatConfig';
        return this.http.post(url, config);
    };
    /**
     * @private
     * @return {?}
     */
    FormFormatConfigComponent.prototype.getFormFormat = /**
     * @private
     * @return {?}
     */
    function () {
        if (this.formFormatId) {
            /** @type {?} */
            var url = "/api/runtime/wf/v1.0/formFormat/" + this.formFormatId;
            url = encodeURI(url);
            return this.http.get(url);
        }
        else {
            return of(null);
        }
    };
    /**
     * @private
     * @return {?}
     */
    FormFormatConfigComponent.prototype.getFormFormatConfig = /**
     * @private
     * @return {?}
     */
    function () {
        if (this.formatConfigId) {
            /** @type {?} */
            var url = "/api/runtime/wf/v1.0/formFormatConfig/" + this.formatConfigId;
            url = encodeURI(url);
            return this.http.get(url);
        }
        else {
            return of(null);
        }
    };
    /**
     * @private
     * @param {?} formFormat
     * @return {?}
     */
    FormFormatConfigComponent.prototype.convertFormFormat = /**
     * @private
     * @param {?} formFormat
     * @return {?}
     */
    function (formFormat) {
        if (!formFormat.status) {
            formFormat.status = 0;
        }
        this.convertformFields(formFormat.formFields);
        this.getFormatFieldList(formFormat.formFields, this.formatFieldList);
        return formFormat;
    };
    /**
     * @private
     * @param {?} formFields
     * @return {?}
     */
    FormFormatConfigComponent.prototype.convertformFields = /**
     * @private
     * @param {?} formFields
     * @return {?}
     */
    function (formFields) {
        var e_16, _a;
        if (formFields.length > 0) {
            try {
                for (var formFields_2 = tslib_1.__values(formFields), formFields_2_1 = formFields_2.next(); !formFields_2_1.done; formFields_2_1 = formFields_2.next()) {
                    var d = formFields_2_1.value;
                    if (typeof (d.leaf) !== 'boolean' && (d.leaf == null || d.leaf === undefined)) {
                        d.leaf = true;
                    }
                    if (d.children && d.children) {
                        this.orgFieldConfigs(d.children);
                    }
                }
            }
            catch (e_16_1) { e_16 = { error: e_16_1 }; }
            finally {
                try {
                    if (formFields_2_1 && !formFields_2_1.done && (_a = formFields_2.return)) _a.call(formFields_2);
                }
                finally { if (e_16) throw e_16.error; }
            }
        }
    };
    /**
     * @private
     * @param {?} formFields
     * @param {?} array
     * @return {?}
     */
    FormFormatConfigComponent.prototype.getFormatFieldList = /**
     * @private
     * @param {?} formFields
     * @param {?} array
     * @return {?}
     */
    function (formFields, array) {
        var e_17, _a;
        if (formFields.length > 0) {
            try {
                for (var formFields_3 = tslib_1.__values(formFields), formFields_3_1 = formFields_3.next(); !formFields_3_1.done; formFields_3_1 = formFields_3.next()) {
                    var d = formFields_3_1.value;
                    array.push(d.data);
                    if (d.children && d.children) {
                        this.getFormatFieldList(d.children, array);
                    }
                }
            }
            catch (e_17_1) { e_17 = { error: e_17_1 }; }
            finally {
                try {
                    if (formFields_3_1 && !formFields_3_1.done && (_a = formFields_3.return)) _a.call(formFields_3);
                }
                finally { if (e_17) throw e_17.error; }
            }
        }
    };
    /**
     * @private
     * @param {?} formFields
     * @param {?} fieldId
     * @return {?}
     */
    FormFormatConfigComponent.prototype.getFormatField = /**
     * @private
     * @param {?} formFields
     * @param {?} fieldId
     * @return {?}
     */
    function (formFields, fieldId) {
        var e_18, _a;
        try {
            for (var formFields_4 = tslib_1.__values(formFields), formFields_4_1 = formFields_4.next(); !formFields_4_1.done; formFields_4_1 = formFields_4.next()) {
                var f = formFields_4_1.value;
                if (f.data.fieldId === fieldId) {
                    return f;
                }
                if (f.children && f.children.length > 0) {
                    return this.getFormatField(f.children, fieldId);
                }
            }
        }
        catch (e_18_1) { e_18 = { error: e_18_1 }; }
        finally {
            try {
                if (formFields_4_1 && !formFields_4_1.done && (_a = formFields_4.return)) _a.call(formFields_4);
            }
            finally { if (e_18) throw e_18.error; }
        }
    };
    FormFormatConfigComponent.decorators = [
        { type: Component, args: [{
                    selector: 'lib-form-format-config',
                    template: "\r\n<!--\u9700\u8981\u5D4C\u5957\u7684\u5C42-----------\u6807\u7B7E\u9875---------------->\r\n<farris-tabs class=\"h-100 f-component-tabs f-tabs-has-grid\" [value]=\"'buttonConfig'\" [contentFill]=\"true\">\r\n  <farris-tab [title]=\"'\u8868\u5355\u6309\u94AE'\" [id]=\"'buttonConfig'\">\r\n    <ng-template farrisTabsExtend>\r\n      <farris-button [type]=\"'link'\" (click)=\"btnBatchOperate('enable')\">\r\n        \u53EF\u7528\r\n      </farris-button>\r\n      <farris-button [type]=\"'link'\" (click)=\"btnBatchOperate('disabled')\">\r\n        \u7981\u7528\r\n      </farris-button>\r\n      <farris-button [type]=\"'link'\" (click)=\"btnBatchOperate('hidden')\">\r\n        \u9690\u85CF\r\n      </farris-button>\r\n      <farris-button [type]=\"'link'\" (click)=\"btnBatchReset()\">\r\n        \u91CD\u7F6E\r\n      </farris-button>\r\n    </ng-template>\r\n    <ng-template #content>\r\n      <div class=\"f-utils-fill-flex-column\" style=\"background: #FFF;\">\r\n        <farris-datagrid class=\"f-component-grid f-utils-fill\" [columns]=\"buttonCols\" [data]=\"buttonConfigs\" #btnGrid\r\n          [idField]=\"'id'\" [showLineNumber]=\"false\" [fitColumns]=\"true\" [striped]=\"true\"\r\n          [virtualized]=\"true\" [pagination]=\"false\" [useThemes]=\"false\" [fit]=\"true\" [showAllCheckbox]=\"true\" \r\n          [showCheckbox]=\"true\" [multiSelect]=\"true\">\r\n        </farris-datagrid>\r\n      </div>\r\n    </ng-template>\r\n  </farris-tab>\r\n  <farris-tab [title]=\"'\u8868\u5355\u5B57\u6BB5'\" [id]=\"'fieldConfig'\">\r\n    <ng-template farrisTabsExtend>\r\n      <farris-button [type]=\"'link'\" (click)=\"fieldBatchOperate('editable')\">\r\n        \u53EF\u5199\r\n      </farris-button>\r\n      <farris-button [type]=\"'link'\" (click)=\"fieldBatchOperate('readonly')\">\r\n        \u53EA\u8BFB\r\n      </farris-button>\r\n      <farris-button [type]=\"'link'\" (click)=\"fieldBatchOperate('hidden')\">\r\n        \u9690\u85CF\r\n      </farris-button>\r\n      <farris-button [type]=\"'link'\" (click)=\"fieldBatchOperate('required')\">\r\n        \u5FC5\u586B\r\n      </farris-button>\r\n      <farris-button [type]=\"'link'\" (click)=\"fieldBatchReset()\">\r\n        \u91CD\u7F6E\r\n      </farris-button>\r\n    </ng-template>\r\n    <ng-template #content>\r\n      <div class=\"f-utils-fill-flex-column\" style=\"background: #FFF;\">\r\n        <!-- <farris-datagrid class=\"f-component-grid f-utils-fill\" [columns]=\"fieldCols\" [data]=\"fieldConfigs\" #fieldGrid\r\n          [idField]=\"'id'\" [showLineNumber]=\"false\" [fitColumns]=\"true\" [striped]=\"true\"\r\n          [virtualized]=\"true\" [pagination]=\"false\" [useThemes]=\"false\" [fit]=\"true\" [showAllCheckbox]=\"true\" \r\n          [showCheckbox]=\"true\" [multiSelect]=\"true\">\r\n        </farris-datagrid> -->\r\n        <farris-treetable #fieldTree [columns]=\"fieldCols\" \r\n          [showBorder]=\"false\" [showHeader]=\"true\" [data]=\"fieldConfigs\" [fit]=\"true\" [fitColumns]=\"true\"\r\n          [idField]=\"'id'\" [singleSelect]=\"false\" [showCheckbox]=\"true\" \r\n          [showCheckAll]=\"true\" [striped]=\"true\" [fixedHeader]=\"true\">\r\n        </farris-treetable>\r\n      </div>\r\n    </ng-template>\r\n  </farris-tab>\r\n  <farris-tab [title]=\"'\u8868\u5355\u4E8B\u4EF6'\" [id]=\"'operationConfig'\" [show]=\"showMethodTab\">\r\n    <ng-template farrisTabsExtend>\r\n      <farris-button [type]=\"'link'\" (click)=\"operationConfig.add()\">\r\n        \u65B0\u589E\r\n      </farris-button>\r\n      <farris-button [type]=\"'link'\" (click)=\"operationConfig.delete()\">\r\n        \u5220\u9664\r\n      </farris-button>\r\n    </ng-template>\r\n    <ng-template #content>\r\n      <lib-form-operation-config \r\n        [formFormatId]=\"formFormatId\" \r\n        [formFormatConfigId]=\"config.id\" \r\n        [operations]=\"config.formMethodConfigs\"\r\n        class=\"h-100\"></lib-form-operation-config>\r\n    </ng-template>\r\n  </farris-tab>\r\n</farris-tabs>\r\n<!--Tab\u533A\u57DF-->  \r\n      \r\n  <!-- </section>\r\n</div> -->\r\n\r\n<ng-template #btnEnable let-ctx>\r\n  <farris-switch [(ngModel)]=\"ctx.rowData.enable\" (valueChange)=\"btnConfigChange($event, ctx.field, ctx.rowData.id)\"></farris-switch>\r\n</ng-template>\r\n<ng-template #btnDisabled let-ctx>\r\n  <farris-switch [(ngModel)]=\"ctx.rowData.disabled\" (valueChange)=\"btnConfigChange($event, ctx.field, ctx.rowData.id)\"></farris-switch>\r\n</ng-template>\r\n<ng-template #btnHidden let-ctx>\r\n  <farris-switch [(ngModel)]=\"ctx.rowData.hidden\" (valueChange)=\"btnConfigChange($event, ctx.field, ctx.rowData.id)\"></farris-switch>\r\n</ng-template>\r\n<ng-template #fieldEditable let-ctx>\r\n  <farris-switch *ngIf=\"ctx.node.leaf\" size=\"small\" [(ngModel)]=\"ctx.node.data.editable\"\r\n  (valueChange)=\"fieldConfigChange($event, ctx.column.field, ctx.node.data.id)\">\r\n  </farris-switch>\r\n</ng-template>\r\n<ng-template #fieldReadonly let-ctx>\r\n  <farris-switch *ngIf=\"ctx.node.leaf\" size=\"small\" [(ngModel)]=\"ctx.node.data.readonly\"\r\n    (valueChange)=\"fieldConfigChange($event, ctx.column.field, ctx.node.data.id)\">\r\n  </farris-switch>\r\n</ng-template>\r\n<ng-template #fieldHidden let-ctx>\r\n  <farris-switch *ngIf=\"ctx.node.leaf\" size=\"small\" [(ngModel)]=\"ctx.node.data.hidden\"\r\n    (valueChange)=\"fieldConfigChange($event, ctx.column.field, ctx.node.data.id)\">\r\n  </farris-switch>\r\n</ng-template>\r\n<ng-template #fieldRequired let-ctx>\r\n  <farris-switch *ngIf=\"ctx.node.leaf\" size=\"small\" [(ngModel)]=\"ctx.node.data.required\"\r\n    (valueChange)=\"fieldConfigChange($event, ctx.column.field, ctx.node.data.id)\">\r\n  </farris-switch>\r\n</ng-template>\r\n\r\n\r\n",
                    styles: [""]
                }] }
    ];
    /** @nocollapse */
    FormFormatConfigComponent.ctorParameters = function () { return [
        { type: HttpService },
        { type: MessagerService },
        { type: NotifyService }
    ]; };
    FormFormatConfigComponent.propDecorators = {
        btnEnable: [{ type: ViewChild, args: ['btnEnable',] }],
        btnDisabled: [{ type: ViewChild, args: ['btnDisabled',] }],
        btnHidden: [{ type: ViewChild, args: ['btnHidden',] }],
        fieldEditable: [{ type: ViewChild, args: ['fieldEditable',] }],
        fieldReadonly: [{ type: ViewChild, args: ['fieldReadonly',] }],
        fieldHidden: [{ type: ViewChild, args: ['fieldHidden',] }],
        fieldRequired: [{ type: ViewChild, args: ['fieldRequired',] }],
        btnGrid: [{ type: ViewChild, args: ['btnGrid',] }],
        fieldTree: [{ type: ViewChild, args: ['fieldTree',] }],
        operationConfig: [{ type: ViewChild, args: [FormOperationConfigComponent,] }],
        showMethodTab: [{ type: Input }]
    };
    return FormFormatConfigComponent;
}());
export { FormFormatConfigComponent };
if (false) {
    /** @type {?} */
    FormFormatConfigComponent.prototype.btnEnable;
    /** @type {?} */
    FormFormatConfigComponent.prototype.btnDisabled;
    /** @type {?} */
    FormFormatConfigComponent.prototype.btnHidden;
    /** @type {?} */
    FormFormatConfigComponent.prototype.fieldEditable;
    /** @type {?} */
    FormFormatConfigComponent.prototype.fieldReadonly;
    /** @type {?} */
    FormFormatConfigComponent.prototype.fieldHidden;
    /** @type {?} */
    FormFormatConfigComponent.prototype.fieldRequired;
    /** @type {?} */
    FormFormatConfigComponent.prototype.btnGrid;
    /** @type {?} */
    FormFormatConfigComponent.prototype.fieldTree;
    /** @type {?} */
    FormFormatConfigComponent.prototype.operationConfig;
    /** @type {?} */
    FormFormatConfigComponent.prototype.config;
    /** @type {?} */
    FormFormatConfigComponent.prototype.formFormat;
    /** @type {?} */
    FormFormatConfigComponent.prototype.state;
    /** @type {?} */
    FormFormatConfigComponent.prototype.showMethodTab;
    /**
     * @type {?}
     * @private
     */
    FormFormatConfigComponent.prototype._formFormatId;
    /**
     * @type {?}
     * @private
     */
    FormFormatConfigComponent.prototype._formatConfigId;
    /** @type {?} */
    FormFormatConfigComponent.prototype.buttonCols;
    /** @type {?} */
    FormFormatConfigComponent.prototype.buttonConfigs;
    /** @type {?} */
    FormFormatConfigComponent.prototype.fieldCols;
    /** @type {?} */
    FormFormatConfigComponent.prototype.fieldConfigs;
    /** @type {?} */
    FormFormatConfigComponent.prototype.formatFieldList;
    /**
     * @type {?}
     * @private
     */
    FormFormatConfigComponent.prototype.http;
    /**
     * @type {?}
     * @private
     */
    FormFormatConfigComponent.prototype.message;
    /**
     * @type {?}
     * @private
     */
    FormFormatConfigComponent.prototype.notify;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZm9ybS1mb3JtYXQtY29uZmlnLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Bnc3Atd2Yvd2YtcHJvY2Vzcy1lZGl0b3IvIiwic291cmNlcyI6WyJsaWIvdmlld3MvZXhlY3V0ZS1mb3Jtcy9mb3JtLWZvcm1hdC1jb25maWcvZm9ybS1mb3JtYXQtY29uZmlnLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsV0FBVyxFQUFFLFNBQVMsRUFBZSxLQUFLLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDOUYsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBRWxELE9BQU8sRUFBYyxFQUFFLEVBQUUsUUFBUSxFQUFXLE1BQU0sTUFBTSxDQUFDO0FBQ3pELE9BQU8sRUFBRSxVQUFVLEVBQTRCLE1BQU0seUJBQXlCLENBQUM7QUFDL0UsT0FBTyxFQUFFLGdCQUFnQixFQUFFLGdCQUFnQixFQUFFLGVBQWUsRUFBRSxNQUFNLGdDQUFnQyxDQUFDO0FBQ3JHLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBRXhELE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUN0RCxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFFbEQsT0FBTyxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUN2RCxPQUFPLEVBQUUsNEJBQTRCLEVBQUUsTUFBTSwwREFBMEQsQ0FBQztBQUN4RyxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUUxRDtJQXVERSxtQ0FDVSxJQUFpQixFQUNqQixPQUF3QixFQUN4QixNQUFxQjtRQUZyQixTQUFJLEdBQUosSUFBSSxDQUFhO1FBQ2pCLFlBQU8sR0FBUCxPQUFPLENBQWlCO1FBQ3hCLFdBQU0sR0FBTixNQUFNLENBQWU7UUF2Qy9C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LGdEQUF3RDs7SUFDeEQsOENBQW9EOztJQUNwRCxrREFBNEQ7O0lBQzVELGtEQUE0RDs7SUFDNUQsZ0RBQXdEOztJQUN4RCxrREFBNEQ7O0lBRTVELDRDQUFpRDs7SUFDakQsOENBQXNEOztJQUN0RCxvREFBdUY7O0lBRXZGLDJDQUFrRDs7SUFDbEQsK0NBQTBDOztJQUUxQywwQ0FBK0I7O0lBRS9CLGtEQUE4Qjs7Ozs7SUFFOUIsa0RBQThCOzs7OztJQVU5QixvREFBZ0M7O0lBV2hDLCtDQUFnQjs7SUFDaEIsa0RBQTRCOztJQUU1Qiw4Q0FBZTs7SUFDZixpREFBMkI7O0lBRTNCLG9EQUFnRDs7Ozs7SUFHOUMseUNBQXlCOzs7OztJQUN6Qiw0Q0FBZ0M7Ozs7O0lBQ2hDLDJDQUE2QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBUZW1wbGF0ZVJlZiwgVmlld0NoaWxkLCBIb3N0QmluZGluZywgSW5wdXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgSHR0cFNlcnZpY2UgfSBmcm9tICdAZWNwLWNhZi9jYWYtY29tbW9uJztcclxuaW1wb3J0IHsgSUZvcm1Gb3JtYXRDb25maWdDb21wb25lbnQgfSBmcm9tIFwiQGdzcC13Zi9iaXotcHJvY2Vzcy1hcGlcIjtcclxuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgb2YsIGZvcmtKb2luLCBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IEZvcm1Gb3JtYXQsIEZvcm1GaWVsZERhdGEsIEZvcm1GaWVsZCB9IGZyb20gJy4uL2VudGl0aWVzL2Zvcm0tZm9ybWF0JztcclxuaW1wb3J0IHsgRm9ybUZvcm1hdENvbmZpZywgRm9ybUJ1dHRvbkNvbmZpZywgRm9ybUZpZWxkQ29uZmlnIH0gZnJvbSAnLi4vZW50aXRpZXMvZm9ybS1mb3JtYXQtY29uZmlnJztcclxuaW1wb3J0IHsgRGF0YWdyaWRDb21wb25lbnQgfSBmcm9tICdAZmFycmlzL3VpLWRhdGFncmlkJztcclxuaW1wb3J0IHsgUHJvY2Vzc0RlVXRpbCB9IGZyb20gJy4uLy4uLy4uL2RvbWFpbi9wcm9jZXNzLWRlLXV0aWwnO1xyXG5pbXBvcnQgeyBNZXNzYWdlclNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLW1lc3NhZ2VyJztcclxuaW1wb3J0IHsgTm90aWZ5U2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbm90aWZ5JztcclxuaW1wb3J0IHsgUGlja2VkUmVzdWx0LCBTZXJ2ZXJTaWRlVG9rZW4sIExvb2t1cEdyaWRDb21wb25lbnQgfSBmcm9tICdAZmFycmlzL3VpLWxvb2t1cCc7XHJcbmltcG9ydCB7IHN3aXRjaE1hcCwgY2F0Y2hFcnJvciB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcclxuaW1wb3J0IHsgRm9ybU9wZXJhdGlvbkNvbmZpZ0NvbXBvbmVudCB9IGZyb20gJy4uL2Zvcm0tb3BlcmF0aW9uLWNvbmZpZy9mb3JtLW9wZXJhdGlvbi1jb25maWcuY29tcG9uZW50JztcclxuaW1wb3J0IHsgVHJlZVRhYmxlQ29tcG9uZW50IH0gZnJvbSAnQGZhcnJpcy91aS10cmVldGFibGUnO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICdsaWItZm9ybS1mb3JtYXQtY29uZmlnJyxcclxuICB0ZW1wbGF0ZVVybDogJy4vZm9ybS1mb3JtYXQtY29uZmlnLmNvbXBvbmVudC5odG1sJyxcclxuICBzdHlsZVVybHM6IFsnLi9mb3JtLWZvcm1hdC1jb25maWcuY29tcG9uZW50LnNjc3MnXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgRm9ybUZvcm1hdENvbmZpZ0NvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgSUZvcm1Gb3JtYXRDb25maWdDb21wb25lbnQge1xyXG5cclxuICBAVmlld0NoaWxkKCdidG5FbmFibGUnKSBidG5FbmFibGU6IFRlbXBsYXRlUmVmPGFueT47XHJcbiAgQFZpZXdDaGlsZCgnYnRuRGlzYWJsZWQnKSBidG5EaXNhYmxlZDogVGVtcGxhdGVSZWY8YW55PjtcclxuICBAVmlld0NoaWxkKCdidG5IaWRkZW4nKSBidG5IaWRkZW46IFRlbXBsYXRlUmVmPGFueT47XHJcbiAgQFZpZXdDaGlsZCgnZmllbGRFZGl0YWJsZScpIGZpZWxkRWRpdGFibGU6IFRlbXBsYXRlUmVmPGFueT47XHJcbiAgQFZpZXdDaGlsZCgnZmllbGRSZWFkb25seScpIGZpZWxkUmVhZG9ubHk6IFRlbXBsYXRlUmVmPGFueT47XHJcbiAgQFZpZXdDaGlsZCgnZmllbGRIaWRkZW4nKSBmaWVsZEhpZGRlbjogVGVtcGxhdGVSZWY8YW55PjtcclxuICBAVmlld0NoaWxkKCdmaWVsZFJlcXVpcmVkJykgZmllbGRSZXF1aXJlZDogVGVtcGxhdGVSZWY8YW55PjtcclxuXHJcbiAgQFZpZXdDaGlsZCgnYnRuR3JpZCcpIGJ0bkdyaWQ6IERhdGFncmlkQ29tcG9uZW50O1xyXG4gIEBWaWV3Q2hpbGQoJ2ZpZWxkVHJlZScpIGZpZWxkVHJlZTogVHJlZVRhYmxlQ29tcG9uZW50O1xyXG4gIEBWaWV3Q2hpbGQoRm9ybU9wZXJhdGlvbkNvbmZpZ0NvbXBvbmVudCkgb3BlcmF0aW9uQ29uZmlnOiBGb3JtT3BlcmF0aW9uQ29uZmlnQ29tcG9uZW50O1xyXG5cclxuICBjb25maWc6IEZvcm1Gb3JtYXRDb25maWcgPSBuZXcgRm9ybUZvcm1hdENvbmZpZygpO1xyXG4gIGZvcm1Gb3JtYXQ6IEZvcm1Gb3JtYXQgPSBuZXcgRm9ybUZvcm1hdCgpO1xyXG5cclxuICBzdGF0ZTogJ25ldycgfCAnZWRpdCcgPSAnZWRpdCc7XHJcblxyXG4gIEBJbnB1dCgpIHNob3dNZXRob2RUYWIgPSB0cnVlO1xyXG5cclxuICBwcml2YXRlIF9mb3JtRm9ybWF0SWQ6IHN0cmluZztcclxuICBzZXQgZm9ybUZvcm1hdElkKHY6IHN0cmluZykge1xyXG4gICAgdGhpcy5fZm9ybUZvcm1hdElkID0gdjtcclxuICAgIHRoaXMuY29uZmlnLmZvcm1Gb3JtYXRJZCA9IHY7XHJcbiAgfVxyXG5cclxuICBnZXQgZm9ybUZvcm1hdElkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1Gb3JtYXRJZDtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgX2Zvcm1hdENvbmZpZ0lkOiBzdHJpbmc7XHJcbiAgc2V0IGZvcm1hdENvbmZpZ0lkKHY6IHN0cmluZykge1xyXG4gICAgdGhpcy5fZm9ybWF0Q29uZmlnSWQgPSB2O1xyXG4gICAgaWYgKCF2KSB7XHJcbiAgICAgIHRoaXMuc3RhdGUgPSAnbmV3JztcclxuICAgIH1cclxuICB9XHJcbiAgZ2V0IGZvcm1hdENvbmZpZ0lkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1hdENvbmZpZ0lkO1xyXG4gIH1cclxuXHJcbiAgYnV0dG9uQ29scyA9IFtdO1xyXG4gIGJ1dHRvbkNvbmZpZ3MgPSBuZXcgQXJyYXkoKTtcclxuXHJcbiAgZmllbGRDb2xzID0gW107XHJcbiAgZmllbGRDb25maWdzID0gbmV3IEFycmF5KCk7XHJcblxyXG4gIGZvcm1hdEZpZWxkTGlzdDogQXJyYXk8Rm9ybUZpZWxkPiA9IG5ldyBBcnJheSgpO1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHByaXZhdGUgaHR0cDogSHR0cFNlcnZpY2UsXHJcbiAgICBwcml2YXRlIG1lc3NhZ2U6IE1lc3NhZ2VyU2VydmljZSxcclxuICAgIHByaXZhdGUgbm90aWZ5OiBOb3RpZnlTZXJ2aWNlXHJcbiAgKSB7IH1cclxuXHJcbiAgbmdPbkluaXQoKSB7XHJcbiAgICB0aGlzLmJ1dHRvbkNvbHMgPSBbXHJcbiAgICAgIHsgZmllbGQ6ICdidXR0b25OYW1lJywgd2lkdGg6IDEwMCwgdGl0bGU6ICfmjInpkq7lkI3np7AnIH0sXHJcbiAgICAgIC8vIHsgZmllbGQ6ICdidXR0b25JZCcsIHdpZHRoOiAxMDAsIHRpdGxlOiAn5oyJ6ZKu5qCH6K+GJyB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgdGl0bGU6ICfmmK/lkKblj6/nlKgnLFxyXG4gICAgICAgIGZpZWxkOiAnZW5hYmxlJyxcclxuICAgICAgICB3aWR0aDogODAsXHJcbiAgICAgICAgdGVtcGxhdGU6IHRoaXMuYnRuRW5hYmxlLFxyXG4gICAgICAgIGFsaWduOiAnY2VudGVyJyxcclxuICAgICAgICBoQWxpZ246ICdjZW50ZXInXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICB0aXRsZTogJ+aYr+WQpuemgeeUqCcsXHJcbiAgICAgICAgZmllbGQ6ICdkaXNhYmxlZCcsXHJcbiAgICAgICAgd2lkdGg6IDgwLFxyXG4gICAgICAgIHRlbXBsYXRlOiB0aGlzLmJ0bkRpc2FibGVkLFxyXG4gICAgICAgIGFsaWduOiAnY2VudGVyJyxcclxuICAgICAgICBoQWxpZ246ICdjZW50ZXInXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICB0aXRsZTogJ+aYr+WQpumakOiXjycsXHJcbiAgICAgICAgZmllbGQ6ICdoaWRkZW4nLFxyXG4gICAgICAgIHdpZHRoOiA4MCxcclxuICAgICAgICB0ZW1wbGF0ZTogdGhpcy5idG5IaWRkZW4sXHJcbiAgICAgICAgYWxpZ246ICdjZW50ZXInLFxyXG4gICAgICAgIGhBbGlnbjogJ2NlbnRlcidcclxuICAgICAgfV07XHJcbiAgICB0aGlzLmZpZWxkQ29scyA9IFtcclxuICAgICAgeyBmaWVsZDogJ2ZpZWxkTmFtZScsIHdpZHRoOiAxMDAsIHRpdGxlOiAn5a2X5q615ZCN56ewJyB9LFxyXG4gICAgICAvLyB7IGZpZWxkOiAnZmllbGRJZCcsIHdpZHRoOiAxMDAsIHRpdGxlOiAn5a2X5q615qCH6K+GJyB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgdGl0bGU6ICfmmK/lkKblj6/lhpknLFxyXG4gICAgICAgIGZpZWxkOiAnZWRpdGFibGUnLFxyXG4gICAgICAgIHdpZHRoOiA4MCxcclxuICAgICAgICB0ZW1wbGF0ZTogdGhpcy5maWVsZEVkaXRhYmxlLFxyXG4gICAgICAgIGFsaWduOiAnY2VudGVyJyxcclxuICAgICAgICBoQWxpZ246ICdjZW50ZXInXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICB0aXRsZTogJ+aYr+WQpuWPquivuycsXHJcbiAgICAgICAgZmllbGQ6ICdyZWFkb25seScsXHJcbiAgICAgICAgd2lkdGg6IDgwLFxyXG4gICAgICAgIHRlbXBsYXRlOiB0aGlzLmZpZWxkUmVhZG9ubHksXHJcbiAgICAgICAgYWxpZ246ICdjZW50ZXInLFxyXG4gICAgICAgIGhBbGlnbjogJ2NlbnRlcidcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIHRpdGxlOiAn5piv5ZCm6ZqQ6JePJyxcclxuICAgICAgICBmaWVsZDogJ2hpZGRlbicsXHJcbiAgICAgICAgd2lkdGg6IDgwLFxyXG4gICAgICAgIHRlbXBsYXRlOiB0aGlzLmZpZWxkSGlkZGVuLFxyXG4gICAgICAgIGFsaWduOiAnY2VudGVyJyxcclxuICAgICAgICBoQWxpZ246ICdjZW50ZXInXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICB0aXRsZTogJ+aYr+WQpuW/heWhqycsXHJcbiAgICAgICAgZmllbGQ6ICdyZXF1aXJlZCcsXHJcbiAgICAgICAgd2lkdGg6IDgwLFxyXG4gICAgICAgIHRlbXBsYXRlOiB0aGlzLmZpZWxkUmVxdWlyZWQsXHJcbiAgICAgICAgYWxpZ246ICdjZW50ZXInLFxyXG4gICAgICAgIGhBbGlnbjogJ2NlbnRlcidcclxuICAgICAgfV07XHJcbiAgICB0aGlzLmdldENvbmZpZygpO1xyXG4gIH1cclxuXHJcbiAgc3VibWl0KCk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICBpZiAodGhpcy52YWxpZGF0b3IoKSkge1xyXG4gICAgICB0aGlzLnNldEJ0bkFuZEZpZWxkQ29uZmlncygpO1xyXG4gICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gJ25ldycgJiZcclxuICAgICAgICB0aGlzLmNvbmZpZy5mb3JtQnV0dG9uQ29uZmlncy5sZW5ndGggPT09IDAgJiZcclxuICAgICAgICB0aGlzLmNvbmZpZy5mb3JtRmllbGRDb25maWdzLmxlbmd0aCA9PT0gMCAmJlxyXG4gICAgICAgIHRoaXMub3BlcmF0aW9uQ29uZmlnLm9wZXJhdGlvbnMubGVuZ3RoID09PSAwXHJcbiAgICAgICkge1xyXG4gICAgICAgIHJldHVybiBvZih7IHJlc3VsdDogdHJ1ZSwgY29uZmlnSWQ6IG51bGwgfSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2F2ZUNvbmZpZyh0aGlzLmNvbmZpZykucGlwZShcclxuICAgICAgICAgIHN3aXRjaE1hcChyZSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBvZih7IHJlc3VsdDogdHJ1ZSwgY29uZmlnSWQ6IHRoaXMuY29uZmlnLmlkIH0pO1xyXG4gICAgICAgICAgfSksXHJcbiAgICAgICAgICBjYXRjaEVycm9yKHJlID0+IHtcclxuICAgICAgICAgICAgdGhpcy5tZXNzYWdlLmVycm9yKCfkv53lrZjphY3nva7lpLHotKXvvIzor7fogZTns7vnrqHnkIblkZjmn6XnnIvljp/lm6DvvIEnKTtcclxuICAgICAgICAgICAgcmV0dXJuIG9mKHsgcmVzdWx0OiBmYWxzZSwgY29uZmlnSWQ6IHRoaXMuY29uZmlnLmlkIH0pO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gb2YoeyByZXN1bHQ6IGZhbHNlLCBjb25maWdJZDogbnVsbCB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGJ0bkNvbmZpZ0NoYW5nZShib29sOiBib29sZWFuLCBmaWVsZDogc3RyaW5nLCBpZDogc3RyaW5nKSB7XHJcbiAgICBpZiAoYm9vbCkge1xyXG4gICAgICBmb3IgKGNvbnN0IGIgb2YgdGhpcy5idXR0b25Db25maWdzKSB7XHJcbiAgICAgICAgaWYgKGIuaWQgPT09IGlkKSB7XHJcbiAgICAgICAgICBzd2l0Y2ggKGZpZWxkKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ2VuYWJsZSc6XHJcbiAgICAgICAgICAgICAgYi5lbmFibGUgPSBib29sO1xyXG4gICAgICAgICAgICAgIGIuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICBiLmhpZGRlbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdkaXNhYmxlZCc6XHJcbiAgICAgICAgICAgICAgYi5kaXNhYmxlZCA9IGJvb2w7XHJcbiAgICAgICAgICAgICAgYi5lbmFibGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICBiLmhpZGRlbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdoaWRkZW4nOlxyXG4gICAgICAgICAgICAgIGIuaGlkZGVuID0gYm9vbDtcclxuICAgICAgICAgICAgICBiLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgYi5lbmFibGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGJ0bkJhdGNoT3BlcmF0ZShvcGVyYXRpb246IHN0cmluZykge1xyXG4gICAgY29uc3QgY2hlY2tlZHMgPSB0aGlzLmJ0bkdyaWQuY2hlY2tlZFJvd3M7XHJcbiAgICBpZiAoY2hlY2tlZHMgJiYgY2hlY2tlZHMubGVuZ3RoID4gMCkge1xyXG4gICAgICBmb3IgKGNvbnN0IGMgb2YgY2hlY2tlZHMpIHtcclxuICAgICAgICB0aGlzLmJ0bkNvbmZpZ0NoYW5nZSh0cnVlLCBvcGVyYXRpb24sIGMuaWQpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBidG5CYXRjaFJlc2V0KCkge1xyXG4gICAgY29uc3QgY2hlY2tlZHMgPSB0aGlzLmJ0bkdyaWQuY2hlY2tlZFJvd3M7XHJcbiAgICBpZiAoY2hlY2tlZHMgJiYgY2hlY2tlZHMubGVuZ3RoID4gMCkge1xyXG4gICAgICBmb3IgKGNvbnN0IGMgb2YgY2hlY2tlZHMpIHtcclxuICAgICAgICBjb25zdCBidXR0b24gPSB0aGlzLmZvcm1Gb3JtYXQuZm9ybUJ1dHRvbnMuZmluZChiID0+IGIuaWQgPT09IGMuaWQpO1xyXG4gICAgICAgIGZvciAoY29uc3QgYiBvZiB0aGlzLmJ1dHRvbkNvbmZpZ3MpIHtcclxuICAgICAgICAgIGlmIChiLmlkID09PSBjLmlkKSB7XHJcbiAgICAgICAgICAgIGIuZW5hYmxlID0gYnV0dG9uLmJ1dHRvblN0YXRlID09PSAnRW5hYmxlJyA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgICAgICAgYi5kaXNhYmxlZCA9IGJ1dHRvbi5idXR0b25TdGF0ZSA9PT0gJ0Rpc2FibGVkJyA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgICAgICAgYi5oaWRkZW4gPSBidXR0b24uYnV0dG9uU3RhdGUgPT09ICdIaWRkZW4nID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZmllbGRDb25maWdDaGFuZ2UoYm9vbDogYm9vbGVhbiwgZmllbGQ6IHN0cmluZywgaWQ6IHN0cmluZykge1xyXG4gICAgaWYgKGJvb2wpIHtcclxuICAgICAgdGhpcy5maWVsZFN3aXRjaENoYW5nZSh0aGlzLmZpZWxkQ29uZmlncywgZmllbGQsIGlkKTtcclxuICAgIH1cclxuICB9XHJcbiAgcHJpdmF0ZSBmaWVsZFN3aXRjaENoYW5nZShmaWVsZENvbmZpZ3M6IEFycmF5PGFueT4sIGZpZWxkOiBzdHJpbmcsIGlkOiBzdHJpbmcpIHtcclxuICAgIGlmIChmaWVsZENvbmZpZ3MubGVuZ3RoID4gMCkge1xyXG4gICAgICBmb3IgKGNvbnN0IGYgb2YgZmllbGRDb25maWdzKSB7XHJcbiAgICAgICAgaWYgKGYuZGF0YS5pZCA9PT0gaWQpIHtcclxuICAgICAgICAgIHN3aXRjaCAoZmllbGQpIHtcclxuICAgICAgICAgICAgY2FzZSAnZWRpdGFibGUnOlxyXG4gICAgICAgICAgICAgIGYuZGF0YS5lZGl0YWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgZi5kYXRhLnJlYWRvbmx5ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgZi5kYXRhLmhpZGRlbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgIGYuZGF0YS5yZXF1aXJlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdyZWFkb25seSc6XHJcbiAgICAgICAgICAgICAgZi5kYXRhLmVkaXRhYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgZi5kYXRhLnJlYWRvbmx5ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICBmLmRhdGEuaGlkZGVuID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgZi5kYXRhLnJlcXVpcmVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2hpZGRlbic6XHJcbiAgICAgICAgICAgICAgZi5kYXRhLmVkaXRhYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgZi5kYXRhLnJlYWRvbmx5ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgZi5kYXRhLmhpZGRlbiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgZi5kYXRhLnJlcXVpcmVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3JlcXVpcmVkJzpcclxuICAgICAgICAgICAgICBmLmRhdGEuZWRpdGFibGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICBmLmRhdGEucmVhZG9ubHkgPSBmYWxzZTtcclxuICAgICAgICAgICAgICBmLmRhdGEuaGlkZGVuID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgZi5kYXRhLnJlcXVpcmVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaWYgKGYuY2hpbGRyZW4gJiYgZi5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmllbGRTd2l0Y2hDaGFuZ2UoZi5jaGlsZHJlbiwgZmllbGQsIGlkKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZpZWxkQmF0Y2hPcGVyYXRlKG9wZXJhdGlvbjogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBjaGVja2VkcyA9IHRoaXMuZmllbGRUcmVlLmNoZWNrZWRzO1xyXG4gICAgaWYgKGNoZWNrZWRzICYmIGNoZWNrZWRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCBjIG9mIGNoZWNrZWRzKSB7XHJcbiAgICAgICAgdGhpcy5maWVsZENvbmZpZ0NoYW5nZSh0cnVlLCBvcGVyYXRpb24sIGMuZGF0YS5pZCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZpZWxkQmF0Y2hSZXNldCgpIHtcclxuICAgIGNvbnN0IGNoZWNrZWRzID0gdGhpcy5maWVsZFRyZWUuY2hlY2tlZHM7XHJcbiAgICBpZiAoY2hlY2tlZHMgJiYgY2hlY2tlZHMubGVuZ3RoID4gMCkge1xyXG4gICAgICBmb3IgKGNvbnN0IGMgb2YgY2hlY2tlZHMpIHtcclxuICAgICAgICBjb25zdCBmaWVsZCA9IHRoaXMuZm9ybWF0RmllbGRMaXN0LmZpbmQoZiA9PiBmLmlkID09PSBjLmRhdGEuaWQpO1xyXG4gICAgICAgIHRoaXMucmVzZXRGaWVsZENvbmZpZyh0aGlzLmZpZWxkQ29uZmlncywgYy5kYXRhLmlkLCBmaWVsZCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbiAgcmVzZXRGaWVsZENvbmZpZyhmaWVsZENvbmZpZ3M6IEFycmF5PGFueT4sIGlkOiBzdHJpbmcsIGZpZWxkOiBGb3JtRmllbGQpIHtcclxuICAgIGlmIChmaWVsZENvbmZpZ3MubGVuZ3RoID4gMCkge1xyXG4gICAgICBmb3IgKGNvbnN0IGYgb2YgZmllbGRDb25maWdzKSB7XHJcbiAgICAgICAgaWYgKGYubGVhZiA9PT0gdHJ1ZSAmJiBmLmRhdGEuaWQgPT09IGlkKSB7XHJcbiAgICAgICAgICBmLmRhdGEuZWRpdGFibGUgPSBmaWVsZC5maWVsZFN0YXRlID09PSAnRWRpdGFibGUnID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICAgICAgZi5kYXRhLnJlYWRvbmx5ID0gZmllbGQuZmllbGRTdGF0ZSA9PT0gJ1JlYWRvbmx5JyA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgICAgIGYuZGF0YS5oaWRkZW4gPSBmaWVsZC5maWVsZFN0YXRlID09PSAnSGlkZGVuJyA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgICAgIGYuZGF0YS5yZXF1aXJlZCA9IGZpZWxkLmZpZWxkU3RhdGUgPT09ICdSZXF1aXJlZCcgPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGlmIChmLmNoaWxkcmVuICYmIGYuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLnJlc2V0RmllbGRDb25maWcoZi5jaGlsZHJlbiwgaWQsIGZpZWxkKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgdmFsaWRhdG9yKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMub3BlcmF0aW9uQ29uZmlnLnZhbGlkYXRvcigpO1xyXG4gIH1cclxuXHJcblxyXG4gIHByaXZhdGUgc2V0QnRuQW5kRmllbGRDb25maWdzKCkge1xyXG4gICAgdGhpcy5jb25maWcuZm9ybUJ1dHRvbkNvbmZpZ3MgPSBuZXcgQXJyYXk8Rm9ybUJ1dHRvbkNvbmZpZz4oKTtcclxuICAgIGZvciAoY29uc3QgYnRuIG9mIHRoaXMuYnV0dG9uQ29uZmlncykge1xyXG4gICAgICBjb25zdCBidXR0b24gPSB0aGlzLmZvcm1Gb3JtYXQuZm9ybUJ1dHRvbnMuZmluZChiID0+IGIuYnV0dG9uSWQgPT09IGJ0bi5idXR0b25JZCk7XHJcbiAgICAgIGNvbnN0IGJ0bkNvbmZpZyA9IG5ldyBGb3JtQnV0dG9uQ29uZmlnKCk7XHJcbiAgICAgIGJ0bkNvbmZpZy5idXR0b25JZCA9IGJ0bi5idXR0b25JZDtcclxuICAgICAgaWYgKGJ0bi5lbmFibGUpIHtcclxuICAgICAgICBidG5Db25maWcuYnV0dG9uU3RhdGUgPSAnRW5hYmxlJztcclxuICAgICAgfSBlbHNlIGlmIChidG4uZGlzYWJsZWQpIHtcclxuICAgICAgICBidG5Db25maWcuYnV0dG9uU3RhdGUgPSAnRGlzYWJsZWQnO1xyXG4gICAgICB9IGVsc2UgaWYgKGJ0bi5oaWRkZW4pIHtcclxuICAgICAgICBidG5Db25maWcuYnV0dG9uU3RhdGUgPSAnSGlkZGVuJztcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb250aW51ZTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoIWJ1dHRvbi5idXR0b25TdGF0ZSAmJiBidG5Db25maWcuYnV0dG9uU3RhdGUpIHtcclxuICAgICAgICB0aGlzLmNvbmZpZy5mb3JtQnV0dG9uQ29uZmlncy5wdXNoKGJ0bkNvbmZpZyk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGJ1dHRvbi5idXR0b25TdGF0ZSAmJiBidXR0b24uYnV0dG9uU3RhdGUgIT09IGJ0bkNvbmZpZy5idXR0b25TdGF0ZSkge1xyXG4gICAgICAgIHRoaXMuY29uZmlnLmZvcm1CdXR0b25Db25maWdzLnB1c2goYnRuQ29uZmlnKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgdGhpcy5jb25maWcuZm9ybUZpZWxkQ29uZmlncyA9IG5ldyBBcnJheTxGb3JtRmllbGRDb25maWc+KCk7XHJcbiAgICB0aGlzLmdldEZpZWxkQ29uZmlncyh0aGlzLmZpZWxkQ29uZmlncyk7XHJcblxyXG4gICAgdGhpcy5jb25maWcuZm9ybU1ldGhvZENvbmZpZ3MgPSB0aGlzLm9wZXJhdGlvbkNvbmZpZy5vcGVyYXRpb25zIHx8IG5ldyBBcnJheSgpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRGaWVsZENvbmZpZ3MoZmllbGRDb25maWdzOiBBcnJheTxhbnk+KSB7XHJcbiAgICBpZiAoZmllbGRDb25maWdzICYmIGZpZWxkQ29uZmlncy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGZvciAoY29uc3QgZiBvZiBmaWVsZENvbmZpZ3MpIHtcclxuICAgICAgICBpZiAoZi5jaGlsZHJlbiAmJiBmLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIHRoaXMuZ2V0RmllbGRDb25maWdzKGYuY2hpbGRyZW4pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZi5sZWFmID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGZpZWxkID0gdGhpcy5mb3JtYXRGaWVsZExpc3QuZmluZChmZCA9PiBmZC5maWVsZElkID09PSBmLmRhdGEuZmllbGRJZCk7XHJcbiAgICAgICAgY29uc3QgZmllbGRDb25maWcgPSBuZXcgRm9ybUZpZWxkQ29uZmlnKCk7XHJcbiAgICAgICAgZmllbGRDb25maWcuZmllbGRJZCA9IGYuZGF0YS5maWVsZElkO1xyXG4gICAgICAgIGlmIChmLmRhdGEuZWRpdGFibGUpIHtcclxuICAgICAgICAgIGZpZWxkQ29uZmlnLmZpZWxkU3RhdGUgPSAnRWRpdGFibGUnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZi5kYXRhLnJlYWRvbmx5KSB7XHJcbiAgICAgICAgICBmaWVsZENvbmZpZy5maWVsZFN0YXRlID0gJ1JlYWRvbmx5JztcclxuICAgICAgICB9IGVsc2UgaWYgKGYuZGF0YS5oaWRkZW4pIHtcclxuICAgICAgICAgIGZpZWxkQ29uZmlnLmZpZWxkU3RhdGUgPSAnSGlkZGVuJztcclxuICAgICAgICB9IGVsc2UgaWYgKGYuZGF0YS5yZXF1aXJlZCkge1xyXG4gICAgICAgICAgZmllbGRDb25maWcuZmllbGRTdGF0ZSA9ICdSZXF1aXJlZCc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFmaWVsZC5maWVsZFN0YXRlICYmIGZpZWxkQ29uZmlnLmZpZWxkU3RhdGUpIHtcclxuICAgICAgICAgIHRoaXMuY29uZmlnLmZvcm1GaWVsZENvbmZpZ3MucHVzaChmaWVsZENvbmZpZyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZmllbGQuZmllbGRTdGF0ZSAmJiBmaWVsZC5maWVsZFN0YXRlICE9PSBmaWVsZENvbmZpZy5maWVsZFN0YXRlKSB7XHJcbiAgICAgICAgICB0aGlzLmNvbmZpZy5mb3JtRmllbGRDb25maWdzLnB1c2goZmllbGRDb25maWcpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRDb25maWcoKSB7XHJcbiAgICBpZiAodGhpcy5mb3JtRm9ybWF0SWQpIHtcclxuICAgICAgZm9ya0pvaW4odGhpcy5nZXRGb3JtRm9ybWF0KCksIHRoaXMuZ2V0Rm9ybUZvcm1hdENvbmZpZygpKS5zdWJzY3JpYmUoKHJlOiBhbnlbXSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGZvcm1Gb3JtYXQgPSByZVswXSBhcyBGb3JtRm9ybWF0O1xyXG4gICAgICAgIGlmIChmb3JtRm9ybWF0KSB7XHJcbiAgICAgICAgICB0aGlzLmZvcm1Gb3JtYXQgPSB0aGlzLmNvbnZlcnRGb3JtRm9ybWF0KGZvcm1Gb3JtYXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBjb25maWcgPSByZVsxXSBhcyBGb3JtRm9ybWF0Q29uZmlnO1xyXG4gICAgICAgIGlmIChjb25maWcpIHtcclxuICAgICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5mb3JtRm9ybWF0LmZvcm1CdXR0b25zKSB7XHJcbiAgICAgICAgICB0aGlzLmJ1dHRvbkNvbmZpZ3MgPSB0aGlzLmZvcm1Gb3JtYXQuZm9ybUJ1dHRvbnMubWFwKGIgPT4gT2JqZWN0LmFzc2lnbih7fSwgYiwge1xyXG4gICAgICAgICAgICBlbmFibGU6IGIuYnV0dG9uU3RhdGUgPT09ICdFbmFibGUnID8gdHJ1ZSA6IGZhbHNlLFxyXG4gICAgICAgICAgICBkaXNhYmxlZDogYi5idXR0b25TdGF0ZSA9PT0gJ0Rpc2FibGVkJyA/IHRydWUgOiBmYWxzZSxcclxuICAgICAgICAgICAgaGlkZGVuOiBiLmJ1dHRvblN0YXRlID09PSAnSGlkZGVuJyA/IHRydWUgOiBmYWxzZVxyXG4gICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgbGV0IGJ0bkNvbmZpZ3MgPSBuZXcgQXJyYXk8Rm9ybUJ1dHRvbkNvbmZpZz4oKTtcclxuICAgICAgICAgIGlmIChjb25maWcgJiYgY29uZmlnLmZvcm1CdXR0b25Db25maWdzKSB7XHJcbiAgICAgICAgICAgIGJ0bkNvbmZpZ3MgPSBjb25maWcuZm9ybUJ1dHRvbkNvbmZpZ3M7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBmb3IgKGNvbnN0IGIgb2YgYnRuQ29uZmlncykge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGJ0biBvZiB0aGlzLmJ1dHRvbkNvbmZpZ3MpIHtcclxuICAgICAgICAgICAgICBpZiAoYnRuLmJ1dHRvbklkID09PSBiLmJ1dHRvbklkKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGIuYnV0dG9uU3RhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgY2FzZSAnRW5hYmxlJzpcclxuICAgICAgICAgICAgICAgICAgICBidG4uZW5hYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBidG4uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBidG4uaGlkZGVuID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgIGNhc2UgJ0Rpc2FibGVkJzpcclxuICAgICAgICAgICAgICAgICAgICBidG4uZW5hYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgYnRuLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBidG4uaGlkZGVuID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgIGNhc2UgJ0hpZGRlbic6XHJcbiAgICAgICAgICAgICAgICAgICAgYnRuLmVuYWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJ0bi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJ0bi5oaWRkZW4gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmZvcm1Gb3JtYXQuZm9ybUZpZWxkcykge1xyXG4gICAgICAgICAgdGhpcy5maWVsZENvbmZpZ3MgPSBbLi4udGhpcy5mb3JtRm9ybWF0LmZvcm1GaWVsZHNdO1xyXG4gICAgICAgICAgdGhpcy5vcmdGaWVsZENvbmZpZ3ModGhpcy5maWVsZENvbmZpZ3MpO1xyXG4gICAgICAgICAgbGV0IGNvbmZpZ3MgPSBuZXcgQXJyYXk8Rm9ybUZpZWxkQ29uZmlnPigpO1xyXG4gICAgICAgICAgaWYgKGNvbmZpZyAmJiBjb25maWcuZm9ybUZpZWxkQ29uZmlncykge1xyXG4gICAgICAgICAgICBjb25maWdzID0gY29uZmlnLmZvcm1GaWVsZENvbmZpZ3M7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBmb3IgKGNvbnN0IGYgb2YgY29uZmlncykge1xyXG4gICAgICAgICAgICB0aGlzLnNldEZpZWxkQ29uZmlnKHRoaXMuZmllbGRDb25maWdzLCBmKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBvcmdGaWVsZENvbmZpZ3MoZm9ybUZpZWxkczogQXJyYXk8Rm9ybUZpZWxkRGF0YT4pIHtcclxuICAgIGlmIChmb3JtRmllbGRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCBkIG9mIGZvcm1GaWVsZHMpIHtcclxuICAgICAgICBkLmRhdGEgPSBPYmplY3QuYXNzaWduKHt9LCBkLmRhdGEsIHtcclxuICAgICAgICAgIGVkaXRhYmxlOiBkLmRhdGEuZmllbGRTdGF0ZSA9PT0gJ0VkaXRhYmxlJyA/IHRydWUgOiBmYWxzZSxcclxuICAgICAgICAgIHJlYWRvbmx5OiBkLmRhdGEuZmllbGRTdGF0ZSA9PT0gJ1JlYWRvbmx5JyA/IHRydWUgOiBmYWxzZSxcclxuICAgICAgICAgIGhpZGRlbjogZC5kYXRhLmZpZWxkU3RhdGUgPT09ICdIaWRkZW4nID8gdHJ1ZSA6IGZhbHNlLFxyXG4gICAgICAgICAgcmVxdWlyZWQ6IGQuZGF0YS5maWVsZFN0YXRlID09PSAnUmVxdWlyZWQnID8gdHJ1ZSA6IGZhbHNlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKGQuY2hpbGRyZW4gJiYgZC5jaGlsZHJlbikge1xyXG4gICAgICAgICAgdGhpcy5vcmdGaWVsZENvbmZpZ3MoZC5jaGlsZHJlbik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHNldEZpZWxkQ29uZmlnKGZpZWxkQ29uZmlnczogQXJyYXk8YW55PiwgY29uZmlnOiBGb3JtRmllbGRDb25maWcpIHtcclxuICAgIGlmIChmaWVsZENvbmZpZ3MubGVuZ3RoID4gMCkge1xyXG4gICAgICBmb3IgKGNvbnN0IGYgb2YgZmllbGRDb25maWdzKSB7XHJcbiAgICAgICAgaWYgKGYuZGF0YS5maWVsZElkID09PSBjb25maWcuZmllbGRJZCkge1xyXG4gICAgICAgICAgc3dpdGNoIChjb25maWcuZmllbGRTdGF0ZSkge1xyXG4gICAgICAgICAgICBjYXNlICdFZGl0YWJsZSc6XHJcbiAgICAgICAgICAgICAgZi5kYXRhLmVkaXRhYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICBmLmRhdGEucmVhZG9ubHkgPSBmYWxzZTtcclxuICAgICAgICAgICAgICBmLmRhdGEuaGlkZGVuID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgZi5kYXRhLnJlcXVpcmVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ1JlYWRvbmx5JzpcclxuICAgICAgICAgICAgICBmLmRhdGEuZWRpdGFibGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICBmLmRhdGEucmVhZG9ubHkgPSB0cnVlO1xyXG4gICAgICAgICAgICAgIGYuZGF0YS5oaWRkZW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgICBmLmRhdGEucmVxdWlyZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnSGlkZGVuJzpcclxuICAgICAgICAgICAgICBmLmRhdGEuZWRpdGFibGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICBmLmRhdGEucmVhZG9ubHkgPSBmYWxzZTtcclxuICAgICAgICAgICAgICBmLmRhdGEuaGlkZGVuID0gdHJ1ZTtcclxuICAgICAgICAgICAgICBmLmRhdGEucmVxdWlyZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnUmVxdWlyZWQnOlxyXG4gICAgICAgICAgICAgIGYuZGF0YS5lZGl0YWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgIGYuZGF0YS5yZWFkb25seSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgIGYuZGF0YS5oaWRkZW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgICBmLmRhdGEucmVxdWlyZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBpZiAoZi5jaGlsZHJlbiAmJiBmLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRGaWVsZENvbmZpZyhmLmNoaWxkcmVuLCBjb25maWcpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzYXZlQ29uZmlnKGNvbmZpZzogRm9ybUZvcm1hdENvbmZpZyk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICBjb25zdCB1cmwgPSAnL2FwaS9ydW50aW1lL3dmL3YxLjAvZm9ybUZvcm1hdENvbmZpZyc7XHJcbiAgICByZXR1cm4gdGhpcy5odHRwLnBvc3QodXJsLCBjb25maWcpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRGb3JtRm9ybWF0KCk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICBpZiAodGhpcy5mb3JtRm9ybWF0SWQpIHtcclxuICAgICAgbGV0IHVybCA9IGAvYXBpL3J1bnRpbWUvd2YvdjEuMC9mb3JtRm9ybWF0LyR7dGhpcy5mb3JtRm9ybWF0SWR9YDtcclxuICAgICAgdXJsID0gZW5jb2RlVVJJKHVybCk7XHJcbiAgICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0KHVybCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gb2YobnVsbCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldEZvcm1Gb3JtYXRDb25maWcoKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgIGlmICh0aGlzLmZvcm1hdENvbmZpZ0lkKSB7XHJcbiAgICAgIGxldCB1cmwgPSBgL2FwaS9ydW50aW1lL3dmL3YxLjAvZm9ybUZvcm1hdENvbmZpZy8ke3RoaXMuZm9ybWF0Q29uZmlnSWR9YDtcclxuICAgICAgdXJsID0gZW5jb2RlVVJJKHVybCk7XHJcbiAgICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0KHVybCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gb2YobnVsbCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNvbnZlcnRGb3JtRm9ybWF0KGZvcm1Gb3JtYXQ6IEZvcm1Gb3JtYXQpOiBGb3JtRm9ybWF0IHtcclxuICAgIGlmICghZm9ybUZvcm1hdC5zdGF0dXMpIHtcclxuICAgICAgZm9ybUZvcm1hdC5zdGF0dXMgPSAwO1xyXG4gICAgfVxyXG4gICAgdGhpcy5jb252ZXJ0Zm9ybUZpZWxkcyhmb3JtRm9ybWF0LmZvcm1GaWVsZHMpO1xyXG4gICAgdGhpcy5nZXRGb3JtYXRGaWVsZExpc3QoZm9ybUZvcm1hdC5mb3JtRmllbGRzLCB0aGlzLmZvcm1hdEZpZWxkTGlzdCk7XHJcbiAgICByZXR1cm4gZm9ybUZvcm1hdDtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgY29udmVydGZvcm1GaWVsZHMoZm9ybUZpZWxkczogQXJyYXk8Rm9ybUZpZWxkRGF0YT4pIHtcclxuICAgIGlmIChmb3JtRmllbGRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCBkIG9mIGZvcm1GaWVsZHMpIHtcclxuICAgICAgICBpZiAodHlwZW9mKGQubGVhZikgIT09ICdib29sZWFuJyAmJiAoZC5sZWFmID09IG51bGwgfHwgZC5sZWFmID09PSB1bmRlZmluZWQpKSB7XHJcbiAgICAgICAgICBkLmxlYWYgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZC5jaGlsZHJlbiAmJiBkLmNoaWxkcmVuKSB7XHJcbiAgICAgICAgICB0aGlzLm9yZ0ZpZWxkQ29uZmlncyhkLmNoaWxkcmVuKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0Rm9ybWF0RmllbGRMaXN0KGZvcm1GaWVsZHM6IEFycmF5PEZvcm1GaWVsZERhdGE+LCBhcnJheTogQXJyYXk8Rm9ybUZpZWxkPikge1xyXG4gICAgaWYgKGZvcm1GaWVsZHMubGVuZ3RoID4gMCkge1xyXG4gICAgICBmb3IgKGNvbnN0IGQgb2YgZm9ybUZpZWxkcykge1xyXG4gICAgICAgIGFycmF5LnB1c2goZC5kYXRhKTtcclxuICAgICAgICBpZiAoZC5jaGlsZHJlbiAmJiBkLmNoaWxkcmVuKSB7XHJcbiAgICAgICAgICB0aGlzLmdldEZvcm1hdEZpZWxkTGlzdChkLmNoaWxkcmVuLCBhcnJheSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldEZvcm1hdEZpZWxkKGZvcm1GaWVsZHM6IEFycmF5PEZvcm1GaWVsZERhdGE+LCBmaWVsZElkOiBzdHJpbmcpOiBGb3JtRmllbGREYXRhIHtcclxuICAgIGZvciAoY29uc3QgZiBvZiBmb3JtRmllbGRzKSB7XHJcbiAgICAgIGlmIChmLmRhdGEuZmllbGRJZCA9PT0gZmllbGRJZCkge1xyXG4gICAgICAgIHJldHVybiBmO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChmLmNoaWxkcmVuICYmIGYuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldEZvcm1hdEZpZWxkKGYuY2hpbGRyZW4sIGZpZWxkSWQpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gIH1cclxuXHJcbn1cclxuIl19