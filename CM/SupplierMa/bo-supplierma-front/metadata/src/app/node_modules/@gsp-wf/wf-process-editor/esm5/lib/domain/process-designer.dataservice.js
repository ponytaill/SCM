/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Injectable } from '@angular/core';
import { HttpService } from '@ecp-caf/caf-common';
import { ProcessDeUtil } from './process-de-util';
var ProcessDesignerDataService = /** @class */ (function () {
    function ProcessDesignerDataService(http, util) {
        this.http = http;
        this.util = util;
    }
    // 基于流程分类ID获取流程分类信息
    // 基于流程分类ID获取流程分类信息
    /**
     * @param {?} id
     * @return {?}
     */
    ProcessDesignerDataService.prototype.GetFlowFormbyId = 
    // 基于流程分类ID获取流程分类信息
    /**
     * @param {?} id
     * @return {?}
     */
    function (id) {
        if (id) {
            /** @type {?} */
            var url = this.util.getFlowFormWebApi();
            url += "/" + id;
            return this.http.get(url);
        }
    };
    // 基于流程分类获取参数列表
    // 基于流程分类获取参数列表
    /**
     * @param {?} id
     * @return {?}
     */
    ProcessDesignerDataService.prototype.getParametersbyFlowFormKey = 
    // 基于流程分类获取参数列表
    /**
     * @param {?} id
     * @return {?}
     */
    function (id) {
        if (id) {
            /** @type {?} */
            var url = this.util.getFormalParametersWebApi();
            url += "?flowFormKey=" + id;
            return this.http.get(url);
        }
    };
    // 基于流程分类获取流程构件
    // 基于流程分类获取流程构件
    /**
     * @param {?} id
     * @return {?}
     */
    ProcessDesignerDataService.prototype.getComponentsbyFlowformkey = 
    // 基于流程分类获取流程构件
    /**
     * @param {?} id
     * @return {?}
     */
    function (id) {
        if (id) {
            /** @type {?} */
            var url = this.util.getBizComponentsWebApi();
            url += "/query?param=" + encodeURIComponent("{\"flowFormKey\":\"" + id + "\"}");
            return this.http.get(url);
        }
    };
    // 基于流程分类获取表单定义
    // 基于流程分类获取表单定义
    /**
     * @param {?} id
     * @return {?}
     */
    ProcessDesignerDataService.prototype.getExecuteFormbyFlowFormKey = 
    // 基于流程分类获取表单定义
    /**
     * @param {?} id
     * @return {?}
     */
    function (id) {
        if (id) {
            /** @type {?} */
            var url = this.util.getExcuteFormsWebApi();
            url += "?flowFormKey=" + id;
            return this.http.get(url);
        }
    };
    /**
     * 基于流程分类Id获取业务活动
     * @param ffId 流程分类id
     */
    /**
     * 基于流程分类Id获取业务活动
     * @param {?} ffId 流程分类id
     * @return {?}
     */
    ProcessDesignerDataService.prototype.getBizActivities = /**
     * 基于流程分类Id获取业务活动
     * @param {?} ffId 流程分类id
     * @return {?}
     */
    function (ffId) {
        if (ffId) {
            /** @type {?} */
            var url = this.util.getBizActivityWebApi(ffId);
            return this.http.get(url);
            // .pipe(
            //     map((re: any) => re),
            //     mergeMap((activities: any[]) => {
            //         if (activities && activities.length > 0) {
            //             return forkJoin(activities.map(activity => {
            //                 return forkJoin(this.getBizActivityComponents(ffId, activity.id),
            //                     this.getBizActivityActions(activity.id))
            //                     .pipe(
            //                         map((re: any[]) => {
            //                             activity.components = re[0];
            //                             activity.actions = re[1];
            //                             return activity;
            //                         }));
            //             }));
            //         } else {
            //             return of([]);
            //         }
            //     })
            // );
        }
    };
    /**
     * 基于流程分类ID获取自定义动作
     * @param formId 流程分类ID
     */
    /**
     * 基于流程分类ID获取自定义动作
     * @param {?} formId 流程分类ID
     * @return {?}
     */
    ProcessDesignerDataService.prototype.getCustomizeActions = /**
     * 基于流程分类ID获取自定义动作
     * @param {?} formId 流程分类ID
     * @return {?}
     */
    function (formId) {
        if (formId) {
            /** @type {?} */
            var url = "/api/runtime/wf/v1.0/customizeAction?flowFormKey=" + formId;
            return this.http.get(url);
        }
    };
    /**
     * 基于业务活动id获取业务活动构件
     * @param id 业务活动id
     */
    /**
     * 基于业务活动id获取业务活动构件
     * @private
     * @param {?} flowFormId
     * @param {?} id 业务活动id
     * @return {?}
     */
    ProcessDesignerDataService.prototype.getBizActivityComponents = /**
     * 基于业务活动id获取业务活动构件
     * @private
     * @param {?} flowFormId
     * @param {?} id 业务活动id
     * @return {?}
     */
    function (flowFormId, id) {
        if (id) {
            /** @type {?} */
            var url = this.util.getBizComponentsWebApi();
            url += "/query?param=" + encodeURIComponent("{\"flowFormKey\":\"" + flowFormId + "\",\"owner\":\"" + id + "\",\"ownerType\":\"Activity\"}");
            return this.http.get(url);
        }
    };
    /**
     * @private
     * @param {?} id
     * @return {?}
     */
    ProcessDesignerDataService.prototype.getBizActivityActions = /**
     * @private
     * @param {?} id
     * @return {?}
     */
    function (id) {
        if (id) {
            /** @type {?} */
            var url = this.util.getApprovalActionWebApi();
            url += "?bizActivityId=" + id;
            return this.http.get(url);
        }
    };
    // 基于ID获取BE
    // 基于ID获取BE
    /**
     * @param {?} id
     * @return {?}
     */
    ProcessDesignerDataService.prototype.getBusinessEntitybyId = 
    // 基于ID获取BE
    /**
     * @param {?} id
     * @return {?}
     */
    function (id) {
        if (id) {
            // let url = this.util.getMetaDataRUWebApi();
            // url += id;
            // const url = `/api/runtime/lcm/v1.0/bef/handledBeMeta?beId=${id}`;
            /** @type {?} */
            var url = "/api/runtime/lcm/v1.0/bef/expression?beId=" + id;
            return this.http.get(url);
        }
    };
    /**
     * 基于流程定义Key获取上下文
     * @param key 流程定义key
     */
    /**
     * 基于流程定义Key获取上下文
     * @param {?} key 流程定义key
     * @return {?}
     */
    ProcessDesignerDataService.prototype.getProcContentbyKey = /**
     * 基于流程定义Key获取上下文
     * @param {?} key 流程定义key
     * @return {?}
     */
    function (key) {
        if (key) {
            /** @type {?} */
            var url = this.util.getProcessDefinitionWebApi();
            url += "/bpmnModel?procDefKey=" + key;
            return this.http.get(url);
        }
    };
    /**
     * 基于流程定义Key获取上下文
     * @param key 流程定义Id
     */
    /**
     * 基于流程定义Key获取上下文
     * @param {?} id
     * @return {?}
     */
    ProcessDesignerDataService.prototype.getRTProcContentbyId = /**
     * 基于流程定义Key获取上下文
     * @param {?} id
     * @return {?}
     */
    function (id) {
        if (id) {
            /** @type {?} */
            var url = this.util.getRTProcessDefinitionWebApi();
            url += "/" + id + "/bpmnModel";
            return this.http.get(url);
        }
    };
    /**
     * 保存流程
     * @param content
     */
    /**
     * 保存流程
     * @param {?} content
     * @param {?} processInfo
     * @param {?} state
     * @return {?}
     */
    ProcessDesignerDataService.prototype.saveProcess = /**
     * 保存流程
     * @param {?} content
     * @param {?} processInfo
     * @param {?} state
     * @return {?}
     */
    function (content, processInfo, state) {
        if (content) {
            /** @type {?} */
            var postData = {
                organization: processInfo.procOrg ? processInfo.procOrg.orgId : '',
                organizationName: processInfo.procOrg ? processInfo.procOrg.orgName : '',
                accessLevel: processInfo.accessLevel,
                procContent: content,
                state: state
            };
            /** @type {?} */
            var url = this.util.getProcessDefinitionWebApi();
            return this.http.post(url, JSON.stringify(postData));
        }
    };
    /**
     * @param {?} info
     * @return {?}
     */
    ProcessDesignerDataService.prototype.auditProcessDef = /**
     * @param {?} info
     * @return {?}
     */
    function (info) {
        /** @type {?} */
        var url = '/api/runtime/wf/v1.0/dtProcDefs/auditProcessDef';
        this.http.post(url, info).subscribe((/**
         * @param {?} re
         * @return {?}
         */
        function (re) { }));
    };
    /**
     * 发布流程
     * @param content
     */
    /**
     * 发布流程
     * @param {?} content
     * @return {?}
     */
    ProcessDesignerDataService.prototype.deployProcess = /**
     * 发布流程
     * @param {?} content
     * @return {?}
     */
    function (content) {
        if (content) {
            /** @type {?} */
            var postData = {
                procDefContent: content
            };
            /** @type {?} */
            var url = this.util.deployWebApi();
            return this.http.post(url, JSON.stringify(postData));
        }
    };
    /**
     * @param {?} content
     * @param {?} procDefId
     * @return {?}
     */
    ProcessDesignerDataService.prototype.saveRTProcess = /**
     * @param {?} content
     * @param {?} procDefId
     * @return {?}
     */
    function (content, procDefId) {
        if (content) {
            /** @type {?} */
            var postData = {
                procDefContent: content
            };
            /** @type {?} */
            var url = this.util.getRTProcessDefinitionWebApi();
            url += "/" + procDefId + "/adjust";
            return this.http.post(url, JSON.stringify(postData));
        }
    };
    /**
     * @param {?} content
     * @param {?} rtProcessInfo
     * @return {?}
     */
    ProcessDesignerDataService.prototype.syncDtProcess = /**
     * @param {?} content
     * @param {?} rtProcessInfo
     * @return {?}
     */
    function (content, rtProcessInfo) {
        if (content) {
            /** @type {?} */
            var postData = {
                organization: rtProcessInfo.procOrg ? rtProcessInfo.procOrg.orgId : '',
                organizationName: rtProcessInfo.procOrg ? rtProcessInfo.procOrg.orgName : '',
                accessLevel: rtProcessInfo.accessLevel || 'public',
                procContent: content,
                state: 0
            };
            /** @type {?} */
            var url = '/api/runtime/wf/v1.0/dtProcDefs';
            return this.http.post(url, JSON.stringify(postData));
        }
    };
    ProcessDesignerDataService.decorators = [
        { type: Injectable }
    ];
    /** @nocollapse */
    ProcessDesignerDataService.ctorParameters = function () { return [
        { type: HttpService },
        { type: ProcessDeUtil }
    ]; };
    return ProcessDesignerDataService;
}());
export { ProcessDesignerDataService };
if (false) {
    /**
     * @type {?}
     * @private
     */
    ProcessDesignerDataService.prototype.http;
    /**
     * @type {?}
     * @private
     */
    ProcessDesignerDataService.prototype.util;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvY2Vzcy1kZXNpZ25lci5kYXRhc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Bnc3Atd2Yvd2YtcHJvY2Vzcy1lZGl0b3IvIiwic291cmNlcyI6WyJsaWIvZG9tYWluL3Byb2Nlc3MtZGVzaWduZXIuZGF0YXNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxVQUFVLEVBQVksTUFBTSxlQUFlLENBQUM7QUFDckQsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBS2xELE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUtsRDtJQUVJLG9DQUNZLElBQWlCLEVBQ2pCLElBQW1CO1FBRG5CLFNBQUksR0FBSixJQUFJLENBQWE7UUFDakIsU0FBSSxHQUFKLElBQUksQ0FBZTtJQUFJLENBQUM7SUFFcEMsbUJBQW1COzs7Ozs7SUFDbkIsb0RBQWU7Ozs7OztJQUFmLFVBQWdCLEVBQVU7UUFDdEIsSUFBSSxFQUFFLEVBQUU7O2dCQUNBLEdBQUcsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLGlCQUFpQixFQUFFO1lBQ3ZDLEdBQUcsSUFBSSxNQUFJLEVBQUksQ0FBQztZQUNoQixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1NBQzdCO0lBQ0wsQ0FBQztJQUNELGVBQWU7Ozs7OztJQUNmLCtEQUEwQjs7Ozs7O0lBQTFCLFVBQTJCLEVBQVU7UUFDakMsSUFBSSxFQUFFLEVBQUU7O2dCQUNBLEdBQUcsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLHlCQUF5QixFQUFFO1lBQy9DLEdBQUcsSUFBSSxrQkFBZ0IsRUFBSSxDQUFDO1lBQzVCLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7U0FDN0I7SUFDTCxDQUFDO0lBQ0QsZUFBZTs7Ozs7O0lBQ2YsK0RBQTBCOzs7Ozs7SUFBMUIsVUFBMkIs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Q0FBQyxDQUFDLEVBQUU7Z0JBQ3RFLGdCQUFnQixFQUFFLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFO2dCQUM1RSxXQUFXLEVBQUUsYUFBYSxDQUFDLFdBQVcsSUFBSSxRQUFRO2dCQUNsRCxXQUFXLEVBQUUsT0FBTztnQkFDcEIsS0FBSyxFQUFFLENBQUM7YUFDWDs7Z0JBQ0ssR0FBRyxHQUFHLGlDQUFpQztZQUM3QyxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7U0FDeEQ7SUFDTCxDQUFDOztnQkE3TEosVUFBVTs7OztnQkFWRixXQUFXO2dCQUtYLGFBQWE7O0lBbU10QixpQ0FBQztDQUFBLEFBOUxELElBOExDO1NBN0xZLDBCQUEwQjs7Ozs7O0lBRS9CLDBDQUF5Qjs7Ozs7SUFDekIsMENBQTJCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSwgSW5qZWN0b3IgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgSHR0cFNlcnZpY2UgfSBmcm9tICdAZWNwLWNhZi9jYWYtY29tbW9uJztcclxuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMvT2JzZXJ2YWJsZSc7XHJcbmltcG9ydCB7IG1hcCwgbWVyZ2VNYXAgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XHJcbmltcG9ydCB7IGZvcmtKb2luIH0gZnJvbSAncnhqcy9vYnNlcnZhYmxlL2ZvcmtKb2luJztcclxuaW1wb3J0IHsgb2YgfSBmcm9tICdyeGpzL29ic2VydmFibGUvb2YnO1xyXG5pbXBvcnQgeyBQcm9jZXNzRGVVdGlsIH0gZnJvbSAnLi9wcm9jZXNzLWRlLXV0aWwnO1xyXG5pbXBvcnQgeyBBdWRpdFByb2Nlc3NEZWZJbmZvIH0gZnJvbSAnLi9lbnRpdGllcy9hdWRpdC1wcm9jZXNzRGVmLWluZm8nO1xyXG5pbXBvcnQgeyBQcm9jZXNzSW5mbyB9IGZyb20gJy4uL21vZGVsL3Byb2Nlc3MtaW5mbyc7XHJcbmltcG9ydCB7IFJUUHJvY2Vzc0luZm8gfSBmcm9tICcuLi9tb2RlbC9ydC1wcm9jZXNzLWluZm8nO1xyXG5cclxuQEluamVjdGFibGUoKVxyXG5leHBvcnQgY2xhc3MgUHJvY2Vzc0Rlc2lnbmVyRGF0YVNlcnZpY2Uge1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHJpdmF0ZSBodHRwOiBIdHRwU2VydmljZSxcclxuICAgICAgICBwcml2YXRlIHV0aWw6IFByb2Nlc3NEZVV0aWwpIHsgfVxyXG5cclxuICAgIC8vIOWfuuS6jua1geeoi+WIhuexu0lE6I635Y+W5rWB56iL5YiG57G75L+h5oGvXHJcbiAgICBHZXRGbG93Rm9ybWJ5SWQoaWQ6IHN0cmluZyk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICAgICAgaWYgKGlkKSB7XHJcbiAgICAgICAgICAgIGxldCB1cmwgPSB0aGlzLnV0aWwuZ2V0Rmxvd0Zvcm1XZWJBcGkoKTtcclxuICAgICAgICAgICAgdXJsICs9IGAvJHtpZH1gO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5odHRwLmdldCh1cmwpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIOWfuuS6jua1geeoi+WIhuexu+iOt+WPluWPguaVsOWIl+ihqFxyXG4gICAgZ2V0UGFyYW1ldGVyc2J5Rmxvd0Zvcm1LZXkoaWQ6IHN0cmluZyk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICAgICAgaWYgKGlkKSB7XHJcbiAgICAgICAgICAgIGxldCB1cmwgPSB0aGlzLnV0aWwuZ2V0Rm9ybWFsUGFyYW1ldGVyc1dlYkFwaSgpO1xyXG4gICAgICAgICAgICB1cmwgKz0gYD9mbG93Rm9ybUtleT0ke2lkfWA7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0KHVybCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8g5Z+65LqO5rWB56iL5YiG57G76I635Y+W5rWB56iL5p6E5Lu2XHJcbiAgICBnZXRDb21wb25lbnRzYnlGbG93Zm9ybWtleShpZDogc3RyaW5nKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgICAgICBpZiAoaWQpIHtcclxuICAgICAgICAgICAgbGV0IHVybCA9IHRoaXMudXRpbC5nZXRCaXpDb21wb25lbnRzV2ViQXBpKCk7XHJcbiAgICAgICAgICAgIHVybCArPSBgL3F1ZXJ5P3BhcmFtPWAgKyBlbmNvZGVVUklDb21wb25lbnQoYHtcImZsb3dGb3JtS2V5XCI6XCIke2lkfVwifWApO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5odHRwLmdldCh1cmwpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIOWfuuS6jua1geeoi+WIhuexu+iOt+WPluihqOWNleWumuS5iVxyXG4gICAgZ2V0RXhlY3V0ZUZvcm1ieUZsb3dGb3JtS2V5KGlkOiBzdHJpbmcpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgICAgIGlmIChpZCkge1xyXG4gICAgICAgICAgICBsZXQgdXJsID0gdGhpcy51dGlsLmdldEV4Y3V0ZUZvcm1zV2ViQXBpKCk7XHJcbiAgICAgICAgICAgIHVybCArPSBgP2Zsb3dGb3JtS2V5PSR7aWR9YDtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQodXJsKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWfuuS6jua1geeoi+WIhuexu0lk6I635Y+W5Lia5Yqh5rS75YqoXHJcbiAgICAgKiBAcGFyYW0gZmZJZCDmtYHnqIvliIbnsbtpZFxyXG4gICAgICovXHJcbiAgICBnZXRCaXpBY3Rpdml0aWVzKGZmSWQ6IHN0cmluZykge1xyXG4gICAgICAgIGlmIChmZklkKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHVybCA9IHRoaXMudXRpbC5nZXRCaXpBY3Rpdml0eVdlYkFwaShmZklkKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQodXJsKTtcclxuICAgICAgICAgICAgICAgIC8vIC5waXBlKFxyXG4gICAgICAgICAgICAgICAgLy8gICAgIG1hcCgocmU6IGFueSkgPT4gcmUpLFxyXG4gICAgICAgICAgICAgICAgLy8gICAgIG1lcmdlTWFwKChhY3Rpdml0aWVzOiBhbnlbXSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBpZiAoYWN0aXZpdGllcyAmJiBhY3Rpdml0aWVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIHJldHVybiBmb3JrSm9pbihhY3Rpdml0aWVzLm1hcChhY3Rpdml0eSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgcmV0dXJuIGZvcmtKb2luKHRoaXMuZ2V0Qml6QWN0aXZpdHlDb21wb25lbnRzKGZmSWQsIGFjdGl2aXR5LmlkKSxcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRCaXpBY3Rpdml0eUFjdGlvbnMoYWN0aXZpdHkuaWQpKVxyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAucGlwZShcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgIG1hcCgocmU6IGFueVtdKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZpdHkuY29tcG9uZW50cyA9IHJlWzBdO1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2aXR5LmFjdGlvbnMgPSByZVsxXTtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWN0aXZpdHk7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICByZXR1cm4gb2YoW10pO1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgfSlcclxuICAgICAgICAgICAgICAgIC8vICk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5Z+65LqO5rWB56iL5YiG57G7SUTojrflj5boh6rlrprkuYnliqjkvZxcclxuICAgICAqIEBwYXJhbSBmb3JtSWQg5rWB56iL5YiG57G7SURcclxuICAgICAqL1xyXG4gICAgZ2V0Q3VzdG9taXplQWN0aW9ucyhmb3JtSWQ6IHN0cmluZyk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICAgICAgaWYgKGZvcm1JZCkge1xyXG4gICAgICAgICAgICBjb25zdCB1cmwgPSBgL2FwaS9ydW50aW1lL3dmL3YxLjAvY3VzdG9taXplQWN0aW9uP2Zsb3dGb3JtS2V5PSR7Zm9ybUlkfWA7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0KHVybCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDln7rkuo7kuJrliqHmtLvliqhpZOiOt+WPluS4muWKoea0u+WKqOaehOS7tlxyXG4gICAgICogQHBhcmFtIGlkIOS4muWKoea0u+WKqGlkXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZ2V0Qml6QWN0aXZpdHlDb21wb25lbnRzKGZsb3dGb3JtSWQ6IHN0cmluZywgaWQ6IHN0cmluZykge1xyXG4gICAgICAgIGlmIChpZCkge1xyXG4gICAgICAgICAgICBsZXQgdXJsID0gdGhpcy51dGlsLmdldEJpekNvbXBvbmVudHNXZWJBcGkoKTtcclxuICAgICAgICAgICAgdXJsICs9IGAvcXVlcnk/cGFyYW09YCArIGVuY29kZVVSSUNvbXBvbmVudChge1wiZmxvd0Zvcm1LZXlcIjpcIiR7Zmxvd0Zvcm1JZH1cIixcIm93bmVyXCI6XCIke2lkfVwiLFwib3duZXJUeXBlXCI6XCJBY3Rpdml0eVwifWApO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5odHRwLmdldCh1cmwpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgZ2V0Qml6QWN0aXZpdHlBY3Rpb25zKGlkOiBzdHJpbmcpIHtcclxuICAgICAgICBpZiAoaWQpIHtcclxuICAgICAgICAgICAgbGV0IHVybCA9IHRoaXMudXRpbC5nZXRBcHByb3ZhbEFjdGlvbldlYkFwaSgpO1xyXG4gICAgICAgICAgICB1cmwgKz0gYD9iaXpBY3Rpdml0eUlkPSR7aWR9YDtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0KHVybCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8g5Z+65LqOSUTojrflj5ZCRVxyXG4gICAgZ2V0QnVzaW5lc3NFbnRpdHlieUlkKGlkOiBzdHJpbmcpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgICAgIGlmIChpZCkge1xyXG4gICAgICAgICAgICAvLyBsZXQgdXJsID0gdGhpcy51dGlsLmdldE1ldGFEYXRhUlVXZWJBcGkoKTtcclxuICAgICAgICAgICAgLy8gdXJsICs9IGlkO1xyXG4gICAgICAgICAgICAvLyBjb25zdCB1cmwgPSBgL2FwaS9ydW50aW1lL2xjbS92MS4wL2JlZi9oYW5kbGVkQmVNZXRhP2JlSWQ9JHtpZH1gO1xyXG4gICAgICAgICAgICBjb25zdCB1cmwgPSBgL2FwaS9ydW50aW1lL2xjbS92MS4wL2JlZi9leHByZXNzaW9uP2JlSWQ9JHtpZH1gO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5odHRwLmdldCh1cmwpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5Z+65LqO5rWB56iL5a6a5LmJS2V56I635Y+W5LiK5LiL5paHXHJcbiAgICAgKiBAcGFyYW0ga2V5IOa1geeoi+WumuS5iWtleVxyXG4gICAgICovXHJcbiAgICBnZXRQcm9jQ29udGVudGJ5S2V5KGtleTogc3RyaW5nKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgICAgICBpZiAoa2V5KSB7XHJcbiAgICAgICAgICAgIGxldCB1cmwgPSB0aGlzLnV0aWwuZ2V0UHJvY2Vzc0RlZmluaXRpb25XZWJBcGkoKTtcclxuICAgICAgICAgICAgdXJsICs9IGAvYnBtbk1vZGVsP3Byb2NEZWZLZXk9JHtrZXl9YDtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQodXJsKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWfuuS6jua1geeoi+WumuS5iUtleeiOt+WPluS4iuS4i+aWh1xyXG4gICAgICogQHBhcmFtIGtleSDmtYHnqIvlrprkuYlJZFxyXG4gICAgICovXHJcbiAgICBnZXRSVFByb2NDb250ZW50YnlJZChpZDogc3RyaW5nKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgICAgICBpZiAoaWQpIHtcclxuICAgICAgICAgICAgbGV0IHVybCA9IHRoaXMudXRpbC5nZXRSVFByb2Nlc3NEZWZpbml0aW9uV2ViQXBpKCk7XHJcbiAgICAgICAgICAgIHVybCArPSBgLyR7aWR9L2JwbW5Nb2RlbGA7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0KHVybCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDkv53lrZjmtYHnqItcclxuICAgICAqIEBwYXJhbSBjb250ZW50XHJcbiAgICAgKi9cclxuICAgIHNhdmVQcm9jZXNzKGNvbnRlbnQ6IHN0cmluZywgcHJvY2Vzc0luZm86IFByb2Nlc3NJbmZvLCBzdGF0ZTogbnVtYmVyKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgICAgICBpZiAoY29udGVudCkge1xyXG4gICAgICAgICAgICBjb25zdCBwb3N0RGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIG9yZ2FuaXphdGlvbjogcHJvY2Vzc0luZm8ucHJvY09yZyA/IHByb2Nlc3NJbmZvLnByb2NPcmcub3JnSWQgOiAnJyxcclxuICAgICAgICAgICAgICAgIG9yZ2FuaXphdGlvbk5hbWU6IHByb2Nlc3NJbmZvLnByb2NPcmcgPyBwcm9jZXNzSW5mby5wcm9jT3JnLm9yZ05hbWUgOiAnJyxcclxuICAgICAgICAgICAgICAgIGFjY2Vzc0xldmVsOiBwcm9jZXNzSW5mby5hY2Nlc3NMZXZlbCxcclxuICAgICAgICAgICAgICAgIHByb2NDb250ZW50OiBjb250ZW50LFxyXG4gICAgICAgICAgICAgICAgc3RhdGVcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgY29uc3QgdXJsID0gdGhpcy51dGlsLmdldFByb2Nlc3NEZWZpbml0aW9uV2ViQXBpKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmh0dHAucG9zdCh1cmwsIEpTT04uc3RyaW5naWZ5KHBvc3REYXRhKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGF1ZGl0UHJvY2Vzc0RlZihpbmZvOiBBdWRpdFByb2Nlc3NEZWZJbmZvKSB7XHJcbiAgICAgICAgY29uc3QgdXJsID0gJy9hcGkvcnVudGltZS93Zi92MS4wL2R0UHJvY0RlZnMvYXVkaXRQcm9jZXNzRGVmJztcclxuICAgICAgICB0aGlzLmh0dHAucG9zdCh1cmwsIGluZm8pLnN1YnNjcmliZShyZSA9PiB7IH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5Y+R5biD5rWB56iLXHJcbiAgICAgKiBAcGFyYW0gY29udGVudFxyXG4gICAgICovXHJcbiAgICBkZXBsb3lQcm9jZXNzKGNvbnRlbnQ6IHN0cmluZyk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICAgICAgaWYgKGNvbnRlbnQpIHtcclxuICAgICAgICAgICAgY29uc3QgcG9zdERhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICBwcm9jRGVmQ29udGVudDogY29udGVudFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBjb25zdCB1cmwgPSB0aGlzLnV0aWwuZGVwbG95V2ViQXBpKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmh0dHAucG9zdCh1cmwsIEpTT04uc3RyaW5naWZ5KHBvc3REYXRhKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNhdmVSVFByb2Nlc3MoY29udGVudDogc3RyaW5nLCBwcm9jRGVmSWQ6IHN0cmluZyk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICAgICAgaWYgKGNvbnRlbnQpIHtcclxuICAgICAgICAgICAgY29uc3QgcG9zdERhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICBwcm9jRGVmQ29udGVudDogY29udGVudFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBsZXQgdXJsID0gdGhpcy51dGlsLmdldFJUUHJvY2Vzc0RlZmluaXRpb25XZWJBcGkoKTtcclxuICAgICAgICAgICAgdXJsICs9IGAvJHtwcm9jRGVmSWR9L2FkanVzdGA7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmh0dHAucG9zdCh1cmwsIEpTT04uc3RyaW5naWZ5KHBvc3REYXRhKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN5bmNEdFByb2Nlc3MoY29udGVudDogc3RyaW5nLCBydFByb2Nlc3NJbmZvOiBSVFByb2Nlc3NJbmZvKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgICAgICBpZiAoY29udGVudCkge1xyXG4gICAgICAgICAgICBjb25zdCBwb3N0RGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIG9yZ2FuaXphdGlvbjogcnRQcm9jZXNzSW5mby5wcm9jT3JnID8gcnRQcm9jZXNzSW5mby5wcm9jT3JnLm9yZ0lkIDogJycsXHJcbiAgICAgICAgICAgICAgICBvcmdhbml6YXRpb25OYW1lOiBydFByb2Nlc3NJbmZvLnByb2NPcmcgPyBydFByb2Nlc3NJbmZvLnByb2NPcmcub3JnTmFtZSA6ICcnLFxyXG4gICAgICAgICAgICAgICAgYWNjZXNzTGV2ZWw6IHJ0UHJvY2Vzc0luZm8uYWNjZXNzTGV2ZWwgfHwgJ3B1YmxpYycsXHJcbiAgICAgICAgICAgICAgICBwcm9jQ29udGVudDogY29udGVudCxcclxuICAgICAgICAgICAgICAgIHN0YXRlOiAwXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGNvbnN0IHVybCA9ICcvYXBpL3J1bnRpbWUvd2YvdjEuMC9kdFByb2NEZWZzJztcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5wb3N0KHVybCwgSlNPTi5zdHJpbmdpZnkocG9zdERhdGEpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIl19