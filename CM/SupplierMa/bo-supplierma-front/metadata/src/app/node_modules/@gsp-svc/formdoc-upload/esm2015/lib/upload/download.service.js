/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Injectable } from '@angular/core';
export class DownloadService {
    constructor() { }
    /**
     * @param {?} metadataId
     * @param {?} rootId
     * @return {?}
     */
    getDownloadUrl(metadataId, rootId) {
        return "/api/runtime/dfs/v1.0/doc/filecontent?metadataid=" + metadataId + "&rootid=" + rootId + "&token=" + this.getToken(this.mergeString(metadataId, rootId));
    }
    /**
     * @param {?} metadataIdList
     * @param {?} rootId
     * @return {?}
     */
    getMultipleDownloadUrl(metadataIdList, rootId) {
        /** @type {?} */
        let list = JSON.parse(metadataIdList);
        return "/api/runtime/dfs/v1.0/doc/multiple/download?metadataidlist=" + metadataIdList + "&rootid=" + rootId + "&token=" + this.getToken(this.mergeString(list[0], rootId));
    }
    /**
     * @param {?} metadataIdList
     * @param {?} rootId
     * @param {?} zipName
     * @return {?}
     */
    getMultipleDownloadUrlWithName(metadataIdList, rootId, zipName) {
        /** @type {?} */
        let list = JSON.parse(metadataIdList);
        if (zipName == null || zipName == "")
            zipName = 'unifile.zip';
        if (!zipName.endsWith(".zip"))
            zipName += '.zip';
        return "/api/runtime/dfs/v1.0/doc/compress/download?metadataidlist=" + metadataIdList + "&rootid=" + rootId + "&token=" + this.getToken(this.mergeString(list[0], rootId)) + "&zipName=" + zipName;
    }
    /**
     * @param {?} metadataId
     * @param {?} rootId
     * @param {?} version
     * @return {?}
     */
    getHistoryDownloadUrl(metadataId, rootId, version) {
        //let list:string[]=JSON.parse(metadataIdList);
        return "/api/runtime/dfs/v1.0/doc/historycontent?metadataid=" + metadataId + "&rootid=" + rootId + "&version=" + version + "&token=" + this.getToken(this.mergeString(metadataId, rootId));
    }
    /**
     * @private
     * @param {?} str
     * @param {?} str1
     * @return {?}
     */
    mergeString(str, str1) {
        /** @type {?} */
        let min = str.length < str1.length ? str.length : str1.length;
        /** @type {?} */
        let res = "";
        /** @type {?} */
        let i = 0;
        for (i = 0; i < min; i++) {
            res += str.substring(i, i + 1);
            res += str1.substring(i, i + 1);
        }
        res += str.length < str1.length ? str1.substring(i) : str.substring(i);
        return res;
    }
    /**
     * @private
     * @param {?} str
     * @return {?}
     */
    getToken(str) {
        /** @type {?} */
        let array = [1, 2, 3];
        if (str.length > 24)
            str = str.substring(0, 24);
        /** @type {?} */
        let length = Math.floor(str.length / 3);
        /** @type {?} */
        let str1 = str.substring(0, length);
        /** @type {?} */
        let str2 = str.substring(length, 2 * length);
        /** @type {?} */
        let str3 = str.substring(2 * length, 3 * length);
        /** @type {?} */
        let randomArray = [];
        /** @type {?} */
        var random = Math.ceil(Math.random() * 3);
        randomArray.push(array[random - 1]);
        array.splice(random - 1, 1);
        random = Math.ceil(Math.random() * 2);
        randomArray.push(array[random - 1]);
        array.splice(random - 1, 1);
        randomArray.push(array[0]);
        /** @type {?} */
        let timeStamp = Math.round(new Date().getTime() / 1000) + "";
        return timeStamp.substring(0, 5) + "times" + randomArray[0] + "" + randomArray[1] + "" + randomArray[2] + this.switchStr(str1, str2, str3, randomArray[0]) + this.switchStr(str1, str2, str3, randomArray[1]) + this.switchStr(str1, str2, str3, randomArray[2]) + "times" + timeStamp.substring(5);
    }
    /**
     * @private
     * @param {?} str1
     * @param {?} str2
     * @param {?} str3
     * @param {?} i
     * @return {?}
     */
    switchStr(str1, str2, str3, i) {
        switch (i) {
            case 1: return str1;
            case 2: return str2;
            case 3: return str3;
        }
    }
}
DownloadService.decorators = [
    { type: Injectable }
];
/** @nocollapse */
DownloadService.ctorParameters = () => [];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZG93bmxvYWQuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Bnc3Atc3ZjL2Zvcm1kb2MtdXBsb2FkLyIsInNvdXJjZXMiOlsibGliL3VwbG9hZC9kb3dubG9hZC5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBSTNDLE1BQU0sT0FBTyxlQUFlO0lBRTFCLGdCQUFnQixDQUFDOzs7Ozs7SUFFakIsY0FBYyxDQUFDLFVBQWtCLEVBQUUsTUFBYztRQUMvQyxPQUFPLG1EQUFtRCxHQUFHLFVBQVUsR0FBRyxVQUFVLEdBQUcsTUFBTSxHQUFHLFNBQVMsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsVUFBVSxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUM7SUFDbEssQ0FBQzs7Ozs7O0lBRUQsc0JBQXNCLENBQUMsY0FBc0IsRUFBRSxNQUFjOztZQUN2RCxJQUFJLEdBQWEsSUFBSSxDQUFDLEtBQUssQ0FBQyxjQUFjLENBQUM7UUFDL0MsT0FBTyw2REFBNkQsR0FBRyxjQUFjLEdBQUcsVUFBVSxHQUFHLE1BQU0sR0FBRyxTQUFTLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDO0lBQzdLLENBQUM7Ozs7Ozs7SUFFRCw4QkFBOEIsQ0FBQyxjQUFzQixFQUFFLE1BQWMsRUFBRSxPQUFlOztZQUNoRixJQUFJLEdBQWEsSUFBSSxDQUFDLEtBQUssQ0FBQyxjQUFjLENBQUM7UUFDL0MsSUFBSSxPQUFPLElBQUksSUFBSSxJQUFJLE9BQU8sSUFBSSxFQUFFO1lBQ2xDLE9BQU8sR0FBRyxhQUFhLENBQUM7UUFDMUIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDO1lBQzNCLE9BQU8sSUFBSSxNQUFNLENB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b250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgRG93bmxvYWRTZXJ2aWNlIHtcblxuICBjb25zdHJ1Y3RvcigpIHsgfVxuXG4gIGdldERvd25sb2FkVXJsKG1ldGFkYXRhSWQ6IHN0cmluZywgcm9vdElkOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gXCIvYXBpL3J1bnRpbWUvZGZzL3YxLjAvZG9jL2ZpbGVjb250ZW50P21ldGFkYXRhaWQ9XCIgKyBtZXRhZGF0YUlkICsgXCImcm9vdGlkPVwiICsgcm9vdElkICsgXCImdG9rZW49XCIgKyB0aGlzLmdldFRva2VuKHRoaXMubWVyZ2VTdHJpbmcobWV0YWRhdGFJZCwgcm9vdElkKSk7XG4gIH1cblxuICBnZXRNdWx0aXBsZURvd25sb2FkVXJsKG1ldGFkYXRhSWRMaXN0OiBzdHJpbmcsIHJvb3RJZDogc3RyaW5nKSB7XG4gICAgbGV0IGxpc3Q6IHN0cmluZ1tdID0gSlNPTi5wYXJzZShtZXRhZGF0YUlkTGlzdCk7XG4gICAgcmV0dXJuIFwiL2FwaS9ydW50aW1lL2Rmcy92MS4wL2RvYy9tdWx0aXBsZS9kb3dubG9hZD9tZXRhZGF0YWlkbGlzdD1cIiArIG1ldGFkYXRhSWRMaXN0ICsgXCImcm9vdGlkPVwiICsgcm9vdElkICsgXCImdG9rZW49XCIgKyB0aGlzLmdldFRva2VuKHRoaXMubWVyZ2VTdHJpbmcobGlzdFswXSwgcm9vdElkKSk7XG4gIH1cblxuICBnZXRNdWx0aXBsZURvd25sb2FkVXJsV2l0aE5hbWUobWV0YWRhdGFJZExpc3Q6IHN0cmluZywgcm9vdElkOiBzdHJpbmcsIHppcE5hbWU6IHN0cmluZykge1xuICAgIGxldCBsaXN0OiBzdHJpbmdbXSA9IEpTT04ucGFyc2UobWV0YWRhdGFJZExpc3QpO1xuICAgIGlmICh6aXBOYW1lID09IG51bGwgfHwgemlwTmFtZSA9PSBcIlwiKVxuICAgICAgemlwTmFtZSA9ICd1bmlmaWxlLnppcCc7XG4gICAgaWYgKCF6aXBOYW1lLmVuZHNXaXRoKFwiLnppcFwiKSlcbiAgICAgIHppcE5hbWUgKz0gJy56aXAnO1xuICAgIHJldHVybiBcIi9hcGkvcnVudGltZS9kZnMvdjEuMC9kb2MvY29tcHJlc3MvZG93bmxvYWQ/bWV0YWRhdGFpZGxpc3Q9XCIgKyBtZXRhZGF0YUlkTGlzdCArIFwiJnJvb3RpZD1cIiArIHJvb3RJZCArIFwiJnRva2VuPVwiICsgdGhpcy5nZXRUb2tlbih0aGlzLm1lcmdlU3RyaW5nKGxpc3RbMF0sIHJvb3RJZCkpICsgXCImemlwTmFtZT1cIiArIHppcE5hbWU7XG4gIH1cblxuICBnZXRIaXN0b3J5RG93bmxvYWRVcmwobWV0YWRhdGFJZDogc3RyaW5nLCByb290SWQ6IHN0cmluZywgdmVyc2lvbjogc3RyaW5nKSB7XG4gICAgLy9sZXQgbGlzdDpzdHJpbmdbXT1KU09OLnBhcnNlKG1ldGFkYXRhSWRMaXN0KTtcbiAgICByZXR1cm4gXCIvYXBpL3J1bnRpbWUvZGZzL3YxLjAvZG9jL2hpc3Rvcnljb250ZW50P21ldGFkYXRhaWQ9XCIgKyBtZXRhZGF0YUlkICsgXCImcm9vdGlkPVwiICsgcm9vdElkICsgXCImdmVyc2lvbj1cIiArIHZlcnNpb24gKyBcIiZ0b2tlbj1cIiArIHRoaXMuZ2V0VG9rZW4odGhpcy5tZXJnZVN0cmluZyhtZXRhZGF0YUlkLCByb290SWQpKTtcbiAgfVxuXG5cblxuICBwcml2YXRlIG1lcmdlU3RyaW5nKHN0cjogc3RyaW5nLCBzdHIxOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGxldCBtaW4gPSBzdHIubGVuZ3RoIDwgc3RyMS5sZW5ndGggPyBzdHIubGVuZ3RoIDogc3RyMS5sZW5ndGg7XG4gICAgbGV0IHJlczogc3RyaW5nID0gXCJcIjtcbiAgICBsZXQgaSA9IDA7XG4gICAgZm9yIChpID0gMDsgaSA8IG1pbjsgaSsrKSB7XG4gICAgICByZXMgKz0gc3RyLnN1YnN0cmluZyhpLCBpICsgMSk7XG4gICAgICByZXMgKz0gc3RyMS5zdWJzdHJpbmcoaSwgaSArIDEpO1xuICAgIH1cbiAgICByZXMgKz0gc3RyLmxlbmd0aCA8IHN0cjEubGVuZ3RoID8gc3RyMS5zdWJzdHJpbmcoaSkgOiBzdHIuc3Vic3RyaW5nKGkpO1xuICAgIHJldHVybiByZXM7XG4gIH1cblxuICBwcml2YXRlIGdldFRva2VuKHN0cjogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBsZXQgYXJyYXkgPSBbMSwgMiwgM107XG4gICAgaWYgKHN0ci5sZW5ndGggPiAyNClcbiAgICAgIHN0ciA9IHN0ci5zdWJzdHJpbmcoMCwgMjQpO1xuICAgIGxldCBsZW5ndGggPSBNYXRoLmZsb29yKHN0ci5sZW5ndGggLyAzKTtcbiAgICBsZXQgc3RyMSA9IHN0ci5zdWJzdHJpbmcoMCwgbGVuZ3RoKTtcbiAgICBsZXQgc3RyMiA9IHN0ci5zdWJzdHJpbmcobGVuZ3RoLCAyICogbGVuZ3RoKTtcbiAgICBsZXQgc3RyMyA9IHN0ci5zdWJzdHJpbmcoMiAqIGxlbmd0aCwgMyAqIGxlbmd0aCk7XG4gICAgbGV0IHJhbmRvbUFycmF5ID0gW107XG4gICAgdmFyIHJhbmRvbSA9IE1hdGguY2VpbChNYXRoLnJhbmRvbSgpICogMyk7XG4gICAgcmFuZG9tQXJyYXkucHVzaChhcnJheVtyYW5kb20gLSAxXSk7XG4gICAgYXJyYXkuc3BsaWNlKHJhbmRvbSAtIDEsIDEpO1xuICAgIHJhbmRvbSA9IE1hdGguY2VpbChNYXRoLnJhbmRvbSgpICogMik7XG4gICAgcmFuZG9tQXJyYXkucHVzaChhcnJheVtyYW5kb20gLSAxXSk7XG4gICAgYXJyYXkuc3BsaWNlKHJhbmRvbSAtIDEsIDEpO1xuICAgIHJhbmRvbUFycmF5LnB1c2goYXJyYXlbMF0pO1xuICAgIGxldCB0aW1lU3RhbXA6IHN0cmluZyA9IE1hdGgucm91bmQobmV3IERhdGUoKS5nZXRUaW1lKCkgLyAxMDAwKSArIFwiXCI7XG5cbiAgICByZXR1cm4gdGltZVN0YW1wLnN1YnN0cmluZygwLCA1KSArIFwidGltZXNcIiArIHJhbmRvbUFycmF5WzBdICsgXCJcIiArIHJhbmRvbUFycmF5WzFdICsgXCJcIiArIHJhbmRvbUFycmF5WzJdICsgdGhpcy5zd2l0Y2hTdHIoc3RyMSwgc3RyMiwgc3RyMywgcmFuZG9tQXJyYXlbMF0pICsgdGhpcy5zd2l0Y2hTdHIoc3RyMSwgc3RyMiwgc3RyMywgcmFuZG9tQXJyYXlbMV0pICsgdGhpcy5zd2l0Y2hTdHIoc3RyMSwgc3RyMiwgc3RyMywgcmFuZG9tQXJyYXlbMl0pICsgXCJ0aW1lc1wiICsgdGltZVN0YW1wLnN1YnN0cmluZyg1KTtcbiAgfVxuXG4gIHByaXZhdGUgc3dpdGNoU3RyKHN0cjE6IHN0cmluZywgc3RyMjogc3RyaW5nLCBzdHIzOiBzdHJpbmcsIGk6IG51bWJlcik6IHN0cmluZyB7XG4gICAgc3dpdGNoIChpKSB7XG4gICAgICBjYXNlIDE6IHJldHVybiBzdHIxO1xuICAgICAgY2FzZSAyOiByZXR1cm4gc3RyMjtcbiAgICAgIGNhc2UgMzogcmV0dXJuIHN0cjM7XG4gICAgfVxuICB9XG5cblxufVxuIl19