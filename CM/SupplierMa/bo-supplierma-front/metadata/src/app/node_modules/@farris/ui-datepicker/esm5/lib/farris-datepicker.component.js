/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { NotifyService } from '@farris/ui-notify';
import { DateTimeHelperService } from '@farris/ui-common/date';
import { Component, Input, EventEmitter, Output, ViewChild, forwardRef, ElementRef, HostListener, HostBinding, Injector, ViewContainerRef, ComponentFactoryResolver, Renderer2, ApplicationRef, ChangeDetectorRef } from '@angular/core';
import { NG_VALUE_ACCESSOR, NgControl } from '@angular/forms';
import { FarrisDatePickerDirective } from './farris-datepicker.input';
import { DefaultView, ShowType, CalToggle } from './enums/public-api';
import { UtilService, DefaultConfigService, DatepickerLocaleService, DatePickerService } from './services/public-api';
import { LocaleService } from '@farris/ui-locale';
import { isValid, parse } from 'date-fns';
import { CalendarComponent } from './components/calendar/calendar.component';
import { CLICK, EMPTY_STR } from './constants/constants';
import { OverLayHiddenService } from '@farris/ui-common';
import { ViewType } from './interfaces/my-options.interface';
/** @type {?} */
var FARRIS_DP_VALUE_ACCESSOR = {
    provide: NG_VALUE_ACCESSOR,
    useExisting: forwardRef((/**
     * @return {?}
     */
    function () { return FarrisDatepickerComponent; })),
    multi: true
};
var FarrisDatepickerComponent = /** @class */ (function () {
    function FarrisDatepickerComponent(el, utilService, defaultConfigService, injector) {
        this.el = el;
        this.utilService = utilService;
        this.defaultConfigService = defaultConfigService;
        this.injector = injector;
        this.cls = 'f-cmp-datepicker f-cmp-inputgroup';
        this.viewType = ViewType.Replace;
        // 是否禁用该组件
        this.disabled = false;
        // 是否只读
        this.readonly = false;
        // 是否只能选择数据，不可键入
        this.editable = true;
        // 是否使用日期范围输入模式
        this.dateRange = false;
        // 是否使用时间输入框
        this.showTime = false;
        // 显示类型
        this.showType = ShowType.all;
        // 本地语言
        this.locale = 'zh-cn';
        // 是否使用默认值
        this.useDefault = false;
        this.returnType = 'String';
        // placeholder
        this.placeholder = '';
        this.beginPlaceholder = '';
        this.endPlaceholder = '';
        /**
         * 输入值变化后关闭选择面板。 默认为 true
         */
        this.whenValueChangedThenCloseSelectorPanel = true;
        // 需要高亮显示的日期
        this.highlightDates = [];
        // 禁用区域的日期开始时间
        this.disableDateRangesBegin = {
            year: 0,
            month: 0,
            day: 0
        };
        // 禁用区域的日期结束时间
        this.disableDateRangesEnd = {
            year: 0,
            month: 0,
            day: 0
        };
        // 禁用的日期
        this.disableDates = [];
        // 一周中被禁用的日子
        this.disableWeekdays = [];
        // 被标记的日期
        this.markDates = [];
        // 被标记的日期的显示颜色
        this.markDatesColor = '#59a1ff';
        // 是否显示第几周
        this.showWeekNumbers = false;
        // 是否标记周末
        this.isMarkWeekends = false;
        // 被标记周末的显示颜色
        this.markWeekendsColor = '#59a1ff';
        // 日期范围模式下input的显示分割符合
        this.dateRangeDatesDelimiter = '~';
        // 配置左侧 sidebar 快捷键
        this.shortcuts = [];
        // 日期范围选择时，默认结束月份为当前月份 + monthRangeValue
        this.monthRangeValue = 1;
        // clear 事件
        this.clear = new EventEmitter();
        // valueChanged 事件
        this.valueChange = new EventEmitter();
        // focus 事件
        this.focus = new EventEmitter();
        // blur 事件
        this.blur = new EventEmitter();
        // beginValueChange
        this.beginValueChange = new EventEmitter();
        // endValueChange
        this.endValueChange = new EventEmitter();
        // PrevFocus dateRange 第一个日期
        this.PrevFocus = new EventEmitter();
        // NextFocus dateRange 第二个日期
        this.NextFocus = new EventEmitter();
        // close 事件
        this.close = new EventEmitter();
        this.cRef = null;
        this._timeFormat = '';
        this._value = '';
        this._beginValue = '';
        this._endValue = '';
        this._initFinished = false;
        this._minDate = {
            year: 1840,
            month: 1,
            day: 1,
            hour: 0,
            minute: 0,
            second: 0
        };
        this._maxDate = {
            year: 10000,
            month: 1,
            day: 1,
            hour: 0,
            minute: 0,
            second: 0
        };
        this.dateOpts = {};
        // 开始输入控件聚焦
        this.beginFocus = false;
        // 结束输入控件聚焦
        this.endFocus = false;
        // 整体聚焦
        this.totalFocus = false;
        // 是否字符超长显示Tip
        this.isActiveTip = false;
        this._realValue = null;
        this._realRangeValue = null;
        this.formatedValue = '';
        this.dtService = null;
        this._updateOn = 'change';
        // 日期选择后设置为 true， blur 事件将不会重复执行valueChanged；
        // 键盘修改时，blur 事件中会执行一次 valueChanged 后，将此值设为 false;
        this._valueChangeEmitted = false;
        this._mousedownEvent = null;
        this.closeCalendarHandler = null;
        this.cdr = null;
        /**
         * 缓存通过点击日历的数据，用于的格式化格式不标准时，格式化数据。
         */
        this._SELECT_DATE_ = null;
        this.onModelChange = (/**
         * @param {?} obj
         * @return {?}
         */
        function (obj) { });
        this.onModelTouched = (/**
         * @return {?}
         */
        function () { });
        this.defaultConfig = this.defaultConfigService.getDefaultConfig();
        if (this.injector) {
            this.localeService = this.injector.get(LocaleService);
            this.dtService = this.injector.get(DateTimeHelperService);
            this.notifySer = this.injector.get(NotifyService, null);
            if (this.notifySer) {
                this.notifySer.config.position = 'top-center';
            }
        }
        this.localeConfig = new DatepickerLocaleService();
        this.vcRef = this.injector.get(ViewContainerRef, null);
        this.cfr = this.injector.get(ComponentFactoryResolver, null);
        this.renderer = this.injector.get(Renderer2, null);
        this._applicationRef = this.injector.get(ApplicationRef);
        this.cdr = this.injector.get(ChangeDetectorRef);
        // this.datePicekrService = this.injector.get(DatePickerService, null)
        this.overLayService = new OverLayHiddenService();
    }
    Object.defineProperty(FarrisDatepickerComponent.prototype, "dateFormat", {
        get: /**
         * @return {?}
         */
        function () {
            return this._dateFormat;
        },
        // 日期格式
        set: 
        // 日期格式
        /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            var _this_1 = this;
            if (value) {
                // value 格式形如 yyyy-MM-dd HH:mm:ss
                // const formArr = 'yyyy-MM-dd HH:mm:ss'.split(' ');
                value = value.replace(/^\s+|\s+$/g, ''); // 去掉左右空格
                value = value.replace(/\s+/g, ' '); // 将中间的多个连续空格，替换为1个空格
                // 将中间的多个连续空格，替换为1个空格
                /** @type {?} */
                var formArr = value.split(' ');
                this._dateFormat = formArr[0];
                // 处理'yyyy-MM-dd h:mm:ss a'即12小时显示的情况
                if (formArr.length === 3) {
                    this._timeFormat = 'h:mm:ss a';
                }
                else {
                    this._timeFormat = formArr[1];
                }
            }
            // this._dateFormat = this._dateFormat ? (this._dateFormat + '').replace(/m/g, 'M') : '';
            if (this._dateFormat) {
                /** @type {?} */
                var mm = ['yyyy-mm', 'yyyy/mm', 'yyyy年mm', 'mm/yyyy'];
                /** @type {?} */
                var _mm = mm.find((/**
                 * @param {?} m
                 * @return {?}
                 */
                function (m) { return _this_1._dateFormat.includes(m); }));
                if (_mm) {
                    this._dateFormat = this._dateFormat.replace(_mm, _mm.replace(/m/g, 'M'));
                }
                if (this._timeFormat && this.showTime) {
                    this._dateFormat += ' ' + this._timeFormat;
                    if (this._timeFormat.indexOf('时') > -1) {
                        this._timeFormat = this._timeFormat.replace('时', ':').replace('分', ':').replace('秒', '');
                    }
                }
            }
            // this.dateOpts.dateFormat = this._dateFormat;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FarrisDatepickerComponent.prototype, "minDate", {
        get: /**
         * @return {?}
         */
        function () {
            return this._minDate;
        },
        // 最小日期
        // 加入接收时分秒功能
        set: 
        // 最小日期
        // 加入接收时分秒功能
        /**
         * @param {?} val
         * @return {?}
         */
        function (val) {
            /** @type {?} */
            var type = Object.prototype.toString.call(val);
            /** @type {?} */
            var date;
            switch (type) {
                case '[object Date]':
                    date = val;
                    break;
                case '[object String]':
                    if (val) {
                        date = new Date(val);
                    }
                    else {
                        date = new Date(1840, 1, 1, 0, 0, 0);
                    }
                    break;
                case '[object Null]':
                    date = new Date(1840, 1, 1, 0, 0, 0);
                    break;
                // case null:
                //     date = new Date(1840, 1, 1, 0, 0, 0);
                //     break;
                case '[object Undefined]':
                    date = new Date(1840, 1, 1, 0, 0, 0);
                    break;
                default:
                    date = new Date(1840, 1, 1, 0, 0, 0);
                    break;
            }
            if (isValid(date)) {
                /** @type {?} */
                var year = date.getFullYear();
                /** @type {?} */
                var month = date.getMonth() + 1;
                /** @type {?} */
                var day = date.getDate();
                /** @type {?} */
                var hour = date.getHours();
                /** @type {?} */
                var minute = date.getMinutes();
                /** @type {?} */
                var second = date.getSeconds();
                this._minDate = { year: year, month: month, day: day, hour: hour, minute: minute, second: second };
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FarrisDatepickerComponent.prototype, "maxDate", {
        get: /**
         * @return {?}
         */
        function () {
            return this._maxDate;
        },
        // 最大日期
        // 加入接收时分秒功能
        set: 
        // 最大日期
        // 加入接收时分秒功能
        /**
         * @param {?} val
         * @return {?}
         */
        function (val) {
            /** @type {?} */
            var type = Object.prototype.toString.call(val);
            /** @type {?} */
            var date;
            switch (type) {
                case '[object Date]':
                    date = val;
                    break;
                case '[object String]':
                    if (val) {
                        date = new Date(val);
                    }
                    else {
                        date = new Date(10000, 1, 1, 0, 0, 0);
                    }
                    break;
                case '[object Null]':
                    date = new Date(10000, 1, 1, 0, 0, 0);
                    break;
                // case null:
                //     date = new Date(10000, 1, 1, 0, 0, 0);
                //     break;
                case '[object Undefined]':
                    date = new Date(10000, 1, 1, 0, 0, 0);
                    break;
                default:
                    date = new Date(10000, 1, 1, 0, 0, 0);
                    break;
            }
            if (isValid(date)) {
                /** @type {?} */
                var year = date.getFullYear();
                /** @type {?} */
                var month = date.getMonth() + 1;
                /** @type {?} */
                var day = date.getDate();
                /** @type {?} */
                var hour = date.getHours();
                /** @type {?} */
                var minute = date.getMinutes();
                /** @type {?} */
                var second = date.getSeconds();
                this._maxDate = { year: year, month: month, day: day, hour: hour, minute: minute, second: second };
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FarrisDatepickerComponent.prototype, "beginValue", {
        get: /**
         * @return {?}
         */
        function () {
            return this.dateFrom(this._beginValue, true);
        },
        // 日期范围：开始日期
        set: 
        // 日期范围：开始日期
        /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            value = value ? value : '';
            if (value instanceof Date) {
                value = this.dateTo(value);
                this.returnType = 'Date';
            }
            else {
                if (value.indexOf('T') > -1) {
                    value = value.replace('T', ' ');
                }
                this.returnType = 'String';
            }
            this._beginValue = value;
            if (this._initFinished) {
                this.setValue(this._beginValue + this.dateRangeDatesDelimiter + this._endValue);
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FarrisDatepickerComponent.prototype, "endValue", {
        get: /**
         * @return {?}
         */
        function () {
            return this.dateFrom(this._endValue, true);
        },
        // 日期范围：结束日期
        set: 
        // 日期范围：结束日期
        /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            value = value ? value : '';
            if (value instanceof Date) {
                value = this.dateTo(value);
                this.returnType = 'Date';
            }
            else {
                if (value.indexOf('T') > -1) {
                    value = value.replace('T', ' ');
                }
                this.returnType = 'String';
            }
            this._endValue = value;
            if (this._initFinished) {
                this.setValue(this._beginValue + this.dateRangeDatesDelimiter + this._endValue);
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FarrisDatepickerComponent.prototype, "value", {
        get: /**
         * @return {?}
         */
        function () {
            return this._value;
        },
        set: /**
         * @param {?} v
         * @return {?}
         */
        function (v) {
            this._value = v ? v : '';
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this._ngControl = this.injector.get(NgControl, null);
        this.initPlaceholder();
        this.mergeDateOptions();
        if (this._beginValue && this._endValue) {
            this.setValue(this._beginValue + this.dateRangeDatesDelimiter + this._endValue);
        }
        this._initFinished = true;
        this.datePicekrService = new DatePickerService(this.dateOpts);
    };
    /**
     * @private
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.initPlaceholder = /**
     * @private
     * @return {?}
     */
    function () {
        if (this.localeService) {
            this.locale = this.localeService.getValue('locale');
            this.localDateOpts = this.localeConfig.getLocaleOptions(this.locale);
            this.placeholder = this.placeholder
                ? this.placeholder
                : this.localDateOpts.placeholder
                    ? this.localDateOpts.placeholder
                    : '请选择日期';
            if (!this.beginPlaceholder) {
                this.beginPlaceholder = this.localDateOpts.range.begin || this.placeholder;
            }
            if (!this.endPlaceholder) {
                this.endPlaceholder = this.localDateOpts.range.end || this.placeholder;
            }
        }
    };
    /**
     * @private
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.mergeDateOptions = /**
     * @private
     * @return {?}
     */
    function () {
        this.dateOpts = tslib_1.__assign({}, this.defaultConfig, this.buildOptions());
        if (this.dateOpts.dateFormat) {
            if (!this._dateFormat) {
                this.dateFormat = this.dateOpts.dateFormat;
                this.dateOpts.dateFormat = this.dateFormat;
            }
        }
        if (this.showTime && !this._timeFormat) {
            this._timeFormat = 'HH:mm:ss';
            this.dateOpts.timeFormat = this._timeFormat;
        }
        if (this.dateOpts.returnFormat) {
            if (!this.returnFormat) {
                this.returnFormat = this.dateOpts.returnFormat;
            }
        }
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        var _this_1 = this;
        if (changes.locale && changes.locale.isFirstChange()) {
            // this.dp.setLocaleOptions();
            this.localDateOpts = this.localeConfig.getLocaleOptions(this.locale);
        }
        if (changes) {
            /** @type {?} */
            var flag_1 = false;
            /** @type {?} */
            var inputs_1 = ['showTime', 'showType', 'dateRange', 'maxDate', 'minDate', 'monthRangeValue'];
            Object.keys(changes).forEach((/**
             * @param {?} e
             * @return {?}
             */
            function (e) {
                if (!changes[e].isFirstChange() && (_this_1.dateOpts[e] || inputs_1.includes(e))) {
                    // this[e] = changes[e].currentValue;
                    flag_1 = true;
                }
            }));
            if (flag_1) {
                this.dateOpts = tslib_1.__assign({}, this.defaultConfig, this.buildOptions());
            }
        }
        if (changes.readonly &&
            !changes.readonly.currentValue &&
            !changes.readonly.firstChange &&
            !this.value &&
            this.useDefault) {
            this.setDefaultValue();
        }
    };
    /**
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        var _this_1 = this;
        if (this._ngControl && this._ngControl.control) {
            this._updateOn = this._ngControl.control.updateOn;
        }
        this._timer = setTimeout((/**
         * @return {?}
         */
        function () {
            _this_1.setDefaultValue();
        }));
    };
    /**
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        clearTimeout(this._timer);
        this.closeSelector();
        this.overLayService.destory(this.el.nativeElement);
        this.overLayService = null;
    };
    /**
     * @param {?} event
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.onMouseEnter = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        if (this.value && !this.readonly && !this.disabled) {
            if (this.value) {
                this.clearIcon.nativeElement.style.visibility = '';
            }
            if (this.dateOpts.dateRange) {
                if (this.dateOpts.showTime) {
                    this.isActiveTip = this.el.nativeElement.getBoundingClientRect().width < 300;
                }
                else {
                    this.isActiveTip = this.el.nativeElement.getBoundingClientRect().width < 190;
                }
            }
            else {
                if (this.dateOpts.showTime) {
                    this.isActiveTip = this.el.nativeElement.getBoundingClientRect().width < 170;
                }
                else {
                    this.isActiveTip = this.el.nativeElement.getBoundingClientRect().width < 120;
                }
            }
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.onMouseLeave = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        if (!this.readonly && !this.disabled) {
            this.clearIcon.nativeElement.style.visibility = 'hidden';
        }
    };
    /**
     * @param {?} e
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.onBlur = /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        var _this_1 = this;
        this.totalFocus = false;
        /** @type {?} */
        var _runblur = true;
        if (this.value) {
            try {
                this.value = this.transform(this.value);
                /** @type {?} */
                var valid = this._isValid(this.value);
                if (!valid) {
                    this.clearDate();
                    _runblur = false;
                }
            }
            catch (e) {
                this.clearDate();
                _runblur = false;
            }
        }
        /** @type {?} */
        var updateModel = (/**
         * @return {?}
         */
        function () {
            if (!_this_1._valueChangeEmitted) {
                /** @type {?} */
                var realDate = _this_1.dateFrom(_this_1.transform(_this_1.value, _this_1.returnFormat));
                _this_1.onNgModelChange(_this_1.value, realDate, true);
                _this_1.onModelTouched();
            }
        });
        if (this.editable && _runblur) {
            if (this['inDatagrid']) {
                updateModel();
            }
            else {
                setTimeout(updateModel, 250);
            }
        }
        this._valueChangeEmitted = false;
        if (this._mousedownEvent) {
            this._mousedownEvent();
            this._mousedownEvent = null;
        }
        this.blur.emit();
    };
    /**
     * @param {?} e
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.onFocus = /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        this.totalFocus = true;
        this.registerMouseDownHandle();
        this.focus.emit();
    };
    /**
     * @param {?} event
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.onInputClick = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        event.stopPropagation();
        if (!this.readonly && !this.disabled) {
            this.registerMouseDownHandle();
            this.toggleCalendar(false);
        }
    };
    /**
     * @private
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.registerMouseDownHandle = /**
     * @private
     * @return {?}
     */
    function () {
        var _this_1 = this;
        if (!this._mousedownEvent) {
            this._mousedownEvent = this.renderer.listen(document, 'mousedown', (/**
             * @param {?} e
             * @return {?}
             */
            function (e) {
                if (e.target.className.toString().indexOf('SVGAnimatedString') > -1) {
                    return;
                }
                if (e.target.closest('.f-cmp-datepicker') ||
                    e.target.closest('.f-datepicker-container') || e.target.className.indexOf('f-icon-date') > -1) {
                    if (_this_1.dateInput) {
                        _this_1.renderer.setStyle(_this_1.dateInput.nativeElement, 'unselectable', 'on');
                    }
                    e.preventDefault();
                }
            }));
        }
    };
    /**
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.setDefaultValue = /**
     * @return {?}
     */
    function () {
        if (!this.readonly && !this.value && this.useDefault) {
            /** @type {?} */
            var now = new Date();
            /** @type {?} */
            var nowValue = '';
            if (!this.dateOpts.dateRange) {
                nowValue = this.dateTo(now);
            }
            else {
                nowValue =
                    this.dateTo(now) +
                        this.dateRangeDatesDelimiter +
                        this.dateTo(new Date(now.setMonth(now.getMonth() + 1)));
            }
            if (this.datePicekrService.validate(nowValue)) {
                this.value = nowValue;
                this.onNgModelChange(this.value);
                this.onModelTouched();
            }
        }
    };
    /**
     * @param {?=} $event
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.clearDate = /**
     * @param {?=} $event
     * @return {?}
     */
    function ($event) {
        if ($event === void 0) { $event = null; }
        if ($event) {
            $event.stopPropagation();
        }
        this._SELECT_DATE_ = null;
        if (!this.disabled) {
            this._realRangeValue = null;
            this._realValue = null;
            this.onDateChanged({
                isRange: this.dateOpts.dateRange,
                singleDate: {
                    date: this.utilService.resetDate(),
                    jsDate: null,
                    formatted: EMPTY_STR,
                    epoc: 0
                },
                dateRange: {
                    beginDate: this.utilService.resetDate(),
                    beginJsDate: null,
                    beginEpoc: 0,
                    endDate: this.utilService.resetDate(),
                    endJsDate: null,
                    endEpoc: 0,
                    formatted: EMPTY_STR
                }
            });
            this.closeSelector(CalToggle.CloseByCalBtn);
            this.onModelChange(null);
            this.clear.emit();
            if (this.clearIcon) {
                this.clearIcon.nativeElement.style.visibility = 'hidden';
            }
        }
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.onSingleInputNgModelChange = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        this.value = $event || '';
        this._realValue = this.value ? this.dateFrom($event) : '';
        this.closeSelector();
    };
    /**
     * @param {?} value
     * @param {?=} realdate
     * @param {?=} emitValueChange
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.onNgModelChange = /**
     * @param {?} value
     * @param {?=} realdate
     * @param {?=} emitValueChange
     * @return {?}
     */
    function (value, realdate, emitValueChange) {
        if (realdate === void 0) { realdate = null; }
        if (emitValueChange === void 0) { emitValueChange = false; }
        // this.value = value;
        if (this.dateRange || this.showType == ShowType.selectWeek) {
            /** @type {?} */
            var tmpArr = value ? value.split(this.dateRangeDatesDelimiter) : ['', ''];
            /** @type {?} */
            var _beginValue = this.transform(tmpArr[0], this.returnFormat);
            /** @type {?} */
            var _endValue = this.transform(tmpArr[1], this.returnFormat);
            this._beginValue = this.transform(tmpArr[0]);
            this._endValue = this.transform(tmpArr[1]);
            value = _beginValue && _endValue ? _beginValue + this.dateRangeDatesDelimiter + _endValue : '';
            this._realRangeValue = value;
            this.onModelChange(value);
            this.cdr.detectChanges();
            this.beginValueChange.emit(this._beginValue);
            this.endValueChange.emit(this._endValue);
            /** @type {?} */
            var p = {
                date: null,
                formatted: this.value,
                returnFormatted: this._realRangeValue,
                cmpRef: this
            };
            this.valueChange.emit(p);
        }
        else {
            if (value === '') {
                this.value = '';
                this._onModelChange(null, emitValueChange);
                return;
            }
            if (realdate) {
                this._realValue = this.getRealReturnFormatted(realdate);
                this._onModelChange(this._realValue, emitValueChange);
                if (this.dateInput && this.dateInput.nativeElement.value !== this.value) {
                    this.renderer.setProperty(this.dateInput.nativeElement, 'value', this.value);
                }
            }
            else {
                if (this._isValid(value)) {
                    this._realValue = this.getRealReturnFormatted(realdate);
                    if (this.dateInput) {
                        this.renderer.setProperty(this.dateInput.nativeElement, 'value', this.value);
                    }
                    this._onModelChange(this._realValue, emitValueChange);
                }
            }
        }
    };
    /**
     * @private
     * @param {?} realValue
     * @param {?} emit
     * @return {?}
     */
    FarrisDatepickerComponent.prototype._onModelChange = /**
     * @private
     * @param {?} realValue
     * @param {?} emit
     * @return {?}
     */
    function (realValue, emit) {
        this._realValue = realValue;
        this.onModelChange(realValue);
        if (emit) {
            /** @type {?} */
            var p = {
                date: this.utilService.isDateValid(this.value, this.dateOpts, true),
                formatted: this.value,
                returnFormatted: realValue,
                cmpRef: this
            };
            if (this.valueChange.observers.length) {
                if (this.whenValueChangedThenCloseSelectorPanel) {
                    this.closeSelector();
                }
                this.valueChange.emit(p);
            }
        }
    };
    /**
     * @private
     * @param {?} realdate
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.getRealReturnFormatted = /**
     * @private
     * @param {?} realdate
     * @return {?}
     */
    function (realdate) {
        if (realdate) {
            if (this.returnType === 'Date') {
                return realdate;
            }
            else {
                if (this.returnFormat) {
                    return this.dtService.formatTo(realdate, this.returnFormat);
                }
                return realdate;
            }
        }
        else {
            return this.dateFrom(this._realValue || this.value) || '';
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.onDateRangeInputBlur = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.setValue(this._beginValue + this.dateRangeDatesDelimiter + this._endValue);
        this.onNgModelChange(this._realRangeValue || this.value);
    };
    /**
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.openCalendar = /**
     * @return {?}
     */
    function () {
        var _this_1 = this;
        if (this.disabled) {
            return;
        }
        /** @type {?} */
        var val = this._realValue;
        if (this.dateRange) {
            val = this._realRangeValue;
        }
        else {
            if (this.returnType === 'Date') {
                val = this.transform(val, this.returnFormat);
            }
        }
        if (this.cRef === null) {
            this.cRef = this.calendarRef.createComponent(this.cfr.resolveComponentFactory(CalendarComponent));
            this.datePicekrService.appendSelector(this.cRef.location.nativeElement);
            this.datePicekrService.registerScrollEvent((/**
             * @return {?}
             */
            function () {
                _this_1.closeSelector();
            }));
            this.cRef.instance.initialize(this.dateOpts, '', this.datePicekrService.getSelectorPosition(this.el.nativeElement, this.cRef), val, (/**
             * @param {?} dm
             * @param {?} close
             * @return {?}
             */
            function (dm, close) {
                if (_this_1.dateOpts.dateRange && _this_1.showTime && dm.dateRange.endJsDate < dm.dateRange.beginJsDate) {
                    // const { year: beginYear, month: beginMonth,  day: beginDay  } = {...dm.dateRange.beginDate};
                    // const { year: endYear, month: endMonth,  day: endDay  } = {...dm.dateRange.endDate};
                    // error message:  The end time must not be earlier than the start time
                    // error message:  結束時間不得早于開始時間
                    /** @type {?} */
                    var msg = _this_1.localDateOpts.message['101'];
                    if (_this_1.notifySer) {
                        _this_1.notifySer.warning(msg);
                    }
                    else {
                        alert(msg);
                    }
                    return;
                }
                _this_1.onDateChanged(dm);
                if (close) {
                    _this_1.closeSelector(CalToggle.CloseByDateSel);
                }
            }), (/**
             * @param {?} cvc
             * @return {?}
             */
            function (cvc) {
                // this.emitCalendarChanged(cvc);
            }), (/**
             * @param {?} rds
             * @return {?}
             */
            function (rds) {
                // this.emitRangeDateSelection(rds);
            }), (/**
             * @return {?}
             */
            function () {
                _this_1.closeSelector(CalToggle.CloseByEsc);
            }));
            // this.cdr.detectChanges();
        }
        else {
            this.datePicekrService.appendSelector(this.cRef.location.nativeElement);
        }
        this.overLayService.registerMouseEvent(this.el.nativeElement, (/**
         * @param {?} e
         * @return {?}
         */
        function (e) {
            if (_this_1.cRef && _this_1.cRef.location.nativeElement.contains(e.target)) {
                return;
            }
            _this_1.closeSelector();
        }), { onlyTopWindow: true });
        this.cRef.changeDetectorRef.detectChanges();
        // this.preventClose = false;
    };
    /**
     * @param {?=} reason
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.closeSelector = /**
     * @param {?=} reason
     * @return {?}
     */
    function (reason) {
        if (this.cRef !== null) {
            this.calendarRef.remove(this.calendarRef.indexOf(this.cRef.hostView));
            this.cRef = null;
            // this.cdr.detectChanges();
            /** @type {?} */
            var container = document.querySelector('.date-overlay-container');
            if (container.childElementCount) {
                container.remove();
            }
            this.renderer.setStyle(container, 'pointer-events', '');
        }
        this.totalFocus = false;
        if (this.dateOpts.dateRange) {
            this.beginFocus = false;
            this.endFocus = false;
        }
        if (this.closeCalendarHandler) {
            this.closeCalendarHandler();
            this.closeCalendarHandler = null;
        }
        if (this.datePicekrService) {
            this.datePicekrService.removeMouseEvent();
        }
        this.overLayService.destory(this.el.nativeElement);
    };
    /**
     * @param {?} close
     * @param {?=} emit
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.toggleCalendar = /**
     * @param {?} close
     * @param {?=} emit
     * @return {?}
     */
    function (close, emit) {
        var _this_1 = this;
        if (emit === void 0) { emit = true; }
        if (this.disabled) {
            this.totalFocus = false;
            if (this.dateOpts.dateRange) {
                this.beginFocus = false;
                this.endFocus = false;
            }
            return;
        }
        if (this.cRef === null) {
            if (!this.closeCalendarHandler) {
                this.closeCalendarHandler = this.renderer.listen(document, CLICK, (/**
                 * @return {?}
                 */
                function () { return _this_1.closeSelector(CalToggle.CloseByOutClick); }));
            }
            this.totalFocus = true;
            this.openCalendar();
            /** @type {?} */
            var container = document.querySelector('.date-overlay-container');
            this.renderer.setStyle(container, 'pointer-events', 'auto');
        }
        else {
            /** @type {?} */
            var flag_2 = true;
            /** @type {?} */
            var container = document.querySelector('.date-overlay-container');
            if (container && this.cRef.location) {
                if (container.hasChildNodes()) {
                    container.childNodes.forEach((/**
                     * @param {?} el
                     * @return {?}
                     */
                    function (el) {
                        if (el === _this_1.cRef.location.nativeElement) {
                            flag_2 = false;
                        }
                    }));
                }
            }
            if (flag_2) {
                this.renderer.setStyle(container, 'pointer-events', 'auto');
                this.totalFocus = true;
                this.openCalendar();
            }
            else {
                this.totalFocus = false;
                if (this.dateOpts.dateRange) {
                    this.beginFocus = false;
                    this.endFocus = false;
                }
                // document.removeEventListener(CLICK, this.onClickHidden);
                close && this.closeSelector(CalToggle.CloseByCalBtn);
                // this.renderer.setStyle(container, 'pointer-events', '')
                if (emit) {
                    this.close.emit();
                }
            }
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.onDateChanged = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this._SELECT_DATE_ = event;
        /** @type {?} */
        var valChangeParams = '';
        if (event.singleDate) {
            this.value = event.singleDate.formatted;
            this.formatedValue = event.singleDate.formatted;
            /** @type {?} */
            var returnFormatted = this.getRealReturnFormatted(event.singleDate.jsDate);
            valChangeParams = tslib_1.__assign({}, event.singleDate, { formatted: event.singleDate.formatted, returnFormatted: returnFormatted });
            var _a = event.singleDate.date, year = _a.year, month = _a.month, day = _a.day, hour = _a.hour, minute = _a.minute, second = _a.second;
            if (month && (this.dateFormat.indexOf('yyyy') === -1 || this.dateFormat.indexOf('dd') === -1)) {
                /** @type {?} */
                var nd = new Date(year || new Date().getFullYear(), month - 1, day || 1, hour || 0, minute || 0, second || 0);
                event.singleDate.jsDate = nd;
            }
            this.onNgModelChange(returnFormatted, event.singleDate.jsDate);
        }
        else if (event.dateRange) {
            this.value = event.dateRange.formatted;
            this.formatedValue = event.dateRange.formatted;
            /** @type {?} */
            var returnFormatted = event.dateRange.returnFormatted;
            // let returnFormatted = this.dateFrom(event.dateRange.returnFormatted);
            valChangeParams = tslib_1.__assign({}, event.dateRange, { formatted: event.dateRange.formatted, returnFormatted: returnFormatted });
            this.onNgModelChange(returnFormatted, event.dateRange);
        }
        this.onModelTouched();
        this._valueChangeEmitted = true;
        this.valueChange.emit(valChangeParams);
    };
    /**
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.buildOptions = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var dateOpts;
        if (!this.localDateOpts) {
            this.localDateOpts = this.localeConfig.getLocaleOptions(this.locale);
        }
        if (this.showType === ShowType.noDateAndMonth) {
            this.localDateOpts.dateFormat = 'yyyy';
            this.localDateOpts.returnFormat = 'yyyy';
        }
        /** @type {?} */
        var _showTime = (Number(this.showType) === ShowType.all) ? this.showTime : false;
        dateOpts = {
            dateRange: this.dateRange,
            showTime: _showTime,
            showType: Number(this.showType),
            dateFormat: this.dateFormat ? this.dateFormat : this.localDateOpts.dateFormat,
            returnFormat: this.returnFormat ? this.returnFormat : this.localDateOpts.returnFormat,
            minYear: this._minDate.year,
            maxYear: this._maxDate.year,
            highlightDates: this.highlightDates,
            disableDates: this.disableDates,
            showWeekNumbers: this.showWeekNumbers,
            disableDateRanges: [
                {
                    begin: this.disableDateRangesBegin,
                    end: this.disableDateRangesEnd
                }
            ],
            disableUntil: this._minDate,
            disableSince: this._maxDate,
            disableWeekdays: this.disableWeekdays,
            markDates: [
                {
                    dates: this.markDates,
                    color: this.markDatesColor
                }
            ],
            markWeekends: {
                marked: this.isMarkWeekends,
                color: this.markWeekendsColor
            },
            dateRangeDatesDelimiter: this.dateRangeDatesDelimiter,
            shortcuts: this.shortcuts,
            timeFormat: this._timeFormat,
            monthRangeValue: this.monthRangeValue,
            viewType: this.viewType
        };
        switch (Number(this.showType)) {
            case ShowType.noDate:
                dateOpts.defaultView = DefaultView.Month;
                break;
            case ShowType.noDateAndMonth:
                dateOpts.defaultView = DefaultView.Year;
                // dateOpts.dateFormat = 'yyyy';
                // dateOpts.returnFormat = 'yyyy';
                // this.dateFormat = 'yyyy';
                break;
            case ShowType.selectWeek:
                dateOpts.showWeekNumbers = true;
                dateOpts.dateRange = true;
                dateOpts.firstDayOfWeek = 'mo';
                break;
            // default:
            // this.returnType = 'String';
        }
        return tslib_1.__assign({}, this.localDateOpts, dateOpts);
    };
    /**
     * @param {?} d
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.dateTo = /**
     * @param {?} d
     * @return {?}
     */
    function (d) {
        /** @type {?} */
        var dateFormat = this.dateOpts.dateFormat ? this.dateOpts.dateFormat : this.defaultConfig.dateFormat;
        /** @type {?} */
        var monthLabels = this.dateOpts.monthLabels ? this.dateOpts.monthLabels : this.defaultConfig.monthLabels;
        /** @type {?} */
        var showTime = this.dateOpts.showTime ? this.dateOpts.showTime : this.defaultConfig.showTime;
        /** @type {?} */
        var year = d.getFullYear();
        /** @type {?} */
        var month = d.getMonth() + 1;
        /** @type {?} */
        var day = d.getDate();
        /** @type {?} */
        var hour = d.getHours();
        /** @type {?} */
        var minute = d.getMinutes();
        /** @type {?} */
        var second = d.getSeconds();
        /** @type {?} */
        var date;
        if (!showTime) {
            date = { year: year, month: month, day: day };
            this.originTime = { hour: hour, minute: minute, second: second };
        }
        else {
            date = { year: year, month: month, day: day, hour: hour, minute: minute, second: second };
        }
        return this.utilService.formatDate(date, dateFormat, monthLabels);
    };
    // 返回真实日期 Date 类型
    // 返回真实日期 Date 类型
    /**
     * @param {?} str
     * @param {?=} ignorRange
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.dateFrom = 
    // 返回真实日期 Date 类型
    /**
     * @param {?} str
     * @param {?=} ignorRange
     * @return {?}
     */
    function (str, ignorRange) {
        if (ignorRange === void 0) { ignorRange = false; }
        if (!str) {
            return '';
        }
        /** @type {?} */
        var _this = this;
        /** @type {?} */
        var dateRange = this.dateOpts.dateRange ? this.dateOpts.dateRange : this.defaultConfig.dateRange;
        /** @type {?} */
        var dateFormat = this.dateOpts.dateFormat ? this.dateOpts.dateFormat : this.defaultConfig.dateFormat;
        /** @type {?} */
        var returnFormat = this.dateOpts.returnFormat ? this.dateOpts.returnFormat : this.defaultConfig.returnFormat;
        /** @type {?} */
        var showTime = this.dateOpts.showTime ? this.dateOpts.showTime : this.defaultConfig.showTime;
        /** @type {?} */
        var delimeters = returnFormat.match(/[^(DdMmYy)]{1,}/g);
        /** @type {?} */
        var dateValue;
        /** @type {?} */
        var getValue = this.utilService.getDateValue;
        if ((dateRange || this.dateOpts.showType === ShowType.selectWeek) && !ignorRange) {
            /** @type {?} */
            var tmpBegin = str.split(this.dateRangeDatesDelimiter)[0];
            /** @type {?} */
            var tmpEnd = str.split(this.dateRangeDatesDelimiter)[1];
            /** @type {?} */
            var tmpBeginDate = this.utilService.isDateValid(tmpBegin, this.dateOpts, true);
            /** @type {?} */
            var tmpEndDate = this.utilService.isDateValid(tmpEnd, this.dateOpts, true);
            tmpBeginDate = this.utilService.isInitializedDate(tmpBeginDate) ? tmpBeginDate : this.dateOpts.disableUntil;
            tmpEndDate = this.utilService.isInitializedDate(tmpEndDate) ? tmpEndDate : this.dateOpts.disableSince;
            return (this.utilService.formatDate(tmpBeginDate, returnFormat, this.defaultConfig.monthLabels) +
                this.dateRangeDatesDelimiter +
                this.utilService.formatDate(tmpEndDate, returnFormat, this.defaultConfig.monthLabels));
        }
        else {
            if (this.returnType === 'Date') {
                if (str && str instanceof Date) {
                    return str;
                }
                return convert(str, getValue, this.originTime);
            }
            else {
                /** @type {?} */
                var tmpDate = this.utilService.isDateValid(str, this.dateOpts, true);
                return this.utilService.formatDate(tmpDate, returnFormat, this.defaultConfig.monthLabels);
            }
        }
        /**
         * @param {?} v
         * @param {?} _getValue
         * @param {?=} originTime
         * @return {?}
         */
        function convert(v, _getValue, originTime) {
            if (originTime === void 0) { originTime = { hour: 0, minute: 0, second: 0 }; }
            /** @type {?} */
            var fmt = returnFormat;
            if (_this.returnType === 'Date') {
                fmt = 'yyyy-MM-dd' + (showTime ? ' HH:mm:ss' : '');
            }
            if (showTime) {
                /** @type {?} */
                var date = v.split(' ')[0];
                /** @type {?} */
                var time = v.split(' ')[1];
                dateValue = _getValue(date, fmt, delimeters);
                if (time) {
                    time = time.replace(/[时,分]/g, ':').replace(/[秒]/, '');
                    var _a = tslib_1.__read(time.split(':'), 3), h = _a[0], m = _a[1], s = _a[2];
                    /** @type {?} */
                    var hour = h;
                    /** @type {?} */
                    var minute = m;
                    /** @type {?} */
                    var second = s ? s : '';
                    dateValue[3] = { value: hour, format: 'hh' };
                    dateValue[4] = { value: minute, format: 'mm' };
                    if (second) {
                        dateValue[5] = { value: second, format: 'ss' };
                    }
                }
            }
            else {
                /** @type {?} */
                var date = v.split(' ')[0];
                dateValue = _getValue(date, fmt, delimeters);
            }
            /** @type {?} */
            var year = Number(dateValue[0] ? dateValue[0].value : 1970);
            /** @type {?} */
            var yearValue = dateValue[0];
            if (yearValue.format) {
                if (!yearValue.value || yearValue.value.length !== yearValue.format.length) {
                    year = null;
                }
            }
            /** @type {?} */
            var month = Number(dateValue[1] ? dateValue[1].value : 1) - 1;
            /** @type {?} */
            var day = Number(dateValue[2] ? dateValue[2].value : 1);
            /** @type {?} */
            var _hour = dateValue[3] ? Number(dateValue[3].value) : originTime.hour;
            /** @type {?} */
            var _minute = dateValue[4] ? Number(dateValue[4].value) : originTime.minute;
            /** @type {?} */
            var _second = dateValue[5] ? Number(dateValue[5].value) : originTime.second;
            if (!year) {
                return null;
            }
            return new Date(year, month, day, _hour, _minute, _second);
        }
    };
    /**
     * @param {?} value
     * @param {?=} _fmt
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.transform = /**
     * @param {?} value
     * @param {?=} _fmt
     * @return {?}
     */
    function (value, _fmt) {
        if (_fmt === void 0) { _fmt = this.dateOpts.dateFormat; }
        value = value ? value : '';
        var _a = this.dateOpts, returnFormat = _a.returnFormat, dateFormat = _a.dateFormat, showTime = _a.showTime;
        /** @type {?} */
        var _tmpDate = null;
        if (typeof value === 'string') {
            _tmpDate = parse(value, returnFormat, new Date());
            if (!isValid(_tmpDate)) {
                if (this._SELECT_DATE_ && this._SELECT_DATE_.singleDate) {
                    _tmpDate = this._SELECT_DATE_.singleDate.jsDate;
                }
                else {
                    if (this._realValue) {
                        _tmpDate = parse(this._realValue, returnFormat, new Date());
                    }
                }
            }
        }
        else {
            if (value instanceof Date) {
                _tmpDate = value;
            }
        }
        /** @type {?} */
        var formattedVal = value;
        if (isValid(_tmpDate)) {
            formattedVal = this.dtService.formatTo(_tmpDate, _fmt);
            return formattedVal;
        }
        else {
            // 兼容年月日,年月,年格式
            value = value.replace(/[年,月]/g, '-').replace(/[日]/, '');
            if (value[value.length - 1] === '-') {
                value = value.substr(0, value.length - 1);
            }
            if (isValid(new Date(value))) {
                formattedVal = this.dtService.formatTo(value, _fmt);
            }
            else {
                value = '';
            }
        }
        if (value) {
            if (this.dateFrom(value, true) === '') {
                /** @type {?} */
                var tmpDate = this.utilService.isDateValid(value, Object.assign({}, this.dateOpts, {
                    dateFormat: returnFormat
                }));
                formattedVal = this.utilService.formatDate(tmpDate, _fmt, this.defaultConfig.monthLabels);
            }
        }
        return formattedVal;
    };
    /**
     * @param {?} value
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.setValue = /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        if (this.value !== value) {
            if (this.dateOpts.dateRange) {
                /** @type {?} */
                var _tmpDateArr = value.split(this.dateRangeDatesDelimiter);
                /** @type {?} */
                var beginStr = _tmpDateArr[0];
                /** @type {?} */
                var endStr = _tmpDateArr[1];
                this._beginValue = this.transform(beginStr);
                this._endValue = this.transform(endStr);
                this.value = this._beginValue && this._endValue ? this._beginValue + this.dateRangeDatesDelimiter + this._endValue : '';
            }
            else {
                if (value) {
                    this.value = this.transform(value);
                }
                else {
                    this.value = '';
                }
            }
        }
    };
    /**
     * @param {?} value
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.updateValue = /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        if (this.dateOpts.dateRange) {
            /** @type {?} */
            var _tmpDateArr = value.split(this.dateRangeDatesDelimiter);
            /** @type {?} */
            var beginStr = _tmpDateArr[0];
            /** @type {?} */
            var endStr = _tmpDateArr[1];
            this._beginValue = this.transform(beginStr);
            this._endValue = this.transform(endStr);
            this.value = this._beginValue && this._endValue ? this._beginValue + this.dateRangeDatesDelimiter + this._endValue : '';
        }
        else {
            this.value = this.transform(value);
        }
    };
    /**
     * @param {?} val
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.getValueByType = /**
     * @param {?} val
     * @return {?}
     */
    function (val) {
        if (val instanceof Date) {
            this.returnType = 'Date';
            // return this.dateTo(val);
            return val;
        }
        else if (val && val instanceof Object) {
            var begin = val.begin, end = val.end;
            /** @type {?} */
            var beginStr = begin instanceof Date ? this.dateTo(begin) : '';
            /** @type {?} */
            var endStr = begin instanceof Date ? this.dateTo(end) : '';
            this.returnType = 'Object';
            return beginStr && endStr ? beginStr + this.dateRangeDatesDelimiter + endStr : '';
        }
        else if (val && typeof val === 'string') {
            if (val.indexOf('T') > -1) {
                val = val.replace('T', ' ');
            }
            this.returnType = 'String';
            return val;
        }
        else {
            return '';
        }
    };
    /**
     * @param {?} val
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.writeValue = /**
     * @param {?} val
     * @return {?}
     */
    function (val) {
        this._realValue = val;
        if (this.dateRange) {
            this._realRangeValue = val;
        }
        this.setValue(this.getValueByType(val));
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.registerOnChange = /**
     * @param {?} fn
     * @return {?}
     */
    function (fn) {
        this.onModelChange = fn;
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.registerOnTouched = /**
     * @param {?} fn
     * @return {?}
     */
    function (fn) {
        this.onModelTouched = fn;
    };
    /**
     * @param {?} isDisabled
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.setDisabledState = /**
     * @param {?} isDisabled
     * @return {?}
     */
    function (isDisabled) {
        this.disabled = isDisabled;
    };
    /**
     * @param {?} value
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.onPrevFocus = /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        this.beginFocus = true;
        if (this.endFocus == true) {
            this.endFocus = !this.endFocus;
        }
        this.PrevFocus.emit();
    };
    /**
     * @param {?} value
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.onNextFocus = /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        this.endFocus = true;
        if (this.beginFocus == true) {
            this.beginFocus = !this.beginFocus;
        }
        this.NextFocus.emit();
    };
    /**
     * @private
     * @param {?} val
     * @param {?=} realValue
     * @return {?}
     */
    FarrisDatepickerComponent.prototype._convert2dateString = /**
     * @private
     * @param {?} val
     * @param {?=} realValue
     * @return {?}
     */
    function (val, realValue) {
        if (realValue === void 0) { realValue = false; }
        if (val) {
            /** @type {?} */
            var t = val.replace(/[年,月]/g, '-').replace(/[日,号]/g, ' ').replace(/[时,点,分,分钟]/g, ':').replace('秒', '');
            if (realValue) {
                /** @type {?} */
                var objDate = this.utilService.isDateValid(val, this.dateOpts, true);
                if (objDate) {
                    var year = objDate.year, month = objDate.month, day = objDate.day, hour = objDate.hour, minute = objDate.minute, second = objDate.second;
                    if (!year) {
                        year = new Date().getFullYear();
                    }
                    if (!month) {
                        month = new Date().getMonth();
                    }
                    if (!day) {
                        day = 1;
                    }
                    if (!hour) {
                        hour = 0;
                    }
                    if (!minute) {
                        minute = 0;
                    }
                    if (!second) {
                        second = 0;
                    }
                    return year + "-" + month + "-" + day + " " + hour + ":" + minute + ":" + second;
                }
            }
            if (t[t.length - 1] === '-') {
                // t = t.substr(0, t.length - 1);
                t += '01';
            }
            if (t[t.length - 1] === ':') {
                t = t.substr(0, t.length - 1);
            }
            return t.replace(/^\s+|\s+$/g, '');
        }
        return val;
    };
    /**
     * @private
     * @param {?} value
     * @return {?}
     */
    FarrisDatepickerComponent.prototype._isValid = /**
     * @private
     * @param {?} value
     * @return {?}
     */
    function (value) {
        value = this._convert2dateString(value);
        if (value) {
            if (this.dateFormat.indexOf('yyyy') === -1 || this.dateFormat.indexOf('dd') === -1) {
                /** @type {?} */
                var _tmpDate = parse(this.value, this.dateFormat, new Date());
                if (this._realValue) {
                    if (this.returnType === 'Date') {
                        return isValid(this._realValue);
                    }
                    else {
                        return isValid(new Date(this._convert2dateString(this._realValue, true)));
                    }
                }
                /** @type {?} */
                var d = this.utilService.isDateValid(value, this.dateOpts);
                if (d) {
                    if (d.year || d.month) {
                        /** @type {?} */
                        var cdate = new Date();
                        /** @type {?} */
                        var year = cdate.getFullYear();
                        /** @type {?} */
                        var str = (this.dateOpts.returnFormat || 'yyyy-MM-dd')
                            .replace('yyyy', '' + (d.year || year)).replace('MM', '' + d.month).replace('dd', '1');
                        return isValid(new Date(str));
                    }
                    return false;
                }
                return isValid(value);
            }
            else {
                /** @type {?} */
                var reg = /^\d{1,}$/;
                if (reg.test(value) && this.dateFormat.indexOf('yyyyMMdd') > -1) { // 验证传入的格式为 yyyyMMddHHmmss
                    // 验证传入的格式为 yyyyMMddHHmmss
                    /** @type {?} */
                    var _r = this._isValid2(value);
                    if (_r.isValided) {
                        this._realValue = this.getRealReturnFormatted(_r.date);
                        this.value = this.transform(_r.date);
                    }
                    return _r.isValided;
                }
                else {
                    /** @type {?} */
                    var _tmpDate = parse(value, this.dateFormat, new Date());
                    /** @type {?} */
                    var d = this.utilService.isDateValid(this.value, this.dateOpts);
                    return isValid(_tmpDate) || this.utilService.isInitializedDate(d);
                }
            }
        }
        return false;
    };
    /**
     * @private
     * @param {?} value
     * @return {?}
     */
    FarrisDatepickerComponent.prototype._isValid2 = /**
     * @private
     * @param {?} value
     * @return {?}
     */
    function (value) {
        /** @type {?} */
        var year = 0;
        /** @type {?} */
        var month = 0;
        /** @type {?} */
        var day = 0;
        /** @type {?} */
        var hour = 0;
        /** @type {?} */
        var minute = 0;
        /** @type {?} */
        var seconds = 0;
        /** @type {?} */
        var df = this.dateFormat;
        if (df.includes('yyyy')) {
            if (value) {
                year = +value.slice(0, 4);
                value = value.slice(4);
            }
            else {
                return false;
            }
        }
        if (df.includes('MM')) {
            if (value) {
                month = +value.slice(0, 2) - 1;
                value = value.slice(2);
                if (month < 0) {
                    month = 0;
                }
            }
            else {
                return false;
            }
        }
        if (df.includes('dd')) {
            if (value) {
                day = +value.slice(0, 2);
                value = value.slice(2);
            }
            else {
                return false;
            }
        }
        if (df.includes('HH')) {
            if (value) {
                hour = +value.slice(0, 2);
                value = value.slice(2);
            }
        }
        if (df.includes('mm')) {
            if (value) {
                minute = +value.slice(0, 2);
                value = value.slice(2);
            }
        }
        if (df.includes('ss')) {
            if (value) {
                seconds = +value.slice(0, 2);
            }
        }
        /** @type {?} */
        var d = new Date(year, month, day, hour, minute, seconds);
        return {
            isValided: isValid(d),
            date: d
        };
    };
    FarrisDatepickerComponent.decorators = [
        { type: Component, args: [{
                    selector: 'farris-datepicker',
                    exportAs: 'farris-datepicker',
                    template: "<div class=\"input-group\" [ngClass]=\"{\r\n        'f-state-disabled': disabled,\r\n        'f-state-readonly': readonly && !disabled,\r\n        'f-state-editable': editable && !disabled && !readonly,\r\n        'f-state-focus':totalFocus\r\n    }\">\r\n    <ng-container *ngIf=\"!dateOpts.dateRange; else range\">\r\n        <input type=\"text\" class=\"form-control f-utils-fill\" [attr.placeholder]=\"readonly||disabled?'':placeholder\" name=\"farris-date\" [ngModel]=\"value\"\r\n            (ngModelChange)=\"onSingleInputNgModelChange($event)\" #dateInput autocomplete=\"off\" [readonly]=\"readonly || !editable\"\r\n            [disabled]=\"disabled\" (dateChanged)=\"onDateChanged($event)\" (blur)=\"onBlur($event)\"\r\n            (focus)=\"onFocus($event)\" (click)=\"onInputClick($event)\" style=\"padding-right: 4px;\" farrisPopover\r\n            [popover]=\"value\" [triggers]=\"'hover'\" [popActive]=\"isActiveTip\" [showAction]=\"'show2'\"\r\n            [container]=\"'body'\" (keydown.tab)=\"closeSelector(3)\" />\r\n\r\n    </ng-container>\r\n    <ng-template #range>\r\n        <div class=\"form-control date-range-wrapper\" (click)=\"onInputClick($event)\" (blur)=\"onBlur($event)\"\r\n            (focus)=\"onFocus($event)\" [title]=\"readonly || !editable|| disabled ?value:''\">\r\n            <span class=\"sub-input-wrapper sub-input-wrapper-begin\" [class.f-state-focus]=\"totalFocus&&beginFocus\">\r\n                <input class=\"sub-input form-control\" type=\"text\" [attr.placeholder]=\"readonly||disabled?'':beginPlaceholder\"\r\n                    [(ngModel)]=\"_beginValue\" [readonly]=\"readonly || !editable\" [disabled]=\"disabled\"\r\n                    autocomplete=\"off\" (blur)=\"onDateRangeInputBlur('begin')\" (focus)=\"onPrevFocus($event)\"/>\r\n            </span>\r\n            <span class=\"f-icon f-icon-orientation-arrow sub-input-spliter\"></span>\r\n            <span class=\"sub-input-wrapper sub-input-wrapper-end\" [class.f-state-focus]=\"totalFocus&&endFocus\">\r\n                <input class=\"sub-input form-control\" type=\"text\" [attr.placeholder]=\"readonly||disabled?'':endPlaceholder\"\r\n                    [(ngModel)]=\"_endValue\" [readonly]=\"readonly || !editable\" [disabled]=\"disabled\" autocomplete=\"off\"\r\n                    (blur)=\"onDateRangeInputBlur('end')\" (focus)=\"onNextFocus($event)\" />\r\n            </span>\r\n        </div>\r\n    </ng-template>\r\n    <div class=\"input-group-append f-cmp-iconbtn-wrapper\" *ngIf=\"!readonly && !disabled\" style=\"position: relative;\">\r\n        <span class=\"input-group-text input-group-clear datepicker-clear\" (click)=\"clearDate($event)\"\r\n            style=\"visibility: hidden\" #clearIcon>\r\n            <i class=\"f-icon modal_close\"></i>\r\n        </span>\r\n        <button type=\"button\" class=\"btn f-cmp-iconbtn\" (click)=\"onInputClick($event)\">\r\n            <span class=\"f-icon f-icon-date\"></span>\r\n        </button>\r\n    </div>\r\n</div>\r\n\r\n<ng-container #calendar>\r\n    <ng-container></ng-container>\r\n</ng-container>",
                    providers: [FARRIS_DP_VALUE_ACCESSOR, UtilService, DefaultConfigService, LocaleService],
                    styles: ["\n            :host {\n                display: block;\n            }\n\n            :host .datepicker-clear {\n                position: absolute;\n                height: 100%;\n                right: 0;\n                top: 0;\n                z-index: 100;\n            }\n        "]
                }] }
    ];
    /** @nocollapse */
    FarrisDatepickerComponent.ctorParameters = function () { return [
        { type: ElementRef },
        { type: UtilService },
        { type: DefaultConfigService },
        { type: Injector }
    ]; };
    FarrisDatepickerComponent.propDecorators = {
        cls: [{ type: HostBinding, args: ['class',] }],
        viewType: [{ type: Input }],
        disabled: [{ type: Input }],
        readonly: [{ type: Input }],
        editable: [{ type: Input }],
        dateRange: [{ type: Input }],
        showTime: [{ type: Input }],
        showType: [{ type: Input }],
        locale: [{ type: Input }],
        dateFormat: [{ type: Input }],
        useDefault: [{ type: Input }],
        returnType: [{ type: Input }],
        returnFormat: [{ type: Input }],
        placeholder: [{ type: Input }],
        beginPlaceholder: [{ type: Input }],
        endPlaceholder: [{ type: Input }],
        whenValueChangedThenCloseSelectorPanel: [{ type: Input }],
        minDate: [{ type: Input }],
        maxDate: [{ type: Input }],
        highlightDates: [{ type: Input }],
        disableDateRangesBegin: [{ type: Input }],
        disableDateRangesEnd: [{ type: Input }],
        disableDates: [{ type: Input }],
        disableWeekdays: [{ type: Input }],
        markDates: [{ type: Input }],
        markDatesColor: [{ type: Input }],
        showWeekNumbers: [{ type: Input }],
        isMarkWeekends: [{ type: Input }],
        markWeekendsColor: [{ type: Input }],
        dateRangeDatesDelimiter: [{ type: Input }],
        shortcuts: [{ type: Input }],
        monthRangeValue: [{ type: Input }],
        beginValue: [{ type: Input }],
        endValue: [{ type: Input }],
        clear: [{ type: Output }],
        valueChange: [{ type: Output }],
        focus: [{ type: Output }],
        blur: [{ type: Output }],
        beginValueChange: [{ type: Output }],
        endValueChange: [{ type: Output }],
        PrevFocus: [{ type: Output }],
        NextFocus: [{ type: Output }],
        close: [{ type: Output }],
        dp: [{ type: ViewChild, args: [FarrisDatePickerDirective,] }],
        clearIcon: [{ type: ViewChild, args: ['clearIcon',] }],
        calendarRef: [{ type: ViewChild, args: ['calendar', { read: ViewContainerRef },] }],
        PFocus: [{ type: ViewChild, args: ['onPrevFocus',] }],
        NFocus: [{ type: ViewChild, args: ['onNextFocus',] }],
        dateInput: [{ type: ViewChild, args: ['dateInput',] }],
        onMouseEnter: [{ type: HostListener, args: ['mouseenter', ['$event'],] }],
        onMouseLeave: [{ type: HostListener, args: ['mouseleave', ['$event'],] }]
    };
    return FarrisDatepickerComponent;
}());
export { FarrisDatepickerComponent };
if (false) {
    /** @type {?} */
    FarrisDatepickerComponent.prototype.cls;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.viewType;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.disabled;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.readonly;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.editable;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.dateRange;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.showTime;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.showType;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.locale;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.useDefault;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.returnType;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.returnFormat;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.placeholder;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.beginPlaceholder;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.endPlaceholder;
    /**
     * 输入值变化后关闭选择面板。 默认为 true
     * @type {?}
     */
    FarrisDatepickerComponent.prototype.whenValueChangedThenCloseSelectorPanel;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.highlightDates;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.disableDateRangesBegin;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.disableDateRangesEnd;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.disableDates;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.disableWeekdays;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.markDates;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.markDatesColor;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.showWeekNumbers;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.isMarkWeekends;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.markWeekendsColor;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.dateRangeDatesDelimiter;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.shortcuts;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.monthRangeValue;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.clear;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.valueChange;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.focus;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.blur;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.beginValueChange;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.endValueChange;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.PrevFocus;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.NextFocus;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.close;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.dp;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.clearIcon;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.calendarRef;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.PFocus;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.NFocus;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.dateInput;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.cRef;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype._timeFormat;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype._value;
    /** @type {?} */
    FarrisDatepickerComponent.prototype._beginValue;
    /** @type {?} */
    FarrisDatepickerComponent.prototype._endValue;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype._initFinished;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype._timer;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype._dateFormat;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype._minDate;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype._maxDate;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.dateOpts;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.defaultConfig;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.localDateOpts;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.localeConfig;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.localeService;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.beginFocus;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.endFocus;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.totalFocus;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.originTime;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.isActiveTip;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.vcRef;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.cfr;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.renderer;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.datePicekrService;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype._realValue;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype._realRangeValue;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.notifySer;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.formatedValue;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.dtService;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype._applicationRef;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype._ngControl;
    /** @type {?} */
    FarrisDatepickerComponent.prototype._updateOn;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype._valueChangeEmitted;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype._mousedownEvent;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.closeCalendarHandler;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.cdr;
    /**
     * 缓存通过点击日历的数据，用于的格式化格式不标准时，格式化数据。
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype._SELECT_DATE_;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.onModelChange;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.onModelTouched;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.overLayService;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.el;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.utilService;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.defaultConfigService;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.injector;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmFycmlzLWRhdGVwaWNrZXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy91aS1kYXRlcGlja2VyLyIsInNvdXJjZXMiOlsibGliL2ZhcnJpcy1kYXRlcGlja2VyLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUNsRCxPQUFPLEVBQUUscUJBQXFCLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUMvRCxPQUFPLEVBQ0gsU0FBUyxFQUFVLEtBQUssRUFBRSxZQUFZLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQ3JFLFVBQVUsRUFBRSxZQUFZLEVBQWEsV0FBVyxFQUFFLFFBQVEsRUFBZ0IsZ0JBQWdCLEVBQUUsd0JBQXdCLEVBQ3BILFNBQVMsRUFBNEIsY0FBYyxFQUFFLGlCQUFpQixFQUN6RSxNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUsaUJBQWlCLEVBQXdCLFNBQVMsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQ3BGLE9BQU8sRUFBRSx5QkFBeUIsRUFBRSxNQUFNLDJCQUEyQixDQUFDO0FBTXRFLE9BQU8sRUFBRSxXQUFXLEVBQUUsUUFBUSxFQUFFLFNBQVMsRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBRXRFLE9BQU8sRUFBRSxXQUFXLEVBQUUsb0JBQW9CLEVBQUUsdUJBQXVCLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUN0SCxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDbEQsT0FBTyxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsTUFBTSxVQUFVLENBQUM7QUFDMUMsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sMENBQTBDLENBQUM7QUFDN0UsT0FBTyxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUN6RCxPQUFPLEVB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Q0FBc0M7Ozs7OztJQUV0QyxrREFBNkI7O0lBRTdCLGtEQUFrQzs7SUFDbEMsbURBQTJCOzs7OztJQUUzQixtREFBNkM7Ozs7O0lBRXpDLHVDQUFzQjs7Ozs7SUFDdEIsZ0RBQWdDOzs7OztJQUNoQyx5REFBa0Q7Ozs7O0lBQ2xELDZDQUEwQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5vdGlmeVNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLW5vdGlmeSc7XHJcbmltcG9ydCB7IERhdGVUaW1lSGVscGVyU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktY29tbW9uL2RhdGUnO1xyXG5pbXBvcnQge1xyXG4gICAgQ29tcG9uZW50LCBPbkluaXQsIElucHV0LCBFdmVudEVtaXR0ZXIsIE91dHB1dCwgVmlld0NoaWxkLCBmb3J3YXJkUmVmLCBTaW1wbGVDaGFuZ2VzLFxyXG4gICAgRWxlbWVudFJlZiwgSG9zdExpc3RlbmVyLCBPbkNoYW5nZXMsIEhvc3RCaW5kaW5nLCBJbmplY3RvciwgQ29tcG9uZW50UmVmLCBWaWV3Q29udGFpbmVyUmVmLCBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsXHJcbiAgICBSZW5kZXJlcjIsIE9uRGVzdHJveSwgQWZ0ZXJWaWV3SW5pdCwgQXBwbGljYXRpb25SZWYsIENoYW5nZURldGVjdG9yUmVmXHJcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IE5HX1ZBTFVFX0FDQ0VTU09SLCBDb250cm9sVmFsdWVBY2Nlc3NvciwgTmdDb250cm9sIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xyXG5pbXBvcnQgeyBGYXJyaXNEYXRlUGlja2VyRGlyZWN0aXZlIH0gZnJvbSAnLi9mYXJyaXMtZGF0ZXBpY2tlci5pbnB1dCc7XHJcbmltcG9ydCB7XHJcbiAgICBJTXlPcHRpb25zLCBJTXlEYXRlLCBJTXlEYXRlTW9kZWwsIElNeVNob3J0Y3V0cywgSU15RGF0ZUZvcm1hdCxcclxuICAgIElNeUNhbGVuZGFyVmlld0NoYW5nZWQsIElNeVJhbmdlRGF0ZVNlbGVjdGlvblxyXG59IGZyb20gJy4vaW50ZXJmYWNlcy9wdWJsaWMtYXBpJztcclxuXHJcbmltcG9ydCB7IERlZmF1bHRWaWV3LCBTaG93VHlwZSwgQ2FsVG9nZ2xlIH0gZnJvbSAnLi9lbnVtcy9wdWJsaWMtYXBpJztcclxuXHJcbmltcG9ydCB7IFV0aWxTZXJ2aWNlLCBEZWZhdWx0Q29uZmlnU2VydmljZSwgRGF0ZXBpY2tlckxvY2FsZVNlcnZpY2UsIERhdGVQaWNrZXJTZXJ2aWNlIH0gZnJvbSAnLi9zZXJ2aWNlcy9wdWJsaWMtYXBpJztcclxuaW1wb3J0IHsgTG9jYWxlU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbG9jYWxlJztcclxuaW1wb3J0IHsgaXNWYWxpZCwgcGFyc2UgfSBmcm9tICdkYXRlLWZucyc7XHJcbmltcG9ydCB7IENhbGVuZGFyQ29tcG9uZW50IH0gZnJvbSAnLi9jb21wb25lbnRzL2NhbGVuZGFyL2NhbGVuZGFyLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IENMSUNLLCBFTVBUWV9TVFIgfSBmcm9tICcuL2NvbnN0YW50cy9jb25zdGFudHMnO1xyXG5pbXBvcnQgeyBPdmVyTGF5SGlkZGVuU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktY29tbW9uJztcclxuaW1wb3J0IHsgVmlld1R5cGUgfSBmcm9tICcuL2ludGVyZmFjZXMvbXktb3B0aW9ucy5pbnRlcmZhY2UnO1xyXG5cclxuY29uc3QgRkFSUklTX0RQX1ZBTFVFX0FDQ0VTU09SID0ge1xyXG4gICAgcHJvdmlkZTogTkdfVkFMVUVfQUNDRVNTT1IsXHJcbiAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBGYXJyaXNEYXRlcGlja2VyQ29tcG9uZW50KSxcclxuICAgIG11bHRpOiB0cnVlXHJcbn07XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiAnZmFycmlzLWRhdGVwaWNrZXInLFxyXG4gICAgZXhwb3J0QXM6ICdmYXJyaXMtZGF0ZXBpY2tlcicsXHJcbiAgICB0ZW1wbGF0ZVVybDogJy4vZmFycmlzLWRhdGVwaWNrZXIuY29tcG9uZW50Lmh0bWwnLFxyXG4gICAgc3R5bGVzOiBbXHJcbiAgICAgICAgYFxyXG4gICAgICAgICAgICA6aG9zdCB7XHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgOmhvc3QgLmRhdGVwaWNrZXItY2xlYXIge1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xyXG4gICAgICAgICAgICAgICAgcmlnaHQ6IDA7XHJcbiAgICAgICAgICAgICAgICB0b3A6IDA7XHJcbiAgICAgICAgICAgICAgICB6LWluZGV4OiAxMDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBgXHJcbiAgICBdLFxyXG4gICAgcHJvdmlkZXJzOiBbRkFSUklTX0RQX1ZBTFVFX0FDQ0VTU09SLCBVdGlsU2VydmljZSwgRGVmYXVsdENvbmZpZ1NlcnZpY2UsIExvY2FsZVNlcnZpY2VdXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBGYXJyaXNEYXRlcGlja2VyQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBDb250cm9sVmFsdWVBY2Nlc3NvciwgT25DaGFuZ2VzLCBPbkRlc3Ryb3ksIEFmdGVyVmlld0luaXQge1xyXG5cclxuICAgIEBIb3N0QmluZGluZygnY2xhc3MnKSBjbHMgPSAnZi1jbXAtZGF0ZXBpY2tlciBmLWNtcC1pbnB1dGdyb3VwJztcclxuXHJcbiAgICBASW5wdXQoKSB2aWV3VHlwZTogVmlld1R5cGUgPSBWaWV3VHlwZS5SZXBsYWNlO1xyXG5cclxuICAgIC8vIOaYr+WQpuemgeeUqOivpee7hOS7tlxyXG4gICAgQElucHV0KCkgZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIC8vIOaYr+WQpuWPquivu1xyXG4gICAgQElucHV0KCkgcmVhZG9ubHkgPSBmYWxzZTtcclxuICAgIC8vIOaYr+WQpuWPquiDvemAieaLqeaVsOaNru+8jOS4jeWPr+mUruWFpVxyXG4gICAgQElucHV0KCkgZWRpdGFibGUgPSB0cnVlO1xyXG4gICAgLy8g5piv5ZCm5L2/55So5pel5pyf6IyD5Zu06L6T5YWl5qih5byPXHJcbiAgICBASW5wdXQoKSBkYXRlUmFuZ2UgPSBmYWxzZTtcclxuICAgIC8vIOaYr+WQpuS9v+eUqOaXtumXtOi+k+WFpeahhlxyXG4gICAgQElucHV0KCkgc2hvd1RpbWUgPSBmYWxzZTtcclxuICAgIC8vIOaYvuekuuexu+Wei1xyXG4gICAgQElucHV0KCkgc2hvd1R5cGU6IFNob3dUeXBlID0gU2hvd1R5cGUuYWxsO1xyXG4gICAgLy8g5pys5Zyw6K+t6KiAXHJcbiAgICBASW5wdXQoKSBsb2NhbGUgPSAnemgtY24nO1xyXG4gICAgLy8g5pel5pyf5qC85byPXHJcbiAgICBASW5wdXQoKVxyXG4gICAgc2V0IGRhdGVGb3JtYXQodmFsdWU6IHN0cmluZykge1xyXG4gICAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAvLyB2YWx1ZSDmoLzlvI/lvaLlpoIgeXl5eS1NTS1kZCBISDptbTpzc1xyXG4gICAgICAgICAgICAvLyBjb25zdCBmb3JtQXJyID0gJ3l5eXktTU0tZGQgSEg6bW06c3MnLnNwbGl0KCcgJyk7XHJcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgJycpOyAvLyDljrvmjonlt6blj7PnqbrmoLxcclxuICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKC9cXHMrL2csICcgJyk7IC8vIOWwhuS4remXtOeahOWkmuS4qui/nue7reepuuagvO+8jOabv+aNouS4ujHkuKrnqbrmoLxcclxuICAgICAgICAgICAgY29uc3QgZm9ybUFyciA9IHZhbHVlLnNwbGl0KCcgJyk7XHJcbiAgICAgICAgICAgIHRoaXMuX2RhdGVGb3JtYXQgPSBmb3JtQXJyWzBdO1xyXG4gICAgICAgICAgICAvLyDlpITnkIYneXl5eS1NTS1kZCBoOm1tOnNzIGEn5Y2zMTLlsI/ml7bmmL7npLrnmoTmg4XlhrVcclxuICAgICAgICAgICAgaWYgKGZvcm1BcnIubGVuZ3RoID09PSAzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl90aW1lRm9ybWF0ID0gJ2g6bW06c3MgYSc7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl90aW1lRm9ybWF0ID0gZm9ybUFyclsxXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gdGhpcy5fZGF0ZUZvcm1hdCA9IHRoaXMuX2RhdGVGb3JtYXQgPyAodGhpcy5fZGF0ZUZvcm1hdCArICcnKS5yZXBsYWNlKC9tL2csICdNJykgOiAnJztcclxuICAgICAgICBpZiAodGhpcy5fZGF0ZUZvcm1hdCkge1xyXG4gICAgICAgICAgICBjb25zdCBtbSA9IFsneXl5eS1tbScsICd5eXl5L21tJywgJ3l5eXnlubRtbScsICdtbS95eXl5J107XHJcbiAgICAgICAgICAgIGNvbnN0IF9tbSA9IG1tLmZpbmQobSA9PiB0aGlzLl9kYXRlRm9ybWF0LmluY2x1ZGVzKG0pKTtcclxuICAgICAgICAgICAgaWYgKF9tbSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZGF0ZUZvcm1hdCA9IHRoaXMuX2RhdGVGb3JtYXQucmVwbGFjZShfbW0sIF9tbS5yZXBsYWNlKC9tL2csICdNJykpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5fdGltZUZvcm1hdCAmJiB0aGlzLnNob3dUaW1lKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9kYXRlRm9ybWF0ICs9ICcgJyArIHRoaXMuX3RpbWVGb3JtYXQ7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fdGltZUZvcm1hdC5pbmRleE9mKCfml7YnKSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdGltZUZvcm1hdCA9IHRoaXMuX3RpbWVGb3JtYXQucmVwbGFjZSgn5pe2JywgJzonKS5yZXBsYWNlKCfliIYnLCAnOicpLnJlcGxhY2UoJ+enkicsICcnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gdGhpcy5kYXRlT3B0cy5kYXRlRm9ybWF0ID0gdGhpcy5fZGF0ZUZvcm1hdDtcclxuICAgIH1cclxuICAgIGdldCBkYXRlRm9ybWF0KCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RhdGVGb3JtYXQ7XHJcbiAgICB9XHJcbiAgICAvLyDmmK/lkKbkvb/nlKjpu5jorqTlgLxcclxuICAgIEBJbnB1dCgpIHVzZURlZmF1bHQgPSBmYWxzZTtcclxuICAgIEBJbnB1dCgpIHJldHVyblR5cGU6ICdPYmplY3QnIHwgJ0RhdGUnIHwgJ1N0cmluZycgPSAnU3RyaW5nJztcclxuICAgIEBJbnB1dCgpIHJldHVybkZvcm1hdDogc3RyaW5nO1xyXG4gICAgLy8gcGxhY2Vob2xkZXJcclxuICAgIEBJbnB1dCgpIHBsYWNlaG9sZGVyID0gJyc7XHJcbiAgICBASW5wdXQoKSBiZWdpblBsYWNlaG9sZGVyID0gJyc7XHJcbiAgICBASW5wdXQoKSBlbmRQbGFjZWhvbGRlciA9ICcnO1xyXG4gICAgLyoqIOi+k+WFpeWAvOWPmOWMluWQjuWFs+mXremAieaLqemdouadv+OAgiDpu5jorqTkuLogdHJ1ZSAqL1xyXG4gICAgQElucHV0KCkgd2hlblZhbHVlQ2hhbmdlZFRoZW5DbG9zZVNlbGVjdG9yUGFuZWwgPSB0cnVlO1xyXG4gICAgLy8g5pyA5bCP5pel5pyfXHJcbiAgICAvLyDliqDlhaXmjqXmlLbml7bliIbnp5Llip/og71cclxuICAgIEBJbnB1dCgpXHJcbiAgICBzZXQgbWluRGF0ZSh2YWw6IGFueSkge1xyXG4gICAgICAgIGNvbnN0IHR5cGUgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsKTtcclxuICAgICAgICBsZXQgZGF0ZTogRGF0ZTtcclxuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSAnW29iamVjdCBEYXRlXSc6XHJcbiAgICAgICAgICAgICAgICBkYXRlID0gdmFsO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ1tvYmplY3QgU3RyaW5nXSc6XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKHZhbCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGUgPSBuZXcgRGF0ZSgxODQwLCAxLCAxLCAwLCAwLCAwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdbb2JqZWN0IE51bGxdJzpcclxuICAgICAgICAgICAgICAgIGRhdGUgPSBuZXcgRGF0ZSgxODQwLCAxLCAxLCAwLCAwLCAwKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAvLyBjYXNlIG51bGw6XHJcbiAgICAgICAgICAgIC8vICAgICBkYXRlID0gbmV3IERhdGUoMTg0MCwgMSwgMSwgMCwgMCwgMCk7XHJcbiAgICAgICAgICAgIC8vICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnW29iamVjdCBVbmRlZmluZWRdJzpcclxuICAgICAgICAgICAgICAgIGRhdGUgPSBuZXcgRGF0ZSgxODQwLCAxLCAxLCAwLCAwLCAwKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKDE4NDAsIDEsIDEsIDAsIDAsIDApO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpc1ZhbGlkKGRhdGUpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vbnRoID0gZGF0ZS5nZXRNb250aCgpICsgMTtcclxuICAgICAgICAgICAgY29uc3QgZGF5ID0gZGF0ZS5nZXREYXRlKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGhvdXIgPSBkYXRlLmdldEhvdXJzKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1pbnV0ZSA9IGRhdGUuZ2V0TWludXRlcygpO1xyXG4gICAgICAgICAgICBjb25zdCBzZWNvbmQgPSBkYXRlLmdldFNlY29uZHMoKTtcclxuICAgICAgICAgICAgdGhpcy5fbWluRGF0ZSA9IHsgeWVhciwgbW9udGgsIGRheSwgaG91ciwgbWludXRlLCBzZWNvbmQgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXQgbWluRGF0ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbWluRGF0ZTtcclxuICAgIH1cclxuICAgIC8vIOacgOWkp+aXpeacn1xyXG4gICAgLy8g5Yqg5YWl5o6l5pS25pe25YiG56eS5Yqf6IO9XHJcbiAgICBASW5wdXQoKVxyXG4gICAgc2V0IG1heERhdGUodmFsOiBhbnkpIHtcclxuICAgICAgICBjb25zdCB0eXBlID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbCk7XHJcbiAgICAgICAgbGV0IGRhdGU6IERhdGU7XHJcblxyXG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlICdbb2JqZWN0IERhdGVdJzpcclxuICAgICAgICAgICAgICAgIGRhdGUgPSB2YWw7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnW29iamVjdCBTdHJpbmddJzpcclxuICAgICAgICAgICAgICAgIGlmICh2YWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRlID0gbmV3IERhdGUodmFsKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKDEwMDAwLCAxLCAxLCAwLCAwLCAwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdbb2JqZWN0IE51bGxdJzpcclxuICAgICAgICAgICAgICAgIGRhdGUgPSBuZXcgRGF0ZSgxMDAwMCwgMSwgMSwgMCwgMCwgMCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgLy8gY2FzZSBudWxsOlxyXG4gICAgICAgICAgICAvLyAgICAgZGF0ZSA9IG5ldyBEYXRlKDEwMDAwLCAxLCAxLCAwLCAwLCAwKTtcclxuICAgICAgICAgICAgLy8gICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdbb2JqZWN0IFVuZGVmaW5lZF0nOlxyXG4gICAgICAgICAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKDEwMDAwLCAxLCAxLCAwLCAwLCAwKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKDEwMDAwLCAxLCAxLCAwLCAwLCAwKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaXNWYWxpZChkYXRlKSkge1xyXG4gICAgICAgICAgICBjb25zdCB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xyXG4gICAgICAgICAgICBjb25zdCBtb250aCA9IGRhdGUuZ2V0TW9udGgoKSArIDE7XHJcbiAgICAgICAgICAgIGNvbnN0IGRheSA9IGRhdGUuZ2V0RGF0ZSgpO1xyXG4gICAgICAgICAgICBjb25zdCBob3VyID0gZGF0ZS5nZXRIb3VycygpO1xyXG4gICAgICAgICAgICBjb25zdCBtaW51dGUgPSBkYXRlLmdldE1pbnV0ZXMoKTtcclxuICAgICAgICAgICAgY29uc3Qgc2Vjb25kID0gZGF0ZS5nZXRTZWNvbmRzKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX21heERhdGUgPSB7IHllYXIsIG1vbnRoLCBkYXksIGhvdXIsIG1pbnV0ZSwgc2Vjb25kIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0IG1heERhdGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX21heERhdGU7XHJcbiAgICB9XHJcbiAgICAvLyDpnIDopoHpq5jkuq7mmL7npLrnmoTml6XmnJ9cclxuICAgIEBJbnB1dCgpIGhpZ2hsaWdodERhdGVzOiBBcnJheTxJTXlEYXRlPiA9IFtdO1xyXG4gICAgLy8g56aB55So5Yy65Z+f55qE5pel5pyf5byA5aeL5pe26Ze0XHJcbiAgICBASW5wdXQoKSBkaXNhYmxlRGF0ZVJhbmdlc0JlZ2luOiBJTXlEYXRlID0ge1xyXG4gICAgICAgIHllYXI6IDAsXHJcbiAgICAgICAgbW9udGg6IDAsXHJcbiAgICAgICAgZGF5OiAwXHJcbiAgICB9O1xyXG4gICAgLy8g56aB55So5Yy65Z+f55qE5pel5pyf57uT5p2f5pe26Ze0XHJcbiAgICBASW5wdXQoKSBkaXNhYmxlRGF0ZVJhbmdlc0VuZDogSU15RGF0ZSA9IHtcclxuICAgICAgICB5ZWFyOiAwLFxyXG4gICAgICAgIG1vbnRoOiAwLFxyXG4gICAgICAgIGRheTogMFxyXG4gICAgfTtcclxuICAgIC8vIOemgeeUqOeahOaXpeacn1xyXG4gICAgQElucHV0KCkgZGlzYWJsZURhdGVzOiBBcnJheTxJTXlEYXRlPiA9IFtdO1xyXG4gICAgLy8g5LiA5ZGo5Lit6KKr56aB55So55qE5pel5a2QXHJcbiAgICBASW5wdXQoKSBkaXNhYmxlV2Vla2RheXM6IEFycmF5PHN0cmluZz4gPSBbXTtcclxuICAgIC8vIOiiq+agh+iusOeahOaXpeacn1xyXG4gICAgQElucHV0KCkgbWFya0RhdGVzOiBBcnJheTxJTXlEYXRlPiA9IFtdO1xyXG4gICAgLy8g6KKr5qCH6K6w55qE5pel5pyf55qE5pi+56S66aKc6ImyXHJcbiAgICBASW5wdXQoKSBtYXJrRGF0ZXNDb2xvciA9ICcjNTlhMWZmJztcclxuICAgIC8vIOaYr+WQpuaYvuekuuesrOWHoOWRqFxyXG4gICAgQElucHV0KCkgc2hvd1dlZWtOdW1iZXJzID0gZmFsc2U7XHJcbiAgICAvLyDmmK/lkKbmoIforrDlkajmnKtcclxuICAgIEBJbnB1dCgpIGlzTWFya1dlZWtlbmRzID0gZmFsc2U7XHJcbiAgICAvLyDooqvmoIforrDlkajmnKvnmoTmmL7npLrpopzoibJcclxuICAgIEBJbnB1dCgpIG1hcmtXZWVrZW5kc0NvbG9yID0gJyM1OWExZmYnO1xyXG4gICAgLy8g5pel5pyf6IyD5Zu05qih5byP5LiLaW5wdXTnmoTmmL7npLrliIblibLnrKblkIhcclxuICAgIEBJbnB1dCgpIGRhdGVSYW5nZURhdGVzRGVsaW1pdGVyID0gJ34nO1xyXG4gICAgLy8g6YWN572u5bem5L6nIHNpZGViYXIg5b+r5o236ZSuXHJcbiAgICBASW5wdXQoKSBzaG9ydGN1dHM6IEFycmF5PElNeVNob3J0Y3V0cz4gPSBbXTtcclxuICAgIC8vIOaXpeacn+iMg+WbtOmAieaLqeaXtu+8jOm7mOiupOe7k+adn+aciOS7veS4uuW9k+WJjeaciOS7vSArIG1vbnRoUmFuZ2VWYWx1ZVxyXG4gICAgQElucHV0KCkgbW9udGhSYW5nZVZhbHVlID0gMTtcclxuICAgIC8vIOaXpeacn+iMg+WbtO+8muW8gOWni+aXpeacn1xyXG4gICAgQElucHV0KClcclxuICAgIHNldCBiZWdpblZhbHVlKHZhbHVlOiBzdHJpbmcgfCBEYXRlKSB7XHJcbiAgICAgICAgdmFsdWUgPSB2YWx1ZSA/IHZhbHVlIDogJyc7XHJcbiAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgRGF0ZSkge1xyXG4gICAgICAgICAgICB2YWx1ZSA9IHRoaXMuZGF0ZVRvKHZhbHVlKTtcclxuICAgICAgICAgICAgdGhpcy5yZXR1cm5UeXBlID0gJ0RhdGUnO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZS5pbmRleE9mKCdUJykgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKCdUJywgJyAnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnJldHVyblR5cGUgPSAnU3RyaW5nJztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fYmVnaW5WYWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgIGlmICh0aGlzLl9pbml0RmluaXNoZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRWYWx1ZSh0aGlzLl9iZWdpblZhbHVlICsgdGhpcy5kYXRlUmFuZ2VEYXRlc0RlbGltaXRlciArIHRoaXMuX2VuZFZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXQgYmVnaW5WYWx1ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRlRnJvbSh0aGlzLl9iZWdpblZhbHVlLCB0cnVlKTtcclxuICAgIH1cclxuICAgIC8vIOaXpeacn+iMg+WbtO+8mue7k+adn+aXpeacn1xyXG4gICAgQElucHV0KClcclxuICAgIHNldCBlbmRWYWx1ZSh2YWx1ZTogc3RyaW5nIHwgRGF0ZSkge1xyXG4gICAgICAgIHZhbHVlID0gdmFsdWUgPyB2YWx1ZSA6ICcnO1xyXG4gICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIERhdGUpIHtcclxuICAgICAgICAgICAgdmFsdWUgPSB0aGlzLmRhdGVUbyh2YWx1ZSk7XHJcbiAgICAgICAgICAgIHRoaXMucmV0dXJuVHlwZSA9ICdEYXRlJztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodmFsdWUuaW5kZXhPZignVCcpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZSgnVCcsICcgJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5yZXR1cm5UeXBlID0gJ1N0cmluZyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2VuZFZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgaWYgKHRoaXMuX2luaXRGaW5pc2hlZCkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFZhbHVlKHRoaXMuX2JlZ2luVmFsdWUgKyB0aGlzLmRhdGVSYW5nZURhdGVzRGVsaW1pdGVyICsgdGhpcy5fZW5kVmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldCBlbmRWYWx1ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRlRnJvbSh0aGlzLl9lbmRWYWx1ZSwgdHJ1ZSk7XHJcbiAgICB9XHJcbiAgICAvLyBjbGVhciDkuovku7ZcclxuICAgIEBPdXRwdXQoKSBjbGVhciA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIC8vIHZhbHVlQ2hhbmdlZCDkuovku7ZcclxuICAgIEBPdXRwdXQoKSB2YWx1ZUNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIC8vIGZvY3VzIOS6i+S7tlxyXG4gICAgQE91dHB1dCgpIGZvY3VzID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgLy8gYmx1ciDkuovku7ZcclxuICAgIEBPdXRwdXQoKSBibHVyID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgLy8gYmVnaW5WYWx1ZUNoYW5nZVxyXG4gICAgQE91dHB1dCgpIGJlZ2luVmFsdWVDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICAvLyBlbmRWYWx1ZUNoYW5nZVxyXG4gICAgQE91dHB1dCgpIGVuZFZhbHVlQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgLy8gUHJldkZvY3VzIGRhdGVSYW5nZSDnrKzkuIDkuKrml6XmnJ9cclxuICAgIEBPdXRwdXQoKSBQcmV2Rm9jdXMgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICAvLyBOZXh0Rm9jdXMgZGF0ZVJhbmdlIOesrOS6jOS4quaXpeacn1xyXG4gICAgQE91dHB1dCgpIE5leHRGb2N1cyA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgICAvLyBjbG9zZSDkuovku7ZcclxuICAgIEBPdXRwdXQoKSBjbG9zZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcblxyXG4gICAgQFZpZXdDaGlsZChGYXJyaXNEYXRlUGlja2VyRGlyZWN0aXZlKSBkcDogRmFycmlzRGF0ZVBpY2tlckRpcmVjdGl2ZTtcclxuICAgIEBWaWV3Q2hpbGQoJ2NsZWFySWNvbicpIGNsZWFySWNvbjogRWxlbWVudFJlZjtcclxuICAgIEBWaWV3Q2hpbGQoJ2NhbGVuZGFyJywgeyByZWFkOiBWaWV3Q29udGFpbmVyUmVmIH0pIGNhbGVuZGFyUmVmOiBWaWV3Q29udGFpbmVyUmVmO1xyXG4gICAgQFZpZXdDaGlsZCgnb25QcmV2Rm9jdXMnKSBQRm9jdXM6IEVsZW1lbnRSZWY7XHJcbiAgICBAVmlld0NoaWxkKCdvbk5leHRGb2N1cycpIE5Gb2N1czogRWxlbWVudFJlZjtcclxuXHJcbiAgICBAVmlld0NoaWxkKCdkYXRlSW5wdXQnKSBkYXRlSW5wdXQ6IEVsZW1lbnRSZWY7XHJcblxyXG4gICAgcHJpdmF0ZSBjUmVmOiBDb21wb25lbnRSZWY8Q2FsZW5kYXJDb21wb25lbnQ+ID0gbnVsbDtcclxuICAgIHByaXZhdGUgX3RpbWVGb3JtYXQgPSAnJztcclxuICAgIHByaXZhdGUgX3ZhbHVlID0gJyc7XHJcbiAgICBwdWJsaWMgX2JlZ2luVmFsdWUgPSAnJztcclxuICAgIHB1YmxpYyBfZW5kVmFsdWUgPSAnJztcclxuICAgIHByaXZhdGUgX2luaXRGaW5pc2hlZCA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBfdGltZXI6IGFueTtcclxuICAgIHByaXZhdGUgX2RhdGVGb3JtYXQ6IHN0cmluZztcclxuICAgIHByaXZhdGUgX21pbkRhdGU6IElNeURhdGUgPSB7XHJcbiAgICAgICAgeWVhcjogMTg0MCxcclxuICAgICAgICBtb250aDogMSxcclxuICAgICAgICBkYXk6IDEsXHJcbiAgICAgICAgaG91cjogMCxcclxuICAgICAgICBtaW51dGU6IDAsXHJcbiAgICAgICAgc2Vjb25kOiAwXHJcbiAgICB9O1xyXG4gICAgcHJpdmF0ZSBfbWF4RGF0ZTogSU15RGF0ZSA9IHtcclxuICAgICAgICB5ZWFyOiAxMDAwMCxcclxuICAgICAgICBtb250aDogMSxcclxuICAgICAgICBkYXk6IDEsXHJcbiAgICAgICAgaG91cjogMCxcclxuICAgICAgICBtaW51dGU6IDAsXHJcbiAgICAgICAgc2Vjb25kOiAwXHJcbiAgICB9O1xyXG4gICAgc2V0IHZhbHVlKHYpIHtcclxuICAgICAgICB0aGlzLl92YWx1ZSA9IHYgPyB2IDogJyc7XHJcbiAgICB9XHJcbiAgICBnZXQgdmFsdWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIGRhdGVPcHRzOiBJTXlPcHRpb25zID0ge307XHJcbiAgICBkZWZhdWx0Q29uZmlnOiBJTXlPcHRpb25zO1xyXG4gICAgbG9jYWxEYXRlT3B0czogSU15T3B0aW9ucztcclxuICAgIGxvY2FsZUNvbmZpZzogRGF0ZXBpY2tlckxvY2FsZVNlcnZpY2U7XHJcbiAgICBsb2NhbGVTZXJ2aWNlOiBMb2NhbGVTZXJ2aWNlO1xyXG4gICAgLy8g5byA5aeL6L6T5YWl5o6n5Lu26IGa54SmXHJcbiAgICBiZWdpbkZvY3VzID0gZmFsc2U7XHJcbiAgICAvLyDnu5PmnZ/ovpPlhaXmjqfku7bogZrnhKZcclxuICAgIGVuZEZvY3VzID0gZmFsc2U7XHJcbiAgICAvLyDmlbTkvZPogZrnhKZcclxuICAgIHRvdGFsRm9jdXMgPSBmYWxzZTtcclxuXHJcbiAgICBvcmlnaW5UaW1lOiBhbnk7XHJcbiAgICAvLyDmmK/lkKblrZfnrKbotoXplb/mmL7npLpUaXBcclxuICAgIGlzQWN0aXZlVGlwID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIHZjUmVmOiBWaWV3Q29udGFpbmVyUmVmO1xyXG4gICAgcHJpdmF0ZSBjZnI6IENvbXBvbmVudEZhY3RvcnlSZXNvbHZlcjtcclxuICAgIHByaXZhdGUgcmVuZGVyZXI6IFJlbmRlcmVyMjtcclxuICAgIHByaXZhdGUgZGF0ZVBpY2VrclNlcnZpY2U6IERhdGVQaWNrZXJTZXJ2aWNlO1xyXG4gICAgcHJpdmF0ZSBfcmVhbFZhbHVlID0gbnVsbDtcclxuICAgIHByaXZhdGUgX3JlYWxSYW5nZVZhbHVlID0gbnVsbDtcclxuICAgIHByaXZhdGUgbm90aWZ5U2VyOiBOb3RpZnlTZXJ2aWNlO1xyXG4gICAgcHJpdmF0ZSBmb3JtYXRlZFZhbHVlID0gJyc7XHJcbiAgICBkdFNlcnZpY2U6IERhdGVUaW1lSGVscGVyU2VydmljZSA9IG51bGw7XHJcbiAgICBwcml2YXRlIF9hcHBsaWNhdGlvblJlZjogQXBwbGljYXRpb25SZWY7XHJcblxyXG4gICAgcHJpdmF0ZSBfbmdDb250cm9sOiBOZ0NvbnRyb2w7XHJcbiAgICBfdXBkYXRlT24gPSAnY2hhbmdlJztcclxuXHJcbiAgICAvLyDml6XmnJ/pgInmi6nlkI7orr7nva7kuLogdHJ1Ze+8jCBibHVyIOS6i+S7tuWwhuS4jeS8mumHjeWkjeaJp+ihjHZhbHVlQ2hhbmdlZO+8m1xyXG4gICAgLy8g6ZSu55uY5L+u5pS55pe277yMYmx1ciDkuovku7bkuK3kvJrmiafooYzkuIDmrKEgdmFsdWVDaGFuZ2VkIOWQju+8jOWwhuatpOWAvOiuvuS4uiBmYWxzZTtcclxuICAgIHByaXZhdGUgX3ZhbHVlQ2hhbmdlRW1pdHRlZCA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBfbW91c2Vkb3duRXZlbnQgPSBudWxsO1xyXG4gICAgcHJpdmF0ZSBjbG9zZUNhbGVuZGFySGFuZGxlciA9IG51bGw7XHJcbiAgICBwcml2YXRlIGNkcjogQ2hhbmdlRGV0ZWN0b3JSZWYgPSBudWxsO1xyXG4gICAgLyoqIOe8k+WtmOmAmui/h+eCueWHu+aXpeWOhueahOaVsOaNru+8jOeUqOS6jueahOagvOW8j+WMluagvOW8j+S4jeagh+WHhuaXtu+8jOagvOW8j+WMluaVsOaNruOAgiAqL1xyXG4gICAgcHJpdmF0ZSBfU0VMRUNUX0RBVEVfID0gbnVsbDtcclxuXHJcbiAgICBvbk1vZGVsQ2hhbmdlID0gKG9iajogYW55KSA9PiB7IH07XHJcbiAgICBvbk1vZGVsVG91Y2hlZCA9ICgpID0+IHsgfTtcclxuXHJcbiAgICBwcml2YXRlIG92ZXJMYXlTZXJ2aWNlOiBPdmVyTGF5SGlkZGVuU2VydmljZTtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHByaXZhdGUgZWw6IEVsZW1lbnRSZWYsXHJcbiAgICAgICAgcHJpdmF0ZSB1dGlsU2VydmljZTogVXRpbFNlcnZpY2UsXHJcbiAgICAgICAgcHJpdmF0ZSBkZWZhdWx0Q29uZmlnU2VydmljZTogRGVmYXVsdENvbmZpZ1NlcnZpY2UsXHJcbiAgICAgICAgcHJpdmF0ZSBpbmplY3RvcjogSW5qZWN0b3JcclxuICAgICkge1xyXG4gICAgICAgIHRoaXMuZGVmYXVsdENvbmZpZyA9IHRoaXMuZGVmYXVsdENvbmZpZ1NlcnZpY2UuZ2V0RGVmYXVsdENvbmZpZygpO1xyXG4gICAgICAgIGlmICh0aGlzLmluamVjdG9yKSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9jYWxlU2VydmljZSA9IHRoaXMuaW5qZWN0b3IuZ2V0KExvY2FsZVNlcnZpY2UpO1xyXG4gICAgICAgICAgICB0aGlzLmR0U2VydmljZSA9IHRoaXMuaW5qZWN0b3IuZ2V0KERhdGVUaW1lSGVscGVyU2VydmljZSk7XHJcbiAgICAgICAgICAgIHRoaXMubm90aWZ5U2VyID0gdGhpcy5pbmplY3Rvci5nZXQoTm90aWZ5U2VydmljZSwgbnVsbCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm5vdGlmeVNlcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZnlTZXIuY29uZmlnLnBvc2l0aW9uID0gJ3RvcC1jZW50ZXInO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubG9jYWxlQ29uZmlnID0gbmV3IERhdGVwaWNrZXJMb2NhbGVTZXJ2aWNlKCk7XHJcbiAgICAgICAgdGhpcy52Y1JlZiA9IHRoaXMuaW5qZWN0b3IuZ2V0KFZpZXdDb250YWluZXJSZWYsIG51bGwpO1xyXG4gICAgICAgIHRoaXMuY2ZyID0gdGhpcy5pbmplY3Rvci5nZXQoQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLCBudWxsKTtcclxuICAgICAgICB0aGlzLnJlbmRlcmVyID0gdGhpcy5pbmplY3Rvci5nZXQoUmVuZGVyZXIyLCBudWxsKTtcclxuICAgICAgICB0aGlzLl9hcHBsaWNhdGlvblJlZiA9IHRoaXMuaW5qZWN0b3IuZ2V0KEFwcGxpY2F0aW9uUmVmKTtcclxuICAgICAgICB0aGlzLmNkciA9IHRoaXMuaW5qZWN0b3IuZ2V0KENoYW5nZURldGVjdG9yUmVmKTtcclxuICAgICAgICAvLyB0aGlzLmRhdGVQaWNla3JTZXJ2aWNlID0gdGhpcy5pbmplY3Rvci5nZXQoRGF0ZVBpY2tlclNlcnZpY2UsIG51bGwpXHJcbiAgICAgICAgdGhpcy5vdmVyTGF5U2VydmljZSA9IG5ldyBPdmVyTGF5SGlkZGVuU2VydmljZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIG5nT25Jbml0KCk6IHZvaWQge1xyXG5cclxuICAgICAgICB0aGlzLl9uZ0NvbnRyb2wgPSB0aGlzLmluamVjdG9yLmdldChOZ0NvbnRyb2wsIG51bGwpO1xyXG5cclxuICAgICAgICB0aGlzLmluaXRQbGFjZWhvbGRlcigpO1xyXG4gICAgICAgIHRoaXMubWVyZ2VEYXRlT3B0aW9ucygpO1xyXG4gICAgICAgIGlmICh0aGlzLl9iZWdpblZhbHVlICYmIHRoaXMuX2VuZFZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0VmFsdWUodGhpcy5fYmVnaW5WYWx1ZSArIHRoaXMuZGF0ZVJhbmdlRGF0ZXNEZWxpbWl0ZXIgKyB0aGlzLl9lbmRWYWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2luaXRGaW5pc2hlZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5kYXRlUGljZWtyU2VydmljZSA9IG5ldyBEYXRlUGlja2VyU2VydmljZSh0aGlzLmRhdGVPcHRzKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGluaXRQbGFjZWhvbGRlcigpIHtcclxuICAgICAgICBpZiAodGhpcy5sb2NhbGVTZXJ2aWNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9jYWxlID0gdGhpcy5sb2NhbGVTZXJ2aWNlLmdldFZhbHVlKCdsb2NhbGUnKTtcclxuICAgICAgICAgICAgdGhpcy5sb2NhbERhdGVPcHRzID0gdGhpcy5sb2NhbGVDb25maWcuZ2V0TG9jYWxlT3B0aW9ucyh0aGlzLmxvY2FsZSk7XHJcbiAgICAgICAgICAgIHRoaXMucGxhY2Vob2xkZXIgPSB0aGlzLnBsYWNlaG9sZGVyXHJcbiAgICAgICAgICAgICAgICA/IHRoaXMucGxhY2Vob2xkZXJcclxuICAgICAgICAgICAgICAgIDogdGhpcy5sb2NhbERhdGVPcHRzLnBsYWNlaG9sZGVyXHJcbiAgICAgICAgICAgICAgICAgICAgPyB0aGlzLmxvY2FsRGF0ZU9wdHMucGxhY2Vob2xkZXJcclxuICAgICAgICAgICAgICAgICAgICA6ICfor7fpgInmi6nml6XmnJ8nO1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuYmVnaW5QbGFjZWhvbGRlcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5iZWdpblBsYWNlaG9sZGVyID0gdGhpcy5sb2NhbERhdGVPcHRzLnJhbmdlLmJlZ2luIHx8IHRoaXMucGxhY2Vob2xkZXI7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5lbmRQbGFjZWhvbGRlcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbmRQbGFjZWhvbGRlciA9IHRoaXMubG9jYWxEYXRlT3B0cy5yYW5nZS5lbmQgfHwgdGhpcy5wbGFjZWhvbGRlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG1lcmdlRGF0ZU9wdGlvbnMoKSB7XHJcbiAgICAgICAgdGhpcy5kYXRlT3B0cyA9IHsgLi4udGhpcy5kZWZhdWx0Q29uZmlnLCAuLi50aGlzLmJ1aWxkT3B0aW9ucygpIH07XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmRhdGVPcHRzLmRhdGVGb3JtYXQpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLl9kYXRlRm9ybWF0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGVGb3JtYXQgPSB0aGlzLmRhdGVPcHRzLmRhdGVGb3JtYXQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGVPcHRzLmRhdGVGb3JtYXQgPSB0aGlzLmRhdGVGb3JtYXQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNob3dUaW1lICYmICF0aGlzLl90aW1lRm9ybWF0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3RpbWVGb3JtYXQgPSAnSEg6bW06c3MnO1xyXG4gICAgICAgICAgICB0aGlzLmRhdGVPcHRzLnRpbWVGb3JtYXQgPSB0aGlzLl90aW1lRm9ybWF0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZGF0ZU9wdHMucmV0dXJuRm9ybWF0KSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5yZXR1cm5Gb3JtYXQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmV0dXJuRm9ybWF0ID0gdGhpcy5kYXRlT3B0cy5yZXR1cm5Gb3JtYXQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcykge1xyXG4gICAgICAgIGlmIChjaGFuZ2VzLmxvY2FsZSAmJiBjaGFuZ2VzLmxvY2FsZS5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAgICAgLy8gdGhpcy5kcC5zZXRMb2NhbGVPcHRpb25zKCk7XHJcbiAgICAgICAgICAgIHRoaXMubG9jYWxEYXRlT3B0cyA9IHRoaXMubG9jYWxlQ29uZmlnLmdldExvY2FsZU9wdGlvbnModGhpcy5sb2NhbGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY2hhbmdlcykge1xyXG4gICAgICAgICAgICBsZXQgZmxhZyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgaW5wdXRzID0gWydzaG93VGltZScsICdzaG93VHlwZScsICdkYXRlUmFuZ2UnLCAnbWF4RGF0ZScsICdtaW5EYXRlJywgJ21vbnRoUmFuZ2VWYWx1ZSddO1xyXG5cclxuXHJcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKGNoYW5nZXMpLmZvckVhY2goZSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWNoYW5nZXNbZV0uaXNGaXJzdENoYW5nZSgpICYmICh0aGlzLmRhdGVPcHRzW2VdIHx8IGlucHV0cy5pbmNsdWRlcyhlKSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzW2VdID0gY2hhbmdlc1tlXS5jdXJyZW50VmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgZmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAoZmxhZykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRlT3B0cyA9IHsgLi4udGhpcy5kZWZhdWx0Q29uZmlnLCAuLi50aGlzLmJ1aWxkT3B0aW9ucygpIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICBjaGFuZ2VzLnJlYWRvbmx5ICYmXHJcbiAgICAgICAgICAgICFjaGFuZ2VzLnJlYWRvbmx5LmN1cnJlbnRWYWx1ZSAmJlxyXG4gICAgICAgICAgICAhY2hhbmdlcy5yZWFkb25seS5maXJzdENoYW5nZSAmJlxyXG4gICAgICAgICAgICAhdGhpcy52YWx1ZSAmJlxyXG4gICAgICAgICAgICB0aGlzLnVzZURlZmF1bHRcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgdGhpcy5zZXREZWZhdWx0VmFsdWUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbmdBZnRlclZpZXdJbml0KCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9uZ0NvbnRyb2wgJiYgdGhpcy5fbmdDb250cm9sLmNvbnRyb2wpIHtcclxuICAgICAgICAgICAgdGhpcy5fdXBkYXRlT24gPSB0aGlzLl9uZ0NvbnRyb2wuY29udHJvbC51cGRhdGVPbjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX3RpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0RGVmYXVsdFZhbHVlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkRlc3Ryb3koKTogdm9pZCB7XHJcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVyKTtcclxuICAgICAgICB0aGlzLmNsb3NlU2VsZWN0b3IoKTtcclxuXHJcbiAgICAgICAgdGhpcy5vdmVyTGF5U2VydmljZS5kZXN0b3J5KHRoaXMuZWwubmF0aXZlRWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy5vdmVyTGF5U2VydmljZSA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgQEhvc3RMaXN0ZW5lcignbW91c2VlbnRlcicsIFsnJGV2ZW50J10pIG9uTW91c2VFbnRlcihldmVudCkge1xyXG4gICAgICAgIGlmICh0aGlzLnZhbHVlICYmICF0aGlzLnJlYWRvbmx5ICYmICF0aGlzLmRpc2FibGVkKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFySWNvbi5uYXRpdmVFbGVtZW50LnN0eWxlLnZpc2liaWxpdHkgPSAnJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5kYXRlT3B0cy5kYXRlUmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRhdGVPcHRzLnNob3dUaW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0FjdGl2ZVRpcCA9IHRoaXMuZWwubmF0aXZlRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCA8IDMwMDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0FjdGl2ZVRpcCA9IHRoaXMuZWwubmF0aXZlRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCA8IDE5MDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRhdGVPcHRzLnNob3dUaW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0FjdGl2ZVRpcCA9IHRoaXMuZWwubmF0aXZlRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCA8IDE3MDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0FjdGl2ZVRpcCA9IHRoaXMuZWwubmF0aXZlRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCA8IDEyMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBASG9zdExpc3RlbmVyKCdtb3VzZWxlYXZlJywgWyckZXZlbnQnXSkgb25Nb3VzZUxlYXZlKGV2ZW50KSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnJlYWRvbmx5ICYmICF0aGlzLmRpc2FibGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xlYXJJY29uLm5hdGl2ZUVsZW1lbnQuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbkJsdXIoZSkge1xyXG4gICAgICAgIHRoaXMudG90YWxGb2N1cyA9IGZhbHNlO1xyXG5cclxuICAgICAgICBsZXQgX3J1bmJsdXIgPSB0cnVlO1xyXG4gICAgICAgIGlmICh0aGlzLnZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy50cmFuc2Zvcm0odGhpcy52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB2YWxpZCA9IHRoaXMuX2lzVmFsaWQodGhpcy52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXZhbGlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhckRhdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICBfcnVuYmx1ciA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyRGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgX3J1bmJsdXIgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgdXBkYXRlTW9kZWwgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5fdmFsdWVDaGFuZ2VFbWl0dGVkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZWFsRGF0ZSA9IHRoaXMuZGF0ZUZyb20odGhpcy50cmFuc2Zvcm0odGhpcy52YWx1ZSwgdGhpcy5yZXR1cm5Gb3JtYXQpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMub25OZ01vZGVsQ2hhbmdlKHRoaXMudmFsdWUsIHJlYWxEYXRlLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMub25Nb2RlbFRvdWNoZWQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmVkaXRhYmxlICYmIF9ydW5ibHVyKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzWydpbkRhdGFncmlkJ10pIHtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZU1vZGVsKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KHVwZGF0ZU1vZGVsLCAyNTApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3ZhbHVlQ2hhbmdlRW1pdHRlZCA9IGZhbHNlO1xyXG4gICAgICAgIGlmICh0aGlzLl9tb3VzZWRvd25FdmVudCkge1xyXG4gICAgICAgICAgICB0aGlzLl9tb3VzZWRvd25FdmVudCgpO1xyXG4gICAgICAgICAgICB0aGlzLl9tb3VzZWRvd25FdmVudCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuYmx1ci5lbWl0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25Gb2N1cyhlKSB7XHJcbiAgICAgICAgdGhpcy50b3RhbEZvY3VzID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyTW91c2VEb3duSGFuZGxlKCk7XHJcbiAgICAgICAgdGhpcy5mb2N1cy5lbWl0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25JbnB1dENsaWNrKGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgaWYgKCF0aGlzLnJlYWRvbmx5ICYmICF0aGlzLmRpc2FibGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJNb3VzZURvd25IYW5kbGUoKTtcclxuICAgICAgICAgICAgdGhpcy50b2dnbGVDYWxlbmRhcihmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVnaXN0ZXJNb3VzZURvd25IYW5kbGUoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9tb3VzZWRvd25FdmVudCkge1xyXG4gICAgICAgICAgICB0aGlzLl9tb3VzZWRvd25FdmVudCA9IHRoaXMucmVuZGVyZXIubGlzdGVuKGRvY3VtZW50LCAnbW91c2Vkb3duJywgKGU6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTmFtZS50b1N0cmluZygpLmluZGV4T2YoJ1NWR0FuaW1hdGVkU3RyaW5nJykgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jbG9zZXN0KCcuZi1jbXAtZGF0ZXBpY2tlcicpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQuY2xvc2VzdCgnLmYtZGF0ZXBpY2tlci1jb250YWluZXInKSB8fCBlLnRhcmdldC5jbGFzc05hbWUuaW5kZXhPZignZi1pY29uLWRhdGUnKSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZGF0ZUlucHV0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUodGhpcy5kYXRlSW5wdXQubmF0aXZlRWxlbWVudCwgJ3Vuc2VsZWN0YWJsZScsICdvbicpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXREZWZhdWx0VmFsdWUoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnJlYWRvbmx5ICYmICF0aGlzLnZhbHVlICYmIHRoaXMudXNlRGVmYXVsdCkge1xyXG4gICAgICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICBsZXQgbm93VmFsdWUgPSAnJztcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmRhdGVPcHRzLmRhdGVSYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgbm93VmFsdWUgPSB0aGlzLmRhdGVUbyhub3cpO1xyXG5cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG5vd1ZhbHVlID1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGVUbyhub3cpICtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGVSYW5nZURhdGVzRGVsaW1pdGVyICtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGVUbyhuZXcgRGF0ZShub3cuc2V0TW9udGgobm93LmdldE1vbnRoKCkgKyAxKSkpO1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5kYXRlUGljZWtyU2VydmljZS52YWxpZGF0ZShub3dWYWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSBub3dWYWx1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMub25OZ01vZGVsQ2hhbmdlKHRoaXMudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbk1vZGVsVG91Y2hlZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNsZWFyRGF0ZSgkZXZlbnQ6IE1vdXNlRXZlbnQgPSBudWxsKSB7XHJcbiAgICAgICAgaWYgKCRldmVudCkge1xyXG4gICAgICAgICAgICAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9TRUxFQ1RfREFURV8gPSBudWxsO1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMuZGlzYWJsZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5fcmVhbFJhbmdlVmFsdWUgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLl9yZWFsVmFsdWUgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLm9uRGF0ZUNoYW5nZWQoe1xyXG4gICAgICAgICAgICAgICAgaXNSYW5nZTogdGhpcy5kYXRlT3B0cy5kYXRlUmFuZ2UsXHJcbiAgICAgICAgICAgICAgICBzaW5nbGVEYXRlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZTogdGhpcy51dGlsU2VydmljZS5yZXNldERhdGUoKSxcclxuICAgICAgICAgICAgICAgICAgICBqc0RhdGU6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkOiBFTVBUWV9TVFIsXHJcbiAgICAgICAgICAgICAgICAgICAgZXBvYzogMFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGRhdGVSYW5nZToge1xyXG4gICAgICAgICAgICAgICAgICAgIGJlZ2luRGF0ZTogdGhpcy51dGlsU2VydmljZS5yZXNldERhdGUoKSxcclxuICAgICAgICAgICAgICAgICAgICBiZWdpbkpzRGF0ZTogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBiZWdpbkVwb2M6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgZW5kRGF0ZTogdGhpcy51dGlsU2VydmljZS5yZXNldERhdGUoKSxcclxuICAgICAgICAgICAgICAgICAgICBlbmRKc0RhdGU6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgZW5kRXBvYzogMCxcclxuICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWQ6IEVNUFRZX1NUUlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZVNlbGVjdG9yKENhbFRvZ2dsZS5DbG9zZUJ5Q2FsQnRuKTtcclxuICAgICAgICAgICAgdGhpcy5vbk1vZGVsQ2hhbmdlKG51bGwpO1xyXG4gICAgICAgICAgICB0aGlzLmNsZWFyLmVtaXQoKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuY2xlYXJJY29uKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFySWNvbi5uYXRpdmVFbGVtZW50LnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvblNpbmdsZUlucHV0TmdNb2RlbENoYW5nZSgkZXZlbnQpIHtcclxuICAgICAgICB0aGlzLnZhbHVlID0gJGV2ZW50IHx8ICcnO1xyXG4gICAgICAgIHRoaXMuX3JlYWxWYWx1ZSA9IHRoaXMudmFsdWUgPyB0aGlzLmRhdGVGcm9tKCRldmVudCkgOiAnJztcclxuICAgICAgICB0aGlzLmNsb3NlU2VsZWN0b3IoKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgb25OZ01vZGVsQ2hhbmdlKHZhbHVlOiBhbnksIHJlYWxkYXRlID0gbnVsbCwgZW1pdFZhbHVlQ2hhbmdlID0gZmFsc2UpIHtcclxuICAgICAgICAvLyB0aGlzLnZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgaWYgKHRoaXMuZGF0ZVJhbmdlIHx8IHRoaXMuc2hvd1R5cGUgPT0gU2hvd1R5cGUuc2VsZWN0V2Vlaykge1xyXG5cclxuICAgICAgICAgICAgY29uc3QgdG1wQXJyID0gdmFsdWUgPyB2YWx1ZS5zcGxpdCh0aGlzLmRhdGVSYW5nZURhdGVzRGVsaW1pdGVyKSA6IFsnJywgJyddO1xyXG4gICAgICAgICAgICBjb25zdCBfYmVnaW5WYWx1ZSA9IHRoaXMudHJhbnNmb3JtKHRtcEFyclswXSwgdGhpcy5yZXR1cm5Gb3JtYXQpO1xyXG4gICAgICAgICAgICBjb25zdCBfZW5kVmFsdWUgPSB0aGlzLnRyYW5zZm9ybSh0bXBBcnJbMV0sIHRoaXMucmV0dXJuRm9ybWF0KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2JlZ2luVmFsdWUgPSB0aGlzLnRyYW5zZm9ybSh0bXBBcnJbMF0pO1xyXG4gICAgICAgICAgICB0aGlzLl9lbmRWYWx1ZSA9IHRoaXMudHJhbnNmb3JtKHRtcEFyclsxXSk7XHJcblxyXG5cclxuICAgICAgICAgICAgdmFsdWUgPSBfYmVnaW5WYWx1ZSAmJiBfZW5kVmFsdWUgPyBfYmVnaW5WYWx1ZSArIHRoaXMuZGF0ZVJhbmdlRGF0ZXNEZWxpbWl0ZXIgKyBfZW5kVmFsdWUgOiAnJztcclxuICAgICAgICAgICAgdGhpcy5fcmVhbFJhbmdlVmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgdGhpcy5vbk1vZGVsQ2hhbmdlKHZhbHVlKTtcclxuICAgICAgICAgICAgdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgICAgICB0aGlzLmJlZ2luVmFsdWVDaGFuZ2UuZW1pdCh0aGlzLl9iZWdpblZhbHVlKTtcclxuICAgICAgICAgICAgdGhpcy5lbmRWYWx1ZUNoYW5nZS5lbWl0KHRoaXMuX2VuZFZhbHVlKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHAgPSB7XHJcbiAgICAgICAgICAgICAgICBkYXRlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgZm9ybWF0dGVkOiB0aGlzLnZhbHVlLFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuRm9ybWF0dGVkOiB0aGlzLl9yZWFsUmFuZ2VWYWx1ZSxcclxuICAgICAgICAgICAgICAgIGNtcFJlZjogdGhpc1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdGhpcy52YWx1ZUNoYW5nZS5lbWl0KHApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICBpZiAodmFsdWUgPT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9vbk1vZGVsQ2hhbmdlKG51bGwsIGVtaXRWYWx1ZUNoYW5nZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChyZWFsZGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcmVhbFZhbHVlID0gdGhpcy5nZXRSZWFsUmV0dXJuRm9ybWF0dGVkKHJlYWxkYXRlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX29uTW9kZWxDaGFuZ2UodGhpcy5fcmVhbFZhbHVlLCBlbWl0VmFsdWVDaGFuZ2UpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRhdGVJbnB1dCAmJiB0aGlzLmRhdGVJbnB1dC5uYXRpdmVFbGVtZW50LnZhbHVlICE9PSB0aGlzLnZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRQcm9wZXJ0eSh0aGlzLmRhdGVJbnB1dC5uYXRpdmVFbGVtZW50LCAndmFsdWUnLCB0aGlzLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9pc1ZhbGlkKHZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlYWxWYWx1ZSA9IHRoaXMuZ2V0UmVhbFJldHVybkZvcm1hdHRlZChyZWFsZGF0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZGF0ZUlucHV0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0UHJvcGVydHkodGhpcy5kYXRlSW5wdXQubmF0aXZlRWxlbWVudCwgJ3ZhbHVlJywgdGhpcy52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX29uTW9kZWxDaGFuZ2UodGhpcy5fcmVhbFZhbHVlLCBlbWl0VmFsdWVDaGFuZ2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9vbk1vZGVsQ2hhbmdlKHJlYWxWYWx1ZSwgZW1pdCkge1xyXG4gICAgICAgIHRoaXMuX3JlYWxWYWx1ZSA9IHJlYWxWYWx1ZTtcclxuICAgICAgICB0aGlzLm9uTW9kZWxDaGFuZ2UocmVhbFZhbHVlKTtcclxuICAgICAgICBpZiAoZW1pdCkge1xyXG4gICAgICAgICAgICBjb25zdCBwID0ge1xyXG4gICAgICAgICAgICAgICAgZGF0ZTogdGhpcy51dGlsU2VydmljZS5pc0RhdGVWYWxpZCh0aGlzLnZhbHVlLCB0aGlzLmRhdGVPcHRzLCB0cnVlKSxcclxuICAgICAgICAgICAgICAgIGZvcm1hdHRlZDogdGhpcy52YWx1ZSxcclxuICAgICAgICAgICAgICAgIHJldHVybkZvcm1hdHRlZDogcmVhbFZhbHVlLFxyXG4gICAgICAgICAgICAgICAgY21wUmVmOiB0aGlzXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy52YWx1ZUNoYW5nZS5vYnNlcnZlcnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy53aGVuVmFsdWVDaGFuZ2VkVGhlbkNsb3NlU2VsZWN0b3JQYW5lbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VTZWxlY3RvcigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMudmFsdWVDaGFuZ2UuZW1pdChwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJpdmF0ZSBnZXRSZWFsUmV0dXJuRm9ybWF0dGVkKHJlYWxkYXRlOiBhbnkpIHtcclxuXHJcbiAgICAgICAgaWYgKHJlYWxkYXRlKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnJldHVyblR5cGUgPT09ICdEYXRlJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlYWxkYXRlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucmV0dXJuRm9ybWF0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZHRTZXJ2aWNlLmZvcm1hdFRvKHJlYWxkYXRlLCB0aGlzLnJldHVybkZvcm1hdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVhbGRhdGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRlRnJvbSh0aGlzLl9yZWFsVmFsdWUgfHwgdGhpcy52YWx1ZSkgfHwgJyc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uRGF0ZVJhbmdlSW5wdXRCbHVyKGV2ZW50OiBhbnkpIHtcclxuICAgICAgICB0aGlzLnNldFZhbHVlKHRoaXMuX2JlZ2luVmFsdWUgKyB0aGlzLmRhdGVSYW5nZURhdGVzRGVsaW1pdGVyICsgdGhpcy5fZW5kVmFsdWUpO1xyXG4gICAgICAgIHRoaXMub25OZ01vZGVsQ2hhbmdlKHRoaXMuX3JlYWxSYW5nZVZhbHVlIHx8IHRoaXMudmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIG9wZW5DYWxlbmRhcigpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgdmFsID0gdGhpcy5fcmVhbFZhbHVlO1xyXG4gICAgICAgIGlmICh0aGlzLmRhdGVSYW5nZSkge1xyXG4gICAgICAgICAgICB2YWwgPSB0aGlzLl9yZWFsUmFuZ2VWYWx1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5yZXR1cm5UeXBlID09PSAnRGF0ZScpIHtcclxuICAgICAgICAgICAgICAgIHZhbCA9IHRoaXMudHJhbnNmb3JtKHZhbCwgdGhpcy5yZXR1cm5Gb3JtYXQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5jUmVmID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY1JlZiA9IHRoaXMuY2FsZW5kYXJSZWYuY3JlYXRlQ29tcG9uZW50KFxyXG4gICAgICAgICAgICAgICAgdGhpcy5jZnIucmVzb2x2ZUNvbXBvbmVudEZhY3RvcnkoQ2FsZW5kYXJDb21wb25lbnQpXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmRhdGVQaWNla3JTZXJ2aWNlLmFwcGVuZFNlbGVjdG9yKHRoaXMuY1JlZi5sb2NhdGlvbi5uYXRpdmVFbGVtZW50KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZGF0ZVBpY2VrclNlcnZpY2UucmVnaXN0ZXJTY3JvbGxFdmVudCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlU2VsZWN0b3IoKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNSZWYuaW5zdGFuY2UuaW5pdGlhbGl6ZShcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0ZU9wdHMsXHJcbiAgICAgICAgICAgICAgICAnJyxcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0ZVBpY2VrclNlcnZpY2UuZ2V0U2VsZWN0b3JQb3NpdGlvbih0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsIHRoaXMuY1JlZiksXHJcbiAgICAgICAgICAgICAgICB2YWwsXHJcbiAgICAgICAgICAgICAgICAoZG06IElNeURhdGVNb2RlbCwgY2xvc2U6IGJvb2xlYW4pID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZGF0ZU9wdHMuZGF0ZVJhbmdlICYmIHRoaXMuc2hvd1RpbWUgJiYgZG0uZGF0ZVJhbmdlLmVuZEpzRGF0ZSA8IGRtLmRhdGVSYW5nZS5iZWdpbkpzRGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zdCB7IHllYXI6IGJlZ2luWWVhciwgbW9udGg6IGJlZ2luTW9udGgsICBkYXk6IGJlZ2luRGF5ICB9ID0gey4uLmRtLmRhdGVSYW5nZS5iZWdpbkRhdGV9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zdCB7IHllYXI6IGVuZFllYXIsIG1vbnRoOiBlbmRNb250aCwgIGRheTogZW5kRGF5ICB9ID0gey4uLmRtLmRhdGVSYW5nZS5lbmREYXRlfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXJyb3IgbWVzc2FnZTogIFRoZSBlbmQgdGltZSBtdXN0IG5vdCBiZSBlYXJsaWVyIHRoYW4gdGhlIHN0YXJ0IHRpbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXJyb3IgbWVzc2FnZTogIOe1kOadn+aZgumWk+S4jeW+l+aXqeS6jumWi+Wni+aZgumWk1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtc2cgPSB0aGlzLmxvY2FsRGF0ZU9wdHMubWVzc2FnZVsnMTAxJ107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm5vdGlmeVNlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnlTZXIud2FybmluZyhtc2cpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQobXNnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRGF0ZUNoYW5nZWQoZG0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjbG9zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlU2VsZWN0b3IoQ2FsVG9nZ2xlLkNsb3NlQnlEYXRlU2VsKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgKGN2YzogSU15Q2FsZW5kYXJWaWV3Q2hhbmdlZCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuZW1pdENhbGVuZGFyQ2hhbmdlZChjdmMpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIChyZHM6IElNeVJhbmdlRGF0ZVNlbGVjdGlvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuZW1pdFJhbmdlRGF0ZVNlbGVjdGlvbihyZHMpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlU2VsZWN0b3IoQ2FsVG9nZ2xlLkNsb3NlQnlFc2MpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgLy8gdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0ZVBpY2VrclNlcnZpY2UuYXBwZW5kU2VsZWN0b3IodGhpcy5jUmVmLmxvY2F0aW9uLm5hdGl2ZUVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5vdmVyTGF5U2VydmljZS5yZWdpc3Rlck1vdXNlRXZlbnQodGhpcy5lbC5uYXRpdmVFbGVtZW50LCAoZTogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jUmVmICYmIHRoaXMuY1JlZi5sb2NhdGlvbi5uYXRpdmVFbGVtZW50LmNvbnRhaW5zKGUudGFyZ2V0KSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2VTZWxlY3RvcigpO1xyXG4gICAgICAgIH0sIHsgb25seVRvcFdpbmRvdzogdHJ1ZX0pO1xyXG5cclxuICAgICAgICB0aGlzLmNSZWYuY2hhbmdlRGV0ZWN0b3JSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIC8vIHRoaXMucHJldmVudENsb3NlID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBjbG9zZVNlbGVjdG9yKHJlYXNvbj86IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLmNSZWYgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5jYWxlbmRhclJlZi5yZW1vdmUodGhpcy5jYWxlbmRhclJlZi5pbmRleE9mKHRoaXMuY1JlZi5ob3N0VmlldykpO1xyXG4gICAgICAgICAgICB0aGlzLmNSZWYgPSBudWxsO1xyXG4gICAgICAgICAgICAvLyB0aGlzLmNkci5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kYXRlLW92ZXJsYXktY29udGFpbmVyJyk7XHJcbiAgICAgICAgICAgIGlmIChjb250YWluZXIuY2hpbGRFbGVtZW50Q291bnQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5yZW1vdmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKGNvbnRhaW5lciwgJ3BvaW50ZXItZXZlbnRzJywgJycpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnRvdGFsRm9jdXMgPSBmYWxzZTtcclxuICAgICAgICBpZiAodGhpcy5kYXRlT3B0cy5kYXRlUmFuZ2UpIHtcclxuICAgICAgICAgICAgdGhpcy5iZWdpbkZvY3VzID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuZW5kRm9jdXMgPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmNsb3NlQ2FsZW5kYXJIYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2VDYWxlbmRhckhhbmRsZXIoKTtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZUNhbGVuZGFySGFuZGxlciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5kYXRlUGljZWtyU2VydmljZSkge1xyXG4gICAgICAgICAgICB0aGlzLmRhdGVQaWNla3JTZXJ2aWNlLnJlbW92ZU1vdXNlRXZlbnQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMub3ZlckxheVNlcnZpY2UuZGVzdG9yeSh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQpO1xyXG4gICAgfVxyXG4gICAgdG9nZ2xlQ2FsZW5kYXIoY2xvc2U6IGJvb2xlYW4sIGVtaXQgPSB0cnVlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGlzYWJsZWQpIHtcclxuICAgICAgICAgICAgdGhpcy50b3RhbEZvY3VzID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRhdGVPcHRzLmRhdGVSYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5iZWdpbkZvY3VzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVuZEZvY3VzID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5jUmVmID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5jbG9zZUNhbGVuZGFySGFuZGxlcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZUNhbGVuZGFySGFuZGxlciA9IHRoaXMucmVuZGVyZXIubGlzdGVuKGRvY3VtZW50LCBDTElDSywgKCkgPT4gdGhpcy5jbG9zZVNlbGVjdG9yKENhbFRvZ2dsZS5DbG9zZUJ5T3V0Q2xpY2spKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnRvdGFsRm9jdXMgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLm9wZW5DYWxlbmRhcigpO1xyXG4gICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGF0ZS1vdmVybGF5LWNvbnRhaW5lcicpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKGNvbnRhaW5lciwgJ3BvaW50ZXItZXZlbnRzJywgJ2F1dG8nKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsZXQgZmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kYXRlLW92ZXJsYXktY29udGFpbmVyJyk7XHJcbiAgICAgICAgICAgIGlmIChjb250YWluZXIgJiYgdGhpcy5jUmVmLmxvY2F0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY29udGFpbmVyLmhhc0NoaWxkTm9kZXMoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5jaGlsZE5vZGVzLmZvckVhY2goZWwgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWwgPT09IHRoaXMuY1JlZi5sb2NhdGlvbi5uYXRpdmVFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbGFnID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZmxhZykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZShjb250YWluZXIsICdwb2ludGVyLWV2ZW50cycsICdhdXRvJyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRvdGFsRm9jdXMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vcGVuQ2FsZW5kYXIoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudG90YWxGb2N1cyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRhdGVPcHRzLmRhdGVSYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYmVnaW5Gb2N1cyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW5kRm9jdXMgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoQ0xJQ0ssIHRoaXMub25DbGlja0hpZGRlbik7XHJcbiAgICAgICAgICAgICAgICBjbG9zZSAmJiB0aGlzLmNsb3NlU2VsZWN0b3IoQ2FsVG9nZ2xlLkNsb3NlQnlDYWxCdG4pO1xyXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5yZW5kZXJlci5zZXRTdHlsZShjb250YWluZXIsICdwb2ludGVyLWV2ZW50cycsICcnKVxyXG4gICAgICAgICAgICAgICAgaWYgKGVtaXQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlLmVtaXQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbkRhdGVDaGFuZ2VkKGV2ZW50OiBJTXlEYXRlTW9kZWwpIHtcclxuICAgICAgICB0aGlzLl9TRUxFQ1RfREFURV8gPSBldmVudDtcclxuICAgICAgICBsZXQgdmFsQ2hhbmdlUGFyYW1zOiBhbnkgPSAnJztcclxuICAgICAgICBpZiAoZXZlbnQuc2luZ2xlRGF0ZSkge1xyXG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gZXZlbnQuc2luZ2xlRGF0ZS5mb3JtYXR0ZWQ7XHJcbiAgICAgICAgICAgIHRoaXMuZm9ybWF0ZWRWYWx1ZSA9IGV2ZW50LnNpbmdsZURhdGUuZm9ybWF0dGVkO1xyXG4gICAgICAgICAgICBjb25zdCByZXR1cm5Gb3JtYXR0ZWQgPSB0aGlzLmdldFJlYWxSZXR1cm5Gb3JtYXR0ZWQoZXZlbnQuc2luZ2xlRGF0ZS5qc0RhdGUpO1xyXG4gICAgICAgICAgICB2YWxDaGFuZ2VQYXJhbXMgPSB7IC4uLmV2ZW50LnNpbmdsZURhdGUsIGZvcm1hdHRlZDogZXZlbnQuc2luZ2xlRGF0ZS5mb3JtYXR0ZWQsIHJldHVybkZvcm1hdHRlZCB9O1xyXG5cclxuICAgICAgICAgICAgY29uc3QgeyB5ZWFyLCBtb250aCwgZGF5LCBob3VyLCBtaW51dGUsIHNlY29uZCB9ID0gZXZlbnQuc2luZ2xlRGF0ZS5kYXRlO1xyXG5cclxuICAgICAgICAgICAgaWYgKG1vbnRoICYmICh0aGlzLmRhdGVGb3JtYXQuaW5kZXhPZigneXl5eScpID09PSAtMSB8fCB0aGlzLmRhdGVGb3JtYXQuaW5kZXhPZignZGQnKSA9PT0gLTEpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZCA9IG5ldyBEYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgIHllYXIgfHwgbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpLFxyXG4gICAgICAgICAgICAgICAgICAgIG1vbnRoIC0gMSxcclxuICAgICAgICAgICAgICAgICAgICBkYXkgfHwgMSxcclxuICAgICAgICAgICAgICAgICAgICBob3VyIHx8IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgbWludXRlIHx8IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgc2Vjb25kIHx8IDBcclxuICAgICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAgICAgZXZlbnQuc2luZ2xlRGF0ZS5qc0RhdGUgPSBuZDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5vbk5nTW9kZWxDaGFuZ2UocmV0dXJuRm9ybWF0dGVkLCBldmVudC5zaW5nbGVEYXRlLmpzRGF0ZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChldmVudC5kYXRlUmFuZ2UpIHtcclxuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IGV2ZW50LmRhdGVSYW5nZS5mb3JtYXR0ZWQ7XHJcbiAgICAgICAgICAgIHRoaXMuZm9ybWF0ZWRWYWx1ZSA9IGV2ZW50LmRhdGVSYW5nZS5mb3JtYXR0ZWQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHJldHVybkZvcm1hdHRlZCA9IGV2ZW50LmRhdGVSYW5nZS5yZXR1cm5Gb3JtYXR0ZWQ7XHJcbiAgICAgICAgICAgIC8vIGxldCByZXR1cm5Gb3JtYXR0ZWQgPSB0aGlzLmRhdGVGcm9tKGV2ZW50LmRhdGVSYW5nZS5yZXR1cm5Gb3JtYXR0ZWQpO1xyXG4gICAgICAgICAgICB2YWxDaGFuZ2VQYXJhbXMgPSB7IC4uLmV2ZW50LmRhdGVSYW5nZSwgZm9ybWF0dGVkOiBldmVudC5kYXRlUmFuZ2UuZm9ybWF0dGVkLCByZXR1cm5Gb3JtYXR0ZWQgfTtcclxuICAgICAgICAgICAgdGhpcy5vbk5nTW9kZWxDaGFuZ2UocmV0dXJuRm9ybWF0dGVkLCBldmVudC5kYXRlUmFuZ2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm9uTW9kZWxUb3VjaGVkKCk7XHJcbiAgICAgICAgdGhpcy5fdmFsdWVDaGFuZ2VFbWl0dGVkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlLmVtaXQodmFsQ2hhbmdlUGFyYW1zKTtcclxuICAgIH1cclxuXHJcbiAgICBidWlsZE9wdGlvbnMoKSB7XHJcbiAgICAgICAgbGV0IGRhdGVPcHRzOiBhbnk7XHJcbiAgICAgICAgaWYgKCF0aGlzLmxvY2FsRGF0ZU9wdHMpIHtcclxuICAgICAgICAgICAgdGhpcy5sb2NhbERhdGVPcHRzID0gdGhpcy5sb2NhbGVDb25maWcuZ2V0TG9jYWxlT3B0aW9ucyh0aGlzLmxvY2FsZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5zaG93VHlwZSA9PT0gU2hvd1R5cGUubm9EYXRlQW5kTW9udGgpIHtcclxuICAgICAgICAgICAgdGhpcy5sb2NhbERhdGVPcHRzLmRhdGVGb3JtYXQgPSAneXl5eSc7XHJcbiAgICAgICAgICAgIHRoaXMubG9jYWxEYXRlT3B0cy5yZXR1cm5Gb3JtYXQgPSAneXl5eSc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBfc2hvd1RpbWUgPSAoTnVtYmVyKHRoaXMuc2hvd1R5cGUpID09PSBTaG93VHlwZS5hbGwpID8gdGhpcy5zaG93VGltZSA6IGZhbHNlO1xyXG5cclxuICAgICAgICBkYXRlT3B0cyA9IHtcclxuICAgICAgICAgICAgZGF0ZVJhbmdlOiB0aGlzLmRhdGVSYW5nZSxcclxuICAgICAgICAgICAgc2hvd1RpbWU6IF9zaG93VGltZSxcclxuICAgICAgICAgICAgc2hvd1R5cGU6IE51bWJlcih0aGlzLnNob3dUeXBlKSxcclxuICAgICAgICAgICAgZGF0ZUZvcm1hdDogdGhpcy5kYXRlRm9ybWF0ID8gdGhpcy5kYXRlRm9ybWF0IDogdGhpcy5sb2NhbERhdGVPcHRzLmRhdGVGb3JtYXQsXHJcbiAgICAgICAgICAgIHJldHVybkZvcm1hdDogdGhpcy5yZXR1cm5Gb3JtYXQgPyB0aGlzLnJldHVybkZvcm1hdCA6IHRoaXMubG9jYWxEYXRlT3B0cy5yZXR1cm5Gb3JtYXQsXHJcbiAgICAgICAgICAgIG1pblllYXI6IHRoaXMuX21pbkRhdGUueWVhcixcclxuICAgICAgICAgICAgbWF4WWVhcjogdGhpcy5fbWF4RGF0ZS55ZWFyLFxyXG4gICAgICAgICAgICBoaWdobGlnaHREYXRlczogdGhpcy5oaWdobGlnaHREYXRlcyxcclxuICAgICAgICAgICAgZGlzYWJsZURhdGVzOiB0aGlzLmRpc2FibGVEYXRlcyxcclxuICAgICAgICAgICAgc2hvd1dlZWtOdW1iZXJzOiB0aGlzLnNob3dXZWVrTnVtYmVycyxcclxuICAgICAgICAgICAgZGlzYWJsZURhdGVSYW5nZXM6IFtcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBiZWdpbjogdGhpcy5kaXNhYmxlRGF0ZVJhbmdlc0JlZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgIGVuZDogdGhpcy5kaXNhYmxlRGF0ZVJhbmdlc0VuZFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICBkaXNhYmxlVW50aWw6IHRoaXMuX21pbkRhdGUsXHJcbiAgICAgICAgICAgIGRpc2FibGVTaW5jZTogdGhpcy5fbWF4RGF0ZSxcclxuICAgICAgICAgICAgZGlzYWJsZVdlZWtkYXlzOiB0aGlzLmRpc2FibGVXZWVrZGF5cyxcclxuICAgICAgICAgICAgbWFya0RhdGVzOiBbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZXM6IHRoaXMubWFya0RhdGVzLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiB0aGlzLm1hcmtEYXRlc0NvbG9yXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgIG1hcmtXZWVrZW5kczoge1xyXG4gICAgICAgICAgICAgICAgbWFya2VkOiB0aGlzLmlzTWFya1dlZWtlbmRzLFxyXG4gICAgICAgICAgICAgICAgY29sb3I6IHRoaXMubWFya1dlZWtlbmRzQ29sb3JcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZGF0ZVJhbmdlRGF0ZXNEZWxpbWl0ZXI6IHRoaXMuZGF0ZVJhbmdlRGF0ZXNEZWxpbWl0ZXIsXHJcbiAgICAgICAgICAgIHNob3J0Y3V0czogdGhpcy5zaG9ydGN1dHMsXHJcbiAgICAgICAgICAgIHRpbWVGb3JtYXQ6IHRoaXMuX3RpbWVGb3JtYXQsXHJcbiAgICAgICAgICAgIG1vbnRoUmFuZ2VWYWx1ZTogdGhpcy5tb250aFJhbmdlVmFsdWUsXHJcbiAgICAgICAgICAgIHZpZXdUeXBlOiB0aGlzLnZpZXdUeXBlXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgc3dpdGNoIChOdW1iZXIodGhpcy5zaG93VHlwZSkpIHtcclxuICAgICAgICAgICAgY2FzZSBTaG93VHlwZS5ub0RhdGU6XHJcbiAgICAgICAgICAgICAgICBkYXRlT3B0cy5kZWZhdWx0VmlldyA9IERlZmF1bHRWaWV3Lk1vbnRoO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgU2hvd1R5cGUubm9EYXRlQW5kTW9udGg6XHJcbiAgICAgICAgICAgICAgICBkYXRlT3B0cy5kZWZhdWx0VmlldyA9IERlZmF1bHRWaWV3LlllYXI7XHJcbiAgICAgICAgICAgICAgICAvLyBkYXRlT3B0cy5kYXRlRm9ybWF0ID0gJ3l5eXknO1xyXG4gICAgICAgICAgICAgICAgLy8gZGF0ZU9wdHMucmV0dXJuRm9ybWF0ID0gJ3l5eXknO1xyXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5kYXRlRm9ybWF0ID0gJ3l5eXknO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgU2hvd1R5cGUuc2VsZWN0V2VlazpcclxuICAgICAgICAgICAgICAgIGRhdGVPcHRzLnNob3dXZWVrTnVtYmVycyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBkYXRlT3B0cy5kYXRlUmFuZ2UgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgZGF0ZU9wdHMuZmlyc3REYXlPZldlZWsgPSAnbW8nO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIC8vIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIC8vIHRoaXMucmV0dXJuVHlwZSA9ICdTdHJpbmcnO1xyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHsgLi4udGhpcy5sb2NhbERhdGVPcHRzLCAuLi5kYXRlT3B0cyB9O1xyXG4gICAgfVxyXG5cclxuICAgIGRhdGVUbyhkOiBhbnkpIHtcclxuICAgICAgICBjb25zdCBkYXRlRm9ybWF0ID0gdGhpcy5kYXRlT3B0cy5kYXRlRm9ybWF0ID8gdGhpcy5kYXRlT3B0cy5kYXRlRm9ybWF0IDogdGhpcy5kZWZhdWx0Q29uZmlnLmRhdGVGb3JtYXQ7XHJcbiAgICAgICAgY29uc3QgbW9udGhMYWJlbHMgPSB0aGlzLmRhdGVPcHRzLm1vbnRoTGFiZWxzID8gdGhpcy5kYXRlT3B0cy5tb250aExhYmVscyA6IHRoaXMuZGVmYXVsdENvbmZpZy5tb250aExhYmVscztcclxuICAgICAgICBjb25zdCBzaG93VGltZSA9IHRoaXMuZGF0ZU9wdHMuc2hvd1RpbWUgPyB0aGlzLmRhdGVPcHRzLnNob3dUaW1lIDogdGhpcy5kZWZhdWx0Q29uZmlnLnNob3dUaW1lO1xyXG4gICAgICAgIGNvbnN0IHllYXIgPSBkLmdldEZ1bGxZZWFyKCk7XHJcbiAgICAgICAgY29uc3QgbW9udGggPSBkLmdldE1vbnRoKCkgKyAxO1xyXG4gICAgICAgIGNvbnN0IGRheSA9IGQuZ2V0RGF0ZSgpO1xyXG4gICAgICAgIGNvbnN0IGhvdXIgPSBkLmdldEhvdXJzKCk7XHJcbiAgICAgICAgY29uc3QgbWludXRlID0gZC5nZXRNaW51dGVzKCk7XHJcbiAgICAgICAgY29uc3Qgc2Vjb25kID0gZC5nZXRTZWNvbmRzKCk7XHJcbiAgICAgICAgbGV0IGRhdGU6IElNeURhdGU7XHJcbiAgICAgICAgaWYgKCFzaG93VGltZSkge1xyXG4gICAgICAgICAgICBkYXRlID0geyB5ZWFyLCBtb250aCwgZGF5IH07XHJcbiAgICAgICAgICAgIHRoaXMub3JpZ2luVGltZSA9IHsgaG91ciwgbWludXRlLCBzZWNvbmQgfTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBkYXRlID0geyB5ZWFyLCBtb250aCwgZGF5LCBob3VyLCBtaW51dGUsIHNlY29uZCB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy51dGlsU2VydmljZS5mb3JtYXREYXRlKGRhdGUsIGRhdGVGb3JtYXQsIG1vbnRoTGFiZWxzKTtcclxuICAgIH1cclxuICAgIC8vIOi/lOWbnuecn+WunuaXpeacnyBEYXRlIOexu+Wei1xyXG4gICAgZGF0ZUZyb20oc3RyOiBhbnksIGlnbm9yUmFuZ2UgPSBmYWxzZSkge1xyXG4gICAgICAgIGlmICghc3RyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IF90aGlzID0gdGhpcztcclxuXHJcbiAgICAgICAgY29uc3QgZGF0ZVJhbmdlID0gdGhpcy5kYXRlT3B0cy5kYXRlUmFuZ2UgPyB0aGlzLmRhdGVPcHRzLmRhdGVSYW5nZSA6IHRoaXMuZGVmYXVsdENvbmZpZy5kYXRlUmFuZ2U7XHJcbiAgICAgICAgY29uc3QgZGF0ZUZvcm1hdCA9IHRoaXMuZGF0ZU9wdHMuZGF0ZUZvcm1hdCA/IHRoaXMuZGF0ZU9wdHMuZGF0ZUZvcm1hdCA6IHRoaXMuZGVmYXVsdENvbmZpZy5kYXRlRm9ybWF0O1xyXG4gICAgICAgIGNvbnN0IHJldHVybkZvcm1hdCA9IHRoaXMuZGF0ZU9wdHMucmV0dXJuRm9ybWF0ID8gdGhpcy5kYXRlT3B0cy5yZXR1cm5Gb3JtYXQgOiB0aGlzLmRlZmF1bHRDb25maWcucmV0dXJuRm9ybWF0O1xyXG4gICAgICAgIGNvbnN0IHNob3dUaW1lID0gdGhpcy5kYXRlT3B0cy5zaG93VGltZSA/IHRoaXMuZGF0ZU9wdHMuc2hvd1RpbWUgOiB0aGlzLmRlZmF1bHRDb25maWcuc2hvd1RpbWU7XHJcbiAgICAgICAgY29uc3QgZGVsaW1ldGVyczogQXJyYXk8c3RyaW5nPiA9IHJldHVybkZvcm1hdC5tYXRjaCgvW14oRGRNbVl5KV17MSx9L2cpO1xyXG4gICAgICAgIGxldCBkYXRlVmFsdWU6IEFycmF5PElNeURhdGVGb3JtYXQ+O1xyXG4gICAgICAgIGNvbnN0IGdldFZhbHVlID0gdGhpcy51dGlsU2VydmljZS5nZXREYXRlVmFsdWU7XHJcbiAgICAgICAgaWYgKChkYXRlUmFuZ2UgfHwgdGhpcy5kYXRlT3B0cy5zaG93VHlwZSA9PT0gU2hvd1R5cGUuc2VsZWN0V2VlaykgJiYgIWlnbm9yUmFuZ2UpIHtcclxuICAgICAgICAgICAgY29uc3QgdG1wQmVnaW4gPSBzdHIuc3BsaXQodGhpcy5kYXRlUmFuZ2VEYXRlc0RlbGltaXRlcilbMF07XHJcbiAgICAgICAgICAgIGNvbnN0IHRtcEVuZCA9IHN0ci5zcGxpdCh0aGlzLmRhdGVSYW5nZURhdGVzRGVsaW1pdGVyKVsxXTtcclxuICAgICAgICAgICAgbGV0IHRtcEJlZ2luRGF0ZSA9IHRoaXMudXRpbFNlcnZpY2UuaXNEYXRlVmFsaWQodG1wQmVnaW4sIHRoaXMuZGF0ZU9wdHMsIHRydWUpO1xyXG4gICAgICAgICAgICBsZXQgdG1wRW5kRGF0ZSA9IHRoaXMudXRpbFNlcnZpY2UuaXNEYXRlVmFsaWQodG1wRW5kLCB0aGlzLmRhdGVPcHRzLCB0cnVlKTtcclxuICAgICAgICAgICAgdG1wQmVnaW5EYXRlID0gdGhpcy51dGlsU2VydmljZS5pc0luaXRpYWxpemVkRGF0ZSh0bXBCZWdpbkRhdGUpID8gdG1wQmVnaW5EYXRlIDogdGhpcy5kYXRlT3B0cy5kaXNhYmxlVW50aWw7XHJcbiAgICAgICAgICAgIHRtcEVuZERhdGUgPSB0aGlzLnV0aWxTZXJ2aWNlLmlzSW5pdGlhbGl6ZWREYXRlKHRtcEVuZERhdGUpID8gdG1wRW5kRGF0ZSA6IHRoaXMuZGF0ZU9wdHMuZGlzYWJsZVNpbmNlO1xyXG4gICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgdGhpcy51dGlsU2VydmljZS5mb3JtYXREYXRlKHRtcEJlZ2luRGF0ZSwgcmV0dXJuRm9ybWF0LCB0aGlzLmRlZmF1bHRDb25maWcubW9udGhMYWJlbHMpICtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0ZVJhbmdlRGF0ZXNEZWxpbWl0ZXIgK1xyXG4gICAgICAgICAgICAgICAgdGhpcy51dGlsU2VydmljZS5mb3JtYXREYXRlKHRtcEVuZERhdGUsIHJldHVybkZvcm1hdCwgdGhpcy5kZWZhdWx0Q29uZmlnLm1vbnRoTGFiZWxzKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnJldHVyblR5cGUgPT09ICdEYXRlJykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHN0ciAmJiBzdHIgaW5zdGFuY2VvZiBEYXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0cjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBjb252ZXJ0KHN0ciwgZ2V0VmFsdWUsIHRoaXMub3JpZ2luVGltZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0bXBEYXRlID0gdGhpcy51dGlsU2VydmljZS5pc0RhdGVWYWxpZChzdHIsIHRoaXMuZGF0ZU9wdHMsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudXRpbFNlcnZpY2UuZm9ybWF0RGF0ZSh0bXBEYXRlLCByZXR1cm5Gb3JtYXQsIHRoaXMuZGVmYXVsdENvbmZpZy5tb250aExhYmVscyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGNvbnZlcnQodiwgX2dldFZhbHVlOiBhbnksIG9yaWdpblRpbWUgPSB7IGhvdXI6IDAsIG1pbnV0ZTogMCwgc2Vjb25kOiAwIH0pIHtcclxuICAgICAgICAgICAgbGV0IGZtdCA9IHJldHVybkZvcm1hdDtcclxuICAgICAgICAgICAgaWYgKF90aGlzLnJldHVyblR5cGUgPT09ICdEYXRlJykge1xyXG4gICAgICAgICAgICAgICAgZm10ID0gJ3l5eXktTU0tZGQnICsgKHNob3dUaW1lID8gJyBISDptbTpzcycgOiAnJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHNob3dUaW1lKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRlID0gdi5zcGxpdCgnICcpWzBdO1xyXG4gICAgICAgICAgICAgICAgbGV0IHRpbWUgPSB2LnNwbGl0KCcgJylbMV07XHJcblxyXG4gICAgICAgICAgICAgICAgZGF0ZVZhbHVlID0gX2dldFZhbHVlKGRhdGUsIGZtdCwgZGVsaW1ldGVycyk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGltZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRpbWUgPSB0aW1lLnJlcGxhY2UoL1vml7Ys5YiGXS9nLCAnOicpLnJlcGxhY2UoL1vnp5JdLywgJycpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IFtoLCBtLCBzXSA9IHRpbWUuc3BsaXQoJzonKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBob3VyID0gaDtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBtaW51dGUgPSBtO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlY29uZCA9IHMgPyBzIDogJyc7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVWYWx1ZVszXSA9IHsgdmFsdWU6IGhvdXIsIGZvcm1hdDogJ2hoJyB9O1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVWYWx1ZVs0XSA9IHsgdmFsdWU6IG1pbnV0ZSwgZm9ybWF0OiAnbW0nIH07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlY29uZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlVmFsdWVbNV0gPSB7IHZhbHVlOiBzZWNvbmQsIGZvcm1hdDogJ3NzJyB9O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGUgPSB2LnNwbGl0KCcgJylbMF07XHJcbiAgICAgICAgICAgICAgICBkYXRlVmFsdWUgPSBfZ2V0VmFsdWUoZGF0ZSwgZm10LCBkZWxpbWV0ZXJzKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgIGxldCB5ZWFyID0gTnVtYmVyKGRhdGVWYWx1ZVswXSA/IGRhdGVWYWx1ZVswXS52YWx1ZSA6IDE5NzApO1xyXG4gICAgICAgICAgICBjb25zdCB5ZWFyVmFsdWUgPSBkYXRlVmFsdWVbMF07XHJcbiAgICAgICAgICAgIGlmICh5ZWFyVmFsdWUuZm9ybWF0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXllYXJWYWx1ZS52YWx1ZSB8fCB5ZWFyVmFsdWUudmFsdWUubGVuZ3RoICE9PSB5ZWFyVmFsdWUuZm9ybWF0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHllYXIgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBtb250aCA9IE51bWJlcihkYXRlVmFsdWVbMV0gPyBkYXRlVmFsdWVbMV0udmFsdWUgOiAxKSAtIDE7XHJcbiAgICAgICAgICAgIGNvbnN0IGRheSA9IE51bWJlcihkYXRlVmFsdWVbMl0gPyBkYXRlVmFsdWVbMl0udmFsdWUgOiAxKTtcclxuICAgICAgICAgICAgY29uc3QgX2hvdXIgPSBkYXRlVmFsdWVbM10gPyBOdW1iZXIoZGF0ZVZhbHVlWzNdLnZhbHVlKSA6IG9yaWdpblRpbWUuaG91cjtcclxuICAgICAgICAgICAgY29uc3QgX21pbnV0ZSA9IGRhdGVWYWx1ZVs0XSA/IE51bWJlcihkYXRlVmFsdWVbNF0udmFsdWUpIDogb3JpZ2luVGltZS5taW51dGU7XHJcbiAgICAgICAgICAgIGNvbnN0IF9zZWNvbmQgPSBkYXRlVmFsdWVbNV0gPyBOdW1iZXIoZGF0ZVZhbHVlWzVdLnZhbHVlKSA6IG9yaWdpblRpbWUuc2Vjb25kO1xyXG5cclxuICAgICAgICAgICAgaWYgKCF5ZWFyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IERhdGUoeWVhciwgbW9udGgsIGRheSwgX2hvdXIsIF9taW51dGUsIF9zZWNvbmQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0cmFuc2Zvcm0odmFsdWU6IGFueSwgX2ZtdCA9IHRoaXMuZGF0ZU9wdHMuZGF0ZUZvcm1hdCkge1xyXG4gICAgICAgIHZhbHVlID0gdmFsdWUgPyB2YWx1ZSA6ICcnO1xyXG4gICAgICAgIGNvbnN0IHsgcmV0dXJuRm9ybWF0LCBkYXRlRm9ybWF0LCBzaG93VGltZSB9ID0gdGhpcy5kYXRlT3B0cztcclxuICAgICAgICBsZXQgX3RtcERhdGUgPSBudWxsO1xyXG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIF90bXBEYXRlID0gcGFyc2UodmFsdWUsIHJldHVybkZvcm1hdCwgbmV3IERhdGUoKSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWlzVmFsaWQoX3RtcERhdGUpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fU0VMRUNUX0RBVEVfICYmIHRoaXMuX1NFTEVDVF9EQVRFXy5zaW5nbGVEYXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RtcERhdGUgPSB0aGlzLl9TRUxFQ1RfREFURV8uc2luZ2xlRGF0ZS5qc0RhdGU7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9yZWFsVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RtcERhdGUgPSAgcGFyc2UodGhpcy5fcmVhbFZhbHVlLCByZXR1cm5Gb3JtYXQsIG5ldyBEYXRlKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIERhdGUpIHtcclxuICAgICAgICAgICAgICAgIF90bXBEYXRlID0gdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGZvcm1hdHRlZFZhbCA9IHZhbHVlO1xyXG4gICAgICAgIGlmIChpc1ZhbGlkKF90bXBEYXRlKSkge1xyXG4gICAgICAgICAgICBmb3JtYXR0ZWRWYWwgPSB0aGlzLmR0U2VydmljZS5mb3JtYXRUbyhfdG1wRGF0ZSwgX2ZtdCk7XHJcbiAgICAgICAgICAgIHJldHVybiBmb3JtYXR0ZWRWYWw7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8g5YW85a655bm05pyI5pelLOW5tOaciCzlubTmoLzlvI9cclxuICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKC9b5bm0LOaciF0vZywgJy0nKS5yZXBsYWNlKC9b5pelXS8sICcnKTtcclxuICAgICAgICAgICAgaWYgKHZhbHVlW3ZhbHVlLmxlbmd0aCAtIDFdID09PSAnLScpIHtcclxuICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUuc3Vic3RyKDAsIHZhbHVlLmxlbmd0aCAtIDEpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoaXNWYWxpZChuZXcgRGF0ZSh2YWx1ZSkpKSB7XHJcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZWRWYWwgPSB0aGlzLmR0U2VydmljZS5mb3JtYXRUbyh2YWx1ZSwgX2ZtdCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5kYXRlRnJvbSh2YWx1ZSwgdHJ1ZSkgPT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0bXBEYXRlID0gdGhpcy51dGlsU2VydmljZS5pc0RhdGVWYWxpZChcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmRhdGVPcHRzLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVGb3JtYXQ6IHJldHVybkZvcm1hdFxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgZm9ybWF0dGVkVmFsID0gdGhpcy51dGlsU2VydmljZS5mb3JtYXREYXRlKHRtcERhdGUsIF9mbXQsIHRoaXMuZGVmYXVsdENvbmZpZy5tb250aExhYmVscyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZvcm1hdHRlZFZhbDtcclxuICAgIH1cclxuXHJcbiAgICBzZXRWYWx1ZSh2YWx1ZTogc3RyaW5nKSB7XHJcbiAgICAgICAgaWYgKHRoaXMudmFsdWUgIT09IHZhbHVlKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRhdGVPcHRzLmRhdGVSYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgX3RtcERhdGVBcnIgPSB2YWx1ZS5zcGxpdCh0aGlzLmRhdGVSYW5nZURhdGVzRGVsaW1pdGVyKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJlZ2luU3RyID0gX3RtcERhdGVBcnJbMF07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlbmRTdHIgPSBfdG1wRGF0ZUFyclsxXTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2JlZ2luVmFsdWUgPSB0aGlzLnRyYW5zZm9ybShiZWdpblN0cik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9lbmRWYWx1ZSA9IHRoaXMudHJhbnNmb3JtKGVuZFN0cik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy5fYmVnaW5WYWx1ZSAmJiB0aGlzLl9lbmRWYWx1ZSA/IHRoaXMuX2JlZ2luVmFsdWUgKyB0aGlzLmRhdGVSYW5nZURhdGVzRGVsaW1pdGVyICsgdGhpcy5fZW5kVmFsdWUgOiAnJztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnRyYW5zZm9ybSh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSAnJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVWYWx1ZSh2YWx1ZTogc3RyaW5nKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGF0ZU9wdHMuZGF0ZVJhbmdlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IF90bXBEYXRlQXJyID0gdmFsdWUuc3BsaXQodGhpcy5kYXRlUmFuZ2VEYXRlc0RlbGltaXRlcik7XHJcbiAgICAgICAgICAgIGNvbnN0IGJlZ2luU3RyID0gX3RtcERhdGVBcnJbMF07XHJcbiAgICAgICAgICAgIGNvbnN0IGVuZFN0ciA9IF90bXBEYXRlQXJyWzFdO1xyXG4gICAgICAgICAgICB0aGlzLl9iZWdpblZhbHVlID0gdGhpcy50cmFuc2Zvcm0oYmVnaW5TdHIpO1xyXG4gICAgICAgICAgICB0aGlzLl9lbmRWYWx1ZSA9IHRoaXMudHJhbnNmb3JtKGVuZFN0cik7XHJcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLl9iZWdpblZhbHVlICYmIHRoaXMuX2VuZFZhbHVlID8gdGhpcy5fYmVnaW5WYWx1ZSArIHRoaXMuZGF0ZVJhbmdlRGF0ZXNEZWxpbWl0ZXIgKyB0aGlzLl9lbmRWYWx1ZSA6ICcnO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnRyYW5zZm9ybSh2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldFZhbHVlQnlUeXBlKHZhbCkge1xyXG4gICAgICAgIGlmICh2YWwgaW5zdGFuY2VvZiBEYXRlKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmV0dXJuVHlwZSA9ICdEYXRlJztcclxuICAgICAgICAgICAgLy8gcmV0dXJuIHRoaXMuZGF0ZVRvKHZhbCk7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWw7XHJcbiAgICAgICAgfSBlbHNlIGlmICh2YWwgJiYgdmFsIGluc3RhbmNlb2YgT2JqZWN0KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgYmVnaW4sIGVuZCB9ID0gdmFsO1xyXG4gICAgICAgICAgICBjb25zdCBiZWdpblN0ciA9IGJlZ2luIGluc3RhbmNlb2YgRGF0ZSA/IHRoaXMuZGF0ZVRvKGJlZ2luKSA6ICcnO1xyXG4gICAgICAgICAgICBjb25zdCBlbmRTdHIgPSBiZWdpbiBpbnN0YW5jZW9mIERhdGUgPyB0aGlzLmRhdGVUbyhlbmQpIDogJyc7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnJldHVyblR5cGUgPSAnT2JqZWN0JztcclxuICAgICAgICAgICAgcmV0dXJuIGJlZ2luU3RyICYmIGVuZFN0ciA/IGJlZ2luU3RyICsgdGhpcy5kYXRlUmFuZ2VEYXRlc0RlbGltaXRlciArIGVuZFN0ciA6ICcnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodmFsICYmIHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIGlmICh2YWwuaW5kZXhPZignVCcpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgIHZhbCA9IHZhbC5yZXBsYWNlKCdUJywgJyAnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnJldHVyblR5cGUgPSAnU3RyaW5nJztcclxuICAgICAgICAgICAgcmV0dXJuIHZhbDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgd3JpdGVWYWx1ZSh2YWw6IGFueSk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuX3JlYWxWYWx1ZSA9IHZhbDtcclxuICAgICAgICBpZiAodGhpcy5kYXRlUmFuZ2UpIHtcclxuICAgICAgICAgICAgdGhpcy5fcmVhbFJhbmdlVmFsdWUgPSB2YWw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2V0VmFsdWUodGhpcy5nZXRWYWx1ZUJ5VHlwZSh2YWwpKTtcclxuICAgIH1cclxuICAgIHJlZ2lzdGVyT25DaGFuZ2UoZm46IGFueSk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMub25Nb2RlbENoYW5nZSA9IGZuO1xyXG4gICAgfVxyXG4gICAgcmVnaXN0ZXJPblRvdWNoZWQoZm46IGFueSk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMub25Nb2RlbFRvdWNoZWQgPSBmbjtcclxuICAgIH1cclxuICAgIHNldERpc2FibGVkU3RhdGU/KGlzRGlzYWJsZWQ6IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmRpc2FibGVkID0gaXNEaXNhYmxlZDtcclxuICAgIH1cclxuICAgIG9uUHJldkZvY3VzKHZhbHVlOiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5iZWdpbkZvY3VzID0gdHJ1ZTtcclxuICAgICAgICBpZiAodGhpcy5lbmRGb2N1cyA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZW5kRm9jdXMgPSAhdGhpcy5lbmRGb2N1cztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5QcmV2Rm9jdXMuZW1pdCgpO1xyXG4gICAgfVxyXG4gICAgb25OZXh0Rm9jdXModmFsdWU6IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmVuZEZvY3VzID0gdHJ1ZTtcclxuICAgICAgICBpZiAodGhpcy5iZWdpbkZvY3VzID09IHRydWUpIHtcclxuICAgICAgICAgICAgdGhpcy5iZWdpbkZvY3VzID0gIXRoaXMuYmVnaW5Gb2N1cztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5OZXh0Rm9jdXMuZW1pdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2NvbnZlcnQyZGF0ZVN0cmluZyh2YWw6IHN0cmluZywgcmVhbFZhbHVlID0gZmFsc2UpIHtcclxuICAgICAgICBpZiAodmFsKSB7XHJcbiAgICAgICAgICAgIGxldCB0ID0gdmFsLnJlcGxhY2UoL1vlubQs5pyIXS9nLCAnLScpLnJlcGxhY2UoL1vml6Us5Y+3XS9nLCAnICcpLnJlcGxhY2UoL1vml7Ys54K5LOWIhizliIbpkp9dL2csICc6JykucmVwbGFjZSgn56eSJywgJycpO1xyXG5cclxuXHJcbiAgICAgICAgICAgIGlmIChyZWFsVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG9iakRhdGUgPSB0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVZhbGlkKHZhbCwgdGhpcy5kYXRlT3B0cywgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqRGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB7IHllYXIsIG1vbnRoLCBkYXksIGhvdXIsIG1pbnV0ZSwgc2Vjb25kfSA9IG9iakRhdGU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF5ZWFyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHllYXIgPSBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghbW9udGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW9udGggPSBuZXcgRGF0ZSgpLmdldE1vbnRoKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWRheSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXkgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFob3VyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhvdXIgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFtaW51dGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWludXRlID0gMDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghc2Vjb25kKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlY29uZCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYCR7eWVhcn0tJHttb250aH0tJHtkYXl9ICR7aG91cn06JHttaW51dGV9OiR7c2Vjb25kfWA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0W3QubGVuZ3RoIC0gMV0gPT09ICctJykge1xyXG4gICAgICAgICAgICAgICAgLy8gdCA9IHQuc3Vic3RyKDAsIHQubGVuZ3RoIC0gMSk7XHJcbiAgICAgICAgICAgICAgICB0ICs9ICcwMSc7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0W3QubGVuZ3RoIC0gMV0gPT09ICc6Jykge1xyXG4gICAgICAgICAgICAgICAgdCA9IHQuc3Vic3RyKDAsIHQubGVuZ3RoIC0gMSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0LnJlcGxhY2UoL15cXHMrfFxccyskL2csICcnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB2YWw7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHByaXZhdGUgX2lzVmFsaWQodmFsdWU6IGFueSkge1xyXG4gICAgICAgIHZhbHVlID0gdGhpcy5fY29udmVydDJkYXRlU3RyaW5nKHZhbHVlKTtcclxuICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZGF0ZUZvcm1hdC5pbmRleE9mKCd5eXl5JykgPT09IC0xIHx8IHRoaXMuZGF0ZUZvcm1hdC5pbmRleE9mKCdkZCcpID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgX3RtcERhdGUgPSBwYXJzZSh0aGlzLnZhbHVlLCB0aGlzLmRhdGVGb3JtYXQsIG5ldyBEYXRlKCkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX3JlYWxWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnJldHVyblR5cGUgPT09ICdEYXRlJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXNWYWxpZCh0aGlzLl9yZWFsVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpc1ZhbGlkKG5ldyBEYXRlKHRoaXMuX2NvbnZlcnQyZGF0ZVN0cmluZyh0aGlzLl9yZWFsVmFsdWUsIHRydWUpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGQgPSB0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVZhbGlkKHZhbHVlLCB0aGlzLmRhdGVPcHRzKTtcclxuICAgICAgICAgICAgICAgIGlmIChkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGQueWVhciB8fCBkLm1vbnRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNkYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeWVhciA9IGNkYXRlLmdldEZ1bGxZZWFyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0ciA9ICh0aGlzLmRhdGVPcHRzLnJldHVybkZvcm1hdCB8fCAneXl5eS1NTS1kZCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgneXl5eScsICcnICsgKGQueWVhciB8fCB5ZWFyKSkucmVwbGFjZSgnTU0nLCAnJyArIGQubW9udGgpLnJlcGxhY2UoJ2RkJywgJzEnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlzVmFsaWQobmV3IERhdGUoc3RyKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBpc1ZhbGlkKHZhbHVlKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlZyA9IC9eXFxkezEsfSQvO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlZy50ZXN0KHZhbHVlKSAmJiB0aGlzLmRhdGVGb3JtYXQuaW5kZXhPZigneXl5eU1NZGQnKSA+IC0xKSB7IC8vIOmqjOivgeS8oOWFpeeahOagvOW8j+S4uiB5eXl5TU1kZEhIbW1zc1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IF9yID0gIHRoaXMuX2lzVmFsaWQyKHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX3IuaXNWYWxpZGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlYWxWYWx1ZSA9IHRoaXMuZ2V0UmVhbFJldHVybkZvcm1hdHRlZChfci5kYXRlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMudHJhbnNmb3JtKF9yLmRhdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3IuaXNWYWxpZGVkO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBfdG1wRGF0ZSA9IHBhcnNlKHZhbHVlLCB0aGlzLmRhdGVGb3JtYXQsIG5ldyBEYXRlKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGQgPSB0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVZhbGlkKHRoaXMudmFsdWUsIHRoaXMuZGF0ZU9wdHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpc1ZhbGlkKF90bXBEYXRlKSB8fCB0aGlzLnV0aWxTZXJ2aWNlLmlzSW5pdGlhbGl6ZWREYXRlKGQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9pc1ZhbGlkMih2YWx1ZTogc3RyaW5nKTogYW55IHtcclxuICAgICAgICBsZXQgeWVhciA9IDA7XHJcbiAgICAgICAgbGV0IG1vbnRoID0gMDtcclxuICAgICAgICBsZXQgZGF5ID0gMDtcclxuICAgICAgICBsZXQgaG91ciA9IDA7XHJcbiAgICAgICAgbGV0IG1pbnV0ZSA9IDA7XHJcbiAgICAgICAgbGV0IHNlY29uZHMgPSAwO1xyXG5cclxuICAgICAgICBjb25zdCBkZiA9IHRoaXMuZGF0ZUZvcm1hdDtcclxuXHJcbiAgICAgICAgaWYgKGRmLmluY2x1ZGVzKCd5eXl5JykpIHtcclxuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICB5ZWFyID0gK3ZhbHVlLnNsaWNlKDAsIDQpO1xyXG4gICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5zbGljZSg0KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGYuaW5jbHVkZXMoJ01NJykpIHtcclxuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBtb250aCA9ICt2YWx1ZS5zbGljZSgwLCAyKSAtIDE7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnNsaWNlKDIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChtb250aCA8IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBtb250aCA9IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGRmLmluY2x1ZGVzKCdkZCcpKSB7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgZGF5ID0gK3ZhbHVlLnNsaWNlKDAsIDIpO1xyXG4gICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5zbGljZSgyKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGYuaW5jbHVkZXMoJ0hIJykpIHtcclxuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBob3VyID0gK3ZhbHVlLnNsaWNlKDAsIDIpO1xyXG4gICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5zbGljZSgyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGYuaW5jbHVkZXMoJ21tJykpIHtcclxuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBtaW51dGUgPSArdmFsdWUuc2xpY2UoMCwgMik7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnNsaWNlKDIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChkZi5pbmNsdWRlcygnc3MnKSkge1xyXG4gICAgICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHNlY29uZHMgPSArdmFsdWUuc2xpY2UoMCwgMik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGQgPSBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgZGF5LCBob3VyLCBtaW51dGUsIHNlY29uZHMpO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGlzVmFsaWRlZDogaXNWYWxpZChkKSxcclxuICAgICAgICAgICAgZGF0ZTogZFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG59XHJcbiJdfQ==