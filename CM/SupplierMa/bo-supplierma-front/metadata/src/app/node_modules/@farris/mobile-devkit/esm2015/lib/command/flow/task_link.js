/* eslint-disable no-case-declarations */
import { VariableParseService } from '../../variable/index';
/**
 * 任务链接
 */
class TaskLink {
    /**
     * 构造函数
     */
    constructor(from, to, condition) {
        this.from = from;
        this.to = to;
        this.condition = condition;
    }
    /**
     * 是否能够
     */
    canLink(context) {
        const type = typeof this.condition;
        let canLink;
        switch (type) {
            case 'boolean':
                canLink = this.condition;
                break;
            case 'function':
                canLink = this.condition(context);
                break;
            case 'string':
                const parseService = context.viewModelContext.injector.get(VariableParseService);
                canLink = parseService.evaluate(this.condition, context);
                break;
            default:
                canLink = false;
                break;
        }
        return canLink;
    }
}
export { TaskLink };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFza19saW5rLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy9tb2JpbGUtZGV2a2l0LyIsInNvdXJjZXMiOlsibGliL2NvbW1hbmQvZmxvdy90YXNrX2xpbmsudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEseUNBQXlDO0FBQ3pDLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBVzVEOztHQUVHO0FBQ0gsTUFBTSxRQUFRO0lBb0JaOztPQUVHO0lBQ0gsWUFBWSxJQUFZLEVBQUUsRUFBVSxFQUFFLFNBQXFDO1FBQ3pFLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ2pCLElBQUksQ0FBQyxFQUFFLEdBQUssRUFBRSxDQUFDO1FBQ2YsSUFBSSxDQUFDLFNBQVMsR0FBRyxTQUFTLENBQUM7SUFDN0IsQ0FBQztJQUVEOztPQUVHO0lBQ0ksT0FBTyxDQUFDLE9BQXVCO1FBQ3BDLE1BQU0sSUFBSSxHQUFHLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQztRQUNuQyxJQUFJLE9BQU8sQ0FBQztRQUNaLFFBQVEsSUFBSSxFQUFFO1lBQ1osS0FBSyxTQUFTO2dCQUNaLE9BQU8sR0FBRyxJQUFJLENBQUMsU0FBb0IsQ0FBQztnQkFDcEMsTUFBTTtZQUNSLEtBQUssVUFBVTtnQkFDYixPQUFPLEdBQUksSUFBSSxDQUFDLFNBQXNCLENBQUMsT0FBTyxDQUFDLENBQUM7Z0JBQ2hELE1BQU07WUFDUixLQUFLLFFBQVE7Z0JBQ1gsTUFBTSxZQUFZLEdBQUcsT0FBTyxDQUFDLGdCQUFnQixDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsb0JBQW9CLENBQUMsQ0FBQztnQkFDakYsT0FBTyxHQUFHLFlBQVksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFNBQW1CLEVBQUUsT0FBTyxDQUFDLENBQUM7Z0JBQ25FLE1BQU07WUFDUjtnQkFDRSxPQUFPLEdBQUcsS0FBSyxDQUFDO2dCQUNoQixNQUFNO1NBQ1Q7UUFDRCxPQUFPLE9BQU8sQ0FBQztJQUNqQixDQUFDO0NBQ0Y7QUFFRCxPQUFPLEVBQVksUUFBUSxFQUFFLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBuby1jYXNlLWRlY2xhcmF0aW9ucyAqL1xyXG5pbXBvcnQgeyBWYXJpYWJsZVBhcnNlU2VydmljZSB9IGZyb20gJy4uLy4uL3ZhcmlhYmxlL2luZGV4JztcclxuaW1wb3J0IHsgQ29tbWFuZENvbnRleHQgfSBmcm9tICcuLi9jb21tYW5kX2NvbnRleHQnO1xyXG5pbXBvcnQgeyBJbmplY3RvciB9IGZyb20gJy4uLy4uL2NvcmUvaW5kZXgnO1xyXG5cclxuLyoqXHJcbiAqIOS7u+WKoeWHveaVsFxyXG4gKiBAcGFyYW1zIHJlc3VsdCDkuIrkuIDmraXmiafooYznu5PmnpxcclxuICogQHBhcmFtcyBjb250ZXh0IOaJp+ihjOS4iuS4i+aWh1xyXG4gKi9cclxudHlwZSBMaW5rRnVuYyA9IChjb250ZXh0OiBDb21tYW5kQ29udGV4dCkgPT4gYm9vbGVhbjtcclxuXHJcbi8qKlxyXG4gKiDku7vliqHpk77mjqVcclxuICovXHJcbmNsYXNzIFRhc2tMaW5rIHtcclxuXHJcbiAgLyoqXHJcbiAgICog5rqQ5Lu75YqhXHJcbiAgICovXHJcbiAgZnJvbTogc3RyaW5nO1xyXG5cclxuICAvKipcclxuICAgKiDnm67moIfku7vliqFcclxuICAgKi9cclxuICB0bzogc3RyaW5nO1xyXG5cclxuICAvKipcclxuICAgKiDmiafooYzmnaHku7ZcclxuICAgKiAx44CB6KGo6L6+5byP77ybXHJcbiAgICogMuOAgeW4g+WwlOWAvO+8m1xyXG4gICAqIDPjgIHlh73mlbBcclxuICAgKi9cclxuICBjb25kaXRpb246IHN0cmluZyB8IGJvb2xlYW58IExpbmtGdW5jO1xyXG5cclxuICAvKipcclxuICAgKiDmnoTpgKDlh73mlbBcclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihmcm9tOiBzdHJpbmcsIHRvOiBzdHJpbmcsIGNvbmRpdGlvbjogc3RyaW5nIHwgYm9vbGVhbnwgTGlua0Z1bmMpIHtcclxuICAgIHRoaXMuZnJvbSA9IGZyb207XHJcbiAgICB0aGlzLnRvICAgPSB0bztcclxuICAgIHRoaXMuY29uZGl0aW9uID0gY29uZGl0aW9uO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5piv5ZCm6IO95aSfXHJcbiAgICovXHJcbiAgcHVibGljIGNhbkxpbmsoY29udGV4dDogQ29tbWFuZENvbnRleHQpOiBib29sZWFuIHtcclxuICAgIGNvbnN0IHR5cGUgPSB0eXBlb2YgdGhpcy5jb25kaXRpb247XHJcbiAgICBsZXQgY2FuTGluaztcclxuICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICBjYXNlICdib29sZWFuJzpcclxuICAgICAgICBjYW5MaW5rID0gdGhpcy5jb25kaXRpb24gYXMgYm9vbGVhbjtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnZnVuY3Rpb24nOlxyXG4gICAgICAgIGNhbkxpbmsgPSAodGhpcy5jb25kaXRpb24gYXMgTGlua0Z1bmMpKGNvbnRleHQpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdzdHJpbmcnOlxyXG4gICAgICAgIGNvbnN0IHBhcnNlU2VydmljZSA9IGNvbnRleHQudmlld01vZGVsQ29udGV4dC5pbmplY3Rvci5nZXQoVmFyaWFibGVQYXJzZVNlcnZpY2UpO1xyXG4gICAgICAgIGNhbkxpbmsgPSBwYXJzZVNlcnZpY2UuZXZhbHVhdGUodGhpcy5jb25kaXRpb24gYXMgc3RyaW5nLCBjb250ZXh0KTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICBjYW5MaW5rID0gZmFsc2U7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY2FuTGluaztcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7IExpbmtGdW5jLCBUYXNrTGluayB9O1xyXG4iXX0=