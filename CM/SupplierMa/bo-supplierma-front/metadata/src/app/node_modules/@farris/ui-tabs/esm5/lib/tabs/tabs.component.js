/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, Input, ElementRef, Renderer2, ChangeDetectionStrategy, ChangeDetectorRef, ViewEncapsulation, ViewChild, EventEmitter, Output, NgZone } from '@angular/core';
import { fromEvent, Observable, of, BehaviorSubject, Subject } from 'rxjs';
import { takeUntil, map, scan, switchMap, takeWhile, debounceTime } from 'rxjs/operators';
import { TabService } from '../tabs.config';
import ResizeObserver from 'resize-observer-polyfill';
import { NgbDropdownMenu } from '../dropdown/dropdown';
var FarrisTabsComponent = /** @class */ (function () {
    function FarrisTabsComponent(stService, elementRef, renderer, cdRef, ngZone) {
        var _this = this;
        this.stService = stService;
        this.elementRef = elementRef;
        this.renderer = renderer;
        this.cdRef = cdRef;
        this.ngZone = ngZone;
        this.tabType = '';
        // 支持标签页填充
        this.fill = false;
        // 支持标签页标题自适应宽度-
        this.autoTitleWidth = false;
        // 标题长度大于等于多少字符，启用渐变样式——属性废弃
        this.titleLength = 7;
        // 搜索框是否显示
        this.searchBoxVisible = true;
        // 内容是否是flex 容器 用于内部子元素flex-----未被使用
        this.contentDirection = 'column';
        this.clickThrottleTime = 350;
        this.clickItems = new Subject();
        // 左侧所有标签的宽度和,百分比
        this.titleWidth = 0;
        this.tabChange = new EventEmitter();
        this.tabRemove = new EventEmitter();
        // 内容填充状态
        this.contentFillStates = new BehaviorSubject(false);
        // 宽度状态
        this.widthStates = new BehaviorSubject(false);
        // 高度状态
        this.heightStates = new BehaviorSubject(false);
        this.positionStates = new BehaviorSubject('top');
        this.menuItemsWidth = 'auto';
        //maxDropdownH = 200; -----未被使用
        // 下拉列表最大宽度： 非正值表明是不限制宽度 -----未被使用
        this.maxDropdownW = -1;
        this._customClass = '';
        // 标签存储列表
        this._tabs = [];
        // 工具条显示相关配置
        this.toolbarConf = {
            position: '',
            contents: []
        };
        // 工具条右侧小下拉框是否显示
        this.toolbarDpHidden = true;
        // 工具条“更多”里的按钮
        this.inMoreButtonContents = [];
        // 显示下拉数据
        this.dropdownTabs = [];
        // 隐藏左右滚动箭头按钮
        this.hideButtons = true;
        // 隐藏下拉
        this.hideDropDown = true;
        // 禁用左箭头
        this.disableLeft = false;
        // 禁用右箭头
        this.disableRight = false;
        // 记录事件流
        this.subscription = [];
        // 禁用右侧提示
        this.disableRTooltip = true;
        // 禁用左侧提示
        this.disableLTooltip = true;
        // 左侧提示数据
        this.leftTooltipTabs = [];
        // 右侧提示数据
        this.rightTooltipTabs = [];
        this.maxTooltipLen = 5;
        // 标记当前Tab标签
        this.activeId = '';
        this.ro = null;
        this._ddmHandler = null;
        this.tabVisibleChanged = new Subject();
        this.el = this.elementRef.nativeElement;
        this.verifyConfig();
        this.subscription.push(this.tabVisibleChanged.subscribe((/**
         * @param {?} e
         * @return {?}
         */
        function (e) {
            _this._reCalculateAll();
            _this._calculateToolbarDropdownIsShow();
            _this._calculateButtonsShow();
        })));
    }
    Object.defineProperty(FarrisTabsComponent.prototype, "position", {
        get: /**
         * @return {?}
         */
        function () {
            return this._position;
        },
        // tab页位置 上下左右
        set: 
        // tab页位置 上下左右
        /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._position = value;
            this.positionStates.next(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FarrisTabsComponent.prototype, "width", {
        // tabs宽度和高度
        set: 
        // tabs宽度和高度
        /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._width = this.resolveSize(value);
            this.widthStates.next(this._width);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FarrisTabsComponent.prototype, "height", {
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._height = this.resolveSize(value);
            this.heightStates.next(this._height);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FarrisTabsComponent.prototype, "headerHeight", {
        get: /**
         * @return {?}
         */
        function () {
            return this._headerHeight;
        },
        set: /**
         * @param {?} headerHeight
         * @return {?}
         */
        function (headerHeight) {
            this._headerHeight = this.resolveSize(headerHeight);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FarrisTabsComponent.prototype, "contentFill", {
        // 内容是否填充  默认是不填充
        set: 
        // 内容是否填充  默认是不填充
        /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._contentFill = value;
            this.contentFillStates.next(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FarrisTabsComponent.prototype, "tabs", {
        // 所有标签数据
        get: 
        // 所有标签数据
        /**
         * @return {?}
         */
        function () {
            return this._tabs;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._tabs = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FarrisTabsComponent.prototype, "customClass", {
        get: /**
         * @return {?}
         */
        function () {
            return this._customClass;
        },
        set: /**
         * @param {?} customClass
         * @return {?}
         */
        function (customClass) {
            var _this = this;
            if (this.customClass) {
                this.customClass.split(' ').forEach((/**
                 * @param {?} cssClass
                 * @return {?}
                 */
                function (cssClass) {
                    _this.renderer.removeClass(_this.el, cssClass);
                }));
            }
            this._customClass = customClass ? customClass.trim() : null;
            if (this.customClass) {
                this.customClass.split(' ').forEach((/**
                 * @param {?} cssClass
                 * @return {?}
                 */
                function (cssClass) {
                    _this.renderer.addClass(_this.el, cssClass);
                }));
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FarrisTabsComponent.prototype, "direction", {
        get: /**
         * @return {?}
         */
        function () {
            switch (this.position) {
                case 'top':
                    return 'column';
                case 'bottom':
                    return 'column-reverse';
                case 'left':
                    return 'row';
                case 'right':
                    return 'row-reverse';
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FarrisTabsComponent.prototype, "tabDirection", {
        // 无用，兼容
        get: 
        // 无用，兼容
        /**
         * @return {?}
         */
        function () {
            if (this.position === 'top' || this.position === 'bottom') {
                return 'row';
            }
            else if (this.position === 'left' || this.position === 'right') {
                return 'column';
            }
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} index
     * @param {?} btn
     * @return {?}
     */
    FarrisTabsComponent.prototype.trackByButton = /**
     * @param {?} index
     * @param {?} btn
     * @return {?}
     */
    function (index, btn) { return btn.id; };
    ;
    /** 验证传递参数 */
    /**
     * 验证传递参数
     * @private
     * @return {?}
     */
    FarrisTabsComponent.prototype.verifyConfig = /**
     * 验证传递参数
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var config = this.stService.getConfig();
        Object.assign(this, config);
        this.scrollStep = parseInt(this.scrollStep + '', 10);
    };
    /**
     * @return {?}
     */
    FarrisTabsComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (!this.beforeSelect) {
            this.beforeSelect = (/**
             * @return {?}
             */
            function () { return of(true); });
        }
        this.clickSubscription = this.clickItems.pipe(debounceTime(this.clickThrottleTime))
            .subscribe((/**
         * @param {?} btnInfo
         * @return {?}
         */
        function (btnInfo) {
            if (btnInfo.click && typeof btnInfo.click == 'function') {
                btnInfo.click();
            }
        }));
        this._tabContainerEl = this.tabContainer.nativeElement;
        this._createStream();
        this.activeId = this.selectId;
        if (this.ngZone) {
            this.ngZone.runOutsideAngular((/**
             * @return {?}
             */
            function () {
                if (_this.ro === null) {
                    _this.ro = new ResizeObserver((/**
                     * @param {?} el
                     * @return {?}
                     */
                    function (el) {
                        _this._reCalculateAll();
                        _this._calculateToolbarDropdownIsShow();
                        _this._calculateButtonsShow();
                    }));
                    _this.ro.observe(_this.el.parentElement);
                }
            }));
        }
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    FarrisTabsComponent.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        if (changes['selectId']) {
            this.selectTab(changes['selectId'].currentValue);
        }
    };
    /* 标签页内容初始化 */
    /* 标签页内容初始化 */
    /**
     * @return {?}
     */
    FarrisTabsComponent.prototype.ngAfterContentInit = /* 标签页内容初始化 */
    /**
     * @return {?}
     */
    function () { };
    /**
     * @return {?}
     */
    FarrisTabsComponent.prototype.ngAfterContentChecked = /**
     * @return {?}
     */
    function () {
    };
    /**
     * @return {?}
     */
    FarrisTabsComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        // 为了兼容弄旧表单，不兼容HostBinding, 通过追加class的方式实现
        this.renderer.addClass(this.el, 'farris-tabs');
        this.renderer.addClass(this.el, 'flex-column');
        this.contentFillStates.subscribe((/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            if (data) {
                _this.renderer.addClass(_this.el, 'f-tabs-content-fill');
            }
            else {
                _this.renderer.removeClass(_this.el, 'f-tabs-content-fill');
            }
        }));
        this.widthStates.subscribe((/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            if (data) {
                _this.renderer.setStyle(_this.el, 'width', data);
            }
        }));
        this.heightStates.subscribe((/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            if (data) {
                _this.renderer.setStyle(_this.el, 'height', data);
            }
        }));
        this.positionStates.subscribe((/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            _this.renderer.removeClass(_this.el, 'flex-row');
            _this.renderer.removeClass(_this.el, 'flex-column');
            _this.renderer.removeClass(_this.el, 'flex-row-reverse');
            _this.renderer.removeClass(_this.el, 'flex-column-reverse');
            if (data === 'left') {
                _this.renderer.addClass(_this.el, 'flex-row');
            }
            if (data === 'top') {
                _this.renderer.addClass(_this.el, 'flex-column');
            }
            if (data === 'right') {
                _this.renderer.addClass(_this.el, 'flex-row-reverse');
            }
            if (data === 'bottom') {
                _this.renderer.addClass(_this.el, 'flex-column-reverse');
            }
        }));
        // 兼容结束
        this.getToolbarConf();
        this._reCalculateAll();
        this._setActive();
        this._changeTitleStyle();
        this._listenShowChanges();
        /** @type {?} */
        var self = this;
        // this.renderer.listen(document, 'keyup', function (e) {
        //     if (self.searchInputVisible) {
        //         console.log(e);
        //     }
        // });
        this.ngZone.runOutsideAngular((/**
         * @return {?}
         */
        function () {
            _this._ddmHandler = _this.renderer.listen(document, 'mousedown', (/**
             * @param {?} e
             * @return {?}
             */
            function (e) {
                if (!e.target.closest('.farris-tabs-header')) {
                    if (_this.el && _this.el.querySelector('.dropdown-menu')) {
                        if (_this.ddm && _this.ddm.dropdown) {
                            _this.ddm.dropdown.close();
                        }
                    }
                }
            }));
        }));
    };
    /**
     * @return {?}
     */
    FarrisTabsComponent.prototype.ngAfterViewChecked = /**
     * @return {?}
     */
    function () {
    };
    /**
     * @return {?}
     */
    FarrisTabsComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        // 组件销毁时  取消所有事件订阅
        this.subscription.forEach((/**
         * @param {?} sub
         * @return {?}
         */
        function (sub) {
            sub.unsubscribe();
        }));
        this.subscription = [];
        if (this.ro) {
            if (this.el.parentElement) {
                this.ro.unobserve(this.el.parentElement);
            }
            this.ro = null;
        }
        if (this._ddmHandler) {
            this._ddmHandler();
            this._ddmHandler = null;
        }
        if (this.clickSubscription) {
            this.clickSubscription.unsubscribe();
        }
    };
    /**
     * @param {?} btnInfo
     * @return {?}
     */
    FarrisTabsComponent.prototype.clickHandler = /**
     * @param {?} btnInfo
     * @return {?}
     */
    function (btnInfo) {
        if (!btnInfo) {
            return;
        }
        this.clickItems.next(btnInfo);
    };
    // 更多tab的显示隐藏
    // 更多tab的显示隐藏
    /**
     * @param {?} e
     * @return {?}
     */
    FarrisTabsComponent.prototype.openChange = 
    // 更多tab的显示隐藏
    /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        this.searchInputVisible = e;
        this.searchTabText = undefined;
        this._reCalculateAll();
        // 启用了搜索，需要判断下拉面板的值
        // 因为下拉面板可能存在遮挡的问题
        if (e) {
            this.menuItemsWidth = this.ddm.resetMenuElWidthOpen() + 'px';
        }
        else {
            this.menuItemsWidth = 'auto';
        }
    };
    // 搜索tab
    // 搜索tab
    /**
     * @param {?} e
     * @return {?}
     */
    FarrisTabsComponent.prototype.searchTab = 
    // 搜索tab
    /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        this.stopBubble(e);
        this._reCalculateAll();
    };
    // 阻止冒泡
    // 阻止冒泡
    /**
     * @param {?} e
     * @return {?}
     */
    FarrisTabsComponent.prototype.stopBubble = 
    // 阻止冒泡
    /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        if (e && e.stopPropagation) {
            e.stopPropagation();
        }
        else {
            window.event.cancelBubble = true;
        }
    };
    /**
     * @param {?} id
     * @param {?=} state
     * @return {?}
     */
    FarrisTabsComponent.prototype.getToolbarState = /**
     * @param {?} id
     * @param {?=} state
     * @return {?}
     */
    function (id, state) {
        if (state === void 0) { state = this.btnStates; }
        if (state) {
            return state.pipe(map((/**
             * @param {?} n
             * @return {?}
             */
            function (n) {
                if (n[id] === undefined) {
                    // console.warn(`未找ID为：${id} 相关状态设置！`);
                    return false;
                }
                return n[id];
            })));
        }
        else {
            return of(true);
        }
    };
    // 监听子组件的隐藏显示属性
    // 监听子组件的隐藏显示属性
    /**
     * @private
     * @return {?}
     */
    FarrisTabsComponent.prototype._listenShowChanges = 
    // 监听子组件的隐藏显示属性
    /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        // 如果隐藏的组件是激活状态，先将其设置为常规
        this.tabs.forEach((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            item.showStates.subscribe((/**
             * @param {?} data
             * @return {?}
             */
            function (data) {
                /** @type {?} */
                var activeIdToken;
                item._show = data;
                if (data === false && item.id === _this.activeId) {
                    item._active = false;
                    _this.activeId = '';
                    activeIdToken = false;
                }
                /** @type {?} */
                var tabs = _this.tabs.filter((/**
                 * @param {?} item
                 * @return {?}
                 */
                function (item) { return item._show === true; }));
                /** @type {?} */
                var defaultTabId = tabs.length ? tabs[0].id : null;
                // 然后将显示状态下的第一个tab激活
                if (defaultTabId && activeIdToken === false) {
                    _this.tabs.forEach((/**
                     * @param {?} item
                     * @param {?} index
                     * @return {?}
                     */
                    function (item, index) {
                        if (item.id === defaultTabId) {
                            _this.activeId = item.id;
                            _this.tabs[index]._active = true;
                        }
                    }));
                    _this.getToolbarConf();
                }
                _this.cdRef.detectChanges();
            }));
        }));
    };
    /**
     * 选中Tab
     * @param  tabId tab标识
     */
    /**
     * 选中Tab
     * @param {?} tabId tab标识
     * @return {?}
     */
    FarrisTabsComponent.prototype.selectTab = /**
     * 选中Tab
     * @param {?} tabId tab标识
     * @return {?}
     */
    function (tabId) {
        /** @type {?} */
        var selectedTab = this._getTabById(tabId);
        this._selectTab(selectedTab.tab, selectedTab.index);
    };
    /**
     * @param {?} ev
     * @param {?} id
     * @param {?=} ddm
     * @return {?}
     */
    FarrisTabsComponent.prototype._cpSelectTabByIndex = /**
     * @param {?} ev
     * @param {?} id
     * @param {?=} ddm
     * @return {?}
     */
    function (ev, id, ddm) {
        if (ddm === void 0) { ddm = null; }
        ev.preventDefault();
        ev.stopPropagation();
        /** @type {?} */
        var targetEL = (/** @type {?} */ (ev.target));
        if (targetEL.className.indexOf('st-drop-close') > -1 ||
            targetEL.parentElement.className.indexOf('st-drop-close') > -1) {
            // 阻止冒泡和捕获事件 点击删除标记 则执行删除标签方法  而不是选中标签
            this.closeTab(id);
        }
        else {
            // 阻止冒泡
            this.selectTab(id);
        }
        this.getToolbarConf();
        this.cdRef.markForCheck();
        this._reCalculateAll();
        this._calculateToolbarDropdownIsShow();
        this._calculateButtonsShow();
        if (ddm) {
            ddm.dropdown.close();
        }
        return false;
    };
    /**
     * 通过tabs的索引选择 tab
     * @param index tabs索引
     */
    /**
     * 通过tabs的索引选择 tab
     * @param {?} index tabs索引
     * @return {?}
     */
    FarrisTabsComponent.prototype.selectTabByIndex = /**
     * 通过tabs的索引选择 tab
     * @param {?} index tabs索引
     * @return {?}
     */
    function (index) {
        if (index >= 0 && index < this.tabs.length) {
            /** @type {?} */
            var selectTab = this.tabs[index];
            this._selectTab(selectTab, index);
        }
    };
    /* 选中tab时  暴露出选中tab的id 和其之后的id */
    /* 选中tab时  暴露出选中tab的id 和其之后的id */
    /**
     * @private
     * @param {?} tab
     * @param {?} index
     * @return {?}
     */
    FarrisTabsComponent.prototype._selectTab = /* 选中tab时  暴露出选中tab的id 和其之后的id */
    /**
     * @private
     * @param {?} tab
     * @param {?} index
     * @return {?}
     */
    function (tab, index) {
        var _this = this;
        if (tab && !tab.disabled && this.activeId !== tab.id) {
            if (!this.beforeSelect) {
                this.beforeSelect = (/**
                 * @return {?}
                 */
                function () { return of(true); });
            }
            /** @type {?} */
            var tabsChangeEventParam_1 = {
                prevId: this.activeId,
                nextId: tab.id
            };
            this.beforeSelect(tabsChangeEventParam_1).subscribe((/**
             * @param {?} e
             * @return {?}
             */
            function (e) {
                if (e) {
                    _this.activeId = tab.id;
                    // 首先不激活所有的tab页  然后激活当前tab页
                    // let index = -1;
                    _this.tabs.forEach((/**
                     * @param {?} item
                     * @param {?} i
                     * @return {?}
                     */
                    function (item, i) {
                        item._active = false;
                    }));
                    _this.tabs[index]._active = true;
                    _this.getToolbarConf();
                    // 滚动到可见区域内
                    _this.scrollTabIntoView(index);
                    _this.cdRef.detectChanges();
                    _this.tabChange.emit(tabsChangeEventParam_1);
                }
            }));
        }
    };
    /**
     * @private
     * @return {?}
     */
    FarrisTabsComponent.prototype._setActive = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.tabs.length) {
            /** @type {?} */
            var tabs = this.tabs.filter((/**
             * @param {?} item
             * @return {?}
             */
            function (item) { return item._show === true; }));
            /** @type {?} */
            var activeTab = this._getTabById(this.activeId).tab;
            this.activeId = activeTab ? activeTab.id : this.tabs.length ? this.tabs[0].id : null;
            // 过滤掉show=false（隐藏）的tab
            if (tabs.length) {
                if (this.activeId) {
                    /** @type {?} */
                    var targetTab = tabs.find((/**
                     * @param {?} item
                     * @return {?}
                     */
                    function (item) { return item.id === _this.activeId; }));
                    if (targetTab) {
                        this.activeId = targetTab.id;
                    }
                }
                else {
                    this.activeId = tabs[0].id;
                }
            }
            else {
                this.activeId = null;
            }
            this.tabs.forEach((/**
             * @param {?} item
             * @return {?}
             */
            function (item) {
                item._active = false;
                if (item.id === _this.activeId) {
                    item._active = true;
                }
            }));
        }
    };
    /**
     * @param activeId 显示某个tab
     */
    /**
     * @param {?} tabId
     * @param {?=} selectable
     * @return {?}
     */
    FarrisTabsComponent.prototype.showTab = /**
     * @param {?} tabId
     * @param {?=} selectable
     * @return {?}
     */
    function (tabId, selectable) {
        if (selectable === void 0) { selectable = true; }
        /** @type {?} */
        var len = this.tabs.length;
        for (var i = 0; i < len; i++) {
            if (this.tabs[i].id === tabId) {
                this.tabs[i]._show = true;
                if (selectable) {
                    this.selectTab(tabId);
                }
                return;
            }
        }
    };
    /**
     * @param activeId 隐藏某个tab
     */
    /**
     * @param {?} activeId 隐藏某个tab
     * @return {?}
     */
    FarrisTabsComponent.prototype.hideTab = /**
     * @param {?} activeId 隐藏某个tab
     * @return {?}
     */
    function (activeId) {
        /** @type {?} */
        var showTabs = this.tabs.filter((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            return item._show === true;
        }));
        /** @type {?} */
        var len = showTabs.length - 1;
        if (len < 0) {
            return;
        }
        /** @type {?} */
        var index;
        for (var i = 0; i <= len; i++) {
            if (showTabs[i].id === activeId) {
                showTabs[i]._show = false;
                index = i;
                break;
            }
        }
        if (index === undefined) {
            return;
        }
        else if (index === len && len < 1) {
            this.selectTab('');
        }
        else if (index === len && len >= 1) {
            this.selectTab(showTabs[len - 1].id);
        }
        else {
            this.selectTab(showTabs[index + 1].id);
        }
    };
    /**
     * 添加标签
     * @param curTabs 数组或者对象
     * @param activeId 设置
     */
    /**
     * 添加标签
     * @param {?} curTabs 数组或者对象
     * @param {?} index
     * @param {?} setActiveId
     * @return {?}
     */
    FarrisTabsComponent.prototype.addTabs = /**
     * 添加标签
     * @param {?} curTabs 数组或者对象
     * @param {?} index
     * @param {?} setActiveId
     * @return {?}
     */
    function (curTabs, index, setActiveId) {
        var _a;
        if (curTabs.length > 0) {
            (_a = this.tabs).splice.apply(_a, tslib_1.__spread([index, 0], curTabs));
            // 去重
            this.tabs = this._unique(this.tabs);
        }
        if (setActiveId && this.activeId !== setActiveId) {
            /** @type {?} */
            var filterTab = this._getTabById(setActiveId);
            if (filterTab.index >= 0) {
                this.selectTab(setActiveId);
                this.activeId = setActiveId;
                this.scrollTabIntoView(filterTab.index);
            }
        }
        this.cdRef.detectChanges();
        this._reCalculateAll();
        this._changeTitleStyle();
    };
    /**
     * 添加标签时  去重
     *
     */
    /**
     * 添加标签时  去重
     *
     * @private
     * @param {?} objArray
     * @return {?}
     */
    FarrisTabsComponent.prototype._unique = /**
     * 添加标签时  去重
     *
     * @private
     * @param {?} objArray
     * @return {?}
     */
    function (objArray) {
        /** @type {?} */
        var hash = {};
        objArray = objArray.reduce((/**
         * @param {?} item
         * @param {?} next
         * @return {?}
         */
        function (item, next) {
            if (hash[next.id]) {
                hash[next.id] = '';
            }
            else {
                hash[next.id] = true && item.push(next);
            }
            return item;
        }), []);
        return objArray;
    };
    /* 通过tab列表的序列删除tab */
    /* 通过tab列表的序列删除tab */
    /**
     * @param {?} index
     * @return {?}
     */
    FarrisTabsComponent.prototype.removeTabByIndex = /* 通过tab列表的序列删除tab */
    /**
     * @param {?} index
     * @return {?}
     */
    function (index) {
        /** @type {?} */
        var len = this.tabs.length - 1;
        if (index < 0 || index > len) {
            return;
        }
        /** @type {?} */
        var removeTab = this.tabs[index];
        removeTab._active = false;
        if (this.activeId === removeTab.id) {
            // 只有一个而且被删除
            if (len === 0) {
                // 如果所有标签均删除 激活id为空
                this.activeId = '';
            }
            else if (index === len) {
                // 如果删除的是最后一个标签 设置其前面的处于激活状态
                this.activeId = this.tabs[len - 1].id;
                this.tabs[index - 1]._active = true;
            }
            else {
                // 如果其他情况  设置其后面的处于激活状态
                this.activeId = this.tabs[index + 1].id;
                this.tabs[index + 1]._active = true;
            }
            this.tabs.splice(index, 1);
            this.scrollTabIntoView(index);
        }
        else {
            this.tabs.splice(index, 1);
        }
        this.tabRemove.emit({
            removeIndex: index,
            removeId: removeTab.id,
            activeId: this.activeId
        });
        this.cdRef.detectChanges();
    };
    /**
     * 关闭标签  跟删除标签不同
     * @param string
     */
    /**
     * 关闭标签  跟删除标签不同
     * @param {?} activeId
     * @return {?}
     */
    FarrisTabsComponent.prototype.closeTab = /**
     * 关闭标签  跟删除标签不同
     * @param {?} activeId
     * @return {?}
     */
    function (activeId) {
        /** @type {?} */
        var len = this.tabs.length;
        for (var i = 0; i < len; i++) {
            /** @type {?} */
            var tab = this.tabs[i];
            if (tab.id === activeId) {
                this.removeTabByIndex(i);
                return;
            }
        }
    };
    /**
     * 初始化
     */
    /**
     * 初始化
     * @return {?}
     */
    FarrisTabsComponent.prototype.load = /**
     * 初始化
     * @return {?}
     */
    function () {
        for (var i = 0; i < this.tabs.length; i++) {
            if (this.tabs[i].id === this.activeId) {
                this.tabs[i]._active = true;
                return;
            }
        }
    };
    /**
     * 截取tab中的title,超过6位，截断
     */
    /**
     * 截取tab中的title,超过6位，截断
     * @private
     * @return {?}
     */
    FarrisTabsComponent.prototype._truncateTitle = /**
     * 截取tab中的title,超过6位，截断
     * @private
     * @return {?}
     */
    function () {
        this.tabs = this.tabs.map((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            item.title = item.title.length > 6 ? item.title.substr(0, 6) : item.title;
            return item;
        }));
    };
    /**
     * 替换tab中的title颜色
     */
    /**
     * 替换tab中的title颜色
     * @private
     * @return {?}
     */
    FarrisTabsComponent.prototype._changeTitleStyle = /**
     * 替换tab中的title颜色
     * @private
     * @return {?}
     */
    function () {
        if (this.autoTitleWidth) {
            return;
        }
        /** @type {?} */
        var $textEls = this._tabContainerEl.querySelectorAll('.st-tab-text');
        for (var k = 0; k < $textEls.length; k++) {
            /** @type {?} */
            var parentEl = $textEls[k].parentNode;
            if ($textEls[k].scrollWidth > parentEl['offsetWidth']) {
                this.tabs[k].titleOverflow = true;
            }
            else {
                this.tabs[k].titleOverflow = false;
            }
        }
        //this.cdRef.detectChanges();
    };
    /**
     * 创建流
     */
    /**
     * 创建流
     * @private
     * @return {?}
     */
    FarrisTabsComponent.prototype._createStream = /**
     * 创建流
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        [this.rightNav, this.leftNav].forEach((/**
         * @param {?} curBtn
         * @param {?} index
         * @return {?}
         */
        function (curBtn, index) {
            /** @type {?} */
            var direction = index ? -1 : 1;
            /** @type {?} */
            var mousedown$ = fromEvent(curBtn.nativeElement, 'mousedown');
            /** @type {?} */
            var mouseup$ = fromEvent(curBtn.nativeElement, 'mouseup');
            /** @type {?} */
            var newMouseDown$ = mousedown$.pipe(switchMap((/**
             * @param {?} event
             * @return {?}
             */
            function (event) {
                event.preventDefault();
                event.stopPropagation();
                /** @type {?} */
                var interval$ = of(0).pipe(
                // concat(interval(80)),
                takeUntil(mouseup$), scan((/**
                 * @param {?} sum
                 * @param {?} num
                 * @return {?}
                 */
                function (sum, num) {
                    return sum + _this.scrollStep * direction;
                }), 0), takeWhile((/**
                 * @param {?} num
                 * @return {?}
                 */
                function (num) {
                    if (direction > 0) {
                        return !_this.disableRight;
                    }
                    return !_this.disableLeft;
                })), map((/**
                 * @param {?} v
                 * @return {?}
                 */
                function (v) {
                    return { value: v, direction: direction };
                })));
                return interval$;
            })));
            /** @type {?} */
            var mousepressSub = newMouseDown$.subscribe((/**
             * @param {?} change
             * @return {?}
             */
            function (change) {
                _this._scrollTab(change.value, change.direction);
            }));
            _this.subscription.push(mousepressSub);
        }));
        // if (this.autoResize) {
        //     // 订阅windows resize事件
        //     this.subscription.push(
        //         fromEvent(window, 'resize')
        //             .pipe(throttleTime(80))
        //             .subscribe(e => {
        //                 this.cdRef.detectChanges();
        //             })
        //     );
        // }
    };
    /**
     * 按照方向，滚动到指定位置
     * @param dist_scroll 目标滚动
     * @param direction 方向
     */
    /**
     * 按照方向，滚动到指定位置
     * @private
     * @param {?} move
     * @param {?} direction 方向
     * @return {?}
     */
    FarrisTabsComponent.prototype._scrollTab = /**
     * 按照方向，滚动到指定位置
     * @private
     * @param {?} move
     * @param {?} direction 方向
     * @return {?}
     */
    function (move, direction) {
        /** @type {?} */
        var dist_scrollleft = this._tabContainerEl.scrollLeft + move;
        /** @type {?} */
        var max_scroll_left = this._tabContainerEl.scrollWidth - this._tabContainerEl.offsetWidth;
        // 标签页左侧移动
        if (direction > 0) {
            this._tabContainerEl.scrollLeft = Math.min(dist_scrollleft, max_scroll_left);
        }
        else if (direction < 0) {
            // 标签页右侧移动
            this._tabContainerEl.scrollLeft = Math.max(dist_scrollleft, 0);
        }
        this._reCalculateSides();
        // this.cdRef.detectChanges();
    };
    /**
     * 指定当前滑动到可视区域——————————————未测试
     * index
     */
    /**
     * 指定当前滑动到可视区域——————————————未测试
     * index
     * @param {?} index
     * @return {?}
     */
    FarrisTabsComponent.prototype.scrollTabIntoView = /**
     * 指定当前滑动到可视区域——————————————未测试
     * index
     * @param {?} index
     * @return {?}
     */
    function (index) {
        if (!this._tabContainerEl || this.hideButtons) {
            return;
        }
        /** @type {?} */
        var tabIndex = parseInt(index + '', 10);
        /** @type {?} */
        var tabToScroll;
        // first we find the tab element.
        if (tabIndex >= 0) {
            /** @type {?} */
            var allTabs = this._tabContainerEl.querySelectorAll('.nav-item');
            if (allTabs.length > tabIndex) {
                tabToScroll = allTabs[tabIndex];
            }
        }
        else {
            // scroll selected tab into view
            /** @type {?} */
            var activeTab = this._tabContainerEl.querySelector('li.active');
            if (activeTab) {
                tabToScroll = activeTab;
            }
        }
        if (tabToScroll) {
            /** @type {?} */
            var tab_left = parseInt(tabToScroll.getBoundingClientRect().left + '', 10);
            /** @type {?} */
            var tabs_left = parseInt(this._tabContainerEl.getBoundingClientRect().left + '', 10);
            /** @type {?} */
            var rightPosition = tab_left +
                parseInt(tabToScroll.getBoundingClientRect().width + '', 10) -
                tabs_left;
            /** @type {?} */
            var leftPosition = tab_left - tabs_left - 10;
            if (leftPosition < 0) {
                this._scrollTab(leftPosition, -1);
            }
            else if (rightPosition > this._tabContainerEl.offsetWidth) {
                this._scrollTab(rightPosition - this._tabContainerEl.offsetWidth + 20, 1);
            }
        }
    };
    /**
     * 切换tab后，重新获取需要该tab下工具条按钮的配置信息以及隐藏更多按钮
     * 以及获取该tab下的头部扩展区域
     */
    /**
     * 切换tab后，重新获取需要该tab下工具条按钮的配置信息以及隐藏更多按钮
     * 以及获取该tab下的头部扩展区域
     * @private
     * @return {?}
     */
    FarrisTabsComponent.prototype.getToolbarConf = /**
     * 切换tab后，重新获取需要该tab下工具条按钮的配置信息以及隐藏更多按钮
     * 以及获取该tab下的头部扩展区域
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var tabConfig = this.tabs.filter((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            return item._active === true;
        }))[0];
        if (!tabConfig || !tabConfig.hasOwnProperty('toolbar')) {
            this.toolbarConf = null;
        }
        else {
            this.toolbarConf = tabConfig.toolbar;
        }
        // 获取该tab下的头部扩展区域
        if (!tabConfig || !tabConfig.hasOwnProperty('farrisTabsExtendDirective')) {
            this.headerExtendConf = null;
        }
        else {
            this.headerExtendConf = tabConfig.farrisTabsExtendDirective;
        }
        // 隐藏更多按钮
        this.toolbarDpHidden = true;
        this.cdRef.detectChanges();
    };
    /**
     * 计算工具栏是否显示下拉按钮
     */
    /**
     * 计算工具栏是否显示下拉按钮
     * @private
     * @return {?}
     */
    FarrisTabsComponent.prototype._calculateToolbarDropdownIsShow = /**
     * 计算工具栏是否显示下拉按钮
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var headerExtendEl;
        /** @type {?} */
        var headerExtendElWidth = 0;
        if (!this.toolbarContainer || !this.toolbarConf) {
            return;
        }
        /** @type {?} */
        var toolbarContainer = this.hasInHeadCl() ? this.toolbarContainer.nativeElement : this.toolbarContainer.nativeElement.parentElement;
        /** @type {?} */
        var divEl = toolbarContainer.querySelector('.farris-tabs-inline-flex');
        if (!divEl) {
            return;
        }
        if (this.headerExtendConf) {
            headerExtendEl = toolbarContainer.querySelector('.farris-tabs-header-extend');
            this.renderer.removeStyle(headerExtendEl, 'overflow');
            headerExtendElWidth = headerExtendEl.offsetWidth;
        }
        // 按钮在内容区
        if (!this.hasInHeadCl() && this.btnPlaceHolder.nativeElement.offsetWidth > toolbarContainer.offsetWidth) {
            this.toolbarDpHidden = false;
        }
        else if (this.hasInHeadCl() && this.btnPlaceHolder.nativeElement.offsetWidth > toolbarContainer.offsetWidth - headerExtendElWidth) {
            // 按钮在头部工具栏
            this.toolbarDpHidden = false;
        }
        else {
            this.toolbarDpHidden = true;
        }
        this.cdRef.detectChanges();
    };
    /**
     * 计算显示的按钮个数及更多中显示的按钮个数
     */
    /**
     * 计算显示的按钮个数及更多中显示的按钮个数
     * @private
     * @return {?}
     */
    FarrisTabsComponent.prototype._calculateButtonsShow = /**
     * 计算显示的按钮个数及更多中显示的按钮个数
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var headerExtendEl;
        /** @type {?} */
        var headerExtendElWidth = 0;
        if (!this.toolbarContainer || !this.toolbarConf) {
            return;
        }
        /** @type {?} */
        var toolbarContainer = this.hasInHeadCl() ? this.toolbarContainer.nativeElement : this.toolbarContainer.nativeElement.parentElement;
        /** @type {?} */
        var divEl = toolbarContainer.querySelector('.farris-tabs-inline-flex');
        /** @type {?} */
        var btnPlaceHolderEl = this.btnPlaceHolder.nativeElement;
        /** @type {?} */
        var btnPlaceHolderBtns = btnPlaceHolderEl.querySelectorAll('button');
        if (!divEl || btnPlaceHolderBtns.length == 0) {
            return;
        }
        // 此处有个Bug，如果是inContent还是headerExtendConf的情况下，按钮的位置形如inHead
        if (this.headerExtendConf) {
            headerExtendEl = toolbarContainer.querySelector('.farris-tabs-header-extend');
            headerExtendElWidth = this.hasInHeadCl() ? headerExtendEl.offsetWidth : 0;
        }
        /** @type {?} */
        var moreButton = toolbarContainer.querySelector('.morebtn');
        // 计算按钮的宽度      
        /** @type {?} */
        var basicStart = parseInt(btnPlaceHolderEl.getBoundingClientRect().left);
        /** @type {?} */
        var basicWidth = toolbarContainer.offsetWidth - moreButton.offsetWidth - 12 - headerExtendElWidth;
        /** @type {?} */
        var toolbarDropdownHidden = true;
        /** @type {?} */
        var k = 0
        // 只有一个按钮
        ;
        // 只有一个按钮
        if (btnPlaceHolderBtns.length == 1) {
            if (btnPlaceHolderEl.offsetWidth > basicWidth) {
                toolbarDropdownHidden = false;
            }
            else {
                k = 1;
            }
        }
        else {
            for (k = 1; k <= btnPlaceHolderBtns.length - 1; k++) {
                // 如果内容超出,考虑到按钮之间的间距
                if (k == btnPlaceHolderBtns.length - 1) {
                    if (btnPlaceHolderEl.offsetWidth > basicWidth) {
                        toolbarDropdownHidden = false;
                        k = k - 1;
                        break;
                    }
                }
                else if (parseInt(btnPlaceHolderBtns[k].getBoundingClientRect().left) - basicStart > basicWidth) {
                    toolbarDropdownHidden = false;
                    k = k - 1;
                    break;
                }
            }
        }
        this.toolbarDpHidden = toolbarDropdownHidden;
        /** @type {?} */
        var showBtns = divEl.querySelectorAll('button');
        for (var i = 0; i < k; i++) {
            this.renderer.setStyle(showBtns[i], 'display', '');
        }
        for (var m = k; m < showBtns.length; m++) {
            this.renderer.setStyle(showBtns[m], 'display', 'none');
        }
        if (this.toolbarConf.contents && this.toolbarConf.contents.length) {
            this.inMoreButtonContents = this.toolbarConf.contents.filter((/**
             * @param {?} item
             * @param {?} index
             * @return {?}
             */
            function (item, index) {
                return index >= k;
            }));
        }
    };
    /**
     * 重新计算是否显示按钮和下拉
     */
    /**
     * 重新计算是否显示按钮和下拉
     * @private
     * @return {?}
     */
    FarrisTabsComponent.prototype._reCalculateAll = /**
     * 重新计算是否显示按钮和下拉
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (!this._tabContainerEl) {
            return;
        }
        /** @type {?} */
        var tabParentWidth = this.tabParent.nativeElement.offsetWidth;
        if (!this.hideButtons) {
            /** @type {?} */
            var tr = parseInt(window.getComputedStyle(this.tabParent.nativeElement).getPropertyValue("margin-right"));
            /** @type {?} */
            var tl = parseInt(window.getComputedStyle(this.tabParent.nativeElement).getPropertyValue("margin-left"));
            tabParentWidth += tr + tl;
        }
        this.hideButtons = this._tabContainerEl.scrollWidth <= tabParentWidth;
        this.hideDropDown = this.showDropDown ? this.hideButtons : true;
        if (!this.hideButtons) {
            if (!this.hideDropDown) {
                this.dropdownTabs = [].concat(this.tabs);
            }
            if (this.searchTabText) {
                this.dropdownTabs = this.dropdownTabs.filter((/**
                 * @param {?} item
                 * @return {?}
                 */
                function (item) {
                    return item['title'].indexOf(_this.searchTabText) !== -1;
                }));
            }
            this._reCalculateSides();
        }
        this.cdRef.detectChanges();
    };
    /**
     * 重新计算左右的提示文字
     */
    /**
     * 重新计算左右的提示文字
     * @private
     * @return {?}
     */
    FarrisTabsComponent.prototype._reCalulateTooltips = /**
     * 重新计算左右的提示文字
     * @private
     * @return {?}
     */
    function () {
        if (!this._tabContainerEl || this.hideButtons) {
            return;
        }
        /** @type {?} */
        var t_right_tooltips = [];
        /** @type {?} */
        var t_left_tooltips = [];
        /** @type {?} */
        var allTabs = this._tabContainerEl.querySelectorAll('.nav-item');
        /** @type {?} */
        var len = allTabs.length;
        /** @type {?} */
        var hiddenTabs = this.tabs.filter((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            return item._show !== true;
        }));
        /** @type {?} */
        var hiddenTabsLength = hiddenTabs.length;
        for (var i = 0; i < len; i++) {
            /** @type {?} */
            var leftPosition = allTabs[i].getBoundingClientRect().left -
                this._tabContainerEl.getBoundingClientRect().left;
            /** @type {?} */
            var rightPosition = allTabs[i].getBoundingClientRect().width + leftPosition;
            if (rightPosition > this._tabContainerEl.offsetWidth) {
                t_right_tooltips.push(this.tabs[i]);
            }
            else if (leftPosition < 0) {
                t_left_tooltips.push(this.tabs[i]);
            }
        }
        this.leftTooltipTabs = []
            .concat(t_left_tooltips)
            .slice(Math.max(0, t_left_tooltips.length - this.maxTooltipLen));
        this.rightTooltipTabs = []
            .concat(t_right_tooltips)
            .slice(0, Math.min(this.maxTooltipLen, t_right_tooltips.length));
        this.disableRTooltip = this.rightTooltipTabs.length < 1;
        this.disableLTooltip = this.leftTooltipTabs.length - hiddenTabsLength < 1;
    };
    /**
     * 重新计算左右箭头状态
     */
    /**
     * 重新计算左右箭头状态
     * @private
     * @return {?}
     */
    FarrisTabsComponent.prototype._reCalculateSides = /**
     * 重新计算左右箭头状态
     * @private
     * @return {?}
     */
    function () {
        this.disableRight =
            this._tabContainerEl.scrollLeft >=
                this._tabContainerEl.scrollWidth - this._tabContainerEl.offsetWidth;
        this.disableLeft = this._tabContainerEl.scrollLeft <= 0;
        this._reCalulateTooltips();
    };
    /**
     * 通过id寻找Tab
     * @param id ID
     */
    /**
     * 通过id寻找Tab
     * @private
     * @param {?} id ID
     * @return {?}
     */
    FarrisTabsComponent.prototype._getTabById = /**
     * 通过id寻找Tab
     * @private
     * @param {?} id ID
     * @return {?}
     */
    function (id) {
        /** @type {?} */
        var indexWidthId = [];
        /** @type {?} */
        var tabsWithId = this.tabs.filter((/**
         * @param {?} tab
         * @param {?} index
         * @return {?}
         */
        function (tab, index) {
            if (tab.id === id) {
                indexWidthId.push(index);
                return true;
            }
            else {
                return false;
            }
        }));
        return {
            tab: tabsWithId.length ? tabsWithId[0] : null,
            index: indexWidthId.length ? indexWidthId[0] : -1
        };
    };
    /*宽高类型是 string或者number 解析宽高  尺寸 */
    /*宽高类型是 string或者number 解析宽高  尺寸 */
    /**
     * @param {?} size
     * @return {?}
     */
    FarrisTabsComponent.prototype.resolveSize = /*宽高类型是 string或者number 解析宽高  尺寸 */
    /**
     * @param {?} size
     * @return {?}
     */
    function (size) {
        /** @type {?} */
        var regex = /px|em|rem|pt|%/;
        // 说明是字符串
        return regex.test(size)
            ? "" + parseInt(size, 10) + size.match(regex)[0]
            : size + "px";
    };
    /*
      清空tab
       */
    // removeAllTab() {
    //     this.tabs.splice(0, this.tabs.length);
    // }
    /*
          清空tab
           */
    // removeAllTab() {
    //     this.tabs.splice(0, this.tabs.length);
    // }
    /**
     * @return {?}
     */
    FarrisTabsComponent.prototype.hasInHeadCl = /*
          清空tab
           */
    // removeAllTab() {
    //     this.tabs.splice(0, this.tabs.length);
    // }
    /**
     * @return {?}
     */
    function () {
        if (this.toolbarConf && this.toolbarConf.hasOwnProperty('position') && this.toolbarConf.hasOwnProperty('contents') && this.toolbarConf.position === 'inHead' && this.toolbarConf.contents.length > 0) {
            return true;
        }
        if (this.headerExtendConf && !(this.toolbarConf && this.toolbarConf.position === 'inContent' && this.toolbarConf.contents.length)) {
            return true;
        }
        return false;
    };
    FarrisTabsComponent.decorators = [
        { type: Component, args: [{
                    selector: 'farris-tabs',
                    template: "<div #tabHeader class=\"farris-tabs-header\"\r\n    [class.farris-tabs-inHead]=\"hasInHeadCl()\"\r\n    [class.farris-tabs-inContent]=\"!hasInHeadCl()\"\r\n    [class.farris-tabs-nav-fill]=\"fill||tabType=='fill'\"\r\n    [class.farris-tabs-nav-pills]=\"tabType=='pills'\"\r\n    >\r\n    <div class=\"farris-tabs-title scroll-tabs\"\r\n        [ngStyle]=\"{'width': hasInHeadCl() ? (titleWidth?titleWidth + '%':null) : null}\">\r\n        <button type=\"button\" (disabled)=\"disableLeft\" class=\"btn sc-nav-btn px-1 sc-nav-lr\"\r\n            [ngClass]=\"{'d-none':hideButtons}\" #leftNav>\r\n        </button>\r\n        <div class=\"spacer f-utils-fill\" #tabParent\r\n            [ngClass]=\"{'spacer-sides':!hideButtons&& hideDropDown,'spacer-sides-dropdown':!hideButtons&&!hideDropDown}\"\r\n            style=\"width:100%;\">\r\n            <ul class=\"nav farris-nav-tabs flex-nowrap\" [class.nav-fill]=\"fill||tabType=='fill'\"\r\n                [class.flex-row]=\"position==='top'||position==='bottom'\"\r\n                [class.flex-column]=\"position==='left'||position==='right'\" [class.nav-pills]=\"tabType=='pills'\" #tabContainer>\r\n                <li class=\"nav-item\" *ngFor=\"let tab of tabs;index as tabIndex\"\r\n                    [ngClass]=\"{'d-none': tab._show !== true, 'f-state-active': tab.id === activeId, 'f-state-disabled': tab.disabled === true}\"\r\n                    [ngStyle]=\"{'width':tab.tabWidth+'px'}\">\r\n                    <a class=\"nav-link tabs-text-truncate\" #anchor [class.active]=\"tab.id === activeId\"\r\n                        [class.disabled]=\"tab.disabled\" (click)=\"_cpSelectTabByIndex($event,tab.id)\">\r\n                        <span class=\"st-tab-text\" [class.farris-title-auto]=\"autoTitleWidth\"\r\n                            [ngClass]=\"tab.titleCustomCls\" [tabTransclude]=\"tab.headingRef\"\r\n                            *ngIf=\"tab.headingRef\"></span>\r\n                        <span class=\"st-tab-text\" [ngbTooltip]=\"tab.title\" [referElement]=\"tabContainer\"\r\n                            [disableTooltip]=\"!tab.titleOverflow\" [class.farris-title-auto]=\"autoTitleWidth\"\r\n                            [class.farris-title-text-custom]=\"tab.titleOverflow\"\r\n                            *ngIf=\"!tab.headingRef\">{{tab.title}}</span>\r\n                        <span class=\"st-drop-close\" *ngIf=\"tab.removeable\">\r\n                            <i class=\"f-icon f-icon-close\"></i>\r\n                        </span>\r\n                    </a>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n        <div class=\"btn-group sc-nav-btn\" ngbDropdown (openChange)=\"openChange($event)\" >\r\n            <button type=\"button\"  (disabled)=\"disableRight\" class=\"btn sc-nav-rg\" [ngClass]=\"{'d-none':hideButtons}\"\r\n                #rightNav></button>\r\n            <button #dropDownButton class=\"btn dropdown-toggle-split \" ngbDropdownToggle\r\n                [ngClass]=\"{'d-none':hideDropDown}\">\r\n            </button>\r\n            <div class=\"dropdown-menu\" style=\"max-width: 300px;\" [class.tabs-pt28]=\"searchBoxVisible\" ngbDropdownMenu #ddm=\"DropdownMenu\">\r\n                <div (click)=\"stopBubble($event)\" class='pb-1 tabs-li-absolute' *ngIf=\"searchBoxVisible\">\r\n                    <input type=\"text\" class=\"form-control k-textbox\" [(ngModel)]=\"searchTabText\"\r\n                        (keyup)=\"searchTab($event)\" />\r\n                    <span class=\"f-icon f-icon-page-title-query tabs-icon-search\"></span>\r\n                </div>\r\n                <ul class=\"tab-dropdown-menu--items\" [ngStyle]=\"{'width':menuItemsWidth}\">\r\n                    <li class=\"dropdown-item text-truncate px-2\" *ngFor=\"let tab of dropdownTabs;index as tabIndex\"\r\n                        [ngClass]=\"{'disabled': tab.disabled, 'active': tab.id === activeId, 'd-none': tab._show !==true}\"\r\n                        (click)=\"_cpSelectTabByIndex($event,tab.id, ddm)\">\r\n                        <a class=\"dropdown-title\" style=\"\r\n                            text-overflow: ellipsis;white-space: nowrap;word-break: break-word;width: 100%;\">{{tab.title}}</a>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div #toolbarContainer class=\"farris-tabs-toolbar\" *ngIf=\"toolbarConf || headerExtendConf\">\r\n        <div class=\"farris-tabs-inline-flex\" *ngIf=\"toolbarConf\">\r\n            <ng-template ngFor let-btn [ngForOf]=\"toolbarConf.contents\" let-i=\"index\" [ngForTrackBy]=\"trackByButton\">\r\n                <button [attr.id]=\"btn.id\" [ngClass]=\"btn.appearance.class\"\r\n                    *ngIf=\"getToolbarState(btn.id, btnVisible) | async\"\r\n                    [disabled]=\"getToolbarState(btn.id, btnStates) | async\"\r\n                    (click)=\"clickHandler(btn)\">{{btn.title}}</button>\r\n            </ng-template>\r\n        </div>\r\n        <div class=\"btn-group sc-nav-btn\" ngbDropdown [hidden]=\"toolbarDpHidden\">\r\n            <button class=\"btn btn-link morebtn\" ngbDropdownToggle >{{'tabs.more' | locale}}</button>\r\n            <ul class=\"dropdown-menu\" ngbDropdownMenu [style.display]=\"inMoreButtonContents.length ? '': 'none'\">\r\n                <ng-template ngFor let-content [ngForOf]=\"inMoreButtonContents\" let-i=\"index\">\r\n                    <li class=\"dropdown-item text-truncate px-2\"\r\n                        *ngIf=\"getToolbarState(content.id, btnVisible) | async\">\r\n                        <button style=\"width:100%;\" [attr.id]=\"content.id\" class=\"btn btn-link text-left\"\r\n                            [class.disabled]=\"getToolbarState(content.id, btnStates) | async\"\r\n                            (click)=\"clickHandler(content)\">{{content.title}}</button>\r\n                    </li>\r\n                </ng-template>\r\n            </ul>\r\n        </div>\r\n        <div *ngIf=\"headerExtendConf && headerExtendConf.templateRef\" class=\"farris-tabs-header-extend\"\r\n        [class.margin-right-14]=\"toolbarConf && toolbarConf.contents.length\"\r\n        [ngClass]=\"headerExtendConf && headerExtendConf.extendCls\">\r\n        <template [ngTemplateOutlet]=\"headerExtendConf.templateRef\"></template>\r\n    </div>\r\n    </div>\r\n    <div class=\"farris-tabs-btn-placeholder\" #btnPlaceholder *ngIf=\"toolbarConf\">\r\n        <ng-container *ngFor=\"let btn of toolbarConf.contents\">\r\n            <button [ngClass]=\"btn.appearance.class\"\r\n                *ngIf=\"getToolbarState(btn.id, btnVisible) | async\">{{btn.title}}</button>\r\n        </ng-container>\r\n    </div>\r\n</div>\r\n<ng-content></ng-content>",
                    changeDetection: ChangeDetectionStrategy.OnPush,
                    encapsulation: ViewEncapsulation.None,
                    styles: [".farris-tabs .farris-tabs-header.farris-tabs-inHead .farris-tabs-title{width:41.6666667%}.farris-tabs .farris-tabs-header.farris-tabs-inHead .farris-tabs-toolbar{-webkit-box-flex:1;flex:1;-webkit-box-align:center;align-items:center}.farris-tabs .farris-tabs-header .farris-tabs-title.scroll-tabs .spacer.spacer-sides-dropdown{margin:0 60px 0 28px}.farris-tabs .farris-tabs-header .farris-tabs-title.scroll-tabs .sc-nav-btn.dropdown{right:6px}.farris-tabs .margin-right-14{margin-right:14px}.farris-tabs .farris-tabs-header-extend{height:44px}.farris-tabs .farris-tabs-header .farris-tabs-title.scroll-tabs .spacer .farris-nav-tabs .nav-item .nav-link .farris-title-text{max-width:112px}.farris-tabs .tabs-pt28{padding:0}.farris-tabs .tab-dropdown-menu--items{max-height:200px;overflow:auto}.farris-tabs .tabs-li-absolute{padding:4px;margin:0;position:relative}.farris-tabs .tabs-icon-search{position:absolute;right:4px;top:50%;font-size:14px;padding:0 4px;width:auto;height:24px;color:rgba(0,0,0,.25);margin-top:-12px;line-height:20px}.farris-tabs .st-drop-close{line-height:1}.farris-tabs .dropdown-menu .dropdown-item .dropdown-title{overflow:hidden;display:inline-block;padding:0 5px}.farris-tabs .farris-tabs-header.farris-tabs-inHead .farris-tabs-inline-flex{overflow:hidden}.farris-tabs .farris-tabs-btn-placeholder{position:absolute;display:-webkit-inline-box;display:inline-flex;top:-30px;left:0;opacity:0;z-index:-90}"]
                }] }
    ];
    /** @nocollapse */
    FarrisTabsComponent.ctorParameters = function () { return [
        { type: TabService },
        { type: ElementRef },
        { type: Renderer2 },
        { type: ChangeDetectorRef },
        { type: NgZone }
    ]; };
    FarrisTabsComponent.propDecorators = {
        tabType: [{ type: Input }],
        fill: [{ type: Input }],
        autoTitleWidth: [{ type: Input }],
        titleLength: [{ type: Input }],
        position: [{ type: Input }],
        showDropDown: [{ type: Input }],
        showTooltips: [{ type: Input }],
        scrollStep: [{ type: Input }],
        autoResize: [{ type: Input }],
        closeable: [{ type: Input }],
        selectId: [{ type: Input, args: ['value',] }],
        width: [{ type: Input }],
        height: [{ type: Input }],
        searchBoxVisible: [{ type: Input }],
        headerHeight: [{ type: Input, args: ['header-height',] }],
        contentDirection: [{ type: Input }],
        contentFill: [{ type: Input }],
        clickThrottleTime: [{ type: Input }],
        btnStates: [{ type: Input }],
        btnVisible: [{ type: Input }],
        tabs: [{ type: Input }],
        customClass: [{ type: Input }],
        titleWidth: [{ type: Input }],
        leftNav: [{ type: ViewChild, args: ['leftNav',] }],
        rightNav: [{ type: ViewChild, args: ['rightNav',] }],
        tabContainer: [{ type: ViewChild, args: ['tabContainer',] }],
        toolbarContainer: [{ type: ViewChild, args: ['toolbarContainer',] }],
        dropDownButton: [{ type: ViewChild, args: ['dropDownButton',] }],
        tabParent: [{ type: ViewChild, args: ['tabParent',] }],
        btnPlaceHolder: [{ type: ViewChild, args: ['btnPlaceholder',] }],
        beforeSelect: [{ type: Input }],
        tabChange: [{ type: Output }],
        tabRemove: [{ type: Output }],
        ddm: [{ type: ViewChild, args: ['ddm',] }]
    };
    return FarrisTabsComponent;
}());
export { FarrisTabsComponent };
if (false) {
    /** @type {?} */
    FarrisTabsComponent.prototype.tabType;
    /** @type {?} */
    FarrisTabsComponent.prototype.fill;
    /** @type {?} */
    FarrisTabsComponent.prototype.autoTitleWidth;
    /** @type {?} */
    FarrisTabsComponent.prototype.titleLength;
    /** @type {?} */
    FarrisTabsComponent.prototype.searchInputVisible;
    /** @type {?} */
    FarrisTabsComponent.prototype.showDropDown;
    /** @type {?} */
    FarrisTabsComponent.prototype.showTooltips;
    /** @type {?} */
    FarrisTabsComponent.prototype.scrollStep;
    /** @type {?} */
    FarrisTabsComponent.prototype.autoResize;
    /** @type {?} */
    FarrisTabsComponent.prototype.closeable;
    /** @type {?} */
    FarrisTabsComponent.prototype.selectId;
    /** @type {?} */
    FarrisTabsComponent.prototype.searchBoxVisible;
    /** @type {?} */
    FarrisTabsComponent.prototype._headerHeight;
    /** @type {?} */
    FarrisTabsComponent.prototype.contentDirection;
    /** @type {?} */
    FarrisTabsComponent.prototype.clickThrottleTime;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype.clickItems;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype.clickSubscription;
    /** @type {?} */
    FarrisTabsComponent.prototype.btnStates;
    /** @type {?} */
    FarrisTabsComponent.prototype.btnVisible;
    /** @type {?} */
    FarrisTabsComponent.prototype.titleWidth;
    /** @type {?} */
    FarrisTabsComponent.prototype.leftNav;
    /** @type {?} */
    FarrisTabsComponent.prototype.rightNav;
    /** @type {?} */
    FarrisTabsComponent.prototype.tabContainer;
    /** @type {?} */
    FarrisTabsComponent.prototype.toolbarContainer;
    /** @type {?} */
    FarrisTabsComponent.prototype.dropDownButton;
    /** @type {?} */
    FarrisTabsComponent.prototype.tabParent;
    /** @type {?} */
    FarrisTabsComponent.prototype.btnPlaceHolder;
    /**
     * 选中tab 前事件
     * @type {?}
     */
    FarrisTabsComponent.prototype.beforeSelect;
    /** @type {?} */
    FarrisTabsComponent.prototype.tabChange;
    /** @type {?} */
    FarrisTabsComponent.prototype.tabRemove;
    /** @type {?} */
    FarrisTabsComponent.prototype.contentFillStates;
    /** @type {?} */
    FarrisTabsComponent.prototype._contentFill;
    /** @type {?} */
    FarrisTabsComponent.prototype.widthStates;
    /** @type {?} */
    FarrisTabsComponent.prototype._width;
    /** @type {?} */
    FarrisTabsComponent.prototype.heightStates;
    /** @type {?} */
    FarrisTabsComponent.prototype._height;
    /** @type {?} */
    FarrisTabsComponent.prototype._position;
    /** @type {?} */
    FarrisTabsComponent.prototype.positionStates;
    /** @type {?} */
    FarrisTabsComponent.prototype.menuItemsWidth;
    /** @type {?} */
    FarrisTabsComponent.prototype.maxDropdownW;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype._customClass;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype._tabs;
    /** @type {?} */
    FarrisTabsComponent.prototype.headerExtendConf;
    /** @type {?} */
    FarrisTabsComponent.prototype.toolbarConf;
    /** @type {?} */
    FarrisTabsComponent.prototype.toolbarDpHidden;
    /** @type {?} */
    FarrisTabsComponent.prototype.inMoreButtonContents;
    /** @type {?} */
    FarrisTabsComponent.prototype.dropdownTabs;
    /** @type {?} */
    FarrisTabsComponent.prototype.hideButtons;
    /** @type {?} */
    FarrisTabsComponent.prototype.tabWidth;
    /** @type {?} */
    FarrisTabsComponent.prototype.hideDropDown;
    /** @type {?} */
    FarrisTabsComponent.prototype.disableLeft;
    /** @type {?} */
    FarrisTabsComponent.prototype.disableRight;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype.el;
    /** @type {?} */
    FarrisTabsComponent.prototype.subscription;
    /** @type {?} */
    FarrisTabsComponent.prototype.disableRTooltip;
    /** @type {?} */
    FarrisTabsComponent.prototype.disableLTooltip;
    /** @type {?} */
    FarrisTabsComponent.prototype.leftTooltipTabs;
    /** @type {?} */
    FarrisTabsComponent.prototype.rightTooltipTabs;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype._tabContainerEl;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype.maxTooltipLen;
    /** @type {?} */
    FarrisTabsComponent.prototype.activeId;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype.ro;
    /** @type {?} */
    FarrisTabsComponent.prototype.searchTabText;
    /** @type {?} */
    FarrisTabsComponent.prototype.ddm;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype._ddmHandler;
    /** @type {?} */
    FarrisTabsComponent.prototype.tabVisibleChanged;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype.stService;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype.elementRef;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype.renderer;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype.cdRef;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype.ngZone;
    /* Skipping unhandled member: ;*/
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFicy5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL3VpLXRhYnMvIiwic291cmNlcyI6WyJsaWIvdGFicy90YWJzLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUNBLE9BQU8sRUFDSCxTQUFTLEVBQW9DLEtBQUssRUFBRSxVQUFVLEVBQUUsU0FBUyxFQUFFLHVCQUF1QixFQUNsRyxpQkFBaUIsRUFBRSxpQkFBaUIsRUFBaUIsU0FBUyxFQUM5RCxZQUFZLEVBQUUsTUFBTSxFQUFzQyxNQUFNLEVBQ25FLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBZ0IsU0FBUyxFQUFZLFVBQVUsRUFBRSxFQUFFLEVBQUUsZUFBZSxFQUFFLE9BQU8sRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUNuRyxPQUFPLEVBQUUsU0FBUyxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBVSxZQUFZLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUVsRyxPQUFPLEVBQUUsVUFBVSxFQUFhLE1BQU0sZ0JBQWdCLENBQUM7QUFJdkQsT0FBTyxjQUFjLE1BQU0sMEJBQTBCLENBQUM7QUFDdEQsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBRXZEO0lBc05JLDZCQUNZLFNBQXFCLEVBQ3JCLFVBQXNCLEVBQ3RCLFFBQW1CLEVBQ25CLEtBQXdCLEVBQ3hCLE1BQWM7UUFMMUIsaUJBZUM7UUFkVyxjQUFTLEdBQVQsU0FBUyxDQUFZO1FBQ3JCLGVBQVUsR0FBVixVQUFVLENBQVk7UUFDdEIsYUFBUSxHQUFSLFFBQVEsQ0FBVztRQUNuQixVQUFLLEdBQUwsS0FBSyxDQUFtQjtRQUN4QixXQUFNLEdBQU4sTUFBTSxDQUFRO1FBak5qQixZQUFPLEdBQW1CLEVBQUUsQ0FBQzs7UUFFN0IsU0FBSSxHQUFHLEtBQUssQ0FBQzs7UUFFYixtQkFBYyxHQUFHLEtBQUssQ0FBQzs7UUFFdkIsZ0JBQVcs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SUFFbEMsNENBQXNCOztJQUV0QixrQ0FBdUM7Ozs7O0lBRXZDLDBDQUFnQzs7SUFLaEMsZ0RBQWtDOzs7OztJQUc5Qix3Q0FBNkI7Ozs7O0lBQzdCLHlDQUE4Qjs7Ozs7SUFDOUIsdUNBQTJCOzs7OztJQUMzQixvQ0FBZ0M7Ozs7O0lBQ2hDLHFDQUFzQiIsInNvdXJjZXNDb250ZW50IjpbIlxyXG5pbXBvcnQge1xyXG4gICAgQ29tcG9uZW50LCBPbkluaXQsIE9uQ2hhbmdlcywgU2ltcGxlQ2hhbmdlcywgSW5wdXQsIEVsZW1lbnRSZWYsIFJlbmRlcmVyMiwgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksXHJcbiAgICBDaGFuZ2VEZXRlY3RvclJlZiwgVmlld0VuY2Fwc3VsYXRpb24sIEFmdGVyVmlld0luaXQsIFZpZXdDaGlsZCwgT25EZXN0cm95LCBBZnRlckNvbnRlbnRDaGVja2VkLFxyXG4gICAgRXZlbnRFbWl0dGVyLCBPdXRwdXQsIEFmdGVyQ29udGVudEluaXQsIEFmdGVyVmlld0NoZWNrZWQsIE5nWm9uZVxyXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBTdWJzY3JpcHRpb24sIGZyb21FdmVudCwgaW50ZXJ2YWwsIE9ic2VydmFibGUsIG9mLCBCZWhhdmlvclN1YmplY3QsIFN1YmplY3QgfSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHsgdGFrZVVudGlsLCBtYXAsIHNjYW4sIHN3aXRjaE1hcCwgdGFrZVdoaWxlLCBjb25jYXQsIGRlYm91bmNlVGltZSB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcclxuXHJcbmltcG9ydCB7IFRhYlNlcnZpY2UsIFRhYkNvbmZpZyB9IGZyb20gJy4uL3RhYnMuY29uZmlnJztcclxuaW1wb3J0IHsgVGFic0NoYW5nZUV2ZW50LCBUYWJzUmVtb3ZlVGFiRXZlbnQgfSBmcm9tICcuLi90YWJzLmV2ZW50cyc7XHJcbmltcG9ydCB7IEZhcnJpc1RhYkNvbXBvbmVudCB9IGZyb20gJy4uL3RhYi90YWIuY29tcG9uZW50JztcclxuaW1wb3J0IHsgVG9vbGJhckNvbmYsVG9vbGJhckNvbnRlbnRzQ29uZn0gZnJvbSAnLi4vdG9vbGJhci5jb25maWcnO1xyXG5pbXBvcnQgUmVzaXplT2JzZXJ2ZXIgZnJvbSAncmVzaXplLW9ic2VydmVyLXBvbHlmaWxsJztcclxuaW1wb3J0IHsgTmdiRHJvcGRvd25NZW51IH0gZnJvbSAnLi4vZHJvcGRvd24vZHJvcGRvd24nO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgICBzZWxlY3RvcjogJ2ZhcnJpcy10YWJzJyxcclxuICAgIHRlbXBsYXRlVXJsOiAnLi90YWJzLmNvbXBvbmVudC5odG1sJyxcclxuICAgIHN0eWxlVXJsczogWycuL3RhYnMuY29tcG9uZW50LnNjc3MnXSxcclxuICAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxyXG4gICAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZVxyXG59KVxyXG5leHBvcnQgY2xhc3MgRmFycmlzVGFic0NvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25DaGFuZ2VzLCBBZnRlclZpZXdJbml0LFxyXG4gICAgT25EZXN0cm95LCBBZnRlckNvbnRlbnRJbml0LCBBZnRlckNvbnRlbnRDaGVja2VkLCBBZnRlclZpZXdDaGVja2VkIHtcclxuXHJcbiAgICBASW5wdXQoKSB0YWJUeXBlOidmaWxsJ3wncGlsbHMnfCcnPScnO1xyXG4gICAgLy8g5pSv5oyB5qCH562+6aG15aGr5YWFXHJcbiAgICBASW5wdXQoKSBmaWxsID0gZmFsc2U7XHJcbiAgICAvLyDmlK/mjIHmoIfnrb7pobXmoIfpopjoh6rpgILlupTlrr3luqYtXHJcbiAgICBASW5wdXQoKSBhdXRvVGl0bGVXaWR0aCA9IGZhbHNlO1xyXG4gICAgLy8g5qCH6aKY6ZW/5bqm5aSn5LqO562J5LqO5aSa5bCR5a2X56ym77yM5ZCv55So5riQ5Y+Y5qC35byP4oCU4oCU5bGe5oCn5bqf5byDXHJcbiAgICBASW5wdXQoKSB0aXRsZUxlbmd0aCA9IDc7XHJcbiAgICBzZWFyY2hJbnB1dFZpc2libGU6IGJvb2xlYW47XHJcbiAgICAvLyB0YWLpobXkvY3nva4g5LiK5LiL5bem5Y+zXHJcbiAgICBASW5wdXQoKSBzZXQgcG9zaXRpb24odmFsdWU6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMuX3Bvc2l0aW9uID0gdmFsdWU7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvblN0YXRlcy5uZXh0KHZhbHVlKTtcclxuICAgIH1cclxuICAgIGdldCBwb3NpdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcG9zaXRpb247XHJcbiAgICB9XHJcbiAgICAvLyDmmK/lkKblkK/nlKjkuIvmi4nmoYZcclxuICAgIEBJbnB1dCgpIHNob3dEcm9wRG93bjtcclxuICAgIC8vIOaYr+WQpuWQr+eUqOaPkOekuuS/oeaBry0tLeacquiiq+S9v+eUqFxyXG4gICAgQElucHV0KCkgc2hvd1Rvb2x0aXBzO1xyXG4gICAgLy8g54K55Ye75pe25rua5Yqo5q2l6ZW/XHJcbiAgICBASW5wdXQoKSBzY3JvbGxTdGVwO1xyXG4gICAgLy8g5piv5ZCm6Ieq5Yqo6YeN5paw5a695bqmLS0t5pyq6KKr5L2/55SoXHJcbiAgICBASW5wdXQoKSBhdXRvUmVzaXplO1xyXG4gICAgLy8g6K6+572u5Y+v5YWz6Zet5qCH562+6aG1LS0t5pyq6KKr5L2/55SoXHJcbiAgICBASW5wdXQoKSBjbG9zZWFibGU6IGJvb2xlYW47XHJcbiAgICAvLyDorr7nva7lj6/pgInkuK3moIfnrb7pobVcclxuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1pbnB1dC1yZW5hbWVcclxuICAgIEBJbnB1dCgndmFsdWUnKSBzZWxlY3RJZDogc3RyaW5nO1xyXG4gICAgLy8gdGFic+WuveW6puWSjOmrmOW6plxyXG4gICAgQElucHV0KCkgc2V0IHdpZHRoKHZhbHVlOiBhbnkpIHtcclxuICAgICAgICB0aGlzLl93aWR0aCA9IHRoaXMucmVzb2x2ZVNpemUodmFsdWUpO1xyXG4gICAgICAgIHRoaXMud2lkdGhTdGF0ZXMubmV4dCh0aGlzLl93aWR0aCk7XHJcbiAgICB9XHJcbiAgICBASW5wdXQoKSBzZXQgaGVpZ2h0KHZhbHVlOiBhbnkpIHtcclxuICAgICAgICB0aGlzLl9oZWlnaHQgPSB0aGlzLnJlc29sdmVTaXplKHZhbHVlKTtcclxuICAgICAgICB0aGlzLmhlaWdodFN0YXRlcy5uZXh0KHRoaXMuX2hlaWdodCk7XHJcbiAgICB9XHJcbiAgICAvLyDmkJzntKLmoYbmmK/lkKbmmL7npLpcclxuICAgIEBJbnB1dCgpIHNlYXJjaEJveFZpc2libGUgPSB0cnVlO1xyXG4gICAgLy8g5qCH562+6aG16auY5bqmLS0tLS3mnKrooqvkvb/nlKhcclxuICAgIF9oZWFkZXJIZWlnaHQ6IHN0cmluZyB8IG51bWJlcjtcclxuICAgIEBJbnB1dCgnaGVhZGVyLWhlaWdodCcpXHJcbiAgICBnZXQgaGVhZGVySGVpZ2h0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9oZWFkZXJIZWlnaHQ7XHJcbiAgICB9XHJcbiAgICBzZXQgaGVhZGVySGVpZ2h0KGhlYWRlckhlaWdodCkge1xyXG4gICAgICAgIHRoaXMuX2hlYWRlckhlaWdodCA9IHRoaXMucmVzb2x2ZVNpemUoaGVhZGVySGVpZ2h0KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDlhoXlrrnmmK/lkKbmmK9mbGV4IOWuueWZqCDnlKjkuo7lhoXpg6jlrZDlhYPntKBmbGV4LS0tLS3mnKrooqvkvb/nlKhcclxuICAgIEBJbnB1dCgpIGNvbnRlbnREaXJlY3Rpb24gPSAnY29sdW1uJztcclxuICAgIC8vIOWGheWuueaYr+WQpuWhq+WFhSAg6buY6K6k5piv5LiN5aGr5YWFXHJcbiAgICBASW5wdXQoKSBzZXQgY29udGVudEZpbGwodmFsdWUpIHtcclxuICAgICAgICB0aGlzLl9jb250ZW50RmlsbCA9IHZhbHVlO1xyXG4gICAgICAgIHRoaXMuY29udGVudEZpbGxTdGF0ZXMubmV4dCh2YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBASW5wdXQoKSBjbGlja1Rocm90dGxlVGltZSA9IDM1MDtcclxuICAgIHByaXZhdGUgY2xpY2tJdGVtcyA9IG5ldyBTdWJqZWN0PGFueT4oKTtcclxuICAgIHByaXZhdGUgY2xpY2tTdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbjtcclxuXHJcbiAgICBASW5wdXQoKSBidG5TdGF0ZXM6IE9ic2VydmFibGU8QXJyYXk8eyBba2V5OiBzdHJpbmddOiBib29sZWFuIH0+PjtcclxuICAgIEBJbnB1dCgpIGJ0blZpc2libGU6IE9ic2VydmFibGU8QXJyYXk8eyBba2V5OiBzdHJpbmddOiBib29sZWFuIH0+PjtcclxuXHJcbiAgICAvLyDmiYDmnInmoIfnrb7mlbDmja5cclxuICAgIEBJbnB1dCgpXHJcbiAgICBnZXQgdGFicygpOiBhbnlbXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RhYnM7XHJcbiAgICB9XHJcbiAgICBzZXQgdGFicyh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuX3RhYnMgPSB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBASW5wdXQoKVxyXG4gICAgZ2V0IGN1c3RvbUNsYXNzKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2N1c3RvbUNsYXNzO1xyXG4gICAgfVxyXG4gICAgc2V0IGN1c3RvbUNsYXNzKGN1c3RvbUNsYXNzOiBzdHJpbmcpIHtcclxuICAgICAgICBpZiAodGhpcy5jdXN0b21DbGFzcykge1xyXG4gICAgICAgICAgICB0aGlzLmN1c3RvbUNsYXNzLnNwbGl0KCcgJykuZm9yRWFjaCgoY3NzQ2xhc3M6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5yZW1vdmVDbGFzcyh0aGlzLmVsLCBjc3NDbGFzcyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fY3VzdG9tQ2xhc3MgPSBjdXN0b21DbGFzcyA/IGN1c3RvbUNsYXNzLnRyaW0oKSA6IG51bGw7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmN1c3RvbUNsYXNzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VzdG9tQ2xhc3Muc3BsaXQoJyAnKS5mb3JFYWNoKChjc3NDbGFzczogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKHRoaXMuZWwsIGNzc0NsYXNzKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8g5bem5L6n5omA5pyJ5qCH562+55qE5a695bqm5ZKMLOeZvuWIhuavlFxyXG4gICAgQElucHV0KCkgdGl0bGVXaWR0aCA9IDA7XHJcbiAgICBAVmlld0NoaWxkKCdsZWZ0TmF2JykgbGVmdE5hdjtcclxuICAgIEBWaWV3Q2hpbGQoJ3JpZ2h0TmF2JykgcmlnaHROYXY7XHJcbiAgICBAVmlld0NoaWxkKCd0YWJDb250YWluZXInKSB0YWJDb250YWluZXI7XHJcbiAgICBAVmlld0NoaWxkKCd0b29sYmFyQ29udGFpbmVyJykgdG9vbGJhckNvbnRhaW5lcjtcclxuICAgIEBWaWV3Q2hpbGQoJ2Ryb3BEb3duQnV0dG9uJykgZHJvcERvd25CdXR0b247XHJcbiAgICBAVmlld0NoaWxkKCd0YWJQYXJlbnQnKSB0YWJQYXJlbnQ7XHJcbiAgICBAVmlld0NoaWxkKCdidG5QbGFjZWhvbGRlcicpIGJ0blBsYWNlSG9sZGVyO1xyXG5cclxuICAgIC8qKiDpgInkuK10YWIg5YmN5LqL5Lu2ICovXHJcbiAgICBASW5wdXQoKSBiZWZvcmVTZWxlY3Q6IChlOiBUYWJzQ2hhbmdlRXZlbnQpID0+IE9ic2VydmFibGU8Ym9vbGVhbj47XHJcbiAgICBAT3V0cHV0KCkgdGFiQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxUYWJzQ2hhbmdlRXZlbnQ+KCk7XHJcbiAgICBAT3V0cHV0KCkgdGFiUmVtb3ZlID0gbmV3IEV2ZW50RW1pdHRlcjxUYWJzUmVtb3ZlVGFiRXZlbnQ+KCk7XHJcblxyXG4gICAgZ2V0IGRpcmVjdGlvbigpIHtcclxuICAgICAgICBzd2l0Y2ggKHRoaXMucG9zaXRpb24pIHtcclxuICAgICAgICAgICAgY2FzZSAndG9wJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiAnY29sdW1uJztcclxuICAgICAgICAgICAgY2FzZSAnYm90dG9tJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiAnY29sdW1uLXJldmVyc2UnO1xyXG4gICAgICAgICAgICBjYXNlICdsZWZ0JzpcclxuICAgICAgICAgICAgICAgIHJldHVybiAncm93JztcclxuICAgICAgICAgICAgY2FzZSAncmlnaHQnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdyb3ctcmV2ZXJzZSc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIOaXoOeUqO+8jOWFvOWuuVxyXG4gICAgZ2V0IHRhYkRpcmVjdGlvbigpIHtcclxuICAgICAgICBpZiAodGhpcy5wb3NpdGlvbiA9PT0gJ3RvcCcgfHwgdGhpcy5wb3NpdGlvbiA9PT0gJ2JvdHRvbScpIHtcclxuICAgICAgICAgICAgcmV0dXJuICdyb3cnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5wb3NpdGlvbiA9PT0gJ2xlZnQnIHx8IHRoaXMucG9zaXRpb24gPT09ICdyaWdodCcpIHtcclxuICAgICAgICAgICAgcmV0dXJuICdjb2x1bW4nO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIOWGheWuueWhq+WFheeKtuaAgVxyXG4gICAgY29udGVudEZpbGxTdGF0ZXMgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PGJvb2xlYW4+KGZhbHNlKTtcclxuICAgIC8vIOWGheWuueaYr+WQpuWhq+WFhSzpu5jorqTkuI3loavlhYVcclxuICAgIF9jb250ZW50RmlsbDogYW55O1xyXG4gICAgLy8g5a695bqm54q25oCBXHJcbiAgICB3aWR0aFN0YXRlcyA9IG5ldyBCZWhhdmlvclN1YmplY3Q8YW55PihmYWxzZSk7XHJcbiAgICAvLyB0YWJz5a695bqmXHJcbiAgICBfd2lkdGg6IGFueTtcclxuICAgIC8vIOmrmOW6pueKtuaAgVxyXG4gICAgaGVpZ2h0U3RhdGVzID0gbmV3IEJlaGF2aW9yU3ViamVjdDxhbnk+KGZhbHNlKTtcclxuICAgIC8vIHRhYnPlrr3luqZcclxuICAgIF9oZWlnaHQ6IGFueTtcclxuICAgIC8vIHRhYnPmoIfpopjkvY3nva5cclxuICAgIF9wb3NpdGlvbjogYW55O1xyXG4gICAgcG9zaXRpb25TdGF0ZXMgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PHN0cmluZz4oJ3RvcCcpO1xyXG4gICAgbWVudUl0ZW1zV2lkdGggPSAnYXV0byc7XHJcbiAgICAvL21heERyb3Bkb3duSCA9IDIwMDsgLS0tLS3mnKrooqvkvb/nlKhcclxuICAgIC8vIOS4i+aLieWIl+ihqOacgOWkp+WuveW6pu+8miDpnZ7mraPlgLzooajmmI7mmK/kuI3pmZDliLblrr3luqYgLS0tLS3mnKrooqvkvb/nlKhcclxuICAgIG1heERyb3Bkb3duVyA9IC0xO1xyXG4gICAgcHJpdmF0ZSBfY3VzdG9tQ2xhc3MgPSAnJztcclxuICAgIC8vIOagh+etvuWtmOWCqOWIl+ihqFxyXG4gICAgcHJpdmF0ZSBfdGFiczogRmFycmlzVGFiQ29tcG9uZW50W10gPSBbXTtcclxuXHJcbiAgICBoZWFkZXJFeHRlbmRDb25mOiBhbnk7XHJcbiAgICAvLyDlt6XlhbfmnaHmmL7npLrnm7jlhbPphY3nva5cclxuICAgIHRvb2xiYXJDb25mOiBUb29sYmFyQ29uZiA9IHtcclxuICAgICAgICBwb3NpdGlvbjogJycsXHJcbiAgICAgICAgY29udGVudHM6IFtdXHJcbiAgICB9O1xyXG4gICAgLy8g5bel5YW35p2h5Y+z5L6n5bCP5LiL5ouJ5qGG5piv5ZCm5pi+56S6XHJcbiAgICB0b29sYmFyRHBIaWRkZW4gPSB0cnVlO1xyXG4gICAgLy8g5bel5YW35p2h4oCc5pu05aSa4oCd6YeM55qE5oyJ6ZKuXHJcbiAgICBpbk1vcmVCdXR0b25Db250ZW50czogYW55W10gPSBbXTtcclxuICAgIC8vIOaYvuekuuS4i+aLieaVsOaNrlxyXG4gICAgZHJvcGRvd25UYWJzID0gW107XHJcbiAgICAvLyDpmpDol4/lt6blj7Pmu5rliqjnrq3lpLTmjInpkq5cclxuICAgIGhpZGVCdXR0b25zID0gdHJ1ZTtcclxuICAgIC8vIOWNleS4quagh+etvumhteagh+mimOeahOWuveW6plxyXG4gICAgdGFiV2lkdGg6IG51bWJlcjtcclxuXHJcbiAgICAvLyDpmpDol4/kuIvmi4lcclxuICAgIGhpZGVEcm9wRG93biA9IHRydWU7XHJcbiAgICAvLyDnpoHnlKjlt6bnrq3lpLRcclxuICAgIGRpc2FibGVMZWZ0ID0gZmFsc2U7XHJcbiAgICAvLyDnpoHnlKjlj7Pnrq3lpLRcclxuICAgIGRpc2FibGVSaWdodCA9IGZhbHNlO1xyXG4gICAgLy8g5b2T5YmN5qC35byPXHJcbiAgICBwcml2YXRlIGVsOiBIVE1MRWxlbWVudDtcclxuICAgIC8vIOiusOW9leS6i+S7tua1gVxyXG4gICAgc3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb25bXSA9IFtdO1xyXG4gICAgLy8g56aB55So5Y+z5L6n5o+Q56S6XHJcbiAgICBkaXNhYmxlUlRvb2x0aXAgPSB0cnVlO1xyXG4gICAgLy8g56aB55So5bem5L6n5o+Q56S6XHJcbiAgICBkaXNhYmxlTFRvb2x0aXAgPSB0cnVlO1xyXG4gICAgLy8g5bem5L6n5o+Q56S65pWw5o2uXHJcbiAgICBsZWZ0VG9vbHRpcFRhYnMgPSBbXTtcclxuICAgIC8vIOWPs+S+p+aPkOekuuaVsOaNrlxyXG4gICAgcmlnaHRUb29sdGlwVGFicyA9IFtdO1xyXG4gICAgLy8g5YaF6YOo5aSE55CG5qCH6K6wVGFi5qCH562+XHJcbiAgICBwcml2YXRlIF90YWJDb250YWluZXJFbDogSFRNTEVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIG1heFRvb2x0aXBMZW4gPSA1O1xyXG4gICAgLy8g5qCH6K6w5b2T5YmNVGFi5qCH562+XHJcbiAgICBhY3RpdmVJZCA9ICcnO1xyXG4gICAgcHJpdmF0ZSBybzogUmVzaXplT2JzZXJ2ZXIgPSBudWxsO1xyXG4gICAgLy8g5pCc57SidGFi5qGG55qE5YC8XHJcbiAgICBzZWFyY2hUYWJUZXh0OiBzdHJpbmc7XHJcblxyXG4gICAgQFZpZXdDaGlsZCgnZGRtJykgZGRtOiBOZ2JEcm9wZG93bk1lbnU7XHJcblxyXG4gICAgcHJpdmF0ZSBfZGRtSGFuZGxlcjogYW55ID0gbnVsbDtcclxuXHJcbiAgICB0cmFja0J5QnV0dG9uKGluZGV4OiBudW1iZXIsIGJ0bjogYW55KTogbnVtYmVyIHsgcmV0dXJuIGJ0bi5pZDsgfTtcclxuXHJcblxyXG4gICAgdGFiVmlzaWJsZUNoYW5nZWQgPSBuZXcgU3ViamVjdCgpO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHByaXZhdGUgc3RTZXJ2aWNlOiBUYWJTZXJ2aWNlLFxyXG4gICAgICAgIHByaXZhdGUgZWxlbWVudFJlZjogRWxlbWVudFJlZixcclxuICAgICAgICBwcml2YXRlIHJlbmRlcmVyOiBSZW5kZXJlcjIsXHJcbiAgICAgICAgcHJpdmF0ZSBjZFJlZjogQ2hhbmdlRGV0ZWN0b3JSZWYsXHJcbiAgICAgICAgcHJpdmF0ZSBuZ1pvbmU6IE5nWm9uZVxyXG4gICAgKSB7XHJcbiAgICAgICAgdGhpcy5lbCA9IHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50O1xyXG4gICAgICAgIHRoaXMudmVyaWZ5Q29uZmlnKCk7XHJcblxyXG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uLnB1c2godGhpcy50YWJWaXNpYmxlQ2hhbmdlZC5zdWJzY3JpYmUoKGU6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9yZUNhbGN1bGF0ZUFsbCgpO1xyXG4gICAgICAgICAgICB0aGlzLl9jYWxjdWxhdGVUb29sYmFyRHJvcGRvd25Jc1Nob3coKTtcclxuICAgICAgICAgICAgdGhpcy5fY2FsY3VsYXRlQnV0dG9uc1Nob3coKTtcclxuICAgICAgICB9KSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIOmqjOivgeS8oOmAkuWPguaVsCAqL1xyXG4gICAgcHJpdmF0ZSB2ZXJpZnlDb25maWcoKSB7XHJcbiAgICAgICAgY29uc3QgY29uZmlnOiBUYWJDb25maWcgPSB0aGlzLnN0U2VydmljZS5nZXRDb25maWcoKTtcclxuICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMsIGNvbmZpZyk7XHJcbiAgICAgICAgdGhpcy5zY3JvbGxTdGVwID0gcGFyc2VJbnQodGhpcy5zY3JvbGxTdGVwICsgJycsIDEwKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkluaXQoKSB7XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5iZWZvcmVTZWxlY3QpIHtcclxuICAgICAgICAgICAgdGhpcy5iZWZvcmVTZWxlY3QgPSAoKSA9PiBvZih0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jbGlja1N1YnNjcmlwdGlvbiA9IHRoaXMuY2xpY2tJdGVtcy5waXBlKGRlYm91bmNlVGltZSh0aGlzLmNsaWNrVGhyb3R0bGVUaW1lKSlcclxuICAgICAgICAgICAgLnN1YnNjcmliZSgoYnRuSW5mbzpUb29sYmFyQ29udGVudHNDb25mKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoYnRuSW5mby5jbGljayYmdHlwZW9mIGJ0bkluZm8uY2xpY2s9PSdmdW5jdGlvbicpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidG5JbmZvLmNsaWNrKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgIHRoaXMuX3RhYkNvbnRhaW5lckVsID0gdGhpcy50YWJDb250YWluZXIubmF0aXZlRWxlbWVudDtcclxuICAgICAgICB0aGlzLl9jcmVhdGVTdHJlYW0oKTtcclxuICAgICAgICB0aGlzLmFjdGl2ZUlkID0gdGhpcy5zZWxlY3RJZDtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMubmdab25lKSB7XHJcbiAgICAgICAgICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnJvID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ybyA9IG5ldyBSZXNpemVPYnNlcnZlcigoZWwpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmVDYWxjdWxhdGVBbGwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2FsY3VsYXRlVG9vbGJhckRyb3Bkb3duSXNTaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2NhbGN1bGF0ZUJ1dHRvbnNTaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucm8ub2JzZXJ2ZSh0aGlzLmVsLnBhcmVudEVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpIHtcclxuICAgICAgICBpZiAoY2hhbmdlc1snc2VsZWN0SWQnXSkge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdFRhYihjaGFuZ2VzWydzZWxlY3RJZCddLmN1cnJlbnRWYWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qIOagh+etvumhteWGheWuueWIneWni+WMliAqL1xyXG4gICAgbmdBZnRlckNvbnRlbnRJbml0KCk6IHZvaWQgeyB9XHJcbiAgICBuZ0FmdGVyQ29udGVudENoZWNrZWQoKSB7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcclxuICAgICAgICAvLyDkuLrkuoblhbzlrrnlvITml6fooajljZXvvIzkuI3lhbzlrrlIb3N0QmluZGluZywg6YCa6L+H6L+95YqgY2xhc3PnmoTmlrnlvI/lrp7njrBcclxuICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKHRoaXMuZWwsICdmYXJyaXMtdGFicycpO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3ModGhpcy5lbCwgJ2ZsZXgtY29sdW1uJyk7XHJcbiAgICAgICAgdGhpcy5jb250ZW50RmlsbFN0YXRlcy5zdWJzY3JpYmUoZGF0YSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKHRoaXMuZWwsICdmLXRhYnMtY29udGVudC1maWxsJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZUNsYXNzKHRoaXMuZWwsICdmLXRhYnMtY29udGVudC1maWxsJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLndpZHRoU3RhdGVzLnN1YnNjcmliZShkYXRhID0+IHtcclxuICAgICAgICAgICAgaWYgKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUodGhpcy5lbCwgJ3dpZHRoJywgZGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmhlaWdodFN0YXRlcy5zdWJzY3JpYmUoZGF0YSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKHRoaXMuZWwsICdoZWlnaHQnLCBkYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMucG9zaXRpb25TdGF0ZXMuc3Vic2NyaWJlKGRhdGEgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZUNsYXNzKHRoaXMuZWwsICdmbGV4LXJvdycpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZUNsYXNzKHRoaXMuZWwsICdmbGV4LWNvbHVtbicpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZUNsYXNzKHRoaXMuZWwsICdmbGV4LXJvdy1yZXZlcnNlJyk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlQ2xhc3ModGhpcy5lbCwgJ2ZsZXgtY29sdW1uLXJldmVyc2UnKTtcclxuICAgICAgICAgICAgaWYgKGRhdGEgPT09ICdsZWZ0Jykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyh0aGlzLmVsLCAnZmxleC1yb3cnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZGF0YSA9PT0gJ3RvcCcpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3ModGhpcy5lbCwgJ2ZsZXgtY29sdW1uJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGRhdGEgPT09ICdyaWdodCcpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3ModGhpcy5lbCwgJ2ZsZXgtcm93LXJldmVyc2UnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZGF0YSA9PT0gJ2JvdHRvbScpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3ModGhpcy5lbCwgJ2ZsZXgtY29sdW1uLXJldmVyc2UnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIOWFvOWuuee7k+adn1xyXG4gICAgICAgIHRoaXMuZ2V0VG9vbGJhckNvbmYoKTtcclxuICAgICAgICB0aGlzLl9yZUNhbGN1bGF0ZUFsbCgpO1xyXG4gICAgICAgIHRoaXMuX3NldEFjdGl2ZSgpO1xyXG4gICAgICAgIHRoaXMuX2NoYW5nZVRpdGxlU3R5bGUoKTtcclxuICAgICAgICB0aGlzLl9saXN0ZW5TaG93Q2hhbmdlcygpO1xyXG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIC8vIHRoaXMucmVuZGVyZXIubGlzdGVuKGRvY3VtZW50LCAna2V5dXAnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIC8vICAgICBpZiAoc2VsZi5zZWFyY2hJbnB1dFZpc2libGUpIHtcclxuICAgICAgICAvLyAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgLy8gfSk7XHJcblxyXG4gICAgICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fZGRtSGFuZGxlciA9IHRoaXMucmVuZGVyZXIubGlzdGVuKGRvY3VtZW50LCAnbW91c2Vkb3duJywgKGU6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFlLnRhcmdldC5jbG9zZXN0KCcuZmFycmlzLXRhYnMtaGVhZGVyJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5lbCAmJiB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoJy5kcm9wZG93bi1tZW51JykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZGRtICYmIHRoaXMuZGRtLmRyb3Bkb3duKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRkbS5kcm9wZG93bi5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIG5nQWZ0ZXJWaWV3Q2hlY2tlZCgpOiB2b2lkIHtcclxuXHJcbiAgICB9XHJcbiAgICBuZ09uRGVzdHJveSgpIHtcclxuICAgICAgICAvLyDnu4Tku7bplIDmr4Hml7YgIOWPlua2iOaJgOacieS6i+S7tuiuoumYhVxyXG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uLmZvckVhY2goc3ViID0+IHtcclxuICAgICAgICAgICAgc3ViLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb24gPSBbXTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMucm8pIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZWwucGFyZW50RWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yby51bm9ic2VydmUodGhpcy5lbC5wYXJlbnRFbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnJvID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9kZG1IYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2RkbUhhbmRsZXIoKTtcclxuICAgICAgICAgICAgdGhpcy5fZGRtSGFuZGxlciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmNsaWNrU3Vic2NyaXB0aW9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xpY2tTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjbGlja0hhbmRsZXIoYnRuSW5mbykge1xyXG4gICAgICAgIGlmICghYnRuSW5mbykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY2xpY2tJdGVtcy5uZXh0KGJ0bkluZm8pO1xyXG5cclxuICAgIH1cclxuICAgIC8vIOabtOWkmnRhYueahOaYvuekuumakOiXj1xyXG4gICAgb3BlbkNoYW5nZShlKSB7XHJcbiAgICAgICAgdGhpcy5zZWFyY2hJbnB1dFZpc2libGUgPSBlO1xyXG4gICAgICAgIHRoaXMuc2VhcmNoVGFiVGV4dCA9IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLl9yZUNhbGN1bGF0ZUFsbCgpO1xyXG4gICAgICAgIC8vIOWQr+eUqOS6huaQnOe0ou+8jOmcgOimgeWIpOaWreS4i+aLiemdouadv+eahOWAvFxyXG4gICAgICAgIC8vIOWboOS4uuS4i+aLiemdouadv+WPr+iDveWtmOWcqOmBruaMoeeahOmXrumimFxyXG4gICAgICAgIGlmIChlKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWVudUl0ZW1zV2lkdGggPSB0aGlzLmRkbS5yZXNldE1lbnVFbFdpZHRoT3BlbigpICsgJ3B4JztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLm1lbnVJdGVtc1dpZHRoID0gJ2F1dG8nO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcbiAgICAvLyDmkJzntKJ0YWJcclxuICAgIHNlYXJjaFRhYihlKSB7XHJcbiAgICAgICAgdGhpcy5zdG9wQnViYmxlKGUpO1xyXG4gICAgICAgIHRoaXMuX3JlQ2FsY3VsYXRlQWxsKCk7XHJcbiAgICB9XHJcbiAgICAvLyDpmLvmraLlhpLms6FcclxuICAgIHN0b3BCdWJibGUoZSkge1xyXG4gICAgICAgIGlmIChlICYmIGUuc3RvcFByb3BhZ2F0aW9uKSB7XHJcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgd2luZG93LmV2ZW50LmNhbmNlbEJ1YmJsZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0VG9vbGJhclN0YXRlKGlkOiBzdHJpbmcsIHN0YXRlOiBPYnNlcnZhYmxlPGFueT4gPSB0aGlzLmJ0blN0YXRlcykge1xyXG4gICAgICAgIGlmIChzdGF0ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gc3RhdGUucGlwZShcclxuICAgICAgICAgICAgICAgIG1hcCgobjogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5baWRdID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS53YXJuKGDmnKrmib5JROS4uu+8miR7aWR9IOebuOWFs+eKtuaAgeiuvue9ru+8gWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuW2lkXTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG9mKHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIOebkeWQrOWtkOe7hOS7tueahOmakOiXj+aYvuekuuWxnuaAp1xyXG4gICAgcHJpdmF0ZSBfbGlzdGVuU2hvd0NoYW5nZXMoKSB7XHJcbiAgICAgICAgLy8g5aaC5p6c6ZqQ6JeP55qE57uE5Lu25piv5r+A5rS754q25oCB77yM5YWI5bCG5YW26K6+572u5Li65bi46KeEXHJcbiAgICAgICAgdGhpcy50YWJzLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIGl0ZW0uc2hvd1N0YXRlcy5zdWJzY3JpYmUoZGF0YSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgYWN0aXZlSWRUb2tlbjtcclxuICAgICAgICAgICAgICAgIGl0ZW0uX3Nob3cgPSBkYXRhO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEgPT09IGZhbHNlICYmIGl0ZW0uaWQgPT09IHRoaXMuYWN0aXZlSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLl9hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUlkID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlSWRUb2tlbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc3QgdGFicyA9IHRoaXMudGFicy5maWx0ZXIoaXRlbSA9PiBpdGVtLl9zaG93ID09PSB0cnVlKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRUYWJJZCA9IHRhYnMubGVuZ3RoID8gdGFic1swXS5pZCA6IG51bGw7XHJcbiAgICAgICAgICAgICAgICAvLyDnhLblkI7lsIbmmL7npLrnirbmgIHkuIvnmoTnrKzkuIDkuKp0YWLmv4DmtLtcclxuICAgICAgICAgICAgICAgIGlmIChkZWZhdWx0VGFiSWQgJiYgYWN0aXZlSWRUb2tlbiA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhYnMuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0uaWQgPT09IGRlZmF1bHRUYWJJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVJZCA9IGl0ZW0uaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRhYnNbaW5kZXhdLl9hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRUb29sYmFyQ29uZigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5jZFJlZi5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDpgInkuK1UYWJcclxuICAgICAqIEBwYXJhbSAgdGFiSWQgdGFi5qCH6K+GXHJcbiAgICAgKi9cclxuICAgIHNlbGVjdFRhYih0YWJJZDogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRUYWIgPSB0aGlzLl9nZXRUYWJCeUlkKHRhYklkKTtcclxuICAgICAgICB0aGlzLl9zZWxlY3RUYWIoc2VsZWN0ZWRUYWIudGFiLCBzZWxlY3RlZFRhYi5pbmRleCk7XHJcbiAgICB9XHJcbiAgICBfY3BTZWxlY3RUYWJCeUluZGV4KGV2OiBFdmVudCwgaWQ6IHN0cmluZywgZGRtID0gbnVsbCkge1xyXG4gICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0RUwgPSBldi50YXJnZXQgYXMgYW55O1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgdGFyZ2V0RUwuY2xhc3NOYW1lLmluZGV4T2YoJ3N0LWRyb3AtY2xvc2UnKSA+IC0xIHx8XHJcbiAgICAgICAgICAgIHRhcmdldEVMLnBhcmVudEVsZW1lbnQuY2xhc3NOYW1lLmluZGV4T2YoJ3N0LWRyb3AtY2xvc2UnKSA+IC0xXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIC8vIOmYu+atouWGkuazoeWSjOaNleiOt+S6i+S7tiDngrnlh7vliKDpmaTmoIforrAg5YiZ5omn6KGM5Yig6Zmk5qCH562+5pa55rOVICDogIzkuI3mmK/pgInkuK3moIfnrb5cclxuICAgICAgICAgICAgdGhpcy5jbG9zZVRhYihpZCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8g6Zi75q2i5YaS5rOhXHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0VGFiKGlkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5nZXRUb29sYmFyQ29uZigpO1xyXG4gICAgICAgIHRoaXMuY2RSZWYubWFya0ZvckNoZWNrKCk7XHJcbiAgICAgICAgdGhpcy5fcmVDYWxjdWxhdGVBbGwoKTtcclxuICAgICAgICB0aGlzLl9jYWxjdWxhdGVUb29sYmFyRHJvcGRvd25Jc1Nob3coKTtcclxuICAgICAgICB0aGlzLl9jYWxjdWxhdGVCdXR0b25zU2hvdygpO1xyXG5cclxuICAgICAgICBpZiAoZGRtKSB7XHJcbiAgICAgICAgICAgIGRkbS5kcm9wZG93bi5jbG9zZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDpgJrov4d0YWJz55qE57Si5byV6YCJ5oupIHRhYlxyXG4gICAgICogQHBhcmFtIGluZGV4IHRhYnPntKLlvJVcclxuICAgICAqL1xyXG4gICAgc2VsZWN0VGFiQnlJbmRleChpbmRleDogbnVtYmVyKSB7XHJcbiAgICAgICAgaWYgKGluZGV4ID49IDAgJiYgaW5kZXggPCB0aGlzLnRhYnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdFRhYiA9IHRoaXMudGFic1tpbmRleF07XHJcbiAgICAgICAgICAgIHRoaXMuX3NlbGVjdFRhYihzZWxlY3RUYWIsIGluZGV4KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKiDpgInkuK10YWLml7YgIOaatOmcsuWHuumAieS4rXRhYueahGlkIOWSjOWFtuS5i+WQjueahGlkICovXHJcbiAgICBwcml2YXRlIF9zZWxlY3RUYWIodGFiLCBpbmRleCkge1xyXG4gICAgICAgIGlmICh0YWIgJiYgIXRhYi5kaXNhYmxlZCAmJiB0aGlzLmFjdGl2ZUlkICE9PSB0YWIuaWQpIHtcclxuXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5iZWZvcmVTZWxlY3QpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYmVmb3JlU2VsZWN0ID0gKCkgPT4gb2YodHJ1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHRhYnNDaGFuZ2VFdmVudFBhcmFtID0ge1xyXG4gICAgICAgICAgICAgICAgcHJldklkOiB0aGlzLmFjdGl2ZUlkLFxyXG4gICAgICAgICAgICAgICAgbmV4dElkOiB0YWIuaWRcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGhpcy5iZWZvcmVTZWxlY3QodGFic0NoYW5nZUV2ZW50UGFyYW0pLnN1YnNjcmliZSgoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUlkID0gdGFiLmlkO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIOmmluWFiOS4jea/gOa0u+aJgOacieeahHRhYumhtSAg54S25ZCO5r+A5rS75b2T5YmNdGFi6aG1XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbGV0IGluZGV4ID0gLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YWJzLmZvckVhY2goKGl0ZW06IEZhcnJpc1RhYkNvbXBvbmVudCwgaTogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uX2FjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFic1tpbmRleF0uX2FjdGl2ZSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0VG9vbGJhckNvbmYoKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyDmu5rliqjliLDlj6/op4HljLrln5/lhoVcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbFRhYkludG9WaWV3KGluZGV4KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNkUmVmLmRldGVjdENoYW5nZXMoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YWJDaGFuZ2UuZW1pdCh0YWJzQ2hhbmdlRXZlbnRQYXJhbSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgX3NldEFjdGl2ZSgpIHtcclxuICAgICAgICBpZiAodGhpcy50YWJzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBjb25zdCB0YWJzID0gdGhpcy50YWJzLmZpbHRlcihpdGVtID0+IGl0ZW0uX3Nob3cgPT09IHRydWUpO1xyXG4gICAgICAgICAgICBjb25zdCBhY3RpdmVUYWIgPSB0aGlzLl9nZXRUYWJCeUlkKHRoaXMuYWN0aXZlSWQpLnRhYjtcclxuICAgICAgICAgICAgdGhpcy5hY3RpdmVJZCA9IGFjdGl2ZVRhYiA/IGFjdGl2ZVRhYi5pZCA6IHRoaXMudGFicy5sZW5ndGggPyB0aGlzLnRhYnNbMF0uaWQgOiBudWxsO1xyXG5cclxuICAgICAgICAgICAgLy8g6L+H5ruk5o6Jc2hvdz1mYWxzZe+8iOmakOiXj++8ieeahHRhYlxyXG4gICAgICAgICAgICBpZiAodGFicy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZUlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0VGFiID0gdGFicy5maW5kKGl0ZW0gPT4gaXRlbS5pZCA9PT0gdGhpcy5hY3RpdmVJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldFRhYikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUlkID0gdGFyZ2V0VGFiLmlkO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVJZCA9IHRhYnNbMF0uaWQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUlkID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnRhYnMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgIGl0ZW0uX2FjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0uaWQgPT09IHRoaXMuYWN0aXZlSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLl9hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBhY3RpdmVJZCDmmL7npLrmn5DkuKp0YWJcclxuICAgICAqL1xyXG4gICAgc2hvd1RhYih0YWJJZDogYW55LCBzZWxlY3RhYmxlID0gdHJ1ZSkge1xyXG4gICAgICAgIGNvbnN0IGxlbiA9IHRoaXMudGFicy5sZW5ndGg7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy50YWJzW2ldLmlkID09PSB0YWJJZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50YWJzW2ldLl9zaG93ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGlmIChzZWxlY3RhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RUYWIodGFiSWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gYWN0aXZlSWQg6ZqQ6JeP5p+Q5LiqdGFiXHJcbiAgICAgKi9cclxuICAgIGhpZGVUYWIoYWN0aXZlSWQ6IGFueSkge1xyXG4gICAgICAgIGNvbnN0IHNob3dUYWJzID0gdGhpcy50YWJzLmZpbHRlcihpdGVtID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGl0ZW0uX3Nob3cgPT09IHRydWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3QgbGVuID0gc2hvd1RhYnMubGVuZ3RoIC0gMTtcclxuICAgICAgICBpZiAobGVuIDwgMCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBpbmRleDogbnVtYmVyO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChzaG93VGFic1tpXS5pZCA9PT0gYWN0aXZlSWQpIHtcclxuICAgICAgICAgICAgICAgIHNob3dUYWJzW2ldLl9zaG93ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBpbmRleCA9IGk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaW5kZXggPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfSBlbHNlIGlmIChpbmRleCA9PT0gbGVuICYmIGxlbiA8IDEpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RUYWIoJycpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaW5kZXggPT09IGxlbiAmJiBsZW4gPj0gMSkge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdFRhYihzaG93VGFic1tsZW4gLSAxXS5pZCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RUYWIoc2hvd1RhYnNbaW5kZXggKyAxXS5pZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDmt7vliqDmoIfnrb5cclxuICAgICAqIEBwYXJhbSBjdXJUYWJzIOaVsOe7hOaIluiAheWvueixoVxyXG4gICAgICogQHBhcmFtIGFjdGl2ZUlkIOiuvue9rlxyXG4gICAgICovXHJcbiAgICBhZGRUYWJzKGN1clRhYnM6IGFueVtdLCBpbmRleCwgc2V0QWN0aXZlSWQpIHtcclxuICAgICAgICBpZiAoY3VyVGFicy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMudGFicy5zcGxpY2UoaW5kZXgsIDAsIC4uLmN1clRhYnMpO1xyXG4gICAgICAgICAgICAvLyDljrvph41cclxuICAgICAgICAgICAgdGhpcy50YWJzID0gdGhpcy5fdW5pcXVlKHRoaXMudGFicyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzZXRBY3RpdmVJZCAmJiB0aGlzLmFjdGl2ZUlkICE9PSBzZXRBY3RpdmVJZCkge1xyXG4gICAgICAgICAgICBjb25zdCBmaWx0ZXJUYWIgPSB0aGlzLl9nZXRUYWJCeUlkKHNldEFjdGl2ZUlkKTtcclxuICAgICAgICAgICAgaWYgKGZpbHRlclRhYi5pbmRleCA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFRhYihzZXRBY3RpdmVJZCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUlkID0gc2V0QWN0aXZlSWQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbFRhYkludG9WaWV3KGZpbHRlclRhYi5pbmRleCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jZFJlZi5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgdGhpcy5fcmVDYWxjdWxhdGVBbGwoKTtcclxuICAgICAgICB0aGlzLl9jaGFuZ2VUaXRsZVN0eWxlKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOa3u+WKoOagh+etvuaXtiAg5Y676YeNXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIF91bmlxdWUob2JqQXJyYXkpIHtcclxuICAgICAgICBjb25zdCBoYXNoID0ge307XHJcbiAgICAgICAgb2JqQXJyYXkgPSBvYmpBcnJheS5yZWR1Y2UoZnVuY3Rpb24gKGl0ZW0sIG5leHQpIHtcclxuICAgICAgICAgICAgaWYgKGhhc2hbbmV4dC5pZF0pIHtcclxuICAgICAgICAgICAgICAgIGhhc2hbbmV4dC5pZF0gPSAnJztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGhhc2hbbmV4dC5pZF0gPSB0cnVlICYmIGl0ZW0ucHVzaChuZXh0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gaXRlbTtcclxuICAgICAgICB9LCBbXSk7XHJcbiAgICAgICAgcmV0dXJuIG9iakFycmF5O1xyXG4gICAgfVxyXG4gICAgLyog6YCa6L+HdGFi5YiX6KGo55qE5bqP5YiX5Yig6ZmkdGFiICovXHJcbiAgICByZW1vdmVUYWJCeUluZGV4KGluZGV4OiBudW1iZXIpIHtcclxuICAgICAgICBjb25zdCBsZW4gPSB0aGlzLnRhYnMubGVuZ3RoIC0gMTtcclxuICAgICAgICBpZiAoaW5kZXggPCAwIHx8IGluZGV4ID4gbGVuKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgcmVtb3ZlVGFiID0gdGhpcy50YWJzW2luZGV4XTtcclxuICAgICAgICByZW1vdmVUYWIuX2FjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZUlkID09PSByZW1vdmVUYWIuaWQpIHtcclxuICAgICAgICAgICAgLy8g5Y+q5pyJ5LiA5Liq6ICM5LiU6KKr5Yig6ZmkXHJcbiAgICAgICAgICAgIGlmIChsZW4gPT09IDApIHtcclxuICAgICAgICAgICAgICAgIC8vIOWmguaenOaJgOacieagh+etvuWdh+WIoOmZpCDmv4DmtLtpZOS4uuepulxyXG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVJZCA9ICcnO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGluZGV4ID09PSBsZW4pIHtcclxuICAgICAgICAgICAgICAgIC8vIOWmguaenOWIoOmZpOeahOaYr+acgOWQjuS4gOS4quagh+etviDorr7nva7lhbbliY3pnaLnmoTlpITkuo7mv4DmtLvnirbmgIFcclxuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlSWQgPSB0aGlzLnRhYnNbbGVuIC0gMV0uaWQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRhYnNbaW5kZXggLSAxXS5fYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIOWmguaenOWFtuS7luaDheWGtSAg6K6+572u5YW25ZCO6Z2i55qE5aSE5LqO5r+A5rS754q25oCBXHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUlkID0gdGhpcy50YWJzW2luZGV4ICsgMV0uaWQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRhYnNbaW5kZXggKyAxXS5fYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnRhYnMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICAgICAgdGhpcy5zY3JvbGxUYWJJbnRvVmlldyhpbmRleCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy50YWJzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudGFiUmVtb3ZlLmVtaXQoe1xyXG4gICAgICAgICAgICByZW1vdmVJbmRleDogaW5kZXgsXHJcbiAgICAgICAgICAgIHJlbW92ZUlkOiByZW1vdmVUYWIuaWQsXHJcbiAgICAgICAgICAgIGFjdGl2ZUlkOiB0aGlzLmFjdGl2ZUlkXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5jZFJlZi5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWFs+mXreagh+etviAg6Lef5Yig6Zmk5qCH562+5LiN5ZCMXHJcbiAgICAgKiBAcGFyYW0gc3RyaW5nXHJcbiAgICAgKi9cclxuICAgIGNsb3NlVGFiKGFjdGl2ZUlkKSB7XHJcbiAgICAgICAgY29uc3QgbGVuID0gdGhpcy50YWJzLmxlbmd0aDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhYiA9IHRoaXMudGFic1tpXTtcclxuICAgICAgICAgICAgaWYgKHRhYi5pZCA9PT0gYWN0aXZlSWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlVGFiQnlJbmRleChpKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5Yid5aeL5YyWXHJcbiAgICAgKi9cclxuICAgIGxvYWQoKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnRhYnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMudGFic1tpXS5pZCA9PT0gdGhpcy5hY3RpdmVJZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50YWJzW2ldLl9hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5oiq5Y+WdGFi5Lit55qEdGl0bGUs6LaF6L+HNuS9je+8jOaIquaWrVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIF90cnVuY2F0ZVRpdGxlKCkge1xyXG4gICAgICAgIHRoaXMudGFicyA9IHRoaXMudGFicy5tYXAoaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIGl0ZW0udGl0bGUgPSBpdGVtLnRpdGxlLmxlbmd0aCA+IDYgPyBpdGVtLnRpdGxlLnN1YnN0cigwLCA2KSA6IGl0ZW0udGl0bGU7XHJcbiAgICAgICAgICAgIHJldHVybiBpdGVtO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5pu/5o2idGFi5Lit55qEdGl0bGXpopzoibJcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBfY2hhbmdlVGl0bGVTdHlsZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5hdXRvVGl0bGVXaWR0aCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0ICR0ZXh0RWxzID0gdGhpcy5fdGFiQ29udGFpbmVyRWwucXVlcnlTZWxlY3RvckFsbCgnLnN0LXRhYi10ZXh0Jyk7XHJcbiAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCAkdGV4dEVscy5sZW5ndGg7IGsrKykge1xyXG4gICAgICAgICAgICBsZXQgcGFyZW50RWwgPSAkdGV4dEVsc1trXS5wYXJlbnROb2RlO1xyXG4gICAgICAgICAgICBpZiAoJHRleHRFbHNba10uc2Nyb2xsV2lkdGggPiBwYXJlbnRFbFsnb2Zmc2V0V2lkdGgnXSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50YWJzW2tdLnRpdGxlT3ZlcmZsb3cgPSB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50YWJzW2tdLnRpdGxlT3ZlcmZsb3cgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvL3RoaXMuY2RSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDliJvlu7rmtYFcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBfY3JlYXRlU3RyZWFtKCkge1xyXG4gICAgICAgIFt0aGlzLnJpZ2h0TmF2LCB0aGlzLmxlZnROYXZdLmZvckVhY2goKGN1ckJ0biwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZGlyZWN0aW9uID0gaW5kZXggPyAtMSA6IDE7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBtb3VzZWRvd24kID0gZnJvbUV2ZW50KGN1ckJ0bi5uYXRpdmVFbGVtZW50LCAnbW91c2Vkb3duJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vdXNldXAkID0gZnJvbUV2ZW50KGN1ckJ0bi5uYXRpdmVFbGVtZW50LCAnbW91c2V1cCcpO1xyXG4gICAgICAgICAgICBjb25zdCBuZXdNb3VzZURvd24kID0gbW91c2Vkb3duJC5waXBlKFxyXG4gICAgICAgICAgICAgICAgc3dpdGNoTWFwKChldmVudDogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW50ZXJ2YWwkID0gb2YoMCkucGlwZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uY2F0KGludGVydmFsKDgwKSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VVbnRpbChtb3VzZXVwJCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjYW4oKHN1bTogbnVtYmVyLCBudW06IG51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN1bSArIHRoaXMuc2Nyb2xsU3RlcCAqIGRpcmVjdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgMCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VXaGlsZShudW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRpcmVjdGlvbiA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIXRoaXMuZGlzYWJsZVJpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICF0aGlzLmRpc2FibGVMZWZ0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFwKHYgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IHYsIGRpcmVjdGlvbiB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGludGVydmFsJDtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vdXNlcHJlc3NTdWIgPSBuZXdNb3VzZURvd24kLnN1YnNjcmliZShjaGFuZ2UgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2Nyb2xsVGFiKGNoYW5nZS52YWx1ZSwgY2hhbmdlLmRpcmVjdGlvbik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbi5wdXNoKG1vdXNlcHJlc3NTdWIpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBpZiAodGhpcy5hdXRvUmVzaXplKSB7XHJcbiAgICAgICAgLy8gICAgIC8vIOiuoumYhXdpbmRvd3MgcmVzaXpl5LqL5Lu2XHJcbiAgICAgICAgLy8gICAgIHRoaXMuc3Vic2NyaXB0aW9uLnB1c2goXHJcbiAgICAgICAgLy8gICAgICAgICBmcm9tRXZlbnQod2luZG93LCAncmVzaXplJylcclxuICAgICAgICAvLyAgICAgICAgICAgICAucGlwZSh0aHJvdHRsZVRpbWUoODApKVxyXG4gICAgICAgIC8vICAgICAgICAgICAgIC5zdWJzY3JpYmUoZSA9PiB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIHRoaXMuY2RSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgLy8gICAgICk7XHJcbiAgICAgICAgLy8gfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDmjInnhafmlrnlkJHvvIzmu5rliqjliLDmjIflrprkvY3nva5cclxuICAgICAqIEBwYXJhbSBkaXN0X3Njcm9sbCDnm67moIfmu5rliqhcclxuICAgICAqIEBwYXJhbSBkaXJlY3Rpb24g5pa55ZCRXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgX3Njcm9sbFRhYihtb3ZlLCBkaXJlY3Rpb24pIHtcclxuICAgICAgICBjb25zdCBkaXN0X3Njcm9sbGxlZnQgPSB0aGlzLl90YWJDb250YWluZXJFbC5zY3JvbGxMZWZ0ICsgbW92ZTtcclxuICAgICAgICBjb25zdCBtYXhfc2Nyb2xsX2xlZnQgPVxyXG4gICAgICAgICAgICB0aGlzLl90YWJDb250YWluZXJFbC5zY3JvbGxXaWR0aCAtIHRoaXMuX3RhYkNvbnRhaW5lckVsLm9mZnNldFdpZHRoO1xyXG4gICAgICAgIC8vIOagh+etvumhteW3puS+p+enu+WKqFxyXG4gICAgICAgIGlmIChkaXJlY3Rpb24gPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3RhYkNvbnRhaW5lckVsLnNjcm9sbExlZnQgPSBNYXRoLm1pbihcclxuICAgICAgICAgICAgICAgIGRpc3Rfc2Nyb2xsbGVmdCxcclxuICAgICAgICAgICAgICAgIG1heF9zY3JvbGxfbGVmdFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uIDwgMCkge1xyXG4gICAgICAgICAgICAvLyDmoIfnrb7pobXlj7Pkvqfnp7vliqhcclxuICAgICAgICAgICAgdGhpcy5fdGFiQ29udGFpbmVyRWwuc2Nyb2xsTGVmdCA9IE1hdGgubWF4KGRpc3Rfc2Nyb2xsbGVmdCwgMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3JlQ2FsY3VsYXRlU2lkZXMoKTtcclxuICAgICAgICAvLyB0aGlzLmNkUmVmLmRldGVjdENoYW5nZXMoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5oyH5a6a5b2T5YmN5ruR5Yqo5Yiw5Y+v6KeG5Yy65Z+f4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU5pyq5rWL6K+VXHJcbiAgICAgKiBpbmRleFxyXG4gICAgICovXHJcbiAgICBzY3JvbGxUYWJJbnRvVmlldyhpbmRleCkge1xyXG4gICAgICAgIGlmICghdGhpcy5fdGFiQ29udGFpbmVyRWwgfHwgdGhpcy5oaWRlQnV0dG9ucykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHRhYkluZGV4ID0gcGFyc2VJbnQoaW5kZXggKyAnJywgMTApO1xyXG4gICAgICAgIGxldCB0YWJUb1Njcm9sbDtcclxuXHJcbiAgICAgICAgLy8gZmlyc3Qgd2UgZmluZCB0aGUgdGFiIGVsZW1lbnQuXHJcbiAgICAgICAgaWYgKHRhYkluZGV4ID49IDApIHtcclxuICAgICAgICAgICAgY29uc3QgYWxsVGFicyA9IHRoaXMuX3RhYkNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5uYXYtaXRlbScpO1xyXG4gICAgICAgICAgICBpZiAoYWxsVGFicy5sZW5ndGggPiB0YWJJbmRleCkge1xyXG4gICAgICAgICAgICAgICAgdGFiVG9TY3JvbGwgPSBhbGxUYWJzW3RhYkluZGV4XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIHNjcm9sbCBzZWxlY3RlZCB0YWIgaW50byB2aWV3XHJcbiAgICAgICAgICAgIGNvbnN0IGFjdGl2ZVRhYiA9IHRoaXMuX3RhYkNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoJ2xpLmFjdGl2ZScpO1xyXG4gICAgICAgICAgICBpZiAoYWN0aXZlVGFiKSB7XHJcbiAgICAgICAgICAgICAgICB0YWJUb1Njcm9sbCA9IGFjdGl2ZVRhYjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRhYlRvU2Nyb2xsKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhYl9sZWZ0ID0gcGFyc2VJbnQoXHJcbiAgICAgICAgICAgICAgICB0YWJUb1Njcm9sbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0ICsgJycsXHJcbiAgICAgICAgICAgICAgICAxMFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBjb25zdCB0YWJzX2xlZnQgPSBwYXJzZUludChcclxuICAgICAgICAgICAgICAgIHRoaXMuX3RhYkNvbnRhaW5lckVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQgKyAnJyxcclxuICAgICAgICAgICAgICAgIDEwXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJpZ2h0UG9zaXRpb24gPVxyXG4gICAgICAgICAgICAgICAgdGFiX2xlZnQgK1xyXG4gICAgICAgICAgICAgICAgcGFyc2VJbnQodGFiVG9TY3JvbGwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGggKyAnJywgMTApIC1cclxuICAgICAgICAgICAgICAgIHRhYnNfbGVmdDtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGxlZnRQb3NpdGlvbiA9IHRhYl9sZWZ0IC0gdGFic19sZWZ0IC0gMTA7XHJcbiAgICAgICAgICAgIGlmIChsZWZ0UG9zaXRpb24gPCAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zY3JvbGxUYWIobGVmdFBvc2l0aW9uLCAtMSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmlnaHRQb3NpdGlvbiA+IHRoaXMuX3RhYkNvbnRhaW5lckVsLm9mZnNldFdpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zY3JvbGxUYWIoXHJcbiAgICAgICAgICAgICAgICAgICAgcmlnaHRQb3NpdGlvbiAtIHRoaXMuX3RhYkNvbnRhaW5lckVsLm9mZnNldFdpZHRoICsgMjAsXHJcbiAgICAgICAgICAgICAgICAgICAgMVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWIh+aNonRhYuWQju+8jOmHjeaWsOiOt+WPlumcgOimgeivpXRhYuS4i+W3peWFt+adoeaMiemSrueahOmFjee9ruS/oeaBr+S7peWPiumakOiXj+abtOWkmuaMiemSrlxyXG4gICAgICog5Lul5Y+K6I635Y+W6K+ldGFi5LiL55qE5aS06YOo5omp5bGV5Yy65Z+fXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZ2V0VG9vbGJhckNvbmYoKSB7XHJcbiAgICAgICAgY29uc3QgdGFiQ29uZmlnID0gdGhpcy50YWJzLmZpbHRlcihpdGVtID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGl0ZW0uX2FjdGl2ZSA9PT0gdHJ1ZTtcclxuICAgICAgICB9KVswXTtcclxuICAgICAgICBpZiAoIXRhYkNvbmZpZyB8fCAhdGFiQ29uZmlnLmhhc093blByb3BlcnR5KCd0b29sYmFyJykpIHtcclxuICAgICAgICAgICAgdGhpcy50b29sYmFyQ29uZiA9IG51bGw7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy50b29sYmFyQ29uZiA9IHRhYkNvbmZpZy50b29sYmFyO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDojrflj5bor6V0YWLkuIvnmoTlpLTpg6jmianlsZXljLrln59cclxuICAgICAgICBpZiAoIXRhYkNvbmZpZyB8fCAhdGFiQ29uZmlnLmhhc093blByb3BlcnR5KCdmYXJyaXNUYWJzRXh0ZW5kRGlyZWN0aXZlJykpIHtcclxuICAgICAgICAgICAgdGhpcy5oZWFkZXJFeHRlbmRDb25mID0gbnVsbDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmhlYWRlckV4dGVuZENvbmYgPSB0YWJDb25maWcuZmFycmlzVGFic0V4dGVuZERpcmVjdGl2ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g6ZqQ6JeP5pu05aSa5oyJ6ZKuXHJcbiAgICAgICAgdGhpcy50b29sYmFyRHBIaWRkZW4gPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuY2RSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6K6h566X5bel5YW35qCP5piv5ZCm5pi+56S65LiL5ouJ5oyJ6ZKuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgX2NhbGN1bGF0ZVRvb2xiYXJEcm9wZG93bklzU2hvdygpIHtcclxuICAgICAgICBsZXQgaGVhZGVyRXh0ZW5kRWw6IGFueTtcclxuICAgICAgICBsZXQgaGVhZGVyRXh0ZW5kRWxXaWR0aCA9IDA7XHJcbiAgICAgICAgaWYgKCF0aGlzLnRvb2xiYXJDb250YWluZXIgfHwgIXRoaXMudG9vbGJhckNvbmYpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB0b29sYmFyQ29udGFpbmVyID0gdGhpcy5oYXNJbkhlYWRDbCgpID8gdGhpcy50b29sYmFyQ29udGFpbmVyLm5hdGl2ZUVsZW1lbnQgOiB0aGlzLnRvb2xiYXJDb250YWluZXIubmF0aXZlRWxlbWVudC5wYXJlbnRFbGVtZW50O1xyXG4gICAgICAgIGxldCBkaXZFbCA9IHRvb2xiYXJDb250YWluZXIucXVlcnlTZWxlY3RvcignLmZhcnJpcy10YWJzLWlubGluZS1mbGV4Jyk7XHJcbiAgICAgICAgaWYgKCFkaXZFbCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmhlYWRlckV4dGVuZENvbmYpIHtcclxuICAgICAgICAgICAgaGVhZGVyRXh0ZW5kRWwgPSB0b29sYmFyQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5mYXJyaXMtdGFicy1oZWFkZXItZXh0ZW5kJyk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlU3R5bGUoaGVhZGVyRXh0ZW5kRWwsICdvdmVyZmxvdycpO1xyXG4gICAgICAgICAgICBoZWFkZXJFeHRlbmRFbFdpZHRoID0gaGVhZGVyRXh0ZW5kRWwub2Zmc2V0V2lkdGg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOaMiemSruWcqOWGheWuueWMulxyXG4gICAgICAgIGlmICghdGhpcy5oYXNJbkhlYWRDbCgpICYmIHRoaXMuYnRuUGxhY2VIb2xkZXIubmF0aXZlRWxlbWVudC5vZmZzZXRXaWR0aCA+IHRvb2xiYXJDb250YWluZXIub2Zmc2V0V2lkdGgpIHtcclxuICAgICAgICAgICAgdGhpcy50b29sYmFyRHBIaWRkZW4gPSBmYWxzZTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaGFzSW5IZWFkQ2woKSAmJiB0aGlzLmJ0blBsYWNlSG9sZGVyLm5hdGl2ZUVsZW1lbnQub2Zmc2V0V2lkdGggPiB0b29sYmFyQ29udGFpbmVyLm9mZnNldFdpZHRoIC0gaGVhZGVyRXh0ZW5kRWxXaWR0aCkge1xyXG4gICAgICAgICAgICAvLyDmjInpkq7lnKjlpLTpg6jlt6XlhbfmoI9cclxuICAgICAgICAgICAgdGhpcy50b29sYmFyRHBIaWRkZW4gPSBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnRvb2xiYXJEcEhpZGRlbiA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY2RSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6K6h566X5pi+56S655qE5oyJ6ZKu5Liq5pWw5Y+K5pu05aSa5Lit5pi+56S655qE5oyJ6ZKu5Liq5pWwXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgX2NhbGN1bGF0ZUJ1dHRvbnNTaG93KCkge1xyXG4gICAgICAgIGxldCBoZWFkZXJFeHRlbmRFbDogYW55O1xyXG4gICAgICAgIGxldCBoZWFkZXJFeHRlbmRFbFdpZHRoID0gMDtcclxuICAgICAgICBpZiAoIXRoaXMudG9vbGJhckNvbnRhaW5lciB8fCAhdGhpcy50b29sYmFyQ29uZikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHRvb2xiYXJDb250YWluZXIgPSB0aGlzLmhhc0luSGVhZENsKCkgPyB0aGlzLnRvb2xiYXJDb250YWluZXIubmF0aXZlRWxlbWVudCA6IHRoaXMudG9vbGJhckNvbnRhaW5lci5uYXRpdmVFbGVtZW50LnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgICAgbGV0IGRpdkVsID0gdG9vbGJhckNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZmFycmlzLXRhYnMtaW5saW5lLWZsZXgnKTtcclxuICAgICAgICBsZXQgYnRuUGxhY2VIb2xkZXJFbCA9IHRoaXMuYnRuUGxhY2VIb2xkZXIubmF0aXZlRWxlbWVudDtcclxuICAgICAgICBsZXQgYnRuUGxhY2VIb2xkZXJCdG5zID0gYnRuUGxhY2VIb2xkZXJFbC5xdWVyeVNlbGVjdG9yQWxsKCdidXR0b24nKTtcclxuICAgICAgICBpZiAoIWRpdkVsIHx8IGJ0blBsYWNlSG9sZGVyQnRucy5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOatpOWkhOacieS4qkJ1Z++8jOWmguaenOaYr2luQ29udGVudOi/mOaYr2hlYWRlckV4dGVuZENvbmbnmoTmg4XlhrXkuIvvvIzmjInpkq7nmoTkvY3nva7lvaLlpoJpbkhlYWRcclxuICAgICAgICBpZiAodGhpcy5oZWFkZXJFeHRlbmRDb25mKSB7XHJcbiAgICAgICAgICAgIGhlYWRlckV4dGVuZEVsID0gdG9vbGJhckNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZmFycmlzLXRhYnMtaGVhZGVyLWV4dGVuZCcpO1xyXG4gICAgICAgICAgICBoZWFkZXJFeHRlbmRFbFdpZHRoID0gdGhpcy5oYXNJbkhlYWRDbCgpID8gaGVhZGVyRXh0ZW5kRWwub2Zmc2V0V2lkdGggOiAwO1xyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgbW9yZUJ1dHRvbiA9IHRvb2xiYXJDb250YWluZXIucXVlcnlTZWxlY3RvcignLm1vcmVidG4nKTtcclxuICAgICAgICAvLyDorqHnrpfmjInpkq7nmoTlrr3luqYgICAgICBcclxuICAgICAgICBsZXQgYmFzaWNTdGFydCA9IHBhcnNlSW50KGJ0blBsYWNlSG9sZGVyRWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCk7XHJcbiAgICAgICAgbGV0IGJhc2ljV2lkdGggPSB0b29sYmFyQ29udGFpbmVyLm9mZnNldFdpZHRoIC0gbW9yZUJ1dHRvbi5vZmZzZXRXaWR0aCAtIDEyIC0gaGVhZGVyRXh0ZW5kRWxXaWR0aDtcclxuICAgICAgICBsZXQgdG9vbGJhckRyb3Bkb3duSGlkZGVuID0gdHJ1ZTtcclxuICAgICAgICBsZXQgayA9IDBcclxuICAgICAgICAvLyDlj6rmnInkuIDkuKrmjInpkq5cclxuICAgICAgICBpZiAoYnRuUGxhY2VIb2xkZXJCdG5zLmxlbmd0aCA9PSAxKSB7XHJcbiAgICAgICAgICAgIGlmIChidG5QbGFjZUhvbGRlckVsLm9mZnNldFdpZHRoID4gYmFzaWNXaWR0aCkge1xyXG4gICAgICAgICAgICAgICAgdG9vbGJhckRyb3Bkb3duSGlkZGVuID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBrID0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZvciAoayA9IDE7IGsgPD0gYnRuUGxhY2VIb2xkZXJCdG5zLmxlbmd0aCAtIDE7IGsrKykge1xyXG4gICAgICAgICAgICAgICAgLy8g5aaC5p6c5YaF5a656LaF5Ye6LOiAg+iZkeWIsOaMiemSruS5i+mXtOeahOmXtOi3nVxyXG4gICAgICAgICAgICAgICAgaWYgKGsgPT0gYnRuUGxhY2VIb2xkZXJCdG5zLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYnRuUGxhY2VIb2xkZXJFbC5vZmZzZXRXaWR0aCA+IGJhc2ljV2lkdGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9vbGJhckRyb3Bkb3duSGlkZGVuID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGsgPSBrIC0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwYXJzZUludChidG5QbGFjZUhvbGRlckJ0bnNba10uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCkgLSBiYXNpY1N0YXJ0ID4gYmFzaWNXaWR0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvb2xiYXJEcm9wZG93bkhpZGRlbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGsgPSBrIC0gMTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy50b29sYmFyRHBIaWRkZW4gPSB0b29sYmFyRHJvcGRvd25IaWRkZW47XHJcbiAgICAgICAgbGV0IHNob3dCdG5zID0gZGl2RWwucXVlcnlTZWxlY3RvckFsbCgnYnV0dG9uJyk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBrOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZShzaG93QnRuc1tpXSwgJ2Rpc3BsYXknLCAnJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAobGV0IG0gPSBrOyBtIDwgc2hvd0J0bnMubGVuZ3RoOyBtKyspIHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZShzaG93QnRuc1ttXSwgJ2Rpc3BsYXknLCAnbm9uZScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy50b29sYmFyQ29uZi5jb250ZW50cyAmJiB0aGlzLnRvb2xiYXJDb25mLmNvbnRlbnRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLmluTW9yZUJ1dHRvbkNvbnRlbnRzID0gdGhpcy50b29sYmFyQ29uZi5jb250ZW50cy5maWx0ZXIoXHJcbiAgICAgICAgICAgICAgICAoaXRlbSwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5kZXggPj0gaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOmHjeaWsOiuoeeul+aYr+WQpuaYvuekuuaMiemSruWSjOS4i+aLiVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIF9yZUNhbGN1bGF0ZUFsbCgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX3RhYkNvbnRhaW5lckVsKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCB0YWJQYXJlbnRXaWR0aCA9IHRoaXMudGFiUGFyZW50Lm5hdGl2ZUVsZW1lbnQub2Zmc2V0V2lkdGg7XHJcbiAgICAgICAgaWYgKCF0aGlzLmhpZGVCdXR0b25zKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRyID0gcGFyc2VJbnQod2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy50YWJQYXJlbnQubmF0aXZlRWxlbWVudCkuZ2V0UHJvcGVydHlWYWx1ZShcIm1hcmdpbi1yaWdodFwiKSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRsID0gcGFyc2VJbnQod2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy50YWJQYXJlbnQubmF0aXZlRWxlbWVudCkuZ2V0UHJvcGVydHlWYWx1ZShcIm1hcmdpbi1sZWZ0XCIpKTtcclxuICAgICAgICAgICAgdGFiUGFyZW50V2lkdGggKz0gdHIgKyB0bDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuaGlkZUJ1dHRvbnMgPSB0aGlzLl90YWJDb250YWluZXJFbC5zY3JvbGxXaWR0aCA8PSB0YWJQYXJlbnRXaWR0aDtcclxuXHJcbiAgICAgICAgdGhpcy5oaWRlRHJvcERvd24gPSB0aGlzLnNob3dEcm9wRG93biA/IHRoaXMuaGlkZUJ1dHRvbnMgOiB0cnVlO1xyXG4gICAgICAgIGlmICghdGhpcy5oaWRlQnV0dG9ucykge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuaGlkZURyb3BEb3duKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRyb3Bkb3duVGFicyA9IFtdLmNvbmNhdCh0aGlzLnRhYnMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNlYXJjaFRhYlRleHQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZHJvcGRvd25UYWJzID0gdGhpcy5kcm9wZG93blRhYnMuZmlsdGVyKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtWyd0aXRsZSddLmluZGV4T2YodGhpcy5zZWFyY2hUYWJUZXh0KSAhPT0gLTE7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9yZUNhbGN1bGF0ZVNpZGVzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY2RSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDph43mlrDorqHnrpflt6blj7PnmoTmj5DnpLrmloflrZdcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBfcmVDYWx1bGF0ZVRvb2x0aXBzKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5fdGFiQ29udGFpbmVyRWwgfHwgdGhpcy5oaWRlQnV0dG9ucykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHRfcmlnaHRfdG9vbHRpcHMgPSBbXTtcclxuICAgICAgICBjb25zdCB0X2xlZnRfdG9vbHRpcHMgPSBbXTtcclxuICAgICAgICBjb25zdCBhbGxUYWJzID0gdGhpcy5fdGFiQ29udGFpbmVyRWwucXVlcnlTZWxlY3RvckFsbCgnLm5hdi1pdGVtJyk7XHJcbiAgICAgICAgY29uc3QgbGVuID0gYWxsVGFicy5sZW5ndGg7XHJcbiAgICAgICAgY29uc3QgaGlkZGVuVGFicyA9IHRoaXMudGFicy5maWx0ZXIoaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBpdGVtLl9zaG93ICE9PSB0cnVlO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgY29uc3QgaGlkZGVuVGFic0xlbmd0aCA9IGhpZGRlblRhYnMubGVuZ3RoO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgbGVmdFBvc2l0aW9uID1cclxuICAgICAgICAgICAgICAgIGFsbFRhYnNbaV0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCAtXHJcbiAgICAgICAgICAgICAgICB0aGlzLl90YWJDb250YWluZXJFbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0O1xyXG4gICAgICAgICAgICBjb25zdCByaWdodFBvc2l0aW9uID1cclxuICAgICAgICAgICAgICAgIGFsbFRhYnNbaV0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGggKyBsZWZ0UG9zaXRpb247XHJcbiAgICAgICAgICAgIGlmIChyaWdodFBvc2l0aW9uID4gdGhpcy5fdGFiQ29udGFpbmVyRWwub2Zmc2V0V2lkdGgpIHtcclxuICAgICAgICAgICAgICAgIHRfcmlnaHRfdG9vbHRpcHMucHVzaCh0aGlzLnRhYnNbaV0pO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGxlZnRQb3NpdGlvbiA8IDApIHtcclxuICAgICAgICAgICAgICAgIHRfbGVmdF90b29sdGlwcy5wdXNoKHRoaXMudGFic1tpXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMubGVmdFRvb2x0aXBUYWJzID0gW11cclxuICAgICAgICAgICAgLmNvbmNhdCh0X2xlZnRfdG9vbHRpcHMpXHJcbiAgICAgICAgICAgIC5zbGljZShNYXRoLm1heCgwLCB0X2xlZnRfdG9vbHRpcHMubGVuZ3RoIC0gdGhpcy5tYXhUb29sdGlwTGVuKSk7XHJcbiAgICAgICAgdGhpcy5yaWdodFRvb2x0aXBUYWJzID0gW11cclxuICAgICAgICAgICAgLmNvbmNhdCh0X3JpZ2h0X3Rvb2x0aXBzKVxyXG4gICAgICAgICAgICAuc2xpY2UoMCwgTWF0aC5taW4odGhpcy5tYXhUb29sdGlwTGVuLCB0X3JpZ2h0X3Rvb2x0aXBzLmxlbmd0aCkpO1xyXG4gICAgICAgIHRoaXMuZGlzYWJsZVJUb29sdGlwID0gdGhpcy5yaWdodFRvb2x0aXBUYWJzLmxlbmd0aCA8IDE7XHJcbiAgICAgICAgdGhpcy5kaXNhYmxlTFRvb2x0aXAgPSB0aGlzLmxlZnRUb29sdGlwVGFicy5sZW5ndGggLSBoaWRkZW5UYWJzTGVuZ3RoIDwgMTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog6YeN5paw6K6h566X5bem5Y+z566t5aS054q25oCBXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgX3JlQ2FsY3VsYXRlU2lkZXMoKSB7XHJcbiAgICAgICAgdGhpcy5kaXNhYmxlUmlnaHQgPVxyXG4gICAgICAgICAgICB0aGlzLl90YWJDb250YWluZXJFbC5zY3JvbGxMZWZ0ID49XHJcbiAgICAgICAgICAgIHRoaXMuX3RhYkNvbnRhaW5lckVsLnNjcm9sbFdpZHRoIC0gdGhpcy5fdGFiQ29udGFpbmVyRWwub2Zmc2V0V2lkdGg7XHJcbiAgICAgICAgdGhpcy5kaXNhYmxlTGVmdCA9IHRoaXMuX3RhYkNvbnRhaW5lckVsLnNjcm9sbExlZnQgPD0gMDtcclxuICAgICAgICB0aGlzLl9yZUNhbHVsYXRlVG9vbHRpcHMoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog6YCa6L+HaWTlr7vmib5UYWJcclxuICAgICAqIEBwYXJhbSBpZCBJRFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIF9nZXRUYWJCeUlkKGlkOiBzdHJpbmcpIHtcclxuICAgICAgICBjb25zdCBpbmRleFdpZHRoSWQgPSBbXTtcclxuICAgICAgICBjb25zdCB0YWJzV2l0aElkOiBGYXJyaXNUYWJDb21wb25lbnRbXSA9IHRoaXMudGFicy5maWx0ZXIoXHJcbiAgICAgICAgICAgICh0YWIsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGFiLmlkID09PSBpZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGluZGV4V2lkdGhJZC5wdXNoKGluZGV4KTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB0YWI6IHRhYnNXaXRoSWQubGVuZ3RoID8gdGFic1dpdGhJZFswXSA6IG51bGwsXHJcbiAgICAgICAgICAgIGluZGV4OiBpbmRleFdpZHRoSWQubGVuZ3RoID8gaW5kZXhXaWR0aElkWzBdIDogLTFcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgLyrlrr3pq5jnsbvlnovmmK8gc3RyaW5n5oiW6ICFbnVtYmVyIOino+aekOWuvemrmCAg5bC65a+4ICovXHJcbiAgICByZXNvbHZlU2l6ZShzaXplKSB7XHJcbiAgICAgICAgY29uc3QgcmVnZXggPSAvcHh8ZW18cmVtfHB0fCUvO1xyXG4gICAgICAgIC8vIOivtOaYjuaYr+Wtl+espuS4slxyXG4gICAgICAgIHJldHVybiByZWdleC50ZXN0KHNpemUpXHJcbiAgICAgICAgICAgID8gYCR7cGFyc2VJbnQoc2l6ZSwgMTApfSR7c2l6ZS5tYXRjaChyZWdleClbMF19YFxyXG4gICAgICAgICAgICA6IGAke3NpemV9cHhgO1xyXG4gICAgfVxyXG4gICAgLypcclxuICAgICAg5riF56m6dGFiXHJcbiAgICAgICAqL1xyXG4gICAgLy8gcmVtb3ZlQWxsVGFiKCkge1xyXG4gICAgLy8gICAgIHRoaXMudGFicy5zcGxpY2UoMCwgdGhpcy50YWJzLmxlbmd0aCk7XHJcbiAgICAvLyB9XHJcbiAgICBoYXNJbkhlYWRDbCgpIHtcclxuICAgICAgICBpZiAodGhpcy50b29sYmFyQ29uZiAmJiB0aGlzLnRvb2xiYXJDb25mLmhhc093blByb3BlcnR5KCdwb3NpdGlvbicpICYmIHRoaXMudG9vbGJhckNvbmYuaGFzT3duUHJvcGVydHkoJ2NvbnRlbnRzJykgJiYgdGhpcy50b29sYmFyQ29uZi5wb3NpdGlvbiA9PT0gJ2luSGVhZCcgJiYgdGhpcy50b29sYmFyQ29uZi5jb250ZW50cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5oZWFkZXJFeHRlbmRDb25mICYmICEodGhpcy50b29sYmFyQ29uZiAmJiB0aGlzLnRvb2xiYXJDb25mLnBvc2l0aW9uID09PSAnaW5Db250ZW50JyAmJiB0aGlzLnRvb2xiYXJDb25mLmNvbnRlbnRzLmxlbmd0aCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufVxyXG4iXX0=