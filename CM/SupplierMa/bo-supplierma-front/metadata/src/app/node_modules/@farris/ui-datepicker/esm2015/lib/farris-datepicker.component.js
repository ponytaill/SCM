/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { NotifyService } from '@farris/ui-notify';
import { DateTimeHelperService } from '@farris/ui-common/date';
import { Component, Input, EventEmitter, Output, ViewChild, forwardRef, ElementRef, HostListener, HostBinding, Injector, ViewContainerRef, ComponentFactoryResolver, Renderer2, ApplicationRef, ChangeDetectorRef } from '@angular/core';
import { NG_VALUE_ACCESSOR, NgControl } from '@angular/forms';
import { FarrisDatePickerDirective } from './farris-datepicker.input';
import { DefaultView, ShowType, CalToggle } from './enums/public-api';
import { UtilService, DefaultConfigService, DatepickerLocaleService, DatePickerService } from './services/public-api';
import { LocaleService } from '@farris/ui-locale';
import { isValid, parse } from 'date-fns';
import { CalendarComponent } from './components/calendar/calendar.component';
import { CLICK, EMPTY_STR } from './constants/constants';
import { OverLayHiddenService } from '@farris/ui-common';
import { ViewType } from './interfaces/my-options.interface';
/** @type {?} */
const FARRIS_DP_VALUE_ACCESSOR = {
    provide: NG_VALUE_ACCESSOR,
    useExisting: forwardRef((/**
     * @return {?}
     */
    () => FarrisDatepickerComponent)),
    multi: true
};
export class FarrisDatepickerComponent {
    /**
     * @param {?} el
     * @param {?} utilService
     * @param {?} defaultConfigService
     * @param {?} injector
     */
    constructor(el, utilService, defaultConfigService, injector) {
        this.el = el;
        this.utilService = utilService;
        this.defaultConfigService = defaultConfigService;
        this.injector = injector;
        this.cls = 'f-cmp-datepicker f-cmp-inputgroup';
        this.viewType = ViewType.Replace;
        // 是否禁用该组件
        this.disabled = false;
        // 是否只读
        this.readonly = false;
        // 是否只能选择数据，不可键入
        this.editable = true;
        // 是否使用日期范围输入模式
        this.dateRange = false;
        // 是否使用时间输入框
        this.showTime = false;
        // 显示类型
        this.showType = ShowType.all;
        // 本地语言
        this.locale = 'zh-cn';
        // 是否使用默认值
        this.useDefault = false;
        this.returnType = 'String';
        // placeholder
        this.placeholder = '';
        this.beginPlaceholder = '';
        this.endPlaceholder = '';
        /**
         * 输入值变化后关闭选择面板。 默认为 true
         */
        this.whenValueChangedThenCloseSelectorPanel = true;
        // 需要高亮显示的日期
        this.highlightDates = [];
        // 禁用区域的日期开始时间
        this.disableDateRangesBegin = {
            year: 0,
            month: 0,
            day: 0
        };
        // 禁用区域的日期结束时间
        this.disableDateRangesEnd = {
            year: 0,
            month: 0,
            day: 0
        };
        // 禁用的日期
        this.disableDates = [];
        // 一周中被禁用的日子
        this.disableWeekdays = [];
        // 被标记的日期
        this.markDates = [];
        // 被标记的日期的显示颜色
        this.markDatesColor = '#59a1ff';
        // 是否显示第几周
        this.showWeekNumbers = false;
        // 是否标记周末
        this.isMarkWeekends = false;
        // 被标记周末的显示颜色
        this.markWeekendsColor = '#59a1ff';
        // 日期范围模式下input的显示分割符合
        this.dateRangeDatesDelimiter = '~';
        // 配置左侧 sidebar 快捷键
        this.shortcuts = [];
        // 日期范围选择时，默认结束月份为当前月份 + monthRangeValue
        this.monthRangeValue = 1;
        // clear 事件
        this.clear = new EventEmitter();
        // valueChanged 事件
        this.valueChange = new EventEmitter();
        // focus 事件
        this.focus = new EventEmitter();
        // blur 事件
        this.blur = new EventEmitter();
        // beginValueChange
        this.beginValueChange = new EventEmitter();
        // endValueChange
        this.endValueChange = new EventEmitter();
        // PrevFocus dateRange 第一个日期
        this.PrevFocus = new EventEmitter();
        // NextFocus dateRange 第二个日期
        this.NextFocus = new EventEmitter();
        // close 事件
        this.close = new EventEmitter();
        this.cRef = null;
        this._timeFormat = '';
        this._value = '';
        this._beginValue = '';
        this._endValue = '';
        this._initFinished = false;
        this._minDate = {
            year: 1840,
            month: 1,
            day: 1,
            hour: 0,
            minute: 0,
            second: 0
        };
        this._maxDate = {
            year: 10000,
            month: 1,
            day: 1,
            hour: 0,
            minute: 0,
            second: 0
        };
        this.dateOpts = {};
        // 开始输入控件聚焦
        this.beginFocus = false;
        // 结束输入控件聚焦
        this.endFocus = false;
        // 整体聚焦
        this.totalFocus = false;
        // 是否字符超长显示Tip
        this.isActiveTip = false;
        this._realValue = null;
        this._realRangeValue = null;
        this.formatedValue = '';
        this.dtService = null;
        this._updateOn = 'change';
        // 日期选择后设置为 true， blur 事件将不会重复执行valueChanged；
        // 键盘修改时，blur 事件中会执行一次 valueChanged 后，将此值设为 false;
        this._valueChangeEmitted = false;
        this._mousedownEvent = null;
        this.closeCalendarHandler = null;
        this.cdr = null;
        /**
         * 缓存通过点击日历的数据，用于的格式化格式不标准时，格式化数据。
         */
        this._SELECT_DATE_ = null;
        this.onModelChange = (/**
         * @param {?} obj
         * @return {?}
         */
        (obj) => { });
        this.onModelTouched = (/**
         * @return {?}
         */
        () => { });
        this.defaultConfig = this.defaultConfigService.getDefaultConfig();
        if (this.injector) {
            this.localeService = this.injector.get(LocaleService);
            this.dtService = this.injector.get(DateTimeHelperService);
            this.notifySer = this.injector.get(NotifyService, null);
            if (this.notifySer) {
                this.notifySer.config.position = 'top-center';
            }
        }
        this.localeConfig = new DatepickerLocaleService();
        this.vcRef = this.injector.get(ViewContainerRef, null);
        this.cfr = this.injector.get(ComponentFactoryResolver, null);
        this.renderer = this.injector.get(Renderer2, null);
        this._applicationRef = this.injector.get(ApplicationRef);
        this.cdr = this.injector.get(ChangeDetectorRef);
        // this.datePicekrService = this.injector.get(DatePickerService, null)
        this.overLayService = new OverLayHiddenService();
    }
    // 日期格式
    /**
     * @param {?} value
     * @return {?}
     */
    set dateFormat(value) {
        if (value) {
            // value 格式形如 yyyy-MM-dd HH:mm:ss
            // const formArr = 'yyyy-MM-dd HH:mm:ss'.split(' ');
            value = value.replace(/^\s+|\s+$/g, ''); // 去掉左右空格
            value = value.replace(/\s+/g, ' '); // 将中间的多个连续空格，替换为1个空格
            // 将中间的多个连续空格，替换为1个空格
            /** @type {?} */
            const formArr = value.split(' ');
            this._dateFormat = formArr[0];
            // 处理'yyyy-MM-dd h:mm:ss a'即12小时显示的情况
            if (formArr.length === 3) {
                this._timeFormat = 'h:mm:ss a';
            }
            else {
                this._timeFormat = formArr[1];
            }
        }
        // this._dateFormat = this._dateFormat ? (this._dateFormat + '').replace(/m/g, 'M') : '';
        if (this._dateFormat) {
            /** @type {?} */
            const mm = ['yyyy-mm', 'yyyy/mm', 'yyyy年mm', 'mm/yyyy'];
            /** @type {?} */
            const _mm = mm.find((/**
             * @param {?} m
             * @return {?}
             */
            m => this._dateFormat.includes(m)));
            if (_mm) {
                this._dateFormat = this._dateFormat.replace(_mm, _mm.replace(/m/g, 'M'));
            }
            if (this._timeFormat && this.showTime) {
                this._dateFormat += ' ' + this._timeFormat;
                if (this._timeFormat.indexOf('时') > -1) {
                    this._timeFormat = this._timeFormat.replace('时', ':').replace('分', ':').replace('秒', '');
                }
            }
        }
        // this.dateOpts.dateFormat = this._dateFormat;
    }
    /**
     * @return {?}
     */
    get dateFormat() {
        return this._dateFormat;
    }
    // 最小日期
    // 加入接收时分秒功能
    /**
     * @param {?} val
     * @return {?}
     */
    set minDate(val) {
        /** @type {?} */
        const type = Object.prototype.toString.call(val);
        /** @type {?} */
        let date;
        switch (type) {
            case '[object Date]':
                date = val;
                break;
            case '[object String]':
                if (val) {
                    date = new Date(val);
                }
                else {
                    date = new Date(1840, 1, 1, 0, 0, 0);
                }
                break;
            case '[object Null]':
                date = new Date(1840, 1, 1, 0, 0, 0);
                break;
            // case null:
            //     date = new Date(1840, 1, 1, 0, 0, 0);
            //     break;
            case '[object Undefined]':
                date = new Date(1840, 1, 1, 0, 0, 0);
                break;
            default:
                date = new Date(1840, 1, 1, 0, 0, 0);
                break;
        }
        if (isValid(date)) {
            /** @type {?} */
            const year = date.getFullYear();
            /** @type {?} */
            const month = date.getMonth() + 1;
            /** @type {?} */
            const day = date.getDate();
            /** @type {?} */
            const hour = date.getHours();
            /** @type {?} */
            const minute = date.getMinutes();
            /** @type {?} */
            const second = date.getSeconds();
            this._minDate = { year, month, day, hour, minute, second };
        }
    }
    /**
     * @return {?}
     */
    get minDate() {
        return this._minDate;
    }
    // 最大日期
    // 加入接收时分秒功能
    /**
     * @param {?} val
     * @return {?}
     */
    set maxDate(val) {
        /** @type {?} */
        const type = Object.prototype.toString.call(val);
        /** @type {?} */
        let date;
        switch (type) {
            case '[object Date]':
                date = val;
                break;
            case '[object String]':
                if (val) {
                    date = new Date(val);
                }
                else {
                    date = new Date(10000, 1, 1, 0, 0, 0);
                }
                break;
            case '[object Null]':
                date = new Date(10000, 1, 1, 0, 0, 0);
                break;
            // case null:
            //     date = new Date(10000, 1, 1, 0, 0, 0);
            //     break;
            case '[object Undefined]':
                date = new Date(10000, 1, 1, 0, 0, 0);
                break;
            default:
                date = new Date(10000, 1, 1, 0, 0, 0);
                break;
        }
        if (isValid(date)) {
            /** @type {?} */
            const year = date.getFullYear();
            /** @type {?} */
            const month = date.getMonth() + 1;
            /** @type {?} */
            const day = date.getDate();
            /** @type {?} */
            const hour = date.getHours();
            /** @type {?} */
            const minute = date.getMinutes();
            /** @type {?} */
            const second = date.getSeconds();
            this._maxDate = { year, month, day, hour, minute, second };
        }
    }
    /**
     * @return {?}
     */
    get maxDate() {
        return this._maxDate;
    }
    // 日期范围：开始日期
    /**
     * @param {?} value
     * @return {?}
     */
    set beginValue(value) {
        value = value ? value : '';
        if (value instanceof Date) {
            value = this.dateTo(value);
            this.returnType = 'Date';
        }
        else {
            if (value.indexOf('T') > -1) {
                value = value.replace('T', ' ');
            }
            this.returnType = 'String';
        }
        this._beginValue = value;
        if (this._initFinished) {
            this.setValue(this._beginValue + this.dateRangeDatesDelimiter + this._endValue);
        }
    }
    /**
     * @return {?}
     */
    get beginValue() {
        return this.dateFrom(this._beginValue, true);
    }
    // 日期范围：结束日期
    /**
     * @param {?} value
     * @return {?}
     */
    set endValue(value) {
        value = value ? value : '';
        if (value instanceof Date) {
            value = this.dateTo(value);
            this.returnType = 'Date';
        }
        else {
            if (value.indexOf('T') > -1) {
                value = value.replace('T', ' ');
            }
            this.returnType = 'String';
        }
        this._endValue = value;
        if (this._initFinished) {
            this.setValue(this._beginValue + this.dateRangeDatesDelimiter + this._endValue);
        }
    }
    /**
     * @return {?}
     */
    get endValue() {
        return this.dateFrom(this._endValue, true);
    }
    /**
     * @param {?} v
     * @return {?}
     */
    set value(v) {
        this._value = v ? v : '';
    }
    /**
     * @return {?}
     */
    get value() {
        return this._value;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this._ngControl = this.injector.get(NgControl, null);
        this.initPlaceholder();
        this.mergeDateOptions();
        if (this._beginValue && this._endValue) {
            this.setValue(this._beginValue + this.dateRangeDatesDelimiter + this._endValue);
        }
        this._initFinished = true;
        this.datePicekrService = new DatePickerService(this.dateOpts);
    }
    /**
     * @private
     * @return {?}
     */
    initPlaceholder() {
        if (this.localeService) {
            this.locale = this.localeService.getValue('locale');
            this.localDateOpts = this.localeConfig.getLocaleOptions(this.locale);
            this.placeholder = this.placeholder
                ? this.placeholder
                : this.localDateOpts.placeholder
                    ? this.localDateOpts.placeholder
                    : '请选择日期';
            if (!this.beginPlaceholder) {
                this.beginPlaceholder = this.localDateOpts.range.begin || this.placeholder;
            }
            if (!this.endPlaceholder) {
                this.endPlaceholder = this.localDateOpts.range.end || this.placeholder;
            }
        }
    }
    /**
     * @private
     * @return {?}
     */
    mergeDateOptions() {
        this.dateOpts = Object.assign({}, this.defaultConfig, this.buildOptions());
        if (this.dateOpts.dateFormat) {
            if (!this._dateFormat) {
                this.dateFormat = this.dateOpts.dateFormat;
                this.dateOpts.dateFormat = this.dateFormat;
            }
        }
        if (this.showTime && !this._timeFormat) {
            this._timeFormat = 'HH:mm:ss';
            this.dateOpts.timeFormat = this._timeFormat;
        }
        if (this.dateOpts.returnFormat) {
            if (!this.returnFormat) {
                this.returnFormat = this.dateOpts.returnFormat;
            }
        }
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    ngOnChanges(changes) {
        if (changes.locale && changes.locale.isFirstChange()) {
            // this.dp.setLocaleOptions();
            this.localDateOpts = this.localeConfig.getLocaleOptions(this.locale);
        }
        if (changes) {
            /** @type {?} */
            let flag = false;
            /** @type {?} */
            const inputs = ['showTime', 'showType', 'dateRange', 'maxDate', 'minDate', 'monthRangeValue'];
            Object.keys(changes).forEach((/**
             * @param {?} e
             * @return {?}
             */
            e => {
                if (!changes[e].isFirstChange() && (this.dateOpts[e] || inputs.includes(e))) {
                    // this[e] = changes[e].currentValue;
                    flag = true;
                }
            }));
            if (flag) {
                this.dateOpts = Object.assign({}, this.defaultConfig, this.buildOptions());
            }
        }
        if (changes.readonly &&
            !changes.readonly.currentValue &&
            !changes.readonly.firstChange &&
            !this.value &&
            this.useDefault) {
            this.setDefaultValue();
        }
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        if (this._ngControl && this._ngControl.control) {
            this._updateOn = this._ngControl.control.updateOn;
        }
        this._timer = setTimeout((/**
         * @return {?}
         */
        () => {
            this.setDefaultValue();
        }));
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        clearTimeout(this._timer);
        this.closeSelector();
        this.overLayService.destory(this.el.nativeElement);
        this.overLayService = null;
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onMouseEnter(event) {
        if (this.value && !this.readonly && !this.disabled) {
            if (this.value) {
                this.clearIcon.nativeElement.style.visibility = '';
            }
            if (this.dateOpts.dateRange) {
                if (this.dateOpts.showTime) {
                    this.isActiveTip = this.el.nativeElement.getBoundingClientRect().width < 300;
                }
                else {
                    this.isActiveTip = this.el.nativeElement.getBoundingClientRect().width < 190;
                }
            }
            else {
                if (this.dateOpts.showTime) {
                    this.isActiveTip = this.el.nativeElement.getBoundingClientRect().width < 170;
                }
                else {
                    this.isActiveTip = this.el.nativeElement.getBoundingClientRect().width < 120;
                }
            }
        }
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onMouseLeave(event) {
        if (!this.readonly && !this.disabled) {
            this.clearIcon.nativeElement.style.visibility = 'hidden';
        }
    }
    /**
     * @param {?} e
     * @return {?}
     */
    onBlur(e) {
        this.totalFocus = false;
        /** @type {?} */
        let _runblur = true;
        if (this.value) {
            try {
                this.value = this.transform(this.value);
                /** @type {?} */
                const valid = this._isValid(this.value);
                if (!valid) {
                    this.clearDate();
                    _runblur = false;
                }
            }
            catch (e) {
                this.clearDate();
                _runblur = false;
            }
        }
        /** @type {?} */
        const updateModel = (/**
         * @return {?}
         */
        () => {
            if (!this._valueChangeEmitted) {
                /** @type {?} */
                const realDate = this.dateFrom(this.transform(this.value, this.returnFormat));
                this.onNgModelChange(this.value, realDate, true);
                this.onModelTouched();
            }
        });
        if (this.editable && _runblur) {
            if (this['inDatagrid']) {
                updateModel();
            }
            else {
                setTimeout(updateModel, 250);
            }
        }
        this._valueChangeEmitted = false;
        if (this._mousedownEvent) {
            this._mousedownEvent();
            this._mousedownEvent = null;
        }
        this.blur.emit();
    }
    /**
     * @param {?} e
     * @return {?}
     */
    onFocus(e) {
        this.totalFocus = true;
        this.registerMouseDownHandle();
        this.focus.emit();
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onInputClick(event) {
        event.stopPropagation();
        if (!this.readonly && !this.disabled) {
            this.registerMouseDownHandle();
            this.toggleCalendar(false);
        }
    }
    /**
     * @private
     * @return {?}
     */
    registerMouseDownHandle() {
        if (!this._mousedownEvent) {
            this._mousedownEvent = this.renderer.listen(document, 'mousedown', (/**
             * @param {?} e
             * @return {?}
             */
            (e) => {
                if (e.target.className.toString().indexOf('SVGAnimatedString') > -1) {
                    return;
                }
                if (e.target.closest('.f-cmp-datepicker') ||
                    e.target.closest('.f-datepicker-container') || e.target.className.indexOf('f-icon-date') > -1) {
                    if (this.dateInput) {
                        this.renderer.setStyle(this.dateInput.nativeElement, 'unselectable', 'on');
                    }
                    e.preventDefault();
                }
            }));
        }
    }
    /**
     * @return {?}
     */
    setDefaultValue() {
        if (!this.readonly && !this.value && this.useDefault) {
            /** @type {?} */
            const now = new Date();
            /** @type {?} */
            let nowValue = '';
            if (!this.dateOpts.dateRange) {
                nowValue = this.dateTo(now);
            }
            else {
                nowValue =
                    this.dateTo(now) +
                        this.dateRangeDatesDelimiter +
                        this.dateTo(new Date(now.setMonth(now.getMonth() + 1)));
            }
            if (this.datePicekrService.validate(nowValue)) {
                this.value = nowValue;
                this.onNgModelChange(this.value);
                this.onModelTouched();
            }
        }
    }
    /**
     * @param {?=} $event
     * @return {?}
     */
    clearDate($event = null) {
        if ($event) {
            $event.stopPropagation();
        }
        this._SELECT_DATE_ = null;
        if (!this.disabled) {
            this._realRangeValue = null;
            this._realValue = null;
            this.onDateChanged({
                isRange: this.dateOpts.dateRange,
                singleDate: {
                    date: this.utilService.resetDate(),
                    jsDate: null,
                    formatted: EMPTY_STR,
                    epoc: 0
                },
                dateRange: {
                    beginDate: this.utilService.resetDate(),
                    beginJsDate: null,
                    beginEpoc: 0,
                    endDate: this.utilService.resetDate(),
                    endJsDate: null,
                    endEpoc: 0,
                    formatted: EMPTY_STR
                }
            });
            this.closeSelector(CalToggle.CloseByCalBtn);
            this.onModelChange(null);
            this.clear.emit();
            if (this.clearIcon) {
                this.clearIcon.nativeElement.style.visibility = 'hidden';
            }
        }
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    onSingleInputNgModelChange($event) {
        this.value = $event || '';
        this._realValue = this.value ? this.dateFrom($event) : '';
        this.closeSelector();
    }
    /**
     * @param {?} value
     * @param {?=} realdate
     * @param {?=} emitValueChange
     * @return {?}
     */
    onNgModelChange(value, realdate = null, emitValueChange = false) {
        // this.value = value;
        if (this.dateRange || this.showType == ShowType.selectWeek) {
            /** @type {?} */
            const tmpArr = value ? value.split(this.dateRangeDatesDelimiter) : ['', ''];
            /** @type {?} */
            const _beginValue = this.transform(tmpArr[0], this.returnFormat);
            /** @type {?} */
            const _endValue = this.transform(tmpArr[1], this.returnFormat);
            this._beginValue = this.transform(tmpArr[0]);
            this._endValue = this.transform(tmpArr[1]);
            value = _beginValue && _endValue ? _beginValue + this.dateRangeDatesDelimiter + _endValue : '';
            this._realRangeValue = value;
            this.onModelChange(value);
            this.cdr.detectChanges();
            this.beginValueChange.emit(this._beginValue);
            this.endValueChange.emit(this._endValue);
            /** @type {?} */
            const p = {
                date: null,
                formatted: this.value,
                returnFormatted: this._realRangeValue,
                cmpRef: this
            };
            this.valueChange.emit(p);
        }
        else {
            if (value === '') {
                this.value = '';
                this._onModelChange(null, emitValueChange);
                return;
            }
            if (realdate) {
                this._realValue = this.getRealReturnFormatted(realdate);
                this._onModelChange(this._realValue, emitValueChange);
                if (this.dateInput && this.dateInput.nativeElement.value !== this.value) {
                    this.renderer.setProperty(this.dateInput.nativeElement, 'value', this.value);
                }
            }
            else {
                if (this._isValid(value)) {
                    this._realValue = this.getRealReturnFormatted(realdate);
                    if (this.dateInput) {
                        this.renderer.setProperty(this.dateInput.nativeElement, 'value', this.value);
                    }
                    this._onModelChange(this._realValue, emitValueChange);
                }
            }
        }
    }
    /**
     * @private
     * @param {?} realValue
     * @param {?} emit
     * @return {?}
     */
    _onModelChange(realValue, emit) {
        this._realValue = realValue;
        this.onModelChange(realValue);
        if (emit) {
            /** @type {?} */
            const p = {
                date: this.utilService.isDateValid(this.value, this.dateOpts, true),
                formatted: this.value,
                returnFormatted: realValue,
                cmpRef: this
            };
            if (this.valueChange.observers.length) {
                if (this.whenValueChangedThenCloseSelectorPanel) {
                    this.closeSelector();
                }
                this.valueChange.emit(p);
            }
        }
    }
    /**
     * @private
     * @param {?} realdate
     * @return {?}
     */
    getRealReturnFormatted(realdate) {
        if (realdate) {
            if (this.returnType === 'Date') {
                return realdate;
            }
            else {
                if (this.returnFormat) {
                    return this.dtService.formatTo(realdate, this.returnFormat);
                }
                return realdate;
            }
        }
        else {
            return this.dateFrom(this._realValue || this.value) || '';
        }
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onDateRangeInputBlur(event) {
        this.setValue(this._beginValue + this.dateRangeDatesDelimiter + this._endValue);
        this.onNgModelChange(this._realRangeValue || this.value);
    }
    /**
     * @return {?}
     */
    openCalendar() {
        if (this.disabled) {
            return;
        }
        /** @type {?} */
        let val = this._realValue;
        if (this.dateRange) {
            val = this._realRangeValue;
        }
        else {
            if (this.returnType === 'Date') {
                val = this.transform(val, this.returnFormat);
            }
        }
        if (this.cRef === null) {
            this.cRef = this.calendarRef.createComponent(this.cfr.resolveComponentFactory(CalendarComponent));
            this.datePicekrService.appendSelector(this.cRef.location.nativeElement);
            this.datePicekrService.registerScrollEvent((/**
             * @return {?}
             */
            () => {
                this.closeSelector();
            }));
            this.cRef.instance.initialize(this.dateOpts, '', this.datePicekrService.getSelectorPosition(this.el.nativeElement, this.cRef), val, (/**
             * @param {?} dm
             * @param {?} close
             * @return {?}
             */
            (dm, close) => {
                if (this.dateOpts.dateRange && this.showTime && dm.dateRange.endJsDate < dm.dateRange.beginJsDate) {
                    // const { year: beginYear, month: beginMonth,  day: beginDay  } = {...dm.dateRange.beginDate};
                    // const { year: endYear, month: endMonth,  day: endDay  } = {...dm.dateRange.endDate};
                    // error message:  The end time must not be earlier than the start time
                    // error message:  結束時間不得早于開始時間
                    /** @type {?} */
                    const msg = this.localDateOpts.message['101'];
                    if (this.notifySer) {
                        this.notifySer.warning(msg);
                    }
                    else {
                        alert(msg);
                    }
                    return;
                }
                this.onDateChanged(dm);
                if (close) {
                    this.closeSelector(CalToggle.CloseByDateSel);
                }
            }), (/**
             * @param {?} cvc
             * @return {?}
             */
            (cvc) => {
                // this.emitCalendarChanged(cvc);
            }), (/**
             * @param {?} rds
             * @return {?}
             */
            (rds) => {
                // this.emitRangeDateSelection(rds);
            }), (/**
             * @return {?}
             */
            () => {
                this.closeSelector(CalToggle.CloseByEsc);
            }));
            // this.cdr.detectChanges();
        }
        else {
            this.datePicekrService.appendSelector(this.cRef.location.nativeElement);
        }
        this.overLayService.registerMouseEvent(this.el.nativeElement, (/**
         * @param {?} e
         * @return {?}
         */
        (e) => {
            if (this.cRef && this.cRef.location.nativeElement.contains(e.target)) {
                return;
            }
            this.closeSelector();
        }), { onlyTopWindow: true });
        this.cRef.changeDetectorRef.detectChanges();
        // this.preventClose = false;
    }
    /**
     * @param {?=} reason
     * @return {?}
     */
    closeSelector(reason) {
        if (this.cRef !== null) {
            this.calendarRef.remove(this.calendarRef.indexOf(this.cRef.hostView));
            this.cRef = null;
            // this.cdr.detectChanges();
            /** @type {?} */
            const container = document.querySelector('.date-overlay-container');
            if (container.childElementCount) {
                container.remove();
            }
            this.renderer.setStyle(container, 'pointer-events', '');
        }
        this.totalFocus = false;
        if (this.dateOpts.dateRange) {
            this.beginFocus = false;
            this.endFocus = false;
        }
        if (this.closeCalendarHandler) {
            this.closeCalendarHandler();
            this.closeCalendarHandler = null;
        }
        if (this.datePicekrService) {
            this.datePicekrService.removeMouseEvent();
        }
        this.overLayService.destory(this.el.nativeElement);
    }
    /**
     * @param {?} close
     * @param {?=} emit
     * @return {?}
     */
    toggleCalendar(close, emit = true) {
        if (this.disabled) {
            this.totalFocus = false;
            if (this.dateOpts.dateRange) {
                this.beginFocus = false;
                this.endFocus = false;
            }
            return;
        }
        if (this.cRef === null) {
            if (!this.closeCalendarHandler) {
                this.closeCalendarHandler = this.renderer.listen(document, CLICK, (/**
                 * @return {?}
                 */
                () => this.closeSelector(CalToggle.CloseByOutClick)));
            }
            this.totalFocus = true;
            this.openCalendar();
            /** @type {?} */
            const container = document.querySelector('.date-overlay-container');
            this.renderer.setStyle(container, 'pointer-events', 'auto');
        }
        else {
            /** @type {?} */
            let flag = true;
            /** @type {?} */
            const container = document.querySelector('.date-overlay-container');
            if (container && this.cRef.location) {
                if (container.hasChildNodes()) {
                    container.childNodes.forEach((/**
                     * @param {?} el
                     * @return {?}
                     */
                    el => {
                        if (el === this.cRef.location.nativeElement) {
                            flag = false;
                        }
                    }));
                }
            }
            if (flag) {
                this.renderer.setStyle(container, 'pointer-events', 'auto');
                this.totalFocus = true;
                this.openCalendar();
            }
            else {
                this.totalFocus = false;
                if (this.dateOpts.dateRange) {
                    this.beginFocus = false;
                    this.endFocus = false;
                }
                // document.removeEventListener(CLICK, this.onClickHidden);
                close && this.closeSelector(CalToggle.CloseByCalBtn);
                // this.renderer.setStyle(container, 'pointer-events', '')
                if (emit) {
                    this.close.emit();
                }
            }
        }
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onDateChanged(event) {
        this._SELECT_DATE_ = event;
        /** @type {?} */
        let valChangeParams = '';
        if (event.singleDate) {
            this.value = event.singleDate.formatted;
            this.formatedValue = event.singleDate.formatted;
            /** @type {?} */
            const returnFormatted = this.getRealReturnFormatted(event.singleDate.jsDate);
            valChangeParams = Object.assign({}, event.singleDate, { formatted: event.singleDate.formatted, returnFormatted });
            const { year, month, day, hour, minute, second } = event.singleDate.date;
            if (month && (this.dateFormat.indexOf('yyyy') === -1 || this.dateFormat.indexOf('dd') === -1)) {
                /** @type {?} */
                const nd = new Date(year || new Date().getFullYear(), month - 1, day || 1, hour || 0, minute || 0, second || 0);
                event.singleDate.jsDate = nd;
            }
            this.onNgModelChange(returnFormatted, event.singleDate.jsDate);
        }
        else if (event.dateRange) {
            this.value = event.dateRange.formatted;
            this.formatedValue = event.dateRange.formatted;
            /** @type {?} */
            const returnFormatted = event.dateRange.returnFormatted;
            // let returnFormatted = this.dateFrom(event.dateRange.returnFormatted);
            valChangeParams = Object.assign({}, event.dateRange, { formatted: event.dateRange.formatted, returnFormatted });
            this.onNgModelChange(returnFormatted, event.dateRange);
        }
        this.onModelTouched();
        this._valueChangeEmitted = true;
        this.valueChange.emit(valChangeParams);
    }
    /**
     * @return {?}
     */
    buildOptions() {
        /** @type {?} */
        let dateOpts;
        if (!this.localDateOpts) {
            this.localDateOpts = this.localeConfig.getLocaleOptions(this.locale);
        }
        if (this.showType === ShowType.noDateAndMonth) {
            this.localDateOpts.dateFormat = 'yyyy';
            this.localDateOpts.returnFormat = 'yyyy';
        }
        /** @type {?} */
        const _showTime = (Number(this.showType) === ShowType.all) ? this.showTime : false;
        dateOpts = {
            dateRange: this.dateRange,
            showTime: _showTime,
            showType: Number(this.showType),
            dateFormat: this.dateFormat ? this.dateFormat : this.localDateOpts.dateFormat,
            returnFormat: this.returnFormat ? this.returnFormat : this.localDateOpts.returnFormat,
            minYear: this._minDate.year,
            maxYear: this._maxDate.year,
            highlightDates: this.highlightDates,
            disableDates: this.disableDates,
            showWeekNumbers: this.showWeekNumbers,
            disableDateRanges: [
                {
                    begin: this.disableDateRangesBegin,
                    end: this.disableDateRangesEnd
                }
            ],
            disableUntil: this._minDate,
            disableSince: this._maxDate,
            disableWeekdays: this.disableWeekdays,
            markDates: [
                {
                    dates: this.markDates,
                    color: this.markDatesColor
                }
            ],
            markWeekends: {
                marked: this.isMarkWeekends,
                color: this.markWeekendsColor
            },
            dateRangeDatesDelimiter: this.dateRangeDatesDelimiter,
            shortcuts: this.shortcuts,
            timeFormat: this._timeFormat,
            monthRangeValue: this.monthRangeValue,
            viewType: this.viewType
        };
        switch (Number(this.showType)) {
            case ShowType.noDate:
                dateOpts.defaultView = DefaultView.Month;
                break;
            case ShowType.noDateAndMonth:
                dateOpts.defaultView = DefaultView.Year;
                // dateOpts.dateFormat = 'yyyy';
                // dateOpts.returnFormat = 'yyyy';
                // this.dateFormat = 'yyyy';
                break;
            case ShowType.selectWeek:
                dateOpts.showWeekNumbers = true;
                dateOpts.dateRange = true;
                dateOpts.firstDayOfWeek = 'mo';
                break;
            // default:
            // this.returnType = 'String';
        }
        return Object.assign({}, this.localDateOpts, dateOpts);
    }
    /**
     * @param {?} d
     * @return {?}
     */
    dateTo(d) {
        /** @type {?} */
        const dateFormat = this.dateOpts.dateFormat ? this.dateOpts.dateFormat : this.defaultConfig.dateFormat;
        /** @type {?} */
        const monthLabels = this.dateOpts.monthLabels ? this.dateOpts.monthLabels : this.defaultConfig.monthLabels;
        /** @type {?} */
        const showTime = this.dateOpts.showTime ? this.dateOpts.showTime : this.defaultConfig.showTime;
        /** @type {?} */
        const year = d.getFullYear();
        /** @type {?} */
        const month = d.getMonth() + 1;
        /** @type {?} */
        const day = d.getDate();
        /** @type {?} */
        const hour = d.getHours();
        /** @type {?} */
        const minute = d.getMinutes();
        /** @type {?} */
        const second = d.getSeconds();
        /** @type {?} */
        let date;
        if (!showTime) {
            date = { year, month, day };
            this.originTime = { hour, minute, second };
        }
        else {
            date = { year, month, day, hour, minute, second };
        }
        return this.utilService.formatDate(date, dateFormat, monthLabels);
    }
    // 返回真实日期 Date 类型
    /**
     * @param {?} str
     * @param {?=} ignorRange
     * @return {?}
     */
    dateFrom(str, ignorRange = false) {
        if (!str) {
            return '';
        }
        /** @type {?} */
        const _this = this;
        /** @type {?} */
        const dateRange = this.dateOpts.dateRange ? this.dateOpts.dateRange : this.defaultConfig.dateRange;
        /** @type {?} */
        const dateFormat = this.dateOpts.dateFormat ? this.dateOpts.dateFormat : this.defaultConfig.dateFormat;
        /** @type {?} */
        const returnFormat = this.dateOpts.returnFormat ? this.dateOpts.returnFormat : this.defaultConfig.returnFormat;
        /** @type {?} */
        const showTime = this.dateOpts.showTime ? this.dateOpts.showTime : this.defaultConfig.showTime;
        /** @type {?} */
        const delimeters = returnFormat.match(/[^(DdMmYy)]{1,}/g);
        /** @type {?} */
        let dateValue;
        /** @type {?} */
        const getValue = this.utilService.getDateValue;
        if ((dateRange || this.dateOpts.showType === ShowType.selectWeek) && !ignorRange) {
            /** @type {?} */
            const tmpBegin = str.split(this.dateRangeDatesDelimiter)[0];
            /** @type {?} */
            const tmpEnd = str.split(this.dateRangeDatesDelimiter)[1];
            /** @type {?} */
            let tmpBeginDate = this.utilService.isDateValid(tmpBegin, this.dateOpts, true);
            /** @type {?} */
            let tmpEndDate = this.utilService.isDateValid(tmpEnd, this.dateOpts, true);
            tmpBeginDate = this.utilService.isInitializedDate(tmpBeginDate) ? tmpBeginDate : this.dateOpts.disableUntil;
            tmpEndDate = this.utilService.isInitializedDate(tmpEndDate) ? tmpEndDate : this.dateOpts.disableSince;
            return (this.utilService.formatDate(tmpBeginDate, returnFormat, this.defaultConfig.monthLabels) +
                this.dateRangeDatesDelimiter +
                this.utilService.formatDate(tmpEndDate, returnFormat, this.defaultConfig.monthLabels));
        }
        else {
            if (this.returnType === 'Date') {
                if (str && str instanceof Date) {
                    return str;
                }
                return convert(str, getValue, this.originTime);
            }
            else {
                /** @type {?} */
                const tmpDate = this.utilService.isDateValid(str, this.dateOpts, true);
                return this.utilService.formatDate(tmpDate, returnFormat, this.defaultConfig.monthLabels);
            }
        }
        /**
         * @param {?} v
         * @param {?} _getValue
         * @param {?=} originTime
         * @return {?}
         */
        function convert(v, _getValue, originTime = { hour: 0, minute: 0, second: 0 }) {
            /** @type {?} */
            let fmt = returnFormat;
            if (_this.returnType === 'Date') {
                fmt = 'yyyy-MM-dd' + (showTime ? ' HH:mm:ss' : '');
            }
            if (showTime) {
                /** @type {?} */
                const date = v.split(' ')[0];
                /** @type {?} */
                let time = v.split(' ')[1];
                dateValue = _getValue(date, fmt, delimeters);
                if (time) {
                    time = time.replace(/[时,分]/g, ':').replace(/[秒]/, '');
                    const [h, m, s] = time.split(':');
                    /** @type {?} */
                    const hour = h;
                    /** @type {?} */
                    const minute = m;
                    /** @type {?} */
                    const second = s ? s : '';
                    dateValue[3] = { value: hour, format: 'hh' };
                    dateValue[4] = { value: minute, format: 'mm' };
                    if (second) {
                        dateValue[5] = { value: second, format: 'ss' };
                    }
                }
            }
            else {
                /** @type {?} */
                const date = v.split(' ')[0];
                dateValue = _getValue(date, fmt, delimeters);
            }
            /** @type {?} */
            let year = Number(dateValue[0] ? dateValue[0].value : 1970);
            /** @type {?} */
            const yearValue = dateValue[0];
            if (yearValue.format) {
                if (!yearValue.value || yearValue.value.length !== yearValue.format.length) {
                    year = null;
                }
            }
            /** @type {?} */
            const month = Number(dateValue[1] ? dateValue[1].value : 1) - 1;
            /** @type {?} */
            const day = Number(dateValue[2] ? dateValue[2].value : 1);
            /** @type {?} */
            const _hour = dateValue[3] ? Number(dateValue[3].value) : originTime.hour;
            /** @type {?} */
            const _minute = dateValue[4] ? Number(dateValue[4].value) : originTime.minute;
            /** @type {?} */
            const _second = dateValue[5] ? Number(dateValue[5].value) : originTime.second;
            if (!year) {
                return null;
            }
            return new Date(year, month, day, _hour, _minute, _second);
        }
    }
    /**
     * @param {?} value
     * @param {?=} _fmt
     * @return {?}
     */
    transform(value, _fmt = this.dateOpts.dateFormat) {
        value = value ? value : '';
        const { returnFormat, dateFormat, showTime } = this.dateOpts;
        /** @type {?} */
        let _tmpDate = null;
        if (typeof value === 'string') {
            _tmpDate = parse(value, returnFormat, new Date());
            if (!isValid(_tmpDate)) {
                if (this._SELECT_DATE_ && this._SELECT_DATE_.singleDate) {
                    _tmpDate = this._SELECT_DATE_.singleDate.jsDate;
                }
                else {
                    if (this._realValue) {
                        _tmpDate = parse(this._realValue, returnFormat, new Date());
                    }
                }
            }
        }
        else {
            if (value instanceof Date) {
                _tmpDate = value;
            }
        }
        /** @type {?} */
        let formattedVal = value;
        if (isValid(_tmpDate)) {
            formattedVal = this.dtService.formatTo(_tmpDate, _fmt);
            return formattedVal;
        }
        else {
            // 兼容年月日,年月,年格式
            value = value.replace(/[年,月]/g, '-').replace(/[日]/, '');
            if (value[value.length - 1] === '-') {
                value = value.substr(0, value.length - 1);
            }
            if (isValid(new Date(value))) {
                formattedVal = this.dtService.formatTo(value, _fmt);
            }
            else {
                value = '';
            }
        }
        if (value) {
            if (this.dateFrom(value, true) === '') {
                /** @type {?} */
                const tmpDate = this.utilService.isDateValid(value, Object.assign({}, this.dateOpts, {
                    dateFormat: returnFormat
                }));
                formattedVal = this.utilService.formatDate(tmpDate, _fmt, this.defaultConfig.monthLabels);
            }
        }
        return formattedVal;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    setValue(value) {
        if (this.value !== value) {
            if (this.dateOpts.dateRange) {
                /** @type {?} */
                const _tmpDateArr = value.split(this.dateRangeDatesDelimiter);
                /** @type {?} */
                const beginStr = _tmpDateArr[0];
                /** @type {?} */
                const endStr = _tmpDateArr[1];
                this._beginValue = this.transform(beginStr);
                this._endValue = this.transform(endStr);
                this.value = this._beginValue && this._endValue ? this._beginValue + this.dateRangeDatesDelimiter + this._endValue : '';
            }
            else {
                if (value) {
                    this.value = this.transform(value);
                }
                else {
                    this.value = '';
                }
            }
        }
    }
    /**
     * @param {?} value
     * @return {?}
     */
    updateValue(value) {
        if (this.dateOpts.dateRange) {
            /** @type {?} */
            const _tmpDateArr = value.split(this.dateRangeDatesDelimiter);
            /** @type {?} */
            const beginStr = _tmpDateArr[0];
            /** @type {?} */
            const endStr = _tmpDateArr[1];
            this._beginValue = this.transform(beginStr);
            this._endValue = this.transform(endStr);
            this.value = this._beginValue && this._endValue ? this._beginValue + this.dateRangeDatesDelimiter + this._endValue : '';
        }
        else {
            this.value = this.transform(value);
        }
    }
    /**
     * @param {?} val
     * @return {?}
     */
    getValueByType(val) {
        if (val instanceof Date) {
            this.returnType = 'Date';
            // return this.dateTo(val);
            return val;
        }
        else if (val && val instanceof Object) {
            const { begin, end } = val;
            /** @type {?} */
            const beginStr = begin instanceof Date ? this.dateTo(begin) : '';
            /** @type {?} */
            const endStr = begin instanceof Date ? this.dateTo(end) : '';
            this.returnType = 'Object';
            return beginStr && endStr ? beginStr + this.dateRangeDatesDelimiter + endStr : '';
        }
        else if (val && typeof val === 'string') {
            if (val.indexOf('T') > -1) {
                val = val.replace('T', ' ');
            }
            this.returnType = 'String';
            return val;
        }
        else {
            return '';
        }
    }
    /**
     * @param {?} val
     * @return {?}
     */
    writeValue(val) {
        this._realValue = val;
        if (this.dateRange) {
            this._realRangeValue = val;
        }
        this.setValue(this.getValueByType(val));
    }
    /**
     * @param {?} fn
     * @return {?}
     */
    registerOnChange(fn) {
        this.onModelChange = fn;
    }
    /**
     * @param {?} fn
     * @return {?}
     */
    registerOnTouched(fn) {
        this.onModelTouched = fn;
    }
    /**
     * @param {?} isDisabled
     * @return {?}
     */
    setDisabledState(isDisabled) {
        this.disabled = isDisabled;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    onPrevFocus(value) {
        this.beginFocus = true;
        if (this.endFocus == true) {
            this.endFocus = !this.endFocus;
        }
        this.PrevFocus.emit();
    }
    /**
     * @param {?} value
     * @return {?}
     */
    onNextFocus(value) {
        this.endFocus = true;
        if (this.beginFocus == true) {
            this.beginFocus = !this.beginFocus;
        }
        this.NextFocus.emit();
    }
    /**
     * @private
     * @param {?} val
     * @param {?=} realValue
     * @return {?}
     */
    _convert2dateString(val, realValue = false) {
        if (val) {
            /** @type {?} */
            let t = val.replace(/[年,月]/g, '-').replace(/[日,号]/g, ' ').replace(/[时,点,分,分钟]/g, ':').replace('秒', '');
            if (realValue) {
                /** @type {?} */
                const objDate = this.utilService.isDateValid(val, this.dateOpts, true);
                if (objDate) {
                    let { year, month, day, hour, minute, second } = objDate;
                    if (!year) {
                        year = new Date().getFullYear();
                    }
                    if (!month) {
                        month = new Date().getMonth();
                    }
                    if (!day) {
                        day = 1;
                    }
                    if (!hour) {
                        hour = 0;
                    }
                    if (!minute) {
                        minute = 0;
                    }
                    if (!second) {
                        second = 0;
                    }
                    return `${year}-${month}-${day} ${hour}:${minute}:${second}`;
                }
            }
            if (t[t.length - 1] === '-') {
                // t = t.substr(0, t.length - 1);
                t += '01';
            }
            if (t[t.length - 1] === ':') {
                t = t.substr(0, t.length - 1);
            }
            return t.replace(/^\s+|\s+$/g, '');
        }
        return val;
    }
    /**
     * @private
     * @param {?} value
     * @return {?}
     */
    _isValid(value) {
        value = this._convert2dateString(value);
        if (value) {
            if (this.dateFormat.indexOf('yyyy') === -1 || this.dateFormat.indexOf('dd') === -1) {
                /** @type {?} */
                const _tmpDate = parse(this.value, this.dateFormat, new Date());
                if (this._realValue) {
                    if (this.returnType === 'Date') {
                        return isValid(this._realValue);
                    }
                    else {
                        return isValid(new Date(this._convert2dateString(this._realValue, true)));
                    }
                }
                /** @type {?} */
                const d = this.utilService.isDateValid(value, this.dateOpts);
                if (d) {
                    if (d.year || d.month) {
                        /** @type {?} */
                        const cdate = new Date();
                        /** @type {?} */
                        const year = cdate.getFullYear();
                        /** @type {?} */
                        const str = (this.dateOpts.returnFormat || 'yyyy-MM-dd')
                            .replace('yyyy', '' + (d.year || year)).replace('MM', '' + d.month).replace('dd', '1');
                        return isValid(new Date(str));
                    }
                    return false;
                }
                return isValid(value);
            }
            else {
                /** @type {?} */
                const reg = /^\d{1,}$/;
                if (reg.test(value) && this.dateFormat.indexOf('yyyyMMdd') > -1) { // 验证传入的格式为 yyyyMMddHHmmss
                    // 验证传入的格式为 yyyyMMddHHmmss
                    /** @type {?} */
                    const _r = this._isValid2(value);
                    if (_r.isValided) {
                        this._realValue = this.getRealReturnFormatted(_r.date);
                        this.value = this.transform(_r.date);
                    }
                    return _r.isValided;
                }
                else {
                    /** @type {?} */
                    const _tmpDate = parse(value, this.dateFormat, new Date());
                    /** @type {?} */
                    const d = this.utilService.isDateValid(this.value, this.dateOpts);
                    return isValid(_tmpDate) || this.utilService.isInitializedDate(d);
                }
            }
        }
        return false;
    }
    /**
     * @private
     * @param {?} value
     * @return {?}
     */
    _isValid2(value) {
        /** @type {?} */
        let year = 0;
        /** @type {?} */
        let month = 0;
        /** @type {?} */
        let day = 0;
        /** @type {?} */
        let hour = 0;
        /** @type {?} */
        let minute = 0;
        /** @type {?} */
        let seconds = 0;
        /** @type {?} */
        const df = this.dateFormat;
        if (df.includes('yyyy')) {
            if (value) {
                year = +value.slice(0, 4);
                value = value.slice(4);
            }
            else {
                return false;
            }
        }
        if (df.includes('MM')) {
            if (value) {
                month = +value.slice(0, 2) - 1;
                value = value.slice(2);
                if (month < 0) {
                    month = 0;
                }
            }
            else {
                return false;
            }
        }
        if (df.includes('dd')) {
            if (value) {
                day = +value.slice(0, 2);
                value = value.slice(2);
            }
            else {
                return false;
            }
        }
        if (df.includes('HH')) {
            if (value) {
                hour = +value.slice(0, 2);
                value = value.slice(2);
            }
        }
        if (df.includes('mm')) {
            if (value) {
                minute = +value.slice(0, 2);
                value = value.slice(2);
            }
        }
        if (df.includes('ss')) {
            if (value) {
                seconds = +value.slice(0, 2);
            }
        }
        /** @type {?} */
        const d = new Date(year, month, day, hour, minute, seconds);
        return {
            isValided: isValid(d),
            date: d
        };
    }
}
FarrisDatepickerComponent.decorators = [
    { type: Component, args: [{
                selector: 'farris-datepicker',
                exportAs: 'farris-datepicker',
                template: "<div class=\"input-group\" [ngClass]=\"{\r\n        'f-state-disabled': disabled,\r\n        'f-state-readonly': readonly && !disabled,\r\n        'f-state-editable': editable && !disabled && !readonly,\r\n        'f-state-focus':totalFocus\r\n    }\">\r\n    <ng-container *ngIf=\"!dateOpts.dateRange; else range\">\r\n        <input type=\"text\" class=\"form-control f-utils-fill\" [attr.placeholder]=\"readonly||disabled?'':placeholder\" name=\"farris-date\" [ngModel]=\"value\"\r\n            (ngModelChange)=\"onSingleInputNgModelChange($event)\" #dateInput autocomplete=\"off\" [readonly]=\"readonly || !editable\"\r\n            [disabled]=\"disabled\" (dateChanged)=\"onDateChanged($event)\" (blur)=\"onBlur($event)\"\r\n            (focus)=\"onFocus($event)\" (click)=\"onInputClick($event)\" style=\"padding-right: 4px;\" farrisPopover\r\n            [popover]=\"value\" [triggers]=\"'hover'\" [popActive]=\"isActiveTip\" [showAction]=\"'show2'\"\r\n            [container]=\"'body'\" (keydown.tab)=\"closeSelector(3)\" />\r\n\r\n    </ng-container>\r\n    <ng-template #range>\r\n        <div class=\"form-control date-range-wrapper\" (click)=\"onInputClick($event)\" (blur)=\"onBlur($event)\"\r\n            (focus)=\"onFocus($event)\" [title]=\"readonly || !editable|| disabled ?value:''\">\r\n            <span class=\"sub-input-wrapper sub-input-wrapper-begin\" [class.f-state-focus]=\"totalFocus&&beginFocus\">\r\n                <input class=\"sub-input form-control\" type=\"text\" [attr.placeholder]=\"readonly||disabled?'':beginPlaceholder\"\r\n                    [(ngModel)]=\"_beginValue\" [readonly]=\"readonly || !editable\" [disabled]=\"disabled\"\r\n                    autocomplete=\"off\" (blur)=\"onDateRangeInputBlur('begin')\" (focus)=\"onPrevFocus($event)\"/>\r\n            </span>\r\n            <span class=\"f-icon f-icon-orientation-arrow sub-input-spliter\"></span>\r\n            <span class=\"sub-input-wrapper sub-input-wrapper-end\" [class.f-state-focus]=\"totalFocus&&endFocus\">\r\n                <input class=\"sub-input form-control\" type=\"text\" [attr.placeholder]=\"readonly||disabled?'':endPlaceholder\"\r\n                    [(ngModel)]=\"_endValue\" [readonly]=\"readonly || !editable\" [disabled]=\"disabled\" autocomplete=\"off\"\r\n                    (blur)=\"onDateRangeInputBlur('end')\" (focus)=\"onNextFocus($event)\" />\r\n            </span>\r\n        </div>\r\n    </ng-template>\r\n    <div class=\"input-group-append f-cmp-iconbtn-wrapper\" *ngIf=\"!readonly && !disabled\" style=\"position: relative;\">\r\n        <span class=\"input-group-text input-group-clear datepicker-clear\" (click)=\"clearDate($event)\"\r\n            style=\"visibility: hidden\" #clearIcon>\r\n            <i class=\"f-icon modal_close\"></i>\r\n        </span>\r\n        <button type=\"button\" class=\"btn f-cmp-iconbtn\" (click)=\"onInputClick($event)\">\r\n            <span class=\"f-icon f-icon-date\"></span>\r\n        </button>\r\n    </div>\r\n</div>\r\n\r\n<ng-container #calendar>\r\n    <ng-container></ng-container>\r\n</ng-container>",
                providers: [FARRIS_DP_VALUE_ACCESSOR, UtilService, DefaultConfigService, LocaleService],
                styles: [`
            :host {
                display: block;
            }

            :host .datepicker-clear {
                position: absolute;
                height: 100%;
                right: 0;
                top: 0;
                z-index: 100;
            }
        `]
            }] }
];
/** @nocollapse */
FarrisDatepickerComponent.ctorParameters = () => [
    { type: ElementRef },
    { type: UtilService },
    { type: DefaultConfigService },
    { type: Injector }
];
FarrisDatepickerComponent.propDecorators = {
    cls: [{ type: HostBinding, args: ['class',] }],
    viewType: [{ type: Input }],
    disabled: [{ type: Input }],
    readonly: [{ type: Input }],
    editable: [{ type: Input }],
    dateRange: [{ type: Input }],
    showTime: [{ type: Input }],
    showType: [{ type: Input }],
    locale: [{ type: Input }],
    dateFormat: [{ type: Input }],
    useDefault: [{ type: Input }],
    returnType: [{ type: Input }],
    returnFormat: [{ type: Input }],
    placeholder: [{ type: Input }],
    beginPlaceholder: [{ type: Input }],
    endPlaceholder: [{ type: Input }],
    whenValueChangedThenCloseSelectorPanel: [{ type: Input }],
    minDate: [{ type: Input }],
    maxDate: [{ type: Input }],
    highlightDates: [{ type: Input }],
    disableDateRangesBegin: [{ type: Input }],
    disableDateRangesEnd: [{ type: Input }],
    disableDates: [{ type: Input }],
    disableWeekdays: [{ type: Input }],
    markDates: [{ type: Input }],
    markDatesColor: [{ type: Input }],
    showWeekNumbers: [{ type: Input }],
    isMarkWeekends: [{ type: Input }],
    markWeekendsColor: [{ type: Input }],
    dateRangeDatesDelimiter: [{ type: Input }],
    shortcuts: [{ type: Input }],
    monthRangeValue: [{ type: Input }],
    beginValue: [{ type: Input }],
    endValue: [{ type: Input }],
    clear: [{ type: Output }],
    valueChange: [{ type: Output }],
    focus: [{ type: Output }],
    blur: [{ type: Output }],
    beginValueChange: [{ type: Output }],
    endValueChange: [{ type: Output }],
    PrevFocus: [{ type: Output }],
    NextFocus: [{ type: Output }],
    close: [{ type: Output }],
    dp: [{ type: ViewChild, args: [FarrisDatePickerDirective,] }],
    clearIcon: [{ type: ViewChild, args: ['clearIcon',] }],
    calendarRef: [{ type: ViewChild, args: ['calendar', { read: ViewContainerRef },] }],
    PFocus: [{ type: ViewChild, args: ['onPrevFocus',] }],
    NFocus: [{ type: ViewChild, args: ['onNextFocus',] }],
    dateInput: [{ type: ViewChild, args: ['dateInput',] }],
    onMouseEnter: [{ type: HostListener, args: ['mouseenter', ['$event'],] }],
    onMouseLeave: [{ type: HostListener, args: ['mouseleave', ['$event'],] }]
};
if (false) {
    /** @type {?} */
    FarrisDatepickerComponent.prototype.cls;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.viewType;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.disabled;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.readonly;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.editable;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.dateRange;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.showTime;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.showType;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.locale;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.useDefault;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.returnType;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.returnFormat;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.placeholder;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.beginPlaceholder;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.endPlaceholder;
    /**
     * 输入值变化后关闭选择面板。 默认为 true
     * @type {?}
     */
    FarrisDatepickerComponent.prototype.whenValueChangedThenCloseSelectorPanel;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.highlightDates;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.disableDateRangesBegin;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.disableDateRangesEnd;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.disableDates;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.disableWeekdays;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.markDates;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.markDatesColor;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.showWeekNumbers;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.isMarkWeekends;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.markWeekendsColor;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.dateRangeDatesDelimiter;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.shortcuts;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.monthRangeValue;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.clear;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.valueChange;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.focus;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.blur;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.beginValueChange;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.endValueChange;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.PrevFocus;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.NextFocus;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.close;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.dp;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.clearIcon;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.calendarRef;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.PFocus;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.NFocus;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.dateInput;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.cRef;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype._timeFormat;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype._value;
    /** @type {?} */
    FarrisDatepickerComponent.prototype._beginValue;
    /** @type {?} */
    FarrisDatepickerComponent.prototype._endValue;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype._initFinished;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype._timer;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype._dateFormat;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype._minDate;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype._maxDate;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.dateOpts;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.defaultConfig;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.localDateOpts;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.localeConfig;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.localeService;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.beginFocus;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.endFocus;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.totalFocus;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.originTime;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.isActiveTip;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.vcRef;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.cfr;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.renderer;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.datePicekrService;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype._realValue;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype._realRangeValue;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.notifySer;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.formatedValue;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.dtService;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype._applicationRef;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype._ngControl;
    /** @type {?} */
    FarrisDatepickerComponent.prototype._updateOn;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype._valueChangeEmitted;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype._mousedownEvent;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.closeCalendarHandler;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.cdr;
    /**
     * 缓存通过点击日历的数据，用于的格式化格式不标准时，格式化数据。
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype._SELECT_DATE_;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.onModelChange;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.onModelTouched;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.overLayService;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.el;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.utilService;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.defaultConfigService;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.injector;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmFycmlzLWRhdGVwaWNrZXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy91aS1kYXRlcGlja2VyLyIsInNvdXJjZXMiOlsibGliL2ZhcnJpcy1kYXRlcGlja2VyLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ2xELE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBQy9ELE9BQU8sRUFDSCxTQUFTLEVBQVUsS0FBSyxFQUFFLFlBQVksRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFDckUsVUFBVSxFQUFFLFlBQVksRUFBYSxXQUFXLEVBQUUsUUFBUSxFQUFnQixnQkFBZ0IsRUFBRSx3QkFBd0IsRUFDcEgsU0FBUyxFQUE0QixjQUFjLEVBQUUsaUJBQWlCLEVBQ3pFLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBRSxpQkFBaUIsRUFBd0IsU0FBUyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDcEYsT0FBTyxFQUFFLHlCQUF5QixFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFNdEUsT0FBTyxFQUFFLFdBQVcsRUFBRSxRQUFRLEVBQUUsU0FBUyxFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUFFdEUsT0FBTyxFQUFFLFdBQVcsRUFBRSxvQkFBb0IsRUFBRSx1QkFBdUIsRUFBRSxpQkFBaUIsRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBQ3RILE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUNsRCxPQUFPLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxNQUFNLFVBQVUsQ0FBQztBQUMxQyxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSwwQ0FBMEMsQ0FBQztBQUM3RSxPQUFPLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBQ3pELE9BQU8sRUFB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QTBCOzs7OztJQUMxQixvREFBK0I7Ozs7O0lBQy9CLDhDQUFpQzs7Ozs7SUFDakMsa0RBQTJCOztJQUMzQiw4Q0FBd0M7Ozs7O0lBQ3hDLG9EQUF3Qzs7Ozs7SUFFeEMsK0NBQThCOztJQUM5Qiw4Q0FBcUI7Ozs7O0lBSXJCLHdEQUFvQzs7Ozs7SUFDcEMsb0RBQStCOzs7OztJQUMvQix5REFBb0M7Ozs7O0lBQ3BDLHdDQUFzQzs7Ozs7O0lBRXRDLGtEQUE2Qjs7SUFFN0Isa0RBQWtDOztJQUNsQyxtREFBMkI7Ozs7O0lBRTNCLG1EQUE2Qzs7Ozs7SUFFekMsdUNBQXNCOzs7OztJQUN0QixnREFBZ0M7Ozs7O0lBQ2hDLHlEQUFrRDs7Ozs7SUFDbEQsNkNBQTBCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTm90aWZ5U2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbm90aWZ5JztcclxuaW1wb3J0IHsgRGF0ZVRpbWVIZWxwZXJTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1jb21tb24vZGF0ZSc7XHJcbmltcG9ydCB7XHJcbiAgICBDb21wb25lbnQsIE9uSW5pdCwgSW5wdXQsIEV2ZW50RW1pdHRlciwgT3V0cHV0LCBWaWV3Q2hpbGQsIGZvcndhcmRSZWYsIFNpbXBsZUNoYW5nZXMsXHJcbiAgICBFbGVtZW50UmVmLCBIb3N0TGlzdGVuZXIsIE9uQ2hhbmdlcywgSG9zdEJpbmRpbmcsIEluamVjdG9yLCBDb21wb25lbnRSZWYsIFZpZXdDb250YWluZXJSZWYsIENvbXBvbmVudEZhY3RvcnlSZXNvbHZlcixcclxuICAgIFJlbmRlcmVyMiwgT25EZXN0cm95LCBBZnRlclZpZXdJbml0LCBBcHBsaWNhdGlvblJlZiwgQ2hhbmdlRGV0ZWN0b3JSZWZcclxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgTkdfVkFMVUVfQUNDRVNTT1IsIENvbnRyb2xWYWx1ZUFjY2Vzc29yLCBOZ0NvbnRyb2wgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XHJcbmltcG9ydCB7IEZhcnJpc0RhdGVQaWNrZXJEaXJlY3RpdmUgfSBmcm9tICcuL2ZhcnJpcy1kYXRlcGlja2VyLmlucHV0JztcclxuaW1wb3J0IHtcclxuICAgIElNeU9wdGlvbnMsIElNeURhdGUsIElNeURhdGVNb2RlbCwgSU15U2hvcnRjdXRzLCBJTXlEYXRlRm9ybWF0LFxyXG4gICAgSU15Q2FsZW5kYXJWaWV3Q2hhbmdlZCwgSU15UmFuZ2VEYXRlU2VsZWN0aW9uXHJcbn0gZnJvbSAnLi9pbnRlcmZhY2VzL3B1YmxpYy1hcGknO1xyXG5cclxuaW1wb3J0IHsgRGVmYXVsdFZpZXcsIFNob3dUeXBlLCBDYWxUb2dnbGUgfSBmcm9tICcuL2VudW1zL3B1YmxpYy1hcGknO1xyXG5cclxuaW1wb3J0IHsgVXRpbFNlcnZpY2UsIERlZmF1bHRDb25maWdTZXJ2aWNlLCBEYXRlcGlja2VyTG9jYWxlU2VydmljZSwgRGF0ZVBpY2tlclNlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2VzL3B1YmxpYy1hcGknO1xyXG5pbXBvcnQgeyBMb2NhbGVTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1sb2NhbGUnO1xyXG5pbXBvcnQgeyBpc1ZhbGlkLCBwYXJzZSB9IGZyb20gJ2RhdGUtZm5zJztcclxuaW1wb3J0IHsgQ2FsZW5kYXJDb21wb25lbnQgfSBmcm9tICcuL2NvbXBvbmVudHMvY2FsZW5kYXIvY2FsZW5kYXIuY29tcG9uZW50JztcclxuaW1wb3J0IHsgQ0xJQ0ssIEVNUFRZX1NUUiB9IGZyb20gJy4vY29uc3RhbnRzL2NvbnN0YW50cyc7XHJcbmltcG9ydCB7IE92ZXJMYXlIaWRkZW5TZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1jb21tb24nO1xyXG5pbXBvcnQgeyBWaWV3VHlwZSB9IGZyb20gJy4vaW50ZXJmYWNlcy9teS1vcHRpb25zLmludGVyZmFjZSc7XHJcblxyXG5jb25zdCBGQVJSSVNfRFBfVkFMVUVfQUNDRVNTT1IgPSB7XHJcbiAgICBwcm92aWRlOiBOR19WQUxVRV9BQ0NFU1NPUixcclxuICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IEZhcnJpc0RhdGVwaWNrZXJDb21wb25lbnQpLFxyXG4gICAgbXVsdGk6IHRydWVcclxufTtcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6ICdmYXJyaXMtZGF0ZXBpY2tlcicsXHJcbiAgICBleHBvcnRBczogJ2ZhcnJpcy1kYXRlcGlja2VyJyxcclxuICAgIHRlbXBsYXRlVXJsOiAnLi9mYXJyaXMtZGF0ZXBpY2tlci5jb21wb25lbnQuaHRtbCcsXHJcbiAgICBzdHlsZXM6IFtcclxuICAgICAgICBgXHJcbiAgICAgICAgICAgIDpob3N0IHtcclxuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICA6aG9zdCAuZGF0ZXBpY2tlci1jbGVhciB7XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XHJcbiAgICAgICAgICAgICAgICByaWdodDogMDtcclxuICAgICAgICAgICAgICAgIHRvcDogMDtcclxuICAgICAgICAgICAgICAgIHotaW5kZXg6IDEwMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIGBcclxuICAgIF0sXHJcbiAgICBwcm92aWRlcnM6IFtGQVJSSVNfRFBfVkFMVUVfQUNDRVNTT1IsIFV0aWxTZXJ2aWNlLCBEZWZhdWx0Q29uZmlnU2VydmljZSwgTG9jYWxlU2VydmljZV1cclxufSlcclxuZXhwb3J0IGNsYXNzIEZhcnJpc0RhdGVwaWNrZXJDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIENvbnRyb2xWYWx1ZUFjY2Vzc29yLCBPbkNoYW5nZXMsIE9uRGVzdHJveSwgQWZ0ZXJWaWV3SW5pdCB7XHJcblxyXG4gICAgQEhvc3RCaW5kaW5nKCdjbGFzcycpIGNscyA9ICdmLWNtcC1kYXRlcGlja2VyIGYtY21wLWlucHV0Z3JvdXAnO1xyXG5cclxuICAgIEBJbnB1dCgpIHZpZXdUeXBlOiBWaWV3VHlwZSA9IFZpZXdUeXBlLlJlcGxhY2U7XHJcblxyXG4gICAgLy8g5piv5ZCm56aB55So6K+l57uE5Lu2XHJcbiAgICBASW5wdXQoKSBkaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgLy8g5piv5ZCm5Y+q6K+7XHJcbiAgICBASW5wdXQoKSByZWFkb25seSA9IGZhbHNlO1xyXG4gICAgLy8g5piv5ZCm5Y+q6IO96YCJ5oup5pWw5o2u77yM5LiN5Y+v6ZSu5YWlXHJcbiAgICBASW5wdXQoKSBlZGl0YWJsZSA9IHRydWU7XHJcbiAgICAvLyDmmK/lkKbkvb/nlKjml6XmnJ/ojIPlm7TovpPlhaXmqKHlvI9cclxuICAgIEBJbnB1dCgpIGRhdGVSYW5nZSA9IGZhbHNlO1xyXG4gICAgLy8g5piv5ZCm5L2/55So5pe26Ze06L6T5YWl5qGGXHJcbiAgICBASW5wdXQoKSBzaG93VGltZSA9IGZhbHNlO1xyXG4gICAgLy8g5pi+56S657G75Z6LXHJcbiAgICBASW5wdXQoKSBzaG93VHlwZTogU2hvd1R5cGUgPSBTaG93VHlwZS5hbGw7XHJcbiAgICAvLyDmnKzlnLDor63oqIBcclxuICAgIEBJbnB1dCgpIGxvY2FsZSA9ICd6aC1jbic7XHJcbiAgICAvLyDml6XmnJ/moLzlvI9cclxuICAgIEBJbnB1dCgpXHJcbiAgICBzZXQgZGF0ZUZvcm1hdCh2YWx1ZTogc3RyaW5nKSB7XHJcbiAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIC8vIHZhbHVlIOagvOW8j+W9ouWmgiB5eXl5LU1NLWRkIEhIOm1tOnNzXHJcbiAgICAgICAgICAgIC8vIGNvbnN0IGZvcm1BcnIgPSAneXl5eS1NTS1kZCBISDptbTpzcycuc3BsaXQoJyAnKTtcclxuICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJyk7IC8vIOWOu+aOieW3puWPs+epuuagvFxyXG4gICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoL1xccysvZywgJyAnKTsgLy8g5bCG5Lit6Ze055qE5aSa5Liq6L+e57ut56m65qC877yM5pu/5o2i5Li6MeS4quepuuagvFxyXG4gICAgICAgICAgICBjb25zdCBmb3JtQXJyID0gdmFsdWUuc3BsaXQoJyAnKTtcclxuICAgICAgICAgICAgdGhpcy5fZGF0ZUZvcm1hdCA9IGZvcm1BcnJbMF07XHJcbiAgICAgICAgICAgIC8vIOWkhOeQhid5eXl5LU1NLWRkIGg6bW06c3MgYSfljbMxMuWwj+aXtuaYvuekuueahOaDheWGtVxyXG4gICAgICAgICAgICBpZiAoZm9ybUFyci5sZW5ndGggPT09IDMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3RpbWVGb3JtYXQgPSAnaDptbTpzcyBhJztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3RpbWVGb3JtYXQgPSBmb3JtQXJyWzFdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyB0aGlzLl9kYXRlRm9ybWF0ID0gdGhpcy5fZGF0ZUZvcm1hdCA/ICh0aGlzLl9kYXRlRm9ybWF0ICsgJycpLnJlcGxhY2UoL20vZywgJ00nKSA6ICcnO1xyXG4gICAgICAgIGlmICh0aGlzLl9kYXRlRm9ybWF0KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1tID0gWyd5eXl5LW1tJywgJ3l5eXkvbW0nLCAneXl5eeW5tG1tJywgJ21tL3l5eXknXTtcclxuICAgICAgICAgICAgY29uc3QgX21tID0gbW0uZmluZChtID0+IHRoaXMuX2RhdGVGb3JtYXQuaW5jbHVkZXMobSkpO1xyXG4gICAgICAgICAgICBpZiAoX21tKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9kYXRlRm9ybWF0ID0gdGhpcy5fZGF0ZUZvcm1hdC5yZXBsYWNlKF9tbSwgX21tLnJlcGxhY2UoL20vZywgJ00nKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl90aW1lRm9ybWF0ICYmIHRoaXMuc2hvd1RpbWUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2RhdGVGb3JtYXQgKz0gJyAnICsgdGhpcy5fdGltZUZvcm1hdDtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl90aW1lRm9ybWF0LmluZGV4T2YoJ+aXticpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl90aW1lRm9ybWF0ID0gdGhpcy5fdGltZUZvcm1hdC5yZXBsYWNlKCfml7YnLCAnOicpLnJlcGxhY2UoJ+WIhicsICc6JykucmVwbGFjZSgn56eSJywgJycpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyB0aGlzLmRhdGVPcHRzLmRhdGVGb3JtYXQgPSB0aGlzLl9kYXRlRm9ybWF0O1xyXG4gICAgfVxyXG4gICAgZ2V0IGRhdGVGb3JtYXQoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGF0ZUZvcm1hdDtcclxuICAgIH1cclxuICAgIC8vIOaYr+WQpuS9v+eUqOm7mOiupOWAvFxyXG4gICAgQElucHV0KCkgdXNlRGVmYXVsdCA9IGZhbHNlO1xyXG4gICAgQElucHV0KCkgcmV0dXJuVHlwZTogJ09iamVjdCcgfCAnRGF0ZScgfCAnU3RyaW5nJyA9ICdTdHJpbmcnO1xyXG4gICAgQElucHV0KCkgcmV0dXJuRm9ybWF0OiBzdHJpbmc7XHJcbiAgICAvLyBwbGFjZWhvbGRlclxyXG4gICAgQElucHV0KCkgcGxhY2Vob2xkZXIgPSAnJztcclxuICAgIEBJbnB1dCgpIGJlZ2luUGxhY2Vob2xkZXIgPSAnJztcclxuICAgIEBJbnB1dCgpIGVuZFBsYWNlaG9sZGVyID0gJyc7XHJcbiAgICAvKiog6L6T5YWl5YC85Y+Y5YyW5ZCO5YWz6Zet6YCJ5oup6Z2i5p2/44CCIOm7mOiupOS4uiB0cnVlICovXHJcbiAgICBASW5wdXQoKSB3aGVuVmFsdWVDaGFuZ2VkVGhlbkNsb3NlU2VsZWN0b3JQYW5lbCA9IHRydWU7XHJcbiAgICAvLyDmnIDlsI/ml6XmnJ9cclxuICAgIC8vIOWKoOWFpeaOpeaUtuaXtuWIhuenkuWKn+iDvVxyXG4gICAgQElucHV0KClcclxuICAgIHNldCBtaW5EYXRlKHZhbDogYW55KSB7XHJcbiAgICAgICAgY29uc3QgdHlwZSA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWwpO1xyXG4gICAgICAgIGxldCBkYXRlOiBEYXRlO1xyXG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlICdbb2JqZWN0IERhdGVdJzpcclxuICAgICAgICAgICAgICAgIGRhdGUgPSB2YWw7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnW29iamVjdCBTdHJpbmddJzpcclxuICAgICAgICAgICAgICAgIGlmICh2YWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRlID0gbmV3IERhdGUodmFsKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKDE4NDAsIDEsIDEsIDAsIDAsIDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ1tvYmplY3QgTnVsbF0nOlxyXG4gICAgICAgICAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKDE4NDAsIDEsIDEsIDAsIDAsIDApO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIC8vIGNhc2UgbnVsbDpcclxuICAgICAgICAgICAgLy8gICAgIGRhdGUgPSBuZXcgRGF0ZSgxODQwLCAxLCAxLCAwLCAwLCAwKTtcclxuICAgICAgICAgICAgLy8gICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdbb2JqZWN0IFVuZGVmaW5lZF0nOlxyXG4gICAgICAgICAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKDE4NDAsIDEsIDEsIDAsIDAsIDApO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBkYXRlID0gbmV3IERhdGUoMTg0MCwgMSwgMSwgMCwgMCwgMCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGlzVmFsaWQoZGF0ZSkpIHtcclxuICAgICAgICAgICAgY29uc3QgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICAgICAgY29uc3QgbW9udGggPSBkYXRlLmdldE1vbnRoKCkgKyAxO1xyXG4gICAgICAgICAgICBjb25zdCBkYXkgPSBkYXRlLmdldERhdGUoKTtcclxuICAgICAgICAgICAgY29uc3QgaG91ciA9IGRhdGUuZ2V0SG91cnMoKTtcclxuICAgICAgICAgICAgY29uc3QgbWludXRlID0gZGF0ZS5nZXRNaW51dGVzKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlY29uZCA9IGRhdGUuZ2V0U2Vjb25kcygpO1xyXG4gICAgICAgICAgICB0aGlzLl9taW5EYXRlID0geyB5ZWFyLCBtb250aCwgZGF5LCBob3VyLCBtaW51dGUsIHNlY29uZCB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldCBtaW5EYXRlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9taW5EYXRlO1xyXG4gICAgfVxyXG4gICAgLy8g5pyA5aSn5pel5pyfXHJcbiAgICAvLyDliqDlhaXmjqXmlLbml7bliIbnp5Llip/og71cclxuICAgIEBJbnB1dCgpXHJcbiAgICBzZXQgbWF4RGF0ZSh2YWw6IGFueSkge1xyXG4gICAgICAgIGNvbnN0IHR5cGUgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsKTtcclxuICAgICAgICBsZXQgZGF0ZTogRGF0ZTtcclxuXHJcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ1tvYmplY3QgRGF0ZV0nOlxyXG4gICAgICAgICAgICAgICAgZGF0ZSA9IHZhbDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdbb2JqZWN0IFN0cmluZ10nOlxyXG4gICAgICAgICAgICAgICAgaWYgKHZhbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGUgPSBuZXcgRGF0ZSh2YWwpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRlID0gbmV3IERhdGUoMTAwMDAsIDEsIDEsIDAsIDAsIDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ1tvYmplY3QgTnVsbF0nOlxyXG4gICAgICAgICAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKDEwMDAwLCAxLCAxLCAwLCAwLCAwKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAvLyBjYXNlIG51bGw6XHJcbiAgICAgICAgICAgIC8vICAgICBkYXRlID0gbmV3IERhdGUoMTAwMDAsIDEsIDEsIDAsIDAsIDApO1xyXG4gICAgICAgICAgICAvLyAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ1tvYmplY3QgVW5kZWZpbmVkXSc6XHJcbiAgICAgICAgICAgICAgICBkYXRlID0gbmV3IERhdGUoMTAwMDAsIDEsIDEsIDAsIDAsIDApO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBkYXRlID0gbmV3IERhdGUoMTAwMDAsIDEsIDEsIDAsIDAsIDApO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpc1ZhbGlkKGRhdGUpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vbnRoID0gZGF0ZS5nZXRNb250aCgpICsgMTtcclxuICAgICAgICAgICAgY29uc3QgZGF5ID0gZGF0ZS5nZXREYXRlKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGhvdXIgPSBkYXRlLmdldEhvdXJzKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1pbnV0ZSA9IGRhdGUuZ2V0TWludXRlcygpO1xyXG4gICAgICAgICAgICBjb25zdCBzZWNvbmQgPSBkYXRlLmdldFNlY29uZHMoKTtcclxuICAgICAgICAgICAgdGhpcy5fbWF4RGF0ZSA9IHsgeWVhciwgbW9udGgsIGRheSwgaG91ciwgbWludXRlLCBzZWNvbmQgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXQgbWF4RGF0ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbWF4RGF0ZTtcclxuICAgIH1cclxuICAgIC8vIOmcgOimgemrmOS6ruaYvuekuueahOaXpeacn1xyXG4gICAgQElucHV0KCkgaGlnaGxpZ2h0RGF0ZXM6IEFycmF5PElNeURhdGU+ID0gW107XHJcbiAgICAvLyDnpoHnlKjljLrln5/nmoTml6XmnJ/lvIDlp4vml7bpl7RcclxuICAgIEBJbnB1dCgpIGRpc2FibGVEYXRlUmFuZ2VzQmVnaW46IElNeURhdGUgPSB7XHJcbiAgICAgICAgeWVhcjogMCxcclxuICAgICAgICBtb250aDogMCxcclxuICAgICAgICBkYXk6IDBcclxuICAgIH07XHJcbiAgICAvLyDnpoHnlKjljLrln5/nmoTml6XmnJ/nu5PmnZ/ml7bpl7RcclxuICAgIEBJbnB1dCgpIGRpc2FibGVEYXRlUmFuZ2VzRW5kOiBJTXlEYXRlID0ge1xyXG4gICAgICAgIHllYXI6IDAsXHJcbiAgICAgICAgbW9udGg6IDAsXHJcbiAgICAgICAgZGF5OiAwXHJcbiAgICB9O1xyXG4gICAgLy8g56aB55So55qE5pel5pyfXHJcbiAgICBASW5wdXQoKSBkaXNhYmxlRGF0ZXM6IEFycmF5PElNeURhdGU+ID0gW107XHJcbiAgICAvLyDkuIDlkajkuK3ooqvnpoHnlKjnmoTml6XlrZBcclxuICAgIEBJbnB1dCgpIGRpc2FibGVXZWVrZGF5czogQXJyYXk8c3RyaW5nPiA9IFtdO1xyXG4gICAgLy8g6KKr5qCH6K6w55qE5pel5pyfXHJcbiAgICBASW5wdXQoKSBtYXJrRGF0ZXM6IEFycmF5PElNeURhdGU+ID0gW107XHJcbiAgICAvLyDooqvmoIforrDnmoTml6XmnJ/nmoTmmL7npLrpopzoibJcclxuICAgIEBJbnB1dCgpIG1hcmtEYXRlc0NvbG9yID0gJyM1OWExZmYnO1xyXG4gICAgLy8g5piv5ZCm5pi+56S656ys5Yeg5ZGoXHJcbiAgICBASW5wdXQoKSBzaG93V2Vla051bWJlcnMgPSBmYWxzZTtcclxuICAgIC8vIOaYr+WQpuagh+iusOWRqOacq1xyXG4gICAgQElucHV0KCkgaXNNYXJrV2Vla2VuZHMgPSBmYWxzZTtcclxuICAgIC8vIOiiq+agh+iusOWRqOacq+eahOaYvuekuuminOiJslxyXG4gICAgQElucHV0KCkgbWFya1dlZWtlbmRzQ29sb3IgPSAnIzU5YTFmZic7XHJcbiAgICAvLyDml6XmnJ/ojIPlm7TmqKHlvI/kuItpbnB1dOeahOaYvuekuuWIhuWJsuespuWQiFxyXG4gICAgQElucHV0KCkgZGF0ZVJhbmdlRGF0ZXNEZWxpbWl0ZXIgPSAnfic7XHJcbiAgICAvLyDphY3nva7lt6bkvqcgc2lkZWJhciDlv6vmjbfplK5cclxuICAgIEBJbnB1dCgpIHNob3J0Y3V0czogQXJyYXk8SU15U2hvcnRjdXRzPiA9IFtdO1xyXG4gICAgLy8g5pel5pyf6IyD5Zu06YCJ5oup5pe277yM6buY6K6k57uT5p2f5pyI5Lu95Li65b2T5YmN5pyI5Lu9ICsgbW9udGhSYW5nZVZhbHVlXHJcbiAgICBASW5wdXQoKSBtb250aFJhbmdlVmFsdWUgPSAxO1xyXG4gICAgLy8g5pel5pyf6IyD5Zu077ya5byA5aeL5pel5pyfXHJcbiAgICBASW5wdXQoKVxyXG4gICAgc2V0IGJlZ2luVmFsdWUodmFsdWU6IHN0cmluZyB8IERhdGUpIHtcclxuICAgICAgICB2YWx1ZSA9IHZhbHVlID8gdmFsdWUgOiAnJztcclxuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBEYXRlKSB7XHJcbiAgICAgICAgICAgIHZhbHVlID0gdGhpcy5kYXRlVG8odmFsdWUpO1xyXG4gICAgICAgICAgICB0aGlzLnJldHVyblR5cGUgPSAnRGF0ZSc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHZhbHVlLmluZGV4T2YoJ1QnKSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoJ1QnLCAnICcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMucmV0dXJuVHlwZSA9ICdTdHJpbmcnO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9iZWdpblZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgaWYgKHRoaXMuX2luaXRGaW5pc2hlZCkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFZhbHVlKHRoaXMuX2JlZ2luVmFsdWUgKyB0aGlzLmRhdGVSYW5nZURhdGVzRGVsaW1pdGVyICsgdGhpcy5fZW5kVmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldCBiZWdpblZhbHVlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGVGcm9tKHRoaXMuX2JlZ2luVmFsdWUsIHRydWUpO1xyXG4gICAgfVxyXG4gICAgLy8g5pel5pyf6IyD5Zu077ya57uT5p2f5pel5pyfXHJcbiAgICBASW5wdXQoKVxyXG4gICAgc2V0IGVuZFZhbHVlKHZhbHVlOiBzdHJpbmcgfCBEYXRlKSB7XHJcbiAgICAgICAgdmFsdWUgPSB2YWx1ZSA/IHZhbHVlIDogJyc7XHJcbiAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgRGF0ZSkge1xyXG4gICAgICAgICAgICB2YWx1ZSA9IHRoaXMuZGF0ZVRvKHZhbHVlKTtcclxuICAgICAgICAgICAgdGhpcy5yZXR1cm5UeXBlID0gJ0RhdGUnO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZS5pbmRleE9mKCdUJykgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKCdUJywgJyAnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnJldHVyblR5cGUgPSAnU3RyaW5nJztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fZW5kVmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICBpZiAodGhpcy5faW5pdEZpbmlzaGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0VmFsdWUodGhpcy5fYmVnaW5WYWx1ZSArIHRoaXMuZGF0ZVJhbmdlRGF0ZXNEZWxpbWl0ZXIgKyB0aGlzLl9lbmRWYWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0IGVuZFZhbHVlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGVGcm9tKHRoaXMuX2VuZFZhbHVlLCB0cnVlKTtcclxuICAgIH1cclxuICAgIC8vIGNsZWFyIOS6i+S7tlxyXG4gICAgQE91dHB1dCgpIGNsZWFyID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgLy8gdmFsdWVDaGFuZ2VkIOS6i+S7tlxyXG4gICAgQE91dHB1dCgpIHZhbHVlQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgLy8gZm9jdXMg5LqL5Lu2XHJcbiAgICBAT3V0cHV0KCkgZm9jdXMgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICAvLyBibHVyIOS6i+S7tlxyXG4gICAgQE91dHB1dCgpIGJsdXIgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICAvLyBiZWdpblZhbHVlQ2hhbmdlXHJcbiAgICBAT3V0cHV0KCkgYmVnaW5WYWx1ZUNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIC8vIGVuZFZhbHVlQ2hhbmdlXHJcbiAgICBAT3V0cHV0KCkgZW5kVmFsdWVDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICAvLyBQcmV2Rm9jdXMgZGF0ZVJhbmdlIOesrOS4gOS4quaXpeacn1xyXG4gICAgQE91dHB1dCgpIFByZXZGb2N1cyA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIC8vIE5leHRGb2N1cyBkYXRlUmFuZ2Ug56ys5LqM5Liq5pel5pyfXHJcbiAgICBAT3V0cHV0KCkgTmV4dEZvY3VzID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICAgIC8vIGNsb3NlIOS6i+S7tlxyXG4gICAgQE91dHB1dCgpIGNsb3NlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuXHJcbiAgICBAVmlld0NoaWxkKEZhcnJpc0RhdGVQaWNrZXJEaXJlY3RpdmUpIGRwOiBGYXJyaXNEYXRlUGlja2VyRGlyZWN0aXZlO1xyXG4gICAgQFZpZXdDaGlsZCgnY2xlYXJJY29uJykgY2xlYXJJY29uOiBFbGVtZW50UmVmO1xyXG4gICAgQFZpZXdDaGlsZCgnY2FsZW5kYXInLCB7IHJlYWQ6IFZpZXdDb250YWluZXJSZWYgfSkgY2FsZW5kYXJSZWY6IFZpZXdDb250YWluZXJSZWY7XHJcbiAgICBAVmlld0NoaWxkKCdvblByZXZGb2N1cycpIFBGb2N1czogRWxlbWVudFJlZjtcclxuICAgIEBWaWV3Q2hpbGQoJ29uTmV4dEZvY3VzJykgTkZvY3VzOiBFbGVtZW50UmVmO1xyXG5cclxuICAgIEBWaWV3Q2hpbGQoJ2RhdGVJbnB1dCcpIGRhdGVJbnB1dDogRWxlbWVudFJlZjtcclxuXHJcbiAgICBwcml2YXRlIGNSZWY6IENvbXBvbmVudFJlZjxDYWxlbmRhckNvbXBvbmVudD4gPSBudWxsO1xyXG4gICAgcHJpdmF0ZSBfdGltZUZvcm1hdCA9ICcnO1xyXG4gICAgcHJpdmF0ZSBfdmFsdWUgPSAnJztcclxuICAgIHB1YmxpYyBfYmVnaW5WYWx1ZSA9ICcnO1xyXG4gICAgcHVibGljIF9lbmRWYWx1ZSA9ICcnO1xyXG4gICAgcHJpdmF0ZSBfaW5pdEZpbmlzaGVkID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIF90aW1lcjogYW55O1xyXG4gICAgcHJpdmF0ZSBfZGF0ZUZvcm1hdDogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBfbWluRGF0ZTogSU15RGF0ZSA9IHtcclxuICAgICAgICB5ZWFyOiAxODQwLFxyXG4gICAgICAgIG1vbnRoOiAxLFxyXG4gICAgICAgIGRheTogMSxcclxuICAgICAgICBob3VyOiAwLFxyXG4gICAgICAgIG1pbnV0ZTogMCxcclxuICAgICAgICBzZWNvbmQ6IDBcclxuICAgIH07XHJcbiAgICBwcml2YXRlIF9tYXhEYXRlOiBJTXlEYXRlID0ge1xyXG4gICAgICAgIHllYXI6IDEwMDAwLFxyXG4gICAgICAgIG1vbnRoOiAxLFxyXG4gICAgICAgIGRheTogMSxcclxuICAgICAgICBob3VyOiAwLFxyXG4gICAgICAgIG1pbnV0ZTogMCxcclxuICAgICAgICBzZWNvbmQ6IDBcclxuICAgIH07XHJcbiAgICBzZXQgdmFsdWUodikge1xyXG4gICAgICAgIHRoaXMuX3ZhbHVlID0gdiA/IHYgOiAnJztcclxuICAgIH1cclxuICAgIGdldCB2YWx1ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgZGF0ZU9wdHM6IElNeU9wdGlvbnMgPSB7fTtcclxuICAgIGRlZmF1bHRDb25maWc6IElNeU9wdGlvbnM7XHJcbiAgICBsb2NhbERhdGVPcHRzOiBJTXlPcHRpb25zO1xyXG4gICAgbG9jYWxlQ29uZmlnOiBEYXRlcGlja2VyTG9jYWxlU2VydmljZTtcclxuICAgIGxvY2FsZVNlcnZpY2U6IExvY2FsZVNlcnZpY2U7XHJcbiAgICAvLyDlvIDlp4vovpPlhaXmjqfku7bogZrnhKZcclxuICAgIGJlZ2luRm9jdXMgPSBmYWxzZTtcclxuICAgIC8vIOe7k+adn+i+k+WFpeaOp+S7tuiBmueEplxyXG4gICAgZW5kRm9jdXMgPSBmYWxzZTtcclxuICAgIC8vIOaVtOS9k+iBmueEplxyXG4gICAgdG90YWxGb2N1cyA9IGZhbHNlO1xyXG5cclxuICAgIG9yaWdpblRpbWU6IGFueTtcclxuICAgIC8vIOaYr+WQpuWtl+espui2hemVv+aYvuekulRpcFxyXG4gICAgaXNBY3RpdmVUaXAgPSBmYWxzZTtcclxuICAgIHByaXZhdGUgdmNSZWY6IFZpZXdDb250YWluZXJSZWY7XHJcbiAgICBwcml2YXRlIGNmcjogQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyO1xyXG4gICAgcHJpdmF0ZSByZW5kZXJlcjogUmVuZGVyZXIyO1xyXG4gICAgcHJpdmF0ZSBkYXRlUGljZWtyU2VydmljZTogRGF0ZVBpY2tlclNlcnZpY2U7XHJcbiAgICBwcml2YXRlIF9yZWFsVmFsdWUgPSBudWxsO1xyXG4gICAgcHJpdmF0ZSBfcmVhbFJhbmdlVmFsdWUgPSBudWxsO1xyXG4gICAgcHJpdmF0ZSBub3RpZnlTZXI6IE5vdGlmeVNlcnZpY2U7XHJcbiAgICBwcml2YXRlIGZvcm1hdGVkVmFsdWUgPSAnJztcclxuICAgIGR0U2VydmljZTogRGF0ZVRpbWVIZWxwZXJTZXJ2aWNlID0gbnVsbDtcclxuICAgIHByaXZhdGUgX2FwcGxpY2F0aW9uUmVmOiBBcHBsaWNhdGlvblJlZjtcclxuXHJcbiAgICBwcml2YXRlIF9uZ0NvbnRyb2w6IE5nQ29udHJvbDtcclxuICAgIF91cGRhdGVPbiA9ICdjaGFuZ2UnO1xyXG5cclxuICAgIC8vIOaXpeacn+mAieaLqeWQjuiuvue9ruS4uiB0cnVl77yMIGJsdXIg5LqL5Lu25bCG5LiN5Lya6YeN5aSN5omn6KGMdmFsdWVDaGFuZ2Vk77ybXHJcbiAgICAvLyDplK7nm5jkv67mlLnml7bvvIxibHVyIOS6i+S7tuS4reS8muaJp+ihjOS4gOasoSB2YWx1ZUNoYW5nZWQg5ZCO77yM5bCG5q2k5YC86K6+5Li6IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBfdmFsdWVDaGFuZ2VFbWl0dGVkID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIF9tb3VzZWRvd25FdmVudCA9IG51bGw7XHJcbiAgICBwcml2YXRlIGNsb3NlQ2FsZW5kYXJIYW5kbGVyID0gbnVsbDtcclxuICAgIHByaXZhdGUgY2RyOiBDaGFuZ2VEZXRlY3RvclJlZiA9IG51bGw7XHJcbiAgICAvKiog57yT5a2Y6YCa6L+H54K55Ye75pel5Y6G55qE5pWw5o2u77yM55So5LqO55qE5qC85byP5YyW5qC85byP5LiN5qCH5YeG5pe277yM5qC85byP5YyW5pWw5o2u44CCICovXHJcbiAgICBwcml2YXRlIF9TRUxFQ1RfREFURV8gPSBudWxsO1xyXG5cclxuICAgIG9uTW9kZWxDaGFuZ2UgPSAob2JqOiBhbnkpID0+IHsgfTtcclxuICAgIG9uTW9kZWxUb3VjaGVkID0gKCkgPT4geyB9O1xyXG5cclxuICAgIHByaXZhdGUgb3ZlckxheVNlcnZpY2U6IE92ZXJMYXlIaWRkZW5TZXJ2aWNlO1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHJpdmF0ZSBlbDogRWxlbWVudFJlZixcclxuICAgICAgICBwcml2YXRlIHV0aWxTZXJ2aWNlOiBVdGlsU2VydmljZSxcclxuICAgICAgICBwcml2YXRlIGRlZmF1bHRDb25maWdTZXJ2aWNlOiBEZWZhdWx0Q29uZmlnU2VydmljZSxcclxuICAgICAgICBwcml2YXRlIGluamVjdG9yOiBJbmplY3RvclxyXG4gICAgKSB7XHJcbiAgICAgICAgdGhpcy5kZWZhdWx0Q29uZmlnID0gdGhpcy5kZWZhdWx0Q29uZmlnU2VydmljZS5nZXREZWZhdWx0Q29uZmlnKCk7XHJcbiAgICAgICAgaWYgKHRoaXMuaW5qZWN0b3IpIHtcclxuICAgICAgICAgICAgdGhpcy5sb2NhbGVTZXJ2aWNlID0gdGhpcy5pbmplY3Rvci5nZXQoTG9jYWxlU2VydmljZSk7XHJcbiAgICAgICAgICAgIHRoaXMuZHRTZXJ2aWNlID0gdGhpcy5pbmplY3Rvci5nZXQoRGF0ZVRpbWVIZWxwZXJTZXJ2aWNlKTtcclxuICAgICAgICAgICAgdGhpcy5ub3RpZnlTZXIgPSB0aGlzLmluamVjdG9yLmdldChOb3RpZnlTZXJ2aWNlLCBudWxsKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMubm90aWZ5U2VyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeVNlci5jb25maWcucG9zaXRpb24gPSAndG9wLWNlbnRlcic7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5sb2NhbGVDb25maWcgPSBuZXcgRGF0ZXBpY2tlckxvY2FsZVNlcnZpY2UoKTtcclxuICAgICAgICB0aGlzLnZjUmVmID0gdGhpcy5pbmplY3Rvci5nZXQoVmlld0NvbnRhaW5lclJlZiwgbnVsbCk7XHJcbiAgICAgICAgdGhpcy5jZnIgPSB0aGlzLmluamVjdG9yLmdldChDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsIG51bGwpO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSB0aGlzLmluamVjdG9yLmdldChSZW5kZXJlcjIsIG51bGwpO1xyXG4gICAgICAgIHRoaXMuX2FwcGxpY2F0aW9uUmVmID0gdGhpcy5pbmplY3Rvci5nZXQoQXBwbGljYXRpb25SZWYpO1xyXG4gICAgICAgIHRoaXMuY2RyID0gdGhpcy5pbmplY3Rvci5nZXQoQ2hhbmdlRGV0ZWN0b3JSZWYpO1xyXG4gICAgICAgIC8vIHRoaXMuZGF0ZVBpY2VrclNlcnZpY2UgPSB0aGlzLmluamVjdG9yLmdldChEYXRlUGlja2VyU2VydmljZSwgbnVsbClcclxuICAgICAgICB0aGlzLm92ZXJMYXlTZXJ2aWNlID0gbmV3IE92ZXJMYXlIaWRkZW5TZXJ2aWNlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkluaXQoKTogdm9pZCB7XHJcblxyXG4gICAgICAgIHRoaXMuX25nQ29udHJvbCA9IHRoaXMuaW5qZWN0b3IuZ2V0KE5nQ29udHJvbCwgbnVsbCk7XHJcblxyXG4gICAgICAgIHRoaXMuaW5pdFBsYWNlaG9sZGVyKCk7XHJcbiAgICAgICAgdGhpcy5tZXJnZURhdGVPcHRpb25zKCk7XHJcbiAgICAgICAgaWYgKHRoaXMuX2JlZ2luVmFsdWUgJiYgdGhpcy5fZW5kVmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRWYWx1ZSh0aGlzLl9iZWdpblZhbHVlICsgdGhpcy5kYXRlUmFuZ2VEYXRlc0RlbGltaXRlciArIHRoaXMuX2VuZFZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5faW5pdEZpbmlzaGVkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmRhdGVQaWNla3JTZXJ2aWNlID0gbmV3IERhdGVQaWNrZXJTZXJ2aWNlKHRoaXMuZGF0ZU9wdHMpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaW5pdFBsYWNlaG9sZGVyKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmxvY2FsZVNlcnZpY2UpIHtcclxuICAgICAgICAgICAgdGhpcy5sb2NhbGUgPSB0aGlzLmxvY2FsZVNlcnZpY2UuZ2V0VmFsdWUoJ2xvY2FsZScpO1xyXG4gICAgICAgICAgICB0aGlzLmxvY2FsRGF0ZU9wdHMgPSB0aGlzLmxvY2FsZUNvbmZpZy5nZXRMb2NhbGVPcHRpb25zKHRoaXMubG9jYWxlKTtcclxuICAgICAgICAgICAgdGhpcy5wbGFjZWhvbGRlciA9IHRoaXMucGxhY2Vob2xkZXJcclxuICAgICAgICAgICAgICAgID8gdGhpcy5wbGFjZWhvbGRlclxyXG4gICAgICAgICAgICAgICAgOiB0aGlzLmxvY2FsRGF0ZU9wdHMucGxhY2Vob2xkZXJcclxuICAgICAgICAgICAgICAgICAgICA/IHRoaXMubG9jYWxEYXRlT3B0cy5wbGFjZWhvbGRlclxyXG4gICAgICAgICAgICAgICAgICAgIDogJ+ivt+mAieaLqeaXpeacnyc7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5iZWdpblBsYWNlaG9sZGVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJlZ2luUGxhY2Vob2xkZXIgPSB0aGlzLmxvY2FsRGF0ZU9wdHMucmFuZ2UuYmVnaW4gfHwgdGhpcy5wbGFjZWhvbGRlcjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCF0aGlzLmVuZFBsYWNlaG9sZGVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVuZFBsYWNlaG9sZGVyID0gdGhpcy5sb2NhbERhdGVPcHRzLnJhbmdlLmVuZCB8fCB0aGlzLnBsYWNlaG9sZGVyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgbWVyZ2VEYXRlT3B0aW9ucygpIHtcclxuICAgICAgICB0aGlzLmRhdGVPcHRzID0geyAuLi50aGlzLmRlZmF1bHRDb25maWcsIC4uLnRoaXMuYnVpbGRPcHRpb25zKCkgfTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZGF0ZU9wdHMuZGF0ZUZvcm1hdCkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuX2RhdGVGb3JtYXQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0ZUZvcm1hdCA9IHRoaXMuZGF0ZU9wdHMuZGF0ZUZvcm1hdDtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0ZU9wdHMuZGF0ZUZvcm1hdCA9IHRoaXMuZGF0ZUZvcm1hdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2hvd1RpbWUgJiYgIXRoaXMuX3RpbWVGb3JtYXQpIHtcclxuICAgICAgICAgICAgdGhpcy5fdGltZUZvcm1hdCA9ICdISDptbTpzcyc7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0ZU9wdHMudGltZUZvcm1hdCA9IHRoaXMuX3RpbWVGb3JtYXQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5kYXRlT3B0cy5yZXR1cm5Gb3JtYXQpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLnJldHVybkZvcm1hdCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXR1cm5Gb3JtYXQgPSB0aGlzLmRhdGVPcHRzLnJldHVybkZvcm1hdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XHJcbiAgICAgICAgaWYgKGNoYW5nZXMubG9jYWxlICYmIGNoYW5nZXMubG9jYWxlLmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICAvLyB0aGlzLmRwLnNldExvY2FsZU9wdGlvbnMoKTtcclxuICAgICAgICAgICAgdGhpcy5sb2NhbERhdGVPcHRzID0gdGhpcy5sb2NhbGVDb25maWcuZ2V0TG9jYWxlT3B0aW9ucyh0aGlzLmxvY2FsZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjaGFuZ2VzKSB7XHJcbiAgICAgICAgICAgIGxldCBmbGFnID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBpbnB1dHMgPSBbJ3Nob3dUaW1lJywgJ3Nob3dUeXBlJywgJ2RhdGVSYW5nZScsICdtYXhEYXRlJywgJ21pbkRhdGUnLCAnbW9udGhSYW5nZVZhbHVlJ107XHJcblxyXG5cclxuICAgICAgICAgICAgT2JqZWN0LmtleXMoY2hhbmdlcykuZm9yRWFjaChlID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghY2hhbmdlc1tlXS5pc0ZpcnN0Q2hhbmdlKCkgJiYgKHRoaXMuZGF0ZU9wdHNbZV0gfHwgaW5wdXRzLmluY2x1ZGVzKGUpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXNbZV0gPSBjaGFuZ2VzW2VdLmN1cnJlbnRWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBmbGFnID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmIChmbGFnKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGVPcHRzID0geyAuLi50aGlzLmRlZmF1bHRDb25maWcsIC4uLnRoaXMuYnVpbGRPcHRpb25zKCkgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIGNoYW5nZXMucmVhZG9ubHkgJiZcclxuICAgICAgICAgICAgIWNoYW5nZXMucmVhZG9ubHkuY3VycmVudFZhbHVlICYmXHJcbiAgICAgICAgICAgICFjaGFuZ2VzLnJlYWRvbmx5LmZpcnN0Q2hhbmdlICYmXHJcbiAgICAgICAgICAgICF0aGlzLnZhbHVlICYmXHJcbiAgICAgICAgICAgIHRoaXMudXNlRGVmYXVsdFxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICB0aGlzLnNldERlZmF1bHRWYWx1ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBuZ0FmdGVyVmlld0luaXQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX25nQ29udHJvbCAmJiB0aGlzLl9uZ0NvbnRyb2wuY29udHJvbCkge1xyXG4gICAgICAgICAgICB0aGlzLl91cGRhdGVPbiA9IHRoaXMuX25nQ29udHJvbC5jb250cm9sLnVwZGF0ZU9uO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fdGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zZXREZWZhdWx0VmFsdWUoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBuZ09uRGVzdHJveSgpOiB2b2lkIHtcclxuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5fdGltZXIpO1xyXG4gICAgICAgIHRoaXMuY2xvc2VTZWxlY3RvcigpO1xyXG5cclxuICAgICAgICB0aGlzLm92ZXJMYXlTZXJ2aWNlLmRlc3RvcnkodGhpcy5lbC5uYXRpdmVFbGVtZW50KTtcclxuICAgICAgICB0aGlzLm92ZXJMYXlTZXJ2aWNlID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBASG9zdExpc3RlbmVyKCdtb3VzZWVudGVyJywgWyckZXZlbnQnXSkgb25Nb3VzZUVudGVyKGV2ZW50KSB7XHJcbiAgICAgICAgaWYgKHRoaXMudmFsdWUgJiYgIXRoaXMucmVhZG9ubHkgJiYgIXRoaXMuZGlzYWJsZWQpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMudmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJJY29uLm5hdGl2ZUVsZW1lbnQuc3R5bGUudmlzaWJpbGl0eSA9ICcnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRhdGVPcHRzLmRhdGVSYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGF0ZU9wdHMuc2hvd1RpbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQWN0aXZlVGlwID0gdGhpcy5lbC5uYXRpdmVFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoIDwgMzAwO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQWN0aXZlVGlwID0gdGhpcy5lbC5uYXRpdmVFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoIDwgMTkwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGF0ZU9wdHMuc2hvd1RpbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQWN0aXZlVGlwID0gdGhpcy5lbC5uYXRpdmVFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoIDwgMTcwO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQWN0aXZlVGlwID0gdGhpcy5lbC5uYXRpdmVFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoIDwgMTIwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIEBIb3N0TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBbJyRldmVudCddKSBvbk1vdXNlTGVhdmUoZXZlbnQpIHtcclxuICAgICAgICBpZiAoIXRoaXMucmVhZG9ubHkgJiYgIXRoaXMuZGlzYWJsZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5jbGVhckljb24ubmF0aXZlRWxlbWVudC5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uQmx1cihlKSB7XHJcbiAgICAgICAgdGhpcy50b3RhbEZvY3VzID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGxldCBfcnVuYmx1ciA9IHRydWU7XHJcbiAgICAgICAgaWYgKHRoaXMudmFsdWUpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnRyYW5zZm9ybSh0aGlzLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHZhbGlkID0gdGhpcy5faXNWYWxpZCh0aGlzLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgIGlmICghdmFsaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyRGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF9ydW5ibHVyID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJEYXRlKCk7XHJcbiAgICAgICAgICAgICAgICBfcnVuYmx1ciA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCB1cGRhdGVNb2RlbCA9ICgpID0+IHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLl92YWx1ZUNoYW5nZUVtaXR0ZWQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlYWxEYXRlID0gdGhpcy5kYXRlRnJvbSh0aGlzLnRyYW5zZm9ybSh0aGlzLnZhbHVlLCB0aGlzLnJldHVybkZvcm1hdCkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbk5nTW9kZWxDaGFuZ2UodGhpcy52YWx1ZSwgcmVhbERhdGUsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbk1vZGVsVG91Y2hlZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZWRpdGFibGUgJiYgX3J1bmJsdXIpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXNbJ2luRGF0YWdyaWQnXSkge1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlTW9kZWwoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQodXBkYXRlTW9kZWwsIDI1MCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fdmFsdWVDaGFuZ2VFbWl0dGVkID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHRoaXMuX21vdXNlZG93bkV2ZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX21vdXNlZG93bkV2ZW50KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX21vdXNlZG93bkV2ZW50ID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5ibHVyLmVtaXQoKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkZvY3VzKGUpIHtcclxuICAgICAgICB0aGlzLnRvdGFsRm9jdXMgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJNb3VzZURvd25IYW5kbGUoKTtcclxuICAgICAgICB0aGlzLmZvY3VzLmVtaXQoKTtcclxuICAgIH1cclxuXHJcbiAgICBvbklucHV0Q2xpY2soZXZlbnQpIHtcclxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICBpZiAoIXRoaXMucmVhZG9ubHkgJiYgIXRoaXMuZGlzYWJsZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5yZWdpc3Rlck1vdXNlRG93bkhhbmRsZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUNhbGVuZGFyKGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZWdpc3Rlck1vdXNlRG93bkhhbmRsZSgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX21vdXNlZG93bkV2ZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX21vdXNlZG93bkV2ZW50ID0gdGhpcy5yZW5kZXJlci5saXN0ZW4oZG9jdW1lbnQsICdtb3VzZWRvd24nLCAoZTogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2xhc3NOYW1lLnRvU3RyaW5nKCkuaW5kZXhPZignU1ZHQW5pbWF0ZWRTdHJpbmcnKSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNsb3Nlc3QoJy5mLWNtcC1kYXRlcGlja2VyJykgfHxcclxuICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC5jbG9zZXN0KCcuZi1kYXRlcGlja2VyLWNvbnRhaW5lcicpIHx8IGUudGFyZ2V0LmNsYXNzTmFtZS5pbmRleE9mKCdmLWljb24tZGF0ZScpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5kYXRlSW5wdXQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZSh0aGlzLmRhdGVJbnB1dC5uYXRpdmVFbGVtZW50LCAndW5zZWxlY3RhYmxlJywgJ29uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldERlZmF1bHRWYWx1ZSgpIHtcclxuICAgICAgICBpZiAoIXRoaXMucmVhZG9ubHkgJiYgIXRoaXMudmFsdWUgJiYgdGhpcy51c2VEZWZhdWx0KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgIGxldCBub3dWYWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuZGF0ZU9wdHMuZGF0ZVJhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICBub3dWYWx1ZSA9IHRoaXMuZGF0ZVRvKG5vdyk7XHJcblxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbm93VmFsdWUgPVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0ZVRvKG5vdykgK1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0ZVJhbmdlRGF0ZXNEZWxpbWl0ZXIgK1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0ZVRvKG5ldyBEYXRlKG5vdy5zZXRNb250aChub3cuZ2V0TW9udGgoKSArIDEpKSk7XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRhdGVQaWNla3JTZXJ2aWNlLnZhbGlkYXRlKG5vd1ZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IG5vd1ZhbHVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbk5nTW9kZWxDaGFuZ2UodGhpcy52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uTW9kZWxUb3VjaGVkKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY2xlYXJEYXRlKCRldmVudDogTW91c2VFdmVudCA9IG51bGwpIHtcclxuICAgICAgICBpZiAoJGV2ZW50KSB7XHJcbiAgICAgICAgICAgICRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX1NFTEVDVF9EQVRFXyA9IG51bGw7XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5kaXNhYmxlZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9yZWFsUmFuZ2VWYWx1ZSA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlYWxWYWx1ZSA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMub25EYXRlQ2hhbmdlZCh7XHJcbiAgICAgICAgICAgICAgICBpc1JhbmdlOiB0aGlzLmRhdGVPcHRzLmRhdGVSYW5nZSxcclxuICAgICAgICAgICAgICAgIHNpbmdsZURhdGU6IHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRlOiB0aGlzLnV0aWxTZXJ2aWNlLnJlc2V0RGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgIGpzRGF0ZTogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWQ6IEVNUFRZX1NUUixcclxuICAgICAgICAgICAgICAgICAgICBlcG9jOiAwXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZGF0ZVJhbmdlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmVnaW5EYXRlOiB0aGlzLnV0aWxTZXJ2aWNlLnJlc2V0RGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgIGJlZ2luSnNEYXRlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIGJlZ2luRXBvYzogMCxcclxuICAgICAgICAgICAgICAgICAgICBlbmREYXRlOiB0aGlzLnV0aWxTZXJ2aWNlLnJlc2V0RGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgIGVuZEpzRGF0ZTogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBlbmRFcG9jOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZDogRU1QVFlfU1RSXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlU2VsZWN0b3IoQ2FsVG9nZ2xlLkNsb3NlQnlDYWxCdG4pO1xyXG4gICAgICAgICAgICB0aGlzLm9uTW9kZWxDaGFuZ2UobnVsbCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2xlYXIuZW1pdCgpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jbGVhckljb24pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJJY29uLm5hdGl2ZUVsZW1lbnQuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uU2luZ2xlSW5wdXROZ01vZGVsQ2hhbmdlKCRldmVudCkge1xyXG4gICAgICAgIHRoaXMudmFsdWUgPSAkZXZlbnQgfHwgJyc7XHJcbiAgICAgICAgdGhpcy5fcmVhbFZhbHVlID0gdGhpcy52YWx1ZSA/IHRoaXMuZGF0ZUZyb20oJGV2ZW50KSA6ICcnO1xyXG4gICAgICAgIHRoaXMuY2xvc2VTZWxlY3RvcigpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBvbk5nTW9kZWxDaGFuZ2UodmFsdWU6IGFueSwgcmVhbGRhdGUgPSBudWxsLCBlbWl0VmFsdWVDaGFuZ2UgPSBmYWxzZSkge1xyXG4gICAgICAgIC8vIHRoaXMudmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICBpZiAodGhpcy5kYXRlUmFuZ2UgfHwgdGhpcy5zaG93VHlwZSA9PSBTaG93VHlwZS5zZWxlY3RXZWVrKSB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB0bXBBcnIgPSB2YWx1ZSA/IHZhbHVlLnNwbGl0KHRoaXMuZGF0ZVJhbmdlRGF0ZXNEZWxpbWl0ZXIpIDogWycnLCAnJ107XHJcbiAgICAgICAgICAgIGNvbnN0IF9iZWdpblZhbHVlID0gdGhpcy50cmFuc2Zvcm0odG1wQXJyWzBdLCB0aGlzLnJldHVybkZvcm1hdCk7XHJcbiAgICAgICAgICAgIGNvbnN0IF9lbmRWYWx1ZSA9IHRoaXMudHJhbnNmb3JtKHRtcEFyclsxXSwgdGhpcy5yZXR1cm5Gb3JtYXQpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fYmVnaW5WYWx1ZSA9IHRoaXMudHJhbnNmb3JtKHRtcEFyclswXSk7XHJcbiAgICAgICAgICAgIHRoaXMuX2VuZFZhbHVlID0gdGhpcy50cmFuc2Zvcm0odG1wQXJyWzFdKTtcclxuXHJcblxyXG4gICAgICAgICAgICB2YWx1ZSA9IF9iZWdpblZhbHVlICYmIF9lbmRWYWx1ZSA/IF9iZWdpblZhbHVlICsgdGhpcy5kYXRlUmFuZ2VEYXRlc0RlbGltaXRlciArIF9lbmRWYWx1ZSA6ICcnO1xyXG4gICAgICAgICAgICB0aGlzLl9yZWFsUmFuZ2VWYWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICB0aGlzLm9uTW9kZWxDaGFuZ2UodmFsdWUpO1xyXG4gICAgICAgICAgICB0aGlzLmNkci5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgIHRoaXMuYmVnaW5WYWx1ZUNoYW5nZS5lbWl0KHRoaXMuX2JlZ2luVmFsdWUpO1xyXG4gICAgICAgICAgICB0aGlzLmVuZFZhbHVlQ2hhbmdlLmVtaXQodGhpcy5fZW5kVmFsdWUpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcCA9IHtcclxuICAgICAgICAgICAgICAgIGRhdGU6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZWQ6IHRoaXMudmFsdWUsXHJcbiAgICAgICAgICAgICAgICByZXR1cm5Gb3JtYXR0ZWQ6IHRoaXMuX3JlYWxSYW5nZVZhbHVlLFxyXG4gICAgICAgICAgICAgICAgY21wUmVmOiB0aGlzXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlLmVtaXQocCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gJycpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSAnJztcclxuICAgICAgICAgICAgICAgIHRoaXMuX29uTW9kZWxDaGFuZ2UobnVsbCwgZW1pdFZhbHVlQ2hhbmdlKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHJlYWxkYXRlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9yZWFsVmFsdWUgPSB0aGlzLmdldFJlYWxSZXR1cm5Gb3JtYXR0ZWQocmVhbGRhdGUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fb25Nb2RlbENoYW5nZSh0aGlzLl9yZWFsVmFsdWUsIGVtaXRWYWx1ZUNoYW5nZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGF0ZUlucHV0ICYmIHRoaXMuZGF0ZUlucHV0Lm5hdGl2ZUVsZW1lbnQudmFsdWUgIT09IHRoaXMudmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFByb3BlcnR5KHRoaXMuZGF0ZUlucHV0Lm5hdGl2ZUVsZW1lbnQsICd2YWx1ZScsIHRoaXMudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2lzVmFsaWQodmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmVhbFZhbHVlID0gdGhpcy5nZXRSZWFsUmV0dXJuRm9ybWF0dGVkKHJlYWxkYXRlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5kYXRlSW5wdXQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRQcm9wZXJ0eSh0aGlzLmRhdGVJbnB1dC5uYXRpdmVFbGVtZW50LCAndmFsdWUnLCB0aGlzLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fb25Nb2RlbENoYW5nZSh0aGlzLl9yZWFsVmFsdWUsIGVtaXRWYWx1ZUNoYW5nZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX29uTW9kZWxDaGFuZ2UocmVhbFZhbHVlLCBlbWl0KSB7XHJcbiAgICAgICAgdGhpcy5fcmVhbFZhbHVlID0gcmVhbFZhbHVlO1xyXG4gICAgICAgIHRoaXMub25Nb2RlbENoYW5nZShyZWFsVmFsdWUpO1xyXG4gICAgICAgIGlmIChlbWl0KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHAgPSB7XHJcbiAgICAgICAgICAgICAgICBkYXRlOiB0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVZhbGlkKHRoaXMudmFsdWUsIHRoaXMuZGF0ZU9wdHMsIHRydWUpLFxyXG4gICAgICAgICAgICAgICAgZm9ybWF0dGVkOiB0aGlzLnZhbHVlLFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuRm9ybWF0dGVkOiByZWFsVmFsdWUsXHJcbiAgICAgICAgICAgICAgICBjbXBSZWY6IHRoaXNcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlQ2hhbmdlLm9ic2VydmVycy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLndoZW5WYWx1ZUNoYW5nZWRUaGVuQ2xvc2VTZWxlY3RvclBhbmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZVNlbGVjdG9yKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZUNoYW5nZS5lbWl0KHApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwcml2YXRlIGdldFJlYWxSZXR1cm5Gb3JtYXR0ZWQocmVhbGRhdGU6IGFueSkge1xyXG5cclxuICAgICAgICBpZiAocmVhbGRhdGUpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMucmV0dXJuVHlwZSA9PT0gJ0RhdGUnKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVhbGRhdGU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5yZXR1cm5Gb3JtYXQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kdFNlcnZpY2UuZm9ybWF0VG8ocmVhbGRhdGUsIHRoaXMucmV0dXJuRm9ybWF0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiByZWFsZGF0ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGVGcm9tKHRoaXMuX3JlYWxWYWx1ZSB8fCB0aGlzLnZhbHVlKSB8fCAnJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25EYXRlUmFuZ2VJbnB1dEJsdXIoZXZlbnQ6IGFueSkge1xyXG4gICAgICAgIHRoaXMuc2V0VmFsdWUodGhpcy5fYmVnaW5WYWx1ZSArIHRoaXMuZGF0ZVJhbmdlRGF0ZXNEZWxpbWl0ZXIgKyB0aGlzLl9lbmRWYWx1ZSk7XHJcbiAgICAgICAgdGhpcy5vbk5nTW9kZWxDaGFuZ2UodGhpcy5fcmVhbFJhbmdlVmFsdWUgfHwgdGhpcy52YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgb3BlbkNhbGVuZGFyKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLmRpc2FibGVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCB2YWwgPSB0aGlzLl9yZWFsVmFsdWU7XHJcbiAgICAgICAgaWYgKHRoaXMuZGF0ZVJhbmdlKSB7XHJcbiAgICAgICAgICAgIHZhbCA9IHRoaXMuX3JlYWxSYW5nZVZhbHVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnJldHVyblR5cGUgPT09ICdEYXRlJykge1xyXG4gICAgICAgICAgICAgICAgdmFsID0gdGhpcy50cmFuc2Zvcm0odmFsLCB0aGlzLnJldHVybkZvcm1hdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmNSZWYgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5jUmVmID0gdGhpcy5jYWxlbmRhclJlZi5jcmVhdGVDb21wb25lbnQoXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNmci5yZXNvbHZlQ29tcG9uZW50RmFjdG9yeShDYWxlbmRhckNvbXBvbmVudClcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZGF0ZVBpY2VrclNlcnZpY2UuYXBwZW5kU2VsZWN0b3IodGhpcy5jUmVmLmxvY2F0aW9uLm5hdGl2ZUVsZW1lbnQpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5kYXRlUGljZWtyU2VydmljZS5yZWdpc3RlclNjcm9sbEV2ZW50KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VTZWxlY3RvcigpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY1JlZi5pbnN0YW5jZS5pbml0aWFsaXplKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRlT3B0cyxcclxuICAgICAgICAgICAgICAgICcnLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRlUGljZWtyU2VydmljZS5nZXRTZWxlY3RvclBvc2l0aW9uKHRoaXMuZWwubmF0aXZlRWxlbWVudCwgdGhpcy5jUmVmKSxcclxuICAgICAgICAgICAgICAgIHZhbCxcclxuICAgICAgICAgICAgICAgIChkbTogSU15RGF0ZU1vZGVsLCBjbG9zZTogYm9vbGVhbikgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5kYXRlT3B0cy5kYXRlUmFuZ2UgJiYgdGhpcy5zaG93VGltZSAmJiBkbS5kYXRlUmFuZ2UuZW5kSnNEYXRlIDwgZG0uZGF0ZVJhbmdlLmJlZ2luSnNEYXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnN0IHsgeWVhcjogYmVnaW5ZZWFyLCBtb250aDogYmVnaW5Nb250aCwgIGRheTogYmVnaW5EYXkgIH0gPSB7Li4uZG0uZGF0ZVJhbmdlLmJlZ2luRGF0ZX07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnN0IHsgeWVhcjogZW5kWWVhciwgbW9udGg6IGVuZE1vbnRoLCAgZGF5OiBlbmREYXkgIH0gPSB7Li4uZG0uZGF0ZVJhbmdlLmVuZERhdGV9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBlcnJvciBtZXNzYWdlOiAgVGhlIGVuZCB0aW1lIG11c3Qgbm90IGJlIGVhcmxpZXIgdGhhbiB0aGUgc3RhcnQgdGltZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBlcnJvciBtZXNzYWdlOiAg57WQ5p2f5pmC6ZaT5LiN5b6X5pep5LqO6ZaL5aeL5pmC6ZaTXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1zZyA9IHRoaXMubG9jYWxEYXRlT3B0cy5tZXNzYWdlWycxMDEnXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubm90aWZ5U2VyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeVNlci53YXJuaW5nKG1zZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydChtc2cpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25EYXRlQ2hhbmdlZChkbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNsb3NlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VTZWxlY3RvcihDYWxUb2dnbGUuQ2xvc2VCeURhdGVTZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAoY3ZjOiBJTXlDYWxlbmRhclZpZXdDaGFuZ2VkKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5lbWl0Q2FsZW5kYXJDaGFuZ2VkKGN2Yyk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgKHJkczogSU15UmFuZ2VEYXRlU2VsZWN0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5lbWl0UmFuZ2VEYXRlU2VsZWN0aW9uKHJkcyk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VTZWxlY3RvcihDYWxUb2dnbGUuQ2xvc2VCeUVzYyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAvLyB0aGlzLmNkci5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5kYXRlUGljZWtyU2VydmljZS5hcHBlbmRTZWxlY3Rvcih0aGlzLmNSZWYubG9jYXRpb24ubmF0aXZlRWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLm92ZXJMYXlTZXJ2aWNlLnJlZ2lzdGVyTW91c2VFdmVudCh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsIChlOiBNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNSZWYgJiYgdGhpcy5jUmVmLmxvY2F0aW9uLm5hdGl2ZUVsZW1lbnQuY29udGFpbnMoZS50YXJnZXQpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5jbG9zZVNlbGVjdG9yKCk7XHJcbiAgICAgICAgfSwgeyBvbmx5VG9wV2luZG93OiB0cnVlfSk7XHJcblxyXG4gICAgICAgIHRoaXMuY1JlZi5jaGFuZ2VEZXRlY3RvclJlZi5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgLy8gdGhpcy5wcmV2ZW50Q2xvc2UgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIGNsb3NlU2VsZWN0b3IocmVhc29uPzogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuY1JlZiAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLmNhbGVuZGFyUmVmLnJlbW92ZSh0aGlzLmNhbGVuZGFyUmVmLmluZGV4T2YodGhpcy5jUmVmLmhvc3RWaWV3KSk7XHJcbiAgICAgICAgICAgIHRoaXMuY1JlZiA9IG51bGw7XHJcbiAgICAgICAgICAgIC8vIHRoaXMuY2RyLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRhdGUtb3ZlcmxheS1jb250YWluZXInKTtcclxuICAgICAgICAgICAgaWYgKGNvbnRhaW5lci5jaGlsZEVsZW1lbnRDb3VudCkge1xyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUoY29udGFpbmVyLCAncG9pbnRlci1ldmVudHMnLCAnJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudG90YWxGb2N1cyA9IGZhbHNlO1xyXG4gICAgICAgIGlmICh0aGlzLmRhdGVPcHRzLmRhdGVSYW5nZSkge1xyXG4gICAgICAgICAgICB0aGlzLmJlZ2luRm9jdXMgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5lbmRGb2N1cyA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuY2xvc2VDYWxlbmRhckhhbmRsZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZUNhbGVuZGFySGFuZGxlcigpO1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlQ2FsZW5kYXJIYW5kbGVyID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmRhdGVQaWNla3JTZXJ2aWNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0ZVBpY2VrclNlcnZpY2UucmVtb3ZlTW91c2VFdmVudCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5vdmVyTGF5U2VydmljZS5kZXN0b3J5KHRoaXMuZWwubmF0aXZlRWxlbWVudCk7XHJcbiAgICB9XHJcbiAgICB0b2dnbGVDYWxlbmRhcihjbG9zZTogYm9vbGVhbiwgZW1pdCA9IHRydWUpIHtcclxuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCkge1xyXG4gICAgICAgICAgICB0aGlzLnRvdGFsRm9jdXMgPSBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZGF0ZU9wdHMuZGF0ZVJhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJlZ2luRm9jdXMgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZW5kRm9jdXMgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmNSZWYgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmNsb3NlQ2FsZW5kYXJIYW5kbGVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlQ2FsZW5kYXJIYW5kbGVyID0gdGhpcy5yZW5kZXJlci5saXN0ZW4oZG9jdW1lbnQsIENMSUNLLCAoKSA9PiB0aGlzLmNsb3NlU2VsZWN0b3IoQ2FsVG9nZ2xlLkNsb3NlQnlPdXRDbGljaykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMudG90YWxGb2N1cyA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMub3BlbkNhbGVuZGFyKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kYXRlLW92ZXJsYXktY29udGFpbmVyJyk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUoY29udGFpbmVyLCAncG9pbnRlci1ldmVudHMnLCAnYXV0bycpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxldCBmbGFnID0gdHJ1ZTtcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRhdGUtb3ZlcmxheS1jb250YWluZXInKTtcclxuICAgICAgICAgICAgaWYgKGNvbnRhaW5lciAmJiB0aGlzLmNSZWYubG9jYXRpb24pIHtcclxuICAgICAgICAgICAgICAgIGlmIChjb250YWluZXIuaGFzQ2hpbGROb2RlcygpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmNoaWxkTm9kZXMuZm9yRWFjaChlbCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbCA9PT0gdGhpcy5jUmVmLmxvY2F0aW9uLm5hdGl2ZUVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsYWcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChmbGFnKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKGNvbnRhaW5lciwgJ3BvaW50ZXItZXZlbnRzJywgJ2F1dG8nKTtcclxuICAgICAgICAgICAgICAgIHRoaXMudG90YWxGb2N1cyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9wZW5DYWxlbmRhcigpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50b3RhbEZvY3VzID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGF0ZU9wdHMuZGF0ZVJhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5iZWdpbkZvY3VzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmRGb2N1cyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihDTElDSywgdGhpcy5vbkNsaWNrSGlkZGVuKTtcclxuICAgICAgICAgICAgICAgIGNsb3NlICYmIHRoaXMuY2xvc2VTZWxlY3RvcihDYWxUb2dnbGUuQ2xvc2VCeUNhbEJ0bik7XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKGNvbnRhaW5lciwgJ3BvaW50ZXItZXZlbnRzJywgJycpXHJcbiAgICAgICAgICAgICAgICBpZiAoZW1pdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UuZW1pdCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uRGF0ZUNoYW5nZWQoZXZlbnQ6IElNeURhdGVNb2RlbCkge1xyXG4gICAgICAgIHRoaXMuX1NFTEVDVF9EQVRFXyA9IGV2ZW50O1xyXG4gICAgICAgIGxldCB2YWxDaGFuZ2VQYXJhbXM6IGFueSA9ICcnO1xyXG4gICAgICAgIGlmIChldmVudC5zaW5nbGVEYXRlKSB7XHJcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBldmVudC5zaW5nbGVEYXRlLmZvcm1hdHRlZDtcclxuICAgICAgICAgICAgdGhpcy5mb3JtYXRlZFZhbHVlID0gZXZlbnQuc2luZ2xlRGF0ZS5mb3JtYXR0ZWQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHJldHVybkZvcm1hdHRlZCA9IHRoaXMuZ2V0UmVhbFJldHVybkZvcm1hdHRlZChldmVudC5zaW5nbGVEYXRlLmpzRGF0ZSk7XHJcbiAgICAgICAgICAgIHZhbENoYW5nZVBhcmFtcyA9IHsgLi4uZXZlbnQuc2luZ2xlRGF0ZSwgZm9ybWF0dGVkOiBldmVudC5zaW5nbGVEYXRlLmZvcm1hdHRlZCwgcmV0dXJuRm9ybWF0dGVkIH07XHJcblxyXG4gICAgICAgICAgICBjb25zdCB7IHllYXIsIG1vbnRoLCBkYXksIGhvdXIsIG1pbnV0ZSwgc2Vjb25kIH0gPSBldmVudC5zaW5nbGVEYXRlLmRhdGU7XHJcblxyXG4gICAgICAgICAgICBpZiAobW9udGggJiYgKHRoaXMuZGF0ZUZvcm1hdC5pbmRleE9mKCd5eXl5JykgPT09IC0xIHx8IHRoaXMuZGF0ZUZvcm1hdC5pbmRleE9mKCdkZCcpID09PSAtMSkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5kID0gbmV3IERhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgeWVhciB8fCBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCksXHJcbiAgICAgICAgICAgICAgICAgICAgbW9udGggLSAxLFxyXG4gICAgICAgICAgICAgICAgICAgIGRheSB8fCAxLFxyXG4gICAgICAgICAgICAgICAgICAgIGhvdXIgfHwgMCxcclxuICAgICAgICAgICAgICAgICAgICBtaW51dGUgfHwgMCxcclxuICAgICAgICAgICAgICAgICAgICBzZWNvbmQgfHwgMFxyXG4gICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBldmVudC5zaW5nbGVEYXRlLmpzRGF0ZSA9IG5kO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLm9uTmdNb2RlbENoYW5nZShyZXR1cm5Gb3JtYXR0ZWQsIGV2ZW50LnNpbmdsZURhdGUuanNEYXRlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmRhdGVSYW5nZSkge1xyXG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gZXZlbnQuZGF0ZVJhbmdlLmZvcm1hdHRlZDtcclxuICAgICAgICAgICAgdGhpcy5mb3JtYXRlZFZhbHVlID0gZXZlbnQuZGF0ZVJhbmdlLmZvcm1hdHRlZDtcclxuICAgICAgICAgICAgY29uc3QgcmV0dXJuRm9ybWF0dGVkID0gZXZlbnQuZGF0ZVJhbmdlLnJldHVybkZvcm1hdHRlZDtcclxuICAgICAgICAgICAgLy8gbGV0IHJldHVybkZvcm1hdHRlZCA9IHRoaXMuZGF0ZUZyb20oZXZlbnQuZGF0ZVJhbmdlLnJldHVybkZvcm1hdHRlZCk7XHJcbiAgICAgICAgICAgIHZhbENoYW5nZVBhcmFtcyA9IHsgLi4uZXZlbnQuZGF0ZVJhbmdlLCBmb3JtYXR0ZWQ6IGV2ZW50LmRhdGVSYW5nZS5mb3JtYXR0ZWQsIHJldHVybkZvcm1hdHRlZCB9O1xyXG4gICAgICAgICAgICB0aGlzLm9uTmdNb2RlbENoYW5nZShyZXR1cm5Gb3JtYXR0ZWQsIGV2ZW50LmRhdGVSYW5nZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMub25Nb2RlbFRvdWNoZWQoKTtcclxuICAgICAgICB0aGlzLl92YWx1ZUNoYW5nZUVtaXR0ZWQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMudmFsdWVDaGFuZ2UuZW1pdCh2YWxDaGFuZ2VQYXJhbXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGJ1aWxkT3B0aW9ucygpIHtcclxuICAgICAgICBsZXQgZGF0ZU9wdHM6IGFueTtcclxuICAgICAgICBpZiAoIXRoaXMubG9jYWxEYXRlT3B0cykge1xyXG4gICAgICAgICAgICB0aGlzLmxvY2FsRGF0ZU9wdHMgPSB0aGlzLmxvY2FsZUNvbmZpZy5nZXRMb2NhbGVPcHRpb25zKHRoaXMubG9jYWxlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNob3dUeXBlID09PSBTaG93VHlwZS5ub0RhdGVBbmRNb250aCkge1xyXG4gICAgICAgICAgICB0aGlzLmxvY2FsRGF0ZU9wdHMuZGF0ZUZvcm1hdCA9ICd5eXl5JztcclxuICAgICAgICAgICAgdGhpcy5sb2NhbERhdGVPcHRzLnJldHVybkZvcm1hdCA9ICd5eXl5JztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IF9zaG93VGltZSA9IChOdW1iZXIodGhpcy5zaG93VHlwZSkgPT09IFNob3dUeXBlLmFsbCkgPyB0aGlzLnNob3dUaW1lIDogZmFsc2U7XHJcblxyXG4gICAgICAgIGRhdGVPcHRzID0ge1xyXG4gICAgICAgICAgICBkYXRlUmFuZ2U6IHRoaXMuZGF0ZVJhbmdlLFxyXG4gICAgICAgICAgICBzaG93VGltZTogX3Nob3dUaW1lLFxyXG4gICAgICAgICAgICBzaG93VHlwZTogTnVtYmVyKHRoaXMuc2hvd1R5cGUpLFxyXG4gICAgICAgICAgICBkYXRlRm9ybWF0OiB0aGlzLmRhdGVGb3JtYXQgPyB0aGlzLmRhdGVGb3JtYXQgOiB0aGlzLmxvY2FsRGF0ZU9wdHMuZGF0ZUZvcm1hdCxcclxuICAgICAgICAgICAgcmV0dXJuRm9ybWF0OiB0aGlzLnJldHVybkZvcm1hdCA/IHRoaXMucmV0dXJuRm9ybWF0IDogdGhpcy5sb2NhbERhdGVPcHRzLnJldHVybkZvcm1hdCxcclxuICAgICAgICAgICAgbWluWWVhcjogdGhpcy5fbWluRGF0ZS55ZWFyLFxyXG4gICAgICAgICAgICBtYXhZZWFyOiB0aGlzLl9tYXhEYXRlLnllYXIsXHJcbiAgICAgICAgICAgIGhpZ2hsaWdodERhdGVzOiB0aGlzLmhpZ2hsaWdodERhdGVzLFxyXG4gICAgICAgICAgICBkaXNhYmxlRGF0ZXM6IHRoaXMuZGlzYWJsZURhdGVzLFxyXG4gICAgICAgICAgICBzaG93V2Vla051bWJlcnM6IHRoaXMuc2hvd1dlZWtOdW1iZXJzLFxyXG4gICAgICAgICAgICBkaXNhYmxlRGF0ZVJhbmdlczogW1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGJlZ2luOiB0aGlzLmRpc2FibGVEYXRlUmFuZ2VzQmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgZW5kOiB0aGlzLmRpc2FibGVEYXRlUmFuZ2VzRW5kXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgIGRpc2FibGVVbnRpbDogdGhpcy5fbWluRGF0ZSxcclxuICAgICAgICAgICAgZGlzYWJsZVNpbmNlOiB0aGlzLl9tYXhEYXRlLFxyXG4gICAgICAgICAgICBkaXNhYmxlV2Vla2RheXM6IHRoaXMuZGlzYWJsZVdlZWtkYXlzLFxyXG4gICAgICAgICAgICBtYXJrRGF0ZXM6IFtcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRlczogdGhpcy5tYXJrRGF0ZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6IHRoaXMubWFya0RhdGVzQ29sb3JcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgbWFya1dlZWtlbmRzOiB7XHJcbiAgICAgICAgICAgICAgICBtYXJrZWQ6IHRoaXMuaXNNYXJrV2Vla2VuZHMsXHJcbiAgICAgICAgICAgICAgICBjb2xvcjogdGhpcy5tYXJrV2Vla2VuZHNDb2xvclxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBkYXRlUmFuZ2VEYXRlc0RlbGltaXRlcjogdGhpcy5kYXRlUmFuZ2VEYXRlc0RlbGltaXRlcixcclxuICAgICAgICAgICAgc2hvcnRjdXRzOiB0aGlzLnNob3J0Y3V0cyxcclxuICAgICAgICAgICAgdGltZUZvcm1hdDogdGhpcy5fdGltZUZvcm1hdCxcclxuICAgICAgICAgICAgbW9udGhSYW5nZVZhbHVlOiB0aGlzLm1vbnRoUmFuZ2VWYWx1ZSxcclxuICAgICAgICAgICAgdmlld1R5cGU6IHRoaXMudmlld1R5cGVcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBzd2l0Y2ggKE51bWJlcih0aGlzLnNob3dUeXBlKSkge1xyXG4gICAgICAgICAgICBjYXNlIFNob3dUeXBlLm5vRGF0ZTpcclxuICAgICAgICAgICAgICAgIGRhdGVPcHRzLmRlZmF1bHRWaWV3ID0gRGVmYXVsdFZpZXcuTW9udGg7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBTaG93VHlwZS5ub0RhdGVBbmRNb250aDpcclxuICAgICAgICAgICAgICAgIGRhdGVPcHRzLmRlZmF1bHRWaWV3ID0gRGVmYXVsdFZpZXcuWWVhcjtcclxuICAgICAgICAgICAgICAgIC8vIGRhdGVPcHRzLmRhdGVGb3JtYXQgPSAneXl5eSc7XHJcbiAgICAgICAgICAgICAgICAvLyBkYXRlT3B0cy5yZXR1cm5Gb3JtYXQgPSAneXl5eSc7XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLmRhdGVGb3JtYXQgPSAneXl5eSc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBTaG93VHlwZS5zZWxlY3RXZWVrOlxyXG4gICAgICAgICAgICAgICAgZGF0ZU9wdHMuc2hvd1dlZWtOdW1iZXJzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGRhdGVPcHRzLmRhdGVSYW5nZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBkYXRlT3B0cy5maXJzdERheU9mV2VlayA9ICdtbyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgLy8gZGVmYXVsdDpcclxuICAgICAgICAgICAgLy8gdGhpcy5yZXR1cm5UeXBlID0gJ1N0cmluZyc7XHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4geyAuLi50aGlzLmxvY2FsRGF0ZU9wdHMsIC4uLmRhdGVPcHRzIH07XHJcbiAgICB9XHJcblxyXG4gICAgZGF0ZVRvKGQ6IGFueSkge1xyXG4gICAgICAgIGNvbnN0IGRhdGVGb3JtYXQgPSB0aGlzLmRhdGVPcHRzLmRhdGVGb3JtYXQgPyB0aGlzLmRhdGVPcHRzLmRhdGVGb3JtYXQgOiB0aGlzLmRlZmF1bHRDb25maWcuZGF0ZUZvcm1hdDtcclxuICAgICAgICBjb25zdCBtb250aExhYmVscyA9IHRoaXMuZGF0ZU9wdHMubW9udGhMYWJlbHMgPyB0aGlzLmRhdGVPcHRzLm1vbnRoTGFiZWxzIDogdGhpcy5kZWZhdWx0Q29uZmlnLm1vbnRoTGFiZWxzO1xyXG4gICAgICAgIGNvbnN0IHNob3dUaW1lID0gdGhpcy5kYXRlT3B0cy5zaG93VGltZSA/IHRoaXMuZGF0ZU9wdHMuc2hvd1RpbWUgOiB0aGlzLmRlZmF1bHRDb25maWcuc2hvd1RpbWU7XHJcbiAgICAgICAgY29uc3QgeWVhciA9IGQuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICBjb25zdCBtb250aCA9IGQuZ2V0TW9udGgoKSArIDE7XHJcbiAgICAgICAgY29uc3QgZGF5ID0gZC5nZXREYXRlKCk7XHJcbiAgICAgICAgY29uc3QgaG91ciA9IGQuZ2V0SG91cnMoKTtcclxuICAgICAgICBjb25zdCBtaW51dGUgPSBkLmdldE1pbnV0ZXMoKTtcclxuICAgICAgICBjb25zdCBzZWNvbmQgPSBkLmdldFNlY29uZHMoKTtcclxuICAgICAgICBsZXQgZGF0ZTogSU15RGF0ZTtcclxuICAgICAgICBpZiAoIXNob3dUaW1lKSB7XHJcbiAgICAgICAgICAgIGRhdGUgPSB7IHllYXIsIG1vbnRoLCBkYXkgfTtcclxuICAgICAgICAgICAgdGhpcy5vcmlnaW5UaW1lID0geyBob3VyLCBtaW51dGUsIHNlY29uZCB9O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGRhdGUgPSB7IHllYXIsIG1vbnRoLCBkYXksIGhvdXIsIG1pbnV0ZSwgc2Vjb25kIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLnV0aWxTZXJ2aWNlLmZvcm1hdERhdGUoZGF0ZSwgZGF0ZUZvcm1hdCwgbW9udGhMYWJlbHMpO1xyXG4gICAgfVxyXG4gICAgLy8g6L+U5Zue55yf5a6e5pel5pyfIERhdGUg57G75Z6LXHJcbiAgICBkYXRlRnJvbShzdHI6IGFueSwgaWdub3JSYW5nZSA9IGZhbHNlKSB7XHJcbiAgICAgICAgaWYgKCFzdHIpIHtcclxuICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgX3RoaXMgPSB0aGlzO1xyXG5cclxuICAgICAgICBjb25zdCBkYXRlUmFuZ2UgPSB0aGlzLmRhdGVPcHRzLmRhdGVSYW5nZSA/IHRoaXMuZGF0ZU9wdHMuZGF0ZVJhbmdlIDogdGhpcy5kZWZhdWx0Q29uZmlnLmRhdGVSYW5nZTtcclxuICAgICAgICBjb25zdCBkYXRlRm9ybWF0ID0gdGhpcy5kYXRlT3B0cy5kYXRlRm9ybWF0ID8gdGhpcy5kYXRlT3B0cy5kYXRlRm9ybWF0IDogdGhpcy5kZWZhdWx0Q29uZmlnLmRhdGVGb3JtYXQ7XHJcbiAgICAgICAgY29uc3QgcmV0dXJuRm9ybWF0ID0gdGhpcy5kYXRlT3B0cy5yZXR1cm5Gb3JtYXQgPyB0aGlzLmRhdGVPcHRzLnJldHVybkZvcm1hdCA6IHRoaXMuZGVmYXVsdENvbmZpZy5yZXR1cm5Gb3JtYXQ7XHJcbiAgICAgICAgY29uc3Qgc2hvd1RpbWUgPSB0aGlzLmRhdGVPcHRzLnNob3dUaW1lID8gdGhpcy5kYXRlT3B0cy5zaG93VGltZSA6IHRoaXMuZGVmYXVsdENvbmZpZy5zaG93VGltZTtcclxuICAgICAgICBjb25zdCBkZWxpbWV0ZXJzOiBBcnJheTxzdHJpbmc+ID0gcmV0dXJuRm9ybWF0Lm1hdGNoKC9bXihEZE1tWXkpXXsxLH0vZyk7XHJcbiAgICAgICAgbGV0IGRhdGVWYWx1ZTogQXJyYXk8SU15RGF0ZUZvcm1hdD47XHJcbiAgICAgICAgY29uc3QgZ2V0VmFsdWUgPSB0aGlzLnV0aWxTZXJ2aWNlLmdldERhdGVWYWx1ZTtcclxuICAgICAgICBpZiAoKGRhdGVSYW5nZSB8fCB0aGlzLmRhdGVPcHRzLnNob3dUeXBlID09PSBTaG93VHlwZS5zZWxlY3RXZWVrKSAmJiAhaWdub3JSYW5nZSkge1xyXG4gICAgICAgICAgICBjb25zdCB0bXBCZWdpbiA9IHN0ci5zcGxpdCh0aGlzLmRhdGVSYW5nZURhdGVzRGVsaW1pdGVyKVswXTtcclxuICAgICAgICAgICAgY29uc3QgdG1wRW5kID0gc3RyLnNwbGl0KHRoaXMuZGF0ZVJhbmdlRGF0ZXNEZWxpbWl0ZXIpWzFdO1xyXG4gICAgICAgICAgICBsZXQgdG1wQmVnaW5EYXRlID0gdGhpcy51dGlsU2VydmljZS5pc0RhdGVWYWxpZCh0bXBCZWdpbiwgdGhpcy5kYXRlT3B0cywgdHJ1ZSk7XHJcbiAgICAgICAgICAgIGxldCB0bXBFbmREYXRlID0gdGhpcy51dGlsU2VydmljZS5pc0RhdGVWYWxpZCh0bXBFbmQsIHRoaXMuZGF0ZU9wdHMsIHRydWUpO1xyXG4gICAgICAgICAgICB0bXBCZWdpbkRhdGUgPSB0aGlzLnV0aWxTZXJ2aWNlLmlzSW5pdGlhbGl6ZWREYXRlKHRtcEJlZ2luRGF0ZSkgPyB0bXBCZWdpbkRhdGUgOiB0aGlzLmRhdGVPcHRzLmRpc2FibGVVbnRpbDtcclxuICAgICAgICAgICAgdG1wRW5kRGF0ZSA9IHRoaXMudXRpbFNlcnZpY2UuaXNJbml0aWFsaXplZERhdGUodG1wRW5kRGF0ZSkgPyB0bXBFbmREYXRlIDogdGhpcy5kYXRlT3B0cy5kaXNhYmxlU2luY2U7XHJcbiAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICB0aGlzLnV0aWxTZXJ2aWNlLmZvcm1hdERhdGUodG1wQmVnaW5EYXRlLCByZXR1cm5Gb3JtYXQsIHRoaXMuZGVmYXVsdENvbmZpZy5tb250aExhYmVscykgK1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRlUmFuZ2VEYXRlc0RlbGltaXRlciArXHJcbiAgICAgICAgICAgICAgICB0aGlzLnV0aWxTZXJ2aWNlLmZvcm1hdERhdGUodG1wRW5kRGF0ZSwgcmV0dXJuRm9ybWF0LCB0aGlzLmRlZmF1bHRDb25maWcubW9udGhMYWJlbHMpXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMucmV0dXJuVHlwZSA9PT0gJ0RhdGUnKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3RyICYmIHN0ciBpbnN0YW5jZW9mIERhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnZlcnQoc3RyLCBnZXRWYWx1ZSwgdGhpcy5vcmlnaW5UaW1lKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRtcERhdGUgPSB0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVZhbGlkKHN0ciwgdGhpcy5kYXRlT3B0cywgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy51dGlsU2VydmljZS5mb3JtYXREYXRlKHRtcERhdGUsIHJldHVybkZvcm1hdCwgdGhpcy5kZWZhdWx0Q29uZmlnLm1vbnRoTGFiZWxzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gY29udmVydCh2LCBfZ2V0VmFsdWU6IGFueSwgb3JpZ2luVGltZSA9IHsgaG91cjogMCwgbWludXRlOiAwLCBzZWNvbmQ6IDAgfSkge1xyXG4gICAgICAgICAgICBsZXQgZm10ID0gcmV0dXJuRm9ybWF0O1xyXG4gICAgICAgICAgICBpZiAoX3RoaXMucmV0dXJuVHlwZSA9PT0gJ0RhdGUnKSB7XHJcbiAgICAgICAgICAgICAgICBmbXQgPSAneXl5eS1NTS1kZCcgKyAoc2hvd1RpbWUgPyAnIEhIOm1tOnNzJyA6ICcnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoc2hvd1RpbWUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGUgPSB2LnNwbGl0KCcgJylbMF07XHJcbiAgICAgICAgICAgICAgICBsZXQgdGltZSA9IHYuc3BsaXQoJyAnKVsxXTtcclxuXHJcbiAgICAgICAgICAgICAgICBkYXRlVmFsdWUgPSBfZ2V0VmFsdWUoZGF0ZSwgZm10LCBkZWxpbWV0ZXJzKTtcclxuICAgICAgICAgICAgICAgIGlmICh0aW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGltZSA9IHRpbWUucmVwbGFjZSgvW+aXtizliIZdL2csICc6JykucmVwbGFjZSgvW+enkl0vLCAnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgW2gsIG0sIHNdID0gdGltZS5zcGxpdCgnOicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGhvdXIgPSBoO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1pbnV0ZSA9IG07XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2Vjb25kID0gcyA/IHMgOiAnJztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZVZhbHVlWzNdID0geyB2YWx1ZTogaG91ciwgZm9ybWF0OiAnaGgnIH07XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZVZhbHVlWzRdID0geyB2YWx1ZTogbWludXRlLCBmb3JtYXQ6ICdtbScgfTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2Vjb25kKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVWYWx1ZVs1XSA9IHsgdmFsdWU6IHNlY29uZCwgZm9ybWF0OiAnc3MnIH07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGF0ZSA9IHYuc3BsaXQoJyAnKVswXTtcclxuICAgICAgICAgICAgICAgIGRhdGVWYWx1ZSA9IF9nZXRWYWx1ZShkYXRlLCBmbXQsIGRlbGltZXRlcnMpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgbGV0IHllYXIgPSBOdW1iZXIoZGF0ZVZhbHVlWzBdID8gZGF0ZVZhbHVlWzBdLnZhbHVlIDogMTk3MCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHllYXJWYWx1ZSA9IGRhdGVWYWx1ZVswXTtcclxuICAgICAgICAgICAgaWYgKHllYXJWYWx1ZS5mb3JtYXQpIHtcclxuICAgICAgICAgICAgICAgIGlmICgheWVhclZhbHVlLnZhbHVlIHx8IHllYXJWYWx1ZS52YWx1ZS5sZW5ndGggIT09IHllYXJWYWx1ZS5mb3JtYXQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgeWVhciA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG1vbnRoID0gTnVtYmVyKGRhdGVWYWx1ZVsxXSA/IGRhdGVWYWx1ZVsxXS52YWx1ZSA6IDEpIC0gMTtcclxuICAgICAgICAgICAgY29uc3QgZGF5ID0gTnVtYmVyKGRhdGVWYWx1ZVsyXSA/IGRhdGVWYWx1ZVsyXS52YWx1ZSA6IDEpO1xyXG4gICAgICAgICAgICBjb25zdCBfaG91ciA9IGRhdGVWYWx1ZVszXSA/IE51bWJlcihkYXRlVmFsdWVbM10udmFsdWUpIDogb3JpZ2luVGltZS5ob3VyO1xyXG4gICAgICAgICAgICBjb25zdCBfbWludXRlID0gZGF0ZVZhbHVlWzRdID8gTnVtYmVyKGRhdGVWYWx1ZVs0XS52YWx1ZSkgOiBvcmlnaW5UaW1lLm1pbnV0ZTtcclxuICAgICAgICAgICAgY29uc3QgX3NlY29uZCA9IGRhdGVWYWx1ZVs1XSA/IE51bWJlcihkYXRlVmFsdWVbNV0udmFsdWUpIDogb3JpZ2luVGltZS5zZWNvbmQ7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXllYXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgZGF5LCBfaG91ciwgX21pbnV0ZSwgX3NlY29uZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRyYW5zZm9ybSh2YWx1ZTogYW55LCBfZm10ID0gdGhpcy5kYXRlT3B0cy5kYXRlRm9ybWF0KSB7XHJcbiAgICAgICAgdmFsdWUgPSB2YWx1ZSA/IHZhbHVlIDogJyc7XHJcbiAgICAgICAgY29uc3QgeyByZXR1cm5Gb3JtYXQsIGRhdGVGb3JtYXQsIHNob3dUaW1lIH0gPSB0aGlzLmRhdGVPcHRzO1xyXG4gICAgICAgIGxldCBfdG1wRGF0ZSA9IG51bGw7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgX3RtcERhdGUgPSBwYXJzZSh2YWx1ZSwgcmV0dXJuRm9ybWF0LCBuZXcgRGF0ZSgpKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghaXNWYWxpZChfdG1wRGF0ZSkpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9TRUxFQ1RfREFURV8gJiYgdGhpcy5fU0VMRUNUX0RBVEVfLnNpbmdsZURhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBfdG1wRGF0ZSA9IHRoaXMuX1NFTEVDVF9EQVRFXy5zaW5nbGVEYXRlLmpzRGF0ZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3JlYWxWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfdG1wRGF0ZSA9ICBwYXJzZSh0aGlzLl9yZWFsVmFsdWUsIHJldHVybkZvcm1hdCwgbmV3IERhdGUoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgRGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgX3RtcERhdGUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgZm9ybWF0dGVkVmFsID0gdmFsdWU7XHJcbiAgICAgICAgaWYgKGlzVmFsaWQoX3RtcERhdGUpKSB7XHJcbiAgICAgICAgICAgIGZvcm1hdHRlZFZhbCA9IHRoaXMuZHRTZXJ2aWNlLmZvcm1hdFRvKF90bXBEYXRlLCBfZm10KTtcclxuICAgICAgICAgICAgcmV0dXJuIGZvcm1hdHRlZFZhbDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyDlhbzlrrnlubTmnIjml6Us5bm05pyILOW5tOagvOW8j1xyXG4gICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoL1vlubQs5pyIXS9nLCAnLScpLnJlcGxhY2UoL1vml6VdLywgJycpO1xyXG4gICAgICAgICAgICBpZiAodmFsdWVbdmFsdWUubGVuZ3RoIC0gMV0gPT09ICctJykge1xyXG4gICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5zdWJzdHIoMCwgdmFsdWUubGVuZ3RoIC0gMSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChpc1ZhbGlkKG5ldyBEYXRlKHZhbHVlKSkpIHtcclxuICAgICAgICAgICAgICAgIGZvcm1hdHRlZFZhbCA9IHRoaXMuZHRTZXJ2aWNlLmZvcm1hdFRvKHZhbHVlLCBfZm10KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRhdGVGcm9tKHZhbHVlLCB0cnVlKSA9PT0gJycpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRtcERhdGUgPSB0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVZhbGlkKFxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZGF0ZU9wdHMsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZUZvcm1hdDogcmV0dXJuRm9ybWF0XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZWRWYWwgPSB0aGlzLnV0aWxTZXJ2aWNlLmZvcm1hdERhdGUodG1wRGF0ZSwgX2ZtdCwgdGhpcy5kZWZhdWx0Q29uZmlnLm1vbnRoTGFiZWxzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZm9ybWF0dGVkVmFsO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFZhbHVlKHZhbHVlOiBzdHJpbmcpIHtcclxuICAgICAgICBpZiAodGhpcy52YWx1ZSAhPT0gdmFsdWUpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZGF0ZU9wdHMuZGF0ZVJhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBfdG1wRGF0ZUFyciA9IHZhbHVlLnNwbGl0KHRoaXMuZGF0ZVJhbmdlRGF0ZXNEZWxpbWl0ZXIpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYmVnaW5TdHIgPSBfdG1wRGF0ZUFyclswXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVuZFN0ciA9IF90bXBEYXRlQXJyWzFdO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fYmVnaW5WYWx1ZSA9IHRoaXMudHJhbnNmb3JtKGJlZ2luU3RyKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2VuZFZhbHVlID0gdGhpcy50cmFuc2Zvcm0oZW5kU3RyKTtcclxuICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLl9iZWdpblZhbHVlICYmIHRoaXMuX2VuZFZhbHVlID8gdGhpcy5fYmVnaW5WYWx1ZSArIHRoaXMuZGF0ZVJhbmdlRGF0ZXNEZWxpbWl0ZXIgKyB0aGlzLl9lbmRWYWx1ZSA6ICcnO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMudHJhbnNmb3JtKHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVZhbHVlKHZhbHVlOiBzdHJpbmcpIHtcclxuICAgICAgICBpZiAodGhpcy5kYXRlT3B0cy5kYXRlUmFuZ2UpIHtcclxuICAgICAgICAgICAgY29uc3QgX3RtcERhdGVBcnIgPSB2YWx1ZS5zcGxpdCh0aGlzLmRhdGVSYW5nZURhdGVzRGVsaW1pdGVyKTtcclxuICAgICAgICAgICAgY29uc3QgYmVnaW5TdHIgPSBfdG1wRGF0ZUFyclswXTtcclxuICAgICAgICAgICAgY29uc3QgZW5kU3RyID0gX3RtcERhdGVBcnJbMV07XHJcbiAgICAgICAgICAgIHRoaXMuX2JlZ2luVmFsdWUgPSB0aGlzLnRyYW5zZm9ybShiZWdpblN0cik7XHJcbiAgICAgICAgICAgIHRoaXMuX2VuZFZhbHVlID0gdGhpcy50cmFuc2Zvcm0oZW5kU3RyKTtcclxuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMuX2JlZ2luVmFsdWUgJiYgdGhpcy5fZW5kVmFsdWUgPyB0aGlzLl9iZWdpblZhbHVlICsgdGhpcy5kYXRlUmFuZ2VEYXRlc0RlbGltaXRlciArIHRoaXMuX2VuZFZhbHVlIDogJyc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMudHJhbnNmb3JtKHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VmFsdWVCeVR5cGUodmFsKSB7XHJcbiAgICAgICAgaWYgKHZhbCBpbnN0YW5jZW9mIERhdGUpIHtcclxuICAgICAgICAgICAgdGhpcy5yZXR1cm5UeXBlID0gJ0RhdGUnO1xyXG4gICAgICAgICAgICAvLyByZXR1cm4gdGhpcy5kYXRlVG8odmFsKTtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbDtcclxuICAgICAgICB9IGVsc2UgaWYgKHZhbCAmJiB2YWwgaW5zdGFuY2VvZiBPYmplY3QpIHtcclxuICAgICAgICAgICAgY29uc3QgeyBiZWdpbiwgZW5kIH0gPSB2YWw7XHJcbiAgICAgICAgICAgIGNvbnN0IGJlZ2luU3RyID0gYmVnaW4gaW5zdGFuY2VvZiBEYXRlID8gdGhpcy5kYXRlVG8oYmVnaW4pIDogJyc7XHJcbiAgICAgICAgICAgIGNvbnN0IGVuZFN0ciA9IGJlZ2luIGluc3RhbmNlb2YgRGF0ZSA/IHRoaXMuZGF0ZVRvKGVuZCkgOiAnJztcclxuXHJcbiAgICAgICAgICAgIHRoaXMucmV0dXJuVHlwZSA9ICdPYmplY3QnO1xyXG4gICAgICAgICAgICByZXR1cm4gYmVnaW5TdHIgJiYgZW5kU3RyID8gYmVnaW5TdHIgKyB0aGlzLmRhdGVSYW5nZURhdGVzRGVsaW1pdGVyICsgZW5kU3RyIDogJyc7XHJcbiAgICAgICAgfSBlbHNlIGlmICh2YWwgJiYgdHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgaWYgKHZhbC5pbmRleE9mKCdUJykgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgdmFsID0gdmFsLnJlcGxhY2UoJ1QnLCAnICcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMucmV0dXJuVHlwZSA9ICdTdHJpbmcnO1xyXG4gICAgICAgICAgICByZXR1cm4gdmFsO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICB3cml0ZVZhbHVlKHZhbDogYW55KTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5fcmVhbFZhbHVlID0gdmFsO1xyXG4gICAgICAgIGlmICh0aGlzLmRhdGVSYW5nZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9yZWFsUmFuZ2VWYWx1ZSA9IHZhbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZXRWYWx1ZSh0aGlzLmdldFZhbHVlQnlUeXBlKHZhbCkpO1xyXG4gICAgfVxyXG4gICAgcmVnaXN0ZXJPbkNoYW5nZShmbjogYW55KTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5vbk1vZGVsQ2hhbmdlID0gZm47XHJcbiAgICB9XHJcbiAgICByZWdpc3Rlck9uVG91Y2hlZChmbjogYW55KTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5vbk1vZGVsVG91Y2hlZCA9IGZuO1xyXG4gICAgfVxyXG4gICAgc2V0RGlzYWJsZWRTdGF0ZT8oaXNEaXNhYmxlZDogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZGlzYWJsZWQgPSBpc0Rpc2FibGVkO1xyXG4gICAgfVxyXG4gICAgb25QcmV2Rm9jdXModmFsdWU6IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmJlZ2luRm9jdXMgPSB0cnVlO1xyXG4gICAgICAgIGlmICh0aGlzLmVuZEZvY3VzID09IHRydWUpIHtcclxuICAgICAgICAgICAgdGhpcy5lbmRGb2N1cyA9ICF0aGlzLmVuZEZvY3VzO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLlByZXZGb2N1cy5lbWl0KCk7XHJcbiAgICB9XHJcbiAgICBvbk5leHRGb2N1cyh2YWx1ZTogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZW5kRm9jdXMgPSB0cnVlO1xyXG4gICAgICAgIGlmICh0aGlzLmJlZ2luRm9jdXMgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLmJlZ2luRm9jdXMgPSAhdGhpcy5iZWdpbkZvY3VzO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLk5leHRGb2N1cy5lbWl0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfY29udmVydDJkYXRlU3RyaW5nKHZhbDogc3RyaW5nLCByZWFsVmFsdWUgPSBmYWxzZSkge1xyXG4gICAgICAgIGlmICh2YWwpIHtcclxuICAgICAgICAgICAgbGV0IHQgPSB2YWwucmVwbGFjZSgvW+W5tCzmnIhdL2csICctJykucmVwbGFjZSgvW+aXpSzlj7ddL2csICcgJykucmVwbGFjZSgvW+aXtizngrks5YiGLOWIhumSn10vZywgJzonKS5yZXBsYWNlKCfnp5InLCAnJyk7XHJcblxyXG5cclxuICAgICAgICAgICAgaWYgKHJlYWxWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb2JqRGF0ZSA9IHRoaXMudXRpbFNlcnZpY2UuaXNEYXRlVmFsaWQodmFsLCB0aGlzLmRhdGVPcHRzLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIGlmIChvYmpEYXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHsgeWVhciwgbW9udGgsIGRheSwgaG91ciwgbWludXRlLCBzZWNvbmR9ID0gb2JqRGF0ZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXllYXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeWVhciA9IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFtb250aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtb250aCA9IG5ldyBEYXRlKCkuZ2V0TW9udGgoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghZGF5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRheSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWhvdXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaG91ciA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIW1pbnV0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW51dGUgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzZWNvbmQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2Vjb25kID0gMDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBgJHt5ZWFyfS0ke21vbnRofS0ke2RheX0gJHtob3VyfToke21pbnV0ZX06JHtzZWNvbmR9YDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRbdC5sZW5ndGggLSAxXSA9PT0gJy0nKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB0ID0gdC5zdWJzdHIoMCwgdC5sZW5ndGggLSAxKTtcclxuICAgICAgICAgICAgICAgIHQgKz0gJzAxJztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRbdC5sZW5ndGggLSAxXSA9PT0gJzonKSB7XHJcbiAgICAgICAgICAgICAgICB0ID0gdC5zdWJzdHIoMCwgdC5sZW5ndGggLSAxKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHQucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgJycpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHZhbDtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJpdmF0ZSBfaXNWYWxpZCh2YWx1ZTogYW55KSB7XHJcbiAgICAgICAgdmFsdWUgPSB0aGlzLl9jb252ZXJ0MmRhdGVTdHJpbmcodmFsdWUpO1xyXG4gICAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5kYXRlRm9ybWF0LmluZGV4T2YoJ3l5eXknKSA9PT0gLTEgfHwgdGhpcy5kYXRlRm9ybWF0LmluZGV4T2YoJ2RkJykgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBfdG1wRGF0ZSA9IHBhcnNlKHRoaXMudmFsdWUsIHRoaXMuZGF0ZUZvcm1hdCwgbmV3IERhdGUoKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fcmVhbFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmV0dXJuVHlwZSA9PT0gJ0RhdGUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpc1ZhbGlkKHRoaXMuX3JlYWxWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlzVmFsaWQobmV3IERhdGUodGhpcy5fY29udmVydDJkYXRlU3RyaW5nKHRoaXMuX3JlYWxWYWx1ZSwgdHJ1ZSkpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgZCA9IHRoaXMudXRpbFNlcnZpY2UuaXNEYXRlVmFsaWQodmFsdWUsIHRoaXMuZGF0ZU9wdHMpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZC55ZWFyIHx8IGQubW9udGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2RhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB5ZWFyID0gY2RhdGUuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RyID0gKHRoaXMuZGF0ZU9wdHMucmV0dXJuRm9ybWF0IHx8ICd5eXl5LU1NLWRkJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKCd5eXl5JywgJycgKyAoZC55ZWFyIHx8IHllYXIpKS5yZXBsYWNlKCdNTScsICcnICsgZC5tb250aCkucmVwbGFjZSgnZGQnLCAnMScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXNWYWxpZChuZXcgRGF0ZShzdHIpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGlzVmFsaWQodmFsdWUpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVnID0gL15cXGR7MSx9JC87XHJcbiAgICAgICAgICAgICAgICBpZiAocmVnLnRlc3QodmFsdWUpICYmIHRoaXMuZGF0ZUZvcm1hdC5pbmRleE9mKCd5eXl5TU1kZCcpID4gLTEpIHsgLy8g6aqM6K+B5Lyg5YWl55qE5qC85byP5Li6IHl5eXlNTWRkSEhtbXNzXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgX3IgPSAgdGhpcy5faXNWYWxpZDIodmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfci5pc1ZhbGlkZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmVhbFZhbHVlID0gdGhpcy5nZXRSZWFsUmV0dXJuRm9ybWF0dGVkKF9yLmRhdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy50cmFuc2Zvcm0oX3IuZGF0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfci5pc1ZhbGlkZWQ7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IF90bXBEYXRlID0gcGFyc2UodmFsdWUsIHRoaXMuZGF0ZUZvcm1hdCwgbmV3IERhdGUoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZCA9IHRoaXMudXRpbFNlcnZpY2UuaXNEYXRlVmFsaWQodGhpcy52YWx1ZSwgdGhpcy5kYXRlT3B0cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlzVmFsaWQoX3RtcERhdGUpIHx8IHRoaXMudXRpbFNlcnZpY2UuaXNJbml0aWFsaXplZERhdGUoZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2lzVmFsaWQyKHZhbHVlOiBzdHJpbmcpOiBhbnkge1xyXG4gICAgICAgIGxldCB5ZWFyID0gMDtcclxuICAgICAgICBsZXQgbW9udGggPSAwO1xyXG4gICAgICAgIGxldCBkYXkgPSAwO1xyXG4gICAgICAgIGxldCBob3VyID0gMDtcclxuICAgICAgICBsZXQgbWludXRlID0gMDtcclxuICAgICAgICBsZXQgc2Vjb25kcyA9IDA7XHJcblxyXG4gICAgICAgIGNvbnN0IGRmID0gdGhpcy5kYXRlRm9ybWF0O1xyXG5cclxuICAgICAgICBpZiAoZGYuaW5jbHVkZXMoJ3l5eXknKSkge1xyXG4gICAgICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHllYXIgPSArdmFsdWUuc2xpY2UoMCwgNCk7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnNsaWNlKDQpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChkZi5pbmNsdWRlcygnTU0nKSkge1xyXG4gICAgICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIG1vbnRoID0gK3ZhbHVlLnNsaWNlKDAsIDIpIC0gMTtcclxuICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUuc2xpY2UoMik7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG1vbnRoIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1vbnRoID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGYuaW5jbHVkZXMoJ2RkJykpIHtcclxuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBkYXkgPSArdmFsdWUuc2xpY2UoMCwgMik7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnNsaWNlKDIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChkZi5pbmNsdWRlcygnSEgnKSkge1xyXG4gICAgICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGhvdXIgPSArdmFsdWUuc2xpY2UoMCwgMik7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnNsaWNlKDIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChkZi5pbmNsdWRlcygnbW0nKSkge1xyXG4gICAgICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIG1pbnV0ZSA9ICt2YWx1ZS5zbGljZSgwLCAyKTtcclxuICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUuc2xpY2UoMik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGRmLmluY2x1ZGVzKCdzcycpKSB7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgc2Vjb25kcyA9ICt2YWx1ZS5zbGljZSgwLCAyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgZCA9IG5ldyBEYXRlKHllYXIsIG1vbnRoLCBkYXksIGhvdXIsIG1pbnV0ZSwgc2Vjb25kcyk7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaXNWYWxpZGVkOiBpc1ZhbGlkKGQpLFxyXG4gICAgICAgICAgICBkYXRlOiBkXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbn1cclxuIl19