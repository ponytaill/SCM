{"version":3,"sources":["ng://@farris/ui-button/lib/button.service.ts","ng://@farris/ui-button/lib/button.component.ts","ng://@farris/ui-button/lib/button-group.component.ts","ng://@farris/ui-button/lib/button.module.ts"],"names":["FarrisButtonService","Injectable","args","providedIn","FarrisButtonComponent","prototype","clickEvent","e","stopPropagation","this","disabled","click","emit","Component","selector","template","Input","Output","size","type","EventEmitter","hideBtnMenu","ddm","document","querySelector","className","replace","FarrisButtonGroupComponent","Object","defineProperty","_placement","value","realPlacement","getRealPlacement","data","slice","count","btnmenuId","idSer","IdService","btnmenuid","guid","overLayService","OverLayHiddenService","ngOnInit","ngOnChanges","simpleChanges","ngAfterViewInit","ngAfterViewChecked","show","setPosition","event","_this","dpMenu","nativeElement","indexOf","appendBody","registerMouseEvent","dpBtn","hideButtonMenu","target","classList","Array","from","nodeName","closest","includes","ngZone","runOutsideAngular","bindMenuMouseenter","bindiMenuMouseleave","mouseNotEnterLeave","changeRef","detectChanges","markForCheck","changeState","toggle","btn","change","id","destory","body","appendChild","removeMenuPanel","remove","changePlacement","btnSize","autoRectify","referPosition","getReferencePosition","newPlacement","_menuHeight","bottom","top","_menuWidth","left","right","rectifyPlacement","rRight","documentElement","clientWidth","rBottom","clientHeight","rTop","rLeft","rectifyReferenceH","getBoundingClientRect","rectifyReferenceV","_getClsName","position","pment","result","changePosition","rplacement","styleTop","styleLeft","height","style","unbindMenuMouseenter","mouseenterEvent","changeFlagToTrue","bind","addEventListener","unbindiMenuMouseleave","mouseleaveEvent","mouseLeave","removeEventListener","dpFlag","changeFlagToFalse","close","setTimeObj","clearTimeout","setTimeout","blur","menuRect","width","ngOnDestroy","changeDetection","ChangeDetectionStrategy","OnPush","ChangeDetectorRef","NgZone","ViewChild","clickMenuOut","autoSize","setPosition$","Subject","previous","FarrisButtonModule","NgModule","declarations","imports","CommonModule","exports"],"mappings":"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","sourcesContent":["import { Injectable } from '@angular/core';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class FarrisButtonService {\r\n\r\n  constructor() {\r\n  }\r\n}\r\n","import { Component, Input, EventEmitter, Output } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'farris-button',\r\n  template: `\r\n    <button [class]=\"(size === 'large'?'btn-lg ':'btn-sm ')+\r\n    'btn '+ (type?'btn-'+type+' ':'')\"\r\n    [class.disabled]=\"disabled\" (click)=\"clickEvent($event)\">\r\n      <ng-content></ng-content>\r\n    </button>\r\n  `,\r\n  styles: []\r\n})\r\nexport class FarrisButtonComponent {\r\n  @Input() text: string;\r\n  @Input() size = 'small';\r\n  @Input() type = 'primary';\r\n  @Input() disabled: boolean;\r\n\r\n  @Output() click = new EventEmitter<any>();\r\n\r\n  constructor() { }\r\n\r\n  clickEvent(e: any) {\r\n    e.stopPropagation();\r\n    if(this.disabled){\r\n      return;\r\n    }\r\n    this.click.emit(e);\r\n  }\r\n}\r\n","import {\r\n    OnDestroy,\r\n    NgZone,\r\n    ChangeDetectionStrategy,\r\n    Renderer2,\r\n    OnChanges,\r\n    SimpleChanges,\r\n} from \"@angular/core\";\r\nimport {\r\n    AfterViewInit,\r\n    AfterViewChecked,\r\n    ChangeDetectorRef,\r\n} from \"@angular/core\";\r\nimport {\r\n    Component,\r\n    OnInit,\r\n    Input,\r\n    Output,\r\n    EventEmitter,\r\n    ViewChild,\r\n    ElementRef,\r\n} from \"@angular/core\";\r\nimport { Button } from \"./button\";\r\nimport { Subject } from \"rxjs\";\r\nimport { IdService, OverLayHiddenService } from \"@farris/ui-common\";\r\n\r\nfunction hideBtnMenu() {\r\n    const ddm = document.querySelector(\".f-btn-group-dropdown-menu.show\");\r\n    if (ddm) {\r\n        ddm.className = ddm.className.replace(\"show\", \"\");\r\n    }\r\n}\r\n\r\nfunction hideButtonMenu(e) {\r\n    if (!e.target) {\r\n        return;\r\n    }\r\n\r\n    var classList = Array.from(e.target.classList || []);\r\n\r\n    if (e.target.nodeName !== \"LI\" && !e.target.closest('li.dropdown-item') && !classList.includes(\"dropdown-item\")) {\r\n        hideBtnMenu();\r\n    }\r\n}\r\n\r\n\r\n@Component({\r\n    selector: \"farris-button-group\",\r\n    templateUrl: `./button-group.component.html`,\r\n    changeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class FarrisButtonGroupComponent\r\n    implements OnInit, OnChanges, AfterViewInit, AfterViewChecked, OnDestroy\r\n{\r\n    @ViewChild(\"dpBtn\") dpBtn: ElementRef;\r\n    @ViewChild(\"dpMenu\") dpMenu: ElementRef;\r\n    // æ¨ªåçº æ­£çåç§\r\n    @Input() rectifyReferenceH: HTMLElement;\r\n    // çºµåçº æ­£çåç§\r\n    @Input() rectifyReferenceV: HTMLElement;\r\n    // æ¯å¦èªå¨çº æ­£ä½ç½®\r\n    @Input() autoRectify = true;\r\n    // è®¡ç®æ¹åççæ­£placement\r\n    private realPlacement = \"bottom-right\";\r\n    // éæ°è®¡ç®åçplacement\r\n    rectifyPlacement = \"bottom-right\";\r\n\r\n    /* æé®ä¿¡æ¯ */\r\n    @Input() data: Button[];\r\n\r\n    /* æ¾ç¤ºçæé®æ°é  é»è®¤ä¸º2 */\r\n    @Input() count = 2;\r\n\r\n    /* æé®å¤§å° */\r\n    @Input() size = \"small\";\r\n\r\n    /* æé®æ ·å¼ */\r\n    @Input() type = \"primary\";\r\n\r\n    /* æé®å±ç¤ºä½ç½® */\r\n    private _placement = \"bottom\";\r\n    @Input()\r\n    set placement(value) {\r\n        if (!value) {\r\n            return;\r\n        }\r\n        if (value !== this._placement) {\r\n            this.realPlacement = this.getRealPlacement(value);\r\n            this._placement = value;\r\n        }\r\n    }\r\n    get placement() {\r\n        return this._placement;\r\n    }\r\n\r\n    /* menu size */\r\n    /**\r\n     *2021.06.12 åºå¼ï¼å ä¸ºä½¿ç¨èä¸ç¥éå¨ä¸­è±ææåµä¸ï¼ä¸æé¢æ¿çå®½åº¦åé«åº¦\r\n     */\r\n    @Input() width = 120;\r\n    @Input() height = 250;\r\n    private _menuWidth = 0;\r\n    private _menuHeight = 0;\r\n\r\n    /* ä¸ææé® è§¦åäºä»¶ */\r\n    @Output() changeState = new EventEmitter<any>();\r\n\r\n    /* ä¸æèåé¡¹ç¹å»äºä»¶ */\r\n    @Output() change = new EventEmitter<any>();\r\n    @Output() click = new EventEmitter<any>();\r\n\r\n    /* è§¦åä¸ææé®é¢æ¿åºåä¹å¤çäºä»¶ */\r\n    @Output() clickMenuOut = new EventEmitter<any>();\r\n\r\n    /**\r\n     * 2021.06.12 åºå¼ï¼å ä¸ºå½autoSizeä¸ºtrueçæ¶åï¼æé®æ¾ç¤ºä¸åºæ¥ã\r\n     */\r\n    @Input() autoSize = false;\r\n\r\n    /* ä¸æé¢æ¿æ¾ç¤º */\r\n    show = false;\r\n    /* æ¾ç¤ºåºæ¥çæé®ç» */\r\n    get flatButtons() {\r\n        return this.data && this.data.slice(0, this.count);\r\n    }\r\n\r\n    get dpButtons() {\r\n        // this.height = this.dpButtons.length * 35;\r\n\r\n        return this.data && this.data.slice(this.count);\r\n    }\r\n\r\n    setPosition$ = new Subject();\r\n    event: any;\r\n\r\n    /* ä¸æé¢æ¿æ¾ç¤ºæ å¿ */\r\n    dpFlag: boolean;\r\n\r\n    /* äºä»¶ */\r\n    mouseenterEvent: any;\r\n    mouseleaveEvent: any;\r\n    documentClickEvent: any;\r\n\r\n    /* ä¸ä¸ªç¹æé®å°ºå¯¸ */\r\n    btnSize: any;\r\n\r\n    /*  */\r\n    setTimeObj: any;\r\n\r\n\tbtnmenuid = 'btn-menu-';\r\n\tprivate previous = 0;\r\n    overLayService: OverLayHiddenService;\r\n    constructor(private changeRef: ChangeDetectorRef, private ngZone: NgZone) {}\r\n\r\n\tprivate btnmenuId() {\r\n\t\tconst idSer = new IdService();\r\n\t\tthis.btnmenuid += idSer.guid();\r\n        this.overLayService = new OverLayHiddenService();\r\n\t}\r\n\r\n    ngOnInit() {\r\n        this.btnmenuId();\r\n    }\r\n\r\n    ngOnChanges(simpleChanges: SimpleChanges) {\r\n        if (simpleChanges[\"data\"]) {\r\n            // this.flatButtons = this.data.slice(0, this.count);\r\n            // this.dpButtons = this.data.slice(this.count);\r\n            // this.height = this.dpButtons.length * 35;\r\n        }\r\n    }\r\n\r\n    ngAfterViewInit() {}\r\n\r\n    ngAfterViewChecked() {\r\n        if (this.show) {\r\n            // const { height, width } = this.dpMenu.nativeElement.getBoundingClientRect();\r\n            this.setPosition(this.event);\r\n            // this.setPosition$.subscribe(res => this.setPosition(res, width, height));\r\n        }\r\n    }\r\n\r\n    clickEvent(e: any) {\r\n        e.stopPropagation();\r\n        this.show = !(this.show && this.dpMenu.nativeElement.className.indexOf('show') > -1);\r\n        // bodyæ·»å é¢æ¿\r\n        if (this.show) {\r\n\t\t\t/** ç§»é¤ç°æçä¸æå±ç¤ºèå */\r\n\t\t\thideBtnMenu();\r\n            this.appendBody();\r\n            // this.setPosition(e);\r\n            // this.setPosition$.next(e);\r\n\r\n            // æ³¨åé¼ æ æ»è½®ï¼ç¹å»äºä»¶ï¼ç¨äºéèPanel\r\n            this.overLayService.registerMouseEvent(this.dpBtn.nativeElement, (e: MouseEvent) => {\r\n                hideButtonMenu(e);\r\n            });\r\n\r\n\r\n\r\n            this.event = e;\r\n            // ç»å®ç¸åºçäºä»¶\r\n            this.ngZone.runOutsideAngular(() => {\r\n                this.bindMenuMouseenter();\r\n                this.bindiMenuMouseleave();\r\n                // this.bindDocClick();\r\n                this.mouseNotEnterLeave();\r\n            });\r\n        }\r\n        // é¢æ¿æ¾ç¤º èå¼æ£æµ\r\n        this.changeRef.detectChanges();\r\n        this.changeRef.markForCheck();\r\n        // this.changeState.emit({ originEvent: e, show: this.show });\r\n        this.changeState.emit(this.show);\r\n    }\r\n\r\n    /* æé®è§¦åäºä»¶ */\r\n    toggle(e: any, btn) {\r\n        e.stopPropagation();\r\n        if (btn.disabled) return;\r\n        this.show = false;\r\n        // this.unbindDocClick();\r\n        // å³é­ä¸ææé®é¢æ¿  èå¼æ£æµ\r\n        this.changeRef.detectChanges();\r\n        this.changeRef.markForCheck();\r\n        this.change.emit(btn.id);\r\n        this.click.emit(btn);\r\n\r\n        this.overLayService.destory(this.dpBtn.nativeElement);\r\n    }\r\n\r\n    // ä¸ææé®æ¾ç¤ºå°bodyä¸­  å¯æ¹åé¢æ¿æ¹å\r\n    appendBody() {\r\n        if (this.dpMenu.nativeElement && !document.querySelector('body>#' + this.btnmenuid)) {\r\n            // æ·»å å°body  ä¾¿äºå¨é¨æ¾ç¤º\r\n            document.body.appendChild(this.dpMenu.nativeElement);\r\n        }\r\n\t\tthis.dpMenu.nativeElement.className = this.dpMenu.nativeElement.className + ' show';\r\n    }\r\n\r\n    removeMenuPanel() {\r\n        if (this.dpMenu.nativeElement && document.querySelector('body>#' + this.btnmenuid)) {\r\n            this.dpMenu.nativeElement.remove();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * å½ä¸æè¶åºè¾¹çæ¶  è½¬æ¢æ¹å,\r\n     * å¹¶æªå¤çï¼è¾¹çä¸å¤ä¸æå±ç¤ºçæåµ\r\n     * @param btnSize\r\n     */\r\n    changePlacement(btnSize: any) {\r\n        if (!this.autoRectify) {\r\n            return;\r\n        }\r\n        let referPosition = this.getReferencePosition();\r\n        let newPlacement = this.realPlacement;\r\n        if (newPlacement.indexOf(\"bottom\") > -1) {\r\n            if (this._menuHeight > referPosition.bottom - btnSize.bottom) {\r\n                newPlacement = newPlacement.replace(\"bottom\", \"top\");\r\n            }\r\n        } else if (newPlacement.indexOf(\"top\") > -1) {\r\n            if (this._menuHeight > btnSize.top - referPosition.top) {\r\n                newPlacement = newPlacement.replace(\"top\", \"bottom\");\r\n            }\r\n        }\r\n        if (newPlacement.indexOf(\"left\") > -1) {\r\n            if (this._menuWidth > btnSize.left - referPosition.left) {\r\n                newPlacement = newPlacement.replace(\"left\", \"right\");\r\n            }\r\n        } else if (newPlacement.indexOf(\"right\") > -1) {\r\n            if (this._menuWidth > referPosition.right - btnSize.right) {\r\n                newPlacement = newPlacement.replace(\"right\", \"left\");\r\n            }\r\n        }\r\n        this.rectifyPlacement = newPlacement;\r\n    }\r\n    /**\r\n     * ç¡®è®¤åç§çè¾¹ç\r\n     */\r\n    private getReferencePosition() {\r\n        let rRight = document.documentElement.clientWidth;\r\n        let rBottom = document.documentElement.clientHeight;\r\n        let rTop = 0;\r\n        let rLeft = 0;\r\n        // æ¨ªååç§\r\n        if (this.rectifyReferenceH) {\r\n            rRight = this.rectifyReferenceH.getBoundingClientRect().right;\r\n            rLeft = this.rectifyReferenceH.getBoundingClientRect().left;\r\n        }\r\n        // çºµååç§\r\n        if (this.rectifyReferenceV) {\r\n            rBottom = this.rectifyReferenceV.getBoundingClientRect().bottom;\r\n            rTop = this.rectifyReferenceV.getBoundingClientRect().top;\r\n        }\r\n        return { top: rTop, left: rLeft, right: rRight, bottom: rBottom };\r\n    }\r\n    /**\r\n     * ååå¯¹åºçclass\r\n     * @param position\r\n     */\r\n    _getClsName(position) {\r\n        let className = \"\";\r\n        switch (position) {\r\n            case \"top-right\":\r\n            case \"top\":\r\n                // æä¸ï¼æä¸-æå³\r\n                className = \"dropup\";\r\n                break;\r\n            case \"top-left\":\r\n                // æä¸-æå·¦\r\n                className = \"dropup-left\";\r\n                break;\r\n            case \"left-bottom\":\r\n            case \"left\":\r\n                // æ¨ªåââæå·¦ââæä¸\r\n                className = \"dropleft\";\r\n                break;\r\n            case \"left-top\":\r\n                // æ¨ªåââæå·¦ââæä¸\r\n                className = \"dropleft-up\";\r\n                break;\r\n            case \"right-bottom\":\r\n            case \"right\":\r\n                // æ¨ªåââæå³ââæä¸\r\n                className = \"dropright\";\r\n                break;\r\n            case \"right-top\":\r\n                // æ¨ªåââæå³ââæä¸\r\n                className = \"dropright-up\";\r\n                break;\r\n            case \"bottom-left\":\r\n                // æä¸ââæå·¦\r\n                className = \"dropdown-left\";\r\n                break;\r\n            case \"bottom-right\":\r\n                className = \"dropdown\";\r\n                break;\r\n            default:\r\n                // æä¸ï¼æä¸ââæå³\r\n                className = \"dropdown\";\r\n        }\r\n        return className;\r\n    }\r\n\r\n    private getRealPlacement(pment) {\r\n        var result = \"bottom-right\";\r\n        switch (pment) {\r\n            case \"top\":\r\n                result = \"top-right\";\r\n                break;\r\n            case \"left\":\r\n                result = \"left-bottom\";\r\n                break;\r\n            case \"right\":\r\n                result = \"right-bottom\";\r\n                break;\r\n            case \"bottom\":\r\n                result = \"bottom-right\";\r\n                break;\r\n            default:\r\n                result = pment;\r\n        }\r\n        return result;\r\n    }\r\n\r\n    /*\r\n     * è®¡ç®çä½ç½®åºåå¿ç»å\r\n     */\r\n    private changePosition(btnSize: any) {\r\n        let rplacement = \"\";\r\n        if (this.autoRectify) {\r\n            rplacement = this.rectifyPlacement;\r\n        } else {\r\n            rplacement = this.realPlacement;\r\n        }\r\n        let styleTop = 0;\r\n        let styleLeft = 0;\r\n        if (rplacement.indexOf(\"top\") > -1) {\r\n            styleTop = btnSize.top - this._menuHeight;\r\n        } else if (rplacement.indexOf(\"bottom\") > -1) {\r\n            styleTop = btnSize.bottom;\r\n        }\r\n        if (rplacement.indexOf(\"right\") > -1) {\r\n            styleLeft = btnSize.right;\r\n        } else if (rplacement.indexOf(\"left\") > -1) {\r\n            styleLeft = btnSize.left - this._menuWidth;\r\n        }\r\n        // å¼å¤´\r\n        if (rplacement.indexOf(\"-top\") > -1) {\r\n            styleTop = styleTop - btnSize.height;\r\n        } else if (rplacement.indexOf(\"-bottom\") > -1) {\r\n            styleTop = styleTop + btnSize.height;\r\n        }\r\n        this.dpMenu.nativeElement.style.top = styleTop + \"px\";\r\n        this.dpMenu.nativeElement.style.left = styleLeft + \"px\";\r\n    }\r\n\r\n    /* ç»å®ä¸æé¢æ¿é¼ æ è¿å¥äºä»¶ */\r\n    bindMenuMouseenter() {\r\n        this.unbindMenuMouseenter();\r\n        this.mouseenterEvent = this.changeFlagToTrue.bind(this);\r\n        this.dpMenu.nativeElement.addEventListener(\r\n            \"mouseenter\",\r\n            this.mouseenterEvent\r\n        );\r\n    }\r\n\r\n    /* ç»å®ä¸æé¢æ¿é¼ æ ç¦»å¼äºä»¶  */\r\n    bindiMenuMouseleave() {\r\n        this.unbindiMenuMouseleave();\r\n        this.mouseleaveEvent = this.mouseLeave.bind(this);\r\n        this.dpMenu.nativeElement.addEventListener(\r\n            \"mouseleave\",\r\n            this.mouseleaveEvent\r\n        );\r\n    }\r\n\r\n    /* ç»å®ç¹å»é¢æ¿åºåä¹å¤è§¦åçäºä»¶ */\r\n    // bindDocClick() {\r\n    //   this.documentClickEvent = this.clickDoc.bind(this);\r\n    //   document.addEventListener('click', this.documentClickEvent);\r\n    // }\r\n\r\n    /* è§£ç»äºä»¶ */\r\n    unbindMenuMouseenter() {\r\n        if (this.mouseenterEvent) {\r\n            this.dpMenu.nativeElement.removeEventListener(\r\n                \"mouseenter\",\r\n                this.mouseenterEvent\r\n            );\r\n        }\r\n    }\r\n    unbindiMenuMouseleave() {\r\n        if (this.mouseleaveEvent) {\r\n            this.dpMenu.nativeElement.removeEventListener(\r\n                \"mouseleave\",\r\n                this.mouseleaveEvent\r\n            );\r\n        }\r\n    }\r\n    // unbindDocClick() {\r\n    //   if (this.documentClickEvent) {\r\n    //     document.removeEventListener('click', this.documentClickEvent);\r\n    //   }\r\n    // }\r\n\r\n    /* flag true */\r\n    changeFlagToTrue() {\r\n        this.dpFlag = true;\r\n    }\r\n\r\n    /* flag false */\r\n    changeFlagToFalse() {\r\n        this.dpFlag = false;\r\n    }\r\n\r\n    /* é¼ æ ç¦»å¼æ¶  å³é­menu */\r\n    mouseLeave() {\r\n        if (this.dpFlag) {\r\n            this.changeFlagToFalse();\r\n            // this.unbindDocClick();\r\n            this.unbindiMenuMouseleave();\r\n            this.unbindMenuMouseenter();\r\n            this.close();\r\n            if (this.setTimeObj) {\r\n                this.ngZone.runOutsideAngular(() => {\r\n                    clearTimeout(this.setTimeObj);\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    /* é¼ æ æ²¡æè¿å¥å°é¢æ¿  ä¸æ®µæ¶é´åé¢æ¿èªå¨æ¶å¤± */\r\n    mouseNotEnterLeave() {\r\n        this.ngZone.runOutsideAngular(() => {\r\n\t\t\tif (this.setTimeObj) {\r\n\t\t\t\tclearTimeout(this.setTimeObj);\r\n\t\t\t}\r\n            this.setTimeObj = setTimeout(() => {\r\n                if (!this.dpFlag) {\r\n                    this.changeFlagToFalse();\r\n                    // this.unbindDocClick();\r\n                    this.unbindiMenuMouseleave();\r\n                    this.unbindMenuMouseenter();\r\n                    this.close();\r\n                    if (this.setTimeObj) {\r\n                        clearTimeout(this.setTimeObj);\r\n                    }\r\n                }\r\n            }, 2000);\r\n        });\r\n    }\r\n\r\n    /* å³é­ä¸æé¢æ¿ */\r\n    close() {\r\n        this.show = false;\r\n        // å³é­ä¸ææé®é¢æ¿  èå¼æ£æµ\r\n        if (!this.changeRef[\"destroyed\"]) {\r\n            this.changeRef.detectChanges();\r\n            this.changeRef.markForCheck();\r\n        }\r\n        this.dpBtn.nativeElement.blur();\r\n\r\n        this.overLayService.destory(this.dpBtn.nativeElement);\r\n    }\r\n\r\n    /* å¨ææå®menuå¨bodyä¸­çä½ç½® */\r\n    private setPosition(e) {\r\n        // ä¸ææé®\r\n        const btnSize = this.dpBtn.nativeElement.getBoundingClientRect();\r\n        // ä¸æé¢æ¿\r\n        let menuRect = this.dpMenu.nativeElement.getBoundingClientRect();\r\n        this._menuHeight = menuRect.height;\r\n        this._menuWidth = menuRect.width;\r\n        // å¦æè¦èªå¨çº æ­£æ¹å\r\n        if (this.autoRectify) {\r\n            this.changePlacement(btnSize);\r\n        }\r\n        this.changePosition(btnSize);\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        // this.removeMenuPanel();\r\n        if (this.dpBtn && this.dpBtn.nativeElement) {\r\n            this.overLayService.destory(this.dpBtn.nativeElement);\r\n        }\r\n        this.overLayService = null;\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FarrisButtonComponent } from './button.component';\r\nimport { FarrisButtonGroupComponent } from './button-group.component';\r\n@NgModule({\r\n  declarations: [FarrisButtonComponent, FarrisButtonGroupComponent],\r\n  imports: [CommonModule],\r\n  exports: [FarrisButtonComponent, FarrisButtonGroupComponent]\r\n})\r\nexport class FarrisButtonModule { }\r\n"]}