/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, ElementRef, ViewEncapsulation, ViewChild, Renderer2, ChangeDetectorRef, HostBinding } from '@angular/core';
import { UtilService } from '../../services/public-api';
import { DefaultView, KeyCode, MonthId, ResetDateType } from '../../enums/public-api';
import { DOT, UNDER_LINE, D, M, Y, DATE_ROW_COUNT, DATE_COL_COUNT, MONTH_ROW_COUNT, MONTH_COL_COUNT, YEAR_ROW_COUNT, YEAR_COL_COUNT, SU, MO, TU, WE, TH, FR, SA, EMPTY_STR } from '../../constants/constants';
import { TimePickerPanelComponent } from '@farris/ui-time-picker';
import { flatten } from 'lodash-es';
import { ViewType } from '../../interfaces/my-options.interface';
export class CalendarComponent {
    /**
     * @param {?} renderer
     * @param {?} cdr
     * @param {?} utilService
     */
    constructor(renderer, cdr, utilService) {
        this.renderer = renderer;
        this.cdr = cdr;
        this.utilService = utilService;
        this.position = 'static';
        this.visibleMonth = { monthTxt: EMPTY_STR, monthNbr: 0, year: 0, yearTxt: EMPTY_STR };
        this.visibleMonth_range = { monthTxt: EMPTY_STR, monthNbr: 0, year: 0, yearTxt: EMPTY_STR };
        this.selectedMonth = { monthNbr: 0, year: 0 };
        this.selectedMonth_range = { monthNbr: 0, year: 0 };
        this.selectedDate = { year: 0, month: 0, day: 0 };
        this.selectedDateRange = { begin: { year: 0, month: 0, day: 0 }, end: { year: 0, month: 0, day: 0 } };
        this.selectedWeek = { weekNbr: 0, year: 0 };
        this.weekDays = [];
        this.dates = [];
        this.dates_range = [];
        this.months = [];
        this.months_range = [];
        this.years = [];
        this.years_range = [];
        this.dayIdx = 0;
        this.weekDayOpts = [SU, MO, TU, WE, TH, FR, SA];
        this.selectMonth = false;
        this.selectMonth_range = false;
        this.selectYear = false;
        this.selectYear_range = false;
        this.selectTime = false;
        this.selectorPos = null;
        this.scrollDiff = 0;
        this.prevViewDisabled = false;
        this.nextViewDisabled = false;
        this.prevDobViewDisabled = false;
        this.nextDobViewDisabled = false;
        this.prevViewDisabled_range = false;
        this.nextViewDisabled_range = false;
        this.prevDobViewDisabled_range = false;
        this.nextDobViewDisabled_range = false;
        // 禁用日期时间控件中的时间段的小时
        this.disabledHours = (/**
         * @return {?}
         */
        () => {
            /** @type {?} */
            const min = this.opts.disableUntil;
            /** @type {?} */
            const max = this.opts.disableSince;
            /** @type {?} */
            const currentDate = this.opts.dateRange ? this.selectedDateRange.begin : this.selectedDate;
            /** @type {?} */
            const res = this.utilService.disabledHours(min, max, currentDate);
            return res;
        });
        // 禁用日期时间控件中的时间段的分钟
        this.disabledMinutes = (/**
         * @param {?} hour
         * @return {?}
         */
        (hour) => {
            /** @type {?} */
            const min = this.opts.disableUntil;
            /** @type {?} */
            const max = this.opts.disableSince;
            /** @type {?} */
            const currentDate = this.opts.dateRange ? this.selectedDateRange.begin : this.selectedDate;
            /** @type {?} */
            const res = this.utilService.disabledMinutes(min, max, hour, currentDate);
            return res;
        });
        // 禁用日期时间控件中的时间段的秒
        this.disabledSeconds = (/**
         * @param {?} hour
         * @param {?} minute
         * @return {?}
         */
        (hour, minute) => {
            /** @type {?} */
            const min = this.opts.disableUntil;
            /** @type {?} */
            const max = this.opts.disableSince;
            /** @type {?} */
            const currentDate = this.opts.dateRange ? this.selectedDateRange.begin : this.selectedDate;
            /** @type {?} */
            const res = this.utilService.disabledSeconds(min, max, hour, minute, currentDate);
            return res;
        });
    }
    /**
     * @param {?} date
     * @return {?}
     */
    getTimeStr(date) {
        /** @type {?} */
        const hour = this.utilService.preZero(date.getHours());
        /** @type {?} */
        const minute = this.utilService.preZero(date.getMinutes());
        /** @type {?} */
        const second = this.utilService.preZero(date.getSeconds());
        return `${hour}:${minute}:${second}`;
    }
    /**
     * @param {?} opts
     * @param {?} defaultMonth
     * @param {?} selectorPos
     * @param {?} inputValue
     * @param {?} dc
     * @param {?} cvc
     * @param {?} rds
     * @param {?} cbe
     * @return {?}
     */
    initialize(opts, defaultMonth, selectorPos, inputValue, dc, cvc, rds, cbe) {
        this.opts = opts;
        this.selectorPos = selectorPos;
        this.weekDays.length = 0;
        const { defaultView, dateRange, firstDayOfWeek, dayLabels, stylesData, yearTxt } = this.opts;
        this.visibleMonth.yearTxt = yearTxt;
        this.visibleMonth_range.yearTxt = yearTxt;
        // if (stylesData.styles.length) {
        //     const styleElTemp: any = this.renderer.createElement(STYLE);
        //     this.renderer.appendChild(styleElTemp, this.renderer.createText(stylesData.styles));
        //     this.renderer.appendChild(this.styleEl.nativeElement, styleElTemp);
        // }
        this.dayIdx = this.weekDayOpts.indexOf(firstDayOfWeek);
        if (this.dayIdx !== -1) {
            /** @type {?} */
            let idx = this.dayIdx;
            // tslint:disable-next-line:prefer-for-of
            for (let i = 0; i < this.weekDayOpts.length; i++) {
                this.weekDays.push(dayLabels[this.weekDayOpts[idx]]);
                idx = this.weekDayOpts[idx] === SA ? 0 : idx + 1;
            }
        }
        /** @type {?} */
        let today = this.getToday();
        /** @type {?} */
        const isInDisableRange = this.utilService.isDisabledDate(today, this.opts);
        today = !isInDisableRange ? today : this.utilService.getNearDate(today, this.opts.disableUntil, this.opts.disableSince);
        switch (defaultView) {
            case DefaultView.Month:
                this.selectedMonth = { monthNbr: 0, year: today.year };
                this.selectedMonth_range = { monthNbr: 0, year: today.year + 1 };
                break;
            case DefaultView.Year:
                this.selectedMonth = { monthNbr: 0, year: today.year };
                this.selectedMonth_range = { monthNbr: 0, year: today.year + 10 };
                break;
            default:
                this.selectedMonth = { monthNbr: today.month, year: today.year };
                if (today.month >= 12) {
                    this.selectedMonth_range = { monthNbr: 1, year: today.year + 1 };
                }
                else {
                    this.selectedMonth_range = { monthNbr: today.month + this.opts.monthRangeValue, year: today.year };
                }
                break;
        }
        if (defaultMonth && defaultMonth.length) {
            this.selectedMonth = this.utilService.parseDefaultMonth(defaultMonth);
            this.selectedMonth_range = this.utilService.parseDefaultMonth(defaultMonth);
            if (this.selectedMonth_range.monthNbr >= 12) {
                this.selectedMonth_range.year++;
                this.selectedMonth_range.monthNbr = 1;
            }
            else {
                this.selectedMonth_range.monthNbr = this.selectedMonth_range.monthNbr + this.opts.monthRangeValue;
            }
        }
        if (!dateRange) {
            // Single date mode
            /** @type {?} */
            const date = this.utilService.isDateValid(inputValue, this.opts, true);
            if (this.utilService.isInitializedDate(date)) {
                this.selectedDate = date;
                /** @type {?} */
                const hour = this.utilService.preZero(date.hour);
                /** @type {?} */
                const minute = this.utilService.preZero(date.minute);
                /** @type {?} */
                const second = this.utilService.preZero(date.second);
                this.timeVlaue = `${hour}:${minute}:${second}`;
                this.selectedMonth = { monthNbr: date.month, year: date.year };
            }
        }
        else {
            // Date range mode
            const { begin, end } = this.utilService.isDateValidDateRange(inputValue, this.opts);
            if (this.utilService.isInitializedDate(begin) && this.utilService.isInitializedDate(end)) {
                this.selectedDateRange = { begin, end };
                /** @type {?} */
                const hour = this.utilService.preZero(begin.hour);
                /** @type {?} */
                const minute = this.utilService.preZero(begin.minute);
                /** @type {?} */
                const second = this.utilService.preZero(begin.second);
                this.timeVlaue = `${hour}:${minute}:${second}`;
                /** @type {?} */
                const _hour = this.utilService.preZero(end.hour);
                /** @type {?} */
                const _minute = this.utilService.preZero(end.minute);
                /** @type {?} */
                const _second = this.utilService.preZero(end.second);
                this.timeVlaue_range = `${_hour}:${_minute}:${_second}`;
                this.selectedMonth = { monthNbr: begin.month, year: begin.year };
                if (begin.month === end.month && begin.year === end.year) {
                    if (end.month >= 12) {
                        this.selectedMonth_range = { monthNbr: 1, year: end.year + 1 };
                    }
                    else {
                        /** @type {?} */
                        let endyear = end.year;
                        if (defaultView === DefaultView.Month) {
                            endyear = endyear + 1;
                        }
                        this.selectedMonth_range = { monthNbr: end.month + this.opts.monthRangeValue, year: endyear };
                    }
                }
                else {
                    if (defaultView === DefaultView.Month && begin.year === end.year) {
                        this.selectedMonth_range = { monthNbr: end.month, year: end.year + 1 };
                    }
                    else {
                        this.selectedMonth_range = { monthNbr: end.month, year: end.year };
                    }
                }
                /** @type {?} */
                const weekNbr = this.utilService.getWeekNumber(begin) === this.utilService.getWeekNumber(end)
                    ? this.utilService.getWeekNumber(begin)
                    : 0;
                this.selectedWeek = { weekNbr, year: begin.year };
            }
        }
        this.dateChanged = dc;
        this.calendarViewChanged = cvc;
        this.rangeDateSelection = rds;
        this.closedByEsc = cbe;
        this.setCalendarVisibleMonth();
        if (defaultView === DefaultView.Month) {
            this.onMonthViewBtnClicked();
            if (dateRange) {
                this.onMonthViewBtnClicked(true);
            }
        }
        else if (defaultView === DefaultView.Year) {
            this.onYearViewBtnClicked();
            if (dateRange) {
                this.onYearViewBtnClicked(true);
            }
        }
    }
    /**
     * @param {?} value
     * @return {?}
     */
    resetDateValue(value) {
        if (value === ResetDateType.singleDate || value === ResetDateType.both) {
            this.selectedDate = this.utilService.resetDate();
        }
        if (value === ResetDateType.dateRange || value === ResetDateType.both) {
            this.selectedDateRange.begin = this.utilService.resetDate();
            this.selectedDateRange.end = this.utilService.resetDate();
        }
    }
    /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    resetMonthYearSelect(isSecondCalendar) {
        if (!isSecondCalendar) {
            this.selectMonth = false;
            this.selectYear = false;
        }
        else {
            this.selectMonth_range = false;
            this.selectYear_range = false;
        }
    }
    /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    onMonthViewBtnClicked(isSecondCalendar) {
        this.selectTime = false;
        if (!isSecondCalendar) {
            this.selectMonth = !this.selectMonth;
            this.selectYear = false;
            if (this.selectMonth) {
                this.generateMonths(isSecondCalendar);
            }
            else {
                this.visibleMonth.year = this.selectedMonth.year;
            }
        }
        else {
            this.selectMonth_range = !this.selectMonth_range;
            this.selectYear_range = false;
            if (this.selectMonth_range) {
                this.generateMonths(isSecondCalendar);
            }
            else {
                this.visibleMonth_range.year = this.selectedMonth_range.year;
            }
            this.cdr.detectChanges();
        }
    }
    /**
     * @param {?} cell
     * @param {?} isSecondCalendar
     * @return {?}
     */
    onMonthCellClicked(cell, isSecondCalendar) {
        if (!isSecondCalendar) {
            const { year, monthNbr } = this.visibleMonth;
            /** @type {?} */
            const mc = cell.nbr !== monthNbr;
            this.visibleMonth = {
                monthTxt: this.opts.monthLabels[cell.nbr],
                monthNbr: cell.nbr,
                year,
                yearTxt: this.opts.yearTxt
            };
            this.selectedMonth.year = this.visibleMonth.year;
            if (this.opts.showType === 2) {
                this.toSelectMonth(this.visibleMonth);
            }
            else {
                this.generateCalendar(cell.nbr, year, mc, isSecondCalendar);
                this.selectMonth = false;
            }
        }
        else {
            const { year, monthNbr } = this.visibleMonth_range;
            /** @type {?} */
            const mc = cell.nbr !== monthNbr;
            this.visibleMonth_range = {
                monthTxt: this.opts.monthLabels[cell.nbr],
                monthNbr: cell.nbr,
                year,
                yearTxt: this.opts.yearTxt
            };
            this.selectedMonth_range.year = this.visibleMonth_range.year;
            if (this.opts.showType === 2) {
                this.toSelectMonth(this.visibleMonth_range);
            }
            else {
                this.generateCalendar(cell.nbr, year, mc, isSecondCalendar);
                this.selectMonth_range = false;
            }
        }
    }
    /**
     * @param {?} cell
     * @return {?}
     */
    onMonthCellKeyDown(cell) {
        // Make possible to move focus by arrow keys
        const { sourceRow, sourceCol } = this.getSourceRowAndColumnFromEvent(event);
        const { moveFocus, targetRow, targetCol } = this.getTargetFocusRowAndColumn(event, sourceRow, sourceCol, MONTH_ROW_COUNT, MONTH_COL_COUNT);
        if (moveFocus) {
            this.focusCellElement(M, targetRow, targetCol);
        }
    }
    /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    onYearViewBtnClicked(isSecondCalendar) {
        this.selectTime = false;
        if (!isSecondCalendar) {
            this.visibleMonth.year = this.selectedMonth.year;
            if (!this.selectYear) {
                this.generateYears(this.visibleMonth.year, isSecondCalendar);
            }
            else {
                this.generateCalendar(this.visibleMonth.monthNbr, this.visibleMonth.year, false, isSecondCalendar);
            }
            this.selectYear = this.opts.showType === 3 ? true : !this.selectYear;
            if (this.opts.showType === 2) {
                this.selectMonth = !this.selectMonth;
            }
            else {
                this.selectMonth = false;
            }
            // this.selectYear = !this.selectYear;
            // this.selectMonth = false;
        }
        else {
            this.visibleMonth_range.year = this.selectedMonth_range.year;
            if (!this.selectYear_range) {
                this.generateYears(this.visibleMonth_range.year, isSecondCalendar);
            }
            else {
                this.generateCalendar(this.visibleMonth_range.monthNbr, this.visibleMonth_range.year, false, isSecondCalendar);
            }
            this.selectYear_range = this.opts.showType === 3 ? true : !this.selectYear_range;
            if (this.opts.showType === 2) {
                this.selectMonth_range = !this.selectMonth_range;
            }
            else {
                this.selectMonth_range = false;
            }
        }
        this.cdr.detectChanges();
    }
    /**
     * @param {?} cell
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    onYearCellClicked(cell, isSecondCalendar) {
        if (!isSecondCalendar) {
            const { year, monthNbr, monthTxt } = this.visibleMonth;
            /** @type {?} */
            const yc = cell.year !== year;
            this.visibleMonth = { monthTxt, monthNbr, year: cell.year, yearTxt: this.opts.yearTxt };
            this.selectedMonth.year = this.visibleMonth.year;
            if (this.opts.showType === 3) {
                this.toSelectYear({ year: this.visibleMonth.year });
            }
            else if (this.opts.showType === 2) {
                this.generateMonths(isSecondCalendar);
                this.selectYear = false;
                this.selectMonth = true;
            }
            else {
                this.generateCalendar(monthNbr, cell.year, yc, isSecondCalendar);
                this.selectYear = false;
            }
        }
        else {
            const { year, monthNbr, monthTxt } = this.visibleMonth_range;
            /** @type {?} */
            const yc = cell.year !== year;
            this.visibleMonth_range = {
                monthTxt,
                monthNbr,
                year: cell.year,
                yearTxt: this.opts.yearTxt
            };
            this.selectedMonth_range.year = this.visibleMonth_range.year;
            if (this.opts.showType === 3) {
                this.toSelectYear({ year: this.visibleMonth_range.year });
            }
            else if (this.opts.showType === 2) {
                this.generateMonths(isSecondCalendar);
                this.selectYear_range = false;
                this.selectMonth_range = true;
            }
            else {
                this.generateCalendar(monthNbr, cell.year, yc, isSecondCalendar);
                this.selectYear_range = false;
            }
        }
    }
    /**
     * @param {?} cell
     * @return {?}
     */
    onYearCellKeyDown(cell) {
        // Make possible to move focus by arrow keys
        const { sourceRow, sourceCol } = this.getSourceRowAndColumnFromEvent(event);
        const { moveFocus, targetRow, targetCol } = this.getTargetFocusRowAndColumn(event, sourceRow, sourceCol, YEAR_ROW_COUNT, YEAR_COL_COUNT);
        if (moveFocus) {
            this.focusCellElement(Y, targetRow, targetCol);
        }
    }
    /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    generateMonths(isSecondCalendar) {
        /** @type {?} */
        const today = this.getToday();
        const { disableUntil, disableSince } = this.opts;
        // tslint:disable-next-line:one-variable-per-declaration
        /** @type {?} */
        let year;
        /** @type {?} */
        let monthNbr;
        if (!isSecondCalendar) {
            this.months.length = 0;
            year = this.visibleMonth.year;
            monthNbr = this.visibleMonth.monthNbr;
        }
        else {
            this.months_range.length = 0;
            year = this.visibleMonth_range.year;
            monthNbr = this.visibleMonth_range.monthNbr;
        }
        for (let i = 1; i <= 12; i += 3) {
            /** @type {?} */
            const row = [];
            for (let j = i; j < i + 3; j++) {
                /** @type {?} */
                const disabled = this.utilService.isMonthDisabledByDisableUntil({ year, month: j, day: this.daysInMonth(j, year) }, disableUntil) || this.utilService.isMonthDisabledByDisableSince({ year, month: j, day: 1 }, disableSince);
                row.push({
                    nbr: j,
                    name: this.opts.monthLabels[j],
                    currMonth: j === today.month && year === today.year,
                    disabled,
                    monthObj: { year, month: j }
                });
            }
            if (!isSecondCalendar) {
                this.months.push({ row, year });
            }
            else {
                this.months_range.push({ row, year });
            }
        }
        this.setMonthViewHeaderBtnDisabledState(year, isSecondCalendar);
    }
    /**
     * @param {?} inputYear
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    generateYears(inputYear, isSecondCalendar) {
        const { minYear, maxYear, disableUntil, disableSince } = this.opts;
        /** @type {?} */
        let y = inputYear - (inputYear % 10);
        const { year, monthNbr } = this.visibleMonth;
        if (!isSecondCalendar) {
            this.years.length = 0;
        }
        else {
            if (!this.years_range.length && ((this.years && this.years.length) && y < this.years[3][2].year && y > this.years[0][0].year) && this.opts.showType === 3) {
                y += 10;
            }
            this.years_range.length = 0;
            /** @type {?} */
            const allYears = flatten(this.years_range);
            if (allYears.findIndex((/**
             * @param {?} n
             * @return {?}
             */
            n => n.year == inputYear)) > -1) {
                y = this.years_range[3][2].year;
            }
        }
        /** @type {?} */
        const today = this.getToday();
        for (let i = y - 1; i < y + 10; i += 3) {
            /** @type {?} */
            const row = [];
            for (let j = i; j < i + 3; j++) {
                /** @type {?} */
                const disabled = this.utilService.isMonthDisabledByDisableUntil({
                    year: j,
                    month: monthNbr,
                    day: this.daysInMonth(monthNbr, j)
                }, disableUntil) ||
                    this.utilService.isMonthDisabledByDisableSince({ year: j, month: monthNbr, day: 1 }, disableSince);
                /** @type {?} */
                const minMax = j < minYear || j > maxYear;
                row.push({
                    year: j,
                    currYear: j === today.year,
                    selected: j === year,
                    disabled: disabled || minMax,
                    yearObj: { year: j }
                });
            }
            if (!isSecondCalendar) {
                this.years.push(row);
            }
            else {
                this.years_range.push(row);
            }
        }
        if (!isSecondCalendar) {
            this.setYearViewHeaderBtnDisabledState(this.years[0][1].year, this.years[3][1].year, isSecondCalendar);
        }
        else {
            this.setYearViewHeaderBtnDisabledState(this.years_range[0][1].year, this.years_range[3][1].year, isSecondCalendar);
        }
    }
    /**
     * @return {?}
     */
    setCalendarVisibleMonth() {
        // Sets visible month of calendar
        const { year, monthNbr } = this.selectedMonth;
        this.visibleMonth = {
            monthTxt: this.opts.monthLabels[monthNbr],
            monthNbr,
            year,
            yearTxt: this.opts.yearTxt
        };
        // Create current month
        if (this.opts.dateRange) {
            this.visibleMonth_range = {
                monthTxt: this.opts.monthLabels[this.selectedMonth_range.monthNbr],
                monthNbr: this.selectedMonth_range.monthNbr,
                year: this.selectedMonth_range.year,
                yearTxt: this.opts.yearTxt
            };
            this.generateCalendar(this.selectedMonth_range.monthNbr, this.selectedMonth_range.year, true, true);
        }
        this.generateCalendar(monthNbr, year, true, false);
    }
    /**
     * @param {?=} event
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    onPrevNavigateBtnClicked(event, isSecondCalendar) {
        if (!isSecondCalendar) {
            if (event) {
                if (!this.selectMonth && !this.selectYear) {
                    this.setDateViewMonth(isSecondCalendar, false);
                }
                else if (this.selectMonth) {
                    this.visibleMonth.year--;
                    this.generateMonths(isSecondCalendar);
                }
                else if (this.selectYear) {
                    this.generateYears(this.years[2][2].year - 10);
                }
            }
            else {
                if (!this.selectMonth && !this.selectYear) {
                    this.visibleMonth.year--;
                    this.setDateViewMonth(isSecondCalendar);
                }
                else if (this.selectMonth) {
                    this.visibleMonth.year--;
                    this.generateMonths(isSecondCalendar);
                }
                else if (this.selectYear) {
                    this.generateYears(this.years[2][2].year - 10, isSecondCalendar);
                }
            }
        }
        else {
            if (event) {
                if (!this.selectMonth_range && !this.selectYear_range) {
                    this.setDateViewMonth(isSecondCalendar, false);
                }
                else if (this.selectMonth_range) {
                    this.visibleMonth_range.year--;
                    this.generateMonths(isSecondCalendar);
                }
                else if (this.selectYear_range) {
                    this.generateYears(this.years_range[2][2].year - 10);
                }
            }
            else {
                if (!this.selectMonth_range && !this.selectYear_range) {
                    this.visibleMonth_range.year--;
                    this.setDateViewMonth(isSecondCalendar);
                }
                else if (this.selectMonth_range) {
                    this.visibleMonth_range.year--;
                    this.generateMonths(isSecondCalendar);
                }
                else if (this.selectYear_range) {
                    this.generateYears(this.years_range[2][2].year - 10, isSecondCalendar);
                }
            }
        }
    }
    /**
     * @param {?=} event
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    onNextNavigateBtnClicked(event, isSecondCalendar) {
        if (!isSecondCalendar) {
            if (event) {
                if (!this.selectMonth && !this.selectYear) {
                    this.setDateViewMonth(isSecondCalendar, true);
                }
                else if (this.selectMonth) {
                    this.visibleMonth.year++;
                    this.generateMonths();
                }
                else if (this.selectYear) {
                    this.generateYears(this.years[2][2].year + 10);
                }
            }
            else {
                if (!this.selectMonth && !this.selectYear) {
                    this.visibleMonth.year++;
                    this.setDateViewMonth(isSecondCalendar);
                }
                else if (this.selectMonth) {
                    this.visibleMonth.year++;
                    this.generateMonths();
                }
                else if (this.selectYear) {
                    this.generateYears(this.years[2][2].year + 10);
                }
            }
        }
        else {
            if (event) {
                if (!this.selectMonth_range && !this.selectYear_range) {
                    this.setDateViewMonth(isSecondCalendar, true);
                }
                else if (this.selectMonth_range) {
                    this.visibleMonth_range.year++;
                    this.generateMonths(isSecondCalendar);
                }
                else if (this.selectYear_range) {
                    this.generateYears(this.years_range[2][2].year + 10, isSecondCalendar);
                }
            }
            else {
                if (!this.selectMonth_range && !this.selectYear_range) {
                    this.visibleMonth_range.year++;
                    this.setDateViewMonth(isSecondCalendar);
                }
                else if (this.selectMonth_range) {
                    this.visibleMonth_range.year++;
                    this.generateMonths(isSecondCalendar);
                }
                else if (this.selectYear_range) {
                    this.generateYears(this.years_range[2][2].year + 10, isSecondCalendar);
                }
            }
        }
    }
    /**
     * @param {?=} isSecondCalendar
     * @param {?=} isNext
     * @return {?}
     */
    setDateViewMonth(isSecondCalendar, isNext) {
        /** @type {?} */
        let change;
        if (isNext === undefined) {
            change = 0;
        }
        else {
            change = isNext ? 1 : -1;
        }
        if (!isSecondCalendar) {
            const { year, monthNbr } = this.visibleMonth;
            /** @type {?} */
            const d = this.getDate(year, monthNbr, 1);
            d.setMonth(d.getMonth() + change);
            /** @type {?} */
            const y = d.getFullYear();
            /** @type {?} */
            const m = d.getMonth() + 1;
            this.visibleMonth = {
                monthTxt: this.opts.monthLabels[m],
                monthNbr: m,
                year: y,
                yearTxt: this.opts.yearTxt
            };
            this.generateCalendar(m, y, true, isSecondCalendar);
        }
        else {
            const { year, monthNbr } = this.visibleMonth_range;
            /** @type {?} */
            const d = this.getDate(year, monthNbr, 1);
            d.setMonth(d.getMonth() + change);
            /** @type {?} */
            const y = d.getFullYear();
            /** @type {?} */
            const m = d.getMonth() + 1;
            this.visibleMonth_range = {
                monthTxt: this.opts.monthLabels[m],
                monthNbr: m,
                year: y,
                yearTxt: this.opts.yearTxt
            };
            this.generateCalendar(m, y, true, isSecondCalendar);
        }
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onCloseSelector(event) {
        /** @type {?} */
        const keyCode = this.utilService.getKeyCodeFromEvent(event);
        if (keyCode === KeyCode.esc) {
            this.closedByEsc();
        }
    }
    /**
     * @param {?} cell
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    onDayCellClicked(cell, isSecondCalendar) {
        if (cell.cmo === 1) {
            this.onPrevNavigateBtnClicked(true, isSecondCalendar);
        }
        else if (cell.cmo === 3) {
            this.onNextNavigateBtnClicked(true, isSecondCalendar);
        }
        this.selectDate(cell.dateObj);
        this.resetMonthYearSelect(isSecondCalendar);
    }
    /**
     * @param {?} cell
     * @return {?}
     */
    onDayCellKeyDown(cell) {
        // Make possible to move focus by arrow keys
        const { sourceRow, sourceCol } = this.getSourceRowAndColumnFromEvent(event);
        const { moveFocus, targetRow, targetCol } = this.getTargetFocusRowAndColumn(event, sourceRow, sourceCol, DATE_ROW_COUNT, DATE_COL_COUNT);
        if (moveFocus) {
            this.focusCellElement(D, targetRow, targetCol);
        }
    }
    /**
     * @param {?} cell
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    onDayCellMouseEnter(cell, isSecondCalendar) {
        if (isSecondCalendar) {
            for (const w of this.dates) {
                for (const day of w.week) {
                    day.range =
                        (this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin, day.dateObj) &&
                            this.utilService.isDateSameOrEarlier(day.dateObj, cell.dateObj)) ||
                            (this.utilService.isDateSameOrEarlier(day.dateObj, this.selectedDateRange.begin) &&
                                this.utilService.isDateSameOrEarlier(cell.dateObj, day.dateObj));
                }
            }
        }
        else {
            for (const w of this.dates_range) {
                for (const day of w.week) {
                    day.range =
                        (this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin, day.dateObj) &&
                            this.utilService.isDateSameOrEarlier(day.dateObj, cell.dateObj)) ||
                            (this.utilService.isDateSameOrEarlier(day.dateObj, this.selectedDateRange.begin) &&
                                this.utilService.isDateSameOrEarlier(cell.dateObj, day.dateObj));
                }
            }
        }
    }
    /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    onDayCellMouseLeave(isSecondCalendar) {
        if (isSecondCalendar) {
            for (const w of this.dates) {
                for (const day of w.week) {
                    day.range = false;
                }
            }
        }
        else {
            for (const w of this.dates_range) {
                for (const day of w.week) {
                    day.range = false;
                }
            }
        }
    }
    /**
     * @param {?} cell
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    onMonthCellMouseEnter(cell, isSecondCalendar) {
        if (isSecondCalendar) {
            for (const item of this.months) {
                for (const month of item.row) {
                    month.range =
                        (this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin, month.monthObj) &&
                            this.utilService.isDateSameOrEarlier(month.monthObj, cell.monthObj)) ||
                            (this.utilService.isDateSameOrEarlier(month.monthObj, this.selectedDateRange.begin) &&
                                this.utilService.isDateSameOrEarlier(cell.monthObj, month.monthObj));
                }
            }
        }
        else {
            for (const item of this.months_range) {
                for (const month of item.row) {
                    month.range =
                        (this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin, month.monthObj) &&
                            this.utilService.isDateSameOrEarlier(month.monthObj, cell.monthObj)) ||
                            (this.utilService.isDateSameOrEarlier(month.monthObj, this.selectedDateRange.begin) &&
                                this.utilService.isDateSameOrEarlier(cell.monthObj, month.monthObj));
                }
            }
        }
    }
    /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    onMonthCellMouseLeave(isSecondCalendar) {
        if (isSecondCalendar) {
            for (const item of this.months) {
                for (const month of item.row) {
                    month.range = false;
                }
            }
        }
        else {
            for (const item of this.months) {
                for (const month of item.row) {
                    month.range = false;
                }
            }
        }
    }
    /**
     * @param {?} cell
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    onYearCellMouseEnter(cell, isSecondCalendar) {
        if (isSecondCalendar) {
            for (const item of this.years) {
                for (const year of item) {
                    year.range =
                        (this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin, year.yearObj) &&
                            this.utilService.isDateSameOrEarlier(year.yearObj, cell.yearObj)) ||
                            (this.utilService.isDateSameOrEarlier(year.yearObj, this.selectedDateRange.begin) &&
                                this.utilService.isDateSameOrEarlier(cell.yearObj, year.yearObj));
                }
            }
        }
        else {
            for (const item of this.years_range) {
                for (const year of item) {
                    year.range =
                        (this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin, year.yearObj) &&
                            this.utilService.isDateSameOrEarlier(year.yearObj, cell.yearObj)) ||
                            (this.utilService.isDateSameOrEarlier(year.yearObj, this.selectedDateRange.begin) &&
                                this.utilService.isDateSameOrEarlier(cell.yearObj, year.yearObj));
                }
            }
        }
    }
    /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    onYearCellMouseLeave(isSecondCalendar) {
        if (isSecondCalendar) {
            for (const item of this.years) {
                for (const year of item) {
                    year.range = false;
                }
            }
        }
        else {
            for (const item of this.years_range) {
                for (const year of item) {
                    year.range = false;
                }
            }
        }
    }
    /**
     * @param {?} weekData
     * @return {?}
     */
    onWeekClicked(weekData) {
        /** @type {?} */
        const showTime = this.opts.returnFormat && this.opts.returnFormat.toLocaleLowerCase().indexOf('hh:mm') > -1;
        this.selectedWeek = { weekNbr: weekData.weekNbr, year: weekData.year };
        if (showTime) {
            weekData.week[0].dateObj.hour = 0;
            weekData.week[0].dateObj.minute = 0;
            weekData.week[0].dateObj.second = 0;
            weekData.week[6].dateObj.hour = 23;
            weekData.week[6].dateObj.minute = 59;
            weekData.week[6].dateObj.second = 59;
        }
        this.selectDate(weekData.week[0].dateObj);
        this.selectDate(weekData.week[6].dateObj);
    }
    /**
     * @param {?} event
     * @return {?}
     */
    getSourceRowAndColumnFromEvent(event) {
        /** @type {?} */
        let sourceRow = 0;
        /** @type {?} */
        let sourceCol = 0;
        if (event.target && event.target.id) {
            // value of id is for example: m_0_1 (first number = row, second number = column)
            /** @type {?} */
            const arr = event.target.id.split(UNDER_LINE);
            sourceRow = Number(arr[1]);
            sourceCol = Number(arr[2]);
        }
        return { sourceRow, sourceCol };
    }
    /**
     * @param {?} event
     * @param {?} row
     * @param {?} col
     * @param {?} rowCount
     * @param {?} colCount
     * @return {?}
     */
    getTargetFocusRowAndColumn(event, row, col, rowCount, colCount) {
        /** @type {?} */
        let moveFocus = false;
        /** @type {?} */
        let targetRow = row;
        /** @type {?} */
        let targetCol = col;
        /** @type {?} */
        const keyCode = this.utilService.getKeyCodeFromEvent(event);
        if (keyCode === KeyCode.upArrow && row > 0) {
            moveFocus = true;
            targetRow--;
        }
        else if (keyCode === KeyCode.downArrow && row < rowCount) {
            moveFocus = true;
            targetRow++;
        }
        else if (keyCode === KeyCode.leftArrow && col > 0) {
            moveFocus = true;
            targetCol--;
        }
        else if (keyCode === KeyCode.rightArrow && col < colCount) {
            moveFocus = true;
            targetCol++;
        }
        return { moveFocus, targetRow, targetCol };
    }
    /**
     * @param {?} type
     * @param {?} row
     * @param {?} col
     * @return {?}
     */
    focusCellElement(type, row, col) {
        /** @type {?} */
        const elem = this.selectorEl.nativeElement.querySelector(DOT + type + UNDER_LINE + row + UNDER_LINE + col);
        if (elem) {
            elem.focus();
        }
    }
    /**
     * @param {?} date
     * @return {?}
     */
    selectDate(date) {
        const { dateFormat, monthLabels, dateRangeDatesDelimiter, closeSelectorOnDateSelect, showTime, returnFormat } = this.opts;
        if (this.opts.dateRange) {
            // Date range
            /** @type {?} */
            const isBeginDateInitialized = this.utilService.isInitializedDate(this.selectedDateRange.begin);
            /** @type {?} */
            const isEndDateInitialized = this.utilService.isInitializedDate(this.selectedDateRange.end) &&
                JSON.stringify(this.selectedDateRange.begin) !== JSON.stringify(this.selectedDateRange.end);
            if (isBeginDateInitialized && isEndDateInitialized) {
                // both already selected - set begin date and reset end date
                this.selectedDateRange.begin = date;
                this.selectedDateRange.end = this.utilService.resetDate();
                this.rangeDateSelection({
                    isBegin: true,
                    date,
                    jsDate: this.utilService.getDate(date),
                    dateFormat,
                    formatted: this.utilService.formatDate(date, dateFormat, monthLabels),
                    epoc: this.utilService.getEpocTime(date)
                });
            }
            else if (!isBeginDateInitialized) {
                // begin date
                this.selectedDateRange.begin = date;
                if (!isEndDateInitialized) {
                    this.selectedDateRange.end = date;
                }
                this.rangeDateSelection({
                    isBegin: true,
                    date,
                    jsDate: this.utilService.getDate(date),
                    dateFormat,
                    formatted: this.utilService.formatDate(date, dateFormat, monthLabels),
                    epoc: this.utilService.getEpocTime(date)
                });
            }
            else {
                // second selection
                /** @type {?} */
                const firstDateEarlier = this.utilService.isDateEarlier(date, this.selectedDateRange.begin);
                if (firstDateEarlier) {
                    /** @type {?} */
                    const _date = this.selectedDateRange.begin;
                    this.selectedDateRange.end = _date;
                    this.rangeDateSelection({
                        isBegin: false,
                        date: _date,
                        jsDate: this.utilService.getDate(_date),
                        dateFormat,
                        formatted: this.utilService.formatDate(_date, dateFormat, monthLabels),
                        epoc: this.utilService.getEpocTime(_date)
                    });
                    this.selectedDateRange.begin = date;
                    this.rangeDateSelection({
                        isBegin: true,
                        date,
                        jsDate: this.utilService.getDate(date),
                        dateFormat,
                        formatted: this.utilService.formatDate(date, dateFormat, monthLabels),
                        epoc: this.utilService.getEpocTime(date)
                    });
                }
                else {
                    this.selectedDateRange.end = date;
                    this.rangeDateSelection({
                        isBegin: false,
                        date,
                        jsDate: this.utilService.getDate(date),
                        dateFormat,
                        formatted: this.utilService.formatDate(date, dateFormat, monthLabels),
                        epoc: this.utilService.getEpocTime(date)
                    });
                }
                if (!this.opts.showTime) {
                    this.dateChanged(this.utilService.getDateModel(null, this.selectedDateRange, dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat), closeSelectorOnDateSelect);
                }
            }
        }
        else {
            // Single date
            this.selectedDate = date;
            if (!this.opts.showTime) {
                this.dateChanged(this.utilService.getDateModel(this.selectedDate, null, dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat), showTime ? false : closeSelectorOnDateSelect);
            }
            else {
                if (!this.timeVlaue && this.opts.viewType == ViewType.Together) {
                    this.timeVlaue = this.getTimeStr(new Date);
                }
            }
        }
    }
    /**
     * @param {?} month
     * @return {?}
     */
    toSelectMonth(month) {
        const { dateFormat, monthLabels, dateRangeDatesDelimiter, closeSelectorOnDateSelect, showTime, returnFormat } = this.opts;
        if (this.opts.dateRange) {
            // month range
            /** @type {?} */
            const isBeginMonthInitialized = this.utilService.isInitializedMonth(this.selectedDateRange.begin);
            /** @type {?} */
            const isEndMonthInitialized = this.utilService.isInitializedMonth(this.selectedDateRange.end);
            if (isBeginMonthInitialized && isEndMonthInitialized) {
                // both already selected - set begin date and reset end date
                this.selectedDateRange.begin = { year: month.year, month: month.monthNbr };
                this.selectedDateRange.end = this.utilService.resetDate();
                this.rangeDateSelection({
                    isBegin: true,
                    date: this.selectedDateRange.begin,
                    jsDate: this.utilService.getDate(this.selectedDateRange.begin),
                    dateFormat,
                    formatted: this.utilService.formatDate(this.selectedDateRange.begin, dateFormat, monthLabels),
                    epoc: this.utilService.getEpocTime(this.selectedDateRange.begin)
                });
            }
            else if (!isBeginMonthInitialized) {
                // begin date
                this.selectedDateRange.begin = { year: month.year, month: month.monthNbr };
                this.rangeDateSelection({
                    isBegin: true,
                    date: this.selectedDateRange.begin,
                    jsDate: this.utilService.getDate(this.selectedDateRange.begin),
                    dateFormat,
                    formatted: this.utilService.formatDate(this.selectedDateRange.begin, dateFormat, monthLabels),
                    epoc: this.utilService.getEpocTime(this.selectedDateRange.begin)
                });
            }
            else {
                // second selection
                /** @type {?} */
                const firstDateEarlier = this.utilService.isDateEarlier({ year: month.year, month: month.monthNbr }, this.selectedDateRange.begin);
                if (firstDateEarlier) {
                    /** @type {?} */
                    const _date = this.selectedDateRange.begin;
                    this.selectedDateRange.end = _date;
                    this.rangeDateSelection({
                        isBegin: false,
                        date: _date,
                        jsDate: this.utilService.getDate(_date),
                        dateFormat,
                        formatted: this.utilService.formatDate(_date, dateFormat, monthLabels),
                        epoc: this.utilService.getEpocTime(_date)
                    });
                    this.selectedDateRange.begin = { year: month.year, month: month.monthNbr };
                    this.rangeDateSelection({
                        isBegin: true,
                        date: this.selectedDateRange.begin,
                        jsDate: this.utilService.getDate(this.selectedDateRange.begin),
                        dateFormat,
                        formatted: this.utilService.formatDate(this.selectedDateRange.begin, dateFormat, monthLabels),
                        epoc: this.utilService.getEpocTime(this.selectedDateRange.begin)
                    });
                }
                else {
                    this.selectedDateRange.end = { year: month.year, month: month.monthNbr };
                    this.rangeDateSelection({
                        isBegin: false,
                        date: this.selectedDateRange.end,
                        jsDate: this.utilService.getDate(this.selectedDateRange.end),
                        dateFormat,
                        formatted: this.utilService.formatDate(this.selectedDateRange.end, dateFormat, monthLabels),
                        epoc: this.utilService.getEpocTime(this.selectedDateRange.end)
                    });
                }
                if (!this.opts.showTime) {
                    this.dateChanged(this.utilService.getDateModel(null, this.selectedDateRange, dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat), closeSelectorOnDateSelect);
                }
            }
        }
        else {
            this.selectedMonth = month;
            this.dateChanged(this.utilService.getDateModel({ year: month.year, month: month.monthNbr }, null, dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat), showTime ? false : closeSelectorOnDateSelect);
        }
    }
    /**
     * @param {?} year
     * @return {?}
     */
    toSelectYear(year) {
        const { dateFormat, monthLabels, dateRangeDatesDelimiter, closeSelectorOnDateSelect, showTime, returnFormat } = this.opts;
        if (this.opts.dateRange) {
            // month range
            /** @type {?} */
            const isBeginYearInitialized = this.utilService.isInitializedYear(this.selectedDateRange.begin);
            /** @type {?} */
            const isEndYearInitialized = this.utilService.isInitializedYear(this.selectedDateRange.end);
            if (isBeginYearInitialized && isEndYearInitialized) {
                // both already selected - set begin date and reset end date
                this.selectedDateRange.begin = year;
                this.selectedDateRange.end = this.utilService.resetDate();
                this.rangeDateSelection({
                    isBegin: true,
                    date: this.selectedDateRange.begin,
                    jsDate: this.utilService.getDate(this.selectedDateRange.begin),
                    dateFormat,
                    formatted: this.utilService.formatDate(this.selectedDateRange.begin, dateFormat, monthLabels),
                    epoc: this.utilService.getEpocTime(this.selectedDateRange.begin)
                });
            }
            else if (!isBeginYearInitialized) {
                // begin date
                this.selectedDateRange.begin = year;
                this.rangeDateSelection({
                    isBegin: true,
                    date: this.selectedDateRange.begin,
                    jsDate: this.utilService.getDate(this.selectedDateRange.begin),
                    dateFormat,
                    formatted: this.utilService.formatDate(this.selectedDateRange.begin, dateFormat, monthLabels),
                    epoc: this.utilService.getEpocTime(this.selectedDateRange.begin)
                });
            }
            else {
                // second selection
                /** @type {?} */
                const firstDateEarlier = this.utilService.isDateEarlier(year, this.selectedDateRange.begin);
                if (firstDateEarlier) {
                    /** @type {?} */
                    const _date = this.selectedDateRange.begin;
                    this.selectedDateRange.end = _date;
                    this.rangeDateSelection({
                        isBegin: false,
                        date: _date,
                        jsDate: this.utilService.getDate(_date),
                        dateFormat,
                        formatted: this.utilService.formatDate(_date, dateFormat, monthLabels),
                        epoc: this.utilService.getEpocTime(_date)
                    });
                    this.selectedDateRange.begin = year;
                    this.rangeDateSelection({
                        isBegin: true,
                        date: this.selectedDateRange.begin,
                        jsDate: this.utilService.getDate(this.selectedDateRange.begin),
                        dateFormat,
                        formatted: this.utilService.formatDate(this.selectedDateRange.begin, dateFormat, monthLabels),
                        epoc: this.utilService.getEpocTime(this.selectedDateRange.begin)
                    });
                }
                else {
                    this.selectedDateRange.end = year;
                    this.rangeDateSelection({
                        isBegin: false,
                        date: this.selectedDateRange.end,
                        jsDate: this.utilService.getDate(this.selectedDateRange.end),
                        dateFormat,
                        formatted: this.utilService.formatDate(this.selectedDateRange.end, dateFormat, monthLabels),
                        epoc: this.utilService.getEpocTime(this.selectedDateRange.end)
                    });
                }
                if (!this.opts.showTime) {
                    this.dateChanged(this.utilService.getDateModel(null, this.selectedDateRange, dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat), closeSelectorOnDateSelect);
                }
            }
        }
        else {
            this.dateChanged(this.utilService.getDateModel(year, null, dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat), showTime ? false : closeSelectorOnDateSelect);
        }
    }
    /**
     * @param {?} y
     * @param {?} m
     * @return {?}
     */
    monthStartIdx(y, m) {
        // Month start index
        /** @type {?} */
        const d = new Date();
        d.setDate(1);
        d.setMonth(m - 1);
        d.setFullYear(y);
        /** @type {?} */
        const idx = d.getDay() + this.sundayIdx();
        return idx >= 7 ? idx - 7 : idx;
    }
    /**
     * @param {?} m
     * @param {?} y
     * @return {?}
     */
    daysInMonth(m, y) {
        // Return number of days of current month
        return new Date(y, m, 0).getDate();
    }
    /**
     * @param {?} m
     * @param {?} y
     * @return {?}
     */
    daysInPrevMonth(m, y) {
        // Return number of days of the previous month
        /** @type {?} */
        const d = this.getDate(y, m, 1);
        d.setMonth(d.getMonth() - 1);
        return this.daysInMonth(d.getMonth() + 1, d.getFullYear());
    }
    /**
     * @param {?} d
     * @param {?} m
     * @param {?} y
     * @param {?} cmo
     * @param {?} today
     * @return {?}
     */
    isCurrDay(d, m, y, cmo, today) {
        // Check is a given date the today
        return d === today.day && m === today.month && y === today.year && cmo === MonthId.curr;
    }
    /**
     * @return {?}
     */
    getWidth() {
        /** @type {?} */
        const hasShortCuts = this.opts.shortcuts && this.opts.shortcuts.length > 0;
        if (this.opts.dateRange && this.opts.showType !== 4) {
            return hasShortCuts ? '660px' : '574px';
        }
        else {
            /** @type {?} */
            const w = (hasShortCuts ? 380 : 287) + (this.opts.viewType === ViewType.Together ? 200 : 0);
            return w + 'px';
        }
    }
    /**
     * @return {?}
     */
    getToday() {
        /** @type {?} */
        const date = new Date();
        if (this.opts.showTime) {
            return {
                year: date.getFullYear(),
                month: date.getMonth() + 1,
                day: date.getDate(),
                hour: date.getHours(),
                minute: date.getMinutes(),
                second: date.getSeconds()
            };
        }
        else {
            return { year: date.getFullYear(), month: date.getMonth() + 1, day: date.getDate() };
        }
    }
    /**
     * @param {?} date
     * @return {?}
     */
    getDayNumber(date) {
        // Get day number: su=0, mo=1, tu=2, we=3 ...
        /** @type {?} */
        const d = this.getDate(date.year, date.month, date.day);
        return d.getDay();
    }
    /**
     * @param {?} date
     * @return {?}
     */
    getWeekday(date) {
        // Get weekday: su, mo, tu, we ...
        return this.weekDayOpts[this.getDayNumber(date)];
    }
    /**
     * @param {?} year
     * @param {?} month
     * @param {?} day
     * @return {?}
     */
    getDate(year, month, day) {
        // Creates a date object from given year, month and day
        return new Date(year, month - 1, day, 0, 0, 0, 0);
    }
    /**
     * @return {?}
     */
    sundayIdx() {
        // Index of Sunday day
        return this.dayIdx > 0 ? 7 - this.dayIdx : 0;
    }
    /**
     * @param {?} m
     * @param {?} y
     * @param {?} notifyChange
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    generateCalendar(m, y, notifyChange, isSecondCalendar) {
        if (!isSecondCalendar) {
            this.dates.length = 0;
        }
        else {
            this.dates_range.length = 0;
        }
        /** @type {?} */
        const today = this.getToday();
        /** @type {?} */
        const monthStart = this.monthStartIdx(y, m);
        /** @type {?} */
        const dInThisM = this.daysInMonth(m, y);
        /** @type {?} */
        const dInPrevM = this.daysInPrevMonth(m, y);
        /** @type {?} */
        let dayNbr = 1;
        /** @type {?} */
        let cmo = MonthId.prev;
        for (let i = 1; i < 7; i++) {
            /** @type {?} */
            const week = [];
            if (i === 1) {
                // First week
                /** @type {?} */
                const pm = dInPrevM - monthStart + 1;
                // Previous month
                for (let j = pm; j <= dInPrevM; j++) {
                    /** @type {?} */
                    const date = { year: m === 1 ? y - 1 : y, month: m === 1 ? 12 : m - 1, day: j };
                    week.push({
                        dateObj: date,
                        cmo,
                        currDay: this.isCurrDay(j, m, y, cmo, today),
                        disabled: this.utilService.isDisabledDate(date, this.opts),
                        markedDate: this.utilService.isMarkedDate(date, this.opts.markDates, this.opts.markWeekends),
                        highlight: this.utilService.isHighlightedDate(date, this.opts.sunHighlight, this.opts.satHighlight, this.opts.highlightDates)
                    });
                }
                cmo = MonthId.curr;
                // Current month
                /** @type {?} */
                const daysLeft = 7 - week.length;
                for (let j = 0; j < daysLeft; j++) {
                    /** @type {?} */
                    const date = { year: y, month: m, day: dayNbr };
                    week.push({
                        dateObj: date,
                        cmo,
                        currDay: this.isCurrDay(dayNbr, m, y, cmo, today),
                        disabled: this.utilService.isDisabledDate(date, this.opts),
                        markedDate: this.utilService.isMarkedDate(date, this.opts.markDates, this.opts.markWeekends),
                        highlight: this.utilService.isHighlightedDate(date, this.opts.sunHighlight, this.opts.satHighlight, this.opts.highlightDates)
                    });
                    dayNbr++;
                }
            }
            else {
                // Rest of the weeks
                for (let j = 1; j < 8; j++) {
                    if (dayNbr > dInThisM) {
                        // Next month
                        dayNbr = 1;
                        cmo = MonthId.next;
                    }
                    /** @type {?} */
                    const date = {
                        year: cmo === MonthId.next && m === 12 ? y + 1 : y,
                        month: cmo === MonthId.curr ? m : cmo === MonthId.next && m < 12 ? m + 1 : 1,
                        day: dayNbr
                    };
                    week.push({
                        dateObj: date,
                        cmo,
                        currDay: this.isCurrDay(dayNbr, m, y, cmo, today),
                        disabled: this.utilService.isDisabledDate(date, this.opts),
                        markedDate: this.utilService.isMarkedDate(date, this.opts.markDates, this.opts.markWeekends),
                        highlight: this.utilService.isHighlightedDate(date, this.opts.sunHighlight, this.opts.satHighlight, this.opts.highlightDates)
                    });
                    dayNbr++;
                }
            }
            /** @type {?} */
            const weekNbr = this.opts.showWeekNumbers && this.opts.firstDayOfWeek === MO
                ? this.utilService.getWeekNumber(week[0].dateObj)
                : 0;
            if (!isSecondCalendar) {
                this.dates.push({ week, weekNbr, year: y });
            }
            else {
                this.dates_range.push({ week, weekNbr, year: y });
            }
        }
        this.setDateViewHeaderBtnDisabledState(m, y, isSecondCalendar);
        if (notifyChange) {
            // Notify parent
            this.calendarViewChanged({
                year: y,
                month: m,
                first: { number: 1, weekday: this.getWeekday({ year: y, month: m, day: 1 }) },
                last: { number: dInThisM, weekday: this.getWeekday({ year: y, month: m, day: dInThisM }) }
            });
        }
    }
    /**
     * @param {?} m
     * @param {?} y
     * @param {?} isSecondCalendar
     * @return {?}
     */
    setDateViewHeaderBtnDisabledState(m, y, isSecondCalendar) {
        /** @type {?} */
        let dpm = false;
        /** @type {?} */
        let dnm = false;
        const { disableUntil, disableSince, minYear, maxYear } = this.opts;
        dpm = this.utilService.isMonthDisabledByDisableUntil({
            year: m === 1 ? y - 1 : y,
            month: m === 1 ? 12 : m - 1,
            day: this.daysInMonth(m === 1 ? 12 : m - 1, m === 1 ? y - 1 : y)
        }, disableUntil);
        dnm = this.utilService.isMonthDisabledByDisableSince({ year: m === 12 ? y + 1 : y, month: m === 12 ? 1 : m + 1, day: 1 }, disableSince);
        if (!isSecondCalendar) {
            this.prevViewDisabled = (m === 1 && y === minYear) || dpm;
            this.nextViewDisabled = (m === 12 && y === maxYear) || dnm;
            this.prevDobViewDisabled = y === minYear || dpm;
            this.nextDobViewDisabled = y === maxYear || dnm;
        }
        else {
            this.prevViewDisabled_range = (m === 1 && y === minYear) || dpm;
            this.nextViewDisabled_range = (m === 12 && y === maxYear) || dnm;
            this.prevDobViewDisabled_range = y === minYear || dpm;
            this.nextDobViewDisabled_range = y === maxYear || dnm;
        }
    }
    /**
     * @param {?} y
     * @param {?} isSecondCalendar
     * @return {?}
     */
    setMonthViewHeaderBtnDisabledState(y, isSecondCalendar) {
        /** @type {?} */
        let dpm = false;
        /** @type {?} */
        let dnm = false;
        const { disableUntil, disableSince, minYear, maxYear } = this.opts;
        dpm = this.utilService.isMonthDisabledByDisableUntil({ year: y - 1, month: 12, day: 31 }, disableUntil);
        dnm = this.utilService.isMonthDisabledByDisableSince({ year: y + 1, month: 1, day: 1 }, disableSince);
        if (!isSecondCalendar) {
            this.prevViewDisabled = y === minYear || dpm;
            this.nextViewDisabled = y === maxYear || dnm;
            this.prevDobViewDisabled = y === minYear || dpm;
            this.nextDobViewDisabled = y === maxYear || dnm;
        }
        else {
            this.prevViewDisabled_range = y === minYear || dpm;
            this.nextViewDisabled_range = y === maxYear || dnm;
            this.prevDobViewDisabled_range = y === minYear || dpm;
            this.nextDobViewDisabled_range = y === maxYear || dnm;
        }
    }
    /**
     * @param {?} yp
     * @param {?} yn
     * @param {?} isSecondCalendar
     * @return {?}
     */
    setYearViewHeaderBtnDisabledState(yp, yn, isSecondCalendar) {
        /** @type {?} */
        let dpy = false;
        /** @type {?} */
        let dny = false;
        const { disableUntil, disableSince, minYear, maxYear } = this.opts;
        dpy = this.utilService.isMonthDisabledByDisableUntil({ year: yp - 1, month: 12, day: 31 }, disableUntil);
        dny = this.utilService.isMonthDisabledByDisableSince({ year: yn + 1, month: 1, day: 1 }, disableSince);
        if (!isSecondCalendar) {
            this.prevViewDisabled = yp <= minYear || dpy;
            this.nextViewDisabled = yn >= maxYear || dny;
            this.prevDobViewDisabled = yp <= minYear || dpy;
            this.nextDobViewDisabled = yn >= maxYear || dny;
        }
        else {
            this.prevViewDisabled_range = yp <= minYear || dpy;
            this.nextViewDisabled_range = yn >= maxYear || dny;
            this.prevDobViewDisabled_range = yp <= minYear || dpy;
            this.nextDobViewDisabled_range = yn >= maxYear || dny;
        }
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onContainerClick(event) {
        event.stopPropagation();
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onClickTimeBtn(event) {
        event.stopPropagation();
        if (this.opts.dateRange) {
            /** @type {?} */
            const beginIsInitializedDate = this.utilService.isInitializedDate(this.selectedDateRange.begin);
            /** @type {?} */
            const endIsInitializedDate = this.utilService.isInitializedDate(this.selectedDateRange.end);
            /** @type {?} */
            const now = new Date();
            if (!beginIsInitializedDate || !endIsInitializedDate) {
                // 直接点击确定显示本月和下月
                if (!beginIsInitializedDate) {
                    this.selectedDateRange.begin = { year: now.getFullYear(), month: now.getMonth() + 1, day: now.getDate() };
                }
                /** @type {?} */
                let endYear = now.getFullYear();
                /** @type {?} */
                let endmonth = now.getMonth() + 1;
                if (endmonth >= 12) {
                    endYear = endYear + 1;
                    endmonth = 1;
                }
                // else {
                //     endmonth = endmonth + this.opts.monthRangeValue;
                // }
                this.selectedDateRange.end = Object.assign({}, this.selectedDateRange.begin);
                // this.selectedDateRange.end = { year: endYear, month: endmonth, day: now.getDate() };
                // 点击selectTime之前给dateRange赋两个时间值
                this.timeVlaue = this.getTimeStr(now);
                this.timeVlaue_range = this.getTimeStr(now);
            }
            if (!this.timeVlaue_range) {
                this.timeVlaue_range = this.getTimeStr(now);
            }
        }
        else {
            if (!this.utilService.isInitializedDate(this.selectedDate)) {
                /** @type {?} */
                const now = new Date();
                // 点击selectTime之前赋值
                this.timeVlaue = this.getTimeStr(now);
                this.selectedDate = { year: now.getFullYear(), month: now.getMonth() + 1, day: now.getDate() };
            }
        }
        if (!this.timeVlaue) {
            /** @type {?} */
            const now = new Date();
            // 点击selectTime之前赋值
            this.timeVlaue = this.getTimeStr(now);
            if (!this.utilService.isInitializedDate(this.selectedDate)) {
                this.selectedDate = { year: now.getFullYear(), month: now.getMonth() + 1, day: now.getDate() };
            }
        }
        if (this.selectYear) {
            this.selectYear = false;
        }
        if (this.selectMonth) {
            this.selectMonth = false;
        }
        if (this.selectYear_range) {
            this.selectYear_range = false;
        }
        if (this.selectMonth_range) {
            this.selectMonth_range = false;
        }
        this.selectTime = !this.selectTime;
        this.cdr.detectChanges();
    }
    /**
     * @private
     * @param {?} isDateRange
     * @return {?}
     */
    getTimeValue(isDateRange) {
        /** @type {?} */
        const t = { start: null, end: null };
        if (this.timeVlaue) {
            /** @type {?} */
            const timeArr = this.timeVlaue.replace('时', ':').replace('分', ':').replace('秒', '').split(':');
            if (timeArr.length >= 2) {
                t.start = {
                    hour: timeArr[0],
                    minute: timeArr[1],
                    second: timeArr[2] ? timeArr[2] : 0
                };
            }
        }
        else {
            /** @type {?} */
            const nowDate = new Date();
            /** @type {?} */
            const hour = nowDate.getHours();
            /** @type {?} */
            const minute = nowDate.getMinutes();
            /** @type {?} */
            const second = nowDate.getSeconds();
            if (this.opts.dateRange) {
                t.start = { hour: 0, minute: 0, second: 0 };
            }
            else {
                t.start = { hour, minute, second };
            }
        }
        if (isDateRange) {
            if (this.timeVlaue_range) {
                /** @type {?} */
                const timeArr_range = this.timeVlaue_range.replace('时', ':').replace('分', ':').replace('秒', '').split(':');
                if (timeArr_range.length >= 2) {
                    t.end = {
                        hour: timeArr_range[0],
                        minute: timeArr_range[1],
                        second: timeArr_range[2] ? timeArr_range[2] : 0
                    };
                }
            }
            else {
                /** @type {?} */
                const hour = 23;
                /** @type {?} */
                const minute = 59;
                /** @type {?} */
                const second = 59;
                t.end = { hour, minute, second };
            }
        }
        return t;
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onClickOkBtn(event) {
        event.stopPropagation();
        /** @type {?} */
        let timeObj = null;
        /** @type {?} */
        let timeObj_range = null;
        /** @type {?} */
        let selectedDate = null;
        /** @type {?} */
        let selectedDate_range = null;
        if (this.opts.showTime) {
            const { start, end } = this.getTimeValue(this.opts.dateRange);
            timeObj = start;
            timeObj_range = end;
        }
        const { dateFormat, monthLabels, dateRangeDatesDelimiter, closeSelectorOnDateSelect, returnFormat } = this.opts;
        if (!this.opts.dateRange) {
            selectedDate = Object.assign({}, this.initializedDate(this.selectedDate), timeObj);
            /** @type {?} */
            const isInDisableRange = this.utilService.isDisabledDate(selectedDate, this.opts);
            /** @type {?} */
            const earlier = this.utilService.isDateSameOrEarlier(selectedDate, this.opts.disableUntil);
            selectedDate = !isInDisableRange
                ? selectedDate
                : Object.assign({}, selectedDate, (earlier ? this.opts.disableUntil : this.opts.disableSince));
        }
        else {
            /** @type {?} */
            const begin = Object.assign({}, this.initializedDate(this.selectedDateRange.begin), timeObj);
            /** @type {?} */
            const end = Object.assign({}, this.initializedDate(this.selectedDateRange.end, begin), timeObj_range);
            selectedDate_range = { begin, end };
        }
        /** @type {?} */
        const dateModel = this.utilService.getDateModel(selectedDate, selectedDate_range, dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat);
        this.dateChanged(dateModel, closeSelectorOnDateSelect);
    }
    /**
     * @param {?} date
     * @param {?=} otherDate
     * @return {?}
     */
    initializedDate(date, otherDate = { year: 0, month: 0, day: 0 }) {
        /** @type {?} */
        const daysInMonth = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
        if (!this.utilService.isInitializedDate(date) && !this.utilService.isInitializedDate(otherDate)) {
            /** @type {?} */
            const year = new Date().getFullYear();
            /** @type {?} */
            const month = new Date().getMonth() + 1;
            /** @type {?} */
            const day = new Date().getDate();
            return this.utilService.isDisabledDate({ year, month, day }, this.opts) ? this.opts.disableUntil : { year, month, day };
        }
        else if (!this.utilService.isInitializedDate(date)) {
            /** @type {?} */
            const year = otherDate.month + 1 > 12 ? otherDate.year + 1 : otherDate.year;
            /** @type {?} */
            let month = otherDate.month + 1 > 12 ? 1 : otherDate.month + this.opts.monthRangeValue;
            if (!date.month) {
                month = otherDate.month;
            }
            /** @type {?} */
            const day = otherDate.day < 1 || otherDate.day > daysInMonth[month - 1] ? 1 : otherDate.day;
            return this.utilService.isDisabledDate({ year, month, day }, this.opts) ? this.opts.disableSince : { year, month, day };
        }
        return date;
    }
    /**
     * @param {?} date
     * @return {?}
     */
    setTime(date) {
        const { dateFormat, monthLabels, dateRangeDatesDelimiter, closeSelectorOnDateSelect, returnFormat } = this.opts;
        if (date instanceof Date) {
            if (this.opts.showType !== 4 && !this.opts.dateRange) {
                /** @type {?} */
                let targetDate;
                if (this.opts.showTime) {
                    targetDate = {
                        year: date.getFullYear(),
                        month: date.getMonth() + 1,
                        day: date.getDate(),
                        hour: date.getHours(),
                        minute: date.getMinutes(),
                        second: date.getSeconds()
                    };
                }
                else {
                    targetDate = { year: date.getFullYear(), month: date.getMonth() + 1, day: date.getDate() };
                }
                /** @type {?} */
                const dateModel = this.utilService.getDateModel(targetDate, null, dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat);
                this.dateChanged(dateModel, closeSelectorOnDateSelect);
            }
            else {
                // 启用周选择时  快捷按钮参数为单个日期
                /** @type {?} */
                const dateModel = this.utilService.getDateModel(null, this.utilService.getNowWeekTime(date), dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat);
                this.dateChanged(dateModel, closeSelectorOnDateSelect);
            }
        }
        else if (date instanceof Object && this.opts.dateRange) {
            /** @type {?} */
            let targetDateRange;
            const { begin, end } = date;
            if (!begin || !end) {
                return;
            }
            if (this.opts.showTime) {
                targetDateRange = {
                    begin: {
                        year: begin.getFullYear(),
                        month: begin.getMonth() + 1,
                        day: begin.getDate(),
                        hour: begin.getHours(),
                        minute: begin.getMinutes(),
                        second: begin.getSeconds()
                    },
                    end: {
                        year: end.getFullYear(),
                        month: end.getMonth() + 1,
                        day: end.getDate(),
                        hour: end.getHours(),
                        minute: end.getMinutes(),
                        second: end.getSeconds()
                    }
                };
            }
            else {
                targetDateRange = {
                    begin: { year: begin.getFullYear(), month: begin.getMonth() + 1, day: begin.getDate() },
                    end: { year: end.getFullYear(), month: end.getMonth() + 1, day: end.getDate() }
                };
            }
            /** @type {?} */
            const dateModel = this.utilService.getDateModel(null, targetDateRange, dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat);
            this.dateChanged(dateModel, closeSelectorOnDateSelect);
        }
        else {
            // console.warn('参数必须符合要求！');
        }
    }
}
CalendarComponent.decorators = [
    { type: Component, args: [{
                selector: 'farris-datepicker-calendar',
                template: "<div class=\"f-datepicker-container\" #selectorEl\r\n    [ngStyle]=\"{\r\n        top: selectorPos.top + 'px',\r\n        left: selectorPos.left + 'px',\r\n        width: getWidth()\r\n    }\"\r\n    (keyup)=\"onCloseSelector($event)\"\r\n    tabindex=\"0\"\r\n    [ngClass]=\"'container-position-' + selectorPos.position\"\r\n    (click)=\"onContainerClick($event)\"\r\n>\r\n    <lib-selection-sidebar *ngIf=\"opts.shortcuts[0]\" [opts]=\"opts\" (setTime)=\"setTime($event)\"></lib-selection-sidebar>\r\n    <div class=\"f-datepicker-content\" [ngStyle]=\"{'margin-left': opts.shortcuts[0] ? '100px' : 0}\">\r\n        <lib-selection-bar\r\n            [opts]=\"opts\"\r\n            [years]=\"years\"\r\n            [visibleMonth]=\"visibleMonth\"\r\n            [selectMonth]=\"selectMonth\"\r\n            [selectYear]=\"selectYear\"\r\n            [prevViewDisabled]=\"prevViewDisabled\"\r\n            [nextViewDisabled]=\"nextViewDisabled\"\r\n            [prevDobViewDisabled]=\"prevDobViewDisabled\"\r\n            [nextDobViewDisabled]=\"nextDobViewDisabled\"\r\n            (prevNavigateBtnClicked)=\"onPrevNavigateBtnClicked($event)\"\r\n            (nextNavigateBtnClicked)=\"onNextNavigateBtnClicked($event)\"\r\n            (monthViewBtnClicked)=\"onMonthViewBtnClicked()\"\r\n            (yearViewBtnClicked)=\"onYearViewBtnClicked()\"\r\n        ></lib-selection-bar>\r\n\r\n        <lib-day-view\r\n            *ngIf=\"!selectMonth && !selectYear && !selectTime\"\r\n            [opts]=\"opts\"\r\n            [dates]=\"dates\"\r\n            [weekDays]=\"weekDays\"\r\n            [selectedDate]=\"selectedDate\"\r\n            [selectedDateRange]=\"selectedDateRange\"\r\n            [selectedWeek]=\"selectedWeek\"\r\n            (dayCellClicked)=\"onDayCellClicked($event)\"\r\n            (dayCellKeyDown)=\"onDayCellKeyDown($event)\"\r\n            (onMouseEnter)=\"onDayCellMouseEnter($event)\"\r\n            (onMouseLeave)=\"onDayCellMouseLeave($event)\"\r\n            (weekClicked)=\"onWeekClicked($event)\"\r\n        ></lib-day-view>\r\n        <lib-month-view\r\n            *ngIf=\"selectMonth\"\r\n            [opts]=\"opts\"\r\n            [months]=\"months\"\r\n            [selectedDate]=\"selectedDate\"\r\n            [selectedDateRange]=\"selectedDateRange\"\r\n            (monthCellClicked)=\"onMonthCellClicked($event, false)\"\r\n            (monthCellKeyDown)=\"onMonthCellKeyDown($event)\"\r\n            (onMouseEnter)=\"onMonthCellMouseEnter($event, false)\"\r\n            (onMouseLeave)=\"onMonthCellMouseLeave($event)\"\r\n        ></lib-month-view>\r\n\r\n        <lib-year-view\r\n            *ngIf=\"selectYear\"\r\n            [opts]=\"opts\"\r\n            [years]=\"years\"\r\n            [selectedDate]=\"selectedDate\"\r\n            [selectedDateRange]=\"selectedDateRange\"\r\n            [prevViewDisabled]=\"prevViewDisabled\"\r\n            [nextViewDisabled]=\"nextViewDisabled\"\r\n            (yearCellClicked)=\"onYearCellClicked($event)\"\r\n            (yearCellKeyDown)=\"onYearCellKeyDown($event)\"\r\n            (prevCellClicked)=\"onPrevNavigateBtnClicked()\"\r\n            (nextCellClicked)=\"onNextNavigateBtnClicked()\"\r\n            (onMouseEnter)=\"onYearCellMouseEnter($event)\"\r\n            (onMouseLeave)=\"onYearCellMouseLeave($event)\"\r\n        ></lib-year-view>\r\n        <time-picker-panel\r\n            *ngIf=\"selectTime\"\r\n            [(ngModel)]=\"timeVlaue\"\r\n            [opened]=\"true\"\r\n            [inDatePicker]=\"true\"\r\n            [disabledHours]=\"disabledHours\"\r\n            [disabledMinutes]=\"disabledMinutes\"\r\n            [disabledSeconds]=\"disabledSeconds\"\r\n            [format]=\"opts.timeFormat\"\r\n        >\r\n        </time-picker-panel>\r\n        <!-- <div class=\"f-datepicker-commitBtn-wrapper\" *ngIf=\"opts.showTime\">\r\n            <button (click)=\"selectTime=!selectTime\" class=\"f-datepicker-commitBtn\">\r\n                {{ selectTime? '\u9009\u62E9\u65E5\u671F' : '\u9009\u62E9\u65F6\u95F4' }}\r\n            </button>\r\n            <button (click)=\"onClickOk()\" class=\"f-datepicker-commitBtn\">\r\n                OK\r\n            </button>\r\n        </div> -->\r\n    </div>\r\n    <div class=\"f-datepicker-content\" *ngIf=\"opts.dateRange && opts.showType !== 4\">\r\n        <lib-selection-bar\r\n            [opts]=\"opts\"\r\n            [years]=\"years_range\"\r\n            [visibleMonth]=\"visibleMonth_range\"\r\n            [selectMonth]=\"selectMonth_range\"\r\n            [selectYear]=\"selectYear_range\"\r\n            [prevViewDisabled]=\"prevViewDisabled_range\"\r\n            [nextViewDisabled]=\"nextViewDisabled_range\"\r\n            [prevDobViewDisabled]=\"prevDobViewDisabled_range\"\r\n            [nextDobViewDisabled]=\"nextDobViewDisabled_range\"\r\n            (prevNavigateBtnClicked)=\"onPrevNavigateBtnClicked($event, true)\"\r\n            (nextNavigateBtnClicked)=\"onNextNavigateBtnClicked($event, true)\"\r\n            (monthViewBtnClicked)=\"onMonthViewBtnClicked(true)\"\r\n            (yearViewBtnClicked)=\"onYearViewBtnClicked(true)\"\r\n        ></lib-selection-bar>\r\n\r\n        <lib-day-view\r\n            *ngIf=\"!selectMonth_range && !selectYear_range && !selectTime\"\r\n            [opts]=\"opts\"\r\n            [dates]=\"dates_range\"\r\n            [weekDays]=\"weekDays\"\r\n            [selectedDate]=\"selectedDate\"\r\n            [selectedDateRange]=\"selectedDateRange\"\r\n            (dayCellClicked)=\"onDayCellClicked($event, true)\"\r\n            (dayCellKeyDown)=\"onDayCellKeyDown($event)\"\r\n            (onMouseEnter)=\"onDayCellMouseEnter($event, true)\"\r\n            (onMouseLeave)=\"onDayCellMouseLeave(true)\"\r\n        ></lib-day-view>\r\n        <lib-month-view\r\n            *ngIf=\"selectMonth_range\"\r\n            [opts]=\"opts\"\r\n            [months]=\"months_range\"\r\n            [selectedDate]=\"selectedDate\"\r\n            [selectedDateRange]=\"selectedDateRange\"\r\n            (monthCellClicked)=\"onMonthCellClicked($event, true)\"\r\n            (monthCellKeyDown)=\"onMonthCellKeyDown($event)\"\r\n            (onMouseEnter)=\"onMonthCellMouseEnter($event, true)\"\r\n            (onMouseLeave)=\"onMonthCellMouseLeave(true)\"\r\n        ></lib-month-view>\r\n\r\n        <lib-year-view\r\n            *ngIf=\"selectYear_range\"\r\n            [opts]=\"opts\"\r\n            [years]=\"years_range\"\r\n            [selectedDate]=\"selectedDate\"\r\n            [selectedDateRange]=\"selectedDateRange\"\r\n            [prevViewDisabled]=\"prevViewDisabled\"\r\n            [nextViewDisabled]=\"nextViewDisabled\"\r\n            (yearCellClicked)=\"onYearCellClicked($event, true)\"\r\n            (yearCellKeyDown)=\"onYearCellKeyDown($event)\"\r\n            (prevCellClicked)=\"onPrevNavigateBtnClicked($event, true)\"\r\n            (nextCellClicked)=\"onNextNavigateBtnClicked($event, true)\"\r\n            (onMouseEnter)=\"onYearCellMouseEnter($event, true)\"\r\n            (onMouseLeave)=\"onYearCellMouseLeave(true)\"\r\n        ></lib-year-view>\r\n        <time-picker-panel\r\n            *ngIf=\"selectTime\"\r\n            [(ngModel)]=\"timeVlaue_range\"\r\n            [opened]=\"true\"\r\n            [inDatePicker]=\"true\"\r\n            [disabledHours]=\"disabledHours\"\r\n            [disabledMinutes]=\"disabledMinutes\"\r\n            [disabledSeconds]=\"disabledSeconds\"\r\n            [format]=\"opts.timeFormat\"\r\n            #endTimeRef\r\n        >\r\n        </time-picker-panel>\r\n    </div>\r\n\r\n    <div class=\"f-datepicker-content\" *ngIf=\"!opts.dateRange && opts.viewType === 'together' && opts.showTime\" style=\"width: 190px;margin-left: 10px;\">\r\n\r\n        <div style=\"height: 41px;\r\n        border-bottom: 1px solid #E4E7EF;\r\n        text-align: center;\r\n        line-height: 40px;\r\n        font-size: 16px;\r\n        font-weight: 500;margin-bottom: 15px;\">{{ timeVlaue }}</div>\r\n\r\n        <time-picker-panel\r\n        [(ngModel)]=\"timeVlaue\"\r\n        [opened]=\"true\"\r\n        [inDatePicker]=\"true\"\r\n        [disabledHours]=\"disabledHours\"\r\n        [disabledMinutes]=\"disabledMinutes\"\r\n        [disabledSeconds]=\"disabledSeconds\"\r\n        [selectCurrentTimeWhenNull]=\"false\"\r\n        [format]=\"opts.timeFormat\"></time-picker-panel>\r\n    </div>\r\n\r\n    <div class=\"f-datepicker-commitBtn-wrapper\" *ngIf=\"opts.showTime\" style=\"justify-content: end;\">\r\n        <button (click)=\"onClickTimeBtn($event)\" class=\"btn btn-link f-datepicker-select-btn\" *ngIf=\"opts.viewType === 'replace'\">\r\n            {{\r\n                selectTime\r\n                    ? opts.dateBtnText\r\n                        ? opts.dateBtnText\r\n                        : \"Select Date\"\r\n                    : opts.timeBtnText\r\n                    ? opts.timeBtnText\r\n                    : \"Select Time\"\r\n            }}\r\n        </button>\r\n        <button (click)=\"onClickOkBtn($event)\" class=\"btn btn-primary f-datepicker-makesure-btn\">\r\n            {{ opts.commitBtnText ? opts.commitBtnText : \"OK\" }}\r\n        </button>\r\n    </div>\r\n    <span class=\"arrow\"></span>\r\n</div>\r\n",
                providers: [UtilService],
                encapsulation: ViewEncapsulation.None
            }] }
];
/** @nocollapse */
CalendarComponent.ctorParameters = () => [
    { type: Renderer2 },
    { type: ChangeDetectorRef },
    { type: UtilService }
];
CalendarComponent.propDecorators = {
    selectorEl: [{ type: ViewChild, args: ['selectorEl',] }],
    styleEl: [{ type: ViewChild, args: ['styleEl',] }],
    endTimeRef: [{ type: ViewChild, args: ['endTimeRef',] }],
    position: [{ type: HostBinding, args: ['style.position',] }]
};
if (false) {
    /** @type {?} */
    CalendarComponent.prototype.selectorEl;
    /** @type {?} */
    CalendarComponent.prototype.styleEl;
    /** @type {?} */
    CalendarComponent.prototype.endTimeRef;
    /** @type {?} */
    CalendarComponent.prototype.position;
    /** @type {?} */
    CalendarComponent.prototype.opts;
    /** @type {?} */
    CalendarComponent.prototype.visibleMonth;
    /** @type {?} */
    CalendarComponent.prototype.visibleMonth_range;
    /** @type {?} */
    CalendarComponent.prototype.selectedMonth;
    /** @type {?} */
    CalendarComponent.prototype.selectedMonth_range;
    /** @type {?} */
    CalendarComponent.prototype.selectedDate;
    /** @type {?} */
    CalendarComponent.prototype.selectedDateRange;
    /** @type {?} */
    CalendarComponent.prototype.selectedWeek;
    /** @type {?} */
    CalendarComponent.prototype.weekDays;
    /** @type {?} */
    CalendarComponent.prototype.dates;
    /** @type {?} */
    CalendarComponent.prototype.dates_range;
    /** @type {?} */
    CalendarComponent.prototype.months;
    /** @type {?} */
    CalendarComponent.prototype.months_range;
    /** @type {?} */
    CalendarComponent.prototype.years;
    /** @type {?} */
    CalendarComponent.prototype.years_range;
    /** @type {?} */
    CalendarComponent.prototype.timeVlaue;
    /** @type {?} */
    CalendarComponent.prototype.timeVlaue_range;
    /** @type {?} */
    CalendarComponent.prototype.dayIdx;
    /** @type {?} */
    CalendarComponent.prototype.weekDayOpts;
    /** @type {?} */
    CalendarComponent.prototype.selectMonth;
    /** @type {?} */
    CalendarComponent.prototype.selectMonth_range;
    /** @type {?} */
    CalendarComponent.prototype.selectYear;
    /** @type {?} */
    CalendarComponent.prototype.selectYear_range;
    /** @type {?} */
    CalendarComponent.prototype.selectTime;
    /** @type {?} */
    CalendarComponent.prototype.dateChanged;
    /** @type {?} */
    CalendarComponent.prototype.calendarViewChanged;
    /** @type {?} */
    CalendarComponent.prototype.rangeDateSelection;
    /** @type {?} */
    CalendarComponent.prototype.closedByEsc;
    /** @type {?} */
    CalendarComponent.prototype.selectorPos;
    /** @type {?} */
    CalendarComponent.prototype.scrollDiff;
    /** @type {?} */
    CalendarComponent.prototype.prevViewDisabled;
    /** @type {?} */
    CalendarComponent.prototype.nextViewDisabled;
    /** @type {?} */
    CalendarComponent.prototype.prevDobViewDisabled;
    /** @type {?} */
    CalendarComponent.prototype.nextDobViewDisabled;
    /** @type {?} */
    CalendarComponent.prototype.prevViewDisabled_range;
    /** @type {?} */
    CalendarComponent.prototype.nextViewDisabled_range;
    /** @type {?} */
    CalendarComponent.prototype.prevDobViewDisabled_range;
    /** @type {?} */
    CalendarComponent.prototype.nextDobViewDisabled_range;
    /** @type {?} */
    CalendarComponent.prototype.disabledHours;
    /** @type {?} */
    CalendarComponent.prototype.disabledMinutes;
    /** @type {?} */
    CalendarComponent.prototype.disabledSeconds;
    /**
     * @type {?}
     * @private
     */
    CalendarComponent.prototype.renderer;
    /**
     * @type {?}
     * @private
     */
    CalendarComponent.prototype.cdr;
    /**
     * @type {?}
     * @private
     */
    CalendarComponent.prototype.utilService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FsZW5kYXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy91aS1kYXRlcGlja2VyLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvY2FsZW5kYXIvY2FsZW5kYXIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRSxpQkFBaUIsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLGlCQUFpQixFQUFFLFdBQVcsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQU0vSCxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFDeEQsT0FBTyxFQUFFLFdBQVcsRUFBRSxPQUFPLEVBQUUsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBQ3RGLE9BQU8sRUFDSCxHQUFHLEVBQUUsVUFBVSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLGNBQWMsRUFBRSxjQUFjLEVBQUUsZUFBZSxFQUFFLGVBQWUsRUFDMUYsY0FBYyxFQUFFLGNBQWMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsU0FBUyxFQUN4RSxNQUFNLDJCQUEyQixDQUFDO0FBQ25DLE9BQU8sRUFBRSx3QkFBd0IsRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBQ2xFLE9BQU8sRUFBRSxPQUFPLEVBQWEsTUFBTSxXQUFXLENBQUM7QUFDL0MsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLHVDQUF1QyxDQUFDO0FBT2pFLE1BQU0sT0FBTyxpQkFBaUI7Ozs7OztJQW9GMUIsWUFBb0IsUUFBbUIsRUFBVSxHQUFzQixFQUFVLFdBQXdCO1FBQXJGLGFBQVEsR0FBUixRQUFRLENBQVc7UUFBVSxRQUFHLEdBQUgsR0FBRyxDQUFtQjtRQUFVLGdCQUFXLEdBQVgsV0FBVyxDQUFhO1FBL0Ux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Qzs7SUFVbEMsMENBTUM7O0lBRUQsNENBTUM7O0lBRUQsNENBTUM7Ozs7O0lBR1cscUNBQTJCOzs7OztJQUFFLGdDQUE4Qjs7Ozs7SUFBRSx3Q0FBZ0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIEVsZW1lbnRSZWYsIFZpZXdFbmNhcHN1bGF0aW9uLCBWaWV3Q2hpbGQsIFJlbmRlcmVyMiwgQ2hhbmdlRGV0ZWN0b3JSZWYsIEhvc3RCaW5kaW5nIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7XHJcbiAgICBJTXlEYXRlLCBJTXlEYXRlUmFuZ2UsIElNeU1vbnRoLCBJTXlDYWxlbmRhckRheSwgSU15Q2FsZW5kYXJNb250aCwgSU15Q2FsZW5kYXJZZWFyLFxyXG4gICAgSU15V2VlaywgSU15T3B0aW9ucywgSU15U2VsZWN0b3JQb3NpdGlvbiwgSU15Q2FsZW5kYXJWaWV3Q2hhbmdlZCwgSU15UmFuZ2VEYXRlU2VsZWN0aW9uLCBJTXlEYXRlTW9kZWwsXHJcbiAgICBJTXlNb250aFJvd1xyXG59IGZyb20gJy4uLy4uL2ludGVyZmFjZXMvcHVibGljLWFwaSc7XHJcbmltcG9ydCB7IFV0aWxTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvcHVibGljLWFwaSc7XHJcbmltcG9ydCB7IERlZmF1bHRWaWV3LCBLZXlDb2RlLCBNb250aElkLCBSZXNldERhdGVUeXBlIH0gZnJvbSAnLi4vLi4vZW51bXMvcHVibGljLWFwaSc7XHJcbmltcG9ydCB7XHJcbiAgICBET1QsIFVOREVSX0xJTkUsIEQsIE0sIFksIERBVEVfUk9XX0NPVU5ULCBEQVRFX0NPTF9DT1VOVCwgTU9OVEhfUk9XX0NPVU5ULCBNT05USF9DT0xfQ09VTlQsXHJcbiAgICBZRUFSX1JPV19DT1VOVCwgWUVBUl9DT0xfQ09VTlQsIFNVLCBNTywgVFUsIFdFLCBUSCwgRlIsIFNBLCBFTVBUWV9TVFIsIFNUWUxFXHJcbn0gZnJvbSAnLi4vLi4vY29uc3RhbnRzL2NvbnN0YW50cyc7XHJcbmltcG9ydCB7IFRpbWVQaWNrZXJQYW5lbENvbXBvbmVudCB9IGZyb20gJ0BmYXJyaXMvdWktdGltZS1waWNrZXInO1xyXG5pbXBvcnQgeyBmbGF0dGVuLCBjbG9uZURlZXAgfSBmcm9tICdsb2Rhc2gtZXMnO1xyXG5pbXBvcnQgeyBWaWV3VHlwZSB9IGZyb20gJy4uLy4uL2ludGVyZmFjZXMvbXktb3B0aW9ucy5pbnRlcmZhY2UnO1xyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiAnZmFycmlzLWRhdGVwaWNrZXItY2FsZW5kYXInLFxyXG4gICAgdGVtcGxhdGVVcmw6ICcuL2NhbGVuZGFyLmNvbXBvbmVudC5odG1sJyxcclxuICAgIHByb3ZpZGVyczogW1V0aWxTZXJ2aWNlXSxcclxuICAgIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmVcclxufSlcclxuZXhwb3J0IGNsYXNzIENhbGVuZGFyQ29tcG9uZW50IHtcclxuICAgIEBWaWV3Q2hpbGQoJ3NlbGVjdG9yRWwnKSBzZWxlY3RvckVsOiBFbGVtZW50UmVmO1xyXG4gICAgQFZpZXdDaGlsZCgnc3R5bGVFbCcpIHN0eWxlRWw6IEVsZW1lbnRSZWY7XHJcbiAgICBAVmlld0NoaWxkKCdlbmRUaW1lUmVmJykgZW5kVGltZVJlZjogVGltZVBpY2tlclBhbmVsQ29tcG9uZW50O1xyXG5cclxuICAgIEBIb3N0QmluZGluZygnc3R5bGUucG9zaXRpb24nKSBwb3NpdGlvbiA9ICdzdGF0aWMnO1xyXG5cclxuICAgIG9wdHM6IElNeU9wdGlvbnM7XHJcbiAgICB2aXNpYmxlTW9udGg6IElNeU1vbnRoID0geyBtb250aFR4dDogRU1QVFlfU1RSLCBtb250aE5icjogMCwgeWVhcjogMCwgeWVhclR4dDogRU1QVFlfU1RSIH07XHJcbiAgICB2aXNpYmxlTW9udGhfcmFuZ2U6IElNeU1vbnRoID0geyBtb250aFR4dDogRU1QVFlfU1RSLCBtb250aE5icjogMCwgeWVhcjogMCwgeWVhclR4dDogRU1QVFlfU1RSIH07XHJcbiAgICBzZWxlY3RlZE1vbnRoOiBJTXlNb250aCA9IHsgbW9udGhOYnI6IDAsIHllYXI6IDAgfTtcclxuICAgIHNlbGVjdGVkTW9udGhfcmFuZ2U6IElNeU1vbnRoID0geyBtb250aE5icjogMCwgeWVhcjogMCB9O1xyXG4gICAgc2VsZWN0ZWREYXRlOiBJTXlEYXRlID0geyB5ZWFyOiAwLCBtb250aDogMCwgZGF5OiAwIH07XHJcbiAgICBzZWxlY3RlZERhdGVSYW5nZTogSU15RGF0ZVJhbmdlID0geyBiZWdpbjogeyB5ZWFyOiAwLCBtb250aDogMCwgZGF5OiAwIH0sIGVuZDogeyB5ZWFyOiAwLCBtb250aDogMCwgZGF5OiAwIH0gfTtcclxuICAgIHNlbGVjdGVkV2VlazogSU15V2VlayA9IHsgd2Vla05icjogMCwgeWVhcjogMCB9O1xyXG4gICAgd2Vla0RheXM6IEFycmF5PHN0cmluZz4gPSBbXTtcclxuICAgIGRhdGVzOiBBcnJheTxJTXlXZWVrPiA9IFtdO1xyXG4gICAgZGF0ZXNfcmFuZ2U6IEFycmF5PElNeVdlZWs+ID0gW107XHJcbiAgICBtb250aHM6IEFycmF5PElNeU1vbnRoUm93PiA9IFtdO1xyXG4gICAgbW9udGhzX3JhbmdlOiBBcnJheTxJTXlNb250aFJvdz4gPSBbXTtcclxuICAgIHllYXJzOiBBcnJheTxBcnJheTxJTXlDYWxlbmRhclllYXI+PiA9IFtdO1xyXG4gICAgeWVhcnNfcmFuZ2U6IEFycmF5PEFycmF5PElNeUNhbGVuZGFyWWVhcj4+ID0gW107XHJcbiAgICB0aW1lVmxhdWU6IHN0cmluZztcclxuICAgIHRpbWVWbGF1ZV9yYW5nZTogc3RyaW5nO1xyXG5cclxuICAgIGRheUlkeCA9IDA7XHJcbiAgICB3ZWVrRGF5T3B0czogQXJyYXk8c3RyaW5nPiA9IFtTVSwgTU8sIFRVLCBXRSwgVEgsIEZSLCBTQV07XHJcblxyXG4gICAgc2VsZWN0TW9udGggPSBmYWxzZTtcclxuICAgIHNlbGVjdE1vbnRoX3JhbmdlID0gZmFsc2U7XHJcbiAgICBzZWxlY3RZZWFyID0gZmFsc2U7XHJcbiAgICBzZWxlY3RZZWFyX3JhbmdlID0gZmFsc2U7XHJcbiAgICBzZWxlY3RUaW1lID0gZmFsc2U7XHJcblxyXG4gICAgZGF0ZUNoYW5nZWQ6IChkbTogSU15RGF0ZU1vZGVsLCBjbG9zZTogYm9vbGVhbikgPT4gdm9pZDtcclxuICAgIGNhbGVuZGFyVmlld0NoYW5nZWQ6IChjdmM6IElNeUNhbGVuZGFyVmlld0NoYW5nZWQpID0+IHZvaWQ7XHJcbiAgICByYW5nZURhdGVTZWxlY3Rpb246IChyZHM6IElNeVJhbmdlRGF0ZVNlbGVjdGlvbikgPT4gdm9pZDtcclxuICAgIGNsb3NlZEJ5RXNjOiAoKSA9PiB2b2lkO1xyXG4gICAgc2VsZWN0b3JQb3M6IElNeVNlbGVjdG9yUG9zaXRpb24gPSBudWxsO1xyXG4gICAgc2Nyb2xsRGlmZiA9IDA7XHJcblxyXG4gICAgcHJldlZpZXdEaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgbmV4dFZpZXdEaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgcHJldkRvYlZpZXdEaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgbmV4dERvYlZpZXdEaXNhYmxlZCA9IGZhbHNlO1xyXG5cclxuICAgIHByZXZWaWV3RGlzYWJsZWRfcmFuZ2UgPSBmYWxzZTtcclxuICAgIG5leHRWaWV3RGlzYWJsZWRfcmFuZ2UgPSBmYWxzZTtcclxuICAgIHByZXZEb2JWaWV3RGlzYWJsZWRfcmFuZ2UgPSBmYWxzZTtcclxuICAgIG5leHREb2JWaWV3RGlzYWJsZWRfcmFuZ2UgPSBmYWxzZTtcclxuXHJcblxyXG4gICAgZ2V0VGltZVN0cihkYXRlOiBEYXRlKTogc3RyaW5nIHtcclxuICAgICAgICBjb25zdCBob3VyID0gdGhpcy51dGlsU2VydmljZS5wcmVaZXJvKGRhdGUuZ2V0SG91cnMoKSk7XHJcbiAgICAgICAgY29uc3QgbWludXRlID0gdGhpcy51dGlsU2VydmljZS5wcmVaZXJvKGRhdGUuZ2V0TWludXRlcygpKTtcclxuICAgICAgICBjb25zdCBzZWNvbmQgPSB0aGlzLnV0aWxTZXJ2aWNlLnByZVplcm8oZGF0ZS5nZXRTZWNvbmRzKCkpO1xyXG4gICAgICAgIHJldHVybiBgJHtob3VyfToke21pbnV0ZX06JHtzZWNvbmR9YDtcclxuICAgIH1cclxuICAgIC8vIOemgeeUqOaXpeacn+aXtumXtOaOp+S7tuS4reeahOaXtumXtOauteeahOWwj+aXtlxyXG4gICAgZGlzYWJsZWRIb3VycyA9ICgpID0+IHtcclxuICAgICAgICBjb25zdCBtaW4gPSB0aGlzLm9wdHMuZGlzYWJsZVVudGlsO1xyXG4gICAgICAgIGNvbnN0IG1heCA9IHRoaXMub3B0cy5kaXNhYmxlU2luY2U7XHJcbiAgICAgICAgY29uc3QgY3VycmVudERhdGUgPSB0aGlzLm9wdHMuZGF0ZVJhbmdlID8gdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbiA6IHRoaXMuc2VsZWN0ZWREYXRlO1xyXG4gICAgICAgIGNvbnN0IHJlcyA9IHRoaXMudXRpbFNlcnZpY2UuZGlzYWJsZWRIb3VycyhtaW4sIG1heCwgY3VycmVudERhdGUpO1xyXG4gICAgICAgIHJldHVybiByZXM7XHJcbiAgICB9XHJcbiAgICAvLyDnpoHnlKjml6XmnJ/ml7bpl7Tmjqfku7bkuK3nmoTml7bpl7TmrrXnmoTliIbpkp9cclxuICAgIGRpc2FibGVkTWludXRlcyA9IChob3VyOiBudW1iZXIpID0+IHtcclxuICAgICAgICBjb25zdCBtaW4gPSB0aGlzLm9wdHMuZGlzYWJsZVVudGlsO1xyXG4gICAgICAgIGNvbnN0IG1heCA9IHRoaXMub3B0cy5kaXNhYmxlU2luY2U7XHJcbiAgICAgICAgY29uc3QgY3VycmVudERhdGUgPSB0aGlzLm9wdHMuZGF0ZVJhbmdlID8gdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbiA6IHRoaXMuc2VsZWN0ZWREYXRlO1xyXG4gICAgICAgIGNvbnN0IHJlcyA9IHRoaXMudXRpbFNlcnZpY2UuZGlzYWJsZWRNaW51dGVzKG1pbiwgbWF4LCBob3VyLCBjdXJyZW50RGF0ZSk7XHJcbiAgICAgICAgcmV0dXJuIHJlcztcclxuICAgIH1cclxuICAgIC8vIOemgeeUqOaXpeacn+aXtumXtOaOp+S7tuS4reeahOaXtumXtOauteeahOenklxyXG4gICAgZGlzYWJsZWRTZWNvbmRzID0gKGhvdXI6IG51bWJlciwgbWludXRlOiBudW1iZXIpID0+IHtcclxuICAgICAgICBjb25zdCBtaW4gPSB0aGlzLm9wdHMuZGlzYWJsZVVudGlsO1xyXG4gICAgICAgIGNvbnN0IG1heCA9IHRoaXMub3B0cy5kaXNhYmxlU2luY2U7XHJcbiAgICAgICAgY29uc3QgY3VycmVudERhdGUgPSB0aGlzLm9wdHMuZGF0ZVJhbmdlID8gdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbiA6IHRoaXMuc2VsZWN0ZWREYXRlO1xyXG4gICAgICAgIGNvbnN0IHJlcyA9IHRoaXMudXRpbFNlcnZpY2UuZGlzYWJsZWRTZWNvbmRzKG1pbiwgbWF4LCBob3VyLCBtaW51dGUsIGN1cnJlbnREYXRlKTtcclxuICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlbmRlcmVyOiBSZW5kZXJlcjIsIHByaXZhdGUgY2RyOiBDaGFuZ2VEZXRlY3RvclJlZiwgcHJpdmF0ZSB1dGlsU2VydmljZTogVXRpbFNlcnZpY2UpIHsgfVxyXG5cclxuICAgIGluaXRpYWxpemUoXHJcbiAgICAgICAgb3B0czogSU15T3B0aW9ucyxcclxuICAgICAgICBkZWZhdWx0TW9udGg6IHN0cmluZyxcclxuICAgICAgICBzZWxlY3RvclBvczogSU15U2VsZWN0b3JQb3NpdGlvbixcclxuICAgICAgICBpbnB1dFZhbHVlOiBzdHJpbmcsXHJcbiAgICAgICAgZGM6IChkbTogSU15RGF0ZU1vZGVsLCBjbG9zZTogYm9vbGVhbikgPT4gdm9pZCxcclxuICAgICAgICBjdmM6IChjdmM6IElNeUNhbGVuZGFyVmlld0NoYW5nZWQpID0+IHZvaWQsXHJcbiAgICAgICAgcmRzOiAocmRzOiBJTXlSYW5nZURhdGVTZWxlY3Rpb24pID0+IHZvaWQsXHJcbiAgICAgICAgY2JlOiAoKSA9PiB2b2lkXHJcbiAgICApOiB2b2lkIHtcclxuICAgICAgICB0aGlzLm9wdHMgPSBvcHRzO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0b3JQb3MgPSBzZWxlY3RvclBvcztcclxuICAgICAgICB0aGlzLndlZWtEYXlzLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgY29uc3QgeyBkZWZhdWx0VmlldywgZGF0ZVJhbmdlLCBmaXJzdERheU9mV2VlaywgZGF5TGFiZWxzLCBzdHlsZXNEYXRhLCB5ZWFyVHh0IH0gPSB0aGlzLm9wdHM7XHJcbiAgICAgICAgdGhpcy52aXNpYmxlTW9udGgueWVhclR4dCA9IHllYXJUeHQ7XHJcbiAgICAgICAgdGhpcy52aXNpYmxlTW9udGhfcmFuZ2UueWVhclR4dCA9IHllYXJUeHQ7XHJcbiAgICAgICAgLy8gaWYgKHN0eWxlc0RhdGEuc3R5bGVzLmxlbmd0aCkge1xyXG4gICAgICAgIC8vICAgICBjb25zdCBzdHlsZUVsVGVtcDogYW55ID0gdGhpcy5yZW5kZXJlci5jcmVhdGVFbGVtZW50KFNUWUxFKTtcclxuICAgICAgICAvLyAgICAgdGhpcy5yZW5kZXJlci5hcHBlbmRDaGlsZChzdHlsZUVsVGVtcCwgdGhpcy5yZW5kZXJlci5jcmVhdGVUZXh0KHN0eWxlc0RhdGEuc3R5bGVzKSk7XHJcbiAgICAgICAgLy8gICAgIHRoaXMucmVuZGVyZXIuYXBwZW5kQ2hpbGQodGhpcy5zdHlsZUVsLm5hdGl2ZUVsZW1lbnQsIHN0eWxlRWxUZW1wKTtcclxuICAgICAgICAvLyB9XHJcblxyXG4gICAgICAgIHRoaXMuZGF5SWR4ID0gdGhpcy53ZWVrRGF5T3B0cy5pbmRleE9mKGZpcnN0RGF5T2ZXZWVrKTtcclxuICAgICAgICBpZiAodGhpcy5kYXlJZHggIT09IC0xKSB7XHJcbiAgICAgICAgICAgIGxldCBpZHg6IG51bWJlciA9IHRoaXMuZGF5SWR4O1xyXG4gICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6cHJlZmVyLWZvci1vZlxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMud2Vla0RheU9wdHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHRoaXMud2Vla0RheXMucHVzaChkYXlMYWJlbHNbdGhpcy53ZWVrRGF5T3B0c1tpZHhdXSk7XHJcbiAgICAgICAgICAgICAgICBpZHggPSB0aGlzLndlZWtEYXlPcHRzW2lkeF0gPT09IFNBID8gMCA6IGlkeCArIDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHRvZGF5OiBJTXlEYXRlID0gdGhpcy5nZXRUb2RheSgpO1xyXG4gICAgICAgIGNvbnN0IGlzSW5EaXNhYmxlUmFuZ2UgPSB0aGlzLnV0aWxTZXJ2aWNlLmlzRGlzYWJsZWREYXRlKHRvZGF5LCB0aGlzLm9wdHMpO1xyXG4gICAgICAgIHRvZGF5ID0gIWlzSW5EaXNhYmxlUmFuZ2UgPyB0b2RheSA6IHRoaXMudXRpbFNlcnZpY2UuZ2V0TmVhckRhdGUodG9kYXksIHRoaXMub3B0cy5kaXNhYmxlVW50aWwsIHRoaXMub3B0cy5kaXNhYmxlU2luY2UpO1xyXG5cclxuICAgICAgICBzd2l0Y2ggKGRlZmF1bHRWaWV3KSB7XHJcbiAgICAgICAgICAgIGNhc2UgRGVmYXVsdFZpZXcuTW9udGg6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkTW9udGggPSB7IG1vbnRoTmJyOiAwLCB5ZWFyOiB0b2RheS55ZWFyIH07XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkTW9udGhfcmFuZ2UgPSB7IG1vbnRoTmJyOiAwLCB5ZWFyOiB0b2RheS55ZWFyICsgMSB9O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgRGVmYXVsdFZpZXcuWWVhcjpcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRNb250aCA9IHsgbW9udGhOYnI6IDAsIHllYXI6IHRvZGF5LnllYXIgfTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRNb250aF9yYW5nZSA9IHsgbW9udGhOYnI6IDAsIHllYXI6IHRvZGF5LnllYXIgKyAxMCB9O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkTW9udGggPSB7IG1vbnRoTmJyOiB0b2RheS5tb250aCwgeWVhcjogdG9kYXkueWVhciB9O1xyXG4gICAgICAgICAgICAgICAgaWYgKHRvZGF5Lm1vbnRoID49IDEyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE1vbnRoX3JhbmdlID0geyBtb250aE5icjogMSwgeWVhcjogdG9kYXkueWVhciArIDEgfTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE1vbnRoX3JhbmdlID0geyBtb250aE5icjogdG9kYXkubW9udGggKyB0aGlzLm9wdHMubW9udGhSYW5nZVZhbHVlLCB5ZWFyOiB0b2RheS55ZWFyIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGRlZmF1bHRNb250aCAmJiBkZWZhdWx0TW9udGgubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRNb250aCA9IHRoaXMudXRpbFNlcnZpY2UucGFyc2VEZWZhdWx0TW9udGgoZGVmYXVsdE1vbnRoKTtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE1vbnRoX3JhbmdlID0gdGhpcy51dGlsU2VydmljZS5wYXJzZURlZmF1bHRNb250aChkZWZhdWx0TW9udGgpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZE1vbnRoX3JhbmdlLm1vbnRoTmJyID49IDEyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkTW9udGhfcmFuZ2UueWVhcisrO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE1vbnRoX3JhbmdlLm1vbnRoTmJyID0gMTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRNb250aF9yYW5nZS5tb250aE5iciA9IHRoaXMuc2VsZWN0ZWRNb250aF9yYW5nZS5tb250aE5iciArIHRoaXMub3B0cy5tb250aFJhbmdlVmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghZGF0ZVJhbmdlKSB7XHJcbiAgICAgICAgICAgIC8vIFNpbmdsZSBkYXRlIG1vZGVcclxuICAgICAgICAgICAgY29uc3QgZGF0ZTogSU15RGF0ZSA9IHRoaXMudXRpbFNlcnZpY2UuaXNEYXRlVmFsaWQoaW5wdXRWYWx1ZSwgdGhpcy5vcHRzLCB0cnVlKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMudXRpbFNlcnZpY2UuaXNJbml0aWFsaXplZERhdGUoZGF0ZSkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlID0gZGF0ZTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGhvdXIgPSB0aGlzLnV0aWxTZXJ2aWNlLnByZVplcm8oZGF0ZS5ob3VyKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1pbnV0ZSA9IHRoaXMudXRpbFNlcnZpY2UucHJlWmVybyhkYXRlLm1pbnV0ZSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZWNvbmQgPSB0aGlzLnV0aWxTZXJ2aWNlLnByZVplcm8oZGF0ZS5zZWNvbmQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy50aW1lVmxhdWUgPSBgJHtob3VyfToke21pbnV0ZX06JHtzZWNvbmR9YDtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRNb250aCA9IHsgbW9udGhOYnI6IGRhdGUubW9udGgsIHllYXI6IGRhdGUueWVhciB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gRGF0ZSByYW5nZSBtb2RlXHJcbiAgICAgICAgICAgIGNvbnN0IHsgYmVnaW4sIGVuZCB9ID0gdGhpcy51dGlsU2VydmljZS5pc0RhdGVWYWxpZERhdGVSYW5nZShpbnB1dFZhbHVlLCB0aGlzLm9wdHMpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy51dGlsU2VydmljZS5pc0luaXRpYWxpemVkRGF0ZShiZWdpbikgJiYgdGhpcy51dGlsU2VydmljZS5pc0luaXRpYWxpemVkRGF0ZShlbmQpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlID0geyBiZWdpbiwgZW5kIH07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBob3VyID0gdGhpcy51dGlsU2VydmljZS5wcmVaZXJvKGJlZ2luLmhvdXIpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWludXRlID0gdGhpcy51dGlsU2VydmljZS5wcmVaZXJvKGJlZ2luLm1pbnV0ZSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZWNvbmQgPSB0aGlzLnV0aWxTZXJ2aWNlLnByZVplcm8oYmVnaW4uc2Vjb25kKTtcclxuICAgICAgICAgICAgICAgIHRoaXMudGltZVZsYXVlID0gYCR7aG91cn06JHttaW51dGV9OiR7c2Vjb25kfWA7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBfaG91ciA9IHRoaXMudXRpbFNlcnZpY2UucHJlWmVybyhlbmQuaG91cik7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBfbWludXRlID0gdGhpcy51dGlsU2VydmljZS5wcmVaZXJvKGVuZC5taW51dGUpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgX3NlY29uZCA9IHRoaXMudXRpbFNlcnZpY2UucHJlWmVybyhlbmQuc2Vjb25kKTtcclxuICAgICAgICAgICAgICAgIHRoaXMudGltZVZsYXVlX3JhbmdlID0gYCR7X2hvdXJ9OiR7X21pbnV0ZX06JHtfc2Vjb25kfWA7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE1vbnRoID0geyBtb250aE5icjogYmVnaW4ubW9udGgsIHllYXI6IGJlZ2luLnllYXIgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoYmVnaW4ubW9udGggPT09IGVuZC5tb250aCAmJiBiZWdpbi55ZWFyID09PSBlbmQueWVhcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlbmQubW9udGggPj0gMTIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE1vbnRoX3JhbmdlID0geyBtb250aE5icjogMSwgeWVhcjogZW5kLnllYXIgKyAxIH07XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGVuZHllYXIgPSBlbmQueWVhcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlZmF1bHRWaWV3ID09PSBEZWZhdWx0Vmlldy5Nb250aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5keWVhciA9IGVuZHllYXIgKyAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkTW9udGhfcmFuZ2UgPSB7IG1vbnRoTmJyOiBlbmQubW9udGggKyB0aGlzLm9wdHMubW9udGhSYW5nZVZhbHVlLCB5ZWFyOiBlbmR5ZWFyIH07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGVmYXVsdFZpZXcgPT09IERlZmF1bHRWaWV3Lk1vbnRoICYmIGJlZ2luLnllYXIgPT09IGVuZC55ZWFyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRNb250aF9yYW5nZSA9IHsgbW9udGhOYnI6IGVuZC5tb250aCwgeWVhcjogZW5kLnllYXIgKyAxIH07XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE1vbnRoX3JhbmdlID0geyBtb250aE5icjogZW5kLm1vbnRoLCB5ZWFyOiBlbmQueWVhciB9O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnN0IHdlZWtOYnIgPVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXRpbFNlcnZpY2UuZ2V0V2Vla051bWJlcihiZWdpbikgPT09IHRoaXMudXRpbFNlcnZpY2UuZ2V0V2Vla051bWJlcihlbmQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy51dGlsU2VydmljZS5nZXRXZWVrTnVtYmVyKGJlZ2luKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IDA7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkV2VlayA9IHsgd2Vla05iciwgeWVhcjogYmVnaW4ueWVhciB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmRhdGVDaGFuZ2VkID0gZGM7XHJcbiAgICAgICAgdGhpcy5jYWxlbmRhclZpZXdDaGFuZ2VkID0gY3ZjO1xyXG4gICAgICAgIHRoaXMucmFuZ2VEYXRlU2VsZWN0aW9uID0gcmRzO1xyXG4gICAgICAgIHRoaXMuY2xvc2VkQnlFc2MgPSBjYmU7XHJcbiAgICAgICAgdGhpcy5zZXRDYWxlbmRhclZpc2libGVNb250aCgpO1xyXG5cclxuICAgICAgICBpZiAoZGVmYXVsdFZpZXcgPT09IERlZmF1bHRWaWV3Lk1vbnRoKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25Nb250aFZpZXdCdG5DbGlja2VkKCk7XHJcbiAgICAgICAgICAgIGlmIChkYXRlUmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25Nb250aFZpZXdCdG5DbGlja2VkKHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChkZWZhdWx0VmlldyA9PT0gRGVmYXVsdFZpZXcuWWVhcikge1xyXG4gICAgICAgICAgICB0aGlzLm9uWWVhclZpZXdCdG5DbGlja2VkKCk7XHJcbiAgICAgICAgICAgIGlmIChkYXRlUmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25ZZWFyVmlld0J0bkNsaWNrZWQodHJ1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVzZXREYXRlVmFsdWUodmFsdWU6IFJlc2V0RGF0ZVR5cGUpOiB2b2lkIHtcclxuICAgICAgICBpZiAodmFsdWUgPT09IFJlc2V0RGF0ZVR5cGUuc2luZ2xlRGF0ZSB8fCB2YWx1ZSA9PT0gUmVzZXREYXRlVHlwZS5ib3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlID0gdGhpcy51dGlsU2VydmljZS5yZXNldERhdGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHZhbHVlID09PSBSZXNldERhdGVUeXBlLmRhdGVSYW5nZSB8fCB2YWx1ZSA9PT0gUmVzZXREYXRlVHlwZS5ib3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4gPSB0aGlzLnV0aWxTZXJ2aWNlLnJlc2V0RGF0ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmVuZCA9IHRoaXMudXRpbFNlcnZpY2UucmVzZXREYXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlc2V0TW9udGhZZWFyU2VsZWN0KGlzU2Vjb25kQ2FsZW5kYXI/OiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCFpc1NlY29uZENhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0TW9udGggPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RZZWFyID0gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RNb250aF9yYW5nZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdFllYXJfcmFuZ2UgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25Nb250aFZpZXdCdG5DbGlja2VkKGlzU2Vjb25kQ2FsZW5kYXI/OiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RUaW1lID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKCFpc1NlY29uZENhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0TW9udGggPSAhdGhpcy5zZWxlY3RNb250aDtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RZZWFyID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdE1vbnRoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlTW9udGhzKGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy52aXNpYmxlTW9udGgueWVhciA9IHRoaXMuc2VsZWN0ZWRNb250aC55ZWFyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RNb250aF9yYW5nZSA9ICF0aGlzLnNlbGVjdE1vbnRoX3JhbmdlO1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdFllYXJfcmFuZ2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0TW9udGhfcmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVNb250aHMoaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZpc2libGVNb250aF9yYW5nZS55ZWFyID0gdGhpcy5zZWxlY3RlZE1vbnRoX3JhbmdlLnllYXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbk1vbnRoQ2VsbENsaWNrZWQoY2VsbDogSU15Q2FsZW5kYXJNb250aCwgaXNTZWNvbmRDYWxlbmRhcjogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgIGlmICghaXNTZWNvbmRDYWxlbmRhcikge1xyXG4gICAgICAgICAgICBjb25zdCB7IHllYXIsIG1vbnRoTmJyIH0gPSB0aGlzLnZpc2libGVNb250aDtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG1jOiBib29sZWFuID0gY2VsbC5uYnIgIT09IG1vbnRoTmJyO1xyXG4gICAgICAgICAgICB0aGlzLnZpc2libGVNb250aCA9IHtcclxuICAgICAgICAgICAgICAgIG1vbnRoVHh0OiB0aGlzLm9wdHMubW9udGhMYWJlbHNbY2VsbC5uYnJdLFxyXG4gICAgICAgICAgICAgICAgbW9udGhOYnI6IGNlbGwubmJyLFxyXG4gICAgICAgICAgICAgICAgeWVhcixcclxuICAgICAgICAgICAgICAgIHllYXJUeHQ6IHRoaXMub3B0cy55ZWFyVHh0XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRNb250aC55ZWFyID0gdGhpcy52aXNpYmxlTW9udGgueWVhcjtcclxuICAgICAgICAgICAgaWYgKHRoaXMub3B0cy5zaG93VHlwZSA9PT0gMikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50b1NlbGVjdE1vbnRoKHRoaXMudmlzaWJsZU1vbnRoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVDYWxlbmRhcihjZWxsLm5iciwgeWVhciwgbWMsIGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RNb250aCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgeyB5ZWFyLCBtb250aE5iciB9ID0gdGhpcy52aXNpYmxlTW9udGhfcmFuZ2U7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBtYzogYm9vbGVhbiA9IGNlbGwubmJyICE9PSBtb250aE5icjtcclxuICAgICAgICAgICAgdGhpcy52aXNpYmxlTW9udGhfcmFuZ2UgPSB7XHJcbiAgICAgICAgICAgICAgICBtb250aFR4dDogdGhpcy5vcHRzLm1vbnRoTGFiZWxzW2NlbGwubmJyXSxcclxuICAgICAgICAgICAgICAgIG1vbnRoTmJyOiBjZWxsLm5icixcclxuICAgICAgICAgICAgICAgIHllYXIsXHJcbiAgICAgICAgICAgICAgICB5ZWFyVHh0OiB0aGlzLm9wdHMueWVhclR4dFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkTW9udGhfcmFuZ2UueWVhciA9IHRoaXMudmlzaWJsZU1vbnRoX3JhbmdlLnllYXI7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdHMuc2hvd1R5cGUgPT09IDIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudG9TZWxlY3RNb250aCh0aGlzLnZpc2libGVNb250aF9yYW5nZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlQ2FsZW5kYXIoY2VsbC5uYnIsIHllYXIsIG1jLCBpc1NlY29uZENhbGVuZGFyKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0TW9udGhfcmFuZ2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbk1vbnRoQ2VsbEtleURvd24oY2VsbDogSU15Q2FsZW5kYXJNb250aCkge1xyXG4gICAgICAgIC8vIE1ha2UgcG9zc2libGUgdG8gbW92ZSBmb2N1cyBieSBhcnJvdyBrZXlzXHJcbiAgICAgICAgY29uc3QgeyBzb3VyY2VSb3csIHNvdXJjZUNvbCB9ID0gdGhpcy5nZXRTb3VyY2VSb3dBbmRDb2x1bW5Gcm9tRXZlbnQoZXZlbnQpO1xyXG4gICAgICAgIGNvbnN0IHsgbW92ZUZvY3VzLCB0YXJnZXRSb3csIHRhcmdldENvbCB9ID0gdGhpcy5nZXRUYXJnZXRGb2N1c1Jvd0FuZENvbHVtbihcclxuICAgICAgICAgICAgZXZlbnQsXHJcbiAgICAgICAgICAgIHNvdXJjZVJvdyxcclxuICAgICAgICAgICAgc291cmNlQ29sLFxyXG4gICAgICAgICAgICBNT05USF9ST1dfQ09VTlQsXHJcbiAgICAgICAgICAgIE1PTlRIX0NPTF9DT1VOVFxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGlmIChtb3ZlRm9jdXMpIHtcclxuICAgICAgICAgICAgdGhpcy5mb2N1c0NlbGxFbGVtZW50KE0sIHRhcmdldFJvdywgdGFyZ2V0Q29sKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25ZZWFyVmlld0J0bkNsaWNrZWQoaXNTZWNvbmRDYWxlbmRhcj86IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnNlbGVjdFRpbWUgPSBmYWxzZTtcclxuICAgICAgICBpZiAoIWlzU2Vjb25kQ2FsZW5kYXIpIHtcclxuICAgICAgICAgICAgdGhpcy52aXNpYmxlTW9udGgueWVhciA9IHRoaXMuc2VsZWN0ZWRNb250aC55ZWFyO1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuc2VsZWN0WWVhcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZVllYXJzKHRoaXMudmlzaWJsZU1vbnRoLnllYXIsIGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZUNhbGVuZGFyKHRoaXMudmlzaWJsZU1vbnRoLm1vbnRoTmJyLCB0aGlzLnZpc2libGVNb250aC55ZWFyLCBmYWxzZSwgaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0WWVhciA9IHRoaXMub3B0cy5zaG93VHlwZSA9PT0gMyA/IHRydWUgOiAhdGhpcy5zZWxlY3RZZWFyO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5vcHRzLnNob3dUeXBlID09PSAyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdE1vbnRoID0gIXRoaXMuc2VsZWN0TW9udGg7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdE1vbnRoID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gdGhpcy5zZWxlY3RZZWFyID0gIXRoaXMuc2VsZWN0WWVhcjtcclxuICAgICAgICAgICAgLy8gdGhpcy5zZWxlY3RNb250aCA9IGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudmlzaWJsZU1vbnRoX3JhbmdlLnllYXIgPSB0aGlzLnNlbGVjdGVkTW9udGhfcmFuZ2UueWVhcjtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLnNlbGVjdFllYXJfcmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVZZWFycyh0aGlzLnZpc2libGVNb250aF9yYW5nZS55ZWFyLCBpc1NlY29uZENhbGVuZGFyKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVDYWxlbmRhcih0aGlzLnZpc2libGVNb250aF9yYW5nZS5tb250aE5iciwgdGhpcy52aXNpYmxlTW9udGhfcmFuZ2UueWVhciwgZmFsc2UsIGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0WWVhcl9yYW5nZSA9IHRoaXMub3B0cy5zaG93VHlwZSA9PT0gMyA/IHRydWUgOiAhdGhpcy5zZWxlY3RZZWFyX3JhbmdlO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5vcHRzLnNob3dUeXBlID09PSAyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdE1vbnRoX3JhbmdlID0gIXRoaXMuc2VsZWN0TW9udGhfcmFuZ2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdE1vbnRoX3JhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uWWVhckNlbGxDbGlja2VkKGNlbGw6IElNeUNhbGVuZGFyWWVhciwgaXNTZWNvbmRDYWxlbmRhcj86IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICBpZiAoIWlzU2Vjb25kQ2FsZW5kYXIpIHtcclxuICAgICAgICAgICAgY29uc3QgeyB5ZWFyLCBtb250aE5iciwgbW9udGhUeHQgfSA9IHRoaXMudmlzaWJsZU1vbnRoO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgeWM6IGJvb2xlYW4gPSBjZWxsLnllYXIgIT09IHllYXI7XHJcbiAgICAgICAgICAgIHRoaXMudmlzaWJsZU1vbnRoID0geyBtb250aFR4dCwgbW9udGhOYnIsIHllYXI6IGNlbGwueWVhciwgeWVhclR4dDogdGhpcy5vcHRzLnllYXJUeHQgfTtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE1vbnRoLnllYXIgPSB0aGlzLnZpc2libGVNb250aC55ZWFyO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5vcHRzLnNob3dUeXBlID09PSAzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRvU2VsZWN0WWVhcih7IHllYXI6IHRoaXMudmlzaWJsZU1vbnRoLnllYXIgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5vcHRzLnNob3dUeXBlID09PSAyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlTW9udGhzKGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RZZWFyID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdE1vbnRoID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVDYWxlbmRhcihtb250aE5iciwgY2VsbC55ZWFyLCB5YywgaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFllYXIgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgeWVhciwgbW9udGhOYnIsIG1vbnRoVHh0IH0gPSB0aGlzLnZpc2libGVNb250aF9yYW5nZTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHljOiBib29sZWFuID0gY2VsbC55ZWFyICE9PSB5ZWFyO1xyXG4gICAgICAgICAgICB0aGlzLnZpc2libGVNb250aF9yYW5nZSA9IHtcclxuICAgICAgICAgICAgICAgIG1vbnRoVHh0LFxyXG4gICAgICAgICAgICAgICAgbW9udGhOYnIsXHJcbiAgICAgICAgICAgICAgICB5ZWFyOiBjZWxsLnllYXIsXHJcbiAgICAgICAgICAgICAgICB5ZWFyVHh0OiB0aGlzLm9wdHMueWVhclR4dFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkTW9udGhfcmFuZ2UueWVhciA9IHRoaXMudmlzaWJsZU1vbnRoX3JhbmdlLnllYXI7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdHMuc2hvd1R5cGUgPT09IDMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudG9TZWxlY3RZZWFyKHsgeWVhcjogdGhpcy52aXNpYmxlTW9udGhfcmFuZ2UueWVhciB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLm9wdHMuc2hvd1R5cGUgPT09IDIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVNb250aHMoaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFllYXJfcmFuZ2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0TW9udGhfcmFuZ2UgPSB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZUNhbGVuZGFyKG1vbnRoTmJyLCBjZWxsLnllYXIsIHljLCBpc1NlY29uZENhbGVuZGFyKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0WWVhcl9yYW5nZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uWWVhckNlbGxLZXlEb3duKGNlbGw6IElNeUNhbGVuZGFyWWVhcikge1xyXG4gICAgICAgIC8vIE1ha2UgcG9zc2libGUgdG8gbW92ZSBmb2N1cyBieSBhcnJvdyBrZXlzXHJcbiAgICAgICAgY29uc3QgeyBzb3VyY2VSb3csIHNvdXJjZUNvbCB9ID0gdGhpcy5nZXRTb3VyY2VSb3dBbmRDb2x1bW5Gcm9tRXZlbnQoZXZlbnQpO1xyXG4gICAgICAgIGNvbnN0IHsgbW92ZUZvY3VzLCB0YXJnZXRSb3csIHRhcmdldENvbCB9ID0gdGhpcy5nZXRUYXJnZXRGb2N1c1Jvd0FuZENvbHVtbihcclxuICAgICAgICAgICAgZXZlbnQsXHJcbiAgICAgICAgICAgIHNvdXJjZVJvdyxcclxuICAgICAgICAgICAgc291cmNlQ29sLFxyXG4gICAgICAgICAgICBZRUFSX1JPV19DT1VOVCxcclxuICAgICAgICAgICAgWUVBUl9DT0xfQ09VTlRcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBpZiAobW92ZUZvY3VzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZm9jdXNDZWxsRWxlbWVudChZLCB0YXJnZXRSb3csIHRhcmdldENvbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdlbmVyYXRlTW9udGhzKGlzU2Vjb25kQ2FsZW5kYXI/OiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgdG9kYXk6IElNeURhdGUgPSB0aGlzLmdldFRvZGF5KCk7XHJcbiAgICAgICAgY29uc3QgeyBkaXNhYmxlVW50aWwsIGRpc2FibGVTaW5jZSB9ID0gdGhpcy5vcHRzO1xyXG5cclxuICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6b25lLXZhcmlhYmxlLXBlci1kZWNsYXJhdGlvblxyXG4gICAgICAgIGxldCB5ZWFyOiBudW1iZXIsIG1vbnRoTmJyOiBudW1iZXI7XHJcbiAgICAgICAgaWYgKCFpc1NlY29uZENhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgIHRoaXMubW9udGhzLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgICAgIHllYXIgPSB0aGlzLnZpc2libGVNb250aC55ZWFyO1xyXG4gICAgICAgICAgICBtb250aE5iciA9IHRoaXMudmlzaWJsZU1vbnRoLm1vbnRoTmJyO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMubW9udGhzX3JhbmdlLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgICAgIHllYXIgPSB0aGlzLnZpc2libGVNb250aF9yYW5nZS55ZWFyO1xyXG4gICAgICAgICAgICBtb250aE5iciA9IHRoaXMudmlzaWJsZU1vbnRoX3JhbmdlLm1vbnRoTmJyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gMTI7IGkgKz0gMykge1xyXG4gICAgICAgICAgICBjb25zdCByb3c6IEFycmF5PElNeUNhbGVuZGFyTW9udGg+ID0gW107XHJcbiAgICAgICAgICAgIGZvciAobGV0IGogPSBpOyBqIDwgaSArIDM7IGorKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGlzYWJsZWQ6IGJvb2xlYW4gPVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXRpbFNlcnZpY2UuaXNNb250aERpc2FibGVkQnlEaXNhYmxlVW50aWwoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgeWVhciwgbW9udGg6IGosIGRheTogdGhpcy5kYXlzSW5Nb250aChqLCB5ZWFyKSB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlVW50aWxcclxuICAgICAgICAgICAgICAgICAgICApIHx8IHRoaXMudXRpbFNlcnZpY2UuaXNNb250aERpc2FibGVkQnlEaXNhYmxlU2luY2UoeyB5ZWFyLCBtb250aDogaiwgZGF5OiAxIH0sIGRpc2FibGVTaW5jZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcm93LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIG5icjogaixcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLm9wdHMubW9udGhMYWJlbHNbal0sXHJcbiAgICAgICAgICAgICAgICAgICAgY3Vyck1vbnRoOiBqID09PSB0b2RheS5tb250aCAmJiB5ZWFyID09PSB0b2RheS55ZWFyLFxyXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkLFxyXG4gICAgICAgICAgICAgICAgICAgIG1vbnRoT2JqOiB7IHllYXIsIG1vbnRoOiBqIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghaXNTZWNvbmRDYWxlbmRhcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tb250aHMucHVzaCh7IHJvdywgeWVhciB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubW9udGhzX3JhbmdlLnB1c2goeyByb3csIHllYXIgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZXRNb250aFZpZXdIZWFkZXJCdG5EaXNhYmxlZFN0YXRlKHllYXIsIGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgfVxyXG5cclxuICAgIGdlbmVyYXRlWWVhcnMoaW5wdXRZZWFyOiBudW1iZXIsIGlzU2Vjb25kQ2FsZW5kYXI/OiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgeyBtaW5ZZWFyLCBtYXhZZWFyLCBkaXNhYmxlVW50aWwsIGRpc2FibGVTaW5jZSB9ID0gdGhpcy5vcHRzO1xyXG5cclxuICAgICAgICBsZXQgeTogbnVtYmVyID0gaW5wdXRZZWFyIC0gKGlucHV0WWVhciAlIDEwKTtcclxuXHJcbiAgICAgICAgY29uc3QgeyB5ZWFyLCBtb250aE5iciB9ID0gdGhpcy52aXNpYmxlTW9udGg7XHJcblxyXG4gICAgICAgIGlmICghaXNTZWNvbmRDYWxlbmRhcikge1xyXG4gICAgICAgICAgICB0aGlzLnllYXJzLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLnllYXJzX3JhbmdlLmxlbmd0aCAmJiAoKHRoaXMueWVhcnMmJiB0aGlzLnllYXJzLmxlbmd0aCkgJiYgeSA8IHRoaXMueWVhcnNbM11bMl0ueWVhciAmJiB5ID4gdGhpcy55ZWFyc1swXVswXS55ZWFyKSAgJiYgdGhpcy5vcHRzLnNob3dUeXBlID09PSAzKSB7XHJcbiAgICAgICAgICAgICAgICB5Kz0gMTA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy55ZWFyc19yYW5nZS5sZW5ndGggPSAwO1xyXG4gICAgICAgICAgICBjb25zdCBhbGxZZWFycyA9IGZsYXR0ZW48YW55Pih0aGlzLnllYXJzX3JhbmdlKTtcclxuICAgICAgICAgICAgaWYgKGFsbFllYXJzLmZpbmRJbmRleChuID0+IG4ueWVhciA9PSBpbnB1dFllYXIpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgIHkgPSB0aGlzLnllYXJzX3JhbmdlWzNdWzJdLnllYXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdG9kYXk6IElNeURhdGUgPSB0aGlzLmdldFRvZGF5KCk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSB5IC0gMTsgaSA8IHkgKyAxMDsgaSArPSAzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJvdzogQXJyYXk8SU15Q2FsZW5kYXJZZWFyPiA9IFtdO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gaTsgaiA8IGkgKyAzOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRpc2FibGVkOiBib29sZWFuID1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnV0aWxTZXJ2aWNlLmlzTW9udGhEaXNhYmxlZEJ5RGlzYWJsZVVudGlsKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ZWFyOiBqLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9udGg6IG1vbnRoTmJyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF5OiB0aGlzLmRheXNJbk1vbnRoKG1vbnRoTmJyLCBqKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlVW50aWxcclxuICAgICAgICAgICAgICAgICAgICApIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51dGlsU2VydmljZS5pc01vbnRoRGlzYWJsZWRCeURpc2FibGVTaW5jZSh7IHllYXI6IGosIG1vbnRoOiBtb250aE5iciwgZGF5OiAxIH0sIGRpc2FibGVTaW5jZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgbWluTWF4OiBib29sZWFuID0gaiA8IG1pblllYXIgfHwgaiA+IG1heFllYXI7XHJcbiAgICAgICAgICAgICAgICByb3cucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgeWVhcjogaixcclxuICAgICAgICAgICAgICAgICAgICBjdXJyWWVhcjogaiA9PT0gdG9kYXkueWVhcixcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZDogaiA9PT0geWVhcixcclxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogZGlzYWJsZWQgfHwgbWluTWF4LFxyXG4gICAgICAgICAgICAgICAgICAgIHllYXJPYmo6IHsgeWVhcjogaiB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIWlzU2Vjb25kQ2FsZW5kYXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMueWVhcnMucHVzaChyb3cpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy55ZWFyc19yYW5nZS5wdXNoKHJvdyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFpc1NlY29uZENhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0WWVhclZpZXdIZWFkZXJCdG5EaXNhYmxlZFN0YXRlKHRoaXMueWVhcnNbMF1bMV0ueWVhciwgdGhpcy55ZWFyc1szXVsxXS55ZWFyLCBpc1NlY29uZENhbGVuZGFyKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnNldFllYXJWaWV3SGVhZGVyQnRuRGlzYWJsZWRTdGF0ZShcclxuICAgICAgICAgICAgICAgIHRoaXMueWVhcnNfcmFuZ2VbMF1bMV0ueWVhcixcclxuICAgICAgICAgICAgICAgIHRoaXMueWVhcnNfcmFuZ2VbM11bMV0ueWVhcixcclxuICAgICAgICAgICAgICAgIGlzU2Vjb25kQ2FsZW5kYXJcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0Q2FsZW5kYXJWaXNpYmxlTW9udGgoKTogdm9pZCB7XHJcbiAgICAgICAgLy8gU2V0cyB2aXNpYmxlIG1vbnRoIG9mIGNhbGVuZGFyXHJcbiAgICAgICAgY29uc3QgeyB5ZWFyLCBtb250aE5iciB9ID0gdGhpcy5zZWxlY3RlZE1vbnRoO1xyXG4gICAgICAgIHRoaXMudmlzaWJsZU1vbnRoID0ge1xyXG4gICAgICAgICAgICBtb250aFR4dDogdGhpcy5vcHRzLm1vbnRoTGFiZWxzW21vbnRoTmJyXSxcclxuICAgICAgICAgICAgbW9udGhOYnIsXHJcbiAgICAgICAgICAgIHllYXIsXHJcbiAgICAgICAgICAgIHllYXJUeHQ6IHRoaXMub3B0cy55ZWFyVHh0XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gQ3JlYXRlIGN1cnJlbnQgbW9udGhcclxuICAgICAgICBpZiAodGhpcy5vcHRzLmRhdGVSYW5nZSkge1xyXG4gICAgICAgICAgICB0aGlzLnZpc2libGVNb250aF9yYW5nZSA9IHtcclxuICAgICAgICAgICAgICAgIG1vbnRoVHh0OiB0aGlzLm9wdHMubW9udGhMYWJlbHNbdGhpcy5zZWxlY3RlZE1vbnRoX3JhbmdlLm1vbnRoTmJyXSxcclxuICAgICAgICAgICAgICAgIG1vbnRoTmJyOiB0aGlzLnNlbGVjdGVkTW9udGhfcmFuZ2UubW9udGhOYnIsXHJcbiAgICAgICAgICAgICAgICB5ZWFyOiB0aGlzLnNlbGVjdGVkTW9udGhfcmFuZ2UueWVhcixcclxuICAgICAgICAgICAgICAgIHllYXJUeHQ6IHRoaXMub3B0cy55ZWFyVHh0XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVDYWxlbmRhcih0aGlzLnNlbGVjdGVkTW9udGhfcmFuZ2UubW9udGhOYnIsIHRoaXMuc2VsZWN0ZWRNb250aF9yYW5nZS55ZWFyLCB0cnVlLCB0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5nZW5lcmF0ZUNhbGVuZGFyKG1vbnRoTmJyLCB5ZWFyLCB0cnVlLCBmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25QcmV2TmF2aWdhdGVCdG5DbGlja2VkKGV2ZW50PzogYW55LCBpc1NlY29uZENhbGVuZGFyPzogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgIGlmICghaXNTZWNvbmRDYWxlbmRhcikge1xyXG4gICAgICAgICAgICBpZiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5zZWxlY3RNb250aCAmJiAhdGhpcy5zZWxlY3RZZWFyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXREYXRlVmlld01vbnRoKGlzU2Vjb25kQ2FsZW5kYXIsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWxlY3RNb250aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmlzaWJsZU1vbnRoLnllYXItLTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlTW9udGhzKGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdFllYXIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlWWVhcnModGhpcy55ZWFyc1syXVsyXS55ZWFyIC0gMTApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnNlbGVjdE1vbnRoICYmICF0aGlzLnNlbGVjdFllYXIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZpc2libGVNb250aC55ZWFyLS07XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXREYXRlVmlld01vbnRoKGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdE1vbnRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aXNpYmxlTW9udGgueWVhci0tO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVNb250aHMoaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0WWVhcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVZZWFycyh0aGlzLnllYXJzWzJdWzJdLnllYXIgLSAxMCwgaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5zZWxlY3RNb250aF9yYW5nZSAmJiAhdGhpcy5zZWxlY3RZZWFyX3JhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXREYXRlVmlld01vbnRoKGlzU2Vjb25kQ2FsZW5kYXIsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWxlY3RNb250aF9yYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmlzaWJsZU1vbnRoX3JhbmdlLnllYXItLTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlTW9udGhzKGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdFllYXJfcmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlWWVhcnModGhpcy55ZWFyc19yYW5nZVsyXVsyXS55ZWFyIC0gMTApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnNlbGVjdE1vbnRoX3JhbmdlICYmICF0aGlzLnNlbGVjdFllYXJfcmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZpc2libGVNb250aF9yYW5nZS55ZWFyLS07XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXREYXRlVmlld01vbnRoKGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdE1vbnRoX3JhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aXNpYmxlTW9udGhfcmFuZ2UueWVhci0tO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVNb250aHMoaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0WWVhcl9yYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVZZWFycyh0aGlzLnllYXJzX3JhbmdlWzJdWzJdLnllYXIgLSAxMCwgaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25OZXh0TmF2aWdhdGVCdG5DbGlja2VkKGV2ZW50PzogYW55LCBpc1NlY29uZENhbGVuZGFyPzogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgIGlmICghaXNTZWNvbmRDYWxlbmRhcikge1xyXG4gICAgICAgICAgICBpZiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5zZWxlY3RNb250aCAmJiAhdGhpcy5zZWxlY3RZZWFyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXREYXRlVmlld01vbnRoKGlzU2Vjb25kQ2FsZW5kYXIsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdE1vbnRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aXNpYmxlTW9udGgueWVhcisrO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVNb250aHMoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWxlY3RZZWFyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZVllYXJzKHRoaXMueWVhcnNbMl1bMl0ueWVhciArIDEwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5zZWxlY3RNb250aCAmJiAhdGhpcy5zZWxlY3RZZWFyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aXNpYmxlTW9udGgueWVhcisrO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0RGF0ZVZpZXdNb250aChpc1NlY29uZENhbGVuZGFyKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWxlY3RNb250aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmlzaWJsZU1vbnRoLnllYXIrKztcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlTW9udGhzKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0WWVhcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVZZWFycyh0aGlzLnllYXJzWzJdWzJdLnllYXIgKyAxMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5zZWxlY3RNb250aF9yYW5nZSAmJiAhdGhpcy5zZWxlY3RZZWFyX3JhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXREYXRlVmlld01vbnRoKGlzU2Vjb25kQ2FsZW5kYXIsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdE1vbnRoX3JhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aXNpYmxlTW9udGhfcmFuZ2UueWVhcisrO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVNb250aHMoaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0WWVhcl9yYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVZZWFycyh0aGlzLnllYXJzX3JhbmdlWzJdWzJdLnllYXIgKyAxMCwgaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc2VsZWN0TW9udGhfcmFuZ2UgJiYgIXRoaXMuc2VsZWN0WWVhcl9yYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmlzaWJsZU1vbnRoX3JhbmdlLnllYXIrKztcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldERhdGVWaWV3TW9udGgoaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0TW9udGhfcmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZpc2libGVNb250aF9yYW5nZS55ZWFyKys7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZU1vbnRocyhpc1NlY29uZENhbGVuZGFyKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWxlY3RZZWFyX3JhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZVllYXJzKHRoaXMueWVhcnNfcmFuZ2VbMl1bMl0ueWVhciArIDEwLCBpc1NlY29uZENhbGVuZGFyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXREYXRlVmlld01vbnRoKGlzU2Vjb25kQ2FsZW5kYXI/OiBib29sZWFuLCBpc05leHQ/OiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgbGV0IGNoYW5nZTogbnVtYmVyO1xyXG4gICAgICAgIGlmIChpc05leHQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBjaGFuZ2UgPSAwO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNoYW5nZSA9IGlzTmV4dCA/IDEgOiAtMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFpc1NlY29uZENhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgeWVhciwgbW9udGhOYnIgfSA9IHRoaXMudmlzaWJsZU1vbnRoO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZDogRGF0ZSA9IHRoaXMuZ2V0RGF0ZSh5ZWFyLCBtb250aE5iciwgMSk7XHJcbiAgICAgICAgICAgIGQuc2V0TW9udGgoZC5nZXRNb250aCgpICsgY2hhbmdlKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHk6IG51bWJlciA9IGQuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICAgICAgY29uc3QgbTogbnVtYmVyID0gZC5nZXRNb250aCgpICsgMTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMudmlzaWJsZU1vbnRoID0ge1xyXG4gICAgICAgICAgICAgICAgbW9udGhUeHQ6IHRoaXMub3B0cy5tb250aExhYmVsc1ttXSxcclxuICAgICAgICAgICAgICAgIG1vbnRoTmJyOiBtLFxyXG4gICAgICAgICAgICAgICAgeWVhcjogeSxcclxuICAgICAgICAgICAgICAgIHllYXJUeHQ6IHRoaXMub3B0cy55ZWFyVHh0XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVDYWxlbmRhcihtLCB5LCB0cnVlLCBpc1NlY29uZENhbGVuZGFyKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCB7IHllYXIsIG1vbnRoTmJyIH0gPSB0aGlzLnZpc2libGVNb250aF9yYW5nZTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGQ6IERhdGUgPSB0aGlzLmdldERhdGUoeWVhciwgbW9udGhOYnIsIDEpO1xyXG4gICAgICAgICAgICBkLnNldE1vbnRoKGQuZ2V0TW9udGgoKSArIGNoYW5nZSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB5OiBudW1iZXIgPSBkLmdldEZ1bGxZZWFyKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IG06IG51bWJlciA9IGQuZ2V0TW9udGgoKSArIDE7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnZpc2libGVNb250aF9yYW5nZSA9IHtcclxuICAgICAgICAgICAgICAgIG1vbnRoVHh0OiB0aGlzLm9wdHMubW9udGhMYWJlbHNbbV0sXHJcbiAgICAgICAgICAgICAgICBtb250aE5icjogbSxcclxuICAgICAgICAgICAgICAgIHllYXI6IHksXHJcbiAgICAgICAgICAgICAgICB5ZWFyVHh0OiB0aGlzLm9wdHMueWVhclR4dFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLmdlbmVyYXRlQ2FsZW5kYXIobSwgeSwgdHJ1ZSwgaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uQ2xvc2VTZWxlY3RvcihldmVudDogYW55KTogdm9pZCB7XHJcbiAgICAgICAgY29uc3Qga2V5Q29kZTogbnVtYmVyID0gdGhpcy51dGlsU2VydmljZS5nZXRLZXlDb2RlRnJvbUV2ZW50KGV2ZW50KTtcclxuICAgICAgICBpZiAoa2V5Q29kZSA9PT0gS2V5Q29kZS5lc2MpIHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZWRCeUVzYygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbkRheUNlbGxDbGlja2VkKGNlbGw6IElNeUNhbGVuZGFyRGF5LCBpc1NlY29uZENhbGVuZGFyPzogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgIGlmIChjZWxsLmNtbyA9PT0gMSkge1xyXG4gICAgICAgICAgICB0aGlzLm9uUHJldk5hdmlnYXRlQnRuQ2xpY2tlZCh0cnVlLCBpc1NlY29uZENhbGVuZGFyKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGNlbGwuY21vID09PSAzKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25OZXh0TmF2aWdhdGVCdG5DbGlja2VkKHRydWUsIGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNlbGVjdERhdGUoY2VsbC5kYXRlT2JqKTtcclxuICAgICAgICB0aGlzLnJlc2V0TW9udGhZZWFyU2VsZWN0KGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uRGF5Q2VsbEtleURvd24oY2VsbDogSU15Q2FsZW5kYXJEYXkpIHtcclxuICAgICAgICAvLyBNYWtlIHBvc3NpYmxlIHRvIG1vdmUgZm9jdXMgYnkgYXJyb3cga2V5c1xyXG4gICAgICAgIGNvbnN0IHsgc291cmNlUm93LCBzb3VyY2VDb2wgfSA9IHRoaXMuZ2V0U291cmNlUm93QW5kQ29sdW1uRnJvbUV2ZW50KGV2ZW50KTtcclxuICAgICAgICBjb25zdCB7IG1vdmVGb2N1cywgdGFyZ2V0Um93LCB0YXJnZXRDb2wgfSA9IHRoaXMuZ2V0VGFyZ2V0Rm9jdXNSb3dBbmRDb2x1bW4oXHJcbiAgICAgICAgICAgIGV2ZW50LFxyXG4gICAgICAgICAgICBzb3VyY2VSb3csXHJcbiAgICAgICAgICAgIHNvdXJjZUNvbCxcclxuICAgICAgICAgICAgREFURV9ST1dfQ09VTlQsXHJcbiAgICAgICAgICAgIERBVEVfQ09MX0NPVU5UXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgaWYgKG1vdmVGb2N1cykge1xyXG4gICAgICAgICAgICB0aGlzLmZvY3VzQ2VsbEVsZW1lbnQoRCwgdGFyZ2V0Um93LCB0YXJnZXRDb2wpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG9uRGF5Q2VsbE1vdXNlRW50ZXIoY2VsbDogYW55LCBpc1NlY29uZENhbGVuZGFyPzogYm9vbGVhbikge1xyXG4gICAgICAgIGlmIChpc1NlY29uZENhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgdyBvZiB0aGlzLmRhdGVzKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGRheSBvZiB3LndlZWspIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXkucmFuZ2UgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAodGhpcy51dGlsU2VydmljZS5pc0RhdGVTYW1lT3JFYXJsaWVyKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4sIGRheS5kYXRlT2JqKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51dGlsU2VydmljZS5pc0RhdGVTYW1lT3JFYXJsaWVyKGRheS5kYXRlT2JqLCBjZWxsLmRhdGVPYmopKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAodGhpcy51dGlsU2VydmljZS5pc0RhdGVTYW1lT3JFYXJsaWVyKGRheS5kYXRlT2JqLCB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51dGlsU2VydmljZS5pc0RhdGVTYW1lT3JFYXJsaWVyKGNlbGwuZGF0ZU9iaiwgZGF5LmRhdGVPYmopKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgdyBvZiB0aGlzLmRhdGVzX3JhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGRheSBvZiB3LndlZWspIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXkucmFuZ2UgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAodGhpcy51dGlsU2VydmljZS5pc0RhdGVTYW1lT3JFYXJsaWVyKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4sIGRheS5kYXRlT2JqKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51dGlsU2VydmljZS5pc0RhdGVTYW1lT3JFYXJsaWVyKGRheS5kYXRlT2JqLCBjZWxsLmRhdGVPYmopKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAodGhpcy51dGlsU2VydmljZS5pc0RhdGVTYW1lT3JFYXJsaWVyKGRheS5kYXRlT2JqLCB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51dGlsU2VydmljZS5pc0RhdGVTYW1lT3JFYXJsaWVyKGNlbGwuZGF0ZU9iaiwgZGF5LmRhdGVPYmopKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG9uRGF5Q2VsbE1vdXNlTGVhdmUoaXNTZWNvbmRDYWxlbmRhcj86IGJvb2xlYW4pIHtcclxuICAgICAgICBpZiAoaXNTZWNvbmRDYWxlbmRhcikge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHcgb2YgdGhpcy5kYXRlcykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBkYXkgb2Ygdy53ZWVrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF5LnJhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHcgb2YgdGhpcy5kYXRlc19yYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBkYXkgb2Ygdy53ZWVrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF5LnJhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBvbk1vbnRoQ2VsbE1vdXNlRW50ZXIoY2VsbDogYW55LCBpc1NlY29uZENhbGVuZGFyPzogYm9vbGVhbikge1xyXG4gICAgICAgIGlmIChpc1NlY29uZENhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiB0aGlzLm1vbnRocykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBtb250aCBvZiBpdGVtLnJvdykge1xyXG4gICAgICAgICAgICAgICAgICAgIG1vbnRoLnJhbmdlID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMudXRpbFNlcnZpY2UuaXNEYXRlU2FtZU9yRWFybGllcih0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luLCBtb250aC5tb250aE9iaikgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXRpbFNlcnZpY2UuaXNEYXRlU2FtZU9yRWFybGllcihtb250aC5tb250aE9iaiwgY2VsbC5tb250aE9iaikpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVNhbWVPckVhcmxpZXIobW9udGgubW9udGhPYmosIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4pICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVNhbWVPckVhcmxpZXIoY2VsbC5tb250aE9iaiwgbW9udGgubW9udGhPYmopKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiB0aGlzLm1vbnRoc19yYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBtb250aCBvZiBpdGVtLnJvdykge1xyXG4gICAgICAgICAgICAgICAgICAgIG1vbnRoLnJhbmdlID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMudXRpbFNlcnZpY2UuaXNEYXRlU2FtZU9yRWFybGllcih0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luLCBtb250aC5tb250aE9iaikgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXRpbFNlcnZpY2UuaXNEYXRlU2FtZU9yRWFybGllcihtb250aC5tb250aE9iaiwgY2VsbC5tb250aE9iaikpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVNhbWVPckVhcmxpZXIobW9udGgubW9udGhPYmosIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4pICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVNhbWVPckVhcmxpZXIoY2VsbC5tb250aE9iaiwgbW9udGgubW9udGhPYmopKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG9uTW9udGhDZWxsTW91c2VMZWF2ZShpc1NlY29uZENhbGVuZGFyPzogYm9vbGVhbikge1xyXG4gICAgICAgIGlmIChpc1NlY29uZENhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiB0aGlzLm1vbnRocykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBtb250aCBvZiBpdGVtLnJvdykge1xyXG4gICAgICAgICAgICAgICAgICAgIG1vbnRoLnJhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgdGhpcy5tb250aHMpIHtcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbW9udGggb2YgaXRlbS5yb3cpIHtcclxuICAgICAgICAgICAgICAgICAgICBtb250aC5yYW5nZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgb25ZZWFyQ2VsbE1vdXNlRW50ZXIoY2VsbDogYW55LCBpc1NlY29uZENhbGVuZGFyPzogYm9vbGVhbikge1xyXG4gICAgICAgIGlmIChpc1NlY29uZENhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiB0aGlzLnllYXJzKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHllYXIgb2YgaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHllYXIucmFuZ2UgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAodGhpcy51dGlsU2VydmljZS5pc0RhdGVTYW1lT3JFYXJsaWVyKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4sIHllYXIueWVhck9iaikgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXRpbFNlcnZpY2UuaXNEYXRlU2FtZU9yRWFybGllcih5ZWFyLnllYXJPYmosIGNlbGwueWVhck9iaikpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVNhbWVPckVhcmxpZXIoeWVhci55ZWFyT2JqLCB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51dGlsU2VydmljZS5pc0RhdGVTYW1lT3JFYXJsaWVyKGNlbGwueWVhck9iaiwgeWVhci55ZWFyT2JqKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgdGhpcy55ZWFyc19yYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB5ZWFyIG9mIGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICB5ZWFyLnJhbmdlID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMudXRpbFNlcnZpY2UuaXNEYXRlU2FtZU9yRWFybGllcih0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luLCB5ZWFyLnllYXJPYmopICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVNhbWVPckVhcmxpZXIoeWVhci55ZWFyT2JqLCBjZWxsLnllYXJPYmopKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAodGhpcy51dGlsU2VydmljZS5pc0RhdGVTYW1lT3JFYXJsaWVyKHllYXIueWVhck9iaiwgdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbikgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXRpbFNlcnZpY2UuaXNEYXRlU2FtZU9yRWFybGllcihjZWxsLnllYXJPYmosIHllYXIueWVhck9iaikpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgb25ZZWFyQ2VsbE1vdXNlTGVhdmUoaXNTZWNvbmRDYWxlbmRhcj86IGJvb2xlYW4pIHtcclxuICAgICAgICBpZiAoaXNTZWNvbmRDYWxlbmRhcikge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgdGhpcy55ZWFycykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB5ZWFyIG9mIGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICB5ZWFyLnJhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgdGhpcy55ZWFyc19yYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB5ZWFyIG9mIGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICB5ZWFyLnJhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBvbldlZWtDbGlja2VkKHdlZWtEYXRhOiBJTXlXZWVrKSB7XHJcbiAgICAgICAgY29uc3Qgc2hvd1RpbWUgPSB0aGlzLm9wdHMucmV0dXJuRm9ybWF0ICYmIHRoaXMub3B0cy5yZXR1cm5Gb3JtYXQudG9Mb2NhbGVMb3dlckNhc2UoKS5pbmRleE9mKCdoaDptbScpID4gLTE7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZFdlZWsgPSB7IHdlZWtOYnI6IHdlZWtEYXRhLndlZWtOYnIsIHllYXI6IHdlZWtEYXRhLnllYXIgfTtcclxuXHJcbiAgICAgICAgaWYgKHNob3dUaW1lKSB7XHJcbiAgICAgICAgICAgIHdlZWtEYXRhLndlZWtbMF0uZGF0ZU9iai5ob3VyID0gMDtcclxuICAgICAgICAgICAgd2Vla0RhdGEud2Vla1swXS5kYXRlT2JqLm1pbnV0ZSA9IDA7XHJcbiAgICAgICAgICAgIHdlZWtEYXRhLndlZWtbMF0uZGF0ZU9iai5zZWNvbmQgPSAwO1xyXG5cclxuICAgICAgICAgICAgd2Vla0RhdGEud2Vla1s2XS5kYXRlT2JqLmhvdXIgPSAyMztcclxuICAgICAgICAgICAgd2Vla0RhdGEud2Vla1s2XS5kYXRlT2JqLm1pbnV0ZSA9IDU5O1xyXG4gICAgICAgICAgICB3ZWVrRGF0YS53ZWVrWzZdLmRhdGVPYmouc2Vjb25kID0gNTk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNlbGVjdERhdGUod2Vla0RhdGEud2Vla1swXS5kYXRlT2JqKTtcclxuICAgICAgICB0aGlzLnNlbGVjdERhdGUod2Vla0RhdGEud2Vla1s2XS5kYXRlT2JqKTtcclxuICAgIH1cclxuICAgIGdldFNvdXJjZVJvd0FuZENvbHVtbkZyb21FdmVudChldmVudDogYW55KTogYW55IHtcclxuICAgICAgICBsZXQgc291cmNlUm93ID0gMDtcclxuICAgICAgICBsZXQgc291cmNlQ29sID0gMDtcclxuICAgICAgICBpZiAoZXZlbnQudGFyZ2V0ICYmIGV2ZW50LnRhcmdldC5pZCkge1xyXG4gICAgICAgICAgICAvLyB2YWx1ZSBvZiBpZCBpcyBmb3IgZXhhbXBsZTogbV8wXzEgKGZpcnN0IG51bWJlciA9IHJvdywgc2Vjb25kIG51bWJlciA9IGNvbHVtbilcclxuICAgICAgICAgICAgY29uc3QgYXJyOiBBcnJheTxzdHJpbmc+ID0gZXZlbnQudGFyZ2V0LmlkLnNwbGl0KFVOREVSX0xJTkUpO1xyXG4gICAgICAgICAgICBzb3VyY2VSb3cgPSBOdW1iZXIoYXJyWzFdKTtcclxuICAgICAgICAgICAgc291cmNlQ29sID0gTnVtYmVyKGFyclsyXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7IHNvdXJjZVJvdywgc291cmNlQ29sIH07XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VGFyZ2V0Rm9jdXNSb3dBbmRDb2x1bW4oZXZlbnQ6IGFueSwgcm93OiBudW1iZXIsIGNvbDogbnVtYmVyLCByb3dDb3VudDogbnVtYmVyLCBjb2xDb3VudDogbnVtYmVyKTogYW55IHtcclxuICAgICAgICBsZXQgbW92ZUZvY3VzID0gZmFsc2U7XHJcbiAgICAgICAgbGV0IHRhcmdldFJvdzogbnVtYmVyID0gcm93O1xyXG4gICAgICAgIGxldCB0YXJnZXRDb2w6IG51bWJlciA9IGNvbDtcclxuXHJcbiAgICAgICAgY29uc3Qga2V5Q29kZTogbnVtYmVyID0gdGhpcy51dGlsU2VydmljZS5nZXRLZXlDb2RlRnJvbUV2ZW50KGV2ZW50KTtcclxuICAgICAgICBpZiAoa2V5Q29kZSA9PT0gS2V5Q29kZS51cEFycm93ICYmIHJvdyA+IDApIHtcclxuICAgICAgICAgICAgbW92ZUZvY3VzID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGFyZ2V0Um93LS07XHJcbiAgICAgICAgfSBlbHNlIGlmIChrZXlDb2RlID09PSBLZXlDb2RlLmRvd25BcnJvdyAmJiByb3cgPCByb3dDb3VudCkge1xyXG4gICAgICAgICAgICBtb3ZlRm9jdXMgPSB0cnVlO1xyXG4gICAgICAgICAgICB0YXJnZXRSb3crKztcclxuICAgICAgICB9IGVsc2UgaWYgKGtleUNvZGUgPT09IEtleUNvZGUubGVmdEFycm93ICYmIGNvbCA+IDApIHtcclxuICAgICAgICAgICAgbW92ZUZvY3VzID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGFyZ2V0Q29sLS07XHJcbiAgICAgICAgfSBlbHNlIGlmIChrZXlDb2RlID09PSBLZXlDb2RlLnJpZ2h0QXJyb3cgJiYgY29sIDwgY29sQ291bnQpIHtcclxuICAgICAgICAgICAgbW92ZUZvY3VzID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGFyZ2V0Q29sKys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7IG1vdmVGb2N1cywgdGFyZ2V0Um93LCB0YXJnZXRDb2wgfTtcclxuICAgIH1cclxuXHJcbiAgICBmb2N1c0NlbGxFbGVtZW50KHR5cGU6IHN0cmluZywgcm93OiBudW1iZXIsIGNvbDogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgZWxlbTogYW55ID0gdGhpcy5zZWxlY3RvckVsLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcihET1QgKyB0eXBlICsgVU5ERVJfTElORSArIHJvdyArIFVOREVSX0xJTkUgKyBjb2wpO1xyXG4gICAgICAgIGlmIChlbGVtKSB7XHJcbiAgICAgICAgICAgIGVsZW0uZm9jdXMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2VsZWN0RGF0ZShkYXRlOiBJTXlEYXRlKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgeyBkYXRlRm9ybWF0LCBtb250aExhYmVscywgZGF0ZVJhbmdlRGF0ZXNEZWxpbWl0ZXIsIGNsb3NlU2VsZWN0b3JPbkRhdGVTZWxlY3QsIHNob3dUaW1lLCByZXR1cm5Gb3JtYXQgfSA9IHRoaXMub3B0cztcclxuXHJcbiAgICAgICAgaWYgKHRoaXMub3B0cy5kYXRlUmFuZ2UpIHtcclxuICAgICAgICAgICAgLy8gRGF0ZSByYW5nZVxyXG4gICAgICAgICAgICBjb25zdCBpc0JlZ2luRGF0ZUluaXRpYWxpemVkOiBib29sZWFuID0gdGhpcy51dGlsU2VydmljZS5pc0luaXRpYWxpemVkRGF0ZSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luKTtcclxuICAgICAgICAgICAgY29uc3QgaXNFbmREYXRlSW5pdGlhbGl6ZWQ6IGJvb2xlYW4gPSB0aGlzLnV0aWxTZXJ2aWNlLmlzSW5pdGlhbGl6ZWREYXRlKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuZW5kKSAmJlxyXG4gICAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbikgIT09IEpTT04uc3RyaW5naWZ5KHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuZW5kKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChpc0JlZ2luRGF0ZUluaXRpYWxpemVkICYmIGlzRW5kRGF0ZUluaXRpYWxpemVkKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBib3RoIGFscmVhZHkgc2VsZWN0ZWQgLSBzZXQgYmVnaW4gZGF0ZSBhbmQgcmVzZXQgZW5kIGRhdGVcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4gPSBkYXRlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5lbmQgPSB0aGlzLnV0aWxTZXJ2aWNlLnJlc2V0RGF0ZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMucmFuZ2VEYXRlU2VsZWN0aW9uKHtcclxuICAgICAgICAgICAgICAgICAgICBpc0JlZ2luOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAganNEYXRlOiB0aGlzLnV0aWxTZXJ2aWNlLmdldERhdGUoZGF0ZSksXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUZvcm1hdCxcclxuICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWQ6IHRoaXMudXRpbFNlcnZpY2UuZm9ybWF0RGF0ZShkYXRlLCBkYXRlRm9ybWF0LCBtb250aExhYmVscyksXHJcbiAgICAgICAgICAgICAgICAgICAgZXBvYzogdGhpcy51dGlsU2VydmljZS5nZXRFcG9jVGltZShkYXRlKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWlzQmVnaW5EYXRlSW5pdGlhbGl6ZWQpIHtcclxuICAgICAgICAgICAgICAgIC8vIGJlZ2luIGRhdGVcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4gPSBkYXRlO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFpc0VuZERhdGVJbml0aWFsaXplZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuZW5kID0gZGF0ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMucmFuZ2VEYXRlU2VsZWN0aW9uKHtcclxuICAgICAgICAgICAgICAgICAgICBpc0JlZ2luOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAganNEYXRlOiB0aGlzLnV0aWxTZXJ2aWNlLmdldERhdGUoZGF0ZSksXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUZvcm1hdCxcclxuICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWQ6IHRoaXMudXRpbFNlcnZpY2UuZm9ybWF0RGF0ZShkYXRlLCBkYXRlRm9ybWF0LCBtb250aExhYmVscyksXHJcbiAgICAgICAgICAgICAgICAgICAgZXBvYzogdGhpcy51dGlsU2VydmljZS5nZXRFcG9jVGltZShkYXRlKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBzZWNvbmQgc2VsZWN0aW9uXHJcbiAgICAgICAgICAgICAgICBjb25zdCBmaXJzdERhdGVFYXJsaWVyOiBib29sZWFuID0gdGhpcy51dGlsU2VydmljZS5pc0RhdGVFYXJsaWVyKGRhdGUsIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4pO1xyXG4gICAgICAgICAgICAgICAgaWYgKGZpcnN0RGF0ZUVhcmxpZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBfZGF0ZSA9IHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW47XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5lbmQgPSBfZGF0ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJhbmdlRGF0ZVNlbGVjdGlvbih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQmVnaW46IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiBfZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAganNEYXRlOiB0aGlzLnV0aWxTZXJ2aWNlLmdldERhdGUoX2RhdGUpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlRm9ybWF0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWQ6IHRoaXMudXRpbFNlcnZpY2UuZm9ybWF0RGF0ZShfZGF0ZSwgZGF0ZUZvcm1hdCwgbW9udGhMYWJlbHMpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcG9jOiB0aGlzLnV0aWxTZXJ2aWNlLmdldEVwb2NUaW1lKF9kYXRlKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4gPSBkYXRlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmFuZ2VEYXRlU2VsZWN0aW9uKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNCZWdpbjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAganNEYXRlOiB0aGlzLnV0aWxTZXJ2aWNlLmdldERhdGUoZGF0ZSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVGb3JtYXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZDogdGhpcy51dGlsU2VydmljZS5mb3JtYXREYXRlKGRhdGUsIGRhdGVGb3JtYXQsIG1vbnRoTGFiZWxzKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXBvYzogdGhpcy51dGlsU2VydmljZS5nZXRFcG9jVGltZShkYXRlKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmVuZCA9IGRhdGU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yYW5nZURhdGVTZWxlY3Rpb24oe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0JlZ2luOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAganNEYXRlOiB0aGlzLnV0aWxTZXJ2aWNlLmdldERhdGUoZGF0ZSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVGb3JtYXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZDogdGhpcy51dGlsU2VydmljZS5mb3JtYXREYXRlKGRhdGUsIGRhdGVGb3JtYXQsIG1vbnRoTGFiZWxzKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXBvYzogdGhpcy51dGlsU2VydmljZS5nZXRFcG9jVGltZShkYXRlKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLm9wdHMuc2hvd1RpbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGVDaGFuZ2VkKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnV0aWxTZXJ2aWNlLmdldERhdGVNb2RlbChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZUZvcm1hdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vbnRoTGFiZWxzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZVJhbmdlRGF0ZXNEZWxpbWl0ZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5Gb3JtYXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2VTZWxlY3Rvck9uRGF0ZVNlbGVjdFxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBTaW5nbGUgZGF0ZVxyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZSA9IGRhdGU7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMub3B0cy5zaG93VGltZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRlQ2hhbmdlZChcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnV0aWxTZXJ2aWNlLmdldERhdGVNb2RlbChcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVGb3JtYXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vbnRoTGFiZWxzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlUmFuZ2VEYXRlc0RlbGltaXRlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuRm9ybWF0XHJcbiAgICAgICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgICAgICBzaG93VGltZSA/IGZhbHNlIDogY2xvc2VTZWxlY3Rvck9uRGF0ZVNlbGVjdFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy50aW1lVmxhdWUgJiYgdGhpcy5vcHRzLnZpZXdUeXBlID09IFZpZXdUeXBlLlRvZ2V0aGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50aW1lVmxhdWUgPSB0aGlzLmdldFRpbWVTdHIobmV3IERhdGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgdG9TZWxlY3RNb250aChtb250aDogSU15TW9udGgpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCB7IGRhdGVGb3JtYXQsIG1vbnRoTGFiZWxzLCBkYXRlUmFuZ2VEYXRlc0RlbGltaXRlciwgY2xvc2VTZWxlY3Rvck9uRGF0ZVNlbGVjdCwgc2hvd1RpbWUsIHJldHVybkZvcm1hdCB9ID0gdGhpcy5vcHRzO1xyXG4gICAgICAgIGlmICh0aGlzLm9wdHMuZGF0ZVJhbmdlKSB7XHJcbiAgICAgICAgICAgIC8vIG1vbnRoIHJhbmdlXHJcbiAgICAgICAgICAgIGNvbnN0IGlzQmVnaW5Nb250aEluaXRpYWxpemVkOiBib29sZWFuID0gdGhpcy51dGlsU2VydmljZS5pc0luaXRpYWxpemVkTW9udGgodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbik7XHJcbiAgICAgICAgICAgIGNvbnN0IGlzRW5kTW9udGhJbml0aWFsaXplZDogYm9vbGVhbiA9IHRoaXMudXRpbFNlcnZpY2UuaXNJbml0aWFsaXplZE1vbnRoKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuZW5kKTtcclxuICAgICAgICAgICAgaWYgKGlzQmVnaW5Nb250aEluaXRpYWxpemVkICYmIGlzRW5kTW9udGhJbml0aWFsaXplZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gYm90aCBhbHJlYWR5IHNlbGVjdGVkIC0gc2V0IGJlZ2luIGRhdGUgYW5kIHJlc2V0IGVuZCBkYXRlXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luID0geyB5ZWFyOiBtb250aC55ZWFyLCBtb250aDogbW9udGgubW9udGhOYnIgfTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuZW5kID0gdGhpcy51dGlsU2VydmljZS5yZXNldERhdGUoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmFuZ2VEYXRlU2VsZWN0aW9uKHtcclxuICAgICAgICAgICAgICAgICAgICBpc0JlZ2luOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAganNEYXRlOiB0aGlzLnV0aWxTZXJ2aWNlLmdldERhdGUodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbiksXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUZvcm1hdCxcclxuICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWQ6IHRoaXMudXRpbFNlcnZpY2UuZm9ybWF0RGF0ZSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luLCBkYXRlRm9ybWF0LCBtb250aExhYmVscyksXHJcbiAgICAgICAgICAgICAgICAgICAgZXBvYzogdGhpcy51dGlsU2VydmljZS5nZXRFcG9jVGltZSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWlzQmVnaW5Nb250aEluaXRpYWxpemVkKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBiZWdpbiBkYXRlXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luID0geyB5ZWFyOiBtb250aC55ZWFyLCBtb250aDogbW9udGgubW9udGhOYnIgfTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmFuZ2VEYXRlU2VsZWN0aW9uKHtcclxuICAgICAgICAgICAgICAgICAgICBpc0JlZ2luOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAganNEYXRlOiB0aGlzLnV0aWxTZXJ2aWNlLmdldERhdGUodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbiksXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUZvcm1hdCxcclxuICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWQ6IHRoaXMudXRpbFNlcnZpY2UuZm9ybWF0RGF0ZSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luLCBkYXRlRm9ybWF0LCBtb250aExhYmVscyksXHJcbiAgICAgICAgICAgICAgICAgICAgZXBvYzogdGhpcy51dGlsU2VydmljZS5nZXRFcG9jVGltZSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBzZWNvbmQgc2VsZWN0aW9uXHJcbiAgICAgICAgICAgICAgICBjb25zdCBmaXJzdERhdGVFYXJsaWVyOiBib29sZWFuID0gdGhpcy51dGlsU2VydmljZS5pc0RhdGVFYXJsaWVyKFxyXG4gICAgICAgICAgICAgICAgICAgIHsgeWVhcjogbW9udGgueWVhciwgbW9udGg6IG1vbnRoLm1vbnRoTmJyIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpblxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIGlmIChmaXJzdERhdGVFYXJsaWVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgX2RhdGUgPSB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuZW5kID0gX2RhdGU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yYW5nZURhdGVTZWxlY3Rpb24oe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0JlZ2luOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogX2RhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzRGF0ZTogdGhpcy51dGlsU2VydmljZS5nZXREYXRlKF9kYXRlKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZUZvcm1hdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkOiB0aGlzLnV0aWxTZXJ2aWNlLmZvcm1hdERhdGUoX2RhdGUsIGRhdGVGb3JtYXQsIG1vbnRoTGFiZWxzKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXBvYzogdGhpcy51dGlsU2VydmljZS5nZXRFcG9jVGltZShfZGF0ZSlcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luID0geyB5ZWFyOiBtb250aC55ZWFyLCBtb250aDogbW9udGgubW9udGhOYnIgfTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJhbmdlRGF0ZVNlbGVjdGlvbih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQmVnaW46IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzRGF0ZTogdGhpcy51dGlsU2VydmljZS5nZXREYXRlKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlRm9ybWF0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWQ6IHRoaXMudXRpbFNlcnZpY2UuZm9ybWF0RGF0ZSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luLCBkYXRlRm9ybWF0LCBtb250aExhYmVscyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVwb2M6IHRoaXMudXRpbFNlcnZpY2UuZ2V0RXBvY1RpbWUodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbilcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5lbmQgPSB7IHllYXI6IG1vbnRoLnllYXIsIG1vbnRoOiBtb250aC5tb250aE5iciB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmFuZ2VEYXRlU2VsZWN0aW9uKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNCZWdpbjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuZW5kLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBqc0RhdGU6IHRoaXMudXRpbFNlcnZpY2UuZ2V0RGF0ZSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmVuZCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVGb3JtYXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZDogdGhpcy51dGlsU2VydmljZS5mb3JtYXREYXRlKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuZW5kLCBkYXRlRm9ybWF0LCBtb250aExhYmVscyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVwb2M6IHRoaXMudXRpbFNlcnZpY2UuZ2V0RXBvY1RpbWUodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5lbmQpXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMub3B0cy5zaG93VGltZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0ZUNoYW5nZWQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXRpbFNlcnZpY2UuZ2V0RGF0ZU1vZGVsKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlRm9ybWF0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9udGhMYWJlbHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlUmFuZ2VEYXRlc0RlbGltaXRlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybkZvcm1hdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9zZVNlbGVjdG9yT25EYXRlU2VsZWN0XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRNb250aCA9IG1vbnRoO1xyXG4gICAgICAgICAgICB0aGlzLmRhdGVDaGFuZ2VkKFxyXG4gICAgICAgICAgICAgICAgdGhpcy51dGlsU2VydmljZS5nZXREYXRlTW9kZWwoXHJcbiAgICAgICAgICAgICAgICAgICAgeyB5ZWFyOiBtb250aC55ZWFyLCBtb250aDogbW9udGgubW9udGhOYnIgfSxcclxuICAgICAgICAgICAgICAgICAgICBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVGb3JtYXQsXHJcbiAgICAgICAgICAgICAgICAgICAgbW9udGhMYWJlbHMsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZVJhbmdlRGF0ZXNEZWxpbWl0ZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuRm9ybWF0XHJcbiAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgc2hvd1RpbWUgPyBmYWxzZSA6IGNsb3NlU2VsZWN0b3JPbkRhdGVTZWxlY3RcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICB0b1NlbGVjdFllYXIoeWVhcjogeyB5ZWFyOiBudW1iZXIgfSk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHsgZGF0ZUZvcm1hdCwgbW9udGhMYWJlbHMsIGRhdGVSYW5nZURhdGVzRGVsaW1pdGVyLCBjbG9zZVNlbGVjdG9yT25EYXRlU2VsZWN0LCBzaG93VGltZSwgcmV0dXJuRm9ybWF0IH0gPSB0aGlzLm9wdHM7XHJcbiAgICAgICAgaWYgKHRoaXMub3B0cy5kYXRlUmFuZ2UpIHtcclxuICAgICAgICAgICAgLy8gbW9udGggcmFuZ2VcclxuICAgICAgICAgICAgY29uc3QgaXNCZWdpblllYXJJbml0aWFsaXplZDogYm9vbGVhbiA9IHRoaXMudXRpbFNlcnZpY2UuaXNJbml0aWFsaXplZFllYXIodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbik7XHJcbiAgICAgICAgICAgIGNvbnN0IGlzRW5kWWVhckluaXRpYWxpemVkOiBib29sZWFuID0gdGhpcy51dGlsU2VydmljZS5pc0luaXRpYWxpemVkWWVhcih0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmVuZCk7XHJcbiAgICAgICAgICAgIGlmIChpc0JlZ2luWWVhckluaXRpYWxpemVkICYmIGlzRW5kWWVhckluaXRpYWxpemVkKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBib3RoIGFscmVhZHkgc2VsZWN0ZWQgLSBzZXQgYmVnaW4gZGF0ZSBhbmQgcmVzZXQgZW5kIGRhdGVcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4gPSB5ZWFyO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5lbmQgPSB0aGlzLnV0aWxTZXJ2aWNlLnJlc2V0RGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yYW5nZURhdGVTZWxlY3Rpb24oe1xyXG4gICAgICAgICAgICAgICAgICAgIGlzQmVnaW46IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZTogdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbixcclxuICAgICAgICAgICAgICAgICAgICBqc0RhdGU6IHRoaXMudXRpbFNlcnZpY2UuZ2V0RGF0ZSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luKSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRlRm9ybWF0LFxyXG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZDogdGhpcy51dGlsU2VydmljZS5mb3JtYXREYXRlKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4sIGRhdGVGb3JtYXQsIG1vbnRoTGFiZWxzKSxcclxuICAgICAgICAgICAgICAgICAgICBlcG9jOiB0aGlzLnV0aWxTZXJ2aWNlLmdldEVwb2NUaW1lKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4pXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICghaXNCZWdpblllYXJJbml0aWFsaXplZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gYmVnaW4gZGF0ZVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbiA9IHllYXI7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJhbmdlRGF0ZVNlbGVjdGlvbih7XHJcbiAgICAgICAgICAgICAgICAgICAgaXNCZWdpbjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRlOiB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgIGpzRGF0ZTogdGhpcy51dGlsU2VydmljZS5nZXREYXRlKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4pLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVGb3JtYXQsXHJcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkOiB0aGlzLnV0aWxTZXJ2aWNlLmZvcm1hdERhdGUodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbiwgZGF0ZUZvcm1hdCwgbW9udGhMYWJlbHMpLFxyXG4gICAgICAgICAgICAgICAgICAgIGVwb2M6IHRoaXMudXRpbFNlcnZpY2UuZ2V0RXBvY1RpbWUodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbilcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gc2Vjb25kIHNlbGVjdGlvblxyXG4gICAgICAgICAgICAgICAgY29uc3QgZmlyc3REYXRlRWFybGllcjogYm9vbGVhbiA9IHRoaXMudXRpbFNlcnZpY2UuaXNEYXRlRWFybGllcih5ZWFyLCB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luKTtcclxuICAgICAgICAgICAgICAgIGlmIChmaXJzdERhdGVFYXJsaWVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgX2RhdGUgPSB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuZW5kID0gX2RhdGU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yYW5nZURhdGVTZWxlY3Rpb24oe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0JlZ2luOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogX2RhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzRGF0ZTogdGhpcy51dGlsU2VydmljZS5nZXREYXRlKF9kYXRlKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZUZvcm1hdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkOiB0aGlzLnV0aWxTZXJ2aWNlLmZvcm1hdERhdGUoX2RhdGUsIGRhdGVGb3JtYXQsIG1vbnRoTGFiZWxzKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXBvYzogdGhpcy51dGlsU2VydmljZS5nZXRFcG9jVGltZShfZGF0ZSlcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luID0geWVhcjtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJhbmdlRGF0ZVNlbGVjdGlvbih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQmVnaW46IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzRGF0ZTogdGhpcy51dGlsU2VydmljZS5nZXREYXRlKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlRm9ybWF0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWQ6IHRoaXMudXRpbFNlcnZpY2UuZm9ybWF0RGF0ZSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luLCBkYXRlRm9ybWF0LCBtb250aExhYmVscyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVwb2M6IHRoaXMudXRpbFNlcnZpY2UuZ2V0RXBvY1RpbWUodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbilcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5lbmQgPSB5ZWFyO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmFuZ2VEYXRlU2VsZWN0aW9uKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNCZWdpbjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuZW5kLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBqc0RhdGU6IHRoaXMudXRpbFNlcnZpY2UuZ2V0RGF0ZSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmVuZCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVGb3JtYXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZDogdGhpcy51dGlsU2VydmljZS5mb3JtYXREYXRlKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuZW5kLCBkYXRlRm9ybWF0LCBtb250aExhYmVscyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVwb2M6IHRoaXMudXRpbFNlcnZpY2UuZ2V0RXBvY1RpbWUodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5lbmQpXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMub3B0cy5zaG93VGltZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0ZUNoYW5nZWQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXRpbFNlcnZpY2UuZ2V0RGF0ZU1vZGVsKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlRm9ybWF0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9udGhMYWJlbHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlUmFuZ2VEYXRlc0RlbGltaXRlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybkZvcm1hdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9zZVNlbGVjdG9yT25EYXRlU2VsZWN0XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0ZUNoYW5nZWQoXHJcbiAgICAgICAgICAgICAgICB0aGlzLnV0aWxTZXJ2aWNlLmdldERhdGVNb2RlbCh5ZWFyLCBudWxsLCBkYXRlRm9ybWF0LCBtb250aExhYmVscywgZGF0ZVJhbmdlRGF0ZXNEZWxpbWl0ZXIsIHJldHVybkZvcm1hdCksXHJcbiAgICAgICAgICAgICAgICBzaG93VGltZSA/IGZhbHNlIDogY2xvc2VTZWxlY3Rvck9uRGF0ZVNlbGVjdFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG1vbnRoU3RhcnRJZHgoeTogbnVtYmVyLCBtOiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgICAgIC8vIE1vbnRoIHN0YXJ0IGluZGV4XHJcbiAgICAgICAgY29uc3QgZDogRGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgZC5zZXREYXRlKDEpO1xyXG4gICAgICAgIGQuc2V0TW9udGgobSAtIDEpO1xyXG4gICAgICAgIGQuc2V0RnVsbFllYXIoeSk7XHJcbiAgICAgICAgY29uc3QgaWR4ID0gZC5nZXREYXkoKSArIHRoaXMuc3VuZGF5SWR4KCk7XHJcbiAgICAgICAgcmV0dXJuIGlkeCA+PSA3ID8gaWR4IC0gNyA6IGlkeDtcclxuICAgIH1cclxuXHJcbiAgICBkYXlzSW5Nb250aChtOiBudW1iZXIsIHk6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgICAgLy8gUmV0dXJuIG51bWJlciBvZiBkYXlzIG9mIGN1cnJlbnQgbW9udGhcclxuICAgICAgICByZXR1cm4gbmV3IERhdGUoeSwgbSwgMCkuZ2V0RGF0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGRheXNJblByZXZNb250aChtOiBudW1iZXIsIHk6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgICAgLy8gUmV0dXJuIG51bWJlciBvZiBkYXlzIG9mIHRoZSBwcmV2aW91cyBtb250aFxyXG4gICAgICAgIGNvbnN0IGQ6IERhdGUgPSB0aGlzLmdldERhdGUoeSwgbSwgMSk7XHJcbiAgICAgICAgZC5zZXRNb250aChkLmdldE1vbnRoKCkgLSAxKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXlzSW5Nb250aChkLmdldE1vbnRoKCkgKyAxLCBkLmdldEZ1bGxZZWFyKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGlzQ3VyckRheShkOiBudW1iZXIsIG06IG51bWJlciwgeTogbnVtYmVyLCBjbW86IG51bWJlciwgdG9kYXk6IElNeURhdGUpOiBib29sZWFuIHtcclxuICAgICAgICAvLyBDaGVjayBpcyBhIGdpdmVuIGRhdGUgdGhlIHRvZGF5XHJcbiAgICAgICAgcmV0dXJuIGQgPT09IHRvZGF5LmRheSAmJiBtID09PSB0b2RheS5tb250aCAmJiB5ID09PSB0b2RheS55ZWFyICYmIGNtbyA9PT0gTW9udGhJZC5jdXJyO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFdpZHRoKCkge1xyXG4gICAgICAgIGNvbnN0IGhhc1Nob3J0Q3V0cyA9IHRoaXMub3B0cy5zaG9ydGN1dHMgJiYgdGhpcy5vcHRzLnNob3J0Y3V0cy5sZW5ndGggPiAwO1xyXG4gICAgICAgIGlmICh0aGlzLm9wdHMuZGF0ZVJhbmdlICYmIHRoaXMub3B0cy5zaG93VHlwZSAhPT0gNCkge1xyXG4gICAgICAgICAgICByZXR1cm4gaGFzU2hvcnRDdXRzID8gJzY2MHB4JyA6ICc1NzRweCc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgdyA9ICAoaGFzU2hvcnRDdXRzID8gMzgwIDogMjg3KSArICh0aGlzLm9wdHMudmlld1R5cGUgPT09IFZpZXdUeXBlLlRvZ2V0aGVyID8gMjAwIDogMCk7XHJcbiAgICAgICAgICAgIHJldHVybiB3ICsgJ3B4JztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VG9kYXkoKTogSU15RGF0ZSB7XHJcbiAgICAgICAgY29uc3QgZGF0ZTogRGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgaWYgKHRoaXMub3B0cy5zaG93VGltZSkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgeWVhcjogZGF0ZS5nZXRGdWxsWWVhcigpLFxyXG4gICAgICAgICAgICAgICAgbW9udGg6IGRhdGUuZ2V0TW9udGgoKSArIDEsXHJcbiAgICAgICAgICAgICAgICBkYXk6IGRhdGUuZ2V0RGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgaG91cjogZGF0ZS5nZXRIb3VycygpLFxyXG4gICAgICAgICAgICAgICAgbWludXRlOiBkYXRlLmdldE1pbnV0ZXMoKSxcclxuICAgICAgICAgICAgICAgIHNlY29uZDogZGF0ZS5nZXRTZWNvbmRzKClcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4geyB5ZWFyOiBkYXRlLmdldEZ1bGxZZWFyKCksIG1vbnRoOiBkYXRlLmdldE1vbnRoKCkgKyAxLCBkYXk6IGRhdGUuZ2V0RGF0ZSgpIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldERheU51bWJlcihkYXRlOiBJTXlEYXRlKTogbnVtYmVyIHtcclxuICAgICAgICAvLyBHZXQgZGF5IG51bWJlcjogc3U9MCwgbW89MSwgdHU9Miwgd2U9MyAuLi5cclxuICAgICAgICBjb25zdCBkOiBEYXRlID0gdGhpcy5nZXREYXRlKGRhdGUueWVhciwgZGF0ZS5tb250aCwgZGF0ZS5kYXkpO1xyXG4gICAgICAgIHJldHVybiBkLmdldERheSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFdlZWtkYXkoZGF0ZTogSU15RGF0ZSk6IHN0cmluZyB7XHJcbiAgICAgICAgLy8gR2V0IHdlZWtkYXk6IHN1LCBtbywgdHUsIHdlIC4uLlxyXG4gICAgICAgIHJldHVybiB0aGlzLndlZWtEYXlPcHRzW3RoaXMuZ2V0RGF5TnVtYmVyKGRhdGUpXTtcclxuICAgIH1cclxuXHJcbiAgICBnZXREYXRlKHllYXI6IG51bWJlciwgbW9udGg6IG51bWJlciwgZGF5OiBudW1iZXIpOiBEYXRlIHtcclxuICAgICAgICAvLyBDcmVhdGVzIGEgZGF0ZSBvYmplY3QgZnJvbSBnaXZlbiB5ZWFyLCBtb250aCBhbmQgZGF5XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHllYXIsIG1vbnRoIC0gMSwgZGF5LCAwLCAwLCAwLCAwKTtcclxuICAgIH1cclxuXHJcbiAgICBzdW5kYXlJZHgoKTogbnVtYmVyIHtcclxuICAgICAgICAvLyBJbmRleCBvZiBTdW5kYXkgZGF5XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF5SWR4ID4gMCA/IDcgLSB0aGlzLmRheUlkeCA6IDA7XHJcbiAgICB9XHJcblxyXG4gICAgZ2VuZXJhdGVDYWxlbmRhcihtOiBudW1iZXIsIHk6IG51bWJlciwgbm90aWZ5Q2hhbmdlOiBib29sZWFuLCBpc1NlY29uZENhbGVuZGFyPzogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgIGlmICghaXNTZWNvbmRDYWxlbmRhcikge1xyXG4gICAgICAgICAgICB0aGlzLmRhdGVzLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5kYXRlc19yYW5nZS5sZW5ndGggPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB0b2RheTogSU15RGF0ZSA9IHRoaXMuZ2V0VG9kYXkoKTtcclxuICAgICAgICBjb25zdCBtb250aFN0YXJ0OiBudW1iZXIgPSB0aGlzLm1vbnRoU3RhcnRJZHgoeSwgbSk7XHJcbiAgICAgICAgY29uc3QgZEluVGhpc006IG51bWJlciA9IHRoaXMuZGF5c0luTW9udGgobSwgeSk7XHJcbiAgICAgICAgY29uc3QgZEluUHJldk06IG51bWJlciA9IHRoaXMuZGF5c0luUHJldk1vbnRoKG0sIHkpO1xyXG5cclxuICAgICAgICBsZXQgZGF5TmJyID0gMTtcclxuICAgICAgICBsZXQgY21vOiBudW1iZXIgPSBNb250aElkLnByZXY7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCA3OyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3Qgd2VlazogQXJyYXk8SU15Q2FsZW5kYXJEYXk+ID0gW107XHJcbiAgICAgICAgICAgIGlmIChpID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBGaXJzdCB3ZWVrXHJcbiAgICAgICAgICAgICAgICBjb25zdCBwbSA9IGRJblByZXZNIC0gbW9udGhTdGFydCArIDE7XHJcbiAgICAgICAgICAgICAgICAvLyBQcmV2aW91cyBtb250aFxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IHBtOyBqIDw9IGRJblByZXZNOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRlOiBJTXlEYXRlID0geyB5ZWFyOiBtID09PSAxID8geSAtIDEgOiB5LCBtb250aDogbSA9PT0gMSA/IDEyIDogbSAtIDEsIGRheTogaiB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHdlZWsucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVPYmo6IGRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNtbyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyckRheTogdGhpcy5pc0N1cnJEYXkoaiwgbSwgeSwgY21vLCB0b2RheSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiB0aGlzLnV0aWxTZXJ2aWNlLmlzRGlzYWJsZWREYXRlKGRhdGUsIHRoaXMub3B0cyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlZERhdGU6IHRoaXMudXRpbFNlcnZpY2UuaXNNYXJrZWREYXRlKGRhdGUsIHRoaXMub3B0cy5tYXJrRGF0ZXMsIHRoaXMub3B0cy5tYXJrV2Vla2VuZHMpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoaWdobGlnaHQ6IHRoaXMudXRpbFNlcnZpY2UuaXNIaWdobGlnaHRlZERhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRzLnN1bkhpZ2hsaWdodCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3B0cy5zYXRIaWdobGlnaHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdHMuaGlnaGxpZ2h0RGF0ZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGNtbyA9IE1vbnRoSWQuY3VycjtcclxuICAgICAgICAgICAgICAgIC8vIEN1cnJlbnQgbW9udGhcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRheXNMZWZ0OiBudW1iZXIgPSA3IC0gd2Vlay5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGRheXNMZWZ0OyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRlOiBJTXlEYXRlID0geyB5ZWFyOiB5LCBtb250aDogbSwgZGF5OiBkYXlOYnIgfTtcclxuICAgICAgICAgICAgICAgICAgICB3ZWVrLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlT2JqOiBkYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbW8sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJEYXk6IHRoaXMuaXNDdXJyRGF5KGRheU5iciwgbSwgeSwgY21vLCB0b2RheSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiB0aGlzLnV0aWxTZXJ2aWNlLmlzRGlzYWJsZWREYXRlKGRhdGUsIHRoaXMub3B0cyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlZERhdGU6IHRoaXMudXRpbFNlcnZpY2UuaXNNYXJrZWREYXRlKGRhdGUsIHRoaXMub3B0cy5tYXJrRGF0ZXMsIHRoaXMub3B0cy5tYXJrV2Vla2VuZHMpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoaWdobGlnaHQ6IHRoaXMudXRpbFNlcnZpY2UuaXNIaWdobGlnaHRlZERhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRzLnN1bkhpZ2hsaWdodCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3B0cy5zYXRIaWdobGlnaHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdHMuaGlnaGxpZ2h0RGF0ZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGRheU5icisrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gUmVzdCBvZiB0aGUgd2Vla3NcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAxOyBqIDwgODsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRheU5iciA+IGRJblRoaXNNKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5leHQgbW9udGhcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF5TmJyID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY21vID0gTW9udGhJZC5uZXh0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRlOiBJTXlEYXRlID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB5ZWFyOiBjbW8gPT09IE1vbnRoSWQubmV4dCAmJiBtID09PSAxMiA/IHkgKyAxIDogeSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW9udGg6IGNtbyA9PT0gTW9udGhJZC5jdXJyID8gbSA6IGNtbyA9PT0gTW9udGhJZC5uZXh0ICYmIG0gPCAxMiA/IG0gKyAxIDogMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF5OiBkYXlOYnJcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHdlZWsucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVPYmo6IGRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNtbyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyckRheTogdGhpcy5pc0N1cnJEYXkoZGF5TmJyLCBtLCB5LCBjbW8sIHRvZGF5KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IHRoaXMudXRpbFNlcnZpY2UuaXNEaXNhYmxlZERhdGUoZGF0ZSwgdGhpcy5vcHRzKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFya2VkRGF0ZTogdGhpcy51dGlsU2VydmljZS5pc01hcmtlZERhdGUoZGF0ZSwgdGhpcy5vcHRzLm1hcmtEYXRlcywgdGhpcy5vcHRzLm1hcmtXZWVrZW5kcyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodDogdGhpcy51dGlsU2VydmljZS5pc0hpZ2hsaWdodGVkRGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdHMuc3VuSGlnaGxpZ2h0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRzLnNhdEhpZ2hsaWdodCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3B0cy5oaWdobGlnaHREYXRlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF5TmJyKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3Qgd2Vla05icjogbnVtYmVyID1cclxuICAgICAgICAgICAgICAgIHRoaXMub3B0cy5zaG93V2Vla051bWJlcnMgJiYgdGhpcy5vcHRzLmZpcnN0RGF5T2ZXZWVrID09PSBNT1xyXG4gICAgICAgICAgICAgICAgICAgID8gdGhpcy51dGlsU2VydmljZS5nZXRXZWVrTnVtYmVyKHdlZWtbMF0uZGF0ZU9iailcclxuICAgICAgICAgICAgICAgICAgICA6IDA7XHJcbiAgICAgICAgICAgIGlmICghaXNTZWNvbmRDYWxlbmRhcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRlcy5wdXNoKHsgd2Vlaywgd2Vla05iciwgeWVhcjogeSB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0ZXNfcmFuZ2UucHVzaCh7IHdlZWssIHdlZWtOYnIsIHllYXI6IHkgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc2V0RGF0ZVZpZXdIZWFkZXJCdG5EaXNhYmxlZFN0YXRlKG0sIHksIGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG5cclxuICAgICAgICBpZiAobm90aWZ5Q2hhbmdlKSB7XHJcbiAgICAgICAgICAgIC8vIE5vdGlmeSBwYXJlbnRcclxuICAgICAgICAgICAgdGhpcy5jYWxlbmRhclZpZXdDaGFuZ2VkKHtcclxuICAgICAgICAgICAgICAgIHllYXI6IHksXHJcbiAgICAgICAgICAgICAgICBtb250aDogbSxcclxuICAgICAgICAgICAgICAgIGZpcnN0OiB7IG51bWJlcjogMSwgd2Vla2RheTogdGhpcy5nZXRXZWVrZGF5KHsgeWVhcjogeSwgbW9udGg6IG0sIGRheTogMSB9KSB9LFxyXG4gICAgICAgICAgICAgICAgbGFzdDogeyBudW1iZXI6IGRJblRoaXNNLCB3ZWVrZGF5OiB0aGlzLmdldFdlZWtkYXkoeyB5ZWFyOiB5LCBtb250aDogbSwgZGF5OiBkSW5UaGlzTSB9KSB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXREYXRlVmlld0hlYWRlckJ0bkRpc2FibGVkU3RhdGUobTogbnVtYmVyLCB5OiBudW1iZXIsIGlzU2Vjb25kQ2FsZW5kYXI6IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICBsZXQgZHBtID0gZmFsc2U7XHJcbiAgICAgICAgbGV0IGRubSA9IGZhbHNlO1xyXG5cclxuICAgICAgICBjb25zdCB7IGRpc2FibGVVbnRpbCwgZGlzYWJsZVNpbmNlLCBtaW5ZZWFyLCBtYXhZZWFyIH0gPSB0aGlzLm9wdHM7XHJcblxyXG4gICAgICAgIGRwbSA9IHRoaXMudXRpbFNlcnZpY2UuaXNNb250aERpc2FibGVkQnlEaXNhYmxlVW50aWwoXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHllYXI6IG0gPT09IDEgPyB5IC0gMSA6IHksXHJcbiAgICAgICAgICAgICAgICBtb250aDogbSA9PT0gMSA/IDEyIDogbSAtIDEsXHJcbiAgICAgICAgICAgICAgICBkYXk6IHRoaXMuZGF5c0luTW9udGgobSA9PT0gMSA/IDEyIDogbSAtIDEsIG0gPT09IDEgPyB5IC0gMSA6IHkpXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGRpc2FibGVVbnRpbFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgZG5tID0gdGhpcy51dGlsU2VydmljZS5pc01vbnRoRGlzYWJsZWRCeURpc2FibGVTaW5jZShcclxuICAgICAgICAgICAgeyB5ZWFyOiBtID09PSAxMiA/IHkgKyAxIDogeSwgbW9udGg6IG0gPT09IDEyID8gMSA6IG0gKyAxLCBkYXk6IDEgfSxcclxuICAgICAgICAgICAgZGlzYWJsZVNpbmNlXHJcbiAgICAgICAgKTtcclxuICAgICAgICBpZiAoIWlzU2Vjb25kQ2FsZW5kYXIpIHtcclxuICAgICAgICAgICAgdGhpcy5wcmV2Vmlld0Rpc2FibGVkID0gKG0gPT09IDEgJiYgeSA9PT0gbWluWWVhcikgfHwgZHBtO1xyXG4gICAgICAgICAgICB0aGlzLm5leHRWaWV3RGlzYWJsZWQgPSAobSA9PT0gMTIgJiYgeSA9PT0gbWF4WWVhcikgfHwgZG5tO1xyXG4gICAgICAgICAgICB0aGlzLnByZXZEb2JWaWV3RGlzYWJsZWQgPSB5ID09PSBtaW5ZZWFyIHx8IGRwbTtcclxuICAgICAgICAgICAgdGhpcy5uZXh0RG9iVmlld0Rpc2FibGVkID0geSA9PT0gbWF4WWVhciB8fCBkbm07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5wcmV2Vmlld0Rpc2FibGVkX3JhbmdlID0gKG0gPT09IDEgJiYgeSA9PT0gbWluWWVhcikgfHwgZHBtO1xyXG4gICAgICAgICAgICB0aGlzLm5leHRWaWV3RGlzYWJsZWRfcmFuZ2UgPSAobSA9PT0gMTIgJiYgeSA9PT0gbWF4WWVhcikgfHwgZG5tO1xyXG4gICAgICAgICAgICB0aGlzLnByZXZEb2JWaWV3RGlzYWJsZWRfcmFuZ2UgPSB5ID09PSBtaW5ZZWFyIHx8IGRwbTtcclxuICAgICAgICAgICAgdGhpcy5uZXh0RG9iVmlld0Rpc2FibGVkX3JhbmdlID0geSA9PT0gbWF4WWVhciB8fCBkbm07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldE1vbnRoVmlld0hlYWRlckJ0bkRpc2FibGVkU3RhdGUoeTogbnVtYmVyLCBpc1NlY29uZENhbGVuZGFyOiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgbGV0IGRwbSA9IGZhbHNlO1xyXG4gICAgICAgIGxldCBkbm0gPSBmYWxzZTtcclxuXHJcbiAgICAgICAgY29uc3QgeyBkaXNhYmxlVW50aWwsIGRpc2FibGVTaW5jZSwgbWluWWVhciwgbWF4WWVhciB9ID0gdGhpcy5vcHRzO1xyXG5cclxuICAgICAgICBkcG0gPSB0aGlzLnV0aWxTZXJ2aWNlLmlzTW9udGhEaXNhYmxlZEJ5RGlzYWJsZVVudGlsKHsgeWVhcjogeSAtIDEsIG1vbnRoOiAxMiwgZGF5OiAzMSB9LCBkaXNhYmxlVW50aWwpO1xyXG4gICAgICAgIGRubSA9IHRoaXMudXRpbFNlcnZpY2UuaXNNb250aERpc2FibGVkQnlEaXNhYmxlU2luY2UoeyB5ZWFyOiB5ICsgMSwgbW9udGg6IDEsIGRheTogMSB9LCBkaXNhYmxlU2luY2UpO1xyXG4gICAgICAgIGlmICghaXNTZWNvbmRDYWxlbmRhcikge1xyXG4gICAgICAgICAgICB0aGlzLnByZXZWaWV3RGlzYWJsZWQgPSB5ID09PSBtaW5ZZWFyIHx8IGRwbTtcclxuICAgICAgICAgICAgdGhpcy5uZXh0Vmlld0Rpc2FibGVkID0geSA9PT0gbWF4WWVhciB8fCBkbm07XHJcbiAgICAgICAgICAgIHRoaXMucHJldkRvYlZpZXdEaXNhYmxlZCA9IHkgPT09IG1pblllYXIgfHwgZHBtO1xyXG4gICAgICAgICAgICB0aGlzLm5leHREb2JWaWV3RGlzYWJsZWQgPSB5ID09PSBtYXhZZWFyIHx8IGRubTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnByZXZWaWV3RGlzYWJsZWRfcmFuZ2UgPSB5ID09PSBtaW5ZZWFyIHx8IGRwbTtcclxuICAgICAgICAgICAgdGhpcy5uZXh0Vmlld0Rpc2FibGVkX3JhbmdlID0geSA9PT0gbWF4WWVhciB8fCBkbm07XHJcbiAgICAgICAgICAgIHRoaXMucHJldkRvYlZpZXdEaXNhYmxlZF9yYW5nZSA9IHkgPT09IG1pblllYXIgfHwgZHBtO1xyXG4gICAgICAgICAgICB0aGlzLm5leHREb2JWaWV3RGlzYWJsZWRfcmFuZ2UgPSB5ID09PSBtYXhZZWFyIHx8IGRubTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0WWVhclZpZXdIZWFkZXJCdG5EaXNhYmxlZFN0YXRlKHlwOiBudW1iZXIsIHluOiBudW1iZXIsIGlzU2Vjb25kQ2FsZW5kYXI6IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICBsZXQgZHB5ID0gZmFsc2U7XHJcbiAgICAgICAgbGV0IGRueSA9IGZhbHNlO1xyXG5cclxuICAgICAgICBjb25zdCB7IGRpc2FibGVVbnRpbCwgZGlzYWJsZVNpbmNlLCBtaW5ZZWFyLCBtYXhZZWFyIH0gPSB0aGlzLm9wdHM7XHJcblxyXG4gICAgICAgIGRweSA9IHRoaXMudXRpbFNlcnZpY2UuaXNNb250aERpc2FibGVkQnlEaXNhYmxlVW50aWwoeyB5ZWFyOiB5cCAtIDEsIG1vbnRoOiAxMiwgZGF5OiAzMSB9LCBkaXNhYmxlVW50aWwpO1xyXG4gICAgICAgIGRueSA9IHRoaXMudXRpbFNlcnZpY2UuaXNNb250aERpc2FibGVkQnlEaXNhYmxlU2luY2UoeyB5ZWFyOiB5biArIDEsIG1vbnRoOiAxLCBkYXk6IDEgfSwgZGlzYWJsZVNpbmNlKTtcclxuICAgICAgICBpZiAoIWlzU2Vjb25kQ2FsZW5kYXIpIHtcclxuICAgICAgICAgICAgdGhpcy5wcmV2Vmlld0Rpc2FibGVkID0geXAgPD0gbWluWWVhciB8fCBkcHk7XHJcbiAgICAgICAgICAgIHRoaXMubmV4dFZpZXdEaXNhYmxlZCA9IHluID49IG1heFllYXIgfHwgZG55O1xyXG4gICAgICAgICAgICB0aGlzLnByZXZEb2JWaWV3RGlzYWJsZWQgPSB5cCA8PSBtaW5ZZWFyIHx8IGRweTtcclxuICAgICAgICAgICAgdGhpcy5uZXh0RG9iVmlld0Rpc2FibGVkID0geW4gPj0gbWF4WWVhciB8fCBkbnk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5wcmV2Vmlld0Rpc2FibGVkX3JhbmdlID0geXAgPD0gbWluWWVhciB8fCBkcHk7XHJcbiAgICAgICAgICAgIHRoaXMubmV4dFZpZXdEaXNhYmxlZF9yYW5nZSA9IHluID49IG1heFllYXIgfHwgZG55O1xyXG4gICAgICAgICAgICB0aGlzLnByZXZEb2JWaWV3RGlzYWJsZWRfcmFuZ2UgPSB5cCA8PSBtaW5ZZWFyIHx8IGRweTtcclxuICAgICAgICAgICAgdGhpcy5uZXh0RG9iVmlld0Rpc2FibGVkX3JhbmdlID0geW4gPj0gbWF4WWVhciB8fCBkbnk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgb25Db250YWluZXJDbGljayhldmVudDogRXZlbnQpIHtcclxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIH1cclxuICAgIG9uQ2xpY2tUaW1lQnRuKGV2ZW50OiBFdmVudCkge1xyXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIGlmICh0aGlzLm9wdHMuZGF0ZVJhbmdlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJlZ2luSXNJbml0aWFsaXplZERhdGUgPSB0aGlzLnV0aWxTZXJ2aWNlLmlzSW5pdGlhbGl6ZWREYXRlKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4pO1xyXG4gICAgICAgICAgICBjb25zdCBlbmRJc0luaXRpYWxpemVkRGF0ZSA9IHRoaXMudXRpbFNlcnZpY2UuaXNJbml0aWFsaXplZERhdGUodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5lbmQpO1xyXG4gICAgICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICBpZiAoIWJlZ2luSXNJbml0aWFsaXplZERhdGUgfHwgIWVuZElzSW5pdGlhbGl6ZWREYXRlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyDnm7TmjqXngrnlh7vnoa7lrprmmL7npLrmnKzmnIjlkozkuIvmnIhcclxuICAgICAgICAgICAgICAgIGlmICghYmVnaW5Jc0luaXRpYWxpemVkRGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4gPSB7IHllYXI6IG5vdy5nZXRGdWxsWWVhcigpLCBtb250aDogbm93LmdldE1vbnRoKCkgKyAxLCBkYXk6IG5vdy5nZXREYXRlKCkgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGxldCBlbmRZZWFyID0gbm93LmdldEZ1bGxZZWFyKCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgZW5kbW9udGggPSBub3cuZ2V0TW9udGgoKSArIDE7XHJcbiAgICAgICAgICAgICAgICBpZiAoZW5kbW9udGggPj0gMTIpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbmRZZWFyID0gZW5kWWVhciArIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgZW5kbW9udGggPSAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgZW5kbW9udGggPSBlbmRtb250aCArIHRoaXMub3B0cy5tb250aFJhbmdlVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmVuZCA9IHsgLi4udGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbiB9O1xyXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5lbmQgPSB7IHllYXI6IGVuZFllYXIsIG1vbnRoOiBlbmRtb250aCwgZGF5OiBub3cuZ2V0RGF0ZSgpIH07XHJcbiAgICAgICAgICAgICAgICAvLyDngrnlh7tzZWxlY3RUaW1l5LmL5YmN57uZZGF0ZVJhbmdl6LWL5Lik5Liq5pe26Ze05YC8XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRpbWVWbGF1ZSA9IHRoaXMuZ2V0VGltZVN0cihub3cpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy50aW1lVmxhdWVfcmFuZ2UgPSB0aGlzLmdldFRpbWVTdHIobm93KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCF0aGlzLnRpbWVWbGF1ZV9yYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50aW1lVmxhdWVfcmFuZ2UgPSB0aGlzLmdldFRpbWVTdHIobm93KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMudXRpbFNlcnZpY2UuaXNJbml0aWFsaXplZERhdGUodGhpcy5zZWxlY3RlZERhdGUpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgLy8g54K55Ye7c2VsZWN0VGltZeS5i+WJjei1i+WAvFxyXG4gICAgICAgICAgICAgICAgdGhpcy50aW1lVmxhdWUgPSB0aGlzLmdldFRpbWVTdHIobm93KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlID0geyB5ZWFyOiBub3cuZ2V0RnVsbFllYXIoKSwgbW9udGg6IG5vdy5nZXRNb250aCgpICsgMSwgZGF5OiBub3cuZ2V0RGF0ZSgpIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICghdGhpcy50aW1lVmxhdWUpIHtcclxuICAgICAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcclxuICAgICAgICAgICAgLy8g54K55Ye7c2VsZWN0VGltZeS5i+WJjei1i+WAvFxyXG4gICAgICAgICAgICB0aGlzLnRpbWVWbGF1ZSA9IHRoaXMuZ2V0VGltZVN0cihub3cpO1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMudXRpbFNlcnZpY2UuaXNJbml0aWFsaXplZERhdGUodGhpcy5zZWxlY3RlZERhdGUpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZSA9IHsgeWVhcjogbm93LmdldEZ1bGxZZWFyKCksIG1vbnRoOiBub3cuZ2V0TW9udGgoKSArIDEsIGRheTogbm93LmdldERhdGUoKSB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0WWVhcikge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdFllYXIgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0TW9udGgpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RNb250aCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0WWVhcl9yYW5nZSkge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdFllYXJfcmFuZ2UgPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdE1vbnRoX3JhbmdlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0TW9udGhfcmFuZ2UgPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc2VsZWN0VGltZSA9ICF0aGlzLnNlbGVjdFRpbWU7XHJcbiAgICAgICAgdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0VGltZVZhbHVlKGlzRGF0ZVJhbmdlKSB7XHJcbiAgICAgICAgY29uc3QgdCA9IHsgc3RhcnQ6IG51bGwsIGVuZDogbnVsbCB9O1xyXG4gICAgICAgIGlmICh0aGlzLnRpbWVWbGF1ZSkge1xyXG4gICAgICAgICAgICBjb25zdCB0aW1lQXJyID0gdGhpcy50aW1lVmxhdWUucmVwbGFjZSgn5pe2JywgJzonKS5yZXBsYWNlKCfliIYnLCAnOicpLnJlcGxhY2UoJ+enkicsICcnKS5zcGxpdCgnOicpO1xyXG4gICAgICAgICAgICBpZiAodGltZUFyci5sZW5ndGggPj0gMikge1xyXG4gICAgICAgICAgICAgICAgdC5zdGFydCA9IHtcclxuICAgICAgICAgICAgICAgICAgICBob3VyOiB0aW1lQXJyWzBdLFxyXG4gICAgICAgICAgICAgICAgICAgIG1pbnV0ZTogdGltZUFyclsxXSxcclxuICAgICAgICAgICAgICAgICAgICBzZWNvbmQ6IHRpbWVBcnJbMl0gPyB0aW1lQXJyWzJdIDogMFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5vd0RhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICBjb25zdCBob3VyID0gbm93RGF0ZS5nZXRIb3VycygpO1xyXG4gICAgICAgICAgICBjb25zdCBtaW51dGUgPSBub3dEYXRlLmdldE1pbnV0ZXMoKTtcclxuICAgICAgICAgICAgY29uc3Qgc2Vjb25kID0gbm93RGF0ZS5nZXRTZWNvbmRzKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5vcHRzLmRhdGVSYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgdC5zdGFydCA9IHsgaG91cjogMCwgbWludXRlOiAwLCBzZWNvbmQ6IDAgfTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHQuc3RhcnQgPSB7IGhvdXIsIG1pbnV0ZSwgc2Vjb25kIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChpc0RhdGVSYW5nZSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy50aW1lVmxhdWVfcmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVBcnJfcmFuZ2UgPSB0aGlzLnRpbWVWbGF1ZV9yYW5nZS5yZXBsYWNlKCfml7YnLCAnOicpLnJlcGxhY2UoJ+WIhicsICc6JykucmVwbGFjZSgn56eSJywgJycpLnNwbGl0KCc6Jyk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGltZUFycl9yYW5nZS5sZW5ndGggPj0gMikge1xyXG4gICAgICAgICAgICAgICAgICAgIHQuZW5kID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBob3VyOiB0aW1lQXJyX3JhbmdlWzBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW51dGU6IHRpbWVBcnJfcmFuZ2VbMV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlY29uZDogdGltZUFycl9yYW5nZVsyXSA/IHRpbWVBcnJfcmFuZ2VbMl0gOiAwXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGhvdXIgPSAyMztcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1pbnV0ZSA9IDU5O1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2Vjb25kID0gNTk7XHJcbiAgICAgICAgICAgICAgICB0LmVuZCA9IHsgaG91ciwgbWludXRlLCBzZWNvbmQgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIG9uQ2xpY2tPa0J0bihldmVudDogRXZlbnQpIHtcclxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICBsZXQgdGltZU9iaiA9IG51bGw7XHJcbiAgICAgICAgbGV0IHRpbWVPYmpfcmFuZ2UgPSBudWxsO1xyXG4gICAgICAgIGxldCBzZWxlY3RlZERhdGUgPSBudWxsO1xyXG4gICAgICAgIGxldCBzZWxlY3RlZERhdGVfcmFuZ2UgPSBudWxsO1xyXG4gICAgICAgIGlmICh0aGlzLm9wdHMuc2hvd1RpbWUpIHtcclxuICAgICAgICAgICAgY29uc3QgeyBzdGFydCwgZW5kIH0gPSB0aGlzLmdldFRpbWVWYWx1ZSh0aGlzLm9wdHMuZGF0ZVJhbmdlKTtcclxuICAgICAgICAgICAgdGltZU9iaiA9IHN0YXJ0O1xyXG4gICAgICAgICAgICB0aW1lT2JqX3JhbmdlID0gZW5kO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB7IGRhdGVGb3JtYXQsIG1vbnRoTGFiZWxzLCBkYXRlUmFuZ2VEYXRlc0RlbGltaXRlciwgY2xvc2VTZWxlY3Rvck9uRGF0ZVNlbGVjdCwgcmV0dXJuRm9ybWF0IH0gPSB0aGlzLm9wdHM7XHJcbiAgICAgICAgaWYgKCF0aGlzLm9wdHMuZGF0ZVJhbmdlKSB7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkRGF0ZSA9IHsgLi4udGhpcy5pbml0aWFsaXplZERhdGUodGhpcy5zZWxlY3RlZERhdGUpLCAuLi50aW1lT2JqIH07XHJcbiAgICAgICAgICAgIGNvbnN0IGlzSW5EaXNhYmxlUmFuZ2UgPSB0aGlzLnV0aWxTZXJ2aWNlLmlzRGlzYWJsZWREYXRlKHNlbGVjdGVkRGF0ZSwgdGhpcy5vcHRzKTtcclxuICAgICAgICAgICAgY29uc3QgZWFybGllciA9IHRoaXMudXRpbFNlcnZpY2UuaXNEYXRlU2FtZU9yRWFybGllcihzZWxlY3RlZERhdGUsIHRoaXMub3B0cy5kaXNhYmxlVW50aWwpO1xyXG5cclxuICAgICAgICAgICAgc2VsZWN0ZWREYXRlID0gIWlzSW5EaXNhYmxlUmFuZ2VcclxuICAgICAgICAgICAgICAgID8gc2VsZWN0ZWREYXRlXHJcbiAgICAgICAgICAgICAgICA6IHsgLi4uc2VsZWN0ZWREYXRlLCAuLi4oZWFybGllciA/IHRoaXMub3B0cy5kaXNhYmxlVW50aWwgOiB0aGlzLm9wdHMuZGlzYWJsZVNpbmNlKSB9O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJlZ2luID0geyAuLi50aGlzLmluaXRpYWxpemVkRGF0ZSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luKSwgLi4udGltZU9iaiB9O1xyXG4gICAgICAgICAgICBjb25zdCBlbmQgPSB7IC4uLnRoaXMuaW5pdGlhbGl6ZWREYXRlKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuZW5kLCBiZWdpbiksIC4uLnRpbWVPYmpfcmFuZ2UgfTtcclxuICAgICAgICAgICAgc2VsZWN0ZWREYXRlX3JhbmdlID0geyBiZWdpbiwgZW5kIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGRhdGVNb2RlbDogSU15RGF0ZU1vZGVsID0gdGhpcy51dGlsU2VydmljZS5nZXREYXRlTW9kZWwoXHJcbiAgICAgICAgICAgIHNlbGVjdGVkRGF0ZSxcclxuICAgICAgICAgICAgc2VsZWN0ZWREYXRlX3JhbmdlLFxyXG4gICAgICAgICAgICBkYXRlRm9ybWF0LFxyXG4gICAgICAgICAgICBtb250aExhYmVscyxcclxuICAgICAgICAgICAgZGF0ZVJhbmdlRGF0ZXNEZWxpbWl0ZXIsXHJcbiAgICAgICAgICAgIHJldHVybkZvcm1hdFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgdGhpcy5kYXRlQ2hhbmdlZChkYXRlTW9kZWwsIGNsb3NlU2VsZWN0b3JPbkRhdGVTZWxlY3QpO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXRpYWxpemVkRGF0ZShkYXRlOiBJTXlEYXRlLCBvdGhlckRhdGU6IElNeURhdGUgPSB7IHllYXI6IDAsIG1vbnRoOiAwLCBkYXk6IDAgfSk6IElNeURhdGUge1xyXG4gICAgICAgIGNvbnN0IGRheXNJbk1vbnRoOiBBcnJheTxudW1iZXI+ID0gWzMxLCAyOCwgMzEsIDMwLCAzMSwgMzAsIDMxLCAzMSwgMzAsIDMxLCAzMCwgMzFdO1xyXG4gICAgICAgIGlmICghdGhpcy51dGlsU2VydmljZS5pc0luaXRpYWxpemVkRGF0ZShkYXRlKSAmJiAhdGhpcy51dGlsU2VydmljZS5pc0luaXRpYWxpemVkRGF0ZShvdGhlckRhdGUpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHllYXIgPSBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vbnRoID0gbmV3IERhdGUoKS5nZXRNb250aCgpICsgMTtcclxuICAgICAgICAgICAgY29uc3QgZGF5ID0gbmV3IERhdGUoKS5nZXREYXRlKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnV0aWxTZXJ2aWNlLmlzRGlzYWJsZWREYXRlKHsgeWVhciwgbW9udGgsIGRheSB9LCB0aGlzLm9wdHMpID8gdGhpcy5vcHRzLmRpc2FibGVVbnRpbCA6IHsgeWVhciwgbW9udGgsIGRheSB9O1xyXG4gICAgICAgIH0gZWxzZSBpZiAoIXRoaXMudXRpbFNlcnZpY2UuaXNJbml0aWFsaXplZERhdGUoZGF0ZSkpIHtcclxuICAgICAgICAgICAgY29uc3QgeWVhciA9IG90aGVyRGF0ZS5tb250aCArIDEgPiAxMiA/IG90aGVyRGF0ZS55ZWFyICsgMSA6IG90aGVyRGF0ZS55ZWFyO1xyXG4gICAgICAgICAgICBsZXQgbW9udGggPSBvdGhlckRhdGUubW9udGggKyAxID4gMTIgPyAxIDogb3RoZXJEYXRlLm1vbnRoICsgdGhpcy5vcHRzLm1vbnRoUmFuZ2VWYWx1ZTtcclxuICAgICAgICAgICAgaWYgKCFkYXRlLm1vbnRoKSB7XHJcbiAgICAgICAgICAgICAgICBtb250aCA9IG90aGVyRGF0ZS5tb250aDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBkYXkgPSBvdGhlckRhdGUuZGF5IDwgMSB8fCBvdGhlckRhdGUuZGF5ID4gZGF5c0luTW9udGhbbW9udGggLSAxXSA/IDEgOiBvdGhlckRhdGUuZGF5O1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy51dGlsU2VydmljZS5pc0Rpc2FibGVkRGF0ZSh7IHllYXIsIG1vbnRoLCBkYXkgfSwgdGhpcy5vcHRzKSA/IHRoaXMub3B0cy5kaXNhYmxlU2luY2UgOiB7IHllYXIsIG1vbnRoLCBkYXkgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGRhdGU7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0VGltZShkYXRlOiBhbnkpIHtcclxuICAgICAgICBjb25zdCB7IGRhdGVGb3JtYXQsIG1vbnRoTGFiZWxzLCBkYXRlUmFuZ2VEYXRlc0RlbGltaXRlciwgY2xvc2VTZWxlY3Rvck9uRGF0ZVNlbGVjdCwgcmV0dXJuRm9ybWF0IH0gPSB0aGlzLm9wdHM7XHJcbiAgICAgICAgaWYgKGRhdGUgaW5zdGFuY2VvZiBEYXRlKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdHMuc2hvd1R5cGUgIT09IDQgJiYgIXRoaXMub3B0cy5kYXRlUmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgIGxldCB0YXJnZXREYXRlOiBJTXlEYXRlO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0cy5zaG93VGltZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldERhdGUgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHllYXI6IGRhdGUuZ2V0RnVsbFllYXIoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW9udGg6IGRhdGUuZ2V0TW9udGgoKSArIDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRheTogZGF0ZS5nZXREYXRlKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhvdXI6IGRhdGUuZ2V0SG91cnMoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWludXRlOiBkYXRlLmdldE1pbnV0ZXMoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2Vjb25kOiBkYXRlLmdldFNlY29uZHMoKVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldERhdGUgPSB7IHllYXI6IGRhdGUuZ2V0RnVsbFllYXIoKSwgbW9udGg6IGRhdGUuZ2V0TW9udGgoKSArIDEsIGRheTogZGF0ZS5nZXREYXRlKCkgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVNb2RlbDogSU15RGF0ZU1vZGVsID0gdGhpcy51dGlsU2VydmljZS5nZXREYXRlTW9kZWwoXHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVGb3JtYXQsXHJcbiAgICAgICAgICAgICAgICAgICAgbW9udGhMYWJlbHMsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZVJhbmdlRGF0ZXNEZWxpbWl0ZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuRm9ybWF0XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRlQ2hhbmdlZChkYXRlTW9kZWwsIGNsb3NlU2VsZWN0b3JPbkRhdGVTZWxlY3QpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8g5ZCv55So5ZGo6YCJ5oup5pe2ICDlv6vmjbfmjInpkq7lj4LmlbDkuLrljZXkuKrml6XmnJ9cclxuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVNb2RlbDogSU15RGF0ZU1vZGVsID0gdGhpcy51dGlsU2VydmljZS5nZXREYXRlTW9kZWwoXHJcbiAgICAgICAgICAgICAgICAgICAgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnV0aWxTZXJ2aWNlLmdldE5vd1dlZWtUaW1lKGRhdGUpLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVGb3JtYXQsXHJcbiAgICAgICAgICAgICAgICAgICAgbW9udGhMYWJlbHMsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZVJhbmdlRGF0ZXNEZWxpbWl0ZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuRm9ybWF0XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRlQ2hhbmdlZChkYXRlTW9kZWwsIGNsb3NlU2VsZWN0b3JPbkRhdGVTZWxlY3QpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChkYXRlIGluc3RhbmNlb2YgT2JqZWN0ICYmIHRoaXMub3B0cy5kYXRlUmFuZ2UpIHtcclxuICAgICAgICAgICAgbGV0IHRhcmdldERhdGVSYW5nZTogSU15RGF0ZVJhbmdlO1xyXG4gICAgICAgICAgICBjb25zdCB7IGJlZ2luLCBlbmQgfSA9IGRhdGU7XHJcbiAgICAgICAgICAgIGlmICghYmVnaW4gfHwgIWVuZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdHMuc2hvd1RpbWUpIHtcclxuICAgICAgICAgICAgICAgIHRhcmdldERhdGVSYW5nZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBiZWdpbjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB5ZWFyOiBiZWdpbi5nZXRGdWxsWWVhcigpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtb250aDogYmVnaW4uZ2V0TW9udGgoKSArIDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRheTogYmVnaW4uZ2V0RGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBob3VyOiBiZWdpbi5nZXRIb3VycygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW51dGU6IGJlZ2luLmdldE1pbnV0ZXMoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2Vjb25kOiBiZWdpbi5nZXRTZWNvbmRzKClcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGVuZDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB5ZWFyOiBlbmQuZ2V0RnVsbFllYXIoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW9udGg6IGVuZC5nZXRNb250aCgpICsgMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF5OiBlbmQuZ2V0RGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBob3VyOiBlbmQuZ2V0SG91cnMoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWludXRlOiBlbmQuZ2V0TWludXRlcygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWNvbmQ6IGVuZC5nZXRTZWNvbmRzKClcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0RGF0ZVJhbmdlID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGJlZ2luOiB7IHllYXI6IGJlZ2luLmdldEZ1bGxZZWFyKCksIG1vbnRoOiBiZWdpbi5nZXRNb250aCgpICsgMSwgZGF5OiBiZWdpbi5nZXREYXRlKCkgfSxcclxuICAgICAgICAgICAgICAgICAgICBlbmQ6IHsgeWVhcjogZW5kLmdldEZ1bGxZZWFyKCksIG1vbnRoOiBlbmQuZ2V0TW9udGgoKSArIDEsIGRheTogZW5kLmdldERhdGUoKSB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGVNb2RlbDogSU15RGF0ZU1vZGVsID0gdGhpcy51dGlsU2VydmljZS5nZXREYXRlTW9kZWwoXHJcbiAgICAgICAgICAgICAgICBudWxsLFxyXG4gICAgICAgICAgICAgICAgdGFyZ2V0RGF0ZVJhbmdlLFxyXG4gICAgICAgICAgICAgICAgZGF0ZUZvcm1hdCxcclxuICAgICAgICAgICAgICAgIG1vbnRoTGFiZWxzLFxyXG4gICAgICAgICAgICAgICAgZGF0ZVJhbmdlRGF0ZXNEZWxpbWl0ZXIsXHJcbiAgICAgICAgICAgICAgICByZXR1cm5Gb3JtYXRcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgdGhpcy5kYXRlQ2hhbmdlZChkYXRlTW9kZWwsIGNsb3NlU2VsZWN0b3JPbkRhdGVTZWxlY3QpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUud2Fybign5Y+C5pWw5b+F6aG756ym5ZCI6KaB5rGC77yBJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiJdfQ==