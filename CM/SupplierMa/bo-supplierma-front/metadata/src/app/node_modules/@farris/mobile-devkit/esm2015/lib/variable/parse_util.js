/*
 * StateMachine变量解析
 * @Author: Witt
 * @Date: 2018-12-04 17:09:42
 * @Last Modified by: Witt
 * @Last Modified time: 2019-10-30 11:07:10
 */
import { AppContext } from '../app/index';
import { ViewModelContext } from '../view-model/index';
import { CommandContext } from '../command/index';
/**
 * 解析辅助工具类
 */
class ParseUtil {
    /**
     * 获取应用上下文
     */
    static getAppContext(context) {
        if (context instanceof CommandContext) {
            return context.viewModelContext.appContext;
        }
        else if (context instanceof ViewModelContext) {
            return context.appContext;
        }
        else if (context instanceof AppContext) {
            return context;
        }
        else {
            throw new Error('上下文中找不到AppContext，请检查！');
        }
    }
    /**
     * 获取当前Frame的Context
     */
    static getFrameContext(context) {
        if (context instanceof CommandContext) {
            return context.viewModelContext;
        }
        else if (context instanceof ViewModelContext) {
            return context;
        }
        else {
            throw new Error('上下文中找不到FrameContext，请检查！');
        }
    }
    /**
     * 获取根Frame的Context
     */
    static getRootFrameContext(context) {
        const frameContext = this.getFrameContext(context);
        return frameContext.root;
    }
    /**
     * 根据frameId获取FrameContext
     */
    static getFrameContextById(context, frameId) {
        const appContext = this.getAppContext(context);
        return appContext.viewModelContextManager.getContextById(frameId);
    }
}
export { ParseUtil };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFyc2VfdXRpbC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvbW9iaWxlLWRldmtpdC8iLCJzb3VyY2VzIjpbImxpYi92YXJpYWJsZS9wYXJzZV91dGlsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7R0FNRztBQUVILE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxjQUFjLENBQUM7QUFDMUMsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDdkQsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBRWxEOztHQUVHO0FBQ0gsTUFBTSxTQUFTO0lBRWI7O09BRUc7SUFDSCxNQUFNLENBQUMsYUFBYSxDQUFDLE9BQVk7UUFDL0IsSUFBSSxPQUFPLFlBQVksY0FBYyxFQUFFO1lBQ3JDLE9BQU8sT0FBTyxDQUFDLGdCQUFnQixDQUFDLFVBQVUsQ0FBQztTQUM1QzthQUFNLElBQUksT0FBTyxZQUFZLGdCQUFnQixFQUFFO1lBQzlDLE9BQU8sT0FBTyxDQUFDLFVBQVUsQ0FBQztTQUMzQjthQUFPLElBQUksT0FBTyxZQUFZLFVBQVUsRUFBRTtZQUN6QyxPQUFPLE9BQU8sQ0FBQztTQUNoQjthQUFNO1lBQ0wsTUFBTSxJQUFJLEtBQUssQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDO1NBQzNDO0lBQ0gsQ0FBQztJQUVEOztPQUVHO0lBQ0gsTUFBTSxDQUFDLGVBQWUsQ0FBQyxPQUFZO1FBQ2pDLElBQUksT0FBTyxZQUFZLGNBQWMsRUFBRTtZQUNyQyxPQUFPLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQztTQUNqQzthQUFNLElBQUksT0FBTyxZQUFZLGdCQUFnQixFQUFFO1lBQzlDLE9BQU8sT0FBTyxDQUFDO1NBQ2hCO2FBQU07WUFDTCxNQUFNLElBQUksS0FBSyxDQUFDLDBCQUEwQixDQUFDLENBQUM7U0FDN0M7SUFFSCxDQUFDO0lBRUQ7O09BRUc7SUFDSCxNQUFNLENBQUMsbUJBQW1CLENBQUMsT0FBWTtRQUNyQyxNQUFNLFlBQVksR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ25ELE9BQU8sWUFBWSxDQUFDLElBQUksQ0FBQztJQUMzQixDQUFDO0lBRUQ7O09BRUc7SUFDSCxNQUFNLENBQUMsbUJBQW1CLENBQUMsT0FBWSxFQUFFLE9BQWU7UUFDdEQsTUFBTSxVQUFVLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUMvQyxPQUFPLFVBQVUsQ0FBQyx1QkFBdUIsQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDcEUsQ0FBQztDQUNGO0FBRUQsT0FBTyxFQUFFLFNBQVMsRUFBRSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLypcclxuICogU3RhdGVNYWNoaW5l5Y+Y6YeP6Kej5p6QXHJcbiAqIEBBdXRob3I6IFdpdHRcclxuICogQERhdGU6IDIwMTgtMTItMDQgMTc6MDk6NDJcclxuICogQExhc3QgTW9kaWZpZWQgYnk6IFdpdHRcclxuICogQExhc3QgTW9kaWZpZWQgdGltZTogMjAxOS0xMC0zMCAxMTowNzoxMFxyXG4gKi9cclxuXHJcbmltcG9ydCB7IEFwcENvbnRleHQgfSBmcm9tICcuLi9hcHAvaW5kZXgnO1xyXG5pbXBvcnQgeyBWaWV3TW9kZWxDb250ZXh0IH0gZnJvbSAnLi4vdmlldy1tb2RlbC9pbmRleCc7XHJcbmltcG9ydCB7IENvbW1hbmRDb250ZXh0IH0gZnJvbSAnLi4vY29tbWFuZC9pbmRleCc7XHJcblxyXG4vKipcclxuICog6Kej5p6Q6L6F5Yqp5bel5YW357G7XHJcbiAqL1xyXG5jbGFzcyBQYXJzZVV0aWwge1xyXG5cclxuICAvKipcclxuICAgKiDojrflj5blupTnlKjkuIrkuIvmlodcclxuICAgKi9cclxuICBzdGF0aWMgZ2V0QXBwQ29udGV4dChjb250ZXh0OiBhbnkpOiBBcHBDb250ZXh0IHtcclxuICAgIGlmIChjb250ZXh0IGluc3RhbmNlb2YgQ29tbWFuZENvbnRleHQpIHtcclxuICAgICAgcmV0dXJuIGNvbnRleHQudmlld01vZGVsQ29udGV4dC5hcHBDb250ZXh0O1xyXG4gICAgfSBlbHNlIGlmIChjb250ZXh0IGluc3RhbmNlb2YgVmlld01vZGVsQ29udGV4dCkge1xyXG4gICAgICByZXR1cm4gY29udGV4dC5hcHBDb250ZXh0O1xyXG4gICAgfSBlbHNlICBpZiAoY29udGV4dCBpbnN0YW5jZW9mIEFwcENvbnRleHQpIHtcclxuICAgICAgcmV0dXJuIGNvbnRleHQ7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ+S4iuS4i+aWh+S4reaJvuS4jeWIsEFwcENvbnRleHTvvIzor7fmo4Dmn6XvvIEnKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiOt+WPluW9k+WJjUZyYW1l55qEQ29udGV4dFxyXG4gICAqL1xyXG4gIHN0YXRpYyBnZXRGcmFtZUNvbnRleHQoY29udGV4dDogYW55KTogVmlld01vZGVsQ29udGV4dCB7XHJcbiAgICBpZiAoY29udGV4dCBpbnN0YW5jZW9mIENvbW1hbmRDb250ZXh0KSB7XHJcbiAgICAgIHJldHVybiBjb250ZXh0LnZpZXdNb2RlbENvbnRleHQ7XHJcbiAgICB9IGVsc2UgaWYgKGNvbnRleHQgaW5zdGFuY2VvZiBWaWV3TW9kZWxDb250ZXh0KSB7XHJcbiAgICAgIHJldHVybiBjb250ZXh0O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCfkuIrkuIvmlofkuK3mib7kuI3liLBGcmFtZUNvbnRleHTvvIzor7fmo4Dmn6XvvIEnKTtcclxuICAgIH1cclxuXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5bmoLlGcmFtZeeahENvbnRleHRcclxuICAgKi9cclxuICBzdGF0aWMgZ2V0Um9vdEZyYW1lQ29udGV4dChjb250ZXh0OiBhbnkpOiBWaWV3TW9kZWxDb250ZXh0IHtcclxuICAgIGNvbnN0IGZyYW1lQ29udGV4dCA9IHRoaXMuZ2V0RnJhbWVDb250ZXh0KGNvbnRleHQpO1xyXG4gICAgcmV0dXJuIGZyYW1lQ29udGV4dC5yb290O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5qC55o2uZnJhbWVJZOiOt+WPlkZyYW1lQ29udGV4dFxyXG4gICAqL1xyXG4gIHN0YXRpYyBnZXRGcmFtZUNvbnRleHRCeUlkKGNvbnRleHQ6IGFueSwgZnJhbWVJZDogc3RyaW5nKTogVmlld01vZGVsQ29udGV4dCB7XHJcbiAgICBjb25zdCBhcHBDb250ZXh0ID0gdGhpcy5nZXRBcHBDb250ZXh0KGNvbnRleHQpO1xyXG4gICAgcmV0dXJuIGFwcENvbnRleHQudmlld01vZGVsQ29udGV4dE1hbmFnZXIuZ2V0Q29udGV4dEJ5SWQoZnJhbWVJZCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBQYXJzZVV0aWwgfTtcclxuIl19