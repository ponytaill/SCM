/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { NgZone, ChangeDetectionStrategy, } from "@angular/core";
import { ChangeDetectorRef, } from "@angular/core";
import { Component, Input, Output, EventEmitter, ViewChild, ElementRef, } from "@angular/core";
import { Subject } from "rxjs";
import { IdService, OverLayHiddenService } from "@farris/ui-common";
/**
 * @return {?}
 */
function hideBtnMenu() {
    /** @type {?} */
    var ddm = document.querySelector(".f-btn-group-dropdown-menu.show");
    if (ddm) {
        ddm.className = ddm.className.replace("show", "");
    }
}
/**
 * @param {?} e
 * @return {?}
 */
function hideButtonMenu(e) {
    if (!e.target) {
        return;
    }
    /** @type {?} */
    var classList = Array.from(e.target.classList || []);
    if (e.target.nodeName !== "LI" && !e.target.closest('li.dropdown-item') && !classList.includes("dropdown-item")) {
        hideBtnMenu();
    }
}
var FarrisButtonGroupComponent = /** @class */ (function () {
    function FarrisButtonGroupComponent(changeRef, ngZone) {
        this.changeRef = changeRef;
        this.ngZone = ngZone;
        // 是否自动纠正位置
        this.autoRectify = true;
        // 计算方向的真正placement
        this.realPlacement = "bottom-right";
        // 重新计算后的placement
        this.rectifyPlacement = "bottom-right";
        /* 显示的按钮数量  默认为2 */
        this.count = 2;
        /* 按钮大小 */
        this.size = "small";
        /* 按钮样式 */
        this.type = "primary";
        /* 按钮展示位置 */
        this._placement = "bottom";
        /* menu size */
        /**
         * 2021.06.12 废弃，因为使用者不知道在中英文情况下，下拉面板的宽度和高度
         */
        this.width = 120;
        this.height = 250;
        this._menuWidth = 0;
        this._menuHeight = 0;
        /* 下拉按钮 触发事件 */
        this.changeState = new EventEmitter();
        /* 下拉菜单项点击事件 */
        this.change = new EventEmitter();
        this.click = new EventEmitter();
        /* 触发下拉按钮面板区域之外的事件 */
        this.clickMenuOut = new EventEmitter();
        /**
         * 2021.06.12 废弃，因为当autoSize为true的时候，按钮显示不出来。
         */
        this.autoSize = false;
        /* 下拉面板显示 */
        this.show = false;
        this.setPosition$ = new Subject();
        this.btnmenuid = 'btn-menu-';
        this.previous = 0;
    }
    Object.defineProperty(FarrisButtonGroupComponent.prototype, "placement", {
        get: /**
         * @return {?}
         */
        function () {
            return this._placement;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (!value) {
                return;
            }
            if (value !== this._placement) {
                this.realPlacement = this.getRealPlacement(value);
                this._placement = value;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FarrisButtonGroupComponent.prototype, "flatButtons", {
        /* 显示出来的按钮组 */
        get: /* 显示出来的按钮组 */
        /**
         * @return {?}
         */
        function () {
            return this.data && this.data.slice(0, this.count);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FarrisButtonGroupComponent.prototype, "dpButtons", {
        get: /**
         * @return {?}
         */
        function () {
            // this.height = this.dpButtons.length * 35;
            return this.data && this.data.slice(this.count);
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @private
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.btnmenuId = /**
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var idSer = new IdService();
        this.btnmenuid += idSer.guid();
        this.overLayService = new OverLayHiddenService();
    };
    /**
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.btnmenuId();
    };
    /**
     * @param {?} simpleChanges
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.ngOnChanges = /**
     * @param {?} simpleChanges
     * @return {?}
     */
    function (simpleChanges) {
        if (simpleChanges["data"]) {
            // this.flatButtons = this.data.slice(0, this.count);
            // this.dpButtons = this.data.slice(this.count);
            // this.height = this.dpButtons.length * 35;
        }
    };
    /**
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () { };
    /**
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.ngAfterViewChecked = /**
     * @return {?}
     */
    function () {
        if (this.show) {
            // const { height, width } = this.dpMenu.nativeElement.getBoundingClientRect();
            this.setPosition(this.event);
            // this.setPosition$.subscribe(res => this.setPosition(res, width, height));
        }
    };
    /**
     * @param {?} e
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.clickEvent = /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        var _this = this;
        e.stopPropagation();
        this.show = !(this.show && this.dpMenu.nativeElement.className.indexOf('show') > -1);
        // body添加面板
        if (this.show) {
            /** 移除现有的下拉展示菜单 */
            hideBtnMenu();
            this.appendBody();
            // this.setPosition(e);
            // this.setPosition$.next(e);
            // 注册鼠标滚轮，点击事件，用于隐藏Panel
            this.overLayService.registerMouseEvent(this.dpBtn.nativeElement, (/**
             * @param {?} e
             * @return {?}
             */
            function (e) {
                hideButtonMenu(e);
            }));
            this.event = e;
            // 绑定相应的事件
            this.ngZone.runOutsideAngular((/**
             * @return {?}
             */
            function () {
                _this.bindMenuMouseenter();
                _this.bindiMenuMouseleave();
                // this.bindDocClick();
                _this.mouseNotEnterLeave();
            }));
        }
        // 面板显示 脏值检测
        this.changeRef.detectChanges();
        this.changeRef.markForCheck();
        // this.changeState.emit({ originEvent: e, show: this.show });
        this.changeState.emit(this.show);
    };
    /* 按钮触发事件 */
    /* 按钮触发事件 */
    /**
     * @param {?} e
     * @param {?} btn
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.toggle = /* 按钮触发事件 */
    /**
     * @param {?} e
     * @param {?} btn
     * @return {?}
     */
    function (e, btn) {
        e.stopPropagation();
        if (btn.disabled)
            return;
        this.show = false;
        // this.unbindDocClick();
        // 关闭下拉按钮面板  脏值检测
        this.changeRef.detectChanges();
        this.changeRef.markForCheck();
        this.change.emit(btn.id);
        this.click.emit(btn);
        this.overLayService.destory(this.dpBtn.nativeElement);
    };
    // 下拉按钮显示到body中  可改变面板方向
    // 下拉按钮显示到body中  可改变面板方向
    /**
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.appendBody = 
    // 下拉按钮显示到body中  可改变面板方向
    /**
     * @return {?}
     */
    function () {
        if (this.dpMenu.nativeElement && !document.querySelector('body>#' + this.btnmenuid)) {
            // 添加到body  便于全部显示
            document.body.appendChild(this.dpMenu.nativeElement);
        }
        this.dpMenu.nativeElement.className = this.dpMenu.nativeElement.className + ' show';
    };
    /**
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.removeMenuPanel = /**
     * @return {?}
     */
    function () {
        if (this.dpMenu.nativeElement && document.querySelector('body>#' + this.btnmenuid)) {
            this.dpMenu.nativeElement.remove();
        }
    };
    /**
     * 当下拉超出边界时  转换方向,
     * 并未处理，边界不够下拉展示的情况
     * @param btnSize
     */
    /**
     * 当下拉超出边界时  转换方向,
     * 并未处理，边界不够下拉展示的情况
     * @param {?} btnSize
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.changePlacement = /**
     * 当下拉超出边界时  转换方向,
     * 并未处理，边界不够下拉展示的情况
     * @param {?} btnSize
     * @return {?}
     */
    function (btnSize) {
        if (!this.autoRectify) {
            return;
        }
        /** @type {?} */
        var referPosition = this.getReferencePosition();
        /** @type {?} */
        var newPlacement = this.realPlacement;
        if (newPlacement.indexOf("bottom") > -1) {
            if (this._menuHeight > referPosition.bottom - btnSize.bottom) {
                newPlacement = newPlacement.replace("bottom", "top");
            }
        }
        else if (newPlacement.indexOf("top") > -1) {
            if (this._menuHeight > btnSize.top - referPosition.top) {
                newPlacement = newPlacement.replace("top", "bottom");
            }
        }
        if (newPlacement.indexOf("left") > -1) {
            if (this._menuWidth > btnSize.left - referPosition.left) {
                newPlacement = newPlacement.replace("left", "right");
            }
        }
        else if (newPlacement.indexOf("right") > -1) {
            if (this._menuWidth > referPosition.right - btnSize.right) {
                newPlacement = newPlacement.replace("right", "left");
            }
        }
        this.rectifyPlacement = newPlacement;
    };
    /**
     * 确认参照的边界
     */
    /**
     * 确认参照的边界
     * @private
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.getReferencePosition = /**
     * 确认参照的边界
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var rRight = document.documentElement.clientWidth;
        /** @type {?} */
        var rBottom = document.documentElement.clientHeight;
        /** @type {?} */
        var rTop = 0;
        /** @type {?} */
        var rLeft = 0;
        // 横向参照
        if (this.rectifyReferenceH) {
            rRight = this.rectifyReferenceH.getBoundingClientRect().right;
            rLeft = this.rectifyReferenceH.getBoundingClientRect().left;
        }
        // 纵向参照
        if (this.rectifyReferenceV) {
            rBottom = this.rectifyReferenceV.getBoundingClientRect().bottom;
            rTop = this.rectifyReferenceV.getBoundingClientRect().top;
        }
        return { top: rTop, left: rLeft, right: rRight, bottom: rBottom };
    };
    /**
     * 变化对应的class
     * @param position
     */
    /**
     * 变化对应的class
     * @param {?} position
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype._getClsName = /**
     * 变化对应的class
     * @param {?} position
     * @return {?}
     */
    function (position) {
        /** @type {?} */
        var className = "";
        switch (position) {
            case "top-right":
            case "top":
                // 朝上，朝上-朝右
                className = "dropup";
                break;
            case "top-left":
                // 朝上-朝左
                className = "dropup-left";
                break;
            case "left-bottom":
            case "left":
                // 横向——朝左——朝下
                className = "dropleft";
                break;
            case "left-top":
                // 横向——朝左——朝上
                className = "dropleft-up";
                break;
            case "right-bottom":
            case "right":
                // 横向——朝右——朝下
                className = "dropright";
                break;
            case "right-top":
                // 横向——朝右——朝上
                className = "dropright-up";
                break;
            case "bottom-left":
                // 朝下——朝左
                className = "dropdown-left";
                break;
            case "bottom-right":
                className = "dropdown";
                break;
            default:
                // 朝下，朝下——朝右
                className = "dropdown";
        }
        return className;
    };
    /**
     * @private
     * @param {?} pment
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.getRealPlacement = /**
     * @private
     * @param {?} pment
     * @return {?}
     */
    function (pment) {
        /** @type {?} */
        var result = "bottom-right";
        switch (pment) {
            case "top":
                result = "top-right";
                break;
            case "left":
                result = "left-bottom";
                break;
            case "right":
                result = "right-bottom";
                break;
            case "bottom":
                result = "bottom-right";
                break;
            default:
                result = pment;
        }
        return result;
    };
    /*
     * 计算的位置区分忒细化
     */
    /*
         * 计算的位置区分忒细化
         */
    /**
     * @private
     * @param {?} btnSize
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.changePosition = /*
         * 计算的位置区分忒细化
         */
    /**
     * @private
     * @param {?} btnSize
     * @return {?}
     */
    function (btnSize) {
        /** @type {?} */
        var rplacement = "";
        if (this.autoRectify) {
            rplacement = this.rectifyPlacement;
        }
        else {
            rplacement = this.realPlacement;
        }
        /** @type {?} */
        var styleTop = 0;
        /** @type {?} */
        var styleLeft = 0;
        if (rplacement.indexOf("top") > -1) {
            styleTop = btnSize.top - this._menuHeight;
        }
        else if (rplacement.indexOf("bottom") > -1) {
            styleTop = btnSize.bottom;
        }
        if (rplacement.indexOf("right") > -1) {
            styleLeft = btnSize.right;
        }
        else if (rplacement.indexOf("left") > -1) {
            styleLeft = btnSize.left - this._menuWidth;
        }
        // 开头
        if (rplacement.indexOf("-top") > -1) {
            styleTop = styleTop - btnSize.height;
        }
        else if (rplacement.indexOf("-bottom") > -1) {
            styleTop = styleTop + btnSize.height;
        }
        this.dpMenu.nativeElement.style.top = styleTop + "px";
        this.dpMenu.nativeElement.style.left = styleLeft + "px";
    };
    /* 绑定下拉面板鼠标进入事件 */
    /* 绑定下拉面板鼠标进入事件 */
    /**
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.bindMenuMouseenter = /* 绑定下拉面板鼠标进入事件 */
    /**
     * @return {?}
     */
    function () {
        this.unbindMenuMouseenter();
        this.mouseenterEvent = this.changeFlagToTrue.bind(this);
        this.dpMenu.nativeElement.addEventListener("mouseenter", this.mouseenterEvent);
    };
    /* 绑定下拉面板鼠标离开事件  */
    /* 绑定下拉面板鼠标离开事件  */
    /**
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.bindiMenuMouseleave = /* 绑定下拉面板鼠标离开事件  */
    /**
     * @return {?}
     */
    function () {
        this.unbindiMenuMouseleave();
        this.mouseleaveEvent = this.mouseLeave.bind(this);
        this.dpMenu.nativeElement.addEventListener("mouseleave", this.mouseleaveEvent);
    };
    /* 绑定点击面板区域之外触发的事件 */
    // bindDocClick() {
    //   this.documentClickEvent = this.clickDoc.bind(this);
    //   document.addEventListener('click', this.documentClickEvent);
    // }
    /* 解绑事件 */
    /* 绑定点击面板区域之外触发的事件 */
    // bindDocClick() {
    //   this.documentClickEvent = this.clickDoc.bind(this);
    //   document.addEventListener('click', this.documentClickEvent);
    // }
    /* 解绑事件 */
    /**
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.unbindMenuMouseenter = /* 绑定点击面板区域之外触发的事件 */
    // bindDocClick() {
    //   this.documentClickEvent = this.clickDoc.bind(this);
    //   document.addEventListener('click', this.documentClickEvent);
    // }
    /* 解绑事件 */
    /**
     * @return {?}
     */
    function () {
        if (this.mouseenterEvent) {
            this.dpMenu.nativeElement.removeEventListener("mouseenter", this.mouseenterEvent);
        }
    };
    /**
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.unbindiMenuMouseleave = /**
     * @return {?}
     */
    function () {
        if (this.mouseleaveEvent) {
            this.dpMenu.nativeElement.removeEventListener("mouseleave", this.mouseleaveEvent);
        }
    };
    // unbindDocClick() {
    //   if (this.documentClickEvent) {
    //     document.removeEventListener('click', this.documentClickEvent);
    //   }
    // }
    /* flag true */
    // unbindDocClick() {
    //   if (this.documentClickEvent) {
    //     document.removeEventListener('click', this.documentClickEvent);
    //   }
    // }
    /* flag true */
    /**
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.changeFlagToTrue = 
    // unbindDocClick() {
    //   if (this.documentClickEvent) {
    //     document.removeEventListener('click', this.documentClickEvent);
    //   }
    // }
    /* flag true */
    /**
     * @return {?}
     */
    function () {
        this.dpFlag = true;
    };
    /* flag false */
    /* flag false */
    /**
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.changeFlagToFalse = /* flag false */
    /**
     * @return {?}
     */
    function () {
        this.dpFlag = false;
    };
    /* 鼠标离开时  关闭menu */
    /* 鼠标离开时  关闭menu */
    /**
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.mouseLeave = /* 鼠标离开时  关闭menu */
    /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.dpFlag) {
            this.changeFlagToFalse();
            // this.unbindDocClick();
            this.unbindiMenuMouseleave();
            this.unbindMenuMouseenter();
            this.close();
            if (this.setTimeObj) {
                this.ngZone.runOutsideAngular((/**
                 * @return {?}
                 */
                function () {
                    clearTimeout(_this.setTimeObj);
                }));
            }
        }
    };
    /* 鼠标没有进入到面板  一段时间后面板自动消失 */
    /* 鼠标没有进入到面板  一段时间后面板自动消失 */
    /**
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.mouseNotEnterLeave = /* 鼠标没有进入到面板  一段时间后面板自动消失 */
    /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.ngZone.runOutsideAngular((/**
         * @return {?}
         */
        function () {
            if (_this.setTimeObj) {
                clearTimeout(_this.setTimeObj);
            }
            _this.setTimeObj = setTimeout((/**
             * @return {?}
             */
            function () {
                if (!_this.dpFlag) {
                    _this.changeFlagToFalse();
                    // this.unbindDocClick();
                    _this.unbindiMenuMouseleave();
                    _this.unbindMenuMouseenter();
                    _this.close();
                    if (_this.setTimeObj) {
                        clearTimeout(_this.setTimeObj);
                    }
                }
            }), 2000);
        }));
    };
    /* 关闭下拉面板 */
    /* 关闭下拉面板 */
    /**
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.close = /* 关闭下拉面板 */
    /**
     * @return {?}
     */
    function () {
        this.show = false;
        // 关闭下拉按钮面板  脏值检测
        if (!this.changeRef["destroyed"]) {
            this.changeRef.detectChanges();
            this.changeRef.markForCheck();
        }
        this.dpBtn.nativeElement.blur();
        this.overLayService.destory(this.dpBtn.nativeElement);
    };
    /* 动态指定menu在body中的位置 */
    /* 动态指定menu在body中的位置 */
    /**
     * @private
     * @param {?} e
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.setPosition = /* 动态指定menu在body中的位置 */
    /**
     * @private
     * @param {?} e
     * @return {?}
     */
    function (e) {
        // 下拉按钮
        /** @type {?} */
        var btnSize = this.dpBtn.nativeElement.getBoundingClientRect();
        // 下拉面板
        /** @type {?} */
        var menuRect = this.dpMenu.nativeElement.getBoundingClientRect();
        this._menuHeight = menuRect.height;
        this._menuWidth = menuRect.width;
        // 如果要自动纠正方向
        if (this.autoRectify) {
            this.changePlacement(btnSize);
        }
        this.changePosition(btnSize);
    };
    /**
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        // this.removeMenuPanel();
        if (this.dpBtn && this.dpBtn.nativeElement) {
            this.overLayService.destory(this.dpBtn.nativeElement);
        }
        this.overLayService = null;
    };
    FarrisButtonGroupComponent.decorators = [
        { type: Component, args: [{
                    selector: "farris-button-group",
                    template: "<div class=\"f-btn-group\">\r\n    <div [class]=\"(size==='large'?'btn-group-lg':'btn-group-sm')+' btn-group f-btn-group-links'\">\r\n        <ng-container *ngFor=\"let btn of flatButtons\">\r\n            <ng-container *ngIf=\"btn.icon\">\r\n                <button [id]=\"btn.id\" class=\"btn btn-link btn-icontext\" [disabled]=\"btn.disabled\" (click)=\"toggle($event,btn)\">\r\n                    <i class=\"f-icon\"  [ngClass]=\"btn.icon\"></i>\r\n                </button>\r\n            </ng-container>\r\n            <ng-container *ngIf=\"!btn.icon\">\r\n            <button [id]=\"btn.id\"\r\n                [class]=\"'btn '+(btn.type?'btn-'+btn.type:'btn-link')+' '+ (btn.type && btn.type !== 'link' ? 'f-btn-ml' :'')\"\r\n                [disabled]=\"btn.disabled\" (click)=\"toggle($event,btn)\">\r\n                {{btn.text}}\r\n            </button> \r\n            </ng-container>\r\n        </ng-container>\r\n    </div>\r\n    <ng-container *ngIf=\"dpButtons.length\">\r\n        <div class=\"btn-group f-btn-group-dropdown\">\r\n            <button #dpBtn type=\"button\" class=\"f-btn-dropdown\" (click)=\"clickEvent($event)\">\r\n                <span class=\"f-icon f-icon-lookup\"></span>\r\n            </button>\r\n            <div #dpMenu class=\"dropdown-menu f-btn-group-dropdown-menu\" [class.show]=\"show\"  style=\"position:fixed;\" id=\"{{btnmenuid}}\">\r\n                <ng-container *ngFor=\"let dpBtn of dpButtons\">\r\n                    <div class=\"dropdown-divider\" *ngIf=\"dpBtn.divider\"></div>\r\n                    <li [id]=\"dpBtn.id\" class=\"dropdown-item\" [class.disabled]=\"dpBtn.disabled\"\r\n                        (click)=\"toggle($event,dpBtn)\">\r\n                        <ng-container *ngIf=\"dpBtn.icon\">\r\n                            <i class=\"f-icon dropdown-item-icon\" [ngClass]=\"dpBtn.icon\"></i>\r\n                        </ng-container>\r\n                        <span>{{dpBtn.text}}</span>\r\n                    </li>\r\n                </ng-container>\r\n            </div>\r\n        </div>\r\n    </ng-container>\r\n</div>",
                    changeDetection: ChangeDetectionStrategy.OnPush
                }] }
    ];
    /** @nocollapse */
    FarrisButtonGroupComponent.ctorParameters = function () { return [
        { type: ChangeDetectorRef },
        { type: NgZone }
    ]; };
    FarrisButtonGroupComponent.propDecorators = {
        dpBtn: [{ type: ViewChild, args: ["dpBtn",] }],
        dpMenu: [{ type: ViewChild, args: ["dpMenu",] }],
        rectifyReferenceH: [{ type: Input }],
        rectifyReferenceV: [{ type: Input }],
        autoRectify: [{ type: Input }],
        data: [{ type: Input }],
        count: [{ type: Input }],
        size: [{ type: Input }],
        type: [{ type: Input }],
        placement: [{ type: Input }],
        width: [{ type: Input }],
        height: [{ type: Input }],
        changeState: [{ type: Output }],
        change: [{ type: Output }],
        click: [{ type: Output }],
        clickMenuOut: [{ type: Output }],
        autoSize: [{ type: Input }]
    };
    return FarrisButtonGroupComponent;
}());
export { FarrisButtonGroupComponent };
if (false) {
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.dpBtn;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.dpMenu;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.rectifyReferenceH;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.rectifyReferenceV;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.autoRectify;
    /**
     * @type {?}
     * @private
     */
    FarrisButtonGroupComponent.prototype.realPlacement;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.rectifyPlacement;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.data;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.count;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.size;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.type;
    /**
     * @type {?}
     * @private
     */
    FarrisButtonGroupComponent.prototype._placement;
    /**
     * 2021.06.12 废弃，因为使用者不知道在中英文情况下，下拉面板的宽度和高度
     * @type {?}
     */
    FarrisButtonGroupComponent.prototype.width;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.height;
    /**
     * @type {?}
     * @private
     */
    FarrisButtonGroupComponent.prototype._menuWidth;
    /**
     * @type {?}
     * @private
     */
    FarrisButtonGroupComponent.prototype._menuHeight;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.changeState;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.change;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.click;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.clickMenuOut;
    /**
     * 2021.06.12 废弃，因为当autoSize为true的时候，按钮显示不出来。
     * @type {?}
     */
    FarrisButtonGroupComponent.prototype.autoSize;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.show;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.setPosition$;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.event;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.dpFlag;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.mouseenterEvent;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.mouseleaveEvent;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.documentClickEvent;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.btnSize;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.setTimeObj;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.btnmenuid;
    /**
     * @type {?}
     * @private
     */
    FarrisButtonGroupComponent.prototype.previous;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.overLayService;
    /**
     * @type {?}
     * @private
     */
    FarrisButtonGroupComponent.prototype.changeRef;
    /**
     * @type {?}
     * @private
     */
    FarrisButtonGroupComponent.prototype.ngZone;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnV0dG9uLWdyb3VwLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvdWktYnV0dG9uLyIsInNvdXJjZXMiOlsibGliL2J1dHRvbi1ncm91cC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFFSCxNQUFNLEVBQ04sdUJBQXVCLEdBSTFCLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFHSCxpQkFBaUIsR0FDcEIsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUNILFNBQVMsRUFFVCxLQUFLLEVBQ0wsTUFBTSxFQUNOLFlBQVksRUFDWixTQUFTLEVBQ1QsVUFBVSxHQUNiLE1BQU0sZUFBZSxDQUFDO0FBRXZCLE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDL0IsT0FBTyxFQUFFLFNBQVMsRUFBRSxvQkFBb0IsRUFBRSxNQUFNLG1CQUFtQixDQUFDOzs7O0FBRXBFLFNBQVMsV0FBVzs7UUFDVixHQUFHLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxpQ0FBaUMsQ0FBQztJQUNyRSxJQUFJLEdBQUcsRUFBRTtRQUNMLEdBQUcsQ0FBQyxTQUFTLEdBQUcsR0FBRyxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0tBQ3JEO0FBQ0wsQ0FBQzs7Ozs7QUFFRCxTQUFTLGNBQWMsQ0FBQyxDQUFDO0lBQ3JCLElBQUksQ0FBQyxDQUFDLENBQUMsTUFBTSxFQUFFO1FBQ1gsT0FBTztLQUNWOztRQUVHLFNBQVMsR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsU0FBUyxJQUFJLEVBQUUsQ0FBQztJQUVwRCxJQUFJLENBQUMsQ0FBQyxNQUFNLENBQUMsUUFBUSxLQUFLLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLGVBQWUsQ0FBQyxFQUFFO1FBQzdHLFdBQVcsRUFBRSxDQUFDO0tBQ2pCO0FBQ0wsQ0FBQztBQUdEO0lBMEdJLG9DQUFvQixTQUE0QixFQUFVLE1BQWM7UUFBcEQsY0FBUyxHQUFULFNBQVMsQ0FBbUI7UUFBVSxXQUFNLEdBQU4sTUFBTSxDQUFROztRQTNGL0QsZ0JBQVcsR0FBRyxJQUFJLENBQUM7O1FBRXBCLGtCQUFhLEdBQUcsY0FBYyxDQUFDOztRQUV2QyxxQkFBZ0IsR0FBRyxjQUFjLENBQUM7O1FBTXpCLFVBQUssR0FBRyxDQUFDLENBQUM7O1FBR1YsU0FBSSxHQUFHLE9BQU8sQ0FBQzs7UUFHZixTQUFJLEdBQUcsU0FBUyxDQUFDOztRQUdsQixlQUFVLEdBQUcsUUFBUSxDQUFDOzs7OztRQW1CckIsVUFBSyxHQUFHLEdBQUcsQ0FBQztRQUNaLFdBQU0sR0FBRyxHQUFHLENBQUM7UUFDZCxlQUFVLEdBQUcsQ0FBQyxDQUFDO1FBQ2YsZ0JBQVcsR0FBRyxDQUFDLENBQUM7O1FBR2QsZ0JBQVcsR0FBRyxJQUFJLFlBQVksRUFBTyxDQUFDOztRQUd0QyxXQUFNLEdBQUcsSUFBSSxZQUFZLEVBQU8sQ0FBQztRQUNqQyxVQUFLLEdBQUcsSUFBSSxZQUFZLEVBQU8sQ0FBQzs7UUFHaEMsaUJBQVksR0FBRyxJQUFJLFlBQVksRUFBTyxDQUFDOzs7O1FBS3hDLGFBQVEsR0FBRyxLQUFLLENBQUM7O1FBRzFCLFNBQUksR0FBRyxLQUFLLENBQUM7UUFZYixpQkFBWSxHQUFHLElBQUksT0FBTyxFQUFFLENBQUM7UUFpQmhDLGNBQVMsR0FBRyxXQUFXLENBQUM7UUFDaEIsYUFBUSxHQUFHLENBQUMsQ0FBQztJQUV5RCxDQUFDO0lBdkU1RSxzQkFDSSxpREFBUzs7OztRQVNiO1lBQ0ksT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDO1FBQzNCLENBQUM7Ozs7O1FBWkQsVUFDYyxLQUFLO1lBQ2YsSUFBSSxDQUFDLEtBQUssRUFBRTtnQkFDUixPQUFPO2FBQ1Y7WUFDRCxJQUFJLEtBQUssS0FBSyxJQUFJLENBQUMsVUFBVSxFQUFFO2dCQUMzQixJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDbEQsSUFBSSxDQUFDLFVBQVUsR0FBRyxLQUFLLENBQUM7YUFDM0I7UUFDTCxDQUFDOzs7T0FBQTtJQWdDRCxzQkFBSSxtREFBVztRQURmLGNBQWM7Ozs7O1FBQ2Q7WUFDSSxPQUFPLElBQUksQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUN2RCxDQUFDOzs7T0FBQTtJQUVELHNCQUFJLGlEQUFTOzs7O1FBQWI7WUFDSSw0Q0FBNEM7WUFFNUMsT0FBTyxJQUFJLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNwRCxDQUFDOzs7T0FBQTs7Ozs7SUF3QkksOENBQVM7Ozs7SUFBakI7O1lBQ08sS0FBSyxHQUFHLElBQUksU0FBUyxFQUFFO1FBQzdCLElBQUksQ0FBQyxTQUFTLElBQUksS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDO1FBQ3pCLElBQUksQ0FBQyxjQUFjLEdBQUcsSUFBSSxvQkFBb0IsRUFBRSxDQUFDO0lBQ3hELENBQUM7Ozs7SUFFRSw2Q0FBUTs7O0lBQVI7UUFDSSxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUM7SUFDckIsQ0FBQzs7Ozs7SUFFRCxnREFBVzs7OztJQUFYLFVBQVksYUFBNEI7UUFDcEMsSUFBSSxhQUFhLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFDdkIscURBQXFEO1lBQ3JELGdEQUFnRDtZQUNoRCw0Q0FBNEM7U0FDL0M7SUFDTCxDQUFDOzs7O0lBRUQsb0RBQWU7OztJQUFmLGNBQW1CLENBQUM7Ozs7SUFFcEIsdURBQWtCOzs7SUFBbEI7UUFDSSxJQUFJLElBQUksQ0FBQyxJQUFJLEVBQUU7WUFDWCwrRUFBK0U7WUFDL0UsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDN0IsNEVBQTRFO1NBQy9FO0lBQ0wsQ0FBQzs7Ozs7SUFFRCwrQ0FBVTs7OztJQUFWLFVBQVcsQ0FBTTtRQUFqQixpQkFnQ0M7UUEvQkcsQ0FBQyxDQUFDLGVBQWUsRUFBRSxDQUFDO1FBQ3BCLElBQUksQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3JGLFdBQVc7UUFDWCxJQUFJLElBQUksQ0FBQyxJQUFJLEVBQUU7WUFDcEIsa0JBQWtCO1lBQ2xCLFdBQVcsRUFBRSxDQUFDO1lBQ0wsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO1lBQ2xCLHVCQUF1QjtZQUN2Qiw2QkFBNkI7WUFFN0Isd0JBQXdCO1lBQ3hCLElBQUksQ0FBQyxjQUFjLENBQUMsa0JBQWtCLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxhQUFhOzs7O1lBQUUsVUFBQyxDQUFhO2dCQUMzRSxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDdEIsQ0FBQyxFQUFDLENBQUM7WUFJSCxJQUFJLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQztZQUNmLFVBQVU7WUFDVixJQUFJLENBQUMsTUFBTSxDQUFDLGlCQUFpQjs7O1lBQUM7Z0JBQzFCLEtBQUksQ0FBQyxrQkFBa0IsRUFBRSxDQUFDO2dCQUMxQixLQUFJLENBQUMsbUJBQW1CLEVBQUUsQ0FBQztnQkFDM0IsdUJBQXVCO2dCQUN2QixLQUFJLENBQUMsa0JBQWtCLEVBQUUsQ0FBQztZQUM5QixDQUFDLEVBQUMsQ0FBQztTQUNOO1FBQ0QsWUFBWTtRQUNaLElBQUksQ0FBQyxTQUFTLENBQUMsYUFBYSxFQUFFLENBQUM7UUFDL0IsSUFBSSxDQUFDLFNBQVMsQ0FBQyxZQUFZLEVBQUUsQ0FBQztRQUM5Qiw4REFBOEQ7UUFDOUQsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ3JDLENBQUM7SUFFRCxZQUFZOzs7Ozs7O0lBQ1osMkNBQU07Ozs7OztJQUFOLFVBQU8sQ0FBTSxFQUFFLEdBQUc7UUFDZCxDQUFDLENBQUMsZUFBZSxFQUFFLENBQUM7UUFDcEIsSUFBSSxHQUFHLENBQUMsUUFBUTtZQUFFLE9BQU87UUFDekIsSUFBSSxDQUFDLElBQUksR0FBRyxLQUFLLENBQUM7UUFDbEIseUJBQXlCO1FBQ3pCLGlCQUFpQjtRQUNqQixJQUFJLENBQUMsU0FBUyxDQUFDLGFBQWEsRUFBRSxDQUFDO1FBQy9CLElBQUksQ0FBQyxTQUFTLENBQUMsWUFBWSxFQUFFLENBQUM7UUFDOUIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ3pCLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBRXJCLElBQUksQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsYUFBYSxDQUFDLENBQUM7SUFDMUQsQ0FBQztJQUVELHdCQUF3Qjs7Ozs7SUFDeEIsK0NBQVU7Ozs7O0lBQVY7UUFDSSxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsYUFBYSxJQUFJLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFFO1lBQ2pGLGtCQUFrQjtZQUNsQixRQUFRLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1NBQ3hEO1FBQ1AsSUFBSSxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLFNBQVMsR0FBRyxPQUFPLENBQUM7SUFDbEYsQ0FBQzs7OztJQUVELG9EQUFlOzs7SUFBZjtRQUNJLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxhQUFhLElBQUksUUFBUSxDQUFDLGFBQWEsQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFFO1lBQ2hGLElBQUksQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLE1BQU0sRUFBRSxDQUFDO1NBQ3RDO0lBQ0wsQ0FBQztJQUVEOzs7O09BSUc7Ozs7Ozs7SUFDSCxvREFBZTs7Ozs7O0lBQWYsVUFBZ0IsT0FBWTtRQUN4QixJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRTtZQUNuQixPQUFPO1NBQ1Y7O1lBQ0csYUFBYSxHQUFHLElBQUksQ0FBQyxvQkFBb0IsRUFBRTs7WUFDM0MsWUFBWSxHQUFHLElBQUksQ0FBQyxhQUFhO1FBQ3JDLElBQUksWUFBWSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRTtZQUNyQyxJQUFJLElBQUksQ0FBQyxXQUFXLEdBQUcsYUFBYSxDQUFDLE1BQU0sR0FBRyxPQUFPLENBQUMsTUFBTSxFQUFFO2dCQUMxRCxZQUFZLEdBQUcsWUFBWSxDQUFDLE9BQU8sQ0FBQyxRQUFRLEVBQUUsS0FBSyxDQUFDLENBQUM7YUFDeEQ7U0FDSjthQUFNLElBQUksWUFBWSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRTtZQUN6QyxJQUFJLElBQUksQ0FBQyxXQUFXLEdBQUcsT0FBTyxDQUFDLEdBQUcsR0FBRyxhQUFhLENBQUMsR0FBRyxFQUFFO2dCQUNwRCxZQUFZLEdBQUcsWUFBWSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLENBQUM7YUFDeEQ7U0FDSjtRQUNELElBQUksWUFBWSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRTtZQUNuQyxJQUFJLElBQUksQ0FBQyxVQUFVLEdBQUcsT0FBTyxDQUFDLElBQUksR0FBRyxhQUFhLENBQUMsSUFBSSxFQUFFO2dCQUNyRCxZQUFZLEdBQUcsWUFBWSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7YUFDeEQ7U0FDSjthQUFNLElBQUksWUFBWSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRTtZQUMzQyxJQUFJLElBQUksQ0FBQyxVQUFVLEdBQUcsYUFBYSxDQUFDLEtBQUssR0FBRyxPQUFPLENBQUMsS0FBSyxFQUFFO2dCQUN2RCxZQUFZLEdBQUcsWUFBWSxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsTUFBTSxDQUFDLENBQUM7YUFDeEQ7U0FDSjtRQUNELElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxZQUFZLENBQUM7SUFDekMsQ0FBQztJQUNEOztPQUVHOzs7Ozs7SUFDSyx5REFBb0I7Ozs7O0lBQTVCOztZQUNRLE1BQU0sR0FBRyxRQUFRLENBQUMsZUFBZSxDQUFDLFdBQVc7O1lBQzdDLE9BQU8sR0FBRyxRQUFRLENBQUMsZUFBZSxDQUFDLFlBQVk7O1lBQy9DLElBQUksR0FBRyxDQUFDOztZQUNSLEtBQUssR0FBRyxDQUFDO1FBQ2IsT0FBTztRQUNQLElBQUksSUFBSSxDQUFDLGlCQUFpQixFQUFFO1lBQ3hCLE1BQU0sR0FBRyxJQUFJLENBQUMsaUJBQWlCLENBQUMscUJBQXFCLEVBQUUsQ0FBQyxLQUFLLENBQUM7WUFDOUQsS0FBSyxHQUFHLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxxQkFBcUIsRUFBRSxDQUFDLElBQUksQ0FBQztTQUMvRDtRQUNELE9BQU87UUFDUCxJQUFJLElBQUksQ0FBQyxpQkFBaUIsRUFBRTtZQUN4QixPQUFPLEdBQUcsSUFBSSxDQUFDLGlCQUFpQixDQUFDLHFCQUFxQixFQUFFLENBQUMsTUFBTSxDQUFDO1lBQ2hFLElBQUksR0FBRyxJQUFJLENBQUMsaUJBQWlCLENBQUMscUJBQXFCLEVBQUUsQ0FBQyxHQUFHLENBQUM7U0FDN0Q7UUFDRCxPQUFPLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE9BQU8sRUFBRSxDQUFDO0lBQ3RFLENBQUM7SUFDRDs7O09BR0c7Ozs7OztJQUNILGdEQUFXOzs7OztJQUFYLFVBQVksUUFBUTs7WUFDWixTQUFTLEdBQUcsRUFBRTtRQUNsQixRQUFRLFFBQVEsRUFBRTtZQUNkLEtBQUssV0FBVyxDQUFDO1lBQ2pCLEtBQUssS0FBSztnQkFDTixXQUFXO2dCQUNYLFNBQVMsR0FBRyxRQUFRLENBQUM7Z0JBQ3JCLE1BQU07WUFDVixLQUFLLFVBQVU7Z0JBQ1gsUUFBUTtnQkFDUixTQUFTLEdBQUcsYUFBYSxDQUFDO2dCQUMxQixNQUFNO1lBQ1YsS0FBSyxhQUFhLENBQUM7WUFDbkIsS0FBSyxNQUFNO2dCQUNQLGFBQWE7Z0JBQ2IsU0FBUyxHQUFHLFVBQVUsQ0FBQztnQkFDdkIsTUFBTTtZQUNWLEtBQUssVUFBVTtnQkFDWCxhQUFhO2dCQUNiLFNBQVMsR0FBRyxhQUFhLENBQUM7Z0JBQzFCLE1BQU07WUFDVixLQUFLLGNBQWMsQ0FBQztZQUNwQixLQUFLLE9BQU87Z0JBQ1IsYUFBYTtnQkFDYixTQUFTLEdBQUcsV0FBVyxDQUFDO2dCQUN4QixNQUFNO1lBQ1YsS0FBSyxXQUFXO2dCQUNaLGFBQWE7Z0JBQ2IsU0FBUyxHQUFHLGNBQWMsQ0FBQztnQkFDM0IsTUFBTTtZQUNWLEtBQUssYUFBYTtnQkFDZCxTQUFTO2dCQUNULFNBQVMsR0FBRyxlQUFlLENBQUM7Z0JBQzVCLE1BQU07WUFDVixLQUFLLGNBQWM7Z0JBQ2YsU0FBUyxHQUFHLFVBQVUsQ0FBQztnQkFDdkIsTUFBTTtZQUNWO2dCQUNJLFlBQVk7Z0JBQ1osU0FBUyxHQUFHLFVBQVUsQ0FBQztTQUM5QjtRQUNELE9BQU8sU0FBUyxDQUFDO0lBQ3JCLENBQUM7Ozs7OztJQUVPLHFEQUFnQjs7Ozs7SUFBeEIsVUFBeUIsS0FBSzs7WUFDdEIsTUFBTSxHQUFHLGNBQWM7UUFDM0IsUUFBUSxLQUFLLEVBQUU7WUFDWCxLQUFLLEtBQUs7Z0JBQ04sTUFBTSxHQUFHLFdBQVcsQ0FBQztnQkFDckIsTUFBTTtZQUNWLEtBQUssTUFBTTtnQkFDUCxNQUFNLEdBQUcsYUFBYSxDQUFDO2dCQUN2QixNQUFNO1lBQ1YsS0FBSyxPQUFPO2dCQUNSLE1BQU0sR0FBRyxjQUFjLENBQUM7Z0JBQ3hCLE1BQU07WUFDVixLQUFLLFFBQVE7Z0JBQ1QsTUFBTSxHQUFHLGNBQWMsQ0FBQztnQkFDeEIsTUFBTTtZQUNWO2dCQUNJLE1BQU0sR0FBRyxLQUFLLENBQUM7U0FDdEI7UUFDRCxPQUFPLE1BQU0sQ0FBQztJQUNsQixDQUFDO0lBRUQ7O09BRUc7Ozs7Ozs7OztJQUNLLG1EQUFjOzs7Ozs7OztJQUF0QixVQUF1QixPQUFZOztZQUMzQixVQUFVLEdBQUcsRUFBRTtRQUNuQixJQUFJLElBQUksQ0FBQyxXQUFXLEVBQUU7WUFDbEIsVUFBVSxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQztTQUN0QzthQUFNO1lBQ0gsVUFBVSxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUM7U0FDbkM7O1lBQ0csUUFBUSxHQUFHLENBQUM7O1lBQ1osU0FBUyxHQUFHLENBQUM7UUFDakIsSUFBSSxVQUFVLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFO1lBQ2hDLFFBQVEsR0FBRyxPQUFPLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUM7U0FDN0M7YUFBTSxJQUFJLFVBQVUsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUU7WUFDMUMsUUFBUSxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUM7U0FDN0I7UUFDRCxJQUFJLFVBQVUsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUU7WUFDbEMsU0FBUyxHQUFHLE9BQU8sQ0FBQyxLQUFLLENBQUM7U0FDN0I7YUFBTSxJQUFJLFVBQVUsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUU7WUFDeEMsU0FBUyxHQUFHLE9BQU8sQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQztTQUM5QztRQUNELEtBQUs7UUFDTCxJQUFJLFVBQVUsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUU7WUFDakMsUUFBUSxHQUFHLFFBQVEsR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDO1NBQ3hDO2FBQU0sSUFBSSxVQUFVLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFO1lBQzNDLFFBQVEsR0FBRyxRQUFRLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQztTQUN4QztRQUNELElBQUksQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxHQUFHLEdBQUcsUUFBUSxHQUFHLElBQUksQ0FBQztRQUN0RCxJQUFJLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsSUFBSSxHQUFHLFNBQVMsR0FBRyxJQUFJLENBQUM7SUFDNUQsQ0FBQztJQUVELGtCQUFrQjs7Ozs7SUFDbEIsdURBQWtCOzs7O0lBQWxCO1FBQ0ksSUFBSSxDQUFDLG9CQUFvQixFQUFFLENBQUM7UUFDNUIsSUFBSSxDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3hELElBQUksQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLGdCQUFnQixDQUN0QyxZQUFZLEVBQ1osSUFBSSxDQUFDLGVBQWUsQ0FDdkIsQ0FBQztJQUNOLENBQUM7SUFFRCxtQkFBbUI7Ozs7O0lBQ25CLHdEQUFtQjs7OztJQUFuQjtRQUNJLElBQUksQ0FBQyxxQkFBcUIsRUFBRSxDQUFDO1FBQzdCLElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDbEQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsZ0JBQWdCLENBQ3RDLFlBQVksRUFDWixJQUFJLENBQUMsZUFBZSxDQUN2QixDQUFDO0lBQ04sQ0FBQztJQUVELHFCQUFxQjtJQUNyQixtQkFBbUI7SUFDbkIsd0RBQXdEO0lBQ3hELGlFQUFpRTtJQUNqRSxJQUFJO0lBRUosVUFBVTs7Ozs7Ozs7OztJQUNWLHlEQUFvQjs7Ozs7Ozs7O0lBQXBCO1FBQ0ksSUFBSSxJQUFJLENBQUMsZUFBZSxFQUFFO1lBQ3RCLElBQUksQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLG1CQUFtQixDQUN6QyxZQUFZLEVBQ1osSUFBSSxDQUFDLGVBQWUsQ0FDdkIsQ0FBQztTQUNMO0lBQ0wsQ0FBQzs7OztJQUNELDBEQUFxQjs7O0lBQXJCO1FBQ0ksSUFBSSxJQUFJLENBQUMsZUFBZSxFQUFFO1lBQ3RCLElBQUksQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLG1CQUFtQixDQUN6QyxZQUFZLEVBQ1osSUFBSSxDQUFDLGVBQWUsQ0FDdkIsQ0FBQztTQUNMO0lBQ0wsQ0FBQztJQUNELHFCQUFxQjtJQUNyQixtQ0FBbUM7SUFDbkMsc0VBQXNFO0lBQ3RFLE1BQU07SUFDTixJQUFJO0lBRUosZUFBZTs7Ozs7Ozs7OztJQUNmLHFEQUFnQjs7Ozs7Ozs7OztJQUFoQjtRQUNJLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDO0lBQ3ZCLENBQUM7SUFFRCxnQkFBZ0I7Ozs7O0lBQ2hCLHNEQUFpQjs7OztJQUFqQjtRQUNJLElBQUksQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDO0lBQ3hCLENBQUM7SUFFRCxtQkFBbUI7Ozs7O0lBQ25CLCtDQUFVOzs7O0lBQVY7UUFBQSxpQkFhQztRQVpHLElBQUksSUFBSSxDQUFDLE1BQU0sRUFBRTtZQUNiLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1lBQ3pCLHlCQUF5QjtZQUN6QixJQUFJLENBQUMscUJBQXFCLEVBQUUsQ0FBQztZQUM3QixJQUFJLENBQUMsb0JBQW9CLEVBQUUsQ0FBQztZQUM1QixJQUFJLENBQUMsS0FBSyxFQUFFLENBQUM7WUFDYixJQUFJLElBQUksQ0FBQyxVQUFVLEVBQUU7Z0JBQ2pCLElBQUksQ0FBQyxNQUFNLENBQUMsaUJBQWlCOzs7Z0JBQUM7b0JBQzFCLFlBQVksQ0FBQyxLQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7Z0JBQ2xDLENBQUMsRUFBQyxDQUFDO2FBQ047U0FDSjtJQUNMLENBQUM7SUFFRCw0QkFBNEI7Ozs7O0lBQzVCLHVEQUFrQjs7OztJQUFsQjtRQUFBLGlCQWtCQztRQWpCRyxJQUFJLENBQUMsTUFBTSxDQUFDLGlCQUFpQjs7O1FBQUM7WUFDbkMsSUFBSSxLQUFJLENBQUMsVUFBVSxFQUFFO2dCQUNwQixZQUFZLENBQUMsS0FBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO2FBQzlCO1lBQ1EsS0FBSSxDQUFDLFVBQVUsR0FBRyxVQUFVOzs7WUFBQztnQkFDekIsSUFBSSxDQUFDLEtBQUksQ0FBQyxNQUFNLEVBQUU7b0JBQ2QsS0FBSSxDQUFDLGlCQUFpQixFQUFFLENBQUM7b0JBQ3pCLHlCQUF5QjtvQkFDekIsS0FBSSxDQUFDLHFCQUFxQixFQUFFLENBQUM7b0JBQzdCLEtBQUksQ0FBQyxvQkFBb0IsRUFBRSxDQUFDO29CQUM1QixLQUFJLENBQUMsS0FBSyxFQUFFLENBQUM7b0JBQ2IsSUFBSSxLQUFJLENBQUMsVUFBVSxFQUFFO3dCQUNqQixZQUFZLENBQUMsS0FBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO3FCQUNqQztpQkFDSjtZQUNMLENBQUMsR0FBRSxJQUFJLENBQUMsQ0FBQztRQUNiLENBQUMsRUFBQyxDQUFDO0lBQ1AsQ0FBQztJQUVELFlBQVk7Ozs7O0lBQ1osMENBQUs7Ozs7SUFBTDtRQUNJLElBQUksQ0FBQyxJQUFJLEdBQUcsS0FBSyxDQUFDO1FBQ2xCLGlCQUFpQjtRQUNqQixJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxXQUFXLENBQUMsRUFBRTtZQUM5QixJQUFJLENBQUMsU0FBUyxDQUFDLGFBQWEsRUFBRSxDQUFDO1lBQy9CLElBQUksQ0FBQyxTQUFTLENBQUMsWUFBWSxFQUFFLENBQUM7U0FDakM7UUFDRCxJQUFJLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUVoQyxJQUFJLENBQUMsY0FBYyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxDQUFDO0lBQzFELENBQUM7SUFFRCx1QkFBdUI7Ozs7Ozs7SUFDZixnREFBVzs7Ozs7O0lBQW5CLFVBQW9CLENBQUM7OztZQUVYLE9BQU8sR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxxQkFBcUIsRUFBRTs7O1lBRTVELFFBQVEsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxxQkFBcUIsRUFBRTtRQUNoRSxJQUFJLENBQUMsV0FBVyxHQUFHLFFBQVEsQ0FBQyxNQUFNLENBQUM7UUFDbkMsSUFBSSxDQUFDLFVBQVUsR0FBRyxRQUFRLENBQUMsS0FBSyxDQUFDO1FBQ2pDLFlBQVk7UUFDWixJQUFJLElBQUksQ0FBQyxXQUFXLEVBQUU7WUFDbEIsSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsQ0FBQztTQUNqQztRQUNELElBQUksQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDakMsQ0FBQzs7OztJQUVELGdEQUFXOzs7SUFBWDtRQUNJLDBCQUEwQjtRQUMxQixJQUFJLElBQUksQ0FBQyxLQUFLLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxhQUFhLEVBQUU7WUFDeEMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxhQUFhLENBQUMsQ0FBQztTQUN6RDtRQUNELElBQUksQ0FBQyxjQUFjLEdBQUcsSUFBSSxDQUFDO0lBQy9CLENBQUM7O2dCQWxlSixTQUFTLFNBQUM7b0JBQ1AsUUFBUSxFQUFFLHFCQUFxQjtvQkFDL0Isc2tFQUE0QztvQkFDNUMsZUFBZSxFQUFFLHVCQUF1QixDQUFDLE1BQU07aUJBQ2xEOzs7O2dCQXZDRyxpQkFBaUI7Z0JBVGpCLE1BQU07Ozt3QkFvREwsU0FBUyxTQUFDLE9BQU87eUJBQ2pCLFNBQVMsU0FBQyxRQUFRO29DQUVsQixLQUFLO29DQUVMLEtBQUs7OEJBRUwsS0FBSzt1QkFPTCxLQUFLO3dCQUdMLEtBQUs7dUJBR0wsS0FBSzt1QkFHTCxLQUFLOzRCQUlMLEtBQUs7d0JBa0JMLEtBQUs7eUJBQ0wsS0FBSzs4QkFLTCxNQUFNO3lCQUdOLE1BQU07d0JBQ04sTUFBTTsrQkFHTixNQUFNOzJCQUtOLEtBQUs7O0lBNFpWLGlDQUFDO0NBQUEsQUFuZUQsSUFtZUM7U0E5ZFksMEJBQTBCOzs7SUFHbkMsMkNBQXNDOztJQUN0Qyw0Q0FBd0M7O0lBRXhDLHVEQUF3Qzs7SUFFeEMsdURBQXdDOztJQUV4QyxpREFBNEI7Ozs7O0lBRTVCLG1EQUF1Qzs7SUFFdkMsc0RBQWtDOztJQUdsQywwQ0FBd0I7O0lBR3hCLDJDQUFtQjs7SUFHbkIsMENBQXdCOztJQUd4QiwwQ0FBMEI7Ozs7O0lBRzFCLGdEQUE4Qjs7Ozs7SUFtQjlCLDJDQUFxQjs7SUFDckIsNENBQXNCOzs7OztJQUN0QixnREFBdUI7Ozs7O0lBQ3ZCLGlEQUF3Qjs7SUFHeEIsaURBQWdEOztJQUdoRCw0Q0FBMkM7O0lBQzNDLDJDQUEwQzs7SUFHMUMsa0RBQWlEOzs7OztJQUtqRCw4Q0FBMEI7O0lBRzFCLDBDQUFhOztJQVliLGtEQUE2Qjs7SUFDN0IsMkNBQVc7O0lBR1gsNENBQWdCOztJQUdoQixxREFBcUI7O0lBQ3JCLHFEQUFxQjs7SUFDckIsd0RBQXdCOztJQUd4Qiw2Q0FBYTs7SUFHYixnREFBZ0I7O0lBRW5CLCtDQUF3Qjs7Ozs7SUFDeEIsOENBQXFCOztJQUNsQixvREFBcUM7Ozs7O0lBQ3pCLCtDQUFvQzs7Ozs7SUFBRSw0Q0FBc0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xyXG4gICAgT25EZXN0cm95LFxyXG4gICAgTmdab25lLFxyXG4gICAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksXHJcbiAgICBSZW5kZXJlcjIsXHJcbiAgICBPbkNoYW5nZXMsXHJcbiAgICBTaW1wbGVDaGFuZ2VzLFxyXG59IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XHJcbmltcG9ydCB7XHJcbiAgICBBZnRlclZpZXdJbml0LFxyXG4gICAgQWZ0ZXJWaWV3Q2hlY2tlZCxcclxuICAgIENoYW5nZURldGVjdG9yUmVmLFxyXG59IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XHJcbmltcG9ydCB7XHJcbiAgICBDb21wb25lbnQsXHJcbiAgICBPbkluaXQsXHJcbiAgICBJbnB1dCxcclxuICAgIE91dHB1dCxcclxuICAgIEV2ZW50RW1pdHRlcixcclxuICAgIFZpZXdDaGlsZCxcclxuICAgIEVsZW1lbnRSZWYsXHJcbn0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcclxuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSBcIi4vYnV0dG9uXCI7XHJcbmltcG9ydCB7IFN1YmplY3QgfSBmcm9tIFwicnhqc1wiO1xyXG5pbXBvcnQgeyBJZFNlcnZpY2UsIE92ZXJMYXlIaWRkZW5TZXJ2aWNlIH0gZnJvbSBcIkBmYXJyaXMvdWktY29tbW9uXCI7XHJcblxyXG5mdW5jdGlvbiBoaWRlQnRuTWVudSgpIHtcclxuICAgIGNvbnN0IGRkbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZi1idG4tZ3JvdXAtZHJvcGRvd24tbWVudS5zaG93XCIpO1xyXG4gICAgaWYgKGRkbSkge1xyXG4gICAgICAgIGRkbS5jbGFzc05hbWUgPSBkZG0uY2xhc3NOYW1lLnJlcGxhY2UoXCJzaG93XCIsIFwiXCIpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBoaWRlQnV0dG9uTWVudShlKSB7XHJcbiAgICBpZiAoIWUudGFyZ2V0KSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBjbGFzc0xpc3QgPSBBcnJheS5mcm9tKGUudGFyZ2V0LmNsYXNzTGlzdCB8fCBbXSk7XHJcblxyXG4gICAgaWYgKGUudGFyZ2V0Lm5vZGVOYW1lICE9PSBcIkxJXCIgJiYgIWUudGFyZ2V0LmNsb3Nlc3QoJ2xpLmRyb3Bkb3duLWl0ZW0nKSAmJiAhY2xhc3NMaXN0LmluY2x1ZGVzKFwiZHJvcGRvd24taXRlbVwiKSkge1xyXG4gICAgICAgIGhpZGVCdG5NZW51KCk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiBcImZhcnJpcy1idXR0b24tZ3JvdXBcIixcclxuICAgIHRlbXBsYXRlVXJsOiBgLi9idXR0b24tZ3JvdXAuY29tcG9uZW50Lmh0bWxgLFxyXG4gICAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBGYXJyaXNCdXR0b25Hcm91cENvbXBvbmVudFxyXG4gICAgaW1wbGVtZW50cyBPbkluaXQsIE9uQ2hhbmdlcywgQWZ0ZXJWaWV3SW5pdCwgQWZ0ZXJWaWV3Q2hlY2tlZCwgT25EZXN0cm95XHJcbntcclxuICAgIEBWaWV3Q2hpbGQoXCJkcEJ0blwiKSBkcEJ0bjogRWxlbWVudFJlZjtcclxuICAgIEBWaWV3Q2hpbGQoXCJkcE1lbnVcIikgZHBNZW51OiBFbGVtZW50UmVmO1xyXG4gICAgLy8g5qiq5ZCR57qg5q2j55qE5Y+C54WnXHJcbiAgICBASW5wdXQoKSByZWN0aWZ5UmVmZXJlbmNlSDogSFRNTEVsZW1lbnQ7XHJcbiAgICAvLyDnurXlkJHnuqDmraPnmoTlj4LnhadcclxuICAgIEBJbnB1dCgpIHJlY3RpZnlSZWZlcmVuY2VWOiBIVE1MRWxlbWVudDtcclxuICAgIC8vIOaYr+WQpuiHquWKqOe6oOato+S9jee9rlxyXG4gICAgQElucHV0KCkgYXV0b1JlY3RpZnkgPSB0cnVlO1xyXG4gICAgLy8g6K6h566X5pa55ZCR55qE55yf5q2jcGxhY2VtZW50XHJcbiAgICBwcml2YXRlIHJlYWxQbGFjZW1lbnQgPSBcImJvdHRvbS1yaWdodFwiO1xyXG4gICAgLy8g6YeN5paw6K6h566X5ZCO55qEcGxhY2VtZW50XHJcbiAgICByZWN0aWZ5UGxhY2VtZW50ID0gXCJib3R0b20tcmlnaHRcIjtcclxuXHJcbiAgICAvKiDmjInpkq7kv6Hmga8gKi9cclxuICAgIEBJbnB1dCgpIGRhdGE6IEJ1dHRvbltdO1xyXG5cclxuICAgIC8qIOaYvuekuueahOaMiemSruaVsOmHjyAg6buY6K6k5Li6MiAqL1xyXG4gICAgQElucHV0KCkgY291bnQgPSAyO1xyXG5cclxuICAgIC8qIOaMiemSruWkp+WwjyAqL1xyXG4gICAgQElucHV0KCkgc2l6ZSA9IFwic21hbGxcIjtcclxuXHJcbiAgICAvKiDmjInpkq7moLflvI8gKi9cclxuICAgIEBJbnB1dCgpIHR5cGUgPSBcInByaW1hcnlcIjtcclxuXHJcbiAgICAvKiDmjInpkq7lsZXnpLrkvY3nva4gKi9cclxuICAgIHByaXZhdGUgX3BsYWNlbWVudCA9IFwiYm90dG9tXCI7XHJcbiAgICBASW5wdXQoKVxyXG4gICAgc2V0IHBsYWNlbWVudCh2YWx1ZSkge1xyXG4gICAgICAgIGlmICghdmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodmFsdWUgIT09IHRoaXMuX3BsYWNlbWVudCkge1xyXG4gICAgICAgICAgICB0aGlzLnJlYWxQbGFjZW1lbnQgPSB0aGlzLmdldFJlYWxQbGFjZW1lbnQodmFsdWUpO1xyXG4gICAgICAgICAgICB0aGlzLl9wbGFjZW1lbnQgPSB2YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXQgcGxhY2VtZW50KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9wbGFjZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyogbWVudSBzaXplICovXHJcbiAgICAvKipcclxuICAgICAqMjAyMS4wNi4xMiDlup/lvIPvvIzlm6DkuLrkvb/nlKjogIXkuI3nn6XpgZPlnKjkuK3oi7Hmlofmg4XlhrXkuIvvvIzkuIvmi4npnaLmnb/nmoTlrr3luqblkozpq5jluqZcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgd2lkdGggPSAxMjA7XHJcbiAgICBASW5wdXQoKSBoZWlnaHQgPSAyNTA7XHJcbiAgICBwcml2YXRlIF9tZW51V2lkdGggPSAwO1xyXG4gICAgcHJpdmF0ZSBfbWVudUhlaWdodCA9IDA7XHJcblxyXG4gICAgLyog5LiL5ouJ5oyJ6ZKuIOinpuWPkeS6i+S7tiAqL1xyXG4gICAgQE91dHB1dCgpIGNoYW5nZVN0YXRlID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcblxyXG4gICAgLyog5LiL5ouJ6I+c5Y2V6aG554K55Ye75LqL5Lu2ICovXHJcbiAgICBAT3V0cHV0KCkgY2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcbiAgICBAT3V0cHV0KCkgY2xpY2sgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuXHJcbiAgICAvKiDop6blj5HkuIvmi4nmjInpkq7pnaLmnb/ljLrln5/kuYvlpJbnmoTkuovku7YgKi9cclxuICAgIEBPdXRwdXQoKSBjbGlja01lbnVPdXQgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIDIwMjEuMDYuMTIg5bqf5byD77yM5Zug5Li65b2TYXV0b1NpemXkuLp0cnVl55qE5pe25YCZ77yM5oyJ6ZKu5pi+56S65LiN5Ye65p2l44CCXHJcbiAgICAgKi9cclxuICAgIEBJbnB1dCgpIGF1dG9TaXplID0gZmFsc2U7XHJcblxyXG4gICAgLyog5LiL5ouJ6Z2i5p2/5pi+56S6ICovXHJcbiAgICBzaG93ID0gZmFsc2U7XHJcbiAgICAvKiDmmL7npLrlh7rmnaXnmoTmjInpkq7nu4QgKi9cclxuICAgIGdldCBmbGF0QnV0dG9ucygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhICYmIHRoaXMuZGF0YS5zbGljZSgwLCB0aGlzLmNvdW50KTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZHBCdXR0b25zKCkge1xyXG4gICAgICAgIC8vIHRoaXMuaGVpZ2h0ID0gdGhpcy5kcEJ1dHRvbnMubGVuZ3RoICogMzU7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEgJiYgdGhpcy5kYXRhLnNsaWNlKHRoaXMuY291bnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFBvc2l0aW9uJCA9IG5ldyBTdWJqZWN0KCk7XHJcbiAgICBldmVudDogYW55O1xyXG5cclxuICAgIC8qIOS4i+aLiemdouadv+aYvuekuuagh+W/lyAqL1xyXG4gICAgZHBGbGFnOiBib29sZWFuO1xyXG5cclxuICAgIC8qIOS6i+S7tiAqL1xyXG4gICAgbW91c2VlbnRlckV2ZW50OiBhbnk7XHJcbiAgICBtb3VzZWxlYXZlRXZlbnQ6IGFueTtcclxuICAgIGRvY3VtZW50Q2xpY2tFdmVudDogYW55O1xyXG5cclxuICAgIC8qIOS4ieS4queCueaMiemSruWwuuWvuCAqL1xyXG4gICAgYnRuU2l6ZTogYW55O1xyXG5cclxuICAgIC8qICAqL1xyXG4gICAgc2V0VGltZU9iajogYW55O1xyXG5cclxuXHRidG5tZW51aWQgPSAnYnRuLW1lbnUtJztcclxuXHRwcml2YXRlIHByZXZpb3VzID0gMDtcclxuICAgIG92ZXJMYXlTZXJ2aWNlOiBPdmVyTGF5SGlkZGVuU2VydmljZTtcclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgY2hhbmdlUmVmOiBDaGFuZ2VEZXRlY3RvclJlZiwgcHJpdmF0ZSBuZ1pvbmU6IE5nWm9uZSkge31cclxuXHJcblx0cHJpdmF0ZSBidG5tZW51SWQoKSB7XHJcblx0XHRjb25zdCBpZFNlciA9IG5ldyBJZFNlcnZpY2UoKTtcclxuXHRcdHRoaXMuYnRubWVudWlkICs9IGlkU2VyLmd1aWQoKTtcclxuICAgICAgICB0aGlzLm92ZXJMYXlTZXJ2aWNlID0gbmV3IE92ZXJMYXlIaWRkZW5TZXJ2aWNlKCk7XHJcblx0fVxyXG5cclxuICAgIG5nT25Jbml0KCkge1xyXG4gICAgICAgIHRoaXMuYnRubWVudUlkKCk7XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkNoYW5nZXMoc2ltcGxlQ2hhbmdlczogU2ltcGxlQ2hhbmdlcykge1xyXG4gICAgICAgIGlmIChzaW1wbGVDaGFuZ2VzW1wiZGF0YVwiXSkge1xyXG4gICAgICAgICAgICAvLyB0aGlzLmZsYXRCdXR0b25zID0gdGhpcy5kYXRhLnNsaWNlKDAsIHRoaXMuY291bnQpO1xyXG4gICAgICAgICAgICAvLyB0aGlzLmRwQnV0dG9ucyA9IHRoaXMuZGF0YS5zbGljZSh0aGlzLmNvdW50KTtcclxuICAgICAgICAgICAgLy8gdGhpcy5oZWlnaHQgPSB0aGlzLmRwQnV0dG9ucy5sZW5ndGggKiAzNTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbmdBZnRlclZpZXdJbml0KCkge31cclxuXHJcbiAgICBuZ0FmdGVyVmlld0NoZWNrZWQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2hvdykge1xyXG4gICAgICAgICAgICAvLyBjb25zdCB7IGhlaWdodCwgd2lkdGggfSA9IHRoaXMuZHBNZW51Lm5hdGl2ZUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0UG9zaXRpb24odGhpcy5ldmVudCk7XHJcbiAgICAgICAgICAgIC8vIHRoaXMuc2V0UG9zaXRpb24kLnN1YnNjcmliZShyZXMgPT4gdGhpcy5zZXRQb3NpdGlvbihyZXMsIHdpZHRoLCBoZWlnaHQpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY2xpY2tFdmVudChlOiBhbnkpIHtcclxuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIHRoaXMuc2hvdyA9ICEodGhpcy5zaG93ICYmIHRoaXMuZHBNZW51Lm5hdGl2ZUVsZW1lbnQuY2xhc3NOYW1lLmluZGV4T2YoJ3Nob3cnKSA+IC0xKTtcclxuICAgICAgICAvLyBib2R55re75Yqg6Z2i5p2/XHJcbiAgICAgICAgaWYgKHRoaXMuc2hvdykge1xyXG5cdFx0XHQvKiog56e76Zmk546w5pyJ55qE5LiL5ouJ5bGV56S66I+c5Y2VICovXHJcblx0XHRcdGhpZGVCdG5NZW51KCk7XHJcbiAgICAgICAgICAgIHRoaXMuYXBwZW5kQm9keSgpO1xyXG4gICAgICAgICAgICAvLyB0aGlzLnNldFBvc2l0aW9uKGUpO1xyXG4gICAgICAgICAgICAvLyB0aGlzLnNldFBvc2l0aW9uJC5uZXh0KGUpO1xyXG5cclxuICAgICAgICAgICAgLy8g5rOo5YaM6byg5qCH5rua6L2u77yM54K55Ye75LqL5Lu277yM55So5LqO6ZqQ6JePUGFuZWxcclxuICAgICAgICAgICAgdGhpcy5vdmVyTGF5U2VydmljZS5yZWdpc3Rlck1vdXNlRXZlbnQodGhpcy5kcEJ0bi5uYXRpdmVFbGVtZW50LCAoZTogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaGlkZUJ1dHRvbk1lbnUoZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuXHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50ID0gZTtcclxuICAgICAgICAgICAgLy8g57uR5a6a55u45bqU55qE5LqL5Lu2XHJcbiAgICAgICAgICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYmluZE1lbnVNb3VzZWVudGVyKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJpbmRpTWVudU1vdXNlbGVhdmUoKTtcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMuYmluZERvY0NsaWNrKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vdXNlTm90RW50ZXJMZWF2ZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g6Z2i5p2/5pi+56S6IOiEj+WAvOajgOa1i1xyXG4gICAgICAgIHRoaXMuY2hhbmdlUmVmLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICB0aGlzLmNoYW5nZVJlZi5tYXJrRm9yQ2hlY2soKTtcclxuICAgICAgICAvLyB0aGlzLmNoYW5nZVN0YXRlLmVtaXQoeyBvcmlnaW5FdmVudDogZSwgc2hvdzogdGhpcy5zaG93IH0pO1xyXG4gICAgICAgIHRoaXMuY2hhbmdlU3RhdGUuZW1pdCh0aGlzLnNob3cpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qIOaMiemSruinpuWPkeS6i+S7tiAqL1xyXG4gICAgdG9nZ2xlKGU6IGFueSwgYnRuKSB7XHJcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICBpZiAoYnRuLmRpc2FibGVkKSByZXR1cm47XHJcbiAgICAgICAgdGhpcy5zaG93ID0gZmFsc2U7XHJcbiAgICAgICAgLy8gdGhpcy51bmJpbmREb2NDbGljaygpO1xyXG4gICAgICAgIC8vIOWFs+mXreS4i+aLieaMiemSrumdouadvyAg6ISP5YC85qOA5rWLXHJcbiAgICAgICAgdGhpcy5jaGFuZ2VSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIHRoaXMuY2hhbmdlUmVmLm1hcmtGb3JDaGVjaygpO1xyXG4gICAgICAgIHRoaXMuY2hhbmdlLmVtaXQoYnRuLmlkKTtcclxuICAgICAgICB0aGlzLmNsaWNrLmVtaXQoYnRuKTtcclxuXHJcbiAgICAgICAgdGhpcy5vdmVyTGF5U2VydmljZS5kZXN0b3J5KHRoaXMuZHBCdG4ubmF0aXZlRWxlbWVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5LiL5ouJ5oyJ6ZKu5pi+56S65YiwYm9keeS4rSAg5Y+v5pS55Y+Y6Z2i5p2/5pa55ZCRXHJcbiAgICBhcHBlbmRCb2R5KCkge1xyXG4gICAgICAgIGlmICh0aGlzLmRwTWVudS5uYXRpdmVFbGVtZW50ICYmICFkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5PiMnICsgdGhpcy5idG5tZW51aWQpKSB7XHJcbiAgICAgICAgICAgIC8vIOa3u+WKoOWIsGJvZHkgIOS+v+S6juWFqOmDqOaYvuekulxyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuZHBNZW51Lm5hdGl2ZUVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuXHRcdHRoaXMuZHBNZW51Lm5hdGl2ZUVsZW1lbnQuY2xhc3NOYW1lID0gdGhpcy5kcE1lbnUubmF0aXZlRWxlbWVudC5jbGFzc05hbWUgKyAnIHNob3cnO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbW92ZU1lbnVQYW5lbCgpIHtcclxuICAgICAgICBpZiAodGhpcy5kcE1lbnUubmF0aXZlRWxlbWVudCAmJiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5PiMnICsgdGhpcy5idG5tZW51aWQpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZHBNZW51Lm5hdGl2ZUVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5b2T5LiL5ouJ6LaF5Ye66L6555WM5pe2ICDovazmjaLmlrnlkJEsXHJcbiAgICAgKiDlubbmnKrlpITnkIbvvIzovrnnlYzkuI3lpJ/kuIvmi4nlsZXnpLrnmoTmg4XlhrVcclxuICAgICAqIEBwYXJhbSBidG5TaXplXHJcbiAgICAgKi9cclxuICAgIGNoYW5nZVBsYWNlbWVudChidG5TaXplOiBhbnkpIHtcclxuICAgICAgICBpZiAoIXRoaXMuYXV0b1JlY3RpZnkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgcmVmZXJQb3NpdGlvbiA9IHRoaXMuZ2V0UmVmZXJlbmNlUG9zaXRpb24oKTtcclxuICAgICAgICBsZXQgbmV3UGxhY2VtZW50ID0gdGhpcy5yZWFsUGxhY2VtZW50O1xyXG4gICAgICAgIGlmIChuZXdQbGFjZW1lbnQuaW5kZXhPZihcImJvdHRvbVwiKSA+IC0xKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9tZW51SGVpZ2h0ID4gcmVmZXJQb3NpdGlvbi5ib3R0b20gLSBidG5TaXplLmJvdHRvbSkge1xyXG4gICAgICAgICAgICAgICAgbmV3UGxhY2VtZW50ID0gbmV3UGxhY2VtZW50LnJlcGxhY2UoXCJib3R0b21cIiwgXCJ0b3BcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKG5ld1BsYWNlbWVudC5pbmRleE9mKFwidG9wXCIpID4gLTEpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX21lbnVIZWlnaHQgPiBidG5TaXplLnRvcCAtIHJlZmVyUG9zaXRpb24udG9wKSB7XHJcbiAgICAgICAgICAgICAgICBuZXdQbGFjZW1lbnQgPSBuZXdQbGFjZW1lbnQucmVwbGFjZShcInRvcFwiLCBcImJvdHRvbVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobmV3UGxhY2VtZW50LmluZGV4T2YoXCJsZWZ0XCIpID4gLTEpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX21lbnVXaWR0aCA+IGJ0blNpemUubGVmdCAtIHJlZmVyUG9zaXRpb24ubGVmdCkge1xyXG4gICAgICAgICAgICAgICAgbmV3UGxhY2VtZW50ID0gbmV3UGxhY2VtZW50LnJlcGxhY2UoXCJsZWZ0XCIsIFwicmlnaHRcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKG5ld1BsYWNlbWVudC5pbmRleE9mKFwicmlnaHRcIikgPiAtMSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fbWVudVdpZHRoID4gcmVmZXJQb3NpdGlvbi5yaWdodCAtIGJ0blNpemUucmlnaHQpIHtcclxuICAgICAgICAgICAgICAgIG5ld1BsYWNlbWVudCA9IG5ld1BsYWNlbWVudC5yZXBsYWNlKFwicmlnaHRcIiwgXCJsZWZ0XCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucmVjdGlmeVBsYWNlbWVudCA9IG5ld1BsYWNlbWVudDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog56Gu6K6k5Y+C54Wn55qE6L6555WMXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZ2V0UmVmZXJlbmNlUG9zaXRpb24oKSB7XHJcbiAgICAgICAgbGV0IHJSaWdodCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aDtcclxuICAgICAgICBsZXQgckJvdHRvbSA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQ7XHJcbiAgICAgICAgbGV0IHJUb3AgPSAwO1xyXG4gICAgICAgIGxldCByTGVmdCA9IDA7XHJcbiAgICAgICAgLy8g5qiq5ZCR5Y+C54WnXHJcbiAgICAgICAgaWYgKHRoaXMucmVjdGlmeVJlZmVyZW5jZUgpIHtcclxuICAgICAgICAgICAgclJpZ2h0ID0gdGhpcy5yZWN0aWZ5UmVmZXJlbmNlSC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5yaWdodDtcclxuICAgICAgICAgICAgckxlZnQgPSB0aGlzLnJlY3RpZnlSZWZlcmVuY2VILmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOe6teWQkeWPgueFp1xyXG4gICAgICAgIGlmICh0aGlzLnJlY3RpZnlSZWZlcmVuY2VWKSB7XHJcbiAgICAgICAgICAgIHJCb3R0b20gPSB0aGlzLnJlY3RpZnlSZWZlcmVuY2VWLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmJvdHRvbTtcclxuICAgICAgICAgICAgclRvcCA9IHRoaXMucmVjdGlmeVJlZmVyZW5jZVYuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4geyB0b3A6IHJUb3AsIGxlZnQ6IHJMZWZ0LCByaWdodDogclJpZ2h0LCBib3R0b206IHJCb3R0b20gfTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5Y+Y5YyW5a+55bqU55qEY2xhc3NcclxuICAgICAqIEBwYXJhbSBwb3NpdGlvblxyXG4gICAgICovXHJcbiAgICBfZ2V0Q2xzTmFtZShwb3NpdGlvbikge1xyXG4gICAgICAgIGxldCBjbGFzc05hbWUgPSBcIlwiO1xyXG4gICAgICAgIHN3aXRjaCAocG9zaXRpb24pIHtcclxuICAgICAgICAgICAgY2FzZSBcInRvcC1yaWdodFwiOlxyXG4gICAgICAgICAgICBjYXNlIFwidG9wXCI6XHJcbiAgICAgICAgICAgICAgICAvLyDmnJ3kuIrvvIzmnJ3kuIot5pyd5Y+zXHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWUgPSBcImRyb3B1cFwiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJ0b3AtbGVmdFwiOlxyXG4gICAgICAgICAgICAgICAgLy8g5pyd5LiKLeacneW3plxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lID0gXCJkcm9wdXAtbGVmdFwiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJsZWZ0LWJvdHRvbVwiOlxyXG4gICAgICAgICAgICBjYXNlIFwibGVmdFwiOlxyXG4gICAgICAgICAgICAgICAgLy8g5qiq5ZCR4oCU4oCU5pyd5bem4oCU4oCU5pyd5LiLXHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWUgPSBcImRyb3BsZWZ0XCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcImxlZnQtdG9wXCI6XHJcbiAgICAgICAgICAgICAgICAvLyDmqKrlkJHigJTigJTmnJ3lt6bigJTigJTmnJ3kuIpcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZSA9IFwiZHJvcGxlZnQtdXBcIjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwicmlnaHQtYm90dG9tXCI6XHJcbiAgICAgICAgICAgIGNhc2UgXCJyaWdodFwiOlxyXG4gICAgICAgICAgICAgICAgLy8g5qiq5ZCR4oCU4oCU5pyd5Y+z4oCU4oCU5pyd5LiLXHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWUgPSBcImRyb3ByaWdodFwiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJyaWdodC10b3BcIjpcclxuICAgICAgICAgICAgICAgIC8vIOaoquWQkeKAlOKAlOacneWPs+KAlOKAlOacneS4ilxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lID0gXCJkcm9wcmlnaHQtdXBcIjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiYm90dG9tLWxlZnRcIjpcclxuICAgICAgICAgICAgICAgIC8vIOacneS4i+KAlOKAlOacneW3plxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lID0gXCJkcm9wZG93bi1sZWZ0XCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcImJvdHRvbS1yaWdodFwiOlxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lID0gXCJkcm9wZG93blwiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAvLyDmnJ3kuIvvvIzmnJ3kuIvigJTigJTmnJ3lj7NcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZSA9IFwiZHJvcGRvd25cIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNsYXNzTmFtZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldFJlYWxQbGFjZW1lbnQocG1lbnQpIHtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gXCJib3R0b20tcmlnaHRcIjtcclxuICAgICAgICBzd2l0Y2ggKHBtZW50KSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJ0b3BcIjpcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IFwidG9wLXJpZ2h0XCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcImxlZnRcIjpcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IFwibGVmdC1ib3R0b21cIjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwicmlnaHRcIjpcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IFwicmlnaHQtYm90dG9tXCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcImJvdHRvbVwiOlxyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gXCJib3R0b20tcmlnaHRcIjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gcG1lbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLypcclxuICAgICAqIOiuoeeul+eahOS9jee9ruWMuuWIhuW/kue7huWMllxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNoYW5nZVBvc2l0aW9uKGJ0blNpemU6IGFueSkge1xyXG4gICAgICAgIGxldCBycGxhY2VtZW50ID0gXCJcIjtcclxuICAgICAgICBpZiAodGhpcy5hdXRvUmVjdGlmeSkge1xyXG4gICAgICAgICAgICBycGxhY2VtZW50ID0gdGhpcy5yZWN0aWZ5UGxhY2VtZW50O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJwbGFjZW1lbnQgPSB0aGlzLnJlYWxQbGFjZW1lbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBzdHlsZVRvcCA9IDA7XHJcbiAgICAgICAgbGV0IHN0eWxlTGVmdCA9IDA7XHJcbiAgICAgICAgaWYgKHJwbGFjZW1lbnQuaW5kZXhPZihcInRvcFwiKSA+IC0xKSB7XHJcbiAgICAgICAgICAgIHN0eWxlVG9wID0gYnRuU2l6ZS50b3AgLSB0aGlzLl9tZW51SGVpZ2h0O1xyXG4gICAgICAgIH0gZWxzZSBpZiAocnBsYWNlbWVudC5pbmRleE9mKFwiYm90dG9tXCIpID4gLTEpIHtcclxuICAgICAgICAgICAgc3R5bGVUb3AgPSBidG5TaXplLmJvdHRvbTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJwbGFjZW1lbnQuaW5kZXhPZihcInJpZ2h0XCIpID4gLTEpIHtcclxuICAgICAgICAgICAgc3R5bGVMZWZ0ID0gYnRuU2l6ZS5yaWdodDtcclxuICAgICAgICB9IGVsc2UgaWYgKHJwbGFjZW1lbnQuaW5kZXhPZihcImxlZnRcIikgPiAtMSkge1xyXG4gICAgICAgICAgICBzdHlsZUxlZnQgPSBidG5TaXplLmxlZnQgLSB0aGlzLl9tZW51V2lkdGg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOW8gOWktFxyXG4gICAgICAgIGlmIChycGxhY2VtZW50LmluZGV4T2YoXCItdG9wXCIpID4gLTEpIHtcclxuICAgICAgICAgICAgc3R5bGVUb3AgPSBzdHlsZVRvcCAtIGJ0blNpemUuaGVpZ2h0O1xyXG4gICAgICAgIH0gZWxzZSBpZiAocnBsYWNlbWVudC5pbmRleE9mKFwiLWJvdHRvbVwiKSA+IC0xKSB7XHJcbiAgICAgICAgICAgIHN0eWxlVG9wID0gc3R5bGVUb3AgKyBidG5TaXplLmhlaWdodDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5kcE1lbnUubmF0aXZlRWxlbWVudC5zdHlsZS50b3AgPSBzdHlsZVRvcCArIFwicHhcIjtcclxuICAgICAgICB0aGlzLmRwTWVudS5uYXRpdmVFbGVtZW50LnN0eWxlLmxlZnQgPSBzdHlsZUxlZnQgKyBcInB4XCI7XHJcbiAgICB9XHJcblxyXG4gICAgLyog57uR5a6a5LiL5ouJ6Z2i5p2/6byg5qCH6L+b5YWl5LqL5Lu2ICovXHJcbiAgICBiaW5kTWVudU1vdXNlZW50ZXIoKSB7XHJcbiAgICAgICAgdGhpcy51bmJpbmRNZW51TW91c2VlbnRlcigpO1xyXG4gICAgICAgIHRoaXMubW91c2VlbnRlckV2ZW50ID0gdGhpcy5jaGFuZ2VGbGFnVG9UcnVlLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5kcE1lbnUubmF0aXZlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICAgICBcIm1vdXNlZW50ZXJcIixcclxuICAgICAgICAgICAgdGhpcy5tb3VzZWVudGVyRXZlbnRcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qIOe7keWumuS4i+aLiemdouadv+m8oOagh+emu+W8gOS6i+S7tiAgKi9cclxuICAgIGJpbmRpTWVudU1vdXNlbGVhdmUoKSB7XHJcbiAgICAgICAgdGhpcy51bmJpbmRpTWVudU1vdXNlbGVhdmUoKTtcclxuICAgICAgICB0aGlzLm1vdXNlbGVhdmVFdmVudCA9IHRoaXMubW91c2VMZWF2ZS5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuZHBNZW51Lm5hdGl2ZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAgICAgXCJtb3VzZWxlYXZlXCIsXHJcbiAgICAgICAgICAgIHRoaXMubW91c2VsZWF2ZUV2ZW50XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKiDnu5Hlrprngrnlh7vpnaLmnb/ljLrln5/kuYvlpJbop6blj5HnmoTkuovku7YgKi9cclxuICAgIC8vIGJpbmREb2NDbGljaygpIHtcclxuICAgIC8vICAgdGhpcy5kb2N1bWVudENsaWNrRXZlbnQgPSB0aGlzLmNsaWNrRG9jLmJpbmQodGhpcyk7XHJcbiAgICAvLyAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5kb2N1bWVudENsaWNrRXZlbnQpO1xyXG4gICAgLy8gfVxyXG5cclxuICAgIC8qIOino+e7keS6i+S7tiAqL1xyXG4gICAgdW5iaW5kTWVudU1vdXNlZW50ZXIoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubW91c2VlbnRlckV2ZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMuZHBNZW51Lm5hdGl2ZUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAgICAgICAgIFwibW91c2VlbnRlclwiLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5tb3VzZWVudGVyRXZlbnRcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICB1bmJpbmRpTWVudU1vdXNlbGVhdmUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubW91c2VsZWF2ZUV2ZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMuZHBNZW51Lm5hdGl2ZUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAgICAgICAgIFwibW91c2VsZWF2ZVwiLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5tb3VzZWxlYXZlRXZlbnRcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyB1bmJpbmREb2NDbGljaygpIHtcclxuICAgIC8vICAgaWYgKHRoaXMuZG9jdW1lbnRDbGlja0V2ZW50KSB7XHJcbiAgICAvLyAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmRvY3VtZW50Q2xpY2tFdmVudCk7XHJcbiAgICAvLyAgIH1cclxuICAgIC8vIH1cclxuXHJcbiAgICAvKiBmbGFnIHRydWUgKi9cclxuICAgIGNoYW5nZUZsYWdUb1RydWUoKSB7XHJcbiAgICAgICAgdGhpcy5kcEZsYWcgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qIGZsYWcgZmFsc2UgKi9cclxuICAgIGNoYW5nZUZsYWdUb0ZhbHNlKCkge1xyXG4gICAgICAgIHRoaXMuZHBGbGFnID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyog6byg5qCH56a75byA5pe2ICDlhbPpl61tZW51ICovXHJcbiAgICBtb3VzZUxlYXZlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmRwRmxhZykge1xyXG4gICAgICAgICAgICB0aGlzLmNoYW5nZUZsYWdUb0ZhbHNlKCk7XHJcbiAgICAgICAgICAgIC8vIHRoaXMudW5iaW5kRG9jQ2xpY2soKTtcclxuICAgICAgICAgICAgdGhpcy51bmJpbmRpTWVudU1vdXNlbGVhdmUoKTtcclxuICAgICAgICAgICAgdGhpcy51bmJpbmRNZW51TW91c2VlbnRlcigpO1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNldFRpbWVPYmopIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5zZXRUaW1lT2JqKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qIOm8oOagh+ayoeaciei/m+WFpeWIsOmdouadvyAg5LiA5q615pe26Ze05ZCO6Z2i5p2/6Ieq5Yqo5raI5aSxICovXHJcbiAgICBtb3VzZU5vdEVudGVyTGVhdmUoKSB7XHJcbiAgICAgICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xyXG5cdFx0XHRpZiAodGhpcy5zZXRUaW1lT2JqKSB7XHJcblx0XHRcdFx0Y2xlYXJUaW1lb3V0KHRoaXMuc2V0VGltZU9iaik7XHJcblx0XHRcdH1cclxuICAgICAgICAgICAgdGhpcy5zZXRUaW1lT2JqID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZHBGbGFnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VGbGFnVG9GYWxzZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMudW5iaW5kRG9jQ2xpY2soKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVuYmluZGlNZW51TW91c2VsZWF2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudW5iaW5kTWVudU1vdXNlZW50ZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2V0VGltZU9iaikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5zZXRUaW1lT2JqKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIDIwMDApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qIOWFs+mXreS4i+aLiemdouadvyAqL1xyXG4gICAgY2xvc2UoKSB7XHJcbiAgICAgICAgdGhpcy5zaG93ID0gZmFsc2U7XHJcbiAgICAgICAgLy8g5YWz6Zet5LiL5ouJ5oyJ6ZKu6Z2i5p2/ICDohI/lgLzmo4DmtYtcclxuICAgICAgICBpZiAoIXRoaXMuY2hhbmdlUmVmW1wiZGVzdHJveWVkXCJdKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlUmVmLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VSZWYubWFya0ZvckNoZWNrKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZHBCdG4ubmF0aXZlRWxlbWVudC5ibHVyKCk7XHJcblxyXG4gICAgICAgIHRoaXMub3ZlckxheVNlcnZpY2UuZGVzdG9yeSh0aGlzLmRwQnRuLm5hdGl2ZUVsZW1lbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qIOWKqOaAgeaMh+Wumm1lbnXlnKhib2R55Lit55qE5L2N572uICovXHJcbiAgICBwcml2YXRlIHNldFBvc2l0aW9uKGUpIHtcclxuICAgICAgICAvLyDkuIvmi4nmjInpkq5cclxuICAgICAgICBjb25zdCBidG5TaXplID0gdGhpcy5kcEJ0bi5uYXRpdmVFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgIC8vIOS4i+aLiemdouadv1xyXG4gICAgICAgIGxldCBtZW51UmVjdCA9IHRoaXMuZHBNZW51Lm5hdGl2ZUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgdGhpcy5fbWVudUhlaWdodCA9IG1lbnVSZWN0LmhlaWdodDtcclxuICAgICAgICB0aGlzLl9tZW51V2lkdGggPSBtZW51UmVjdC53aWR0aDtcclxuICAgICAgICAvLyDlpoLmnpzopoHoh6rliqjnuqDmraPmlrnlkJFcclxuICAgICAgICBpZiAodGhpcy5hdXRvUmVjdGlmeSkge1xyXG4gICAgICAgICAgICB0aGlzLmNoYW5nZVBsYWNlbWVudChidG5TaXplKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VQb3NpdGlvbihidG5TaXplKTtcclxuICAgIH1cclxuXHJcbiAgICBuZ09uRGVzdHJveSgpIHtcclxuICAgICAgICAvLyB0aGlzLnJlbW92ZU1lbnVQYW5lbCgpO1xyXG4gICAgICAgIGlmICh0aGlzLmRwQnRuICYmIHRoaXMuZHBCdG4ubmF0aXZlRWxlbWVudCkge1xyXG4gICAgICAgICAgICB0aGlzLm92ZXJMYXlTZXJ2aWNlLmRlc3RvcnkodGhpcy5kcEJ0bi5uYXRpdmVFbGVtZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vdmVyTGF5U2VydmljZSA9IG51bGw7XHJcbiAgICB9XHJcbn1cclxuIl19