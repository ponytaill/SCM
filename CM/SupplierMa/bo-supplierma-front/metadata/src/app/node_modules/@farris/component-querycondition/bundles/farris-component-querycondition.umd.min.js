!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@farris/ui-modal"),require("lodash-es"),require("@farris/ui-notify"),require("@angular/common"),require("@farris/ui-dialog"),require("@farris/ui-layout"),require("@farris/ui-lookup"),require("@farris/ui-multi-select"),require("@farris/ui-field-group"),require("@farris/ui-input-group"),require("@farris/ui-dropdown"),require("@farris/ui-loading"),require("@farris/ui-locale"),require("@farris/ui-combo-list"),require("@farris/ui-number-spinner"),require("@farris/ui-forms"),require("@farris/ui-datepicker"),require("rxjs"),require("rxjs/operators"),require("@farris/ui-combo-lookup"),require("@angular/forms"),require("@angular/core")):"function"==typeof define&&define.amd?define("@farris/component-querycondition",["exports","@farris/ui-modal","lodash-es","@farris/ui-notify","@angular/common","@farris/ui-dialog","@farris/ui-layout","@farris/ui-lookup","@farris/ui-multi-select","@farris/ui-field-group","@farris/ui-input-group","@farris/ui-dropdown","@farris/ui-loading","@farris/ui-locale","@farris/ui-combo-list","@farris/ui-number-spinner","@farris/ui-forms","@farris/ui-datepicker","rxjs","rxjs/operators","@farris/ui-combo-lookup","@angular/forms","@angular/core"],t):t((e.farris=e.farris||{},e.farris["component-querycondition"]={}),e.uiModal,e.lodashEs,e.uiNotify,e.ng.common,e.uiDialog,e.uiLayout,e.uiLookup,e.uiMultiSelect,e.uiFieldGroup,e.uiInputGroup,e.uiDropdown,e.uiLoading,e.uiLocale,e.uiComboList,e.uiNumberSpinner,e.uiForms,e.uiDatepicker,e.rxjs,e.rxjs.operators,e.uiComboLookup,e.ng.forms,e.ng.core)}(this,function(e,t,r,n,i,o,l,a,s,u,c,d,p,h,m,g,f,y,v,b,C,F,T){"use strict";function V(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}var I=(x.decorators=[{type:T.Injectable}],x);function x(){this.eventbus=new T.EventEmitter}var w=(S.decorators=[{type:T.Injectable}],S.ctorParameters=function(){return[]},S);function S(){}var O={Text:0,SingleDate:1,SmartHelp:2,DropDownList:3,DateRange:4,NumberRange:5,SingleNumber:6,SingleYear:7,BoolCheck:8,DateTimeRange:9,SingleMonth:10,MonthRange:11,SingleDateTime:12,ComboLookUp:13,Radio:14,InputGroup:15};O[O.Text]="Text",O[O.SingleDate]="SingleDate",O[O.SmartHelp]="SmartHelp",O[O.DropDownList]="DropDownList",O[O.DateRange]="DateRange",O[O.NumberRange]="NumberRange",O[O.SingleNumber]="SingleNumber",O[O.SingleYear]="SingleYear",O[O.BoolCheck]="BoolCheck",O[O.DateTimeRange]="DateTimeRange",O[O.SingleMonth]="SingleMonth",O[O.MonthRange]="MonthRange",O[O.SingleDateTime]="SingleDateTime",O[O.ComboLookUp]="ComboLookUp",O[O.Radio]="Radio",O[O.InputGroup]="InputGroup";var D={IntType:0,StringType:1,BoolType:2};D[D.IntType]="IntType",D[D.StringType]="StringType",D[D.BoolType]="BoolType";var N=(k.prototype.getEnumType=function(){return D.IntType},k.prototype.getEnumValueName=function(){return this.name},k.prototype.getEnumValue=function(){return this.value},k);function k(){}var q=(M.prototype.getEnumType=function(){return D.StringType},M.prototype.getEnumValueName=function(){return this.name},M.prototype.getEnumValue=function(){return this.value},M);function M(){}var E=(H.prototype.getEnumType=function(){return D.BoolType},H.prototype.getEnumValueName=function(){return this.name},H.prototype.getEnumValue=function(){return this.value},H);function H(){}var j=(R.prototype.convertJObject=function(e){var t=e,n=t.getEnumType(),i=new Object;return i.Type=n,i.Content=t,i},R.prototype.initFromJobject=function(e){var t=e.Type,n=e.Content;return t==D.IntType?Object.assign(new N,n):t==D.BoolType?Object.assign(new E,n):Object.assign(new q,n)},R);function R(){}var P=(L.prototype.getControlType=function(){return O.DropDownList},L.prototype.isRequired=function(){return!!this.require},L);function L(){}var B=(G.prototype.convertToObject=function(e){var t=e,n=new Object;if(n.valueType=t.valueType,null!=t.enumValues){var i=n.enumValues=[],r=new j;t.enumValues.forEach(function(e){t.valueType==D.BoolType?i.push(r.convertJObject(Object.assign(new E,e))):t.valueType==D.IntType?i.push(r.convertJObject(Object.assign(new N,e))):i.push(r.convertJObject(Object.assign(new q,e)))})}return n.uri=t.uri,n.beforeShow=t.beforeShow,n.beforeHide=t.beforeHide,n.idField=t.idField,n.textField=t.textField,n.multiSelect=t.multiSelect,n.panelHeight=t.panelHeight,n.placeholder=t.placeholder,n.className=t.className,n.require=t.require,n},G.prototype.initFromObject=function(e){var n=new P;return null!=e.valueType&&(n.valueType=e.valueType),null!=e.enumValues&&(n.enumValues=new Array,e.enumValues.forEach(function(e){var t=new j;n.enumValues.push(t.initFromJobject(e))})),null!=e.uri&&(n.uri=e.uri),null!=e.beforeShow&&(n.beforeShow=e.beforeShow),null!=e.beforeHide&&(n.beforeHide=e.beforeHide),null!=e.idField&&(n.idField=e.idField),null!=e.textField&&(n.textField=e.textField),null!=e.multiSelect&&(n.multiSelect=e.multiSelect),null!=e.panelHeight&&(n.panelHeight=e.panelHeight),null!=e.placeholder&&(n.placeholder=e.placeholder),null!=e.className&&(n.className=e.className),null!=e.require&&(n.require=e.require),n},G);function G(){}var A=(J.prototype.getControlType=function(){return O.Text},J.prototype.isRequired=function(){return!!this.require},J);function J(){}var $=(z.prototype.getControlType=function(){return O.DateRange},z.prototype.isRequired=function(){return!!this.require},z);function z(){}var W=(_.prototype.isRequired=function(){return!!this.require},_.prototype.getControlType=function(){return O.SingleDate},_);function _(){}var U=(Y.prototype.getControlType=function(){return O.SmartHelp},Y.prototype.isRequired=function(){return!!this.require},Y);function Y(){}var Z=(Q.prototype.getControlType=function(){return O.NumberRange},Q.prototype.isRequired=function(){return!!this.require},Q);function Q(){}var K=(X.prototype.getControlType=function(){return O.SingleNumber},X.prototype.isRequired=function(){return!!this.require},X);function X(){}var ee=(te.prototype.getControlType=function(){return O.SingleYear},te.prototype.isRequired=function(){return!!this.require},te);function te(){}var ne=(ie.prototype.getControlType=function(){return O.BoolCheck},ie.prototype.isRequired=function(){return!!this.require},ie);function ie(){this.data=[],this.separator=",",this.isStringValue=!0}var re=(oe.prototype.getControlType=function(){return O.DateTimeRange},oe.prototype.isRequired=function(){return!!this.require},oe);function oe(){}var le=(ae.prototype.getControlType=function(){return O.SingleMonth},ae.prototype.isRequired=function(){return!!this.require},ae);function ae(){}var se=(ue.prototype.getControlType=function(){return O.MonthRange},ue.prototype.isRequired=function(){return!!this.require},ue);function ue(){}var ce=(de.prototype.getControlType=function(){return O.SingleDateTime},de.prototype.isRequired=function(){return!!this.require},de);function de(){}var pe=(he.prototype.getControlType=function(){return O.ComboLookUp},he.prototype.isRequired=function(){return!!this.require},he);function he(){}var me=(ge.prototype.getControlType=function(){return O.Radio},ge.prototype.isRequired=function(){return!!this.require},ge);function ge(){}var fe=(ye.prototype.convertToObject=function(e){var t=e,n=new Object;if(n.valueType=t.valueType,null!=t.enumValues){var i=n.enumValues=[],r=new j;t.enumValues.forEach(function(e){t.valueType==D.BoolType?i.push(r.convertJObject(Object.assign(new E,e))):t.valueType==D.IntType?i.push(r.convertJObject(Object.assign(new N,e))):i.push(r.convertJObject(Object.assign(new q,e)))})}return n.horizontal=t.horizontal,n.showLabel=t.showLabel,n.disabled=t.disabled,n.className=t.className,n.require=t.require,n},ye.prototype.initFromObject=function(e){var n=new me;return null!=e.valueType&&(n.valueType=e.valueType),null!=e.enumValues&&(n.enumValues=new Array,e.enumValues.forEach(function(e){var t=new j;n.enumValues.push(t.initFromJobject(e))})),null!=e.horizontal&&(n.horizontal=e.horizontal),null!=e.showLabel&&(n.showLabel=e.showLabel),null!=e.disabled&&(n.disabled=e.disabled),null!=e.className&&(n.className=e.className),null!=e.require&&(n.require=e.require),n},ye);function ye(){}var ve=(be.prototype.getControlType=function(){return O.InputGroup},be.prototype.isRequired=function(){return!!this.require},be);function be(){}var Ce=function zt(){},Fe=(Te.prototype.convertJObject=function(e){var t=e,n=t.getControlType(),i=new Object;if((i.Type=n)==O.DropDownList){var r=new B;i.Content=r.convertToObject(t)}else n==O.Radio?(r=new fe,i.Content=r.convertToObject(t)):i.Content=t;return i},Te.prototype.initFromJobject=function(e){var t=e.Type,n=e.Content;return t==O.Text?Object.assign(new A,n):t==O.InputGroup?Object.assign(new ve,n):t==O.DateRange?Object.assign(new $,n):t==O.NumberRange?Object.assign(new Z,n):t==O.SingleDate?Object.assign(new W,n):t==O.SingleNumber?Object.assign(new K,n):t==O.DropDownList?(new B).initFromObject(n):t==O.SmartHelp?Object.assign(new U,n):t==O.ComboLookUp?Object.assign(new pe,n):t==O.SingleYear?Object.assign(new ee,n):t==O.SingleMonth?Object.assign(new le,n):t==O.BoolCheck?Object.assign(new ne,n):t==O.Radio?(new fe).initFromObject(n):t==O.DateTimeRange?Object.assign(new re,n):t==O.MonthRange?Object.assign(new se,n):t==O.SingleDateTime?Object.assign(new ce,n):void 0},Te);function Te(){}var Ve=(Ie.prototype.clearValue=function(){this.value=undefined},Ie.prototype.setOriginalValue=function(e){this.value=e},Ie.prototype.getOriginalValue=function(){return this.value},Ie.prototype.getControlType=function(){return O.Text},Ie.prototype.isEmpty=function(){return!this.value},Ie);function Ie(e){void 0===e&&(e={value:""}),this.value=e.value?e.value:""}var xe=(we.prototype.isEmpty=function(){return null==this.startValue&&null==this.endValue},we.prototype.clearValue=function(){this.startValue=undefined,this.endValue=undefined},we.prototype.setOriginalValue=function(e){throw new Error("Method not implemented.")},we.prototype.getOriginalValue=function(){return{begin:this.startValue,end:this.endValue}},we.prototype.getControlType=function(){return O.NumberRange},we);function we(e){void 0===e&&(e={startValue:null,endValue:null}),this.startValue=null==e.startValue?null:parseFloat(e.startValue),this.endValue=null==e.endValue?null:parseFloat(e.endValue)}var Se=(Oe.prototype.convertToObject=function(e){var t=e,n=new Object;return n.startValue=t.startValue,n.endValue=t.endValue,n},Oe.prototype.initFromObject=function(e){var t=new xe;return e.startValue&&(t.startValue=parseFloat(e.startValue)),e.endValue&&(t.endValue=parseFloat(e.endValue)),t},Oe);function Oe(){}var De=(Ne.prototype.setOriginalValue=function(e){e.formatted?(this.startTime=e.formatted.split(e.delimiter)[0],this.endTime=e.formatted.split(e.delimiter)[1]):this.clearValue()},Ne.prototype.getOriginalValue=function(){return this.startTime&&this.endTime?this.startTime+"~"+this.endTime:""},Ne.prototype.getControlType=function(){return O.DateRange},Ne.prototype.clearValue=function(){this.startTime=undefined,this.endTime=undefined},Ne.prototype.isEmpty=function(){return!this.startTime||!this.endTime},Ne);function Ne(e){void 0===e&&(e={startTime:"",endTime:""}),this.startTime=e.startTime,this.endTime=e.endTime}var ke=(qe.prototype.getControlType=function(){return O.SmartHelp},qe.prototype.setOriginalValue=function(e){throw new Error("Method not implemented.")},qe.prototype.getOriginalValue=function(){var t=this,n=this.valueField.split("."),e=this.value.map(function(e){return t.getPropValue(e,r.cloneDeep(n))});return e&&e.length?e.join(","):""},qe.prototype.clearValue=function(){this.value=[],this.valueField=undefined,this.textValue=undefined,this.isInputText=undefined},qe.prototype.isEmpty=function(){return!this.value.length},qe.prototype.getTextValue=function(e){var t=this,n=e.split("."),i=this.value.map(function(e){return t.getPropValue(e,r.cloneDeep(n))});return i&&i.length?i.join(","):""},qe.prototype.getPropValue=function(e,t){if(1<t.length){var n=t.shift();return e[n]?this.getPropValue(e[n],t):null}return e[t[0]]},qe);function qe(e){void 0===e&&(e={value:[],valueField:undefined,textValue:undefined,isInputText:undefined}),e.textValue?(this.value=e.value,this.valueField=e.valueField,this.textValue=e.textValue,this.isInputText=e.isInputText):(this.value=e.value,this.valueField=e.valueField?e.valueField:"",this.textValue="help-text-value-null",this.isInputText=!1)}var Me=(Ee.prototype.setOriginalValue=function(e){this.dateValue=e.formatted},Ee.prototype.getOriginalValue=function(){return this.dateValue},Ee.prototype.getControlType=function(){return O.SingleDate},Ee.prototype.isEmpty=function(){return!this.dateValue},Ee.prototype.clearValue=function(){this.dateValue=undefined},Ee);function Ee(e){void 0===e&&(e=""),this.dateValue=e}var He=(je.prototype.isEmpty=function(){return null==this.numValue},je.prototype.clearValue=function(){this.numValue=undefined},je.prototype.setOriginalValue=function(e){throw new Error("Method not implemented.")},je.prototype.getOriginalValue=function(){return this.numValue},je.prototype.getControlType=function(){return O.SingleNumber},je);function je(e){void 0===e&&(e=null),this.numValue=null==e?null:parseFloat(e)}var Re=(Pe.prototype.setOriginalValue=function(e){this.yearValue=e.formatted},Pe.prototype.getOriginalValue=function(){return this.yearValue},Pe.prototype.getControlType=function(){return O.SingleYear},Pe.prototype.clearValue=function(){this.yearValue=undefined},Pe.prototype.isEmpty=function(){return!this.yearValue},Pe);function Pe(e){void 0===e&&(e=""),this.yearValue=e}var Le=(Be.prototype.clearValue=function(){this.value=[]},Be.prototype.setOriginalValue=function(e){e.length?this.value=e.map(function(e){return"string"==typeof e||e}):this.value=e},Be.prototype.getOriginalValue=function(){return this.value.length?this.value.map(function(e){return!0===e?"true":e}):this.value},Be.prototype.getControlType=function(){return O.BoolCheck},Be.prototype.isEmpty=function(){return 0==this.value.length},Be);function Be(e){void 0===e&&(e=[]),this.value=e}var Ge=(Ae.prototype.clearValue=function(){this.value=[],this.key=undefined},Ae.prototype.setOriginalValue=function(e){},Ae.prototype.getOriginalValue=function(){return this.key},Ae.prototype.getControlType=function(){return O.DropDownList},Ae.prototype.isEmpty=function(){return!this.key},Ae);function Ae(e){void 0===e&&(e={value:[],key:undefined}),this.value=[],e.value&&0<e.value.length?e.hasOwnProperty("key")?(this.value=e.value,this.key=e.key):(this.value=e.value.Content&&e.value.Content.value?[e.value.Content]:[],this.key=e.value.Content&&e.value.Content.value?e.value.Content.value:undefined):this.clearValue()}var Je=($e.prototype.setOriginalValue=function(e){this.monthValue=e.formatted},$e.prototype.getOriginalValue=function(){return this.monthValue},$e.prototype.getControlType=function(){return O.SingleMonth},$e.prototype.clearValue=function(){this.monthValue=undefined},$e.prototype.isEmpty=function(){return!this.monthValue},$e);function $e(e){void 0===e&&(e=""),this.monthValue=e}var ze=(We.prototype.setOriginalValue=function(e){e.formatted?(this.startTime=e.formatted.split(e.delimiter)[0],this.endTime=e.formatted.split(e.delimiter)[1]):this.clearValue()},We.prototype.getOriginalValue=function(){return this.startTime&&this.endTime?this.startTime+"~"+this.endTime:""},We.prototype.getControlType=function(){return O.MonthRange},We.prototype.clearValue=function(){this.startTime=undefined,this.endTime=undefined},We.prototype.isEmpty=function(){return!this.startTime||!this.endTime},We);function We(e){void 0===e&&(e={startTime:"",endTime:""}),this.startTime=e.startTime,this.endTime=e.endTime}var _e=(Ue.prototype.setOriginalValue=function(e){this.datetimeValue=e.formatted},Ue.prototype.getOriginalValue=function(){return this.datetimeValue},Ue.prototype.getControlType=function(){return O.SingleDateTime},Ue.prototype.isEmpty=function(){return!this.datetimeValue},Ue.prototype.clearValue=function(){this.datetimeValue=undefined},Ue);function Ue(e){void 0===e&&(e=""),this.datetimeValue=e}var Ye=(Ze.prototype.clearValue=function(){this.value=[],this.valueField=undefined,this.textValue=undefined},Ze.prototype.setOriginalValue=function(e){throw new Error("Method not implemented.")},Ze.prototype.getOriginalValue=function(){var t=this,n=this.valueField.split("."),e=this.value.map(function(e){return t.getPropValue(e,r.cloneDeep(n))});return e&&e.length?e.join(","):""},Ze.prototype.getControlType=function(){return O.ComboLookUp},Ze.prototype.isEmpty=function(){return!this.valueField},Ze.prototype.getPropValue=function(e,t){if(1<t.length){var n=t.shift();return e[n]?this.getPropValue(e[n],t):null}return e[t[0]]},Ze.prototype.getTextValue=function(e){var t=this,n=e.split("."),i=this.value.map(function(e){return t.getPropValue(e,r.cloneDeep(n))});return i&&i.length?i.join(","):""},Ze);function Ze(e){void 0===e&&(e={value:[],valueField:undefined,textValue:undefined}),e.textValue?(this.valueField=e.valueField,this.value=e.value,this.textValue=e.textValue):(this.valueField=e.valueField?e.valueField:"",this.value=e.value&&e.value.data?[e.value.data]:[],this.textValue="help-text-value-null")}var Qe=(Ke.prototype.clearValue=function(){this.value=undefined},Ke.prototype.setOriginalValue=function(e){this.value=e},Ke.prototype.getOriginalValue=function(){return this.value},Ke.prototype.getControlType=function(){return O.Radio},Ke.prototype.isEmpty=function(){return!this.value},Ke);function Ke(e){void 0===e&&(e=undefined),this.value=e}var Xe=(et.prototype.getControlType=function(){return O.InputGroup},et.prototype.setOriginalValue=function(e){throw new Error("Method not implemented.")},et.prototype.getOriginalValue=function(){var t=this,n=this.textField.split("."),e=this.value.map(function(e){return t.getPropValue(e,r.cloneDeep(n))});return e&&e.length?e.join(","):""},et.prototype.clearValue=function(){this.value=[],this.textValue=undefined,this.textField=undefined,this.isInputText=undefined},et.prototype.isEmpty=function(){return!this.textValue},et.prototype.getTextValue=function(e){var t=this,n=e.split("."),i=this.value.map(function(e){return t.getPropValue(e,r.cloneDeep(n))});return i&&i.length?i.join(","):""},et.prototype.getPropValue=function(e,t){if(1<t.length){var n=t.shift();return e[n]?this.getPropValue(e[n],t):""}return e[t[0]]},et);function et(e){void 0===e&&(e={value:[],textValue:undefined,textField:undefined,isInputText:undefined}),this.value=e.value,this.textValue=e.textValue?e.textValue:"",this.textField=e.textField,this.isInputText=e.isInputText}var tt=(nt.prototype.convertToObject=function(e){var t=e,n=t.getControlType(),i=new Object;if((i.Type=n)==O.NumberRange){var r=new Se;i.Content=r.convertToObject(t)}else i.Content=t;return i},nt.prototype.initFromObject=function(e){var t=e.Content;switch(e.Type){case O.Text:return new Ve(e.Content);case O.NumberRange:return new xe(e.Content);case O.DateRange:case O.DateTimeRange:return new De(e.Content);case O.DropDownList:return new Ge(e.Content);case O.SmartHelp:return new ke(e.Content);case O.ComboLookUp:return new Ye(e.Content);case O.SingleDate:return Object.assign(new Me,t);case O.SingleNumber:return Object.assign(new He,t);case O.SingleYear:return Object.assign(new Re,t);case O.BoolCheck:return Object.assign(new Le,t);case O.Radio:return Object.assign(new Qe,t);case O.SingleMonth:return Object.assign(new Je,t);case O.MonthRange:return Object.assign(new ze,t);case O.SingleDateTime:return Object.assign(new _e,t);case O.InputGroup:return Object.assign(new Xe,t)}},nt);function nt(){}var it=function Wt(){this.visible=!0},rt=(ot.prototype.convertJObject=function(e){var t=e,n=new Object;n.ID=t.id,n.FieldCode=t.fieldCode,n.FieldName=t.fieldName,n.ValueType=t.valueType,n.placeHolder=t.placeHolder,n.beginPlaceHolder=t.hasOwnProperty("beginPlaceHolder")?t.beginPlaceHolder:"",n.endPlaceHolder=t.hasOwnProperty("endPlaceHolder")?t.endPlaceHolder:"",n.visible=!t.hasOwnProperty("visible")||t.visible;var i=new tt;t.value&&(n.Value=i.convertToObject(t.value));var r=new Fe;return t.control&&(n.Control=r.convertJObject(t.control)),n},ot.prototype.initFromJobject=function(e){var t=new it;t.id=e.ID,t.fieldCode=e.FieldCode,t.fieldName=e.FieldName,t.valueType=e.ValueType,t.placeHolder=e.placeHolder,t.beginPlaceHolder=e.hasOwnProperty("beginPlaceHolder")?e.beginPlaceHolder:"",t.endPlaceHolder=e.hasOwnProperty("endPlaceHolder")?e.endPlaceHolder:"",t.visible=!e.hasOwnProperty("visible")||e.visible;var n=e.Value;if(n){var i=new tt;t.value=i.initFromObject(n)}var r=e.Control;if(r){var o=new Fe;t.control=o.initFromJobject(r)}return t},ot);function ot(){}var lt={Value:0,SmartHelp:1,Enum:2,Express:3};lt[lt.Value]="Value",lt[lt.SmartHelp]="SmartHelp",lt[lt.Enum]="Enum",lt[lt.Express]="Express";var at=(st.prototype.getControlConfigState=function(){return this.controlConfigState},st.prototype.updateControlConfigState=function(e){this.controlConfigState.next(e)},st.prototype.convertToSimpleQueryConditions=function(e){var n=this;return e&&0==e.length?[]:e.map(function(e){var t={};return t.fieldCode=e.labelCode,e.hasOwnProperty("visible")&&(t.visible=e.visible),t.control=n.getSimpleControl(e),t})},st.prototype.getSimpleControl=function(e){var t=e.control,n={};switch(this.controlTypeMap.get(t.controltype)){case"single-year":this.updateSimpleControl(n,["maxDate","minDate"],t);break;default:n={}}return n},st.prototype.updateSimpleControl=function(e,t,n,i){void 0===i&&(i=[]),0==i.length&&(i=t);for(var r=0;r<t.length;r++)i[r]||(i[r]=t[r]);for(var o=0;o<t.length;o++)n&&n.hasOwnProperty(t[o])&&(e[i[o]]=n[t[o]])},st.prototype.convertToQueryConditions=function(e){var r,o=this;return e.map(function(e){(r=new it).id=e.id,r.fieldCode=e.labelCode,r.fieldName=e.name,r.valueType=lt.Value,r.placeHolder=e.placeHolder,r.beginPlaceHolder=e.hasOwnProperty("beginPlaceHolder")?e.beginPlaceHolder:"",r.endPlaceHolder=e.hasOwnProperty("endPlaceHolder")?e.endPlaceHolder:"";var t=o.getControlAndValue(e),n=t.control,i=t.value;return r.control=n,r.value=i,r})},st.prototype.getControlAndValue=function(e){var t,n,i=e.control,r=e.value;switch(i.controltype){case"text":(t=new A).className=i.className,t.placeholder=i.placeholder,t.require=i.require,n=new Ve({value:r});break;case"input-group":(t=new ve).className=i.className,t.require=i.require,t.editable=i.editable,t.groupText=i.groupText,t.usageMode=i.usageMode,t.dialogOptions=this.setInputGroupDialog(e),t.click=i.click,n=new Xe(r);break;case"date":(t=new $).format=i.format,t.returnFormat=i.returnFormat,t.className=i.className,t.placeholder=i.placeholder,t.require=i.require,t.weekSelect=i.weekSelect,t.showWeekNumbers=i.showWeekNumbers,n=new De(r);break;case"date-time":(t=new re).format=i.format,t.returnFormat=i.returnFormat,t.className=i.className,t.placeholder=i.placeholder,t.require=i.require,t.enableCustomFormat=i.enableCustomFormat,n=new De(r);break;case"month":(t=new se).format=i.format,t.returnFormat=i.returnFormat,t.className=i.className,t.placeholder=i.placeholder,t.require=i.require,n=new ze(r);break;case"number":(t=new Z).className=i.className,t.placeholder=this.emptyString(i.placeholder),t.require=i.require,t.precision=i.precision,t.textAlign=i.textAlign,t.bigNumber=i.isBigNumber,t.min=i.minValue,t.max=i.maxValue,n=new xe(r);break;case"dropdown":(t=new P).valueType=i.valueType,t.enumValues=i.enumValues,t.uri=i.uri,t.beforeShow=i.beforeShow,t.beforeHide=i.beforeHide,t.idField=i.idField,t.textField=i.textField,t.multiSelect=i.multiSelect,t.className=i.className,t.placeholder=i.placeholder,t.panelHeight=i.panelHeight,t.require=i.require,n=new Ge(r);break;case"help":(t=new U).uri=i.uri,t.textField=i.textField,t.valueField=i.valueField,t.displayType=i.displayType,t.idField=i.idField,t.mapFields=i.mapFields,t.preEventCmd=i.preEventCmd,t.postEventCmd=i.postEventCmd,t.context=i.context,t.className=i.className,t.enableFullTree=i.enableFullTree,t.loadTreeDataType=i.loadTreeDataType,t.singleSelect=i.singleSelect,t.expandLevel=i.expandLevel,t.enableCascade=i.enableCascade,t.placeholder=i.placeholder,t.require=i.require,t.nosearch=i.nosearch,t.displayFields=i.displayFields,t.displayTextSeparator=i.displayTextSeparator,t.editable=i.editable,t.clearFields=i.clearFields,t.clear=i.clear,t.dialogTitle=i.dialogTitle,t.panelHeight=i.panelHeight,t.panelWidth=i.panelWidth,i.hasOwnProperty("pageSize")&&(t.pageSize=i.pageSize),i.hasOwnProperty("pageList")&&(t.pageList=i.pageList),n=new ke(r);break;case"combolist-help":(t=new pe).uri=i.uri,t.idField=i.idField,t.valueField=i.valueField,t.textField=i.textField,t.mapFields=i.mapFields,t.displayType=this.displayTypeTransform(i.displayType),t.singleSelect=i.singleSelect,t.preEventCmd=i.preEventCmd,t.postEventCmd=i.postEventCmd,t.enableFullTree=i.enableFullTree,t.loadTreeDataType=i.loadTreeDataType,t.expandLevel=i.expandLevel,t.className=i.className,t.placeholder=i.placeholder,t.panelWidth=i.panelWidth,t.panelHeight=i.panelHeight,t.require=i.require,n=new Ye(r);break;case"single-date":(t=new W).format=i.format,t.returnFormat=i.returnFormat,t.className=i.className,t.placeholder=i.placeholder,t.require=i.require,n=new Me(r);break;case"single-date-time":(t=new ce).format=i.format,t.returnFormat=i.returnFormat,t.className=i.className,t.placeholder=i.placeholder,t.require=i.require,t.enableCustomFormat=i.enableCustomFormat,n=new _e(r);break;case"single-number":(t=new K).className=i.className,t.placeholder=this.emptyString(i.placeholder),t.precision=i.precision,t.require=i.require,t.textAlign=i.textAlign,t.bigNumber=i.isBigNumber,t.min=i.minValue,t.max=i.maxValue,n=new He(r);break;case"single-year":(t=new ee).format=i.format,t.returnFormat=i.returnFormat,t.className=i.className,t.placeholder=i.placeholder,t.require=i.require,t.maxDate=i.maxDate,t.minDate=i.minDate,n=new Re(r);break;case"single-month":(t=new le).format=i.format,t.returnFormat=i.returnFormat,t.className=i.className,t.placeholder=i.placeholder,t.require=i.require,n=new Je(r);break;case"bool-check":(t=new ne).className=i.className,t.data=[{value:"true",name:e.name}],t.horizontal=i.horizontal,t.disable=i.disable,t.isStringValue=!1,t.require=i.require,n=new Le(r);break;case"radio":(t=new me).valueType=i.valueType,t.enumValues=i.enumValues,t.className=i.className,t.showLabel=i.showLabel,t.horizontal=i.horizontal,t.disabled=i.disabled,t.require=i.require,n=new Qe(r)}return{control:t,value:n}},st.prototype.getGuid=function(){return this.s4()+this.s4()+"-"+this.s4()+"-"+this.s4()+"-"+this.s4()+"-"+this.s4()+this.s4()+this.s4()},st.prototype.s4=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},st.prototype.showInfo=function(e,t,n,i){this.notify.config.position="top-center","success"==t?this.notify.success({title:n,msg:e,timeout:i}):"info"==t?this.notify.info({title:n,msg:e,timeout:i}):"warning"==t?this.notify.warning({title:n,msg:e,timeout:i}):"error"==t&&this.notify.error({title:n,msg:e,timeout:i})},st.prototype.getConditionItemTitle=function(e){if(e.id&&""!==e.id)return e.fieldName},st.prototype.setValues=function(e,t,i){var r,o,l=this,a=e.queryConditions?e.queryConditions:[];return t.forEach(function(t){if((r=a.find(function(e){return e.fieldCode==t.labelCode}))&&r.control&&r.value){o=l.controlTypeMap.get(r.control.getControlType()),t.control={controltype:o};var e=l.getControlAndValue(t),n=(e.control,e.value);r.value=l.isNumCheck(r,n,t),r.readonly=i}}),e},st.prototype.updateControl=function(n,e){var i;0<(n=n||[]).length&&e.forEach(function(t){if((i=n.find(function(e){return e.fieldCode==t.fieldCode}))&&i.hasOwnProperty("visible")&&t.hasOwnProperty("visible")&&t.visible!==i.visible&&(i.visible=t.visible),i&&i.control)for(var e in t.control)i.control[e]=t.control[e]})},st.prototype.isValid=function(e){return e.map(function(e){if(e.control.isRequired()&&e.value.isEmpty()&&e.visible)return{type:"require",field:e.fieldName}}).filter(function(e){return null!=e})},st.prototype.emptyString=function(e){return null===e||e===undefined?"":e},st.prototype.displayTypeTransform=function(e){return"List"===e?"LOOKUPLIST":"LOOKUPTREELIST"},st.prototype.isNumCheck=function(e,t,n){var i,r;return"single-number"==n.control.controltype&&(i=null==e.control.min||e.control.min==undefined?-2147483648:e.control.min,r=null==e.control.max||e.control.max==undefined?2147483647:e.control.max,t.numValue=0<t.numValue-i?t.numValue:i,t.numValue=t.numValue-r<0?t.numValue:r),"number"==n.control.controltype&&(i=null==e.control.min||e.control.min==undefined?-2147483648:e.control.min,r=null==e.control.max||e.control.max==undefined?2147483647:e.control.max,t.startValue=0<t.startValue-i?t.startValue:i,t.startValue=t.startValue-r<0?t.startValue:r,t.endValue=0<t.endValue-i?t.endValue:i,t.endValue=t.endValue-r<0?t.endValue:r),t},st.prototype.setInputGroupDialog=function(e){var t=e.control,n=t.modalConfig;if(!e.id||"text"==t.usageMode)return undefined;var i=new Ce;return i.modalId=e.id,n.mapFields&&(i.mapFields=JSON.parse(n.mapFields.replace(/'/g,'"'))),i.showHeader=!n.hasOwnProperty("showHeader")||n.showHeader,i.showCloseButton=!n.hasOwnProperty("showCloseButton")||n.showCloseButton,i.showMaxButton=!n.hasOwnProperty("showMaxButton")||n.showMaxButton,i.title=n.hasOwnProperty("title")?n.title:"",i.width=n.width,i.height=n.height,i},st.decorators=[{type:T.Injectable}],st.ctorParameters=function(){return[{type:n.NotifyService}]},st);function st(e){this.notify=e,this.controlConfigState=new v.BehaviorSubject([]),this.controlTypeMap=new Map([[O.Text,"text"],[O.BoolCheck,"bool-check"],[O.DateRange,"date"],[O.DateTimeRange,"date-time"],[O.NumberRange,"number"],[O.DropDownList,"dropdown"],[O.SmartHelp,"help"],[O.SingleDate,"single-date"],[O.SingleNumber,"single-number"],[O.SingleYear,"single-year"],[O.SingleMonth,"single-month"],[O.MonthRange,"month"],[O.SingleDateTime,"single-date-time"],[O.ComboLookUp,"combolist-help"],[O.Radio,"radio"],[O.InputGroup,"input-group"]])}var ut=(Object.defineProperty(ct.prototype,"resetFieldConfigs",{get:function(){return this._resetFieldConfigs},set:function(e){e&&0<e.length&&this.solutionService.updateControlConfigState(e),this._resetFieldConfigs=e},enumerable:!0,configurable:!0}),Object.defineProperty(ct.prototype,"selectedFieldConditions",{get:function(){return this._selectedFieldConditions},set:function(e){this._selectedFieldConditions=e},enumerable:!0,configurable:!0}),ct.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},ct.prototype.ngOnInit=function(){this.currentLocale===this.localeIds.en&&(this.isControlInline=!1),this.selectedFieldConditions=this.selectedFieldConditions||new Array},ct.prototype.ngAfterViewInit=function(){},ct.prototype.ngAfterViewChecked=function(){},ct.prototype.hasSetMultiClass=function(e){return!!(e.control.className&&-1<e.control.className.indexOf("farris-group-multi-label"))},ct.prototype.getStyle=function(e){var t=e.control.className;return(t=t?t.replace("farris-group-multi-label",""):"")||"col-12 col-md-6 col-xl-3 col-el-2"},ct.prototype.configDialogConfirm=function(e){var t,n,i,r,o=e,l=new Array,a=function(t){var e=s.selectedFieldConditions.find(function(e){return e.fieldCode==t});e?l.push(e):l.push(s.fieldConfigs.find(function(e){return e.fieldCode==t}))},s=this;try{for(var u=V(o),c=u.next();!c.done;c=u.next())a(c.value)}catch(m){t={error:m}}finally{try{c&&!c.done&&(n=u["return"])&&n.call(u)}finally{if(t)throw t.error}}try{for(var d=V(this.selectedFieldConditions),p=d.next();!p.done;p=d.next()){var h=p.value;h.visible||l.push(h)}}catch(g){i={error:g}}finally{try{p&&!p.done&&(r=d["return"])&&r.call(d)}finally{if(i)throw i.error}}this.selectedFieldConditions=l,this.fieldConditionsChange.emit(this.selectedFieldConditions)},ct.prototype.openFieldConfigDialog=function(){this.configDialog.inputSelectedFileds=this.selectedFieldConditions?this.selectedFieldConditions:[],this.configDialog.dialog.show()},ct.prototype.resetSelectedConditionValues=function(t){return void 0===t&&(t=!1),this.selectedFieldConditions.map(function(e){return t&&e.control.isRequired()||e.value.clearValue(),e})},ct.prototype.conditionChange=function(){this.fieldConditionsChange.emit(this.selectedFieldConditions)},ct.prototype.confirmLabelFormat=function(e){if(this.isControlInline){var t=!(this.labelFormat="farris-form-controls-inline");if(e.length){var n=[];e.forEach(function(e){e.control.getControlType()!=O.BoolCheck&&n.push(e),e.control.className&&"farris-group-multi-label"!=e.control.className&&(t=!0)}),this.labelFormat+=t?" condition-is-custom":" condition-with-fixed";var i=0;n.length&&n.forEach(function(e){i=e.fieldName.length>i?e.fieldName.length:i}),this.showCompleteLabel&&(8<i?this.labelFormat=this.labelFormat.concat(" f-form-label-xl"):i<9&&6<i&&(this.labelFormat=this.labelFormat.concat(" f-form-label-lg")))}}if(this.labelFormat)return this.labelFormat+(this.isControlInline&&this.showCompleteLabel?" condition-with-complete":"")},ct.decorators=[{type:T.Component,args:[{selector:"farris-querycondition",template:'<div class="row f-utils-flex-row-wrap farris-form {{confirmLabelFormat(selectedFieldConditions)}} condition-div"  id="querycondition" #queryConditionWrap>\r\n    <ng-container *ngFor="let currentItem of selectedFieldConditions;let i=index;">\r\n        <app-solution-input  \r\n            [ngClass]="getStyle(currentItem)"\r\n            [label-text-multi]="hasSetMultiClass(currentItem)"\r\n            (conditionChange)="conditionChange()"\r\n            *ngIf="currentItem.control.getControlType() == controlType.Text && currentItem.visible"\r\n            [(item)]="selectedFieldConditions[i]">\r\n        </app-solution-input>\r\n\r\n        <app-solution-inputgroup\r\n            [ngClass]="getStyle(currentItem)"\r\n            [label-text-multi]="hasSetMultiClass(currentItem)"\r\n            (conditionChange)="conditionChange()"\r\n            *ngIf="currentItem.control.getControlType() == controlType.InputGroup && currentItem.visible"\r\n            [(item)]="selectedFieldConditions[i]">\r\n        </app-solution-inputgroup>\r\n        \r\n        <app-solution-dropdownlist\r\n            [ngClass]="getStyle(currentItem)"\r\n            [label-text-multi]="hasSetMultiClass(currentItem)"\r\n            [changeFields]="fieldCodeOfClearFields"\r\n            (conditionChange)="conditionChange()"\r\n            *ngIf="currentItem.control.getControlType() == controlType.DropDownList && currentItem.visible"\r\n            [(item)]="selectedFieldConditions[i]">\r\n        </app-solution-dropdownlist>\r\n        \r\n        <app-solution-smarthelp\r\n            [ngClass]="getStyle(currentItem)"\r\n            [label-text-multi]="hasSetMultiClass(currentItem)"\r\n            [changeFields]="fieldCodeOfClearFields"\r\n            (conditionChange)="conditionChange()"\r\n            *ngIf="currentItem.control.getControlType() == controlType.SmartHelp && currentItem.visible"\r\n            [(item)]="selectedFieldConditions[i]">\r\n        </app-solution-smarthelp>\r\n        \r\n        <app-solution-single-number\r\n            [ngClass]="getStyle(currentItem)"\r\n            [label-text-multi]="hasSetMultiClass(currentItem)"\r\n            [changeFields]="fieldCodeOfClearFields"\r\n            (conditionChange)="conditionChange()"\r\n            *ngIf="currentItem.control.getControlType() == controlType.SingleNumber && currentItem.visible"\r\n            [(item)]="selectedFieldConditions[i]">\r\n        </app-solution-single-number>\r\n\r\n        <app-solution-numberrange\r\n            [ngClass]="getStyle(currentItem)"\r\n            [label-text-multi]="hasSetMultiClass(currentItem)"\r\n            [changeFields]="fieldCodeOfClearFields"\r\n            (conditionChange)="conditionChange()"\r\n            *ngIf="currentItem.control.getControlType() == controlType.NumberRange && currentItem.visible"\r\n            [(item)]="selectedFieldConditions[i]">\r\n        </app-solution-numberrange>\r\n        \r\n        <app-solution-datepicker\r\n            [ngClass]="getStyle(currentItem)"\r\n            [label-text-multi]="hasSetMultiClass(currentItem)"\r\n            [changeFields]="fieldCodeOfClearFields"\r\n            (conditionChange)="conditionChange()"\r\n            *ngIf="currentItem.control.getControlType() == controlType.SingleDate && currentItem.visible"\r\n            [(item)]="selectedFieldConditions[i]"\r\n            [controlType]="currentItem.control.getControlType()">\r\n        </app-solution-datepicker>\r\n        \r\n        <app-solution-datepicker\r\n            [ngClass]="getStyle(currentItem)"\r\n            [label-text-multi]="hasSetMultiClass(currentItem)"\r\n            [changeFields]="fieldCodeOfClearFields"\r\n            (conditionChange)="conditionChange()"\r\n            *ngIf="currentItem.control.getControlType() == controlType.DateRange && currentItem.visible"\r\n            [(item)]="selectedFieldConditions[i]"\r\n            [controlType]="currentItem.control.getControlType()">\r\n        </app-solution-datepicker>\r\n\r\n        <app-solution-datepicker\r\n            [ngClass]="getStyle(currentItem)"\r\n            [label-text-multi]="hasSetMultiClass(currentItem)"\r\n            [changeFields]="fieldCodeOfClearFields"\r\n            (conditionChange)="conditionChange()"\r\n            *ngIf="currentItem.control.getControlType() == controlType.SingleYear && currentItem.visible"\r\n            [(item)]="selectedFieldConditions[i]"\r\n            [controlType]="currentItem.control.getControlType()">\r\n        </app-solution-datepicker>\r\n        \r\n        <app-solution-datepicker\r\n            [ngClass]="getStyle(currentItem)"\r\n            [label-text-multi]="hasSetMultiClass(currentItem)"\r\n            [changeFields]="fieldCodeOfClearFields"\r\n            (conditionChange)="conditionChange()"\r\n            *ngIf="currentItem.control.getControlType() == controlType.SingleMonth && currentItem.visible"\r\n            [(item)]="selectedFieldConditions[i]"\r\n            [controlType]="currentItem.control.getControlType()">\r\n        </app-solution-datepicker>\r\n        \r\n        <app-solution-datepicker\r\n            [ngClass]="getStyle(currentItem)"\r\n            [label-text-multi]="hasSetMultiClass(currentItem)"\r\n            [changeFields]="fieldCodeOfClearFields"\r\n            (conditionChange)="conditionChange()"\r\n            *ngIf="currentItem.control.getControlType() == controlType.MonthRange && currentItem.visible"\r\n            [(item)]="selectedFieldConditions[i]"\r\n            [controlType]="currentItem.control.getControlType()">\r\n        </app-solution-datepicker>\r\n        \r\n        <app-solution-datepicker\r\n            [ngClass]="getStyle(currentItem)"\r\n            [label-text-multi]="hasSetMultiClass(currentItem)"\r\n            [changeFields]="fieldCodeOfClearFields"\r\n            (conditionChange)="conditionChange()"\r\n            *ngIf="currentItem.control.getControlType() == controlType.SingleDateTime && currentItem.visible"\r\n            [(item)]="selectedFieldConditions[i]"\r\n            [controlType]="currentItem.control.getControlType()">\r\n        </app-solution-datepicker>\r\n        \r\n        <app-solution-datepicker\r\n            [ngClass]="getStyle(currentItem)"\r\n            [label-text-multi]="hasSetMultiClass(currentItem)"\r\n            [changeFields]="fieldCodeOfClearFields"\r\n            (conditionChange)="conditionChange()"\r\n            *ngIf="currentItem.control.getControlType() == controlType.DateTimeRange && currentItem.visible"\r\n            [(item)]="selectedFieldConditions[i]"\r\n            [controlType]="currentItem.control.getControlType()">\r\n        </app-solution-datepicker>\r\n\r\n        <app-solution-combolookup\r\n            [ngClass]="getStyle(currentItem)"\r\n            [label-text-multi]="hasSetMultiClass(currentItem)"\r\n            [changeFields]="fieldCodeOfClearFields"\r\n            (conditionChange)="conditionChange()"\r\n            *ngIf="currentItem.control.getControlType() == controlType.ComboLookUp && currentItem.visible"\r\n            [(item)]="selectedFieldConditions[i]">\r\n        </app-solution-combolookup>\r\n\r\n        <app-solution-checkbox\r\n            [ngClass]="getStyle(currentItem)"\r\n            [changeFields]="fieldCodeOfClearFields"\r\n            (conditionChange)="conditionChange()"\r\n            *ngIf="currentItem.control.getControlType() == controlType.BoolCheck && currentItem.visible"\r\n            [(item)]="selectedFieldConditions[i]">\r\n        </app-solution-checkbox>\r\n\r\n        <app-solution-radio\r\n            [ngClass]="getStyle(currentItem)"\r\n            [label-text-multi]="hasSetMultiClass(currentItem)"\r\n            [changeFields]="fieldCodeOfClearFields"\r\n            (conditionChange)="conditionChange()"\r\n            *ngIf="currentItem.control.getControlType() == controlType.Radio && currentItem.visible"\r\n            [(item)]="selectedFieldConditions[i]">\r\n        </app-solution-radio>\r\n    </ng-container>\r\n</div>\r\n<app-queryconfigdialog \r\n    #configDialog \r\n    [inputSelectedFileds]="selectedFieldConditions" \r\n    [filedsDataSource]="fieldConfigs"\r\n    (confirmEmitter)="configDialogConfirm($event)">\r\n</app-queryconfigdialog>',encapsulation:T.ViewEncapsulation.None,providers:[I],styles:[".condition-div{min-height:30px}.f-solution-radio-group .farris-checkradio-hor{flex-wrap:nowrap;overflow-x:auto}.f-solution-radio-group .farris-checkradio-hor::-webkit-scrollbar{width:6px;height:6px;background-color:#eee}.f-solution-radio-group .farris-checkradio-hor::-webkit-scrollbar-track{border-radius:0}.f-solution-radio-group .farris-checkradio-hor::-webkit-scrollbar-thumb{background-color:rgba(0,0,0,.15);-webkit-transition:.2s;transition:.2s;border-radius:6px}.f-solution-radio-group .farris-checkradio-hor::-webkit-scrollbar-thumb:hover{background-color:rgba(0,0,0,.45)}.f-solution-radio-group .farris-checkradio-hor .custom-radio{flex-shrink:0}"]}]}],ct.ctorParameters=function(){return[{type:I},{type:w},{type:T.ComponentFactoryResolver},{type:T.Injector},{type:t.BsModalService},{type:h.LocaleService}]},ct.propDecorators={fieldConfigs:[{type:T.Input}],resetFieldConfigs:[{type:T.Input}],isControlInline:[{type:T.Input}],selectedFieldConditions:[{type:T.Input}],showCompleteLabel:[{type:T.Input}],isDisabled:[{type:T.Input}],fieldConditionsChange:[{type:T.Output}],configDialog:[{type:T.ViewChild,args:["configDialog"]}],queryConditionWrapEl:[{type:T.ViewChild,args:["queryConditionWrap"]}]},ct);function ct(e,t,n,i,r,o){this.communicationService=e,this.convertorService=t,this.resolver=n,this.injector=i,this.modalService=r,this.localeService=o,this._resetFieldConfigs=[],this.isControlInline=!0,this.showCompleteLabel=!1,this.fieldConditionsChange=new T.EventEmitter,this.localeIds={en:"en","zh-CHS":"zh-CHS"},this.controlType=O,this.showButton=!1,this.fieldCodeOfClearFields=[],this.destroy$=new v.Subject,this.ngZone=null,this.currentLocale=this.injector.get(T.LOCALE_ID),this.solutionService=this.injector.get(at),this.ngZone||(this.ngZone=this.injector.get(T.NgZone,null))}var dt=(pt.prototype.ngOnChanges=function(e){var t=this;e.changeFields&&e.changeFields.currentValue&&!e.changeFields.firstChange&&e.changeFields.currentValue.some(function(e){return e==t.item.fieldCode})&&this.constructMultiFieldNumberRange(this.item.value)},pt.prototype.ngOnInit=function(){this.testId=this.solutionService.getGuid(),this.canNull=!0,this.placeholder=this.item.placeHolder?this.item.placeHolder:this.item.control.placeholder,this.beginPlaceHolder=this.item.beginPlaceHolder?this.item.beginPlaceHolder:this.placeholder,this.endPlaceHolder=this.item.endPlaceHolder?this.item.endPlaceHolder:this.placeholder,this.precision=this.item.control.precision,this.textAlign=this.item.control.textAlign,this.bigNumber=!!this.item.control.bigNumber&&this.item.control.bigNumber,this.bigNumber||(this.min=this.item.control.min===undefined||null===this.item.control.min?-2147483648:this.item.control.min,this.max=this.item.control.max===undefined||null===this.item.control.max?2147483647:this.item.control.max),this.constructMultiFieldNumberRange(this.item.value)},pt.prototype.valueChange=function(e){if("string"==typeof e){var t=e.split("~"),n=t[0]&&0<t[0].length?t[0]:null,i=t[1]&&0<t[1].length?t[1]:null;if(this.bigNumber){var r=new xe;isNaN(parseFloat(n))?r.startValue=null:r.startValue=parseFloat(n),isNaN(parseFloat(i))?r.endValue=null:r.endValue=parseFloat(i),this.item.value=r}else this.item.value=new xe({startValue:n,endValue:i});this.conditionChange.emit()}},pt.prototype.constructMultiFieldNumberRange=function(e){this.beginValue=null==e.startValue?null:e.startValue,this.endValue=null==e.endValue?null:e.endValue},pt.prototype.getConditionItemTitle=function(e){return this.solutionService.getConditionItemTitle(e)},pt.prototype.beginValueChange=function(e){this.beginValue=e},pt.prototype.endValueChange=function(e){this.endValue=e},pt.decorators=[{type:T.Component,args:[{selector:"app-solution-numberrange",template:'<div class="farris-group-wrap" id="{{item.id}}">\r\n  <div class="form-group farris-form-group  common-group number-range-group" [ngClass]="{\'q-state-readonly\':item.readonly}">\r\n    <label class="col-form-label" *ngIf="item" title="{{getConditionItemTitle(item)}}">\r\n      <span class="farris-label-info text-danger" *ngIf="item.control.isRequired()">*</span>\r\n      <span class="farris-label-text">{{item.fieldName}}</span>\r\n    </label>\r\n    <div class="farris-input-wrap">\r\n      <farris-number-range *ngIf="!bigNumber"\r\n        [beginValue]="beginValue"\r\n        [endValue]="endValue"\r\n        [min]="min"\r\n        [max]="max"\r\n        (beginValueChange)="beginValueChange($event)"\r\n        (endValueChange)="endValueChange($event)"\r\n        (valueChange)="valueChange($event)" \r\n        id="{{testId}}"\r\n        [canNull]="canNull"\r\n        [bigNumber]="bigNumber"\r\n        [placeholder]="placeholder"\r\n        [precision]="precision"\r\n        [textAlign]="textAlign"\r\n        [readonly]="item.readonly"\r\n        [beginPlaceHolder]="beginPlaceHolder"\r\n        [endPlaceHolder]="endPlaceHolder">\r\n      </farris-number-range>\r\n      <farris-number-range *ngIf="bigNumber"\r\n        [beginValue]="beginValue"\r\n        [endValue]="endValue"\r\n        (beginValueChange)="beginValueChange($event)"\r\n        (endValueChange)="endValueChange($event)"\r\n        (valueChange)="valueChange($event)" \r\n        id="{{testId}}"\r\n        [canNull]="canNull"\r\n        [bigNumber]="bigNumber"\r\n        [placeholder]="placeholder"\r\n        [precision]="precision"\r\n        [textAlign]="textAlign"\r\n        [readonly]="item.readonly"        \r\n        [beginPlaceHolder]="beginPlaceHolder"\r\n        [endPlaceHolder]="endPlaceHolder">\r\n      </farris-number-range>\r\n    </div>\r\n  </div>\r\n</div>'}]}],pt.ctorParameters=function(){return[{type:at}]},pt.propDecorators={item:[{type:T.Input}],changeFields:[{type:T.Input}],conditionChange:[{type:T.Output,args:["conditionChange"]}]},pt);function pt(e){this.solutionService=e,this.changeFields=[],this.conditionChange=new T.EventEmitter}var ht=(Object.defineProperty(mt.prototype,"item",{get:function(){return this.constructTextItem(this._inputItem)},set:function(e){this._inputItem=e},enumerable:!0,configurable:!0}),mt.prototype.constructTextItem=function(e){var t=e.value;return t.value=t.value&&t.value,e.value=t,e},mt.prototype.ngOnInit=function(){this.testId=this.solutionService.getGuid(),this.placeholder=this.item.placeHolder?this.item.placeHolder:this.item.control.placeholder},mt.prototype.getConditionItemTitle=function(e){return this.solutionService.getConditionItemTitle(e)},mt.prototype.onBlur=function(){this.hasError||this.conditionChange.emit()},mt.prototype.hasErrorInfo=function(e){return e.invalid&&(e.dirty||e.touched)&&e.errors.maxlength?this.hasError=!0:this.hasError=!1},mt.decorators=[{type:T.Component,args:[{selector:"app-solution-input",template:'<div class="farris-group-wrap" id="{{item.id}}">\r\n    <div class="form-group farris-form-group  common-group" [ngClass]="{\'q-state-readonly\':item.readonly}">\r\n        <label class="col-form-label" *ngIf="item" title="{{getConditionItemTitle(item)}}">\r\n            <span class="farris-label-info text-danger" *ngIf="item.control.isRequired()">*</span>\r\n            <span class="farris-label-text">{{item.fieldName}}</span>\r\n        </label>\r\n        <div class="farris-input-wrap">\r\n            <input-group [(ngModel)]="item.value.value" name="{{item.fieldName}}" id="{{testId}}"\r\n                (blurHandle)="onBlur()" [placeholder]="placeholder" [readonly]="item.readonly" maxlength="maxLength"\r\n                #textControl="ngModel">\r\n            </input-group>\r\n            <ng-container *ngIf="maxLength">\r\n                <div class="farris-feedback" [class.f-state-invalid]="hasErrorInfo(textControl)">\r\n                    <span class="f-feedback-message">请输入有效格式</span>\r\n                </div>\r\n            </ng-container>\r\n        </div>\r\n    </div>\r\n</div>'}]}],mt.ctorParameters=function(){return[{type:at}]},mt.propDecorators={item:[{type:T.Input}],conditionChange:[{type:T.Output,args:["conditionChange"]}]},mt);function mt(e){this.solutionService=e,this.maxLength=undefined,this.hasError=!1,this.conditionChange=new T.EventEmitter}var gt=(Object.defineProperty(ft.prototype,"item",{get:function(){return this.constructInputGroupItem(this._inputItem)},set:function(e){this._inputItem=e},enumerable:!0,configurable:!0}),ft.prototype.constructInputGroupItem=function(e){var t=e.value;return t.textValue=t.textValue&&t.textValue,e.value=t,e},ft.prototype.ngOnInit=function(){this.testId=this.solutionService.getGuid(),this.getInputGroupBindingInfo()},ft.prototype.ngOnDestroy=function(){this.item=null},ft.prototype.getInputGroupBindingInfo=function(){var e=this.item.control;this.usageMode=e.usageMode,"open-modal"!=this.usageMode&&"open-remote-modal"!=this.usageMode||(this.dialogOptions=e.dialogOptions,this.dialogOptions.mapFields&&(this.textField=JSON.stringify(this.dialogOptions.mapFields).split('"')[1]))},ft.prototype.getConditionItemTitle=function(e){return this.solutionService.getConditionItemTitle(e)},ft.prototype.onClick=function(e){var t=this;if("text"==this.usageMode)this.item.control.click();else{var n=this.dialogOptions;n.handle=function(e){e&&t.textField&&(t.item.value.value=e,t.item.value.textValue=t.item.value.getTextValue(t.textField),t.item.value.textField=t.textField,t.item.value.isInputText=!1,t.isTextFromDialog=!0,t.textFormDialog=t.item.value.textValue,t.onBlur())},this.item.control.click({event:e,options:n})}},ft.prototype.onBlur=function(){"text"==this.usageMode&&(this.item.value.isInputText=!0),"open-modal"!=this.usageMode&&"open-remote-modal"!=this.usageMode||(this.isTextFromDialog||(this.item.value.isInputText=!0),this.item.value.textValue!=this.textFormDialog&&(this.isTextFromDialog=!1,this.item.value.value=[],this.item.value.textField=undefined,this.item.value.isInputText=!0)),this.conditionChange.emit()},ft.prototype.clearData=function(){this.item.value.clearValue(),this.conditionChange.emit()},ft.decorators=[{type:T.Component,args:[{selector:"app-solution-inputgroup",template:'<div class="farris-group-wrap" id="{{item.id}}">\r\n    <div class="form-group farris-form-group  common-group"  [ngClass]="{\'q-state-readonly\':item.readonly}">\r\n        <label class="col-form-label" *ngIf="item" title="{{getConditionItemTitle(item)}}">\r\n            <span class="farris-label-info text-danger" *ngIf="item.control.isRequired()">*</span>\r\n            <span class="farris-label-text">{{item.fieldName}}</span>\r\n        </label>\r\n        <div class="farris-input-wrap">\r\n            <input-group \r\n                [(ngModel)]="item.value.textValue" \r\n                name="{{item.fieldName}}" \r\n                id="{{testId}}"\r\n                [groupText]="item.control.groupText"\r\n                [editable]="item.control.editable"\r\n                [placeholder]="item.placeHolder"\r\n                [readonly]="item.readonly"\r\n                (clickHandle)="onClick($event)"\r\n                (blurHandle)="onBlur()"\r\n                (clear)="clearData()">\r\n            </input-group>\r\n        </div>\r\n    </div>\r\n</div>'}]}],ft.ctorParameters=function(){return[{type:at}]},ft.propDecorators={item:[{type:T.Input}],conditionChange:[{type:T.Output,args:["conditionChange"]}]},ft);function ft(e){this.solutionService=e,this.conditionChange=new T.EventEmitter,this.isTextFromDialog=!1}var yt=(vt.prototype.ngOnInit=function(){var t=this;this.getSmartHelpBindingInfo(),this.testId=this.solutionService.getGuid(),this.placeholder=this.item.placeHolder?this.item.placeHolder:this.item.control.placeholder,this.lookup.textChanged.subscribe(function(e){t.textChangedHandler(e)})},vt.prototype.ngOnChanges=function(e){var t=this;this.getSmartHelpBindingInfo(),!e.changeFields||!e.changeFields.currentValue||e.changeFields.firstChange||e.changeFields.currentValue.some(function(e){return e==t.item.fieldCode})&&(this.textValue=this.item.value.textValue)},vt.prototype.getSmartHelpBindingInfo=function(){var e=this.item.control;this.uri=e.uri,this.textField=e.textField,this.idField=e.idField,this.valueField=e.valueField,this.displayType=e.displayType,this.mapFields=e.mapFields,this.context=e.context,this.preEventCmd=e.preEventCmd,this.postEventCmd=e.postEventCmd,this.enableFullTree=e.enableFullTree,this.loadTreeDataType=e.loadTreeDataType,this.singleSelect=!1!==e.singleSelect,this.expandLevel=e.expandLevel,this.enableCascade=e.enableCascade,this.dialogTitle=e.dialogTitle?e.dialogTitle:"",this.dialogWidth=e.panelWidth,this.dialogHeight=e.panelHeight;var t=this.item.value;"help-text-value-null"==t.textValue?this.textValue=t.getTextValue(this.textField):this.textValue=t.textValue,this.nosearch=e.nosearch,this.displayFields=e.displayFields?e.displayFields:"",this.displayTextSeparator=e.displayTextSeparator?e.displayTextSeparator:"_",this.editable=e.editable,this.clearFields=e.clearFields,e.hasOwnProperty("pageSize")&&e.pageSize&&(this.pageSize=e.pageSize),e.hasOwnProperty("pageList")&&e.pageList&&(this.pageList=e.pageList.split(",").map(function(e){return parseInt(e)}))},vt.prototype.clearData=function(e){this.item.value.clearValue(),this.item.control.clear&&this.item.control.clear(),this.conditionChange.emit()},vt.prototype.getConditionItemTitle=function(e){return this.solutionService.getConditionItemTitle(e)},vt.prototype.textChangedHandler=function(e){if(this.item&&this.item.value){var t=this.item.value;t.value=[e],t.textValue=e,t.isInputText=!0,this.conditionChange.emit()}},vt.prototype.selectedDataHandler=function(e){var t=this.item.value;t.value=this.singleSelect?[e]:e,t.valueField=this.valueField,t.textValue=this.textValue,t.isInputText=!1,this.conditionChange.emit()},vt.decorators=[{type:T.Component,args:[{selector:"app-solution-smarthelp",template:'<div class="farris-group-wrap" id="{{item.id}}" >\r\n    <div class="form-group farris-form-group common-group" [ngClass]="{\'q-state-readonly\':item.readonly}">\r\n        <label class="col-form-label" title="{{getConditionItemTitle(item)}}">\r\n            <span class="farris-label-info text-danger" *ngIf="item.control.isRequired()">*</span>\r\n            <span class="farris-label-text">{{item.fieldName}}</span>\r\n        </label>\r\n        <div class="farris-input-wrap">\r\n            <farris-lookup-grid #lookup\r\n                id="{{testId}}"                \r\n                [clear-fields]="clearFields"\r\n                [uri]="uri"\r\n                [placeholder]="placeholder"\r\n                [(ngModel)]="textValue"\r\n                [textField]="textField"\r\n                [valueField]="valueField"\r\n                [idField]="idField"\r\n                [mapFields]="mapFields"\r\n                [displayType]="displayType"\r\n                [title]="dialogTitle"\r\n                [dialogWidth]="dialogWidth"\r\n                [dialogHeight]="dialogHeight"\r\n                [context]="context"\r\n                [dictPicking]="preEventCmd"\r\n                [dictPicked]="postEventCmd"\r\n                [enableFullTree]="enableFullTree"\r\n                [loadTreeDataType]="loadTreeDataType"\r\n                [singleSelect]="singleSelect"\r\n                [expandLevel]="expandLevel"\r\n                [enableCascade]="enableCascade"\r\n                [readonly]="item.readonly"\r\n                [nosearch]="nosearch"\r\n                [beforeOpen]="onBeforeOpen"\r\n                [displayFields]="displayFields"\r\n                [displayTextSeparator]="displayTextSeparator"\r\n                [editable]="editable"\r\n                [pageSize]="pageSize"\r\n                [pageList]="pageList"\r\n                [useFavorite]="true"\r\n                (selectedData)="selectedDataHandler($event)"\r\n                (clear)="clearData($event)"\r\n            >\r\n        </farris-lookup-grid>\r\n        \x3c!-- [singleSelect]="true" --\x3e\r\n        </div>\r\n\r\n    </div>\r\n</div>'}]}],vt.ctorParameters=function(){return[{type:at}]},vt.propDecorators={item:[{type:T.Input}],changeFields:[{type:T.Input}],conditionChange:[{type:T.Output,args:["conditionChange"]}],mappingEmitter:[{type:T.Output,args:["helpMapping"]}],lookup:[{type:T.ViewChild,args:["lookup"]}]},vt);function vt(e){var n=this;this.solutionService=e,this.changeFields=[],this.conditionChange=new T.EventEmitter,this.mappingEmitter=new T.EventEmitter,this.pageSize=20,this.pageList=[10,20,30,50,100],this.onBeforeOpen=function(){var e=n.item.value;if(e&&e.value){var t=e.value.map(function(e){return e[n.idField||"id"]}).join(",");n.lookup.displayValue=t}return v.of(!0)}}var bt=(Ct.prototype.ngOnInit=function(){this.getDataSource();var e=this.item.value;e.key&&(this.selectedItemId=e.key),this.testId=this.solutionService.getGuid(),this.placeholder=this.item.placeHolder?this.item.placeHolder:this.item.control.placeholder,this.beforeShow=this.item.control.beforeShow,this.beforeHide=this.item.control.beforeHide,this.idField=this.item.control.idField?this.item.control.idField:"value",this.textField=this.item.control.textField?this.item.control.textField:"name"},Ct.prototype.ngOnChanges=function(e){var t=this;this.getDataSource(),!e.changeFields||!e.changeFields.currentValue||e.changeFields.firstChange||e.changeFields.currentValue.some(function(e){return e==t.item.fieldCode})&&(this.selectedItemId=this.item.value.key)},Ct.prototype.getDataSource=function(){this.dropDownListDataSource=this.item.control.enumValues,this.uri=this.item.control.uri},Ct.prototype.selectChange=function(e){var t=this,n=e.selections.map(function(e){return{value:t.uri?e[t.textField]:e[t.idField],name:e[t.textField]}}),i=n.map(function(e){return e.value}).join(",");this.item.value=new Ge({value:n,key:this.uri?i:e.value}),this.conditionChange.emit()},Ct.prototype.onClear=function(e){this.item.value=new Ge},Ct.prototype.getConditionItemTitle=function(e){return this.solutionService.getConditionItemTitle(e)},Ct.decorators=[{type:T.Component,args:[{selector:"app-solution-dropdownlist",template:'<div class="farris-group-wrap" id="{{item.id}}">\r\n    <div class="form-group farris-form-group  common-group"  [ngClass]="{\'q-state-readonly\':item.readonly}">\r\n    <label class="col-form-label" *ngIf="item" title="{{getConditionItemTitle(item)}}">\r\n      <span class="farris-label-info text-danger" *ngIf="item.control.isRequired()">*</span>\r\n      <span class="farris-label-text">{{item.fieldName}}</span>\r\n    </label>\r\n    <div class="farris-input-wrap">\r\n    <farris-combo-list \r\n        [(ngModel)]="selectedItemId"\r\n        [idField]="idField"\r\n        [valueField]="idField"\r\n        [textField]="textField"\r\n        [editable]="false"\r\n        [data]="dropDownListDataSource"\r\n        [uri]="uri"\r\n        [beforeShow]="beforeShow"\r\n        [beforeHide]="beforeHide"\r\n        [multiSelect]="item.control.multiSelect"\r\n        [placeholder]="placeholder"\r\n        [panelHeight]="item.control.panelHeight ? item.control.panelHeight : \'auto\'"\r\n        (valueChange)="selectChange($event)"\r\n        (clear)="onClear($event)" \r\n        id="{{testId}}"\r\n        [readonly]="item.readonly">\r\n      </farris-combo-list>\r\n    </div>\r\n  </div>\r\n</div>\r\n'}]}],Ct.ctorParameters=function(){return[{type:at}]},Ct.propDecorators={item:[{type:T.Input}],changeFields:[{type:T.Input}],conditionChange:[{type:T.Output,args:["conditionChange"]}]},Ct);function Ct(e){this.solutionService=e,this.changeFields=[],this.conditionChange=new T.EventEmitter,this.dropDownListDataSource=new Array,this.selectedItemId=""}var Ft=(Tt.prototype.ngOnChanges=function(e){var t=this;e.changeFields&&e.changeFields.currentValue&&!e.changeFields.firstChange&&e.changeFields.currentValue.some(function(e){return e==t.item.fieldCode})&&(this.number=this.item.value.getOriginalValue())},Tt.prototype.ngOnInit=function(){this.number=this.item.value.getOriginalValue(),this.testId=this.solutionService.getGuid(),this.canNull=!0,this.placeholder=this.item.placeHolder?this.item.placeHolder:this.item.control.placeholder,this.precision=this.item.control.precision,this.textAlign=this.item.control.textAlign,this.bigNumber=!!this.item.control.bigNumber&&this.item.control.bigNumber,this.bigNumber||(this.min=this.item.control.min===undefined||null===this.item.control.min?-2147483648:this.item.control.min,this.max=this.item.control.max===undefined||null===this.item.control.max?2147483647:this.item.control.max)},Tt.prototype.valueChange=function(e){var t=new He;isNaN(parseFloat(e))?t.numValue=null:t.numValue=e,this.item.value=t,this.conditionChange.emit()},Tt.prototype.getConditionItemTitle=function(e){return this.solutionService.getConditionItemTitle(e)},Tt.decorators=[{type:T.Component,args:[{selector:"app-solution-single-number",template:'<div class="farris-group-wrap" id="{{item.id}}" >\r\n    <div class="form-group farris-form-group  common-group" [ngClass]="{\'q-state-readonly\':item.readonly}">\r\n        <label class="col-form-label" *ngIf="item" title="{{getConditionItemTitle(item)}}">\r\n            <span class="farris-label-info text-danger" *ngIf="item.control.isRequired()">*</span>\r\n            <span class="farris-label-text">{{item.fieldName}}</span>\r\n        </label>\r\n        <div class="farris-input-wrap">\r\n            <farris-number-spinner *ngIf="!bigNumber"\r\n                [(ngModel)]="number"\r\n                (valueChange)="valueChange($event)"\r\n                id="{{testId}}"\r\n                [min]="min"\r\n                [max]="max"\r\n                [canNull]="canNull"\r\n                [bigNumber]="bigNumber"\r\n                [placeholder]="placeholder"\r\n                [precision]="precision"\r\n                [textAlign]="textAlign"\r\n                [readonly]="item.readonly">\r\n            </farris-number-spinner>\r\n            <farris-number-spinner *ngIf="bigNumber"\r\n                [(ngModel)]="number"\r\n                (valueChange)="valueChange($event)"\r\n                id="{{testId}}"\r\n                [canNull]="canNull"\r\n                [bigNumber]="bigNumber"\r\n                [placeholder]="placeholder"\r\n                [precision]="precision"\r\n                [textAlign]="textAlign"\r\n                [readonly]="item.readonly">\r\n            </farris-number-spinner>\r\n        </div>\r\n    </div>\r\n</div>'}]}],Tt.ctorParameters=function(){return[{type:at}]},Tt.propDecorators={item:[{type:T.Input}],changeFields:[{type:T.Input}],conditionChange:[{type:T.Output,args:["conditionChange"]}]},Tt);function Tt(e){this.solutionService=e,this.changeFields=[],this.conditionChange=new T.EventEmitter}var Vt=(It.prototype.ngOnChanges=function(e){e.filedsDataSource&&e.filedsDataSource.currentValue&&(this.visibleFields=this.filedsDataSource.filter(function(e){return!!e.visible})),e.inputSelectedFileds&&e.inputSelectedFileds.currentValue&&(this.visibleSelectedFields=this.inputSelectedFileds.filter(function(e){return!!e.visible}),this.visibleSelectedFields.length&&(this.selectedIds=this.visibleSelectedFields.map(function(e){return e.id})))},It.prototype.ngOnInit=function(){this.title=this.localeService.getValue("queryCondition.container.config"),this.filedsDataSource&&(this.visibleFields=this.filedsDataSource.filter(function(e){return!!e.visible}))},It.prototype.cancel=function(){this.selectedIds=this.visibleSelectedFields.map(function(e){return e.id}),this.cancelEmitter.emit(!0),this.multiSelectCmp.searchValue="",this.dialog.close()},It.prototype.confirm=function(){var n,i=this,r=[];this.selectedIds.forEach(function(t){var e=i.visibleSelectedFields.findIndex(function(e){return e.id==t});-1<e?r.push(i.visibleSelectedFields[e].fieldCode):((n=i.visibleFields.find(function(e){return e.id==t})).value.clearValue(),r.push(n.fieldCode))}),this.confirmEmitter.emit(r),this.multiSelectCmp.searchValue="",this.dialog.close()},It.prototype.reset=function(){},It.decorators=[{type:T.Component,args:[{selector:"app-queryconfigdialog",template:'<farris-dialog #dialog [buttons]="configDialogButtonRef" [width]="699" [height]="544" [title]="title">\r\n    <multi-select #searchMulti [dataSource]="visibleFields" [idField]="\'id\'" [textField]="\'fieldName\'" [displayType]="\'List\'" [(selectedId)]="selectedIds" [showCheckbox]="true">\r\n        <ng-template farrisTemplate="text" let-data>\r\n            {{ data[\'fieldName\'] }}\r\n        </ng-template>\r\n    </multi-select>\r\n</farris-dialog>\r\n<ng-template #configDialogButtonRef>\r\n    <button class="btn btn-primary" (click)="confirm()">{{\'queryCondition.configDialog.confirm\' | locale}}</button>\r\n    <button class="btn btn-secondary" (click)="cancel()">{{\'queryCondition.configDialog.cancel\' | locale}}</button>\r\n</ng-template>',encapsulation:T.ViewEncapsulation.None,styles:[""]}]}],It.ctorParameters=function(){return[{type:at},{type:h.LocaleService}]},It.propDecorators={inputSelectedFileds:[{type:T.Input}],filedsDataSource:[{type:T.Input}],cancelEmitter:[{type:T.Output}],confirmEmitter:[{type:T.Output}],dialog:[{type:T.ViewChild,args:["dialog"]}],multiSelectCmp:[{type:T.ViewChild,args:["searchMulti"]}]},It);function It(e,t){this.solutionService=e,this.localeService=t,this.inputSelectedFileds=[],this.cancelEmitter=new T.EventEmitter,this.confirmEmitter=new T.EventEmitter,this.selectedIds=[]}var xt=(Object.defineProperty(wt.prototype,"item",{get:function(){return this._item},set:function(e){this._item=e},enumerable:!0,configurable:!0}),wt.prototype.ngOnChanges=function(e){var t=this;e.changeFields&&e.changeFields.currentValue&&!e.changeFields.firstChange&&e.changeFields.currentValue.some(function(e){return e==t.item.fieldCode})&&(this.checkValue=this.item.value.getOriginalValue())},wt.prototype.ngOnInit=function(){this.checkValue=this.item.value.getOriginalValue(),this.controlData=this.item.control,this.testId=this.solutionService.getGuid()},wt.prototype.valueChanged=function(e){e.length?this._item.value.setOriginalValue(e):this._item.value.setOriginalValue([!1]),this.conditionChange.emit()},wt.prototype.getConditionItemTitle=function(e){return this.solutionService.getConditionItemTitle(e)},wt.decorators=[{type:T.Component,args:[{selector:"app-solution-checkbox",template:'<div class="farris-group-wrap" id="{{item.id}}">\r\n    <div class="form-group farris-form-group  common-group qcheckbox-group" style="overflow: auto;white-space: nowrap">\r\n        <label class="col-form-label mr-0" style="width:auto;">\r\n            <span class="farris-label-info text-danger" *ngIf="item.control.isRequired()">*</span>\r\n        </label>\r\n        \x3c!-- <div class="farris-input-wrap">\r\n            <div class="custom-control custom-checkbox">\r\n                <input class="custom-control-input" type="checkbox" id="item.fieldCode" (change)="valueChange($event.target.checked)" [(ngModel)]="item.value[\'value\']"/>\r\n                <label class="custom-control-label" for="item.fieldCode">{{item.fieldName}}</label>\r\n            </div>\r\n          <div class="farris-feedback valid-feedback"></div>\r\n        </div> --\x3e\r\n        <farris-checkboxgroup\r\n            [isStringValue]="controlData.isStringValue" \r\n            [data]="controlData.data" \r\n            [horizontal]="controlData.horizontal" \r\n            [disable]="item.readonly" \r\n            [(ngModel)]="checkValue"\r\n            (changeValue)="valueChanged($event)"\r\n            id="{{testId}}"\r\n        ></farris-checkboxgroup>\r\n    </div>\r\n</div>'}]}],wt.ctorParameters=function(){return[{type:T.Injector}]},wt.propDecorators={item:[{type:T.Input}],changeFields:[{type:T.Input}],conditionChange:[{type:T.Output,args:["conditionChange"]}]},wt);function wt(e){this.injector=e,this.changeFields=[],this.conditionChange=new T.EventEmitter,this.solutionService=this.injector.get(at)}var St=(Object.defineProperty(Ot.prototype,"item",{get:function(){return this._item},set:function(e){this._item=e},enumerable:!0,configurable:!0}),Ot.prototype.ngOnChanges=function(e){var t=this;e.changeFields&&e.changeFields.currentValue&&!e.changeFields.firstChange&&e.changeFields.currentValue.some(function(e){return e==t.item.fieldCode})&&(this.radioValue=this.item.value.getOriginalValue())},Ot.prototype.ngOnInit=function(){this.radioControl=this.item.control,this.radioValue=this.item.value.getOriginalValue(),this.testId=this.solutionService.getGuid(),this.showLabel=this.radioControl.showLabel},Ot.prototype.valueChanged=function(e){this._item.value.setOriginalValue(e),this.conditionChange.emit()},Ot.prototype.getConditionItemTitle=function(e){return this.solutionService.getConditionItemTitle(e)},Ot.decorators=[{type:T.Component,args:[{selector:"app-solution-radio",template:'<div class="farris-group-wrap" id="{{item.id}}">\r\n    <div class="form-group farris-form-group  common-group qradio-group"  [ngClass]="{\'q-state-readonly\':item.readonly}">\r\n        <label class="col-form-label" *ngIf="item" title="{{getConditionItemTitle(item)}}">\r\n            <span class="farris-label-info text-danger" *ngIf="item.control.isRequired()">*</span>\r\n            <span class="farris-label-text" *ngIf="showLabel">{{item.fieldName}}</span>\r\n        </label>\r\n        <farris-radiogroup\r\n            class="f-solution-radio-group"\r\n            [(ngModel)]="radioValue"\r\n            [data]="radioControl.enumValues"\r\n            [horizontal]="radioControl.horizontal"\r\n            [disabled]="item.readonly"\r\n            (changeValue)="valueChanged($event)"\r\n            id="{{testId}}"\r\n        ></farris-radiogroup>\r\n    </div>\r\n</div>'}]}],Ot.ctorParameters=function(){return[{type:T.Injector}]},Ot.propDecorators={item:[{type:T.Input}],changeFields:[{type:T.Input}],conditionChange:[{type:T.Output,args:["conditionChange"]}],cls:[{type:T.HostBinding,args:["class.f-solution-radio-group-wrapper"]}]},Ot);function Ot(e){this.injector=e,this.changeFields=[],this.conditionChange=new T.EventEmitter,this.cls=!0,this.solutionService=this.injector.get(at)}var Dt=(Nt.prototype.ngOnChanges=function(e){var t=this;e.changeFields&&e.changeFields.currentValue&&!e.changeFields.firstChange&&e.changeFields.currentValue.some(function(e){return e==t.item.fieldCode})&&(this.dateRange&&(this.beginValue=this.item.value&&this.item.value.startTime?this.item.value.startTime.toString().trim():"",this.endValue=this.item.value&&this.item.value.endTime?this.item.value.endTime.toString().trim():""),this.bindValue=this.item.value.getOriginalValue())},Nt.prototype.ngOnInit=function(){var n=this;switch(this.testId=this.solutionService.getGuid(),this.controlType){case O.DateRange:this.returnFormat=this.item.control.returnFormat?this.item.control.returnFormat:"yyyy-MM-dd",this.dateFormat=this.item.control.format?this.item.control.format:"yyyy-MM-dd",this.dateRange=!0;break;case O.SingleDate:this.returnFormat=this.item.control.returnFormat?this.item.control.returnFormat:"yyyy-MM-dd",this.dateFormat=this.item.control.format?this.item.control.format:"yyyy-MM-dd",this.dateRange=!1;break;case O.SingleYear:this.returnFormat=this.item.control.returnFormat?this.item.control.returnFormat:"yyyy",this.dateFormat=this.item.control.format?this.item.control.format:"yyyy",this.showType=y.ShowType.noDateAndMonth,this.dateRange=!1;break;case O.DateTimeRange:this.returnFormat=this.item.control.returnFormat?this.item.control.returnFormat:"yyyy-MM-dd HH:mm:ss",this.item.control.enableCustomFormat?this.dateFormat=this.item.control.format?this.item.control.format:"yyyy-MM-dd HH:mm:ss":(this.dateFormat=this.item.control.format?this.item.control.format:"yyyy-MM-dd",this.dateFormat=this.dateFormat+" HH:mm:ss"),this.showTime=!0,this.dateRange=!0;break;case O.SingleMonth:this.returnFormat=this.item.control.returnFormat?this.item.control.returnFormat:"yyyy-MM",this.dateFormat=this.item.control.format?this.item.control.format:"yyyy-MM",this.showType=y.ShowType.noDate,this.dateRange=!1;break;case O.MonthRange:this.returnFormat=this.item.control.returnFormat?this.item.control.returnFormat:"yyyy-MM",this.dateFormat=this.item.control.format?this.item.control.format:"yyyy-MM",this.showType=y.ShowType.noDate,this.dateRange=!0;break;case O.SingleDateTime:this.returnFormat=this.item.control.returnFormat?this.item.control.returnFormat:"yyyy-MM-dd HH:mm:ss",this.item.control.enableCustomFormat?this.dateFormat=this.item.control.format?this.item.control.format:"yyyy-MM-dd HH:mm:ss":(this.dateFormat=this.item.control.format?this.item.control.format:"yyyy-MM-dd",this.dateFormat=this.dateFormat+" HH:mm:ss"),this.showTime=!0,this.dateRange=!1}this.updateParamsByCondition(),this.placeholder=this.item.placeHolder?this.item.placeHolder:this.item.control.placeholder,this.dateRange&&(this.beginValue=this.item.value&&this.item.value.startTime?this.item.value.startTime.toString().trim():"",this.endValue=this.item.value&&this.item.value.endTime?this.item.value.endTime.toString().trim():"",this.beginPlaceHolder=this.item.beginPlaceHolder?this.item.beginPlaceHolder:this.placeholder,this.endPlaceHolder=this.item.endPlaceHolder?this.item.endPlaceHolder:this.placeholder),this.bindValue=this.item.value.getOriginalValue(),this.item.control.weekSelect&&this.controlType==O.DateRange&&(this.showType=y.ShowType.selectWeek),this.solutionService.getControlConfigState().pipe(b.takeUntil(this.destroy$)).subscribe(function(e){var t=e.find(function(e){return e.fieldCode==n.item.fieldCode});t&&n.updateParamsByCondition(t)})},Nt.prototype.ngOnDestroy=function(){},Nt.prototype.updateParamsByCondition=function(e){void 0===e&&(e=null);var t=null;switch(t=e?e.control:this.item.control,this.controlType){case O.SingleYear:this.maxDate=t.hasOwnProperty("maxDate")?t.maxDate:this.maxDate,this.minDate=t.hasOwnProperty("minDate")?t.minDate:this.minDate}},Nt.prototype.onDateChange=function(e){this.item.value.setOriginalValue({formatted:e.returnFormatted,delimiter:this.dateRangeDatesDelimiter}),this.conditionChange.emit()},Nt.prototype.getConditionItemTitle=function(e){return this.solutionService.getConditionItemTitle(e)},Nt.prototype.beginValueChange=function(e){},Nt.prototype.endValueChange=function(e){},Nt.decorators=[{type:T.Component,args:[{selector:"app-solution-datepicker",template:'<div class="farris-group-wrap" id="{{item.id}}">\r\n    <div class="form-group farris-form-group  common-group"  [ngClass]="{\'q-state-readonly\':item.readonly,\'datepicker-range-group\':dateRange}">\r\n        <label class="col-form-label" *ngIf="item" title="{{getConditionItemTitle(item)}}">\r\n            <span class="farris-label-info text-danger" *ngIf="item.control.isRequired()">*</span>\r\n            <span class="farris-label-text">{{item.fieldName}}</span>\r\n        </label>\r\n        <div class="farris-input-wrap">\r\n            <farris-datepicker *ngIf="!dateRange"\r\n                [(ngModel)]="bindValue"\r\n                [dateRange]="dateRange"\r\n                [placeholder]="placeholder"\r\n                [returnFormat]="returnFormat"\r\n                [dateFormat]="dateFormat"\r\n                [editable]="editable"\r\n                [showType]="showType"\r\n                [showTime]="showTime"\r\n                [readonly]="item.readonly"\r\n                (valueChange)="onDateChange($event)"\r\n                [maxDate]="maxDate"\r\n                [minDate]="minDate"\r\n                id="{{testId}}"\r\n            >\r\n            </farris-datepicker>\r\n            <farris-datepicker *ngIf="dateRange"\r\n                [dateRange]="dateRange"\r\n                [placeholder]="placeholder"      \r\n                [beginPlaceholder]="beginPlaceHolder"\r\n                [endPlaceholder]="endPlaceHolder"\r\n                [returnFormat]="returnFormat"\r\n                [dateFormat]="dateFormat"\r\n                [editable]="editable"\r\n                [showType]="showType"\r\n                [showTime]="showTime"\r\n                [readonly]="item.readonly"\r\n                [(ngModel)]="bindValue"\r\n                (valueChange)="onDateChange($event)"\r\n                id="{{testId}}"\r\n            >\r\n            </farris-datepicker>\r\n        </div>\r\n    </div>\r\n</div>\r\n'}]}],Nt.ctorParameters=function(){return[{type:T.Injector}]},Nt.propDecorators={item:[{type:T.Input}],controlType:[{type:T.Input}],changeFields:[{type:T.Input}],conditionChange:[{type:T.Output,args:["conditionChange"]}]},Nt);function Nt(e){this.injector=e,this.changeFields=[],this.conditionChange=new T.EventEmitter,this.showType=y.ShowType.all,this.maxDate="",this.minDate="",this.editable=!1,this.dateRangeDatesDelimiter="~",this.solutionService=this.injector.get(at);var t=this.injector.get(ut,null);this.destroy$=t?t.destroy$:new v.Subject}var kt=(qt.prototype.ngOnInit=function(){this.getComboLookUpBindingInfo(),this.testId=this.solutionService.getGuid(),this.placeholder=this.item.placeHolder?this.item.placeHolder:this.item.control.placeholder,this.autoWidth=!1},qt.prototype.ngOnChanges=function(e){var t=this;this.getComboLookUpBindingInfo(),!e.changeFields||!e.changeFields.currentValue||e.changeFields.firstChange||e.changeFields.currentValue.some(function(e){return e==t.item.fieldCode})&&(this.textValue=this.item.value.textValue)},qt.prototype.valueChangeHandler=function(e){var t=this.item.value;t.value=e.selections,t.valueField=this.valueField,t.textValue=t.getTextValue(this.textField),this.textValue=t.textValue,this.conditionChange.emit()},qt.prototype.getComboLookUpBindingInfo=function(){var t=this,e=this.item.control;this.uri=e.uri,this.idField=e.idField,this.valueField=e.valueField,this.textField=e.textField,this.mapFields=e.mapFields,this.displayType=e.displayType,this.preEventCmd=e.preEventCmd,this.postEventCmd=e.postEventCmd,this.multiSelect=!0!==e.singleSelect,this.panelWidth=e.panelWidth?e.panelWidth:300,this.panelHeight=e.panelHeight?e.panelHeight:300;var n=this.item.value;"help-text-value-null"==n.textValue?this.textValue=n.getTextValue(this.textField):this.textValue=n.textValue,n&&n.value&&(this.selectedValues=(n.value||[]).map(function(e){return e[t.idField]}).join(","))},qt.prototype.clearData=function(e){this.item.value.clearValue(),this.conditionChange.emit()},qt.prototype.getConditionItemTitle=function(e){return this.solutionService.getConditionItemTitle(e)},qt.decorators=[{type:T.Component,args:[{selector:"app-solution-combolookup",template:'<div class="farris-group-wrap" id="{{item.id}}">\r\n    <div class="form-group farris-form-group common-group "  [ngClass]="{\'q-state-readonly\':item.readonly}">\r\n        <label class="col-form-label" *ngIf="item" title="{{getConditionItemTitle(item)}}">\r\n            <span class="farris-label-info text-danger" *ngIf="item.control.isRequired()">*</span>\r\n            <span class="farris-label-text">{{item.fieldName}}</span>\r\n        </label>\r\n        <div class="farris-input-wrap">\r\n            <farris-combo-lookup *ngIf="item"\r\n                [uri]="uri"\r\n                [placeholder]="placeholder"\r\n                [(ngModel)]="textValue"\r\n                [idField]="idField"\r\n                [valueField]="valueField"\r\n                [textField]="textField"\r\n                [mapFields]="mapFields"\r\n                [displayType]="displayType"\r\n                [multiSelect]="multiSelect"\r\n                [selectedValues]="selectedValues"\r\n                [beforeShow]="preEventCmd"\r\n                [beforeHide]="postEventCmd"\r\n                (valueChange)="valueChangeHandler($event)"\r\n                (clear)="clearData($event)"\r\n                [autoWidth]="autoWidth"\r\n                [panelWidth]="panelWidth"\r\n                [panelHeight]="panelHeight"\r\n                [readonly]="item.readonly"\r\n                id="{{testId}}"\r\n            >\r\n        </farris-combo-lookup>\r\n        </div>\r\n    </div>\r\n</div>'}]}],qt.ctorParameters=function(){return[{type:at}]},qt.propDecorators={item:[{type:T.Input}],changeFields:[{type:T.Input}],conditionChange:[{type:T.Output,args:["conditionChange"]}]},qt);function qt(e){this.solutionService=e,this.changeFields=[],this.conditionChange=new T.EventEmitter,this.selectedValues=""}var Mt=(Et.prototype.ngOnInit=function(){var n=this;this.clearFields&&this.ngCtrl&&this.ngCtrl.valueChanges.subscribe(function(e){n.qcc.fieldCodeOfClearFields=[],n.clearFields.split(",").forEach(function(t){var e=n.qcc.selectedFieldConditions.filter(function(e){return!!e.visible}).find(function(e){return e.fieldCode===t});e&&(n.qcc.fieldCodeOfClearFields.push(t),e.value.clearValue())})})},Et.decorators=[{type:T.Directive,args:[{selector:"[clear-fields]"}]}],Et.ctorParameters=function(){return[{type:F.NgControl,decorators:[{type:T.Optional},{type:T.Self}]},{type:ut},{type:T.Injector}]},Et.propDecorators={clearFields:[{type:T.Input,args:["clear-fields"]}]},Et);function Et(e,t,n){this.ngCtrl=e,this.qcc=t,this.inject=n,this.clearFields=""}var Ht=(Object.defineProperty(jt.prototype,"enableMulti",{get:function(){return this._enableMulti},set:function(e){this._enableMulti=e,this.judgeMulti()},enumerable:!0,configurable:!0}),jt.prototype.ngOnInit=function(){},jt.prototype.judgeMulti=function(){var t=this;this._enableMulti&&this.ngZone.runOutsideAngular(function(){setTimeout(function(){var e=t.el.nativeElement.querySelector(".farris-label-text");e&&(e.clientWidth<e.scrollWidth?t.el.nativeElement.className=t.el.nativeElement.className+" "+t.multiCls:t.el.nativeElement.className=t.el.nativeElement.className.replace(t.multiCls,""))},20)})},jt.decorators=[{type:T.Directive,args:[{selector:"[label-text-multi]"}]}],jt.ctorParameters=function(){return[{type:T.ElementRef},{type:T.Injector}]},jt.propDecorators={enableMulti:[{type:T.Input,args:["label-text-multi"]}]},jt);function jt(e,t){this.el=e,this.injector=t,this.multiCls="farris-group-multi-label",this._enableMulti=!1,this.ngZone=null,this.ngZone||(this.ngZone=this.injector.get(T.NgZone,null))}var Rt=(Pt.decorators=[{type:T.NgModule,args:[{imports:[i.CommonModule,F.FormsModule,F.ReactiveFormsModule,o.FarrisDialogModule,l.LayoutModule,a.LookupModule,s.MultiSelectModule,u.FieldGroupModule,c.InputGroupModule,d.FDropdownDirectiveTypeModule,p.LoadingModule.forRoot(),n.NotifyModule.forRoot(),y.FarrisDatePickerModule,h.LocaleModule,m.ComboListModule,g.NumberSpinnerModule,f.FarrisFormsModule,C.ComboLookupModule],declarations:[ut,Vt,Dt,dt,yt,ht,bt,Ft,xt,kt,St,gt,Mt,Ht],entryComponents:[Vt],providers:[at,n.NotifyService,w],bootstrap:[ut],exports:[ut,Vt,Dt,dt,yt,ht,bt,Ft,xt,kt,St,gt]}]}],Pt);function Pt(){}var Lt=function _t(){this.isDefault=!1,this.isChanged=!1,this.extendId="query-scheme-1"},Bt=(Gt.prototype.convertJObject=function(e){var t=e,n=new Object;if(n.id=t.id,n.belongId=t.belongId,n.code=t.code,n.name=t.name,n.isSystem=t.isSystem,n.isDefault=t.isDefault,n.type=t.type,n.extendId=t.extendId,n.extendInfo=t.extendInfo,t.queryConditions&&0<t.queryConditions.length){var i=[],r=new rt;t.queryConditions.forEach(function(e){i.push(r.convertJObject(e))}),n.queryConditionString=JSON.stringify(i)}return n},Gt.prototype.initFromJobject=function(e){var t=new Lt;t.id=e.id,t.code=e.code,t.name=e.name,t.belongId=e.belongId,t.isSystem=e.isSystem,t.isDefault=e.isDefault,t.type=e.hasOwnProperty("type")?e.type:"",t.extendId=e.hasOwnProperty("extendId")?e.extendId:"",t.queryConditions=new Array;var n=e.queryConditionString;if(n){var i=JSON.parse(n),r=new rt;i.forEach(function(e){t.queryConditions.push(r.initFromJobject(e))})}return t},Gt.prototype.formatFromJobject=function(e){var t,n=new Array;t="string"==typeof e?JSON.parse(e):e;var i=new rt;return t.forEach(function(e){n.push(i.initFromJobject(e))}),n},Gt.prototype.formatConvertJObject=function(e){var t=[],n=new rt;return e.forEach(function(e){t.push(n.convertJObject(e))}),t},Gt);function Gt(){}var At=function Ut(){},Jt={Equal:0,GreaterThan:2,GreaterThanOrEqual:3,LessThan:4,LessThanOrEqual:5,Like:6};Jt[Jt.Equal]="Equal",Jt[Jt.GreaterThan]="GreaterThan",Jt[Jt.GreaterThanOrEqual]="GreaterThanOrEqual",Jt[Jt.LessThan]="LessThan",Jt[Jt.LessThanOrEqual]="LessThanOrEqual",Jt[Jt.Like]="Like";var $t=function Yt(e){this.visible=!0,this.id=e.id,this.labelCode=e.fieldCode,this.name=e.fieldName};e.QueryConditionModule=Rt,e.QueryConditionComponent=ut,e.QuerySolutionVo=Lt,e.QuerySolutionExtendVo=At,e.QueryCondition=it,e.CompareType=Jt,e.ValueType=lt,e.FieldConfig=$t,e.ControlType=O,e.DateRangeControl=$,e.DropDownListControl=P,e.EnumBoolValue=E,e.EnumType=D,e.EnumIntegerValue=N,e.EnumStringValue=q,e.NumberRangeControl=Z,e.SmartHelpContol=U,e.TextControl=A,e.InputGroupControl=ve,e.DateRangeValue=De,e.DropDownListValue=Ge,e.NumberRangeValue=xe,e.SmartHelpValue=ke,e.TextValue=Ve,e.InputGroupValue=Xe,e.SolutionService=at,e.QuerySolutionVoConvertor=Bt,e.ConvertorService=w,e.SingleDateValue=Me,e.SingleNumberValue=He,e.SingleDateControl=W,e.SingleNumberControl=K,e.SingleYearValue=Re,e.SingleYearControl=ee,e.CheckBoxControl=ne,e.CheckBoxValue=Le,e.SingleMonthControl=le,e.SingleMonthValue=Je,e.MonthRangeControl=se,e.MonthRangeValue=ze,e.SingleDateTimeControl=ce,e.SingleDateTimeValue=_e,e.ComboLookUpControl=pe,e.ComboLookUpValue=Ye,e.RadioControl=me,e.RadioValue=Qe,e.ɵi=xt,e.ɵj=kt,e.ɵc=Dt,e.ɵg=bt,e.ɵf=ht,e.ɵl=gt,e.ɵh=Ft,e.ɵd=dt,e.ɵk=St,e.ɵe=yt,e.ɵm=Mt,e.ɵn=Ht,e.ɵb=Vt,e.ɵa=I,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=farris-component-querycondition.umd.min.js.map