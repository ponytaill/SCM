{"version":3,"sources":["node_modules/tslib/tslib.es6.js","ng://@farris/ui-time-picker/lib/services/update-host-class.service.ts","ng://@farris/ui-time-picker/lib/animations/animation-consts.ts","ng://@farris/ui-time-picker/lib/animations/slide.ts","ng://@farris/ui-time-picker/lib/utils/convert.ts","ng://@farris/ui-time-picker/lib/utils/check.ts","ng://@farris/ui-time-picker/lib/time-value-accessor.directive.ts","ng://@farris/ui-time-picker/lib/utils/date-helper.ts","ng://@farris/ui-time-picker/lib/time-holder.ts","ng://@farris/ui-time-picker/lib/time-picker-panel.component.ts","ng://@farris/ui-time-picker/lib/services/time-picker.locale.service.ts","ng://@farris/ui-time-picker/lib/time-picker.component.ts","ng://@farris/ui-time-picker/lib/time-picker.module.ts"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","this","__read","o","m","Symbol","iterator","r","e","ar","next","done","push","value","error","UpdateHostClassService","updateHostClass","el","classMap","removeClass","renderer","addClass","Injectable","RendererFactory2","rendererFactory2","createRenderer","AnimationDuration","SLOW","BASE","FAST","AnimationCurves","EASE_BASE_OUT","EASE_BASE_IN","EASE_OUT","EASE_IN","EASE_IN_OUT","EASE_OUT_BACK","EASE_IN_BACK","EASE_IN_OUT_BACK","EASE_OUT_CIRC","EASE_IN_CIRC","EASE_IN_OUT_CIRC","EASE_OUT_QUINT","EASE_IN_QUINT","EASE_IN_OUT_QUINT","ANIMATION_TRANSITION_IN","ANIMATION_TRANSITION_OUT","slideMotion","trigger","state","style","opacity","transform","transformOrigin","transition","animate","toBoolean","convertToDate","format","indexOf","split","fnsParse","Date","convertToStr","date","selected12Hours","isNaN","getTime","fnsFormat","isNotNil","TimeValueAccessorDirective","keyup","changed","blur","touched","_onChange","parseTime","text","elementRef","nativeElement","_onTouch","setRange","focus","setSelectionRange","writeValue","formatStr","nzTime","registerOnChange","fn","registerOnTouched","Directive","args","selector","exportAs","providers","provide","NG_VALUE_ACCESSOR","useExisting","multi","ElementRef","Input","HostListener","TimeHolder","setValueByStep","step","times","Math","floor","setDefaultValueIfNil","_value","defaultOpenValue","setMinutes","disabled","minutes","setHours","hours","setSeconds","seconds","setUse12Hours","_use12Hours","defineProperty","_changes","asObservable","isValid","_hours","getHours","_minutes","getMinutes","_seconds","getSeconds","_selected12Hours","_clear","_text","setValue","use12Hours","clear","update","undefined","isEmpty","defaultHours","defaultMinutes","defaultSeconds","default12Hours","calculateViewHour","toUpperCase","_defaultOpenValue","hourStep","minuteStep","secondStep","setDefaultOpenValue","Subject","makeRange","start","ceil","Array","fill","map","_","TimePickerPanelComponent","replace","_allowEmpty","_opened","opened","initPosition","selectInputRange","time","_disabledHours","buildHours","_disabledMinutes","buildMinutes","_disabledSeconds","buildSeconds","_format","enabledColumns","charSet","Set","hourEnabled","has","minuteEnabled","secondEnabled","build12Hours","panelWidth","cdr","markForCheck","_hourStep","_minuteStep","_secondStep","buildTimes","timeValueAccessorDirective","_this","hourRanges","disabledHours","startIndex","filter","hourRange","index","temp","__spread","concat","unshift","splice","hideDisabledOptions","minuteRange","disabledMinutes","secondRange","disabledSeconds","isUpperForamt","includes","use12HoursRange","selectHour","event","hour","stopPropagation","scrollToSelected","hourListElement","selectMinute","minute","minuteListElement","selectSecond","second","secondListElement","select12Hours","use12HoursListElement","instance","duration","unit","transIndex","translateIndex","currentOption","children","scrollTo","offsetTop","calcIndex","item","element","to","scrollTop","perTick","reqAnimFrame","array","reduce","pre","onChange","onTouch","setClassMap","updateCls","_a","prefixCls","inDatePicker","isSelectedHour","viewHours","defaultViewHours","selectCurrentTimeWhenNull","isSelectedMinute","isSelectedSecond","isSelected12Hours","ngOnInit","changes","pipe","takeUntil","unsubscribe$","subscribe","valueChange","emit","ngAfterViewInit","ngOnDestroy","complete","ngOnChanges","previousValue","currentValue","hmsCls","v","type","cls","selected","disabledC","Component","encapsulation","ViewEncapsulation","None","changeDetection","ChangeDetectionStrategy","OnPush","template","UpdateCls","ChangeDetectorRef","ViewChild","Output","EventEmitter","trackByItems","TimePickerLocaleService","getLocaleConfig","locale","localeService","getValue","localeConfig","ZH_CN","providedIn","LocaleService","placeholder","EN_US","num","TimePickerComponent","_hideDisabledOptions","_autoFocus","updateAutoFocus","_disabled","_readonly","_editable","localConfig","isInit","document","body","querySelector","overlayRef","overlayPanelRef","createElement","appendChild","addEventListener","timeInput","onBlur","removeEventListener","onMouseEnter","readonly","target","display","onMouseLeave","open","editable","isOpen","close","creatPanel","openChange","cRef","location","setStyle","documentClickEvent","registerMouseDownEvent","setTimeout","setPosition","lastChild","removeChild","removeDocumentListener","destroy","mousedownEvent","parentElement","vcRef","createComponent","cfr","resolveComponentFactory","classList","add","changeDetectorRef","detectChanges","val","getBoundingClientRect","elTop","top","elLeft","left","elHeight","height","elWidth","width","window","innerHeight","innerWidth","onClickClearBtn","changeFlag","_onTouched","onValueChange","onClear","setDisabledState","isDisabled","animations","Renderer2","ViewContainerRef","ComponentFactoryResolver","HostBinding","hostCls","groupIcon","clearText","popupClassName","TimePickerModule","NgModule","declarations","entryComponents","exports","imports","CommonModule","FormsModule"],"mappings":"0uBA6BO,IAAIA,EAAW,WAQlB,OAPAA,EAAWC,OAAOC,QAAU,SAAkBC,GAC1C,IAAK,IAAIC,EAAGC,EAAI,EAAGC,EAAIC,UAAUC,OAAQH,EAAIC,EAAGD,IAE5C,IAAK,IAAII,KADTL,EAAIG,UAAUF,GACOJ,OAAOS,UAAUC,eAAeC,KAAKR,EAAGK,KAAIN,EAAEM,GAAKL,EAAEK,IAE9E,OAAON,IAEKU,MAAMC,KAAMP,YAGhC,SA+EgBQ,EAAOC,EAAGV,GACtB,IAAIW,EAAsB,mBAAXC,QAAyBF,EAAEE,OAAOC,UACjD,IAAKF,EAAG,OAAOD,EACf,IAAmBI,EAAYC,EAA3BhB,EAAIY,EAAEL,KAAKI,GAAOM,EAAK,GAC3B,IACI,WAAc,IAANhB,GAAsB,EAANA,QAAcc,EAAIf,EAAEkB,QAAQC,MAAMF,EAAGG,KAAKL,EAAEM,OAExE,MAAOC,GAASN,EAAI,CAAEM,MAAOA,WAEzB,IACQP,IAAMA,EAAEI,OAASP,EAAIZ,EAAU,YAAIY,EAAEL,KAAKP,WAExC,GAAIgB,EAAG,MAAMA,EAAEM,OAE7B,OAAOL,SC5HPM,EAAAlB,UAAAmB,gBAAA,SAAgBC,EAAiBC,GAC7BjB,KAAKkB,YAAYF,EAAIhB,KAAKiB,SAAUjB,KAAKmB,UACzCnB,KAAKiB,SAAQ/B,EAAA,GAAQ+B,GACrBjB,KAAKoB,SAASJ,EAAIhB,KAAKiB,SAAUjB,KAAKmB,WAGlCL,EAAAlB,UAAAsB,YAAR,SAAoBF,EAAiBC,EAA4BE,GAC7D,IAAK,IAAM5B,KAAK0B,EACRA,EAASpB,eAAeN,IACxB4B,EAASD,YAAYF,EAAIzB,IAK7BuB,EAAAlB,UAAAwB,SAAR,SAAiBJ,EAAiBC,EAA4BE,GAC1D,IAAK,IAAM5B,KAAK0B,EACRA,EAASpB,eAAeN,IAAM0B,EAAS1B,IACvC4B,EAASC,SAASJ,EAAIzB,wBAtBrC8B,EAAAA,sDAJ+BC,EAAAA,oBAkChCR,GAHI,SAAAA,EAAYS,GAzBJvB,KAAAiB,SAAW,GA0BfjB,KAAKmB,SAAWI,EAAiBC,eAAe,KAAM,MChC9D,IAAAC,GACWA,EAAAC,KAAO,OACPD,EAAAE,KAAO,OACPF,EAAAG,KAAO,OAClBH,GAJA,SAAAA,YAOWI,EAAAC,cAAgB,iCAChBD,EAAAE,aAAe,iCACfF,EAAAG,SAAW,sCACXH,EAAAI,QAAU,yCACVJ,EAAAK,YAAc,uCACdL,EAAAM,cAAgB,sCAChBN,EAAAO,aAAe,uCACfP,EAAAQ,iBAAmB,wCACnBR,EAAAS,cAAgB,oCAChBT,EAAAU,aAAe,sCACfV,EAAAW,iBAAmB,uCACnBX,EAAAY,eAAiB,iCACjBZ,EAAAa,cAAgB,yCAChBb,EAAAc,kBAAoB,iCAC/Bd,GAfA,SAAAA,SCIMe,EAA6BnB,EAAkBE,KAAI,IAAIE,EAAgBY,eACvEI,EAA8BpB,EAAkBE,KAAI,IAAIE,EAAgBa,cAEjEI,EAAwCC,EAAAA,QAAQ,cAAe,CACxEC,EAAAA,MACI,SACAC,EAAAA,MAAM,CACFC,QAAS,EACTC,UAAW,YACXC,gBAAiB,WAGzBJ,EAAAA,MACI,MACAC,EAAAA,MAAM,CACFC,QAAS,EACTC,UAAW,YACXC,gBAAiB,aAGzBC,EAAAA,WAAW,iBAAkB,CACzBJ,EAAAA,MAAM,CACFC,QAAS,EACTC,UAAW,cACXC,gBAAiB,UAErBE,EAAAA,QAAQV,KAEZS,EAAAA,WAAW,iBAAkB,CACzBC,EAAAA,QACIT,EACAI,EAAAA,MAAM,CACFC,QAAS,EACTC,UAAW,cACXC,gBAAiB,aAI7BC,EAAAA,WAAW,cAAe,CACtBJ,EAAAA,MAAM,CACFC,QAAS,EACTC,UAAW,cACXC,gBAAiB,YAErBE,EAAAA,QAAQV,KAEZS,EAAAA,WAAW,cAAe,CACtBC,EAAAA,QACIT,EACAI,EAAAA,MAAM,CACFC,QAAS,EACTC,UAAW,cACXC,gBAAiB,iBC5DjC,SAAgBG,EAAU3C,GACtB,QAASA,EAGb,SAAgB4C,EAAc5C,EAAe6C,GACzC,QADyC,IAAAA,IAAAA,EAAA,YACpC7C,GAAU6C,EAyCf,OAJ8B,IAA1BA,EAAOC,QAAQ,OAA4C,IAA5B9C,EAAM+C,MAAM,KAAKjE,SAChD+D,GAAkB,OAGfG,EAAAA,MAAShD,EAAO6C,EAAQ,IAAII,MAGvC,SAAgBC,EACZC,EACAN,EACAO,GAEA,YAHA,IAAAP,IAAAA,EAAA,iBACA,IAAAO,IAAAA,EAAA,OAEKD,GAAQE,MAAMF,EAAKG,WACb,GA6BJC,EAAAA,OAAUJ,EAAMN,GCrF3B,SAAgBW,EAASxD,GACrB,OAAO,MAAOA,ECFlB,IAAAyD,GAsBIA,EAAAzE,UAAA0E,MADA,WAEItE,KAAKuE,WAITF,EAAAzE,UAAA4E,KADA,WAEIxE,KAAKyE,WAGTJ,EAAAzE,UAAA2E,QAAA,WACI,GAAIvE,KAAK0E,UAAW,KACV9D,EC/BlB,SAAgB+D,EAAUC,GACtB,GAAKA,EAGL,OAAO,IAAIf,KAAK,cAAce,GD2BRD,CAAU3E,KAAK6E,WAAWC,cAAclE,OACtDZ,KAAK0E,UAAS,KAItBL,EAAAzE,UAAA6E,QAAA,WACQzE,KAAK+E,UACL/E,KAAK+E,YAIbV,EAAAzE,UAAAoF,SAAA,WACIhF,KAAK6E,WAAWC,cAAcG,QAC9BjF,KAAK6E,WAAWC,cAAcI,kBAC1B,EACAlF,KAAK6E,WAAWC,cAAclE,MAAMlB,SAM5C2E,EAAAzE,UAAAuF,WAAA,SAAWvE,GACPZ,KAAK6E,WAAWC,cAAclE,MC/CtC,SAAgB6C,EAAOM,EAAYqB,GAC/B,OAAOjB,EAAAA,OAAUJ,EAAMqB,GD8CmB3B,CAAO7C,EAAOZ,KAAKqF,SAG7DhB,EAAAzE,UAAA0F,iBAAA,SAAiBC,GACbvF,KAAK0E,UAAYa,GAGrBlB,EAAAzE,UAAA4F,kBAAA,SAAkBD,GACdvF,KAAK+E,SAAWQ,uBA1DvBE,EAAAA,UAASC,KAAA,CAAC,CACPC,SAAU,gBACVC,SAAU,SACVC,UAAW,CACP,CACIC,QAASC,EAAAA,kBACTC,YAAa3B,EACb4B,OAAO,iDAZCC,EAAAA,8CAmBfC,EAAAA,qBAEAC,EAAAA,aAAYV,KAAA,CAAC,uBAKbU,EAAAA,aAAYV,KAAA,CAAC,WAuClBrB,GAbI,SAAAA,EAAoBQ,GAAA7E,KAAA6E,WAAAA,EEhDxB,IAAAwB,GAcIA,EAAAzG,UAAA0G,eAAA,SAAe1F,EAAe2F,OACtBC,EAAQC,KAAKC,MAAM9F,EAAQ2F,GAI/B,OAAOA,GADPC,EADiBD,EAAO,EADN3F,EAAQ2F,EAEKC,EAAQ,EAAIA,IAI/CH,EAAAzG,UAAA+G,qBAAA,WACSvC,EAASpE,KAAK4G,UACf5G,KAAK4G,OAAS,IAAI/C,KAAK7D,KAAK6G,oBAIpCR,EAAAzG,UAAAkH,WAAA,SAAWlG,EAAemG,GACtB,OAAIA,IAGJ,KAAKJ,uBACL,KAAKK,QAAUpG,GAHX,MAORyF,EAAAzG,UAAAqH,SAAA,SAASrG,EAAemG,GACpB,OAAIA,IAGJ,KAAKJ,uBACL,KAAKO,MAAQtG,GAHT,MAORyF,EAAAzG,UAAAuH,WAAA,SAAWvG,EAAemG,GACtB,OAAIA,IAGJ,KAAKJ,uBACL,KAAKS,QAAUxG,GAHX,MAORyF,EAAAzG,UAAAyH,cAAA,SAAczG,GAEV,OADA,KAAK0G,YAAc1G,EACnB,MAGJzB,OAAAoI,eAAIlB,EAAAzG,UAAA,UAAO,KAAX,WACI,OAAOI,KAAKwH,SAASC,gDAGzBtI,OAAAoI,eAAIlB,EAAAzG,UAAA,QAAK,KAAT,WACI,OAAOI,KAAK4G,YAGhB,SAAUhG,GACFA,IAAUZ,KAAK4G,SACf5G,KAAK4G,OAAShG,EACVwD,EAASpE,KAAK4G,SAAWc,EAAAA,QAAQ1H,KAAK4G,SAEtC5G,KAAK2H,OAAS3H,KAAW,OAAE4H,WAC3B5H,KAAK6H,SAAW7H,KAAW,OAAE8H,aAC7B9H,KAAK+H,SAAW/H,KAAW,OAAEgI,aACzBhI,KAAKsH,aAAelD,EAASpE,KAAK2H,UAClC3H,KAAKiI,iBAAkC,IAAfjI,KAAK2H,OAAe,KAAO,OAGvD3H,KAAKkI,2CAIjB/I,OAAAoI,eAAIlB,EAAAzG,UAAA,OAAI,KAAR,WACI,OAAOI,KAAKmI,WAGhB,SAASvH,GACDA,IAAUZ,KAAKmI,QACfnI,KAAKmI,MAAQvH,oCAIrByF,EAAAzG,UAAAwI,SAAA,SAASxH,EAAyByH,GAK9B,OAJIjE,EAASiE,KACT,KAAKf,YAAW,GAEpB,KAAK1G,MAAQA,EACb,MAGJyF,EAAAzG,UAAA0I,MAAA,WACItI,KAAKkI,SACLlI,KAAKuI,UAGTpJ,OAAAoI,eAAIlB,EAAAzG,UAAA,UAAO,KAAX,WACI,QAASwE,EAASpE,KAAK2H,SAAWvD,EAASpE,KAAK6H,WAAazD,EAASpE,KAAK+H,4CAGvE1B,EAAAzG,UAAAsI,OAAR,WACIlI,KAAK2H,OAASa,UACdxI,KAAK6H,SAAWW,UAChBxI,KAAK+H,SAAWS,UAChBxI,KAAKiI,iBAAmBO,UACxBxI,KAAK4G,OAAS4B,WAGVnC,EAAAzG,UAAA2I,OAAR,WACQvI,KAAKyI,QACLzI,KAAK4G,OAAS4B,WAETpE,EAASpE,KAAK2H,QAGf3H,KAAW,OAAEiH,SAASjH,KAAU,OAFhCA,KAAK2H,OAAS3H,KAAK0I,aAKlBtE,EAASpE,KAAK6H,UAGf7H,KAAW,OAAE8G,WAAW9G,KAAY,SAFpCA,KAAK6H,SAAW7H,KAAK2I,eAKpBvE,EAASpE,KAAK+H,UAGf/H,KAAW,OAAEmH,WAAWnH,KAAY,SAFpCA,KAAK+H,SAAW/H,KAAK4I,eAKrB5I,KAAKsH,cACAlD,EAASpE,KAAKiI,oBACfjI,KAAKiI,iBAAmBjI,KAAK6I,gBAEJ,OAAzB7I,KAAKgE,iBAA4BhE,KAAW,OAAI,KAChDA,KAAW,QAAK,GAChBA,KAAW,OAAEiH,SAASjH,KAAW,SAER,OAAzBA,KAAKgE,iBAA4C,IAAhBhE,KAAW,SAC5CA,KAAW,QAAK,GAChBA,KAAW,OAAEiH,SAASjH,KAAW,UAIzCA,KAAK4G,OAAS,IAAI/C,KAAK7D,KAAW,SAEtCA,KAAKuE,WAGT8B,EAAAzG,UAAA2E,QAAA,WACIvE,KAAKwH,SAAS/G,KAAKT,KAAK4G,SAQ5BzH,OAAAoI,eAAIlB,EAAAzG,UAAA,YAAS,KAAb,WACI,OAAOI,KAAKsH,aAAelD,EAASpE,KAAK2H,QAAU3H,KAAK8I,kBAAkB9I,KAAW,QAAKA,KAAK2H,wCAQnGxI,OAAAoI,eAAIlB,EAAAzG,UAAA,YAAS,KAAb,WACI,OAAOI,KAAK2H,wCAQhBxI,OAAAoI,eAAIlB,EAAAzG,UAAA,QAAK,KAAT,WACI,OAAOI,KAAK2H,YAOhB,SAAU/G,GACFA,IAAUZ,KAAK2H,SACX3H,KAAKsH,YACwB,OAAzBtH,KAAKgE,iBAAsC,KAAVpD,EACjCZ,KAAW,OAAI,EAAoB,GACH,OAAzBA,KAAKgE,iBAAsC,KAAVpD,EACxCZ,KAAK2H,OAAS,EAEd3H,KAAK2H,OAAS/G,EAGlBZ,KAAK2H,OAAS/G,EAElBZ,KAAKuI,2CAIbpJ,OAAAoI,eAAIlB,EAAAzG,UAAA,UAAO,KAAX,WACI,OAAOI,KAAK6H,cAGhB,SAAYjH,GACJA,IAAUZ,KAAK6H,WACf7H,KAAK6H,SAAWjH,EAChBZ,KAAKuI,2CAIbpJ,OAAAoI,eAAIlB,EAAAzG,UAAA,UAAO,KAAX,WACI,OAAOI,KAAK+H,cAGhB,SAAYnH,GACJA,IAAUZ,KAAK+H,WACf/H,KAAK+H,SAAWnH,EAChBZ,KAAKuI,2CAIbpJ,OAAAoI,eAAIlB,EAAAzG,UAAA,kBAAe,KAAnB,WACI,OAAOI,KAAKiI,sBAGhB,SAAoBrH,GACZ,EAAOmI,gBAAkB/I,KAAKiI,mBAC9BjI,KAAKiI,iBAAmB,EAAOc,cAC/B/I,KAAKuI,2CAIbpJ,OAAAoI,eAAIlB,EAAAzG,UAAA,mBAAgB,KAApB,WAII,OAHAI,KAAKgJ,kBAAkB/B,SAASjH,KAAKsG,eAAetG,KAAKgJ,kBAAkBpB,WAAY5H,KAAKiJ,WAC5FjJ,KAAKgJ,kBAAkBlC,WAAW9G,KAAKsG,eAAetG,KAAKgJ,kBAAkBlB,aAAc9H,KAAKkJ,aAChGlJ,KAAKgJ,kBAAkB7B,WAAWnH,KAAKsG,eAAetG,KAAKgJ,kBAAkBhB,aAAchI,KAAKmJ,aACzFnJ,KAAKgJ,uBAGhB,SAAqBpI,GACbZ,KAAKgJ,oBAAsBpI,IAC3BZ,KAAKgJ,kBAAoBpI,EACzBZ,KAAKuI,2CAIblC,EAAAzG,UAAAwJ,oBAAA,SAAoBxI,GAEhB,OADA,KAAKiG,iBAAmBjG,EACxB,MAQJzB,OAAAoI,eAAIlB,EAAAzG,UAAA,mBAAgB,KAApB,eACUsH,EAAQlH,KAAK6G,iBAAiBe,WACpC,OAAO5H,KAAKsH,aAAelD,EAAS8C,GAASlH,KAAK8I,kBAAkB5B,GAASA,mCAQjF/H,OAAAoI,eAAIlB,EAAAzG,UAAA,mBAAgB,KAApB,WACI,OAAOI,KAAK6G,iBAAiBe,4CAOjCzI,OAAAoI,eAAIlB,EAAAzG,UAAA,eAAY,KAAhB,WACI,OAAOI,KAAK6G,iBAAiBe,4CAGjCzI,OAAAoI,eAAIlB,EAAAzG,UAAA,iBAAc,KAAlB,WACI,OAAOI,KAAK6G,iBAAiBiB,8CAGjC3I,OAAAoI,eAAIlB,EAAAzG,UAAA,iBAAc,KAAlB,WACI,OAAOI,KAAK6G,iBAAiBmB,8CAGjC7I,OAAAoI,eAAIlB,EAAAzG,UAAA,iBAAc,KAAlB,WACI,OAA2C,IAApCI,KAAK6G,iBAAiBe,WAAmB,KAAO,sCAKnDvB,EAAAzG,UAAAkJ,kBAAR,SAA0BlI,OAChBoD,EAAkBhE,KAAKiI,kBAAoBjI,KAAK6I,eACtD,MAAwB,OAApB7E,GAAoC,GAARpD,EACrBA,EAAQ,GAEK,OAApBoD,GAAsC,IAAVpD,EACrB,GAEJA,GAEfyF,GAZI,SAAAA,IA9SQrG,KAAA+H,SAA+BS,UAC/BxI,KAAA2H,OAA6Ba,UAC7BxI,KAAA6H,SAA+BW,UAC/BxI,KAAAiI,iBAAuCO,UACvCxI,KAAAsH,aAAc,EACdtH,KAAAgJ,kBAA0B,IAAInF,KAG9B7D,KAAAwH,SAAW,IAAI6B,EAAAA,QACvBrJ,KAAAiJ,SAAmB,EACnBjJ,KAAAkJ,WAAqB,EACrBlJ,KAAAmJ,WAAqB,ECazB,SAASG,EACL5J,EACA6G,EACAgD,GAGA,YAJA,IAAAhD,IAAAA,EAAA,QACA,IAAAgD,IAAAA,EAAA,GAEAhD,EAAOE,KAAK+C,KAAKjD,GACV,IAAIkD,MAAMhD,KAAK+C,KAAK9J,EAAS6G,IAC/BmD,KAAK,GACLC,IAAG,SAAEC,EAAGrK,GAAM,OAACA,EAAIgK,GAAShD,IAKrC,IAAAsD,GAyDI1K,OAAAoI,eACIsC,EAAAjK,UAAA,aAAU,KAQd,WACI,OAAOI,KAAKsH,iBAVhB,SACe1G,GACXZ,KAAKsH,cAAgB1G,EAChBZ,KAAKsH,YAGNtH,KAAKyD,OAASzD,KAAKyD,QAAUzD,KAAKyD,OAAS,IAAIqG,QAAQ,KAAM,KAAO,GAFpE9J,KAAKyD,OAASzD,KAAKyD,QAAUzD,KAAKyD,OAAS,IAAIqG,QAAQ,KAAM,KAAO,oCAQ5E3K,OAAAoI,eACIsC,EAAAjK,UAAA,aAAU,KAMd,WACI,OAAOI,KAAK+J,iBARhB,SACenJ,GACPwD,EAASxD,KACTZ,KAAK+J,YAAcnJ,oCAQ3BzB,OAAAoI,eACIsC,EAAAjK,UAAA,SAAM,KAQV,WACI,OAAOI,KAAKgK,aAVhB,SACWpJ,GACPZ,KAAKgK,QAAUpJ,EACXZ,KAAKiK,SACLjK,KAAKkK,eACLlK,KAAKmK,qDAQbhL,OAAAoI,eACIsC,EAAAjK,UAAA,mBAAgB,KAOpB,WACI,OAAOI,KAAKgJ,uBAThB,SACqBpI,GACbwD,EAASxD,KACTZ,KAAKgJ,kBAAoBpI,EACzBZ,KAAKoK,KAAKhB,oBAAoBpJ,KAAK6G,oDAQ3C1H,OAAAoI,eACIsC,EAAAjK,UAAA,gBAAa,KAOjB,WACI,OAAOI,KAAKqK,oBAThB,SACkBzJ,GACdZ,KAAKqK,eAAiBzJ,EAClBZ,KAAKqK,gBACLrK,KAAKsK,8CAQbnL,OAAAoI,eACIsC,EAAAjK,UAAA,kBAAe,KAOnB,WACI,OAAOI,KAAKuK,sBAThB,SACoB3J,GACZwD,EAASxD,KACTZ,KAAKuK,iBAAmB3J,EACxBZ,KAAKwK,iDAQbrL,OAAAoI,eACIsC,EAAAjK,UAAA,kBAAe,KAOnB,WACI,OAAOI,KAAKyK,sBAThB,SACoB7J,GACZwD,EAASxD,KACTZ,KAAKyK,iBAAmB7J,EACxBZ,KAAK0K,iDAUbvL,OAAAoI,eACIsC,EAAAjK,UAAA,SAAM,KA2BV,WACI,OAAOI,KAAK2K,aA7BhB,SACW/J,GACP,GAAIwD,EAASxD,GAAQ,CACjBZ,KAAK2K,QAAU/J,EACfZ,KAAK4K,eAAiB,MAChBC,EAAU,IAAIC,IAAIlK,GACxBZ,KAAK+K,YAAcF,EAAQG,IAAI,MAAQH,EAAQG,IAAI,KACnDhL,KAAKiL,cAAgBJ,EAAQG,IAAI,KACjChL,KAAKkL,cAAgBL,EAAQG,IAAI,KAC7BhL,KAAK+K,aACL/K,KAAK4K,iBAEL5K,KAAKiL,eACLjL,KAAK4K,iBAEL5K,KAAKkL,eACLlL,KAAK4K,iBAEL5K,KAAKqI,aACLrI,KAAK4K,iBACL5K,KAAKmL,gBAGTnL,KAAKoL,WAAmC,GAAtBpL,KAAK4K,eACvB5K,KAAKqL,IAAIC,iDAQjBnM,OAAAoI,eACIsC,EAAAjK,UAAA,WAAQ,KAQZ,WACI,OAAOI,KAAKuL,eAVhB,SACa3K,GACLwD,EAASxD,KACTZ,KAAKuL,UAAY3K,EACjBZ,KAAKoK,KAAKnB,SAAWrI,EACrBZ,KAAKsK,+CAQbnL,OAAAoI,eACIsC,EAAAjK,UAAA,aAAU,KAQd,WACI,OAAOI,KAAKwL,iBAVhB,SACe5K,GACPwD,EAASxD,KACTZ,KAAKwL,YAAc5K,EACnBZ,KAAKoK,KAAKlB,WAAatI,EACvBZ,KAAKwK,iDAQbrL,OAAAoI,eACIsC,EAAAjK,UAAA,aAAU,KAQd,WACI,OAAOI,KAAKyL,iBAVhB,SACe7K,GACPwD,EAASxD,KACTZ,KAAKyL,YAAc7K,EACnBZ,KAAKoK,KAAKjB,WAAavI,EACvBZ,KAAK0K,iDAQbvL,OAAAoI,eACIsC,EAAAjK,UAAA,QAAK,KAYT,WAEI,OADAI,KAAK4G,OAAS5G,KAAKoK,KAAKxF,KACjB5E,KAAK4G,YAfhB,SACUhG,GACN,GAAIwD,EAASxD,GAAQ,CACjBZ,KAAKoK,KAAKxF,KAAOhE,MACXgG,EAASpD,EAAcxD,KAAKoK,KAAKxF,KAAM5E,KAAKyD,QAClDzD,KAAKoK,KAAKhC,SAASxB,EAAQ5G,KAAKqI,YAChCrI,KAAK0L,aACL1L,KAAKqL,IAAIC,oBAETtL,KAAKoK,KAAK/C,cAAcrH,KAAKqI,6CAYrCwB,EAAAjK,UAAAuK,iBAAA,WAMQnK,KAAK2L,4BACL3L,KAAK2L,2BAA2B3G,YAIxC6E,EAAAjK,UAAA0K,WAAA,WAAA,IAAAsB,EAAA5L,KACQ6L,EAAa,GACbC,EAAgB9L,KAAK8L,eAAiB9L,KAAK8L,gBAC3CC,EAAa,EAiCjB,GAhCI/L,KAAKqI,aACLwD,EAAa,GAOLC,EANJA,IACkC,OAA9B9L,KAAKoK,KAAKpG,gBAKM8H,EACXE,OAAM,SAACzM,GAAK,OAAK,IAALA,IACZoK,IAAG,SAACpK,GAAK,OAAK,GAAJA,EAASA,EAAI,GAAKA,IAMjBuM,EACXE,OAAM,SAACzM,GAAK,OAAAA,EAAI,IAAY,KAANA,IACtBoK,IAAG,SAACpK,GAAK,OAAO,KAANA,GAAkB,IAANA,EAAU,GAAKA,KAGlDwM,EAAa,GAEjB/L,KAAKiM,UAAY3C,EAAUuC,EAAY7L,KAAKiJ,SAAU8C,GAAYpC,IAAG,SACjErJ,GACI,MAAO,CACH4L,MAAO5L,EACPyG,SACI6E,EAAKE,gBAA+C,IAA9BA,EAAcpI,QAAQpD,MAKxDN,KAAKqI,YAC+C,KAApDrI,KAAKiM,UAAUjM,KAAKiM,UAAUvM,OAAS,GAAGwM,MAC5C,KACQC,EThMlB,SAAgBC,IACZ,IAAK,IAAI5L,EAAK,GAAIjB,EAAI,EAAGA,EAAIE,UAAUC,OAAQH,IAC3CiB,EAAKA,EAAG6L,OAAOpM,EAAOR,UAAUF,KACpC,OAAOiB,ES6LW4L,CAAOpM,KAAKiM,WACtBE,EAAKG,QAAQH,EAAKA,EAAKzM,OAAS,IAChCyM,EAAKI,OAAOJ,EAAKzM,OAAS,EAAG,GAC7BM,KAAKiM,UAAYE,EAKrBnM,KAAKiM,UAAYjM,KAAKiM,UAAUD,OAAM,SAAExM,GACpC,QAASoM,EAAKY,qBAAuBhN,EAAEuH,aAI/C8C,EAAAjK,UAAA4K,aAAA,WAAA,IAAAoB,EAAA5L,KACIA,KAAKyM,YAAcnD,EAAU,GAAItJ,KAAKkJ,YAAYS,IAAG,SAACrJ,GAClD,MAAO,CACH4L,MAAO5L,EACPyG,SACI6E,EAAKc,kBACkD,IAAvDd,EAAKc,gBAAgBd,EAAKxB,KAAU,OAAG1G,QAAQpD,MAK3DN,KAAKyM,YAAczM,KAAKyM,YAAYT,OAAM,SAAExM,GACxC,QAASoM,EAAKY,qBAAuBhN,EAAEuH,aAI/C8C,EAAAjK,UAAA8K,aAAA,WAAA,IAAAkB,EAAA5L,KACIA,KAAK2M,YAAcrD,EAAU,GAAItJ,KAAKmJ,YAAYQ,IAAG,SAACrJ,GAClD,MAAO,CACH4L,MAAO5L,EACPyG,SACI6E,EAAKgB,kBAIa,IAHlBhB,EAAKgB,gBACDhB,EAAKxB,KAAU,MACfwB,EAAKxB,KAAY,SACnB1G,QAAQpD,MAKtBN,KAAK2M,YAAc3M,KAAK2M,YAAYX,OAAM,SAAExM,GACxC,QAASoM,EAAKY,qBAAuBhN,EAAEuH,aAI/C8C,EAAAjK,UAAAuL,aAAA,WAAA,IAAAS,EAAA5L,KACU6M,EAAgB7M,KAAK2K,QAAQmC,SAAS,KAC5C9M,KAAK+M,gBAAkB,CACnB,CACIb,MAAO,EACPtL,MAAOiM,EAAgB,KAAO,MAElC,CACIX,MAAO,EACPtL,MAAOiM,EAAgB,KAAO,OAKtC7M,KAAK+M,gBAAkB/M,KAAK+M,gBAAgBf,OAAM,SAAExM,GAChD,OAAQoM,EAAKY,uBAIrB3C,EAAAjK,UAAA8L,WAAA,WACI1L,KAAKsK,aACLtK,KAAKwK,eACLxK,KAAK0K,eACL1K,KAAKmL,gBAGTtB,EAAAjK,UAAAoN,WAAA,SACIC,EACAC,GAEAD,EAAME,kBACNnN,KAAKoK,KAAKnD,SAASiG,EAAKhB,MAAOgB,EAAKnG,UACpC/G,KAAKoN,iBACDpN,KAAKqN,gBAAgBvI,cACrBoI,EAAKhB,MACL,IACA,QAGAlM,KAAKuK,kBACLvK,KAAKwK,gBAELxK,KAAKyK,kBAAoBzK,KAAKuK,mBAC9BvK,KAAK0K,gBAIbb,EAAAjK,UAAA0N,aAAA,SACIL,EACAM,GAEAN,EAAME,kBACNnN,KAAKoK,KAAKtD,WAAWyG,EAAOrB,MAAOqB,EAAOxG,UAC1C/G,KAAKoN,iBACDpN,KAAKwN,kBAAkB1I,cACvByI,EAAOrB,MACP,IACA,UAEAlM,KAAKyK,kBACLzK,KAAK0K,gBAIbb,EAAAjK,UAAA6N,aAAA,SACIR,EACAS,GAEAT,EAAME,kBACNnN,KAAKoK,KAAKjD,WAAWuG,EAAOxB,MAAOwB,EAAO3G,UAC1C/G,KAAKoN,iBACDpN,KAAK2N,kBAAkB7I,cACvB4I,EAAOxB,MACP,IACA,WAIRrC,EAAAjK,UAAAgO,cAAA,SACIX,EACArM,GAEAqM,EAAME,kBACNnN,KAAKoK,KAAKpG,gBAAkBpD,EAAMA,MAC9BZ,KAAKqK,gBACLrK,KAAKsK,aAELtK,KAAKuK,kBACLvK,KAAKwK,eAELxK,KAAKyK,kBACLzK,KAAK0K,eAET1K,KAAKoN,iBACDpN,KAAK6N,sBAAsB/I,cAC3BlE,EAAMsL,MACN,IACA,YAIRrC,EAAAjK,UAAAwN,iBAAA,SACIU,EACA5B,EACA6B,EACAC,QADA,IAAAD,IAAAA,EAAA,OAGME,EAAajO,KAAKkO,eAAehC,EAAO8B,GACxCG,EAAiBL,EAASM,SAAS,GAAGA,SAASH,IACjDH,EAASM,SAAS,GAAGA,SAAS,GAClCpO,KAAKqO,SAASP,EAAUK,EAAcG,UAAWP,IAGrDlE,EAAAjK,UAAAsO,eAAA,SAAehC,EAAe8B,GAC1B,GAAa,SAATA,EAAiB,KACXlC,EAAgB9L,KAAK8L,eAAiB9L,KAAK8L,gBACjD,OAAO9L,KAAKuO,UACRzC,EACA9L,KAAKiM,UAAUtC,IAAG,SAAC6E,GAAQ,OAAAA,EAAKtC,QAAOxI,QAAQwI,IAEhD,GAAa,WAAT8B,EAAmB,KACpBtB,EACF1M,KAAK0M,iBAAmB1M,KAAK0M,gBAAgB1M,KAAKoK,KAAU,OAChE,OAAOpK,KAAKuO,UACR7B,EACA1M,KAAKyM,YAAY9C,IAAG,SAAC6E,GAAQ,OAAAA,EAAKtC,QAAOxI,QAAQwI,IAElD,GAAa,WAAT8B,EAWP,OAAOhO,KAAKuO,UACR,GACAvO,KAAK+M,gBAAgBpD,IAAG,SAAC6E,GAAQ,OAAAA,EAAKtC,QAAOxI,QAAQwI,QAXnDU,EACF5M,KAAK4M,iBACL5M,KAAK4M,gBAAgB5M,KAAKoK,KAAU,MAAGpK,KAAKoK,KAAY,SAC5D,OAAOpK,KAAKuO,UACR3B,EACA5M,KAAK2M,YAAYhD,IAAG,SAAC6E,GAAQ,OAAAA,EAAKtC,QAAOxI,QAAQwI,KAW7DrC,EAAAjK,UAAAyO,SAAA,SAASI,EAAsBC,EAAYX,GAA3C,IAAAnC,EAAA5L,KACI,GAAI+N,GAAY,EACZU,EAAQE,UAAYD,MADxB,KAKME,GADaF,EAAKD,EAAQE,WACFZ,EAAY,GAE1Cc,EAAAA,aAAY,WACRJ,EAAQE,UAAYF,EAAQE,UAAYC,EACpCH,EAAQE,YAAcD,GAG1B9C,EAAKyC,SAASI,EAASC,EAAIX,EAAW,QAI9ClE,EAAAjK,UAAA2O,UAAA,SAAUO,EAAiB5C,GACvB,OAAI4C,GAASA,EAAMpP,QAAUM,KAAKwM,oBAE1BN,EACA4C,EAAMC,OAAM,SAAEC,EAAKpO,GACf,OAAOoO,GAAOpO,EAAQsL,EAAQ,EAAI,IACnC,GAGAA,GAILrC,EAAAjK,UAAA2E,QAAV,WACQvE,KAAKiP,UACLjP,KAAKiP,SAASjP,KAAKoK,KAAKxF,OAItBiF,EAAAjK,UAAA6E,QAAV,WACQzE,KAAKkP,SACLlP,KAAKkP,WAILrF,EAAAjK,UAAAuP,YAAR,iBACInP,KAAKoP,UAAUrO,gBAAgBf,KAAKyO,QAAQ3J,gBAAauK,EAAA,IACpD,GAAGrP,KAAKsP,YAAc,EACvBD,EAAIrP,KAAKsP,UAAS,WAAWtP,KAAK4K,iBAAmB5K,KAChDuP,aAGLF,EAAIrP,KAAKsP,UAAS,WAAYtP,KAAK4K,eAAiB,EACpDyE,EAAIrP,KAAKsP,UAAS,0BAA0BtP,KAAKuP,kBAMzD1F,EAAAjK,UAAA4P,eAAA,SAAetC,GACX,OACIA,EAAKhB,QAAUlM,KAAKoK,KAAKqF,YACvBrL,EAASpE,KAAKoK,KAAKqF,YACjBvC,EAAKhB,QAAUlM,KAAKoK,KAAKsF,kBAAoB1P,KAAK2P,2BAI9D9F,EAAAjK,UAAAgQ,iBAAA,SAAiBrC,GACb,OACIA,EAAOrB,QAAUlM,KAAKoK,KAAKpD,UACzB5C,EAASpE,KAAKoK,KAAKpD,UACjBuG,EAAOrB,QAAUlM,KAAKoK,KAAKzB,gBAAkB3I,KAAK2P,2BAI9D9F,EAAAjK,UAAAiQ,iBAAA,SAAiBnC,GACb,OACIA,EAAOxB,QAAUlM,KAAKoK,KAAKhD,UACzBhD,EAASpE,KAAKoK,KAAKhD,UACjBsG,EAAOxB,QAAUlM,KAAKoK,KAAKxB,gBAAkB5I,KAAK2P,2BAI9D9F,EAAAjK,UAAAkQ,kBAAA,SAAkBlP,GACd,OACIA,EAAMA,MAAMmI,gBAAkB/I,KAAKoK,KAAKpG,kBACtCI,EAASpE,KAAKoK,KAAKpG,kBACjBpD,EAAMA,MAAMmI,gBAAkB/I,KAAKoK,KAAKvB,gBAAkB7I,KAAK2P,2BAI3E9F,EAAAjK,UAAAsK,aAAA,WAqDI,GAnDIlK,KAAK+K,aAAe/K,KAAKqN,kBACrBjJ,EAASpE,KAAKoK,KAAKqF,WACnBzP,KAAKoN,iBACDpN,KAAKqN,gBAAgBvI,cACrB9E,KAAKoK,KAAc,UACnB,EACA,QAGJpK,KAAKoN,iBACDpN,KAAKqN,gBAAgBvI,cACrB9E,KAAKoK,KAAKsF,iBACV,EACA,SAIR1P,KAAKiL,eAAiBjL,KAAKwN,oBACvBpJ,EAASpE,KAAKoK,KAAKpD,SACnBhH,KAAKoN,iBACDpN,KAAKwN,kBAAkB1I,cACvB9E,KAAKoK,KAAY,QACjB,EACA,UAGJpK,KAAKoN,iBACDpN,KAAKwN,kBAAkB1I,cACvB9E,KAAKoK,KAAKzB,eACV,EACA,WAIR3I,KAAKkL,eAAiBlL,KAAK2N,oBACvBvJ,EAASpE,KAAKoK,KAAKhD,SACnBpH,KAAKoN,iBACDpN,KAAK2N,kBAAkB7I,cACvB9E,KAAKoK,KAAY,QACjB,EACA,UAGJpK,KAAKoN,iBACDpN,KAAK2N,kBAAkB7I,cACvB9E,KAAKoK,KAAKxB,eACV,EACA,WAIR5I,KAAKqI,YAAcrI,KAAK6N,sBAAuB,KAIzC3B,EAA0B,QAHV9H,EAASpE,KAAKoK,KAAKpG,iBACnChE,KAAKoK,KAAKpG,gBACVhE,KAAKoK,KAAKvB,gBACuB,EAAI,EAC3C7I,KAAKoN,iBACDpN,KAAK6N,sBAAsB/I,cAC3BoH,EACA,EACA,aAYZrC,EAAAjK,UAAAmQ,SAAA,WAAA,IAAAnE,EAAA5L,KACQA,KAAKuP,eACLvP,KAAKsP,UAAY,wBAGrBtP,KAAKoK,KAAK4F,QAAQC,KAAKC,EAAAA,UAAUlQ,KAAKmQ,eAAeC,UAAS,WAE/CxE,EAAKxB,KAAKlD,MACR0E,EAAKxB,KAAKpD,QACV4E,EAAKxB,KAAKhD,QAEvBwE,EAAKxB,KAAKxF,KAAOd,EACb8H,EAAKxB,KAAKxJ,MACVgL,EAAKnI,OACLmI,EAAKxB,KAAKpG,iBAEd4H,EAAKrH,UACLqH,EAAKnH,UACLmH,EAAKyE,YAAYC,KAAK1E,EAAKxB,KAAKxF,QAEpC5E,KAAK0L,aACL1L,KAAKmP,eAGTtF,EAAAjK,UAAA2Q,gBAAA,WACQvQ,KAAKiK,QACLjK,KAAKkK,gBAIbL,EAAAjK,UAAA4Q,YAAA,WACIxQ,KAAKmQ,aAAa1P,OAClBT,KAAKmQ,aAAaM,YAGtB5G,EAAAjK,UAAA8Q,YAAA,SAAYV,GACA,IAAA3H,EAAA2H,EAAA3H,WAEJA,IACCA,EAAWsI,eACZtI,EAAWuI,eAEX5Q,KAAKmL,eACLnL,KAAK4K,mBAIbf,EAAAjK,UAAAuF,WAAA,SAAWvE,GACPZ,KAAKoK,KAAKxF,KAAOhE,MACXgG,EAASpD,EAAcxD,KAAKoK,KAAKxF,KAAM5E,KAAKyD,QAClDzD,KAAKoK,KAAKhC,SAASxB,EAAQ5G,KAAKqI,YAC5BzH,GAASZ,KAAKiK,QACdjK,KAAKkK,eAETlK,KAAK0L,aACL1L,KAAKqL,IAAIC,gBAGbzB,EAAAjK,UAAA0F,iBAAA,SAAiBC,GACbvF,KAAKiP,SAAW1J,GAGpBsE,EAAAjK,UAAA4F,kBAAA,SAAkBD,GACdvF,KAAKkP,QAAU3J,GAGnBsE,EAAAjK,UAAAiR,OAAA,SAAOC,EAAGC,OACFC,EAAM,GACJC,EAAW,IAAIjR,KAAKsP,UAAS,2BAC7B4B,EAAY,IAAIlR,KAAKsP,UAAS,2BAiBpC,OAda,MAATyB,EACI/Q,KAAKwP,eAAesB,GACR,MAATC,EACH/Q,KAAK4P,iBAAiBkB,GACV,MAATC,EACH/Q,KAAK8P,kBAAkBgB,GAEvB9Q,KAAK6P,iBAAiBiB,MAI1BE,GAAOC,GAGE,MAATF,GAIAD,EAAE/J,WACFiK,GAAOE,GAJAF,uBAxtBlBG,EAAAA,UAASzL,KAAA,CAAC,CACP0L,cAAeC,EAAAA,kBAAkBC,KACjCC,gBAAiBC,EAAAA,wBAAwBC,OACzC9L,SAAU,oBACVC,SAAU,kBACV8L,SAAA,wlEAEA7L,UAAW,CACP8L,EACA,CACI7L,QAASC,EAAAA,kBACTC,YAAa6D,EACb5D,OAAO,iDAlDfC,EAAAA,kBAiB+ByL,SAnB/BC,EAAAA,yEAkFCC,EAAAA,UAASnM,KAAA,CAACrB,4BAGVwN,EAAAA,UAASnM,KAAA,CAAC,8CACVmM,EAAAA,UAASnM,KAAA,CAAC,gDACVmM,EAAAA,UAASnM,KAAA,CAAC,oDACVmM,EAAAA,UAASnM,KAAA,CAAC,+CAEVS,EAAAA,qBACAA,EAAAA,mCACAA,EAAAA,yBACAA,EAAAA,2BACAA,EAAAA,yCAEAA,EAAAA,0BACAA,EAAAA,0BAYAA,EAAAA,sBAWAA,EAAAA,gCAaAA,EAAAA,6BAYAA,EAAAA,+BAYAA,EAAAA,+BAYAA,EAAAA,sBAcAA,EAAAA,wBAgCAA,EAAAA,0BAaAA,EAAAA,0BAaAA,EAAAA,qBAaAA,EAAAA,2BAiBA2L,EAAAA,UA8fLjI,GA1GI,SAAAA,EACW4E,EACCW,EACD/D,GAFArL,KAAAyO,QAAAA,EACCzO,KAAAoP,UAAAA,EACDpP,KAAAqL,IAAAA,EA7mBHrL,KAAAuL,UAAY,EACZvL,KAAAwL,YAAc,EACdxL,KAAAyL,YAAc,EACdzL,KAAAmQ,aAAe,IAAI9G,EAAAA,QAGnBrJ,KAAA2K,QAAU,WAIV3K,KAAAgJ,kBAAoB,IAAInF,KACxB7D,KAAAgK,SAAU,EACVhK,KAAA+J,aAAc,EACd/J,KAAA4G,OAAS,GAEjB5G,KAAAsP,UAAY,oBACZtP,KAAAoK,KAAO,IAAI/D,EACXrG,KAAA+K,aAAc,EACd/K,KAAAiL,eAAgB,EAChBjL,KAAAkL,eAAgB,EAChBlL,KAAA4K,eAAiB,EAaR5K,KAAAuP,cAAe,EAEfvP,KAAAwM,qBAAsB,EAItBxM,KAAA2P,2BAA4B,EAqFrC3P,KAAAoL,WAAa,EA0FHpL,KAAAqQ,YAAc,IAAI0B,EAAAA,aAEpB/R,KAAAsH,aAAc,EAwftBtH,KAAAgS,aAAY,SAAI9F,EAAOsC,GACnB,OAAOtC,GC5wBf,IAAA+F,GAgBWA,EAAArS,UAAAsS,gBAAP,eACUC,EAASnS,KAAKoS,cAAcC,SAAS,UAC3C,OAAIF,GAAUnS,KAAKsS,aAAaH,GACrBnS,KAAKsS,aAAaH,GAElBnS,KAAKsS,aAAaC,2BAlBpClR,EAAAA,WAAUqE,KAAA,CAAC,CACR8M,WAAY,oDAHPC,EAAAA,kJAcL,SAAAR,EAAoBG,GAAApS,KAAAoS,cAAAA,EARZpS,KAAAsS,aAAe,CACnBC,MAAU,CACNG,YAAa,SAEjBC,MAAU,CACND,YAAa,6BCArBE,EAAM,EACVC,GAkDI1T,OAAAoI,eACIsL,EAAAjT,UAAA,aAAU,KAmBd,WACI,OAAOI,KAAKsH,iBArBhB,SACe1G,GACXZ,KAAKsH,cAAgB1G,EACjBA,GAASZ,KAAKyD,OACdzD,KAAKyD,OAASzD,KAAKyD,OAAOqG,QAAQ,KAAM,MAChClJ,GAASZ,KAAKyD,SACtBzD,KAAKyD,OAASzD,KAAKyD,OAAOqG,QAAQ,KAAM,MAGxC9J,KAAKsH,cACAtH,KAAKyD,QAG4B,IAA9BzD,KAAKyD,OAAOC,QAAQ,OACpB1D,KAAKyD,OAASzD,KAAKyD,OAAS,MAHhCzD,KAAKyD,OAAS,+CAgB1BtE,OAAAoI,eACIsL,EAAAjT,UAAA,sBAAmB,KAIvB,WACI,OAAOI,KAAK8S,0BANhB,SACwBlS,GACpBZ,KAAK8S,qBAAuBvP,EAAU3C,oCAO1CzB,OAAAoI,eACIsL,EAAAjT,UAAA,aAAU,KAId,WACI,OAAOI,KAAK+J,iBANhB,SACenJ,GACXZ,KAAK+J,YAAcxG,EAAU3C,oCAOjCzB,OAAAoI,eACIsL,EAAAjT,UAAA,YAAS,KAKb,WACI,OAAOI,KAAK+S,gBAPhB,SACcnS,GACVZ,KAAK+S,WAAaxP,EAAU3C,GAC5BZ,KAAKgT,mDAOT7T,OAAAoI,eACIsL,EAAAjT,UAAA,WAAQ,KAIZ,WACI,OAAOI,KAAKiT,eANhB,SACarS,GACTZ,KAAKiT,UAAY1P,EAAU3C,oCAM/BzB,OAAAoI,eACIsL,EAAAjT,UAAA,WAAQ,KAIZ,WACI,OAAOI,KAAKkT,eANhB,SACatS,GACTZ,KAAKkT,UAAY3P,EAAU3C,oCAM/BzB,OAAAoI,eACIsL,EAAAjT,UAAA,WAAQ,KAIZ,WACI,OAAOI,KAAKmT,eANhB,SACavS,GACTZ,KAAKmT,UAAY5P,EAAU3C,oCAO/BzB,OAAAoI,eAAIsL,EAAAjT,UAAA,QAAK,KAOT,WACI,OAAOI,KAAK4G,YARhB,SAAUhG,GACNZ,KAAK4G,OAAShG,EACVZ,KAAK0E,WACL1E,KAAK0E,UAAU1E,KAAKY,wCAyB5BiS,EAAAjT,UAAAmQ,SAAA,WACI,GAAI/P,KAAKoS,cAAe,KACdgB,EAAcpT,KAAKoS,cAAcF,kBACvClS,KAAK0S,YAAc1S,KAAK0S,YACpB1S,KAAK0S,YACLU,EAAYV,YAAcU,EAAYV,YAAc,UAIhEG,EAAAjT,UAAA8Q,YAAA,SAAYV,IACAA,EAAA3H,YACYrI,KAAKyD,SAAwC,IAA9BzD,KAAKyD,OAAOC,QAAQ,MAC/C1D,KAAKqI,aACLrI,KAAKyD,OAASzD,KAAKyD,OAAS,OAKxCoP,EAAAjT,UAAA2Q,gBAAA,WAAA,IAAA3E,EAAA5L,KACIA,KAAKqT,QAAS,EACdrT,KAAKgT,kBACAM,SAASC,KAAKC,cAAc,yBAY7BxT,KAAKyT,WAAaH,SAASC,KAAKC,cAC5B,wBAEJxT,KAAK0T,gBAAkB1T,KAAKmB,SAASwS,cAAc,OACnD3T,KAAKmB,SAASC,SACVpB,KAAK0T,gBACL,iBAAiBd,KAErB5S,KAAKmB,SAASyS,YAAY5T,KAAKyT,WAAYzT,KAAK0T,mBAnBhD1T,KAAKyT,WAAazT,KAAKmB,SAASwS,cAAc,OAC9C3T,KAAK0T,gBAAkB1T,KAAKmB,SAASwS,cAAc,OACnD3T,KAAKmB,SAASC,SAASpB,KAAKyT,WAAY,uBACxCzT,KAAKmB,SAASC,SACVpB,KAAK0T,gBACL,iBAAiBd,KAErB5S,KAAKmB,SAASyS,YAAY5T,KAAKyT,WAAYzT,KAAK0T,iBAChDJ,SAASC,KAAKK,YAAY5T,KAAKyT,aAenCzT,KAAKyT,WAAWI,iBAAiB,QAAO,SAAGtT,GACvCA,EAAE4M,oBAGNnN,KAAK8T,UAAUhP,cAAc+O,iBAAiB,OAAM,WAChDjI,EAAKmI,YAIblB,EAAAjT,UAAA4Q,YAAA,WACIxQ,KAAK8T,UAAUhP,cAAckP,oBAAoB,OAAQhU,KAAK+T,SAIlElB,EAAAjT,UAAAqU,aADA,SACahH,IAELjN,KAAK8T,UAAUhP,cAAclE,OAC5BZ,KAAKkU,UACLlU,KAAK+G,WAENkG,EAAMkH,OAAOX,cAAc,sBAAsBvQ,MAAMmR,QAAU,KAKzEvB,EAAAjT,UAAAyU,aADA,SACapH,GACJjN,KAAKkU,UAAalU,KAAK+G,WACxBkG,EAAMkH,OAAOX,cAAc,sBAAsBvQ,MAAMmR,QAAU,SAKzEvB,EAAAjT,UAAA0U,KAAA,SAAKrH,GAAL,IAAArB,EAAA5L,KACIiN,EAAME,kBAEFnN,KAAK+G,WAAc/G,KAAKuU,UAAYvU,KAAKkU,WAIzClU,KAAKwU,OACLxU,KAAKyU,SAITzU,KAAK0U,aACL1U,KAAKwU,QAAS,EACdxU,KAAK2U,WAAWrE,KAAKtQ,KAAKwU,QAC1BxU,KAAKmB,SAASyS,YACV5T,KAAK0T,gBACL1T,KAAK4U,KAAKC,SAAS/P,eAGvB9E,KAAKmB,SAAS2T,SAAS9U,KAAKyT,WAAY,UAAW,SACnDzT,KAAK+U,mBAAqB/U,KAAKgV,yBAE/BC,WAAU,WACNrJ,EAAKsJ,cACLtJ,EAAKzK,SAASC,SAASwK,EAAKgJ,KAAKC,SAAS/P,cAAe,gBAC1D,OAGP+N,EAAAjT,UAAA6U,MAAA,WAII,IAHAzU,KAAKwU,QAAS,EACdxU,KAAK4U,KAAK9G,SAAS7D,QAAS,EAC5BjK,KAAKmB,SAASD,YAAYlB,KAAK4U,KAAKC,SAAS/P,cAAe,eACrD9E,KAAK0T,gBAAgByB,WACxBnV,KAAK0T,gBAAgB0B,YAAYpV,KAAK0T,gBAAgByB,WAE1DnV,KAAK2U,WAAWrE,KAAKtQ,KAAKwU,QAC1BxU,KAAKiF,QACLjF,KAAKqV,yBAEDrV,KAAK4U,OACL5U,KAAK4U,KAAKU,UACVtV,KAAK4U,KAAO,OAIZ/B,EAAAjT,UAAAoV,uBAAR,WAAA,IAAApJ,EAAA5L,KACUuV,EAAc,SAAIhV,GAChBA,EAAE4T,SAAWvI,EAAK8H,gBAAgB8B,gBAClC5J,EAAKzK,SAAS2T,SAASlJ,EAAK6H,WAAY,UAAW,QACnD7H,EAAK6I,UAMb,OAHAnB,SAASC,KAAKM,iBAAiB,YAAa0B,GAAgB,GAC5DjC,SAASC,KAAKM,iBAAiB,aAAc0B,GAAgB,GAE7D,WACIjC,SAASC,KAAKS,oBAAoB,YAAauB,GAAgB,GAC/DjC,SAASC,KAAKS,oBAAoB,aAAcuB,GAAgB,KAIhE1C,EAAAjT,UAAAyV,uBAAR,WACQrV,KAAK+U,qBACL/U,KAAK+U,qBACL/U,KAAK+U,mBAAqB,OAGlClC,EAAAjT,UAAA8U,WAAA,WAAA,IAAA9I,EAAA5L,KACsB,OAAdA,KAAK4U,MACL5U,KAAKyV,MAAMnN,QACXtI,KAAK4U,KAAO5U,KAAKyV,MAAMC,gBACnB1V,KAAK2V,IAAIC,wBAAwB/L,IAGrC7J,KAAK4U,KAAKC,SAAS/P,cAAc+Q,UAAUC,IAAI,eAG/C9V,KAAK4U,KAAKmB,kBAAkBC,gBAE5BhW,KAAK4U,KAAK9G,SAASrK,OAASzD,KAAKyD,OACjCzD,KAAK4U,KAAK9G,SAAS7E,SAAWjJ,KAAKiJ,SACnCjJ,KAAK4U,KAAK9G,SAAS5E,WAAalJ,KAAKkJ,WACrClJ,KAAK4U,KAAK9G,SAAS3E,WAAanJ,KAAKmJ,WACrCnJ,KAAK4U,KAAK9G,SAAShC,cAAgB9L,KAAK8L,cACxC9L,KAAK4U,KAAK9G,SAASpB,gBAAkB1M,KAAK0M,gBAC1C1M,KAAK4U,KAAK9G,SAASlB,gBAAkB5M,KAAK4M,gBAC1C5M,KAAK4U,KAAK9G,SAAStB,oBAAsBxM,KAAKwM,oBAC9CxM,KAAK4U,KAAK9G,SAASzF,WAAarI,KAAKqI,WACrCrI,KAAK4U,KAAK9G,SAAS7D,OAASjK,KAAKwU,OACjCxU,KAAK4U,KAAK9G,SAASjH,iBAAmB7G,KAAK6G,iBAC3C7G,KAAK4U,KAAK9G,SAASlN,MAAQZ,KAAKY,MAChCZ,KAAK4U,KAAK9G,SAASuC,YAAYD,UAAS,SAAE6F,GACtCrK,EAAKhL,MAAQqV,EACbrK,EAAKP,IAAI2K,gBACTpK,EAAKyE,YAAYC,KAAK2F,MAG1BjW,KAAK4U,KAAK9G,SAASlN,MAAQZ,KAAKY,OAIxCiS,EAAAjT,UAAAsV,YAAA,WACU,IAAA7F,EAAArP,KAAAyO,QAAA3J,cAAAoR,wBACFC,EAAA9G,EAAA+G,IACAC,EAAAhH,EAAAiH,KACAC,EAAAlH,EAAAmH,OACAC,EAAApH,EAAAqH,MAIAP,EADgB,IACM,GAAKQ,OAAOC,YAClC5W,KAAKmB,SAAS2T,SAAS9U,KAAK4U,KAAKC,SAAS/P,cAAe,MAAUqR,EAFnD,IAEsE,MAEtFnW,KAAKmB,SAAS2T,SAAS9U,KAAK4U,KAAKC,SAAS/P,cAAe,MAAUqR,EAAQI,EAAQ,UAGjFnL,EAAapL,KAAK4U,KAAK9G,SAAS1C,WAEtC,GAAIuL,OAAOE,WAAaR,EAASjL,EAAY,KACnC9K,EAAIqW,OAAOE,WAAaR,EAASI,EACvCzW,KAAKmB,SAAS2T,SAAS9U,KAAK4U,KAAKC,SAAS/P,cAAe,QAAYxE,EAAC,WAEtEN,KAAKmB,SAAS2T,SAAS9U,KAAK4U,KAAKC,SAAS/P,cAAe,OAAWuR,EAAM,MAG9ErW,KAAK4U,KAAK9G,SAAS7D,QAAS,GAGhC4I,EAAAjT,UAAAoT,gBAAA,aAGAH,EAAAjT,UAAAkX,gBAAA,WACI9W,KAAKY,MAAQ,KACbZ,KAAK4U,KAAK9G,SAAS1D,KAAK9B,SAG5BuK,EAAAjT,UAAAqF,MAAA,WACQjF,KAAK8T,UAAUhP,eACf9E,KAAK8T,UAAUhP,cAAcG,SAIrC4N,EAAAjT,UAAA4E,KAAA,WACQxE,KAAK8T,UAAUhP,eACf9E,KAAK8T,UAAUhP,cAAcN,QAGrCqO,EAAAjT,UAAAmU,OAAA,WACI,GAAI/T,KAAKY,MAAO,KACNmD,EAAOP,EAAcxD,KAAKY,MAAOZ,KAAKyD,QACxCzD,KAAK4U,OACL5U,KAAK4U,KAAK9G,SAASlN,MAAQZ,KAAKY,OAEpCZ,KAAKY,MAAQkD,EAAaC,EAAM/D,KAAKyD,QACjCzD,KAAK+W,aACL/W,KAAKqQ,YAAYC,KAAKtQ,KAAKY,OAC3BZ,KAAK+W,YAAa,GAElB/W,KAAKgX,YACLhX,KAAKgX,WAAWhX,KAAKY,SAIjCiS,EAAAjT,UAAAqX,cAAA,SAAchB,GACVjW,KAAK+W,YAAa,GAEtBlE,EAAAjT,UAAAsX,QAAA,WACIlX,KAAKsI,MAAMgI,OACXtQ,KAAKY,MAAQ,GACTZ,KAAK4U,MAAQ5U,KAAK4U,KAAK9G,UACvB9N,KAAK4U,KAAK9G,SAAS1D,KAAK9B,QAExBtI,KAAKgX,YACLhX,KAAKgX,WAAWhX,KAAKY,OAEzBZ,KAAKqL,IAAI2K,iBAMbnD,EAAAjT,UAAAuF,WAAA,SAAWiF,GACPpK,KAAK4G,OAASwD,EACdpK,KAAKqL,IAAIC,gBAGbuH,EAAAjT,UAAA0F,iBAAA,SAAiBC,GACbvF,KAAK0E,UAAYa,GAGrBsN,EAAAjT,UAAA4F,kBAAA,SAAkBD,GACdvF,KAAKgX,WAAazR,GAGtBsN,EAAAjT,UAAAuX,iBAAA,SAAiBC,GACbpX,KAAK+G,SAAWqQ,EAChBpX,KAAKqL,IAAIC,oCAhbhB6F,EAAAA,UAASzL,KAAA,CAAC,CACP0L,cAAeC,EAAAA,kBAAkBC,KACjCC,gBAAiBC,EAAAA,wBAAwBC,OAEzC9L,SAAU,qBACVC,SAAU,aAEV8L,SAAA,6kDACA2F,WAAY,CAACvU,GACb+C,UAAW,CACP8L,EACA,CACI7L,QAASC,EAAAA,kBACTC,YAAa6M,EACb5M,OAAO,iDA1BuDC,EAAAA,kBACtDoR,EAAAA,iBACFC,EAAAA,wBAAkBC,EAAAA,gCAFQ5F,EAAAA,yBASnCK,wCAsBJJ,EAAAA,UAASnM,KAAA,CAAC,8BAGV+R,EAAAA,YAAW/R,KAAA,CAAC,iDAcZ+R,EAAAA,YAAW/R,KAAA,CAAC,mCACZS,EAAAA,0BACAA,EAAAA,0BACAA,EAAAA,yBACAA,EAAAA,8BACAA,EAAAA,2BACAA,EAAAA,qBACAA,EAAAA,gCACAA,EAAAA,6BACAA,EAAAA,+BACAA,EAAAA,+BACAA,EAAAA,sBACAA,EAAAA,sBACAA,EAAAA,0BACAA,EAAAA,0BAuBA2L,EAAAA,4BACAA,EAAAA,sBACAA,EAAAA,oCAEA3L,EAAAA,0BASAA,EAAAA,yBASAA,EAAAA,wBAUAA,EAAAA,wBAQAA,EAAAA,wBAQAA,EAAAA,4BA+FAC,EAAAA,aAAYV,KAAA,CAAC,aAAc,CAAC,iCAW5BU,EAAAA,aAAYV,KAAA,CAAC,aAAc,CAAC,cA+MjCmN,GA/RI,SAAAA,EACYpE,EACAtN,EACAsU,EACAE,EACDtK,EACC+G,GALApS,KAAAyO,QAAAA,EACAzO,KAAAmB,SAAAA,EACAnB,KAAAyV,MAAAA,EACAzV,KAAA2V,IAAAA,EACD3V,KAAAqL,IAAAA,EACCrL,KAAAoS,cAAAA,EAnIiCpS,KAAA0X,SAAU,EAC/C1X,KAAAiT,WAAY,EACZjT,KAAAkT,WAAY,EACZlT,KAAAmT,WAAY,EAEZnT,KAAA+J,aAAc,EACd/J,KAAA+S,YAAa,EAGb/S,KAAA8S,sBAAuB,EACvB9S,KAAA4U,KAA+C,KACvD5U,KAAAqT,QAAS,EACTrT,KAAA2X,UAAY,2CAEkB3X,KAAAoU,QAAU,QAC/BpU,KAAAiJ,SAAW,EACXjJ,KAAAkJ,WAAa,EACblJ,KAAAmJ,WAAa,EACbnJ,KAAA4X,UAAY,QACZ5X,KAAA6X,eAAiB,GAGjB7X,KAAA6G,iBAAmB,IAAIhD,KAIvB7D,KAAAyD,OAAS,WACTzD,KAAAwU,QAAS,EAwBCxU,KAAA2U,WAAa,IAAI5C,EAAAA,aAC1B/R,KAAAqQ,YAAc,IAAI0B,EAAAA,aAClB/R,KAAAsI,MAAQ,IAAIyJ,EAAAA,aAkEd/R,KAAAsH,aAAc,EAIdtH,KAAA+W,YAAa,EC9JzB,IAAAe,uBAQCC,EAAAA,SAAQrS,KAAA,CAAC,CACNsS,aAAc,CACVnF,EACAhJ,EACAxF,GAEJ4T,gBAAiB,CAACpO,GAClBqO,QAAS,CAACrO,EAA0BgJ,GACpCsF,QAAS,CAACC,EAAAA,aAAcC,EAAAA,iBAEGP,GAV/B,SAAAA","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import { Injectable, Renderer2, RendererFactory2 } from '@angular/core';\r\n\r\nimport { NgClassInterface } from '../interfaces/ng-class';\r\n\r\n@Injectable()\r\nexport class UpdateHostClassService {\r\n    private classMap = {};\r\n    readonly renderer: Renderer2;\r\n\r\n    updateHostClass(el: HTMLElement, classMap: object): void {\r\n        this.removeClass(el, this.classMap, this.renderer);\r\n        this.classMap = { ...classMap };\r\n        this.addClass(el, this.classMap, this.renderer);\r\n    }\r\n\r\n    private removeClass(el: HTMLElement, classMap: NgClassInterface, renderer: Renderer2): void {\r\n        for (const i in classMap) {\r\n            if (classMap.hasOwnProperty(i)) {\r\n                renderer.removeClass(el, i);\r\n            }\r\n        }\r\n    }\r\n\r\n    private addClass(el: HTMLElement, classMap: NgClassInterface, renderer: Renderer2): void {\r\n        for (const i in classMap) {\r\n            if (classMap.hasOwnProperty(i) && classMap[i]) {\r\n                renderer.addClass(el, i);\r\n            }\r\n        }\r\n    }\r\n\r\n    constructor(rendererFactory2: RendererFactory2) {\r\n        this.renderer = rendererFactory2.createRenderer(null, null);\r\n    }\r\n}\r\n","export class AnimationDuration {\r\n    static SLOW = '0.3s'; // Modal\r\n    static BASE = '0.2s';\r\n    static FAST = '0.1s'; // Tooltip\r\n}\r\n\r\nexport class AnimationCurves {\r\n    static EASE_BASE_OUT = 'cubic-bezier(0.7, 0.3, 0.1, 1)';\r\n    static EASE_BASE_IN = 'cubic-bezier(0.9, 0, 0.3, 0.7)';\r\n    static EASE_OUT = 'cubic-bezier(0.215, 0.61, 0.355, 1)';\r\n    static EASE_IN = 'cubic-bezier(0.55, 0.055, 0.675, 0.19)';\r\n    static EASE_IN_OUT = 'cubic-bezier(0.645, 0.045, 0.355, 1)';\r\n    static EASE_OUT_BACK = 'cubic-bezier(0.12, 0.4, 0.29, 1.46)';\r\n    static EASE_IN_BACK = 'cubic-bezier(0.71, -0.46, 0.88, 0.6)';\r\n    static EASE_IN_OUT_BACK = 'cubic-bezier(0.71, -0.46, 0.29, 1.46)';\r\n    static EASE_OUT_CIRC = 'cubic-bezier(0.08, 0.82, 0.17, 1)';\r\n    static EASE_IN_CIRC = 'cubic-bezier(0.6, 0.04, 0.98, 0.34)';\r\n    static EASE_IN_OUT_CIRC = 'cubic-bezier(0.78, 0.14, 0.15, 0.86)';\r\n    static EASE_OUT_QUINT = 'cubic-bezier(0.23, 1, 0.32, 1)';\r\n    static EASE_IN_QUINT = 'cubic-bezier(0.755, 0.05, 0.855, 0.06)';\r\n    static EASE_IN_OUT_QUINT = 'cubic-bezier(0.86, 0, 0.07, 1)';\r\n}\r\n","import {\r\n    animate,\r\n    state,\r\n    style,\r\n    transition,\r\n    trigger,\r\n    AnimationTriggerMetadata\r\n} from '@angular/animations';\r\nimport { AnimationCurves, AnimationDuration } from './animation-consts';\r\n\r\nconst ANIMATION_TRANSITION_IN = `${AnimationDuration.BASE} ${AnimationCurves.EASE_OUT_QUINT}`;\r\nconst ANIMATION_TRANSITION_OUT = `${AnimationDuration.BASE} ${AnimationCurves.EASE_IN_QUINT}`;\r\n\r\nexport const slideMotion: AnimationTriggerMetadata = trigger('slideMotion', [\r\n    state(\r\n        'bottom',\r\n        style({\r\n            opacity: 1,\r\n            transform: 'scaleY(1)',\r\n            transformOrigin: '0% 0%'\r\n        })\r\n    ),\r\n    state(\r\n        'top',\r\n        style({\r\n            opacity: 1,\r\n            transform: 'scaleY(1)',\r\n            transformOrigin: '0% 100%'\r\n        })\r\n    ),\r\n    transition('void => bottom', [\r\n        style({\r\n            opacity: 0,\r\n            transform: 'scaleY(0.8)',\r\n            transformOrigin: '0% 0%'\r\n        }),\r\n        animate(ANIMATION_TRANSITION_IN)\r\n    ]),\r\n    transition('bottom => void', [\r\n        animate(\r\n            ANIMATION_TRANSITION_OUT,\r\n            style({\r\n                opacity: 0,\r\n                transform: 'scaleY(0.8)',\r\n                transformOrigin: '0% 0%'\r\n            })\r\n        )\r\n    ]),\r\n    transition('void => top', [\r\n        style({\r\n            opacity: 0,\r\n            transform: 'scaleY(0.8)',\r\n            transformOrigin: '0% 100%'\r\n        }),\r\n        animate(ANIMATION_TRANSITION_IN)\r\n    ]),\r\n    transition('top => void', [\r\n        animate(\r\n            ANIMATION_TRANSITION_OUT,\r\n            style({\r\n                opacity: 0,\r\n                transform: 'scaleY(0.8)',\r\n                transformOrigin: '0% 100%'\r\n            })\r\n        )\r\n    ])\r\n]);\r\n\r\n// export const slideAlertMotion: AnimationTriggerMetadata = trigger(\r\n//     'slideAlertMotion',\r\n//     [\r\n//         transition(':leave', [\r\n//             style({\r\n//                 opacity: 1,\r\n//                 transform: 'scaleY(1)',\r\n//                 transformOrigin: '0% 0%'\r\n//             }),\r\n//             animate(\r\n//                 `${AnimationDuration.SLOW} ${AnimationCurves.EASE_IN_OUT_CIRC}`,\r\n//                 style({\r\n//                     opacity: 0,\r\n//                     transform: 'scaleY(0)',\r\n//                     transformOrigin: '0% 0%'\r\n//                 })\r\n//             )\r\n//         ])\r\n//     ]\r\n// );\r\n","import { format as fnsFormat, parse as fnsParse } from 'date-fns';\r\n\r\nexport function toBoolean(value: boolean | string): boolean {\r\n    return !!value;\r\n}\r\n\r\nexport function convertToDate(value: string, format: string = 'hh:mm:ss'): Date {\r\n    if (!value || !format) {\r\n        return;\r\n    }\r\n    // let hours = '0';\r\n    // let minutes = '0';\r\n    // let seconds = '0';\r\n    // const formatSArr = format.split(' ')[0];\r\n    // const formatEArr = format.split(' ')[1];\r\n    // const formatArr = formatSArr.split(':');\r\n    // const textArr = value.split(' ')[0].split(':');\r\n    // // tslint:disable-next-line:variable-name\r\n    // const AMOrPM = value.split(' ')[1];\r\n    // formatArr.forEach((item: string, index: number) => {\r\n    //     item = item.toUpperCase();\r\n    //     if (item === 'H' || item === 'HH') {\r\n    //         hours = textArr[index];\r\n    //     } else if (item === 'M' || item === 'MM') {\r\n    //         minutes = textArr[index];\r\n    //     } else if (item === 'S' || item === 'SS') {\r\n    //         seconds = textArr[index];\r\n    //     } else if (item === 'A') {\r\n    //     }\r\n    // });\r\n    // if (formatEArr && formatEArr.toUpperCase() === 'A') {\r\n    //     if (AMOrPM === 'PM') {\r\n    //         hours = Number(hours) + 12 + '';\r\n    //     }\r\n    // }\r\n    // return new Date(\r\n    //     1970,\r\n    //     0,\r\n    //     1,\r\n    //     Number(hours),\r\n    //     Number(minutes),\r\n    //     Number(seconds)\r\n    // );\r\n\r\n    if (format.indexOf('ss') === -1 && value.split(':').length === 3) {\r\n        format = format + ':ss';\r\n    }\r\n\r\n    return fnsParse(value, format, new Date());\r\n}\r\n\r\nexport function convertToStr(\r\n    date: Date,\r\n    format: string = 'hh:mm:ss',\r\n    selected12Hours = 'AM'\r\n) {\r\n    if (!date || isNaN(date.getTime())) {\r\n        return '';\r\n    }\r\n    // let _hours = date.getHours();\r\n    // selected12Hours = selected12Hours ? selected12Hours : 'AM';\r\n    // if (selected12Hours === 'PM') {\r\n    //     _hours = _hours > 12 ? _hours - 12 : _hours;\r\n    // }\r\n    // const hours = addZero(_hours);\r\n    // const minutes = addZero(date.getMinutes());\r\n    // const seconds = addZero(date.getSeconds());\r\n    // if (format.indexOf('a') >= 0 || format.indexOf('A') >= 0) {\r\n    //     format = format.replace(/a/i, selected12Hours);\r\n    // }\r\n    // if (format.indexOf('hh') >= 0 || format.indexOf('HH') >= 0) {\r\n    //     format = format.replace(/hh/i, hours);\r\n    // } else if (format.indexOf('h') >= 0 || format.indexOf('H') >= 0) {\r\n    //     format = format.replace(/h/i, hours);\r\n    // }\r\n    // if (format.indexOf('mm') >= 0 || format.indexOf('MM') >= 0) {\r\n    //     format = format.replace(/mm/i, minutes);\r\n    // } else if (format.indexOf('m') >= 0 || format.indexOf('M') >= 0) {\r\n    //     format = format.replace(/m/i, minutes);\r\n    // }\r\n    // if (format.indexOf('ss') >= 0 || format.indexOf('SS') >= 0) {\r\n    //     format = format.replace(/ss/i, seconds);\r\n    // } else if (format.indexOf('s') >= 0 || format.indexOf('S') >= 0) {\r\n    //     format = format.replace(/s/i, seconds);\r\n    // }\r\n    // return format;\r\n    return fnsFormat(date, format);\r\n}\r\n\r\nexport function addZero(val: any) {\r\n    val = String(val);\r\n    if (val.length === 1) {\r\n        return '0' + val;\r\n    }\r\n    return val;\r\n}\r\n","// tslint:disable-next-line:no-any\r\nexport function isNotNil(value: any): boolean {\r\n    return typeof value !== 'undefined' && value !== null;\r\n}\r\n","import { Directive, ElementRef, HostListener, Input } from '@angular/core';\r\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\r\n\r\nimport { parseTime, format } from './utils/date-helper';\r\n\r\n@Directive({\r\n    selector: 'input[format]',\r\n    exportAs: 'format',\r\n    providers: [\r\n        {\r\n            provide: NG_VALUE_ACCESSOR,\r\n            useExisting: TimeValueAccessorDirective,\r\n            multi: true\r\n        }\r\n    ]\r\n})\r\nexport class TimeValueAccessorDirective implements ControlValueAccessor {\r\n    private _onChange: (value: Date) => void;\r\n    private _onTouch: () => void;\r\n    @Input() nzTime: string;\r\n\r\n    @HostListener('keyup')\r\n    keyup(): void {\r\n        this.changed();\r\n    }\r\n\r\n    @HostListener('blur')\r\n    blur(): void {\r\n        this.touched();\r\n    }\r\n\r\n    changed(): void {\r\n        if (this._onChange) {\r\n            const value = parseTime(this.elementRef.nativeElement.value);\r\n            this._onChange(value!);\r\n        }\r\n    }\r\n\r\n    touched(): void {\r\n        if (this._onTouch) {\r\n            this._onTouch();\r\n        }\r\n    }\r\n\r\n    setRange(): void {\r\n        this.elementRef.nativeElement.focus();\r\n        this.elementRef.nativeElement.setSelectionRange(\r\n            0,\r\n            this.elementRef.nativeElement.value.length\r\n        );\r\n    }\r\n\r\n    constructor(private elementRef: ElementRef) {}\r\n\r\n    writeValue(value: Date): void {\r\n        this.elementRef.nativeElement.value = format(value, this.nzTime);\r\n    }\r\n\r\n    registerOnChange(fn: (value: Date) => void): void {\r\n        this._onChange = fn;\r\n    }\r\n\r\n    registerOnTouched(fn: () => void): void {\r\n        this._onTouch = fn;\r\n    }\r\n}\r\n","import { parse, format as fnsFormat } from 'date-fns';\r\n\r\nexport function parseTime(text: string): Date | undefined {\r\n    if (!text) {\r\n        return;\r\n    }\r\n    return new Date(`1970-01-01 ${text}`);\r\n}\r\nexport function format(date: Date, formatStr: string): string {\r\n    return fnsFormat(date, formatStr);\r\n}\r\n","import { Observable, Subject } from 'rxjs';\r\nimport { isNotNil } from './utils/check';\r\nimport { isValid } from 'date-fns';\r\n\r\nexport class TimeHolder {\r\n    private _seconds: number | undefined = undefined;\r\n    private _hours: number | undefined = undefined;\r\n    private _minutes: number | undefined = undefined;\r\n    private _selected12Hours: string | undefined = undefined;\r\n    private _use12Hours = false;\r\n    private _defaultOpenValue: Date = new Date();\r\n    private _value: Date | undefined;\r\n    private _text: string;\r\n    private _changes = new Subject<Date>();\r\n    hourStep: number = 1;\r\n    minuteStep: number = 1;\r\n    secondStep: number = 1;\r\n\r\n    setValueByStep(value: number, step: number) {\r\n        let times = Math.floor(value / step)\r\n        const remainder = value % step\r\n        const halfStep = step / 2\r\n        times = remainder > halfStep ? times + 1 : times\r\n        return step * times\r\n    }\r\n\r\n    setDefaultValueIfNil(): void {\r\n        if (!isNotNil(this._value)) {\r\n            this._value = new Date(this.defaultOpenValue);\r\n        }\r\n    }\r\n\r\n    setMinutes(value: number, disabled: boolean): this {\r\n        if (disabled) {\r\n            return this;\r\n        }\r\n        this.setDefaultValueIfNil();\r\n        this.minutes = value;\r\n        return this;\r\n    }\r\n\r\n    setHours(value: number, disabled: boolean): this {\r\n        if (disabled) {\r\n            return this;\r\n        }\r\n        this.setDefaultValueIfNil();\r\n        this.hours = value;\r\n        return this;\r\n    }\r\n\r\n    setSeconds(value: number, disabled: boolean): this {\r\n        if (disabled) {\r\n            return this;\r\n        }\r\n        this.setDefaultValueIfNil();\r\n        this.seconds = value;\r\n        return this;\r\n    }\r\n\r\n    setUse12Hours(value: boolean): this {\r\n        this._use12Hours = value;\r\n        return this;\r\n    }\r\n\r\n    get changes(): Observable<Date> {\r\n        return this._changes.asObservable();\r\n    }\r\n\r\n    get value(): Date | undefined {\r\n        return this._value;\r\n    }\r\n\r\n    set value(value: Date | undefined) {\r\n        if (value !== this._value) {\r\n            this._value = value;\r\n            if (isNotNil(this._value) && isValid(this._value)) {\r\n                // tslint:disable-next-line:no-non-null-assertion\r\n                this._hours = this._value!.getHours();\r\n                this._minutes = this._value!.getMinutes();\r\n                this._seconds = this._value!.getSeconds();\r\n                if (this._use12Hours && isNotNil(this._hours)) {\r\n                    this._selected12Hours = this._hours >= 12 ? 'PM' : 'AM';\r\n                }\r\n            } else {\r\n                this._clear();\r\n            }\r\n        }\r\n    }\r\n    get text(): string {\r\n        return this._text;\r\n    }\r\n\r\n    set text(value: string) {\r\n        if (value !== this._text) {\r\n            this._text = value;\r\n        }\r\n    }\r\n\r\n    setValue(value: Date | undefined, use12Hours?: boolean): this {\r\n        if (isNotNil(use12Hours)) {\r\n            this._use12Hours = use12Hours as boolean;\r\n        }\r\n        this.value = value;\r\n        return this;\r\n    }\r\n\r\n    clear(): void {\r\n        this._clear();\r\n        this.update();\r\n    }\r\n\r\n    get isEmpty(): boolean {\r\n        return !(isNotNil(this._hours) || isNotNil(this._minutes) || isNotNil(this._seconds));\r\n    }\r\n\r\n    private _clear(): void {\r\n        this._hours = undefined;\r\n        this._minutes = undefined;\r\n        this._seconds = undefined;\r\n        this._selected12Hours = undefined;\r\n        this._value = undefined;\r\n    }\r\n\r\n    private update(): void {\r\n        if (this.isEmpty) {\r\n            this._value = undefined;\r\n        } else {\r\n            if (!isNotNil(this._hours)) {\r\n                this._hours = this.defaultHours;\r\n            } else {\r\n                this._value!.setHours(this.hours!);\r\n            }\r\n\r\n            if (!isNotNil(this._minutes)) {\r\n                this._minutes = this.defaultMinutes;\r\n            } else {\r\n                this._value!.setMinutes(this.minutes!);\r\n            }\r\n\r\n            if (!isNotNil(this._seconds)) {\r\n                this._seconds = this.defaultSeconds;\r\n            } else {\r\n                this._value!.setSeconds(this.seconds!);\r\n            }\r\n\r\n            if (this._use12Hours) {\r\n                if (!isNotNil(this._selected12Hours)) {\r\n                    this._selected12Hours = this.default12Hours;\r\n                }\r\n                if (this.selected12Hours === 'PM' && this._hours! < 12) {\r\n                    this._hours! += 12;\r\n                    this._value!.setHours(this._hours!);\r\n                }\r\n                if (this.selected12Hours === 'AM' && this._hours! >= 12) {\r\n                    this._hours! -= 12;\r\n                    this._value!.setHours(this._hours!);\r\n                }\r\n            }\r\n\r\n            this._value = new Date(this._value!);\r\n        }\r\n        this.changed();\r\n    }\r\n\r\n    changed(): void {\r\n        this._changes.next(this._value);\r\n    }\r\n\r\n    /**\r\n     * @description\r\n     * UI view hours\r\n     * Get viewHours which is selected in `time-picker-panel` and its range is [12, 1, 2, ..., 11]\r\n     */\r\n    get viewHours(): number | undefined {\r\n        return this._use12Hours && isNotNil(this._hours) ? this.calculateViewHour(this._hours!) : this._hours;\r\n    }\r\n\r\n    /**\r\n     * @description\r\n     * Value hours\r\n     * Get realHours and its range is [0, 1, 2, ..., 22, 23]\r\n     */\r\n    get realHours(): number | undefined {\r\n        return this._hours;\r\n    }\r\n\r\n    /**\r\n     * @description\r\n     * Same as realHours\r\n     * @see realHours\r\n     */\r\n    get hours(): number | undefined {\r\n        return this._hours;\r\n    }\r\n\r\n    /**\r\n     * @description\r\n     * Set viewHours to realHours\r\n     */\r\n    set hours(value: number | undefined) {\r\n        if (value !== this._hours) {\r\n            if (this._use12Hours) {\r\n                if (this.selected12Hours === 'PM' && value !== 12) {\r\n                    this._hours! = (value as number) + 12;\r\n                } else if (this.selected12Hours === 'AM' && value === 12) {\r\n                    this._hours = 0;\r\n                } else {\r\n                    this._hours = value;\r\n                }\r\n            } else {\r\n                this._hours = value;\r\n            }\r\n            this.update();\r\n        }\r\n    }\r\n\r\n    get minutes(): number | undefined {\r\n        return this._minutes;\r\n    }\r\n\r\n    set minutes(value: number | undefined) {\r\n        if (value !== this._minutes) {\r\n            this._minutes = value;\r\n            this.update();\r\n        }\r\n    }\r\n\r\n    get seconds(): number | undefined {\r\n        return this._seconds;\r\n    }\r\n\r\n    set seconds(value: number | undefined) {\r\n        if (value !== this._seconds) {\r\n            this._seconds = value;\r\n            this.update();\r\n        }\r\n    }\r\n\r\n    get selected12Hours(): string | undefined {\r\n        return this._selected12Hours;\r\n    }\r\n\r\n    set selected12Hours(value: string | undefined) {\r\n        if (value!.toUpperCase() !== this._selected12Hours) {\r\n            this._selected12Hours = value!.toUpperCase();\r\n            this.update();\r\n        }\r\n    }\r\n\r\n    get defaultOpenValue(): Date {\r\n        this._defaultOpenValue.setHours(this.setValueByStep(this._defaultOpenValue.getHours(), this.hourStep))\r\n        this._defaultOpenValue.setMinutes(this.setValueByStep(this._defaultOpenValue.getMinutes(), this.minuteStep))\r\n        this._defaultOpenValue.setSeconds(this.setValueByStep(this._defaultOpenValue.getSeconds(), this.secondStep))\r\n        return this._defaultOpenValue;\r\n    }\r\n\r\n    set defaultOpenValue(value: Date) {\r\n        if (this._defaultOpenValue !== value) {\r\n            this._defaultOpenValue = value;\r\n            this.update();\r\n        }\r\n    }\r\n\r\n    setDefaultOpenValue(value: Date): this {\r\n        this.defaultOpenValue = value;\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * @description\r\n     * Get deafultViewHours when defaultOpenValue is setted\r\n     * @see viewHours\r\n     */\r\n    get defaultViewHours(): number {\r\n        const hours = this.defaultOpenValue.getHours();\r\n        return this._use12Hours && isNotNil(hours) ? this.calculateViewHour(hours) : hours;\r\n    }\r\n\r\n    /**\r\n     * @description\r\n     * Get defaultRealHours when defaultOpenValue is setted\r\n     * @see realHours\r\n     */\r\n    get defaultRealHours(): number {\r\n        return this.defaultOpenValue.getHours();\r\n    }\r\n\r\n    /**\r\n     * @description\r\n     * Same as defaultRealHours\r\n     */\r\n    get defaultHours(): number {\r\n        return this.defaultOpenValue.getHours();\r\n    }\r\n\r\n    get defaultMinutes(): number {\r\n        return this.defaultOpenValue.getMinutes();\r\n    }\r\n\r\n    get defaultSeconds(): number {\r\n        return this.defaultOpenValue.getSeconds();\r\n    }\r\n\r\n    get default12Hours(): string {\r\n        return this.defaultOpenValue.getHours() >= 12 ? 'PM' : 'AM';\r\n    }\r\n\r\n    constructor() {}\r\n\r\n    private calculateViewHour(value: number): number {\r\n        const selected12Hours = this._selected12Hours || this.default12Hours;\r\n        if (selected12Hours === 'PM' && value > 12) {\r\n            return value - 12;\r\n        }\r\n        if (selected12Hours === 'AM' && value === 0) {\r\n            return 12;\r\n        }\r\n        return value;\r\n    }\r\n}\r\n","import {\r\n    ChangeDetectionStrategy,\r\n    ChangeDetectorRef,\r\n    Component,\r\n    ElementRef,\r\n    Input,\r\n    OnChanges,\r\n    OnDestroy,\r\n    OnInit,\r\n    SimpleChanges,\r\n    TemplateRef,\r\n    ViewChild,\r\n    ViewEncapsulation,\r\n    Output,\r\n    EventEmitter,\r\n    HostBinding\r\n} from '@angular/core';\r\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\r\n\r\nimport { Subject } from 'rxjs';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { UpdateHostClassService as UpdateCls } from './services/update-host-class.service';\r\nimport { isNotNil } from './utils/check';\r\nimport { reqAnimFrame } from '@farris/ui-common';\r\n\r\nimport { TimeValueAccessorDirective } from './time-value-accessor.directive';\r\nimport { TimeHolder } from './time-holder';\r\nimport { convertToDate, convertToStr } from './utils/convert';\r\n\r\nfunction makeRange(\r\n    length: number,\r\n    step: number = 1,\r\n    start: number = 0\r\n): number[] {\r\n    step = Math.ceil(step);\r\n    return new Array(Math.ceil(length / step))\r\n        .fill(0)\r\n        .map((_, i) => (i + start) * step);\r\n}\r\n\r\nexport type TimePickerUnit = 'hour' | 'minute' | 'second' | '12-hour';\r\n\r\n@Component({\r\n    encapsulation: ViewEncapsulation.None,\r\n    changeDetection: ChangeDetectionStrategy.OnPush,\r\n    selector: 'time-picker-panel',\r\n    exportAs: 'timePickerPanel',\r\n    templateUrl: './time-picker-panel.component.html',\r\n    // styleUrls: ['./style/index.scss'],\r\n    providers: [\r\n        UpdateCls,\r\n        {\r\n            provide: NG_VALUE_ACCESSOR,\r\n            useExisting: TimePickerPanelComponent,\r\n            multi: true\r\n        }\r\n    ]\r\n})\r\nexport class TimePickerPanelComponent implements ControlValueAccessor, OnInit, OnDestroy, OnChanges {\r\n    private _hourStep = 1;\r\n    private _minuteStep = 1;\r\n    private _secondStep = 1;\r\n    private unsubscribe$ = new Subject<void>();\r\n    private onChange: (value: string) => void;\r\n    private onTouch: () => void;\r\n    private _format = 'HH:mm:ss';\r\n    private _disabledHours: () => number[];\r\n    private _disabledMinutes: (hour: number) => number[];\r\n    private _disabledSeconds: (hour: number, minute: number) => number[];\r\n    private _defaultOpenValue = new Date();\r\n    private _opened = false;\r\n    private _allowEmpty = true;\r\n    private _value = '';\r\n\r\n    prefixCls = 'time-picker-panel';\r\n    time = new TimeHolder();\r\n    hourEnabled = true;\r\n    minuteEnabled = true;\r\n    secondEnabled = true;\r\n    enabledColumns = 3;\r\n    hourRange: ReadonlyArray<{ index: number; disabled: boolean }>;\r\n    minuteRange: ReadonlyArray<{ index: number; disabled: boolean }>;\r\n    secondRange: ReadonlyArray<{ index: number; disabled: boolean }>;\r\n    use12HoursRange: ReadonlyArray<{ index: number; value: string }>;\r\n    @ViewChild(TimeValueAccessorDirective)\r\n    timeValueAccessorDirective: TimeValueAccessorDirective;\r\n\r\n    @ViewChild('hourListElement') hourListElement: ElementRef;\r\n    @ViewChild('minuteListElement') minuteListElement: ElementRef;\r\n    @ViewChild('secondListElement') secondListElement: ElementRef;\r\n    @ViewChild('use12HoursListElement') use12HoursListElement: ElementRef;\r\n\r\n    @Input() inDatePicker = false; // If inside a date-picker, more diff works need to be done\r\n    @Input() addOn: TemplateRef<void>;\r\n    @Input() hideDisabledOptions = false;\r\n    @Input() clearText: string;\r\n    @Input() placeholder: string;\r\n    /** value  true */\r\n    @Input() selectCurrentTimeWhenNull = true;\r\n    @Input()\r\n    set use12Hours(value: boolean) {\r\n        this._use12Hours = !!value;\r\n        if (!this._use12Hours) {\r\n            this.format = this.format ? (this.format + '').replace(/h/g, 'H') : '';\r\n        } else {\r\n            this.format = this.format ? (this.format + '').replace(/H/g, 'h') : '';\r\n        }\r\n    }\r\n    get use12Hours(): boolean {\r\n        return this._use12Hours;\r\n    }\r\n    @Input()\r\n    set allowEmpty(value: boolean) {\r\n        if (isNotNil(value)) {\r\n            this._allowEmpty = value;\r\n        }\r\n    }\r\n\r\n    get allowEmpty(): boolean {\r\n        return this._allowEmpty;\r\n    }\r\n\r\n    @Input()\r\n    set opened(value: boolean) {\r\n        this._opened = value;\r\n        if (this.opened) {\r\n            this.initPosition();\r\n            this.selectInputRange();\r\n        }\r\n    }\r\n\r\n    get opened(): boolean {\r\n        return this._opened;\r\n    }\r\n\r\n    @Input()\r\n    set defaultOpenValue(value: Date) {\r\n        if (isNotNil(value)) {\r\n            this._defaultOpenValue = value;\r\n            this.time.setDefaultOpenValue(this.defaultOpenValue);\r\n        }\r\n    }\r\n\r\n    get defaultOpenValue(): Date {\r\n        return this._defaultOpenValue;\r\n    }\r\n\r\n    @Input()\r\n    set disabledHours(value: () => number[]) {\r\n        this._disabledHours = value;\r\n        if (this._disabledHours) {\r\n            this.buildHours();\r\n        }\r\n    }\r\n\r\n    get disabledHours(): () => number[] {\r\n        return this._disabledHours;\r\n    }\r\n\r\n    @Input()\r\n    set disabledMinutes(value: (hour: number) => number[]) {\r\n        if (isNotNil(value)) {\r\n            this._disabledMinutes = value;\r\n            this.buildMinutes();\r\n        }\r\n    }\r\n\r\n    get disabledMinutes(): (hour: number) => number[] {\r\n        return this._disabledMinutes;\r\n    }\r\n\r\n    @Input()\r\n    set disabledSeconds(value: (hour: number, minute: number) => number[]) {\r\n        if (isNotNil(value)) {\r\n            this._disabledSeconds = value;\r\n            this.buildSeconds();\r\n        }\r\n    }\r\n\r\n    get disabledSeconds(): (hour: number, minute: number) => number[] {\r\n        return this._disabledSeconds;\r\n    }\r\n\r\n    panelWidth = 0;\r\n\r\n    @Input()\r\n    set format(value: string) {\r\n        if (isNotNil(value)) {\r\n            this._format = value;\r\n            this.enabledColumns = 0;\r\n            const charSet = new Set(value);\r\n            this.hourEnabled = charSet.has('H') || charSet.has('h');\r\n            this.minuteEnabled = charSet.has('m');\r\n            this.secondEnabled = charSet.has('s');\r\n            if (this.hourEnabled) {\r\n                this.enabledColumns++;\r\n            }\r\n            if (this.minuteEnabled) {\r\n                this.enabledColumns++;\r\n            }\r\n            if (this.secondEnabled) {\r\n                this.enabledColumns++;\r\n            }\r\n            if (this.use12Hours) {\r\n                this.enabledColumns++;\r\n                this.build12Hours();\r\n            }\r\n\r\n            this.panelWidth = this.enabledColumns * 66;\r\n            this.cdr.markForCheck();\r\n        }\r\n    }\r\n\r\n    get format(): string {\r\n        return this._format;\r\n    }\r\n\r\n    @Input()\r\n    set hourStep(value: number) {\r\n        if (isNotNil(value)) {\r\n            this._hourStep = value;\r\n            this.time.hourStep = value;\r\n            this.buildHours();\r\n        }\r\n    }\r\n\r\n    get hourStep(): number {\r\n        return this._hourStep;\r\n    }\r\n\r\n    @Input()\r\n    set minuteStep(value: number) {\r\n        if (isNotNil(value)) {\r\n            this._minuteStep = value;\r\n            this.time.minuteStep = value;\r\n            this.buildMinutes();\r\n        }\r\n    }\r\n\r\n    get minuteStep(): number {\r\n        return this._minuteStep;\r\n    }\r\n\r\n    @Input()\r\n    set secondStep(value: number) {\r\n        if (isNotNil(value)) {\r\n            this._secondStep = value;\r\n            this.time.secondStep = value;\r\n            this.buildSeconds();\r\n        }\r\n    }\r\n\r\n    get secondStep(): number {\r\n        return this._secondStep;\r\n    }\r\n\r\n    @Input()\r\n    set value(value: string) {\r\n        if (isNotNil(value)) {\r\n            this.time.text = value;\r\n            const _value = convertToDate(this.time.text, this.format);\r\n            this.time.setValue(_value, this.use12Hours);\r\n            this.buildTimes();\r\n            this.cdr.markForCheck();\r\n        } else {\r\n            this.time.setUse12Hours(this.use12Hours);\r\n        }\r\n    }\r\n\r\n    get value(): string {\r\n        this._value = this.time.text;\r\n        return this._value;\r\n    }\r\n    @Output() valueChange = new EventEmitter<string>();\r\n\r\n    private _use12Hours = false;\r\n\r\n    selectInputRange(): void {\r\n        // setTimeout(() => {\r\n        //     if (this.timeValueAccessorDirective) {\r\n        //         this.timeValueAccessorDirective.setRange();\r\n        //     }\r\n        // });\r\n        if (this.timeValueAccessorDirective) {\r\n            this.timeValueAccessorDirective.setRange();\r\n        }\r\n    }\r\n\r\n    buildHours(): void {\r\n        let hourRanges = 24;\r\n        let disabledHours = this.disabledHours && this.disabledHours();\r\n        let startIndex = 0;\r\n        if (this.use12Hours) {\r\n            hourRanges = 12;\r\n            if (disabledHours) {\r\n                if (this.time.selected12Hours === 'PM') {\r\n                    /**\r\n                     * Filter and transform hours which greater or equal to 12\r\n                     * [0, 1, 2, ..., 12, 13, 14, 15, ..., 23] => [12, 1, 2, 3, ..., 11]\r\n                     */\r\n                    disabledHours = disabledHours\r\n                        .filter(i => i >= 12)\r\n                        .map(i => (i > 12 ? i - 12 : i));\r\n                } else {\r\n                    /**\r\n                     * Filter and transform hours which less than 12\r\n                     * [0, 1, 2,..., 12, 13, 14, 15, ...23] => [12, 1, 2, 3, ..., 11]\r\n                     */\r\n                    disabledHours = disabledHours\r\n                        .filter(i => i < 12 || i === 24)\r\n                        .map(i => (i === 24 || i === 0 ? 12 : i));\r\n                }\r\n            }\r\n            startIndex = 1;\r\n        }\r\n        this.hourRange = makeRange(hourRanges, this.hourStep, startIndex).map(\r\n            r => {\r\n                return {\r\n                    index: r,\r\n                    disabled:\r\n                        this.disabledHours && disabledHours.indexOf(r) !== -1\r\n                };\r\n            }\r\n        );\r\n        if (\r\n            this.use12Hours &&\r\n            this.hourRange[this.hourRange.length - 1].index === 12\r\n        ) {\r\n            const temp = [...this.hourRange];\r\n            temp.unshift(temp[temp.length - 1]);\r\n            temp.splice(temp.length - 1, 1);\r\n            this.hourRange = temp;\r\n        }\r\n\r\n\r\n        // \r\n        this.hourRange = this.hourRange.filter( n => {\r\n            return !(this.hideDisabledOptions && n.disabled);\r\n        });\r\n    }\r\n\r\n    buildMinutes(): void {\r\n        this.minuteRange = makeRange(60, this.minuteStep).map(r => {\r\n            return {\r\n                index: r,\r\n                disabled:\r\n                    this.disabledMinutes &&\r\n                    this.disabledMinutes(this.time.hours!).indexOf(r) !== -1\r\n            };\r\n        });\r\n\r\n        // \r\n        this.minuteRange = this.minuteRange.filter( n => {\r\n            return !(this.hideDisabledOptions && n.disabled);\r\n        });\r\n    }\r\n\r\n    buildSeconds(): void {\r\n        this.secondRange = makeRange(60, this.secondStep).map(r => {\r\n            return {\r\n                index: r,\r\n                disabled:\r\n                    this.disabledSeconds &&\r\n                    this.disabledSeconds(\r\n                        this.time.hours!,\r\n                        this.time.minutes!\r\n                    ).indexOf(r) !== -1\r\n            };\r\n        });\r\n\r\n        // \r\n        this.secondRange = this.secondRange.filter( n => {\r\n            return !(this.hideDisabledOptions && n.disabled);\r\n        });\r\n    }\r\n\r\n    build12Hours(): void {\r\n        const isUpperForamt = this._format.includes('A');\r\n        this.use12HoursRange = [\r\n            {\r\n                index: 0,\r\n                value: isUpperForamt ? 'AM' : 'am'\r\n            },\r\n            {\r\n                index: 1,\r\n                value: isUpperForamt ? 'PM' : 'pm'\r\n            }\r\n        ];\r\n\r\n        // \r\n        this.use12HoursRange = this.use12HoursRange.filter( n => {\r\n            return !this.hideDisabledOptions;\r\n        });\r\n    }\r\n\r\n    buildTimes(): void {\r\n        this.buildHours();\r\n        this.buildMinutes();\r\n        this.buildSeconds();\r\n        this.build12Hours();\r\n    }\r\n\r\n    selectHour(\r\n        event: MouseEvent,\r\n        hour: { index: number; disabled: boolean }\r\n    ): void {\r\n        event.stopPropagation();\r\n        this.time.setHours(hour.index, hour.disabled);\r\n        this.scrollToSelected(\r\n            this.hourListElement.nativeElement,\r\n            hour.index,\r\n            120,\r\n            'hour'\r\n        );\r\n\r\n        if (this._disabledMinutes) {\r\n            this.buildMinutes();\r\n        }\r\n        if (this._disabledSeconds || this._disabledMinutes) {\r\n            this.buildSeconds();\r\n        }\r\n    }\r\n\r\n    selectMinute(\r\n        event: MouseEvent,\r\n        minute: { index: number; disabled: boolean }\r\n    ): void {\r\n        event.stopPropagation();\r\n        this.time.setMinutes(minute.index, minute.disabled);\r\n        this.scrollToSelected(\r\n            this.minuteListElement.nativeElement,\r\n            minute.index,\r\n            120,\r\n            'minute'\r\n        );\r\n        if (this._disabledSeconds) {\r\n            this.buildSeconds();\r\n        }\r\n    }\r\n\r\n    selectSecond(\r\n        event: MouseEvent,\r\n        second: { index: number; disabled: boolean }\r\n    ): void {\r\n        event.stopPropagation();\r\n        this.time.setSeconds(second.index, second.disabled);\r\n        this.scrollToSelected(\r\n            this.secondListElement.nativeElement,\r\n            second.index,\r\n            120,\r\n            'second'\r\n        );\r\n    }\r\n\r\n    select12Hours(\r\n        event: MouseEvent,\r\n        value: { index: number; value: string }\r\n    ): void {\r\n        event.stopPropagation();\r\n        this.time.selected12Hours = value.value;\r\n        if (this._disabledHours) {\r\n            this.buildHours();\r\n        }\r\n        if (this._disabledMinutes) {\r\n            this.buildMinutes();\r\n        }\r\n        if (this._disabledSeconds) {\r\n            this.buildSeconds();\r\n        }\r\n        this.scrollToSelected(\r\n            this.use12HoursListElement.nativeElement,\r\n            value.index,\r\n            120,\r\n            '12-hour'\r\n        );\r\n    }\r\n\r\n    scrollToSelected(\r\n        instance: HTMLElement,\r\n        index: number,\r\n        duration: number = 0,\r\n        unit: TimePickerUnit\r\n    ): void {\r\n        const transIndex = this.translateIndex(index, unit);\r\n        const currentOption = (instance.children[0].children[transIndex] ||\r\n            instance.children[0].children[0]) as HTMLElement;\r\n        this.scrollTo(instance, currentOption.offsetTop, duration);\r\n    }\r\n\r\n    translateIndex(index: number, unit: TimePickerUnit): number {\r\n        if (unit === 'hour') {\r\n            const disabledHours = this.disabledHours && this.disabledHours();\r\n            return this.calcIndex(\r\n                disabledHours,\r\n                this.hourRange.map(item => item.index).indexOf(index)\r\n            );\r\n        } else if (unit === 'minute') {\r\n            const disabledMinutes =\r\n                this.disabledMinutes && this.disabledMinutes(this.time.hours!);\r\n            return this.calcIndex(\r\n                disabledMinutes,\r\n                this.minuteRange.map(item => item.index).indexOf(index)\r\n            );\r\n        } else if (unit === 'second') {\r\n            // second\r\n            const disabledSeconds =\r\n                this.disabledSeconds &&\r\n                this.disabledSeconds(this.time.hours!, this.time.minutes!);\r\n            return this.calcIndex(\r\n                disabledSeconds,\r\n                this.secondRange.map(item => item.index).indexOf(index)\r\n            );\r\n        } else {\r\n            // 12-hour\r\n            return this.calcIndex(\r\n                [],\r\n                this.use12HoursRange.map(item => item.index).indexOf(index)\r\n            );\r\n        }\r\n    }\r\n\r\n    scrollTo(element: HTMLElement, to: number, duration: number): void {\r\n        if (duration <= 0) {\r\n            element.scrollTop = to;\r\n            return;\r\n        }\r\n        const difference = to - element.scrollTop;\r\n        const perTick = (difference / duration) * 10;\r\n\r\n        reqAnimFrame(() => {\r\n            element.scrollTop = element.scrollTop + perTick;\r\n            if (element.scrollTop === to) {\r\n                return;\r\n            }\r\n            this.scrollTo(element, to, duration - 10);\r\n        });\r\n    }\r\n\r\n    calcIndex(array: number[], index: number): number {\r\n        if (array && array.length && this.hideDisabledOptions) {\r\n            return (\r\n                index -\r\n                array.reduce((pre, value) => {\r\n                    return pre + (value < index ? 1 : 0);\r\n                }, 0)\r\n            );\r\n        } else {\r\n            return index;\r\n        }\r\n    }\r\n\r\n    protected changed(): void {\r\n        if (this.onChange) {\r\n            this.onChange(this.time.text);\r\n        }\r\n    }\r\n\r\n    protected touched(): void {\r\n        if (this.onTouch) {\r\n            this.onTouch();\r\n        }\r\n    }\r\n\r\n    private setClassMap(): void {\r\n        this.updateCls.updateHostClass(this.element.nativeElement, {\r\n            [`${this.prefixCls}`]: true,\r\n            [`${this.prefixCls}-column-${this.enabledColumns}`]: this\r\n                .inDatePicker\r\n                ? false\r\n                : true,\r\n            [`${this.prefixCls}-narrow`]: this.enabledColumns < 3,\r\n            [`${this.prefixCls}-placement-bottomLeft`]: this.inDatePicker\r\n                ? false\r\n                : true\r\n        });\r\n    }\r\n\r\n    isSelectedHour(hour: { index: number; disabled: boolean }): boolean {\r\n        return (\r\n            hour.index === this.time.viewHours ||\r\n            (!isNotNil(this.time.viewHours) &&\r\n                hour.index === this.time.defaultViewHours && this.selectCurrentTimeWhenNull)\r\n        );\r\n    }\r\n\r\n    isSelectedMinute(minute: { index: number; disabled: boolean }): boolean {\r\n        return (\r\n            minute.index === this.time.minutes ||\r\n            (!isNotNil(this.time.minutes) &&\r\n                minute.index === this.time.defaultMinutes && this.selectCurrentTimeWhenNull)\r\n        );\r\n    }\r\n\r\n    isSelectedSecond(second: { index: number; disabled: boolean }): boolean {\r\n        return (\r\n            second.index === this.time.seconds ||\r\n            (!isNotNil(this.time.seconds) &&\r\n                second.index === this.time.defaultSeconds && this.selectCurrentTimeWhenNull)\r\n        );\r\n    }\r\n\r\n    isSelected12Hours(value: { index: number; value: string }): boolean {\r\n        return (\r\n            value.value.toUpperCase() === this.time.selected12Hours ||\r\n            (!isNotNil(this.time.selected12Hours) &&\r\n                value.value.toUpperCase() === this.time.default12Hours && this.selectCurrentTimeWhenNull)\r\n        );\r\n    }\r\n\r\n    initPosition(): void {\r\n        // setTimeout(() => {\r\n        if (this.hourEnabled && this.hourListElement) {\r\n            if (isNotNil(this.time.viewHours)) {\r\n                this.scrollToSelected(\r\n                    this.hourListElement.nativeElement,\r\n                    this.time.viewHours!,\r\n                    0,\r\n                    'hour'\r\n                );\r\n            } else {\r\n                this.scrollToSelected(\r\n                    this.hourListElement.nativeElement,\r\n                    this.time.defaultViewHours,\r\n                    0,\r\n                    'hour'\r\n                );\r\n            }\r\n        }\r\n        if (this.minuteEnabled && this.minuteListElement) {\r\n            if (isNotNil(this.time.minutes)) {\r\n                this.scrollToSelected(\r\n                    this.minuteListElement.nativeElement,\r\n                    this.time.minutes!,\r\n                    0,\r\n                    'minute'\r\n                );\r\n            } else {\r\n                this.scrollToSelected(\r\n                    this.minuteListElement.nativeElement,\r\n                    this.time.defaultMinutes,\r\n                    0,\r\n                    'minute'\r\n                );\r\n            }\r\n        }\r\n        if (this.secondEnabled && this.secondListElement) {\r\n            if (isNotNil(this.time.seconds)) {\r\n                this.scrollToSelected(\r\n                    this.secondListElement.nativeElement,\r\n                    this.time.seconds!,\r\n                    0,\r\n                    'second'\r\n                );\r\n            } else {\r\n                this.scrollToSelected(\r\n                    this.secondListElement.nativeElement,\r\n                    this.time.defaultSeconds,\r\n                    0,\r\n                    'second'\r\n                );\r\n            }\r\n        }\r\n        if (this.use12Hours && this.use12HoursListElement) {\r\n            const selectedHours = isNotNil(this.time.selected12Hours)\r\n                ? this.time.selected12Hours\r\n                : this.time.default12Hours;\r\n            const index = selectedHours === 'AM' ? 0 : 1;\r\n            this.scrollToSelected(\r\n                this.use12HoursListElement.nativeElement,\r\n                index,\r\n                0,\r\n                '12-hour'\r\n            );\r\n        }\r\n        // });\r\n    }\r\n\r\n    constructor(\r\n        public element: ElementRef,\r\n        private updateCls: UpdateCls,\r\n        public cdr: ChangeDetectorRef\r\n    ) { }\r\n\r\n    ngOnInit(): void {\r\n        if (this.inDatePicker) {\r\n            this.prefixCls = 'calendar-time-picker';\r\n        }\r\n\r\n        this.time.changes.pipe(takeUntil(this.unsubscribe$)).subscribe(() => {\r\n            const dateObj = {\r\n                hours: this.time.hours,\r\n                minutes: this.time.minutes,\r\n                seconds: this.time.seconds\r\n            };\r\n            this.time.text = convertToStr(\r\n                this.time.value,\r\n                this.format,\r\n                this.time.selected12Hours\r\n            );\r\n            this.changed();\r\n            this.touched();\r\n            this.valueChange.emit(this.time.text);\r\n        });\r\n        this.buildTimes();\r\n        this.setClassMap();\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n        if (this.opened) {\r\n            this.initPosition();\r\n        }\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this.unsubscribe$.next();\r\n        this.unsubscribe$.complete();\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        const { use12Hours } = changes;\r\n        if (\r\n            use12Hours &&\r\n            !use12Hours.previousValue &&\r\n            use12Hours.currentValue\r\n        ) {\r\n            this.build12Hours();\r\n            this.enabledColumns++;\r\n        }\r\n    }\r\n\r\n    writeValue(value: string): void {\r\n        this.time.text = value;\r\n        const _value = convertToDate(this.time.text, this.format);\r\n        this.time.setValue(_value, this.use12Hours);\r\n        if (value && this.opened) {\r\n            this.initPosition();\r\n        }\r\n        this.buildTimes();\r\n        this.cdr.markForCheck();\r\n    }\r\n\r\n    registerOnChange(fn: (value: string) => void): void {\r\n        this.onChange = fn;\r\n    }\r\n\r\n    registerOnTouched(fn: () => void): void {\r\n        this.onTouch = fn;\r\n    }\r\n\r\n    hmsCls(v, type) {\r\n        let cls = '';\r\n        const selected = ` ${this.prefixCls}-select-option-selected `;\r\n        const disabledC = ` ${this.prefixCls}-select-option-disabled `;\r\n\r\n        let f = false;\r\n        if (type === 'h') {\r\n            f = this.isSelectedHour(v);\r\n        } else if (type === 'm') {\r\n            f = this.isSelectedMinute(v);\r\n        } else if (type === 'r') {\r\n            f = this.isSelected12Hours(v);\r\n        } else {\r\n            f = this.isSelectedSecond(v);\r\n        }\r\n\r\n        if (f) {\r\n            cls += selected;\r\n        }\r\n\r\n        if (type === 'r') {\r\n            return cls;\r\n        }\r\n\r\n        if (v.disabled) {\r\n            cls += disabledC;\r\n        }\r\n        return cls;\r\n    }\r\n\r\n    trackByItems = (index, item) => {\r\n        return index;\r\n    }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { LocaleService } from '@farris/ui-locale';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class TimePickerLocaleService {\r\n    private localeConfig = {\r\n        'ZH_CN' : {\r\n            placeholder: ''\r\n        },\r\n        'EN_US' : {\r\n            placeholder: 'Please select a time'\r\n        }\r\n    };\r\n    constructor(private localeService: LocaleService) {}\r\n    public getLocaleConfig() {\r\n        const locale = this.localeService.getValue('locale');\r\n        if (locale && this.localeConfig[locale]) {\r\n            return this.localeConfig[locale];\r\n        } else {\r\n            return this.localeConfig.ZH_CN;\r\n        }\r\n    }\r\n}\r\n","import {\r\n    AfterViewInit, ChangeDetectionStrategy, ChangeDetectorRef, Component, ElementRef, EventEmitter, Input, OnChanges,\r\n    OnInit, Output, Renderer2, SimpleChanges, TemplateRef, ViewChild, ViewEncapsulation, HostBinding,\r\n    ComponentRef, ViewContainerRef, ComponentFactoryResolver, HostListener, Injector\r\n} from '@angular/core';\r\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\r\nimport { UpdateHostClassService as UpdateCls } from './services/update-host-class.service';\r\nimport { slideMotion } from './animations/slide';\r\nimport { toBoolean, convertToDate, convertToStr } from './utils/convert';\r\nimport { TimePickerPanelComponent } from './time-picker-panel.component';\r\nimport { TimePickerLocaleService } from './services/time-picker.locale.service';\r\n\r\nlet num = 0;\r\n@Component({\r\n    encapsulation: ViewEncapsulation.None,\r\n    changeDetection: ChangeDetectionStrategy.OnPush,\r\n    // tslint:disable-next-line:component-selector\r\n    selector: 'farris-time-picker',\r\n    exportAs: 'timePicker',\r\n    // styleUrls: ['./style/index.scss'],\r\n    templateUrl: './time-picker.component.html',\r\n    animations: [slideMotion],\r\n    providers: [\r\n        UpdateCls,\r\n        {\r\n            provide: NG_VALUE_ACCESSOR,\r\n            useExisting: TimePickerComponent,\r\n            multi: true\r\n        }\r\n    ]\r\n})\r\nexport class TimePickerComponent implements ControlValueAccessor, OnInit, AfterViewInit, OnChanges {\r\n    @ViewChild('timeInput')\r\n    public timeInput: ElementRef;\r\n\r\n    @HostBinding('class.f-component-timepicker') hostCls = true;\r\n    private _disabled = false;\r\n    private _readonly = false;\r\n    private _editable = true;\r\n    private _value: string;\r\n    private _allowEmpty = true;\r\n    private _autoFocus = false;\r\n    private _onChange: (value: string) => void;\r\n    private _onTouched: (value: string) => void;\r\n    private _hideDisabledOptions = false;\r\n    private cRef: ComponentRef<TimePickerPanelComponent> = null;\r\n    isInit = false;\r\n    groupIcon = '<i class=\"f-icon f-icon-timepicker\"></i>';\r\n\r\n    @HostBinding('style.display') display = 'block';\r\n    @Input() hourStep = 1;\r\n    @Input() minuteStep = 1;\r\n    @Input() secondStep = 1;\r\n    @Input() clearText = 'clear';\r\n    @Input() popupClassName = '';\r\n    @Input() placeholder;\r\n    @Input() addOn: TemplateRef<void>;\r\n    @Input() defaultOpenValue = new Date();\r\n    @Input() disabledHours: () => number[];\r\n    @Input() disabledMinutes: (hour: number) => number[];\r\n    @Input() disabledSeconds: (hour: number, minute: number) => number[];\r\n    @Input() format = 'HH:mm:ss';\r\n    @Input() isOpen = false;\r\n    @Input()\r\n    set use12Hours(value: boolean) {\r\n        this._use12Hours = !!value;\r\n        if (value && this.format) {\r\n            this.format = this.format.replace(/H/g, 'h');\r\n        } else if (!value && this.format) {\r\n            this.format = this.format.replace(/h/g, 'H');\r\n        }\r\n\r\n        if (this._use12Hours) {\r\n            if (!this.format) {\r\n                this.format = 'hh:mm:ss a';\r\n            } else {\r\n                if (this.format.indexOf('a') === -1 ) {\r\n                    this.format = this.format + ' a';\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n    get use12Hours(): boolean {\r\n        return this._use12Hours;\r\n    }\r\n    @Output() readonly openChange = new EventEmitter<boolean>();\r\n    @Output() valueChange = new EventEmitter<string>();\r\n    @Output() clear = new EventEmitter();\r\n\r\n    @Input()\r\n    set hideDisabledOptions(value: boolean) {\r\n        this._hideDisabledOptions = toBoolean(value);\r\n    }\r\n\r\n    get hideDisabledOptions(): boolean {\r\n        return this._hideDisabledOptions;\r\n    }\r\n\r\n    @Input()\r\n    set allowEmpty(value: boolean) {\r\n        this._allowEmpty = toBoolean(value);\r\n    }\r\n\r\n    get allowEmpty(): boolean {\r\n        return this._allowEmpty;\r\n    }\r\n\r\n    @Input()\r\n    set autoFocus(value: boolean) {\r\n        this._autoFocus = toBoolean(value);\r\n        this.updateAutoFocus();\r\n    }\r\n\r\n    get autoFocus(): boolean {\r\n        return this._autoFocus;\r\n    }\r\n\r\n    @Input()\r\n    set disabled(value: boolean | string) {\r\n        this._disabled = toBoolean(value);\r\n    }\r\n\r\n    get disabled(): boolean | string {\r\n        return this._disabled;\r\n    }\r\n    @Input()\r\n    set readonly(value: boolean | string) {\r\n        this._readonly = toBoolean(value);\r\n    }\r\n\r\n    get readonly(): boolean | string {\r\n        return this._readonly;\r\n    }\r\n    @Input()\r\n    set editable(value: boolean | string) {\r\n        this._editable = toBoolean(value);\r\n    }\r\n\r\n    get editable(): boolean | string {\r\n        return this._editable;\r\n    }\r\n\r\n    set value(value: string) {\r\n        this._value = value;\r\n        if (this._onChange) {\r\n            this._onChange(this.value);\r\n        }\r\n    }\r\n\r\n    get value(): string {\r\n        return this._value;\r\n    }\r\n\r\n    private _use12Hours = false;\r\n    private overlayRef: Element;\r\n    private overlayPanelRef: Element;\r\n    private documentClickEvent: any;\r\n    private changeFlag = false;\r\n\r\n    constructor(\r\n        private element: ElementRef,\r\n        private renderer: Renderer2,\r\n        private vcRef: ViewContainerRef,\r\n        private cfr: ComponentFactoryResolver,\r\n        public cdr: ChangeDetectorRef,\r\n        private localeService: TimePickerLocaleService\r\n    ) {\r\n        \r\n    }\r\n\r\n    ngOnInit(): void {\r\n        if (this.localeService) {\r\n            const localConfig = this.localeService.getLocaleConfig();\r\n            this.placeholder = this.placeholder?\r\n                this.placeholder :\r\n                localConfig.placeholder ? localConfig.placeholder : '';\r\n        }\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        const { use12Hours} = changes;\r\n        if (use12Hours && (!this.format || this.format.indexOf('a') === -1 )) {\r\n            if (this.use12Hours) {\r\n                this.format = this.format + ' a';\r\n            }\r\n        }\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n        this.isInit = true;\r\n        this.updateAutoFocus();\r\n        if (!document.body.querySelector('.time-picker-overlay')) {\r\n            this.overlayRef = this.renderer.createElement('div');\r\n            this.overlayPanelRef = this.renderer.createElement('div');\r\n            this.renderer.addClass(this.overlayRef, 'time-picker-overlay');\r\n            this.renderer.addClass(\r\n                this.overlayPanelRef,\r\n                `overlay-panel-${num++}`\r\n            );\r\n            this.renderer.appendChild(this.overlayRef, this.overlayPanelRef);\r\n            document.body.appendChild(this.overlayRef);\r\n\r\n        } else {\r\n            this.overlayRef = document.body.querySelector(\r\n                '.time-picker-overlay'\r\n            );\r\n            this.overlayPanelRef = this.renderer.createElement('div');\r\n            this.renderer.addClass(\r\n                this.overlayPanelRef,\r\n                `overlay-panel-${num++}`\r\n            );\r\n            this.renderer.appendChild(this.overlayRef, this.overlayPanelRef);\r\n\r\n        }\r\n\r\n        this.overlayRef.addEventListener('click', (e) => {\r\n            e.stopPropagation();\r\n        });\r\n\r\n        this.timeInput.nativeElement.addEventListener('blur', () => {\r\n            this.onBlur();\r\n        });\r\n    }\r\n    // tslint:disable-next-line:use-life-cycle-interface\r\n    ngOnDestroy(): void {\r\n        this.timeInput.nativeElement.removeEventListener('blur', this.onBlur);\r\n    }\r\n\r\n    @HostListener('mouseenter', ['$event'])\r\n    onMouseEnter(event) {\r\n        if (\r\n            this.timeInput.nativeElement.value &&\r\n            !this.readonly &&\r\n            !this.disabled\r\n        ) {\r\n            event.target.querySelector('.input-group-clear').style.display = '';\r\n        }\r\n    }\r\n\r\n    @HostListener('mouseleave', ['$event'])\r\n    onMouseLeave(event) {\r\n        if (!this.readonly && !this.disabled) {\r\n            event.target.querySelector('.input-group-clear').style.display = 'none';\r\n        }\r\n    }\r\n\r\n\r\n    open(event: MouseEvent) {\r\n        event.stopPropagation();\r\n\r\n        if (this.disabled || (!this.editable && this.readonly)) {\r\n            return;\r\n        }\r\n\r\n        if (this.isOpen) {\r\n            this.close();\r\n            return;\r\n        }\r\n\r\n        this.creatPanel();\r\n        this.isOpen = true;\r\n        this.openChange.emit(this.isOpen);\r\n        this.renderer.appendChild(\r\n            this.overlayPanelRef,\r\n            this.cRef.location.nativeElement\r\n        );\r\n\r\n        this.renderer.setStyle(this.overlayRef, 'display', 'block');\r\n        this.documentClickEvent = this.registerMouseDownEvent();\r\n\r\n        setTimeout(() => {\r\n            this.setPosition();\r\n            this.renderer.addClass(this.cRef.location.nativeElement, 'f-area-show');\r\n        }, 10);\r\n    }\r\n\r\n    close(): void {\r\n        this.isOpen = false;\r\n        this.cRef.instance.opened = false;\r\n        this.renderer.removeClass(this.cRef.location.nativeElement, 'f-area-show');\r\n        while (this.overlayPanelRef.lastChild) {\r\n            this.overlayPanelRef.removeChild(this.overlayPanelRef.lastChild);\r\n        }\r\n        this.openChange.emit(this.isOpen);\r\n        this.focus();\r\n        this.removeDocumentListener();\r\n\r\n        if (this.cRef) {\r\n            this.cRef.destroy();\r\n            this.cRef = null;\r\n        }\r\n    }\r\n\r\n    private registerMouseDownEvent() {\r\n        const mousedownEvent = (e) => {\r\n            if (e.target === this.overlayPanelRef.parentElement) {\r\n                this.renderer.setStyle(this.overlayRef, 'display', 'none');\r\n                this.close();\r\n            }\r\n        };\r\n        document.body.addEventListener('mousedown', mousedownEvent, true);\r\n        document.body.addEventListener('mousewheel', mousedownEvent, true);\r\n\r\n        return () => {\r\n            document.body.removeEventListener('mousedown', mousedownEvent, true);\r\n            document.body.removeEventListener('mousewheel', mousedownEvent, true);\r\n        };\r\n    }\r\n\r\n    private removeDocumentListener() {\r\n        if (this.documentClickEvent) {\r\n            this.documentClickEvent();\r\n            this.documentClickEvent = null;\r\n        }\r\n    }\r\n    creatPanel() {\r\n        if (this.cRef === null) {\r\n            this.vcRef.clear();\r\n            this.cRef = this.vcRef.createComponent(\r\n                this.cfr.resolveComponentFactory(TimePickerPanelComponent)\r\n            );\r\n\r\n            this.cRef.location.nativeElement.classList.add('f-area-hide');\r\n\r\n            // grid\r\n            this.cRef.changeDetectorRef.detectChanges();\r\n\r\n            this.cRef.instance.format = this.format;\r\n            this.cRef.instance.hourStep = this.hourStep;\r\n            this.cRef.instance.minuteStep = this.minuteStep;\r\n            this.cRef.instance.secondStep = this.secondStep;\r\n            this.cRef.instance.disabledHours = this.disabledHours;\r\n            this.cRef.instance.disabledMinutes = this.disabledMinutes;\r\n            this.cRef.instance.disabledSeconds = this.disabledSeconds;\r\n            this.cRef.instance.hideDisabledOptions = this.hideDisabledOptions;\r\n            this.cRef.instance.use12Hours = this.use12Hours;\r\n            this.cRef.instance.opened = this.isOpen;\r\n            this.cRef.instance.defaultOpenValue = this.defaultOpenValue;\r\n            this.cRef.instance.value = this.value;\r\n            this.cRef.instance.valueChange.subscribe((val: string) => {\r\n                this.value = val;\r\n                this.cdr.detectChanges();\r\n                this.valueChange.emit(val);\r\n            });\r\n        } else {\r\n            this.cRef.instance.value = this.value;\r\n        }\r\n    }\r\n\r\n    setPosition() {\r\n        const {\r\n            top: elTop,\r\n            left: elLeft,\r\n            height: elHeight,\r\n            width: elWidth\r\n        } = this.element.nativeElement.getBoundingClientRect();\r\n\r\n        const panelHeight = 194;\r\n        if (elTop + panelHeight + 30 > window.innerHeight) {\r\n            this.renderer.setStyle(this.cRef.location.nativeElement, 'top', `${elTop - panelHeight}px`);\r\n        } else {\r\n            this.renderer.setStyle(this.cRef.location.nativeElement, 'top', `${elTop + elHeight}px`);\r\n        }\r\n\r\n        const panelWidth = this.cRef.instance.panelWidth;\r\n\r\n        if (window.innerWidth - elLeft < panelWidth) {\r\n            const r = window.innerWidth - elLeft - elWidth;\r\n            this.renderer.setStyle(this.cRef.location.nativeElement, 'right', `${r}px`);\r\n        } else {\r\n            this.renderer.setStyle(this.cRef.location.nativeElement, 'left', `${elLeft}px`);\r\n        }\r\n\r\n        this.cRef.instance.opened = true;\r\n    }\r\n\r\n    updateAutoFocus(): void {\r\n    }\r\n\r\n    onClickClearBtn(): void {\r\n        this.value = null;\r\n        this.cRef.instance.time.clear();\r\n    }\r\n\r\n    focus(): void {\r\n        if (this.timeInput.nativeElement) {\r\n            this.timeInput.nativeElement.focus();\r\n        }\r\n    }\r\n\r\n    blur(): void {\r\n        if (this.timeInput.nativeElement) {\r\n            this.timeInput.nativeElement.blur();\r\n        }\r\n    }\r\n    onBlur(): void {\r\n        if (this.value) {\r\n            const date = convertToDate(this.value, this.format);\r\n            if (this.cRef) {\r\n                this.cRef.instance.value = this.value;\r\n            }\r\n            this.value = convertToStr(date, this.format);\r\n            if (this.changeFlag) {\r\n                this.valueChange.emit(this.value);\r\n                this.changeFlag = false;\r\n            }\r\n            if (this._onTouched) {\r\n                this._onTouched(this.value);\r\n            }\r\n        }\r\n    }\r\n    onValueChange(val: string) {\r\n        this.changeFlag = true;\r\n    }\r\n    onClear() {\r\n        this.clear.emit();\r\n        this.value = '';\r\n        if (this.cRef && this.cRef.instance) {\r\n            this.cRef.instance.time.clear();\r\n        }\r\n        if (this._onTouched) {\r\n            this._onTouched(this.value);\r\n        }\r\n        this.cdr.detectChanges();\r\n    }\r\n\r\n\r\n\r\n\r\n    writeValue(time: string): void {\r\n        this._value = time;\r\n        this.cdr.markForCheck();\r\n    }\r\n\r\n    registerOnChange(fn: (time: string) => void): void {\r\n        this._onChange = fn;\r\n    }\r\n\r\n    registerOnTouched(fn: (time: string) => void): void {\r\n        this._onTouched = fn;\r\n    }\r\n\r\n    setDisabledState(isDisabled: boolean): void {\r\n        this.disabled = isDisabled;\r\n        this.cdr.markForCheck();\r\n    }\r\n}\r\n","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { TimePickerPanelComponent } from './time-picker-panel.component';\r\nimport { TimePickerComponent } from './time-picker.component';\r\nimport { TimeValueAccessorDirective } from './time-value-accessor.directive';\r\n\r\n@NgModule({\r\n    declarations: [\r\n        TimePickerComponent,\r\n        TimePickerPanelComponent,\r\n        TimeValueAccessorDirective\r\n    ],\r\n    entryComponents: [TimePickerPanelComponent],\r\n    exports: [TimePickerPanelComponent, TimePickerComponent],\r\n    imports: [CommonModule, FormsModule]\r\n})\r\nexport class TimePickerModule {}\r\n"]}