/**
 * @fileoverview added by tsickle
 * Generated from: lib/organization-selector.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, EventEmitter, forwardRef, HostBinding, Injector, Input, NgZone, Output, Renderer2, ViewChild, ChangeDetectorRef } from '@angular/core';
import { NgControl, NG_VALUE_ACCESSOR } from '@angular/forms';
import { DialogComponent } from '@farris/ui-dialog';
import { ApiService } from '../utils/api.service';
import { CommonUtil } from '../utils/common.tool';
import { FavoritesTool } from '../utils/favorites.tool';
import { ChangeType } from '../utils/index.type';
import { StateMgrTool } from '../utils/state.mgr.tool';
import { Subject } from 'rxjs';
import * as _ from 'lodash-es';
import { debounceTime, distinctUntilChanged, switchMap, tap } from 'rxjs/operators';
import { GroupComponent } from './tab-group/group.component';
import { OrganizationComponent } from './tab-organization/to.component';
import { FavoritesComponent } from './tab-favorites/favorites.component';
import { MessagerService } from '@farris/ui-messager';
import { NotifyService } from '@farris/ui-notify';
import { LocaleService } from '@farris/ui-locale';
import { ORGANIZATION_SELECTOR_LOCALE } from '../utils/locale';
export class OrganizationSelectorComponent {
    /**
     * @param {?} render
     * @param {?} injector
     * @param {?} favoritesTool
     * @param {?} apiService
     * @param {?} ngZone
     * @param {?} stateMgr
     */
    constructor(render, injector, favoritesTool, apiService, ngZone, stateMgr) {
        this.render = render;
        this.injector = injector;
        this.favoritesTool = favoritesTool;
        this.apiService = apiService;
        this.ngZone = ngZone;
        this.stateMgr = stateMgr;
        this.baseCls = true;
        this.width = '100%';
        // input框是否显示
        this.showInput = true;
        // 业务标识
        this.busNum = 'common';
        this.multiSelect = true;
        this.placeholder = '请选择';
        this.searchPlaceholder = '请输入编号或名称搜索';
        this.readonly = false;
        // 传入的url
        this.absUserOrgUrl = '/api/runtime/sys/v1.0/absUserOrg';
        this.absRfQueryUrl = '/api/runtime/sys/v1.0/absRecentContacts/query';
        this.absRfModifyUrl = '/api/runtime/sys/v1.0/absRecentContacts/modify';
        this.groupApiUrl = "/api/runtime/sys/v1.0/org-group";
        this.groupExtendUrl = '/platform/runtime/wf/webapp/ng-farris-mobile-ui/extend-org.js';
        /**
         * 数据源类型
         * 默认为： System_organization  系统数据源   获取系统人员、系统组织
         * Administrative_organization  已扩展数据源  获取行政组织、行政人员
         * absOrgType {string}
         * PersonnelSelectorComponent
         */
        this.absOrgType = 'System_organization';
        // 启用分层加载
        this.enableHierarchicalLoading = true;
        // 不包含停用组织
        this.notGetStopOrg = true;
        this.primaryField = 'orgId';
        this.displayField = 'name';
        this.orgIds = [];
        // 展开层级
        this.layer = 1;
        // 是否启用级联选中
        this.cascadeCheck = true;
        // 级联选中下级
        this.cascadeDown = true;
        // 级联选中上级
        this.cascadeUp = false;
        // 显示全选按钮
        this.showCheckAll = false;
        this.keepSelect = false;
        // 一次性最多选中多少条
        this.selectedLimit = 50;
        this.showTabIds = 'organization,favorites';
        this.activeTabId = 'organization';
        // 搜索前端分页50条
        this.searchPageSize = 50;
        /**
         * 多选分隔符
         */
        this.multipleChoiceSeparator = ',';
        this.draggable = true;
        this.virtualizedLoad = false;
        this.dataPermission = false;
        this.dataPermissionIds = [];
        this.selectionsChange = new EventEmitter();
        // 全部清除按钮触发回调
        this.inputClear = new EventEmitter();
        // 标签删除按钮出发回调
        this.tagRemoved = new EventEmitter();
        this.selections = [];
        this.originalSelections = [];
        this.finalText = [];
        this.lookupIcon = '<i class="f-icon f-icon-lookup"></i>';
        this.searchIcon = '<span class="k-icon k-i-search"></span>';
        this.organizationTabId = 'organization';
        this.groupTabId = 'group';
        this.favoritesTabId = 'favorites';
        this.dialogHeight = 548;
        this.dialogId = 'dialogId';
        this.isShow = false;
        this.confirmToken = false;
        this.hideSearchPanel = true;
        this.searchText = '';
        this.groupDialogOpend = false;
        this.groupDialogTitle = '';
        this.validGroupTitle = true;
        this.groupTitleStream = new Subject();
        this.selectionsShow = false;
        this.orgTabActive = false;
        this.groupTabActive = false;
        this.againstSingleSelect = false;
        this.localeService = null;
        this.languagesArray = [
            { code: 'zh-CHS', name: '中文简体', default: true },
            { code: 'en', name: 'English' },
            { code: 'zh-CHT', name: '中文繁体' }
        ];
        this.farrisDialogbeforeClose = (/**
         * @return {?}
         */
        () => {
            this.isShow = false;
            if (this.confirmToken) {
                this.originalSelections = _.cloneDeep(this.selections);
            }
            else {
                this.selections = _.cloneDeep(this.originalSelections);
            }
            if (!this.hideSearchPanel || this.searchText) {
                this.searchText = null;
                this.clearSearch();
            }
            this.confirmToken = false;
            return true;
        });
        this.onModelChange = (/**
         * @param {?=} val
         * @return {?}
         */
        (val) => { });
        this.onModelTouched = (/**
         * @param {?=} val
         * @return {?}
         */
        (val) => { });
        this.apiService.absUrl = this.absUserOrgUrl;
        this.apiService.groupApiUrl = this.groupApiUrl;
        this.cdRef = this.injector.get(ChangeDetectorRef);
        this.messageService = this.injector.get(MessagerService, null);
        this.notifyService = this.injector.get(NotifyService, null);
        this.localeService = this.injector.get(LocaleService);
        if (!this.localeService.langData['organizationSelector']) {
            this.localeService.setLocaleData(ORGANIZATION_SELECTOR_LOCALE);
        }
    }
    /**
     * @param {?} obj
     * @return {?}
     */
    writeValue(obj) {
        if (!!obj && typeof obj === 'string') {
            this.finalText = obj.split(this.multipleChoiceSeparator);
        }
        else {
            this.finalText = [];
        }
    }
    /**
     * @param {?} fn
     * @return {?}
     */
    registerOnChange(fn) {
        this.onModelChange = fn;
    }
    /**
     * @param {?} fn
     * @return {?}
     */
    registerOnTouched(fn) {
        this.onModelTouched = fn;
    }
    /**
     * @param {?} isDisabled
     * @return {?}
     */
    setDisabledState(isDisabled) {
        throw new Error('Method not implemented.');
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.initDialogHeight();
        this.listenSelectionsChange();
        this.initTabs();
        this.initGroupSearch();
        this.ngControl = this.injector.get(NgControl, null);
        this.mapFields && this.mapFields2Component();
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        this.listenWindowResize();
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    ngOnChanges(changes) {
        /** @type {?} */
        const orgIdsChange = changes.orgIds;
        if (orgIdsChange && orgIdsChange.currentValue) {
            this.assembleDataByOrgIds(orgIdsChange.currentValue);
        }
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        this.selectionsSub.unsubscribe();
    }
    /**
     * @private
     * @param {?} selections
     * @param {?=} changeType
     * @param {?=} from
     * @return {?}
     */
    emitSelections(selections, changeType = ChangeType.ValueChanged, from = 'form') {
        this.stateMgr.emitSelections(selections, changeType, from);
    }
    // 根据字段映射关系获取当前已选组织的id，进而在打开选组织弹窗时进行相应展示
    /**
     * @private
     * @return {?}
     */
    mapFields2Component() {
        /** @type {?} */
        const helpFields = Object.keys(this.mapFields);
        if (!helpFields.includes(this.primaryField)) {
            // this.notifyService.warning(this.localeService.getValue("organizationSelector.errorMessage.mapFields"));
            return;
        }
        if (this.ngControl &&
            this.ngControl.formDirective &&
            this.ngControl.formDirective.form &&
            this.ngControl.formDirective.form.bindingData) {
            /** @type {?} */
            const bindingData = this.ngControl.formDirective.form.bindingData;
            if (bindingData.setValue) {
                /** @type {?} */
                const bindingPath = this.ngControl.formDirective.form.bindingPath;
                /** @type {?} */
                let pathArr = [];
                if (bindingPath) {
                    pathArr = bindingPath.split('/').filter((/**
                     * @param {?} n
                     * @return {?}
                     */
                    n => n !== ''));
                }
                /** @type {?} */
                const multiPath = this.mapFields[this.primaryField].split(this.multipleChoiceSeparator);
                /** @type {?} */
                const fieldPaths = pathArr.concat(multiPath[0].split('.'));
                /** @type {?} */
                const ids = bindingData.getValue(fieldPaths);
                if (!ids) {
                    this.emitSelections([]);
                    return;
                }
                this.assembleDataByOrgIds(ids.split(this.multipleChoiceSeparator));
            }
        }
    }
    // 根据传入的组织id数组获取对应的组织
    // 由ngOnChanges()、mapFields2Component()调用
    /**
     * @private
     * @param {?} ids
     * @return {?}
     */
    assembleDataByOrgIds(ids) {
        if (!ids || ids.length === 0) {
            return;
        }
        if (ids && ids.length > 1 && !this.multiSelect) {
            this.againstSingleSelect = true;
            return;
        }
        /** @type {?} */
        const param = {
            absOrgType: this.absOrgType,
            idList: ids,
            getOrgAllPath: true,
            getCurUser: false
        };
        this.apiService.getOrganization(param).subscribe((/**
         * @param {?} res
         * @return {?}
         */
        (res) => {
            if (res && res.data) {
                this.selections = res.data;
                if (!this.mapFields) {
                    this.assembleFinalText();
                    if (this.dataPermission) {
                        this.emitSelections(this.selections);
                    }
                }
                else {
                    this.emitSelections(this.selections);
                }
            }
        }));
    }
    // 构造回显至input文本框的内容
    // 在有mapFields的前提下，由assembleDataByOrgIds()调用，clearAll()、removeItem()、returnResult()也会调用
    /**
     * @private
     * @return {?}
     */
    assembleFinalText() {
        this.finalText = [];
        this.selections.forEach((/**
         * @param {?} item
         * @param {?} index
         * @return {?}
         */
        (item, index) => {
            /** @type {?} */
            const formatedName = this.formatFn && this.formatFn(item);
            /** @type {?} */
            const finalText = formatedName ? formatedName : item[this.displayField];
            this.finalText.push(finalText);
        }));
        this.finalText = this.finalText.slice();
    }
    // 初始化弹窗id及高度
    // 由ngOnInit()调用
    /**
     * @return {?}
     */
    initDialogHeight() {
        /** @type {?} */
        const uuid = CommonUtil.newGuid();
        this.dialogId += uuid;
        /** @type {?} */
        const windowInnerHeight = window.innerHeight;
        this.dialogHeight = windowInnerHeight - 60;
        if (this.dialogHeight > 680) {
            this.dialogHeight = 680;
        }
    }
    // 监听selections的变更，变更包含三种形式：valueChange、append、remove
    // 由ngOnInit()调用
    /**
     * @return {?}
     */
    listenSelectionsChange() {
        this.selectionsSub = this.stateMgr.selectionsSubject.subscribe((/**
         * @param {?} data
         * @return {?}
         */
        data => {
            if (data.changeType === ChangeType.ValueChanged) {
                this.selections = _.cloneDeep(data.value);
            }
            else if (data.changeType === ChangeType.Remove) {
                this.selections = this.selections.filter((/**
                 * @param {?} item
                 * @return {?}
                 */
                item => item[this.primaryField] !== data.value[this.primaryField]));
            }
            else if (data.changeType === ChangeType.Append) {
                CommonUtil.findIndex(data.value[this.primaryField], this.primaryField, this.selections) === -1 ? this.selections.push(data.value) : null;
            }
            this.cdRef.detectChanges();
        }));
    }
    // 根据showTabIds判断是否启用收藏功能、群组功能
    // 由ngOnInit()调用
    /**
     * @private
     * @return {?}
     */
    initTabs() {
        if (!this.showTabIds.includes(this.activeTabId)) {
            this.activeTabId = this.showTabIds.split(',')[0];
        }
        if (this.dataPermission) {
            this.showTabIds = this.organizationTabId;
            this.activeTabId = this.organizationTabId;
            this.orgTabActive = true;
            return;
        }
        this.currentTabId = this.activeTabId;
        if (this.showTabIds.indexOf(this.favoritesTabId) !== -1) {
            this.enableFavorites = true;
        }
        else {
            this.enableFavorites = false;
        }
        if (this.showTabIds.indexOf(this.groupTabId) !== -1) {
            this.enableGroup = true;
        }
        else {
            this.enableGroup = false;
        }
        if (this.activeTabId == this.organizationTabId) {
            this.orgTabActive = true;
        }
        else if (this.activeTabId == this.groupTabId) {
            this.groupTabActive = true;
        }
        // 启用群组功能扩展函数
        /*
        if (this.enableGroup) {
          const ccwork = window.top.document.createElement("script")
          ccwork.src = this.groupExtendUrl + '?vs=' + Math.random();
          window.document.head.appendChild(ccwork);
        }
        */
    }
    // 判断群组名称是否合法
    // 由ngOnInit()调用
    /**
     * @private
     * @return {?}
     */
    initGroupSearch() {
        if (this.enableGroup) {
            this.groupTitleStream.pipe(debounceTime(500), distinctUntilChanged()).subscribe((/**
             * @param {?} data
             * @return {?}
             */
            data => {
                if (!!data) {
                    this.validGroupTitle = true;
                }
                else {
                    this.validGroupTitle = false;
                }
            }));
        }
    }
    // 当浏览器窗口大小变更时，变更弹窗的大小
    // 由ngAfterViewInit()调用
    /**
     * @return {?}
     */
    listenWindowResize() {
        /** @type {?} */
        const dialogElement = document.querySelector('#' + this.dialogId);
        /** @type {?} */
        let targetElement = null;
        if (!!dialogElement) {
            targetElement = dialogElement.querySelector('.modal-dialog');
        }
        window.addEventListener('resize', (/**
         * @return {?}
         */
        () => {
            if (!!targetElement) {
                /** @type {?} */
                let height = window.innerHeight - 60;
                if (height > 680) {
                    height = 680;
                }
                this.dialogHeight = height;
                /** @type {?} */
                const innerHeight = height + 'px';
                /** @type {?} */
                const marginTop = '-' + height / 2 + 'px';
                this.render.setStyle(targetElement, 'height', innerHeight);
                this.render.setStyle(targetElement, 'margin-top', marginTop);
            }
        }));
    }
    // 初始化组织收藏数据
    // 由showFarrisDialog()调用，即打开选组织弹窗时发送请求
    /**
     * @private
     * @return {?}
     */
    initFavorites() {
        this.favoritesTool.absOrgType = this.absOrgType;
        this.favoritesTool.busNum = this.busNum;
        this.favoritesTool.idField = this.primaryField;
        this.favoritesTool.absRfQueryUrl = this.absRfQueryUrl;
        this.favoritesTool.absRfModifyUrl = this.absRfModifyUrl;
        this.favoritesTool.getFavoritesList().subscribe((/**
         * @param {?} result
         * @return {?}
         */
        (result) => {
            /** @type {?} */
            const resData = result ? ((/** @type {?} */ (result))).orgData : [];
            this.favoritesTool.favoritesList = resData;
            this.favoritesTool.setFavoritesList(resData);
        }));
    }
    // 打开选组织弹窗
    /**
     * @return {?}
     */
    showFarrisDialog() {
        this.isShow = true;
        this.ngZone.runOutsideAngular((/**
         * @return {?}
         */
        () => {
            setTimeout((/**
             * @return {?}
             */
            () => {
                this.dialog.show();
                if (this.showTabIds.indexOf(this.favoritesTabId) !== -1) {
                    this.initFavorites();
                }
                if (this.againstSingleSelect) {
                    this.notifyService.warning(this.localeService.getValue("organizationSelector.errorMessage.multiSelect"));
                    return;
                }
                if (this.mapFields && !Object.keys(this.mapFields).includes(this.primaryField)) {
                    this.notifyService.warning(this.localeService.getValue("organizationSelector.errorMessage.mapFields"));
                    return;
                }
                this.stateMgr.emitSelections(this.selections, ChangeType.ValueChanged, 'form');
            }));
        }));
    }
    // input文本框内点击清除按钮时触发
    /**
     * @return {?}
     */
    clearAll() {
        this.selections = [];
        this.assembleFinalText();
        this.onModelChange(this.finalText.join());
        this.onModelTouched(this.finalText.join());
        this.emitSelections([]);
        this.inputClear.emit();
    }
    // input文本框内删除某一个已选组织时触发
    /**
     * @param {?} data
     * @param {?} index
     * @return {?}
     */
    removeItem(data, index) {
        if (this.selections.length > 0) {
            this.selections.splice(index, 1);
            this.assembleFinalText();
            this.emitSelections(data, ChangeType.Remove);
        }
        else {
            this.finalText = this.finalText.filter((/**
             * @param {?} text
             * @return {?}
             */
            text => text !== data));
        }
        this.onModelChange(this.finalText.join());
        this.onModelTouched(this.finalText.join());
        this.tagRemoved.emit({
            deleteItem: data,
            deleteIndex: index,
            selections: this.selections
        });
    }
    // 清空最近已选组织
    /**
     * @return {?}
     */
    clearSeletions() {
        this.stateMgr.emitSelections([], ChangeType.ValueChanged, 'form');
    }
    // 点击搜索按钮或者敲击回车时触发
    /**
     * @return {?}
     */
    onSearch() {
        if (!!this.searchText) {
            this.hideSearchPanel = false;
            this.onSearchToken = CommonUtil.newGuid();
        }
    }
    // 清空组织搜索内容时触发
    /**
     * @return {?}
     */
    clearSearch() {
        this.hideSearchPanel = true;
        this.onSearchToken = false;
    }
    // 监听搜索框内输入的文本
    /**
     * @param {?} e
     * @return {?}
     */
    listenSearchText(e) {
        if (e.code === 'Backspace' || e.code === 'Delete') {
            if (!this.searchText) {
                this.clearSearch();
            }
        }
    }
    // 监听搜索页的关闭事件，目前只会接收到true
    /**
     * @param {?} e
     * @return {?}
     */
    listenClosePanelChange(e) {
        this.hideSearchPanel = e;
        // 关闭搜索结果页后，需要更新树节点的是否选中状态
        if (this.currentTabId == this.organizationTabId) {
            this.libOrgTree.farrisTree.clearAll();
            this.libOrgTree.farrisTree.rowHeight = 28;
            if (this.multiSelect) {
                this.libOrgTree.checkOrgTreeNodes();
            }
            else {
                this.libOrgTree.selectOrgTreeNode();
            }
        }
    }
    // 关闭保存群组的弹窗时点击“取消”或者右上角叉号触发
    /**
     * @return {?}
     */
    closeGroupDialog() {
        this.groupDialogOpend = false;
        this.editingGroupId = null;
        this.groupTitle = null;
        this.groupNote = null;
        this.groupDialogTitle = this.localeService.getValue("organizationSelector.group.saveGroup");
    }
    // 在保存群组的弹窗内，修改群组名称时触发，监听keyup事件
    /**
     * @param {?} e
     * @return {?}
     */
    listenGroupTitle(e) {
        this.groupTitleStream.next(this.groupTitle);
    }
    // 选组织的弹窗内有一个“已选”标志，鼠标移上去后会显示已选组织的页面，该页面内有“保存为群组”的按钮，点击后可以打开保存群组的弹窗
    /**
     * @param {?} e
     * @return {?}
     */
    listenOpenGroup(e) {
        this.groupDialogOpend = e;
        this.groupDialogTitle = this.localeService.getValue("organizationSelector.group.saveGroup");
    }
    // 点击群组编辑按钮触发，可修改选中群组的名称及描述
    /**
     * @param {?} item
     * @return {?}
     */
    listenGroupChange(item) {
        this.groupDialogOpend = true;
        this.editingGroupId = item.id;
        this.groupTitle = item.title;
        this.groupNote = item.description;
        this.groupDialogTitle = this.localeService.getValue("organizationSelector.group.editGroup");
    }
    // 关闭保存群组的弹窗时点击“确定”触发，将当前已选组织保存为一个新的群组
    /**
     * @return {?}
     */
    saveGroup() {
        if (!this.groupTitle) {
            this.validGroupTitle = false;
            return;
        }
        /** @type {?} */
        const groupId = CommonUtil.newGuid();
        /** @type {?} */
        let groupCode = 'orgGroup_private_';
        groupCode += Math.random().toString(16).substring(2, 10);
        /** @type {?} */
        const addIds = [];
        this.selections.forEach((/**
         * @param {?} selection
         * @return {?}
         */
        selection => {
            addIds.push(selection[this.primaryField]);
        }));
        if (addIds.length > 1000) {
            this.messageService.show('warning', this.localeService.getValue("organizationSelector.errorMessage.limit"), true);
            this.groupDialogOpend = false;
            this.groupTitle = null;
            this.groupNote = null;
            return;
        }
        this.groupDialogOpend = false;
        /** @type {?} */
        const body = {
            groupId,
            groupCode,
            title: this.groupTitle,
            description: this.groupNote,
            absOrgType: this.absOrgType,
            changeType: Number(1)
        };
        if (this.editingGroupId) {
            body.groupId = this.editingGroupId;
            body.changeType = Number(2);
            delete body.groupCode;
            this.updateNameOrNote(body);
            return;
        }
        /** @type {?} */
        const newGroup$ = this.apiService.saveGroup(body);
        newGroup$.pipe(switchMap((/**
         * @param {?} res
         * @return {?}
         */
        (res) => {
            if (res) {
                this.libOrgGroup.selectedGroupId = groupId;
                this.groupTitle = null;
                this.groupNote = null;
                /** @type {?} */
                const addOrgsInNewGroup$ = this.apiService.saveGroup({ groupId, addIds, deleteIds: [], changeType: Number(3) });
                return addOrgsInNewGroup$.pipe(tap((/**
                 * @param {?} data
                 * @return {?}
                 */
                (data) => {
                    if (data) {
                        this.libOrgGroup.getGroupList({ saveGroup: true });
                    }
                }), (/**
                 * @param {?} error
                 * @return {?}
                 */
                (error) => {
                    throw new Error(this.localeService.getValue("organizationSelector.errorMessage.saveOrganization"));
                })));
            }
        })), tap((/**
         * @return {?}
         */
        () => {
        }), (/**
         * @param {?} error
         * @return {?}
         */
        (error) => {
            this.messageService.show('error', this.localeService.getValue("organizationSelector.errorMessage.saveGroup"), true);
        }))).subscribe();
    }
    /**
     * @private
     * @param {?} param
     * @return {?}
     */
    updateNameOrNote(param) {
        /** @type {?} */
        const updateInfo$ = this.apiService.saveGroup(param);
        updateInfo$.pipe(tap((/**
         * @param {?} data
         * @return {?}
         */
        (data) => {
            if (data) {
                this.editingGroupId = null;
                this.groupTitle = null;
                this.groupNote = null;
                this.groupDialogTitle = this.localeService.getValue("organizationSelector.group.saveGroup");
                this.libOrgGroup.getGroupList({ updateNameOrNote: true });
            }
        }), (/**
         * @param {?} error
         * @return {?}
         */
        (error) => {
            this.messageService.show('error', this.localeService.getValue("organizationSelector.errorMessage.editGroup"), true);
        }))).subscribe();
    }
    // 点击选组织弹窗的确定或者取消按钮时触发，1为确定，0为取消
    /**
     * @param {?} type
     * @return {?}
     */
    returnResult(type) {
        /** @type {?} */
        let finalText = '';
        if (!!type) {
            this.confirmToken = true;
            this.assembleFinalText();
            finalText = this.finalText.join();
            if (this.selections && this.selections.length) {
                this.selectionsChange.emit({
                    selections: this.selections
                });
                this.onModelChange(finalText);
                this.onModelTouched(finalText);
            }
            else {
                this.onModelChange(finalText);
                this.onModelTouched(finalText);
                this.selectionsChange.emit({
                    selections: this.selections
                });
            }
        }
        else {
            if (this.mapFields) {
                this.mapFields2Component();
            }
            else {
                this.assembleDataByOrgIds(this.orgIds);
            }
        }
        // this.orgIds = [];
        this.dialog.close();
        this.isShow = false;
    }
    /**
     * @param {?} e
     * @return {?}
     */
    changeTabs(e) {
        this.currentTabId = e.nextId;
        if (this.showTabIds.includes(this.organizationTabId)) {
            this.libOrgTree.currentTabId = this.currentTabId;
        }
        if (e.nextId === this.groupTabId) {
            if (!this.libOrgGroup.groupData.public.length && !this.libOrgGroup.groupData.personal.length) {
                this.libOrgGroup.assembleData(true);
            }
        }
        else if (e.nextId === this.organizationTabId) {
            if (this.libOrgTree.initLoad) {
                this.libOrgTree.loadTreeData();
            }
            else {
                this.libOrgTree.farrisTree.clearAll();
                this.libOrgTree.farrisTree.rowHeight = 28;
                if (this.multiSelect) {
                    this.libOrgTree.checkOrgTreeNodes();
                }
                else {
                    this.libOrgTree.selectOrgTreeNode();
                }
            }
        }
    }
}
OrganizationSelectorComponent.decorators = [
    { type: Component, args: [{
                selector: 'farris-organization-selector',
                template: "<div #tagbox class=\"input-group s-input-group\" *ngIf=\"showInput\" [class.farris-input-group-readonly]=\"readonly\">\r\n  <div class=\"form-control f-cmp-inputgroup--multi-wrapper multi-more\">\r\n    <div class=\"multi--content\" *ngFor=\"let item of finalText; index as i\" [title]=\"item\">\r\n      <span class=\"multi--item\">\r\n        {{item}}\r\n      </span>\r\n      <i class=\"f-icon f-icon-close cursor-pointer\" *ngIf=\"!readonly\" style=\"margin-top: 1px;\"\r\n        (click)=\"removeItem(item, i)\"></i>\r\n    </div>\r\n    <span class=\"multi-another\" *ngIf=\"finalText.length === 0\">{{placeholder}}</span>\r\n  </div>\r\n  <div *ngIf=\"!readonly\" class=\"input-group-append\" title=\"\">\r\n    <span *ngIf=\"finalText && finalText.length > 0\" class=\"input-group-text input-group-clear cursor-pointer\"\r\n      (click)=\"clearAll()\">\r\n      <i class=\"f-icon modal_close\"></i>\r\n    </span>\r\n    <span class=\"input-group-text cursor-pointer\" (click)=\"showFarrisDialog()\">\r\n      <span class=\"f-icon f-icon-lookup\"></span>\r\n    </span>\r\n  </div>\r\n</div>\r\n\r\n<farris-dialog #farrisDialog *ngIf=\"isShow\" class=\"fos-dialog\" [resizable]=\"false\" id=\"{{dialogId}}\"\r\n  [draggable]=\"draggable\" [buttons]=\"buttonRef\" [beforeClose]=\"farrisDialogbeforeClose\" [showMaxButton]=\"false\"\r\n  [width]=\"760\" [height]=\"dialogHeight\" [title]=\"'organizationSelector.selection.selectionDialogTitle' | locale\">\r\n  <div class=\"fos-content\">\r\n    <div class=\"fos-content-container\">\r\n      <div class=\"fos-content-main\">\r\n        <lib-search #searchResultPage [primaryField]=\"primaryField\" [multiSelect]=\"multiSelect\"\r\n          [enableFavorites]=\"enableFavorites\" [absOrgType]=\"absOrgType\" [notGetStopOrg]=\"notGetStopOrg\"\r\n          [onSearch]=\"onSearchToken\" [searchText]=\"searchText\" [pageSize]=\"searchPageSize\"\r\n          (closePanelChange)=\"listenClosePanelChange($event)\" [hidden]=\"hideSearchPanel\">\r\n        </lib-search>\r\n        <input-group class=\"fos-search-input\" id=\"org-search-input\" [placeholder]=\"'organizationSelector.selection.searchPlaceHolder' | locale\"\r\n          [(value)]=\"searchText\" [groupText]=\"searchIcon\" (enterHandle)=\"onSearch()\" (clickHandle)=\"onSearch()\"\r\n          (keyup)=\"listenSearchText($event)\" (clear)=\"clearSearch()\" *ngIf=\"!dataPermission\">\r\n        </input-group>\r\n        <farris-tabs #selectTabs class=\"fos-tabs\" [value]=\"activeTabId\" [width]=\"'100%'\" [contentFill]=\"true\" (tabChange)=\"changeTabs($event)\">\r\n          <!-- \u7EC4\u7EC7\u673A\u6784  START -->\r\n          <farris-tab [title]=\"'organizationSelector.selection.organization' | locale\" [id]=\"organizationTabId\" *ngIf=\"showTabIds.indexOf(organizationTabId) !== -1\">\r\n            <ng-template #content>\r\n              <lib-org #libOrgTree [enableHierarchicalLoading]=\"enableHierarchicalLoading\" [notGetStopOrg]=\"notGetStopOrg\"\r\n                [enableFavorites]=\"enableFavorites\" [primaryField]=\"primaryField\" [cascadeCheck]=\"cascadeCheck\"\r\n                [cascadeDown]=\"cascadeDown\" [cascadeUp]=\"cascadeUp\" [keepSelect]=\"keepSelect\" [virtualizedLoad]=\"virtualizedLoad\"\r\n                [multiSelect]=\"multiSelect\" [absOrgType]=\"absOrgType\" [layer]=\"layer\" [orgIds]=\"orgIds\"\r\n                [selectedLimit]=\"selectedLimit\" [showCheckAll]=\"showCheckAll\" [activeTabId]=\"activeTabId\" [isActiveTab]=\"orgTabActive\"\r\n                [dataPermission]=\"dataPermission\" [dataPermissionIds]=\"dataPermissionIds\">\r\n              </lib-org>\r\n            </ng-template>\r\n          </farris-tab>\r\n          <!-- \u7EC4\u7EC7\u673A\u6784  END -->\r\n          <!-- \u6211\u7684\u6536\u85CF  START -->\r\n          <farris-tab [title]=\"'organizationSelector.selection.favorites' | locale\" [id]=\"favoritesTabId\" *ngIf=\"showTabIds.indexOf(favoritesTabId) !== -1\">\r\n            <ng-template #content>\r\n              <lib-favorites #libOrgFavorites [primaryField]=\"primaryField\" [multiSelect]=\"multiSelect\"></lib-favorites>\r\n            </ng-template>\r\n          </farris-tab>\r\n          <!-- \u6211\u7684\u6536\u85CF  END -->\r\n          <!-- \u5E38\u7528\u7FA4\u7EC4\u5C55\u793A\u533A  START -->\r\n          <farris-tab [title]=\"'organizationSelector.selection.group' | locale\" [id]=\"groupTabId\" *ngIf=\"showTabIds.indexOf(groupTabId) !== -1\">\r\n            <ng-template #content>\r\n              <lib-group #libOrgGroup \r\n                [primaryField]=\"primaryField\" [absOrgType]=\"absOrgType\" [multiSelect]=\"multiSelect\"\r\n                [enableFavorites]=\"enableFavorites\" [groupApiUrl]=\"groupApiUrl\" [notGetStopOrg]=\"notGetStopOrg\"\r\n                [enableHierarchicalLoading]=\"enableHierarchicalLoading\" [cascadeCheck]=\"cascadeCheck\"\r\n                [cascadeDown]=\"cascadeDown\" [cascadeUp]=\"cascadeUp\" [keepSelect]=\"keepSelect\" [virtualizedLoad]=\"virtualizedLoad\"\r\n                [layer]=\"layer\" [selectedLimit]=\"selectedLimit\" [showCheckAll]=\"showCheckAll\" [isActiveTab]=\"groupTabActive\"\r\n                (groupChange)=\"listenGroupChange($event)\">\r\n              </lib-group>\r\n            </ng-template>\r\n          </farris-tab>\r\n          <!-- \u5E38\u7528\u7FA4\u7EC4\u5C55\u793A\u533A  END -->\r\n        </farris-tabs>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n  <div class=\"s-personnel-group\" *ngIf=\"groupDialogOpend\">\r\n    <div class=\"s-personnel-group-title\">\r\n      <span class=\"f-icon f-sidebar-close\" (click)=\"closeGroupDialog()\"></span>{{groupDialogTitle}}\r\n    </div>\r\n    <div class=\"f-form-layout farris-form farris-form-controls-inline\" style=\"margin-top: 22px;\">\r\n      <div class=\"col-12 col-md-12 col-xl-12 col-el-12\">\r\n        <div class=\"farris-group-wrap\">\r\n          <div class=\"form-group farris-form-group\">\r\n            <label class=\"col-form-label\" style=\"width: 4.2rem\" for=\"month_4c7f0115_7796_42b4_bf41_beb7299dd84f_caum\">\r\n              <span class=\"farris-label-info text-danger\">*</span>\r\n              <span class=\"farris-label-text\">{{'organizationSelector.group.newGroupName' | locale}}</span>\r\n            </label>\r\n            <div class=\"farris-input-wrap\">\r\n                <input class=\"form-control\" id=\"month_4c7f0115_7796_42b4_bf41_beb7299dd84f_caum\"\r\n                (keyup)=\"listenGroupTitle($event)\" placeholder=\"{{'organizationSelector.group.newGroupPlaceHolder' | locale}}\"\r\n                [ngStyle]=\"{'border-color': !validGroupTitle ? 'red' : '#D8DCE6'}\" [(ngModel)]=\"groupTitle\" />\r\n              <!--\r\n                <language-textbox id=\"month_4c7f0115_7796_42b4_bf41_beb7299dd84f_caum\" \r\n                [ngStyle]=\"{'border-color': !validGroupTitle ? 'red' : '#D8DCE6'}\"\r\n                [languages]=\"languagesArray\" [editable]=\"true\" [enableClear]=\"true\" [(ngModel)]=\"groupTitle\"\r\n                (keyup)=\"listenGroupTitle($event)\">\r\n              </language-textbox>\r\n              -->\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-12 col-md-12 col-xl-12 col-el-12\" style=\"margin-top: 4px;\">\r\n        <div class=\"farris-group-wrap\">\r\n          <div class=\"form-group farris-form-group\">\r\n            <label class=\"col-form-label\" style=\"width: 4.2rem\"\r\n              for=\"billNote_7b43d269_2dd3_4777_8cfb_bd0c721575cf_hh9s\">\r\n              <span class=\"farris-label-text\">{{'organizationSelector.group.newGroupNote' | locale}}</span>\r\n            </label>\r\n            <div class=\"farris-input-wrap\">\r\n              <textarea class=\"form-control\" style=\"height: 66px;\" [(ngModel)]=\"groupNote\"\r\n                id=\"billNote_7b43d269_2dd3_4777_8cfb_bd0c721575cf_hh9s\" placeholder=\"{{'organizationSelector.group.newGroupPlaceHolder' | locale}}\"></textarea>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"s-personnel-group-footer\">\r\n      <input type=\"button\" class=\"btn btn-primary fr\" style=\"width: 100px;\" value=\"{{'organizationSelector.selection.confirm' | locale}}\" (click)=\"saveGroup()\" />\r\n      <input type=\"button\" class=\"btn btn-secondary fr mr-3\" value=\"{{'organizationSelector.selection.cancel' | locale}}\" (click)=\"closeGroupDialog()\" />\r\n    </div>\r\n  </div>\r\n</farris-dialog>\r\n\r\n<ng-template #buttonRef>\r\n  <div class=\"fos-dialog-footer\">\r\n    <span class=\"fosd-footer-selection\" (mouseover)=\"selectionsShow=true\"\r\n      (mouseout)=\"selectionsShow=false\">{{'organizationSelector.selection.firstSelectionText' | locale}}\r\n      <a>{{selections.length}}</a>{{'organizationSelector.selection.lastSelectionText' | locale}}</span>\r\n    <span class=\"fosd-footer-clear\" (click)=\"clearSeletions()\">{{'organizationSelector.selection.clear' | locale}}</span>\r\n    <lib-selection #selectedComponent class=\"fosd-selection-content\" [primaryField]=\"primaryField\"\r\n      [enableGroup]=\"enableGroup\" (mouseover)=\"selectionsShow=true\" (mouseout)=\"selectionsShow=false\"\r\n      [hidden]=\"!selectionsShow\" (openedChange)=\"listenOpenGroup($event)\"></lib-selection>\r\n  </div>\r\n  <input type=\"button\" class=\"btn btn-secondary\" value=\"{{'organizationSelector.selection.cancel' | locale}}\" (click)=\"returnResult(0)\" />\r\n  <input type=\"button\" class=\"btn btn-primary\" style=\"width: 100px;\" value=\"{{'organizationSelector.selection.confirm' | locale}}\" (click)=\"returnResult(1)\" />\r\n</ng-template>",
                providers: [
                    {
                        provide: NG_VALUE_ACCESSOR,
                        useExisting: forwardRef((/**
                         * @return {?}
                         */
                        () => OrganizationSelectorComponent)),
                        multi: true
                    },
                    FavoritesTool, ApiService, StateMgrTool
                ],
                styles: [".fos-dialog .fos-content{width:100%;height:100%;min-width:760px;overflow:hidden}.fos-dialog ::ng-deep .modal-content{border-radius:10px}.fos-dialog ::ng-deep .modal-header{color:#2d2f33;border-bottom:none;padding:15px 0 15px 24px}.fos-dialog ::ng-deep .actions{padding-right:22px;font-size:20px}.fos-dialog ::ng-deep .modal-title-label{font-size:17px;font-weight:600}.fos-dialog ::ng-deep .modal-footer{padding:17px 24px;background:#fff;border-top:none}.fos-dialog .fos-content .fos-content-container{display:-webkit-box;display:flex;width:calc(100% - 48px);height:100%;margin:0 24px;border:1px solid #dee1ea;border-radius:3px}.fos-dialog .fos-content .fos-content-container .fos-content-main{-webkit-box-flex:0;flex:0 0 100%;position:relative;display:-webkit-box;display:flex}.fos-dialog .fos-content .fos-content-container .fos-content-main .fos-search-input{position:absolute;top:7px;right:14px;color:#959ab1;z-index:99;width:320px}.fos-dialog .fos-content .fos-content-container .fos-content-main .fos-tabs{min-width:575px}.fos-dialog ::ng-deep .fos-tabs .nav-link{line-height:18px;padding:11px 0!important}.fos-dialog ::ng-deep .fos-tabs .farris-tabs-header{background:#f9f9f9}.fos-dialog ::ng-deep .fos-tabs .nav-item{margin-right:30px}.fos-dialog ::ng-deep .fos-tabs .nav{padding-left:14px;font-size:16px;font-weight:600}.fos-dialog ::ng-deep .fos-tabs .nav-item .st-tab-text{color:#6f8cb4}.fos-dialog ::ng-deep .fos-tabs .nav-item .active .st-tab-text{color:#2a87ff}.fos-dialog::ng-deep input::-webkit-input-placeholder{color:#b4bccc;font-size:13px;line-height:24px}.fos-dialog ::ng-deep input::-moz-input-placeholder{color:#b4bccc;font-size:13px;line-height:24px}.fos-dialog ::ng-deep input::-ms-input-placeholder{color:#b4bccc;font-size:13px;line-height:24px}.fos-dialog ::ng-deep .fos-search-input .form-control{line-height:26px;height:26px;font-size:13px}.fos-dialog ::ng-deep .fos-treetable .farris-treetable-thead{background:#fff;font-size:13px}.fos-dialog ::ng-deep .fos-treetable .farris-treetable-thead th .tt-checkbox .custom-control-label::before{top:2px;margin:0}.fos-dialog ::ng-deep .fos-treetable .farris-treetable-thead th:hover{background:#fff}.fos-dialog ::ng-deep .fos-treetable .treetable-cell-content span{font-size:13px}:host .input-group .input-group-append{background:#fff}:host .s-input-group .input-group-text{color:rgba(0,0,0,.25)}:host .cursor-pointer{cursor:pointer}:host .s-input-group .multi-more{padding:0 0 2px 8px;height:auto;min-height:24px;-webkit-box-flex:1;flex:1;overflow:hidden}:host .s-input-group .multi--content{display:-webkit-box;display:flex;flex-wrap:nowrap;cursor:default;padding:0 5px;background:#ebf7fe;border:1px solid #cfedff;margin:3px 3px 0 0;float:left;height:17px;border-radius:3px;line-height:17px;-webkit-box-pack:justify;justify-content:space-between;box-sizing:content-box;max-width:calc(100% - 10px)}:host .s-input-group .multi--item{line-height:16px;text-overflow:ellipsis;height:16px;-webkit-box-flex:1;flex:1;overflow:hidden;word-break:break-all}:host .s-input-group .multi-another{padding:3px 3px 0 0;line-height:16px;float:left;height:17px;box-sizing:content-box;border:1px solid #fff;color:#bfbfbf}.fos-dialog ::ng-deep .fos-dialog-footer{width:200px;height:30px;line-height:30px;position:absolute;left:24px;text-align:left;cursor:default}.fos-dialog ::ng-deep .fos-dialog-footer .fosd-footer-selection{font-size:14px;color:#2d2f33;background:#f4f9ff;border-radius:5px;padding:2px 5px}.fos-dialog ::ng-deep .fos-dialog-footer .fosd-footer-selection a{font-size:17px;color:#2a87ff}.fos-dialog ::ng-deep .fos-dialog-footer .fosd-footer-clear{font-size:13px;color:#2a87ff;margin-left:1rem;cursor:pointer}.fos-dialog ::ng-deep .fos-dialog-footer .fosd-selection-content{position:absolute;bottom:25px;left:-10px;background:#fff;z-index:102}.fos-dialog::ng-deep .pagination-container{height:1.5rem;margin-bottom:21px}.fos-dialog::ng-deep .pagination-container input::-webkit-inner-spin-button,.fos-dialog::ng-deep .pagination-container input::-webkit-outer-spin-button{-webkit-appearance:none}.fos-dialog::ng-deep .pagination-container input[type=number]{-moz-appearance:textfield;text-align:center;width:38px;line-height:20px;border:1px solid #e9ecf3;border-radius:6px;box-shadow:0 2px 6px 0 rgba(31,35,41,.06);margin-left:4px;outline:0}.fos-dialog::ng-deep .pagination-container input[type=number]:focus{border:1px solid #0084ff}.fos-dialog::ng-deep .pagination-container li{line-height:22px}.fos-dialog ::ng-deep .fos-treetable td{border-color:#fff}.fos-dialog ::ng-deep .default-light-color{color:#f7b500}.fos-dialog ::ng-deep .default-dark-color{color:#d8dce6}.fos-dialog ::ng-deep .s-personnel-group{width:440px;height:250px;border-radius:5px;background:#fff;box-shadow:0 0 40px 0 rgba(0,0,0,.2);padding:16px 24px;position:fixed;top:50%;left:50%;margin-left:-220px;margin-top:-125px;z-index:9999}.fos-dialog ::ng-deep .s-personnel-group .s-personnel-group-title{font-size:17px;line-height:24px;color:#2d2f33;font-weight:600}.fos-dialog ::ng-deep .s-personnel-group .s-personnel-group-title .f-icon{float:right;font-size:20px;color:#878d99;margin-top:3px;cursor:pointer}.fos-dialog ::ng-deep .s-personnel-group .s-personnel-group-footer{margin-top:20px}.fos-dialog ::ng-deep .s-personnel-group .col-12{padding:0}.fos-dialog ::ng-deep .s-personnel-group-footer .title-checkall{margin-top:6px}.fos-dialog ::ng-deep .s-personnel-group .farris-label-text{color:#5a5e66}.fos-dialog ::ng-deep .s-personnel-group .s-personnel-group-footer .fr{float:right;height:32px}"]
            }] }
];
/** @nocollapse */
OrganizationSelectorComponent.ctorParameters = () => [
    { type: Renderer2 },
    { type: Injector },
    { type: FavoritesTool },
    { type: ApiService },
    { type: NgZone },
    { type: StateMgrTool }
];
OrganizationSelectorComponent.propDecorators = {
    baseCls: [{ type: HostBinding, args: ['class.f-organization-selector',] }],
    width: [{ type: HostBinding, args: ['style.width',] }, { type: Input }],
    dialog: [{ type: ViewChild, args: ['farrisDialog',] }],
    libOrgGroup: [{ type: ViewChild, args: ['libOrgGroup',] }],
    libOrgTree: [{ type: ViewChild, args: ['libOrgTree',] }],
    libOrgFavorites: [{ type: ViewChild, args: ['libOrgFavorites',] }],
    showInput: [{ type: Input }],
    busNum: [{ type: Input }],
    multiSelect: [{ type: Input }],
    placeholder: [{ type: Input }],
    searchPlaceholder: [{ type: Input }],
    readonly: [{ type: Input }],
    absUserOrgUrl: [{ type: Input }],
    absRfQueryUrl: [{ type: Input }],
    absRfModifyUrl: [{ type: Input }],
    groupApiUrl: [{ type: Input }],
    groupExtendUrl: [{ type: Input }],
    absOrgType: [{ type: Input }],
    enableHierarchicalLoading: [{ type: Input }],
    notGetStopOrg: [{ type: Input }],
    primaryField: [{ type: Input }],
    displayField: [{ type: Input }],
    orgIds: [{ type: Input }],
    layer: [{ type: Input }],
    cascadeCheck: [{ type: Input }],
    cascadeDown: [{ type: Input }],
    cascadeUp: [{ type: Input }],
    showCheckAll: [{ type: Input }],
    keepSelect: [{ type: Input }],
    formatFn: [{ type: Input }],
    selectedLimit: [{ type: Input }],
    showTabIds: [{ type: Input }],
    activeTabId: [{ type: Input }],
    searchPageSize: [{ type: Input }],
    mapFields: [{ type: Input }],
    multipleChoiceSeparator: [{ type: Input }],
    draggable: [{ type: Input }],
    virtualizedLoad: [{ type: Input }],
    dataPermission: [{ type: Input }],
    dataPermissionIds: [{ type: Input }],
    selectionsChange: [{ type: Output }],
    inputClear: [{ type: Output }],
    tagRemoved: [{ type: Output }]
};
if (false) {
    /** @type {?} */
    OrganizationSelectorComponent.prototype.baseCls;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.width;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.dialog;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.libOrgGroup;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.libOrgTree;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.libOrgFavorites;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.showInput;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.busNum;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.multiSelect;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.placeholder;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.searchPlaceholder;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.readonly;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.absUserOrgUrl;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.absRfQueryUrl;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.absRfModifyUrl;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.groupApiUrl;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.groupExtendUrl;
    /**
     * 数据源类型
     * 默认为： System_organization  系统数据源   获取系统人员、系统组织
     * Administrative_organization  已扩展数据源  获取行政组织、行政人员
     * absOrgType {string}
     * PersonnelSelectorComponent
     * @type {?}
     */
    OrganizationSelectorComponent.prototype.absOrgType;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.enableHierarchicalLoading;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.notGetStopOrg;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.primaryField;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.displayField;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.orgIds;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.layer;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.cascadeCheck;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.cascadeDown;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.cascadeUp;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.showCheckAll;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.keepSelect;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.formatFn;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.selectedLimit;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.showTabIds;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.activeTabId;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.searchPageSize;
    /**
     * 字段映射, 仅在farris form中使用{ 帮助数据字段：表单字段 }
     * @type {?}
     */
    OrganizationSelectorComponent.prototype.mapFields;
    /**
     * 多选分隔符
     * @type {?}
     */
    OrganizationSelectorComponent.prototype.multipleChoiceSeparator;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.draggable;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.virtualizedLoad;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.dataPermission;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.dataPermissionIds;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.selectionsChange;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.inputClear;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.tagRemoved;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.selections;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.originalSelections;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.finalText;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.lookupIcon;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.searchIcon;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.organizationTabId;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.groupTabId;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.favoritesTabId;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.dialogHeight;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.dialogId;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.isShow;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.selectionsSub;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.confirmToken;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.hideSearchPanel;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.searchText;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.onSearchToken;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.enableFavorites;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.enableGroup;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.groupDialogOpend;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.groupDialogTitle;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.groupTitle;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.groupNote;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.validGroupTitle;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.groupTitleStream;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.ngControl;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.selectionsShow;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.editingGroupId;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.cdRef;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.currentTabId;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.messageService;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.notifyService;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.orgTabActive;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.groupTabActive;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.againstSingleSelect;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.localeService;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.languagesArray;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.farrisDialogbeforeClose;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.onModelChange;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.onModelTouched;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.render;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.favoritesTool;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.apiService;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.ngZone;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.stateMgr;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3JnYW5pemF0aW9uLXNlbGVjdG9yLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvdWktb3JnYW5pemF0aW9uLXNlbGVjdG9yLyIsInNvdXJjZXMiOlsibGliL29yZ2FuaXphdGlvbi1zZWxlY3Rvci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQWlCLFNBQVMsRUFBRSxZQUFZLEVBQUUsVUFBVSxFQUFFLFdBQVcsRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBZ0MsTUFBTSxFQUFFLFNBQVMsRUFBaUIsU0FBUyxFQUFFLGlCQUFpQixFQUFZLE1BQU0sZUFBZSxDQUFDO0FBQ2pPLE9BQU8sRUFBd0IsU0FBUyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDcEYsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ3BELE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUNsRCxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFDbEQsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLHlCQUF5QixDQUFDO0FBQ3hELE9BQU8sRUFBRSxVQUFVLEVBQTBDLE1BQU0scUJBQXFCLENBQUM7QUFDekYsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLHlCQUF5QixDQUFDO0FBQ3ZELE9BQU8sRUFBRSxPQUFPLEVBQWdCLE1BQU0sTUFBTSxDQUFDO0FBQzdDLE9BQU8sS0FBSyxDQUFDLE1BQU0sV0FBVyxDQUFDO0FBQy9CLE9BQU8sRUFBRSxZQUFZLEVBQUUsb0JBQW9CLEVBQUUsU0FBUyxFQUFFLEdBQUcsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBRXBGLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSw2QkFBNkIsQ0FBQztBQUM3RCxPQUFPLEVBQUUscUJBQXFCLEVBQUUsTUFBTSxpQ0FBaUMsQ0FBQztBQUN4RSxP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d0RBQWlDOztJQUNqQyx1REFBZ0M7O0lBQ2hDLDBEQUEwQzs7SUFDMUMseURBQXFEOztJQUVyRCxtREFBK0M7O0lBRS9DLG1EQUErQzs7SUFFL0MsbURBQWdCOztJQUNoQiwyREFBd0I7O0lBQ3hCLGtEQUFlOztJQUNmLG1EQUFvRDs7SUFDcEQsbURBQXVEOztJQUN2RCwwREFBbUM7O0lBQ25DLG1EQUFxQjs7SUFDckIsdURBQTZCOztJQUM3QixxREFBbUI7O0lBQ25CLGlEQUFzQjs7SUFDdEIsK0NBQWU7Ozs7O0lBQ2Ysc0RBQW9DOzs7OztJQUNwQyxxREFBNkI7O0lBQzdCLHdEQUF1Qjs7SUFDdkIsbURBQWdCOztJQUNoQixzREFBbUI7O0lBQ25CLHdEQUF5Qjs7SUFDekIsb0RBQXFCOztJQUNyQix5REFBeUI7O0lBQ3pCLHlEQUFzQjs7SUFDdEIsbURBQW1COztJQUNuQixrREFBa0I7O0lBQ2xCLHdEQUF1Qjs7Ozs7SUFDdkIseURBQWtFOztJQUNsRSxrREFBc0I7O0lBQ3RCLHVEQUF1Qjs7Ozs7SUFDdkIsdURBQStCOzs7OztJQUMvQiw4Q0FBaUM7Ozs7O0lBQ2pDLHFEQUE2Qjs7Ozs7SUFDN0IsdURBQXdDOzs7OztJQUN4QyxzREFBcUM7O0lBQ3JDLHFEQUE4Qjs7SUFDOUIsdURBQWdDOztJQUNoQyw0REFBcUM7Ozs7O0lBQ3JDLHNEQUE0Qzs7SUFDNUMsdURBSUM7O0lBRUQsZ0VBYUM7O0lBRUQsc0RBQXdDOztJQUN4Qyx1REFBeUM7Ozs7O0lBR3ZDLCtDQUF5Qjs7Ozs7SUFDekIsaURBQTBCOzs7OztJQUMxQixzREFBb0M7Ozs7O0lBQ3BDLG1EQUE4Qjs7Ozs7SUFDOUIsK0NBQXNCOzs7OztJQUN0QixpREFBOEIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBZnRlclZpZXdJbml0LCBDb21wb25lbnQsIEV2ZW50RW1pdHRlciwgZm9yd2FyZFJlZiwgSG9zdEJpbmRpbmcsIEluamVjdG9yLCBJbnB1dCwgTmdab25lLCBPbkNoYW5nZXMsIE9uRGVzdHJveSwgT25Jbml0LCBPdXRwdXQsIFJlbmRlcmVyMiwgU2ltcGxlQ2hhbmdlcywgVmlld0NoaWxkLCBDaGFuZ2VEZXRlY3RvclJlZiwgT3B0aW9uYWwgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgQ29udHJvbFZhbHVlQWNjZXNzb3IsIE5nQ29udHJvbCwgTkdfVkFMVUVfQUNDRVNTT1IgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XHJcbmltcG9ydCB7IERpYWxvZ0NvbXBvbmVudCB9IGZyb20gJ0BmYXJyaXMvdWktZGlhbG9nJztcclxuaW1wb3J0IHsgQXBpU2VydmljZSB9IGZyb20gJy4uL3V0aWxzL2FwaS5zZXJ2aWNlJztcclxuaW1wb3J0IHsgQ29tbW9uVXRpbCB9IGZyb20gJy4uL3V0aWxzL2NvbW1vbi50b29sJztcclxuaW1wb3J0IHsgRmF2b3JpdGVzVG9vbCB9IGZyb20gJy4uL3V0aWxzL2Zhdm9yaXRlcy50b29sJztcclxuaW1wb3J0IHsgQ2hhbmdlVHlwZSwgT3JnUmVxdWVzdFBhcmFtLCBTYXZlR3JvdXBSZXFldXN0UGFyYW0gfSBmcm9tICcuLi91dGlscy9pbmRleC50eXBlJztcclxuaW1wb3J0IHsgU3RhdGVNZ3JUb29sIH0gZnJvbSAnLi4vdXRpbHMvc3RhdGUubWdyLnRvb2wnO1xyXG5pbXBvcnQgeyBTdWJqZWN0LCBTdWJzY3JpcHRpb24gfSBmcm9tICdyeGpzJztcclxuaW1wb3J0ICogYXMgXyBmcm9tICdsb2Rhc2gtZXMnO1xyXG5pbXBvcnQgeyBkZWJvdW5jZVRpbWUsIGRpc3RpbmN0VW50aWxDaGFuZ2VkLCBzd2l0Y2hNYXAsIHRhcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcclxuaW1wb3J0IHsgcmVzdWx0IH0gZnJvbSAnbG9kYXNoJztcclxuaW1wb3J0IHsgR3JvdXBDb21wb25lbnQgfSBmcm9tICcuL3RhYi1ncm91cC9ncm91cC5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBPcmdhbml6YXRpb25Db21wb25lbnQgfSBmcm9tICcuL3RhYi1vcmdhbml6YXRpb24vdG8uY29tcG9uZW50JztcclxuaW1wb3J0IHsgRmF2b3JpdGVzQ29tcG9uZW50IH0gZnJvbSAnLi90YWItZmF2b3JpdGVzL2Zhdm9yaXRlcy5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBNZXNzYWdlclNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLW1lc3NhZ2VyJztcclxuaW1wb3J0IHsgTm90aWZ5U2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbm90aWZ5JztcclxuaW1wb3J0IHsgTG9jYWxlU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbG9jYWxlJztcclxuaW1wb3J0IHsgT1JHQU5JWkFUSU9OX1NFTEVDVE9SX0xPQ0FMRSB9IGZyb20gJy4uL3V0aWxzL2xvY2FsZSc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ2ZhcnJpcy1vcmdhbml6YXRpb24tc2VsZWN0b3InLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi9vcmdhbml6YXRpb24tc2VsZWN0b3IuY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWycuL29yZ2FuaXphdGlvbi1zZWxlY3Rvci5jb21wb25lbnQuY3NzJ10sXHJcbiAgcHJvdmlkZXJzOiBbXHJcbiAgICB7XHJcbiAgICAgIHByb3ZpZGU6IE5HX1ZBTFVFX0FDQ0VTU09SLFxyXG4gICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBPcmdhbml6YXRpb25TZWxlY3RvckNvbXBvbmVudCksXHJcbiAgICAgIG11bHRpOiB0cnVlXHJcbiAgICB9LFxyXG4gICAgRmF2b3JpdGVzVG9vbCwgQXBpU2VydmljZSwgU3RhdGVNZ3JUb29sXHJcbiAgXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgT3JnYW5pemF0aW9uU2VsZWN0b3JDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uQ2hhbmdlcywgQWZ0ZXJWaWV3SW5pdCwgT25EZXN0cm95LCBDb250cm9sVmFsdWVBY2Nlc3NvciB7XHJcblxyXG4gIEBIb3N0QmluZGluZygnY2xhc3MuZi1vcmdhbml6YXRpb24tc2VsZWN0b3InKSBiYXNlQ2xzID0gdHJ1ZTtcclxuICBASG9zdEJpbmRpbmcoJ3N0eWxlLndpZHRoJykgQElucHV0KCkgd2lkdGggPSAnMTAwJSc7XHJcbiAgQFZpZXdDaGlsZCgnZmFycmlzRGlhbG9nJykgZGlhbG9nOiBEaWFsb2dDb21wb25lbnQ7XHJcbiAgQFZpZXdDaGlsZCgnbGliT3JnR3JvdXAnKSBsaWJPcmdHcm91cDogR3JvdXBDb21wb25lbnQ7XHJcbiAgQFZpZXdDaGlsZCgnbGliT3JnVHJlZScpIGxpYk9yZ1RyZWU6IE9yZ2FuaXphdGlvbkNvbXBvbmVudDtcclxuICBAVmlld0NoaWxkKCdsaWJPcmdGYXZvcml0ZXMnKSBsaWJPcmdGYXZvcml0ZXM6IEZhdm9yaXRlc0NvbXBvbmVudDtcclxuICAvLyBpbnB1dOahhuaYr+WQpuaYvuekulxyXG4gIEBJbnB1dCgpIHNob3dJbnB1dCA9IHRydWU7XHJcbiAgLy8g5Lia5Yqh5qCH6K+GXHJcbiAgQElucHV0KCkgYnVzTnVtID0gJ2NvbW1vbic7XHJcbiAgQElucHV0KCkgbXVsdGlTZWxlY3QgPSB0cnVlO1xyXG4gIEBJbnB1dCgpIHBsYWNlaG9sZGVyID0gJ+ivt+mAieaLqSc7XHJcbiAgQElucHV0KCkgc2VhcmNoUGxhY2Vob2xkZXIgPSAn6K+36L6T5YWl57yW5Y+35oiW5ZCN56ew5pCc57SiJztcclxuICBASW5wdXQoKSByZWFkb25seSA9IGZhbHNlO1xyXG4gIC8vIOS8oOWFpeeahHVybFxyXG4gIEBJbnB1dCgpIGFic1VzZXJPcmdVcmwgPSAnL2FwaS9ydW50aW1lL3N5cy92MS4wL2Fic1VzZXJPcmcnO1xyXG4gIEBJbnB1dCgpIGFic1JmUXVlcnlVcmwgPSAnL2FwaS9ydW50aW1lL3N5cy92MS4wL2Fic1JlY2VudENvbnRhY3RzL3F1ZXJ5JztcclxuICBASW5wdXQoKSBhYnNSZk1vZGlmeVVybCA9ICcvYXBpL3J1bnRpbWUvc3lzL3YxLjAvYWJzUmVjZW50Q29udGFjdHMvbW9kaWZ5JztcclxuICBASW5wdXQoKSBncm91cEFwaVVybCA9IFwiL2FwaS9ydW50aW1lL3N5cy92MS4wL29yZy1ncm91cFwiO1xyXG4gIEBJbnB1dCgpIGdyb3VwRXh0ZW5kVXJsID0gJy9wbGF0Zm9ybS9ydW50aW1lL3dmL3dlYmFwcC9uZy1mYXJyaXMtbW9iaWxlLXVpL2V4dGVuZC1vcmcuanMnO1xyXG4gIC8qKlxyXG4gICAqIOaVsOaNrua6kOexu+Wei1xyXG4gICAqIOm7mOiupOS4uu+8miBTeXN0ZW1fb3JnYW5pemF0aW9uICDns7vnu5/mlbDmja7mupAgICDojrflj5bns7vnu5/kurrlkZjjgIHns7vnu5/nu4Tnu4dcclxuICAgKiBBZG1pbmlzdHJhdGl2ZV9vcmdhbml6YXRpb24gIOW3suaJqeWxleaVsOaNrua6kCAg6I635Y+W6KGM5pS/57uE57uH44CB6KGM5pS/5Lq65ZGYXHJcbiAgICogYWJzT3JnVHlwZSB7c3RyaW5nfVxyXG4gICAqIFBlcnNvbm5lbFNlbGVjdG9yQ29tcG9uZW50XHJcbiAgICovXHJcbiAgQElucHV0KCkgYWJzT3JnVHlwZSA9ICdTeXN0ZW1fb3JnYW5pemF0aW9uJztcclxuICAvLyDlkK/nlKjliIblsYLliqDovb1cclxuICBASW5wdXQoKSBlbmFibGVIaWVyYXJjaGljYWxMb2FkaW5nID0gdHJ1ZTtcclxuICAvLyDkuI3ljIXlkKvlgZznlKjnu4Tnu4dcclxuICBASW5wdXQoKSBub3RHZXRTdG9wT3JnID0gdHJ1ZTtcclxuICBASW5wdXQoKSBwcmltYXJ5RmllbGQgPSAnb3JnSWQnO1xyXG4gIEBJbnB1dCgpIGRpc3BsYXlGaWVsZCA9ICduYW1lJztcclxuICBASW5wdXQoKSBvcmdJZHM6IHN0cmluZ1tdID0gW107XHJcbiAgLy8g5bGV5byA5bGC57qnXHJcbiAgQElucHV0KCkgbGF5ZXIgPSAxO1xyXG4gIC8vIOaYr+WQpuWQr+eUqOe6p+iBlOmAieS4rVxyXG4gIEBJbnB1dCgpIGNhc2NhZGVDaGVjayA9IHRydWU7XHJcbiAgLy8g57qn6IGU6YCJ5Lit5LiL57qnXHJcbiAgQElucHV0KCkgY2FzY2FkZURvd24gPSB0cnVlO1xyXG4gIC8vIOe6p+iBlOmAieS4reS4iue6p1xyXG4gIEBJbnB1dCgpIGNhc2NhZGVVcCA9IGZhbHNlO1xyXG4gIC8vIOaYvuekuuWFqOmAieaMiemSrlxyXG4gIEBJbnB1dCgpIHNob3dDaGVja0FsbCA9IGZhbHNlO1xyXG4gIEBJbnB1dCgpIGtlZXBTZWxlY3QgPSBmYWxzZTtcclxuICAvLyDlh73mlbDoh6rlrprkuYnovpPlh7rmoLflvI9cclxuICBASW5wdXQoKSBmb3JtYXRGbjogKG9iajogYW55KSA9PiBzdHJpbmc7XHJcbiAgLy8g5LiA5qyh5oCn5pyA5aSa6YCJ5Lit5aSa5bCR5p2hXHJcbiAgQElucHV0KCkgc2VsZWN0ZWRMaW1pdCA9IDUwO1xyXG4gIEBJbnB1dCgpIHNob3dUYWJJZHMgPSAnb3JnYW5pemF0aW9uLGZhdm9yaXRlcyc7XHJcbiAgQElucHV0KCkgYWN0aXZlVGFiSWQgPSAnb3JnYW5pemF0aW9uJztcclxuICAvLyDmkJzntKLliY3nq6/liIbpobU1MOadoVxyXG4gIEBJbnB1dCgpIHNlYXJjaFBhZ2VTaXplID0gNTA7XHJcbiAgLyoqIOWtl+auteaYoOWwhCwg5LuF5ZyoZmFycmlzIGZvcm3kuK3kvb/nlKh7IOW4ruWKqeaVsOaNruWtl+aute+8muihqOWNleWtl+autSB9ICovXHJcbiAgQElucHV0KCkgbWFwRmllbGRzOiB7IFtzb3VyY2VGaWVsZDogc3RyaW5nXTogc3RyaW5nIH07XHJcbiAgLyoqIOWkmumAieWIhumalOespiAqL1xyXG4gIEBJbnB1dCgpIG11bHRpcGxlQ2hvaWNlU2VwYXJhdG9yID0gJywnO1xyXG4gIEBJbnB1dCgpIGRyYWdnYWJsZSA9IHRydWU7XHJcbiAgQElucHV0KCkgdmlydHVhbGl6ZWRMb2FkID0gZmFsc2U7XHJcbiAgQElucHV0KCkgZGF0YVBlcm1pc3Npb24gPSBmYWxzZTtcclxuICBASW5wdXQoKSBkYXRhUGVybWlzc2lvbklkczogc3RyaW5nW10gPSBbXTtcclxuICBAT3V0cHV0KCkgc2VsZWN0aW9uc0NoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG4gIC8vIOWFqOmDqOa4hemZpOaMiemSruinpuWPkeWbnuiwg1xyXG4gIEBPdXRwdXQoKSBpbnB1dENsZWFyID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcbiAgLy8g5qCH562+5Yig6Zmk5oyJ6ZKu5Ye65Y+R5Zue6LCDXHJcbiAgQE91dHB1dCgpIHRhZ1JlbW92ZWQgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuXHJcbiAgc2VsZWN0aW9ucyA9IFtdO1xyXG4gIG9yaWdpbmFsU2VsZWN0aW9ucyA9IFtdO1xyXG4gIGZpbmFsVGV4dCA9IFtdO1xyXG4gIGxvb2t1cEljb24gPSAnPGkgY2xhc3M9XCJmLWljb24gZi1pY29uLWxvb2t1cFwiPjwvaT4nO1xyXG4gIHNlYXJjaEljb24gPSAnPHNwYW4gY2xhc3M9XCJrLWljb24gay1pLXNlYXJjaFwiPjwvc3Bhbj4nO1xyXG4gIG9yZ2FuaXphdGlvblRhYklkID0gJ29yZ2FuaXphdGlvbic7XHJcbiAgZ3JvdXBUYWJJZCA9ICdncm91cCc7XHJcbiAgZmF2b3JpdGVzVGFiSWQgPSAnZmF2b3JpdGVzJztcclxuICBkaWFsb2dIZWlnaHQgPSA1NDg7XHJcbiAgZGlhbG9nSWQgPSAnZGlhbG9nSWQnO1xyXG4gIGlzU2hvdyA9IGZhbHNlO1xyXG4gIHByaXZhdGUgc2VsZWN0aW9uc1N1YjogU3Vic2NyaXB0aW9uO1xyXG4gIHByaXZhdGUgY29uZmlybVRva2VuID0gZmFsc2U7XHJcbiAgaGlkZVNlYXJjaFBhbmVsID0gdHJ1ZTtcclxuICBzZWFyY2hUZXh0ID0gJyc7XHJcbiAgb25TZWFyY2hUb2tlbjogYW55O1xyXG4gIGVuYWJsZUZhdm9yaXRlczogYm9vbGVhbjtcclxuICBlbmFibGVHcm91cDogYm9vbGVhbjtcclxuICBncm91cERpYWxvZ09wZW5kID0gZmFsc2U7XHJcbiAgZ3JvdXBEaWFsb2dUaXRsZSA9ICcnO1xyXG4gIGdyb3VwVGl0bGU6IHN0cmluZztcclxuICBncm91cE5vdGU6IHN0cmluZztcclxuICB2YWxpZEdyb3VwVGl0bGUgPSB0cnVlO1xyXG4gIHByaXZhdGUgZ3JvdXBUaXRsZVN0cmVhbTogU3ViamVjdDxzdHJpbmc+ID0gbmV3IFN1YmplY3Q8c3RyaW5nPigpO1xyXG4gIHB1YmxpYyBuZ0NvbnRyb2w6IGFueTtcclxuICBzZWxlY3Rpb25zU2hvdyA9IGZhbHNlO1xyXG4gIHByaXZhdGUgZWRpdGluZ0dyb3VwSWQ6IHN0cmluZztcclxuICBwcml2YXRlIGNkUmVmOiBDaGFuZ2VEZXRlY3RvclJlZjtcclxuICBwcml2YXRlIGN1cnJlbnRUYWJJZDogc3RyaW5nO1xyXG4gIHByaXZhdGUgbWVzc2FnZVNlcnZpY2U6IE1lc3NhZ2VyU2VydmljZTtcclxuICBwcml2YXRlIG5vdGlmeVNlcnZpY2U6IE5vdGlmeVNlcnZpY2U7XHJcbiAgb3JnVGFiQWN0aXZlOiBib29sZWFuID0gZmFsc2U7XHJcbiAgZ3JvdXBUYWJBY3RpdmU6IGJvb2xlYW4gPSBmYWxzZTtcclxuICBhZ2FpbnN0U2luZ2xlU2VsZWN0OiBib29sZWFuID0gZmFsc2U7XHJcbiAgcHJpdmF0ZSBsb2NhbGVTZXJ2aWNlOiBMb2NhbGVTZXJ2aWNlID0gbnVsbDtcclxuICBsYW5ndWFnZXNBcnJheSA9IFtcclxuICAgIHsgY29kZTogJ3poLUNIUycsIG5hbWU6ICfkuK3mlofnroDkvZMnLCBkZWZhdWx0OiB0cnVlIH0sXHJcbiAgICB7IGNvZGU6ICdlbicsIG5hbWU6ICdFbmdsaXNoJyB9LFxyXG4gICAgeyBjb2RlOiAnemgtQ0hUJywgbmFtZTogJ+S4reaWh+e5geS9kycgfVxyXG4gIF1cclxuXHJcbiAgZmFycmlzRGlhbG9nYmVmb3JlQ2xvc2UgPSAoKSA9PiB7XHJcbiAgICB0aGlzLmlzU2hvdyA9IGZhbHNlO1xyXG4gICAgaWYgKHRoaXMuY29uZmlybVRva2VuKSB7XHJcbiAgICAgIHRoaXMub3JpZ2luYWxTZWxlY3Rpb25zID0gXy5jbG9uZURlZXAodGhpcy5zZWxlY3Rpb25zKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuc2VsZWN0aW9ucyA9IF8uY2xvbmVEZWVwKHRoaXMub3JpZ2luYWxTZWxlY3Rpb25zKTtcclxuICAgIH1cclxuICAgIGlmKCF0aGlzLmhpZGVTZWFyY2hQYW5lbCB8fCB0aGlzLnNlYXJjaFRleHQpIHtcclxuICAgICAgdGhpcy5zZWFyY2hUZXh0ID0gbnVsbDtcclxuICAgICAgdGhpcy5jbGVhclNlYXJjaCgpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5jb25maXJtVG9rZW4gPSBmYWxzZTtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxuXHJcbiAgb25Nb2RlbENoYW5nZTogYW55ID0gKHZhbD86IGFueSkgPT4geyB9O1xyXG4gIG9uTW9kZWxUb3VjaGVkOiBhbnkgPSAodmFsPzogYW55KSA9PiB7IH07XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgcHJpdmF0ZSByZW5kZXI6IFJlbmRlcmVyMixcclxuICAgIHByaXZhdGUgaW5qZWN0b3I6IEluamVjdG9yLFxyXG4gICAgcHJpdmF0ZSBmYXZvcml0ZXNUb29sOiBGYXZvcml0ZXNUb29sLFxyXG4gICAgcHJpdmF0ZSBhcGlTZXJ2aWNlOiBBcGlTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBuZ1pvbmU6IE5nWm9uZSxcclxuICAgIHByaXZhdGUgc3RhdGVNZ3I6IFN0YXRlTWdyVG9vbFxyXG4gICkge1xyXG4gICAgdGhpcy5hcGlTZXJ2aWNlLmFic1VybCA9IHRoaXMuYWJzVXNlck9yZ1VybDtcclxuICAgIHRoaXMuYXBpU2VydmljZS5ncm91cEFwaVVybCA9IHRoaXMuZ3JvdXBBcGlVcmw7XHJcbiAgICB0aGlzLmNkUmVmID0gdGhpcy5pbmplY3Rvci5nZXQoQ2hhbmdlRGV0ZWN0b3JSZWYpO1xyXG4gICAgdGhpcy5tZXNzYWdlU2VydmljZSA9IHRoaXMuaW5qZWN0b3IuZ2V0KE1lc3NhZ2VyU2VydmljZSwgbnVsbCk7XHJcbiAgICB0aGlzLm5vdGlmeVNlcnZpY2UgPSB0aGlzLmluamVjdG9yLmdldChOb3RpZnlTZXJ2aWNlLCBudWxsKTtcclxuICAgIHRoaXMubG9jYWxlU2VydmljZSA9IHRoaXMuaW5qZWN0b3IuZ2V0KExvY2FsZVNlcnZpY2UpO1xyXG4gICAgaWYoIXRoaXMubG9jYWxlU2VydmljZS5sYW5nRGF0YVsnb3JnYW5pemF0aW9uU2VsZWN0b3InXSkge1xyXG4gICAgICB0aGlzLmxvY2FsZVNlcnZpY2Uuc2V0TG9jYWxlRGF0YShPUkdBTklaQVRJT05fU0VMRUNUT1JfTE9DQUxFKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHdyaXRlVmFsdWUob2JqOiBhbnkpOiB2b2lkIHtcclxuICAgIGlmICghIW9iaiAmJiB0eXBlb2Ygb2JqID09PSAnc3RyaW5nJykge1xyXG4gICAgICB0aGlzLmZpbmFsVGV4dCA9IG9iai5zcGxpdCh0aGlzLm11bHRpcGxlQ2hvaWNlU2VwYXJhdG9yKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuZmluYWxUZXh0ID0gW107XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZWdpc3Rlck9uQ2hhbmdlKGZuOiBhbnkpOiB2b2lkIHtcclxuICAgIHRoaXMub25Nb2RlbENoYW5nZSA9IGZuO1xyXG4gIH1cclxuXHJcbiAgcmVnaXN0ZXJPblRvdWNoZWQoZm46IGFueSk6IHZvaWQge1xyXG4gICAgdGhpcy5vbk1vZGVsVG91Y2hlZCA9IGZuO1xyXG4gIH1cclxuXHJcbiAgc2V0RGlzYWJsZWRTdGF0ZT8oaXNEaXNhYmxlZDogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdNZXRob2Qgbm90IGltcGxlbWVudGVkLicpO1xyXG4gIH1cclxuXHJcbiAgbmdPbkluaXQoKSB7XHJcbiAgICB0aGlzLmluaXREaWFsb2dIZWlnaHQoKTtcclxuICAgIHRoaXMubGlzdGVuU2VsZWN0aW9uc0NoYW5nZSgpO1xyXG4gICAgdGhpcy5pbml0VGFicygpO1xyXG4gICAgdGhpcy5pbml0R3JvdXBTZWFyY2goKTtcclxuICAgIHRoaXMubmdDb250cm9sID0gdGhpcy5pbmplY3Rvci5nZXQoTmdDb250cm9sLCBudWxsKTtcclxuICAgIHRoaXMubWFwRmllbGRzICYmIHRoaXMubWFwRmllbGRzMkNvbXBvbmVudCgpO1xyXG4gIH1cclxuXHJcbiAgbmdBZnRlclZpZXdJbml0KCk6IHZvaWQge1xyXG4gICAgdGhpcy5saXN0ZW5XaW5kb3dSZXNpemUoKTtcclxuICB9XHJcblxyXG4gIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpIHtcclxuICAgIGNvbnN0IG9yZ0lkc0NoYW5nZSA9IGNoYW5nZXMub3JnSWRzO1xyXG4gICAgaWYgKG9yZ0lkc0NoYW5nZSAmJiBvcmdJZHNDaGFuZ2UuY3VycmVudFZhbHVlKSB7XHJcbiAgICAgIHRoaXMuYXNzZW1ibGVEYXRhQnlPcmdJZHMob3JnSWRzQ2hhbmdlLmN1cnJlbnRWYWx1ZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBuZ09uRGVzdHJveSgpIHtcclxuICAgIHRoaXMuc2VsZWN0aW9uc1N1Yi51bnN1YnNjcmliZSgpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBlbWl0U2VsZWN0aW9ucyhzZWxlY3Rpb25zOiBhbnksIGNoYW5nZVR5cGUgPSBDaGFuZ2VUeXBlLlZhbHVlQ2hhbmdlZCwgZnJvbSA9ICdmb3JtJykge1xyXG4gICAgdGhpcy5zdGF0ZU1nci5lbWl0U2VsZWN0aW9ucyhzZWxlY3Rpb25zLCBjaGFuZ2VUeXBlLCBmcm9tKTtcclxuICB9XHJcblxyXG4gIC8vIOagueaNruWtl+auteaYoOWwhOWFs+ezu+iOt+WPluW9k+WJjeW3sumAiee7hOe7h+eahGlk77yM6L+b6ICM5Zyo5omT5byA6YCJ57uE57uH5by556qX5pe26L+b6KGM55u45bqU5bGV56S6XHJcbiAgcHJpdmF0ZSBtYXBGaWVsZHMyQ29tcG9uZW50KCkge1xyXG4gICAgY29uc3QgaGVscEZpZWxkcyA9IE9iamVjdC5rZXlzKHRoaXMubWFwRmllbGRzKTtcclxuICAgIGlmICghaGVscEZpZWxkcy5pbmNsdWRlcyh0aGlzLnByaW1hcnlGaWVsZCkpIHtcclxuICAgICAgLy8gdGhpcy5ub3RpZnlTZXJ2aWNlLndhcm5pbmcodGhpcy5sb2NhbGVTZXJ2aWNlLmdldFZhbHVlKFwib3JnYW5pemF0aW9uU2VsZWN0b3IuZXJyb3JNZXNzYWdlLm1hcEZpZWxkc1wiKSk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmIChcclxuICAgICAgdGhpcy5uZ0NvbnRyb2wgJiZcclxuICAgICAgdGhpcy5uZ0NvbnRyb2wuZm9ybURpcmVjdGl2ZSAmJlxyXG4gICAgICB0aGlzLm5nQ29udHJvbC5mb3JtRGlyZWN0aXZlLmZvcm0gJiZcclxuICAgICAgdGhpcy5uZ0NvbnRyb2wuZm9ybURpcmVjdGl2ZS5mb3JtLmJpbmRpbmdEYXRhXHJcbiAgICApIHtcclxuICAgICAgY29uc3QgYmluZGluZ0RhdGEgPSB0aGlzLm5nQ29udHJvbC5mb3JtRGlyZWN0aXZlLmZvcm0uYmluZGluZ0RhdGE7XHJcbiAgICAgIGlmIChiaW5kaW5nRGF0YS5zZXRWYWx1ZSkge1xyXG4gICAgICAgIGNvbnN0IGJpbmRpbmdQYXRoID0gdGhpcy5uZ0NvbnRyb2wuZm9ybURpcmVjdGl2ZS5mb3JtLmJpbmRpbmdQYXRoO1xyXG4gICAgICAgIGxldCBwYXRoQXJyOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgICAgIGlmIChiaW5kaW5nUGF0aCkge1xyXG4gICAgICAgICAgcGF0aEFyciA9IGJpbmRpbmdQYXRoLnNwbGl0KCcvJykuZmlsdGVyKG4gPT4gbiAhPT0gJycpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBtdWx0aVBhdGggPSB0aGlzLm1hcEZpZWxkc1t0aGlzLnByaW1hcnlGaWVsZF0uc3BsaXQodGhpcy5tdWx0aXBsZUNob2ljZVNlcGFyYXRvcik7XHJcbiAgICAgICAgY29uc3QgZmllbGRQYXRocyA9IHBhdGhBcnIuY29uY2F0KG11bHRpUGF0aFswXS5zcGxpdCgnLicpKTtcclxuICAgICAgICBjb25zdCBpZHMgPSBiaW5kaW5nRGF0YS5nZXRWYWx1ZShmaWVsZFBhdGhzKTtcclxuICAgICAgICBpZiAoIWlkcykge1xyXG4gICAgICAgICAgdGhpcy5lbWl0U2VsZWN0aW9ucyhbXSk7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuYXNzZW1ibGVEYXRhQnlPcmdJZHMoaWRzLnNwbGl0KHRoaXMubXVsdGlwbGVDaG9pY2VTZXBhcmF0b3IpKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8g5qC55o2u5Lyg5YWl55qE57uE57uHaWTmlbDnu4Tojrflj5blr7nlupTnmoTnu4Tnu4dcclxuICAvLyDnlLFuZ09uQ2hhbmdlcygp44CBbWFwRmllbGRzMkNvbXBvbmVudCgp6LCD55SoXHJcbiAgcHJpdmF0ZSBhc3NlbWJsZURhdGFCeU9yZ0lkcyhpZHM6IHN0cmluZ1tdKSB7XHJcbiAgICBpZiAoIWlkcyB8fCBpZHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmIChpZHMgJiYgaWRzLmxlbmd0aCA+IDEgJiYgIXRoaXMubXVsdGlTZWxlY3QpIHtcclxuICAgICAgdGhpcy5hZ2FpbnN0U2luZ2xlU2VsZWN0ID0gdHJ1ZTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcGFyYW06IE9yZ1JlcXVlc3RQYXJhbSA9IHtcclxuICAgICAgYWJzT3JnVHlwZTogdGhpcy5hYnNPcmdUeXBlLFxyXG4gICAgICBpZExpc3Q6IGlkcyxcclxuICAgICAgZ2V0T3JnQWxsUGF0aDogdHJ1ZSxcclxuICAgICAgZ2V0Q3VyVXNlcjogZmFsc2VcclxuICAgIH07XHJcbiAgICB0aGlzLmFwaVNlcnZpY2UuZ2V0T3JnYW5pemF0aW9uKHBhcmFtKS5zdWJzY3JpYmUoKHJlczogYW55KSA9PiB7XHJcbiAgICAgIGlmIChyZXMgJiYgcmVzLmRhdGEpIHtcclxuICAgICAgICB0aGlzLnNlbGVjdGlvbnMgPSByZXMuZGF0YTtcclxuICAgICAgICBpZiAoIXRoaXMubWFwRmllbGRzKSB7XHJcbiAgICAgICAgICB0aGlzLmFzc2VtYmxlRmluYWxUZXh0KCk7XHJcbiAgICAgICAgICBpZih0aGlzLmRhdGFQZXJtaXNzaW9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZW1pdFNlbGVjdGlvbnModGhpcy5zZWxlY3Rpb25zKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5lbWl0U2VsZWN0aW9ucyh0aGlzLnNlbGVjdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyDmnoTpgKDlm57mmL7oh7NpbnB1dOaWh+acrOahhueahOWGheWuuVxyXG4gIC8vIOWcqOaciW1hcEZpZWxkc+eahOWJjeaPkOS4i++8jOeUsWFzc2VtYmxlRGF0YUJ5T3JnSWRzKCnosIPnlKjvvIxjbGVhckFsbCgp44CBcmVtb3ZlSXRlbSgp44CBcmV0dXJuUmVzdWx0KCnkuZ/kvJrosIPnlKhcclxuICBwcml2YXRlIGFzc2VtYmxlRmluYWxUZXh0KCkge1xyXG4gICAgdGhpcy5maW5hbFRleHQgPSBbXTtcclxuICAgIHRoaXMuc2VsZWN0aW9ucy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xyXG4gICAgICBjb25zdCBmb3JtYXRlZE5hbWUgPSB0aGlzLmZvcm1hdEZuICYmIHRoaXMuZm9ybWF0Rm4oaXRlbSk7XHJcbiAgICAgIGNvbnN0IGZpbmFsVGV4dCA9IGZvcm1hdGVkTmFtZSA/IGZvcm1hdGVkTmFtZSA6IGl0ZW1bdGhpcy5kaXNwbGF5RmllbGRdO1xyXG4gICAgICB0aGlzLmZpbmFsVGV4dC5wdXNoKGZpbmFsVGV4dCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuZmluYWxUZXh0ID0gdGhpcy5maW5hbFRleHQuc2xpY2UoKTtcclxuICB9XHJcblxyXG4gIC8vIOWIneWni+WMluW8ueeql2lk5Y+K6auY5bqmXHJcbiAgLy8g55SxbmdPbkluaXQoKeiwg+eUqFxyXG4gIGluaXREaWFsb2dIZWlnaHQoKSB7XHJcbiAgICBjb25zdCB1dWlkID0gQ29tbW9uVXRpbC5uZXdHdWlkKCk7XHJcbiAgICB0aGlzLmRpYWxvZ0lkICs9IHV1aWQ7XHJcbiAgICBjb25zdCB3aW5kb3dJbm5lckhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcclxuICAgIHRoaXMuZGlhbG9nSGVpZ2h0ID0gd2luZG93SW5uZXJIZWlnaHQgLSA2MDtcclxuICAgIGlmICh0aGlzLmRpYWxvZ0hlaWdodCA+IDY4MCkge1xyXG4gICAgICB0aGlzLmRpYWxvZ0hlaWdodCA9IDY4MDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIOebkeWQrHNlbGVjdGlvbnPnmoTlj5jmm7TvvIzlj5jmm7TljIXlkKvkuInnp43lvaLlvI/vvJp2YWx1ZUNoYW5nZeOAgWFwcGVuZOOAgXJlbW92ZVxyXG4gIC8vIOeUsW5nT25Jbml0KCnosIPnlKhcclxuICBsaXN0ZW5TZWxlY3Rpb25zQ2hhbmdlKCkge1xyXG4gICAgdGhpcy5zZWxlY3Rpb25zU3ViID0gdGhpcy5zdGF0ZU1nci5zZWxlY3Rpb25zU3ViamVjdC5zdWJzY3JpYmUoZGF0YSA9PiB7XHJcbiAgICAgIGlmIChkYXRhLmNoYW5nZVR5cGUgPT09IENoYW5nZVR5cGUuVmFsdWVDaGFuZ2VkKSB7XHJcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25zID0gXy5jbG9uZURlZXAoZGF0YS52YWx1ZSk7XHJcbiAgICAgIH0gZWxzZSBpZiAoZGF0YS5jaGFuZ2VUeXBlID09PSBDaGFuZ2VUeXBlLlJlbW92ZSkge1xyXG4gICAgICAgIHRoaXMuc2VsZWN0aW9ucyA9IHRoaXMuc2VsZWN0aW9ucy5maWx0ZXIoaXRlbSA9PiBpdGVtW3RoaXMucHJpbWFyeUZpZWxkXSAhPT0gZGF0YS52YWx1ZVt0aGlzLnByaW1hcnlGaWVsZF0pO1xyXG4gICAgICB9IGVsc2UgaWYgKGRhdGEuY2hhbmdlVHlwZSA9PT0gQ2hhbmdlVHlwZS5BcHBlbmQpIHtcclxuICAgICAgICBDb21tb25VdGlsLmZpbmRJbmRleChkYXRhLnZhbHVlW3RoaXMucHJpbWFyeUZpZWxkXSwgdGhpcy5wcmltYXJ5RmllbGQsIHRoaXMuc2VsZWN0aW9ucykgPT09IC0xID8gdGhpcy5zZWxlY3Rpb25zLnB1c2goZGF0YS52YWx1ZSkgOiBudWxsO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuY2RSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyDmoLnmja5zaG93VGFiSWRz5Yik5pat5piv5ZCm5ZCv55So5pS26JeP5Yqf6IO944CB576k57uE5Yqf6IO9XHJcbiAgLy8g55SxbmdPbkluaXQoKeiwg+eUqFxyXG4gIHByaXZhdGUgaW5pdFRhYnMoKSB7XHJcbiAgICBpZighdGhpcy5zaG93VGFiSWRzLmluY2x1ZGVzKHRoaXMuYWN0aXZlVGFiSWQpKSB7XHJcbiAgICAgIHRoaXMuYWN0aXZlVGFiSWQgPSB0aGlzLnNob3dUYWJJZHMuc3BsaXQoJywnKVswXTtcclxuICAgIH1cclxuICAgIGlmKHRoaXMuZGF0YVBlcm1pc3Npb24pIHtcclxuICAgICAgdGhpcy5zaG93VGFiSWRzID0gdGhpcy5vcmdhbml6YXRpb25UYWJJZDtcclxuICAgICAgdGhpcy5hY3RpdmVUYWJJZCA9IHRoaXMub3JnYW5pemF0aW9uVGFiSWQ7XHJcbiAgICAgIHRoaXMub3JnVGFiQWN0aXZlID0gdHJ1ZTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdGhpcy5jdXJyZW50VGFiSWQgPSB0aGlzLmFjdGl2ZVRhYklkO1xyXG4gICAgaWYgKHRoaXMuc2hvd1RhYklkcy5pbmRleE9mKHRoaXMuZmF2b3JpdGVzVGFiSWQpICE9PSAtMSkge1xyXG4gICAgICB0aGlzLmVuYWJsZUZhdm9yaXRlcyA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmVuYWJsZUZhdm9yaXRlcyA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuc2hvd1RhYklkcy5pbmRleE9mKHRoaXMuZ3JvdXBUYWJJZCkgIT09IC0xKSB7XHJcbiAgICAgIHRoaXMuZW5hYmxlR3JvdXAgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5lbmFibGVHcm91cCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgaWYodGhpcy5hY3RpdmVUYWJJZCA9PSB0aGlzLm9yZ2FuaXphdGlvblRhYklkKSB7XHJcbiAgICAgIHRoaXMub3JnVGFiQWN0aXZlID0gdHJ1ZTtcclxuICAgIH0gZWxzZSBpZih0aGlzLmFjdGl2ZVRhYklkID09IHRoaXMuZ3JvdXBUYWJJZCkge1xyXG4gICAgICB0aGlzLmdyb3VwVGFiQWN0aXZlID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIC8vIOWQr+eUqOe+pOe7hOWKn+iDveaJqeWxleWHveaVsFxyXG4gICAgLypcclxuICAgIGlmICh0aGlzLmVuYWJsZUdyb3VwKSB7XHJcbiAgICAgIGNvbnN0IGNjd29yayA9IHdpbmRvdy50b3AuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKVxyXG4gICAgICBjY3dvcmsuc3JjID0gdGhpcy5ncm91cEV4dGVuZFVybCArICc/dnM9JyArIE1hdGgucmFuZG9tKCk7XHJcbiAgICAgIHdpbmRvdy5kb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGNjd29yayk7XHJcbiAgICB9XHJcbiAgICAqL1xyXG4gIH1cclxuXHJcbiAgLy8g5Yik5pat576k57uE5ZCN56ew5piv5ZCm5ZCI5rOVXHJcbiAgLy8g55SxbmdPbkluaXQoKeiwg+eUqFxyXG4gIHByaXZhdGUgaW5pdEdyb3VwU2VhcmNoKCkge1xyXG4gICAgaWYgKHRoaXMuZW5hYmxlR3JvdXApIHtcclxuICAgICAgdGhpcy5ncm91cFRpdGxlU3RyZWFtLnBpcGUoXHJcbiAgICAgICAgZGVib3VuY2VUaW1lKDUwMCksXHJcbiAgICAgICAgZGlzdGluY3RVbnRpbENoYW5nZWQoKVxyXG4gICAgICApLnN1YnNjcmliZShkYXRhID0+IHtcclxuICAgICAgICBpZiAoISFkYXRhKSB7XHJcbiAgICAgICAgICB0aGlzLnZhbGlkR3JvdXBUaXRsZSA9IHRydWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMudmFsaWRHcm91cFRpdGxlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIOW9k+a1j+iniOWZqOeql+WPo+Wkp+Wwj+WPmOabtOaXtu+8jOWPmOabtOW8ueeql+eahOWkp+Wwj1xyXG4gIC8vIOeUsW5nQWZ0ZXJWaWV3SW5pdCgp6LCD55SoXHJcbiAgbGlzdGVuV2luZG93UmVzaXplKCkge1xyXG4gICAgY29uc3QgZGlhbG9nRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgdGhpcy5kaWFsb2dJZCk7XHJcbiAgICBsZXQgdGFyZ2V0RWxlbWVudCA9IG51bGw7XHJcbiAgICBpZiAoISFkaWFsb2dFbGVtZW50KSB7XHJcbiAgICAgIHRhcmdldEVsZW1lbnQgPSBkaWFsb2dFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC1kaWFsb2cnKTtcclxuICAgIH1cclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB7XHJcbiAgICAgIGlmICghIXRhcmdldEVsZW1lbnQpIHtcclxuICAgICAgICBsZXQgaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0IC0gNjA7XHJcbiAgICAgICAgaWYgKGhlaWdodCA+IDY4MCkge1xyXG4gICAgICAgICAgaGVpZ2h0ID0gNjgwO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmRpYWxvZ0hlaWdodCA9IGhlaWdodDtcclxuICAgICAgICBjb25zdCBpbm5lckhlaWdodCA9IGhlaWdodCArICdweCc7XHJcbiAgICAgICAgY29uc3QgbWFyZ2luVG9wID0gJy0nICsgaGVpZ2h0IC8gMiArICdweCc7XHJcbiAgICAgICAgdGhpcy5yZW5kZXIuc2V0U3R5bGUodGFyZ2V0RWxlbWVudCwgJ2hlaWdodCcsIGlubmVySGVpZ2h0KTtcclxuICAgICAgICB0aGlzLnJlbmRlci5zZXRTdHlsZSh0YXJnZXRFbGVtZW50LCAnbWFyZ2luLXRvcCcsIG1hcmdpblRvcCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8g5Yid5aeL5YyW57uE57uH5pS26JeP5pWw5o2uXHJcbiAgLy8g55Sxc2hvd0ZhcnJpc0RpYWxvZygp6LCD55So77yM5Y2z5omT5byA6YCJ57uE57uH5by556qX5pe25Y+R6YCB6K+35rGCXHJcbiAgcHJpdmF0ZSBpbml0RmF2b3JpdGVzKCkge1xyXG4gICAgdGhpcy5mYXZvcml0ZXNUb29sLmFic09yZ1R5cGUgPSB0aGlzLmFic09yZ1R5cGU7XHJcbiAgICB0aGlzLmZhdm9yaXRlc1Rvb2wuYnVzTnVtID0gdGhpcy5idXNOdW07XHJcbiAgICB0aGlzLmZhdm9yaXRlc1Rvb2wuaWRGaWVsZCA9IHRoaXMucHJpbWFyeUZpZWxkO1xyXG4gICAgdGhpcy5mYXZvcml0ZXNUb29sLmFic1JmUXVlcnlVcmwgPSB0aGlzLmFic1JmUXVlcnlVcmw7XHJcbiAgICB0aGlzLmZhdm9yaXRlc1Rvb2wuYWJzUmZNb2RpZnlVcmwgPSB0aGlzLmFic1JmTW9kaWZ5VXJsO1xyXG4gICAgdGhpcy5mYXZvcml0ZXNUb29sLmdldEZhdm9yaXRlc0xpc3QoKS5zdWJzY3JpYmUoKHJlc3VsdCkgPT4ge1xyXG4gICAgICBjb25zdCByZXNEYXRhID0gcmVzdWx0ID8gKHJlc3VsdCBhcyBhbnkpLm9yZ0RhdGEgOiBbXTtcclxuICAgICAgdGhpcy5mYXZvcml0ZXNUb29sLmZhdm9yaXRlc0xpc3QgPSByZXNEYXRhO1xyXG4gICAgICB0aGlzLmZhdm9yaXRlc1Rvb2wuc2V0RmF2b3JpdGVzTGlzdChyZXNEYXRhKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8g5omT5byA6YCJ57uE57uH5by556qXXHJcbiAgc2hvd0ZhcnJpc0RpYWxvZygpIHtcclxuICAgIHRoaXMuaXNTaG93ID0gdHJ1ZTtcclxuICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5kaWFsb2cuc2hvdygpO1xyXG4gICAgICAgIGlmICh0aGlzLnNob3dUYWJJZHMuaW5kZXhPZih0aGlzLmZhdm9yaXRlc1RhYklkKSAhPT0gLTEpIHtcclxuICAgICAgICAgIHRoaXMuaW5pdEZhdm9yaXRlcygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZih0aGlzLmFnYWluc3RTaW5nbGVTZWxlY3QpIHtcclxuICAgICAgICAgIHRoaXMubm90aWZ5U2VydmljZS53YXJuaW5nKHRoaXMubG9jYWxlU2VydmljZS5nZXRWYWx1ZShcIm9yZ2FuaXphdGlvblNlbGVjdG9yLmVycm9yTWVzc2FnZS5tdWx0aVNlbGVjdFwiKSk7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLm1hcEZpZWxkcyAmJiAhT2JqZWN0LmtleXModGhpcy5tYXBGaWVsZHMpLmluY2x1ZGVzKHRoaXMucHJpbWFyeUZpZWxkKSkge1xyXG4gICAgICAgICAgdGhpcy5ub3RpZnlTZXJ2aWNlLndhcm5pbmcodGhpcy5sb2NhbGVTZXJ2aWNlLmdldFZhbHVlKFwib3JnYW5pemF0aW9uU2VsZWN0b3IuZXJyb3JNZXNzYWdlLm1hcEZpZWxkc1wiKSk7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc3RhdGVNZ3IuZW1pdFNlbGVjdGlvbnModGhpcy5zZWxlY3Rpb25zLCBDaGFuZ2VUeXBlLlZhbHVlQ2hhbmdlZCwgJ2Zvcm0nKTtcclxuICAgICAgfSk7XHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgLy8gaW5wdXTmlofmnKzmoYblhoXngrnlh7vmuIXpmaTmjInpkq7ml7bop6blj5FcclxuICBjbGVhckFsbCgpIHtcclxuICAgIHRoaXMuc2VsZWN0aW9ucyA9IFtdO1xyXG4gICAgdGhpcy5hc3NlbWJsZUZpbmFsVGV4dCgpO1xyXG4gICAgdGhpcy5vbk1vZGVsQ2hhbmdlKHRoaXMuZmluYWxUZXh0LmpvaW4oKSk7XHJcbiAgICB0aGlzLm9uTW9kZWxUb3VjaGVkKHRoaXMuZmluYWxUZXh0LmpvaW4oKSk7XHJcbiAgICB0aGlzLmVtaXRTZWxlY3Rpb25zKFtdKTtcclxuICAgIHRoaXMuaW5wdXRDbGVhci5lbWl0KCk7XHJcbiAgfVxyXG5cclxuICAvLyBpbnB1dOaWh+acrOahhuWGheWIoOmZpOafkOS4gOS4quW3sumAiee7hOe7h+aXtuinpuWPkVxyXG4gIHJlbW92ZUl0ZW0oZGF0YTogYW55LCBpbmRleDogbnVtYmVyKSB7XHJcbiAgICBpZih0aGlzLnNlbGVjdGlvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICB0aGlzLnNlbGVjdGlvbnMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgdGhpcy5hc3NlbWJsZUZpbmFsVGV4dCgpO1xyXG4gICAgICB0aGlzLmVtaXRTZWxlY3Rpb25zKGRhdGEsIENoYW5nZVR5cGUuUmVtb3ZlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuZmluYWxUZXh0ID0gdGhpcy5maW5hbFRleHQuZmlsdGVyKHRleHQgPT4gdGV4dCAhPT0gZGF0YSk7XHJcbiAgICB9IFxyXG4gICAgdGhpcy5vbk1vZGVsQ2hhbmdlKHRoaXMuZmluYWxUZXh0LmpvaW4oKSk7XHJcbiAgICB0aGlzLm9uTW9kZWxUb3VjaGVkKHRoaXMuZmluYWxUZXh0LmpvaW4oKSk7XHJcbiAgICB0aGlzLnRhZ1JlbW92ZWQuZW1pdCh7XHJcbiAgICAgIGRlbGV0ZUl0ZW06IGRhdGEsXHJcbiAgICAgIGRlbGV0ZUluZGV4OiBpbmRleCxcclxuICAgICAgc2VsZWN0aW9uczogdGhpcy5zZWxlY3Rpb25zXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIOa4heepuuacgOi/keW3sumAiee7hOe7h1xyXG4gIGNsZWFyU2VsZXRpb25zKCkge1xyXG4gICAgdGhpcy5zdGF0ZU1nci5lbWl0U2VsZWN0aW9ucyhbXSwgQ2hhbmdlVHlwZS5WYWx1ZUNoYW5nZWQsICdmb3JtJyk7XHJcbiAgfVxyXG5cclxuICAvLyDngrnlh7vmkJzntKLmjInpkq7miJbogIXmlbLlh7vlm57ovabml7bop6blj5FcclxuICBvblNlYXJjaCgpIHtcclxuICAgIGlmICghIXRoaXMuc2VhcmNoVGV4dCkge1xyXG4gICAgICB0aGlzLmhpZGVTZWFyY2hQYW5lbCA9IGZhbHNlO1xyXG4gICAgICB0aGlzLm9uU2VhcmNoVG9rZW4gPSBDb21tb25VdGlsLm5ld0d1aWQoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIOa4heepuue7hOe7h+aQnOe0ouWGheWuueaXtuinpuWPkVxyXG4gIGNsZWFyU2VhcmNoKCkge1xyXG4gICAgdGhpcy5oaWRlU2VhcmNoUGFuZWwgPSB0cnVlO1xyXG4gICAgdGhpcy5vblNlYXJjaFRva2VuID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICAvLyDnm5HlkKzmkJzntKLmoYblhoXovpPlhaXnmoTmlofmnKxcclxuICBsaXN0ZW5TZWFyY2hUZXh0KGUpIHtcclxuICAgIGlmIChlLmNvZGUgPT09ICdCYWNrc3BhY2UnIHx8IGUuY29kZSA9PT0gJ0RlbGV0ZScpIHtcclxuICAgICAgaWYgKCF0aGlzLnNlYXJjaFRleHQpIHtcclxuICAgICAgICB0aGlzLmNsZWFyU2VhcmNoKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIOebkeWQrOaQnOe0oumhteeahOWFs+mXreS6i+S7tu+8jOebruWJjeWPquS8muaOpeaUtuWIsHRydWVcclxuICBsaXN0ZW5DbG9zZVBhbmVsQ2hhbmdlKGUpIHtcclxuICAgIHRoaXMuaGlkZVNlYXJjaFBhbmVsID0gZTtcclxuICAgIC8vIOWFs+mXreaQnOe0oue7k+aenOmhteWQju+8jOmcgOimgeabtOaWsOagkeiKgueCueeahOaYr+WQpumAieS4reeKtuaAgVxyXG4gICAgaWYodGhpcy5jdXJyZW50VGFiSWQgPT0gdGhpcy5vcmdhbml6YXRpb25UYWJJZCkge1xyXG4gICAgICB0aGlzLmxpYk9yZ1RyZWUuZmFycmlzVHJlZS5jbGVhckFsbCgpO1xyXG4gICAgICB0aGlzLmxpYk9yZ1RyZWUuZmFycmlzVHJlZS5yb3dIZWlnaHQgPSAyODtcclxuICAgICAgaWYodGhpcy5tdWx0aVNlbGVjdCkge1xyXG4gICAgICAgIHRoaXMubGliT3JnVHJlZS5jaGVja09yZ1RyZWVOb2RlcygpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMubGliT3JnVHJlZS5zZWxlY3RPcmdUcmVlTm9kZSgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyDlhbPpl63kv53lrZjnvqTnu4TnmoTlvLnnqpfml7bngrnlh7vigJzlj5bmtojigJ3miJbogIXlj7PkuIrop5Llj4nlj7fop6blj5FcclxuICBjbG9zZUdyb3VwRGlhbG9nKCkge1xyXG4gICAgdGhpcy5ncm91cERpYWxvZ09wZW5kID0gZmFsc2U7XHJcbiAgICB0aGlzLmVkaXRpbmdHcm91cElkID0gbnVsbDtcclxuICAgIHRoaXMuZ3JvdXBUaXRsZSA9IG51bGw7XHJcbiAgICB0aGlzLmdyb3VwTm90ZSA9IG51bGw7XHJcbiAgICB0aGlzLmdyb3VwRGlhbG9nVGl0bGUgPSB0aGlzLmxvY2FsZVNlcnZpY2UuZ2V0VmFsdWUoXCJvcmdhbml6YXRpb25TZWxlY3Rvci5ncm91cC5zYXZlR3JvdXBcIik7XHJcbiAgfVxyXG5cclxuICAvLyDlnKjkv53lrZjnvqTnu4TnmoTlvLnnqpflhoXvvIzkv67mlLnnvqTnu4TlkI3np7Dml7bop6blj5HvvIznm5HlkKxrZXl1cOS6i+S7tlxyXG4gIGxpc3Rlbkdyb3VwVGl0bGUoZSkge1xyXG4gICAgdGhpcy5ncm91cFRpdGxlU3RyZWFtLm5leHQodGhpcy5ncm91cFRpdGxlKTtcclxuICB9XHJcblxyXG4gIC8vIOmAiee7hOe7h+eahOW8ueeql+WGheacieS4gOS4quKAnOW3sumAieKAneagh+W/l++8jOm8oOagh+enu+S4iuWOu+WQjuS8muaYvuekuuW3sumAiee7hOe7h+eahOmhtemdou+8jOivpemhtemdouWGheacieKAnOS/neWtmOS4uue+pOe7hOKAneeahOaMiemSru+8jOeCueWHu+WQjuWPr+S7peaJk+W8gOS/neWtmOe+pOe7hOeahOW8ueeql1xyXG4gIGxpc3Rlbk9wZW5Hcm91cChlKSB7XHJcbiAgICB0aGlzLmdyb3VwRGlhbG9nT3BlbmQgPSBlO1xyXG4gICAgdGhpcy5ncm91cERpYWxvZ1RpdGxlID0gdGhpcy5sb2NhbGVTZXJ2aWNlLmdldFZhbHVlKFwib3JnYW5pemF0aW9uU2VsZWN0b3IuZ3JvdXAuc2F2ZUdyb3VwXCIpO1xyXG4gIH1cclxuXHJcbiAgLy8g54K55Ye7576k57uE57yW6L6R5oyJ6ZKu6Kem5Y+R77yM5Y+v5L+u5pS56YCJ5Lit576k57uE55qE5ZCN56ew5Y+K5o+P6L+wXHJcbiAgbGlzdGVuR3JvdXBDaGFuZ2UoaXRlbTogYW55KSB7XHJcbiAgICB0aGlzLmdyb3VwRGlhbG9nT3BlbmQgPSB0cnVlO1xyXG4gICAgdGhpcy5lZGl0aW5nR3JvdXBJZCA9IGl0ZW0uaWQ7XHJcbiAgICB0aGlzLmdyb3VwVGl0bGUgPSBpdGVtLnRpdGxlO1xyXG4gICAgdGhpcy5ncm91cE5vdGUgPSBpdGVtLmRlc2NyaXB0aW9uO1xyXG4gICAgdGhpcy5ncm91cERpYWxvZ1RpdGxlID0gdGhpcy5sb2NhbGVTZXJ2aWNlLmdldFZhbHVlKFwib3JnYW5pemF0aW9uU2VsZWN0b3IuZ3JvdXAuZWRpdEdyb3VwXCIpO1xyXG59XHJcblxyXG4gIC8vIOWFs+mXreS/neWtmOe+pOe7hOeahOW8ueeql+aXtueCueWHu+KAnOehruWumuKAneinpuWPke+8jOWwhuW9k+WJjeW3sumAiee7hOe7h+S/neWtmOS4uuS4gOS4quaWsOeahOe+pOe7hFxyXG4gIHNhdmVHcm91cCgpIHtcclxuICAgIGlmICghdGhpcy5ncm91cFRpdGxlKSB7XHJcbiAgICAgIHRoaXMudmFsaWRHcm91cFRpdGxlID0gZmFsc2U7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IGdyb3VwSWQgPSBDb21tb25VdGlsLm5ld0d1aWQoKTtcclxuICAgIGxldCBncm91cENvZGUgPSAnb3JnR3JvdXBfcHJpdmF0ZV8nO1xyXG4gICAgZ3JvdXBDb2RlICs9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMTYpLnN1YnN0cmluZygyLCAxMCk7XHJcbiAgICBjb25zdCBhZGRJZHMgPSBbXTtcclxuICAgIHRoaXMuc2VsZWN0aW9ucy5mb3JFYWNoKHNlbGVjdGlvbiA9PiB7XHJcbiAgICAgIGFkZElkcy5wdXNoKHNlbGVjdGlvblt0aGlzLnByaW1hcnlGaWVsZF0pO1xyXG4gICAgfSk7XHJcbiAgICBpZihhZGRJZHMubGVuZ3RoID4gMTAwMCkge1xyXG4gICAgICB0aGlzLm1lc3NhZ2VTZXJ2aWNlLnNob3coJ3dhcm5pbmcnLCB0aGlzLmxvY2FsZVNlcnZpY2UuZ2V0VmFsdWUoXCJvcmdhbml6YXRpb25TZWxlY3Rvci5lcnJvck1lc3NhZ2UubGltaXRcIiksIHRydWUpO1xyXG4gICAgICB0aGlzLmdyb3VwRGlhbG9nT3BlbmQgPSBmYWxzZTtcclxuICAgICAgdGhpcy5ncm91cFRpdGxlID0gbnVsbDtcclxuICAgICAgdGhpcy5ncm91cE5vdGUgPSBudWxsO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLmdyb3VwRGlhbG9nT3BlbmQgPSBmYWxzZTtcclxuICAgIGNvbnN0IGJvZHk6IFNhdmVHcm91cFJlcWV1c3RQYXJhbSA9IHtcclxuICAgICAgZ3JvdXBJZCxcclxuICAgICAgZ3JvdXBDb2RlLFxyXG4gICAgICB0aXRsZTogdGhpcy5ncm91cFRpdGxlLFxyXG4gICAgICBkZXNjcmlwdGlvbjogdGhpcy5ncm91cE5vdGUsXHJcbiAgICAgIGFic09yZ1R5cGU6IHRoaXMuYWJzT3JnVHlwZSxcclxuICAgICAgY2hhbmdlVHlwZTogTnVtYmVyKDEpXHJcbiAgICB9O1xyXG4gICAgaWYgKHRoaXMuZWRpdGluZ0dyb3VwSWQpIHtcclxuICAgICAgYm9keS5ncm91cElkID0gdGhpcy5lZGl0aW5nR3JvdXBJZDtcclxuICAgICAgYm9keS5jaGFuZ2VUeXBlID0gTnVtYmVyKDIpO1xyXG4gICAgICBkZWxldGUgYm9keS5ncm91cENvZGU7XHJcbiAgICAgIHRoaXMudXBkYXRlTmFtZU9yTm90ZShib2R5KTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgbmV3R3JvdXAkID0gdGhpcy5hcGlTZXJ2aWNlLnNhdmVHcm91cChib2R5KTtcclxuICAgIG5ld0dyb3VwJC5waXBlKFxyXG4gICAgICAgIHN3aXRjaE1hcChcclxuICAgICAgICAgICAgKHJlczogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZihyZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxpYk9yZ0dyb3VwLnNlbGVjdGVkR3JvdXBJZCA9IGdyb3VwSWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ncm91cFRpdGxlID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdyb3VwTm90ZSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWRkT3Jnc0luTmV3R3JvdXAkID0gdGhpcy5hcGlTZXJ2aWNlLnNhdmVHcm91cCh7IGdyb3VwSWQsIGFkZElkcywgZGVsZXRlSWRzOiBbXSwgY2hhbmdlVHlwZTogTnVtYmVyKDMpIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhZGRPcmdzSW5OZXdHcm91cCQucGlwZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFwKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRhdGE6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5saWJPcmdHcm91cC5nZXRHcm91cExpc3Qoe3NhdmVHcm91cDogdHJ1ZX0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IodGhpcy5sb2NhbGVTZXJ2aWNlLmdldFZhbHVlKFwib3JnYW5pemF0aW9uU2VsZWN0b3IuZXJyb3JNZXNzYWdlLnNhdmVPcmdhbml6YXRpb25cIikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKSxcclxuICAgICAgICB0YXAoXHJcbiAgICAgICAgICAgICgpID0+IHtcclxuICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlU2VydmljZS5zaG93KCdlcnJvcicsIHRoaXMubG9jYWxlU2VydmljZS5nZXRWYWx1ZShcIm9yZ2FuaXphdGlvblNlbGVjdG9yLmVycm9yTWVzc2FnZS5zYXZlR3JvdXBcIiksIHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKVxyXG4gICAgKS5zdWJzY3JpYmUoKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgdXBkYXRlTmFtZU9yTm90ZShwYXJhbTogU2F2ZUdyb3VwUmVxZXVzdFBhcmFtKSB7XHJcbiAgICBjb25zdCB1cGRhdGVJbmZvJCA9IHRoaXMuYXBpU2VydmljZS5zYXZlR3JvdXAocGFyYW0pO1xyXG4gICAgdXBkYXRlSW5mbyQucGlwZShcclxuICAgICAgdGFwKFxyXG4gICAgICAgIChkYXRhKSA9PiB7XHJcbiAgICAgICAgICBpZihkYXRhKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZWRpdGluZ0dyb3VwSWQgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLmdyb3VwVGl0bGUgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLmdyb3VwTm90ZSA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuZ3JvdXBEaWFsb2dUaXRsZSA9IHRoaXMubG9jYWxlU2VydmljZS5nZXRWYWx1ZShcIm9yZ2FuaXphdGlvblNlbGVjdG9yLmdyb3VwLnNhdmVHcm91cFwiKTtcclxuICAgICAgICAgICAgdGhpcy5saWJPcmdHcm91cC5nZXRHcm91cExpc3Qoe3VwZGF0ZU5hbWVPck5vdGU6IHRydWV9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2VTZXJ2aWNlLnNob3coJ2Vycm9yJywgdGhpcy5sb2NhbGVTZXJ2aWNlLmdldFZhbHVlKFwib3JnYW5pemF0aW9uU2VsZWN0b3IuZXJyb3JNZXNzYWdlLmVkaXRHcm91cFwiKSwgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICApXHJcbiAgICApLnN1YnNjcmliZSgpO1xyXG4gIH1cclxuXHJcbiAgLy8g54K55Ye76YCJ57uE57uH5by556qX55qE56Gu5a6a5oiW6ICF5Y+W5raI5oyJ6ZKu5pe26Kem5Y+R77yMMeS4uuehruWumu+8jDDkuLrlj5bmtohcclxuICByZXR1cm5SZXN1bHQodHlwZTogbnVtYmVyKSB7XHJcbiAgICBsZXQgZmluYWxUZXh0ID0gJyc7XHJcbiAgICBpZiAoISF0eXBlKSB7XHJcbiAgICAgIHRoaXMuY29uZmlybVRva2VuID0gdHJ1ZTtcclxuICAgICAgdGhpcy5hc3NlbWJsZUZpbmFsVGV4dCgpO1xyXG4gICAgICBmaW5hbFRleHQgPSB0aGlzLmZpbmFsVGV4dC5qb2luKCk7XHJcbiAgICAgIGlmICh0aGlzLnNlbGVjdGlvbnMgJiYgdGhpcy5zZWxlY3Rpb25zLmxlbmd0aCkge1xyXG4gICAgICAgIHRoaXMuc2VsZWN0aW9uc0NoYW5nZS5lbWl0KHtcclxuICAgICAgICAgIHNlbGVjdGlvbnM6IHRoaXMuc2VsZWN0aW9uc1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMub25Nb2RlbENoYW5nZShmaW5hbFRleHQpO1xyXG4gICAgICAgIHRoaXMub25Nb2RlbFRvdWNoZWQoZmluYWxUZXh0KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLm9uTW9kZWxDaGFuZ2UoZmluYWxUZXh0KTtcclxuICAgICAgICB0aGlzLm9uTW9kZWxUb3VjaGVkKGZpbmFsVGV4dCk7XHJcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25zQ2hhbmdlLmVtaXQoe1xyXG4gICAgICAgICAgc2VsZWN0aW9uczogdGhpcy5zZWxlY3Rpb25zXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmKHRoaXMubWFwRmllbGRzKSB7XHJcbiAgICAgICAgdGhpcy5tYXBGaWVsZHMyQ29tcG9uZW50KCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5hc3NlbWJsZURhdGFCeU9yZ0lkcyh0aGlzLm9yZ0lkcyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIHRoaXMub3JnSWRzID0gW107XHJcbiAgICB0aGlzLmRpYWxvZy5jbG9zZSgpO1xyXG4gICAgdGhpcy5pc1Nob3cgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIGNoYW5nZVRhYnMoZTogYW55KSB7XHJcbiAgICB0aGlzLmN1cnJlbnRUYWJJZCA9IGUubmV4dElkO1xyXG4gICAgaWYodGhpcy5zaG93VGFiSWRzLmluY2x1ZGVzKHRoaXMub3JnYW5pemF0aW9uVGFiSWQpKSB7XHJcbiAgICAgIHRoaXMubGliT3JnVHJlZS5jdXJyZW50VGFiSWQgPSB0aGlzLmN1cnJlbnRUYWJJZDtcclxuICAgIH1cclxuICAgIGlmIChlLm5leHRJZCA9PT0gdGhpcy5ncm91cFRhYklkKSB7XHJcbiAgICAgIGlmKCF0aGlzLmxpYk9yZ0dyb3VwLmdyb3VwRGF0YS5wdWJsaWMubGVuZ3RoICYmICF0aGlzLmxpYk9yZ0dyb3VwLmdyb3VwRGF0YS5wZXJzb25hbC5sZW5ndGgpIHtcclxuICAgICAgICB0aGlzLmxpYk9yZ0dyb3VwLmFzc2VtYmxlRGF0YSh0cnVlKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmKGUubmV4dElkID09PSB0aGlzLm9yZ2FuaXphdGlvblRhYklkKSB7XHJcbiAgICAgIGlmKHRoaXMubGliT3JnVHJlZS5pbml0TG9hZCkge1xyXG4gICAgICAgIHRoaXMubGliT3JnVHJlZS5sb2FkVHJlZURhdGEoKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmxpYk9yZ1RyZWUuZmFycmlzVHJlZS5jbGVhckFsbCgpO1xyXG4gICAgICAgIHRoaXMubGliT3JnVHJlZS5mYXJyaXNUcmVlLnJvd0hlaWdodCA9IDI4O1xyXG4gICAgICAgIGlmKHRoaXMubXVsdGlTZWxlY3QpIHtcclxuICAgICAgICAgIHRoaXMubGliT3JnVHJlZS5jaGVja09yZ1RyZWVOb2RlcygpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLmxpYk9yZ1RyZWUuc2VsZWN0T3JnVHJlZU5vZGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn1cclxuIl19