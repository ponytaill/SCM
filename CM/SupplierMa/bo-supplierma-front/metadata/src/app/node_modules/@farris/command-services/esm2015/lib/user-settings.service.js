import { Injectable, Injector, Optional } from '@angular/core';
import { FrmI18nSettingService } from '@gsp-sys/rtf-common';
export class UserSettingsService {
    constructor(injector, frmI18nSettingService) {
        this.injector = injector;
        this.frmI18nSettingService = frmI18nSettingService;
    }
    /**
     * 用户时区字符串
     */
    get timeZone() {
        return this.timezone && this.timezone.id || null;
    }
    /**
     * 时区偏移
     */
    get timeZoneOffset() {
        const offset = this.timezone && this.timezone.baseOffset;
        if (offset !== null && offset !== undefined) {
            return offset;
        }
        else {
            return null;
        }
    }
    /**
     * 默认语言
     */
    get defaultLanguage() {
        return this.i18nSetting && this.i18nSetting.defaultLanguage || null;
    }
    /**
     * 日期格式化字符串
     * like: yyyy-MM-dd
     */
    get dateFormat() {
        return this.i18nSetting && this.i18nSetting.userDateFormat || null;
    }
    /**
     * 时间格式
     * like: HH:MM:ss
     */
    get timeFormat() {
        return this.i18nSetting && this.i18nSetting.userTimeFormat || null;
    }
    get dateTimeFormat() {
        const dateFormat = this.i18nSetting && this.i18nSetting.userDateFormat || 'yyyy-MM-dd';
        const timeFormat = this.i18nSetting && this.i18nSetting.userTimeFormat || 'HH:mm:ss';
        return `${dateFormat} ${timeFormat}`;
    }
    /**
     * 地址格式
     */
    get addressFormat() {
        return null;
    }
    /**
     * 数字格式
     */
    get numberFormat() {
        if (this.i18nSetting && this.i18nSetting.userNumberFormat) {
            const userNumberFormat = this.i18nSetting.userNumberFormat;
            const numberFormat = {
                negativeSign: userNumberFormat.negativeSign || '-',
                numberDecimalDigits: userNumberFormat.numberDecimalDigits || 2,
                numberDecimalSeparator: userNumberFormat.numberDecimalSeparator || '.',
                numberGroupSeparator: userNumberFormat.numberGroupSeparator || ','
            };
            return numberFormat;
        }
        return null;
    }
    /**
     * 区域代码
     */
    get regionCode() {
        return this.i18nSetting && this.i18nSetting.userRegionCode || null;
    }
    /**
     * 用户配置
     */
    get userSettings() {
        const userSettings = this.frmI18nSettingService && this.frmI18nSettingService.getSetting();
        return userSettings;
    }
    get timezone() {
        return this.i18nSetting && this.i18nSetting.timezone;
    }
    get i18nSetting() {
        return this.userSettings && this.userSettings.i18nSetting;
    }
}
UserSettingsService.decorators = [
    { type: Injectable }
];
/** @nocollapse */
UserSettingsService.ctorParameters = () => [
    { type: Injector },
    { type: FrmI18nSettingService, decorators: [{ type: Optional }] }
];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXNlci1zZXR0aW5ncy5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy9jb21tYW5kLXNlcnZpY2VzLyIsInNvdXJjZXMiOlsibGliL3VzZXItc2V0dGluZ3Muc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFL0QsT0FBTyxFQUFFLHFCQUFxQixFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFHNUQsTUFBTSxPQUFPLG1CQUFtQjtJQUM5QixZQUFvQixRQUFrQixFQUFzQixxQkFBNEM7UUFBcEYsYUFBUSxHQUFSLFFBQVEsQ0FBVTtRQUFzQiwwQkFBcUIsR0FBckIscUJBQXFCLENBQXVCO0lBQUksQ0FBQztJQUU3Rzs7T0FFRztJQUNILElBQVcsUUFBUTtRQUNqQixPQUFPLElBQUksQ0FBQyxRQUFRLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFFLElBQUksSUFBSSxDQUFDO0lBQ25ELENBQUM7SUFDRDs7T0FFRztJQUNILElBQVcsY0FBYztRQUN2QixNQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsUUFBUSxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDO1FBQ3pELElBQUksTUFBTSxLQUFLLElBQUksSUFBSSxNQUFNLEtBQUssU0FBUyxFQUFFO1lBQzNDLE9BQU8sTUFBTSxDQUFDO1NBQ2Y7YUFBTTtZQUNMLE9BQU8sSUFBSSxDQUFDO1NBQ2I7SUFDSCxDQUFDO0lBQ0Q7O09BRUc7SUFDSCxJQUFXLGVBQWU7UUFDeEIsT0FBTyxJQUFJLENBQUMsV0FBVyxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsZUFBZSxJQUFJLElBQUksQ0FBQztJQUN0RSxDQUFDO0lBQ0Q7OztPQUdHO0lBQ0gsSUFBVyxVQUFVO1FBQ25CLE9BQU8sSUFBSSxDQUFDLFdBQVcsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLGNBQWMsSUFBSSxJQUFJLENBQUM7SUFDckUsQ0FBQztJQUNEOzs7T0FHRztJQUNILElBQVcsVUFBVTtRQUNuQixPQUFPLElBQUksQ0FBQyxXQUFXLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxjQUFjLElBQUksSUFBSSxDQUFDO0lBQ3JFLENBQUM7SUFDRCxJQUFXLGNBQWM7UUFDdkIsTUFBTSxVQUFVLEdBQUcsSUFBSSxDQUFDLFdBQVcsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLGNBQWMsSUFBSSxZQUFZLENBQUM7UUFDdkYsTUFBTSxVQUFVLEdBQUcsSUFBSSxDQUFDLFdBQVcsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLGNBQWMsSUFBSSxVQUFVLENBQUM7UUFDckYsT0FBTyxHQUFHLFVBQVUsSUFBSSxVQUFVLEVBQUUsQ0FBQztJQUN2QyxDQUFDO0lBQ0Q7O09BRUc7SUFDSCxJQUFXLGFBQWE7UUFDdEIsT0FBTyxJQUFJLENBQUM7SUFDZCxDQUFDO0lBQ0Q7O09BRUc7SUFDSCxJQUFXLFlBQVk7UUFDckIsSUFBSSxJQUFJLENBQUMsV0FBVyxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsZ0JBQWdCLEVBQUU7WUFDekQsTUFBTSxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLGdCQUFnQixDQUFDO1lBQzNELE1BQU0sWUFBWSxHQUFpQjtnQkFDakMsWUFBWSxFQUFFLGdCQUFnQixDQUFDLFlBQVksSUFBSSxHQUFHO2dCQUNsRCxtQkFBbUIsRUFBRSxnQkFBZ0IsQ0FBQyxtQkFBbUIsSUFBSSxDQUFDO2dCQUM5RCxzQkFBc0IsRUFBRSxnQkFBZ0IsQ0FBQyxzQkFBc0IsSUFBSSxHQUFHO2dCQUN0RSxvQkFBb0IsRUFBRSxnQkFBZ0IsQ0FBQyxvQkFBb0IsSUFBSSxHQUFHO2FBQ25FLENBQUM7WUFDRixPQUFPLFlBQVksQ0FBQztTQUNyQjtRQUNELE9BQU8sSUFBSSxDQUFDO0lBQ2QsQ0FBQztJQUNEOztPQUVHO0lBQ0gsSUFBVyxVQUFVO1FBQ25CLE9BQU8sSUFBSSxDQUFDLFdBQVcsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLGNBQWMsSUFBSSxJQUFJLENBQUM7SUFDckUsQ0FBQztJQUNEOztPQUVHO0lBQ0gsSUFBWSxZQUFZO1FBQ3RCLE1BQU0sWUFBWSxHQUFHLElBQUksQ0FBQyxxQkFBcUIsSUFBSSxJQUFJLENBQUMscUJBQXFCLENBQUMsVUFBVSxFQUFFLENBQUM7UUFDM0YsT0FBTyxZQUFZLENBQUM7SUFDdEIsQ0FBQztJQUNELElBQVksUUFBUTtRQUNsQixPQUFPLElBQUksQ0FBQyxXQUFXLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUM7SUFDdkQsQ0FBQztJQUNELElBQVksV0FBVztRQUNyQixPQUFPLElBQUksQ0FBQyxZQUFZLElBQUksSUFBSSxDQUFDLFlBQVksQ0FBQyxXQUFXLENBQUM7SUFDNUQsQ0FBQzs7O1lBdEZGLFVBQVU7Ozs7WUFKVSxRQUFRO1lBRXBCLHFCQUFxQix1QkFJYSxRQUFRIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSwgSW5qZWN0b3IsIE9wdGlvbmFsIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBOdW1iZXJGb3JtYXQsIFVzZXJTZXR0aW5ncyB9IGZyb20gJ0BmYXJyaXMvZGV2a2l0JztcbmltcG9ydCB7IEZybUkxOG5TZXR0aW5nU2VydmljZSB9IGZyb20gJ0Bnc3Atc3lzL3J0Zi1jb21tb24nO1xuXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgVXNlclNldHRpbmdzU2VydmljZSBpbXBsZW1lbnRzIFVzZXJTZXR0aW5ncyB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgaW5qZWN0b3I6IEluamVjdG9yLCBAT3B0aW9uYWwoKSBwcml2YXRlIGZybUkxOG5TZXR0aW5nU2VydmljZTogRnJtSTE4blNldHRpbmdTZXJ2aWNlKSB7IH1cblxuICAvKipcbiAgICog55So5oi35pe25Yy65a2X56ym5LiyXG4gICAqL1xuICBwdWJsaWMgZ2V0IHRpbWVab25lKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMudGltZXpvbmUgJiYgdGhpcy50aW1lem9uZS5pZCB8fCBudWxsO1xuICB9XG4gIC8qKlxuICAgKiDml7bljLrlgY/np7tcbiAgICovXG4gIHB1YmxpYyBnZXQgdGltZVpvbmVPZmZzZXQoKTogbnVtYmVyIHtcbiAgICBjb25zdCBvZmZzZXQgPSB0aGlzLnRpbWV6b25lICYmIHRoaXMudGltZXpvbmUuYmFzZU9mZnNldDtcbiAgICBpZiAob2Zmc2V0ICE9PSBudWxsICYmIG9mZnNldCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gb2Zmc2V0O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIOm7mOiupOivreiogFxuICAgKi9cbiAgcHVibGljIGdldCBkZWZhdWx0TGFuZ3VhZ2UoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5pMThuU2V0dGluZyAmJiB0aGlzLmkxOG5TZXR0aW5nLmRlZmF1bHRMYW5ndWFnZSB8fCBudWxsO1xuICB9XG4gIC8qKlxuICAgKiDml6XmnJ/moLzlvI/ljJblrZfnrKbkuLJcbiAgICogbGlrZTogeXl5eS1NTS1kZFxuICAgKi9cbiAgcHVibGljIGdldCBkYXRlRm9ybWF0KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuaTE4blNldHRpbmcgJiYgdGhpcy5pMThuU2V0dGluZy51c2VyRGF0ZUZvcm1hdCB8fCBudWxsO1xuICB9XG4gIC8qKlxuICAgKiDml7bpl7TmoLzlvI9cbiAgICogbGlrZTogSEg6TU06c3NcbiAgICovXG4gIHB1YmxpYyBnZXQgdGltZUZvcm1hdCgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmkxOG5TZXR0aW5nICYmIHRoaXMuaTE4blNldHRpbmcudXNlclRpbWVGb3JtYXQgfHwgbnVsbDtcbiAgfVxuICBwdWJsaWMgZ2V0IGRhdGVUaW1lRm9ybWF0KCk6IHN0cmluZyB7XG4gICAgY29uc3QgZGF0ZUZvcm1hdCA9IHRoaXMuaTE4blNldHRpbmcgJiYgdGhpcy5pMThuU2V0dGluZy51c2VyRGF0ZUZvcm1hdCB8fCAneXl5eS1NTS1kZCc7XG4gICAgY29uc3QgdGltZUZvcm1hdCA9IHRoaXMuaTE4blNldHRpbmcgJiYgdGhpcy5pMThuU2V0dGluZy51c2VyVGltZUZvcm1hdCB8fCAnSEg6bW06c3MnO1xuICAgIHJldHVybiBgJHtkYXRlRm9ybWF0fSAke3RpbWVGb3JtYXR9YDtcbiAgfVxuICAvKipcbiAgICog5Zyw5Z2A5qC85byPXG4gICAqL1xuICBwdWJsaWMgZ2V0IGFkZHJlc3NGb3JtYXQoKTogYW55IHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICAvKipcbiAgICog5pWw5a2X5qC85byPXG4gICAqL1xuICBwdWJsaWMgZ2V0IG51bWJlckZvcm1hdCgpOiBOdW1iZXJGb3JtYXQge1xuICAgIGlmICh0aGlzLmkxOG5TZXR0aW5nICYmIHRoaXMuaTE4blNldHRpbmcudXNlck51bWJlckZvcm1hdCkge1xuICAgICAgY29uc3QgdXNlck51bWJlckZvcm1hdCA9IHRoaXMuaTE4blNldHRpbmcudXNlck51bWJlckZvcm1hdDtcbiAgICAgIGNvbnN0IG51bWJlckZvcm1hdDogTnVtYmVyRm9ybWF0ID0ge1xuICAgICAgICBuZWdhdGl2ZVNpZ246IHVzZXJOdW1iZXJGb3JtYXQubmVnYXRpdmVTaWduIHx8ICctJyxcbiAgICAgICAgbnVtYmVyRGVjaW1hbERpZ2l0czogdXNlck51bWJlckZvcm1hdC5udW1iZXJEZWNpbWFsRGlnaXRzIHx8IDIsXG4gICAgICAgIG51bWJlckRlY2ltYWxTZXBhcmF0b3I6IHVzZXJOdW1iZXJGb3JtYXQubnVtYmVyRGVjaW1hbFNlcGFyYXRvciB8fCAnLicsXG4gICAgICAgIG51bWJlckdyb3VwU2VwYXJhdG9yOiB1c2VyTnVtYmVyRm9ybWF0Lm51bWJlckdyb3VwU2VwYXJhdG9yIHx8ICcsJ1xuICAgICAgfTtcbiAgICAgIHJldHVybiBudW1iZXJGb3JtYXQ7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG4gIC8qKlxuICAgKiDljLrln5/ku6PnoIFcbiAgICovXG4gIHB1YmxpYyBnZXQgcmVnaW9uQ29kZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmkxOG5TZXR0aW5nICYmIHRoaXMuaTE4blNldHRpbmcudXNlclJlZ2lvbkNvZGUgfHwgbnVsbDtcbiAgfVxuICAvKipcbiAgICog55So5oi36YWN572uXG4gICAqL1xuICBwcml2YXRlIGdldCB1c2VyU2V0dGluZ3MoKTogYW55IHtcbiAgICBjb25zdCB1c2VyU2V0dGluZ3MgPSB0aGlzLmZybUkxOG5TZXR0aW5nU2VydmljZSAmJiB0aGlzLmZybUkxOG5TZXR0aW5nU2VydmljZS5nZXRTZXR0aW5nKCk7XG4gICAgcmV0dXJuIHVzZXJTZXR0aW5ncztcbiAgfVxuICBwcml2YXRlIGdldCB0aW1lem9uZSgpIHtcbiAgICByZXR1cm4gdGhpcy5pMThuU2V0dGluZyAmJiB0aGlzLmkxOG5TZXR0aW5nLnRpbWV6b25lO1xuICB9XG4gIHByaXZhdGUgZ2V0IGkxOG5TZXR0aW5nKCkge1xuICAgIHJldHVybiB0aGlzLnVzZXJTZXR0aW5ncyAmJiB0aGlzLnVzZXJTZXR0aW5ncy5pMThuU2V0dGluZztcbiAgfVxufSJdfQ==