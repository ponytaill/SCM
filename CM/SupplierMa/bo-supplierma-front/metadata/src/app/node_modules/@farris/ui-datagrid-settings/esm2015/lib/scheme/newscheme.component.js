/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { ChangeDetectorRef, Component, ElementRef, EventEmitter, Input, Output, ViewChild } from '@angular/core';
export class NewSchemeComponent {
    /**
     * @param {?} cd
     */
    constructor(cd) {
        this.cd = cd;
        this.dataPermissionIds = [];
        this.closeModal = new EventEmitter();
        this.submitModal = new EventEmitter();
        this.checkAuthority = new EventEmitter();
        this.schemeInfo = {
            name: '',
            isDefault: false,
            type: 'private',
            orgids: ''
        };
        this.schemeType = 'private';
        this.noPublicAuthority = false;
        this.noOrgAuthority = false;
        this.languages = [{ code: 'zh-CHS', name: '中文简体', default: true }, { code: 'en', name: 'English' }, { code: 'zh-CHT', name: '中文繁体' }];
        this.nameMaxLength = { 'zh-CHS': 9, 'zh-CHT': 9, en: 50 };
    }
    /**
     * @return {?}
     */
    ngOnInit() {
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    close($event) {
        this.closeModal.emit();
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    submit($event) {
        this.submitModal.emit(this.schemeInfo);
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    onCancelClick($event) {
        this.close($event);
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    onSelectedOrg($event) {
        if ($event.selections && $event.selections.length) {
            /** @type {?} */
            let orgids = $event.selections.map((/**
             * @param {?} n
             * @return {?}
             */
            n => n.orgId));
            this.schemeInfo.orgids = orgids;
        }
    }
    /**
     * @param {?} $event
     * @param {?} val
     * @return {?}
     */
    onSetRangeType($event, val) {
        $event.stopPropagation();
        this.schemeType = val;
        if (val === 'public' || val === 'org') {
            this.checkAuthority.emit({ value: val, schemeInfo: this.schemeInfo });
        }
        else {
            this.schemeInfo.type = val;
        }
        // console.log($event, this.schemeInfo.type);
    }
    /**
     * @param {?=} hasAuthority
     * @return {?}
     */
    refresh(hasAuthority = { public: true, org: true }) {
        this.schemeInfo = Object.assign({}, this.schemeInfo);
        this.schemeType = this.schemeInfo.type;
        this.noPublicAuthority = !hasAuthority.public;
        this.noOrgAuthority = !hasAuthority.org;
        this.cd.detectChanges();
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    getSelectedId($event) {
        console.log($event);
        if ($event.selections && $event.selections.length) {
            this.schemeInfo.orgids = $event.selections.map((/**
             * @param {?} n
             * @return {?}
             */
            n => n.orgId));
        }
        else {
            this.schemeInfo.orgids = '';
        }
    }
    /**
     * @return {?}
     */
    clearAllOrgs() {
        this.schemeInfo.orgids = '';
    }
}
NewSchemeComponent.decorators = [
    { type: Component, args: [{
                selector: 'new-scheme',
                template: "\r\n\r\n\r\n<div class=\"f-datagrid-save-scheme d-flex flex-column\" style=\"height: 100%;\">\r\n\r\n    <div class=\"d-flex justify-content-between header\" #header >\r\n        <div class=\"title\">{{'datagrid.scheme.saveTitle' | locale}}</div>\r\n        <div class=\"close\" style=\"margin-right: 20px;\">\r\n            <span class=\"f-icon modal_close\" (click)=\"close($event)\"></span>\r\n        </div>\r\n    </div>\r\n\r\n    <div class=\"f-utils-fill  mx-3 p-3 mt-1\" >\r\n        <!-- <div class=\"input-group mb-3 scheme-manager__search-box\">\r\n            <input #schemeName type=\"text\" class=\"form-control\" maxlength=\"9\" placeholder=\"{{'datagrid.scheme.namePlaceholder' | locale}}\" style=\"height: 26px;\" name=\"name\" [(ngModel)]=\"schemeInfo.name\">\r\n        </div> -->\r\n        <div class=\" mb-3\">\r\n            <language-textbox [(ngModel)]=\"schemeInfo.name\"  [languages]=\"languages\" [maxWords]=\"nameMaxLength\"></language-textbox>\r\n        </div>\r\n            \r\n    \r\n        <div class=\"input-group mb-2\" style=\"border: 0;\">\r\n          \r\n            <div class=\"custom-control custom-radio  custom-control-inline \" style=\"align-items: center\">\r\n                <input class=\"custom-control-input\" type=\"radio\" id=\"private-scheme\"  name=\"schemeType\"  (click)=\"onSetRangeType($event, 'private')\" value=\"private\" [checked]=\"schemeType === 'private'\">\r\n                <label class=\"custom-control-label\" for=\"private-scheme\">{{'datagrid.scheme.setPrivate' | locale}}</label>\r\n                <span class=\"icon-question\" farrisTooltip [placement]=\"'right'\" [delay]=\"500\" [content]=\"'datagrid.scheme.privateTip' | locale\">?</span>\r\n            </div>\r\n            <div class=\"custom-control custom-radio  custom-control-inline \" style=\"align-items: center\">\r\n                <input class=\"custom-control-input\" type=\"radio\" id=\"public-scheme\" name=\"schemeType\" (click)=\"onSetRangeType($event, 'public')\" value=\"public\" [checked]=\"schemeType === 'public'\" [disabled]=\"noPublicAuthority\">\r\n                <label class=\"custom-control-label\" for=\"public-scheme\">{{'datagrid.scheme.setPublic' | locale}}</label>\r\n                <span class=\"icon-question\" farrisTooltip [placement]=\"'right'\" [delay]=\"500\" [content]=\"'datagrid.scheme.publicTip' | locale\">?</span>\r\n            </div>\r\n            <div class=\"custom-control custom-radio  custom-control-inline \" style=\"align-items: center\">\r\n                <input class=\"custom-control-input\" type=\"radio\" id=\"org-scheme\" name=\"schemeType\" (click)=\"onSetRangeType($event, 'org')\"  value=\"org\" [checked]=\"schemeType === 'org'\" [disabled]=\"noOrgAuthority\">\r\n                <label class=\"custom-control-label\" for=\"org-scheme\">{{'datagrid.scheme.setOrg' | locale}}</label>\r\n                <span class=\"icon-question\" farrisTooltip [placement]=\"'right'\" [delay]=\"500\" [content]=\"'datagrid.scheme.orgTip' | locale\">?</span>\r\n            </div>\r\n        </div>\r\n        <div class=\"input-group mb-2\" style=\"border: 0;\" *ngIf=\"schemeInfo.type === 'private'\">\r\n            <div class=\"custom-control custom-checkbox  custom-control-inline \" style=\"align-items: center\">\r\n                <input class=\"custom-control-input\" type=\"checkbox\" id=\"default-scheme\" name=\"isDefault\" [(ngModel)]=\"schemeInfo.isDefault\">\r\n                <label class=\"custom-control-label\" for=\"default-scheme\">{{'datagrid.scheme.setDefault' | locale}} <i class=\"scheme-org-tip\">({{'datagrid.scheme.defaultTip' | locale}})</i></label>\r\n                <!-- <span class=\"icon-question\" farrisTooltip [placement]=\"'right'\" [delay]=\"500\" [content]=\"'\u4E0B\u6B21\u8FDB\u5165\u6B64\u529F\u80FD\u65F6\uFF0C\u9ED8\u8BA4\u52A0\u8F7D\u8BE5\u65B9\u6848'\">?</span> -->\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"input-group mb-2\" style=\"border: 0;\" *ngIf=\"schemeInfo.type === 'org' && !noOrgAuthority\">\r\n            <div class=\"input-group mb-3\">\r\n                <farris-organization-selector\r\n                    [primaryField]=\"'orgId'\" [displayField]=\"'name'\"\r\n                    [absOrgType]=\"'System_organization'\"\r\n                    [layer]=\"1\" [multiSelect]=\"true\" [showTabIds]=\"'organization'\"\r\n                    [enableHierarchicalLoading]=\"false\" [cascadeCheck]=\"true\" [cascadeDown]=\"true\"\r\n                    (selectionsChange)=\"onSelectedOrg($event)\"\r\n                    [cascadeUp]=\"false\"\r\n                    [orgIds]=\"dataPermissionIds\"\r\n                    (inputClear)=\"clearAllOrgs()\" (tagRemoved)=\"getSelectedId($event)\"\r\n                    [dataPermission]=\"true\" [dataPermissionIds]=\"dataPermissionIds\" \r\n                ></farris-organization-selector>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class=\"p-3 mb-3\" style=\"height: 50px;text-align: right;\">\r\n        <button class=\"btn btn-secondary cancel btn-lg mr-3\" style=\"width: 70px\"\r\n            (click)=\"onCancelClick($event)\">{{'datagrid.settings.cancel' | locale}}</button>\r\n        <button class=\"btn btn-primary ok btn-lg\" style=\"width: 70px\"\r\n            (click)=\"submit($event)\">{{'datagrid.settings.ok' | locale}}</button>\r\n    </div>\r\n\r\n</div>",
                styles: [`
        .icon-question {
            width: 16px;
            border-radius: 20px;
            height: 16px;
            text-align: center;
            vertical-align: middle;
            line-height: 15px;
            font-size: 10px;
            margin-left: 10px;
            background: #EAF4FF;
            color: #2A87FF;
            cursor: pointer
        }

        .icon-question:hover {
            background: #2A87FF;
            color: #fff;
        }
        `]
            }] }
];
/** @nocollapse */
NewSchemeComponent.ctorParameters = () => [
    { type: ChangeDetectorRef }
];
NewSchemeComponent.propDecorators = {
    header: [{ type: ViewChild, args: ['header',] }],
    dataPermissionIds: [{ type: Input }],
    closeModal: [{ type: Output }],
    submitModal: [{ type: Output }],
    checkAuthority: [{ type: Output }]
};
if (false) {
    /** @type {?} */
    NewSchemeComponent.prototype.header;
    /** @type {?} */
    NewSchemeComponent.prototype.dataPermissionIds;
    /** @type {?} */
    NewSchemeComponent.prototype.closeModal;
    /** @type {?} */
    NewSchemeComponent.prototype.submitModal;
    /** @type {?} */
    NewSchemeComponent.prototype.checkAuthority;
    /** @type {?} */
    NewSchemeComponent.prototype.schemeInfo;
    /** @type {?} */
    NewSchemeComponent.prototype.schemeType;
    /** @type {?} */
    NewSchemeComponent.prototype.noPublicAuthority;
    /** @type {?} */
    NewSchemeComponent.prototype.noOrgAuthority;
    /** @type {?} */
    NewSchemeComponent.prototype.languages;
    /** @type {?} */
    NewSchemeComponent.prototype.nameMaxLength;
    /**
     * @type {?}
     * @private
     */
    NewSchemeComponent.prototype.cd;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmV3c2NoZW1lLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvdWktZGF0YWdyaWQtc2V0dGluZ3MvIiwic291cmNlcyI6WyJsaWIvc2NoZW1lL25ld3NjaGVtZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUFFLFlBQVksRUFBRSxLQUFLLEVBQVUsTUFBTSxFQUFFLFNBQVMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQTRCekgsTUFBTSxPQUFPLGtCQUFrQjs7OztJQXlCM0IsWUFBb0IsRUFBcUI7UUFBckIsT0FBRSxHQUFGLEVBQUUsQ0FBbUI7UUFyQmhDLHNCQUFpQixHQUFHLEVBQUUsQ0FBQztRQUV0QixlQUFVLEdBQUcsSUFBSSxZQUFZLEVBQUUsQ0FBQztRQUNoQyxnQkFBVyxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7UUFDakMsbUJBQWMsR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFDO1FBRTlDLGVBQVUsR0FBRztZQUNULElBQUksRUFBRSxFQUFFO1lBQ1IsU0FBUyxFQUFFLEtBQUs7WUFDaEIsSUFBSSxFQUFFLFNBQVM7WUFDZixNQUFNLEVBQUUsRUFBRTtTQUNiLENBQUE7UUFFRCxlQUFVLEdBQUcsU0FBUyxDQUFDO1FBRXZCLHNCQUFpQixHQUFHLEtBQUssQ0FBQztRQUMxQixtQkFBYyxHQUFHLEtBQUssQ0FBQztRQUV2QixjQUFTLEdBQUcsQ0FBQyxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLEVBQUMsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUsRUFBQyxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBQyxDQUFDLENBQUM7UUFDOUgsa0JBQWEsR0FBRyxFQUFFLFFBQVEsRUFBRSxD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TixNQUFNOzs7O0lBTlAsb0NBQTZDOztJQUU3QywrQ0FBZ0M7O0lBRWhDLHdDQUEwQzs7SUFDMUMseUNBQTJDOztJQUMzQyw0Q0FBOEM7O0lBRTlDLHdDQUtDOztJQUVELHdDQUF1Qjs7SUFFdkIsK0NBQTBCOztJQUMxQiw0Q0FBdUI7O0lBRXZCLHVDQUE4SDs7SUFDOUgsMkNBQXFEOzs7OztJQUV6QyxnQ0FBNkIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDaGFuZ2VEZXRlY3RvclJlZiwgQ29tcG9uZW50LCBFbGVtZW50UmVmLCBFdmVudEVtaXR0ZXIsIElucHV0LCBPbkluaXQsIE91dHB1dCwgVmlld0NoaWxkIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiAnbmV3LXNjaGVtZScsXHJcbiAgICB0ZW1wbGF0ZVVybDogJy4vbmV3c2NoZW1lLmNvbXBvbmVudC5odG1sJyxcclxuICAgIHN0eWxlczogW1xyXG4gICAgICAgIGBcclxuICAgICAgICAuaWNvbi1xdWVzdGlvbiB7XHJcbiAgICAgICAgICAgIHdpZHRoOiAxNnB4O1xyXG4gICAgICAgICAgICBib3JkZXItcmFkaXVzOiAyMHB4O1xyXG4gICAgICAgICAgICBoZWlnaHQ6IDE2cHg7XHJcbiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgICAgICAgICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcclxuICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDE1cHg7XHJcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTBweDtcclxuICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDEwcHg7XHJcbiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNFQUY0RkY7XHJcbiAgICAgICAgICAgIGNvbG9yOiAjMkE4N0ZGO1xyXG4gICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXJcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC5pY29uLXF1ZXN0aW9uOmhvdmVyIHtcclxuICAgICAgICAgICAgYmFja2dyb3VuZDogIzJBODdGRjtcclxuICAgICAgICAgICAgY29sb3I6ICNmZmY7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGBcclxuICAgIF1cclxufSlcclxuZXhwb3J0IGNsYXNzIE5ld1NjaGVtZUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XHJcblxyXG4gICAgQFZpZXdDaGlsZCgnaGVhZGVyJykgaGVhZGVyOiBFbGVtZW50UmVmPGFueT47XHJcblxyXG4gICAgQElucHV0KCkgZGF0YVBlcm1pc3Npb25JZHMgPSBbXTtcclxuXHJcbiAgICBAT3V0cHV0KCkgY2xvc2VNb2RhbCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIEBPdXRwdXQoKSBzdWJtaXRNb2RhbCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIEBPdXRwdXQoKSBjaGVja0F1dGhvcml0eSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgICBzY2hlbWVJbmZvID0ge1xyXG4gICAgICAgIG5hbWU6ICcnLFxyXG4gICAgICAgIGlzRGVmYXVsdDogZmFsc2UsXHJcbiAgICAgICAgdHlwZTogJ3ByaXZhdGUnLFxyXG4gICAgICAgIG9yZ2lkczogJydcclxuICAgIH1cclxuXHJcbiAgICBzY2hlbWVUeXBlID0gJ3ByaXZhdGUnO1xyXG5cclxuICAgIG5vUHVibGljQXV0aG9yaXR5ID0gZmFsc2U7XHJcbiAgICBub09yZ0F1dGhvcml0eSA9IGZhbHNlO1xyXG5cclxuICAgIGxhbmd1YWdlcyA9IFt7IGNvZGU6ICd6aC1DSFMnLCBuYW1lOiAn5Lit5paH566A5L2TJywgZGVmYXVsdDogdHJ1ZSB9LHsgY29kZTogJ2VuJywgbmFtZTogJ0VuZ2xpc2gnIH0seyBjb2RlOiAnemgtQ0hUJywgbmFtZTogJ+S4reaWh+e5geS9kyd9XTtcclxuICAgIG5hbWVNYXhMZW5ndGggPSB7ICd6aC1DSFMnOiA5LCAnemgtQ0hUJzogOSwgZW46IDUwIH07XHJcbiAgICBcclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgY2Q6IENoYW5nZURldGVjdG9yUmVmKSB7IH1cclxuXHJcbiAgICBuZ09uSW5pdCgpOiB2b2lkIHtcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZSgkZXZlbnQpIHtcclxuICAgICAgICB0aGlzLmNsb3NlTW9kYWwuZW1pdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHN1Ym1pdCgkZXZlbnQpIHtcclxuICAgICAgICB0aGlzLnN1Ym1pdE1vZGFsLmVtaXQodGhpcy5zY2hlbWVJbmZvKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNhbmNlbENsaWNrKCRldmVudCkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoJGV2ZW50KTtcclxuICAgIH1cclxuXHJcbiAgICBvblNlbGVjdGVkT3JnKCRldmVudCkge1xyXG4gICAgICAgIGlmICgkZXZlbnQuc2VsZWN0aW9ucyAmJiAkZXZlbnQuc2VsZWN0aW9ucy5sZW5ndGggKSB7XHJcbiAgICAgICAgICAgIGxldCBvcmdpZHMgPSAkZXZlbnQuc2VsZWN0aW9ucy5tYXAobiA9PiBuLm9yZ0lkKTtcclxuICAgICAgICAgICAgdGhpcy5zY2hlbWVJbmZvLm9yZ2lkcyA9IG9yZ2lkcztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25TZXRSYW5nZVR5cGUoJGV2ZW50OiBNb3VzZUV2ZW50LCB2YWwpIHtcclxuICAgICAgICAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgdGhpcy5zY2hlbWVUeXBlID0gdmFsO1xyXG4gICAgICAgIGlmICh2YWwgPT09ICdwdWJsaWMnIHx8IHZhbCA9PT0gJ29yZycpIHtcclxuICAgICAgICAgICAgdGhpcy5jaGVja0F1dGhvcml0eS5lbWl0KHsgdmFsdWU6IHZhbCwgc2NoZW1lSW5mbzogdGhpcy5zY2hlbWVJbmZvIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2NoZW1lSW5mby50eXBlID0gdmFsO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBjb25zb2xlLmxvZygkZXZlbnQsIHRoaXMuc2NoZW1lSW5mby50eXBlKTtcclxuICAgIH1cclxuXHJcbiAgICByZWZyZXNoKGhhc0F1dGhvcml0eSA9IHsgcHVibGljOiB0cnVlLCBvcmc6IHRydWUgfSkge1xyXG4gICAgICAgIHRoaXMuc2NoZW1lSW5mbyA9IHsuLi50aGlzLnNjaGVtZUluZm99O1xyXG4gICAgICAgIHRoaXMuc2NoZW1lVHlwZSA9IHRoaXMuc2NoZW1lSW5mby50eXBlO1xyXG4gICAgICAgIHRoaXMubm9QdWJsaWNBdXRob3JpdHkgPSAhaGFzQXV0aG9yaXR5LnB1YmxpYztcclxuICAgICAgICB0aGlzLm5vT3JnQXV0aG9yaXR5ID0gIWhhc0F1dGhvcml0eS5vcmc7XHJcbiAgICAgICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0U2VsZWN0ZWRJZCgkZXZlbnQpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygkZXZlbnQpO1xyXG4gICAgICAgIGlmICgkZXZlbnQuc2VsZWN0aW9ucyAmJiRldmVudC5zZWxlY3Rpb25zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLnNjaGVtZUluZm8ub3JnaWRzID0gJGV2ZW50LnNlbGVjdGlvbnMubWFwKG4gPT4gbi5vcmdJZCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zY2hlbWVJbmZvLm9yZ2lkcyA9ICcnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjbGVhckFsbE9yZ3MoKSB7XHJcbiAgICAgICAgdGhpcy5zY2hlbWVJbmZvLm9yZ2lkcyA9ICcnO1xyXG4gICAgfVxyXG59XHJcbiJdfQ==