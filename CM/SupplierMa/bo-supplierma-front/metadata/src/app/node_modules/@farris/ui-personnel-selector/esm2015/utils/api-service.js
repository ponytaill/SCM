/**
 * @fileoverview added by tsickle
 * Generated from: utils/api-service.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Injectable } from '@angular/core';
import { HttpClient, HttpHeaders } from '@angular/common/http';
export class ApiLocalService {
    /**
     * @param {?} http
     */
    constructor(http) {
        this.http = http;
    }
    /**
     * @param {?} param
     * @return {?}
     */
    filterGroupLeader(param) {
        /** @type {?} */
        const url = '/api/runtime/sys/v1.0/absRecentContacts/modify';
        /** @type {?} */
        const options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            }),
        };
        return this.http.post(url, param, options);
    }
    /**
     * @param {?} param
     * @return {?}
     */
    getGroupLeaderStatus(param) {
        /** @type {?} */
        const url = '/api/runtime/sys/v1.0/absRecentContacts/getRecentContacts';
        /** @type {?} */
        const options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            }),
        };
        return this.http.post(url, param, options);
    }
    /**
     * 获取行政组织
     * @param {?} url
     * @param {?} param
     * @return {?} observable
     */
    getOrganization(url, param) {
        /** @type {?} */
        const options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            }),
        };
        return this.http.post(url + '/org', param, options);
    }
    /**
     * 获取系统用户分组
     * @param {?} param
     * @return {?} observable
     */
    getSysUserGroup(param) {
        /** @type {?} */
        const url = '/api/runtime/sys/v1.0/usergroups';
        /** @type {?} */
        const paramStr = JSON.stringify(param);
        /** @type {?} */
        const options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            }),
            params: {
                param: paramStr,
            }
        };
        return this.http.get(url, options);
    }
    /**
     *
     * @param {?} url url地址
     * @param {?} absOrgType 系统组织
     * @param {?} orgId 组织id
     * @param {?} requestParam 请求参数
     * @return {?} observable
     */
    getPersonnelByOrgId(url, absOrgType, orgId, requestParam) {
        /** @type {?} */
        const body = {
            absOrgType,
            // 组织类型，默认为系统组织
            pageIndex: requestParam.pageIndex,
            // 当前页
            pageSize: requestParam.pageSize,
            // 每页记录数
            getUserInfo: true,
            orgId,
            // 组织id，获取当前组织下的用户
            withAllOrg: requestParam.withAllOrg,
            // 获取组织及其所有下级组织下的用户，默认false
            notGetStopUser: requestParam.notGetStopUser,
            // 是否获取停用用户，默认为false，
            notGetCurrentUser: requestParam.notGetCurrentUser,
            // 是否获取当前用户，默认为true，
            orderField: requestParam.orderField,
            // 排序
            userTypeMode: requestParam.userTypeMode,
            filterId: requestParam.filterId,
            posId: requestParam.posId,
            withPermission: requestParam.withPermission,
            authOp: requestParam.authOp
        };
        /** @type {?} */
        const options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            })
        };
        return this.http.post(url + '/user', body, options);
    }
    // 根据系统用户分组id获取分组下成员
    /**
     * @param {?} url
     * @param {?} requestParam
     * @return {?}
     */
    getPersonnelByUserGroupId(url, requestParam) {
        /** @type {?} */
        const body = {
            pageIndex: requestParam.pageIndex,
            // 当前页
            pageSize: requestParam.pageSize,
            // 每页记录数
            getUserInfo: true,
            // 是否获取用户头像
            withAllGroup: requestParam.withAllGroup,
            notGetStopUser: requestParam.notGetStopUser,
            // 是否获取停用用户，默认为false，
            notGetCurrentUser: requestParam.notGetCurrentUser,
            // 是否获取当前用户，默认为true，
            orderField: requestParam.orderField,
            // 排序
            userTypeMode: requestParam.userTypeMode,
            filterId: requestParam.filterId,
            groupId: requestParam.groupId,
        };
        // 需要根据组织进行人员二次过滤
        if (requestParam.orgId) {
            body['orgId'] = requestParam.orgId;
        }
        /** @type {?} */
        const options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            })
        };
        return this.http.post(url + '/user', body, options);
    }
    /**
     * 查询行政人员（根据人员id返回相关数据）
     * @param {?} url url地址
     * @param {?} absOrgType 系统类型
     * @param {?} ids 人员id
     * @return {?} observable
     */
    getPersonnelByUserIds(url, absOrgType, ids) {
        /** @type {?} */
        let idsArr = [];
        if (!!ids) {
            /** @type {?} */
            const lastChar = ids.substring(ids.length - 1);
            ids = lastChar === ',' ? ids.substring(0, ids.length - 1) : ids;
            idsArr = ids.split(',');
        }
        /** @type {?} */
        const urls = url + '/user/' + absOrgType;
        /** @type {?} */
        const options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            })
        };
        return this.http.post(urls, idsArr, options);
    }
    /**
     * 搜索行政人员（根据名称、编号搜索）
     * @param {?} url 传入的url
     * @param {?} absOrgType 数据源类型
     * @param {?} codeOrName 传入的搜索内容
     * @param {?} requestParam 请求参数
     * @return {?} observable
     */
    getPersonnelBySearch(url, absOrgType, codeOrName, requestParam) {
        /** @type {?} */
        const body = {
            absOrgType,
            // 组织类型，默认为系统组织
            getUserInfo: true,
            codeOrName,
            // 搜索内容
            withAllOrg: requestParam.withAllOrg,
            // 获取组织及其所有下级组织下的用户，默认false
            notGetStopUser: requestParam.notGetStopUser,
            // 是否获取停用用户，默认为false，
            notGetCurrentUser: requestParam.notGetCurrentUser,
            // 是否获取当前用户，默认为true，
            orderField: requestParam.orderField,
            // 排序
            userTypeMode: requestParam.userTypeMode,
            searchMode: 'or',
            pinyin: codeOrName,
            initials: codeOrName,
            filterId: requestParam.filterId
        };
        if (requestParam.orgId) {
            body.orgId = requestParam.orgId;
        }
        if (requestParam.pageSize) {
            body.pageSize = requestParam.pageSize;
        }
        if (requestParam.pageIndex) {
            body.pageIndex = requestParam.pageIndex;
        }
        /** @type {?} */
        const options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            })
        };
        return this.http.post(url + '/user', body, options);
    }
    /**
     * 获取群组信息
     * @param {?} url 接口地址
     * @param {?=} param
     * @return {?} observable
     */
    getGroupOrGroupPersonnel(url, param) {
        /** @type {?} */
        let baseUrl = url;
        if (param.parentid) {
            baseUrl += '?iseanble=' + param.isenable + '&parentid=' + param.parentid;
        }
        /** @type {?} */
        const options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            })
        };
        return this.http.get(baseUrl, options);
    }
    // 获取选人组件全局配置参数
    /**
     * @param {?} url
     * @return {?}
     */
    getGlobalParamConfig(url) {
        /** @type {?} */
        const options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            })
        };
        return this.http.post(url, options);
    }
    // 获取组织架构下所有成员所属的岗位，用于人员二次过滤
    /**
     * @param {?} url
     * @param {?} absOrgType
     * @param {?} requestParam
     * @return {?}
     */
    getFilterPosition(url, absOrgType, requestParam) {
        /** @type {?} */
        const body = {
            absOrgType,
            withAllOrg: requestParam.withAllOrg,
            getUserInfo: requestParam.getUserInfo,
            notGetStopUser: requestParam.notGetStopUser,
            notGetCurrentUser: requestParam.notGetCurrentUser,
            orderField: requestParam.orderField,
            userTypeMode: requestParam.userTypeMode,
            filterId: requestParam.filterId,
            curUser: false,
            orgId: requestParam.orgId,
        };
        /** @type {?} */
        const options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            })
        };
        return this.http.post(url, body, options);
    }
    // 获取用户分组下所有成员所属的组织，用于人员二次过滤
    /**
     * @param {?} url
     * @param {?} absOrgType
     * @param {?} requestParam
     * @return {?}
     */
    getFilterOrganization(url, absOrgType, requestParam) {
        /** @type {?} */
        const body = {
            absOrgType,
            withAllOrg: requestParam.withAllOrg,
            getUserInfo: requestParam.getUserInfo,
            notGetStopUser: requestParam.notGetStopUser,
            notGetCurrentUser: requestParam.notGetCurrentUser,
            orderField: requestParam.orderField,
            userTypeMode: requestParam.userTypeMode,
            filterId: requestParam.filterId,
            curUser: false,
            groupId: requestParam.groupId,
        };
        /** @type {?} */
        const options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            })
        };
        return this.http.post(url, body, options);
    }
}
ApiLocalService.decorators = [
    { type: Injectable }
];
/** @nocollapse */
ApiLocalService.ctorParameters = () => [
    { type: HttpClient }
];
if (false) {
    /** @type {?} */
    ApiLocalService.prototype.http;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBpLXNlcnZpY2UuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL3VpLXBlcnNvbm5lbC1zZWxlY3Rvci8iLCJzb3VyY2VzIjpbInV0aWxzL2FwaS1zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUMzQyxPQUFPLEVBQUUsVUFBVSxFQUFFLFdBQVcsRUFBYyxNQUFNLHNCQUFzQixDQUFDO0FBSTNFLE1BQU0sT0FBTyxlQUFlOzs7O0lBRXhCLFlBQW1CLElBQWdCO1FBQWhCLFNBQUksR0FBSixJQUFJLENBQVk7SUFBSSxDQUFDOzs7OztJQUV4QyxpQkFBaUIsQ0FBQyxLQUFVOztjQUNsQixHQUFHLEdBQUcsZ0RBQWdEOztjQUN0RCxPQUFPLEdBQUc7WUFDWixPQUFPLEVBQUUsSUFBSSxXQUFXLENBQUM7Z0JBQ3JCLGNBQWMsRUFBRSxrQkFBa0I7YUFDckMsQ0FBQztTQUNMO1FBQ0QsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsS0FBSyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQy9DLENBQUM7Ozs7O0lBRUQsb0JBQW9CLENBQUMsS0FBVTs7Y0FDckIsR0FBRyxHQUFHLDJEQUEyRDs7Y0FDakUsT0FBTyxHQUFHO1lBQ1osT0FBTyxFQUFFLElBQUksV0FBVyxDQUFDO2dCQUNyQixjQUFjLEVBQUUsa0JBQWtCO2FBQ3JDLENBQUM7U0FDTDtRQUNELE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLEtBQUssRUFBRSxPQUFPLENBQUMsQ0FBQztJQUMvQyxDQUFDOzs7Ozs7O0lBTUQsZUFBZSxDQUFDLEdBQVcsRUFBRSxLQUFzQjs7Y0FDekMsT0FBTyxHQUFHO1lBQ1osT0FBTyxFQUFFLElBQUksV0FBVyxDQUFDO2dCQUNyQixjQUFjLEVBQUUsa0JBQWtCO2FBQ3JDLENBQUM7U0FDTDtRQUNELE9B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LE9BQU8sR0FBRztZQUNaLE9BQU8sRUFBRSxJQUFJLFdBQVcsQ0FBQztnQkFDckIsY0FBYyxFQUFFLGtCQUFrQjthQUNyQyxDQUFDO1NBQ0w7UUFDRCxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxJQUFJLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDOUMsQ0FBQzs7O1lBM1BKLFVBQVU7Ozs7WUFIRixVQUFVOzs7O0lBTUgsK0JBQXVCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBIdHRwQ2xpZW50LCBIdHRwSGVhZGVycywgSHR0cFBhcmFtcyB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJztcclxuaW1wb3J0IHsgT3JnUmVxdWVzdFBhcmFtLCBQZXJzb25uZWxSZXF1ZXN0UGFyYW0gfSBmcm9tICcuL3VzZXIudHlwZSc7XHJcblxyXG5ASW5qZWN0YWJsZSgpXHJcbmV4cG9ydCBjbGFzcyBBcGlMb2NhbFNlcnZpY2Uge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBodHRwOiBIdHRwQ2xpZW50KSB7IH1cclxuXHJcbiAgICBmaWx0ZXJHcm91cExlYWRlcihwYXJhbTogYW55KSB7XHJcbiAgICAgICAgY29uc3QgdXJsID0gJy9hcGkvcnVudGltZS9zeXMvdjEuMC9hYnNSZWNlbnRDb250YWN0cy9tb2RpZnknO1xyXG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IG5ldyBIdHRwSGVhZGVycyh7XHJcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAucG9zdCh1cmwsIHBhcmFtLCBvcHRpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRHcm91cExlYWRlclN0YXR1cyhwYXJhbTogYW55KSB7XHJcbiAgICAgICAgY29uc3QgdXJsID0gJy9hcGkvcnVudGltZS9zeXMvdjEuMC9hYnNSZWNlbnRDb250YWN0cy9nZXRSZWNlbnRDb250YWN0cyc7XHJcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgaGVhZGVyczogbmV3IEh0dHBIZWFkZXJzKHtcclxuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5wb3N0KHVybCwgcGFyYW0sIG9wdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6I635Y+W6KGM5pS/57uE57uHXHJcbiAgICAgKiBAcmV0dXJucyBvYnNlcnZhYmxlXHJcbiAgICAgKi9cclxuICAgIGdldE9yZ2FuaXphdGlvbih1cmw6IHN0cmluZywgcGFyYW06IE9yZ1JlcXVlc3RQYXJhbSkge1xyXG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IG5ldyBIdHRwSGVhZGVycyh7XHJcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAucG9zdCh1cmwgKyAnL29yZycsIHBhcmFtLCBvcHRpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPluezu+e7n+eUqOaIt+WIhue7hFxyXG4gICAgICogQHJldHVybnMgb2JzZXJ2YWJsZVxyXG4gICAgICovXHJcbiAgICAgZ2V0U3lzVXNlckdyb3VwKHBhcmFtOiBhbnkpIHtcclxuICAgICAgICBjb25zdCB1cmwgPSAnL2FwaS9ydW50aW1lL3N5cy92MS4wL3VzZXJncm91cHMnO1xyXG4gICAgICAgIGNvbnN0IHBhcmFtU3RyID0gSlNPTi5zdHJpbmdpZnkocGFyYW0pO1xyXG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IG5ldyBIdHRwSGVhZGVycyh7XHJcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgcGFyYW1zOiB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbTogcGFyYW1TdHIsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0KHVybCwgb3B0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHVybCB1cmzlnLDlnYBcclxuICAgICAqIEBwYXJhbSBhYnNPcmdUeXBlIOezu+e7n+e7hOe7h1xyXG4gICAgICogQHBhcmFtIG9yZ0lkIOe7hOe7h2lkXHJcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtIOivt+axguWPguaVsFxyXG4gICAgICogQHJldHVybnMgb2JzZXJ2YWJsZVxyXG4gICAgICovXHJcbiAgICBnZXRQZXJzb25uZWxCeU9yZ0lkKHVybDogc3RyaW5nLCBhYnNPcmdUeXBlOiBzdHJpbmcsIG9yZ0lkOiBzdHJpbmcsIHJlcXVlc3RQYXJhbTogUGVyc29ubmVsUmVxdWVzdFBhcmFtKSB7XHJcbiAgICAgICAgY29uc3QgYm9keSA9IHtcclxuICAgICAgICAgICAgYWJzT3JnVHlwZSwgLy8g57uE57uH57G75Z6L77yM6buY6K6k5Li657O757uf57uE57uHXHJcbiAgICAgICAgICAgIHBhZ2VJbmRleDogcmVxdWVzdFBhcmFtLnBhZ2VJbmRleCwgLy8g5b2T5YmN6aG1XHJcbiAgICAgICAgICAgIHBhZ2VTaXplOiByZXF1ZXN0UGFyYW0ucGFnZVNpemUsIC8vIOavj+mhteiusOW9leaVsFxyXG4gICAgICAgICAgICBnZXRVc2VySW5mbzogdHJ1ZSwgLy8g5piv5ZCm6I635Y+W55So5oi35aS05YOPXHJcbiAgICAgICAgICAgIG9yZ0lkLCAvLyDnu4Tnu4dpZO+8jOiOt+WPluW9k+WJjee7hOe7h+S4i+eahOeUqOaIt1xyXG4gICAgICAgICAgICB3aXRoQWxsT3JnOiByZXF1ZXN0UGFyYW0ud2l0aEFsbE9yZywgLy8g6I635Y+W57uE57uH5Y+K5YW25omA5pyJ5LiL57qn57uE57uH5LiL55qE55So5oi377yM6buY6K6kZmFsc2VcclxuICAgICAgICAgICAgbm90R2V0U3RvcFVzZXI6IHJlcXVlc3RQYXJhbS5ub3RHZXRTdG9wVXNlciwgLy8g5piv5ZCm6I635Y+W5YGc55So55So5oi377yM6buY6K6k5Li6ZmFsc2XvvIxcclxuICAgICAgICAgICAgbm90R2V0Q3VycmVudFVzZXI6IHJlcXVlc3RQYXJhbS5ub3RHZXRDdXJyZW50VXNlciwgLy8g5piv5ZCm6I635Y+W5b2T5YmN55So5oi377yM6buY6K6k5Li6dHJ1Ze+8jFxyXG4gICAgICAgICAgICBvcmRlckZpZWxkOiByZXF1ZXN0UGFyYW0ub3JkZXJGaWVsZCwgLy8g5o6S5bqPXHJcbiAgICAgICAgICAgIHVzZXJUeXBlTW9kZTogcmVxdWVzdFBhcmFtLnVzZXJUeXBlTW9kZSxcclxuICAgICAgICAgICAgZmlsdGVySWQ6IHJlcXVlc3RQYXJhbS5maWx0ZXJJZCxcclxuICAgICAgICAgICAgcG9zSWQ6IHJlcXVlc3RQYXJhbS5wb3NJZCxcclxuICAgICAgICAgICAgd2l0aFBlcm1pc3Npb246IHJlcXVlc3RQYXJhbS53aXRoUGVybWlzc2lvbixcclxuICAgICAgICAgICAgYXV0aE9wOiByZXF1ZXN0UGFyYW0uYXV0aE9wXHJcbiAgICAgICAgfTtcclxuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiBuZXcgSHR0cEhlYWRlcnMoe1xyXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAucG9zdCh1cmwgKyAnL3VzZXInLCBib2R5LCBvcHRpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDmoLnmja7ns7vnu5/nlKjmiLfliIbnu4RpZOiOt+WPluWIhue7hOS4i+aIkOWRmFxyXG4gICAgZ2V0UGVyc29ubmVsQnlVc2VyR3JvdXBJZCh1cmw6IHN0cmluZywgcmVxdWVzdFBhcmFtOiBQZXJzb25uZWxSZXF1ZXN0UGFyYW0pIHtcclxuICAgICAgICBjb25zdCBib2R5ID0ge1xyXG4gICAgICAgICAgICBwYWdlSW5kZXg6IHJlcXVlc3RQYXJhbS5wYWdlSW5kZXgsIC8vIOW9k+WJjemhtVxyXG4gICAgICAgICAgICBwYWdlU2l6ZTogcmVxdWVzdFBhcmFtLnBhZ2VTaXplLCAvLyDmr4/pobXorrDlvZXmlbBcclxuICAgICAgICAgICAgZ2V0VXNlckluZm86IHRydWUsIC8vIOaYr+WQpuiOt+WPlueUqOaIt+WktOWDj1xyXG4gICAgICAgICAgICB3aXRoQWxsR3JvdXA6IHJlcXVlc3RQYXJhbS53aXRoQWxsR3JvdXAsXHJcbiAgICAgICAgICAgIG5vdEdldFN0b3BVc2VyOiByZXF1ZXN0UGFyYW0ubm90R2V0U3RvcFVzZXIsIC8vIOaYr+WQpuiOt+WPluWBnOeUqOeUqOaIt++8jOm7mOiupOS4umZhbHNl77yMXHJcbiAgICAgICAgICAgIG5vdEdldEN1cnJlbnRVc2VyOiByZXF1ZXN0UGFyYW0ubm90R2V0Q3VycmVudFVzZXIsIC8vIOaYr+WQpuiOt+WPluW9k+WJjeeUqOaIt++8jOm7mOiupOS4unRydWXvvIxcclxuICAgICAgICAgICAgb3JkZXJGaWVsZDogcmVxdWVzdFBhcmFtLm9yZGVyRmllbGQsIC8vIOaOkuW6j1xyXG4gICAgICAgICAgICB1c2VyVHlwZU1vZGU6IHJlcXVlc3RQYXJhbS51c2VyVHlwZU1vZGUsXHJcbiAgICAgICAgICAgIGZpbHRlcklkOiByZXF1ZXN0UGFyYW0uZmlsdGVySWQsXHJcbiAgICAgICAgICAgIGdyb3VwSWQ6IHJlcXVlc3RQYXJhbS5ncm91cElkLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgLy8g6ZyA6KaB5qC55o2u57uE57uH6L+b6KGM5Lq65ZGY5LqM5qyh6L+H5rukXHJcbiAgICAgICAgaWYocmVxdWVzdFBhcmFtLm9yZ0lkKSB7XHJcbiAgICAgICAgICAgIGJvZHlbJ29yZ0lkJ10gPSByZXF1ZXN0UGFyYW0ub3JnSWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IG5ldyBIdHRwSGVhZGVycyh7XHJcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5wb3N0KHVybCArICcvdXNlcicsIGJvZHksIG9wdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5p+l6K+i6KGM5pS/5Lq65ZGY77yI5qC55o2u5Lq65ZGYaWTov5Tlm57nm7jlhbPmlbDmja7vvIlcclxuICAgICAqIEBwYXJhbSB1cmwgdXJs5Zyw5Z2AXHJcbiAgICAgKiBAcGFyYW0gYWJzT3JnVHlwZSDns7vnu5/nsbvlnotcclxuICAgICAqIEBwYXJhbSBpZHMg5Lq65ZGYaWRcclxuICAgICAqIEByZXR1cm5zIG9ic2VydmFibGVcclxuICAgICAqL1xyXG4gICAgZ2V0UGVyc29ubmVsQnlVc2VySWRzKHVybDogc3RyaW5nLCBhYnNPcmdUeXBlOiBzdHJpbmcsIGlkczogc3RyaW5nKSB7XHJcbiAgICAgICAgbGV0IGlkc0FyciA9IFtdO1xyXG4gICAgICAgIGlmICghIWlkcykge1xyXG4gICAgICAgICAgICBjb25zdCBsYXN0Q2hhciA9IGlkcy5zdWJzdHJpbmcoaWRzLmxlbmd0aCAtIDEpO1xyXG4gICAgICAgICAgICBpZHMgPSBsYXN0Q2hhciA9PT0gJywnID8gaWRzLnN1YnN0cmluZygwLCBpZHMubGVuZ3RoIC0gMSkgOiBpZHM7XHJcbiAgICAgICAgICAgIGlkc0FyciA9IGlkcy5zcGxpdCgnLCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB1cmxzID0gdXJsICsgJy91c2VyLycgKyBhYnNPcmdUeXBlO1xyXG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IG5ldyBIdHRwSGVhZGVycyh7XHJcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5wb3N0KHVybHMsIGlkc0Fyciwgb3B0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmkJzntKLooYzmlL/kurrlkZjvvIjmoLnmja7lkI3np7DjgIHnvJblj7fmkJzntKLvvIlcclxuICAgICAqIEBwYXJhbSB1cmwg5Lyg5YWl55qEdXJsXHJcbiAgICAgKiBAcGFyYW0gYWJzT3JnVHlwZSDmlbDmja7mupDnsbvlnotcclxuICAgICAqIEBwYXJhbSBjb2RlT3JOYW1lIOS8oOWFpeeahOaQnOe0ouWGheWuuVxyXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbSDor7fmsYLlj4LmlbBcclxuICAgICAqIEByZXR1cm5zIG9ic2VydmFibGVcclxuICAgICAqL1xyXG4gICAgZ2V0UGVyc29ubmVsQnlTZWFyY2godXJsOiBzdHJpbmcsIGFic09yZ1R5cGU6IHN0cmluZywgY29kZU9yTmFtZTogc3RyaW5nLCByZXF1ZXN0UGFyYW06IFBlcnNvbm5lbFJlcXVlc3RQYXJhbSkge1xyXG4gICAgICAgIGNvbnN0IGJvZHk6IGFueSA9IHtcclxuICAgICAgICAgICAgYWJzT3JnVHlwZSwgLy8g57uE57uH57G75Z6L77yM6buY6K6k5Li657O757uf57uE57uHXHJcbiAgICAgICAgICAgIGdldFVzZXJJbmZvOiB0cnVlLCAvLyDmmK/lkKbojrflj5bnlKjmiLflpLTlg48sXHJcbiAgICAgICAgICAgIGNvZGVPck5hbWUsIC8vIOaQnOe0ouWGheWuuVxyXG4gICAgICAgICAgICB3aXRoQWxsT3JnOiByZXF1ZXN0UGFyYW0ud2l0aEFsbE9yZywgLy8g6I635Y+W57uE57uH5Y+K5YW25omA5pyJ5LiL57qn57uE57uH5LiL55qE55So5oi377yM6buY6K6kZmFsc2VcclxuICAgICAgICAgICAgbm90R2V0U3RvcFVzZXI6IHJlcXVlc3RQYXJhbS5ub3RHZXRTdG9wVXNlciwgLy8g5piv5ZCm6I635Y+W5YGc55So55So5oi377yM6buY6K6k5Li6ZmFsc2XvvIxcclxuICAgICAgICAgICAgbm90R2V0Q3VycmVudFVzZXI6IHJlcXVlc3RQYXJhbS5ub3RHZXRDdXJyZW50VXNlciwgLy8g5piv5ZCm6I635Y+W5b2T5YmN55So5oi377yM6buY6K6k5Li6dHJ1Ze+8jFxyXG4gICAgICAgICAgICBvcmRlckZpZWxkOiByZXF1ZXN0UGFyYW0ub3JkZXJGaWVsZCwgLy8g5o6S5bqPXHJcbiAgICAgICAgICAgIHVzZXJUeXBlTW9kZTogcmVxdWVzdFBhcmFtLnVzZXJUeXBlTW9kZSxcclxuICAgICAgICAgICAgc2VhcmNoTW9kZTogJ29yJyxcclxuICAgICAgICAgICAgcGlueWluOiBjb2RlT3JOYW1lLFxyXG4gICAgICAgICAgICBpbml0aWFsczogY29kZU9yTmFtZSxcclxuICAgICAgICAgICAgZmlsdGVySWQ6IHJlcXVlc3RQYXJhbS5maWx0ZXJJZFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKHJlcXVlc3RQYXJhbS5vcmdJZCkge1xyXG4gICAgICAgICAgICBib2R5Lm9yZ0lkID0gcmVxdWVzdFBhcmFtLm9yZ0lkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocmVxdWVzdFBhcmFtLnBhZ2VTaXplKSB7XHJcbiAgICAgICAgICAgIGJvZHkucGFnZVNpemUgPSByZXF1ZXN0UGFyYW0ucGFnZVNpemU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChyZXF1ZXN0UGFyYW0ucGFnZUluZGV4KSB7XHJcbiAgICAgICAgICAgIGJvZHkucGFnZUluZGV4ID0gcmVxdWVzdFBhcmFtLnBhZ2VJbmRleDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgaGVhZGVyczogbmV3IEh0dHBIZWFkZXJzKHtcclxuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwLnBvc3QodXJsICsgJy91c2VyJywgYm9keSwgb3B0aW9ucyk7XHJcbiAgICB9XHJcblxyXG5cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflj5bnvqTnu4Tkv6Hmga9cclxuICAgICAqIEBwYXJhbSB1cmwg5o6l5Y+j5Zyw5Z2AXHJcbiAgICAgKiBAcmV0dXJucyBvYnNlcnZhYmxlXHJcbiAgICAgKi9cclxuICAgIGdldEdyb3VwT3JHcm91cFBlcnNvbm5lbCh1cmw6IHN0cmluZywgcGFyYW0/OiB7IGlzZW5hYmxlOiBib29sZWFuLCBwYXJlbnRpZDogc3RyaW5nIH0pIHtcclxuICAgICAgICBsZXQgYmFzZVVybCA9IHVybDtcclxuICAgICAgICBpZiAocGFyYW0ucGFyZW50aWQpIHtcclxuICAgICAgICAgICAgYmFzZVVybCArPSAnP2lzZWFuYmxlPScgKyBwYXJhbS5pc2VuYWJsZSArICcmcGFyZW50aWQ9JyArIHBhcmFtLnBhcmVudGlkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiBuZXcgSHR0cEhlYWRlcnMoe1xyXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0KGJhc2VVcmwsIG9wdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOiOt+WPlumAieS6uue7hOS7tuWFqOWxgOmFjee9ruWPguaVsFxyXG4gICAgZ2V0R2xvYmFsUGFyYW1Db25maWcodXJsOiBzdHJpbmcpIHtcclxuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiBuZXcgSHR0cEhlYWRlcnMoe1xyXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAucG9zdCh1cmwsIG9wdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOiOt+WPlue7hOe7h+aetuaehOS4i+aJgOacieaIkOWRmOaJgOWxnueahOWyl+S9je+8jOeUqOS6juS6uuWRmOS6jOasoei/h+a7pFxyXG4gICAgZ2V0RmlsdGVyUG9zaXRpb24odXJsOiBzdHJpbmcsIGFic09yZ1R5cGU6IHN0cmluZywgcmVxdWVzdFBhcmFtOiBQZXJzb25uZWxSZXF1ZXN0UGFyYW0pIHtcclxuICAgICAgICBjb25zdCBib2R5ID0ge1xyXG4gICAgICAgICAgICBhYnNPcmdUeXBlLFxyXG4gICAgICAgICAgICB3aXRoQWxsT3JnOiByZXF1ZXN0UGFyYW0ud2l0aEFsbE9yZyxcclxuICAgICAgICAgICAgZ2V0VXNlckluZm86IHJlcXVlc3RQYXJhbS5nZXRVc2VySW5mbyxcclxuICAgICAgICAgICAgbm90R2V0U3RvcFVzZXI6IHJlcXVlc3RQYXJhbS5ub3RHZXRTdG9wVXNlcixcclxuICAgICAgICAgICAgbm90R2V0Q3VycmVudFVzZXI6IHJlcXVlc3RQYXJhbS5ub3RHZXRDdXJyZW50VXNlcixcclxuICAgICAgICAgICAgb3JkZXJGaWVsZDogcmVxdWVzdFBhcmFtLm9yZGVyRmllbGQsXHJcbiAgICAgICAgICAgIHVzZXJUeXBlTW9kZTogcmVxdWVzdFBhcmFtLnVzZXJUeXBlTW9kZSxcclxuICAgICAgICAgICAgZmlsdGVySWQ6IHJlcXVlc3RQYXJhbS5maWx0ZXJJZCxcclxuICAgICAgICAgICAgY3VyVXNlcjogZmFsc2UsXHJcbiAgICAgICAgICAgIG9yZ0lkOiByZXF1ZXN0UGFyYW0ub3JnSWQsXHJcbiAgICAgICAgfTtcclxuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiBuZXcgSHR0cEhlYWRlcnMoe1xyXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAucG9zdCh1cmwsIGJvZHksIG9wdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOiOt+WPlueUqOaIt+WIhue7hOS4i+aJgOacieaIkOWRmOaJgOWxnueahOe7hOe7h++8jOeUqOS6juS6uuWRmOS6jOasoei/h+a7pFxyXG4gICAgZ2V0RmlsdGVyT3JnYW5pemF0aW9uKHVybDogc3RyaW5nLCBhYnNPcmdUeXBlOiBzdHJpbmcsIHJlcXVlc3RQYXJhbTogUGVyc29ubmVsUmVxdWVzdFBhcmFtKSB7XHJcbiAgICAgICAgY29uc3QgYm9keSA9IHtcclxuICAgICAgICAgICAgYWJzT3JnVHlwZSxcclxuICAgICAgICAgICAgd2l0aEFsbE9yZzogcmVxdWVzdFBhcmFtLndpdGhBbGxPcmcsXHJcbiAgICAgICAgICAgIGdldFVzZXJJbmZvOiByZXF1ZXN0UGFyYW0uZ2V0VXNlckluZm8sXHJcbiAgICAgICAgICAgIG5vdEdldFN0b3BVc2VyOiByZXF1ZXN0UGFyYW0ubm90R2V0U3RvcFVzZXIsXHJcbiAgICAgICAgICAgIG5vdEdldEN1cnJlbnRVc2VyOiByZXF1ZXN0UGFyYW0ubm90R2V0Q3VycmVudFVzZXIsXHJcbiAgICAgICAgICAgIG9yZGVyRmllbGQ6IHJlcXVlc3RQYXJhbS5vcmRlckZpZWxkLFxyXG4gICAgICAgICAgICB1c2VyVHlwZU1vZGU6IHJlcXVlc3RQYXJhbS51c2VyVHlwZU1vZGUsXHJcbiAgICAgICAgICAgIGZpbHRlcklkOiByZXF1ZXN0UGFyYW0uZmlsdGVySWQsXHJcbiAgICAgICAgICAgIGN1clVzZXI6IGZhbHNlLFxyXG4gICAgICAgICAgICBncm91cElkOiByZXF1ZXN0UGFyYW0uZ3JvdXBJZCxcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IG5ldyBIdHRwSGVhZGVycyh7XHJcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5wb3N0KHVybCwgYm9keSwgb3B0aW9ucyk7XHJcbiAgICB9XHJcbn1cclxuIl19