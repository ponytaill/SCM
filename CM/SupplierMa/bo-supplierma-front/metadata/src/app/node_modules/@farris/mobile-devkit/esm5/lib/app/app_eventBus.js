import { Subject } from 'rxjs';
var AppEventBus = /** @class */ (function () {
    /**
     * 构造函数
     */
    function AppEventBus() {
        this.eventBus = new Subject();
        this.subscriptionsMap = new Map();
    }
    AppEventBus.prototype.triggerEvent = function (event) {
        this.eventBus.next(event);
    };
    AppEventBus.prototype.subscribe = function (componentId, func, funcError) {
        if (this.subscriptionsMap.has(componentId) === false) {
            var subscription = this.eventBus.subscribe(function (value) { return func(value); }, function (value) { return funcError(value); });
            this.subscriptionsMap.set(componentId, subscription);
        }
    };
    AppEventBus.prototype.unsubscribe = function (componentId) {
        if (this.subscriptionsMap.has(componentId) === true) {
            this.subscriptionsMap.get(componentId).unsubscribe();
            this.subscriptionsMap.delete(componentId);
        }
    };
    return AppEventBus;
}());
export { AppEventBus };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwX2V2ZW50QnVzLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy9tb2JpbGUtZGV2a2l0LyIsInNvdXJjZXMiOlsibGliL2FwcC9hcHBfZXZlbnRCdXMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLE9BQU8sRUFBZ0IsTUFBTSxNQUFNLENBQUM7QUFFN0M7SUFRRTs7T0FFRztJQUNIO1FBQ0UsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLE9BQU8sRUFBRSxDQUFDO1FBQzlCLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLEdBQUcsRUFBd0IsQ0FBQztJQUMxRCxDQUFDO0lBRUQsa0NBQVksR0FBWixVQUFhLEtBQVU7UUFDckIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDNUIsQ0FBQztJQUVELCtCQUFTLEdBQVQsVUFBVSxXQUFtQixFQUFFLElBQWMsRUFBRSxTQUFvQjtRQUNqRSxJQUFJLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLEtBQUssS0FBSyxFQUFFO1lBQ3BELElBQU0sWUFBWSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUMxQyxVQUFDLEtBQUssSUFBSyxPQUFBLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBWCxDQUFXLEVBQ3RCLFVBQUMsS0FBSyxJQUFLLE9BQUEsU0FBUyxDQUFDLEtBQUssQ0FBQyxFQUFoQixDQUFnQixDQUM1QixDQUFBO1lBQ0QsSUFBSSxDQUFDLGdCQUFnQixDQUFDLEdBQUcsQ0FBQyxXQUFXLEVBQUUsWUFBWSxDQUFDLENBQUM7U0FDdEQ7SUFDSCxDQUFDO0lBRUQsaUNBQVcsR0FBWCxVQUFZLFdBQW1CO1FBQzdCLElBQUksSUFBSSxDQUFDLGdCQUFnQixDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUMsS0FBSyxJQUFJLEVBQUU7WUFDbkQsSUFBSSxDQUFDLGdCQUFnQixDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQztZQUNyRCxJQUFJLENBQUMsZ0JBQWdCLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1NBQzNDO0lBQ0gsQ0FBQztJQUNILGtCQUFDO0FBQUQsQ0FBQyxBQXBDRCxJQW9DQztBQUVELE9BQU8sRUFBRSxXQUFXLEVBQUUsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFN1YmplY3QsIFN1YnNjcmlwdGlvbiB9IGZyb20gJ3J4anMnO1xyXG5cclxuY2xhc3MgQXBwRXZlbnRCdXMge1xyXG4gIC8qKlxyXG4qIGV2ZW50QnVzXHJcbiovXHJcbiAgcHJpdmF0ZSBldmVudEJ1czogU3ViamVjdDxhbnk+O1xyXG5cclxuICBwcml2YXRlIHN1YnNjcmlwdGlvbnNNYXA6IE1hcDxzdHJpbmcsIFN1YnNjcmlwdGlvbj47XHJcblxyXG4gIC8qKlxyXG4gICAqIOaehOmAoOWHveaVsFxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdGhpcy5ldmVudEJ1cyA9IG5ldyBTdWJqZWN0KCk7XHJcbiAgICB0aGlzLnN1YnNjcmlwdGlvbnNNYXAgPSBuZXcgTWFwPHN0cmluZywgU3Vic2NyaXB0aW9uPigpO1xyXG4gIH1cclxuXHJcbiAgdHJpZ2dlckV2ZW50KGV2ZW50OiBhbnkpIHtcclxuICAgIHRoaXMuZXZlbnRCdXMubmV4dChldmVudCk7XHJcbiAgfVxyXG5cclxuICBzdWJzY3JpYmUoY29tcG9uZW50SWQ6IHN0cmluZywgZnVuYzogRnVuY3Rpb24sIGZ1bmNFcnJvcj86IEZ1bmN0aW9uKSB7XHJcbiAgICBpZiAodGhpcy5zdWJzY3JpcHRpb25zTWFwLmhhcyhjb21wb25lbnRJZCkgPT09IGZhbHNlKSB7XHJcbiAgICAgIGNvbnN0IHN1YnNjcmlwdGlvbiA9IHRoaXMuZXZlbnRCdXMuc3Vic2NyaWJlKFxyXG4gICAgICAgICh2YWx1ZSkgPT4gZnVuYyh2YWx1ZSksXHJcbiAgICAgICAgKHZhbHVlKSA9PiBmdW5jRXJyb3IodmFsdWUpXHJcbiAgICAgIClcclxuICAgICAgdGhpcy5zdWJzY3JpcHRpb25zTWFwLnNldChjb21wb25lbnRJZCwgc3Vic2NyaXB0aW9uKTtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgdW5zdWJzY3JpYmUoY29tcG9uZW50SWQ6IHN0cmluZykge1xyXG4gICAgaWYgKHRoaXMuc3Vic2NyaXB0aW9uc01hcC5oYXMoY29tcG9uZW50SWQpID09PSB0cnVlKSB7XHJcbiAgICAgIHRoaXMuc3Vic2NyaXB0aW9uc01hcC5nZXQoY29tcG9uZW50SWQpLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgIHRoaXMuc3Vic2NyaXB0aW9uc01hcC5kZWxldGUoY29tcG9uZW50SWQpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IHsgQXBwRXZlbnRCdXMgfTsiXX0=