/**
 * 命令处理器工厂相关定义
 * @author Witt<jiwt@inspur.com>
 */
/**
 * 命令处理器工厂
 */
class CommandHandlerFactory {
    /**
     * 构造函数
     * @param handlerRegistry  命令处理注册器
     * @param extenderRegistry 命令处理扩展注册器
     */
    constructor(handlerRegistry, extenderRegistry, viewModelContext) {
        this.handlerRegistry = handlerRegistry;
        this.extenderRegistry = extenderRegistry;
        this.viewModelContext = viewModelContext;
    }
    /**
     * 创建命令处理器
     * @param   commandName 命令名称
     * @returns 对应的命令处理器实例
     */
    create(commandName) {
        const rawHandler = this.handlerRegistry.get(commandName);
        rawHandler.init(this.viewModelContext);
        const extenders = this.extenderRegistry.get(commandName);
        // 遍历extenders，依次对handler进行扩展
        return extenders.reduce((handler, extender) => {
            return extender.extend(handler);
        }, rawHandler);
    }
}
export { CommandHandlerFactory };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tbWFuZF9oYW5kbGVyX2ZhY3RvcnkuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL21vYmlsZS1kZXZraXQvIiwic291cmNlcyI6WyJsaWIvY29tbWFuZC9jb21tYW5kX2hhbmRsZXJfZmFjdG9yeS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0dBR0c7QUFRSDs7R0FFRztBQUNILE1BQU0scUJBQXFCO0lBQ3pCOzs7O09BSUc7SUFDSCxZQUNVLGVBQXVDLEVBQ3ZDLGdCQUFnRCxFQUNoRCxnQkFBa0M7UUFGbEMsb0JBQWUsR0FBZixlQUFlLENBQXdCO1FBQ3ZDLHFCQUFnQixHQUFoQixnQkFBZ0IsQ0FBZ0M7UUFDaEQscUJBQWdCLEdBQWhCLGdCQUFnQixDQUFrQjtJQUU1QyxDQUFDO0lBRUQ7Ozs7T0FJRztJQUNJLE1BQU0sQ0FBQyxXQUFtQjtRQUMvQixNQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUN6RCxVQUFVLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1FBQ3ZDLE1BQU0sU0FBUyxHQUFJLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUM7UUFFMUQsNkJBQTZCO1FBQzdCLE9BQU8sU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDLE9BQXVCLEVBQUUsUUFBZ0MsRUFBRSxFQUFFO1lBQ3BGLE9BQU8sUUFBUSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUNsQyxDQUFDLEVBQUUsVUFBVSxDQUFDLENBQUM7SUFDakIsQ0FBQztDQUVGO0FBRUQsT0FBTyxFQUFFLHFCQUFxQixFQUFFLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICog5ZG95Luk5aSE55CG5Zmo5bel5Y6C55u45YWz5a6a5LmJXHJcbiAqIEBhdXRob3IgV2l0dDxqaXd0QGluc3B1ci5jb20+XHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgVmlld01vZGVsQ29udGV4dCB9IGZyb20gJy4uL3ZpZXctbW9kZWwvaW5kZXgnO1xyXG5pbXBvcnQgeyBDb21tYW5kSGFuZGxlciB9IGZyb20gJy4vY29tbWFuZF9oYW5kbGVyJztcclxuaW1wb3J0IHsgQ29tbWFuZEhhbmRsZXJSZWdpc3RyeSB9IGZyb20gJy4vY29tbWFuZF9oYW5kbGVyX3JlZ2lzdHJ5JztcclxuaW1wb3J0IHsgQ29tbWFuZEhhbmRsZXJFeHRlbmRlciB9IGZyb20gJy4vY29tbWFuZF9oYW5kbGVyX2V4dGVuZGVyJztcclxuaW1wb3J0IHsgQ29tbWFuZEhhbmRsZXJFeHRlbmRlclJlZ2lzdHJ5IH0gZnJvbSAnLi9jb21tYW5kX2hhbmRsZXJfZXh0ZW5kZXJfcmVnaXN0cnknO1xyXG5cclxuLyoqXHJcbiAqIOWRveS7pOWkhOeQhuWZqOW3peWOglxyXG4gKi9cclxuY2xhc3MgQ29tbWFuZEhhbmRsZXJGYWN0b3J5IHtcclxuICAvKipcclxuICAgKiDmnoTpgKDlh73mlbBcclxuICAgKiBAcGFyYW0gaGFuZGxlclJlZ2lzdHJ5ICDlkb3ku6TlpITnkIbms6jlhozlmahcclxuICAgKiBAcGFyYW0gZXh0ZW5kZXJSZWdpc3RyeSDlkb3ku6TlpITnkIbmianlsZXms6jlhozlmahcclxuICAgKi9cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHByaXZhdGUgaGFuZGxlclJlZ2lzdHJ5OiBDb21tYW5kSGFuZGxlclJlZ2lzdHJ5LFxyXG4gICAgcHJpdmF0ZSBleHRlbmRlclJlZ2lzdHJ5OiBDb21tYW5kSGFuZGxlckV4dGVuZGVyUmVnaXN0cnksXHJcbiAgICBwcml2YXRlIHZpZXdNb2RlbENvbnRleHQ6IFZpZXdNb2RlbENvbnRleHRcclxuICApIHtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWIm+W7uuWRveS7pOWkhOeQhuWZqFxyXG4gICAqIEBwYXJhbSAgIGNvbW1hbmROYW1lIOWRveS7pOWQjeensFxyXG4gICAqIEByZXR1cm5zIOWvueW6lOeahOWRveS7pOWkhOeQhuWZqOWunuS+i1xyXG4gICAqL1xyXG4gIHB1YmxpYyBjcmVhdGUoY29tbWFuZE5hbWU6IHN0cmluZyk6IENvbW1hbmRIYW5kbGVyIHtcclxuICAgIGNvbnN0IHJhd0hhbmRsZXIgPSB0aGlzLmhhbmRsZXJSZWdpc3RyeS5nZXQoY29tbWFuZE5hbWUpO1xyXG4gICAgcmF3SGFuZGxlci5pbml0KHRoaXMudmlld01vZGVsQ29udGV4dCk7XHJcbiAgICBjb25zdCBleHRlbmRlcnMgID0gdGhpcy5leHRlbmRlclJlZ2lzdHJ5LmdldChjb21tYW5kTmFtZSk7XHJcblxyXG4gICAgLy8g6YGN5Y6GZXh0ZW5kZXJz77yM5L6d5qyh5a+5aGFuZGxlcui/m+ihjOaJqeWxlVxyXG4gICAgcmV0dXJuIGV4dGVuZGVycy5yZWR1Y2UoKGhhbmRsZXI6IENvbW1hbmRIYW5kbGVyLCBleHRlbmRlcjogQ29tbWFuZEhhbmRsZXJFeHRlbmRlcikgPT4ge1xyXG4gICAgICByZXR1cm4gZXh0ZW5kZXIuZXh0ZW5kKGhhbmRsZXIpO1xyXG4gICAgfSwgcmF3SGFuZGxlcik7XHJcbiAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IHsgQ29tbWFuZEhhbmRsZXJGYWN0b3J5IH07XHJcbiJdfQ==