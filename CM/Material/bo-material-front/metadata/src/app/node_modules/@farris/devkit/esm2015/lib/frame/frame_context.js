import { Injector, Injectable, Optional, SkipSelf, InjectFlags } from '@angular/core';
import { Repository } from '../repository/index';
import { BindingData } from '../binding-data/index';
import { UIState, PARAM_TYPE_TRANSFORM_TOKEN } from '../ui-state/index';
import { Form } from '../form/index';
import { StateMachine } from '../state-machine/index';
import { ViewModel } from '../view-model/index';
import { CommandBus, CommandHandlerExtenderRegistry, CommandHandlerFactory, CommandHandlerRegistry } from '../command/index';
import { Context } from '../context/index';
import { AppContext } from '../app/index';
import { RouterParamService } from '../misc/index';
import { FRAME_ID, NAMESPACE } from './tokens';
import { ChangeType } from '../binding-data/index';
import { EventBus } from '../event-bus-new/index';
import { EXCEPTION_HANDLER } from '../exception/tokens';
import { EntityUtil } from '../binding-data/entity_util';
import { TranslateToken } from '../i18n/translate_token';
import { VariableParseService } from '../variable/variable_parse_service';
import { TranslateService } from '../i18n/translate_service';
import { UserSettingsToken } from '../i18n/tokens';
import { UserSettingsService } from '../i18n/user_settings_service';
import { ExpressionEngineImpl } from '../expression/expression_engine_impl';
import { ExpressionManager } from '../expression/expression_manager';
import { ExpressionResult } from '../expression/expression_result';
import { ExpressionResultFactory } from '../expression/expression_result_factory';
import { CommandVariableParser, DataVariableParser, FrameIdVariableParser, StateMachineVariableParser, UIStateVariableParser } from '../variable';
import { RunMode } from '../core';
import { Subject } from 'rxjs';
import { ComponentRefManager } from './component_ref_manager';
/**
 * 组件上下文
 * @description
 * # 上下文
 * ## Overview
 *
 * 每个组件（FrameComponent）都有自己的上下文（FrameContext）,通过上下文可以获取控制器的所有属性，如常用的`frameId`、`BindingData`、`Repository`、`ViewModel`、`StateMachine`、 * `UIState`等。上下文在内存中呈树形结构，依附于FrameComponent。结构如下：
 *
 * ![image-20210806204755378](https://open.inspuronline.com/iGIX/assets/cloudplus/igix_2110/farris/devkit/guide/images/image-20210806204755378.png)
 *
 * 从上图我们可以看出每个上下文都有自己的`ViewModel`、`UIState`，那么如何确定一个命令在执行时用的是哪个上下文呢？其实无论命令在哪个地方被调用，上下文都是命令所在的组件的上下文。即，如果 * 命令挂载到了`detail-form-component`的视图模型，但命令最终被`root-component`上的按钮调用了，其上下文仍然是`detail-from-component`组件的上下文。之所以出现这种现象和Angular的依赖注 * 入密不可分，由于Angular在查找`provider`的时候总是从自己的组件开始向上找，如果在组件内部找到了则不再继续查找，如果找不到则会继续向上，如果查找到最上级依然找不到就会报`No provider  * for xx`错误。
 *
 * 既然如此，如果我们在`detail-form-component`中想要获取`root-component`中定义的变量（UIState）该如何做呢？答案是切换上下文，可以通过以下方式实现：
 *
 * ```typescript
 * // 方法1
 * const rootFrameContext = this.frameContext.root;
 * // 方法2
 * const rootFrameContext = this.frameContext.appContext.frameContextManager.getFrameContextById('root-component');
 * ```
 *
 * 通常在编写`Web构件`时先引入FrameContext，如：
 *
 * ```javascript
 * import {FrameContext,BindingData,Repository} from '@farris/devkit';
 *
 * constructor(private frameContext:FrameContext){}
 *
 * public method(){
 *     const bindingData: BindingData = this.frameContext.bindingData;
 *     const repository: Repository = this.frameContext.repository;
 * }
 * ```
 *
 * > `FrameContext`称为`ViewModelContext`更合适，可以理解为`MVVM`架构中`VM`的上下文。
 *
 * 控制器中亦存在`ViewModel`的概念。和`MVVM`架构中的的VM一致，所以也可以从`VM`访问常用的属性。如：
 *
 * ```typescript
 * import {BindingData,Repository,ViewModel} from '@farris/devkit';
 *
 * constructor(private viewModel:ViewModel){}
 *
 * public method(){
 *     const bindingData: BindingData = this.viewModel.bindingData;
 *     const repository: Repository = this.viewModel.repository;
 * }
 * ```
 *
 *
 *
 * ## 常用操作
 *
 * ### 获取当前上下文所属的组件
 *
 * ```typescript
 * this.frameContext.frameComponent;
 * ```
 *
 * ### 获取当前上下文的根上下文
 *
 * ```typescript
 * this.frameContext.root;
 * ```
 *
 * ### 获取当前上下文的appContext
 *
 * ```typescript
 * this.frameContext.appContext;
 * ```
 *
 * ### 获取指定frameId的上下文
 *
 * ```typescript
 * this.frameContext.appContext.frameContextManager.getFrameContextById('data-grid-component');
 * ```
 *
 * ### 获取表单所有上下文
 *
 * ```typescript
 * this.frameContext.appContext.frameContextManager.getFrameContexts();
 * ```
 *
 *
 *
 * ## 常用属性
 *
 * ### BindingData
 *
 * [参考]([浪潮企业云开放平台 (inspuronline.com)](https://open.inspuronline.com/iGIX/#/document/mddoc/igix-2103%2Ffarris%2Fdevkit%2Fguide%2F绑定数据.md))
 *
 * ### Repository
 *
 * [参考]([浪潮企业云开放平台 (inspuronline.com)](https://open.inspuronline.com/iGIX/#/document/mddoc/igix-2103%2Ffarris%2Fdevkit%2Fguide%2F仓库.md))
 *
 * ### ViewModel
 *
 * 控制器中ViewMode同MVVM架构中的VM，和FrameContext类似，可以通过ViewModel拿到FrameContext，同样的也可以通过FrameContext拿到ViewModel。
 *
 * ### namespace
 *
 * 命名空间，主要在组合表单场景用到，每一个表单都有自己的命名空间，被组合进来的表单其命名空间是相同的，如A表单组合了B表单，则B表单具有相同的命名空间，命名空间主要用于表单隔离。
 *
 * ### root
 *
 * 获取整个表单的根上下文
 *
 * ### uiState
 *
 * 获取当前组件的变量
 *
 * ### frameId
 *
 * 上下文标识。
 */
export class FrameContext extends Context {
    /**
     * 构造函数
     * @param injector 注入器
     */
    constructor(injector, parent) {
        super();
        this.injector = injector;
        this.typeName = 'FrameContext';
        this.isDestoried = false;
        this.isDisposed = false;
        this.metadata = {
            identify: '',
            namespace: '',
            commands: null,
            form: null,
            formControls: null,
            subForms: null,
            stateMachine: null,
            uiStates: null,
            bindingTo: ''
        };
        /**
         * 组件引用管理
         */
        this.componentRefManager = new ComponentRefManager();
        // 在解析模式下，通过依赖注入获取不到AppContext时，返回null，在子类中进行赋值。
        this.appContext = injector.get(AppContext);
        this.destorySignal = new Subject();
        // 确定父子关系
        // 必须对appContext进行判断，原因如下：
        // 1、否则会导致动态路由表单中，被路由的表单的RootFrameContext变成主表单的RootFrameContext；
        // 2、进而导致从RootFrameContext上拿VO变量拿不到。
        if (!parent || parent.appContext !== this.appContext) { // 取消 appContext 的判断
            this.parent = null;
            this.root = this;
        }
        else {
            this.parent = parent;
            this.root = parent.root;
        }
        this.frameId = injector.get(FRAME_ID);
        if (this.appContext.contextMetadataManager.exsit(this.frameId)) {
            this.metadata = this.appContext.contextMetadataManager.getContextMetadataByName(this.frameId);
        }
        this.namespace = injector.get(NAMESPACE, null);
        this.bindingData = this.injector.get(BindingData, new BindingData());
        if (!this.appContext.useIsoluteEventBus || (this.appContext.useIsoluteEventBus && !this.appContext.isoluteEventBus)) {
            this.eventBus = this.injector.get(EventBus, null, InjectFlags.Optional);
        }
        else {
            this.eventBus = this.appContext.isoluteEventBus;
        }
        this.form = this.injector.get(Form, new Form());
        this.repository = this.injector.get(Repository, this.appContext.repository);
        this.uiState = this.injector.get(UIState, new UIState());
        const defaultViewModel = new ViewModel();
        defaultViewModel.setMetadata(this.metadata);
        this.viewModel = this.injector.get(ViewModel, defaultViewModel);
        this.variableParseService = injector.get(VariableParseService, new VariableParseService([
            new FrameIdVariableParser(),
            new DataVariableParser(),
            new UIStateVariableParser(),
            new StateMachineVariableParser(),
            new CommandVariableParser()
        ]));
        // 注入exceptionHandler
        this.exceptionHandler = injector.get(EXCEPTION_HANDLER, null, InjectFlags.Optional);
        // 初始化多语服务
        const translate = injector.get(TranslateToken, null);
        this.translate = translate;
        TranslateService.setTranslate(translate);
        // 初始化用户配置
        const userSettings = injector.get(UserSettingsToken, null);
        UserSettingsService.setUserSettings(userSettings);
        this.initializeRepository();
        this.appContext.regFrameContext(this);
        this.registerAppContextDestroyEvent();
    }
    dispose(options) {
        if (this.isDisposed) {
            return;
        }
        this.isDestoried = true;
        this.isDisposed = true;
        if (this.destorySignal) {
            this.destorySignal.next();
            this.destorySignal.complete();
        }
        if (this.appContext) {
            this.appContext.frameContextManager.unregFrameContext(this);
            this.appContext.frameComponentRefresher.unregFrameContext(this);
        }
        if (this.appContext && this.isRootFrameContext() === true) {
            const viewModelNames = this['viewModelNames'];
            if (viewModelNames && Array.isArray(viewModelNames)) {
                viewModelNames.forEach(name => {
                    this[name] = null;
                });
            }
            this.appContext.unregisterFromManager();
        }
        if (this.bindingData) {
            this.bindingData.dispose();
            // this.bindingData = null;
        }
        if (this.viewModel) {
            this.viewModel.dispose();
        }
        if (this.form) {
            this.form.dispose();
            this.form = null;
        }
        if (this.commandBus) {
            this.commandBus.dispose();
            this.commandBus = null;
        }
        TranslateService.dispose();
        // this.root = null;
        // this.parent = null;
        // this.uiState = null;
        this.frameComponent = null;
        this.repository = null;
        // this.stateMachine = null;
        // this.appContext = null;
        this.exceptionHandler = null;
        this.expressionManager = null;
        this.expressionEngineImpl = null;
        this.variableParseService = null;
        this.eventBus = null;
        this.translate = null;
        this.injector = null;
        this.expressionResult = null;
        UserSettingsService.setUserSettings(null);
    }
    ngOnDestroy() {
        this.dispose();
    }
    /**
     * 通过组件标识获取对应的组件实例
     * @param id 组件标识
     * @returns
     */
    getComponentById(id) {
        const components = this.componentRefManager.get(id);
        if (components && components.length > 0) {
            const component = components[0];
            return component;
        }
        return null;
    }
    /**
     * 获取指定标识的所有组件
     * @param id 组件标识
     */
    getComponentsById(id) {
        return this.componentRefManager.get(id);
    }
    bindInjector(componentInjector) {
        this.injector = componentInjector;
    }
    // #region 初始化
    /**
     * 初始化
     * @todo:
     * 1、CommandHandler中的服务可能会注入Context，所以CommandHandler创建时必须已经存在ComponentContext
     * 2、ViewModel的buildCommands中会使用CommandBus，为了保证顺序，将ViewModel的创建也放在init中。
     */
    init(frameComponent) {
        this.frameComponent = frameComponent;
        this.initializeBindingData();
        this.initializeStateMachine();
        this.initializeUiState();
        this.initializeForm();
        this.initializeCommandBus();
        this.initializeViewModel();
        this.registerExceptionHandler();
        this.initExpression();
        this.appContext.frameComponentRefresher.regFrameComponent(this.frameId, this.frameComponent);
    }
    initExpression() {
        this.expressionEngineImpl = this.injector.get(ExpressionEngineImpl, null);
        this.expressionManager = this.injector.get(ExpressionManager, null);
        const expressionResultFactory = this.injector.get(ExpressionResultFactory, null);
        this.expressionResult = this.injector.get(ExpressionResult, null);
    }
    /**
     * 订阅异常消息
     */
    registerExceptionHandler() {
        // tslint:disable: no-string-literal
        const formAppContext = this.getFormAppContext();
        const applicationId = formAppContext.ApplicationId;
        window[window.location.href] = applicationId;
        if (this.exceptionHandler !== null) {
            const applicationContext = window[applicationId] = window[applicationId] || {};
            if (this.eventBus !== null && this.isRootFrameContext()) {
                applicationContext.isExceptionHandlerExist = true;
                this.exceptionHandler.setContext(this.appContext);
                this.eventBus.on('Exception', '', 'onException', formAppContext, (error) => {
                    if (this.isDestoried === true) {
                        return;
                    }
                    if (error && error.error) {
                        try {
                            error.error.__frame_context__ = this;
                        }
                        catch (_a) { }
                    }
                    this.exceptionHandler.handle(error);
                });
            }
            this.destorySignal.subscribe(() => {
                this.eventBus.off('Exception', '', 'onException', formAppContext);
            });
        }
    }
    registerAppContextDestroyEvent() {
        if (this.appContext && this.appContext.destorySignal) {
            this.appContext.destorySignal.subscribe(() => {
                if (this.stateMachine) {
                    this.stateMachine.dispose();
                    this.stateMachine = null;
                }
                if (this.repository) {
                    this.repository.dispose();
                }
            });
        }
    }
    /**
     * 获取表单appcontext，即最上层appcontext
     */
    getFormAppContext() {
        return this.appContext;
    }
    /**
     * 获取frameId
     * @description 获取完整的FrameId，在非普通表单中该值等于frameId，在组合表单中该值为namespace_frameId
     */
    getFrameId(relativeFrameId) {
        if (!relativeFrameId) {
            return this.frameId;
        }
        if (this.namespace && this.namespace.length > 0) {
            return `${this.namespace}_${relativeFrameId}`;
        }
        else {
            return relativeFrameId;
        }
    }
    /**
     * 初始化Repository
     */
    initializeRepository() {
        this.repository.setPaginationConfig(this.repository.paginationInfo);
    }
    initializeForm() {
        // 设置Form语言服务
        // this.form.setTranslateService(translateService);
        // 初始化Form，提取FormControl定义，添加FormControl
        // this.form.init(this.bindingData, this.metadata.bindingTo, this);
        // Form
        this.form = this.injector.get(Form, null);
        if (this.form) {
            // 设置Form语言服务
            this.form.setTranslateService(this.injector.get(TranslateToken, null));
            // 初始化Form，提取FormControl定义，添加FormControl
            const bindingPath = this.viewModel.bindingPath || this.metadata.bindingTo;
            this.form.init(this.bindingData, bindingPath, this);
        }
    }
    initializeStateMachine() {
        // StateMachine 状态机需要在绑定数据之后加载
        this.stateMachine = this.injector.get(StateMachine, null);
        if (this.stateMachine) {
            this.stateMachine.initialize(this, this.variableParseService);
        }
    }
    initializeCommandBus() {
        const handlerRegistry = this.injector.get(CommandHandlerRegistry, new CommandHandlerRegistry(this.metadata.commandHandlers));
        const extendsRegistry = this.injector.get(CommandHandlerExtenderRegistry, new CommandHandlerExtenderRegistry(this.metadata.commandHandlerExtends));
        const commandHandlerFactory = new CommandHandlerFactory(handlerRegistry, extendsRegistry, this, this.variableParseService);
        this.commandBus = new CommandBus(commandHandlerFactory);
    }
    /**
     * 初始化ViewModel
     * @todo
     * 1、需要按照一定的顺序进行初始化，否则依赖无法正确处理；
     * 2、暂时使用init解决Context和其他部分的循环依赖问题，待优化；
     */
    initializeViewModel() {
        if (!this.metadata.bindingTo) {
            this.metadata.bindingTo = this.viewModel.bindingPath;
        }
        this.viewModel.init(this);
        this.regViewModel(this.viewModel);
    }
    /**
     * 初始化BindingData
     * @summary
     * 老表单：repositoryName为空，复制当前Repository里的数据；
     * 新表单：repositoryName有值，引用全局BindingData里的数据；
     */
    initializeBindingData() {
        const repositoryName = this.repository.name;
        const isRunAtHighSpeedMode = this.appContext.runMode === RunMode.highSpeed;
        if (repositoryName && isRunAtHighSpeedMode) {
            const repositoryBindingData = this.appContext.bindingDataManager.getBindingDataByName(repositoryName);
            this.bindingData.initByBindingList(repositoryBindingData.list, this.viewModel.bindingPath);
            this.bindingData.pagingInfo = repositoryBindingData.pagingInfo;
            this.bindingData.setDataTypeInfo(this.repository.entityTypeInfo);
            EntityUtil.watchReposiroty(this.repository, this.bindingData);
        }
        else {
            this.bindingData.initByRepository(this.repository, this.viewModel.bindingPath);
            EntityUtil.watchReposiroty(this.repository, this.bindingData);
            this.bindingData.changes.subscribe((change) => {
                if (change.type === ChangeType.GlobalSelectionChanged) {
                    this.appContext.handleSelectChange(change, this);
                }
            });
        }
    }
    /**
     * 初始化UIState
     * 合并路由参数到UIState中
     */
    initializeUiState() {
        const isInFramework = window.location.href.indexOf('platform') > -1;
        const paramTypeTransform = this.injector.get(PARAM_TYPE_TRANSFORM_TOKEN, false);
        // 获取UIState
        this.uiState = this.injector.get(UIState, null);
        if (!this.uiState) {
            return;
        }
        this.uiState.paramTypeTransform = paramTypeTransform;
        this.uiState.initialize(this);
        // 获取路由参数
        const url = (this.appContext && this.appContext.router && this.appContext.router.url) || '';
        const routerParamService = new RouterParamService();
        const routerParams = routerParamService.getParams(url);
        // 在UIState为路由参数创建属性
        Object.keys(routerParams).forEach((propName) => {
            Object.defineProperty(this.uiState, propName, {
                get: () => {
                    return routerParams[propName];
                }
            });
        });
    }
    /**
     * 注册子ViewModel
     * @todo
     * 1、propName写死了
     */
    regViewModel(viewModel) {
        if (this.appContext && this.appContext.viewModelManager.exsit(viewModel.name) === false) {
            this.appContext.viewModelManager.register(viewModel.name, viewModel);
        }
        const className = viewModel.constructor.name;
        const parentContext = this.parent;
        let parentViewModel = null;
        if (parentContext && parentContext.viewModel) {
            parentViewModel = parentContext.viewModel;
        }
        if (!parentViewModel) {
            return;
        }
        // 优先使用生成器生成的name
        const childViewModels = parentViewModel['childViewModels'];
        let viewModelName = null;
        if (childViewModels) {
            const name = viewModel.constructor.name;
            viewModelName = childViewModels[viewModel.name] || childViewModels[name];
        }
        else if (className.length === 1) {
            const classNameTokens = viewModel.name.split('-').map((nameToken, index) => {
                if (index > 0 && nameToken.length) {
                    const pasicalName = nameToken.charAt(0).toLocaleUpperCase() + nameToken.substr(1, nameToken.length - 1);
                    return pasicalName;
                }
                else if (index === 0 && nameToken.length) {
                    const camelName = nameToken.charAt(0).toLocaleLowerCase() + nameToken.substr(1, nameToken.length - 1);
                    return camelName;
                }
                return nameToken;
            });
            viewModelName = classNameTokens.join('');
        }
        // 兼容产品部老表单的写法，如果需要vm name统一，应按照此规则
        if (!viewModelName) {
            viewModelName = className[0].toLowerCase() + className.substring(1, className.length);
        }
        parentViewModel['viewModelNames'] = parentViewModel['viewModelNames'] || [];
        parentViewModel[viewModelName] = viewModel;
        parentViewModel['viewModelNames'].push(viewModelName);
        viewModel.bindToParent(parentViewModel);
    }
    // #endregion
    /**
     * 检查是否为根FrameContext
     * @summary
     * 检查该FrameContext是不是所在AppContext中的根FrameContext
     */
    isRootFrameContext() {
        return this.parent === null || (this.appContext.runMode === RunMode.highSpeed && this.getVirtualRootFrameContext().frameComponent['isDialogRootComponent'] === true);
    }
    /**
     * 通过namespace获取当前表单的root-framecontext(非整个表单)
     * @description
     * 如果为组合表单，其当前表单的root-framecontext为单个表单的framecontext，而非整个表单的framecontext
     */
    getVirtualRootFrameContext() {
        let formFrameContext = this;
        let parent = this.parent;
        while (parent) {
            // 兼容没有重新编译的表单，如果判断parent.namespace存在会导致获取不到root-framecontext
            if (parent.namespace === this.namespace) {
                formFrameContext = parent;
                parent = parent.parent;
            }
            else {
                break;
            }
        }
        return formFrameContext;
    }
    getContextById(identify) {
        return this.appContext.getContextById(identify);
    }
    getViewModel(viewModelName) {
        const renderAppContext = this.appContext;
        if (renderAppContext) {
            return renderAppContext.viewModelManager.getViewModelByName(viewModelName);
        }
        return null;
    }
    attachViewComponent(viewComponent) {
        this.frameComponent = viewComponent;
        this.appContext.frameComponentRefresher.regFrameComponent(this.frameId, this.frameComponent);
    }
    invoke(actionPath, $event) {
        const actionBindingPath = actionPath.split('.');
        const actionName = actionBindingPath[actionBindingPath.length - 1];
        const bindingViewModel = actionBindingPath.length === 1 ? this.viewModel :
            this.getViewModel(actionBindingPath[actionBindingPath.length - 2]);
        if (!bindingViewModel) {
            alert(`未匹配到'${actionPath}'命令的视图模型，请检查事件是否配置正确。`);
        }
        return bindingViewModel[actionName]($event);
    }
}
FrameContext.decorators = [
    { type: Injectable }
];
/** @nocollapse */
FrameContext.ctorParameters = () => [
    { type: Injector },
    { type: FrameContext, decorators: [{ type: Optional }, { type: SkipSelf }] }
];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZnJhbWVfY29udGV4dC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvZGV2a2l0LyIsInNvdXJjZXMiOlsibGliL2ZyYW1lL2ZyYW1lX2NvbnRleHQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFFBQVEsRUFBRSxVQUFVLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxXQUFXLEVBQWEsTUFBTSxlQUFlLENBQUM7QUFHakcsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ2pELE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUNwRCxPQUFPLEVBQUUsT0FBTyxFQUFFLDBCQUEwQixFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDeEUsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNyQyxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFDdEQsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ2hELE9BQU8sRUFBRSxVQUFVLEVBQUUsOEJBQThCLEVBQUUscUJBQXFCLEVBQUUsc0JBQXNCLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUM3SCxPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFDM0MsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGNBQWMsQ0FBQztBQUMxQyxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDbkQsT0FBTyxFQUFFLFFBQVEsRUFBRSxTQUFTLEVBQUUsTUFBTSxVQUFVLENBQUM7QUFDL0MsT0FBTyxFQUFVLFVBQVUsRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBQzNELE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUdsRCxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUN4RCxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFDekQsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLHlCQUF5QixDQUFDO0FBQ3pELE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLG9DQUFvQyxDQUFDO0FBRTFFLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLDJCQUEyQixDQUFDO0FBRzdELE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQ25ELE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxNQUFNLCtCQUErQixDQUFDO0FBQ3BFLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLHNDQUFzQyxDQUFDO0FBQzVFLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLGtDQUFrQyxDQUFDO0FBQ3JFLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLGlDQUFpQyxDQUFDO0FBQ25FLE9BQU8sRUFBRSx1QkFBdUIsRUFBRSxNQUFNLHlDQUF5QyxDQUFDO0FBQ2xGLE9BQU8sRUFDTCxxQkFBcUIsRUFBRSxrQkFBa0IsRUFBRSxxQkFBcUIsRUFDaEUsMEJBQTBCLEVBQUUscUJBQXFCLEVBQ2xELE1BQU0sYUFBYSxDQUFDO0FBQ3JCLE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSxTQUFTLENBQUM7QUFDbEMsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUUvQixPQUFPLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSx5QkFBeUIsQ0FBQztBQUc5RDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0dBa0hHO0FBRUgsTUFBTSxPQUFPLFlBQWEsU0FBUSxPQUFPO0lBZ0l2Qzs7O09BR0c7SUFDSCxZQUFtQixRQUFrQixFQUEwQixNQUFvQjtRQUNqRixLQUFLLEVBQUUsQ0FBQztRQURTLGFBQVEsR0FBUixRQUFRLENBQVU7UUFsSTlCLGFBQVEsR0FBRyxjQUFjLENBQUM7UUFFdkIsZ0JBQVcsR0FBRyxLQUFLLENBQUM7UUFDdkIsZUFBVSxHQUFHLEtBQUssQ0FBQztRQXdGbkIsYUFBUSxHQUFxQjtZQUNsQyxRQUFRLEVBQUUsRUFBRTtZQUNaLFNBQVMsRUFBRSxFQUFFO1lBQ2IsUUFBUSxFQUFFLElBQUk7WUFDZCxJQUFJLEVBQUUsSUFBSTtZQUNWLFlBQVksRUFBRSxJQUFJO1lBQ2xCLFFBQVEsRUFBRSxJQUFJO1lBQ2QsWUFBWSxFQUFFLElBQUk7WUFDbEIsUUFBUSxFQUFFLElBQUk7WUFDZCxTQUFTLEVBQUUsRUFBRTtTQUNkLENBQUM7UUFxQkY7O1dBRUc7UUFDSSx3QkFBbUIsR0FBd0IsSUFBSSxtQkFBbUIsRUFBRSxDQUFDO1FBTzFFLGdEQUFnRDtRQUNoRCxJQUFJLENBQUMsVUFBVSxHQUFHLFFBQVEsQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDM0MsSUFBSSxDQUFDLGFBQWEsR0FBRyxJQUFJLE9BQU8sRUFBTyxDQUFDO1FBQ3hDLFNBQVM7UUFDVCwwQkFBMEI7UUFDMUIsZ0VBQWdFO1FBQ2hFLG9DQUFvQztRQUNwQyxJQUFJLENBQUMsTUFBTSxJQUFJLE1BQU0sQ0FBQyxVQUFVLEtBQUssSUFBSSxDQUFDLFVBQVUsRUFBRSxFQUFFLG9CQUFvQjtZQUMxRSxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQztZQUNuQixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztTQUNsQjthQUFNO1lBQ0wsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7WUFDckIsSUFBSSxDQUFDLElBQUksR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDO1NBQ3pCO1FBQ0QsSUFBSSxDQUFDLE9BQU8sR0FBRyxRQUFRLENBQUMsR0FBRyxDQUFTLFFBQVEsQ0FBQyxDQUFDO1FBQzlDLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxzQkFBc0IsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFO1lBQzlELElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxzQkFBc0IsQ0FBQyx3QkFBd0IsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7U0FDL0Y7UUFDRCxJQUFJLENBQUMsU0FBUyxHQUFHLFFBQVEsQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQy9DLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQWMsV0FBVyxFQUFFLElBQUksV0FBVyxFQUFFLENBQUMsQ0FBQztRQUNsRixJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxrQkFBa0IsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsa0JBQWtCLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLGVBQWUsQ0FBQyxFQUFFO1lBQ25ILElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFFLElBQUksRUFBRSxXQUFXLENBQUMsUUFBUSxDQUFDLENBQUM7U0FDekU7YUFBTTtZQUNMLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxlQUFlLENBQUM7U0FDakQ7UUFDRCxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFPLElBQUksRUFBRSxJQUFJLElBQUksRUFBRSxDQUFDLENBQUM7UUFDdEQsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUM1RSxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFVLE9BQU8sRUFBRSxJQUFJLE9BQU8sRUFBRSxDQUFDLENBQUM7UUFDbEUsTUFBTSxnQkFBZ0IsR0FBRyxJQUFJLFNBQVMsRUFBRSxDQUFDO1FBQ3pDLGdCQUFnQixDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDNUMsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBWSxTQUFTLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQztRQUMzRSxJQUFJLENBQUMsb0JBQW9CLEdBQUcsUUFBUSxDQUFDLEdBQUcsQ0FBdUIsb0JBQW9CLEVBQUUsSUFBSSxvQkFBb0IsQ0FBQztZQUM1RyxJQUFJLHFCQUFxQixFQUFFO1lBQzNCLElBQUksa0JBQWtCLEVBQUU7WUFDeEIsSUFBSSxxQkFBcUIsRUFBRTtZQUMzQixJQUFJLDBCQUEwQixFQUFFO1lBQ2hDLElBQUkscUJBQXFCLEVBQUU7U0FDNUIsQ0FBQyxDQUFDLENBQUM7UUFDSixxQkFBcUI7UUFDckIsSUFBSSxDQUFDLGdCQUFnQixHQUFHLFFBQVEsQ0FBQyxHQUFHLENBQW9CLGlCQUFpQixFQUFFLElBQUksRUFBRSxXQUFXLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDdkcsVUFBVTtRQUNWLE1BQU0sU0FBUyxHQUFHLFFBQVEsQ0FBQyxHQUFHLENBQVksY0FBYyxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQ2hFLElBQUksQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDO1FBQzNCLGdCQUFnQixDQUFDLFlBQVksQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUN6QyxVQUFVO1FBQ1YsTUFBTSxZQUFZLEdBQUcsUUFBUSxDQUFDLEdBQUcsQ0FBZSxpQkFBaUIsRUFBRSxJQUFJLENBQUMsQ0FBQztRQUN6RSxtQkFBbUIsQ0FBQyxlQUFlLENBQUMsWUFBWSxDQUFDLENBQUM7UUFDbEQsSUFBSSxDQUFDLG9CQUFvQixFQUFFLENBQUM7UUFDNUIsSUFBSSxDQUFDLFVBQVUsQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDdEMsSUFBSSxDQUFDLDhCQUE4QixFQUFFLENBQUM7SUFDeEMsQ0FBQztJQUNELE9BQU8sQ0FBQyxPQUFhO1FBQ25CLElBQUksSUFBSSxDQUFDLFVBQVUsRUFBRTtZQUNuQixPQUFPO1NBQ1I7UUFDRCxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQztRQUN4QixJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztRQUN2QixJQUFJLElBQUksQ0FBQyxhQUFhLEVBQUU7WUFDdEIsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLEVBQUUsQ0FBQztZQUMxQixJQUFJLENBQUMsYUFBYSxDQUFDLFFBQVEsRUFBRSxDQUFDO1NBQy9CO1FBQ0QsSUFBSSxJQUFJLENBQUMsVUFBVSxFQUFFO1lBQ25CLElBQUksQ0FBQyxVQUFVLENBQUMsbUJBQW1CLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDNUQsSUFBSSxDQUFDLFVBQVUsQ0FBQyx1QkFBdUIsQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsQ0FBQztTQUNqRTtRQUNELElBQUksSUFBSSxDQUFDLFVBQVUsSUFBSSxJQUFJLENBQUMsa0JBQWtCLEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDekQsTUFBTSxjQUFjLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixDQUFDLENBQUM7WUFDOUMsSUFBSSxjQUFjLElBQUksS0FBSyxDQUFDLE9BQU8sQ0FBQyxjQUFjLENBQUMsRUFBRTtnQkFDbkQsY0FBYyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRTtvQkFDNUIsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQztnQkFDcEIsQ0FBQyxDQUFDLENBQUM7YUFDSjtZQUNELElBQUksQ0FBQyxVQUFVLENBQUMscUJBQXFCLEVBQUUsQ0FBQztTQUN6QztRQUNELElBQUksSUFBSSxDQUFDLFdBQVcsRUFBRTtZQUNwQixJQUFJLENBQUMsV0FBVyxDQUFDLE9BQU8sRUFBRSxDQUFDO1lBQzNCLDJCQUEyQjtTQUM1QjtRQUNELElBQUksSUFBSSxDQUFDLFNBQVMsRUFBRTtZQUNsQixJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sRUFBRSxDQUFDO1NBQzFCO1FBQ0QsSUFBSSxJQUFJLENBQUMsSUFBSSxFQUFFO1lBQ2IsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztZQUNwQixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztTQUNsQjtRQUNELElBQUksSUFBSSxDQUFDLFVBQVUsRUFBRTtZQUNuQixJQUFJLENBQUMsVUFBVSxDQUFDLE9BQU8sRUFBRSxDQUFDO1lBQzFCLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDO1NBQ3hCO1FBQ0QsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDM0Isb0JBQW9CO1FBQ3BCLHNCQUFzQjtRQUN0Qix1QkFBdUI7UUFDdkIsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUM7UUFDM0IsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUM7UUFDdkIsNEJBQTRCO1FBQzVCLDBCQUEwQjtRQUMxQixJQUFJLENBQUMsZ0JBQWdCLEdBQUcsSUFBSSxDQUFDO1FBQzdCLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxJQUFJLENBQUM7UUFDOUIsSUFBSSxDQUFDLG9CQUFvQixHQUFHLElBQUksQ0FBQztRQUNqQyxJQUFJLENBQUMsb0JBQW9CLEdBQUcsSUFBSSxDQUFDO1FBQ2pDLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO1FBQ3JCLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDO1FBQ3RCLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO1FBQ3JCLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLENBQUM7UUFDN0IsbUJBQW1CLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQzVDLENBQUM7SUFDRCxXQUFXO1FBQ1QsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO0lBQ2pCLENBQUM7SUFDRDs7OztPQUlHO0lBQ0ksZ0JBQWdCLENBQUksRUFBVTtRQUNuQyxNQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsbUJBQW1CLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ3BELElBQUksVUFBVSxJQUFJLFVBQVUsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO1lBQ3ZDLE1BQU0sU0FBUyxHQUFHLFVBQVUsQ0FBQyxDQUFDLENBQU0sQ0FBQztZQUNyQyxPQUFPLFNBQVMsQ0FBQztTQUNsQjtRQUNELE9BQU8sSUFBSSxDQUFDO0lBQ2QsQ0FBQztJQUNEOzs7T0FHRztJQUNJLGlCQUFpQixDQUFJLEVBQVU7UUFDcEMsT0FBTyxJQUFJLENBQUMsbUJBQW1CLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBUSxDQUFDO0lBQ2pELENBQUM7SUFDRCxZQUFZLENBQUMsaUJBQTJCO1FBQ3RDLElBQUksQ0FBQyxRQUFRLEdBQUcsaUJBQWlCLENBQUM7SUFDcEMsQ0FBQztJQUVELGNBQWM7SUFFZDs7Ozs7T0FLRztJQUNJLElBQUksQ0FBQyxjQUE4QjtRQUN4QyxJQUFJLENBQUMsY0FBYyxHQUFHLGNBQWMsQ0FBQztRQUNyQyxJQUFJLENBQUMscUJBQXFCLEVBQUUsQ0FBQztRQUM3QixJQUFJLENBQUMsc0JBQXNCLEVBQUUsQ0FBQztRQUM5QixJQUFJLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztRQUN6QixJQUFJLENBQUMsY0FBYyxFQUFFLENBQUM7UUFDdEIsSUFBSSxDQUFDLG9CQUFvQixFQUFFLENBQUM7UUFDNUIsSUFBSSxDQUFDLG1CQUFtQixFQUFFLENBQUM7UUFDM0IsSUFBSSxDQUFDLHdCQUF3QixFQUFFLENBQUM7UUFDaEMsSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDO1FBQ3RCLElBQUksQ0FBQyxVQUFVLENBQUMsdUJBQXVCLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUM7SUFDL0YsQ0FBQztJQUNNLGNBQWM7UUFDbkIsSUFBSSxDQUFDLG9CQUFvQixHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUF1QixvQkFBb0IsRUFBRSxJQUFJLENBQUMsQ0FBQztRQUNoRyxJQUFJLENBQUMsaUJBQWlCLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQW9CLGlCQUFpQixFQUFFLElBQUksQ0FBQyxDQUFDO1FBQ3ZGLE1BQU0sdUJBQXVCLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQTBCLHVCQUF1QixFQUFFLElBQUksQ0FBQyxDQUFDO1FBQzFHLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBbUIsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDdEYsQ0FBQztJQUNEOztPQUVHO0lBQ08sd0JBQXdCO1FBQ2hDLG9DQUFvQztRQUNwQyxNQUFNLGNBQWMsR0FBRyxJQUFJLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztRQUNoRCxNQUFNLGFBQWEsR0FBRyxjQUFjLENBQUMsYUFBYSxDQUFDO1FBQ25ELE1BQU0sQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxHQUFHLGFBQWEsQ0FBQztRQUM3QyxJQUFJLElBQUksQ0FBQyxnQkFBZ0IsS0FBSyxJQUFJLEVBQUU7WUFDbEMsTUFBTSxrQkFBa0IsR0FBRyxNQUFNLENBQUMsYUFBYSxDQUFDLEdBQUcsTUFBTSxDQUFDLGFBQWEsQ0FBQyxJQUFJLEVBQUUsQ0FBQztZQUMvRSxJQUFJLElBQUksQ0FBQyxRQUFRLEtBQUssSUFBSSxJQUFJLElBQUksQ0FBQyxrQkFBa0IsRUFBRSxFQUFFO2dCQUN2RCxrQkFBa0IsQ0FBQyx1QkFBdUIsR0FBRyxJQUFJLENBQUM7Z0JBQ2xELElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO2dCQUNsRCxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxXQUFXLEVBQUUsRUFBRSxFQUFFLGFBQWEsRUFBRSxjQUFjLEVBQUUsQ0FBQyxLQUFLLEVBQUUsRUFBRTtvQkFDekUsSUFBSSxJQUFJLENBQUMsV0FBVyxLQUFLLElBQUksRUFBRTt3QkFDN0IsT0FBTztxQkFDUjtvQkFDRCxJQUFJLEtBQUssSUFBSSxLQUFLLENBQUMsS0FBSyxFQUFFO3dCQUN4QixJQUFJOzRCQUNGLEtBQUssQ0FBQyxLQUFLLENBQUMsaUJBQWlCLEdBQUcsSUFBSSxDQUFDO3lCQUN0Qzt3QkFBQyxXQUFNLEdBQUc7cUJBQ1o7b0JBQ0QsSUFBSSxDQUFDLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDdEMsQ0FBQyxDQUFDLENBQUM7YUFDSjtZQUNELElBQUksQ0FBQyxhQUFhLENBQUMsU0FBUyxDQUFDLEdBQUcsRUFBRTtnQkFDaEMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsV0FBVyxFQUFFLEVBQUUsRUFBRSxhQUFhLEVBQUUsY0FBYyxDQUFDLENBQUM7WUFDcEUsQ0FBQyxDQUFDLENBQUM7U0FDSjtJQUNILENBQUM7SUFDUyw4QkFBOEI7UUFDdEMsSUFBSSxJQUFJLENBQUMsVUFBVSxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsYUFBYSxFQUFFO1lBQ3BELElBQUksQ0FBQyxVQUFVLENBQUMsYUFBYSxDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQUU7Z0JBQzNDLElBQUksSUFBSSxDQUFDLFlBQVksRUFBRTtvQkFDckIsSUFBSSxDQUFDLFlBQVksQ0FBQyxPQUFPLEVBQUUsQ0FBQztvQkFDNUIsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUM7aUJBQzFCO2dCQUNELElBQUksSUFBSSxDQUFDLFVBQVUsRUFBRTtvQkFDbkIsSUFBSSxDQUFDLFVBQVUsQ0FBQyxPQUFPLEVBQUUsQ0FBQztpQkFDM0I7WUFDSCxDQUFDLENBQUMsQ0FBQztTQUNKO0lBQ0gsQ0FBQztJQUNEOztPQUVHO0lBQ0ksaUJBQWlCO1FBQ3RCLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQztJQUN6QixDQUFDO0lBQ0Q7OztPQUdHO0lBQ0ksVUFBVSxDQUFDLGVBQXVCO1FBQ3ZDLElBQUksQ0FBQyxlQUFlLEVBQUU7WUFDcEIsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDO1NBQ3JCO1FBQ0QsSUFBSSxJQUFJLENBQUMsU0FBUyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtZQUMvQyxPQUFPLEdBQUcsSUFBSSxDQUFDLFNBQVMsSUFBSSxlQUFlLEVBQUUsQ0FBQztTQUMvQzthQUFNO1lBQ0wsT0FBTyxlQUFlLENBQUM7U0FDeEI7SUFDSCxDQUFDO0lBQ0Q7O09BRUc7SUFDSyxvQkFBb0I7UUFFMUIsSUFBSSxDQUFDLFVBQVUsQ0FBQyxtQkFBbUIsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLGNBQWMsQ0FBQyxDQUFDO0lBQ3RFLENBQUM7SUFFTyxjQUFjO1FBQ3BCLGFBQWE7UUFDYixtREFBbUQ7UUFDbkQsd0NBQXdDO1FBQ3hDLG1FQUFtRTtRQUNuRSxPQUFPO1FBQ1AsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBTyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDaEQsSUFBSSxJQUFJLENBQUMsSUFBSSxFQUFFO1lBQ2IsYUFBYTtZQUNiLElBQUksQ0FBQyxJQUFJLENBQUMsbUJBQW1CLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsY0FBYyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDdkUsd0NBQXdDO1lBQ3hDLE1BQU0sV0FBVyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsV0FBVyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDO1lBQzFFLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsV0FBVyxFQUFFLElBQUksQ0FBQyxDQUFDO1NBQ3JEO0lBQ0gsQ0FBQztJQUVPLHNCQUFzQjtRQUM1Qiw4QkFBOEI7UUFDOUIsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBZSxZQUFZLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDeEUsSUFBSSxJQUFJLENBQUMsWUFBWSxFQUFFO1lBQ3JCLElBQUksQ0FBQyxZQUFZLENBQUMsVUFBVSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsb0JBQW9CLENBQUMsQ0FBQztTQUMvRDtJQUNILENBQUM7SUFFTyxvQkFBb0I7UUFDMUIsTUFBTSxlQUFlLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQXlCLHNCQUFzQixFQUN0RixJQUFJLHNCQUFzQixDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQztRQUM3RCxNQUFNLGVBQWUsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBaUMsOEJBQThCLEVBQ3RHLElBQUksOEJBQThCLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDLENBQUM7UUFDM0UsTUFBTSxxQkFBcUIsR0FBRyxJQUFJLHFCQUFxQixDQUFDLGVBQWUsRUFBRSxlQUFlLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDO1FBQzNILElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxVQUFVLENBQUMscUJBQXFCLENBQUMsQ0FBQztJQUMxRCxDQUFDO0lBRUQ7Ozs7O09BS0c7SUFDSyxtQkFBbUI7UUFDekIsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxFQUFFO1lBQzVCLElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsV0FBVyxDQUFDO1NBQ3REO1FBQ0QsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDMUIsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7SUFDcEMsQ0FBQztJQUdEOzs7OztPQUtHO0lBQ0sscUJBQXFCO1FBQzNCLE1BQU0sY0FBYyxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDO1FBQzVDLE1BQU0sb0JBQW9CLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxPQUFPLEtBQUssT0FBTyxDQUFDLFNBQVMsQ0FBQztRQUMzRSxJQUFJLGNBQWMsSUFBSSxvQkFBb0IsRUFBRTtZQUMxQyxNQUFNLHFCQUFxQixHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsa0JBQWtCLENBQUMsb0JBQW9CLENBQUMsY0FBYyxDQUFDLENBQUM7WUFDdEcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxpQkFBaUIsQ0FBQyxxQkFBcUIsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxXQUFXLENBQUMsQ0FBQztZQUMzRixJQUFJLENBQUMsV0FBVyxDQUFDLFVBQVUsR0FBRyxxQkFBcUIsQ0FBQyxVQUFVLENBQUM7WUFDL0QsSUFBSSxDQUFDLFdBQVcsQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxjQUFjLENBQUMsQ0FBQztZQUNqRSxVQUFVLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1NBQy9EO2FBQU07WUFDTCxJQUFJLENBQUMsV0FBVyxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxXQUFXLENBQUMsQ0FBQztZQUMvRSxVQUFVLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1lBQzlELElBQUksQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDLE1BQWMsRUFBRSxFQUFFO2dCQUNwRCxJQUFJLE1BQU0sQ0FBQyxJQUFJLEtBQUssVUFBVSxDQUFDLHNCQUFzQixFQUFFO29CQUNyRCxJQUFJLENBQUMsVUFBVSxDQUFDLGtCQUFrQixDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQztpQkFDbEQ7WUFDSCxDQUFDLENBQUMsQ0FBQztTQUNKO0lBQ0gsQ0FBQztJQUdEOzs7T0FHRztJQUNLLGlCQUFpQjtRQUN2QixNQUFNLGFBQWEsR0FBRyxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDcEUsTUFBTSxrQkFBa0IsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBVSwwQkFBMEIsRUFBRSxLQUFLLENBQUMsQ0FBQztRQUN6RixZQUFZO1FBQ1osSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBVSxPQUFPLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDekQsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUU7WUFDakIsT0FBTztTQUNSO1FBQ0QsSUFBSSxDQUFDLE9BQU8sQ0FBQyxrQkFBa0IsR0FBRyxrQkFBa0IsQ0FBQztRQUNyRCxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUM5QixTQUFTO1FBQ1QsTUFBTSxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsVUFBVSxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUM1RixNQUFNLGtCQUFrQixHQUFHLElBQUksa0JBQWtCLEVBQUUsQ0FBQztRQUNwRCxNQUFNLFlBQVksR0FBRyxrQkFBa0IsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUM7UUFFdkQsb0JBQW9CO1FBQ3BCLE1BQU0sQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsUUFBZ0IsRUFBRSxFQUFFO1lBQ3JELE1BQU0sQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxRQUFRLEVBQUU7Z0JBQzVDLEdBQUcsRUFBRSxHQUFHLEVBQUU7b0JBQ1IsT0FBTyxZQUFZLENBQUMsUUFBUSxDQUFDLENBQUM7Z0JBQ2hDLENBQUM7YUFDRixDQUFDLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFRDs7OztPQUlHO0lBQ08sWUFBWSxDQUFDLFNBQW9CO1FBQ3pDLElBQUksSUFBSSxDQUFDLFVBQVUsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLEtBQUssS0FBSyxFQUFFO1lBQ3ZGLElBQUksQ0FBQyxVQUFVLENBQUMsZ0JBQWdCLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxJQUFJLEVBQUUsU0FBUyxDQUFDLENBQUM7U0FDdEU7UUFDRCxNQUFNLFNBQVMsR0FBRyxTQUFTLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQztRQUM3QyxNQUFNLGFBQWEsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDO1FBQ2xDLElBQUksZUFBZSxHQUFHLElBQUksQ0FBQztRQUMzQixJQUFJLGFBQWEsSUFBSSxhQUFhLENBQUMsU0FBUyxFQUFFO1lBQzVDLGVBQWUsR0FBRyxhQUFhLENBQUMsU0FBUyxDQUFDO1NBQzNDO1FBQ0QsSUFBSSxDQUFDLGVBQWUsRUFBRTtZQUNwQixPQUFPO1NBQ1I7UUFDRCxpQkFBaUI7UUFDakIsTUFBTSxlQUFlLEdBQUcsZUFBZSxDQUFDLGlCQUFpQixDQUFDLENBQUM7UUFDM0QsSUFBSSxhQUFhLEdBQUcsSUFBSSxDQUFDO1FBQ3pCLElBQUksZUFBZSxFQUFFO1lBQ25CLE1BQU0sSUFBSSxHQUFHLFNBQVMsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDO1lBQ3hDLGFBQWEsR0FBRyxlQUFlLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxJQUFJLGVBQWUsQ0FBQyxJQUFJLENBQUMsQ0FBQztTQUMxRTthQUFNLElBQUksU0FBUyxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUU7WUFDakMsTUFBTSxlQUFlLEdBQUcsU0FBUyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsU0FBUyxFQUFFLEtBQUssRUFBRSxFQUFFO2dCQUN6RSxJQUFJLEtBQUssR0FBRyxDQUFDLElBQUksU0FBUyxDQUFDLE1BQU0sRUFBRTtvQkFDakMsTUFBTSxXQUFXLEdBQUcsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxpQkFBaUIsRUFBRSxHQUFHLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLFNBQVMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUM7b0JBQ3hHLE9BQU8sV0FBVyxDQUFDO2lCQUNwQjtxQkFBTSxJQUFJLEtBQUssS0FBSyxDQUFDLElBQUksU0FBUyxDQUFDLE1BQU0sRUFBRTtvQkFDMUMsTUFBTSxTQUFTLEdBQUcsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxpQkFBaUIsRUFBRSxHQUFHLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLFNBQVMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUM7b0JBQ3RHLE9BQU8sU0FBUyxDQUFDO2lCQUNsQjtnQkFDRCxPQUFPLFNBQVMsQ0FBQztZQUNuQixDQUFDLENBQUMsQ0FBQztZQUNILGFBQWEsR0FBRyxlQUFlLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1NBQzFDO1FBQ0QsbUNBQW1DO1FBQ25DLElBQUksQ0FBQyxhQUFhLEVBQUU7WUFDbEIsYUFBYSxHQUFHLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXLEVBQUUsR0FBRyxTQUFTLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUM7U0FDdkY7UUFDRCxlQUFlLENBQUMsZ0JBQWdCLENBQUMsR0FBRyxlQUFlLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDNUUsZUFBZSxDQUFDLGFBQWEsQ0FBQyxHQUFHLFNBQVMsQ0FBQztRQUMzQyxlQUFlLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7UUFDdEQsU0FBUyxDQUFDLFlBQVksQ0FBQyxlQUFlLENBQUMsQ0FBQztJQUMxQyxDQUFDO0lBRUQsYUFBYTtJQUViOzs7O09BSUc7SUFDSSxrQkFBa0I7UUFDdkIsT0FBTyxJQUFJLENBQUMsTUFBTSxLQUFLLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxLQUFLLE9BQU8sQ0FBQyxTQUFTLElBQUksSUFBSSxDQUFDLDBCQUEwQixFQUFFLENBQUMsY0FBYyxDQUFDLHVCQUF1QixDQUFDLEtBQUssSUFBSSxDQUFDLENBQUM7SUFDdkssQ0FBQztJQUNEOzs7O09BSUc7SUFDSSwwQkFBMEI7UUFDL0IsSUFBSSxnQkFBZ0IsR0FBaUIsSUFBSSxDQUFDO1FBQzFDLElBQUksTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUM7UUFDekIsT0FBTyxNQUFNLEVBQUU7WUFDYiw2REFBNkQ7WUFDN0QsSUFBSSxNQUFNLENBQUMsU0FBUyxLQUFLLElBQUksQ0FBQyxTQUFTLEVBQUU7Z0JBQ3ZDLGdCQUFnQixHQUFHLE1BQU0sQ0FBQztnQkFDMUIsTUFBTSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUM7YUFDeEI7aUJBQU07Z0JBQ0wsTUFBTTthQUNQO1NBQ0Y7UUFDRCxPQUFPLGdCQUFnQixDQUFDO0lBQzFCLENBQUM7SUFHTSxjQUFjLENBQUMsUUFBZ0I7UUFDcEMsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDLGNBQWMsQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUNsRCxDQUFDO0lBRU0sWUFBWSxDQUFDLGFBQXFCO1FBQ3ZDLE1BQU0sZ0JBQWdCLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQztRQUN6QyxJQUFJLGdCQUFnQixFQUFFO1lBQ3BCLE9BQU8sZ0JBQWdCLENBQUMsZ0JBQWdCLENBQUMsa0JBQWtCLENBQUMsYUFBYSxDQUFDLENBQUM7U0FDNUU7UUFDRCxPQUFPLElBQUksQ0FBQztJQUNkLENBQUM7SUFFTSxtQkFBbUIsQ0FBQyxhQUE2QjtRQUN0RCxJQUFJLENBQUMsY0FBYyxHQUFHLGFBQWEsQ0FBQztRQUNwQyxJQUFJLENBQUMsVUFBVSxDQUFDLHVCQUF1QixDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDO0lBQy9GLENBQUM7SUFFTSxNQUFNLENBQUMsVUFBa0IsRUFBRSxNQUFXO1FBQzNDLE1BQU0saUJBQWlCLEdBQUcsVUFBVSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNoRCxNQUFNLFVBQVUsR0FBRyxpQkFBaUIsQ0FBQyxpQkFBaUIsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDbkUsTUFBTSxnQkFBZ0IsR0FBRyxpQkFBaUIsQ0FBQyxNQUFNLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7WUFDeEUsSUFBSSxDQUFDLFlBQVksQ0FBQyxpQkFBaUIsQ0FBQyxpQkFBaUIsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNyRSxJQUFJLENBQUMsZ0JBQWdCLEVBQUU7WUFDckIsS0FBSyxDQUFDLFFBQVEsVUFBVSx1QkFBdUIsQ0FBQyxDQUFDO1NBQ2xEO1FBQ0QsT0FBTyxnQkFBZ0IsQ0FBQyxVQUFVLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUM5QyxDQUFDOzs7WUE5akJGLFVBQVU7Ozs7WUE3SkYsUUFBUTtZQWtTd0QsWUFBWSx1QkFBM0MsUUFBUSxZQUFJLFFBQVEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RvciwgSW5qZWN0YWJsZSwgT3B0aW9uYWwsIFNraXBTZWxmLCBJbmplY3RGbGFncywgT25EZXN0cm95IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IFJvdXRlciB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XHJcbmltcG9ydCB7IEVudGl0eSB9IGZyb20gJy4uL2VudGl0eS9pbmRleCc7XHJcbmltcG9ydCB7IFJlcG9zaXRvcnkgfSBmcm9tICcuLi9yZXBvc2l0b3J5L2luZGV4JztcclxuaW1wb3J0IHsgQmluZGluZ0RhdGEgfSBmcm9tICcuLi9iaW5kaW5nLWRhdGEvaW5kZXgnO1xyXG5pbXBvcnQgeyBVSVN0YXRlLCBQQVJBTV9UWVBFX1RSQU5TRk9STV9UT0tFTiB9IGZyb20gJy4uL3VpLXN0YXRlL2luZGV4JztcclxuaW1wb3J0IHsgRm9ybSB9IGZyb20gJy4uL2Zvcm0vaW5kZXgnO1xyXG5pbXBvcnQgeyBTdGF0ZU1hY2hpbmUgfSBmcm9tICcuLi9zdGF0ZS1tYWNoaW5lL2luZGV4JztcclxuaW1wb3J0IHsgVmlld01vZGVsIH0gZnJvbSAnLi4vdmlldy1tb2RlbC9pbmRleCc7XHJcbmltcG9ydCB7IENvbW1hbmRCdXMsIENvbW1hbmRIYW5kbGVyRXh0ZW5kZXJSZWdpc3RyeSwgQ29tbWFuZEhhbmRsZXJGYWN0b3J5LCBDb21tYW5kSGFuZGxlclJlZ2lzdHJ5IH0gZnJvbSAnLi4vY29tbWFuZC9pbmRleCc7XHJcbmltcG9ydCB7IENvbnRleHQgfSBmcm9tICcuLi9jb250ZXh0L2luZGV4JztcclxuaW1wb3J0IHsgQXBwQ29udGV4dCB9IGZyb20gJy4uL2FwcC9pbmRleCc7XHJcbmltcG9ydCB7IFJvdXRlclBhcmFtU2VydmljZSB9IGZyb20gJy4uL21pc2MvaW5kZXgnO1xyXG5pbXBvcnQgeyBGUkFNRV9JRCwgTkFNRVNQQUNFIH0gZnJvbSAnLi90b2tlbnMnO1xyXG5pbXBvcnQgeyBDaGFuZ2UsIENoYW5nZVR5cGUgfSBmcm9tICcuLi9iaW5kaW5nLWRhdGEvaW5kZXgnO1xyXG5pbXBvcnQgeyBFdmVudEJ1cyB9IGZyb20gJy4uL2V2ZW50LWJ1cy1uZXcvaW5kZXgnO1xyXG5pbXBvcnQgeyBGcmFtZUNvbXBvbmVudCB9IGZyb20gJy4vZnJhbWVfY29tcG9uZW50JztcclxuaW1wb3J0IHsgSUV4Y2VwdGlvbkhhbmRsZXIgfSBmcm9tICcuLi9leGNlcHRpb24vdHlwZXMnO1xyXG5pbXBvcnQgeyBFWENFUFRJT05fSEFORExFUiB9IGZyb20gJy4uL2V4Y2VwdGlvbi90b2tlbnMnO1xyXG5pbXBvcnQgeyBFbnRpdHlVdGlsIH0gZnJvbSAnLi4vYmluZGluZy1kYXRhL2VudGl0eV91dGlsJztcclxuaW1wb3J0IHsgVHJhbnNsYXRlVG9rZW4gfSBmcm9tICcuLi9pMThuL3RyYW5zbGF0ZV90b2tlbic7XHJcbmltcG9ydCB7IFZhcmlhYmxlUGFyc2VTZXJ2aWNlIH0gZnJvbSAnLi4vdmFyaWFibGUvdmFyaWFibGVfcGFyc2Vfc2VydmljZSc7XHJcbmltcG9ydCB7IElDb250ZXh0TWV0YWRhdGEgfSBmcm9tICcuLi9hcHAvYXBwX21ldGFkYXRhJztcclxuaW1wb3J0IHsgVHJhbnNsYXRlU2VydmljZSB9IGZyb20gJy4uL2kxOG4vdHJhbnNsYXRlX3NlcnZpY2UnO1xyXG5pbXBvcnQgeyBUcmFuc2xhdGUgfSBmcm9tICcuLi9pMThuJztcclxuaW1wb3J0IHsgVXNlclNldHRpbmdzIH0gZnJvbSAnLi4vaTE4bi90eXBlcyc7XHJcbmltcG9ydCB7IFVzZXJTZXR0aW5nc1Rva2VuIH0gZnJvbSAnLi4vaTE4bi90b2tlbnMnO1xyXG5pbXBvcnQgeyBVc2VyU2V0dGluZ3NTZXJ2aWNlIH0gZnJvbSAnLi4vaTE4bi91c2VyX3NldHRpbmdzX3NlcnZpY2UnO1xyXG5pbXBvcnQgeyBFeHByZXNzaW9uRW5naW5lSW1wbCB9IGZyb20gJy4uL2V4cHJlc3Npb24vZXhwcmVzc2lvbl9lbmdpbmVfaW1wbCc7XHJcbmltcG9ydCB7IEV4cHJlc3Npb25NYW5hZ2VyIH0gZnJvbSAnLi4vZXhwcmVzc2lvbi9leHByZXNzaW9uX21hbmFnZXInO1xyXG5pbXBvcnQgeyBFeHByZXNzaW9uUmVzdWx0IH0gZnJvbSAnLi4vZXhwcmVzc2lvbi9leHByZXNzaW9uX3Jlc3VsdCc7XHJcbmltcG9ydCB7IEV4cHJlc3Npb25SZXN1bHRGYWN0b3J5IH0gZnJvbSAnLi4vZXhwcmVzc2lvbi9leHByZXNzaW9uX3Jlc3VsdF9mYWN0b3J5JztcclxuaW1wb3J0IHtcclxuICBDb21tYW5kVmFyaWFibGVQYXJzZXIsIERhdGFWYXJpYWJsZVBhcnNlciwgRnJhbWVJZFZhcmlhYmxlUGFyc2VyLFxyXG4gIFN0YXRlTWFjaGluZVZhcmlhYmxlUGFyc2VyLCBVSVN0YXRlVmFyaWFibGVQYXJzZXJcclxufSBmcm9tICcuLi92YXJpYWJsZSc7XHJcbmltcG9ydCB7IFJ1bk1vZGUgfSBmcm9tICcuLi9jb3JlJztcclxuaW1wb3J0IHsgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBJRGlzcG9zYWJsZSB9IGZyb20gJy4uL2NvcmUvaW5kZXgnO1xyXG5pbXBvcnQgeyBDb21wb25lbnRSZWZNYW5hZ2VyIH0gZnJvbSAnLi9jb21wb25lbnRfcmVmX21hbmFnZXInO1xyXG5cclxuXHJcbi8qKlxyXG4gKiDnu4Tku7bkuIrkuIvmlodcclxuICogQGRlc2NyaXB0aW9uIFxyXG4gKiAjIOS4iuS4i+aWh1xyXG4gKiAjIyBPdmVydmlld1xyXG4gKiBcclxuICog5q+P5Liq57uE5Lu277yIRnJhbWVDb21wb25lbnTvvInpg73mnInoh6rlt7HnmoTkuIrkuIvmlofvvIhGcmFtZUNvbnRleHTvvIks6YCa6L+H5LiK5LiL5paH5Y+v5Lul6I635Y+W5o6n5Yi25Zmo55qE5omA5pyJ5bGe5oCn77yM5aaC5bi455So55qEYGZyYW1lSWRg44CBYEJpbmRpbmdEYXRhYOOAgWBSZXBvc2l0b3J5YOOAgWBWaWV3TW9kZWxg44CBYFN0YXRlTWFjaGluZWDjgIEgKiBgVUlTdGF0ZWDnrYnjgILkuIrkuIvmloflnKjlhoXlrZjkuK3lkYjmoJHlvaLnu5PmnoTvvIzkvp3pmYTkuo5GcmFtZUNvbXBvbmVudOOAgue7k+aehOWmguS4i++8mlxyXG4gKiBcclxuICogIVtpbWFnZS0yMDIxMDgwNjIwNDc1NTM3OF0oaHR0cHM6Ly9vcGVuLmluc3B1cm9ubGluZS5jb20vaUdJWC9hc3NldHMvY2xvdWRwbHVzL2lnaXhfMjExMC9mYXJyaXMvZGV2a2l0L2d1aWRlL2ltYWdlcy9pbWFnZS0yMDIxMDgwNjIwNDc1NTM3OC5wbmcpXHJcbiAqIFxyXG4gKiDku47kuIrlm77miJHku6zlj6/ku6XnnIvlh7rmr4/kuKrkuIrkuIvmlofpg73mnInoh6rlt7HnmoRgVmlld01vZGVsYOOAgWBVSVN0YXRlYO+8jOmCo+S5iOWmguS9leehruWumuS4gOS4quWRveS7pOWcqOaJp+ihjOaXtueUqOeahOaYr+WTquS4quS4iuS4i+aWh+WRou+8n+WFtuWunuaXoOiuuuWRveS7pOWcqOWTquS4quWcsOaWueiiq+iwg+eUqO+8jOS4iuS4i+aWh+mDveaYr+WRveS7pOaJgOWcqOeahOe7hOS7tueahOS4iuS4i+aWh+OAguWNs++8jOWmguaenCAqIOWRveS7pOaMgui9veWIsOS6hmBkZXRhaWwtZm9ybS1jb21wb25lbnRg55qE6KeG5Zu+5qih5Z6L77yM5L2G5ZG95Luk5pyA57uI6KKrYHJvb3QtY29tcG9uZW50YOS4iueahOaMiemSruiwg+eUqOS6hu+8jOWFtuS4iuS4i+aWh+S7jeeEtuaYr2BkZXRhaWwtZnJvbS1jb21wb25lbnRg57uE5Lu255qE5LiK5LiL5paH44CC5LmL5omA5Lul5Ye6546w6L+Z56eN546w6LGh5ZKMQW5ndWxhcueahOS+nei1luazqCAqIOWFpeWvhuS4jeWPr+WIhu+8jOeUseS6jkFuZ3VsYXLlnKjmn6Xmib5gcHJvdmlkZXJg55qE5pe25YCZ5oC75piv5LuO6Ieq5bex55qE57uE5Lu25byA5aeL5ZCR5LiK5om+77yM5aaC5p6c5Zyo57uE5Lu25YaF6YOo5om+5Yiw5LqG5YiZ5LiN5YaN57un57ut5p+l5om+77yM5aaC5p6c5om+5LiN5Yiw5YiZ5Lya57un57ut5ZCR5LiK77yM5aaC5p6c5p+l5om+5Yiw5pyA5LiK57qn5L6d54S25om+5LiN5Yiw5bCx5Lya5oqlYE5vIHByb3ZpZGVyICAqIGZvciB4eGDplJnor6/jgIJcclxuICogXHJcbiAqIOaXoueEtuWmguatpO+8jOWmguaenOaIkeS7rOWcqGBkZXRhaWwtZm9ybS1jb21wb25lbnRg5Lit5oOz6KaB6I635Y+WYHJvb3QtY29tcG9uZW50YOS4reWumuS5ieeahOWPmOmHj++8iFVJU3RhdGXvvInor6XlpoLkvZXlgZrlkaLvvJ/nrZTmoYjmmK/liIfmjaLkuIrkuIvmlofvvIzlj6/ku6XpgJrov4fku6XkuIvmlrnlvI/lrp7njrDvvJpcclxuICogXHJcbiAqIGBgYHR5cGVzY3JpcHRcclxuICogLy8g5pa55rOVMVxyXG4gKiBjb25zdCByb290RnJhbWVDb250ZXh0ID0gdGhpcy5mcmFtZUNvbnRleHQucm9vdDtcclxuICogLy8g5pa55rOVMlxyXG4gKiBjb25zdCByb290RnJhbWVDb250ZXh0ID0gdGhpcy5mcmFtZUNvbnRleHQuYXBwQ29udGV4dC5mcmFtZUNvbnRleHRNYW5hZ2VyLmdldEZyYW1lQ29udGV4dEJ5SWQoJ3Jvb3QtY29tcG9uZW50Jyk7XHJcbiAqIGBgYFxyXG4gKiBcclxuICog6YCa5bi45Zyo57yW5YaZYFdlYuaehOS7tmDml7blhYjlvJXlhaVGcmFtZUNvbnRleHTvvIzlpoLvvJpcclxuICogXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogaW1wb3J0IHtGcmFtZUNvbnRleHQsQmluZGluZ0RhdGEsUmVwb3NpdG9yeX0gZnJvbSAnQGZhcnJpcy9kZXZraXQnO1xyXG4gKiBcclxuICogY29uc3RydWN0b3IocHJpdmF0ZSBmcmFtZUNvbnRleHQ6RnJhbWVDb250ZXh0KXt9XHJcbiAqIFxyXG4gKiBwdWJsaWMgbWV0aG9kKCl7XHJcbiAqICAgICBjb25zdCBiaW5kaW5nRGF0YTogQmluZGluZ0RhdGEgPSB0aGlzLmZyYW1lQ29udGV4dC5iaW5kaW5nRGF0YTtcclxuICogICAgIGNvbnN0IHJlcG9zaXRvcnk6IFJlcG9zaXRvcnkgPSB0aGlzLmZyYW1lQ29udGV4dC5yZXBvc2l0b3J5O1xyXG4gKiB9XHJcbiAqIGBgYFxyXG4gKiBcclxuICogPiBgRnJhbWVDb250ZXh0YOensOS4umBWaWV3TW9kZWxDb250ZXh0YOabtOWQiOmAgu+8jOWPr+S7peeQhuino+S4umBNVlZNYOaetuaehOS4rWBWTWDnmoTkuIrkuIvmlofjgIJcclxuICogXHJcbiAqIOaOp+WItuWZqOS4reS6puWtmOWcqGBWaWV3TW9kZWxg55qE5qaC5b+144CC5ZKMYE1WVk1g5p625p6E5Lit55qE55qEVk3kuIDoh7TvvIzmiYDku6XkuZ/lj6/ku6Xku45gVk1g6K6/6Zeu5bi455So55qE5bGe5oCn44CC5aaC77yaXHJcbiAqIFxyXG4gKiBgYGB0eXBlc2NyaXB0XHJcbiAqIGltcG9ydCB7QmluZGluZ0RhdGEsUmVwb3NpdG9yeSxWaWV3TW9kZWx9IGZyb20gJ0BmYXJyaXMvZGV2a2l0JztcclxuICogXHJcbiAqIGNvbnN0cnVjdG9yKHByaXZhdGUgdmlld01vZGVsOlZpZXdNb2RlbCl7fVxyXG4gKiBcclxuICogcHVibGljIG1ldGhvZCgpe1xyXG4gKiAgICAgY29uc3QgYmluZGluZ0RhdGE6IEJpbmRpbmdEYXRhID0gdGhpcy52aWV3TW9kZWwuYmluZGluZ0RhdGE7XHJcbiAqICAgICBjb25zdCByZXBvc2l0b3J5OiBSZXBvc2l0b3J5ID0gdGhpcy52aWV3TW9kZWwucmVwb3NpdG9yeTtcclxuICogfVxyXG4gKiBgYGBcclxuICogXHJcbiAqIFxyXG4gKiBcclxuICogIyMg5bi455So5pON5L2cXHJcbiAqIFxyXG4gKiAjIyMg6I635Y+W5b2T5YmN5LiK5LiL5paH5omA5bGe55qE57uE5Lu2XHJcbiAqIFxyXG4gKiBgYGB0eXBlc2NyaXB0XHJcbiAqIHRoaXMuZnJhbWVDb250ZXh0LmZyYW1lQ29tcG9uZW50O1xyXG4gKiBgYGBcclxuICogXHJcbiAqICMjIyDojrflj5blvZPliY3kuIrkuIvmlofnmoTmoLnkuIrkuIvmlodcclxuICogXHJcbiAqIGBgYHR5cGVzY3JpcHRcclxuICogdGhpcy5mcmFtZUNvbnRleHQucm9vdDtcclxuICogYGBgXHJcbiAqIFxyXG4gKiAjIyMg6I635Y+W5b2T5YmN5LiK5LiL5paH55qEYXBwQ29udGV4dFxyXG4gKiBcclxuICogYGBgdHlwZXNjcmlwdFxyXG4gKiB0aGlzLmZyYW1lQ29udGV4dC5hcHBDb250ZXh0O1xyXG4gKiBgYGBcclxuICogXHJcbiAqICMjIyDojrflj5bmjIflrppmcmFtZUlk55qE5LiK5LiL5paHXHJcbiAqIFxyXG4gKiBgYGB0eXBlc2NyaXB0XHJcbiAqIHRoaXMuZnJhbWVDb250ZXh0LmFwcENvbnRleHQuZnJhbWVDb250ZXh0TWFuYWdlci5nZXRGcmFtZUNvbnRleHRCeUlkKCdkYXRhLWdyaWQtY29tcG9uZW50Jyk7XHJcbiAqIGBgYFxyXG4gKiBcclxuICogIyMjIOiOt+WPluihqOWNleaJgOacieS4iuS4i+aWh1xyXG4gKiBcclxuICogYGBgdHlwZXNjcmlwdFxyXG4gKiB0aGlzLmZyYW1lQ29udGV4dC5hcHBDb250ZXh0LmZyYW1lQ29udGV4dE1hbmFnZXIuZ2V0RnJhbWVDb250ZXh0cygpO1xyXG4gKiBgYGBcclxuICogXHJcbiAqIFxyXG4gKiBcclxuICogIyMg5bi455So5bGe5oCnXHJcbiAqIFxyXG4gKiAjIyMgQmluZGluZ0RhdGEgXHJcbiAqIFxyXG4gKiBb5Y+C6ICDXShb5rWq5r2u5LyB5Lia5LqR5byA5pS+5bmz5Y+wIChpbnNwdXJvbmxpbmUuY29tKV0oaHR0cHM6Ly9vcGVuLmluc3B1cm9ubGluZS5jb20vaUdJWC8jL2RvY3VtZW50L21kZG9jL2lnaXgtMjEwMyUyRmZhcnJpcyUyRmRldmtpdCUyRmd1aWRlJTJG57uR5a6a5pWw5o2uLm1kKSlcclxuICogXHJcbiAqICMjIyBSZXBvc2l0b3J5XHJcbiAqIFxyXG4gKiBb5Y+C6ICDXShb5rWq5r2u5LyB5Lia5LqR5byA5pS+5bmz5Y+wIChpbnNwdXJvbmxpbmUuY29tKV0oaHR0cHM6Ly9vcGVuLmluc3B1cm9ubGluZS5jb20vaUdJWC8jL2RvY3VtZW50L21kZG9jL2lnaXgtMjEwMyUyRmZhcnJpcyUyRmRldmtpdCUyRmd1aWRlJTJG5LuT5bqTLm1kKSlcclxuICogXHJcbiAqICMjIyBWaWV3TW9kZWxcclxuICogXHJcbiAqIOaOp+WItuWZqOS4rVZpZXdNb2Rl5ZCMTVZWTeaetuaehOS4reeahFZN77yM5ZKMRnJhbWVDb250ZXh057G75Ly877yM5Y+v5Lul6YCa6L+HVmlld01vZGVs5ou/5YiwRnJhbWVDb250ZXh077yM5ZCM5qC355qE5Lmf5Y+v5Lul6YCa6L+HRnJhbWVDb250ZXh05ou/5YiwVmlld01vZGVs44CCXHJcbiAqIFxyXG4gKiAjIyMgbmFtZXNwYWNlXHJcbiAqIFxyXG4gKiDlkb3lkI3nqbrpl7TvvIzkuLvopoHlnKjnu4TlkIjooajljZXlnLrmma/nlKjliLDvvIzmr4/kuIDkuKrooajljZXpg73mnInoh6rlt7HnmoTlkb3lkI3nqbrpl7TvvIzooqvnu4TlkIjov5vmnaXnmoTooajljZXlhbblkb3lkI3nqbrpl7TmmK/nm7jlkIznmoTvvIzlpoJB6KGo5Y2V57uE5ZCI5LqGQuihqOWNle+8jOWImULooajljZXlhbfmnInnm7jlkIznmoTlkb3lkI3nqbrpl7TvvIzlkb3lkI3nqbrpl7TkuLvopoHnlKjkuo7ooajljZXpmpTnprvjgIJcclxuICogXHJcbiAqICMjIyByb290XHJcbiAqIFxyXG4gKiDojrflj5bmlbTkuKrooajljZXnmoTmoLnkuIrkuIvmlodcclxuICogXHJcbiAqICMjIyB1aVN0YXRlXHJcbiAqIFxyXG4gKiDojrflj5blvZPliY3nu4Tku7bnmoTlj5jph49cclxuICogXHJcbiAqICMjIyBmcmFtZUlkXHJcbiAqIFxyXG4gKiDkuIrkuIvmlofmoIfor4bjgIJcclxuICovXHJcbkBJbmplY3RhYmxlKClcclxuZXhwb3J0IGNsYXNzIEZyYW1lQ29udGV4dCBleHRlbmRzIENvbnRleHQgaW1wbGVtZW50cyBJRGlzcG9zYWJsZSwgT25EZXN0cm95IHtcclxuXHJcbiAgcHVibGljIHR5cGVOYW1lID0gJ0ZyYW1lQ29udGV4dCc7XHJcblxyXG4gIHByb3RlY3RlZCBpc0Rlc3RvcmllZCA9IGZhbHNlO1xyXG4gIHB1YmxpYyBpc0Rpc3Bvc2VkID0gZmFsc2U7XHJcbiAgLyoqXHJcbiAgICogaWRcclxuICAgKi9cclxuICBwdWJsaWMgZnJhbWVJZDogc3RyaW5nO1xyXG5cclxuICAvKipcclxuICAgKiDms6jlhaXlmahcclxuICAgKi9cclxuICAvLyBwdWJsaWMgaW5qZWN0b3I6IEluamVjdG9yO1xyXG5cclxuICAvKipcclxuICAgKiDlupTnlKjkuIrkuIvmlodcclxuICAgKi9cclxuICBwdWJsaWMgYXBwQ29udGV4dDogQXBwQ29udGV4dDtcclxuXHJcbiAgLyoqXHJcbiAgICog5qC557uE5Lu25LiK5LiL5paHXHJcbiAgICovXHJcbiAgcHVibGljIHJvb3Q6IEZyYW1lQ29udGV4dDtcclxuXHJcbiAgLyoqXHJcbiAgICog54i2Vmlld01vZGVsXHJcbiAgICovXHJcbiAgcHVibGljIHBhcmVudDogRnJhbWVDb250ZXh0O1xyXG5cclxuICAvKipcclxuICAgKiDlkI7ku6PoioLngrlcclxuICAgKi9cclxuICBwdWJsaWMgY2hpbGRyZW46IE1hcDxzdHJpbmcsIEZyYW1lQ29udGV4dD47XHJcblxyXG4gIC8qKlxyXG4gICAqIOWunuS9k+S7k+W6k1xyXG4gICAqL1xyXG4gIHB1YmxpYyByZXBvc2l0b3J5OiBSZXBvc2l0b3J5PEVudGl0eT47XHJcblxyXG4gIC8qKlxyXG4gICAqIOWRveS7pOaAu+e6v1xyXG4gICAqL1xyXG4gIHB1YmxpYyBjb21tYW5kQnVzOiBDb21tYW5kQnVzO1xyXG5cclxuICAvKipcclxuICAgKiDkuovku7bmgLvnur9cclxuICAgKi9cclxuICBwdWJsaWMgZXZlbnRCdXM6IEV2ZW50QnVzO1xyXG5cclxuICAvKipcclxuICAgKiDop4blm77mqKHlnotcclxuICAgKi9cclxuICBwdWJsaWMgdmlld01vZGVsOiBWaWV3TW9kZWw7XHJcblxyXG4gIC8qKlxyXG4gICAqIOaVsOaNrue7keWumlxyXG4gICAqL1xyXG4gIHB1YmxpYyBiaW5kaW5nRGF0YTogQmluZGluZ0RhdGE7XHJcblxyXG4gIC8qKlxyXG4gICAqIFVJ54q25oCBXHJcbiAgICovXHJcbiAgcHVibGljIHVpU3RhdGU6IFVJU3RhdGU7XHJcblxyXG4gIC8qKlxyXG4gICAqIOeKtuaAgeaculxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0ZU1hY2hpbmU6IFN0YXRlTWFjaGluZTtcclxuXHJcbiAgLyoqXHJcbiAgICog6KGo5Y2VXHJcbiAgICovXHJcbiAgcHVibGljIGZvcm06IEZvcm07XHJcblxyXG4gIC8qKlxyXG4gICAqIOaJgOWxnue7hOS7tlxyXG4gICAqL1xyXG4gIHB1YmxpYyBmcmFtZUNvbXBvbmVudDogRnJhbWVDb21wb25lbnQ7XHJcblxyXG4gIC8qKlxyXG4gICAqIOW8guW4uOWkhOeQhlxyXG4gICAqL1xyXG4gIHB1YmxpYyBleGNlcHRpb25IYW5kbGVyOiBJRXhjZXB0aW9uSGFuZGxlcjtcclxuXHJcbiAgLyoqXHJcbiAgICog6KGo5Y2V5ZG95ZCN56m66Ze0XHJcbiAgICovXHJcbiAgcHVibGljIG5hbWVzcGFjZTogc3RyaW5nO1xyXG5cclxuICBwdWJsaWMgdmFyaWFibGVQYXJzZVNlcnZpY2U6IFZhcmlhYmxlUGFyc2VTZXJ2aWNlO1xyXG5cclxuICBwdWJsaWMgbWV0YWRhdGE6IElDb250ZXh0TWV0YWRhdGEgPSB7XHJcbiAgICBpZGVudGlmeTogJycsXHJcbiAgICBuYW1lc3BhY2U6ICcnLFxyXG4gICAgY29tbWFuZHM6IG51bGwsXHJcbiAgICBmb3JtOiBudWxsLFxyXG4gICAgZm9ybUNvbnRyb2xzOiBudWxsLFxyXG4gICAgc3ViRm9ybXM6IG51bGwsXHJcbiAgICBzdGF0ZU1hY2hpbmU6IG51bGwsXHJcbiAgICB1aVN0YXRlczogbnVsbCxcclxuICAgIGJpbmRpbmdUbzogJydcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiDmmoLlgZzkuovku7bmipvlh7pcclxuICAgKi9cclxuICBwdWJsaWMgc3VzcGVuZDogYm9vbGVhbjtcclxuICBwdWJsaWMgZXhwcmVzc2lvbkVuZ2luZUltcGw6IEV4cHJlc3Npb25FbmdpbmVJbXBsO1xyXG4gIHB1YmxpYyBleHByZXNzaW9uTWFuYWdlcjogRXhwcmVzc2lvbk1hbmFnZXI7XHJcbiAgcHVibGljIGV4cHJlc3Npb25SZXN1bHQ6IEV4cHJlc3Npb25SZXN1bHQ7XHJcbiAgLyoqXHJcbiAgICog57Si5byVKOS7jjDlvIDlp4spXHJcbiAgICovXHJcbiAgcHVibGljIGluZGV4OiBudW1iZXI7XHJcbiAgLyoqXHJcbiAgICog5aSa6K+tXHJcbiAgICovXHJcbiAgcHVibGljIHRyYW5zbGF0ZTogVHJhbnNsYXRlO1xyXG4gIC8qKlxyXG4gICAqIOS4iuS4i+aWh+mUgOavgea1gVxyXG4gICAqL1xyXG4gIHB1YmxpYyBkZXN0b3J5U2lnbmFsOiBTdWJqZWN0PGFueT47XHJcbiAgLyoqXHJcbiAgICog57uE5Lu25byV55So566h55CGXHJcbiAgICovXHJcbiAgcHVibGljIGNvbXBvbmVudFJlZk1hbmFnZXI6IENvbXBvbmVudFJlZk1hbmFnZXIgPSBuZXcgQ29tcG9uZW50UmVmTWFuYWdlcigpO1xyXG4gIC8qKlxyXG4gICAqIOaehOmAoOWHveaVsFxyXG4gICAqIEBwYXJhbSBpbmplY3RvciDms6jlhaXlmahcclxuICAgKi9cclxuICBjb25zdHJ1Y3RvcihwdWJsaWMgaW5qZWN0b3I6IEluamVjdG9yLCBAT3B0aW9uYWwoKSBAU2tpcFNlbGYoKSBwYXJlbnQ6IEZyYW1lQ29udGV4dCkge1xyXG4gICAgc3VwZXIoKTtcclxuICAgIC8vIOWcqOino+aekOaooeW8j+S4i++8jOmAmui/h+S+nei1luazqOWFpeiOt+WPluS4jeWIsEFwcENvbnRleHTml7bvvIzov5Tlm55udWxs77yM5Zyo5a2Q57G75Lit6L+b6KGM6LWL5YC844CCXHJcbiAgICB0aGlzLmFwcENvbnRleHQgPSBpbmplY3Rvci5nZXQoQXBwQ29udGV4dCk7XHJcbiAgICB0aGlzLmRlc3RvcnlTaWduYWwgPSBuZXcgU3ViamVjdDxhbnk+KCk7XHJcbiAgICAvLyDnoa7lrprniLblrZDlhbPns7tcclxuICAgIC8vIOW/hemhu+WvuWFwcENvbnRleHTov5vooYzliKTmlq3vvIzljp/lm6DlpoLkuIvvvJpcclxuICAgIC8vIDHjgIHlkKbliJnkvJrlr7zoh7TliqjmgIHot6/nlLHooajljZXkuK3vvIzooqvot6/nlLHnmoTooajljZXnmoRSb290RnJhbWVDb250ZXh05Y+Y5oiQ5Li76KGo5Y2V55qEUm9vdEZyYW1lQ29udGV4dO+8m1xyXG4gICAgLy8gMuOAgei/m+iAjOWvvOiHtOS7jlJvb3RGcmFtZUNvbnRleHTkuIrmi79WT+WPmOmHj+aLv+S4jeWIsOOAglxyXG4gICAgaWYgKCFwYXJlbnQgfHwgcGFyZW50LmFwcENvbnRleHQgIT09IHRoaXMuYXBwQ29udGV4dCkgeyAvLyDlj5bmtoggYXBwQ29udGV4dCDnmoTliKTmlq1cclxuICAgICAgdGhpcy5wYXJlbnQgPSBudWxsO1xyXG4gICAgICB0aGlzLnJvb3QgPSB0aGlzO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XHJcbiAgICAgIHRoaXMucm9vdCA9IHBhcmVudC5yb290O1xyXG4gICAgfVxyXG4gICAgdGhpcy5mcmFtZUlkID0gaW5qZWN0b3IuZ2V0PHN0cmluZz4oRlJBTUVfSUQpO1xyXG4gICAgaWYgKHRoaXMuYXBwQ29udGV4dC5jb250ZXh0TWV0YWRhdGFNYW5hZ2VyLmV4c2l0KHRoaXMuZnJhbWVJZCkpIHtcclxuICAgICAgdGhpcy5tZXRhZGF0YSA9IHRoaXMuYXBwQ29udGV4dC5jb250ZXh0TWV0YWRhdGFNYW5hZ2VyLmdldENvbnRleHRNZXRhZGF0YUJ5TmFtZSh0aGlzLmZyYW1lSWQpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5uYW1lc3BhY2UgPSBpbmplY3Rvci5nZXQoTkFNRVNQQUNFLCBudWxsKTtcclxuICAgIHRoaXMuYmluZGluZ0RhdGEgPSB0aGlzLmluamVjdG9yLmdldDxCaW5kaW5nRGF0YT4oQmluZGluZ0RhdGEsIG5ldyBCaW5kaW5nRGF0YSgpKTtcclxuICAgIGlmICghdGhpcy5hcHBDb250ZXh0LnVzZUlzb2x1dGVFdmVudEJ1cyB8fCAodGhpcy5hcHBDb250ZXh0LnVzZUlzb2x1dGVFdmVudEJ1cyAmJiAhdGhpcy5hcHBDb250ZXh0Lmlzb2x1dGVFdmVudEJ1cykpIHtcclxuICAgICAgdGhpcy5ldmVudEJ1cyA9IHRoaXMuaW5qZWN0b3IuZ2V0KEV2ZW50QnVzLCBudWxsLCBJbmplY3RGbGFncy5PcHRpb25hbCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmV2ZW50QnVzID0gdGhpcy5hcHBDb250ZXh0Lmlzb2x1dGVFdmVudEJ1cztcclxuICAgIH1cclxuICAgIHRoaXMuZm9ybSA9IHRoaXMuaW5qZWN0b3IuZ2V0PEZvcm0+KEZvcm0sIG5ldyBGb3JtKCkpO1xyXG4gICAgdGhpcy5yZXBvc2l0b3J5ID0gdGhpcy5pbmplY3Rvci5nZXQoUmVwb3NpdG9yeSwgdGhpcy5hcHBDb250ZXh0LnJlcG9zaXRvcnkpO1xyXG4gICAgdGhpcy51aVN0YXRlID0gdGhpcy5pbmplY3Rvci5nZXQ8VUlTdGF0ZT4oVUlTdGF0ZSwgbmV3IFVJU3RhdGUoKSk7XHJcbiAgICBjb25zdCBkZWZhdWx0Vmlld01vZGVsID0gbmV3IFZpZXdNb2RlbCgpO1xyXG4gICAgZGVmYXVsdFZpZXdNb2RlbC5zZXRNZXRhZGF0YSh0aGlzLm1ldGFkYXRhKTtcclxuICAgIHRoaXMudmlld01vZGVsID0gdGhpcy5pbmplY3Rvci5nZXQ8Vmlld01vZGVsPihWaWV3TW9kZWwsIGRlZmF1bHRWaWV3TW9kZWwpO1xyXG4gICAgdGhpcy52YXJpYWJsZVBhcnNlU2VydmljZSA9IGluamVjdG9yLmdldDxWYXJpYWJsZVBhcnNlU2VydmljZT4oVmFyaWFibGVQYXJzZVNlcnZpY2UsIG5ldyBWYXJpYWJsZVBhcnNlU2VydmljZShbXHJcbiAgICAgIG5ldyBGcmFtZUlkVmFyaWFibGVQYXJzZXIoKSxcclxuICAgICAgbmV3IERhdGFWYXJpYWJsZVBhcnNlcigpLFxyXG4gICAgICBuZXcgVUlTdGF0ZVZhcmlhYmxlUGFyc2VyKCksXHJcbiAgICAgIG5ldyBTdGF0ZU1hY2hpbmVWYXJpYWJsZVBhcnNlcigpLFxyXG4gICAgICBuZXcgQ29tbWFuZFZhcmlhYmxlUGFyc2VyKClcclxuICAgIF0pKTtcclxuICAgIC8vIOazqOWFpWV4Y2VwdGlvbkhhbmRsZXJcclxuICAgIHRoaXMuZXhjZXB0aW9uSGFuZGxlciA9IGluamVjdG9yLmdldDxJRXhjZXB0aW9uSGFuZGxlcj4oRVhDRVBUSU9OX0hBTkRMRVIsIG51bGwsIEluamVjdEZsYWdzLk9wdGlvbmFsKTtcclxuICAgIC8vIOWIneWni+WMluWkmuivreacjeWKoVxyXG4gICAgY29uc3QgdHJhbnNsYXRlID0gaW5qZWN0b3IuZ2V0PFRyYW5zbGF0ZT4oVHJhbnNsYXRlVG9rZW4sIG51bGwpO1xyXG4gICAgdGhpcy50cmFuc2xhdGUgPSB0cmFuc2xhdGU7XHJcbiAgICBUcmFuc2xhdGVTZXJ2aWNlLnNldFRyYW5zbGF0ZSh0cmFuc2xhdGUpO1xyXG4gICAgLy8g5Yid5aeL5YyW55So5oi36YWN572uXHJcbiAgICBjb25zdCB1c2VyU2V0dGluZ3MgPSBpbmplY3Rvci5nZXQ8VXNlclNldHRpbmdzPihVc2VyU2V0dGluZ3NUb2tlbiwgbnVsbCk7XHJcbiAgICBVc2VyU2V0dGluZ3NTZXJ2aWNlLnNldFVzZXJTZXR0aW5ncyh1c2VyU2V0dGluZ3MpO1xyXG4gICAgdGhpcy5pbml0aWFsaXplUmVwb3NpdG9yeSgpO1xyXG4gICAgdGhpcy5hcHBDb250ZXh0LnJlZ0ZyYW1lQ29udGV4dCh0aGlzKTtcclxuICAgIHRoaXMucmVnaXN0ZXJBcHBDb250ZXh0RGVzdHJveUV2ZW50KCk7XHJcbiAgfVxyXG4gIGRpc3Bvc2Uob3B0aW9ucz86IGFueSk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuaXNEaXNwb3NlZCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLmlzRGVzdG9yaWVkID0gdHJ1ZTtcclxuICAgIHRoaXMuaXNEaXNwb3NlZCA9IHRydWU7XHJcbiAgICBpZiAodGhpcy5kZXN0b3J5U2lnbmFsKSB7XHJcbiAgICAgIHRoaXMuZGVzdG9yeVNpZ25hbC5uZXh0KCk7XHJcbiAgICAgIHRoaXMuZGVzdG9yeVNpZ25hbC5jb21wbGV0ZSgpO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuYXBwQ29udGV4dCkge1xyXG4gICAgICB0aGlzLmFwcENvbnRleHQuZnJhbWVDb250ZXh0TWFuYWdlci51bnJlZ0ZyYW1lQ29udGV4dCh0aGlzKTtcclxuICAgICAgdGhpcy5hcHBDb250ZXh0LmZyYW1lQ29tcG9uZW50UmVmcmVzaGVyLnVucmVnRnJhbWVDb250ZXh0KHRoaXMpO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuYXBwQ29udGV4dCAmJiB0aGlzLmlzUm9vdEZyYW1lQ29udGV4dCgpID09PSB0cnVlKSB7XHJcbiAgICAgIGNvbnN0IHZpZXdNb2RlbE5hbWVzID0gdGhpc1sndmlld01vZGVsTmFtZXMnXTtcclxuICAgICAgaWYgKHZpZXdNb2RlbE5hbWVzICYmIEFycmF5LmlzQXJyYXkodmlld01vZGVsTmFtZXMpKSB7XHJcbiAgICAgICAgdmlld01vZGVsTmFtZXMuZm9yRWFjaChuYW1lID0+IHtcclxuICAgICAgICAgIHRoaXNbbmFtZV0gPSBudWxsO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuYXBwQ29udGV4dC51bnJlZ2lzdGVyRnJvbU1hbmFnZXIoKTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmJpbmRpbmdEYXRhKSB7XHJcbiAgICAgIHRoaXMuYmluZGluZ0RhdGEuZGlzcG9zZSgpO1xyXG4gICAgICAvLyB0aGlzLmJpbmRpbmdEYXRhID0gbnVsbDtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLnZpZXdNb2RlbCkge1xyXG4gICAgICB0aGlzLnZpZXdNb2RlbC5kaXNwb3NlKCk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5mb3JtKSB7XHJcbiAgICAgIHRoaXMuZm9ybS5kaXNwb3NlKCk7XHJcbiAgICAgIHRoaXMuZm9ybSA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5jb21tYW5kQnVzKSB7XHJcbiAgICAgIHRoaXMuY29tbWFuZEJ1cy5kaXNwb3NlKCk7XHJcbiAgICAgIHRoaXMuY29tbWFuZEJ1cyA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBUcmFuc2xhdGVTZXJ2aWNlLmRpc3Bvc2UoKTtcclxuICAgIC8vIHRoaXMucm9vdCA9IG51bGw7XHJcbiAgICAvLyB0aGlzLnBhcmVudCA9IG51bGw7XHJcbiAgICAvLyB0aGlzLnVpU3RhdGUgPSBudWxsO1xyXG4gICAgdGhpcy5mcmFtZUNvbXBvbmVudCA9IG51bGw7XHJcbiAgICB0aGlzLnJlcG9zaXRvcnkgPSBudWxsO1xyXG4gICAgLy8gdGhpcy5zdGF0ZU1hY2hpbmUgPSBudWxsO1xyXG4gICAgLy8gdGhpcy5hcHBDb250ZXh0ID0gbnVsbDtcclxuICAgIHRoaXMuZXhjZXB0aW9uSGFuZGxlciA9IG51bGw7XHJcbiAgICB0aGlzLmV4cHJlc3Npb25NYW5hZ2VyID0gbnVsbDtcclxuICAgIHRoaXMuZXhwcmVzc2lvbkVuZ2luZUltcGwgPSBudWxsO1xyXG4gICAgdGhpcy52YXJpYWJsZVBhcnNlU2VydmljZSA9IG51bGw7XHJcbiAgICB0aGlzLmV2ZW50QnVzID0gbnVsbDtcclxuICAgIHRoaXMudHJhbnNsYXRlID0gbnVsbDtcclxuICAgIHRoaXMuaW5qZWN0b3IgPSBudWxsO1xyXG4gICAgdGhpcy5leHByZXNzaW9uUmVzdWx0ID0gbnVsbDtcclxuICAgIFVzZXJTZXR0aW5nc1NlcnZpY2Uuc2V0VXNlclNldHRpbmdzKG51bGwpO1xyXG4gIH1cclxuICBuZ09uRGVzdHJveSgpOiB2b2lkIHtcclxuICAgIHRoaXMuZGlzcG9zZSgpO1xyXG4gIH1cclxuICAvKipcclxuICAgKiDpgJrov4fnu4Tku7bmoIfor4bojrflj5blr7nlupTnmoTnu4Tku7blrp7kvotcclxuICAgKiBAcGFyYW0gaWQg57uE5Lu25qCH6K+GXHJcbiAgICogQHJldHVybnMgXHJcbiAgICovXHJcbiAgcHVibGljIGdldENvbXBvbmVudEJ5SWQ8VD4oaWQ6IHN0cmluZyk6IFQge1xyXG4gICAgY29uc3QgY29tcG9uZW50cyA9IHRoaXMuY29tcG9uZW50UmVmTWFuYWdlci5nZXQoaWQpO1xyXG4gICAgaWYgKGNvbXBvbmVudHMgJiYgY29tcG9uZW50cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGNvbnN0IGNvbXBvbmVudCA9IGNvbXBvbmVudHNbMF0gYXMgVDtcclxuICAgICAgcmV0dXJuIGNvbXBvbmVudDtcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuICAvKipcclxuICAgKiDojrflj5bmjIflrprmoIfor4bnmoTmiYDmnInnu4Tku7ZcclxuICAgKiBAcGFyYW0gaWQg57uE5Lu25qCH6K+GXHJcbiAgICovXHJcbiAgcHVibGljIGdldENvbXBvbmVudHNCeUlkPFQ+KGlkOiBzdHJpbmcpOiBUW10ge1xyXG4gICAgcmV0dXJuIHRoaXMuY29tcG9uZW50UmVmTWFuYWdlci5nZXQoaWQpIGFzIFRbXTtcclxuICB9XHJcbiAgYmluZEluamVjdG9yKGNvbXBvbmVudEluamVjdG9yOiBJbmplY3Rvcikge1xyXG4gICAgdGhpcy5pbmplY3RvciA9IGNvbXBvbmVudEluamVjdG9yO1xyXG4gIH1cclxuXHJcbiAgLy8gI3JlZ2lvbiDliJ3lp4vljJZcclxuXHJcbiAgLyoqXHJcbiAgICog5Yid5aeL5YyWXHJcbiAgICogQHRvZG86XHJcbiAgICogMeOAgUNvbW1hbmRIYW5kbGVy5Lit55qE5pyN5Yqh5Y+v6IO95Lya5rOo5YWlQ29udGV4dO+8jOaJgOS7pUNvbW1hbmRIYW5kbGVy5Yib5bu65pe25b+F6aG75bey57uP5a2Y5ZyoQ29tcG9uZW50Q29udGV4dFxyXG4gICAqIDLjgIFWaWV3TW9kZWznmoRidWlsZENvbW1hbmRz5Lit5Lya5L2/55SoQ29tbWFuZEJ1c++8jOS4uuS6huS/neivgemhuuW6j++8jOWwhlZpZXdNb2RlbOeahOWIm+W7uuS5n+aUvuWcqGluaXTkuK3jgIJcclxuICAgKi9cclxuICBwdWJsaWMgaW5pdChmcmFtZUNvbXBvbmVudDogRnJhbWVDb21wb25lbnQpIHtcclxuICAgIHRoaXMuZnJhbWVDb21wb25lbnQgPSBmcmFtZUNvbXBvbmVudDtcclxuICAgIHRoaXMuaW5pdGlhbGl6ZUJpbmRpbmdEYXRhKCk7XHJcbiAgICB0aGlzLmluaXRpYWxpemVTdGF0ZU1hY2hpbmUoKTtcclxuICAgIHRoaXMuaW5pdGlhbGl6ZVVpU3RhdGUoKTtcclxuICAgIHRoaXMuaW5pdGlhbGl6ZUZvcm0oKTtcclxuICAgIHRoaXMuaW5pdGlhbGl6ZUNvbW1hbmRCdXMoKTtcclxuICAgIHRoaXMuaW5pdGlhbGl6ZVZpZXdNb2RlbCgpO1xyXG4gICAgdGhpcy5yZWdpc3RlckV4Y2VwdGlvbkhhbmRsZXIoKTtcclxuICAgIHRoaXMuaW5pdEV4cHJlc3Npb24oKTtcclxuICAgIHRoaXMuYXBwQ29udGV4dC5mcmFtZUNvbXBvbmVudFJlZnJlc2hlci5yZWdGcmFtZUNvbXBvbmVudCh0aGlzLmZyYW1lSWQsIHRoaXMuZnJhbWVDb21wb25lbnQpO1xyXG4gIH1cclxuICBwdWJsaWMgaW5pdEV4cHJlc3Npb24oKSB7XHJcbiAgICB0aGlzLmV4cHJlc3Npb25FbmdpbmVJbXBsID0gdGhpcy5pbmplY3Rvci5nZXQ8RXhwcmVzc2lvbkVuZ2luZUltcGw+KEV4cHJlc3Npb25FbmdpbmVJbXBsLCBudWxsKTtcclxuICAgIHRoaXMuZXhwcmVzc2lvbk1hbmFnZXIgPSB0aGlzLmluamVjdG9yLmdldDxFeHByZXNzaW9uTWFuYWdlcj4oRXhwcmVzc2lvbk1hbmFnZXIsIG51bGwpO1xyXG4gICAgY29uc3QgZXhwcmVzc2lvblJlc3VsdEZhY3RvcnkgPSB0aGlzLmluamVjdG9yLmdldDxFeHByZXNzaW9uUmVzdWx0RmFjdG9yeT4oRXhwcmVzc2lvblJlc3VsdEZhY3RvcnksIG51bGwpO1xyXG4gICAgdGhpcy5leHByZXNzaW9uUmVzdWx0ID0gdGhpcy5pbmplY3Rvci5nZXQ8RXhwcmVzc2lvblJlc3VsdD4oRXhwcmVzc2lvblJlc3VsdCwgbnVsbCk7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIOiuoumYheW8guW4uOa2iOaBr1xyXG4gICAqL1xyXG4gIHByb3RlY3RlZCByZWdpc3RlckV4Y2VwdGlvbkhhbmRsZXIoKSB7XHJcbiAgICAvLyB0c2xpbnQ6ZGlzYWJsZTogbm8tc3RyaW5nLWxpdGVyYWxcclxuICAgIGNvbnN0IGZvcm1BcHBDb250ZXh0ID0gdGhpcy5nZXRGb3JtQXBwQ29udGV4dCgpO1xyXG4gICAgY29uc3QgYXBwbGljYXRpb25JZCA9IGZvcm1BcHBDb250ZXh0LkFwcGxpY2F0aW9uSWQ7XHJcbiAgICB3aW5kb3dbd2luZG93LmxvY2F0aW9uLmhyZWZdID0gYXBwbGljYXRpb25JZDtcclxuICAgIGlmICh0aGlzLmV4Y2VwdGlvbkhhbmRsZXIgIT09IG51bGwpIHtcclxuICAgICAgY29uc3QgYXBwbGljYXRpb25Db250ZXh0ID0gd2luZG93W2FwcGxpY2F0aW9uSWRdID0gd2luZG93W2FwcGxpY2F0aW9uSWRdIHx8IHt9O1xyXG4gICAgICBpZiAodGhpcy5ldmVudEJ1cyAhPT0gbnVsbCAmJiB0aGlzLmlzUm9vdEZyYW1lQ29udGV4dCgpKSB7XHJcbiAgICAgICAgYXBwbGljYXRpb25Db250ZXh0LmlzRXhjZXB0aW9uSGFuZGxlckV4aXN0ID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmV4Y2VwdGlvbkhhbmRsZXIuc2V0Q29udGV4dCh0aGlzLmFwcENvbnRleHQpO1xyXG4gICAgICAgIHRoaXMuZXZlbnRCdXMub24oJ0V4Y2VwdGlvbicsICcnLCAnb25FeGNlcHRpb24nLCBmb3JtQXBwQ29udGV4dCwgKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICBpZiAodGhpcy5pc0Rlc3RvcmllZCA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAoZXJyb3IgJiYgZXJyb3IuZXJyb3IpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICBlcnJvci5lcnJvci5fX2ZyYW1lX2NvbnRleHRfXyA9IHRoaXM7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggeyB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB0aGlzLmV4Y2VwdGlvbkhhbmRsZXIuaGFuZGxlKGVycm9yKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLmRlc3RvcnlTaWduYWwuc3Vic2NyaWJlKCgpID0+IHtcclxuICAgICAgICB0aGlzLmV2ZW50QnVzLm9mZignRXhjZXB0aW9uJywgJycsICdvbkV4Y2VwdGlvbicsIGZvcm1BcHBDb250ZXh0KTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHByb3RlY3RlZCByZWdpc3RlckFwcENvbnRleHREZXN0cm95RXZlbnQoKSB7XHJcbiAgICBpZiAodGhpcy5hcHBDb250ZXh0ICYmIHRoaXMuYXBwQ29udGV4dC5kZXN0b3J5U2lnbmFsKSB7XHJcbiAgICAgIHRoaXMuYXBwQ29udGV4dC5kZXN0b3J5U2lnbmFsLnN1YnNjcmliZSgoKSA9PiB7XHJcbiAgICAgICAgaWYgKHRoaXMuc3RhdGVNYWNoaW5lKSB7XHJcbiAgICAgICAgICB0aGlzLnN0YXRlTWFjaGluZS5kaXNwb3NlKCk7XHJcbiAgICAgICAgICB0aGlzLnN0YXRlTWFjaGluZSA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnJlcG9zaXRvcnkpIHtcclxuICAgICAgICAgIHRoaXMucmVwb3NpdG9yeS5kaXNwb3NlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICog6I635Y+W6KGo5Y2VYXBwY29udGV4dO+8jOWNs+acgOS4iuWxgmFwcGNvbnRleHRcclxuICAgKi9cclxuICBwdWJsaWMgZ2V0Rm9ybUFwcENvbnRleHQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5hcHBDb250ZXh0O1xyXG4gIH1cclxuICAvKipcclxuICAgKiDojrflj5ZmcmFtZUlkXHJcbiAgICogQGRlc2NyaXB0aW9uIOiOt+WPluWujOaVtOeahEZyYW1lSWTvvIzlnKjpnZ7mma7pgJrooajljZXkuK3or6XlgLznrYnkuo5mcmFtZUlk77yM5Zyo57uE5ZCI6KGo5Y2V5Lit6K+l5YC85Li6bmFtZXNwYWNlX2ZyYW1lSWRcclxuICAgKi9cclxuICBwdWJsaWMgZ2V0RnJhbWVJZChyZWxhdGl2ZUZyYW1lSWQ6IHN0cmluZykge1xyXG4gICAgaWYgKCFyZWxhdGl2ZUZyYW1lSWQpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuZnJhbWVJZDtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLm5hbWVzcGFjZSAmJiB0aGlzLm5hbWVzcGFjZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHJldHVybiBgJHt0aGlzLm5hbWVzcGFjZX1fJHtyZWxhdGl2ZUZyYW1lSWR9YDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiByZWxhdGl2ZUZyYW1lSWQ7XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIOWIneWni+WMllJlcG9zaXRvcnlcclxuICAgKi9cclxuICBwcml2YXRlIGluaXRpYWxpemVSZXBvc2l0b3J5KCkge1xyXG5cclxuICAgIHRoaXMucmVwb3NpdG9yeS5zZXRQYWdpbmF0aW9uQ29uZmlnKHRoaXMucmVwb3NpdG9yeS5wYWdpbmF0aW9uSW5mbyk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGluaXRpYWxpemVGb3JtKCkge1xyXG4gICAgLy8g6K6+572uRm9ybeivreiogOacjeWKoVxyXG4gICAgLy8gdGhpcy5mb3JtLnNldFRyYW5zbGF0ZVNlcnZpY2UodHJhbnNsYXRlU2VydmljZSk7XHJcbiAgICAvLyDliJ3lp4vljJZGb3Jt77yM5o+Q5Y+WRm9ybUNvbnRyb2zlrprkuYnvvIzmt7vliqBGb3JtQ29udHJvbFxyXG4gICAgLy8gdGhpcy5mb3JtLmluaXQodGhpcy5iaW5kaW5nRGF0YSwgdGhpcy5tZXRhZGF0YS5iaW5kaW5nVG8sIHRoaXMpO1xyXG4gICAgLy8gRm9ybVxyXG4gICAgdGhpcy5mb3JtID0gdGhpcy5pbmplY3Rvci5nZXQ8Rm9ybT4oRm9ybSwgbnVsbCk7XHJcbiAgICBpZiAodGhpcy5mb3JtKSB7XHJcbiAgICAgIC8vIOiuvue9rkZvcm3or63oqIDmnI3liqFcclxuICAgICAgdGhpcy5mb3JtLnNldFRyYW5zbGF0ZVNlcnZpY2UodGhpcy5pbmplY3Rvci5nZXQoVHJhbnNsYXRlVG9rZW4sIG51bGwpKTtcclxuICAgICAgLy8g5Yid5aeL5YyWRm9ybe+8jOaPkOWPlkZvcm1Db250cm9s5a6a5LmJ77yM5re75YqgRm9ybUNvbnRyb2xcclxuICAgICAgY29uc3QgYmluZGluZ1BhdGggPSB0aGlzLnZpZXdNb2RlbC5iaW5kaW5nUGF0aCB8fCB0aGlzLm1ldGFkYXRhLmJpbmRpbmdUbztcclxuICAgICAgdGhpcy5mb3JtLmluaXQodGhpcy5iaW5kaW5nRGF0YSwgYmluZGluZ1BhdGgsIHRoaXMpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBpbml0aWFsaXplU3RhdGVNYWNoaW5lKCkge1xyXG4gICAgLy8gU3RhdGVNYWNoaW5lIOeKtuaAgeacuumcgOimgeWcqOe7keWumuaVsOaNruS5i+WQjuWKoOi9vVxyXG4gICAgdGhpcy5zdGF0ZU1hY2hpbmUgPSB0aGlzLmluamVjdG9yLmdldDxTdGF0ZU1hY2hpbmU+KFN0YXRlTWFjaGluZSwgbnVsbCk7XHJcbiAgICBpZiAodGhpcy5zdGF0ZU1hY2hpbmUpIHtcclxuICAgICAgdGhpcy5zdGF0ZU1hY2hpbmUuaW5pdGlhbGl6ZSh0aGlzLCB0aGlzLnZhcmlhYmxlUGFyc2VTZXJ2aWNlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgaW5pdGlhbGl6ZUNvbW1hbmRCdXMoKSB7XHJcbiAgICBjb25zdCBoYW5kbGVyUmVnaXN0cnkgPSB0aGlzLmluamVjdG9yLmdldDxDb21tYW5kSGFuZGxlclJlZ2lzdHJ5PihDb21tYW5kSGFuZGxlclJlZ2lzdHJ5LFxyXG4gICAgICBuZXcgQ29tbWFuZEhhbmRsZXJSZWdpc3RyeSh0aGlzLm1ldGFkYXRhLmNvbW1hbmRIYW5kbGVycykpO1xyXG4gICAgY29uc3QgZXh0ZW5kc1JlZ2lzdHJ5ID0gdGhpcy5pbmplY3Rvci5nZXQ8Q29tbWFuZEhhbmRsZXJFeHRlbmRlclJlZ2lzdHJ5PihDb21tYW5kSGFuZGxlckV4dGVuZGVyUmVnaXN0cnksXHJcbiAgICAgIG5ldyBDb21tYW5kSGFuZGxlckV4dGVuZGVyUmVnaXN0cnkodGhpcy5tZXRhZGF0YS5jb21tYW5kSGFuZGxlckV4dGVuZHMpKTtcclxuICAgIGNvbnN0IGNvbW1hbmRIYW5kbGVyRmFjdG9yeSA9IG5ldyBDb21tYW5kSGFuZGxlckZhY3RvcnkoaGFuZGxlclJlZ2lzdHJ5LCBleHRlbmRzUmVnaXN0cnksIHRoaXMsIHRoaXMudmFyaWFibGVQYXJzZVNlcnZpY2UpO1xyXG4gICAgdGhpcy5jb21tYW5kQnVzID0gbmV3IENvbW1hbmRCdXMoY29tbWFuZEhhbmRsZXJGYWN0b3J5KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWIneWni+WMllZpZXdNb2RlbFxyXG4gICAqIEB0b2RvXHJcbiAgICogMeOAgemcgOimgeaMieeFp+S4gOWumueahOmhuuW6j+i/m+ihjOWIneWni+WMlu+8jOWQpuWImeS+nei1luaXoOazleato+ehruWkhOeQhu+8m1xyXG4gICAqIDLjgIHmmoLml7bkvb/nlKhpbml06Kej5YazQ29udGV4dOWSjOWFtuS7lumDqOWIhueahOW+queOr+S+nei1lumXrumimO+8jOW+heS8mOWMlu+8m1xyXG4gICAqL1xyXG4gIHByaXZhdGUgaW5pdGlhbGl6ZVZpZXdNb2RlbCgpIHtcclxuICAgIGlmICghdGhpcy5tZXRhZGF0YS5iaW5kaW5nVG8pIHtcclxuICAgICAgdGhpcy5tZXRhZGF0YS5iaW5kaW5nVG8gPSB0aGlzLnZpZXdNb2RlbC5iaW5kaW5nUGF0aDtcclxuICAgIH1cclxuICAgIHRoaXMudmlld01vZGVsLmluaXQodGhpcyk7XHJcbiAgICB0aGlzLnJlZ1ZpZXdNb2RlbCh0aGlzLnZpZXdNb2RlbCk7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICog5Yid5aeL5YyWQmluZGluZ0RhdGFcclxuICAgKiBAc3VtbWFyeVxyXG4gICAqIOiAgeihqOWNle+8mnJlcG9zaXRvcnlOYW1l5Li656m677yM5aSN5Yi25b2T5YmNUmVwb3NpdG9yeemHjOeahOaVsOaNru+8m1xyXG4gICAqIOaWsOihqOWNle+8mnJlcG9zaXRvcnlOYW1l5pyJ5YC877yM5byV55So5YWo5bGAQmluZGluZ0RhdGHph4znmoTmlbDmja7vvJtcclxuICAgKi9cclxuICBwcml2YXRlIGluaXRpYWxpemVCaW5kaW5nRGF0YSgpIHtcclxuICAgIGNvbnN0IHJlcG9zaXRvcnlOYW1lID0gdGhpcy5yZXBvc2l0b3J5Lm5hbWU7XHJcbiAgICBjb25zdCBpc1J1bkF0SGlnaFNwZWVkTW9kZSA9IHRoaXMuYXBwQ29udGV4dC5ydW5Nb2RlID09PSBSdW5Nb2RlLmhpZ2hTcGVlZDtcclxuICAgIGlmIChyZXBvc2l0b3J5TmFtZSAmJiBpc1J1bkF0SGlnaFNwZWVkTW9kZSkge1xyXG4gICAgICBjb25zdCByZXBvc2l0b3J5QmluZGluZ0RhdGEgPSB0aGlzLmFwcENvbnRleHQuYmluZGluZ0RhdGFNYW5hZ2VyLmdldEJpbmRpbmdEYXRhQnlOYW1lKHJlcG9zaXRvcnlOYW1lKTtcclxuICAgICAgdGhpcy5iaW5kaW5nRGF0YS5pbml0QnlCaW5kaW5nTGlzdChyZXBvc2l0b3J5QmluZGluZ0RhdGEubGlzdCwgdGhpcy52aWV3TW9kZWwuYmluZGluZ1BhdGgpO1xyXG4gICAgICB0aGlzLmJpbmRpbmdEYXRhLnBhZ2luZ0luZm8gPSByZXBvc2l0b3J5QmluZGluZ0RhdGEucGFnaW5nSW5mbztcclxuICAgICAgdGhpcy5iaW5kaW5nRGF0YS5zZXREYXRhVHlwZUluZm8odGhpcy5yZXBvc2l0b3J5LmVudGl0eVR5cGVJbmZvKTtcclxuICAgICAgRW50aXR5VXRpbC53YXRjaFJlcG9zaXJvdHkodGhpcy5yZXBvc2l0b3J5LCB0aGlzLmJpbmRpbmdEYXRhKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuYmluZGluZ0RhdGEuaW5pdEJ5UmVwb3NpdG9yeSh0aGlzLnJlcG9zaXRvcnksIHRoaXMudmlld01vZGVsLmJpbmRpbmdQYXRoKTtcclxuICAgICAgRW50aXR5VXRpbC53YXRjaFJlcG9zaXJvdHkodGhpcy5yZXBvc2l0b3J5LCB0aGlzLmJpbmRpbmdEYXRhKTtcclxuICAgICAgdGhpcy5iaW5kaW5nRGF0YS5jaGFuZ2VzLnN1YnNjcmliZSgoY2hhbmdlOiBDaGFuZ2UpID0+IHtcclxuICAgICAgICBpZiAoY2hhbmdlLnR5cGUgPT09IENoYW5nZVR5cGUuR2xvYmFsU2VsZWN0aW9uQ2hhbmdlZCkge1xyXG4gICAgICAgICAgdGhpcy5hcHBDb250ZXh0LmhhbmRsZVNlbGVjdENoYW5nZShjaGFuZ2UsIHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICog5Yid5aeL5YyWVUlTdGF0ZVxyXG4gICAqIOWQiOW5tui3r+eUseWPguaVsOWIsFVJU3RhdGXkuK1cclxuICAgKi9cclxuICBwcml2YXRlIGluaXRpYWxpemVVaVN0YXRlKCkge1xyXG4gICAgY29uc3QgaXNJbkZyYW1ld29yayA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluZGV4T2YoJ3BsYXRmb3JtJykgPiAtMTtcclxuICAgIGNvbnN0IHBhcmFtVHlwZVRyYW5zZm9ybSA9IHRoaXMuaW5qZWN0b3IuZ2V0PGJvb2xlYW4+KFBBUkFNX1RZUEVfVFJBTlNGT1JNX1RPS0VOLCBmYWxzZSk7XHJcbiAgICAvLyDojrflj5ZVSVN0YXRlXHJcbiAgICB0aGlzLnVpU3RhdGUgPSB0aGlzLmluamVjdG9yLmdldDxVSVN0YXRlPihVSVN0YXRlLCBudWxsKTtcclxuICAgIGlmICghdGhpcy51aVN0YXRlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHRoaXMudWlTdGF0ZS5wYXJhbVR5cGVUcmFuc2Zvcm0gPSBwYXJhbVR5cGVUcmFuc2Zvcm07XHJcbiAgICB0aGlzLnVpU3RhdGUuaW5pdGlhbGl6ZSh0aGlzKTtcclxuICAgIC8vIOiOt+WPlui3r+eUseWPguaVsFxyXG4gICAgY29uc3QgdXJsID0gKHRoaXMuYXBwQ29udGV4dCAmJiB0aGlzLmFwcENvbnRleHQucm91dGVyICYmIHRoaXMuYXBwQ29udGV4dC5yb3V0ZXIudXJsKSB8fCAnJztcclxuICAgIGNvbnN0IHJvdXRlclBhcmFtU2VydmljZSA9IG5ldyBSb3V0ZXJQYXJhbVNlcnZpY2UoKTtcclxuICAgIGNvbnN0IHJvdXRlclBhcmFtcyA9IHJvdXRlclBhcmFtU2VydmljZS5nZXRQYXJhbXModXJsKTtcclxuXHJcbiAgICAvLyDlnKhVSVN0YXRl5Li66Lev55Sx5Y+C5pWw5Yib5bu65bGe5oCnXHJcbiAgICBPYmplY3Qua2V5cyhyb3V0ZXJQYXJhbXMpLmZvckVhY2goKHByb3BOYW1lOiBzdHJpbmcpID0+IHtcclxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMudWlTdGF0ZSwgcHJvcE5hbWUsIHtcclxuICAgICAgICBnZXQ6ICgpID0+IHtcclxuICAgICAgICAgIHJldHVybiByb3V0ZXJQYXJhbXNbcHJvcE5hbWVdO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOazqOWGjOWtkFZpZXdNb2RlbFxyXG4gICAqIEB0b2RvXHJcbiAgICogMeOAgXByb3BOYW1l5YaZ5q275LqGXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHJlZ1ZpZXdNb2RlbCh2aWV3TW9kZWw6IFZpZXdNb2RlbCk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuYXBwQ29udGV4dCAmJiB0aGlzLmFwcENvbnRleHQudmlld01vZGVsTWFuYWdlci5leHNpdCh2aWV3TW9kZWwubmFtZSkgPT09IGZhbHNlKSB7XHJcbiAgICAgIHRoaXMuYXBwQ29udGV4dC52aWV3TW9kZWxNYW5hZ2VyLnJlZ2lzdGVyKHZpZXdNb2RlbC5uYW1lLCB2aWV3TW9kZWwpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgY2xhc3NOYW1lID0gdmlld01vZGVsLmNvbnN0cnVjdG9yLm5hbWU7XHJcbiAgICBjb25zdCBwYXJlbnRDb250ZXh0ID0gdGhpcy5wYXJlbnQ7XHJcbiAgICBsZXQgcGFyZW50Vmlld01vZGVsID0gbnVsbDtcclxuICAgIGlmIChwYXJlbnRDb250ZXh0ICYmIHBhcmVudENvbnRleHQudmlld01vZGVsKSB7XHJcbiAgICAgIHBhcmVudFZpZXdNb2RlbCA9IHBhcmVudENvbnRleHQudmlld01vZGVsO1xyXG4gICAgfVxyXG4gICAgaWYgKCFwYXJlbnRWaWV3TW9kZWwpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgLy8g5LyY5YWI5L2/55So55Sf5oiQ5Zmo55Sf5oiQ55qEbmFtZVxyXG4gICAgY29uc3QgY2hpbGRWaWV3TW9kZWxzID0gcGFyZW50Vmlld01vZGVsWydjaGlsZFZpZXdNb2RlbHMnXTtcclxuICAgIGxldCB2aWV3TW9kZWxOYW1lID0gbnVsbDtcclxuICAgIGlmIChjaGlsZFZpZXdNb2RlbHMpIHtcclxuICAgICAgY29uc3QgbmFtZSA9IHZpZXdNb2RlbC5jb25zdHJ1Y3Rvci5uYW1lO1xyXG4gICAgICB2aWV3TW9kZWxOYW1lID0gY2hpbGRWaWV3TW9kZWxzW3ZpZXdNb2RlbC5uYW1lXSB8fCBjaGlsZFZpZXdNb2RlbHNbbmFtZV07XHJcbiAgICB9IGVsc2UgaWYgKGNsYXNzTmFtZS5sZW5ndGggPT09IDEpIHtcclxuICAgICAgY29uc3QgY2xhc3NOYW1lVG9rZW5zID0gdmlld01vZGVsLm5hbWUuc3BsaXQoJy0nKS5tYXAoKG5hbWVUb2tlbiwgaW5kZXgpID0+IHtcclxuICAgICAgICBpZiAoaW5kZXggPiAwICYmIG5hbWVUb2tlbi5sZW5ndGgpIHtcclxuICAgICAgICAgIGNvbnN0IHBhc2ljYWxOYW1lID0gbmFtZVRva2VuLmNoYXJBdCgwKS50b0xvY2FsZVVwcGVyQ2FzZSgpICsgbmFtZVRva2VuLnN1YnN0cigxLCBuYW1lVG9rZW4ubGVuZ3RoIC0gMSk7XHJcbiAgICAgICAgICByZXR1cm4gcGFzaWNhbE5hbWU7XHJcbiAgICAgICAgfSBlbHNlIGlmIChpbmRleCA9PT0gMCAmJiBuYW1lVG9rZW4ubGVuZ3RoKSB7XHJcbiAgICAgICAgICBjb25zdCBjYW1lbE5hbWUgPSBuYW1lVG9rZW4uY2hhckF0KDApLnRvTG9jYWxlTG93ZXJDYXNlKCkgKyBuYW1lVG9rZW4uc3Vic3RyKDEsIG5hbWVUb2tlbi5sZW5ndGggLSAxKTtcclxuICAgICAgICAgIHJldHVybiBjYW1lbE5hbWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuYW1lVG9rZW47XHJcbiAgICAgIH0pO1xyXG4gICAgICB2aWV3TW9kZWxOYW1lID0gY2xhc3NOYW1lVG9rZW5zLmpvaW4oJycpO1xyXG4gICAgfVxyXG4gICAgLy8g5YW85a655Lqn5ZOB6YOo6ICB6KGo5Y2V55qE5YaZ5rOV77yM5aaC5p6c6ZyA6KaBdm0gbmFtZee7n+S4gO+8jOW6lOaMieeFp+atpOinhOWImVxyXG4gICAgaWYgKCF2aWV3TW9kZWxOYW1lKSB7XHJcbiAgICAgIHZpZXdNb2RlbE5hbWUgPSBjbGFzc05hbWVbMF0udG9Mb3dlckNhc2UoKSArIGNsYXNzTmFtZS5zdWJzdHJpbmcoMSwgY2xhc3NOYW1lLmxlbmd0aCk7XHJcbiAgICB9XHJcbiAgICBwYXJlbnRWaWV3TW9kZWxbJ3ZpZXdNb2RlbE5hbWVzJ10gPSBwYXJlbnRWaWV3TW9kZWxbJ3ZpZXdNb2RlbE5hbWVzJ10gfHwgW107XHJcbiAgICBwYXJlbnRWaWV3TW9kZWxbdmlld01vZGVsTmFtZV0gPSB2aWV3TW9kZWw7XHJcbiAgICBwYXJlbnRWaWV3TW9kZWxbJ3ZpZXdNb2RlbE5hbWVzJ10ucHVzaCh2aWV3TW9kZWxOYW1lKTtcclxuICAgIHZpZXdNb2RlbC5iaW5kVG9QYXJlbnQocGFyZW50Vmlld01vZGVsKTtcclxuICB9XHJcblxyXG4gIC8vICNlbmRyZWdpb25cclxuXHJcbiAgLyoqXHJcbiAgICog5qOA5p+l5piv5ZCm5Li65qC5RnJhbWVDb250ZXh0XHJcbiAgICogQHN1bW1hcnlcclxuICAgKiDmo4Dmn6Xor6VGcmFtZUNvbnRleHTmmK/kuI3mmK/miYDlnKhBcHBDb250ZXh05Lit55qE5qC5RnJhbWVDb250ZXh0XHJcbiAgICovXHJcbiAgcHVibGljIGlzUm9vdEZyYW1lQ29udGV4dCgpIHtcclxuICAgIHJldHVybiB0aGlzLnBhcmVudCA9PT0gbnVsbCB8fCAodGhpcy5hcHBDb250ZXh0LnJ1bk1vZGUgPT09IFJ1bk1vZGUuaGlnaFNwZWVkICYmIHRoaXMuZ2V0VmlydHVhbFJvb3RGcmFtZUNvbnRleHQoKS5mcmFtZUNvbXBvbmVudFsnaXNEaWFsb2dSb290Q29tcG9uZW50J10gPT09IHRydWUpO1xyXG4gIH1cclxuICAvKipcclxuICAgKiDpgJrov4duYW1lc3BhY2Xojrflj5blvZPliY3ooajljZXnmoRyb290LWZyYW1lY29udGV4dCjpnZ7mlbTkuKrooajljZUpXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICog5aaC5p6c5Li657uE5ZCI6KGo5Y2V77yM5YW25b2T5YmN6KGo5Y2V55qEcm9vdC1mcmFtZWNvbnRleHTkuLrljZXkuKrooajljZXnmoRmcmFtZWNvbnRleHTvvIzogIzpnZ7mlbTkuKrooajljZXnmoRmcmFtZWNvbnRleHRcclxuICAgKi9cclxuICBwdWJsaWMgZ2V0VmlydHVhbFJvb3RGcmFtZUNvbnRleHQoKSB7XHJcbiAgICBsZXQgZm9ybUZyYW1lQ29udGV4dDogRnJhbWVDb250ZXh0ID0gdGhpcztcclxuICAgIGxldCBwYXJlbnQgPSB0aGlzLnBhcmVudDtcclxuICAgIHdoaWxlIChwYXJlbnQpIHtcclxuICAgICAgLy8g5YW85a655rKh5pyJ6YeN5paw57yW6K+R55qE6KGo5Y2V77yM5aaC5p6c5Yik5patcGFyZW50Lm5hbWVzcGFjZeWtmOWcqOS8muWvvOiHtOiOt+WPluS4jeWIsHJvb3QtZnJhbWVjb250ZXh0XHJcbiAgICAgIGlmIChwYXJlbnQubmFtZXNwYWNlID09PSB0aGlzLm5hbWVzcGFjZSkge1xyXG4gICAgICAgIGZvcm1GcmFtZUNvbnRleHQgPSBwYXJlbnQ7XHJcbiAgICAgICAgcGFyZW50ID0gcGFyZW50LnBhcmVudDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZvcm1GcmFtZUNvbnRleHQ7XHJcbiAgfVxyXG5cclxuXHJcbiAgcHVibGljIGdldENvbnRleHRCeUlkKGlkZW50aWZ5OiBzdHJpbmcpOiBhbnkge1xyXG4gICAgcmV0dXJuIHRoaXMuYXBwQ29udGV4dC5nZXRDb250ZXh0QnlJZChpZGVudGlmeSk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0Vmlld01vZGVsKHZpZXdNb2RlbE5hbWU6IHN0cmluZyk6IFZpZXdNb2RlbCB7XHJcbiAgICBjb25zdCByZW5kZXJBcHBDb250ZXh0ID0gdGhpcy5hcHBDb250ZXh0O1xyXG4gICAgaWYgKHJlbmRlckFwcENvbnRleHQpIHtcclxuICAgICAgcmV0dXJuIHJlbmRlckFwcENvbnRleHQudmlld01vZGVsTWFuYWdlci5nZXRWaWV3TW9kZWxCeU5hbWUodmlld01vZGVsTmFtZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBhdHRhY2hWaWV3Q29tcG9uZW50KHZpZXdDb21wb25lbnQ6IEZyYW1lQ29tcG9uZW50KSB7XHJcbiAgICB0aGlzLmZyYW1lQ29tcG9uZW50ID0gdmlld0NvbXBvbmVudDtcclxuICAgIHRoaXMuYXBwQ29udGV4dC5mcmFtZUNvbXBvbmVudFJlZnJlc2hlci5yZWdGcmFtZUNvbXBvbmVudCh0aGlzLmZyYW1lSWQsIHRoaXMuZnJhbWVDb21wb25lbnQpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGludm9rZShhY3Rpb25QYXRoOiBzdHJpbmcsICRldmVudDogYW55KSB7XHJcbiAgICBjb25zdCBhY3Rpb25CaW5kaW5nUGF0aCA9IGFjdGlvblBhdGguc3BsaXQoJy4nKTtcclxuICAgIGNvbnN0IGFjdGlvbk5hbWUgPSBhY3Rpb25CaW5kaW5nUGF0aFthY3Rpb25CaW5kaW5nUGF0aC5sZW5ndGggLSAxXTtcclxuICAgIGNvbnN0IGJpbmRpbmdWaWV3TW9kZWwgPSBhY3Rpb25CaW5kaW5nUGF0aC5sZW5ndGggPT09IDEgPyB0aGlzLnZpZXdNb2RlbCA6XHJcbiAgICAgIHRoaXMuZ2V0Vmlld01vZGVsKGFjdGlvbkJpbmRpbmdQYXRoW2FjdGlvbkJpbmRpbmdQYXRoLmxlbmd0aCAtIDJdKTtcclxuICAgIGlmICghYmluZGluZ1ZpZXdNb2RlbCkge1xyXG4gICAgICBhbGVydChg5pyq5Yy56YWN5YiwJyR7YWN0aW9uUGF0aH0n5ZG95Luk55qE6KeG5Zu+5qih5Z6L77yM6K+35qOA5p+l5LqL5Lu25piv5ZCm6YWN572u5q2j56Gu44CCYCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYmluZGluZ1ZpZXdNb2RlbFthY3Rpb25OYW1lXSgkZXZlbnQpO1xyXG4gIH1cclxufVxyXG4iXX0=