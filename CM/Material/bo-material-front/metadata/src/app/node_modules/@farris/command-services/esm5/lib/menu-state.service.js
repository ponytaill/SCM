import { Injectable } from '@angular/core';
// tslint:disable: no-unused-expression
/**
 * 菜单状态服务
 * @scope FormModule
 */
var MenuStateService = /** @class */ (function () {
    function MenuStateService() {
        this.COMMAND_SERVICE_LINK_STORAGE_KEY = 'COMMAND_SERVICE_LINK_STORAGE_KEY';
    }
    MenuStateService.prototype.getState = function () {
        var data = !!sessionStorage && sessionStorage.getItem(this.COMMAND_SERVICE_LINK_STORAGE_KEY) || null;
        if (!!data) {
            return JSON.parse(data);
        }
        return {};
    };
    MenuStateService.prototype.setState = function (links) {
        !!sessionStorage && sessionStorage.setItem(this.COMMAND_SERVICE_LINK_STORAGE_KEY, JSON.stringify(links));
    };
    MenuStateService.prototype.addMenuState = function (parentMenuId, childMenuId, status) {
        if (status === void 0) { status = true; }
        if (!childMenuId) {
            return;
        }
        var state = this.getState();
        var isParentExist = !!state && state.hasOwnProperty(parentMenuId);
        var childItem = { id: childMenuId, status: status };
        if (isParentExist) {
            var parent_1 = state[parentMenuId];
            var isChildItemExist = parent_1.find(function (item) { return item.id === childMenuId; });
            if (!isChildItemExist) {
                state[parentMenuId].push(childItem);
            }
        }
        else {
            state[parentMenuId] = [childItem];
        }
        this.setState(state);
    };
    MenuStateService.prototype.getMenuState = function (parentMenuId, childMenuId) {
        var state = this.getState();
        if (state === null) {
            return null;
        }
        var isParentExist = state.hasOwnProperty(parentMenuId);
        if (!isParentExist) {
            return null;
        }
        var parentMenu = state[parentMenuId];
        var childMenu = parentMenu.filter(function (item) { return item.status === true; });
        if (typeof childMenuId === 'undefined' || childMenuId.length < 1) {
            return childMenu;
        }
        return parentMenu.filter(function (item) { return item.status && item.id === childMenuId; });
    };
    MenuStateService.prototype.updateMenuState = function (childMenuId, status) {
        var state = this.getState();
        if (state === null) {
            return;
        }
        Object.keys(state).forEach(function (key) {
            var childMenu = state[key].find(function (item) { return item.id === childMenuId; });
            if (!!childMenu) {
                childMenu.status = status;
            }
        });
        this.setState(state);
    };
    MenuStateService.prototype.removeMenu = function (menuId) {
        this.removeParentMenu(menuId);
        this.removeChildMenu(menuId);
    };
    MenuStateService.prototype.removeParentMenu = function (menuId) {
        var state = this.getState();
        if (state === null) {
            return null;
        }
        Object.keys(state).forEach(function (item) {
            if (item === menuId && state[menuId].length < 1) {
                delete state[item];
            }
        });
        this.setState(state);
    };
    MenuStateService.prototype.removeChildMenu = function (menuId) {
        var state = this.getState();
        if (state === null) {
            return;
        }
        Object.keys(state).forEach(function (parentMenuId) {
            var childMenus = state[parentMenuId];
            if (childMenus && childMenus.length > 0) {
                childMenus.forEach(function (child, index) {
                    if (child.id === menuId) {
                        childMenus.splice(index, 1);
                    }
                });
            }
        });
        this.setState(state);
    };
    MenuStateService.decorators = [
        { type: Injectable }
    ];
    return MenuStateService;
}());
export { MenuStateService };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWVudS1zdGF0ZS5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy9jb21tYW5kLXNlcnZpY2VzLyIsInNvdXJjZXMiOlsibGliL21lbnUtc3RhdGUuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzNDLHVDQUF1QztBQUN2Qzs7O0dBR0c7QUFDSDtJQUFBO1FBRXFCLHFDQUFnQyxHQUFHLGtDQUFrQyxDQUFDO0lBMkYzRixDQUFDO0lBMUZXLG1DQUFRLEdBQWhCO1FBQ0ksSUFBTSxJQUFJLEdBQUcsQ0FBQyxDQUFDLGNBQWMsSUFBSSxjQUFjLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxnQ0FBZ0MsQ0FBQyxJQUFJLElBQUksQ0FBQztRQUN2RyxJQUFJLENBQUMsQ0FBQyxJQUFJLEVBQUU7WUFDUixPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7U0FDM0I7UUFDRCxPQUFPLEVBQUUsQ0FBQztJQUNkLENBQUM7SUFDTyxtQ0FBUSxHQUFoQixVQUFpQixLQUFLO1FBQ2xCLENBQUMsQ0FBQyxjQUFjLElBQUksY0FBYyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsZ0NBQWdDLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO0lBQzdHLENBQUM7SUFDTSx1Q0FBWSxHQUFuQixVQUFvQixZQUFvQixFQUFFLFdBQW1CLEVBQUUsTUFBc0I7UUFBdEIsdUJBQUEsRUFBQSxhQUFzQjtRQUNqRixJQUFJLENBQUMsV0FBVyxFQUFFO1lBQ2QsT0FBTztTQUNWO1FBQ0QsSUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBQzlCLElBQU0sYUFBYSxHQUFHLENBQUMsQ0FBQyxLQUFLLElBQUksS0FBSyxDQUFDLGNBQWMsQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUNwRSxJQUFNLFNBQVMsR0FB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QUFDLENBQUMsT0FBTyxDQUFDLFVBQUEsSUFBSTtZQUMzQixJQUFJLElBQUksS0FBSyxNQUFNLElBQUksS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7Z0JBQzdDLE9BQU8sS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO2FBQ3RCO1FBQ0wsQ0FBQyxDQUFDLENBQUM7UUFDSCxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ3pCLENBQUM7SUFDTywwQ0FBZSxHQUF2QixVQUF3QixNQUFjO1FBQ2xDLElBQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUM5QixJQUFJLEtBQUssS0FBSyxJQUFJLEVBQUU7WUFDaEIsT0FBTztTQUNWO1FBQ0QsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxPQUFPLENBQUMsVUFBQSxZQUFZO1lBQ25DLElBQU0sVUFBVSxHQUFHLEtBQUssQ0FBQyxZQUFZLENBQUMsQ0FBQztZQUN2QyxJQUFJLFVBQVUsSUFBSSxVQUFVLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtnQkFDckMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxVQUFDLEtBQUssRUFBRSxLQUFLO29CQUM1QixJQUFJLEtBQUssQ0FBQyxFQUFFLEtBQUssTUFBTSxFQUFFO3dCQUNyQixVQUFVLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQztxQkFDL0I7Z0JBQ0wsQ0FBQyxDQUFDLENBQUM7YUFDTjtRQUNMLENBQUMsQ0FBQyxDQUFDO1FBQ0gsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUN6QixDQUFDOztnQkE1RkosVUFBVTs7SUE2RlgsdUJBQUM7Q0FBQSxBQTdGRCxJQTZGQztBQUVELE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuLy8gdHNsaW50OmRpc2FibGU6IG5vLXVudXNlZC1leHByZXNzaW9uXG4vKipcbiAqIOiPnOWNleeKtuaAgeacjeWKoVxuICogQHNjb3BlIEZvcm1Nb2R1bGVcbiAqL1xuQEluamVjdGFibGUoKVxuY2xhc3MgTWVudVN0YXRlU2VydmljZSB7XG4gICAgcHJpdmF0ZSByZWFkb25seSBDT01NQU5EX1NFUlZJQ0VfTElOS19TVE9SQUdFX0tFWSA9ICdDT01NQU5EX1NFUlZJQ0VfTElOS19TVE9SQUdFX0tFWSc7XG4gICAgcHJpdmF0ZSBnZXRTdGF0ZSgpIHtcbiAgICAgICAgY29uc3QgZGF0YSA9ICEhc2Vzc2lvblN0b3JhZ2UgJiYgc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSh0aGlzLkNPTU1BTkRfU0VSVklDRV9MSU5LX1NUT1JBR0VfS0VZKSB8fCBudWxsO1xuICAgICAgICBpZiAoISFkYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShkYXRhKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge307XG4gICAgfVxuICAgIHByaXZhdGUgc2V0U3RhdGUobGlua3MpIHtcbiAgICAgICAgISFzZXNzaW9uU3RvcmFnZSAmJiBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKHRoaXMuQ09NTUFORF9TRVJWSUNFX0xJTktfU1RPUkFHRV9LRVksIEpTT04uc3RyaW5naWZ5KGxpbmtzKSk7XG4gICAgfVxuICAgIHB1YmxpYyBhZGRNZW51U3RhdGUocGFyZW50TWVudUlkOiBzdHJpbmcsIGNoaWxkTWVudUlkOiBzdHJpbmcsIHN0YXR1czogYm9vbGVhbiA9IHRydWUpIHtcbiAgICAgICAgaWYgKCFjaGlsZE1lbnVJZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBpc1BhcmVudEV4aXN0ID0gISFzdGF0ZSAmJiBzdGF0ZS5oYXNPd25Qcm9wZXJ0eShwYXJlbnRNZW51SWQpO1xuICAgICAgICBjb25zdCBjaGlsZEl0ZW0gPSB7IGlkOiBjaGlsZE1lbnVJZCwgc3RhdHVzIH07XG4gICAgICAgIGlmIChpc1BhcmVudEV4aXN0KSB7XG4gICAgICAgICAgICBjb25zdCBwYXJlbnQgPSBzdGF0ZVtwYXJlbnRNZW51SWRdO1xuICAgICAgICAgICAgY29uc3QgaXNDaGlsZEl0ZW1FeGlzdCA9IHBhcmVudC5maW5kKGl0ZW0gPT4gaXRlbS5pZCA9PT0gY2hpbGRNZW51SWQpO1xuICAgICAgICAgICAgaWYgKCFpc0NoaWxkSXRlbUV4aXN0KSB7XG4gICAgICAgICAgICAgICAgc3RhdGVbcGFyZW50TWVudUlkXS5wdXNoKGNoaWxkSXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzdGF0ZVtwYXJlbnRNZW51SWRdID0gW2NoaWxkSXRlbV07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRTdGF0ZShzdGF0ZSk7XG4gICAgfVxuICAgIHB1YmxpYyBnZXRNZW51U3RhdGUocGFyZW50TWVudUlkOiBzdHJpbmcsIGNoaWxkTWVudUlkPzogc3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5nZXRTdGF0ZSgpO1xuICAgICAgICBpZiAoc3RhdGUgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGlzUGFyZW50RXhpc3QgPSBzdGF0ZS5oYXNPd25Qcm9wZXJ0eShwYXJlbnRNZW51SWQpO1xuICAgICAgICBpZiAoIWlzUGFyZW50RXhpc3QpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcmVudE1lbnUgPSBzdGF0ZVtwYXJlbnRNZW51SWRdO1xuICAgICAgICBjb25zdCBjaGlsZE1lbnUgPSBwYXJlbnRNZW51LmZpbHRlcihpdGVtID0+IGl0ZW0uc3RhdHVzID09PSB0cnVlKTtcbiAgICAgICAgaWYgKHR5cGVvZiBjaGlsZE1lbnVJZCA9PT0gJ3VuZGVmaW5lZCcgfHwgY2hpbGRNZW51SWQubGVuZ3RoIDwgMSkge1xuICAgICAgICAgICAgcmV0dXJuIGNoaWxkTWVudTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFyZW50TWVudS5maWx0ZXIoaXRlbSA9PiBpdGVtLnN0YXR1cyAmJiBpdGVtLmlkID09PSBjaGlsZE1lbnVJZCk7XG4gICAgfVxuICAgIHB1YmxpYyB1cGRhdGVNZW51U3RhdGUoY2hpbGRNZW51SWQ6IHN0cmluZywgc3RhdHVzOiBib29sZWFuKSB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5nZXRTdGF0ZSgpO1xuICAgICAgICBpZiAoc3RhdGUgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBPYmplY3Qua2V5cyhzdGF0ZSkuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2hpbGRNZW51ID0gc3RhdGVba2V5XS5maW5kKGl0ZW0gPT4gaXRlbS5pZCA9PT0gY2hpbGRNZW51SWQpO1xuICAgICAgICAgICAgaWYgKCEhY2hpbGRNZW51KSB7XG4gICAgICAgICAgICAgICAgY2hpbGRNZW51LnN0YXR1cyA9IHN0YXR1cztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoc3RhdGUpO1xuICAgIH1cbiAgICBwdWJsaWMgcmVtb3ZlTWVudShtZW51SWQ6IHN0cmluZykge1xuICAgICAgICB0aGlzLnJlbW92ZVBhcmVudE1lbnUobWVudUlkKTtcbiAgICAgICAgdGhpcy5yZW1vdmVDaGlsZE1lbnUobWVudUlkKTtcbiAgICB9XG4gICAgcHJpdmF0ZSByZW1vdmVQYXJlbnRNZW51KG1lbnVJZDogc3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5nZXRTdGF0ZSgpO1xuICAgICAgICBpZiAoc3RhdGUgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIE9iamVjdC5rZXlzKHN0YXRlKS5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICAgICAgaWYgKGl0ZW0gPT09IG1lbnVJZCAmJiBzdGF0ZVttZW51SWRdLmxlbmd0aCA8IDEpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgc3RhdGVbaXRlbV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHN0YXRlKTtcbiAgICB9XG4gICAgcHJpdmF0ZSByZW1vdmVDaGlsZE1lbnUobWVudUlkOiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLmdldFN0YXRlKCk7XG4gICAgICAgIGlmIChzdGF0ZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIE9iamVjdC5rZXlzKHN0YXRlKS5mb3JFYWNoKHBhcmVudE1lbnVJZCA9PiB7XG4gICAgICAgICAgICBjb25zdCBjaGlsZE1lbnVzID0gc3RhdGVbcGFyZW50TWVudUlkXTtcbiAgICAgICAgICAgIGlmIChjaGlsZE1lbnVzICYmIGNoaWxkTWVudXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNoaWxkTWVudXMuZm9yRWFjaCgoY2hpbGQsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGlsZC5pZCA9PT0gbWVudUlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGlsZE1lbnVzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoc3RhdGUpO1xuICAgIH1cbn1cblxuZXhwb3J0IHsgTWVudVN0YXRlU2VydmljZSB9O1xuIl19