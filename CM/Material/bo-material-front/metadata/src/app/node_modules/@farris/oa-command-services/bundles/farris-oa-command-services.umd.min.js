!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@farris/ui-messager"),require("@angular/core"),require("rxjs")):"function"==typeof define&&define.amd?define("@farris/oa-command-services",["exports","@farris/ui-messager","@angular/core","rxjs"],t):t((e.farris=e.farris||{},e.farris["oa-command-services"]={}),e.uiMessager,e.ng.core,e.rxjs)}(this,function(e,t,r,n){"use strict";var o="card",i=(a.prototype.printWebPage=function(e){void 0===e&&(e=o),this.currentTemplate=e,window.navigator.userAgent.includes("AppleWebKit/")?window.print():this.msgSer.prompt("提示","为保证打印效果，推荐使用谷歌浏览器进行打印。是否继续打印？").subscribe(function(e){e&&window.print()})},a.decorators=[{type:r.Injectable}],a.ctorParameters=function(){return[{type:t.MessagerService}]},a);function a(e){var r=this;this.msgSer=e,window.onbeforeprint=function(){var e,t;r.currentTemplate==o&&(e=document.getElementById("root-layout"),t=document.getElementById("main-container"),e&&t?(e.style.display="block",e.style.position="relative",t.style.display="block",e.parentElement.style.position="relative",document.title=""):r.msgSer.error("未找到模板中关键节点，请检查命令传参中模板类型是否正确。"))},window.onafterprint=function(){var e,t;r.currentTemplate==o&&(e=document.getElementById("root-layout"),t=document.getElementById("main-container"),e&&t&&(t.setAttribute("style",""),e.setAttribute("style",""),e.parentElement.setAttribute("style","")))}}var s="Resubmit",c=(u.prototype.initTaskCenterBridge=function(e){var o,i,a=this,t=window.parent;try{o=this.context.frameContext}catch(r){throw new Error("can not find frameContex")}try{i=this.context.frameContext.viewModel.slienceSave1}catch(r){}t&&(t.taskCenterBeforeLoad=function(n){return new Promise(function(e,t){var r=n.action;"Approving"==o.uiState.UIStateInProcess&&o.uiState.formConfigId?i.call(a).subscribe(function(){e({result:!0})},function(){window.document.body.click(),e({result:!1})}):r.code==s&&i?i.call(a).subscribe(function(){e({result:!0})}):e({result:!0})})})},u.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],u.ctorParameters=function(){return[]},u.ngInjectableDef=r.defineInjectable({factory:function(){return new u},token:u,providedIn:"root"}),u);function u(){}var d=(f.prototype.switchStatus=function(){var e,t=new n.BehaviorSubject("Cancel");try{e=this.context.frameContext}catch(r){throw new Error("can not find frameContex")}return"Approving"==e.uiState.UIStateInProcess&&e.uiState.formConfigId&&t.next("Edit"),t},f.decorators=[{type:r.Injectable}],f.ctorParameters=function(){return[{type:r.Injector}]},f);function f(e){this.injetor=e}var l=(p.decorators=[{type:r.NgModule,args:[{providers:[c,i,d],imports:[],exports:[],entryComponents:[]}]}],p.ctorParameters=function(){return[]},p);function p(){}e.OACommandServicesModule=l,e.PrintWebPageService=i,e.TaskCenterBridgeService=c,e.TransitApprovalStatus=d,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=farris-oa-command-services.umd.min.js.map