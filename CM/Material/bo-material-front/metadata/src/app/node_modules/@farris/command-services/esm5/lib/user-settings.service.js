import { Injectable, Injector, Optional } from '@angular/core';
import { FrmI18nSettingService } from '@gsp-sys/rtf-common';
var UserSettingsService = /** @class */ (function () {
    function UserSettingsService(injector, frmI18nSettingService) {
        this.injector = injector;
        this.frmI18nSettingService = frmI18nSettingService;
    }
    Object.defineProperty(UserSettingsService.prototype, "timeZone", {
        /**
         * 用户时区字符串
         */
        get: function () {
            return this.timezone && this.timezone.id || null;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(UserSettingsService.prototype, "timeZoneOffset", {
        /**
         * 时区偏移
         */
        get: function () {
            var offset = this.timezone && this.timezone.baseOffset;
            if (offset !== null && offset !== undefined) {
                return offset;
            }
            else {
                return null;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(UserSettingsService.prototype, "defaultLanguage", {
        /**
         * 默认语言
         */
        get: function () {
            return this.i18nSetting && this.i18nSetting.defaultLanguage || null;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(UserSettingsService.prototype, "dateFormat", {
        /**
         * 日期格式化字符串
         * like: yyyy-MM-dd
         */
        get: function () {
            return this.i18nSetting && this.i18nSetting.userDateFormat || null;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(UserSettingsService.prototype, "timeFormat", {
        /**
         * 时间格式
         * like: HH:MM:ss
         */
        get: function () {
            return this.i18nSetting && this.i18nSetting.userTimeFormat || null;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(UserSettingsService.prototype, "dateTimeFormat", {
        get: function () {
            var dateFormat = this.i18nSetting && this.i18nSetting.userDateFormat || 'yyyy-MM-dd';
            var timeFormat = this.i18nSetting && this.i18nSetting.userTimeFormat || 'HH:mm:ss';
            return dateFormat + " " + timeFormat;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(UserSettingsService.prototype, "addressFormat", {
        /**
         * 地址格式
         */
        get: function () {
            return null;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(UserSettingsService.prototype, "numberFormat", {
        /**
         * 数字格式
         */
        get: function () {
            if (this.i18nSetting && this.i18nSetting.userNumberFormat) {
                var userNumberFormat = this.i18nSetting.userNumberFormat;
                var numberFormat = {
                    negativeSign: userNumberFormat.negativeSign || '-',
                    numberDecimalDigits: userNumberFormat.numberDecimalDigits || 2,
                    numberDecimalSeparator: userNumberFormat.numberDecimalSeparator || '.',
                    numberGroupSeparator: userNumberFormat.numberGroupSeparator || ','
                };
                return numberFormat;
            }
            return null;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(UserSettingsService.prototype, "regionCode", {
        /**
         * 区域代码
         */
        get: function () {
            return this.i18nSetting && this.i18nSetting.userRegionCode || null;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(UserSettingsService.prototype, "userSettings", {
        /**
         * 用户配置
         */
        get: function () {
            var userSettings = this.frmI18nSettingService && this.frmI18nSettingService.getSetting();
            return userSettings;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(UserSettingsService.prototype, "timezone", {
        get: function () {
            return this.i18nSetting && this.i18nSetting.timezone;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(UserSettingsService.prototype, "i18nSetting", {
        get: function () {
            return this.userSettings && this.userSettings.i18nSetting;
        },
        enumerable: true,
        configurable: true
    });
    UserSettingsService.decorators = [
        { type: Injectable }
    ];
    /** @nocollapse */
    UserSettingsService.ctorParameters = function () { return [
        { type: Injector },
        { type: FrmI18nSettingService, decorators: [{ type: Optional }] }
    ]; };
    return UserSettingsService;
}());
export { UserSettingsService };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXNlci1zZXR0aW5ncy5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy9jb21tYW5kLXNlcnZpY2VzLyIsInNvdXJjZXMiOlsibGliL3VzZXItc2V0dGluZ3Muc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFL0QsT0FBTyxFQUFFLHFCQUFxQixFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFFNUQ7SUFFRSw2QkFBb0IsUUFBa0IsRUFBc0IscUJBQTRDO1FBQXBGLGFBQVEsR0FBUixRQUFRLENBQVU7UUFBc0IsMEJBQXFCLEdBQXJCLHFCQUFxQixDQUF1QjtJQUFJLENBQUM7SUFLN0csc0JBQVcseUNBQVE7UUFIbkI7O1dBRUc7YUFDSDtZQUNFLE9BQU8sSUFBSSxDQUFDLFFBQVEsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsSUFBSSxJQUFJLENBQUM7UUFDbkQsQ0FBQzs7O09BQUE7SUFJRCxzQkFBVywrQ0FBYztRQUh6Qjs7V0FFRzthQUNIO1lBQ0UsSUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLFFBQVEsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQztZQUN6RCxJQUFJLE1BQU0sS0FBSyxJQUFJLElBQUksTUFBTSxLQUFLLFNBQVMsRUFBRTtnQkFDM0MsT0FBTyxNQUFNLENBQUM7YUFDZjtpQkFBTTtnQkFDTCxPQUFPLElBQUksQ0FBQzthQUNiO1FBQ0gsQ0FBQzs7O09BQUE7SUFJRCxzQkFBVyxnREFBZTtRQUgxQjs7V0FFRzthQUNIO1lBQ0UsT0FBTyxJQUFJLENBQUMsV0FBVyxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsZUFBZSxJQUFJLElBQUksQ0FBQztRQUN0RSxDQUFDOzs7T0FBQTtJQUtELHNCQUFXLDJDQUFVO1FBSnJCOzs7V0FHRzthQUNIO1lBQ0UsT0FBTyxJQUFJLENBQUMsV0FBVyxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsY0FBYyxJQUFJLElBQUksQ0FBQztRQUNyRSxDQUFDOzs7T0FBQTtJQUtELHNCQUFXLDJDQUFVO1FBSnJCOzs7V0FHRzthQUNIO1lBQ0UsT0FBTyxJQUFJLENBQUMsV0FBVyxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsY0FBYyxJQUFJLElBQUksQ0FBQztRQUNyRSxDQUFDOzs7T0FBQTtJQUNELHNCQUFXLCtDQUFjO2FBQXpCO1lBQ0UsSUFBTSxVQUFVLEdBQUcsSUFBSSxDQUFDLFdBQVcsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLGNBQWMsSUFBSSxZQUFZLENBQUM7WUFDdkYsSUFBTSxVQUFVLEdBQUcsSUFBSSxDQUFDLFdBQVcsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLGNBQWMsSUFBSSxVQUFVLENBQUM7WUFDckYsT0FBVSxVQUFVLFNBQUksVUFBWSxDQUFDO1FBQ3ZDLENBQUM7OztPQUFBO0lBSUQsc0JBQVcsOENBQWE7UUFIeEI7O1dBRUc7YUFDSDtZQUNFLE9BQU8sSUFBSSxDQUFDO1FBQ2QsQ0FBQzs7O09BQUE7SUFJRCxzQkFBVyw2Q0FBWTtRQUh2Qjs7V0FFRzthQUNIO1lBQ0UsSUFBSSxJQUFJLENBQUMsV0FBVyxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsZ0JBQWdCLEVBQUU7Z0JBQ3pELElBQU0sZ0JBQWdCLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxnQkFBZ0IsQ0FBQztnQkFDM0QsSUFBTSxZQUFZLEdBQWlCO29CQUNqQyxZQUFZLEVBQUUsZ0JBQWdCLENBQUMsWUFBWSxJQUFJLEdBQUc7b0JBQ2xELG1CQUFtQixFQUFFLGdCQUFnQixDQUFDLG1CQUFtQixJQUFJLENBQUM7b0JBQzlELHNCQUFzQixFQUFFLGdCQUFnQixDQUFDLHNCQUFzQixJQUFJLEdBQUc7b0JBQ3RFLG9CQUFvQixFQUFFLGdCQUFnQixDQUFDLG9CQUFvQixJQUFJLEdBQUc7aUJBQ25FLENBQUM7Z0JBQ0YsT0FBTyxZQUFZLENBQUM7YUFDckI7WUFDRCxPQUFPLElBQUksQ0FBQztRQUNkLENBQUM7OztPQUFBO0lBSUQsc0JBQVcsMkNBQVU7UUFIckI7O1dBRUc7YUFDSDtZQUNFLE9BQU8sSUFBSSxDQUFDLFdBQVcsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLGNBQWMsSUFBSSxJQUFJLENBQUM7UUFDckUsQ0FBQzs7O09BQUE7SUFJRCxzQkFBWSw2Q0FBWTtRQUh4Qjs7V0FFRzthQUNIO1lBQ0UsSUFBTSxZQUFZLEdBQUcsSUFBSSxDQUFDLHFCQUFxQixJQUFJLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxVQUFVLEVBQUUsQ0FBQztZQUMzRixPQUFPLFlBQVksQ0FBQztRQUN0QixDQUFDOzs7T0FBQTtJQUNELHNCQUFZLHlDQUFRO2FBQXBCO1lBQ0UsT0FBTyxJQUFJLENBQUMsV0FBVyxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDO1FBQ3ZELENBQUM7OztPQUFBO0lBQ0Qsc0JBQVksNENBQVc7YUFBdkI7WUFDRSxPQUFPLElBQUksQ0FBQyxZQUFZLElBQUksSUFBSSxDQUFDLFlBQVksQ0FBQyxXQUFXLENBQUM7UUFDNUQsQ0FBQzs7O09BQUE7O2dCQXRGRixVQUFVOzs7O2dCQUpVLFFBQVE7Z0JBRXBCLHFCQUFxQix1QkFJYSxRQUFROztJQXFGbkQsMEJBQUM7Q0FBQSxBQXZGRCxJQXVGQztTQXRGWSxtQkFBbUIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RhYmxlLCBJbmplY3RvciwgT3B0aW9uYWwgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE51bWJlckZvcm1hdCwgVXNlclNldHRpbmdzIH0gZnJvbSAnQGZhcnJpcy9kZXZraXQnO1xuaW1wb3J0IHsgRnJtSTE4blNldHRpbmdTZXJ2aWNlIH0gZnJvbSAnQGdzcC1zeXMvcnRmLWNvbW1vbic7XG5cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBVc2VyU2V0dGluZ3NTZXJ2aWNlIGltcGxlbWVudHMgVXNlclNldHRpbmdzIHtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBpbmplY3RvcjogSW5qZWN0b3IsIEBPcHRpb25hbCgpIHByaXZhdGUgZnJtSTE4blNldHRpbmdTZXJ2aWNlOiBGcm1JMThuU2V0dGluZ1NlcnZpY2UpIHsgfVxuXG4gIC8qKlxuICAgKiDnlKjmiLfml7bljLrlrZfnrKbkuLJcbiAgICovXG4gIHB1YmxpYyBnZXQgdGltZVpvbmUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy50aW1lem9uZSAmJiB0aGlzLnRpbWV6b25lLmlkIHx8IG51bGw7XG4gIH1cbiAgLyoqXG4gICAqIOaXtuWMuuWBj+enu1xuICAgKi9cbiAgcHVibGljIGdldCB0aW1lWm9uZU9mZnNldCgpOiBudW1iZXIge1xuICAgIGNvbnN0IG9mZnNldCA9IHRoaXMudGltZXpvbmUgJiYgdGhpcy50aW1lem9uZS5iYXNlT2Zmc2V0O1xuICAgIGlmIChvZmZzZXQgIT09IG51bGwgJiYgb2Zmc2V0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBvZmZzZXQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICog6buY6K6k6K+t6KiAXG4gICAqL1xuICBwdWJsaWMgZ2V0IGRlZmF1bHRMYW5ndWFnZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmkxOG5TZXR0aW5nICYmIHRoaXMuaTE4blNldHRpbmcuZGVmYXVsdExhbmd1YWdlIHx8IG51bGw7XG4gIH1cbiAgLyoqXG4gICAqIOaXpeacn+agvOW8j+WMluWtl+espuS4slxuICAgKiBsaWtlOiB5eXl5LU1NLWRkXG4gICAqL1xuICBwdWJsaWMgZ2V0IGRhdGVGb3JtYXQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5pMThuU2V0dGluZyAmJiB0aGlzLmkxOG5TZXR0aW5nLnVzZXJEYXRlRm9ybWF0IHx8IG51bGw7XG4gIH1cbiAgLyoqXG4gICAqIOaXtumXtOagvOW8j1xuICAgKiBsaWtlOiBISDpNTTpzc1xuICAgKi9cbiAgcHVibGljIGdldCB0aW1lRm9ybWF0KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuaTE4blNldHRpbmcgJiYgdGhpcy5pMThuU2V0dGluZy51c2VyVGltZUZvcm1hdCB8fCBudWxsO1xuICB9XG4gIHB1YmxpYyBnZXQgZGF0ZVRpbWVGb3JtYXQoKTogc3RyaW5nIHtcbiAgICBjb25zdCBkYXRlRm9ybWF0ID0gdGhpcy5pMThuU2V0dGluZyAmJiB0aGlzLmkxOG5TZXR0aW5nLnVzZXJEYXRlRm9ybWF0IHx8ICd5eXl5LU1NLWRkJztcbiAgICBjb25zdCB0aW1lRm9ybWF0ID0gdGhpcy5pMThuU2V0dGluZyAmJiB0aGlzLmkxOG5TZXR0aW5nLnVzZXJUaW1lRm9ybWF0IHx8ICdISDptbTpzcyc7XG4gICAgcmV0dXJuIGAke2RhdGVGb3JtYXR9ICR7dGltZUZvcm1hdH1gO1xuICB9XG4gIC8qKlxuICAgKiDlnLDlnYDmoLzlvI9cbiAgICovXG4gIHB1YmxpYyBnZXQgYWRkcmVzc0Zvcm1hdCgpOiBhbnkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIC8qKlxuICAgKiDmlbDlrZfmoLzlvI9cbiAgICovXG4gIHB1YmxpYyBnZXQgbnVtYmVyRm9ybWF0KCk6IE51bWJlckZvcm1hdCB7XG4gICAgaWYgKHRoaXMuaTE4blNldHRpbmcgJiYgdGhpcy5pMThuU2V0dGluZy51c2VyTnVtYmVyRm9ybWF0KSB7XG4gICAgICBjb25zdCB1c2VyTnVtYmVyRm9ybWF0ID0gdGhpcy5pMThuU2V0dGluZy51c2VyTnVtYmVyRm9ybWF0O1xuICAgICAgY29uc3QgbnVtYmVyRm9ybWF0OiBOdW1iZXJGb3JtYXQgPSB7XG4gICAgICAgIG5lZ2F0aXZlU2lnbjogdXNlck51bWJlckZvcm1hdC5uZWdhdGl2ZVNpZ24gfHwgJy0nLFxuICAgICAgICBudW1iZXJEZWNpbWFsRGlnaXRzOiB1c2VyTnVtYmVyRm9ybWF0Lm51bWJlckRlY2ltYWxEaWdpdHMgfHwgMixcbiAgICAgICAgbnVtYmVyRGVjaW1hbFNlcGFyYXRvcjogdXNlck51bWJlckZvcm1hdC5udW1iZXJEZWNpbWFsU2VwYXJhdG9yIHx8ICcuJyxcbiAgICAgICAgbnVtYmVyR3JvdXBTZXBhcmF0b3I6IHVzZXJOdW1iZXJGb3JtYXQubnVtYmVyR3JvdXBTZXBhcmF0b3IgfHwgJywnXG4gICAgICB9O1xuICAgICAgcmV0dXJuIG51bWJlckZvcm1hdDtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgLyoqXG4gICAqIOWMuuWfn+S7o+eggVxuICAgKi9cbiAgcHVibGljIGdldCByZWdpb25Db2RlKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuaTE4blNldHRpbmcgJiYgdGhpcy5pMThuU2V0dGluZy51c2VyUmVnaW9uQ29kZSB8fCBudWxsO1xuICB9XG4gIC8qKlxuICAgKiDnlKjmiLfphY3nva5cbiAgICovXG4gIHByaXZhdGUgZ2V0IHVzZXJTZXR0aW5ncygpOiBhbnkge1xuICAgIGNvbnN0IHVzZXJTZXR0aW5ncyA9IHRoaXMuZnJtSTE4blNldHRpbmdTZXJ2aWNlICYmIHRoaXMuZnJtSTE4blNldHRpbmdTZXJ2aWNlLmdldFNldHRpbmcoKTtcbiAgICByZXR1cm4gdXNlclNldHRpbmdzO1xuICB9XG4gIHByaXZhdGUgZ2V0IHRpbWV6b25lKCkge1xuICAgIHJldHVybiB0aGlzLmkxOG5TZXR0aW5nICYmIHRoaXMuaTE4blNldHRpbmcudGltZXpvbmU7XG4gIH1cbiAgcHJpdmF0ZSBnZXQgaTE4blNldHRpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMudXNlclNldHRpbmdzICYmIHRoaXMudXNlclNldHRpbmdzLmkxOG5TZXR0aW5nO1xuICB9XG59Il19