import { VariableParseService } from '../../variable/index';
/**
 * 任务链接
 */
class TaskLink {
    /**
     * 构造函数
     */
    constructor(from, to, condition) {
        this.from = from;
        this.to = to;
        this.condition = condition;
    }
    /**
     * 是否能够
     */
    canLink(context) {
        const type = typeof this.condition;
        let canLink;
        switch (type) {
            case 'boolean':
                canLink = this.condition;
                break;
            case 'function':
                canLink = this.condition(context);
                break;
            case 'string':
                const parseService = context.frameContext.injector.get(VariableParseService);
                canLink = parseService.evaluate(this.condition, context);
                break;
            default:
                canLink = false;
                break;
        }
        return canLink;
    }
}
export { TaskLink };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFza19saW5rLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy9kZXZraXQvIiwic291cmNlcyI6WyJsaWIvY29tbWFuZC9mbG93L3Rhc2tfbGluay50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQVU1RDs7R0FFRztBQUNILE1BQU0sUUFBUTtJQW9CWjs7T0FFRztJQUNILFlBQVksSUFBWSxFQUFFLEVBQVUsRUFBRSxTQUFxQztRQUN6RSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztRQUNqQixJQUFJLENBQUMsRUFBRSxHQUFLLEVBQUUsQ0FBQztRQUNmLElBQUksQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDO0lBQzdCLENBQUM7SUFFRDs7T0FFRztJQUNJLE9BQU8sQ0FBQyxPQUF1QjtRQUNwQyxNQUFNLElBQUksR0FBRyxPQUFPLElBQUksQ0FBQyxTQUFTLENBQUM7UUFDbkMsSUFBSSxPQUFPLENBQUM7UUFDWixRQUFRLElBQUksRUFBRTtZQUNaLEtBQUssU0FBUztnQkFDWixPQUFPLEdBQUcsSUFBSSxDQUFDLFNBQW9CLENBQUM7Z0JBQ3BDLE1BQU07WUFDUixLQUFLLFVBQVU7Z0JBQ2IsT0FBTyxHQUFjLElBQUksQ0FBQyxTQUFVLENBQUMsT0FBTyxDQUFDLENBQUM7Z0JBQzlDLE1BQU07WUFDUixLQUFLLFFBQVE7Z0JBQ1gsTUFBTSxZQUFZLEdBQUcsT0FBTyxDQUFDLFlBQVksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUF1QixvQkFBb0IsQ0FBQyxDQUFDO2dCQUNuRyxPQUFPLEdBQUcsWUFBWSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsU0FBbUIsRUFBRSxPQUFPLENBQUMsQ0FBQztnQkFDbkUsTUFBTTtZQUNSO2dCQUNFLE9BQU8sR0FBRyxLQUFLLENBQUM7Z0JBQ2hCLE1BQU07U0FDVDtRQUNELE9BQU8sT0FBTyxDQUFDO0lBQ2pCLENBQUM7Q0FDRjtBQUVELE9BQU8sRUFBWSxRQUFRLEVBQUUsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgVmFyaWFibGVQYXJzZVNlcnZpY2UgfSBmcm9tICcuLi8uLi92YXJpYWJsZS9pbmRleCc7XHJcbmltcG9ydCB7IENvbW1hbmRDb250ZXh0IH0gZnJvbSAnLi4vY29tbWFuZF9jb250ZXh0JztcclxuXHJcbi8qKlxyXG4gKiDku7vliqHlh73mlbBcclxuICogQHBhcmFtcyByZXN1bHQg5LiK5LiA5q2l5omn6KGM57uT5p6cXHJcbiAqIEBwYXJhbXMgY29udGV4dCDmiafooYzkuIrkuIvmlodcclxuICovXHJcbnR5cGUgTGlua0Z1bmMgPSAoY29udGV4dDogQ29tbWFuZENvbnRleHQpID0+IGJvb2xlYW47XHJcblxyXG4vKipcclxuICog5Lu75Yqh6ZO+5o6lXHJcbiAqL1xyXG5jbGFzcyBUYXNrTGluayB7XHJcblxyXG4gIC8qKlxyXG4gICAqIOa6kOS7u+WKoVxyXG4gICAqL1xyXG4gIGZyb206IHN0cmluZztcclxuXHJcbiAgLyoqXHJcbiAgICog55uu5qCH5Lu75YqhXHJcbiAgICovXHJcbiAgdG86IHN0cmluZztcclxuXHJcbiAgLyoqXHJcbiAgICog5omn6KGM5p2h5Lu2XHJcbiAgICogMeOAgeihqOi+vuW8j++8m1xyXG4gICAqIDLjgIHluIPlsJTlgLzvvJtcclxuICAgKiAz44CB5Ye95pWwXHJcbiAgICovXHJcbiAgY29uZGl0aW9uOiBzdHJpbmcgfCBib29sZWFufCBMaW5rRnVuYztcclxuXHJcbiAgLyoqXHJcbiAgICog5p6E6YCg5Ye95pWwXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoZnJvbTogc3RyaW5nLCB0bzogc3RyaW5nLCBjb25kaXRpb246IHN0cmluZyB8IGJvb2xlYW58IExpbmtGdW5jKSB7XHJcbiAgICB0aGlzLmZyb20gPSBmcm9tO1xyXG4gICAgdGhpcy50byAgID0gdG87XHJcbiAgICB0aGlzLmNvbmRpdGlvbiA9IGNvbmRpdGlvbjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOaYr+WQpuiDveWkn1xyXG4gICAqL1xyXG4gIHB1YmxpYyBjYW5MaW5rKGNvbnRleHQ6IENvbW1hbmRDb250ZXh0KTogYm9vbGVhbiB7XHJcbiAgICBjb25zdCB0eXBlID0gdHlwZW9mIHRoaXMuY29uZGl0aW9uO1xyXG4gICAgbGV0IGNhbkxpbms7XHJcbiAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgY2FzZSAnYm9vbGVhbic6XHJcbiAgICAgICAgY2FuTGluayA9IHRoaXMuY29uZGl0aW9uIGFzIGJvb2xlYW47XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ2Z1bmN0aW9uJzpcclxuICAgICAgICBjYW5MaW5rID0gKDxMaW5rRnVuYz50aGlzLmNvbmRpdGlvbikoY29udGV4dCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ3N0cmluZyc6XHJcbiAgICAgICAgY29uc3QgcGFyc2VTZXJ2aWNlID0gY29udGV4dC5mcmFtZUNvbnRleHQuaW5qZWN0b3IuZ2V0PFZhcmlhYmxlUGFyc2VTZXJ2aWNlPihWYXJpYWJsZVBhcnNlU2VydmljZSk7XHJcbiAgICAgICAgY2FuTGluayA9IHBhcnNlU2VydmljZS5ldmFsdWF0ZSh0aGlzLmNvbmRpdGlvbiBhcyBzdHJpbmcsIGNvbnRleHQpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIGNhbkxpbmsgPSBmYWxzZTtcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuICAgIHJldHVybiBjYW5MaW5rO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IHsgTGlua0Z1bmMsIFRhc2tMaW5rIH07XHJcbiJdfQ==