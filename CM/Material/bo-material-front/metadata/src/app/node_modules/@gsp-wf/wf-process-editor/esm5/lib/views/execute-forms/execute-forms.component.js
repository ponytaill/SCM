/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, HostBinding, Output, EventEmitter, Input, ViewChild, TemplateRef, ElementRef, ComponentFactoryResolver, Injector } from '@angular/core';
import { of } from 'rxjs/observable/of';
import { FormBuilder } from '@angular/forms';
import { ExecuteFormsUIState } from './execute-forms.uistate';
import { ExecuteFormsViewModel } from './execute-forms.viewmodel';
import { ExecuteFormsRepository } from './execute-forms.repository';
import { ExecuteFormModel, ActualParameter } from './entities/execute-form.entity';
import { BsModalService } from '@farris/ui-modal';
import { AddExecuteFormComponent } from './add-execute-form/add-execute-form.component';
import { FormConfigContainerComponent } from './form-config-container/form-config-container.component';
import { ParameterSettingComponent } from './parameter-setting/parameter-setting.component';
import { switchMap } from 'rxjs/operators';
var ExecuteFormsComponent = /** @class */ (function () {
    // *******************************************************
    function ExecuteFormsComponent(formBuilder, uistate, viewmodel, resolver, injector, modalService) {
        this.formBuilder = formBuilder;
        this.uistate = uistate;
        this.viewmodel = viewmodel;
        this.resolver = resolver;
        this.injector = injector;
        this.modalService = modalService;
        this.modalConfig = {
            title: '表单定义',
            width: 794,
            height: 505,
            showButtons: true
        };
        this.cls = 'farris-main-area flex-column';
        this.style = '#FFF';
        this.closeModal = new EventEmitter();
        this.submitModal = new EventEmitter();
        this.editorParams = {};
        this.tab = 'web';
        this.groupIcon = '<i class="f-icon f-icon-lookup"></i>';
        this.cols = [];
        this.showMethodTab = true;
        this.form = new ExecuteFormModel();
    }
    Object.defineProperty(ExecuteFormsComponent.prototype, "value", {
        set: /**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            if (item) {
                /** @type {?} */
                var paramArray_1 = new Array();
                item.ActualParameters.forEach((/**
                 * @param {?} a
                 * @return {?}
                 */
                function (a) {
                    /** @type {?} */
                    var para = new ActualParameter();
                    para.Name = a.Name;
                    para.Value = a.Value;
                    paramArray_1.push(para);
                }));
                this.form.ActualParameters = paramArray_1;
                this.form.Id = item.Id;
                this.form.Name = item.Name;
                this.form.ComponentId = item.ComponentId;
                this.form.formFormatId = item.formFormatId;
                this.form.formatConfigId = item.formatConfigId;
                this.form.FormType = item.FormType;
                this.form.TerminalType = item.TerminalType;
            }
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    ExecuteFormsComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        // this.editCSS();
    };
    /**
     * @return {?}
     */
    ExecuteFormsComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.location = this.editorParams.location;
        this.tab = this.editorParams.tab;
        if (this.location === 'userActivity') {
            this.showMethodTab = true;
        }
        else {
            this.showMethodTab = false;
        }
    };
    /**
     * @return {?}
     */
    ExecuteFormsComponent.prototype.clickOK = /**
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var data = new ExecuteFormModel();
        this.getForm().subscribe((/**
         * @param {?} re
         * @return {?}
         */
        function (re) {
            if (!re.result) {
                return;
            }
            data = re.form;
            /** @type {?} */
            var object = { value: data, parameters: null };
            _this.submitModal.emit(object);
        }));
    };
    /**
     * @return {?}
     */
    ExecuteFormsComponent.prototype.clickCancel = /**
     * @return {?}
     */
    function () {
        this.closeModal.emit();
    };
    // tabChange(data) {
    //   this.tab = data.nextId;
    // }
    // editCSS() {
    //   this.configSection.nativeElement.querySelector('div.f-section-header').classList.add('mb-0');
    // }
    // tabChange(data) {
    //   this.tab = data.nextId;
    // }
    // editCSS() {
    //   this.configSection.nativeElement.querySelector('div.f-section-header').classList.add('mb-0');
    // }
    /**
     * @private
     * @return {?}
     */
    ExecuteFormsComponent.prototype.getForm = 
    // tabChange(data) {
    //   this.tab = data.nextId;
    // }
    // editCSS() {
    //   this.configSection.nativeElement.querySelector('div.f-section-header').classList.add('mb-0');
    // }
    /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.form.ComponentId) {
            return of({ result: true, form: this.form });
        }
        else if (this.form.formFormatId) {
            return this.configContainer.submit().pipe(switchMap((/**
             * @param {?} re
             * @return {?}
             */
            function (re) {
                if (re.result) {
                    _this.form.formatConfigId = re.configId;
                    return of({ result: true, form: _this.form });
                }
                else {
                    return of({ result: false, form: _this.form });
                }
            })));
        }
        else {
            return of({ result: true, form: null });
        }
    };
    /**
     * 参数设置
     */
    /**
     * 参数设置
     * @return {?}
     */
    ExecuteFormsComponent.prototype.parametersSet = /**
     * 参数设置
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var compFactory = this.resolver.resolveComponentFactory(ParameterSettingComponent);
        /** @type {?} */
        var compRef = compFactory.create(this.injector);
        compRef.instance.mode = 'bpmn';
        if (this.tab === 'web') {
            if (this.form.ComponentId) {
                compRef.instance.showFormType = true;
                compRef.instance.formType = this.form.FormType;
            }
            compRef.instance.parameters = tslib_1.__spread(this.form.ActualParameters.map((/**
             * @param {?} p
             * @return {?}
             */
            function (p) { return Object.assign({}, p); })));
        }
        else {
            compRef.instance.parameters = tslib_1.__spread(this.form.ActualParameters.map((/**
             * @param {?} p
             * @return {?}
             */
            function (p) { return Object.assign({}, p); })));
        }
        /** @type {?} */
        var modalConfig = {
            title: '参数设置',
            width: 620,
            height: 400,
            showButtons: true,
            buttons: compRef.instance.modalFooter
        };
        /** @type {?} */
        var dialog = this.modalService.show(compRef, modalConfig);
        compRef.instance.submit.subscribe((/**
         * @param {?} re
         * @return {?}
         */
        function (re) {
            if (_this.tab === 'web') {
                _this.form.ActualParameters = re.parameters;
                _this.form.FormType = re.formType;
            }
            else {
                _this.form.ActualParameters = re.parameters;
            }
            dialog.close();
        }));
        compRef.instance.cancel.subscribe((/**
         * @param {?} re
         * @return {?}
         */
        function (re) {
            dialog.close();
        }));
    };
    /**
     * 选择表单定义
     */
    /**
     * 选择表单定义
     * @return {?}
     */
    ExecuteFormsComponent.prototype.selectExecuteForm = /**
     * 选择表单定义
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var compFactory = this.resolver.resolveComponentFactory(AddExecuteFormComponent);
        /** @type {?} */
        var compRef = compFactory.create(this.injector);
        compRef.instance.tab = this.tab;
        /** @type {?} */
        var modalConfig = {
            title: '表单定义列表',
            width: 650,
            height: 400,
            showButtons: true,
            buttons: compRef.instance.modalFooter
        };
        /** @type {?} */
        var dialog = this.modalService.show(compRef, modalConfig);
        compRef.instance.submit.subscribe((/**
         * @param {?} re
         * @return {?}
         */
        function (re) {
            _this.form = re;
            dialog.close();
        }));
        compRef.instance.cancel.subscribe((/**
         * @param {?} re
         * @return {?}
         */
        function (re) {
            dialog.close();
        }));
    };
    /**
     * @return {?}
     */
    ExecuteFormsComponent.prototype.clear = /**
     * @return {?}
     */
    function () {
        this.form = new ExecuteFormModel();
    };
    ExecuteFormsComponent.decorators = [
        { type: Component, args: [{
                    selector: 'app-execute-forms',
                    template: "  <!-- <div class=\"h-100 farris-split-section m-2\">\r\n    <farris-tabs #tabs [value]=\"'web'\" [fill]=\"true\" (tabChange)=\"tabChange($event)\" [contentFill]=\"true\" class=\"f-utils-fill h-100\">\r\n      <farris-tab title=\"Web\u8868\u5355\" [show]=\"true\" [id]=\"'web'\" class=\"h-100\">\r\n        <ng-template #content>\r\n          <farris-section class=\"f-section-form f-section-in-mainsubcard pt-0\" [enableAccordion]=\"'default'\" [mainTitle]=\"'\u8868\u5355\u5B9A\u4E49'\"\r\n            [subTitle]=\"''\" [enableMaximize]=\"false\">\r\n            <div class=\"farris-form farris-form-controls-inline farris-form-auto f-form-lable-auto\">\r\n              <div class=\"f-section-formgroup-inputs\">\r\n                <div class=\"col-12 col-md-10\">\r\n                  <div class=\"farris-group-wrap\">\r\n                    <div class=\"form-group farris-form-group mb-0\">\r\n                      <div class=\"farris-input-wrap pl-4\">\r\n                        <input-group class=\"form-control\" style=\"width: 100%;padding:0;border:0;\" [enableClear]=\"true\"\r\n                          [showButtonWhenDisabled]=\"false\" [(ngModel)]=\"webForm.Name\" name=\"webForm\" [placeholder]=\"'\u8BF7\u9009\u62E9'\"\r\n                          [editable]=\"false\" (clickHandle)=\"selectExecuteForm()\" (clear)=\"clear()\" [groupText]=\"groupIcon\">\r\n                        </input-group>\r\n                        <div class=\"farris-feedback valid-feedback\"></div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class=\"col-12 col-md-2\">\r\n                  <div class=\"farris-group-wrap\">\r\n                    <div class=\"form-group farris-form-group mb-0\">\r\n                      <div class=\"farris-input-wrap\">\r\n                        <button [disabled]=\"!webForm.ComponentId && !webForm.formFormatId\" class=\"btn-sm btn-secondary btn\" \r\n                          (click)=\"parametersSet()\">\r\n                          \u8868\u5355\u53C2\u6570\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </farris-section>\r\n          <farris-section #webConfigSection class=\"f-section-tabs f-section-in-mainsubcard pb-0 pt-1\" [enableAccordion]=\"''\" [mainTitle]=\"'\u8868\u5355\u683C\u5F0F\u8BBE\u7F6E'\"\r\n            [subTitle]=\"''\" [enableMaximize]=\"false\" [fill]=\"true\">\r\n            <lib-form-config-container #webConfigContainer *ngIf=\"webForm.formFormatId; else empty\" \r\n            [formFormatId]=\"webForm.formFormatId\" [formatConfigId]=\"webForm.formatConfigId\" [showMethodTab]=\"showMethodTab\" class=\"h-100\"></lib-form-config-container>\r\n          </farris-section>\r\n        </ng-template>\r\n      </farris-tab>\r\n      <farris-tab title=\"\u79FB\u52A8\u8868\u5355\" [id]=\"'mobile'\" class=\"h-100\">\r\n        <ng-template #content>\r\n          <farris-section class=\"f-section-form f-section-in-mainsubcard pt-0\" [enableAccordion]=\"'default'\" [mainTitle]=\"'\u8868\u5355\u5B9A\u4E49'\"\r\n            [subTitle]=\"''\" [enableMaximize]=\"false\">\r\n            <div class=\"farris-form farris-form-controls-inline farris-form-auto f-form-lable-auto\">\r\n              <div class=\"f-section-formgroup-inputs\">\r\n                <div class=\"col-12 col-md-10\">\r\n                  <div class=\"farris-group-wrap\">\r\n                    <div class=\"form-group farris-form-group mb-0\">\r\n                      <div class=\"farris-input-wrap pl-4\">\r\n                        <input-group class=\"form-control\" style=\"width: 100%;padding:0;border:0;\" [enableClear]=\"true\"\r\n                          [showButtonWhenDisabled]=\"false\" [(ngModel)]=\"mobileForm.Name\" name=\"mobileForm\" [placeholder]=\"'\u8BF7\u9009\u62E9'\"\r\n                          [editable]=\"false\" (clickHandle)=\"selectExecuteForm()\" (clear)=\"clear()\" [groupText]=\"groupIcon\">\r\n                        </input-group>\r\n                        <div class=\"farris-feedback valid-feedback\"></div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class=\"col-12 col-md-2\">\r\n                  <div class=\"farris-group-wrap\">\r\n                    <div class=\"form-group farris-form-group mb-0\">\r\n                      <div class=\"farris-input-wrap\">\r\n                        <button [disabled]=\"!mobileForm.ComponentId && !mobileForm.formFormatId\" class=\"btn-sm btn-secondary btn\"\r\n                          (click)=\"parametersSet()\">\r\n                          \u8868\u5355\u53C2\u6570\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </farris-section>\r\n          <farris-section #appConfigSection class=\"f-section-tabs f-section-in-mainsubcard pb-0 pt-1\" [enableAccordion]=\"''\"\r\n            [mainTitle]=\"'\u8868\u5355\u683C\u5F0F\u8BBE\u7F6E'\" [subTitle]=\"''\" [enableMaximize]=\"false\" [fill]=\"true\">\r\n            <lib-form-config-container #appConfigContainer *ngIf=\"mobileForm.formFormatId; else empty\"\r\n              [formFormatId]=\"mobileForm.formFormatId\" [formatConfigId]=\"mobileForm.formatConfigId\" [showMethodTab]=\"showMethodTab\" class=\"h-100\">\r\n            </lib-form-config-container>\r\n          </farris-section>\r\n        </ng-template>\r\n      </farris-tab>\r\n    </farris-tabs>\r\n  </div> -->\r\n  \r\n<ng-template #iconSelectFooter>\r\n  <button type=\"button\" class=\"btn btn-primary btn-sm mx-2\" (click)=\"clickOK()\">\u786E\u5B9A</button>\r\n  <button type=\"button\" class=\"btn btn-secondary btn-sm\" (click)=\"clickCancel()\">\u53D6\u6D88</button>\r\n</ng-template>\r\n\r\n<ng-template #empty>\r\n  <div class=\"f-utils-fill-flex-column h-100\">\r\n    <div class=\"f-datagrid-norecords\" style=\"height: 100%;\">\r\n      <div class=\"f-datagrid-norecords-content w-100\">\u6682\u65E0\u8868\u5355\u683C\u5F0F</div>\r\n    </div>\r\n  </div>\r\n</ng-template>\r\n\r\n<div class=\"f-page f-page-is-managelist\">\r\n  <div class=\"f-page-main mx-3\">\r\n    <div class=\"farris-form farris-form-controls-inline farris-form-auto f-form-lable-auto\">\r\n      <div class=\"f-section-formgroup-inputs\">\r\n        <div class=\"col-12 col-md-5 px-0 my-2\">\r\n          <div class=\"farris-group-wrap\">\r\n            <div class=\"form-group farris-form-group mb-0\">\r\n              <div class=\"farris-input-wrap\">\r\n                <input-group class=\"form-control\" style=\"width: 100%;padding:0;border:0;\" [enableClear]=\"true\"\r\n                  [showButtonWhenDisabled]=\"false\" [(ngModel)]=\"form.Name\" name=\"form\" [placeholder]=\"'\u8BF7\u9009\u62E9'\"\r\n                  [editable]=\"false\" (clickHandle)=\"selectExecuteForm()\" (clear)=\"clear()\" [groupText]=\"groupIcon\">\r\n                </input-group>\r\n                <div class=\"farris-feedback valid-feedback\"></div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-12 col-md-2 my-2 px-0\">\r\n          <div class=\"farris-group-wrap\" style=\"padding-top: 2px;\">\r\n            <div class=\"form-group farris-form-group mb-0\">\r\n              <div class=\"farris-input-wrap\">\r\n                <farris-button [disabled]=\"!form.ComponentId && !form.formFormatId\" [type]=\"'link'\" (click)=\"parametersSet()\">\r\n                  \u53C2\u6570\r\n                </farris-button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <lib-form-config-container #configContainer\r\n      [formFormatId]=\"form.formFormatId\" [formatConfigId]=\"form.formatConfigId\" [showMethodTab]=\"showMethodTab\"\r\n      class=\"h-100\"></lib-form-config-container>\r\n  </div>\r\n</div>\r\n\r\n\r\n\r\n\r\n",
                    providers: [ExecuteFormsUIState, ExecuteFormsViewModel, ExecuteFormsRepository],
                    styles: [""]
                }] }
    ];
    /** @nocollapse */
    ExecuteFormsComponent.ctorParameters = function () { return [
        { type: FormBuilder },
        { type: ExecuteFormsUIState },
        { type: ExecuteFormsViewModel },
        { type: ComponentFactoryResolver },
        { type: Injector },
        { type: BsModalService }
    ]; };
    ExecuteFormsComponent.propDecorators = {
        cls: [{ type: HostBinding, args: ['class',] }],
        style: [{ type: HostBinding, args: ['style.background',] }],
        closeModal: [{ type: Output }],
        submitModal: [{ type: Output }],
        value: [{ type: Input }],
        editorParams: [{ type: Input }],
        modalFooter: [{ type: ViewChild, args: ['iconSelectFooter',] }],
        configContainer: [{ type: ViewChild, args: ['configContainer',] }],
        configSection: [{ type: ViewChild, args: ['configSection', { read: ElementRef },] }]
    };
    return ExecuteFormsComponent;
}());
export { ExecuteFormsComponent };
if (false) {
    /** @type {?} */
    ExecuteFormsComponent.prototype.modalConfig;
    /** @type {?} */
    ExecuteFormsComponent.prototype.cls;
    /** @type {?} */
    ExecuteFormsComponent.prototype.style;
    /** @type {?} */
    ExecuteFormsComponent.prototype.closeModal;
    /** @type {?} */
    ExecuteFormsComponent.prototype.submitModal;
    /** @type {?} */
    ExecuteFormsComponent.prototype.editorParams;
    /** @type {?} */
    ExecuteFormsComponent.prototype.modalFooter;
    /** @type {?} */
    ExecuteFormsComponent.prototype.configContainer;
    /** @type {?} */
    ExecuteFormsComponent.prototype.configSection;
    /** @type {?} */
    ExecuteFormsComponent.prototype.form;
    /** @type {?} */
    ExecuteFormsComponent.prototype.tab;
    /** @type {?} */
    ExecuteFormsComponent.prototype.groupIcon;
    /** @type {?} */
    ExecuteFormsComponent.prototype.cols;
    /** @type {?} */
    ExecuteFormsComponent.prototype.location;
    /** @type {?} */
    ExecuteFormsComponent.prototype.showMethodTab;
    /**
     * @type {?}
     * @private
     */
    ExecuteFormsComponent.prototype.formBuilder;
    /** @type {?} */
    ExecuteFormsComponent.prototype.uistate;
    /** @type {?} */
    ExecuteFormsComponent.prototype.viewmodel;
    /**
     * @type {?}
     * @private
     */
    ExecuteFormsComponent.prototype.resolver;
    /**
     * @type {?}
     * @private
     */
    ExecuteFormsComponent.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    ExecuteFormsComponent.prototype.modalService;
}
var ExecuteFormsConverter = /** @class */ (function () {
    function ExecuteFormsConverter() {
    }
    /**
     * @param {?} data
     * @return {?}
     */
    ExecuteFormsConverter.prototype.convertTo = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        if (data) {
            return data.Name;
        }
        else {
            return '（未设置）';
        }
    };
    return ExecuteFormsConverter;
}());
export { ExecuteFormsConverter };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXhlY3V0ZS1mb3Jtcy5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZ3NwLXdmL3dmLXByb2Nlc3MtZWRpdG9yLyIsInNvdXJjZXMiOlsibGliL3ZpZXdzL2V4ZWN1dGUtZm9ybXMvZXhlY3V0ZS1mb3Jtcy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFVLFdBQVcsRUFBRSxNQUFNLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsV0FBVyxFQUFFLFVBQVUsRUFBRSx3QkFBd0IsRUFBRSxRQUFRLEVBQW1DLE1BQU0sZUFBZSxDQUFDO0FBRXJNLE9BQU8sRUFBRSxFQUFFLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUN4QyxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDN0MsT0FBTyxFQUFFLG1CQUFtQixFQUFFLE1BQU0seUJBQXlCLENBQUM7QUFDOUQsT0FBTyxFQUFFLHFCQUFxQixFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFDbEUsT0FBTyxFQUFFLHNCQUFzQixFQUFFLE1BQU0sNEJBQTRCLENBQUM7QUFDcEUsT0FBTyxFQUFFLGdCQUFnQixFQUFnQixlQUFlLEVBQUUsTUFBTSxnQ0FBZ0MsQ0FBQztBQUNqRyxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFDbEQsT0FBTyxFQUFFLHVCQUF1QixFQUFFLE1BQU0sK0NBQStDLENBQUM7QUFDeEYsT0FBTyxFQUFFLDRCQUE0QixFQUFFLE1BQU0seURBQXlELENBQUM7QUFDdkcsT0FBTyxFQUFFLHlCQUF5QixFQUFFLE1BQU0saURBQWlELENBQUM7QUFFNUYsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBRTNDO0lBMERFLDBEQUEwRDtJQUMxRCwrQkFDVSxXQUF3QixFQUN6QixPQUE0QixFQUM1QixTQUFnQyxFQUMvQixRQUFrQyxFQUNsQyxR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QixNQUFNOzhCQUNOLE1BQU07d0JBRU4sS0FBSzsrQkFvQkwsS0FBSzs4QkFDTCxTQUFTLFNBQUMsa0JBQWtCO2tDQUM1QixTQUFTLFNBQUMsaUJBQWlCO2dDQUUzQixTQUFTLFNBQUMsZUFBZSxFQUFFLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRTs7SUFrSmxELDRCQUFDO0NBQUEsQUE5TEQsSUE4TEM7U0F4TFkscUJBQXFCOzs7SUFDaEMsNENBS0U7O0lBRUYsb0NBQ3FDOztJQUNyQyxzQ0FBZ0Q7O0lBQ2hELDJDQUErQzs7SUFDL0MsNENBQWdEOztJQXNCaEQsNkNBQWdDOztJQUNoQyw0Q0FBNkQ7O0lBQzdELGdEQUE0RTs7SUFFNUUsOENBQWlGOztJQUVqRixxQ0FBdUI7O0lBRXZCLG9DQUE4Qjs7SUFFOUIsMENBQW1EOztJQUVuRCxxQ0FBVTs7SUFFVix5Q0FBdUQ7O0lBRXZELDhDQUFxQjs7Ozs7SUFJbkIsNENBQWdDOztJQUNoQyx3Q0FBbUM7O0lBQ25DLDBDQUF1Qzs7Ozs7SUFDdkMseUNBQTBDOzs7OztJQUMxQyx5Q0FBMEI7Ozs7O0lBQzFCLDZDQUFvQzs7QUE4SHhDO0lBQ0U7SUFBZ0IsQ0FBQzs7Ozs7SUFFakIseUNBQVM7Ozs7SUFBVCxVQUFVLElBQUk7UUFDWixJQUFJLElBQUksRUFBRTtZQUNSLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQztTQUNsQjthQUFNO1lBQ0wsT0FBTyxPQUFPLENBQUM7U0FDaEI7SUFDSCxDQUFDO0lBQ0gsNEJBQUM7QUFBRCxDQUFDLEFBVkQsSUFVQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBIb3N0QmluZGluZywgT3V0cHV0LCBFdmVudEVtaXR0ZXIsIElucHV0LCBWaWV3Q2hpbGQsIFRlbXBsYXRlUmVmLCBFbGVtZW50UmVmLCBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsIEluamVjdG9yLCBBZnRlclZpZXdJbml0LCBBZnRlckNvbnRlbnRJbml0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IFR5cGVDb252ZXJ0ZXIgfSBmcm9tICdAZmFycmlzL3VpLXByb3BlcnR5LXBhbmVsJztcclxuaW1wb3J0IHsgb2YgfSBmcm9tICdyeGpzL29ic2VydmFibGUvb2YnO1xyXG5pbXBvcnQgeyBGb3JtQnVpbGRlciB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcclxuaW1wb3J0IHsgRXhlY3V0ZUZvcm1zVUlTdGF0ZSB9IGZyb20gJy4vZXhlY3V0ZS1mb3Jtcy51aXN0YXRlJztcclxuaW1wb3J0IHsgRXhlY3V0ZUZvcm1zVmlld01vZGVsIH0gZnJvbSAnLi9leGVjdXRlLWZvcm1zLnZpZXdtb2RlbCc7XHJcbmltcG9ydCB7IEV4ZWN1dGVGb3Jtc1JlcG9zaXRvcnkgfSBmcm9tICcuL2V4ZWN1dGUtZm9ybXMucmVwb3NpdG9yeSc7XHJcbmltcG9ydCB7IEV4ZWN1dGVGb3JtTW9kZWwsIFRlcm1pbmFsVHlwZSwgQWN0dWFsUGFyYW1ldGVyIH0gZnJvbSAnLi9lbnRpdGllcy9leGVjdXRlLWZvcm0uZW50aXR5JztcclxuaW1wb3J0IHsgQnNNb2RhbFNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLW1vZGFsJztcclxuaW1wb3J0IHsgQWRkRXhlY3V0ZUZvcm1Db21wb25lbnQgfSBmcm9tICcuL2FkZC1leGVjdXRlLWZvcm0vYWRkLWV4ZWN1dGUtZm9ybS5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBGb3JtQ29uZmlnQ29udGFpbmVyQ29tcG9uZW50IH0gZnJvbSAnLi9mb3JtLWNvbmZpZy1jb250YWluZXIvZm9ybS1jb25maWctY29udGFpbmVyLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IFBhcmFtZXRlclNldHRpbmdDb21wb25lbnQgfSBmcm9tICcuL3BhcmFtZXRlci1zZXR0aW5nL3BhcmFtZXRlci1zZXR0aW5nLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IE9ic2VydmFibGUsIFN1YmplY3QsIGZvcmtKb2luIH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IHN3aXRjaE1hcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnYXBwLWV4ZWN1dGUtZm9ybXMnLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi9leGVjdXRlLWZvcm1zLmNvbXBvbmVudC5odG1sJyxcclxuICBzdHlsZVVybHM6IFsnLi9leGVjdXRlLWZvcm1zLmNvbXBvbmVudC5jc3MnXSxcclxuICBwcm92aWRlcnM6IFtFeGVjdXRlRm9ybXNVSVN0YXRlLCBFeGVjdXRlRm9ybXNWaWV3TW9kZWwsIEV4ZWN1dGVGb3Jtc1JlcG9zaXRvcnldXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBFeGVjdXRlRm9ybXNDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyVmlld0luaXQge1xyXG4gIG1vZGFsQ29uZmlnID0ge1xyXG4gICAgdGl0bGU6ICfooajljZXlrprkuYknLFxyXG4gICAgd2lkdGg6IDc5NCxcclxuICAgIGhlaWdodDogNTA1LFxyXG4gICAgc2hvd0J1dHRvbnM6IHRydWVcclxuICB9O1xyXG5cclxuICBASG9zdEJpbmRpbmcoJ2NsYXNzJylcclxuICBjbHMgPSAnZmFycmlzLW1haW4tYXJlYSBmbGV4LWNvbHVtbic7XHJcbiAgQEhvc3RCaW5kaW5nKCdzdHlsZS5iYWNrZ3JvdW5kJykgc3R5bGUgPSAnI0ZGRic7XHJcbiAgQE91dHB1dCgpIGNsb3NlTW9kYWwgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuICBAT3V0cHV0KCkgc3VibWl0TW9kYWwgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuXHJcbiAgQElucHV0KClcclxuICBzZXQgdmFsdWUoaXRlbTogRXhlY3V0ZUZvcm1Nb2RlbCkge1xyXG4gICAgaWYgKGl0ZW0pIHtcclxuICAgICAgY29uc3QgcGFyYW1BcnJheSA9IG5ldyBBcnJheTxBY3R1YWxQYXJhbWV0ZXI+KCk7XHJcbiAgICAgIGl0ZW0uQWN0dWFsUGFyYW1ldGVycy5mb3JFYWNoKGEgPT4ge1xyXG4gICAgICAgIGNvbnN0IHBhcmEgPSBuZXcgQWN0dWFsUGFyYW1ldGVyKCk7XHJcbiAgICAgICAgcGFyYS5OYW1lID0gYS5OYW1lO1xyXG4gICAgICAgIHBhcmEuVmFsdWUgPSBhLlZhbHVlO1xyXG4gICAgICAgIHBhcmFtQXJyYXkucHVzaChwYXJhKTtcclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMuZm9ybS5BY3R1YWxQYXJhbWV0ZXJzID0gcGFyYW1BcnJheTtcclxuICAgICAgdGhpcy5mb3JtLklkID0gaXRlbS5JZDtcclxuICAgICAgdGhpcy5mb3JtLk5hbWUgPSBpdGVtLk5hbWU7XHJcbiAgICAgIHRoaXMuZm9ybS5Db21wb25lbnRJZCA9IGl0ZW0uQ29tcG9uZW50SWQ7XHJcbiAgICAgIHRoaXMuZm9ybS5mb3JtRm9ybWF0SWQgPSBpdGVtLmZvcm1Gb3JtYXRJZDtcclxuICAgICAgdGhpcy5mb3JtLmZvcm1hdENvbmZpZ0lkID0gaXRlbS5mb3JtYXRDb25maWdJZDtcclxuICAgICAgdGhpcy5mb3JtLkZvcm1UeXBlID0gaXRlbS5Gb3JtVHlwZTtcclxuICAgICAgdGhpcy5mb3JtLlRlcm1pbmFsVHlwZSA9IGl0ZW0uVGVybWluYWxUeXBlO1xyXG4gICAgfVxyXG4gIH1cclxuICBASW5wdXQoKSBlZGl0b3JQYXJhbXM6IGFueSA9IHt9O1xyXG4gIEBWaWV3Q2hpbGQoJ2ljb25TZWxlY3RGb290ZXInKSBtb2RhbEZvb3RlcjogVGVtcGxhdGVSZWY8YW55PjtcclxuICBAVmlld0NoaWxkKCdjb25maWdDb250YWluZXInKSBjb25maWdDb250YWluZXI6IEZvcm1Db25maWdDb250YWluZXJDb21wb25lbnQ7XHJcblxyXG4gIEBWaWV3Q2hpbGQoJ2NvbmZpZ1NlY3Rpb24nLCB7IHJlYWQ6IEVsZW1lbnRSZWYgfSkgY29uZmlnU2VjdGlvbjogRWxlbWVudFJlZjxhbnk+O1xyXG5cclxuICBmb3JtOiBFeGVjdXRlRm9ybU1vZGVsO1xyXG5cclxuICB0YWI6ICd3ZWInIHwgJ21vYmlsZScgPSAnd2ViJztcclxuXHJcbiAgZ3JvdXBJY29uID0gJzxpIGNsYXNzPVwiZi1pY29uIGYtaWNvbi1sb29rdXBcIj48L2k+JztcclxuXHJcbiAgY29scyA9IFtdO1xyXG5cclxuICBsb2NhdGlvbjogJ3VzZXJBY3Rpdml0eScgfCAncHJvY2VzcycgfCAnc3RhcnRBY3Rpdml0eSc7XHJcblxyXG4gIHNob3dNZXRob2RUYWIgPSB0cnVlO1xyXG5cclxuICAvLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBwcml2YXRlIGZvcm1CdWlsZGVyOiBGb3JtQnVpbGRlcixcclxuICAgIHB1YmxpYyB1aXN0YXRlOiBFeGVjdXRlRm9ybXNVSVN0YXRlLFxyXG4gICAgcHVibGljIHZpZXdtb2RlbDogRXhlY3V0ZUZvcm1zVmlld01vZGVsLFxyXG4gICAgcHJpdmF0ZSByZXNvbHZlcjogQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLFxyXG4gICAgcHJpdmF0ZSBpbmplY3RvcjogSW5qZWN0b3IsXHJcbiAgICBwcml2YXRlIG1vZGFsU2VydmljZTogQnNNb2RhbFNlcnZpY2VcclxuICApIHtcclxuICAgIHRoaXMuZm9ybSA9IG5ldyBFeGVjdXRlRm9ybU1vZGVsKCk7XHJcbiAgfVxyXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpOiB2b2lkIHtcclxuICAgIC8vIHRoaXMuZWRpdENTUygpO1xyXG4gIH1cclxuXHJcbiAgbmdPbkluaXQoKSB7XHJcbiAgICB0aGlzLmxvY2F0aW9uID0gdGhpcy5lZGl0b3JQYXJhbXMubG9jYXRpb247XHJcbiAgICB0aGlzLnRhYiA9IHRoaXMuZWRpdG9yUGFyYW1zLnRhYjtcclxuICAgIGlmICh0aGlzLmxvY2F0aW9uID09PSAndXNlckFjdGl2aXR5Jykge1xyXG4gICAgICB0aGlzLnNob3dNZXRob2RUYWIgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5zaG93TWV0aG9kVGFiID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGNsaWNrT0soKSB7XHJcbiAgICBsZXQgZGF0YSA9IG5ldyBFeGVjdXRlRm9ybU1vZGVsKCk7XHJcbiAgICB0aGlzLmdldEZvcm0oKS5zdWJzY3JpYmUoKHJlOiBhbnkpID0+IHtcclxuICAgICAgaWYgKCFyZS5yZXN1bHQpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgZGF0YSA9IHJlLmZvcm07XHJcbiAgICAgIGNvbnN0IG9iamVjdCA9IHsgdmFsdWU6IGRhdGEsIHBhcmFtZXRlcnM6IG51bGwgfTtcclxuICAgICAgdGhpcy5zdWJtaXRNb2RhbC5lbWl0KG9iamVjdCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGNsaWNrQ2FuY2VsKCkge1xyXG4gICAgdGhpcy5jbG9zZU1vZGFsLmVtaXQoKTtcclxuICB9XHJcbiAgLy8gdGFiQ2hhbmdlKGRhdGEpIHtcclxuICAvLyAgIHRoaXMudGFiID0gZGF0YS5uZXh0SWQ7XHJcbiAgLy8gfVxyXG5cclxuICAvLyBlZGl0Q1NTKCkge1xyXG4gIC8vICAgdGhpcy5jb25maWdTZWN0aW9uLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcignZGl2LmYtc2VjdGlvbi1oZWFkZXInKS5jbGFzc0xpc3QuYWRkKCdtYi0wJyk7XHJcbiAgLy8gfVxyXG5cclxuICBwcml2YXRlIGdldEZvcm0oKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgIGlmICh0aGlzLmZvcm0uQ29tcG9uZW50SWQpIHtcclxuICAgICAgcmV0dXJuIG9mKHsgcmVzdWx0OiB0cnVlLCBmb3JtOiB0aGlzLmZvcm0gfSk7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuZm9ybS5mb3JtRm9ybWF0SWQpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuY29uZmlnQ29udGFpbmVyLnN1Ym1pdCgpLnBpcGUoXHJcbiAgICAgICAgc3dpdGNoTWFwKChyZTogYW55KSA9PiB7XHJcbiAgICAgICAgICBpZiAocmUucmVzdWx0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuZm9ybS5mb3JtYXRDb25maWdJZCA9IHJlLmNvbmZpZ0lkO1xyXG4gICAgICAgICAgICByZXR1cm4gb2YoeyByZXN1bHQ6IHRydWUsIGZvcm06IHRoaXMuZm9ybSB9KTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBvZih7IHJlc3VsdDogZmFsc2UsIGZvcm06IHRoaXMuZm9ybSB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICApO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIG9mKHsgcmVzdWx0OiB0cnVlLCBmb3JtOiBudWxsIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5Y+C5pWw6K6+572uXHJcbiAgICovXHJcbiAgcGFyYW1ldGVyc1NldCgpIHtcclxuICAgIGNvbnN0IGNvbXBGYWN0b3J5ID0gdGhpcy5yZXNvbHZlci5yZXNvbHZlQ29tcG9uZW50RmFjdG9yeShQYXJhbWV0ZXJTZXR0aW5nQ29tcG9uZW50KTtcclxuICAgIGNvbnN0IGNvbXBSZWYgPSBjb21wRmFjdG9yeS5jcmVhdGUodGhpcy5pbmplY3Rvcik7XHJcbiAgICBjb21wUmVmLmluc3RhbmNlLm1vZGUgPSAnYnBtbic7XHJcbiAgICBpZiAodGhpcy50YWIgPT09ICd3ZWInKSB7XHJcbiAgICAgIGlmICh0aGlzLmZvcm0uQ29tcG9uZW50SWQpIHtcclxuICAgICAgICBjb21wUmVmLmluc3RhbmNlLnNob3dGb3JtVHlwZSA9IHRydWU7XHJcbiAgICAgICAgY29tcFJlZi5pbnN0YW5jZS5mb3JtVHlwZSA9IHRoaXMuZm9ybS5Gb3JtVHlwZTtcclxuICAgICAgfVxyXG4gICAgICBjb21wUmVmLmluc3RhbmNlLnBhcmFtZXRlcnMgPSBbLi4udGhpcy5mb3JtLkFjdHVhbFBhcmFtZXRlcnMubWFwKHAgPT4gT2JqZWN0LmFzc2lnbih7fSwgcCkpXTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbXBSZWYuaW5zdGFuY2UucGFyYW1ldGVycyA9IFsuLi50aGlzLmZvcm0uQWN0dWFsUGFyYW1ldGVycy5tYXAocCA9PiBPYmplY3QuYXNzaWduKHt9LCBwKSldO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IG1vZGFsQ29uZmlnID0ge1xyXG4gICAgICB0aXRsZTogJ+WPguaVsOiuvue9ricsXHJcbiAgICAgIHdpZHRoOiA2MjAsXHJcbiAgICAgIGhlaWdodDogNDAwLFxyXG4gICAgICBzaG93QnV0dG9uczogdHJ1ZSxcclxuICAgICAgYnV0dG9uczogY29tcFJlZi5pbnN0YW5jZS5tb2RhbEZvb3RlclxyXG4gICAgfTtcclxuICAgIGNvbnN0IGRpYWxvZyA9IHRoaXMubW9kYWxTZXJ2aWNlLnNob3coY29tcFJlZiwgbW9kYWxDb25maWcpO1xyXG5cclxuICAgIGNvbXBSZWYuaW5zdGFuY2Uuc3VibWl0LnN1YnNjcmliZShyZSA9PiB7XHJcbiAgICAgIGlmICh0aGlzLnRhYiA9PT0gJ3dlYicpIHtcclxuICAgICAgICB0aGlzLmZvcm0uQWN0dWFsUGFyYW1ldGVycyA9IHJlLnBhcmFtZXRlcnM7XHJcbiAgICAgICAgdGhpcy5mb3JtLkZvcm1UeXBlID0gcmUuZm9ybVR5cGU7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5mb3JtLkFjdHVhbFBhcmFtZXRlcnMgPSByZS5wYXJhbWV0ZXJzO1xyXG4gICAgICB9XHJcbiAgICAgIGRpYWxvZy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbiAgICBjb21wUmVmLmluc3RhbmNlLmNhbmNlbC5zdWJzY3JpYmUocmUgPT4ge1xyXG4gICAgICBkaWFsb2cuY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuICAvKipcclxuICAgKiDpgInmi6nooajljZXlrprkuYlcclxuICAgKi9cclxuICBzZWxlY3RFeGVjdXRlRm9ybSgpIHtcclxuICAgIGNvbnN0IGNvbXBGYWN0b3J5ID0gdGhpcy5yZXNvbHZlci5yZXNvbHZlQ29tcG9uZW50RmFjdG9yeShBZGRFeGVjdXRlRm9ybUNvbXBvbmVudCk7XHJcbiAgICBjb25zdCBjb21wUmVmID0gY29tcEZhY3RvcnkuY3JlYXRlKHRoaXMuaW5qZWN0b3IpO1xyXG4gICAgY29tcFJlZi5pbnN0YW5jZS50YWIgPSB0aGlzLnRhYjtcclxuXHJcbiAgICBjb25zdCBtb2RhbENvbmZpZyA9IHtcclxuICAgICAgdGl0bGU6ICfooajljZXlrprkuYnliJfooagnLFxyXG4gICAgICB3aWR0aDogNjUwLFxyXG4gICAgICBoZWlnaHQ6IDQwMCxcclxuICAgICAgc2hvd0J1dHRvbnM6IHRydWUsXHJcbiAgICAgIGJ1dHRvbnM6IGNvbXBSZWYuaW5zdGFuY2UubW9kYWxGb290ZXJcclxuICAgIH07XHJcbiAgICBjb25zdCBkaWFsb2cgPSB0aGlzLm1vZGFsU2VydmljZS5zaG93KGNvbXBSZWYsIG1vZGFsQ29uZmlnKTtcclxuICAgIGNvbXBSZWYuaW5zdGFuY2Uuc3VibWl0LnN1YnNjcmliZSgocmU6IEV4ZWN1dGVGb3JtTW9kZWwpID0+IHtcclxuICAgICAgdGhpcy5mb3JtID0gcmU7XHJcbiAgICAgIGRpYWxvZy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbiAgICBjb21wUmVmLmluc3RhbmNlLmNhbmNlbC5zdWJzY3JpYmUocmUgPT4ge1xyXG4gICAgICBkaWFsb2cuY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuICBjbGVhcigpIHtcclxuICAgIHRoaXMuZm9ybSA9IG5ldyBFeGVjdXRlRm9ybU1vZGVsKCk7XHJcbiAgfVxyXG59XHJcbmV4cG9ydCBjbGFzcyBFeGVjdXRlRm9ybXNDb252ZXJ0ZXIgaW1wbGVtZW50cyBUeXBlQ29udmVydGVyIHtcclxuICBjb25zdHJ1Y3RvcigpIHsgfVxyXG5cclxuICBjb252ZXJ0VG8oZGF0YSk6IHN0cmluZyB7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4gZGF0YS5OYW1lO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuICfvvIjmnKrorr7nva7vvIknO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iXX0=