/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, Output, ViewChild, TemplateRef, EventEmitter, ElementRef, ChangeDetectorRef, Injector } from '@angular/core';
import { AssigneeInfo } from '../../entity/complete-response';
import { I18nService } from '../../service/i18n/i18n.service';
import { DialogComponent } from '@farris/ui-dialog';
import { DataTableComponent } from '@farris/ui-datatable';
import { SysFarrisLookupComponent } from '@gsp-sys/sysmgr-ui';
import { NotifyService } from '@farris/ui-notify';
import { TaskService } from '../../service/task.service';
import { WfContext } from '../../entity/wfContext';
export class AssigneeInfoComponent {
    /**
     * @param {?} i18nService
     * @param {?} notify
     * @param {?} cd
     * @param {?} taskService
     * @param {?} injector
     */
    constructor(i18nService, notify, cd, taskService, injector) {
        this.i18nService = i18nService;
        this.notify = notify;
        this.cd = cd;
        this.taskService = taskService;
        this.injector = injector;
        this.bindingData = {}; //系统帮助多选时用到
        //系统帮助多选时用到
        this.myHelpBindingData = {}; //自己的帮助多选时用到
        //已经选中的指派人
        this.assignees = []; //返回选中人的ID数组
        //返回选中人的ID数组
        this.searchAssignUserList = []; //非全员指派的用户数据，搜索用
        //非全员指派的用户数据，搜索用
        this.anonymous = false; // 是否匿名
        // 是否匿名
        this.anonymousText = ''; // 匿名显示文本
        // 匿名显示文本
        this.disabled = false; //办理人员输入框是否禁用
        this.filter = { notGetCurrentUser: false, notGetStopUser: true, orderField: "order", withAllOrg: true, orgId: '' };
        this.ifShowBlank = true; //办理人为空时，是否显示选人框
        //办理人为空时，是否显示选人框
        this.openFromIframe = false; //是否从iframe打开，应用IDP提交审批集成
        //自己的帮助DOM元素
        this.afterConfirm = new EventEmitter();
        this.groupIcon = '<i class="f-icon f-icon-plus-circle" style="color: #2B87FF"></i>';
        this.extendUserHelp = false; //用户帮助是否扩展
        //扩展帮助的url
        this.columns = [
            { title: this.i18nService.getValue('static.columnName.code'), field: 'Code', width: 80 },
            { title: this.i18nService.getValue('static.columnName.name'), field: 'Name', width: 90 },
            { title: this.i18nService.getValue('static.columnName.department'), field: 'OrgName', width: 180 }
        ];
        //是否使用farris用户帮助
        this.taskService.getWfUserHelpConfig().subscribe((re) => {
            if (re && re.userHelpConfig && re.userHelpConfig.isExtend == 'true') {
                this.extendUserHelp = true;
                this.extendUserHelpUrl = re.userHelpConfig.url + '?v=' + new Date().getTime().toString();
            }
        }, error => {
            console.error(error);
        });
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        // 为data table增加高度
        /** @type {?} */
        let ele = (/** @type {?} */ (this.dataTableEle.nativeElement));
        /** @type {?} */
        let body = ele && (/** @type {?} */ (ele.querySelector('div.farris-datatable-container > div > div.farris-table-scorllable-body')));
        body && (body.style.height = '290px');
    }
    /**
     * @return {?}
     */
    ngOnInit() {
    }
    /**
     * @param {?} info
     * @return {?}
     */
    set assigneeInfo(info) {
        this.disabled = false;
        this.placeholder = null; //清空
        this.assignUserNgModule = null; //清空
        this._assigneeInfo = info; //可以传null
        if (!this._assigneeInfo) {
            this.disabled = true;
        }
        else {
            if (this._assigneeInfo.selectAssignee) {
                this.disabled = false;
                this.placeholder = this.i18nService.getValue('task.selectPlaceholder'); //请选择
            }
            else {
                this.disabled = true;
                if (this._assigneeInfo.assigneeUsers && this._assigneeInfo.assigneeUsers.length) {
                    this.placeholder = this.anonymous ? this.anonymousText : this._assigneeInfo.assigneeUsers.map(user => user.name).join(); //解析人名
                }
                else {
                    this.placeholder = this.i18nService.getValue('task.noUser'); //无
                }
            }
            this.singleSelect = !this._assigneeInfo.multiSelect;
            this.allowGlobalAssign = this._assigneeInfo.allowGlobalAssign;
            if (this._assigneeInfo.organizationScope && this._assigneeInfo.organizationScope.length) {
                /** @type {?} */
                const orgList = this._assigneeInfo.organizationScope[0];
                this.filter.orgId = orgList.id;
                this.filter.withAllOrg = orgList.includeChildren;
            }
        }
    }
    /**
     * @param {?} anonymous
     * @return {?}
     */
    set setAnonymous(anonymous) {
        this.anonymous = anonymous;
    }
    /**
     * @param {?} anonymousText
     * @return {?}
     */
    set setAnonymousText(anonymousText) {
        this.anonymousText = anonymousText;
    }
    /**
     * 已选中的人（帮助不可用）
     * @param {?} selectedAssignees
     * @return {?}
     */
    set selectedAssignees(selectedAssignees) {
        !this._assigneeInfo && (this.placeholder = null);
        this._selectedAssignees = selectedAssignees;
        selectedAssignees.length && (this.placeholder = this.anonymous ? this.anonymousText : selectedAssignees.map(user => user.name).join());
    }
    /**
     * 选择参与者
     * @return {?}
     */
    clickAssignUser() {
        if (this.extendUserHelp && !this.openFromIframe) {
            this.showExtendUserHelp();
        }
        else {
            this.showSysUserHelp();
        }
    }
    /**
     * 加载扩展帮助
     * @private
     * @return {?}
     */
    showExtendUserHelp() {
        System.import(this.extendUserHelpUrl).then((moduleFactories) => {
            /** @type {?} */
            const moduleFactory = Object.values(moduleFactories)[0];
            /** @type {?} */
            const moduleRef = moduleFactory.create(this.injector);
            /** @type {?} */
            let context = {
                singleSelect: this.singleSelect,
                allowGlobalAssign: this.allowGlobalAssign,
                assigneeUsers: this._assigneeInfo && this._assigneeInfo.assigneeUsers && this._assigneeInfo.assigneeUsers.length ? this._assigneeInfo.assigneeUsers : [],
                filter: this.filter,
                selectedUsers: this.assignees,
                wfContext: this.wfContext
            };
            moduleRef.instance.showHelp(context).subscribe(re => {
                /** @type {?} */
                let userList = re.userList;
                if (userList && userList.length) {
                    this.assignees = userList.map(user => { return { id: user.id, name: user.name }; });
                    this.assignUserNgModule = this.assignees.map(user => user.name).join();
                }
                else {
                    this.assignees = [];
                    this.assignUserNgModule = '';
                }
                this.afterConfirm.emit(this.assignees);
                this.cd.detectChanges();
            }, error => {
                console.error(error);
            });
        }, error => {
            console.error(error);
        });
    }
    /**
     * @return {?}
     */
    showSysUserHelp() {
        if (this._assigneeInfo && this._assigneeInfo.assigneeUsers && this._assigneeInfo.assigneeUsers.length) {
            this.getAssignUsersByIds();
            this.myUserHelp.show();
            setTimeout(() => {
                this.cd.detectChanges(); //重新预解析后
                this.openFromIframe && this.openMyUserHelpOutIframe();
            }, 100);
        }
        else if (this.allowGlobalAssign) {
            //选中的人保持选中
            this.bindingData = { id: this.assignees.map(a => a.id).join(), name: this.assignees.map(a => a.name).join() };
            this.sysUserHelp.showHelp();
            setTimeout(() => {
                this.cd.detectChanges(); //重新预解析后
                this.openFromIframe && this.beforeOpenSysUserHelpOutIframe();
            }, 100);
        }
    }
    //自己的用户帮助在iframe外打开
    /**
     * @private
     * @return {?}
     */
    openMyUserHelpOutIframe() {
        /** @type {?} */
        var myUserHelpDialog = (/** @type {?} */ (this.myUserHelpEle.nativeElement));
        top.document.body.append(myUserHelpDialog); //弹到顶级window上，不用加载farris样式
        //弹到顶级window上，不用加载farris样式
        //把帮助的黑色遮罩去掉
        /** @type {?} */
        var backdrop = window.document.querySelector("body > bs-modal-backdrop");
        backdrop.remove();
        /** @type {?} */
        var secondDiv = (/** @type {?} */ (((/** @type {?} */ (myUserHelpDialog.firstChild))).firstChild));
        secondDiv.style.width = '850px';
        secondDiv.style.height = '520px';
        secondDiv.style.marginLeft = '-425px';
        secondDiv.style.marginTop = '-260px';
    }
    /**
     * @private
     * @return {?}
     */
    beforeOpenSysUserHelpOutIframe() {
        this.sysUserHelp.farrisLookUp.dialog.reSize({ width: 850, height: 520 });
        /** @type {?} */
        const sysUserHelpDialog = (/** @type {?} */ (this.sysUserHelp.farrisLookUp.dialog.el.nativeElement));
        sysUserHelpDialog.parentElement.removeChild(sysUserHelpDialog);
        this.sysUserHelp.farrisLookUp.draggable = false;
        this.sysUserHelp.farrisLookUp.resizable = false;
        this.sysUserHelp.farrisLookUp.showMaxButton = false;
        this.sysUserHelp.farrisLookUp.dialogOpened.subscribe(() => {
            setTimeout(() => {
                this.openSysUserHelpOutIframe();
            }, 200);
        });
    }
    //系统用户帮助在iframe外打开
    /**
     * @private
     * @return {?}
     */
    openSysUserHelpOutIframe() {
        /** @type {?} */
        var sysUserHelpDialog = (/** @type {?} */ (this.sysUserHelp.farrisLookUp.dialog.el.nativeElement));
        this.sysUserHelp.farrisLookUp.dialog.reSize({ width: 850, height: 520 });
        top.document.body.append(sysUserHelpDialog);
    }
    //系统用户帮助选人
    /**
     * @param {?} data
     * @return {?}
     */
    afterUsersSelect(data) {
        if (data) {
            data = this.singleSelect ? [data] : data;
            this.assignees = data.map(user => { return { id: user.id, name: user.name }; });
            this.assignUserNgModule = data.map(user => user.name).join();
            this.afterConfirm.emit(this.assignees);
            this.cd.detectChanges();
        }
    }
    //根据assigneeInfo.assigneeIds获取指派人code、name等信息
    /**
     * @return {?}
     */
    getAssignUsersByIds() {
        this.originAssignUserList = this._assigneeInfo.assigneeUsers.map(user => {
            return {
                ID: user.id,
                Name: user.name,
                Code: user.code,
                OrgId: user.orgId,
                OrgName: user.orgNamePath
            };
        }),
            this.searchAssignUserList = this.originAssignUserList;
    }
    //非全员指派搜索
    /**
     * @param {?} event
     * @return {?}
     */
    myUserHelpSearch(event) {
        if (event.value) {
            /** @type {?} */
            const value = event.value;
            this.searchAssignUserList = this.originAssignUserList.filter(user => (user.Name) && user.Name.includes(value) ||
                (user.Code) && user.Code.includes(value));
        }
        else {
            this.getAssignUsersByIds();
        }
    }
    //非全员指派选人
    /**
     * @return {?}
     */
    myUserHelpAfterSelect() {
        if (this.myUserHelpTable.selections === undefined) {
            this.notify.warning(this.i18nService.getValue('static.assignee.noAssignee'));
            return;
        }
        /** @type {?} */
        const selectedUsers = this.singleSelect ? [this.myUserHelpTable.selections] : this.myUserHelpTable.selections;
        this.assignUserNgModule = selectedUsers.map(user => user.Name).join();
        this.assignees = selectedUsers.map(user => { return { id: user.ID, name: user.Name }; });
        this.afterConfirm.emit(this.assignees);
        this.cd.detectChanges();
        this.myUserHelp.close();
    }
    //非全员指派点击取消后事件
    /**
     * @return {?}
     */
    myUserHelpCancel() {
        this.myUserHelp.close();
    }
    //清除
    /**
     * @return {?}
     */
    assignUserClear() {
        this.assignees = [];
        this.assignUserNgModule = null;
        this.afterConfirm.emit([]);
        this.bindingData = {};
    }
}
AssigneeInfoComponent.decorators = [
    { type: Component, args: [{
                selector: 'lib-assignee-info',
                template: "<!-- \u6307\u5B9A\u53C2\u4E0E\u8005\uFF08\u6307\u6D3E\uFF09 -->\r\n<div\r\n  *ngIf=\"\r\n    ifShowBlank ||\r\n    _assigneeInfo || (_selectedAssignees && _selectedAssignees.length)\r\n  \"\r\n  class=\"wf-task-handler-help-div\"\r\n>\r\n  <div class=\"wf-task-handler-help-text\" title=\"{{ activityName }}\">\r\n    {{ activityName ? activityName : (\"task.assignText\" | translate) }}\r\n  </div>\r\n  <div\r\n    style=\"flex: 1\"\r\n    title=\"{{ assignUserNgModule ? assignUserNgModule : placeholder }}\"\r\n  >\r\n    <input-group\r\n      [editable]=\"false\"\r\n      [disabled]=\"disabled\"\r\n      [customCls]=\"'custom-cls'\"\r\n      [groupText]=\"groupIcon\"\r\n      [placeholder]=\"placeholder\"\r\n      [forcePlaceholder]=\"true\"\r\n      [(value)]=\"assignUserNgModule\"\r\n      (clickHandle)=\"clickAssignUser()\"\r\n      (clear)=\"assignUserClear()\"\r\n    ></input-group>\r\n  </div>\r\n</div>\r\n\r\n<!-- \u7CFB\u7EDF\u5E2E\u52A9\uFF0C\u7528\u4E8E\u5168\u5458\u6307\u6D3E -->\r\n<sys-farris-grid-lookup\r\n  #sysUserHelp\r\n  style=\"display: none\"\r\n  [singleSelect]=\"singleSelect\"\r\n  [bindingData]=\"bindingData\"\r\n  [pagination]=\"true\"\r\n  [pageSize]=\"20\"\r\n  [title]=\"'static.selectUser' | translate\"\r\n  [sourceType]=\"'user'\"\r\n  [filter]=\"filter\"\r\n  [showUserUnitInfo]=\"true\"\r\n  [typeMode]=\"1\"\r\n  (afterConfirm)=\"afterUsersSelect($event)\"\r\n>\r\n</sys-farris-grid-lookup>\r\n\r\n<!-- \u6307\u6D3E\u81EA\u5DF1\u753B\u7684\u5E2E\u52A9 -->\r\n<farris-dialog\r\n  #allUserDialog\r\n  [buttons]=\"buttonRef\"\r\n  [width]=\"850\"\r\n  [height]=\"520\"\r\n  [title]=\"'static.selectUser' | translate\"\r\n>\r\n  <div\r\n    class=\"d-flex flex-column my-data-grid h-100\"\r\n    style=\"padding: 0 14px; overflow: hidden\"\r\n  >\r\n    <div class=\"flex-auto\" style=\"position: relative\">\r\n      <farris-datatable\r\n        #allUserTable\r\n        [columns]=\"columns\"\r\n        [data]=\"searchAssignUserList\"\r\n        [showFilterBar]=\"true\"\r\n        [singleSelect]=\"singleSelect\"\r\n        [idField]=\"'ID'\"\r\n        [remote]=\"'server'\"\r\n        (search)=\"myUserHelpSearch($event)\"\r\n        [pagination]=\"false\"\r\n        [showPageList]=\"false\"\r\n      ></farris-datatable>\r\n    </div>\r\n  </div>\r\n</farris-dialog>\r\n<ng-template #buttonRef>\r\n  <button class=\"btn btn-secondary\" (click)=\"myUserHelpCancel()\">\r\n    {{ \"static.footCancel\" | translate }}\r\n  </button>\r\n  <button class=\"btn btn-primary\" (click)=\"myUserHelpAfterSelect()\">\r\n    {{ \"static.footOk\" | translate }}\r\n  </button>\r\n</ng-template>\r\n",
                styles: [".wf-task-handler-help-div{font-size:13px;color:#2d2f33;margin-bottom:20px}.wf-task-handler-help-div-submit{margin-bottom:20px}.wf-task-handler-help-text{padding-bottom:8px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]
            }] }
];
/** @nocollapse */
AssigneeInfoComponent.ctorParameters = () => [
    { type: I18nService },
    { type: NotifyService },
    { type: ChangeDetectorRef },
    { type: TaskService },
    { type: Injector }
];
AssigneeInfoComponent.propDecorators = {
    disabled: [{ type: Input }],
    placeholder: [{ type: Input }],
    singleSelect: [{ type: Input }],
    filter: [{ type: Input }],
    ifShowBlank: [{ type: Input }],
    openFromIframe: [{ type: Input }],
    activityName: [{ type: Input }],
    allowGlobalAssign: [{ type: Input }],
    wfContext: [{ type: Input }],
    myUserHelp: [{ type: ViewChild, args: ['allUserDialog',] }],
    buttons: [{ type: ViewChild, args: ['taskExecuteButtons',] }],
    myUserHelpTable: [{ type: ViewChild, args: ['allUserTable',] }],
    dataTableEle: [{ type: ViewChild, args: ['allUserTable', { read: ElementRef },] }],
    sysUserHelp: [{ type: ViewChild, args: [SysFarrisLookupComponent,] }],
    sysUserHelpEle: [{ type: ViewChild, args: ['sysUserHelp', { read: ElementRef },] }],
    myUserHelpEle: [{ type: ViewChild, args: ['allUserDialog', { read: ElementRef },] }],
    afterConfirm: [{ type: Output }],
    assigneeInfo: [{ type: Input }],
    setAnonymous: [{ type: Input }],
    setAnonymousText: [{ type: Input }],
    selectedAssignees: [{ type: Input }]
};
if (false) {
    /** @type {?} */
    AssigneeInfoComponent.prototype.bindingData;
    /** @type {?} */
    AssigneeInfoComponent.prototype.myHelpBindingData;
    /** @type {?} */
    AssigneeInfoComponent.prototype.assignUserNgModule;
    /** @type {?} */
    AssigneeInfoComponent.prototype._assigneeInfo;
    /** @type {?} */
    AssigneeInfoComponent.prototype._selectedAssignees;
    /** @type {?} */
    AssigneeInfoComponent.prototype.assignees;
    /** @type {?} */
    AssigneeInfoComponent.prototype.searchAssignUserList;
    /** @type {?} */
    AssigneeInfoComponent.prototype.anonymous;
    /** @type {?} */
    AssigneeInfoComponent.prototype.anonymousText;
    /** @type {?} */
    AssigneeInfoComponent.prototype.disabled;
    /** @type {?} */
    AssigneeInfoComponent.prototype.placeholder;
    /** @type {?} */
    AssigneeInfoComponent.prototype.singleSelect;
    /** @type {?} */
    AssigneeInfoComponent.prototype.filter;
    /** @type {?} */
    AssigneeInfoComponent.prototype.ifShowBlank;
    /** @type {?} */
    AssigneeInfoComponent.prototype.openFromIframe;
    /** @type {?} */
    AssigneeInfoComponent.prototype.activityName;
    /** @type {?} */
    AssigneeInfoComponent.prototype.allowGlobalAssign;
    /** @type {?} */
    AssigneeInfoComponent.prototype.wfContext;
    /** @type {?} */
    AssigneeInfoComponent.prototype.myUserHelp;
    /** @type {?} */
    AssigneeInfoComponent.prototype.buttons;
    /** @type {?} */
    AssigneeInfoComponent.prototype.myUserHelpTable;
    /** @type {?} */
    AssigneeInfoComponent.prototype.dataTableEle;
    /** @type {?} */
    AssigneeInfoComponent.prototype.sysUserHelp;
    /** @type {?} */
    AssigneeInfoComponent.prototype.sysUserHelpEle;
    /** @type {?} */
    AssigneeInfoComponent.prototype.myUserHelpEle;
    /** @type {?} */
    AssigneeInfoComponent.prototype.afterConfirm;
    /** @type {?} */
    AssigneeInfoComponent.prototype.groupIcon;
    /** @type {?} */
    AssigneeInfoComponent.prototype.extendUserHelp;
    /** @type {?} */
    AssigneeInfoComponent.prototype.extendUserHelpUrl;
    /** @type {?} */
    AssigneeInfoComponent.prototype.columns;
    /** @type {?} */
    AssigneeInfoComponent.prototype.originAssignUserList;
    /**
     * @type {?}
     * @private
     */
    AssigneeInfoComponent.prototype.i18nService;
    /**
     * @type {?}
     * @private
     */
    AssigneeInfoComponent.prototype.notify;
    /**
     * @type {?}
     * @private
     */
    AssigneeInfoComponent.prototype.cd;
    /**
     * @type {?}
     * @private
     */
    AssigneeInfoComponent.prototype.taskService;
    /**
     * @type {?}
     * @private
     */
    AssigneeInfoComponent.prototype.injector;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXNzaWduZWUtaW5mby5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZ3NwLXdmL3dmLXRhc2staGFuZGxlci8iLCJzb3VyY2VzIjpbImxpYi9jb21wb25lbnRzL2Fzc2lnbmVlLWluZm8vYXNzaWduZWUtaW5mby5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsS0FBSyxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsV0FBVyxFQUFFLFlBQVksRUFBRSxVQUFVLEVBQWlCLGlCQUFpQixFQUFFLFFBQVEsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUMvSixPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sZ0NBQWdDLENBQUM7QUFDOUQsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLGlDQUFpQyxDQUFDO0FBQzlELE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUNwRCxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUMxRCxPQUFPLEVBQUUsd0JBQXdCLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUM5RCxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFHbEQsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLDRCQUE0QixDQUFDO0FBQ3pELE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQVNuRCxNQUFNLE9BQU8scUJBQXFCOzs7Ozs7OztJQWtEaEMsWUFDVSxXQUF3QixFQUN4QixNQUFxQixFQUNyQixFQUFxQixFQUNyQixXQUF3QixFQUN4QixRQUFrQjtRQUpsQixnQkFBVyxHQUFYLFdBQVcsQ0FBYTtRQUN4QixXQUFNLEdBQU4sTUFBTSxDQUFlO1FBQ3JCLE9BQUUsR0FBRixFQUFFLENBQW1CO1FBQ3JCLGdCQUFXLEdBQVgsV0FBVyxDQUFhO1FBQ3hCLGFBQVEsR0FBUixRQUFRLENBQVU7UUFyRDVCLGdC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MkJBRS9DLE1BQU07MkJBK0NOLEtBQUs7MkJBOEJMLEtBQUs7K0JBS0wsS0FBSztnQ0FRTCxLQUFLOzs7O0lBdkhOLDRDQUFpRDs7SUFDakQsa0RBQXVEOztJQUN2RCxtREFBMkI7O0lBQzNCLDhDQUE0Qjs7SUFDNUIsbURBQTJCOztJQUMzQiwwQ0FBMkI7O0lBQzNCLHFEQUEwQjs7SUFDMUIsMENBQWtCOztJQUNsQiw4Q0FBbUI7O0lBRW5CLHlDQUFtQzs7SUFDbkMsNENBQTZCOztJQUM3Qiw2Q0FBK0I7O0lBQy9CLHVDQUFzSDs7SUFDdEgsNENBQXFDOztJQUNyQywrQ0FBeUM7O0lBQ3pDLDZDQUE4Qjs7SUFDOUIsa0RBQW9DOztJQUNwQywwQ0FBOEI7O0lBRTlCLDJDQUF3RDs7SUFDeEQsd0NBQTJEOztJQUMzRCxnREFBK0Q7O0lBQy9ELDZDQUEwRTs7SUFFMUUsNENBQTJFOztJQUMzRSwrQ0FBMkU7O0lBQzNFLDhDQUE0RTs7SUFFNUUsNkNBQXdEOztJQUN4RCwwQ0FBK0U7O0lBQy9FLCtDQUFnQzs7SUFDaEMsa0RBQTBCOztJQUUxQix3Q0FJRTs7SUFFRixxREFNSTs7Ozs7SUFHRiw0Q0FBZ0M7Ozs7O0lBQ2hDLHVDQUE2Qjs7Ozs7SUFDN0IsbUNBQTZCOzs7OztJQUM3Qiw0Q0FBZ0M7Ozs7O0lBQ2hDLHlDQUEwQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBJbnB1dCwgT3V0cHV0LCBWaWV3Q2hpbGQsIFRlbXBsYXRlUmVmLCBFdmVudEVtaXR0ZXIsIEVsZW1lbnRSZWYsIEFmdGVyVmlld0luaXQsIENoYW5nZURldGVjdG9yUmVmLCBJbmplY3RvciB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBBc3NpZ25lZUluZm8gfSBmcm9tICcuLi8uLi9lbnRpdHkvY29tcGxldGUtcmVzcG9uc2UnO1xyXG5pbXBvcnQgeyBJMThuU2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2UvaTE4bi9pMThuLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBEaWFsb2dDb21wb25lbnQgfSBmcm9tICdAZmFycmlzL3VpLWRpYWxvZyc7XHJcbmltcG9ydCB7IERhdGFUYWJsZUNvbXBvbmVudCB9IGZyb20gJ0BmYXJyaXMvdWktZGF0YXRhYmxlJztcclxuaW1wb3J0IHsgU3lzRmFycmlzTG9va3VwQ29tcG9uZW50IH0gZnJvbSAnQGdzcC1zeXMvc3lzbWdyLXVpJztcclxuaW1wb3J0IHsgTm90aWZ5U2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbm90aWZ5JztcclxuaW1wb3J0IHsgVXNlciB9IGZyb20gJy4uLy4uL2VudGl0eS91c2VyJztcclxuaW1wb3J0IHsgQXNzaWduZWUgfSBmcm9tICcuLi8uLi9lbnRpdHkvc3RhcnQtcHJvY2Vzcy1wYXlsb2FkJztcclxuaW1wb3J0IHsgVGFza1NlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlL3Rhc2suc2VydmljZSc7XHJcbmltcG9ydCB7IFdmQ29udGV4dCB9IGZyb20gJy4uLy4uL2VudGl0eS93ZkNvbnRleHQnO1xyXG5cclxuZGVjbGFyZSBsZXQgU3lzdGVtOiBhbnk7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ2xpYi1hc3NpZ25lZS1pbmZvJyxcclxuICB0ZW1wbGF0ZVVybDogJy4vYXNzaWduZWUtaW5mby5jb21wb25lbnQuaHRtbCcsXHJcbiAgc3R5bGVVcmxzOiBbJy4uL3Rhc2stZXhlY3V0ZS90YXNrLWV4ZWN1dGUuY29tcG9uZW50LmNzcyddLFxyXG59KVxyXG5leHBvcnQgY2xhc3MgQXNzaWduZWVJbmZvQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBBZnRlclZpZXdJbml0IHtcclxuXHJcbiAgYmluZGluZ0RhdGE6IHsgaWQ/OiBzdHJpbmcsIG5hbWU/OiBzdHJpbmcgfSA9IHt9Oy8v57O757uf5biu5Yqp5aSa6YCJ5pe255So5YiwXHJcbiAgbXlIZWxwQmluZGluZ0RhdGE6IHsgaWQ/OiBzdHJpbmcsIG5hbWU/OiBzdHJpbmcgfSA9IHt9Oy8v6Ieq5bex55qE5biu5Yqp5aSa6YCJ5pe255So5YiwXHJcbiAgYXNzaWduVXNlck5nTW9kdWxlOiBzdHJpbmc7XHJcbiAgX2Fzc2lnbmVlSW5mbzogQXNzaWduZWVJbmZvO1xyXG4gIF9zZWxlY3RlZEFzc2lnbmVlczogVXNlcltdOy8v5bey57uP6YCJ5Lit55qE5oyH5rS+5Lq6XHJcbiAgYXNzaWduZWVzOiBBc3NpZ25lZVtdID0gW107Ly/ov5Tlm57pgInkuK3kurrnmoRJROaVsOe7hFxyXG4gIHNlYXJjaEFzc2lnblVzZXJMaXN0ID0gW107Ly/pnZ7lhajlkZjmjIfmtL7nmoTnlKjmiLfmlbDmja7vvIzmkJzntKLnlKhcclxuICBhbm9ueW1vdXMgPSBmYWxzZTsgLy8g5piv5ZCm5Yy/5ZCNXHJcbiAgYW5vbnltb3VzVGV4dCA9ICcnOyAvLyDljL/lkI3mmL7npLrmlofmnKxcclxuXHJcbiAgQElucHV0KCkgZGlzYWJsZWQ6IGJvb2xlYW4gPSBmYWxzZTsvL+WKnueQhuS6uuWRmOi+k+WFpeahhuaYr+WQpuemgeeUqFxyXG4gIEBJbnB1dCgpIHBsYWNlaG9sZGVyOiBzdHJpbmc7XHJcbiAgQElucHV0KCkgc2luZ2xlU2VsZWN0OiBib29sZWFuO1xyXG4gIEBJbnB1dCgpIGZpbHRlciA9IHsgbm90R2V0Q3VycmVudFVzZXI6IGZhbHNlLCBub3RHZXRTdG9wVXNlcjogdHJ1ZSwgb3JkZXJGaWVsZDogXCJvcmRlclwiLCB3aXRoQWxsT3JnOiB0cnVlLCBvcmdJZDogJycgfVxyXG4gIEBJbnB1dCgpIGlmU2hvd0JsYW5rOiBib29sZWFuID0gdHJ1ZTsvL+WKnueQhuS6uuS4uuepuuaXtu+8jOaYr+WQpuaYvuekuumAieS6uuahhlxyXG4gIEBJbnB1dCgpIG9wZW5Gcm9tSWZyYW1lOiBib29sZWFuID0gZmFsc2U7Ly/mmK/lkKbku45pZnJhbWXmiZPlvIDvvIzlupTnlKhJRFDmj5DkuqTlrqHmibnpm4bmiJBcclxuICBASW5wdXQoKSBhY3Rpdml0eU5hbWU6IHN0cmluZzsvL+iKgueCueWQjeensFxyXG4gIEBJbnB1dCgpIGFsbG93R2xvYmFsQXNzaWduOiBib29sZWFuOy8v5piv5ZCm5YWo5ZGY5oyH5rS+XHJcbiAgQElucHV0KCkgd2ZDb250ZXh0OiBXZkNvbnRleHQ7Ly/lt6XkvZzmtYHkuIrkuIvmlodcclxuXHJcbiAgQFZpZXdDaGlsZCgnYWxsVXNlckRpYWxvZycpIG15VXNlckhlbHA6IERpYWxvZ0NvbXBvbmVudDtcclxuICBAVmlld0NoaWxkKCd0YXNrRXhlY3V0ZUJ1dHRvbnMnKSBidXR0b25zOiBUZW1wbGF0ZVJlZjxhbnk+Oy8v56Gu6K6k5Y+W5raI5oyJ6ZKuXHJcbiAgQFZpZXdDaGlsZCgnYWxsVXNlclRhYmxlJykgbXlVc2VySGVscFRhYmxlOiBEYXRhVGFibGVDb21wb25lbnQ7XHJcbiAgQFZpZXdDaGlsZCgnYWxsVXNlclRhYmxlJywgeyByZWFkOiBFbGVtZW50UmVmIH0pIGRhdGFUYWJsZUVsZTogRWxlbWVudFJlZjsvL+S4umRhdGF0YWJsZeWinuWKoOmrmOW6plxyXG5cclxuICBAVmlld0NoaWxkKFN5c0ZhcnJpc0xvb2t1cENvbXBvbmVudCkgc3lzVXNlckhlbHA6IFN5c0ZhcnJpc0xvb2t1cENvbXBvbmVudDsvL+ezu+e7n+eUqOaIt+W4ruWKqVxyXG4gIEBWaWV3Q2hpbGQoJ3N5c1VzZXJIZWxwJywgeyByZWFkOiBFbGVtZW50UmVmIH0pIHN5c1VzZXJIZWxwRWxlOiBFbGVtZW50UmVmOyAvL+ezu+e7n+eUqOaIt+W4ruWKqURPTeWFg+e0oFxyXG4gIEBWaWV3Q2hpbGQoJ2FsbFVzZXJEaWFsb2cnLCB7IHJlYWQ6IEVsZW1lbnRSZWYgfSkgbXlVc2VySGVscEVsZTogRWxlbWVudFJlZjsvL+iHquW3seeahOW4ruWKqURPTeWFg+e0oFxyXG5cclxuICBAT3V0cHV0KCkgYWZ0ZXJDb25maXJtID0gbmV3IEV2ZW50RW1pdHRlcjxBc3NpZ25lZVtdPigpO1xyXG4gIGdyb3VwSWNvbiA9ICc8aSBjbGFzcz1cImYtaWNvbiBmLWljb24tcGx1cy1jaXJjbGVcIiBzdHlsZT1cImNvbG9yOiAjMkI4N0ZGXCI+PC9pPic7XHJcbiAgZXh0ZW5kVXNlckhlbHA6IGJvb2xlYW4gPSBmYWxzZTsvL+eUqOaIt+W4ruWKqeaYr+WQpuaJqeWxlVxyXG4gIGV4dGVuZFVzZXJIZWxwVXJsOiBzdHJpbmc7Ly/mianlsZXluK7liqnnmoR1cmxcclxuXHJcbiAgY29sdW1ucyA9IFtcclxuICAgIHsgdGl0bGU6IHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3N0YXRpYy5jb2x1bW5OYW1lLmNvZGUnKSwgZmllbGQ6ICdDb2RlJywgd2lkdGg6IDgwIH0sXHJcbiAgICB7IHRpdGxlOiB0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCdzdGF0aWMuY29sdW1uTmFtZS5uYW1lJyksIGZpZWxkOiAnTmFtZScsIHdpZHRoOiA5MCB9LFxyXG4gICAgeyB0aXRsZTogdGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgnc3RhdGljLmNvbHVtbk5hbWUuZGVwYXJ0bWVudCcpLCBmaWVsZDogJ09yZ05hbWUnLCB3aWR0aDogMTgwIH1cclxuICBdO1xyXG5cclxuICBvcmlnaW5Bc3NpZ25Vc2VyTGlzdDogey8v6Z2e5YWo5ZGY5oyH5rS+55qE55So5oi35pWw5o2uXHJcbiAgICBJRDogc3RyaW5nLFxyXG4gICAgQ29kZTogc3RyaW5nLFxyXG4gICAgTmFtZTogc3RyaW5nLFxyXG4gICAgT3JnSWQ6IHN0cmluZyxcclxuICAgIE9yZ05hbWU6IHN0cmluZ1xyXG4gIH1bXTtcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBwcml2YXRlIGkxOG5TZXJ2aWNlOiBJMThuU2VydmljZSxcclxuICAgIHByaXZhdGUgbm90aWZ5OiBOb3RpZnlTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBjZDogQ2hhbmdlRGV0ZWN0b3JSZWYsXHJcbiAgICBwcml2YXRlIHRhc2tTZXJ2aWNlOiBUYXNrU2VydmljZSxcclxuICAgIHByaXZhdGUgaW5qZWN0b3I6IEluamVjdG9yXHJcbiAgKSB7XHJcbiAgICAvL+aYr+WQpuS9v+eUqGZhcnJpc+eUqOaIt+W4ruWKqVxyXG4gICAgdGhpcy50YXNrU2VydmljZS5nZXRXZlVzZXJIZWxwQ29uZmlnKCkuc3Vic2NyaWJlKChyZTogYW55KSA9PiB7XHJcbiAgICAgIGlmIChyZSAmJiByZS51c2VySGVscENvbmZpZyAmJiByZS51c2VySGVscENvbmZpZy5pc0V4dGVuZCA9PSAndHJ1ZScpIHtcclxuICAgICAgICB0aGlzLmV4dGVuZFVzZXJIZWxwID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmV4dGVuZFVzZXJIZWxwVXJsID0gcmUudXNlckhlbHBDb25maWcudXJsICsgJz92PScgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKS50b1N0cmluZygpO1xyXG4gICAgICB9XHJcbiAgICB9LCBlcnJvciA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpOiB2b2lkIHtcclxuICAgIC8vIOS4umRhdGEgdGFibGXlop7liqDpq5jluqZcclxuICAgIGxldCBlbGUgPSB0aGlzLmRhdGFUYWJsZUVsZS5uYXRpdmVFbGVtZW50IGFzIEhUTUxFbGVtZW50O1xyXG4gICAgbGV0IGJvZHkgPSBlbGUgJiYgZWxlLnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5mYXJyaXMtZGF0YXRhYmxlLWNvbnRhaW5lciA+IGRpdiA+IGRpdi5mYXJyaXMtdGFibGUtc2NvcmxsYWJsZS1ib2R5JykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICBib2R5ICYmIChib2R5LnN0eWxlLmhlaWdodCA9ICcyOTBweCcpO1xyXG4gIH1cclxuXHJcbiAgbmdPbkluaXQoKSB7XHJcbiAgfVxyXG5cclxuICBASW5wdXQoKVxyXG4gIHNldCBhc3NpZ25lZUluZm8oaW5mbzogQXNzaWduZWVJbmZvKSB7XHJcbiAgICB0aGlzLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICB0aGlzLnBsYWNlaG9sZGVyID0gbnVsbDsvL+a4heepulxyXG4gICAgdGhpcy5hc3NpZ25Vc2VyTmdNb2R1bGUgPSBudWxsOy8v5riF56m6XHJcbiAgICB0aGlzLl9hc3NpZ25lZUluZm8gPSBpbmZvOy8v5Y+v5Lul5LygbnVsbFxyXG4gICAgaWYgKCF0aGlzLl9hc3NpZ25lZUluZm8pIHtcclxuICAgICAgdGhpcy5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAodGhpcy5fYXNzaWduZWVJbmZvLnNlbGVjdEFzc2lnbmVlKSB7XHJcbiAgICAgICAgdGhpcy5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMucGxhY2Vob2xkZXIgPSB0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCd0YXNrLnNlbGVjdFBsYWNlaG9sZGVyJyk7Ly/or7fpgInmi6lcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICBpZiAodGhpcy5fYXNzaWduZWVJbmZvLmFzc2lnbmVlVXNlcnMgJiYgdGhpcy5fYXNzaWduZWVJbmZvLmFzc2lnbmVlVXNlcnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICB0aGlzLnBsYWNlaG9sZGVyID0gdGhpcy5hbm9ueW1vdXMgPyB0aGlzLmFub255bW91c1RleHQgOiB0aGlzLl9hc3NpZ25lZUluZm8uYXNzaWduZWVVc2Vycy5tYXAodXNlciA9PiB1c2VyLm5hbWUpLmpvaW4oKTsvL+ino+aekOS6uuWQjVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLnBsYWNlaG9sZGVyID0gdGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgndGFzay5ub1VzZXInKTsvL+aXoFxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICB0aGlzLnNpbmdsZVNlbGVjdCA9ICF0aGlzLl9hc3NpZ25lZUluZm8ubXVsdGlTZWxlY3Q7XHJcbiAgICAgIHRoaXMuYWxsb3dHbG9iYWxBc3NpZ24gPSB0aGlzLl9hc3NpZ25lZUluZm8uYWxsb3dHbG9iYWxBc3NpZ247XHJcbiAgICAgIGlmICh0aGlzLl9hc3NpZ25lZUluZm8ub3JnYW5pemF0aW9uU2NvcGUgJiYgdGhpcy5fYXNzaWduZWVJbmZvLm9yZ2FuaXphdGlvblNjb3BlLmxlbmd0aCkge1xyXG4gICAgICAgIGNvbnN0IG9yZ0xpc3QgPSB0aGlzLl9hc3NpZ25lZUluZm8ub3JnYW5pemF0aW9uU2NvcGVbMF07XHJcbiAgICAgICAgdGhpcy5maWx0ZXIub3JnSWQgPSBvcmdMaXN0LmlkO1xyXG4gICAgICAgIHRoaXMuZmlsdGVyLndpdGhBbGxPcmcgPSBvcmdMaXN0LmluY2x1ZGVDaGlsZHJlbjtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgQElucHV0KClcclxuICBzZXQgc2V0QW5vbnltb3VzKGFub255bW91czogYm9vbGVhbikge1xyXG4gICAgdGhpcy5hbm9ueW1vdXMgPSBhbm9ueW1vdXM7XHJcbiAgfVxyXG5cclxuICBASW5wdXQoKVxyXG4gIHNldCBzZXRBbm9ueW1vdXNUZXh0KGFub255bW91c1RleHQ6IHN0cmluZykge1xyXG4gICAgdGhpcy5hbm9ueW1vdXNUZXh0ID0gYW5vbnltb3VzVGV4dDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOW3sumAieS4reeahOS6uu+8iOW4ruWKqeS4jeWPr+eUqO+8iVxyXG4gICAqL1xyXG4gIEBJbnB1dCgpXHJcbiAgc2V0IHNlbGVjdGVkQXNzaWduZWVzKHNlbGVjdGVkQXNzaWduZWVzOiBVc2VyW10pIHtcclxuICAgICF0aGlzLl9hc3NpZ25lZUluZm8gJiYgKHRoaXMucGxhY2Vob2xkZXIgPSBudWxsKTtcclxuICAgIHRoaXMuX3NlbGVjdGVkQXNzaWduZWVzID0gc2VsZWN0ZWRBc3NpZ25lZXM7XHJcbiAgICBzZWxlY3RlZEFzc2lnbmVlcy5sZW5ndGggJiYgKHRoaXMucGxhY2Vob2xkZXIgPSB0aGlzLmFub255bW91cyA/IHRoaXMuYW5vbnltb3VzVGV4dCA6IHNlbGVjdGVkQXNzaWduZWVzLm1hcCh1c2VyID0+IHVzZXIubmFtZSkuam9pbigpKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOmAieaLqeWPguS4juiAhVxyXG4gICAqL1xyXG4gIGNsaWNrQXNzaWduVXNlcigpIHtcclxuICAgIGlmICh0aGlzLmV4dGVuZFVzZXJIZWxwICYmICF0aGlzLm9wZW5Gcm9tSWZyYW1lKSB7XHJcbiAgICAgIHRoaXMuc2hvd0V4dGVuZFVzZXJIZWxwKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnNob3dTeXNVc2VySGVscCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIOWKoOi9veaJqeWxleW4ruWKqVxyXG4gICAqL1xyXG4gIHByaXZhdGUgc2hvd0V4dGVuZFVzZXJIZWxwKCkge1xyXG4gICAgU3lzdGVtLmltcG9ydCh0aGlzLmV4dGVuZFVzZXJIZWxwVXJsKS50aGVuKChtb2R1bGVGYWN0b3JpZXM6IGFueSkgPT4ge1xyXG4gICAgICBjb25zdCBtb2R1bGVGYWN0b3J5OiBhbnkgPSBPYmplY3QudmFsdWVzKG1vZHVsZUZhY3RvcmllcylbMF07XHJcbiAgICAgIGNvbnN0IG1vZHVsZVJlZiA9IG1vZHVsZUZhY3RvcnkuY3JlYXRlKHRoaXMuaW5qZWN0b3IpO1xyXG4gICAgICBsZXQgY29udGV4dCA9IHtcclxuICAgICAgICBzaW5nbGVTZWxlY3Q6IHRoaXMuc2luZ2xlU2VsZWN0LFxyXG4gICAgICAgIGFsbG93R2xvYmFsQXNzaWduOiB0aGlzLmFsbG93R2xvYmFsQXNzaWduLFxyXG4gICAgICAgIGFzc2lnbmVlVXNlcnM6IHRoaXMuX2Fzc2lnbmVlSW5mbyAmJiB0aGlzLl9hc3NpZ25lZUluZm8uYXNzaWduZWVVc2VycyAmJiB0aGlzLl9hc3NpZ25lZUluZm8uYXNzaWduZWVVc2Vycy5sZW5ndGggPyB0aGlzLl9hc3NpZ25lZUluZm8uYXNzaWduZWVVc2VycyA6IFtdLFxyXG4gICAgICAgIGZpbHRlcjogdGhpcy5maWx0ZXIsXHJcbiAgICAgICAgc2VsZWN0ZWRVc2VyczogdGhpcy5hc3NpZ25lZXMsXHJcbiAgICAgICAgd2ZDb250ZXh0OiB0aGlzLndmQ29udGV4dFxyXG4gICAgICB9XHJcbiAgICAgIG1vZHVsZVJlZi5pbnN0YW5jZS5zaG93SGVscChjb250ZXh0KS5zdWJzY3JpYmUocmUgPT4ge1xyXG4gICAgICAgIGxldCB1c2VyTGlzdCA9IHJlLnVzZXJMaXN0O1xyXG4gICAgICAgIGlmICh1c2VyTGlzdCAmJiB1c2VyTGlzdC5sZW5ndGgpIHtcclxuICAgICAgICAgIHRoaXMuYXNzaWduZWVzID0gdXNlckxpc3QubWFwKHVzZXIgPT4geyByZXR1cm4geyBpZDogdXNlci5pZCwgbmFtZTogdXNlci5uYW1lIH0gfSk7XHJcbiAgICAgICAgICB0aGlzLmFzc2lnblVzZXJOZ01vZHVsZSA9IHRoaXMuYXNzaWduZWVzLm1hcCh1c2VyID0+IHVzZXIubmFtZSkuam9pbigpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLmFzc2lnbmVlcyA9IFtdO1xyXG4gICAgICAgICAgdGhpcy5hc3NpZ25Vc2VyTmdNb2R1bGUgPSAnJztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5hZnRlckNvbmZpcm0uZW1pdCh0aGlzLmFzc2lnbmVlcyk7XHJcbiAgICAgICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgIH0sIGVycm9yID0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgICAgfSk7XHJcbiAgICB9LCBlcnJvciA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzaG93U3lzVXNlckhlbHAoKSB7XHJcbiAgICBpZiAodGhpcy5fYXNzaWduZWVJbmZvICYmIHRoaXMuX2Fzc2lnbmVlSW5mby5hc3NpZ25lZVVzZXJzICYmIHRoaXMuX2Fzc2lnbmVlSW5mby5hc3NpZ25lZVVzZXJzLmxlbmd0aCkge1xyXG4gICAgICB0aGlzLmdldEFzc2lnblVzZXJzQnlJZHMoKTtcclxuICAgICAgdGhpcy5teVVzZXJIZWxwLnNob3coKTtcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7Ly/ph43mlrDpooTop6PmnpDlkI5cclxuICAgICAgICB0aGlzLm9wZW5Gcm9tSWZyYW1lICYmIHRoaXMub3Blbk15VXNlckhlbHBPdXRJZnJhbWUoKTtcclxuICAgICAgfSwgMTAwKTtcclxuICAgIH0gZWxzZSBpZiAodGhpcy5hbGxvd0dsb2JhbEFzc2lnbikge1xyXG4gICAgICAvL+mAieS4reeahOS6uuS/neaMgemAieS4rVxyXG4gICAgICB0aGlzLmJpbmRpbmdEYXRhID0geyBpZDogdGhpcy5hc3NpZ25lZXMubWFwKGEgPT4gYS5pZCkuam9pbigpLCBuYW1lOiB0aGlzLmFzc2lnbmVlcy5tYXAoYSA9PiBhLm5hbWUpLmpvaW4oKSB9O1xyXG4gICAgICB0aGlzLnN5c1VzZXJIZWxwLnNob3dIZWxwKCk7XHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuY2QuZGV0ZWN0Q2hhbmdlcygpOy8v6YeN5paw6aKE6Kej5p6Q5ZCOXHJcbiAgICAgICAgdGhpcy5vcGVuRnJvbUlmcmFtZSAmJiB0aGlzLmJlZm9yZU9wZW5TeXNVc2VySGVscE91dElmcmFtZSgpO1xyXG4gICAgICB9LCAxMDApO1xyXG4gICAgfVxyXG5cclxuICB9XHJcblxyXG4gIC8v6Ieq5bex55qE55So5oi35biu5Yqp5ZyoaWZyYW1l5aSW5omT5byAXHJcbiAgcHJpdmF0ZSBvcGVuTXlVc2VySGVscE91dElmcmFtZSgpIHtcclxuICAgIHZhciBteVVzZXJIZWxwRGlhbG9nID0gdGhpcy5teVVzZXJIZWxwRWxlLm5hdGl2ZUVsZW1lbnQgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICB0b3AuZG9jdW1lbnQuYm9keS5hcHBlbmQobXlVc2VySGVscERpYWxvZyk7Ly/lvLnliLDpobbnuqd3aW5kb3fkuIrvvIzkuI3nlKjliqDovb1mYXJyaXPmoLflvI9cclxuXHJcbiAgICAvL+aKiuW4ruWKqeeahOm7keiJsumBrue9qeWOu+aOiVxyXG4gICAgdmFyIGJhY2tkcm9wID0gd2luZG93LmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJib2R5ID4gYnMtbW9kYWwtYmFja2Ryb3BcIik7XHJcbiAgICBiYWNrZHJvcC5yZW1vdmUoKTtcclxuXHJcbiAgICB2YXIgc2Vjb25kRGl2ID0gKG15VXNlckhlbHBEaWFsb2cuZmlyc3RDaGlsZCBhcyBIVE1MRWxlbWVudCkuZmlyc3RDaGlsZCBhcyBIVE1MRWxlbWVudDsvL2ZhcnJpcy1kaWFsb2fkuIvnmoTnrKzkuoznuqdkaXZcclxuICAgIHNlY29uZERpdi5zdHlsZS53aWR0aCA9ICc4NTBweCc7XHJcbiAgICBzZWNvbmREaXYuc3R5bGUuaGVpZ2h0ID0gJzUyMHB4JztcclxuICAgIHNlY29uZERpdi5zdHlsZS5tYXJnaW5MZWZ0ID0gJy00MjVweCc7XHJcbiAgICBzZWNvbmREaXYuc3R5bGUubWFyZ2luVG9wID0gJy0yNjBweCc7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGJlZm9yZU9wZW5TeXNVc2VySGVscE91dElmcmFtZSgpIHtcclxuICAgIHRoaXMuc3lzVXNlckhlbHAuZmFycmlzTG9va1VwLmRpYWxvZy5yZVNpemUoeyB3aWR0aDogODUwLCBoZWlnaHQ6IDUyMCB9KTtcclxuICAgIGNvbnN0IHN5c1VzZXJIZWxwRGlhbG9nID0gdGhpcy5zeXNVc2VySGVscC5mYXJyaXNMb29rVXAuZGlhbG9nLmVsLm5hdGl2ZUVsZW1lbnQgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICBzeXNVc2VySGVscERpYWxvZy5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKHN5c1VzZXJIZWxwRGlhbG9nKTtcclxuICAgIHRoaXMuc3lzVXNlckhlbHAuZmFycmlzTG9va1VwLmRyYWdnYWJsZSA9IGZhbHNlO1xyXG4gICAgdGhpcy5zeXNVc2VySGVscC5mYXJyaXNMb29rVXAucmVzaXphYmxlID0gZmFsc2U7XHJcbiAgICB0aGlzLnN5c1VzZXJIZWxwLmZhcnJpc0xvb2tVcC5zaG93TWF4QnV0dG9uID0gZmFsc2U7XHJcbiAgICB0aGlzLnN5c1VzZXJIZWxwLmZhcnJpc0xvb2tVcC5kaWFsb2dPcGVuZWQuc3Vic2NyaWJlKCgpID0+IHtcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7Ly/lkKbliJnkuIvpnaLnmoRxdWVyeVNlbGVjdG9y5Lya5om+5LiN5YiwXHJcbiAgICAgICAgdGhpcy5vcGVuU3lzVXNlckhlbHBPdXRJZnJhbWUoKTtcclxuICAgICAgfSwgMjAwKVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvL+ezu+e7n+eUqOaIt+W4ruWKqeWcqGlmcmFtZeWkluaJk+W8gFxyXG4gIHByaXZhdGUgb3BlblN5c1VzZXJIZWxwT3V0SWZyYW1lKCkge1xyXG4gICAgdmFyIHN5c1VzZXJIZWxwRGlhbG9nID0gdGhpcy5zeXNVc2VySGVscC5mYXJyaXNMb29rVXAuZGlhbG9nLmVsLm5hdGl2ZUVsZW1lbnQgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICB0aGlzLnN5c1VzZXJIZWxwLmZhcnJpc0xvb2tVcC5kaWFsb2cucmVTaXplKHsgd2lkdGg6IDg1MCwgaGVpZ2h0OiA1MjAgfSk7XHJcbiAgICB0b3AuZG9jdW1lbnQuYm9keS5hcHBlbmQoc3lzVXNlckhlbHBEaWFsb2cpO1xyXG4gIH1cclxuXHJcbiAgLy/ns7vnu5/nlKjmiLfluK7liqnpgInkurpcclxuICBhZnRlclVzZXJzU2VsZWN0KGRhdGE6IGFueSkge1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgZGF0YSA9IHRoaXMuc2luZ2xlU2VsZWN0ID8gW2RhdGFdIDogZGF0YTtcclxuICAgICAgdGhpcy5hc3NpZ25lZXMgPSBkYXRhLm1hcCh1c2VyID0+IHsgcmV0dXJuIHsgaWQ6IHVzZXIuaWQsIG5hbWU6IHVzZXIubmFtZSB9IH0pO1xyXG4gICAgICB0aGlzLmFzc2lnblVzZXJOZ01vZHVsZSA9IGRhdGEubWFwKHVzZXIgPT4gdXNlci5uYW1lKS5qb2luKCk7XHJcbiAgICAgIHRoaXMuYWZ0ZXJDb25maXJtLmVtaXQodGhpcy5hc3NpZ25lZXMpO1xyXG4gICAgICB0aGlzLmNkLmRldGVjdENoYW5nZXMoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8v5qC55o2uYXNzaWduZWVJbmZvLmFzc2lnbmVlSWRz6I635Y+W5oyH5rS+5Lq6Y29kZeOAgW5hbWXnrYnkv6Hmga9cclxuICBnZXRBc3NpZ25Vc2Vyc0J5SWRzKCkge1xyXG4gICAgdGhpcy5vcmlnaW5Bc3NpZ25Vc2VyTGlzdCA9IHRoaXMuX2Fzc2lnbmVlSW5mby5hc3NpZ25lZVVzZXJzLm1hcCh1c2VyID0+IHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBJRDogdXNlci5pZCxcclxuICAgICAgICBOYW1lOiB1c2VyLm5hbWUsXHJcbiAgICAgICAgQ29kZTogdXNlci5jb2RlLFxyXG4gICAgICAgIE9yZ0lkOiB1c2VyLm9yZ0lkLFxyXG4gICAgICAgIE9yZ05hbWU6IHVzZXIub3JnTmFtZVBhdGhcclxuICAgICAgfTtcclxuICAgIH0pLFxyXG4gICAgICB0aGlzLnNlYXJjaEFzc2lnblVzZXJMaXN0ID0gdGhpcy5vcmlnaW5Bc3NpZ25Vc2VyTGlzdDtcclxuICB9XHJcblxyXG4gIC8v6Z2e5YWo5ZGY5oyH5rS+5pCc57SiXHJcbiAgbXlVc2VySGVscFNlYXJjaChldmVudCkge1xyXG4gICAgaWYgKGV2ZW50LnZhbHVlKSB7XHJcbiAgICAgIGNvbnN0IHZhbHVlID0gZXZlbnQudmFsdWU7XHJcbiAgICAgIHRoaXMuc2VhcmNoQXNzaWduVXNlckxpc3QgPSB0aGlzLm9yaWdpbkFzc2lnblVzZXJMaXN0LmZpbHRlcih1c2VyID0+XHJcbiAgICAgICAgKHVzZXIuTmFtZSkgJiYgdXNlci5OYW1lLmluY2x1ZGVzKHZhbHVlKSB8fFxyXG4gICAgICAgICh1c2VyLkNvZGUpICYmIHVzZXIuQ29kZS5pbmNsdWRlcyh2YWx1ZSlcclxuICAgICAgKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuZ2V0QXNzaWduVXNlcnNCeUlkcygpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy/pnZ7lhajlkZjmjIfmtL7pgInkurpcclxuICBteVVzZXJIZWxwQWZ0ZXJTZWxlY3QoKSB7XHJcbiAgICBpZiAodGhpcy5teVVzZXJIZWxwVGFibGUuc2VsZWN0aW9ucyA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHRoaXMubm90aWZ5Lndhcm5pbmcodGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgnc3RhdGljLmFzc2lnbmVlLm5vQXNzaWduZWUnKSk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IHNlbGVjdGVkVXNlcnMgPSB0aGlzLnNpbmdsZVNlbGVjdCA/IFt0aGlzLm15VXNlckhlbHBUYWJsZS5zZWxlY3Rpb25zXSA6IHRoaXMubXlVc2VySGVscFRhYmxlLnNlbGVjdGlvbnM7XHJcbiAgICB0aGlzLmFzc2lnblVzZXJOZ01vZHVsZSA9IHNlbGVjdGVkVXNlcnMubWFwKHVzZXIgPT4gdXNlci5OYW1lKS5qb2luKCk7XHJcbiAgICB0aGlzLmFzc2lnbmVlcyA9IHNlbGVjdGVkVXNlcnMubWFwKHVzZXIgPT4geyByZXR1cm4geyBpZDogdXNlci5JRCwgbmFtZTogdXNlci5OYW1lIH0gfSk7XHJcbiAgICB0aGlzLmFmdGVyQ29uZmlybS5lbWl0KHRoaXMuYXNzaWduZWVzKTtcclxuICAgIHRoaXMuY2QuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgdGhpcy5teVVzZXJIZWxwLmNsb3NlKCk7XHJcbiAgfVxyXG5cclxuICAvL+mdnuWFqOWRmOaMh+a0vueCueWHu+WPlua2iOWQjuS6i+S7tlxyXG4gIG15VXNlckhlbHBDYW5jZWwoKSB7XHJcbiAgICB0aGlzLm15VXNlckhlbHAuY2xvc2UoKTtcclxuICB9XHJcblxyXG4gIC8v5riF6ZmkXHJcbiAgYXNzaWduVXNlckNsZWFyKCkge1xyXG4gICAgdGhpcy5hc3NpZ25lZXMgPSBbXTtcclxuICAgIHRoaXMuYXNzaWduVXNlck5nTW9kdWxlID0gbnVsbDtcclxuICAgIHRoaXMuYWZ0ZXJDb25maXJtLmVtaXQoW10pO1xyXG4gICAgdGhpcy5iaW5kaW5nRGF0YSA9IHt9O1xyXG4gIH1cclxuXHJcbn1cclxuIl19