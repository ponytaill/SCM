/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Injectable } from '@angular/core';
import { FlowFormInfo } from '../domain/entities/flowform-info';
import { HttpService } from '@ecp-caf/caf-common';
import { forkJoin } from 'rxjs';
var ProcessDesignerUIState = /** @class */ (function () {
    function ProcessDesignerUIState(http) {
        this.http = http;
        // 入口单据Info
        this.flowFormInfo = new FlowFormInfo();
        // Model上下文
        this.content = '';
        // 属性框
        this.propertyConfig = [];
        this.propertyData = {};
        // 设计器地址
        this.POST_MESSAGE_TARGET = window.document.location.origin + '/platform/runtime/wf/web/designer/index.html';
        this.schemas = [];
        // 审批活动属性
        this.counterSignVariables = [];
        this.approvalItems = [];
        // 流程的审批活动节点信息
        this.userActList = [];
        // 流程包括结束和审批活动节点的信息
        this.allActList = [];
        // 流程管理员信息
        this.isAdministratorConfig = false;
        this.organizations = new Array();
        // 审批活动属性枚举===========================================================================================
        this.assignIterator = [{ key: 'ALL', value: '所有' },
            { key: 'ASSIGN', value: '指派' },
            { key: 'CLAIM', value: '领用' }];
        this.completeIterator = [{ key: 'Preempt', value: '抢占模式' },
            { key: 'Parallel', value: '并行会签' },
            { key: 'Sequential', value: '串行会签' }];
        this.completeIterator4Claim = [{ key: 'Preempt', value: '抢占模式' }];
        this.boolIterator = [{ key: true, value: '是' },
            { key: false, value: '否' }];
        // 会签不允许跳转
        this.noJump4Sign = [{ key: false, value: '否' }];
        // =================================================================================================
        // 流程实例上下文-----------------------------------------------
        this.procInstContext = [
            { key: 'dataId', name: '单据内码', description: '单据内码' },
            { key: 'procInstId', name: '流程实例ID', description: '流程实例ID' },
            { key: 'bizDefKey', name: '入口单据ID', description: '入口单据ID' },
            { key: 'processDefinitionKey', name: '流程定义KEY', description: '流程定义KEY' },
            { key: 'procInstCreator', name: '流程发起人', description: '流程发起人' },
            { key: 'procInstDescription', name: '流程摘要', description: '流程摘要' },
            { key: 'comment', name: '审批意见', description: '审批意见' }
        ];
        // 催办上下文--------------------------------------------------
        this.urgeContext = [
            { key: 'dataId', name: '单据内码', description: '单据内码' },
            { key: 'procInstId', name: '流程实例ID', description: '流程实例ID' },
            { key: 'bizDefKey', name: '入口单据ID', description: '入口单据ID' },
            { key: 'processDefinitionKey', name: '流程定义KEY', description: '流程定义KEY' },
            { key: 'procInstCreator', name: '流程发起人', description: '流程发起人' },
            { key: 'procInstDescription', name: '流程摘要', description: '流程摘要' },
            { key: 'comment', name: '审批意见', description: '审批意见' },
            { key: 'bizDefName', name: '流程分类名称', description: '流程分类名称' },
            { key: 'curLoginUsername', name: '当前登录人名称', description: '当前登录人名称' },
            { key: 'procInstCreatorName', name: '流程发起人名称', description: '流程发起人名称' }
        ];
        /**
         * 流程参数上下文
         */
        this.formalParameterContext = [];
        /**
         * 参与者上下文
         */
        this.participantContext = [
            {
                key: 'procInstCreator',
                name: '流程发起人',
                description: '流程发起人'
            }, {
                key: 'currentUser',
                name: '当前执行人',
                description: '当前执行人'
            }, {
                key: 'preActExecutors',
                name: '上一个活动的执行人',
                description: '上一个活动的执行人'
            }
        ];
        /**
         * 活动构件参数上下文
         */
        this.activityComponentContext = [
            {
                key: 'conclusionType',
                name: '结论类型',
                description: '审批项流转方向，1正向，2反向，3终止'
            }, {
                key: 'conclusionValue',
                name: '结论值',
                description: '审批项编号，例如，"Pass"、"Back"、"Refuse"'
            }
        ];
        this.processVariableContext = new Array();
        this.processVariables = new Array();
        /**
         * 汇报级次
         */
        this.dimensions = [
            { value: 'directSuperior', text: '直接上级' },
            { value: 'higherSuperior', text: '间接上级' }
        ];
        /**
         * 启动方式
         */
        this.startModeIterator = [
            { key: 'DIRECT', value: '直接' },
            { key: 'EXTERNAL_PROCESS', value: '外部流程' },
            { key: 'SUB_PROCESS', value: '子流程' }
        ];
        /**
         * 显示终端
         */
        this.displayTerminal = [
            { key: "ALL", value: '电脑端和移动端' },
            { key: "WEB", value: '电脑端' },
            { key: "APP", value: '移动端' }
        ];
        /**
         * 消息渠道列表
         */
        this.messageChannels = new Array();
        this.orgTypeCollection = [];
    }
    Object.defineProperty(ProcessDesignerUIState.prototype, "ProcessVariables", {
        get: /**
         * @return {?}
         */
        function () {
            return this.processVariables;
        },
        set: /**
         * @param {?} variables
         * @return {?}
         */
        function (variables) {
            this.processVariables = variables;
            this.setProcessVariableContext();
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} key
     * @return {?}
     */
    ProcessDesignerUIState.prototype.variableContextName = /**
     * @param {?} key
     * @return {?}
     */
    function (key) {
        return this.participantContext.find((/**
         * @param {?} i
         * @return {?}
         */
        function (i) { return i.key === key; })).name;
    };
    /**
     * @param {?} value
     * @return {?}
     */
    ProcessDesignerUIState.prototype.ranksName = /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        return this.dimensions.find((/**
         * @param {?} i
         * @return {?}
         */
        function (i) { return i.value === value; })).text;
    };
    /**
     * @return {?}
     */
    ProcessDesignerUIState.prototype.getMessageChannels = /**
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var url = '/api/runtime/sys/v1.0/messageplatform/channel/getenabledchannels';
        this.http.get(url).subscribe((/**
         * @param {?} re
         * @return {?}
         */
        function (re) {
            _this.messageChannels = re;
        }));
    };
    /**
     * @return {?}
     */
    ProcessDesignerUIState.prototype.getAdministratorInfo = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.getCurrentUser().subscribe((/**
         * @param {?} user
         * @return {?}
         */
        function (user) {
            /** @type {?} */
            var userId = user.userId;
            forkJoin(_this.getAdministratorConfig(), _this.getAdministrator(userId)).subscribe((/**
             * @param {?} re
             * @return {?}
             */
            function (re) {
                _this.isAdministratorConfig = re[0].currentValue === 'true' ? true : false;
                _this.administrator = re[1];
                if (_this.isAdministratorConfig && _this.administrator && _this.administrator.enable) {
                    forkJoin(_this.administrator.administratorAuthorities.map((/**
                     * @param {?} a
                     * @return {?}
                     */
                    function (a) {
                        if (a.includeSubordinate) {
                            return _this.getSysOrgWithAllSubsById(a.organization);
                        }
                        else {
                            return _this.getSysOrgById(a.organization);
                        }
                    }))).subscribe((/**
                     * @param {?} r
                     * @return {?}
                     */
                    function (r) {
                        var e_1, _a, e_2, _b;
                        if (r && r.length > 0) {
                            _this.organizations = new Array();
                            try {
                                for (var r_1 = tslib_1.__values(r), r_1_1 = r_1.next(); !r_1_1.done; r_1_1 = r_1.next()) {
                                    var orgs = r_1_1.value;
                                    if (orgs && orgs.length > 0) {
                                        var _loop_1 = function (o) {
                                            if (!_this.organizations.some((/**
                                             * @param {?} org
                                             * @return {?}
                                             */
                                            function (org) { return org.id === o.id; }))) {
                                                _this.organizations.push(o);
                                            }
                                        };
                                        try {
                                            for (var orgs_1 = tslib_1.__values(orgs), orgs_1_1 = orgs_1.next(); !orgs_1_1.done; orgs_1_1 = orgs_1.next()) {
                                                var o = orgs_1_1.value;
                                                _loop_1(o);
                                            }
                                        }
                                        catch (e_2_1) { e_2 = { error: e_2_1 }; }
                                        finally {
                                            try {
                                                if (orgs_1_1 && !orgs_1_1.done && (_b = orgs_1.return)) _b.call(orgs_1);
                                            }
                                            finally { if (e_2) throw e_2.error; }
                                        }
                                    }
                                }
                            }
                            catch (e_1_1) { e_1 = { error: e_1_1 }; }
                            finally {
                                try {
                                    if (r_1_1 && !r_1_1.done && (_a = r_1.return)) _a.call(r_1);
                                }
                                finally { if (e_1) throw e_1.error; }
                            }
                        }
                    }));
                }
            }));
        }));
    };
    /**
     * @private
     * @return {?}
     */
    ProcessDesignerUIState.prototype.getCurrentUser = /**
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var url = '/api/runtime/sys/v1.0/userinfos?infoType=user';
        return this.http.get(url);
    };
    /**
     * @private
     * @param {?} userId
     * @return {?}
     */
    ProcessDesignerUIState.prototype.getAdministrator = /**
     * @private
     * @param {?} userId
     * @return {?}
     */
    function (userId) {
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/processAdministrator/" + userId;
        return this.http.get(url);
    };
    /**
     * @private
     * @return {?}
     */
    ProcessDesignerUIState.prototype.getAdministratorConfig = /**
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/generalConfig/Is_EnableAdministrator";
        return this.http.get(url);
    };
    /**
     * @private
     * @param {?} orgId
     * @return {?}
     */
    ProcessDesignerUIState.prototype.getSysOrgById = /**
     * @private
     * @param {?} orgId
     * @return {?}
     */
    function (orgId) {
        /** @type {?} */
        var url = "/api/runtime/sys/v1.0/sysOrgs/" + orgId;
        return this.http.get(url);
    };
    /**
     * @private
     * @param {?} orgId
     * @return {?}
     */
    ProcessDesignerUIState.prototype.getSysOrgWithAllSubsById = /**
     * @private
     * @param {?} orgId
     * @return {?}
     */
    function (orgId) {
        /** @type {?} */
        var url = "/api/runtime/sys/v1.0/sysOrgs?param=" + encodeURIComponent("{\"parentId\":\"" + orgId + "\",\"withAllSub\":true}");
        return this.http.get(url);
    };
    /**
     * @private
     * @param {?} userId
     * @return {?}
     */
    ProcessDesignerUIState.prototype.getCurUserInfo = /**
     * @private
     * @param {?} userId
     * @return {?}
     */
    function (userId) {
        /** @type {?} */
        var url = "/api/runtime/sys/v1.0/users/" + userId;
        return this.http.get(url);
    };
    /**
     * @private
     * @return {?}
     */
    ProcessDesignerUIState.prototype.setProcessVariableContext = /**
     * @private
     * @return {?}
     */
    function () {
        var e_3, _a;
        this.processVariableContext = new Array();
        if (this.ProcessVariables && this.ProcessVariables.length > 0) {
            try {
                for (var _b = tslib_1.__values(this.ProcessVariables), _c = _b.next(); !_c.done; _c = _b.next()) {
                    var v = _c.value;
                    /** @type {?} */
                    var varEntity = {
                        key: v.name,
                        name: v.documentation,
                        description: v.description
                    };
                    this.processVariableContext.push(varEntity);
                }
            }
            catch (e_3_1) { e_3 = { error: e_3_1 }; }
            finally {
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                }
                finally { if (e_3) throw e_3.error; }
            }
        }
    };
    /**
     * 获取框架的顶级window
     * 进行跨域封装
     */
    /**
     * 获取框架的顶级window
     * 进行跨域封装
     * @private
     * @return {?}
     */
    ProcessDesignerUIState.prototype.getTopWindow = /**
     * 获取框架的顶级window
     * 进行跨域封装
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var curWin = window.self;
        try {
            while (curWin.location.origin === curWin.parent.location.origin) {
                if (curWin !== curWin.parent && !((/** @type {?} */ (curWin))).isRTFTopWin) {
                    curWin = curWin.parent;
                }
                else {
                    break;
                }
            }
        }
        catch (e) { }
        return curWin;
    };
    // --------------------------0-------------------------
    // uiState初始
    // --------------------------0-------------------------
    // uiState初始
    /**
     * @return {?}
     */
    ProcessDesignerUIState.prototype.initUIState = 
    // --------------------------0-------------------------
    // uiState初始
    /**
     * @return {?}
     */
    function () {
        this.propertyConfig = [];
        this.propertyData = null;
        this.content = '';
        this.schemas = [];
    };
    /**
     * 获取所有审批节点信息
     * @param data
     */
    /**
     * 获取所有审批节点信息
     * @param {?} data
     * @return {?}
     */
    ProcessDesignerUIState.prototype.getUserActList = /**
     * 获取所有审批节点信息
     * @param {?} data
     * @return {?}
     */
    function (data) {
        var e_4, _a;
        this.userActList = [];
        if (data && data.length > 0) {
            try {
                for (var data_1 = tslib_1.__values(data), data_1_1 = data_1.next(); !data_1_1.done; data_1_1 = data_1.next()) {
                    var userAct = data_1_1.value;
                    /** @type {?} */
                    var userActInfo = {
                        Id: userAct.Id,
                        Name: userAct.Name
                    };
                    this.userActList.push(userActInfo);
                }
            }
            catch (e_4_1) { e_4 = { error: e_4_1 }; }
            finally {
                try {
                    if (data_1_1 && !data_1_1.done && (_a = data_1.return)) _a.call(data_1);
                }
                finally { if (e_4) throw e_4.error; }
            }
        }
    };
    /**
     * 获取所有结束节点信息
     * @param data
     */
    /**
     * 获取所有结束节点信息
     * @param {?} data
     * @return {?}
     */
    ProcessDesignerUIState.prototype.getEndEventList = /**
     * 获取所有结束节点信息
     * @param {?} data
     * @return {?}
     */
    function (data) {
        var e_5, _a;
        this.allActList = [];
        if (data && data.length > 0) {
            try {
                for (var data_2 = tslib_1.__values(data), data_2_1 = data_2.next(); !data_2_1.done; data_2_1 = data_2.next()) {
                    var endEvent = data_2_1.value;
                    /** @type {?} */
                    var endEventInfo = {
                        Id: endEvent.Id,
                        Name: endEvent.Name
                    };
                    // 取结束节点存到
                    this.allActList.push(endEventInfo);
                }
            }
            catch (e_5_1) { e_5 = { error: e_5_1 }; }
            finally {
                try {
                    if (data_2_1 && !data_2_1.done && (_a = data_2.return)) _a.call(data_2);
                }
                finally { if (e_5) throw e_5.error; }
            }
        }
        // 存入审批活动节点
        this.allActList = this.allActList.concat(this.userActList);
    };
    ProcessDesignerUIState.decorators = [
        { type: Injectable }
    ];
    /** @nocollapse */
    ProcessDesignerUIState.ctorParameters = function () { return [
        { type: HttpService }
    ]; };
    return ProcessDesignerUIState;
}());
export { ProcessDesignerUIState };
if (false) {
    /** @type {?} */
    ProcessDesignerUIState.prototype.flowFormInfo;
    /** @type {?} */
    ProcessDesignerUIState.prototype.content;
    /** @type {?} */
    ProcessDesignerUIState.prototype.propertyConfig;
    /** @type {?} */
    ProcessDesignerUIState.prototype.propertyData;
    /** @type {?} */
    ProcessDesignerUIState.prototype.POST_MESSAGE_TARGET;
    /** @type {?} */
    ProcessDesignerUIState.prototype.BE;
    /** @type {?} */
    ProcessDesignerUIState.prototype.schemas;
    /** @type {?} */
    ProcessDesignerUIState.prototype.counterSignVariables;
    /** @type {?} */
    ProcessDesignerUIState.prototype.approvalItems;
    /** @type {?} */
    ProcessDesignerUIState.prototype.userActList;
    /** @type {?} */
    ProcessDesignerUIState.prototype.allActList;
    /** @type {?} */
    ProcessDesignerUIState.prototype.bizActivityId;
    /** @type {?} */
    ProcessDesignerUIState.prototype.isAdministratorConfig;
    /** @type {?} */
    ProcessDesignerUIState.prototype.administrator;
    /** @type {?} */
    ProcessDesignerUIState.prototype.organizations;
    /** @type {?} */
    ProcessDesignerUIState.prototype.assignIterator;
    /** @type {?} */
    ProcessDesignerUIState.prototype.completeIterator;
    /** @type {?} */
    ProcessDesignerUIState.prototype.completeIterator4Claim;
    /** @type {?} */
    ProcessDesignerUIState.prototype.boolIterator;
    /** @type {?} */
    ProcessDesignerUIState.prototype.noJump4Sign;
    /** @type {?} */
    ProcessDesignerUIState.prototype.procInstContext;
    /** @type {?} */
    ProcessDesignerUIState.prototype.urgeContext;
    /**
     * 流程参数上下文
     * @type {?}
     */
    ProcessDesignerUIState.prototype.formalParameterContext;
    /**
     * 参与者上下文
     * @type {?}
     */
    ProcessDesignerUIState.prototype.participantContext;
    /**
     * 活动构件参数上下文
     * @type {?}
     */
    ProcessDesignerUIState.prototype.activityComponentContext;
    /** @type {?} */
    ProcessDesignerUIState.prototype.processVariableContext;
    /**
     * @type {?}
     * @private
     */
    ProcessDesignerUIState.prototype.processVariables;
    /**
     * 汇报级次
     * @type {?}
     */
    ProcessDesignerUIState.prototype.dimensions;
    /**
     * 启动方式
     * @type {?}
     */
    ProcessDesignerUIState.prototype.startModeIterator;
    /**
     * 显示终端
     * @type {?}
     */
    ProcessDesignerUIState.prototype.displayTerminal;
    /**
     * 消息渠道列表
     * @type {?}
     */
    ProcessDesignerUIState.prototype.messageChannels;
    /** @type {?} */
    ProcessDesignerUIState.prototype.orgTypeCollection;
    /**
     * @type {?}
     * @private
     */
    ProcessDesignerUIState.prototype.http;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvY2Vzcy1kZXNpZ25lci51aXN0YXRlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGdzcC13Zi93Zi1wcm9jZXNzLWVkaXRvci8iLCJzb3VyY2VzIjpbImxpYi9hcHAvcHJvY2Vzcy1kZXNpZ25lci51aXN0YXRlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUFDLFVBQVUsRUFBVyxNQUFNLGVBQWUsQ0FBQztBQUVuRCxPQUFPLEVBQUMsWUFBWSxFQUFDLE1BQU0sa0NBQWtDLENBQUM7QUFHOUQsT0FBTyxFQUFDLFdBQVcsRUFBQyxNQUFNLHFCQUFxQixDQUFDO0FBQ2hELE9BQU8sRUFBQyxRQUFRLEVBQWEsTUFBTSxNQUFNLENBQUM7QUFFMUM7SUFJRSxnQ0FBb0IsSUFBaUI7UUFBakIsU0FBSSxHQUFKLElBQUksQ0FBYTs7UUFJckMsaUJBQVksR0FBaUIsSUFBSSxZQUFZLEVBQUUsQ0FBQzs7UUFHaEQsWUFBTyxHQUFHLEVBQUUsQ0FBQzs7UUFHYixtQkFBYyxHQUFVLEVBQUUsQ0FBQztRQUMzQixpQkFBWSxHQUFRLEVBQUUsQ0FBQzs7UUFHdkIsd0JBQW1CLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsTUFBTSxHQUFHLDhDQUE4QyxDQUFDO1FBR3ZHLFlBQU8sR0FBVSxFQUFFLENBQUM7O1FBR3BCLHlCQUFvQixHQUFVLEVBQUUsQ0FBQztRQUNqQyxrQkFBYSxHQUFVLEVBQUUsQ0FBQzs7UUFHMUIsZ0JBQVcsR0FBRyxFQUFFLENBQUM7O1FBRWpCLGVBQVUsR0FBRyxFQUFFLENBQUM7O1FBS2hCLDBCQUFxQixHQUFHLEtBQUssQ0FBQztRQUU5QixrQkFBYSxHQUFVLElBQUksS0FBSyxFQUFFLENBQUM7O1FBSTVCLG1CQUFjLEdBQWEsQ0FBQyxFQUFDLEdBQUcsRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBQztZQUMxRCxFQUFDLEdBQUcsRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFFLElBQUks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RTs7SUFHRiw2Q0FXRTs7Ozs7SUFJRix3REFBeUM7Ozs7O0lBS3pDLG9EQWFLOzs7OztJQUtMLDBEQVNLOztJQUNMLHdEQUFrRDs7Ozs7SUFFbEQsa0RBQXVDOzs7OztJQWN2Qyw0Q0FHRTs7Ozs7SUFLRixtREFJRTs7Ozs7SUFLRixpREFJRTs7Ozs7SUFLRixpREFBOEI7O0lBRTlCLG1EQUEwQzs7Ozs7SUExSjlCLHNDQUF5QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7SW5qZWN0YWJsZSwgSW5qZWN0b3J9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQge0tleU1hcH0gZnJvbSAnQGZhcnJpcy91aS1wcm9wZXJ0eS1wYW5lbCc7XHJcbmltcG9ydCB7Rmxvd0Zvcm1JbmZvfSBmcm9tICcuLi9kb21haW4vZW50aXRpZXMvZmxvd2Zvcm0taW5mbyc7XHJcbmltcG9ydCB7VmFyRW50aXR5fSBmcm9tICdAZ3NwLXN2Yy9leHByZXNzaW9uJztcclxuaW1wb3J0IHtHU1BDb21tb25Nb2RlbH0gZnJvbSAnQGdzcC1iZWYvZ3NwLWNtLW1ldGFkYXRhJztcclxuaW1wb3J0IHtIdHRwU2VydmljZX0gZnJvbSAnQGVjcC1jYWYvY2FmLWNvbW1vbic7XHJcbmltcG9ydCB7Zm9ya0pvaW4sIE9ic2VydmFibGV9IGZyb20gJ3J4anMnO1xyXG5cclxuQEluamVjdGFibGUoKVxyXG5cclxuZXhwb3J0IGNsYXNzIFByb2Nlc3NEZXNpZ25lclVJU3RhdGUge1xyXG5cclxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGh0dHA6IEh0dHBTZXJ2aWNlKSB7XHJcbiAgfVxyXG5cclxuICAvLyDlhaXlj6PljZXmja5JbmZvXHJcbiAgZmxvd0Zvcm1JbmZvOiBGbG93Rm9ybUluZm8gPSBuZXcgRmxvd0Zvcm1JbmZvKCk7XHJcblxyXG4gIC8vIE1vZGVs5LiK5LiL5paHXHJcbiAgY29udGVudCA9ICcnO1xyXG5cclxuICAvLyDlsZ7mgKfmoYZcclxuICBwcm9wZXJ0eUNvbmZpZzogYW55W10gPSBbXTtcclxuICBwcm9wZXJ0eURhdGE6IGFueSA9IHt9O1xyXG5cclxuICAvLyDorr7orqHlmajlnLDlnYBcclxuICBQT1NUX01FU1NBR0VfVEFSR0VUID0gd2luZG93LmRvY3VtZW50LmxvY2F0aW9uLm9yaWdpbiArICcvcGxhdGZvcm0vcnVudGltZS93Zi93ZWIvZGVzaWduZXIvaW5kZXguaHRtbCc7XHJcblxyXG4gIEJFOiBHU1BDb21tb25Nb2RlbDtcclxuICBzY2hlbWFzOiBhbnlbXSA9IFtdO1xyXG5cclxuICAvLyDlrqHmibnmtLvliqjlsZ7mgKdcclxuICBjb3VudGVyU2lnblZhcmlhYmxlczogYW55W10gPSBbXTtcclxuICBhcHByb3ZhbEl0ZW1zOiBhbnlbXSA9IFtdO1xyXG5cclxuICAvLyDmtYHnqIvnmoTlrqHmibnmtLvliqjoioLngrnkv6Hmga9cclxuICB1c2VyQWN0TGlzdCA9IFtdO1xyXG4gIC8vIOa1geeoi+WMheaLrOe7k+adn+WSjOWuoeaJuea0u+WKqOiKgueCueeahOS/oeaBr1xyXG4gIGFsbEFjdExpc3QgPSBbXTtcclxuICAvLyDorrDlvZXlvZPliY3pgInkuK3nlKjmiLfmtLvliqjoioLngrnnmoRiaXpBY3Rpdml0eUlkXHJcbiAgYml6QWN0aXZpdHlJZDogc3RyaW5nO1xyXG5cclxuICAvLyDmtYHnqIvnrqHnkIblkZjkv6Hmga9cclxuICBpc0FkbWluaXN0cmF0b3JDb25maWcgPSBmYWxzZTtcclxuICBhZG1pbmlzdHJhdG9yOiBhbnk7XHJcbiAgb3JnYW5pemF0aW9uczogYW55W10gPSBuZXcgQXJyYXkoKTtcclxuXHJcblxyXG4gIC8vIOWuoeaJuea0u+WKqOWxnuaAp+aemuS4vj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICBwdWJsaWMgYXNzaWduSXRlcmF0b3I6IEtleU1hcFtdID0gW3trZXk6ICdBTEwnLCB2YWx1ZTogJ+aJgOaciSd9LFxyXG4gICAge2tleTogJ0FTU0lHTicsIHZhbHVlOiAn5oyH5rS+J30sXHJcbiAgICB7a2V5OiAnQ0xBSU0nLCB2YWx1ZTogJ+mihueUqCd9XTtcclxuICBwdWJsaWMgY29tcGxldGVJdGVyYXRvcjogS2V5TWFwW10gPSBbe2tleTogJ1ByZWVtcHQnLCB2YWx1ZTogJ+aKouWNoOaooeW8jyd9LFxyXG4gICAge2tleTogJ1BhcmFsbGVsJywgdmFsdWU6ICflubbooYzkvJrnrb4nfSxcclxuICAgIHtrZXk6ICdTZXF1ZW50aWFsJywgdmFsdWU6ICfkuLLooYzkvJrnrb4nfV07XHJcbiAgcHVibGljIGNvbXBsZXRlSXRlcmF0b3I0Q2xhaW06IEtleU1hcFtdID0gW3trZXk6ICdQcmVlbXB0JywgdmFsdWU6ICfmiqLljaDmqKHlvI8nfV07XHJcbiAgcHVibGljIGJvb2xJdGVyYXRvcjogS2V5TWFwW10gPSBbe2tleTogdHJ1ZSwgdmFsdWU6ICfmmK8nfSxcclxuICAgIHtrZXk6IGZhbHNlLCB2YWx1ZTogJ+WQpid9XTtcclxuICAvLyDkvJrnrb7kuI3lhYHorrjot7PovaxcclxuICBwdWJsaWMgbm9KdW1wNFNpZ246IEtleU1hcFtdID0gW3trZXk6IGZhbHNlLCB2YWx1ZTogJ+WQpid9XTtcclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gIC8vIOa1geeoi+WunuS+i+S4iuS4i+aWhy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgcHJvY0luc3RDb250ZXh0OiBWYXJFbnRpdHlbXSA9IFtcclxuICAgIHtrZXk6ICdkYXRhSWQnLCBuYW1lOiAn5Y2V5o2u5YaF56CBJywgZGVzY3JpcHRpb246ICfljZXmja7lhoXnoIEnfSxcclxuICAgIHtrZXk6ICdwcm9jSW5zdElkJywgbmFtZTogJ+a1geeoi+WunuS+i0lEJywgZGVzY3JpcHRpb246ICfmtYHnqIvlrp7kvotJRCd9LFxyXG4gICAge2tleTogJ2JpekRlZktleScsIG5hbWU6ICflhaXlj6PljZXmja5JRCcsIGRlc2NyaXB0aW9uOiAn5YWl5Y+j5Y2V5o2uSUQnfSxcclxuICAgIHtrZXk6ICdwcm9jZXNzRGVmaW5pdGlvbktleScsIG5hbWU6ICfmtYHnqIvlrprkuYlLRVknLCBkZXNjcmlwdGlvbjogJ+a1geeoi+WumuS5iUtFWSd9LFxyXG4gICAge2tleTogJ3Byb2NJbnN0Q3JlYXRvcicsIG5hbWU6ICfmtYHnqIvlj5HotbfkuronLCBkZXNjcmlwdGlvbjogJ+a1geeoi+WPkei1t+S6uid9LFxyXG4gICAge2tleTogJ3Byb2NJbnN0RGVzY3JpcHRpb24nLCBuYW1lOiAn5rWB56iL5pGY6KaBJywgZGVzY3JpcHRpb246ICfmtYHnqIvmkZjopoEnfSxcclxuICAgIHtrZXk6ICdjb21tZW50JywgbmFtZTogJ+WuoeaJueaEj+ingScsIGRlc2NyaXB0aW9uOiAn5a6h5om55oSP6KeBJ31cclxuICBdO1xyXG5cclxuICAvLyDlgqzlip7kuIrkuIvmloctLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIHVyZ2VDb250ZXh0OiBWYXJFbnRpdHlbXSA9IFtcclxuICAgIHtrZXk6ICdkYXRhSWQnLCBuYW1lOiAn5Y2V5o2u5YaF56CBJywgZGVzY3JpcHRpb246ICfljZXmja7lhoXnoIEnfSxcclxuICAgIHtrZXk6ICdwcm9jSW5zdElkJywgbmFtZTogJ+a1geeoi+WunuS+i0lEJywgZGVzY3JpcHRpb246ICfmtYHnqIvlrp7kvotJRCd9LFxyXG4gICAge2tleTogJ2JpekRlZktleScsIG5hbWU6ICflhaXlj6PljZXmja5JRCcsIGRlc2NyaXB0aW9uOiAn5YWl5Y+j5Y2V5o2uSUQnfSxcclxuICAgIHtrZXk6ICdwcm9jZXNzRGVmaW5pdGlvbktleScsIG5hbWU6ICfmtYHnqIvlrprkuYlLRVknLCBkZXNjcmlwdGlvbjogJ+a1geeoi+WumuS5iUtFWSd9LFxyXG4gICAge2tleTogJ3Byb2NJbnN0Q3JlYXRvcicsIG5hbWU6ICfmtYHnqIvlj5HotbfkuronLCBkZXNjcmlwdGlvbjogJ+a1geeoi+WPkei1t+S6uid9LFxyXG4gICAge2tleTogJ3Byb2NJbnN0RGVzY3JpcHRpb24nLCBuYW1lOiAn5rWB56iL5pGY6KaBJywgZGVzY3JpcHRpb246ICfmtYHnqIvmkZjopoEnfSxcclxuICAgIHtrZXk6ICdjb21tZW50JywgbmFtZTogJ+WuoeaJueaEj+ingScsIGRlc2NyaXB0aW9uOiAn5a6h5om55oSP6KeBJ30sXHJcbiAgICB7a2V5OiAnYml6RGVmTmFtZScsIG5hbWU6ICfmtYHnqIvliIbnsbvlkI3np7AnLCBkZXNjcmlwdGlvbjogJ+a1geeoi+WIhuexu+WQjeensCd9LFxyXG4gICAge2tleTogJ2N1ckxvZ2luVXNlcm5hbWUnLCBuYW1lOiAn5b2T5YmN55m75b2V5Lq65ZCN56ewJywgZGVzY3JpcHRpb246ICflvZPliY3nmbvlvZXkurrlkI3np7AnfSxcclxuICAgIHtrZXk6ICdwcm9jSW5zdENyZWF0b3JOYW1lJywgbmFtZTogJ+a1geeoi+WPkei1t+S6uuWQjeensCcsIGRlc2NyaXB0aW9uOiAn5rWB56iL5Y+R6LW35Lq65ZCN56ewJ31cclxuICBdO1xyXG4gIC8qKlxyXG4gICAqIOa1geeoi+WPguaVsOS4iuS4i+aWh1xyXG4gICAqL1xyXG4gIGZvcm1hbFBhcmFtZXRlckNvbnRleHQ6IFZhckVudGl0eVtdID0gW107XHJcblxyXG4gIC8qKlxyXG4gICAqIOWPguS4juiAheS4iuS4i+aWh1xyXG4gICAqL1xyXG4gIHBhcnRpY2lwYW50Q29udGV4dDogVmFyRW50aXR5W10gPSBbXHJcbiAgICB7XHJcbiAgICAgIGtleTogJ3Byb2NJbnN0Q3JlYXRvcicsXHJcbiAgICAgIG5hbWU6ICfmtYHnqIvlj5HotbfkuronLFxyXG4gICAgICBkZXNjcmlwdGlvbjogJ+a1geeoi+WPkei1t+S6uidcclxuICAgIH0sIHtcclxuICAgICAga2V5OiAnY3VycmVudFVzZXInLFxyXG4gICAgICBuYW1lOiAn5b2T5YmN5omn6KGM5Lq6JyxcclxuICAgICAgZGVzY3JpcHRpb246ICflvZPliY3miafooYzkuronXHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogJ3ByZUFjdEV4ZWN1dG9ycycsXHJcbiAgICAgIG5hbWU6ICfkuIrkuIDkuKrmtLvliqjnmoTmiafooYzkuronLFxyXG4gICAgICBkZXNjcmlwdGlvbjogJ+S4iuS4gOS4qua0u+WKqOeahOaJp+ihjOS6uidcclxuICAgIH1dO1xyXG5cclxuICAvKipcclxuICAgKiDmtLvliqjmnoTku7blj4LmlbDkuIrkuIvmlodcclxuICAgKi9cclxuICBhY3Rpdml0eUNvbXBvbmVudENvbnRleHQ6IFZhckVudGl0eVtdID0gW1xyXG4gICAge1xyXG4gICAgICBrZXk6ICdjb25jbHVzaW9uVHlwZScsXHJcbiAgICAgIG5hbWU6ICfnu5PorrrnsbvlnosnLFxyXG4gICAgICBkZXNjcmlwdGlvbjogJ+WuoeaJuemhuea1gei9rOaWueWQke+8jDHmraPlkJHvvIwy5Y+N5ZCR77yMM+e7iOatoidcclxuICAgIH0sIHtcclxuICAgICAga2V5OiAnY29uY2x1c2lvblZhbHVlJyxcclxuICAgICAgbmFtZTogJ+e7k+iuuuWAvCcsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiAn5a6h5om56aG557yW5Y+377yM5L6L5aaC77yMXCJQYXNzXCLjgIFcIkJhY2tcIuOAgVwiUmVmdXNlXCInXHJcbiAgICB9XTtcclxuICBwcm9jZXNzVmFyaWFibGVDb250ZXh0OiBWYXJFbnRpdHlbXSA9IG5ldyBBcnJheSgpO1xyXG5cclxuICBwcml2YXRlIHByb2Nlc3NWYXJpYWJsZXMgPSBuZXcgQXJyYXkoKTtcclxuXHJcbiAgc2V0IFByb2Nlc3NWYXJpYWJsZXModmFyaWFibGVzOiBhbnlbXSkge1xyXG4gICAgdGhpcy5wcm9jZXNzVmFyaWFibGVzID0gdmFyaWFibGVzO1xyXG4gICAgdGhpcy5zZXRQcm9jZXNzVmFyaWFibGVDb250ZXh0KCk7XHJcbiAgfVxyXG5cclxuICBnZXQgUHJvY2Vzc1ZhcmlhYmxlcygpIHtcclxuICAgIHJldHVybiB0aGlzLnByb2Nlc3NWYXJpYWJsZXM7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmsYfmiqXnuqfmrKFcclxuICAgKi9cclxuICBkaW1lbnNpb25zID0gW1xyXG4gICAge3ZhbHVlOiAnZGlyZWN0U3VwZXJpb3InLCB0ZXh0OiAn55u05o6l5LiK57qnJ30sXHJcbiAgICB7dmFsdWU6ICdoaWdoZXJTdXBlcmlvcicsIHRleHQ6ICfpl7TmjqXkuIrnuqcnfVxyXG4gIF07XHJcblxyXG4gIC8qKlxyXG4gICAqIOWQr+WKqOaWueW8j1xyXG4gICAqL1xyXG4gIHN0YXJ0TW9kZUl0ZXJhdG9yOiBLZXlNYXBbXSA9IFtcclxuICAgIHtrZXk6ICdESVJFQ1QnLCB2YWx1ZTogJ+ebtOaOpSd9LFxyXG4gICAge2tleTogJ0VYVEVSTkFMX1BST0NFU1MnLCB2YWx1ZTogJ+WklumDqOa1geeoiyd9LFxyXG4gICAge2tleTogJ1NVQl9QUk9DRVNTJywgdmFsdWU6ICflrZDmtYHnqIsnfVxyXG4gIF07XHJcblxyXG4gIC8qKlxyXG4gICAqIOaYvuekuue7iOerr1xyXG4gICAqL1xyXG4gIGRpc3BsYXlUZXJtaW5hbDogS2V5TWFwW10gPSBbXHJcbiAgICB7a2V5OiBcIkFMTFwiLCB2YWx1ZTogJ+eUteiEkeerr+WSjOenu+WKqOerryd9LFxyXG4gICAge2tleTogXCJXRUJcIiwgdmFsdWU6ICfnlLXohJHnq68nfSxcclxuICAgIHtrZXk6IFwiQVBQXCIsIHZhbHVlOiAn56e75Yqo56uvJ31cclxuICBdO1xyXG5cclxuICAvKipcclxuICAgKiDmtojmga/muKDpgZPliJfooahcclxuICAgKi9cclxuICBtZXNzYWdlQ2hhbm5lbHMgPSBuZXcgQXJyYXkoKTtcclxuXHJcbiAgb3JnVHlwZUNvbGxlY3Rpb246IHsgdmFsdWUsIHRleHQgfVtdID0gW107XHJcblxyXG4gIHZhcmlhYmxlQ29udGV4dE5hbWUoa2V5OiBzdHJpbmcpIHtcclxuICAgIHJldHVybiB0aGlzLnBhcnRpY2lwYW50Q29udGV4dC5maW5kKGkgPT4gaS5rZXkgPT09IGtleSkubmFtZTtcclxuICB9XHJcblxyXG4gIHJhbmtzTmFtZSh2YWx1ZTogc3RyaW5nKSB7XHJcbiAgICByZXR1cm4gdGhpcy5kaW1lbnNpb25zLmZpbmQoaSA9PiBpLnZhbHVlID09PSB2YWx1ZSkudGV4dDtcclxuICB9XHJcblxyXG4gIGdldE1lc3NhZ2VDaGFubmVscygpIHtcclxuICAgIGNvbnN0IHVybCA9ICcvYXBpL3J1bnRpbWUvc3lzL3YxLjAvbWVzc2FnZXBsYXRmb3JtL2NoYW5uZWwvZ2V0ZW5hYmxlZGNoYW5uZWxzJztcclxuICAgIHRoaXMuaHR0cC5nZXQodXJsKS5zdWJzY3JpYmUoKHJlOiBhbnkpID0+IHtcclxuICAgICAgdGhpcy5tZXNzYWdlQ2hhbm5lbHMgPSByZTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0QWRtaW5pc3RyYXRvckluZm8oKSB7XHJcbiAgICB0aGlzLmdldEN1cnJlbnRVc2VyKCkuc3Vic2NyaWJlKHVzZXIgPT4ge1xyXG4gICAgICBjb25zdCB1c2VySWQgPSB1c2VyLnVzZXJJZDtcclxuICAgICAgZm9ya0pvaW4odGhpcy5nZXRBZG1pbmlzdHJhdG9yQ29uZmlnKCksIHRoaXMuZ2V0QWRtaW5pc3RyYXRvcih1c2VySWQpKS5zdWJzY3JpYmUocmUgPT4ge1xyXG4gICAgICAgIHRoaXMuaXNBZG1pbmlzdHJhdG9yQ29uZmlnID0gcmVbMF0uY3VycmVudFZhbHVlID09PSAndHJ1ZScgPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgICAgdGhpcy5hZG1pbmlzdHJhdG9yID0gcmVbMV07XHJcbiAgICAgICAgaWYgKHRoaXMuaXNBZG1pbmlzdHJhdG9yQ29uZmlnICYmIHRoaXMuYWRtaW5pc3RyYXRvciAmJiB0aGlzLmFkbWluaXN0cmF0b3IuZW5hYmxlKSB7XHJcbiAgICAgICAgICBmb3JrSm9pbih0aGlzLmFkbWluaXN0cmF0b3IuYWRtaW5pc3RyYXRvckF1dGhvcml0aWVzLm1hcChhID0+IHtcclxuICAgICAgICAgICAgaWYgKGEuaW5jbHVkZVN1Ym9yZGluYXRlKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U3lzT3JnV2l0aEFsbFN1YnNCeUlkKGEub3JnYW5pemF0aW9uKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRTeXNPcmdCeUlkKGEub3JnYW5pemF0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSkpLnN1YnNjcmliZSgocjogYW55W10pID0+IHtcclxuICAgICAgICAgICAgaWYgKHIgJiYgci5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5vcmdhbml6YXRpb25zID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgICAgICAgZm9yIChjb25zdCBvcmdzIG9mIHIpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvcmdzICYmIG9yZ3MubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG8gb2Ygb3Jncykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5vcmdhbml6YXRpb25zLnNvbWUob3JnID0+IG9yZy5pZCA9PT0gby5pZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3JnYW5pemF0aW9ucy5wdXNoKG8pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRDdXJyZW50VXNlcigpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgY29uc3QgdXJsID0gJy9hcGkvcnVudGltZS9zeXMvdjEuMC91c2VyaW5mb3M/aW5mb1R5cGU9dXNlcic7XHJcbiAgICByZXR1cm4gdGhpcy5odHRwLmdldCh1cmwpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRBZG1pbmlzdHJhdG9yKHVzZXJJZDogc3RyaW5nKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgIGNvbnN0IHVybCA9IGAvYXBpL3J1bnRpbWUvd2YvdjEuMC9wcm9jZXNzQWRtaW5pc3RyYXRvci8ke3VzZXJJZH1gO1xyXG4gICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQodXJsKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0QWRtaW5pc3RyYXRvckNvbmZpZygpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgY29uc3QgdXJsID0gYC9hcGkvcnVudGltZS93Zi92MS4wL2dlbmVyYWxDb25maWcvSXNfRW5hYmxlQWRtaW5pc3RyYXRvcmA7XHJcbiAgICByZXR1cm4gdGhpcy5odHRwLmdldCh1cmwpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRTeXNPcmdCeUlkKG9yZ0lkOiBzdHJpbmcpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgY29uc3QgdXJsID0gYC9hcGkvcnVudGltZS9zeXMvdjEuMC9zeXNPcmdzLyR7b3JnSWR9YDtcclxuICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0KHVybCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldFN5c09yZ1dpdGhBbGxTdWJzQnlJZChvcmdJZDogc3RyaW5nKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgIGNvbnN0IHVybCA9IGAvYXBpL3J1bnRpbWUvc3lzL3YxLjAvc3lzT3Jncz9wYXJhbT1gICsgZW5jb2RlVVJJQ29tcG9uZW50KGB7XCJwYXJlbnRJZFwiOlwiJHtvcmdJZH1cIixcIndpdGhBbGxTdWJcIjp0cnVlfWApO1xyXG4gICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQodXJsKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0Q3VyVXNlckluZm8odXNlcklkOiBzdHJpbmcpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgY29uc3QgdXJsID0gYC9hcGkvcnVudGltZS9zeXMvdjEuMC91c2Vycy8ke3VzZXJJZH1gO1xyXG4gICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQodXJsKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc2V0UHJvY2Vzc1ZhcmlhYmxlQ29udGV4dCgpIHtcclxuICAgIHRoaXMucHJvY2Vzc1ZhcmlhYmxlQ29udGV4dCA9IG5ldyBBcnJheSgpO1xyXG4gICAgaWYgKHRoaXMuUHJvY2Vzc1ZhcmlhYmxlcyAmJiB0aGlzLlByb2Nlc3NWYXJpYWJsZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICBmb3IgKGNvbnN0IHYgb2YgdGhpcy5Qcm9jZXNzVmFyaWFibGVzKSB7XHJcbiAgICAgICAgY29uc3QgdmFyRW50aXR5ID0ge1xyXG4gICAgICAgICAga2V5OiB2Lm5hbWUsXHJcbiAgICAgICAgICBuYW1lOiB2LmRvY3VtZW50YXRpb24sXHJcbiAgICAgICAgICBkZXNjcmlwdGlvbjogdi5kZXNjcmlwdGlvblxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5wcm9jZXNzVmFyaWFibGVDb250ZXh0LnB1c2godmFyRW50aXR5KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6I635Y+W5qGG5p6255qE6aG257qnd2luZG93XHJcbiAgICog6L+b6KGM6Leo5Z+f5bCB6KOFXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBnZXRUb3BXaW5kb3coKTogV2luZG93IHtcclxuICAgIGxldCBjdXJXaW46IFdpbmRvdyA9IHdpbmRvdy5zZWxmO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB3aGlsZSAoY3VyV2luLmxvY2F0aW9uLm9yaWdpbiA9PT0gY3VyV2luLnBhcmVudC5sb2NhdGlvbi5vcmlnaW4pIHtcclxuICAgICAgICAgICAgaWYgKGN1cldpbiAhPT0gY3VyV2luLnBhcmVudCAmJiAhKGN1cldpbiBhcyBhbnkpLmlzUlRGVG9wV2luKSB7XHJcbiAgICAgICAgICAgICAgICBjdXJXaW4gPSBjdXJXaW4ucGFyZW50O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9IGNhdGNoIChlKSB7IH1cclxuICAgIHJldHVybiBjdXJXaW47XHJcbiAgfVxyXG5cclxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLTAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gIC8vIHVpU3RhdGXliJ3lp4tcclxuICBpbml0VUlTdGF0ZSgpIHtcclxuICAgIHRoaXMucHJvcGVydHlDb25maWcgPSBbXTtcclxuICAgIHRoaXMucHJvcGVydHlEYXRhID0gbnVsbDtcclxuICAgIHRoaXMuY29udGVudCA9ICcnO1xyXG4gICAgdGhpcy5zY2hlbWFzID0gW107XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5bmiYDmnInlrqHmibnoioLngrnkv6Hmga9cclxuICAgKiBAcGFyYW0gZGF0YVxyXG4gICAqL1xyXG4gIGdldFVzZXJBY3RMaXN0KGRhdGE6IGFueVtdKSB7XHJcbiAgICB0aGlzLnVzZXJBY3RMaXN0ID0gW107XHJcbiAgICBpZiAoZGF0YSAmJiBkYXRhLmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCB1c2VyQWN0IG9mIGRhdGEpIHtcclxuICAgICAgICBjb25zdCB1c2VyQWN0SW5mbyA9IHtcclxuICAgICAgICAgIElkOiB1c2VyQWN0LklkLFxyXG4gICAgICAgICAgTmFtZTogdXNlckFjdC5OYW1lXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLnVzZXJBY3RMaXN0LnB1c2godXNlckFjdEluZm8pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5bmiYDmnInnu5PmnZ/oioLngrnkv6Hmga9cclxuICAgKiBAcGFyYW0gZGF0YVxyXG4gICAqL1xyXG4gICAgIGdldEVuZEV2ZW50TGlzdChkYXRhOiBhbnlbXSkge1xyXG4gICAgICB0aGlzLmFsbEFjdExpc3QgPSBbXTtcclxuICAgICAgaWYgKGRhdGEgJiYgZGF0YS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgZm9yIChjb25zdCBlbmRFdmVudCBvZiBkYXRhKSB7XHJcbiAgICAgICAgICBjb25zdCBlbmRFdmVudEluZm8gPSB7XHJcbiAgICAgICAgICAgIElkOiBlbmRFdmVudC5JZCxcclxuICAgICAgICAgICAgTmFtZTogZW5kRXZlbnQuTmFtZVxyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgIC8vIOWPlue7k+adn+iKgueCueWtmOWIsFxyXG4gICAgICAgICAgdGhpcy5hbGxBY3RMaXN0LnB1c2goZW5kRXZlbnRJbmZvKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgLy8g5a2Y5YWl5a6h5om55rS75Yqo6IqC54K5XHJcbiAgICAgIHRoaXMuYWxsQWN0TGlzdCA9IHRoaXMuYWxsQWN0TGlzdC5jb25jYXQodGhpcy51c2VyQWN0TGlzdCk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG4iXX0=