/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, ViewChild, TemplateRef, HostBinding, Injector, ChangeDetectorRef } from '@angular/core';
import { Addendum, VerifySigned, CompleteContext } from '../../entity/complete-context';
import { TaskService } from '../../service/task.service';
import { SysFarrisLookupComponent } from '@gsp-sys/sysmgr-ui';
import { NotifyService } from '@farris/ui-notify';
import { I18nService } from '../../service/i18n/i18n.service';
import { AssigneeInfo } from '../../entity/complete-response';
import { BehaviorSubject, Subject } from 'rxjs';
import { TaskAction } from '../../entity/task-action';
import { WfTaskHandlerService } from '../../wf-task-handler.service';
import { TaskEntity } from '../../entity/task-entity';
import { ActionBaseImplComponent, ActionOrigin } from '@gsp-wf/task-impl-api';
import { LoadingService } from '@farris/ui-loading';
import { MessagerService } from '@farris/ui-messager';
import { ConfigCode } from '../../entity/task-center-config';
import { WorkItemExecuteParam } from '../../entity/workitem-execute-param';
import { UrgeHandleContext, UrgeHandleSimulateContext } from '../../entity/urge-handle';
import { BatchVerifySignedContext } from '../../entity/batchVerifysigned';
import { WfContext } from '../../entity/wfContext';
import { UrgeHandleComponent } from "../urge-handle/urge-handle.component";
import { MultiInstanceType } from '../../entity/add-sign';
export class TaskExecuteComponent extends ActionBaseImplComponent {
    /**
     * @param {?} taskService
     * @param {?} notify
     * @param {?} i18nService
     * @param {?} handlerService
     * @param {?} loadingService
     * @param {?} message
     * @param {?} injector
     * @param {?} cd
     */
    constructor(taskService, notify, i18nService, handlerService, loadingService, message, injector, cd) {
        super();
        this.taskService = taskService;
        this.notify = notify;
        this.i18nService = i18nService;
        this.handlerService = handlerService;
        this.loadingService = loadingService;
        this.message = message;
        this.injector = injector;
        this.cd = cd;
        // 流程实例ID
        this.actionEntity = new TaskAction(); // 动作实体
        // 动作实体
        this.comment = ''; // 审批意见
        //当前动作的默认意见
        this.ifSelectNode = false; // 是否显示选择下一环节
        // 是否显示选择下一环节
        this.ifSelectUser = false; // 是否显示下一环节处理人
        // 是否显示下一环节处理人
        this.ifAssignUser = false; // 是否显示办理人员框
        // 是否显示办理人员框
        this.ifUrgeType = false; // 是否显示接收人框（催办消息接收人）
        // 是否显示接收人框（催办消息接收人）
        this.ifShowCommentToMySelf = false; // 是否显示审批记录仅自己可见
        // 是否显示审批记录仅自己可见
        this.singleSelect = false; // 用户帮助是否单选，默认多选
        // 用户帮助是否单选，默认多选
        this.selectTargetAble = false; // 是否允许选择下一环节
        // 是否允许选择下一环节
        this.hideComment = false; //审批记录仅自己可见
        //审批记录仅自己可见
        this.filter = { notGetCurrentUser: true, notGetStopUser: true, orderField: 'order', withAllOrg: true, orgId: '' }; // 系统用户帮助是否过滤当前人
        // 系统用户帮助是否过滤当前人
        this.selectedUsers = []; // 用户帮助选择后的Id数组
        this.subject = new BehaviorSubject(null);
        this.submitResult = { result: true, isClose: true }; // 动作执行完成后返回的实体结果
        // 动作执行完成后返回的实体结果
        this.bindingData = {}; // 系统帮助多选时用到
        // 系统帮助多选时用到
        this.selectNodeText = this.i18nService.getValue('task.nextNodeText'); // 下一环节显示的文字,"下一环节"
        // 处理人员显示文字
        this.commentPlaceHolder = this.i18nService.getValue('static.inputHolder'); //审批意见框placeholder
        //审批意见框placeholder
        this.showAttachment = true; //是否显示附件上传
        //是否显示附件上传
        this.showSign = true; //是否显示签名
        //是否显示签名
        this.showCommonComment = true; //是否显示常用意见
        //是否显示常用意见
        this.textAreaHeight = 84; //文字框的高度
        // 选择的下一环节ID，并行分支是，逗号隔开的
        this.destNodes = []; // 候选下一环节
        // 候选下一环节
        this.dialogHeight = 270; // 弹框的高度
        // 弹框的高度
        this.dialogHeightBase = 66;
        this.addendum = new Addendum(); // 附件、签名信息
        // 附件、签名信息
        this.groupIcon = '<i class="f-icon f-icon-lookup"></i>';
        this.assignInfos = [{
                // 节点返回的指派信息（多个）
                selectedAssignees: [],
                assigneeInfo: null,
                assignees: [],
                activityName: '',
                dependency: '',
                anonymous: false,
                anonymousText: null,
                resolved: false,
            }];
        // 表单对象
        this.ifRegistered = false; // 表单是否注册
        // 表单是否注册
        this.billMethodConfigs = []; // 表单动作配置列表
        // 表单动作配置列表
        this.configList = []; //任务中心配置项
        //任务中心配置项
        this.verifySigned = new VerifySigned(); // 数字验签参数
        // 数字验签参数
        this.submitDisable = false; // 提交按钮是否禁用
        // 提交按钮是否禁用
        //加签使用
        this.addSign = {
            showSignToSign: false,
            allowSignToSIgn: false,
            showMultiInstanceType: false,
            multiInstanceType: [
                { value: 'Parallel', name: this.i18nService.getValue('addSign.parallel') },
                { value: 'Sequential', name: this.i18nService.getValue('addSign.sequential') },
                { value: 'Preempt', name: this.i18nService.getValue('addSign.preempt') },
            ],
            originMultiInstType: '',
            curMultiInstType: MultiInstanceType.Parallel.toString()
        };
        //动态驳回配置
        this.showBackWardConfig = {
            dynamicBackWardRuleAble: false,
            enable: false,
        };
        /**
         * 任务催办时使用
         */
        this.showUrgeMessageSubject = false; // 是否显示催办消息主题（催办时使用）
        // 内容可编辑
        this.wfContext = new WfContext(); //工作流上下文
        //工作流上下文
        this.cls = '';
        this.POST_MESSAGE_TARGET = window.document.location.origin;
        /**
         * 监听事件处理
         */
        this.eventHandler = (event) => {
            this.messageSubject.next(event);
        };
        // 如果存在消息监听，先删掉
        if (TaskExecuteComponent.func) {
            window.removeEventListener('message', TaskExecuteComponent.func, false);
        }
        this.addMessageListener();
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        /** @type {?} */
        const load = this.loadingService.show();
        this.taskService.getAllUserConfig().subscribe((configList) => {
            load.close();
            this.configList = configList;
            /** @type {?} */
            const comment = configList.find(c => c.configCode === ConfigCode.Default_Approval_Comment);
            /** @type {?} */
            const if_store_comment = configList.find(c => c.configCode === ConfigCode.If_Store_Comment);
            /** @type {?} */
            let passComment;
            /** @type {?} */
            let backComment;
            if (comment && comment.currentValue) {
                passComment = JSON.parse(comment.currentValue).pass;
                backComment = JSON.parse(comment.currentValue).back;
                if (this.actionEntity.code === 'Pass') {
                    this.comment = passComment;
                }
                if (this.actionEntity.code === 'Back') {
                    this.comment = backComment;
                }
            }
            if (if_store_comment && if_store_comment.currentValue === 'true') {
                if (this.wfCacheComment) {
                    if (this.actionEntity.code == 'Back' && this.wfCacheComment == passComment) {
                    }
                    else {
                        this.comment = this.wfCacheComment;
                    }
                }
            }
        }, () => {
            load.close();
        });
        // 从任务办理界面打开时，才注册服务
        if (this.origin === ActionOrigin.TaskForm) {
            this.initFormEvent();
            // 获取表单操作配置
            this.taskService.getAppInfo(this.workItemId).subscribe((re) => {
                if (re && re.billMethodConfigs && re.billMethodConfigs.length) {
                    this.billMethodConfigs = re.billMethodConfigs;
                }
            });
        }
        /** @type {?} */
        let context = new UrgeHandleSimulateContext();
        context.procInstId = this.processInstanceId;
    }
    /**
     * @private
     * @return {?}
     */
    addMessageListener() {
        window.addEventListener('message', this.eventHandler, false);
        TaskExecuteComponent.func = this.eventHandler;
    }
    /**
     * 重写父类方法
     * @param {?} task
     * @return {?}
     */
    setTask(task) {
        if (task) {
            this.task = task;
            this.workItemId = task.sourceId;
            this.processInstanceId = task.processInstanceId;
            this.wfContext.processCategoryId = task.categoryId;
        }
    }
    /**
     * 重写父类方法
     * @param {?} action
     * @return {?}
     */
    setAction(action) {
        if (action) {
            this.actionEntity = action;
            if (this.task) { // 单个、批量都setAction，单个才执行模拟
                this.execute(this.actionEntity);
            }
        }
    }
    /**
     * 前事件初始化，将服务注册到window上，供表单调用
     * 任务办理界面的window，表单的window.parent
     * @private
     * @return {?}
     */
    initFormEvent() {
        // 审批前事件
        /** @type {?} */
        const actionToken = this.workItemId + 'action';
        /** @type {?} */
        const subjectCode = 'FormSubjectCode';
        ((/** @type {?} */ (window))).gspWfEventService = ((/** @type {?} */ (window))).gspWfEventService || {};
        ((/** @type {?} */ (window))).gspWfEventService.register = (formObject) => {
            this.taskService.subjectRegister(subjectCode, actionToken);
            this.ifRegistered = true;
            this.formObject = formObject;
        };
        ((/** @type {?} */ (window))).gspWfEventService.notify = (value) => {
            if (this.ifRegistered) {
                this.taskService.subjectNotify(actionToken, value);
            }
            else { // 表单不注册，也可直接调用notify
                // 表单不注册，也可直接调用notify
                /** @type {?} */
                const simulateToken = this.workItemId + 'simulate';
                this.taskService.subjectRegister(subjectCode, simulateToken);
                this.taskService.subjectResponse(simulateToken, '', (value) => {
                    value && value.dataChanged && this.completeSimulate();
                });
                this.taskService.subjectNotify(simulateToken, value);
            }
        };
    }
    /**
     * 点击提交的时候，执行表单的前事件
     * @private
     * @return {?}
     */
    beforeCompleteSubmit() {
        /** @type {?} */
        const passPreActions = this.billMethodConfigs.filter(action => action.action === this.actionEntity.code && action.executionTime === 'Pre').sort((x, y) => x.sortOrder - y.sortOrder);
        // 如果表单注册了事件
        if (passPreActions && passPreActions.length) {
            this.executeFormActions([...passPreActions]);
        }
        // 没有定义前后事件，直接提交
        else {
            this.completeSubmit();
        }
    }
    /**
     * @private
     * @param {?} formActions 表单中要执行的动作
     * @return {?}
     */
    executeFormActions(formActions) {
        if (formActions.length > 0) {
            this.messageSubject = new Subject();
            this.messageSubject.subscribe((re) => {
                console.log(re.data);
                /** @type {?} */
                const data = re.data.data;
                if (data.result === true) {
                    if (data.dataChanged === true) { // 如果需要预解析，先预解析再继续执行
                        this.completeSimulate().subscribe((r) => {
                            if (r) { // 预解析正确
                                this.executeFormActions(formActions);
                            }
                            else { // 预解析错误
                                this.subject.next({ result: false, isClose: false }); // 任务办理界面不关闭
                            }
                        });
                    }
                    else { // 不需要预解析，继续执行
                        this.executeFormActions(formActions);
                    }
                }
                else {
                    this.subject.next({ result: false, isClose: false }); // 任务办理界面不关闭
                    throw new Error('审批前表单操作执行失败！');
                }
            });
            // 执行表单动作
            /** @type {?} */
            const formAction = formActions.shift();
            this.sendMessage(this.workItemId, formAction);
        }
        else {
            this.completeSubmit();
        }
    }
    /**
     * 预解析
     * @param {?} action
     * @return {?}
     */
    execute(action) {
        switch (action.code) {
            case 'AssignUser': // 指派 单独参数
                this.assignSimulate();
                break;
            case 'Claim': // 领用
                this.showAttachment = false;
                break;
            case 'Unclaim': // 取消领用
                break;
            case 'Retrieve': // 取回
                break;
            case 'Transfer': // 移交 单独参数
                this.transferSimulate();
                break;
            case 'AddSign': // 加签
                this.addSignSimulate();
                break;
            case 'AddSignFront': // 征询
                this.addSignFrontSimulate();
                break;
            case 'Notify': //知会
                this.notifySimulate();
                break;
            case 'Refuse': // 否决
                break;
            case 'Obsolete': // 作废
                break;
            case 'Comment': // 评论
                break;
            case 'ReadTask': // 已阅
                this.ifShowCommentToMySelf = true;
                this.dialogHeight = 340;
                break;
            case 'UrgeHandle': //催办
                this.urgeHandleSimulate();
                break;
            case 'CancelConsult': //取消征询
                break;
            default: // 通过 驳回 重新提交 其他自定义的动作
                this.completeSimulate();
        }
    }
    /**
     * 真正地提交
     * 重写父类方法
     * @return {?}
     */
    submit() {
        switch (this.actionEntity.code) {
            case 'AssignUser': // 指派 单独参数
                this.assignSubmit();
                break;
            case 'Claim': // 领用
                this.claimSubmit();
                break;
            case 'Unclaim': // 取消领用
                this.unClaimSubmit();
                break;
            case 'Retrieve': // 取回
                this.retrieveSubmit();
                break;
            case 'Transfer': // 移交 单独参数
                this.transferSubmit();
                break;
            case 'AddSign': // 加签
                this.addSignSubmit();
                break;
            case 'AddSignFront': // 征询
                this.addSignFrontSubmit();
                break;
            case 'Comment': // 评论
                this.commentSubmit();
                break;
            case 'Notify': //知会
                this.notifySubmit();
                break;
            case 'ReadTask': // 已阅
                this.readSubmit();
                break;
            case 'UrgeHandle': //催办
                this.urgeHandleSubmit();
                break;
            case 'CancelConsult': //取消征询
                this.cancelConsultSubmit();
                break;
            default: // 通过 驳回 否决 作废 重新提交 其他自定义动作
                this.beforeCompleteSubmit();
        }
        return this.subject.asObservable();
    }
    /**
     * 批量办理
     * @param {?} tasks 批量任务列表
     * @return {?}
     */
    batchSubmit(tasks) {
        /** @type {?} */
        let filterNum = 0;
        /** @type {?} */
        const subject = new BehaviorSubject(null);
        /** @type {?} */
        const successSubmit = { result: true, isClose: true };
        if ((this.actionEntity.code === 'Back' || this.actionEntity.code === 'Refuse') && !this.comment) { // 批量意见是否必填不支持根据审批项配置操作，批量驳回意见必填
            this.notify.warning(this.i18nService.getValue('cueWords.inputOpinion'));
            subject.next({ result: false, isClose: false });
        }
        else if (this.comment.length > 300) {
            this.notify.warning(this.i18nService.getValue('task.commentTooLong'));
            subject.next({ result: false, isClose: false });
        }
        else {
            /** @type {?} */
            const noActionTasks = tasks.filter(t => t.actions.findIndex(a => a.code === this.actionEntity.code) === -1);
            if (noActionTasks && noActionTasks.length > 0) {
                for (const a of noActionTasks) {
                    filterNum++;
                    if (filterNum === tasks.length) {
                        subject.next(successSubmit);
                        this.showBatchSubmitInfo(0, filterNum, 0, 0);
                    }
                }
            }
            /** @type {?} */
            let actTasks = tasks.filter(t => t.actions.some(a => a.code === this.actionEntity.code));
            if (actTasks && actTasks.length > 0) {
                this.executeBatchEvent([...this.actionEntity.preEvents.filter(e => e.batch)], actTasks, this.actionEntity, (re) => {
                    if (re && re.result) {
                        if (re.passTasks) {
                            /** @type {?} */
                            const backTasks = actTasks.filter(t => re.passTasks.findIndex(id => id === t.id) === -1);
                            if (backTasks && backTasks.length > 0) {
                                for (const t of backTasks) {
                                    filterNum++;
                                    if (filterNum === tasks.length) {
                                        subject.next(successSubmit);
                                        this.showBatchSubmitInfo(0, filterNum, 0, 0);
                                    }
                                }
                            }
                            actTasks = actTasks.filter(t => re.passTasks.findIndex(id => id === t.id) > -1);
                        }
                        if (actTasks.length > 0) {
                            /** @type {?} */
                            const batchVerifySignedcontext = new BatchVerifySignedContext();
                            this.batchverifySubmit(actTasks, filterNum, batchVerifySignedcontext).subscribe((r) => {
                                if (r && r.successSubmit && r.successSubmit.result) {
                                    this.executeBatchEvent([...this.actionEntity.postEvents.filter(e => e.batch)], r.successHandleTasks, this.actionEntity, () => {
                                        subject.next(r.successSubmit);
                                    }, { result: true, passTasks: r.successHandleTasks.map(t => t.id) });
                                }
                            });
                        }
                    }
                    else {
                        subject.next({ result: false, isClose: false });
                    }
                }, { result: true, passTasks: actTasks.map(t => t.id) });
            }
        }
        return subject.asObservable();
    }
    /**
     * @private
     * @param {?} tasks
     * @param {?=} filterNum
     * @param {?=} batchVerifySignedcontext
     * @return {?}
     */
    batchverifySubmit(tasks, filterNum = 0, batchVerifySignedcontext) {
        /** @type {?} */
        const subject = new Subject();
        /** @type {?} */
        const verifyTasks = tasks.filter(t => {
            /** @type {?} */
            const action = t.actions.find(a => a.code === this.actionEntity.code);
            if (!action) {
                return false;
            }
            else {
                if (action.parameters.some(p => p.code === 'CertificationNecessary' && p.value === 'true')) {
                    return true;
                }
                else {
                    return false;
                }
            }
        });
        /** @type {?} */
        const verifyTasksNum = verifyTasks.length;
        if (verifyTasks.length > 0) {
            /** @type {?} */
            const that = this;
            if (((/** @type {?} */ (window))).gspframeworkService &&
                ((/** @type {?} */ (window))).gspframeworkService.rtf) {
                ((/** @type {?} */ (window))).gspframeworkService.rtf.caEvent.on(((/** @type {?} */ (window))).gspframeworkService.rtf.caEvent.signedMsgOverToken(), 'signedMsgOver', function signMsgOver(signedData) {
                    if (signedData && signedData[0] === 'true' && signedData.length > 0) {
                        // 证书对象
                        /** @type {?} */
                        const cert = gspCA.getCurCert();
                        // 验签参数
                        that.verifySigned = {
                            // 要验证的证书base64编码的字符流(certkey)
                            certBase64Info: gspCA.getCertBase64(cert),
                            // 签名原信息
                            msg: ['BatchDigitalSignature'],
                            // 要签名后信息
                            signedmsg: signedData[1][0],
                            // 用户使用场景，目前未使用，可以为空
                            useCase: null,
                        };
                        batchVerifySignedcontext.verifySigned = that.verifySigned;
                        that.taskService.batchVerifySigned(batchVerifySignedcontext).subscribe(() => {
                            /** @type {?} */
                            const verifyTasksNum = 0;
                            that.batchComplete(tasks, filterNum, verifyTasksNum).subscribe(re => {
                                subject.next(re);
                            });
                        }, (error) => {
                            /** @type {?} */
                            const otherTasks = tasks.filter(t => verifyTasks.findIndex(task => task.id === t.id) === -1);
                            that.batchComplete(otherTasks, filterNum, verifyTasksNum).subscribe(re => {
                                subject.next(re);
                            });
                        });
                    }
                    else {
                        that.notify.error(signedData[1]);
                        subject.next({ successSubmit: { result: false, isClose: false }, successHandleTasks: new Array() });
                    }
                });
            }
            /** @type {?} */
            const msg = ['BatchDigitalSignature'];
            gspCA.getSignedMsg(msg);
        }
        else {
            this.batchComplete(tasks, filterNum, verifyTasksNum).subscribe(re => {
                subject.next(re);
            });
        }
        return subject.asObservable();
    }
    /**
     * @private
     * @param {?} tasks
     * @param {?=} filterNum
     * @param {?=} verifyTasksNum
     * @return {?}
     */
    batchComplete(tasks, filterNum = 0, verifyTasksNum) {
        /** @type {?} */
        const subject = new Subject();
        /** @type {?} */
        let successNum = 0;
        /** @type {?} */
        let failedNum = 0;
        /** @type {?} */
        let errorNum = 0;
        /** @type {?} */
        const successSubmit = { result: true, isClose: true };
        /** @type {?} */
        const successHandleTasks = new Array();
        /** @type {?} */
        const load = this.loadingService.show();
        for (const task of tasks) {
            /** @type {?} */
            const context = new CompleteContext();
            context.workItemId = task.sourceId;
            context.conclusionValue = this.actionEntity.code;
            context.comment = this.comment;
            context.addendum = this.addendum;
            this.taskService.completeSimulate(context).subscribe((response) => {
                if (response && response.needInteraction === true) { // 需要交互
                    failedNum++;
                    if (successNum + failedNum + errorNum === tasks.length) {
                        load.close();
                        subject.next({ successSubmit, successHandleTasks });
                        this.showBatchSubmitInfo(successNum, failedNum + filterNum, errorNum, verifyTasksNum);
                    }
                }
                else { // 不需要交互
                    this.taskService.complete(context).subscribe(() => {
                        successNum++;
                        successHandleTasks.push(task);
                        if (successNum + failedNum + errorNum === tasks.length) {
                            load.close();
                            subject.next({ successSubmit, successHandleTasks });
                            this.showBatchSubmitInfo(successNum, failedNum + filterNum, errorNum, verifyTasksNum);
                        }
                    }, () => {
                        errorNum++;
                        if (successNum + failedNum + errorNum === tasks.length) {
                            load.close();
                            subject.next({ successSubmit, successHandleTasks });
                            this.showBatchSubmitInfo(successNum, failedNum + filterNum, errorNum, verifyTasksNum);
                        }
                    });
                }
            }, () => {
                errorNum++;
                if (successNum + failedNum + errorNum === tasks.length) {
                    load.close();
                    subject.next({ successSubmit, successHandleTasks });
                    this.showBatchSubmitInfo(successNum, failedNum + filterNum, errorNum, verifyTasksNum);
                }
            });
        }
        return subject.asObservable();
    }
    /**
     * 批量提交提示信息
     * @private
     * @param {?} successNum 成功条数
     * @param {?} failedNum 需要交互的条数
     * @param {?} errorNum 执行报错的条数
     * @param {?} verifyTasksNum 需要数字签名的条数
     * @return {?}
     */
    showBatchSubmitInfo(successNum, failedNum, errorNum, verifyTasksNum) {
        /** @type {?} */
        let message = '';
        if (successNum && !failedNum && !errorNum && !verifyTasksNum) { // 批量全部成功
            this.notify.success(this.i18nService.getValue('cueWords.success'));
        }
        else { // 非全部成功
            successNum && (message += this.i18nService.getValue('batchSubmit.success') + `【${successNum}】` + this.i18nService.getValue('batchSubmit.row'));
            errorNum && (message += this.i18nService.getValue('batchSubmit.error') + `【${errorNum}】` + this.i18nService.getValue('batchSubmit.row'));
            failedNum && (message += this.i18nService.getValue('batchSubmit.failed') + `【${failedNum}】` + this.i18nService.getValue('batchSubmit.row'));
            verifyTasksNum && (message += this.i18nService.getValue('batchSubmit.validationFailed') + `【${verifyTasksNum}】` + this.i18nService.getValue('batchSubmit.row'));
            message += this.i18nService.getValue('batchSubmit.single');
            this.message.show('warning', message, { safeHtml: false });
        }
    }
    /**
     * @private
     * @param {?} events
     * @param {?} entities
     * @param {?} action
     * @param {?} handler
     * @param {?=} result
     * @return {?}
     */
    executeBatchEvent(events, entities, action, handler, result) {
        if (this.injector) {
            if (events && events.length > 0 && entities && entities.length > 0) {
                /** @type {?} */
                const event = events.shift();
                /** @type {?} */
                const url = event.eventImpl.split('#')[0];
                /** @type {?} */
                const func = event.eventImpl.split('#')[1];
                System.import(url + '?v=' + new Date().getTime().toString())
                    .then((moduleFactories) => {
                    /** @type {?} */
                    const moduleFactory = Object.values(moduleFactories)[0];
                    /** @type {?} */
                    const moduleRef = moduleFactory.create(this.injector);
                    /** @type {?} */
                    const context = {
                        action,
                        taskList: entities,
                        origin: 'TaskCenter',
                        preEventResult: result
                    };
                    moduleRef.instance[func].apply(moduleRef.instance, [context]).subscribe((re) => {
                        if (re && re.result) {
                            this.executeBatchEvent(events, entities, action, handler, re);
                        }
                        else {
                            handler(re);
                        }
                    });
                });
            }
            else {
                handler(result);
            }
        }
        else {
            handler(result);
        }
    }
    /**
     * @private
     * @return {?}
     */
    assignSimulate() {
        this.showAttachment = false;
        this.ifAssignUser = true;
        this.dialogHeight += this.dialogHeightBase;
        this.taskService.getAssigneeInfo(this.workItemId).subscribe((info) => {
            this.assignInfos = [{
                    selectedAssignees: info.selectedAssignees,
                    assigneeInfo: info.assigneeInfo,
                    assignees: info.selectedAssignees.map(user => { return { id: user.id, name: user.name }; }),
                    activityName: info.activityDefinitionName,
                    dependency: info.dependency,
                    anonymous: info.anonymous,
                    anonymousText: info.anonymousText,
                    resolved: info.resolved,
                }];
        }, (error) => {
            this.taskService.error(error);
        });
    }
    /**
     * @private
     * @return {?}
     */
    transferSimulate() {
        this.ifSelectUser = true;
        this.selectUserText = this.actionEntity.name + this.i18nService.getValue('task.person');
        this.singleSelect = true;
        this.dialogHeight += this.dialogHeightBase;
        this.getOrganizationScope();
    }
    /**
     * @private
     * @return {?}
     */
    addSignFrontSimulate() {
        this.ifSelectUser = true;
        this.selectUserText = this.actionEntity.name + this.i18nService.getValue('task.person');
        this.dialogHeight += this.dialogHeightBase;
        this.getOrganizationScope();
    }
    /**
     * @private
     * @return {?}
     */
    addSignSimulate() {
        this.ifSelectUser = true;
        this.selectUserText = this.actionEntity.name + this.i18nService.getValue('task.person');
        this.dialogHeight += this.dialogHeightBase * 2;
        /** @type {?} */
        const load = this.loadingService.show();
        this.taskService.getAdhocConfig(this.workItemId).subscribe((response) => {
            load.close();
            this.addSign.showSignToSign = response.showSignToSign;
            this.addSign.originMultiInstType = response.multiInstanceType;
            if (response.organization) {
                this.filter.orgId = response.organization.id;
                this.filter.withAllOrg = response.organization.includeChildren;
            }
        }, error => {
            load.close();
            this.taskService.error(error);
        });
    }
    /**
     * @private
     * @return {?}
     */
    notifySimulate() {
        this.ifSelectUser = true;
        this.selectUserText = this.actionEntity.name + this.i18nService.getValue('task.person');
        this.dialogHeight += this.dialogHeightBase;
        this.singleSelect = false;
        this.getOrganizationScope();
    }
    /**
     * @private
     * @return {?}
     */
    getOrganizationScope() {
        /** @type {?} */
        const load = this.loadingService.show();
        this.taskService.getOrganizationScope(this.workItemId, this.actionEntity.code).subscribe((orgList) => {
            load.close();
            if (orgList.length) { // 全员会返回空数组
                this.filter.orgId = orgList[0].id;
                this.filter.withAllOrg = orgList[0].includeChildren;
            }
        }, error => {
            load.close();
            this.taskService.error(error);
        });
    }
    /**
     * 催办模拟
     * @private
     * @return {?}
     */
    urgeHandleSimulate() {
        this.ifSelectNode = false;
        this.ifSelectUser = false;
        this.ifAssignUser = false;
        this.ifUrgeType = true;
        this.commentPlaceHolder = this.i18nService.getValue('task.urgeComment');
        this.showCommonComment = false;
        this.showAttachment = false;
        this.showUrgeMessageSubject = true;
        this.showSign = false;
        this.dialogHeight += this.dialogHeightBase * 2;
        /** @type {?} */
        const load = this.loadingService.show();
        /** @type {?} */
        let context = new UrgeHandleSimulateContext();
        context.procInstId = this.processInstanceId;
        this.taskService.urgeHandleSimulate(context).subscribe((re) => {
            load.close();
            this.urgeHandleResponse = re;
            if (re && re.urgeUsers && re.urgeUsers.length) {
                this.urgeMessageSubject = re.urgeUsers[0].urgeInfos[0].urgeMessageSubject;
                this.urgeMessageContent = re.urgeUsers[0].urgeInfos[0].urgeMessageContent;
                this.subjectEditable = re.urgeUsers[0].urgeInfos[0].subjectEditable;
                this.contentEditable = re.urgeUsers[0].urgeInfos[0].contentEditable;
                this.addReminder = re.urgeUsers[0].urgeInfos[0].addReminder;
                /** @type {?} */
                let urgeUsers = re.urgeUsers;
                /** @type {?} */
                let assignInfo = new AssigneeInfo();
                urgeUsers.forEach(user => {
                    if (user.anonymousText) {
                        user.name = user.anonymousText;
                        user.code = '';
                        user.orgName = '';
                    }
                });
                assignInfo.assigneeUsers = urgeUsers;
                assignInfo.selectAssignee = urgeUsers.length > 1 ? true : false;
                assignInfo.multiSelect = true;
                this.assignInfos[0].assigneeInfo = assignInfo;
                this.assignInfos[0].assignees = urgeUsers.length == 1 ? urgeUsers : [];
            }
            else {
                this.notify.warning(this.i18nService.getValue('task.noUrgeUsers'));
            }
        }, error => {
            load.close();
            this.taskService.error(error);
        });
    }
    /**
     * 预解析
     * 通过、驳回、重新提交、其他自定义动作
     * @private
     * @return {?}
     */
    completeSimulate() {
        /** @type {?} */
        const subject = new Subject();
        this.ifSelectNode = true;
        this.ifAssignUser = true;
        this.dialogHeight += this.dialogHeightBase * 2;
        if (this.actionEntity.parameters && this.actionEntity.parameters.length) { // 是否允许加签
            this.actionEntity.parameters.forEach((p) => {
                if (p.code === 'AddSignBehindAble' && p.value === 'true') {
                    this.ifSelectUser = true;
                    this.selectUserText = this.i18nService.getValue('task.addSign') + this.i18nService.getValue('task.person');
                    this.dialogHeight += this.dialogHeightBase;
                    /** @type {?} */
                    const load = this.loadingService.show();
                    //获取加签范围
                    this.taskService.getOrganizationScope(this.workItemId, 'AddSignBehind').subscribe((orgList) => {
                        load.close();
                        if (orgList.length) { // 全员会返回空数组
                            this.filter.orgId = orgList[0].id;
                            this.filter.withAllOrg = orgList[0].includeChildren;
                        }
                    }, error => {
                        this.taskService.error(error);
                    });
                }
            });
        }
        if (this.actionEntity.code === 'Back') {
            this.selectNodeText = this.i18nService.getValue('task.backNodeText');
        }
        /** @type {?} */
        const context = new CompleteContext();
        context.workItemId = this.workItemId;
        context.conclusionValue = this.actionEntity.code;
        /** @type {?} */
        const load = this.loadingService.show();
        this.taskService.completeSimulate(context).subscribe((response) => {
            load.close();
            this.clearSimulateResult();
            this.response = response;
            this.showBackWardConfig.dynamicBackWardRuleAble = response.dynamicBackWardRuleAble;
            if (!response.simulationPaths.length) { // 模拟返回路径为空时
                this.ifSelectNode = false;
                this.ifAssignUser = false;
            }
            else { // 模拟返回了路径
                this.destNodes = response.simulationPaths && response.simulationPaths.map(path => ({
                    id: path.nodeInfoList.map(node => node.activityDefinitionId).join('，'),
                    name: path.nodeInfoList.map(node => node.activityDefinitionName).join('，')
                }));
                // 处理默认分支，无默认分支返回-1
                /** @type {?} */
                const defaultIndex = response.simulationPaths.findIndex(a => a.default);
                if (defaultIndex > -1) {
                    this.selectedNodeId = this.destNodes[defaultIndex].id;
                    this.nodePlaceholder = this.destNodes[defaultIndex].name.indexOf('，') > -1 ? response.simulationPaths[defaultIndex].name : this.destNodes[defaultIndex].name;
                    this.setAssignInfo(response.simulationPaths[defaultIndex].nodeInfoList);
                }
                else {
                    this.nodePlaceholder = this.i18nService.getValue('task.selectPlaceholder');
                }
            }
            subject.next(true);
        }, error => {
            load.close();
            subject.next(false);
            this.taskService.error(error);
        });
        return subject.asObservable();
    }
    /**
     * 清空预解析结果
     * @private
     * @return {?}
     */
    clearSimulateResult() {
        this.assignInfos = [{
                // 重新预解析时清空
                selectedAssignees: [],
                assigneeInfo: null,
                assignees: [],
                activityName: '',
                dependency: '',
                anonymous: false,
                anonymousText: '',
                resolved: false,
            }];
        this.destNodes = []; // 重新预解析时清空
        this.nodePlaceholder = '';
        this.selectedNodeId = '';
    }
    /**
     * 设置当前指派信息帮助参数
     * @private
     * @param {?} nodeInfoList
     * @return {?}
     */
    setAssignInfo(nodeInfoList) {
        this.assignInfos = [];
        this.selectedNodeId.split('，').forEach(nodeId => {
            /** @type {?} */
            const node = nodeInfoList.find(node => node.activityDefinitionId === nodeId);
            if (node) {
                this.assignInfos.push({
                    selectedAssignees: node.selectedAssignees,
                    assigneeInfo: node.assigneeInfo,
                    assignees: node.selectedAssignees.map(user => { return { id: user.id, name: user.name }; }),
                    activityName: node.activityDefinitionName,
                    dependency: node.dependency,
                    anonymous: node.anonymous,
                    anonymousText: node.anonymousText,
                    resolved: node.resolved,
                });
            }
            else {
                this.assignInfos.push({
                    selectedAssignees: [],
                    assigneeInfo: null,
                    assignees: [],
                    activityName: '',
                    dependency: '',
                    anonymous: false,
                    anonymousText: '',
                    resolved: false,
                });
            }
        });
        this.cd.detectChanges();
    }
    /**
     * 点击确定后方法
     * @private
     * @return {?}
     */
    assignSubmit() {
        if (this.comment.length > 300) {
            this.notify.warning(this.i18nService.getValue('task.commentTooLong'));
            this.subject.next({ result: false, isClose: false });
        }
        else if (!this.assignInfos[0].assignees.length) {
            this.notify.warning(this.i18nService.getValue('static.assignee.noAssignee'));
            this.subject.next({ result: false, isClose: false });
        }
        else {
            /** @type {?} */
            const context = {
                workItemId: this.workItemId,
                assigneeIds: this.assignInfos[0].assignees.map(user => user.id),
                comment: this.comment,
                addendum: this.addendum
            };
            this.taskService.assignNextUsersByWorkItemId(context).subscribe(() => {
                this.notify.success(this.i18nService.getValue('static.assignee.successAssign'));
                this.subject.next(this.submitResult);
            }, (error) => {
                this.subject.next({ result: false, isClose: false });
                this.taskService.error(error);
            });
        }
    }
    /**
     * @private
     * @return {?}
     */
    claimSubmit() {
        if (this.comment.length > 300) {
            this.notify.warning(this.i18nService.getValue('task.commentTooLong'));
            this.subject.next({ result: false, isClose: false });
        }
        else {
            this.taskService.claim(this.workItemId, this.comment).subscribe(() => {
                this.notify.success(this.i18nService.getValue('cueWords.successClaim')),
                    this.submitResult.isClose = false;
                this.subject.next(this.submitResult);
            }, (error) => {
                this.subject.next({ result: false, isClose: false });
                this.taskService.error(error);
            });
        }
    }
    /**
     * @private
     * @return {?}
     */
    unClaimSubmit() {
        if (this.comment.length > 300) {
            this.notify.warning(this.i18nService.getValue('task.commentTooLong'));
            this.subject.next({ result: false, isClose: false });
        }
        else {
            this.taskService.unClaim(this.workItemId, this.comment).subscribe(() => {
                this.notify.success(this.i18nService.getValue('cueWords.successUnClaim')),
                    this.subject.next(this.submitResult);
            }, (error) => {
                this.subject.next({ result: false, isClose: false });
                this.taskService.error(error);
            });
        }
    }
    /**
     * @private
     * @return {?}
     */
    retrieveSubmit() {
        if (this.comment.length > 300) {
            this.notify.warning(this.i18nService.getValue('task.commentTooLong'));
            this.subject.next({ result: false, isClose: false });
        }
        else {
            /** @type {?} */
            const retrieveContext = {
                workItemId: this.workItemId,
                comment: this.comment
            };
            this.taskService.retrieve(retrieveContext).subscribe(() => {
                this.notify.success(this.i18nService.getValue('cueWords.successRetrieve'));
                this.subject.next(this.submitResult);
            }, (error) => {
                this.subject.next({ result: false, isClose: false });
                this.taskService.error(error);
            });
        }
    }
    /**
     * @private
     * @return {?}
     */
    transferSubmit() {
        if (this.comment.length > 300) {
            this.notify.warning(this.i18nService.getValue('task.commentTooLong'));
            this.subject.next({ result: false, isClose: false });
        }
        else if (this.selectedUsers.length === 0) {
            this.notify.warning(this.i18nService.getValue('task.selectPlaceholder') + this.selectUserText);
            this.subject.next({ result: false, isClose: false });
        }
        else {
            /** @type {?} */
            const context = {
                workItemId: this.workItemId,
                assignee: this.selectedUsers[0],
                comment: this.comment,
                addendum: this.addendum
            };
            this.submitDisable = true; // 禁用提交按钮
            this.taskService.transfer(context).subscribe(() => {
                this.notify.success(this.i18nService.getValue('static.transfer.successTransfer'));
                this.subject.next(this.submitResult);
            }, (error) => {
                this.subject.next({ result: false, isClose: false });
                this.taskService.error(error);
            });
        }
    }
    /**
     * @private
     * @return {?}
     */
    commentSubmit() {
        if (!this.comment || this.comment.length === 0) {
            this.notify.warning(this.i18nService.getValue('cueWords.inputOpinion'));
            this.subject.next({ result: false, isClose: false });
        }
        else if (this.comment.length > 300) {
            this.notify.warning(this.i18nService.getValue('task.commentTooLong'));
            this.subject.next({ result: false, isClose: false });
        }
        else {
            /** @type {?} */
            const context = {
                workItemId: this.workItemId,
                comment: this.comment,
                addendum: this.addendum
            };
            this.taskService.comment(context).subscribe(() => {
                this.notify.success(this.i18nService.getValue('static.comment.successComment'));
                this.submitResult.isClose = false;
                this.subject.next(this.submitResult);
            }, (error) => {
                this.subject.next({ result: false, isClose: false });
                this.taskService.error(error);
            });
            this.comment = '';
        }
    }
    /**
     * @private
     * @return {?}
     */
    addSignFrontSubmit() {
        if (this.comment.length > 300) {
            this.notify.warning(this.i18nService.getValue('task.commentTooLong'));
            this.subject.next({ result: false, isClose: false });
        }
        else if (this.selectedUsers.length === 0) {
            this.notify.warning(this.i18nService.getValue('task.selectPlaceholder') + this.selectUserText);
            this.subject.next({ result: false, isClose: false });
        }
        else {
            /** @type {?} */
            const context = {
                workItemId: this.workItemId,
                action: this.actionEntity.code,
                assignees: this.selectedUsers,
                comment: this.comment,
                addendum: this.addendum
            };
            this.submitDisable = true; // 禁用提交按钮
            this.taskService.addSign(context).subscribe(() => {
                this.notify.success(this.i18nService.getValue('cueWords.success'));
                this.subject.next(this.submitResult);
            }, (error) => {
                this.subject.next({ result: false, isClose: false });
                this.taskService.error(error);
            });
        }
    }
    /**
     * @private
     * @return {?}
     */
    addSignSubmit() {
        if (this.comment.length > 300) {
            this.notify.warning(this.i18nService.getValue('task.commentTooLong'));
            this.subject.next({ result: false, isClose: false });
        }
        else if (this.selectedUsers.length === 0) {
            this.notify.warning(this.i18nService.getValue('task.selectPlaceholder') + this.selectUserText);
            this.subject.next({ result: false, isClose: false });
        }
        else {
            /** @type {?} */
            let payload = {
                workItemId: this.workItemId,
                comment: this.comment,
                conclusionValue: "Pass",
                signAssignees: this.selectedUsers,
                actionCode: "AddSignBehind",
                multiInstanceType: this.addSign.showMultiInstanceType ? this.addSign.curMultiInstType : this.addSign.originMultiInstType,
                counterSignRule: 'allPass',
                completedRule: 'all',
                allowSignToSign: this.addSign.allowSignToSIgn,
                activityName: '',
                addendum: this.addendum
            };
            /** @type {?} */
            const load = this.loadingService.show();
            this.taskService.adhocAssignee(payload).subscribe(re => {
                this.notify.success(this.i18nService.getValue('cueWords.success'));
                this.subject.next({ result: true, isClose: true });
                load.close();
            }, error => {
                load.close();
                this.subject.next({ result: false, isClose: false });
                this.taskService.error(error);
            });
        }
    }
    /**
     * @private
     * @return {?}
     */
    readSubmit() {
        if (this.comment.length > 300) {
            this.notify.warning(this.i18nService.getValue('task.commentTooLong'));
            this.subject.next({ result: false, isClose: false });
        }
        else {
            /** @type {?} */
            const context = {
                workItemId: this.workItemId,
                comment: this.comment,
                addendum: this.addendum,
                hideComment: this.hideComment
            };
            this.taskService.readTask(context).subscribe(() => {
                this.notify.success(this.i18nService.getValue('cueWords.success'));
                this.subject.next({ result: true, isClose: true });
            }, error => {
                this.taskService.error(error);
                this.subject.next({ result: false, isClose: false });
            });
        }
    }
    /**
     * @private
     * @return {?}
     */
    notifySubmit() {
        if (this.comment.length > 300) {
            this.notify.warning(this.i18nService.getValue('task.commentTooLong'));
            this.subject.next({ result: false, isClose: false });
        }
        else if (this.selectedUsers.length === 0) {
            this.notify.warning(this.i18nService.getValue('task.selectPlaceholder') + this.selectUserText);
            this.subject.next({ result: false, isClose: false });
        }
        else {
            /** @type {?} */
            const context = {
                workItemId: this.workItemId,
                comment: this.comment,
                addendum: this.addendum,
                action: this.actionEntity.code,
                assignees: this.selectedUsers,
            };
            this.taskService.addSign(context).subscribe(() => {
                this.notify.success(this.i18nService.getValue('cueWords.success'));
                this.subject.next({ result: true, isClose: false });
            }, (error) => {
                this.subject.next({ result: false, isClose: false });
                this.taskService.error(error);
            });
        }
    }
    /**
     * 催办提交
     * @private
     * @return {?}
     */
    urgeHandleSubmit() {
        if (this.comment.length > 300) {
            this.notify.warning(this.i18nService.getValue('task.commentTooLong'));
            this.subject.next({ result: false, isClose: false });
        }
        else if (!this.urgeHandleResponse.urgeUsers || !this.urgeHandleResponse.urgeUsers.length) { //没有符合条件的催办用户
            this.notify.warning(this.i18nService.getValue('task.noUrgeUsers'));
            this.subject.next({ result: false, isClose: false });
        }
        else if (!this.assignInfos[0].assignees.length) { //没有选人
            this.notify.warning(this.i18nService.getValue('task.selectPlaceholder') + this.i18nService.getValue('task.receiver'));
            this.subject.next({ result: false, isClose: false });
        }
        else if (!this.urgeHandleComponent.urgeMessageSubject) {
            this.notify.warning(this.i18nService.getValue('task.noUrgeSubject'));
            this.subject.next({ result: false, isClose: false });
        }
        else if (!this.urgeHandleComponent.urgeMessageContent) {
            this.notify.warning(this.i18nService.getValue('task.noUrgeContent'));
            this.subject.next({ result: false, isClose: false });
        }
        else {
            /** @type {?} */
            let context = new UrgeHandleContext();
            context.procInstId = this.processInstanceId;
            context.urgeUsers = this.urgeHandleResponse.urgeUsers.filter(a => this.assignInfos[0].assignees.some(b => b.id == a.id));
            context.urgeMessageSubject = this.urgeHandleComponent.urgeMessageSubject;
            context.urgeMessageContent = this.urgeHandleComponent.urgeMessageContent;
            context.addReminder = this.addReminder;
            /** @type {?} */
            const load = this.loadingService.show();
            this.taskService.urgeHandle(context).subscribe(re => {
                this.notify.success(this.i18nService.getValue('cueWords.success'));
                this.subject.next({ result: true, isClose: false });
                load.close();
            }, error => {
                load.close();
                this.subject.next({ result: false, isClose: false });
                this.taskService.error(error);
            });
        }
    }
    /**
     * 取消征询提交
     * @private
     * @return {?}
     */
    cancelConsultSubmit() {
        /** @type {?} */
        let context = new WorkItemExecuteParam();
        context.workItemId = this.workItemId;
        context.comment = this.comment;
        context.addendum = this.addendum;
        /** @type {?} */
        const load = this.loadingService.show();
        this.taskService.cancelConsult(context).subscribe(() => {
            load.close();
            this.notify.success(this.i18nService.getValue('cueWords.success'));
            this.subject.next({ result: true, isClose: false });
        }, error => {
            load.close();
            this.subject.next({ result: false, isClose: false });
            this.taskService.error(error);
        });
    }
    /**
     * @private
     * @return {?}
     */
    completeSubmit() {
        // 通过、驳回、其他第三方动作
        /** @type {?} */
        const context = {
            workItemId: this.workItemId,
            conclusionValue: this.actionEntity.code,
            comment: this.comment,
            signAssignees: this.selectedUsers,
            nextFlowNodes: [],
            addendum: this.addendum,
            //动态驳回规则
            dynamicBackWardRule: this.showBackWardConfig.dynamicBackWardRuleAble ? (this.showBackWardConfig.enable ? 'backToThisNode' : 'sequence') : ''
        };
        if (context.signAssignees.length || !this.response || !this.response.simulationPaths.length) { // 加签 or 仿真返回为空，直接往下走
            this.completeTask(context);
        }
        else {
            if (this.selectedNodeId) { // 加签时，选择下一环节被禁用，destNodeId为undefined
                // 加签时，选择下一环节被禁用，destNodeId为undefined
                /** @type {?} */
                const nextFlowNodes = [];
                /** @type {?} */
                const nodes = this.selectedNodeId.split('，');
                for (let i = 0; i < nodes.length; i++) {
                    /** @type {?} */
                    const nextFlowNode = {
                        activityDefinitionId: nodes[i],
                        activityDefinitionName: this.assignInfos[i].activityName,
                        dependency: this.assignInfos[i].dependency,
                        selectedAssignees: this.assignInfos[i].assigneeInfo ? this.assignInfos[i].assignees : [],
                        assigneeInfo: null,
                        resolved: false,
                        anonymous: this.assignInfos[i].anonymous,
                        anonymousText: this.assignInfos[i].anonymousText
                    };
                    //节点找不到人，且异常提示时，并行网关暂不处理
                    if (this.response && this.response.simulationPaths.length && !this.response.simulationPaths[0].id.startsWith('ParallelGateway')) {
                        if (nodes.length == 1 && nodes[i].startsWith('UserActivity') && this.assignInfos[i].resolved && !this.assignInfos[i].assigneeInfo && !this.assignInfos[i].selectedAssignees.length) {
                            /** @type {?} */
                            const str = this.assignInfos[i].activityName + this.i18nService.getValue('startProcess.node') + this.i18nService.getValue('startProcess.noUser');
                            this.notify.warning(str);
                            this.subject.next({ result: false, isClose: false });
                            return;
                        }
                    }
                    nextFlowNodes.push(nextFlowNode);
                }
                context.nextFlowNodes = nextFlowNodes;
            }
            if (this.destNodes.length > 1 && context.nextFlowNodes.length <= 0) { // 用户没选择跳转节点，不允许提交
                this.notify.warning(this.i18nService.getValue('cueWords.selectNode'));
                this.subject.next({ result: false, isClose: false });
            }
            else if (this.assignInfos.filter(info => info.assigneeInfo && info.assigneeInfo.selectAssignee && !info.assignees.length).length) {
                this.notify.warning(this.i18nService.getValue('task.selectProcessor'));
                this.subject.next({ result: false, isClose: false });
            }
            else {
                this.completeTask(context);
            }
        }
    }
    /**
     * @private
     * @param {?} completeContext
     * @return {?}
     */
    completeTask(completeContext) {
        /** @type {?} */
        const attachmentNecessary = this.actionEntity.parameters.find(entity => entity.code === 'AttachmentNecessary');
        /** @type {?} */
        const certificationNecessary = this.actionEntity.parameters.find(entity => entity.code === 'CertificationNecessary');
        /** @type {?} */
        const commentNecessary = this.actionEntity.parameters.find(entity => entity.code === 'CommentNecessary');
        if (attachmentNecessary && attachmentNecessary.value === 'true' && (!completeContext.addendum.attachment || completeContext.addendum.attachment === '[]')) {
            this.notify.warning(this.i18nService.getValue('cueWords.attachmentsRequired'));
            this.subject.next({ result: false, isClose: false });
        }
        else if (commentNecessary && commentNecessary.value === 'true' && !completeContext.comment) {
            this.notify.warning(this.i18nService.getValue('cueWords.inputOpinion'));
            this.subject.next({ result: false, isClose: false });
        }
        else if (this.comment.length > 300) {
            this.notify.warning(this.i18nService.getValue('task.commentTooLong'));
            this.subject.next({ result: false, isClose: false });
        }
        else {
            if (certificationNecessary && certificationNecessary.value === 'true') {
                this.verifySignature(() => {
                    completeContext.verifySigned = this.verifySigned;
                    this.taskComplete(completeContext);
                });
                /** @type {?} */
                const msg = [this.workItemId];
                gspCA.getSignedMsg(msg);
            }
            else {
                this.taskComplete(completeContext);
            }
        }
    }
    /**
     * @private
     * @param {?} hander
     * @return {?}
     */
    executeFormActionsAfterCompleteTask(hander) {
        /** @type {?} */
        const postActions = this.billMethodConfigs.filter(action => action.action === this.actionEntity.code && action.executionTime === 'Post').sort((x, y) => x.sortOrder - y.sortOrder);
        // 如果表单注册了事件
        if (this.ifRegistered && this.formObject && postActions.length) {
            this.executePostFormActions(postActions, hander);
        }
        else {
            hander();
        }
    }
    /**
     * @private
     * @param {?} formActions
     * @param {?} hander
     * @return {?}
     */
    executePostFormActions(formActions, hander) {
        if (formActions.length > 0) {
            this.messageSubject = new Subject();
            this.messageSubject.subscribe((re) => {
                console.log(re.data);
                /** @type {?} */
                const data = re.data.data;
                if (data.result === true) {
                    this.executePostFormActions(formActions, hander);
                }
                else {
                    this.subject.next({ result: false, isClose: false }); // 任务办理界面不关闭
                    throw new Error('审批后表单操作执行失败！');
                }
            });
            // 执行表单动作
            /** @type {?} */
            const formAction = formActions.shift();
            this.sendMessage(this.workItemId, formAction);
        }
        else {
            hander();
        }
    }
    //帮助选人后
    /**
     * @param {?} data
     * @return {?}
     */
    afterConfirmForTransfer(data) {
        if (data && data.length) {
            this.selectedUsers = data.map(user => user.id);
            this.selectedUserNgModule = data.map(user => user.name).join();
        }
        else {
            this.selectedUsers = [];
        }
        if (this.actionEntity.code == 'AddSign' && this.addSign.originMultiInstType == MultiInstanceType.Preempt.toString() && this.selectedUsers.length > 1) {
            this.addSign.showMultiInstanceType = true;
        }
        else {
            this.addSign.showMultiInstanceType = false;
        }
    }
    /**
     * @return {?}
     */
    cancel() {
        this.submitResult.isClose = false;
        this.subject.next(this.submitResult);
        return this.subject.asObservable();
    }
    /**
     * @return {?}
     */
    getSubject() {
        return this.subject.asObservable();
    }
    // 下一环节选择后事件
    /**
     * @param {?} data
     * @return {?}
     */
    selectNodeChange(data) {
        this.selectedNodeId = data && data.data && data.data.id;
        if (this.response.simulationPaths[data.index].nodeInfoList.every(node => node.resolved === true)) { // 已预解析参与者
            this.setAssignInfo(this.response.simulationPaths[data.index].nodeInfoList);
        }
        else {
            /** @type {?} */
            const nodeIds = this.selectedNodeId.split('，').map(node => `"${node}"`).join();
            // 注意一个中文逗号一个英文逗号
            /** @type {?} */
            const load = this.loadingService.show();
            this.taskService.getSimulationAssigneeInfo(this.workItemId, nodeIds).subscribe((nodeInfoList) => {
                load.close();
                this.setAssignInfo(nodeInfoList);
            }, error => {
                load.close();
                this.taskService.error(error);
            });
        }
    }
    // 下一环节清空后事件
    /**
     * @return {?}
     */
    selectNodeClear() {
        this.selectedNodeId = null;
        this.assignInfos = [{
                selectedAssignees: [],
                assigneeInfo: null,
                assignees: [],
                activityName: '',
                dependency: '',
                anonymous: false,
                anonymousText: '',
                resolved: false,
            }];
    }
    /**
     * @param {?} data
     * @param {?} index
     * @return {?}
     */
    afterConfirmForAssign(data, index) {
        this.assignInfos[index].assignees = data;
    }
    /**
     * 上传附件后事件
     * @param {?} data
     * @return {?}
     */
    addAttachment(data) {
        this.addendum.attachment = JSON.stringify(data);
    }
    /**
     * 手写签名后事件
     * @param {?} data
     * @return {?}
     */
    addSignature(data) {
        if (data) {
            /** @type {?} */
            const signInfo = {
                id: data,
                waterMarking: null
            };
            this.addendum.signature = JSON.stringify(signInfo);
        }
        else {
            this.addendum.signature = '';
        }
    }
    // 以服务方式打开组件时，左右加上padding
    /**
     * @return {?}
     */
    addPadding() {
        this.cls = 'f-utils-fill-flex-column h-100 px-4 py-2';
    }
    /**
     * @private
     * @param {?} workItemId
     * @param {?} action
     * @return {?}
     */
    sendMessage(workItemId, action) {
        if (this.iframe) {
            /** @type {?} */
            const iframeWindow = this.iframe.nativeElement.contentWindow;
            /** @type {?} */
            const message = {
                target: workItemId,
                data: {
                    command: action.method,
                    arguments: action.methodParameters
                }
            };
            iframeWindow.postMessage(message, this.POST_MESSAGE_TARGET);
        }
        else {
            throw new Error('表单尚未加载!');
        }
    }
    // 提交审批前的数字签名及验签
    /**
     * @param {?} handler
     * @return {?}
     */
    verifySignature(handler) {
        /** @type {?} */
        const that = this;
        if (((/** @type {?} */ (window))).gspframeworkService &&
            ((/** @type {?} */ (window))).gspframeworkService.rtf) {
            ((/** @type {?} */ (window))).gspframeworkService.rtf.caEvent.on(((/** @type {?} */ (window))).gspframeworkService.rtf.caEvent.signedMsgOverToken(), 'signedMsgOver', function signMsgOver(signedData) {
                if (signedData && signedData[0] === 'true' && signedData.length > 0) {
                    // 证书对象
                    /** @type {?} */
                    const cert = gspCA.getCurCert();
                    // 验签参数
                    that.verifySigned = {
                        // 要验证的证书base64编码的字符流(certkey)
                        certBase64Info: gspCA.getCertBase64(cert),
                        // 签名原信息
                        msg: [that.workItemId],
                        // 要签名后信息
                        signedmsg: signedData[1][0],
                        // 用户使用场景，目前未使用，可以为空
                        useCase: null,
                    };
                    handler();
                }
                else {
                    that.loadingService.close();
                    that.subject.next({ result: false, isClose: false });
                    that.notify.error(signedData[1]);
                    throw new Error(signedData[1]);
                }
            });
        }
    }
    // 通过、驳回、其他第三方动作
    /**
     * @param {?} completeContext
     * @return {?}
     */
    taskComplete(completeContext) {
        this.taskService.complete(completeContext).subscribe((cr) => {
            this.executeFormActionsAfterCompleteTask(() => {
                if (cr.needInteraction) { // 通过后指派场景
                    if (this.origin == ActionOrigin.TaskCenter) {
                        this.subject.next({ result: true, isClose: false });
                    }
                    else {
                        this.subject.next({ result: false, isClose: false }); //关掉loading
                    }
                    this.notify.info(this.i18nService.getValue('cueWords.select')
                        + '【' + cr.nextFlowNodes[0].activityDefinitionName + '】'
                        + this.i18nService.getValue('cueWords.processor'));
                    /** @type {?} */
                    let task = new TaskEntity();
                    /** @type {?} */
                    let action = new TaskAction();
                    task.sourceId = cr.nextFlowNodes[0].assigneeInfo.workItemId;
                    action.code = 'AssignUser';
                    action.name = this.i18nService.getValue('cueWords.assignUser');
                    this.handlerService.execute(task, action).subscribe(re => {
                        if (re) {
                            this.subject.next({ result: true, isClose: true });
                        }
                    });
                }
                else {
                    if (completeContext.conclusionValue === 'Pass') {
                        this.notify.success(this.i18nService.getValue('cueWords.successPass'));
                    }
                    else if (completeContext.conclusionValue === 'Back') {
                        this.notify.success(this.i18nService.getValue('cueWords.successBack'));
                    }
                    else {
                        this.notify.success(this.i18nService.getValue('cueWords.success'));
                    }
                    this.subject.next({ result: true, isClose: true });
                }
            });
        }, (error) => {
            this.subject.next({ result: false, isClose: false });
            this.taskService.error(error);
        });
    }
}
/**
 * 消息监听处理方法
 */
TaskExecuteComponent.func = null;
TaskExecuteComponent.decorators = [
    { type: Component, args: [{
                selector: 'lib-task-execute',
                template: "<!-- \u610F\u89C1\u8F93\u5165 -->\r\n<wf-comment\r\n  *ngIf=\"!showUrgeMessageSubject\"\r\n  class=\"w-100\"\r\n  name=\"comment\"\r\n  [(ngModel)]=\"comment\"\r\n  [placeholder]=\"commentPlaceHolder\"\r\n  [processInstanceId]=\"processInstanceId\"\r\n  [showAttachment]=\"showAttachment\"\r\n  [showCommonComment]=\"showCommonComment\"\r\n  [showSign]=\"showSign\"\r\n  [textAreaHeight]=\"textAreaHeight\"\r\n  [TaskCenterConfig]=\"configList\"\r\n  (attachment)=\"addAttachment($event)\"\r\n  (signature)=\"addSignature($event)\"\r\n>\r\n</wf-comment>\r\n\r\n<!--\u50AC\u529E\u6D88\u606F-->\r\n<urge-handle\r\n  *ngIf=\"showUrgeMessageSubject\"\r\n  [placeholder]=\"commentPlaceHolder\"\r\n  [showMessageSubject]=\"showUrgeMessageSubject\"\r\n  [urgeMessageSubject]=\"urgeMessageSubject\"\r\n  [urgeMessageContent]=\"urgeMessageContent\"\r\n  [subjectEditable]=\"subjectEditable\"\r\n  [contentEditable]=\"contentEditable\"\r\n  [textAreaHeight]=\"textAreaHeight\"\r\n>\r\n</urge-handle>\r\n\r\n<!-- \u5BA1\u6279\u8BB0\u5F55\u9690\u85CF\uFF08\u4EC5\u5BF9\u81EA\u5DF1\u53EF\u89C1\uFF09 -->\r\n<div\r\n  *ngIf=\"ifShowCommentToMySelf\"\r\n  class=\"custom-control custom-checkbox custom-control-inline\"\r\n  style=\"margin-bottom: 10px\"\r\n>\r\n  <input\r\n    type=\"checkbox\"\r\n    class=\"custom-control-input\"\r\n    [(ngModel)]=\"hideComment\"\r\n    id=\"taskcenterhidecomment\"\r\n    name=\"taskcenterhidecomment\"\r\n  />\r\n  <label class=\"custom-control-label\" for=\"taskcenterhidecomment\">{{\r\n    \"static.hideComment\" | translate\r\n  }}</label>\r\n</div>\r\n\r\n<!-- \u4E0B\u4E00\u73AF\u8282 -->\r\n<div *ngIf=\"ifSelectNode\" class=\"wf-task-handler-help-div\">\r\n  <div class=\"wf-task-handler-help-text\">{{ selectNodeText }}</div>\r\n  <div class=\"d-flex\" style=\"flex: 1\">\r\n    <farris-combo-list\r\n      style=\"flex: 1\"\r\n      [data]=\"destNodes\"\r\n      [editable]=\"false\"\r\n      [textField]=\"'name'\"\r\n      [valueField]=\"'id'\"\r\n      [idField]=\"'id'\"\r\n      [readonly]=\"destNodes.length > 1 ? false : true\"\r\n      (selectChange)=\"selectNodeChange($event)\"\r\n      (clear)=\"selectNodeClear()\"\r\n      [placeholder]=\"nodePlaceholder\"\r\n      [forcePlaceholder]=\"true\"\r\n    >\r\n    </farris-combo-list>\r\n  </div>\r\n</div>\r\n\r\n<!-- \u529E\u7406\u4EBA\u5458\uFF08\u6307\u6D3E\uFF09 -->\r\n<div *ngIf=\"ifAssignUser || ifUrgeType\">\r\n  <lib-assignee-info\r\n    *ngFor=\"let assignInfo of assignInfos; let i = index\"\r\n    [assigneeInfo]=\"assignInfo.assigneeInfo\"\r\n    [setAnonymous]=\"assignInfo.anonymous\"\r\n    [setAnonymousText]=\"assignInfo.anonymousText\"\r\n    [selectedAssignees]=\"assignInfo.selectedAssignees\"\r\n    [activityName]=\"\r\n      assignInfos.length > 1\r\n        ? assignInfo.activityName\r\n        : ifUrgeType\r\n        ? ('task.urgeText' | translate)\r\n        : ''\r\n    \"\r\n    [ifShowBlank]=\"assignInfos.length > 1 ? false : true\"\r\n    [wfContext]=\"wfContext\"\r\n    (afterConfirm)=\"afterConfirmForAssign($event, i)\"\r\n  ></lib-assignee-info>\r\n</div>\r\n\r\n<!-- \u79FB\u4EA4\u3001\u52A0\u7B7E\u3001\u5F81\u8BE2\u3001\u77E5\u4F1A \u4EBA\u5458\u5E2E\u52A9-->\r\n<lib-assignee-info\r\n  *ngIf=\"ifSelectUser\"\r\n  [activityName]=\"selectUserText\"\r\n  [singleSelect]=\"singleSelect\"\r\n  [filter]=\"filter\"\r\n  [disabled]=\"false\"\r\n  [placeholder]=\"'task.selectPlaceholder' | translate\"\r\n  [allowGlobalAssign]=\"true\"\r\n  [wfContext]=\"wfContext\"\r\n  (afterConfirm)=\"afterConfirmForTransfer($event)\"\r\n>\r\n</lib-assignee-info>\r\n\r\n<!-- \u52A0\u7B7E -->\r\n<!-- \u5BA1\u6279\u7B56\u7565 -->\r\n<div *ngIf=\"addSign.showMultiInstanceType\" class=\"wf-task-handler-help-div\">\r\n  <div class=\"wf-task-handler-help-text\">\r\n    {{ \"addSign.multiInstanceType\" | translate }}\r\n  </div>\r\n  <div class=\"d-flex\" style=\"flex: 1\">\r\n    <farris-radiogroup\r\n      [(ngModel)]=\"addSign.curMultiInstType\"\r\n      [data]=\"addSign.multiInstanceType\"\r\n      [horizontal]=\"true\"\r\n    >\r\n    </farris-radiogroup>\r\n  </div>\r\n</div>\r\n\r\n<!-- \u5141\u8BB8\u518D\u52A0\u7B7E -->\r\n<div *ngIf=\"addSign.showSignToSign\" class=\"wf-task-handler-help-div\">\r\n  <div class=\"wf-task-handler-help-text\">\r\n    {{ \"addSign.allowSignToSign\" | translate }}{{ actionEntity.name }}\r\n  </div>\r\n  <farris-switch\r\n    [(ngModel)]=\"addSign.allowSignToSIgn\"\r\n    [size]=\"'small'\"\r\n    trueValue=\"true\"\r\n    falseValue=\"false\"\r\n  >\r\n  </farris-switch>\r\n</div>\r\n\r\n<!-- \u9A73\u56DE\u540E\u518D\u6B21\u63D0\u4EA4\u65F6\u76F4\u63A5\u56DE\u5230\u672C\u8282\u70B9 -->\r\n<div\r\n  *ngIf=\"showBackWardConfig.dynamicBackWardRuleAble\"\r\n  class=\"wf-task-handler-help-div\"\r\n>\r\n  <div class=\"wf-task-handler-help-text\">\r\n    {{ actionEntity.name\r\n    }}{{ \"backWardConfig.allowResubmitToThisNode\" | translate }}\r\n  </div>\r\n  <farris-switch\r\n    [(ngModel)]=\"showBackWardConfig.enable\"\r\n    [size]=\"'small'\"\r\n    trueValue=\"true\"\r\n    falseValue=\"false\"\r\n  >\r\n  </farris-switch>\r\n</div>\r\n\r\n<!-- \u6309\u94AE -->\r\n<ng-template #taskExecuteButtons>\r\n  <button type=\"button\" class=\"btn btn-secondary\" (click)=\"cancel()\">\r\n    {{ \"static.footCancel\" | translate }}\r\n  </button>\r\n  <button\r\n    type=\"button\"\r\n    class=\"btn btn-primary\"\r\n    (click)=\"submit()\"\r\n    [disabled]=\"submitDisable\"\r\n  >\r\n    {{ \"static.footOk\" | translate }}\r\n  </button>\r\n</ng-template>\r\n",
                styles: [".wf-task-handler-help-div{font-size:13px;color:#2d2f33;margin-bottom:20px}.wf-task-handler-help-div-submit{margin-bottom:20px}.wf-task-handler-help-text{padding-bottom:8px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]
            }] }
];
/** @nocollapse */
TaskExecuteComponent.ctorParameters = () => [
    { type: TaskService },
    { type: NotifyService },
    { type: I18nService },
    { type: WfTaskHandlerService },
    { type: LoadingService },
    { type: MessagerService },
    { type: Injector },
    { type: ChangeDetectorRef }
];
TaskExecuteComponent.propDecorators = {
    buttons: [{ type: ViewChild, args: ['taskExecuteButtons',] }],
    sysUserHelp: [{ type: ViewChild, args: [SysFarrisLookupComponent,] }],
    urgeHandleComponent: [{ type: ViewChild, args: [UrgeHandleComponent,] }],
    cls: [{ type: HostBinding, args: ['class',] }]
};
if (false) {
    /**
     * 消息监听处理方法
     * @type {?}
     * @private
     */
    TaskExecuteComponent.func;
    /** @type {?} */
    TaskExecuteComponent.prototype.task;
    /** @type {?} */
    TaskExecuteComponent.prototype.workItemId;
    /** @type {?} */
    TaskExecuteComponent.prototype.processInstanceId;
    /** @type {?} */
    TaskExecuteComponent.prototype.actionEntity;
    /** @type {?} */
    TaskExecuteComponent.prototype.comment;
    /** @type {?} */
    TaskExecuteComponent.prototype.wfCacheComment;
    /** @type {?} */
    TaskExecuteComponent.prototype.currentDefaultValue;
    /** @type {?} */
    TaskExecuteComponent.prototype.ifSelectNode;
    /** @type {?} */
    TaskExecuteComponent.prototype.ifSelectUser;
    /** @type {?} */
    TaskExecuteComponent.prototype.ifAssignUser;
    /** @type {?} */
    TaskExecuteComponent.prototype.ifUrgeType;
    /** @type {?} */
    TaskExecuteComponent.prototype.ifShowCommentToMySelf;
    /** @type {?} */
    TaskExecuteComponent.prototype.singleSelect;
    /** @type {?} */
    TaskExecuteComponent.prototype.selectTargetAble;
    /** @type {?} */
    TaskExecuteComponent.prototype.hideComment;
    /** @type {?} */
    TaskExecuteComponent.prototype.filter;
    /** @type {?} */
    TaskExecuteComponent.prototype.selectedUsers;
    /** @type {?} */
    TaskExecuteComponent.prototype.selectedUserNgModule;
    /** @type {?} */
    TaskExecuteComponent.prototype.buttons;
    /** @type {?} */
    TaskExecuteComponent.prototype.sysUserHelp;
    /** @type {?} */
    TaskExecuteComponent.prototype.urgeHandleComponent;
    /** @type {?} */
    TaskExecuteComponent.prototype.subject;
    /** @type {?} */
    TaskExecuteComponent.prototype.submitResult;
    /** @type {?} */
    TaskExecuteComponent.prototype.bindingData;
    /** @type {?} */
    TaskExecuteComponent.prototype.selectNodeText;
    /** @type {?} */
    TaskExecuteComponent.prototype.selectUserText;
    /** @type {?} */
    TaskExecuteComponent.prototype.commentPlaceHolder;
    /** @type {?} */
    TaskExecuteComponent.prototype.showAttachment;
    /** @type {?} */
    TaskExecuteComponent.prototype.showSign;
    /** @type {?} */
    TaskExecuteComponent.prototype.showCommonComment;
    /** @type {?} */
    TaskExecuteComponent.prototype.textAreaHeight;
    /** @type {?} */
    TaskExecuteComponent.prototype.nodePlaceholder;
    /** @type {?} */
    TaskExecuteComponent.prototype.selectedNodeId;
    /** @type {?} */
    TaskExecuteComponent.prototype.destNodes;
    /** @type {?} */
    TaskExecuteComponent.prototype.dialogHeight;
    /** @type {?} */
    TaskExecuteComponent.prototype.dialogHeightBase;
    /** @type {?} */
    TaskExecuteComponent.prototype.addendum;
    /** @type {?} */
    TaskExecuteComponent.prototype.groupIcon;
    /** @type {?} */
    TaskExecuteComponent.prototype.assignInfos;
    /** @type {?} */
    TaskExecuteComponent.prototype.response;
    /** @type {?} */
    TaskExecuteComponent.prototype.urgeHandleResponse;
    /** @type {?} */
    TaskExecuteComponent.prototype.formObject;
    /** @type {?} */
    TaskExecuteComponent.prototype.ifRegistered;
    /** @type {?} */
    TaskExecuteComponent.prototype.billMethodConfigs;
    /** @type {?} */
    TaskExecuteComponent.prototype.configList;
    /** @type {?} */
    TaskExecuteComponent.prototype.verifySigned;
    /** @type {?} */
    TaskExecuteComponent.prototype.submitDisable;
    /** @type {?} */
    TaskExecuteComponent.prototype.addSign;
    /** @type {?} */
    TaskExecuteComponent.prototype.showBackWardConfig;
    /**
     * 任务催办时使用
     * @type {?}
     */
    TaskExecuteComponent.prototype.showUrgeMessageSubject;
    /** @type {?} */
    TaskExecuteComponent.prototype.urgeMessageSubject;
    /** @type {?} */
    TaskExecuteComponent.prototype.urgeMessageContent;
    /** @type {?} */
    TaskExecuteComponent.prototype.addReminder;
    /** @type {?} */
    TaskExecuteComponent.prototype.subjectEditable;
    /** @type {?} */
    TaskExecuteComponent.prototype.contentEditable;
    /** @type {?} */
    TaskExecuteComponent.prototype.wfContext;
    /** @type {?} */
    TaskExecuteComponent.prototype.cls;
    /** @type {?} */
    TaskExecuteComponent.prototype.POST_MESSAGE_TARGET;
    /**
     * @type {?}
     * @private
     */
    TaskExecuteComponent.prototype.messageSubject;
    /**
     * 监听事件处理
     * @type {?}
     */
    TaskExecuteComponent.prototype.eventHandler;
    /**
     * @type {?}
     * @private
     */
    TaskExecuteComponent.prototype.taskService;
    /**
     * @type {?}
     * @private
     */
    TaskExecuteComponent.prototype.notify;
    /**
     * @type {?}
     * @private
     */
    TaskExecuteComponent.prototype.i18nService;
    /**
     * @type {?}
     * @private
     */
    TaskExecuteComponent.prototype.handlerService;
    /**
     * @type {?}
     * @private
     */
    TaskExecuteComponent.prototype.loadingService;
    /**
     * @type {?}
     * @private
     */
    TaskExecuteComponent.prototype.message;
    /**
     * @type {?}
     * @private
     */
    TaskExecuteComponent.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    TaskExecuteComponent.prototype.cd;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFzay1leGVjdXRlLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Bnc3Atd2Yvd2YtdGFzay1oYW5kbGVyLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvdGFzay1leGVjdXRlL3Rhc2stZXhlY3V0ZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFDTCxTQUFTLEVBRVQsU0FBUyxFQUNULFdBQVcsRUFDWCxXQUFXLEVBQ1gsUUFBUSxFQUVSLGlCQUFpQixFQUVsQixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUsUUFBUSxFQUFFLFlBQVksRUFBRSxlQUFlLEVBQUUsTUFBTSwrQkFBK0IsQ0FBQztBQUN4RixPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sNEJBQTRCLENBQUM7QUFDekQsT0FBTyxFQUFFLHdCQUF3QixFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUFDOUQsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ2xELE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxpQ0FBaUMsQ0FBQztBQUM5RCxPQUFPLEVBQXFDLFlBQVksRUFBRSxNQUFNLGdDQUFnQyxDQUFDO0FBQ2pHLE9BQU8sRUFBYyxlQUFlLEVBQUUsT0FBTyxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQzVELE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQztBQUN0RCxPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSwrQkFBK0IsQ0FBQztBQUNyRSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sMEJBQTBCLENBQUM7QUFDdEQsT0FBTyxFQUFnQix1QkFBdUIsRUFBa0QsWUFBWSxFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFDNUksT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBR3BELE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUl0RCxPQUFPLEVB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RDs7SUFFakQsOENBQXdFOztJQUN4RSw4Q0FBdUI7O0lBQ3ZCLGtEQUE2RTs7SUFDN0UsOENBQStCOztJQUMvQix3Q0FBeUI7O0lBQ3pCLGlEQUFrQzs7SUFDbEMsOENBQTRCOztJQUU1QiwrQ0FBd0I7O0lBRXhCLDhDQUF1Qjs7SUFDdkIseUNBQStDOztJQUUvQyw0Q0FBbUI7O0lBQ25CLGdEQUFzQjs7SUFFdEIsd0NBQTBCOztJQUMxQix5Q0FBbUQ7O0lBRW5ELDJDQVNHOztJQUVILHdDQUEyQjs7SUFDM0Isa0RBQXVDOztJQUV2QywwQ0FBZ0I7O0lBQ2hCLDRDQUFxQjs7SUFDckIsaURBQTJDOztJQUMzQywwQ0FBb0M7O0lBRXBDLDRDQUFnRDs7SUFDaEQsNkNBQStCOztJQUcvQix1Q0FXQzs7SUFFRCxrREFHQzs7Ozs7SUFLRCxzREFBd0M7O0lBQ3hDLGtEQUEyQjs7SUFDM0Isa0RBQTJCOztJQUMzQiwyQ0FBcUI7O0lBQ3JCLCtDQUF5Qjs7SUFDekIsK0NBQXlCOztJQUV6Qix5Q0FBNEI7O0lBRTVCLG1DQUErQjs7SUFFL0IsbURBQXNEOzs7OztJQUN0RCw4Q0FBdUI7Ozs7O0lBNkV2Qiw0Q0FFQzs7Ozs7SUEzRUMsMkNBQWdDOzs7OztJQUNoQyxzQ0FBNkI7Ozs7O0lBQzdCLDJDQUFnQzs7Ozs7SUFDaEMsOENBQTRDOzs7OztJQUM1Qyw4Q0FBc0M7Ozs7O0lBQ3RDLHVDQUFnQzs7Ozs7SUFDaEMsd0NBQTBCOzs7OztJQUMxQixrQ0FBNkIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xyXG4gIENvbXBvbmVudCxcclxuICBPbkluaXQsXHJcbiAgVmlld0NoaWxkLFxyXG4gIFRlbXBsYXRlUmVmLFxyXG4gIEhvc3RCaW5kaW5nLFxyXG4gIEluamVjdG9yLFxyXG4gIEFmdGVyVmlld0luaXQsXHJcbiAgQ2hhbmdlRGV0ZWN0b3JSZWYsXHJcbiAgSW5wdXRcclxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgQWRkZW5kdW0sIFZlcmlmeVNpZ25lZCwgQ29tcGxldGVDb250ZXh0IH0gZnJvbSAnLi4vLi4vZW50aXR5L2NvbXBsZXRlLWNvbnRleHQnO1xyXG5pbXBvcnQgeyBUYXNrU2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2UvdGFzay5zZXJ2aWNlJztcclxuaW1wb3J0IHsgU3lzRmFycmlzTG9va3VwQ29tcG9uZW50IH0gZnJvbSAnQGdzcC1zeXMvc3lzbWdyLXVpJztcclxuaW1wb3J0IHsgTm90aWZ5U2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbm90aWZ5JztcclxuaW1wb3J0IHsgSTE4blNlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlL2kxOG4vaTE4bi5zZXJ2aWNlJztcclxuaW1wb3J0IHsgQ29tcGxldGVSZXNwb25zZSwgQXNzaWduUGFyYW1ldGVyLCBBc3NpZ25lZUluZm8gfSBmcm9tICcuLi8uLi9lbnRpdHkvY29tcGxldGUtcmVzcG9uc2UnO1xyXG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBCZWhhdmlvclN1YmplY3QsIFN1YmplY3QgfSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHsgVGFza0FjdGlvbiB9IGZyb20gJy4uLy4uL2VudGl0eS90YXNrLWFjdGlvbic7XHJcbmltcG9ydCB7IFdmVGFza0hhbmRsZXJTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vd2YtdGFzay1oYW5kbGVyLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBUYXNrRW50aXR5IH0gZnJvbSAnLi4vLi4vZW50aXR5L3Rhc2stZW50aXR5JztcclxuaW1wb3J0IHsgU3VibWl0UmVzdWx0LCBBY3Rpb25CYXNlSW1wbENvbXBvbmVudCwgQWN0aW9uRXZlbnQsIFRhc2tFdmVudFJlc3VsdCwgVGFza0V2ZW50Q29udGV4dCwgQWN0aW9uT3JpZ2luIH0gZnJvbSAnQGdzcC13Zi90YXNrLWltcGwtYXBpJztcclxuaW1wb3J0IHsgTG9hZGluZ1NlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLWxvYWRpbmcnO1xyXG5pbXBvcnQgeyBPcmdhbml6YXRpb25TY29wZSB9IGZyb20gJy4uLy4uL2VudGl0eS9vcmdhbml6YXRpb24tc2NvcGUnO1xyXG5pbXBvcnQgeyBGbG93Tm9kZUluZm8sIEFzc2lnbmVlIH0gZnJvbSAnLi4vLi4vZW50aXR5L3N0YXJ0LXByb2Nlc3MtcGF5bG9hZCc7XHJcbmltcG9ydCB7IE1lc3NhZ2VyU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbWVzc2FnZXInO1xyXG5pbXBvcnQgeyBBc3NpZ25JbmZvSGVscEVudGl0eSB9IGZyb20gJy4uLy4uL2VudGl0eS9hc3NpZ25JbmZvSGVscCc7XHJcbmltcG9ydCB7IFNpbXVsYXRlUmVzcG9uc2UgfSBmcm9tICcuLi8uLi9lbnRpdHkvc2ltdWxhdGUtcmVzcG9uc2UnO1xyXG5pbXBvcnQgeyBCaWxsTWV0aG9kQ29uZmlnLCBGb3JtRXZlbnRNZXNzYWdlIH0gZnJvbSAnLi4vLi4vZW50aXR5L2Zvcm1BY3Rpb24nO1xyXG5pbXBvcnQgeyBDb25maWdDb2RlLCBUYXNrQ2VudGVyQ29uZmlnLCBPd25lclR5cGUgfSBmcm9tICcuLi8uLi9lbnRpdHkvdGFzay1jZW50ZXItY29uZmlnJztcclxuaW1wb3J0IHsgQ291bnRlclNpZ25QYXJhbSwgV29ya0l0ZW1FeGVjdXRlUGFyYW0gfSBmcm9tICcuLi8uLi9lbnRpdHkvd29ya2l0ZW0tZXhlY3V0ZS1wYXJhbSc7XHJcbmltcG9ydCB7IFVyZ2VIYW5kbGVDb250ZXh0LCBVcmdlSGFuZGxlUmVzcG9uc2UsIFVyZ2VIYW5kbGVTaW11bGF0ZUNvbnRleHQgfSBmcm9tICcuLi8uLi9lbnRpdHkvdXJnZS1oYW5kbGUnO1xyXG5pbXBvcnQgeyBCYXRjaFZlcmlmeVNpZ25lZENvbnRleHQgfSBmcm9tICcuLi8uLi9lbnRpdHkvYmF0Y2hWZXJpZnlzaWduZWQnO1xyXG5pbXBvcnQgeyBXZkNvbnRleHQgfSBmcm9tICcuLi8uLi9lbnRpdHkvd2ZDb250ZXh0JztcclxuaW1wb3J0IHsgVXJnZUhhbmRsZUNvbXBvbmVudCB9IGZyb20gXCIuLi91cmdlLWhhbmRsZS91cmdlLWhhbmRsZS5jb21wb25lbnRcIjtcclxuaW1wb3J0IHsgQWRkU2lnblBheWxvYWQsIEFkZFNpZ25TaW11bGF0ZVJlc3BvbnNlLCBNdWx0aUluc3RhbmNlVHlwZSB9IGZyb20gJy4uLy4uL2VudGl0eS9hZGQtc2lnbic7XHJcblxyXG5kZWNsYXJlIHZhciBTeXN0ZW06IGFueTtcclxuZGVjbGFyZSBjb25zdCBnc3BDQTogYW55O1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICdsaWItdGFzay1leGVjdXRlJyxcclxuICB0ZW1wbGF0ZVVybDogJy4vdGFzay1leGVjdXRlLmNvbXBvbmVudC5odG1sJyxcclxuICBzdHlsZVVybHM6IFsnLi90YXNrLWV4ZWN1dGUuY29tcG9uZW50LmNzcyddLFxyXG59KVxyXG5leHBvcnQgY2xhc3MgVGFza0V4ZWN1dGVDb21wb25lbnQgZXh0ZW5kcyBBY3Rpb25CYXNlSW1wbENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgQWZ0ZXJWaWV3SW5pdCB7XHJcblxyXG4gIC8qKlxyXG4gICAqIOa2iOaBr+ebkeWQrOWkhOeQhuaWueazlVxyXG4gICAqL1xyXG4gIHByaXZhdGUgc3RhdGljIGZ1bmMgPSBudWxsO1xyXG4gIHRhc2s6IFRhc2tFbnRpdHk7Ly/lvZPliY3ku7vliqFcclxuICB3b3JrSXRlbUlkOiBzdHJpbmc7IC8vIOW3peS9nOmhuUlEXHJcbiAgcHJvY2Vzc0luc3RhbmNlSWQ6IHN0cmluZzsgLy8g5rWB56iL5a6e5L6LSURcclxuICBhY3Rpb25FbnRpdHkgPSBuZXcgVGFza0FjdGlvbigpOyAvLyDliqjkvZzlrp7kvZNcclxuICBjb21tZW50ID0gJyc7IC8vIOWuoeaJueaEj+ingVxyXG4gIHdmQ2FjaGVDb21tZW50OiBzdHJpbmc7Ly/nvJPlrZjnmoTmhI/op4FcclxuICBjdXJyZW50RGVmYXVsdFZhbHVlOiBzdHJpbmc7Ly/lvZPliY3liqjkvZznmoTpu5jorqTmhI/op4FcclxuXHJcbiAgaWZTZWxlY3ROb2RlID0gZmFsc2U7IC8vIOaYr+WQpuaYvuekuumAieaLqeS4i+S4gOeOr+iKglxyXG4gIGlmU2VsZWN0VXNlciA9IGZhbHNlOyAvLyDmmK/lkKbmmL7npLrkuIvkuIDnjq/oioLlpITnkIbkurpcclxuICBpZkFzc2lnblVzZXIgPSBmYWxzZTsgLy8g5piv5ZCm5pi+56S65Yqe55CG5Lq65ZGY5qGGXHJcbiAgaWZVcmdlVHlwZSA9IGZhbHNlOyAvLyDmmK/lkKbmmL7npLrmjqXmlLbkurrmoYbvvIjlgqzlip7mtojmga/mjqXmlLbkurrvvIlcclxuICBpZlNob3dDb21tZW50VG9NeVNlbGYgPSBmYWxzZTsvLyDmmK/lkKbmmL7npLrlrqHmibnorrDlvZXku4Xoh6rlt7Hlj6/op4FcclxuXHJcbiAgc2luZ2xlU2VsZWN0ID0gZmFsc2U7IC8vIOeUqOaIt+W4ruWKqeaYr+WQpuWNlemAie+8jOm7mOiupOWkmumAiVxyXG4gIHNlbGVjdFRhcmdldEFibGUgPSBmYWxzZTsgLy8g5piv5ZCm5YWB6K646YCJ5oup5LiL5LiA546v6IqCXHJcbiAgaGlkZUNvbW1lbnQgPSBmYWxzZTsvL+WuoeaJueiusOW9leS7heiHquW3seWPr+ingVxyXG5cclxuICBmaWx0ZXIgPSB7IG5vdEdldEN1cnJlbnRVc2VyOiB0cnVlLCBub3RHZXRTdG9wVXNlcjogdHJ1ZSwgb3JkZXJGaWVsZDogJ29yZGVyJywgd2l0aEFsbE9yZzogdHJ1ZSwgb3JnSWQ6ICcnIH07IC8vIOezu+e7n+eUqOaIt+W4ruWKqeaYr+WQpui/h+a7pOW9k+WJjeS6ulxyXG4gIHNlbGVjdGVkVXNlcnM6IHN0cmluZ1tdID0gW107IC8vIOeUqOaIt+W4ruWKqemAieaLqeWQjueahElk5pWw57uEXHJcblxyXG4gIHNlbGVjdGVkVXNlck5nTW9kdWxlOiBzdHJpbmc7IC8vIOmAieaLqeWkhOeQhuS6uueahHBsYWNlaG9sZGVyXHJcblxyXG4gIEBWaWV3Q2hpbGQoJ3Rhc2tFeGVjdXRlQnV0dG9ucycpIGJ1dHRvbnM6IFRlbXBsYXRlUmVmPGFueT47IC8vIOehruiupOWPlua2iOaMiemSrlxyXG4gIEBWaWV3Q2hpbGQoU3lzRmFycmlzTG9va3VwQ29tcG9uZW50KSBzeXNVc2VySGVscDogU3lzRmFycmlzTG9va3VwQ29tcG9uZW50OyAvLyDns7vnu5/nlKjmiLfluK7liqlcclxuICBAVmlld0NoaWxkKFVyZ2VIYW5kbGVDb21wb25lbnQpIHVyZ2VIYW5kbGVDb21wb25lbnQ6IFVyZ2VIYW5kbGVDb21wb25lbnQ7XHJcblxyXG4gIHN1YmplY3QgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PFN1Ym1pdFJlc3VsdD4obnVsbCk7XHJcbiAgc3VibWl0UmVzdWx0OiBTdWJtaXRSZXN1bHQgPSB7IHJlc3VsdDogdHJ1ZSwgaXNDbG9zZTogdHJ1ZSB9OyAvLyDliqjkvZzmiafooYzlrozmiJDlkI7ov5Tlm57nmoTlrp7kvZPnu5PmnpxcclxuICBiaW5kaW5nRGF0YTogeyBpZD86IHN0cmluZywgbmFtZT86IHN0cmluZyB9ID0ge307IC8vIOezu+e7n+W4ruWKqeWkmumAieaXtueUqOWIsFxyXG5cclxuICBzZWxlY3ROb2RlVGV4dDogc3RyaW5nID0gdGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgndGFzay5uZXh0Tm9kZVRleHQnKTsgLy8g5LiL5LiA546v6IqC5pi+56S655qE5paH5a2XLFwi5LiL5LiA546v6IqCXCJcclxuICBzZWxlY3RVc2VyVGV4dDogc3RyaW5nOyAvLyDlpITnkIbkurrlkZjmmL7npLrmloflrZdcclxuICBjb21tZW50UGxhY2VIb2xkZXI6IHN0cmluZyA9IHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3N0YXRpYy5pbnB1dEhvbGRlcicpOy8v5a6h5om55oSP6KeB5qGGcGxhY2Vob2xkZXJcclxuICBzaG93QXR0YWNobWVudDogYm9vbGVhbiA9IHRydWU7Ly/mmK/lkKbmmL7npLrpmYTku7bkuIrkvKBcclxuICBzaG93U2lnbjogYm9vbGVhbiA9IHRydWU7Ly/mmK/lkKbmmL7npLrnrb7lkI1cclxuICBzaG93Q29tbW9uQ29tbWVudDogYm9vbGVhbiA9IHRydWU7Ly/mmK/lkKbmmL7npLrluLjnlKjmhI/op4FcclxuICB0ZXh0QXJlYUhlaWdodDogbnVtYmVyID0gODQ7Ly/mloflrZfmoYbnmoTpq5jluqZcclxuXHJcbiAgbm9kZVBsYWNlaG9sZGVyOiBzdHJpbmc7IC8vIOmAieaLqeS4i+S4gOeOr+iKgueahHBsYWNlaG9sZGVyXHJcblxyXG4gIHNlbGVjdGVkTm9kZUlkOiBzdHJpbmc7IC8vIOmAieaLqeeahOS4i+S4gOeOr+iKgklE77yM5bm26KGM5YiG5pSv5piv77yM6YCX5Y+36ZqU5byA55qEXHJcbiAgZGVzdE5vZGVzOiB7IGlkOiBzdHJpbmcsIG5hbWU6IHN0cmluZyB9W10gPSBbXTsgLy8g5YCZ6YCJ5LiL5LiA546v6IqCXHJcblxyXG4gIGRpYWxvZ0hlaWdodCA9IDI3MDsgLy8g5by55qGG55qE6auY5bqmXHJcbiAgZGlhbG9nSGVpZ2h0QmFzZSA9IDY2O1xyXG5cclxuICBhZGRlbmR1bSA9IG5ldyBBZGRlbmR1bSgpOyAvLyDpmYTku7bjgIHnrb7lkI3kv6Hmga9cclxuICBncm91cEljb24gPSAnPGkgY2xhc3M9XCJmLWljb24gZi1pY29uLWxvb2t1cFwiPjwvaT4nO1xyXG5cclxuICBhc3NpZ25JbmZvczogQXNzaWduSW5mb0hlbHBFbnRpdHlbXSA9IFt7IC8vIOiKgueCuei/lOWbnueahOaMh+a0vuS/oeaBr++8iOWkmuS4qu+8iVxyXG4gICAgc2VsZWN0ZWRBc3NpZ25lZXM6IFtdLFxyXG4gICAgYXNzaWduZWVJbmZvOiBudWxsLFxyXG4gICAgYXNzaWduZWVzOiBbXSxcclxuICAgIGFjdGl2aXR5TmFtZTogJycsXHJcbiAgICBkZXBlbmRlbmN5OiAnJyxcclxuICAgIGFub255bW91czogZmFsc2UsXHJcbiAgICBhbm9ueW1vdXNUZXh0OiBudWxsLFxyXG4gICAgcmVzb2x2ZWQ6IGZhbHNlLFxyXG4gIH1dO1xyXG5cclxuICByZXNwb25zZTogU2ltdWxhdGVSZXNwb25zZTsgLy8g5L+d5a2Y5qih5ouf5a6h5om55ZCO6L+U5Zue55qE5YaF5a6577yM6YCJ5oup6IqC54K55pe25L2/55SoXHJcbiAgdXJnZUhhbmRsZVJlc3BvbnNlOiBVcmdlSGFuZGxlUmVzcG9uc2U7Ly/kv53lrZjlgqzlip7mqKHmi5/lkI7ov5Tlm57nmoTlhoXlrrlcclxuXHJcbiAgZm9ybU9iamVjdDogYW55OyAvLyDooajljZXlr7nosaFcclxuICBpZlJlZ2lzdGVyZWQgPSBmYWxzZTsgLy8g6KGo5Y2V5piv5ZCm5rOo5YaMXHJcbiAgYmlsbE1ldGhvZENvbmZpZ3M6IEJpbGxNZXRob2RDb25maWdbXSA9IFtdOyAvLyDooajljZXliqjkvZzphY3nva7liJfooahcclxuICBjb25maWdMaXN0OiBUYXNrQ2VudGVyQ29uZmlnW10gPSBbXTsgLy/ku7vliqHkuK3lv4PphY3nva7poblcclxuXHJcbiAgdmVyaWZ5U2lnbmVkOiBWZXJpZnlTaWduZWQgPSBuZXcgVmVyaWZ5U2lnbmVkKCk7IC8vIOaVsOWtl+mqjOetvuWPguaVsFxyXG4gIHN1Ym1pdERpc2FibGU6IGJvb2xlYW4gPSBmYWxzZTsgLy8g5o+Q5Lqk5oyJ6ZKu5piv5ZCm56aB55SoXHJcblxyXG4gIC8v5Yqg562+5L2/55SoXHJcbiAgYWRkU2lnbiA9IHtcclxuICAgIHNob3dTaWduVG9TaWduOiBmYWxzZSxcclxuICAgIGFsbG93U2lnblRvU0lnbjogZmFsc2UsXHJcbiAgICBzaG93TXVsdGlJbnN0YW5jZVR5cGU6IGZhbHNlLFxyXG4gICAgbXVsdGlJbnN0YW5jZVR5cGU6IFtcclxuICAgICAgeyB2YWx1ZTogJ1BhcmFsbGVsJywgbmFtZTogdGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgnYWRkU2lnbi5wYXJhbGxlbCcpIH0sXHJcbiAgICAgIHsgdmFsdWU6ICdTZXF1ZW50aWFsJywgbmFtZTogdGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgnYWRkU2lnbi5zZXF1ZW50aWFsJykgfSxcclxuICAgICAgeyB2YWx1ZTogJ1ByZWVtcHQnLCBuYW1lOiB0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCdhZGRTaWduLnByZWVtcHQnKSB9LFxyXG4gICAgXSxcclxuICAgIG9yaWdpbk11bHRpSW5zdFR5cGU6ICcnLFxyXG4gICAgY3VyTXVsdGlJbnN0VHlwZTogTXVsdGlJbnN0YW5jZVR5cGUuUGFyYWxsZWwudG9TdHJpbmcoKVxyXG4gIH1cclxuICAvL+WKqOaAgemps+WbnumFjee9rlxyXG4gIHNob3dCYWNrV2FyZENvbmZpZyA9IHtcclxuICAgIGR5bmFtaWNCYWNrV2FyZFJ1bGVBYmxlOiBmYWxzZSxcclxuICAgIGVuYWJsZTogZmFsc2UsXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDku7vliqHlgqzlip7ml7bkvb/nlKhcclxuICAgKi9cclxuICBzaG93VXJnZU1lc3NhZ2VTdWJqZWN0OiBib29sZWFuID0gZmFsc2U7IC8vIOaYr+WQpuaYvuekuuWCrOWKnua2iOaBr+S4u+mimO+8iOWCrOWKnuaXtuS9v+eUqO+8iVxyXG4gIHVyZ2VNZXNzYWdlU3ViamVjdDogc3RyaW5nOyAvLyDlgqzlip7mtojmga/kuLvpopjmlofmnKxcclxuICB1cmdlTWVzc2FnZUNvbnRlbnQ6IHN0cmluZzsgLy8g5YKs5Yqe5raI5oGv5YaF5a655paH5pysXHJcbiAgYWRkUmVtaW5kZXI6IGJvb2xlYW47IC8vIOaYr+WQpuaYvuekuuWCrOWKnuS6uua2iOaBr1xyXG4gIHN1YmplY3RFZGl0YWJsZTogYm9vbGVhbjsgLy8g5Li76aKY5Y+v57yW6L6RXHJcbiAgY29udGVudEVkaXRhYmxlOiBib29sZWFuOyAvLyDlhoXlrrnlj6/nvJbovpFcclxuXHJcbiAgd2ZDb250ZXh0ID0gbmV3IFdmQ29udGV4dCgpOy8v5bel5L2c5rWB5LiK5LiL5paHXHJcblxyXG4gIEBIb3N0QmluZGluZygnY2xhc3MnKSBjbHMgPSAnJztcclxuXHJcbiAgUE9TVF9NRVNTQUdFX1RBUkdFVCA9IHdpbmRvdy5kb2N1bWVudC5sb2NhdGlvbi5vcmlnaW47XHJcbiAgcHJpdmF0ZSBtZXNzYWdlU3ViamVjdDtcclxuXHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgcHJpdmF0ZSB0YXNrU2VydmljZTogVGFza1NlcnZpY2UsXHJcbiAgICBwcml2YXRlIG5vdGlmeTogTm90aWZ5U2VydmljZSxcclxuICAgIHByaXZhdGUgaTE4blNlcnZpY2U6IEkxOG5TZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBoYW5kbGVyU2VydmljZTogV2ZUYXNrSGFuZGxlclNlcnZpY2UsXHJcbiAgICBwcml2YXRlIGxvYWRpbmdTZXJ2aWNlOiBMb2FkaW5nU2VydmljZSxcclxuICAgIHByaXZhdGUgbWVzc2FnZTogTWVzc2FnZXJTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBpbmplY3RvcjogSW5qZWN0b3IsXHJcbiAgICBwcml2YXRlIGNkOiBDaGFuZ2VEZXRlY3RvclJlZixcclxuICApIHtcclxuICAgIHN1cGVyKCk7XHJcbiAgICAvLyDlpoLmnpzlrZjlnKjmtojmga/nm5HlkKzvvIzlhYjliKDmjolcclxuICAgIGlmIChUYXNrRXhlY3V0ZUNvbXBvbmVudC5mdW5jKSB7XHJcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgVGFza0V4ZWN1dGVDb21wb25lbnQuZnVuYywgZmFsc2UpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5hZGRNZXNzYWdlTGlzdGVuZXIoKTtcclxuICB9XHJcblxyXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpOiB2b2lkIHtcclxuICB9XHJcblxyXG4gIG5nT25Jbml0KCkge1xyXG4gICAgY29uc3QgbG9hZCA9IHRoaXMubG9hZGluZ1NlcnZpY2Uuc2hvdygpO1xyXG4gICAgdGhpcy50YXNrU2VydmljZS5nZXRBbGxVc2VyQ29uZmlnKCkuc3Vic2NyaWJlKChjb25maWdMaXN0OiBUYXNrQ2VudGVyQ29uZmlnW10pID0+IHtcclxuICAgICAgbG9hZC5jbG9zZSgpO1xyXG4gICAgICB0aGlzLmNvbmZpZ0xpc3QgPSBjb25maWdMaXN0O1xyXG4gICAgICBjb25zdCBjb21tZW50ID0gY29uZmlnTGlzdC5maW5kKGMgPT4gYy5jb25maWdDb2RlID09PSBDb25maWdDb2RlLkRlZmF1bHRfQXBwcm92YWxfQ29tbWVudCk7XHJcbiAgICAgIGNvbnN0IGlmX3N0b3JlX2NvbW1lbnQgPSBjb25maWdMaXN0LmZpbmQoYyA9PiBjLmNvbmZpZ0NvZGUgPT09IENvbmZpZ0NvZGUuSWZfU3RvcmVfQ29tbWVudCk7XHJcbiAgICAgIGxldCBwYXNzQ29tbWVudDogc3RyaW5nO1xyXG4gICAgICBsZXQgYmFja0NvbW1lbnQ6IHN0cmluZztcclxuICAgICAgaWYgKGNvbW1lbnQgJiYgY29tbWVudC5jdXJyZW50VmFsdWUpIHtcclxuICAgICAgICBwYXNzQ29tbWVudCA9IEpTT04ucGFyc2UoY29tbWVudC5jdXJyZW50VmFsdWUpLnBhc3M7XHJcbiAgICAgICAgYmFja0NvbW1lbnQgPSBKU09OLnBhcnNlKGNvbW1lbnQuY3VycmVudFZhbHVlKS5iYWNrO1xyXG4gICAgICAgIGlmICh0aGlzLmFjdGlvbkVudGl0eS5jb2RlID09PSAnUGFzcycpIHtcclxuICAgICAgICAgIHRoaXMuY29tbWVudCA9IHBhc3NDb21tZW50O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5hY3Rpb25FbnRpdHkuY29kZSA9PT0gJ0JhY2snKSB7XHJcbiAgICAgICAgICB0aGlzLmNvbW1lbnQgPSBiYWNrQ29tbWVudDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGlmX3N0b3JlX2NvbW1lbnQgJiYgaWZfc3RvcmVfY29tbWVudC5jdXJyZW50VmFsdWUgPT09ICd0cnVlJykge1xyXG4gICAgICAgIGlmICh0aGlzLndmQ2FjaGVDb21tZW50KSB7XHJcbiAgICAgICAgICBpZiAodGhpcy5hY3Rpb25FbnRpdHkuY29kZSA9PSAnQmFjaycgJiYgdGhpcy53ZkNhY2hlQ29tbWVudCA9PSBwYXNzQ29tbWVudCkge1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5jb21tZW50ID0gdGhpcy53ZkNhY2hlQ29tbWVudDtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0sICgpID0+IHtcclxuICAgICAgbG9hZC5jbG9zZSgpO1xyXG4gICAgfSlcclxuICAgIC8vIOS7juS7u+WKoeWKnueQhueVjOmdouaJk+W8gOaXtu+8jOaJjeazqOWGjOacjeWKoVxyXG4gICAgaWYgKHRoaXMub3JpZ2luID09PSBBY3Rpb25PcmlnaW4uVGFza0Zvcm0pIHtcclxuICAgICAgdGhpcy5pbml0Rm9ybUV2ZW50KCk7XHJcblxyXG4gICAgICAvLyDojrflj5booajljZXmk43kvZzphY3nva5cclxuICAgICAgdGhpcy50YXNrU2VydmljZS5nZXRBcHBJbmZvKHRoaXMud29ya0l0ZW1JZCkuc3Vic2NyaWJlKChyZTogYW55KSA9PiB7XHJcbiAgICAgICAgaWYgKHJlICYmIHJlLmJpbGxNZXRob2RDb25maWdzICYmIHJlLmJpbGxNZXRob2RDb25maWdzLmxlbmd0aCkge1xyXG4gICAgICAgICAgdGhpcy5iaWxsTWV0aG9kQ29uZmlncyA9IHJlLmJpbGxNZXRob2RDb25maWdzO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBsZXQgY29udGV4dCA9IG5ldyBVcmdlSGFuZGxlU2ltdWxhdGVDb250ZXh0KCk7XHJcbiAgICBjb250ZXh0LnByb2NJbnN0SWQgPSB0aGlzLnByb2Nlc3NJbnN0YW5jZUlkO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhZGRNZXNzYWdlTGlzdGVuZXIoKSB7XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHRoaXMuZXZlbnRIYW5kbGVyLCBmYWxzZSk7XHJcbiAgICBUYXNrRXhlY3V0ZUNvbXBvbmVudC5mdW5jID0gdGhpcy5ldmVudEhhbmRsZXI7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDnm5HlkKzkuovku7blpITnkIZcclxuICAgKi9cclxuICBldmVudEhhbmRsZXIgPSAoZXZlbnQpID0+IHtcclxuICAgIHRoaXMubWVzc2FnZVN1YmplY3QubmV4dChldmVudCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDph43lhpnniLbnsbvmlrnms5VcclxuICAgKiBAcGFyYW0gdGFza1xyXG4gICAqL1xyXG4gIHNldFRhc2sodGFzazogVGFza0VudGl0eSkge1xyXG4gICAgaWYgKHRhc2spIHtcclxuICAgICAgdGhpcy50YXNrID0gdGFzaztcclxuICAgICAgdGhpcy53b3JrSXRlbUlkID0gdGFzay5zb3VyY2VJZDtcclxuICAgICAgdGhpcy5wcm9jZXNzSW5zdGFuY2VJZCA9IHRhc2sucHJvY2Vzc0luc3RhbmNlSWQ7XHJcbiAgICAgIHRoaXMud2ZDb250ZXh0LnByb2Nlc3NDYXRlZ29yeUlkID0gdGFzay5jYXRlZ29yeUlkO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6YeN5YaZ54i257G75pa55rOVXHJcbiAgICogQHBhcmFtIGFjdGlvblxyXG4gICAqL1xyXG4gIHNldEFjdGlvbihhY3Rpb246IFRhc2tBY3Rpb24pIHtcclxuICAgIGlmIChhY3Rpb24pIHtcclxuICAgICAgdGhpcy5hY3Rpb25FbnRpdHkgPSBhY3Rpb247XHJcbiAgICAgIGlmICh0aGlzLnRhc2spIHsvLyDljZXkuKrjgIHmibnph4/pg71zZXRBY3Rpb27vvIzljZXkuKrmiY3miafooYzmqKHmi59cclxuICAgICAgICB0aGlzLmV4ZWN1dGUodGhpcy5hY3Rpb25FbnRpdHkpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDliY3kuovku7bliJ3lp4vljJbvvIzlsIbmnI3liqHms6jlhozliLB3aW5kb3fkuIrvvIzkvpvooajljZXosIPnlKhcclxuICAgKiDku7vliqHlip7nkIbnlYzpnaLnmoR3aW5kb3fvvIzooajljZXnmoR3aW5kb3cucGFyZW50XHJcbiAgICovXHJcbiAgcHJpdmF0ZSBpbml0Rm9ybUV2ZW50KCkge1xyXG4gICAgLy8g5a6h5om55YmN5LqL5Lu2XHJcbiAgICBjb25zdCBhY3Rpb25Ub2tlbiA9IHRoaXMud29ya0l0ZW1JZCArICdhY3Rpb24nO1xyXG4gICAgY29uc3Qgc3ViamVjdENvZGUgPSAnRm9ybVN1YmplY3RDb2RlJztcclxuICAgICh3aW5kb3cgYXMgYW55KS5nc3BXZkV2ZW50U2VydmljZSA9ICh3aW5kb3cgYXMgYW55KS5nc3BXZkV2ZW50U2VydmljZSB8fCB7fTtcclxuICAgICh3aW5kb3cgYXMgYW55KS5nc3BXZkV2ZW50U2VydmljZS5yZWdpc3RlciA9IChmb3JtT2JqZWN0OiBhbnkpID0+IHtcclxuICAgICAgdGhpcy50YXNrU2VydmljZS5zdWJqZWN0UmVnaXN0ZXIoc3ViamVjdENvZGUsIGFjdGlvblRva2VuKTtcclxuICAgICAgdGhpcy5pZlJlZ2lzdGVyZWQgPSB0cnVlO1xyXG4gICAgICB0aGlzLmZvcm1PYmplY3QgPSBmb3JtT2JqZWN0O1xyXG4gICAgfTtcclxuXHJcbiAgICAod2luZG93IGFzIGFueSkuZ3NwV2ZFdmVudFNlcnZpY2Uubm90aWZ5ID0gKHZhbHVlOiBGb3JtRXZlbnRNZXNzYWdlKSA9PiB7XHJcbiAgICAgIGlmICh0aGlzLmlmUmVnaXN0ZXJlZCkge1xyXG4gICAgICAgIHRoaXMudGFza1NlcnZpY2Uuc3ViamVjdE5vdGlmeShhY3Rpb25Ub2tlbiwgdmFsdWUpO1xyXG4gICAgICB9IGVsc2Ugey8vIOihqOWNleS4jeazqOWGjO+8jOS5n+WPr+ebtOaOpeiwg+eUqG5vdGlmeVxyXG4gICAgICAgIGNvbnN0IHNpbXVsYXRlVG9rZW4gPSB0aGlzLndvcmtJdGVtSWQgKyAnc2ltdWxhdGUnO1xyXG4gICAgICAgIHRoaXMudGFza1NlcnZpY2Uuc3ViamVjdFJlZ2lzdGVyKHN1YmplY3RDb2RlLCBzaW11bGF0ZVRva2VuKTtcclxuICAgICAgICB0aGlzLnRhc2tTZXJ2aWNlLnN1YmplY3RSZXNwb25zZShzaW11bGF0ZVRva2VuLCAnJywgKHZhbHVlOiBGb3JtRXZlbnRNZXNzYWdlKSA9PiB7XHJcbiAgICAgICAgICB2YWx1ZSAmJiB2YWx1ZS5kYXRhQ2hhbmdlZCAmJiB0aGlzLmNvbXBsZXRlU2ltdWxhdGUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnRhc2tTZXJ2aWNlLnN1YmplY3ROb3RpZnkoc2ltdWxhdGVUb2tlbiwgdmFsdWUpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog54K55Ye75o+Q5Lqk55qE5pe25YCZ77yM5omn6KGM6KGo5Y2V55qE5YmN5LqL5Lu2XHJcbiAgICovXHJcbiAgcHJpdmF0ZSBiZWZvcmVDb21wbGV0ZVN1Ym1pdCgpIHtcclxuICAgIGNvbnN0IHBhc3NQcmVBY3Rpb25zID0gdGhpcy5iaWxsTWV0aG9kQ29uZmlncy5maWx0ZXIoYWN0aW9uID0+IGFjdGlvbi5hY3Rpb24gPT09IHRoaXMuYWN0aW9uRW50aXR5LmNvZGUgJiYgYWN0aW9uLmV4ZWN1dGlvblRpbWUgPT09ICdQcmUnKS5zb3J0KCh4LCB5KSA9PiB4LnNvcnRPcmRlciAtIHkuc29ydE9yZGVyKTtcclxuICAgIC8vIOWmguaenOihqOWNleazqOWGjOS6huS6i+S7tlxyXG4gICAgaWYgKHBhc3NQcmVBY3Rpb25zICYmIHBhc3NQcmVBY3Rpb25zLmxlbmd0aCkge1xyXG4gICAgICB0aGlzLmV4ZWN1dGVGb3JtQWN0aW9ucyhbLi4ucGFzc1ByZUFjdGlvbnNdKTtcclxuICAgIH1cclxuICAgIC8vIOayoeacieWumuS5ieWJjeWQjuS6i+S7tu+8jOebtOaOpeaPkOS6pFxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHRoaXMuY29tcGxldGVTdWJtaXQoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSBmb3JtQWN0aW9ucyDooajljZXkuK3opoHmiafooYznmoTliqjkvZxcclxuICAgKi9cclxuICBwcml2YXRlIGV4ZWN1dGVGb3JtQWN0aW9ucyhmb3JtQWN0aW9uczogQmlsbE1ldGhvZENvbmZpZ1tdKSB7XHJcbiAgICBpZiAoZm9ybUFjdGlvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICB0aGlzLm1lc3NhZ2VTdWJqZWN0ID0gbmV3IFN1YmplY3Q8YW55PigpO1xyXG4gICAgICB0aGlzLm1lc3NhZ2VTdWJqZWN0LnN1YnNjcmliZSgocmU6IGFueSkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHJlLmRhdGEpO1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSByZS5kYXRhLmRhdGE7XHJcbiAgICAgICAgaWYgKGRhdGEucmVzdWx0ID09PSB0cnVlKSB7XHJcbiAgICAgICAgICBpZiAoZGF0YS5kYXRhQ2hhbmdlZCA9PT0gdHJ1ZSkgey8vIOWmguaenOmcgOimgemihOino+aekO+8jOWFiOmihOino+aekOWGjee7p+e7reaJp+ihjFxyXG4gICAgICAgICAgICB0aGlzLmNvbXBsZXRlU2ltdWxhdGUoKS5zdWJzY3JpYmUoKHIpID0+IHtcclxuICAgICAgICAgICAgICBpZiAocikgey8vIOmihOino+aekOato+ehrlxyXG4gICAgICAgICAgICAgICAgdGhpcy5leGVjdXRlRm9ybUFjdGlvbnMoZm9ybUFjdGlvbnMpO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7Ly8g6aKE6Kej5p6Q6ZSZ6K+vXHJcbiAgICAgICAgICAgICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pOyAvLyDku7vliqHlip7nkIbnlYzpnaLkuI3lhbPpl61cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSBlbHNlIHsvLyDkuI3pnIDopoHpooTop6PmnpDvvIznu6fnu63miafooYxcclxuICAgICAgICAgICAgdGhpcy5leGVjdXRlRm9ybUFjdGlvbnMoZm9ybUFjdGlvbnMpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pOyAvLyDku7vliqHlip7nkIbnlYzpnaLkuI3lhbPpl61cclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcign5a6h5om55YmN6KGo5Y2V5pON5L2c5omn6KGM5aSx6LSl77yBJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgICAgLy8g5omn6KGM6KGo5Y2V5Yqo5L2cXHJcbiAgICAgIGNvbnN0IGZvcm1BY3Rpb24gPSBmb3JtQWN0aW9ucy5zaGlmdCgpO1xyXG4gICAgICB0aGlzLnNlbmRNZXNzYWdlKHRoaXMud29ya0l0ZW1JZCwgZm9ybUFjdGlvbik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmNvbXBsZXRlU3VibWl0KCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDpooTop6PmnpBcclxuICAgKiBAcGFyYW0gYWN0aW9uXHJcbiAgICovXHJcbiAgZXhlY3V0ZShhY3Rpb246IFRhc2tBY3Rpb24pIHtcclxuICAgIHN3aXRjaCAoYWN0aW9uLmNvZGUpIHtcclxuICAgICAgY2FzZSAnQXNzaWduVXNlcic6IC8vIOaMh+a0viDljZXni6zlj4LmlbBcclxuICAgICAgICB0aGlzLmFzc2lnblNpbXVsYXRlKCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ0NsYWltJzogLy8g6aKG55SoXHJcbiAgICAgICAgdGhpcy5zaG93QXR0YWNobWVudCA9IGZhbHNlO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdVbmNsYWltJzogLy8g5Y+W5raI6aKG55SoXHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ1JldHJpZXZlJzogLy8g5Y+W5ZueXHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ1RyYW5zZmVyJzogLy8g56e75LqkIOWNleeLrOWPguaVsFxyXG4gICAgICAgIHRoaXMudHJhbnNmZXJTaW11bGF0ZSgpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdBZGRTaWduJzogLy8g5Yqg562+XHJcbiAgICAgICAgdGhpcy5hZGRTaWduU2ltdWxhdGUoKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnQWRkU2lnbkZyb250JzogLy8g5b6B6K+iXHJcbiAgICAgICAgdGhpcy5hZGRTaWduRnJvbnRTaW11bGF0ZSgpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdOb3RpZnknOiAvL+efpeS8mlxyXG4gICAgICAgIHRoaXMubm90aWZ5U2ltdWxhdGUoKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnUmVmdXNlJzogLy8g5ZCm5YazXHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ09ic29sZXRlJzogLy8g5L2c5bqfXHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ0NvbW1lbnQnOiAvLyDor4TorrpcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnUmVhZFRhc2snOiAvLyDlt7LpmIVcclxuICAgICAgICB0aGlzLmlmU2hvd0NvbW1lbnRUb015U2VsZiA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5kaWFsb2dIZWlnaHQgPSAzNDA7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ1VyZ2VIYW5kbGUnOi8v5YKs5YqeXHJcbiAgICAgICAgdGhpcy51cmdlSGFuZGxlU2ltdWxhdGUoKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnQ2FuY2VsQ29uc3VsdCc6Ly/lj5bmtojlvoHor6JcclxuICAgICAgICBicmVhaztcclxuICAgICAgZGVmYXVsdDogLy8g6YCa6L+HIOmps+WbniDph43mlrDmj5DkuqQg5YW25LuW6Ieq5a6a5LmJ55qE5Yqo5L2cXHJcbiAgICAgICAgdGhpcy5jb21wbGV0ZVNpbXVsYXRlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDnnJ/mraPlnLDmj5DkuqRcclxuICAgKiDph43lhpnniLbnsbvmlrnms5VcclxuICAgKi9cclxuICBzdWJtaXQoKTogT2JzZXJ2YWJsZTxTdWJtaXRSZXN1bHQ+IHtcclxuICAgIHN3aXRjaCAodGhpcy5hY3Rpb25FbnRpdHkuY29kZSkge1xyXG4gICAgICBjYXNlICdBc3NpZ25Vc2VyJzogLy8g5oyH5rS+IOWNleeLrOWPguaVsFxyXG4gICAgICAgIHRoaXMuYXNzaWduU3VibWl0KCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ0NsYWltJzogLy8g6aKG55SoXHJcbiAgICAgICAgdGhpcy5jbGFpbVN1Ym1pdCgpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdVbmNsYWltJzogLy8g5Y+W5raI6aKG55SoXHJcbiAgICAgICAgdGhpcy51bkNsYWltU3VibWl0KCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ1JldHJpZXZlJzogLy8g5Y+W5ZueXHJcbiAgICAgICAgdGhpcy5yZXRyaWV2ZVN1Ym1pdCgpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdUcmFuc2Zlcic6IC8vIOenu+S6pCDljZXni6zlj4LmlbBcclxuICAgICAgICB0aGlzLnRyYW5zZmVyU3VibWl0KCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ0FkZFNpZ24nOiAvLyDliqDnrb5cclxuICAgICAgICB0aGlzLmFkZFNpZ25TdWJtaXQoKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnQWRkU2lnbkZyb250JzogLy8g5b6B6K+iXHJcbiAgICAgICAgdGhpcy5hZGRTaWduRnJvbnRTdWJtaXQoKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnQ29tbWVudCc6IC8vIOivhOiuulxyXG4gICAgICAgIHRoaXMuY29tbWVudFN1Ym1pdCgpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdOb3RpZnknOiAvL+efpeS8mlxyXG4gICAgICAgIHRoaXMubm90aWZ5U3VibWl0KCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ1JlYWRUYXNrJzogLy8g5bey6ZiFXHJcbiAgICAgICAgdGhpcy5yZWFkU3VibWl0KCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ1VyZ2VIYW5kbGUnOi8v5YKs5YqeXHJcbiAgICAgICAgdGhpcy51cmdlSGFuZGxlU3VibWl0KCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ0NhbmNlbENvbnN1bHQnOi8v5Y+W5raI5b6B6K+iXHJcbiAgICAgICAgdGhpcy5jYW5jZWxDb25zdWx0U3VibWl0KCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGRlZmF1bHQ6IC8vIOmAmui/hyDpqbPlm54g5ZCm5YazIOS9nOW6nyDph43mlrDmj5DkuqQg5YW25LuW6Ieq5a6a5LmJ5Yqo5L2cXHJcbiAgICAgICAgdGhpcy5iZWZvcmVDb21wbGV0ZVN1Ym1pdCgpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMuc3ViamVjdC5hc09ic2VydmFibGUoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOaJuemHj+WKnueQhlxyXG4gICAqIEBwYXJhbSB0YXNrcyDmibnph4/ku7vliqHliJfooahcclxuICAgKi9cclxuICBiYXRjaFN1Ym1pdCh0YXNrczogVGFza0VudGl0eVtdKTogT2JzZXJ2YWJsZTxTdWJtaXRSZXN1bHQ+IHtcclxuICAgIGxldCBmaWx0ZXJOdW0gPSAwO1xyXG4gICAgY29uc3Qgc3ViamVjdCA9IG5ldyBCZWhhdmlvclN1YmplY3Q8U3VibWl0UmVzdWx0PihudWxsKTtcclxuICAgIGNvbnN0IHN1Y2Nlc3NTdWJtaXQ6IFN1Ym1pdFJlc3VsdCA9IHsgcmVzdWx0OiB0cnVlLCBpc0Nsb3NlOiB0cnVlIH07XHJcbiAgICBpZiAoKHRoaXMuYWN0aW9uRW50aXR5LmNvZGUgPT09ICdCYWNrJyB8fCB0aGlzLmFjdGlvbkVudGl0eS5jb2RlID09PSAnUmVmdXNlJykgJiYgIXRoaXMuY29tbWVudCkgey8vIOaJuemHj+aEj+ingeaYr+WQpuW/heWhq+S4jeaUr+aMgeagueaNruWuoeaJuemhuemFjee9ruaTjeS9nO+8jOaJuemHj+mps+WbnuaEj+ingeW/heWhq1xyXG4gICAgICB0aGlzLm5vdGlmeS53YXJuaW5nKHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ2N1ZVdvcmRzLmlucHV0T3BpbmlvbicpKTtcclxuICAgICAgc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuY29tbWVudC5sZW5ndGggPiAzMDApIHtcclxuICAgICAgdGhpcy5ub3RpZnkud2FybmluZyh0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCd0YXNrLmNvbW1lbnRUb29Mb25nJykpO1xyXG4gICAgICBzdWJqZWN0Lm5leHQoeyByZXN1bHQ6IGZhbHNlLCBpc0Nsb3NlOiBmYWxzZSB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IG5vQWN0aW9uVGFza3MgPSB0YXNrcy5maWx0ZXIodCA9PiB0LmFjdGlvbnMuZmluZEluZGV4KGEgPT4gYS5jb2RlID09PSB0aGlzLmFjdGlvbkVudGl0eS5jb2RlKSA9PT0gLTEpO1xyXG4gICAgICBpZiAobm9BY3Rpb25UYXNrcyAmJiBub0FjdGlvblRhc2tzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBmb3IgKGNvbnN0IGEgb2Ygbm9BY3Rpb25UYXNrcykge1xyXG4gICAgICAgICAgZmlsdGVyTnVtKys7XHJcbiAgICAgICAgICBpZiAoZmlsdGVyTnVtID09PSB0YXNrcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgc3ViamVjdC5uZXh0KHN1Y2Nlc3NTdWJtaXQpO1xyXG4gICAgICAgICAgICB0aGlzLnNob3dCYXRjaFN1Ym1pdEluZm8oMCwgZmlsdGVyTnVtLCAwLCAwKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgbGV0IGFjdFRhc2tzID0gdGFza3MuZmlsdGVyKHQgPT4gdC5hY3Rpb25zLnNvbWUoYSA9PiBhLmNvZGUgPT09IHRoaXMuYWN0aW9uRW50aXR5LmNvZGUpKTtcclxuICAgICAgaWYgKGFjdFRhc2tzICYmIGFjdFRhc2tzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICB0aGlzLmV4ZWN1dGVCYXRjaEV2ZW50KFsuLi50aGlzLmFjdGlvbkVudGl0eS5wcmVFdmVudHMuZmlsdGVyKGUgPT4gZS5iYXRjaCldLCBhY3RUYXNrcywgdGhpcy5hY3Rpb25FbnRpdHksIChyZTogVGFza0V2ZW50UmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICBpZiAocmUgJiYgcmUucmVzdWx0KSB7XHJcbiAgICAgICAgICAgIGlmIChyZS5wYXNzVGFza3MpIHtcclxuICAgICAgICAgICAgICBjb25zdCBiYWNrVGFza3MgPSBhY3RUYXNrcy5maWx0ZXIodCA9PiByZS5wYXNzVGFza3MuZmluZEluZGV4KGlkID0+IGlkID09PSB0LmlkKSA9PT0gLTEpO1xyXG4gICAgICAgICAgICAgIGlmIChiYWNrVGFza3MgJiYgYmFja1Rhc2tzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiBiYWNrVGFza3MpIHtcclxuICAgICAgICAgICAgICAgICAgZmlsdGVyTnVtKys7XHJcbiAgICAgICAgICAgICAgICAgIGlmIChmaWx0ZXJOdW0gPT09IHRhc2tzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1YmplY3QubmV4dChzdWNjZXNzU3VibWl0KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dCYXRjaFN1Ym1pdEluZm8oMCwgZmlsdGVyTnVtLCAwLCAwKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBhY3RUYXNrcyA9IGFjdFRhc2tzLmZpbHRlcih0ID0+IHJlLnBhc3NUYXNrcy5maW5kSW5kZXgoaWQgPT4gaWQgPT09IHQuaWQpID4gLTEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChhY3RUYXNrcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgY29uc3QgYmF0Y2hWZXJpZnlTaWduZWRjb250ZXh0ID0gbmV3IEJhdGNoVmVyaWZ5U2lnbmVkQ29udGV4dCgpO1xyXG4gICAgICAgICAgICAgIHRoaXMuYmF0Y2h2ZXJpZnlTdWJtaXQoYWN0VGFza3MsIGZpbHRlck51bSwgYmF0Y2hWZXJpZnlTaWduZWRjb250ZXh0KS5zdWJzY3JpYmUoKHI6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHIgJiYgci5zdWNjZXNzU3VibWl0ICYmIHIuc3VjY2Vzc1N1Ym1pdC5yZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgdGhpcy5leGVjdXRlQmF0Y2hFdmVudChbLi4udGhpcy5hY3Rpb25FbnRpdHkucG9zdEV2ZW50cy5maWx0ZXIoZSA9PiBlLmJhdGNoKV0sIHIuc3VjY2Vzc0hhbmRsZVRhc2tzLCB0aGlzLmFjdGlvbkVudGl0eSwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1YmplY3QubmV4dChyLnN1Y2Nlc3NTdWJtaXQpO1xyXG4gICAgICAgICAgICAgICAgICB9LCB7IHJlc3VsdDogdHJ1ZSwgcGFzc1Rhc2tzOiByLnN1Y2Nlc3NIYW5kbGVUYXNrcy5tYXAodCA9PiB0LmlkKSB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSwgeyByZXN1bHQ6IHRydWUsIHBhc3NUYXNrczogYWN0VGFza3MubWFwKHQgPT4gdC5pZCkgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBzdWJqZWN0LmFzT2JzZXJ2YWJsZSgpO1xyXG4gIH1cclxuXHJcblxyXG4gIHByaXZhdGUgYmF0Y2h2ZXJpZnlTdWJtaXQodGFza3M6IFRhc2tFbnRpdHlbXSwgZmlsdGVyTnVtOiBudW1iZXIgPSAwLCBiYXRjaFZlcmlmeVNpZ25lZGNvbnRleHQ6IEJhdGNoVmVyaWZ5U2lnbmVkQ29udGV4dCk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICBjb25zdCBzdWJqZWN0ID0gbmV3IFN1YmplY3QoKTtcclxuICAgIGNvbnN0IHZlcmlmeVRhc2tzID0gdGFza3MuZmlsdGVyKHQgPT4ge1xyXG4gICAgICBjb25zdCBhY3Rpb24gPSB0LmFjdGlvbnMuZmluZChhID0+IGEuY29kZSA9PT0gdGhpcy5hY3Rpb25FbnRpdHkuY29kZSk7XHJcbiAgICAgIGlmICghYWN0aW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmIChhY3Rpb24ucGFyYW1ldGVycy5zb21lKHAgPT4gcC5jb2RlID09PSAnQ2VydGlmaWNhdGlvbk5lY2Vzc2FyeScgJiYgcC52YWx1ZSA9PT0gJ3RydWUnKSkge1xyXG4gICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgY29uc3QgdmVyaWZ5VGFza3NOdW0gPSB2ZXJpZnlUYXNrcy5sZW5ndGg7XHJcbiAgICBpZiAodmVyaWZ5VGFza3MubGVuZ3RoID4gMCkge1xyXG4gICAgICBjb25zdCB0aGF0ID0gdGhpcztcclxuICAgICAgaWYgKFxyXG4gICAgICAgICh3aW5kb3cgYXMgYW55KS5nc3BmcmFtZXdvcmtTZXJ2aWNlICYmXHJcbiAgICAgICAgKHdpbmRvdyBhcyBhbnkpLmdzcGZyYW1ld29ya1NlcnZpY2UucnRmXHJcbiAgICAgICkge1xyXG4gICAgICAgICh3aW5kb3cgYXMgYW55KS5nc3BmcmFtZXdvcmtTZXJ2aWNlLnJ0Zi5jYUV2ZW50Lm9uKFxyXG4gICAgICAgICAgKHdpbmRvdyBhcyBhbnkpLmdzcGZyYW1ld29ya1NlcnZpY2UucnRmLmNhRXZlbnQuc2lnbmVkTXNnT3ZlclRva2VuKCksXHJcbiAgICAgICAgICAnc2lnbmVkTXNnT3ZlcicsXHJcbiAgICAgICAgICBmdW5jdGlvbiBzaWduTXNnT3ZlcihzaWduZWREYXRhKSB7XHJcbiAgICAgICAgICAgIGlmIChzaWduZWREYXRhICYmIHNpZ25lZERhdGFbMF0gPT09ICd0cnVlJyAmJiBzaWduZWREYXRhLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAvLyDor4Hkuablr7nosaFcclxuICAgICAgICAgICAgICBjb25zdCBjZXJ0ID0gZ3NwQ0EuZ2V0Q3VyQ2VydCgpO1xyXG4gICAgICAgICAgICAgIC8vIOmqjOetvuWPguaVsFxyXG4gICAgICAgICAgICAgIHRoYXQudmVyaWZ5U2lnbmVkID0ge1xyXG4gICAgICAgICAgICAgICAgLy8g6KaB6aqM6K+B55qE6K+B5LmmYmFzZTY057yW56CB55qE5a2X56ym5rWBKGNlcnRrZXkpXHJcbiAgICAgICAgICAgICAgICBjZXJ0QmFzZTY0SW5mbzogZ3NwQ0EuZ2V0Q2VydEJhc2U2NChjZXJ0KSxcclxuICAgICAgICAgICAgICAgIC8vIOetvuWQjeWOn+S/oeaBr1xyXG4gICAgICAgICAgICAgICAgbXNnOiBbJ0JhdGNoRGlnaXRhbFNpZ25hdHVyZSddLFxyXG4gICAgICAgICAgICAgICAgLy8g6KaB562+5ZCN5ZCO5L+h5oGvXHJcbiAgICAgICAgICAgICAgICBzaWduZWRtc2c6IHNpZ25lZERhdGFbMV1bMF0sXHJcbiAgICAgICAgICAgICAgICAvLyDnlKjmiLfkvb/nlKjlnLrmma/vvIznm67liY3mnKrkvb/nlKjvvIzlj6/ku6XkuLrnqbpcclxuICAgICAgICAgICAgICAgIHVzZUNhc2U6IG51bGwsXHJcbiAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICBiYXRjaFZlcmlmeVNpZ25lZGNvbnRleHQudmVyaWZ5U2lnbmVkID0gdGhhdC52ZXJpZnlTaWduZWQ7XHJcbiAgICAgICAgICAgICAgdGhhdC50YXNrU2VydmljZS5iYXRjaFZlcmlmeVNpZ25lZChiYXRjaFZlcmlmeVNpZ25lZGNvbnRleHQpLnN1YnNjcmliZSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB2ZXJpZnlUYXNrc051bSA9IDA7XHJcbiAgICAgICAgICAgICAgICB0aGF0LmJhdGNoQ29tcGxldGUodGFza3MsIGZpbHRlck51bSwgdmVyaWZ5VGFza3NOdW0pLnN1YnNjcmliZShyZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIHN1YmplY3QubmV4dChyZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICB9LCAoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG90aGVyVGFza3MgPSB0YXNrcy5maWx0ZXIodCA9PiB2ZXJpZnlUYXNrcy5maW5kSW5kZXgodGFzayA9PiB0YXNrLmlkID09PSB0LmlkKSA9PT0gLTEpO1xyXG4gICAgICAgICAgICAgICAgdGhhdC5iYXRjaENvbXBsZXRlKG90aGVyVGFza3MsIGZpbHRlck51bSwgdmVyaWZ5VGFza3NOdW0pLnN1YnNjcmliZShyZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIHN1YmplY3QubmV4dChyZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICB0aGF0Lm5vdGlmeS5lcnJvcihzaWduZWREYXRhWzFdKTtcclxuICAgICAgICAgICAgICBzdWJqZWN0Lm5leHQoeyBzdWNjZXNzU3VibWl0OiB7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0sIHN1Y2Nlc3NIYW5kbGVUYXNrczogbmV3IEFycmF5KCkgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IG1zZyA9IFsnQmF0Y2hEaWdpdGFsU2lnbmF0dXJlJ107XHJcbiAgICAgIGdzcENBLmdldFNpZ25lZE1zZyhtc2cpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5iYXRjaENvbXBsZXRlKHRhc2tzLCBmaWx0ZXJOdW0sIHZlcmlmeVRhc2tzTnVtKS5zdWJzY3JpYmUocmUgPT4ge1xyXG4gICAgICAgIHN1YmplY3QubmV4dChyZSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHN1YmplY3QuYXNPYnNlcnZhYmxlKCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGJhdGNoQ29tcGxldGUodGFza3M6IFRhc2tFbnRpdHlbXSwgZmlsdGVyTnVtOiBudW1iZXIgPSAwLCB2ZXJpZnlUYXNrc051bTogbnVtYmVyKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgIGNvbnN0IHN1YmplY3QgPSBuZXcgU3ViamVjdDxhbnk+KCk7XHJcbiAgICBsZXQgc3VjY2Vzc051bSA9IDA7XHJcbiAgICBsZXQgZmFpbGVkTnVtID0gMDtcclxuICAgIGxldCBlcnJvck51bSA9IDA7XHJcbiAgICBjb25zdCBzdWNjZXNzU3VibWl0OiBTdWJtaXRSZXN1bHQgPSB7IHJlc3VsdDogdHJ1ZSwgaXNDbG9zZTogdHJ1ZSB9O1xyXG4gICAgY29uc3Qgc3VjY2Vzc0hhbmRsZVRhc2tzID0gbmV3IEFycmF5KCk7XHJcblxyXG4gICAgY29uc3QgbG9hZCA9IHRoaXMubG9hZGluZ1NlcnZpY2Uuc2hvdygpO1xyXG4gICAgZm9yIChjb25zdCB0YXNrIG9mIHRhc2tzKSB7XHJcbiAgICAgIGNvbnN0IGNvbnRleHQgPSBuZXcgQ29tcGxldGVDb250ZXh0KCk7XHJcbiAgICAgIGNvbnRleHQud29ya0l0ZW1JZCA9IHRhc2suc291cmNlSWQ7XHJcbiAgICAgIGNvbnRleHQuY29uY2x1c2lvblZhbHVlID0gdGhpcy5hY3Rpb25FbnRpdHkuY29kZTtcclxuICAgICAgY29udGV4dC5jb21tZW50ID0gdGhpcy5jb21tZW50O1xyXG4gICAgICBjb250ZXh0LmFkZGVuZHVtID0gdGhpcy5hZGRlbmR1bTtcclxuICAgICAgdGhpcy50YXNrU2VydmljZS5jb21wbGV0ZVNpbXVsYXRlKGNvbnRleHQpLnN1YnNjcmliZSgocmVzcG9uc2U6IFNpbXVsYXRlUmVzcG9uc2UpID0+IHtcclxuICAgICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2UubmVlZEludGVyYWN0aW9uID09PSB0cnVlKSB7Ly8g6ZyA6KaB5Lqk5LqSXHJcbiAgICAgICAgICBmYWlsZWROdW0rKztcclxuICAgICAgICAgIGlmIChzdWNjZXNzTnVtICsgZmFpbGVkTnVtICsgZXJyb3JOdW0gPT09IHRhc2tzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBsb2FkLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIHN1YmplY3QubmV4dCh7IHN1Y2Nlc3NTdWJtaXQsIHN1Y2Nlc3NIYW5kbGVUYXNrcyB9KTtcclxuICAgICAgICAgICAgdGhpcy5zaG93QmF0Y2hTdWJtaXRJbmZvKHN1Y2Nlc3NOdW0sIGZhaWxlZE51bSArIGZpbHRlck51bSwgZXJyb3JOdW0sIHZlcmlmeVRhc2tzTnVtKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Ugey8vIOS4jemcgOimgeS6pOS6klxyXG4gICAgICAgICAgdGhpcy50YXNrU2VydmljZS5jb21wbGV0ZShjb250ZXh0KS5zdWJzY3JpYmUoKCkgPT4gey8vIOaJp+ihjOaIkOWKn1xyXG4gICAgICAgICAgICBzdWNjZXNzTnVtKys7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3NIYW5kbGVUYXNrcy5wdXNoKHRhc2spO1xyXG4gICAgICAgICAgICBpZiAoc3VjY2Vzc051bSArIGZhaWxlZE51bSArIGVycm9yTnVtID09PSB0YXNrcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICBsb2FkLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgc3ViamVjdC5uZXh0KHsgc3VjY2Vzc1N1Ym1pdCwgc3VjY2Vzc0hhbmRsZVRhc2tzIH0pO1xyXG4gICAgICAgICAgICAgIHRoaXMuc2hvd0JhdGNoU3VibWl0SW5mbyhzdWNjZXNzTnVtLCBmYWlsZWROdW0gKyBmaWx0ZXJOdW0sIGVycm9yTnVtLCB2ZXJpZnlUYXNrc051bSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0sICgpID0+IHsvLyDmiafooYzmiqXplJlcclxuICAgICAgICAgICAgZXJyb3JOdW0rKztcclxuICAgICAgICAgICAgaWYgKHN1Y2Nlc3NOdW0gKyBmYWlsZWROdW0gKyBlcnJvck51bSA9PT0gdGFza3MubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgbG9hZC5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgIHN1YmplY3QubmV4dCh7IHN1Y2Nlc3NTdWJtaXQsIHN1Y2Nlc3NIYW5kbGVUYXNrcyB9KTtcclxuICAgICAgICAgICAgICB0aGlzLnNob3dCYXRjaFN1Ym1pdEluZm8oc3VjY2Vzc051bSwgZmFpbGVkTnVtICsgZmlsdGVyTnVtLCBlcnJvck51bSwgdmVyaWZ5VGFza3NOdW0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sICgpID0+IHsvLyDku7vliqHmqKHmi5/or7fmsYLmiqXplJlcclxuICAgICAgICBlcnJvck51bSsrO1xyXG4gICAgICAgIGlmIChzdWNjZXNzTnVtICsgZmFpbGVkTnVtICsgZXJyb3JOdW0gPT09IHRhc2tzLmxlbmd0aCkge1xyXG4gICAgICAgICAgbG9hZC5jbG9zZSgpO1xyXG4gICAgICAgICAgc3ViamVjdC5uZXh0KHsgc3VjY2Vzc1N1Ym1pdCwgc3VjY2Vzc0hhbmRsZVRhc2tzIH0pO1xyXG4gICAgICAgICAgdGhpcy5zaG93QmF0Y2hTdWJtaXRJbmZvKHN1Y2Nlc3NOdW0sIGZhaWxlZE51bSArIGZpbHRlck51bSwgZXJyb3JOdW0sIHZlcmlmeVRhc2tzTnVtKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHN1YmplY3QuYXNPYnNlcnZhYmxlKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmibnph4/mj5DkuqTmj5DnpLrkv6Hmga9cclxuICAgKiBAcGFyYW0gc3VjY2Vzc051bSDmiJDlip/mnaHmlbBcclxuICAgKiBAcGFyYW0gZmFpbGVkTnVtIOmcgOimgeS6pOS6kueahOadoeaVsFxyXG4gICAqIEBwYXJhbSBlcnJvck51bSDmiafooYzmiqXplJnnmoTmnaHmlbBcclxuICAgKiBAcGFyYW0gdmVyaWZ5VGFza3NOdW0g6ZyA6KaB5pWw5a2X562+5ZCN55qE5p2h5pWwXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzaG93QmF0Y2hTdWJtaXRJbmZvKHN1Y2Nlc3NOdW06IG51bWJlciwgZmFpbGVkTnVtOiBudW1iZXIsIGVycm9yTnVtOiBudW1iZXIsIHZlcmlmeVRhc2tzTnVtOiBudW1iZXIpIHtcclxuICAgIGxldCBtZXNzYWdlID0gJyc7XHJcbiAgICBpZiAoc3VjY2Vzc051bSAmJiAhZmFpbGVkTnVtICYmICFlcnJvck51bSAmJiAhdmVyaWZ5VGFza3NOdW0pIHsvLyDmibnph4/lhajpg6jmiJDlip9cclxuICAgICAgdGhpcy5ub3RpZnkuc3VjY2Vzcyh0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCdjdWVXb3Jkcy5zdWNjZXNzJykpO1xyXG4gICAgfSBlbHNlIHsvLyDpnZ7lhajpg6jmiJDlip9cclxuICAgICAgc3VjY2Vzc051bSAmJiAobWVzc2FnZSArPSB0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCdiYXRjaFN1Ym1pdC5zdWNjZXNzJykgKyBg44CQJHtzdWNjZXNzTnVtfeOAkWAgKyB0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCdiYXRjaFN1Ym1pdC5yb3cnKSk7XHJcbiAgICAgIGVycm9yTnVtICYmIChtZXNzYWdlICs9IHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ2JhdGNoU3VibWl0LmVycm9yJykgKyBg44CQJHtlcnJvck51bX3jgJFgICsgdGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgnYmF0Y2hTdWJtaXQucm93JykpO1xyXG4gICAgICBmYWlsZWROdW0gJiYgKG1lc3NhZ2UgKz0gdGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgnYmF0Y2hTdWJtaXQuZmFpbGVkJykgKyBg44CQJHtmYWlsZWROdW1944CRYCArIHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ2JhdGNoU3VibWl0LnJvdycpKTtcclxuICAgICAgdmVyaWZ5VGFza3NOdW0gJiYgKG1lc3NhZ2UgKz0gdGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgnYmF0Y2hTdWJtaXQudmFsaWRhdGlvbkZhaWxlZCcpICsgYOOAkCR7dmVyaWZ5VGFza3NOdW1944CRYCArIHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ2JhdGNoU3VibWl0LnJvdycpKTtcclxuICAgICAgbWVzc2FnZSArPSB0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCdiYXRjaFN1Ym1pdC5zaW5nbGUnKTtcclxuICAgICAgdGhpcy5tZXNzYWdlLnNob3coJ3dhcm5pbmcnLCBtZXNzYWdlLCB7IHNhZmVIdG1sOiBmYWxzZSB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgZXhlY3V0ZUJhdGNoRXZlbnQoZXZlbnRzOiBBY3Rpb25FdmVudFtdLCBlbnRpdGllczogQXJyYXk8VGFza0VudGl0eT4sIGFjdGlvbjogVGFza0FjdGlvbiwgaGFuZGxlcjogYW55LCByZXN1bHQ/OiBUYXNrRXZlbnRSZXN1bHQpIHtcclxuICAgIGlmICh0aGlzLmluamVjdG9yKSB7XHJcbiAgICAgIGlmIChldmVudHMgJiYgZXZlbnRzLmxlbmd0aCA+IDAgJiYgZW50aXRpZXMgJiYgZW50aXRpZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGNvbnN0IGV2ZW50ID0gZXZlbnRzLnNoaWZ0KCk7XHJcbiAgICAgICAgY29uc3QgdXJsID0gZXZlbnQuZXZlbnRJbXBsLnNwbGl0KCcjJylbMF07XHJcbiAgICAgICAgY29uc3QgZnVuYyA9IGV2ZW50LmV2ZW50SW1wbC5zcGxpdCgnIycpWzFdO1xyXG4gICAgICAgIFN5c3RlbS5pbXBvcnQodXJsICsgJz92PScgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKS50b1N0cmluZygpKVxyXG4gICAgICAgICAgLnRoZW4oKG1vZHVsZUZhY3RvcmllczogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vZHVsZUZhY3Rvcnk6IGFueSA9IE9iamVjdC52YWx1ZXMobW9kdWxlRmFjdG9yaWVzKVswXTtcclxuICAgICAgICAgICAgY29uc3QgbW9kdWxlUmVmID0gbW9kdWxlRmFjdG9yeS5jcmVhdGUodGhpcy5pbmplY3Rvcik7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRleHQ6IFRhc2tFdmVudENvbnRleHQgPSB7XHJcbiAgICAgICAgICAgICAgYWN0aW9uLFxyXG4gICAgICAgICAgICAgIHRhc2tMaXN0OiBlbnRpdGllcyxcclxuICAgICAgICAgICAgICBvcmlnaW46ICdUYXNrQ2VudGVyJyxcclxuICAgICAgICAgICAgICBwcmVFdmVudFJlc3VsdDogcmVzdWx0XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIG1vZHVsZVJlZi5pbnN0YW5jZVtmdW5jXS5hcHBseShtb2R1bGVSZWYuaW5zdGFuY2UsIFtjb250ZXh0XSkuc3Vic2NyaWJlKChyZTogVGFza0V2ZW50UmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICAgICAgaWYgKHJlICYmIHJlLnJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5leGVjdXRlQmF0Y2hFdmVudChldmVudHMsIGVudGl0aWVzLCBhY3Rpb24sIGhhbmRsZXIsIHJlKTtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaGFuZGxlcihyZSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGhhbmRsZXIocmVzdWx0KTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaGFuZGxlcihyZXN1bHQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcblxyXG4gIHByaXZhdGUgYXNzaWduU2ltdWxhdGUoKSB7XHJcbiAgICB0aGlzLnNob3dBdHRhY2htZW50ID0gZmFsc2U7XHJcbiAgICB0aGlzLmlmQXNzaWduVXNlciA9IHRydWU7XHJcbiAgICB0aGlzLmRpYWxvZ0hlaWdodCArPSB0aGlzLmRpYWxvZ0hlaWdodEJhc2U7XHJcbiAgICB0aGlzLnRhc2tTZXJ2aWNlLmdldEFzc2lnbmVlSW5mbyh0aGlzLndvcmtJdGVtSWQpLnN1YnNjcmliZSgoaW5mbzogRmxvd05vZGVJbmZvKSA9PiB7XHJcbiAgICAgIHRoaXMuYXNzaWduSW5mb3MgPSBbe1xyXG4gICAgICAgIHNlbGVjdGVkQXNzaWduZWVzOiBpbmZvLnNlbGVjdGVkQXNzaWduZWVzLFxyXG4gICAgICAgIGFzc2lnbmVlSW5mbzogaW5mby5hc3NpZ25lZUluZm8sXHJcbiAgICAgICAgYXNzaWduZWVzOiBpbmZvLnNlbGVjdGVkQXNzaWduZWVzLm1hcCh1c2VyID0+IHsgcmV0dXJuIHsgaWQ6IHVzZXIuaWQsIG5hbWU6IHVzZXIubmFtZSB9OyB9KSxcclxuICAgICAgICBhY3Rpdml0eU5hbWU6IGluZm8uYWN0aXZpdHlEZWZpbml0aW9uTmFtZSxcclxuICAgICAgICBkZXBlbmRlbmN5OiBpbmZvLmRlcGVuZGVuY3ksXHJcbiAgICAgICAgYW5vbnltb3VzOiBpbmZvLmFub255bW91cyxcclxuICAgICAgICBhbm9ueW1vdXNUZXh0OiBpbmZvLmFub255bW91c1RleHQsXHJcbiAgICAgICAgcmVzb2x2ZWQ6IGluZm8ucmVzb2x2ZWQsXHJcbiAgICAgIH1dO1xyXG4gICAgfSwgKGVycm9yKSA9PiB7XHJcbiAgICAgIHRoaXMudGFza1NlcnZpY2UuZXJyb3IoZXJyb3IpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHRyYW5zZmVyU2ltdWxhdGUoKSB7Ly8g56e75LqkXHJcbiAgICB0aGlzLmlmU2VsZWN0VXNlciA9IHRydWU7XHJcbiAgICB0aGlzLnNlbGVjdFVzZXJUZXh0ID0gdGhpcy5hY3Rpb25FbnRpdHkubmFtZSArIHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3Rhc2sucGVyc29uJyk7XHJcbiAgICB0aGlzLnNpbmdsZVNlbGVjdCA9IHRydWU7XHJcbiAgICB0aGlzLmRpYWxvZ0hlaWdodCArPSB0aGlzLmRpYWxvZ0hlaWdodEJhc2U7XHJcbiAgICB0aGlzLmdldE9yZ2FuaXphdGlvblNjb3BlKCk7XHJcblxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhZGRTaWduRnJvbnRTaW11bGF0ZSgpIHsvLyDlvoHor6JcclxuICAgIHRoaXMuaWZTZWxlY3RVc2VyID0gdHJ1ZTtcclxuICAgIHRoaXMuc2VsZWN0VXNlclRleHQgPSB0aGlzLmFjdGlvbkVudGl0eS5uYW1lICsgdGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgndGFzay5wZXJzb24nKTtcclxuICAgIHRoaXMuZGlhbG9nSGVpZ2h0ICs9IHRoaXMuZGlhbG9nSGVpZ2h0QmFzZTtcclxuICAgIHRoaXMuZ2V0T3JnYW5pemF0aW9uU2NvcGUoKTtcclxuXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFkZFNpZ25TaW11bGF0ZSgpIHsvLyDliqDnrb5cclxuICAgIHRoaXMuaWZTZWxlY3RVc2VyID0gdHJ1ZTtcclxuICAgIHRoaXMuc2VsZWN0VXNlclRleHQgPSB0aGlzLmFjdGlvbkVudGl0eS5uYW1lICsgdGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgndGFzay5wZXJzb24nKTtcclxuICAgIHRoaXMuZGlhbG9nSGVpZ2h0ICs9IHRoaXMuZGlhbG9nSGVpZ2h0QmFzZSAqIDI7XHJcbiAgICBjb25zdCBsb2FkID0gdGhpcy5sb2FkaW5nU2VydmljZS5zaG93KCk7XHJcbiAgICB0aGlzLnRhc2tTZXJ2aWNlLmdldEFkaG9jQ29uZmlnKHRoaXMud29ya0l0ZW1JZCkuc3Vic2NyaWJlKChyZXNwb25zZTogQWRkU2lnblNpbXVsYXRlUmVzcG9uc2UpID0+IHtcclxuICAgICAgbG9hZC5jbG9zZSgpO1xyXG4gICAgICB0aGlzLmFkZFNpZ24uc2hvd1NpZ25Ub1NpZ24gPSByZXNwb25zZS5zaG93U2lnblRvU2lnbjtcclxuICAgICAgdGhpcy5hZGRTaWduLm9yaWdpbk11bHRpSW5zdFR5cGUgPSByZXNwb25zZS5tdWx0aUluc3RhbmNlVHlwZTtcclxuICAgICAgaWYgKHJlc3BvbnNlLm9yZ2FuaXphdGlvbikge1xyXG4gICAgICAgIHRoaXMuZmlsdGVyLm9yZ0lkID0gcmVzcG9uc2Uub3JnYW5pemF0aW9uLmlkO1xyXG4gICAgICAgIHRoaXMuZmlsdGVyLndpdGhBbGxPcmcgPSByZXNwb25zZS5vcmdhbml6YXRpb24uaW5jbHVkZUNoaWxkcmVuO1xyXG4gICAgICB9XHJcbiAgICB9LCBlcnJvciA9PiB7XHJcbiAgICAgIGxvYWQuY2xvc2UoKTtcclxuICAgICAgdGhpcy50YXNrU2VydmljZS5lcnJvcihlcnJvcik7XHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBub3RpZnlTaW11bGF0ZSgpIHsvL+efpeS8mlxyXG4gICAgdGhpcy5pZlNlbGVjdFVzZXIgPSB0cnVlO1xyXG4gICAgdGhpcy5zZWxlY3RVc2VyVGV4dCA9IHRoaXMuYWN0aW9uRW50aXR5Lm5hbWUgKyB0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCd0YXNrLnBlcnNvbicpO1xyXG4gICAgdGhpcy5kaWFsb2dIZWlnaHQgKz0gdGhpcy5kaWFsb2dIZWlnaHRCYXNlO1xyXG4gICAgdGhpcy5zaW5nbGVTZWxlY3QgPSBmYWxzZTtcclxuICAgIHRoaXMuZ2V0T3JnYW5pemF0aW9uU2NvcGUoKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0T3JnYW5pemF0aW9uU2NvcGUoKSB7XHJcbiAgICBjb25zdCBsb2FkID0gdGhpcy5sb2FkaW5nU2VydmljZS5zaG93KCk7XHJcbiAgICB0aGlzLnRhc2tTZXJ2aWNlLmdldE9yZ2FuaXphdGlvblNjb3BlKHRoaXMud29ya0l0ZW1JZCwgdGhpcy5hY3Rpb25FbnRpdHkuY29kZSkuc3Vic2NyaWJlKChvcmdMaXN0OiBPcmdhbml6YXRpb25TY29wZVtdKSA9PiB7XHJcbiAgICAgIGxvYWQuY2xvc2UoKTtcclxuICAgICAgaWYgKG9yZ0xpc3QubGVuZ3RoKSB7Ly8g5YWo5ZGY5Lya6L+U5Zue56m65pWw57uEXHJcbiAgICAgICAgdGhpcy5maWx0ZXIub3JnSWQgPSBvcmdMaXN0WzBdLmlkO1xyXG4gICAgICAgIHRoaXMuZmlsdGVyLndpdGhBbGxPcmcgPSBvcmdMaXN0WzBdLmluY2x1ZGVDaGlsZHJlbjtcclxuICAgICAgfVxyXG4gICAgfSwgZXJyb3IgPT4ge1xyXG4gICAgICBsb2FkLmNsb3NlKCk7XHJcbiAgICAgIHRoaXMudGFza1NlcnZpY2UuZXJyb3IoZXJyb3IpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDlgqzlip7mqKHmi59cclxuICAgKi9cclxuICBwcml2YXRlIHVyZ2VIYW5kbGVTaW11bGF0ZSgpIHtcclxuICAgIHRoaXMuaWZTZWxlY3ROb2RlID0gZmFsc2U7XHJcbiAgICB0aGlzLmlmU2VsZWN0VXNlciA9IGZhbHNlO1xyXG4gICAgdGhpcy5pZkFzc2lnblVzZXIgPSBmYWxzZTtcclxuICAgIHRoaXMuaWZVcmdlVHlwZSA9IHRydWU7XHJcbiAgICB0aGlzLmNvbW1lbnRQbGFjZUhvbGRlciA9IHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3Rhc2sudXJnZUNvbW1lbnQnKTtcclxuICAgIHRoaXMuc2hvd0NvbW1vbkNvbW1lbnQgPSBmYWxzZTtcclxuICAgIHRoaXMuc2hvd0F0dGFjaG1lbnQgPSBmYWxzZTtcclxuICAgIHRoaXMuc2hvd1VyZ2VNZXNzYWdlU3ViamVjdCA9IHRydWU7XHJcbiAgICB0aGlzLnNob3dTaWduID0gZmFsc2U7XHJcbiAgICB0aGlzLmRpYWxvZ0hlaWdodCArPSB0aGlzLmRpYWxvZ0hlaWdodEJhc2UgKiAyO1xyXG4gICAgY29uc3QgbG9hZCA9IHRoaXMubG9hZGluZ1NlcnZpY2Uuc2hvdygpO1xyXG4gICAgbGV0IGNvbnRleHQgPSBuZXcgVXJnZUhhbmRsZVNpbXVsYXRlQ29udGV4dCgpO1xyXG4gICAgY29udGV4dC5wcm9jSW5zdElkID0gdGhpcy5wcm9jZXNzSW5zdGFuY2VJZDtcclxuICAgIHRoaXMudGFza1NlcnZpY2UudXJnZUhhbmRsZVNpbXVsYXRlKGNvbnRleHQpLnN1YnNjcmliZSgocmU6IFVyZ2VIYW5kbGVSZXNwb25zZSkgPT4ge1xyXG4gICAgICBsb2FkLmNsb3NlKCk7XHJcbiAgICAgIHRoaXMudXJnZUhhbmRsZVJlc3BvbnNlID0gcmU7XHJcbiAgICAgIGlmIChyZSAmJiByZS51cmdlVXNlcnMgJiYgcmUudXJnZVVzZXJzLmxlbmd0aCkge1xyXG4gICAgICAgIHRoaXMudXJnZU1lc3NhZ2VTdWJqZWN0ID0gcmUudXJnZVVzZXJzWzBdLnVyZ2VJbmZvc1swXS51cmdlTWVzc2FnZVN1YmplY3Q7XHJcbiAgICAgICAgdGhpcy51cmdlTWVzc2FnZUNvbnRlbnQgPSByZS51cmdlVXNlcnNbMF0udXJnZUluZm9zWzBdLnVyZ2VNZXNzYWdlQ29udGVudDtcclxuICAgICAgICB0aGlzLnN1YmplY3RFZGl0YWJsZSA9IHJlLnVyZ2VVc2Vyc1swXS51cmdlSW5mb3NbMF0uc3ViamVjdEVkaXRhYmxlO1xyXG4gICAgICAgIHRoaXMuY29udGVudEVkaXRhYmxlID0gcmUudXJnZVVzZXJzWzBdLnVyZ2VJbmZvc1swXS5jb250ZW50RWRpdGFibGU7XHJcbiAgICAgICAgdGhpcy5hZGRSZW1pbmRlciA9IHJlLnVyZ2VVc2Vyc1swXS51cmdlSW5mb3NbMF0uYWRkUmVtaW5kZXI7XHJcbiAgICAgICAgbGV0IHVyZ2VVc2VycyA9IHJlLnVyZ2VVc2VycztcclxuICAgICAgICBsZXQgYXNzaWduSW5mbyA9IG5ldyBBc3NpZ25lZUluZm8oKTtcclxuICAgICAgICB1cmdlVXNlcnMuZm9yRWFjaCh1c2VyID0+IHtcclxuICAgICAgICAgIGlmICh1c2VyLmFub255bW91c1RleHQpIHtcclxuICAgICAgICAgICAgdXNlci5uYW1lID0gdXNlci5hbm9ueW1vdXNUZXh0O1xyXG4gICAgICAgICAgICB1c2VyLmNvZGUgPSAnJztcclxuICAgICAgICAgICAgdXNlci5vcmdOYW1lID0gJyc7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICBhc3NpZ25JbmZvLmFzc2lnbmVlVXNlcnMgPSB1cmdlVXNlcnM7XHJcbiAgICAgICAgYXNzaWduSW5mby5zZWxlY3RBc3NpZ25lZSA9IHVyZ2VVc2Vycy5sZW5ndGggPiAxID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICAgIGFzc2lnbkluZm8ubXVsdGlTZWxlY3QgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuYXNzaWduSW5mb3NbMF0uYXNzaWduZWVJbmZvID0gYXNzaWduSW5mbztcclxuICAgICAgICB0aGlzLmFzc2lnbkluZm9zWzBdLmFzc2lnbmVlcyA9IHVyZ2VVc2Vycy5sZW5ndGggPT0gMSA/IHVyZ2VVc2VycyA6IFtdO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMubm90aWZ5Lndhcm5pbmcodGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgndGFzay5ub1VyZ2VVc2VycycpKTtcclxuICAgICAgfVxyXG4gICAgfSwgZXJyb3IgPT4ge1xyXG4gICAgICBsb2FkLmNsb3NlKCk7XHJcbiAgICAgIHRoaXMudGFza1NlcnZpY2UuZXJyb3IoZXJyb3IpO1xyXG4gICAgfSlcclxuXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDpooTop6PmnpBcclxuICAgKiDpgJrov4fjgIHpqbPlm57jgIHph43mlrDmj5DkuqTjgIHlhbbku5boh6rlrprkuYnliqjkvZxcclxuICAgKi9cclxuICBwcml2YXRlIGNvbXBsZXRlU2ltdWxhdGUoKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgIGNvbnN0IHN1YmplY3QgPSBuZXcgU3ViamVjdCgpO1xyXG4gICAgdGhpcy5pZlNlbGVjdE5vZGUgPSB0cnVlO1xyXG4gICAgdGhpcy5pZkFzc2lnblVzZXIgPSB0cnVlO1xyXG4gICAgdGhpcy5kaWFsb2dIZWlnaHQgKz0gdGhpcy5kaWFsb2dIZWlnaHRCYXNlICogMjtcclxuXHJcbiAgICBpZiAodGhpcy5hY3Rpb25FbnRpdHkucGFyYW1ldGVycyAmJiB0aGlzLmFjdGlvbkVudGl0eS5wYXJhbWV0ZXJzLmxlbmd0aCkgey8vIOaYr+WQpuWFgeiuuOWKoOetvlxyXG4gICAgICB0aGlzLmFjdGlvbkVudGl0eS5wYXJhbWV0ZXJzLmZvckVhY2goKHApID0+IHtcclxuICAgICAgICBpZiAocC5jb2RlID09PSAnQWRkU2lnbkJlaGluZEFibGUnICYmIHAudmFsdWUgPT09ICd0cnVlJykge1xyXG4gICAgICAgICAgdGhpcy5pZlNlbGVjdFVzZXIgPSB0cnVlO1xyXG4gICAgICAgICAgdGhpcy5zZWxlY3RVc2VyVGV4dCA9IHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3Rhc2suYWRkU2lnbicpICsgdGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgndGFzay5wZXJzb24nKTtcclxuICAgICAgICAgIHRoaXMuZGlhbG9nSGVpZ2h0ICs9IHRoaXMuZGlhbG9nSGVpZ2h0QmFzZTtcclxuICAgICAgICAgIGNvbnN0IGxvYWQgPSB0aGlzLmxvYWRpbmdTZXJ2aWNlLnNob3coKTtcclxuICAgICAgICAgIC8v6I635Y+W5Yqg562+6IyD5Zu0XHJcbiAgICAgICAgICB0aGlzLnRhc2tTZXJ2aWNlLmdldE9yZ2FuaXphdGlvblNjb3BlKHRoaXMud29ya0l0ZW1JZCwgJ0FkZFNpZ25CZWhpbmQnKS5zdWJzY3JpYmUoKG9yZ0xpc3Q6IE9yZ2FuaXphdGlvblNjb3BlW10pID0+IHtcclxuICAgICAgICAgICAgbG9hZC5jbG9zZSgpO1xyXG4gICAgICAgICAgICBpZiAob3JnTGlzdC5sZW5ndGgpIHsvLyDlhajlkZjkvJrov5Tlm57nqbrmlbDnu4RcclxuICAgICAgICAgICAgICB0aGlzLmZpbHRlci5vcmdJZCA9IG9yZ0xpc3RbMF0uaWQ7XHJcbiAgICAgICAgICAgICAgdGhpcy5maWx0ZXIud2l0aEFsbE9yZyA9IG9yZ0xpc3RbMF0uaW5jbHVkZUNoaWxkcmVuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9LCBlcnJvciA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudGFza1NlcnZpY2UuZXJyb3IoZXJyb3IpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmFjdGlvbkVudGl0eS5jb2RlID09PSAnQmFjaycpIHtcclxuICAgICAgdGhpcy5zZWxlY3ROb2RlVGV4dCA9IHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3Rhc2suYmFja05vZGVUZXh0Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgY29udGV4dCA9IG5ldyBDb21wbGV0ZUNvbnRleHQoKTtcclxuICAgIGNvbnRleHQud29ya0l0ZW1JZCA9IHRoaXMud29ya0l0ZW1JZDtcclxuICAgIGNvbnRleHQuY29uY2x1c2lvblZhbHVlID0gdGhpcy5hY3Rpb25FbnRpdHkuY29kZTtcclxuXHJcbiAgICBjb25zdCBsb2FkID0gdGhpcy5sb2FkaW5nU2VydmljZS5zaG93KCk7XHJcbiAgICB0aGlzLnRhc2tTZXJ2aWNlLmNvbXBsZXRlU2ltdWxhdGUoY29udGV4dCkuc3Vic2NyaWJlKChyZXNwb25zZTogU2ltdWxhdGVSZXNwb25zZSkgPT4ge1xyXG4gICAgICBsb2FkLmNsb3NlKCk7XHJcbiAgICAgIHRoaXMuY2xlYXJTaW11bGF0ZVJlc3VsdCgpO1xyXG4gICAgICB0aGlzLnJlc3BvbnNlID0gcmVzcG9uc2U7XHJcbiAgICAgIHRoaXMuc2hvd0JhY2tXYXJkQ29uZmlnLmR5bmFtaWNCYWNrV2FyZFJ1bGVBYmxlID0gcmVzcG9uc2UuZHluYW1pY0JhY2tXYXJkUnVsZUFibGU7XHJcbiAgICAgIGlmICghcmVzcG9uc2Uuc2ltdWxhdGlvblBhdGhzLmxlbmd0aCkgey8vIOaooeaLn+i/lOWbnui3r+W+hOS4uuepuuaXtlxyXG4gICAgICAgIHRoaXMuaWZTZWxlY3ROb2RlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5pZkFzc2lnblVzZXIgPSBmYWxzZTtcclxuICAgICAgfSBlbHNlIHsvLyDmqKHmi5/ov5Tlm57kuobot6/lvoRcclxuICAgICAgICB0aGlzLmRlc3ROb2RlcyA9IHJlc3BvbnNlLnNpbXVsYXRpb25QYXRocyAmJiByZXNwb25zZS5zaW11bGF0aW9uUGF0aHMubWFwKHBhdGggPT4gKHtcclxuICAgICAgICAgIGlkOiBwYXRoLm5vZGVJbmZvTGlzdC5tYXAobm9kZSA9PiBub2RlLmFjdGl2aXR5RGVmaW5pdGlvbklkKS5qb2luKCfvvIwnKSxcclxuICAgICAgICAgIG5hbWU6IHBhdGgubm9kZUluZm9MaXN0Lm1hcChub2RlID0+IG5vZGUuYWN0aXZpdHlEZWZpbml0aW9uTmFtZSkuam9pbign77yMJylcclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgLy8g5aSE55CG6buY6K6k5YiG5pSv77yM5peg6buY6K6k5YiG5pSv6L+U5ZueLTFcclxuICAgICAgICBjb25zdCBkZWZhdWx0SW5kZXggPSByZXNwb25zZS5zaW11bGF0aW9uUGF0aHMuZmluZEluZGV4KGEgPT4gYS5kZWZhdWx0KTtcclxuICAgICAgICBpZiAoZGVmYXVsdEluZGV4ID4gLTEpIHtcclxuICAgICAgICAgIHRoaXMuc2VsZWN0ZWROb2RlSWQgPSB0aGlzLmRlc3ROb2Rlc1tkZWZhdWx0SW5kZXhdLmlkO1xyXG4gICAgICAgICAgdGhpcy5ub2RlUGxhY2Vob2xkZXIgPSB0aGlzLmRlc3ROb2Rlc1tkZWZhdWx0SW5kZXhdLm5hbWUuaW5kZXhPZign77yMJykgPiAtMSA/IHJlc3BvbnNlLnNpbXVsYXRpb25QYXRoc1tkZWZhdWx0SW5kZXhdLm5hbWUgOiB0aGlzLmRlc3ROb2Rlc1tkZWZhdWx0SW5kZXhdLm5hbWU7XHJcbiAgICAgICAgICB0aGlzLnNldEFzc2lnbkluZm8ocmVzcG9uc2Uuc2ltdWxhdGlvblBhdGhzW2RlZmF1bHRJbmRleF0ubm9kZUluZm9MaXN0KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5ub2RlUGxhY2Vob2xkZXIgPSB0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCd0YXNrLnNlbGVjdFBsYWNlaG9sZGVyJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHN1YmplY3QubmV4dCh0cnVlKTtcclxuICAgIH0sIGVycm9yID0+IHtcclxuICAgICAgbG9hZC5jbG9zZSgpO1xyXG4gICAgICBzdWJqZWN0Lm5leHQoZmFsc2UpO1xyXG4gICAgICB0aGlzLnRhc2tTZXJ2aWNlLmVycm9yKGVycm9yKTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHN1YmplY3QuYXNPYnNlcnZhYmxlKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmuIXnqbrpooTop6PmnpDnu5PmnpxcclxuICAgKi9cclxuICBwcml2YXRlIGNsZWFyU2ltdWxhdGVSZXN1bHQoKSB7XHJcbiAgICB0aGlzLmFzc2lnbkluZm9zID0gW3svLyDph43mlrDpooTop6PmnpDml7bmuIXnqbpcclxuICAgICAgc2VsZWN0ZWRBc3NpZ25lZXM6IFtdLFxyXG4gICAgICBhc3NpZ25lZUluZm86IG51bGwsXHJcbiAgICAgIGFzc2lnbmVlczogW10sXHJcbiAgICAgIGFjdGl2aXR5TmFtZTogJycsXHJcbiAgICAgIGRlcGVuZGVuY3k6ICcnLFxyXG4gICAgICBhbm9ueW1vdXM6IGZhbHNlLFxyXG4gICAgICBhbm9ueW1vdXNUZXh0OiAnJyxcclxuICAgICAgcmVzb2x2ZWQ6IGZhbHNlLFxyXG4gICAgfV07XHJcbiAgICB0aGlzLmRlc3ROb2RlcyA9IFtdOyAvLyDph43mlrDpooTop6PmnpDml7bmuIXnqbpcclxuICAgIHRoaXMubm9kZVBsYWNlaG9sZGVyID0gJyc7XHJcbiAgICB0aGlzLnNlbGVjdGVkTm9kZUlkID0gJyc7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIOiuvue9ruW9k+WJjeaMh+a0vuS/oeaBr+W4ruWKqeWPguaVsFxyXG4gICAqL1xyXG4gIHByaXZhdGUgc2V0QXNzaWduSW5mbyhub2RlSW5mb0xpc3Q6IEZsb3dOb2RlSW5mb1tdKSB7XHJcbiAgICB0aGlzLmFzc2lnbkluZm9zID0gW107XHJcbiAgICB0aGlzLnNlbGVjdGVkTm9kZUlkLnNwbGl0KCfvvIwnKS5mb3JFYWNoKG5vZGVJZCA9PiB7XHJcbiAgICAgIGNvbnN0IG5vZGUgPSBub2RlSW5mb0xpc3QuZmluZChub2RlID0+IG5vZGUuYWN0aXZpdHlEZWZpbml0aW9uSWQgPT09IG5vZGVJZCk7XHJcbiAgICAgIGlmIChub2RlKSB7XHJcbiAgICAgICAgdGhpcy5hc3NpZ25JbmZvcy5wdXNoKHtcclxuICAgICAgICAgIHNlbGVjdGVkQXNzaWduZWVzOiBub2RlLnNlbGVjdGVkQXNzaWduZWVzLFxyXG4gICAgICAgICAgYXNzaWduZWVJbmZvOiBub2RlLmFzc2lnbmVlSW5mbyxcclxuICAgICAgICAgIGFzc2lnbmVlczogbm9kZS5zZWxlY3RlZEFzc2lnbmVlcy5tYXAodXNlciA9PiB7IHJldHVybiB7IGlkOiB1c2VyLmlkLCBuYW1lOiB1c2VyLm5hbWUgfTsgfSksXHJcbiAgICAgICAgICBhY3Rpdml0eU5hbWU6IG5vZGUuYWN0aXZpdHlEZWZpbml0aW9uTmFtZSxcclxuICAgICAgICAgIGRlcGVuZGVuY3k6IG5vZGUuZGVwZW5kZW5jeSxcclxuICAgICAgICAgIGFub255bW91czogbm9kZS5hbm9ueW1vdXMsXHJcbiAgICAgICAgICBhbm9ueW1vdXNUZXh0OiBub2RlLmFub255bW91c1RleHQsXHJcbiAgICAgICAgICByZXNvbHZlZDogbm9kZS5yZXNvbHZlZCxcclxuICAgICAgICB9KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmFzc2lnbkluZm9zLnB1c2goe1xyXG4gICAgICAgICAgc2VsZWN0ZWRBc3NpZ25lZXM6IFtdLFxyXG4gICAgICAgICAgYXNzaWduZWVJbmZvOiBudWxsLFxyXG4gICAgICAgICAgYXNzaWduZWVzOiBbXSxcclxuICAgICAgICAgIGFjdGl2aXR5TmFtZTogJycsXHJcbiAgICAgICAgICBkZXBlbmRlbmN5OiAnJyxcclxuICAgICAgICAgIGFub255bW91czogZmFsc2UsXHJcbiAgICAgICAgICBhbm9ueW1vdXNUZXh0OiAnJyxcclxuICAgICAgICAgIHJlc29sdmVkOiBmYWxzZSxcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICB0aGlzLmNkLmRldGVjdENoYW5nZXMoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOeCueWHu+ehruWumuWQjuaWueazlVxyXG4gICAqL1xyXG4gIHByaXZhdGUgYXNzaWduU3VibWl0KCkge1xyXG4gICAgaWYgKHRoaXMuY29tbWVudC5sZW5ndGggPiAzMDApIHtcclxuICAgICAgdGhpcy5ub3RpZnkud2FybmluZyh0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCd0YXNrLmNvbW1lbnRUb29Mb25nJykpO1xyXG4gICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgfSBlbHNlIGlmICghdGhpcy5hc3NpZ25JbmZvc1swXS5hc3NpZ25lZXMubGVuZ3RoKSB7XHJcbiAgICAgIHRoaXMubm90aWZ5Lndhcm5pbmcodGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgnc3RhdGljLmFzc2lnbmVlLm5vQXNzaWduZWUnKSk7XHJcbiAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zdCBjb250ZXh0OiBBc3NpZ25QYXJhbWV0ZXIgPSB7XHJcbiAgICAgICAgd29ya0l0ZW1JZDogdGhpcy53b3JrSXRlbUlkLFxyXG4gICAgICAgIGFzc2lnbmVlSWRzOiB0aGlzLmFzc2lnbkluZm9zWzBdLmFzc2lnbmVlcy5tYXAodXNlciA9PiB1c2VyLmlkKSxcclxuICAgICAgICBjb21tZW50OiB0aGlzLmNvbW1lbnQsXHJcbiAgICAgICAgYWRkZW5kdW06IHRoaXMuYWRkZW5kdW1cclxuICAgICAgfTtcclxuICAgICAgdGhpcy50YXNrU2VydmljZS5hc3NpZ25OZXh0VXNlcnNCeVdvcmtJdGVtSWQoY29udGV4dCkuc3Vic2NyaWJlKCgpID0+IHtcclxuICAgICAgICB0aGlzLm5vdGlmeS5zdWNjZXNzKHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3N0YXRpYy5hc3NpZ25lZS5zdWNjZXNzQXNzaWduJykpO1xyXG4gICAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHRoaXMuc3VibWl0UmVzdWx0KTtcclxuICAgICAgfSwgKGVycm9yKSA9PiB7XHJcbiAgICAgICAgdGhpcy5zdWJqZWN0Lm5leHQoeyByZXN1bHQ6IGZhbHNlLCBpc0Nsb3NlOiBmYWxzZSB9KTtcclxuICAgICAgICB0aGlzLnRhc2tTZXJ2aWNlLmVycm9yKGVycm9yKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNsYWltU3VibWl0KCkge1xyXG4gICAgaWYgKHRoaXMuY29tbWVudC5sZW5ndGggPiAzMDApIHtcclxuICAgICAgdGhpcy5ub3RpZnkud2FybmluZyh0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCd0YXNrLmNvbW1lbnRUb29Mb25nJykpO1xyXG4gICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy50YXNrU2VydmljZS5jbGFpbSh0aGlzLndvcmtJdGVtSWQsIHRoaXMuY29tbWVudCkuc3Vic2NyaWJlKCgpID0+IHtcclxuICAgICAgICB0aGlzLm5vdGlmeS5zdWNjZXNzKHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ2N1ZVdvcmRzLnN1Y2Nlc3NDbGFpbScpKSxcclxuICAgICAgICAgIHRoaXMuc3VibWl0UmVzdWx0LmlzQ2xvc2UgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnN1YmplY3QubmV4dCh0aGlzLnN1Ym1pdFJlc3VsdCk7XHJcbiAgICAgIH0sIChlcnJvcikgPT4ge1xyXG4gICAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICAgICAgdGhpcy50YXNrU2VydmljZS5lcnJvcihlcnJvcik7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSB1bkNsYWltU3VibWl0KCkge1xyXG4gICAgaWYgKHRoaXMuY29tbWVudC5sZW5ndGggPiAzMDApIHtcclxuICAgICAgdGhpcy5ub3RpZnkud2FybmluZyh0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCd0YXNrLmNvbW1lbnRUb29Mb25nJykpO1xyXG4gICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy50YXNrU2VydmljZS51bkNsYWltKHRoaXMud29ya0l0ZW1JZCwgdGhpcy5jb21tZW50KS5zdWJzY3JpYmUoKCkgPT4ge1xyXG4gICAgICAgIHRoaXMubm90aWZ5LnN1Y2Nlc3ModGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgnY3VlV29yZHMuc3VjY2Vzc1VuQ2xhaW0nKSksXHJcbiAgICAgICAgICB0aGlzLnN1YmplY3QubmV4dCh0aGlzLnN1Ym1pdFJlc3VsdCk7XHJcbiAgICAgIH0sIChlcnJvcikgPT4ge1xyXG4gICAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICAgICAgdGhpcy50YXNrU2VydmljZS5lcnJvcihlcnJvcik7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSByZXRyaWV2ZVN1Ym1pdCgpIHtcclxuICAgIGlmICh0aGlzLmNvbW1lbnQubGVuZ3RoID4gMzAwKSB7XHJcbiAgICAgIHRoaXMubm90aWZ5Lndhcm5pbmcodGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgndGFzay5jb21tZW50VG9vTG9uZycpKTtcclxuICAgICAgdGhpcy5zdWJqZWN0Lm5leHQoeyByZXN1bHQ6IGZhbHNlLCBpc0Nsb3NlOiBmYWxzZSB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IHJldHJpZXZlQ29udGV4dCA9IHtcclxuICAgICAgICB3b3JrSXRlbUlkOiB0aGlzLndvcmtJdGVtSWQsXHJcbiAgICAgICAgY29tbWVudDogdGhpcy5jb21tZW50XHJcbiAgICAgIH07XHJcbiAgICAgIHRoaXMudGFza1NlcnZpY2UucmV0cmlldmUocmV0cmlldmVDb250ZXh0KS5zdWJzY3JpYmUoKCkgPT4ge1xyXG4gICAgICAgIHRoaXMubm90aWZ5LnN1Y2Nlc3ModGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgnY3VlV29yZHMuc3VjY2Vzc1JldHJpZXZlJykpO1xyXG4gICAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHRoaXMuc3VibWl0UmVzdWx0KTtcclxuICAgICAgfSwgKGVycm9yKSA9PiB7XHJcbiAgICAgICAgdGhpcy5zdWJqZWN0Lm5leHQoeyByZXN1bHQ6IGZhbHNlLCBpc0Nsb3NlOiBmYWxzZSB9KTtcclxuICAgICAgICB0aGlzLnRhc2tTZXJ2aWNlLmVycm9yKGVycm9yKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHRyYW5zZmVyU3VibWl0KCkge1xyXG4gICAgaWYgKHRoaXMuY29tbWVudC5sZW5ndGggPiAzMDApIHtcclxuICAgICAgdGhpcy5ub3RpZnkud2FybmluZyh0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCd0YXNrLmNvbW1lbnRUb29Mb25nJykpO1xyXG4gICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdGVkVXNlcnMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHRoaXMubm90aWZ5Lndhcm5pbmcodGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgndGFzay5zZWxlY3RQbGFjZWhvbGRlcicpICsgdGhpcy5zZWxlY3RVc2VyVGV4dCk7XHJcbiAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zdCBjb250ZXh0ID0ge1xyXG4gICAgICAgIHdvcmtJdGVtSWQ6IHRoaXMud29ya0l0ZW1JZCxcclxuICAgICAgICBhc3NpZ25lZTogdGhpcy5zZWxlY3RlZFVzZXJzWzBdLFxyXG4gICAgICAgIGNvbW1lbnQ6IHRoaXMuY29tbWVudCxcclxuICAgICAgICBhZGRlbmR1bTogdGhpcy5hZGRlbmR1bVxyXG4gICAgICB9O1xyXG4gICAgICB0aGlzLnN1Ym1pdERpc2FibGUgPSB0cnVlOyAvLyDnpoHnlKjmj5DkuqTmjInpkq5cclxuICAgICAgdGhpcy50YXNrU2VydmljZS50cmFuc2Zlcihjb250ZXh0KS5zdWJzY3JpYmUoKCkgPT4ge1xyXG4gICAgICAgIHRoaXMubm90aWZ5LnN1Y2Nlc3ModGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgnc3RhdGljLnRyYW5zZmVyLnN1Y2Nlc3NUcmFuc2ZlcicpKTtcclxuICAgICAgICB0aGlzLnN1YmplY3QubmV4dCh0aGlzLnN1Ym1pdFJlc3VsdCk7XHJcbiAgICAgIH0sIChlcnJvcikgPT4ge1xyXG4gICAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICAgICAgdGhpcy50YXNrU2VydmljZS5lcnJvcihlcnJvcik7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBjb21tZW50U3VibWl0KCkgeyAvLyDor4TorrpcclxuICAgIGlmICghdGhpcy5jb21tZW50IHx8IHRoaXMuY29tbWVudC5sZW5ndGggPT09IDApIHtcclxuICAgICAgdGhpcy5ub3RpZnkud2FybmluZyh0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCdjdWVXb3Jkcy5pbnB1dE9waW5pb24nKSk7XHJcbiAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuY29tbWVudC5sZW5ndGggPiAzMDApIHtcclxuICAgICAgdGhpcy5ub3RpZnkud2FybmluZyh0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCd0YXNrLmNvbW1lbnRUb29Mb25nJykpO1xyXG4gICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3QgY29udGV4dCA9IHtcclxuICAgICAgICB3b3JrSXRlbUlkOiB0aGlzLndvcmtJdGVtSWQsXHJcbiAgICAgICAgY29tbWVudDogdGhpcy5jb21tZW50LFxyXG4gICAgICAgIGFkZGVuZHVtOiB0aGlzLmFkZGVuZHVtXHJcbiAgICAgIH07XHJcbiAgICAgIHRoaXMudGFza1NlcnZpY2UuY29tbWVudChjb250ZXh0KS5zdWJzY3JpYmUoKCkgPT4ge1xyXG4gICAgICAgIHRoaXMubm90aWZ5LnN1Y2Nlc3ModGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgnc3RhdGljLmNvbW1lbnQuc3VjY2Vzc0NvbW1lbnQnKSk7XHJcbiAgICAgICAgdGhpcy5zdWJtaXRSZXN1bHQuaXNDbG9zZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHRoaXMuc3VibWl0UmVzdWx0KTtcclxuICAgICAgfSwgKGVycm9yKSA9PiB7XHJcbiAgICAgICAgdGhpcy5zdWJqZWN0Lm5leHQoeyByZXN1bHQ6IGZhbHNlLCBpc0Nsb3NlOiBmYWxzZSB9KTtcclxuICAgICAgICB0aGlzLnRhc2tTZXJ2aWNlLmVycm9yKGVycm9yKTtcclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMuY29tbWVudCA9ICcnO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhZGRTaWduRnJvbnRTdWJtaXQoKSB7XHJcbiAgICBpZiAodGhpcy5jb21tZW50Lmxlbmd0aCA+IDMwMCkge1xyXG4gICAgICB0aGlzLm5vdGlmeS53YXJuaW5nKHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3Rhc2suY29tbWVudFRvb0xvbmcnKSk7XHJcbiAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0ZWRVc2Vycy5sZW5ndGggPT09IDApIHtcclxuICAgICAgdGhpcy5ub3RpZnkud2FybmluZyh0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCd0YXNrLnNlbGVjdFBsYWNlaG9sZGVyJykgKyB0aGlzLnNlbGVjdFVzZXJUZXh0KTtcclxuICAgICAgdGhpcy5zdWJqZWN0Lm5leHQoeyByZXN1bHQ6IGZhbHNlLCBpc0Nsb3NlOiBmYWxzZSB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IGNvbnRleHQgPSB7XHJcbiAgICAgICAgd29ya0l0ZW1JZDogdGhpcy53b3JrSXRlbUlkLFxyXG4gICAgICAgIGFjdGlvbjogdGhpcy5hY3Rpb25FbnRpdHkuY29kZSxcclxuICAgICAgICBhc3NpZ25lZXM6IHRoaXMuc2VsZWN0ZWRVc2VycyxcclxuICAgICAgICBjb21tZW50OiB0aGlzLmNvbW1lbnQsXHJcbiAgICAgICAgYWRkZW5kdW06IHRoaXMuYWRkZW5kdW1cclxuICAgICAgfTtcclxuICAgICAgdGhpcy5zdWJtaXREaXNhYmxlID0gdHJ1ZTsgLy8g56aB55So5o+Q5Lqk5oyJ6ZKuXHJcbiAgICAgIHRoaXMudGFza1NlcnZpY2UuYWRkU2lnbihjb250ZXh0KS5zdWJzY3JpYmUoKCkgPT4ge1xyXG4gICAgICAgIHRoaXMubm90aWZ5LnN1Y2Nlc3ModGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgnY3VlV29yZHMuc3VjY2VzcycpKTtcclxuICAgICAgICB0aGlzLnN1YmplY3QubmV4dCh0aGlzLnN1Ym1pdFJlc3VsdCk7XHJcbiAgICAgIH0sIChlcnJvcikgPT4ge1xyXG4gICAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICAgICAgdGhpcy50YXNrU2VydmljZS5lcnJvcihlcnJvcik7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhZGRTaWduU3VibWl0KCkgey8vIOWKoOetvuaPkOS6pFxyXG4gICAgaWYgKHRoaXMuY29tbWVudC5sZW5ndGggPiAzMDApIHtcclxuICAgICAgdGhpcy5ub3RpZnkud2FybmluZyh0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCd0YXNrLmNvbW1lbnRUb29Mb25nJykpO1xyXG4gICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdGVkVXNlcnMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHRoaXMubm90aWZ5Lndhcm5pbmcodGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgndGFzay5zZWxlY3RQbGFjZWhvbGRlcicpICsgdGhpcy5zZWxlY3RVc2VyVGV4dCk7XHJcbiAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBsZXQgcGF5bG9hZDogQWRkU2lnblBheWxvYWQgPSB7XHJcbiAgICAgICAgd29ya0l0ZW1JZDogdGhpcy53b3JrSXRlbUlkLFxyXG4gICAgICAgIGNvbW1lbnQ6IHRoaXMuY29tbWVudCxcclxuICAgICAgICBjb25jbHVzaW9uVmFsdWU6IFwiUGFzc1wiLFxyXG4gICAgICAgIHNpZ25Bc3NpZ25lZXM6IHRoaXMuc2VsZWN0ZWRVc2VycyxcclxuICAgICAgICBhY3Rpb25Db2RlOiBcIkFkZFNpZ25CZWhpbmRcIixcclxuICAgICAgICBtdWx0aUluc3RhbmNlVHlwZTogdGhpcy5hZGRTaWduLnNob3dNdWx0aUluc3RhbmNlVHlwZSA/IHRoaXMuYWRkU2lnbi5jdXJNdWx0aUluc3RUeXBlIDogdGhpcy5hZGRTaWduLm9yaWdpbk11bHRpSW5zdFR5cGUsXHJcbiAgICAgICAgY291bnRlclNpZ25SdWxlOiAnYWxsUGFzcycsXHJcbiAgICAgICAgY29tcGxldGVkUnVsZTogJ2FsbCcsXHJcbiAgICAgICAgYWxsb3dTaWduVG9TaWduOiB0aGlzLmFkZFNpZ24uYWxsb3dTaWduVG9TSWduLFxyXG4gICAgICAgIGFjdGl2aXR5TmFtZTogJycsXHJcbiAgICAgICAgYWRkZW5kdW06IHRoaXMuYWRkZW5kdW1cclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IGxvYWQgPSB0aGlzLmxvYWRpbmdTZXJ2aWNlLnNob3coKTtcclxuICAgICAgdGhpcy50YXNrU2VydmljZS5hZGhvY0Fzc2lnbmVlKHBheWxvYWQpLnN1YnNjcmliZShyZSA9PiB7XHJcbiAgICAgICAgdGhpcy5ub3RpZnkuc3VjY2Vzcyh0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCdjdWVXb3Jkcy5zdWNjZXNzJykpO1xyXG4gICAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHsgcmVzdWx0OiB0cnVlLCBpc0Nsb3NlOiB0cnVlIH0pO1xyXG4gICAgICAgIGxvYWQuY2xvc2UoKTtcclxuICAgICAgfSwgZXJyb3IgPT4ge1xyXG4gICAgICAgIGxvYWQuY2xvc2UoKTtcclxuICAgICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgICAgIHRoaXMudGFza1NlcnZpY2UuZXJyb3IoZXJyb3IpO1xyXG4gICAgICB9KVxyXG5cclxuICAgIH1cclxuXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHJlYWRTdWJtaXQoKSB7Ly/lt7LpmIXmj5DkuqRcclxuICAgIGlmICh0aGlzLmNvbW1lbnQubGVuZ3RoID4gMzAwKSB7XHJcbiAgICAgIHRoaXMubm90aWZ5Lndhcm5pbmcodGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgndGFzay5jb21tZW50VG9vTG9uZycpKTtcclxuICAgICAgdGhpcy5zdWJqZWN0Lm5leHQoeyByZXN1bHQ6IGZhbHNlLCBpc0Nsb3NlOiBmYWxzZSB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IGNvbnRleHQ6IFdvcmtJdGVtRXhlY3V0ZVBhcmFtID0ge1xyXG4gICAgICAgIHdvcmtJdGVtSWQ6IHRoaXMud29ya0l0ZW1JZCxcclxuICAgICAgICBjb21tZW50OiB0aGlzLmNvbW1lbnQsXHJcbiAgICAgICAgYWRkZW5kdW06IHRoaXMuYWRkZW5kdW0sXHJcbiAgICAgICAgaGlkZUNvbW1lbnQ6IHRoaXMuaGlkZUNvbW1lbnRcclxuICAgICAgfVxyXG4gICAgICB0aGlzLnRhc2tTZXJ2aWNlLnJlYWRUYXNrKGNvbnRleHQpLnN1YnNjcmliZSgoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5ub3RpZnkuc3VjY2Vzcyh0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCdjdWVXb3Jkcy5zdWNjZXNzJykpO1xyXG4gICAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHsgcmVzdWx0OiB0cnVlLCBpc0Nsb3NlOiB0cnVlIH0pO1xyXG4gICAgICB9LCBlcnJvciA9PiB7XHJcbiAgICAgICAgdGhpcy50YXNrU2VydmljZS5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgdGhpcy5zdWJqZWN0Lm5leHQoeyByZXN1bHQ6IGZhbHNlLCBpc0Nsb3NlOiBmYWxzZSB9KTtcclxuICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIG5vdGlmeVN1Ym1pdCgpIHsvL+efpeS8muaPkOS6pFxyXG4gICAgaWYgKHRoaXMuY29tbWVudC5sZW5ndGggPiAzMDApIHtcclxuICAgICAgdGhpcy5ub3RpZnkud2FybmluZyh0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCd0YXNrLmNvbW1lbnRUb29Mb25nJykpO1xyXG4gICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdGVkVXNlcnMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHRoaXMubm90aWZ5Lndhcm5pbmcodGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgndGFzay5zZWxlY3RQbGFjZWhvbGRlcicpICsgdGhpcy5zZWxlY3RVc2VyVGV4dCk7XHJcbiAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zdCBjb250ZXh0OiBDb3VudGVyU2lnblBhcmFtID0ge1xyXG4gICAgICAgIHdvcmtJdGVtSWQ6IHRoaXMud29ya0l0ZW1JZCxcclxuICAgICAgICBjb21tZW50OiB0aGlzLmNvbW1lbnQsXHJcbiAgICAgICAgYWRkZW5kdW06IHRoaXMuYWRkZW5kdW0sXHJcbiAgICAgICAgYWN0aW9uOiB0aGlzLmFjdGlvbkVudGl0eS5jb2RlLFxyXG4gICAgICAgIGFzc2lnbmVlczogdGhpcy5zZWxlY3RlZFVzZXJzLFxyXG4gICAgICB9O1xyXG4gICAgICB0aGlzLnRhc2tTZXJ2aWNlLmFkZFNpZ24oY29udGV4dCkuc3Vic2NyaWJlKCgpID0+IHtcclxuICAgICAgICB0aGlzLm5vdGlmeS5zdWNjZXNzKHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ2N1ZVdvcmRzLnN1Y2Nlc3MnKSk7XHJcbiAgICAgICAgdGhpcy5zdWJqZWN0Lm5leHQoeyByZXN1bHQ6IHRydWUsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgICB9LCAoZXJyb3IpID0+IHtcclxuICAgICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgICAgIHRoaXMudGFza1NlcnZpY2UuZXJyb3IoZXJyb3IpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDlgqzlip7mj5DkuqRcclxuICAgKi9cclxuICBwcml2YXRlIHVyZ2VIYW5kbGVTdWJtaXQoKSB7XHJcbiAgICBpZiAodGhpcy5jb21tZW50Lmxlbmd0aCA+IDMwMCkge1xyXG4gICAgICB0aGlzLm5vdGlmeS53YXJuaW5nKHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3Rhc2suY29tbWVudFRvb0xvbmcnKSk7XHJcbiAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICB9IGVsc2UgaWYgKCF0aGlzLnVyZ2VIYW5kbGVSZXNwb25zZS51cmdlVXNlcnMgfHwgIXRoaXMudXJnZUhhbmRsZVJlc3BvbnNlLnVyZ2VVc2Vycy5sZW5ndGgpIHsvL+ayoeacieespuWQiOadoeS7tueahOWCrOWKnueUqOaIt1xyXG4gICAgICB0aGlzLm5vdGlmeS53YXJuaW5nKHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3Rhc2subm9VcmdlVXNlcnMnKSk7XHJcbiAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICB9IGVsc2UgaWYgKCF0aGlzLmFzc2lnbkluZm9zWzBdLmFzc2lnbmVlcy5sZW5ndGgpIHsvL+ayoeaciemAieS6ulxyXG4gICAgICB0aGlzLm5vdGlmeS53YXJuaW5nKHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3Rhc2suc2VsZWN0UGxhY2Vob2xkZXInKSArIHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3Rhc2sucmVjZWl2ZXInKSk7XHJcbiAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICB9IGVsc2UgaWYgKCF0aGlzLnVyZ2VIYW5kbGVDb21wb25lbnQudXJnZU1lc3NhZ2VTdWJqZWN0KSB7XHJcbiAgICAgIHRoaXMubm90aWZ5Lndhcm5pbmcodGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgndGFzay5ub1VyZ2VTdWJqZWN0JykpO1xyXG4gICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgfSBlbHNlIGlmICghdGhpcy51cmdlSGFuZGxlQ29tcG9uZW50LnVyZ2VNZXNzYWdlQ29udGVudCkge1xyXG4gICAgICB0aGlzLm5vdGlmeS53YXJuaW5nKHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3Rhc2subm9VcmdlQ29udGVudCcpKTtcclxuICAgICAgdGhpcy5zdWJqZWN0Lm5leHQoeyByZXN1bHQ6IGZhbHNlLCBpc0Nsb3NlOiBmYWxzZSB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGxldCBjb250ZXh0ID0gbmV3IFVyZ2VIYW5kbGVDb250ZXh0KCk7XHJcbiAgICAgIGNvbnRleHQucHJvY0luc3RJZCA9IHRoaXMucHJvY2Vzc0luc3RhbmNlSWQ7XHJcbiAgICAgIGNvbnRleHQudXJnZVVzZXJzID0gdGhpcy51cmdlSGFuZGxlUmVzcG9uc2UudXJnZVVzZXJzLmZpbHRlcihhID0+IHRoaXMuYXNzaWduSW5mb3NbMF0uYXNzaWduZWVzLnNvbWUoYiA9PiBiLmlkID09IGEuaWQpKTtcclxuICAgICAgY29udGV4dC51cmdlTWVzc2FnZVN1YmplY3QgPSB0aGlzLnVyZ2VIYW5kbGVDb21wb25lbnQudXJnZU1lc3NhZ2VTdWJqZWN0O1xyXG4gICAgICBjb250ZXh0LnVyZ2VNZXNzYWdlQ29udGVudCA9IHRoaXMudXJnZUhhbmRsZUNvbXBvbmVudC51cmdlTWVzc2FnZUNvbnRlbnQ7XHJcbiAgICAgIGNvbnRleHQuYWRkUmVtaW5kZXIgPSB0aGlzLmFkZFJlbWluZGVyO1xyXG4gICAgICBjb25zdCBsb2FkID0gdGhpcy5sb2FkaW5nU2VydmljZS5zaG93KCk7XHJcbiAgICAgIHRoaXMudGFza1NlcnZpY2UudXJnZUhhbmRsZShjb250ZXh0KS5zdWJzY3JpYmUocmUgPT4ge1xyXG4gICAgICAgIHRoaXMubm90aWZ5LnN1Y2Nlc3ModGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgnY3VlV29yZHMuc3VjY2VzcycpKTtcclxuICAgICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogdHJ1ZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICAgICAgbG9hZC5jbG9zZSgpO1xyXG4gICAgICB9LCBlcnJvciA9PiB7XHJcbiAgICAgICAgbG9hZC5jbG9zZSgpO1xyXG4gICAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICAgICAgdGhpcy50YXNrU2VydmljZS5lcnJvcihlcnJvcik7XHJcbiAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5Y+W5raI5b6B6K+i5o+Q5LqkXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBjYW5jZWxDb25zdWx0U3VibWl0KCkge1xyXG4gICAgbGV0IGNvbnRleHQgPSBuZXcgV29ya0l0ZW1FeGVjdXRlUGFyYW0oKTtcclxuICAgIGNvbnRleHQud29ya0l0ZW1JZCA9IHRoaXMud29ya0l0ZW1JZDtcclxuICAgIGNvbnRleHQuY29tbWVudCA9IHRoaXMuY29tbWVudDtcclxuICAgIGNvbnRleHQuYWRkZW5kdW0gPSB0aGlzLmFkZGVuZHVtO1xyXG4gICAgY29uc3QgbG9hZCA9IHRoaXMubG9hZGluZ1NlcnZpY2Uuc2hvdygpO1xyXG4gICAgdGhpcy50YXNrU2VydmljZS5jYW5jZWxDb25zdWx0KGNvbnRleHQpLnN1YnNjcmliZSgoKSA9PiB7XHJcbiAgICAgIGxvYWQuY2xvc2UoKTtcclxuICAgICAgdGhpcy5ub3RpZnkuc3VjY2Vzcyh0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCdjdWVXb3Jkcy5zdWNjZXNzJykpO1xyXG4gICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogdHJ1ZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICB9LCBlcnJvciA9PiB7XHJcbiAgICAgIGxvYWQuY2xvc2UoKTtcclxuICAgICAgdGhpcy5zdWJqZWN0Lm5leHQoeyByZXN1bHQ6IGZhbHNlLCBpc0Nsb3NlOiBmYWxzZSB9KTtcclxuICAgICAgdGhpcy50YXNrU2VydmljZS5lcnJvcihlcnJvcik7XHJcbiAgICB9KVxyXG5cclxuICB9XHJcblxyXG4gIHByaXZhdGUgY29tcGxldGVTdWJtaXQoKSB7Ly8g6YCa6L+H44CB6amz5Zue44CB5YW25LuW56ys5LiJ5pa55Yqo5L2cXHJcbiAgICBjb25zdCBjb250ZXh0OiBDb21wbGV0ZUNvbnRleHQgPSB7XHJcbiAgICAgIHdvcmtJdGVtSWQ6IHRoaXMud29ya0l0ZW1JZCxcclxuICAgICAgY29uY2x1c2lvblZhbHVlOiB0aGlzLmFjdGlvbkVudGl0eS5jb2RlLFxyXG4gICAgICBjb21tZW50OiB0aGlzLmNvbW1lbnQsXHJcbiAgICAgIHNpZ25Bc3NpZ25lZXM6IHRoaXMuc2VsZWN0ZWRVc2VycyxcclxuICAgICAgbmV4dEZsb3dOb2RlczogW10sXHJcbiAgICAgIGFkZGVuZHVtOiB0aGlzLmFkZGVuZHVtLFxyXG4gICAgICAvL+WKqOaAgemps+WbnuinhOWImVxyXG4gICAgICBkeW5hbWljQmFja1dhcmRSdWxlOiB0aGlzLnNob3dCYWNrV2FyZENvbmZpZy5keW5hbWljQmFja1dhcmRSdWxlQWJsZSA/ICh0aGlzLnNob3dCYWNrV2FyZENvbmZpZy5lbmFibGUgPyAnYmFja1RvVGhpc05vZGUnIDogJ3NlcXVlbmNlJykgOiAnJ1xyXG4gICAgfTtcclxuXHJcbiAgICBpZiAoY29udGV4dC5zaWduQXNzaWduZWVzLmxlbmd0aCB8fCAhdGhpcy5yZXNwb25zZSB8fCAhdGhpcy5yZXNwb25zZS5zaW11bGF0aW9uUGF0aHMubGVuZ3RoKSB7Ly8g5Yqg562+IG9yIOS7v+ecn+i/lOWbnuS4uuepuu+8jOebtOaOpeW+gOS4i+i1sFxyXG4gICAgICB0aGlzLmNvbXBsZXRlVGFzayhjb250ZXh0KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmICh0aGlzLnNlbGVjdGVkTm9kZUlkKSB7Ly8g5Yqg562+5pe277yM6YCJ5oup5LiL5LiA546v6IqC6KKr56aB55So77yMZGVzdE5vZGVJZOS4unVuZGVmaW5lZFxyXG4gICAgICAgIGNvbnN0IG5leHRGbG93Tm9kZXM6IEZsb3dOb2RlSW5mb1tdID0gW107XHJcbiAgICAgICAgY29uc3Qgbm9kZXM6IHN0cmluZ1tdID0gdGhpcy5zZWxlY3RlZE5vZGVJZC5zcGxpdCgn77yMJyk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBub2Rlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgY29uc3QgbmV4dEZsb3dOb2RlOiBGbG93Tm9kZUluZm8gPSB7XHJcbiAgICAgICAgICAgIGFjdGl2aXR5RGVmaW5pdGlvbklkOiBub2Rlc1tpXSxcclxuICAgICAgICAgICAgYWN0aXZpdHlEZWZpbml0aW9uTmFtZTogdGhpcy5hc3NpZ25JbmZvc1tpXS5hY3Rpdml0eU5hbWUsXHJcbiAgICAgICAgICAgIGRlcGVuZGVuY3k6IHRoaXMuYXNzaWduSW5mb3NbaV0uZGVwZW5kZW5jeSxcclxuICAgICAgICAgICAgc2VsZWN0ZWRBc3NpZ25lZXM6IHRoaXMuYXNzaWduSW5mb3NbaV0uYXNzaWduZWVJbmZvID8gdGhpcy5hc3NpZ25JbmZvc1tpXS5hc3NpZ25lZXMgOiBbXSxcclxuICAgICAgICAgICAgYXNzaWduZWVJbmZvOiBudWxsLFxyXG4gICAgICAgICAgICByZXNvbHZlZDogZmFsc2UsXHJcbiAgICAgICAgICAgIGFub255bW91czogdGhpcy5hc3NpZ25JbmZvc1tpXS5hbm9ueW1vdXMsXHJcbiAgICAgICAgICAgIGFub255bW91c1RleHQ6IHRoaXMuYXNzaWduSW5mb3NbaV0uYW5vbnltb3VzVGV4dFxyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgIC8v6IqC54K55om+5LiN5Yiw5Lq677yM5LiU5byC5bi45o+Q56S65pe277yM5bm26KGM572R5YWz5pqC5LiN5aSE55CGXHJcbiAgICAgICAgICBpZiAodGhpcy5yZXNwb25zZSAmJiB0aGlzLnJlc3BvbnNlLnNpbXVsYXRpb25QYXRocy5sZW5ndGggJiYgIXRoaXMucmVzcG9uc2Uuc2ltdWxhdGlvblBhdGhzWzBdLmlkLnN0YXJ0c1dpdGgoJ1BhcmFsbGVsR2F0ZXdheScpKSB7XHJcbiAgICAgICAgICAgIGlmIChub2Rlcy5sZW5ndGggPT0gMSAmJiBub2Rlc1tpXS5zdGFydHNXaXRoKCdVc2VyQWN0aXZpdHknKSAmJiB0aGlzLmFzc2lnbkluZm9zW2ldLnJlc29sdmVkICYmICF0aGlzLmFzc2lnbkluZm9zW2ldLmFzc2lnbmVlSW5mbyAmJiAhdGhpcy5hc3NpZ25JbmZvc1tpXS5zZWxlY3RlZEFzc2lnbmVlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICBjb25zdCBzdHIgPSB0aGlzLmFzc2lnbkluZm9zW2ldLmFjdGl2aXR5TmFtZSArIHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3N0YXJ0UHJvY2Vzcy5ub2RlJykgKyB0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCdzdGFydFByb2Nlc3Mubm9Vc2VyJyk7XHJcbiAgICAgICAgICAgICAgdGhpcy5ub3RpZnkud2FybmluZyhzdHIpO1xyXG4gICAgICAgICAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBuZXh0Rmxvd05vZGVzLnB1c2gobmV4dEZsb3dOb2RlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29udGV4dC5uZXh0Rmxvd05vZGVzID0gbmV4dEZsb3dOb2RlcztcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHRoaXMuZGVzdE5vZGVzLmxlbmd0aCA+IDEgJiYgY29udGV4dC5uZXh0Rmxvd05vZGVzLmxlbmd0aCA8PSAwKSB7Ly8g55So5oi35rKh6YCJ5oup6Lez6L2s6IqC54K577yM5LiN5YWB6K645o+Q5LqkXHJcbiAgICAgICAgdGhpcy5ub3RpZnkud2FybmluZyh0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCdjdWVXb3Jkcy5zZWxlY3ROb2RlJykpO1xyXG4gICAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5hc3NpZ25JbmZvcy5maWx0ZXIoaW5mbyA9PiBpbmZvLmFzc2lnbmVlSW5mbyAmJiBpbmZvLmFzc2lnbmVlSW5mby5zZWxlY3RBc3NpZ25lZSAmJiAhaW5mby5hc3NpZ25lZXMubGVuZ3RoKS5sZW5ndGgpIHtcclxuICAgICAgICB0aGlzLm5vdGlmeS53YXJuaW5nKHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3Rhc2suc2VsZWN0UHJvY2Vzc29yJykpO1xyXG4gICAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5jb21wbGV0ZVRhc2soY29udGV4dCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgY29tcGxldGVUYXNrKGNvbXBsZXRlQ29udGV4dDogQ29tcGxldGVDb250ZXh0KSB7XHJcbiAgICBjb25zdCBhdHRhY2htZW50TmVjZXNzYXJ5ID0gdGhpcy5hY3Rpb25FbnRpdHkucGFyYW1ldGVycy5maW5kKGVudGl0eSA9PiBlbnRpdHkuY29kZSA9PT0gJ0F0dGFjaG1lbnROZWNlc3NhcnknKTtcclxuICAgIGNvbnN0IGNlcnRpZmljYXRpb25OZWNlc3NhcnkgPSB0aGlzLmFjdGlvbkVudGl0eS5wYXJhbWV0ZXJzLmZpbmQoZW50aXR5ID0+IGVudGl0eS5jb2RlID09PSAnQ2VydGlmaWNhdGlvbk5lY2Vzc2FyeScpO1xyXG4gICAgY29uc3QgY29tbWVudE5lY2Vzc2FyeSA9IHRoaXMuYWN0aW9uRW50aXR5LnBhcmFtZXRlcnMuZmluZChlbnRpdHkgPT4gZW50aXR5LmNvZGUgPT09ICdDb21tZW50TmVjZXNzYXJ5Jyk7XHJcbiAgICBpZiAoYXR0YWNobWVudE5lY2Vzc2FyeSAmJiBhdHRhY2htZW50TmVjZXNzYXJ5LnZhbHVlID09PSAndHJ1ZScgJiYgKCFjb21wbGV0ZUNvbnRleHQuYWRkZW5kdW0uYXR0YWNobWVudCB8fCBjb21wbGV0ZUNvbnRleHQuYWRkZW5kdW0uYXR0YWNobWVudCA9PT0gJ1tdJykpIHtcclxuICAgICAgdGhpcy5ub3RpZnkud2FybmluZyh0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCdjdWVXb3Jkcy5hdHRhY2htZW50c1JlcXVpcmVkJykpO1xyXG4gICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgfSBlbHNlIGlmIChjb21tZW50TmVjZXNzYXJ5ICYmIGNvbW1lbnROZWNlc3NhcnkudmFsdWUgPT09ICd0cnVlJyAmJiAhY29tcGxldGVDb250ZXh0LmNvbW1lbnQpIHtcclxuICAgICAgdGhpcy5ub3RpZnkud2FybmluZyh0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCdjdWVXb3Jkcy5pbnB1dE9waW5pb24nKSk7XHJcbiAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuY29tbWVudC5sZW5ndGggPiAzMDApIHtcclxuICAgICAgdGhpcy5ub3RpZnkud2FybmluZyh0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCd0YXNrLmNvbW1lbnRUb29Mb25nJykpO1xyXG4gICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKGNlcnRpZmljYXRpb25OZWNlc3NhcnkgJiYgY2VydGlmaWNhdGlvbk5lY2Vzc2FyeS52YWx1ZSA9PT0gJ3RydWUnKSB7XHJcbiAgICAgICAgdGhpcy52ZXJpZnlTaWduYXR1cmUoKCkgPT4ge1xyXG4gICAgICAgICAgY29tcGxldGVDb250ZXh0LnZlcmlmeVNpZ25lZCA9IHRoaXMudmVyaWZ5U2lnbmVkO1xyXG4gICAgICAgICAgdGhpcy50YXNrQ29tcGxldGUoY29tcGxldGVDb250ZXh0KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCBtc2cgPSBbdGhpcy53b3JrSXRlbUlkXTtcclxuICAgICAgICBnc3BDQS5nZXRTaWduZWRNc2cobXNnKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnRhc2tDb21wbGV0ZShjb21wbGV0ZUNvbnRleHQpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGV4ZWN1dGVGb3JtQWN0aW9uc0FmdGVyQ29tcGxldGVUYXNrKGhhbmRlcjogYW55KSB7XHJcbiAgICBjb25zdCBwb3N0QWN0aW9ucyA9IHRoaXMuYmlsbE1ldGhvZENvbmZpZ3MuZmlsdGVyKGFjdGlvbiA9PiBhY3Rpb24uYWN0aW9uID09PSB0aGlzLmFjdGlvbkVudGl0eS5jb2RlICYmIGFjdGlvbi5leGVjdXRpb25UaW1lID09PSAnUG9zdCcpLnNvcnQoKHgsIHkpID0+IHguc29ydE9yZGVyIC0geS5zb3J0T3JkZXIpO1xyXG4gICAgLy8g5aaC5p6c6KGo5Y2V5rOo5YaM5LqG5LqL5Lu2XHJcbiAgICBpZiAodGhpcy5pZlJlZ2lzdGVyZWQgJiYgdGhpcy5mb3JtT2JqZWN0ICYmIHBvc3RBY3Rpb25zLmxlbmd0aCkge1xyXG4gICAgICB0aGlzLmV4ZWN1dGVQb3N0Rm9ybUFjdGlvbnMocG9zdEFjdGlvbnMsIGhhbmRlcik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBoYW5kZXIoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgZXhlY3V0ZVBvc3RGb3JtQWN0aW9ucyhmb3JtQWN0aW9uczogQmlsbE1ldGhvZENvbmZpZ1tdLCBoYW5kZXI6IGFueSkge1xyXG4gICAgaWYgKGZvcm1BY3Rpb25zLmxlbmd0aCA+IDApIHtcclxuICAgICAgdGhpcy5tZXNzYWdlU3ViamVjdCA9IG5ldyBTdWJqZWN0PGFueT4oKTtcclxuICAgICAgdGhpcy5tZXNzYWdlU3ViamVjdC5zdWJzY3JpYmUoKHJlOiBhbnkpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhyZS5kYXRhKTtcclxuICAgICAgICBjb25zdCBkYXRhID0gcmUuZGF0YS5kYXRhO1xyXG4gICAgICAgIGlmIChkYXRhLnJlc3VsdCA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgdGhpcy5leGVjdXRlUG9zdEZvcm1BY3Rpb25zKGZvcm1BY3Rpb25zLCBoYW5kZXIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pOyAvLyDku7vliqHlip7nkIbnlYzpnaLkuI3lhbPpl61cclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcign5a6h5om55ZCO6KGo5Y2V5pON5L2c5omn6KGM5aSx6LSl77yBJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgICAgLy8g5omn6KGM6KGo5Y2V5Yqo5L2cXHJcbiAgICAgIGNvbnN0IGZvcm1BY3Rpb24gPSBmb3JtQWN0aW9ucy5zaGlmdCgpO1xyXG4gICAgICB0aGlzLnNlbmRNZXNzYWdlKHRoaXMud29ya0l0ZW1JZCwgZm9ybUFjdGlvbik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBoYW5kZXIoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8v5biu5Yqp6YCJ5Lq65ZCOXHJcbiAgYWZ0ZXJDb25maXJtRm9yVHJhbnNmZXIoZGF0YTogQXNzaWduZWVbXSkge1xyXG4gICAgaWYgKGRhdGEgJiYgZGF0YS5sZW5ndGgpIHtcclxuICAgICAgdGhpcy5zZWxlY3RlZFVzZXJzID0gZGF0YS5tYXAodXNlciA9PiB1c2VyLmlkKTtcclxuICAgICAgdGhpcy5zZWxlY3RlZFVzZXJOZ01vZHVsZSA9IGRhdGEubWFwKHVzZXIgPT4gdXNlci5uYW1lKS5qb2luKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnNlbGVjdGVkVXNlcnMgPSBbXTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmFjdGlvbkVudGl0eS5jb2RlID09ICdBZGRTaWduJyAmJiB0aGlzLmFkZFNpZ24ub3JpZ2luTXVsdGlJbnN0VHlwZSA9PSBNdWx0aUluc3RhbmNlVHlwZS5QcmVlbXB0LnRvU3RyaW5nKCkgJiYgdGhpcy5zZWxlY3RlZFVzZXJzLmxlbmd0aCA+IDEpIHtcclxuICAgICAgdGhpcy5hZGRTaWduLnNob3dNdWx0aUluc3RhbmNlVHlwZSA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmFkZFNpZ24uc2hvd011bHRpSW5zdGFuY2VUeXBlID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjYW5jZWwoKTogT2JzZXJ2YWJsZTxTdWJtaXRSZXN1bHQ+IHtcclxuICAgIHRoaXMuc3VibWl0UmVzdWx0LmlzQ2xvc2UgPSBmYWxzZTtcclxuICAgIHRoaXMuc3ViamVjdC5uZXh0KHRoaXMuc3VibWl0UmVzdWx0KTtcclxuICAgIHJldHVybiB0aGlzLnN1YmplY3QuYXNPYnNlcnZhYmxlKCk7XHJcbiAgfVxyXG5cclxuICBnZXRTdWJqZWN0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuc3ViamVjdC5hc09ic2VydmFibGUoKTtcclxuICB9XHJcblxyXG4gIC8vIOS4i+S4gOeOr+iKgumAieaLqeWQjuS6i+S7tlxyXG4gIHNlbGVjdE5vZGVDaGFuZ2UoZGF0YTogYW55KSB7XHJcbiAgICB0aGlzLnNlbGVjdGVkTm9kZUlkID0gZGF0YSAmJiBkYXRhLmRhdGEgJiYgZGF0YS5kYXRhLmlkO1xyXG4gICAgaWYgKHRoaXMucmVzcG9uc2Uuc2ltdWxhdGlvblBhdGhzW2RhdGEuaW5kZXhdLm5vZGVJbmZvTGlzdC5ldmVyeShub2RlID0+IG5vZGUucmVzb2x2ZWQgPT09IHRydWUpKSB7Ly8g5bey6aKE6Kej5p6Q5Y+C5LiO6ICFXHJcbiAgICAgIHRoaXMuc2V0QXNzaWduSW5mbyh0aGlzLnJlc3BvbnNlLnNpbXVsYXRpb25QYXRoc1tkYXRhLmluZGV4XS5ub2RlSW5mb0xpc3QpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3Qgbm9kZUlkcyA9IHRoaXMuc2VsZWN0ZWROb2RlSWQuc3BsaXQoJ++8jCcpLm1hcChub2RlID0+IGBcIiR7bm9kZX1cImApLmpvaW4oKTsgLy8g5rOo5oSP5LiA5Liq5Lit5paH6YCX5Y+35LiA5Liq6Iux5paH6YCX5Y+3XHJcbiAgICAgIGNvbnN0IGxvYWQgPSB0aGlzLmxvYWRpbmdTZXJ2aWNlLnNob3coKTtcclxuICAgICAgdGhpcy50YXNrU2VydmljZS5nZXRTaW11bGF0aW9uQXNzaWduZWVJbmZvKHRoaXMud29ya0l0ZW1JZCwgbm9kZUlkcykuc3Vic2NyaWJlKChub2RlSW5mb0xpc3Q6IEZsb3dOb2RlSW5mb1tdKSA9PiB7XHJcbiAgICAgICAgbG9hZC5jbG9zZSgpO1xyXG4gICAgICAgIHRoaXMuc2V0QXNzaWduSW5mbyhub2RlSW5mb0xpc3QpO1xyXG4gICAgICB9LCBlcnJvciA9PiB7XHJcbiAgICAgICAgbG9hZC5jbG9zZSgpO1xyXG4gICAgICAgIHRoaXMudGFza1NlcnZpY2UuZXJyb3IoZXJyb3IpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIOS4i+S4gOeOr+iKgua4heepuuWQjuS6i+S7tlxyXG4gIHNlbGVjdE5vZGVDbGVhcigpIHtcclxuICAgIHRoaXMuc2VsZWN0ZWROb2RlSWQgPSBudWxsO1xyXG4gICAgdGhpcy5hc3NpZ25JbmZvcyA9IFt7XHJcbiAgICAgIHNlbGVjdGVkQXNzaWduZWVzOiBbXSxcclxuICAgICAgYXNzaWduZWVJbmZvOiBudWxsLFxyXG4gICAgICBhc3NpZ25lZXM6IFtdLFxyXG4gICAgICBhY3Rpdml0eU5hbWU6ICcnLFxyXG4gICAgICBkZXBlbmRlbmN5OiAnJyxcclxuICAgICAgYW5vbnltb3VzOiBmYWxzZSxcclxuICAgICAgYW5vbnltb3VzVGV4dDogJycsXHJcbiAgICAgIHJlc29sdmVkOiBmYWxzZSxcclxuICAgIH1dO1xyXG4gIH1cclxuXHJcbiAgYWZ0ZXJDb25maXJtRm9yQXNzaWduKGRhdGE6IEFzc2lnbmVlW10sIGluZGV4OiBudW1iZXIpIHtcclxuICAgIHRoaXMuYXNzaWduSW5mb3NbaW5kZXhdLmFzc2lnbmVlcyA9IGRhdGE7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDkuIrkvKDpmYTku7blkI7kuovku7ZcclxuICAgKi9cclxuICBhZGRBdHRhY2htZW50KGRhdGE6IGFueSkge1xyXG4gICAgdGhpcy5hZGRlbmR1bS5hdHRhY2htZW50ID0gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmiYvlhpnnrb7lkI3lkI7kuovku7ZcclxuICAgKi9cclxuICBhZGRTaWduYXR1cmUoZGF0YTogYW55KSB7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICBjb25zdCBzaWduSW5mbyA9IHtcclxuICAgICAgICBpZDogZGF0YSxcclxuICAgICAgICB3YXRlck1hcmtpbmc6IG51bGxcclxuICAgICAgfTtcclxuICAgICAgdGhpcy5hZGRlbmR1bS5zaWduYXR1cmUgPSBKU09OLnN0cmluZ2lmeShzaWduSW5mbyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmFkZGVuZHVtLnNpZ25hdHVyZSA9ICcnO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8g5Lul5pyN5Yqh5pa55byP5omT5byA57uE5Lu25pe277yM5bem5Y+z5Yqg5LiKcGFkZGluZ1xyXG4gIGFkZFBhZGRpbmcoKSB7XHJcbiAgICB0aGlzLmNscyA9ICdmLXV0aWxzLWZpbGwtZmxleC1jb2x1bW4gaC0xMDAgcHgtNCBweS0yJztcclxuICB9XHJcblxyXG5cclxuICBwcml2YXRlIHNlbmRNZXNzYWdlKHdvcmtJdGVtSWQ6IHN0cmluZywgYWN0aW9uOiBCaWxsTWV0aG9kQ29uZmlnKSB7XHJcbiAgICBpZiAodGhpcy5pZnJhbWUpIHtcclxuICAgICAgY29uc3QgaWZyYW1lV2luZG93ID0gdGhpcy5pZnJhbWUubmF0aXZlRWxlbWVudC5jb250ZW50V2luZG93O1xyXG4gICAgICBjb25zdCBtZXNzYWdlID0ge1xyXG4gICAgICAgIHRhcmdldDogd29ya0l0ZW1JZCxcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICBjb21tYW5kOiBhY3Rpb24ubWV0aG9kLFxyXG4gICAgICAgICAgYXJndW1lbnRzOiBhY3Rpb24ubWV0aG9kUGFyYW1ldGVyc1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgICAgaWZyYW1lV2luZG93LnBvc3RNZXNzYWdlKG1lc3NhZ2UsIHRoaXMuUE9TVF9NRVNTQUdFX1RBUkdFVCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ+ihqOWNleWwmuacquWKoOi9vSEnKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIOaPkOS6pOWuoeaJueWJjeeahOaVsOWtl+etvuWQjeWPiumqjOetvlxyXG4gIHZlcmlmeVNpZ25hdHVyZShoYW5kbGVyOiBhbnkpIHtcclxuICAgIGNvbnN0IHRoYXQgPSB0aGlzO1xyXG4gICAgaWYgKFxyXG4gICAgICAod2luZG93IGFzIGFueSkuZ3NwZnJhbWV3b3JrU2VydmljZSAmJlxyXG4gICAgICAod2luZG93IGFzIGFueSkuZ3NwZnJhbWV3b3JrU2VydmljZS5ydGZcclxuICAgICkge1xyXG4gICAgICAod2luZG93IGFzIGFueSkuZ3NwZnJhbWV3b3JrU2VydmljZS5ydGYuY2FFdmVudC5vbihcclxuICAgICAgICAod2luZG93IGFzIGFueSkuZ3NwZnJhbWV3b3JrU2VydmljZS5ydGYuY2FFdmVudC5zaWduZWRNc2dPdmVyVG9rZW4oKSxcclxuICAgICAgICAnc2lnbmVkTXNnT3ZlcicsXHJcbiAgICAgICAgZnVuY3Rpb24gc2lnbk1zZ092ZXIoc2lnbmVkRGF0YSkge1xyXG4gICAgICAgICAgaWYgKHNpZ25lZERhdGEgJiYgc2lnbmVkRGF0YVswXSA9PT0gJ3RydWUnICYmIHNpZ25lZERhdGEubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAvLyDor4Hkuablr7nosaFcclxuICAgICAgICAgICAgY29uc3QgY2VydCA9IGdzcENBLmdldEN1ckNlcnQoKTtcclxuICAgICAgICAgICAgLy8g6aqM562+5Y+C5pWwXHJcbiAgICAgICAgICAgIHRoYXQudmVyaWZ5U2lnbmVkID0ge1xyXG4gICAgICAgICAgICAgIC8vIOimgemqjOivgeeahOivgeS5pmJhc2U2NOe8lueggeeahOWtl+espua1gShjZXJ0a2V5KVxyXG4gICAgICAgICAgICAgIGNlcnRCYXNlNjRJbmZvOiBnc3BDQS5nZXRDZXJ0QmFzZTY0KGNlcnQpLFxyXG4gICAgICAgICAgICAgIC8vIOetvuWQjeWOn+S/oeaBr1xyXG4gICAgICAgICAgICAgIG1zZzogW3RoYXQud29ya0l0ZW1JZF0sXHJcbiAgICAgICAgICAgICAgLy8g6KaB562+5ZCN5ZCO5L+h5oGvXHJcbiAgICAgICAgICAgICAgc2lnbmVkbXNnOiBzaWduZWREYXRhWzFdWzBdLFxyXG4gICAgICAgICAgICAgIC8vIOeUqOaIt+S9v+eUqOWcuuaZr++8jOebruWJjeacquS9v+eUqO+8jOWPr+S7peS4uuepulxyXG4gICAgICAgICAgICAgIHVzZUNhc2U6IG51bGwsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGhhbmRsZXIoKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoYXQubG9hZGluZ1NlcnZpY2UuY2xvc2UoKTtcclxuICAgICAgICAgICAgdGhhdC5zdWJqZWN0Lm5leHQoeyByZXN1bHQ6IGZhbHNlLCBpc0Nsb3NlOiBmYWxzZSB9KTtcclxuICAgICAgICAgICAgdGhhdC5ub3RpZnkuZXJyb3Ioc2lnbmVkRGF0YVsxXSk7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihzaWduZWREYXRhWzFdKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyDpgJrov4fjgIHpqbPlm57jgIHlhbbku5bnrKzkuInmlrnliqjkvZxcclxuICB0YXNrQ29tcGxldGUoY29tcGxldGVDb250ZXh0OiBDb21wbGV0ZUNvbnRleHQpIHtcclxuICAgIHRoaXMudGFza1NlcnZpY2UuY29tcGxldGUoY29tcGxldGVDb250ZXh0KS5zdWJzY3JpYmUoKGNyOiBDb21wbGV0ZVJlc3BvbnNlKSA9PiB7XHJcbiAgICAgIHRoaXMuZXhlY3V0ZUZvcm1BY3Rpb25zQWZ0ZXJDb21wbGV0ZVRhc2soKCkgPT4ge1xyXG4gICAgICAgIGlmIChjci5uZWVkSW50ZXJhY3Rpb24pIHsvLyDpgJrov4flkI7mjIfmtL7lnLrmma9cclxuICAgICAgICAgIGlmICh0aGlzLm9yaWdpbiA9PSBBY3Rpb25PcmlnaW4uVGFza0NlbnRlcikge1xyXG4gICAgICAgICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogdHJ1ZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pOy8v5YWz5o6JbG9hZGluZ1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdGhpcy5ub3RpZnkuaW5mbyh0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCdjdWVXb3Jkcy5zZWxlY3QnKVxyXG4gICAgICAgICAgICArICfjgJAnICsgY3IubmV4dEZsb3dOb2Rlc1swXS5hY3Rpdml0eURlZmluaXRpb25OYW1lICsgJ+OAkSdcclxuICAgICAgICAgICAgKyB0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCdjdWVXb3Jkcy5wcm9jZXNzb3InKSk7XHJcbiAgICAgICAgICBsZXQgdGFzayA9IG5ldyBUYXNrRW50aXR5KCk7XHJcbiAgICAgICAgICBsZXQgYWN0aW9uID0gbmV3IFRhc2tBY3Rpb24oKTtcclxuICAgICAgICAgIHRhc2suc291cmNlSWQgPSBjci5uZXh0Rmxvd05vZGVzWzBdLmFzc2lnbmVlSW5mby53b3JrSXRlbUlkO1xyXG4gICAgICAgICAgYWN0aW9uLmNvZGUgPSAnQXNzaWduVXNlcic7XHJcbiAgICAgICAgICBhY3Rpb24ubmFtZSA9IHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ2N1ZVdvcmRzLmFzc2lnblVzZXInKTtcclxuICAgICAgICAgIHRoaXMuaGFuZGxlclNlcnZpY2UuZXhlY3V0ZSh0YXNrLCBhY3Rpb24pLnN1YnNjcmliZShyZSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChyZSkge1xyXG4gICAgICAgICAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHsgcmVzdWx0OiB0cnVlLCBpc0Nsb3NlOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaWYgKGNvbXBsZXRlQ29udGV4dC5jb25jbHVzaW9uVmFsdWUgPT09ICdQYXNzJykge1xyXG4gICAgICAgICAgICB0aGlzLm5vdGlmeS5zdWNjZXNzKHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ2N1ZVdvcmRzLnN1Y2Nlc3NQYXNzJykpO1xyXG4gICAgICAgICAgfSBlbHNlIGlmIChjb21wbGV0ZUNvbnRleHQuY29uY2x1c2lvblZhbHVlID09PSAnQmFjaycpIHtcclxuICAgICAgICAgICAgdGhpcy5ub3RpZnkuc3VjY2Vzcyh0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCdjdWVXb3Jkcy5zdWNjZXNzQmFjaycpKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMubm90aWZ5LnN1Y2Nlc3ModGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgnY3VlV29yZHMuc3VjY2VzcycpKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHsgcmVzdWx0OiB0cnVlLCBpc0Nsb3NlOiB0cnVlIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9LCAoZXJyb3IpID0+IHtcclxuICAgICAgdGhpcy5zdWJqZWN0Lm5leHQoeyByZXN1bHQ6IGZhbHNlLCBpc0Nsb3NlOiBmYWxzZSB9KTtcclxuICAgICAgdGhpcy50YXNrU2VydmljZS5lcnJvcihlcnJvcik7XHJcbiAgICB9XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbn1cclxuIl19