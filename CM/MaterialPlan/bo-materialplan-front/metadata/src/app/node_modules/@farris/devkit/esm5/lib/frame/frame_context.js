import * as tslib_1 from "tslib";
import { Injector, Injectable, Optional, SkipSelf, InjectFlags } from '@angular/core';
import { Repository } from '../repository/index';
import { BindingData } from '../binding-data/index';
import { UIState, PARAM_TYPE_TRANSFORM_TOKEN } from '../ui-state/index';
import { Form } from '../form/index';
import { StateMachine } from '../state-machine/index';
import { ViewModel } from '../view-model/index';
import { CommandBus, CommandHandlerExtenderRegistry, CommandHandlerFactory, CommandHandlerRegistry } from '../command/index';
import { Context } from '../context/index';
import { AppContext } from '../app/index';
import { RouterParamService } from '../misc/index';
import { FRAME_ID, NAMESPACE } from './tokens';
import { ChangeType } from '../binding-data/index';
import { EventBus } from '../event-bus-new/index';
import { EXCEPTION_HANDLER } from '../exception/tokens';
import { EntityUtil } from '../binding-data/entity_util';
import { TranslateToken } from '../i18n/translate_token';
import { VariableParseService } from '../variable/variable_parse_service';
import { TranslateService } from '../i18n/translate_service';
import { UserSettingsToken } from '../i18n/tokens';
import { UserSettingsService } from '../i18n/user_settings_service';
import { ExpressionEngineImpl } from '../expression/expression_engine_impl';
import { ExpressionManager } from '../expression/expression_manager';
import { ExpressionResult } from '../expression/expression_result';
import { ExpressionResultFactory } from '../expression/expression_result_factory';
import { CommandVariableParser, DataVariableParser, FrameIdVariableParser, StateMachineVariableParser, UIStateVariableParser } from '../variable';
import { CHANGE_SET_POLICY_TOKEN, RunMode } from '../core';
import { Subject } from 'rxjs';
import { ComponentRefManager } from './component_ref_manager';
/**
 * 组件上下文
 * @description
 * # 上下文
 * ## Overview
 *
 * 每个组件（FrameComponent）都有自己的上下文（FrameContext）,通过上下文可以获取控制器的所有属性，如常用的`frameId`、`BindingData`、`Repository`、`ViewModel`、`StateMachine`、 * `UIState`等。上下文在内存中呈树形结构，依附于FrameComponent。结构如下：
 *
 * ![image-20210806204755378](https://open.inspuronline.com/iGIX/assets/cloudplus/igix_2110/farris/devkit/guide/images/image-20210806204755378.png)
 *
 * 从上图我们可以看出每个上下文都有自己的`ViewModel`、`UIState`，那么如何确定一个命令在执行时用的是哪个上下文呢？其实无论命令在哪个地方被调用，上下文都是命令所在的组件的上下文。即，如果 * 命令挂载到了`detail-form-component`的视图模型，但命令最终被`root-component`上的按钮调用了，其上下文仍然是`detail-from-component`组件的上下文。之所以出现这种现象和Angular的依赖注 * 入密不可分，由于Angular在查找`provider`的时候总是从自己的组件开始向上找，如果在组件内部找到了则不再继续查找，如果找不到则会继续向上，如果查找到最上级依然找不到就会报`No provider  * for xx`错误。
 *
 * 既然如此，如果我们在`detail-form-component`中想要获取`root-component`中定义的变量（UIState）该如何做呢？答案是切换上下文，可以通过以下方式实现：
 *
 * ```typescript
 * // 方法1
 * const rootFrameContext = this.frameContext.root;
 * // 方法2
 * const rootFrameContext = this.frameContext.appContext.frameContextManager.getFrameContextById('root-component');
 * ```
 *
 * 通常在编写`Web构件`时先引入FrameContext，如：
 *
 * ```javascript
 * import {FrameContext,BindingData,Repository} from '@farris/devkit';
 *
 * constructor(private frameContext:FrameContext){}
 *
 * public method(){
 *     const bindingData: BindingData = this.frameContext.bindingData;
 *     const repository: Repository = this.frameContext.repository;
 * }
 * ```
 *
 * > `FrameContext`称为`ViewModelContext`更合适，可以理解为`MVVM`架构中`VM`的上下文。
 *
 * 控制器中亦存在`ViewModel`的概念。和`MVVM`架构中的的VM一致，所以也可以从`VM`访问常用的属性。如：
 *
 * ```typescript
 * import {BindingData,Repository,ViewModel} from '@farris/devkit';
 *
 * constructor(private viewModel:ViewModel){}
 *
 * public method(){
 *     const bindingData: BindingData = this.viewModel.bindingData;
 *     const repository: Repository = this.viewModel.repository;
 * }
 * ```
 *
 *
 *
 * ## 常用操作
 *
 * ### 获取当前上下文所属的组件
 *
 * ```typescript
 * this.frameContext.frameComponent;
 * ```
 *
 * ### 获取当前上下文的根上下文
 *
 * ```typescript
 * this.frameContext.root;
 * ```
 *
 * ### 获取当前上下文的appContext
 *
 * ```typescript
 * this.frameContext.appContext;
 * ```
 *
 * ### 获取指定frameId的上下文
 *
 * ```typescript
 * this.frameContext.appContext.frameContextManager.getFrameContextById('data-grid-component');
 * ```
 *
 * ### 获取表单所有上下文
 *
 * ```typescript
 * this.frameContext.appContext.frameContextManager.getFrameContexts();
 * ```
 *
 *
 *
 * ## 常用属性
 *
 * ### BindingData
 *
 * [参考]([浪潮企业云开放平台 (inspuronline.com)](https://open.inspuronline.com/iGIX/#/document/mddoc/igix-2103%2Ffarris%2Fdevkit%2Fguide%2F绑定数据.md))
 *
 * ### Repository
 *
 * [参考]([浪潮企业云开放平台 (inspuronline.com)](https://open.inspuronline.com/iGIX/#/document/mddoc/igix-2103%2Ffarris%2Fdevkit%2Fguide%2F仓库.md))
 *
 * ### ViewModel
 *
 * 控制器中ViewMode同MVVM架构中的VM，和FrameContext类似，可以通过ViewModel拿到FrameContext，同样的也可以通过FrameContext拿到ViewModel。
 *
 * ### namespace
 *
 * 命名空间，主要在组合表单场景用到，每一个表单都有自己的命名空间，被组合进来的表单其命名空间是相同的，如A表单组合了B表单，则B表单具有相同的命名空间，命名空间主要用于表单隔离。
 *
 * ### root
 *
 * 获取整个表单的根上下文
 *
 * ### uiState
 *
 * 获取当前组件的变量
 *
 * ### frameId
 *
 * 上下文标识。
 */
var FrameContext = /** @class */ (function (_super) {
    tslib_1.__extends(FrameContext, _super);
    /**
     * 构造函数
     * @param injector 注入器
     */
    function FrameContext(injector, parent) {
        var _this = _super.call(this) || this;
        _this.injector = injector;
        _this.typeName = 'FrameContext';
        _this.isDestoried = false;
        _this.isDisposed = false;
        _this.metadata = {
            identify: '',
            namespace: '',
            commands: null,
            form: null,
            formControls: null,
            subForms: null,
            stateMachine: null,
            uiStates: null,
            bindingTo: ''
        };
        /**
         * 组件引用管理
         */
        _this.componentRefManager = new ComponentRefManager();
        // 在解析模式下，通过依赖注入获取不到AppContext时，返回null，在子类中进行赋值。
        _this.appContext = injector.get(AppContext);
        _this.destorySignal = new Subject();
        // 确定父子关系
        // 必须对appContext进行判断，原因如下：
        // 1、否则会导致动态路由表单中，被路由的表单的RootFrameContext变成主表单的RootFrameContext；
        // 2、进而导致从RootFrameContext上拿VO变量拿不到。
        if (!parent || parent.appContext !== _this.appContext) { // 取消 appContext 的判断
            _this.parent = null;
            _this.root = _this;
        }
        else {
            _this.parent = parent;
            _this.root = parent.root;
        }
        _this.frameId = injector.get(FRAME_ID);
        if (_this.appContext.contextMetadataManager.exsit(_this.frameId)) {
            _this.metadata = _this.appContext.contextMetadataManager.getContextMetadataByName(_this.frameId);
        }
        _this.namespace = injector.get(NAMESPACE, null);
        _this.bindingData = _this.injector.get(BindingData, new BindingData());
        if (!_this.appContext.useIsoluteEventBus || (_this.appContext.useIsoluteEventBus && !_this.appContext.isoluteEventBus)) {
            _this.eventBus = _this.injector.get(EventBus, null, InjectFlags.Optional);
        }
        else {
            _this.eventBus = _this.appContext.isoluteEventBus;
        }
        _this.form = _this.injector.get(Form, new Form());
        _this.repository = _this.injector.get(Repository, _this.appContext.repository);
        // 获取变更集策略，默认只提交合法的变更
        var changeSetPolicy = _this.injector.get(CHANGE_SET_POLICY_TOKEN, 'valid');
        if (_this.repository) {
            _this.repository.entityCollection.changeSetPolicy = changeSetPolicy;
        }
        _this.uiState = _this.injector.get(UIState, new UIState());
        var defaultViewModel = new ViewModel();
        defaultViewModel.setMetadata(_this.metadata);
        _this.viewModel = _this.injector.get(ViewModel, defaultViewModel);
        _this.variableParseService = injector.get(VariableParseService, new VariableParseService([
            new FrameIdVariableParser(),
            new DataVariableParser(),
            new UIStateVariableParser(),
            new StateMachineVariableParser(),
            new CommandVariableParser()
        ]));
        // 注入exceptionHandler
        _this.exceptionHandler = injector.get(EXCEPTION_HANDLER, null, InjectFlags.Optional);
        // 初始化多语服务
        var translate = injector.get(TranslateToken, null);
        _this.translate = translate;
        TranslateService.setTranslate(translate);
        // 初始化用户配置
        var userSettings = injector.get(UserSettingsToken, null);
        UserSettingsService.setUserSettings(userSettings);
        _this.initializeRepository();
        _this.appContext.regFrameContext(_this);
        _this.registerAppContextDestroyEvent();
        return _this;
    }
    FrameContext.prototype.dispose = function (options) {
        var _this = this;
        if (this.isDisposed) {
            return;
        }
        this.isDestoried = true;
        this.isDisposed = true;
        if (this.destorySignal) {
            this.destorySignal.next();
            this.destorySignal.complete();
        }
        if (this.appContext) {
            this.appContext.frameContextManager.unregFrameContext(this);
            this.appContext.frameComponentRefresher.unregFrameContext(this);
        }
        if (this.appContext && this.isRootFrameContext() === true) {
            var viewModelNames = this['viewModelNames'];
            if (viewModelNames && Array.isArray(viewModelNames)) {
                viewModelNames.forEach(function (name) {
                    _this[name] = null;
                });
            }
            this.appContext.unregisterFromManager();
        }
        if (this.bindingData) {
            this.bindingData.dispose();
            // this.bindingData = null;
        }
        if (this.viewModel) {
            this.viewModel.dispose();
        }
        if (this.form) {
            this.form.dispose();
            this.form = null;
        }
        if (this.commandBus) {
            this.commandBus.dispose();
            this.commandBus = null;
        }
        TranslateService.dispose();
        // this.root = null;
        // this.parent = null;
        // this.uiState = null;
        this.frameComponent = null;
        this.repository = null;
        // this.stateMachine = null;
        // this.appContext = null;
        this.exceptionHandler = null;
        this.expressionManager = null;
        this.expressionEngineImpl = null;
        this.variableParseService = null;
        this.eventBus = null;
        this.translate = null;
        this.injector = null;
        this.expressionResult = null;
        UserSettingsService.setUserSettings(null);
    };
    FrameContext.prototype.ngOnDestroy = function () {
        this.dispose();
    };
    /**
     * 通过组件标识获取对应的组件实例
     * @param id 组件标识
     * @returns
     */
    FrameContext.prototype.getComponentById = function (id) {
        var components = this.componentRefManager.get(id);
        if (components && components.length > 0) {
            var component = components[0];
            return component;
        }
        return null;
    };
    /**
     * 获取指定标识的所有组件
     * @param id 组件标识
     */
    FrameContext.prototype.getComponentsById = function (id) {
        return this.componentRefManager.get(id);
    };
    FrameContext.prototype.bindInjector = function (componentInjector) {
        this.injector = componentInjector;
    };
    // #region 初始化
    /**
     * 初始化
     * @todo:
     * 1、CommandHandler中的服务可能会注入Context，所以CommandHandler创建时必须已经存在ComponentContext
     * 2、ViewModel的buildCommands中会使用CommandBus，为了保证顺序，将ViewModel的创建也放在init中。
     */
    FrameContext.prototype.init = function (frameComponent) {
        this.frameComponent = frameComponent;
        this.initializeBindingData();
        this.initializeStateMachine();
        this.initializeUiState();
        this.initializeForm();
        this.initializeCommandBus();
        this.initializeViewModel();
        this.registerExceptionHandler();
        this.initExpression();
        this.appContext.frameComponentRefresher.regFrameComponent(this.frameId, this.frameComponent);
    };
    FrameContext.prototype.initExpression = function () {
        this.expressionEngineImpl = this.injector.get(ExpressionEngineImpl, null);
        this.expressionManager = this.injector.get(ExpressionManager, null);
        var expressionResultFactory = this.injector.get(ExpressionResultFactory, null);
        this.expressionResult = this.injector.get(ExpressionResult, null);
    };
    /**
     * 订阅异常消息
     */
    FrameContext.prototype.registerExceptionHandler = function () {
        var _this = this;
        // tslint:disable: no-string-literal
        var formAppContext = this.getFormAppContext();
        var applicationId = formAppContext.ApplicationId;
        window[window.location.href] = applicationId;
        if (this.exceptionHandler !== null) {
            var applicationContext = window[applicationId] = window[applicationId] || {};
            if (this.eventBus !== null && this.isRootFrameContext()) {
                applicationContext.isExceptionHandlerExist = true;
                this.exceptionHandler.setContext(this.appContext);
                this.eventBus.on('Exception', '', 'onException', formAppContext, function (error) {
                    if (_this.isDestoried === true) {
                        return;
                    }
                    if (error && error.error) {
                        try {
                            error.error.__frame_context__ = _this;
                        }
                        catch (_a) { }
                    }
                    _this.exceptionHandler.handle(error);
                });
            }
            this.destorySignal.subscribe(function () {
                _this.eventBus.off('Exception', '', 'onException', formAppContext);
            });
        }
    };
    FrameContext.prototype.registerAppContextDestroyEvent = function () {
        var _this = this;
        if (this.appContext && this.appContext.destorySignal) {
            this.appContext.destorySignal.subscribe(function () {
                if (_this.stateMachine) {
                    _this.stateMachine.dispose();
                    _this.stateMachine = null;
                }
                if (_this.repository) {
                    _this.repository.dispose();
                }
            });
        }
    };
    /**
     * 获取表单appcontext，即最上层appcontext
     */
    FrameContext.prototype.getFormAppContext = function () {
        return this.appContext;
    };
    /**
     * 获取frameId
     * @description 获取完整的FrameId，在非普通表单中该值等于frameId，在组合表单中该值为namespace_frameId
     */
    FrameContext.prototype.getFrameId = function (relativeFrameId) {
        if (!relativeFrameId) {
            return this.frameId;
        }
        if (this.namespace && this.namespace.length > 0) {
            return this.namespace + "_" + relativeFrameId;
        }
        else {
            return relativeFrameId;
        }
    };
    /**
     * 初始化Repository
     */
    FrameContext.prototype.initializeRepository = function () {
        this.repository.setPaginationConfig(this.repository.paginationInfo);
    };
    FrameContext.prototype.initializeForm = function () {
        // 设置Form语言服务
        // this.form.setTranslateService(translateService);
        // 初始化Form，提取FormControl定义，添加FormControl
        // this.form.init(this.bindingData, this.metadata.bindingTo, this);
        // Form
        this.form = this.injector.get(Form, null);
        if (this.form) {
            // 设置Form语言服务
            this.form.setTranslateService(this.injector.get(TranslateToken, null));
            // 初始化Form，提取FormControl定义，添加FormControl
            var bindingPath = this.viewModel.bindingPath || this.metadata.bindingTo;
            this.form.init(this.bindingData, bindingPath, this);
        }
    };
    FrameContext.prototype.initializeStateMachine = function () {
        // StateMachine 状态机需要在绑定数据之后加载
        this.stateMachine = this.injector.get(StateMachine, null);
        if (this.stateMachine) {
            this.stateMachine.initialize(this, this.variableParseService);
        }
    };
    FrameContext.prototype.initializeCommandBus = function () {
        var handlerRegistry = this.injector.get(CommandHandlerRegistry, new CommandHandlerRegistry(this.metadata.commandHandlers));
        var extendsRegistry = this.injector.get(CommandHandlerExtenderRegistry, new CommandHandlerExtenderRegistry(this.metadata.commandHandlerExtends));
        var commandHandlerFactory = new CommandHandlerFactory(handlerRegistry, extendsRegistry, this, this.variableParseService);
        this.commandBus = new CommandBus(commandHandlerFactory);
    };
    /**
     * 初始化ViewModel
     * @todo
     * 1、需要按照一定的顺序进行初始化，否则依赖无法正确处理；
     * 2、暂时使用init解决Context和其他部分的循环依赖问题，待优化；
     */
    FrameContext.prototype.initializeViewModel = function () {
        if (!this.metadata.bindingTo) {
            this.metadata.bindingTo = this.viewModel.bindingPath;
        }
        this.viewModel.init(this);
        this.regViewModel(this.viewModel);
    };
    /**
     * 初始化BindingData
     * @summary
     * 老表单：repositoryName为空，复制当前Repository里的数据；
     * 新表单：repositoryName有值，引用全局BindingData里的数据；
     */
    FrameContext.prototype.initializeBindingData = function () {
        var _this = this;
        var repositoryName = this.repository.name;
        var isRunAtHighSpeedMode = this.appContext.runMode === RunMode.highSpeed;
        if (repositoryName && isRunAtHighSpeedMode) {
            var repositoryBindingData = this.appContext.bindingDataManager.getBindingDataByName(repositoryName);
            this.bindingData.initByBindingList(repositoryBindingData.list, this.viewModel.bindingPath);
            this.bindingData.pagingInfo = repositoryBindingData.pagingInfo;
            this.bindingData.setDataTypeInfo(this.repository.entityTypeInfo);
            EntityUtil.watchReposiroty(this.repository, this.bindingData);
        }
        else {
            this.bindingData.initByRepository(this.repository, this.viewModel.bindingPath);
            EntityUtil.watchReposiroty(this.repository, this.bindingData);
            this.bindingData.changes.subscribe(function (change) {
                if (change.type === ChangeType.GlobalSelectionChanged) {
                    _this.appContext.handleSelectChange(change, _this);
                }
            });
        }
    };
    /**
     * 初始化UIState
     * 合并路由参数到UIState中
     */
    FrameContext.prototype.initializeUiState = function () {
        var _this = this;
        var isInFramework = window.location.href.indexOf('platform') > -1;
        var paramTypeTransform = this.injector.get(PARAM_TYPE_TRANSFORM_TOKEN, false);
        // 获取UIState
        this.uiState = this.injector.get(UIState, null);
        if (!this.uiState) {
            return;
        }
        this.uiState.paramTypeTransform = paramTypeTransform;
        this.uiState.initialize(this);
        // 获取路由参数
        var url = (this.appContext && this.appContext.router && this.appContext.router.url) || '';
        var routerParamService = new RouterParamService();
        var routerParams = routerParamService.getParams(url);
        // 在UIState为路由参数创建属性
        Object.keys(routerParams).forEach(function (propName) {
            Object.defineProperty(_this.uiState, propName, {
                get: function () {
                    return routerParams[propName];
                }
            });
        });
    };
    /**
     * 注册子ViewModel
     * @todo
     * 1、propName写死了
     */
    FrameContext.prototype.regViewModel = function (viewModel) {
        if (this.appContext && this.appContext.viewModelManager.exsit(viewModel.name) === false) {
            this.appContext.viewModelManager.register(viewModel.name, viewModel);
        }
        var className = viewModel.constructor.name;
        var parentContext = this.parent;
        var parentViewModel = null;
        if (parentContext && parentContext.viewModel) {
            parentViewModel = parentContext.viewModel;
        }
        if (!parentViewModel) {
            return;
        }
        // 优先使用生成器生成的name
        var childViewModels = parentViewModel['childViewModels'];
        var viewModelName = null;
        if (childViewModels) {
            var name_1 = viewModel.constructor.name;
            viewModelName = childViewModels[viewModel.name] || childViewModels[name_1];
        }
        else if (className.length === 1) {
            var classNameTokens = viewModel.name.split('-').map(function (nameToken, index) {
                if (index > 0 && nameToken.length) {
                    var pasicalName = nameToken.charAt(0).toLocaleUpperCase() + nameToken.substr(1, nameToken.length - 1);
                    return pasicalName;
                }
                else if (index === 0 && nameToken.length) {
                    var camelName = nameToken.charAt(0).toLocaleLowerCase() + nameToken.substr(1, nameToken.length - 1);
                    return camelName;
                }
                return nameToken;
            });
            viewModelName = classNameTokens.join('');
        }
        else if (viewModel["relateChildName"]) {
            // 增加该参数的目的  是为了解析表单可以进行和生成型相同的层级结构
            viewModelName = viewModel["relateChildName"];
        }
        // 兼容产品部老表单的写法，如果需要vm name统一，应按照此规则
        if (!viewModelName) {
            viewModelName = className[0].toLowerCase() + className.substring(1, className.length);
        }
        parentViewModel['viewModelNames'] = parentViewModel['viewModelNames'] || [];
        parentViewModel[viewModelName] = viewModel;
        parentViewModel['viewModelNames'].push(viewModelName);
        viewModel.bindToParent(parentViewModel);
    };
    // #endregion
    /**
     * 检查是否为根FrameContext
     * @summary
     * 检查该FrameContext是不是所在AppContext中的根FrameContext
     */
    FrameContext.prototype.isRootFrameContext = function () {
        return this.parent === null || (this.appContext.runMode === RunMode.highSpeed && this.getVirtualRootFrameContext().frameComponent['isDialogRootComponent'] === true);
    };
    /**
     * 通过namespace获取当前表单的root-framecontext(非整个表单)
     * @description
     * 如果为组合表单，其当前表单的root-framecontext为单个表单的framecontext，而非整个表单的framecontext
     */
    FrameContext.prototype.getVirtualRootFrameContext = function () {
        var formFrameContext = this;
        var parent = this.parent;
        while (parent) {
            // 兼容没有重新编译的表单，如果判断parent.namespace存在会导致获取不到root-framecontext
            if (parent.namespace === this.namespace) {
                formFrameContext = parent;
                parent = parent.parent;
            }
            else {
                break;
            }
        }
        return formFrameContext;
    };
    FrameContext.prototype.getContextById = function (identify) {
        return this.appContext.getContextById(identify);
    };
    FrameContext.prototype.getViewModel = function (viewModelName) {
        var renderAppContext = this.appContext;
        if (renderAppContext) {
            return renderAppContext.viewModelManager.getViewModelByName(viewModelName);
        }
        return null;
    };
    FrameContext.prototype.attachViewComponent = function (viewComponent) {
        this.frameComponent = viewComponent;
        this.appContext.frameComponentRefresher.regFrameComponent(this.frameId, this.frameComponent);
    };
    FrameContext.prototype.invoke = function (actionPath, $event) {
        var actionBindingPath = actionPath.split('.');
        var actionName = actionBindingPath[actionBindingPath.length - 1];
        var bindingViewModel = actionBindingPath.length === 1 ? this.viewModel :
            this.getViewModel(actionBindingPath[actionBindingPath.length - 2]);
        if (!bindingViewModel) {
            alert("\u672A\u5339\u914D\u5230'" + actionPath + "'\u547D\u4EE4\u7684\u89C6\u56FE\u6A21\u578B\uFF0C\u8BF7\u68C0\u67E5\u4E8B\u4EF6\u662F\u5426\u914D\u7F6E\u6B63\u786E\u3002");
        }
        return bindingViewModel[actionName]($event);
    };
    FrameContext.decorators = [
        { type: Injectable }
    ];
    /** @nocollapse */
    FrameContext.ctorParameters = function () { return [
        { type: Injector },
        { type: FrameContext, decorators: [{ type: Optional }, { type: SkipSelf }] }
    ]; };
    return FrameContext;
}(Context));
export { FrameContext };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZnJhbWVfY29udGV4dC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvZGV2a2l0LyIsInNvdXJjZXMiOlsibGliL2ZyYW1lL2ZyYW1lX2NvbnRleHQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxRQUFRLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsV0FBVyxFQUFhLE1BQU0sZUFBZSxDQUFDO0FBR2pHLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUNqRCxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFDcEQsT0FBTyxFQUFFLE9BQU8sRUFBRSwwQkFBMEIsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ3hFLE9BQU8sRUFBRSxJQUFJLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDckMsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBQ3RELE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUNoRCxPQUFPLEVBQUUsVUFBVSxFQUFFLDhCQUE4QixFQUFFLHFCQUFxQixFQUFFLHNCQUFzQixFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFDN0gsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBQzNDLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxjQUFjLENBQUM7QUFDMUMsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ25ELE9BQU8sRUFBRSxRQUFRLEVBQUUsU0FBUyxFQUFFLE1BQU0sVUFBVSxDQUFDO0FBQy9DLE9BQU8sRUFBVSxVQUFVLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUMzRCxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFHbEQsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDeEQsT0FBTyxFQUFFLFVBQVUsRUFB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O0NBQUEsQUF2a0JELENBQ2tDLE9BQU8sR0Fza0J4QztTQXRrQlksWUFBWSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdG9yLCBJbmplY3RhYmxlLCBPcHRpb25hbCwgU2tpcFNlbGYsIEluamVjdEZsYWdzLCBPbkRlc3Ryb3kgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgUm91dGVyIH0gZnJvbSAnQGFuZ3VsYXIvcm91dGVyJztcclxuaW1wb3J0IHsgRW50aXR5IH0gZnJvbSAnLi4vZW50aXR5L2luZGV4JztcclxuaW1wb3J0IHsgUmVwb3NpdG9yeSB9IGZyb20gJy4uL3JlcG9zaXRvcnkvaW5kZXgnO1xyXG5pbXBvcnQgeyBCaW5kaW5nRGF0YSB9IGZyb20gJy4uL2JpbmRpbmctZGF0YS9pbmRleCc7XHJcbmltcG9ydCB7IFVJU3RhdGUsIFBBUkFNX1RZUEVfVFJBTlNGT1JNX1RPS0VOIH0gZnJvbSAnLi4vdWktc3RhdGUvaW5kZXgnO1xyXG5pbXBvcnQgeyBGb3JtIH0gZnJvbSAnLi4vZm9ybS9pbmRleCc7XHJcbmltcG9ydCB7IFN0YXRlTWFjaGluZSB9IGZyb20gJy4uL3N0YXRlLW1hY2hpbmUvaW5kZXgnO1xyXG5pbXBvcnQgeyBWaWV3TW9kZWwgfSBmcm9tICcuLi92aWV3LW1vZGVsL2luZGV4JztcclxuaW1wb3J0IHsgQ29tbWFuZEJ1cywgQ29tbWFuZEhhbmRsZXJFeHRlbmRlclJlZ2lzdHJ5LCBDb21tYW5kSGFuZGxlckZhY3RvcnksIENvbW1hbmRIYW5kbGVyUmVnaXN0cnkgfSBmcm9tICcuLi9jb21tYW5kL2luZGV4JztcclxuaW1wb3J0IHsgQ29udGV4dCB9IGZyb20gJy4uL2NvbnRleHQvaW5kZXgnO1xyXG5pbXBvcnQgeyBBcHBDb250ZXh0IH0gZnJvbSAnLi4vYXBwL2luZGV4JztcclxuaW1wb3J0IHsgUm91dGVyUGFyYW1TZXJ2aWNlIH0gZnJvbSAnLi4vbWlzYy9pbmRleCc7XHJcbmltcG9ydCB7IEZSQU1FX0lELCBOQU1FU1BBQ0UgfSBmcm9tICcuL3Rva2Vucyc7XHJcbmltcG9ydCB7IENoYW5nZSwgQ2hhbmdlVHlwZSB9IGZyb20gJy4uL2JpbmRpbmctZGF0YS9pbmRleCc7XHJcbmltcG9ydCB7IEV2ZW50QnVzIH0gZnJvbSAnLi4vZXZlbnQtYnVzLW5ldy9pbmRleCc7XHJcbmltcG9ydCB7IEZyYW1lQ29tcG9uZW50IH0gZnJvbSAnLi9mcmFtZV9jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBJRXhjZXB0aW9uSGFuZGxlciB9IGZyb20gJy4uL2V4Y2VwdGlvbi90eXBlcyc7XHJcbmltcG9ydCB7IEVYQ0VQVElPTl9IQU5ETEVSIH0gZnJvbSAnLi4vZXhjZXB0aW9uL3Rva2Vucyc7XHJcbmltcG9ydCB7IEVudGl0eVV0aWwgfSBmcm9tICcuLi9iaW5kaW5nLWRhdGEvZW50aXR5X3V0aWwnO1xyXG5pbXBvcnQgeyBUcmFuc2xhdGVUb2tlbiB9IGZyb20gJy4uL2kxOG4vdHJhbnNsYXRlX3Rva2VuJztcclxuaW1wb3J0IHsgVmFyaWFibGVQYXJzZVNlcnZpY2UgfSBmcm9tICcuLi92YXJpYWJsZS92YXJpYWJsZV9wYXJzZV9zZXJ2aWNlJztcclxuaW1wb3J0IHsgSUNvbnRleHRNZXRhZGF0YSB9IGZyb20gJy4uL2FwcC9hcHBfbWV0YWRhdGEnO1xyXG5pbXBvcnQgeyBUcmFuc2xhdGVTZXJ2aWNlIH0gZnJvbSAnLi4vaTE4bi90cmFuc2xhdGVfc2VydmljZSc7XHJcbmltcG9ydCB7IFRyYW5zbGF0ZSB9IGZyb20gJy4uL2kxOG4nO1xyXG5pbXBvcnQgeyBVc2VyU2V0dGluZ3MgfSBmcm9tICcuLi9pMThuL3R5cGVzJztcclxuaW1wb3J0IHsgVXNlclNldHRpbmdzVG9rZW4gfSBmcm9tICcuLi9pMThuL3Rva2Vucyc7XHJcbmltcG9ydCB7IFVzZXJTZXR0aW5nc1NlcnZpY2UgfSBmcm9tICcuLi9pMThuL3VzZXJfc2V0dGluZ3Nfc2VydmljZSc7XHJcbmltcG9ydCB7IEV4cHJlc3Npb25FbmdpbmVJbXBsIH0gZnJvbSAnLi4vZXhwcmVzc2lvbi9leHByZXNzaW9uX2VuZ2luZV9pbXBsJztcclxuaW1wb3J0IHsgRXhwcmVzc2lvbk1hbmFnZXIgfSBmcm9tICcuLi9leHByZXNzaW9uL2V4cHJlc3Npb25fbWFuYWdlcic7XHJcbmltcG9ydCB7IEV4cHJlc3Npb25SZXN1bHQgfSBmcm9tICcuLi9leHByZXNzaW9uL2V4cHJlc3Npb25fcmVzdWx0JztcclxuaW1wb3J0IHsgRXhwcmVzc2lvblJlc3VsdEZhY3RvcnkgfSBmcm9tICcuLi9leHByZXNzaW9uL2V4cHJlc3Npb25fcmVzdWx0X2ZhY3RvcnknO1xyXG5pbXBvcnQge1xyXG4gIENvbW1hbmRWYXJpYWJsZVBhcnNlciwgRGF0YVZhcmlhYmxlUGFyc2VyLCBGcmFtZUlkVmFyaWFibGVQYXJzZXIsXHJcbiAgU3RhdGVNYWNoaW5lVmFyaWFibGVQYXJzZXIsIFVJU3RhdGVWYXJpYWJsZVBhcnNlclxyXG59IGZyb20gJy4uL3ZhcmlhYmxlJztcclxuaW1wb3J0IHsgQ2hhbmdlU2V0UG9saWN5LCBDSEFOR0VfU0VUX1BPTElDWV9UT0tFTiwgUnVuTW9kZSB9IGZyb20gJy4uL2NvcmUnO1xyXG5pbXBvcnQgeyBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IElEaXNwb3NhYmxlIH0gZnJvbSAnLi4vY29yZS9pbmRleCc7XHJcbmltcG9ydCB7IENvbXBvbmVudFJlZk1hbmFnZXIgfSBmcm9tICcuL2NvbXBvbmVudF9yZWZfbWFuYWdlcic7XHJcblxyXG5cclxuLyoqXHJcbiAqIOe7hOS7tuS4iuS4i+aWh1xyXG4gKiBAZGVzY3JpcHRpb24gXHJcbiAqICMg5LiK5LiL5paHXHJcbiAqICMjIE92ZXJ2aWV3XHJcbiAqIFxyXG4gKiDmr4/kuKrnu4Tku7bvvIhGcmFtZUNvbXBvbmVudO+8iemDveacieiHquW3seeahOS4iuS4i+aWh++8iEZyYW1lQ29udGV4dO+8iSzpgJrov4fkuIrkuIvmloflj6/ku6Xojrflj5bmjqfliLblmajnmoTmiYDmnInlsZ7mgKfvvIzlpoLluLjnlKjnmoRgZnJhbWVJZGDjgIFgQmluZGluZ0RhdGFg44CBYFJlcG9zaXRvcnlg44CBYFZpZXdNb2RlbGDjgIFgU3RhdGVNYWNoaW5lYOOAgSAqIGBVSVN0YXRlYOetieOAguS4iuS4i+aWh+WcqOWGheWtmOS4reWRiOagkeW9oue7k+aehO+8jOS+nemZhOS6jkZyYW1lQ29tcG9uZW5044CC57uT5p6E5aaC5LiL77yaXHJcbiAqIFxyXG4gKiAhW2ltYWdlLTIwMjEwODA2MjA0NzU1Mzc4XShodHRwczovL29wZW4uaW5zcHVyb25saW5lLmNvbS9pR0lYL2Fzc2V0cy9jbG91ZHBsdXMvaWdpeF8yMTEwL2ZhcnJpcy9kZXZraXQvZ3VpZGUvaW1hZ2VzL2ltYWdlLTIwMjEwODA2MjA0NzU1Mzc4LnBuZylcclxuICogXHJcbiAqIOS7juS4iuWbvuaIkeS7rOWPr+S7peeci+WHuuavj+S4quS4iuS4i+aWh+mDveacieiHquW3seeahGBWaWV3TW9kZWxg44CBYFVJU3RhdGVg77yM6YKj5LmI5aaC5L2V56Gu5a6a5LiA5Liq5ZG95Luk5Zyo5omn6KGM5pe255So55qE5piv5ZOq5Liq5LiK5LiL5paH5ZGi77yf5YW25a6e5peg6K665ZG95Luk5Zyo5ZOq5Liq5Zyw5pa56KKr6LCD55So77yM5LiK5LiL5paH6YO95piv5ZG95Luk5omA5Zyo55qE57uE5Lu255qE5LiK5LiL5paH44CC5Y2z77yM5aaC5p6cICog5ZG95Luk5oyC6L295Yiw5LqGYGRldGFpbC1mb3JtLWNvbXBvbmVudGDnmoTop4blm77mqKHlnovvvIzkvYblkb3ku6TmnIDnu4jooqtgcm9vdC1jb21wb25lbnRg5LiK55qE5oyJ6ZKu6LCD55So5LqG77yM5YW25LiK5LiL5paH5LuN54S25pivYGRldGFpbC1mcm9tLWNvbXBvbmVudGDnu4Tku7bnmoTkuIrkuIvmlofjgILkuYvmiYDku6Xlh7rnjrDov5nnp43njrDosaHlkoxBbmd1bGFy55qE5L6d6LWW5rOoICog5YWl5a+G5LiN5Y+v5YiG77yM55Sx5LqOQW5ndWxhcuWcqOafpeaJvmBwcm92aWRlcmDnmoTml7blgJnmgLvmmK/ku47oh6rlt7HnmoTnu4Tku7blvIDlp4vlkJHkuIrmib7vvIzlpoLmnpzlnKjnu4Tku7blhoXpg6jmib7liLDkuobliJnkuI3lho3nu6fnu63mn6Xmib7vvIzlpoLmnpzmib7kuI3liLDliJnkvJrnu6fnu63lkJHkuIrvvIzlpoLmnpzmn6Xmib7liLDmnIDkuIrnuqfkvp3nhLbmib7kuI3liLDlsLHkvJrmiqVgTm8gcHJvdmlkZXIgICogZm9yIHh4YOmUmeivr+OAglxyXG4gKiBcclxuICog5pei54S25aaC5q2k77yM5aaC5p6c5oiR5Lus5ZyoYGRldGFpbC1mb3JtLWNvbXBvbmVudGDkuK3mg7PopoHojrflj5Zgcm9vdC1jb21wb25lbnRg5Lit5a6a5LmJ55qE5Y+Y6YeP77yIVUlTdGF0Ze+8ieivpeWmguS9leWBmuWRou+8n+etlOahiOaYr+WIh+aNouS4iuS4i+aWh++8jOWPr+S7pemAmui/h+S7peS4i+aWueW8j+WunueOsO+8mlxyXG4gKiBcclxuICogYGBgdHlwZXNjcmlwdFxyXG4gKiAvLyDmlrnms5UxXHJcbiAqIGNvbnN0IHJvb3RGcmFtZUNvbnRleHQgPSB0aGlzLmZyYW1lQ29udGV4dC5yb290O1xyXG4gKiAvLyDmlrnms5UyXHJcbiAqIGNvbnN0IHJvb3RGcmFtZUNvbnRleHQgPSB0aGlzLmZyYW1lQ29udGV4dC5hcHBDb250ZXh0LmZyYW1lQ29udGV4dE1hbmFnZXIuZ2V0RnJhbWVDb250ZXh0QnlJZCgncm9vdC1jb21wb25lbnQnKTtcclxuICogYGBgXHJcbiAqIFxyXG4gKiDpgJrluLjlnKjnvJblhplgV2Vi5p6E5Lu2YOaXtuWFiOW8leWFpUZyYW1lQ29udGV4dO+8jOWmgu+8mlxyXG4gKiBcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiBpbXBvcnQge0ZyYW1lQ29udGV4dCxCaW5kaW5nRGF0YSxSZXBvc2l0b3J5fSBmcm9tICdAZmFycmlzL2RldmtpdCc7XHJcbiAqIFxyXG4gKiBjb25zdHJ1Y3Rvcihwcml2YXRlIGZyYW1lQ29udGV4dDpGcmFtZUNvbnRleHQpe31cclxuICogXHJcbiAqIHB1YmxpYyBtZXRob2QoKXtcclxuICogICAgIGNvbnN0IGJpbmRpbmdEYXRhOiBCaW5kaW5nRGF0YSA9IHRoaXMuZnJhbWVDb250ZXh0LmJpbmRpbmdEYXRhO1xyXG4gKiAgICAgY29uc3QgcmVwb3NpdG9yeTogUmVwb3NpdG9yeSA9IHRoaXMuZnJhbWVDb250ZXh0LnJlcG9zaXRvcnk7XHJcbiAqIH1cclxuICogYGBgXHJcbiAqIFxyXG4gKiA+IGBGcmFtZUNvbnRleHRg56ew5Li6YFZpZXdNb2RlbENvbnRleHRg5pu05ZCI6YCC77yM5Y+v5Lul55CG6Kej5Li6YE1WVk1g5p625p6E5LitYFZNYOeahOS4iuS4i+aWh+OAglxyXG4gKiBcclxuICog5o6n5Yi25Zmo5Lit5Lqm5a2Y5ZyoYFZpZXdNb2RlbGDnmoTmpoLlv7XjgILlkoxgTVZWTWDmnrbmnoTkuK3nmoTnmoRWTeS4gOiHtO+8jOaJgOS7peS5n+WPr+S7peS7jmBWTWDorr/pl67luLjnlKjnmoTlsZ7mgKfjgILlpoLvvJpcclxuICogXHJcbiAqIGBgYHR5cGVzY3JpcHRcclxuICogaW1wb3J0IHtCaW5kaW5nRGF0YSxSZXBvc2l0b3J5LFZpZXdNb2RlbH0gZnJvbSAnQGZhcnJpcy9kZXZraXQnO1xyXG4gKiBcclxuICogY29uc3RydWN0b3IocHJpdmF0ZSB2aWV3TW9kZWw6Vmlld01vZGVsKXt9XHJcbiAqIFxyXG4gKiBwdWJsaWMgbWV0aG9kKCl7XHJcbiAqICAgICBjb25zdCBiaW5kaW5nRGF0YTogQmluZGluZ0RhdGEgPSB0aGlzLnZpZXdNb2RlbC5iaW5kaW5nRGF0YTtcclxuICogICAgIGNvbnN0IHJlcG9zaXRvcnk6IFJlcG9zaXRvcnkgPSB0aGlzLnZpZXdNb2RlbC5yZXBvc2l0b3J5O1xyXG4gKiB9XHJcbiAqIGBgYFxyXG4gKiBcclxuICogXHJcbiAqIFxyXG4gKiAjIyDluLjnlKjmk43kvZxcclxuICogXHJcbiAqICMjIyDojrflj5blvZPliY3kuIrkuIvmlofmiYDlsZ7nmoTnu4Tku7ZcclxuICogXHJcbiAqIGBgYHR5cGVzY3JpcHRcclxuICogdGhpcy5mcmFtZUNvbnRleHQuZnJhbWVDb21wb25lbnQ7XHJcbiAqIGBgYFxyXG4gKiBcclxuICogIyMjIOiOt+WPluW9k+WJjeS4iuS4i+aWh+eahOagueS4iuS4i+aWh1xyXG4gKiBcclxuICogYGBgdHlwZXNjcmlwdFxyXG4gKiB0aGlzLmZyYW1lQ29udGV4dC5yb290O1xyXG4gKiBgYGBcclxuICogXHJcbiAqICMjIyDojrflj5blvZPliY3kuIrkuIvmlofnmoRhcHBDb250ZXh0XHJcbiAqIFxyXG4gKiBgYGB0eXBlc2NyaXB0XHJcbiAqIHRoaXMuZnJhbWVDb250ZXh0LmFwcENvbnRleHQ7XHJcbiAqIGBgYFxyXG4gKiBcclxuICogIyMjIOiOt+WPluaMh+WummZyYW1lSWTnmoTkuIrkuIvmlodcclxuICogXHJcbiAqIGBgYHR5cGVzY3JpcHRcclxuICogdGhpcy5mcmFtZUNvbnRleHQuYXBwQ29udGV4dC5mcmFtZUNvbnRleHRNYW5hZ2VyLmdldEZyYW1lQ29udGV4dEJ5SWQoJ2RhdGEtZ3JpZC1jb21wb25lbnQnKTtcclxuICogYGBgXHJcbiAqIFxyXG4gKiAjIyMg6I635Y+W6KGo5Y2V5omA5pyJ5LiK5LiL5paHXHJcbiAqIFxyXG4gKiBgYGB0eXBlc2NyaXB0XHJcbiAqIHRoaXMuZnJhbWVDb250ZXh0LmFwcENvbnRleHQuZnJhbWVDb250ZXh0TWFuYWdlci5nZXRGcmFtZUNvbnRleHRzKCk7XHJcbiAqIGBgYFxyXG4gKiBcclxuICogXHJcbiAqIFxyXG4gKiAjIyDluLjnlKjlsZ7mgKdcclxuICogXHJcbiAqICMjIyBCaW5kaW5nRGF0YSBcclxuICogXHJcbiAqIFvlj4LogINdKFvmtarmva7kvIHkuJrkupHlvIDmlL7lubPlj7AgKGluc3B1cm9ubGluZS5jb20pXShodHRwczovL29wZW4uaW5zcHVyb25saW5lLmNvbS9pR0lYLyMvZG9jdW1lbnQvbWRkb2MvaWdpeC0yMTAzJTJGZmFycmlzJTJGZGV2a2l0JTJGZ3VpZGUlMkbnu5HlrprmlbDmja4ubWQpKVxyXG4gKiBcclxuICogIyMjIFJlcG9zaXRvcnlcclxuICogXHJcbiAqIFvlj4LogINdKFvmtarmva7kvIHkuJrkupHlvIDmlL7lubPlj7AgKGluc3B1cm9ubGluZS5jb20pXShodHRwczovL29wZW4uaW5zcHVyb25saW5lLmNvbS9pR0lYLyMvZG9jdW1lbnQvbWRkb2MvaWdpeC0yMTAzJTJGZmFycmlzJTJGZGV2a2l0JTJGZ3VpZGUlMkbku5PlupMubWQpKVxyXG4gKiBcclxuICogIyMjIFZpZXdNb2RlbFxyXG4gKiBcclxuICog5o6n5Yi25Zmo5LitVmlld01vZGXlkIxNVlZN5p625p6E5Lit55qEVk3vvIzlkoxGcmFtZUNvbnRleHTnsbvkvLzvvIzlj6/ku6XpgJrov4dWaWV3TW9kZWzmi7/liLBGcmFtZUNvbnRleHTvvIzlkIzmoLfnmoTkuZ/lj6/ku6XpgJrov4dGcmFtZUNvbnRleHTmi7/liLBWaWV3TW9kZWzjgIJcclxuICogXHJcbiAqICMjIyBuYW1lc3BhY2VcclxuICogXHJcbiAqIOWRveWQjeepuumXtO+8jOS4u+imgeWcqOe7hOWQiOihqOWNleWcuuaZr+eUqOWIsO+8jOavj+S4gOS4quihqOWNlemDveacieiHquW3seeahOWRveWQjeepuumXtO+8jOiiq+e7hOWQiOi/m+adpeeahOihqOWNleWFtuWRveWQjeepuumXtOaYr+ebuOWQjOeahO+8jOWmgkHooajljZXnu4TlkIjkuoZC6KGo5Y2V77yM5YiZQuihqOWNleWFt+acieebuOWQjOeahOWRveWQjeepuumXtO+8jOWRveWQjeepuumXtOS4u+imgeeUqOS6juihqOWNlemalOemu+OAglxyXG4gKiBcclxuICogIyMjIHJvb3RcclxuICogXHJcbiAqIOiOt+WPluaVtOS4quihqOWNleeahOagueS4iuS4i+aWh1xyXG4gKiBcclxuICogIyMjIHVpU3RhdGVcclxuICogXHJcbiAqIOiOt+WPluW9k+WJjee7hOS7tueahOWPmOmHj1xyXG4gKiBcclxuICogIyMjIGZyYW1lSWRcclxuICogXHJcbiAqIOS4iuS4i+aWh+agh+ivhuOAglxyXG4gKi9cclxuQEluamVjdGFibGUoKVxyXG5leHBvcnQgY2xhc3MgRnJhbWVDb250ZXh0IGV4dGVuZHMgQ29udGV4dCBpbXBsZW1lbnRzIElEaXNwb3NhYmxlLCBPbkRlc3Ryb3kge1xyXG5cclxuICBwdWJsaWMgdHlwZU5hbWUgPSAnRnJhbWVDb250ZXh0JztcclxuXHJcbiAgcHJvdGVjdGVkIGlzRGVzdG9yaWVkID0gZmFsc2U7XHJcbiAgcHVibGljIGlzRGlzcG9zZWQgPSBmYWxzZTtcclxuICAvKipcclxuICAgKiBpZFxyXG4gICAqL1xyXG4gIHB1YmxpYyBmcmFtZUlkOiBzdHJpbmc7XHJcblxyXG4gIC8qKlxyXG4gICAqIOazqOWFpeWZqFxyXG4gICAqL1xyXG4gIC8vIHB1YmxpYyBpbmplY3RvcjogSW5qZWN0b3I7XHJcblxyXG4gIC8qKlxyXG4gICAqIOW6lOeUqOS4iuS4i+aWh1xyXG4gICAqL1xyXG4gIHB1YmxpYyBhcHBDb250ZXh0OiBBcHBDb250ZXh0O1xyXG5cclxuICAvKipcclxuICAgKiDmoLnnu4Tku7bkuIrkuIvmlodcclxuICAgKi9cclxuICBwdWJsaWMgcm9vdDogRnJhbWVDb250ZXh0O1xyXG5cclxuICAvKipcclxuICAgKiDniLZWaWV3TW9kZWxcclxuICAgKi9cclxuICBwdWJsaWMgcGFyZW50OiBGcmFtZUNvbnRleHQ7XHJcblxyXG4gIC8qKlxyXG4gICAqIOWQjuS7o+iKgueCuVxyXG4gICAqL1xyXG4gIHB1YmxpYyBjaGlsZHJlbjogTWFwPHN0cmluZywgRnJhbWVDb250ZXh0PjtcclxuXHJcbiAgLyoqXHJcbiAgICog5a6e5L2T5LuT5bqTXHJcbiAgICovXHJcbiAgcHVibGljIHJlcG9zaXRvcnk6IFJlcG9zaXRvcnk8RW50aXR5PjtcclxuXHJcbiAgLyoqXHJcbiAgICog5ZG95Luk5oC757q/XHJcbiAgICovXHJcbiAgcHVibGljIGNvbW1hbmRCdXM6IENvbW1hbmRCdXM7XHJcblxyXG4gIC8qKlxyXG4gICAqIOS6i+S7tuaAu+e6v1xyXG4gICAqL1xyXG4gIHB1YmxpYyBldmVudEJ1czogRXZlbnRCdXM7XHJcblxyXG4gIC8qKlxyXG4gICAqIOinhuWbvuaooeWei1xyXG4gICAqL1xyXG4gIHB1YmxpYyB2aWV3TW9kZWw6IFZpZXdNb2RlbDtcclxuXHJcbiAgLyoqXHJcbiAgICog5pWw5o2u57uR5a6aXHJcbiAgICovXHJcbiAgcHVibGljIGJpbmRpbmdEYXRhOiBCaW5kaW5nRGF0YTtcclxuXHJcbiAgLyoqXHJcbiAgICogVUnnirbmgIFcclxuICAgKi9cclxuICBwdWJsaWMgdWlTdGF0ZTogVUlTdGF0ZTtcclxuXHJcbiAgLyoqXHJcbiAgICog54q25oCB5py6XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRlTWFjaGluZTogU3RhdGVNYWNoaW5lO1xyXG5cclxuICAvKipcclxuICAgKiDooajljZVcclxuICAgKi9cclxuICBwdWJsaWMgZm9ybTogRm9ybTtcclxuXHJcbiAgLyoqXHJcbiAgICog5omA5bGe57uE5Lu2XHJcbiAgICovXHJcbiAgcHVibGljIGZyYW1lQ29tcG9uZW50OiBGcmFtZUNvbXBvbmVudDtcclxuXHJcbiAgLyoqXHJcbiAgICog5byC5bi45aSE55CGXHJcbiAgICovXHJcbiAgcHVibGljIGV4Y2VwdGlvbkhhbmRsZXI6IElFeGNlcHRpb25IYW5kbGVyO1xyXG5cclxuICAvKipcclxuICAgKiDooajljZXlkb3lkI3nqbrpl7RcclxuICAgKi9cclxuICBwdWJsaWMgbmFtZXNwYWNlOiBzdHJpbmc7XHJcblxyXG4gIHB1YmxpYyB2YXJpYWJsZVBhcnNlU2VydmljZTogVmFyaWFibGVQYXJzZVNlcnZpY2U7XHJcblxyXG4gIHB1YmxpYyBtZXRhZGF0YTogSUNvbnRleHRNZXRhZGF0YSA9IHtcclxuICAgIGlkZW50aWZ5OiAnJyxcclxuICAgIG5hbWVzcGFjZTogJycsXHJcbiAgICBjb21tYW5kczogbnVsbCxcclxuICAgIGZvcm06IG51bGwsXHJcbiAgICBmb3JtQ29udHJvbHM6IG51bGwsXHJcbiAgICBzdWJGb3JtczogbnVsbCxcclxuICAgIHN0YXRlTWFjaGluZTogbnVsbCxcclxuICAgIHVpU3RhdGVzOiBudWxsLFxyXG4gICAgYmluZGluZ1RvOiAnJ1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIOaaguWBnOS6i+S7tuaKm+WHulxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdXNwZW5kOiBib29sZWFuO1xyXG4gIHB1YmxpYyBleHByZXNzaW9uRW5naW5lSW1wbDogRXhwcmVzc2lvbkVuZ2luZUltcGw7XHJcbiAgcHVibGljIGV4cHJlc3Npb25NYW5hZ2VyOiBFeHByZXNzaW9uTWFuYWdlcjtcclxuICBwdWJsaWMgZXhwcmVzc2lvblJlc3VsdDogRXhwcmVzc2lvblJlc3VsdDtcclxuICAvKipcclxuICAgKiDntKLlvJUo5LuOMOW8gOWniylcclxuICAgKi9cclxuICBwdWJsaWMgaW5kZXg6IG51bWJlcjtcclxuICAvKipcclxuICAgKiDlpJror61cclxuICAgKi9cclxuICBwdWJsaWMgdHJhbnNsYXRlOiBUcmFuc2xhdGU7XHJcbiAgLyoqXHJcbiAgICog5LiK5LiL5paH6ZSA5q+B5rWBXHJcbiAgICovXHJcbiAgcHVibGljIGRlc3RvcnlTaWduYWw6IFN1YmplY3Q8YW55PjtcclxuICAvKipcclxuICAgKiDnu4Tku7blvJXnlKjnrqHnkIZcclxuICAgKi9cclxuICBwdWJsaWMgY29tcG9uZW50UmVmTWFuYWdlcjogQ29tcG9uZW50UmVmTWFuYWdlciA9IG5ldyBDb21wb25lbnRSZWZNYW5hZ2VyKCk7XHJcbiAgLyoqXHJcbiAgICog5p6E6YCg5Ye95pWwXHJcbiAgICogQHBhcmFtIGluamVjdG9yIOazqOWFpeWZqFxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBpbmplY3RvcjogSW5qZWN0b3IsIEBPcHRpb25hbCgpIEBTa2lwU2VsZigpIHBhcmVudDogRnJhbWVDb250ZXh0KSB7XHJcbiAgICBzdXBlcigpO1xyXG4gICAgLy8g5Zyo6Kej5p6Q5qih5byP5LiL77yM6YCa6L+H5L6d6LWW5rOo5YWl6I635Y+W5LiN5YiwQXBwQ29udGV4dOaXtu+8jOi/lOWbnm51bGzvvIzlnKjlrZDnsbvkuK3ov5vooYzotYvlgLzjgIJcclxuICAgIHRoaXMuYXBwQ29udGV4dCA9IGluamVjdG9yLmdldChBcHBDb250ZXh0KTtcclxuICAgIHRoaXMuZGVzdG9yeVNpZ25hbCA9IG5ldyBTdWJqZWN0PGFueT4oKTtcclxuICAgIC8vIOehruWumueItuWtkOWFs+ezu1xyXG4gICAgLy8g5b+F6aG75a+5YXBwQ29udGV4dOi/m+ihjOWIpOaWre+8jOWOn+WboOWmguS4i++8mlxyXG4gICAgLy8gMeOAgeWQpuWImeS8muWvvOiHtOWKqOaAgei3r+eUseihqOWNleS4re+8jOiiq+i3r+eUseeahOihqOWNleeahFJvb3RGcmFtZUNvbnRleHTlj5jmiJDkuLvooajljZXnmoRSb290RnJhbWVDb250ZXh077ybXHJcbiAgICAvLyAy44CB6L+b6ICM5a+86Ie05LuOUm9vdEZyYW1lQ29udGV4dOS4iuaLv1ZP5Y+Y6YeP5ou/5LiN5Yiw44CCXHJcbiAgICBpZiAoIXBhcmVudCB8fCBwYXJlbnQuYXBwQ29udGV4dCAhPT0gdGhpcy5hcHBDb250ZXh0KSB7IC8vIOWPlua2iCBhcHBDb250ZXh0IOeahOWIpOaWrVxyXG4gICAgICB0aGlzLnBhcmVudCA9IG51bGw7XHJcbiAgICAgIHRoaXMucm9vdCA9IHRoaXM7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcclxuICAgICAgdGhpcy5yb290ID0gcGFyZW50LnJvb3Q7XHJcbiAgICB9XHJcbiAgICB0aGlzLmZyYW1lSWQgPSBpbmplY3Rvci5nZXQ8c3RyaW5nPihGUkFNRV9JRCk7XHJcbiAgICBpZiAodGhpcy5hcHBDb250ZXh0LmNvbnRleHRNZXRhZGF0YU1hbmFnZXIuZXhzaXQodGhpcy5mcmFtZUlkKSkge1xyXG4gICAgICB0aGlzLm1ldGFkYXRhID0gdGhpcy5hcHBDb250ZXh0LmNvbnRleHRNZXRhZGF0YU1hbmFnZXIuZ2V0Q29udGV4dE1ldGFkYXRhQnlOYW1lKHRoaXMuZnJhbWVJZCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLm5hbWVzcGFjZSA9IGluamVjdG9yLmdldChOQU1FU1BBQ0UsIG51bGwpO1xyXG4gICAgdGhpcy5iaW5kaW5nRGF0YSA9IHRoaXMuaW5qZWN0b3IuZ2V0PEJpbmRpbmdEYXRhPihCaW5kaW5nRGF0YSwgbmV3IEJpbmRpbmdEYXRhKCkpO1xyXG4gICAgaWYgKCF0aGlzLmFwcENvbnRleHQudXNlSXNvbHV0ZUV2ZW50QnVzIHx8ICh0aGlzLmFwcENvbnRleHQudXNlSXNvbHV0ZUV2ZW50QnVzICYmICF0aGlzLmFwcENvbnRleHQuaXNvbHV0ZUV2ZW50QnVzKSkge1xyXG4gICAgICB0aGlzLmV2ZW50QnVzID0gdGhpcy5pbmplY3Rvci5nZXQoRXZlbnRCdXMsIG51bGwsIEluamVjdEZsYWdzLk9wdGlvbmFsKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuZXZlbnRCdXMgPSB0aGlzLmFwcENvbnRleHQuaXNvbHV0ZUV2ZW50QnVzO1xyXG4gICAgfVxyXG4gICAgdGhpcy5mb3JtID0gdGhpcy5pbmplY3Rvci5nZXQ8Rm9ybT4oRm9ybSwgbmV3IEZvcm0oKSk7XHJcbiAgICB0aGlzLnJlcG9zaXRvcnkgPSB0aGlzLmluamVjdG9yLmdldChSZXBvc2l0b3J5LCB0aGlzLmFwcENvbnRleHQucmVwb3NpdG9yeSk7XHJcbiAgICAvLyDojrflj5blj5jmm7Tpm4bnrZbnlaXvvIzpu5jorqTlj6rmj5DkuqTlkIjms5XnmoTlj5jmm7RcclxuICAgIGNvbnN0IGNoYW5nZVNldFBvbGljeSA9IHRoaXMuaW5qZWN0b3IuZ2V0PENoYW5nZVNldFBvbGljeT4oQ0hBTkdFX1NFVF9QT0xJQ1lfVE9LRU4sICd2YWxpZCcpO1xyXG4gICAgaWYgKHRoaXMucmVwb3NpdG9yeSkge1xyXG4gICAgICB0aGlzLnJlcG9zaXRvcnkuZW50aXR5Q29sbGVjdGlvbi5jaGFuZ2VTZXRQb2xpY3kgPSBjaGFuZ2VTZXRQb2xpY3k7XHJcbiAgICB9XHJcbiAgICB0aGlzLnVpU3RhdGUgPSB0aGlzLmluamVjdG9yLmdldDxVSVN0YXRlPihVSVN0YXRlLCBuZXcgVUlTdGF0ZSgpKTtcclxuICAgIGNvbnN0IGRlZmF1bHRWaWV3TW9kZWwgPSBuZXcgVmlld01vZGVsKCk7XHJcbiAgICBkZWZhdWx0Vmlld01vZGVsLnNldE1ldGFkYXRhKHRoaXMubWV0YWRhdGEpO1xyXG4gICAgdGhpcy52aWV3TW9kZWwgPSB0aGlzLmluamVjdG9yLmdldDxWaWV3TW9kZWw+KFZpZXdNb2RlbCwgZGVmYXVsdFZpZXdNb2RlbCk7XHJcbiAgICB0aGlzLnZhcmlhYmxlUGFyc2VTZXJ2aWNlID0gaW5qZWN0b3IuZ2V0PFZhcmlhYmxlUGFyc2VTZXJ2aWNlPihWYXJpYWJsZVBhcnNlU2VydmljZSwgbmV3IFZhcmlhYmxlUGFyc2VTZXJ2aWNlKFtcclxuICAgICAgbmV3IEZyYW1lSWRWYXJpYWJsZVBhcnNlcigpLFxyXG4gICAgICBuZXcgRGF0YVZhcmlhYmxlUGFyc2VyKCksXHJcbiAgICAgIG5ldyBVSVN0YXRlVmFyaWFibGVQYXJzZXIoKSxcclxuICAgICAgbmV3IFN0YXRlTWFjaGluZVZhcmlhYmxlUGFyc2VyKCksXHJcbiAgICAgIG5ldyBDb21tYW5kVmFyaWFibGVQYXJzZXIoKVxyXG4gICAgXSkpO1xyXG4gICAgLy8g5rOo5YWlZXhjZXB0aW9uSGFuZGxlclxyXG4gICAgdGhpcy5leGNlcHRpb25IYW5kbGVyID0gaW5qZWN0b3IuZ2V0PElFeGNlcHRpb25IYW5kbGVyPihFWENFUFRJT05fSEFORExFUiwgbnVsbCwgSW5qZWN0RmxhZ3MuT3B0aW9uYWwpO1xyXG4gICAgLy8g5Yid5aeL5YyW5aSa6K+t5pyN5YqhXHJcbiAgICBjb25zdCB0cmFuc2xhdGUgPSBpbmplY3Rvci5nZXQ8VHJhbnNsYXRlPihUcmFuc2xhdGVUb2tlbiwgbnVsbCk7XHJcbiAgICB0aGlzLnRyYW5zbGF0ZSA9IHRyYW5zbGF0ZTtcclxuICAgIFRyYW5zbGF0ZVNlcnZpY2Uuc2V0VHJhbnNsYXRlKHRyYW5zbGF0ZSk7XHJcbiAgICAvLyDliJ3lp4vljJbnlKjmiLfphY3nva5cclxuICAgIGNvbnN0IHVzZXJTZXR0aW5ncyA9IGluamVjdG9yLmdldDxVc2VyU2V0dGluZ3M+KFVzZXJTZXR0aW5nc1Rva2VuLCBudWxsKTtcclxuICAgIFVzZXJTZXR0aW5nc1NlcnZpY2Uuc2V0VXNlclNldHRpbmdzKHVzZXJTZXR0aW5ncyk7XHJcbiAgICB0aGlzLmluaXRpYWxpemVSZXBvc2l0b3J5KCk7XHJcbiAgICB0aGlzLmFwcENvbnRleHQucmVnRnJhbWVDb250ZXh0KHRoaXMpO1xyXG4gICAgdGhpcy5yZWdpc3RlckFwcENvbnRleHREZXN0cm95RXZlbnQoKTtcclxuICB9XHJcbiAgZGlzcG9zZShvcHRpb25zPzogYW55KTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5pc0Rpc3Bvc2VkKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHRoaXMuaXNEZXN0b3JpZWQgPSB0cnVlO1xyXG4gICAgdGhpcy5pc0Rpc3Bvc2VkID0gdHJ1ZTtcclxuICAgIGlmICh0aGlzLmRlc3RvcnlTaWduYWwpIHtcclxuICAgICAgdGhpcy5kZXN0b3J5U2lnbmFsLm5leHQoKTtcclxuICAgICAgdGhpcy5kZXN0b3J5U2lnbmFsLmNvbXBsZXRlKCk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5hcHBDb250ZXh0KSB7XHJcbiAgICAgIHRoaXMuYXBwQ29udGV4dC5mcmFtZUNvbnRleHRNYW5hZ2VyLnVucmVnRnJhbWVDb250ZXh0KHRoaXMpO1xyXG4gICAgICB0aGlzLmFwcENvbnRleHQuZnJhbWVDb21wb25lbnRSZWZyZXNoZXIudW5yZWdGcmFtZUNvbnRleHQodGhpcyk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5hcHBDb250ZXh0ICYmIHRoaXMuaXNSb290RnJhbWVDb250ZXh0KCkgPT09IHRydWUpIHtcclxuICAgICAgY29uc3Qgdmlld01vZGVsTmFtZXMgPSB0aGlzWyd2aWV3TW9kZWxOYW1lcyddO1xyXG4gICAgICBpZiAodmlld01vZGVsTmFtZXMgJiYgQXJyYXkuaXNBcnJheSh2aWV3TW9kZWxOYW1lcykpIHtcclxuICAgICAgICB2aWV3TW9kZWxOYW1lcy5mb3JFYWNoKG5hbWUgPT4ge1xyXG4gICAgICAgICAgdGhpc1tuYW1lXSA9IG51bGw7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5hcHBDb250ZXh0LnVucmVnaXN0ZXJGcm9tTWFuYWdlcigpO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuYmluZGluZ0RhdGEpIHtcclxuICAgICAgdGhpcy5iaW5kaW5nRGF0YS5kaXNwb3NlKCk7XHJcbiAgICAgIC8vIHRoaXMuYmluZGluZ0RhdGEgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMudmlld01vZGVsKSB7XHJcbiAgICAgIHRoaXMudmlld01vZGVsLmRpc3Bvc2UoKTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmZvcm0pIHtcclxuICAgICAgdGhpcy5mb3JtLmRpc3Bvc2UoKTtcclxuICAgICAgdGhpcy5mb3JtID0gbnVsbDtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmNvbW1hbmRCdXMpIHtcclxuICAgICAgdGhpcy5jb21tYW5kQnVzLmRpc3Bvc2UoKTtcclxuICAgICAgdGhpcy5jb21tYW5kQnVzID0gbnVsbDtcclxuICAgIH1cclxuICAgIFRyYW5zbGF0ZVNlcnZpY2UuZGlzcG9zZSgpO1xyXG4gICAgLy8gdGhpcy5yb290ID0gbnVsbDtcclxuICAgIC8vIHRoaXMucGFyZW50ID0gbnVsbDtcclxuICAgIC8vIHRoaXMudWlTdGF0ZSA9IG51bGw7XHJcbiAgICB0aGlzLmZyYW1lQ29tcG9uZW50ID0gbnVsbDtcclxuICAgIHRoaXMucmVwb3NpdG9yeSA9IG51bGw7XHJcbiAgICAvLyB0aGlzLnN0YXRlTWFjaGluZSA9IG51bGw7XHJcbiAgICAvLyB0aGlzLmFwcENvbnRleHQgPSBudWxsO1xyXG4gICAgdGhpcy5leGNlcHRpb25IYW5kbGVyID0gbnVsbDtcclxuICAgIHRoaXMuZXhwcmVzc2lvbk1hbmFnZXIgPSBudWxsO1xyXG4gICAgdGhpcy5leHByZXNzaW9uRW5naW5lSW1wbCA9IG51bGw7XHJcbiAgICB0aGlzLnZhcmlhYmxlUGFyc2VTZXJ2aWNlID0gbnVsbDtcclxuICAgIHRoaXMuZXZlbnRCdXMgPSBudWxsO1xyXG4gICAgdGhpcy50cmFuc2xhdGUgPSBudWxsO1xyXG4gICAgdGhpcy5pbmplY3RvciA9IG51bGw7XHJcbiAgICB0aGlzLmV4cHJlc3Npb25SZXN1bHQgPSBudWxsO1xyXG4gICAgVXNlclNldHRpbmdzU2VydmljZS5zZXRVc2VyU2V0dGluZ3MobnVsbCk7XHJcbiAgfVxyXG4gIG5nT25EZXN0cm95KCk6IHZvaWQge1xyXG4gICAgdGhpcy5kaXNwb3NlKCk7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIOmAmui/h+e7hOS7tuagh+ivhuiOt+WPluWvueW6lOeahOe7hOS7tuWunuS+i1xyXG4gICAqIEBwYXJhbSBpZCDnu4Tku7bmoIfor4ZcclxuICAgKiBAcmV0dXJucyBcclxuICAgKi9cclxuICBwdWJsaWMgZ2V0Q29tcG9uZW50QnlJZDxUPihpZDogc3RyaW5nKTogVCB7XHJcbiAgICBjb25zdCBjb21wb25lbnRzID0gdGhpcy5jb21wb25lbnRSZWZNYW5hZ2VyLmdldChpZCk7XHJcbiAgICBpZiAoY29tcG9uZW50cyAmJiBjb21wb25lbnRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgY29uc3QgY29tcG9uZW50ID0gY29tcG9uZW50c1swXSBhcyBUO1xyXG4gICAgICByZXR1cm4gY29tcG9uZW50O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIOiOt+WPluaMh+Wumuagh+ivhueahOaJgOaciee7hOS7tlxyXG4gICAqIEBwYXJhbSBpZCDnu4Tku7bmoIfor4ZcclxuICAgKi9cclxuICBwdWJsaWMgZ2V0Q29tcG9uZW50c0J5SWQ8VD4oaWQ6IHN0cmluZyk6IFRbXSB7XHJcbiAgICByZXR1cm4gdGhpcy5jb21wb25lbnRSZWZNYW5hZ2VyLmdldChpZCkgYXMgVFtdO1xyXG4gIH1cclxuICBiaW5kSW5qZWN0b3IoY29tcG9uZW50SW5qZWN0b3I6IEluamVjdG9yKSB7XHJcbiAgICB0aGlzLmluamVjdG9yID0gY29tcG9uZW50SW5qZWN0b3I7XHJcbiAgfVxyXG5cclxuICAvLyAjcmVnaW9uIOWIneWni+WMllxyXG5cclxuICAvKipcclxuICAgKiDliJ3lp4vljJZcclxuICAgKiBAdG9kbzpcclxuICAgKiAx44CBQ29tbWFuZEhhbmRsZXLkuK3nmoTmnI3liqHlj6/og73kvJrms6jlhaVDb250ZXh077yM5omA5LulQ29tbWFuZEhhbmRsZXLliJvlu7rml7blv4Xpobvlt7Lnu4/lrZjlnKhDb21wb25lbnRDb250ZXh0XHJcbiAgICogMuOAgVZpZXdNb2RlbOeahGJ1aWxkQ29tbWFuZHPkuK3kvJrkvb/nlKhDb21tYW5kQnVz77yM5Li65LqG5L+d6K+B6aG65bqP77yM5bCGVmlld01vZGVs55qE5Yib5bu65Lmf5pS+5ZyoaW5pdOS4reOAglxyXG4gICAqL1xyXG4gIHB1YmxpYyBpbml0KGZyYW1lQ29tcG9uZW50OiBGcmFtZUNvbXBvbmVudCkge1xyXG4gICAgdGhpcy5mcmFtZUNvbXBvbmVudCA9IGZyYW1lQ29tcG9uZW50O1xyXG4gICAgdGhpcy5pbml0aWFsaXplQmluZGluZ0RhdGEoKTtcclxuICAgIHRoaXMuaW5pdGlhbGl6ZVN0YXRlTWFjaGluZSgpO1xyXG4gICAgdGhpcy5pbml0aWFsaXplVWlTdGF0ZSgpO1xyXG4gICAgdGhpcy5pbml0aWFsaXplRm9ybSgpO1xyXG4gICAgdGhpcy5pbml0aWFsaXplQ29tbWFuZEJ1cygpO1xyXG4gICAgdGhpcy5pbml0aWFsaXplVmlld01vZGVsKCk7XHJcbiAgICB0aGlzLnJlZ2lzdGVyRXhjZXB0aW9uSGFuZGxlcigpO1xyXG4gICAgdGhpcy5pbml0RXhwcmVzc2lvbigpO1xyXG4gICAgdGhpcy5hcHBDb250ZXh0LmZyYW1lQ29tcG9uZW50UmVmcmVzaGVyLnJlZ0ZyYW1lQ29tcG9uZW50KHRoaXMuZnJhbWVJZCwgdGhpcy5mcmFtZUNvbXBvbmVudCk7XHJcbiAgfVxyXG4gIHB1YmxpYyBpbml0RXhwcmVzc2lvbigpIHtcclxuICAgIHRoaXMuZXhwcmVzc2lvbkVuZ2luZUltcGwgPSB0aGlzLmluamVjdG9yLmdldDxFeHByZXNzaW9uRW5naW5lSW1wbD4oRXhwcmVzc2lvbkVuZ2luZUltcGwsIG51bGwpO1xyXG4gICAgdGhpcy5leHByZXNzaW9uTWFuYWdlciA9IHRoaXMuaW5qZWN0b3IuZ2V0PEV4cHJlc3Npb25NYW5hZ2VyPihFeHByZXNzaW9uTWFuYWdlciwgbnVsbCk7XHJcbiAgICBjb25zdCBleHByZXNzaW9uUmVzdWx0RmFjdG9yeSA9IHRoaXMuaW5qZWN0b3IuZ2V0PEV4cHJlc3Npb25SZXN1bHRGYWN0b3J5PihFeHByZXNzaW9uUmVzdWx0RmFjdG9yeSwgbnVsbCk7XHJcbiAgICB0aGlzLmV4cHJlc3Npb25SZXN1bHQgPSB0aGlzLmluamVjdG9yLmdldDxFeHByZXNzaW9uUmVzdWx0PihFeHByZXNzaW9uUmVzdWx0LCBudWxsKTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICog6K6i6ZiF5byC5bi45raI5oGvXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHJlZ2lzdGVyRXhjZXB0aW9uSGFuZGxlcigpIHtcclxuICAgIC8vIHRzbGludDpkaXNhYmxlOiBuby1zdHJpbmctbGl0ZXJhbFxyXG4gICAgY29uc3QgZm9ybUFwcENvbnRleHQgPSB0aGlzLmdldEZvcm1BcHBDb250ZXh0KCk7XHJcbiAgICBjb25zdCBhcHBsaWNhdGlvbklkID0gZm9ybUFwcENvbnRleHQuQXBwbGljYXRpb25JZDtcclxuICAgIHdpbmRvd1t3aW5kb3cubG9jYXRpb24uaHJlZl0gPSBhcHBsaWNhdGlvbklkO1xyXG4gICAgaWYgKHRoaXMuZXhjZXB0aW9uSGFuZGxlciAhPT0gbnVsbCkge1xyXG4gICAgICBjb25zdCBhcHBsaWNhdGlvbkNvbnRleHQgPSB3aW5kb3dbYXBwbGljYXRpb25JZF0gPSB3aW5kb3dbYXBwbGljYXRpb25JZF0gfHwge307XHJcbiAgICAgIGlmICh0aGlzLmV2ZW50QnVzICE9PSBudWxsICYmIHRoaXMuaXNSb290RnJhbWVDb250ZXh0KCkpIHtcclxuICAgICAgICBhcHBsaWNhdGlvbkNvbnRleHQuaXNFeGNlcHRpb25IYW5kbGVyRXhpc3QgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuZXhjZXB0aW9uSGFuZGxlci5zZXRDb250ZXh0KHRoaXMuYXBwQ29udGV4dCk7XHJcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5vbignRXhjZXB0aW9uJywgJycsICdvbkV4Y2VwdGlvbicsIGZvcm1BcHBDb250ZXh0LCAoZXJyb3IpID0+IHtcclxuICAgICAgICAgIGlmICh0aGlzLmlzRGVzdG9yaWVkID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmIChlcnJvciAmJiBlcnJvci5lcnJvcikge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgIGVycm9yLmVycm9yLl9fZnJhbWVfY29udGV4dF9fID0gdGhpcztcclxuICAgICAgICAgICAgfSBjYXRjaCB7IH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHRoaXMuZXhjZXB0aW9uSGFuZGxlci5oYW5kbGUoZXJyb3IpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuZGVzdG9yeVNpZ25hbC5zdWJzY3JpYmUoKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuZXZlbnRCdXMub2ZmKCdFeGNlcHRpb24nLCAnJywgJ29uRXhjZXB0aW9uJywgZm9ybUFwcENvbnRleHQpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcbiAgcHJvdGVjdGVkIHJlZ2lzdGVyQXBwQ29udGV4dERlc3Ryb3lFdmVudCgpIHtcclxuICAgIGlmICh0aGlzLmFwcENvbnRleHQgJiYgdGhpcy5hcHBDb250ZXh0LmRlc3RvcnlTaWduYWwpIHtcclxuICAgICAgdGhpcy5hcHBDb250ZXh0LmRlc3RvcnlTaWduYWwuc3Vic2NyaWJlKCgpID0+IHtcclxuICAgICAgICBpZiAodGhpcy5zdGF0ZU1hY2hpbmUpIHtcclxuICAgICAgICAgIHRoaXMuc3RhdGVNYWNoaW5lLmRpc3Bvc2UoKTtcclxuICAgICAgICAgIHRoaXMuc3RhdGVNYWNoaW5lID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMucmVwb3NpdG9yeSkge1xyXG4gICAgICAgICAgdGhpcy5yZXBvc2l0b3J5LmRpc3Bvc2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiDojrflj5booajljZVhcHBjb250ZXh077yM5Y2z5pyA5LiK5bGCYXBwY29udGV4dFxyXG4gICAqL1xyXG4gIHB1YmxpYyBnZXRGb3JtQXBwQ29udGV4dCgpIHtcclxuICAgIHJldHVybiB0aGlzLmFwcENvbnRleHQ7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIOiOt+WPlmZyYW1lSWRcclxuICAgKiBAZGVzY3JpcHRpb24g6I635Y+W5a6M5pW055qERnJhbWVJZO+8jOWcqOmdnuaZrumAmuihqOWNleS4reivpeWAvOetieS6jmZyYW1lSWTvvIzlnKjnu4TlkIjooajljZXkuK3or6XlgLzkuLpuYW1lc3BhY2VfZnJhbWVJZFxyXG4gICAqL1xyXG4gIHB1YmxpYyBnZXRGcmFtZUlkKHJlbGF0aXZlRnJhbWVJZDogc3RyaW5nKSB7XHJcbiAgICBpZiAoIXJlbGF0aXZlRnJhbWVJZCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5mcmFtZUlkO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMubmFtZXNwYWNlICYmIHRoaXMubmFtZXNwYWNlLmxlbmd0aCA+IDApIHtcclxuICAgICAgcmV0dXJuIGAke3RoaXMubmFtZXNwYWNlfV8ke3JlbGF0aXZlRnJhbWVJZH1gO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIHJlbGF0aXZlRnJhbWVJZDtcclxuICAgIH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICog5Yid5aeL5YyWUmVwb3NpdG9yeVxyXG4gICAqL1xyXG4gIHByaXZhdGUgaW5pdGlhbGl6ZVJlcG9zaXRvcnkoKSB7XHJcblxyXG4gICAgdGhpcy5yZXBvc2l0b3J5LnNldFBhZ2luYXRpb25Db25maWcodGhpcy5yZXBvc2l0b3J5LnBhZ2luYXRpb25JbmZvKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgaW5pdGlhbGl6ZUZvcm0oKSB7XHJcbiAgICAvLyDorr7nva5Gb3Jt6K+t6KiA5pyN5YqhXHJcbiAgICAvLyB0aGlzLmZvcm0uc2V0VHJhbnNsYXRlU2VydmljZSh0cmFuc2xhdGVTZXJ2aWNlKTtcclxuICAgIC8vIOWIneWni+WMlkZvcm3vvIzmj5Dlj5ZGb3JtQ29udHJvbOWumuS5ie+8jOa3u+WKoEZvcm1Db250cm9sXHJcbiAgICAvLyB0aGlzLmZvcm0uaW5pdCh0aGlzLmJpbmRpbmdEYXRhLCB0aGlzLm1ldGFkYXRhLmJpbmRpbmdUbywgdGhpcyk7XHJcbiAgICAvLyBGb3JtXHJcbiAgICB0aGlzLmZvcm0gPSB0aGlzLmluamVjdG9yLmdldDxGb3JtPihGb3JtLCBudWxsKTtcclxuICAgIGlmICh0aGlzLmZvcm0pIHtcclxuICAgICAgLy8g6K6+572uRm9ybeivreiogOacjeWKoVxyXG4gICAgICB0aGlzLmZvcm0uc2V0VHJhbnNsYXRlU2VydmljZSh0aGlzLmluamVjdG9yLmdldChUcmFuc2xhdGVUb2tlbiwgbnVsbCkpO1xyXG4gICAgICAvLyDliJ3lp4vljJZGb3Jt77yM5o+Q5Y+WRm9ybUNvbnRyb2zlrprkuYnvvIzmt7vliqBGb3JtQ29udHJvbFxyXG4gICAgICBjb25zdCBiaW5kaW5nUGF0aCA9IHRoaXMudmlld01vZGVsLmJpbmRpbmdQYXRoIHx8IHRoaXMubWV0YWRhdGEuYmluZGluZ1RvO1xyXG4gICAgICB0aGlzLmZvcm0uaW5pdCh0aGlzLmJpbmRpbmdEYXRhLCBiaW5kaW5nUGF0aCwgdGhpcyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGluaXRpYWxpemVTdGF0ZU1hY2hpbmUoKSB7XHJcbiAgICAvLyBTdGF0ZU1hY2hpbmUg54q25oCB5py66ZyA6KaB5Zyo57uR5a6a5pWw5o2u5LmL5ZCO5Yqg6L29XHJcbiAgICB0aGlzLnN0YXRlTWFjaGluZSA9IHRoaXMuaW5qZWN0b3IuZ2V0PFN0YXRlTWFjaGluZT4oU3RhdGVNYWNoaW5lLCBudWxsKTtcclxuICAgIGlmICh0aGlzLnN0YXRlTWFjaGluZSkge1xyXG4gICAgICB0aGlzLnN0YXRlTWFjaGluZS5pbml0aWFsaXplKHRoaXMsIHRoaXMudmFyaWFibGVQYXJzZVNlcnZpY2UpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBpbml0aWFsaXplQ29tbWFuZEJ1cygpIHtcclxuICAgIGNvbnN0IGhhbmRsZXJSZWdpc3RyeSA9IHRoaXMuaW5qZWN0b3IuZ2V0PENvbW1hbmRIYW5kbGVyUmVnaXN0cnk+KENvbW1hbmRIYW5kbGVyUmVnaXN0cnksXHJcbiAgICAgIG5ldyBDb21tYW5kSGFuZGxlclJlZ2lzdHJ5KHRoaXMubWV0YWRhdGEuY29tbWFuZEhhbmRsZXJzKSk7XHJcbiAgICBjb25zdCBleHRlbmRzUmVnaXN0cnkgPSB0aGlzLmluamVjdG9yLmdldDxDb21tYW5kSGFuZGxlckV4dGVuZGVyUmVnaXN0cnk+KENvbW1hbmRIYW5kbGVyRXh0ZW5kZXJSZWdpc3RyeSxcclxuICAgICAgbmV3IENvbW1hbmRIYW5kbGVyRXh0ZW5kZXJSZWdpc3RyeSh0aGlzLm1ldGFkYXRhLmNvbW1hbmRIYW5kbGVyRXh0ZW5kcykpO1xyXG4gICAgY29uc3QgY29tbWFuZEhhbmRsZXJGYWN0b3J5ID0gbmV3IENvbW1hbmRIYW5kbGVyRmFjdG9yeShoYW5kbGVyUmVnaXN0cnksIGV4dGVuZHNSZWdpc3RyeSwgdGhpcywgdGhpcy52YXJpYWJsZVBhcnNlU2VydmljZSk7XHJcbiAgICB0aGlzLmNvbW1hbmRCdXMgPSBuZXcgQ29tbWFuZEJ1cyhjb21tYW5kSGFuZGxlckZhY3RvcnkpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5Yid5aeL5YyWVmlld01vZGVsXHJcbiAgICogQHRvZG9cclxuICAgKiAx44CB6ZyA6KaB5oyJ54Wn5LiA5a6a55qE6aG65bqP6L+b6KGM5Yid5aeL5YyW77yM5ZCm5YiZ5L6d6LWW5peg5rOV5q2j56Gu5aSE55CG77ybXHJcbiAgICogMuOAgeaaguaXtuS9v+eUqGluaXTop6PlhrNDb250ZXh05ZKM5YW25LuW6YOo5YiG55qE5b6q546v5L6d6LWW6Zeu6aKY77yM5b6F5LyY5YyW77ybXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBpbml0aWFsaXplVmlld01vZGVsKCkge1xyXG4gICAgaWYgKCF0aGlzLm1ldGFkYXRhLmJpbmRpbmdUbykge1xyXG4gICAgICB0aGlzLm1ldGFkYXRhLmJpbmRpbmdUbyA9IHRoaXMudmlld01vZGVsLmJpbmRpbmdQYXRoO1xyXG4gICAgfVxyXG4gICAgdGhpcy52aWV3TW9kZWwuaW5pdCh0aGlzKTtcclxuICAgIHRoaXMucmVnVmlld01vZGVsKHRoaXMudmlld01vZGVsKTtcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiDliJ3lp4vljJZCaW5kaW5nRGF0YVxyXG4gICAqIEBzdW1tYXJ5XHJcbiAgICog6ICB6KGo5Y2V77yacmVwb3NpdG9yeU5hbWXkuLrnqbrvvIzlpI3liLblvZPliY1SZXBvc2l0b3J56YeM55qE5pWw5o2u77ybXHJcbiAgICog5paw6KGo5Y2V77yacmVwb3NpdG9yeU5hbWXmnInlgLzvvIzlvJXnlKjlhajlsYBCaW5kaW5nRGF0YemHjOeahOaVsOaNru+8m1xyXG4gICAqL1xyXG4gIHByaXZhdGUgaW5pdGlhbGl6ZUJpbmRpbmdEYXRhKCkge1xyXG4gICAgY29uc3QgcmVwb3NpdG9yeU5hbWUgPSB0aGlzLnJlcG9zaXRvcnkubmFtZTtcclxuICAgIGNvbnN0IGlzUnVuQXRIaWdoU3BlZWRNb2RlID0gdGhpcy5hcHBDb250ZXh0LnJ1bk1vZGUgPT09IFJ1bk1vZGUuaGlnaFNwZWVkO1xyXG4gICAgaWYgKHJlcG9zaXRvcnlOYW1lICYmIGlzUnVuQXRIaWdoU3BlZWRNb2RlKSB7XHJcbiAgICAgIGNvbnN0IHJlcG9zaXRvcnlCaW5kaW5nRGF0YSA9IHRoaXMuYXBwQ29udGV4dC5iaW5kaW5nRGF0YU1hbmFnZXIuZ2V0QmluZGluZ0RhdGFCeU5hbWUocmVwb3NpdG9yeU5hbWUpO1xyXG4gICAgICB0aGlzLmJpbmRpbmdEYXRhLmluaXRCeUJpbmRpbmdMaXN0KHJlcG9zaXRvcnlCaW5kaW5nRGF0YS5saXN0LCB0aGlzLnZpZXdNb2RlbC5iaW5kaW5nUGF0aCk7XHJcbiAgICAgIHRoaXMuYmluZGluZ0RhdGEucGFnaW5nSW5mbyA9IHJlcG9zaXRvcnlCaW5kaW5nRGF0YS5wYWdpbmdJbmZvO1xyXG4gICAgICB0aGlzLmJpbmRpbmdEYXRhLnNldERhdGFUeXBlSW5mbyh0aGlzLnJlcG9zaXRvcnkuZW50aXR5VHlwZUluZm8pO1xyXG4gICAgICBFbnRpdHlVdGlsLndhdGNoUmVwb3Npcm90eSh0aGlzLnJlcG9zaXRvcnksIHRoaXMuYmluZGluZ0RhdGEpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5iaW5kaW5nRGF0YS5pbml0QnlSZXBvc2l0b3J5KHRoaXMucmVwb3NpdG9yeSwgdGhpcy52aWV3TW9kZWwuYmluZGluZ1BhdGgpO1xyXG4gICAgICBFbnRpdHlVdGlsLndhdGNoUmVwb3Npcm90eSh0aGlzLnJlcG9zaXRvcnksIHRoaXMuYmluZGluZ0RhdGEpO1xyXG4gICAgICB0aGlzLmJpbmRpbmdEYXRhLmNoYW5nZXMuc3Vic2NyaWJlKChjaGFuZ2U6IENoYW5nZSkgPT4ge1xyXG4gICAgICAgIGlmIChjaGFuZ2UudHlwZSA9PT0gQ2hhbmdlVHlwZS5HbG9iYWxTZWxlY3Rpb25DaGFuZ2VkKSB7XHJcbiAgICAgICAgICB0aGlzLmFwcENvbnRleHQuaGFuZGxlU2VsZWN0Q2hhbmdlKGNoYW5nZSwgdGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiDliJ3lp4vljJZVSVN0YXRlXHJcbiAgICog5ZCI5bm26Lev55Sx5Y+C5pWw5YiwVUlTdGF0ZeS4rVxyXG4gICAqL1xyXG4gIHByaXZhdGUgaW5pdGlhbGl6ZVVpU3RhdGUoKSB7XHJcbiAgICBjb25zdCBpc0luRnJhbWV3b3JrID0gd2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZigncGxhdGZvcm0nKSA+IC0xO1xyXG4gICAgY29uc3QgcGFyYW1UeXBlVHJhbnNmb3JtID0gdGhpcy5pbmplY3Rvci5nZXQ8Ym9vbGVhbj4oUEFSQU1fVFlQRV9UUkFOU0ZPUk1fVE9LRU4sIGZhbHNlKTtcclxuICAgIC8vIOiOt+WPllVJU3RhdGVcclxuICAgIHRoaXMudWlTdGF0ZSA9IHRoaXMuaW5qZWN0b3IuZ2V0PFVJU3RhdGU+KFVJU3RhdGUsIG51bGwpO1xyXG4gICAgaWYgKCF0aGlzLnVpU3RhdGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdGhpcy51aVN0YXRlLnBhcmFtVHlwZVRyYW5zZm9ybSA9IHBhcmFtVHlwZVRyYW5zZm9ybTtcclxuICAgIHRoaXMudWlTdGF0ZS5pbml0aWFsaXplKHRoaXMpO1xyXG4gICAgLy8g6I635Y+W6Lev55Sx5Y+C5pWwXHJcbiAgICBjb25zdCB1cmwgPSAodGhpcy5hcHBDb250ZXh0ICYmIHRoaXMuYXBwQ29udGV4dC5yb3V0ZXIgJiYgdGhpcy5hcHBDb250ZXh0LnJvdXRlci51cmwpIHx8ICcnO1xyXG4gICAgY29uc3Qgcm91dGVyUGFyYW1TZXJ2aWNlID0gbmV3IFJvdXRlclBhcmFtU2VydmljZSgpO1xyXG4gICAgY29uc3Qgcm91dGVyUGFyYW1zID0gcm91dGVyUGFyYW1TZXJ2aWNlLmdldFBhcmFtcyh1cmwpO1xyXG5cclxuICAgIC8vIOWcqFVJU3RhdGXkuLrot6/nlLHlj4LmlbDliJvlu7rlsZ7mgKdcclxuICAgIE9iamVjdC5rZXlzKHJvdXRlclBhcmFtcykuZm9yRWFjaCgocHJvcE5hbWU6IHN0cmluZykgPT4ge1xyXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcy51aVN0YXRlLCBwcm9wTmFtZSwge1xyXG4gICAgICAgIGdldDogKCkgPT4ge1xyXG4gICAgICAgICAgcmV0dXJuIHJvdXRlclBhcmFtc1twcm9wTmFtZV07XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5rOo5YaM5a2QVmlld01vZGVsXHJcbiAgICogQHRvZG9cclxuICAgKiAx44CBcHJvcE5hbWXlhpnmrbvkuoZcclxuICAgKi9cclxuICBwdWJsaWMgcmVnVmlld01vZGVsKHZpZXdNb2RlbDogVmlld01vZGVsKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5hcHBDb250ZXh0ICYmIHRoaXMuYXBwQ29udGV4dC52aWV3TW9kZWxNYW5hZ2VyLmV4c2l0KHZpZXdNb2RlbC5uYW1lKSA9PT0gZmFsc2UpIHtcclxuICAgICAgdGhpcy5hcHBDb250ZXh0LnZpZXdNb2RlbE1hbmFnZXIucmVnaXN0ZXIodmlld01vZGVsLm5hbWUsIHZpZXdNb2RlbCk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBjbGFzc05hbWUgPSB2aWV3TW9kZWwuY29uc3RydWN0b3IubmFtZTtcclxuICAgIGNvbnN0IHBhcmVudENvbnRleHQgPSB0aGlzLnBhcmVudDtcclxuICAgIGxldCBwYXJlbnRWaWV3TW9kZWwgPSBudWxsO1xyXG4gICAgaWYgKHBhcmVudENvbnRleHQgJiYgcGFyZW50Q29udGV4dC52aWV3TW9kZWwpIHtcclxuICAgICAgcGFyZW50Vmlld01vZGVsID0gcGFyZW50Q29udGV4dC52aWV3TW9kZWw7XHJcbiAgICB9XHJcbiAgICBpZiAoIXBhcmVudFZpZXdNb2RlbCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICAvLyDkvJjlhYjkvb/nlKjnlJ/miJDlmajnlJ/miJDnmoRuYW1lXHJcbiAgICBjb25zdCBjaGlsZFZpZXdNb2RlbHMgPSBwYXJlbnRWaWV3TW9kZWxbJ2NoaWxkVmlld01vZGVscyddO1xyXG4gICAgbGV0IHZpZXdNb2RlbE5hbWUgPSBudWxsO1xyXG4gICAgaWYgKGNoaWxkVmlld01vZGVscykge1xyXG4gICAgICBjb25zdCBuYW1lID0gdmlld01vZGVsLmNvbnN0cnVjdG9yLm5hbWU7XHJcbiAgICAgIHZpZXdNb2RlbE5hbWUgPSBjaGlsZFZpZXdNb2RlbHNbdmlld01vZGVsLm5hbWVdIHx8IGNoaWxkVmlld01vZGVsc1tuYW1lXTtcclxuICAgIH0gZWxzZSBpZiAoY2xhc3NOYW1lLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICBjb25zdCBjbGFzc05hbWVUb2tlbnMgPSB2aWV3TW9kZWwubmFtZS5zcGxpdCgnLScpLm1hcCgobmFtZVRva2VuLCBpbmRleCkgPT4ge1xyXG4gICAgICAgIGlmIChpbmRleCA+IDAgJiYgbmFtZVRva2VuLmxlbmd0aCkge1xyXG4gICAgICAgICAgY29uc3QgcGFzaWNhbE5hbWUgPSBuYW1lVG9rZW4uY2hhckF0KDApLnRvTG9jYWxlVXBwZXJDYXNlKCkgKyBuYW1lVG9rZW4uc3Vic3RyKDEsIG5hbWVUb2tlbi5sZW5ndGggLSAxKTtcclxuICAgICAgICAgIHJldHVybiBwYXNpY2FsTmFtZTtcclxuICAgICAgICB9IGVsc2UgaWYgKGluZGV4ID09PSAwICYmIG5hbWVUb2tlbi5sZW5ndGgpIHtcclxuICAgICAgICAgIGNvbnN0IGNhbWVsTmFtZSA9IG5hbWVUb2tlbi5jaGFyQXQoMCkudG9Mb2NhbGVMb3dlckNhc2UoKSArIG5hbWVUb2tlbi5zdWJzdHIoMSwgbmFtZVRva2VuLmxlbmd0aCAtIDEpO1xyXG4gICAgICAgICAgcmV0dXJuIGNhbWVsTmFtZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5hbWVUb2tlbjtcclxuICAgICAgfSk7XHJcbiAgICAgIHZpZXdNb2RlbE5hbWUgPSBjbGFzc05hbWVUb2tlbnMuam9pbignJyk7XHJcbiAgICB9IGVsc2UgaWYgKHZpZXdNb2RlbFtcInJlbGF0ZUNoaWxkTmFtZVwiXSkge1xyXG4gICAgICAvLyDlop7liqDor6Xlj4LmlbDnmoTnm67nmoQgIOaYr+S4uuS6huino+aekOihqOWNleWPr+S7pei/m+ihjOWSjOeUn+aIkOWei+ebuOWQjOeahOWxgue6p+e7k+aehFxyXG4gICAgICB2aWV3TW9kZWxOYW1lID0gdmlld01vZGVsW1wicmVsYXRlQ2hpbGROYW1lXCJdO1xyXG4gICAgfVxyXG4gICAgLy8g5YW85a655Lqn5ZOB6YOo6ICB6KGo5Y2V55qE5YaZ5rOV77yM5aaC5p6c6ZyA6KaBdm0gbmFtZee7n+S4gO+8jOW6lOaMieeFp+atpOinhOWImVxyXG4gICAgaWYgKCF2aWV3TW9kZWxOYW1lKSB7XHJcbiAgICAgIHZpZXdNb2RlbE5hbWUgPSBjbGFzc05hbWVbMF0udG9Mb3dlckNhc2UoKSArIGNsYXNzTmFtZS5zdWJzdHJpbmcoMSwgY2xhc3NOYW1lLmxlbmd0aCk7XHJcbiAgICB9XHJcbiAgICBwYXJlbnRWaWV3TW9kZWxbJ3ZpZXdNb2RlbE5hbWVzJ10gPSBwYXJlbnRWaWV3TW9kZWxbJ3ZpZXdNb2RlbE5hbWVzJ10gfHwgW107XHJcbiAgICBwYXJlbnRWaWV3TW9kZWxbdmlld01vZGVsTmFtZV0gPSB2aWV3TW9kZWw7XHJcbiAgICBwYXJlbnRWaWV3TW9kZWxbJ3ZpZXdNb2RlbE5hbWVzJ10ucHVzaCh2aWV3TW9kZWxOYW1lKTtcclxuICAgIHZpZXdNb2RlbC5iaW5kVG9QYXJlbnQocGFyZW50Vmlld01vZGVsKTtcclxuICB9XHJcblxyXG4gIC8vICNlbmRyZWdpb25cclxuXHJcbiAgLyoqXHJcbiAgICog5qOA5p+l5piv5ZCm5Li65qC5RnJhbWVDb250ZXh0XHJcbiAgICogQHN1bW1hcnlcclxuICAgKiDmo4Dmn6Xor6VGcmFtZUNvbnRleHTmmK/kuI3mmK/miYDlnKhBcHBDb250ZXh05Lit55qE5qC5RnJhbWVDb250ZXh0XHJcbiAgICovXHJcbiAgcHVibGljIGlzUm9vdEZyYW1lQ29udGV4dCgpIHtcclxuICAgIHJldHVybiB0aGlzLnBhcmVudCA9PT0gbnVsbCB8fCAodGhpcy5hcHBDb250ZXh0LnJ1bk1vZGUgPT09IFJ1bk1vZGUuaGlnaFNwZWVkICYmIHRoaXMuZ2V0VmlydHVhbFJvb3RGcmFtZUNvbnRleHQoKS5mcmFtZUNvbXBvbmVudFsnaXNEaWFsb2dSb290Q29tcG9uZW50J10gPT09IHRydWUpO1xyXG4gIH1cclxuICAvKipcclxuICAgKiDpgJrov4duYW1lc3BhY2Xojrflj5blvZPliY3ooajljZXnmoRyb290LWZyYW1lY29udGV4dCjpnZ7mlbTkuKrooajljZUpXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICog5aaC5p6c5Li657uE5ZCI6KGo5Y2V77yM5YW25b2T5YmN6KGo5Y2V55qEcm9vdC1mcmFtZWNvbnRleHTkuLrljZXkuKrooajljZXnmoRmcmFtZWNvbnRleHTvvIzogIzpnZ7mlbTkuKrooajljZXnmoRmcmFtZWNvbnRleHRcclxuICAgKi9cclxuICBwdWJsaWMgZ2V0VmlydHVhbFJvb3RGcmFtZUNvbnRleHQoKSB7XHJcbiAgICBsZXQgZm9ybUZyYW1lQ29udGV4dDogRnJhbWVDb250ZXh0ID0gdGhpcztcclxuICAgIGxldCBwYXJlbnQgPSB0aGlzLnBhcmVudDtcclxuICAgIHdoaWxlIChwYXJlbnQpIHtcclxuICAgICAgLy8g5YW85a655rKh5pyJ6YeN5paw57yW6K+R55qE6KGo5Y2V77yM5aaC5p6c5Yik5patcGFyZW50Lm5hbWVzcGFjZeWtmOWcqOS8muWvvOiHtOiOt+WPluS4jeWIsHJvb3QtZnJhbWVjb250ZXh0XHJcbiAgICAgIGlmIChwYXJlbnQubmFtZXNwYWNlID09PSB0aGlzLm5hbWVzcGFjZSkge1xyXG4gICAgICAgIGZvcm1GcmFtZUNvbnRleHQgPSBwYXJlbnQ7XHJcbiAgICAgICAgcGFyZW50ID0gcGFyZW50LnBhcmVudDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZvcm1GcmFtZUNvbnRleHQ7XHJcbiAgfVxyXG5cclxuXHJcbiAgcHVibGljIGdldENvbnRleHRCeUlkKGlkZW50aWZ5OiBzdHJpbmcpOiBhbnkge1xyXG4gICAgcmV0dXJuIHRoaXMuYXBwQ29udGV4dC5nZXRDb250ZXh0QnlJZChpZGVudGlmeSk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0Vmlld01vZGVsKHZpZXdNb2RlbE5hbWU6IHN0cmluZyk6IFZpZXdNb2RlbCB7XHJcbiAgICBjb25zdCByZW5kZXJBcHBDb250ZXh0ID0gdGhpcy5hcHBDb250ZXh0O1xyXG4gICAgaWYgKHJlbmRlckFwcENvbnRleHQpIHtcclxuICAgICAgcmV0dXJuIHJlbmRlckFwcENvbnRleHQudmlld01vZGVsTWFuYWdlci5nZXRWaWV3TW9kZWxCeU5hbWUodmlld01vZGVsTmFtZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBhdHRhY2hWaWV3Q29tcG9uZW50KHZpZXdDb21wb25lbnQ6IEZyYW1lQ29tcG9uZW50KSB7XHJcbiAgICB0aGlzLmZyYW1lQ29tcG9uZW50ID0gdmlld0NvbXBvbmVudDtcclxuICAgIHRoaXMuYXBwQ29udGV4dC5mcmFtZUNvbXBvbmVudFJlZnJlc2hlci5yZWdGcmFtZUNvbXBvbmVudCh0aGlzLmZyYW1lSWQsIHRoaXMuZnJhbWVDb21wb25lbnQpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGludm9rZShhY3Rpb25QYXRoOiBzdHJpbmcsICRldmVudDogYW55KSB7XHJcbiAgICBjb25zdCBhY3Rpb25CaW5kaW5nUGF0aCA9IGFjdGlvblBhdGguc3BsaXQoJy4nKTtcclxuICAgIGNvbnN0IGFjdGlvbk5hbWUgPSBhY3Rpb25CaW5kaW5nUGF0aFthY3Rpb25CaW5kaW5nUGF0aC5sZW5ndGggLSAxXTtcclxuICAgIGNvbnN0IGJpbmRpbmdWaWV3TW9kZWwgPSBhY3Rpb25CaW5kaW5nUGF0aC5sZW5ndGggPT09IDEgPyB0aGlzLnZpZXdNb2RlbCA6XHJcbiAgICAgIHRoaXMuZ2V0Vmlld01vZGVsKGFjdGlvbkJpbmRpbmdQYXRoW2FjdGlvbkJpbmRpbmdQYXRoLmxlbmd0aCAtIDJdKTtcclxuICAgIGlmICghYmluZGluZ1ZpZXdNb2RlbCkge1xyXG4gICAgICBhbGVydChg5pyq5Yy56YWN5YiwJyR7YWN0aW9uUGF0aH0n5ZG95Luk55qE6KeG5Zu+5qih5Z6L77yM6K+35qOA5p+l5LqL5Lu25piv5ZCm6YWN572u5q2j56Gu44CCYCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYmluZGluZ1ZpZXdNb2RlbFthY3Rpb25OYW1lXSgkZXZlbnQpO1xyXG4gIH1cclxufVxyXG4iXX0=