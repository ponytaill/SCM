{"version":3,"file":"farris-ui-editor.js.map","sources":["ng://@farris/ui-editor/lib/editor.service.ts","ng://@farris/ui-editor/lib/TinyMCE.ts","ng://@farris/ui-editor/lib/Events.ts","ng://@farris/ui-editor/lib/utils/Utils.ts","ng://@farris/ui-editor/lib/utils/ScriptLoader.ts","ng://@farris/ui-editor/lib/editor.component.ts","ng://@farris/ui-editor/lib/editor.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class EditorService {\r\n  constructor() { }\r\n}\r\n","const getTinymce = () => {\r\n  const w = typeof window !== 'undefined' ? (window as any) : undefined;\r\n  return w && w.tinymce ? w.tinymce : null;\r\n};\r\n\r\nexport { getTinymce };\r\n","import { Output, EventEmitter } from '@angular/core';\r\n\r\nexport interface EventObj<T> {\r\n  event: T;\r\n  editor: any;\r\n}\r\n\r\nexport class Events {\r\n  @Output() public onBeforePaste: EventEmitter<EventObj<ClipboardEvent>> = new EventEmitter();\r\n  @Output() public onBlur: EventEmitter<EventObj<FocusEvent>> = new EventEmitter();\r\n  @Output() public onClick: EventEmitter<EventObj<MouseEvent>> = new EventEmitter();\r\n  @Output() public onContextMenu: EventEmitter<EventObj<MouseEvent>> = new EventEmitter();\r\n  @Output() public onCopy: EventEmitter<EventObj<ClipboardEvent>> = new EventEmitter();\r\n  @Output() public onCut: EventEmitter<EventObj<ClipboardEvent>> = new EventEmitter();\r\n  @Output() public onDblclick: EventEmitter<EventObj<MouseEvent>> = new EventEmitter();\r\n  @Output() public onDrag: EventEmitter<EventObj<DragEvent>> = new EventEmitter();\r\n  @Output() public onDragDrop: EventEmitter<EventObj<DragEvent>> = new EventEmitter();\r\n  @Output() public onDragEnd: EventEmitter<EventObj<DragEvent>> = new EventEmitter();\r\n  @Output() public onDragGesture: EventEmitter<EventObj<DragEvent>> = new EventEmitter();\r\n  @Output() public onDragOver: EventEmitter<EventObj<DragEvent>> = new EventEmitter();\r\n  @Output() public onDrop: EventEmitter<EventObj<DragEvent>> = new EventEmitter();\r\n  @Output() public onFocus: EventEmitter<EventObj<FocusEvent>> = new EventEmitter();\r\n  @Output() public onFocusIn: EventEmitter<EventObj<FocusEvent>> = new EventEmitter();\r\n  @Output() public onFocusOut: EventEmitter<EventObj<FocusEvent>> = new EventEmitter();\r\n  @Output() public onKeyDown: EventEmitter<EventObj<KeyboardEvent>> = new EventEmitter();\r\n  @Output() public onKeyPress: EventEmitter<EventObj<KeyboardEvent>> = new EventEmitter();\r\n  @Output() public onKeyUp: EventEmitter<EventObj<KeyboardEvent>> = new EventEmitter();\r\n  @Output() public onMouseDown: EventEmitter<EventObj<MouseEvent>> = new EventEmitter();\r\n  @Output() public onMouseEnter: EventEmitter<EventObj<MouseEvent>> = new EventEmitter();\r\n  @Output() public onMouseLeave: EventEmitter<EventObj<MouseEvent>> = new EventEmitter();\r\n  @Output() public onMouseMove: EventEmitter<EventObj<MouseEvent>> = new EventEmitter();\r\n  @Output() public onMouseOut: EventEmitter<EventObj<MouseEvent>> = new EventEmitter();\r\n  @Output() public onMouseOver: EventEmitter<EventObj<MouseEvent>> = new EventEmitter();\r\n  @Output() public onMouseUp: EventEmitter<EventObj<MouseEvent>> = new EventEmitter();\r\n  @Output() public onPaste: EventEmitter<EventObj<ClipboardEvent>> = new EventEmitter();\r\n  @Output() public onSelectionChange: EventEmitter<EventObj<Event>> = new EventEmitter();\r\n  @Output() public onActivate: EventEmitter<EventObj<any>> = new EventEmitter();\r\n  @Output() public onAddUndo: EventEmitter<EventObj<any>> = new EventEmitter();\r\n  @Output() public onBeforeAddUndo: EventEmitter<EventObj<any>> = new EventEmitter();\r\n  @Output() public onBeforeExecCommand: EventEmitter<EventObj<any>> = new EventEmitter();\r\n  @Output() public onBeforeGetContent: EventEmitter<EventObj<any>> = new EventEmitter();\r\n  @Output() public onBeforeRenderUI: EventEmitter<EventObj<any>> = new EventEmitter();\r\n  @Output() public onBeforeSetContent: EventEmitter<EventObj<any>> = new EventEmitter();\r\n  @Output() public onChange: EventEmitter<EventObj<any>> = new EventEmitter();\r\n  @Output() public onClearUndos: EventEmitter<EventObj<any>> = new EventEmitter();\r\n  @Output() public onDeactivate: EventEmitter<EventObj<any>> = new EventEmitter();\r\n  @Output() public onDirty: EventEmitter<EventObj<any>> = new EventEmitter();\r\n  @Output() public onExecCommand: EventEmitter<EventObj<any>> = new EventEmitter();\r\n  @Output() public onGetContent: EventEmitter<EventObj<any>> = new EventEmitter();\r\n  @Output() public onHide: EventEmitter<EventObj<any>> = new EventEmitter();\r\n  @Output() public onInit: EventEmitter<EventObj<any>> = new EventEmitter();\r\n  @Output() public onLoadContent: EventEmitter<EventObj<any>> = new EventEmitter();\r\n  @Output() public onNodeChange: EventEmitter<EventObj<any>> = new EventEmitter();\r\n  @Output() public onPostProcess: EventEmitter<EventObj<any>> = new EventEmitter();\r\n  @Output() public onPostRender: EventEmitter<EventObj<any>> = new EventEmitter();\r\n  @Output() public onPreInit: EventEmitter<EventObj<any>> = new EventEmitter();\r\n  @Output() public onPreProcess: EventEmitter<EventObj<any>> = new EventEmitter();\r\n  @Output() public onProgressState: EventEmitter<EventObj<any>> = new EventEmitter();\r\n  @Output() public onRedo: EventEmitter<EventObj<any>> = new EventEmitter();\r\n  @Output() public onRemove: EventEmitter<EventObj<any>> = new EventEmitter();\r\n  @Output() public onReset: EventEmitter<EventObj<any>> = new EventEmitter();\r\n  @Output() public onSaveContent: EventEmitter<EventObj<any>> = new EventEmitter();\r\n  @Output() public onSetAttrib: EventEmitter<EventObj<any>> = new EventEmitter();\r\n  @Output() public onObjectResizeStart: EventEmitter<EventObj<any>> = new EventEmitter();\r\n  @Output() public onObjectResized: EventEmitter<EventObj<any>> = new EventEmitter();\r\n  @Output() public onObjectSelected: EventEmitter<EventObj<any>> = new EventEmitter();\r\n  @Output() public onSetContent: EventEmitter<EventObj<any>> = new EventEmitter();\r\n  @Output() public onShow: EventEmitter<EventObj<any>> = new EventEmitter();\r\n  @Output() public onSubmit: EventEmitter<EventObj<any>> = new EventEmitter();\r\n  @Output() public onUndo: EventEmitter<EventObj<any>> = new EventEmitter();\r\n  @Output() public onVisualAid: EventEmitter<EventObj<any>> = new EventEmitter();\r\n}\r\n\r\nexport const validEvents: (keyof Events)[] = [\r\n  'onActivate',\r\n  'onAddUndo',\r\n  'onBeforeAddUndo',\r\n  'onBeforeExecCommand',\r\n  'onBeforeGetContent',\r\n  'onBeforeRenderUI',\r\n  'onBeforeSetContent',\r\n  'onBeforePaste',\r\n  'onBlur',\r\n  'onChange',\r\n  'onClearUndos',\r\n  'onClick',\r\n  'onContextMenu',\r\n  'onCopy',\r\n  'onCut',\r\n  'onDblclick',\r\n  'onDeactivate',\r\n  'onDirty',\r\n  'onDrag',\r\n  'onDragDrop',\r\n  'onDragEnd',\r\n  'onDragGesture',\r\n  'onDragOver',\r\n  'onDrop',\r\n  'onExecCommand',\r\n  'onFocus',\r\n  'onFocusIn',\r\n  'onFocusOut',\r\n  'onGetContent',\r\n  'onHide',\r\n  'onInit',\r\n  'onKeyDown',\r\n  'onKeyPress',\r\n  'onKeyUp',\r\n  'onLoadContent',\r\n  'onMouseDown',\r\n  'onMouseEnter',\r\n  'onMouseLeave',\r\n  'onMouseMove',\r\n  'onMouseOut',\r\n  'onMouseOver',\r\n  'onMouseUp',\r\n  'onNodeChange',\r\n  'onObjectResizeStart',\r\n  'onObjectResized',\r\n  'onObjectSelected',\r\n  'onPaste',\r\n  'onPostProcess',\r\n  'onPostRender',\r\n  'onPreProcess',\r\n  'onProgressState',\r\n  'onRedo',\r\n  'onRemove',\r\n  'onReset',\r\n  'onSaveContent',\r\n  'onSelectionChange',\r\n  'onSetAttrib',\r\n  'onSetContent',\r\n  'onShow',\r\n  'onSubmit',\r\n  'onUndo',\r\n  'onVisualAid'\r\n];\r\n","import { EventEmitter } from '@angular/core';\r\nimport { EditorComponent } from '../editor.component';\r\nimport { validEvents } from '../Events';\r\n\r\nconst bindHandlers = (ctx: EditorComponent, editor: any): void => {\r\n  validEvents.forEach((eventName) => {\r\n    const eventEmitter: EventEmitter<any> = ctx[eventName];\r\n    editor.on(eventName.substring(2), (event: any) => ctx.ngZone.run(() => eventEmitter.emit({ event, editor })));\r\n  });\r\n};\r\n\r\nlet unique = 0;\r\n\r\nconst uuid = (prefix: string): string => {\r\n  const date = new Date();\r\n  const time = date.getTime();\r\n  const random = Math.floor(Math.random() * 1000000000);\r\n\r\n  unique++;\r\n\r\n  return prefix + '_' + random + unique + String(time);\r\n};\r\n\r\nconst isTextarea = (element?: Element): element is HTMLTextAreaElement => {\r\n  return typeof element !== 'undefined' && element.tagName.toLowerCase() === 'textarea';\r\n};\r\n\r\nconst normalizePluginArray = (plugins?: string | string[]): string[] => {\r\n  if (typeof plugins === 'undefined' || plugins === '') {\r\n    return [];\r\n  }\r\n\r\n  return Array.isArray(plugins) ? plugins : plugins.split(' ');\r\n};\r\n\r\nconst mergePlugins = (initPlugins: string | string[], inputPlugins?: string | string[]) =>\r\n  normalizePluginArray(initPlugins).concat(normalizePluginArray(inputPlugins));\r\n\r\n// tslint:disable-next-line:no-empty\r\nconst noop: (...args: any[]) => void = () => { };\r\n\r\nconst isNullOrUndefined = (value: any): value is null | undefined => value === null || value === undefined;\r\n\r\nexport {\r\n  bindHandlers,\r\n  uuid,\r\n  isTextarea,\r\n  normalizePluginArray,\r\n  mergePlugins,\r\n  noop,\r\n  isNullOrUndefined\r\n};\r\n","import { uuid } from './Utils';\r\n\r\nexport type callbackFn = () => void;\r\nexport interface IStateObj {\r\n  listeners: callbackFn[];\r\n  scriptId: string;\r\n  scriptLoaded: boolean;\r\n}\r\n\r\nconst createState = (): IStateObj => {\r\n  return {\r\n    listeners: [],\r\n    scriptId: uuid('tiny-script'),\r\n    scriptLoaded: false\r\n  };\r\n};\r\n\r\ninterface ScriptLoader {\r\n  load: (doc: Document, url: string, callback: callbackFn) => void;\r\n  reinitialize: () => void;\r\n}\r\n\r\nconst CreateScriptLoader = (): ScriptLoader => {\r\n  let state: IStateObj = createState();\r\n\r\n  const injectScriptTag = (scriptId: string, doc: Document, url: string, callback: callbackFn) => {\r\n    const scriptTag = doc.createElement('script');\r\n    scriptTag.referrerPolicy = 'origin';\r\n    scriptTag.type = 'application/javascript';\r\n    scriptTag.id = scriptId;\r\n    scriptTag.src = url;\r\n\r\n    const handler = () => {\r\n      scriptTag.removeEventListener('load', handler);\r\n      callback();\r\n    };\r\n    scriptTag.addEventListener('load', handler);\r\n    if (doc.head) {\r\n      doc.head.appendChild(scriptTag);\r\n    }\r\n  };\r\n\r\n  const load = (doc: Document, url: string, callback: callbackFn) => {\r\n    if (state.scriptLoaded) {\r\n      callback();\r\n    } else {\r\n      state.listeners.push(callback);\r\n      if (!doc.getElementById(state.scriptId)) {\r\n        injectScriptTag(state.scriptId, doc, url, () => {\r\n          state.listeners.forEach((fn) => fn());\r\n          state.scriptLoaded = true;\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  // Only to be used by tests.\r\n  const reinitialize = () => {\r\n    state = createState();\r\n  };\r\n\r\n  return {\r\n    load,\r\n    reinitialize\r\n  };\r\n};\r\n\r\nconst ScriptLoader = CreateScriptLoader();\r\n\r\nexport {\r\n  ScriptLoader\r\n};","import { isPlatformBrowser } from '@angular/common';\r\nimport { AfterViewInit, Component, ElementRef, forwardRef, Inject, Input, NgZone, OnDestroy, PLATFORM_ID, InjectionToken,\r\n    Optional, Injector, LOCALE_ID, OnInit, HostBinding, ViewEncapsulation, Renderer2 } from '@angular/core';\r\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\r\nimport { Observable } from 'rxjs';\r\nimport { getTinymce } from './TinyMCE';\r\nimport { bindHandlers, isTextarea, mergePlugins, uuid, noop, isNullOrUndefined } from './utils/Utils';\r\nimport { Events } from './Events';\r\nimport { ScriptLoader } from './utils/ScriptLoader';\r\nimport { EditorService } from './editor.service';\r\nimport { NavigationEnd, NavigationStart, Router } from '@angular/router';\r\nimport { Convert2HtmlEditorToolbars, OverLayHiddenService, RichTextEditorToolbars } from '@farris/ui-common';\r\n\r\nexport const TINYMCE_SCRIPT_SRC = new InjectionToken<string>('TINYMCE_SCRIPT_SRC');\r\n\r\nconst EDITOR_COMPONENT_VALUE_ACCESSOR = {\r\n    provide: NG_VALUE_ACCESSOR,\r\n    useExisting: forwardRef(() => EditorComponent),\r\n    multi: true\r\n};\r\n\r\n@Component({\r\n    selector: 'farris-editor',\r\n    template: '<ng-template></ng-template>',\r\n    styleUrls: ['./editor.component.scss'],\r\n    providers: [EDITOR_COMPONENT_VALUE_ACCESSOR],\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\nexport class EditorComponent extends Events implements OnInit, AfterViewInit, ControlValueAccessor, OnDestroy {\r\n    @HostBinding('class') rootClass = 'farris-editor';\r\n    @HostBinding('class.farris-editor-disabled')\r\n    get disabledClass(): boolean {\r\n        return this._disabled;\r\n    }\r\n    @HostBinding('class.farris-editor-readonly')\r\n    get readonlyClass(): boolean {\r\n        return this._readOnly;\r\n    }\r\n    @Input()\r\n    set disabled(val) {\r\n        this._disabled = val;\r\n        if (this._editor && this._editor.initialized) {\r\n            this._editor.setMode(val ? 'readonly' : 'design');\r\n            this.setDivElement(val);\r\n            this.editorBlured();\r\n        }\r\n    }\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n    @Input() customToolbar = false;\r\n\r\n    @Input()\r\n    set readOnly(val) {\r\n        this._readOnly = val;\r\n        if (this._editor && this._editor.initialized) {\r\n            this._editor.setMode(val ? 'readonly' : 'design');\r\n            this.setDivElement(val);\r\n            this.editorBlured();\r\n        }\r\n    }\r\n\r\n\r\n    get readOnly() {\r\n        return this._readOnly;\r\n    }\r\n\r\n    get editor() {\r\n        return this._editor;\r\n    }\r\n\r\n    public ngZone: NgZone;\r\n    localeIds = {\r\n        'en': 'es',\r\n        'zh-CHS': 'zh_CN'\r\n    };\r\n    currentLocale = 'zh-CHS';\r\n\r\n    @Input() public cloudChannel = '5';\r\n    @Input() public apiKey = 'no-api-key';\r\n    // @Input() public init: Record<string, any> | undefined;\r\n    @Input() public editorId = '';\r\n    @Input() public initialValue: string | undefined;\r\n    @Input() public outputFormat: 'html' | 'text' | undefined;\r\n    @Input() public inline: boolean | undefined;\r\n    @Input() public tagName: string | undefined;\r\n    @Input() public plugins: string | undefined;\r\n    @Input() public toolbar: RichTextEditorToolbars;\r\n    @Input() public modelEvents = 'change keyup undo redo';\r\n    @Input() public height = 100;\r\n    /**\r\n     * @Deprecated è¯·ä½¿ç¨ maxHeight\r\n     */\r\n    @Input() public autoresizeMaxHeight = 800;\r\n    /** åªè¯»æ¶çæå¤§é«åº¦ï¼é»è®¤ä¸º 500px */\r\n    @Input() public maxHeight = 800;\r\n\r\n    @Input()\r\n    @HostBinding('class.farris-editor-border') showBorder = true;\r\n\r\n    _fontFamilyList: Array<string> = ['Microsoft YaHei', 'Helvetica Neue', 'PingFang SC',\r\n                                        'sans-serif', 'simsun', 'serif', 'SimHei', 'arial',\r\n                                    'helvetica', 'arial black', 'avant garde', 'book antiqua', 'palatino', 'FangSong'];\r\n    @Input()\r\n    set fontFamilyList(val) {\r\n        if (val) {\r\n            this._fontFamilyList = val;\r\n        }\r\n    }\r\n\r\n    get fontFamilyList() {\r\n        return this._fontFamilyList;\r\n    }\r\n\r\n    _defaultFontFamily = 'Microsoft YaHei';\r\n    @Input()\r\n    set defaultFontFamily(val) {\r\n        if (val) {\r\n            this._defaultFontFamily = val;\r\n        }\r\n    }\r\n\r\n    get defaultFontFamily() {\r\n        return this._defaultFontFamily;\r\n    }\r\n\r\n    @Input() beforeUpload: (fileObj?: {}) => Observable<any>;\r\n\r\n    private init: any;\r\n    private _elementRef: ElementRef;\r\n    private _element: Element | undefined;\r\n    private _disabled: boolean | undefined;\r\n    private _readOnly: boolean | undefined;\r\n    private _editor: any;\r\n    private _divElement: Element | undefined;\r\n\r\n    private onTouchedCallback = noop;\r\n    private onChangeCallback = noop;\r\n    editorService: EditorService;\r\n    public _render: Renderer2;\r\n\r\n    private router: Router;\r\n    private __WEBPAGEURL__ = '';\r\n    private editorBodyCls = 'mce-content-body';\r\n    private overLayService: OverLayHiddenService = null;\r\n    constructor(\r\n        elementRef: ElementRef,\r\n        ngZone: NgZone,\r\n        @Inject(PLATFORM_ID) private platformId: Object,\r\n        @Optional() private injector: Injector,\r\n        @Optional() @Inject(TINYMCE_SCRIPT_SRC) private tinymceScriptSrc?: string\r\n    ) {\r\n        super();\r\n        this._elementRef = elementRef;\r\n        this.ngZone = ngZone;\r\n        this._render = this.injector.get(Renderer2);\r\n        this.initialise = this.initialise.bind(this);\r\n        if (this.injector) {\r\n            this.currentLocale = this.injector.get(LOCALE_ID);\r\n            this.editorService = this.injector.get(EditorService);\r\n\r\n\r\n            this.router = this.injector.get(Router, null);\r\n            if (this.router) {\r\n                this.router.events.subscribe((e: any) => {\r\n                    if (e instanceof NavigationStart) {\r\n                        if (!this.__WEBPAGEURL__) {\r\n                            this.__WEBPAGEURL__ = e.url;\r\n                        }\r\n                    } else if (e instanceof NavigationEnd) {\r\n                        if (this.__WEBPAGEURL__ === e.url && this.editor) {\r\n                            // console.log(this.editor);\r\n                            this.editor.destroy();\r\n                            this.initialise(!1);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n        this.overLayService = new OverLayHiddenService();\r\n    }\r\n\r\n    ngOnInit() {\r\n        const _this = this;\r\n        this.init = {\r\n            selector: 'textarea',\r\n            menubar: false,\r\n            inline: false,\r\n            // statusbar: false,\r\n            plugins: [\r\n                'advlist autolink lists link image charmap print preview anchor textcolor powerpaste',\r\n                'searchreplace visualblocks code fullscreen',\r\n                'insertdatetime media table image imagetools code help nonbreaking'\r\n            ],\r\n            language: this.localeIds[this.currentLocale],\r\n            // toolbarå®ä¹å¿«æ·æ çæä½, | ç¨æ¥åéæ¾ç¤º\r\n            toolbar: 'undo redo | formatselect fontsizeselect fontselect | \\\r\n                        bold italic underline strikethrough forecolor backcolor link | \\\r\n                        alignleft aligncenter alignright alignjustify | \\\r\n                        bullist numlist outdent indent table image | removeformat',\r\n            min_height: 100,\r\n            // max_height: 400,\r\n            block_formats: 'Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6',\r\n            fontsize_formats: '12px 14px 16px 18px 24px 36px 48px 56px 72px',\r\n            font_formats: 'å¾®è½¯éé»=Microsoft YaHei,Helvetica Neue,PingFang SC,sans-serif;è¹æè¹æ¹=PingFang SC,Microsoft YaHei,sans-serif;\\\r\n                            å®ä½=simsun,serif;ä»¿å®ä½=FangSong,serif;é»ä½=SimHei,sans-serif;Arial=arial,helvetica,sans-serif;\\\r\n                            Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;',\r\n            images_upload_url: 'postAcceptor.php',\r\n            images_upload_handler: function (blobInfo, success, failure) {\r\n                if (_this.beforeUpload) {\r\n                    _this.beforeUpload(blobInfo).subscribe(res => {\r\n                            success(res);\r\n                        },\r\n                        error => {\r\n                            failure(error);\r\n                            return;\r\n                        }\r\n                    );\r\n                } else {\r\n                    const reader = new FileReader();\r\n                    reader.readAsDataURL(blobInfo.blob());\r\n                    reader.onload = function () {\r\n                        // tfs 553121\r\n                        // success(this.result);\r\n                    };\r\n                }\r\n            },\r\n            branding: false,\r\n            readonly: false,\r\n            setup: null,\r\n            end_container_on_empty_block: true,\r\n            powerpaste_word_import: 'propmt',\r\n            powerpaste_html_import: 'propmt',\r\n            powerpaste_allow_local_images: true,\r\n            paste_data_images: true,\r\n            autoresize_min_height: 100,\r\n            autoresize_max_height: this.maxHeight,\r\n            autoresize_on_init: true,\r\n            autoresize_overflow_padding: 0,\r\n            nonbreaking_force_tab: true,\r\n            default_link_target: '_blank'\r\n        };\r\n    }\r\n\r\n    \r\n\r\n\r\n    private editorBlured() {\r\n        setTimeout(() => {\r\n            const tinyBody = this._editor.iframeElement.contentWindow.document.getElementsByClassName(this.editorBodyCls);\r\n            if (tinyBody && tinyBody.length) {\r\n                tinyBody[0].blur();\r\n            }\r\n        }, 0);\r\n    }\r\n\r\n\r\n    public writeValue(value: string | null): void {\r\n        if (this._editor && this._editor.initialized) {\r\n            this._editor.setContent(isNullOrUndefined(value) ? '' : value);\r\n            this._divElement.innerHTML = (isNullOrUndefined(value) ? '' : value);\r\n        } else {\r\n            this.initialValue = value === null ? undefined : value;\r\n        }\r\n\r\n        if (!this.__WEBPAGEURL__ && this.router) {\r\n            this.__WEBPAGEURL__ = this.router.url;\r\n        }\r\n    }\r\n\r\n    public registerOnChange(fn: (_: any) => void): void {\r\n        this.onChangeCallback = fn;\r\n    }\r\n\r\n    public registerOnTouched(fn: any): void {\r\n        this.onTouchedCallback = fn;\r\n    }\r\n\r\n    public setDisabledState(isDisabled: boolean) {\r\n        if (this._editor) {\r\n            this._editor.setMode(isDisabled ? 'readonly' : 'design');\r\n        } else if (isDisabled) {\r\n            this.init = { ...this.init, readonly: true };\r\n        }\r\n    }\r\n\r\n    public ngAfterViewInit() {\r\n        if (isPlatformBrowser(this.platformId)) {\r\n            this.editorId = this.editorId || uuid('tiny-angular');\r\n            this.inline = typeof this.inline !== 'undefined' ?\r\n                            (typeof this.inline === 'boolean' ? this.inline : true) : this.init && this.init.inline;\r\n            this.createElement();\r\n            this.init.selector = '#' + this.editorId;\r\n            if (getTinymce()) {\r\n                this.initialise();\r\n            } else if (this._element && this._element.ownerDocument) {\r\n                ScriptLoader.load(\r\n                    this._element.ownerDocument,\r\n                    this.getScriptSrc(),\r\n                    this.initialise\r\n                );\r\n            }\r\n\r\n\r\n            this._elementRef.nativeElement.querySelect\r\n        }\r\n    }\r\n\r\n    public ngOnDestroy() {\r\n        this.__WEBPAGEURL__ = '';\r\n        if (this._editor) {\r\n            this._editor.remove();\r\n            this._editor = null;\r\n            this._divElement = null;\r\n        }\r\n\r\n        if (this.overLayService) {\r\n            this.overLayService.destory(this._elementRef.nativeElement);\r\n            this.overLayService = null;\r\n        }\r\n    }\r\n\r\n    public createElement() {\r\n        const tagName = typeof this.tagName === 'string' ? this.tagName : 'div';\r\n        this._element = document.createElement(this.inline ? tagName : 'textarea');\r\n        this._element.setAttribute('class', 'd-none');\r\n        this._divElement = document.createElement('div');\r\n        if (this.showBorder) {\r\n            this._divElement.className = 'farris-editor-placeholder';\r\n        } else {\r\n            this._divElement.className = 'farris-editor-placeholder farris-editor-placeholder-border';\r\n        }\r\n        \r\n        if (this.maxHeight) {\r\n            this._render.setStyle(this._divElement, 'max-height', this.maxHeight + 'px');\r\n        }\r\n\r\n        if (this._element) {\r\n            this._element.id = this.editorId;\r\n            if (isTextarea(this._element)) {\r\n                this._element.style.visibility = 'hidden';\r\n            }\r\n            this._elementRef.nativeElement.appendChild(this._element);\r\n            this._elementRef.nativeElement.appendChild(this._divElement);\r\n        }\r\n    }\r\n\r\n    public initialise(isfirstInit = true) {\r\n        const finalInit = {\r\n            ...this.init,\r\n            target: this._element,\r\n            inline: this.inline,\r\n            // readonly: this.disabled || this.readOnly,\r\n            plugins: mergePlugins(this.init && this.init.plugins, this.plugins),\r\n            toolbar: this.init && this.init.toolbar,\r\n            height: this.height,\r\n            autoresize_max_height: this.maxHeight,\r\n            max_height : this.maxHeight,\r\n            setup: (editor: any) => {\r\n                this._editor = editor;\r\n                editor.on('init', (e) => {\r\n                    this.initEditor(editor, isfirstInit);\r\n                    if (this._readOnly || this._disabled) {\r\n                        this._editor.setMode('readonly');\r\n                    } else {\r\n                        this._editor.setMode('design');\r\n                    }\r\n                    setTimeout(() => {\r\n                        this.setDivElement(this._readOnly || this._disabled);\r\n                        e.target.editorCommands.execCommand(\"fontName\", false, this.defaultFontFamily);\r\n\r\n                        // tfs Bug 506916: é«çº§å¯ææ¬ï¼æå¥è¡¨æ ¼ï¼æå¼å¶ä»èåè¡¨æ ¼å·¥å·æ ä»æ¾ç¤º\r\n                        // tfs Bug 532085: é«çº§å¯ææ¬ï¼ç¼è¾æ°æ®éæ©å¾çä¹åï¼æ»å¨é¼ æ ï¼ç¹å»å¶ä»åºåï¼å¾çä¸çå·¥å·æ ä¸æ¶å¤±\r\n                        const hiddenToolbar = () => {\r\n                            const _toolbar: any = document.querySelectorAll('[aria-label=\"Inline toolbar\"]');\r\n                            if (_toolbar && _toolbar.length) {\r\n                                _toolbar.forEach((t: any) => {\r\n                                    t.style.display = 'none';\r\n                                });\r\n                            }\r\n                        }\r\n\r\n                        this._elementRef.nativeElement.querySelector('.mce-container-body').addEventListener('click', hiddenToolbar);\r\n                        this.overLayService.registerMouseEvent(this._elementRef.nativeElement, hiddenToolbar, { mouseDown: false, scroll: true });\r\n\r\n                    }, 0);\r\n                });\r\n                editor.on('PastePostProcess', (data) => {\r\n                    this.replaceFontFamily(data.node);\r\n                });\r\n                bindHandlers(this, editor);\r\n\r\n                if (this.init && typeof this.init.setup === 'function') {\r\n                    this.init.setup(editor);\r\n                }\r\n            }\r\n        };\r\n\r\n        if (this.customToolbar) {\r\n            finalInit.toolbar = Convert2HtmlEditorToolbars('advanced', this.toolbar);\r\n        }\r\n\r\n        if (isTextarea(this._element)) {\r\n            this._element.style.visibility = '';\r\n        }\r\n\r\n        this.ngZone.runOutsideAngular(() => {\r\n            setTimeout(() => {\r\n                getTinymce().init(finalInit);\r\n            }, 100);\r\n        });\r\n    }\r\n\r\n    refresh() {\r\n        if (this.editor) {\r\n            this.editor.destroy();\r\n        }\r\n        this.initialise(false);\r\n    }\r\n\r\n    setToolbar(toolbar: RichTextEditorToolbars) {\r\n        this.toolbar = toolbar;\r\n        this.refresh();\r\n    }\r\n\r\n    private setDivElement(readonly) {\r\n        if (readonly) {\r\n            this._divElement.classList.remove('d-none');\r\n            this._render.removeStyle(this._divElement, 'height');\r\n        } else {\r\n            this._divElement.classList.add('d-none');\r\n            this._render.setStyle(this._divElement, 'height', this.height + 'px');\r\n        }\r\n        // if(this._editor && this._editor.initialized){\r\n        //   this._divElement.innerHTML = this._editor.getContent({ format: this.outputFormat });\r\n        // }\r\n    }\r\n\r\n    private getScriptSrc() {\r\n        return isNullOrUndefined(this.tinymceScriptSrc) ?\r\n            `https://cdn.tiny.cloud/1/${this.apiKey}/tinymce/${this.cloudChannel}/tinymce.min.js` :\r\n            this.tinymceScriptSrc;\r\n    }\r\n\r\n    private initEditor(editor: any, isfirstInit) {\r\n\r\n        editor.on('blur', () => this.ngZone.run(() => this.onTouchedCallback()));\r\n        editor.on(this.modelEvents, () => {\r\n            this.ngZone.run(() => {\r\n                this.onChangeCallback(editor.getContent({ format: this.outputFormat }));\r\n                this._divElement.innerHTML = editor.getContent({ format: this.outputFormat });\r\n            });\r\n            // console.log(editor.getContent({ format: this.outputFormat }));\r\n        });\r\n        if (typeof this.initialValue === 'string' && isfirstInit) {\r\n            this.ngZone.run(() => {\r\n                editor.setContent(this.initialValue);\r\n                this._divElement.innerHTML = this.initialValue;\r\n                this.onChangeCallback(editor.getContent({ format: this.outputFormat }));\r\n            });\r\n        }\r\n    }\r\n\r\n    private replaceFontFamily(el) {\r\n        if (el.children && el.children.length) {\r\n            for (let k = 0; k < el.children.length; k++) {\r\n                this.replaceFontFamily(el.children[k]);\r\n            }\r\n        }\r\n        let ff = el.style.fontFamily;\r\n        let face = el.getAttribute('face');\r\n        if (ff) {\r\n            let fonts = ff.split(',');\r\n            let r = this.getFontFamilyArray(fonts);\r\n            el.style.fontFamily = r;\r\n        }\r\n        if (face) {\r\n            let faces = face.split(',');\r\n            let r = this.getFontFamilyArray(faces);\r\n            el.setAttribute('face', r);\r\n        }\r\n\r\n    }\r\n    private getFontFamilyArray(fonts, zcFontArr = this._fontFamilyList) {\r\n        let ss = [];\r\n        fonts.forEach(n => {\r\n            if (zcFontArr.find(f => f === this.trim(n))) {\r\n                ss.push(this.trim(n));\r\n            }\r\n\r\n        });\r\n        let r = ss.join(',');\r\n        if (!r) {\r\n            r = this._defaultFontFamily;\r\n        }\r\n        return r;\r\n    }\r\n\r\n    private trim(str) {\r\n        return str.replace(/^\\s*|\\s*$/g, '');\r\n    }\r\n}\r\n","import { NgModule, InjectionToken, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { EditorComponent, TINYMCE_SCRIPT_SRC } from './editor.component';\r\nimport { EditorService } from './editor.service';\r\n\r\n//  EditorModule.forRoot('/platform/common/web/assets/tinymce/tinymce.min.js'),\r\n@NgModule({\r\n  declarations: [EditorComponent],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule\r\n  ],\r\n  exports: [EditorComponent],\r\n  providers:[\r\n    EditorService\r\n  ]\r\n})\r\nexport class EditorModule {\r\n  static forRoot(path: string): ModuleWithProviders {\r\n    return {\r\n      ngModule: EditorModule,\r\n      providers: [\r\n        {provide: TINYMCE_SCRIPT_SRC, useValue: path}\r\n      ]\r\n    }\r\n\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}
