/**
 * @fileoverview added by tsickle
 * Generated from: lib/tab-usergroup-mid/usergroupunselect.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, EventEmitter, Output, ViewChild, TemplateRef, Optional } from '@angular/core';
import { ApiLocalService } from '../../utils/api-service';
import { DatagridComponent } from '@farris/ui-datagrid';
import * as _ from 'lodash-es';
import { FavoritesTool } from '../../utils/favorites.tool';
import { noDataImg } from '../../assets/resource';
import { DataLoadingService } from '../../utils/loading-service';
import { FilterOrg } from '../../utils/user.type';
import { switchMap, tap } from 'rxjs/operators';
import { FilterOrgTool } from '../../utils/filterorg.tool';
export class UserGroupUnSelectComponent {
    /**
     * @param {?} apiService
     * @param {?} favoritesTool
     */
    constructor(apiService, favoritesTool) {
        this.apiService = apiService;
        this.favoritesTool = favoritesTool;
        this.idField = 'userId';
        this.items = [];
        this.orgId = '';
        this.userIds = '';
        this.unSelectedUserIds = '';
        this.enablePagination = true;
        this.userGroupId = '';
        this.selectionsChange = new EventEmitter();
        this.searchResultChange = new EventEmitter();
        this.selections = [];
        this.cloneUserIds = '';
        this.cloneSelections = [];
        this.pEnableChildHierarchy = true;
        this.pIncludeCurrentUser = true;
        this.favoritesList = [];
        this.noDataImg = noDataImg;
        this.allChecked = false;
        this.itemsBackup = [];
        this.allIndexId = 'allIndexId';
        // 是否显示用户编号
        this.showUserCode = true;
        this.showPagesPanel = false;
        this.pageList = [10, 20, 50, 100, 200, 500, 1000, 2000, 5000];
        this.filterPersonWithOrgUrl = '/api/runtime/sys/v1.0/absUserOrg/org/System_organization/getOrgByUserFiler';
        this.filterOrgArr = [];
        this.filterOrgId = null;
        this.isEmptyFilterOrg = false;
        this.currentFilterInfo = null;
        this.allIndexId = Math.random().toString(16).substring(3, 10);
        this.filterOrgTool = new FilterOrgTool();
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set enableChildHierarchy(value) {
        this.pEnableChildHierarchy = value;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set includeCurrentUser(value) {
        this.pIncludeCurrentUser = value;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        /** @type {?} */
        let title = '';
        if (this.multiSelect) {
            title = '全选';
        }
        this.columns = [
            {
                field: 'name', template: this.opCell, title, width: '150'
            }
        ];
        if (this.filterOrgTool) {
            this.filterOrgSub = this.filterOrgTool.filterOrgSubject.subscribe((/**
             * @param {?} data
             * @return {?}
             */
            data => {
                this.currentFilterInfo = data;
            }));
        }
        if (this.favoritesTool) {
            this.favoritesTool.favoritesSubject.subscribe((/**
             * @param {?} data
             * @return {?}
             */
            data => {
                this.favoritesList = data;
                this.unSelectedListLoad();
            }));
        }
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        // this.pageChangeCheck();
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    ngOnChanges(changes) {
        if (changes.includeCurrentUser && typeof changes.includeCurrentUser.currentValue === 'boolean'
            && !changes.includeCurrentUser.firstChange) {
            this.assembleDataByUserGroupId();
        }
        if (changes.enableChildHierarchy && typeof changes.enableChildHierarchy.currentValue === 'boolean'
            && !changes.enableChildHierarchy.firstChange) {
            this.assembleDataByUserGroupId();
        }
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        this.filterOrgSub.unsubscribe();
    }
    /**
     * @private
     * @return {?}
     */
    emitSelections() {
        /** @type {?} */
        const emitObj = {
            selections: this.selections,
            token: 'unDatagrid'
        };
        this.selectionsChange.emit(emitObj);
    }
    /**
     * @return {?}
     */
    restoreSelections() {
        this.selections = _.cloneDeep(this.cloneSelections);
        // this.emitSelections();
        this.toggleChecked();
    }
    // 人员展示翻页触发查询（！）
    /**
     * @param {?} size
     * @return {?}
     */
    switchPage(size) {
        this.pageIndex = size.pageIndex;
        this.pageSize = size.pageSize;
        if (this.searchPage) {
            this.assembleDataBySearch();
        }
        else {
            this.assembleDataByUserGroupId();
        }
    }
    /**
     * @param {?} e
     * @param {?} item
     * @return {?}
     */
    toggleFavorites(e, item) {
        this.favoritesTool.toggleFavorites(e, item);
    }
    /**
     * @return {?}
     */
    assembleDataBySearch() {
        /** @type {?} */
        const requestParam = {
            pageSize: this.pageSize,
            pageIndex: this.pageIndex,
            withAllOrg: this.pEnableChildHierarchy ? 1 : 0,
            notGetStopUser: !this.includeStopUser,
            notGetCurrentUser: !this.pIncludeCurrentUser,
            orderField: this.orderField,
            userTypeMode: this.userTypeMode,
            filterId: this.filterId
        };
        // 全局搜索or局部
        if (!this.globalSearch) {
            requestParam.orgId = this.orgId;
        }
        this.apiService.getPersonnelBySearch(this.absUserOrgUrl, this.absOrgType, this.searchText, requestParam).subscribe((/**
         * @param {?} res
         * @return {?}
         */
        (res) => {
            /** @type {?} */
            const rcResData = res ? res.data : [];
            this.unSelectedList = rcResData;
            this.pageTotalAll = res.totalCount;
            this.pageTotal = Math.ceil(this.pageTotalAll / this.pageSize);
            if (this.pageTotal === 0) {
                this.pageTotal = 1;
            }
            this.unSelectedListLoad();
            this.searchResultChange.emit(true);
        }));
    }
    /**
     * @return {?}
     */
    assembleDataByUserGroupId() {
        if (this.dataLoadingService) {
            this.dataLoadingService.show(this.loadingServiceMessage);
        }
        /** @type {?} */
        const requestParam = {
            withAllGroup: this.pEnableChildHierarchy ? true : false,
            notGetStopUser: !this.includeStopUser,
            notGetCurrentUser: !this.pIncludeCurrentUser,
            orderField: this.orderField,
            userTypeMode: this.userTypeMode,
            filterId: this.filterId,
            groupId: this.userGroupId,
        };
        if (this.enablePagination) {
            requestParam.pageSize = this.pageSize;
            requestParam.pageIndex = this.pageIndex;
        }
        // 通过组织进行人员的二次过滤
        if (this.filterOrgId) {
            requestParam.orgId = this.filterOrgId;
        }
        if (this.withPermission) {
            requestParam.withPermission = true;
            requestParam.authOp = 'UserManage';
        }
        this.apiService.getPersonnelByUserGroupId(this.absUserOrgUrl, requestParam).subscribe((/**
         * @param {?} res
         * @return {?}
         */
        (res) => {
            /** @type {?} */
            const rcResData = res ? res.data : [];
            this.unSelectedList = rcResData;
            this.pageTotalAll = res.totalCount;
            this.pageTotal = Math.ceil(this.pageTotalAll / this.pageSize);
            if (this.pageTotal === 0) {
                this.pageTotal = 1;
            }
            this.unSelectedListLoad();
            if (this.filterOrgId) {
                /** @type {?} */
                const currentFilterOrg = this.filterOrgArr.find((/**
                 * @param {?} arr
                 * @return {?}
                 */
                (arr) => { return arr.id == this.filterOrgId; }));
                if (currentFilterOrg) {
                    this.filterOrgTool.emitFilterOrg(this.filterOrgInfo + currentFilterOrg['name']);
                }
            }
            else {
                this.filterOrgTool.emitFilterOrg(this.presetFilterOrgInfo);
            }
            if (this.dataLoadingService) {
                this.dataLoadingService.hide();
            }
        }));
    }
    // 显示组织过滤漏斗的场景下，用户分组树内切换用户分组时首先获取人员所属的全部组织，再获取人员数据
    /**
     * @param {?} size
     * @return {?}
     */
    assembleDataByUserGroupIdAndGetFilterOrg(size) {
        if (!this.userGroupId) {
            return;
        }
        if (this.dataLoadingService) {
            this.dataLoadingService.show(this.loadingServiceMessage);
        }
        this.pageIndex = size.pageIndex;
        this.pageSize = size.pageSize;
        this.filterOrgArr = [];
        this.filterOrgId = null;
        /** @type {?} */
        const filterRequestParam = {
            withAllOrg: true,
            getUserInfo: false,
            notGetStopUser: !this.includeStopUser,
            notGetCurrentUser: !this.pIncludeCurrentUser,
            orderField: this.orderField,
            userTypeMode: this.userTypeMode,
            filterId: this.filterId,
            groupId: this.userGroupId,
        };
        // 首先获取当前用户分组下所有成员所属的组织
        /** @type {?} */
        const getFilterOrg$ = this.apiService.getFilterOrganization(this.filterPersonWithOrgUrl, this.absOrgType, filterRequestParam);
        /** @type {?} */
        const requestParam = {
            withAllGroup: this.pEnableChildHierarchy ? true : false,
            notGetStopUser: !this.includeStopUser,
            notGetCurrentUser: !this.pIncludeCurrentUser,
            orderField: this.orderField,
            userTypeMode: this.userTypeMode,
            filterId: this.filterId,
            groupId: this.userGroupId,
        };
        if (this.enablePagination) {
            requestParam.pageSize = this.pageSize;
            requestParam.pageIndex = this.pageIndex;
        }
        if (this.withPermission) {
            requestParam.withPermission = true;
            requestParam.authOp = 'UserManage';
        }
        // 然后获取当前用户分组下的所有成员
        /** @type {?} */
        const getPersonnel$ = this.apiService.getPersonnelByUserGroupId(this.absUserOrgUrl, requestParam);
        getFilterOrg$.pipe(switchMap((/**
         * @param {?} resData
         * @return {?}
         */
        (resData) => {
            if (resData && resData.data && resData.data.length > 0) {
                this.isEmptyFilterOrg = false;
                /** @type {?} */
                let filterOrg;
                this.filterOrgArr = resData.data.map((/**
                 * @param {?} data
                 * @return {?}
                 */
                (data) => {
                    filterOrg = new FilterOrg();
                    filterOrg.id = data['orgId'];
                    filterOrg.value = data['code'];
                    filterOrg.name = data['name'];
                    return filterOrg;
                }));
                this.filterOrgTool.emitFilterOrg(this.presetFilterOrgInfo);
            }
            else {
                this.isEmptyFilterOrg = true;
            }
            return getPersonnel$.pipe(tap((/**
             * @param {?} res
             * @return {?}
             */
            (res) => {
                /** @type {?} */
                const rcResData = res ? res.data : [];
                this.unSelectedList = rcResData;
                this.pageTotalAll = res.totalCount;
                this.pageTotal = Math.ceil(this.pageTotalAll / this.pageSize);
                if (this.pageTotal === 0) {
                    this.pageTotal = 1;
                }
                this.unSelectedListLoad();
            })));
        })), tap((/**
         * @return {?}
         */
        () => {
            if (this.dataLoadingService) {
                this.dataLoadingService.hide();
            }
        }), (/**
         * @param {?} error
         * @return {?}
         */
        (error) => {
            if (this.dataLoadingService) {
                this.dataLoadingService.hide();
            }
            throw new Error(this.filterOrgErrorInfo);
        }))).subscribe();
    }
    /**
     * datagrid用于数据展示
     * @param {?=} initLoad
     * @return {?}
     */
    unSelectedListLoad(initLoad = false) {
        this.items = [];
        this.unSelectedList.forEach((/**
         * @param {?} res
         * @return {?}
         */
        res => {
            // const indexId = Math.random().toString(16).substring(2);
            // const item = {
            //     abbreviation: res.abbreviation,
            //     code: res.code,
            //     defaultOrgId: res.defaultOrgId,
            //     defaultOrgPath: res.defaultOrgPath,
            //     ext1: res.ext1,
            //     ext2: res.ext2,
            //     fullPathName: res.fullPathName,
            //     name: res.name,
            //     orgTypeId: res.orgTypeId,
            //     secLevel: res.secLevel,
            //     sortOrder: res.sortOrder,
            //     state: res.state,
            //     su: res.su,
            //     userId: res.userId,
            //     orgAllPath: res.orgAllPath,
            //     inFavorites: false,
            //     type: 'people',
            //     checked: false,
            //     indexId
            // };
            /** @type {?} */
            const item = _.cloneDeep(res);
            item.checked = false;
            item.inFavorites = false;
            item.indexId = Math.random().toString(16).substring(2);
            if (this._isInArray(res[this.idField], this.idField, this.selections) !== -1) {
                item.checked = true;
            }
            if (this._isInArray(res[this.idField], this.idField, this.favoritesList) !== -1) {
                item.inFavorites = true;
            }
            item.displayName = !!this.showUserCode ? ('[' + item.code + ']' + item.name) : item.name;
            this.items.push(item);
            this.itemsBackup.push(item);
        }));
        this.toggleChecked();
        this.items = this.items.slice();
        this.cdRef ? this.cdRef.detectChanges() : null;
    }
    /**
     * @return {?}
     */
    toggleAll() {
        if (!this.allChecked) {
            this.checkAll();
        }
        else {
            this.unCheckAll();
        }
        this.emitSelections();
    }
    /**
     * @param {?} data
     * @return {?}
     */
    toggleOne(data) {
        if (data.checked) {
            this.unSelectLine(data);
        }
        else {
            this.selectLine(data);
        }
        this.emitSelections();
    }
    /**
     * 全选后处理
     * @return {?}
     */
    checkAll() {
        this.items.forEach((/**
         * @param {?} item
         * @return {?}
         */
        item => {
            this._insertOneIntoSelections(item);
            item.checked = true;
        }));
    }
    /**
     * 全部取消
     * @return {?} void
     */
    unCheckAll() {
        this.items.forEach((/**
         * @param {?} item
         * @return {?}
         */
        item => {
            this.selections.forEach((/**
             * @param {?} selection
             * @param {?} index
             * @return {?}
             */
            (selection, index) => {
                if (item[this.idField] === selection[this.idField]) {
                    this.selections.splice(index, 1);
                }
            }));
            item.checked = false;
        }));
    }
    /**
     * 当前行选中
     * @param {?} data 当前行的数据（）
     * @return {?}
     */
    selectLine(data) {
        if (this.multiSelect) {
            this._insertOneIntoSelections(data);
        }
        else {
            this.userIds = '';
            this.selections = [];
            this.items.forEach((/**
             * @param {?} item
             * @return {?}
             */
            item => {
                if (item.checked) {
                    item.checked = false;
                }
            }));
            this._insertOneIntoSelections(data);
        }
        if (this.isAllChecked()) {
            this.allChecked = true;
        }
    }
    /**
     * 单选取消选中
     * @param {?} data 取消选中行
     * @return {?}
     */
    unSelectLine(data) {
        /** @type {?} */
        const index = this._isInArray(data[this.idField], this.idField, this.selections);
        if (index > -1) {
            this.selections.splice(index, 1);
        }
        if (this.allChecked) {
            this.allChecked = false;
        }
    }
    /**
     *  取消选中
     * @param {?} $event 取消勾选的数据
     * @return {?}
     */
    cancelSelections($event) {
        if (this.items.findIndex((/**
         * @param {?} item
         * @return {?}
         */
        item => item[this.idField] === $event.id)) === -1) {
            return;
        }
        this.items.forEach((/**
         * @param {?} item
         * @return {?}
         */
        item => {
            if (item[this.idField] === $event.id) {
                item.checked = false;
            }
        }));
        this.selections.forEach((/**
         * @param {?} selection
         * @param {?} index
         * @return {?}
         */
        (selection, index) => {
            if ($event.id === selection[this.idField]) {
                this.selections.splice(index, 1);
            }
        }));
        this.allChecked = false;
    }
    /**
     * 全部取消勾选
     * @return {?}
     */
    clearCheckeds() {
        this.items.forEach((/**
         * @param {?} item
         * @return {?}
         */
        item => {
            item.checked = false;
        }));
        this.allChecked = false;
        this.selections = [];
    }
    /**
     * @return {?}
     */
    clearUserIds() {
        this.userIds = '';
    }
    /**
     * 选中并插入当前行数据到右侧
     * @param {?} data 当前行的数据
     * @return {?}
     */
    _insertOneIntoSelections(data) {
        // 如果当前数据已经移入右侧数据，则返回。
        if (this._isInArray(data[this.idField], this.idField, this.selections) > -1) {
            return;
        }
        this.selections.push(data);
        this.selections = this.selections.slice();
    }
    /**
     * 判断是否在内
     * @param {?} value value
     * @param {?} field field
     * @param {?} array array
     * @return {?} 位置索引
     */
    _isInArray(value, field, array) {
        if (!field || !value) {
            throw new Error(this.validElementsInfo);
        }
        return array.findIndex((/**
         * @param {?} item
         * @return {?}
         */
        item => value === item[field]));
    }
    /**
     * 翻页检查：人员展示区的勾选状态与已选人员区是否对应
     * @return {?}
     */
    toggleChecked() {
        this.items.forEach((/**
         * @param {?} item
         * @return {?}
         */
        item => {
            if (this._isInArray(item[this.idField], this.idField, this.selections) > -1) {
                item.checked = true;
            }
            else {
                item.checked = false;
            }
        }));
        if (this.isAllChecked()) {
            this.allChecked = true;
        }
        else {
            this.allChecked = false;
        }
    }
    /**
     * @private
     * @return {?}
     */
    isAllChecked() {
        /** @type {?} */
        let count = 0;
        /** @type {?} */
        let allChecked = false;
        this.items.forEach((/**
         * @param {?} item
         * @return {?}
         */
        item => {
            this.selections.forEach((/**
             * @param {?} selection
             * @return {?}
             */
            selection => {
                if (item[this.idField] === selection[this.idField]) {
                    count += 1;
                }
            }));
        }));
        if (this.items.length === count && count > 0) {
            allChecked = true;
        }
        return allChecked;
    }
    /**
     * @param {?} index
     * @param {?} item
     * @return {?}
     */
    trackByFn(index, item) {
        return item.userId;
    }
    /**
     * @param {?} dir
     * @param {?} num
     * @return {?}
     */
    turnOverPage(dir, num) {
        if ((dir === 'pre' && this.pageIndex === 1) || (dir === 'next' && this.pageIndex === this.pageTotal)) {
            return;
        }
        this.pageIndex = this.pageIndex + num;
        this.switchPage({
            pageIndex: this.pageIndex,
            pageSize: this.pageSize,
        });
    }
    /**
     * @param {?} inputEl
     * @param {?} maxNumber
     * @return {?}
     */
    beforePageIndexChange(inputEl, maxNumber) {
        /** @type {?} */
        const target = (/** @type {?} */ (inputEl.target));
        /** @type {?} */
        const currentPageNumber = Number(target.value);
        if (currentPageNumber > maxNumber) {
            target.value = maxNumber;
        }
        else {
            if (currentPageNumber < 1) {
                target.value = 1;
            }
        }
        this.pageIndex = Number(target.value);
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    onMouseEnter($event) {
        this.showPagesPanel = true;
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    onMouseLeave($event) {
        this.showPagesPanel = false;
    }
    /**
     * @param {?} $event
     * @param {?} num
     * @return {?}
     */
    changePageSizeHandler($event, num) {
        $event.stopPropagation();
        if (num == this.pageSize) {
            return;
        }
        this.showPagesPanel = false;
        this.pageSize = num;
        this.switchPage({
            pageIndex: 1,
            pageSize: this.pageSize,
        });
    }
}
UserGroupUnSelectComponent.decorators = [
    { type: Component, args: [{
                selector: 'lib-usergroup-unselect',
                template: "<ng-template #unSelectDatagrid [ngIf]=\"false\"></ng-template>\r\n<ng-template #opCell [ngIf]=\"false\"></ng-template>\r\n<!-- \u517C\u5BB9\u4FDD\u7559 -->\r\n\r\n<div class=\"candidate\">\r\n    <div class=\"candidate-title\">\r\n        <div class=\"custom-control custom-checkbox mb-2\" *ngIf=\"multiSelect && items.length > 0\">\r\n            <input class=\"custom-control-input\" [id]=\"allIndexId\" type=\"checkbox\" [(ngModel)]=\"allChecked\">\r\n            <label class=\"custom-control-label\" [for]=\"allIndexId\" (click)=\"toggleAll()\">{{'personnelSelector.tabCommon.checkAll' | locale}}</label>\r\n        </div>\r\n        <div>&nbsp;</div>\r\n    </div>\r\n    <perfect-scrollbar *ngIf=\"items.length!==0\">\r\n        <div class=\"candidate-content\">\r\n            <div *ngFor=\"let data of items; let i = index;trackBy: trackByFn\" class=\"s-selectedPerson\">\r\n                <div class=\"custom-control custom-checkbox\">\r\n                    <input class=\"custom-control-input\" [(ngModel)]=\"data.checked\" [id]=\"data.indexId\" type=\"checkbox\">\r\n                    <label class=\"custom-control-label\" [for]=\"data.indexId\" (click)=\"toggleOne(data)\">\r\n                        <div style=\"display: flex; height: 32px; margin: -21px 0 0 24px;\">\r\n                            <farris-avatar [avatarWidth]=\"32\" [avatarHeight]=\"32\" [cover]=\"data.ext1\" [readonly]=\"true\">\r\n                            </farris-avatar>\r\n                            <div style=\"margin-left: 11px; margin-top: -1px; padding-right: 10px; overflow: hidden;\">\r\n                                <p class=\"candidate-content-title\" title=\"{{data.displayName}}\">\r\n                                    {{data.displayName}}</p>\r\n                                <p class=\"candidate-content-orgpath\" title=\"{{data.orgAllPath}}\">\r\n                                    {{data.orgAllPath}}</p>\r\n                            </div>\r\n                        </div>\r\n                    </label>\r\n                </div>\r\n                <span class=\"f-icon f-icon-star\" *ngIf=\"enableFavorites\" [class.default-light-color]=\"data.inFavorites\"\r\n                    [class.default-dark-color]=\"!data.inFavorites\" (click)=\"toggleFavorites($event, data)\"></span>\r\n            </div>\r\n\r\n        </div>\r\n    </perfect-scrollbar>\r\n    <div class=\"pagination-container\" *ngIf=\"items.length!==0\">\r\n        <ul class=\"ngx-pagination pagination pager-viewmode-simple\">\r\n            <li class=\"pagination-pagelist\" style=\"padding: 0;\" *ngIf=\"showPageList\">\r\n                <div class=\"dropup dropdown-right pg-pagelist\"\r\n                    [ngClass]=\"{'show': showPagesPanel}\"\r\n                    (mouseenter)=\"onMouseEnter($event)\" (mouseleave)=\"onMouseLeave($event)\">\r\n                    <div class=\"pg-pagelist-info\">\r\n                        <span class=\"pagelist-text\">{{'pagination.pagelist.firstText' | locale}}</span><b\r\n                            class=\"cur-pagesize\">{{ pageSize }}</b><span\r\n                            class=\"pagelist-text\">{{'pagination.pagelist.lastText' | locale}}</span><i\r\n                            class=\"f-icon f-icon-dropdown\"></i>\r\n                    </div>\r\n                    <div class=\"dropdown-menu\" [ngClass]=\"{'show': showPagesPanel}\" style=\"margin-bottom: -1px;\">\r\n                        <li class=\"dropdown-item\" [ngClass]=\"{'active':num == pageSize}\"\r\n                            *ngFor=\"let num of pageList\" (click)=\"changePageSizeHandler($event, num)\">\r\n                            <span>{{ num }}</span>\r\n                        </li>\r\n                    </div>\r\n                </div>\r\n            </li>\r\n            <li class=\"page-item d-flex flex-fill\"></li>\r\n            <li class=\"page-item\" [class.disabled]=\"pageIndex === 1\" (click)=\"turnOverPage('pre', -1)\">\r\n                <span class=\"page-link border-0\">\r\n                    <span class=\"f-icon f-page-pre\"></span>\r\n                </span>\r\n            </li>\r\n            <li class=\"page-item\">\r\n                <input id=\"farris-datagrid-gotopagenumber\" min=\"1\" type=\"number\" max=\"{{pageTotal}}\"\r\n                    [(ngModel)]=\"pageIndex\" style=\"width: 38px;\" (keyup.enter)=\"switchPage({pageIndex: pageIndex, pageSize: pageSize})\"\r\n                    (input)=\"beforePageIndexChange($event, pageTotal)\">\r\n            </li>\r\n            <li class=\"page-item page-separator\" style=\"margin-left: 10px\"> / </li>\r\n            <li class=\"page-item page-total\" style=\"margin-left: 5px\">\r\n                <span style=\"font-size: 16px; font-weight: 600;\"> {{pageTotal}}</span>\r\n            </li>\r\n            <li class=\"page-item\" [class.disabled]=\"pageIndex === pageTotal\" (click)=\"turnOverPage('next', 1)\">\r\n                <a class=\"page-link border-0\">\r\n                    <span class=\"f-icon f-page-next\"></span>\r\n                </a>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n    <div *ngIf=\"items.length===0\" [ngStyle]=\"{'background-image': noDataImg}\" class=\"fp-candidate-nodata\">\r\n        {{'personnelSelector.tabCommon.noUserData' | locale}}</div>\r\n</div>",
                styles: [":host{display:-webkit-box;display:flex;height:100%;-webkit-box-flex:1;flex:1;overflow:hidden;position:static}.candidate{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;width:100%}.candidate .fp-candidate-nodata{width:100px;height:100px;text-align:center;background-repeat:no-repeat;background-size:contain;margin:110px auto 0;color:#b4bccc;padding-top:110px}.candidate .group_blank_15{width:100%;height:15px}.candidate .candidate-content{clear:both}.candidate .s-selectedPerson:first-child{margin-top:0}.candidate .s-selectedPerson{min-width:240px;float:left;width:calc(100% - 6px);position:relative;height:40px;padding:5px 12px;margin:0 3px 1px}.candidate .s-selectedPerson:hover{background:#eef5ff;border-radius:5px}.candidate .f-icon{font-size:14px}.candidate .s-selectedPerson .f-icon-star{position:absolute;top:13px;right:12px;font-size:14px}.candidate .s-selectedPerson .default-light-color{color:#f7b500}.candidate .s-selectedPerson .default-dark-color{color:#d8dce6}.candidate .candidate-content-title{margin:0;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;font-size:13px}.candidate .candidate-content-orgpath{margin:0;font-size:12px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;color:#c7ccd7}.candidate .candidate-title{-webkit-box-pack:justify;justify-content:space-between;height:35px;margin-bottom:18px}.candidate .candidate-title .custom-control{margin:10px 0 0 15px;line-height:35px}.candidate .s-selectedPerson .custom-control-label::before{top:7px}.candidate .candidate-title .title-clearall{margin:5px 15px 0 0;color:#2a87ff;cursor:pointer;line-height:35px}.candidate .candidate-title div{line-height:35px;margin:5px 10px 0 0;color:#2a87ff;cursor:pointer}.candidate .saved-group{position:absolute;width:111px;height:26px;line-height:26px;background:#eaedf2;border-radius:5px;text-align:center;font-size:13px;bottom:10px;left:13px;z-index:999;color:#909ba2;cursor:pointer}.candidate .saved-group:hover{color:#2a87ff;background:#eaf4ff}.candidate .saved-group:hover .f-icon{color:#2a87ff}.candidate .saved-group .f-icon{color:#909ba2;margin-right:5px;cursor:pointer;font-size:14px}.s-group-dialog-container{height:520px;width:600px;position:fixed;left:50%;top:50%;margin:-260px 0 0 -300px;background:#fff;padding:15px 20px;border-radius:10px;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;z-index:9999}.s-group-dialog-container .s-personnel-group-footer{margin-top:15px}.s-help-bg{background:rgb(0 0 0 / 15%);position:fixed;left:0;top:0;right:0;bottom:0;z-index:9997}.s-group-dialog-container .s-personnel-group-title{font-size:17px;line-height:24px;color:#2d2f33;font-weight:600}.s-group-dialog-container .s-personnel-group-title .f-icon{float:right;font-size:20px;color:#878d99;margin-top:3px;cursor:pointer}.s-group-dialog-container .s-personnel-group-footer .fr{float:right;height:32px}"]
            }] }
];
/** @nocollapse */
UserGroupUnSelectComponent.ctorParameters = () => [
    { type: ApiLocalService },
    { type: FavoritesTool, decorators: [{ type: Optional }] }
];
UserGroupUnSelectComponent.propDecorators = {
    unSelectDatagrid: [{ type: ViewChild, args: ['unSelectDatagrid',] }],
    opCell: [{ type: ViewChild, args: ['opCell',] }],
    idField: [{ type: Input }],
    items: [{ type: Input }],
    absUserOrgUrl: [{ type: Input }],
    absOrgType: [{ type: Input }],
    pageIndex: [{ type: Input }],
    pageSize: [{ type: Input }],
    pageTotalAll: [{ type: Input }],
    multiSelect: [{ type: Input }],
    noSelectToRight: [{ type: Input }],
    searchText: [{ type: Input }],
    unSelectedList: [{ type: Input }],
    pageTotal: [{ type: Input }],
    enableChildHierarchy: [{ type: Input }],
    orgId: [{ type: Input }],
    userIds: [{ type: Input }],
    unSelectedUserIds: [{ type: Input }],
    includeStopUser: [{ type: Input }],
    searchPage: [{ type: Input }],
    includeCurrentUser: [{ type: Input }],
    enablePagination: [{ type: Input }],
    enableFavorites: [{ type: Input }],
    busNum: [{ type: Input }],
    orderField: [{ type: Input }],
    userTypeMode: [{ type: Input }],
    globalSearch: [{ type: Input }],
    userGroupId: [{ type: Input }],
    showPageList: [{ type: Input }],
    dataLoadingService: [{ type: Input }],
    presetFilterOrgInfo: [{ type: Input }],
    filterOrgInfo: [{ type: Input }],
    filterOrgErrorInfo: [{ type: Input }],
    validElementsInfo: [{ type: Input }],
    withPermission: [{ type: Input }],
    selectionsChange: [{ type: Output }],
    searchResultChange: [{ type: Output }]
};
if (false) {
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.unSelectDatagrid;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.opCell;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.idField;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.items;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.absUserOrgUrl;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.absOrgType;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.pageIndex;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.pageSize;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.pageTotalAll;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.multiSelect;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.noSelectToRight;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.searchText;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.unSelectedList;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.pageTotal;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.orgId;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.userIds;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.unSelectedUserIds;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.includeStopUser;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.searchPage;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.enablePagination;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.enableFavorites;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.busNum;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.orderField;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.userTypeMode;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.globalSearch;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.userGroupId;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.showPageList;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.dataLoadingService;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.presetFilterOrgInfo;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.filterOrgInfo;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.filterOrgErrorInfo;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.validElementsInfo;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.withPermission;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.selectionsChange;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.searchResultChange;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.columns;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.selections;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.cloneUserIds;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.cloneSelections;
    /**
     * @type {?}
     * @private
     */
    UserGroupUnSelectComponent.prototype.pEnableChildHierarchy;
    /**
     * @type {?}
     * @private
     */
    UserGroupUnSelectComponent.prototype.pIncludeCurrentUser;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.favoritesList;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.noDataImg;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.allChecked;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.itemsBackup;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.allIndexId;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.filterId;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.showUserCode;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.cdRef;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.showPagesPanel;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.pageList;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.loadingServiceMessage;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.filterPersonWithOrgUrl;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.filterOrgArr;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.filterOrgId;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.isEmptyFilterOrg;
    /**
     * @type {?}
     * @private
     */
    UserGroupUnSelectComponent.prototype.filterOrgTool;
    /**
     * @type {?}
     * @private
     */
    UserGroupUnSelectComponent.prototype.filterOrgSub;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.currentFilterInfo;
    /**
     * @type {?}
     * @private
     */
    UserGroupUnSelectComponent.prototype.apiService;
    /**
     * @type {?}
     * @private
     */
    UserGroupUnSelectComponent.prototype.favoritesTool;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXNlcmdyb3VwdW5zZWxlY3QuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy91aS1wZXJzb25uZWwtc2VsZWN0b3IvIiwic291cmNlcyI6WyJsaWIvdGFiLXVzZXJncm91cC1taWQvdXNlcmdyb3VwdW5zZWxlY3QuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUNILFNBQVMsRUFBRSxLQUFLLEVBQUUsWUFBWSxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQXlCLFdBQVcsRUFDM0QsUUFBUSxFQUNyQyxNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0seUJBQXlCLENBQUM7QUFDMUQsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDeEQsT0FBTyxLQUFLLENBQUMsTUFBTSxXQUFXLENBQUM7QUFDL0IsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLDRCQUE0QixDQUFDO0FBQzNELE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUNsRCxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSw2QkFBNkIsQ0FBQztBQUNqRSxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFDbEQsT0FBTyxFQUFFLFNBQVMsRUFBRSxHQUFHLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUNoRCxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sNEJBQTRCLENBQUM7QUFRM0QsTUFBTSxPQUFPLDBCQUEwQjs7Ozs7SUF5RW5DLFlBQ1ksVUFBMkIsRUFDZixhQUE0QjtRQUR4QyxlQUFVLEdBQVYsVUFBVSxDQUFpQjtRQUNmLGtCQUFhLEdBQWIsYUFBYSxDQUFlO1FBdEUzQyxZQUFPLEdBQVcsUUFBUSxDQUFDO1FBQzNCLFVBQUssR0FBRyxFQUFFLENBQUM7UUFjWCxVQUFLLEdBQUcsRUFBRSxDQUFDO1FBQ1gsWUFBTyxHQUFHLEVB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Q0FBb0I7O0lBQ3BCLG1EQUE0Qjs7SUFDNUIsZ0RBQXlCOztJQUN6QiwrQ0FBd0I7O0lBQ3hCLDhDQUF1Qjs7SUFDdkIsa0RBQTJCOztJQUMzQixpREFBMEI7O0lBQzFCLHFEQUE4Qjs7SUFDOUIsZ0RBQXlCOztJQUN6QixvREFBNkI7O0lBQzdCLCtDQUF3Qjs7SUFJeEIsMkNBQW9COztJQUNwQiw2Q0FBc0I7O0lBQ3RCLHVEQUFnQzs7SUFDaEMscURBQWtDOztJQUNsQyxnREFBNkI7O0lBSTdCLHNEQUFpQzs7SUFDakMscURBQWtDOztJQUNsQyw0Q0FBd0I7O0lBQ3hCLGdEQUE0Qjs7SUFDNUIsa0RBQThCOztJQUM5QixrREFBK0I7O0lBQy9CLGlEQUEwQjs7SUFDMUIsa0RBQStCOztJQUMvQix3REFBZ0Q7O0lBQ2hELHlEQUFxQzs7SUFDckMsbURBQStCOztJQUMvQix3REFBb0M7O0lBQ3BDLHVEQUFtQzs7SUFDbkMsb0RBQWlDOztJQUNqQyxzREFBcUQ7O0lBQ3JELHdEQUEyRDs7SUFFM0QsNkNBQWE7O0lBQ2IsZ0RBQXVCOztJQUV2QixrREFBa0I7O0lBQ2xCLHFEQUFxQjs7Ozs7SUFFckIsMkRBQXFDOzs7OztJQUNyQyx5REFBbUM7O0lBQ25DLG1EQUFtQjs7SUFDbkIsK0NBQXNCOztJQUN0QixnREFBbUI7O0lBQ25CLGlEQUFpQjs7SUFDakIsZ0RBQTBCOztJQUMxQiw4Q0FBaUI7O0lBRWpCLGtEQUFvQjs7SUFDcEIsMkNBQXlCOztJQUN6QixvREFBZ0M7O0lBQ2hDLDhDQUF5RDs7SUFDekQsMkRBQThCOztJQUM5Qiw0REFBOEc7O0lBQzlHLGtEQUFvQzs7SUFDcEMsaURBQTJCOztJQUMzQixzREFBa0M7Ozs7O0lBQ2xDLG1EQUFvQzs7Ozs7SUFDcEMsa0RBQW1DOztJQUNuQyx1REFBaUM7Ozs7O0lBRzdCLGdEQUFtQzs7Ozs7SUFDbkMsbURBQWdEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcclxuICAgIENvbXBvbmVudCwgSW5wdXQsIEV2ZW50RW1pdHRlciwgT3V0cHV0LCBWaWV3Q2hpbGQsIE9uSW5pdCwgQWZ0ZXJWaWV3SW5pdCwgVGVtcGxhdGVSZWYsXHJcbiAgICBTaW1wbGVDaGFuZ2VzLCBPbkNoYW5nZXMsIE9wdGlvbmFsLCBDaGFuZ2VEZXRlY3RvclJlZiwgT25EZXN0cm95XHJcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IEFwaUxvY2FsU2VydmljZSB9IGZyb20gJy4uLy4uL3V0aWxzL2FwaS1zZXJ2aWNlJztcclxuaW1wb3J0IHsgRGF0YWdyaWRDb21wb25lbnQgfSBmcm9tICdAZmFycmlzL3VpLWRhdGFncmlkJztcclxuaW1wb3J0ICogYXMgXyBmcm9tICdsb2Rhc2gtZXMnO1xyXG5pbXBvcnQgeyBGYXZvcml0ZXNUb29sIH0gZnJvbSAnLi4vLi4vdXRpbHMvZmF2b3JpdGVzLnRvb2wnO1xyXG5pbXBvcnQgeyBub0RhdGFJbWcgfSBmcm9tICcuLi8uLi9hc3NldHMvcmVzb3VyY2UnO1xyXG5pbXBvcnQgeyBEYXRhTG9hZGluZ1NlcnZpY2UgfSBmcm9tICcuLi8uLi91dGlscy9sb2FkaW5nLXNlcnZpY2UnO1xyXG5pbXBvcnQgeyBGaWx0ZXJPcmcgfSBmcm9tICcuLi8uLi91dGlscy91c2VyLnR5cGUnO1xyXG5pbXBvcnQgeyBzd2l0Y2hNYXAsIHRhcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcclxuaW1wb3J0IHsgRmlsdGVyT3JnVG9vbCB9IGZyb20gJy4uLy4uL3V0aWxzL2ZpbHRlcm9yZy50b29sJztcclxuaW1wb3J0IHsgU3Vic2NyaXB0aW9uIH0gZnJvbSAncnhqcyc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiAnbGliLXVzZXJncm91cC11bnNlbGVjdCcsXHJcbiAgICB0ZW1wbGF0ZVVybDogJy4vdXNlcmdyb3VwdW5zZWxlY3QuY29tcG9uZW50Lmh0bWwnLFxyXG4gICAgc3R5bGVVcmxzOiBbJy4vdXNlcmdyb3VwdW5zZWxlY3QuY29tcG9uZW50LmNzcyddXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBVc2VyR3JvdXBVblNlbGVjdENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgQWZ0ZXJWaWV3SW5pdCwgT25DaGFuZ2VzLCBPbkRlc3Ryb3kge1xyXG5cclxuICAgIEBWaWV3Q2hpbGQoJ3VuU2VsZWN0RGF0YWdyaWQnKSB1blNlbGVjdERhdGFncmlkOiBEYXRhZ3JpZENvbXBvbmVudDtcclxuICAgIEBWaWV3Q2hpbGQoJ29wQ2VsbCcpIG9wQ2VsbDogVGVtcGxhdGVSZWY8YW55PjtcclxuXHJcbiAgICBASW5wdXQoKSBpZEZpZWxkOiBzdHJpbmcgPSAndXNlcklkJztcclxuICAgIEBJbnB1dCgpIGl0ZW1zID0gW107XHJcbiAgICBASW5wdXQoKSBhYnNVc2VyT3JnVXJsOiBhbnk7XHJcbiAgICBASW5wdXQoKSBhYnNPcmdUeXBlOiBhbnk7XHJcbiAgICBASW5wdXQoKSBwYWdlSW5kZXg6IGFueTtcclxuICAgIEBJbnB1dCgpIHBhZ2VTaXplOiBhbnk7XHJcbiAgICBASW5wdXQoKSBwYWdlVG90YWxBbGw6IGFueTtcclxuICAgIEBJbnB1dCgpIG11bHRpU2VsZWN0OiBhbnk7XHJcbiAgICBASW5wdXQoKSBub1NlbGVjdFRvUmlnaHQ6IGFueTtcclxuICAgIEBJbnB1dCgpIHNlYXJjaFRleHQ6IGFueTtcclxuICAgIEBJbnB1dCgpIHVuU2VsZWN0ZWRMaXN0OiBhbnk7XHJcbiAgICBASW5wdXQoKSBwYWdlVG90YWw6IGFueTtcclxuICAgIEBJbnB1dCgpIHNldCBlbmFibGVDaGlsZEhpZXJhcmNoeSh2YWx1ZTogYm9vbGVhbikge1xyXG4gICAgICAgIHRoaXMucEVuYWJsZUNoaWxkSGllcmFyY2h5ID0gdmFsdWU7XHJcbiAgICB9XHJcbiAgICBASW5wdXQoKSBvcmdJZCA9ICcnO1xyXG4gICAgQElucHV0KCkgdXNlcklkcyA9ICcnO1xyXG4gICAgQElucHV0KCkgdW5TZWxlY3RlZFVzZXJJZHMgPSAnJztcclxuICAgIEBJbnB1dCgpIGluY2x1ZGVTdG9wVXNlcjogYm9vbGVhbjtcclxuICAgIEBJbnB1dCgpIHNlYXJjaFBhZ2U6IGJvb2xlYW47XHJcbiAgICBASW5wdXQoKSBzZXQgaW5jbHVkZUN1cnJlbnRVc2VyKHZhbHVlOiBib29sZWFuKSB7XHJcbiAgICAgICAgdGhpcy5wSW5jbHVkZUN1cnJlbnRVc2VyID0gdmFsdWU7XHJcbiAgICB9XHJcbiAgICBASW5wdXQoKSBlbmFibGVQYWdpbmF0aW9uID0gdHJ1ZTtcclxuICAgIEBJbnB1dCgpIGVuYWJsZUZhdm9yaXRlczogYm9vbGVhbjtcclxuICAgIEBJbnB1dCgpIGJ1c051bTogc3RyaW5nO1xyXG4gICAgQElucHV0KCkgb3JkZXJGaWVsZDogc3RyaW5nO1xyXG4gICAgQElucHV0KCkgdXNlclR5cGVNb2RlOiBzdHJpbmc7XHJcbiAgICBASW5wdXQoKSBnbG9iYWxTZWFyY2g6IGJvb2xlYW47XHJcbiAgICBASW5wdXQoKSB1c2VyR3JvdXBJZCA9ICcnO1xyXG4gICAgQElucHV0KCkgc2hvd1BhZ2VMaXN0OiBib29sZWFuO1xyXG4gICAgQElucHV0KCkgZGF0YUxvYWRpbmdTZXJ2aWNlOiBEYXRhTG9hZGluZ1NlcnZpY2U7XHJcbiAgICBASW5wdXQoKSBwcmVzZXRGaWx0ZXJPcmdJbmZvOiBzdHJpbmc7XHJcbiAgICBASW5wdXQoKSBmaWx0ZXJPcmdJbmZvOiBzdHJpbmc7XHJcbiAgICBASW5wdXQoKSBmaWx0ZXJPcmdFcnJvckluZm86IHN0cmluZztcclxuICAgIEBJbnB1dCgpIHZhbGlkRWxlbWVudHNJbmZvOiBzdHJpbmc7XHJcbiAgICBASW5wdXQoKSB3aXRoUGVybWlzc2lvbjogYm9vbGVhbjtcclxuICAgIEBPdXRwdXQoKSBzZWxlY3Rpb25zQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcbiAgICBAT3V0cHV0KCkgc2VhcmNoUmVzdWx0Q2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxib29sZWFuPigpO1xyXG5cclxuICAgIGNvbHVtbnM6IGFueTtcclxuICAgIHNlbGVjdGlvbnM6IGFueVtdID0gW107XHJcblxyXG4gICAgY2xvbmVVc2VySWRzID0gJyc7XHJcbiAgICBjbG9uZVNlbGVjdGlvbnMgPSBbXTtcclxuXHJcbiAgICBwcml2YXRlIHBFbmFibGVDaGlsZEhpZXJhcmNoeSA9IHRydWU7XHJcbiAgICBwcml2YXRlIHBJbmNsdWRlQ3VycmVudFVzZXIgPSB0cnVlO1xyXG4gICAgZmF2b3JpdGVzTGlzdCA9IFtdO1xyXG4gICAgbm9EYXRhSW1nID0gbm9EYXRhSW1nO1xyXG4gICAgYWxsQ2hlY2tlZCA9IGZhbHNlO1xyXG4gICAgaXRlbXNCYWNrdXAgPSBbXTtcclxuICAgIGFsbEluZGV4SWQgPSAnYWxsSW5kZXhJZCc7XHJcbiAgICBmaWx0ZXJJZDogc3RyaW5nO1xyXG4gICAgLy8g5piv5ZCm5pi+56S655So5oi357yW5Y+3XHJcbiAgICBzaG93VXNlckNvZGUgPSB0cnVlO1xyXG4gICAgY2RSZWY6IENoYW5nZURldGVjdG9yUmVmO1xyXG4gICAgc2hvd1BhZ2VzUGFuZWw6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIHBhZ2VMaXN0ID0gWzEwLCAyMCwgNTAsIDEwMCwgMjAwLCA1MDAsIDEwMDAsIDIwMDAsIDUwMDBdO1xyXG4gICAgbG9hZGluZ1NlcnZpY2VNZXNzYWdlOiBzdHJpbmc7XHJcbiAgICBmaWx0ZXJQZXJzb25XaXRoT3JnVXJsOiBzdHJpbmcgPSAnL2FwaS9ydW50aW1lL3N5cy92MS4wL2Fic1VzZXJPcmcvb3JnL1N5c3RlbV9vcmdhbml6YXRpb24vZ2V0T3JnQnlVc2VyRmlsZXInO1xyXG4gICAgZmlsdGVyT3JnQXJyOiBBcnJheTxGaWx0ZXJPcmc+ID0gW107XHJcbiAgICBmaWx0ZXJPcmdJZDogc3RyaW5nID0gbnVsbDtcclxuICAgIGlzRW1wdHlGaWx0ZXJPcmc6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIHByaXZhdGUgZmlsdGVyT3JnVG9vbDogRmlsdGVyT3JnVG9vbFxyXG4gICAgcHJpdmF0ZSBmaWx0ZXJPcmdTdWI6IFN1YnNjcmlwdGlvbjtcclxuICAgIGN1cnJlbnRGaWx0ZXJJbmZvOiBzdHJpbmcgPSBudWxsO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHByaXZhdGUgYXBpU2VydmljZTogQXBpTG9jYWxTZXJ2aWNlLFxyXG4gICAgICAgIEBPcHRpb25hbCgpIHByaXZhdGUgZmF2b3JpdGVzVG9vbDogRmF2b3JpdGVzVG9vbFxyXG4gICAgKSB7XHJcbiAgICAgICAgdGhpcy5hbGxJbmRleElkID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygxNikuc3Vic3RyaW5nKDMsIDEwKTtcclxuICAgICAgICB0aGlzLmZpbHRlck9yZ1Rvb2wgPSBuZXcgRmlsdGVyT3JnVG9vbCgpO1xyXG4gICAgfVxyXG5cclxuICAgIG5nT25Jbml0KCk6IHZvaWQge1xyXG4gICAgICAgIGxldCB0aXRsZSA9ICcnO1xyXG4gICAgICAgIGlmICh0aGlzLm11bHRpU2VsZWN0KSB7XHJcbiAgICAgICAgICAgIHRpdGxlID0gJ+WFqOmAiSc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY29sdW1ucyA9IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZmllbGQ6ICduYW1lJywgdGVtcGxhdGU6IHRoaXMub3BDZWxsLCB0aXRsZSwgd2lkdGg6ICcxNTAnXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBdO1xyXG4gICAgICAgIGlmKHRoaXMuZmlsdGVyT3JnVG9vbCkge1xyXG4gICAgICAgICAgICB0aGlzLmZpbHRlck9yZ1N1YiA9IHRoaXMuZmlsdGVyT3JnVG9vbC5maWx0ZXJPcmdTdWJqZWN0LnN1YnNjcmliZShkYXRhID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEZpbHRlckluZm8gPSBkYXRhO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5mYXZvcml0ZXNUb29sKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmF2b3JpdGVzVG9vbC5mYXZvcml0ZXNTdWJqZWN0LnN1YnNjcmliZShkYXRhID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmF2b3JpdGVzTGlzdCA9IGRhdGE7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVuU2VsZWN0ZWRMaXN0TG9hZCgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbmdBZnRlclZpZXdJbml0KCk6IHZvaWQge1xyXG4gICAgICAgIC8vIHRoaXMucGFnZUNoYW5nZUNoZWNrKCk7XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcyk6IHZvaWQge1xyXG4gICAgICAgIGlmIChjaGFuZ2VzLmluY2x1ZGVDdXJyZW50VXNlciAmJiB0eXBlb2YgY2hhbmdlcy5pbmNsdWRlQ3VycmVudFVzZXIuY3VycmVudFZhbHVlID09PSAnYm9vbGVhbidcclxuICAgICAgICAgICAgJiYgIWNoYW5nZXMuaW5jbHVkZUN1cnJlbnRVc2VyLmZpcnN0Q2hhbmdlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXNzZW1ibGVEYXRhQnlVc2VyR3JvdXBJZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY2hhbmdlcy5lbmFibGVDaGlsZEhpZXJhcmNoeSAmJiB0eXBlb2YgY2hhbmdlcy5lbmFibGVDaGlsZEhpZXJhcmNoeS5jdXJyZW50VmFsdWUgPT09ICdib29sZWFuJ1xyXG4gICAgICAgICAgICAmJiAhY2hhbmdlcy5lbmFibGVDaGlsZEhpZXJhcmNoeS5maXJzdENoYW5nZSkge1xyXG4gICAgICAgICAgICB0aGlzLmFzc2VtYmxlRGF0YUJ5VXNlckdyb3VwSWQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkRlc3Ryb3koKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5maWx0ZXJPcmdTdWIudW5zdWJzY3JpYmUoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGVtaXRTZWxlY3Rpb25zKCkge1xyXG4gICAgICAgIGNvbnN0IGVtaXRPYmogPSB7XHJcbiAgICAgICAgICAgIHNlbGVjdGlvbnM6IHRoaXMuc2VsZWN0aW9ucyxcclxuICAgICAgICAgICAgdG9rZW46ICd1bkRhdGFncmlkJ1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25zQ2hhbmdlLmVtaXQoZW1pdE9iaik7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzdG9yZVNlbGVjdGlvbnMoKSB7XHJcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25zID0gXy5jbG9uZURlZXAodGhpcy5jbG9uZVNlbGVjdGlvbnMpO1xyXG4gICAgICAgIC8vIHRoaXMuZW1pdFNlbGVjdGlvbnMoKTtcclxuICAgICAgICB0aGlzLnRvZ2dsZUNoZWNrZWQoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDkurrlkZjlsZXnpLrnv7vpobXop6blj5Hmn6Xor6LvvIjvvIHvvIlcclxuICAgIHN3aXRjaFBhZ2Uoc2l6ZSkge1xyXG4gICAgICAgIHRoaXMucGFnZUluZGV4ID0gc2l6ZS5wYWdlSW5kZXg7XHJcbiAgICAgICAgdGhpcy5wYWdlU2l6ZSA9IHNpemUucGFnZVNpemU7XHJcbiAgICAgICAgaWYgKHRoaXMuc2VhcmNoUGFnZSkge1xyXG4gICAgICAgICAgICB0aGlzLmFzc2VtYmxlRGF0YUJ5U2VhcmNoKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5hc3NlbWJsZURhdGFCeVVzZXJHcm91cElkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRvZ2dsZUZhdm9yaXRlcyhlOiBhbnksIGl0ZW06IGFueSkge1xyXG4gICAgICAgIHRoaXMuZmF2b3JpdGVzVG9vbC50b2dnbGVGYXZvcml0ZXMoZSwgaXRlbSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXNzZW1ibGVEYXRhQnlTZWFyY2goKSB7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdFBhcmFtOiBhbnkgPSB7XHJcbiAgICAgICAgICAgIHBhZ2VTaXplOiB0aGlzLnBhZ2VTaXplLFxyXG4gICAgICAgICAgICBwYWdlSW5kZXg6IHRoaXMucGFnZUluZGV4LFxyXG4gICAgICAgICAgICB3aXRoQWxsT3JnOiB0aGlzLnBFbmFibGVDaGlsZEhpZXJhcmNoeSA/IDEgOiAwLFxyXG4gICAgICAgICAgICBub3RHZXRTdG9wVXNlcjogIXRoaXMuaW5jbHVkZVN0b3BVc2VyLFxyXG4gICAgICAgICAgICBub3RHZXRDdXJyZW50VXNlcjogIXRoaXMucEluY2x1ZGVDdXJyZW50VXNlcixcclxuICAgICAgICAgICAgb3JkZXJGaWVsZDogdGhpcy5vcmRlckZpZWxkLFxyXG4gICAgICAgICAgICB1c2VyVHlwZU1vZGU6IHRoaXMudXNlclR5cGVNb2RlLFxyXG4gICAgICAgICAgICBmaWx0ZXJJZDogdGhpcy5maWx0ZXJJZFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgLy8g5YWo5bGA5pCc57Sib3LlsYDpg6hcclxuICAgICAgICBpZiAoIXRoaXMuZ2xvYmFsU2VhcmNoKSB7XHJcbiAgICAgICAgICAgIHJlcXVlc3RQYXJhbS5vcmdJZCA9IHRoaXMub3JnSWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuYXBpU2VydmljZS5nZXRQZXJzb25uZWxCeVNlYXJjaCh0aGlzLmFic1VzZXJPcmdVcmwsIHRoaXMuYWJzT3JnVHlwZSwgdGhpcy5zZWFyY2hUZXh0LFxyXG4gICAgICAgICAgICByZXF1ZXN0UGFyYW0pLnN1YnNjcmliZSgocmVzOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJjUmVzRGF0YSA9IHJlcyA/IHJlcy5kYXRhIDogW107XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVuU2VsZWN0ZWRMaXN0ID0gcmNSZXNEYXRhO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wYWdlVG90YWxBbGwgPSByZXMudG90YWxDb3VudDtcclxuICAgICAgICAgICAgICAgIHRoaXMucGFnZVRvdGFsID0gTWF0aC5jZWlsKHRoaXMucGFnZVRvdGFsQWxsIC8gdGhpcy5wYWdlU2l6ZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wYWdlVG90YWwgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhZ2VUb3RhbCA9IDE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVuU2VsZWN0ZWRMaXN0TG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWFyY2hSZXN1bHRDaGFuZ2UuZW1pdCh0cnVlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXNzZW1ibGVEYXRhQnlVc2VyR3JvdXBJZCgpIHtcclxuICAgICAgICBpZih0aGlzLmRhdGFMb2FkaW5nU2VydmljZSkge1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFMb2FkaW5nU2VydmljZS5zaG93KHRoaXMubG9hZGluZ1NlcnZpY2VNZXNzYWdlKTsgICAgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHJlcXVlc3RQYXJhbTogYW55ID0ge1xyXG4gICAgICAgICAgICB3aXRoQWxsR3JvdXA6IHRoaXMucEVuYWJsZUNoaWxkSGllcmFyY2h5ID8gdHJ1ZSA6IGZhbHNlLFxyXG4gICAgICAgICAgICBub3RHZXRTdG9wVXNlcjogIXRoaXMuaW5jbHVkZVN0b3BVc2VyLFxyXG4gICAgICAgICAgICBub3RHZXRDdXJyZW50VXNlcjogIXRoaXMucEluY2x1ZGVDdXJyZW50VXNlcixcclxuICAgICAgICAgICAgb3JkZXJGaWVsZDogdGhpcy5vcmRlckZpZWxkLFxyXG4gICAgICAgICAgICB1c2VyVHlwZU1vZGU6IHRoaXMudXNlclR5cGVNb2RlLFxyXG4gICAgICAgICAgICBmaWx0ZXJJZDogdGhpcy5maWx0ZXJJZCxcclxuICAgICAgICAgICAgZ3JvdXBJZDogdGhpcy51c2VyR3JvdXBJZCxcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmICh0aGlzLmVuYWJsZVBhZ2luYXRpb24pIHtcclxuICAgICAgICAgICAgcmVxdWVzdFBhcmFtLnBhZ2VTaXplID0gdGhpcy5wYWdlU2l6ZTtcclxuICAgICAgICAgICAgcmVxdWVzdFBhcmFtLnBhZ2VJbmRleCA9IHRoaXMucGFnZUluZGV4O1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDpgJrov4fnu4Tnu4fov5vooYzkurrlkZjnmoTkuozmrKHov4fmu6RcclxuICAgICAgICBpZih0aGlzLmZpbHRlck9yZ0lkKSB7XHJcbiAgICAgICAgICAgIHJlcXVlc3RQYXJhbS5vcmdJZCA9IHRoaXMuZmlsdGVyT3JnSWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKHRoaXMud2l0aFBlcm1pc3Npb24pIHtcclxuICAgICAgICAgICAgcmVxdWVzdFBhcmFtLndpdGhQZXJtaXNzaW9uID0gdHJ1ZTtcclxuICAgICAgICAgICAgcmVxdWVzdFBhcmFtLmF1dGhPcCA9ICdVc2VyTWFuYWdlJztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5hcGlTZXJ2aWNlLmdldFBlcnNvbm5lbEJ5VXNlckdyb3VwSWQodGhpcy5hYnNVc2VyT3JnVXJsLCByZXF1ZXN0UGFyYW0pLnN1YnNjcmliZSgocmVzOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcmNSZXNEYXRhID0gcmVzID8gcmVzLmRhdGEgOiBbXTtcclxuICAgICAgICAgICAgdGhpcy51blNlbGVjdGVkTGlzdCA9IHJjUmVzRGF0YTtcclxuICAgICAgICAgICAgdGhpcy5wYWdlVG90YWxBbGwgPSByZXMudG90YWxDb3VudDtcclxuICAgICAgICAgICAgdGhpcy5wYWdlVG90YWwgPSBNYXRoLmNlaWwodGhpcy5wYWdlVG90YWxBbGwgLyB0aGlzLnBhZ2VTaXplKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMucGFnZVRvdGFsID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhZ2VUb3RhbCA9IDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy51blNlbGVjdGVkTGlzdExvYWQoKTtcclxuICAgICAgICAgICAgaWYodGhpcy5maWx0ZXJPcmdJZCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudEZpbHRlck9yZyA9ICB0aGlzLmZpbHRlck9yZ0Fyci5maW5kKChhcnI6IEZpbHRlck9yZykgPT4ge3JldHVybiBhcnIuaWQgPT0gdGhpcy5maWx0ZXJPcmdJZH0pO1xyXG4gICAgICAgICAgICAgICAgaWYoY3VycmVudEZpbHRlck9yZykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyT3JnVG9vbC5lbWl0RmlsdGVyT3JnKHRoaXMuZmlsdGVyT3JnSW5mbyArIGN1cnJlbnRGaWx0ZXJPcmdbJ25hbWUnXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlck9yZ1Rvb2wuZW1pdEZpbHRlck9yZyh0aGlzLnByZXNldEZpbHRlck9yZ0luZm8pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKHRoaXMuZGF0YUxvYWRpbmdTZXJ2aWNlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFMb2FkaW5nU2VydmljZS5oaWRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIC8vIOaYvuekuue7hOe7h+i/h+a7pOa8j+aWl+eahOWcuuaZr+S4i++8jOeUqOaIt+WIhue7hOagkeWGheWIh+aNoueUqOaIt+WIhue7hOaXtummluWFiOiOt+WPluS6uuWRmOaJgOWxnueahOWFqOmDqOe7hOe7h++8jOWGjeiOt+WPluS6uuWRmOaVsOaNrlxyXG4gICAgYXNzZW1ibGVEYXRhQnlVc2VyR3JvdXBJZEFuZEdldEZpbHRlck9yZyhzaXplOiBhbnkpIHtcclxuICAgICAgICBpZighdGhpcy51c2VyR3JvdXBJZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKHRoaXMuZGF0YUxvYWRpbmdTZXJ2aWNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YUxvYWRpbmdTZXJ2aWNlLnNob3codGhpcy5sb2FkaW5nU2VydmljZU1lc3NhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnBhZ2VJbmRleCA9IHNpemUucGFnZUluZGV4O1xyXG4gICAgICAgIHRoaXMucGFnZVNpemUgPSBzaXplLnBhZ2VTaXplO1xyXG4gICAgICAgIHRoaXMuZmlsdGVyT3JnQXJyID0gW107XHJcbiAgICAgICAgdGhpcy5maWx0ZXJPcmdJZCA9IG51bGw7XHJcblxyXG4gICAgICAgIGNvbnN0IGZpbHRlclJlcXVlc3RQYXJhbTogYW55ID0ge1xyXG4gICAgICAgICAgICB3aXRoQWxsT3JnOiB0cnVlLFxyXG4gICAgICAgICAgICBnZXRVc2VySW5mbzogZmFsc2UsXHJcbiAgICAgICAgICAgIG5vdEdldFN0b3BVc2VyOiAhdGhpcy5pbmNsdWRlU3RvcFVzZXIsXHJcbiAgICAgICAgICAgIG5vdEdldEN1cnJlbnRVc2VyOiAhdGhpcy5wSW5jbHVkZUN1cnJlbnRVc2VyLFxyXG4gICAgICAgICAgICBvcmRlckZpZWxkOiB0aGlzLm9yZGVyRmllbGQsXHJcbiAgICAgICAgICAgIHVzZXJUeXBlTW9kZTogdGhpcy51c2VyVHlwZU1vZGUsXHJcbiAgICAgICAgICAgIGZpbHRlcklkOiB0aGlzLmZpbHRlcklkLFxyXG4gICAgICAgICAgICBncm91cElkOiB0aGlzLnVzZXJHcm91cElkLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgLy8g6aaW5YWI6I635Y+W5b2T5YmN55So5oi35YiG57uE5LiL5omA5pyJ5oiQ5ZGY5omA5bGe55qE57uE57uHXHJcbiAgICAgICAgY29uc3QgZ2V0RmlsdGVyT3JnJCA9IHRoaXMuYXBpU2VydmljZS5nZXRGaWx0ZXJPcmdhbml6YXRpb24odGhpcy5maWx0ZXJQZXJzb25XaXRoT3JnVXJsLCB0aGlzLmFic09yZ1R5cGUsIGZpbHRlclJlcXVlc3RQYXJhbSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHJlcXVlc3RQYXJhbTogYW55ID0ge1xyXG4gICAgICAgICAgICB3aXRoQWxsR3JvdXA6IHRoaXMucEVuYWJsZUNoaWxkSGllcmFyY2h5ID8gdHJ1ZSA6IGZhbHNlLFxyXG4gICAgICAgICAgICBub3RHZXRTdG9wVXNlcjogIXRoaXMuaW5jbHVkZVN0b3BVc2VyLFxyXG4gICAgICAgICAgICBub3RHZXRDdXJyZW50VXNlcjogIXRoaXMucEluY2x1ZGVDdXJyZW50VXNlcixcclxuICAgICAgICAgICAgb3JkZXJGaWVsZDogdGhpcy5vcmRlckZpZWxkLFxyXG4gICAgICAgICAgICB1c2VyVHlwZU1vZGU6IHRoaXMudXNlclR5cGVNb2RlLFxyXG4gICAgICAgICAgICBmaWx0ZXJJZDogdGhpcy5maWx0ZXJJZCxcclxuICAgICAgICAgICAgZ3JvdXBJZDogdGhpcy51c2VyR3JvdXBJZCxcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmICh0aGlzLmVuYWJsZVBhZ2luYXRpb24pIHtcclxuICAgICAgICAgICAgcmVxdWVzdFBhcmFtLnBhZ2VTaXplID0gdGhpcy5wYWdlU2l6ZTtcclxuICAgICAgICAgICAgcmVxdWVzdFBhcmFtLnBhZ2VJbmRleCA9IHRoaXMucGFnZUluZGV4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZih0aGlzLndpdGhQZXJtaXNzaW9uKSB7XHJcbiAgICAgICAgICAgIHJlcXVlc3RQYXJhbS53aXRoUGVybWlzc2lvbiA9IHRydWU7XHJcbiAgICAgICAgICAgIHJlcXVlc3RQYXJhbS5hdXRoT3AgPSAnVXNlck1hbmFnZSc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOeEtuWQjuiOt+WPluW9k+WJjeeUqOaIt+WIhue7hOS4i+eahOaJgOacieaIkOWRmFxyXG4gICAgICAgIGNvbnN0IGdldFBlcnNvbm5lbCQgPSB0aGlzLmFwaVNlcnZpY2UuZ2V0UGVyc29ubmVsQnlVc2VyR3JvdXBJZCh0aGlzLmFic1VzZXJPcmdVcmwsIHJlcXVlc3RQYXJhbSk7XHJcblxyXG4gICAgICAgIGdldEZpbHRlck9yZyQucGlwZShcclxuICAgICAgICAgICAgc3dpdGNoTWFwKFxyXG4gICAgICAgICAgICAgICAgKHJlc0RhdGE6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc0RhdGEgJiYgcmVzRGF0YS5kYXRhICYmIHJlc0RhdGEuZGF0YS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNFbXB0eUZpbHRlck9yZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZmlsdGVyT3JnOiBGaWx0ZXJPcmc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyT3JnQXJyID0gcmVzRGF0YS5kYXRhLm1hcCgoZGF0YTogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJPcmcgPSBuZXcgRmlsdGVyT3JnKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJPcmcuaWQgPSBkYXRhWydvcmdJZCddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVyT3JnLnZhbHVlID0gZGF0YVsnY29kZSddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVyT3JnLm5hbWUgPSBkYXRhWyduYW1lJ107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmlsdGVyT3JnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJPcmdUb29sLmVtaXRGaWx0ZXJPcmcodGhpcy5wcmVzZXRGaWx0ZXJPcmdJbmZvKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzRW1wdHlGaWx0ZXJPcmcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0UGVyc29ubmVsJC5waXBlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAocmVzOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByY1Jlc0RhdGEgPSByZXMgPyByZXMuZGF0YSA6IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudW5TZWxlY3RlZExpc3QgPSByY1Jlc0RhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlVG90YWxBbGwgPSByZXMudG90YWxDb3VudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhZ2VUb3RhbCA9IE1hdGguY2VpbCh0aGlzLnBhZ2VUb3RhbEFsbCAvIHRoaXMucGFnZVNpemUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhZ2VUb3RhbCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhZ2VUb3RhbCA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudW5TZWxlY3RlZExpc3RMb2FkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgIHRhcChcclxuICAgICAgICAgICAgICAgICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmRhdGFMb2FkaW5nU2VydmljZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFMb2FkaW5nU2VydmljZS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuZGF0YUxvYWRpbmdTZXJ2aWNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YUxvYWRpbmdTZXJ2aWNlLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKHRoaXMuZmlsdGVyT3JnRXJyb3JJbmZvKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICkuc3Vic2NyaWJlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBkYXRhZ3JpZOeUqOS6juaVsOaNruWxleekulxyXG4gICAgICovXHJcbiAgICB1blNlbGVjdGVkTGlzdExvYWQoaW5pdExvYWQgPSBmYWxzZSkge1xyXG4gICAgICAgIHRoaXMuaXRlbXMgPSBbXTtcclxuICAgICAgICB0aGlzLnVuU2VsZWN0ZWRMaXN0LmZvckVhY2gocmVzID0+IHtcclxuICAgICAgICAgICAgLy8gY29uc3QgaW5kZXhJZCA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMTYpLnN1YnN0cmluZygyKTtcclxuICAgICAgICAgICAgLy8gY29uc3QgaXRlbSA9IHtcclxuICAgICAgICAgICAgLy8gICAgIGFiYnJldmlhdGlvbjogcmVzLmFiYnJldmlhdGlvbixcclxuICAgICAgICAgICAgLy8gICAgIGNvZGU6IHJlcy5jb2RlLFxyXG4gICAgICAgICAgICAvLyAgICAgZGVmYXVsdE9yZ0lkOiByZXMuZGVmYXVsdE9yZ0lkLFxyXG4gICAgICAgICAgICAvLyAgICAgZGVmYXVsdE9yZ1BhdGg6IHJlcy5kZWZhdWx0T3JnUGF0aCxcclxuICAgICAgICAgICAgLy8gICAgIGV4dDE6IHJlcy5leHQxLFxyXG4gICAgICAgICAgICAvLyAgICAgZXh0MjogcmVzLmV4dDIsXHJcbiAgICAgICAgICAgIC8vICAgICBmdWxsUGF0aE5hbWU6IHJlcy5mdWxsUGF0aE5hbWUsXHJcbiAgICAgICAgICAgIC8vICAgICBuYW1lOiByZXMubmFtZSxcclxuICAgICAgICAgICAgLy8gICAgIG9yZ1R5cGVJZDogcmVzLm9yZ1R5cGVJZCxcclxuICAgICAgICAgICAgLy8gICAgIHNlY0xldmVsOiByZXMuc2VjTGV2ZWwsXHJcbiAgICAgICAgICAgIC8vICAgICBzb3J0T3JkZXI6IHJlcy5zb3J0T3JkZXIsXHJcbiAgICAgICAgICAgIC8vICAgICBzdGF0ZTogcmVzLnN0YXRlLFxyXG4gICAgICAgICAgICAvLyAgICAgc3U6IHJlcy5zdSxcclxuICAgICAgICAgICAgLy8gICAgIHVzZXJJZDogcmVzLnVzZXJJZCxcclxuICAgICAgICAgICAgLy8gICAgIG9yZ0FsbFBhdGg6IHJlcy5vcmdBbGxQYXRoLFxyXG4gICAgICAgICAgICAvLyAgICAgaW5GYXZvcml0ZXM6IGZhbHNlLFxyXG4gICAgICAgICAgICAvLyAgICAgdHlwZTogJ3Blb3BsZScsXHJcbiAgICAgICAgICAgIC8vICAgICBjaGVja2VkOiBmYWxzZSxcclxuICAgICAgICAgICAgLy8gICAgIGluZGV4SWRcclxuICAgICAgICAgICAgLy8gfTtcclxuICAgICAgICAgICAgY29uc3QgaXRlbSA9IF8uY2xvbmVEZWVwKHJlcyk7XHJcbiAgICAgICAgICAgIGl0ZW0uY2hlY2tlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBpdGVtLmluRmF2b3JpdGVzID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGl0ZW0uaW5kZXhJZCA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMTYpLnN1YnN0cmluZygyKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2lzSW5BcnJheShyZXNbdGhpcy5pZEZpZWxkXSwgdGhpcy5pZEZpZWxkLCB0aGlzLnNlbGVjdGlvbnMpICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgaXRlbS5jaGVja2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5faXNJbkFycmF5KHJlc1t0aGlzLmlkRmllbGRdLCB0aGlzLmlkRmllbGQsIHRoaXMuZmF2b3JpdGVzTGlzdCkgIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBpdGVtLmluRmF2b3JpdGVzID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpdGVtLmRpc3BsYXlOYW1lID0gISF0aGlzLnNob3dVc2VyQ29kZSA/ICgnWycgKyBpdGVtLmNvZGUgKyAnXScgKyBpdGVtLm5hbWUpIDogaXRlbS5uYW1lO1xyXG4gICAgICAgICAgICB0aGlzLml0ZW1zLnB1c2goaXRlbSk7XHJcbiAgICAgICAgICAgIHRoaXMuaXRlbXNCYWNrdXAucHVzaChpdGVtKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnRvZ2dsZUNoZWNrZWQoKTtcclxuICAgICAgICB0aGlzLml0ZW1zID0gdGhpcy5pdGVtcy5zbGljZSgpO1xyXG4gICAgICAgIHRoaXMuY2RSZWYgPyB0aGlzLmNkUmVmLmRldGVjdENoYW5nZXMoKSA6IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgdG9nZ2xlQWxsKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5hbGxDaGVja2VkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tBbGwoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnVuQ2hlY2tBbGwoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5lbWl0U2VsZWN0aW9ucygpO1xyXG4gICAgfVxyXG5cclxuICAgIHRvZ2dsZU9uZShkYXRhKSB7XHJcbiAgICAgICAgaWYgKGRhdGEuY2hlY2tlZCkge1xyXG4gICAgICAgICAgICB0aGlzLnVuU2VsZWN0TGluZShkYXRhKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdExpbmUoZGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZW1pdFNlbGVjdGlvbnMoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWFqOmAieWQjuWkhOeQhlxyXG4gICAgICogQHBhcmFtIGRhdGFBcnIg5YWo6YCJ55qE5YC8XHJcbiAgICAgKi9cclxuICAgIGNoZWNrQWxsKCkge1xyXG4gICAgICAgIHRoaXMuaXRlbXMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgdGhpcy5faW5zZXJ0T25lSW50b1NlbGVjdGlvbnMoaXRlbSk7XHJcbiAgICAgICAgICAgIGl0ZW0uY2hlY2tlZCA9IHRydWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlhajpg6jlj5bmtohcclxuICAgICAqIEBwYXJhbSBkYXRhQXJyIOWPlua2iOeahOaVsOaNrlxyXG4gICAgICogQHJldHVybnMgdm9pZFxyXG4gICAgICovXHJcbiAgICB1bkNoZWNrQWxsKCkge1xyXG4gICAgICAgIHRoaXMuaXRlbXMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25zLmZvckVhY2goKHNlbGVjdGlvbiwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChpdGVtW3RoaXMuaWRGaWVsZF0gPT09IHNlbGVjdGlvblt0aGlzLmlkRmllbGRdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25zLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpdGVtLmNoZWNrZWQgPSBmYWxzZTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICog5b2T5YmN6KGM6YCJ5LitXHJcbiAgICAqIEBwYXJhbSBkYXRhIOW9k+WJjeihjOeahOaVsOaNru+8iO+8iVxyXG4gICAgKi9cclxuICAgIHNlbGVjdExpbmUoZGF0YTogYW55KSB7XHJcbiAgICAgICAgaWYgKHRoaXMubXVsdGlTZWxlY3QpIHtcclxuICAgICAgICAgICAgdGhpcy5faW5zZXJ0T25lSW50b1NlbGVjdGlvbnMoZGF0YSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy51c2VySWRzID0gJyc7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9ucyA9IFtdO1xyXG4gICAgICAgICAgICB0aGlzLml0ZW1zLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5jaGVja2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5jaGVja2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLl9pbnNlcnRPbmVJbnRvU2VsZWN0aW9ucyhkYXRhKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuaXNBbGxDaGVja2VkKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5hbGxDaGVja2VkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDljZXpgInlj5bmtojpgInkuK1cclxuICAgICAqIEBwYXJhbSBkYXRhIOWPlua2iOmAieS4reihjFxyXG4gICAgICovXHJcbiAgICB1blNlbGVjdExpbmUoZGF0YTogYW55KSB7XHJcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLl9pc0luQXJyYXkoZGF0YVt0aGlzLmlkRmllbGRdLCB0aGlzLmlkRmllbGQsIHRoaXMuc2VsZWN0aW9ucyk7XHJcbiAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25zLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmFsbENoZWNrZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5hbGxDaGVja2VkID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogIOWPlua2iOmAieS4rVxyXG4gICAgICogQHBhcmFtICRldmVudCDlj5bmtojli77pgInnmoTmlbDmja5cclxuICAgICAqL1xyXG4gICAgY2FuY2VsU2VsZWN0aW9ucygkZXZlbnQpIHtcclxuICAgICAgICBpZiAodGhpcy5pdGVtcy5maW5kSW5kZXgoaXRlbSA9PiBpdGVtW3RoaXMuaWRGaWVsZF0gPT09ICRldmVudC5pZCkgPT09IC0xKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICBpZiAoaXRlbVt0aGlzLmlkRmllbGRdID09PSAkZXZlbnQuaWQpIHtcclxuICAgICAgICAgICAgICAgIGl0ZW0uY2hlY2tlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25zLmZvckVhY2goKHNlbGVjdGlvbiwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgaWYgKCRldmVudC5pZCA9PT0gc2VsZWN0aW9uW3RoaXMuaWRGaWVsZF0pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9ucy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5hbGxDaGVja2VkID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlhajpg6jlj5bmtojli77pgIlcclxuICAgICAqL1xyXG4gICAgY2xlYXJDaGVja2VkcygpIHtcclxuICAgICAgICB0aGlzLml0ZW1zLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIGl0ZW0uY2hlY2tlZCA9IGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuYWxsQ2hlY2tlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0aW9ucyA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIGNsZWFyVXNlcklkcygpIHtcclxuICAgICAgICB0aGlzLnVzZXJJZHMgPSAnJztcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog6YCJ5Lit5bm25o+S5YWl5b2T5YmN6KGM5pWw5o2u5Yiw5Y+z5L6nXHJcbiAgICAgKiBAcGFyYW0gZGF0YSDlvZPliY3ooYznmoTmlbDmja5cclxuICAgICAqIEBwYXJhbSBjb2xsZWN0aW9uIOaaguWtmOW9k+WJjeaVsOaNrueahOmbhuWQiFxyXG4gICAgICovXHJcbiAgICBfaW5zZXJ0T25lSW50b1NlbGVjdGlvbnMoZGF0YTogYW55KSB7XHJcbiAgICAgICAgLy8g5aaC5p6c5b2T5YmN5pWw5o2u5bey57uP56e75YWl5Y+z5L6n5pWw5o2u77yM5YiZ6L+U5Zue44CCXHJcbiAgICAgICAgaWYgKHRoaXMuX2lzSW5BcnJheShkYXRhW3RoaXMuaWRGaWVsZF0sIHRoaXMuaWRGaWVsZCwgdGhpcy5zZWxlY3Rpb25zKSA+IC0xKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25zLnB1c2goZGF0YSk7XHJcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25zID0gdGhpcy5zZWxlY3Rpb25zLnNsaWNlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDliKTmlq3mmK/lkKblnKjlhoVcclxuICAgICAqIEBwYXJhbSB2YWx1ZSB2YWx1ZVxyXG4gICAgICogQHBhcmFtIGZpZWxkIGZpZWxkXHJcbiAgICAgKiBAcGFyYW0gYXJyYXkgYXJyYXlcclxuICAgICAqIEByZXR1cm5zIOS9jee9rue0ouW8lVxyXG4gICAgICovXHJcbiAgICBfaXNJbkFycmF5KHZhbHVlOiBzdHJpbmcsIGZpZWxkOiBzdHJpbmcsIGFycmF5OiBhbnlbXSk6IG51bWJlciB7XHJcbiAgICAgICAgaWYgKCFmaWVsZCB8fCAhdmFsdWUpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKHRoaXMudmFsaWRFbGVtZW50c0luZm8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYXJyYXkuZmluZEluZGV4KGl0ZW0gPT4gdmFsdWUgPT09IGl0ZW1bZmllbGRdKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOe/u+mhteajgOafpe+8muS6uuWRmOWxleekuuWMuueahOWLvumAieeKtuaAgeS4juW3sumAieS6uuWRmOWMuuaYr+WQpuWvueW6lFxyXG4gICAgICovXHJcbiAgICB0b2dnbGVDaGVja2VkKCkge1xyXG4gICAgICAgIHRoaXMuaXRlbXMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2lzSW5BcnJheShpdGVtW3RoaXMuaWRGaWVsZF0sIHRoaXMuaWRGaWVsZCwgdGhpcy5zZWxlY3Rpb25zKSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBpdGVtLmNoZWNrZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaXRlbS5jaGVja2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAodGhpcy5pc0FsbENoZWNrZWQoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmFsbENoZWNrZWQgPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWxsQ2hlY2tlZCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGlzQWxsQ2hlY2tlZCgpOiBib29sZWFuIHtcclxuICAgICAgICBsZXQgY291bnQgPSAwO1xyXG4gICAgICAgIGxldCBhbGxDaGVja2VkID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHRoaXMuaXRlbXMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25zLmZvckVhY2goc2VsZWN0aW9uID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChpdGVtW3RoaXMuaWRGaWVsZF0gPT09IHNlbGVjdGlvblt0aGlzLmlkRmllbGRdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY291bnQgKz0gMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKHRoaXMuaXRlbXMubGVuZ3RoID09PSBjb3VudCAmJiBjb3VudCA+IDApIHtcclxuICAgICAgICAgICAgYWxsQ2hlY2tlZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhbGxDaGVja2VkO1xyXG4gICAgfVxyXG5cclxuICAgIHRyYWNrQnlGbihpbmRleCwgaXRlbSkge1xyXG4gICAgICAgIHJldHVybiBpdGVtLnVzZXJJZDtcclxuICAgIH1cclxuXHJcbiAgICB0dXJuT3ZlclBhZ2UoZGlyOiBzdHJpbmcsIG51bTogbnVtYmVyKSB7XHJcbiAgICAgICAgaWYgKChkaXIgPT09ICdwcmUnICYmIHRoaXMucGFnZUluZGV4ID09PSAxKSB8fCAoZGlyID09PSAnbmV4dCcgJiYgdGhpcy5wYWdlSW5kZXggPT09IHRoaXMucGFnZVRvdGFsKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucGFnZUluZGV4ID0gdGhpcy5wYWdlSW5kZXggKyBudW07XHJcbiAgICAgICAgdGhpcy5zd2l0Y2hQYWdlKHtcclxuICAgICAgICAgICAgcGFnZUluZGV4OiB0aGlzLnBhZ2VJbmRleCxcclxuICAgICAgICAgICAgcGFnZVNpemU6IHRoaXMucGFnZVNpemUsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYmVmb3JlUGFnZUluZGV4Q2hhbmdlKGlucHV0RWw6IEtleWJvYXJkRXZlbnQsIG1heE51bWJlcikge1xyXG4gICAgICAgIGNvbnN0IHRhcmdldCA9IGlucHV0RWwudGFyZ2V0IGFzIGFueTtcclxuICAgICAgICBjb25zdCBjdXJyZW50UGFnZU51bWJlciA9IE51bWJlcih0YXJnZXQudmFsdWUpO1xyXG4gICAgICAgIGlmIChjdXJyZW50UGFnZU51bWJlciA+IG1heE51bWJlcikge1xyXG4gICAgICAgICAgICB0YXJnZXQudmFsdWUgPSBtYXhOdW1iZXI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKGN1cnJlbnRQYWdlTnVtYmVyIDwgMSkge1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0LnZhbHVlID0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnBhZ2VJbmRleCA9IE51bWJlcih0YXJnZXQudmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uTW91c2VFbnRlcigkZXZlbnQpe1xyXG4gICAgICAgIHRoaXMuc2hvd1BhZ2VzUGFuZWwgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIG9uTW91c2VMZWF2ZSgkZXZlbnQpIHtcclxuICAgICAgICB0aGlzLnNob3dQYWdlc1BhbmVsID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgY2hhbmdlUGFnZVNpemVIYW5kbGVyKCRldmVudCwgbnVtKXtcclxuICAgICAgICAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgaWYobnVtID09IHRoaXMucGFnZVNpemUpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNob3dQYWdlc1BhbmVsID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5wYWdlU2l6ZSA9IG51bTtcclxuICAgICAgICB0aGlzLnN3aXRjaFBhZ2Uoe1xyXG4gICAgICAgICAgICBwYWdlSW5kZXg6IDEsXHJcbiAgICAgICAgICAgIHBhZ2VTaXplOiB0aGlzLnBhZ2VTaXplLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbiJdfQ==