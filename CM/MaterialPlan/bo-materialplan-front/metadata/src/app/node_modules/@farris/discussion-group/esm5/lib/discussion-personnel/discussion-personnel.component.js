/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, Input, ViewChild, ElementRef, Renderer2, NgZone, Output, EventEmitter, ChangeDetectorRef, Injector } from '@angular/core';
import { of, forkJoin } from 'rxjs';
import { HttpClient } from '@angular/common/http';
import { LocaleService } from '@farris/ui-locale';
import { LoadingService } from '@farris/ui-loading';
var DiscussionPersonnelComponent = /** @class */ (function () {
    function DiscussionPersonnelComponent(renderer, elementRef, ngZone, http, cd, injector) {
        this.renderer = renderer;
        this.elementRef = elementRef;
        this.ngZone = ngZone;
        this.http = http;
        this.cd = cd;
        this.injector = injector;
        // 操作列表或者分组所需要的主键字段
        this.listIdField = "id";
        // 列表中显示的字段
        this.listDisplayText = "userName";
        // 分层获取组织的链接
        // 使用方式 /api/runtime/sys/v1.0/sysOrgs?param={"parentId":"afa5ee9b-f9ba-2927-f9ce-2a30369267e9"}
        this.urlGetOrgByLayer = "/api/runtime/sys/v1.0/sysOrgs";
        // 新建还是维护自定义角色
        // @Output() customGroupChange = new EventEmitter<any>();
        // 对外暴露数据
        this.selectionsChange = new EventEmitter();
        // 选中的行
        this.lineDataChange = new EventEmitter();
        this.openDialog = new EventEmitter();
        this.ougUsers = new EventEmitter();
        this.loadingInstance = null;
        // 右侧项
        this.selections = [];
        this.selectedSections = [];
        this.selectedUsers = [];
        // 最重要显示的人员信息
        this.finalText = '';
        this.sectionDataTree = [];
        this.sectionDataTiled = [];
        this.currentSectionData = [];
        this.currentSection = {};
        this.currentSectionPerson = {};
        this.currentSectionId = '';
        this.sectionCrumbs = [];
        this.pageSize = 20;
        this.showSearchList = false;
        this.crumbsEllipsis = false;
        this.searchUserList = {};
        this.selectEmployee = "选择员工";
        this.placeholder = "请输入员工姓名搜索";
        this.allOrg = "全部组织";
        this.groupIcon = '<span class="f-icon f-icon-search"></span>';
        this.localeService = this.injector.get(LocaleService);
        this.loadingSer = this.injector.get(LoadingService);
    }
    /**
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        // let sectionDataTrees = this.initsectionData(this.sectionData,'');
        this.allOrg = this.localeService.getValue('discussionGroup.allOrg');
        /** @type {?} */
        var sectionDataTrees = this.initSectionData(this.sectionData, '');
        // this.sectionSort(sectionDataTrees);
        // if(sectionDataTrees.length>1){
        /** @type {?} */
        var sectionParent = [
            {
                data: {
                    id: 'discussionParent',
                    code: 'parent',
                    name: this.allOrg,
                    layer: 0,
                    parentId: "",
                    sortOrder: 1,
                    path: "",
                },
                children: [],
                personnels: {
                    count: 0,
                    pageCount: 0,
                    pageIndex: 1,
                    pageSize: 0,
                    totalCount: 0,
                    users: []
                },
                parent: null,
                parents: [],
                parentsArr: [],
                checked: false
            }
        ];
        sectionParent[0].children = sectionDataTrees;
        sectionParent[0].children.sort((/**
         * @param {?} a
         * @param {?} b
         * @return {?}
         */
        function (a, b) { return a.data['sortOrder'] - b.data['sortOrder']; }));
        this.initSectionTree(sectionParent[0].children);
        this.sectionDataTree = sectionParent;
        // }
        // else{
        //     this.sectionDataTree = sectionDataTrees;
        // }
        //console.log(this.sectionDataTree);
        if (this.sectionDataTree && this.sectionDataTree.length) {
            // 如果有组织树的数据，打平成数组数据
            this.sectionDataTiled = this.tileSectionData(this.sectionDataTree);
        }
        /**
         * 当前界面上的组织节点完整树数据
         * {
         *    checked:false,组织是否选中
         *    children:[],组织的子部门
         *    data:{ 来自于从服务器端返回的数据结构
         *      id:组织id,
         *      code:组织code,
         *      name:组织名称
         *      layer:组织层级
         *      parentId:父节点
         *      ....
         *      },
         *    parents:[],父节点Id
         *    parentsArr:[{id:'组织节点Id',name:'组织节点名称'}],
         *    personnels:{
         *          count:0,
         *          pageCount:,
         *          users:[] 用户信息
         *      }
         * }
         *
         */
        this.currentSection = this.sectionDataTree[0];
        // 面包屑数据[{id:'组织节点Id',name:'组织节点名称'}]
        this.sectionCrumbs = this.sectionDataTree[0].children.length ? this.sectionDataTree[0].children[0]['parentsArr'] : [];
        // 当前界面上的组织列表数据
        this.currentSectionData = this.sectionDataTree[0].children.length ? this.sectionDataTree[0].children : [];
        // 当前界面上的组织隶属的组织的数据Id
        this.currentSectionId = this.sectionDataTree[0].data.id;
        // 绑定当人员获取回数据时，执行的操作
        this.getPersonnel(this.currentSectionId, 0).subscribe((/**
         * @param {?} d
         * @return {?}
         */
        function (d) {
            if (d.hasOwnProperty("users")) {
                _this.sectionDataTree[0].personnels = d;
                _this.currentSectionPerson = _this.sectionDataTree[0].personnels;
                // console.log('cur',this.currentSectionPerson);
            }
        }));
        this.selectEmployee = this.localeService.getValue('discussionGroup.selectEmployee');
        this.placeholder = this.localeService.getValue('discussionGroup.placeholder');
        // console.log(this.sectionDataTiled);
    };
    /**
     * @param {?} data
     * @param {?=} parentId
     * @param {?=} parentName
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.initSectionTree = /**
     * @param {?} data
     * @param {?=} parentId
     * @param {?=} parentName
     * @return {?}
     */
    function (data, parentId, parentName) {
        var _this = this;
        if (parentId === void 0) { parentId = "discussionParent"; }
        if (parentName === void 0) { parentName = this.allOrg; }
        if (data && data.length) {
            data.forEach((/**
             * @param {?} item
             * @return {?}
             */
            function (item) {
                /** @type {?} */
                var par = {
                    id: parentId,
                    name: parentName
                };
                item.parentsArr.unshift(par);
                item.parents.unshift(parentId);
                if (item.children.length) {
                    _this.initSectionTree(item.children);
                }
            }));
        }
    };
    /**
     * 初始化分组数据
     * 传递过来的数据是列表，需要转换成树的层级结构
     */
    /**
     * 初始化分组数据
     * 传递过来的数据是列表，需要转换成树的层级结构
     * @param {?} data
     * @param {?} parentId
     * @param {?=} parentIdField
     * @param {?=} idField
     * @param {?=} presetParent
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.initSectionData = /**
     * 初始化分组数据
     * 传递过来的数据是列表，需要转换成树的层级结构
     * @param {?} data
     * @param {?} parentId
     * @param {?=} parentIdField
     * @param {?=} idField
     * @param {?=} presetParent
     * @return {?}
     */
    function (data, parentId, parentIdField, idField, presetParent) {
        if (parentIdField === void 0) { parentIdField = 'parentId'; }
        if (idField === void 0) { idField = 'id'; }
        if (presetParent === void 0) { presetParent = null; }
        /** @type {?} */
        var nodes = new Map();
        /** @type {?} */
        var result = [];
        /** @type {?} */
        var unattached = [];
        if (presetParent) {
            nodes.set(presetParent.data.id, presetParent);
        }
        if (data && data.length) {
            data.forEach((/**
             * @param {?} item
             * @return {?}
             */
            function (item) {
                /** @type {?} */
                var node = {
                    data: item,
                    children: [],
                    personnels: {},
                    parent: null,
                    parents: [],
                    parentsArr: [],
                    checked: false
                };
                /** @type {?} */
                var id = item[idField];
                nodes.set(id, node);
                /** @type {?} */
                var PID = item[parentIdField];
                // 初始
                if (PID === parentId || PID === null) {
                    result.push(node);
                }
                else {
                    /** @type {?} */
                    var parent_1 = nodes.get(PID);
                    // console.log(parent);
                    if (parent_1) {
                        /** @type {?} */
                        var par = {
                            id: PID,
                            name: parent_1.data.name
                        };
                        node['parent'] = PID;
                        node['parents'] = tslib_1.__spread(parent_1.parents, [PID]);
                        node['parentsArr'] = tslib_1.__spread(parent_1.parentsArr, [par]);
                        parent_1.children.push(node);
                        parent_1.children.sort((/**
                         * @param {?} a
                         * @param {?} b
                         * @return {?}
                         */
                        function (a, b) { return a.data['sortOrder'] - b.data['sortOrder']; }));
                    }
                    else {
                        unattached.push(node);
                    }
                }
            }));
            if (unattached.length) {
                unattached.forEach((/**
                 * @param {?} unItem
                 * @return {?}
                 */
                function (unItem) {
                    /** @type {?} */
                    var pid = unItem.data[parentIdField];
                    /** @type {?} */
                    var parent = nodes.get(pid);
                    if (parent) {
                        // 构造数据
                        unItem['parent'] = pid;
                        unItem['parents'] = tslib_1.__spread(parent.parents, [pid]);
                        unItem['parentsArr'] = tslib_1.__spread(parent.parentsArr, [{
                                id: pid,
                                name: parent.data.name
                            }]);
                        parent.children.push(unItem);
                        parent.children.sort((/**
                         * @param {?} a
                         * @param {?} b
                         * @return {?}
                         */
                        function (a, b) { return a.data['sortOrder'] - b.data['sortOrder']; }));
                    }
                }));
            }
        }
        return result;
    };
    /**
     * 所有nodes的子节点转化成数组，并返回数组
     * @param nodes
     */
    /**
     * 所有nodes的子节点转化成数组，并返回数组
     * @param {?} nodes
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.tileSectionData = /**
     * 所有nodes的子节点转化成数组，并返回数组
     * @param {?} nodes
     * @return {?}
     */
    function (nodes) {
        /** @type {?} */
        var r = [];
        this.getAllNodes(nodes, r);
        return r;
    };
    /**
     * 所有nodes的子节点转化成数组，并跟新数组r
     * @param nodes
     * @param r
     */
    /**
     * 所有nodes的子节点转化成数组，并跟新数组r
     * @param {?} nodes
     * @param {?} r
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.getAllNodes = /**
     * 所有nodes的子节点转化成数组，并跟新数组r
     * @param {?} nodes
     * @param {?} r
     * @return {?}
     */
    function (nodes, r) {
        var _this = this;
        nodes.forEach((/**
         * @param {?} n
         * @return {?}
         */
        function (n) {
            r.push(n);
            if (n.children.length) {
                _this.getAllNodes(n.children, r);
            }
        }));
    };
    /**
     * 点击下级
     * @param section
     */
    /**
     * 点击下级
     * @param {?} section
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.sectionNext = /**
     * 点击下级
     * @param {?} section
     * @return {?}
     */
    function (section) {
        var _this = this;
        // 构造组织节点下面的人员信息，如果没有人员信息，就构造结构，然后发请求获取人员信息
        this.showOrHideLoading(true);
        forkJoin([this.getOrgByLayerHttp(section), this.getPersonByUrlHttp(section)])
            .subscribe((/**
         * @param {?} orgAndPersonDatas
         * @return {?}
         */
        function (orgAndPersonDatas) {
            _this.showOrHideLoading(false);
            // 获取组织数据
            /** @type {?} */
            var getOrgData = orgAndPersonDatas[0];
            if (getOrgData !== false) {
                // 从服务器端真实返回数据,直接在方法内更新section的结构
                _this.initSectionData(getOrgData, '', 'parentId', 'id', section);
                // 输入所有组织树的数据，看section变更是否更新
                // 更新数据
                _this.sectionDataTiled = _this.tileSectionData(_this.sectionDataTree);
            }
            // 获取人员数据
            /** @type {?} */
            var getPersonData = orgAndPersonDatas[1];
            if (getPersonData !== false) {
                // 构造数据
                section.personnels = {
                    count: 0,
                    pageCount: 0,
                    pageIndex: 1,
                    pageSize: 0,
                    totalCount: 0,
                    users: []
                };
                if (getPersonData.hasOwnProperty("users")) {
                    section.personnels.count = getPersonData['count'];
                    section.personnels.pageCount = getPersonData['pageCount'];
                    section.personnels.pageIndex = getPersonData['pageIndex'];
                    section.personnels.pageSize = getPersonData['pageSize'];
                    section.personnels.totalCount = getPersonData['totalCount'];
                    section.personnels['users'] = tslib_1.__spread(section.personnels['users'], getPersonData['users']);
                }
                else {
                    section['noPersonnel'] = true;
                }
            }
            _this.getNextData(section);
        }));
    };
    /**
     * 获取下级数据
     * 点击的组织对应的是：当前组织节点
     * @param section
     */
    /**
     * 获取下级数据
     * 点击的组织对应的是：当前组织节点
     * @param {?} section
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.getNextData = /**
     * 获取下级数据
     * 点击的组织对应的是：当前组织节点
     * @param {?} section
     * @return {?}
     */
    function (section) {
        var _this = this;
        if ((section.children && section.children.length) || (JSON.stringify(section.personnels) !== '{}')) {
            // 如果当前组织节点有下级数据
            /** @type {?} */
            var sec = this.getSectionById(section.data.id);
            if (sec) {
                // 判断当前组织节点，是否勾选全选
                /** @type {?} */
                var secChecked_1 = sec['checked'];
                sec['disabled'] = secChecked_1 ? true : false;
                if (!sec['indeterminate']) {
                    // 当前组织的下一级组织都勾选
                    if (sec.children && sec.children.length) {
                        sec.children.forEach((/**
                         * @param {?} item
                         * @return {?}
                         */
                        function (item) {
                            item['checked'] = secChecked_1;
                            item['indeterminate'] = false;
                            // item['disabled'] = sec['disabled'];
                        }));
                    }
                    ;
                    // 如果有人员，当前人员都勾选
                    if (section.personnels['users'] && section.personnels['users'].length) {
                        section.personnels['users'].forEach((/**
                         * @param {?} user
                         * @return {?}
                         */
                        function (user) {
                            user['checked'] = secChecked_1;
                            user['indeterminate'] = false;
                            // user['disabled'] = sec['disabled'];
                        }));
                    }
                }
            }
            /** @type {?} */
            var secParent = {
                id: sec.data.id,
                name: sec.data.name
            };
            // 当前组织的父节点与当前组织节点数据合并
            /** @type {?} */
            var secCrumbs = tslib_1.__spread(sec['parentsArr'], [secParent]);
            // 如果当前组织有子节点，获取子节点的父数组，否则，按照上面数据合并获取
            this.sectionCrumbs = sec.children.length ? sec.children[0]['parentsArr'] : secCrumbs;
            // 新的组织节点是当前组织的子节点
            this.currentSectionData = sec.children.length ? sec.children : [];
            // 记录当前组织节点
            this.currentSection = sec;
            // 记录当前组织节点的数据
            this.currentSectionId = sec.data.id;
            // 当前组织下对应的人员信息
            this.currentSectionPerson = sec.personnels;
            setTimeout((/**
             * @return {?}
             */
            function () {
                _this.initCrumbsList();
            }), 0);
            // console.log(this.currentSection);
            this.cd.detectChanges();
        }
        else {
            this.currentSectionPerson = [];
        }
    };
    /**
     * 获取人员接口定义
     * @param ougId
     * @param pageIndex
     * @param pageSize
     */
    /**
     * 获取人员接口定义
     * @param {?} ougId
     * @param {?} pageIndex
     * @param {?=} pageSize
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.getPersonnel = /**
     * 获取人员接口定义
     * @param {?} ougId
     * @param {?} pageIndex
     * @param {?=} pageSize
     * @return {?}
     */
    function (ougId, pageIndex, pageSize) {
        if (pageSize === void 0) { pageSize = this.pageSize; }
        // let data = {};
        if (this.orgUrl) {
            /** @type {?} */
            var url = this.orgUrl + "?orgId=" + ougId + "&pageSize=" + pageSize + "&pageIndex=" + pageIndex;
            return this.http.get(url);
            // if(ougId == 'langchao'){
            //     return this.http.get('assets/data/discussionPerson.json');
            // }
            // else if(ougId == 'guoji'){
            //     return this.http.get('assets/data/discussionPerson2.json');
            // }
            // else if(ougId == 'yanfa'){
            //     return this.http.get('assets/data/discussionPerson3.json');
            // }
            // else{
            //     return of(true);
            // }
        }
        else {
            return of(false);
        }
        // return data;
    };
    /**
     * 分层获取数据
     */
    /**
     * 分层获取数据
     * @private
     * @param {?} section
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.getOrgByLayerHttp = /**
     * 分层获取数据
     * @private
     * @param {?} section
     * @return {?}
     */
    function (section) {
        if (!section.data['isDetail'] && (!section.children || section.children.length == 0)) {
            //不是叶子节点，但是子为空
            if (this.urlGetOrgByLayer) {
                /** @type {?} */
                var url = this.urlGetOrgByLayer + "?param={\"parentId\":\"" + section.data.id + "\"}";
                return this.http.get(url);
            }
        }
        // 处理过的数据
        return of(false);
    };
    /**
     * 获取人员
     * @param section
     */
    /**
     * 获取人员
     * @private
     * @param {?} section
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.getPersonByUrlHttp = /**
     * 获取人员
     * @private
     * @param {?} section
     * @return {?}
     */
    function (section) {
        if (JSON.stringify(section.personnels) === '{}' && !section.hasOwnProperty('noPersonnel')) {
            return this.getPersonnel(section.data.id, 0);
        }
        return of(false);
    };
    /**
     * @param {?} id
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.getSectionById = /**
     * @param {?} id
     * @return {?}
     */
    function (id) {
        /** @type {?} */
        var section = this.sectionDataTiled.find((/**
         * @param {?} sec
         * @return {?}
         */
        function (sec) {
            return sec.data.id == id;
        }));
        return section;
    };
    /**
     * 点击面包屑
     * @param crumbs
     */
    /**
     * 点击面包屑
     * @param {?} crumbs
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.crumbsClick = /**
     * 点击面包屑
     * @param {?} crumbs
     * @return {?}
     */
    function (crumbs) {
        var _this = this;
        if (crumbs.id == this.currentSectionId)
            return;
        /** @type {?} */
        var sec = this.getSectionById(crumbs.id);
        this.sectionCrumbs = sec.children.length ? sec.children[0]['parentsArr'] : [];
        this.currentSectionData = sec.children.length ? sec.children : [];
        this.currentSectionId = sec.data.id;
        this.currentSectionPerson = sec.personnels;
        this.currentSection = sec;
        setTimeout((/**
         * @return {?}
         */
        function () {
            _this.initCrumbsList();
        }), 0);
    };
    /**
     * 部门或人员状态变化
     * @param event
     * @param section
     */
    /**
     * 部门或人员状态变化
     * @param {?} event
     * @param {?} section
     * @param {?} type
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.handleClick = /**
     * 部门或人员状态变化
     * @param {?} event
     * @param {?} section
     * @param {?} type
     * @return {?}
     */
    function (event, section, type) {
        var _this = this;
        if (this.currentSection.disabled)
            return;
        event.stopPropagation();
        section.checked = !section.checked;
        section['indeterminate'] = false;
        this.setSectionDataChecked();
        if (section.checked) {
            /** @type {?} */
            var selectedData = {
                parent: this.currentSection,
                data: section
            };
            if (type == 'user') {
                if (this._isSelectedInArray(section[this.listIdField], this.listIdField, this.selectedUsers)) {
                    return;
                }
                else {
                    this.selectedUsers.push(selectedData);
                }
            }
            else if (type == 'section') {
                this.addSection(section);
            }
        }
        else {
            if (type == 'user') {
                if (this._isSelectedInArray(section[this.listIdField], this.listIdField, this.selectedUsers)) {
                    this.selectedUsers.forEach((/**
                     * @param {?} item
                     * @param {?} index
                     * @return {?}
                     */
                    function (item, index) {
                        if (item['data'][_this.listIdField] === section[_this.listIdField]) {
                            _this.selectedUsers.splice(index, 1);
                        }
                    }));
                }
            }
            else if (type == 'section') {
                this.removeSection(section);
            }
        }
        // console.log(this.selectedUsers,this.selectedSections);
    };
    /**
     * @param {?} event
     * @param {?} user
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.handleSearchClick = /**
     * @param {?} event
     * @param {?} user
     * @return {?}
     */
    function (event, user) {
        var _this = this;
        event.stopPropagation();
        user.checked = !user.checked;
        if (user.checked) {
            if (this._isSelectedInArray(user[this.listIdField], this.listIdField, this.selectedUsers)) {
                return;
            }
            else {
                /** @type {?} */
                var selectedData = {
                    parent: null,
                    data: user
                };
                this.selectedUsers.push(selectedData);
            }
        }
        else {
            if (this._isSelectedInArray(user[this.listIdField], this.listIdField, this.selectedUsers)) {
                this.selectedUsers.forEach((/**
                 * @param {?} item
                 * @param {?} index
                 * @return {?}
                 */
                function (item, index) {
                    if (item['data'][_this.listIdField] === user[_this.listIdField]) {
                        _this.selectedUsers.splice(index, 1);
                    }
                }));
            }
        }
    };
    /**
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.setSectionDataChecked = /**
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var curChecked = false;
        /** @type {?} */
        var sec = this.currentSection;
        /** @type {?} */
        var secArray = [];
        if (sec.children || (sec.personnels['users'] && sec.personnels['users'].length)) {
            secArray = secArray.concat(sec.children, sec.personnels['users']);
            /** @type {?} */
            var secCheckedList = secArray.filter((/**
             * @param {?} item
             * @return {?}
             */
            function (item) {
                if (item.hasOwnProperty('checked') && item['checked']) {
                    return item;
                }
            }));
            /** @type {?} */
            var secIndeList = sec.children.filter((/**
             * @param {?} item
             * @return {?}
             */
            function (item) {
                if (item.hasOwnProperty('indeterminate') && item['indeterminate']) {
                    return item;
                }
            }));
            this.currentSection['indeterminate'] = (secIndeList && secIndeList.length) ? true : false;
            if (secCheckedList && secCheckedList.length) {
                if (secCheckedList.length == secArray.length && sec.personnels.pageIndex >= sec.personnels.pageCount - 1) {
                    curChecked = true;
                }
                else {
                    this.currentSection['indeterminate'] = true;
                }
            }
            else {
                curChecked = false;
            }
            this.currentSection['checked'] = curChecked;
            // console.log(this.currentSection);
        }
        if (this.currentSection.parents.length > 0 && this.currentSection['indeterminate']) {
            this.currentSection.parents.forEach((/**
             * @param {?} par
             * @return {?}
             */
            function (par) {
                /** @type {?} */
                var parSec = _this.getSectionById(par);
                if (parSec) {
                    parSec['indeterminate'] = _this.currentSection['indeterminate'];
                }
            }));
        }
    };
    /**
     * @param {?=} status
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.setChildDisabledStatus = /**
     * @param {?=} status
     * @return {?}
     */
    function (status) {
        if (status === void 0) { status = true; }
        /** @type {?} */
        var sec = this.currentSection;
        // sec['disabled'] = status;
        if (sec.children || (sec.personnels['users'] && sec.personnels['users'].length)) {
            sec.children.forEach((/**
             * @param {?} item
             * @return {?}
             */
            function (item) {
                item['disabled'] = status;
            }));
            // sec['childDisabled'] = status;
            sec.personnels['users'].forEach((/**
             * @param {?} user
             * @return {?}
             */
            function (user) {
                user['disabled'] = status;
            }));
        }
    };
    /**
     * 人员查看更多
     */
    /**
     * 人员查看更多
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.getMoreData = /**
     * 人员查看更多
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.currentSectionId) {
            /** @type {?} */
            var sec_1 = this.getSectionById(this.currentSectionId);
            if (sec_1) {
                this.getPersonnel(this.currentSectionId, sec_1.personnels.pageIndex + 1).subscribe((/**
                 * @param {?} d
                 * @return {?}
                 */
                function (d) {
                    if (d.hasOwnProperty("users")) {
                        sec_1.personnels.pageIndex = d['pageIndex'];
                        sec_1.personnels['users'] = tslib_1.__spread(sec_1.personnels['users'], d['users']);
                        if (sec_1.personnels['users'].length) {
                            if (sec_1['checked']) {
                                sec_1.personnels['users'].forEach((/**
                                 * @param {?} user
                                 * @return {?}
                                 */
                                function (user) {
                                    user['checked'] = sec_1['checked'];
                                }));
                            }
                        }
                        // this.setSectionDataChecked();
                    }
                    _this.cd.detectChanges();
                }));
            }
        }
    };
    /**
     * 全选
     * @param event
     */
    /**
     * 全选
     * @param {?} event
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.handleClickAll = /**
     * 全选
     * @param {?} event
     * @return {?}
     */
    function (event) {
        if (this.currentSection.disabled)
            return;
        if (this.currentSection) {
            this.currentSection['checked'] = !this.currentSection['checked'];
            this.currentSection['indeterminate'] = false;
            /** @type {?} */
            var curChecked_1 = this.currentSection['checked'];
            this.currentSection.children.forEach((/**
             * @param {?} item
             * @return {?}
             */
            function (item) {
                item['checked'] = curChecked_1;
            }));
            if (JSON.stringify(this.currentSection.personnels) != '{}' && this.currentSection['personnels']['users'].length) {
                this.currentSection['personnels']['users'].forEach((/**
                 * @param {?} user
                 * @return {?}
                 */
                function (user) {
                    user['checked'] = curChecked_1;
                }));
            }
            if (curChecked_1) {
                this.addSection(this.currentSection);
            }
            else {
                this.removeSection(this.currentSection);
            }
        }
    };
    /**
     * @param {?} section
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.addSection = /**
     * @param {?} section
     * @return {?}
     */
    function (section) {
        if (this._isSelectedInArray(section['data'][this.listIdField], this.listIdField, this.selectedSections)) {
            return;
        }
        else {
            this.selectedSections.push(section);
        }
    };
    /**
     * @param {?} section
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.removeSection = /**
     * @param {?} section
     * @return {?}
     */
    function (section) {
        var _this = this;
        if (this._isSelectedInArray(section['data'][this.listIdField], this.listIdField, this.selectedSections)) {
            this.selectedSections.forEach((/**
             * @param {?} item
             * @param {?} index
             * @return {?}
             */
            function (item, index) {
                if (item['data'][_this.listIdField] === section['data'][_this.listIdField]) {
                    _this.selectedSections.splice(index, 1);
                }
            }));
        }
    };
    /**
     * 搜索用户
     */
    /**
     * 搜索用户
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.searchUser = /**
     * 搜索用户
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.searchText) {
            this.showSearchList = true;
            this.showOrHideLoading(true);
            this.getSearchData(this.searchText, 0).subscribe((/**
             * @param {?} d
             * @return {?}
             */
            function (d) {
                _this.showOrHideLoading(false);
                if (d.hasOwnProperty("users")) {
                    _this.searchUserList = d;
                }
            }));
        }
        else {
            this.showSearchList = false;
        }
    };
    /**
     * 搜索人员查看更多
     */
    /**
     * 搜索人员查看更多
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.getMoreSearchData = /**
     * 搜索人员查看更多
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.searchText && this.personSearchUrl) {
            this.getSearchData(this.searchText, this.searchUserList.pageIndex + 1).subscribe((/**
             * @param {?} d
             * @return {?}
             */
            function (d) {
                if (d.hasOwnProperty("users")) {
                    _this.searchUserList.pageIndex = d['pageIndex'];
                    _this.searchUserList['users'] = tslib_1.__spread(_this.searchUserList['users'], d['users']);
                }
            }));
        }
    };
    /**
     * @param {?} text
     * @param {?} pageIndex
     * @param {?=} pageSize
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.getSearchData = /**
     * @param {?} text
     * @param {?} pageIndex
     * @param {?=} pageSize
     * @return {?}
     */
    function (text, pageIndex, pageSize) {
        if (pageSize === void 0) { pageSize = this.pageSize; }
        if (this.personSearchUrl) {
            /** @type {?} */
            var url = this.personSearchUrl + "?param=" + text + "&pageSize=" + pageSize + "&pageIndex=" + pageIndex;
            return this.http.get(url);
            //return this.http.get('assets/data/discussionPerson3.json');
        }
        else {
            return of(true);
        }
    };
    /**
     * 选中人员或组织删除
     * @param data
     * @param type
     */
    /**
     * 选中人员或组织删除
     * @param {?} data
     * @param {?} type
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.selectionRemove = /**
     * 选中人员或组织删除
     * @param {?} data
     * @param {?} type
     * @return {?}
     */
    function (data, type) {
        var _this = this;
        if (!data)
            return;
        if (type == 'user') {
            /** @type {?} */
            var index = this.selectedUsers.findIndex((/**
             * @param {?} user
             * @return {?}
             */
            function (user) {
                return user.data.id == data.data.id;
            }));
            if (index >= 0) {
                this.selectedUsers.splice(index, 1);
            }
            data.data['checked'] = false;
        }
        else if (type == 'section') {
            /** @type {?} */
            var index = this.selectedSections.findIndex((/**
             * @param {?} item
             * @return {?}
             */
            function (item) {
                return item.data.id == data.data.id;
            }));
            if (index >= 0) {
                this.selectedSections.splice(index, 1);
            }
            data['checked'] = false;
        }
        /** @type {?} */
        var dataParent = null;
        if (type == 'section') {
            dataParent = this.getSectionById(data.parent);
        }
        else if (type == 'user') {
            // bugNum:480649
            if (data['parent']) {
                dataParent = this.getSectionById(data.parent.data.id);
            }
        }
        if (dataParent) {
            dataParent['checked'] = false;
            if ((dataParent.children && dataParent.children.length) || (dataParent.personnels.users && dataParent.personnels.users.length)) {
                /** @type {?} */
                var childrens = dataParent.children.filter((/**
                 * @param {?} child
                 * @return {?}
                 */
                function (child) {
                    return child['checked'];
                }));
                /** @type {?} */
                var users = dataParent.personnels.users.filter((/**
                 * @param {?} user
                 * @return {?}
                 */
                function (user) {
                    return user['checked'];
                }));
                if ((childrens && childrens.length) || (users && users.length)) {
                    dataParent['indeterminate'] = true;
                }
                else {
                    dataParent['indeterminate'] = false;
                }
                if (dataParent.parents.length > 0) {
                    dataParent.parents.forEach((/**
                     * @param {?} par
                     * @return {?}
                     */
                    function (par) {
                        /** @type {?} */
                        var parSec = _this.getSectionById(par);
                        if ((parSec.children && parSec.children.length) || (parSec.personnels.users && parSec.personnels.users.length)) {
                            /** @type {?} */
                            var parchildrens = parSec.children.filter((/**
                             * @param {?} child
                             * @return {?}
                             */
                            function (child) {
                                return child['checked'];
                            }));
                            /** @type {?} */
                            var parusers = parSec.personnels.users.filter((/**
                             * @param {?} user
                             * @return {?}
                             */
                            function (user) {
                                return user['checked'];
                            }));
                            if ((parchildrens && parchildrens.length) || (parusers && parusers.length)) {
                                parSec['indeterminate'] = true;
                            }
                            else {
                                if (dataParent['indeterminate']) {
                                    parSec['indeterminate'] = dataParent['indeterminate'];
                                }
                                else {
                                    parSec['indeterminate'] = false;
                                }
                            }
                        }
                    }));
                }
            }
        }
    };
    /**
     * 删除右侧全部数据
     */
    /**
     * 删除右侧全部数据
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.moveAllToLeft = /**
     * 删除右侧全部数据
     * @return {?}
     */
    function () {
        this.selectedUsers.forEach((/**
         * @param {?} user
         * @return {?}
         */
        function (user) {
            user.data['checked'] = false;
        }));
        this.selectedSections.forEach((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            item['checked'] = false;
        }));
        this.sectionDataTiled.forEach((/**
         * @param {?} sec
         * @return {?}
         */
        function (sec) {
            sec['indeterminate'] = false;
            sec['checked'] = false;
            sec['disabled'] = false;
            if (JSON.stringify(sec.personnels) != '{}' && sec['personnels']['users'].length) {
                sec['personnels']['users'].forEach((/**
                 * @param {?} user
                 * @return {?}
                 */
                function (user) {
                    user['checked'] = false;
                }));
            }
        }));
        this.selectedUsers = [];
        this.selectedSections = [];
        this.cd.markForCheck();
    };
    /**
     *
     * @param numberType 0：取消；1：确定
     */
    /**
     *
     * @param {?} numberType 0：取消；1：确定
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.returnResult = /**
     *
     * @param {?} numberType 0：取消；1：确定
     * @return {?}
     */
    function (numberType) {
        this.finalText = '';
        if (numberType) {
            // console.log(this.selectedUsers,this.selectedSections);
            this.selectionsChange.emit({
                info: 'confirm',
                data: {
                    users: this.selectedUsers,
                    section: this.selectedSections
                }
            });
            // this.selections.forEach(item => {
            //     this.finalText += item[this.listDisplayText] + '；';
            // })
        }
        else {
            this.selectionsChange.emit({
                info: 'cancel',
                data: {
                    users: [],
                    section: []
                }
            });
        }
        this.moveAllToLeft();
        this.searchText = '';
        this.searchUser();
        this.personnelDialog.close();
    };
    /**
     *  面包屑列表显示
     */
    /**
     *  面包屑列表显示
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.initCrumbsList = /**
     *  面包屑列表显示
     * @return {?}
     */
    function () {
        /** @type {?} */
        var crumbsListWidth = this.crumbsList.nativeElement.offsetWidth - 30;
        /** @type {?} */
        var crumbsListItems = this.crumbsList.nativeElement.children;
        /** @type {?} */
        var crumbsListItemWidth = 0;
        if (crumbsListItems && crumbsListItems.length) {
            for (var i = crumbsListItems.length - 1; i >= 0; i--) {
                this.renderer.setStyle(crumbsListItems[i], 'display', 'flex');
                /** @type {?} */
                var width = crumbsListItems[i].offsetWidth;
                crumbsListItemWidth += width;
                if (crumbsListItemWidth >= crumbsListWidth) {
                    this.renderer.setStyle(crumbsListItems[i], 'display', 'none');
                }
                else {
                    this.renderer.setStyle(crumbsListItems[i], 'display', 'flex');
                }
            }
        }
        ;
        if (crumbsListItemWidth >= crumbsListWidth) {
            this.crumbsEllipsis = true;
        }
        else {
            this.crumbsEllipsis = false;
        }
    };
    /**
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.crumbsMore = /**
     * @return {?}
     */
    function () {
        if (this.sectionCrumbs && this.sectionCrumbs.length) {
            this.crumbsClick(this.sectionCrumbs[0]);
        }
    };
    /**
     * @param {?} value
     * @param {?} field
     * @param {?} array
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype._isInArray = /**
     * @param {?} value
     * @param {?} field
     * @param {?} array
     * @return {?}
     */
    function (value, field, array) {
        if (!field || !value) {
            throw new Error('前2个参数必填');
        }
        return array.find((/**
         * @param {?} item
         * @return {?}
         */
        function (item) { return value === item[field]; })) ? true : false;
    };
    /**
     * @param {?} value
     * @param {?} field
     * @param {?} array
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype._isSelectedInArray = /**
     * @param {?} value
     * @param {?} field
     * @param {?} array
     * @return {?}
     */
    function (value, field, array) {
        if (!field || !value) {
            throw new Error('前2个参数必填');
        }
        return array.find((/**
         * @param {?} item
         * @return {?}
         */
        function (item) { return value === item['data'][field]; })) ? true : false;
    };
    /**
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.closeDialog = /**
     * @return {?}
     */
    function () {
        this.moveAllToLeft();
        this.searchText = '';
        this.searchUser();
    };
    /**
     * 显示或隐藏正在加载
     * @param showOrHide ：true为显示，hide为隐藏
     */
    /**
     * 显示或隐藏正在加载
     * @private
     * @param {?} showOrHide ：true为显示，hide为隐藏
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.showOrHideLoading = /**
     * 显示或隐藏正在加载
     * @private
     * @param {?} showOrHide ：true为显示，hide为隐藏
     * @return {?}
     */
    function (showOrHide) {
        if (!this.discussionContent || !this.loadingSer) {
            return;
        }
        if (showOrHide) {
            // 打开
            this.loadingInstance = this.loadingSer.show({ delay: 500, container: this.discussionContent, type: 1, message: '全力加载中...' });
        }
        else if (this.loadingInstance) {
            // 关闭
            this.loadingSer.close(this.loadingInstance.id);
        }
    };
    DiscussionPersonnelComponent.decorators = [
        { type: Component, args: [{
                    selector: 'farris-discussion-personnel',
                    template: "<div class=\"farris-discussion-personnel-wrapper\">\r\n    <button class=\"btn btn-link\" (click)=\"personnelDialog.show()\">{{ 'discussionGroup.advancedQuery' | locale }}</button>\r\n</div>\r\n<ng-template #buttonRef>\r\n    <button class=\"btn btn-secondary\" (click)=\"returnResult(0)\">{{ 'discussionGroup.cancel' | locale }}</button>\r\n    <button class=\"btn btn-primary\" (click)=\"returnResult(1)\">{{ 'discussionGroup.confirm' | locale }}</button>\r\n</ng-template>\r\n<farris-dialog #personnelDialog [buttons]=\"buttonRef\" [width]=\"690\" [height]=\"520\" [resizable]=\"false\" [title]=\"selectEmployee\" (closed)=\"closeDialog()\">\r\n    <div class=\"f-discussion-dialog-content\">\r\n        <div class=\"f-discussion-dialog-content-left col-6 d-flex flex-column\">\r\n            <div class=\"f-discussion-personnel-search\">\r\n                <input-group [placeholder]=\"placeholder\" [groupText]=\"groupIcon\" [(ngModel)]=\"searchText\" (valueChange)=\"searchUser()\" (enterHandle)=\"searchUser()\" (clickHandle)=\"searchUser()\"></input-group>\r\n            </div>\r\n            <div class=\"f-discussion-tab-content f-utils-fill d-flex flex-column\" #discussionContent>\r\n                <div class=\"f-discussion-personnel-content f-utils-fill d-flex flex-column\" [ngClass]=\"{'f-discussion-personnel-content-hide': showSearchList}\">\r\n                    <div class=\"f-discussion-personnel-crumbs d-flex\">\r\n                        <ul class=\"crumbs-list d-flex\" #crumbsList [ngClass]=\"{'crumbs-list-padding': crumbsEllipsis}\" *ngIf=\"sectionCrumbs && sectionCrumbs.length\">\r\n                            <li class=\"crumbs-list-item\" *ngFor=\"let crumbs of sectionCrumbs;let first = first;let last = last;\" (click)=\"crumbsClick(crumbs)\"  \r\n                            [ngClass]=\"{'crumbs-list-item-disabled': !(first || !last)}\">\r\n                                <!-- bugNum\uFF1A449399 -->\r\n                                <span class=\"crumbs-text\" [title]=\"crumbs.name\">{{crumbs.name}}</span>\r\n                                <span class=\"crumbs-arrow f-icon f-icon-arrow-chevron-right\" *ngIf=\"first || !last\"></span>\r\n                            </li>\r\n                        </ul>\r\n                        <div class=\"crumbs-list-ellipsis crumbs-list-item\" *ngIf=\"crumbsEllipsis\" (click)=\"crumbsMore()\">\r\n                            <span class=\"crumbs-text\">...</span>\r\n                            <span class=\"crumbs-arrow f-icon f-icon-arrow-chevron-right\"></span>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"f-discussion-section-content f-utils-fill\">\r\n                        <perfect-scrollbar>\r\n                            <ul class=\"f-discussion-section-list\">\r\n                                <!-- <li class=\"section-list-item\" *ngIf=\"currentSectionData.length || currentSectionPerson.users.length\" (click)=\"handleClickAll($event)\">\r\n                                    <div class=\"custom-control custom-checkbox  custom-control-inline section-list-item-checkbox\">\r\n                                        <input type=\"checkbox\" class=\"custom-control-input\" [checked]=\"currentSection.checked\" [disabled]=\"currentSection.disabled\" [indeterminate]=\"currentSection.indeterminate\">\r\n                                        <label class=\"custom-control-label\"></label>\r\n                                    </div>\r\n                                    <div class=\"section-list-item-name f-utils-fill\">\r\n                                        \u5168\u9009\r\n                                    </div>\r\n                                </li> -->\r\n                                <li class=\"section-list-item\" *ngFor=\"let section of currentSectionData\">\r\n                                    <div class=\"custom-control custom-checkbox custom-control-inline section-list-item-checkbox\" (click)=\"handleClick($event,section,'section')\">\r\n                                        <input type=\"checkbox\" class=\"custom-control-input\" [checked]=\"section.checked\" [indeterminate]=\"section.indeterminate\" [disabled]=\"currentSection.disabled\">\r\n                                        <label class=\"custom-control-label\"></label>\r\n                                    </div>\r\n                                    <div class=\"section-list-item-name f-utils-fill\" [attr.data-orgid]=\"section.data.id\" [title]=\"section.data.name\" (click)=\"handleClick($event,section,'section')\">\r\n                                        {{section.data.name}}\r\n                                    </div>\r\n                                    <div class=\"section-list-item-next\" (click)=\"sectionNext(section)\">\r\n                                        {{ 'discussionGroup.next' | locale }}\r\n                                    </div>\r\n                                </li>\r\n                                <ng-container *ngIf=\"currentSectionPerson\">\r\n                                    <li class=\"section-list-item person-list-item\" *ngFor=\"let person of currentSectionPerson.users\" (click)=\"handleClick($event,person,'user')\">\r\n                                        <div class=\"custom-control custom-checkbox  custom-control-inline section-list-item-checkbox\">\r\n                                            <input type=\"checkbox\" class=\"custom-control-input\" [checked]=\"person.checked\" [disabled]=\"currentSection.disabled\">\r\n                                            <label class=\"custom-control-label\"></label>\r\n                                        </div>\r\n                                        <div class=\"person-list-item-img\">\r\n                                            <img [src]=\"person.imgData\" alt=\"\" *ngIf=\"person.imgData\">\r\n                                            <div class=\"f-discussion-personnel-item-tip\" *ngIf=\"!person.imgData\" [innerHTML]=\"person | avatarHtml\"></div>\r\n                                        </div>\r\n                                        <div class=\"person-list-item-content f-utils-fill\">\r\n                                            <div class=\"section-list-item-name\" [title]=\"person.name\">\r\n                                                {{person.name}}\r\n                                            </div>\r\n                                            <div class=\"section-list-item-tip\">\r\n                                                <!-- {{person.email}} -->\r\n                                                <span *ngIf=\"sectionCrumbs.length>=2\">{{sectionCrumbs[sectionCrumbs.length - 2].name}}</span>\r\n                                                <span *ngIf=\"sectionCrumbs.length>=2\">/</span>\r\n                                                <span>{{sectionCrumbs[sectionCrumbs.length - 1].name}}</span>\r\n                                            </div>\r\n                                        </div>\r\n                                        <!-- \u4EBA\u5458\u5217\u8868 -->\r\n                                    </li>\r\n                                    <div class=\"f-discussion-person-list-page\" *ngIf=\"currentSectionPerson['users'] && currentSectionPerson['users'].length\">\r\n                                        <span class=\"section-page-more section-page-text\" *ngIf=\"currentSectionPerson.pageIndex < currentSectionPerson.pageCount-1\" (click)=\"getMoreData()\">{{ 'discussionGroup.viewMore' | locale }}</span>\r\n                                        <!-- <span class=\"section-page-end section-page-text\"  *ngIf=\"currentSectionPerson.pageIndex >= currentSectionPerson.pageCount-1\">\u52A0\u8F7D\u5B8C\u6210</span> -->\r\n                                    </div>\r\n                                </ng-container>\r\n                            </ul>\r\n                            <div class=\"f-discussion-section-list-empty\" *ngIf=\"!currentSectionData.length &&(currentSectionPerson.users && !currentSectionPerson.users.length)\">\r\n                                <span class=\"f-icon f-icon-top_my\"></span>\r\n                                <span class=\"section-list-empty-text\">{{ 'discussionGroup.emptyList' | locale }}</span>\r\n                            </div>\r\n                        </perfect-scrollbar>\r\n                    </div>\r\n                </div>\r\n                <div class=\"f-discussion-personnel-search-list f-utils-fill\" [hidden]=\"!showSearchList\">\r\n                    <perfect-scrollbar>\r\n                        <ul class=\"f-discussion-section-list\" *ngIf=\"searchUserList && searchUserList.users && searchUserList.users.length\">\r\n                            <li class=\"section-list-item person-list-item\" *ngFor=\"let user of searchUserList.users\" (click)=\"handleSearchClick($event,user)\">\r\n                                <div class=\"custom-control custom-checkbox  custom-control-inline section-list-item-checkbox\">\r\n                                    <input type=\"checkbox\" class=\"custom-control-input\" [checked]=\"user.checked\">\r\n                                    <label class=\"custom-control-label\"></label>\r\n                                </div>\r\n                                <div class=\"person-list-item-img\">\r\n                                    <img [src]=\"user.imgData\" alt=\"\" *ngIf=\"user.imgData\">\r\n                                    <div class=\"f-discussion-personnel-item-tip\" *ngIf=\"!user.imgData\" [innerHTML]=\"user | avatarHtml\"></div>\r\n                                </div>\r\n                                <div class=\"person-list-item-content f-utils-fill\">\r\n                                    <div class=\"section-list-item-name\" [title]=\"user.name\">\r\n                                        {{user.name}}\r\n                                    </div>\r\n                                    <div class=\"section-list-item-tip\">\r\n                                        <span [innerHTML]=\"user | getOrgText:sectionData\"></span>\r\n                                    </div>\r\n                                </div>\r\n                            </li>\r\n                            <div class=\"f-discussion-person-list-page\">\r\n                                <span class=\"section-page-more section-page-text\" *ngIf=\"searchUserList.pageIndex < searchUserList.pageCount-1\" (click)=\"getMoreSearchData()\">{{ 'discussionGroup.viewMore' | locale }}</span>\r\n                            </div>\r\n                        </ul>\r\n                        <div class=\"f-discussion-section-list-empty\" *ngIf=\"!searchUserList.users || !searchUserList.users.length\">\r\n                            <span class=\"f-icon f-icon-top_my\"></span>\r\n                            <span class=\"section-list-empty-text\">{{ 'discussionGroup.emptyList' | locale }}</span>\r\n                        </div>\r\n                    </perfect-scrollbar>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"f-discussion-dialog-content-right f-utils-fill d-flex flex-column\">\r\n            <div class=\"f-discussion-selected-personnel f-utils-fill d-flex flex-column\">\r\n                <div class=\"f-discussion-selected-personnel-header\">\r\n                    <div class=\"f-discussion-selected-personnel-header-text\">\r\n                        <span>{{ 'discussionGroup.selected' | locale }}</span>(<span>{{ 'discussionGroup.people' | locale }}</span><span>{{selectedUsers.length}}</span><span>{{ 'discussionGroup.per' | locale }}</span>\uFF0C<span>{{ 'discussionGroup.section' | locale }}</span><span>{{selectedSections.length}}</span><span>{{ 'discussionGroup.pcs' | locale }}</span>)\r\n                    </div>\r\n                    <div class=\"f-discussion-selected-personnel-header-btn\" (click)=\"moveAllToLeft()\">\r\n                        <button class=\"btn btn-link\">{{ 'discussionGroup.emptySelected' | locale }}</button>\r\n                    </div>\r\n                </div>\r\n                <div class=\"f-discussion-selected-personnel-content f-utils-fill d-flex flex-column\">\r\n                    <div class=\"f-discussion-selected-list f-utils-fill\">\r\n                        <perfect-scrollbar>\r\n                            <div class=\"f-discussion-selected-item\" *ngFor=\"let user of selectedUsers\">\r\n                                <div class=\"f-discussion-personnel-item-avatar\">\r\n                                    <img [src]=\"user.data.imgData\" alt=\"\" *ngIf=\"user.data.imgData\">\r\n                                    <div class=\"f-discussion-personnel-item-tip\" *ngIf=\"!user.data.imgData\" [innerHTML]=\"user.data | avatarHtml\"></div>\r\n                                </div>\r\n                                <div class=\"f-discussion-selected-item-text f-utils-fill\">\r\n                                    <div class=\"f-discussion-selected-name\">\r\n                                        {{user.data.name}}\r\n                                    </div>\r\n                                    <div class=\"f-discussion-selected-item-tip\" *ngIf=\"user.parent\">\r\n                                        <span *ngIf=\"user.parent.parentsArr.length>=1\">{{user.parent.parentsArr[user.parent.parentsArr.length - 1].name}}</span>\r\n                                            <span *ngIf=\"user.parent.parentsArr.length>=1\">/</span>\r\n                                            <span>{{user.parent.data.name}}</span>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"f-discussion-selected-item-remove\" (click)=\"selectionRemove(user,'user')\">\r\n                                    <span class=\"f-icon f-icon-close-outline\"></span>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"f-discussion-selected-item\" *ngFor=\"let section of selectedSections\">\r\n                                <div class=\"f-discussion-selected-item-text f-utils-fill\">\r\n                                    <div class=\"f-discussion-selected-name\">\r\n                                        {{section.data.name}}\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"f-discussion-selected-item-remove\" (click)=\"selectionRemove(section,'section')\">\r\n                                    <span class=\"f-icon f-icon-close-outline\"></span>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"f-discussion-section-list-empty\" *ngIf=\"!selectedUsers.length && !selectedSections.length\">\r\n                                <span class=\"f-icon f-icon-top_my\"></span>\r\n                                <span class=\"section-list-empty-text\">{{ 'discussionGroup.emptyRight' | locale }}</span>\r\n                            </div>\r\n                        </perfect-scrollbar>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</farris-dialog>\r\n",
                    styles: [""]
                }] }
    ];
    /** @nocollapse */
    DiscussionPersonnelComponent.ctorParameters = function () { return [
        { type: Renderer2 },
        { type: ElementRef },
        { type: NgZone },
        { type: HttpClient },
        { type: ChangeDetectorRef },
        { type: Injector }
    ]; };
    DiscussionPersonnelComponent.propDecorators = {
        listIdField: [{ type: Input }],
        listDisplayText: [{ type: Input }],
        sectionData: [{ type: Input }],
        orgUrl: [{ type: Input }],
        personSearchUrl: [{ type: Input }],
        urlGetOrgByLayer: [{ type: Input }],
        personnelDialog: [{ type: ViewChild, args: ['personnelDialog',] }],
        selectionsChange: [{ type: Output }],
        lineDataChange: [{ type: Output }],
        openDialog: [{ type: Output }],
        ougUsers: [{ type: Output }],
        crumbsList: [{ type: ViewChild, args: ['crumbsList',] }],
        discussionContent: [{ type: ViewChild, args: ['discussionContent',] }]
    };
    return DiscussionPersonnelComponent;
}());
export { DiscussionPersonnelComponent };
if (false) {
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.listIdField;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.listDisplayText;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.sectionData;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.orgUrl;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.personSearchUrl;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.urlGetOrgByLayer;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.personnelDialog;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.selectionsChange;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.lineDataChange;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.openDialog;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.ougUsers;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.crumbsList;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.discussionContent;
    /**
     * @type {?}
     * @private
     */
    DiscussionPersonnelComponent.prototype.loadingInstance;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.selections;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.selectedSections;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.selectedUsers;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.searchText;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.finalText;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.sectionDataTree;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.sectionDataTiled;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.currentSectionData;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.currentSection;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.currentSectionPerson;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.currentSectionId;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.sectionCrumbs;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.pageSize;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.showSearchList;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.crumbsEllipsis;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.searchUserList;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.selectEmployee;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.placeholder;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.allOrg;
    /**
     * @type {?}
     * @private
     */
    DiscussionPersonnelComponent.prototype.localeService;
    /**
     * @type {?}
     * @private
     */
    DiscussionPersonnelComponent.prototype.loadingSer;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.groupIcon;
    /**
     * @type {?}
     * @private
     */
    DiscussionPersonnelComponent.prototype.renderer;
    /**
     * @type {?}
     * @private
     */
    DiscussionPersonnelComponent.prototype.elementRef;
    /**
     * @type {?}
     * @private
     */
    DiscussionPersonnelComponent.prototype.ngZone;
    /**
     * @type {?}
     * @private
     */
    DiscussionPersonnelComponent.prototype.http;
    /**
     * @type {?}
     * @private
     */
    DiscussionPersonnelComponent.prototype.cd;
    /**
     * @type {?}
     * @private
     */
    DiscussionPersonnelComponent.prototype.injector;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGlzY3Vzc2lvbi1wZXJzb25uZWwuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy9kaXNjdXNzaW9uLWdyb3VwLyIsInNvdXJjZXMiOlsibGliL2Rpc2N1c3Npb24tcGVyc29ubmVsL2Rpc2N1c3Npb24tcGVyc29ubmVsLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsS0FBSyxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBZSxNQUFNLEVBQUUsWUFBWSxFQUFFLGlCQUFpQixFQUFFLFFBQVEsRUFBWSxNQUFNLGVBQWUsQ0FBQztBQUM3SyxPQUFPLEVBQUUsRUFBRSxFQUFFLFFBQVEsRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUNwQyxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFDbEQsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ2xELE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUVwRDtJQTZESSxzQ0FDWSxRQUFtQixFQUNuQixVQUFzQixFQUN0QixNQUFjLEVBQ2QsSUFBZ0IsRUFDaEIsRUFBcUIsRUFDckIsUUFBa0I7UUFMbEIsYUFBUSxHQUFSLFFBQVEsQ0FBVztRQUNuQixlQUFVLEdBQVYsVUFBVSxDQUFZO1FBQ3RCLFdBQU0sR0FBTixNQUFNLENBQVE7UUFDZCxTQUFJLEdBQUosSUFBSSxDQUFZO1FBQ2hCLE9BQUUsR0FBRixFQUFFLENBQW1CO1FBQ3JCLGFBQVEsR0FBUixRQUFRLENBQVU7O1FBM0RyQixnQkFBVyxHQUFXLElBQUksQ0FBQzs7UUFFM0Isb0JBQWUsR0FBVyxVQUFVLENBQUM7OztRQVFyQyxxQkFBZ0IsR0FBVywrQkFBK0IsQ0FBQzs7OztRQU0xRCxxQkFBZ0IsR0FBRyxJQUFJLFlBQVksRUFBTyxDQUFDOztRQUUzQyxtQkFBYyxHQUFH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OztJQUNwQyxzREFBeUI7O0lBQ3pCLDREQUErQjs7SUFDL0Isd0RBQThCOztJQUM5QixxREFBK0I7O0lBQy9CLGdEQUFzQjs7SUFFdEIsc0RBQWdDOztJQUNoQyxzREFBZ0M7O0lBQ2hDLHNEQUF5Qjs7SUFFekIsc0RBQWdDOztJQUNoQyxtREFBa0M7O0lBQ2xDLDhDQUF3Qjs7Ozs7SUFDeEIscURBQXFDOzs7OztJQUNyQyxrREFBbUM7O0lBQ25DLGlEQUF5RDs7Ozs7SUFFckQsZ0RBQTJCOzs7OztJQUMzQixrREFBOEI7Ozs7O0lBQzlCLDhDQUFzQjs7Ozs7SUFDdEIsNENBQXdCOzs7OztJQUN4QiwwQ0FBNkI7Ozs7O0lBQzdCLGdEQUEwQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBJbnB1dCwgVmlld0NoaWxkLCBFbGVtZW50UmVmLCBSZW5kZXJlcjIsIE5nWm9uZSwgSG9zdEJpbmRpbmcsIE91dHB1dCwgRXZlbnRFbWl0dGVyLCBDaGFuZ2VEZXRlY3RvclJlZiwgSW5qZWN0b3IsIE9wdGlvbmFsIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IG9mLCBmb3JrSm9pbiB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBIdHRwQ2xpZW50IH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xyXG5pbXBvcnQgeyBMb2NhbGVTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1sb2NhbGUnO1xyXG5pbXBvcnQgeyBMb2FkaW5nU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbG9hZGluZyc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiAnZmFycmlzLWRpc2N1c3Npb24tcGVyc29ubmVsJyxcclxuICAgIHRlbXBsYXRlVXJsOiAnLi9kaXNjdXNzaW9uLXBlcnNvbm5lbC5jb21wb25lbnQuaHRtbCcsXHJcbiAgICBzdHlsZVVybHM6IFsnLi9kaXNjdXNzaW9uLXBlcnNvbm5lbC5jb21wb25lbnQuc2NzcyddLFxyXG59KVxyXG5leHBvcnQgY2xhc3MgRGlzY3Vzc2lvblBlcnNvbm5lbENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XHJcblxyXG4gICAgLy8g5pON5L2c5YiX6KGo5oiW6ICF5YiG57uE5omA6ZyA6KaB55qE5Li76ZSu5a2X5q61XHJcbiAgICBASW5wdXQoKSBsaXN0SWRGaWVsZDogc3RyaW5nID0gXCJpZFwiO1xyXG4gICAgLy8g5YiX6KGo5Lit5pi+56S655qE5a2X5q61XHJcbiAgICBASW5wdXQoKSBsaXN0RGlzcGxheVRleHQ6IHN0cmluZyA9IFwidXNlck5hbWVcIjtcclxuICAgIEBJbnB1dCgpIHNlY3Rpb25EYXRhOiBhbnlbXTtcclxuICAgIC8vIOiOt+WPluS6uuWRmOmTvuaOpVxyXG4gICAgQElucHV0KCkgb3JnVXJsOiBzdHJpbmc7XHJcbiAgICAvLyDkurrlkZjmn6Xor6Lpk77mjqVcclxuICAgIEBJbnB1dCgpIHBlcnNvblNlYXJjaFVybDogc3RyaW5nO1xyXG4gICAgLy8g5YiG5bGC6I635Y+W57uE57uH55qE6ZO+5o6lXHJcbiAgICAvLyDkvb/nlKjmlrnlvI8gL2FwaS9ydW50aW1lL3N5cy92MS4wL3N5c09yZ3M/cGFyYW09e1wicGFyZW50SWRcIjpcImFmYTVlZTliLWY5YmEtMjkyNy1mOWNlLTJhMzAzNjkyNjdlOVwifVxyXG4gICAgQElucHV0KCkgdXJsR2V0T3JnQnlMYXllcjogc3RyaW5nID0gXCIvYXBpL3J1bnRpbWUvc3lzL3YxLjAvc3lzT3Jnc1wiO1xyXG5cclxuICAgIEBWaWV3Q2hpbGQoJ3BlcnNvbm5lbERpYWxvZycpIHBlcnNvbm5lbERpYWxvZztcclxuICAgIC8vIOaWsOW7uui/mOaYr+e7tOaKpOiHquWumuS5ieinkuiJslxyXG4gICAgLy8gQE91dHB1dCgpIGN1c3RvbUdyb3VwQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcbiAgICAvLyDlr7nlpJbmmrTpnLLmlbDmja5cclxuICAgIEBPdXRwdXQoKSBzZWxlY3Rpb25zQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcbiAgICAvLyDpgInkuK3nmoTooYxcclxuICAgIEBPdXRwdXQoKSBsaW5lRGF0YUNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG4gICAgQE91dHB1dCgpIG9wZW5EaWFsb2cgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuICAgIEBPdXRwdXQoKSBvdWdVc2VycyA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG5cclxuICAgIEBWaWV3Q2hpbGQoJ2NydW1ic0xpc3QnKSBjcnVtYnNMaXN0OiBFbGVtZW50UmVmO1xyXG4gICAgQFZpZXdDaGlsZCgnZGlzY3Vzc2lvbkNvbnRlbnQnKSBkaXNjdXNzaW9uQ29udGVudDogRWxlbWVudFJlZjtcclxuICAgIHByaXZhdGUgbG9hZGluZ0luc3RhbmNlID0gbnVsbDtcclxuICAgIC8vIOWPs+S+p+mhuVxyXG4gICAgc2VsZWN0aW9uczogYW55W10gPSBbXTtcclxuICAgIHNlbGVjdGVkU2VjdGlvbnM6IGFueVtdID0gW107XHJcbiAgICBzZWxlY3RlZFVzZXJzOiBhbnlbXSA9IFtdO1xyXG4gICAgLy8g5pCc57Si5paH5pysXHJcbiAgICBzZWFyY2hUZXh0OiBzdHJpbmdcclxuICAgIC8vIOacgOmHjeimgeaYvuekuueahOS6uuWRmOS/oeaBr1xyXG4gICAgZmluYWxUZXh0OiBzdHJpbmcgPSAnJztcclxuXHJcbiAgICBzZWN0aW9uRGF0YVRyZWU6IEFycmF5PGFueT4gPSBbXTtcclxuICAgIHNlY3Rpb25EYXRhVGlsZWQ6IEFycmF5PGFueT4gPSBbXTtcclxuICAgIGN1cnJlbnRTZWN0aW9uRGF0YTogQXJyYXk8YW55PiA9IFtdO1xyXG4gICAgY3VycmVudFNlY3Rpb246IGFueSA9IHt9O1xyXG4gICAgY3VycmVudFNlY3Rpb25QZXJzb246IGFueSA9IHt9O1xyXG4gICAgY3VycmVudFNlY3Rpb25JZDogc3RyaW5nID0gJyc7XHJcbiAgICBzZWN0aW9uQ3J1bWJzOiBBcnJheTxhbnk+ID0gW107XHJcbiAgICBwYWdlU2l6ZTogbnVtYmVyID0gMjA7XHJcblxyXG4gICAgc2hvd1NlYXJjaExpc3Q6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIGNydW1ic0VsbGlwc2lzOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBzZWFyY2hVc2VyTGlzdDogYW55ID0ge307XHJcblxyXG4gICAgc2VsZWN0RW1wbG95ZWU6IHN0cmluZyA9IFwi6YCJ5oup5ZGY5belXCI7XHJcbiAgICBwbGFjZWhvbGRlcjogc3RyaW5nID0gXCLor7fovpPlhaXlkZjlt6Xlp5PlkI3mkJzntKJcIjtcclxuICAgIGFsbE9yZzogc3RyaW5nID0gXCLlhajpg6jnu4Tnu4dcIjtcclxuICAgIHByaXZhdGUgbG9jYWxlU2VydmljZTogTG9jYWxlU2VydmljZTtcclxuICAgIHByaXZhdGUgbG9hZGluZ1NlcjogTG9hZGluZ1NlcnZpY2U7XHJcbiAgICBncm91cEljb24gPSAnPHNwYW4gY2xhc3M9XCJmLWljb24gZi1pY29uLXNlYXJjaFwiPjwvc3Bhbj4nO1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHJpdmF0ZSByZW5kZXJlcjogUmVuZGVyZXIyLFxyXG4gICAgICAgIHByaXZhdGUgZWxlbWVudFJlZjogRWxlbWVudFJlZixcclxuICAgICAgICBwcml2YXRlIG5nWm9uZTogTmdab25lLFxyXG4gICAgICAgIHByaXZhdGUgaHR0cDogSHR0cENsaWVudCxcclxuICAgICAgICBwcml2YXRlIGNkOiBDaGFuZ2VEZXRlY3RvclJlZixcclxuICAgICAgICBwcml2YXRlIGluamVjdG9yOiBJbmplY3RvclxyXG4gICAgKSB7XHJcbiAgICAgICAgdGhpcy5sb2NhbGVTZXJ2aWNlID0gdGhpcy5pbmplY3Rvci5nZXQoTG9jYWxlU2VydmljZSk7XHJcbiAgICAgICAgdGhpcy5sb2FkaW5nU2VyID0gdGhpcy5pbmplY3Rvci5nZXQoTG9hZGluZ1NlcnZpY2UpO1xyXG4gICAgfVxyXG5cclxuICAgIG5nT25Jbml0KCkge1xyXG4gICAgICAgIC8vIGxldCBzZWN0aW9uRGF0YVRyZWVzID0gdGhpcy5pbml0c2VjdGlvbkRhdGEodGhpcy5zZWN0aW9uRGF0YSwnJyk7XHJcbiAgICAgICAgdGhpcy5hbGxPcmcgPSB0aGlzLmxvY2FsZVNlcnZpY2UuZ2V0VmFsdWUoJ2Rpc2N1c3Npb25Hcm91cC5hbGxPcmcnKTtcclxuICAgICAgICBsZXQgc2VjdGlvbkRhdGFUcmVlcyA9IHRoaXMuaW5pdFNlY3Rpb25EYXRhKHRoaXMuc2VjdGlvbkRhdGEsICcnKTtcclxuICAgICAgICAvLyB0aGlzLnNlY3Rpb25Tb3J0KHNlY3Rpb25EYXRhVHJlZXMpO1xyXG4gICAgICAgIC8vIGlmKHNlY3Rpb25EYXRhVHJlZXMubGVuZ3RoPjEpe1xyXG4gICAgICAgIGxldCBzZWN0aW9uUGFyZW50ID0gW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6ICdkaXNjdXNzaW9uUGFyZW50JyxcclxuICAgICAgICAgICAgICAgICAgICBjb2RlOiAncGFyZW50JyxcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLmFsbE9yZyxcclxuICAgICAgICAgICAgICAgICAgICBsYXllcjogMCxcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnRJZDogXCJcIixcclxuICAgICAgICAgICAgICAgICAgICBzb3J0T3JkZXI6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogXCJcIixcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogW10sXHJcbiAgICAgICAgICAgICAgICBwZXJzb25uZWxzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY291bnQ6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZUNvdW50OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VJbmRleDogMSxcclxuICAgICAgICAgICAgICAgICAgICBwYWdlU2l6ZTogMCxcclxuICAgICAgICAgICAgICAgICAgICB0b3RhbENvdW50OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIHVzZXJzOiBbXVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHBhcmVudDogbnVsbCxcclxuICAgICAgICAgICAgICAgIHBhcmVudHM6IFtdLFxyXG4gICAgICAgICAgICAgICAgcGFyZW50c0FycjogW10sXHJcbiAgICAgICAgICAgICAgICBjaGVja2VkOiBmYWxzZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgXTtcclxuICAgICAgICBzZWN0aW9uUGFyZW50WzBdLmNoaWxkcmVuID0gc2VjdGlvbkRhdGFUcmVlcztcclxuICAgICAgICBzZWN0aW9uUGFyZW50WzBdLmNoaWxkcmVuLnNvcnQoKGEsIGIpOiBudW1iZXIgPT4gYS5kYXRhWydzb3J0T3JkZXInXSAtIGIuZGF0YVsnc29ydE9yZGVyJ10pO1xyXG4gICAgICAgIHRoaXMuaW5pdFNlY3Rpb25UcmVlKHNlY3Rpb25QYXJlbnRbMF0uY2hpbGRyZW4pO1xyXG4gICAgICAgIHRoaXMuc2VjdGlvbkRhdGFUcmVlID0gc2VjdGlvblBhcmVudDtcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgLy8gZWxzZXtcclxuICAgICAgICAvLyAgICAgdGhpcy5zZWN0aW9uRGF0YVRyZWUgPSBzZWN0aW9uRGF0YVRyZWVzO1xyXG4gICAgICAgIC8vIH1cclxuICAgICAgICAvL2NvbnNvbGUubG9nKHRoaXMuc2VjdGlvbkRhdGFUcmVlKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2VjdGlvbkRhdGFUcmVlICYmIHRoaXMuc2VjdGlvbkRhdGFUcmVlLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAvLyDlpoLmnpzmnInnu4Tnu4fmoJHnmoTmlbDmja7vvIzmiZPlubPmiJDmlbDnu4TmlbDmja5cclxuICAgICAgICAgICAgdGhpcy5zZWN0aW9uRGF0YVRpbGVkID0gdGhpcy50aWxlU2VjdGlvbkRhdGEodGhpcy5zZWN0aW9uRGF0YVRyZWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDlvZPliY3nlYzpnaLkuIrnmoTnu4Tnu4foioLngrnlrozmlbTmoJHmlbDmja5cclxuICAgICAgICAgKiB7XHJcbiAgICAgICAgICogICAgY2hlY2tlZDpmYWxzZSznu4Tnu4fmmK/lkKbpgInkuK1cclxuICAgICAgICAgKiAgICBjaGlsZHJlbjpbXSznu4Tnu4fnmoTlrZDpg6jpl6hcclxuICAgICAgICAgKiAgICBkYXRhOnsg5p2l6Ieq5LqO5LuO5pyN5Yqh5Zmo56uv6L+U5Zue55qE5pWw5o2u57uT5p6EXHJcbiAgICAgICAgICogICAgICBpZDrnu4Tnu4dpZCxcclxuICAgICAgICAgKiAgICAgIGNvZGU657uE57uHY29kZSxcclxuICAgICAgICAgKiAgICAgIG5hbWU657uE57uH5ZCN56ewXHJcbiAgICAgICAgICogICAgICBsYXllcjrnu4Tnu4flsYLnuqdcclxuICAgICAgICAgKiAgICAgIHBhcmVudElkOueItuiKgueCuVxyXG4gICAgICAgICAqICAgICAgLi4uLlxyXG4gICAgICAgICAqICAgICAgfSxcclxuICAgICAgICAgKiAgICBwYXJlbnRzOltdLOeItuiKgueCuUlkXHJcbiAgICAgICAgICogICAgcGFyZW50c0Fycjpbe2lkOifnu4Tnu4foioLngrlJZCcsbmFtZTon57uE57uH6IqC54K55ZCN56ewJ31dLFxyXG4gICAgICAgICAqICAgIHBlcnNvbm5lbHM6e1xyXG4gICAgICAgICAqICAgICAgICAgIGNvdW50OjAsXHJcbiAgICAgICAgICogICAgICAgICAgcGFnZUNvdW50OixcclxuICAgICAgICAgKiAgICAgICAgICB1c2VyczpbXSDnlKjmiLfkv6Hmga9cclxuICAgICAgICAgKiAgICAgIH1cclxuICAgICAgICAgKiB9XHJcbiAgICAgICAgICogXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5jdXJyZW50U2VjdGlvbiA9IHRoaXMuc2VjdGlvbkRhdGFUcmVlWzBdO1xyXG4gICAgICAgIC8vIOmdouWMheWxkeaVsOaNrlt7aWQ6J+e7hOe7h+iKgueCuUlkJyxuYW1lOifnu4Tnu4foioLngrnlkI3np7AnfV1cclxuICAgICAgICB0aGlzLnNlY3Rpb25DcnVtYnMgPSB0aGlzLnNlY3Rpb25EYXRhVHJlZVswXS5jaGlsZHJlbi5sZW5ndGggPyB0aGlzLnNlY3Rpb25EYXRhVHJlZVswXS5jaGlsZHJlblswXVsncGFyZW50c0FyciddIDogW107XHJcbiAgICAgICAgLy8g5b2T5YmN55WM6Z2i5LiK55qE57uE57uH5YiX6KGo5pWw5o2uXHJcbiAgICAgICAgdGhpcy5jdXJyZW50U2VjdGlvbkRhdGEgPSB0aGlzLnNlY3Rpb25EYXRhVHJlZVswXS5jaGlsZHJlbi5sZW5ndGggPyB0aGlzLnNlY3Rpb25EYXRhVHJlZVswXS5jaGlsZHJlbiA6IFtdO1xyXG4gICAgICAgIC8vIOW9k+WJjeeVjOmdouS4iueahOe7hOe7h+matuWxnueahOe7hOe7h+eahOaVsOaNrklkXHJcbiAgICAgICAgdGhpcy5jdXJyZW50U2VjdGlvbklkID0gdGhpcy5zZWN0aW9uRGF0YVRyZWVbMF0uZGF0YS5pZDtcclxuICAgICAgICAvLyDnu5HlrprlvZPkurrlkZjojrflj5blm57mlbDmja7ml7bvvIzmiafooYznmoTmk43kvZxcclxuICAgICAgICB0aGlzLmdldFBlcnNvbm5lbCh0aGlzLmN1cnJlbnRTZWN0aW9uSWQsIDApLnN1YnNjcmliZSgoZDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChkLmhhc093blByb3BlcnR5KFwidXNlcnNcIikpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VjdGlvbkRhdGFUcmVlWzBdLnBlcnNvbm5lbHMgPSBkO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50U2VjdGlvblBlcnNvbiA9IHRoaXMuc2VjdGlvbkRhdGFUcmVlWzBdLnBlcnNvbm5lbHM7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnY3VyJyx0aGlzLmN1cnJlbnRTZWN0aW9uUGVyc29uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnNlbGVjdEVtcGxveWVlID0gdGhpcy5sb2NhbGVTZXJ2aWNlLmdldFZhbHVlKCdkaXNjdXNzaW9uR3JvdXAuc2VsZWN0RW1wbG95ZWUnKTtcclxuICAgICAgICB0aGlzLnBsYWNlaG9sZGVyID0gdGhpcy5sb2NhbGVTZXJ2aWNlLmdldFZhbHVlKCdkaXNjdXNzaW9uR3JvdXAucGxhY2Vob2xkZXInKTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnNlY3Rpb25EYXRhVGlsZWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXRTZWN0aW9uVHJlZShkYXRhLCBwYXJlbnRJZCA9IFwiZGlzY3Vzc2lvblBhcmVudFwiLCBwYXJlbnROYW1lID0gdGhpcy5hbGxPcmcpIHtcclxuICAgICAgICBpZiAoZGF0YSAmJiBkYXRhLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBkYXRhLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcGFyID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlkOiBwYXJlbnRJZCxcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBwYXJlbnROYW1lXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgaXRlbS5wYXJlbnRzQXJyLnVuc2hpZnQocGFyKTtcclxuICAgICAgICAgICAgICAgIGl0ZW0ucGFyZW50cy51bnNoaWZ0KHBhcmVudElkKTtcclxuICAgICAgICAgICAgICAgIGlmIChpdGVtLmNoaWxkcmVuLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdFNlY3Rpb25UcmVlKGl0ZW0uY2hpbGRyZW4pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDliJ3lp4vljJbliIbnu4TmlbDmja5cclxuICAgICAqIOS8oOmAkui/h+adpeeahOaVsOaNruaYr+WIl+ihqO+8jOmcgOimgei9rOaNouaIkOagkeeahOWxgue6p+e7k+aehFxyXG4gICAgICovXHJcbiAgICBpbml0U2VjdGlvbkRhdGEoZGF0YSwgcGFyZW50SWQsIHBhcmVudElkRmllbGQgPSAncGFyZW50SWQnLCBpZEZpZWxkID0gJ2lkJywgcHJlc2V0UGFyZW50ID0gbnVsbCkge1xyXG4gICAgICAgIGNvbnN0IG5vZGVzID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHVuYXR0YWNoZWQgPSBbXTtcclxuICAgICAgICBpZiAocHJlc2V0UGFyZW50KSB7XHJcbiAgICAgICAgICAgIG5vZGVzLnNldChwcmVzZXRQYXJlbnQuZGF0YS5pZCwgcHJlc2V0UGFyZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGRhdGEgJiYgZGF0YS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgZGF0YS5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgbm9kZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiBpdGVtLFxyXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICBwZXJzb25uZWxzOiB7fSxcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50czogW10sXHJcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50c0FycjogW10sXHJcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tlZDogZmFsc2VcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpZCA9IGl0ZW1baWRGaWVsZF07XHJcbiAgICAgICAgICAgICAgICBub2Rlcy5zZXQoaWQsIG5vZGUpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgUElEID0gaXRlbVtwYXJlbnRJZEZpZWxkXTtcclxuICAgICAgICAgICAgICAgIC8vIOWIneWni1xyXG4gICAgICAgICAgICAgICAgaWYgKFBJRCA9PT0gcGFyZW50SWQgfHwgUElEID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gobm9kZSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IG5vZGVzLmdldChQSUQpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHBhcmVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcGFyID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IFBJRCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHBhcmVudC5kYXRhLm5hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZVsncGFyZW50J10gPSBQSUQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVbJ3BhcmVudHMnXSA9IFsuLi5wYXJlbnQucGFyZW50cywgUElEXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZVsncGFyZW50c0FyciddID0gWy4uLnBhcmVudC5wYXJlbnRzQXJyLCBwYXJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQuY2hpbGRyZW4ucHVzaChub2RlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50LmNoaWxkcmVuLnNvcnQoKGEsIGIpOiBudW1iZXIgPT4gYS5kYXRhWydzb3J0T3JkZXInXSAtIGIuZGF0YVsnc29ydE9yZGVyJ10pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuYXR0YWNoZWQucHVzaChub2RlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAodW5hdHRhY2hlZC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHVuYXR0YWNoZWQuZm9yRWFjaCh1bkl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBpZCA9IHVuSXRlbS5kYXRhW3BhcmVudElkRmllbGRdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IG5vZGVzLmdldChwaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5p6E6YCg5pWw5o2uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuSXRlbVsncGFyZW50J10gPSBwaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuSXRlbVsncGFyZW50cyddID0gWy4uLnBhcmVudC5wYXJlbnRzLCBwaWRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1bkl0ZW1bJ3BhcmVudHNBcnInXSA9IFsuLi5wYXJlbnQucGFyZW50c0Fyciwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHBpZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHBhcmVudC5kYXRhLm5hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgfV07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQuY2hpbGRyZW4ucHVzaCh1bkl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQuY2hpbGRyZW4uc29ydCgoYSwgYik6IG51bWJlciA9PiBhLmRhdGFbJ3NvcnRPcmRlciddIC0gYi5kYXRhWydzb3J0T3JkZXInXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5omA5pyJbm9kZXPnmoTlrZDoioLngrnovazljJbmiJDmlbDnu4TvvIzlubbov5Tlm57mlbDnu4RcclxuICAgICAqIEBwYXJhbSBub2RlcyBcclxuICAgICAqL1xyXG4gICAgdGlsZVNlY3Rpb25EYXRhKG5vZGVzKSB7XHJcbiAgICAgICAgbGV0IHIgPSBbXTtcclxuICAgICAgICB0aGlzLmdldEFsbE5vZGVzKG5vZGVzLCByKTtcclxuICAgICAgICByZXR1cm4gcjtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5omA5pyJbm9kZXPnmoTlrZDoioLngrnovazljJbmiJDmlbDnu4TvvIzlubbot5/mlrDmlbDnu4RyXHJcbiAgICAgKiBAcGFyYW0gbm9kZXMgXHJcbiAgICAgKiBAcGFyYW0gciBcclxuICAgICAqL1xyXG4gICAgZ2V0QWxsTm9kZXMobm9kZXMsIHIpIHtcclxuICAgICAgICBub2Rlcy5mb3JFYWNoKG4gPT4ge1xyXG4gICAgICAgICAgICByLnB1c2gobik7XHJcbiAgICAgICAgICAgIGlmIChuLmNoaWxkcmVuLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRBbGxOb2RlcyhuLmNoaWxkcmVuLCByKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOeCueWHu+S4i+e6p1xyXG4gICAgICogQHBhcmFtIHNlY3Rpb24gXHJcbiAgICAgKi9cclxuICAgIHNlY3Rpb25OZXh0KHNlY3Rpb24pIHtcclxuICAgICAgICAvLyDmnoTpgKDnu4Tnu4foioLngrnkuIvpnaLnmoTkurrlkZjkv6Hmga/vvIzlpoLmnpzmsqHmnInkurrlkZjkv6Hmga/vvIzlsLHmnoTpgKDnu5PmnoTvvIznhLblkI7lj5Hor7fmsYLojrflj5bkurrlkZjkv6Hmga9cclxuICAgICAgICB0aGlzLnNob3dPckhpZGVMb2FkaW5nKHRydWUpO1xyXG4gICAgICAgIGZvcmtKb2luKFt0aGlzLmdldE9yZ0J5TGF5ZXJIdHRwKHNlY3Rpb24pLCB0aGlzLmdldFBlcnNvbkJ5VXJsSHR0cChzZWN0aW9uKV0pXHJcbiAgICAgICAgICAgIC5zdWJzY3JpYmUob3JnQW5kUGVyc29uRGF0YXMgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93T3JIaWRlTG9hZGluZyhmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAvLyDojrflj5bnu4Tnu4fmlbDmja5cclxuICAgICAgICAgICAgICAgIGxldCBnZXRPcmdEYXRhID0gb3JnQW5kUGVyc29uRGF0YXNbMF07XHJcbiAgICAgICAgICAgICAgICBpZiAoZ2V0T3JnRGF0YSAhPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyDku47mnI3liqHlmajnq6/nnJ/lrp7ov5Tlm57mlbDmja4s55u05o6l5Zyo5pa55rOV5YaF5pu05pawc2VjdGlvbueahOe7k+aehFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdFNlY3Rpb25EYXRhKGdldE9yZ0RhdGEsICcnLCAncGFyZW50SWQnLCAnaWQnLCBzZWN0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyDovpPlhaXmiYDmnInnu4Tnu4fmoJHnmoTmlbDmja7vvIznnItzZWN0aW9u5Y+Y5pu05piv5ZCm5pu05pawXHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5pu05paw5pWw5o2uXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWN0aW9uRGF0YVRpbGVkID0gdGhpcy50aWxlU2VjdGlvbkRhdGEodGhpcy5zZWN0aW9uRGF0YVRyZWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIOiOt+WPluS6uuWRmOaVsOaNrlxyXG4gICAgICAgICAgICAgICAgbGV0IGdldFBlcnNvbkRhdGEgPSBvcmdBbmRQZXJzb25EYXRhc1sxXTtcclxuICAgICAgICAgICAgICAgIGlmIChnZXRQZXJzb25EYXRhICE9PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIOaehOmAoOaVsOaNrlxyXG4gICAgICAgICAgICAgICAgICAgIHNlY3Rpb24ucGVyc29ubmVscyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY291bnQ6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VDb3VudDogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFnZUluZGV4OiAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWdlU2l6ZTogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxDb3VudDogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcnM6IFtdXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZ2V0UGVyc29uRGF0YS5oYXNPd25Qcm9wZXJ0eShcInVzZXJzXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlY3Rpb24ucGVyc29ubmVscy5jb3VudCA9IGdldFBlcnNvbkRhdGFbJ2NvdW50J107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlY3Rpb24ucGVyc29ubmVscy5wYWdlQ291bnQgPSBnZXRQZXJzb25EYXRhWydwYWdlQ291bnQnXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi5wZXJzb25uZWxzLnBhZ2VJbmRleCA9IGdldFBlcnNvbkRhdGFbJ3BhZ2VJbmRleCddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uLnBlcnNvbm5lbHMucGFnZVNpemUgPSBnZXRQZXJzb25EYXRhWydwYWdlU2l6ZSddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uLnBlcnNvbm5lbHMudG90YWxDb3VudCA9IGdldFBlcnNvbkRhdGFbJ3RvdGFsQ291bnQnXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi5wZXJzb25uZWxzWyd1c2VycyddID0gWy4uLnNlY3Rpb24ucGVyc29ubmVsc1sndXNlcnMnXSwgLi4uZ2V0UGVyc29uRGF0YVsndXNlcnMnXV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uWydub1BlcnNvbm5lbCddID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdldE5leHREYXRhKHNlY3Rpb24pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPluS4i+e6p+aVsOaNrlxyXG4gICAgICog54K55Ye755qE57uE57uH5a+55bqU55qE5piv77ya5b2T5YmN57uE57uH6IqC54K5XHJcbiAgICAgKiBAcGFyYW0gc2VjdGlvbiBcclxuICAgICAqL1xyXG4gICAgZ2V0TmV4dERhdGEoc2VjdGlvbikge1xyXG5cclxuICAgICAgICBpZiAoKHNlY3Rpb24uY2hpbGRyZW4gJiYgc2VjdGlvbi5jaGlsZHJlbi5sZW5ndGgpIHx8IChKU09OLnN0cmluZ2lmeShzZWN0aW9uLnBlcnNvbm5lbHMpICE9PSAne30nKSkge1xyXG4gICAgICAgICAgICAvLyDlpoLmnpzlvZPliY3nu4Tnu4foioLngrnmnInkuIvnuqfmlbDmja5cclxuICAgICAgICAgICAgY29uc3Qgc2VjID0gdGhpcy5nZXRTZWN0aW9uQnlJZChzZWN0aW9uLmRhdGEuaWQpO1xyXG4gICAgICAgICAgICBpZiAoc2VjKSB7XHJcbiAgICAgICAgICAgICAgICAvLyDliKTmlq3lvZPliY3nu4Tnu4foioLngrnvvIzmmK/lkKbli77pgInlhajpgIlcclxuICAgICAgICAgICAgICAgIGxldCBzZWNDaGVja2VkID0gc2VjWydjaGVja2VkJ107XHJcbiAgICAgICAgICAgICAgICBzZWNbJ2Rpc2FibGVkJ10gPSBzZWNDaGVja2VkID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFzZWNbJ2luZGV0ZXJtaW5hdGUnXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIOW9k+WJjee7hOe7h+eahOS4i+S4gOe6p+e7hOe7h+mDveWLvumAiVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWMuY2hpbGRyZW4gJiYgc2VjLmNoaWxkcmVuLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWMuY2hpbGRyZW4uZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1bJ2NoZWNrZWQnXSA9IHNlY0NoZWNrZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtWydpbmRldGVybWluYXRlJ10gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGl0ZW1bJ2Rpc2FibGVkJ10gPSBzZWNbJ2Rpc2FibGVkJ107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5aaC5p6c5pyJ5Lq65ZGY77yM5b2T5YmN5Lq65ZGY6YO95Yu+6YCJXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlY3Rpb24ucGVyc29ubmVsc1sndXNlcnMnXSAmJiBzZWN0aW9uLnBlcnNvbm5lbHNbJ3VzZXJzJ10ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlY3Rpb24ucGVyc29ubmVsc1sndXNlcnMnXS5mb3JFYWNoKHVzZXIgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlclsnY2hlY2tlZCddID0gc2VjQ2hlY2tlZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJbJ2luZGV0ZXJtaW5hdGUnXSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdXNlclsnZGlzYWJsZWQnXSA9IHNlY1snZGlzYWJsZWQnXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxldCBzZWNQYXJlbnQgPSB7XHJcbiAgICAgICAgICAgICAgICBpZDogc2VjLmRhdGEuaWQsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiBzZWMuZGF0YS5uYW1lXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIC8vIOW9k+WJjee7hOe7h+eahOeItuiKgueCueS4juW9k+WJjee7hOe7h+iKgueCueaVsOaNruWQiOW5tlxyXG4gICAgICAgICAgICBsZXQgc2VjQ3J1bWJzID0gWy4uLnNlY1sncGFyZW50c0FyciddLCBzZWNQYXJlbnRdO1xyXG4gICAgICAgICAgICAvLyDlpoLmnpzlvZPliY3nu4Tnu4fmnInlrZDoioLngrnvvIzojrflj5blrZDoioLngrnnmoTniLbmlbDnu4TvvIzlkKbliJnvvIzmjInnhafkuIrpnaLmlbDmja7lkIjlubbojrflj5ZcclxuICAgICAgICAgICAgdGhpcy5zZWN0aW9uQ3J1bWJzID0gc2VjLmNoaWxkcmVuLmxlbmd0aCA/IHNlYy5jaGlsZHJlblswXVsncGFyZW50c0FyciddIDogc2VjQ3J1bWJzO1xyXG4gICAgICAgICAgICAvLyDmlrDnmoTnu4Tnu4foioLngrnmmK/lvZPliY3nu4Tnu4fnmoTlrZDoioLngrlcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50U2VjdGlvbkRhdGEgPSBzZWMuY2hpbGRyZW4ubGVuZ3RoID8gc2VjLmNoaWxkcmVuIDogW107XHJcbiAgICAgICAgICAgIC8vIOiusOW9leW9k+WJjee7hOe7h+iKgueCuVxyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRTZWN0aW9uID0gc2VjO1xyXG4gICAgICAgICAgICAvLyDorrDlvZXlvZPliY3nu4Tnu4foioLngrnnmoTmlbDmja5cclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50U2VjdGlvbklkID0gc2VjLmRhdGEuaWQ7XHJcbiAgICAgICAgICAgIC8vIOW9k+WJjee7hOe7h+S4i+WvueW6lOeahOS6uuWRmOS/oeaBr1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRTZWN0aW9uUGVyc29uID0gc2VjLnBlcnNvbm5lbHM7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pbml0Q3J1bWJzTGlzdCgpO1xyXG4gICAgICAgICAgICB9LCAwKTtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5jdXJyZW50U2VjdGlvbik7XHJcbiAgICAgICAgICAgIHRoaXMuY2QuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50U2VjdGlvblBlcnNvbiA9IFtdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog6I635Y+W5Lq65ZGY5o6l5Y+j5a6a5LmJXHJcbiAgICAgKiBAcGFyYW0gb3VnSWQgXHJcbiAgICAgKiBAcGFyYW0gcGFnZUluZGV4IFxyXG4gICAgICogQHBhcmFtIHBhZ2VTaXplIFxyXG4gICAgICovXHJcbiAgICBnZXRQZXJzb25uZWwob3VnSWQ6IHN0cmluZywgcGFnZUluZGV4OiBudW1iZXIsIHBhZ2VTaXplOiBudW1iZXIgPSB0aGlzLnBhZ2VTaXplKSB7XHJcbiAgICAgICAgLy8gbGV0IGRhdGEgPSB7fTtcclxuICAgICAgICBpZiAodGhpcy5vcmdVcmwpIHtcclxuICAgICAgICAgICAgY29uc3QgdXJsID0gYCR7dGhpcy5vcmdVcmx9P29yZ0lkPSR7b3VnSWR9JnBhZ2VTaXplPSR7cGFnZVNpemV9JnBhZ2VJbmRleD0ke3BhZ2VJbmRleH1gO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5odHRwLmdldCh1cmwpO1xyXG4gICAgICAgICAgICAvLyBpZihvdWdJZCA9PSAnbGFuZ2NoYW8nKXtcclxuICAgICAgICAgICAgLy8gICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0KCdhc3NldHMvZGF0YS9kaXNjdXNzaW9uUGVyc29uLmpzb24nKTtcclxuICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICAvLyBlbHNlIGlmKG91Z0lkID09ICdndW9qaScpe1xyXG4gICAgICAgICAgICAvLyAgICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQoJ2Fzc2V0cy9kYXRhL2Rpc2N1c3Npb25QZXJzb24yLmpzb24nKTtcclxuICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICAvLyBlbHNlIGlmKG91Z0lkID09ICd5YW5mYScpe1xyXG4gICAgICAgICAgICAvLyAgICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQoJ2Fzc2V0cy9kYXRhL2Rpc2N1c3Npb25QZXJzb24zLmpzb24nKTtcclxuICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICAvLyBlbHNle1xyXG4gICAgICAgICAgICAvLyAgICAgcmV0dXJuIG9mKHRydWUpO1xyXG4gICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gb2YoZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyByZXR1cm4gZGF0YTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWIhuWxguiOt+WPluaVsOaNrlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGdldE9yZ0J5TGF5ZXJIdHRwKHNlY3Rpb24pIHtcclxuICAgICAgICBpZiAoIXNlY3Rpb24uZGF0YVsnaXNEZXRhaWwnXSAmJiAoIXNlY3Rpb24uY2hpbGRyZW4gfHwgc2VjdGlvbi5jaGlsZHJlbi5sZW5ndGggPT0gMCkpIHtcclxuICAgICAgICAgICAgLy/kuI3mmK/lj7blrZDoioLngrnvvIzkvYbmmK/lrZDkuLrnqbpcclxuICAgICAgICAgICAgaWYgKHRoaXMudXJsR2V0T3JnQnlMYXllcikge1xyXG4gICAgICAgICAgICAgICAgbGV0IHVybCA9IGAke3RoaXMudXJsR2V0T3JnQnlMYXllcn0/cGFyYW09e1wicGFyZW50SWRcIjpcIiR7c2VjdGlvbi5kYXRhLmlkfVwifWA7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5odHRwLmdldCh1cmwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOWkhOeQhui/h+eahOaVsOaNrlxyXG4gICAgICAgIHJldHVybiBvZihmYWxzZSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPluS6uuWRmFxyXG4gICAgICogQHBhcmFtIHNlY3Rpb24gXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZ2V0UGVyc29uQnlVcmxIdHRwKHNlY3Rpb24pIHtcclxuICAgICAgICBpZiAoSlNPTi5zdHJpbmdpZnkoc2VjdGlvbi5wZXJzb25uZWxzKSA9PT0gJ3t9JyAmJiAhc2VjdGlvbi5oYXNPd25Qcm9wZXJ0eSgnbm9QZXJzb25uZWwnKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRQZXJzb25uZWwoc2VjdGlvbi5kYXRhLmlkLCAwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG9mKGZhbHNlKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRTZWN0aW9uQnlJZChpZCkge1xyXG4gICAgICAgIGxldCBzZWN0aW9uID0gdGhpcy5zZWN0aW9uRGF0YVRpbGVkLmZpbmQoc2VjID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHNlYy5kYXRhLmlkID09IGlkO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBzZWN0aW9uO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDngrnlh7vpnaLljIXlsZFcclxuICAgICAqIEBwYXJhbSBjcnVtYnMgXHJcbiAgICAgKi9cclxuICAgIGNydW1ic0NsaWNrKGNydW1icykge1xyXG4gICAgICAgIGlmIChjcnVtYnMuaWQgPT0gdGhpcy5jdXJyZW50U2VjdGlvbklkKSByZXR1cm47XHJcbiAgICAgICAgY29uc3Qgc2VjID0gdGhpcy5nZXRTZWN0aW9uQnlJZChjcnVtYnMuaWQpO1xyXG4gICAgICAgIHRoaXMuc2VjdGlvbkNydW1icyA9IHNlYy5jaGlsZHJlbi5sZW5ndGggPyBzZWMuY2hpbGRyZW5bMF1bJ3BhcmVudHNBcnInXSA6IFtdO1xyXG4gICAgICAgIHRoaXMuY3VycmVudFNlY3Rpb25EYXRhID0gc2VjLmNoaWxkcmVuLmxlbmd0aCA/IHNlYy5jaGlsZHJlbiA6IFtdO1xyXG4gICAgICAgIHRoaXMuY3VycmVudFNlY3Rpb25JZCA9IHNlYy5kYXRhLmlkO1xyXG4gICAgICAgIHRoaXMuY3VycmVudFNlY3Rpb25QZXJzb24gPSBzZWMucGVyc29ubmVscztcclxuICAgICAgICB0aGlzLmN1cnJlbnRTZWN0aW9uID0gc2VjO1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmluaXRDcnVtYnNMaXN0KCk7XHJcbiAgICAgICAgfSwgMCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOmDqOmXqOaIluS6uuWRmOeKtuaAgeWPmOWMllxyXG4gICAgICogQHBhcmFtIGV2ZW50IFxyXG4gICAgICogQHBhcmFtIHNlY3Rpb24gXHJcbiAgICAgKi9cclxuICAgIGhhbmRsZUNsaWNrKGV2ZW50LCBzZWN0aW9uLCB0eXBlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFNlY3Rpb24uZGlzYWJsZWQpIHJldHVybjtcclxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICBzZWN0aW9uLmNoZWNrZWQgPSAhc2VjdGlvbi5jaGVja2VkO1xyXG4gICAgICAgIHNlY3Rpb25bJ2luZGV0ZXJtaW5hdGUnXSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuc2V0U2VjdGlvbkRhdGFDaGVja2VkKCk7XHJcbiAgICAgICAgaWYgKHNlY3Rpb24uY2hlY2tlZCkge1xyXG4gICAgICAgICAgICBsZXQgc2VsZWN0ZWREYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgcGFyZW50OiB0aGlzLmN1cnJlbnRTZWN0aW9uLFxyXG4gICAgICAgICAgICAgICAgZGF0YTogc2VjdGlvblxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBpZiAodHlwZSA9PSAndXNlcicpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9pc1NlbGVjdGVkSW5BcnJheShzZWN0aW9uW3RoaXMubGlzdElkRmllbGRdLCB0aGlzLmxpc3RJZEZpZWxkLCB0aGlzLnNlbGVjdGVkVXNlcnMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFVzZXJzLnB1c2goc2VsZWN0ZWREYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlID09ICdzZWN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hZGRTZWN0aW9uKHNlY3Rpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodHlwZSA9PSAndXNlcicpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9pc1NlbGVjdGVkSW5BcnJheShzZWN0aW9uW3RoaXMubGlzdElkRmllbGRdLCB0aGlzLmxpc3RJZEZpZWxkLCB0aGlzLnNlbGVjdGVkVXNlcnMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFVzZXJzLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtWydkYXRhJ11bdGhpcy5saXN0SWRGaWVsZF0gPT09IHNlY3Rpb25bdGhpcy5saXN0SWRGaWVsZF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRVc2Vycy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZSA9PSAnc2VjdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlU2VjdGlvbihzZWN0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnNlbGVjdGVkVXNlcnMsdGhpcy5zZWxlY3RlZFNlY3Rpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVTZWFyY2hDbGljayhldmVudCwgdXNlcikge1xyXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIHVzZXIuY2hlY2tlZCA9ICF1c2VyLmNoZWNrZWQ7XHJcbiAgICAgICAgaWYgKHVzZXIuY2hlY2tlZCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5faXNTZWxlY3RlZEluQXJyYXkodXNlclt0aGlzLmxpc3RJZEZpZWxkXSwgdGhpcy5saXN0SWRGaWVsZCwgdGhpcy5zZWxlY3RlZFVzZXJzKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbGV0IHNlbGVjdGVkRGF0YSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogdXNlclxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRVc2Vycy5wdXNoKHNlbGVjdGVkRGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9pc1NlbGVjdGVkSW5BcnJheSh1c2VyW3RoaXMubGlzdElkRmllbGRdLCB0aGlzLmxpc3RJZEZpZWxkLCB0aGlzLnNlbGVjdGVkVXNlcnMpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkVXNlcnMuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbVsnZGF0YSddW3RoaXMubGlzdElkRmllbGRdID09PSB1c2VyW3RoaXMubGlzdElkRmllbGRdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRVc2Vycy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldFNlY3Rpb25EYXRhQ2hlY2tlZCgpIHtcclxuICAgICAgICBsZXQgY3VyQ2hlY2tlZDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgICAgIGxldCBzZWMgPSB0aGlzLmN1cnJlbnRTZWN0aW9uO1xyXG4gICAgICAgIGxldCBzZWNBcnJheTogYW55ID0gW107XHJcbiAgICAgICAgaWYgKHNlYy5jaGlsZHJlbiB8fCAoc2VjLnBlcnNvbm5lbHNbJ3VzZXJzJ10gJiYgc2VjLnBlcnNvbm5lbHNbJ3VzZXJzJ10ubGVuZ3RoKSkge1xyXG4gICAgICAgICAgICBzZWNBcnJheSA9IHNlY0FycmF5LmNvbmNhdChzZWMuY2hpbGRyZW4sIHNlYy5wZXJzb25uZWxzWyd1c2VycyddKTtcclxuICAgICAgICAgICAgbGV0IHNlY0NoZWNrZWRMaXN0ID0gc2VjQXJyYXkuZmlsdGVyKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0uaGFzT3duUHJvcGVydHkoJ2NoZWNrZWQnKSAmJiBpdGVtWydjaGVja2VkJ10pIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGxldCBzZWNJbmRlTGlzdCA9IHNlYy5jaGlsZHJlbi5maWx0ZXIoaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5oYXNPd25Qcm9wZXJ0eSgnaW5kZXRlcm1pbmF0ZScpICYmIGl0ZW1bJ2luZGV0ZXJtaW5hdGUnXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRTZWN0aW9uWydpbmRldGVybWluYXRlJ10gPSAoc2VjSW5kZUxpc3QgJiYgc2VjSW5kZUxpc3QubGVuZ3RoKSA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKHNlY0NoZWNrZWRMaXN0ICYmIHNlY0NoZWNrZWRMaXN0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHNlY0NoZWNrZWRMaXN0Lmxlbmd0aCA9PSBzZWNBcnJheS5sZW5ndGggJiYgc2VjLnBlcnNvbm5lbHMucGFnZUluZGV4ID49IHNlYy5wZXJzb25uZWxzLnBhZ2VDb3VudCAtIDEpIHtcclxuICAgICAgICAgICAgICAgICAgICBjdXJDaGVja2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFNlY3Rpb25bJ2luZGV0ZXJtaW5hdGUnXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjdXJDaGVja2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50U2VjdGlvblsnY2hlY2tlZCddID0gY3VyQ2hlY2tlZDtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5jdXJyZW50U2VjdGlvbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50U2VjdGlvbi5wYXJlbnRzLmxlbmd0aCA+IDAgJiYgdGhpcy5jdXJyZW50U2VjdGlvblsnaW5kZXRlcm1pbmF0ZSddKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFNlY3Rpb24ucGFyZW50cy5mb3JFYWNoKHBhciA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJTZWMgPSB0aGlzLmdldFNlY3Rpb25CeUlkKHBhcik7XHJcbiAgICAgICAgICAgICAgICBpZiAocGFyU2VjKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFyU2VjWydpbmRldGVybWluYXRlJ10gPSB0aGlzLmN1cnJlbnRTZWN0aW9uWydpbmRldGVybWluYXRlJ107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXRDaGlsZERpc2FibGVkU3RhdHVzKHN0YXR1czogYm9vbGVhbiA9IHRydWUpIHtcclxuICAgICAgICBsZXQgc2VjID0gdGhpcy5jdXJyZW50U2VjdGlvbjtcclxuICAgICAgICAvLyBzZWNbJ2Rpc2FibGVkJ10gPSBzdGF0dXM7XHJcbiAgICAgICAgaWYgKHNlYy5jaGlsZHJlbiB8fCAoc2VjLnBlcnNvbm5lbHNbJ3VzZXJzJ10gJiYgc2VjLnBlcnNvbm5lbHNbJ3VzZXJzJ10ubGVuZ3RoKSkge1xyXG4gICAgICAgICAgICBzZWMuY2hpbGRyZW4uZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgIGl0ZW1bJ2Rpc2FibGVkJ10gPSBzdGF0dXM7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvLyBzZWNbJ2NoaWxkRGlzYWJsZWQnXSA9IHN0YXR1cztcclxuICAgICAgICAgICAgc2VjLnBlcnNvbm5lbHNbJ3VzZXJzJ10uZm9yRWFjaCh1c2VyID0+IHtcclxuICAgICAgICAgICAgICAgIHVzZXJbJ2Rpc2FibGVkJ10gPSBzdGF0dXM7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOS6uuWRmOafpeeci+abtOWkmlxyXG4gICAgICovXHJcbiAgICBnZXRNb3JlRGF0YSgpIHtcclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50U2VjdGlvbklkKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlYyA9IHRoaXMuZ2V0U2VjdGlvbkJ5SWQodGhpcy5jdXJyZW50U2VjdGlvbklkKTtcclxuICAgICAgICAgICAgaWYgKHNlYykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRQZXJzb25uZWwodGhpcy5jdXJyZW50U2VjdGlvbklkLCBzZWMucGVyc29ubmVscy5wYWdlSW5kZXggKyAxKS5zdWJzY3JpYmUoKGQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkLmhhc093blByb3BlcnR5KFwidXNlcnNcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VjLnBlcnNvbm5lbHMucGFnZUluZGV4ID0gZFsncGFnZUluZGV4J107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlYy5wZXJzb25uZWxzWyd1c2VycyddID0gWy4uLnNlYy5wZXJzb25uZWxzWyd1c2VycyddLCAuLi5kWyd1c2VycyddXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlYy5wZXJzb25uZWxzWyd1c2VycyddLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlY1snY2hlY2tlZCddKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjLnBlcnNvbm5lbHNbJ3VzZXJzJ10uZm9yRWFjaCh1c2VyID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlclsnY2hlY2tlZCddID0gc2VjWydjaGVja2VkJ107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5zZXRTZWN0aW9uRGF0YUNoZWNrZWQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlhajpgIlcclxuICAgICAqIEBwYXJhbSBldmVudCBcclxuICAgICAqL1xyXG4gICAgaGFuZGxlQ2xpY2tBbGwoZXZlbnQpIHtcclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50U2VjdGlvbi5kaXNhYmxlZCkgcmV0dXJuO1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRTZWN0aW9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFNlY3Rpb25bJ2NoZWNrZWQnXSA9ICF0aGlzLmN1cnJlbnRTZWN0aW9uWydjaGVja2VkJ107XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFNlY3Rpb25bJ2luZGV0ZXJtaW5hdGUnXSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBsZXQgY3VyQ2hlY2tlZCA9IHRoaXMuY3VycmVudFNlY3Rpb25bJ2NoZWNrZWQnXTtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50U2VjdGlvbi5jaGlsZHJlbi5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgaXRlbVsnY2hlY2tlZCddID0gY3VyQ2hlY2tlZDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmIChKU09OLnN0cmluZ2lmeSh0aGlzLmN1cnJlbnRTZWN0aW9uLnBlcnNvbm5lbHMpICE9ICd7fScgJiYgdGhpcy5jdXJyZW50U2VjdGlvblsncGVyc29ubmVscyddWyd1c2VycyddLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50U2VjdGlvblsncGVyc29ubmVscyddWyd1c2VycyddLmZvckVhY2godXNlciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXNlclsnY2hlY2tlZCddID0gY3VyQ2hlY2tlZDtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjdXJDaGVja2VkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFkZFNlY3Rpb24odGhpcy5jdXJyZW50U2VjdGlvbilcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlU2VjdGlvbih0aGlzLmN1cnJlbnRTZWN0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhZGRTZWN0aW9uKHNlY3Rpb24pIHtcclxuICAgICAgICBpZiAodGhpcy5faXNTZWxlY3RlZEluQXJyYXkoc2VjdGlvblsnZGF0YSddW3RoaXMubGlzdElkRmllbGRdLCB0aGlzLmxpc3RJZEZpZWxkLCB0aGlzLnNlbGVjdGVkU2VjdGlvbnMpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRTZWN0aW9ucy5wdXNoKHNlY3Rpb24pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJlbW92ZVNlY3Rpb24oc2VjdGlvbikge1xyXG4gICAgICAgIGlmICh0aGlzLl9pc1NlbGVjdGVkSW5BcnJheShzZWN0aW9uWydkYXRhJ11bdGhpcy5saXN0SWRGaWVsZF0sIHRoaXMubGlzdElkRmllbGQsIHRoaXMuc2VsZWN0ZWRTZWN0aW9ucykpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFNlY3Rpb25zLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXRlbVsnZGF0YSddW3RoaXMubGlzdElkRmllbGRdID09PSBzZWN0aW9uWydkYXRhJ11bdGhpcy5saXN0SWRGaWVsZF0pIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkU2VjdGlvbnMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5pCc57Si55So5oi3XHJcbiAgICAgKi9cclxuICAgIHNlYXJjaFVzZXIoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2VhcmNoVGV4dCkge1xyXG4gICAgICAgICAgICB0aGlzLnNob3dTZWFyY2hMaXN0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5zaG93T3JIaWRlTG9hZGluZyh0cnVlKTtcclxuICAgICAgICAgICAgdGhpcy5nZXRTZWFyY2hEYXRhKHRoaXMuc2VhcmNoVGV4dCwgMCkuc3Vic2NyaWJlKGQgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93T3JIaWRlTG9hZGluZyhmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZC5oYXNPd25Qcm9wZXJ0eShcInVzZXJzXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWFyY2hVc2VyTGlzdCA9IGQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zaG93U2VhcmNoTGlzdCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5pCc57Si5Lq65ZGY5p+l55yL5pu05aSaXHJcbiAgICAgKi9cclxuICAgIGdldE1vcmVTZWFyY2hEYXRhKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnNlYXJjaFRleHQgJiYgdGhpcy5wZXJzb25TZWFyY2hVcmwpIHtcclxuICAgICAgICAgICAgdGhpcy5nZXRTZWFyY2hEYXRhKHRoaXMuc2VhcmNoVGV4dCwgdGhpcy5zZWFyY2hVc2VyTGlzdC5wYWdlSW5kZXggKyAxKS5zdWJzY3JpYmUoZCA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZC5oYXNPd25Qcm9wZXJ0eShcInVzZXJzXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWFyY2hVc2VyTGlzdC5wYWdlSW5kZXggPSBkWydwYWdlSW5kZXgnXTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaFVzZXJMaXN0Wyd1c2VycyddID0gWy4uLnRoaXMuc2VhcmNoVXNlckxpc3RbJ3VzZXJzJ10sIC4uLmRbJ3VzZXJzJ11dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0U2VhcmNoRGF0YSh0ZXh0OiBzdHJpbmcsIHBhZ2VJbmRleDogbnVtYmVyLCBwYWdlU2l6ZTogbnVtYmVyID0gdGhpcy5wYWdlU2l6ZSkge1xyXG4gICAgICAgIGlmICh0aGlzLnBlcnNvblNlYXJjaFVybCkge1xyXG4gICAgICAgICAgICBjb25zdCB1cmwgPSBgJHt0aGlzLnBlcnNvblNlYXJjaFVybH0/cGFyYW09JHt0ZXh0fSZwYWdlU2l6ZT0ke3BhZ2VTaXplfSZwYWdlSW5kZXg9JHtwYWdlSW5kZXh9YDtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQodXJsKTtcclxuICAgICAgICAgICAgLy9yZXR1cm4gdGhpcy5odHRwLmdldCgnYXNzZXRzL2RhdGEvZGlzY3Vzc2lvblBlcnNvbjMuanNvbicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG9mKHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOmAieS4reS6uuWRmOaIlue7hOe7h+WIoOmZpFxyXG4gICAgICogQHBhcmFtIGRhdGEgXHJcbiAgICAgKiBAcGFyYW0gdHlwZSBcclxuICAgICAqL1xyXG4gICAgc2VsZWN0aW9uUmVtb3ZlKGRhdGE6IGFueSwgdHlwZTogc3RyaW5nKSB7XHJcbiAgICAgICAgaWYgKCFkYXRhKSByZXR1cm47XHJcbiAgICAgICAgaWYgKHR5cGUgPT0gJ3VzZXInKSB7XHJcbiAgICAgICAgICAgIGxldCBpbmRleCA9IHRoaXMuc2VsZWN0ZWRVc2Vycy5maW5kSW5kZXgodXNlciA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdXNlci5kYXRhLmlkID09IGRhdGEuZGF0YS5pZDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmIChpbmRleCA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkVXNlcnMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBkYXRhLmRhdGFbJ2NoZWNrZWQnXSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0eXBlID09ICdzZWN0aW9uJykge1xyXG4gICAgICAgICAgICBsZXQgaW5kZXggPSB0aGlzLnNlbGVjdGVkU2VjdGlvbnMuZmluZEluZGV4KGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0uZGF0YS5pZCA9PSBkYXRhLmRhdGEuaWQ7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFNlY3Rpb25zLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZGF0YVsnY2hlY2tlZCddID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBkYXRhUGFyZW50ID0gbnVsbDtcclxuICAgICAgICBpZiAodHlwZSA9PSAnc2VjdGlvbicpIHtcclxuICAgICAgICAgICAgZGF0YVBhcmVudCA9IHRoaXMuZ2V0U2VjdGlvbkJ5SWQoZGF0YS5wYXJlbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0eXBlID09ICd1c2VyJykge1xyXG4gICAgICAgICAgICAvLyBidWdOdW06NDgwNjQ5XHJcbiAgICAgICAgICAgIGlmKGRhdGFbJ3BhcmVudCddKXtcclxuICAgICAgICAgICAgICAgIGRhdGFQYXJlbnQgPSB0aGlzLmdldFNlY3Rpb25CeUlkKGRhdGEucGFyZW50LmRhdGEuaWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChkYXRhUGFyZW50KSB7XHJcbiAgICAgICAgICAgIGRhdGFQYXJlbnRbJ2NoZWNrZWQnXSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAoKGRhdGFQYXJlbnQuY2hpbGRyZW4gJiYgZGF0YVBhcmVudC5jaGlsZHJlbi5sZW5ndGgpIHx8IChkYXRhUGFyZW50LnBlcnNvbm5lbHMudXNlcnMgJiYgZGF0YVBhcmVudC5wZXJzb25uZWxzLnVzZXJzLmxlbmd0aCkpIHtcclxuICAgICAgICAgICAgICAgIGxldCBjaGlsZHJlbnMgPSBkYXRhUGFyZW50LmNoaWxkcmVuLmZpbHRlcihjaGlsZCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNoaWxkWydjaGVja2VkJ107XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGxldCB1c2VycyA9IGRhdGFQYXJlbnQucGVyc29ubmVscy51c2Vycy5maWx0ZXIodXNlciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVzZXJbJ2NoZWNrZWQnXTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICBpZiAoKGNoaWxkcmVucyAmJiBjaGlsZHJlbnMubGVuZ3RoKSB8fCAodXNlcnMgJiYgdXNlcnMubGVuZ3RoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFQYXJlbnRbJ2luZGV0ZXJtaW5hdGUnXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhUGFyZW50WydpbmRldGVybWluYXRlJ10gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChkYXRhUGFyZW50LnBhcmVudHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFQYXJlbnQucGFyZW50cy5mb3JFYWNoKHBhciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhclNlYyA9IHRoaXMuZ2V0U2VjdGlvbkJ5SWQocGFyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChwYXJTZWMuY2hpbGRyZW4gJiYgcGFyU2VjLmNoaWxkcmVuLmxlbmd0aCkgfHwgKHBhclNlYy5wZXJzb25uZWxzLnVzZXJzICYmIHBhclNlYy5wZXJzb25uZWxzLnVzZXJzLmxlbmd0aCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwYXJjaGlsZHJlbnMgPSBwYXJTZWMuY2hpbGRyZW4uZmlsdGVyKGNoaWxkID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2hpbGRbJ2NoZWNrZWQnXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBhcnVzZXJzID0gcGFyU2VjLnBlcnNvbm5lbHMudXNlcnMuZmlsdGVyKHVzZXIgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1c2VyWydjaGVja2VkJ107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChwYXJjaGlsZHJlbnMgJiYgcGFyY2hpbGRyZW5zLmxlbmd0aCkgfHwgKHBhcnVzZXJzICYmIHBhcnVzZXJzLmxlbmd0aCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJTZWNbJ2luZGV0ZXJtaW5hdGUnXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YVBhcmVudFsnaW5kZXRlcm1pbmF0ZSddKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhclNlY1snaW5kZXRlcm1pbmF0ZSddID0gZGF0YVBhcmVudFsnaW5kZXRlcm1pbmF0ZSddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyU2VjWydpbmRldGVybWluYXRlJ10gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5Yig6Zmk5Y+z5L6n5YWo6YOo5pWw5o2uXHJcbiAgICAgKi9cclxuICAgIG1vdmVBbGxUb0xlZnQoKSB7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZFVzZXJzLmZvckVhY2godXNlciA9PiB7XHJcbiAgICAgICAgICAgIHVzZXIuZGF0YVsnY2hlY2tlZCddID0gZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZFNlY3Rpb25zLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIGl0ZW1bJ2NoZWNrZWQnXSA9IGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuc2VjdGlvbkRhdGFUaWxlZC5mb3JFYWNoKHNlYyA9PiB7XHJcbiAgICAgICAgICAgIHNlY1snaW5kZXRlcm1pbmF0ZSddID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHNlY1snY2hlY2tlZCddID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHNlY1snZGlzYWJsZWQnXSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAoSlNPTi5zdHJpbmdpZnkoc2VjLnBlcnNvbm5lbHMpICE9ICd7fScgJiYgc2VjWydwZXJzb25uZWxzJ11bJ3VzZXJzJ10ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBzZWNbJ3BlcnNvbm5lbHMnXVsndXNlcnMnXS5mb3JFYWNoKHVzZXIgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHVzZXJbJ2NoZWNrZWQnXSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkVXNlcnMgPSBbXTtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkU2VjdGlvbnMgPSBbXTtcclxuICAgICAgICB0aGlzLmNkLm1hcmtGb3JDaGVjaygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0gbnVtYmVyVHlwZSAw77ya5Y+W5raI77ybMe+8muehruWumlxyXG4gICAgICovXHJcbiAgICByZXR1cm5SZXN1bHQobnVtYmVyVHlwZTogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5maW5hbFRleHQgPSAnJztcclxuICAgICAgICBpZiAobnVtYmVyVHlwZSkge1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnNlbGVjdGVkVXNlcnMsdGhpcy5zZWxlY3RlZFNlY3Rpb25zKTtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25zQ2hhbmdlLmVtaXQoe1xyXG4gICAgICAgICAgICAgICAgaW5mbzogJ2NvbmZpcm0nLFxyXG4gICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgIHVzZXJzOiB0aGlzLnNlbGVjdGVkVXNlcnMsXHJcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbjogdGhpcy5zZWxlY3RlZFNlY3Rpb25zXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvLyB0aGlzLnNlbGVjdGlvbnMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgLy8gICAgIHRoaXMuZmluYWxUZXh0ICs9IGl0ZW1bdGhpcy5saXN0RGlzcGxheVRleHRdICsgJ++8myc7XHJcbiAgICAgICAgICAgIC8vIH0pXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25zQ2hhbmdlLmVtaXQoe1xyXG4gICAgICAgICAgICAgICAgaW5mbzogJ2NhbmNlbCcsXHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXNlcnM6IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlY3Rpb246IFtdXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm1vdmVBbGxUb0xlZnQoKTtcclxuICAgICAgICB0aGlzLnNlYXJjaFRleHQgPSAnJztcclxuICAgICAgICB0aGlzLnNlYXJjaFVzZXIoKTtcclxuICAgICAgICB0aGlzLnBlcnNvbm5lbERpYWxvZy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiAg6Z2i5YyF5bGR5YiX6KGo5pi+56S6XHJcbiAgICAgKi9cclxuICAgIGluaXRDcnVtYnNMaXN0KCkge1xyXG4gICAgICAgIGNvbnN0IGNydW1ic0xpc3RXaWR0aCA9IHRoaXMuY3J1bWJzTGlzdC5uYXRpdmVFbGVtZW50Lm9mZnNldFdpZHRoIC0gMzA7XHJcbiAgICAgICAgY29uc3QgY3J1bWJzTGlzdEl0ZW1zID0gdGhpcy5jcnVtYnNMaXN0Lm5hdGl2ZUVsZW1lbnQuY2hpbGRyZW47XHJcblxyXG4gICAgICAgIGxldCBjcnVtYnNMaXN0SXRlbVdpZHRoID0gMDtcclxuICAgICAgICBpZiAoY3J1bWJzTGlzdEl0ZW1zICYmIGNydW1ic0xpc3RJdGVtcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IGNydW1ic0xpc3RJdGVtcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUoY3J1bWJzTGlzdEl0ZW1zW2ldLCAnZGlzcGxheScsICdmbGV4Jyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgd2lkdGggPSBjcnVtYnNMaXN0SXRlbXNbaV0ub2Zmc2V0V2lkdGg7XHJcbiAgICAgICAgICAgICAgICBjcnVtYnNMaXN0SXRlbVdpZHRoICs9IHdpZHRoO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNydW1ic0xpc3RJdGVtV2lkdGggPj0gY3J1bWJzTGlzdFdpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZShjcnVtYnNMaXN0SXRlbXNbaV0sICdkaXNwbGF5JywgJ25vbmUnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUoY3J1bWJzTGlzdEl0ZW1zW2ldLCAnZGlzcGxheScsICdmbGV4Jyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmIChjcnVtYnNMaXN0SXRlbVdpZHRoID49IGNydW1ic0xpc3RXaWR0aCkge1xyXG4gICAgICAgICAgICB0aGlzLmNydW1ic0VsbGlwc2lzID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3J1bWJzRWxsaXBzaXMgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY3J1bWJzTW9yZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5zZWN0aW9uQ3J1bWJzICYmIHRoaXMuc2VjdGlvbkNydW1icy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5jcnVtYnNDbGljayh0aGlzLnNlY3Rpb25DcnVtYnNbMF0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfaXNJbkFycmF5KHZhbHVlOiBzdHJpbmcsIGZpZWxkOiBzdHJpbmcsIGFycmF5OiBhbnlbXSkge1xyXG4gICAgICAgIGlmICghZmllbGQgfHwgIXZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcign5YmNMuS4quWPguaVsOW/heWhqycpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYXJyYXkuZmluZChpdGVtID0+IHZhbHVlID09PSBpdGVtW2ZpZWxkXSkgPyB0cnVlIDogZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgX2lzU2VsZWN0ZWRJbkFycmF5KHZhbHVlOiBzdHJpbmcsIGZpZWxkOiBzdHJpbmcsIGFycmF5OiBhbnlbXSkge1xyXG4gICAgICAgIGlmICghZmllbGQgfHwgIXZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcign5YmNMuS4quWPguaVsOW/heWhqycpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYXJyYXkuZmluZChpdGVtID0+IHZhbHVlID09PSBpdGVtWydkYXRhJ11bZmllbGRdKSA/IHRydWUgOiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZURpYWxvZygpIHtcclxuICAgICAgICB0aGlzLm1vdmVBbGxUb0xlZnQoKTtcclxuICAgICAgICB0aGlzLnNlYXJjaFRleHQgPSAnJztcclxuICAgICAgICB0aGlzLnNlYXJjaFVzZXIoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5pi+56S65oiW6ZqQ6JeP5q2j5Zyo5Yqg6L29XHJcbiAgICAgKiBAcGFyYW0gc2hvd09ySGlkZSDvvJp0cnVl5Li65pi+56S677yMaGlkZeS4uumakOiXj1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHNob3dPckhpZGVMb2FkaW5nKHNob3dPckhpZGUpIHtcclxuICAgICAgICBpZiAoIXRoaXMuZGlzY3Vzc2lvbkNvbnRlbnQgfHwgIXRoaXMubG9hZGluZ1Nlcikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzaG93T3JIaWRlKSB7XHJcbiAgICAgICAgICAgIC8vIOaJk+W8gFxyXG4gICAgICAgICAgICB0aGlzLmxvYWRpbmdJbnN0YW5jZSA9IHRoaXMubG9hZGluZ1Nlci5zaG93KHsgZGVsYXk6IDUwMCwgY29udGFpbmVyOiB0aGlzLmRpc2N1c3Npb25Db250ZW50LCB0eXBlOiAxLCBtZXNzYWdlOiAn5YWo5Yqb5Yqg6L295LitLi4uJyB9KTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMubG9hZGluZ0luc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIC8vIOWFs+mXrVxyXG4gICAgICAgICAgICB0aGlzLmxvYWRpbmdTZXIuY2xvc2UodGhpcy5sb2FkaW5nSW5zdGFuY2UuaWQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn0iXX0=