/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/*
 * @Author: 疯狂秀才(Lucas Huang)
 * @Date: 2019-08-06 08:31:57
 * @LastEditors: 疯狂秀才(Lucas Huang)
 * @LastEditTime: 2019-08-15 16:06:58
 * @QQ: 1055818239
 * @Version: v0.0.1
 */
import { Component, Input, ViewChild, Renderer2, ElementRef, Output, EventEmitter, TemplateRef } from '@angular/core';
import { fromEvent, Observable } from 'rxjs';
import { AngularDraggableDirective } from '@farris/ui-draggable';
import { ModalDirective } from '@farris/ui-modal';
import { ContentChild } from '@angular/core';
import { debounceTime } from 'rxjs/operators';
export class DialogComponent {
    /**
     * @param {?} render2
     * @param {?} el
     */
    constructor(render2, el) {
        this.render2 = render2;
        this.el = el;
        /**
         * 窗口标题
         */
        this.title = '我是标题';
        /**
         * 标题图标
         */
        this.iconCls = undefined;
        /**
         * 宽度
         */
        this.width = 300;
        /**
         * 高度
         */
        this.height = 200;
        this.minWidth = 100;
        this.minHeight = 100;
        this.maxWidth = null;
        this.maxHeight = null;
        /**
         * 显示底部按钮区域，默认显示
         */
        this.showButtons = true;
        /**
         * 显示右上角关闭按钮，默认显示
         */
        this.showCloseButton = true;
        /**
         * 显示最大化按钮，默认显示
         */
        this.showMaxButton = true;
        /**
         * 显示最小化按钮，默认不显示, 显示出来也没有用
         */
        this.showMinButton = false;
        /**
         * 启用拖拽改变尺寸大小
         */
        this.resizable = true;
        /**
         * 启用拖动窗口
         */
        this.draggable = true;
        /**
         * 按钮对齐方式
         */
        this.buttonAlign = 'center';
        this.scrollConfig = {};
        this.opened = new EventEmitter();
        this.closed = new EventEmitter();
        this.resized = new EventEmitter();
        this.resizing = new EventEmitter();
        this.maxed = new EventEmitter();
        this.widthChange = new EventEmitter();
        this.heightChange = new EventEmitter();
        this.enableScroll = true;
        /**
         * 标题栏高度
         */
        this.dialogHeaderHeight = 0;
        /**
         * 按钮区高度
         */
        this.dialogFooterHeight = 0;
        this.parentElement = null;
        /**
         * 显示头部
         */
        this.showHeader = true;
        this.isMax = false; // 是否最大窗口
        // 记录上次的高度
        this.hostId = '';
        /**
         * 窗口最大化时，是否与浏览器之间有间距，当为true时与浏览器边距为 0
         */
        this.maxPadding = true;
        this.windowResize$ = null;
        this.postitionStyles = {};
        this._windowResizeToMax = false;
        this._mutationObserver = null;
        this._dialogEl = null;
    }
    /**
     * @return {?}
     */
    get size() {
        /** @type {?} */
        const headerHeight = this.getDialogHeaderLineHeight();
        /** @type {?} */
        const footerHeight = this.getDialogFooterHeight();
        /** @type {?} */
        let contentHeight = this.height - headerHeight;
        if (this.showButtons) {
            contentHeight = contentHeight - footerHeight;
        }
        return {
            width: this.width,
            height: this.height,
            contentHeight,
            contentWidth: this.width,
            header: headerHeight,
            footer: footerHeight
        };
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.hostId = `farris-dialog_${new Date().getTime()}`;
        this.render2.setProperty(this.el.nativeElement, 'id', this.hostId);
        if (!this.beforeOpen) {
            this.beforeOpen = (/**
             * @return {?}
             */
            () => true);
        }
        if (!this.beforeClose) {
            this.beforeClose = (/**
             * @return {?}
             */
            () => true);
        }
        this.modal.onShown.subscribe((/**
         * @return {?}
         */
        () => {
            this.opened.emit();
        }));
        // this.modal.onHidden.subscribe(() => this.closed.emit());
        this.checkDialogSize();
        setTimeout((/**
         * @return {?}
         */
        () => {
            if (this.parentElement) {
                this.parentElement.appendChild(this.el.nativeElement);
            }
            else {
                document.body.appendChild(this.el.nativeElement);
            }
            if (this.showHeader && this.modalHeader) {
                this.dragHandle = this.modalHeader.nativeElement;
            }
        }), 100);
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    ngOnChanges(changes) {
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        setTimeout((/**
         * @return {?}
         */
        () => {
            this.destroy();
            this.el = null;
            if (this.parentElement) {
                this.parentElement = null;
            }
            if (this._mutationObserver) {
                // 停止观察属性变化
                this._mutationObserver.disconnect();
                this._mutationObserver = null;
            }
        }), 150);
    }
    /**
     * @private
     * @return {?}
     */
    getScreenSize() {
        /** @type {?} */
        const margin = (this.maxPadding ? 20 : 0);
        return {
            width: window.innerWidth - margin,
            height: window.innerHeight - margin,
            padding: margin ? 10 : 0
        };
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        if (!this.dialogEl) {
            this._dialogEl = this.el.nativeElement.querySelector('.modal-dialog');
        }
        else {
            this._dialogEl = this.dialogEl.nativeElement;
        }
        this.dlgHeaderLineHeight = this.getDialogHeaderLineHeight();
        if (this.dialogHeaderHeight && this.modalHeader) {
            this.modalHeader.nativeElement.style.height = `${this.dialogHeaderHeight}px`;
        }
        if (this.dialogFooterHeight) {
            /** @type {?} */
            const footer = this.modalContent.nativeElement.querySelector('.modal-footer');
            if (footer) {
                footer.style.height = `${this.dialogFooterHeight}px`;
            }
        }
        this.originalHeight = this.height;
        this.originalWidth = this.width;
        this.resetPosition();
        this.windowResize$ = fromEvent(window, 'resize').pipe(debounceTime(50)).subscribe((/**
         * @param {?} e
         * @return {?}
         */
        (e) => {
            const { width: winWidth, height: winHeight } = this.getScreenSize();
            if (this.width <= winWidth && this.height <= winHeight) {
                if (this._windowResizeToMax) {
                    this.revertDialog();
                    this._windowResizeToMax = false;
                }
                else {
                    if (this.isMax) {
                        this.maxDialog(false);
                    }
                }
            }
            else {
                if (!this.isMax) {
                    this._windowResizeToMax = true;
                    this.maxDialog();
                }
                else {
                    this.maxDialog(false);
                }
            }
            this.toCenter(0, 0);
        }));
        // this.listenattributesChanged();
    }
    // private listenattributesChanged() {
    //      // 观察器的配置（需要观察什么变动）
    //      const config = { attributes: true, subtree: false,characterData:true, attributeFilter: ['style'], attributeOldValue: true} ;
    //      // 当观察到变动时执行的回调函数
    //      const callback = (mutationsList, observer) => {
    //         // Use traditional 'for loops' for IE 11
    //         for(let mutation of mutationsList) {
    //             // console.log(mutation);
    //         }
    //      };
    //      // 创建一个观察器实例并传入回调函数
    //      this._mutationObserver = new MutationObserver(callback);
    //      // 以上述配置开始观察目标节点
    //      this._mutationObserver.observe(this.dialogEl.nativeElement, config);
    // }
    /**
     * @param {?} x
     * @param {?} y
     * @return {?}
     */
    toCenter(x, y) {
        this.resetPosition();
        this.draggbar.position = { x, y };
        this.draggbar.resetPosition();
    }
    /**
     * @return {?}
     */
    destroy() {
        if (!this.parentElement) {
            if (document.body.querySelector(`#${this.hostId}`)) {
                document.body.removeChild(this.el.nativeElement);
            }
        }
        else {
            if (this.parentElement.querySelector(`#${this.hostId}`)) {
                this.parentElement.removeChild(this.el.nativeElement);
            }
        }
        if (this.windowResize$) {
            this.windowResize$.unsubscribe();
            this.windowResize$ = null;
        }
    }
    /**
     * @private
     * @return {?}
     */
    getDialogHeaderLineHeight() {
        if (this.modalHeader) {
            if (!this.dlgHeaderLineHeight) {
                this.dlgHeaderLineHeight = Math.ceil(this.modalHeader.nativeElement.getBoundingClientRect().height);
                return this.dlgHeaderLineHeight;
            }
            return this.dlgHeaderLineHeight;
        }
        return 0;
    }
    /**
     * @private
     * @return {?}
     */
    getDialogFooterHeight() {
        /** @type {?} */
        const footerEl = this.modalContent.nativeElement.querySelector('.modal-footer');
        if (footerEl) {
            if (!this.dlgFooterLineHeight) {
                this.dlgFooterLineHeight = Math.ceil(footerEl.getBoundingClientRect().height);
            }
            return this.dlgFooterLineHeight;
        }
        return 0;
    }
    /**
     * @private
     * @param {?} width
     * @param {?} height
     * @return {?}
     */
    _checkDialogSize(width, height) {
        // 可视区域尺寸
        /** @type {?} */
        const winSize = {
            width: document.body.offsetWidth,
            height: window.innerHeight
        };
        if (this.parentElement) {
            winSize.width = this.parentElement.offsetWidth;
            winSize.height = this.parentElement.offsetHeight;
        }
        if (winSize.width && winSize.width < width) {
            width = winSize.width;
        }
        if (winSize.height && winSize.height < height) {
            height = winSize.height;
        }
        return {
            width,
            height
        };
    }
    /**
     * @private
     * @return {?}
     */
    checkDialogSize() {
        /** @type {?} */
        const newSize = this._checkDialogSize(this.width, this.height);
        if (this.width !== newSize.width) {
            this.width = newSize.width - 20;
            this.widthChange.emit(this.width);
        }
        if (this.height !== newSize.height) {
            this.height = newSize.height - 20;
            this.heightChange.emit(this.height);
        }
    }
    /**
     * @return {?}
     */
    updateModalBodyHeight() {
        /** @type {?} */
        const contentEl = this.el.nativeElement.querySelector('.modal-body');
        /** @type {?} */
        const contentHeight = this.size.contentHeight;
        this.render2.setStyle(contentEl, 'height', contentHeight + 'px');
    }
    /**
     * @private
     * @return {?}
     */
    updatePosition() {
        /** @type {?} */
        const marginLeft = Number.parseInt('' + -this.width / 2);
        /** @type {?} */
        const marginTop = Number.parseInt('' + -this.height / 2);
        this.postitionStyles = {
            marginLeft: marginLeft + 'px',
            marginTop: marginTop + 'px',
            transform: 'translate3d(0px, 0px, 0px)',
            top: `${window.innerHeight / 2 + marginTop}px`,
            left: `${window.innerWidth / 2 + marginLeft}px`,
            top1: this.isMax ? '10px' : '50%',
            left1: this.isMax ? '10px' : '50%'
        };
    }
    /**
     * @return {?}
     */
    resetPosition() {
        this.updatePosition();
        if (this._dialogEl) {
            /** @type {?} */
            const dialogEl = this._dialogEl;
            this.render2.setStyle(dialogEl, 'top', this.postitionStyles.top);
            this.render2.setStyle(dialogEl, 'left', this.postitionStyles.left);
            this.render2.setStyle(dialogEl, 'transform', this.postitionStyles.transform);
        }
    }
    /**
     * @private
     * @param {?} flag
     * @return {?}
     */
    openDialog(flag) {
        if (flag) {
            this.resetPosition();
            this.draggbar.resetPosition();
            this.modal.show();
            setTimeout((/**
             * @return {?}
             */
            () => {
                /** @type {?} */
                const backdropEl = this.el.nativeElement.querySelector('.farris-modal');
                /** @type {?} */
                const modals = Array.from(document.body.querySelectorAll('.farris-modal.show')).filter((/**
                 * @param {?} n
                 * @return {?}
                 */
                (n) => (n.style.display !== 'none' && n !== backdropEl)));
                if (modals && modals.length > 0) {
                    /** @type {?} */
                    const zIndexArr = modals.map((/**
                     * @param {?} n
                     * @return {?}
                     */
                    n => {
                        return parseInt(window.getComputedStyle(n).getPropertyValue('z-index'), 10);
                    })).filter((/**
                     * @param {?} n
                     * @return {?}
                     */
                    n => n));
                    /** @type {?} */
                    const maxZIndex = Math.max(...zIndexArr);
                    backdropEl.style.zIndex = maxZIndex + 1;
                }
            }));
        }
    }
    /**
     * @private
     * @param {?} canClose
     * @return {?}
     */
    closeDialog(canClose) {
        if (canClose) {
            this.modal.hide();
            this.closed.emit();
        }
    }
    /**
     * @return {?}
     */
    show() {
        /** @type {?} */
        const result = this.beforeOpen();
        if (typeof result === 'boolean') {
            this.openDialog(result);
        }
        else {
            if (result instanceof Observable) {
                result.subscribe((/**
                 * @param {?} flag
                 * @return {?}
                 */
                (flag) => {
                    this.openDialog(flag);
                }));
            }
            else {
                if (result instanceof Promise) {
                    result.then((/**
                     * @param {?} flag
                     * @return {?}
                     */
                    (flag) => {
                        this.openDialog(flag);
                    }));
                }
            }
        }
    }
    /**
     * @param {?=} $event
     * @return {?}
     */
    close($event) {
        if ($event) {
            $event.stopPropagation();
        }
        /** @type {?} */
        const result = this.beforeClose();
        if (typeof result === 'boolean') {
            this.closeDialog(result);
        }
        else {
            if (result instanceof Observable) {
                result.subscribe((/**
                 * @param {?} flag
                 * @return {?}
                 */
                (flag) => {
                    this.closeDialog(flag);
                }));
            }
            else {
                if (result instanceof Promise) {
                    result.then((/**
                     * @param {?} flag
                     * @return {?}
                     */
                    (flag) => {
                        this.closeDialog(flag);
                    }));
                }
            }
        }
    }
    /**
     * @param {?} size
     * @return {?}
     */
    reSize(size) {
        if (size.width) {
            this.width = size.width;
        }
        if (size.height) {
            this.height = size.height;
        }
        this.resetPosition();
        this.draggbar.resetPosition();
        this.widthChange.emit(this.width);
        this.heightChange.emit(this.height);
        this.resized.emit({ size: { width: this.width, height: this.height } });
    }
    /**
     * @param {?} opts
     * @return {?}
     */
    onResizing(opts) {
        opts.size.width = opts.size.width < 100 ? 100 : opts.size.width;
        opts.size.height = opts.size.height < 100 ? 100 : opts.size.height;
        this.width = opts.size.width;
        this.height = opts.size.height;
        this.resizing.emit(opts);
    }
    /**
     * @param {?} opts
     * @return {?}
     */
    resizeStop(opts) {
        opts.size.width = opts.size.width < 100 ? 100 : opts.size.width;
        opts.size.height = opts.size.height < 100 ? 100 : opts.size.height;
        this.width = opts.size.width;
        this.height = opts.size.height;
        this.updateModalBodyHeight();
        this.widthChange.emit(this.width);
        this.heightChange.emit(this.height);
        this.resized.emit(opts);
    }
    /**
     * @param {?} el
     * @return {?}
     */
    dropdown(el) {
        // const rect = el.getBoundingClientRect();
        // this.render2.removeStyle(el, 'margin-top');
        // this.render2.removeStyle(el, 'margin-left');
        // this.render2.setStyle(el, 'top', `${rect.top}px`);
        // this.render2.setStyle(el, 'left', `${rect.left}px`);
        // this.render2.removeStyle(el, 'transform');
        // this.render2.removeStyle(el, '-webkit-transform');
        // this.render2.removeStyle(el, '-ms-transform');
        // this.render2.removeStyle(el, '-moz-transform');
        // this.render2.removeStyle(el, '-o-transform');
    }
    /**
     * @param {?=} rememberPrevSize
     * @return {?}
     */
    maxDialog(rememberPrevSize = true) {
        if (!this.el) {
            return;
        }
        if (rememberPrevSize) {
            this.prevWidth = this.width;
            this.prevHeight = this.height;
        }
        const { width: winWidth, height: winHeight, padding } = this.getScreenSize();
        this.width = winWidth;
        this.height = winHeight;
        this.draggable = false;
        this.resizable = false;
        this.isMax = true;
        this.toCenter(0, 0);
        /** @type {?} */
        const dialogEl = this.el.nativeElement.querySelector('.modal-dialog');
        this.render2.setStyle(dialogEl, 'top', padding);
        this.render2.setStyle(dialogEl, 'left', padding);
        this.resized.emit({ size: { width: this.width, height: this.height } });
        this.maxed.emit({ size: { width: this.width, height: this.height } });
    }
    /**
     * @return {?}
     */
    revertDialog() {
        this.isMax = false;
        const { width: ww, height: wh } = this.getScreenSize();
        this.width = this.prevWidth == ww ? this.originalWidth : this.prevWidth;
        this.height = this.prevHeight == wh ? this.originalHeight : this.prevHeight;
        if (this.width > ww) {
            this.width = ww;
        }
        if (this.height > wh) {
            this.height = wh;
        }
        this.draggable = true;
        this.resizable = true;
        this.resetPosition();
        this.draggbar.resetPosition();
        this.resized.emit({ size: { width: this.width, height: this.height } });
        this.maxed.emit({ size: { width: this.width, height: this.height } });
    }
    /**
     * @return {?}
     */
    changeDialogSize() {
        if (this.isMax) {
            this.revertDialog();
        }
        else {
            this.maxDialog();
        }
        this._windowResizeToMax = false;
    }
}
DialogComponent.decorators = [
    { type: Component, args: [{
                selector: 'farris-dialog',
                template: "<div #backdropEl class=\"modal farris-modal fade\" bsModal #staticModal=\"bs-modal\" [config]=\"{backdrop: 'static'}\"\r\n    tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"dialog-static-name\">\r\n    <div [ngDraggable]=\"draggable\" [ngResizable]=\"resizable\" rzHandles=\"all\" [handle]=\"dragHandle\"\r\n        (rzStop)=\"resizeStop($event)\" (rzResizing)=\"onResizing($event)\" (stopped)=\"dropdown($event)\"\r\n        [rzMinWidth]=\"minWidth\" [rzMaxWidth]=\"maxWidth\" [rzMinHeight]=\"minHeight\" [rzMaxHeight]=\"maxHeight\"\r\n        [inBounds]=\"true\" [bounds]=\"backdropEl\" [rzContainment]=\"backdropEl\" class=\"modal-dialog m-0\" [style.width.px]=\"width\"\r\n        [style.height]=\"height + 'px'\" #dialogEl style=\"margin-left: 0!important; margin-top: 0!important\">\r\n        <div #modalContent class=\"modal-content\" style=\"overflow: hidden;\">\r\n            <div #header class=\"modal-header\" *ngIf=\"showHeader\">\r\n                <div class=\"modal-title\">\r\n                    <span *ngIf=\"iconCls\" [class]=\"iconCls\"></span>\r\n                    <span class=\"modal-title-label\">{{ title }}</span>\r\n                </div>\r\n                <div class=\"actions\">\r\n\r\n                    <ul>\r\n                        <li *ngIf=\"toolTemplate\">\r\n                            <ng-template [ngTemplateOutlet]=\"toolTemplate\">\r\n\r\n                            </ng-template>\r\n                        </li>\r\n                        <li *ngIf=\"showMinButton\" class=\"f-btn-icon f-bare\"><span class=\"f-icon modal_minimize\"></span>\r\n                        </li>\r\n                        <li *ngIf=\"showMaxButton\" (click)=\"changeDialogSize()\" class=\"f-btn-icon f-bare\"><span\r\n                                class=\"f-icon modal_maximize\" [class.modalrevert]=\"isMax\"></span></li>\r\n                        <li *ngIf=\"showCloseButton\" (click)=\"close($event)\" class=\"f-btn-icon f-bare\"><span\r\n                                class=\"f-icon modal_close\"></span></li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n            <div class=\"modal-body\" [style.height.px]=\"size?.contentHeight\" style=\" cursor:default;\">\r\n                <perfect-scrollbar [disabled]=\"!enableScroll\" [config]=\"scrollConfig\">\r\n                    <ng-content></ng-content>\r\n                </perfect-scrollbar>\r\n            </div>\r\n            <div class=\"modal-footer\" *ngIf=\"showButtons\" [style.textAlign]=\"buttonAlign\" style=\" cursor:default;\">\r\n                <ng-container [ngTemplateOutlet]=\"buttons\"></ng-container>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>",
                styles: [""]
            }] }
];
/** @nocollapse */
DialogComponent.ctorParameters = () => [
    { type: Renderer2 },
    { type: ElementRef }
];
DialogComponent.propDecorators = {
    title: [{ type: Input }],
    iconCls: [{ type: Input }],
    width: [{ type: Input }],
    height: [{ type: Input }],
    minWidth: [{ type: Input }],
    minHeight: [{ type: Input }],
    maxWidth: [{ type: Input }],
    maxHeight: [{ type: Input }],
    showButtons: [{ type: Input }],
    showCloseButton: [{ type: Input }],
    showMaxButton: [{ type: Input }],
    showMinButton: [{ type: Input }],
    resizable: [{ type: Input }],
    draggable: [{ type: Input }],
    buttonAlign: [{ type: Input }],
    scrollConfig: [{ type: Input }],
    beforeOpen: [{ type: Input }],
    beforeClose: [{ type: Input }],
    modal: [{ type: ViewChild, args: [ModalDirective,] }],
    draggbar: [{ type: ViewChild, args: [AngularDraggableDirective,] }],
    opened: [{ type: Output }],
    closed: [{ type: Output }],
    resized: [{ type: Output }],
    resizing: [{ type: Output }],
    maxed: [{ type: Output }],
    widthChange: [{ type: Output }],
    heightChange: [{ type: Output }],
    enableScroll: [{ type: Input }],
    buttons: [{ type: Input }],
    dialogHeaderHeight: [{ type: Input }],
    dialogFooterHeight: [{ type: Input }],
    parentElement: [{ type: Input }],
    showHeader: [{ type: Input }],
    dragHandle: [{ type: Input }],
    toolTemplate: [{ type: ContentChild, args: ['toolTemplate',] }],
    modalContent: [{ type: ViewChild, args: ['modalContent',] }],
    modalHeader: [{ type: ViewChild, args: ['header',] }],
    dialogEl: [{ type: ViewChild, args: ['dialogEl',] }],
    maxPadding: [{ type: Input }]
};
if (false) {
    /**
     * 窗口标题
     * @type {?}
     */
    DialogComponent.prototype.title;
    /**
     * 标题图标
     * @type {?}
     */
    DialogComponent.prototype.iconCls;
    /**
     * 宽度
     * @type {?}
     */
    DialogComponent.prototype.width;
    /**
     * 高度
     * @type {?}
     */
    DialogComponent.prototype.height;
    /** @type {?} */
    DialogComponent.prototype.minWidth;
    /** @type {?} */
    DialogComponent.prototype.minHeight;
    /** @type {?} */
    DialogComponent.prototype.maxWidth;
    /** @type {?} */
    DialogComponent.prototype.maxHeight;
    /**
     * 显示底部按钮区域，默认显示
     * @type {?}
     */
    DialogComponent.prototype.showButtons;
    /**
     * 显示右上角关闭按钮，默认显示
     * @type {?}
     */
    DialogComponent.prototype.showCloseButton;
    /**
     * 显示最大化按钮，默认显示
     * @type {?}
     */
    DialogComponent.prototype.showMaxButton;
    /**
     * 显示最小化按钮，默认不显示, 显示出来也没有用
     * @type {?}
     */
    DialogComponent.prototype.showMinButton;
    /**
     * 启用拖拽改变尺寸大小
     * @type {?}
     */
    DialogComponent.prototype.resizable;
    /**
     * 启用拖动窗口
     * @type {?}
     */
    DialogComponent.prototype.draggable;
    /**
     * 按钮对齐方式
     * @type {?}
     */
    DialogComponent.prototype.buttonAlign;
    /** @type {?} */
    DialogComponent.prototype.scrollConfig;
    /** @type {?} */
    DialogComponent.prototype.beforeOpen;
    /** @type {?} */
    DialogComponent.prototype.beforeClose;
    /** @type {?} */
    DialogComponent.prototype.modal;
    /** @type {?} */
    DialogComponent.prototype.draggbar;
    /** @type {?} */
    DialogComponent.prototype.opened;
    /** @type {?} */
    DialogComponent.prototype.closed;
    /** @type {?} */
    DialogComponent.prototype.resized;
    /** @type {?} */
    DialogComponent.prototype.resizing;
    /** @type {?} */
    DialogComponent.prototype.maxed;
    /** @type {?} */
    DialogComponent.prototype.widthChange;
    /** @type {?} */
    DialogComponent.prototype.heightChange;
    /** @type {?} */
    DialogComponent.prototype.enableScroll;
    /** @type {?} */
    DialogComponent.prototype.buttons;
    /**
     * 标题栏高度
     * @type {?}
     */
    DialogComponent.prototype.dialogHeaderHeight;
    /**
     * 按钮区高度
     * @type {?}
     */
    DialogComponent.prototype.dialogFooterHeight;
    /** @type {?} */
    DialogComponent.prototype.parentElement;
    /**
     * 显示头部
     * @type {?}
     */
    DialogComponent.prototype.showHeader;
    /**
     * Html Element
     * @type {?}
     */
    DialogComponent.prototype.dragHandle;
    /** @type {?} */
    DialogComponent.prototype.toolTemplate;
    /** @type {?} */
    DialogComponent.prototype.isMax;
    /** @type {?} */
    DialogComponent.prototype.dlgHeaderLineHeight;
    /** @type {?} */
    DialogComponent.prototype.dlgFooterLineHeight;
    /**
     * @type {?}
     * @private
     */
    DialogComponent.prototype.originalWidth;
    /**
     * @type {?}
     * @private
     */
    DialogComponent.prototype.originalHeight;
    /**
     * @type {?}
     * @private
     */
    DialogComponent.prototype.prevWidth;
    /**
     * @type {?}
     * @private
     */
    DialogComponent.prototype.prevHeight;
    /**
     * @type {?}
     * @private
     */
    DialogComponent.prototype.hostId;
    /** @type {?} */
    DialogComponent.prototype.modalContent;
    /** @type {?} */
    DialogComponent.prototype.modalHeader;
    /** @type {?} */
    DialogComponent.prototype.dialogEl;
    /**
     * 窗口最大化时，是否与浏览器之间有间距，当为true时与浏览器边距为 0
     * @type {?}
     */
    DialogComponent.prototype.maxPadding;
    /**
     * @type {?}
     * @private
     */
    DialogComponent.prototype.windowResize$;
    /** @type {?} */
    DialogComponent.prototype.postitionStyles;
    /**
     * @type {?}
     * @private
     */
    DialogComponent.prototype._windowResizeToMax;
    /**
     * @type {?}
     * @private
     */
    DialogComponent.prototype._mutationObserver;
    /**
     * @type {?}
     * @private
     */
    DialogComponent.prototype._dialogEl;
    /**
     * @type {?}
     * @private
     */
    DialogComponent.prototype.render2;
    /** @type {?} */
    DialogComponent.prototype.el;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGlhbG9nLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvdWktZGlhbG9nLyIsInNvdXJjZXMiOlsibGliL2RpYWxvZy9kaWFsb2cuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQVFBLE9BQU8sRUFDSCxTQUFTLEVBQVUsS0FBSyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQzlDLFVBQVUsRUFBRSxNQUFNLEVBQUUsWUFBWSxFQUFFLFdBQVcsRUFFaEQsTUFBTSxlQUFlLENBQUM7QUFFdkIsT0FBTyxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQWdCLE1BQU0sTUFBTSxDQUFDO0FBRTNELE9BQU8sRUFBRSx5QkFBeUIsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBQ2pFLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUNsRCxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzdDLE9BQU8sRUFBRSxZQUFZLEVBQUMsTUFBTSxnQkFBZ0IsQ0FBQztBQU83QyxNQUFNLE9BQU8sZUFBZTs7Ozs7SUFxSHhCLFlBQW9CLE9BQWtCLEVBQVMsRUFBYztRQUF6QyxZQUFPLEdBQVAsT0FBTyxDQUFXO1FBQVMsT0FBRSxHQUFGLEVBQUUsQ0FBWTs7OztRQWxIcEQsVUFBSyxHQUFHLE1BQU0sQ0FBQzs7OztRQUdmLFlBQU8sR0FBVyxTQUFTLENBQUM7Ozs7UUFHNUIsVUFBSyxHQUFHLEdBQUcsQ0FBQzs7OztRQUVaLFdBQU0sR0FBRyxHQUFHLENBQUM7UUFFYixhQUFRLEdBQUcsR0FBRyxDQUFDO1FBRWYsY0FBUyxHQUFHLEdBQUcsQ0FBQztRQUVoQixhQUFRLEdBQVcsSUFBSSxDQUFDO1FBQ3hCLGNBQVMsR0FBVyxJQUFJLENBQUM7Ozs7UUFHekIsZ0JBQVcsR0FBRyxJQUFJLENBQUM7Ozs7UUFFbkIsb0JBQWUsR0FBRyxJQUFJLENBQUM7Ozs7UUFFdkIsa0JBQWEsR0FBRyxJ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LHdDQUErQjs7Ozs7SUFHL0Isb0NBQTBCOzs7OztJQUUxQixvQ0FBMEI7Ozs7O0lBRzFCLHNDQUFnQzs7SUFDaEMsdUNBQTJCOztJQUUzQixxQ0FBb0U7O0lBQ3BFLHNDQUFxRTs7SUFFckUsZ0NBQWlEOztJQUNqRCxtQ0FBMEU7O0lBRzFFLGlDQUFzQzs7SUFDdEMsaUNBQXNDOztJQUN0QyxrQ0FBdUM7O0lBQ3ZDLG1DQUF3Qzs7SUFDeEMsZ0NBQXFDOztJQUNyQyxzQ0FBMkM7O0lBQzNDLHVDQUE0Qzs7SUFFNUMsdUNBQTZCOztJQUU3QixrQ0FBbUM7Ozs7O0lBR25DLDZDQUFnQzs7Ozs7SUFHaEMsNkNBQWdDOztJQUdoQyx3Q0FBOEI7Ozs7O0lBRTlCLHFDQUEyQjs7Ozs7SUFFM0IscUNBQW9COztJQUdwQix1Q0FBNkQ7O0lBQzdELGdDQUFjOztJQUNkLDhDQUF5Qjs7SUFDekIsOENBQXlCOzs7OztJQUV6Qix3Q0FBOEI7Ozs7O0lBQzlCLHlDQUErQjs7Ozs7SUFFL0Isb0NBQTBCOzs7OztJQUMxQixxQ0FBMkI7Ozs7O0lBRTNCLGlDQUFvQjs7SUFDcEIsdUNBQW9EOztJQUNwRCxzQ0FBNkM7O0lBQzdDLG1DQUE0Qzs7Ozs7SUFFNUMscUNBQTJCOzs7OztJQUUzQix3Q0FBMkM7O0lBRTNDLDBDQUEwQjs7Ozs7SUFvQjFCLDZDQUFtQzs7Ozs7SUFHbkMsNENBQWlDOzs7OztJQUNqQyxvQ0FBeUI7Ozs7O0lBRWIsa0NBQTBCOztJQUFFLDZCQUFxQiIsInNvdXJjZXNDb250ZW50IjpbIi8qXHJcbiAqIEBBdXRob3I6IOeWr+eLguengOaJjShMdWNhcyBIdWFuZylcclxuICogQERhdGU6IDIwMTktMDgtMDYgMDg6MzE6NTdcclxuICogQExhc3RFZGl0b3JzOiDnlq/ni4Lnp4DmiY0oTHVjYXMgSHVhbmcpXHJcbiAqIEBMYXN0RWRpdFRpbWU6IDIwMTktMDgtMTUgMTY6MDY6NThcclxuICogQFFROiAxMDU1ODE4MjM5XHJcbiAqIEBWZXJzaW9uOiB2MC4wLjFcclxuICovXHJcbmltcG9ydCB7XHJcbiAgICBDb21wb25lbnQsIE9uSW5pdCwgSW5wdXQsIFZpZXdDaGlsZCwgUmVuZGVyZXIyLFxyXG4gICAgRWxlbWVudFJlZiwgT3V0cHV0LCBFdmVudEVtaXR0ZXIsIFRlbXBsYXRlUmVmLFxyXG4gICAgQWZ0ZXJWaWV3SW5pdCwgU2ltcGxlQ2hhbmdlcywgT25DaGFuZ2VzLCBPbkRlc3Ryb3ksIFJlbmRlcmVyU3R5bGVGbGFnczJcclxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuXHJcbmltcG9ydCB7IGZyb21FdmVudCwgT2JzZXJ2YWJsZSwgU3Vic2NyaXB0aW9uIH0gZnJvbSAncnhqcyc7XHJcblxyXG5pbXBvcnQgeyBBbmd1bGFyRHJhZ2dhYmxlRGlyZWN0aXZlIH0gZnJvbSAnQGZhcnJpcy91aS1kcmFnZ2FibGUnO1xyXG5pbXBvcnQgeyBNb2RhbERpcmVjdGl2ZSB9IGZyb20gJ0BmYXJyaXMvdWktbW9kYWwnO1xyXG5pbXBvcnQgeyBDb250ZW50Q2hpbGQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgZGVib3VuY2VUaW1lfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiAnZmFycmlzLWRpYWxvZycsXHJcbiAgICB0ZW1wbGF0ZVVybDogJy4vZGlhbG9nLmNvbXBvbmVudC5odG1sJyxcclxuICAgIHN0eWxlVXJsczogWycuL2RpYWxvZy5jb21wb25lbnQuY3NzJ11cclxufSlcclxuZXhwb3J0IGNsYXNzIERpYWxvZ0NvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgQWZ0ZXJWaWV3SW5pdCwgT25DaGFuZ2VzLCBPbkRlc3Ryb3kge1xyXG5cclxuICAgIC8qKiDnqpflj6PmoIfpopggKi9cclxuICAgIEBJbnB1dCgpIHRpdGxlID0gJ+aIkeaYr+agh+mimCc7XHJcblxyXG4gICAgLyoqIOagh+mimOWbvuaghyAqL1xyXG4gICAgQElucHV0KCkgaWNvbkNsczogc3RyaW5nID0gdW5kZWZpbmVkO1xyXG5cclxuICAgIC8qKiDlrr3luqYgKi9cclxuICAgIEBJbnB1dCgpIHdpZHRoID0gMzAwO1xyXG4gICAgLyoqIOmrmOW6piAqL1xyXG4gICAgQElucHV0KCkgaGVpZ2h0ID0gMjAwO1xyXG5cclxuICAgIEBJbnB1dCgpIG1pbldpZHRoID0gMTAwO1xyXG5cclxuICAgIEBJbnB1dCgpIG1pbkhlaWdodCA9IDEwMDtcclxuXHJcbiAgICBASW5wdXQoKSBtYXhXaWR0aDogbnVtYmVyID0gbnVsbDtcclxuICAgIEBJbnB1dCgpIG1heEhlaWdodDogbnVtYmVyID0gbnVsbDtcclxuXHJcbiAgICAvKiog5pi+56S65bqV6YOo5oyJ6ZKu5Yy65Z+f77yM6buY6K6k5pi+56S6ICovXHJcbiAgICBASW5wdXQoKSBzaG93QnV0dG9ucyA9IHRydWU7XHJcbiAgICAvKiog5pi+56S65Y+z5LiK6KeS5YWz6Zet5oyJ6ZKu77yM6buY6K6k5pi+56S6ICovXHJcbiAgICBASW5wdXQoKSBzaG93Q2xvc2VCdXR0b24gPSB0cnVlO1xyXG4gICAgLyoqIOaYvuekuuacgOWkp+WMluaMiemSru+8jOm7mOiupOaYvuekuiAqL1xyXG4gICAgQElucHV0KCkgc2hvd01heEJ1dHRvbiA9IHRydWU7XHJcbiAgICAvKiog5pi+56S65pyA5bCP5YyW5oyJ6ZKu77yM6buY6K6k5LiN5pi+56S6LCDmmL7npLrlh7rmnaXkuZ/msqHmnInnlKggKi9cclxuICAgIEBJbnB1dCgpIHNob3dNaW5CdXR0b24gPSBmYWxzZTtcclxuXHJcbiAgICAvKiog5ZCv55So5ouW5ou95pS55Y+Y5bC65a+45aSn5bCPICovXHJcbiAgICBASW5wdXQoKSByZXNpemFibGUgPSB0cnVlO1xyXG4gICAgLyoqIOWQr+eUqOaLluWKqOeql+WPoyAqL1xyXG4gICAgQElucHV0KCkgZHJhZ2dhYmxlID0gdHJ1ZTtcclxuXHJcbiAgICAvKiog5oyJ6ZKu5a+56b2Q5pa55byPICovXHJcbiAgICBASW5wdXQoKSBidXR0b25BbGlnbiA9ICdjZW50ZXInO1xyXG4gICAgQElucHV0KCkgc2Nyb2xsQ29uZmlnID0ge307XHJcblxyXG4gICAgQElucHV0KCkgYmVmb3JlT3BlbjogKCkgPT4gT2JzZXJ2YWJsZTxhbnk+IHwgUHJvbWlzZTxhbnk+IHwgYm9vbGVhbjtcclxuICAgIEBJbnB1dCgpIGJlZm9yZUNsb3NlOiAoKSA9PiBPYnNlcnZhYmxlPGFueT4gfCBQcm9taXNlPGFueT4gfCBib29sZWFuO1xyXG5cclxuICAgIEBWaWV3Q2hpbGQoTW9kYWxEaXJlY3RpdmUpIG1vZGFsOiBNb2RhbERpcmVjdGl2ZTtcclxuICAgIEBWaWV3Q2hpbGQoQW5ndWxhckRyYWdnYWJsZURpcmVjdGl2ZSkgZHJhZ2diYXI6IEFuZ3VsYXJEcmFnZ2FibGVEaXJlY3RpdmU7XHJcbiAgICBcclxuXHJcbiAgICBAT3V0cHV0KCkgb3BlbmVkID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgQE91dHB1dCgpIGNsb3NlZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIEBPdXRwdXQoKSByZXNpemVkID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgQE91dHB1dCgpIHJlc2l6aW5nID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgQE91dHB1dCgpIG1heGVkID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgQE91dHB1dCgpIHdpZHRoQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgQE91dHB1dCgpIGhlaWdodENoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgICBASW5wdXQoKSBlbmFibGVTY3JvbGwgPSB0cnVlO1xyXG5cclxuICAgIEBJbnB1dCgpIGJ1dHRvbnM6IFRlbXBsYXRlUmVmPGFueT47XHJcblxyXG4gICAgLyoqIOagh+mimOagj+mrmOW6piAqL1xyXG4gICAgQElucHV0KCkgZGlhbG9nSGVhZGVySGVpZ2h0ID0gMDtcclxuXHJcbiAgICAvKiog5oyJ6ZKu5Yy66auY5bqmICovXHJcbiAgICBASW5wdXQoKSBkaWFsb2dGb290ZXJIZWlnaHQgPSAwO1xyXG5cclxuXHJcbiAgICBASW5wdXQoKSBwYXJlbnRFbGVtZW50ID0gbnVsbDtcclxuICAgIC8qKiDmmL7npLrlpLTpg6ggKi9cclxuICAgIEBJbnB1dCgpIHNob3dIZWFkZXIgPSB0cnVlO1xyXG4gICAgLyoqIEh0bWwgRWxlbWVudCAqL1xyXG4gICAgQElucHV0KCkgZHJhZ0hhbmRsZTtcclxuXHJcbiAgICAvKiB0ZW1wbGF0ZSAqL1xyXG4gICAgQENvbnRlbnRDaGlsZCgndG9vbFRlbXBsYXRlJykgdG9vbFRlbXBsYXRlOiBUZW1wbGF0ZVJlZjxhbnk+O1xyXG4gICAgaXNNYXggPSBmYWxzZTsgLy8g5piv5ZCm5pyA5aSn56qX5Y+jXHJcbiAgICBkbGdIZWFkZXJMaW5lSGVpZ2h0OiBhbnk7XHJcbiAgICBkbGdGb290ZXJMaW5lSGVpZ2h0OiBhbnk7XHJcblxyXG4gICAgcHJpdmF0ZSBvcmlnaW5hbFdpZHRoOiBudW1iZXI7ICAvLyDorrDlvZXljp/lp4vnmoTlrr3luqZcclxuICAgIHByaXZhdGUgb3JpZ2luYWxIZWlnaHQ6IG51bWJlcjsgLy8g6K6w5b2V5Y6f5aeL55qE6auY5bqmXHJcblxyXG4gICAgcHJpdmF0ZSBwcmV2V2lkdGg6IG51bWJlcjsgLy8g6K6w5b2V5LiK5qyh55qE5a695bqmXHJcbiAgICBwcml2YXRlIHByZXZIZWlnaHQ6IG51bWJlcjsgLy8g6K6w5b2V5LiK5qyh55qE6auY5bqmXHJcblxyXG4gICAgcHJpdmF0ZSBob3N0SWQgPSAnJztcclxuICAgIEBWaWV3Q2hpbGQoJ21vZGFsQ29udGVudCcpIG1vZGFsQ29udGVudDogRWxlbWVudFJlZjtcclxuICAgIEBWaWV3Q2hpbGQoJ2hlYWRlcicpIG1vZGFsSGVhZGVyOiBFbGVtZW50UmVmO1xyXG4gICAgQFZpZXdDaGlsZCgnZGlhbG9nRWwnKSBkaWFsb2dFbDogRWxlbWVudFJlZjtcclxuICAgIC8qKiDnqpflj6PmnIDlpKfljJbml7bvvIzmmK/lkKbkuI7mtY/op4jlmajkuYvpl7TmnInpl7Tot53vvIzlvZPkuLp0cnVl5pe25LiO5rWP6KeI5Zmo6L656Led5Li6IDAgKi9cclxuICAgIEBJbnB1dCgpIG1heFBhZGRpbmcgPSB0cnVlO1xyXG5cclxuICAgIHByaXZhdGUgd2luZG93UmVzaXplJDogU3Vic2NyaXB0aW9uID0gbnVsbDtcclxuXHJcbiAgICBwb3N0aXRpb25TdHlsZXM6IGFueSA9IHt9O1xyXG5cclxuICAgIGdldCBzaXplKCkge1xyXG4gICAgICAgIGNvbnN0IGhlYWRlckhlaWdodCA9IHRoaXMuZ2V0RGlhbG9nSGVhZGVyTGluZUhlaWdodCgpO1xyXG4gICAgICAgIGNvbnN0IGZvb3RlckhlaWdodCA9IHRoaXMuZ2V0RGlhbG9nRm9vdGVySGVpZ2h0KCk7XHJcblxyXG4gICAgICAgIGxldCBjb250ZW50SGVpZ2h0ID0gdGhpcy5oZWlnaHQgLSBoZWFkZXJIZWlnaHQ7XHJcbiAgICAgICAgaWYgKHRoaXMuc2hvd0J1dHRvbnMpIHtcclxuICAgICAgICAgICAgY29udGVudEhlaWdodCA9IGNvbnRlbnRIZWlnaHQgLSBmb290ZXJIZWlnaHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHdpZHRoOiB0aGlzLndpZHRoLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IHRoaXMuaGVpZ2h0LFxyXG4gICAgICAgICAgICBjb250ZW50SGVpZ2h0LFxyXG4gICAgICAgICAgICBjb250ZW50V2lkdGg6IHRoaXMud2lkdGgsXHJcbiAgICAgICAgICAgIGhlYWRlcjogaGVhZGVySGVpZ2h0LFxyXG4gICAgICAgICAgICBmb290ZXI6IGZvb3RlckhlaWdodFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfd2luZG93UmVzaXplVG9NYXggPSBmYWxzZTtcclxuXHJcblxyXG4gICAgcHJpdmF0ZSBfbXV0YXRpb25PYnNlcnZlciA9IG51bGw7XHJcbiAgICBwcml2YXRlIF9kaWFsb2dFbCA9IG51bGw7XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSByZW5kZXIyOiBSZW5kZXJlcjIsIHB1YmxpYyBlbDogRWxlbWVudFJlZikgeyBcclxuXHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkluaXQoKSB7XHJcbiAgICAgICAgdGhpcy5ob3N0SWQgPSBgZmFycmlzLWRpYWxvZ18ke25ldyBEYXRlKCkuZ2V0VGltZSgpfWA7XHJcbiAgICAgICAgdGhpcy5yZW5kZXIyLnNldFByb3BlcnR5KHRoaXMuZWwubmF0aXZlRWxlbWVudCwgJ2lkJywgdGhpcy5ob3N0SWQpO1xyXG4gICAgICAgIGlmICghdGhpcy5iZWZvcmVPcGVuKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYmVmb3JlT3BlbiA9ICgpID0+IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMuYmVmb3JlQ2xvc2UpIHtcclxuICAgICAgICAgICAgdGhpcy5iZWZvcmVDbG9zZSA9ICgpID0+IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLm1vZGFsLm9uU2hvd24uc3Vic2NyaWJlKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5vcGVuZWQuZW1pdCgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyB0aGlzLm1vZGFsLm9uSGlkZGVuLnN1YnNjcmliZSgoKSA9PiB0aGlzLmNsb3NlZC5lbWl0KCkpO1xyXG5cclxuICAgICAgICB0aGlzLmNoZWNrRGlhbG9nU2l6ZSgpO1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnRFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5lbC5uYXRpdmVFbGVtZW50KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5lbC5uYXRpdmVFbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuc2hvd0hlYWRlciAmJiB0aGlzLm1vZGFsSGVhZGVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRyYWdIYW5kbGUgPSB0aGlzLm1vZGFsSGVhZGVyLm5hdGl2ZUVsZW1lbnQ7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSwgMTAwKTtcclxuICAgIH1cclxuXHJcbiAgICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkRlc3Ryb3koKSB7XHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICB0aGlzLmVsID0gbnVsbDtcclxuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50RWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnRFbGVtZW50ID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuX211dGF0aW9uT2JzZXJ2ZXIpIHtcclxuICAgICAgICAgICAgICAgIC8vIOWBnOatouinguWvn+WxnuaAp+WPmOWMllxyXG4gICAgICAgICAgICAgICAgdGhpcy5fbXV0YXRpb25PYnNlcnZlci5kaXNjb25uZWN0KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tdXRhdGlvbk9ic2VydmVyID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIDE1MCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRTY3JlZW5TaXplKCkge1xyXG4gICAgICAgIGNvbnN0IG1hcmdpbiA9ICAodGhpcy5tYXhQYWRkaW5nID8gMjA6IDApO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHdpZHRoOiB3aW5kb3cuaW5uZXJXaWR0aCAtIG1hcmdpbixcclxuICAgICAgICAgICAgaGVpZ2h0OiB3aW5kb3cuaW5uZXJIZWlnaHQgLSBtYXJnaW4sXHJcbiAgICAgICAgICAgIHBhZGRpbmc6IG1hcmdpbj8gMTA6IDBcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbmdBZnRlclZpZXdJbml0KCkge1xyXG4gICAgICAgIGlmICghdGhpcy5kaWFsb2dFbCkge1xyXG4gICAgICAgICAgICB0aGlzLl9kaWFsb2dFbCA9IHRoaXMuZWwubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwtZGlhbG9nJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fZGlhbG9nRWwgPSB0aGlzLmRpYWxvZ0VsLm5hdGl2ZUVsZW1lbnQ7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcblxyXG4gICAgICAgIHRoaXMuZGxnSGVhZGVyTGluZUhlaWdodCA9IHRoaXMuZ2V0RGlhbG9nSGVhZGVyTGluZUhlaWdodCgpO1xyXG5cclxuICAgICAgIFxyXG5cclxuICAgICAgICBpZiAodGhpcy5kaWFsb2dIZWFkZXJIZWlnaHQgJiYgdGhpcy5tb2RhbEhlYWRlcikge1xyXG4gICAgICAgICAgICB0aGlzLm1vZGFsSGVhZGVyLm5hdGl2ZUVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gYCR7dGhpcy5kaWFsb2dIZWFkZXJIZWlnaHR9cHhgO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZGlhbG9nRm9vdGVySGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZvb3RlciA9IHRoaXMubW9kYWxDb250ZW50Lm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLWZvb3RlcicpO1xyXG4gICAgICAgICAgICBpZiAoZm9vdGVyKSB7XHJcbiAgICAgICAgICAgICAgICBmb290ZXIuc3R5bGUuaGVpZ2h0ID0gYCR7dGhpcy5kaWFsb2dGb290ZXJIZWlnaHR9cHhgO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLm9yaWdpbmFsSGVpZ2h0ID0gdGhpcy5oZWlnaHQ7XHJcbiAgICAgICAgdGhpcy5vcmlnaW5hbFdpZHRoID0gdGhpcy53aWR0aDtcclxuXHJcbiAgICAgICAgdGhpcy5yZXNldFBvc2l0aW9uKCk7XHJcblxyXG4gICAgICAgIHRoaXMud2luZG93UmVzaXplJCA9IGZyb21FdmVudCh3aW5kb3csICdyZXNpemUnKS5waXBlKFxyXG4gICAgICAgICAgICBkZWJvdW5jZVRpbWUoNTApXHJcbiAgICAgICAgKS5zdWJzY3JpYmUoKGU6IGFueSkgPT4ge1xyXG5cclxuICAgICAgICAgICAgY29uc3QgeyB3aWR0aDogd2luV2lkdGgsIGhlaWdodDogd2luSGVpZ2h0IH0gPSB0aGlzLmdldFNjcmVlblNpemUoKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLndpZHRoIDw9IHdpbldpZHRoICYmIHRoaXMuaGVpZ2h0IDw9IHdpbkhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX3dpbmRvd1Jlc2l6ZVRvTWF4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXZlcnREaWFsb2coKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl93aW5kb3dSZXNpemVUb01heCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmlzTWF4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWF4RGlhbG9nKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNNYXgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl93aW5kb3dSZXNpemVUb01heCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXhEaWFsb2coKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXhEaWFsb2coZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnRvQ2VudGVyKDAsIDApO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgIFxyXG4gICAgICAgIC8vIHRoaXMubGlzdGVuYXR0cmlidXRlc0NoYW5nZWQoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBwcml2YXRlIGxpc3RlbmF0dHJpYnV0ZXNDaGFuZ2VkKCkge1xyXG4gICAgLy8gICAgICAvLyDop4Llr5/lmajnmoTphY3nva7vvIjpnIDopoHop4Llr5/ku4DkuYjlj5jliqjvvIlcclxuICAgIC8vICAgICAgY29uc3QgY29uZmlnID0geyBhdHRyaWJ1dGVzOiB0cnVlLCBzdWJ0cmVlOiBmYWxzZSxjaGFyYWN0ZXJEYXRhOnRydWUsIGF0dHJpYnV0ZUZpbHRlcjogWydzdHlsZSddLCBhdHRyaWJ1dGVPbGRWYWx1ZTogdHJ1ZX0gO1xyXG5cclxuICAgIC8vICAgICAgLy8g5b2T6KeC5a+f5Yiw5Y+Y5Yqo5pe25omn6KGM55qE5Zue6LCD5Ye95pWwXHJcbiAgICAvLyAgICAgIGNvbnN0IGNhbGxiYWNrID0gKG11dGF0aW9uc0xpc3QsIG9ic2VydmVyKSA9PiB7XHJcbiAgICAvLyAgICAgICAgIC8vIFVzZSB0cmFkaXRpb25hbCAnZm9yIGxvb3BzJyBmb3IgSUUgMTFcclxuICAgIC8vICAgICAgICAgZm9yKGxldCBtdXRhdGlvbiBvZiBtdXRhdGlvbnNMaXN0KSB7XHJcbiAgICAvLyAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhtdXRhdGlvbik7XHJcblxyXG4gICAgLy8gICAgICAgICB9XHJcbiAgICAvLyAgICAgIH07XHJcbiBcclxuICAgIC8vICAgICAgLy8g5Yib5bu65LiA5Liq6KeC5a+f5Zmo5a6e5L6L5bm25Lyg5YWl5Zue6LCD5Ye95pWwXHJcbiAgICAvLyAgICAgIHRoaXMuX211dGF0aW9uT2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihjYWxsYmFjayk7XHJcbiBcclxuICAgIC8vICAgICAgLy8g5Lul5LiK6L+w6YWN572u5byA5aeL6KeC5a+f55uu5qCH6IqC54K5XHJcbiAgICAvLyAgICAgIHRoaXMuX211dGF0aW9uT2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLmRpYWxvZ0VsLm5hdGl2ZUVsZW1lbnQsIGNvbmZpZyk7XHJcbiAgICAvLyB9XHJcblxyXG4gICAgdG9DZW50ZXIoeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLnJlc2V0UG9zaXRpb24oKTtcclxuICAgICAgICB0aGlzLmRyYWdnYmFyLnBvc2l0aW9uID0geyB4LCB5IH07XHJcbiAgICAgICAgdGhpcy5kcmFnZ2Jhci5yZXNldFBvc2l0aW9uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZGVzdHJveSgpIHtcclxuICAgICAgICBpZiAoIXRoaXMucGFyZW50RWxlbWVudCkge1xyXG4gICAgICAgICAgICBpZiAoZG9jdW1lbnQuYm9keS5xdWVyeVNlbGVjdG9yKGAjJHt0aGlzLmhvc3RJZH1gKSkge1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKGAjJHt0aGlzLmhvc3RJZH1gKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKHRoaXMuZWwubmF0aXZlRWxlbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLndpbmRvd1Jlc2l6ZSQpIHtcclxuICAgICAgICAgICAgdGhpcy53aW5kb3dSZXNpemUkLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgIHRoaXMud2luZG93UmVzaXplJCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0RGlhbG9nSGVhZGVyTGluZUhlaWdodCgpIHtcclxuICAgICAgICBpZiAodGhpcy5tb2RhbEhlYWRlcikge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuZGxnSGVhZGVyTGluZUhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kbGdIZWFkZXJMaW5lSGVpZ2h0ID0gTWF0aC5jZWlsKHRoaXMubW9kYWxIZWFkZXIubmF0aXZlRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGxnSGVhZGVyTGluZUhlaWdodDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGxnSGVhZGVyTGluZUhlaWdodDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0RGlhbG9nRm9vdGVySGVpZ2h0KCkge1xyXG4gICAgICAgIGNvbnN0IGZvb3RlckVsID0gIHRoaXMubW9kYWxDb250ZW50Lm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLWZvb3RlcicpO1xyXG4gICAgICAgIGlmIChmb290ZXJFbCkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuZGxnRm9vdGVyTGluZUhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kbGdGb290ZXJMaW5lSGVpZ2h0ID0gTWF0aC5jZWlsKGZvb3RlckVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRsZ0Zvb3RlckxpbmVIZWlnaHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gIDA7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfY2hlY2tEaWFsb2dTaXplKHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKSB7XHJcblxyXG4gICAgICAgIC8vIOWPr+inhuWMuuWfn+WwuuWvuFxyXG4gICAgICAgIGNvbnN0IHdpblNpemUgPSB7XHJcbiAgICAgICAgICAgIHdpZHRoOiBkb2N1bWVudC5ib2R5Lm9mZnNldFdpZHRoLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IHdpbmRvdy5pbm5lckhlaWdodFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnBhcmVudEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgd2luU2l6ZS53aWR0aCA9IHRoaXMucGFyZW50RWxlbWVudC5vZmZzZXRXaWR0aDtcclxuICAgICAgICAgICAgd2luU2l6ZS5oZWlnaHQgPSB0aGlzLnBhcmVudEVsZW1lbnQub2Zmc2V0SGVpZ2h0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHdpblNpemUud2lkdGggJiYgd2luU2l6ZS53aWR0aCA8IHdpZHRoKSB7XHJcbiAgICAgICAgICAgIHdpZHRoID0gd2luU2l6ZS53aWR0aDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh3aW5TaXplLmhlaWdodCAmJiB3aW5TaXplLmhlaWdodCA8IGhlaWdodCkge1xyXG4gICAgICAgICAgICBoZWlnaHQgPSB3aW5TaXplLmhlaWdodDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHdpZHRoLFxyXG4gICAgICAgICAgICBoZWlnaHRcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY2hlY2tEaWFsb2dTaXplKCkge1xyXG4gICAgICAgIGNvbnN0IG5ld1NpemUgPSB0aGlzLl9jaGVja0RpYWxvZ1NpemUodGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xyXG4gICAgICAgIGlmICh0aGlzLndpZHRoICE9PSBuZXdTaXplLndpZHRoKSB7XHJcbiAgICAgICAgICAgIHRoaXMud2lkdGggPSBuZXdTaXplLndpZHRoIC0gMjA7XHJcbiAgICAgICAgICAgIHRoaXMud2lkdGhDaGFuZ2UuZW1pdCh0aGlzLndpZHRoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmhlaWdodCAhPT0gbmV3U2l6ZS5oZWlnaHQpIHtcclxuICAgICAgICAgICAgdGhpcy5oZWlnaHQgPSBuZXdTaXplLmhlaWdodCAtIDIwO1xyXG4gICAgICAgICAgICB0aGlzLmhlaWdodENoYW5nZS5lbWl0KHRoaXMuaGVpZ2h0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlTW9kYWxCb2R5SGVpZ2h0KCkge1xyXG4gICAgICAgIGNvbnN0IGNvbnRlbnRFbCA9IHRoaXMuZWwubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwtYm9keScpO1xyXG4gICAgICAgIGNvbnN0IGNvbnRlbnRIZWlnaHQgPSB0aGlzLnNpemUuY29udGVudEhlaWdodDtcclxuICAgICAgICB0aGlzLnJlbmRlcjIuc2V0U3R5bGUoY29udGVudEVsLCAnaGVpZ2h0JywgY29udGVudEhlaWdodCArICdweCcpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdXBkYXRlUG9zaXRpb24oKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IG1hcmdpbkxlZnQgPSBOdW1iZXIucGFyc2VJbnQoJycgKyAtdGhpcy53aWR0aCAvIDIpO1xyXG4gICAgICAgIGNvbnN0IG1hcmdpblRvcCA9IE51bWJlci5wYXJzZUludCgnJyArIC10aGlzLmhlaWdodCAvIDIpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMucG9zdGl0aW9uU3R5bGVzID0ge1xyXG4gICAgICAgICAgICBtYXJnaW5MZWZ0OiBtYXJnaW5MZWZ0KyAncHgnLFxyXG4gICAgICAgICAgICBtYXJnaW5Ub3A6IG1hcmdpblRvcCsgJ3B4JyxcclxuICAgICAgICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlM2QoMHB4LCAwcHgsIDBweCknLFxyXG4gICAgICAgICAgICB0b3A6IGAke3dpbmRvdy5pbm5lckhlaWdodCAvIDIgKyBtYXJnaW5Ub3B9cHhgLFxyXG4gICAgICAgICAgICBsZWZ0OiBgJHt3aW5kb3cuaW5uZXJXaWR0aCAvMiArIG1hcmdpbkxlZnR9cHhgLFxyXG4gICAgICAgICAgICB0b3AxOiB0aGlzLmlzTWF4PyAnMTBweCc6ICc1MCUnLFxyXG4gICAgICAgICAgICBsZWZ0MTogdGhpcy5pc01heD8gJzEwcHgnOiAnNTAlJ1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIHJlc2V0UG9zaXRpb24oKSB7XHJcbiAgICAgICAgdGhpcy51cGRhdGVQb3NpdGlvbigpO1xyXG4gICAgICAgIGlmICh0aGlzLl9kaWFsb2dFbCkge1xyXG4gICAgICAgIGNvbnN0IGRpYWxvZ0VsID0gdGhpcy5fZGlhbG9nRWw7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyMi5zZXRTdHlsZShkaWFsb2dFbCwgJ3RvcCcsIHRoaXMucG9zdGl0aW9uU3R5bGVzLnRvcCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyMi5zZXRTdHlsZShkaWFsb2dFbCwgJ2xlZnQnLCB0aGlzLnBvc3RpdGlvblN0eWxlcy5sZWZ0KTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXIyLnNldFN0eWxlKGRpYWxvZ0VsLCAndHJhbnNmb3JtJywgdGhpcy5wb3N0aXRpb25TdHlsZXMudHJhbnNmb3JtKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBvcGVuRGlhbG9nKGZsYWc6IGJvb2xlYW4pIHtcclxuICAgICAgICBpZiAoZmxhZykge1xyXG4gICAgICAgICAgICB0aGlzLnJlc2V0UG9zaXRpb24oKTtcclxuICAgICAgICAgICAgdGhpcy5kcmFnZ2Jhci5yZXNldFBvc2l0aW9uKCk7XHJcbiAgICAgICAgICAgIHRoaXMubW9kYWwuc2hvdygpO1xyXG5cclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBiYWNrZHJvcEVsID0gdGhpcy5lbC5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mYXJyaXMtbW9kYWwnKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1vZGFscyA9IEFycmF5LmZyb20oZG9jdW1lbnQuYm9keS5xdWVyeVNlbGVjdG9yQWxsKCcuZmFycmlzLW1vZGFsLnNob3cnKSkuZmlsdGVyKChuOiBhbnkpID0+IChuLnN0eWxlLmRpc3BsYXkgIT09ICdub25lJyAmJiBuICE9PSBiYWNrZHJvcEVsKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAobW9kYWxzICYmIG1vZGFscy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgekluZGV4QXJyID0gbW9kYWxzLm1hcChuID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKG4pLmdldFByb3BlcnR5VmFsdWUoJ3otaW5kZXgnKSwgMTApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pLmZpbHRlcihuID0+IG4pO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1heFpJbmRleCA9IE1hdGgubWF4KC4uLnpJbmRleEFycik7XHJcbiAgICAgICAgICAgICAgICAgICAgYmFja2Ryb3BFbC5zdHlsZS56SW5kZXggPSBtYXhaSW5kZXggKyAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjbG9zZURpYWxvZyhjYW5DbG9zZTogYm9vbGVhbikge1xyXG4gICAgICAgIGlmIChjYW5DbG9zZSkge1xyXG4gICAgICAgICAgICB0aGlzLm1vZGFsLmhpZGUoKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2VkLmVtaXQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2hvdygpIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLmJlZm9yZU9wZW4oKTtcclxuICAgICAgICBpZiAodHlwZW9mIHJlc3VsdCA9PT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgICAgICAgIHRoaXMub3BlbkRpYWxvZyhyZXN1bHQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBPYnNlcnZhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQuc3Vic2NyaWJlKChmbGFnOiBib29sZWFuKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVuRGlhbG9nKGZsYWcpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC50aGVuKChmbGFnOiBib29sZWFuKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3BlbkRpYWxvZyhmbGFnKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjbG9zZSgkZXZlbnQ/OiBNb3VzZUV2ZW50KSB7XHJcbiAgICAgICAgaWYgKCRldmVudCkge1xyXG4gICAgICAgICAgICAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuYmVmb3JlQ2xvc2UoKTtcclxuICAgICAgICBpZiAodHlwZW9mIHJlc3VsdCA9PT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2VEaWFsb2cocmVzdWx0KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgT2JzZXJ2YWJsZSkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0LnN1YnNjcmliZSgoZmxhZzogYm9vbGVhbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VEaWFsb2coZmxhZyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnRoZW4oKGZsYWc6IGJvb2xlYW4pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZURpYWxvZyhmbGFnKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZVNpemUoc2l6ZTogeyB3aWR0aD86IG51bWJlciwgaGVpZ2h0PzogbnVtYmVyIH0pIHtcclxuICAgICAgICBpZiAoc2l6ZS53aWR0aCkge1xyXG4gICAgICAgICAgICB0aGlzLndpZHRoID0gc2l6ZS53aWR0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHNpemUuaGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGVpZ2h0ID0gc2l6ZS5oZWlnaHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnJlc2V0UG9zaXRpb24oKTtcclxuICAgICAgICB0aGlzLmRyYWdnYmFyLnJlc2V0UG9zaXRpb24oKTtcclxuICAgICAgICB0aGlzLndpZHRoQ2hhbmdlLmVtaXQodGhpcy53aWR0aCk7XHJcbiAgICAgICAgdGhpcy5oZWlnaHRDaGFuZ2UuZW1pdCh0aGlzLmhlaWdodCk7XHJcbiAgICAgICAgdGhpcy5yZXNpemVkLmVtaXQoeyBzaXplOiB7IHdpZHRoOiB0aGlzLndpZHRoLCBoZWlnaHQ6IHRoaXMuaGVpZ2h0IH0gfSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25SZXNpemluZyhvcHRzOiBhbnkpIHtcclxuXHJcbiAgICAgICAgb3B0cy5zaXplLndpZHRoID0gb3B0cy5zaXplLndpZHRoIDwgMTAwID8gMTAwIDogb3B0cy5zaXplLndpZHRoO1xyXG4gICAgICAgIG9wdHMuc2l6ZS5oZWlnaHQgPSBvcHRzLnNpemUuaGVpZ2h0IDwgMTAwID8gMTAwIDogb3B0cy5zaXplLmhlaWdodDtcclxuXHJcbiAgICAgICAgdGhpcy53aWR0aCA9IG9wdHMuc2l6ZS53aWR0aDtcclxuICAgICAgICB0aGlzLmhlaWdodCA9IG9wdHMuc2l6ZS5oZWlnaHQ7XHJcbiAgICAgICAgdGhpcy5yZXNpemluZy5lbWl0KG9wdHMpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlc2l6ZVN0b3Aob3B0czogYW55KSB7XHJcbiAgICAgICAgb3B0cy5zaXplLndpZHRoID0gb3B0cy5zaXplLndpZHRoIDwgMTAwID8gMTAwIDogb3B0cy5zaXplLndpZHRoO1xyXG4gICAgICAgIG9wdHMuc2l6ZS5oZWlnaHQgPSBvcHRzLnNpemUuaGVpZ2h0IDwgMTAwID8gMTAwIDogb3B0cy5zaXplLmhlaWdodDtcclxuXHJcbiAgICAgICAgdGhpcy53aWR0aCA9IG9wdHMuc2l6ZS53aWR0aDtcclxuICAgICAgICB0aGlzLmhlaWdodCA9IG9wdHMuc2l6ZS5oZWlnaHQ7XHJcbiAgICAgICAgdGhpcy51cGRhdGVNb2RhbEJvZHlIZWlnaHQoKTtcclxuXHJcbiAgICAgICAgdGhpcy53aWR0aENoYW5nZS5lbWl0KHRoaXMud2lkdGgpO1xyXG4gICAgICAgIHRoaXMuaGVpZ2h0Q2hhbmdlLmVtaXQodGhpcy5oZWlnaHQpO1xyXG5cclxuICAgICAgICB0aGlzLnJlc2l6ZWQuZW1pdChvcHRzKTtcclxuICAgIH1cclxuXHJcbiAgICBkcm9wZG93bihlbDogYW55KSB7XHJcbiAgICAgICAgLy8gY29uc3QgcmVjdCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgIC8vIHRoaXMucmVuZGVyMi5yZW1vdmVTdHlsZShlbCwgJ21hcmdpbi10b3AnKTtcclxuICAgICAgICAvLyB0aGlzLnJlbmRlcjIucmVtb3ZlU3R5bGUoZWwsICdtYXJnaW4tbGVmdCcpO1xyXG4gICAgICAgIC8vIHRoaXMucmVuZGVyMi5zZXRTdHlsZShlbCwgJ3RvcCcsIGAke3JlY3QudG9wfXB4YCk7XHJcbiAgICAgICAgLy8gdGhpcy5yZW5kZXIyLnNldFN0eWxlKGVsLCAnbGVmdCcsIGAke3JlY3QubGVmdH1weGApO1xyXG5cclxuICAgICAgICAvLyB0aGlzLnJlbmRlcjIucmVtb3ZlU3R5bGUoZWwsICd0cmFuc2Zvcm0nKTtcclxuICAgICAgICAvLyB0aGlzLnJlbmRlcjIucmVtb3ZlU3R5bGUoZWwsICctd2Via2l0LXRyYW5zZm9ybScpO1xyXG4gICAgICAgIC8vIHRoaXMucmVuZGVyMi5yZW1vdmVTdHlsZShlbCwgJy1tcy10cmFuc2Zvcm0nKTtcclxuICAgICAgICAvLyB0aGlzLnJlbmRlcjIucmVtb3ZlU3R5bGUoZWwsICctbW96LXRyYW5zZm9ybScpO1xyXG4gICAgICAgIC8vIHRoaXMucmVuZGVyMi5yZW1vdmVTdHlsZShlbCwgJy1vLXRyYW5zZm9ybScpO1xyXG4gICAgfVxyXG5cclxuICAgIG1heERpYWxvZyhyZW1lbWJlclByZXZTaXplID0gdHJ1ZSkge1xyXG4gICAgICAgIGlmICghdGhpcy5lbCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChyZW1lbWJlclByZXZTaXplKSB7XHJcbiAgICAgICAgICAgIHRoaXMucHJldldpZHRoID0gdGhpcy53aWR0aDtcclxuICAgICAgICAgICAgdGhpcy5wcmV2SGVpZ2h0ID0gdGhpcy5oZWlnaHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHsgd2lkdGg6IHdpbldpZHRoLCBoZWlnaHQ6IHdpbkhlaWdodCwgcGFkZGluZyB9ID0gdGhpcy5nZXRTY3JlZW5TaXplKCk7XHJcbiAgICAgICAgdGhpcy53aWR0aCA9IHdpbldpZHRoO1xyXG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gd2luSGVpZ2h0O1xyXG5cclxuXHJcbiAgICAgICAgdGhpcy5kcmFnZ2FibGUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnJlc2l6YWJsZSA9IGZhbHNlO1xyXG4gICAgICAgIFxyXG5cclxuICAgICAgICB0aGlzLmlzTWF4ID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnRvQ2VudGVyKDAsIDApO1xyXG5cclxuICAgICAgICBjb25zdCBkaWFsb2dFbCA9IHRoaXMuZWwubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwtZGlhbG9nJyk7XHJcblxyXG4gICAgICAgIHRoaXMucmVuZGVyMi5zZXRTdHlsZShkaWFsb2dFbCwgJ3RvcCcsIHBhZGRpbmcpO1xyXG4gICAgICAgIHRoaXMucmVuZGVyMi5zZXRTdHlsZShkaWFsb2dFbCwgJ2xlZnQnLCBwYWRkaW5nKTtcclxuXHJcblxyXG4gICAgICAgIHRoaXMucmVzaXplZC5lbWl0KHsgc2l6ZTogeyB3aWR0aDogdGhpcy53aWR0aCwgaGVpZ2h0OiB0aGlzLmhlaWdodCB9IH0pO1xyXG4gICAgICAgIHRoaXMubWF4ZWQuZW1pdCh7IHNpemU6IHsgd2lkdGg6IHRoaXMud2lkdGgsIGhlaWdodDogdGhpcy5oZWlnaHQgfSB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZXZlcnREaWFsb2coKSB7XHJcbiAgICAgICAgdGhpcy5pc01heCA9IGZhbHNlO1xyXG5cclxuICAgICAgICBjb25zdCB7IHdpZHRoOiB3dywgaGVpZ2h0OiB3aCB9ID0gdGhpcy5nZXRTY3JlZW5TaXplKCk7XHJcblxyXG4gICAgICAgIHRoaXMud2lkdGggPSB0aGlzLnByZXZXaWR0aCA9PSB3dyA/IHRoaXMub3JpZ2luYWxXaWR0aCA6IHRoaXMucHJldldpZHRoO1xyXG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gdGhpcy5wcmV2SGVpZ2h0ID09IHdoID8gdGhpcy5vcmlnaW5hbEhlaWdodCA6IHRoaXMucHJldkhlaWdodDtcclxuICAgICAgIFxyXG4gICAgICAgIGlmICh0aGlzLndpZHRoID4gd3cpIHtcclxuICAgICAgICAgICAgdGhpcy53aWR0aCA9IHd3O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaGVpZ2h0ID4gd2gpIHtcclxuICAgICAgICAgICAgdGhpcy5oZWlnaHQgPSB3aDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZHJhZ2dhYmxlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnJlc2l6YWJsZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5yZXNldFBvc2l0aW9uKCk7XHJcbiAgICAgICAgdGhpcy5kcmFnZ2Jhci5yZXNldFBvc2l0aW9uKCk7XHJcbiAgICAgICAgdGhpcy5yZXNpemVkLmVtaXQoeyBzaXplOiB7IHdpZHRoOiB0aGlzLndpZHRoLCBoZWlnaHQ6IHRoaXMuaGVpZ2h0IH0gfSk7XHJcbiAgICAgICAgdGhpcy5tYXhlZC5lbWl0KHsgc2l6ZTogeyB3aWR0aDogdGhpcy53aWR0aCwgaGVpZ2h0OiB0aGlzLmhlaWdodCB9IH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNoYW5nZURpYWxvZ1NpemUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNNYXgpIHtcclxuICAgICAgICAgICAgdGhpcy5yZXZlcnREaWFsb2coKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLm1heERpYWxvZygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl93aW5kb3dSZXNpemVUb01heCA9IGZhbHNlO1xyXG4gICAgfVxyXG59XHJcbiJdfQ==