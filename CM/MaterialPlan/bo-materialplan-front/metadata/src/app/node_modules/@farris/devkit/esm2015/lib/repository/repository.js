/*
 * @Author: Witt
 * @Date: 2018-10-12 15:37:11
 * @Last Modified by: aalizzwell
 * @Last Modified time: 2019-09-03 19:10:44
 * @todo 待优化问题
 * 1、apiUrl是否应该在基类中，子类中的api如何传递给基类；
 */
import { Injectable } from '@angular/core';
import { Subject } from 'rxjs';
import { DataTypeInfo } from '../core/index';
import { MetadataUtil } from '../metadata/index';
import { createEntity, createEntities } from '../entity/index';
import { EntityCollection } from './entity_collection';
import { PaginationManager } from './pagination_manager';
import { DataChangeHistory } from './data_change_history';
import { SortConditionManager } from './sort_condition_manager';
import { FilterConditionManager } from './filter_condition_manager';
import { UID } from '../misc/uid';
/**
 * 本地仓库
 * @description
 * # Repository
 *
 * Repository负责与后台接口交互并将接口返回的数据转换为Entity集合进行保存。因此Repository有两个重要的职责：后端交互、数据存储。
 * Repository中存储的数据是Entity类型，可以通过API对数据进行修改或删除。由于Repository和BindingData相互监听，对数据仓库的操作最终会通过BindingData更新到界面上。
 *
 * ## 实体操作
 * 实体操作仅对Repository本地已经存在的数据进行操作，不会发送请求。
 *
 * - 通过主键获取实体
 *
 *   ```javascript
 *    this.repository.entityCollection.getEntityById("id");
 *   ```
 *
 * - 删除实体数据
 *
 *   ```javascript
 *   this.repository.entityCollection.removeEntityById("id")
 *   ```
 *
 * - 清空所有实体
 *
 *   ```javascript
 *   this.repository.entityCollection.clear();
 *   ```
 *
 * - 将实体数据转换为json格式
 *
 *   ```javascript
 *   this.repository.entityCollection.toJSON();
 *   ```
 *
 * - 添加实体
 *
 *   ```javascript
 *   this.repository.entityCollection.addEntity(entity:T);
 *   ```
 * - 添加子表实体
 *
 *   ```javascript
 *   const befRepository = this.repository as BefRepository<any>;
 *   const entityManager = befRepository.entityManager;
 *   entityManager.appendEntityByPath("/主实体Id/子表名s",{子表JSON数据});
 *   ```
 * - 批量添加实体
 *
 *   ```javascript
 *   this.repository.entityCollection.addEntities(entities:T[])
 *   ```
 *
 * - 批量添加子表实体
 *
 *   ```javascript
 *   const befRepository = this.repository as BefRepository<any>;
 *   const entityManager = befRepository.entityManager;
 *   const childrenEntities = entityManager.createEntitiesByPath(["主实体Id","子表名s"], entityListData: any[])
 *   entityManager.appendEntitiesByPath(["主实体Id","子表名s"],childrenEntities);
 *   ```
 *
 * - 批量加载实体
 *
 *   ```javascript
 *   this.repository.entityCollection.loadEntities(entities:T[]);
 *   ```
 *
 *   > 加载实体会将本地仓库数据置为加载的实体。
 *
 * - 创建实体
 *
 *   ```javascript
 *   this.repository.buildEntity(JSON数据);
 *   ```
 *
 * - 批量创建实体
 *
 *   ```javascript
 *   this.repository.buildEntities(JSON数据);
 *   ```
 *
 * - 获取子表数据
 *
 *   ```javascript
 *   const befRepository = this.repository as BefRepository<any>;
 *   const entityManager = befRepository.entityManager;
 *   entityManager.getEntityByPath(["主实体Id","子表名","子表id"]);
 *   ```
 *
 *   !> **注意** entityManager属性仅存在于BefRepository类，因此在使用EntityManager时应先将Repository转换为BefRepository
 *
 * - 获取所有子表数据
 *
 *   ```javascript
 *   const befRepository = this.repository as BefRepository<any>;
 *   const entityManager = befRepository.entityManager;
 *   entityManager.getEntitiesByPath(["主实体Id","子表名"]);
 *   ```
 *
 *   > EntityManager不仅可以获取子表数据，同样可以获取主表数据。
 *   >
 *   > ```javascript
 *   > entityManager.getEntitiesByPath(["主实体Id"]);
 *   > ```
 *
 * - 获取实体属性值
 *
 *   ```javascript
 *   const entity = this.repository.entityCollection.getEntityById("id");
 *   cosnt name = entity['name'];
 *   // 或者
 *   const entity: any = this.repository.entityCollection.getEntityById("id");
 *   cosnt name = entity.name;
 *   ```
 *
 * ## 后端交互
 *
 * ​	通过接口操作后端数据，会直接对数据产生影响。
 *
 * - 更新实体数据
 *
 *   ```javascript
 *   this.repository.updateById('id');
 *   ```
 *
 * - 删除实体
 *
 *   ```javascript
 *   this.repository.removeById("id");
 *   ```
 *
 * - 批量删除实体
 *
 *   ```javascript
 *   this.repository.removeByIds(ids:string[])
 *   ```
 *
 * - 删除下级表数据
 *
 *   ```javascript
 *   this.repository.removeByPath(['主表Id','子表名','子表Id'])
 *   ```
 *
 * - 新增主实体
 *
 *   ```javascript
 *   this.repository.append();
 *   ```
 *
 * - 新增子实体
 *
 *   ```javascript
 *   this.repository.appendByPath(['主表id','子表名']);
 *   ```
 *
 * - 加载实体数据
 *
 *   ```javascript
 *   this.repository.getById('id');
 *   ```
 *
 * - 获取主表数据
 *
 *   ```javascript
 *   this.repository.getEntities(filter: any[], sorts: any[], pageSize: number | null, pageIndex: number | null)
 *
 *   ```
 *
 *   > pageSize、pageIndex可以不传。
 *
 * - 获取主表数据（POST方法）
 *
 *   ```javascript
 *   this.repository.filter(filter: any[], sorts: any[], pageSize: number | null, pageIndex: number | null)
 *   ```
 *
 * - 提交指定实体变更到后端
 *
 *   ```javascript
 *   this.repository.updateChangesById("id");
 *   ```
 *
 * - 提交所有变更
 *
 *   ```javascript
 *   this.repository.updateAllChanges();
 *   ```
 *
 * - 应用变更（保存）
 *
 *   ```javascript
 *   this.repository.applyChanges();
 *   ```
 *
 * - 取消变更
 *
 *   ```javascript
 *   this.repository.cancelChanges();
 *   ```
 *
 * - 清除Repository所有变更
 *
 *   ```javascript
 *   const befRepository = this.repository as BefRepository<any>;
 *   befRepository.entityManager.clearAllEntityChanges();
 *   ```
 *
 * - 批量新增子表数据
 *   ```javascript
 *   this.repository.batchAppendByPath(path: string, defaultValues: Array<any>);
 *   ```
 *
 *   > path `string`：/主表id/从表前端nodeCode，如果/1/orders
 *   >
 *   > defaultValues `Array<any>`：新增从表时的默认值，数组，元素为对象，key为字段名，value为默认值。
 *
 * - 批量删除子表数据
 *
 *   ```javascript
 *   this.repository.batchRemoveByPath(path: string, ids: string);
 *   ```
 *
 *   > path `string`： /主表id/从表前端nodeCode，如果/1/orders
 *   >
 *   > ids `string` ：要删除的子表数据id，格式为`id1,id2,id3`
 */
export class Repository {
    // #endregion
    /**
     * 构造函数
     */
    constructor() {
        /**
         * 用户分页配置信息
         */
        this.paginationInfo = null;
        this.readMetadata();
        if (this.entityType) {
            this.entityTypeInfo = new DataTypeInfo(this.entityType);
            this.entityCollection = new EntityCollection(this.entityType);
        }
        this.dataChangeHistory = new DataChangeHistory();
        this.sortConditionManager = new SortConditionManager();
        this.filterConditionManager = new FilterConditionManager();
        this.destroy$ = new Subject();
    }
    // #endregion
    // #region get/set方法
    /**
     * 实体主键
     */
    get primaryKey() {
        return this.entityCollection.primaryKey;
    }
    get changes() {
        return this.entityCollection.changes;
    }
    /**
     * 实体变更集合
     */
    get entityCollectionChange() {
        return this.entityCollection.collectionChanged;
    }
    /**
     * 获取名称
     */
    get name() {
        // 1、老表单没有name属性
        // 2、不能使用construcotr.name，压缩脚本会把name改掉，或者压缩成相同的名称（目前发现已知）
        if (!this.innerName) {
            const guid = UID.create();
            this.innerName = `Repository_${guid}`;
        }
        return this.innerName;
    }
    /**
     * 设置名称
     */
    set name(value) {
        this.innerName = value;
    }
    dispose(options) {
        this.paginationManager = null;
        if (this.destroy$) {
            this.destroy$.next();
            this.destroy$.complete();
            this.destroy$ = null;
        }
        if (this.entityCollection) {
            this.entityCollection.reset(false);
            // this.entityCollection = null;
        }
    }
    ngOnDestroy() {
        this.dispose();
    }
    updateEntityType(entityType) {
        this.entityType = entityType;
        this.entityTypeInfo = new DataTypeInfo(this.entityType);
        this.entityCollection = new EntityCollection(this.entityType);
    }
    /**
     * 读取元数据
     */
    readMetadata() {
        const repositoryMetadata = MetadataUtil.getClassMetadataByName(this.constructor, 'NgRepository');
        if (repositoryMetadata) {
            // API地址
            this.apiUri = repositoryMetadata.apiUrl;
            // 实体类型
            this.entityType = repositoryMetadata.entityType;
        }
        // // API地址
        // this.apiUri = repositoryMetadata.apiUrl;
        // // 实体类型
        // this.entityType = repositoryMetadata.entityType;
    }
    /**
     * 初始化分页配置
     * @param config 用户分页配置
     */
    setPaginationConfig(config) {
        this.paginationManager = new PaginationManager(this.entityType, config);
        const { pageSize = 0 } = this.paginationManager.getPaginationConfigByPath('/') || {};
        // tslint:disable-next-line: max-line-length
        this.entityCollection.paginationInfo = Object.assign({ pageSize }, this.paginationManager.pagination, this.entityCollection.paginationInfo);
        // 无需再单独设置一次pageSize，减少一次变更
        // this.entityCollection.pageSize = pageSize;
    }
    /**
     * 重置状态
     */
    reset() {
        this.entityCollection.reset();
    }
    /**
     * 创建实体
     */
    buildEntity(data) {
        const entity = createEntity(this.entityType, data);
        return entity;
    }
    /**
     * 批量创建实体
     */
    buildEntities(listData) {
        const entities = createEntities(this.entityType, listData);
        return entities;
    }
}
Repository.decorators = [
    { type: Injectable }
];
/** @nocollapse */
Repository.ctorParameters = () => [];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVwb3NpdG9yeS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvZGV2a2l0LyIsInNvdXJjZXMiOlsibGliL3JlcG9zaXRvcnkvcmVwb3NpdG9yeS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7OztHQU9HO0FBRUgsT0FBTyxFQUFRLFVBQVUsRUFBYSxNQUFNLGVBQWUsQ0FBQztBQUM1RCxPQUFPLEVBQWMsT0FBTyxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBRTNDLE9BQU8sRUFBRSxZQUFZLEVBQWUsTUFBTSxlQUFlLENBQUM7QUFFMUQsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ2pELE9BQU8sRUFBVSxZQUFZLEVBQUUsY0FBYyxFQUFxQixNQUFNLGlCQUFpQixDQUFDO0FBRTFGLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ3ZELE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBQ3pELE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBQzFELE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBQ2hFLE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxNQUFNLDRCQUE0QixDQUFDO0FBQ3BFLE9BQU8sRUFBRSxHQUFHLEVBQUUsTUFBTSxhQUFhLENBQUM7QUFFbEM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7R0FrT0c7QUFFSCxNQUFNLE9BQWdCLFVBQVU7SUFnRzlCLGFBQWE7SUFFYjs7T0FFRztJQUNIO1FBbkVBOztXQUVHO1FBQ0ksbUJBQWMsR0FBUSxJQUFJLENBQUM7UUFpRWhDLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQztRQUNwQixJQUFJLElBQUksQ0FBQyxVQUFVLEVBQUU7WUFDbkIsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLFlBQVksQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDeEQsSUFBSSxDQUFDLGdCQUFnQixHQUFHLElBQUksZ0JBQWdCLENBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1NBQ2xFO1FBQ0QsSUFBSSxDQUFDLGlCQUFpQixHQUFHLElBQUksaUJBQWlCLEVBQUUsQ0FBQztRQUNqRCxJQUFJLENBQUMsb0JBQW9CLEdBQUcsSUFBSSxvQkFBb0IsRUFBRSxDQUFDO1FBQ3ZELElBQUksQ0FBQyxzQkFBc0IsR0FBRyxJQUFJLHNCQUFzQixFQUFFLENBQUM7UUFDM0QsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLE9BQU8sRUFBTyxDQUFDO0lBQ3JDLENBQUM7SUExREQsYUFBYTtJQUViLG9CQUFvQjtJQUVwQjs7T0FFRztJQUNILElBQVcsVUFBVTtRQUNuQixPQUFPLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxVQUFVLENBQUM7SUFDMUMsQ0FBQztJQUNELElBQVcsT0FBTztRQUNoQixPQUFPLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUM7SUFDdkMsQ0FBQztJQUNEOztPQUVHO0lBQ0gsSUFBVyxzQkFBc0I7UUFDL0IsT0FBTyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsaUJBQWlCLENBQUM7SUFDakQsQ0FBQztJQUVEOztPQUVHO0lBQ0gsSUFBVyxJQUFJO1FBRWIsZ0JBQWdCO1FBQ2hCLHlEQUF5RDtRQUN6RCxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRTtZQUNuQixNQUFNLElBQUksR0FBRyxHQUFHLENBQUMsTUFBTSxFQUFFLENBQUM7WUFDMUIsSUFBSSxDQUFDLFNBQVMsR0FBRyxjQUFjLElBQUksRUFBRSxDQUFDO1NBQ3ZDO1FBRUQsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDO0lBQ3hCLENBQUM7SUFDRDs7T0FFRztJQUNILElBQVcsSUFBSSxDQUFDLEtBQWE7UUFDM0IsSUFBSSxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUM7SUFDekIsQ0FBQztJQW9CRCxPQUFPLENBQUMsT0FBYTtRQUVuQixJQUFJLENBQUMsaUJBQWlCLEdBQUcsSUFBSSxDQUFDO1FBQzlCLElBQUksSUFBSSxDQUFDLFFBQVEsRUFBRTtZQUNqQixJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxDQUFDO1lBQ3JCLElBQUksQ0FBQyxRQUFRLENBQUMsUUFBUSxFQUFFLENBQUM7WUFDekIsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUM7U0FDdEI7UUFDRCxJQUFJLElBQUksQ0FBQyxnQkFBZ0IsRUFBRTtZQUN6QixJQUFJLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ25DLGdDQUFnQztTQUNqQztJQUVILENBQUM7SUFDRCxXQUFXO1FBQ1QsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO0lBQ2pCLENBQUM7SUFFTSxnQkFBZ0IsQ0FBQyxVQUFlO1FBQ3JDLElBQUksQ0FBQyxVQUFVLEdBQUcsVUFBVSxDQUFDO1FBQzdCLElBQUksQ0FBQyxjQUFjLEdBQUcsSUFBSSxZQUFZLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQ3hELElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLGdCQUFnQixDQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztJQUNuRSxDQUFDO0lBR0Q7O09BRUc7SUFDSyxZQUFZO1FBQ2xCLE1BQU0sa0JBQWtCLEdBQWlCLFlBQVksQ0FBQyxzQkFBc0IsQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLGNBQWMsQ0FBQyxDQUFDO1FBQy9HLElBQUksa0JBQWtCLEVBQUU7WUFDdEIsUUFBUTtZQUNSLElBQUksQ0FBQyxNQUFNLEdBQUcsa0JBQWtCLENBQUMsTUFBTSxDQUFDO1lBRXhDLE9BQU87WUFDUCxJQUFJLENBQUMsVUFBVSxHQUFHLGtCQUFrQixDQUFDLFVBQVUsQ0FBQztTQUNqRDtRQUVELFdBQVc7UUFDWCwyQ0FBMkM7UUFFM0MsVUFBVTtRQUNWLG1EQUFtRDtJQUNyRCxDQUFDO0lBRUQ7OztPQUdHO0lBQ0gsbUJBQW1CLENBQUMsTUFBVztRQUM3QixJQUFJLENBQUMsaUJBQWlCLEdBQUcsSUFBSSxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBQ3hFLE1BQU0sRUFBRSxRQUFRLEdBQUcsQ0FBQyxFQUFFLEdBQUcsSUFBSSxDQUFDLGlCQUFpQixDQUFDLHlCQUF5QixDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUNyRiw0Q0FBNEM7UUFDNUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLGNBQWMsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUUsUUFBUSxFQUFFLEVBQUUsSUFBSSxDQUFDLGlCQUFpQixDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsZ0JBQWdCLENBQUMsY0FBYyxDQUFDLENBQUM7UUFDNUksMkJBQTJCO1FBQzNCLDZDQUE2QztJQUMvQyxDQUFDO0lBQ0Q7O09BRUc7SUFDSSxLQUFLO1FBQ1YsSUFBSSxDQUFDLGdCQUFnQixDQUFDLEtBQUssRUFBRSxDQUFDO0lBQ2hDLENBQUM7SUFFRDs7T0FFRztJQUNJLFdBQVcsQ0FBQyxJQUFTO1FBQzFCLE1BQU0sTUFBTSxHQUFHLFlBQVksQ0FBSSxJQUFJLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQ3RELE9BQU8sTUFBTSxDQUFDO0lBQ2hCLENBQUM7SUFFRDs7T0FFRztJQUNJLGFBQWEsQ0FBQyxRQUFlO1FBQ2xDLE1BQU0sUUFBUSxHQUFRLGNBQWMsQ0FBSSxJQUFJLENBQUMsVUFBVSxFQUFFLFFBQVEsQ0FBQyxDQUFDO1FBQ25FLE9BQU8sUUFBUSxDQUFDO0lBQ2xCLENBQUM7OztZQS9MRixVQUFVIiwic291cmNlc0NvbnRlbnQiOlsiLypcclxuICogQEF1dGhvcjogV2l0dFxyXG4gKiBARGF0ZTogMjAxOC0xMC0xMiAxNTozNzoxMVxyXG4gKiBATGFzdCBNb2RpZmllZCBieTogYWFsaXp6d2VsbFxyXG4gKiBATGFzdCBNb2RpZmllZCB0aW1lOiAyMDE5LTA5LTAzIDE5OjEwOjQ0XHJcbiAqIEB0b2RvIOW+heS8mOWMlumXrumimFxyXG4gKiAx44CBYXBpVXJs5piv5ZCm5bqU6K+l5Zyo5Z+657G75Lit77yM5a2Q57G75Lit55qEYXBp5aaC5L2V5Lyg6YCS57uZ5Z+657G777ybXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgVHlwZSwgSW5qZWN0YWJsZSwgT25EZXN0cm95IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IE9ic2VydmFibGUsIFN1YmplY3QgfSBmcm9tICdyeGpzJztcclxuXHJcbmltcG9ydCB7IERhdGFUeXBlSW5mbywgSURpc3Bvc2FibGUgfSBmcm9tICcuLi9jb3JlL2luZGV4JztcclxuaW1wb3J0IHsgTW9kaWZpY2F0aW9uIH0gZnJvbSAnLi4vY2hhbmdlc2V0L2luZGV4JztcclxuaW1wb3J0IHsgTWV0YWRhdGFVdGlsIH0gZnJvbSAnLi4vbWV0YWRhdGEvaW5kZXgnO1xyXG5pbXBvcnQgeyBFbnRpdHksIGNyZWF0ZUVudGl0eSwgY3JlYXRlRW50aXRpZXMsIEZpZWxkTWV0YWRhdGFVdGlsIH0gZnJvbSAnLi4vZW50aXR5L2luZGV4JztcclxuaW1wb3J0IHsgTmdSZXBvc2l0b3J5IH0gZnJvbSAnLi9kZWNvcmF0b3JzJztcclxuaW1wb3J0IHsgRW50aXR5Q29sbGVjdGlvbiB9IGZyb20gJy4vZW50aXR5X2NvbGxlY3Rpb24nO1xyXG5pbXBvcnQgeyBQYWdpbmF0aW9uTWFuYWdlciB9IGZyb20gJy4vcGFnaW5hdGlvbl9tYW5hZ2VyJztcclxuaW1wb3J0IHsgRGF0YUNoYW5nZUhpc3RvcnkgfSBmcm9tICcuL2RhdGFfY2hhbmdlX2hpc3RvcnknO1xyXG5pbXBvcnQgeyBTb3J0Q29uZGl0aW9uTWFuYWdlciB9IGZyb20gJy4vc29ydF9jb25kaXRpb25fbWFuYWdlcic7XHJcbmltcG9ydCB7IEZpbHRlckNvbmRpdGlvbk1hbmFnZXIgfSBmcm9tICcuL2ZpbHRlcl9jb25kaXRpb25fbWFuYWdlcic7XHJcbmltcG9ydCB7IFVJRCB9IGZyb20gJy4uL21pc2MvdWlkJztcclxuXHJcbi8qKlxyXG4gKiDmnKzlnLDku5PlupNcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqICMgUmVwb3NpdG9yeVxyXG4gKiBcclxuICogUmVwb3NpdG9yeei0n+i0o+S4juWQjuWPsOaOpeWPo+S6pOS6kuW5tuWwhuaOpeWPo+i/lOWbnueahOaVsOaNrui9rOaNouS4ukVudGl0eembhuWQiOi/m+ihjOS/neWtmOOAguWboOatpFJlcG9zaXRvcnnmnInkuKTkuKrph43opoHnmoTogYzotKPvvJrlkI7nq6/kuqTkupLjgIHmlbDmja7lrZjlgqjjgIJcclxuICogUmVwb3NpdG9yeeS4reWtmOWCqOeahOaVsOaNruaYr0VudGl0eeexu+Wei++8jOWPr+S7pemAmui/h0FQSeWvueaVsOaNrui/m+ihjOS/ruaUueaIluWIoOmZpOOAgueUseS6jlJlcG9zaXRvcnnlkoxCaW5kaW5nRGF0YeebuOS6kuebkeWQrO+8jOWvueaVsOaNruS7k+W6k+eahOaTjeS9nOacgOe7iOS8mumAmui/h0JpbmRpbmdEYXRh5pu05paw5Yiw55WM6Z2i5LiK44CCXHJcbiAqIFxyXG4gKiAjIyDlrp7kvZPmk43kvZxcclxuICog5a6e5L2T5pON5L2c5LuF5a+5UmVwb3NpdG9yeeacrOWcsOW3sue7j+WtmOWcqOeahOaVsOaNrui/m+ihjOaTjeS9nO+8jOS4jeS8muWPkemAgeivt+axguOAglxyXG4gKiBcclxuICogLSDpgJrov4fkuLvplK7ojrflj5blrp7kvZNcclxuICogXHJcbiAqICAgYGBgamF2YXNjcmlwdFxyXG4gKiAgICB0aGlzLnJlcG9zaXRvcnkuZW50aXR5Q29sbGVjdGlvbi5nZXRFbnRpdHlCeUlkKFwiaWRcIik7XHJcbiAqICAgYGBgXHJcbiAqIFxyXG4gKiAtIOWIoOmZpOWunuS9k+aVsOaNrlxyXG4gKiBcclxuICogICBgYGBqYXZhc2NyaXB0XHJcbiAqICAgdGhpcy5yZXBvc2l0b3J5LmVudGl0eUNvbGxlY3Rpb24ucmVtb3ZlRW50aXR5QnlJZChcImlkXCIpXHJcbiAqICAgYGBgXHJcbiAqIFxyXG4gKiAtIOa4heepuuaJgOacieWunuS9k1xyXG4gKiBcclxuICogICBgYGBqYXZhc2NyaXB0XHJcbiAqICAgdGhpcy5yZXBvc2l0b3J5LmVudGl0eUNvbGxlY3Rpb24uY2xlYXIoKTtcclxuICogICBgYGBcclxuICogXHJcbiAqIC0g5bCG5a6e5L2T5pWw5o2u6L2s5o2i5Li6anNvbuagvOW8j1xyXG4gKiBcclxuICogICBgYGBqYXZhc2NyaXB0XHJcbiAqICAgdGhpcy5yZXBvc2l0b3J5LmVudGl0eUNvbGxlY3Rpb24udG9KU09OKCk7XHJcbiAqICAgYGBgXHJcbiAqIFxyXG4gKiAtIOa3u+WKoOWunuS9k1xyXG4gKiBcclxuICogICBgYGBqYXZhc2NyaXB0XHJcbiAqICAgdGhpcy5yZXBvc2l0b3J5LmVudGl0eUNvbGxlY3Rpb24uYWRkRW50aXR5KGVudGl0eTpUKTtcclxuICogICBgYGBcclxuICogLSDmt7vliqDlrZDooajlrp7kvZNcclxuICogXHJcbiAqICAgYGBgamF2YXNjcmlwdFxyXG4gKiAgIGNvbnN0IGJlZlJlcG9zaXRvcnkgPSB0aGlzLnJlcG9zaXRvcnkgYXMgQmVmUmVwb3NpdG9yeTxhbnk+O1xyXG4gKiAgIGNvbnN0IGVudGl0eU1hbmFnZXIgPSBiZWZSZXBvc2l0b3J5LmVudGl0eU1hbmFnZXI7XHJcbiAqICAgZW50aXR5TWFuYWdlci5hcHBlbmRFbnRpdHlCeVBhdGgoXCIv5Li75a6e5L2TSWQv5a2Q6KGo5ZCNc1wiLHvlrZDooahKU09O5pWw5o2ufSk7XHJcbiAqICAgYGBgXHJcbiAqIC0g5om56YeP5re75Yqg5a6e5L2TXHJcbiAqIFxyXG4gKiAgIGBgYGphdmFzY3JpcHRcclxuICogICB0aGlzLnJlcG9zaXRvcnkuZW50aXR5Q29sbGVjdGlvbi5hZGRFbnRpdGllcyhlbnRpdGllczpUW10pXHJcbiAqICAgYGBgXHJcbiAqICAgXHJcbiAqIC0g5om56YeP5re75Yqg5a2Q6KGo5a6e5L2TXHJcbiAqIFxyXG4gKiAgIGBgYGphdmFzY3JpcHRcclxuICogICBjb25zdCBiZWZSZXBvc2l0b3J5ID0gdGhpcy5yZXBvc2l0b3J5IGFzIEJlZlJlcG9zaXRvcnk8YW55PjtcclxuICogICBjb25zdCBlbnRpdHlNYW5hZ2VyID0gYmVmUmVwb3NpdG9yeS5lbnRpdHlNYW5hZ2VyO1xyXG4gKiAgIGNvbnN0IGNoaWxkcmVuRW50aXRpZXMgPSBlbnRpdHlNYW5hZ2VyLmNyZWF0ZUVudGl0aWVzQnlQYXRoKFtcIuS4u+WunuS9k0lkXCIsXCLlrZDooajlkI1zXCJdLCBlbnRpdHlMaXN0RGF0YTogYW55W10pXHJcbiAqICAgZW50aXR5TWFuYWdlci5hcHBlbmRFbnRpdGllc0J5UGF0aChbXCLkuLvlrp7kvZNJZFwiLFwi5a2Q6KGo5ZCNc1wiXSxjaGlsZHJlbkVudGl0aWVzKTtcclxuICogICBgYGBcclxuICogXHJcbiAqIC0g5om56YeP5Yqg6L295a6e5L2TXHJcbiAqIFxyXG4gKiAgIGBgYGphdmFzY3JpcHRcclxuICogICB0aGlzLnJlcG9zaXRvcnkuZW50aXR5Q29sbGVjdGlvbi5sb2FkRW50aXRpZXMoZW50aXRpZXM6VFtdKTtcclxuICogICBgYGBcclxuICogXHJcbiAqICAgPiDliqDovb3lrp7kvZPkvJrlsIbmnKzlnLDku5PlupPmlbDmja7nva7kuLrliqDovb3nmoTlrp7kvZPjgIJcclxuICogXHJcbiAqIC0g5Yib5bu65a6e5L2TXHJcbiAqIFxyXG4gKiAgIGBgYGphdmFzY3JpcHRcclxuICogICB0aGlzLnJlcG9zaXRvcnkuYnVpbGRFbnRpdHkoSlNPTuaVsOaNrik7XHJcbiAqICAgYGBgXHJcbiAqIFxyXG4gKiAtIOaJuemHj+WIm+W7uuWunuS9k1xyXG4gKiBcclxuICogICBgYGBqYXZhc2NyaXB0XHJcbiAqICAgdGhpcy5yZXBvc2l0b3J5LmJ1aWxkRW50aXRpZXMoSlNPTuaVsOaNrik7XHJcbiAqICAgYGBgXHJcbiAqIFxyXG4gKiAtIOiOt+WPluWtkOihqOaVsOaNrlxyXG4gKiBcclxuICogICBgYGBqYXZhc2NyaXB0XHJcbiAqICAgY29uc3QgYmVmUmVwb3NpdG9yeSA9IHRoaXMucmVwb3NpdG9yeSBhcyBCZWZSZXBvc2l0b3J5PGFueT47XHJcbiAqICAgY29uc3QgZW50aXR5TWFuYWdlciA9IGJlZlJlcG9zaXRvcnkuZW50aXR5TWFuYWdlcjtcclxuICogICBlbnRpdHlNYW5hZ2VyLmdldEVudGl0eUJ5UGF0aChbXCLkuLvlrp7kvZNJZFwiLFwi5a2Q6KGo5ZCNXCIsXCLlrZDooahpZFwiXSk7XHJcbiAqICAgYGBgXHJcbiAqIFxyXG4gKiAgICE+ICoq5rOo5oSPKiogZW50aXR5TWFuYWdlcuWxnuaAp+S7heWtmOWcqOS6jkJlZlJlcG9zaXRvcnnnsbvvvIzlm6DmraTlnKjkvb/nlKhFbnRpdHlNYW5hZ2Vy5pe25bqU5YWI5bCGUmVwb3NpdG9yeei9rOaNouS4ukJlZlJlcG9zaXRvcnlcclxuICogXHJcbiAqIC0g6I635Y+W5omA5pyJ5a2Q6KGo5pWw5o2uXHJcbiAqIFxyXG4gKiAgIGBgYGphdmFzY3JpcHRcclxuICogICBjb25zdCBiZWZSZXBvc2l0b3J5ID0gdGhpcy5yZXBvc2l0b3J5IGFzIEJlZlJlcG9zaXRvcnk8YW55PjtcclxuICogICBjb25zdCBlbnRpdHlNYW5hZ2VyID0gYmVmUmVwb3NpdG9yeS5lbnRpdHlNYW5hZ2VyO1xyXG4gKiAgIGVudGl0eU1hbmFnZXIuZ2V0RW50aXRpZXNCeVBhdGgoW1wi5Li75a6e5L2TSWRcIixcIuWtkOihqOWQjVwiXSk7XHJcbiAqICAgYGBgXHJcbiAqIFxyXG4gKiAgID4gRW50aXR5TWFuYWdlcuS4jeS7heWPr+S7peiOt+WPluWtkOihqOaVsOaNru+8jOWQjOagt+WPr+S7peiOt+WPluS4u+ihqOaVsOaNruOAglxyXG4gKiAgID5cclxuICogICA+IGBgYGphdmFzY3JpcHRcclxuICogICA+IGVudGl0eU1hbmFnZXIuZ2V0RW50aXRpZXNCeVBhdGgoW1wi5Li75a6e5L2TSWRcIl0pO1xyXG4gKiAgID4gYGBgXHJcbiAqICAgXHJcbiAqIC0g6I635Y+W5a6e5L2T5bGe5oCn5YC8XHJcbiAqIFxyXG4gKiAgIGBgYGphdmFzY3JpcHRcclxuICogICBjb25zdCBlbnRpdHkgPSB0aGlzLnJlcG9zaXRvcnkuZW50aXR5Q29sbGVjdGlvbi5nZXRFbnRpdHlCeUlkKFwiaWRcIik7XHJcbiAqICAgY29zbnQgbmFtZSA9IGVudGl0eVsnbmFtZSddO1xyXG4gKiAgIC8vIOaIluiAhVxyXG4gKiAgIGNvbnN0IGVudGl0eTogYW55ID0gdGhpcy5yZXBvc2l0b3J5LmVudGl0eUNvbGxlY3Rpb24uZ2V0RW50aXR5QnlJZChcImlkXCIpO1xyXG4gKiAgIGNvc250IG5hbWUgPSBlbnRpdHkubmFtZTtcclxuICogICBgYGBcclxuICogXHJcbiAqICMjIOWQjuerr+S6pOS6klxyXG4gKiBcclxuICog4oCLXHTpgJrov4fmjqXlj6Pmk43kvZzlkI7nq6/mlbDmja7vvIzkvJrnm7TmjqXlr7nmlbDmja7kuqfnlJ/lvbHlk43jgIJcclxuICogXHJcbiAqIC0g5pu05paw5a6e5L2T5pWw5o2uXHJcbiAqIFxyXG4gKiAgIGBgYGphdmFzY3JpcHRcclxuICogICB0aGlzLnJlcG9zaXRvcnkudXBkYXRlQnlJZCgnaWQnKTtcclxuICogICBgYGBcclxuICogXHJcbiAqIC0g5Yig6Zmk5a6e5L2TXHJcbiAqIFxyXG4gKiAgIGBgYGphdmFzY3JpcHRcclxuICogICB0aGlzLnJlcG9zaXRvcnkucmVtb3ZlQnlJZChcImlkXCIpO1xyXG4gKiAgIGBgYFxyXG4gKiBcclxuICogLSDmibnph4/liKDpmaTlrp7kvZNcclxuICogXHJcbiAqICAgYGBgamF2YXNjcmlwdFxyXG4gKiAgIHRoaXMucmVwb3NpdG9yeS5yZW1vdmVCeUlkcyhpZHM6c3RyaW5nW10pXHJcbiAqICAgYGBgXHJcbiAqIFxyXG4gKiAtIOWIoOmZpOS4i+e6p+ihqOaVsOaNrlxyXG4gKiBcclxuICogICBgYGBqYXZhc2NyaXB0XHJcbiAqICAgdGhpcy5yZXBvc2l0b3J5LnJlbW92ZUJ5UGF0aChbJ+S4u+ihqElkJywn5a2Q6KGo5ZCNJywn5a2Q6KGoSWQnXSlcclxuICogICBgYGBcclxuICogXHJcbiAqIC0g5paw5aKe5Li75a6e5L2TXHJcbiAqIFxyXG4gKiAgIGBgYGphdmFzY3JpcHRcclxuICogICB0aGlzLnJlcG9zaXRvcnkuYXBwZW5kKCk7XHJcbiAqICAgYGBgXHJcbiAqIFxyXG4gKiAtIOaWsOWinuWtkOWunuS9k1xyXG4gKiBcclxuICogICBgYGBqYXZhc2NyaXB0XHJcbiAqICAgdGhpcy5yZXBvc2l0b3J5LmFwcGVuZEJ5UGF0aChbJ+S4u+ihqGlkJywn5a2Q6KGo5ZCNJ10pO1xyXG4gKiAgIGBgYFxyXG4gKiBcclxuICogLSDliqDovb3lrp7kvZPmlbDmja5cclxuICogXHJcbiAqICAgYGBgamF2YXNjcmlwdFxyXG4gKiAgIHRoaXMucmVwb3NpdG9yeS5nZXRCeUlkKCdpZCcpO1xyXG4gKiAgIGBgYFxyXG4gKiBcclxuICogLSDojrflj5bkuLvooajmlbDmja5cclxuICogXHJcbiAqICAgYGBgamF2YXNjcmlwdFxyXG4gKiAgIHRoaXMucmVwb3NpdG9yeS5nZXRFbnRpdGllcyhmaWx0ZXI6IGFueVtdLCBzb3J0czogYW55W10sIHBhZ2VTaXplOiBudW1iZXIgfCBudWxsLCBwYWdlSW5kZXg6IG51bWJlciB8IG51bGwpXHJcbiAqICAgXHJcbiAqICAgYGBgXHJcbiAqIFxyXG4gKiAgID4gcGFnZVNpemXjgIFwYWdlSW5kZXjlj6/ku6XkuI3kvKDjgIJcclxuICogXHJcbiAqIC0g6I635Y+W5Li76KGo5pWw5o2u77yIUE9TVOaWueazle+8iVxyXG4gKiBcclxuICogICBgYGBqYXZhc2NyaXB0XHJcbiAqICAgdGhpcy5yZXBvc2l0b3J5LmZpbHRlcihmaWx0ZXI6IGFueVtdLCBzb3J0czogYW55W10sIHBhZ2VTaXplOiBudW1iZXIgfCBudWxsLCBwYWdlSW5kZXg6IG51bWJlciB8IG51bGwpXHJcbiAqICAgYGBgXHJcbiAqIFxyXG4gKiAtIOaPkOS6pOaMh+WumuWunuS9k+WPmOabtOWIsOWQjuerr1xyXG4gKiBcclxuICogICBgYGBqYXZhc2NyaXB0XHJcbiAqICAgdGhpcy5yZXBvc2l0b3J5LnVwZGF0ZUNoYW5nZXNCeUlkKFwiaWRcIik7XHJcbiAqICAgYGBgXHJcbiAqIFxyXG4gKiAtIOaPkOS6pOaJgOacieWPmOabtFxyXG4gKiBcclxuICogICBgYGBqYXZhc2NyaXB0XHJcbiAqICAgdGhpcy5yZXBvc2l0b3J5LnVwZGF0ZUFsbENoYW5nZXMoKTtcclxuICogICBgYGBcclxuICogXHJcbiAqIC0g5bqU55So5Y+Y5pu077yI5L+d5a2Y77yJXHJcbiAqIFxyXG4gKiAgIGBgYGphdmFzY3JpcHRcclxuICogICB0aGlzLnJlcG9zaXRvcnkuYXBwbHlDaGFuZ2VzKCk7XHJcbiAqICAgYGBgXHJcbiAqIFxyXG4gKiAtIOWPlua2iOWPmOabtFxyXG4gKiBcclxuICogICBgYGBqYXZhc2NyaXB0XHJcbiAqICAgdGhpcy5yZXBvc2l0b3J5LmNhbmNlbENoYW5nZXMoKTtcclxuICogICBgYGBcclxuICogXHJcbiAqIC0g5riF6ZmkUmVwb3NpdG9yeeaJgOacieWPmOabtFxyXG4gKiBcclxuICogICBgYGBqYXZhc2NyaXB0XHJcbiAqICAgY29uc3QgYmVmUmVwb3NpdG9yeSA9IHRoaXMucmVwb3NpdG9yeSBhcyBCZWZSZXBvc2l0b3J5PGFueT47XHJcbiAqICAgYmVmUmVwb3NpdG9yeS5lbnRpdHlNYW5hZ2VyLmNsZWFyQWxsRW50aXR5Q2hhbmdlcygpO1xyXG4gKiAgIGBgYFxyXG4gKiAgIFxyXG4gKiAtIOaJuemHj+aWsOWinuWtkOihqOaVsOaNrlxyXG4gKiAgIGBgYGphdmFzY3JpcHRcclxuICogICB0aGlzLnJlcG9zaXRvcnkuYmF0Y2hBcHBlbmRCeVBhdGgocGF0aDogc3RyaW5nLCBkZWZhdWx0VmFsdWVzOiBBcnJheTxhbnk+KTtcclxuICogICBgYGBcclxuICogICBcclxuICogICA+IHBhdGggYHN0cmluZ2DvvJov5Li76KGoaWQv5LuO6KGo5YmN56uvbm9kZUNvZGXvvIzlpoLmnpwvMS9vcmRlcnNcclxuICogICA+XHJcbiAqICAgPiBkZWZhdWx0VmFsdWVzIGBBcnJheTxhbnk+YO+8muaWsOWinuS7juihqOaXtueahOm7mOiupOWAvO+8jOaVsOe7hO+8jOWFg+e0oOS4uuWvueixoe+8jGtleeS4uuWtl+auteWQje+8jHZhbHVl5Li66buY6K6k5YC844CCXHJcbiAqICAgXHJcbiAqIC0g5om56YeP5Yig6Zmk5a2Q6KGo5pWw5o2uXHJcbiAqICAgXHJcbiAqICAgYGBgamF2YXNjcmlwdFxyXG4gKiAgIHRoaXMucmVwb3NpdG9yeS5iYXRjaFJlbW92ZUJ5UGF0aChwYXRoOiBzdHJpbmcsIGlkczogc3RyaW5nKTtcclxuICogICBgYGBcclxuICogICBcclxuICogICA+IHBhdGggYHN0cmluZ2DvvJogL+S4u+ihqGlkL+S7juihqOWJjeerr25vZGVDb2Rl77yM5aaC5p6cLzEvb3JkZXJzXHJcbiAqICAgPlxyXG4gKiAgID4gaWRzIGBzdHJpbmdgIO+8muimgeWIoOmZpOeahOWtkOihqOaVsOaNrmlk77yM5qC85byP5Li6YGlkMSxpZDIsaWQzYFxyXG4gKi9cclxuQEluamVjdGFibGUoKVxyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgUmVwb3NpdG9yeTxUIGV4dGVuZHMgRW50aXR5PiBpbXBsZW1lbnRzIElEaXNwb3NhYmxlLCBPbkRlc3Ryb3kge1xyXG5cclxuICAvLyAjcmVnaW9uIOengeacieWxnuaAp1xyXG5cclxuICAvKipcclxuICAgKiDlkI3np7BcclxuICAgKi9cclxuICBwcml2YXRlIGlubmVyTmFtZTogc3RyaW5nO1xyXG5cclxuICAvLyAjZW5kcmVnaW9uXHJcblxyXG4gIC8vICNyZWdpb24g5YWs5pyJ5bGe5oCn77yI5YWx5pyJ5bGe5oCn5LiN5bqU6K+l55u05o6l5pq06Zyy77yM5b6F5YyF6KOF77yJXHJcblxyXG4gIC8qKlxyXG4gICAqIEFQSeWcsOWdgFxyXG4gICAqL1xyXG4gIHB1YmxpYyBhcGlVcmk6IHN0cmluZztcclxuXHJcbiAgLyoqXHJcbiAgICog5a6e5L2T57G75Z6LXHJcbiAgICovXHJcbiAgcHVibGljIGVudGl0eVR5cGU6IGFueTtcclxuXHJcbiAgLyoqXHJcbiAgICog5a6e5L2T57G75Z6L5L+h5oGvXHJcbiAgICogQHRvZG/vvJrlrp7kvZPlsYLlupTor6XkuovlhYjkuIDkuKpFbnRpdHlUeXBlSW5mb++8jOW5tue7p+aJv0RhdGFUeXBlSW5mb+OAglxyXG4gICAqL1xyXG4gIHB1YmxpYyBlbnRpdHlUeXBlSW5mbzogRGF0YVR5cGVJbmZvO1xyXG5cclxuICAvKipcclxuICAgKiDlrp7kvZPpm4blkIhcclxuICAgKi9cclxuICBwdWJsaWMgZW50aXR5Q29sbGVjdGlvbjogRW50aXR5Q29sbGVjdGlvbjxUPjtcclxuXHJcbiAgLyoqXHJcbiAgICog55So5oi35YiG6aG16YWN572u5L+h5oGvXHJcbiAgICovXHJcbiAgcHVibGljIHBhZ2luYXRpb25JbmZvOiBhbnkgPSBudWxsO1xyXG5cclxuICAvKipcclxuICAgKiDmlbDmja7lj5jmm7Tljoblj7LvvIjku4Xpkojlr7nkuLvooajlop7liqDjgIHlkITnp43ooajliKDpmaTvvIlcclxuICAgKi9cclxuICBwdWJsaWMgZGF0YUNoYW5nZUhpc3Rvcnk6IERhdGFDaGFuZ2VIaXN0b3J5O1xyXG5cclxuICAvKipcclxuICAgKiDmjpLluo/mnaHku7bnrqHnkIblmahcclxuICAgKi9cclxuICBwdWJsaWMgc29ydENvbmRpdGlvbk1hbmFnZXI6IFNvcnRDb25kaXRpb25NYW5hZ2VyO1xyXG4gIC8qKlxyXG4gICAqIOi/h+a7pOadoeS7tueuoeeQhuWZqFxyXG4gICAqL1xyXG4gIHB1YmxpYyBmaWx0ZXJDb25kaXRpb25NYW5hZ2VyOiBGaWx0ZXJDb25kaXRpb25NYW5hZ2VyO1xyXG5cclxuICAvLyAjZW5kcmVnaW9uXHJcblxyXG4gIC8vICNyZWdpb24gZ2V0L3NldOaWueazlVxyXG5cclxuICAvKipcclxuICAgKiDlrp7kvZPkuLvplK5cclxuICAgKi9cclxuICBwdWJsaWMgZ2V0IHByaW1hcnlLZXkoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiB0aGlzLmVudGl0eUNvbGxlY3Rpb24ucHJpbWFyeUtleTtcclxuICB9XHJcbiAgcHVibGljIGdldCBjaGFuZ2VzKCk6IFN1YmplY3Q8TW9kaWZpY2F0aW9uPiB7XHJcbiAgICByZXR1cm4gdGhpcy5lbnRpdHlDb2xsZWN0aW9uLmNoYW5nZXM7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIOWunuS9k+WPmOabtOmbhuWQiFxyXG4gICAqL1xyXG4gIHB1YmxpYyBnZXQgZW50aXR5Q29sbGVjdGlvbkNoYW5nZSgpOiBTdWJqZWN0PE1vZGlmaWNhdGlvbj4ge1xyXG4gICAgcmV0dXJuIHRoaXMuZW50aXR5Q29sbGVjdGlvbi5jb2xsZWN0aW9uQ2hhbmdlZDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiOt+WPluWQjeensFxyXG4gICAqL1xyXG4gIHB1YmxpYyBnZXQgbmFtZSgpOiBzdHJpbmcge1xyXG5cclxuICAgIC8vIDHjgIHogIHooajljZXmsqHmnIluYW1l5bGe5oCnXHJcbiAgICAvLyAy44CB5LiN6IO95L2/55SoY29uc3RydWNvdHIubmFtZe+8jOWOi+e8qeiEmuacrOS8muaKim5hbWXmlLnmjonvvIzmiJbogIXljovnvKnmiJDnm7jlkIznmoTlkI3np7DvvIjnm67liY3lj5HnjrDlt7Lnn6XvvIlcclxuICAgIGlmICghdGhpcy5pbm5lck5hbWUpIHtcclxuICAgICAgY29uc3QgZ3VpZCA9IFVJRC5jcmVhdGUoKTtcclxuICAgICAgdGhpcy5pbm5lck5hbWUgPSBgUmVwb3NpdG9yeV8ke2d1aWR9YDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdGhpcy5pbm5lck5hbWU7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIOiuvue9ruWQjeensFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzZXQgbmFtZSh2YWx1ZTogc3RyaW5nKSB7XHJcbiAgICB0aGlzLmlubmVyTmFtZSA9IHZhbHVlO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHBhZ2luYXRpb25NYW5hZ2VyOiBQYWdpbmF0aW9uTWFuYWdlcjxUPjtcclxuICBwdWJsaWMgZGVzdHJveSQ6IFN1YmplY3Q8YW55PjtcclxuICAvLyAjZW5kcmVnaW9uXHJcblxyXG4gIC8qKlxyXG4gICAqIOaehOmAoOWHveaVsFxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdGhpcy5yZWFkTWV0YWRhdGEoKTtcclxuICAgIGlmICh0aGlzLmVudGl0eVR5cGUpIHtcclxuICAgICAgdGhpcy5lbnRpdHlUeXBlSW5mbyA9IG5ldyBEYXRhVHlwZUluZm8odGhpcy5lbnRpdHlUeXBlKTtcclxuICAgICAgdGhpcy5lbnRpdHlDb2xsZWN0aW9uID0gbmV3IEVudGl0eUNvbGxlY3Rpb248VD4odGhpcy5lbnRpdHlUeXBlKTtcclxuICAgIH1cclxuICAgIHRoaXMuZGF0YUNoYW5nZUhpc3RvcnkgPSBuZXcgRGF0YUNoYW5nZUhpc3RvcnkoKTtcclxuICAgIHRoaXMuc29ydENvbmRpdGlvbk1hbmFnZXIgPSBuZXcgU29ydENvbmRpdGlvbk1hbmFnZXIoKTtcclxuICAgIHRoaXMuZmlsdGVyQ29uZGl0aW9uTWFuYWdlciA9IG5ldyBGaWx0ZXJDb25kaXRpb25NYW5hZ2VyKCk7XHJcbiAgICB0aGlzLmRlc3Ryb3kkID0gbmV3IFN1YmplY3Q8YW55PigpO1xyXG4gIH1cclxuICBkaXNwb3NlKG9wdGlvbnM/OiBhbnkpIHtcclxuXHJcbiAgICB0aGlzLnBhZ2luYXRpb25NYW5hZ2VyID0gbnVsbDtcclxuICAgIGlmICh0aGlzLmRlc3Ryb3kkKSB7XHJcbiAgICAgIHRoaXMuZGVzdHJveSQubmV4dCgpO1xyXG4gICAgICB0aGlzLmRlc3Ryb3kkLmNvbXBsZXRlKCk7XHJcbiAgICAgIHRoaXMuZGVzdHJveSQgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuZW50aXR5Q29sbGVjdGlvbikge1xyXG4gICAgICB0aGlzLmVudGl0eUNvbGxlY3Rpb24ucmVzZXQoZmFsc2UpO1xyXG4gICAgICAvLyB0aGlzLmVudGl0eUNvbGxlY3Rpb24gPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICB9XHJcbiAgbmdPbkRlc3Ryb3koKTogdm9pZCB7XHJcbiAgICB0aGlzLmRpc3Bvc2UoKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyB1cGRhdGVFbnRpdHlUeXBlKGVudGl0eVR5cGU6IGFueSkge1xyXG4gICAgdGhpcy5lbnRpdHlUeXBlID0gZW50aXR5VHlwZTtcclxuICAgIHRoaXMuZW50aXR5VHlwZUluZm8gPSBuZXcgRGF0YVR5cGVJbmZvKHRoaXMuZW50aXR5VHlwZSk7XHJcbiAgICB0aGlzLmVudGl0eUNvbGxlY3Rpb24gPSBuZXcgRW50aXR5Q29sbGVjdGlvbjxUPih0aGlzLmVudGl0eVR5cGUpO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIOivu+WPluWFg+aVsOaNrlxyXG4gICAqL1xyXG4gIHByaXZhdGUgcmVhZE1ldGFkYXRhKCkge1xyXG4gICAgY29uc3QgcmVwb3NpdG9yeU1ldGFkYXRhOiBOZ1JlcG9zaXRvcnkgPSBNZXRhZGF0YVV0aWwuZ2V0Q2xhc3NNZXRhZGF0YUJ5TmFtZSh0aGlzLmNvbnN0cnVjdG9yLCAnTmdSZXBvc2l0b3J5Jyk7XHJcbiAgICBpZiAocmVwb3NpdG9yeU1ldGFkYXRhKSB7XHJcbiAgICAgIC8vIEFQSeWcsOWdgFxyXG4gICAgICB0aGlzLmFwaVVyaSA9IHJlcG9zaXRvcnlNZXRhZGF0YS5hcGlVcmw7XHJcblxyXG4gICAgICAvLyDlrp7kvZPnsbvlnotcclxuICAgICAgdGhpcy5lbnRpdHlUeXBlID0gcmVwb3NpdG9yeU1ldGFkYXRhLmVudGl0eVR5cGU7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLy8gQVBJ5Zyw5Z2AXHJcbiAgICAvLyB0aGlzLmFwaVVyaSA9IHJlcG9zaXRvcnlNZXRhZGF0YS5hcGlVcmw7XHJcblxyXG4gICAgLy8gLy8g5a6e5L2T57G75Z6LXHJcbiAgICAvLyB0aGlzLmVudGl0eVR5cGUgPSByZXBvc2l0b3J5TWV0YWRhdGEuZW50aXR5VHlwZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWIneWni+WMluWIhumhtemFjee9rlxyXG4gICAqIEBwYXJhbSBjb25maWcg55So5oi35YiG6aG16YWN572uXHJcbiAgICovXHJcbiAgc2V0UGFnaW5hdGlvbkNvbmZpZyhjb25maWc6IGFueSkge1xyXG4gICAgdGhpcy5wYWdpbmF0aW9uTWFuYWdlciA9IG5ldyBQYWdpbmF0aW9uTWFuYWdlcih0aGlzLmVudGl0eVR5cGUsIGNvbmZpZyk7XHJcbiAgICBjb25zdCB7IHBhZ2VTaXplID0gMCB9ID0gdGhpcy5wYWdpbmF0aW9uTWFuYWdlci5nZXRQYWdpbmF0aW9uQ29uZmlnQnlQYXRoKCcvJykgfHwge307XHJcbiAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6IG1heC1saW5lLWxlbmd0aFxyXG4gICAgdGhpcy5lbnRpdHlDb2xsZWN0aW9uLnBhZ2luYXRpb25JbmZvID0gT2JqZWN0LmFzc2lnbih7IHBhZ2VTaXplIH0sIHRoaXMucGFnaW5hdGlvbk1hbmFnZXIucGFnaW5hdGlvbiwgdGhpcy5lbnRpdHlDb2xsZWN0aW9uLnBhZ2luYXRpb25JbmZvKTtcclxuICAgIC8vIOaXoOmcgOWGjeWNleeLrOiuvue9ruS4gOasoXBhZ2VTaXpl77yM5YeP5bCR5LiA5qyh5Y+Y5pu0XHJcbiAgICAvLyB0aGlzLmVudGl0eUNvbGxlY3Rpb24ucGFnZVNpemUgPSBwYWdlU2l6ZTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICog6YeN572u54q25oCBXHJcbiAgICovXHJcbiAgcHVibGljIHJlc2V0KCk6IHZvaWQge1xyXG4gICAgdGhpcy5lbnRpdHlDb2xsZWN0aW9uLnJlc2V0KCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDliJvlu7rlrp7kvZNcclxuICAgKi9cclxuICBwdWJsaWMgYnVpbGRFbnRpdHkoZGF0YTogYW55KTogVCB7XHJcbiAgICBjb25zdCBlbnRpdHkgPSBjcmVhdGVFbnRpdHk8VD4odGhpcy5lbnRpdHlUeXBlLCBkYXRhKTtcclxuICAgIHJldHVybiBlbnRpdHk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmibnph4/liJvlu7rlrp7kvZNcclxuICAgKi9cclxuICBwdWJsaWMgYnVpbGRFbnRpdGllcyhsaXN0RGF0YTogYW55W10pOiBUW10ge1xyXG4gICAgY29uc3QgZW50aXRpZXM6IFRbXSA9IGNyZWF0ZUVudGl0aWVzPFQ+KHRoaXMuZW50aXR5VHlwZSwgbGlzdERhdGEpO1xyXG4gICAgcmV0dXJuIGVudGl0aWVzO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6I635Y+W5a6e5L2T5YiX6KGoXHJcbiAgICogQHBhcmFtIGZpbHRlcnMgICAg6L+H5ruk5p2h5Lu2XHJcbiAgICogQHBhcmFtIHNvcnRzICAgICAg5o6S5bqP5p2h5Lu2XHJcbiAgICogQHBhcmFtIHBhZ2luYXRpb24g5YiG6aG15L+h5oGvXHJcbiAgICovXHJcbiAgYWJzdHJhY3QgZ2V0RW50aXRpZXMoZmlsdGVyOiBhbnlbXSwgc29ydHM6IGFueVtdLCBwYWdlU2l6ZTogbnVtYmVyIHwgbnVsbCwgcGFnZUluZGV4OiBudW1iZXIgfCBudWxsKTogT2JzZXJ2YWJsZTxUW10+O1xyXG4gIC8qKlxyXG4gICAqIOiOt+WPluWunuS9k+WIl+ihqFxyXG4gICAqIEBwYXJhbSBmaWx0ZXIg6L+H5ruk5p2h5Lu2XHJcbiAgICogQHBhcmFtIHNvcnRzIOaOkuW6j+adoeS7tlxyXG4gICAqIEBwYXJhbSBwYWdlU2l6ZSDliIbpobXlpKflsI9cclxuICAgKiBAcGFyYW0gcGFnZUluZGV4IOW9k+WJjeWIhumhtVxyXG4gICAqL1xyXG4gIGFic3RyYWN0IGZpbHRlcihmaWx0ZXI/OiBhbnlbXSwgc29ydHM/OiBhbnlbXSwgcGFnZVNpemU/OiBudW1iZXIgfCBudWxsLCBwYWdlSW5kZXg/OiBudW1iZXIgfCBudWxsKTogT2JzZXJ2YWJsZTxUW10+O1xyXG4gIC8qKlxyXG4gICAqIOiOt+WPluWunuS9k+WIl+ihqFxyXG4gICAqL1xyXG4gIGFic3RyYWN0IGdldExpc3QoKTogT2JzZXJ2YWJsZTxUW10+O1xyXG4gIC8qKlxyXG4gICAqIOagueaNrmlk6I635Y+W5a6e5L2TXHJcbiAgICogQHBhcmFtIGlkIOWunuS9k+agh+ivhlxyXG4gICAqL1xyXG4gIGFic3RyYWN0IGdldEJ5SWQoaWQ6IHN0cmluZyk6IE9ic2VydmFibGU8VD47XHJcbiAgLyoqXHJcbiAgICog5qC55o2uaWTojrflj5blrp7kvZNcclxuICAgKiBAcGFyYW0gaWQg5Li75a6e5L2TaWRcclxuICAgKi9cclxuICBhYnN0cmFjdCBnZXRFbnRpdHlCeUlkKGlkOiBzdHJpbmcpOiBPYnNlcnZhYmxlPFQ+O1xyXG4gIC8qKlxyXG4gICAqIOWIhumhteafpeivouS7juihqC/ku47ku47ooajmlbDmja5cclxuICAgKiBAcGFyYW0gcGF0aCDnu5Hlrprot6/lvoRcclxuICAgKiBAcGFyYW0gaWRzIOe7keWumui3r+W+hOWvueW6lOeahOS4u+mUrlxyXG4gICAqIEBwYXJhbSBmaWx0ZXIg6L+H5ruk5p2h5Lu2XHJcbiAgICogQHBhcmFtIHNvcnQg5o6S5bqPXHJcbiAgICovXHJcbiAgYWJzdHJhY3QgcXVlcnlDaGlsZChwYXRoczogc3RyaW5nW10sIHBhZ2VJbmRleDogbnVtYmVyLCBwYWdlU2l6ZTogbnVtYmVyLCBmaWx0ZXI/OiBzdHJpbmcsIHNvcnQ/OiBzdHJpbmcpOiBPYnNlcnZhYmxlPFRbXT47XHJcbiAgLyoqXHJcbiAgICog5qC55o2uaWTmm7TmlrDlrp7kvZNcclxuICAgKiBAcGFyYW0gaWQg5a6e5L2TaWRcclxuICAgKi9cclxuICBhYnN0cmFjdCB1cGRhdGVCeUlkKGlkOiBzdHJpbmcpOiBPYnNlcnZhYmxlPFQ+O1xyXG4gIC8qKlxyXG4gICAqIOabtOaWsOWunuS9k+aVsOaNrijlrZDooajliIbpobUpXHJcbiAgICogQHBhcmFtIGlkIOWunuS9k+S4u+mUrlxyXG4gICAqL1xyXG4gIGFic3RyYWN0IHVwZGF0ZUVudGl0eUJ5SWQoaWQ6IHN0cmluZyk6IE9ic2VydmFibGU8VD47XHJcbiAgLyoqXHJcbiAgICog5Yib5bu65paw5a6e5L2T77yM5bCG6K+l5a6e5L2T5Yqg6L295Yiw5YiX6KGoXHJcbiAgICovXHJcbiAgYWJzdHJhY3QgY3JlYXRlKCk6IE9ic2VydmFibGU8YW55PjtcclxuXHJcbiAgLy8gLyoqXHJcbiAgLy8gICog5Yib5bu65ZCO5Luj5a6e5L2T77yM5bCG6K+l5a6e5L2T5Yqg6L295Yiw5ZCO5Luj5YiX6KGo77yI5pqC5peg6K+l5Zy65pmv77yJXHJcbiAgLy8gICogQHBhcmFtIHBhdGgg6Lev5b6EXHJcbiAgLy8gICovXHJcbiAgLy8gYWJzdHJhY3QgY3JlYXRlQnlQYXRoKHBhdGg6IHN0cmluZyk7XHJcblxyXG4gIC8qKlxyXG4gICAqIOWIm+W7uuaWsOWunuS9k++8jOW5tui/veWKoOWIsOWunuS9k+WIl+ihqFxyXG4gICAqL1xyXG4gIGFic3RyYWN0IGFwcGVuZCgpOiBPYnNlcnZhYmxlPGFueT47XHJcblxyXG4gIC8qKlxyXG4gICAqIOWIm+W7uuaWsOeahOWtkOWunuS9k++8jOW5tui/veWKoOWIsOWunuS9k+WIl+ihqFxyXG4gICAqIEBwYXJhbSBwYXRoIOWunuS9k+i3r+W+hFxyXG4gICAqL1xyXG4gIGFic3RyYWN0IGFwcGVuZEJ5UGF0aChwYXRoOiBzdHJpbmcpOiBPYnNlcnZhYmxlPGFueT47XHJcbiAgLyoqXHJcbiAgICog5YaN5oyH5a6a5L2N572u5o+S5YWl5pWw5o2uXHJcbiAgICovXHJcbiAgYWJzdHJhY3QgaW5zZXJ0KHBvc2l0aW9uOiAxIHwgLTEsIGRlZmF1bHRWYWx1ZT86IGFueSk6IE9ic2VydmFibGU8YW55PjtcclxuICAvKipcclxuICAgKiDlnKjmjIflrprlrp7kvZPot6/lvoTmj5LlhaXlrp7kvZNcclxuICAgKiBAcGFyYW0gcGF0aCDlrp7kvZPot6/lvoRcclxuICAgKi9cclxuICBhYnN0cmFjdCBpbnNlcnRCeVBhdGgocGF0aDogc3RyaW5nLCBwb3NpdGlvbjogMSB8IC0xKTogT2JzZXJ2YWJsZTxhbnk+O1xyXG4gIC8qKlxyXG4gICAqIOagueaNrmlk5Yig6Zmk5a+55bqU5a6e5L2TXHJcbiAgICogQHBhcmFtIGlkIOWGheeggVxyXG4gICAqL1xyXG4gIGFic3RyYWN0IHJlbW92ZUJ5SWQoaWQ6IHN0cmluZywgaWZTYXZlPzogYm9vbGVhbik6IE9ic2VydmFibGU8YW55PjtcclxuXHJcbiAgLyoqXHJcbiAgICog5qC55o2uaWRz5om56YeP5Yig6Zmk5a6e5L2TXHJcbiAgICogQHBhcmFtIGlkIGlkc1xyXG4gICAqIEBwYXJhbSBpZlNhdmUg5piv5ZCm5L+d5a2YXHJcbiAgICogQGRlcHJlY2F0ZWQg5bey5bqf5byD77yM6K+l5o6l5Y+j5L2/55SocXVlcnlzdHJpbmfkvKDlj4LvvIzlrZjlnKjotoXplb/pl67popjjgILor7fkvb/nlKhiYXRjaFJlbW92ZeaOpeWPo+abv+S7o+OAglxyXG4gICAqL1xyXG4gIGFic3RyYWN0IHJlbW92ZUJ5SWRzKGlkczogc3RyaW5nW10sIGlmU2F2ZT86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPGFueT47XHJcbiAgLyoqXHJcbiAgICog5qC55o2uaWRz5om56YeP5Yig6Zmk5a6e5L2TXHJcbiAgICogQHBhcmFtIGlkcyBpZHNcclxuICAgKiBAcGFyYW0gaWZTYXZlIOaYr+WQpuS/neWtmFxyXG4gICAqL1xyXG4gIGFic3RyYWN0IGJhdGNoUmVtb3ZlKGlkczogc3RyaW5nW10sIGlmU2F2ZT86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPGFueT47XHJcbiAgLyoqXHJcbiAgICog5qC55o2uaWTliKDpmaRwYXRo5a+55bqU55qE5ZCO5Luj5a6e5L2TXHJcbiAgICovXHJcbiAgYWJzdHJhY3QgcmVtb3ZlQnlQYXRoKHBhdGg6IHN0cmluZywgaWQ6IHN0cmluZyk7XHJcblxyXG4gIC8qKlxyXG4gICAqIOaPkOS6pGlk5a+55bqU55qE5qC55a6e5L2T5Y+Y5pu0XHJcbiAgICovXHJcbiAgYWJzdHJhY3QgdXBkYXRlQ2hhbmdlc0J5SWQoaWQ6IHN0cmluZyk6IE9ic2VydmFibGU8Ym9vbGVhbj47XHJcblxyXG4gIC8qKlxyXG4gICAqIOaPkOS6pHBhdGjlr7nlupTnmoTlrp7kvZPlj5jmm7RcclxuICAgKi9cclxuICBhYnN0cmFjdCB1cGRhdGVDaGFuZ2VzQnlQYXRoKHBhdGg6IHN0cmluZywgaWQ6IHN0cmluZyk6IE9ic2VydmFibGU8Ym9vbGVhbj47XHJcblxyXG4gIC8qKlxyXG4gICAqIOabtOaWsOaJgOacieWPmOabtFxyXG4gICAqL1xyXG4gIGFic3RyYWN0IHVwZGF0ZUFsbENoYW5nZXMoKTogT2JzZXJ2YWJsZTxib29sZWFuPjtcclxuXHJcbiAgLyoqXHJcbiAgICog5bqU55So5pyN5Yqh5Zmo56uv5Y+Y5pu0XHJcbiAgICovXHJcbiAgYWJzdHJhY3QgYXBwbHlDaGFuZ2VzKCk6IE9ic2VydmFibGU8Ym9vbGVhbj47XHJcblxyXG4gIC8qKlxyXG4gICAqIOS/neWtmGlk5a+55bqU5pWw5o2u55qE5Y+Y5pu0XHJcbiAgICovXHJcbiAgYWJzdHJhY3QgYXBwbHlDaGFuZ2VzQnlJZChpZDogc3RyaW5nKTogT2JzZXJ2YWJsZTxib29sZWFuPjtcclxuXHJcbiAgLyoqXHJcbiAgICog5Y+W5raI5Y+Y5pu06ZuGXHJcbiAgICovXHJcbiAgYWJzdHJhY3QgY2FuY2VsQ2hhbmdlcyhvcHRpb25zPzogYW55KTogT2JzZXJ2YWJsZTxib29sZWFuPjtcclxuICAvKipcclxuICAgKiDmibnph4/liKDpmaTlrZDooahcclxuICAgKi9cclxuICBhYnN0cmFjdCBiYXRjaFJlbW92ZUJ5UGF0aChwYXRoOiBzdHJpbmcsIGlkczogc3RyaW5nKTogT2JzZXJ2YWJsZTxib29sZWFuPjtcclxuICAvKipcclxuICAgKiDmibnph4/mlrDlop7ku47ooagv5LuO5LuO6KGo5pWw5o2uXHJcbiAgICogQHBhcmFtIHBhdGgg5a6e5L2T57uR5a6a6Lev5b6E77yMbGlrZSAxL2NoaWxkcyBvciAxL2NoaWxkcy8xMS9jaGlsZGNoaWxkc1xyXG4gICAqIEBwYXJhbSBkZWZhdWx0VmFsdWVzIOm7mOiupOWunuS9k+aVsOaNruaVsOe7hFxyXG4gICAqIEBkZXNjcmlwdGlvbiDlkI7nq6/mjqXlj6Plj6rmlK/mjIHmibnph4/mlrDlop7lrZDooajvvIzmibnph4/mlrDlop7kuLvooajnm67liY3kuI3mlK/mjIFcclxuICAgKi9cclxuICBhYnN0cmFjdCBiYXRjaEFwcGVuZEJ5UGF0aChwYXRoOiBzdHJpbmcsIGRlZmF1bHRWYWx1ZXM6IEFycmF5PGFueT4pOiBPYnNlcnZhYmxlPGFueT47XHJcbiAgLyoqXHJcbiAgICog5om56YeP5paw5aKe5Li76KGo5pWw5o2uXHJcbiAgICogQHBhcmFtIGRlZmF1bHRWYWx1ZXMg6buY6K6k5a6e5L2T5pWw5o2u5pWw57uEXHJcbiAgICovXHJcbiAgYWJzdHJhY3QgYmF0Y2hBcHBlbmQoZGVmYXVsdFZhbHVlczogQXJyYXk8YW55Pik6IE9ic2VydmFibGU8YW55PjtcclxuXHJcbn1cclxuIl19