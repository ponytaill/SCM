/*
 * @Author: Witt
 * @Date: 2018-10-12 15:37:11
 * @Last Modified by: aalizzwell
 * @Last Modified time: 2019-09-03 19:10:44
 * @todo 待优化问题
 * 1、apiUrl是否应该在基类中，子类中的api如何传递给基类；
 */
import { Injectable } from '@angular/core';
import { Subject } from 'rxjs';
import { DataTypeInfo } from '../core/index';
import { MetadataUtil } from '../metadata/index';
import { createEntity, createEntities } from '../entity/index';
import { EntityCollection } from './entity_collection';
import { PaginationManager } from './pagination_manager';
import { DataChangeHistory } from './data_change_history';
import { SortConditionManager } from './sort_condition_manager';
import { FilterConditionManager } from './filter_condition_manager';
import { UID } from '../misc/uid';
/**
 * 本地仓库
 * @description
 * # Repository
 *
 * Repository负责与后台接口交互并将接口返回的数据转换为Entity集合进行保存。因此Repository有两个重要的职责：后端交互、数据存储。
 * Repository中存储的数据是Entity类型，可以通过API对数据进行修改或删除。由于Repository和BindingData相互监听，对数据仓库的操作最终会通过BindingData更新到界面上。
 *
 * ## 实体操作
 * 实体操作仅对Repository本地已经存在的数据进行操作，不会发送请求。
 *
 * - 通过主键获取实体
 *
 *   ```javascript
 *    this.repository.entityCollection.getEntityById("id");
 *   ```
 *
 * - 删除实体数据
 *
 *   ```javascript
 *   this.repository.entityCollection.removeEntityById("id")
 *   ```
 *
 * - 清空所有实体
 *
 *   ```javascript
 *   this.repository.entityCollection.clear();
 *   ```
 *
 * - 将实体数据转换为json格式
 *
 *   ```javascript
 *   this.repository.entityCollection.toJSON();
 *   ```
 *
 * - 添加实体
 *
 *   ```javascript
 *   this.repository.entityCollection.addEntity(entity:T);
 *   ```
 * - 添加子表实体
 *
 *   ```javascript
 *   const befRepository = this.repository as BefRepository<any>;
 *   const entityManager = befRepository.entityManager;
 *   entityManager.appendEntityByPath("/主实体Id/子表名s",{子表JSON数据});
 *   ```
 * - 批量添加实体
 *
 *   ```javascript
 *   this.repository.entityCollection.addEntities(entities:T[])
 *   ```
 *
 * - 批量添加子表实体
 *
 *   ```javascript
 *   const befRepository = this.repository as BefRepository<any>;
 *   const entityManager = befRepository.entityManager;
 *   const childrenEntities = entityManager.createEntitiesByPath(["主实体Id","子表名s"], entityListData: any[])
 *   entityManager.appendEntitiesByPath(["主实体Id","子表名s"],childrenEntities);
 *   ```
 *
 * - 批量加载实体
 *
 *   ```javascript
 *   this.repository.entityCollection.loadEntities(entities:T[]);
 *   ```
 *
 *   > 加载实体会将本地仓库数据置为加载的实体。
 *
 * - 创建实体
 *
 *   ```javascript
 *   this.repository.buildEntity(JSON数据);
 *   ```
 *
 * - 批量创建实体
 *
 *   ```javascript
 *   this.repository.buildEntities(JSON数据);
 *   ```
 *
 * - 获取子表数据
 *
 *   ```javascript
 *   const befRepository = this.repository as BefRepository<any>;
 *   const entityManager = befRepository.entityManager;
 *   entityManager.getEntityByPath(["主实体Id","子表名","子表id"]);
 *   ```
 *
 *   !> **注意** entityManager属性仅存在于BefRepository类，因此在使用EntityManager时应先将Repository转换为BefRepository
 *
 * - 获取所有子表数据
 *
 *   ```javascript
 *   const befRepository = this.repository as BefRepository<any>;
 *   const entityManager = befRepository.entityManager;
 *   entityManager.getEntitiesByPath(["主实体Id","子表名"]);
 *   ```
 *
 *   > EntityManager不仅可以获取子表数据，同样可以获取主表数据。
 *   >
 *   > ```javascript
 *   > entityManager.getEntitiesByPath(["主实体Id"]);
 *   > ```
 *
 * - 获取实体属性值
 *
 *   ```javascript
 *   const entity = this.repository.entityCollection.getEntityById("id");
 *   cosnt name = entity['name'];
 *   // 或者
 *   const entity: any = this.repository.entityCollection.getEntityById("id");
 *   cosnt name = entity.name;
 *   ```
 *
 * ## 后端交互
 *
 * ​	通过接口操作后端数据，会直接对数据产生影响。
 *
 * - 更新实体数据
 *
 *   ```javascript
 *   this.repository.updateById('id');
 *   ```
 *
 * - 删除实体
 *
 *   ```javascript
 *   this.repository.removeById("id");
 *   ```
 *
 * - 批量删除实体
 *
 *   ```javascript
 *   this.repository.removeByIds(ids:string[])
 *   ```
 *
 * - 删除下级表数据
 *
 *   ```javascript
 *   this.repository.removeByPath(['主表Id','子表名','子表Id'])
 *   ```
 *
 * - 新增主实体
 *
 *   ```javascript
 *   this.repository.append();
 *   ```
 *
 * - 新增子实体
 *
 *   ```javascript
 *   this.repository.appendByPath(['主表id','子表名']);
 *   ```
 *
 * - 加载实体数据
 *
 *   ```javascript
 *   this.repository.getById('id');
 *   ```
 *
 * - 获取主表数据
 *
 *   ```javascript
 *   this.repository.getEntities(filter: any[], sorts: any[], pageSize: number | null, pageIndex: number | null)
 *
 *   ```
 *
 *   > pageSize、pageIndex可以不传。
 *
 * - 获取主表数据（POST方法）
 *
 *   ```javascript
 *   this.repository.filter(filter: any[], sorts: any[], pageSize: number | null, pageIndex: number | null)
 *   ```
 *
 * - 提交指定实体变更到后端
 *
 *   ```javascript
 *   this.repository.updateChangesById("id");
 *   ```
 *
 * - 提交所有变更
 *
 *   ```javascript
 *   this.repository.updateAllChanges();
 *   ```
 *
 * - 应用变更（保存）
 *
 *   ```javascript
 *   this.repository.applyChanges();
 *   ```
 *
 * - 取消变更
 *
 *   ```javascript
 *   this.repository.cancelChanges();
 *   ```
 *
 * - 清除Repository所有变更
 *
 *   ```javascript
 *   const befRepository = this.repository as BefRepository<any>;
 *   befRepository.entityManager.clearAllEntityChanges();
 *   ```
 *
 * - 批量新增子表数据
 *   ```javascript
 *   this.repository.batchAppendByPath(path: string, defaultValues: Array<any>);
 *   ```
 *
 *   > path `string`：/主表id/从表前端nodeCode，如果/1/orders
 *   >
 *   > defaultValues `Array<any>`：新增从表时的默认值，数组，元素为对象，key为字段名，value为默认值。
 *
 * - 批量删除子表数据
 *
 *   ```javascript
 *   this.repository.batchRemoveByPath(path: string, ids: string);
 *   ```
 *
 *   > path `string`： /主表id/从表前端nodeCode，如果/1/orders
 *   >
 *   > ids `string` ：要删除的子表数据id，格式为`id1,id2,id3`
 */
export class Repository {
    // #endregion
    /**
     * 构造函数
     */
    constructor() {
        /**
         * 用户分页配置信息
         */
        this.paginationInfo = null;
        this.readMetadata();
        if (this.entityType) {
            this.entityTypeInfo = new DataTypeInfo(this.entityType);
            this.entityCollection = new EntityCollection(this.entityType);
        }
        this.dataChangeHistory = new DataChangeHistory();
        this.sortConditionManager = new SortConditionManager();
        this.filterConditionManager = new FilterConditionManager();
        this.destroy$ = new Subject();
    }
    // #endregion
    // #region get/set方法
    /**
     * 实体主键
     */
    get primaryKey() {
        return this.entityCollection.primaryKey;
    }
    get changes() {
        return this.entityCollection.changes;
    }
    /**
     * 实体变更集合
     */
    get entityCollectionChange() {
        return this.entityCollection.collectionChanged;
    }
    /**
     * 获取名称
     */
    get name() {
        // 1、老表单没有name属性
        // 2、不能使用construcotr.name，压缩脚本会把name改掉，或者压缩成相同的名称（目前发现已知）
        if (!this.innerName) {
            const guid = UID.create();
            this.innerName = `Repository_${guid}`;
        }
        return this.innerName;
    }
    /**
     * 设置名称
     */
    set name(value) {
        this.innerName = value;
    }
    dispose(options) {
        this.paginationManager = null;
        if (this.destroy$) {
            this.destroy$.next();
            this.destroy$.complete();
            this.destroy$ = null;
        }
        if (this.entityCollection) {
            this.entityCollection.reset(false);
            this.entityCollection = null;
        }
    }
    ngOnDestroy() {
        this.dispose();
    }
    updateEntityType(entityType) {
        this.entityType = entityType;
        this.entityTypeInfo = new DataTypeInfo(this.entityType);
        this.entityCollection = new EntityCollection(this.entityType);
    }
    /**
     * 读取元数据
     */
    readMetadata() {
        const repositoryMetadata = MetadataUtil.getClassMetadataByName(this.constructor, 'NgRepository');
        if (repositoryMetadata) {
            // API地址
            this.apiUri = repositoryMetadata.apiUrl;
            // 实体类型
            this.entityType = repositoryMetadata.entityType;
        }
        // // API地址
        // this.apiUri = repositoryMetadata.apiUrl;
        // // 实体类型
        // this.entityType = repositoryMetadata.entityType;
    }
    /**
     * 初始化分页配置
     * @param config 用户分页配置
     */
    setPaginationConfig(config) {
        this.paginationManager = new PaginationManager(this.entityType, config);
        const { pageSize = 0 } = this.paginationManager.getPaginationConfigByPath('/') || {};
        // tslint:disable-next-line: max-line-length
        this.entityCollection.paginationInfo = Object.assign({ pageSize }, this.paginationManager.pagination, this.entityCollection.paginationInfo);
        // 无需再单独设置一次pageSize，减少一次变更
        // this.entityCollection.pageSize = pageSize;
    }
    /**
     * 重置状态
     */
    reset() {
        this.entityCollection.reset();
    }
    /**
     * 创建实体
     */
    buildEntity(data) {
        const entity = createEntity(this.entityType, data);
        return entity;
    }
    /**
     * 批量创建实体
     */
    buildEntities(listData) {
        const entities = createEntities(this.entityType, listData);
        return entities;
    }
}
Repository.decorators = [
    { type: Injectable }
];
/** @nocollapse */
Repository.ctorParameters = () => [];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVwb3NpdG9yeS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvZGV2a2l0LyIsInNvdXJjZXMiOlsibGliL3JlcG9zaXRvcnkvcmVwb3NpdG9yeS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7OztHQU9HO0FBRUgsT0FBTyxFQUFRLFVBQVUsRUFBYSxNQUFNLGVBQWUsQ0FBQztBQUM1RCxPQUFPLEVBQWMsT0FBTyxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBRTNDLE9BQU8sRUFBRSxZQUFZLEVBQWUsTUFBTSxlQUFlLENBQUM7QUFFMUQsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ2pELE9BQU8sRUFBVSxZQUFZLEVBQUUsY0FBYyxFQUFxQixNQUFNLGlCQUFpQixDQUFDO0FBRTFGLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ3ZELE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBQ3pELE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBQzFELE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBQ2hFLE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxNQUFNLDRCQUE0QixDQUFDO0FBQ3BFLE9BQU8sRUFBRSxHQUFHLEVBQUUsTUFBTSxhQUFhLENBQUM7QUFFbEM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7R0FrT0c7QUFFSCxNQUFNLE9BQWdCLFVBQVU7SUFn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TEYsVUFBVSIsInNvdXJjZXNDb250ZW50IjpbIi8qXHJcbiAqIEBBdXRob3I6IFdpdHRcclxuICogQERhdGU6IDIwMTgtMTAtMTIgMTU6Mzc6MTFcclxuICogQExhc3QgTW9kaWZpZWQgYnk6IGFhbGl6endlbGxcclxuICogQExhc3QgTW9kaWZpZWQgdGltZTogMjAxOS0wOS0wMyAxOToxMDo0NFxyXG4gKiBAdG9kbyDlvoXkvJjljJbpl67pophcclxuICogMeOAgWFwaVVybOaYr+WQpuW6lOivpeWcqOWfuuexu+S4re+8jOWtkOexu+S4reeahGFwaeWmguS9leS8oOmAkue7meWfuuexu++8m1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IFR5cGUsIEluamVjdGFibGUsIE9uRGVzdHJveSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XHJcblxyXG5pbXBvcnQgeyBEYXRhVHlwZUluZm8sIElEaXNwb3NhYmxlIH0gZnJvbSAnLi4vY29yZS9pbmRleCc7XHJcbmltcG9ydCB7IE1vZGlmaWNhdGlvbiB9IGZyb20gJy4uL2NoYW5nZXNldC9pbmRleCc7XHJcbmltcG9ydCB7IE1ldGFkYXRhVXRpbCB9IGZyb20gJy4uL21ldGFkYXRhL2luZGV4JztcclxuaW1wb3J0IHsgRW50aXR5LCBjcmVhdGVFbnRpdHksIGNyZWF0ZUVudGl0aWVzLCBGaWVsZE1ldGFkYXRhVXRpbCB9IGZyb20gJy4uL2VudGl0eS9pbmRleCc7XHJcbmltcG9ydCB7IE5nUmVwb3NpdG9yeSB9IGZyb20gJy4vZGVjb3JhdG9ycyc7XHJcbmltcG9ydCB7IEVudGl0eUNvbGxlY3Rpb24gfSBmcm9tICcuL2VudGl0eV9jb2xsZWN0aW9uJztcclxuaW1wb3J0IHsgUGFnaW5hdGlvbk1hbmFnZXIgfSBmcm9tICcuL3BhZ2luYXRpb25fbWFuYWdlcic7XHJcbmltcG9ydCB7IERhdGFDaGFuZ2VIaXN0b3J5IH0gZnJvbSAnLi9kYXRhX2NoYW5nZV9oaXN0b3J5JztcclxuaW1wb3J0IHsgU29ydENvbmRpdGlvbk1hbmFnZXIgfSBmcm9tICcuL3NvcnRfY29uZGl0aW9uX21hbmFnZXInO1xyXG5pbXBvcnQgeyBGaWx0ZXJDb25kaXRpb25NYW5hZ2VyIH0gZnJvbSAnLi9maWx0ZXJfY29uZGl0aW9uX21hbmFnZXInO1xyXG5pbXBvcnQgeyBVSUQgfSBmcm9tICcuLi9taXNjL3VpZCc7XHJcblxyXG4vKipcclxuICog5pys5Zyw5LuT5bqTXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiAjIFJlcG9zaXRvcnlcclxuICogXHJcbiAqIFJlcG9zaXRvcnnotJ/otKPkuI7lkI7lj7DmjqXlj6PkuqTkupLlubblsIbmjqXlj6Pov5Tlm57nmoTmlbDmja7ovazmjaLkuLpFbnRpdHnpm4blkIjov5vooYzkv53lrZjjgILlm6DmraRSZXBvc2l0b3J55pyJ5Lik5Liq6YeN6KaB55qE6IGM6LSj77ya5ZCO56uv5Lqk5LqS44CB5pWw5o2u5a2Y5YKo44CCXHJcbiAqIFJlcG9zaXRvcnnkuK3lrZjlgqjnmoTmlbDmja7mmK9FbnRpdHnnsbvlnovvvIzlj6/ku6XpgJrov4dBUEnlr7nmlbDmja7ov5vooYzkv67mlLnmiJbliKDpmaTjgILnlLHkuo5SZXBvc2l0b3J55ZKMQmluZGluZ0RhdGHnm7jkupLnm5HlkKzvvIzlr7nmlbDmja7ku5PlupPnmoTmk43kvZzmnIDnu4jkvJrpgJrov4dCaW5kaW5nRGF0YeabtOaWsOWIsOeVjOmdouS4iuOAglxyXG4gKiBcclxuICogIyMg5a6e5L2T5pON5L2cXHJcbiAqIOWunuS9k+aTjeS9nOS7heWvuVJlcG9zaXRvcnnmnKzlnLDlt7Lnu4/lrZjlnKjnmoTmlbDmja7ov5vooYzmk43kvZzvvIzkuI3kvJrlj5HpgIHor7fmsYLjgIJcclxuICogXHJcbiAqIC0g6YCa6L+H5Li76ZSu6I635Y+W5a6e5L2TXHJcbiAqIFxyXG4gKiAgIGBgYGphdmFzY3JpcHRcclxuICogICAgdGhpcy5yZXBvc2l0b3J5LmVudGl0eUNvbGxlY3Rpb24uZ2V0RW50aXR5QnlJZChcImlkXCIpO1xyXG4gKiAgIGBgYFxyXG4gKiBcclxuICogLSDliKDpmaTlrp7kvZPmlbDmja5cclxuICogXHJcbiAqICAgYGBgamF2YXNjcmlwdFxyXG4gKiAgIHRoaXMucmVwb3NpdG9yeS5lbnRpdHlDb2xsZWN0aW9uLnJlbW92ZUVudGl0eUJ5SWQoXCJpZFwiKVxyXG4gKiAgIGBgYFxyXG4gKiBcclxuICogLSDmuIXnqbrmiYDmnInlrp7kvZNcclxuICogXHJcbiAqICAgYGBgamF2YXNjcmlwdFxyXG4gKiAgIHRoaXMucmVwb3NpdG9yeS5lbnRpdHlDb2xsZWN0aW9uLmNsZWFyKCk7XHJcbiAqICAgYGBgXHJcbiAqIFxyXG4gKiAtIOWwhuWunuS9k+aVsOaNrui9rOaNouS4umpzb27moLzlvI9cclxuICogXHJcbiAqICAgYGBgamF2YXNjcmlwdFxyXG4gKiAgIHRoaXMucmVwb3NpdG9yeS5lbnRpdHlDb2xsZWN0aW9uLnRvSlNPTigpO1xyXG4gKiAgIGBgYFxyXG4gKiBcclxuICogLSDmt7vliqDlrp7kvZNcclxuICogXHJcbiAqICAgYGBgamF2YXNjcmlwdFxyXG4gKiAgIHRoaXMucmVwb3NpdG9yeS5lbnRpdHlDb2xsZWN0aW9uLmFkZEVudGl0eShlbnRpdHk6VCk7XHJcbiAqICAgYGBgXHJcbiAqIC0g5re75Yqg5a2Q6KGo5a6e5L2TXHJcbiAqIFxyXG4gKiAgIGBgYGphdmFzY3JpcHRcclxuICogICBjb25zdCBiZWZSZXBvc2l0b3J5ID0gdGhpcy5yZXBvc2l0b3J5IGFzIEJlZlJlcG9zaXRvcnk8YW55PjtcclxuICogICBjb25zdCBlbnRpdHlNYW5hZ2VyID0gYmVmUmVwb3NpdG9yeS5lbnRpdHlNYW5hZ2VyO1xyXG4gKiAgIGVudGl0eU1hbmFnZXIuYXBwZW5kRW50aXR5QnlQYXRoKFwiL+S4u+WunuS9k0lkL+WtkOihqOWQjXNcIix75a2Q6KGoSlNPTuaVsOaNrn0pO1xyXG4gKiAgIGBgYFxyXG4gKiAtIOaJuemHj+a3u+WKoOWunuS9k1xyXG4gKiBcclxuICogICBgYGBqYXZhc2NyaXB0XHJcbiAqICAgdGhpcy5yZXBvc2l0b3J5LmVudGl0eUNvbGxlY3Rpb24uYWRkRW50aXRpZXMoZW50aXRpZXM6VFtdKVxyXG4gKiAgIGBgYFxyXG4gKiAgIFxyXG4gKiAtIOaJuemHj+a3u+WKoOWtkOihqOWunuS9k1xyXG4gKiBcclxuICogICBgYGBqYXZhc2NyaXB0XHJcbiAqICAgY29uc3QgYmVmUmVwb3NpdG9yeSA9IHRoaXMucmVwb3NpdG9yeSBhcyBCZWZSZXBvc2l0b3J5PGFueT47XHJcbiAqICAgY29uc3QgZW50aXR5TWFuYWdlciA9IGJlZlJlcG9zaXRvcnkuZW50aXR5TWFuYWdlcjtcclxuICogICBjb25zdCBjaGlsZHJlbkVudGl0aWVzID0gZW50aXR5TWFuYWdlci5jcmVhdGVFbnRpdGllc0J5UGF0aChbXCLkuLvlrp7kvZNJZFwiLFwi5a2Q6KGo5ZCNc1wiXSwgZW50aXR5TGlzdERhdGE6IGFueVtdKVxyXG4gKiAgIGVudGl0eU1hbmFnZXIuYXBwZW5kRW50aXRpZXNCeVBhdGgoW1wi5Li75a6e5L2TSWRcIixcIuWtkOihqOWQjXNcIl0sY2hpbGRyZW5FbnRpdGllcyk7XHJcbiAqICAgYGBgXHJcbiAqIFxyXG4gKiAtIOaJuemHj+WKoOi9veWunuS9k1xyXG4gKiBcclxuICogICBgYGBqYXZhc2NyaXB0XHJcbiAqICAgdGhpcy5yZXBvc2l0b3J5LmVudGl0eUNvbGxlY3Rpb24ubG9hZEVudGl0aWVzKGVudGl0aWVzOlRbXSk7XHJcbiAqICAgYGBgXHJcbiAqIFxyXG4gKiAgID4g5Yqg6L295a6e5L2T5Lya5bCG5pys5Zyw5LuT5bqT5pWw5o2u572u5Li65Yqg6L2955qE5a6e5L2T44CCXHJcbiAqIFxyXG4gKiAtIOWIm+W7uuWunuS9k1xyXG4gKiBcclxuICogICBgYGBqYXZhc2NyaXB0XHJcbiAqICAgdGhpcy5yZXBvc2l0b3J5LmJ1aWxkRW50aXR5KEpTT07mlbDmja4pO1xyXG4gKiAgIGBgYFxyXG4gKiBcclxuICogLSDmibnph4/liJvlu7rlrp7kvZNcclxuICogXHJcbiAqICAgYGBgamF2YXNjcmlwdFxyXG4gKiAgIHRoaXMucmVwb3NpdG9yeS5idWlsZEVudGl0aWVzKEpTT07mlbDmja4pO1xyXG4gKiAgIGBgYFxyXG4gKiBcclxuICogLSDojrflj5blrZDooajmlbDmja5cclxuICogXHJcbiAqICAgYGBgamF2YXNjcmlwdFxyXG4gKiAgIGNvbnN0IGJlZlJlcG9zaXRvcnkgPSB0aGlzLnJlcG9zaXRvcnkgYXMgQmVmUmVwb3NpdG9yeTxhbnk+O1xyXG4gKiAgIGNvbnN0IGVudGl0eU1hbmFnZXIgPSBiZWZSZXBvc2l0b3J5LmVudGl0eU1hbmFnZXI7XHJcbiAqICAgZW50aXR5TWFuYWdlci5nZXRFbnRpdHlCeVBhdGgoW1wi5Li75a6e5L2TSWRcIixcIuWtkOihqOWQjVwiLFwi5a2Q6KGoaWRcIl0pO1xyXG4gKiAgIGBgYFxyXG4gKiBcclxuICogICAhPiAqKuazqOaEjyoqIGVudGl0eU1hbmFnZXLlsZ7mgKfku4XlrZjlnKjkuo5CZWZSZXBvc2l0b3J557G777yM5Zug5q2k5Zyo5L2/55SoRW50aXR5TWFuYWdlcuaXtuW6lOWFiOWwhlJlcG9zaXRvcnnovazmjaLkuLpCZWZSZXBvc2l0b3J5XHJcbiAqIFxyXG4gKiAtIOiOt+WPluaJgOacieWtkOihqOaVsOaNrlxyXG4gKiBcclxuICogICBgYGBqYXZhc2NyaXB0XHJcbiAqICAgY29uc3QgYmVmUmVwb3NpdG9yeSA9IHRoaXMucmVwb3NpdG9yeSBhcyBCZWZSZXBvc2l0b3J5PGFueT47XHJcbiAqICAgY29uc3QgZW50aXR5TWFuYWdlciA9IGJlZlJlcG9zaXRvcnkuZW50aXR5TWFuYWdlcjtcclxuICogICBlbnRpdHlNYW5hZ2VyLmdldEVudGl0aWVzQnlQYXRoKFtcIuS4u+WunuS9k0lkXCIsXCLlrZDooajlkI1cIl0pO1xyXG4gKiAgIGBgYFxyXG4gKiBcclxuICogICA+IEVudGl0eU1hbmFnZXLkuI3ku4Xlj6/ku6Xojrflj5blrZDooajmlbDmja7vvIzlkIzmoLflj6/ku6Xojrflj5bkuLvooajmlbDmja7jgIJcclxuICogICA+XHJcbiAqICAgPiBgYGBqYXZhc2NyaXB0XHJcbiAqICAgPiBlbnRpdHlNYW5hZ2VyLmdldEVudGl0aWVzQnlQYXRoKFtcIuS4u+WunuS9k0lkXCJdKTtcclxuICogICA+IGBgYFxyXG4gKiAgIFxyXG4gKiAtIOiOt+WPluWunuS9k+WxnuaAp+WAvFxyXG4gKiBcclxuICogICBgYGBqYXZhc2NyaXB0XHJcbiAqICAgY29uc3QgZW50aXR5ID0gdGhpcy5yZXBvc2l0b3J5LmVudGl0eUNvbGxlY3Rpb24uZ2V0RW50aXR5QnlJZChcImlkXCIpO1xyXG4gKiAgIGNvc250IG5hbWUgPSBlbnRpdHlbJ25hbWUnXTtcclxuICogICAvLyDmiJbogIVcclxuICogICBjb25zdCBlbnRpdHk6IGFueSA9IHRoaXMucmVwb3NpdG9yeS5lbnRpdHlDb2xsZWN0aW9uLmdldEVudGl0eUJ5SWQoXCJpZFwiKTtcclxuICogICBjb3NudCBuYW1lID0gZW50aXR5Lm5hbWU7XHJcbiAqICAgYGBgXHJcbiAqIFxyXG4gKiAjIyDlkI7nq6/kuqTkupJcclxuICogXHJcbiAqIOKAi1x06YCa6L+H5o6l5Y+j5pON5L2c5ZCO56uv5pWw5o2u77yM5Lya55u05o6l5a+55pWw5o2u5Lqn55Sf5b2x5ZON44CCXHJcbiAqIFxyXG4gKiAtIOabtOaWsOWunuS9k+aVsOaNrlxyXG4gKiBcclxuICogICBgYGBqYXZhc2NyaXB0XHJcbiAqICAgdGhpcy5yZXBvc2l0b3J5LnVwZGF0ZUJ5SWQoJ2lkJyk7XHJcbiAqICAgYGBgXHJcbiAqIFxyXG4gKiAtIOWIoOmZpOWunuS9k1xyXG4gKiBcclxuICogICBgYGBqYXZhc2NyaXB0XHJcbiAqICAgdGhpcy5yZXBvc2l0b3J5LnJlbW92ZUJ5SWQoXCJpZFwiKTtcclxuICogICBgYGBcclxuICogXHJcbiAqIC0g5om56YeP5Yig6Zmk5a6e5L2TXHJcbiAqIFxyXG4gKiAgIGBgYGphdmFzY3JpcHRcclxuICogICB0aGlzLnJlcG9zaXRvcnkucmVtb3ZlQnlJZHMoaWRzOnN0cmluZ1tdKVxyXG4gKiAgIGBgYFxyXG4gKiBcclxuICogLSDliKDpmaTkuIvnuqfooajmlbDmja5cclxuICogXHJcbiAqICAgYGBgamF2YXNjcmlwdFxyXG4gKiAgIHRoaXMucmVwb3NpdG9yeS5yZW1vdmVCeVBhdGgoWyfkuLvooahJZCcsJ+WtkOihqOWQjScsJ+WtkOihqElkJ10pXHJcbiAqICAgYGBgXHJcbiAqIFxyXG4gKiAtIOaWsOWinuS4u+WunuS9k1xyXG4gKiBcclxuICogICBgYGBqYXZhc2NyaXB0XHJcbiAqICAgdGhpcy5yZXBvc2l0b3J5LmFwcGVuZCgpO1xyXG4gKiAgIGBgYFxyXG4gKiBcclxuICogLSDmlrDlop7lrZDlrp7kvZNcclxuICogXHJcbiAqICAgYGBgamF2YXNjcmlwdFxyXG4gKiAgIHRoaXMucmVwb3NpdG9yeS5hcHBlbmRCeVBhdGgoWyfkuLvooahpZCcsJ+WtkOihqOWQjSddKTtcclxuICogICBgYGBcclxuICogXHJcbiAqIC0g5Yqg6L295a6e5L2T5pWw5o2uXHJcbiAqIFxyXG4gKiAgIGBgYGphdmFzY3JpcHRcclxuICogICB0aGlzLnJlcG9zaXRvcnkuZ2V0QnlJZCgnaWQnKTtcclxuICogICBgYGBcclxuICogXHJcbiAqIC0g6I635Y+W5Li76KGo5pWw5o2uXHJcbiAqIFxyXG4gKiAgIGBgYGphdmFzY3JpcHRcclxuICogICB0aGlzLnJlcG9zaXRvcnkuZ2V0RW50aXRpZXMoZmlsdGVyOiBhbnlbXSwgc29ydHM6IGFueVtdLCBwYWdlU2l6ZTogbnVtYmVyIHwgbnVsbCwgcGFnZUluZGV4OiBudW1iZXIgfCBudWxsKVxyXG4gKiAgIFxyXG4gKiAgIGBgYFxyXG4gKiBcclxuICogICA+IHBhZ2VTaXpl44CBcGFnZUluZGV45Y+v5Lul5LiN5Lyg44CCXHJcbiAqIFxyXG4gKiAtIOiOt+WPluS4u+ihqOaVsOaNru+8iFBPU1Tmlrnms5XvvIlcclxuICogXHJcbiAqICAgYGBgamF2YXNjcmlwdFxyXG4gKiAgIHRoaXMucmVwb3NpdG9yeS5maWx0ZXIoZmlsdGVyOiBhbnlbXSwgc29ydHM6IGFueVtdLCBwYWdlU2l6ZTogbnVtYmVyIHwgbnVsbCwgcGFnZUluZGV4OiBudW1iZXIgfCBudWxsKVxyXG4gKiAgIGBgYFxyXG4gKiBcclxuICogLSDmj5DkuqTmjIflrprlrp7kvZPlj5jmm7TliLDlkI7nq69cclxuICogXHJcbiAqICAgYGBgamF2YXNjcmlwdFxyXG4gKiAgIHRoaXMucmVwb3NpdG9yeS51cGRhdGVDaGFuZ2VzQnlJZChcImlkXCIpO1xyXG4gKiAgIGBgYFxyXG4gKiBcclxuICogLSDmj5DkuqTmiYDmnInlj5jmm7RcclxuICogXHJcbiAqICAgYGBgamF2YXNjcmlwdFxyXG4gKiAgIHRoaXMucmVwb3NpdG9yeS51cGRhdGVBbGxDaGFuZ2VzKCk7XHJcbiAqICAgYGBgXHJcbiAqIFxyXG4gKiAtIOW6lOeUqOWPmOabtO+8iOS/neWtmO+8iVxyXG4gKiBcclxuICogICBgYGBqYXZhc2NyaXB0XHJcbiAqICAgdGhpcy5yZXBvc2l0b3J5LmFwcGx5Q2hhbmdlcygpO1xyXG4gKiAgIGBgYFxyXG4gKiBcclxuICogLSDlj5bmtojlj5jmm7RcclxuICogXHJcbiAqICAgYGBgamF2YXNjcmlwdFxyXG4gKiAgIHRoaXMucmVwb3NpdG9yeS5jYW5jZWxDaGFuZ2VzKCk7XHJcbiAqICAgYGBgXHJcbiAqIFxyXG4gKiAtIOa4hemZpFJlcG9zaXRvcnnmiYDmnInlj5jmm7RcclxuICogXHJcbiAqICAgYGBgamF2YXNjcmlwdFxyXG4gKiAgIGNvbnN0IGJlZlJlcG9zaXRvcnkgPSB0aGlzLnJlcG9zaXRvcnkgYXMgQmVmUmVwb3NpdG9yeTxhbnk+O1xyXG4gKiAgIGJlZlJlcG9zaXRvcnkuZW50aXR5TWFuYWdlci5jbGVhckFsbEVudGl0eUNoYW5nZXMoKTtcclxuICogICBgYGBcclxuICogICBcclxuICogLSDmibnph4/mlrDlop7lrZDooajmlbDmja5cclxuICogICBgYGBqYXZhc2NyaXB0XHJcbiAqICAgdGhpcy5yZXBvc2l0b3J5LmJhdGNoQXBwZW5kQnlQYXRoKHBhdGg6IHN0cmluZywgZGVmYXVsdFZhbHVlczogQXJyYXk8YW55Pik7XHJcbiAqICAgYGBgXHJcbiAqICAgXHJcbiAqICAgPiBwYXRoIGBzdHJpbmdg77yaL+S4u+ihqGlkL+S7juihqOWJjeerr25vZGVDb2Rl77yM5aaC5p6cLzEvb3JkZXJzXHJcbiAqICAgPlxyXG4gKiAgID4gZGVmYXVsdFZhbHVlcyBgQXJyYXk8YW55PmDvvJrmlrDlop7ku47ooajml7bnmoTpu5jorqTlgLzvvIzmlbDnu4TvvIzlhYPntKDkuLrlr7nosaHvvIxrZXnkuLrlrZfmrrXlkI3vvIx2YWx1ZeS4uum7mOiupOWAvOOAglxyXG4gKiAgIFxyXG4gKiAtIOaJuemHj+WIoOmZpOWtkOihqOaVsOaNrlxyXG4gKiAgIFxyXG4gKiAgIGBgYGphdmFzY3JpcHRcclxuICogICB0aGlzLnJlcG9zaXRvcnkuYmF0Y2hSZW1vdmVCeVBhdGgocGF0aDogc3RyaW5nLCBpZHM6IHN0cmluZyk7XHJcbiAqICAgYGBgXHJcbiAqICAgXHJcbiAqICAgPiBwYXRoIGBzdHJpbmdg77yaIC/kuLvooahpZC/ku47ooajliY3nq69ub2RlQ29kZe+8jOWmguaenC8xL29yZGVyc1xyXG4gKiAgID5cclxuICogICA+IGlkcyBgc3RyaW5nYCDvvJropoHliKDpmaTnmoTlrZDooajmlbDmja5pZO+8jOagvOW8j+S4umBpZDEsaWQyLGlkM2BcclxuICovXHJcbkBJbmplY3RhYmxlKClcclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFJlcG9zaXRvcnk8VCBleHRlbmRzIEVudGl0eT4gaW1wbGVtZW50cyBJRGlzcG9zYWJsZSwgT25EZXN0cm95IHtcclxuXHJcbiAgLy8gI3JlZ2lvbiDnp4HmnInlsZ7mgKdcclxuXHJcbiAgLyoqXHJcbiAgICog5ZCN56ewXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBpbm5lck5hbWU6IHN0cmluZztcclxuXHJcbiAgLy8gI2VuZHJlZ2lvblxyXG5cclxuICAvLyAjcmVnaW9uIOWFrOacieWxnuaAp++8iOWFseacieWxnuaAp+S4jeW6lOivpeebtOaOpeaatOmcsu+8jOW+heWMheijhe+8iVxyXG5cclxuICAvKipcclxuICAgKiBBUEnlnLDlnYBcclxuICAgKi9cclxuICBwdWJsaWMgYXBpVXJpOiBzdHJpbmc7XHJcblxyXG4gIC8qKlxyXG4gICAqIOWunuS9k+exu+Wei1xyXG4gICAqL1xyXG4gIHB1YmxpYyBlbnRpdHlUeXBlOiBhbnk7XHJcblxyXG5cclxuICAvKipcclxuICAgKiDlrp7kvZPnsbvlnovkv6Hmga9cclxuICAgKiBAdG9kb++8muWunuS9k+WxguW6lOivpeS6i+WFiOS4gOS4qkVudGl0eVR5cGVJbmZv77yM5bm257un5om/RGF0YVR5cGVJbmZv44CCXHJcbiAgICovXHJcbiAgcHVibGljIGVudGl0eVR5cGVJbmZvOiBEYXRhVHlwZUluZm87XHJcblxyXG4gIC8qKlxyXG4gICAqIOWunuS9k+mbhuWQiFxyXG4gICAqL1xyXG4gIHB1YmxpYyBlbnRpdHlDb2xsZWN0aW9uOiBFbnRpdHlDb2xsZWN0aW9uPFQ+O1xyXG5cclxuICAvKipcclxuICAgKiDnlKjmiLfliIbpobXphY3nva7kv6Hmga9cclxuICAgKi9cclxuICBwdWJsaWMgcGFnaW5hdGlvbkluZm86IGFueSA9IG51bGw7XHJcblxyXG4gIC8qKlxyXG4gICAqIOaVsOaNruWPmOabtOWOhuWPsu+8iOS7hemSiOWvueS4u+ihqOWinuWKoOOAgeWQhOenjeihqOWIoOmZpO+8iVxyXG4gICAqL1xyXG4gIHB1YmxpYyBkYXRhQ2hhbmdlSGlzdG9yeTogRGF0YUNoYW5nZUhpc3Rvcnk7XHJcblxyXG4gIC8qKlxyXG4gICAqIOaOkuW6j+adoeS7tueuoeeQhuWZqFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzb3J0Q29uZGl0aW9uTWFuYWdlcjogU29ydENvbmRpdGlvbk1hbmFnZXI7XHJcbiAgLyoqXHJcbiAgICog6L+H5ruk5p2h5Lu2566h55CG5ZmoXHJcbiAgICovXHJcbiAgcHVibGljIGZpbHRlckNvbmRpdGlvbk1hbmFnZXI6IEZpbHRlckNvbmRpdGlvbk1hbmFnZXI7XHJcbiAgLy8gI2VuZHJlZ2lvblxyXG5cclxuICAvLyAjcmVnaW9uIGdldC9zZXTmlrnms5VcclxuXHJcbiAgLyoqXHJcbiAgICog5a6e5L2T5Li76ZSuXHJcbiAgICovXHJcbiAgcHVibGljIGdldCBwcmltYXJ5S2V5KCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gdGhpcy5lbnRpdHlDb2xsZWN0aW9uLnByaW1hcnlLZXk7XHJcbiAgfVxyXG4gIHB1YmxpYyBnZXQgY2hhbmdlcygpOiBTdWJqZWN0PE1vZGlmaWNhdGlvbj4ge1xyXG4gICAgcmV0dXJuIHRoaXMuZW50aXR5Q29sbGVjdGlvbi5jaGFuZ2VzO1xyXG4gIH1cclxuICAvKipcclxuICAgKiDlrp7kvZPlj5jmm7Tpm4blkIhcclxuICAgKi9cclxuICBwdWJsaWMgZ2V0IGVudGl0eUNvbGxlY3Rpb25DaGFuZ2UoKTogU3ViamVjdDxNb2RpZmljYXRpb24+IHtcclxuICAgIHJldHVybiB0aGlzLmVudGl0eUNvbGxlY3Rpb24uY29sbGVjdGlvbkNoYW5nZWQ7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5blkI3np7BcclxuICAgKi9cclxuICBwdWJsaWMgZ2V0IG5hbWUoKTogc3RyaW5nIHtcclxuXHJcbiAgICAvLyAx44CB6ICB6KGo5Y2V5rKh5pyJbmFtZeWxnuaAp1xyXG4gICAgLy8gMuOAgeS4jeiDveS9v+eUqGNvbnN0cnVjb3RyLm5hbWXvvIzljovnvKnohJrmnKzkvJrmiopuYW1l5pS55o6J77yM5oiW6ICF5Y6L57yp5oiQ55u45ZCM55qE5ZCN56ew77yI55uu5YmN5Y+R546w5bey55+l77yJXHJcbiAgICBpZiAoIXRoaXMuaW5uZXJOYW1lKSB7XHJcbiAgICAgIGNvbnN0IGd1aWQgPSBVSUQuY3JlYXRlKCk7XHJcbiAgICAgIHRoaXMuaW5uZXJOYW1lID0gYFJlcG9zaXRvcnlfJHtndWlkfWA7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuaW5uZXJOYW1lO1xyXG4gIH1cclxuICAvKipcclxuICAgKiDorr7nva7lkI3np7BcclxuICAgKi9cclxuICBwdWJsaWMgc2V0IG5hbWUodmFsdWU6IHN0cmluZykge1xyXG4gICAgdGhpcy5pbm5lck5hbWUgPSB2YWx1ZTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBwYWdpbmF0aW9uTWFuYWdlcjogUGFnaW5hdGlvbk1hbmFnZXI8VD47XHJcbiAgcHVibGljIGRlc3Ryb3kkOiBTdWJqZWN0PGFueT47XHJcbiAgLy8gI2VuZHJlZ2lvblxyXG5cclxuICAvKipcclxuICAgKiDmnoTpgKDlh73mlbBcclxuICAgKi9cclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMucmVhZE1ldGFkYXRhKCk7XHJcbiAgICBpZiAodGhpcy5lbnRpdHlUeXBlKSB7XHJcbiAgICAgIHRoaXMuZW50aXR5VHlwZUluZm8gPSBuZXcgRGF0YVR5cGVJbmZvKHRoaXMuZW50aXR5VHlwZSk7XHJcbiAgICAgIHRoaXMuZW50aXR5Q29sbGVjdGlvbiA9IG5ldyBFbnRpdHlDb2xsZWN0aW9uPFQ+KHRoaXMuZW50aXR5VHlwZSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmRhdGFDaGFuZ2VIaXN0b3J5ID0gbmV3IERhdGFDaGFuZ2VIaXN0b3J5KCk7XHJcbiAgICB0aGlzLnNvcnRDb25kaXRpb25NYW5hZ2VyID0gbmV3IFNvcnRDb25kaXRpb25NYW5hZ2VyKCk7XHJcbiAgICB0aGlzLmZpbHRlckNvbmRpdGlvbk1hbmFnZXIgPSBuZXcgRmlsdGVyQ29uZGl0aW9uTWFuYWdlcigpO1xyXG4gICAgdGhpcy5kZXN0cm95JCA9IG5ldyBTdWJqZWN0PGFueT4oKTtcclxuICB9XHJcbiAgZGlzcG9zZShvcHRpb25zPzogYW55KSB7XHJcblxyXG4gICAgdGhpcy5wYWdpbmF0aW9uTWFuYWdlciA9IG51bGw7XHJcbiAgICBpZiAodGhpcy5kZXN0cm95JCkge1xyXG4gICAgICB0aGlzLmRlc3Ryb3kkLm5leHQoKTtcclxuICAgICAgdGhpcy5kZXN0cm95JC5jb21wbGV0ZSgpO1xyXG4gICAgICB0aGlzLmRlc3Ryb3kkID0gbnVsbDtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmVudGl0eUNvbGxlY3Rpb24pIHtcclxuICAgICAgdGhpcy5lbnRpdHlDb2xsZWN0aW9uLnJlc2V0KGZhbHNlKTtcclxuICAgICAgdGhpcy5lbnRpdHlDb2xsZWN0aW9uID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgfVxyXG4gIG5nT25EZXN0cm95KCk6IHZvaWQge1xyXG4gICAgdGhpcy5kaXNwb3NlKCk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgdXBkYXRlRW50aXR5VHlwZShlbnRpdHlUeXBlOiBhbnkpIHtcclxuICAgIHRoaXMuZW50aXR5VHlwZSA9IGVudGl0eVR5cGU7XHJcbiAgICB0aGlzLmVudGl0eVR5cGVJbmZvID0gbmV3IERhdGFUeXBlSW5mbyh0aGlzLmVudGl0eVR5cGUpO1xyXG4gICAgdGhpcy5lbnRpdHlDb2xsZWN0aW9uID0gbmV3IEVudGl0eUNvbGxlY3Rpb248VD4odGhpcy5lbnRpdHlUeXBlKTtcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiDor7vlj5blhYPmlbDmja5cclxuICAgKi9cclxuICBwcml2YXRlIHJlYWRNZXRhZGF0YSgpIHtcclxuICAgIGNvbnN0IHJlcG9zaXRvcnlNZXRhZGF0YTogTmdSZXBvc2l0b3J5ID0gTWV0YWRhdGFVdGlsLmdldENsYXNzTWV0YWRhdGFCeU5hbWUodGhpcy5jb25zdHJ1Y3RvciwgJ05nUmVwb3NpdG9yeScpO1xyXG4gICAgaWYgKHJlcG9zaXRvcnlNZXRhZGF0YSkge1xyXG4gICAgICAvLyBBUEnlnLDlnYBcclxuICAgICAgdGhpcy5hcGlVcmkgPSByZXBvc2l0b3J5TWV0YWRhdGEuYXBpVXJsO1xyXG5cclxuICAgICAgLy8g5a6e5L2T57G75Z6LXHJcbiAgICAgIHRoaXMuZW50aXR5VHlwZSA9IHJlcG9zaXRvcnlNZXRhZGF0YS5lbnRpdHlUeXBlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIC8vIEFQSeWcsOWdgFxyXG4gICAgLy8gdGhpcy5hcGlVcmkgPSByZXBvc2l0b3J5TWV0YWRhdGEuYXBpVXJsO1xyXG5cclxuICAgIC8vIC8vIOWunuS9k+exu+Wei1xyXG4gICAgLy8gdGhpcy5lbnRpdHlUeXBlID0gcmVwb3NpdG9yeU1ldGFkYXRhLmVudGl0eVR5cGU7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDliJ3lp4vljJbliIbpobXphY3nva5cclxuICAgKiBAcGFyYW0gY29uZmlnIOeUqOaIt+WIhumhtemFjee9rlxyXG4gICAqL1xyXG4gIHNldFBhZ2luYXRpb25Db25maWcoY29uZmlnOiBhbnkpIHtcclxuICAgIHRoaXMucGFnaW5hdGlvbk1hbmFnZXIgPSBuZXcgUGFnaW5hdGlvbk1hbmFnZXIodGhpcy5lbnRpdHlUeXBlLCBjb25maWcpO1xyXG4gICAgY29uc3QgeyBwYWdlU2l6ZSA9IDAgfSA9IHRoaXMucGFnaW5hdGlvbk1hbmFnZXIuZ2V0UGFnaW5hdGlvbkNvbmZpZ0J5UGF0aCgnLycpIHx8IHt9O1xyXG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOiBtYXgtbGluZS1sZW5ndGhcclxuICAgIHRoaXMuZW50aXR5Q29sbGVjdGlvbi5wYWdpbmF0aW9uSW5mbyA9IE9iamVjdC5hc3NpZ24oeyBwYWdlU2l6ZSB9LCB0aGlzLnBhZ2luYXRpb25NYW5hZ2VyLnBhZ2luYXRpb24sIHRoaXMuZW50aXR5Q29sbGVjdGlvbi5wYWdpbmF0aW9uSW5mbyk7XHJcbiAgICAvLyDml6DpnIDlho3ljZXni6zorr7nva7kuIDmrKFwYWdlU2l6Ze+8jOWHj+WwkeS4gOasoeWPmOabtFxyXG4gICAgLy8gdGhpcy5lbnRpdHlDb2xsZWN0aW9uLnBhZ2VTaXplID0gcGFnZVNpemU7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIOmHjee9rueKtuaAgVxyXG4gICAqL1xyXG4gIHB1YmxpYyByZXNldCgpOiB2b2lkIHtcclxuICAgIHRoaXMuZW50aXR5Q29sbGVjdGlvbi5yZXNldCgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5Yib5bu65a6e5L2TXHJcbiAgICovXHJcbiAgcHVibGljIGJ1aWxkRW50aXR5KGRhdGE6IGFueSk6IFQge1xyXG4gICAgY29uc3QgZW50aXR5ID0gY3JlYXRlRW50aXR5PFQ+KHRoaXMuZW50aXR5VHlwZSwgZGF0YSk7XHJcbiAgICByZXR1cm4gZW50aXR5O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5om56YeP5Yib5bu65a6e5L2TXHJcbiAgICovXHJcbiAgcHVibGljIGJ1aWxkRW50aXRpZXMobGlzdERhdGE6IGFueVtdKTogVFtdIHtcclxuICAgIGNvbnN0IGVudGl0aWVzOiBUW10gPSBjcmVhdGVFbnRpdGllczxUPih0aGlzLmVudGl0eVR5cGUsIGxpc3REYXRhKTtcclxuICAgIHJldHVybiBlbnRpdGllcztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiOt+WPluWunuS9k+WIl+ihqFxyXG4gICAqIEBwYXJhbSBmaWx0ZXJzICAgIOi/h+a7pOadoeS7tlxyXG4gICAqIEBwYXJhbSBzb3J0cyAgICAgIOaOkuW6j+adoeS7tlxyXG4gICAqIEBwYXJhbSBwYWdpbmF0aW9uIOWIhumhteS/oeaBr1xyXG4gICAqL1xyXG4gIGFic3RyYWN0IGdldEVudGl0aWVzKGZpbHRlcjogYW55W10sIHNvcnRzOiBhbnlbXSwgcGFnZVNpemU6IG51bWJlciB8IG51bGwsIHBhZ2VJbmRleDogbnVtYmVyIHwgbnVsbCk6IE9ic2VydmFibGU8VFtdPjtcclxuICAvKipcclxuICAgKiDojrflj5blrp7kvZPliJfooahcclxuICAgKiBAcGFyYW0gZmlsdGVyIOi/h+a7pOadoeS7tlxyXG4gICAqIEBwYXJhbSBzb3J0cyDmjpLluo/mnaHku7ZcclxuICAgKiBAcGFyYW0gcGFnZVNpemUg5YiG6aG15aSn5bCPXHJcbiAgICogQHBhcmFtIHBhZ2VJbmRleCDlvZPliY3liIbpobVcclxuICAgKi9cclxuICBhYnN0cmFjdCBmaWx0ZXIoZmlsdGVyPzogYW55W10sIHNvcnRzPzogYW55W10sIHBhZ2VTaXplPzogbnVtYmVyIHwgbnVsbCwgcGFnZUluZGV4PzogbnVtYmVyIHwgbnVsbCk6IE9ic2VydmFibGU8VFtdPjtcclxuICAvKipcclxuICAgKiDojrflj5blrp7kvZPliJfooahcclxuICAgKi9cclxuICBhYnN0cmFjdCBnZXRMaXN0KCk6IE9ic2VydmFibGU8VFtdPjtcclxuICAvKipcclxuICAgKiDmoLnmja5pZOiOt+WPluWunuS9k1xyXG4gICAqIEBwYXJhbSBpZCDlrp7kvZPmoIfor4ZcclxuICAgKi9cclxuICBhYnN0cmFjdCBnZXRCeUlkKGlkOiBzdHJpbmcpOiBPYnNlcnZhYmxlPFQ+O1xyXG4gIC8qKlxyXG4gICAqIOagueaNrmlk6I635Y+W5a6e5L2TXHJcbiAgICogQHBhcmFtIGlkIOS4u+WunuS9k2lkXHJcbiAgICovXHJcbiAgYWJzdHJhY3QgZ2V0RW50aXR5QnlJZChpZDogc3RyaW5nKTogT2JzZXJ2YWJsZTxUPjtcclxuICAvKipcclxuICAgKiDliIbpobXmn6Xor6Lku47ooagv5LuO5LuO6KGo5pWw5o2uXHJcbiAgICogQHBhcmFtIHBhdGgg57uR5a6a6Lev5b6EXHJcbiAgICogQHBhcmFtIGlkcyDnu5Hlrprot6/lvoTlr7nlupTnmoTkuLvplK5cclxuICAgKiBAcGFyYW0gZmlsdGVyIOi/h+a7pOadoeS7tlxyXG4gICAqIEBwYXJhbSBzb3J0IOaOkuW6j1xyXG4gICAqL1xyXG4gIGFic3RyYWN0IHF1ZXJ5Q2hpbGQocGF0aHM6IHN0cmluZ1tdLCBwYWdlSW5kZXg6IG51bWJlciwgcGFnZVNpemU6IG51bWJlciwgZmlsdGVyPzogc3RyaW5nLCBzb3J0Pzogc3RyaW5nKTogT2JzZXJ2YWJsZTxUW10+O1xyXG4gIC8qKlxyXG4gICAqIOagueaNrmlk5pu05paw5a6e5L2TXHJcbiAgICogQHBhcmFtIGlkIOWunuS9k2lkXHJcbiAgICovXHJcbiAgYWJzdHJhY3QgdXBkYXRlQnlJZChpZDogc3RyaW5nKTogT2JzZXJ2YWJsZTxUPjtcclxuICAvKipcclxuICAgKiDmm7TmlrDlrp7kvZPmlbDmja4o5a2Q6KGo5YiG6aG1KVxyXG4gICAqIEBwYXJhbSBpZCDlrp7kvZPkuLvplK5cclxuICAgKi9cclxuICBhYnN0cmFjdCB1cGRhdGVFbnRpdHlCeUlkKGlkOiBzdHJpbmcpOiBPYnNlcnZhYmxlPFQ+O1xyXG4gIC8qKlxyXG4gICAqIOWIm+W7uuaWsOWunuS9k++8jOWwhuivpeWunuS9k+WKoOi9veWIsOWIl+ihqFxyXG4gICAqL1xyXG4gIGFic3RyYWN0IGNyZWF0ZSgpOiBPYnNlcnZhYmxlPGFueT47XHJcblxyXG4gIC8vIC8qKlxyXG4gIC8vICAqIOWIm+W7uuWQjuS7o+WunuS9k++8jOWwhuivpeWunuS9k+WKoOi9veWIsOWQjuS7o+WIl+ihqO+8iOaaguaXoOivpeWcuuaZr++8iVxyXG4gIC8vICAqIEBwYXJhbSBwYXRoIOi3r+W+hFxyXG4gIC8vICAqL1xyXG4gIC8vIGFic3RyYWN0IGNyZWF0ZUJ5UGF0aChwYXRoOiBzdHJpbmcpO1xyXG5cclxuICAvKipcclxuICAgKiDliJvlu7rmlrDlrp7kvZPvvIzlubbov73liqDliLDlrp7kvZPliJfooahcclxuICAgKi9cclxuICBhYnN0cmFjdCBhcHBlbmQoKTogT2JzZXJ2YWJsZTxhbnk+O1xyXG5cclxuICAvKipcclxuICAgKiDliJvlu7rmlrDnmoTlrZDlrp7kvZPvvIzlubbov73liqDliLDlrp7kvZPliJfooahcclxuICAgKiBAcGFyYW0gcGF0aCDlrp7kvZPot6/lvoRcclxuICAgKi9cclxuICBhYnN0cmFjdCBhcHBlbmRCeVBhdGgocGF0aDogc3RyaW5nKTogT2JzZXJ2YWJsZTxhbnk+O1xyXG4gIC8qKlxyXG4gICAqIOWGjeaMh+WumuS9jee9ruaPkuWFpeaVsOaNrlxyXG4gICAqL1xyXG4gIGFic3RyYWN0IGluc2VydChwb3NpdGlvbjogMSB8IC0xLCBkZWZhdWx0VmFsdWU/OiBhbnkpOiBPYnNlcnZhYmxlPGFueT47XHJcbiAgLyoqXHJcbiAgICog5Zyo5oyH5a6a5a6e5L2T6Lev5b6E5o+S5YWl5a6e5L2TXHJcbiAgICogQHBhcmFtIHBhdGgg5a6e5L2T6Lev5b6EXHJcbiAgICovXHJcbiAgYWJzdHJhY3QgaW5zZXJ0QnlQYXRoKHBhdGg6IHN0cmluZywgcG9zaXRpb246IDEgfCAtMSk6IE9ic2VydmFibGU8YW55PjtcclxuICAvKipcclxuICAgKiDmoLnmja5pZOWIoOmZpOWvueW6lOWunuS9k1xyXG4gICAqIEBwYXJhbSBpZCDlhoXnoIFcclxuICAgKi9cclxuICBhYnN0cmFjdCByZW1vdmVCeUlkKGlkOiBzdHJpbmcsIGlmU2F2ZT86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPGFueT47XHJcblxyXG4gIC8qKlxyXG4gICAqIOagueaNrmlkc+aJuemHj+WIoOmZpOWunuS9k1xyXG4gICAqIEBwYXJhbSBpZCBpZHNcclxuICAgKiBAcGFyYW0gaWZTYXZlIOaYr+WQpuS/neWtmFxyXG4gICAqIEBkZXByZWNhdGVkIOW3suW6n+W8g++8jOivpeaOpeWPo+S9v+eUqHF1ZXJ5c3RyaW5n5Lyg5Y+C77yM5a2Y5Zyo6LaF6ZW/6Zeu6aKY44CC6K+35L2/55SoYmF0Y2hSZW1vdmXmjqXlj6Pmm7/ku6PjgIJcclxuICAgKi9cclxuICBhYnN0cmFjdCByZW1vdmVCeUlkcyhpZHM6IHN0cmluZ1tdLCBpZlNhdmU/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxhbnk+O1xyXG4gIC8qKlxyXG4gICAqIOagueaNrmlkc+aJuemHj+WIoOmZpOWunuS9k1xyXG4gICAqIEBwYXJhbSBpZHMgaWRzXHJcbiAgICogQHBhcmFtIGlmU2F2ZSDmmK/lkKbkv53lrZhcclxuICAgKi9cclxuICBhYnN0cmFjdCBiYXRjaFJlbW92ZShpZHM6IHN0cmluZ1tdLCBpZlNhdmU/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxhbnk+O1xyXG4gIC8qKlxyXG4gICAqIOagueaNrmlk5Yig6ZmkcGF0aOWvueW6lOeahOWQjuS7o+WunuS9k1xyXG4gICAqL1xyXG4gIGFic3RyYWN0IHJlbW92ZUJ5UGF0aChwYXRoOiBzdHJpbmcsIGlkOiBzdHJpbmcpO1xyXG5cclxuICAvKipcclxuICAgKiDmj5DkuqRpZOWvueW6lOeahOagueWunuS9k+WPmOabtFxyXG4gICAqL1xyXG4gIGFic3RyYWN0IHVwZGF0ZUNoYW5nZXNCeUlkKGlkOiBzdHJpbmcpOiBPYnNlcnZhYmxlPGJvb2xlYW4+O1xyXG5cclxuICAvKipcclxuICAgKiDmj5DkuqRwYXRo5a+55bqU55qE5a6e5L2T5Y+Y5pu0XHJcbiAgICovXHJcbiAgYWJzdHJhY3QgdXBkYXRlQ2hhbmdlc0J5UGF0aChwYXRoOiBzdHJpbmcsIGlkOiBzdHJpbmcpOiBPYnNlcnZhYmxlPGJvb2xlYW4+O1xyXG5cclxuICAvKipcclxuICAgKiDmm7TmlrDmiYDmnInlj5jmm7RcclxuICAgKi9cclxuICBhYnN0cmFjdCB1cGRhdGVBbGxDaGFuZ2VzKCk6IE9ic2VydmFibGU8Ym9vbGVhbj47XHJcblxyXG4gIC8qKlxyXG4gICAqIOW6lOeUqOacjeWKoeWZqOerr+WPmOabtFxyXG4gICAqL1xyXG4gIGFic3RyYWN0IGFwcGx5Q2hhbmdlcygpOiBPYnNlcnZhYmxlPGJvb2xlYW4+O1xyXG5cclxuICAvKipcclxuICAgKiDkv53lrZhpZOWvueW6lOaVsOaNrueahOWPmOabtFxyXG4gICAqL1xyXG4gIGFic3RyYWN0IGFwcGx5Q2hhbmdlc0J5SWQoaWQ6IHN0cmluZyk6IE9ic2VydmFibGU8Ym9vbGVhbj47XHJcblxyXG4gIC8qKlxyXG4gICAqIOWPlua2iOWPmOabtOmbhlxyXG4gICAqL1xyXG4gIGFic3RyYWN0IGNhbmNlbENoYW5nZXMob3B0aW9ucz86IGFueSk6IE9ic2VydmFibGU8Ym9vbGVhbj47XHJcbiAgLyoqXHJcbiAgICog5om56YeP5Yig6Zmk5a2Q6KGoXHJcbiAgICovXHJcbiAgYWJzdHJhY3QgYmF0Y2hSZW1vdmVCeVBhdGgocGF0aDogc3RyaW5nLCBpZHM6IHN0cmluZyk6IE9ic2VydmFibGU8Ym9vbGVhbj47XHJcbiAgLyoqXHJcbiAgICog5om56YeP5paw5aKe5LuO6KGoL+S7juS7juihqOaVsOaNrlxyXG4gICAqIEBwYXJhbSBwYXRoIOWunuS9k+e7keWumui3r+W+hO+8jGxpa2UgMS9jaGlsZHMgb3IgMS9jaGlsZHMvMTEvY2hpbGRjaGlsZHNcclxuICAgKiBAcGFyYW0gZGVmYXVsdFZhbHVlcyDpu5jorqTlrp7kvZPmlbDmja7mlbDnu4RcclxuICAgKiBAZGVzY3JpcHRpb24g5ZCO56uv5o6l5Y+j5Y+q5pSv5oyB5om56YeP5paw5aKe5a2Q6KGo77yM5om56YeP5paw5aKe5Li76KGo55uu5YmN5LiN5pSv5oyBXHJcbiAgICovXHJcbiAgYWJzdHJhY3QgYmF0Y2hBcHBlbmRCeVBhdGgocGF0aDogc3RyaW5nLCBkZWZhdWx0VmFsdWVzOiBBcnJheTxhbnk+KTogT2JzZXJ2YWJsZTxhbnk+O1xyXG4gIC8qKlxyXG4gICAqIOaJuemHj+aWsOWinuS4u+ihqOaVsOaNrlxyXG4gICAqIEBwYXJhbSBkZWZhdWx0VmFsdWVzIOm7mOiupOWunuS9k+aVsOaNruaVsOe7hFxyXG4gICAqL1xyXG4gIGFic3RyYWN0IGJhdGNoQXBwZW5kKGRlZmF1bHRWYWx1ZXM6IEFycmF5PGFueT4pOiBPYnNlcnZhYmxlPGFueT47XHJcblxyXG59XHJcbiJdfQ==