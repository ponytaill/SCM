import { Subject } from 'rxjs';
class AppEventBus {
    /**
     * 构造函数
     */
    constructor() {
        this.eventBus = new Subject();
        this.subscriptionsMap = new Map();
    }
    triggerEvent(event) {
        this.eventBus.next(event);
    }
    subscribe(componentId, func, funcError) {
        if (this.subscriptionsMap.has(componentId) === false) {
            const subscription = this.eventBus.subscribe((value) => func(value), (value) => funcError(value));
            this.subscriptionsMap.set(componentId, subscription);
        }
    }
    unsubscribe(componentId) {
        if (this.subscriptionsMap.has(componentId) === true) {
            this.subscriptionsMap.get(componentId).unsubscribe();
            this.subscriptionsMap.delete(componentId);
        }
    }
}
export { AppEventBus };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwX2V2ZW50QnVzLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy9tb2JpbGUtZGV2a2l0LyIsInNvdXJjZXMiOlsibGliL2FwcC9hcHBfZXZlbnRCdXMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLE9BQU8sRUFBZ0IsTUFBTSxNQUFNLENBQUM7QUFFN0MsTUFBTSxXQUFXO0lBUWY7O09BRUc7SUFDSDtRQUNFLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxPQUFPLEVBQUUsQ0FBQztRQUM5QixJQUFJLENBQUMsZ0JBQWdCLEdBQUcsSUFBSSxHQUFHLEVBQXdCLENBQUM7SUFDMUQsQ0FBQztJQUVELFlBQVksQ0FBQyxLQUFVO1FBQ3JCLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQzVCLENBQUM7SUFFRCxTQUFTLENBQUMsV0FBbUIsRUFBRSxJQUFjLEVBQUUsU0FBb0I7UUFDakUsSUFBSSxJQUFJLENBQUMsZ0JBQWdCLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxLQUFLLEtBQUssRUFBRTtZQUNwRCxNQUFNLFlBQVksR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FDMUMsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsRUFDdEIsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FDNUIsQ0FBQTtZQUNELElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFHLENBQUMsV0FBVyxFQUFFLFlBQVksQ0FBQyxDQUFDO1NBQ3REO0lBQ0gsQ0FBQztJQUVELFdBQVcsQ0FBQyxXQUFtQjtRQUM3QixJQUFJLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLEtBQUssSUFBSSxFQUFFO1lBQ25ELElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUM7WUFDckQsSUFBSSxDQUFDLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsQ0FBQztTQUMzQztJQUNILENBQUM7Q0FDRjtBQUVELE9BQU8sRUFBRSxXQUFXLEVBQUUsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFN1YmplY3QsIFN1YnNjcmlwdGlvbiB9IGZyb20gJ3J4anMnO1xyXG5cclxuY2xhc3MgQXBwRXZlbnRCdXMge1xyXG4gIC8qKlxyXG4qIGV2ZW50QnVzXHJcbiovXHJcbiAgcHJpdmF0ZSBldmVudEJ1czogU3ViamVjdDxhbnk+O1xyXG5cclxuICBwcml2YXRlIHN1YnNjcmlwdGlvbnNNYXA6IE1hcDxzdHJpbmcsIFN1YnNjcmlwdGlvbj47XHJcblxyXG4gIC8qKlxyXG4gICAqIOaehOmAoOWHveaVsFxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdGhpcy5ldmVudEJ1cyA9IG5ldyBTdWJqZWN0KCk7XHJcbiAgICB0aGlzLnN1YnNjcmlwdGlvbnNNYXAgPSBuZXcgTWFwPHN0cmluZywgU3Vic2NyaXB0aW9uPigpO1xyXG4gIH1cclxuXHJcbiAgdHJpZ2dlckV2ZW50KGV2ZW50OiBhbnkpIHtcclxuICAgIHRoaXMuZXZlbnRCdXMubmV4dChldmVudCk7XHJcbiAgfVxyXG5cclxuICBzdWJzY3JpYmUoY29tcG9uZW50SWQ6IHN0cmluZywgZnVuYzogRnVuY3Rpb24sIGZ1bmNFcnJvcj86IEZ1bmN0aW9uKSB7XHJcbiAgICBpZiAodGhpcy5zdWJzY3JpcHRpb25zTWFwLmhhcyhjb21wb25lbnRJZCkgPT09IGZhbHNlKSB7XHJcbiAgICAgIGNvbnN0IHN1YnNjcmlwdGlvbiA9IHRoaXMuZXZlbnRCdXMuc3Vic2NyaWJlKFxyXG4gICAgICAgICh2YWx1ZSkgPT4gZnVuYyh2YWx1ZSksXHJcbiAgICAgICAgKHZhbHVlKSA9PiBmdW5jRXJyb3IodmFsdWUpXHJcbiAgICAgIClcclxuICAgICAgdGhpcy5zdWJzY3JpcHRpb25zTWFwLnNldChjb21wb25lbnRJZCwgc3Vic2NyaXB0aW9uKTtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgdW5zdWJzY3JpYmUoY29tcG9uZW50SWQ6IHN0cmluZykge1xyXG4gICAgaWYgKHRoaXMuc3Vic2NyaXB0aW9uc01hcC5oYXMoY29tcG9uZW50SWQpID09PSB0cnVlKSB7XHJcbiAgICAgIHRoaXMuc3Vic2NyaXB0aW9uc01hcC5nZXQoY29tcG9uZW50SWQpLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgIHRoaXMuc3Vic2NyaXB0aW9uc01hcC5kZWxldGUoY29tcG9uZW50SWQpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IHsgQXBwRXZlbnRCdXMgfTsiXX0=