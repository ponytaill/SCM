/**
 * @fileoverview added by tsickle
 * Generated from: lib/organization-selector.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, EventEmitter, forwardRef, HostBinding, Injector, Input, NgZone, Output, Renderer2, ViewChild, ChangeDetectorRef } from '@angular/core';
import { NgControl, NG_VALUE_ACCESSOR } from '@angular/forms';
import { DialogComponent } from '@farris/ui-dialog';
import { ApiService } from '../utils/api.service';
import { CommonUtil } from '../utils/common.tool';
import { FavoritesTool } from '../utils/favorites.tool';
import { ChangeType } from '../utils/index.type';
import { StateMgrTool } from '../utils/state.mgr.tool';
import { Subject } from 'rxjs';
import * as _ from 'lodash-es';
import { debounceTime, distinctUntilChanged, switchMap, tap } from 'rxjs/operators';
import { GroupComponent } from './tab-group/group.component';
import { OrganizationComponent } from './tab-organization/to.component';
import { FavoritesComponent } from './tab-favorites/favorites.component';
import { MessagerService } from '@farris/ui-messager';
import { NotifyService } from '@farris/ui-notify';
import { LocaleService } from '@farris/ui-locale';
import { ORGANIZATION_SELECTOR_LOCALE } from '../utils/locale';
var OrganizationSelectorComponent = /** @class */ (function () {
    function OrganizationSelectorComponent(render, injector, favoritesTool, apiService, ngZone, stateMgr) {
        var _this = this;
        this.render = render;
        this.injector = injector;
        this.favoritesTool = favoritesTool;
        this.apiService = apiService;
        this.ngZone = ngZone;
        this.stateMgr = stateMgr;
        this.baseCls = true;
        this.width = '100%';
        // input框是否显示
        this.showInput = true;
        // 业务标识
        this.busNum = 'common';
        this.multiSelect = true;
        this.placeholder = '请选择';
        this.searchPlaceholder = '请输入编号或名称搜索';
        this.readonly = false;
        // 传入的url
        this.absUserOrgUrl = '/api/runtime/sys/v1.0/absUserOrg';
        this.absRfQueryUrl = '/api/runtime/sys/v1.0/absRecentContacts/query';
        this.absRfModifyUrl = '/api/runtime/sys/v1.0/absRecentContacts/modify';
        this.groupApiUrl = "/api/runtime/sys/v1.0/org-group";
        this.groupExtendUrl = '/platform/runtime/wf/webapp/ng-farris-mobile-ui/extend-org.js';
        /**
         * 数据源类型
         * 默认为： System_organization  系统数据源   获取系统人员、系统组织
         * Administrative_organization  已扩展数据源  获取行政组织、行政人员
         * absOrgType {string}
         * PersonnelSelectorComponent
         */
        this.absOrgType = 'System_organization';
        // 启用分层加载
        this.enableHierarchicalLoading = true;
        // 不包含停用组织
        this.notGetStopOrg = true;
        this.primaryField = 'orgId';
        this.displayField = 'name';
        this.orgIds = [];
        // 展开层级
        this.layer = 1;
        // 是否启用级联选中
        this.cascadeCheck = true;
        // 级联选中下级
        this.cascadeDown = true;
        // 级联选中上级
        this.cascadeUp = false;
        // 显示全选按钮
        this.showCheckAll = false;
        this.keepSelect = false;
        // 一次性最多选中多少条
        this.selectedLimit = 50;
        this.showTabIds = 'organization,favorites';
        this.activeTabId = 'organization';
        // 搜索前端分页50条
        this.searchPageSize = 50;
        /**
         * 多选分隔符
         */
        this.multipleChoiceSeparator = ',';
        this.draggable = true;
        this.virtualizedLoad = false;
        this.dataPermission = false;
        this.dataPermissionIds = [];
        this.selectionsChange = new EventEmitter();
        // 全部清除按钮触发回调
        this.inputClear = new EventEmitter();
        // 标签删除按钮出发回调
        this.tagRemoved = new EventEmitter();
        this.selections = [];
        this.originalSelections = [];
        this.finalText = [];
        this.lookupIcon = '<i class="f-icon f-icon-lookup"></i>';
        this.searchIcon = '<span class="k-icon k-i-search"></span>';
        this.organizationTabId = 'organization';
        this.groupTabId = 'group';
        this.favoritesTabId = 'favorites';
        this.dialogHeight = 548;
        this.dialogId = 'dialogId';
        this.isShow = false;
        this.confirmToken = false;
        this.hideSearchPanel = true;
        this.searchText = '';
        this.groupDialogOpend = false;
        this.groupDialogTitle = '';
        this.validGroupTitle = true;
        this.groupTitleStream = new Subject();
        this.selectionsShow = false;
        this.orgTabActive = false;
        this.groupTabActive = false;
        this.againstSingleSelect = false;
        this.localeService = null;
        this.languagesArray = [
            { code: 'zh-CHS', name: '中文简体', default: true },
            { code: 'en', name: 'English' },
            { code: 'zh-CHT', name: '中文繁体' }
        ];
        this.farrisDialogbeforeClose = (/**
         * @return {?}
         */
        function () {
            _this.isShow = false;
            if (_this.confirmToken) {
                _this.originalSelections = _.cloneDeep(_this.selections);
            }
            else {
                _this.selections = _.cloneDeep(_this.originalSelections);
            }
            if (!_this.hideSearchPanel || _this.searchText) {
                _this.searchText = null;
                _this.clearSearch();
            }
            _this.confirmToken = false;
            return true;
        });
        this.onModelChange = (/**
         * @param {?=} val
         * @return {?}
         */
        function (val) { });
        this.onModelTouched = (/**
         * @param {?=} val
         * @return {?}
         */
        function (val) { });
        this.apiService.absUrl = this.absUserOrgUrl;
        this.apiService.groupApiUrl = this.groupApiUrl;
        this.cdRef = this.injector.get(ChangeDetectorRef);
        this.messageService = this.injector.get(MessagerService, null);
        this.notifyService = this.injector.get(NotifyService, null);
        this.localeService = this.injector.get(LocaleService);
        if (!this.localeService.langData['organizationSelector']) {
            this.localeService.setLocaleData(ORGANIZATION_SELECTOR_LOCALE);
        }
    }
    /**
     * @param {?} obj
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.writeValue = /**
     * @param {?} obj
     * @return {?}
     */
    function (obj) {
        if (!!obj && typeof obj === 'string') {
            this.finalText = obj.split(this.multipleChoiceSeparator);
        }
        else {
            this.finalText = [];
        }
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.registerOnChange = /**
     * @param {?} fn
     * @return {?}
     */
    function (fn) {
        this.onModelChange = fn;
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.registerOnTouched = /**
     * @param {?} fn
     * @return {?}
     */
    function (fn) {
        this.onModelTouched = fn;
    };
    /**
     * @param {?} isDisabled
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.setDisabledState = /**
     * @param {?} isDisabled
     * @return {?}
     */
    function (isDisabled) {
        throw new Error('Method not implemented.');
    };
    /**
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.initDialogHeight();
        this.listenSelectionsChange();
        this.initTabs();
        this.initGroupSearch();
        this.ngControl = this.injector.get(NgControl, null);
        this.mapFields && this.mapFields2Component();
    };
    /**
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        this.listenWindowResize();
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        /** @type {?} */
        var orgIdsChange = changes.orgIds;
        if (orgIdsChange && orgIdsChange.currentValue) {
            this.assembleDataByOrgIds(orgIdsChange.currentValue);
        }
    };
    /**
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this.selectionsSub.unsubscribe();
    };
    /**
     * @private
     * @param {?} selections
     * @param {?=} changeType
     * @param {?=} from
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.emitSelections = /**
     * @private
     * @param {?} selections
     * @param {?=} changeType
     * @param {?=} from
     * @return {?}
     */
    function (selections, changeType, from) {
        if (changeType === void 0) { changeType = ChangeType.ValueChanged; }
        if (from === void 0) { from = 'form'; }
        this.stateMgr.emitSelections(selections, changeType, from);
    };
    // 根据字段映射关系获取当前已选组织的id，进而在打开选组织弹窗时进行相应展示
    // 根据字段映射关系获取当前已选组织的id，进而在打开选组织弹窗时进行相应展示
    /**
     * @private
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.mapFields2Component = 
    // 根据字段映射关系获取当前已选组织的id，进而在打开选组织弹窗时进行相应展示
    /**
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var helpFields = Object.keys(this.mapFields);
        if (!helpFields.includes(this.primaryField)) {
            // this.notifyService.warning(this.localeService.getValue("organizationSelector.errorMessage.mapFields"));
            return;
        }
        if (this.ngControl &&
            this.ngControl.formDirective &&
            this.ngControl.formDirective.form &&
            this.ngControl.formDirective.form.bindingData) {
            /** @type {?} */
            var bindingData = this.ngControl.formDirective.form.bindingData;
            if (bindingData.setValue) {
                /** @type {?} */
                var bindingPath = this.ngControl.formDirective.form.bindingPath;
                /** @type {?} */
                var pathArr = [];
                if (bindingPath) {
                    pathArr = bindingPath.split('/').filter((/**
                     * @param {?} n
                     * @return {?}
                     */
                    function (n) { return n !== ''; }));
                }
                /** @type {?} */
                var multiPath = this.mapFields[this.primaryField].split(this.multipleChoiceSeparator);
                /** @type {?} */
                var fieldPaths = pathArr.concat(multiPath[0].split('.'));
                /** @type {?} */
                var ids = bindingData.getValue(fieldPaths);
                if (!ids) {
                    this.emitSelections([]);
                    return;
                }
                this.assembleDataByOrgIds(ids.split(this.multipleChoiceSeparator));
            }
        }
    };
    // 根据传入的组织id数组获取对应的组织
    // 由ngOnChanges()、mapFields2Component()调用
    // 根据传入的组织id数组获取对应的组织
    // 由ngOnChanges()、mapFields2Component()调用
    /**
     * @private
     * @param {?} ids
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.assembleDataByOrgIds = 
    // 根据传入的组织id数组获取对应的组织
    // 由ngOnChanges()、mapFields2Component()调用
    /**
     * @private
     * @param {?} ids
     * @return {?}
     */
    function (ids) {
        var _this = this;
        if (!ids || ids.length === 0) {
            return;
        }
        if (ids && ids.length > 1 && !this.multiSelect) {
            this.againstSingleSelect = true;
            return;
        }
        /** @type {?} */
        var param = {
            absOrgType: this.absOrgType,
            idList: ids,
            getOrgAllPath: true,
            getCurUser: false
        };
        this.apiService.getOrganization(param).subscribe((/**
         * @param {?} res
         * @return {?}
         */
        function (res) {
            if (res && res.data) {
                _this.selections = res.data;
                if (!_this.mapFields) {
                    _this.assembleFinalText();
                    if (_this.dataPermission) {
                        _this.emitSelections(_this.selections);
                    }
                }
                else {
                    _this.emitSelections(_this.selections);
                }
            }
        }));
    };
    // 构造回显至input文本框的内容
    // 在有mapFields的前提下，由assembleDataByOrgIds()调用，clearAll()、removeItem()、returnResult()也会调用
    // 构造回显至input文本框的内容
    // 在有mapFields的前提下，由assembleDataByOrgIds()调用，clearAll()、removeItem()、returnResult()也会调用
    /**
     * @private
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.assembleFinalText = 
    // 构造回显至input文本框的内容
    // 在有mapFields的前提下，由assembleDataByOrgIds()调用，clearAll()、removeItem()、returnResult()也会调用
    /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        this.finalText = [];
        this.selections.forEach((/**
         * @param {?} item
         * @param {?} index
         * @return {?}
         */
        function (item, index) {
            /** @type {?} */
            var formatedName = _this.formatFn && _this.formatFn(item);
            /** @type {?} */
            var finalText = formatedName ? formatedName : item[_this.displayField];
            _this.finalText.push(finalText);
        }));
        this.finalText = this.finalText.slice();
    };
    // 初始化弹窗id及高度
    // 由ngOnInit()调用
    // 初始化弹窗id及高度
    // 由ngOnInit()调用
    /**
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.initDialogHeight = 
    // 初始化弹窗id及高度
    // 由ngOnInit()调用
    /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var uuid = CommonUtil.newGuid();
        this.dialogId += uuid;
        /** @type {?} */
        var windowInnerHeight = window.innerHeight;
        this.dialogHeight = windowInnerHeight - 60;
        if (this.dialogHeight > 680) {
            this.dialogHeight = 680;
        }
    };
    // 监听selections的变更，变更包含三种形式：valueChange、append、remove
    // 由ngOnInit()调用
    // 监听selections的变更，变更包含三种形式：valueChange、append、remove
    // 由ngOnInit()调用
    /**
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.listenSelectionsChange = 
    // 监听selections的变更，变更包含三种形式：valueChange、append、remove
    // 由ngOnInit()调用
    /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.selectionsSub = this.stateMgr.selectionsSubject.subscribe((/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            if (data.changeType === ChangeType.ValueChanged) {
                _this.selections = _.cloneDeep(data.value);
            }
            else if (data.changeType === ChangeType.Remove) {
                _this.selections = _this.selections.filter((/**
                 * @param {?} item
                 * @return {?}
                 */
                function (item) { return item[_this.primaryField] !== data.value[_this.primaryField]; }));
            }
            else if (data.changeType === ChangeType.Append) {
                CommonUtil.findIndex(data.value[_this.primaryField], _this.primaryField, _this.selections) === -1 ? _this.selections.push(data.value) : null;
            }
            _this.cdRef.detectChanges();
        }));
    };
    // 根据showTabIds判断是否启用收藏功能、群组功能
    // 由ngOnInit()调用
    // 根据showTabIds判断是否启用收藏功能、群组功能
    // 由ngOnInit()调用
    /**
     * @private
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.initTabs = 
    // 根据showTabIds判断是否启用收藏功能、群组功能
    // 由ngOnInit()调用
    /**
     * @private
     * @return {?}
     */
    function () {
        if (!this.showTabIds.includes(this.activeTabId)) {
            this.activeTabId = this.showTabIds.split(',')[0];
        }
        if (this.dataPermission) {
            this.showTabIds = this.organizationTabId;
            this.activeTabId = this.organizationTabId;
            this.orgTabActive = true;
            return;
        }
        this.currentTabId = this.activeTabId;
        if (this.showTabIds.indexOf(this.favoritesTabId) !== -1) {
            this.enableFavorites = true;
        }
        else {
            this.enableFavorites = false;
        }
        if (this.showTabIds.indexOf(this.groupTabId) !== -1) {
            this.enableGroup = true;
        }
        else {
            this.enableGroup = false;
        }
        if (this.activeTabId == this.organizationTabId) {
            this.orgTabActive = true;
        }
        else if (this.activeTabId == this.groupTabId) {
            this.groupTabActive = true;
        }
        // 启用群组功能扩展函数
        /*
        if (this.enableGroup) {
          const ccwork = window.top.document.createElement("script")
          ccwork.src = this.groupExtendUrl + '?vs=' + Math.random();
          window.document.head.appendChild(ccwork);
        }
        */
    };
    // 判断群组名称是否合法
    // 由ngOnInit()调用
    // 判断群组名称是否合法
    // 由ngOnInit()调用
    /**
     * @private
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.initGroupSearch = 
    // 判断群组名称是否合法
    // 由ngOnInit()调用
    /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.enableGroup) {
            this.groupTitleStream.pipe(debounceTime(500), distinctUntilChanged()).subscribe((/**
             * @param {?} data
             * @return {?}
             */
            function (data) {
                if (!!data) {
                    _this.validGroupTitle = true;
                }
                else {
                    _this.validGroupTitle = false;
                }
            }));
        }
    };
    // 当浏览器窗口大小变更时，变更弹窗的大小
    // 由ngAfterViewInit()调用
    // 当浏览器窗口大小变更时，变更弹窗的大小
    // 由ngAfterViewInit()调用
    /**
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.listenWindowResize = 
    // 当浏览器窗口大小变更时，变更弹窗的大小
    // 由ngAfterViewInit()调用
    /**
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var dialogElement = document.querySelector('#' + this.dialogId);
        /** @type {?} */
        var targetElement = null;
        if (!!dialogElement) {
            targetElement = dialogElement.querySelector('.modal-dialog');
        }
        window.addEventListener('resize', (/**
         * @return {?}
         */
        function () {
            if (!!targetElement) {
                /** @type {?} */
                var height = window.innerHeight - 60;
                if (height > 680) {
                    height = 680;
                }
                _this.dialogHeight = height;
                /** @type {?} */
                var innerHeight_1 = height + 'px';
                /** @type {?} */
                var marginTop = '-' + height / 2 + 'px';
                _this.render.setStyle(targetElement, 'height', innerHeight_1);
                _this.render.setStyle(targetElement, 'margin-top', marginTop);
            }
        }));
    };
    // 初始化组织收藏数据
    // 由showFarrisDialog()调用，即打开选组织弹窗时发送请求
    // 初始化组织收藏数据
    // 由showFarrisDialog()调用，即打开选组织弹窗时发送请求
    /**
     * @private
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.initFavorites = 
    // 初始化组织收藏数据
    // 由showFarrisDialog()调用，即打开选组织弹窗时发送请求
    /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        this.favoritesTool.absOrgType = this.absOrgType;
        this.favoritesTool.busNum = this.busNum;
        this.favoritesTool.idField = this.primaryField;
        this.favoritesTool.absRfQueryUrl = this.absRfQueryUrl;
        this.favoritesTool.absRfModifyUrl = this.absRfModifyUrl;
        this.favoritesTool.getFavoritesList().subscribe((/**
         * @param {?} result
         * @return {?}
         */
        function (result) {
            /** @type {?} */
            var resData = result ? ((/** @type {?} */ (result))).orgData : [];
            _this.favoritesTool.favoritesList = resData;
            _this.favoritesTool.setFavoritesList(resData);
        }));
    };
    // 打开选组织弹窗
    // 打开选组织弹窗
    /**
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.showFarrisDialog = 
    // 打开选组织弹窗
    /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.isShow = true;
        this.ngZone.runOutsideAngular((/**
         * @return {?}
         */
        function () {
            setTimeout((/**
             * @return {?}
             */
            function () {
                _this.dialog.show();
                if (_this.showTabIds.indexOf(_this.favoritesTabId) !== -1) {
                    _this.initFavorites();
                }
                if (_this.againstSingleSelect) {
                    _this.notifyService.warning(_this.localeService.getValue("organizationSelector.errorMessage.multiSelect"));
                    return;
                }
                if (_this.mapFields && !Object.keys(_this.mapFields).includes(_this.primaryField)) {
                    _this.notifyService.warning(_this.localeService.getValue("organizationSelector.errorMessage.mapFields"));
                    return;
                }
                _this.stateMgr.emitSelections(_this.selections, ChangeType.ValueChanged, 'form');
            }));
        }));
    };
    // input文本框内点击清除按钮时触发
    // input文本框内点击清除按钮时触发
    /**
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.clearAll = 
    // input文本框内点击清除按钮时触发
    /**
     * @return {?}
     */
    function () {
        this.selections = [];
        this.assembleFinalText();
        this.onModelChange(this.finalText.join());
        this.onModelTouched(this.finalText.join());
        this.emitSelections([]);
        this.inputClear.emit();
    };
    // input文本框内删除某一个已选组织时触发
    // input文本框内删除某一个已选组织时触发
    /**
     * @param {?} data
     * @param {?} index
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.removeItem = 
    // input文本框内删除某一个已选组织时触发
    /**
     * @param {?} data
     * @param {?} index
     * @return {?}
     */
    function (data, index) {
        if (this.selections.length > 0) {
            this.selections.splice(index, 1);
            this.assembleFinalText();
            this.emitSelections(data, ChangeType.Remove);
        }
        else {
            this.finalText = this.finalText.filter((/**
             * @param {?} text
             * @return {?}
             */
            function (text) { return text !== data; }));
        }
        this.onModelChange(this.finalText.join());
        this.onModelTouched(this.finalText.join());
        this.tagRemoved.emit({
            deleteItem: data,
            deleteIndex: index,
            selections: this.selections
        });
    };
    // 清空最近已选组织
    // 清空最近已选组织
    /**
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.clearSeletions = 
    // 清空最近已选组织
    /**
     * @return {?}
     */
    function () {
        this.stateMgr.emitSelections([], ChangeType.ValueChanged, 'form');
    };
    // 点击搜索按钮或者敲击回车时触发
    // 点击搜索按钮或者敲击回车时触发
    /**
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.onSearch = 
    // 点击搜索按钮或者敲击回车时触发
    /**
     * @return {?}
     */
    function () {
        if (!!this.searchText) {
            this.hideSearchPanel = false;
            this.onSearchToken = CommonUtil.newGuid();
        }
    };
    // 清空组织搜索内容时触发
    // 清空组织搜索内容时触发
    /**
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.clearSearch = 
    // 清空组织搜索内容时触发
    /**
     * @return {?}
     */
    function () {
        this.hideSearchPanel = true;
        this.onSearchToken = false;
    };
    // 监听搜索框内输入的文本
    // 监听搜索框内输入的文本
    /**
     * @param {?} e
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.listenSearchText = 
    // 监听搜索框内输入的文本
    /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        if (e.code === 'Backspace' || e.code === 'Delete') {
            if (!this.searchText) {
                this.clearSearch();
            }
        }
    };
    // 监听搜索页的关闭事件，目前只会接收到true
    // 监听搜索页的关闭事件，目前只会接收到true
    /**
     * @param {?} e
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.listenClosePanelChange = 
    // 监听搜索页的关闭事件，目前只会接收到true
    /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        this.hideSearchPanel = e;
        // 关闭搜索结果页后，需要更新树节点的是否选中状态
        if (this.currentTabId == this.organizationTabId) {
            this.libOrgTree.farrisTree.clearAll();
            this.libOrgTree.farrisTree.rowHeight = 28;
            if (this.multiSelect) {
                this.libOrgTree.checkOrgTreeNodes();
            }
            else {
                this.libOrgTree.selectOrgTreeNode();
            }
        }
    };
    // 关闭保存群组的弹窗时点击“取消”或者右上角叉号触发
    // 关闭保存群组的弹窗时点击“取消”或者右上角叉号触发
    /**
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.closeGroupDialog = 
    // 关闭保存群组的弹窗时点击“取消”或者右上角叉号触发
    /**
     * @return {?}
     */
    function () {
        this.groupDialogOpend = false;
        this.editingGroupId = null;
        this.groupTitle = null;
        this.groupNote = null;
        this.groupDialogTitle = this.localeService.getValue("organizationSelector.group.saveGroup");
    };
    // 在保存群组的弹窗内，修改群组名称时触发，监听keyup事件
    // 在保存群组的弹窗内，修改群组名称时触发，监听keyup事件
    /**
     * @param {?} e
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.listenGroupTitle = 
    // 在保存群组的弹窗内，修改群组名称时触发，监听keyup事件
    /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        this.groupTitleStream.next(this.groupTitle);
    };
    // 选组织的弹窗内有一个“已选”标志，鼠标移上去后会显示已选组织的页面，该页面内有“保存为群组”的按钮，点击后可以打开保存群组的弹窗
    // 选组织的弹窗内有一个“已选”标志，鼠标移上去后会显示已选组织的页面，该页面内有“保存为群组”的按钮，点击后可以打开保存群组的弹窗
    /**
     * @param {?} e
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.listenOpenGroup = 
    // 选组织的弹窗内有一个“已选”标志，鼠标移上去后会显示已选组织的页面，该页面内有“保存为群组”的按钮，点击后可以打开保存群组的弹窗
    /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        this.groupDialogOpend = e;
        this.groupDialogTitle = this.localeService.getValue("organizationSelector.group.saveGroup");
    };
    // 点击群组编辑按钮触发，可修改选中群组的名称及描述
    // 点击群组编辑按钮触发，可修改选中群组的名称及描述
    /**
     * @param {?} item
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.listenGroupChange = 
    // 点击群组编辑按钮触发，可修改选中群组的名称及描述
    /**
     * @param {?} item
     * @return {?}
     */
    function (item) {
        this.groupDialogOpend = true;
        this.editingGroupId = item.id;
        this.groupTitle = item.title;
        this.groupNote = item.description;
        this.groupDialogTitle = this.localeService.getValue("organizationSelector.group.editGroup");
    };
    // 关闭保存群组的弹窗时点击“确定”触发，将当前已选组织保存为一个新的群组
    // 关闭保存群组的弹窗时点击“确定”触发，将当前已选组织保存为一个新的群组
    /**
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.saveGroup = 
    // 关闭保存群组的弹窗时点击“确定”触发，将当前已选组织保存为一个新的群组
    /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (!this.groupTitle) {
            this.validGroupTitle = false;
            return;
        }
        /** @type {?} */
        var groupId = CommonUtil.newGuid();
        /** @type {?} */
        var groupCode = 'orgGroup_private_';
        groupCode += Math.random().toString(16).substring(2, 10);
        /** @type {?} */
        var addIds = [];
        this.selections.forEach((/**
         * @param {?} selection
         * @return {?}
         */
        function (selection) {
            addIds.push(selection[_this.primaryField]);
        }));
        if (addIds.length > 1000) {
            this.messageService.show('warning', this.localeService.getValue("organizationSelector.errorMessage.limit"), true);
            this.groupDialogOpend = false;
            this.groupTitle = null;
            this.groupNote = null;
            return;
        }
        this.groupDialogOpend = false;
        /** @type {?} */
        var body = {
            groupId: groupId,
            groupCode: groupCode,
            title: this.groupTitle,
            description: this.groupNote,
            absOrgType: this.absOrgType,
            changeType: Number(1)
        };
        if (this.editingGroupId) {
            body.groupId = this.editingGroupId;
            body.changeType = Number(2);
            delete body.groupCode;
            this.updateNameOrNote(body);
            return;
        }
        /** @type {?} */
        var newGroup$ = this.apiService.saveGroup(body);
        newGroup$.pipe(switchMap((/**
         * @param {?} res
         * @return {?}
         */
        function (res) {
            if (res) {
                _this.libOrgGroup.selectedGroupId = groupId;
                _this.groupTitle = null;
                _this.groupNote = null;
                /** @type {?} */
                var addOrgsInNewGroup$ = _this.apiService.saveGroup({ groupId: groupId, addIds: addIds, deleteIds: [], changeType: Number(3) });
                return addOrgsInNewGroup$.pipe(tap((/**
                 * @param {?} data
                 * @return {?}
                 */
                function (data) {
                    if (data) {
                        _this.libOrgGroup.getGroupList({ saveGroup: true });
                    }
                }), (/**
                 * @param {?} error
                 * @return {?}
                 */
                function (error) {
                    throw new Error(_this.localeService.getValue("organizationSelector.errorMessage.saveOrganization"));
                })));
            }
        })), tap((/**
         * @return {?}
         */
        function () {
        }), (/**
         * @param {?} error
         * @return {?}
         */
        function (error) {
            _this.messageService.show('error', _this.localeService.getValue("organizationSelector.errorMessage.saveGroup"), true);
        }))).subscribe();
    };
    /**
     * @private
     * @param {?} param
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.updateNameOrNote = /**
     * @private
     * @param {?} param
     * @return {?}
     */
    function (param) {
        var _this = this;
        /** @type {?} */
        var updateInfo$ = this.apiService.saveGroup(param);
        updateInfo$.pipe(tap((/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            if (data) {
                _this.editingGroupId = null;
                _this.groupTitle = null;
                _this.groupNote = null;
                _this.groupDialogTitle = _this.localeService.getValue("organizationSelector.group.saveGroup");
                _this.libOrgGroup.getGroupList({ updateNameOrNote: true });
            }
        }), (/**
         * @param {?} error
         * @return {?}
         */
        function (error) {
            _this.messageService.show('error', _this.localeService.getValue("organizationSelector.errorMessage.editGroup"), true);
        }))).subscribe();
    };
    // 点击选组织弹窗的确定或者取消按钮时触发，1为确定，0为取消
    // 点击选组织弹窗的确定或者取消按钮时触发，1为确定，0为取消
    /**
     * @param {?} type
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.returnResult = 
    // 点击选组织弹窗的确定或者取消按钮时触发，1为确定，0为取消
    /**
     * @param {?} type
     * @return {?}
     */
    function (type) {
        /** @type {?} */
        var finalText = '';
        if (!!type) {
            this.confirmToken = true;
            this.assembleFinalText();
            finalText = this.finalText.join();
            if (this.selections && this.selections.length) {
                this.selectionsChange.emit({
                    selections: this.selections
                });
                this.onModelChange(finalText);
                this.onModelTouched(finalText);
            }
            else {
                this.onModelChange(finalText);
                this.onModelTouched(finalText);
                this.selectionsChange.emit({
                    selections: this.selections
                });
            }
        }
        else {
            if (this.mapFields) {
                this.mapFields2Component();
            }
            else {
                this.assembleDataByOrgIds(this.orgIds);
            }
        }
        // this.orgIds = [];
        this.dialog.close();
        this.isShow = false;
    };
    /**
     * @param {?} e
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.changeTabs = /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        this.currentTabId = e.nextId;
        if (this.showTabIds.includes(this.organizationTabId)) {
            this.libOrgTree.currentTabId = this.currentTabId;
        }
        if (e.nextId === this.groupTabId) {
            if (!this.libOrgGroup.groupData.public.length && !this.libOrgGroup.groupData.personal.length) {
                this.libOrgGroup.assembleData(true);
            }
        }
        else if (e.nextId === this.organizationTabId) {
            if (this.libOrgTree.initLoad) {
                this.libOrgTree.loadTreeData();
            }
            else {
                this.libOrgTree.farrisTree.clearAll();
                this.libOrgTree.farrisTree.rowHeight = 28;
                if (this.multiSelect) {
                    this.libOrgTree.checkOrgTreeNodes();
                }
                else {
                    this.libOrgTree.selectOrgTreeNode();
                }
            }
        }
    };
    OrganizationSelectorComponent.decorators = [
        { type: Component, args: [{
                    selector: 'farris-organization-selector',
                    template: "<div #tagbox class=\"input-group s-input-group\" *ngIf=\"showInput\" [class.farris-input-group-readonly]=\"readonly\">\r\n  <div class=\"form-control f-cmp-inputgroup--multi-wrapper multi-more\">\r\n    <div class=\"multi--content\" *ngFor=\"let item of finalText; index as i\" [title]=\"item\">\r\n      <span class=\"multi--item\">\r\n        {{item}}\r\n      </span>\r\n      <i class=\"f-icon f-icon-close cursor-pointer\" *ngIf=\"!readonly\" style=\"margin-top: 1px;\"\r\n        (click)=\"removeItem(item, i)\"></i>\r\n    </div>\r\n    <span class=\"multi-another\" *ngIf=\"finalText.length === 0\">{{placeholder}}</span>\r\n  </div>\r\n  <div *ngIf=\"!readonly\" class=\"input-group-append\" title=\"\">\r\n    <span *ngIf=\"finalText && finalText.length > 0\" class=\"input-group-text input-group-clear cursor-pointer\"\r\n      (click)=\"clearAll()\">\r\n      <i class=\"f-icon modal_close\"></i>\r\n    </span>\r\n    <span class=\"input-group-text cursor-pointer\" (click)=\"showFarrisDialog()\">\r\n      <span class=\"f-icon f-icon-lookup\"></span>\r\n    </span>\r\n  </div>\r\n</div>\r\n\r\n<farris-dialog #farrisDialog *ngIf=\"isShow\" class=\"fos-dialog\" [resizable]=\"false\" id=\"{{dialogId}}\"\r\n  [draggable]=\"draggable\" [buttons]=\"buttonRef\" [beforeClose]=\"farrisDialogbeforeClose\" [showMaxButton]=\"false\"\r\n  [width]=\"760\" [height]=\"dialogHeight\" [title]=\"'organizationSelector.selection.selectionDialogTitle' | locale\">\r\n  <div class=\"fos-content\">\r\n    <div class=\"fos-content-container\">\r\n      <div class=\"fos-content-main\">\r\n        <lib-search #searchResultPage [primaryField]=\"primaryField\" [multiSelect]=\"multiSelect\"\r\n          [enableFavorites]=\"enableFavorites\" [absOrgType]=\"absOrgType\" [notGetStopOrg]=\"notGetStopOrg\"\r\n          [onSearch]=\"onSearchToken\" [searchText]=\"searchText\" [pageSize]=\"searchPageSize\"\r\n          (closePanelChange)=\"listenClosePanelChange($event)\" [hidden]=\"hideSearchPanel\">\r\n        </lib-search>\r\n        <input-group class=\"fos-search-input\" id=\"org-search-input\" [placeholder]=\"'organizationSelector.selection.searchPlaceHolder' | locale\"\r\n          [(value)]=\"searchText\" [groupText]=\"searchIcon\" (enterHandle)=\"onSearch()\" (clickHandle)=\"onSearch()\"\r\n          (keyup)=\"listenSearchText($event)\" (clear)=\"clearSearch()\" *ngIf=\"!dataPermission\">\r\n        </input-group>\r\n        <farris-tabs #selectTabs class=\"fos-tabs\" [value]=\"activeTabId\" [width]=\"'100%'\" [contentFill]=\"true\" (tabChange)=\"changeTabs($event)\">\r\n          <!-- \u7EC4\u7EC7\u673A\u6784  START -->\r\n          <farris-tab [title]=\"'organizationSelector.selection.organization' | locale\" [id]=\"organizationTabId\" *ngIf=\"showTabIds.indexOf(organizationTabId) !== -1\">\r\n            <ng-template #content>\r\n              <lib-org #libOrgTree [enableHierarchicalLoading]=\"enableHierarchicalLoading\" [notGetStopOrg]=\"notGetStopOrg\"\r\n                [enableFavorites]=\"enableFavorites\" [primaryField]=\"primaryField\" [cascadeCheck]=\"cascadeCheck\"\r\n                [cascadeDown]=\"cascadeDown\" [cascadeUp]=\"cascadeUp\" [keepSelect]=\"keepSelect\" [virtualizedLoad]=\"virtualizedLoad\"\r\n                [multiSelect]=\"multiSelect\" [absOrgType]=\"absOrgType\" [layer]=\"layer\" [orgIds]=\"orgIds\"\r\n                [selectedLimit]=\"selectedLimit\" [showCheckAll]=\"showCheckAll\" [activeTabId]=\"activeTabId\" [isActiveTab]=\"orgTabActive\"\r\n                [dataPermission]=\"dataPermission\" [dataPermissionIds]=\"dataPermissionIds\">\r\n              </lib-org>\r\n            </ng-template>\r\n          </farris-tab>\r\n          <!-- \u7EC4\u7EC7\u673A\u6784  END -->\r\n          <!-- \u6211\u7684\u6536\u85CF  START -->\r\n          <farris-tab [title]=\"'organizationSelector.selection.favorites' | locale\" [id]=\"favoritesTabId\" *ngIf=\"showTabIds.indexOf(favoritesTabId) !== -1\">\r\n            <ng-template #content>\r\n              <lib-favorites #libOrgFavorites [primaryField]=\"primaryField\" [multiSelect]=\"multiSelect\"></lib-favorites>\r\n            </ng-template>\r\n          </farris-tab>\r\n          <!-- \u6211\u7684\u6536\u85CF  END -->\r\n          <!-- \u5E38\u7528\u7FA4\u7EC4\u5C55\u793A\u533A  START -->\r\n          <farris-tab [title]=\"'organizationSelector.selection.group' | locale\" [id]=\"groupTabId\" *ngIf=\"showTabIds.indexOf(groupTabId) !== -1\">\r\n            <ng-template #content>\r\n              <lib-group #libOrgGroup \r\n                [primaryField]=\"primaryField\" [absOrgType]=\"absOrgType\" [multiSelect]=\"multiSelect\"\r\n                [enableFavorites]=\"enableFavorites\" [groupApiUrl]=\"groupApiUrl\" [notGetStopOrg]=\"notGetStopOrg\"\r\n                [enableHierarchicalLoading]=\"enableHierarchicalLoading\" [cascadeCheck]=\"cascadeCheck\"\r\n                [cascadeDown]=\"cascadeDown\" [cascadeUp]=\"cascadeUp\" [keepSelect]=\"keepSelect\" [virtualizedLoad]=\"virtualizedLoad\"\r\n                [layer]=\"layer\" [selectedLimit]=\"selectedLimit\" [showCheckAll]=\"showCheckAll\" [isActiveTab]=\"groupTabActive\"\r\n                (groupChange)=\"listenGroupChange($event)\">\r\n              </lib-group>\r\n            </ng-template>\r\n          </farris-tab>\r\n          <!-- \u5E38\u7528\u7FA4\u7EC4\u5C55\u793A\u533A  END -->\r\n        </farris-tabs>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n  <div class=\"s-personnel-group\" *ngIf=\"groupDialogOpend\">\r\n    <div class=\"s-personnel-group-title\">\r\n      <span class=\"f-icon f-sidebar-close\" (click)=\"closeGroupDialog()\"></span>{{groupDialogTitle}}\r\n    </div>\r\n    <div class=\"f-form-layout farris-form farris-form-controls-inline\" style=\"margin-top: 22px;\">\r\n      <div class=\"col-12 col-md-12 col-xl-12 col-el-12\">\r\n        <div class=\"farris-group-wrap\">\r\n          <div class=\"form-group farris-form-group\">\r\n            <label class=\"col-form-label\" style=\"width: 4.2rem\" for=\"month_4c7f0115_7796_42b4_bf41_beb7299dd84f_caum\">\r\n              <span class=\"farris-label-info text-danger\">*</span>\r\n              <span class=\"farris-label-text\">{{'organizationSelector.group.newGroupName' | locale}}</span>\r\n            </label>\r\n            <div class=\"farris-input-wrap\">\r\n                <input class=\"form-control\" id=\"month_4c7f0115_7796_42b4_bf41_beb7299dd84f_caum\"\r\n                (keyup)=\"listenGroupTitle($event)\" placeholder=\"{{'organizationSelector.group.newGroupPlaceHolder' | locale}}\"\r\n                [ngStyle]=\"{'border-color': !validGroupTitle ? 'red' : '#D8DCE6'}\" [(ngModel)]=\"groupTitle\" />\r\n              <!--\r\n                <language-textbox id=\"month_4c7f0115_7796_42b4_bf41_beb7299dd84f_caum\" \r\n                [ngStyle]=\"{'border-color': !validGroupTitle ? 'red' : '#D8DCE6'}\"\r\n                [languages]=\"languagesArray\" [editable]=\"true\" [enableClear]=\"true\" [(ngModel)]=\"groupTitle\"\r\n                (keyup)=\"listenGroupTitle($event)\">\r\n              </language-textbox>\r\n              -->\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-12 col-md-12 col-xl-12 col-el-12\" style=\"margin-top: 4px;\">\r\n        <div class=\"farris-group-wrap\">\r\n          <div class=\"form-group farris-form-group\">\r\n            <label class=\"col-form-label\" style=\"width: 4.2rem\"\r\n              for=\"billNote_7b43d269_2dd3_4777_8cfb_bd0c721575cf_hh9s\">\r\n              <span class=\"farris-label-text\">{{'organizationSelector.group.newGroupNote' | locale}}</span>\r\n            </label>\r\n            <div class=\"farris-input-wrap\">\r\n              <textarea class=\"form-control\" style=\"height: 66px;\" [(ngModel)]=\"groupNote\"\r\n                id=\"billNote_7b43d269_2dd3_4777_8cfb_bd0c721575cf_hh9s\" placeholder=\"{{'organizationSelector.group.newGroupPlaceHolder' | locale}}\"></textarea>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"s-personnel-group-footer\">\r\n      <input type=\"button\" class=\"btn btn-primary fr\" style=\"width: 100px;\" value=\"{{'organizationSelector.selection.confirm' | locale}}\" (click)=\"saveGroup()\" />\r\n      <input type=\"button\" class=\"btn btn-secondary fr mr-3\" value=\"{{'organizationSelector.selection.cancel' | locale}}\" (click)=\"closeGroupDialog()\" />\r\n    </div>\r\n  </div>\r\n</farris-dialog>\r\n\r\n<ng-template #buttonRef>\r\n  <div class=\"fos-dialog-footer\">\r\n    <span class=\"fosd-footer-selection\" (mouseover)=\"selectionsShow=true\"\r\n      (mouseout)=\"selectionsShow=false\">{{'organizationSelector.selection.firstSelectionText' | locale}}\r\n      <a>{{selections.length}}</a>{{'organizationSelector.selection.lastSelectionText' | locale}}</span>\r\n    <span class=\"fosd-footer-clear\" (click)=\"clearSeletions()\">{{'organizationSelector.selection.clear' | locale}}</span>\r\n    <lib-selection #selectedComponent class=\"fosd-selection-content\" [primaryField]=\"primaryField\"\r\n      [enableGroup]=\"enableGroup\" (mouseover)=\"selectionsShow=true\" (mouseout)=\"selectionsShow=false\"\r\n      [hidden]=\"!selectionsShow\" (openedChange)=\"listenOpenGroup($event)\"></lib-selection>\r\n  </div>\r\n  <input type=\"button\" class=\"btn btn-secondary\" value=\"{{'organizationSelector.selection.cancel' | locale}}\" (click)=\"returnResult(0)\" />\r\n  <input type=\"button\" class=\"btn btn-primary\" style=\"width: 100px;\" value=\"{{'organizationSelector.selection.confirm' | locale}}\" (click)=\"returnResult(1)\" />\r\n</ng-template>",
                    providers: [
                        {
                            provide: NG_VALUE_ACCESSOR,
                            useExisting: forwardRef((/**
                             * @return {?}
                             */
                            function () { return OrganizationSelectorComponent; })),
                            multi: true
                        },
                        FavoritesTool, ApiService, StateMgrTool
                    ],
                    styles: [".fos-dialog .fos-content{width:100%;height:100%;min-width:760px;overflow:hidden}.fos-dialog ::ng-deep .modal-content{border-radius:10px}.fos-dialog ::ng-deep .modal-header{color:#2d2f33;border-bottom:none;padding:15px 0 15px 24px}.fos-dialog ::ng-deep .actions{padding-right:22px;font-size:20px}.fos-dialog ::ng-deep .modal-title-label{font-size:17px;font-weight:600}.fos-dialog ::ng-deep .modal-footer{padding:17px 24px;background:#fff;border-top:none}.fos-dialog .fos-content .fos-content-container{display:-webkit-box;display:flex;width:calc(100% - 48px);height:100%;margin:0 24px;border:1px solid #dee1ea;border-radius:3px}.fos-dialog .fos-content .fos-content-container .fos-content-main{-webkit-box-flex:0;flex:0 0 100%;position:relative;display:-webkit-box;display:flex}.fos-dialog .fos-content .fos-content-container .fos-content-main .fos-search-input{position:absolute;top:7px;right:14px;color:#959ab1;z-index:99;width:320px}.fos-dialog .fos-content .fos-content-container .fos-content-main .fos-tabs{min-width:575px}.fos-dialog ::ng-deep .fos-tabs .nav-link{line-height:18px;padding:11px 0!important}.fos-dialog ::ng-deep .fos-tabs .farris-tabs-header{background:#f9f9f9}.fos-dialog ::ng-deep .fos-tabs .nav-item{margin-right:30px}.fos-dialog ::ng-deep .fos-tabs .nav{padding-left:14px;font-size:16px;font-weight:600}.fos-dialog ::ng-deep .fos-tabs .nav-item .st-tab-text{color:#6f8cb4}.fos-dialog ::ng-deep .fos-tabs .nav-item .active .st-tab-text{color:#2a87ff}.fos-dialog::ng-deep input::-webkit-input-placeholder{color:#b4bccc;font-size:13px;line-height:24px}.fos-dialog ::ng-deep input::-moz-input-placeholder{color:#b4bccc;font-size:13px;line-height:24px}.fos-dialog ::ng-deep input::-ms-input-placeholder{color:#b4bccc;font-size:13px;line-height:24px}.fos-dialog ::ng-deep .fos-search-input .form-control{line-height:26px;height:26px;font-size:13px}.fos-dialog ::ng-deep .fos-treetable .farris-treetable-thead{background:#fff;font-size:13px}.fos-dialog ::ng-deep .fos-treetable .farris-treetable-thead th .tt-checkbox .custom-control-label::before{top:2px;margin:0}.fos-dialog ::ng-deep .fos-treetable .farris-treetable-thead th:hover{background:#fff}.fos-dialog ::ng-deep .fos-treetable .treetable-cell-content span{font-size:13px}:host .input-group .input-group-append{background:#fff}:host .s-input-group .input-group-text{color:rgba(0,0,0,.25)}:host .cursor-pointer{cursor:pointer}:host .s-input-group .multi-more{padding:0 0 2px 8px;height:auto;min-height:24px;-webkit-box-flex:1;flex:1;overflow:hidden}:host .s-input-group .multi--content{display:-webkit-box;display:flex;flex-wrap:nowrap;cursor:default;padding:0 5px;background:#ebf7fe;border:1px solid #cfedff;margin:3px 3px 0 0;float:left;height:17px;border-radius:3px;line-height:17px;-webkit-box-pack:justify;justify-content:space-between;box-sizing:content-box;max-width:calc(100% - 10px)}:host .s-input-group .multi--item{line-height:16px;text-overflow:ellipsis;height:16px;-webkit-box-flex:1;flex:1;overflow:hidden;word-break:break-all}:host .s-input-group .multi-another{padding:3px 3px 0 0;line-height:16px;float:left;height:17px;box-sizing:content-box;border:1px solid #fff;color:#bfbfbf}.fos-dialog ::ng-deep .fos-dialog-footer{width:200px;height:30px;line-height:30px;position:absolute;left:24px;text-align:left;cursor:default}.fos-dialog ::ng-deep .fos-dialog-footer .fosd-footer-selection{font-size:14px;color:#2d2f33;background:#f4f9ff;border-radius:5px;padding:2px 5px}.fos-dialog ::ng-deep .fos-dialog-footer .fosd-footer-selection a{font-size:17px;color:#2a87ff}.fos-dialog ::ng-deep .fos-dialog-footer .fosd-footer-clear{font-size:13px;color:#2a87ff;margin-left:1rem;cursor:pointer}.fos-dialog ::ng-deep .fos-dialog-footer .fosd-selection-content{position:absolute;bottom:25px;left:-10px;background:#fff;z-index:102}.fos-dialog::ng-deep .pagination-container{height:1.5rem;margin-bottom:21px}.fos-dialog::ng-deep .pagination-container input::-webkit-inner-spin-button,.fos-dialog::ng-deep .pagination-container input::-webkit-outer-spin-button{-webkit-appearance:none}.fos-dialog::ng-deep .pagination-container input[type=number]{-moz-appearance:textfield;text-align:center;width:38px;line-height:20px;border:1px solid #e9ecf3;border-radius:6px;box-shadow:0 2px 6px 0 rgba(31,35,41,.06);margin-left:4px;outline:0}.fos-dialog::ng-deep .pagination-container input[type=number]:focus{border:1px solid #0084ff}.fos-dialog::ng-deep .pagination-container li{line-height:22px}.fos-dialog ::ng-deep .fos-treetable td{border-color:#fff}.fos-dialog ::ng-deep .default-light-color{color:#f7b500}.fos-dialog ::ng-deep .default-dark-color{color:#d8dce6}.fos-dialog ::ng-deep .s-personnel-group{width:440px;height:250px;border-radius:5px;background:#fff;box-shadow:0 0 40px 0 rgba(0,0,0,.2);padding:16px 24px;position:fixed;top:50%;left:50%;margin-left:-220px;margin-top:-125px;z-index:9999}.fos-dialog ::ng-deep .s-personnel-group .s-personnel-group-title{font-size:17px;line-height:24px;color:#2d2f33;font-weight:600}.fos-dialog ::ng-deep .s-personnel-group .s-personnel-group-title .f-icon{float:right;font-size:20px;color:#878d99;margin-top:3px;cursor:pointer}.fos-dialog ::ng-deep .s-personnel-group .s-personnel-group-footer{margin-top:20px}.fos-dialog ::ng-deep .s-personnel-group .col-12{padding:0}.fos-dialog ::ng-deep .s-personnel-group-footer .title-checkall{margin-top:6px}.fos-dialog ::ng-deep .s-personnel-group .farris-label-text{color:#5a5e66}.fos-dialog ::ng-deep .s-personnel-group .s-personnel-group-footer .fr{float:right;height:32px}"]
                }] }
    ];
    /** @nocollapse */
    OrganizationSelectorComponent.ctorParameters = function () { return [
        { type: Renderer2 },
        { type: Injector },
        { type: FavoritesTool },
        { type: ApiService },
        { type: NgZone },
        { type: StateMgrTool }
    ]; };
    OrganizationSelectorComponent.propDecorators = {
        baseCls: [{ type: HostBinding, args: ['class.f-organization-selector',] }],
        width: [{ type: HostBinding, args: ['style.width',] }, { type: Input }],
        dialog: [{ type: ViewChild, args: ['farrisDialog',] }],
        libOrgGroup: [{ type: ViewChild, args: ['libOrgGroup',] }],
        libOrgTree: [{ type: ViewChild, args: ['libOrgTree',] }],
        libOrgFavorites: [{ type: ViewChild, args: ['libOrgFavorites',] }],
        showInput: [{ type: Input }],
        busNum: [{ type: Input }],
        multiSelect: [{ type: Input }],
        placeholder: [{ type: Input }],
        searchPlaceholder: [{ type: Input }],
        readonly: [{ type: Input }],
        absUserOrgUrl: [{ type: Input }],
        absRfQueryUrl: [{ type: Input }],
        absRfModifyUrl: [{ type: Input }],
        groupApiUrl: [{ type: Input }],
        groupExtendUrl: [{ type: Input }],
        absOrgType: [{ type: Input }],
        enableHierarchicalLoading: [{ type: Input }],
        notGetStopOrg: [{ type: Input }],
        primaryField: [{ type: Input }],
        displayField: [{ type: Input }],
        orgIds: [{ type: Input }],
        layer: [{ type: Input }],
        cascadeCheck: [{ type: Input }],
        cascadeDown: [{ type: Input }],
        cascadeUp: [{ type: Input }],
        showCheckAll: [{ type: Input }],
        keepSelect: [{ type: Input }],
        formatFn: [{ type: Input }],
        selectedLimit: [{ type: Input }],
        showTabIds: [{ type: Input }],
        activeTabId: [{ type: Input }],
        searchPageSize: [{ type: Input }],
        mapFields: [{ type: Input }],
        multipleChoiceSeparator: [{ type: Input }],
        draggable: [{ type: Input }],
        virtualizedLoad: [{ type: Input }],
        dataPermission: [{ type: Input }],
        dataPermissionIds: [{ type: Input }],
        selectionsChange: [{ type: Output }],
        inputClear: [{ type: Output }],
        tagRemoved: [{ type: Output }]
    };
    return OrganizationSelectorComponent;
}());
export { OrganizationSelectorComponent };
if (false) {
    /** @type {?} */
    OrganizationSelectorComponent.prototype.baseCls;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.width;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.dialog;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.libOrgGroup;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.libOrgTree;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.libOrgFavorites;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.showInput;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.busNum;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.multiSelect;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.placeholder;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.searchPlaceholder;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.readonly;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.absUserOrgUrl;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.absRfQueryUrl;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.absRfModifyUrl;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.groupApiUrl;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.groupExtendUrl;
    /**
     * 数据源类型
     * 默认为： System_organization  系统数据源   获取系统人员、系统组织
     * Administrative_organization  已扩展数据源  获取行政组织、行政人员
     * absOrgType {string}
     * PersonnelSelectorComponent
     * @type {?}
     */
    OrganizationSelectorComponent.prototype.absOrgType;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.enableHierarchicalLoading;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.notGetStopOrg;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.primaryField;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.displayField;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.orgIds;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.layer;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.cascadeCheck;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.cascadeDown;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.cascadeUp;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.showCheckAll;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.keepSelect;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.formatFn;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.selectedLimit;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.showTabIds;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.activeTabId;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.searchPageSize;
    /**
     * 字段映射, 仅在farris form中使用{ 帮助数据字段：表单字段 }
     * @type {?}
     */
    OrganizationSelectorComponent.prototype.mapFields;
    /**
     * 多选分隔符
     * @type {?}
     */
    OrganizationSelectorComponent.prototype.multipleChoiceSeparator;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.draggable;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.virtualizedLoad;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.dataPermission;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.dataPermissionIds;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.selectionsChange;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.inputClear;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.tagRemoved;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.selections;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.originalSelections;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.finalText;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.lookupIcon;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.searchIcon;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.organizationTabId;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.groupTabId;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.favoritesTabId;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.dialogHeight;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.dialogId;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.isShow;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.selectionsSub;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.confirmToken;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.hideSearchPanel;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.searchText;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.onSearchToken;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.enableFavorites;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.enableGroup;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.groupDialogOpend;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.groupDialogTitle;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.groupTitle;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.groupNote;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.validGroupTitle;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.groupTitleStream;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.ngControl;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.selectionsShow;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.editingGroupId;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.cdRef;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.currentTabId;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.messageService;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.notifyService;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.orgTabActive;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.groupTabActive;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.againstSingleSelect;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.localeService;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.languagesArray;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.farrisDialogbeforeClose;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.onModelChange;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.onModelTouched;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.render;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.favoritesTool;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.apiService;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.ngZone;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.stateMgr;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3JnYW5pemF0aW9uLXNlbGVjdG9yLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvdWktb3JnYW5pemF0aW9uLXNlbGVjdG9yLyIsInNvdXJjZXMiOlsibGliL29yZ2FuaXphdGlvbi1zZWxlY3Rvci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQWlCLFNBQVMsRUFBRSxZQUFZLEVBQUUsVUFBVSxFQUFFLFdBQVcsRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBZ0MsTUFBTSxFQUFFLFNBQVMsRUFBaUIsU0FBUyxFQUFFLGlCQUFpQixFQUFZLE1BQU0sZUFBZSxDQUFDO0FBQ2pPLE9BQU8sRUFBd0IsU0FBUyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDcEYsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ3BELE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUNsRCxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFDbEQsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLHlCQUF5QixDQUFDO0FBQ3hELE9BQU8sRUFBRSxVQUFVLEVBQTBDLE1BQU0scUJBQXFCLENBQUM7QUFDekYsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLHlCQUF5QixDQUFDO0FBQ3ZELE9BQU8sRUFBRSxPQUFPLEVBQWdCLE1BQU0sTUFBTSxDQUFDO0FBQzdDLE9BQU8sS0FBSyxDQUFDLE1BQU0sV0FBVyxDQUFDO0FBQy9CLE9BQU8sRUFBRSxZQUFZLEVBQUUsb0JBQW9CLEVBQUUsU0FBUyxFQUFFLEdBQUcsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBRXBGLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSw2QkFBNkIsQ0FBQztBQUM3RCxPQUFPLEVBQUUscUJBQXFCLEVBQUUsTUFBTSxpQ0FBaUMsQ0FBQztBQUN4RSxP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aEIsMkRBQXdCOztJQUN4QixrREFBZTs7SUFDZixtREFBb0Q7O0lBQ3BELG1EQUF1RDs7SUFDdkQsMERBQW1DOztJQUNuQyxtREFBcUI7O0lBQ3JCLHVEQUE2Qjs7SUFDN0IscURBQW1COztJQUNuQixpREFBc0I7O0lBQ3RCLCtDQUFlOzs7OztJQUNmLHNEQUFvQzs7Ozs7SUFDcEMscURBQTZCOztJQUM3Qix3REFBdUI7O0lBQ3ZCLG1EQUFnQjs7SUFDaEIsc0RBQW1COztJQUNuQix3REFBeUI7O0lBQ3pCLG9EQUFxQjs7SUFDckIseURBQXlCOztJQUN6Qix5REFBc0I7O0lBQ3RCLG1EQUFtQjs7SUFDbkIsa0RBQWtCOztJQUNsQix3REFBdUI7Ozs7O0lBQ3ZCLHlEQUFrRTs7SUFDbEUsa0RBQXNCOztJQUN0Qix1REFBdUI7Ozs7O0lBQ3ZCLHVEQUErQjs7Ozs7SUFDL0IsOENBQWlDOzs7OztJQUNqQyxxREFBNkI7Ozs7O0lBQzdCLHVEQUF3Qzs7Ozs7SUFDeEMsc0RBQXFDOztJQUNyQyxxREFBOEI7O0lBQzlCLHVEQUFnQzs7SUFDaEMsNERBQXFDOzs7OztJQUNyQyxzREFBNEM7O0lBQzVDLHVEQUlDOztJQUVELGdFQWFDOztJQUVELHNEQUF3Qzs7SUFDeEMsdURBQXlDOzs7OztJQUd2QywrQ0FBeUI7Ozs7O0lBQ3pCLGlEQUEwQjs7Ozs7SUFDMUIsc0RBQW9DOzs7OztJQUNwQyxtREFBOEI7Ozs7O0lBQzlCLCtDQUFzQjs7Ozs7SUFDdEIsaURBQThCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQWZ0ZXJWaWV3SW5pdCwgQ29tcG9uZW50LCBFdmVudEVtaXR0ZXIsIGZvcndhcmRSZWYsIEhvc3RCaW5kaW5nLCBJbmplY3RvciwgSW5wdXQsIE5nWm9uZSwgT25DaGFuZ2VzLCBPbkRlc3Ryb3ksIE9uSW5pdCwgT3V0cHV0LCBSZW5kZXJlcjIsIFNpbXBsZUNoYW5nZXMsIFZpZXdDaGlsZCwgQ2hhbmdlRGV0ZWN0b3JSZWYsIE9wdGlvbmFsIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IENvbnRyb2xWYWx1ZUFjY2Vzc29yLCBOZ0NvbnRyb2wsIE5HX1ZBTFVFX0FDQ0VTU09SIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xyXG5pbXBvcnQgeyBEaWFsb2dDb21wb25lbnQgfSBmcm9tICdAZmFycmlzL3VpLWRpYWxvZyc7XHJcbmltcG9ydCB7IEFwaVNlcnZpY2UgfSBmcm9tICcuLi91dGlscy9hcGkuc2VydmljZSc7XHJcbmltcG9ydCB7IENvbW1vblV0aWwgfSBmcm9tICcuLi91dGlscy9jb21tb24udG9vbCc7XHJcbmltcG9ydCB7IEZhdm9yaXRlc1Rvb2wgfSBmcm9tICcuLi91dGlscy9mYXZvcml0ZXMudG9vbCc7XHJcbmltcG9ydCB7IENoYW5nZVR5cGUsIE9yZ1JlcXVlc3RQYXJhbSwgU2F2ZUdyb3VwUmVxZXVzdFBhcmFtIH0gZnJvbSAnLi4vdXRpbHMvaW5kZXgudHlwZSc7XHJcbmltcG9ydCB7IFN0YXRlTWdyVG9vbCB9IGZyb20gJy4uL3V0aWxzL3N0YXRlLm1nci50b29sJztcclxuaW1wb3J0IHsgU3ViamVjdCwgU3Vic2NyaXB0aW9uIH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCAqIGFzIF8gZnJvbSAnbG9kYXNoLWVzJztcclxuaW1wb3J0IHsgZGVib3VuY2VUaW1lLCBkaXN0aW5jdFVudGlsQ2hhbmdlZCwgc3dpdGNoTWFwLCB0YXAgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XHJcbmltcG9ydCB7IHJlc3VsdCB9IGZyb20gJ2xvZGFzaCc7XHJcbmltcG9ydCB7IEdyb3VwQ29tcG9uZW50IH0gZnJvbSAnLi90YWItZ3JvdXAvZ3JvdXAuY29tcG9uZW50JztcclxuaW1wb3J0IHsgT3JnYW5pemF0aW9uQ29tcG9uZW50IH0gZnJvbSAnLi90YWItb3JnYW5pemF0aW9uL3RvLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IEZhdm9yaXRlc0NvbXBvbmVudCB9IGZyb20gJy4vdGFiLWZhdm9yaXRlcy9mYXZvcml0ZXMuY29tcG9uZW50JztcclxuaW1wb3J0IHsgTWVzc2FnZXJTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1tZXNzYWdlcic7XHJcbmltcG9ydCB7IE5vdGlmeVNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLW5vdGlmeSc7XHJcbmltcG9ydCB7IExvY2FsZVNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLWxvY2FsZSc7XHJcbmltcG9ydCB7IE9SR0FOSVpBVElPTl9TRUxFQ1RPUl9MT0NBTEUgfSBmcm9tICcuLi91dGlscy9sb2NhbGUnO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICdmYXJyaXMtb3JnYW5pemF0aW9uLXNlbGVjdG9yJyxcclxuICB0ZW1wbGF0ZVVybDogJy4vb3JnYW5pemF0aW9uLXNlbGVjdG9yLmNvbXBvbmVudC5odG1sJyxcclxuICBzdHlsZVVybHM6IFsnLi9vcmdhbml6YXRpb24tc2VsZWN0b3IuY29tcG9uZW50LmNzcyddLFxyXG4gIHByb3ZpZGVyczogW1xyXG4gICAge1xyXG4gICAgICBwcm92aWRlOiBOR19WQUxVRV9BQ0NFU1NPUixcclxuICAgICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gT3JnYW5pemF0aW9uU2VsZWN0b3JDb21wb25lbnQpLFxyXG4gICAgICBtdWx0aTogdHJ1ZVxyXG4gICAgfSxcclxuICAgIEZhdm9yaXRlc1Rvb2wsIEFwaVNlcnZpY2UsIFN0YXRlTWdyVG9vbFxyXG4gIF1cclxufSlcclxuZXhwb3J0IGNsYXNzIE9yZ2FuaXphdGlvblNlbGVjdG9yQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkNoYW5nZXMsIEFmdGVyVmlld0luaXQsIE9uRGVzdHJveSwgQ29udHJvbFZhbHVlQWNjZXNzb3Ige1xyXG5cclxuICBASG9zdEJpbmRpbmcoJ2NsYXNzLmYtb3JnYW5pemF0aW9uLXNlbGVjdG9yJykgYmFzZUNscyA9IHRydWU7XHJcbiAgQEhvc3RCaW5kaW5nKCdzdHlsZS53aWR0aCcpIEBJbnB1dCgpIHdpZHRoID0gJzEwMCUnO1xyXG4gIEBWaWV3Q2hpbGQoJ2ZhcnJpc0RpYWxvZycpIGRpYWxvZzogRGlhbG9nQ29tcG9uZW50O1xyXG4gIEBWaWV3Q2hpbGQoJ2xpYk9yZ0dyb3VwJykgbGliT3JnR3JvdXA6IEdyb3VwQ29tcG9uZW50O1xyXG4gIEBWaWV3Q2hpbGQoJ2xpYk9yZ1RyZWUnKSBsaWJPcmdUcmVlOiBPcmdhbml6YXRpb25Db21wb25lbnQ7XHJcbiAgQFZpZXdDaGlsZCgnbGliT3JnRmF2b3JpdGVzJykgbGliT3JnRmF2b3JpdGVzOiBGYXZvcml0ZXNDb21wb25lbnQ7XHJcbiAgLy8gaW5wdXTmoYbmmK/lkKbmmL7npLpcclxuICBASW5wdXQoKSBzaG93SW5wdXQgPSB0cnVlO1xyXG4gIC8vIOS4muWKoeagh+ivhlxyXG4gIEBJbnB1dCgpIGJ1c051bSA9ICdjb21tb24nO1xyXG4gIEBJbnB1dCgpIG11bHRpU2VsZWN0ID0gdHJ1ZTtcclxuICBASW5wdXQoKSBwbGFjZWhvbGRlciA9ICfor7fpgInmi6knO1xyXG4gIEBJbnB1dCgpIHNlYXJjaFBsYWNlaG9sZGVyID0gJ+ivt+i+k+WFpee8luWPt+aIluWQjeensOaQnOe0oic7XHJcbiAgQElucHV0KCkgcmVhZG9ubHkgPSBmYWxzZTtcclxuICAvLyDkvKDlhaXnmoR1cmxcclxuICBASW5wdXQoKSBhYnNVc2VyT3JnVXJsID0gJy9hcGkvcnVudGltZS9zeXMvdjEuMC9hYnNVc2VyT3JnJztcclxuICBASW5wdXQoKSBhYnNSZlF1ZXJ5VXJsID0gJy9hcGkvcnVudGltZS9zeXMvdjEuMC9hYnNSZWNlbnRDb250YWN0cy9xdWVyeSc7XHJcbiAgQElucHV0KCkgYWJzUmZNb2RpZnlVcmwgPSAnL2FwaS9ydW50aW1lL3N5cy92MS4wL2Fic1JlY2VudENvbnRhY3RzL21vZGlmeSc7XHJcbiAgQElucHV0KCkgZ3JvdXBBcGlVcmwgPSBcIi9hcGkvcnVudGltZS9zeXMvdjEuMC9vcmctZ3JvdXBcIjtcclxuICBASW5wdXQoKSBncm91cEV4dGVuZFVybCA9ICcvcGxhdGZvcm0vcnVudGltZS93Zi93ZWJhcHAvbmctZmFycmlzLW1vYmlsZS11aS9leHRlbmQtb3JnLmpzJztcclxuICAvKipcclxuICAgKiDmlbDmja7mupDnsbvlnotcclxuICAgKiDpu5jorqTkuLrvvJogU3lzdGVtX29yZ2FuaXphdGlvbiAg57O757uf5pWw5o2u5rqQICAg6I635Y+W57O757uf5Lq65ZGY44CB57O757uf57uE57uHXHJcbiAgICogQWRtaW5pc3RyYXRpdmVfb3JnYW5pemF0aW9uICDlt7LmianlsZXmlbDmja7mupAgIOiOt+WPluihjOaUv+e7hOe7h+OAgeihjOaUv+S6uuWRmFxyXG4gICAqIGFic09yZ1R5cGUge3N0cmluZ31cclxuICAgKiBQZXJzb25uZWxTZWxlY3RvckNvbXBvbmVudFxyXG4gICAqL1xyXG4gIEBJbnB1dCgpIGFic09yZ1R5cGUgPSAnU3lzdGVtX29yZ2FuaXphdGlvbic7XHJcbiAgLy8g5ZCv55So5YiG5bGC5Yqg6L29XHJcbiAgQElucHV0KCkgZW5hYmxlSGllcmFyY2hpY2FsTG9hZGluZyA9IHRydWU7XHJcbiAgLy8g5LiN5YyF5ZCr5YGc55So57uE57uHXHJcbiAgQElucHV0KCkgbm90R2V0U3RvcE9yZyA9IHRydWU7XHJcbiAgQElucHV0KCkgcHJpbWFyeUZpZWxkID0gJ29yZ0lkJztcclxuICBASW5wdXQoKSBkaXNwbGF5RmllbGQgPSAnbmFtZSc7XHJcbiAgQElucHV0KCkgb3JnSWRzOiBzdHJpbmdbXSA9IFtdO1xyXG4gIC8vIOWxleW8gOWxgue6p1xyXG4gIEBJbnB1dCgpIGxheWVyID0gMTtcclxuICAvLyDmmK/lkKblkK/nlKjnuqfogZTpgInkuK1cclxuICBASW5wdXQoKSBjYXNjYWRlQ2hlY2sgPSB0cnVlO1xyXG4gIC8vIOe6p+iBlOmAieS4reS4i+e6p1xyXG4gIEBJbnB1dCgpIGNhc2NhZGVEb3duID0gdHJ1ZTtcclxuICAvLyDnuqfogZTpgInkuK3kuIrnuqdcclxuICBASW5wdXQoKSBjYXNjYWRlVXAgPSBmYWxzZTtcclxuICAvLyDmmL7npLrlhajpgInmjInpkq5cclxuICBASW5wdXQoKSBzaG93Q2hlY2tBbGwgPSBmYWxzZTtcclxuICBASW5wdXQoKSBrZWVwU2VsZWN0ID0gZmFsc2U7XHJcbiAgLy8g5Ye95pWw6Ieq5a6a5LmJ6L6T5Ye65qC35byPXHJcbiAgQElucHV0KCkgZm9ybWF0Rm46IChvYmo6IGFueSkgPT4gc3RyaW5nO1xyXG4gIC8vIOS4gOasoeaAp+acgOWkmumAieS4reWkmuWwkeadoVxyXG4gIEBJbnB1dCgpIHNlbGVjdGVkTGltaXQgPSA1MDtcclxuICBASW5wdXQoKSBzaG93VGFiSWRzID0gJ29yZ2FuaXphdGlvbixmYXZvcml0ZXMnO1xyXG4gIEBJbnB1dCgpIGFjdGl2ZVRhYklkID0gJ29yZ2FuaXphdGlvbic7XHJcbiAgLy8g5pCc57Si5YmN56uv5YiG6aG1NTDmnaFcclxuICBASW5wdXQoKSBzZWFyY2hQYWdlU2l6ZSA9IDUwO1xyXG4gIC8qKiDlrZfmrrXmmKDlsIQsIOS7heWcqGZhcnJpcyBmb3Jt5Lit5L2/55SoeyDluK7liqnmlbDmja7lrZfmrrXvvJrooajljZXlrZfmrrUgfSAqL1xyXG4gIEBJbnB1dCgpIG1hcEZpZWxkczogeyBbc291cmNlRmllbGQ6IHN0cmluZ106IHN0cmluZyB9O1xyXG4gIC8qKiDlpJrpgInliIbpmpTnrKYgKi9cclxuICBASW5wdXQoKSBtdWx0aXBsZUNob2ljZVNlcGFyYXRvciA9ICcsJztcclxuICBASW5wdXQoKSBkcmFnZ2FibGUgPSB0cnVlO1xyXG4gIEBJbnB1dCgpIHZpcnR1YWxpemVkTG9hZCA9IGZhbHNlO1xyXG4gIEBJbnB1dCgpIGRhdGFQZXJtaXNzaW9uID0gZmFsc2U7XHJcbiAgQElucHV0KCkgZGF0YVBlcm1pc3Npb25JZHM6IHN0cmluZ1tdID0gW107XHJcbiAgQE91dHB1dCgpIHNlbGVjdGlvbnNDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuICAvLyDlhajpg6jmuIXpmaTmjInpkq7op6blj5Hlm57osINcclxuICBAT3V0cHV0KCkgaW5wdXRDbGVhciA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG4gIC8vIOagh+etvuWIoOmZpOaMiemSruWHuuWPkeWbnuiwg1xyXG4gIEBPdXRwdXQoKSB0YWdSZW1vdmVkID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcblxyXG4gIHNlbGVjdGlvbnMgPSBbXTtcclxuICBvcmlnaW5hbFNlbGVjdGlvbnMgPSBbXTtcclxuICBmaW5hbFRleHQgPSBbXTtcclxuICBsb29rdXBJY29uID0gJzxpIGNsYXNzPVwiZi1pY29uIGYtaWNvbi1sb29rdXBcIj48L2k+JztcclxuICBzZWFyY2hJY29uID0gJzxzcGFuIGNsYXNzPVwiay1pY29uIGstaS1zZWFyY2hcIj48L3NwYW4+JztcclxuICBvcmdhbml6YXRpb25UYWJJZCA9ICdvcmdhbml6YXRpb24nO1xyXG4gIGdyb3VwVGFiSWQgPSAnZ3JvdXAnO1xyXG4gIGZhdm9yaXRlc1RhYklkID0gJ2Zhdm9yaXRlcyc7XHJcbiAgZGlhbG9nSGVpZ2h0ID0gNTQ4O1xyXG4gIGRpYWxvZ0lkID0gJ2RpYWxvZ0lkJztcclxuICBpc1Nob3cgPSBmYWxzZTtcclxuICBwcml2YXRlIHNlbGVjdGlvbnNTdWI6IFN1YnNjcmlwdGlvbjtcclxuICBwcml2YXRlIGNvbmZpcm1Ub2tlbiA9IGZhbHNlO1xyXG4gIGhpZGVTZWFyY2hQYW5lbCA9IHRydWU7XHJcbiAgc2VhcmNoVGV4dCA9ICcnO1xyXG4gIG9uU2VhcmNoVG9rZW46IGFueTtcclxuICBlbmFibGVGYXZvcml0ZXM6IGJvb2xlYW47XHJcbiAgZW5hYmxlR3JvdXA6IGJvb2xlYW47XHJcbiAgZ3JvdXBEaWFsb2dPcGVuZCA9IGZhbHNlO1xyXG4gIGdyb3VwRGlhbG9nVGl0bGUgPSAnJztcclxuICBncm91cFRpdGxlOiBzdHJpbmc7XHJcbiAgZ3JvdXBOb3RlOiBzdHJpbmc7XHJcbiAgdmFsaWRHcm91cFRpdGxlID0gdHJ1ZTtcclxuICBwcml2YXRlIGdyb3VwVGl0bGVTdHJlYW06IFN1YmplY3Q8c3RyaW5nPiA9IG5ldyBTdWJqZWN0PHN0cmluZz4oKTtcclxuICBwdWJsaWMgbmdDb250cm9sOiBhbnk7XHJcbiAgc2VsZWN0aW9uc1Nob3cgPSBmYWxzZTtcclxuICBwcml2YXRlIGVkaXRpbmdHcm91cElkOiBzdHJpbmc7XHJcbiAgcHJpdmF0ZSBjZFJlZjogQ2hhbmdlRGV0ZWN0b3JSZWY7XHJcbiAgcHJpdmF0ZSBjdXJyZW50VGFiSWQ6IHN0cmluZztcclxuICBwcml2YXRlIG1lc3NhZ2VTZXJ2aWNlOiBNZXNzYWdlclNlcnZpY2U7XHJcbiAgcHJpdmF0ZSBub3RpZnlTZXJ2aWNlOiBOb3RpZnlTZXJ2aWNlO1xyXG4gIG9yZ1RhYkFjdGl2ZTogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIGdyb3VwVGFiQWN0aXZlOiBib29sZWFuID0gZmFsc2U7XHJcbiAgYWdhaW5zdFNpbmdsZVNlbGVjdDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIHByaXZhdGUgbG9jYWxlU2VydmljZTogTG9jYWxlU2VydmljZSA9IG51bGw7XHJcbiAgbGFuZ3VhZ2VzQXJyYXkgPSBbXHJcbiAgICB7IGNvZGU6ICd6aC1DSFMnLCBuYW1lOiAn5Lit5paH566A5L2TJywgZGVmYXVsdDogdHJ1ZSB9LFxyXG4gICAgeyBjb2RlOiAnZW4nLCBuYW1lOiAnRW5nbGlzaCcgfSxcclxuICAgIHsgY29kZTogJ3poLUNIVCcsIG5hbWU6ICfkuK3mlofnuYHkvZMnIH1cclxuICBdXHJcblxyXG4gIGZhcnJpc0RpYWxvZ2JlZm9yZUNsb3NlID0gKCkgPT4ge1xyXG4gICAgdGhpcy5pc1Nob3cgPSBmYWxzZTtcclxuICAgIGlmICh0aGlzLmNvbmZpcm1Ub2tlbikge1xyXG4gICAgICB0aGlzLm9yaWdpbmFsU2VsZWN0aW9ucyA9IF8uY2xvbmVEZWVwKHRoaXMuc2VsZWN0aW9ucyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnNlbGVjdGlvbnMgPSBfLmNsb25lRGVlcCh0aGlzLm9yaWdpbmFsU2VsZWN0aW9ucyk7XHJcbiAgICB9XHJcbiAgICBpZighdGhpcy5oaWRlU2VhcmNoUGFuZWwgfHwgdGhpcy5zZWFyY2hUZXh0KSB7XHJcbiAgICAgIHRoaXMuc2VhcmNoVGV4dCA9IG51bGw7XHJcbiAgICAgIHRoaXMuY2xlYXJTZWFyY2goKTtcclxuICAgIH1cclxuICAgIHRoaXMuY29uZmlybVRva2VuID0gZmFsc2U7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcblxyXG4gIG9uTW9kZWxDaGFuZ2U6IGFueSA9ICh2YWw/OiBhbnkpID0+IHsgfTtcclxuICBvbk1vZGVsVG91Y2hlZDogYW55ID0gKHZhbD86IGFueSkgPT4geyB9O1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHByaXZhdGUgcmVuZGVyOiBSZW5kZXJlcjIsXHJcbiAgICBwcml2YXRlIGluamVjdG9yOiBJbmplY3RvcixcclxuICAgIHByaXZhdGUgZmF2b3JpdGVzVG9vbDogRmF2b3JpdGVzVG9vbCxcclxuICAgIHByaXZhdGUgYXBpU2VydmljZTogQXBpU2VydmljZSxcclxuICAgIHByaXZhdGUgbmdab25lOiBOZ1pvbmUsXHJcbiAgICBwcml2YXRlIHN0YXRlTWdyOiBTdGF0ZU1nclRvb2xcclxuICApIHtcclxuICAgIHRoaXMuYXBpU2VydmljZS5hYnNVcmwgPSB0aGlzLmFic1VzZXJPcmdVcmw7XHJcbiAgICB0aGlzLmFwaVNlcnZpY2UuZ3JvdXBBcGlVcmwgPSB0aGlzLmdyb3VwQXBpVXJsO1xyXG4gICAgdGhpcy5jZFJlZiA9IHRoaXMuaW5qZWN0b3IuZ2V0KENoYW5nZURldGVjdG9yUmVmKTtcclxuICAgIHRoaXMubWVzc2FnZVNlcnZpY2UgPSB0aGlzLmluamVjdG9yLmdldChNZXNzYWdlclNlcnZpY2UsIG51bGwpO1xyXG4gICAgdGhpcy5ub3RpZnlTZXJ2aWNlID0gdGhpcy5pbmplY3Rvci5nZXQoTm90aWZ5U2VydmljZSwgbnVsbCk7XHJcbiAgICB0aGlzLmxvY2FsZVNlcnZpY2UgPSB0aGlzLmluamVjdG9yLmdldChMb2NhbGVTZXJ2aWNlKTtcclxuICAgIGlmKCF0aGlzLmxvY2FsZVNlcnZpY2UubGFuZ0RhdGFbJ29yZ2FuaXphdGlvblNlbGVjdG9yJ10pIHtcclxuICAgICAgdGhpcy5sb2NhbGVTZXJ2aWNlLnNldExvY2FsZURhdGEoT1JHQU5JWkFUSU9OX1NFTEVDVE9SX0xPQ0FMRSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB3cml0ZVZhbHVlKG9iajogYW55KTogdm9pZCB7XHJcbiAgICBpZiAoISFvYmogJiYgdHlwZW9mIG9iaiA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgdGhpcy5maW5hbFRleHQgPSBvYmouc3BsaXQodGhpcy5tdWx0aXBsZUNob2ljZVNlcGFyYXRvcik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmZpbmFsVGV4dCA9IFtdO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVnaXN0ZXJPbkNoYW5nZShmbjogYW55KTogdm9pZCB7XHJcbiAgICB0aGlzLm9uTW9kZWxDaGFuZ2UgPSBmbjtcclxuICB9XHJcblxyXG4gIHJlZ2lzdGVyT25Ub3VjaGVkKGZuOiBhbnkpOiB2b2lkIHtcclxuICAgIHRoaXMub25Nb2RlbFRvdWNoZWQgPSBmbjtcclxuICB9XHJcblxyXG4gIHNldERpc2FibGVkU3RhdGU/KGlzRGlzYWJsZWQ6IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgIHRocm93IG5ldyBFcnJvcignTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC4nKTtcclxuICB9XHJcblxyXG4gIG5nT25Jbml0KCkge1xyXG4gICAgdGhpcy5pbml0RGlhbG9nSGVpZ2h0KCk7XHJcbiAgICB0aGlzLmxpc3RlblNlbGVjdGlvbnNDaGFuZ2UoKTtcclxuICAgIHRoaXMuaW5pdFRhYnMoKTtcclxuICAgIHRoaXMuaW5pdEdyb3VwU2VhcmNoKCk7XHJcbiAgICB0aGlzLm5nQ29udHJvbCA9IHRoaXMuaW5qZWN0b3IuZ2V0KE5nQ29udHJvbCwgbnVsbCk7XHJcbiAgICB0aGlzLm1hcEZpZWxkcyAmJiB0aGlzLm1hcEZpZWxkczJDb21wb25lbnQoKTtcclxuICB9XHJcblxyXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpOiB2b2lkIHtcclxuICAgIHRoaXMubGlzdGVuV2luZG93UmVzaXplKCk7XHJcbiAgfVxyXG5cclxuICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XHJcbiAgICBjb25zdCBvcmdJZHNDaGFuZ2UgPSBjaGFuZ2VzLm9yZ0lkcztcclxuICAgIGlmIChvcmdJZHNDaGFuZ2UgJiYgb3JnSWRzQ2hhbmdlLmN1cnJlbnRWYWx1ZSkge1xyXG4gICAgICB0aGlzLmFzc2VtYmxlRGF0YUJ5T3JnSWRzKG9yZ0lkc0NoYW5nZS5jdXJyZW50VmFsdWUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbmdPbkRlc3Ryb3koKSB7XHJcbiAgICB0aGlzLnNlbGVjdGlvbnNTdWIudW5zdWJzY3JpYmUoKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZW1pdFNlbGVjdGlvbnMoc2VsZWN0aW9uczogYW55LCBjaGFuZ2VUeXBlID0gQ2hhbmdlVHlwZS5WYWx1ZUNoYW5nZWQsIGZyb20gPSAnZm9ybScpIHtcclxuICAgIHRoaXMuc3RhdGVNZ3IuZW1pdFNlbGVjdGlvbnMoc2VsZWN0aW9ucywgY2hhbmdlVHlwZSwgZnJvbSk7XHJcbiAgfVxyXG5cclxuICAvLyDmoLnmja7lrZfmrrXmmKDlsITlhbPns7vojrflj5blvZPliY3lt7LpgInnu4Tnu4fnmoRpZO+8jOi/m+iAjOWcqOaJk+W8gOmAiee7hOe7h+W8ueeql+aXtui/m+ihjOebuOW6lOWxleekulxyXG4gIHByaXZhdGUgbWFwRmllbGRzMkNvbXBvbmVudCgpIHtcclxuICAgIGNvbnN0IGhlbHBGaWVsZHMgPSBPYmplY3Qua2V5cyh0aGlzLm1hcEZpZWxkcyk7XHJcbiAgICBpZiAoIWhlbHBGaWVsZHMuaW5jbHVkZXModGhpcy5wcmltYXJ5RmllbGQpKSB7XHJcbiAgICAgIC8vIHRoaXMubm90aWZ5U2VydmljZS53YXJuaW5nKHRoaXMubG9jYWxlU2VydmljZS5nZXRWYWx1ZShcIm9yZ2FuaXphdGlvblNlbGVjdG9yLmVycm9yTWVzc2FnZS5tYXBGaWVsZHNcIikpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAoXHJcbiAgICAgIHRoaXMubmdDb250cm9sICYmXHJcbiAgICAgIHRoaXMubmdDb250cm9sLmZvcm1EaXJlY3RpdmUgJiZcclxuICAgICAgdGhpcy5uZ0NvbnRyb2wuZm9ybURpcmVjdGl2ZS5mb3JtICYmXHJcbiAgICAgIHRoaXMubmdDb250cm9sLmZvcm1EaXJlY3RpdmUuZm9ybS5iaW5kaW5nRGF0YVxyXG4gICAgKSB7XHJcbiAgICAgIGNvbnN0IGJpbmRpbmdEYXRhID0gdGhpcy5uZ0NvbnRyb2wuZm9ybURpcmVjdGl2ZS5mb3JtLmJpbmRpbmdEYXRhO1xyXG4gICAgICBpZiAoYmluZGluZ0RhdGEuc2V0VmFsdWUpIHtcclxuICAgICAgICBjb25zdCBiaW5kaW5nUGF0aCA9IHRoaXMubmdDb250cm9sLmZvcm1EaXJlY3RpdmUuZm9ybS5iaW5kaW5nUGF0aDtcclxuICAgICAgICBsZXQgcGF0aEFycjogc3RyaW5nW10gPSBbXTtcclxuICAgICAgICBpZiAoYmluZGluZ1BhdGgpIHtcclxuICAgICAgICAgIHBhdGhBcnIgPSBiaW5kaW5nUGF0aC5zcGxpdCgnLycpLmZpbHRlcihuID0+IG4gIT09ICcnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgbXVsdGlQYXRoID0gdGhpcy5tYXBGaWVsZHNbdGhpcy5wcmltYXJ5RmllbGRdLnNwbGl0KHRoaXMubXVsdGlwbGVDaG9pY2VTZXBhcmF0b3IpO1xyXG4gICAgICAgIGNvbnN0IGZpZWxkUGF0aHMgPSBwYXRoQXJyLmNvbmNhdChtdWx0aVBhdGhbMF0uc3BsaXQoJy4nKSk7XHJcbiAgICAgICAgY29uc3QgaWRzID0gYmluZGluZ0RhdGEuZ2V0VmFsdWUoZmllbGRQYXRocyk7XHJcbiAgICAgICAgaWYgKCFpZHMpIHtcclxuICAgICAgICAgIHRoaXMuZW1pdFNlbGVjdGlvbnMoW10pO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmFzc2VtYmxlRGF0YUJ5T3JnSWRzKGlkcy5zcGxpdCh0aGlzLm11bHRpcGxlQ2hvaWNlU2VwYXJhdG9yKSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIOagueaNruS8oOWFpeeahOe7hOe7h2lk5pWw57uE6I635Y+W5a+55bqU55qE57uE57uHXHJcbiAgLy8g55SxbmdPbkNoYW5nZXMoKeOAgW1hcEZpZWxkczJDb21wb25lbnQoKeiwg+eUqFxyXG4gIHByaXZhdGUgYXNzZW1ibGVEYXRhQnlPcmdJZHMoaWRzOiBzdHJpbmdbXSkge1xyXG4gICAgaWYgKCFpZHMgfHwgaWRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAoaWRzICYmIGlkcy5sZW5ndGggPiAxICYmICF0aGlzLm11bHRpU2VsZWN0KSB7XHJcbiAgICAgIHRoaXMuYWdhaW5zdFNpbmdsZVNlbGVjdCA9IHRydWU7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IHBhcmFtOiBPcmdSZXF1ZXN0UGFyYW0gPSB7XHJcbiAgICAgIGFic09yZ1R5cGU6IHRoaXMuYWJzT3JnVHlwZSxcclxuICAgICAgaWRMaXN0OiBpZHMsXHJcbiAgICAgIGdldE9yZ0FsbFBhdGg6IHRydWUsXHJcbiAgICAgIGdldEN1clVzZXI6IGZhbHNlXHJcbiAgICB9O1xyXG4gICAgdGhpcy5hcGlTZXJ2aWNlLmdldE9yZ2FuaXphdGlvbihwYXJhbSkuc3Vic2NyaWJlKChyZXM6IGFueSkgPT4ge1xyXG4gICAgICBpZiAocmVzICYmIHJlcy5kYXRhKSB7XHJcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25zID0gcmVzLmRhdGE7XHJcbiAgICAgICAgaWYgKCF0aGlzLm1hcEZpZWxkcykge1xyXG4gICAgICAgICAgdGhpcy5hc3NlbWJsZUZpbmFsVGV4dCgpO1xyXG4gICAgICAgICAgaWYodGhpcy5kYXRhUGVybWlzc2lvbikge1xyXG4gICAgICAgICAgICB0aGlzLmVtaXRTZWxlY3Rpb25zKHRoaXMuc2VsZWN0aW9ucyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuZW1pdFNlbGVjdGlvbnModGhpcy5zZWxlY3Rpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8g5p6E6YCg5Zue5pi+6IezaW5wdXTmlofmnKzmoYbnmoTlhoXlrrlcclxuICAvLyDlnKjmnIltYXBGaWVsZHPnmoTliY3mj5DkuIvvvIznlLFhc3NlbWJsZURhdGFCeU9yZ0lkcygp6LCD55So77yMY2xlYXJBbGwoKeOAgXJlbW92ZUl0ZW0oKeOAgXJldHVyblJlc3VsdCgp5Lmf5Lya6LCD55SoXHJcbiAgcHJpdmF0ZSBhc3NlbWJsZUZpbmFsVGV4dCgpIHtcclxuICAgIHRoaXMuZmluYWxUZXh0ID0gW107XHJcbiAgICB0aGlzLnNlbGVjdGlvbnMuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHtcclxuICAgICAgY29uc3QgZm9ybWF0ZWROYW1lID0gdGhpcy5mb3JtYXRGbiAmJiB0aGlzLmZvcm1hdEZuKGl0ZW0pO1xyXG4gICAgICBjb25zdCBmaW5hbFRleHQgPSBmb3JtYXRlZE5hbWUgPyBmb3JtYXRlZE5hbWUgOiBpdGVtW3RoaXMuZGlzcGxheUZpZWxkXTtcclxuICAgICAgdGhpcy5maW5hbFRleHQucHVzaChmaW5hbFRleHQpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLmZpbmFsVGV4dCA9IHRoaXMuZmluYWxUZXh0LnNsaWNlKCk7XHJcbiAgfVxyXG5cclxuICAvLyDliJ3lp4vljJblvLnnqpdpZOWPiumrmOW6plxyXG4gIC8vIOeUsW5nT25Jbml0KCnosIPnlKhcclxuICBpbml0RGlhbG9nSGVpZ2h0KCkge1xyXG4gICAgY29uc3QgdXVpZCA9IENvbW1vblV0aWwubmV3R3VpZCgpO1xyXG4gICAgdGhpcy5kaWFsb2dJZCArPSB1dWlkO1xyXG4gICAgY29uc3Qgd2luZG93SW5uZXJIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcbiAgICB0aGlzLmRpYWxvZ0hlaWdodCA9IHdpbmRvd0lubmVySGVpZ2h0IC0gNjA7XHJcbiAgICBpZiAodGhpcy5kaWFsb2dIZWlnaHQgPiA2ODApIHtcclxuICAgICAgdGhpcy5kaWFsb2dIZWlnaHQgPSA2ODA7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyDnm5HlkKxzZWxlY3Rpb25z55qE5Y+Y5pu077yM5Y+Y5pu05YyF5ZCr5LiJ56eN5b2i5byP77yadmFsdWVDaGFuZ2XjgIFhcHBlbmTjgIFyZW1vdmVcclxuICAvLyDnlLFuZ09uSW5pdCgp6LCD55SoXHJcbiAgbGlzdGVuU2VsZWN0aW9uc0NoYW5nZSgpIHtcclxuICAgIHRoaXMuc2VsZWN0aW9uc1N1YiA9IHRoaXMuc3RhdGVNZ3Iuc2VsZWN0aW9uc1N1YmplY3Quc3Vic2NyaWJlKGRhdGEgPT4ge1xyXG4gICAgICBpZiAoZGF0YS5jaGFuZ2VUeXBlID09PSBDaGFuZ2VUeXBlLlZhbHVlQ2hhbmdlZCkge1xyXG4gICAgICAgIHRoaXMuc2VsZWN0aW9ucyA9IF8uY2xvbmVEZWVwKGRhdGEudmFsdWUpO1xyXG4gICAgICB9IGVsc2UgaWYgKGRhdGEuY2hhbmdlVHlwZSA9PT0gQ2hhbmdlVHlwZS5SZW1vdmUpIHtcclxuICAgICAgICB0aGlzLnNlbGVjdGlvbnMgPSB0aGlzLnNlbGVjdGlvbnMuZmlsdGVyKGl0ZW0gPT4gaXRlbVt0aGlzLnByaW1hcnlGaWVsZF0gIT09IGRhdGEudmFsdWVbdGhpcy5wcmltYXJ5RmllbGRdKTtcclxuICAgICAgfSBlbHNlIGlmIChkYXRhLmNoYW5nZVR5cGUgPT09IENoYW5nZVR5cGUuQXBwZW5kKSB7XHJcbiAgICAgICAgQ29tbW9uVXRpbC5maW5kSW5kZXgoZGF0YS52YWx1ZVt0aGlzLnByaW1hcnlGaWVsZF0sIHRoaXMucHJpbWFyeUZpZWxkLCB0aGlzLnNlbGVjdGlvbnMpID09PSAtMSA/IHRoaXMuc2VsZWN0aW9ucy5wdXNoKGRhdGEudmFsdWUpIDogbnVsbDtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLmNkUmVmLmRldGVjdENoYW5nZXMoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8g5qC55o2uc2hvd1RhYklkc+WIpOaWreaYr+WQpuWQr+eUqOaUtuiXj+WKn+iDveOAgee+pOe7hOWKn+iDvVxyXG4gIC8vIOeUsW5nT25Jbml0KCnosIPnlKhcclxuICBwcml2YXRlIGluaXRUYWJzKCkge1xyXG4gICAgaWYoIXRoaXMuc2hvd1RhYklkcy5pbmNsdWRlcyh0aGlzLmFjdGl2ZVRhYklkKSkge1xyXG4gICAgICB0aGlzLmFjdGl2ZVRhYklkID0gdGhpcy5zaG93VGFiSWRzLnNwbGl0KCcsJylbMF07XHJcbiAgICB9XHJcbiAgICBpZih0aGlzLmRhdGFQZXJtaXNzaW9uKSB7XHJcbiAgICAgIHRoaXMuc2hvd1RhYklkcyA9IHRoaXMub3JnYW5pemF0aW9uVGFiSWQ7XHJcbiAgICAgIHRoaXMuYWN0aXZlVGFiSWQgPSB0aGlzLm9yZ2FuaXphdGlvblRhYklkO1xyXG4gICAgICB0aGlzLm9yZ1RhYkFjdGl2ZSA9IHRydWU7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHRoaXMuY3VycmVudFRhYklkID0gdGhpcy5hY3RpdmVUYWJJZDtcclxuICAgIGlmICh0aGlzLnNob3dUYWJJZHMuaW5kZXhPZih0aGlzLmZhdm9yaXRlc1RhYklkKSAhPT0gLTEpIHtcclxuICAgICAgdGhpcy5lbmFibGVGYXZvcml0ZXMgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5lbmFibGVGYXZvcml0ZXMgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLnNob3dUYWJJZHMuaW5kZXhPZih0aGlzLmdyb3VwVGFiSWQpICE9PSAtMSkge1xyXG4gICAgICB0aGlzLmVuYWJsZUdyb3VwID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuZW5hYmxlR3JvdXAgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIGlmKHRoaXMuYWN0aXZlVGFiSWQgPT0gdGhpcy5vcmdhbml6YXRpb25UYWJJZCkge1xyXG4gICAgICB0aGlzLm9yZ1RhYkFjdGl2ZSA9IHRydWU7XHJcbiAgICB9IGVsc2UgaWYodGhpcy5hY3RpdmVUYWJJZCA9PSB0aGlzLmdyb3VwVGFiSWQpIHtcclxuICAgICAgdGhpcy5ncm91cFRhYkFjdGl2ZSA9IHRydWU7XHJcbiAgICB9XHJcbiAgICAvLyDlkK/nlKjnvqTnu4Tlip/og73mianlsZXlh73mlbBcclxuICAgIC8qXHJcbiAgICBpZiAodGhpcy5lbmFibGVHcm91cCkge1xyXG4gICAgICBjb25zdCBjY3dvcmsgPSB3aW5kb3cudG9wLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIilcclxuICAgICAgY2N3b3JrLnNyYyA9IHRoaXMuZ3JvdXBFeHRlbmRVcmwgKyAnP3ZzPScgKyBNYXRoLnJhbmRvbSgpO1xyXG4gICAgICB3aW5kb3cuZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChjY3dvcmspO1xyXG4gICAgfVxyXG4gICAgKi9cclxuICB9XHJcblxyXG4gIC8vIOWIpOaWree+pOe7hOWQjeensOaYr+WQpuWQiOazlVxyXG4gIC8vIOeUsW5nT25Jbml0KCnosIPnlKhcclxuICBwcml2YXRlIGluaXRHcm91cFNlYXJjaCgpIHtcclxuICAgIGlmICh0aGlzLmVuYWJsZUdyb3VwKSB7XHJcbiAgICAgIHRoaXMuZ3JvdXBUaXRsZVN0cmVhbS5waXBlKFxyXG4gICAgICAgIGRlYm91bmNlVGltZSg1MDApLFxyXG4gICAgICAgIGRpc3RpbmN0VW50aWxDaGFuZ2VkKClcclxuICAgICAgKS5zdWJzY3JpYmUoZGF0YSA9PiB7XHJcbiAgICAgICAgaWYgKCEhZGF0YSkge1xyXG4gICAgICAgICAgdGhpcy52YWxpZEdyb3VwVGl0bGUgPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLnZhbGlkR3JvdXBUaXRsZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyDlvZPmtY/op4jlmajnqpflj6PlpKflsI/lj5jmm7Tml7bvvIzlj5jmm7TlvLnnqpfnmoTlpKflsI9cclxuICAvLyDnlLFuZ0FmdGVyVmlld0luaXQoKeiwg+eUqFxyXG4gIGxpc3RlbldpbmRvd1Jlc2l6ZSgpIHtcclxuICAgIGNvbnN0IGRpYWxvZ0VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIHRoaXMuZGlhbG9nSWQpO1xyXG4gICAgbGV0IHRhcmdldEVsZW1lbnQgPSBudWxsO1xyXG4gICAgaWYgKCEhZGlhbG9nRWxlbWVudCkge1xyXG4gICAgICB0YXJnZXRFbGVtZW50ID0gZGlhbG9nRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwtZGlhbG9nJyk7XHJcbiAgICB9XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4ge1xyXG4gICAgICBpZiAoISF0YXJnZXRFbGVtZW50KSB7XHJcbiAgICAgICAgbGV0IGhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodCAtIDYwO1xyXG4gICAgICAgIGlmIChoZWlnaHQgPiA2ODApIHtcclxuICAgICAgICAgIGhlaWdodCA9IDY4MDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5kaWFsb2dIZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICAgICAgY29uc3QgaW5uZXJIZWlnaHQgPSBoZWlnaHQgKyAncHgnO1xyXG4gICAgICAgIGNvbnN0IG1hcmdpblRvcCA9ICctJyArIGhlaWdodCAvIDIgKyAncHgnO1xyXG4gICAgICAgIHRoaXMucmVuZGVyLnNldFN0eWxlKHRhcmdldEVsZW1lbnQsICdoZWlnaHQnLCBpbm5lckhlaWdodCk7XHJcbiAgICAgICAgdGhpcy5yZW5kZXIuc2V0U3R5bGUodGFyZ2V0RWxlbWVudCwgJ21hcmdpbi10b3AnLCBtYXJnaW5Ub3ApO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIOWIneWni+WMlue7hOe7h+aUtuiXj+aVsOaNrlxyXG4gIC8vIOeUsXNob3dGYXJyaXNEaWFsb2coKeiwg+eUqO+8jOWNs+aJk+W8gOmAiee7hOe7h+W8ueeql+aXtuWPkemAgeivt+axglxyXG4gIHByaXZhdGUgaW5pdEZhdm9yaXRlcygpIHtcclxuICAgIHRoaXMuZmF2b3JpdGVzVG9vbC5hYnNPcmdUeXBlID0gdGhpcy5hYnNPcmdUeXBlO1xyXG4gICAgdGhpcy5mYXZvcml0ZXNUb29sLmJ1c051bSA9IHRoaXMuYnVzTnVtO1xyXG4gICAgdGhpcy5mYXZvcml0ZXNUb29sLmlkRmllbGQgPSB0aGlzLnByaW1hcnlGaWVsZDtcclxuICAgIHRoaXMuZmF2b3JpdGVzVG9vbC5hYnNSZlF1ZXJ5VXJsID0gdGhpcy5hYnNSZlF1ZXJ5VXJsO1xyXG4gICAgdGhpcy5mYXZvcml0ZXNUb29sLmFic1JmTW9kaWZ5VXJsID0gdGhpcy5hYnNSZk1vZGlmeVVybDtcclxuICAgIHRoaXMuZmF2b3JpdGVzVG9vbC5nZXRGYXZvcml0ZXNMaXN0KCkuc3Vic2NyaWJlKChyZXN1bHQpID0+IHtcclxuICAgICAgY29uc3QgcmVzRGF0YSA9IHJlc3VsdCA/IChyZXN1bHQgYXMgYW55KS5vcmdEYXRhIDogW107XHJcbiAgICAgIHRoaXMuZmF2b3JpdGVzVG9vbC5mYXZvcml0ZXNMaXN0ID0gcmVzRGF0YTtcclxuICAgICAgdGhpcy5mYXZvcml0ZXNUb29sLnNldEZhdm9yaXRlc0xpc3QocmVzRGF0YSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIOaJk+W8gOmAiee7hOe7h+W8ueeql1xyXG4gIHNob3dGYXJyaXNEaWFsb2coKSB7XHJcbiAgICB0aGlzLmlzU2hvdyA9IHRydWU7XHJcbiAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuZGlhbG9nLnNob3coKTtcclxuICAgICAgICBpZiAodGhpcy5zaG93VGFiSWRzLmluZGV4T2YodGhpcy5mYXZvcml0ZXNUYWJJZCkgIT09IC0xKSB7XHJcbiAgICAgICAgICB0aGlzLmluaXRGYXZvcml0ZXMoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYodGhpcy5hZ2FpbnN0U2luZ2xlU2VsZWN0KSB7XHJcbiAgICAgICAgICB0aGlzLm5vdGlmeVNlcnZpY2Uud2FybmluZyh0aGlzLmxvY2FsZVNlcnZpY2UuZ2V0VmFsdWUoXCJvcmdhbml6YXRpb25TZWxlY3Rvci5lcnJvck1lc3NhZ2UubXVsdGlTZWxlY3RcIikpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5tYXBGaWVsZHMgJiYgIU9iamVjdC5rZXlzKHRoaXMubWFwRmllbGRzKS5pbmNsdWRlcyh0aGlzLnByaW1hcnlGaWVsZCkpIHtcclxuICAgICAgICAgIHRoaXMubm90aWZ5U2VydmljZS53YXJuaW5nKHRoaXMubG9jYWxlU2VydmljZS5nZXRWYWx1ZShcIm9yZ2FuaXphdGlvblNlbGVjdG9yLmVycm9yTWVzc2FnZS5tYXBGaWVsZHNcIikpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnN0YXRlTWdyLmVtaXRTZWxlY3Rpb25zKHRoaXMuc2VsZWN0aW9ucywgQ2hhbmdlVHlwZS5WYWx1ZUNoYW5nZWQsICdmb3JtJyk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIC8vIGlucHV05paH5pys5qGG5YaF54K55Ye75riF6Zmk5oyJ6ZKu5pe26Kem5Y+RXHJcbiAgY2xlYXJBbGwoKSB7XHJcbiAgICB0aGlzLnNlbGVjdGlvbnMgPSBbXTtcclxuICAgIHRoaXMuYXNzZW1ibGVGaW5hbFRleHQoKTtcclxuICAgIHRoaXMub25Nb2RlbENoYW5nZSh0aGlzLmZpbmFsVGV4dC5qb2luKCkpO1xyXG4gICAgdGhpcy5vbk1vZGVsVG91Y2hlZCh0aGlzLmZpbmFsVGV4dC5qb2luKCkpO1xyXG4gICAgdGhpcy5lbWl0U2VsZWN0aW9ucyhbXSk7XHJcbiAgICB0aGlzLmlucHV0Q2xlYXIuZW1pdCgpO1xyXG4gIH1cclxuXHJcbiAgLy8gaW5wdXTmlofmnKzmoYblhoXliKDpmaTmn5DkuIDkuKrlt7LpgInnu4Tnu4fml7bop6blj5FcclxuICByZW1vdmVJdGVtKGRhdGE6IGFueSwgaW5kZXg6IG51bWJlcikge1xyXG4gICAgaWYodGhpcy5zZWxlY3Rpb25zLmxlbmd0aCA+IDApIHtcclxuICAgICAgdGhpcy5zZWxlY3Rpb25zLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgIHRoaXMuYXNzZW1ibGVGaW5hbFRleHQoKTtcclxuICAgICAgdGhpcy5lbWl0U2VsZWN0aW9ucyhkYXRhLCBDaGFuZ2VUeXBlLlJlbW92ZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmZpbmFsVGV4dCA9IHRoaXMuZmluYWxUZXh0LmZpbHRlcih0ZXh0ID0+IHRleHQgIT09IGRhdGEpO1xyXG4gICAgfSBcclxuICAgIHRoaXMub25Nb2RlbENoYW5nZSh0aGlzLmZpbmFsVGV4dC5qb2luKCkpO1xyXG4gICAgdGhpcy5vbk1vZGVsVG91Y2hlZCh0aGlzLmZpbmFsVGV4dC5qb2luKCkpO1xyXG4gICAgdGhpcy50YWdSZW1vdmVkLmVtaXQoe1xyXG4gICAgICBkZWxldGVJdGVtOiBkYXRhLFxyXG4gICAgICBkZWxldGVJbmRleDogaW5kZXgsXHJcbiAgICAgIHNlbGVjdGlvbnM6IHRoaXMuc2VsZWN0aW9uc1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyDmuIXnqbrmnIDov5Hlt7LpgInnu4Tnu4dcclxuICBjbGVhclNlbGV0aW9ucygpIHtcclxuICAgIHRoaXMuc3RhdGVNZ3IuZW1pdFNlbGVjdGlvbnMoW10sIENoYW5nZVR5cGUuVmFsdWVDaGFuZ2VkLCAnZm9ybScpO1xyXG4gIH1cclxuXHJcbiAgLy8g54K55Ye75pCc57Si5oyJ6ZKu5oiW6ICF5pWy5Ye75Zue6L2m5pe26Kem5Y+RXHJcbiAgb25TZWFyY2goKSB7XHJcbiAgICBpZiAoISF0aGlzLnNlYXJjaFRleHQpIHtcclxuICAgICAgdGhpcy5oaWRlU2VhcmNoUGFuZWwgPSBmYWxzZTtcclxuICAgICAgdGhpcy5vblNlYXJjaFRva2VuID0gQ29tbW9uVXRpbC5uZXdHdWlkKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyDmuIXnqbrnu4Tnu4fmkJzntKLlhoXlrrnml7bop6blj5FcclxuICBjbGVhclNlYXJjaCgpIHtcclxuICAgIHRoaXMuaGlkZVNlYXJjaFBhbmVsID0gdHJ1ZTtcclxuICAgIHRoaXMub25TZWFyY2hUb2tlbiA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgLy8g55uR5ZCs5pCc57Si5qGG5YaF6L6T5YWl55qE5paH5pysXHJcbiAgbGlzdGVuU2VhcmNoVGV4dChlKSB7XHJcbiAgICBpZiAoZS5jb2RlID09PSAnQmFja3NwYWNlJyB8fCBlLmNvZGUgPT09ICdEZWxldGUnKSB7XHJcbiAgICAgIGlmICghdGhpcy5zZWFyY2hUZXh0KSB7XHJcbiAgICAgICAgdGhpcy5jbGVhclNlYXJjaCgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyDnm5HlkKzmkJzntKLpobXnmoTlhbPpl63kuovku7bvvIznm67liY3lj6rkvJrmjqXmlLbliLB0cnVlXHJcbiAgbGlzdGVuQ2xvc2VQYW5lbENoYW5nZShlKSB7XHJcbiAgICB0aGlzLmhpZGVTZWFyY2hQYW5lbCA9IGU7XHJcbiAgICAvLyDlhbPpl63mkJzntKLnu5PmnpzpobXlkI7vvIzpnIDopoHmm7TmlrDmoJHoioLngrnnmoTmmK/lkKbpgInkuK3nirbmgIFcclxuICAgIGlmKHRoaXMuY3VycmVudFRhYklkID09IHRoaXMub3JnYW5pemF0aW9uVGFiSWQpIHtcclxuICAgICAgdGhpcy5saWJPcmdUcmVlLmZhcnJpc1RyZWUuY2xlYXJBbGwoKTtcclxuICAgICAgdGhpcy5saWJPcmdUcmVlLmZhcnJpc1RyZWUucm93SGVpZ2h0ID0gMjg7XHJcbiAgICAgIGlmKHRoaXMubXVsdGlTZWxlY3QpIHtcclxuICAgICAgICB0aGlzLmxpYk9yZ1RyZWUuY2hlY2tPcmdUcmVlTm9kZXMoKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmxpYk9yZ1RyZWUuc2VsZWN0T3JnVHJlZU5vZGUoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8g5YWz6Zet5L+d5a2Y576k57uE55qE5by556qX5pe254K55Ye74oCc5Y+W5raI4oCd5oiW6ICF5Y+z5LiK6KeS5Y+J5Y+36Kem5Y+RXHJcbiAgY2xvc2VHcm91cERpYWxvZygpIHtcclxuICAgIHRoaXMuZ3JvdXBEaWFsb2dPcGVuZCA9IGZhbHNlO1xyXG4gICAgdGhpcy5lZGl0aW5nR3JvdXBJZCA9IG51bGw7XHJcbiAgICB0aGlzLmdyb3VwVGl0bGUgPSBudWxsO1xyXG4gICAgdGhpcy5ncm91cE5vdGUgPSBudWxsO1xyXG4gICAgdGhpcy5ncm91cERpYWxvZ1RpdGxlID0gdGhpcy5sb2NhbGVTZXJ2aWNlLmdldFZhbHVlKFwib3JnYW5pemF0aW9uU2VsZWN0b3IuZ3JvdXAuc2F2ZUdyb3VwXCIpO1xyXG4gIH1cclxuXHJcbiAgLy8g5Zyo5L+d5a2Y576k57uE55qE5by556qX5YaF77yM5L+u5pS5576k57uE5ZCN56ew5pe26Kem5Y+R77yM55uR5ZCsa2V5dXDkuovku7ZcclxuICBsaXN0ZW5Hcm91cFRpdGxlKGUpIHtcclxuICAgIHRoaXMuZ3JvdXBUaXRsZVN0cmVhbS5uZXh0KHRoaXMuZ3JvdXBUaXRsZSk7XHJcbiAgfVxyXG5cclxuICAvLyDpgInnu4Tnu4fnmoTlvLnnqpflhoXmnInkuIDkuKrigJzlt7LpgInigJ3moIflv5fvvIzpvKDmoIfnp7vkuIrljrvlkI7kvJrmmL7npLrlt7LpgInnu4Tnu4fnmoTpobXpnaLvvIzor6XpobXpnaLlhoXmnInigJzkv53lrZjkuLrnvqTnu4TigJ3nmoTmjInpkq7vvIzngrnlh7vlkI7lj6/ku6XmiZPlvIDkv53lrZjnvqTnu4TnmoTlvLnnqpdcclxuICBsaXN0ZW5PcGVuR3JvdXAoZSkge1xyXG4gICAgdGhpcy5ncm91cERpYWxvZ09wZW5kID0gZTtcclxuICAgIHRoaXMuZ3JvdXBEaWFsb2dUaXRsZSA9IHRoaXMubG9jYWxlU2VydmljZS5nZXRWYWx1ZShcIm9yZ2FuaXphdGlvblNlbGVjdG9yLmdyb3VwLnNhdmVHcm91cFwiKTtcclxuICB9XHJcblxyXG4gIC8vIOeCueWHu+e+pOe7hOe8lui+keaMiemSruinpuWPke+8jOWPr+S/ruaUuemAieS4ree+pOe7hOeahOWQjeensOWPiuaPj+i/sFxyXG4gIGxpc3Rlbkdyb3VwQ2hhbmdlKGl0ZW06IGFueSkge1xyXG4gICAgdGhpcy5ncm91cERpYWxvZ09wZW5kID0gdHJ1ZTtcclxuICAgIHRoaXMuZWRpdGluZ0dyb3VwSWQgPSBpdGVtLmlkO1xyXG4gICAgdGhpcy5ncm91cFRpdGxlID0gaXRlbS50aXRsZTtcclxuICAgIHRoaXMuZ3JvdXBOb3RlID0gaXRlbS5kZXNjcmlwdGlvbjtcclxuICAgIHRoaXMuZ3JvdXBEaWFsb2dUaXRsZSA9IHRoaXMubG9jYWxlU2VydmljZS5nZXRWYWx1ZShcIm9yZ2FuaXphdGlvblNlbGVjdG9yLmdyb3VwLmVkaXRHcm91cFwiKTtcclxufVxyXG5cclxuICAvLyDlhbPpl63kv53lrZjnvqTnu4TnmoTlvLnnqpfml7bngrnlh7vigJznoa7lrprigJ3op6blj5HvvIzlsIblvZPliY3lt7LpgInnu4Tnu4fkv53lrZjkuLrkuIDkuKrmlrDnmoTnvqTnu4RcclxuICBzYXZlR3JvdXAoKSB7XHJcbiAgICBpZiAoIXRoaXMuZ3JvdXBUaXRsZSkge1xyXG4gICAgICB0aGlzLnZhbGlkR3JvdXBUaXRsZSA9IGZhbHNlO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBncm91cElkID0gQ29tbW9uVXRpbC5uZXdHdWlkKCk7XHJcbiAgICBsZXQgZ3JvdXBDb2RlID0gJ29yZ0dyb3VwX3ByaXZhdGVfJztcclxuICAgIGdyb3VwQ29kZSArPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDE2KS5zdWJzdHJpbmcoMiwgMTApO1xyXG4gICAgY29uc3QgYWRkSWRzID0gW107XHJcbiAgICB0aGlzLnNlbGVjdGlvbnMuZm9yRWFjaChzZWxlY3Rpb24gPT4ge1xyXG4gICAgICBhZGRJZHMucHVzaChzZWxlY3Rpb25bdGhpcy5wcmltYXJ5RmllbGRdKTtcclxuICAgIH0pO1xyXG4gICAgaWYoYWRkSWRzLmxlbmd0aCA+IDEwMDApIHtcclxuICAgICAgdGhpcy5tZXNzYWdlU2VydmljZS5zaG93KCd3YXJuaW5nJywgdGhpcy5sb2NhbGVTZXJ2aWNlLmdldFZhbHVlKFwib3JnYW5pemF0aW9uU2VsZWN0b3IuZXJyb3JNZXNzYWdlLmxpbWl0XCIpLCB0cnVlKTtcclxuICAgICAgdGhpcy5ncm91cERpYWxvZ09wZW5kID0gZmFsc2U7XHJcbiAgICAgIHRoaXMuZ3JvdXBUaXRsZSA9IG51bGw7XHJcbiAgICAgIHRoaXMuZ3JvdXBOb3RlID0gbnVsbDtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdGhpcy5ncm91cERpYWxvZ09wZW5kID0gZmFsc2U7XHJcbiAgICBjb25zdCBib2R5OiBTYXZlR3JvdXBSZXFldXN0UGFyYW0gPSB7XHJcbiAgICAgIGdyb3VwSWQsXHJcbiAgICAgIGdyb3VwQ29kZSxcclxuICAgICAgdGl0bGU6IHRoaXMuZ3JvdXBUaXRsZSxcclxuICAgICAgZGVzY3JpcHRpb246IHRoaXMuZ3JvdXBOb3RlLFxyXG4gICAgICBhYnNPcmdUeXBlOiB0aGlzLmFic09yZ1R5cGUsXHJcbiAgICAgIGNoYW5nZVR5cGU6IE51bWJlcigxKVxyXG4gICAgfTtcclxuICAgIGlmICh0aGlzLmVkaXRpbmdHcm91cElkKSB7XHJcbiAgICAgIGJvZHkuZ3JvdXBJZCA9IHRoaXMuZWRpdGluZ0dyb3VwSWQ7XHJcbiAgICAgIGJvZHkuY2hhbmdlVHlwZSA9IE51bWJlcigyKTtcclxuICAgICAgZGVsZXRlIGJvZHkuZ3JvdXBDb2RlO1xyXG4gICAgICB0aGlzLnVwZGF0ZU5hbWVPck5vdGUoYm9keSk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IG5ld0dyb3VwJCA9IHRoaXMuYXBpU2VydmljZS5zYXZlR3JvdXAoYm9keSk7XHJcbiAgICBuZXdHcm91cCQucGlwZShcclxuICAgICAgICBzd2l0Y2hNYXAoXHJcbiAgICAgICAgICAgIChyZXM6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYocmVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5saWJPcmdHcm91cC5zZWxlY3RlZEdyb3VwSWQgPSBncm91cElkO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ3JvdXBUaXRsZSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ncm91cE5vdGUgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFkZE9yZ3NJbk5ld0dyb3VwJCA9IHRoaXMuYXBpU2VydmljZS5zYXZlR3JvdXAoeyBncm91cElkLCBhZGRJZHMsIGRlbGV0ZUlkczogW10sIGNoYW5nZVR5cGU6IE51bWJlcigzKSB9KTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWRkT3Jnc0luTmV3R3JvdXAkLnBpcGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkYXRhOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGliT3JnR3JvdXAuZ2V0R3JvdXBMaXN0KHtzYXZlR3JvdXA6IHRydWV9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKHRoaXMubG9jYWxlU2VydmljZS5nZXRWYWx1ZShcIm9yZ2FuaXphdGlvblNlbGVjdG9yLmVycm9yTWVzc2FnZS5zYXZlT3JnYW5pemF0aW9uXCIpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICksXHJcbiAgICAgICAgdGFwKFxyXG4gICAgICAgICAgICAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgIHRoaXMubWVzc2FnZVNlcnZpY2Uuc2hvdygnZXJyb3InLCB0aGlzLmxvY2FsZVNlcnZpY2UuZ2V0VmFsdWUoXCJvcmdhbml6YXRpb25TZWxlY3Rvci5lcnJvck1lc3NhZ2Uuc2F2ZUdyb3VwXCIpLCB0cnVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIClcclxuICAgICkuc3Vic2NyaWJlKCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHVwZGF0ZU5hbWVPck5vdGUocGFyYW06IFNhdmVHcm91cFJlcWV1c3RQYXJhbSkge1xyXG4gICAgY29uc3QgdXBkYXRlSW5mbyQgPSB0aGlzLmFwaVNlcnZpY2Uuc2F2ZUdyb3VwKHBhcmFtKTtcclxuICAgIHVwZGF0ZUluZm8kLnBpcGUoXHJcbiAgICAgIHRhcChcclxuICAgICAgICAoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgaWYoZGF0YSkge1xyXG4gICAgICAgICAgICB0aGlzLmVkaXRpbmdHcm91cElkID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5ncm91cFRpdGxlID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5ncm91cE5vdGUgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLmdyb3VwRGlhbG9nVGl0bGUgPSB0aGlzLmxvY2FsZVNlcnZpY2UuZ2V0VmFsdWUoXCJvcmdhbml6YXRpb25TZWxlY3Rvci5ncm91cC5zYXZlR3JvdXBcIik7XHJcbiAgICAgICAgICAgIHRoaXMubGliT3JnR3JvdXAuZ2V0R3JvdXBMaXN0KHt1cGRhdGVOYW1lT3JOb3RlOiB0cnVlfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICAoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5tZXNzYWdlU2VydmljZS5zaG93KCdlcnJvcicsIHRoaXMubG9jYWxlU2VydmljZS5nZXRWYWx1ZShcIm9yZ2FuaXphdGlvblNlbGVjdG9yLmVycm9yTWVzc2FnZS5lZGl0R3JvdXBcIiksIHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgKVxyXG4gICAgKS5zdWJzY3JpYmUoKTtcclxuICB9XHJcblxyXG4gIC8vIOeCueWHu+mAiee7hOe7h+W8ueeql+eahOehruWumuaIluiAheWPlua2iOaMiemSruaXtuinpuWPke+8jDHkuLrnoa7lrprvvIww5Li65Y+W5raIXHJcbiAgcmV0dXJuUmVzdWx0KHR5cGU6IG51bWJlcikge1xyXG4gICAgbGV0IGZpbmFsVGV4dCA9ICcnO1xyXG4gICAgaWYgKCEhdHlwZSkge1xyXG4gICAgICB0aGlzLmNvbmZpcm1Ub2tlbiA9IHRydWU7XHJcbiAgICAgIHRoaXMuYXNzZW1ibGVGaW5hbFRleHQoKTtcclxuICAgICAgZmluYWxUZXh0ID0gdGhpcy5maW5hbFRleHQuam9pbigpO1xyXG4gICAgICBpZiAodGhpcy5zZWxlY3Rpb25zICYmIHRoaXMuc2VsZWN0aW9ucy5sZW5ndGgpIHtcclxuICAgICAgICB0aGlzLnNlbGVjdGlvbnNDaGFuZ2UuZW1pdCh7XHJcbiAgICAgICAgICBzZWxlY3Rpb25zOiB0aGlzLnNlbGVjdGlvbnNcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLm9uTW9kZWxDaGFuZ2UoZmluYWxUZXh0KTtcclxuICAgICAgICB0aGlzLm9uTW9kZWxUb3VjaGVkKGZpbmFsVGV4dCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5vbk1vZGVsQ2hhbmdlKGZpbmFsVGV4dCk7XHJcbiAgICAgICAgdGhpcy5vbk1vZGVsVG91Y2hlZChmaW5hbFRleHQpO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0aW9uc0NoYW5nZS5lbWl0KHtcclxuICAgICAgICAgIHNlbGVjdGlvbnM6IHRoaXMuc2VsZWN0aW9uc1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZih0aGlzLm1hcEZpZWxkcykge1xyXG4gICAgICAgIHRoaXMubWFwRmllbGRzMkNvbXBvbmVudCgpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuYXNzZW1ibGVEYXRhQnlPcmdJZHModGhpcy5vcmdJZHMpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyB0aGlzLm9yZ0lkcyA9IFtdO1xyXG4gICAgdGhpcy5kaWFsb2cuY2xvc2UoKTtcclxuICAgIHRoaXMuaXNTaG93ID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBjaGFuZ2VUYWJzKGU6IGFueSkge1xyXG4gICAgdGhpcy5jdXJyZW50VGFiSWQgPSBlLm5leHRJZDtcclxuICAgIGlmKHRoaXMuc2hvd1RhYklkcy5pbmNsdWRlcyh0aGlzLm9yZ2FuaXphdGlvblRhYklkKSkge1xyXG4gICAgICB0aGlzLmxpYk9yZ1RyZWUuY3VycmVudFRhYklkID0gdGhpcy5jdXJyZW50VGFiSWQ7XHJcbiAgICB9XHJcbiAgICBpZiAoZS5uZXh0SWQgPT09IHRoaXMuZ3JvdXBUYWJJZCkge1xyXG4gICAgICBpZighdGhpcy5saWJPcmdHcm91cC5ncm91cERhdGEucHVibGljLmxlbmd0aCAmJiAhdGhpcy5saWJPcmdHcm91cC5ncm91cERhdGEucGVyc29uYWwubGVuZ3RoKSB7XHJcbiAgICAgICAgdGhpcy5saWJPcmdHcm91cC5hc3NlbWJsZURhdGEodHJ1ZSk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZihlLm5leHRJZCA9PT0gdGhpcy5vcmdhbml6YXRpb25UYWJJZCkge1xyXG4gICAgICBpZih0aGlzLmxpYk9yZ1RyZWUuaW5pdExvYWQpIHtcclxuICAgICAgICB0aGlzLmxpYk9yZ1RyZWUubG9hZFRyZWVEYXRhKCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5saWJPcmdUcmVlLmZhcnJpc1RyZWUuY2xlYXJBbGwoKTtcclxuICAgICAgICB0aGlzLmxpYk9yZ1RyZWUuZmFycmlzVHJlZS5yb3dIZWlnaHQgPSAyODtcclxuICAgICAgICBpZih0aGlzLm11bHRpU2VsZWN0KSB7XHJcbiAgICAgICAgICB0aGlzLmxpYk9yZ1RyZWUuY2hlY2tPcmdUcmVlTm9kZXMoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5saWJPcmdUcmVlLnNlbGVjdE9yZ1RyZWVOb2RlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiJdfQ==