/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, Input, ViewChild, ViewEncapsulation, ElementRef, ChangeDetectorRef, Renderer2, NgZone, EventEmitter, Output, Injector, Optional, LOCALE_ID, InjectFlags, HostBinding } from '@angular/core';
import { fromEvent } from 'rxjs';
import { auditTime } from 'rxjs/operators';
import { FarrisSidebarComponent } from '@farris/ui-sidebar';
import { LocaleService } from '@farris/ui-locale';
import { FilterPanelService } from '@farris/ui-filter-panel';
import { QuerySolutionService } from '@farris/ui-filter-condition';
import { FilterService } from './filter.service';
import { ConvertorService } from './service/convertorservice';
import { ControlType } from './entity/controltype';
import { TextValue } from './entity/conditionvalue/textvalue';
import { HelpValue } from './entity/conditionvalue/helpvalue';
import { DropDownListValue } from './entity/conditionvalue/dropdownlistvalue';
import { DateRangeValue } from './entity/conditionvalue/daterangevalue';
import { NumberRangeValue } from './entity/conditionvalue/numberrangevaue';
import { SearchValue } from './entity/conditionvalue/searchvalue';
import { DateValue } from './entity/conditionvalue/datevalue';
import { CheckboxGroupValue } from './entity/conditionvalue/checkboxgroupvalue';
import { FILTER_HANDLER_TOKEN } from './interface/filterHandler';
import { deepCopy } from './utils';
import { RadioGroupValue } from './entity/conditionvalue/radiovalue';
import { MonthRangeValue } from './entity/conditionvalue/monthrange';
import { YearRangeValue } from './entity/conditionvalue/yearrange';
import { MonthValue } from './entity/conditionvalue/month';
import { YearValue } from './entity/conditionvalue/yearvalue';
import { InputGroupValue } from './entity/conditionvalue/inputgroup';
import { NumberValue } from './entity/conditionvalue/numbervalue';
import { FlexibleNumberValue } from './entity/conditionvalue/flexiblenumbervalue';
import { FlexibleDateValue } from './entity/conditionvalue/flexibledatevalue';
import ResizeObserver from "resize-observer-polyfill";
import { IdService, OverLayHiddenService } from '@farris/ui-common';
var FilterComponent = /** @class */ (function () {
    function FilterComponent(filterPanelService, filterService, convertorService, handler, cd, render, ngzone, localeService, injector) {
        this.filterPanelService = filterPanelService;
        this.filterService = filterService;
        this.convertorService = convertorService;
        this.handler = handler;
        this.cd = cd;
        this.render = render;
        this.ngzone = ngzone;
        this.localeService = localeService;
        this.injector = injector;
        this._filterList = [];
        //是否禁用
        this.disabled = false;
        this.showReminder = false;
        // 是否启用侧边栏収折-过滤条件在侧边栏显示
        this.floatFilter = true;
        // 启用自动宽度
        this._enableAutoWidth = false;
        this.localStorageKey = 'farrisSearchRecord';
        this.cla = true;
        this.query = new EventEmitter();
        this.searchChange = new EventEmitter();
        this.resetChange = new EventEmitter();
        this.clearFilter = new EventEmitter();
        this.expandFilter = new EventEmitter();
        this.packupFilter = new EventEmitter();
        this.filterResize = new EventEmitter();
        // 展开
        this.filterExtend = false;
        // 是否显示三个点
        this.filterEllipsis = false;
        // 是否显示展开收起
        this.filterExtendShow = false;
        this.filterExtendText = '展开';
        this.filterExtendIcon = 'f-icon-arrow-chevron-down';
        this.expandText = '展开';
        this.foldText = '收起';
        this.sidebarOpen = false;
        this.floatPanelOpen = false;
        this.showExpandTag = false;
        /**
         * 表单是否允许提交
         */
        this.canSubmit = false;
        /**
         * 表单是否允许提交,用于高级筛选清空后
         */
        this.advancedCanSubmit = true;
        /**
         * 默认展开项是否允许提交
         */
        this.showCanSubmit = true;
        /**
         * 是否显示清空已选
         */
        this.filledFilter = false;
        /**
         * 默认展开的筛选项
         */
        this.showFilterList = new Array();
        /**
         * 高级筛选
         */
        this.extendFilterList = new Array();
        this.extendFilterListStore = new Array();
        this.extendFilterListTemporary = new Array();
        /**
         * 已填写筛选数据
         */
        this.filledFilterList = new Array();
        /**
         * 高级筛选中已填写的
         */
        this.filledExtendFilterList = new Array();
        /** 没有填写的筛选项 */
        // unFilledFilterList:Array<QueryCondition> = new Array<QueryCondition>();
        /**
         * 高级筛选中必填项
         */
        this.extendRequiredList = new Array();
        /**
         * 默认筛选中必填项
         */
        this.showRequiredList = new Array();
        /**
         * 循环表单
         */
        this.listFilterConditions = new Array();
        /**
         * 默认展开＋高级筛选中已填写的
         */
        this.loopFilterList = new Array();
        /**
         * 用来存储setvalue前数据
         */
        this.stagListFilterConditions = new Array();
        /**
         * 显示中表单的必填项
         */
        this.requiredListFilter = [];
        this.localeIds = {
            'en': 'en',
            'zh-CHS': 'zh-CHS'
        };
        this.currentLocale = 'zh-CHS';
        this.isControlInline = true;
        this.reminderLeft = 0;
        this.floatPanelHeight = null;
        this.floatFilterIconBottom = 0;
        // 绑定大小变化响应
        this.ro = null;
        // 记录旧的宽度数据
        this.containerWidthRecord = 0;
        // 阈值
        this.distanceThreshold = 20;
        this.overLayService = null;
        if (this.injector) {
            this.currentLocale = this.injector.get(LOCALE_ID);
            this.filterHandler = this.injector.get(FILTER_HANDLER_TOKEN, null, InjectFlags.Optional);
            this.idService = this.injector.get(IdService);
        }
        this.overLayService = this.injector.get(OverLayHiddenService, null);
        if (!this.overLayService) {
            this.overLayService = new OverLayHiddenService();
        }
    }
    Object.defineProperty(FilterComponent.prototype, "filterList", {
        get: /**
         * @return {?}
         */
        function () {
            return this._filterList;
        },
        set: /**
         * @param {?} filterList
         * @return {?}
         */
        function (filterList) {
            this._filterList = filterList || [];
            this.initFilterList();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FilterComponent.prototype, "enableAutoWidth", {
        get: /**
         * @return {?}
         */
        function () {
            return this._enableAutoWidth;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (value !== this._enableAutoWidth) {
                if (value) {
                    this.filterEllipsis = false;
                    this.filterExtendShow = false;
                }
                this._enableAutoWidth = value;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FilterComponent.prototype, "defaultValue", {
        get: /**
         * @return {?}
         */
        function () {
            return this._defaultValue;
        },
        set: /**
         * @param {?} configs
         * @return {?}
         */
        function (configs) {
            var _this_1 = this;
            this._defaultValue = configs;
            setTimeout((/**
             * @return {?}
             */
            function () {
                _this_1.setFilterValue(_this_1._defaultValue);
            }));
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    FilterComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this_1 = this;
        this.filterWrapperEl = this.filterListWrapper && this.filterListWrapper.nativeElement;
        // 绑定事件
        this.bindRoEvent();
        this.foldText = this.localeService.getValue('filterPanel.fold');
        this.expandText = this.localeService.getValue('filterPanel.expand');
        this.filterExtendText = this.expandText;
        if (this.currentLocale === this.localeIds['en']) {
            this.isControlInline = false;
        }
        else {
            this.isControlInline = true;
        }
        fromEvent(window, 'resize').pipe(auditTime(50)).subscribe((/**
         * @return {?}
         */
        function () {
            _this_1.floatPanelHeight = window.innerHeight - _this_1.floatFilterIconBottom;
        }));
    };
    /**
     * @return {?}
     */
    FilterComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        if (this.ro) {
            this.ro.unobserve(this.filterWrapperEl);
            this.ro = null;
        }
        if (this.floatPanel) {
            this.overLayService.destory(this.floatPanel.nativeElement);
        }
    };
    /**
     * 绑定监控大小的事件
     */
    /**
     * 绑定监控大小的事件
     * @private
     * @return {?}
     */
    FilterComponent.prototype.bindRoEvent = /**
     * 绑定监控大小的事件
     * @private
     * @return {?}
     */
    function () {
        var _this_1 = this;
        if (!this.filterWrapper) {
            return;
        }
        this.ngzone.runOutsideAngular((/**
         * @return {?}
         */
        function () {
            // 这样一直都绑定可能有性能问题
            _this_1.ro = new ResizeObserver((/**
             * @param {?} entries
             * @param {?} observer
             * @return {?}
             */
            function (entries, observer) {
                /** @type {?} */
                var tempWidth = entries[0].contentRect.width;
                if (Math.abs(tempWidth - _this_1.containerWidthRecord) >
                    _this_1.distanceThreshold) {
                    if (!_this_1.filterList.length)
                        return;
                    if (_this_1.enableAutoWidth) {
                        return;
                    }
                    _this_1.listEllipsisInit();
                    _this_1.containerWidthRecord = tempWidth;
                }
            }));
            _this_1.ro.observe(_this_1.filterWrapper.nativeElement);
            // fromEvent(window, 'resize')
            //     .pipe(debounceTime(50, animationFrame))
            //     .subscribe((): void => {
            //         this.ngzone.run(() => {
            //             // console.log('resize');
            //             if (!this.filterList.length) return;
            //             if (this.enableAutoWidth) {return;}
            //             this.listEllipsisInit();
            //         });
            //     });
        }));
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    FilterComponent.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        // if (changes.filterList && !changes.filterList.isFirstChange()) {
        //   this.initFilterList();
        // }
    };
    /**
     * @return {?}
     */
    FilterComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
    };
    /**
     * 初始化筛选项
     */
    /**
     * 初始化筛选项
     * @return {?}
     */
    FilterComponent.prototype.initFilterList = /**
     * 初始化筛选项
     * @return {?}
     */
    function () {
        var _this_1 = this;
        this.listFilterConditions = new Array();
        /** @type {?} */
        var filterDatas = this.filterService.fieldSchemasConvert(this.filterList);
        if (filterDatas && filterDatas.length) {
            this.listFilterConditions = this.convertorService.getSelectedFieldConditions(filterDatas, this.listFilterConditions);
        }
        this.stagListFilterConditions = this.listFilterConditions.map((/**
         * @param {?} o
         * @return {?}
         */
        function (o) { return (tslib_1.__assign({}, o)); }));
        this.filterListClassify();
        setTimeout((/**
         * @return {?}
         */
        function () {
            if (_this_1.showReminder && _this_1.showFilterList && _this_1.showFilterList.length) {
                _this_1.showReminderItem = _this_1.showFilterList[0];
                if (_this_1.showReminderItem) {
                    /** @type {?} */
                    var filterlistItems = _this_1.filterListWrapper && _this_1.filterListWrapper.nativeElement.children;
                    if (filterlistItems && filterlistItems.length) {
                        /** @type {?} */
                        var showRemItem = void 0;
                        for (var i = 0; i < filterlistItems.length; i++) {
                            if (_this_1.showReminderItem['id'] == filterlistItems[i].getAttribute('id')) {
                                showRemItem = filterlistItems[i];
                            }
                        }
                        if (showRemItem) {
                            _this_1.reminderLeft = showRemItem.offsetLeft >= 0 ? showRemItem.offsetLeft : 0;
                        }
                    }
                }
            }
            else {
                _this_1.showReminderItem = null;
            }
        }), 0);
        this.cd.detectChanges();
    };
    /** 筛选项分类 */
    /**
     * 筛选项分类
     * @return {?}
     */
    FilterComponent.prototype.filterListClassify = /**
     * 筛选项分类
     * @return {?}
     */
    function () {
        var _this_1 = this;
        this.extendFilterList = [];
        this.extendFilterListStore = [];
        this.showFilterList = [];
        this.filledFilterList = [];
        this.filledExtendFilterList = [];
        this.loopFilterList = [];
        this.extendRequiredList = [];
        this.showRequiredList = [];
        // 必填
        /** @type {?} */
        var requiredList = this.listFilterConditions.filter((/**
         * @param {?} listitem
         * @return {?}
         */
        function (listitem) {
            return listitem.control.required;
        }));
        if (requiredList && requiredList.length) {
            this.requiredListFilter = requiredList;
            this.canSubmit = this.canSubmitFilter(this.requiredListFilter);
        }
        else {
            this.requiredListFilter = [];
            this.canSubmit = true;
        }
        // 几种类型分类
        this.listFilterConditions.forEach((/**
         * @param {?} field
         * @return {?}
         */
        function (field) {
            if (field.control.isExtend && field['filled']) {
                _this_1.filledExtendFilterList.push(field);
            }
            if (field['filled']) {
                _this_1.filledFilterList.push(field);
            }
            // else if(!field.control.isExtend){
            //   this.unFilledFilterList.push(field);
            // }
            if (field.control.isExtend) {
                _this_1.extendFilterListStore.push(field);
            }
            else {
                _this_1.showFilterList.push(field);
            }
        }));
        if (this.filledFilterList.length) {
            this.filledFilter = true;
        }
        else {
            this.filledFilter = false;
        }
        /** @type {?} */
        var list = this.listFilterConditions.filter((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            return !item.control.isExtend || item['filled'];
        }));
        // this.loopFilterList = this.showFilterList.concat(this.filledExtendFilterList);
        this.loopFilterList = list ? list : [];
        this.loopFilterList.forEach((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            _this_1.getValueText(item);
        }));
        this.extendFilterList = this.extendFilterListStore.map((/**
         * @param {?} o
         * @return {?}
         */
        function (o) { return (tslib_1.__assign({}, o)); }));
        /** @type {?} */
        var extendRequiredList = this.extendFilterList.filter((/**
         * @param {?} listitem
         * @return {?}
         */
        function (listitem) {
            return listitem.control.required;
        }));
        if (extendRequiredList && extendRequiredList.length) {
            this.extendRequiredList = extendRequiredList;
        }
        /** @type {?} */
        var showrequiredList = this.showFilterList.filter((/**
         * @param {?} listitem
         * @return {?}
         */
        function (listitem) {
            return listitem.control.required;
        }));
        if (showrequiredList && showrequiredList.length) {
            this.showRequiredList = showrequiredList;
        }
        this.showCanSubmit = this.canSubmitFilter(this.showRequiredList);
        this.advancedCanSubmit = this.canSubmitFilter(this.extendRequiredList);
        // console.log('已填写',this.filledExtendFilterList);
        // console.log('显示出来的',this.loopFilterList);
        // console.log('隐藏部分',this.extendFilterList);
        this.filterExtendShow = true;
        // 如果是支持自动宽度，就是不収折,判断涉及赋值时机
        if (!this.enableAutoWidth) {
            setTimeout((/**
             * @return {?}
             */
            function () {
                _this_1.listEllipsisInit();
            }), 0);
        }
    };
    /**
     * 已填写筛选项点击
     * @param event
     * @param data
     */
    /**
     * 已填写筛选项点击
     * @param {?} event
     * @param {?} data
     * @param {?} index
     * @return {?}
     */
    FilterComponent.prototype.filterClick = /**
     * 已填写筛选项点击
     * @param {?} event
     * @param {?} data
     * @param {?} index
     * @return {?}
     */
    function (event, data, index) {
        var _this_1 = this;
        event.stopPropagation();
        if (this.disabled)
            return;
        if (data) {
            this.showReminderItem = null;
        }
        /** @type {?} */
        var instanceID = this.localStorageKey + '_' + data.id;
        if (data && this.currentFilterId != data.id) {
            /** @type {?} */
            var panelItem = deepCopy(data);
            this.currentFilterId = data.id;
            var _a = event.currentTarget.getBoundingClientRect(), left = _a.left, top_1 = _a.top, height = _a.height, right = _a.right;
            this.filterPanelContainer = this.filterPanelService.showPanel({
                left: left,
                top: top_1 + height + 2,
                right: right,
                item: panelItem,
                localStorageKey: instanceID
            });
            this.filterPanelContainer.hidePanel.subscribe((/**
             * @param {?} e
             * @return {?}
             */
            function (e) {
                _this_1.filterPanelService.hidePanel();
                _this_1.filterPanelContainer = null;
                _this_1.currentFilterId = null;
            }));
            this.filterPanelContainer.clearFilter.subscribe((/**
             * @param {?} e
             * @return {?}
             */
            function (e) {
                _this_1.clearFilter.emit(e);
            }));
            //提交弹窗内
            /** @type {?} */
            var _this_2 = this;
            this.filterPanelContainer.submit.subscribe((/**
             * @param {?} e
             * @return {?}
             */
            function (e) {
                e.filled = (e.valueText && e.valueText.length > 0) ? true : false;
                _this_2.loopFilterList[index] = e;
                /** @type {?} */
                var panelListIndex = _this_2.listFilterConditions.findIndex((/**
                 * @param {?} item
                 * @return {?}
                 */
                function (item) {
                    return item['id'] == e['id'];
                }));
                if (panelListIndex >= 0) {
                    _this_2.listFilterConditions[panelListIndex] = e;
                }
                _this_1.searchChange.emit(_this_1.listFilterConditions);
                _this_1.inSetCurrentFilterConditions();
                _this_1.filterListClassify();
                // valueText是有需要计算的，所以延后判断是否显示
                /** @type {?} */
                var findItem = _this_2.loopFilterList.find((/**
                 * @param {?} item
                 * @return {?}
                 */
                function (item) {
                    return item['id'] == e['id'];
                }));
                if (findItem) {
                    findItem['filled'] = findItem.valueText && findItem.valueText.length > 0 ? true : false;
                }
                _this_1.cd.markForCheck();
                _this_1.submit('panelFormData', _this_1.listFilterConditions, e);
                _this_1.filterPanelService.hidePanel();
                _this_1.filterPanelContainer = null;
                _this_1.currentFilterId = null;
            }));
        }
        else {
            this.filterPanelService.hidePanel();
            this.filterPanelContainer = null;
            this.currentFilterId = null;
        }
    };
    /**
     * 清空筛选项
     */
    /**
     * 清空筛选项
     * @param {?} data
     * @param {?} index
     * @param {?} event
     * @return {?}
     */
    FilterComponent.prototype.filterClear = /**
     * 清空筛选项
     * @param {?} data
     * @param {?} index
     * @param {?} event
     * @return {?}
     */
    function (data, index, event) {
        event.stopPropagation();
        this.filterPanelService.hidePanel();
        this.currentFilterId = null;
        this.resetListCondition(data);
        this.filterListClassify();
        this.cd.markForCheck();
        this.searchChange.emit(this.listFilterConditions);
        this.clearFilter.emit(data);
        this.inSetCurrentFilterConditions();
        this.advancedCanSubmit = this.canSubmitFilter(this.extendRequiredList);
        this.submit('panelFormData', this.listFilterConditions);
    };
    /**
     * 展开高级筛选
     */
    /**
     * 展开高级筛选
     * @return {?}
     */
    FilterComponent.prototype.advancedFilter = /**
     * 展开高级筛选
     * @return {?}
     */
    function () {
        this.showReminderItem = null;
        this.extendFilterListTemporary = deepCopy(this.extendFilterList);
        this.farrissidebar.isOpen = true;
    };
    /**
     * @return {?}
     */
    FilterComponent.prototype.listCancel = /**
     * @return {?}
     */
    function () {
        this.extendFilterList = deepCopy(this.extendFilterListTemporary);
        this.farrissidebar.isOpen = false;
        this.floatPanelOpen = false;
    };
    /**
     * 打开面板高级筛选
     */
    /**
     * 打开面板高级筛选
     * @param {?} $evnet
     * @return {?}
     */
    FilterComponent.prototype.floatFilterOpen = /**
     * 打开面板高级筛选
     * @param {?} $evnet
     * @return {?}
     */
    function ($evnet) {
        var _this_1 = this;
        this.floatPanelOpen = !this.floatPanelOpen;
        if (this.floatPanelOpen) {
            this.extendFilterListTemporary = deepCopy(this.extendFilterList);
            if (!this.floatFilterIconBottom) {
                var bottom = ((/** @type {?} */ ($evnet.target))).getBoundingClientRect().bottom;
                this.floatFilterIconBottom = bottom + 100;
            }
            this.floatPanelHeight = window.innerHeight - this.floatFilterIconBottom;
            this.overLayService.registerMouseEvent(this.floatPanel.nativeElement, (/**
             * @param {?} e
             * @return {?}
             */
            function (e) {
                if (_this_1.floatPanel.nativeElement.contains(e.target)) {
                    return;
                }
                else {
                    if (e.target.nodeName === 'SPAN' && e.target.className.indexOf('f-icon-filtrate')) {
                        return;
                    }
                    /** @type {?} */
                    var cls = ['.f-datepicker-container', '.farris-timer-picker', '.farris-modal', '.f-combo-lookup', '.date-overlay-container'];
                    if (cls.find((/**
                     * @param {?} k
                     * @return {?}
                     */
                    function (k) { return e.target.closest(k); }))) {
                        return;
                    }
                }
                _this_1.floatPanelOpen = false;
                _this_1.overLayService.destory(_this_1.floatPanel.nativeElement);
            }));
            this.cd.detectChanges();
        }
        else {
            this.overLayService.destory(this.floatPanel.nativeElement);
        }
    };
    /**
     * 列表展示初始化
     */
    /**
     * 列表展示初始化
     * @return {?}
     */
    FilterComponent.prototype.listEllipsisInit = /**
     * 列表展示初始化
     * @return {?}
     */
    function () {
        if (this.enableAutoWidth)
            return;
        // if(this.filterExtend) return;
        /** @type {?} */
        var filterMainWidth = this.filterMain.nativeElement.offsetWidth;
        this.filterToolWidth = 0;
        // filterTool = this.filterTool.nativeElement.offsetWidth;
        if (this.filterTool) {
            this.filterToolWidth = this.filterTool.nativeElement.offsetWidth;
        }
        // 筛选条件区域最大宽度
        /** @type {?} */
        var filterListW;
        if (this.filterExtend) {
            filterListW = filterMainWidth - 26;
        }
        else {
            // filterListW = filterMainWidth- 48 - this.filterToolWidth - 26;
            filterListW = filterMainWidth - 48 - this.filterToolWidth - 26;
        }
        // const filterWrapper = this.filterListWrapper.nativeElement;
        // const filterWrapperWidth = filterWrapper.offsetWidth;
        // console.log(filterWrapperWidth);
        /** @type {?} */
        var filterItems = this.filterWrapperEl ? this.filterWrapperEl.children : [];
        /** @type {?} */
        var filterItemWidth = 0;
        if (filterItems && filterItems.length) {
            for (var i = 0, len = filterItems.length; i < len; i++) {
                this.render.setStyle(filterItems[i], 'display', 'flex');
                /** @type {?} */
                var width = filterItems[i].offsetWidth;
                filterItemWidth += width + 8;
                if (filterItemWidth >= filterListW && !this.filterExtend) {
                    this.render.setStyle(filterItems[i], 'display', 'none');
                }
                else {
                    this.render.setStyle(filterItems[i], 'display', 'flex');
                }
                // console.log(filterItemWidth,filterListW,i);
            }
        }
        // if(filterItemWidth > this.filterWrapperEl.offsetWidth){
        if (filterItemWidth >= filterListW) {
            this.filterEllipsis = true;
            this.filterExtendShow = true;
        }
        else {
            this.filterEllipsis = false;
            this.filterExtendShow = false;
        }
        if (filterItems.length)
            this.filterResize.emit();
        if (!this.cd['destroyed']) {
            this.cd.detectChanges();
        }
    };
    /**
     * 筛选项展开收起切换
     */
    /**
     * 筛选项展开收起切换
     * @return {?}
     */
    FilterComponent.prototype.filterExpand = /**
     * 筛选项展开收起切换
     * @return {?}
     */
    function () {
        var _this_1 = this;
        this.showReminderItem = null;
        this.filterExtend = !this.filterExtend;
        if (this.filterExtend) {
            this.filterEllipsis = false;
            this.filterExtendText = this.foldText;
            this.filterExtendIcon = 'f-icon-arrow-chevron-up';
            /** @type {?} */
            var filterItems = this.filterWrapperEl.children;
            if (filterItems && filterItems.length) {
                for (var i = 0, len = filterItems.length; i < len; i++) {
                    this.render.setStyle(filterItems[i], 'display', 'flex');
                }
            }
            ;
            this.render.setStyle(this.filterWrapperEl, 'flex-wrap', 'wrap');
            this.expandFilter.emit();
            this.cd.detectChanges();
        }
        else {
            this.filterExtendText = this.expandText;
            this.filterExtendIcon = 'f-icon-arrow-chevron-down';
            setTimeout((/**
             * @return {?}
             */
            function () {
                _this_1.listEllipsisInit();
            }), 0);
            this.packupFilter.emit();
        }
    };
    /**
     * 高级筛选表单项搜索变化
     * @param $event
     * @param item
     */
    /**
     * 高级筛选表单项搜索变化
     * @param {?} $event
     * @param {?} item
     * @return {?}
     */
    FilterComponent.prototype.onSearch = /**
     * 高级筛选表单项搜索变化
     * @param {?} $event
     * @param {?} item
     * @return {?}
     */
    function ($event, item) {
        if (this.disabled) {
            return;
        }
        this.advancedCanSubmit = this.canSubmitFilter(this.extendRequiredList);
        // console.log(this.advancedCanSubmit,this.canSubmit);
        this.searchChange.emit({ item: item, conditions: this.listFilterConditions, instance: this });
    };
    /** 判断是否所有必填项都填写完毕 */
    /**
     * 判断是否所有必填项都填写完毕
     * @param {?} requirelist
     * @return {?}
     */
    FilterComponent.prototype.canSubmitFilter = /**
     * 判断是否所有必填项都填写完毕
     * @param {?} requirelist
     * @return {?}
     */
    function (requirelist) {
        /** @type {?} */
        var formCanSubmit = false;
        if (!requirelist || !requirelist.length) {
            formCanSubmit = true;
            return formCanSubmit;
        }
        else {
            for (var i = 0; i < requirelist.length; i++) {
                /** @type {?} */
                var item = requirelist[i];
                if (item.control.getControlType() === ControlType.Text) {
                    /** @type {?} */
                    var tv = ((/** @type {?} */ (item.value)));
                    if (Object.keys(tv).length < 0 || !tv.value) {
                        formCanSubmit = false;
                        return false;
                    }
                    else {
                        formCanSubmit = true;
                    }
                }
                else if (item.control.getControlType() === ControlType.Help) {
                    /** @type {?} */
                    var shv = ((/** @type {?} */ (item.value)));
                    if (Object.keys(shv).length === 0 || !shv.value || !shv.valueField) {
                        formCanSubmit = false;
                        return false;
                    }
                    else {
                        formCanSubmit = true;
                    }
                }
                else if (item.control.getControlType() === ControlType.DropDown) {
                    /** @type {?} */
                    var ddv = ((/** @type {?} */ (item.value)));
                    if (Object.keys(ddv).length === 0 || !ddv.value) {
                        formCanSubmit = false;
                        return false;
                    }
                    else {
                        formCanSubmit = true;
                    }
                }
                else if (item.control.getControlType() === ControlType.DateRange) {
                    /** @type {?} */
                    var drv = ((/** @type {?} */ (item.value)));
                    if (Object.keys(drv).length === 0 || (!drv.startTime && !drv.endTime)) {
                        formCanSubmit = false;
                        return false;
                    }
                    else {
                        formCanSubmit = true;
                    }
                }
                else if (item.control.getControlType() === ControlType.DateRangeTime) {
                    /** @type {?} */
                    var drv = ((/** @type {?} */ (item.value)));
                    if (Object.keys(drv).length === 0 || (!drv.startTime && !drv.endTime)) {
                        formCanSubmit = false;
                        return false;
                    }
                    else {
                        formCanSubmit = true;
                    }
                }
                else if (item.control.getControlType() === ControlType.MonthRange) {
                    /** @type {?} */
                    var mrv = ((/** @type {?} */ (item.value)));
                    if (Object.keys(mrv).length === 0 || (!mrv.startTime && !mrv.endTime)) {
                        formCanSubmit = false;
                        return false;
                    }
                    else {
                        formCanSubmit = true;
                    }
                }
                else if (item.control.getControlType() === ControlType.YearRange) {
                    /** @type {?} */
                    var yrv = ((/** @type {?} */ (item.value)));
                    if (Object.keys(yrv).length === 0 || (!yrv.startTime && !yrv.endTime)) {
                        formCanSubmit = false;
                        return false;
                    }
                    else {
                        formCanSubmit = true;
                    }
                }
                else if (item.control.getControlType() === ControlType.NumberRange) {
                    /** @type {?} */
                    var nrv = ((/** @type {?} */ (item.value)));
                    if (Object.keys(nrv).length === 0 || (nrv.startValue === null && nrv.endValue === null)) {
                        formCanSubmit = false;
                        return false;
                    }
                    else {
                        formCanSubmit = true;
                    }
                }
                else if (item.control.getControlType() === ControlType.Search) {
                    /** @type {?} */
                    var sv = ((/** @type {?} */ (item.value)));
                    if (Object.keys(sv).length < 0 || !sv.value) {
                        formCanSubmit = false;
                        return false;
                    }
                    else {
                        formCanSubmit = true;
                    }
                }
                else if (item.control.getControlType() === ControlType.Date) {
                    /** @type {?} */
                    var dv = ((/** @type {?} */ (item.value)));
                    if (Object.keys(dv).length < 0 || !dv.value) {
                        formCanSubmit = false;
                        return false;
                    }
                    else {
                        formCanSubmit = true;
                    }
                }
                else if (item.control.getControlType() === ControlType.Month) {
                    /** @type {?} */
                    var mv = ((/** @type {?} */ (item.value)));
                    if (Object.keys(mv).length < 0 || !mv.value) {
                        formCanSubmit = false;
                        return false;
                    }
                    else {
                        formCanSubmit = true;
                    }
                }
                else if (item.control.getControlType() === ControlType.Year) {
                    /** @type {?} */
                    var yv = ((/** @type {?} */ (item.value)));
                    if (Object.keys(yv).length < 0 || !yv.value) {
                        formCanSubmit = false;
                        return false;
                    }
                    else {
                        formCanSubmit = true;
                    }
                }
                else if (item.control.getControlType() === ControlType.CheckboxGroup) {
                    /** @type {?} */
                    var cbgv = ((/** @type {?} */ (item.value)));
                    if (Object.keys(cbgv).length === 0 || Object.keys(cbgv.value).length === 0) {
                        formCanSubmit = false;
                        return false;
                    }
                    else {
                        formCanSubmit = true;
                    }
                }
                else if (item.control.getControlType() === ControlType.Radio) {
                    /** @type {?} */
                    var radiov = ((/** @type {?} */ (item.value)));
                    if (Object.keys(radiov).length < 0 || radiov.value === '') {
                        formCanSubmit = false;
                        return false;
                    }
                    else {
                        formCanSubmit = true;
                    }
                }
                else if (item.control.getControlType() === ControlType.InputGroup) {
                    /** @type {?} */
                    var sv = ((/** @type {?} */ (item.value)));
                    if (Object.keys(sv).length < 0 || !sv.textValue) {
                        formCanSubmit = false;
                        return false;
                    }
                    else {
                        formCanSubmit = true;
                    }
                }
                else if (item.control.getControlType() === ControlType.Number) {
                    /** @type {?} */
                    var nrv = ((/** @type {?} */ (item.value)));
                    if (Object.keys(nrv).length === 0 || (nrv.value == null)) {
                        formCanSubmit = false;
                        return false;
                    }
                    else {
                        formCanSubmit = true;
                    }
                }
                else if (item.control.getControlType() === ControlType.FlexibleNumber) {
                    /** @type {?} */
                    var flexv = ((/** @type {?} */ (item.value)));
                    if (flexv.single) {
                        if (Object.keys(flexv).length < 0 || flexv.value == null) {
                            formCanSubmit = false;
                            return false;
                        }
                        else {
                            formCanSubmit = true;
                        }
                    }
                    else {
                        if (Object.keys(flexv).length === 0 || (flexv.startValue == null && flexv.endValue == null)) {
                            formCanSubmit = false;
                            return false;
                        }
                        else {
                            formCanSubmit = true;
                        }
                    }
                }
                else if (item.control.getControlType() === ControlType.FlexibleDate) {
                    /** @type {?} */
                    var flexdatev = ((/** @type {?} */ (item.value)));
                    if (flexdatev.single) {
                        if (Object.keys(flexdatev).length < 0 || !flexdatev.value) {
                            formCanSubmit = false;
                            return false;
                        }
                        else {
                            formCanSubmit = true;
                        }
                    }
                    else {
                        if (Object.keys(flexdatev).length === 0 || (!flexdatev.startValue && !flexdatev.endValue)) {
                            formCanSubmit = false;
                            return false;
                        }
                        else {
                            formCanSubmit = true;
                        }
                    }
                }
            }
            return formCanSubmit;
        }
    };
    /** 高级筛选点击确定提交 */
    /**
     * 高级筛选点击确定提交
     * @return {?}
     */
    FilterComponent.prototype.listSearch = /**
     * 高级筛选点击确定提交
     * @return {?}
     */
    function () {
        var _this_1 = this;
        if (this.disabled) {
            return;
        }
        ;
        this.extendFilterList.forEach((/**
         * @param {?} field
         * @return {?}
         */
        function (field) {
            if ((field.control.getControlType() != ControlType.Date)
                && (field.control.getControlType() != ControlType.DateRange)
                && (field.control.getControlType() != ControlType.DateRangeTime)
                && (field.control.getControlType() != ControlType.FlexibleDate)) {
                if (!field.valueText) {
                    field.valueText = field.value.getValueText();
                }
            }
            // if(field.control.getControlType() == ControlType.Radio){
            //   console.log(field);
            // }
            field.filled = (field.valueText && field.valueText.length > 0) ? true : false;
            if (field.control.getControlType() == ControlType.Text) {
                /** @type {?} */
                var farrisSearchRecord = field.valueText;
                /** @type {?} */
                var farrisSearchRecordArray = [];
                /** @type {?} */
                var storagelabelCode = field.labelCode;
                /** @type {?} */
                var filterPanelArray = JSON.parse(localStorage.getItem(_this_1.localStorageKey));
                if (Array.isArray(filterPanelArray)) {
                    filterPanelArray = null;
                }
                if (!filterPanelArray || !filterPanelArray[storagelabelCode] || !filterPanelArray[storagelabelCode].length && farrisSearchRecord && farrisSearchRecord.length) {
                    farrisSearchRecordArray.push(farrisSearchRecord);
                }
                else {
                    farrisSearchRecordArray = filterPanelArray[storagelabelCode];
                    /** @type {?} */
                    var index = filterPanelArray[storagelabelCode].indexOf(farrisSearchRecord);
                    if (index < 0 && farrisSearchRecord && farrisSearchRecord.length) {
                        farrisSearchRecordArray.unshift(farrisSearchRecord);
                    }
                    farrisSearchRecordArray = farrisSearchRecordArray.slice(0, 6);
                }
                if (filterPanelArray == null)
                    filterPanelArray = {};
                filterPanelArray[storagelabelCode] = farrisSearchRecordArray;
                localStorage.setItem(_this_1.localStorageKey, JSON.stringify(filterPanelArray));
            }
        }));
        //判断高级筛选里是否已修改
        /** @type {?} */
        var extendAmendedList = this.extendFilterList.filter((/**
         * @param {?} item
         * @return {?}
         */
        function (item) { return item.filled; }));
        if (extendAmendedList && extendAmendedList.length) {
            this.showExpandTag = true;
        }
        else {
            this.showExpandTag = false;
        }
        this.extendFilterListStore = this.extendFilterList.map((/**
         * @param {?} o
         * @return {?}
         */
        function (o) { return (tslib_1.__assign({}, o)); }));
        this.extendFilterListStore.forEach((/**
         * @param {?} field
         * @return {?}
         */
        function (field) {
            /** @type {?} */
            var extendListIndex = _this_1.listFilterConditions.findIndex((/**
             * @param {?} item
             * @return {?}
             */
            function (item) {
                return item['id'] == field['id'];
            }));
            if (extendListIndex >= 0) {
                _this_1.listFilterConditions[extendListIndex] = field;
            }
        }));
        // console.log(this.listFilterConditions);
        this.searchChange.emit(this.listFilterConditions);
        this.inSetCurrentFilterConditions();
        this.filterListClassify();
        this.farrissidebar.isOpen = false;
        this.floatPanelOpen = false;
        this.cd.markForCheck();
        this.submit('extendFormData', this.listFilterConditions);
    };
    /** 提交表单 */
    /**
     * 提交表单
     * @param {?} type
     * @param {?} filterlist
     * @param {?=} filterItem
     * @return {?}
     */
    FilterComponent.prototype.submit = /**
     * 提交表单
     * @param {?} type
     * @param {?} filterlist
     * @param {?=} filterItem
     * @return {?}
     */
    function (type, filterlist, filterItem) {
        if (filterItem === void 0) { filterItem = null; }
        if (this.disabled || !this.showCanSubmit || !this.advancedCanSubmit) {
            return;
        }
        /** @type {?} */
        var queryList = this.handler.setFilterConditions(filterlist);
        this.query.emit({ type: type, data: JSON.stringify(queryList), filterItem: filterItem });
    };
    /** 设置筛选初始值 */
    /**
     * 设置筛选初始值
     * @param {?} fieldConfigs
     * @return {?}
     */
    FilterComponent.prototype.setFilterValue = /**
     * 设置筛选初始值
     * @param {?} fieldConfigs
     * @return {?}
     */
    function (fieldConfigs) {
        this.listFilterConditions = this.stagListFilterConditions.map((/**
         * @param {?} o
         * @return {?}
         */
        function (o) { return (tslib_1.__assign({}, o)); }));
        if (this.listFilterConditions && this.listFilterConditions.length) {
            this.setValues(this.listFilterConditions, fieldConfigs);
            /** @type {?} */
            var listFilter = this.listFilterConditions.map((/**
             * @param {?} o
             * @return {?}
             */
            function (o) { return (tslib_1.__assign({}, o)); }));
            this.listFilterConditions = listFilter;
            this.filterListClassify();
            this.searchChange.emit(this.listFilterConditions);
            this.inSetCurrentFilterConditions();
            // this.listSearch();
            this.cd.detectChanges();
            this.cd.markForCheck();
            this.canSubmit = this.canSubmitFilter(this.requiredListFilter);
            if (!this.canSubmit) {
                return;
            }
            this.submit('showFormData', this.listFilterConditions);
        }
    };
    /**
     * 清空筛选某一项
     * @param labelCode 字段编号唯一标识
     */
    /**
     * 清空筛选某一项
     * @param {?} labelCode 字段编号唯一标识
     * @return {?}
     */
    FilterComponent.prototype.resetFilterValue = /**
     * 清空筛选某一项
     * @param {?} labelCode 字段编号唯一标识
     * @return {?}
     */
    function (labelCode) {
        if (labelCode && this.listFilterConditions && this.listFilterConditions.length) {
            /** @type {?} */
            var resetCondition = this.listFilterConditions.find((/**
             * @param {?} conditions
             * @return {?}
             */
            function (conditions) {
                return conditions['fieldCode'] === labelCode;
            }));
            if (resetCondition) {
                this.resetListCondition(resetCondition);
                this.filterListClassify();
                this.cd.markForCheck();
                this.searchChange.emit(this.listFilterConditions);
                this.inSetCurrentFilterConditions();
                this.advancedCanSubmit = this.canSubmitFilter(this.extendRequiredList);
                this.submit('panelFormData', this.listFilterConditions);
            }
        }
    };
    // 设置value
    // 设置value
    /**
     * @param {?} conditions
     * @param {?} fieldConfigs
     * @return {?}
     */
    FilterComponent.prototype.setValues = 
    // 设置value
    /**
     * @param {?} conditions
     * @param {?} fieldConfigs
     * @return {?}
     */
    function (conditions, fieldConfigs) {
        var _this_1 = this;
        /** @type {?} */
        var qc;
        /** @type {?} */
        var controlType;
        if (fieldConfigs && fieldConfigs.length) {
            fieldConfigs.forEach((/**
             * @param {?} v
             * @return {?}
             */
            function (v) {
                qc = conditions.find((/**
                 * @param {?} c
                 * @return {?}
                 */
                function (c) { return c.fieldCode == v.labelCode; }));
                if (qc) {
                    controlType = _this_1.getControlType(qc);
                    qc.value = _this_1.filterService.setValues(controlType, v.value, qc.control.single);
                    qc.valueText = qc.value.getValueText(qc.control);
                    if (v.value) {
                        qc.filled = true;
                    }
                }
            }));
        }
    };
    /**
     * @param {?} fieldName
     * @return {?}
     */
    FilterComponent.prototype.getValue = /**
     * @param {?} fieldName
     * @return {?}
     */
    function (fieldName) {
        /** @type {?} */
        var queryList = this.handler.setFilterConditions(this.listFilterConditions);
        /** @type {?} */
        var item = queryList.find((/**
         * @param {?} n
         * @return {?}
         */
        function (n) { return n['FilterField'] === fieldName; }));
        if (item) {
            return item.value;
        }
        return undefined;
    };
    /**
     * 获取控件类型
     * @param selectedFieldCondition
     */
    /**
     * 获取控件类型
     * @param {?} selectedFieldCondition
     * @return {?}
     */
    FilterComponent.prototype.getControlType = /**
     * 获取控件类型
     * @param {?} selectedFieldCondition
     * @return {?}
     */
    function (selectedFieldCondition) {
        if (selectedFieldCondition) {
            if (selectedFieldCondition.control.getControlType() == ControlType.Text) {
                return 'input';
            }
            else if (selectedFieldCondition.control.getControlType() == ControlType.Search) {
                return 'search';
            }
            else if (selectedFieldCondition.control.getControlType() == ControlType.Date) {
                return 'date';
            }
            else if (selectedFieldCondition.control.getControlType() == ControlType.Month) {
                return 'month';
            }
            else if (selectedFieldCondition.control.getControlType() == ControlType.Year) {
                return 'year';
            }
            else if (selectedFieldCondition.control.getControlType() == ControlType.DateRange) {
                return 'daterange';
            }
            else if (selectedFieldCondition.control.getControlType() == ControlType.MonthRange) {
                return 'monthrange';
            }
            else if (selectedFieldCondition.control.getControlType() == ControlType.YearRange) {
                return 'yearrange';
            }
            else if (selectedFieldCondition.control.getControlType() == ControlType.DateRangeTime) {
                return 'daterangetime';
            }
            else if (selectedFieldCondition.control.getControlType() == ControlType.DropDown) {
                return 'dropdown';
            }
            else if (selectedFieldCondition.control.getControlType() == ControlType.NumberRange) {
                return 'number';
            }
            else if (selectedFieldCondition.control.getControlType() == ControlType.Help) {
                return 'help';
            }
            else if (selectedFieldCondition.control.getControlType() == ControlType.CheckboxGroup) {
                return 'checkboxgroup';
            }
            else if (selectedFieldCondition.control.getControlType() == ControlType.Radio) {
                return 'radio';
            }
            else if (selectedFieldCondition.control.getControlType() == ControlType.InputGroup) {
                return 'input-group';
            }
            else if (selectedFieldCondition.control.getControlType() == ControlType.Number) {
                return 'singlenumber';
            }
            else if (selectedFieldCondition.control.getControlType() == ControlType.FlexibleNumber) {
                return 'flexiblenumber';
            }
            else if (selectedFieldCondition.control.getControlType() == ControlType.FlexibleDate) {
                return 'flexibledate';
            }
            else {
                return 'input';
            }
        }
    };
    /**
     * 更新上下文中筛选数据
     */
    /**
     * 更新上下文中筛选数据
     * @return {?}
     */
    FilterComponent.prototype.inSetCurrentFilterConditions = /**
     * 更新上下文中筛选数据
     * @return {?}
     */
    function () {
        if (this.filterHandler) {
            this.filterHandler.setCurrentFilterConditions(this.listFilterConditions);
        }
    };
    /** 清空条件 */
    /**
     * 清空条件
     * @param {?} listFilterCondition
     * @return {?}
     */
    FilterComponent.prototype.resetListCondition = /**
     * 清空条件
     * @param {?} listFilterCondition
     * @return {?}
     */
    function (listFilterCondition) {
        if (listFilterCondition.control.getControlType() == ControlType.Text) {
            listFilterCondition.value = new TextValue();
        }
        else if (listFilterCondition.control.getControlType() == ControlType.Search) {
            listFilterCondition.value = new SearchValue();
        }
        else if (listFilterCondition.control.getControlType() == ControlType.Date) {
            listFilterCondition.value = new DateValue();
        }
        else if (listFilterCondition.control.getControlType() == ControlType.Month) {
            listFilterCondition.value = new MonthValue();
        }
        else if (listFilterCondition.control.getControlType() == ControlType.Year) {
            listFilterCondition.value = new YearValue();
        }
        else if (listFilterCondition.control.getControlType() == ControlType.DateRange) {
            listFilterCondition.value = new DateRangeValue();
        }
        else if (listFilterCondition.control.getControlType() == ControlType.MonthRange) {
            listFilterCondition.value = new MonthRangeValue();
        }
        else if (listFilterCondition.control.getControlType() == ControlType.YearRange) {
            listFilterCondition.value = new YearRangeValue();
        }
        else if (listFilterCondition.control.getControlType() == ControlType.DropDown) {
            listFilterCondition.value = new DropDownListValue();
        }
        else if (listFilterCondition.control.getControlType() == ControlType.NumberRange) {
            listFilterCondition.value = new NumberRangeValue();
        }
        else if (listFilterCondition.control.getControlType() == ControlType.Help) {
            listFilterCondition.value = new HelpValue();
        }
        else if (listFilterCondition.control.getControlType() == ControlType.CheckboxGroup) {
            listFilterCondition.value = new CheckboxGroupValue();
        }
        else if (listFilterCondition.control.getControlType() == ControlType.Radio) {
            listFilterCondition.value = new RadioGroupValue();
        }
        else if (listFilterCondition.control.getControlType() == ControlType.InputGroup) {
            listFilterCondition.value = new InputGroupValue();
        }
        else if (listFilterCondition.control.getControlType() == ControlType.Number) {
            listFilterCondition.value = new NumberValue();
        }
        else if (listFilterCondition.control.getControlType() == ControlType.FlexibleNumber) {
            listFilterCondition.value = new FlexibleNumberValue({ startValue: null, endValue: null, value: null }, listFilterCondition.control.single);
        }
        else if (listFilterCondition.control.getControlType() == ControlType.FlexibleDate) {
            listFilterCondition.value = new FlexibleDateValue({ startValue: null, endValue: null, value: null }, listFilterCondition.control.single);
        }
        else {
            listFilterCondition.value = new TextValue();
        }
        listFilterCondition.valueText = '';
        listFilterCondition.filled = false;
        // return listFilterCondition;
    };
    /**
     * @return {?}
     */
    FilterComponent.prototype.resetSearch = /**
     * @return {?}
     */
    function () {
        var _this_1 = this;
        if (this.disabled) {
            return;
        }
        if (this.listFilterConditions && this.listFilterConditions.length) {
            this.listFilterConditions.forEach((/**
             * @param {?} listFilterCondition
             * @return {?}
             */
            function (listFilterCondition) {
                _this_1.resetListCondition(listFilterCondition);
            }));
            this.listFilterConditions = this.listFilterConditions.map((/**
             * @param {?} o
             * @return {?}
             */
            function (o) { return (tslib_1.__assign({}, o)); }));
            this.filterListClassify();
            this.showCanSubmit = true;
            this.submit('panelFormData', this.listFilterConditions);
        }
        this.resetChange.emit();
        this.showExpandTag = false;
    };
    /**
     * 高级筛选清空筛选
     */
    /**
     * 高级筛选清空筛选
     * @return {?}
     */
    FilterComponent.prototype.resetAdvancedSearch = /**
     * 高级筛选清空筛选
     * @return {?}
     */
    function () {
        var _this_1 = this;
        if (this.extendFilterList && this.extendFilterList.length) {
            this.extendFilterList.forEach((/**
             * @param {?} listFilterCondition
             * @return {?}
             */
            function (listFilterCondition) {
                _this_1.resetListCondition(listFilterCondition);
            }));
            this.extendFilterList = this.extendFilterList.map((/**
             * @param {?} o
             * @return {?}
             */
            function (o) { return (tslib_1.__assign({}, o)); }));
        }
        if (this.extendRequiredList.length) {
            this.advancedCanSubmit = false;
        }
    };
    /**
     * valueText 特殊类型处理
     * @param item
     */
    /**
     * valueText 特殊类型处理
     * @param {?} item
     * @return {?}
     */
    FilterComponent.prototype.getValueText = /**
     * valueText 特殊类型处理
     * @param {?} item
     * @return {?}
     */
    function (item) {
        // console.log(item.fieldName,item.control.getControlType());
        if (item.control.getControlType() === ControlType.DropDown) {
            /** @type {?} */
            var enumValue = ((/** @type {?} */ (item.control))).enumValues;
            /** @type {?} */
            var value_1 = ((/** @type {?} */ (item.value))).value;
            if (enumValue && enumValue.length) {
                /** @type {?} */
                var texts = enumValue.find((/**
                 * @param {?} val
                 * @return {?}
                 */
                function (val) {
                    return val['value'] == value_1;
                }));
                if (texts) {
                    item.valueText = texts['name'];
                }
            }
        }
        else if (item.control.getControlType() === ControlType.CheckboxGroup) {
            /** @type {?} */
            var enumValue = ((/** @type {?} */ (item.control))).enumValues;
            /** @type {?} */
            var value_2 = ((/** @type {?} */ (item.value))).value;
            if (enumValue && enumValue.length && value_2 && value_2['length'] > 0) {
                if (item.control.boolcheck) {
                    item.valueText = value_2[0].toString();
                    if (item.valueText == 'true') {
                        item.valueText = this.localeService.getValue('text.yes');
                    }
                    else if (item.valueText == 'false') {
                        item.valueText = this.localeService.getValue('text.no');
                    }
                }
                else {
                    /** @type {?} */
                    var texts = [];
                    var _loop_1 = function (i) {
                        /** @type {?} */
                        var enums = enumValue.find((/**
                         * @param {?} val
                         * @return {?}
                         */
                        function (val) {
                            return val['value'] == value_2[i];
                        }));
                        if (enums) {
                            texts.push(enums['name']);
                        }
                    };
                    for (var i = 0; i <= value_2['length']; i++) {
                        _loop_1(i);
                    }
                    item.valueText = texts.join(',');
                }
            }
        }
        else if (item.control.getControlType() === ControlType.Radio) {
            /** @type {?} */
            var enumValue = ((/** @type {?} */ (item.control))).enumValues;
            /** @type {?} */
            var value_3 = ((/** @type {?} */ (item.value))).value;
            if (enumValue && enumValue.length) {
                /** @type {?} */
                var texts = enumValue.find((/**
                 * @param {?} val
                 * @return {?}
                 */
                function (val) {
                    return val['value'] == value_3;
                }));
                if (texts) {
                    item.valueText = texts['name'];
                    if (item.valueText == 'true') {
                        item.valueText = this.localeService.getValue('text.yes');
                    }
                    else if (item.valueText == 'false') {
                        item.valueText = this.localeService.getValue('text.no');
                    }
                }
            }
        }
        else if (item.control.getControlType() == ControlType.InputGroup) {
            item.valueText = item.value.getValueText();
        }
    };
    /**
     * @param {?} value
     * @return {?}
     */
    FilterComponent.prototype.buildSmartHelpKey = /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        if (this.idService) {
            /** @type {?} */
            var prefix = '';
            if (location.hash) {
                /** @type {?} */
                var pathArr = location.hash.split('?');
                prefix = pathArr ? pathArr[0] : '';
            }
            else {
                /** @type {?} */
                var pathArr = location.pathname.split('/');
                prefix = pathArr ? pathArr[pathArr.length - 1] : '';
            }
            return this.idService.encrypt(prefix + '/list-filter/' + value);
        }
        else {
            return 'list-filter/' + value;
        }
    };
    FilterComponent.decorators = [
        { type: Component, args: [{
                    selector: 'farris-filter',
                    template: "<div class=\"f-filter-wrapper\" #filterWrapper [style.display]=\"filterList&&filterList.length ? '': 'none'\">\r\n    <div class=\"f-filter-wrapper-inner f-utils-fill\">\r\n        <div class=\"f-filter-main f-utils-fill\" #filterMain>\r\n            <div class=\"f-filter-list-wrapper\" #listWrapper>\r\n                <div class=\"f-filter-list\"\r\n                [ngClass]=\"{'f-filter-list-extend': filterExtend && filterExtendShow}\"\r\n                 #filterListWrapper>\r\n                    <div class=\"f-filter-item\" \r\n                        *ngFor=\"let data of loopFilterList;let index = index;let last = last;let first = first;\"\r\n                        [ngClass]=\"{'f-filter-item-actived': data.filled,'f-filter-item-last':last,'f-filter-item-edit': data.id == currentFilterId}\"\r\n                        [id]=\"data['id']\"\r\n                        (click)=\"filterClick($event,data,index)\"\r\n                        >\r\n                            <div class=\"f-filter-item-inner\"\r\n                                farrisTooltip \r\n                                [showTip]=\"data.id !== currentFilterId && data.filled && data.valueText\" \r\n                                [placement]=\"'bottom'\" \r\n                                [content]=\"data.valueText\"\r\n                            >\r\n                                <span class=\"f-filter-item-required text-danger\" *ngIf=\"data.control.required\">*</span>\r\n                                <span class=\"f-filter-item-text\">\r\n                                    {{data.fieldName}}\r\n                                </span>\r\n                                <span class=\"f-filter-item-tip\" *ngIf=\"data.filled&&data.valueText\">\uFF1A</span>\r\n                                <span class=\"f-filter-item-content\" *ngIf=\"data.filled&&data.valueText\" >{{data.valueText}}</span>\r\n                                <!--  -->\r\n                                <span class=\"f-filter-item-arrow f-icon f-icon-arrow-chevron-down\"></span>\r\n                            </div>\r\n                            <span class=\"f-filter-item-clear\" *ngIf=\"!disabled&&data.filled&&data.valueText && data.control.enableClear\" (click)=\"filterClear(data,index,$event)\">\r\n                                <span class=\"f-icon f-icon-close-circle\"></span>\r\n                            </span>\r\n                    </div>                 \r\n                    <div class=\"f-filter-toolbars\" *ngIf=\"filterExtend\">\r\n                        <button class=\"btn btn-link\" (click)=\"advancedFilter()\" *ngIf=\"floatFilter && extendFilterList && extendFilterList.length > 0\">{{ 'filterPanel.advancedFilter' | locale }}</button>\r\n                        <button class=\"btn btn-link\" (click)=\"resetSearch()\" *ngIf=\"!showReminder && filledFilter\">{{ 'filterPanel.clear' | locale }}</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"f-filter-list-ellipsis\" *ngIf=\"filterEllipsis && !filterExtend && filterExtendShow\" (click)=\"filterExpand()\">...</div>\r\n            <div class=\"f-filter-toolbars\" #filterTool *ngIf=\"!filterExtend\">\r\n                <button class=\"btn btn-link\" (click)=\"advancedFilter()\" *ngIf=\"floatFilter && extendFilterList && extendFilterList.length > 0\">{{ 'filterPanel.advancedFilter' | locale }}</button>\r\n                <button class=\"btn btn-link\" (click)=\"resetSearch()\" *ngIf=\"!showReminder && filledFilter\">{{ 'filterPanel.clear' | locale }}</button>\r\n            </div>\r\n        </div>\r\n        <div class=\"f-filter-extend-btn\" (click)=\"filterExpand()\" *ngIf=\"filterExtendShow\">\r\n            <button class=\"btn btn-link\">\r\n                <span class=\"extend-btn-text\">{{filterExtendText}}</span>\r\n                <span [class]=\"'extend-btn-arrow f-icon '+filterExtendIcon\"></span>\r\n            </button>\r\n        </div>\r\n        <div class=\"f-filter-extend-btn-advanced\" *ngIf=\"!floatFilter && extendFilterList && extendFilterList.length > 0\" [class.active]=\"floatPanelOpen\" (click)=\"floatFilterOpen($event)\">\r\n            <span class=\"f-icon f-icon-filtrate\"></span>\r\n            <span class=\"filter-expand-tag\" *ngIf=\"showExpandTag\"></span>\r\n        </div>\r\n    </div>\r\n    <div class=\"f-filter-inputs-extend position-absolute\" *ngIf=\"!floatFilter\" [hidden]=\"!floatPanelOpen\" #floatPanel>\r\n        <div class=\"f-filter-typelist-arrow\"></div>\r\n        <div class=\"f-filter-inputs-extend-list farris-form farris-form-auto\" [ngClass]=\"{'farris-form-controls-inline':isControlInline}\" >\r\n            <fieldset class=\"f-section-formgroup\" [style.maxHeight.px]=\"floatPanelHeight\" style=\"overflow:auto\">\r\n                <div class=\"f-section-formgroup-inputs\">\r\n                  <div class=\"col-12\">\r\n                    <ng-container *ngFor=\"let item of extendFilterList\">\r\n                        <div class=\"filter-input-list farris-group-wrap\">\r\n                            <ng-container [ngTemplateOutlet]=\"filterInputTemplate\" [ngTemplateOutletContext]=\"{ item: item }\">\r\n                            </ng-container>\r\n                        </div>\r\n                    </ng-container>\r\n                  </div>\r\n                </div>\r\n            </fieldset>\r\n          <div class=\"f-filter-form-btns d-flex\" style=\"justify-content: space-between\">\r\n            <button class=\"btn btn-link\" (click)=\"resetAdvancedSearch()\">{{ 'filterPanel.empty' | locale }}</button>\r\n            <!-- bugNum:456508 -->\r\n            <div>\r\n                <button type=\"button\" class=\"btn btn-secondary\" (click)=\"listCancel()\">{{ 'filterPanel.cancel' | locale }}</button>\r\n                <button type=\"button\" class=\"f-sidebar-filter-btn-confirm btn btn-primary\" [ngClass]=\"{'disabled': disabled}\" (click)=\"listSearch()\">{{ 'filterPanel.confirm' | locale }}</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class=\"f-filter-item-reminder\" *ngIf=\"showReminder && showReminderItem\" [ngStyle]=\"{'left': reminderLeft+'px'}\">\r\n        <span class=\"reminder-arrow\"></span>\r\n        <div class=\"reminder-inner\">\r\n            <span class=\"f-icon f-icon-help-01\"></span>\r\n            <span class=\"reminder-text\">{{ 'filterPanel.pleaseInput' | locale }}<span>{{showReminderItem.fieldName}}</span></span>\r\n        </div>\r\n    </div>\r\n</div>\r\n<farris-sidebar [title]=\"'filterPanel.advancedFilter' | locale\" #farrissidebar [resizeable]=\"true\" [mainCls]=\"'f-sidebar-filter-main'\"\r\n    [showEntry]=\"false\" [showHeader]=\"true\" [showFooter]=\"true\" [maskable]=\"true\" [maskClosable]=\"false\"\r\n    [showClose]=\"false\" [width]=\"468\" [isOpen]=\"sidebarOpen\" *ngIf=\"extendFilterList && extendFilterList.length > 0\">\r\n    <ng-template farrisSidebarToolbar></ng-template>\r\n    <ng-template farrisSidebarContent [contentCls]=\"'f-sidebar-filter-content'\">\r\n        <div class=\"f-sidebar-filter-list farris-form\" [ngClass]=\"{'farris-form-controls-inline':isControlInline}\">\r\n            <div class=\"filter-list-item farris-group-wrap\" *ngFor=\"let item of extendFilterList\">\r\n                <ng-container [ngTemplateOutlet]=\"filterInputTemplate\" [ngTemplateOutletContext]=\"{ item: item }\">\r\n                </ng-container>\r\n            </div>\r\n        </div>\r\n    </ng-template>\r\n    <ng-template farrisSidebarFooter [footerCls]=\"'f-sidebar-filter-footer'\">\r\n        <div class=\"f-sidebar-filter-clear\">\r\n            <button class=\"btn btn-link\" [class.disabled]=\"disabled\" [disabled]=\"disabled\" (click)=\"resetAdvancedSearch()\">{{ 'filterPanel.empty' | locale }}</button>\r\n        </div>\r\n        <div class=\"f-sidebar-filter-btns\">\r\n            <button type=\"button\" class=\"btn btn-secondary\" (click)=\"listCancel()\">{{ 'filterPanel.cancel' | locale }}</button>\r\n            <button type=\"button\" class=\"f-sidebar-filter-btn-confirm btn btn-primary\" [class.disabled]=\"disabled\" [disabled]=\"disabled\" (click)=\"listSearch()\">{{ 'filterPanel.confirm' | locale }}</button>\r\n        </div>\r\n    </ng-template>\r\n</farris-sidebar>\r\n\r\n<ng-template #filterInputTemplate let-item=\"item\">\r\n    <ng-container [ngSwitch]=\"item | controlType\">\r\n        <div class=\"filter-input-item filter-type-input\" *ngSwitchCase=\"'input'\">\r\n            <app-filter-input [item]=\"item\" [disabled]=\"disabled\"\r\n                (searchHandle)=\"onSearch($event,item)\" class=\"form-group farris-form-group\"></app-filter-input>\r\n        </div>\r\n        <div class=\"filter-input-item filter-type-search\" *ngSwitchCase=\"'search'\">\r\n            <app-filter-search [item]=\"item\" [disabled]=\"disabled\"\r\n                (searchHandle)=\"onSearch($event,item)\" class=\"form-group farris-form-group\"></app-filter-search>\r\n        </div>\r\n        <div class=\"filter-input-item filter-type-date\" *ngSwitchCase=\"'date'\">\r\n            <app-filter-date [item]=\"item\" [disabled]=\"disabled\"\r\n                (searchHandle)=\"onSearch($event,item)\" class=\"form-group farris-form-group\"></app-filter-date>\r\n        </div>\r\n        <div class=\"filter-input-item filter-type-year\" *ngSwitchCase=\"'year'\">\r\n            <app-filter-date [item]=\"item\" [disabled]=\"disabled\" [showType]=\"'3'\" (searchHandle)=\"onSearch($event,item)\" class=\"form-group farris-form-group\"></app-filter-date>\r\n        </div>\r\n        <div class=\"filter-input-item filter-type-month\" *ngSwitchCase=\"'month'\">\r\n            <app-filter-date [item]=\"item\" [disabled]=\"disabled\" [showType]=\"'2'\" (searchHandle)=\"onSearch($event,item)\" class=\"form-group farris-form-group\"></app-filter-date>\r\n        </div>\r\n        <div class=\"filter-input-item filter-type-date\" *ngSwitchCase=\"'daterange'\">\r\n            <app-filter-daterange [item]=\"item\" [disabled]=\"disabled\"\r\n                (searchHandle)=\"onSearch($event,item)\" class=\"form-group farris-form-group\"></app-filter-daterange>\r\n        </div>\r\n        <div class=\"filter-input-item filter-type-date\" *ngSwitchCase=\"'daterangetime'\">\r\n            <app-filter-daterange [item]=\"item\" [disabled]=\"disabled\" [showTime]=\"true\"\r\n                (searchHandle)=\"onSearch($event,item)\" class=\"form-group farris-form-group\"></app-filter-daterange>\r\n        </div>\r\n        <div class=\"filter-input-item filter-type-monthrange\" *ngSwitchCase=\"'monthrange'\">\r\n            <app-filter-daterange [item]=\"item\" [disabled]=\"disabled\" [showType]=\"'2'\" (searchHandle)=\"onSearch($event,item)\" class=\"form-group farris-form-group\"></app-filter-daterange>\r\n        </div>\r\n        <div class=\"filter-input-item filter-type-yearrange\" *ngSwitchCase=\"'yearrange'\">\r\n            <app-filter-daterange [item]=\"item\" [disabled]=\"disabled\" [showType]=\"'3'\" (searchHandle)=\"onSearch($event,item)\" class=\"form-group farris-form-group\"></app-filter-daterange>\r\n        </div>\r\n        <div class=\"filter-input-item filter-type-dropdown\" *ngSwitchCase=\"'dropdown'\">\r\n            <app-filter-dropdown [item]=\"item\" [disabled]=\"disabled\" [enableClear]=\"item?.control?.enableClear\"\r\n                (searchHandle)=\"onSearch($event,item)\" class=\"form-group farris-form-group\"></app-filter-dropdown>\r\n        </div>\r\n        <div class=\"filter-input-item filter-type-number\" *ngSwitchCase=\"'number'\">\r\n            <app-filter-number [item]=\"item\" [disabled]=\"disabled\"\r\n                (searchHandle)=\"onSearch($event,item)\" class=\"form-group farris-form-group\"></app-filter-number>\r\n        </div>\r\n        <div class=\"filter-input-item filter-type-single-number\" *ngSwitchCase=\"'singlenumber'\">\r\n            <app-filter-single-number [item]=\"item\" [disabled]=\"disabled\"\r\n                (searchHandle)=\"onSearch($event,item)\" class=\"form-group farris-form-group\"></app-filter-single-number>\r\n        </div>\r\n        <div class=\"filter-input-item filter-type-help\" *ngSwitchCase=\"'help'\">\r\n            <app-filter-help [item]=\"item\" [disabled]=\"disabled\" [hostRef]=\"this\" [instanceId]=\"buildSmartHelpKey(item.fieldCode)\"\r\n                (searchHandle)=\"onSearch($event,item)\" class=\"form-group farris-form-group\"></app-filter-help>\r\n        </div>\r\n        <div class=\"filter-input-item filter-type-checkboxgroup\" *ngSwitchCase=\"'checkboxgroup'\">\r\n            <app-filter-checkbox [item]=\"item\" [disabled]=\"disabled\"\r\n                (searchHandle)=\"onSearch($event,item)\" class=\"form-group farris-form-group\"\r\n                style=\"white-space: nowrap;\"></app-filter-checkbox>\r\n        </div>\r\n        <div class=\"filter-input-item filter-type-radio\" *ngSwitchCase=\"'radio'\">\r\n            <app-filter-radio [item]=\"item\" [disabled]=\"disabled\"\r\n                (searchHandle)=\"onSearch($event,item)\" class=\"form-group farris-form-group\"\r\n                style=\"white-space: nowrap;\"></app-filter-radio>\r\n        </div>\r\n        <div class=\"filter-input-item filter-type-input-group\" *ngSwitchCase=\"'input-group'\">\r\n            <app-filter-inputgroup [item]=\"item\" [disabled]=\"disabled\"\r\n                (searchHandle)=\"onSearch($event,item)\" class=\"form-group farris-form-group\"\r\n                style=\"white-space: nowrap;\"></app-filter-inputgroup>\r\n        </div>\r\n        <div class=\"filter-input-item filter-type-flexiblenumbe\" *ngSwitchCase=\"'flexiblenumber'\">\r\n            <app-filter-flexiblenumber [item]=\"item\" [disabled]=\"disabled\"\r\n                (searchHandle)=\"onSearch($event,item)\" class=\"form-group farris-form-group\"\r\n                style=\"white-space: nowrap;\"></app-filter-flexiblenumber>\r\n        </div>\r\n        <div class=\"filter-input-item filter-type-flexiblenumbe\" *ngSwitchCase=\"'flexibledate'\">\r\n            <app-filter-flexibledate [item]=\"item\" [disabled]=\"disabled\"\r\n                (searchHandle)=\"onSearch($event,item)\" class=\"form-group farris-form-group\"\r\n                style=\"white-space: nowrap;\"></app-filter-flexibledate>\r\n        </div>\r\n        <!-- <div class=\"filter-input-item filter-type-boolcheckbox\" *ngSwitchCase=\"'bool-check'\">\r\n            <app-filter-checkbox [item]=\"item\" [disabled]=\"disabled\" [boolcheck]=\"true\"\r\n            (searchHandle)=\"onSearch($event,item)\" class=\"form-group farris-form-group\"\r\n            style=\"white-space: nowrap;\"></app-filter-checkbox>\r\n        </div> -->\r\n        <div class=\"filter-input-item filter-type-default\" *ngSwitchDefault>\r\n            <app-filter-input [item]=\"item\" [disabled]=\"disabled\"\r\n                (searchHandle)=\"onSearch($event,item)\" class=\"form-group farris-form-group\"></app-filter-input>\r\n        </div>\r\n    </ng-container>\r\n</ng-template>",
                    encapsulation: ViewEncapsulation.None,
                    providers: [
                        FilterPanelService
                    ]
                }] }
    ];
    /** @nocollapse */
    FilterComponent.ctorParameters = function () { return [
        { type: FilterPanelService },
        { type: FilterService },
        { type: ConvertorService },
        { type: QuerySolutionService },
        { type: ChangeDetectorRef },
        { type: Renderer2 },
        { type: NgZone },
        { type: LocaleService },
        { type: Injector, decorators: [{ type: Optional }] }
    ]; };
    FilterComponent.propDecorators = {
        filterList: [{ type: Input }],
        disabled: [{ type: Input }],
        showReminder: [{ type: Input }],
        floatFilter: [{ type: Input }],
        enableAutoWidth: [{ type: Input }],
        localStorageKey: [{ type: Input }],
        defaultValue: [{ type: Input }],
        cla: [{ type: HostBinding, args: ['class.f-filter',] }],
        query: [{ type: Output }],
        searchChange: [{ type: Output }],
        resetChange: [{ type: Output }],
        clearFilter: [{ type: Output }],
        expandFilter: [{ type: Output }],
        packupFilter: [{ type: Output }],
        filterResize: [{ type: Output }],
        filterMain: [{ type: ViewChild, args: ['filterMain',] }],
        filterTool: [{ type: ViewChild, args: ['filterTool',] }],
        filterWrapper: [{ type: ViewChild, args: ['filterWrapper',] }],
        farrissidebar: [{ type: ViewChild, args: ['farrissidebar',] }],
        listWrapper: [{ type: ViewChild, args: ['listWrapper',] }],
        filterListWrapper: [{ type: ViewChild, args: ['filterListWrapper',] }],
        floatPanel: [{ type: ViewChild, args: ['floatPanel',] }]
    };
    return FilterComponent;
}());
export { FilterComponent };
if (false) {
    /** @type {?} */
    FilterComponent.prototype._filterList;
    /** @type {?} */
    FilterComponent.prototype.disabled;
    /** @type {?} */
    FilterComponent.prototype.showReminder;
    /** @type {?} */
    FilterComponent.prototype.floatFilter;
    /**
     * @type {?}
     * @private
     */
    FilterComponent.prototype._enableAutoWidth;
    /** @type {?} */
    FilterComponent.prototype.localStorageKey;
    /** @type {?} */
    FilterComponent.prototype._defaultValue;
    /** @type {?} */
    FilterComponent.prototype.cla;
    /** @type {?} */
    FilterComponent.prototype.query;
    /** @type {?} */
    FilterComponent.prototype.searchChange;
    /** @type {?} */
    FilterComponent.prototype.resetChange;
    /** @type {?} */
    FilterComponent.prototype.clearFilter;
    /** @type {?} */
    FilterComponent.prototype.expandFilter;
    /** @type {?} */
    FilterComponent.prototype.packupFilter;
    /** @type {?} */
    FilterComponent.prototype.filterResize;
    /** @type {?} */
    FilterComponent.prototype.filterMain;
    /** @type {?} */
    FilterComponent.prototype.filterTool;
    /** @type {?} */
    FilterComponent.prototype.filterWrapper;
    /** @type {?} */
    FilterComponent.prototype.farrissidebar;
    /** @type {?} */
    FilterComponent.prototype.listWrapper;
    /** @type {?} */
    FilterComponent.prototype.filterListWrapper;
    /** @type {?} */
    FilterComponent.prototype.floatPanel;
    /** @type {?} */
    FilterComponent.prototype.currentFilterId;
    /** @type {?} */
    FilterComponent.prototype.filterExtend;
    /** @type {?} */
    FilterComponent.prototype.filterEllipsis;
    /** @type {?} */
    FilterComponent.prototype.filterExtendShow;
    /** @type {?} */
    FilterComponent.prototype.filterExtendText;
    /** @type {?} */
    FilterComponent.prototype.filterExtendIcon;
    /** @type {?} */
    FilterComponent.prototype.expandText;
    /** @type {?} */
    FilterComponent.prototype.foldText;
    /** @type {?} */
    FilterComponent.prototype.filterWrapperEl;
    /** @type {?} */
    FilterComponent.prototype.filterToolWidth;
    /** @type {?} */
    FilterComponent.prototype.sidebarOpen;
    /** @type {?} */
    FilterComponent.prototype.floatPanelOpen;
    /** @type {?} */
    FilterComponent.prototype.showExpandTag;
    /**
     * 表单是否允许提交
     * @type {?}
     */
    FilterComponent.prototype.canSubmit;
    /**
     * 表单是否允许提交,用于高级筛选清空后
     * @type {?}
     */
    FilterComponent.prototype.advancedCanSubmit;
    /**
     * 默认展开项是否允许提交
     * @type {?}
     */
    FilterComponent.prototype.showCanSubmit;
    /**
     * 是否显示清空已选
     * @type {?}
     */
    FilterComponent.prototype.filledFilter;
    /**
     * 默认展开的筛选项
     * @type {?}
     */
    FilterComponent.prototype.showFilterList;
    /**
     * 高级筛选
     * @type {?}
     */
    FilterComponent.prototype.extendFilterList;
    /** @type {?} */
    FilterComponent.prototype.extendFilterListStore;
    /** @type {?} */
    FilterComponent.prototype.extendFilterListTemporary;
    /**
     * 已填写筛选数据
     * @type {?}
     */
    FilterComponent.prototype.filledFilterList;
    /**
     * 高级筛选中已填写的
     * @type {?}
     */
    FilterComponent.prototype.filledExtendFilterList;
    /**
     * 高级筛选中必填项
     * @type {?}
     */
    FilterComponent.prototype.extendRequiredList;
    /**
     * 默认筛选中必填项
     * @type {?}
     */
    FilterComponent.prototype.showRequiredList;
    /**
     * 循环表单
     * @type {?}
     */
    FilterComponent.prototype.listFilterConditions;
    /**
     * 默认展开＋高级筛选中已填写的
     * @type {?}
     */
    FilterComponent.prototype.loopFilterList;
    /**
     * 用来存储setvalue前数据
     * @type {?}
     */
    FilterComponent.prototype.stagListFilterConditions;
    /**
     * 显示中表单的必填项
     * @type {?}
     */
    FilterComponent.prototype.requiredListFilter;
    /** @type {?} */
    FilterComponent.prototype.localeIds;
    /** @type {?} */
    FilterComponent.prototype.currentLocale;
    /** @type {?} */
    FilterComponent.prototype.isControlInline;
    /**
     * 组件服务接口
     * @type {?}
     */
    FilterComponent.prototype.filterHandler;
    /** @type {?} */
    FilterComponent.prototype.filterPanelContainer;
    /** @type {?} */
    FilterComponent.prototype.showReminderItem;
    /** @type {?} */
    FilterComponent.prototype.reminderLeft;
    /** @type {?} */
    FilterComponent.prototype.floatPanelHeight;
    /** @type {?} */
    FilterComponent.prototype.floatFilterIconBottom;
    /**
     * @type {?}
     * @private
     */
    FilterComponent.prototype.ro;
    /**
     * @type {?}
     * @private
     */
    FilterComponent.prototype.containerWidthRecord;
    /**
     * @type {?}
     * @private
     */
    FilterComponent.prototype.distanceThreshold;
    /**
     * @type {?}
     * @private
     */
    FilterComponent.prototype.idService;
    /**
     * @type {?}
     * @private
     */
    FilterComponent.prototype.overLayService;
    /**
     * @type {?}
     * @private
     */
    FilterComponent.prototype.filterPanelService;
    /**
     * @type {?}
     * @private
     */
    FilterComponent.prototype.filterService;
    /**
     * @type {?}
     * @private
     */
    FilterComponent.prototype.convertorService;
    /**
     * @type {?}
     * @private
     */
    FilterComponent.prototype.handler;
    /**
     * @type {?}
     * @private
     */
    FilterComponent.prototype.cd;
    /**
     * @type {?}
     * @private
     */
    FilterComponent.prototype.render;
    /** @type {?} */
    FilterComponent.prototype.ngzone;
    /** @type {?} */
    FilterComponent.prototype.localeService;
    /**
     * @type {?}
     * @private
     */
    FilterComponent.prototype.injector;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmlsdGVyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvdWktZmlsdGVyLyIsInNvdXJjZXMiOlsibGliL2ZpbHRlci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQ0gsU0FBUyxFQUFVLEtBQUssRUFBRSxTQUFTLEVBQUUsaUJBQWlCLEVBQUUsVUFBVSxFQUFpQixpQkFBaUIsRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUN2SCxZQUFZLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsU0FBUyxFQUFFLFdBQVcsRUFBRSxXQUFXLEVBQ2hGLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDakMsT0FBTyxFQUFFLFNBQVMsRUFBd0IsTUFBTSxnQkFBZ0IsQ0FBQztBQUVqRSxPQUFPLEVBQUUsc0JBQXNCLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUU1RCxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDbEQsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0seUJBQXlCLENBQUM7QUFDN0QsT0FBTyxFQUFFLG9CQUFvQixFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFFbkUsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBQ2pELE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLDRCQUE0QixDQUFDO0FBRTlELE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUNuRCxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sbUNBQW1DLENBQUM7QUFDOUQsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLG1DQUFtQyxDQUFDO0FBQzlELE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLDJDQUEyQyxDQUFDO0FBQzlFLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSx3Q0FBd0MsQ0FB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Ozs7O0lBRXpDLCtDQUFpQzs7Ozs7SUFFakMsNENBQStCOzs7OztJQUUvQixvQ0FBNkI7Ozs7O0lBQzdCLHlDQUFvRDs7Ozs7SUFFaEQsNkNBQThDOzs7OztJQUM5Qyx3Q0FBb0M7Ozs7O0lBQ3BDLDJDQUEwQzs7Ozs7SUFDMUMsa0NBQXFDOzs7OztJQUNyQyw2QkFBNkI7Ozs7O0lBQzdCLGlDQUF5Qjs7SUFDekIsaUNBQXFCOztJQUNyQix3Q0FBbUM7Ozs7O0lBQ25DLG1DQUFzQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XHJcbiAgICBDb21wb25lbnQsIE9uSW5pdCwgSW5wdXQsIFZpZXdDaGlsZCwgVmlld0VuY2Fwc3VsYXRpb24sIEVsZW1lbnRSZWYsIEFmdGVyVmlld0luaXQsIENoYW5nZURldGVjdG9yUmVmLCBSZW5kZXJlcjIsIE5nWm9uZSxcclxuICAgIEV2ZW50RW1pdHRlciwgT3V0cHV0LCBJbmplY3RvciwgT3B0aW9uYWwsIExPQ0FMRV9JRCwgSW5qZWN0RmxhZ3MsIEhvc3RCaW5kaW5nLCBPbkNoYW5nZXMsIFNpbXBsZUNoYW5nZXMsIE9uRGVzdHJveVxyXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBmcm9tRXZlbnQgfSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHsgYXVkaXRUaW1lLCBkZWJvdW5jZVRpbWUsIGZpbHRlciB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcclxuaW1wb3J0IHsgYW5pbWF0aW9uRnJhbWUgfSBmcm9tICdyeGpzL2ludGVybmFsL3NjaGVkdWxlci9hbmltYXRpb25GcmFtZSc7XHJcbmltcG9ydCB7IEZhcnJpc1NpZGViYXJDb21wb25lbnQgfSBmcm9tICdAZmFycmlzL3VpLXNpZGViYXInO1xyXG5cclxuaW1wb3J0IHsgTG9jYWxlU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbG9jYWxlJztcclxuaW1wb3J0IHsgRmlsdGVyUGFuZWxTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1maWx0ZXItcGFuZWwnO1xyXG5pbXBvcnQgeyBRdWVyeVNvbHV0aW9uU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktZmlsdGVyLWNvbmRpdGlvbic7XHJcblxyXG5pbXBvcnQgeyBGaWx0ZXJTZXJ2aWNlIH0gZnJvbSAnLi9maWx0ZXIuc2VydmljZSc7XHJcbmltcG9ydCB7IENvbnZlcnRvclNlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2UvY29udmVydG9yc2VydmljZSc7XHJcbmltcG9ydCB7IFF1ZXJ5Q29uZGl0aW9uIH0gZnJvbSAnLi9lbnRpdHkvcXVlcnljb25kaXRpb24nO1xyXG5pbXBvcnQgeyBDb250cm9sVHlwZSB9IGZyb20gJy4vZW50aXR5L2NvbnRyb2x0eXBlJztcclxuaW1wb3J0IHsgVGV4dFZhbHVlIH0gZnJvbSAnLi9lbnRpdHkvY29uZGl0aW9udmFsdWUvdGV4dHZhbHVlJztcclxuaW1wb3J0IHsgSGVscFZhbHVlIH0gZnJvbSAnLi9lbnRpdHkvY29uZGl0aW9udmFsdWUvaGVscHZhbHVlJztcclxuaW1wb3J0IHsgRHJvcERvd25MaXN0VmFsdWUgfSBmcm9tICcuL2VudGl0eS9jb25kaXRpb252YWx1ZS9kcm9wZG93bmxpc3R2YWx1ZSc7XHJcbmltcG9ydCB7IERhdGVSYW5nZVZhbHVlIH0gZnJvbSAnLi9lbnRpdHkvY29uZGl0aW9udmFsdWUvZGF0ZXJhbmdldmFsdWUnO1xyXG5pbXBvcnQgeyBEYXRlUmFuZ2VUaW1lVmFsdWUgfSBmcm9tICcuL2VudGl0eS9jb25kaXRpb252YWx1ZS9kYXRlcmFuZ2V0aW1ldmFsdWUnO1xyXG5pbXBvcnQgeyBOdW1iZXJSYW5nZVZhbHVlIH0gZnJvbSAnLi9lbnRpdHkvY29uZGl0aW9udmFsdWUvbnVtYmVycmFuZ2V2YXVlJztcclxuaW1wb3J0IHsgU2VhcmNoVmFsdWUgfSBmcm9tICcuL2VudGl0eS9jb25kaXRpb252YWx1ZS9zZWFyY2h2YWx1ZSc7XHJcbmltcG9ydCB7IERhdGVWYWx1ZSB9IGZyb20gJy4vZW50aXR5L2NvbmRpdGlvbnZhbHVlL2RhdGV2YWx1ZSc7XHJcbmltcG9ydCB7IENoZWNrYm94R3JvdXBWYWx1ZSB9IGZyb20gJy4vZW50aXR5L2NvbmRpdGlvbnZhbHVlL2NoZWNrYm94Z3JvdXB2YWx1ZSc7XHJcblxyXG5pbXBvcnQgeyBGaWVsZENvbmZpZyB9IGZyb20gJy4vZW50aXR5L2ZpZWxkY29uZmlnL2ZpZWxkY29uZmlnJztcclxuaW1wb3J0IHsgRmlsdGVySGFuZGxlciwgRklMVEVSX0hBTkRMRVJfVE9LRU4gfSBmcm9tICcuL2ludGVyZmFjZS9maWx0ZXJIYW5kbGVyJztcclxuaW1wb3J0IHsgZGVlcENvcHkgfSBmcm9tICcuL3V0aWxzJztcclxuaW1wb3J0IHsgRHJvcERvd25Db250cm9sIH0gZnJvbSAnLi9lbnRpdHkvY29udHJvbHR5cGUvZHJvcGRvd25saXN0L2Ryb3Bkb3duY29udHJvbCc7XHJcbmltcG9ydCB7IENoZWNrYm94R3JvdXBDb250cm9sIH0gZnJvbSAnLi9lbnRpdHkvY29udHJvbHR5cGUvY2hlY2tib3gvY2hlY2tib3hjb250cm9sJztcclxuaW1wb3J0IHsgUmFkaW9Hcm91cFZhbHVlIH0gZnJvbSAnLi9lbnRpdHkvY29uZGl0aW9udmFsdWUvcmFkaW92YWx1ZSc7XHJcbmltcG9ydCB7IFJhZGlvQ29udHJvbCB9IGZyb20gJy4vZW50aXR5L2NvbnRyb2x0eXBlL3JhZGlvL3JhZGlvY29udHJvbCc7XHJcbmltcG9ydCB7IE1vbnRoUmFuZ2VWYWx1ZSB9IGZyb20gJy4vZW50aXR5L2NvbmRpdGlvbnZhbHVlL21vbnRocmFuZ2UnO1xyXG5pbXBvcnQgeyBZZWFyUmFuZ2VWYWx1ZSB9IGZyb20gJy4vZW50aXR5L2NvbmRpdGlvbnZhbHVlL3llYXJyYW5nZSc7XHJcbmltcG9ydCB7IE1vbnRoVmFsdWUgfSBmcm9tICcuL2VudGl0eS9jb25kaXRpb252YWx1ZS9tb250aCc7XHJcbmltcG9ydCB7IFllYXJWYWx1ZSB9IGZyb20gJy4vZW50aXR5L2NvbmRpdGlvbnZhbHVlL3llYXJ2YWx1ZSc7XHJcbmltcG9ydCB7IElucHV0R3JvdXBWYWx1ZSB9IGZyb20gJy4vZW50aXR5L2NvbmRpdGlvbnZhbHVlL2lucHV0Z3JvdXAnO1xyXG5pbXBvcnQgeyBOdW1iZXJWYWx1ZSB9IGZyb20gJy4vZW50aXR5L2NvbmRpdGlvbnZhbHVlL251bWJlcnZhbHVlJztcclxuaW1wb3J0IHsgRmxleGlibGVOdW1iZXJWYWx1ZSB9IGZyb20gJy4vZW50aXR5L2NvbmRpdGlvbnZhbHVlL2ZsZXhpYmxlbnVtYmVydmFsdWUnO1xyXG5pbXBvcnQgeyBGbGV4aWJsZURhdGVWYWx1ZSB9IGZyb20gJy4vZW50aXR5L2NvbmRpdGlvbnZhbHVlL2ZsZXhpYmxlZGF0ZXZhbHVlJztcclxuaW1wb3J0IFJlc2l6ZU9ic2VydmVyIGZyb20gXCJyZXNpemUtb2JzZXJ2ZXItcG9seWZpbGxcIjtcclxuaW1wb3J0IHsgSWRTZXJ2aWNlLCBPdmVyTGF5SGlkZGVuU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktY29tbW9uJztcclxuQENvbXBvbmVudCh7XHJcbiAgICBzZWxlY3RvcjogJ2ZhcnJpcy1maWx0ZXInLFxyXG4gICAgdGVtcGxhdGVVcmw6ICcuL2ZpbHRlci5jb21wb25lbnQuaHRtbCcsXHJcbiAgICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lLFxyXG4gICAgcHJvdmlkZXJzOiBbXHJcbiAgICAgICAgRmlsdGVyUGFuZWxTZXJ2aWNlXHJcbiAgICBdXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBGaWx0ZXJDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyVmlld0luaXQsIE9uQ2hhbmdlcywgT25EZXN0cm95IHtcclxuXHJcbiAgICBfZmlsdGVyTGlzdDogQXJyYXk8YW55PiA9IFtdO1xyXG4gICAgQElucHV0KClcclxuICAgIGdldCBmaWx0ZXJMaXN0KCk6IEFycmF5PGFueT4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9maWx0ZXJMaXN0O1xyXG4gICAgfVxyXG4gICAgc2V0IGZpbHRlckxpc3QoZmlsdGVyTGlzdDogQXJyYXk8YW55Pikge1xyXG4gICAgICAgIHRoaXMuX2ZpbHRlckxpc3QgPSBmaWx0ZXJMaXN0IHx8IFtdO1xyXG4gICAgICAgIHRoaXMuaW5pdEZpbHRlckxpc3QoKTtcclxuICAgIH1cclxuICAgIC8v5piv5ZCm56aB55SoXHJcbiAgICBASW5wdXQoKSBkaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgQElucHV0KCkgc2hvd1JlbWluZGVyID0gZmFsc2U7XHJcbiAgICAvLyDmmK/lkKblkK/nlKjkvqfovrnmoI/lj47mipgt6L+H5ruk5p2h5Lu25Zyo5L6n6L655qCP5pi+56S6XHJcbiAgICBASW5wdXQoKSBmbG9hdEZpbHRlciA9IHRydWU7XHJcbiAgICAvLyDlkK/nlKjoh6rliqjlrr3luqZcclxuICAgIHByaXZhdGUgX2VuYWJsZUF1dG9XaWR0aCA9IGZhbHNlO1xyXG4gICAgQElucHV0KClcclxuICAgIHNldCBlbmFibGVBdXRvV2lkdGgodmFsdWUpIHtcclxuICAgICAgICBpZiAodmFsdWUgIT09IHRoaXMuX2VuYWJsZUF1dG9XaWR0aCkge1xyXG4gICAgICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyRWxsaXBzaXMgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyRXh0ZW5kU2hvdyA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX2VuYWJsZUF1dG9XaWR0aCA9IHZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldCBlbmFibGVBdXRvV2lkdGgoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuYWJsZUF1dG9XaWR0aDtcclxuICAgIH1cclxuXHJcbiAgICBASW5wdXQoKSBsb2NhbFN0b3JhZ2VLZXk6IHN0cmluZyA9ICdmYXJyaXNTZWFyY2hSZWNvcmQnO1xyXG5cclxuICAgIC8v5Yid5aeL5YyW5YC8XHJcbiAgICBfZGVmYXVsdFZhbHVlOiBGaWVsZENvbmZpZ1tdO1xyXG4gICAgQElucHV0KClcclxuICAgIHNldCBkZWZhdWx0VmFsdWUoY29uZmlnczogRmllbGRDb25maWdbXSkge1xyXG4gICAgICAgIHRoaXMuX2RlZmF1bHRWYWx1ZSA9IGNvbmZpZ3M7XHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0RmlsdGVyVmFsdWUodGhpcy5fZGVmYXVsdFZhbHVlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGdldCBkZWZhdWx0VmFsdWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZmF1bHRWYWx1ZTtcclxuICAgIH1cclxuICAgIEBIb3N0QmluZGluZygnY2xhc3MuZi1maWx0ZXInKSBjbGEgPSB0cnVlO1xyXG5cclxuICAgIEBPdXRwdXQoKSBxdWVyeSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIEBPdXRwdXQoKSBzZWFyY2hDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICBAT3V0cHV0KCkgcmVzZXRDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICBAT3V0cHV0KCkgY2xlYXJGaWx0ZXIgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICBAT3V0cHV0KCkgZXhwYW5kRmlsdGVyID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgQE91dHB1dCgpIHBhY2t1cEZpbHRlciA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIEBPdXRwdXQoKSBmaWx0ZXJSZXNpemUgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgQFZpZXdDaGlsZCgnZmlsdGVyTWFpbicpIGZpbHRlck1haW46IEVsZW1lbnRSZWY7XHJcbiAgICBAVmlld0NoaWxkKCdmaWx0ZXJUb29sJykgZmlsdGVyVG9vbDogRWxlbWVudFJlZjtcclxuICAgIEBWaWV3Q2hpbGQoJ2ZpbHRlcldyYXBwZXInKSBmaWx0ZXJXcmFwcGVyOiBFbGVtZW50UmVmO1xyXG4gICAgQFZpZXdDaGlsZCgnZmFycmlzc2lkZWJhcicpIGZhcnJpc3NpZGViYXI6IEZhcnJpc1NpZGViYXJDb21wb25lbnQ7XHJcbiAgICBAVmlld0NoaWxkKCdsaXN0V3JhcHBlcicpIGxpc3RXcmFwcGVyOiBFbGVtZW50UmVmO1xyXG4gICAgQFZpZXdDaGlsZCgnZmlsdGVyTGlzdFdyYXBwZXInKSBmaWx0ZXJMaXN0V3JhcHBlcjogRWxlbWVudFJlZjtcclxuICAgIEBWaWV3Q2hpbGQoJ2Zsb2F0UGFuZWwnKSBmbG9hdFBhbmVsOiBFbGVtZW50UmVmO1xyXG4gICAgY3VycmVudEZpbHRlcklkO1xyXG4gICAgLy8g5bGV5byAXHJcbiAgICBmaWx0ZXJFeHRlbmQgPSBmYWxzZTtcclxuICAgIC8vIOaYr+WQpuaYvuekuuS4ieS4queCuVxyXG4gICAgZmlsdGVyRWxsaXBzaXMgPSBmYWxzZTtcclxuICAgIC8vIOaYr+WQpuaYvuekuuWxleW8gOaUtui1t1xyXG4gICAgZmlsdGVyRXh0ZW5kU2hvdyA9IGZhbHNlO1xyXG4gICAgZmlsdGVyRXh0ZW5kVGV4dCA9ICflsZXlvIAnO1xyXG4gICAgZmlsdGVyRXh0ZW5kSWNvbiA9ICdmLWljb24tYXJyb3ctY2hldnJvbi1kb3duJztcclxuICAgIGV4cGFuZFRleHQgPSAn5bGV5byAJztcclxuICAgIGZvbGRUZXh0ID0gJ+aUtui1tyc7XHJcbiAgICBmaWx0ZXJXcmFwcGVyRWw7XHJcbiAgICBmaWx0ZXJUb29sV2lkdGg6IG51bWJlcjtcclxuICAgIHNpZGViYXJPcGVuID0gZmFsc2U7XHJcbiAgICBmbG9hdFBhbmVsT3BlbiA9IGZhbHNlO1xyXG4gICAgc2hvd0V4cGFuZFRhZyA9IGZhbHNlO1xyXG4gICAgLyoqIOihqOWNleaYr+WQpuWFgeiuuOaPkOS6pCAqL1xyXG4gICAgY2FuU3VibWl0ID0gZmFsc2U7XHJcbiAgICAvKiog6KGo5Y2V5piv5ZCm5YWB6K645o+Q5LqkLOeUqOS6jumrmOe6p+etm+mAiea4heepuuWQjiAqL1xyXG4gICAgYWR2YW5jZWRDYW5TdWJtaXQgPSB0cnVlO1xyXG4gICAgLyoqIOm7mOiupOWxleW8gOmhueaYr+WQpuWFgeiuuOaPkOS6pCAqL1xyXG4gICAgc2hvd0NhblN1Ym1pdCA9IHRydWU7XHJcbiAgICAvKiog5piv5ZCm5pi+56S65riF56m65bey6YCJICovXHJcbiAgICBmaWxsZWRGaWx0ZXIgPSBmYWxzZTtcclxuICAgIC8qKiDpu5jorqTlsZXlvIDnmoTnrZvpgInpobkgKi9cclxuICAgIHNob3dGaWx0ZXJMaXN0OiBBcnJheTxRdWVyeUNvbmRpdGlvbj4gPSBuZXcgQXJyYXk8UXVlcnlDb25kaXRpb24+KCk7XHJcbiAgICAvKiog6auY57qn562b6YCJICovXHJcbiAgICBleHRlbmRGaWx0ZXJMaXN0OiBBcnJheTxRdWVyeUNvbmRpdGlvbj4gPSBuZXcgQXJyYXk8UXVlcnlDb25kaXRpb24+KCk7XHJcbiAgICBleHRlbmRGaWx0ZXJMaXN0U3RvcmU6IEFycmF5PFF1ZXJ5Q29uZGl0aW9uPiA9IG5ldyBBcnJheTxRdWVyeUNvbmRpdGlvbj4oKTtcclxuICAgIGV4dGVuZEZpbHRlckxpc3RUZW1wb3Jhcnk6IEFycmF5PFF1ZXJ5Q29uZGl0aW9uPiA9IG5ldyBBcnJheTxRdWVyeUNvbmRpdGlvbj4oKTtcclxuICAgIC8qKiDlt7LloavlhpnnrZvpgInmlbDmja4gKi9cclxuICAgIGZpbGxlZEZpbHRlckxpc3Q6IEFycmF5PFF1ZXJ5Q29uZGl0aW9uPiA9IG5ldyBBcnJheTxRdWVyeUNvbmRpdGlvbj4oKTtcclxuICAgIC8qKiDpq5jnuqfnrZvpgInkuK3lt7LloavlhpnnmoQgKi9cclxuICAgIGZpbGxlZEV4dGVuZEZpbHRlckxpc3Q6IEFycmF5PFF1ZXJ5Q29uZGl0aW9uPiA9IG5ldyBBcnJheTxRdWVyeUNvbmRpdGlvbj4oKTtcclxuICAgIC8qKiDmsqHmnInloavlhpnnmoTnrZvpgInpobkgKi9cclxuICAgIC8vIHVuRmlsbGVkRmlsdGVyTGlzdDpBcnJheTxRdWVyeUNvbmRpdGlvbj4gPSBuZXcgQXJyYXk8UXVlcnlDb25kaXRpb24+KCk7XHJcbiAgICAvKiog6auY57qn562b6YCJ5Lit5b+F5aGr6aG5ICovXHJcbiAgICBleHRlbmRSZXF1aXJlZExpc3Q6IEFycmF5PFF1ZXJ5Q29uZGl0aW9uPiA9IG5ldyBBcnJheTxRdWVyeUNvbmRpdGlvbj4oKTtcclxuICAgIC8qKiDpu5jorqTnrZvpgInkuK3lv4XloavpobkgKi9cclxuICAgIHNob3dSZXF1aXJlZExpc3Q6IEFycmF5PFF1ZXJ5Q29uZGl0aW9uPiA9IG5ldyBBcnJheTxRdWVyeUNvbmRpdGlvbj4oKTtcclxuICAgIC8qKiDlvqrnjq/ooajljZUgKi9cclxuICAgIGxpc3RGaWx0ZXJDb25kaXRpb25zOiBBcnJheTxRdWVyeUNvbmRpdGlvbj4gPSBuZXcgQXJyYXk8UXVlcnlDb25kaXRpb24+KCk7XHJcbiAgICAvKiog6buY6K6k5bGV5byA77yL6auY57qn562b6YCJ5Lit5bey5aGr5YaZ55qEICovXHJcbiAgICBsb29wRmlsdGVyTGlzdDogQXJyYXk8UXVlcnlDb25kaXRpb24+ID0gbmV3IEFycmF5PFF1ZXJ5Q29uZGl0aW9uPigpO1xyXG4gICAgLyoqIOeUqOadpeWtmOWCqHNldHZhbHVl5YmN5pWw5o2uICovXHJcbiAgICBzdGFnTGlzdEZpbHRlckNvbmRpdGlvbnM6IEFycmF5PFF1ZXJ5Q29uZGl0aW9uPiA9IG5ldyBBcnJheTxRdWVyeUNvbmRpdGlvbj4oKTtcclxuICAgIC8qKiDmmL7npLrkuK3ooajljZXnmoTlv4XloavpobkgKi9cclxuICAgIHJlcXVpcmVkTGlzdEZpbHRlcjogQXJyYXk8UXVlcnlDb25kaXRpb24+ID0gW107XHJcblxyXG4gICAgbG9jYWxlSWRzID0ge1xyXG4gICAgICAgICdlbic6ICdlbicsXHJcbiAgICAgICAgJ3poLUNIUyc6ICd6aC1DSFMnXHJcbiAgICB9O1xyXG4gICAgY3VycmVudExvY2FsZSA9ICd6aC1DSFMnO1xyXG4gICAgaXNDb250cm9sSW5saW5lID0gdHJ1ZTtcclxuICAgIC8qKlxyXG4gICAgICog57uE5Lu25pyN5Yqh5o6l5Y+jXHJcbiAgICAgKi9cclxuICAgIGZpbHRlckhhbmRsZXI6IEZpbHRlckhhbmRsZXI7XHJcbiAgICBmaWx0ZXJQYW5lbENvbnRhaW5lcjtcclxuXHJcbiAgICBzaG93UmVtaW5kZXJJdGVtOiBRdWVyeUNvbmRpdGlvbjtcclxuICAgIHJlbWluZGVyTGVmdCA9IDA7XHJcblxyXG4gICAgZmxvYXRQYW5lbEhlaWdodCA9IG51bGw7XHJcbiAgICBmbG9hdEZpbHRlckljb25Cb3R0b20gPSAwO1xyXG4gICAgLy8g57uR5a6a5aSn5bCP5Y+Y5YyW5ZON5bqUXHJcbiAgICBwcml2YXRlIHJvOiBSZXNpemVPYnNlcnZlciB8IG51bGwgPSBudWxsO1xyXG4gICAgLy8g6K6w5b2V5pen55qE5a695bqm5pWw5o2uXHJcbiAgICBwcml2YXRlIGNvbnRhaW5lcldpZHRoUmVjb3JkID0gMDtcclxuICAgIC8vIOmYiOWAvFxyXG4gICAgcHJpdmF0ZSBkaXN0YW5jZVRocmVzaG9sZCA9IDIwO1xyXG5cclxuICAgIHByaXZhdGUgaWRTZXJ2aWNlOiBJZFNlcnZpY2U7XHJcbiAgICBwcml2YXRlIG92ZXJMYXlTZXJ2aWNlOiBPdmVyTGF5SGlkZGVuU2VydmljZSA9IG51bGw7XHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwcml2YXRlIGZpbHRlclBhbmVsU2VydmljZTogRmlsdGVyUGFuZWxTZXJ2aWNlLFxyXG4gICAgICAgIHByaXZhdGUgZmlsdGVyU2VydmljZTogRmlsdGVyU2VydmljZSxcclxuICAgICAgICBwcml2YXRlIGNvbnZlcnRvclNlcnZpY2U6IENvbnZlcnRvclNlcnZpY2UsXHJcbiAgICAgICAgcHJpdmF0ZSBoYW5kbGVyOiBRdWVyeVNvbHV0aW9uU2VydmljZSxcclxuICAgICAgICBwcml2YXRlIGNkOiBDaGFuZ2VEZXRlY3RvclJlZixcclxuICAgICAgICBwcml2YXRlIHJlbmRlcjogUmVuZGVyZXIyLFxyXG4gICAgICAgIHB1YmxpYyBuZ3pvbmU6IE5nWm9uZSxcclxuICAgICAgICBwdWJsaWMgbG9jYWxlU2VydmljZTogTG9jYWxlU2VydmljZSxcclxuICAgICAgICBAT3B0aW9uYWwoKSBwcml2YXRlIGluamVjdG9yOiBJbmplY3RvclxyXG4gICAgKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaW5qZWN0b3IpIHtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50TG9jYWxlID0gdGhpcy5pbmplY3Rvci5nZXQoTE9DQUxFX0lEKTtcclxuICAgICAgICAgICAgdGhpcy5maWx0ZXJIYW5kbGVyID0gdGhpcy5pbmplY3Rvci5nZXQ8RmlsdGVySGFuZGxlcj4oRklMVEVSX0hBTkRMRVJfVE9LRU4sIG51bGwsIEluamVjdEZsYWdzLk9wdGlvbmFsKTtcclxuICAgICAgICAgICAgdGhpcy5pZFNlcnZpY2UgPSB0aGlzLmluamVjdG9yLmdldChJZFNlcnZpY2UpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5vdmVyTGF5U2VydmljZSA9IHRoaXMuaW5qZWN0b3IuZ2V0KE92ZXJMYXlIaWRkZW5TZXJ2aWNlLCBudWxsKTtcclxuICAgICAgICBpZiAoIXRoaXMub3ZlckxheVNlcnZpY2UpIHtcclxuICAgICAgICAgICAgdGhpcy5vdmVyTGF5U2VydmljZSA9IG5ldyBPdmVyTGF5SGlkZGVuU2VydmljZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBuZ09uSW5pdCgpIHtcclxuICAgICAgICB0aGlzLmZpbHRlcldyYXBwZXJFbCA9IHRoaXMuZmlsdGVyTGlzdFdyYXBwZXIgJiYgdGhpcy5maWx0ZXJMaXN0V3JhcHBlci5uYXRpdmVFbGVtZW50O1xyXG4gICAgICAgIC8vIOe7keWumuS6i+S7tlxyXG4gICAgICAgIHRoaXMuYmluZFJvRXZlbnQoKTtcclxuICAgICAgICB0aGlzLmZvbGRUZXh0ID0gdGhpcy5sb2NhbGVTZXJ2aWNlLmdldFZhbHVlKCdmaWx0ZXJQYW5lbC5mb2xkJyk7XHJcbiAgICAgICAgdGhpcy5leHBhbmRUZXh0ID0gdGhpcy5sb2NhbGVTZXJ2aWNlLmdldFZhbHVlKCdmaWx0ZXJQYW5lbC5leHBhbmQnKTtcclxuICAgICAgICB0aGlzLmZpbHRlckV4dGVuZFRleHQgPSB0aGlzLmV4cGFuZFRleHQ7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudExvY2FsZSA9PT0gdGhpcy5sb2NhbGVJZHNbJ2VuJ10pIHtcclxuICAgICAgICAgICAgdGhpcy5pc0NvbnRyb2xJbmxpbmUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuaXNDb250cm9sSW5saW5lID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZyb21FdmVudCh3aW5kb3csICdyZXNpemUnKS5waXBlKFxyXG4gICAgICAgICAgICBhdWRpdFRpbWUoNTApXHJcbiAgICAgICAgKS5zdWJzY3JpYmUoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmZsb2F0UGFuZWxIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQgLSB0aGlzLmZsb2F0RmlsdGVySWNvbkJvdHRvbTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG4gICAgbmdPbkRlc3Ryb3koKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucm8pIHtcclxuICAgICAgICAgICAgdGhpcy5yby51bm9ic2VydmUodGhpcy5maWx0ZXJXcmFwcGVyRWwpO1xyXG4gICAgICAgICAgICB0aGlzLnJvID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmZsb2F0UGFuZWwpIHtcclxuICAgICAgICAgICAgdGhpcy5vdmVyTGF5U2VydmljZS5kZXN0b3J5KHRoaXMuZmxvYXRQYW5lbC5uYXRpdmVFbGVtZW50KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOe7keWumuebkeaOp+Wkp+Wwj+eahOS6i+S7tlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGJpbmRSb0V2ZW50KCl7XHJcbiAgICAgICAgaWYoIXRoaXMuZmlsdGVyV3JhcHBlcil7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5uZ3pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyDov5nmoLfkuIDnm7Tpg73nu5Hlrprlj6/og73mnInmgKfog73pl67pophcclxuICAgICAgICAgICAgdGhpcy5ybyA9IG5ldyBSZXNpemVPYnNlcnZlcigoZW50cmllcywgb2JzZXJ2ZXIpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRlbXBXaWR0aCA9IGVudHJpZXNbMF0uY29udGVudFJlY3Qud2lkdGg7XHJcbiAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgTWF0aC5hYnModGVtcFdpZHRoIC0gdGhpcy5jb250YWluZXJXaWR0aFJlY29yZCkgPlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzdGFuY2VUaHJlc2hvbGRcclxuICAgICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5maWx0ZXJMaXN0Lmxlbmd0aCkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZUF1dG9XaWR0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGlzdEVsbGlwc2lzSW5pdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyV2lkdGhSZWNvcmQgPSB0ZW1wV2lkdGg7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnJvLm9ic2VydmUodGhpcy5maWx0ZXJXcmFwcGVyLm5hdGl2ZUVsZW1lbnQpO1xyXG4gICAgICAgICAgICAvLyBmcm9tRXZlbnQod2luZG93LCAncmVzaXplJylcclxuICAgICAgICAgICAgLy8gICAgIC5waXBlKGRlYm91bmNlVGltZSg1MCwgYW5pbWF0aW9uRnJhbWUpKVxyXG4gICAgICAgICAgICAvLyAgICAgLnN1YnNjcmliZSgoKTogdm9pZCA9PiB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgdGhpcy5uZ3pvbmUucnVuKCgpID0+IHtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3Jlc2l6ZScpO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICBpZiAoIXRoaXMuZmlsdGVyTGlzdC5sZW5ndGgpIHJldHVybjtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlQXV0b1dpZHRoKSB7cmV0dXJuO31cclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgdGhpcy5saXN0RWxsaXBzaXNJbml0KCk7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpIHtcclxuICAgICAgICAvLyBpZiAoY2hhbmdlcy5maWx0ZXJMaXN0ICYmICFjaGFuZ2VzLmZpbHRlckxpc3QuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgLy8gICB0aGlzLmluaXRGaWx0ZXJMaXN0KCk7XHJcbiAgICAgICAgLy8gfVxyXG4gICAgfVxyXG5cclxuICAgIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcclxuXHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWIneWni+WMluetm+mAiemhuVxyXG4gICAgICovXHJcbiAgICBpbml0RmlsdGVyTGlzdCgpIHtcclxuICAgICAgICB0aGlzLmxpc3RGaWx0ZXJDb25kaXRpb25zID0gbmV3IEFycmF5PFF1ZXJ5Q29uZGl0aW9uPigpO1xyXG4gICAgICAgIGNvbnN0IGZpbHRlckRhdGFzID0gdGhpcy5maWx0ZXJTZXJ2aWNlLmZpZWxkU2NoZW1hc0NvbnZlcnQodGhpcy5maWx0ZXJMaXN0KTtcclxuICAgICAgICBpZiAoZmlsdGVyRGF0YXMgJiYgZmlsdGVyRGF0YXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGlzdEZpbHRlckNvbmRpdGlvbnMgPSB0aGlzLmNvbnZlcnRvclNlcnZpY2UuZ2V0U2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMoZmlsdGVyRGF0YXMsIHRoaXMubGlzdEZpbHRlckNvbmRpdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnN0YWdMaXN0RmlsdGVyQ29uZGl0aW9ucyA9IHRoaXMubGlzdEZpbHRlckNvbmRpdGlvbnMubWFwKG8gPT4gKHsgLi4ubyB9KSk7XHJcbiAgICAgICAgdGhpcy5maWx0ZXJMaXN0Q2xhc3NpZnkoKTtcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2hvd1JlbWluZGVyICYmIHRoaXMuc2hvd0ZpbHRlckxpc3QgJiYgdGhpcy5zaG93RmlsdGVyTGlzdC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd1JlbWluZGVySXRlbSA9IHRoaXMuc2hvd0ZpbHRlckxpc3RbMF07XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zaG93UmVtaW5kZXJJdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGZpbHRlcmxpc3RJdGVtcyA9IHRoaXMuZmlsdGVyTGlzdFdyYXBwZXIgJiYgdGhpcy5maWx0ZXJMaXN0V3JhcHBlci5uYXRpdmVFbGVtZW50LmNoaWxkcmVuO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmaWx0ZXJsaXN0SXRlbXMgJiYgZmlsdGVybGlzdEl0ZW1zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc2hvd1JlbUl0ZW07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmlsdGVybGlzdEl0ZW1zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zaG93UmVtaW5kZXJJdGVtWydpZCddID09IGZpbHRlcmxpc3RJdGVtc1tpXS5nZXRBdHRyaWJ1dGUoJ2lkJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93UmVtSXRlbSA9IGZpbHRlcmxpc3RJdGVtc1tpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2hvd1JlbUl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtaW5kZXJMZWZ0ID0gc2hvd1JlbUl0ZW0ub2Zmc2V0TGVmdCA+PSAwID8gc2hvd1JlbUl0ZW0ub2Zmc2V0TGVmdCA6IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dSZW1pbmRlckl0ZW0gPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgMCk7XHJcbiAgICAgICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICB9XHJcbiAgICAvKiog562b6YCJ6aG55YiG57G7ICovXHJcbiAgICBmaWx0ZXJMaXN0Q2xhc3NpZnkoKSB7XHJcbiAgICAgICAgdGhpcy5leHRlbmRGaWx0ZXJMaXN0ID0gW107XHJcbiAgICAgICAgdGhpcy5leHRlbmRGaWx0ZXJMaXN0U3RvcmUgPSBbXTtcclxuICAgICAgICB0aGlzLnNob3dGaWx0ZXJMaXN0ID0gW107XHJcbiAgICAgICAgdGhpcy5maWxsZWRGaWx0ZXJMaXN0ID0gW107XHJcbiAgICAgICAgdGhpcy5maWxsZWRFeHRlbmRGaWx0ZXJMaXN0ID0gW107XHJcbiAgICAgICAgdGhpcy5sb29wRmlsdGVyTGlzdCA9IFtdO1xyXG4gICAgICAgIHRoaXMuZXh0ZW5kUmVxdWlyZWRMaXN0ID0gW107XHJcbiAgICAgICAgdGhpcy5zaG93UmVxdWlyZWRMaXN0ID0gW107XHJcbiAgICAgICAgLy8g5b+F5aGrXHJcbiAgICAgICAgbGV0IHJlcXVpcmVkTGlzdCA9IHRoaXMubGlzdEZpbHRlckNvbmRpdGlvbnMuZmlsdGVyKChsaXN0aXRlbSkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gbGlzdGl0ZW0uY29udHJvbC5yZXF1aXJlZDtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAocmVxdWlyZWRMaXN0ICYmIHJlcXVpcmVkTGlzdC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5yZXF1aXJlZExpc3RGaWx0ZXIgPSByZXF1aXJlZExpc3Q7XHJcbiAgICAgICAgICAgIHRoaXMuY2FuU3VibWl0ID0gdGhpcy5jYW5TdWJtaXRGaWx0ZXIodGhpcy5yZXF1aXJlZExpc3RGaWx0ZXIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVxdWlyZWRMaXN0RmlsdGVyID0gW107XHJcbiAgICAgICAgICAgIHRoaXMuY2FuU3VibWl0ID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g5Yeg56eN57G75Z6L5YiG57G7XHJcbiAgICAgICAgdGhpcy5saXN0RmlsdGVyQ29uZGl0aW9ucy5mb3JFYWNoKGZpZWxkID0+IHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkLmNvbnRyb2wuaXNFeHRlbmQgJiYgZmllbGRbJ2ZpbGxlZCddKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpbGxlZEV4dGVuZEZpbHRlckxpc3QucHVzaChmaWVsZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGZpZWxkWydmaWxsZWQnXSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5maWxsZWRGaWx0ZXJMaXN0LnB1c2goZmllbGQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGVsc2UgaWYoIWZpZWxkLmNvbnRyb2wuaXNFeHRlbmQpe1xyXG4gICAgICAgICAgICAvLyAgIHRoaXMudW5GaWxsZWRGaWx0ZXJMaXN0LnB1c2goZmllbGQpO1xyXG4gICAgICAgICAgICAvLyB9XHJcblxyXG4gICAgICAgICAgICBpZiAoZmllbGQuY29udHJvbC5pc0V4dGVuZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5leHRlbmRGaWx0ZXJMaXN0U3RvcmUucHVzaChmaWVsZCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dGaWx0ZXJMaXN0LnB1c2goZmllbGQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmZpbGxlZEZpbHRlckxpc3QubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmlsbGVkRmlsdGVyID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmZpbGxlZEZpbHRlciA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgbGlzdCA9IHRoaXMubGlzdEZpbHRlckNvbmRpdGlvbnMuZmlsdGVyKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gIWl0ZW0uY29udHJvbC5pc0V4dGVuZCB8fCBpdGVtWydmaWxsZWQnXVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIHRoaXMubG9vcEZpbHRlckxpc3QgPSB0aGlzLnNob3dGaWx0ZXJMaXN0LmNvbmNhdCh0aGlzLmZpbGxlZEV4dGVuZEZpbHRlckxpc3QpO1xyXG4gICAgICAgIHRoaXMubG9vcEZpbHRlckxpc3QgPSBsaXN0ID8gbGlzdCA6IFtdO1xyXG4gICAgICAgIHRoaXMubG9vcEZpbHRlckxpc3QuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgdGhpcy5nZXRWYWx1ZVRleHQoaXRlbSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5leHRlbmRGaWx0ZXJMaXN0ID0gdGhpcy5leHRlbmRGaWx0ZXJMaXN0U3RvcmUubWFwKG8gPT4gKHsgLi4ubyB9KSk7XHJcbiAgICAgICAgY29uc3QgZXh0ZW5kUmVxdWlyZWRMaXN0ID0gdGhpcy5leHRlbmRGaWx0ZXJMaXN0LmZpbHRlcigobGlzdGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGxpc3RpdGVtLmNvbnRyb2wucmVxdWlyZWQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKGV4dGVuZFJlcXVpcmVkTGlzdCAmJiBleHRlbmRSZXF1aXJlZExpc3QubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXh0ZW5kUmVxdWlyZWRMaXN0ID0gZXh0ZW5kUmVxdWlyZWRMaXN0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgc2hvd3JlcXVpcmVkTGlzdCA9IHRoaXMuc2hvd0ZpbHRlckxpc3QuZmlsdGVyKChsaXN0aXRlbSkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gbGlzdGl0ZW0uY29udHJvbC5yZXF1aXJlZDtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAoc2hvd3JlcXVpcmVkTGlzdCAmJiBzaG93cmVxdWlyZWRMaXN0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLnNob3dSZXF1aXJlZExpc3QgPSBzaG93cmVxdWlyZWRMaXN0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zaG93Q2FuU3VibWl0ID0gdGhpcy5jYW5TdWJtaXRGaWx0ZXIodGhpcy5zaG93UmVxdWlyZWRMaXN0KTtcclxuICAgICAgICB0aGlzLmFkdmFuY2VkQ2FuU3VibWl0ID0gdGhpcy5jYW5TdWJtaXRGaWx0ZXIodGhpcy5leHRlbmRSZXF1aXJlZExpc3QpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCflt7LloavlhpknLHRoaXMuZmlsbGVkRXh0ZW5kRmlsdGVyTGlzdCk7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ+aYvuekuuWHuuadpeeahCcsdGhpcy5sb29wRmlsdGVyTGlzdCk7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ+makOiXj+mDqOWIhicsdGhpcy5leHRlbmRGaWx0ZXJMaXN0KTtcclxuICAgICAgICB0aGlzLmZpbHRlckV4dGVuZFNob3cgPSB0cnVlO1xyXG4gICAgICAgIC8vIOWmguaenOaYr+aUr+aMgeiHquWKqOWuveW6pu+8jOWwseaYr+S4jeWPjuaKmCzliKTmlq3mtonlj4rotYvlgLzml7bmnLpcclxuICAgICAgICBpZiAoIXRoaXMuZW5hYmxlQXV0b1dpZHRoKSB7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5saXN0RWxsaXBzaXNJbml0KCk7XHJcbiAgICAgICAgICAgIH0sIDApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5bey5aGr5YaZ562b6YCJ6aG554K55Ye7XHJcbiAgICAgKiBAcGFyYW0gZXZlbnQgXHJcbiAgICAgKiBAcGFyYW0gZGF0YSBcclxuICAgICAqL1xyXG4gICAgZmlsdGVyQ2xpY2soZXZlbnQsIGRhdGEsIGluZGV4KSB7XHJcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgaWYgKHRoaXMuZGlzYWJsZWQpIHJldHVybjtcclxuICAgICAgICBpZiAoZGF0YSkge1xyXG4gICAgICAgICAgICB0aGlzLnNob3dSZW1pbmRlckl0ZW0gPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBpbnN0YW5jZUlEID0gdGhpcy5sb2NhbFN0b3JhZ2VLZXkgKyAnXycrIGRhdGEuaWQ7XHJcbiAgICAgICAgaWYgKGRhdGEgJiYgdGhpcy5jdXJyZW50RmlsdGVySWQgIT0gZGF0YS5pZCkge1xyXG4gICAgICAgICAgICBjb25zdCBwYW5lbEl0ZW0gPSBkZWVwQ29weShkYXRhKTtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50RmlsdGVySWQgPSBkYXRhLmlkO1xyXG4gICAgICAgICAgICBjb25zdCB7IGxlZnQsIHRvcCwgaGVpZ2h0LCByaWdodCB9ID0gZXZlbnQuY3VycmVudFRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAgICAgdGhpcy5maWx0ZXJQYW5lbENvbnRhaW5lciA9IHRoaXMuZmlsdGVyUGFuZWxTZXJ2aWNlLnNob3dQYW5lbCh7XHJcbiAgICAgICAgICAgICAgICBsZWZ0OiBsZWZ0LFxyXG4gICAgICAgICAgICAgICAgdG9wOiB0b3AgKyBoZWlnaHQgKyAyLFxyXG4gICAgICAgICAgICAgICAgcmlnaHQ6IHJpZ2h0LFxyXG4gICAgICAgICAgICAgICAgaXRlbTogcGFuZWxJdGVtLFxyXG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlS2V5OiBpbnN0YW5jZUlEXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLmZpbHRlclBhbmVsQ29udGFpbmVyLmhpZGVQYW5lbC5zdWJzY3JpYmUoZSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlclBhbmVsU2VydmljZS5oaWRlUGFuZWwoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyUGFuZWxDb250YWluZXIgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50RmlsdGVySWQgPSBudWxsO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5maWx0ZXJQYW5lbENvbnRhaW5lci5jbGVhckZpbHRlci5zdWJzY3JpYmUoZSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyRmlsdGVyLmVtaXQoZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvL+aPkOS6pOW8ueeql+WGhVxyXG4gICAgICAgICAgICBjb25zdCBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyUGFuZWxDb250YWluZXIuc3VibWl0LnN1YnNjcmliZShlID0+IHtcclxuICAgICAgICAgICAgICAgIGUuZmlsbGVkID0gKGUudmFsdWVUZXh0ICYmIGUudmFsdWVUZXh0Lmxlbmd0aCA+IDApID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMubG9vcEZpbHRlckxpc3RbaW5kZXhdID0gZTtcclxuICAgICAgICAgICAgICAgIGxldCBwYW5lbExpc3RJbmRleCA9IF90aGlzLmxpc3RGaWx0ZXJDb25kaXRpb25zLmZpbmRJbmRleChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbVsnaWQnXSA9PSBlWydpZCddO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpZiAocGFuZWxMaXN0SW5kZXggPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmxpc3RGaWx0ZXJDb25kaXRpb25zW3BhbmVsTGlzdEluZGV4XSA9IGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaENoYW5nZS5lbWl0KHRoaXMubGlzdEZpbHRlckNvbmRpdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pblNldEN1cnJlbnRGaWx0ZXJDb25kaXRpb25zKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlckxpc3RDbGFzc2lmeSgpO1xyXG4gICAgICAgICAgICAgICAgLy8gdmFsdWVUZXh05piv5pyJ6ZyA6KaB6K6h566X55qE77yM5omA5Lul5bu25ZCO5Yik5pat5piv5ZCm5pi+56S6XHJcbiAgICAgICAgICAgICAgICBsZXQgZmluZEl0ZW0gPSBfdGhpcy5sb29wRmlsdGVyTGlzdC5maW5kKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtWydpZCddID09IGVbJ2lkJ107XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGlmIChmaW5kSXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZpbmRJdGVtWydmaWxsZWQnXSA9IGZpbmRJdGVtLnZhbHVlVGV4dCAmJiBmaW5kSXRlbS52YWx1ZVRleHQubGVuZ3RoID4gMCA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuY2QubWFya0ZvckNoZWNrKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN1Ym1pdCgncGFuZWxGb3JtRGF0YScsIHRoaXMubGlzdEZpbHRlckNvbmRpdGlvbnMsIGUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJQYW5lbFNlcnZpY2UuaGlkZVBhbmVsKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlclBhbmVsQ29udGFpbmVyID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEZpbHRlcklkID0gbnVsbDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmZpbHRlclBhbmVsU2VydmljZS5oaWRlUGFuZWwoKTtcclxuICAgICAgICAgICAgdGhpcy5maWx0ZXJQYW5lbENvbnRhaW5lciA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEZpbHRlcklkID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOa4heepuuetm+mAiemhuVxyXG4gICAgICovXHJcbiAgICBmaWx0ZXJDbGVhcihkYXRhLCBpbmRleCwgZXZlbnQpIHtcclxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB0aGlzLmZpbHRlclBhbmVsU2VydmljZS5oaWRlUGFuZWwoKTtcclxuICAgICAgICB0aGlzLmN1cnJlbnRGaWx0ZXJJZCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5yZXNldExpc3RDb25kaXRpb24oZGF0YSk7XHJcbiAgICAgICAgdGhpcy5maWx0ZXJMaXN0Q2xhc3NpZnkoKTtcclxuICAgICAgICB0aGlzLmNkLm1hcmtGb3JDaGVjaygpO1xyXG4gICAgICAgIHRoaXMuc2VhcmNoQ2hhbmdlLmVtaXQodGhpcy5saXN0RmlsdGVyQ29uZGl0aW9ucyk7XHJcbiAgICAgICAgdGhpcy5jbGVhckZpbHRlci5lbWl0KGRhdGEpO1xyXG4gICAgICAgIHRoaXMuaW5TZXRDdXJyZW50RmlsdGVyQ29uZGl0aW9ucygpO1xyXG4gICAgICAgIHRoaXMuYWR2YW5jZWRDYW5TdWJtaXQgPSB0aGlzLmNhblN1Ym1pdEZpbHRlcih0aGlzLmV4dGVuZFJlcXVpcmVkTGlzdCk7XHJcbiAgICAgICAgdGhpcy5zdWJtaXQoJ3BhbmVsRm9ybURhdGEnLCB0aGlzLmxpc3RGaWx0ZXJDb25kaXRpb25zKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5bGV5byA6auY57qn562b6YCJXHJcbiAgICAgKi9cclxuICAgIGFkdmFuY2VkRmlsdGVyKCkge1xyXG4gICAgICAgIHRoaXMuc2hvd1JlbWluZGVySXRlbSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5leHRlbmRGaWx0ZXJMaXN0VGVtcG9yYXJ5ID0gZGVlcENvcHkodGhpcy5leHRlbmRGaWx0ZXJMaXN0KTtcclxuICAgICAgICB0aGlzLmZhcnJpc3NpZGViYXIuaXNPcGVuID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIGxpc3RDYW5jZWwoKSB7XHJcbiAgICAgICAgdGhpcy5leHRlbmRGaWx0ZXJMaXN0ID0gZGVlcENvcHkodGhpcy5leHRlbmRGaWx0ZXJMaXN0VGVtcG9yYXJ5KTtcclxuICAgICAgICB0aGlzLmZhcnJpc3NpZGViYXIuaXNPcGVuID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5mbG9hdFBhbmVsT3BlbiA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDmiZPlvIDpnaLmnb/pq5jnuqfnrZvpgIlcclxuICAgICAqL1xyXG4gICAgZmxvYXRGaWx0ZXJPcGVuKCRldm5ldDogTW91c2VFdmVudCkge1xyXG4gICAgICAgIHRoaXMuZmxvYXRQYW5lbE9wZW4gPSAhdGhpcy5mbG9hdFBhbmVsT3BlbjtcclxuICAgICAgICBpZiAodGhpcy5mbG9hdFBhbmVsT3Blbikge1xyXG4gICAgICAgICAgICB0aGlzLmV4dGVuZEZpbHRlckxpc3RUZW1wb3JhcnkgPSBkZWVwQ29weSh0aGlzLmV4dGVuZEZpbHRlckxpc3QpO1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuZmxvYXRGaWx0ZXJJY29uQm90dG9tKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IGJvdHRvbSB9ID0gKDxhbnk+JGV2bmV0LnRhcmdldCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZsb2F0RmlsdGVySWNvbkJvdHRvbSA9IGJvdHRvbSArIDEwMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmZsb2F0UGFuZWxIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQgLSB0aGlzLmZsb2F0RmlsdGVySWNvbkJvdHRvbTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMub3ZlckxheVNlcnZpY2UucmVnaXN0ZXJNb3VzZUV2ZW50KHRoaXMuZmxvYXRQYW5lbC5uYXRpdmVFbGVtZW50LCAoZTogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZmxvYXRQYW5lbC5uYXRpdmVFbGVtZW50LmNvbnRhaW5zKGUudGFyZ2V0KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0Lm5vZGVOYW1lID09PSAnU1BBTicgJiYgZS50YXJnZXQuY2xhc3NOYW1lLmluZGV4T2YoJ2YtaWNvbi1maWx0cmF0ZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNscyA9IFsnLmYtZGF0ZXBpY2tlci1jb250YWluZXInLCAnLmZhcnJpcy10aW1lci1waWNrZXInLCAnLmZhcnJpcy1tb2RhbCcsICcuZi1jb21iby1sb29rdXAnLCAnLmRhdGUtb3ZlcmxheS1jb250YWluZXInXVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2xzLmZpbmQoayA9PiBlLnRhcmdldC5jbG9zZXN0KGspKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuZmxvYXRQYW5lbE9wZW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMub3ZlckxheVNlcnZpY2UuZGVzdG9yeSh0aGlzLmZsb2F0UGFuZWwubmF0aXZlRWxlbWVudCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5vdmVyTGF5U2VydmljZS5kZXN0b3J5KHRoaXMuZmxvYXRQYW5lbC5uYXRpdmVFbGVtZW50KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWIl+ihqOWxleekuuWIneWni+WMllxyXG4gICAgICovXHJcbiAgICBsaXN0RWxsaXBzaXNJbml0KCkge1xyXG4gICAgICAgIGlmICh0aGlzLmVuYWJsZUF1dG9XaWR0aCkgcmV0dXJuO1xyXG4gICAgICAgIC8vIGlmKHRoaXMuZmlsdGVyRXh0ZW5kKSByZXR1cm47XHJcbiAgICAgICAgY29uc3QgZmlsdGVyTWFpbldpZHRoID0gdGhpcy5maWx0ZXJNYWluLm5hdGl2ZUVsZW1lbnQub2Zmc2V0V2lkdGg7XHJcbiAgICAgICAgdGhpcy5maWx0ZXJUb29sV2lkdGggPSAwO1xyXG4gICAgICAgIC8vIGZpbHRlclRvb2wgPSB0aGlzLmZpbHRlclRvb2wubmF0aXZlRWxlbWVudC5vZmZzZXRXaWR0aDtcclxuICAgICAgICBpZiAodGhpcy5maWx0ZXJUb29sKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyVG9vbFdpZHRoID0gdGhpcy5maWx0ZXJUb29sLm5hdGl2ZUVsZW1lbnQub2Zmc2V0V2lkdGg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOetm+mAieadoeS7tuWMuuWfn+acgOWkp+WuveW6plxyXG4gICAgICAgIGxldCBmaWx0ZXJMaXN0VztcclxuICAgICAgICBpZiAodGhpcy5maWx0ZXJFeHRlbmQpIHtcclxuICAgICAgICAgICAgZmlsdGVyTGlzdFcgPSBmaWx0ZXJNYWluV2lkdGggLSAyNjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIGZpbHRlckxpc3RXID0gZmlsdGVyTWFpbldpZHRoLSA0OCAtIHRoaXMuZmlsdGVyVG9vbFdpZHRoIC0gMjY7XHJcbiAgICAgICAgICAgIGZpbHRlckxpc3RXID0gZmlsdGVyTWFpbldpZHRoIC0gNDggLSB0aGlzLmZpbHRlclRvb2xXaWR0aCAtIDI2O1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBjb25zdCBmaWx0ZXJXcmFwcGVyID0gdGhpcy5maWx0ZXJMaXN0V3JhcHBlci5uYXRpdmVFbGVtZW50O1xyXG4gICAgICAgIC8vIGNvbnN0IGZpbHRlcldyYXBwZXJXaWR0aCA9IGZpbHRlcldyYXBwZXIub2Zmc2V0V2lkdGg7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coZmlsdGVyV3JhcHBlcldpZHRoKTtcclxuICAgICAgICBjb25zdCBmaWx0ZXJJdGVtcyA9IHRoaXMuZmlsdGVyV3JhcHBlckVsID8gdGhpcy5maWx0ZXJXcmFwcGVyRWwuY2hpbGRyZW4gOiBbXTtcclxuICAgICAgICBsZXQgZmlsdGVySXRlbVdpZHRoID0gMDtcclxuICAgICAgICBpZiAoZmlsdGVySXRlbXMgJiYgZmlsdGVySXRlbXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBmaWx0ZXJJdGVtcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIuc2V0U3R5bGUoZmlsdGVySXRlbXNbaV0sICdkaXNwbGF5JywgJ2ZsZXgnKTtcclxuICAgICAgICAgICAgICAgIGxldCB3aWR0aCA9IGZpbHRlckl0ZW1zW2ldLm9mZnNldFdpZHRoO1xyXG4gICAgICAgICAgICAgICAgZmlsdGVySXRlbVdpZHRoICs9IHdpZHRoICsgODtcclxuICAgICAgICAgICAgICAgIGlmIChmaWx0ZXJJdGVtV2lkdGggPj0gZmlsdGVyTGlzdFcgJiYgIXRoaXMuZmlsdGVyRXh0ZW5kKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIuc2V0U3R5bGUoZmlsdGVySXRlbXNbaV0sICdkaXNwbGF5JywgJ25vbmUnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyLnNldFN0eWxlKGZpbHRlckl0ZW1zW2ldLCAnZGlzcGxheScsICdmbGV4Jyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhmaWx0ZXJJdGVtV2lkdGgsZmlsdGVyTGlzdFcsaSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gaWYoZmlsdGVySXRlbVdpZHRoID4gdGhpcy5maWx0ZXJXcmFwcGVyRWwub2Zmc2V0V2lkdGgpe1xyXG4gICAgICAgIGlmIChmaWx0ZXJJdGVtV2lkdGggPj0gZmlsdGVyTGlzdFcpIHtcclxuICAgICAgICAgICAgdGhpcy5maWx0ZXJFbGxpcHNpcyA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyRXh0ZW5kU2hvdyA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmZpbHRlckVsbGlwc2lzID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyRXh0ZW5kU2hvdyA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgXHJcblxyXG4gICAgICAgIGlmIChmaWx0ZXJJdGVtcy5sZW5ndGgpIHRoaXMuZmlsdGVyUmVzaXplLmVtaXQoKTtcclxuICAgICAgICBpZiAoIXRoaXMuY2RbJ2Rlc3Ryb3llZCddKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2QuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog562b6YCJ6aG55bGV5byA5pS26LW35YiH5o2iXHJcbiAgICAgKi9cclxuICAgIGZpbHRlckV4cGFuZCgpIHtcclxuICAgICAgICB0aGlzLnNob3dSZW1pbmRlckl0ZW0gPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZmlsdGVyRXh0ZW5kID0gIXRoaXMuZmlsdGVyRXh0ZW5kO1xyXG4gICAgICAgIGlmICh0aGlzLmZpbHRlckV4dGVuZCkge1xyXG4gICAgICAgICAgICB0aGlzLmZpbHRlckVsbGlwc2lzID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyRXh0ZW5kVGV4dCA9IHRoaXMuZm9sZFRleHQ7XHJcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyRXh0ZW5kSWNvbiA9ICdmLWljb24tYXJyb3ctY2hldnJvbi11cCc7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpbHRlckl0ZW1zID0gdGhpcy5maWx0ZXJXcmFwcGVyRWwuY2hpbGRyZW47XHJcbiAgICAgICAgICAgIGlmIChmaWx0ZXJJdGVtcyAmJiBmaWx0ZXJJdGVtcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBmaWx0ZXJJdGVtcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyLnNldFN0eWxlKGZpbHRlckl0ZW1zW2ldLCAnZGlzcGxheScsICdmbGV4Jyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyLnNldFN0eWxlKHRoaXMuZmlsdGVyV3JhcHBlckVsLCAnZmxleC13cmFwJywgJ3dyYXAnKTtcclxuICAgICAgICAgICAgdGhpcy5leHBhbmRGaWx0ZXIuZW1pdCgpO1xyXG4gICAgICAgICAgICB0aGlzLmNkLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmZpbHRlckV4dGVuZFRleHQgPSB0aGlzLmV4cGFuZFRleHQ7XHJcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyRXh0ZW5kSWNvbiA9ICdmLWljb24tYXJyb3ctY2hldnJvbi1kb3duJztcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxpc3RFbGxpcHNpc0luaXQoKTtcclxuICAgICAgICAgICAgfSwgMCk7XHJcbiAgICAgICAgICAgIHRoaXMucGFja3VwRmlsdGVyLmVtaXQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOmrmOe6p+etm+mAieihqOWNlemhueaQnOe0ouWPmOWMllxyXG4gICAgICogQHBhcmFtICRldmVudCBcclxuICAgICAqIEBwYXJhbSBpdGVtIFxyXG4gICAgICovXHJcbiAgICBvblNlYXJjaCgkZXZlbnQsIGl0ZW0pIHtcclxuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCkgeyByZXR1cm47IH1cclxuICAgICAgICB0aGlzLmFkdmFuY2VkQ2FuU3VibWl0ID0gdGhpcy5jYW5TdWJtaXRGaWx0ZXIodGhpcy5leHRlbmRSZXF1aXJlZExpc3QpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuYWR2YW5jZWRDYW5TdWJtaXQsdGhpcy5jYW5TdWJtaXQpO1xyXG4gICAgICAgIHRoaXMuc2VhcmNoQ2hhbmdlLmVtaXQoeyBpdGVtLCBjb25kaXRpb25zOiB0aGlzLmxpc3RGaWx0ZXJDb25kaXRpb25zLCBpbnN0YW5jZTogdGhpcyB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKiog5Yik5pat5piv5ZCm5omA5pyJ5b+F5aGr6aG56YO95aGr5YaZ5a6M5q+VICovXHJcbiAgICBjYW5TdWJtaXRGaWx0ZXIocmVxdWlyZWxpc3QpIHtcclxuICAgICAgICBsZXQgZm9ybUNhblN1Ym1pdCA9IGZhbHNlO1xyXG4gICAgICAgIGlmICghcmVxdWlyZWxpc3QgfHwgIXJlcXVpcmVsaXN0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICBmb3JtQ2FuU3VibWl0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIGZvcm1DYW5TdWJtaXQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXF1aXJlbGlzdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbSA9IHJlcXVpcmVsaXN0W2ldO1xyXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0uY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09PSBDb250cm9sVHlwZS5UZXh0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHYgPSAoaXRlbS52YWx1ZSBhcyBUZXh0VmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyh0dikubGVuZ3RoIDwgMCB8fCAhdHYudmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUNhblN1Ym1pdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtQ2FuU3VibWl0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpdGVtLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PT0gQ29udHJvbFR5cGUuSGVscCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNodiA9IChpdGVtLnZhbHVlIGFzIEhlbHBWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKHNodikubGVuZ3RoID09PSAwIHx8ICFzaHYudmFsdWUgfHwgIXNodi52YWx1ZUZpZWxkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1DYW5TdWJtaXQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUNhblN1Ym1pdCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaXRlbS5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT09IENvbnRyb2xUeXBlLkRyb3BEb3duKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGR2ID0gKGl0ZW0udmFsdWUgYXMgRHJvcERvd25MaXN0VmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhkZHYpLmxlbmd0aCA9PT0gMCB8fCAhZGR2LnZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1DYW5TdWJtaXQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUNhblN1Ym1pdCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaXRlbS5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT09IENvbnRyb2xUeXBlLkRhdGVSYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRydiA9IChpdGVtLnZhbHVlIGFzIERhdGVSYW5nZVZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoZHJ2KS5sZW5ndGggPT09IDAgfHwgKCFkcnYuc3RhcnRUaW1lICYmICFkcnYuZW5kVGltZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUNhblN1Ym1pdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtQ2FuU3VibWl0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpdGVtLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PT0gQ29udHJvbFR5cGUuRGF0ZVJhbmdlVGltZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRydiA9IChpdGVtLnZhbHVlIGFzIERhdGVSYW5nZVRpbWVWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKGRydikubGVuZ3RoID09PSAwIHx8ICghZHJ2LnN0YXJ0VGltZSAmJiAhZHJ2LmVuZFRpbWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1DYW5TdWJtaXQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUNhblN1Ym1pdCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaXRlbS5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT09IENvbnRyb2xUeXBlLk1vbnRoUmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBtcnYgPSAoaXRlbS52YWx1ZSBhcyBNb250aFJhbmdlVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhtcnYpLmxlbmd0aCA9PT0gMCB8fCAoIW1ydi5zdGFydFRpbWUgJiYgIW1ydi5lbmRUaW1lKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtQ2FuU3VibWl0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1DYW5TdWJtaXQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGl0ZW0uY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09PSBDb250cm9sVHlwZS5ZZWFyUmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB5cnYgPSAoaXRlbS52YWx1ZSBhcyBZZWFyUmFuZ2VWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKHlydikubGVuZ3RoID09PSAwIHx8ICgheXJ2LnN0YXJ0VGltZSAmJiAheXJ2LmVuZFRpbWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1DYW5TdWJtaXQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUNhblN1Ym1pdCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpdGVtLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PT0gQ29udHJvbFR5cGUuTnVtYmVyUmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBucnYgPSAoaXRlbS52YWx1ZSBhcyBOdW1iZXJSYW5nZVZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMobnJ2KS5sZW5ndGggPT09IDAgfHwgKG5ydi5zdGFydFZhbHVlID09PSBudWxsICYmIG5ydi5lbmRWYWx1ZSA9PT0gbnVsbCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUNhblN1Ym1pdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUNhblN1Ym1pdCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpdGVtLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PT0gQ29udHJvbFR5cGUuU2VhcmNoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3YgPSAoaXRlbS52YWx1ZSBhcyBTZWFyY2hWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKHN2KS5sZW5ndGggPCAwIHx8ICFzdi52YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtQ2FuU3VibWl0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1DYW5TdWJtaXQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGl0ZW0uY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09PSBDb250cm9sVHlwZS5EYXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZHYgPSAoaXRlbS52YWx1ZSBhcyBEYXRlVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhkdikubGVuZ3RoIDwgMCB8fCAhZHYudmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUNhblN1Ym1pdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtQ2FuU3VibWl0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpdGVtLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PT0gQ29udHJvbFR5cGUuTW9udGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBtdiA9IChpdGVtLnZhbHVlIGFzIE1vbnRoVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhtdikubGVuZ3RoIDwgMCB8fCAhbXYudmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUNhblN1Ym1pdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtQ2FuU3VibWl0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpdGVtLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PT0gQ29udHJvbFR5cGUuWWVhcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHl2ID0gKGl0ZW0udmFsdWUgYXMgWWVhclZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoeXYpLmxlbmd0aCA8IDAgfHwgIXl2LnZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1DYW5TdWJtaXQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUNhblN1Ym1pdCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaXRlbS5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT09IENvbnRyb2xUeXBlLkNoZWNrYm94R3JvdXApIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjYmd2ID0gKGl0ZW0udmFsdWUgYXMgQ2hlY2tib3hHcm91cFZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoY2JndikubGVuZ3RoID09PSAwIHx8IE9iamVjdC5rZXlzKGNiZ3YudmFsdWUpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtQ2FuU3VibWl0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1DYW5TdWJtaXQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGl0ZW0uY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09PSBDb250cm9sVHlwZS5SYWRpbykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJhZGlvdiA9IChpdGVtLnZhbHVlIGFzIFJhZGlvR3JvdXBWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKHJhZGlvdikubGVuZ3RoIDwgMCB8fCByYWRpb3YudmFsdWUgPT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1DYW5TdWJtaXQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUNhblN1Ym1pdCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaXRlbS5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT09IENvbnRyb2xUeXBlLklucHV0R3JvdXApIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdiA9IChpdGVtLnZhbHVlIGFzIElucHV0R3JvdXBWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKHN2KS5sZW5ndGggPCAwIHx8ICFzdi50ZXh0VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUNhblN1Ym1pdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtQ2FuU3VibWl0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpdGVtLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PT0gQ29udHJvbFR5cGUuTnVtYmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbnJ2ID0gKGl0ZW0udmFsdWUgYXMgTnVtYmVyVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhucnYpLmxlbmd0aCA9PT0gMCB8fCAobnJ2LnZhbHVlID09IG51bGwpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1DYW5TdWJtaXQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUNhblN1Ym1pdCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaXRlbS5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT09IENvbnRyb2xUeXBlLkZsZXhpYmxlTnVtYmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmxleHYgPSAoaXRlbS52YWx1ZSBhcyBGbGV4aWJsZU51bWJlclZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZmxleHYuc2luZ2xlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhmbGV4dikubGVuZ3RoIDwgMCB8fCBmbGV4di52YWx1ZSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtQ2FuU3VibWl0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtQ2FuU3VibWl0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKGZsZXh2KS5sZW5ndGggPT09IDAgfHwgKGZsZXh2LnN0YXJ0VmFsdWUgPT0gbnVsbCAmJiBmbGV4di5lbmRWYWx1ZSA9PSBudWxsKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUNhblN1Ym1pdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUNhblN1Ym1pdCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpdGVtLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PT0gQ29udHJvbFR5cGUuRmxleGlibGVEYXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmxleGRhdGV2ID0gKGl0ZW0udmFsdWUgYXMgRmxleGlibGVEYXRlVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmbGV4ZGF0ZXYuc2luZ2xlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhmbGV4ZGF0ZXYpLmxlbmd0aCA8IDAgfHwgIWZsZXhkYXRldi52YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUNhblN1Ym1pdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUNhblN1Ym1pdCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhmbGV4ZGF0ZXYpLmxlbmd0aCA9PT0gMCB8fCAoIWZsZXhkYXRldi5zdGFydFZhbHVlICYmICFmbGV4ZGF0ZXYuZW5kVmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtQ2FuU3VibWl0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtQ2FuU3VibWl0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZvcm1DYW5TdWJtaXQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICAvKiog6auY57qn562b6YCJ54K55Ye756Gu5a6a5o+Q5LqkICovXHJcbiAgICBsaXN0U2VhcmNoKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmRpc2FibGVkKSB7IHJldHVybjsgfTtcclxuICAgICAgICB0aGlzLmV4dGVuZEZpbHRlckxpc3QuZm9yRWFjaChmaWVsZCA9PiB7XHJcbiAgICAgICAgICAgIGlmICgoZmllbGQuY29udHJvbC5nZXRDb250cm9sVHlwZSgpICE9IENvbnRyb2xUeXBlLkRhdGUpXHJcbiAgICAgICAgICAgICAgICAmJiAoZmllbGQuY29udHJvbC5nZXRDb250cm9sVHlwZSgpICE9IENvbnRyb2xUeXBlLkRhdGVSYW5nZSlcclxuICAgICAgICAgICAgICAgICYmIChmaWVsZC5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgIT0gQ29udHJvbFR5cGUuRGF0ZVJhbmdlVGltZSlcclxuICAgICAgICAgICAgICAgICYmIChmaWVsZC5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgIT0gQ29udHJvbFR5cGUuRmxleGlibGVEYXRlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghZmllbGQudmFsdWVUZXh0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkLnZhbHVlVGV4dCA9IGZpZWxkLnZhbHVlLmdldFZhbHVlVGV4dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBpZihmaWVsZC5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT0gQ29udHJvbFR5cGUuUmFkaW8pe1xyXG4gICAgICAgICAgICAvLyAgIGNvbnNvbGUubG9nKGZpZWxkKTtcclxuICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICBmaWVsZC5maWxsZWQgPSAoZmllbGQudmFsdWVUZXh0ICYmIGZpZWxkLnZhbHVlVGV4dC5sZW5ndGggPiAwKSA/IHRydWUgOiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGlmIChmaWVsZC5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT0gQ29udHJvbFR5cGUuVGV4dCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGZhcnJpc1NlYXJjaFJlY29yZCA9IGZpZWxkLnZhbHVlVGV4dDtcclxuICAgICAgICAgICAgICAgIGxldCBmYXJyaXNTZWFyY2hSZWNvcmRBcnJheSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgbGV0IHN0b3JhZ2VsYWJlbENvZGUgPSBmaWVsZC5sYWJlbENvZGU7XHJcbiAgICAgICAgICAgICAgICBsZXQgZmlsdGVyUGFuZWxBcnJheSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0odGhpcy5sb2NhbFN0b3JhZ2VLZXkpKTtcclxuICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGZpbHRlclBhbmVsQXJyYXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyUGFuZWxBcnJheSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoIWZpbHRlclBhbmVsQXJyYXkgfHwgIWZpbHRlclBhbmVsQXJyYXlbc3RvcmFnZWxhYmVsQ29kZV0gfHwgIWZpbHRlclBhbmVsQXJyYXlbc3RvcmFnZWxhYmVsQ29kZV0ubGVuZ3RoICYmIGZhcnJpc1NlYXJjaFJlY29yZCAmJiBmYXJyaXNTZWFyY2hSZWNvcmQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmFycmlzU2VhcmNoUmVjb3JkQXJyYXkucHVzaChmYXJyaXNTZWFyY2hSZWNvcmQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmFycmlzU2VhcmNoUmVjb3JkQXJyYXkgPSBmaWx0ZXJQYW5lbEFycmF5W3N0b3JhZ2VsYWJlbENvZGVdO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBpbmRleCA9IGZpbHRlclBhbmVsQXJyYXlbc3RvcmFnZWxhYmVsQ29kZV0uaW5kZXhPZihmYXJyaXNTZWFyY2hSZWNvcmQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA8IDAgJiYgZmFycmlzU2VhcmNoUmVjb3JkICYmIGZhcnJpc1NlYXJjaFJlY29yZC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmFycmlzU2VhcmNoUmVjb3JkQXJyYXkudW5zaGlmdChmYXJyaXNTZWFyY2hSZWNvcmQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBmYXJyaXNTZWFyY2hSZWNvcmRBcnJheSA9IGZhcnJpc1NlYXJjaFJlY29yZEFycmF5LnNsaWNlKDAsIDYpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGZpbHRlclBhbmVsQXJyYXkgPT0gbnVsbCkgZmlsdGVyUGFuZWxBcnJheSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgZmlsdGVyUGFuZWxBcnJheVtzdG9yYWdlbGFiZWxDb2RlXSA9IGZhcnJpc1NlYXJjaFJlY29yZEFycmF5O1xyXG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0odGhpcy5sb2NhbFN0b3JhZ2VLZXksIEpTT04uc3RyaW5naWZ5KGZpbHRlclBhbmVsQXJyYXkpKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9KTtcclxuICAgICAgICAvL+WIpOaWremrmOe6p+etm+mAiemHjOaYr+WQpuW3suS/ruaUuVxyXG4gICAgICAgIGxldCBleHRlbmRBbWVuZGVkTGlzdCA9IHRoaXMuZXh0ZW5kRmlsdGVyTGlzdC5maWx0ZXIoaXRlbSA9PiB7IHJldHVybiBpdGVtLmZpbGxlZCB9KTtcclxuICAgICAgICBpZiAoZXh0ZW5kQW1lbmRlZExpc3QgJiYgZXh0ZW5kQW1lbmRlZExpc3QubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0V4cGFuZFRhZyA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnNob3dFeHBhbmRUYWcgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5leHRlbmRGaWx0ZXJMaXN0U3RvcmUgPSB0aGlzLmV4dGVuZEZpbHRlckxpc3QubWFwKG8gPT4gKHsgLi4ubyB9KSk7XHJcbiAgICAgICAgdGhpcy5leHRlbmRGaWx0ZXJMaXN0U3RvcmUuZm9yRWFjaChmaWVsZCA9PiB7XHJcbiAgICAgICAgICAgIGxldCBleHRlbmRMaXN0SW5kZXggPSB0aGlzLmxpc3RGaWx0ZXJDb25kaXRpb25zLmZpbmRJbmRleChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBpdGVtWydpZCddID09IGZpZWxkWydpZCddO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKGV4dGVuZExpc3RJbmRleCA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxpc3RGaWx0ZXJDb25kaXRpb25zW2V4dGVuZExpc3RJbmRleF0gPSBmaWVsZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMubGlzdEZpbHRlckNvbmRpdGlvbnMpO1xyXG4gICAgICAgIHRoaXMuc2VhcmNoQ2hhbmdlLmVtaXQodGhpcy5saXN0RmlsdGVyQ29uZGl0aW9ucyk7XHJcbiAgICAgICAgdGhpcy5pblNldEN1cnJlbnRGaWx0ZXJDb25kaXRpb25zKCk7XHJcbiAgICAgICAgdGhpcy5maWx0ZXJMaXN0Q2xhc3NpZnkoKTtcclxuICAgICAgICB0aGlzLmZhcnJpc3NpZGViYXIuaXNPcGVuID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5mbG9hdFBhbmVsT3BlbiA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuY2QubWFya0ZvckNoZWNrKCk7XHJcbiAgICAgICAgdGhpcy5zdWJtaXQoJ2V4dGVuZEZvcm1EYXRhJywgdGhpcy5saXN0RmlsdGVyQ29uZGl0aW9ucyk7XHJcbiAgICB9XHJcbiAgICAvKiog5o+Q5Lqk6KGo5Y2VICovXHJcbiAgICBzdWJtaXQodHlwZSwgZmlsdGVybGlzdCwgZmlsdGVySXRlbSA9IG51bGwpIHtcclxuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCB8fCAhdGhpcy5zaG93Q2FuU3VibWl0IHx8ICF0aGlzLmFkdmFuY2VkQ2FuU3VibWl0KSB7IHJldHVybjsgfVxyXG4gICAgICAgIGNvbnN0IHF1ZXJ5TGlzdCA9IHRoaXMuaGFuZGxlci5zZXRGaWx0ZXJDb25kaXRpb25zKGZpbHRlcmxpc3QpO1xyXG4gICAgICAgIHRoaXMucXVlcnkuZW1pdCh7IHR5cGU6IHR5cGUsIGRhdGE6IEpTT04uc3RyaW5naWZ5KHF1ZXJ5TGlzdCksIGZpbHRlckl0ZW0gfSk7XHJcbiAgICB9XHJcbiAgICAvKiog6K6+572u562b6YCJ5Yid5aeL5YC8ICovXHJcbiAgICBzZXRGaWx0ZXJWYWx1ZShmaWVsZENvbmZpZ3M6IEZpZWxkQ29uZmlnW10pIHtcclxuICAgICAgICB0aGlzLmxpc3RGaWx0ZXJDb25kaXRpb25zID0gdGhpcy5zdGFnTGlzdEZpbHRlckNvbmRpdGlvbnMubWFwKG8gPT4gKHsgLi4ubyB9KSk7XHJcbiAgICAgICAgaWYgKHRoaXMubGlzdEZpbHRlckNvbmRpdGlvbnMgJiYgdGhpcy5saXN0RmlsdGVyQ29uZGl0aW9ucy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRWYWx1ZXModGhpcy5saXN0RmlsdGVyQ29uZGl0aW9ucywgZmllbGRDb25maWdzKTtcclxuICAgICAgICAgICAgbGV0IGxpc3RGaWx0ZXIgPSB0aGlzLmxpc3RGaWx0ZXJDb25kaXRpb25zLm1hcChvID0+ICh7IC4uLm8gfSkpO1xyXG4gICAgICAgICAgICB0aGlzLmxpc3RGaWx0ZXJDb25kaXRpb25zID0gbGlzdEZpbHRlcjtcclxuICAgICAgICAgICAgdGhpcy5maWx0ZXJMaXN0Q2xhc3NpZnkoKTtcclxuICAgICAgICAgICAgdGhpcy5zZWFyY2hDaGFuZ2UuZW1pdCh0aGlzLmxpc3RGaWx0ZXJDb25kaXRpb25zKTtcclxuICAgICAgICAgICAgdGhpcy5pblNldEN1cnJlbnRGaWx0ZXJDb25kaXRpb25zKCk7XHJcbiAgICAgICAgICAgIC8vIHRoaXMubGlzdFNlYXJjaCgpO1xyXG4gICAgICAgICAgICB0aGlzLmNkLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgdGhpcy5jZC5tYXJrRm9yQ2hlY2soKTtcclxuICAgICAgICAgICAgdGhpcy5jYW5TdWJtaXQgPSB0aGlzLmNhblN1Ym1pdEZpbHRlcih0aGlzLnJlcXVpcmVkTGlzdEZpbHRlcik7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5jYW5TdWJtaXQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnN1Ym1pdCgnc2hvd0Zvcm1EYXRhJywgdGhpcy5saXN0RmlsdGVyQ29uZGl0aW9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDmuIXnqbrnrZvpgInmn5DkuIDpoblcclxuICAgICAqIEBwYXJhbSBsYWJlbENvZGUg5a2X5q6157yW5Y+35ZSv5LiA5qCH6K+GXHJcbiAgICAgKi9cclxuICAgIHJlc2V0RmlsdGVyVmFsdWUobGFiZWxDb2RlOiBzdHJpbmcpIHtcclxuICAgICAgICBpZiAobGFiZWxDb2RlICYmIHRoaXMubGlzdEZpbHRlckNvbmRpdGlvbnMgJiYgdGhpcy5saXN0RmlsdGVyQ29uZGl0aW9ucy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgbGV0IHJlc2V0Q29uZGl0aW9uID0gdGhpcy5saXN0RmlsdGVyQ29uZGl0aW9ucy5maW5kKChjb25kaXRpb25zKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29uZGl0aW9uc1snZmllbGRDb2RlJ10gPT09IGxhYmVsQ29kZTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgaWYgKHJlc2V0Q29uZGl0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc2V0TGlzdENvbmRpdGlvbihyZXNldENvbmRpdGlvbik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlckxpc3RDbGFzc2lmeSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jZC5tYXJrRm9yQ2hlY2soKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoQ2hhbmdlLmVtaXQodGhpcy5saXN0RmlsdGVyQ29uZGl0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmluU2V0Q3VycmVudEZpbHRlckNvbmRpdGlvbnMoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWR2YW5jZWRDYW5TdWJtaXQgPSB0aGlzLmNhblN1Ym1pdEZpbHRlcih0aGlzLmV4dGVuZFJlcXVpcmVkTGlzdCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN1Ym1pdCgncGFuZWxGb3JtRGF0YScsIHRoaXMubGlzdEZpbHRlckNvbmRpdGlvbnMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIOiuvue9rnZhbHVlXHJcbiAgICBzZXRWYWx1ZXMoY29uZGl0aW9ucywgZmllbGRDb25maWdzOiBGaWVsZENvbmZpZ1tdKSB7XHJcbiAgICAgICAgbGV0IHFjOiBRdWVyeUNvbmRpdGlvbjtcclxuICAgICAgICBsZXQgY29udHJvbFR5cGU6IHN0cmluZztcclxuICAgICAgICBpZiAoZmllbGRDb25maWdzICYmIGZpZWxkQ29uZmlncy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgZmllbGRDb25maWdzLmZvckVhY2godiA9PiB7XHJcbiAgICAgICAgICAgICAgICBxYyA9IGNvbmRpdGlvbnMuZmluZChjID0+IGMuZmllbGRDb2RlID09IHYubGFiZWxDb2RlKTtcclxuICAgICAgICAgICAgICAgIGlmIChxYykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xUeXBlID0gdGhpcy5nZXRDb250cm9sVHlwZShxYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcWMudmFsdWUgPSB0aGlzLmZpbHRlclNlcnZpY2Uuc2V0VmFsdWVzKGNvbnRyb2xUeXBlLCB2LnZhbHVlLCBxYy5jb250cm9sLnNpbmdsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcWMudmFsdWVUZXh0ID0gcWMudmFsdWUuZ2V0VmFsdWVUZXh0KHFjLmNvbnRyb2wpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh2LnZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHFjLmZpbGxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VmFsdWUoZmllbGROYW1lOiBzdHJpbmcpIHtcclxuICAgICAgICBjb25zdCBxdWVyeUxpc3QgPSB0aGlzLmhhbmRsZXIuc2V0RmlsdGVyQ29uZGl0aW9ucyh0aGlzLmxpc3RGaWx0ZXJDb25kaXRpb25zKTtcclxuICAgICAgICBjb25zdCBpdGVtID0gcXVlcnlMaXN0LmZpbmQoKG46IGFueSkgPT4gblsnRmlsdGVyRmllbGQnXSA9PT0gZmllbGROYW1lKTtcclxuICAgICAgICBpZiAoaXRlbSkge1xyXG4gICAgICAgICAgICByZXR1cm4gaXRlbS52YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPluaOp+S7tuexu+Wei1xyXG4gICAgICogQHBhcmFtIHNlbGVjdGVkRmllbGRDb25kaXRpb24gXHJcbiAgICAgKi9cclxuICAgIGdldENvbnRyb2xUeXBlKHNlbGVjdGVkRmllbGRDb25kaXRpb246IFF1ZXJ5Q29uZGl0aW9uKTogc3RyaW5nIHtcclxuICAgICAgICBpZiAoc2VsZWN0ZWRGaWVsZENvbmRpdGlvbikge1xyXG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT0gQ29udHJvbFR5cGUuVGV4dCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdpbnB1dCc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT0gQ29udHJvbFR5cGUuU2VhcmNoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ3NlYXJjaCc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT0gQ29udHJvbFR5cGUuRGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdkYXRlJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PSBDb250cm9sVHlwZS5Nb250aCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdtb250aCc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT0gQ29udHJvbFR5cGUuWWVhcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICd5ZWFyJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PSBDb250cm9sVHlwZS5EYXRlUmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnZGF0ZXJhbmdlJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PSBDb250cm9sVHlwZS5Nb250aFJhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ21vbnRocmFuZ2UnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHNlbGVjdGVkRmllbGRDb25kaXRpb24uY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09IENvbnRyb2xUeXBlLlllYXJSYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICd5ZWFycmFuZ2UnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHNlbGVjdGVkRmllbGRDb25kaXRpb24uY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09IENvbnRyb2xUeXBlLkRhdGVSYW5nZVRpbWUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnZGF0ZXJhbmdldGltZSc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT0gQ29udHJvbFR5cGUuRHJvcERvd24pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnZHJvcGRvd24nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHNlbGVjdGVkRmllbGRDb25kaXRpb24uY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09IENvbnRyb2xUeXBlLk51bWJlclJhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ251bWJlcic7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT0gQ29udHJvbFR5cGUuSGVscCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdoZWxwJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PSBDb250cm9sVHlwZS5DaGVja2JveEdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2NoZWNrYm94Z3JvdXAnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHNlbGVjdGVkRmllbGRDb25kaXRpb24uY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09IENvbnRyb2xUeXBlLlJhZGlvKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ3JhZGlvJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PSBDb250cm9sVHlwZS5JbnB1dEdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2lucHV0LWdyb3VwJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PSBDb250cm9sVHlwZS5OdW1iZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnc2luZ2xlbnVtYmVyJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PSBDb250cm9sVHlwZS5GbGV4aWJsZU51bWJlcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdmbGV4aWJsZW51bWJlcic7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT0gQ29udHJvbFR5cGUuRmxleGlibGVEYXRlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2ZsZXhpYmxlZGF0ZSc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2lucHV0JztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOabtOaWsOS4iuS4i+aWh+S4reetm+mAieaVsOaNrlxyXG4gICAgICovXHJcbiAgICBpblNldEN1cnJlbnRGaWx0ZXJDb25kaXRpb25zKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmZpbHRlckhhbmRsZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5maWx0ZXJIYW5kbGVyLnNldEN1cnJlbnRGaWx0ZXJDb25kaXRpb25zKHRoaXMubGlzdEZpbHRlckNvbmRpdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKiog5riF56m65p2h5Lu2ICovXHJcbiAgICByZXNldExpc3RDb25kaXRpb24obGlzdEZpbHRlckNvbmRpdGlvbjogUXVlcnlDb25kaXRpb24pIHtcclxuICAgICAgICBpZiAobGlzdEZpbHRlckNvbmRpdGlvbi5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT0gQ29udHJvbFR5cGUuVGV4dCkge1xyXG4gICAgICAgICAgICBsaXN0RmlsdGVyQ29uZGl0aW9uLnZhbHVlID0gbmV3IFRleHRWYWx1ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChsaXN0RmlsdGVyQ29uZGl0aW9uLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PSBDb250cm9sVHlwZS5TZWFyY2gpIHtcclxuICAgICAgICAgICAgbGlzdEZpbHRlckNvbmRpdGlvbi52YWx1ZSA9IG5ldyBTZWFyY2hWYWx1ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChsaXN0RmlsdGVyQ29uZGl0aW9uLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PSBDb250cm9sVHlwZS5EYXRlKSB7XHJcbiAgICAgICAgICAgIGxpc3RGaWx0ZXJDb25kaXRpb24udmFsdWUgPSBuZXcgRGF0ZVZhbHVlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGxpc3RGaWx0ZXJDb25kaXRpb24uY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09IENvbnRyb2xUeXBlLk1vbnRoKSB7XHJcbiAgICAgICAgICAgIGxpc3RGaWx0ZXJDb25kaXRpb24udmFsdWUgPSBuZXcgTW9udGhWYWx1ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChsaXN0RmlsdGVyQ29uZGl0aW9uLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PSBDb250cm9sVHlwZS5ZZWFyKSB7XHJcbiAgICAgICAgICAgIGxpc3RGaWx0ZXJDb25kaXRpb24udmFsdWUgPSBuZXcgWWVhclZhbHVlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGxpc3RGaWx0ZXJDb25kaXRpb24uY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09IENvbnRyb2xUeXBlLkRhdGVSYW5nZSkge1xyXG4gICAgICAgICAgICBsaXN0RmlsdGVyQ29uZGl0aW9uLnZhbHVlID0gbmV3IERhdGVSYW5nZVZhbHVlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGxpc3RGaWx0ZXJDb25kaXRpb24uY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09IENvbnRyb2xUeXBlLk1vbnRoUmFuZ2UpIHtcclxuICAgICAgICAgICAgbGlzdEZpbHRlckNvbmRpdGlvbi52YWx1ZSA9IG5ldyBNb250aFJhbmdlVmFsdWUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAobGlzdEZpbHRlckNvbmRpdGlvbi5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT0gQ29udHJvbFR5cGUuWWVhclJhbmdlKSB7XHJcbiAgICAgICAgICAgIGxpc3RGaWx0ZXJDb25kaXRpb24udmFsdWUgPSBuZXcgWWVhclJhbmdlVmFsdWUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAobGlzdEZpbHRlckNvbmRpdGlvbi5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT0gQ29udHJvbFR5cGUuRHJvcERvd24pIHtcclxuICAgICAgICAgICAgbGlzdEZpbHRlckNvbmRpdGlvbi52YWx1ZSA9IG5ldyBEcm9wRG93bkxpc3RWYWx1ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChsaXN0RmlsdGVyQ29uZGl0aW9uLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PSBDb250cm9sVHlwZS5OdW1iZXJSYW5nZSkge1xyXG4gICAgICAgICAgICBsaXN0RmlsdGVyQ29uZGl0aW9uLnZhbHVlID0gbmV3IE51bWJlclJhbmdlVmFsdWUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAobGlzdEZpbHRlckNvbmRpdGlvbi5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT0gQ29udHJvbFR5cGUuSGVscCkge1xyXG4gICAgICAgICAgICBsaXN0RmlsdGVyQ29uZGl0aW9uLnZhbHVlID0gbmV3IEhlbHBWYWx1ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChsaXN0RmlsdGVyQ29uZGl0aW9uLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PSBDb250cm9sVHlwZS5DaGVja2JveEdyb3VwKSB7XHJcbiAgICAgICAgICAgIGxpc3RGaWx0ZXJDb25kaXRpb24udmFsdWUgPSBuZXcgQ2hlY2tib3hHcm91cFZhbHVlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGxpc3RGaWx0ZXJDb25kaXRpb24uY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09IENvbnRyb2xUeXBlLlJhZGlvKSB7XHJcbiAgICAgICAgICAgIGxpc3RGaWx0ZXJDb25kaXRpb24udmFsdWUgPSBuZXcgUmFkaW9Hcm91cFZhbHVlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGxpc3RGaWx0ZXJDb25kaXRpb24uY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09IENvbnRyb2xUeXBlLklucHV0R3JvdXApIHtcclxuICAgICAgICAgICAgbGlzdEZpbHRlckNvbmRpdGlvbi52YWx1ZSA9IG5ldyBJbnB1dEdyb3VwVmFsdWUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAobGlzdEZpbHRlckNvbmRpdGlvbi5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT0gQ29udHJvbFR5cGUuTnVtYmVyKSB7XHJcbiAgICAgICAgICAgIGxpc3RGaWx0ZXJDb25kaXRpb24udmFsdWUgPSBuZXcgTnVtYmVyVmFsdWUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAobGlzdEZpbHRlckNvbmRpdGlvbi5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT0gQ29udHJvbFR5cGUuRmxleGlibGVOdW1iZXIpIHtcclxuICAgICAgICAgICAgbGlzdEZpbHRlckNvbmRpdGlvbi52YWx1ZSA9IG5ldyBGbGV4aWJsZU51bWJlclZhbHVlKHsgc3RhcnRWYWx1ZTogbnVsbCwgZW5kVmFsdWU6IG51bGwsIHZhbHVlOiBudWxsIH0sIGxpc3RGaWx0ZXJDb25kaXRpb24uY29udHJvbC5zaW5nbGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChsaXN0RmlsdGVyQ29uZGl0aW9uLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PSBDb250cm9sVHlwZS5GbGV4aWJsZURhdGUpIHtcclxuICAgICAgICAgICAgbGlzdEZpbHRlckNvbmRpdGlvbi52YWx1ZSA9IG5ldyBGbGV4aWJsZURhdGVWYWx1ZSh7IHN0YXJ0VmFsdWU6IG51bGwsIGVuZFZhbHVlOiBudWxsLCB2YWx1ZTogbnVsbCB9LCBsaXN0RmlsdGVyQ29uZGl0aW9uLmNvbnRyb2wuc2luZ2xlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGxpc3RGaWx0ZXJDb25kaXRpb24udmFsdWUgPSBuZXcgVGV4dFZhbHVlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxpc3RGaWx0ZXJDb25kaXRpb24udmFsdWVUZXh0ID0gJyc7XHJcbiAgICAgICAgbGlzdEZpbHRlckNvbmRpdGlvbi5maWxsZWQgPSBmYWxzZTtcclxuICAgICAgICAvLyByZXR1cm4gbGlzdEZpbHRlckNvbmRpdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICByZXNldFNlYXJjaCgpIHtcclxuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCkgeyByZXR1cm47IH1cclxuICAgICAgICBpZiAodGhpcy5saXN0RmlsdGVyQ29uZGl0aW9ucyAmJiB0aGlzLmxpc3RGaWx0ZXJDb25kaXRpb25zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLmxpc3RGaWx0ZXJDb25kaXRpb25zLmZvckVhY2gobGlzdEZpbHRlckNvbmRpdGlvbiA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc2V0TGlzdENvbmRpdGlvbihsaXN0RmlsdGVyQ29uZGl0aW9uKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMubGlzdEZpbHRlckNvbmRpdGlvbnMgPSB0aGlzLmxpc3RGaWx0ZXJDb25kaXRpb25zLm1hcChvID0+ICh7IC4uLm8gfSkpO1xyXG4gICAgICAgICAgICB0aGlzLmZpbHRlckxpc3RDbGFzc2lmeSgpO1xyXG4gICAgICAgICAgICB0aGlzLnNob3dDYW5TdWJtaXQgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLnN1Ym1pdCgncGFuZWxGb3JtRGF0YScsIHRoaXMubGlzdEZpbHRlckNvbmRpdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJlc2V0Q2hhbmdlLmVtaXQoKTtcclxuICAgICAgICB0aGlzLnNob3dFeHBhbmRUYWcgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog6auY57qn562b6YCJ5riF56m6562b6YCJXHJcbiAgICAgKi9cclxuICAgIHJlc2V0QWR2YW5jZWRTZWFyY2goKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZXh0ZW5kRmlsdGVyTGlzdCAmJiB0aGlzLmV4dGVuZEZpbHRlckxpc3QubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXh0ZW5kRmlsdGVyTGlzdC5mb3JFYWNoKGxpc3RGaWx0ZXJDb25kaXRpb24gPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNldExpc3RDb25kaXRpb24obGlzdEZpbHRlckNvbmRpdGlvbik7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIHRoaXMuZXh0ZW5kRmlsdGVyTGlzdCA9IHRoaXMuZXh0ZW5kRmlsdGVyTGlzdC5tYXAobyA9PiAoeyAuLi5vIH0pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuZXh0ZW5kUmVxdWlyZWRMaXN0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLmFkdmFuY2VkQ2FuU3VibWl0ID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogdmFsdWVUZXh0IOeJueauiuexu+Wei+WkhOeQhlxyXG4gICAgICogQHBhcmFtIGl0ZW0gXHJcbiAgICAgKi9cclxuICAgIGdldFZhbHVlVGV4dChpdGVtOiBRdWVyeUNvbmRpdGlvbikge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGl0ZW0uZmllbGROYW1lLGl0ZW0uY29udHJvbC5nZXRDb250cm9sVHlwZSgpKTtcclxuICAgICAgICBpZiAoaXRlbS5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT09IENvbnRyb2xUeXBlLkRyb3BEb3duKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVudW1WYWx1ZSA9IChpdGVtLmNvbnRyb2wgYXMgRHJvcERvd25Db250cm9sKS5lbnVtVmFsdWVzO1xyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IChpdGVtLnZhbHVlIGFzIERyb3BEb3duTGlzdFZhbHVlKS52YWx1ZTtcclxuICAgICAgICAgICAgaWYgKGVudW1WYWx1ZSAmJiBlbnVtVmFsdWUubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0ZXh0cyA9IGVudW1WYWx1ZS5maW5kKHZhbCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbFsndmFsdWUnXSA9PSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRleHRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS52YWx1ZVRleHQgPSB0ZXh0c1snbmFtZSddO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGl0ZW0uY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09PSBDb250cm9sVHlwZS5DaGVja2JveEdyb3VwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVudW1WYWx1ZSA9IChpdGVtLmNvbnRyb2wgYXMgQ2hlY2tib3hHcm91cENvbnRyb2wpLmVudW1WYWx1ZXM7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gKGl0ZW0udmFsdWUgYXMgQ2hlY2tib3hHcm91cFZhbHVlKS52YWx1ZTtcclxuICAgICAgICAgICAgaWYgKGVudW1WYWx1ZSAmJiBlbnVtVmFsdWUubGVuZ3RoICYmIHZhbHVlICYmIHZhbHVlWydsZW5ndGgnXSA+IDApIHtcclxuICAgICAgICAgICAgICAgIGlmIChpdGVtLmNvbnRyb2wuYm9vbGNoZWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS52YWx1ZVRleHQgPSB2YWx1ZVswXS50b1N0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLnZhbHVlVGV4dCA9PSAndHJ1ZScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS52YWx1ZVRleHQgPSB0aGlzLmxvY2FsZVNlcnZpY2UuZ2V0VmFsdWUoJ3RleHQueWVzJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpdGVtLnZhbHVlVGV4dCA9PSAnZmFsc2UnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0udmFsdWVUZXh0ID0gdGhpcy5sb2NhbGVTZXJ2aWNlLmdldFZhbHVlKCd0ZXh0Lm5vJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRleHRzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gdmFsdWVbJ2xlbmd0aCddOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZW51bXMgPSBlbnVtVmFsdWUuZmluZCh2YWwgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbFsndmFsdWUnXSA9PSB2YWx1ZVtpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbnVtcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dHMucHVzaChlbnVtc1snbmFtZSddKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpdGVtLnZhbHVlVGV4dCA9IHRleHRzLmpvaW4oJywnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChpdGVtLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PT0gQ29udHJvbFR5cGUuUmFkaW8pIHtcclxuICAgICAgICAgICAgY29uc3QgZW51bVZhbHVlID0gKGl0ZW0uY29udHJvbCBhcyBSYWRpb0NvbnRyb2wpLmVudW1WYWx1ZXM7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gKGl0ZW0udmFsdWUgYXMgUmFkaW9Hcm91cFZhbHVlKS52YWx1ZTtcclxuICAgICAgICAgICAgaWYgKGVudW1WYWx1ZSAmJiBlbnVtVmFsdWUubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0ZXh0cyA9IGVudW1WYWx1ZS5maW5kKHZhbCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbFsndmFsdWUnXSA9PSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRleHRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS52YWx1ZVRleHQgPSB0ZXh0c1snbmFtZSddO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLnZhbHVlVGV4dCA9PSAndHJ1ZScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS52YWx1ZVRleHQgPSB0aGlzLmxvY2FsZVNlcnZpY2UuZ2V0VmFsdWUoJ3RleHQueWVzJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpdGVtLnZhbHVlVGV4dCA9PSAnZmFsc2UnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0udmFsdWVUZXh0ID0gdGhpcy5sb2NhbGVTZXJ2aWNlLmdldFZhbHVlKCd0ZXh0Lm5vJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChpdGVtLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PSBDb250cm9sVHlwZS5JbnB1dEdyb3VwKSB7XHJcbiAgICAgICAgICAgIGl0ZW0udmFsdWVUZXh0ID0gaXRlbS52YWx1ZS5nZXRWYWx1ZVRleHQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYnVpbGRTbWFydEhlbHBLZXkodmFsdWU6IHN0cmluZykge1xyXG4gICAgICAgIGlmKHRoaXMuaWRTZXJ2aWNlKSB7XHJcbiAgICAgICAgICAgIGxldCBwcmVmaXggPSAnJztcclxuICAgICAgICAgICAgaWYgKGxvY2F0aW9uLmhhc2gpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBhdGhBcnIgPSBsb2NhdGlvbi5oYXNoLnNwbGl0KCc/Jyk7XHJcbiAgICAgICAgICAgICAgICBwcmVmaXggPSBwYXRoQXJyID8gcGF0aEFyclswXSA6ICcnO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcGF0aEFyciAgPSBsb2NhdGlvbi5wYXRobmFtZS5zcGxpdCgnLycpO1xyXG4gICAgICAgICAgICAgICAgcHJlZml4ID0gcGF0aEFyciA/IHBhdGhBcnJbcGF0aEFyci5sZW5ndGggLSAxXSA6ICcnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmlkU2VydmljZS5lbmNyeXB0KHByZWZpeCArICcvbGlzdC1maWx0ZXIvJyArIHZhbHVlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gJ2xpc3QtZmlsdGVyLycgKyB2YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG4iXX0=