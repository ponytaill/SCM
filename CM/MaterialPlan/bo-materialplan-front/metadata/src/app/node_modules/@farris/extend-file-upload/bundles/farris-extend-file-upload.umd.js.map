{"version":3,"file":"farris-extend-file-upload.umd.js","sources":["../../../../node_modules/tslib/tslib.es6.js","ng://@farris/extend-file-upload/lib/service/f-file-upload-api.service.ts","ng://@farris/extend-file-upload/lib/model/f-file-upload.model.ts","ng://@farris/extend-file-upload/lib/utils/f-file.utils.ts","ng://@farris/extend-file-upload/lib/service/f-file-uploader.service.ts","ng://@farris/extend-file-upload/lib/service/f-file-upload-default.service.ts","ng://@farris/extend-file-upload/lib/directive/f-file-drop.directive.ts","ng://@farris/extend-file-upload/lib/directive/f-file-select.directive.ts","ng://@farris/extend-file-upload/lib/directive/f-file-preview.directive.ts","ng://@farris/extend-file-upload/lib/directive/f-file-upload.directive.ts","ng://@farris/extend-file-upload/lib/pipe/index.ts","ng://@farris/extend-file-upload/lib/components/view-image/f-file-view-image.component.ts","ng://@farris/extend-file-upload/lib/components/upload/f-file-upload.component.ts","ng://@farris/extend-file-upload/lib/components/preview/f-file-preview.component.ts","ng://@farris/extend-file-upload/lib/components/preview-checkbox/preview-checkbox.component.ts","ng://@farris/extend-file-upload/lib/components/multi-download-info/multi-download-info.component.ts","ng://@farris/extend-file-upload/lib/locale.ts","ng://@farris/extend-file-upload/lib/components/upload-and-preview/upload-and-preview.component.ts","ng://@farris/extend-file-upload/lib/components/upload-progress/upload-progress.component.ts","ng://@farris/extend-file-upload/lib/components/upload-and-preview/file-order-drag.directive.ts","ng://@farris/extend-file-upload/lib/components/upload-and-preview/replaceX.pipe.ts","ng://@farris/extend-file-upload/lib/f-file-upload.module.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import { Injectable, Optional, Inject, InjectionToken } from '@angular/core';\r\nimport { UploadInput, UploadConfig } from '../model/index';\r\n\r\n\r\nexport interface FFileUploadServerConfig extends UploadConfig {\r\n    upload?: UploadInput | null;\r\n    remove?: UploadInput | null;\r\n}\r\n\r\nexport const FFileUploadAPIServiceToken = new InjectionToken<FFileUploadServerConfig>('MFFileUploadServerConfig');\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class FFileUploadAPIService {\r\n    private config: FFileUploadServerConfig;\r\n    private commonAPI: UploadInput;\r\n    private apiArray = ['upload','remove'];\r\n    constructor(@Optional() @Inject(FFileUploadAPIServiceToken) exConfig: FFileUploadServerConfig) {\r\n\r\n        this.config = { upload: null,  remove: null };\r\n        this.commonAPI = { type: 'config', url: '', timeout: 0, headers: null, data: {} };\r\n        if (exConfig) {\r\n            for (const key in this.commonAPI) {\r\n                if (exConfig.hasOwnProperty(key)) {\r\n                    this.commonAPI[key] = exConfig[key];\r\n                }\r\n            }\r\n        }\r\n        this.apiArray.forEach(item => {\r\n            this.config[item] = Object.assign({}, this.commonAPI);\r\n            if (exConfig && exConfig.hasOwnProperty(item)) {\r\n                if (exConfig[item].hasOwnProperty('url')) {\r\n                    this.config[item] = Object.assign({}, this.config[item], exConfig[item], { url: this.combinUrl(exConfig[item].url) });\r\n                }\r\n            }\r\n        });\r\n\r\n        // if (exConfig) {\r\n        //     Object.assign(this.config, exConfig);\r\n        // }\r\n    }\r\n    private combinUrl(typeUrl) {\r\n        let result = typeUrl;\r\n        result = this.commonAPI.url + typeUrl;\r\n        return result;\r\n    }\r\n    /**\r\n     * 获取API定义\r\n     */\r\n    getAPI() {\r\n        return this.config;\r\n    }\r\n    /**\r\n     * \r\n     * @param type \r\n     * @param object \r\n     */\r\n    getAssignAPI(type, object) {\r\n        // removeAll,uploadAll 用于内部传递使用，应当传递的是remove和upload对应的参数\r\n        // 通过设置对应关系\r\n        const infoMap = { 'removeAll': 'remove', 'uploadAll': 'upload','multipartUpload':'upload' };\r\n        if(infoMap.hasOwnProperty(type)){\r\n            type=infoMap[type];\r\n        }\r\n        if (this.config[type] && object) {\r\n            return Object.assign({}, this.config[type], object);\r\n        }\r\n        if (this.config[type]) {\r\n            return this.config[type];\r\n        }\r\n        if (object) {\r\n            return object;\r\n        }\r\n        return null;\r\n\r\n    }\r\n}\r\n","import { Subscription, Observable } from 'rxjs';\r\n\r\nexport interface UploaderOptions {\r\n    concurrency?: number;\r\n    allowedContentTypes?: string[];\r\n    maxUploads?: number;\r\n    maxFileSize?: number;//MB为单位\r\n    uploadedCount?: number;\r\n}\r\n\r\nexport interface BlobFile extends Blob {\r\n    name: string;\r\n}\r\n\r\nexport enum UploadStatus {\r\n    Queue,\r\n    Uploading,\r\n    Done,\r\n    Cancelled,\r\n    Remove,// 正在删除\r\n    Error\r\n}\r\n\r\nexport interface UploadProgress {\r\n    status: UploadStatus;\r\n    data?: {\r\n        percentage: number;\r\n        speed?: number;\r\n        speedHuman?: string;\r\n        startTime?: number | null;\r\n        endTime?: number | null;\r\n        eta?: number | null;\r\n        etaHuman?: string | null;\r\n    };\r\n}\r\nexport interface FUploadFileExtend {\r\n    id: string;\r\n    name: string;\r\n    disabled?: boolean;\r\n    checked?: boolean;\r\n    size?: number | undefined;//文件大小\r\n    createTime?: string | undefined;//创建日期\r\n    type?: string;\r\n    extend?: any | null;//记录返回数据\r\n    extendStatus?: number;\r\n    extendHeaders?: { [key: string]: string } | null;\r\n    showDownload?: boolean;\r\n}\r\n\r\nexport interface UploadFile {\r\n    id: string;\r\n    fileIndex: number;\r\n    lastModifiedDate: Date;\r\n    name: string;\r\n    size: number;\r\n    type: string;\r\n    form: FormData;\r\n    progress: UploadProgress;//\r\n    response?: any;//记录返回数据\r\n    responseStatus?: number;\r\n    sub?: Subscription | any;\r\n    nativeFile?: File;\r\n    responseHeaders?: { [key: string]: string };\r\n}\r\n\r\n\r\nexport interface UploadOutput {\r\n    type: 'addedToQueue' | 'allAddedToQueue' | 'uploading' | 'done' | 'start' | 'cancelled' | 'dragOver'\r\n    | 'dragOut' | 'drop' | 'removed' | 'allRemoved' | 'rejected' | 'allDone' | 'allStart' | 'allCancelled' | 'error';\r\n    file?: UploadFile;\r\n    nativeFile?: File;\r\n    message?: String;\r\n    files?: UploadFile[];\r\n}\r\nexport interface UploadConfig {\r\n    url?: string;\r\n    method?: string;// POST，GET \r\n    id?: string;\r\n    fieldName?: string;\r\n    fileIndex?: number;\r\n    file?: UploadFile;\r\n    data?: {\r\n        [key: string]: any,\r\n        extProperty?: DocMetaProperty | null //\r\n    };\r\n    headers?: { [key: string]: string } | null;\r\n    includeWebKitFormBoundary?: boolean; // If false, only the file is send trough xhr.send (WebKitFormBoundary is omit)\r\n    withCredentials?: boolean;\r\n    timeout?: number;// 暂不支持\r\n}\r\n\r\nexport interface UploadInput extends UploadConfig {\r\n    type: 'upload' | 'uploadAll' | 'cancel' | 'cancelAll' | 'remove' | 'removeAll' | 'config' | 'hide' | 'multipartUpload' | 'sliceUpload';\r\n    /** 分块上传时，每块大小默认为 1M */\r\n    chunkSize?: number\r\n}\r\n\r\n\r\nexport abstract class UploadServerService {\r\n    constructor() {\r\n\r\n    }\r\n    abstract upload(files: UploadFile[], event: UploadInput, extendService: any): Observable<any>;\r\n    abstract remove(files: UploadFile[], event: UploadInput, extendService: any): Observable<any>;\r\n    abstract multipartUpload(file: UploadFile, event: UploadInput, extendService: any): Observable<any>;\r\n}\r\n\r\nexport interface DocMetaProperty {\r\n    extProperties1?: string;\r\n    extProperties2?: string;\r\n    extProperties3?: string;\r\n    extProperties4?: string;\r\n    extProperties5?: string;\r\n}","import { UploadFile, UploadStatus, FUploadFileExtend } from '../model';\r\nconst isObject = value => typeof value === 'object' && value !== null;\r\nconst isArray = value => Array.isArray(value);\r\n// 暂时用不到\r\nconst deepCloneObject = (src) => {\r\n    if (!isObject(src)) return src;\r\n    const target = isArray(src) ? [] : {};\r\n    for (const key in src) {\r\n        if (!src.hasOwnProperty(key)) continue;\r\n        const v = src[key];\r\n        target[key] = v && isObject(v) ? deepCloneObject(v) : v;\r\n    }\r\n    return target;\r\n}\r\n\r\nconst humanizeBytes = (bytes: number): string => {\r\n    if (bytes === 0) {\r\n        return '0 Byte';\r\n    }\r\n\r\n    const k = 1024;\r\n    const sizes: string[] = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB'];\r\n    const i: number = Math.floor(Math.log(bytes) / Math.log(k));\r\n\r\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\r\n}\r\nconst generateId = (): string => {\r\n    return Math.random().toString(36).substring(7);\r\n}\r\nconst makeUploadFile = (file: File, index: number): UploadFile => {\r\n    return {\r\n        fileIndex: index,\r\n        id: generateId(),\r\n        name: file.name,\r\n        size: file.size,\r\n        type: file.type,\r\n        form: new FormData(),\r\n        progress: {\r\n            status: UploadStatus.Queue,\r\n            data: {\r\n                percentage: 0,\r\n                speed: 0,\r\n                speedHuman: `${humanizeBytes(0)}/s`,\r\n                startTime: null,\r\n                endTime: null,\r\n                eta: null,\r\n                etaHuman: null\r\n            }\r\n        },\r\n        lastModifiedDate: new Date(file.lastModified),\r\n        sub: undefined,\r\n        nativeFile: file\r\n    };\r\n}\r\n\r\nconst allMineTypes = {\r\n    '.pdf': 'application/pdf',\r\n    '.gif': 'image/gif',\r\n    '.png': 'image/png',\r\n    '.txt': 'text/plain',\r\n    '.htm': 'text/html',\r\n    '.html': 'text/html',\r\n    '.jpe': 'image/jpeg',\r\n    '.jpeg': 'image/jpeg',\r\n    '.jpg': 'image/jpeg',\r\n    '.js': 'text/javascript,application/javascript',\r\n    '.json': 'application/json',\r\n    '.pps': 'application/vnd.ms-powerpoint',\r\n    '.ppt': 'application/vnd.ms-powerpoint',\r\n    '.doc': 'application/msword',\r\n    '.xml': 'text/xml,application/xml',\r\n    '.zip': 'aplication/zip',\r\n    '.xlsx': 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\r\n    '.wps': 'application/vnd.ms-works',\r\n    '.3gpp': 'audio/3gpp, video/3gpp',\r\n    '.ac3': 'audio/ac3',\r\n    '.asf': 'allpication/vnd.ms-asf',\r\n    '.au': 'audio/basic',\r\n    '.css': 'text/css',\r\n    '.csv': 'text/csv',\r\n    '.dot': 'application/msword',\r\n    '.dtd': 'application/xml-dtd',\r\n    '.dwg': 'image/vnd.dwg',\r\n    '.dxf': 'image/vnd.dxf',\r\n    '.jp2': 'image/jp2',\r\n    '.mp2': 'audio/mpeg, video/mpeg',\r\n    '.mp3': ' audio/mpeg',\r\n    '.mp4': 'audio/mp4, video/mp4',\r\n    '.mpeg': 'video/mpeg',\r\n    '.mpg': 'video/mpeg',\r\n    '.mpp': 'application/vnd.ms-project',\r\n    '.ogg': 'application/ogg, audio/ogg',\r\n    '.pot': 'application/vnd.ms-powerpoint',\r\n    '.rtf': 'application/rtf,text/rtf',\r\n    '.svf': 'image/vnd.svf',\r\n    '.tif': 'image/tiff',\r\n    '.tiff': 'image/tiff',\r\n    '.wdb': 'application/vnd.ms-works',\r\n    '.xhtml': 'application/xhtml+xml',\r\n    '.xlc': 'application/vnd.ms-excel',\r\n    '.xlm': 'application/vnd.ms-excel',\r\n    '.xls': 'application/vnd.ms-excel',\r\n    '.xlt': 'application/vnd.ms-excel',\r\n    '.xlw': 'application/vnd.ms-excel'\r\n};\r\nconst findMineTypeBySuffix = (suffix: string): string => {\r\n    if (allMineTypes.hasOwnProperty(suffix)) {\r\n        return allMineTypes[suffix];\r\n    }\r\n    return '';\r\n}\r\n\r\nconst changeUploadFileToFileExtend = (files: UploadFile[]): FUploadFileExtend[] => {\r\n    // 如果是数组\r\n    let result=[];\r\n    files.forEach(file=>{\r\n        let preExtend = { id: '', name: '', size: 0, type: '', extend: null, extendStatus: 0, extendHeaders: null } as FUploadFileExtend;\r\n        for (let resultProp in preExtend) {\r\n            let tempProp = resultProp.replace('extend', 'response');\r\n            if (file.hasOwnProperty(tempProp)) {\r\n                preExtend[resultProp] = file[tempProp];\r\n            }\r\n        }\r\n        result.push(preExtend);\r\n    });\r\n    \r\n    return result;\r\n}\r\n\r\nexport const FFileUtils = {\r\n    isObject,\r\n    isArray,\r\n    deepCloneObject,\r\n    humanizeBytes,\r\n    makeUploadFile,\r\n    findMineTypeBySuffix,\r\n    changeUploadFileToFileExtend\r\n}","import { EventEmitter, Optional } from \"@angular/core\";\r\nimport { Observable, Subject, Subscription, of } from \"rxjs\";\r\nimport { mergeMap, finalize } from \"rxjs/operators\";\r\nimport { FFileUtils } from \"../utils/index\";\r\nimport {\r\n    UploadFile,\r\n    UploadOutput,\r\n    UploadInput,\r\n    UploadStatus,\r\n    BlobFile,\r\n    UploadServerService,\r\n    UploaderOptions,\r\n} from \"../model/index\";\r\nimport * as e from \"express\";\r\n\r\nexport class FFileUploaderService {\r\n    queue: UploadFile[];\r\n    serviceEvents: EventEmitter<UploadOutput>;\r\n    uploadScheduler: Subject<{\r\n        file: UploadFile;\r\n        event: UploadInput;\r\n        files?: UploadFile[];\r\n    }>;\r\n    subs: { id: string; sub: Subscription; ids?: string[] }[];\r\n    allowedContentTypes: string[] = [\"*\"];\r\n    //默认不限制,0代表不限制 Number.POSITIVE_INFINITY\r\n    maxUploads: number = 0;\r\n    /** 单位M，默认是12M,0代表不限制 */\r\n    maxFileSize: number = 12;\r\n    concurrency: number = Number.POSITIVE_INFINITY;\r\n    uploadedCount: number = 0;\r\n    private extendServerConfig = null;\r\n    constructor(@Optional() private uploadServerSer: UploadServerService) {\r\n        this.queue = [];\r\n        this.serviceEvents = new EventEmitter<UploadOutput>();\r\n        this.uploadScheduler = new Subject();\r\n        this.subs = [];\r\n\r\n        this.uploadScheduler\r\n            .pipe(\r\n                mergeMap((upload) => {\r\n                    return this.serverMethod(upload);\r\n                }, this.concurrency)\r\n            )\r\n            .subscribe((uploadOutput) => {\r\n                // if (uploadOutput.type == 'removed' || uploadOutput.type == 'done') {\r\n                //   // 删除或者done移除\r\n                //   const subIndex = this.subs.findIndex(sub => sub.id === uploadOutput.file.id);\r\n                //   if (subIndex > -1 && this.subs[subIndex].sub) {\r\n                //     this.subs[subIndex].sub.unsubscribe();\r\n                //   }\r\n                //   this.subs.splice(subIndex, 1);\r\n                // }\r\n                if (uploadOutput.type == \"removed\") {\r\n                    // 事件中返回的都是\r\n                    this.queue = this.queue.filter(\r\n                        (item) => item.progress.status !== UploadStatus.Remove\r\n                    );\r\n                    if (!uploadOutput.hasOwnProperty(\"message\")) {\r\n                        uploadOutput[\"message\"] = \"被删除\";\r\n                    }\r\n                }\r\n                if (uploadOutput.type == \"error\") {\r\n                    // 上传失败的附件移除\r\n                    this.queue = this.queue.filter((queueItem) => {\r\n                        return (\r\n                            uploadOutput.files.findIndex((item) => queueItem.id == item.id) <\r\n                            0\r\n                        );\r\n                    });\r\n                }\r\n                this.serviceEvents.emit(uploadOutput);\r\n            });\r\n    }\r\n    setOptions(options: UploaderOptions) {\r\n        // 重置文件大小、类型、个数限制\r\n        if (options) {\r\n            for (let prop in options) {\r\n                this[prop] = options[prop];\r\n            }\r\n        }\r\n    }\r\n    handleFiles(incomingFiles: FileList): void {\r\n        const allowedIncomingFiles: File[] = [].reduce.call(\r\n            incomingFiles,\r\n            (acc: File[], checkFile: File, i: number) => {\r\n                const futureQueueLength = acc.length + this.queue.length + 1;\r\n                let judgeResult = this.rejectedReason(\r\n                    checkFile.name,\r\n                    checkFile.type,\r\n                    futureQueueLength,\r\n                    checkFile.size\r\n                );\r\n                if (judgeResult.allowed) {\r\n                    acc = acc.concat(checkFile);\r\n                } else {\r\n                    // 不符合当前文件类型或者内容超出限制，抛出事件\r\n                    const rejectedFile: UploadFile = FFileUtils.makeUploadFile(\r\n                        checkFile,\r\n                        i\r\n                    );\r\n                    this.serviceEvents.emit({\r\n                        type: \"rejected\",\r\n                        file: rejectedFile,\r\n                        message: judgeResult.message,\r\n                    });\r\n                }\r\n                return acc;\r\n            },\r\n            []\r\n        );\r\n\r\n        // 构造文件结构，并单个抛出事件\r\n        [].map.call(allowedIncomingFiles, (file: File, i: number) => {\r\n            const uploadFile: UploadFile = FFileUtils.makeUploadFile(file, i);\r\n            this.queue.push(uploadFile);\r\n            this.serviceEvents.emit({ type: \"addedToQueue\", file: uploadFile });\r\n        });\r\n\r\n        // 所有的文件都已经添加，抛出事件\r\n        this.serviceEvents.emit({ type: \"allAddedToQueue\" });\r\n    }\r\n    private rejectedReason(name, type, queuelength, size) {\r\n        let allowed = false;\r\n        let message = \"\";\r\n        // 已存在同名文件\r\n        let findDuplicateIndex = this.queue.findIndex((file) => file.name == name);\r\n        if (findDuplicateIndex > -1) {\r\n            message = \"上传失败：已存在同名文件\";\r\n        } else if (!this.isContentTypeAllowed(name)) {\r\n            message =\r\n                \"上传失败：只允许上传\" +\r\n                this.allowedContentTypes.join(\",\") +\r\n                \"类型的文档\";\r\n        } else if (\r\n            this.maxUploads > 0 &&\r\n            (this.maxUploads <= this.uploadedCount ||\r\n                queuelength + this.uploadedCount > this.maxUploads)\r\n        ) {\r\n            message = \"上传失败：文件总个数超出\" + this.maxUploads + \"限制\";\r\n        } else if (!this.isFileSizeAllowed(size)) {\r\n            message = \"上传失败：单个文件大小超出\" + this.maxFileSize + \"MB的限制\";\r\n        } else if (size == 0) {\r\n            message = \"上传失败：不允许文件为空\";\r\n        } else {\r\n            allowed = true;\r\n        }\r\n        return {\r\n            allowed,\r\n            message,\r\n        };\r\n    }\r\n    /**\r\n     * 从前端传来事件，进行服务器端方法类型判断\r\n     * @param input\r\n     */\r\n    initInputEvents(input: EventEmitter<UploadInput>): Subscription {\r\n        //debugger\r\n        return input.subscribe((event: UploadInput) => {\r\n            //debugger\r\n            switch (event.type) {\r\n                case 'sliceUpload':\r\n                    const _files = this.queue.filter(\r\n                        (file) => file.progress.status === UploadStatus.Queue && (!event.file || file.fileIndex === event.file.fileIndex )\r\n                    );\r\n\r\n                    if (_files.length > 0) {\r\n                        this.uploadScheduler.next({\r\n                            files: _files,\r\n                            event: event,\r\n                            file: null,\r\n                        });\r\n                    }\r\n                    break;\r\n                case \"upload\":\r\n                case \"multipartUpload\":\r\n                    const uploadFileIndex = this.queue.findIndex(\r\n                        (file) => file === event.file\r\n                    );\r\n                    if (uploadFileIndex !== -1 && event.file) {\r\n                        this.uploadScheduler.next({\r\n                            files: [this.queue[uploadFileIndex]],\r\n                            event: event,\r\n                            file: null,\r\n                        });\r\n                    }\r\n                    break;\r\n                case \"uploadAll\":\r\n                    const files = this.queue.filter(\r\n                        (file) => file.progress.status === UploadStatus.Queue\r\n                    );\r\n                    if (files.length > 0) {\r\n                        event.type = \"upload\";\r\n                        this.uploadScheduler.next({\r\n                            files: files,\r\n                            event: event,\r\n                            file: null,\r\n                        });\r\n                    }\r\n                    break;\r\n                case \"cancel\":\r\n                    const id = event.id || null;\r\n                    if (!id) {\r\n                        return;\r\n                    }\r\n                    const fileIndex = this.queue.findIndex((file) => file.id === id);\r\n                    if (fileIndex !== -1) {\r\n                        this.serviceEvents.emit({\r\n                            type: \"cancelled\",\r\n                            files: [this.queue[fileIndex]],\r\n                            message: \"已取消附件上传\",\r\n                        });\r\n                        this.queue.splice(fileIndex, 1);\r\n                    }\r\n                    break;\r\n                    // case 'cancel':\r\n                    // debugger\r\n                    // const id = event.id || null;\r\n                    // if (!id) {\r\n                    //   return;\r\n                    // }\r\n                    // const subs = this.subs.filter(sub => sub.id === id);\r\n                    // subs.forEach(sub => {\r\n                    //   if (sub.sub) {\r\n                    //     sub.sub.unsubscribe();\r\n                    //     const fileIndex = this.queue.findIndex(file => file.id === id);\r\n                    //     if (fileIndex !== -1) {\r\n                    //       this.queue[fileIndex].progress.status = UploadStatus.Cancelled;\r\n                    //       this.serviceEvents.emit({ type: 'cancelled', file: this.queue[fileIndex] });\r\n                    //     }\r\n                    //   }\r\n                    // });\r\n                    break;\r\n                // case 'cancelAll':\r\n                //   this.subs.forEach(sub => {\r\n                //     if (sub.sub) {\r\n                //       sub.sub.unsubscribe();\r\n                //     }\r\n\r\n                //     const file = this.queue.find(uploadFile => uploadFile.id === sub.id);\r\n                //     if (file) {\r\n                //       file.progress.status = UploadStatus.Cancelled;\r\n                //       this.serviceEvents.emit({ type: 'cancelled', file: file });\r\n                //     }\r\n                //   });\r\n                //   break;\r\n                case \"hide\":\r\n                    if (!event.id) {\r\n                        return;\r\n                    }\r\n                    let ids = event.id.split(\",\");\r\n                    this.queue = this.queue.filter((file) => {\r\n                        let tIndex = ids.findIndex((tId) => tId == file.id);\r\n                        return tIndex > -1 ? false : true;\r\n                    });\r\n                    break;\r\n                case \"cancelAll\":\r\n                    // 取消，直接从队列中移除，不用修改状态\r\n                    const queueFiles = this.queue.filter(\r\n                        (uploadFile) => uploadFile.progress.status === UploadStatus.Queue\r\n                    );\r\n                    if (queueFiles.length) {\r\n                        this.serviceEvents.emit({\r\n                            type: \"cancelled\",\r\n                            files: queueFiles,\r\n                            message: \"已取消附件上传\",\r\n                        });\r\n                        this.queue = this.queue.filter(\r\n                            (uploadFile) => uploadFile.progress.status != UploadStatus.Queue\r\n                        );\r\n                    }\r\n                    break;\r\n                case \"remove\":\r\n                    if (!event.id) {\r\n                        return;\r\n                    }\r\n                    const removeIndex = this.queue.findIndex(\r\n                        (file) => file.id === event.id\r\n                    );\r\n                    if (removeIndex !== -1) {\r\n                        // 得有个开始删除和已经删除\r\n                        this.queue[removeIndex].progress.status = UploadStatus.Remove;\r\n                        this.uploadScheduler.next({\r\n                            files: [this.queue[removeIndex]],\r\n                            event: event,\r\n                            file: null,\r\n                        });\r\n                    }\r\n                    break;\r\n                case \"removeAll\":\r\n                    const removeQueueFiles = this.queue.filter(\r\n                        (uploadFile) => uploadFile.progress.status === UploadStatus.Queue\r\n                    );\r\n                    if (removeQueueFiles.length) {\r\n                        this.serviceEvents.emit({\r\n                            type: \"cancelled\",\r\n                            files: removeQueueFiles,\r\n                            message: \"删除附件成功\",\r\n                        });\r\n                        this.queue = this.queue.filter(\r\n                            (uploadFile) => uploadFile.progress.status != UploadStatus.Queue\r\n                        );\r\n                    }\r\n                    // 正在上传的附件是如何处理\r\n                    // const doneFiles = this.queue.filter(uploadFile => uploadFile.progress.status === UploadStatus.Done);\r\n                    if (this.queue.length) {\r\n                        event.type = \"remove\";\r\n                        this.queue.map(\r\n                            (item) => (item.progress.status = UploadStatus.Remove)\r\n                        );\r\n                        this.uploadScheduler.next({\r\n                            files: this.queue,\r\n                            event: event,\r\n                            file: null,\r\n                        });\r\n                    }\r\n                    break;\r\n            }\r\n        });\r\n    }\r\n\r\n    setExtendServerConfig(extendSer) {\r\n        this.extendServerConfig = extendSer;\r\n    }\r\n\r\n    serverMethod(upload: {\r\n        file: UploadFile;\r\n        event: UploadInput;\r\n        files?: UploadFile[];\r\n    }): Observable<UploadOutput> {\r\n        return new Observable((observer) => {\r\n            let sub;\r\n            let ids = upload.files.map((fileItem) => fileItem.id);\r\n            switch (upload.event.type) {\r\n                case 'sliceUpload':\r\n                    sub = this.upload(upload.files, upload.event);\r\n                    break;\r\n                case \"upload\":\r\n                    sub = this.upload(upload.files, upload.event);\r\n                    break;\r\n                case \"multipartUpload\":\r\n                    sub = this.multipartUpload(upload.files[0], upload.event);\r\n                    break;\r\n                // case 'uploadAll':\r\n                //   ids = upload.files.map(fileItem => fileItem.id);\r\n                //   sub = this.uploadAll(upload.files, upload.event);\r\n                //   break;\r\n                case \"remove\":\r\n                    sub = this.remove(upload.files, upload.event);\r\n                    break;\r\n                // case 'removeAll':\r\n                //   ids = upload.files.map(fileItem => fileItem.id);\r\n                //   sub = this.removeAll(upload.files, upload.event);\r\n                //   break;\r\n                default:\r\n                    sub = null;\r\n            }\r\n            if (!sub) {\r\n                return;\r\n            }\r\n            sub.pipe(finalize(() => {\r\n                // debugger;\r\n                if (!observer.closed) {\r\n                    observer.complete();\r\n                }\r\n            })).subscribe(\r\n                    (output) => {\r\n                        // debugger;\r\n                        observer.next(output);\r\n                    },\r\n                    (err) => {\r\n                        observer.next(err);\r\n                    },\r\n                    () => {\r\n                        observer.complete();\r\n                    }\r\n                );\r\n            this.subs.push({ ids: ids, sub: sub, id: \"\" });\r\n            // switch (upload.event.type) {\r\n            //   case 'uploadAll':\r\n            //     this.subs.push({ ids: ids, sub: sub, id: '' });\r\n            //     break;\r\n            //   case 'removeAll':\r\n            //     this.subs.push({ ids: ids, sub: sub, id: '' });\r\n            //     break;\r\n            //   default:\r\n\r\n            // }\r\n        });\r\n    }\r\n    /**\r\n     * 单个文件上传\r\n     * @param file\r\n     * @param event\r\n     */\r\n    // uploadFile(file: UploadFile, event: UploadInput): Observable<UploadOutput> {\r\n    //   const uploadFile = <BlobFile>file.nativeFile;\r\n    //   const uploadIndex = this.queue.findIndex(outFile => outFile.nativeFile === uploadFile);\r\n\r\n    //   // 已经被取消的不能被上传\r\n    //   if (this.queue[uploadIndex].progress.status === UploadStatus.Cancelled) {\r\n    //     return new Observable(observer => {\r\n    //       observer.complete();\r\n    //     });\r\n    //   }\r\n    //   // 抛出开始上传的事件\r\n    //   this.serviceEvents.emit({ type: 'start', files: [file] });\r\n    //   return this.uploadServerSer.upload(file, event, this.extendServerConfig);\r\n    // }\r\n    multipartUpload(\r\n        file: UploadFile,\r\n        event: UploadInput\r\n    ): Observable<UploadOutput> {\r\n        // 抛出开始上传的事件\r\n        this.serviceEvents.emit({ type: \"start\", files: [file] });\r\n        return this.uploadServerSer.multipartUpload(\r\n            file,\r\n            event,\r\n            this.extendServerConfig\r\n        );\r\n    }\r\n    upload(files: UploadFile[], event: UploadInput): Observable<UploadOutput> {\r\n        // 抛出开始上传的事件\r\n        this.serviceEvents.emit({ type: \"start\", files: files });\r\n        return this.uploadServerSer.upload(files, event, this.extendServerConfig);\r\n    }\r\n\r\n    remove(files: UploadFile[], event: UploadInput): Observable<UploadOutput> {\r\n        return this.uploadServerSer.remove(files, event, this.extendServerConfig);\r\n    }\r\n    // removeAll(files: UploadFile[], event: UploadInput): Observable<UploadOutput> {\r\n    //   return this.uploadServerSer.removeAll(files, event, this.extendServerConfig);\r\n    // }\r\n    // 重置\r\n    reset() {\r\n        this.queue = [];\r\n        //this.uploadScheduler = new Subject();\r\n        // this.subs.forEach(sub => {\r\n        //   if (sub.sub) {\r\n        //     sub.sub.unsubscribe();\r\n        //   }\r\n        // });\r\n        this.subs = [];\r\n    }\r\n\r\n    // 暂时\r\n    setContentTypes(contentTypes: string[]): void {\r\n        if (typeof contentTypes !== \"undefined\" && contentTypes instanceof Array) {\r\n            if (contentTypes.find((type: string) => type === \"*\") !== undefined) {\r\n                this.allowedContentTypes = [\"*\"];\r\n            } else {\r\n                this.allowedContentTypes = contentTypes;\r\n            }\r\n            return;\r\n        }\r\n        this.allowedContentTypes = [\"*\"];\r\n    }\r\n\r\n    allContentTypesAllowed(): boolean {\r\n        return (\r\n            this.allowedContentTypes.find((type: string) => type === \"*\") !==\r\n            undefined\r\n        );\r\n    }\r\n    /**\r\n     *\r\n     * @param name\r\n     */\r\n    isContentTypeAllowed(name: string): boolean {\r\n        if (this.allContentTypesAllowed()) {\r\n            return true;\r\n        }\r\n        // 附件没有后缀\r\n        if (name.lastIndexOf(\".\") < 0) {\r\n            return false;\r\n        }\r\n        let namesuffix = name.substr(name.lastIndexOf(\".\"));\r\n        // 简化计算\r\n        return (\r\n            this.allowedContentTypes.findIndex(\r\n                (item) => item.toLowerCase() == namesuffix.toLowerCase()\r\n            ) > -1\r\n        );\r\n    }\r\n\r\n    isFileSizeAllowed(fileSize: number): boolean {\r\n        if (!this.maxFileSize) {\r\n            return true;\r\n        }\r\n        // fileSize是b单位 maxFileSize是MB单位\r\n        return fileSize <= this.maxFileSize * 1024 * 1024; // * 8\r\n    }\r\n}\r\n","\r\nimport { UploadFile, UploadOutput, UploadInput, UploadStatus, BlobFile, UploadServerService } from '../model/index';\r\nimport { Observable } from 'rxjs';\r\nimport { FFileUtils } from '../utils/index';\r\nexport class FFileUploadDefaultService extends UploadServerService {\r\n    /**\r\n     * 2019年3月2日，先假定一个一个传入\r\n     * @param file \r\n     * @param event \r\n     */\r\n    upload(files: UploadFile[], event: UploadInput,extendService:any): Observable<UploadOutput> {\r\n        let file = files[0];\r\n        return new Observable(observer => {\r\n            const url = event.url ||extendService.url|| '';\r\n\r\n            const method = event.method || 'POST';\r\n            const data = event.data || {};\r\n            const headers = event.headers || {};\r\n\r\n            const xhr = new XMLHttpRequest();\r\n            const time: number = new Date().getTime();\r\n            let progressStartTime: number = (file.progress.data && file.progress.data.startTime) || time;\r\n            let speed = 0;\r\n            let eta: number | null = null;\r\n\r\n            xhr.upload.addEventListener('progress', (e: ProgressEvent) => {\r\n                if (e.lengthComputable) {\r\n                    const percentage = Math.round((e.loaded * 100) / e.total);\r\n                    const diff = new Date().getTime() - time;\r\n                    speed = Math.round(e.loaded / diff * 1000);\r\n                    progressStartTime = (file.progress.data && file.progress.data.startTime) || new Date().getTime();\r\n                    eta = Math.ceil((e.total - e.loaded) / speed);\r\n\r\n                    file.progress = {\r\n                        status: UploadStatus.Uploading,\r\n                        data: {\r\n                            percentage: percentage,\r\n                            speed: speed,\r\n                            speedHuman: `${FFileUtils.humanizeBytes(speed)}/s`,\r\n                            startTime: progressStartTime,\r\n                            endTime: null,\r\n                            eta: eta,\r\n                            etaHuman: this.secondsToHuman(eta)\r\n                        }\r\n                    };\r\n\r\n                    observer.next({ type: 'uploading', file: file });\r\n                }\r\n            }, false);\r\n\r\n            xhr.upload.addEventListener('error', (e: Event) => {\r\n                observer.error(e);\r\n                observer.complete();\r\n            });\r\n\r\n            xhr.onreadystatechange = () => {\r\n                if (xhr.readyState === XMLHttpRequest.DONE) {\r\n                    const speedAverage = Math.round(file.size / (new Date().getTime() - progressStartTime) * 1000);\r\n                    file.progress = {\r\n                        status: UploadStatus.Done,\r\n                        data: {\r\n                            percentage: 100,\r\n                            speed: speedAverage,\r\n                            speedHuman: `${FFileUtils.humanizeBytes(speedAverage)}/s`,\r\n                            startTime: progressStartTime,\r\n                            endTime: new Date().getTime(),\r\n                            eta: eta,\r\n                            etaHuman: this.secondsToHuman(eta || 0)\r\n                        }\r\n                    };\r\n\r\n                    file.responseStatus = xhr.status;\r\n\r\n                    try {\r\n                        file.response = JSON.parse(xhr.response);\r\n                    } catch (e) {\r\n                        file.response = xhr.response;\r\n                    }\r\n\r\n                    file.responseHeaders = this.parseResponseHeaders(xhr.getAllResponseHeaders());\r\n\r\n                    observer.next({ type: 'done', files: [file] });\r\n\r\n                    observer.complete();\r\n                }\r\n            };\r\n\r\n            xhr.open(method, url, true);\r\n            xhr.withCredentials = event.withCredentials ? true : false;\r\n\r\n            try {\r\n                const uploadFile = <BlobFile>file.nativeFile;\r\n                // const uploadIndex = this.queue.findIndex(outFile => outFile.nativeFile === uploadFile);\r\n\r\n                // if (this.queue[uploadIndex].progress.status === UploadStatus.Cancelled) {\r\n                //     observer.complete();\r\n                // }\r\n\r\n                Object.keys(headers).forEach(key => xhr.setRequestHeader(key, headers[key]));\r\n\r\n                let bodyToSend: FormData | BlobFile;\r\n\r\n                if (event.includeWebKitFormBoundary !== false) {\r\n                    Object.keys(data).forEach(key => file.form.append(key, data[key]));\r\n                    file.form.append(event.fieldName || 'file', uploadFile, uploadFile.name);\r\n                    bodyToSend = file.form;\r\n                } else {\r\n                    bodyToSend = uploadFile;\r\n                }\r\n\r\n                //this.serviceEvents.emit({ type: 'start', file: file });\r\n                xhr.send(bodyToSend);\r\n            } catch (e) {\r\n                observer.complete();\r\n            }\r\n\r\n            return () => {\r\n                xhr.abort();\r\n            };\r\n        });\r\n    }\r\n    // 删除附件\r\n    remove(files: UploadFile[], event: UploadInput, extendService: any): Observable<UploadOutput> {\r\n        return new Observable(observer => {\r\n            observer.next({ type: 'removed', files: files });\r\n            observer.complete();\r\n        });\r\n    }\r\n    multipartUpload(file: UploadFile, event: UploadInput, extendService: any): Observable<any>{\r\n        return new Observable(observer => {\r\n            observer.complete();\r\n        });\r\n    };\r\n\r\n    private secondsToHuman(sec: number): string {\r\n        return new Date(sec * 1000).toISOString().substr(11, 8);\r\n    }\r\n    private parseResponseHeaders(httpHeaders: string) {\r\n        if (!httpHeaders) {\r\n            return;\r\n        }\r\n\r\n        return httpHeaders.split('\\n')\r\n            .map((x: string) => x.split(/: */, 2))\r\n            .filter((x: string[]) => x[0])\r\n            .reduce((acc: Object, x: string[]) => {\r\n                acc[x[0]] = x[1];\r\n                return acc;\r\n            }, {});\r\n    }\r\n}","import { Directive, ElementRef, EventEmitter, Input, Output, OnInit, OnDestroy } from '@angular/core';\r\nimport { UploadOutput, UploadInput, UploaderOptions } from '../model/index';\r\nimport { FFileUploaderService } from '../service/index';\r\nimport { Subscription } from 'rxjs';\r\n\r\n@Directive({\r\n    selector: '[FFileDrop]'\r\n})\r\nexport class FFileDropDirective implements OnInit, OnDestroy {\r\n    private tDisabled = false;\r\n    // 是否禁用\r\n    @Input()\r\n    set disabled(value: boolean) {\r\n        if (this.tDisabled !== value) {\r\n            this.tDisabled = value;\r\n            if (value) {\r\n                this.unbindDragAndDropEvent();\r\n            } else {\r\n                this.bindDragAndDropEvent();\r\n            }\r\n        }\r\n    };\r\n    get disabled(): boolean {\r\n        return this.tDisabled;\r\n    }\r\n    // 配置\r\n    @Input()\r\n    set options(value: UploaderOptions) {\r\n        this.upload.setOptions(value);\r\n    };\r\n    // 已上传\r\n    @Input()\r\n    set uploadedCount(value){\r\n        this.upload.setOptions({'uploadedCount':value});\r\n    }\r\n    // 传递\r\n    @Input() uploadInput: EventEmitter<UploadInput>;\r\n    @Output() uploadOutput: EventEmitter<UploadOutput>;\r\n\r\n    //upload: FFileUploaderService;\r\n    el: HTMLInputElement;\r\n\r\n    _sub: Subscription[];\r\n\r\n    // eventListener\r\n    dropListener: any = null;\r\n    dragOverListener: any = null;\r\n    dragLeaveListener: any = null;\r\n    dragEnterListener: any = null;\r\n\r\n    constructor(public elementRef: ElementRef, private upload: FFileUploaderService) {\r\n        this.uploadOutput = new EventEmitter<UploadOutput>();\r\n    }\r\n\r\n    ngOnInit() {\r\n        this._sub = [];\r\n        this.el = this.elementRef.nativeElement;\r\n\r\n        this._sub.push(\r\n            this.upload.serviceEvents.subscribe((event: UploadOutput) => {\r\n                this.uploadOutput.emit(event);\r\n            })\r\n        );\r\n\r\n        if (this.uploadInput instanceof EventEmitter) {\r\n            this._sub.push(this.upload.initInputEvents(this.uploadInput));\r\n        }\r\n        // 绑定事件\r\n        if (!this.disabled) {\r\n            this.bindDragAndDropEvent();\r\n        }\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.unbindDragAndDropEvent();\r\n        this._sub.forEach(sub => sub.unsubscribe());\r\n    }\r\n    private bindDragAndDropEvent() {\r\n        // this.ngzone.runOutsideAngular(() => {\r\n        this.dropListener = this.onDrop.bind(this);\r\n        this.el.addEventListener('drop', this.dropListener);\r\n        this.dragOverListener = this.onDragOver.bind(this);\r\n        this.el.addEventListener('dragover', this.dragOverListener);\r\n        this.dragLeaveListener = this.onDragLeave.bind(this);\r\n        this.el.addEventListener('dragleave', this.dragLeaveListener);\r\n        this.dragEnterListener = this.onDropEnter.bind(this);\r\n        this.el.addEventListener('dragenter', this.dragEnterListener);\r\n        //  });\r\n    }\r\n    private unbindDragAndDropEvent() {\r\n        this.dropListener && this.el.removeEventListener('drop', this.dropListener);\r\n        this.dragOverListener && this.el.removeEventListener('dragover', this.dragOverListener);\r\n        this.dragLeaveListener && this.el.removeEventListener('dragleave', this.dragLeaveListener);\r\n        this.dragEnterListener && this.el.removeEventListener('dragenter', this.dragEnterListener);\r\n    }\r\n\r\n    onDropEnter = (e: Event) => {\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n    }\r\n\r\n\r\n    // @HostListener('drop', ['$event'])\r\n    public onDrop(e) {\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n        const event: UploadOutput = { type: 'drop' };\r\n        // console.log('dorp Events');\r\n        this.uploadOutput.emit(event);\r\n        this.upload.handleFiles(e.dataTransfer.files);\r\n    }\r\n\r\n    // @HostListener('dragover', ['$event'])\r\n    public onDragOver(e: Event) {\r\n        if (!e) {\r\n            return;\r\n        }\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n        const event: UploadOutput = { type: 'dragOver' };\r\n        this.uploadOutput.emit(event);\r\n    }\r\n\r\n    // @HostListener('dragleave', ['$event'])\r\n    public onDragLeave(e: Event) {\r\n        if (!e) {\r\n            return;\r\n        }\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n        const event: UploadOutput = { type: 'dragOut' };\r\n        this.uploadOutput.emit(event);\r\n    }\r\n    /**\r\n     * 重置\r\n     */\r\n    reset() {\r\n       /*if (this.el) {\r\n            this._sub.forEach(sub => sub.unsubscribe());\r\n            this._sub = [];\r\n            this.upload.reset();\r\n        }*/\r\n        this.upload.reset();\r\n    }\r\n}\r\n","import { Directive, ElementRef, EventEmitter, Input, Output, OnInit, OnDestroy } from '@angular/core';\r\nimport { UploadOutput, UploaderOptions } from '../model/f-file-upload.model';\r\nimport { FFileUploaderService } from '../service/f-file-uploader.service';\r\nimport { Subscription } from 'rxjs';\r\n\r\n@Directive({\r\n  selector: '[FFileSelect]'\r\n})\r\nexport class FFileSelectDirective implements OnInit, OnDestroy {\r\n  private tDisabled = false;\r\n  @Input()\r\n  set disabled(value: boolean) {\r\n    if (this.tDisabled !== value) {\r\n      this.tDisabled = value;\r\n      if (value) {\r\n        this.unbindEvent();\r\n      } else {\r\n        this.bindEvent();\r\n      }\r\n    }\r\n  }\r\n  get disabled(): boolean {\r\n    return this.tDisabled;\r\n  }\r\n  @Input()\r\n  set options(value: UploaderOptions) {\r\n    if (value) {\r\n      this.upload.setOptions(value);\r\n    }\r\n  };\r\n   // 已上传\r\n   @Input()\r\n   set uploadedCount(value){\r\n       this.upload.setOptions({'uploadedCount':value});\r\n   }\r\n  @Input() uploadInput: EventEmitter<any>;\r\n  @Output() uploadOutput: EventEmitter<UploadOutput>;\r\n\r\n  //upload: FFileUploaderService;\r\n  el: HTMLInputElement;\r\n  private _sub: Subscription[];\r\n  private changeListener: any = null;\r\n\r\n  constructor(public elementRef: ElementRef, private upload: FFileUploaderService) {\r\n    this.uploadOutput = new EventEmitter<UploadOutput>();\r\n    this.el = this.elementRef.nativeElement;\r\n  }\r\n\r\n  ngOnInit() {\r\n    this._sub = [];\r\n    // 对外抛出事件\r\n    this._sub.push(\r\n      this.upload.serviceEvents.subscribe((event: UploadOutput) => {\r\n        this.uploadOutput.emit(event);\r\n      })\r\n    );\r\n    // 对内的事件\r\n    if (this.uploadInput instanceof EventEmitter) {\r\n      this._sub.push(this.upload.initInputEvents(this.uploadInput));\r\n    }\r\n    if (!this.disabled) {\r\n      this.bindEvent();\r\n    }\r\n  }\r\n  private bindEvent() {\r\n    this.changeListener = this.onChange.bind(this);\r\n    this.el.addEventListener('change', this.changeListener);\r\n  }\r\n  private unbindEvent() {\r\n    this.changeListener = null;\r\n    this.el.removeEventListener('change', this.changeListener);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.el) {\r\n      this._sub.forEach(sub => sub.unsubscribe());\r\n    }\r\n  }\r\n\r\n  onChange = () => {\r\n    if (this.el.files) {\r\n      this.upload.handleFiles(this.el.files);\r\n      this.el.value=null;\r\n    }\r\n  }\r\n  /**\r\n   * 重置\r\n   */\r\n  reset(){\r\n    // if (this.el) {\r\n    //   //this._sub.forEach(sub => sub.unsubscribe());\r\n    //   //this._sub=[];\r\n    //   this.upload.reset();\r\n    // }    \r\n    this.upload.reset();\r\n  }\r\n}\r\n","import {  Directive, TemplateRef, Input } from '@angular/core';\r\n\r\n@Directive({\r\n    selector: '[filePreviewListTypeTemplate]'\r\n})\r\nexport class FFilePreviewListTypeTemplateDirective {\r\n    constructor(public template: TemplateRef<any>) { }\r\n}\r\n\r\n@Directive({\r\n    selector: '[filePreviewToolbarTemplate]'\r\n})\r\nexport class FFilePreviewToolbarTemplateDirective {\r\n    constructor(public template: TemplateRef<any>) { }\r\n}\r\n","import { Directive, TemplateRef, Input } from '@angular/core';\r\n\r\n@Directive({\r\n  selector: '[fFielUpload],[fFileUpload]',\r\n})\r\nexport class FFileUploadDirective {\r\n  constructor(\r\n    public templateRef: TemplateRef<any>\r\n  ) { \r\n  }\r\n\r\n}","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { FFileUtils } from '../utils/f-file.utils';\r\nimport {DateTimeHelperService} from '@farris/ui-common/date';\r\n@Pipe({\r\n    name: 'fFileSize'\r\n})\r\nexport class FFileSizePipe implements PipeTransform {\r\n\r\n    transform(value: any, args?: any): any {\r\n        // 如果是字符串\r\n        let tvalue=value;\r\n        if(!value){\r\n            return \"0 Byte\";\r\n        }\r\n        if(typeof value =='string'){\r\n            tvalue=parseInt(value);\r\n        }\r\n        return FFileUtils.humanizeBytes(tvalue);\r\n    }\r\n}\r\n\r\n@Pipe({\r\n    name: 'fFileDate'\r\n})\r\nexport class FFileDatePipe implements PipeTransform {\r\n    constructor(private dateSer:DateTimeHelperService){\r\n\r\n    }\r\n    transform(value: any, returnFormat: string='yyyy-MM-dd'): any {        \r\n        return this.dateSer.formatTo(value,returnFormat);\r\n    }\r\n}","import { Component, OnInit, HostBinding, Input, ViewChild, ElementRef, Host } from '@angular/core';\r\n@Component({\r\n  selector: 'f-file-view-image',\r\n  templateUrl: './f-file-view-image.component.html',\r\n  styleUrls: ['./f-file-view-image.component.css']\r\n})\r\nexport class FFileViewImageComponent implements OnInit {\r\n  @Input() maxHeight = 200;\r\n  @Input() maxWidth = 300;\r\n  @HostBinding('class.f-file-view-image') cls = true;\r\n  @HostBinding('style.height') selfHeight='50px';\r\n  @ViewChild('canvas') canvas: ElementRef;\r\n  private tFile: File;\r\n  @Input()\r\n  set file(fileContent: File) {\r\n    this.tFile = fileContent;\r\n    this.createImageByCanvas();\r\n  }\r\n  get file(): File {\r\n    return this.tFile;\r\n  }\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n  private changeImageSize(originWidth,originHeight) {\r\n\r\n    // 图片原始尺寸\r\n\r\n    // 目标尺寸\r\n    var targetWidth = originWidth, targetHeight = originHeight;\r\n    // 图片尺寸超过400x400的限制\r\n    if (originWidth > this.maxWidth || originHeight > this.maxHeight) {\r\n      if (originWidth / originHeight > this.maxWidth / this.maxHeight) {\r\n        // 更宽，按照宽度限定尺寸\r\n        targetWidth = this.maxWidth;\r\n        targetHeight = Math.round(this.maxWidth * (originHeight / originWidth));\r\n      } else {\r\n        targetHeight = this.maxHeight;\r\n        targetWidth = Math.round(this.maxHeight * (originWidth / originHeight));\r\n      }\r\n    }\r\n    this.selfHeight=targetHeight+\"px\";\r\n    return {\r\n      width: targetWidth,\r\n      height: targetHeight\r\n    }\r\n  }\r\n  // 压缩图片需要的一些元素和对象\r\n\r\n  private createImageByCanvas() {\r\n    let reader = new FileReader();\r\n    let tImage = new Image();\r\n    let canvas = this.canvas.nativeElement;\r\n    let context = canvas.getContext('2d');\r\n    // base64地址图片加载完毕后\r\n    tImage.onload = () => {\r\n      let imgSize = this.changeImageSize(tImage.width,tImage.height);\r\n      // canvas对图片进行缩放\r\n      canvas.width = imgSize.width;\r\n      canvas.height = imgSize.height;\r\n      // 清除画布\r\n      context.clearRect(0, 0,this.maxWidth,this.maxHeight);\r\n      // 图片压缩\r\n      context.drawImage(tImage, 0, 0, imgSize.width, imgSize.height);\r\n    };\r\n\r\n    // 文件base64化，以便获知图片原始尺寸\r\n    reader.onload =(ev)=>{\r\n      tImage.src = reader.result as string;\r\n    };\r\n    reader.onerror = function (e) {\r\n    }\r\n    reader.readAsDataURL(this.file);\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n}\r\n","import {\r\n    Component,\r\n    OnInit,\r\n    Input,\r\n    HostBinding,\r\n    ViewChild,\r\n    EventEmitter,\r\n    Output,\r\n    ContentChild,\r\n    ElementRef,\r\n    AfterViewInit,\r\n} from \"@angular/core\";\r\nimport {\r\n    FFileSelectDirective,\r\n    FFileDropDirective,\r\n    FFileUploadDirective,\r\n} from \"../../directive/index\";\r\nimport {\r\n    UploadOutput,\r\n    UploadInput,\r\n    UploadFile,\r\n    UploaderOptions,\r\n    FUploadFileExtend,\r\n    DocMetaProperty,\r\n} from \"../../model/index\";\r\nimport { FFileUtils } from \"../../utils/index\";\r\nimport {\r\n    FFileUploadAPIService,\r\n    FFileUploaderService,\r\n} from \"../../service/index\";\r\nimport { NotifyService, NotifyOptions } from \"@farris/ui-notify\";\r\nimport { Observable, Subject } from \"rxjs\";\r\n\r\nimport { trigger,style,state,animate,transition } from \"@angular/animations\";\r\nimport { NgZone } from \"@angular/core\";\r\n\r\n@Component({\r\n    selector: \"f-file-upload\",\r\n    templateUrl: \"./f-file-upload.component.html\",\r\n    styleUrls: [\"./f-file-upload.component.css\"],\r\n    providers: [FFileUploaderService],\r\n    animations: [\r\n        trigger(\"hideUploaded\", [\r\n            state(\"show\", style({ opacity: 1, height: \"*\" })),\r\n            state(\"hide\", style({ opacity: 0, height: 0 })),\r\n            // transition('* => void', [\r\n            //   style({ opacity: 1}),\r\n            //   animate(200, style({ opacity: 0}))\r\n            // ])\r\n            transition(\"* => hide\", animate(\"0.5s\")),\r\n        ]),\r\n    ],\r\n})\r\nexport class FFileUploadComponent implements OnInit, AfterViewInit {\r\n    @HostBinding(\"class.ffileupload\") cls = true;\r\n    // 不可见\r\n    @HostBinding(\"class.ffileupload-unvisible\") get visibleState() {\r\n        return !this.visible;\r\n    }\r\n    // 自定义样式\r\n    @HostBinding(\"class.ffileupload-selfdefine\") get selfDirectiveDefine() {\r\n        if (this.fFileUploadDir) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    @HostBinding(\"class.ffileupload-uploading\") get uploading() {\r\n        return this.files.length > 0;\r\n    }\r\n\r\n    // 不能在Construct里追加el\r\n    @ViewChild(\"uploadAssist\") fFileUploadAssist: ElementRef;\r\n    // 自定义指令\r\n    @ContentChild(FFileUploadDirective) fFileUploadDir: any;\r\n    //\r\n    @ViewChild(FFileSelectDirective) fileUpload: FFileSelectDirective;\r\n    @ViewChild(FFileDropDirective) fileDropUpload: FFileDropDirective;\r\n    // 启用图片预览\r\n    @Input() enableImagePreview = true;\r\n    // 启用立即上传\r\n    @Input() uploadImmediately = false;\r\n    // 上传完成后隐藏\r\n    @Input() uploadedThenHide = true;\r\n    // 禁用状态\r\n    @Input() disabled = false;\r\n    /** 启用分块上传 */\r\n    @Input() enableSliceUpload = true;\r\n    /** 分块上传每片大小，单位：M, 默认 1M/块 */\r\n    @Input() chunkSize = 1;\r\n\r\n    private tVisible = true;\r\n    // 是否可见\r\n    @Input()\r\n    set visible(value) {\r\n        this.tVisible = value;\r\n        if (!value) {\r\n            this.reset();\r\n        }\r\n    }\r\n    get visible() {\r\n        return this.tVisible;\r\n    }\r\n    // 需要重置,通过不断的赋值来改变\r\n    @Input() needReset: Observable<any> = new Subject();\r\n    // 启用拖拽\r\n    @Input() enableDrop = false;\r\n    @Input() dropText = \"可将文件拖拽此处\";\r\n    // 启用选择文件按钮\r\n    @Input() enableSelect = true;\r\n    @Input() selectText = \"点击上传\";\r\n    // 启用多选\r\n    @Input() multiple = true;\r\n    // 已经上传文件\r\n    @Input() uploadedCount = 0;\r\n    // 公共的扩展数据\r\n    @Input() extendDatas: {\r\n        [key: string]: any;\r\n        extProperty?: DocMetaProperty | null; //\r\n    };\r\n    // 宽度阈值，当宽度超过760时候，没有附件上传时，宽度是固定值，有附件上传时，有最大宽度值\r\n    @Input() widthThreshold = 760;\r\n    // 上传和删除对外抛出的事件\r\n    @Output() fUploadDoneEvent = new EventEmitter<FUploadFileExtend[]>();\r\n    @Output() fUploadRemovedEvent = new EventEmitter<FUploadFileExtend[]>();\r\n\r\n    // 允许上传的文件类型\r\n    allowedContentTypes = \"*\";\r\n    // 默认不限制附件上传个数\r\n    maxUploads = 0;\r\n    // 单位KB，默认是12M\r\n    maxFileSize = \"12MB\";\r\n\r\n    private selfUploadOpts: UploaderOptions = {};\r\n    // 上传配置项\r\n    @Input()\r\n    set options(uploadOpts: UploaderOptions) {\r\n        if (uploadOpts) {\r\n            if (uploadOpts.hasOwnProperty(\"allowedContentTypes\")) {\r\n                this.allowedContentTypes = uploadOpts.allowedContentTypes.join(\",\");\r\n                this.allowedContentTypes =\r\n                    this.allowedContentTypes == \"\" ? \"*\" : this.allowedContentTypes;\r\n            }\r\n            if (uploadOpts.hasOwnProperty(\"maxUploads\")) {\r\n                this.maxUploads = uploadOpts.maxUploads;\r\n            }\r\n            if (uploadOpts.hasOwnProperty(\"maxFileSize\")) {\r\n                this.maxFileSize = FFileUtils.humanizeBytes(\r\n                    1024 * 1024 * uploadOpts.maxFileSize\r\n                );\r\n            }\r\n            this.selfUploadOpts = Object.assign(this.selfUploadOpts, uploadOpts);\r\n        }\r\n    }\r\n    get options() {\r\n        return this.selfUploadOpts;\r\n    }\r\n    /**\r\n     * 每个组可以设置特殊服务参数，来覆盖默认的统一模块级配置\r\n     */\r\n    @Input()\r\n    set extendServerConfig(config: any) {\r\n        if (config) {\r\n            this.fileUploaderSer.setExtendServerConfig(config);\r\n        }\r\n    }\r\n    // 记录文件个数\r\n    files: UploadOutput[];\r\n    // 标记通过选择按钮处理的事件\r\n    uploadSelectInput: EventEmitter<UploadInput>;\r\n    // 标记通过拖拽处理的事件\r\n    uploadDragInput: EventEmitter<UploadInput>;\r\n    // 控制是否显示追加附件的面板\r\n    showAppendPanel = false;\r\n    // 显示loading\r\n    showLoading = false;\r\n\r\n    settings = {\r\n        disabled: this.disabled,\r\n        visible: this.visible,\r\n    };\r\n\r\n    constructor(\r\n        private uploadAPISer: FFileUploadAPIService,\r\n        private fileUploaderSer: FFileUploaderService,\r\n        private notifyService: NotifyService,\r\n        private ngZone: NgZone\r\n    ) {\r\n        this.files = [];\r\n        this.uploadSelectInput = new EventEmitter<UploadInput>();\r\n        this.uploadDragInput = new EventEmitter<UploadInput>();\r\n        // 重置\r\n        this.needReset.subscribe((data) => {\r\n            this.reset();\r\n        });\r\n    }\r\n\r\n    ngOnInit() {\r\n        // 模板的情况下只能是立即上传\r\n        if (this.fFileUploadDir) {\r\n            this.uploadImmediately = true;\r\n        }\r\n        this.computeWidthThreshold();\r\n    }\r\n    /**\r\n     * 视图初始化后\r\n     */\r\n    ngAfterViewInit() { }\r\n    /**\r\n     * 触发绑定\r\n     */\r\n    triggerFileSelect(ev) {\r\n        ev && ev.stopPropagation();\r\n        // 禁用时\r\n        if (this.disabled) {\r\n            return false;\r\n        }\r\n        this.fileUpload.elementRef.nativeElement.click();\r\n    }\r\n    /**\r\n     * 选择附件按钮，处理抛出事件\r\n     * @param output\r\n     */\r\n    selectUploadOutput(output: UploadOutput): void {\r\n        this.uploadOutputHandler(output);\r\n    }\r\n    /**\r\n     * 拖拽区域处理抛出事件\r\n     * @param output\r\n     */\r\n    dropUploadOutput(output: UploadOutput): void {\r\n        if (this.enableSelect) {\r\n            return;\r\n        }\r\n        // 暂不处理拖拽的事件\r\n        if (\r\n            output.type !== \"dragOver\" &&\r\n            output.type !== \"dragOut\" &&\r\n            output.type !== \"drop\"\r\n        ) {\r\n            this.uploadOutputHandler(output);\r\n        }\r\n    }\r\n    /**\r\n     * allAddedToQueue 选中文件追加到队列\r\n     * @param output\r\n     */\r\n    private uploadOutputHandler(output: UploadOutput): void {\r\n        // 显示追加面板\r\n        if (this.showAppendPanel) {\r\n            this.showAppendPanel = false;\r\n        }\r\n\r\n        if (output.type === \"addedToQueue\" && typeof output.file !== \"undefined\") {\r\n            this.files.push({ type: output.type, file: output.file });\r\n            // 如果启用立即上传\r\n            if (this.uploadImmediately) {\r\n                this.showLoading = true;\r\n                this.startUpload(output.file);\r\n            }\r\n        } else if (output.type === \"start\") {\r\n            // 开始上传\r\n            this.updateFilesState(output, \"\");\r\n        } else if (output.type == \"done\") {\r\n            // 上传完成\r\n            this.updateFilesState(output, \"done\");\r\n            this.fUploadDoneEvent.emit(\r\n                FFileUtils.changeUploadFileToFileExtend(output.files)\r\n            );\r\n            this.hideAfterLoaded(output);\r\n            // 隐藏正在加载\r\n            if (\r\n                this.uploadImmediately &&\r\n                this.showLoading &&\r\n                this.allFileUploaded()\r\n            ) {\r\n                this.showLoading = false;\r\n            }\r\n        } else if (\r\n            output.type === \"cancelled\" ||\r\n            output.type === \"removed\" ||\r\n            output.type == \"error\"\r\n        ) {\r\n            // 删除或者移除文件\r\n            this.files = this.files.filter((fileOutput: UploadOutput) => {\r\n                return (\r\n                    output.files.findIndex((item) => fileOutput.file.id == item.id) < 0\r\n                );\r\n            });\r\n            // 隐藏正在加载\r\n            if (\r\n                this.uploadImmediately &&\r\n                this.showLoading &&\r\n                this.allFileUploaded()\r\n            ) {\r\n                this.showLoading = false;\r\n            }\r\n            this.showNotify(output);\r\n        } else if (\r\n            output.type === \"rejected\" &&\r\n            typeof output.file !== \"undefined\"\r\n        ) {\r\n            // 上传被拒绝\r\n            this.showNotify(output);\r\n            // 隐藏正在加载\r\n            if (\r\n                this.uploadImmediately &&\r\n                this.showLoading &&\r\n                this.allFileUploaded()\r\n            ) {\r\n                this.showLoading = false;\r\n            }\r\n        }\r\n    }\r\n\r\n    private showNotify(output) {\r\n        let notifyType = \"warning\";\r\n        if (output.type == \"cancelled\" || output.type == \"removed\") {\r\n            notifyType = \"success\";\r\n        }\r\n        let message = output.hasOwnProperty(\"message\") ? output[\"message\"] : \"\";\r\n        this.notifyService[notifyType](<NotifyOptions>{\r\n            msg: message,\r\n            timeout: 3000,\r\n        });\r\n    }\r\n    // 判断是否所有文件都已上传\r\n    private allFileUploaded() {\r\n        let findNotDoneIndex = this.files.findIndex((item) => {\r\n            let doneTypes = [\"done\", \"cancelled\", \"removed\"];\r\n            let findTypeIndex = doneTypes.findIndex((type) => {\r\n                return type == item.type;\r\n            });\r\n            return findTypeIndex == -1;\r\n        });\r\n        return findNotDoneIndex == -1 ? true : false;\r\n    }\r\n    /**\r\n     * 更新附件的状态\r\n     * @param output\r\n     * @param eventType\r\n     */\r\n    private updateFilesState(output: UploadOutput, eventType) {\r\n        let startFiles = [];\r\n        if (output.hasOwnProperty(\"files\") && output.files.length > 0) {\r\n            // 此处更新界面可能有性能问题\r\n            startFiles = output.files;\r\n        } else if (typeof output.file !== \"undefined\") {\r\n            startFiles = [output.file];\r\n        }\r\n        eventType = eventType ? eventType : output.type;\r\n        startFiles.map((item) => {\r\n            const index = this.files.findIndex(\r\n                (fileOutput) =>\r\n                    typeof item !== \"undefined\" && fileOutput.file.id === item.id\r\n            );\r\n            // 变更状态\r\n            if (index > -1) {\r\n                this.files[index] = { type: eventType, file: item };\r\n            }\r\n        });\r\n    }\r\n\r\n    /**单个文件上传 */\r\n    startUpload(file: UploadFile): void {\r\n        /**\r\n         * Todo:后续可以从上传区块上取内容进行扩展\r\n         */\r\n        const event: UploadInput = this.uploadAPISer.getAssignAPI(\"upload\", {\r\n            file: file,\r\n            type: this.enableSliceUpload ? 'sliceUpload': 'upload',\r\n            data: this.extendDatas,\r\n            chunkSize: this.chunkSize\r\n        });\r\n        this.inputUploadEventEmit(event);\r\n    }\r\n    /**\r\n     * 上传所有\r\n     */\r\n    startUploadAll(): void {\r\n        /**\r\n         *  Todo：后续，如果每个数据不一样，此处的数据得重新归集\r\n         */\r\n        const event: UploadInput = this.uploadAPISer.getAssignAPI(\"uploadAll\", {\r\n            type: this.enableSliceUpload ? 'sliceUpload': \"uploadAll\",\r\n            files: [],\r\n            data: this.extendDatas,\r\n            chunkSize: this.chunkSize\r\n        });\r\n        this.inputUploadEventEmit(event);\r\n    }\r\n    /**\r\n     * 已上传隐藏属性\r\n     */\r\n    hideAfterLoaded(output: UploadOutput): void {\r\n        //上传完成后删除\r\n        if (this.uploadedThenHide) {\r\n            // this.ngZone.runOutsideAngular(() => {\r\n            setTimeout(() => {\r\n                // 删除或者移除文件\r\n                let ids = output.files.map((fileItem) => fileItem.id);\r\n                this.files = this.files.filter((fileOutput: UploadOutput) => {\r\n                    let tIndex = ids.findIndex((tId) => tId == fileOutput.file.id);\r\n                    return tIndex > -1 ? false : true;\r\n                });\r\n\r\n                const event: UploadInput = this.uploadAPISer.getAssignAPI(\"hide\", {\r\n                    type: \"hide\",\r\n                    id: ids.join(\",\"),\r\n                });\r\n                this.inputUploadEventEmit(event);\r\n            }, 1000);\r\n            // });\r\n        }\r\n    }\r\n    /**\r\n     * 取消上传\r\n     */\r\n    cancelUpload(id: string): void {\r\n        const event: UploadInput = this.uploadAPISer.getAssignAPI(\"cancel\", {\r\n            id: id,\r\n            type: \"cancel\",\r\n        });\r\n        this.inputUploadEventEmit(event);\r\n    }\r\n    /**\r\n     * 删除已上传文件\r\n     */\r\n    removelAllUpload(): void {\r\n        const event: UploadInput = this.uploadAPISer.getAssignAPI(\"removeAll\", {\r\n            type: \"removeAll\",\r\n            files: [],\r\n        });\r\n        this.inputUploadEventEmit(event);\r\n    }\r\n    /**\r\n     * 删除已上传文件\r\n     */\r\n    removeFile(id: string): void {\r\n        const event: UploadInput = this.uploadAPISer.getAssignAPI(\"remove\", {\r\n            id: id,\r\n            type: \"remove\",\r\n        });\r\n        this.inputUploadEventEmit(event);\r\n    }\r\n    /** */\r\n    /**\r\n     *\r\n     * @param bytes\r\n     */\r\n    formateBytes(bytes) {\r\n        return FFileUtils.humanizeBytes(bytes);\r\n    }\r\n    /**\r\n     * 判断是图片\r\n     * @param type\r\n     */\r\n    isImage(type) {\r\n        return type.indexOf(\"image\") > -1;\r\n    }\r\n    // inProgress(progress) {\r\n    //   console.log('进入inProgress');\r\n    //   if (progress.data.percentage == 100) {\r\n    //     return 'done'\r\n    //   }\r\n    //   if (progress.data.percentage == 0) {\r\n    //     return 'uploadi';\r\n    //   }\r\n    //   return 'progress';\r\n    // }\r\n\r\n    /**\r\n     * 是否判断有类型限制\r\n     */\r\n    judgeContentTypeLimit() {\r\n        let tTypes = this.allowedContentTypes.split(\",\");\r\n        let hasAllIndex = tTypes.findIndex((item) => {\r\n            return item == \"*\";\r\n        });\r\n        return hasAllIndex == -1;\r\n    }\r\n    /**\r\n     * 判断是否有文件大小的限制\r\n     */\r\n    judegeFileSizeLimit() {\r\n        return this.maxFileSize != \"0 Byte\";\r\n    }\r\n    /**\r\n     * 追加\r\n     */\r\n    appendNewFiles(ev) {\r\n        //启用拖拽\r\n        if (this.enableDrop) {\r\n            this.showAppendPanel = true;\r\n        } else {\r\n            ev && ev.stopPropagation();\r\n            this.triggerFileSelect(ev);\r\n        }\r\n    }\r\n    /**\r\n     * 关闭追加面板\r\n     */\r\n    closeAppendPanel() {\r\n        this.showAppendPanel = false;\r\n    }\r\n    /**\r\n     * 统一触发 附件选择和拖拽附件的事件\r\n     * @param ev\r\n     */\r\n    private inputUploadEventEmit(ev: UploadInput) {\r\n        // 如果文件上传启用\r\n        if (this.enableSelect) {\r\n            this.uploadSelectInput.emit(ev);\r\n        } else {\r\n            this.uploadDragInput.emit(ev);\r\n        }\r\n    }\r\n    // 重置方法\r\n    reset() {\r\n        this.files = [];\r\n        // 如果文件上传启用\r\n        if (this.enableSelect) {\r\n            this.fileUpload && this.fileUpload.reset();\r\n        } else {\r\n            this.fileDropUpload && this.fileDropUpload.reset();\r\n        }\r\n        this.computeWidthThreshold();\r\n    }\r\n    /**\r\n     * 计算阈值\r\n     */\r\n    private computeWidthThreshold() {\r\n        //\r\n        this.ngZone.runOutsideAngular(() => {\r\n            let self = this;\r\n            setTimeout(() => {\r\n                let tNeedComputedCls = false;\r\n                if (self.fFileUploadDir || !self.visible) {\r\n                    tNeedComputedCls = false;\r\n                }\r\n                // 计算元素\r\n                let assistEl = self.fFileUploadAssist\r\n                    ? self.fFileUploadAssist.nativeElement\r\n                    : null;\r\n\r\n                if (assistEl) {\r\n                    assistEl.parentElement.classList[\"add\"](\"ffileupload-default\");\r\n                }\r\n\r\n                return;\r\n\r\n                // // 超过阈值\r\n                // if (assistEl && assistEl.getBoundingClientRect().width > self.widthThreshold) {\r\n                //   tNeedComputedCls = true;\r\n                // } else {\r\n                //   tNeedComputedCls = false;\r\n                // }\r\n                // if (assistEl) {\r\n                //   let actionFun = tNeedComputedCls ? 'add' : 'remove';\r\n                //   assistEl.parentElement.classList[actionFun]('ffileupload-default');\r\n                // }\r\n            }, 0);\r\n        });\r\n    }\r\n}\r\n","import { Component, OnInit, Input, HostBinding, Output, EventEmitter, ContentChild, TemplateRef, ViewEncapsulation, SimpleChanges, OnChanges, ChangeDetectorRef, ViewChildren, ElementRef, ViewChild } from '@angular/core';\r\nimport { FUploadFileExtend } from '../../model/index';\r\nimport { FFilePreviewListTypeTemplateDirective, FFilePreviewToolbarTemplateDirective } from '../../directive/index';\r\n\r\n@Component({\r\n    selector: 'f-file-preview',\r\n    templateUrl: './f-file-preview.component.html',\r\n    styleUrls: ['./f-file-preview.component.css'],\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\nexport class FFilePreviewComponent implements OnInit, OnChanges {\r\n    @HostBinding('class.ffilepreview--wrapper') cls = true;\r\n    @HostBinding('class.ffilepreview-unvisible') get visibleState() {\r\n        return !this.visible;\r\n    }\r\n    // 只读的状态，控制附件是否可删除\r\n    @Input() readonly = true;\r\n    private _defaultItemCls = '';\r\n    @Input()\r\n    set defaultItemCls(value: string) {\r\n        this._defaultItemCls = value;\r\n    }\r\n    get defaultItemCls(): string {\r\n        //如果有自定义的值\r\n        if (this._defaultItemCls) {\r\n            return this._defaultItemCls + ' ';\r\n        }\r\n        // 如果有自定义模板\r\n        if (this.listTypeTemplate) {\r\n            return 'ffilepreview--item ';\r\n        }\r\n        return this.type == 'list' ? 'ffilepreview--item ' : 'ffilepreview--item col-sm-12 col-md-6 col-xl-3 col-el-2 ';\r\n    }\r\n    @Input() visible = true;\r\n    // 是否启用批量操作\r\n    @Input() enableMulti = false;\r\n    // list类型 card类型\r\n    @Input() type = \"list\";\r\n    // 列项上的class\r\n    @Input() itemCls = \"\";\r\n    // Header的class\r\n    @Input() headerCls = '';\r\n    // 启用重命名\r\n    @Input() canRename = false;\r\n    // 默认重命名\r\n    @Input() defaultRename = '';\r\n    // \r\n    @Input() enableCardAreaResponse = true;\r\n    // 标记是否显示重命名输入框\r\n    showRenameInput = false;\r\n    @ViewChild('multiRenameInput') multiRenameRef: ElementRef;\r\n    //@Input() fileInfos:FUploadFileExtend[]=[];\r\n    private _fileInfos: FUploadFileExtend[] = [];\r\n    @Input()\r\n    set fileInfos(val: FUploadFileExtend[]) {\r\n        this._fileInfos = this.formatDatas(val);;\r\n    }\r\n    get fileInfos(): FUploadFileExtend[] {\r\n        return this._fileInfos;\r\n    };\r\n    // 附件预览信息，抛出对象给第三方处理\r\n    @Output() filePreviewEvent = new EventEmitter<FUploadFileExtend>();\r\n    // 附件下载事件，抛出对象给第三方处理\r\n    @Output() fileDownloadEvent = new EventEmitter<{ fileInfos: FUploadFileExtend[], name: string }>();\r\n    @Output() multiSelectedEvent = new EventEmitter<FUploadFileExtend[]>();\r\n    // 附件删除事件，抛出对象给第三方处理\r\n    @Output() fileRemoveEvent = new EventEmitter<FUploadFileExtend>();\r\n    @ContentChild(FFilePreviewListTypeTemplateDirective, { read: TemplateRef }) listTypeTemplate: TemplateRef<any>;\r\n    @ContentChild(FFilePreviewToolbarTemplateDirective, { read: TemplateRef }) toolbarTemplate: TemplateRef<any>;\r\n    multiSelected: FUploadFileExtend[] = [];\r\n    // 全选状态\r\n    selectAllBtnChecked = false;\r\n    settings = {\r\n        readonly: this.readonly,\r\n        visible: this.visible,\r\n        enableMulti: this.enableMulti\r\n    };\r\n\r\n    constructor(private cd: ChangeDetectorRef) { }\r\n    ngOnInit() {\r\n\r\n    }\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        // if (changes['enableMultiDownload']) {\r\n        //     this.formatDatas(this.fileInfos);\r\n        // }\r\n    }\r\n    /**\r\n     * 格式化数据\r\n     * @param val \r\n     */\r\n    formatDatas(val) {\r\n        if (this.enableMulti) {\r\n            let formatValue= val.map((item: FUploadFileExtend) => {\r\n                // if (!item.hasOwnProperty('checked')) {\r\n                //     //\r\n                //     let findItem = this._fileInfos.find(olditem => {\r\n                //         return item.id == olditem.id;\r\n                //     });\r\n                //     if (findItem && findItem.hasOwnProperty('checked')) {\r\n                //         item['checked'] = findItem['checked'];\r\n                //     } else {\r\n                //         item['checked'] = this.selectAllBtnChecked;\r\n                //     }\r\n                // }\r\n                item['checked'] = this.selectAllBtnChecked;\r\n                return item;\r\n            });\r\n            // 归集已选数据\r\n            if(this.selectAllBtnChecked){\r\n                this.multiSelected=[...formatValue];\r\n            }else{\r\n                this.multiSelected=[];\r\n            }\r\n            // 返回格式化数据\r\n            return formatValue;\r\n        } else {\r\n            return val;\r\n        }\r\n    }\r\n    /**\r\n     * 预览\r\n     * @param ev \r\n     * @param fileInfo \r\n     */\r\n    filePreviewHandler(ev: Event, fileInfo: FUploadFileExtend) {\r\n        ev.stopImmediatePropagation();\r\n        this.filePreviewEvent.emit(fileInfo);\r\n    }\r\n    /**\r\n     * 下载\r\n     * @param ev \r\n     * @param fileInfo \r\n     */\r\n    fileDownloadHandler(ev: Event, fileInfo: FUploadFileExtend) {\r\n        ev.stopImmediatePropagation();\r\n        this.fileDownloadEvent.emit({ fileInfos: [fileInfo], name: '' });\r\n    }\r\n    fileMultiDownloadHandler(ev: Event) {\r\n        ev.stopImmediatePropagation();\r\n        let rename = '';\r\n        if (this.showRenameInput) {\r\n            rename = this.multiRenameRef.nativeElement.value;\r\n        }\r\n        if (rename == '') {\r\n            rename = this.defaultRename;\r\n        }\r\n        this.fileDownloadEvent.emit({ fileInfos: this.multiSelected, name: rename });\r\n    }\r\n    /**\r\n     * checkbox多选\r\n     * @param ev \r\n     */\r\n    multiSelectChange(ev) {\r\n        let hasInArray = this.multiSelected.findIndex(item => item['id'] == ev['id']);\r\n        let findInArray = this.fileInfos.findIndex(item => item['id'] == ev['id']);\r\n        if (findInArray > -1) {\r\n            this.fileInfos[findInArray]['checked'] = ev['checked'];\r\n        }\r\n\r\n        if (ev['checked']) {\r\n            //选入\r\n            if (hasInArray == -1) {\r\n                if (findInArray > -1) {\r\n                    this.multiSelected.push(this.fileInfos[findInArray]);\r\n                }\r\n            }\r\n        } else {\r\n            //移出\r\n            if (hasInArray > -1) {\r\n                this.multiSelected.splice(hasInArray, 1);\r\n            }\r\n        }\r\n        // 判断是否全选\r\n        if (this.fileInfos.length > 0) {\r\n            if (this.multiSelected.length == this.fileInfos.length) {\r\n                //都全选\r\n                this.selectAllBtnChecked = true;\r\n            } else {\r\n                // 未全选\r\n                this.selectAllBtnChecked = false;\r\n            }\r\n        }\r\n        // 抛出多选\r\n        this.multiSelectedEvent.emit(this.multiSelected);\r\n    }\r\n    /**\r\n     * 删除数据\r\n     * @param ev \r\n     * @param fileInfo \r\n     */\r\n    fileRemoveHandler(ev: Event, fileInfo: FUploadFileExtend) {\r\n        ev.stopImmediatePropagation();\r\n        this.fileRemoveEvent.emit(fileInfo);\r\n    }\r\n    /**\r\n     * 获取文档类型对应的class\r\n     * @param fileName \r\n     */\r\n    getFileTypeClassName(fileName) {\r\n        let clsName = 'ffilepreview--filetype';\r\n        // 如果名称为空\r\n        if (!fileName) {\r\n            return clsName + '-any';\r\n        }\r\n        let lastDotIndex = fileName.lastIndexOf(\".\");\r\n        let fileSuffix = '';\r\n        if (lastDotIndex > -1) {\r\n            fileSuffix = fileName.substring(lastDotIndex + 1).toLocaleLowerCase();\r\n        }\r\n        switch (fileSuffix) {\r\n            case 'pdf':\r\n                clsName += '-pdf';\r\n                break;\r\n            case 'jpeg':\r\n            case 'jpg':\r\n            case 'gif':\r\n            case 'svg':\r\n            case 'png':\r\n            case 'bmp':\r\n                clsName += '-img';\r\n                break;\r\n            case 'ppt':\r\n            case 'pptx':\r\n                clsName += '-ppt';\r\n                break;\r\n            case 'doc':\r\n            case 'docx':\r\n                clsName += '-doc';\r\n                break;\r\n            case 'xls':\r\n            case 'xlsx':\r\n                clsName += '-xls';\r\n                break;\r\n            case 'txt':\r\n                clsName += '-txt';\r\n                break;\r\n            case 'zip':\r\n                clsName += '-zip';\r\n                break;\r\n            default:\r\n                clsName += '-any';\r\n        }\r\n        return clsName;\r\n    }\r\n    \r\n    /**\r\n     * 是不是有附件名称\r\n     * @param name \r\n     */\r\n    hasFileName(name): boolean {\r\n        if (!name) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    /**\r\n     * 选择或取消所有\r\n     * @param ev \r\n     */\r\n    selectOrCancelAllHandler(ev) {\r\n        if (ev['checked']) {\r\n            // 全选\r\n            this.fileInfos.forEach(item => {\r\n                item.checked = true;\r\n            });\r\n            this.multiSelected = [...this.fileInfos];\r\n            this.selectAllBtnChecked = true;\r\n\r\n        } else {\r\n            // 取消\r\n            this.multiSelected = [];\r\n            this.fileInfos.forEach(item => {\r\n                item.checked = false;\r\n            });\r\n            this.selectAllBtnChecked = false;\r\n        }\r\n        this.cd.detectChanges();\r\n    }\r\n    /**\r\n     * 显示隐藏输入名称\r\n     */\r\n    toggleRenameInput(ev) {\r\n        ev.stopPropagation();\r\n        this.showRenameInput = !this.showRenameInput;\r\n        if (!this.multiRenameRef.nativeElement.value) {\r\n            this.multiRenameRef.nativeElement.value = this.defaultRename;\r\n        }\r\n    }\r\n}\r\n","import {\r\n    Component,\r\n    OnInit,\r\n    Input,\r\n    Output,\r\n    EventEmitter,\r\n    HostBinding,\r\n} from \"@angular/core\";\r\n\r\n@Component({\r\n    selector: \"f-file-preview-checkbox\",\r\n    templateUrl: \"./preview-checkbox.component.html\",\r\n    styleUrls: [],\r\n})\r\nexport class PreviewCheckboxComponent implements OnInit {\r\n    @HostBinding(\"class.align-middle\") cls1 = true;\r\n    @HostBinding(\"class.d-inline-flex\") cls2 = true;\r\n    @HostBinding(\"class.preview-checkbox\") cls3 = true;\r\n\r\n    @Input() checked: boolean = false;\r\n    @Input() id: string;\r\n    @Input() disabled: boolean = false;\r\n\r\n    @Input() showDragBar = false;\r\n\r\n    @Output() checkedChange = new EventEmitter();\r\n\r\n    constructor() { }\r\n\r\n    ngOnInit() { }\r\n\r\n    clickHandler(event) {\r\n        event.stopPropagation();\r\n        if (!this.disabled) {\r\n            this.checked = !this.checked;\r\n            this.checkedChange.emit({ checked: this.checked, id: this.id });\r\n        }\r\n    }\r\n}\r\n","import { Component, OnInit, Input, ElementRef, ViewChild, AfterViewInit, HostBinding, SimpleChange } from '@angular/core';\r\nimport { FUploadFileExtend } from '../../model';\r\n\r\n@Component({\r\n  selector: 'ffile-multi-download-info',\r\n  templateUrl: './multi-download-info.component.html',\r\n  styleUrls: ['./multi-download-info.component.css']\r\n})\r\nexport class MultiDownloadInfoComponent implements OnInit,AfterViewInit {\r\n  @HostBinding('class.ffile-multi-download-info') cls=true;\r\n  @ViewChild('multiRenameInput') multiRenameRef: ElementRef;\r\n  // 记载下载数据\r\n  private _downloadInfos: FUploadFileExtend[] = [];\r\n  @Input()\r\n  set downloadInfos(value) {\r\n    if (value && value.length > 0) {\r\n      this._downloadInfos = value;\r\n      if (!this._downloadName) {\r\n        this.downloadName = this.getName(this._downloadInfos[0]['name']);\r\n      }\r\n    }\r\n  }\r\n  get downloadInfos() {\r\n    return this._downloadInfos;\r\n  }\r\n  // 默认名称\r\n  private _downloadName = '';\r\n  @Input()\r\n  set downloadName(value: string) {\r\n    this._downloadName=value;    \r\n  }\r\n  get downloadName() {\r\n    if(!this._downloadName&&this._downloadInfos.length>0){\r\n      this._downloadName = this.getName(this._downloadInfos[0]['name']);\r\n    }    \r\n    return this._downloadName;\r\n  }\r\n\r\n  fileTypeCls = '';\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n   \r\n  }\r\n  ngAfterViewInit(){\r\n    //this.multiRenameRef.nativeElement.value = this.downloadName;\r\n  }\r\n  /**\r\n   * 获取下载名称\r\n   */\r\n  getDownloadName() {\r\n    return  this.multiRenameRef.nativeElement.value;\r\n  }\r\n  private getName(name: string) {\r\n    if (name.lastIndexOf('.') > 0) {\r\n      return name.substring(0, name.lastIndexOf('.'));\r\n    }\r\n    return '';\r\n  }\r\n\r\n  getFileTypeClassName(filename: string) {\r\n\r\n  }\r\n}\r\n","export const FARRIS_UPLOADFILE_LOCALEDATA = {\r\n    en: {\r\n        uploadAndPreview: {\r\n            downloadTitle: 'Download Files',\r\n            downloadCount: '{0} files in total.',\r\n            ok: 'Ok',\r\n            cancel: 'Cancel',\r\n            uploadSelectText: 'Select Files',\r\n            newName: 'New name',\r\n            filesCount: '<span class=\"count\">{0}</span> files in total.',\r\n            selectCount: '（<span class=\"count-selected\">{0}</span> files selected.）',\r\n            download: 'Download',\r\n            delete: 'Delete',\r\n            authMsg: 'You are not authorized to operate attachments',\r\n            nofiles: 'No attachment information',\r\n            uploading: 'Uploading...',\r\n            uploadSuccess: 'Upload succeeded',\r\n            successed: 'Uploaded',\r\n            supportType: 'Support Type',\r\n            maxSize: 'Maximum size of a single file',\r\n            maxFileCount: 'Maximum number of files',\r\n            columns: {\r\n                name: 'File name',\r\n                size: 'Size',\r\n                createTime: 'Date',\r\n                state: 'Statue',\r\n                action: 'Action'\r\n            },\r\n            tips: {\r\n                download: 'Download this file',\r\n                preview:  'Preview this file',\r\n                remove:  'Delete this file',\r\n                edit: 'Edit this file',\r\n                notedit: 'This type of file does not support online editing'\r\n            }\r\n        }\r\n    },\r\n    'zh-CHS':{\r\n        uploadAndPreview: {\r\n            downloadTitle: '附件下载',\r\n            downloadCount: '等{0}个文件',\r\n            ok: '确定',\r\n            cancel: '取消',\r\n            newName: '文件名',\r\n            uploadSelectText: '上传附件',\r\n            filesCount: '共<span class=\"count\">{0}</span>个附件',\r\n            selectCount: '（已选<span class=\"count-selected\">{0}</span>个）',\r\n            download: '下载',\r\n            delete: '删除',\r\n            authMsg: '您无权操作附件',\r\n            nofiles: '无附件信息',\r\n            uploading: '正在上传...',\r\n            uploadSuccess: '上传成功',\r\n            successed: '已上传',\r\n            supportType: '支持类型',\r\n            maxSize: '单个文件限制',\r\n            maxFileCount: '文件总数限制',\r\n            columns: {\r\n                name: '文件名',\r\n                size: '大小',\r\n                createTime: '日期',\r\n                state: '状态',\r\n                action: '操作'\r\n            },\r\n            tips: {\r\n                download: '下载',\r\n                preview:  '预览',\r\n                remove:  '删除',\r\n                edit: '编辑',\r\n                notedit: '此类型文件不支持在线编辑'\r\n            }\r\n        }\r\n    },\r\n    'zh-CHT': {\r\n        uploadAndPreview: {\r\n            downloadTitle: '附件下載',\r\n            downloadCount: '等{0}個文件',\r\n            ok: '確定',\r\n            cancel: '取消',\r\n            newName: '文件名',\r\n            uploadSelectText: '上傳附件',\r\n            filesCount: '共<span class=\"count\">{0}</span>個附件',\r\n            selectCount: '（已選<span class=\"count-selected\">{0}</span>個）',\r\n            download: '下載',\r\n            delete: '刪除',\r\n            authMsg: '您無權操作附件',\r\n            nofiles: '無附件信息',\r\n            uploading: '正在上傳...',\r\n            uploadSuccess: '上傳成功',\r\n            successed: '已上傳',\r\n            supportType: '支持類型',\r\n            maxSize: '單個文件限制',\r\n            maxFileCount: '文件總數限制',\r\n            columns: {\r\n                name: '文件名',\r\n                size: '大小',\r\n                createTime: '日期',\r\n                state: '狀態',\r\n                action: '操作'\r\n            },\r\n            tips: {\r\n                download: '下載',\r\n                preview:  '預覽',\r\n                remove:  '删除',\r\n                edit: '編輯',\r\n                notedit: '此類型文件不支持在線編輯'\r\n            }\r\n        }\r\n    }\r\n}","import {\r\n    Component,\r\n    OnInit,\r\n    AfterViewInit,\r\n    ElementRef,\r\n    Input,\r\n    Output,\r\n    EventEmitter,\r\n    HostBinding,\r\n    ViewChild,\r\n    TemplateRef,\r\n    NgZone,\r\n    ChangeDetectorRef,\r\n    OnChanges,\r\n    SimpleChanges,\r\n    ViewEncapsulation,\r\n    Optional,\r\n} from \"@angular/core\";\r\nimport { NotifyService, NotifyOptions } from \"@farris/ui-notify\";\r\nimport { BsModalService } from \"@farris/ui-modal\";\r\nimport {\r\n    FFileUploadAPIService,\r\n    FFileUploaderService,\r\n} from \"../../service/index\";\r\nimport { FFileSelectDirective } from \"../../directive/index\";\r\nimport { MultiDownloadInfoComponent } from \"../multi-download-info/multi-download-info.component\";\r\nimport {\r\n    UploadOutput,\r\n    UploadInput,\r\n    UploadFile,\r\n    UploaderOptions,\r\n    FUploadFileExtend,\r\n    DocMetaProperty,\r\n    UploadStatus,\r\n} from \"../../model/index\";\r\nimport { Observable, Subject } from \"rxjs\";\r\nimport { FFileUtils } from \"../../utils/index\";\r\nimport {\r\n    trigger,\r\n    style,\r\n    state,\r\n    animate,\r\n    transition,\r\n} from \"@angular/animations\";\r\n\r\nimport ResizeObserver from \"resize-observer-polyfill\";\r\nimport { LocaleService } from \"@farris/ui-locale\";\r\nimport { FARRIS_UPLOADFILE_LOCALEDATA } from \"../../locale\";\r\nimport { DateTimeHelperService } from \"@farris/ui-common/date\";\r\n\r\nexport type CanEditableFn = (fileInfo: any) => boolean;\r\nexport type FileCanEditable = CanEditableFn | boolean;\r\nexport enum DocModeType {\r\n    Normal='normal', //默认模式，不开启修订模式，隐藏标记\r\n    RevisionOnly='revisionOnly',//仅修订模式，开启修订模式，但是用户不可接受或拒绝修订、不可接受所有修订\r\n    Admin='admin'//开启修订，用户可接受或拒绝修订、可接受所有修订\r\n}\r\n\r\n@Component({\r\n    selector: \"f-file-upload-and-preview\",\r\n    templateUrl: \"./upload-and-preview.component.html\",\r\n    styleUrls: [\"./upload-and-preview.component.css\"],\r\n    providers: [FFileUploaderService],\r\n    animations: [\r\n        trigger(\"hideUploaded\", [\r\n            state(\"show\", style({ opacity: 1, height: \"*\" })),\r\n            state(\"hide\", style({ opacity: 0, height: 0 })),\r\n            // transition('* => void', [\r\n            //   style({ opacity: 1}),\r\n            //   animate(200, style({ opacity: 0}))\r\n            // ])\r\n            transition(\"* => hide\", animate(\"0.5s\")),\r\n        ]),\r\n    ],\r\n    encapsulation: ViewEncapsulation.None,\r\n})\r\nexport class UploadAndPreviewComponent\r\n    implements OnInit, AfterViewInit, OnChanges {\r\n    @HostBinding(\"class.ffileUploadAndPreview\") cls = true;\r\n    @HostBinding(\"class.ffileUploadAndPreview-content-fill\") get fillState() {\r\n        return this.contentFill;\r\n    }\r\n    // 预览模板\r\n    @ViewChild(\"previewFileNameTmpl\") previewFileNameTmpl: TemplateRef<void>;\r\n    // 文件大小模板\r\n    @ViewChild(\"fileSizeTmpl\") fileSizeTmpl: TemplateRef<void>;\r\n    // 文件状态模板\r\n    @ViewChild(\"uapStateTmpl\") uapStateTmpl: TemplateRef<void>;\r\n    // 预览操作模板\r\n    @ViewChild(\"previewActionTmpl\") previewActionTmpl: TemplateRef<void>;\r\n    // 预览操作模板\r\n    @ViewChild(\"previewDateTmpl\") previewDateTmpl: TemplateRef<void>;\r\n    // 上传操作模板\r\n    @ViewChild(\"uploadFileNameTmpl\") uploadFileNameTmpl: TemplateRef<void>;\r\n    /**\r\n     * 每个组可以设置特殊服务参数，来覆盖默认的统一模块级配置\r\n     */\r\n    @Input()\r\n    set extendServerConfig(config: any) {\r\n        if (config) {\r\n            this.fileUploaderSer.setExtendServerConfig(config);\r\n        }\r\n    }\r\n    // 内容区域填充\r\n    @Input() contentFill = false;\r\n    /** 启用手动调整展示顺序 */\r\n    @Input() enableOrder = false;\r\n    /** 排序字段 */\r\n    @Input() orderField = \"order\";\r\n    /** 是否允许编辑文档，默认为 false */\r\n    @Input() editfile: FileCanEditable = false;\r\n    // doc文档打开模式，预设3种模式，默认normal\r\n    private _docMode=DocModeType.Normal;\r\n    @Input() \r\n    set docMode(value){\r\n        switch(value){\r\n            case DocModeType.Normal:\r\n            case DocModeType.Admin:\r\n            case DocModeType.RevisionOnly:\r\n                this._docMode=value;\r\n                break;\r\n            default:\r\n             this._docMode=DocModeType.Normal;   \r\n        }\r\n    }\r\n    get docMode(){\r\n        return this._docMode;\r\n    }\r\n    private _renameFromDialog = \"\";\r\n    // 记录列字段\r\n    private _previewColumnsFields = [];\r\n    // 预置列信息\r\n    private _presetPreviewColumns = [\r\n        { field: \"name\", width: 200, title: \"文件名\", checkbox: true },\r\n        { field: \"size\", width: 100, title: \"大小\" },\r\n        { field: \"createTime\", width: 100, title: \"日期\" },\r\n        { field: \"state\", width: 100, title: \"状态\" },\r\n        { field: \"action\", width: 100, title: \"操作\" },\r\n    ];\r\n    // 内部记录列信息\r\n    private _previewColumns = [];\r\n    @Input()\r\n    set previewColumns(value) {\r\n        if (value && value.length > 0) {\r\n            this._previewColumns = [...value];\r\n        } else {\r\n            this._presetPreviewColumns = [...this._presetPreviewColumns];\r\n        }\r\n        this.getFieldsFromColumns();\r\n    }\r\n    get previewColumns() {\r\n        return this._previewColumns;\r\n    }\r\n    // 格式化预览数据\r\n    private _fileInfos: FUploadFileExtend[] = [];\r\n    @Input()\r\n    set fileInfos(val: FUploadFileExtend[]) {\r\n        this._fileInfos = this.formatPreviewDatas(val);\r\n        this._renameFromDialog = \"\";\r\n    }\r\n    get fileInfos(): FUploadFileExtend[] {\r\n        return this._fileInfos;\r\n    }\r\n    /**\r\n     * 附件预览配置---------------------------------------开始\r\n     */\r\n    @Input() previewDateFormat = \"yyyy-MM-dd\";\r\n    // 只读的状态，控制附件是否可删除\r\n    // 默认处于查看状态\r\n    @Input() previewReadonly = true;\r\n\r\n    @Input() previewVisible = true;\r\n    // 是否启用批量操作\r\n    @Input() previewEnableMulti = true;\r\n    // 预览显示类别\r\n    @Input() previewShowType = \"list\";\r\n    // 启用重命名\r\n    @Input() previewEnableRename = true;\r\n    // 默认重命名\r\n    @Input() previewDefaultRename = \"\";\r\n    // 附件预览，预览事件\r\n    @Output() filePreviewEvent = new EventEmitter<FUploadFileExtend>();\r\n    // 附件预览，下载事件，抛出对象给第三方处理\r\n    @Output() fileDownloadEvent = new EventEmitter<{\r\n        fileInfos: FUploadFileExtend[];\r\n        name: string;\r\n    }>();\r\n    // 附件预览，多选事件\r\n    @Output() fPreviewMultiSelectedEvent = new EventEmitter<\r\n        FUploadFileExtend[]\r\n    >();\r\n    // 附件预览，删除事件，抛出对象给第三方处理\r\n    @Output() fileRemoveEvent = new EventEmitter<FUploadFileExtend[]>();\r\n    // 全选状态\r\n    previewSelectAllBtnChecked = false;\r\n    // 记录选中数据\r\n    previewMultiSelected: FUploadFileExtend[] = [];\r\n    // 构造预览的配置数据\r\n    get previewSettings() {\r\n        return {\r\n            readonly: this.previewReadonly,\r\n            visible: this.previewVisible,\r\n            enableMulti: this.previewEnableMulti,\r\n            enableRename: this.previewEnableRename,\r\n        };\r\n    }\r\n    /**\r\n     * 附件预览配置---------------------------------------结束\r\n     */\r\n\r\n    /**\r\n     * 附件上传配置---------------------------------------开始\r\n     */\r\n    // 附件上传选择指令\r\n    @ViewChild(FFileSelectDirective) fileUpload: FFileSelectDirective;\r\n    // 附件上传部分禁用状态\r\n    @Input() uploadDisabled = false;\r\n    private tUploadVisible = true;\r\n\r\n    // 附件上传部分是否可见\r\n    @Input()\r\n    set uploadVisible(value) {\r\n        this.tUploadVisible = value;\r\n        if (!value) {\r\n            this.uploadReset();\r\n        }\r\n    }\r\n    get uploadVisible() {\r\n        return this.tUploadVisible;\r\n    }\r\n    // 需要重置,通过不断的赋值来改变\r\n    @Input() uploadNeedReset: Observable<any> = new Subject();\r\n    // 启用选择文件按钮\r\n    @Input() uploadEnableSelect = true;\r\n    // 选择文件按钮上传问题\r\n    @Input() uploadSelectText = '';\r\n    // 启用多选\r\n    @Input() uploadEnableMulti = true;\r\n    // 已经上传文件\r\n    @Input() uploadedCount = 0;\r\n    // 公共的扩展数据\r\n    @Input() extendDatas: {\r\n        [key: string]: any;\r\n        extProperty?: DocMetaProperty | null; //\r\n    };\r\n\r\n    /** 整个控件禁用 */\r\n    @Input() disabled = false;\r\n    /** 禁止下载 */\r\n    @Input() noDownload = false;\r\n    /** 禁止预览 */\r\n    @Input() noPreview=false;\r\n\r\n    @Input()\r\n    set uploadOptions(uploadOpts: UploaderOptions) {\r\n        if (uploadOpts) {\r\n            if (uploadOpts.hasOwnProperty(\"allowedContentTypes\")) {\r\n                this.allowedContentTypes = uploadOpts.allowedContentTypes.join(\",\");\r\n                this.allowedContentTypes =\r\n                    this.allowedContentTypes == \"\" ? \"*\" : this.allowedContentTypes;\r\n            }\r\n            if (uploadOpts.hasOwnProperty(\"maxUploads\")) {\r\n                this.maxUploads = uploadOpts.maxUploads;\r\n            }\r\n            if (uploadOpts.hasOwnProperty(\"maxFileSize\")) {\r\n                this.maxFileSize = FFileUtils.humanizeBytes(\r\n                    1024 * 1024 * uploadOpts.maxFileSize\r\n                );\r\n            }\r\n            this.selfUploadOpts = Object.assign(this.selfUploadOpts, uploadOpts);\r\n        }\r\n    }\r\n    get uploadOptions() {\r\n        return this.selfUploadOpts;\r\n    }\r\n\r\n    @Input() customInfo: any;\r\n    // 附件上传中，上传完成抛出的事件\r\n    @Output() fUploadDoneEvent = new EventEmitter<FUploadFileExtend[]>();\r\n    // 附件上传中，删除附件事件\r\n    @Output() fUploadRemovedEvent = new EventEmitter<FUploadFileExtend[]>();\r\n\r\n    /** 文件放下事件 */\r\n    @Output() afterOrdered = new EventEmitter();\r\n\r\n    @ViewChild(\"uaptb\") uploadAndPreviewTbodyRef: ElementRef<any>;\r\n\r\n    private uploadAndPreviewTableHeader: ElementRef = null;\r\n    private uploadAndPreviewTableHeaderCreated$ = new Subject();\r\n    @ViewChild(\"uapth\") set uploadAndPreviewTheadRef(th: ElementRef) {\r\n        if (th) {\r\n            this.uploadAndPreviewTableHeader = th;\r\n            this.setColumnWidth();\r\n            this.ro.observe(th.nativeElement);\r\n            this.uploadAndPreviewTableHeaderCreated$.next(th);\r\n        } else {\r\n            this.uploadAndPreviewTableHeader = null;\r\n            if (this.ro) {\r\n                this.ro.disconnect();\r\n            }\r\n            this.uploadAndPreviewTableHeaderCreated$.next(null);\r\n        }\r\n    }\r\n    get uploadSettings() {\r\n        return {\r\n            disabled: this.uploadDisabled,\r\n            visible: this.uploadVisible,\r\n            enableMulti: this.uploadEnableMulti,\r\n            extendDatas: this.extendDatas,\r\n        };\r\n    }\r\n    // 允许上传的文件类型\r\n    allowedContentTypes = \"*\";\r\n    // 默认不限制附件上传个数\r\n    maxUploads = 0;\r\n    // 单位KB，默认是12M\r\n    maxFileSize = \"12MB\";\r\n    // 记录文件个数\r\n    uploadFiles: UploadOutput[];\r\n    // 标记通过选择按钮处理的事件\r\n    uploadSelectInput: EventEmitter<UploadInput>;\r\n    private selfUploadOpts: UploaderOptions = {};\r\n\r\n    private ro: ResizeObserver | null = null;\r\n\r\n    private localSer: LocaleService = null;\r\n\r\n    private dateHlp: DateTimeHelperService;\r\n\r\n    tips = {\r\n        download: '下载',\r\n        preview: '预览',\r\n        remove: '删除',\r\n        edit: '编辑',\r\n        notedit: '此类型文件不支持在线编辑'\r\n    }\r\n\r\n    /**\r\n     * 附件上传配置---------------------------------------结束\r\n     */\r\n\r\n    /**\r\n     *\r\n     * @param el\r\n     * @param uploadAPISer\r\n     * @param fileUploaderSer\r\n     * @param notifyService\r\n     * @param ngZone\r\n     */\r\n    constructor(\r\n        private el: ElementRef,\r\n        private uploadAPISer: FFileUploadAPIService,\r\n        private fileUploaderSer: FFileUploaderService,\r\n        private notifyService: NotifyService,\r\n        private ngZone: NgZone,\r\n        private modalSer: BsModalService,\r\n        private cd: ChangeDetectorRef\r\n    ) {\r\n        this.uploadFiles = [];\r\n        this.uploadSelectInput = new EventEmitter<UploadInput>();\r\n        // 重置----------可能有问题\r\n        this.uploadNeedReset.subscribe((data) => {\r\n            this.uploadReset();\r\n        });\r\n\r\n        this.ro = new ResizeObserver((e) => {\r\n            this.setColumnWidth();\r\n        });\r\n\r\n        this.localSer = this.notifyService.localeService;\r\n        this.localSer.setLocaleData(FARRIS_UPLOADFILE_LOCALEDATA);\r\n\r\n        this._presetPreviewColumns.forEach(col => {\r\n            col.title = this.localSer.getValue(`uploadAndPreview.columns.${col.field}`);\r\n        });\r\n\r\n        this.tips.download = this.localSer.getValue('uploadAndPreview.tips.download');\r\n        this.tips.preview = this.localSer.getValue('uploadAndPreview.tips.preview');\r\n        this.tips.remove = this.localSer.getValue('uploadAndPreview.tips.remove');\r\n        this.tips.edit = this.localSer.getValue('uploadAndPreview.tips.edit');\r\n        this.tips.notedit = this.localSer.getValue('uploadAndPreview.tips.notedit');\r\n\r\n        this.dateHlp = new DateTimeHelperService();\r\n    }\r\n\r\n    ngOnInit() {\r\n        if (this._previewColumns.length == 0) {\r\n            this.previewColumns = [...this._presetPreviewColumns];\r\n        }\r\n\r\n        if (!this.uploadSelectText) {\r\n            this.uploadSelectText = this.localSer.getValue('uploadAndPreview.uploadSelectText') || '上传附件';\r\n        }\r\n    }\r\n    ngAfterViewInit() { }\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        const {\r\n            previewReadonly,\r\n            previewVisible,\r\n            previewEnableMulti,\r\n            previewDefaultRename,\r\n        } = changes;\r\n        if (previewReadonly || previewVisible || previewEnableMulti) {\r\n            // 重置附件预览\r\n            this.previewMultiSelected = [];\r\n            this.fileInfos.forEach((item) => {\r\n                item.checked = false;\r\n            });\r\n            this.previewSelectAllBtnChecked = false;\r\n            this._renameFromDialog = \"\";\r\n        }\r\n        if (previewDefaultRename) {\r\n            // 重置预览重命名记录\r\n            this._renameFromDialog = \"\";\r\n        }\r\n    }\r\n    /**\r\n     * 选择或取消所有\r\n     * @param ev\r\n     */\r\n    selectOrCancelAllHandler(ev) {\r\n        if (ev[\"checked\"]) {\r\n            // 全选\r\n            this.fileInfos.forEach((item) => {\r\n                item.checked = true;\r\n            });\r\n            this.previewMultiSelected = [...this.fileInfos];\r\n            this.previewSelectAllBtnChecked = true;\r\n        } else {\r\n            // 取消\r\n            this.previewMultiSelected = [];\r\n            this.fileInfos.forEach((item) => {\r\n                item.checked = false;\r\n            });\r\n            this.previewSelectAllBtnChecked = false;\r\n        }\r\n    }\r\n    /**\r\n     * 格式化文件大小\r\n     * @param bytes\r\n     */\r\n    formateBytes(bytes) {\r\n        return FFileUtils.humanizeBytes(bytes);\r\n    }\r\n    /**\r\n     * 获取文档类型对应的class\r\n     * @param fileName\r\n     */\r\n    getFileTypeClassName(fileName) {\r\n        let clsName = \"ffilepreview--filetype\";\r\n        // 如果名称为空\r\n        if (!fileName) {\r\n            return clsName + \"-any\";\r\n        }\r\n        let lastDotIndex = fileName.lastIndexOf(\".\");\r\n        let fileSuffix = \"\";\r\n        if (lastDotIndex > -1) {\r\n            fileSuffix = fileName.substring(lastDotIndex + 1).toLocaleLowerCase();\r\n        }\r\n        switch (fileSuffix) {\r\n            case \"pdf\":\r\n                clsName += \"-pdf\";\r\n                break;\r\n            case \"jpeg\":\r\n            case \"jpg\":\r\n            case \"gif\":\r\n            case \"svg\":\r\n            case \"png\":\r\n            case \"bmp\":\r\n                clsName += \"-img\";\r\n                break;\r\n            case \"ppt\":\r\n            case \"pptx\":\r\n                clsName += \"-ppt\";\r\n                break;\r\n            case \"doc\":\r\n            case \"docx\":\r\n                clsName += \"-doc\";\r\n                break;\r\n            case \"xls\":\r\n            case \"xlsx\":\r\n                clsName += \"-xls\";\r\n                break;\r\n            case \"txt\":\r\n                clsName += \"-txt\";\r\n                break;\r\n            case \"zip\":\r\n                clsName += \"-zip\";\r\n                break;\r\n            case \"wps\":\r\n                clsName += \"-wps\";\r\n                break;\r\n            case \"wpt\":\r\n                clsName += \"-wpt\";\r\n                break;\r\n            default:\r\n                clsName += \"-any\";\r\n        }\r\n        return clsName;\r\n    }\r\n    /**\r\n     * 格式化预览数据\r\n     * @param val\r\n     */\r\n    private formatPreviewDatas(val) {\r\n        if (!val.length || this.previewMultiSelected.length !== val.length) {\r\n            this.previewSelectAllBtnChecked = false;\r\n        }\r\n\r\n\r\n        let formatValue = val.map((item: FUploadFileExtend) => {\r\n            if (!item.hasOwnProperty(\"size\")) {\r\n                item[\"size\"] = undefined;\r\n            }\r\n            if (!item.hasOwnProperty(\"createTime\")) {\r\n                item[\"createTime\"] = undefined;\r\n            }\r\n\r\n            return item;\r\n        });\r\n\r\n        if (this.enableOrder && this.orderField) {\r\n            formatValue.sort(this.sortPreviewData(this.orderField));\r\n        } else {\r\n            formatValue.sort(this.sortPreviewData(\"createTime\"));\r\n        }\r\n        if (this.previewEnableMulti) {\r\n            let newFormatValue = formatValue.map((item: FUploadFileExtend) => {\r\n                item[\"checked\"] = !!this.previewMultiSelected.find(n => n.id === item.id) || this.previewSelectAllBtnChecked;\r\n                return item;\r\n            });\r\n            // 归集已选数据\r\n            // if (this.previewSelectAllBtnChecked) {\r\n            //     this.previewMultiSelected = [...newFormatValue].filter(n => n.checked);\r\n            // } else {\r\n            //     this.previewMultiSelected = [];\r\n            // }\r\n            this.previewMultiSelected = [...newFormatValue].filter(n => n.checked);\r\n            // 返回格式化数据\r\n            return newFormatValue;\r\n        } else {\r\n            return formatValue;\r\n        }\r\n    }\r\n\r\n\r\n    private getValue(field: string, data: any) {\r\n        if (!data) {\r\n            return \"\";\r\n        }\r\n        let resultVal = \"\";\r\n        if (field.indexOf(\".\") === -1 && data.hasOwnProperty(field)) {\r\n            resultVal = data[field];\r\n        } else {\r\n            resultVal = field.split(\".\").reduce((obj, key) => {\r\n                if (obj) {\r\n                    return obj[key];\r\n                } else {\r\n                    return null;\r\n                }\r\n            }, data);\r\n        }\r\n        return resultVal;\r\n    }\r\n\r\n    private sortPreviewData(key) {\r\n        const _this = this;\r\n        return (x, y) => {\r\n            if (!x[key]) {\r\n                return 1;\r\n            }\r\n            if (!y[key]) {\r\n                return -1;\r\n            }\r\n\r\n            if (_this['orderField'] && key === _this['orderField']) {\r\n                let a = \"\";\r\n                let b = \"\";\r\n                if (key.indexOf(\".\") > -1) {\r\n                    a = _this.getValue(key, x);\r\n                    b = _this.getValue(key, y);\r\n                } else {\r\n                    a = x[key];\r\n                    b = y[key];\r\n                }\r\n                return a > b ? 1 : -1;\r\n            } else {\r\n                var oDate1 = new Date(x[key]);\r\n                var oDate2 = new Date(y[key]);\r\n                return oDate1.getTime() > oDate2.getTime() ? -1 : 1;\r\n            }\r\n        };\r\n    };\r\n\r\n    /**\r\n     * 格式化处理数据\r\n     */\r\n    private getFieldsFromColumns() {\r\n        this._previewColumnsFields = this._previewColumns.map(\r\n            (item) => item[\"field\"]\r\n        );\r\n    }\r\n    /**\r\n     * 根据列获取对应的列模板\r\n     * @param columnInfo\r\n     */\r\n    getColumnTemplate(columnInfo, type = \"preview\") {\r\n        let result;\r\n        if (columnInfo.hasOwnProperty(\"template\") && columnInfo[\"template\"]) {\r\n            return columnInfo[\"template\"];\r\n        }\r\n        if (type == \"preview\") {\r\n            switch (columnInfo[\"field\"]) {\r\n                case \"state\":\r\n                    result = this[\"uapStateTmpl\"];\r\n                    break;\r\n                case \"name\":\r\n                    result = this[\"previewFileNameTmpl\"];\r\n                    break;\r\n                case \"action\":\r\n                    result = this[\"previewActionTmpl\"];\r\n                    break;\r\n                case \"size\":\r\n                    result = this[\"fileSizeTmpl\"];\r\n                    break;\r\n                case \"createTime\":\r\n                    result = this[\"previewDateTmpl\"];\r\n                    break;\r\n                default:\r\n                    result = \"\";\r\n            }\r\n        } else {\r\n            switch (columnInfo[\"field\"]) {\r\n                case \"state\":\r\n                    result = this[\"uapStateTmpl\"];\r\n                    break;\r\n                case \"name\":\r\n                    result = this[\"uploadFileNameTmpl\"];\r\n                    break;\r\n                case \"size\":\r\n                    result = this[\"fileSizeTmpl\"];\r\n                    break;\r\n                default:\r\n                    result = \"\";\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    /**\r\n     * 多选变更\r\n     */\r\n    previewMultiSelectChange(ev) {\r\n        let hasInArray = this.previewMultiSelected.findIndex(\r\n            (item) => item[\"id\"] == ev[\"id\"]\r\n        );\r\n        let findInArray = this.fileInfos.findIndex(\r\n            (item) => item[\"id\"] == ev[\"id\"]\r\n        );\r\n        if (findInArray > -1) {\r\n            this.fileInfos[findInArray][\"checked\"] = ev[\"checked\"];\r\n        }\r\n\r\n        if (ev[\"checked\"]) {\r\n            //选入\r\n            if (hasInArray == -1) {\r\n                if (findInArray > -1) {\r\n                    this.previewMultiSelected.push(this.fileInfos[findInArray]);\r\n                }\r\n            }\r\n        } else {\r\n            //移出\r\n            if (hasInArray > -1) {\r\n                this.previewMultiSelected.splice(hasInArray, 1);\r\n            }\r\n        }\r\n        // 判断是否全选\r\n        if (this.fileInfos.length > 0) {\r\n            if (this.previewMultiSelected.length == this.fileInfos.length) {\r\n                //都全选\r\n                this.previewSelectAllBtnChecked = true;\r\n            } else {\r\n                // 未全选\r\n                this.previewSelectAllBtnChecked = false;\r\n            }\r\n        }\r\n        // 抛出多选\r\n        this.fPreviewMultiSelectedEvent.emit(this.previewMultiSelected);\r\n    }\r\n    /**处理附件上传---------------------------------------------------------开始-- */\r\n    /**\r\n     * 统一触发 附件选择和拖拽附件的事件\r\n     * @param ev\r\n     */\r\n    private inputUploadEventEmit(ev: UploadInput) {\r\n        // 如果文件上传启用\r\n        if (this.uploadEnableSelect) {\r\n            this.uploadSelectInput.emit(ev);\r\n        }\r\n        // this.uploadDragInput.emit(ev);\r\n    }\r\n    /**单个文件上传 */\r\n    startUpload(file: UploadFile): void {\r\n        /**\r\n         * Todo:后续可以从上传区块上取内容进行扩展\r\n         */\r\n        const event: UploadInput = this.uploadAPISer.getAssignAPI(\r\n            \"multipartUpload\",\r\n            {\r\n                file: file,\r\n                type: \"multipartUpload\",\r\n                data: this.extendDatas,\r\n            }\r\n        );\r\n        this.inputUploadEventEmit(event);\r\n    }\r\n    // 重置方法\r\n    uploadReset() {\r\n        this.uploadFiles = [];\r\n        // 如果文件上传启用\r\n        if (this.uploadEnableSelect) {\r\n            this.fileUpload && this.fileUpload.reset();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 触发绑定\r\n     */\r\n    triggerFileSelect(ev) {\r\n        ev && ev.stopPropagation();\r\n        // 禁用时\r\n        if (this.uploadDisabled) {\r\n            return false;\r\n        }\r\n        this.fileUpload.elementRef.nativeElement.click();\r\n    }\r\n    /**\r\n     * 选择附件按钮，处理抛出事件\r\n     * @param output\r\n     */\r\n    selectUploadOutput(output: UploadOutput): void {\r\n        this.uploadOutputHandler(output);\r\n    }\r\n    /**\r\n     * allAddedToQueue 选中文件追加到队列\r\n     * @param output\r\n     */\r\n    private uploadOutputHandler(output: UploadOutput): void {\r\n        if (output.type === \"addedToQueue\" && typeof output.file !== \"undefined\") {\r\n            this.uploadFiles.push({ type: output.type, file: output.file });\r\n            // 开始上传\r\n            this.startUpload(output.file);\r\n        } else if (output.type === \"start\") {\r\n            // 开始上传\r\n            this.updateFilesState(output, \"\");\r\n        } else if (output.type == \"done\") {\r\n            // 上传完成\r\n            this.updateFilesState(output, \"done\");\r\n            this.fUploadDoneEvent.emit(\r\n                FFileUtils.changeUploadFileToFileExtend(output.files)\r\n            );\r\n\r\n            const newAddFiles = output.files.map(n => {\r\n                return {\r\n                    checked: false,\r\n                    id: n.id,\r\n                    name: n.name,\r\n                    size: n.size,\r\n                    createTime: this.dateHlp.formatTo(new Date(), 'yyyy-MM-dd HH:mm:ss')\r\n                }\r\n            })\r\n\r\n            this.fileInfos = [...newAddFiles, ...this.fileInfos];\r\n\r\n            // 上传完成后不在当前页面上显示\r\n            this.hideAfterLoaded(output);\r\n\r\n\r\n        } else if (\r\n            output.type === \"cancelled\" ||\r\n            output.type === \"removed\" ||\r\n            output.type == \"error\"\r\n        ) {\r\n            // 删除或者移除文件\r\n            this.uploadFiles = this.uploadFiles.filter((fileOutput: UploadOutput) => {\r\n                return (\r\n                    output.files.findIndex((item) => fileOutput.file.id == item.id) < 0\r\n                );\r\n            });\r\n            // 给出提示\r\n            this.showNotify(output);\r\n        } else if (\r\n            output.type === \"rejected\" &&\r\n            typeof output.file !== \"undefined\"\r\n        ) {\r\n            // 上传被拒绝\r\n            this.showNotify(output);\r\n        }\r\n    }\r\n    /**\r\n     * 临时删除附件\r\n     * @param output\r\n     */\r\n    private hideAfterLoaded(output: UploadOutput): void {\r\n        // 删除或者移除文件\r\n        let ids = output.files.map((fileItem) => fileItem.id);\r\n        this.uploadFiles = this.uploadFiles.filter((fileOutput: UploadOutput) => {\r\n            let tIndex = ids.findIndex((tId) => tId == fileOutput.file.id);\r\n            return tIndex > -1 ? false : true;\r\n        });\r\n        const event: UploadInput = this.uploadAPISer.getAssignAPI(\"hide\", {\r\n            type: \"hide\",\r\n            id: ids.join(\",\"),\r\n        });\r\n        this.inputUploadEventEmit(event);\r\n    }\r\n    /**\r\n     * 处理上传\r\n     * @param output\r\n     */\r\n    private showNotify(output) {\r\n        let notifyType = \"warning\";\r\n        if (output.type == \"cancelled\" || output.type == \"removed\") {\r\n            notifyType = \"success\";\r\n        }\r\n        let message = output.hasOwnProperty(\"message\") ? output[\"message\"] : \"\";\r\n        this.notifyService[notifyType](<NotifyOptions>{\r\n            msg: message,\r\n            timeout: 3000,\r\n        });\r\n    }\r\n    /**\r\n     * 更新附件的状态\r\n     * @param output\r\n     * @param eventType\r\n     */\r\n    private updateFilesState(output: UploadOutput, eventType) {\r\n        let startFiles = [];\r\n        if (output.hasOwnProperty(\"files\") && output.files.length > 0) {\r\n            // 此处更新界面可能有性能问题\r\n            startFiles = output.files;\r\n        } else if (typeof output.file !== \"undefined\") {\r\n            startFiles = [output.file];\r\n        }\r\n        eventType = eventType ? eventType : output.type;\r\n        startFiles.map((item) => {\r\n            const index = this.uploadFiles.findIndex(\r\n                (fileOutput) =>\r\n                    typeof item !== \"undefined\" && fileOutput.file.id === item.id\r\n            );\r\n            // 变更状态\r\n            if (index > -1) {\r\n                this.uploadFiles[index] = { type: eventType, file: item };\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * 是否判断有类型限制\r\n     */\r\n    judgeContentTypeLimit() {\r\n        let tTypes = this.allowedContentTypes.split(\",\");\r\n        let hasAllIndex = tTypes.findIndex((item) => {\r\n            return item == \"*\";\r\n        });\r\n        return hasAllIndex == -1;\r\n    }\r\n    /**\r\n     * 判断是否有文件大小的限制\r\n     */\r\n    judegeFileSizeLimit() {\r\n        return this.maxFileSize != \"0 Byte\";\r\n    }\r\n    /**\r\n     * 获取上传进度\r\n     */\r\n    getUploadProgress(uploadInfo: UploadOutput) {\r\n        if (uploadInfo[\"type\"] == \"done\") {\r\n            return 100;\r\n        }\r\n        if (uploadInfo[\"file\"][\"progress\"] && uploadInfo[\"file\"][\"progress\"]) {\r\n            if (uploadInfo[\"file\"][\"progress\"][\"status\"] == UploadStatus.Uploading) {\r\n                let tPercentage = uploadInfo[\"file\"][\"progress\"][\"data\"][\"percentage\"];\r\n                return tPercentage > 5 ? tPercentage : 5;\r\n            }\r\n            return 5;\r\n        }\r\n        return 5;\r\n    }\r\n    /**\r\n     * 处理显示\r\n     * @param ev\r\n     * @param fileInfo\r\n     */\r\n    getUploadFileSizeProgress(uploadInfo: UploadOutput) {\r\n        if (!uploadInfo) {\r\n            return \"\";\r\n        }\r\n        if (uploadInfo[\"type\"] == \"done\") {\r\n            return FFileUtils.humanizeBytes(uploadInfo.file.size);\r\n        }\r\n        let tPercentage = 5;\r\n        if (uploadInfo[\"file\"][\"progress\"] && uploadInfo[\"file\"][\"progress\"]) {\r\n            if (uploadInfo[\"file\"][\"progress\"][\"status\"] == UploadStatus.Uploading) {\r\n                tPercentage = uploadInfo[\"file\"][\"progress\"][\"data\"][\"percentage\"];\r\n                tPercentage = tPercentage > 5 ? tPercentage : 5;\r\n            }\r\n        }\r\n        return (\r\n            FFileUtils.humanizeBytes((uploadInfo.file.size * tPercentage) / 100) +\r\n            \"/\" +\r\n            FFileUtils.humanizeBytes(uploadInfo.file.size)\r\n        );\r\n    }\r\n\r\n    /**处理附件上传---------------------------------------------------------结束-- */\r\n\r\n    /**\r\n     * 预览\r\n     * @param ev\r\n     * @param fileInfo\r\n     */\r\n    filePreviewHandler(ev: Event, fileInfo: FUploadFileExtend) {\r\n        ev.stopImmediatePropagation();\r\n        //------------------------------TODO\r\n        if(this.noPreview){\r\n            return;\r\n        }\r\n        fileInfo.showDownload = !this.noDownload;\r\n        this.filePreviewEvent.emit(fileInfo);\r\n    }\r\n    /**\r\n     * 下载\r\n     * @param ev\r\n     * @param fileInfo\r\n     */\r\n    fileDownloadHandler(ev: Event, fileInfo: FUploadFileExtend) {\r\n        ev.stopImmediatePropagation();\r\n        this.fileDownloadEvent.emit({ fileInfos: [fileInfo], name: \"\" });\r\n    }\r\n    /**\r\n     * 删除数据\r\n     * @param ev\r\n     * @param fileInfo\r\n     */\r\n    fileRemoveHandler(ev: Event, fileInfo: FUploadFileExtend) {\r\n        ev.stopImmediatePropagation();\r\n        if (fileInfo.checked) {\r\n            this.previewMultiSelected = this.previewMultiSelected.filter(n => n.id !== fileInfo.id);\r\n        }\r\n        this.fileRemoveEvent.emit([fileInfo]);\r\n    }\r\n    /**\r\n     * 批量删除\r\n     * @param ev\r\n     */\r\n    multiFileRemoveHandler(ev: Event) {\r\n        ev.stopImmediatePropagation();\r\n        this.fileRemoveEvent.emit(this.previewMultiSelected);\r\n    }\r\n    fileMultiDownloadHandler(ev: Event) {\r\n        ev.stopImmediatePropagation();\r\n        let rename = \"\";\r\n        if (this.previewMultiSelected.length == 1) {\r\n            this.fileDownloadEvent.emit({\r\n                fileInfos: this.previewMultiSelected,\r\n                name: rename,\r\n            });\r\n            return;\r\n        }\r\n        // 启用了重命名\r\n        if (this.previewEnableRename) {\r\n            let self = this;\r\n            const dlgRef = this.modalSer.show(MultiDownloadInfoComponent, {\r\n                width: 440,\r\n                height: 200,\r\n                showMaxButton: false,\r\n                title: this.localSer.getValue('uploadAndPreview.downloadTitle') || \"附件下载\",\r\n                initialState: {\r\n                    fileTypeCls: this.getFileTypeClassName(self.previewMultiSelected[0].name),\r\n                    downloadInfos: self.previewMultiSelected,\r\n                    downloadName:\r\n                        self._renameFromDialog && !self.previewDefaultRename\r\n                            ? self._renameFromDialog\r\n                            : self.previewDefaultRename,\r\n                },\r\n                showButtons: true,\r\n                buttons: [\r\n                    {\r\n                        text: this.localSer.getValue('uploadAndPreview.cancel'),\r\n                        cls: \"btn btn-secondary\",\r\n                        handle: () => {\r\n                            dlgRef.close();\r\n                        },\r\n                    },\r\n                    {\r\n                        text: this.localSer.getValue('uploadAndPreview.ok'),\r\n                        cls: \"btn btn-primary\",\r\n                        handle: () => {\r\n                            const contentRef = dlgRef.content as MultiDownloadInfoComponent;\r\n                            rename = contentRef.getDownloadName();\r\n                            self.fileDownloadEvent.emit({\r\n                                fileInfos: self.previewMultiSelected,\r\n                                name: rename,\r\n                            });\r\n                            dlgRef.close();\r\n                        },\r\n                    },\r\n                ],\r\n            });\r\n        } else {\r\n            //未启用重命名\r\n            rename = this.getName(this.previewMultiSelected[0][\"name\"]);\r\n            this.fileDownloadEvent.emit({\r\n                fileInfos: this.previewMultiSelected,\r\n                name: rename,\r\n            });\r\n        }\r\n    }\r\n    private getName(name: string) {\r\n        if (name.lastIndexOf(\".\") > 0) {\r\n            return name.substring(0, name.lastIndexOf(\".\"));\r\n        }\r\n        return \"\";\r\n    }\r\n    showPreviewStateColumn(columnInfo) {\r\n        if (\r\n            columnInfo[\"field\"] == \"state\" &&\r\n            (this.uploadDisabled || !this.uploadVisible || this.noDownload)\r\n        ) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    /** 拖拽排序后事件 */\r\n    onOrderFileDrop($event) {\r\n        const { removedIndex, addedIndex, payload } = $event;\r\n\r\n        const removedItem = this.fileInfos.splice(removedIndex, 1);\r\n        this.fileInfos.splice(addedIndex, 0, ...removedItem);\r\n\r\n        this.cd.detectChanges();\r\n\r\n        const newOrderItems = this.fileInfos.map((n) => n.id);\r\n        this.afterOrdered.emit({ data: newOrderItems });\r\n    }\r\n\r\n    private setColumnWidth() {\r\n        if (this.uploadAndPreviewTableHeader && this.enableOrder) {\r\n            const tableWidth = this.uploadAndPreviewTableHeader.nativeElement.offsetWidth;\r\n            const cols = this.uploadAndPreviewTableHeader.nativeElement.querySelectorAll(\"th\");\r\n            const trs = this.uploadAndPreviewTbodyRef.nativeElement.querySelectorAll(\"tr\");\r\n\r\n            this.uploadAndPreviewTbodyRef.nativeElement.style.flexDirection = \"column\";\r\n            this.uploadAndPreviewTbodyRef.nativeElement.style.display = \"flex\";\r\n            this.uploadAndPreviewTbodyRef.nativeElement.style.width = tableWidth + \"px\";\r\n\r\n            Array.from(trs).forEach((tr: any) => {\r\n                tr.style.width = tableWidth + \"px\";\r\n                const tds = tr.querySelectorAll(\"td\");\r\n                Array.from(cols).forEach((th: any, index: number) => {\r\n                    tds[index].style.width = th.offsetWidth + \"px\";\r\n\r\n                    if(index === 0) {\r\n                        tds[index].querySelector('.uploadAndpreview--title-container').style.width = (th.offsetWidth - 56) + 'px';\r\n                    }\r\n                });\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n    editFileHandler($event, fileInfo: FUploadFileExtend) {\r\n        // console.log($event, fileInfo);\r\n\r\n        window.open(`/platform/runtime/dfs/editpage/index.html?id=${fileInfo.id}&docMode=${this.docMode}`);\r\n    }\r\n\r\n    canEdit(fileInfo: FUploadFileExtend) {\r\n        if (!fileInfo) {\r\n            return false;\r\n        }\r\n        const editType = ['doc', 'docx', 'xls', 'xlsx', 'ppt', 'pptx', 'txt', 'wps', 'wpt' ];\r\n        const extendName = fileInfo.name.substr(fileInfo.name.lastIndexOf('.') + 1).toLowerCase();\r\n        if (extendName) {\r\n            return editType.includes(extendName)\r\n        }\r\n\r\n        return false;\r\n    }\r\n}\r\n","import { Component, OnInit, Input, SimpleChanges, OnChanges } from '@angular/core';\r\n//进度条状态 默认normal\r\nexport type UploadProgressStatusType = 'success' | 'error' | 'active' | 'normal';\r\n\r\n// const statusColorMap = new Map([\r\n//   ['normal', '#388fff'],\r\n//   ['exception', '#f24645'],\r\n//   ['success', '#51bd78']\r\n// ]);\r\n@Component({\r\n  selector: 'upload-progress',\r\n  templateUrl: './upload-progress.component.html',\r\n  styleUrls: ['./upload-progress.component.css']\r\n})\r\nexport class UploadProgressComponent implements OnInit, OnChanges {\r\n  //是否显示进度条信息\r\n  @Input() showInfo: boolean = true;\r\n  //进度条状态 默认'normal'\r\n  @Input() status: UploadProgressStatusType;\r\n  //已完成的分段百分比\r\n  @Input() successPercent: number;\r\n  @Input() percent = 0;\r\n  @Input() maxWidth =0;\r\n  //存储的状态\r\n  private cachedStatus: UploadProgressStatusType = 'normal';\r\n  //计算的状态\r\n  private inferredStatus: UploadProgressStatusType = 'normal';\r\n\r\n  //获得进度条状态\r\n  get progressStatus(): UploadProgressStatusType {\r\n    return this.status || this.inferredStatus;\r\n  }\r\n  constructor() { }\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    const { status, percent, successPercent } = changes;\r\n    //状态变化\r\n    if (status) {\r\n      this.cachedStatus = this.status || this.cachedStatus;\r\n    }\r\n    //进度 已完成的分段百分比 变化\r\n    if (percent || successPercent) {\r\n      const fillAll = parseInt(this.percent.toString(), 10) >= 100;\r\n      if (fillAll) {\r\n        if ((this.isNotNil(this.successPercent) && this.successPercent! >= 100) || this.successPercent === undefined) {\r\n          this.inferredStatus = 'success';\r\n          // this.status = this.inferredStatus;\r\n        }\r\n      } else {\r\n        this.inferredStatus = this.cachedStatus;\r\n      }\r\n      this.status = this.inferredStatus;\r\n    }\r\n  }\r\n  ngOnInit() {\r\n  }\r\n\r\n  isNotNil<T>(value: T): value is NonNullable<T> {\r\n    return typeof value !== 'undefined' && value !== null;\r\n  }\r\n\r\n}\r\n","import {\r\n  Directive,\r\n  NgZone,\r\n  Injector,\r\n  Renderer2,\r\n  ElementRef,\r\n  AfterViewInit,\r\n  Input,\r\n  Output,\r\n  EventEmitter,\r\n  OnDestroy,\r\n} from \"@angular/core\";\r\nimport {\r\n  dropHandlers,\r\n  smoothDnD as SmoothDndForVisible,\r\n  DropResult,\r\n  ContainerOptions,\r\n  constants,\r\n} from \"@farris/smooth-dnd\";\r\n\r\nconst { wrapperClass, animationClass } = constants;\r\nSmoothDndForVisible.dropHandler = dropHandlers.reactDropHandler().handler;\r\nSmoothDndForVisible.wrapChild = false;\r\n\r\nexport interface DragStartEndInfo {\r\n  isSource: boolean;\r\n  payload: any;\r\n  willAcceptDrop: boolean;\r\n}\r\n\r\n@Directive({\r\n  selector: \"[upfile-order-drag]\",\r\n})\r\nexport class UploadFileOrderDragDirective implements AfterViewInit, OnDestroy {\r\n  private container: any;\r\n  @Input('upfile-order-drag') enableDrag = false;\r\n  @Output() drop = new EventEmitter();\r\n  @Input() options: ContainerOptions = {\r\n    behaviour: \"move\",\r\n    dragHandleSelector: \".upfile-drag-handle\",\r\n    dropPlaceholder: {\r\n      className: \"drop-group-field\",\r\n    },\r\n    getGhostParent: () => {\r\n      return document.body;\r\n    },\r\n    getChildPayload: this.getChildPayload.bind(this),\r\n    shouldAcceptDrop: (sourceContainerOptions, payload) => {\r\n      return true;\r\n    },\r\n    onDropReady: (dropResult: DropResult) => {\r\n      this.ngzone.run(() => {\r\n        this.onDropReady(dropResult);\r\n      });\r\n    },\r\n    onDrop: (dropResult: DropResult) => {\r\n      this.ngzone.run(() => {\r\n        this.drop.emit(dropResult);\r\n      });\r\n    },\r\n    onDragEnter: () => {\r\n      this.ngzone.run(() => {\r\n        this.onDragEnter();\r\n      });\r\n    },\r\n    onDragStart: (info: DragStartEndInfo) => {\r\n      this.ngzone.run(() => {\r\n        this.onDragStart(info);\r\n      });\r\n    },\r\n    onDragEnd: (info: DragStartEndInfo) => {\r\n      this.ngzone.run(() => {\r\n        this.onDragEnd(info);\r\n      });\r\n    },\r\n  };\r\n\r\n  constructor(\r\n    private ngzone: NgZone,\r\n    private injector: Injector,\r\n    private render: Renderer2,\r\n    private el: ElementRef\r\n  ) {}\r\n  ngAfterViewInit() {\r\n    if (this.enableDrag) {\r\n        this.initDnD();\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.disposeDnd();\r\n  }\r\n\r\n  private disposeDnd() {\r\n    if (this.container) {\r\n      this.container.dispose();\r\n      this.container = null;\r\n    }\r\n  }\r\n\r\n  private initDnD() {\r\n    this.disposeDnd();\r\n    this.container = SmoothDndForVisible(this.el.nativeElement, this.options);\r\n  }\r\n\r\n  private getChildPayload(index) {\r\n    return index;\r\n  }\r\n\r\n  private onDropReady(dropResult) {\r\n    // console.log('DROP READY', dropResult);\r\n  }\r\n\r\n  private onDragStart(info) {\r\n    // console.log(\"DRAG START\", info);\r\n  }\r\n\r\n  private onDragEnd(info) {\r\n    // console.log('DRAG END', info);\r\n  }\r\n\r\n  private onDragEnter() {\r\n    // console.log('DRAG ENTER');\r\n  }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n/**\r\n * 使用说明\r\n * let message = \"今天天气 {0}，处处好 {1}。\"\r\n * template:\r\n * <h1>{{ message| replaceX: '晴朗', '风光' }}</h1>\r\n * resule:\r\n * <h1>今天天气 晴朗，处处好 风光。</h1>\r\n */\r\n@Pipe({name: 'replaceX'})\r\nexport class UploadReplaceXPipe implements PipeTransform {\r\n    transform(value: any, ...args: any[]) {\r\n        args.forEach((v, i) => {\r\n            value = value.replace(`{${i}}`, v);\r\n        });\r\n\r\n        return value;\r\n    }\r\n}","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FFileDropDirective, FFileSelectDirective, FFilePreviewListTypeTemplateDirective, FFileUploadDirective, FFilePreviewToolbarTemplateDirective } from './directive/index';\r\nimport { FFileUploadComponent, FFileViewImageComponent, FFilePreviewComponent, PreviewCheckboxComponent } from './components/index';\r\nimport { UploadServerService } from './model/index';\r\nimport { FFileSizePipe, FFileDatePipe } from './pipe/index';\r\nimport { FFileUploadServerConfig, FFileUploadAPIServiceToken, FFileUploadDefaultService, FFileUploaderService } from './service/index';\r\nimport { NotifyModule } from '@farris/ui-notify';\r\nimport { ModalModule } from '@farris/ui-modal';\r\nimport { DateHelperModule } from '@farris/ui-common/date';\r\nimport { MessagerModule } from '@farris/ui-messager';\r\nimport { FAreaResponseModule } from '@farris/ui-area-response';\r\nimport { UploadAndPreviewComponent } from './components/upload-and-preview/upload-and-preview.component';\r\nimport { UploadProgressComponent } from './components/upload-progress/upload-progress.component';\r\nimport { MultiDownloadInfoComponent } from './components/multi-download-info/multi-download-info.component';\r\nimport { UploadFileOrderDragDirective } from './components/upload-and-preview/file-order-drag.directive';\r\nimport { LocaleModule } from '@farris/ui-locale';\r\nimport { UploadReplaceXPipe } from './components/upload-and-preview/replaceX.pipe';\r\nimport { FarrisCommonModule } from '@farris/ui-common';\r\n\r\n\r\n@NgModule({\r\n  declarations: [FFileDropDirective, FFileSelectDirective, FFileUploadComponent, \r\n    FFileViewImageComponent, FFilePreviewComponent, FFilePreviewListTypeTemplateDirective, FFileUploadDirective, \r\n    PreviewCheckboxComponent, FFilePreviewToolbarTemplateDirective, FFileSizePipe, UploadAndPreviewComponent, UploadProgressComponent, \r\n    FFileDatePipe,MultiDownloadInfoComponent, UploadFileOrderDragDirective,\r\n    UploadReplaceXPipe\r\n  ],\r\n  exports: [FFileDropDirective, FFileSelectDirective, FFileUploadComponent, FFileViewImageComponent, \r\n    FFilePreviewComponent, FFilePreviewListTypeTemplateDirective, FFileUploadDirective, FFilePreviewToolbarTemplateDirective, FFileSizePipe,\r\n    UploadAndPreviewComponent, UploadProgressComponent, FFileDatePipe, UploadFileOrderDragDirective],\r\n  imports: [\r\n    CommonModule,\r\n    NotifyModule, \r\n    MessagerModule,\r\n    FAreaResponseModule, \r\n    FarrisCommonModule,\r\n    DateHelperModule.forRoot(), \r\n    ModalModule.forRoot(),\r\n    LocaleModule.forRoot()\r\n  ],\r\n  providers: [\r\n    FFileUploaderService,\r\n    {\r\n      provide: UploadServerService,\r\n      useClass: FFileUploadDefaultService\r\n    }\r\n  ],\r\n  entryComponents:[\r\n    MultiDownloadInfoComponent\r\n  ]\r\n})\r\nexport class FFileUploadModule {\r\n  static forRoot(config?: FFileUploadServerConfig, uploadSer?: any): ModuleWithProviders {\r\n    return {\r\n      ngModule: FFileUploadModule,\r\n      providers: [\r\n        { provide: FFileUploadAPIServiceToken, useValue: config },\r\n        FFileUploaderService,\r\n        {\r\n          provide: UploadServerService,\r\n          useClass: uploadSer || FFileUploadDefaultService\r\n        }\r\n      ]\r\n    };\r\n  }\r\n}\r\n"],"names":["InjectionToken","Injectable","Optional","Inject","EventEmitter","Subject","mergeMap","Observable","finalize","tslib_1.__extends","Directive","ElementRef","Input","Output","TemplateRef","Pipe","DateTimeHelperService","Component","HostBinding","ViewChild","trigger","state","style","transition","animate","NotifyService","NgZone","ContentChild","ViewEncapsulation","ChangeDetectorRef","tslib_1.__spread","BsModalService","SmoothDndForVisible","dropHandlers","Injector","Renderer2","NgModule","CommonModule","NotifyModule","MessagerModule","FAreaResponseModule","FarrisCommonModule","DateHelperModule","ModalModule","LocaleModule"],"mappings":"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"}