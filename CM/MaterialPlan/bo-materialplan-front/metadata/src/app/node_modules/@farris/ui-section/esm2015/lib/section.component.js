/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/*
 * @Author: 疯狂秀才(Lucas Huang)
 * @Date: 2019-08-14 15:22:21
 * @LastEditors: 疯狂秀才(Lucas Huang)
 * @LastEditTime: 2019-08-15 16:44:15
 * @QQ: 1055818239
 * @Version: v0.0.1
 */
import { Component, Input, ContentChild, HostBinding, ViewChild, Optional, NgZone, Injector, Renderer2 } from '@angular/core';
import { FarrisSectionTitleDirective } from './directive/section-title.directive';
import { FarrisSectionHeaderDirective } from './directive/section-header.directive';
import { FarrisSectionHcontentDirective } from './directive/section-hcontent.directive';
import { FarrisSectionToolbarDirective, FarrisSectionViewChangeDirective } from './directive/section-toolbar.directive';
import { FarrisSectionExtendDirective } from './directive/section-extend.directive';
import { FarrisSectionContentDirective } from './directive/section-content.directive';
import { Observable, Subject, of } from 'rxjs';
import ResizeObserver from 'resize-observer-polyfill';
import { map, debounceTime, } from 'rxjs/operators';
export class FarrisSectionComponent {
    /**
     * @param {?} inject
     */
    constructor(inject) {
        this.inject = inject;
        this.contentCls = '';
        this.baseCls = true;
        this.maxStatus = false;
        // 是否显示header
        this.showHeader = true;
        // 是否支持最大化
        this.enableMaximize = false;
        /**
         * 是否启用収折功能
         * 默认不启用収折,值为''
         * 启用默认収折,值为'default'
         * 启用自定义収折,值为 'custom'
         *
         */
        this.enableAccordion = '';
        // section是否铺满
        this.fill = false;
        // 默认是是否展开
        this.expandStatus = true;
        // 就来按钮位置
        this.toolbarPosition = '';
        //
        this.toolbarBtns = [];
        // 工具栏按钮
        this._toolbar = null;
        //标记按钮工具栏是否隐藏[更多]按钮
        this.toolbarDpHidden = true;
        // 参照Tab中这样的处理方式有问题----延后修改
        // 是否被禁用的状态
        // 按照之前的逻辑，如果没有找到key，就说明被禁用
        this._disableDatas = new Subject();
        // 按照之前的逻辑，如果没有找到key，就说明可见
        this._visibleDatas = new Subject();
        this.clickThrottleTime = 350;
        this.clickItems = new Subject();
        // 用于计算响应时
        this.ro = null;
        this.resizeEl = null;
        this.inMoreButtonContents = [];
        if (this.inject) {
            this.ngZone = this.inject.get(NgZone, null);
            this.renderer = this.inject.get(Renderer2, null);
        }
    }
    /**
     * @return {?}
     */
    get fillCls() {
        return this.fill;
    }
    /**
     * @return {?}
     */
    get enableAccordionCls() {
        return this.enableAccordion == 'default';
    }
    /**
     * @return {?}
     */
    get enableCollapseCls() {
        if (this.enableAccordion === 'default' ||
            this.enableAccordion === 'custom') {
            return !this.expandStatus;
        }
        else {
            return false;
        }
    }
    /**
     * @return {?}
     */
    get enableCustomAccordionCls() {
        return this.enableAccordion == 'custom';
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set toolbar(value) {
        if (value) {
            this._toolbar = value;
            // 计算位置
            this.toolbarPosition = this.getToolbarPosition();
            //
            this.toolbarBtns = [...this.toolbar.contents];
            this.inMoreButtonContents = [];
            // 绑定事件
            this.bindResizeEvent();
            // 调整界面
            this.afterBindToolbarData();
        }
        else {
            this._toolbar = null;
            // 有位置
            this.toolbarPosition = '';
            this.toolbarBtns = [];
            this.inMoreButtonContents = [];
            // 移除绑定事件
            this.unBindResizeEvent();
        }
    }
    /**
     * @return {?}
     */
    get toolbar() {
        return this._toolbar;
    }
    /**
     * @param {?} values
     * @return {?}
     */
    set btnStates(values) {
        if (values) {
            if (this._disableDatas && this._disableDatas.hasOwnProperty('unsubscribe')) {
                this._disableDatas['unsubscribe']();
            }
            this._disableDatas = values;
        }
    }
    // 是否可见的状态
    /**
     * @param {?} values
     * @return {?}
     */
    set btnVisible(values) {
        if (values) {
            if (this._visibleDatas && this._visibleDatas.hasOwnProperty('unsubscribe')) {
                this._visibleDatas['unsubscribe']();
            }
            this._visibleDatas = values;
        }
    }
    // 用于提供循环效率
    /**
     * @param {?} index
     * @param {?} btn
     * @return {?}
     */
    trackByButton(index, btn) { return btn.id; }
    /**
     * @return {?}
     */
    ngOnInit() {
        // 标记点击事件
        this.clickSubscription = this.clickItems.pipe(debounceTime(this.clickThrottleTime))
            .subscribe((/**
         * @param {?} btnInfo
         * @return {?}
         */
        (btnInfo) => {
            if (btnInfo.click && typeof btnInfo.click == 'function') {
                btnInfo.click({ context: this.context });
            }
        }));
        // 绑定状态
        this._disableDatas.subscribe((/**
         * @param {?} data
         * @return {?}
         */
        data => {
            // 调整按钮可用状态
            this.changeState(data, 'disable');
        }));
        this._visibleDatas.subscribe((/**
         * @param {?} data
         * @return {?}
         */
        data => {
            // 调整按钮可见状态
            this.changeState(data, 'visible');
        }));
    }
    /**
     * 获取按钮配置中，禁用、可见的属性
     * @param {?} btnItem
     * @param {?} stateProp
     * @return {?}
     */
    getState(btnItem, stateProp) {
        if (btnItem.hasOwnProperty(stateProp)) {
            return btnItem[stateProp];
        }
        // 不存在属性
        if (stateProp == 'visible') {
            return true;
        }
        return false;
    }
    /**
     * 改变可用状态
     * @private
     * @param {?} values
     * @param {?} stateProp
     * @return {?}
     */
    changeState(values, stateProp) {
        /** @type {?} */
        const idArray = Object.keys(values);
        idArray.forEach((/**
         * @param {?} id
         * @return {?}
         */
        id => {
            /** @type {?} */
            const state = values[id];
            /** @type {?} */
            const item = this._findItemByID(id, this.toolbarBtns);
            if (item) {
                item[stateProp] = state;
            }
        }));
        this.inMoreButtonContents.forEach((/**
         * @param {?} item
         * @return {?}
         */
        item => {
            /** @type {?} */
            const findId = idArray.find((/**
             * @param {?} id
             * @return {?}
             */
            id => id == item.id));
            if (findId) {
                item[stateProp] = values[findId];
            }
        }));
    }
    /**
     * 查找
     * @private
     * @param {?} id
     * @param {?} datas
     * @return {?}
     */
    _findItemByID(id, datas) {
        return datas.find((/**
         * @param {?} item
         * @return {?}
         */
        (item) => item.id == id));
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        if (this.clickSubscription) {
            this.clickSubscription.unsubscribe();
            this.clickSubscription = null;
        }
        if (this._visibleDatas && this._visibleDatas.hasOwnProperty('unsubscribe')) {
            this._visibleDatas['unsubscribe']();
            this._visibleDatas = null;
        }
        if (this._disableDatas && this._disableDatas.hasOwnProperty('unsubscribe')) {
            this._disableDatas['unsubscribe']();
            this._disableDatas = null;
        }
        this.unBindResizeEvent();
    }
    /**
     * 绑定限制
     * @private
     * @return {?}
     */
    bindResizeEvent() {
        // 标记响应时
        if (this.ngZone && this.toolbar && this.toolbar.contents.length > 0) {
            this.ngZone.runOutsideAngular((/**
             * @return {?}
             */
            () => {
                setTimeout((/**
                 * @return {?}
                 */
                () => {
                    if (!this.toolbarContainer) {
                        return;
                    }
                    if (this.ro) {
                        if (this.toolbarContainer.nativeElement.parentElement == this.resizeEl) {
                            // 已绑定过
                            return;
                        }
                        else {
                            this.unBindResizeEvent();
                        }
                    }
                    if (this.ro === null) {
                        this.ro = new ResizeObserver((/**
                         * @param {?} el
                         * @return {?}
                         */
                        (el) => {
                            this._calculateToolbarDropdownIsShow();
                            this._calculateButtonsShow();
                        }));
                        this.resizeEl = this.toolbarContainer.nativeElement.parentElement;
                        this.ro.observe(this.resizeEl);
                    }
                }), 0);
            }));
        }
        else {
            this.unBindResizeEvent();
        }
    }
    /**
     * 按钮数据变更后触发检查
     * @private
     * @return {?}
     */
    afterBindToolbarData() {
        if (this.ngZone && this.toolbar && this.toolbar.contents.length > 0) {
            this.ngZone.runOutsideAngular((/**
             * @return {?}
             */
            () => {
                setTimeout((/**
                 * @return {?}
                 */
                () => {
                    this._calculateToolbarDropdownIsShow();
                    this._calculateButtonsShow();
                }), 0);
            }));
        }
    }
    /**
     * 判断下拉按钮是否显示
     * @private
     * @return {?}
     */
    _calculateToolbarDropdownIsShow() {
        if (!this.toolbarContainer || !this.toolbar || !this.toolbarPosition) {
            // 容器未显示，没有数据，没有按钮位置
            this.toolbarDpHidden = true;
            return;
        }
        /** @type {?} */
        const btnParentsContainer = this.toolbarContainer.nativeElement.parentElement;
        if (this.btnPlaceHolder.nativeElement.scrollWidth > btnParentsContainer.offsetWidth) {
            this.toolbarDpHidden = false;
        }
        else {
            this.toolbarDpHidden = true;
        }
    }
    /**
     * 计算显示的按钮个数及更多中显示的按钮个数
     * @private
     * @return {?}
     */
    _calculateButtonsShow() {
        if (!this.toolbarContainer || !this.toolbar || !this.toolbarPosition) {
            // 容器未显示，没有数据，没有按钮位置
            return;
        }
        if (this.toolbarDpHidden) {
            this.toolbarBtns = [...this.toolbar.contents];
            this.inMoreButtonContents = [];
            return;
        }
        /** @type {?} */
        let toolbarParentContainerEl = this.toolbarContainer.nativeElement.parentElement;
        /** @type {?} */
        let divEl = this.toolbarContainer.nativeElement;
        /** @type {?} */
        let btnPlaceHolderEl = this.btnPlaceHolder.nativeElement;
        /** @type {?} */
        let btnPlaceHolderBtns = btnPlaceHolderEl.querySelectorAll('button');
        // 更多按钮
        /** @type {?} */
        const moreButton = toolbarParentContainerEl.querySelector('.morebtn');
        // 计算按钮的宽度      
        /** @type {?} */
        let basicStart = parseInt(btnPlaceHolderEl.getBoundingClientRect().left);
        /** @type {?} */
        let basicWidth = toolbarParentContainerEl.offsetWidth - moreButton.offsetWidth - 12;
        /** @type {?} */
        let toolbarDropdownHidden = true;
        /** @type {?} */
        let k = 0
        // 只有一个按钮
        ;
        // 只有一个按钮
        if (btnPlaceHolderBtns.length == 1) {
            if (btnPlaceHolderEl.offsetWidth > basicWidth) {
                toolbarDropdownHidden = false;
            }
            else {
                k = 1;
            }
        }
        else {
            for (k = 1; k <= btnPlaceHolderBtns.length - 1; k++) {
                // 如果内容超出,考虑到按钮之间的间距
                if (k == btnPlaceHolderBtns.length - 1) {
                    if (btnPlaceHolderEl.offsetWidth > basicWidth) {
                        toolbarDropdownHidden = false;
                        k = k - 1;
                        break;
                    }
                }
                else if (parseInt(btnPlaceHolderBtns[k].getBoundingClientRect().left) - basicStart > basicWidth) {
                    toolbarDropdownHidden = false;
                    k = k - 1;
                    break;
                }
            }
        }
        this.toolbarDpHidden = toolbarDropdownHidden;
        /** @type {?} */
        let showBtns = divEl.querySelectorAll('button');
        /** @type {?} */
        let resultBtns = this.toolbar.contents.filter((/**
         * @param {?} item
         * @param {?} index
         * @return {?}
         */
        (item, index) => {
            return index < k;
        }));
        this.toolbarBtns = resultBtns ? [...resultBtns] : [];
        // for (let m = k; m < showBtns.length; m++) {
        //     this.renderer.setStyle(showBtns[m], 'display', 'none');
        // }
        if (this.toolbar.contents && this.toolbar.contents.length) {
            this.inMoreButtonContents = this.toolbar.contents.filter((/**
             * @param {?} item
             * @param {?} index
             * @return {?}
             */
            (item, index) => {
                return index >= k;
            }));
        }
    }
    /**
     * 在按钮状态变化时解除限制
     * @private
     * @return {?}
     */
    unBindResizeEvent() {
        if (this.ro) {
            if (this.resizeEl) {
                this.ro.unobserve(this.resizeEl);
            }
            this.ro = null;
        }
    }
    /**
     * @private
     * @return {?} string
     * '' 不存在按钮，无所谓位置
     * 'inHead' 按钮在头部
     * 'inContent' 按钮在内容位置
     */
    getToolbarPosition() {
        if (this.toolbar && this.toolbar.hasOwnProperty('position') && this.toolbar.hasOwnProperty('contents') && this.toolbar.contents.length > 0) {
            // 如果有属性，且按钮有值
            if (this.toolbar.position === 'inHead') {
                return 'inHead';
            }
            else {
                return 'inContent';
            }
        }
        return '';
    }
    /**
     * 判断是否显示、隐藏
     * @param {?} id
     * @param {?=} state
     * @param {?=} defaultValue
     * @return {?}
     */
    getToolbarState(id, state = this.btnStates, defaultValue = false) {
        if (state) {
            return state.pipe(map((/**
             * @param {?} n
             * @return {?}
             */
            (n) => {
                if (n[id] === undefined) {
                    // console.warn(`未找ID为：${id} 相关状态设置！`);
                    return defaultValue;
                }
                return n[id];
            })));
        }
        else {
            return of(defaultValue);
        }
    }
    /**
     * @param {?} btnInfo
     * @return {?}
     */
    clickHandler(btnInfo) {
        if (!btnInfo) {
            return;
        }
        this.clickItems.next(btnInfo);
    }
}
FarrisSectionComponent.decorators = [
    { type: Component, args: [{
                selector: 'farris-section',
                template: "<div class=\"f-section-header\" [ngClass]=\"headerDirective && headerDirective.headerCls\" *ngIf=\"showHeader\">\r\n    <ng-template [ngTemplateOutlet]=\"headerDirective.templateRef\"\r\n        *ngIf=\"headerDirective && headerDirective.templateRef\"></ng-template>\r\n    <ng-template [ngIf]=\"!headerDirective\">\r\n        <ng-template [ngTemplateOutlet]=\"headerTitleDirective.templateRef\"\r\n            *ngIf=\"headerTitleDirective && headerTitleDirective.templateRef\" [ngTemplateOutletContext]=\"{context:this.context,index:this.index }\"></ng-template>\r\n        <div *ngIf=\"!headerTitleDirective || !headerTitleDirective.templateRef\" class=\"f-title\"\r\n            (click)=\"this.expandStatus = !this.expandStatus\">\r\n            <h4 class=\"f-title-text\">{{ mainTitle }}</h4>\r\n            <span *ngIf=\"subTitle && subTitle.length\">{{\r\n            subTitle\r\n        }}</span>\r\n        </div>\r\n        <div class=\"f-content\" [ngClass]=\"\r\n            headerContentDirective &&\r\n            headerContentDirective.hcontentCls\r\n        \" *ngIf=\"\r\n            headerContentDirective &&\r\n            headerContentDirective.templateRef\r\n        \">\r\n            <ng-template [ngTemplateOutlet]=\"headerContentDirective.templateRef\"></ng-template>\r\n        </div>\r\n        <div class=\"f-toolbar\" [ngClass]=\"\r\n            headerToolbarDirective &&\r\n            headerToolbarDirective.toolbarCls\" *ngIf=\" headerToolbarDirective &&headerToolbarDirective.templateRef \">\r\n            <ng-template [ngTemplateOutlet]=\"headerToolbarDirective.templateRef\" *ngIf=\"\r\n                headerToolbarDirective &&\r\n                headerToolbarDirective.templateRef\r\n            \"></ng-template>\r\n        </div>\r\n        <div #toolbarHeaderContainer class=\"f-section-toolbar f-section-header--toolbar\"\r\n            *ngIf=\"!headerToolbarDirective&&toolbarPosition=='inHead'\">\r\n            <ng-container [ngTemplateOutlet]=\"toolbarBtnTmpl\"\r\n                [ngTemplateOutletContext]=\"{ datas: toolbarBtns, dpHidden:toolbarDpHidden,dpDatas:inMoreButtonContents}\">\r\n            </ng-container>\r\n        </div>\r\n        <div class=\"f-viewchange\" [ngClass]=\"viewChangeDirective && viewChangeDirective.viewChangeCls\"\r\n            *ngIf=\" viewChangeDirective &&viewChangeDirective.templateRef \">\r\n            <ng-template [ngTemplateOutlet]=\"viewChangeDirective.templateRef\"></ng-template>\r\n        </div>\r\n        <div class=\"f-max-accordion\" *ngIf=\"enableMaximize||enableAccordion!=''\">\r\n            <span class=\"f-icon\" *ngIf=\"enableMaximize\" [class.f-icon-maximize]=\"!maxStatus\"\r\n                [class.f-icon-minimize]=\"maxStatus\" (click)=\"this.maxStatus = !this.maxStatus\"> </span>\r\n            <button class=\"btn f-btn-collapse-expand f-btn-mx\" *ngIf=\"enableAccordion\"\r\n                [ngClass]=\"{ 'f-state-expand': expandStatus }\" (click)=\"this.expandStatus = !this.expandStatus\">\r\n                <span *ngIf=\"!expandStatus\">{{'section.expandLabel'|locale}}</span>\r\n                <span *ngIf=\"expandStatus\">{{'section.collapseLabel'|locale}}</span>\r\n            </button>\r\n        </div>\r\n    </ng-template>\r\n\r\n    <div class=\"f-section-header--btn-placeholder\" #btnPlaceholder *ngIf=\"!headerToolbarDirective&&toolbarPosition\">\r\n        <ng-container *ngFor=\"let btn of toolbar.contents\">\r\n            <button [ngClass]=\"btn.appearance.class\"\r\n                *ngIf=\"getToolbarState(btn.id, btnVisible,true) | async\">{{btn.title}}</button>\r\n        </ng-container>\r\n    </div>\r\n</div>\r\n<div class=\"f-section-header--btn-placeholder\" #btnPlaceholder *ngIf=\"!showHeader&&toolbarPosition=='inContent'\">\r\n    <ng-container *ngFor=\"let btn of toolbar.contents\">\r\n        <button [ngClass]=\"btn.appearance.class\"\r\n            *ngIf=\"getToolbarState(btn.id, btnVisible,true) | async\">{{btn.title}}</button>\r\n    </ng-container>\r\n</div>\r\n<div class=\"f-section-extend\" [ngClass]=\"extendDirective && extendDirective.extendCls\" \r\n    *ngIf=\"extendDirective && extendDirective.templateRef\">\r\n    <ng-template  [ngTemplateOutlet]=\"extendDirective.templateRef\"></ng-template>\r\n</div>\r\n\r\n<div class=\"f-section-content\" [ngClass]=\"contentCls\">\r\n    <div class=\"f-section-toolbar f-section-content--toolbar\"\r\n        *ngIf=\"!headerToolbarDirective&&toolbarPosition=='inContent'\">\r\n        <ng-container [ngTemplateOutlet]=\"toolbarBtnTmpl\"\r\n            [ngTemplateOutletContext]=\"{ datas: toolbarBtns, dpHidden:toolbarDpHidden,dpDatas:inMoreButtonContents}\">\r\n        </ng-container>\r\n    </div>\r\n    <ng-content></ng-content>\r\n</div>\r\n<ng-template #toolbarBtnTmpl let-datas=\"datas\" let-dpHidden=\"dpHidden\" let-dpDatas=\"dpDatas\">\r\n    <div class=\"toolbar-btn-inline-flex\" #toolbarContainer>\r\n        <ng-container *ngFor=\"let btn of datas;trackBy:trackByButton\">\r\n            <button [attr.id]=\"btn.id\" [ngClass]=\"btn.appearance.class\"\r\n                *ngIf=\"getState(btn,'visible')\"\r\n                [disabled]=\"getState(btn,'disable')\"\r\n                (click)=\"clickHandler(btn)\">{{btn.title}}</button>\r\n        </ng-container>\r\n    </div>\r\n    <div class=\"btn-group sc-nav-btn\" ngbDropdown [hidden]=\"dpHidden\">\r\n        <button class=\"btn btn-link morebtn\" ngbDropdownToggle>{{'tabs.more' | locale}}</button>\r\n        <ul class=\"dropdown-menu\" ngbDropdownMenu *ngIf=\"dpDatas.length>0\">\r\n            <ng-container *ngFor=\"let dpBtn of dpDatas;trackBy:trackByButton\">\r\n                <li class=\"dropdown-item text-truncate px-2\"   *ngIf=\"getState(dpBtn,'visible')\">\r\n                    <button style=\"width:100%;\" [attr.id]=\"dpBtn.id\" class=\"btn btn-link text-left\"\r\n                        [class.disabled]=\"getState(dpBtn,'disable')\"\r\n                        (click)=\"clickHandler(dpBtn)\">{{dpBtn.title}}</button>\r\n                </li>\r\n            </ng-container>\r\n        </ul>\r\n    </div>\r\n</ng-template>",
                styles: [".f-section-header--btn-placeholder{position:absolute;display:-webkit-inline-box;display:inline-flex;top:-30px;left:0;opacity:0;overflow:hidden;z-index:-90}.f-section-content .toolbar-btn-inline-flex,.f-section-header .toolbar-btn-inline-flex{display:-webkit-inline-box;display:inline-flex;overflow:hidden}.f-section-header--toolbar{-webkit-box-flex:1;flex:1;-webkit-box-align:center;align-items:center;width:30%;display:-webkit-box;display:flex;-webkit-box-pack:end;justify-content:flex-end;margin-left:.875rem}.f-section-content--toolbar{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}"]
            }] }
];
/** @nocollapse */
FarrisSectionComponent.ctorParameters = () => [
    { type: Injector, decorators: [{ type: Optional }] }
];
FarrisSectionComponent.propDecorators = {
    contentCls: [{ type: Input }],
    baseCls: [{ type: HostBinding, args: ['class.f-section',] }],
    maxStatus: [{ type: HostBinding, args: ['class.f-section-maximize',] }],
    fillCls: [{ type: HostBinding, args: ['class.f-section-fill',] }],
    enableAccordionCls: [{ type: HostBinding, args: ['class.f-section-accordion',] }],
    enableCollapseCls: [{ type: HostBinding, args: ['class.f-state-collapse',] }],
    enableCustomAccordionCls: [{ type: HostBinding, args: ['class.f-section-custom-accordion',] }],
    mainTitle: [{ type: Input }],
    subTitle: [{ type: Input }],
    showHeader: [{ type: Input }],
    enableMaximize: [{ type: Input }],
    enableAccordion: [{ type: Input }],
    fill: [{ type: Input }],
    expandStatus: [{ type: Input }],
    context: [{ type: Input }],
    index: [{ type: Input }],
    toolbar: [{ type: Input }],
    headerDirective: [{ type: ContentChild, args: [FarrisSectionHeaderDirective,] }],
    headerTitleDirective: [{ type: ContentChild, args: [FarrisSectionTitleDirective,] }],
    headerContentDirective: [{ type: ContentChild, args: [FarrisSectionHcontentDirective,] }],
    headerToolbarDirective: [{ type: ContentChild, args: [FarrisSectionToolbarDirective,] }],
    extendDirective: [{ type: ContentChild, args: [FarrisSectionExtendDirective,] }],
    contentDirective: [{ type: ContentChild, args: [FarrisSectionContentDirective,] }],
    viewChangeDirective: [{ type: ContentChild, args: [FarrisSectionViewChangeDirective,] }],
    btnStates: [{ type: Input }],
    btnVisible: [{ type: Input }],
    clickThrottleTime: [{ type: Input }],
    toolbarContainer: [{ type: ViewChild, args: ['toolbarContainer',] }],
    btnPlaceHolder: [{ type: ViewChild, args: ['btnPlaceholder',] }]
};
if (false) {
    /** @type {?} */
    FarrisSectionComponent.prototype.contentCls;
    /** @type {?} */
    FarrisSectionComponent.prototype.baseCls;
    /** @type {?} */
    FarrisSectionComponent.prototype.maxStatus;
    /** @type {?} */
    FarrisSectionComponent.prototype.mainTitle;
    /** @type {?} */
    FarrisSectionComponent.prototype.subTitle;
    /** @type {?} */
    FarrisSectionComponent.prototype.showHeader;
    /** @type {?} */
    FarrisSectionComponent.prototype.enableMaximize;
    /**
     * 是否启用収折功能
     * 默认不启用収折,值为''
     * 启用默认収折,值为'default'
     * 启用自定义収折,值为 'custom'
     *
     * @type {?}
     */
    FarrisSectionComponent.prototype.enableAccordion;
    /** @type {?} */
    FarrisSectionComponent.prototype.fill;
    /** @type {?} */
    FarrisSectionComponent.prototype.expandStatus;
    /**
     * 事件上下文，解决按钮点击时没有上下文的问题
     * @type {?}
     */
    FarrisSectionComponent.prototype.context;
    /** @type {?} */
    FarrisSectionComponent.prototype.index;
    /** @type {?} */
    FarrisSectionComponent.prototype.toolbarPosition;
    /** @type {?} */
    FarrisSectionComponent.prototype.toolbarBtns;
    /**
     * @type {?}
     * @private
     */
    FarrisSectionComponent.prototype._toolbar;
    /** @type {?} */
    FarrisSectionComponent.prototype.toolbarDpHidden;
    /** @type {?} */
    FarrisSectionComponent.prototype.headerDirective;
    /** @type {?} */
    FarrisSectionComponent.prototype.headerTitleDirective;
    /** @type {?} */
    FarrisSectionComponent.prototype.headerContentDirective;
    /** @type {?} */
    FarrisSectionComponent.prototype.headerToolbarDirective;
    /** @type {?} */
    FarrisSectionComponent.prototype.extendDirective;
    /** @type {?} */
    FarrisSectionComponent.prototype.contentDirective;
    /** @type {?} */
    FarrisSectionComponent.prototype.viewChangeDirective;
    /** @type {?} */
    FarrisSectionComponent.prototype._disableDatas;
    /** @type {?} */
    FarrisSectionComponent.prototype._visibleDatas;
    /** @type {?} */
    FarrisSectionComponent.prototype.clickThrottleTime;
    /** @type {?} */
    FarrisSectionComponent.prototype.toolbarContainer;
    /** @type {?} */
    FarrisSectionComponent.prototype.btnPlaceHolder;
    /**
     * @type {?}
     * @private
     */
    FarrisSectionComponent.prototype.clickItems;
    /**
     * @type {?}
     * @private
     */
    FarrisSectionComponent.prototype.clickSubscription;
    /**
     * @type {?}
     * @private
     */
    FarrisSectionComponent.prototype.ro;
    /**
     * @type {?}
     * @private
     */
    FarrisSectionComponent.prototype.resizeEl;
    /**
     * @type {?}
     * @private
     */
    FarrisSectionComponent.prototype.ngZone;
    /**
     * @type {?}
     * @private
     */
    FarrisSectionComponent.prototype.renderer;
    /** @type {?} */
    FarrisSectionComponent.prototype.inMoreButtonContents;
    /**
     * @type {?}
     * @private
     */
    FarrisSectionComponent.prototype.inject;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VjdGlvbi5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL3VpLXNlY3Rpb24vIiwic291cmNlcyI6WyJsaWIvc2VjdGlvbi5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBUUEsT0FBTyxFQUNMLFNBQVMsRUFFVCxLQUFLLEVBQ0wsWUFBWSxFQUNaLFdBQVcsRUFFWCxTQUFTLEVBQ1QsUUFBUSxFQUNSLE1BQU0sRUFDTixRQUFRLEVBRVIsU0FBUyxFQUNWLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBRSwyQkFBMkIsRUFBRSxNQUFNLHFDQUFxQyxDQUFDO0FBQ2xGLE9BQU8sRUFBRSw0QkFBNEIsRUFBRSxNQUFNLHNDQUFzQyxDQUFDO0FBQ3BGLE9BQU8sRUFBRSw4QkFBOEIsRUFBRSxNQUFNLHdDQUF3QyxDQUFDO0FBQ3hGLE9BQU8sRUFBRSw2QkFBNkIsRUFBRSxnQ0FBZ0MsRUFBRSxNQUFNLHVDQUF1QyxDQUFDO0FBQ3hILE9BQU8sRUFBRSw0QkFBNEIsRUFBRSxNQUFNLHNDQUFzQyxDQUFDO0FBQ3BGLE9BQU8sRUFBRSw2QkFBNkIsRUFBRSxNQUFNLHVDQUF1QyxDQUFDO0FBQ3RGLE9BQU8sRUFBRSxVQUFVLEVBQUUsT0FBTyxFQUFnQixFQUFFLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFFN0QsT0FBTyxjQUFjLE1BQU0sMEJBQTBCLENBQUM7QUFDdEQsT0FBTyxFQUFFLEdBQUcsRUFBRSxZQUFZLEdBQUcsTUFBTSxnQkFBZ0IsQ0FBQztBQU1wRCxNQUFNLE9BQU8sc0JBQXNCOzs7O0lBZ0pqQyxZQUFnQyxNQUFnQjtRQUFoQixXQUFNLEdBQU4sTUFBTSxDQUFVO1FBL0l2QyxlQUFVLEdBQUcsRUFBRSxDQUFDO1FBQ08sWUFBTyxHQUFHLElBQUksQ0FBQztRQUNOLGNBQVMsR0FBWSxLQUFLLENBQUM7O1FBNEIzRCxlQUFVLEdBQUcsSUFBSSxDQUFDOztRQUVsQixtQkFBYyxHQUFH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RWhELGdEQUE0Qzs7Ozs7SUFFNUMsNENBQXdDOzs7OztJQUN4QyxtREFBd0M7Ozs7O0lBSXhDLG9DQUFrQzs7Ozs7SUFDbEMsMENBQXdCOzs7OztJQUV4Qix3Q0FBZTs7Ozs7SUFFZiwwQ0FBaUI7O0lBQ2pCLHNEQUEwQzs7Ozs7SUFFOUIsd0NBQW9DIiwic291cmNlc0NvbnRlbnQiOlsiLypcclxuICogQEF1dGhvcjog55av54uC56eA5omNKEx1Y2FzIEh1YW5nKVxyXG4gKiBARGF0ZTogMjAxOS0wOC0xNCAxNToyMjoyMVxyXG4gKiBATGFzdEVkaXRvcnM6IOeWr+eLguengOaJjShMdWNhcyBIdWFuZylcclxuICogQExhc3RFZGl0VGltZTogMjAxOS0wOC0xNSAxNjo0NDoxNVxyXG4gKiBAUVE6IDEwNTU4MTgyMzlcclxuICogQFZlcnNpb246IHYwLjAuMVxyXG4gKi9cclxuaW1wb3J0IHtcclxuICBDb21wb25lbnQsXHJcbiAgT25Jbml0LFxyXG4gIElucHV0LFxyXG4gIENvbnRlbnRDaGlsZCxcclxuICBIb3N0QmluZGluZyxcclxuICBPbkRlc3Ryb3ksXHJcbiAgVmlld0NoaWxkLFxyXG4gIE9wdGlvbmFsLFxyXG4gIE5nWm9uZSxcclxuICBJbmplY3RvcixcclxuICBFbGVtZW50UmVmLFxyXG4gIFJlbmRlcmVyMlxyXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBGYXJyaXNTZWN0aW9uVGl0bGVEaXJlY3RpdmUgfSBmcm9tICcuL2RpcmVjdGl2ZS9zZWN0aW9uLXRpdGxlLmRpcmVjdGl2ZSc7XHJcbmltcG9ydCB7IEZhcnJpc1NlY3Rpb25IZWFkZXJEaXJlY3RpdmUgfSBmcm9tICcuL2RpcmVjdGl2ZS9zZWN0aW9uLWhlYWRlci5kaXJlY3RpdmUnO1xyXG5pbXBvcnQgeyBGYXJyaXNTZWN0aW9uSGNvbnRlbnREaXJlY3RpdmUgfSBmcm9tICcuL2RpcmVjdGl2ZS9zZWN0aW9uLWhjb250ZW50LmRpcmVjdGl2ZSc7XHJcbmltcG9ydCB7IEZhcnJpc1NlY3Rpb25Ub29sYmFyRGlyZWN0aXZlLCBGYXJyaXNTZWN0aW9uVmlld0NoYW5nZURpcmVjdGl2ZSB9IGZyb20gJy4vZGlyZWN0aXZlL3NlY3Rpb24tdG9vbGJhci5kaXJlY3RpdmUnO1xyXG5pbXBvcnQgeyBGYXJyaXNTZWN0aW9uRXh0ZW5kRGlyZWN0aXZlIH0gZnJvbSAnLi9kaXJlY3RpdmUvc2VjdGlvbi1leHRlbmQuZGlyZWN0aXZlJztcclxuaW1wb3J0IHsgRmFycmlzU2VjdGlvbkNvbnRlbnREaXJlY3RpdmUgfSBmcm9tICcuL2RpcmVjdGl2ZS9zZWN0aW9uLWNvbnRlbnQuZGlyZWN0aXZlJztcclxuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgU3ViamVjdCwgU3Vic2NyaXB0aW9uLCBvZiB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBUb29sYmFyQ29uZmlnLCBCdXR0b25Db25maWcgfSBmcm9tICcuL3Rvb2xiYXIuY29uZmlnJztcclxuaW1wb3J0IFJlc2l6ZU9ic2VydmVyIGZyb20gJ3Jlc2l6ZS1vYnNlcnZlci1wb2x5ZmlsbCc7XHJcbmltcG9ydCB7IG1hcCwgZGVib3VuY2VUaW1lLCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICdmYXJyaXMtc2VjdGlvbicsXHJcbiAgdGVtcGxhdGVVcmw6ICcuL3NlY3Rpb24uY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWycuL3NlY3Rpb24uY29tcG9uZW50LmNzcyddXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBGYXJyaXNTZWN0aW9uQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkRlc3Ryb3kge1xyXG4gIEBJbnB1dCgpIGNvbnRlbnRDbHMgPSAnJztcclxuICBASG9zdEJpbmRpbmcoJ2NsYXNzLmYtc2VjdGlvbicpIGJhc2VDbHMgPSB0cnVlO1xyXG4gIEBIb3N0QmluZGluZygnY2xhc3MuZi1zZWN0aW9uLW1heGltaXplJykgbWF4U3RhdHVzOiBib29sZWFuID0gZmFsc2U7XHJcbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5mLXNlY3Rpb24tZmlsbCcpIGdldCBmaWxsQ2xzKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMuZmlsbDtcclxuICB9XHJcbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5mLXNlY3Rpb24tYWNjb3JkaW9uJylcclxuICBnZXQgZW5hYmxlQWNjb3JkaW9uQ2xzKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMuZW5hYmxlQWNjb3JkaW9uID09ICdkZWZhdWx0JztcclxuICB9XHJcbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5mLXN0YXRlLWNvbGxhcHNlJykgZ2V0IGVuYWJsZUNvbGxhcHNlQ2xzKCk6IGJvb2xlYW4ge1xyXG4gICAgaWYgKFxyXG4gICAgICB0aGlzLmVuYWJsZUFjY29yZGlvbiA9PT0gJ2RlZmF1bHQnIHx8XHJcbiAgICAgIHRoaXMuZW5hYmxlQWNjb3JkaW9uID09PSAnY3VzdG9tJ1xyXG4gICAgKSB7XHJcbiAgICAgIHJldHVybiAhdGhpcy5leHBhbmRTdGF0dXM7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBASG9zdEJpbmRpbmcoJ2NsYXNzLmYtc2VjdGlvbi1jdXN0b20tYWNjb3JkaW9uJylcclxuICBnZXQgZW5hYmxlQ3VzdG9tQWNjb3JkaW9uQ2xzKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMuZW5hYmxlQWNjb3JkaW9uID09ICdjdXN0b20nO1xyXG4gIH1cclxuICAvLyDkuLvmoIfpophcclxuICBASW5wdXQoKSBtYWluVGl0bGU6IHN0cmluZztcclxuICAvLyDlia/moIfpophcclxuICBASW5wdXQoKSBzdWJUaXRsZTogc3RyaW5nO1xyXG4gIC8vIOaYr+WQpuaYvuekumhlYWRlclxyXG4gIEBJbnB1dCgpIHNob3dIZWFkZXIgPSB0cnVlO1xyXG4gIC8vIOaYr+WQpuaUr+aMgeacgOWkp+WMllxyXG4gIEBJbnB1dCgpIGVuYWJsZU1heGltaXplID0gZmFsc2U7XHJcbiAgLyoqXHJcbiAgICog5piv5ZCm5ZCv55So5Y+O5oqY5Yqf6IO9XHJcbiAgICog6buY6K6k5LiN5ZCv55So5Y+O5oqYLOWAvOS4uicnXHJcbiAgICog5ZCv55So6buY6K6k5Y+O5oqYLOWAvOS4uidkZWZhdWx0J1xyXG4gICAqIOWQr+eUqOiHquWumuS5ieWPjuaKmCzlgLzkuLogJ2N1c3RvbSdcclxuICAgKiovXHJcbiAgQElucHV0KCkgZW5hYmxlQWNjb3JkaW9uID0gJyc7XHJcbiAgLy8gc2VjdGlvbuaYr+WQpumTuua7oVxyXG4gIEBJbnB1dCgpIGZpbGwgPSBmYWxzZTtcclxuICAvLyDpu5jorqTmmK/mmK/lkKblsZXlvIBcclxuICBASW5wdXQoKSBleHBhbmRTdGF0dXMgPSB0cnVlO1xyXG4gIC8qKlxyXG4gICAqIOS6i+S7tuS4iuS4i+aWh++8jOino+WGs+aMiemSrueCueWHu+aXtuayoeacieS4iuS4i+aWh+eahOmXrumimFxyXG4gICAqL1xyXG4gIEBJbnB1dCgpIGNvbnRleHQ6IGFueTtcclxuICBASW5wdXQoKSBpbmRleDogYW55O1xyXG4gIC8vIOWwseadpeaMiemSruS9jee9rlxyXG4gIHRvb2xiYXJQb3NpdGlvbiA9ICcnO1xyXG4gIC8vXHJcbiAgdG9vbGJhckJ0bnMgPSBbXTtcclxuICAvLyDlt6XlhbfmoI/mjInpkq5cclxuICBwcml2YXRlIF90b29sYmFyOiBUb29sYmFyQ29uZmlnIHwgbnVsbCA9IG51bGw7XHJcbiAgQElucHV0KClcclxuICBzZXQgdG9vbGJhcih2YWx1ZTogVG9vbGJhckNvbmZpZyB8IG51bGwpIHtcclxuICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICB0aGlzLl90b29sYmFyID0gdmFsdWU7XHJcbiAgICAgIC8vIOiuoeeul+S9jee9rlxyXG4gICAgICB0aGlzLnRvb2xiYXJQb3NpdGlvbiA9IHRoaXMuZ2V0VG9vbGJhclBvc2l0aW9uKCk7XHJcbiAgICAgIC8vXHJcbiAgICAgIHRoaXMudG9vbGJhckJ0bnMgPSBbLi4udGhpcy50b29sYmFyLmNvbnRlbnRzXTtcclxuICAgICAgdGhpcy5pbk1vcmVCdXR0b25Db250ZW50cyA9IFtdO1xyXG4gICAgICAvLyDnu5Hlrprkuovku7ZcclxuICAgICAgdGhpcy5iaW5kUmVzaXplRXZlbnQoKTtcclxuICAgICAgLy8g6LCD5pW055WM6Z2iXHJcbiAgICAgIHRoaXMuYWZ0ZXJCaW5kVG9vbGJhckRhdGEoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3Rvb2xiYXIgPSBudWxsO1xyXG4gICAgICAvLyDmnInkvY3nva5cclxuICAgICAgdGhpcy50b29sYmFyUG9zaXRpb24gPSAnJztcclxuICAgICAgdGhpcy50b29sYmFyQnRucyA9IFtdO1xyXG4gICAgICB0aGlzLmluTW9yZUJ1dHRvbkNvbnRlbnRzID0gW107XHJcbiAgICAgIC8vIOenu+mZpOe7keWumuS6i+S7tlxyXG4gICAgICB0aGlzLnVuQmluZFJlc2l6ZUV2ZW50KCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGdldCB0b29sYmFyKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3Rvb2xiYXI7XHJcbiAgfVxyXG4gIC8v5qCH6K6w5oyJ6ZKu5bel5YW35qCP5piv5ZCm6ZqQ6JePW+abtOWkml3mjInpkq5cclxuICB0b29sYmFyRHBIaWRkZW4gPSB0cnVlO1xyXG4gIC8vIHNlY3Rpb27lpLTpg6jmqKHmnb9cclxuICBAQ29udGVudENoaWxkKEZhcnJpc1NlY3Rpb25IZWFkZXJEaXJlY3RpdmUpIGhlYWRlckRpcmVjdGl2ZTogYW55O1xyXG4gIC8vIHNlY3Rpb27lpLTpg6jmoIfpopjljLrmqKHmnb9cclxuICBAQ29udGVudENoaWxkKEZhcnJpc1NlY3Rpb25UaXRsZURpcmVjdGl2ZSkgaGVhZGVyVGl0bGVEaXJlY3RpdmU6IGFueTtcclxuICAvL3NlY3Rpb27lpLTpg6jlj6/mianlsZXljLrln5/mqKHmnb9cclxuICBAQ29udGVudENoaWxkKEZhcnJpc1NlY3Rpb25IY29udGVudERpcmVjdGl2ZSkgaGVhZGVyQ29udGVudERpcmVjdGl2ZTogYW55O1xyXG4gIC8vc2VjdGlvbuWktOmDqOW3peWFt+agj+WMuuWfn+aooeadv1xyXG4gIEBDb250ZW50Q2hpbGQoRmFycmlzU2VjdGlvblRvb2xiYXJEaXJlY3RpdmUpIGhlYWRlclRvb2xiYXJEaXJlY3RpdmU6IGFueTtcclxuICAvL3NlY3Rpb27lj6/mianlsZXljLrln5/mqKHmnb/igJTigJTlhoXlrrnljLrkuIrpnaLnmoTmianlsZXvvIzmoIfpopjkuIvpnaJcclxuICBAQ29udGVudENoaWxkKEZhcnJpc1NlY3Rpb25FeHRlbmREaXJlY3RpdmUpIGV4dGVuZERpcmVjdGl2ZTogYW55O1xyXG4gIC8vc2VjdGlvbuWGheWuueWMuuWfn+aooeadv1xyXG4gIEBDb250ZW50Q2hpbGQoRmFycmlzU2VjdGlvbkNvbnRlbnREaXJlY3RpdmUpIGNvbnRlbnREaXJlY3RpdmU6IGFueTtcclxuICAvL3NlY3Rpb27lpLTpg6hWaWV3Q2hhbmdl5Yy65Z+f5qih5p2/XHJcbiAgQENvbnRlbnRDaGlsZChGYXJyaXNTZWN0aW9uVmlld0NoYW5nZURpcmVjdGl2ZSkgdmlld0NoYW5nZURpcmVjdGl2ZTogYW55O1xyXG5cclxuICAvLyDlj4LnhadUYWLkuK3ov5nmoLfnmoTlpITnkIbmlrnlvI/mnInpl67popgtLS0t5bu25ZCO5L+u5pS5XHJcbiAgLy8g5piv5ZCm6KKr56aB55So55qE54q25oCBXHJcbiAgLy8g5oyJ54Wn5LmL5YmN55qE6YC76L6R77yM5aaC5p6c5rKh5pyJ5om+5Yiwa2V577yM5bCx6K+05piO6KKr56aB55SoXHJcbiAgX2Rpc2FibGVEYXRhczogT2JzZXJ2YWJsZTxBcnJheTx7IFtrZXk6IHN0cmluZ106IGJvb2xlYW4gfT4+ID0gbmV3IFN1YmplY3QoKTtcclxuICBASW5wdXQoKVxyXG4gIHNldCBidG5TdGF0ZXModmFsdWVzOiBPYnNlcnZhYmxlPEFycmF5PHsgW2tleTogc3RyaW5nXTogYm9vbGVhbiB9Pj4pIHtcclxuICAgIGlmICh2YWx1ZXMpIHtcclxuICAgICAgaWYgKHRoaXMuX2Rpc2FibGVEYXRhcyYmdGhpcy5fZGlzYWJsZURhdGFzLmhhc093blByb3BlcnR5KCd1bnN1YnNjcmliZScpKSB7XHJcbiAgICAgICAgdGhpcy5fZGlzYWJsZURhdGFzWyd1bnN1YnNjcmliZSddKCk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5fZGlzYWJsZURhdGFzID0gdmFsdWVzO1xyXG4gICAgfVxyXG4gIH1cclxuICAvLyDmjInnhafkuYvliY3nmoTpgLvovpHvvIzlpoLmnpzmsqHmnInmib7liLBrZXnvvIzlsLHor7TmmI7lj6/op4FcclxuICBfdmlzaWJsZURhdGFzOiBPYnNlcnZhYmxlPEFycmF5PHsgW2tleTogc3RyaW5nXTogYm9vbGVhbiB9Pj4gPSBuZXcgU3ViamVjdCgpO1xyXG4gIC8vIOaYr+WQpuWPr+ingeeahOeKtuaAgVxyXG4gIEBJbnB1dCgpXHJcbiAgc2V0IGJ0blZpc2libGUodmFsdWVzOiBPYnNlcnZhYmxlPEFycmF5PHsgW2tleTogc3RyaW5nXTogYm9vbGVhbiB9Pj4pIHtcclxuICAgIGlmICh2YWx1ZXMpIHtcclxuICAgICAgaWYgKHRoaXMuX3Zpc2libGVEYXRhcyYmdGhpcy5fdmlzaWJsZURhdGFzLmhhc093blByb3BlcnR5KCd1bnN1YnNjcmliZScpKSB7XHJcbiAgICAgICAgdGhpcy5fdmlzaWJsZURhdGFzWyd1bnN1YnNjcmliZSddKCk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5fdmlzaWJsZURhdGFzID0gdmFsdWVzO1xyXG4gICAgfVxyXG4gIH1cclxuICBASW5wdXQoKSBjbGlja1Rocm90dGxlVGltZSA9IDM1MDtcclxuXHJcbiAgLy8g6YCa6L+H5oyJ6ZKu5pWw57uE5pi+56S65bel5YW35qCPXHJcbiAgQFZpZXdDaGlsZCgndG9vbGJhckNvbnRhaW5lcicpIHRvb2xiYXJDb250YWluZXI7XHJcbiAgLy8g6K6h566X5bel5YW35qCP5oyJ6ZKu5a695bqm55qE6L6F5Yqp5Yy65Z+fXHJcbiAgQFZpZXdDaGlsZCgnYnRuUGxhY2Vob2xkZXInKSBidG5QbGFjZUhvbGRlcjtcclxuXHJcbiAgcHJpdmF0ZSBjbGlja0l0ZW1zID0gbmV3IFN1YmplY3Q8YW55PigpO1xyXG4gIHByaXZhdGUgY2xpY2tTdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbjtcclxuICAvLyDnlKjkuo7mj5Dkvpvlvqrnjq/mlYjnjodcclxuICB0cmFja0J5QnV0dG9uKGluZGV4OiBudW1iZXIsIGJ0bjogYW55KTogbnVtYmVyIHsgcmV0dXJuIGJ0bi5pZDsgfVxyXG4gIC8vIOeUqOS6juiuoeeul+WTjeW6lOaXtlxyXG4gIHByaXZhdGUgcm86IFJlc2l6ZU9ic2VydmVyID0gbnVsbDtcclxuICBwcml2YXRlIHJlc2l6ZUVsID0gbnVsbDtcclxuICAvLyDlpITnkIblj5jljJZcclxuICBwcml2YXRlIG5nWm9uZTtcclxuICAvL1xyXG4gIHByaXZhdGUgcmVuZGVyZXI7XHJcbiAgaW5Nb3JlQnV0dG9uQ29udGVudHM6IEJ1dHRvbkNvbmZpZ1tdID0gW107XHJcblxyXG4gIGNvbnN0cnVjdG9yKEBPcHRpb25hbCgpIHByaXZhdGUgaW5qZWN0OiBJbmplY3Rvcikge1xyXG4gICAgaWYgKHRoaXMuaW5qZWN0KSB7XHJcbiAgICAgIHRoaXMubmdab25lID0gdGhpcy5pbmplY3QuZ2V0KE5nWm9uZSwgbnVsbCk7XHJcbiAgICAgIHRoaXMucmVuZGVyZXIgPSB0aGlzLmluamVjdC5nZXQoUmVuZGVyZXIyLCBudWxsKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG5nT25Jbml0KCkge1xyXG4gICAgLy8g5qCH6K6w54K55Ye75LqL5Lu2XHJcbiAgICB0aGlzLmNsaWNrU3Vic2NyaXB0aW9uID0gdGhpcy5jbGlja0l0ZW1zLnBpcGUoZGVib3VuY2VUaW1lKHRoaXMuY2xpY2tUaHJvdHRsZVRpbWUpKVxyXG4gICAgICAuc3Vic2NyaWJlKChidG5JbmZvOiBCdXR0b25Db25maWcpID0+IHtcclxuICAgICAgICBpZiAoYnRuSW5mby5jbGljayAmJiB0eXBlb2YgYnRuSW5mby5jbGljayA9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICBidG5JbmZvLmNsaWNrKHsgY29udGV4dDogdGhpcy5jb250ZXh0IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAvLyDnu5HlrprnirbmgIFcclxuICAgIHRoaXMuX2Rpc2FibGVEYXRhcy5zdWJzY3JpYmUoZGF0YSA9PiB7XHJcbiAgICAgIC8vIOiwg+aVtOaMiemSruWPr+eUqOeKtuaAgVxyXG4gICAgICB0aGlzLmNoYW5nZVN0YXRlKGRhdGEsJ2Rpc2FibGUnKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fdmlzaWJsZURhdGFzLnN1YnNjcmliZShkYXRhPT57XHJcbiAgICAgICAgLy8g6LCD5pW05oyJ6ZKu5Y+v6KeB54q25oCBXHJcbiAgICAgICAgdGhpcy5jaGFuZ2VTdGF0ZShkYXRhLCd2aXNpYmxlJyk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICog6I635Y+W5oyJ6ZKu6YWN572u5Lit77yM56aB55So44CB5Y+v6KeB55qE5bGe5oCnXHJcbiAgICogQHBhcmFtIGlkIFxyXG4gICAqIEBwYXJhbSBzdGF0ZVByb3AgXHJcbiAgICovXHJcbiAgZ2V0U3RhdGUoYnRuSXRlbSxzdGF0ZVByb3Ape1xyXG4gICAgaWYoYnRuSXRlbS5oYXNPd25Qcm9wZXJ0eShzdGF0ZVByb3ApKXtcclxuICAgICAgcmV0dXJuIGJ0bkl0ZW1bc3RhdGVQcm9wXTtcclxuICAgIH1cclxuICAgIC8vIOS4jeWtmOWcqOWxnuaAp1xyXG4gICAgaWYoc3RhdGVQcm9wPT0ndmlzaWJsZScpe1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICog5pS55Y+Y5Y+v55So54q25oCBXHJcbiAgICogQHBhcmFtIHZhbHVlcyBcclxuICAgKi9cclxuICBwcml2YXRlIGNoYW5nZVN0YXRlKHZhbHVlcyxzdGF0ZVByb3Ape1xyXG4gICAgY29uc3QgaWRBcnJheSA9IE9iamVjdC5rZXlzKHZhbHVlcyk7XHJcbiAgICBpZEFycmF5LmZvckVhY2goaWQgPT4ge1xyXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdmFsdWVzW2lkXTtcclxuICAgICAgICBjb25zdCBpdGVtID0gdGhpcy5fZmluZEl0ZW1CeUlEKGlkLCB0aGlzLnRvb2xiYXJCdG5zKTtcclxuICAgICAgICBpZihpdGVtKXtcclxuICAgICAgICAgICAgIGl0ZW1bc3RhdGVQcm9wXSA9IHN0YXRlO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgdGhpcy5pbk1vcmVCdXR0b25Db250ZW50cy5mb3JFYWNoKGl0ZW09PntcclxuICAgICAgICBjb25zdCBmaW5kSWQ9aWRBcnJheS5maW5kKGlkPT5pZD09aXRlbS5pZCk7XHJcbiAgICAgICAgaWYoZmluZElkKXtcclxuICAgICAgICAgIGl0ZW1bc3RhdGVQcm9wXT12YWx1ZXNbZmluZElkXTtcclxuICAgICAgICB9XHJcbiAgICB9KTsgICAgXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmn6Xmib5cclxuICAgKiBAcGFyYW0gaWQgXHJcbiAgICogQHBhcmFtIGRhdGFzIFxyXG4gICAqL1xyXG4gIHByaXZhdGUgX2ZpbmRJdGVtQnlJRChpZDpzdHJpbmcsZGF0YXM6QnV0dG9uQ29uZmlnW10pe1xyXG4gICAgcmV0dXJuICBkYXRhcy5maW5kKChpdGVtKSA9PiBpdGVtLmlkPT1pZCk7XHJcbiAgfVxyXG4gIG5nT25EZXN0cm95KCkge1xyXG4gICAgaWYgKHRoaXMuY2xpY2tTdWJzY3JpcHRpb24pIHtcclxuICAgICAgdGhpcy5jbGlja1N1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xyXG4gICAgICB0aGlzLmNsaWNrU3Vic2NyaXB0aW9uID0gbnVsbDtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLl92aXNpYmxlRGF0YXMmJnRoaXMuX3Zpc2libGVEYXRhcy5oYXNPd25Qcm9wZXJ0eSgndW5zdWJzY3JpYmUnKSkge1xyXG4gICAgICB0aGlzLl92aXNpYmxlRGF0YXNbJ3Vuc3Vic2NyaWJlJ10oKTtcclxuICAgICAgdGhpcy5fdmlzaWJsZURhdGFzPW51bGw7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5fZGlzYWJsZURhdGFzJiZ0aGlzLl9kaXNhYmxlRGF0YXMuaGFzT3duUHJvcGVydHkoJ3Vuc3Vic2NyaWJlJykpIHtcclxuICAgICAgdGhpcy5fZGlzYWJsZURhdGFzWyd1bnN1YnNjcmliZSddKCk7XHJcbiAgICAgIHRoaXMuX2Rpc2FibGVEYXRhcz1udWxsO1xyXG4gICAgfVxyXG4gICAgdGhpcy51bkJpbmRSZXNpemVFdmVudCgpO1xyXG4gIH1cclxuICAvKipcclxuICAgKiDnu5HlrprpmZDliLZcclxuICAgKi9cclxuICBwcml2YXRlIGJpbmRSZXNpemVFdmVudCgpIHtcclxuICAgIC8vIOagh+iusOWTjeW6lOaXtlxyXG4gICAgaWYgKHRoaXMubmdab25lICYmIHRoaXMudG9vbGJhciAmJiB0aGlzLnRvb2xiYXIuY29udGVudHMubGVuZ3RoID4gMCkge1xyXG4gICAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICBpZiAoIXRoaXMudG9vbGJhckNvbnRhaW5lcikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAodGhpcy5ybykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy50b29sYmFyQ29udGFpbmVyLm5hdGl2ZUVsZW1lbnQucGFyZW50RWxlbWVudCA9PSB0aGlzLnJlc2l6ZUVsKSB7XHJcbiAgICAgICAgICAgICAgLy8g5bey57uR5a6a6L+HXHJcbiAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHRoaXMudW5CaW5kUmVzaXplRXZlbnQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKHRoaXMucm8gPT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5ybyA9IG5ldyBSZXNpemVPYnNlcnZlcigoZWwpID0+IHtcclxuICAgICAgICAgICAgICB0aGlzLl9jYWxjdWxhdGVUb29sYmFyRHJvcGRvd25Jc1Nob3coKTtcclxuICAgICAgICAgICAgICB0aGlzLl9jYWxjdWxhdGVCdXR0b25zU2hvdygpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5yZXNpemVFbCA9IHRoaXMudG9vbGJhckNvbnRhaW5lci5uYXRpdmVFbGVtZW50LnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIHRoaXMucm8ub2JzZXJ2ZSh0aGlzLnJlc2l6ZUVsKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LCAwKTtcclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnVuQmluZFJlc2l6ZUV2ZW50KCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIOaMiemSruaVsOaNruWPmOabtOWQjuinpuWPkeajgOafpVxyXG4gICAqL1xyXG4gIHByaXZhdGUgYWZ0ZXJCaW5kVG9vbGJhckRhdGEoKSB7XHJcbiAgICBpZiAodGhpcy5uZ1pvbmUgJiYgdGhpcy50b29sYmFyICYmIHRoaXMudG9vbGJhci5jb250ZW50cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgIHRoaXMuX2NhbGN1bGF0ZVRvb2xiYXJEcm9wZG93bklzU2hvdygpO1xyXG4gICAgICAgICAgdGhpcy5fY2FsY3VsYXRlQnV0dG9uc1Nob3coKTtcclxuICAgICAgICB9LCAwKTtcclxuICAgICAgfSlcclxuICAgIH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICog5Yik5pat5LiL5ouJ5oyJ6ZKu5piv5ZCm5pi+56S6XHJcbiAgICovXHJcbiAgcHJpdmF0ZSBfY2FsY3VsYXRlVG9vbGJhckRyb3Bkb3duSXNTaG93KCkge1xyXG4gICAgaWYgKCF0aGlzLnRvb2xiYXJDb250YWluZXIgfHwgIXRoaXMudG9vbGJhciB8fCAhdGhpcy50b29sYmFyUG9zaXRpb24pIHtcclxuICAgICAgLy8g5a655Zmo5pyq5pi+56S677yM5rKh5pyJ5pWw5o2u77yM5rKh5pyJ5oyJ6ZKu5L2N572uXHJcbiAgICAgIHRoaXMudG9vbGJhckRwSGlkZGVuID0gdHJ1ZTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgYnRuUGFyZW50c0NvbnRhaW5lciA9IHRoaXMudG9vbGJhckNvbnRhaW5lci5uYXRpdmVFbGVtZW50LnBhcmVudEVsZW1lbnQ7XHJcbiAgICBpZiAodGhpcy5idG5QbGFjZUhvbGRlci5uYXRpdmVFbGVtZW50LnNjcm9sbFdpZHRoID4gYnRuUGFyZW50c0NvbnRhaW5lci5vZmZzZXRXaWR0aCkge1xyXG4gICAgICB0aGlzLnRvb2xiYXJEcEhpZGRlbiA9IGZhbHNlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy50b29sYmFyRHBIaWRkZW4gPSB0cnVlO1xyXG5cclxuICAgIH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICog6K6h566X5pi+56S655qE5oyJ6ZKu5Liq5pWw5Y+K5pu05aSa5Lit5pi+56S655qE5oyJ6ZKu5Liq5pWwXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBfY2FsY3VsYXRlQnV0dG9uc1Nob3coKSB7XHJcblxyXG4gICAgaWYgKCF0aGlzLnRvb2xiYXJDb250YWluZXIgfHwgIXRoaXMudG9vbGJhciB8fCAhdGhpcy50b29sYmFyUG9zaXRpb24pIHtcclxuICAgICAgLy8g5a655Zmo5pyq5pi+56S677yM5rKh5pyJ5pWw5o2u77yM5rKh5pyJ5oyJ6ZKu5L2N572uXHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLnRvb2xiYXJEcEhpZGRlbikge1xyXG4gICAgICB0aGlzLnRvb2xiYXJCdG5zID0gWy4uLnRoaXMudG9vbGJhci5jb250ZW50c107XHJcbiAgICAgIHRoaXMuaW5Nb3JlQnV0dG9uQ29udGVudHMgPSBbXTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgbGV0IHRvb2xiYXJQYXJlbnRDb250YWluZXJFbCA9IHRoaXMudG9vbGJhckNvbnRhaW5lci5uYXRpdmVFbGVtZW50LnBhcmVudEVsZW1lbnQ7XHJcbiAgICBsZXQgZGl2RWwgPSB0aGlzLnRvb2xiYXJDb250YWluZXIubmF0aXZlRWxlbWVudDtcclxuICAgIGxldCBidG5QbGFjZUhvbGRlckVsID0gdGhpcy5idG5QbGFjZUhvbGRlci5uYXRpdmVFbGVtZW50O1xyXG4gICAgbGV0IGJ0blBsYWNlSG9sZGVyQnRucyA9IGJ0blBsYWNlSG9sZGVyRWwucXVlcnlTZWxlY3RvckFsbCgnYnV0dG9uJyk7XHJcblxyXG4gICAgLy8g5pu05aSa5oyJ6ZKuXHJcbiAgICBjb25zdCBtb3JlQnV0dG9uID0gdG9vbGJhclBhcmVudENvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoJy5tb3JlYnRuJyk7XHJcbiAgICAvLyDorqHnrpfmjInpkq7nmoTlrr3luqYgICAgICBcclxuICAgIGxldCBiYXNpY1N0YXJ0ID0gcGFyc2VJbnQoYnRuUGxhY2VIb2xkZXJFbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0KTtcclxuICAgIGxldCBiYXNpY1dpZHRoID0gdG9vbGJhclBhcmVudENvbnRhaW5lckVsLm9mZnNldFdpZHRoIC0gbW9yZUJ1dHRvbi5vZmZzZXRXaWR0aCAtIDEyO1xyXG4gICAgbGV0IHRvb2xiYXJEcm9wZG93bkhpZGRlbiA9IHRydWU7XHJcbiAgICBsZXQgayA9IDBcclxuICAgIC8vIOWPquacieS4gOS4quaMiemSrlxyXG4gICAgaWYgKGJ0blBsYWNlSG9sZGVyQnRucy5sZW5ndGggPT0gMSkge1xyXG4gICAgICBpZiAoYnRuUGxhY2VIb2xkZXJFbC5vZmZzZXRXaWR0aCA+IGJhc2ljV2lkdGgpIHtcclxuICAgICAgICB0b29sYmFyRHJvcGRvd25IaWRkZW4gPSBmYWxzZTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBrID0gMTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZm9yIChrID0gMTsgayA8PSBidG5QbGFjZUhvbGRlckJ0bnMubGVuZ3RoIC0gMTsgaysrKSB7XHJcbiAgICAgICAgLy8g5aaC5p6c5YaF5a656LaF5Ye6LOiAg+iZkeWIsOaMiemSruS5i+mXtOeahOmXtOi3nVxyXG4gICAgICAgIGlmIChrID09IGJ0blBsYWNlSG9sZGVyQnRucy5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICBpZiAoYnRuUGxhY2VIb2xkZXJFbC5vZmZzZXRXaWR0aCA+IGJhc2ljV2lkdGgpIHtcclxuICAgICAgICAgICAgdG9vbGJhckRyb3Bkb3duSGlkZGVuID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGsgPSBrIC0gMTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChwYXJzZUludChidG5QbGFjZUhvbGRlckJ0bnNba10uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCkgLSBiYXNpY1N0YXJ0ID4gYmFzaWNXaWR0aCkge1xyXG4gICAgICAgICAgdG9vbGJhckRyb3Bkb3duSGlkZGVuID0gZmFsc2U7XHJcbiAgICAgICAgICBrID0gayAtIDE7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnRvb2xiYXJEcEhpZGRlbiA9IHRvb2xiYXJEcm9wZG93bkhpZGRlbjtcclxuICAgIGxldCBzaG93QnRucyA9IGRpdkVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ2J1dHRvbicpO1xyXG4gICAgbGV0IHJlc3VsdEJ0bnMgPSB0aGlzLnRvb2xiYXIuY29udGVudHMuZmlsdGVyKFxyXG4gICAgICAoaXRlbSwgaW5kZXgpID0+IHtcclxuICAgICAgICByZXR1cm4gaW5kZXggPCBrO1xyXG4gICAgICB9XHJcbiAgICApO1xyXG4gICAgdGhpcy50b29sYmFyQnRucyA9IHJlc3VsdEJ0bnMgPyBbLi4ucmVzdWx0QnRuc10gOiBbXTtcclxuICAgIC8vIGZvciAobGV0IG0gPSBrOyBtIDwgc2hvd0J0bnMubGVuZ3RoOyBtKyspIHtcclxuICAgIC8vICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKHNob3dCdG5zW21dLCAnZGlzcGxheScsICdub25lJyk7XHJcbiAgICAvLyB9XHJcbiAgICBpZiAodGhpcy50b29sYmFyLmNvbnRlbnRzICYmIHRoaXMudG9vbGJhci5jb250ZW50cy5sZW5ndGgpIHtcclxuICAgICAgdGhpcy5pbk1vcmVCdXR0b25Db250ZW50cyA9IHRoaXMudG9vbGJhci5jb250ZW50cy5maWx0ZXIoXHJcbiAgICAgICAgKGl0ZW0sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICByZXR1cm4gaW5kZXggPj0gaztcclxuICAgICAgICB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIOWcqOaMiemSrueKtuaAgeWPmOWMluaXtuino+mZpOmZkOWItlxyXG4gICAqL1xyXG4gIHByaXZhdGUgdW5CaW5kUmVzaXplRXZlbnQoKSB7XHJcbiAgICBpZiAodGhpcy5ybykge1xyXG4gICAgICBpZiAodGhpcy5yZXNpemVFbCkge1xyXG4gICAgICAgIHRoaXMucm8udW5vYnNlcnZlKHRoaXMucmVzaXplRWwpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMucm8gPSBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBAcmV0dXJuIHN0cmluZyBcclxuICAgKiAnJyDkuI3lrZjlnKjmjInpkq7vvIzml6DmiYDosJPkvY3nva5cclxuICAgKiAnaW5IZWFkJyDmjInpkq7lnKjlpLTpg6hcclxuICAgKiAnaW5Db250ZW50JyDmjInpkq7lnKjlhoXlrrnkvY3nva5cclxuICAgKi9cclxuICBwcml2YXRlIGdldFRvb2xiYXJQb3NpdGlvbigpIHtcclxuICAgIGlmICh0aGlzLnRvb2xiYXIgJiYgdGhpcy50b29sYmFyLmhhc093blByb3BlcnR5KCdwb3NpdGlvbicpICYmIHRoaXMudG9vbGJhci5oYXNPd25Qcm9wZXJ0eSgnY29udGVudHMnKSAmJiB0aGlzLnRvb2xiYXIuY29udGVudHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAvLyDlpoLmnpzmnInlsZ7mgKfvvIzkuJTmjInpkq7mnInlgLxcclxuICAgICAgaWYgKHRoaXMudG9vbGJhci5wb3NpdGlvbiA9PT0gJ2luSGVhZCcpIHtcclxuICAgICAgICByZXR1cm4gJ2luSGVhZCc7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuICdpbkNvbnRlbnQnO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gJyc7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIOWIpOaWreaYr+WQpuaYvuekuuOAgemakOiXj1xyXG4gICAqIEBwYXJhbSBpZCBcclxuICAgKiBAcGFyYW0gc3RhdGUgXHJcbiAgICovXHJcbiAgZ2V0VG9vbGJhclN0YXRlKGlkOiBzdHJpbmcsIHN0YXRlOiBPYnNlcnZhYmxlPGFueT4gPSB0aGlzLmJ0blN0YXRlcywgZGVmYXVsdFZhbHVlOiBib29sZWFuID0gZmFsc2UpIHtcclxuICAgIGlmIChzdGF0ZSkge1xyXG4gICAgICByZXR1cm4gc3RhdGUucGlwZShcclxuICAgICAgICBtYXAoKG46IGFueSkgPT4ge1xyXG4gICAgICAgICAgaWYgKG5baWRdID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS53YXJuKGDmnKrmib5JROS4uu+8miR7aWR9IOebuOWFs+eKtuaAgeiuvue9ru+8gWApO1xyXG4gICAgICAgICAgICByZXR1cm4gZGVmYXVsdFZhbHVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIG5baWRdO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gb2YoZGVmYXVsdFZhbHVlKTtcclxuICAgIH1cclxuICB9XHJcbiAgY2xpY2tIYW5kbGVyKGJ0bkluZm8pIHtcclxuICAgIGlmICghYnRuSW5mbykge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLmNsaWNrSXRlbXMubmV4dChidG5JbmZvKTtcclxuXHJcbiAgfVxyXG59XHJcbiJdfQ==