/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/*
 * @Author: 疯狂秀才(Lucas Huang)
 * @Date: 2019-08-14 15:22:21
 * @LastEditors: 疯狂秀才(Lucas Huang)
 * @LastEditTime: 2019-08-15 16:44:15
 * @QQ: 1055818239
 * @Version: v0.0.1
 */
import { Component, Input, ContentChild, HostBinding, ViewChild, Optional, NgZone, Injector, Renderer2, } from "@angular/core";
import { FarrisSectionTitleDirective } from "./directive/section-title.directive";
import { FarrisSectionHeaderDirective } from "./directive/section-header.directive";
import { FarrisSectionHcontentDirective } from "./directive/section-hcontent.directive";
import { FarrisSectionToolbarDirective, FarrisSectionViewChangeDirective, } from "./directive/section-toolbar.directive";
import { FarrisSectionExtendDirective } from "./directive/section-extend.directive";
import { FarrisSectionContentDirective } from "./directive/section-content.directive";
import { Observable, Subject, of } from "rxjs";
import ResizeObserver from "resize-observer-polyfill";
import { map, debounceTime } from "rxjs/operators";
export class FarrisSectionComponent {
    /**
     * @param {?} inject
     */
    constructor(inject) {
        this.inject = inject;
        this.contentCls = "";
        this.baseCls = true;
        this.maxStatus = false;
        // 是否显示header
        this.showHeader = true;
        // 是否支持最大化
        this.enableMaximize = false;
        /**
         * 是否启用収折功能
         * 默认不启用収折,值为''
         * 启用默认収折,值为'default'
         * 启用自定义収折,值为 'custom'
         *
         */
        this.enableAccordion = "";
        // section是否铺满
        this.fill = false;
        // 默认是是否展开
        this.expandStatus = true;
        // 就来按钮位置
        this.toolbarPosition = "";
        //
        this.toolbarBtns = [];
        // 工具栏按钮
        this._toolbar = null;
        //标记按钮工具栏是否隐藏[更多]按钮
        this.toolbarDpHidden = true;
        // 参照Tab中这样的处理方式有问题----延后修改
        // 是否被禁用的状态
        // 按照之前的逻辑，如果没有找到key，就说明被禁用
        this._disableDatas = new Subject();
        // 按照之前的逻辑，如果没有找到key，就说明可见
        this._visibleDatas = new Subject();
        this.clickThrottleTime = 350;
        this.clickItems = new Subject();
        // 用于计算响应时
        this.ro = null;
        this.resizeEl = null;
        this.inMoreButtonContents = [];
        if (this.inject) {
            this.ngZone = this.inject.get(NgZone, null);
            this.renderer = this.inject.get(Renderer2, null);
        }
    }
    /**
     * @return {?}
     */
    get fillCls() {
        return this.fill;
    }
    /**
     * @return {?}
     */
    get enableAccordionCls() {
        return this.enableAccordion == "default";
    }
    /**
     * @return {?}
     */
    get enableCollapseCls() {
        if (this.enableAccordion === "default" ||
            this.enableAccordion === "custom") {
            return !this.expandStatus;
        }
        else {
            return false;
        }
    }
    /**
     * @return {?}
     */
    get enableCustomAccordionCls() {
        return this.enableAccordion == "custom";
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set toolbar(value) {
        if (value) {
            this._toolbar = value;
            // 计算位置
            this.toolbarPosition = this.getToolbarPosition();
            //
            this.toolbarBtns = [...this.toolbar.contents];
            this.inMoreButtonContents = [];
            // 绑定事件
            this.bindResizeEvent();
            // 调整界面
            this.afterBindToolbarData();
        }
        else {
            this._toolbar = null;
            // 有位置
            this.toolbarPosition = "";
            this.toolbarBtns = [];
            this.inMoreButtonContents = [];
            // 移除绑定事件
            this.unBindResizeEvent();
        }
    }
    /**
     * @return {?}
     */
    get toolbar() {
        return this._toolbar;
    }
    /**
     * @param {?} values
     * @return {?}
     */
    set btnStates(values) {
        if (values) {
            if (this._disableDatas &&
                this._disableDatas.hasOwnProperty("unsubscribe")) {
                this._disableDatas["unsubscribe"]();
            }
            this._disableDatas = values;
        }
    }
    // 是否可见的状态
    /**
     * @param {?} values
     * @return {?}
     */
    set btnVisible(values) {
        if (values) {
            if (this._visibleDatas &&
                this._visibleDatas.hasOwnProperty("unsubscribe")) {
                this._visibleDatas["unsubscribe"]();
            }
            this._visibleDatas = values;
        }
    }
    // 用于提供循环效率
    /**
     * @param {?} index
     * @param {?} btn
     * @return {?}
     */
    trackByButton(index, btn) {
        return btn.id;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        // 标记点击事件
        this.clickSubscription = this.clickItems
            .pipe(debounceTime(this.clickThrottleTime))
            .subscribe((/**
         * @param {?} btnInfo
         * @return {?}
         */
        (btnInfo) => {
            if (btnInfo.click && typeof btnInfo.click == "function") {
                btnInfo.click({ context: this.context });
            }
        }));
        // 绑定状态
        this._disableDatas.subscribe((/**
         * @param {?} data
         * @return {?}
         */
        (data) => {
            // 调整按钮可用状态
            this.changeState(data, "disable");
        }));
        this._visibleDatas.subscribe((/**
         * @param {?} data
         * @return {?}
         */
        (data) => {
            // 调整按钮可见状态
            this.changeState(data, "visible");
        }));
    }
    /**
     * 获取按钮配置中，禁用、可见的属性
     * @param {?} btnItem
     * @param {?} stateProp
     * @return {?}
     */
    getState(btnItem, stateProp) {
        if (btnItem.hasOwnProperty(stateProp)) {
            return btnItem[stateProp];
        }
        // 不存在属性
        if (stateProp == "visible") {
            return true;
        }
        return false;
    }
    /**
     * 改变可用状态
     * @private
     * @param {?} values
     * @param {?} stateProp
     * @return {?}
     */
    changeState(values, stateProp) {
        /** @type {?} */
        const idArray = Object.keys(values);
        idArray.forEach((/**
         * @param {?} id
         * @return {?}
         */
        (id) => {
            /** @type {?} */
            const state = values[id];
            /** @type {?} */
            const item = this._findItemByID(id, this.toolbarBtns);
            if (item) {
                item[stateProp] = state;
            }
        }));
        this.inMoreButtonContents.forEach((/**
         * @param {?} item
         * @return {?}
         */
        (item) => {
            /** @type {?} */
            const findId = idArray.find((/**
             * @param {?} id
             * @return {?}
             */
            (id) => id == item.id));
            if (findId) {
                item[stateProp] = values[findId];
            }
        }));
    }
    /**
     * 查找
     * @private
     * @param {?} id
     * @param {?} datas
     * @return {?}
     */
    _findItemByID(id, datas) {
        return datas.find((/**
         * @param {?} item
         * @return {?}
         */
        (item) => item.id == id));
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        if (this.clickSubscription) {
            this.clickSubscription.unsubscribe();
            this.clickSubscription = null;
        }
        if (this._visibleDatas &&
            this._visibleDatas.hasOwnProperty("unsubscribe")) {
            this._visibleDatas["unsubscribe"]();
            this._visibleDatas = null;
        }
        if (this._disableDatas &&
            this._disableDatas.hasOwnProperty("unsubscribe")) {
            this._disableDatas["unsubscribe"]();
            this._disableDatas = null;
        }
        this.unBindResizeEvent();
    }
    /**
     * 绑定限制
     * @private
     * @return {?}
     */
    bindResizeEvent() {
        // 标记响应时
        if (this.ngZone && this.toolbar && this.toolbar.contents.length > 0) {
            this.ngZone.runOutsideAngular((/**
             * @return {?}
             */
            () => {
                setTimeout((/**
                 * @return {?}
                 */
                () => {
                    if (!this.toolbarContainer) {
                        return;
                    }
                    if (this.ro) {
                        if (this.toolbarContainer.nativeElement.parentElement ==
                            this.resizeEl) {
                            // 已绑定过
                            return;
                        }
                        else {
                            this.unBindResizeEvent();
                        }
                    }
                    if (this.ro === null) {
                        this.ro = new ResizeObserver((/**
                         * @param {?} el
                         * @return {?}
                         */
                        (el) => {
                            this._calculateToolbarDropdownIsShow();
                            this._calculateButtonsShow();
                        }));
                        this.resizeEl =
                            this.toolbarContainer.nativeElement.parentElement;
                        this.ro.observe(this.resizeEl);
                    }
                }), 0);
            }));
        }
        else {
            this.unBindResizeEvent();
        }
    }
    /**
     * 按钮数据变更后触发检查
     * @private
     * @return {?}
     */
    afterBindToolbarData() {
        if (this.ngZone && this.toolbar && this.toolbar.contents.length > 0) {
            this.ngZone.runOutsideAngular((/**
             * @return {?}
             */
            () => {
                setTimeout((/**
                 * @return {?}
                 */
                () => {
                    this._calculateToolbarDropdownIsShow();
                    this._calculateButtonsShow();
                }), 0);
            }));
        }
    }
    /**
     * 判断下拉按钮是否显示
     * @private
     * @return {?}
     */
    _calculateToolbarDropdownIsShow() {
        if (!this.toolbarContainer || !this.toolbar || !this.toolbarPosition) {
            // 容器未显示，没有数据，没有按钮位置
            this.toolbarDpHidden = true;
            return;
        }
        /** @type {?} */
        const btnParentsContainer = this.toolbarContainer.nativeElement.parentElement;
        if (this.btnPlaceHolder.nativeElement.scrollWidth >
            btnParentsContainer.offsetWidth) {
            this.toolbarDpHidden = false;
        }
        else {
            this.toolbarDpHidden = true;
        }
    }
    /**
     * 计算显示的按钮个数及更多中显示的按钮个数
     * @private
     * @return {?}
     */
    _calculateButtonsShow() {
        if (!this.toolbarContainer || !this.toolbar || !this.toolbarPosition) {
            // 容器未显示，没有数据，没有按钮位置
            return;
        }
        if (this.toolbarDpHidden) {
            this.toolbarBtns = [...this.toolbar.contents];
            this.inMoreButtonContents = [];
            return;
        }
        /** @type {?} */
        let toolbarParentContainerEl = this.toolbarContainer.nativeElement.parentElement;
        /** @type {?} */
        let divEl = this.toolbarContainer.nativeElement;
        /** @type {?} */
        let btnPlaceHolderEl = this.btnPlaceHolder.nativeElement;
        /** @type {?} */
        let btnPlaceHolderBtns = btnPlaceHolderEl.querySelectorAll("button");
        // 更多按钮
        /** @type {?} */
        const moreButton = toolbarParentContainerEl.querySelector(".morebtn");
        // 计算按钮的宽度
        /** @type {?} */
        let basicStart = parseInt(btnPlaceHolderEl.getBoundingClientRect().left);
        /** @type {?} */
        let basicWidth = toolbarParentContainerEl.offsetWidth - moreButton.offsetWidth - 12;
        /** @type {?} */
        let toolbarDropdownHidden = true;
        /** @type {?} */
        let k = 0;
        // 只有一个按钮
        if (btnPlaceHolderBtns.length == 1) {
            if (btnPlaceHolderEl.offsetWidth > basicWidth) {
                toolbarDropdownHidden = false;
            }
            else {
                k = 1;
            }
        }
        else {
            for (k = 1; k <= btnPlaceHolderBtns.length - 1; k++) {
                // 如果内容超出,考虑到按钮之间的间距
                if (k == btnPlaceHolderBtns.length - 1) {
                    if (btnPlaceHolderEl.offsetWidth > basicWidth) {
                        toolbarDropdownHidden = false;
                        k = k - 1;
                        break;
                    }
                }
                else if (parseInt(btnPlaceHolderBtns[k].getBoundingClientRect().left) -
                    basicStart >
                    basicWidth) {
                    toolbarDropdownHidden = false;
                    k = k - 1;
                    break;
                }
            }
        }
        this.toolbarDpHidden = toolbarDropdownHidden;
        /** @type {?} */
        let showBtns = divEl.querySelectorAll("button");
        /** @type {?} */
        let resultBtns = this.toolbar.contents.filter((/**
         * @param {?} item
         * @param {?} index
         * @return {?}
         */
        (item, index) => {
            return index < k;
        }));
        this.toolbarBtns = resultBtns ? [...resultBtns] : [];
        // for (let m = k; m < showBtns.length; m++) {
        //     this.renderer.setStyle(showBtns[m], 'display', 'none');
        // }
        if (this.toolbar.contents && this.toolbar.contents.length) {
            this.inMoreButtonContents = this.toolbar.contents.filter((/**
             * @param {?} item
             * @param {?} index
             * @return {?}
             */
            (item, index) => {
                return index >= k;
            }));
        }
    }
    /**
     * 在按钮状态变化时解除限制
     * @private
     * @return {?}
     */
    unBindResizeEvent() {
        if (this.ro) {
            if (this.resizeEl) {
                this.ro.unobserve(this.resizeEl);
            }
            this.ro = null;
        }
    }
    /**
     * @private
     * @return {?} string
     * '' 不存在按钮，无所谓位置
     * 'inHead' 按钮在头部
     * 'inContent' 按钮在内容位置
     */
    getToolbarPosition() {
        if (this.toolbar &&
            this.toolbar.hasOwnProperty("position") &&
            this.toolbar.hasOwnProperty("contents") &&
            this.toolbar.contents.length > 0) {
            // 如果有属性，且按钮有值
            if (this.toolbar.position === "inHead") {
                return "inHead";
            }
            else {
                return "inContent";
            }
        }
        return "";
    }
    /**
     * 判断是否显示、隐藏
     * @param {?} id
     * @param {?=} state
     * @param {?=} defaultValue
     * @return {?}
     */
    getToolbarState(id, state = this.btnStates, defaultValue = false) {
        if (state) {
            return state.pipe(map((/**
             * @param {?} n
             * @return {?}
             */
            (n) => {
                if (n[id] === undefined) {
                    // console.warn(`未找ID为：${id} 相关状态设置！`);
                    return defaultValue;
                }
                return n[id];
            })));
        }
        else {
            return of(defaultValue);
        }
    }
    /**
     * @param {?} btnInfo
     * @return {?}
     */
    clickHandler(btnInfo) {
        if (!btnInfo) {
            return;
        }
        this.clickItems.next(btnInfo);
    }
}
FarrisSectionComponent.decorators = [
    { type: Component, args: [{
                selector: "farris-section",
                template: "<div class=\"f-section-header\" [ngClass]=\"headerDirective && headerDirective.headerCls\" *ngIf=\"showHeader\">\r\n    \r\n    <div *ngIf=\"headerComponentType\" component-template [cmpRef]=\"headerComponentType\" [ctx]=\"ctx\"></div>\r\n\r\n    <ng-template [ngTemplateOutlet]=\"headerDirective.templateRef\"\r\n        *ngIf=\"!headerComponentType&&headerDirective && headerDirective.templateRef\"></ng-template>\r\n    <ng-template [ngIf]=\"!headerDirective\">\r\n        <div component-template *ngIf=\"titleComponentType\" [cmpRef]=\"titleComponentType\" [ctx]=\"ctx\"></div>\r\n        <ng-template [ngTemplateOutlet]=\"headerTitleDirective.templateRef\"\r\n            *ngIf=\"!titleComponentType&&headerTitleDirective && headerTitleDirective.templateRef\" [ngTemplateOutletContext]=\"{context:this.context,index:this.index }\"></ng-template>\r\n        <div *ngIf=\"!headerComponentType&&!titleComponentType&&(!headerTitleDirective||!headerTitleDirective.templateRef)\" class=\"f-title\"\r\n            (click)=\"this.expandStatus = !this.expandStatus\">\r\n            <h4 class=\"f-title-text\">{{ mainTitle }}</h4>\r\n            <span *ngIf=\"subTitle && subTitle.length\">{{\r\n            subTitle\r\n        }}</span>\r\n        </div>\r\n        <div class=\"f-content\"  *ngIf=\"contentComponentType\" component-template [cmpRef]=\"contentComponentType\" [ctx]=\"ctx\"></div>\r\n        <div class=\"f-content\" [ngClass]=\"\r\n            headerContentDirective &&\r\n            headerContentDirective.hcontentCls\r\n        \" *ngIf=\"\r\n            !contentComponentType&&headerContentDirective &&\r\n            headerContentDirective.templateRef\r\n        \">\r\n            <ng-template [ngTemplateOutlet]=\"headerContentDirective.templateRef\"></ng-template>\r\n        </div>\r\n        <div class=\"f-toolbar\"  *ngIf=\"toolbarComponentType\" component-template [cmpRef]=\"toolbarComponentType\" [ctx]=\"ctx\"></div>\r\n        <div class=\"f-toolbar\" [ngClass]=\"\r\n            headerToolbarDirective &&\r\n            headerToolbarDirective.toolbarCls\" *ngIf=\" !toolbarComponentType&&headerToolbarDirective &&headerToolbarDirective.templateRef \">\r\n            <ng-template [ngTemplateOutlet]=\"headerToolbarDirective.templateRef\" *ngIf=\"\r\n                headerToolbarDirective &&\r\n                headerToolbarDirective.templateRef\r\n            \"></ng-template>\r\n        </div>\r\n        <div #toolbarHeaderContainer class=\"f-section-toolbar f-section-header--toolbar\"\r\n            *ngIf=\"!toolbarComponentType&&!headerToolbarDirective&&toolbarPosition=='inHead'\">\r\n            <ng-container [ngTemplateOutlet]=\"toolbarBtnTmpl\"\r\n                [ngTemplateOutletContext]=\"{ datas: toolbarBtns, dpHidden:toolbarDpHidden,dpDatas:inMoreButtonContents}\">\r\n            </ng-container>\r\n        </div>\r\n        <div class=\"f-viewchange\" *ngIf=\"viewchagneComponentType\" component-template [cmpRef]=\"viewchagneComponentType\" [ctx]=\"ctx\"></div>\r\n        <div class=\"f-viewchange\" [ngClass]=\"viewChangeDirective && viewChangeDirective.viewChangeCls\"\r\n            *ngIf=\"!viewchagneComponentType&&viewChangeDirective &&viewChangeDirective.templateRef \">\r\n            <ng-template [ngTemplateOutlet]=\"viewChangeDirective.templateRef\"></ng-template>\r\n        </div>\r\n        <div class=\"f-max-accordion\" *ngIf=\"enableMaximize||enableAccordion!=''\">\r\n            <span class=\"f-icon\" *ngIf=\"enableMaximize\" [class.f-icon-maximize]=\"!maxStatus\"\r\n                [class.f-icon-minimize]=\"maxStatus\" (click)=\"this.maxStatus = !this.maxStatus\"> </span>\r\n            <button class=\"btn f-btn-collapse-expand f-btn-mx\" *ngIf=\"enableAccordion\"\r\n                [ngClass]=\"{ 'f-state-expand': expandStatus }\" (click)=\"this.expandStatus = !this.expandStatus\">\r\n                <span *ngIf=\"!expandStatus\">{{'section.expandLabel'|locale}}</span>\r\n                <span *ngIf=\"expandStatus\">{{'section.collapseLabel'|locale}}</span>\r\n            </button>\r\n        </div>\r\n    </ng-template>\r\n\r\n    <div class=\"f-section-header--btn-placeholder\" #btnPlaceholder *ngIf=\"!headerToolbarDirective&&toolbarPosition\">\r\n        <ng-container *ngFor=\"let btn of toolbar.contents\">\r\n            <button [ngClass]=\"btn.appearance.class\"\r\n                *ngIf=\"getToolbarState(btn.id, btnVisible,true) | async\">{{btn.title}}</button>\r\n        </ng-container>\r\n    </div>\r\n</div>\r\n<div class=\"f-section-header--btn-placeholder\" #btnPlaceholder *ngIf=\"!showHeader&&toolbarPosition=='inContent'\">\r\n    <ng-container *ngFor=\"let btn of toolbar.contents\">\r\n        <button [ngClass]=\"btn.appearance.class\"\r\n            *ngIf=\"getToolbarState(btn.id, btnVisible,true) | async\">{{btn.title}}</button>\r\n    </ng-container>\r\n</div>\r\n\r\n<div class=\"f-section-extend\" *ngIf=\"extendComponentType\" component-template [cmpRef]=\"extendComponentType\" [ctx]=\"ctx\">\r\n</div>\r\n\r\n<div class=\"f-section-extend\" [ngClass]=\"extendDirective && extendDirective.extendCls\" \r\n    *ngIf=\"!extendComponentType&&extendDirective && extendDirective.templateRef\">\r\n    <ng-template  [ngTemplateOutlet]=\"extendDirective.templateRef\"></ng-template>\r\n</div>\r\n\r\n<div class=\"f-section-content\" [ngClass]=\"contentCls\">\r\n    <div class=\"f-section-toolbar f-section-content--toolbar\"\r\n        *ngIf=\"!toolbarComponentType&&!headerToolbarDirective&&toolbarPosition=='inContent'\">\r\n        <ng-container [ngTemplateOutlet]=\"toolbarBtnTmpl\"\r\n            [ngTemplateOutletContext]=\"{ datas: toolbarBtns, dpHidden:toolbarDpHidden,dpDatas:inMoreButtonContents}\">\r\n        </ng-container>\r\n    </div>\r\n    <ng-content></ng-content>\r\n</div>\r\n<ng-template #toolbarBtnTmpl let-datas=\"datas\" let-dpHidden=\"dpHidden\" let-dpDatas=\"dpDatas\">\r\n    <div class=\"toolbar-btn-inline-flex\" #toolbarContainer>\r\n        <ng-container *ngFor=\"let btn of datas;trackBy:trackByButton\">\r\n            <button [attr.id]=\"btn.id\" [ngClass]=\"btn.appearance.class\"\r\n                *ngIf=\"getState(btn,'visible')\"\r\n                [disabled]=\"getState(btn,'disable')\"\r\n                (click)=\"clickHandler(btn)\">{{btn.title}}</button>\r\n        </ng-container>\r\n    </div>\r\n    <div class=\"btn-group sc-nav-btn\" ngbDropdown [hidden]=\"dpHidden\">\r\n        <button class=\"btn btn-link morebtn\" ngbDropdownToggle>{{'tabs.more' | locale}}</button>\r\n        <ul class=\"dropdown-menu\" ngbDropdownMenu *ngIf=\"dpDatas.length>0\">\r\n            <ng-container *ngFor=\"let dpBtn of dpDatas;trackBy:trackByButton\">\r\n                <li class=\"dropdown-item text-truncate px-2\"   *ngIf=\"getState(dpBtn,'visible')\">\r\n                    <button style=\"width:100%;\" [attr.id]=\"dpBtn.id\" class=\"btn btn-link text-left\"\r\n                        [class.disabled]=\"getState(dpBtn,'disable')\"\r\n                        (click)=\"clickHandler(dpBtn)\">{{dpBtn.title}}</button>\r\n                </li>\r\n            </ng-container>\r\n        </ul>\r\n    </div>\r\n</ng-template>",
                styles: [".f-section-header--btn-placeholder{position:absolute;display:-webkit-inline-box;display:inline-flex;top:-30px;left:0;opacity:0;overflow:hidden;z-index:-90}.f-section-content .toolbar-btn-inline-flex,.f-section-header .toolbar-btn-inline-flex{display:-webkit-inline-box;display:inline-flex;overflow:hidden}.f-section-header--toolbar{-webkit-box-flex:1;flex:1;-webkit-box-align:center;align-items:center;width:30%;display:-webkit-box;display:flex;-webkit-box-pack:end;justify-content:flex-end;margin-left:.875rem}.f-section-content--toolbar{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}"]
            }] }
];
/** @nocollapse */
FarrisSectionComponent.ctorParameters = () => [
    { type: Injector, decorators: [{ type: Optional }] }
];
FarrisSectionComponent.propDecorators = {
    contentCls: [{ type: Input }],
    baseCls: [{ type: HostBinding, args: ["class.f-section",] }],
    maxStatus: [{ type: HostBinding, args: ["class.f-section-maximize",] }],
    fillCls: [{ type: HostBinding, args: ["class.f-section-fill",] }],
    enableAccordionCls: [{ type: HostBinding, args: ["class.f-section-accordion",] }],
    enableCollapseCls: [{ type: HostBinding, args: ["class.f-state-collapse",] }],
    enableCustomAccordionCls: [{ type: HostBinding, args: ["class.f-section-custom-accordion",] }],
    mainTitle: [{ type: Input }],
    subTitle: [{ type: Input }],
    showHeader: [{ type: Input }],
    enableMaximize: [{ type: Input }],
    enableAccordion: [{ type: Input }],
    fill: [{ type: Input }],
    expandStatus: [{ type: Input }],
    context: [{ type: Input }],
    index: [{ type: Input }],
    toolbar: [{ type: Input }],
    ctx: [{ type: Input }],
    headerComponentType: [{ type: Input }],
    titleComponentType: [{ type: Input }],
    contentComponentType: [{ type: Input }],
    toolbarComponentType: [{ type: Input }],
    extendComponentType: [{ type: Input }],
    viewchagneComponentType: [{ type: Input }],
    headerDirective: [{ type: ContentChild, args: [FarrisSectionHeaderDirective,] }],
    headerTitleDirective: [{ type: ContentChild, args: [FarrisSectionTitleDirective,] }],
    headerContentDirective: [{ type: ContentChild, args: [FarrisSectionHcontentDirective,] }],
    headerToolbarDirective: [{ type: ContentChild, args: [FarrisSectionToolbarDirective,] }],
    extendDirective: [{ type: ContentChild, args: [FarrisSectionExtendDirective,] }],
    contentDirective: [{ type: ContentChild, args: [FarrisSectionContentDirective,] }],
    viewChangeDirective: [{ type: ContentChild, args: [FarrisSectionViewChangeDirective,] }],
    btnStates: [{ type: Input }],
    btnVisible: [{ type: Input }],
    clickThrottleTime: [{ type: Input }],
    toolbarContainer: [{ type: ViewChild, args: ["toolbarContainer",] }],
    btnPlaceHolder: [{ type: ViewChild, args: ["btnPlaceholder",] }]
};
if (false) {
    /** @type {?} */
    FarrisSectionComponent.prototype.contentCls;
    /** @type {?} */
    FarrisSectionComponent.prototype.baseCls;
    /** @type {?} */
    FarrisSectionComponent.prototype.maxStatus;
    /** @type {?} */
    FarrisSectionComponent.prototype.mainTitle;
    /** @type {?} */
    FarrisSectionComponent.prototype.subTitle;
    /** @type {?} */
    FarrisSectionComponent.prototype.showHeader;
    /** @type {?} */
    FarrisSectionComponent.prototype.enableMaximize;
    /**
     * 是否启用収折功能
     * 默认不启用収折,值为''
     * 启用默认収折,值为'default'
     * 启用自定义収折,值为 'custom'
     *
     * @type {?}
     */
    FarrisSectionComponent.prototype.enableAccordion;
    /** @type {?} */
    FarrisSectionComponent.prototype.fill;
    /** @type {?} */
    FarrisSectionComponent.prototype.expandStatus;
    /**
     * 事件上下文，解决按钮点击时没有上下文的问题
     * @type {?}
     */
    FarrisSectionComponent.prototype.context;
    /** @type {?} */
    FarrisSectionComponent.prototype.index;
    /** @type {?} */
    FarrisSectionComponent.prototype.toolbarPosition;
    /** @type {?} */
    FarrisSectionComponent.prototype.toolbarBtns;
    /**
     * @type {?}
     * @private
     */
    FarrisSectionComponent.prototype._toolbar;
    /** @type {?} */
    FarrisSectionComponent.prototype.toolbarDpHidden;
    /** @type {?} */
    FarrisSectionComponent.prototype.ctx;
    /** @type {?} */
    FarrisSectionComponent.prototype.headerComponentType;
    /** @type {?} */
    FarrisSectionComponent.prototype.titleComponentType;
    /** @type {?} */
    FarrisSectionComponent.prototype.contentComponentType;
    /** @type {?} */
    FarrisSectionComponent.prototype.toolbarComponentType;
    /** @type {?} */
    FarrisSectionComponent.prototype.extendComponentType;
    /** @type {?} */
    FarrisSectionComponent.prototype.viewchagneComponentType;
    /** @type {?} */
    FarrisSectionComponent.prototype.headerDirective;
    /** @type {?} */
    FarrisSectionComponent.prototype.headerTitleDirective;
    /** @type {?} */
    FarrisSectionComponent.prototype.headerContentDirective;
    /** @type {?} */
    FarrisSectionComponent.prototype.headerToolbarDirective;
    /** @type {?} */
    FarrisSectionComponent.prototype.extendDirective;
    /** @type {?} */
    FarrisSectionComponent.prototype.contentDirective;
    /** @type {?} */
    FarrisSectionComponent.prototype.viewChangeDirective;
    /** @type {?} */
    FarrisSectionComponent.prototype._disableDatas;
    /** @type {?} */
    FarrisSectionComponent.prototype._visibleDatas;
    /** @type {?} */
    FarrisSectionComponent.prototype.clickThrottleTime;
    /** @type {?} */
    FarrisSectionComponent.prototype.toolbarContainer;
    /** @type {?} */
    FarrisSectionComponent.prototype.btnPlaceHolder;
    /**
     * @type {?}
     * @private
     */
    FarrisSectionComponent.prototype.clickItems;
    /**
     * @type {?}
     * @private
     */
    FarrisSectionComponent.prototype.clickSubscription;
    /**
     * @type {?}
     * @private
     */
    FarrisSectionComponent.prototype.ro;
    /**
     * @type {?}
     * @private
     */
    FarrisSectionComponent.prototype.resizeEl;
    /**
     * @type {?}
     * @private
     */
    FarrisSectionComponent.prototype.ngZone;
    /**
     * @type {?}
     * @private
     */
    FarrisSectionComponent.prototype.renderer;
    /** @type {?} */
    FarrisSectionComponent.prototype.inMoreButtonContents;
    /**
     * @type {?}
     * @private
     */
    FarrisSectionComponent.prototype.inject;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VjdGlvbi5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL3VpLXNlY3Rpb24vIiwic291cmNlcyI6WyJsaWIvc2VjdGlvbi5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBUUEsT0FBTyxFQUNILFNBQVMsRUFFVCxLQUFLLEVBQ0wsWUFBWSxFQUNaLFdBQVcsRUFFWCxTQUFTLEVBQ1QsUUFBUSxFQUNSLE1BQU0sRUFDTixRQUFRLEVBRVIsU0FBUyxHQUNaLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBRSwyQkFBMkIsRUFBRSxNQUFNLHFDQUFxQyxDQUFDO0FBQ2xGLE9BQU8sRUFBRSw0QkFBNEIsRUFBRSxNQUFNLHNDQUFzQyxDQUFDO0FBQ3BGLE9BQU8sRUFBRSw4QkFBOEIsRUFBRSxNQUFNLHdDQUF3QyxDQUFDO0FBQ3hGLE9BQU8sRUFDSCw2QkFBNkIsRUFDN0IsZ0NBQWdDLEdBQ25DLE1BQU0sdUNBQXVDLENBQUM7QUFDL0MsT0FBTyxFQUFFLDRCQUE0QixFQUFFLE1BQU0sc0NBQXNDLENBQUM7QUFDcEYsT0FBTyxFQUFFLDZCQUE2QixFQUFFLE1BQU0sdUNBQXVDLENBQUM7QUFDdEYsT0FBTyxFQUFFLFVBQVUsRUFBRSxPQUFPLEVBQWdCLEVBQUUsRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUU3RCxPQUFPLGNBQWMsTUFBTSwwQkFBMEIsQ0FBQztBQUN0RCxPQUFPLEVBQUUsR0FBRyxFQUFFLFlBQVksRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBT25ELE1BQU0sT0FBTyxzQkFBc0I7Ozs7SUF3Sy9CLFlBQWdDLE1BQWdCO1FBQWhCLFdBQU0sR0FBTixNQUFNLENBQVU7UUF2S3ZDLGVBQVUsR0FBRyxFQUFFLENBQUM7UUFDTyxZQUFPLEdBQUcsSUFBSSxDQUFDO1FBQ04sY0FBUyxHQUFZLEtBQUssQ0FBQzs7UUE0QjNELGVBQVUsR0FBRyxJQUFJLENBQUM7O1FBRWxCLG1CQUFjLEdB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RCxzREFBb0Q7O0lBRXBELHNEQUFvRDs7SUFFcEQscURBQW1EOztJQUVuRCx5REFBdUQ7O0lBR3ZELGlEQUFpRTs7SUFFakUsc0RBQXFFOztJQUVyRSx3REFBMEU7O0lBRTFFLHdEQUF5RTs7SUFFekUsaURBQWlFOztJQUVqRSxrREFBbUU7O0lBRW5FLHFEQUF5RTs7SUFLekUsK0NBQ2tCOztJQWNsQiwrQ0FDa0I7O0lBY2xCLG1EQUFpQzs7SUFHakMsa0RBQWdEOztJQUVoRCxnREFBNEM7Ozs7O0lBRTVDLDRDQUF3Qzs7Ozs7SUFDeEMsbURBQXdDOzs7OztJQU14QyxvQ0FBa0M7Ozs7O0lBQ2xDLDBDQUF3Qjs7Ozs7SUFFeEIsd0NBQWU7Ozs7O0lBRWYsMENBQWlCOztJQUNqQixzREFBMEM7Ozs7O0lBRTlCLHdDQUFvQyIsInNvdXJjZXNDb250ZW50IjpbIi8qXHJcbiAqIEBBdXRob3I6IOeWr+eLguengOaJjShMdWNhcyBIdWFuZylcclxuICogQERhdGU6IDIwMTktMDgtMTQgMTU6MjI6MjFcclxuICogQExhc3RFZGl0b3JzOiDnlq/ni4Lnp4DmiY0oTHVjYXMgSHVhbmcpXHJcbiAqIEBMYXN0RWRpdFRpbWU6IDIwMTktMDgtMTUgMTY6NDQ6MTVcclxuICogQFFROiAxMDU1ODE4MjM5XHJcbiAqIEBWZXJzaW9uOiB2MC4wLjFcclxuICovXHJcbmltcG9ydCB7XHJcbiAgICBDb21wb25lbnQsXHJcbiAgICBPbkluaXQsXHJcbiAgICBJbnB1dCxcclxuICAgIENvbnRlbnRDaGlsZCxcclxuICAgIEhvc3RCaW5kaW5nLFxyXG4gICAgT25EZXN0cm95LFxyXG4gICAgVmlld0NoaWxkLFxyXG4gICAgT3B0aW9uYWwsXHJcbiAgICBOZ1pvbmUsXHJcbiAgICBJbmplY3RvcixcclxuICAgIEVsZW1lbnRSZWYsXHJcbiAgICBSZW5kZXJlcjIsXHJcbn0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcclxuaW1wb3J0IHsgRmFycmlzU2VjdGlvblRpdGxlRGlyZWN0aXZlIH0gZnJvbSBcIi4vZGlyZWN0aXZlL3NlY3Rpb24tdGl0bGUuZGlyZWN0aXZlXCI7XHJcbmltcG9ydCB7IEZhcnJpc1NlY3Rpb25IZWFkZXJEaXJlY3RpdmUgfSBmcm9tIFwiLi9kaXJlY3RpdmUvc2VjdGlvbi1oZWFkZXIuZGlyZWN0aXZlXCI7XHJcbmltcG9ydCB7IEZhcnJpc1NlY3Rpb25IY29udGVudERpcmVjdGl2ZSB9IGZyb20gXCIuL2RpcmVjdGl2ZS9zZWN0aW9uLWhjb250ZW50LmRpcmVjdGl2ZVwiO1xyXG5pbXBvcnQge1xyXG4gICAgRmFycmlzU2VjdGlvblRvb2xiYXJEaXJlY3RpdmUsXHJcbiAgICBGYXJyaXNTZWN0aW9uVmlld0NoYW5nZURpcmVjdGl2ZSxcclxufSBmcm9tIFwiLi9kaXJlY3RpdmUvc2VjdGlvbi10b29sYmFyLmRpcmVjdGl2ZVwiO1xyXG5pbXBvcnQgeyBGYXJyaXNTZWN0aW9uRXh0ZW5kRGlyZWN0aXZlIH0gZnJvbSBcIi4vZGlyZWN0aXZlL3NlY3Rpb24tZXh0ZW5kLmRpcmVjdGl2ZVwiO1xyXG5pbXBvcnQgeyBGYXJyaXNTZWN0aW9uQ29udGVudERpcmVjdGl2ZSB9IGZyb20gXCIuL2RpcmVjdGl2ZS9zZWN0aW9uLWNvbnRlbnQuZGlyZWN0aXZlXCI7XHJcbmltcG9ydCB7IE9ic2VydmFibGUsIFN1YmplY3QsIFN1YnNjcmlwdGlvbiwgb2YgfSBmcm9tIFwicnhqc1wiO1xyXG5pbXBvcnQgeyBUb29sYmFyQ29uZmlnLCBCdXR0b25Db25maWcgfSBmcm9tIFwiLi90b29sYmFyLmNvbmZpZ1wiO1xyXG5pbXBvcnQgUmVzaXplT2JzZXJ2ZXIgZnJvbSBcInJlc2l6ZS1vYnNlcnZlci1wb2x5ZmlsbFwiO1xyXG5pbXBvcnQgeyBtYXAsIGRlYm91bmNlVGltZSB9IGZyb20gXCJyeGpzL29wZXJhdG9yc1wiO1xyXG5pbXBvcnQgeyBDb21wb25lbnRUZW1wbGF0ZVJlZiB9IGZyb20gXCJAZmFycmlzL3VpLWNvbW1vblwiO1xyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiBcImZhcnJpcy1zZWN0aW9uXCIsXHJcbiAgICB0ZW1wbGF0ZVVybDogXCIuL3NlY3Rpb24uY29tcG9uZW50Lmh0bWxcIixcclxuICAgIHN0eWxlVXJsczogW1wiLi9zZWN0aW9uLmNvbXBvbmVudC5jc3NcIl0sXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBGYXJyaXNTZWN0aW9uQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkRlc3Ryb3kge1xyXG4gICAgQElucHV0KCkgY29udGVudENscyA9IFwiXCI7XHJcbiAgICBASG9zdEJpbmRpbmcoXCJjbGFzcy5mLXNlY3Rpb25cIikgYmFzZUNscyA9IHRydWU7XHJcbiAgICBASG9zdEJpbmRpbmcoXCJjbGFzcy5mLXNlY3Rpb24tbWF4aW1pemVcIikgbWF4U3RhdHVzOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBASG9zdEJpbmRpbmcoXCJjbGFzcy5mLXNlY3Rpb24tZmlsbFwiKSBnZXQgZmlsbENscygpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5maWxsO1xyXG4gICAgfVxyXG4gICAgQEhvc3RCaW5kaW5nKFwiY2xhc3MuZi1zZWN0aW9uLWFjY29yZGlvblwiKVxyXG4gICAgZ2V0IGVuYWJsZUFjY29yZGlvbkNscygpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5lbmFibGVBY2NvcmRpb24gPT0gXCJkZWZhdWx0XCI7XHJcbiAgICB9XHJcbiAgICBASG9zdEJpbmRpbmcoXCJjbGFzcy5mLXN0YXRlLWNvbGxhcHNlXCIpIGdldCBlbmFibGVDb2xsYXBzZUNscygpOiBib29sZWFuIHtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIHRoaXMuZW5hYmxlQWNjb3JkaW9uID09PSBcImRlZmF1bHRcIiB8fFxyXG4gICAgICAgICAgICB0aGlzLmVuYWJsZUFjY29yZGlvbiA9PT0gXCJjdXN0b21cIlxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICByZXR1cm4gIXRoaXMuZXhwYW5kU3RhdHVzO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgQEhvc3RCaW5kaW5nKFwiY2xhc3MuZi1zZWN0aW9uLWN1c3RvbS1hY2NvcmRpb25cIilcclxuICAgIGdldCBlbmFibGVDdXN0b21BY2NvcmRpb25DbHMoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5hYmxlQWNjb3JkaW9uID09IFwiY3VzdG9tXCI7XHJcbiAgICB9XHJcbiAgICAvLyDkuLvmoIfpophcclxuICAgIEBJbnB1dCgpIG1haW5UaXRsZTogc3RyaW5nO1xyXG4gICAgLy8g5Ymv5qCH6aKYXHJcbiAgICBASW5wdXQoKSBzdWJUaXRsZTogc3RyaW5nO1xyXG4gICAgLy8g5piv5ZCm5pi+56S6aGVhZGVyXHJcbiAgICBASW5wdXQoKSBzaG93SGVhZGVyID0gdHJ1ZTtcclxuICAgIC8vIOaYr+WQpuaUr+aMgeacgOWkp+WMllxyXG4gICAgQElucHV0KCkgZW5hYmxlTWF4aW1pemUgPSBmYWxzZTtcclxuICAgIC8qKlxyXG4gICAgICog5piv5ZCm5ZCv55So5Y+O5oqY5Yqf6IO9XHJcbiAgICAgKiDpu5jorqTkuI3lkK/nlKjlj47mipgs5YC85Li6JydcclxuICAgICAqIOWQr+eUqOm7mOiupOWPjuaKmCzlgLzkuLonZGVmYXVsdCdcclxuICAgICAqIOWQr+eUqOiHquWumuS5ieWPjuaKmCzlgLzkuLogJ2N1c3RvbSdcclxuICAgICAqKi9cclxuICAgIEBJbnB1dCgpIGVuYWJsZUFjY29yZGlvbiA9IFwiXCI7XHJcbiAgICAvLyBzZWN0aW9u5piv5ZCm6ZO65ruhXHJcbiAgICBASW5wdXQoKSBmaWxsID0gZmFsc2U7XHJcbiAgICAvLyDpu5jorqTmmK/mmK/lkKblsZXlvIBcclxuICAgIEBJbnB1dCgpIGV4cGFuZFN0YXR1cyA9IHRydWU7XHJcbiAgICAvKipcclxuICAgICAqIOS6i+S7tuS4iuS4i+aWh++8jOino+WGs+aMiemSrueCueWHu+aXtuayoeacieS4iuS4i+aWh+eahOmXrumimFxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBjb250ZXh0OiBhbnk7XHJcbiAgICBASW5wdXQoKSBpbmRleDogYW55O1xyXG4gICAgLy8g5bCx5p2l5oyJ6ZKu5L2N572uXHJcbiAgICB0b29sYmFyUG9zaXRpb24gPSBcIlwiO1xyXG4gICAgLy9cclxuICAgIHRvb2xiYXJCdG5zID0gW107XHJcbiAgICAvLyDlt6XlhbfmoI/mjInpkq5cclxuICAgIHByaXZhdGUgX3Rvb2xiYXI6IFRvb2xiYXJDb25maWcgfCBudWxsID0gbnVsbDtcclxuICAgIEBJbnB1dCgpXHJcbiAgICBzZXQgdG9vbGJhcih2YWx1ZTogVG9vbGJhckNvbmZpZyB8IG51bGwpIHtcclxuICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy5fdG9vbGJhciA9IHZhbHVlO1xyXG4gICAgICAgICAgICAvLyDorqHnrpfkvY3nva5cclxuICAgICAgICAgICAgdGhpcy50b29sYmFyUG9zaXRpb24gPSB0aGlzLmdldFRvb2xiYXJQb3NpdGlvbigpO1xyXG4gICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICB0aGlzLnRvb2xiYXJCdG5zID0gWy4uLnRoaXMudG9vbGJhci5jb250ZW50c107XHJcbiAgICAgICAgICAgIHRoaXMuaW5Nb3JlQnV0dG9uQ29udGVudHMgPSBbXTtcclxuICAgICAgICAgICAgLy8g57uR5a6a5LqL5Lu2XHJcbiAgICAgICAgICAgIHRoaXMuYmluZFJlc2l6ZUV2ZW50KCk7XHJcbiAgICAgICAgICAgIC8vIOiwg+aVtOeVjOmdolxyXG4gICAgICAgICAgICB0aGlzLmFmdGVyQmluZFRvb2xiYXJEYXRhKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fdG9vbGJhciA9IG51bGw7XHJcbiAgICAgICAgICAgIC8vIOacieS9jee9rlxyXG4gICAgICAgICAgICB0aGlzLnRvb2xiYXJQb3NpdGlvbiA9IFwiXCI7XHJcbiAgICAgICAgICAgIHRoaXMudG9vbGJhckJ0bnMgPSBbXTtcclxuICAgICAgICAgICAgdGhpcy5pbk1vcmVCdXR0b25Db250ZW50cyA9IFtdO1xyXG4gICAgICAgICAgICAvLyDnp7vpmaTnu5Hlrprkuovku7ZcclxuICAgICAgICAgICAgdGhpcy51bkJpbmRSZXNpemVFdmVudCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldCB0b29sYmFyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl90b29sYmFyO1xyXG4gICAgfVxyXG4gICAgLy/moIforrDmjInpkq7lt6XlhbfmoI/mmK/lkKbpmpDol49b5pu05aSaXeaMiemSrlxyXG4gICAgdG9vbGJhckRwSGlkZGVuID0gdHJ1ZTtcclxuICAgIEBJbnB1dCgpIGN0eDtcclxuICAgIC8vIHNlY3Rpb27lpLTpg6hcclxuICAgIEBJbnB1dCgpIGhlYWRlckNvbXBvbmVudFR5cGU6IENvbXBvbmVudFRlbXBsYXRlUmVmO1xyXG4gICAgIC8vIHNlY3Rpb27lpLTpg6jmoIfpopjljLrmqKHmnb9cclxuICAgIEBJbnB1dCgpIHRpdGxlQ29tcG9uZW50VHlwZTogQ29tcG9uZW50VGVtcGxhdGVSZWY7XHJcbiAgICAvL3NlY3Rpb27lpLTpg6jlj6/mianlsZXljLrln5/mqKHmnb9cclxuICAgIEBJbnB1dCgpIGNvbnRlbnRDb21wb25lbnRUeXBlOiBDb21wb25lbnRUZW1wbGF0ZVJlZjtcclxuICAgICAvL3NlY3Rpb27lpLTpg6jlt6XlhbfmoI/ljLrln5/mqKHmnb9cclxuICAgIEBJbnB1dCgpIHRvb2xiYXJDb21wb25lbnRUeXBlOiBDb21wb25lbnRUZW1wbGF0ZVJlZjtcclxuICAgIC8vc2VjdGlvbuWPr+aJqeWxleWMuuWfn+aooeadv+KAlOKAlOWGheWuueWMuuS4iumdoueahOaJqeWxle+8jOagh+mimOS4i+mdolxyXG4gICAgQElucHV0KCkgZXh0ZW5kQ29tcG9uZW50VHlwZTogQ29tcG9uZW50VGVtcGxhdGVSZWY7XHJcbiAgICAvL3NlY3Rpb27lpLTpg6hWaWV3Q2hhbmdl5Yy65Z+f5qih5p2/XHJcbiAgICBASW5wdXQoKSB2aWV3Y2hhZ25lQ29tcG9uZW50VHlwZTogQ29tcG9uZW50VGVtcGxhdGVSZWY7XHJcblxyXG4gICAgLy8gc2VjdGlvbuWktOmDqOaooeadv1xyXG4gICAgQENvbnRlbnRDaGlsZChGYXJyaXNTZWN0aW9uSGVhZGVyRGlyZWN0aXZlKSBoZWFkZXJEaXJlY3RpdmU6IGFueTtcclxuICAgIC8vIHNlY3Rpb27lpLTpg6jmoIfpopjljLrmqKHmnb9cclxuICAgIEBDb250ZW50Q2hpbGQoRmFycmlzU2VjdGlvblRpdGxlRGlyZWN0aXZlKSBoZWFkZXJUaXRsZURpcmVjdGl2ZTogYW55O1xyXG4gICAgLy9zZWN0aW9u5aS06YOo5Y+v5omp5bGV5Yy65Z+f5qih5p2/XHJcbiAgICBAQ29udGVudENoaWxkKEZhcnJpc1NlY3Rpb25IY29udGVudERpcmVjdGl2ZSkgaGVhZGVyQ29udGVudERpcmVjdGl2ZTogYW55O1xyXG4gICAgLy9zZWN0aW9u5aS06YOo5bel5YW35qCP5Yy65Z+f5qih5p2/XHJcbiAgICBAQ29udGVudENoaWxkKEZhcnJpc1NlY3Rpb25Ub29sYmFyRGlyZWN0aXZlKSBoZWFkZXJUb29sYmFyRGlyZWN0aXZlOiBhbnk7XHJcbiAgICAvL3NlY3Rpb27lj6/mianlsZXljLrln5/mqKHmnb/igJTigJTlhoXlrrnljLrkuIrpnaLnmoTmianlsZXvvIzmoIfpopjkuIvpnaJcclxuICAgIEBDb250ZW50Q2hpbGQoRmFycmlzU2VjdGlvbkV4dGVuZERpcmVjdGl2ZSkgZXh0ZW5kRGlyZWN0aXZlOiBhbnk7XHJcbiAgICAvL3NlY3Rpb27lhoXlrrnljLrln5/mqKHmnb9cclxuICAgIEBDb250ZW50Q2hpbGQoRmFycmlzU2VjdGlvbkNvbnRlbnREaXJlY3RpdmUpIGNvbnRlbnREaXJlY3RpdmU6IGFueTtcclxuICAgIC8vc2VjdGlvbuWktOmDqFZpZXdDaGFuZ2XljLrln5/mqKHmnb9cclxuICAgIEBDb250ZW50Q2hpbGQoRmFycmlzU2VjdGlvblZpZXdDaGFuZ2VEaXJlY3RpdmUpIHZpZXdDaGFuZ2VEaXJlY3RpdmU6IGFueTtcclxuXHJcbiAgICAvLyDlj4LnhadUYWLkuK3ov5nmoLfnmoTlpITnkIbmlrnlvI/mnInpl67popgtLS0t5bu25ZCO5L+u5pS5XHJcbiAgICAvLyDmmK/lkKbooqvnpoHnlKjnmoTnirbmgIFcclxuICAgIC8vIOaMieeFp+S5i+WJjeeahOmAu+i+ke+8jOWmguaenOayoeacieaJvuWIsGtlee+8jOWwseivtOaYjuiiq+emgeeUqFxyXG4gICAgX2Rpc2FibGVEYXRhczogT2JzZXJ2YWJsZTxBcnJheTx7IFtrZXk6IHN0cmluZ106IGJvb2xlYW4gfT4+ID1cclxuICAgICAgICBuZXcgU3ViamVjdCgpO1xyXG4gICAgQElucHV0KClcclxuICAgIHNldCBidG5TdGF0ZXModmFsdWVzOiBPYnNlcnZhYmxlPEFycmF5PHsgW2tleTogc3RyaW5nXTogYm9vbGVhbiB9Pj4pIHtcclxuICAgICAgICBpZiAodmFsdWVzKSB7XHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgIHRoaXMuX2Rpc2FibGVEYXRhcyAmJlxyXG4gICAgICAgICAgICAgICAgdGhpcy5fZGlzYWJsZURhdGFzLmhhc093blByb3BlcnR5KFwidW5zdWJzY3JpYmVcIilcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9kaXNhYmxlRGF0YXNbXCJ1bnN1YnNjcmliZVwiXSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX2Rpc2FibGVEYXRhcyA9IHZhbHVlcztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyDmjInnhafkuYvliY3nmoTpgLvovpHvvIzlpoLmnpzmsqHmnInmib7liLBrZXnvvIzlsLHor7TmmI7lj6/op4FcclxuICAgIF92aXNpYmxlRGF0YXM6IE9ic2VydmFibGU8QXJyYXk8eyBba2V5OiBzdHJpbmddOiBib29sZWFuIH0+PiA9XHJcbiAgICAgICAgbmV3IFN1YmplY3QoKTtcclxuICAgIC8vIOaYr+WQpuWPr+ingeeahOeKtuaAgVxyXG4gICAgQElucHV0KClcclxuICAgIHNldCBidG5WaXNpYmxlKHZhbHVlczogT2JzZXJ2YWJsZTxBcnJheTx7IFtrZXk6IHN0cmluZ106IGJvb2xlYW4gfT4+KSB7XHJcbiAgICAgICAgaWYgKHZhbHVlcykge1xyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICB0aGlzLl92aXNpYmxlRGF0YXMgJiZcclxuICAgICAgICAgICAgICAgIHRoaXMuX3Zpc2libGVEYXRhcy5oYXNPd25Qcm9wZXJ0eShcInVuc3Vic2NyaWJlXCIpXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdmlzaWJsZURhdGFzW1widW5zdWJzY3JpYmVcIl0oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl92aXNpYmxlRGF0YXMgPSB2YWx1ZXM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgQElucHV0KCkgY2xpY2tUaHJvdHRsZVRpbWUgPSAzNTA7XHJcblxyXG4gICAgLy8g6YCa6L+H5oyJ6ZKu5pWw57uE5pi+56S65bel5YW35qCPXHJcbiAgICBAVmlld0NoaWxkKFwidG9vbGJhckNvbnRhaW5lclwiKSB0b29sYmFyQ29udGFpbmVyO1xyXG4gICAgLy8g6K6h566X5bel5YW35qCP5oyJ6ZKu5a695bqm55qE6L6F5Yqp5Yy65Z+fXHJcbiAgICBAVmlld0NoaWxkKFwiYnRuUGxhY2Vob2xkZXJcIikgYnRuUGxhY2VIb2xkZXI7XHJcblxyXG4gICAgcHJpdmF0ZSBjbGlja0l0ZW1zID0gbmV3IFN1YmplY3Q8YW55PigpO1xyXG4gICAgcHJpdmF0ZSBjbGlja1N1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uO1xyXG4gICAgLy8g55So5LqO5o+Q5L6b5b6q546v5pWI546HXHJcbiAgICB0cmFja0J5QnV0dG9uKGluZGV4OiBudW1iZXIsIGJ0bjogYW55KTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gYnRuLmlkO1xyXG4gICAgfVxyXG4gICAgLy8g55So5LqO6K6h566X5ZON5bqU5pe2XHJcbiAgICBwcml2YXRlIHJvOiBSZXNpemVPYnNlcnZlciA9IG51bGw7XHJcbiAgICBwcml2YXRlIHJlc2l6ZUVsID0gbnVsbDtcclxuICAgIC8vIOWkhOeQhuWPmOWMllxyXG4gICAgcHJpdmF0ZSBuZ1pvbmU7XHJcbiAgICAvL1xyXG4gICAgcHJpdmF0ZSByZW5kZXJlcjtcclxuICAgIGluTW9yZUJ1dHRvbkNvbnRlbnRzOiBCdXR0b25Db25maWdbXSA9IFtdO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKEBPcHRpb25hbCgpIHByaXZhdGUgaW5qZWN0OiBJbmplY3Rvcikge1xyXG4gICAgICAgIGlmICh0aGlzLmluamVjdCkge1xyXG4gICAgICAgICAgICB0aGlzLm5nWm9uZSA9IHRoaXMuaW5qZWN0LmdldChOZ1pvbmUsIG51bGwpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyID0gdGhpcy5pbmplY3QuZ2V0KFJlbmRlcmVyMiwgbnVsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG5nT25Jbml0KCkge1xyXG4gICAgICAgIC8vIOagh+iusOeCueWHu+S6i+S7tlxyXG4gICAgICAgIHRoaXMuY2xpY2tTdWJzY3JpcHRpb24gPSB0aGlzLmNsaWNrSXRlbXNcclxuICAgICAgICAgICAgLnBpcGUoZGVib3VuY2VUaW1lKHRoaXMuY2xpY2tUaHJvdHRsZVRpbWUpKVxyXG4gICAgICAgICAgICAuc3Vic2NyaWJlKChidG5JbmZvOiBCdXR0b25Db25maWcpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChidG5JbmZvLmNsaWNrICYmIHR5cGVvZiBidG5JbmZvLmNsaWNrID09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ0bkluZm8uY2xpY2soeyBjb250ZXh0OiB0aGlzLmNvbnRleHQgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIC8vIOe7keWumueKtuaAgVxyXG4gICAgICAgIHRoaXMuX2Rpc2FibGVEYXRhcy5zdWJzY3JpYmUoKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgLy8g6LCD5pW05oyJ6ZKu5Y+v55So54q25oCBXHJcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlU3RhdGUoZGF0YSwgXCJkaXNhYmxlXCIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuX3Zpc2libGVEYXRhcy5zdWJzY3JpYmUoKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgLy8g6LCD5pW05oyJ6ZKu5Y+v6KeB54q25oCBXHJcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlU3RhdGUoZGF0YSwgXCJ2aXNpYmxlXCIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflj5bmjInpkq7phY3nva7kuK3vvIznpoHnlKjjgIHlj6/op4HnmoTlsZ7mgKdcclxuICAgICAqIEBwYXJhbSBpZFxyXG4gICAgICogQHBhcmFtIHN0YXRlUHJvcFxyXG4gICAgICovXHJcbiAgICBnZXRTdGF0ZShidG5JdGVtLCBzdGF0ZVByb3ApIHtcclxuICAgICAgICBpZiAoYnRuSXRlbS5oYXNPd25Qcm9wZXJ0eShzdGF0ZVByb3ApKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBidG5JdGVtW3N0YXRlUHJvcF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOS4jeWtmOWcqOWxnuaAp1xyXG4gICAgICAgIGlmIChzdGF0ZVByb3AgPT0gXCJ2aXNpYmxlXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5pS55Y+Y5Y+v55So54q25oCBXHJcbiAgICAgKiBAcGFyYW0gdmFsdWVzXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgY2hhbmdlU3RhdGUodmFsdWVzLCBzdGF0ZVByb3ApIHtcclxuICAgICAgICBjb25zdCBpZEFycmF5ID0gT2JqZWN0LmtleXModmFsdWVzKTtcclxuICAgICAgICBpZEFycmF5LmZvckVhY2goKGlkKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHN0YXRlID0gdmFsdWVzW2lkXTtcclxuICAgICAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMuX2ZpbmRJdGVtQnlJRChpZCwgdGhpcy50b29sYmFyQnRucyk7XHJcbiAgICAgICAgICAgIGlmIChpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICBpdGVtW3N0YXRlUHJvcF0gPSBzdGF0ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuaW5Nb3JlQnV0dG9uQ29udGVudHMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBmaW5kSWQgPSBpZEFycmF5LmZpbmQoKGlkKSA9PiBpZCA9PSBpdGVtLmlkKTtcclxuICAgICAgICAgICAgaWYgKGZpbmRJZCkge1xyXG4gICAgICAgICAgICAgICAgaXRlbVtzdGF0ZVByb3BdID0gdmFsdWVzW2ZpbmRJZF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOafpeaJvlxyXG4gICAgICogQHBhcmFtIGlkXHJcbiAgICAgKiBAcGFyYW0gZGF0YXNcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBfZmluZEl0ZW1CeUlEKGlkOiBzdHJpbmcsIGRhdGFzOiBCdXR0b25Db25maWdbXSkge1xyXG4gICAgICAgIHJldHVybiBkYXRhcy5maW5kKChpdGVtKSA9PiBpdGVtLmlkID09IGlkKTtcclxuICAgIH1cclxuICAgIG5nT25EZXN0cm95KCkge1xyXG4gICAgICAgIGlmICh0aGlzLmNsaWNrU3Vic2NyaXB0aW9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xpY2tTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcclxuICAgICAgICAgICAgdGhpcy5jbGlja1N1YnNjcmlwdGlvbiA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgdGhpcy5fdmlzaWJsZURhdGFzICYmXHJcbiAgICAgICAgICAgIHRoaXMuX3Zpc2libGVEYXRhcy5oYXNPd25Qcm9wZXJ0eShcInVuc3Vic2NyaWJlXCIpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Zpc2libGVEYXRhc1tcInVuc3Vic2NyaWJlXCJdKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3Zpc2libGVEYXRhcyA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgdGhpcy5fZGlzYWJsZURhdGFzICYmXHJcbiAgICAgICAgICAgIHRoaXMuX2Rpc2FibGVEYXRhcy5oYXNPd25Qcm9wZXJ0eShcInVuc3Vic2NyaWJlXCIpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2Rpc2FibGVEYXRhc1tcInVuc3Vic2NyaWJlXCJdKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2Rpc2FibGVEYXRhcyA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudW5CaW5kUmVzaXplRXZlbnQoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog57uR5a6a6ZmQ5Yi2XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgYmluZFJlc2l6ZUV2ZW50KCkge1xyXG4gICAgICAgIC8vIOagh+iusOWTjeW6lOaXtlxyXG4gICAgICAgIGlmICh0aGlzLm5nWm9uZSAmJiB0aGlzLnRvb2xiYXIgJiYgdGhpcy50b29sYmFyLmNvbnRlbnRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnRvb2xiYXJDb250YWluZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5ybykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvb2xiYXJDb250YWluZXIubmF0aXZlRWxlbWVudC5wYXJlbnRFbGVtZW50ID09XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc2l6ZUVsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5bey57uR5a6a6L+HXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVuQmluZFJlc2l6ZUV2ZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucm8gPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ybyA9IG5ldyBSZXNpemVPYnNlcnZlcigoZWwpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2NhbGN1bGF0ZVRvb2xiYXJEcm9wZG93bklzU2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2FsY3VsYXRlQnV0dG9uc1Nob3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVzaXplRWwgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b29sYmFyQ29udGFpbmVyLm5hdGl2ZUVsZW1lbnQucGFyZW50RWxlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yby5vYnNlcnZlKHRoaXMucmVzaXplRWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sIDApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnVuQmluZFJlc2l6ZUV2ZW50KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDmjInpkq7mlbDmja7lj5jmm7TlkI7op6blj5Hmo4Dmn6VcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBhZnRlckJpbmRUb29sYmFyRGF0YSgpIHtcclxuICAgICAgICBpZiAodGhpcy5uZ1pvbmUgJiYgdGhpcy50b29sYmFyICYmIHRoaXMudG9vbGJhci5jb250ZW50cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2NhbGN1bGF0ZVRvb2xiYXJEcm9wZG93bklzU2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2NhbGN1bGF0ZUJ1dHRvbnNTaG93KCk7XHJcbiAgICAgICAgICAgICAgICB9LCAwKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDliKTmlq3kuIvmi4nmjInpkq7mmK/lkKbmmL7npLpcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBfY2FsY3VsYXRlVG9vbGJhckRyb3Bkb3duSXNTaG93KCkge1xyXG4gICAgICAgIGlmICghdGhpcy50b29sYmFyQ29udGFpbmVyIHx8ICF0aGlzLnRvb2xiYXIgfHwgIXRoaXMudG9vbGJhclBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgIC8vIOWuueWZqOacquaYvuekuu+8jOayoeacieaVsOaNru+8jOayoeacieaMiemSruS9jee9rlxyXG4gICAgICAgICAgICB0aGlzLnRvb2xiYXJEcEhpZGRlbiA9IHRydWU7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgYnRuUGFyZW50c0NvbnRhaW5lciA9XHJcbiAgICAgICAgICAgIHRoaXMudG9vbGJhckNvbnRhaW5lci5uYXRpdmVFbGVtZW50LnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICB0aGlzLmJ0blBsYWNlSG9sZGVyLm5hdGl2ZUVsZW1lbnQuc2Nyb2xsV2lkdGggPlxyXG4gICAgICAgICAgICBidG5QYXJlbnRzQ29udGFpbmVyLm9mZnNldFdpZHRoXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIHRoaXMudG9vbGJhckRwSGlkZGVuID0gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy50b29sYmFyRHBIaWRkZW4gPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog6K6h566X5pi+56S655qE5oyJ6ZKu5Liq5pWw5Y+K5pu05aSa5Lit5pi+56S655qE5oyJ6ZKu5Liq5pWwXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgX2NhbGN1bGF0ZUJ1dHRvbnNTaG93KCkge1xyXG4gICAgICAgIGlmICghdGhpcy50b29sYmFyQ29udGFpbmVyIHx8ICF0aGlzLnRvb2xiYXIgfHwgIXRoaXMudG9vbGJhclBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgIC8vIOWuueWZqOacquaYvuekuu+8jOayoeacieaVsOaNru+8jOayoeacieaMiemSruS9jee9rlxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnRvb2xiYXJEcEhpZGRlbikge1xyXG4gICAgICAgICAgICB0aGlzLnRvb2xiYXJCdG5zID0gWy4uLnRoaXMudG9vbGJhci5jb250ZW50c107XHJcbiAgICAgICAgICAgIHRoaXMuaW5Nb3JlQnV0dG9uQ29udGVudHMgPSBbXTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgdG9vbGJhclBhcmVudENvbnRhaW5lckVsID1cclxuICAgICAgICAgICAgdGhpcy50b29sYmFyQ29udGFpbmVyLm5hdGl2ZUVsZW1lbnQucGFyZW50RWxlbWVudDtcclxuICAgICAgICBsZXQgZGl2RWwgPSB0aGlzLnRvb2xiYXJDb250YWluZXIubmF0aXZlRWxlbWVudDtcclxuICAgICAgICBsZXQgYnRuUGxhY2VIb2xkZXJFbCA9IHRoaXMuYnRuUGxhY2VIb2xkZXIubmF0aXZlRWxlbWVudDtcclxuICAgICAgICBsZXQgYnRuUGxhY2VIb2xkZXJCdG5zID0gYnRuUGxhY2VIb2xkZXJFbC5xdWVyeVNlbGVjdG9yQWxsKFwiYnV0dG9uXCIpO1xyXG5cclxuICAgICAgICAvLyDmm7TlpJrmjInpkq5cclxuICAgICAgICBjb25zdCBtb3JlQnV0dG9uID0gdG9vbGJhclBhcmVudENvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoXCIubW9yZWJ0blwiKTtcclxuICAgICAgICAvLyDorqHnrpfmjInpkq7nmoTlrr3luqZcclxuICAgICAgICBsZXQgYmFzaWNTdGFydCA9IHBhcnNlSW50KFxyXG4gICAgICAgICAgICBidG5QbGFjZUhvbGRlckVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnRcclxuICAgICAgICApO1xyXG4gICAgICAgIGxldCBiYXNpY1dpZHRoID1cclxuICAgICAgICAgICAgdG9vbGJhclBhcmVudENvbnRhaW5lckVsLm9mZnNldFdpZHRoIC0gbW9yZUJ1dHRvbi5vZmZzZXRXaWR0aCAtIDEyO1xyXG4gICAgICAgIGxldCB0b29sYmFyRHJvcGRvd25IaWRkZW4gPSB0cnVlO1xyXG4gICAgICAgIGxldCBrID0gMDtcclxuICAgICAgICAvLyDlj6rmnInkuIDkuKrmjInpkq5cclxuICAgICAgICBpZiAoYnRuUGxhY2VIb2xkZXJCdG5zLmxlbmd0aCA9PSAxKSB7XHJcbiAgICAgICAgICAgIGlmIChidG5QbGFjZUhvbGRlckVsLm9mZnNldFdpZHRoID4gYmFzaWNXaWR0aCkge1xyXG4gICAgICAgICAgICAgICAgdG9vbGJhckRyb3Bkb3duSGlkZGVuID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBrID0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZvciAoayA9IDE7IGsgPD0gYnRuUGxhY2VIb2xkZXJCdG5zLmxlbmd0aCAtIDE7IGsrKykge1xyXG4gICAgICAgICAgICAgICAgLy8g5aaC5p6c5YaF5a656LaF5Ye6LOiAg+iZkeWIsOaMiemSruS5i+mXtOeahOmXtOi3nVxyXG4gICAgICAgICAgICAgICAgaWYgKGsgPT0gYnRuUGxhY2VIb2xkZXJCdG5zLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYnRuUGxhY2VIb2xkZXJFbC5vZmZzZXRXaWR0aCA+IGJhc2ljV2lkdGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9vbGJhckRyb3Bkb3duSGlkZGVuID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGsgPSBrIC0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcclxuICAgICAgICAgICAgICAgICAgICBwYXJzZUludChcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnRuUGxhY2VIb2xkZXJCdG5zW2tdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnRcclxuICAgICAgICAgICAgICAgICAgICApIC1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzaWNTdGFydCA+XHJcbiAgICAgICAgICAgICAgICAgICAgYmFzaWNXaWR0aFxyXG4gICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9vbGJhckRyb3Bkb3duSGlkZGVuID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgayA9IGsgLSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnRvb2xiYXJEcEhpZGRlbiA9IHRvb2xiYXJEcm9wZG93bkhpZGRlbjtcclxuICAgICAgICBsZXQgc2hvd0J0bnMgPSBkaXZFbC5xdWVyeVNlbGVjdG9yQWxsKFwiYnV0dG9uXCIpO1xyXG4gICAgICAgIGxldCByZXN1bHRCdG5zID0gdGhpcy50b29sYmFyLmNvbnRlbnRzLmZpbHRlcigoaXRlbSwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGluZGV4IDwgaztcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnRvb2xiYXJCdG5zID0gcmVzdWx0QnRucyA/IFsuLi5yZXN1bHRCdG5zXSA6IFtdO1xyXG4gICAgICAgIC8vIGZvciAobGV0IG0gPSBrOyBtIDwgc2hvd0J0bnMubGVuZ3RoOyBtKyspIHtcclxuICAgICAgICAvLyAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZShzaG93QnRuc1ttXSwgJ2Rpc3BsYXknLCAnbm9uZScpO1xyXG4gICAgICAgIC8vIH1cclxuICAgICAgICBpZiAodGhpcy50b29sYmFyLmNvbnRlbnRzICYmIHRoaXMudG9vbGJhci5jb250ZW50cy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5pbk1vcmVCdXR0b25Db250ZW50cyA9IHRoaXMudG9vbGJhci5jb250ZW50cy5maWx0ZXIoXHJcbiAgICAgICAgICAgICAgICAoaXRlbSwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5kZXggPj0gaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWcqOaMiemSrueKtuaAgeWPmOWMluaXtuino+mZpOmZkOWItlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHVuQmluZFJlc2l6ZUV2ZW50KCkge1xyXG4gICAgICAgIGlmICh0aGlzLnJvKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnJlc2l6ZUVsKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJvLnVub2JzZXJ2ZSh0aGlzLnJlc2l6ZUVsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnJvID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm4gc3RyaW5nXHJcbiAgICAgKiAnJyDkuI3lrZjlnKjmjInpkq7vvIzml6DmiYDosJPkvY3nva5cclxuICAgICAqICdpbkhlYWQnIOaMiemSruWcqOWktOmDqFxyXG4gICAgICogJ2luQ29udGVudCcg5oyJ6ZKu5Zyo5YaF5a655L2N572uXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZ2V0VG9vbGJhclBvc2l0aW9uKCkge1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgdGhpcy50b29sYmFyICYmXHJcbiAgICAgICAgICAgIHRoaXMudG9vbGJhci5oYXNPd25Qcm9wZXJ0eShcInBvc2l0aW9uXCIpICYmXHJcbiAgICAgICAgICAgIHRoaXMudG9vbGJhci5oYXNPd25Qcm9wZXJ0eShcImNvbnRlbnRzXCIpICYmXHJcbiAgICAgICAgICAgIHRoaXMudG9vbGJhci5jb250ZW50cy5sZW5ndGggPiAwXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIC8vIOWmguaenOacieWxnuaAp++8jOS4lOaMiemSruacieWAvFxyXG4gICAgICAgICAgICBpZiAodGhpcy50b29sYmFyLnBvc2l0aW9uID09PSBcImluSGVhZFwiKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJpbkhlYWRcIjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBcImluQ29udGVudFwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDliKTmlq3mmK/lkKbmmL7npLrjgIHpmpDol49cclxuICAgICAqIEBwYXJhbSBpZFxyXG4gICAgICogQHBhcmFtIHN0YXRlXHJcbiAgICAgKi9cclxuICAgIGdldFRvb2xiYXJTdGF0ZShcclxuICAgICAgICBpZDogc3RyaW5nLFxyXG4gICAgICAgIHN0YXRlOiBPYnNlcnZhYmxlPGFueT4gPSB0aGlzLmJ0blN0YXRlcyxcclxuICAgICAgICBkZWZhdWx0VmFsdWU6IGJvb2xlYW4gPSBmYWxzZVxyXG4gICAgKSB7XHJcbiAgICAgICAgaWYgKHN0YXRlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdGF0ZS5waXBlKFxyXG4gICAgICAgICAgICAgICAgbWFwKChuOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobltpZF0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLndhcm4oYOacquaJvklE5Li677yaJHtpZH0g55u45YWz54q25oCB6K6+572u77yBYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkZWZhdWx0VmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuW2lkXTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG9mKGRlZmF1bHRWYWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY2xpY2tIYW5kbGVyKGJ0bkluZm8pIHtcclxuICAgICAgICBpZiAoIWJ0bkluZm8pIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNsaWNrSXRlbXMubmV4dChidG5JbmZvKTtcclxuICAgIH1cclxufVxyXG4iXX0=