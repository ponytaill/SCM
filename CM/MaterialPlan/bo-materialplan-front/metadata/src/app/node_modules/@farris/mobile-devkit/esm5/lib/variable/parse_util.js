/*
 * StateMachine变量解析
 * @Author: Witt
 * @Date: 2018-12-04 17:09:42
 * @Last Modified by: Witt
 * @Last Modified time: 2019-10-30 11:07:10
 */
import { AppContext } from '../app/index';
import { ViewModelContext } from '../view-model/index';
import { CommandContext } from '../command/index';
/**
 * 解析辅助工具类
 */
var ParseUtil = /** @class */ (function () {
    function ParseUtil() {
    }
    /**
     * 获取应用上下文
     */
    ParseUtil.getAppContext = function (context) {
        if (context instanceof CommandContext) {
            return context.viewModelContext.appContext;
        }
        else if (context instanceof ViewModelContext) {
            return context.appContext;
        }
        else if (context instanceof AppContext) {
            return context;
        }
        else {
            throw new Error('上下文中找不到AppContext，请检查！');
        }
    };
    /**
     * 获取当前Frame的Context
     */
    ParseUtil.getFrameContext = function (context) {
        if (context instanceof CommandContext) {
            return context.viewModelContext;
        }
        else if (context instanceof ViewModelContext) {
            return context;
        }
        else {
            throw new Error('上下文中找不到FrameContext，请检查！');
        }
    };
    /**
     * 获取根Frame的Context
     */
    ParseUtil.getRootFrameContext = function (context) {
        var frameContext = this.getFrameContext(context);
        return frameContext.root;
    };
    /**
     * 根据frameId获取FrameContext
     */
    ParseUtil.getFrameContextById = function (context, frameId) {
        var appContext = this.getAppContext(context);
        return appContext.viewModelContextManager.getContextById(frameId);
    };
    return ParseUtil;
}());
export { ParseUtil };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFyc2VfdXRpbC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvbW9iaWxlLWRldmtpdC8iLCJzb3VyY2VzIjpbImxpYi92YXJpYWJsZS9wYXJzZV91dGlsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7R0FNRztBQUVILE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxjQUFjLENBQUM7QUFDMUMsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDdkQsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBRWxEOztHQUVHO0FBQ0g7SUFBQTtJQThDQSxDQUFDO0lBNUNDOztPQUVHO0lBQ0ksdUJBQWEsR0FBcEIsVUFBcUIsT0FBWTtRQUMvQixJQUFJLE9BQU8sWUFBWSxjQUFjLEVBQUU7WUFDckMsT0FBTyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsVUFBVSxDQUFDO1NBQzVDO2FBQU0sSUFBSSxPQUFPLFlBQVksZ0JBQWdCLEVBQUU7WUFDOUMsT0FBTyxPQUFPLENBQUMsVUFBVSxDQUFDO1NBQzNCO2FBQU8sSUFBSSxPQUFPLFlBQVksVUFBVSxFQUFFO1lBQ3pDLE9BQU8sT0FBTyxDQUFDO1NBQ2hCO2FBQU07WUFDTCxNQUFNLElBQUksS0FBSyxDQUFDLHdCQUF3QixDQUFDLENBQUM7U0FDM0M7SUFDSCxDQUFDO0lBRUQ7O09BRUc7SUFDSSx5QkFBZSxHQUF0QixVQUF1QixPQUFZO1FBQ2pDLElBQUksT0FBTyxZQUFZLGNBQWMsRUFBRTtZQUNyQyxPQUFPLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQztTQUNqQzthQUFNLElBQUksT0FBTyxZQUFZLGdCQUFnQixFQUFFO1lBQzlDLE9BQU8sT0FBTyxDQUFDO1NBQ2hCO2FBQU07WUFDTCxNQUFNLElBQUksS0FBSyxDQUFDLDBCQUEwQixDQUFDLENBQUM7U0FDN0M7SUFFSCxDQUFDO0lBRUQ7O09BRUc7SUFDSSw2QkFBbUIsR0FBMUIsVUFBMkIsT0FBWTtRQUNyQyxJQUFNLFlBQVksR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ25ELE9BQU8sWUFBWSxDQUFDLElBQUksQ0FBQztJQUMzQixDQUFDO0lBRUQ7O09BRUc7SUFDSSw2QkFBbUIsR0FBMUIsVUFBMkIsT0FBWSxFQUFFLE9BQWU7UUFDdEQsSUFBTSxVQUFVLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUMvQyxPQUFPLFVBQVUsQ0FBQyx1QkFBdUIsQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDcEUsQ0FBQztJQUNILGdCQUFDO0FBQUQsQ0FBQyxBQTlDRCxJQThDQztBQUVELE9BQU8sRUFBRSxTQUFTLEVBQUUsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qXHJcbiAqIFN0YXRlTWFjaGluZeWPmOmHj+ino+aekFxyXG4gKiBAQXV0aG9yOiBXaXR0XHJcbiAqIEBEYXRlOiAyMDE4LTEyLTA0IDE3OjA5OjQyXHJcbiAqIEBMYXN0IE1vZGlmaWVkIGJ5OiBXaXR0XHJcbiAqIEBMYXN0IE1vZGlmaWVkIHRpbWU6IDIwMTktMTAtMzAgMTE6MDc6MTBcclxuICovXHJcblxyXG5pbXBvcnQgeyBBcHBDb250ZXh0IH0gZnJvbSAnLi4vYXBwL2luZGV4JztcclxuaW1wb3J0IHsgVmlld01vZGVsQ29udGV4dCB9IGZyb20gJy4uL3ZpZXctbW9kZWwvaW5kZXgnO1xyXG5pbXBvcnQgeyBDb21tYW5kQ29udGV4dCB9IGZyb20gJy4uL2NvbW1hbmQvaW5kZXgnO1xyXG5cclxuLyoqXHJcbiAqIOino+aekOi+heWKqeW3peWFt+exu1xyXG4gKi9cclxuY2xhc3MgUGFyc2VVdGlsIHtcclxuXHJcbiAgLyoqXHJcbiAgICog6I635Y+W5bqU55So5LiK5LiL5paHXHJcbiAgICovXHJcbiAgc3RhdGljIGdldEFwcENvbnRleHQoY29udGV4dDogYW55KTogQXBwQ29udGV4dCB7XHJcbiAgICBpZiAoY29udGV4dCBpbnN0YW5jZW9mIENvbW1hbmRDb250ZXh0KSB7XHJcbiAgICAgIHJldHVybiBjb250ZXh0LnZpZXdNb2RlbENvbnRleHQuYXBwQ29udGV4dDtcclxuICAgIH0gZWxzZSBpZiAoY29udGV4dCBpbnN0YW5jZW9mIFZpZXdNb2RlbENvbnRleHQpIHtcclxuICAgICAgcmV0dXJuIGNvbnRleHQuYXBwQ29udGV4dDtcclxuICAgIH0gZWxzZSAgaWYgKGNvbnRleHQgaW5zdGFuY2VvZiBBcHBDb250ZXh0KSB7XHJcbiAgICAgIHJldHVybiBjb250ZXh0O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCfkuIrkuIvmlofkuK3mib7kuI3liLBBcHBDb250ZXh077yM6K+35qOA5p+l77yBJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5blvZPliY1GcmFtZeeahENvbnRleHRcclxuICAgKi9cclxuICBzdGF0aWMgZ2V0RnJhbWVDb250ZXh0KGNvbnRleHQ6IGFueSk6IFZpZXdNb2RlbENvbnRleHQge1xyXG4gICAgaWYgKGNvbnRleHQgaW5zdGFuY2VvZiBDb21tYW5kQ29udGV4dCkge1xyXG4gICAgICByZXR1cm4gY29udGV4dC52aWV3TW9kZWxDb250ZXh0O1xyXG4gICAgfSBlbHNlIGlmIChjb250ZXh0IGluc3RhbmNlb2YgVmlld01vZGVsQ29udGV4dCkge1xyXG4gICAgICByZXR1cm4gY29udGV4dDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcign5LiK5LiL5paH5Lit5om+5LiN5YiwRnJhbWVDb250ZXh077yM6K+35qOA5p+l77yBJyk7XHJcbiAgICB9XHJcblxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6I635Y+W5qC5RnJhbWXnmoRDb250ZXh0XHJcbiAgICovXHJcbiAgc3RhdGljIGdldFJvb3RGcmFtZUNvbnRleHQoY29udGV4dDogYW55KTogVmlld01vZGVsQ29udGV4dCB7XHJcbiAgICBjb25zdCBmcmFtZUNvbnRleHQgPSB0aGlzLmdldEZyYW1lQ29udGV4dChjb250ZXh0KTtcclxuICAgIHJldHVybiBmcmFtZUNvbnRleHQucm9vdDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOagueaNrmZyYW1lSWTojrflj5ZGcmFtZUNvbnRleHRcclxuICAgKi9cclxuICBzdGF0aWMgZ2V0RnJhbWVDb250ZXh0QnlJZChjb250ZXh0OiBhbnksIGZyYW1lSWQ6IHN0cmluZyk6IFZpZXdNb2RlbENvbnRleHQge1xyXG4gICAgY29uc3QgYXBwQ29udGV4dCA9IHRoaXMuZ2V0QXBwQ29udGV4dChjb250ZXh0KTtcclxuICAgIHJldHVybiBhcHBDb250ZXh0LnZpZXdNb2RlbENvbnRleHRNYW5hZ2VyLmdldENvbnRleHRCeUlkKGZyYW1lSWQpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IHsgUGFyc2VVdGlsIH07XHJcbiJdfQ==