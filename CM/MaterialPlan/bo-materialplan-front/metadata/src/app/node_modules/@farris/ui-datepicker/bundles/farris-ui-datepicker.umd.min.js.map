{"version":3,"sources":["node_modules/tslib/tslib.es6.js","ng://@farris/ui-datepicker/lib/enums/cal-toggle.enum.ts","ng://@farris/ui-datepicker/lib/enums/default-view.enum.ts","ng://@farris/ui-datepicker/lib/enums/key-code.enum.ts","ng://@farris/ui-datepicker/lib/enums/key-name.enum.ts","ng://@farris/ui-datepicker/lib/enums/month-id.enum.ts","ng://@farris/ui-datepicker/lib/enums/reset-date-type.enum.ts","ng://@farris/ui-datepicker/lib/enums/show-type.enum.ts","ng://@farris/ui-datepicker/lib/enums/year.enum.ts","ng://@farris/ui-datepicker/lib/services/farris-datepicker.config.service.ts","ng://@farris/ui-datepicker/lib/constants/constants.ts","ng://@farris/ui-datepicker/lib/services/farris-datepicker.locale.service.ts","ng://@farris/ui-datepicker/lib/services/farris-datepicker.util.service.ts","ng://@farris/ui-datepicker/lib/services/farris-datepicker.service.ts","ng://@farris/ui-datepicker/lib/interfaces/my-options.interface.ts","ng://@farris/ui-datepicker/lib/components/calendar/calendar.component.ts","ng://@farris/ui-datepicker/lib/components/selection-bar/selection-bar.component.ts","ng://@farris/ui-datepicker/lib/components/day-view/day-view.component.ts","ng://@farris/ui-datepicker/lib/components/month-view/month-view.component.ts","ng://@farris/ui-datepicker/lib/components/year-view/year-view.component.ts","ng://@farris/ui-datepicker/lib/farris-datepicker.input.ts","ng://@farris/ui-datepicker/lib/farris-datepicker.component.ts","ng://@farris/ui-datepicker/lib/components/selection-sidebar/selection-sidebar.component.ts","ng://@farris/ui-datepicker/lib/AngularMyDatePicker.component.ts","ng://@farris/ui-datepicker/lib/farris-datepicker.module.ts"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","this","__values","o","m","Symbol","iterator","next","value","done","__read","r","e","ar","push","error","Open","CloseByDateSel","CloseByCalBtn","CloseByOutClick","CloseByEsc","Date","Month","Year","enter","esc","space","leftArrow","upArrow","rightArrow","downArrow","tab","shift","prev","curr","both","singleDate","dateRange","all","noDate","noDateAndMonth","selectWeek","min","max","DefaultConfigService","getDefaultConfig","defaultConfig","Injectable","dayLabels","su","mo","tu","we","th","fr","sa","monthLabels","1","2","3","4","5","6","7","8","9","10","11","12","dateFormat","returnFormat","defaultView","DefaultView","showType","ShowType","firstDayOfWeek","satHighlight","sunHighlight","highlightDates","markCurrentDay","markCurrentMonth","markCurrentYear","monthSelector","yearSelector","disableHeaderButtons","showWeekNumbers","selectorHeight","selectorWidth","disableUntil","year","month","day","hour","minute","second","disableSince","disableDates","disableDateRanges","disableWeekends","disableWeekdays","enableDates","markDates","markWeekends","marked","color","closeSelectorOnDateSelect","closeSelectorOnDocumentClick","minYear","maxYear","focusInputOnDateSelect","moveFocusByArrowKeys","dateRangeDatesDelimiter","inputFieldValidation","stylesData","selector","styles","ariaLabelPrevMonth","ariaLabelNextMonth","shortcuts","weekText","D","DD","M","MM","MMM","YYYY","UNDER_LINE","SU","MO","TU","WE","TH","FR","SA","DEFAULT_LOCALE","EMPTY_STR","CLICK","KEYUP","BLUR","DISABLED","OPTIONS","DEFAULT_MONTH","OPTS","YEARS","VISIBLE_MONTH","SELECT_MONTH","SELECT_YEAR","PREV_VIEW_DISABLED","NEXT_VIEW_DISABLED","DATES","WEEK_DAYS","SELECTED_DATE","SELECTED_DATE_RANGE","MONTHS","DatepickerLocaleService","getLocaleOptions","locale","locales","EN_US","yearTxt","timeBtnText","dateBtnText","commitBtnText","placeholder","range","begin","end","message","101","ZH_CN","ZH_CHT","UtilService","isDateValid","dateStr","options","isReturn","_dateStr","returnDate","resetDate","showTime","_st","formatStr","replace","substring","toLocaleLowerCase","indexOf","daysInMonth","isMonthStr","delimeters","match","split","timeStr","_timer","Number","substr","isNaN","undefined","test","df","includes","slice","dateValue","getDateValue","getNumberByValue","getMonthNumberByMonthName","date","isDisabledDate","isDateValidDateRange","dateRangeStr","dates","_a","beginDate","endDate","isInitializedDate","isDateSameOrEarlier","da","del","re","RegExp","ds","format","yearIndex","monthIndex","dayIndex","key","toLowerCase","nbr","parseDefaultMonth","monthString","monthTxt","monthNbr","dateMs","getTimeInMilliseconds","dayNbr","getDayNumber","dn","disableWeekdays_1","tslib_1.__values","disableWeekdays_1_1","wd","getWeekdayIndex","disableDates_1","disableDates_1_1","d","disableDateRanges_1","disableDateRanges_1_1","isMarkedDate","markedDates","markedDates_1","markedDates_1_1","md","_c","_d","isHighlightedDate","highlightDates_1","highlightDates_1_1","getWeekNumber","setDate","getDate","getDay","Math","round","getTime","getFullYear","getNowWeekTime","getMonth","isMonthDisabledByDisableUntil","isMonthDisabledByDisableSince","getDateModel","rangeDelimiter","singleDateModel","dateRangeModel","date$$1","jsDate","getDate2","formatted","formatDate","returnFormatted","epoc","getEpocTime","beginJsDate","beginEpoc","endJsDate","endEpoc","isRange","delete","String","preZero","delStr","index","getFormattedDate","model","val","isInitializedMonth","isInitializedYear","isDateEarlier","firstDate","secondDate","isDateSame","isDateRangeBeginOrEndSame","isDateInRange","now","weekDays","getKeyCodeFromEvent","event","keyCode","KeyName","KeyCode","getNearDate","minMilliseconds","maxMilliseconds","nowMilliseconds","disabledHours","currentDate","minHour","maxHour","res","disabledMinutes","_hour","maxMinute","minMinute","disabledSeconds","_minute","maxSecond","minSecond","DatePickerService","parseOptions","opts","defaultOpts","keys","forEach","k","validate","valid","_dateRange","utilService","registerScrollEvent","fn","_mouseScrollHandle","document","addEventListener","removeMouseEvent","container","querySelector","removeEventListener","_mouseWheelHandle","appendSelector","elem","hasChildNodes","childNodes","el","removeChild","createElement","classList","add","body","appendChild","closest","preventDefault","getSelectorPosition","calendarRef","top","left","_selectorHeight","_selectorWidth","b","getBoundingClientRect","position","getSelectorDimension","offsetHeight","window","innerHeight","height","arrow","location","nativeElement","style","display","width","scrollTop","documentElement","CalendarComponent","getTimeStr","getHours","getMinutes","getSeconds","initialize","defaultMonth","selectorPos","inputValue","dc","cvc","rds","cbe","visibleMonth","visibleMonth_range","dayIdx","weekDayOpts","idx","today","getToday","selectedMonth","selectedMonth_range","monthRangeValue","_b","selectedDateRange","timeVlaue","_second","timeVlaue_range","endyear","weekNbr","selectedWeek","selectedDate","dateChanged","calendarViewChanged","rangeDateSelection","closedByEsc","setCalendarVisibleMonth","onMonthViewBtnClicked","onYearViewBtnClicked","resetDateValue","ResetDateType","resetMonthYearSelect","isSecondCalendar","selectMonth_range","selectYear_range","selectMonth","selectYear","selectTime","generateMonths","cdr","detectChanges","onMonthCellClicked","cell","mc","toSelectMonth","generateCalendar","onMonthCellKeyDown","getSourceRowAndColumnFromEvent","sourceRow","sourceCol","getTargetFocusRowAndColumn","moveFocus","targetRow","targetCol","focusCellElement","generateYears","onYearCellClicked","yc","toSelectYear","onYearCellKeyDown","months_range","months","row","j","disabled","name","currMonth","monthObj","setMonthViewHeaderBtnDisabledState","inputYear","y","years_range","years","flatten","findIndex","minMax","currYear","selected","yearObj","setYearViewHeaderBtnDisabledState","onPrevNavigateBtnClicked","setDateViewMonth","onNextNavigateBtnClicked","isNext","change","setMonth","onCloseSelector","onDayCellClicked","cmo","selectDate","dateObj","onDayCellKeyDown","onDayCellMouseEnter","_e","_f","w","_g","week","_h","_j","dates_range","_k","_l","_m","onDayCellMouseLeave","onMonthCellMouseEnter","item","onMonthCellMouseLeave","onYearCellMouseEnter","item_1","item_1_1","item_2","item_2_1","onYearCellMouseLeave","item_3","item_3_1","item_4","item_4_1","onWeekClicked","weekData","target","id","arr","col","rowCount","colCount","type","selectorEl","focus","isBeginDateInitialized","isEndDateInitialized","JSON","stringify","isBegin","_date","viewType","ViewType","isBeginMonthInitialized","isEndMonthInitialized","isBeginYearInitialized","isEndYearInitialized","monthStartIdx","setFullYear","sundayIdx","daysInPrevMonth","isCurrDay","MonthId","getWidth","hasShortCuts","getWeekday","notifyChange","monthStart","dInThisM","dInPrevM","currDay","markedDate","highlight","daysLeft","setDateViewHeaderBtnDisabledState","first","number","weekday","last","dpm","dnm","prevViewDisabled_range","nextViewDisabled_range","prevDobViewDisabled_range","nextDobViewDisabled_range","prevViewDisabled","nextViewDisabled","prevDobViewDisabled","nextDobViewDisabled","yp","yn","dpy","dny","onContainerClick","stopPropagation","onClickTimeBtn","beginIsInitializedDate","endIsInitializedDate","endmonth","getTimeValue","isDateRange","start","timeArr","nowDate","timeArr_range","onClickOkBtn","timeObj","timeObj_range","selectedDate_range","initializedDate","isInDisableRange","earlier","dateModel","otherDate","setTime","targetDate","targetDateRange","Component","args","template","providers","encapsulation","ViewEncapsulation","None","Renderer2","ChangeDetectorRef","ViewChild","HostBinding","renderer","_this","scrollDiff","SelectionBarComponent","ngOnChanges","changes","currentValue","prevNavigateBtnClicked","emit","nextNavigateBtnClicked","onPrevDobNavigateBtnClicked","onNextDobNavigateBtnClicked","monthViewBtnClicked","yearViewBtnClicked","onTodayViewBtnClicked","todayViewBtnClicked","getFormateType","yIndex","Input","Output","EventEmitter","DayViewComponent","dayCellClicked","dayCellKeyDown","weekClicked","onMouseEnter","onMouseLeave","prevMonthId","currMonthId","nextMonthId","MonthViewComponent","monthCellClicked","monthCellKeyDown","isMonthInRange","isMonthSame","isMonthRangeBeginOrEndSame","YearViewComponent","ngOnInit","yearCellClicked","yearCellKeyDown","onPrevOrNextYearCellClicked","prevCellClicked","nextCellClicked","NGX_DP_VALUE_ACCESSOR","provide","NG_VALUE_ACCESSOR","useExisting","forwardRef","FarrisDatePickerDirective","multi","NGX_DP_VALIDATORS","NG_VALIDATORS","onKeyUp","ignoreKeyPress","closeSelector","CalToggle","emitInputFieldChanged","onBlur","inputText","clearDate","onChangeCb","onTouchedCb","onClick","evt","preventClose","cRef","contains","setLocaleOptions","dm","defMonth","ngOnDestroy","closeCalendar","localeService","writeValue","setInputValue","instance","registerOnChange","registerOnTouched","setDisabledState","isDisabled","setProperty","c","openCalendar","vcRef","createComponent","cfr","resolveComponentFactory","close","focusToInput","updateModel","emitDateChanged","emitCalendarChanged","emitRangeDateSelection","emitCalendarToggle","toggleCalendar","onClickWrapper","setStyle","flag_1","reason","remove","hostView","inputFieldChanged","calendarToggle","jsDateToMyDate","Directive","exportAs","ViewContainerRef","ComponentFactoryResolver","ElementRef","NgZone","HostListener","config","zone","ev","FARRIS_DP_VALUE_ACCESSOR","FarrisDatepickerComponent","defineProperty","_dateFormat","_this_1","formArr","_timeFormat","_mm","find","_minDate","toString","isValid","_maxDate","dateFrom","_beginValue","dateTo","returnType","_initFinished","setValue","_endValue","_value","v","_ngControl","injector","get","NgControl","initPlaceholder","mergeDateOptions","datePicekrService","dateOpts","getValue","localDateOpts","localeConfig","beginPlaceholder","endPlaceholder","buildOptions","timeFormat","isFirstChange","inputs_1","readonly","firstChange","useDefault","setDefaultValue","ngAfterViewInit","control","_updateOn","updateOn","setTimeout","clearTimeout","overLayService","destory","clearIcon","visibility","isActiveTip","_runblur","totalFocus","transform","_isValid","_valueChangeEmitted","realDate","onNgModelChange","onModelTouched","editable","_mousedownEvent","blur","onFocus","registerMouseDownHandle","onInputClick","listen","className","dateInput","nowValue","$event","_SELECT_DATE_","_realRangeValue","_realValue","onDateChanged","onModelChange","clear","onSingleInputNgModelChange","realdate","emitValueChange","tmpArr","beginValueChange","endValueChange","cmpRef","valueChange","_onModelChange","getRealReturnFormatted","realValue","observers","whenValueChangedThenCloseSelectorPanel","dtService","formatTo","onDateRangeInputBlur","msg","notifySer","warning","alert","registerMouseEvent","onlyTopWindow","changeDetectorRef","childElementCount","beginFocus","endFocus","closeCalendarHandler","flag_2","valChangeParams","formatedValue","nd","_showTime","disableDateRangesBegin","disableDateRangesEnd","markDatesColor","isMarkWeekends","markWeekendsColor","originTime","str","ignorRange","convert","_getValue","fmt","time","h","yearValue","tmpDate","tmpBegin","tmpEnd","tmpBeginDate","tmpEndDate","_fmt","_tmpDate","parse","formattedVal","_tmpDateArr","beginStr","endStr","updateValue","getValueByType","onPrevFocus","PrevFocus","onNextFocus","NextFocus","_convert2dateString","objDate","_r","_isValid2","isValided","seconds","LocaleService","Injector","read","defaultConfigService","cls","obj","DateTimeHelperService","NotifyService","_applicationRef","ApplicationRef","OverLayHiddenService","SelectionSidebarComponent","AngularMyDatePickerComponent","FarrisDatePickerModule","NgModule","imports","CommonModule","FormsModule","TimePickerModule","LocaleModule","FarrisCommonModule","PopoverModule","forRoot","DateHelperModule","NotifyModule","declarations","entryComponents","exports"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","export enum CalToggle {\r\n    Open = 1,\r\n    CloseByDateSel = 2,\r\n    CloseByCalBtn = 3,\r\n    CloseByOutClick = 4,\r\n    CloseByEsc = 5\r\n}\r\n","export enum DefaultView {\r\n    Date = 1,\r\n    Month = 2,\r\n    Year = 3\r\n}\r\n","/**\r\n * Event key codes\r\n */\r\nexport enum KeyCode {\r\n    enter = 13,\r\n    esc = 27,\r\n    space = 32,\r\n    leftArrow = 37,\r\n    upArrow = 38,\r\n    rightArrow = 39,\r\n    downArrow = 40,\r\n    tab = 9,\r\n    shift = 16\r\n}\r\n","/**\r\n * Event key names\r\n */\r\nexport enum KeyName {\r\n    enter = 'Enter',\r\n    esc = 'Escape',\r\n    space = ' ',\r\n    leftArrow = 'ArrowLeft',\r\n    upArrow = 'ArrowUp',\r\n    rightArrow = 'ArrowRight',\r\n    downArrow = 'ArrowDown',\r\n    tab = 'Tab',\r\n    shift = 'Shift'\r\n}\r\n","export enum MonthId {\r\n    prev = 1,\r\n    curr = 2,\r\n    next = 3\r\n}\r\n","export enum ResetDateType {\r\n    both = 0,\r\n    singleDate = 1,\r\n    dateRange = 2\r\n}\r\n","export enum ShowType {\r\n    all = 1,\r\n    noDate = 2,\r\n    noDateAndMonth = 3,\r\n    selectWeek = 4\r\n}\r\n","export enum Year {\r\n    min = 1000,\r\n    max = 9999\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { IMyOptions } from '../interfaces/public-api';\r\nimport { Year, DefaultView, ShowType } from '../enums/public-api';\r\n\r\n@Injectable()\r\nexport class DefaultConfigService {\r\n    private defaultConfig: IMyOptions = {\r\n        dateRange: false,\r\n        dayLabels: {\r\n            su: 'Sun',\r\n            mo: 'Mon',\r\n            tu: 'Tue',\r\n            we: 'Wed',\r\n            th: 'Thu',\r\n            fr: 'Fri',\r\n            sa: 'Sat'\r\n        },\r\n        monthLabels: {\r\n            1: 'Jan',\r\n            2: 'Feb',\r\n            3: 'Mar',\r\n            4: 'Apr',\r\n            5: 'May',\r\n            6: 'Jun',\r\n            7: 'Jul',\r\n            8: 'Aug',\r\n            9: 'Sep',\r\n            10: 'Oct',\r\n            11: 'Nov',\r\n            12: 'Dec'\r\n        },\r\n        dateFormat: 'yyyy-MM-dd',\r\n        returnFormat: 'yyyy-MM-dd',\r\n        defaultView: DefaultView.Date,\r\n        showType: ShowType.all,\r\n        firstDayOfWeek: 'mo',\r\n        satHighlight: false,\r\n        sunHighlight: false,\r\n        highlightDates: [],\r\n        markCurrentDay: true,\r\n        markCurrentMonth: true,\r\n        markCurrentYear: true,\r\n        monthSelector: true,\r\n        yearSelector: true,\r\n        disableHeaderButtons: true,\r\n        showWeekNumbers: false,\r\n        selectorHeight: '295px',\r\n        selectorWidth: '280px',\r\n        disableUntil: { year: 0, month: 0, day: 0 ,hour:0,minute:0,second:0},\r\n        disableSince: { year: 0, month: 0, day: 0 ,hour:0,minute:0,second:0},\r\n        disableDates: [],\r\n        disableDateRanges: [],\r\n        disableWeekends: false,\r\n        disableWeekdays: [],\r\n        enableDates: [],\r\n        markDates: [],\r\n        markWeekends: { marked: false, color: '' },\r\n        closeSelectorOnDateSelect: true,\r\n        closeSelectorOnDocumentClick: true,\r\n        minYear: Year.min,\r\n        maxYear: Year.max,\r\n        focusInputOnDateSelect: true,\r\n        moveFocusByArrowKeys: true,\r\n        dateRangeDatesDelimiter: ' - ',\r\n        inputFieldValidation: true,\r\n        stylesData: { selector: '', styles: '' },\r\n        ariaLabelPrevMonth: 'Previous Month',\r\n        ariaLabelNextMonth: 'Next Month',\r\n        shortcuts: [],\r\n        weekText: 'Week',\r\n    };\r\n\r\n    public getDefaultConfig() {\r\n        return this.defaultConfig;\r\n    }\r\n}\r\n","/**\r\n * Constants\r\n */\r\nconst D = 'd';\r\nconst DD = 'dd';\r\nconst M = 'M';\r\nconst MM = 'MM';\r\nconst MMM = 'MMM';\r\nconst Y = 'y';\r\nconst YYYY = 'yyyy';\r\n\r\nconst DATE_ROW_COUNT = 5;\r\nconst DATE_COL_COUNT = 6;\r\nconst MONTH_ROW_COUNT = 3;\r\nconst MONTH_COL_COUNT = 2;\r\nconst YEAR_ROW_COUNT = 4;\r\nconst YEAR_COL_COUNT = 4;\r\n\r\nconst DOT = '.';\r\nconst UNDER_LINE = '_';\r\n\r\nconst SU = 'su';\r\nconst MO = 'mo';\r\nconst TU = 'tu';\r\nconst WE = 'we';\r\nconst TH = 'th';\r\nconst FR = 'fr';\r\nconst SA = 'sa';\r\n\r\nconst DEFAULT_LOCALE = 'ZH_CN';\r\n\r\nconst ZERO_STR = '0';\r\nconst EMPTY_STR = '';\r\n\r\nconst CLICK = 'click';\r\nconst KEYUP = 'keyup';\r\nconst BLUR = 'blur';\r\nconst DISABLED = 'disabled';\r\nconst BODY = 'body';\r\nconst VALUE = 'value';\r\nconst OPTIONS = 'options';\r\nconst DEFAULT_MONTH = 'defaultMonth';\r\nconst LOCALE = 'locale';\r\nconst OBJECT = 'object';\r\nconst PX = 'px';\r\nconst STYLE = 'style';\r\n\r\nconst OPTS = 'opts';\r\nconst YEARS = 'years';\r\nconst VISIBLE_MONTH = 'visibleMonth';\r\nconst SELECT_MONTH = 'selectMonth';\r\nconst SELECT_YEAR = 'selectYear';\r\nconst PREV_VIEW_DISABLED = 'prevViewDisabled';\r\nconst NEXT_VIEW_DISABLED = 'nextViewDisabled';\r\nconst DATES = 'dates';\r\nconst WEEK_DAYS = 'weekDays';\r\nconst SELECTED_DATE = 'selectedDate';\r\nconst SELECTED_DATE_RANGE = 'selectedDateRange';\r\nconst MONTHS = 'months';\r\n\r\nconst PREVENT_CLOSE_TIMEOUT = 50;\r\n\r\nexport {\r\n    D,\r\n    DD,\r\n    M,\r\n    MM,\r\n    MMM,\r\n    Y,\r\n    YYYY,\r\n    DATE_ROW_COUNT,\r\n    DATE_COL_COUNT,\r\n    MONTH_ROW_COUNT,\r\n    MONTH_COL_COUNT,\r\n    YEAR_ROW_COUNT,\r\n    YEAR_COL_COUNT,\r\n    DOT,\r\n    UNDER_LINE,\r\n    SU,\r\n    MO,\r\n    TU,\r\n    WE,\r\n    TH,\r\n    FR,\r\n    SA,\r\n    DEFAULT_LOCALE,\r\n    ZERO_STR,\r\n    EMPTY_STR,\r\n    CLICK,\r\n    KEYUP,\r\n    BLUR,\r\n    DISABLED,\r\n    BODY,\r\n    VALUE,\r\n    OPTIONS,\r\n    DEFAULT_MONTH,\r\n    LOCALE,\r\n    OBJECT,\r\n    PX,\r\n    STYLE,\r\n    OPTS,\r\n    YEARS,\r\n    VISIBLE_MONTH,\r\n    SELECT_MONTH,\r\n    SELECT_YEAR,\r\n    PREV_VIEW_DISABLED,\r\n    NEXT_VIEW_DISABLED,\r\n    DATES,\r\n    WEEK_DAYS,\r\n    SELECTED_DATE,\r\n    SELECTED_DATE_RANGE,\r\n    MONTHS,\r\n    PREVENT_CLOSE_TIMEOUT\r\n};\r\n","import { Injectable } from '@angular/core';\r\nimport { IMyLocales, IMyOptions } from '../interfaces/public-api';\r\n\r\nimport { DEFAULT_LOCALE } from '../constants/constants';\r\n\r\n@Injectable()\r\nexport class DatepickerLocaleService {\r\n    private locales: IMyLocales = {\r\n        'EN_US': {\r\n            dayLabels: { su: 'Sun', mo: 'Mon', tu: 'Tue', we: 'Wed', th: 'Thu', fr: 'Fri', sa: 'Sat' },\r\n            monthLabels: {\r\n                1: 'Jan',\r\n                2: 'Feb',\r\n                3: 'Mar',\r\n                4: 'Apr',\r\n                5: 'May',\r\n                6: 'Jun',\r\n                7: 'Jul',\r\n                8: 'Aug',\r\n                9: 'Sep',\r\n                10: 'Oct',\r\n                11: 'Nov',\r\n                12: 'Dec'\r\n            },\r\n            dateFormat: 'MM/dd/yyyy',\r\n            returnFormat: 'MM/dd/yyyy',\r\n            firstDayOfWeek: 'mo',\r\n            sunHighlight: false,\r\n            yearTxt: '',\r\n            timeBtnText: 'Select Time',\r\n            dateBtnText: 'Select Date',\r\n            commitBtnText: 'OK',\r\n            weekText: 'Week',\r\n            placeholder: 'Please select a date',\r\n            range: {\r\n                begin: 'Please select a begin date',\r\n                end: 'Please select a end date'\r\n            },\r\n            message: {\r\n                101: 'The end time must not be earlier than the start time.'\r\n            }\r\n        },\r\n        'ZH_CN': {\r\n            dayLabels: { su: '', mo: '', tu: '', we: '', th: '', fr: '', sa: '' },\r\n            monthLabels: {\r\n                1: '',\r\n                2: '',\r\n                3: '',\r\n                4: '',\r\n                5: '',\r\n                6: '',\r\n                7: '',\r\n                8: '',\r\n                9: '',\r\n                10: '',\r\n                11: '',\r\n                12: ''\r\n            },\r\n            dateFormat: 'yyyy-MM-dd',\r\n            returnFormat: 'yyyy-MM-dd',\r\n            firstDayOfWeek: 'mo',\r\n            sunHighlight: false,\r\n            yearTxt: '',\r\n            timeBtnText: '',\r\n            dateBtnText: '',\r\n            commitBtnText: '',\r\n            weekText: '',\r\n            placeholder: '',\r\n            range: {\r\n                begin: '',\r\n                end: ''\r\n            },\r\n            message: {\r\n                101: ''\r\n            }\r\n        },\r\n        'ZH_CHT': {\r\n            dayLabels: { su: '', mo: '', tu: '', we: '', th: '', fr: '', sa: '' },\r\n            monthLabels: {\r\n                1: '',\r\n                2: '',\r\n                3: '',\r\n                4: '',\r\n                5: '',\r\n                6: '',\r\n                7: '',\r\n                8: '',\r\n                9: '',\r\n                10: '',\r\n                11: '',\r\n                12: ''\r\n            },\r\n            dateFormat: 'yyyy-MM-dd',\r\n            returnFormat: 'yyyy-MM-dd',\r\n            firstDayOfWeek: 'mo',\r\n            sunHighlight: false,\r\n            yearTxt: '',\r\n            timeBtnText: '',\r\n            dateBtnText: '',\r\n            commitBtnText: '',\r\n            weekText: '',\r\n            placeholder: '',\r\n            range: {\r\n                begin: '',\r\n                end: ''\r\n            },\r\n            message: {\r\n                101: ''\r\n            }\r\n        } // ,\r\n        // he: {\r\n        //     dayLabels: { su: '', mo: '', tu: '', we: '', th: '', fr: '', sa: '' },\r\n        //     monthLabels: {\r\n        //         1: '',\r\n        //         2: '',\r\n        //         3: '',\r\n        //         4: '',\r\n        //         5: '',\r\n        //         6: '',\r\n        //         7: '',\r\n        //         8: '',\r\n        //         9: '',\r\n        //         10: '',\r\n        //         11: '',\r\n        //         12: ''\r\n        //     },\r\n        //     dateFormat: 'dd/mm/yyyy',\r\n        //     firstDayOfWeek: 'su',\r\n        //     sunHighlight: false\r\n        // },\r\n        // ja: {\r\n        //     dayLabels: { su: '', mo: '', tu: '', we: '', th: '', fr: '', sa: '' },\r\n        //     monthLabels: {\r\n        //         1: '',\r\n        //         2: '',\r\n        //         3: '',\r\n        //         4: '',\r\n        //         5: '',\r\n        //         6: '',\r\n        //         7: '',\r\n        //         8: '',\r\n        //         9: '',\r\n        //         10: '',\r\n        //         11: '',\r\n        //         12: ''\r\n        //     },\r\n        //     dateFormat: 'yyyy.mm.dd',\r\n        //     sunHighlight: false\r\n        // },\r\n        // fr: {\r\n        //     dayLabels: { su: 'Dim', mo: 'Lun', tu: 'Mar', we: 'Mer', th: 'Jeu', fr: 'Ven', sa: 'Sam' },\r\n        //     monthLabels: {\r\n        //         1: 'Jan',\r\n        //         2: 'Fv',\r\n        //         3: 'Mar',\r\n        //         4: 'Avr',\r\n        //         5: 'Mai',\r\n        //         6: 'Juin',\r\n        //         7: 'Juil',\r\n        //         8: 'Ao',\r\n        //         9: 'Sep',\r\n        //         10: 'Oct',\r\n        //         11: 'Nov',\r\n        //         12: 'Dc'\r\n        //     },\r\n        //     dateFormat: 'dd/mm/yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // 'fr-ch': {\r\n        //     dayLabels: { su: 'Dim', mo: 'Lun', tu: 'Mar', we: 'Mer', th: 'Jeu', fr: 'Ven', sa: 'Sam' },\r\n        //     monthLabels: {\r\n        //         1: 'Jan',\r\n        //         2: 'Fv',\r\n        //         3: 'Mar',\r\n        //         4: 'Avr',\r\n        //         5: 'Mai',\r\n        //         6: 'Juin',\r\n        //         7: 'Juil',\r\n        //         8: 'Ao',\r\n        //         9: 'Sep',\r\n        //         10: 'Oct',\r\n        //         11: 'Nov',\r\n        //         12: 'Dc'\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // fi: {\r\n        //     dayLabels: { su: 'Su', mo: 'Ma', tu: 'Ti', we: 'Ke', th: 'To', fr: 'Pe', sa: 'La' },\r\n        //     monthLabels: {\r\n        //         1: 'Tam',\r\n        //         2: 'Hel',\r\n        //         3: 'Maa',\r\n        //         4: 'Huh',\r\n        //         5: 'Tou',\r\n        //         6: 'Kes',\r\n        //         7: 'Hei',\r\n        //         8: 'Elo',\r\n        //         9: 'Syy',\r\n        //         10: 'Lok',\r\n        //         11: 'Mar',\r\n        //         12: 'Jou'\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // es: {\r\n        //     dayLabels: { su: 'Do', mo: 'Lu', tu: 'Ma', we: 'Mi', th: 'Ju', fr: 'Vi', sa: 'Sa' },\r\n        //     monthLabels: {\r\n        //         1: 'Ene',\r\n        //         2: 'Feb',\r\n        //         3: 'Mar',\r\n        //         4: 'Abr',\r\n        //         5: 'May',\r\n        //         6: 'Jun',\r\n        //         7: 'Jul',\r\n        //         8: 'Ago',\r\n        //         9: 'Sep',\r\n        //         10: 'Oct',\r\n        //         11: 'Nov',\r\n        //         12: 'Dic'\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // hu: {\r\n        //     dayLabels: { su: 'Vas', mo: 'Ht', tu: 'Kedd', we: 'Sze', th: 'Cs', fr: 'Pn', sa: 'Szo' },\r\n        //     monthLabels: {\r\n        //         1: 'Jan',\r\n        //         2: 'Feb',\r\n        //         3: 'Mr',\r\n        //         4: 'pr',\r\n        //         5: 'Mj',\r\n        //         6: 'Jn',\r\n        //         7: 'Jl',\r\n        //         8: 'Aug',\r\n        //         9: 'Szep',\r\n        //         10: 'Okt',\r\n        //         11: 'Nov',\r\n        //         12: 'Dec'\r\n        //     },\r\n        //     dateFormat: 'yyyy-mm-dd',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // sv: {\r\n        //     dayLabels: { su: 'Sn', mo: 'Mn', tu: 'Tis', we: 'Ons', th: 'Tor', fr: 'Fre', sa: 'Lr' },\r\n        //     monthLabels: {\r\n        //         1: 'Jan',\r\n        //         2: 'Feb',\r\n        //         3: 'Mar',\r\n        //         4: 'Apr',\r\n        //         5: 'Maj',\r\n        //         6: 'Jun',\r\n        //         7: 'Jul',\r\n        //         8: 'Aug',\r\n        //         9: 'Sep',\r\n        //         10: 'Okt',\r\n        //         11: 'Nov',\r\n        //         12: 'Dec'\r\n        //     },\r\n        //     dateFormat: 'yyyy-mm-dd',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // nl: {\r\n        //     dayLabels: { su: 'Zon', mo: 'Maa', tu: 'Din', we: 'Woe', th: 'Don', fr: 'Vri', sa: 'Zat' },\r\n        //     monthLabels: {\r\n        //         1: 'Jan',\r\n        //         2: 'Feb',\r\n        //         3: 'Mar',\r\n        //         4: 'Apr',\r\n        //         5: 'Mei',\r\n        //         6: 'Jun',\r\n        //         7: 'Jul',\r\n        //         8: 'Aug',\r\n        //         9: 'Sep',\r\n        //         10: 'Okt',\r\n        //         11: 'Nov',\r\n        //         12: 'Dec'\r\n        //     },\r\n        //     dateFormat: 'dd-mm-yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // ru: {\r\n        //     dayLabels: { su: '', mo: '', tu: '', we: '', th: '', fr: '', sa: '' },\r\n        //     monthLabels: {\r\n        //         1: '',\r\n        //         2: '',\r\n        //         3: '',\r\n        //         4: '',\r\n        //         5: '',\r\n        //         6: '',\r\n        //         7: '',\r\n        //         8: '',\r\n        //         9: '',\r\n        //         10: '',\r\n        //         11: '',\r\n        //         12: ''\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // uk: {\r\n        //     dayLabels: { su: '', mo: '', tu: '', we: '', th: '', fr: '', sa: '' },\r\n        //     monthLabels: {\r\n        //         1: '',\r\n        //         2: '',\r\n        //         3: '',\r\n        //         4: '',\r\n        //         5: '',\r\n        //         6: '',\r\n        //         7: '',\r\n        //         8: '',\r\n        //         9: '',\r\n        //         10: '',\r\n        //         11: '',\r\n        //         12: ''\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // no: {\r\n        //     dayLabels: { su: 'Sn', mo: 'Man', tu: 'Tir', we: 'Ons', th: 'Tor', fr: 'Fre', sa: 'Lr' },\r\n        //     monthLabels: {\r\n        //         1: 'Jan',\r\n        //         2: 'Feb',\r\n        //         3: 'Mar',\r\n        //         4: 'Apr',\r\n        //         5: 'Mai',\r\n        //         6: 'Jun',\r\n        //         7: 'Jul',\r\n        //         8: 'Aug',\r\n        //         9: 'Sep',\r\n        //         10: 'Okt',\r\n        //         11: 'Nov',\r\n        //         12: 'Des'\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // tr: {\r\n        //     dayLabels: { su: 'Paz', mo: 'Pzt', tu: 'Sal', we: 'ar', th: 'Per', fr: 'Cum', sa: 'Cmt' },\r\n        //     monthLabels: {\r\n        //         1: 'Oca',\r\n        //         2: 'ub',\r\n        //         3: 'Mar',\r\n        //         4: 'Nis',\r\n        //         5: 'May',\r\n        //         6: 'Haz',\r\n        //         7: 'Tem',\r\n        //         8: 'Au',\r\n        //         9: 'Eyl',\r\n        //         10: 'Eki',\r\n        //         11: 'Kas',\r\n        //         12: 'Ara'\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // 'pt-br': {\r\n        //     dayLabels: { su: 'Dom', mo: 'Seg', tu: 'Ter', we: 'Qua', th: 'Qui', fr: 'Sex', sa: 'Sab' },\r\n        //     monthLabels: {\r\n        //         1: 'Jan',\r\n        //         2: 'Fev',\r\n        //         3: 'Mar',\r\n        //         4: 'Abr',\r\n        //         5: 'Mai',\r\n        //         6: 'Jun',\r\n        //         7: 'Jul',\r\n        //         8: 'Ago',\r\n        //         9: 'Set',\r\n        //         10: 'Out',\r\n        //         11: 'Nov',\r\n        //         12: 'Dez'\r\n        //     },\r\n        //     dateFormat: 'dd/mm/yyyy',\r\n        //     firstDayOfWeek: 'su',\r\n        //     sunHighlight: false\r\n        // },\r\n        // de: {\r\n        //     dayLabels: { su: 'So', mo: 'Mo', tu: 'Di', we: 'Mi', th: 'Do', fr: 'Fr', sa: 'Sa' },\r\n        //     monthLabels: {\r\n        //         1: 'Jan',\r\n        //         2: 'Feb',\r\n        //         3: 'Mr',\r\n        //         4: 'Apr',\r\n        //         5: 'Mai',\r\n        //         6: 'Jun',\r\n        //         7: 'Jul',\r\n        //         8: 'Aug',\r\n        //         9: 'Sep',\r\n        //         10: 'Okt',\r\n        //         11: 'Nov',\r\n        //         12: 'Dez'\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // 'de-ch': {\r\n        //     dayLabels: { su: 'So', mo: 'Mo', tu: 'Di', we: 'Mi', th: 'Do', fr: 'Fr', sa: 'Sa' },\r\n        //     monthLabels: {\r\n        //         1: 'Jan',\r\n        //         2: 'Feb',\r\n        //         3: 'Mr',\r\n        //         4: 'Apr',\r\n        //         5: 'Mai',\r\n        //         6: 'Jun',\r\n        //         7: 'Jul',\r\n        //         8: 'Aug',\r\n        //         9: 'Sep',\r\n        //         10: 'Okt',\r\n        //         11: 'Nov',\r\n        //         12: 'Dez'\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // it: {\r\n        //     dayLabels: { su: 'Dom', mo: 'Lun', tu: 'Mar', we: 'Mer', th: 'Gio', fr: 'Ven', sa: 'Sab' },\r\n        //     monthLabels: {\r\n        //         1: 'Gen',\r\n        //         2: 'Feb',\r\n        //         3: 'Mar',\r\n        //         4: 'Apr',\r\n        //         5: 'Mag',\r\n        //         6: 'Giu',\r\n        //         7: 'Lug',\r\n        //         8: 'Ago',\r\n        //         9: 'Set',\r\n        //         10: 'Ott',\r\n        //         11: 'Nov',\r\n        //         12: 'Dic'\r\n        //     },\r\n        //     dateFormat: 'dd/mm/yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // 'it-ch': {\r\n        //     dayLabels: { su: 'Dom', mo: 'Lun', tu: 'Mar', we: 'Mer', th: 'Gio', fr: 'Ven', sa: 'Sab' },\r\n        //     monthLabels: {\r\n        //         1: 'Gen',\r\n        //         2: 'Feb',\r\n        //         3: 'Mar',\r\n        //         4: 'Apr',\r\n        //         5: 'Mag',\r\n        //         6: 'Giu',\r\n        //         7: 'Lug',\r\n        //         8: 'Ago',\r\n        //         9: 'Set',\r\n        //         10: 'Ott',\r\n        //         11: 'Nov',\r\n        //         12: 'Dic'\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // pl: {\r\n        //     dayLabels: { su: 'Nie', mo: 'Pon', tu: 'Wto', we: 'ro', th: 'Czw', fr: 'Pi', sa: 'Sob' },\r\n        //     monthLabels: {\r\n        //         1: 'Sty',\r\n        //         2: 'Lut',\r\n        //         3: 'Mar',\r\n        //         4: 'Kwi',\r\n        //         5: 'Maj',\r\n        //         6: 'Cze',\r\n        //         7: 'Lip',\r\n        //         8: 'Sie',\r\n        //         9: 'Wrz',\r\n        //         10: 'Pa',\r\n        //         11: 'Lis',\r\n        //         12: 'Gru'\r\n        //     },\r\n        //     dateFormat: 'yyyy-mm-dd',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // my: {\r\n        //     dayLabels: {\r\n        //         su: '',\r\n        //         mo: '',\r\n        //         tu: '',\r\n        //         we: '',\r\n        //         th: '',\r\n        //         fr: '',\r\n        //         sa: ''\r\n        //     },\r\n        //     monthLabels: {\r\n        //         1: '',\r\n        //         2: '',\r\n        //         3: '',\r\n        //         4: '',\r\n        //         5: '',\r\n        //         6: '',\r\n        //         7: '',\r\n        //         8: '',\r\n        //         9: '',\r\n        //         10: '',\r\n        //         11: '',\r\n        //         12: ''\r\n        //     },\r\n        //     dateFormat: 'yyyy-mm-dd',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // sk: {\r\n        //     dayLabels: { su: 'Ne', mo: 'Po', tu: 'Ut', we: 'St', th: 't', fr: 'Pi', sa: 'So' },\r\n        //     monthLabels: {\r\n        //         1: 'Jan',\r\n        //         2: 'Feb',\r\n        //         3: 'Mar',\r\n        //         4: 'Apr',\r\n        //         5: 'Mj',\r\n        //         6: 'Jn',\r\n        //         7: 'Jl',\r\n        //         8: 'Aug',\r\n        //         9: 'Sep',\r\n        //         10: 'Okt',\r\n        //         11: 'Nov',\r\n        //         12: 'Dec'\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // sl: {\r\n        //     dayLabels: { su: 'Ned', mo: 'Pon', tu: 'Tor', we: 'Sre', th: 'et', fr: 'Pet', sa: 'Sob' },\r\n        //     monthLabels: {\r\n        //         1: 'Jan',\r\n        //         2: 'Feb',\r\n        //         3: 'Mar',\r\n        //         4: 'Apr',\r\n        //         5: 'Maj',\r\n        //         6: 'Jun',\r\n        //         7: 'Jul',\r\n        //         8: 'Avg',\r\n        //         9: 'Sep',\r\n        //         10: 'Okt',\r\n        //         11: 'Nov',\r\n        //         12: 'Dec'\r\n        //     },\r\n        //     dateFormat: 'dd. mm. yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // ro: {\r\n        //     dayLabels: { su: 'du', mo: 'lu', tu: 'ma', we: 'mi', th: 'jo', fr: 'vi', sa: 'sa' },\r\n        //     monthLabels: {\r\n        //         1: 'ian',\r\n        //         2: 'feb',\r\n        //         3: 'mart',\r\n        //         4: 'apr',\r\n        //         5: 'mai',\r\n        //         6: 'iun',\r\n        //         7: 'iul',\r\n        //         8: 'aug',\r\n        //         9: 'sept',\r\n        //         10: 'oct',\r\n        //         11: 'nov',\r\n        //         12: 'dec'\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // ca: {\r\n        //     dayLabels: { su: 'dg', mo: 'dl', tu: 'dt', we: 'dc', th: 'dj', fr: 'dv', sa: 'ds' },\r\n        //     monthLabels: {\r\n        //         1: 'Gen',\r\n        //         2: 'Febr',\r\n        //         3: 'Mar',\r\n        //         4: 'Abr',\r\n        //         5: 'Maig',\r\n        //         6: 'Juny',\r\n        //         7: 'Jul',\r\n        //         8: 'Ag',\r\n        //         9: 'Set',\r\n        //         10: 'Oct',\r\n        //         11: 'Nov',\r\n        //         12: 'Des'\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // id: {\r\n        //     dayLabels: { su: 'Min', mo: 'Sen', tu: 'Sel', we: 'Rab', th: 'Kam', fr: 'Jum', sa: 'Sab' },\r\n        //     monthLabels: {\r\n        //         1: 'Jan',\r\n        //         2: 'Feb',\r\n        //         3: 'Mar',\r\n        //         4: 'Apr',\r\n        //         5: 'Mei',\r\n        //         6: 'Jun',\r\n        //         7: 'Jul',\r\n        //         8: 'Ags',\r\n        //         9: 'Sep',\r\n        //         10: 'Okt',\r\n        //         11: 'Nov',\r\n        //         12: 'Des'\r\n        //     },\r\n        //     dateFormat: 'dd-mm-yyyy',\r\n        //     firstDayOfWeek: 'su',\r\n        //     sunHighlight: false\r\n        // },\r\n        // 'en-au': {\r\n        //     dayLabels: { su: 'Sun', mo: 'Mon', tu: 'Tue', we: 'Wed', th: 'Thu', fr: 'Fri', sa: 'Sat' },\r\n        //     monthLabels: {\r\n        //         1: 'Jan',\r\n        //         2: 'Feb',\r\n        //         3: 'Mar',\r\n        //         4: 'Apr',\r\n        //         5: 'May',\r\n        //         6: 'Jun',\r\n        //         7: 'Jul',\r\n        //         8: 'Aug',\r\n        //         9: 'Sep',\r\n        //         10: 'Oct',\r\n        //         11: 'Nov',\r\n        //         12: 'Dec'\r\n        //     },\r\n        //     dateFormat: 'dd/mm/yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // 'am-et': {\r\n        //     dayLabels: { su: '', mo: '', tu: '', we: '', th: '', fr: '', sa: '' },\r\n        //     monthLabels: {\r\n        //         1: '',\r\n        //         2: '',\r\n        //         3: '',\r\n        //         4: '',\r\n        //         5: '',\r\n        //         6: '',\r\n        //         7: '',\r\n        //         8: '',\r\n        //         9: '',\r\n        //         10: '',\r\n        //         11: '',\r\n        //         12: ''\r\n        //     },\r\n        //     dateFormat: 'yyyy-mm-dd',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // cs: {\r\n        //     dayLabels: { su: 'Ne', mo: 'Po', tu: 't', we: 'St', th: 't', fr: 'P', sa: 'So' },\r\n        //     monthLabels: {\r\n        //         1: 'Led',\r\n        //         2: 'no',\r\n        //         3: 'Be',\r\n        //         4: 'Dub',\r\n        //         5: 'Kv',\r\n        //         6: 'vn',\r\n        //         7: 'vc',\r\n        //         8: 'Srp',\r\n        //         9: 'Z',\r\n        //         10: 'j',\r\n        //         11: 'Lis',\r\n        //         12: 'Pro'\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // el: {\r\n        //     dayLabels: { su: '', mo: '', tu: '', we: '', th: '', fr: '', sa: '' },\r\n        //     monthLabels: {\r\n        //         1: '',\r\n        //         2: '',\r\n        //         3: '',\r\n        //         4: '',\r\n        //         5: '',\r\n        //         6: '',\r\n        //         7: '',\r\n        //         8: '',\r\n        //         9: '',\r\n        //         10: '',\r\n        //         11: '',\r\n        //         12: ''\r\n        //     },\r\n        //     dateFormat: 'dd/mm/yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // kk: {\r\n        //     dayLabels: { su: '', mo: '', tu: '', we: '', th: '', fr: '', sa: '' },\r\n        //     monthLabels: {\r\n        //         1: '',\r\n        //         2: '',\r\n        //         3: '',\r\n        //         4: '',\r\n        //         5: '',\r\n        //         6: '',\r\n        //         7: '',\r\n        //         8: '',\r\n        //         9: '',\r\n        //         10: '',\r\n        //         11: '',\r\n        //         12: ''\r\n        //     },\r\n        //     dateFormat: 'dd-mmm-yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // th: {\r\n        //     dayLabels: { su: '', mo: '', tu: '', we: '', th: '', fr: '', sa: '' },\r\n        //     monthLabels: {\r\n        //         1: '.',\r\n        //         2: '..',\r\n        //         3: '..',\r\n        //         4: '..',\r\n        //         5: '..',\r\n        //         6: '..',\r\n        //         7: '..',\r\n        //         8: '..',\r\n        //         9: '..',\r\n        //         10: '..',\r\n        //         11: '..',\r\n        //         12: '..'\r\n        //     },\r\n        //     dateFormat: 'dd-mm-yyyy',\r\n        //     firstDayOfWeek: 'su',\r\n        //     sunHighlight: false\r\n        // },\r\n        // 'ko-kr': {\r\n        //     dayLabels: { su: '', mo: '', tu: '', we: '', th: '', fr: '', sa: '' },\r\n        //     monthLabels: {\r\n        //         1: '1',\r\n        //         2: '2',\r\n        //         3: '3',\r\n        //         4: '4',\r\n        //         5: '5',\r\n        //         6: '6',\r\n        //         7: '7',\r\n        //         8: '8',\r\n        //         9: '9',\r\n        //         10: '10',\r\n        //         11: '11',\r\n        //         12: '12'\r\n        //     },\r\n        //     dateFormat: 'yyyy mm dd',\r\n        //     firstDayOfWeek: 'su',\r\n        //     sunHighlight: false\r\n        // },\r\n        // da: {\r\n        //     dayLabels: { su: 'Sn', mo: 'Man', tu: 'Tir', we: 'Ons', th: 'Tor', fr: 'Fre', sa: 'Lr' },\r\n        //     monthLabels: {\r\n        //         1: 'Jan',\r\n        //         2: 'Feb',\r\n        //         3: 'Mar',\r\n        //         4: 'Apr',\r\n        //         5: 'Maj',\r\n        //         6: 'Jun',\r\n        //         7: 'Jul',\r\n        //         8: 'Aug',\r\n        //         9: 'Sep',\r\n        //         10: 'Okt',\r\n        //         11: 'Nov',\r\n        //         12: 'Dec'\r\n        //     },\r\n        //     dateFormat: 'dd-mm-yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // lt: {\r\n        //     dayLabels: { su: 'Sk', mo: 'Pr', tu: 'An', we: 'Tr', th: 'Kt', fr: 'Pn', sa: 't' },\r\n        //     monthLabels: {\r\n        //         1: 'Saus.',\r\n        //         2: 'Vas.',\r\n        //         3: 'Kov.',\r\n        //         4: 'Bal.',\r\n        //         5: 'Geg.',\r\n        //         6: 'Bir.',\r\n        //         7: 'Liep.',\r\n        //         8: 'Rugp.',\r\n        //         9: 'Rugs.',\r\n        //         10: 'Sapl.',\r\n        //         11: 'Lapkr.',\r\n        //         12: 'Gruod.'\r\n        //     },\r\n        //     dateFormat: 'yyyy-mm-dd',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // vi: {\r\n        //     dayLabels: { su: 'CN', mo: 'T2', tu: 'T3', we: 'T4', th: 'T5', fr: 'T6', sa: 'T7' },\r\n        //     monthLabels: {\r\n        //         1: 'THG 1',\r\n        //         2: 'THG 2',\r\n        //         3: 'THG 3',\r\n        //         4: 'THG 4',\r\n        //         5: 'THG 5',\r\n        //         6: 'THG 6',\r\n        //         7: 'THG 7',\r\n        //         8: 'THG 8',\r\n        //         9: 'THG 9',\r\n        //         10: 'THG 10',\r\n        //         11: 'THG 11',\r\n        //         12: 'THG 12'\r\n        //     },\r\n        //     dateFormat: 'dd/mm/yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // bn: {\r\n        //     dayLabels: { su: '', mo: '', tu: '', we: '', th: '', fr: '', sa: '' },\r\n        //     monthLabels: {\r\n        //         1: '',\r\n        //         2: '',\r\n        //         3: '',\r\n        //         4: '',\r\n        //         5: '',\r\n        //         6: '',\r\n        //         7: '',\r\n        //         8: '',\r\n        //         9: '',\r\n        //         10: '',\r\n        //         11: '',\r\n        //         12: ''\r\n        //     },\r\n        //     dateFormat: 'dd-mm-yyyy',\r\n        //     firstDayOfWeek: 'su',\r\n        //     sunHighlight: false\r\n        // },\r\n        // bg: {\r\n        //     dayLabels: { su: '', mo: '', tu: '', we: '', th: '', fr: '', sa: '' },\r\n        //     monthLabels: {\r\n        //         1: '.',\r\n        //         2: '.',\r\n        //         3: '',\r\n        //         4: '.',\r\n        //         5: '',\r\n        //         6: '',\r\n        //         7: '',\r\n        //         8: '.',\r\n        //         9: '.',\r\n        //         10: '.',\r\n        //         11: '.',\r\n        //         12: '.'\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // hr: {\r\n        //     dayLabels: { su: 'Ne', mo: 'Po', tu: 'Ul', we: 'Sr', th: 'e', fr: 'Pe', sa: 'Su' },\r\n        //     monthLabels: {\r\n        //         1: 'Sij',\r\n        //         2: 'Vel',\r\n        //         3: 'Ou',\r\n        //         4: 'Tra',\r\n        //         5: 'Svi',\r\n        //         6: 'Lip',\r\n        //         7: 'Srp',\r\n        //         8: 'Kol',\r\n        //         9: 'Ruj',\r\n        //         10: 'Lis',\r\n        //         11: 'Stu',\r\n        //         12: 'Pro'\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy.',\r\n        //     firstDayOfWeek: 'su',\r\n        //     sunHighlight: false\r\n        // },\r\n        // ar: {\r\n        //     dayLabels: {\r\n        //         su: '',\r\n        //         mo: '',\r\n        //         tu: '',\r\n        //         we: '',\r\n        //         th: '',\r\n        //         fr: '',\r\n        //         sa: ''\r\n        //     },\r\n        //     monthLabels: {\r\n        //         1: '',\r\n        //         2: '',\r\n        //         3: '',\r\n        //         4: '',\r\n        //         5: '',\r\n        //         6: '',\r\n        //         7: '',\r\n        //         8: '',\r\n        //         9: '',\r\n        //         10: '',\r\n        //         11: '',\r\n        //         12: ''\r\n        //     },\r\n        //     dateFormat: 'yyyy-mm-dd',\r\n        //     firstDayOfWeek: 'sa',\r\n        //     sunHighlight: false\r\n        // },\r\n        // is: {\r\n        //     dayLabels: { su: 'sun', mo: 'mn', tu: 'ri', we: 'mi', th: 'fim', fr: 'fs', sa: 'lau' },\r\n        //     monthLabels: {\r\n        //         1: 'jan',\r\n        //         2: 'feb',\r\n        //         3: 'mar',\r\n        //         4: 'apr',\r\n        //         5: 'ma',\r\n        //         6: 'jn',\r\n        //         7: 'jl',\r\n        //         8: 'g',\r\n        //         9: 'sep',\r\n        //         10: 'okt',\r\n        //         11: 'nv',\r\n        //         12: 'des'\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy',\r\n        //     firstDayOfWeek: 'su',\r\n        //     sunHighlight: false\r\n        // },\r\n        // tw: {\r\n        //     dayLabels: { su: '', mo: '', tu: '', we: '', th: '', fr: '', sa: '' },\r\n        //     monthLabels: {\r\n        //         1: '',\r\n        //         2: '',\r\n        //         3: '',\r\n        //         4: '',\r\n        //         5: '',\r\n        //         6: '',\r\n        //         7: '',\r\n        //         8: '',\r\n        //         9: '',\r\n        //         10: '',\r\n        //         11: '',\r\n        //         12: ''\r\n        //     },\r\n        //     dateFormat: 'yyyy-mm-dd',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // lv: {\r\n        //     dayLabels: { su: 'S', mo: 'P', tu: 'O', we: 'T', th: 'C', fr: 'P', sa: 'S' },\r\n        //     monthLabels: {\r\n        //         1: 'Janv',\r\n        //         2: 'Febr',\r\n        //         3: 'Marts',\r\n        //         4: 'Apr',\r\n        //         5: 'Maijs',\r\n        //         6: 'Jn',\r\n        //         7: 'Jl',\r\n        //         8: 'Aug',\r\n        //         9: 'Sept',\r\n        //         10: 'Okt',\r\n        //         11: 'Nov',\r\n        //         12: 'Dec'\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // et: {\r\n        //     dayLabels: { su: 'P', mo: 'E', tu: 'T', we: 'K', th: 'N', fr: 'R', sa: 'L' },\r\n        //     monthLabels: {\r\n        //         1: 'Jaan',\r\n        //         2: 'Veebr',\r\n        //         3: 'Mrts',\r\n        //         4: 'Apr',\r\n        //         5: 'Mai',\r\n        //         6: 'Juuni',\r\n        //         7: 'Juuli',\r\n        //         8: 'Aug',\r\n        //         9: 'Sept',\r\n        //         10: 'Okt',\r\n        //         11: 'Nov',\r\n        //         12: 'Dets'\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // }\r\n    };\r\n\r\n    getLocaleOptions(locale: string): IMyOptions {\r\n        if (locale && this.locales.hasOwnProperty(locale)) {\r\n            // User given locale\r\n            return this.locales[locale];\r\n        }\r\n        // Default: en\r\n        return this.locales[DEFAULT_LOCALE];\r\n    }\r\n}\r\n","/*\r\n * @Author: (Lucas Huang)\r\n * @Date: 2019-09-04 07:40:04\r\n * @LastEditors: (Lucas Huang)\r\n * @LastEditTime: 2019-09-04 15:21:46\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\nimport { Injectable } from '@angular/core';\r\nimport {\r\n    IMyDateModel,\r\n    IMySingleDateModel,\r\n    IMyDateRangeModel,\r\n    IMyDate,\r\n    IMyDateRange,\r\n    IMyMonth,\r\n    IMyMonthLabels,\r\n    IMyMarkedDates,\r\n    IMyMarkedDate,\r\n    IMyDateFormat,\r\n    IMyOptions\r\n} from '../interfaces/public-api';\r\nimport { KeyCode, KeyName, ShowType } from '../enums/public-api';\r\nimport { D, DD, M, MM, MMM, YYYY, SU, MO, TU, WE, TH, FR, SA, ZERO_STR, EMPTY_STR } from '../constants/constants';\r\n\r\n@Injectable()\r\nexport class UtilService {\r\n    weekDays: Array<string> = [SU, MO, TU, WE, TH, FR, SA];\r\n\r\n    isDateValid(dateStr: string, options: IMyOptions, isReturn = false): IMyDate {\r\n        // tslint:disable-next-line:one-variable-per-declaration\r\n        let _dateStr: string, hour = 0, minute = 0, second = 0;\r\n\r\n        const returnDate: IMyDate = this.resetDate();\r\n\r\n        if (!dateStr || !dateStr.length) {\r\n            return returnDate;\r\n        }\r\n\r\n        const { dateFormat, minYear, maxYear, monthLabels, showTime, returnFormat, showType } = options;\r\n        let _st = showTime;\r\n        let formatStr = dateFormat;\r\n        if (isReturn) {\r\n            formatStr = returnFormat.replace(/[,]/g, '-').replace(/[]/, '').replace(/[,]/g, ':').replace(/[]/g, '');\r\n            dateStr = dateStr.replace(/[,]/g, '-').replace(/[]/, '').replace(/[,]/g, ':').replace(/[]/g, '');\r\n\r\n            if (dateStr[dateStr.length - 1] === '-' || dateStr[dateStr.length - 1] === ':') {\r\n                dateStr = dateStr.substring(0, dateStr.length - 1);\r\n            }\r\n\r\n            if (!showTime && returnFormat.toLocaleLowerCase().indexOf('hh:mm') > -1) {\r\n                _st = true;\r\n            }\r\n        }\r\n\r\n        const daysInMonth: Array<number> = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\r\n        const isMonthStr: boolean = formatStr.indexOf(MMM) !== -1;\r\n        let delimeters: Array<string> = formatStr.match(/[^(DdMmYy)]{1,}/g);\r\n        if (_st && dateStr) {\r\n            _dateStr = dateStr.split(' ')[0];\r\n            Object.assign(returnDate, { hour: 0, minute: 0, second: 0 });\r\n            const timeStr = dateStr.split(' ')[1];\r\n            if (timeStr) {\r\n                const _timer = timeStr.replace('', ':').replace('', ':').replace('', '').split(':');\r\n                if (_timer[0]) {\r\n                    hour = Number(_timer[0].substr(0, 2));\r\n                    hour = isNaN(hour) ? 0 : hour;\r\n                }\r\n                if (_timer[1]) {\r\n                    minute = Number(_timer[1].substr(0, 2));\r\n                    minute = isNaN(minute) ? 0 : minute;\r\n                }\r\n\r\n                if (_timer[2]) {\r\n                    second = Number(_timer[2].substr(0, 2));\r\n                    second = isNaN(second) ? 0 : second;\r\n                }\r\n            } else {\r\n                delimeters = undefined;\r\n                const reg = /^\\d{1,}$/;\r\n                if (reg.test(dateStr)) { //  yyyyMMddHHmmss\r\n                    const df = formatStr;\r\n                    _dateStr = dateStr.substr(0, 8);\r\n                    let _timer = dateStr.substr(8);\r\n                    if (_timer) {\r\n                        if (df.includes('HH')) {\r\n                            if (_timer) {\r\n                                hour = +_timer.slice(0, 2);\r\n                                _timer = _timer.slice(2);\r\n                            }\r\n                        }\r\n                        if (df.includes('mm')) {\r\n                            if (_timer) {\r\n                                minute = +_timer.slice(0, 2);\r\n                                _timer = _timer.slice(2);\r\n                            }\r\n                        }\r\n                        if (df.includes('ss')) {\r\n                            if (_timer) {\r\n                                second = +_timer.slice(0, 2);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            _dateStr = dateStr ? dateStr.split(' ')[0] : '';\r\n        }\r\n        const dateValue: Array<IMyDateFormat> = this.getDateValue(_dateStr, formatStr, delimeters);\r\n\r\n        const year: number = this.getNumberByValue(dateValue[0]);\r\n        const month: number = isMonthStr\r\n            ? this.getMonthNumberByMonthName(dateValue[1], monthLabels)\r\n            : this.getNumberByValue(dateValue[1]);\r\n        const day: number = this.getNumberByValue(dateValue[2]);\r\n\r\n        if (showType === ShowType.noDateAndMonth) {\r\n            return { year, month: 1, day: 1 };\r\n        }\r\n\r\n        if (month !== -1 && day !== -1 && year !== -1) {\r\n            if (year < minYear || year > maxYear || month < 1 || month > 12) {\r\n                return returnDate;\r\n            }\r\n            const date: IMyDate = _st ? { year, month, day, hour, minute, second } : { year, month, day };\r\n\r\n            if (this.isDisabledDate(date, options)) {\r\n                return returnDate;\r\n            }\r\n\r\n            if (year % 400 === 0 || (year % 100 !== 0 && year % 4 === 0)) {\r\n                daysInMonth[1] = 29;\r\n            }\r\n\r\n            if (day < 1 || day > daysInMonth[month - 1]) {\r\n                return returnDate;\r\n            }\r\n\r\n            // Valid date\r\n            if (options.showType === ShowType.noDate) {\r\n                return { year: date.year, month: date.month };\r\n            } else if (options.showType === ShowType.noDateAndMonth) {\r\n                return { year: date.year };\r\n            } else {\r\n                return date;\r\n            }\r\n        }\r\n        return returnDate;\r\n    }\r\n\r\n    isDateValidDateRange(dateRangeStr: string, options: IMyOptions): IMyDateRange {\r\n        let dateRange: IMyDateRange = {\r\n            begin: this.resetDate(),\r\n            end: this.resetDate()\r\n        };\r\n        if (dateRangeStr && dateRangeStr.length) {\r\n            const dates: Array<string> = dateRangeStr.split(options.dateRangeDatesDelimiter);\r\n            if (dates && dates.length === 2) {\r\n                const [beginDate, endDate] = dates;\r\n                const begin: IMyDate = this.isDateValid(beginDate, options, true);\r\n                if (this.isInitializedDate(begin)) {\r\n                    const end: IMyDate = this.isDateValid(endDate, options, true);\r\n\r\n                    if (this.isInitializedDate(end) && this.isDateSameOrEarlier(begin, end)) {\r\n                        dateRange = { begin, end };\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return dateRange;\r\n    }\r\n\r\n    getDateValue(dateStr: string, dateFormat: string, delimeters: Array<string>): Array<IMyDateFormat> {\r\n        const da: Array<IMyDateFormat> = [];\r\n\r\n        if (delimeters) {\r\n            let del: string = delimeters[0];\r\n            if (delimeters[0] !== delimeters[1]) {\r\n                del = delimeters[0] + delimeters[1];\r\n                if (delimeters[2] && delimeters[1] !== delimeters[2]) {\r\n                    del = del + delimeters[2];\r\n                }\r\n            }\r\n            const re: any = new RegExp('[' + del + ']');\r\n            const ds: Array<string> = dateStr.split(re);\r\n            const df: Array<string> = dateFormat.split(re);\r\n            for (let i = 0; i < df.length; i++) {\r\n                if (df[i].indexOf(YYYY) !== -1) {\r\n                    da[0] = { value: ds[i], format: df[i] };\r\n                }\r\n                if (df[i].indexOf(M) !== -1) {\r\n                    da[1] = ds[i] === undefined ? { value: '1', format: df[i] } : { value: ds[i], format: df[i] };\r\n                }\r\n                if (df[i].indexOf(D) !== -1) {\r\n                    da[2] = ds[i] === undefined ? { value: '1', format: df[i] } : { value: ds[i], format: df[i] };\r\n                }\r\n            }\r\n        } else {\r\n            const yearIndex = (dateFormat + '').indexOf(YYYY);\r\n            const monthIndex = (dateFormat + '').indexOf(MM);\r\n            const dayIndex = (dateFormat + '').indexOf(DD);\r\n            if (yearIndex >= 0) {\r\n                da[0] = { value: dateStr.substring(yearIndex, yearIndex + 4), format: dateFormat.substring(yearIndex, yearIndex + 4) };\r\n            }\r\n            if (monthIndex >= 0) {\r\n                da[1] = { value: dateStr.substring(monthIndex, monthIndex + 2), format: dateFormat.substring(monthIndex, monthIndex + 2) };\r\n            }\r\n            if (dayIndex >= 0) {\r\n                da[2] = { value: dateStr.substring(dayIndex, dayIndex + 2), format: dateFormat.substring(dayIndex, dayIndex + 2) };\r\n            }\r\n        }\r\n        return da;\r\n    }\r\n\r\n    getMonthNumberByMonthName(df: IMyDateFormat, monthLabels: IMyMonthLabels): number {\r\n        if (df.value) {\r\n            for (let key = 1; key <= 12; key++) {\r\n                if (df.value.toLowerCase() === monthLabels[key].toLowerCase()) {\r\n                    return key;\r\n                }\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n\r\n    getNumberByValue(df: IMyDateFormat): number {\r\n        if (!df) {\r\n            return 1;\r\n        }\r\n        if (!/^\\d+$/.test(df.value)) {\r\n            return -1;\r\n        }\r\n\r\n        let nbr: number = Number(df.value);\r\n        if (\r\n            (df.format.length === 1 && df.value.length !== 1 && nbr < 10) ||\r\n            (df.format.length === 1 && df.value.length !== 2 && nbr >= 10)\r\n        ) {\r\n            nbr = -1;\r\n        } else if (df.format.length === 2 && df.value.length > 2) {\r\n            nbr = -1;\r\n        }\r\n        return nbr;\r\n    }\r\n\r\n    parseDefaultMonth(monthString: string): IMyMonth {\r\n        const month: IMyMonth = { monthTxt: EMPTY_STR, monthNbr: 0, year: 0 };\r\n        if (monthString !== EMPTY_STR) {\r\n            const split = monthString.split(monthString.match(/[^0-9]/)[0]);\r\n            month.monthNbr = split[0].length === 2 ? Number(split[0]) : Number(split[1]);\r\n            month.year = split[0].length === 2 ? Number(split[1]) : Number(split[0]);\r\n        }\r\n        return month;\r\n    }\r\n\r\n    isDisabledDate(date: IMyDate, options: IMyOptions): boolean {\r\n        const {\r\n            minYear,\r\n            maxYear,\r\n            disableUntil,\r\n            disableSince,\r\n            disableWeekends,\r\n            disableDates,\r\n            disableDateRanges,\r\n            disableWeekdays,\r\n            enableDates\r\n        } = options;\r\n\r\n        // for (const d of enableDates) {\r\n        //     if (\r\n        //         (d.year === 0 || d.year === date.year) &&\r\n        //         (d.month === 0 || d.month === date.month) &&\r\n        //         d.day === date.day\r\n        //     ) {\r\n        //         return false;\r\n        //     }\r\n        // }\r\n\r\n        if ((date.year < minYear && date.month === 12) || (date.year > maxYear && date.month === 1)) {\r\n            return true;\r\n        }\r\n        const dateMs: number = this.getTimeInMilliseconds(date);\r\n        if (this.isInitializedDate(disableUntil) && (dateMs + 24 * 60 * 60 * 1000 - 1) < this.getTimeInMilliseconds(disableUntil)) {\r\n            return true;\r\n        }\r\n        if (this.isInitializedDate(disableSince) && dateMs > this.getTimeInMilliseconds(disableSince)) {\r\n            return true;\r\n        }\r\n\r\n        if (disableWeekends) {\r\n            const dayNbr = this.getDayNumber(date);\r\n            if (dayNbr === 0 || dayNbr === 6) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        const dn = this.getDayNumber(date);\r\n        if (disableWeekdays.length > 0) {\r\n            for (const wd of disableWeekdays) {\r\n                if (dn === this.getWeekdayIndex(wd)) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n\r\n        for (const d of disableDates) {\r\n            if (\r\n                (d.year === 0 || d.year === date.year) &&\r\n                (d.month === 0 || d.month === date.month) &&\r\n                d.day === date.day\r\n            ) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        for (const d of disableDateRanges) {\r\n            if (\r\n                this.isInitializedDate(d.begin) &&\r\n                this.isInitializedDate(d.end) &&\r\n                dateMs >= this.getTimeInMilliseconds(d.begin) &&\r\n                dateMs <= this.getTimeInMilliseconds(d.end)\r\n            ) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    isMarkedDate(date: IMyDate, markedDates: Array<IMyMarkedDates>, markWeekends: IMyMarkedDate): IMyMarkedDate {\r\n        for (const md of markedDates) {\r\n            for (const d of md.dates) {\r\n                if (\r\n                    (d.year === 0 || d.year === date.year) &&\r\n                    (d.month === 0 || d.month === date.month) &&\r\n                    d.day === date.day\r\n                ) {\r\n                    return { marked: true, color: md.color };\r\n                }\r\n            }\r\n        }\r\n        if (markWeekends && markWeekends.marked) {\r\n            const dayNbr = this.getDayNumber(date);\r\n            if (dayNbr === 0 || dayNbr === 6) {\r\n                return { marked: true, color: markWeekends.color };\r\n            }\r\n        }\r\n        return { marked: false, color: EMPTY_STR };\r\n    }\r\n\r\n    isHighlightedDate(\r\n        date: IMyDate,\r\n        sunHighlight: boolean,\r\n        satHighlight: boolean,\r\n        highlightDates: Array<IMyDate>\r\n    ): boolean {\r\n        const dayNbr: number = this.getDayNumber(date);\r\n        if ((sunHighlight && dayNbr === 0) || (satHighlight && dayNbr === 6)) {\r\n            return true;\r\n        }\r\n        for (const d of highlightDates) {\r\n            if (\r\n                (d.year === 0 || d.year === date.year) &&\r\n                (d.month === 0 || d.month === date.month) &&\r\n                d.day === date.day\r\n            ) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    getWeekNumber(date: IMyDate): number {\r\n        const d: Date = new Date(date.year, date.month - 1, date.day, 0, 0, 0, 0);\r\n        d.setDate(d.getDate() + (d.getDay() === 0 ? -3 : 4 - d.getDay()));\r\n        return Math.round((d.getTime() - new Date(d.getFullYear(), 0, 4).getTime()) / 86400000 / 7) + 1;\r\n    }\r\n    getNowWeekTime(date: Date): IMyDateRange {\r\n        date.setDate(date.getDate() - ((date.getDay() + 6) % 7));\r\n        const begin = {\r\n            year: date.getFullYear(),\r\n            month: date.getMonth() + 1,\r\n            day: date.getDate()\r\n        };\r\n        date.setDate(date.getDate() + 6);\r\n        const end = {\r\n            year: date.getFullYear(),\r\n            month: date.getMonth() + 1,\r\n            day: date.getDate()\r\n        };\r\n        return { begin, end };\r\n    }\r\n\r\n    isMonthDisabledByDisableUntil(date: IMyDate, disableUntil: IMyDate): boolean {\r\n        return (\r\n            this.isInitializedDate(disableUntil) &&\r\n            this.getTimeInMilliseconds(date) <= this.getTimeInMilliseconds(disableUntil)\r\n        );\r\n    }\r\n\r\n    isMonthDisabledByDisableSince(date: IMyDate, disableSince: IMyDate): boolean {\r\n        return (\r\n            this.isInitializedDate(disableSince) &&\r\n            this.getTimeInMilliseconds(date) >= this.getTimeInMilliseconds(disableSince)\r\n        );\r\n    }\r\n\r\n    getDateModel(\r\n        date: IMyDate,\r\n        dateRange: IMyDateRange,\r\n        dateFormat: string,\r\n        monthLabels: IMyMonthLabels,\r\n        rangeDelimiter: string,\r\n        returnFormat: string,\r\n        dateStr: string = EMPTY_STR\r\n    ): IMyDateModel {\r\n        let singleDateModel: IMySingleDateModel = null;\r\n        let dateRangeModel: IMyDateRangeModel = null;\r\n\r\n        if (date) {\r\n            singleDateModel = {\r\n                date,\r\n                jsDate: this.getDate2(date),\r\n                formatted: dateStr.length ? dateStr : this.formatDate(date, dateFormat, monthLabels),\r\n                returnFormatted: this.formatDate(date, returnFormat, monthLabels),\r\n                epoc: this.getEpocTime(date)\r\n            };\r\n        } else {\r\n            dateRangeModel = {\r\n                beginDate: dateRange.begin,\r\n                beginJsDate: this.getDate(dateRange.begin),\r\n                beginEpoc: this.getEpocTime(dateRange.begin),\r\n                endDate: dateRange.end,\r\n                endJsDate: this.getDate(dateRange.end),\r\n                endEpoc: this.getEpocTime(dateRange.end),\r\n                formatted:\r\n                    this.formatDate(dateRange.begin, dateFormat, monthLabels) +\r\n                    rangeDelimiter +\r\n                    this.formatDate(dateRange.end, dateFormat, monthLabels),\r\n                returnFormatted:\r\n                    this.formatDate(dateRange.begin, returnFormat, monthLabels) +\r\n                    rangeDelimiter +\r\n                    this.formatDate(dateRange.end, returnFormat, monthLabels),\r\n            };\r\n        }\r\n        return {\r\n            isRange: date === null,\r\n            singleDate: singleDateModel,\r\n            dateRange: dateRangeModel\r\n        };\r\n    }\r\n\r\n    formatDate(date: IMyDate, dateFormat: string, monthLabels: IMyMonthLabels): string {\r\n        if (!date.month && dateFormat.indexOf(MM) === -1) {\r\n            dateFormat = this.delete(dateFormat, MM);\r\n        }\r\n        if (!date.day && dateFormat.indexOf(DD) === -1) {\r\n            dateFormat = this.delete(dateFormat, DD);\r\n        }\r\n        let formatted: string = dateFormat.replace(YYYY, String(date.year));\r\n\r\n        if (dateFormat.indexOf(M) === -1) {\r\n            formatted = formatted.replace(MM, '01');\r\n        } else {\r\n            if (dateFormat.indexOf(MMM) !== -1) {\r\n                formatted = formatted.replace(MMM, monthLabels[date.month]);\r\n            } else if (dateFormat.indexOf(MM) !== -1) {\r\n                formatted = formatted.replace(MM, this.preZero(date.month || 1));\r\n            } else {\r\n                formatted = formatted.replace(M, String(date.month || 1));\r\n            }\r\n        }\r\n\r\n        if (dateFormat.indexOf(DD) === -1) {\r\n            formatted = formatted.replace(DD, '01');\r\n        } else if (dateFormat.indexOf(DD) !== -1) {\r\n            formatted = formatted.replace(DD, this.preZero(date.day || 1));\r\n        } else {\r\n            formatted = formatted.replace(D, String(date.day || 1));\r\n        }\r\n\r\n        formatted = formatted.replace('MM', 'mm').replace('HH', this.preZero(date.hour || 0))\r\n        .replace('mm', this.preZero(date.minute || 0))\r\n        .replace('ss', this.preZero(date.second || 0));\r\n\r\n        return formatted && formatted.length > 2 ? formatted : '';\r\n    }\r\n\r\n    delete(format: string, delStr: string) {\r\n        const re = format.match(/[^(DdMmYy)]{1,}/g);\r\n        const index = format.indexOf(delStr);\r\n\r\n        if (index < 0) {\r\n            return format;\r\n        } else if (index === 0) {\r\n            if (re) {\r\n                return format.substring(3);\r\n            } else {\r\n                return format.substring(2);\r\n            }\r\n        } else if (index + 2 === format.length) {\r\n            if (re) {\r\n                return format.substring(0, format.length - 3);\r\n            } else {\r\n                return format.substring(0, format.length - 2);\r\n            }\r\n        } else {\r\n            if (re) {\r\n                return format.substring(0, index) + format.substring(index + 3);\r\n            } else {\r\n                return format.substring(0, index) + format.substring(index + 2);\r\n            }\r\n        }\r\n    }\r\n    getFormattedDate(model: IMyDateModel): string {\r\n        return !model.isRange ? model.singleDate.formatted : model.dateRange.formatted;\r\n    }\r\n\r\n    preZero(val: number): string {\r\n        return val < 10 ? ZERO_STR + Number(val) : String(val);\r\n    }\r\n\r\n    isInitializedDate(date: IMyDate): boolean {\r\n        return date && date.year !== 0 && date.month !== 0 && date.day !== 0;\r\n    }\r\n\r\n    isInitializedMonth(date: IMyDate): boolean {\r\n        return date && date.year !== 0 && date.month !== 0;\r\n    }\r\n\r\n    isInitializedYear(date: IMyDate): boolean {\r\n        return date && date.year !== 0;\r\n    }\r\n\r\n    isDateEarlier(firstDate: IMyDate, secondDate: IMyDate): boolean {\r\n        return this.getTimeInMilliseconds(firstDate) < this.getTimeInMilliseconds(secondDate);\r\n    }\r\n\r\n    isDateSameOrEarlier(firstDate: IMyDate, secondDate: IMyDate): boolean {\r\n        return this.getTimeInMilliseconds(firstDate) <= this.getTimeInMilliseconds(secondDate);\r\n    }\r\n\r\n    isDateSame(firstDate: IMyDate, secondDate: IMyDate): boolean {\r\n        return this.getTimeInMilliseconds(firstDate) === this.getTimeInMilliseconds(secondDate);\r\n    }\r\n\r\n    isDateRangeBeginOrEndSame(dateRange: IMyDateRange, date: IMyDate): boolean {\r\n        const dateMs: number = this.getTimeInMilliseconds(date);\r\n        return (\r\n            this.getTimeInMilliseconds(dateRange.begin) === dateMs ||\r\n            this.getTimeInMilliseconds(dateRange.end) === dateMs\r\n        );\r\n    }\r\n\r\n    isDateInRange(date: IMyDate, dateRange: IMyDateRange): boolean {\r\n        if (!this.isInitializedDate(dateRange.begin) || !this.isInitializedDate(dateRange.end)) {\r\n            return false;\r\n        }\r\n        return this.isDateSameOrEarlier(dateRange.begin, date) && this.isDateSameOrEarlier(date, dateRange.end);\r\n    }\r\n\r\n    resetDate(): IMyDate {\r\n        return { year: 0, month: 0, day: 0 };\r\n    }\r\n\r\n    getTimeInMilliseconds(date: IMyDate): number {\r\n        return this.getDate(date).getTime();\r\n    }\r\n\r\n    getDate2(date: IMyDate): Date {\r\n        const now = new Date();\r\n\r\n        if (!date.year) {\r\n            date.year = now.getFullYear();\r\n        }\r\n\r\n        if (!date.month) {\r\n            date.month = now.getMonth() + 1;\r\n        }\r\n\r\n        if (!date.day) {\r\n            date.day = 1;\r\n        }\r\n\r\n        return new Date(\r\n            date.year,\r\n            date.month - 1,\r\n            date.day,\r\n            date.hour ? date.hour : 0,\r\n            date.minute ? date.minute : 0,\r\n            date.second ? date.second : 0,\r\n            0\r\n        );\r\n    }\r\n\r\n    getDate(date: IMyDate): Date {\r\n        return new Date(\r\n            date.year || 0,\r\n            date.month ? date.month - 1 : 0,\r\n            date.day || 0,\r\n            date.hour ? date.hour : 0,\r\n            date.minute ? date.minute : 0,\r\n            date.second ? date.second : 0,\r\n            0\r\n        );\r\n    }\r\n\r\n    getDayNumber(date: IMyDate): number {\r\n        return new Date(\r\n            date.year,\r\n            date.month - 1,\r\n            date.day,\r\n            date.hour ? date.hour : 0,\r\n            date.minute ? date.minute : 0,\r\n            date.second ? date.second : 0,\r\n            0\r\n        ).getDay();\r\n    }\r\n\r\n    getWeekdayIndex(wd: string) {\r\n        return this.weekDays.indexOf(wd);\r\n    }\r\n\r\n    getEpocTime(date: IMyDate): number {\r\n        return Math.round(this.getTimeInMilliseconds(date) / 1000.0);\r\n    }\r\n\r\n    getKeyCodeFromEvent(event: any): number {\r\n        const key: any = event.key || event.keyCode;\r\n\r\n        if (key === KeyName.enter || key === KeyCode.enter) {\r\n            return KeyCode.enter;\r\n        } else if (key === KeyName.esc || key === KeyCode.esc) {\r\n            return KeyCode.esc;\r\n        } else if (key === KeyName.space || key === KeyCode.space) {\r\n            return KeyCode.space;\r\n        } else if (key === KeyName.leftArrow || key === KeyCode.leftArrow) {\r\n            return KeyCode.leftArrow;\r\n        } else if (key === KeyName.upArrow || key === KeyCode.upArrow) {\r\n            return KeyCode.upArrow;\r\n        } else if (key === KeyName.rightArrow || key === KeyCode.rightArrow) {\r\n            return KeyCode.rightArrow;\r\n        } else if (key === KeyName.downArrow || key === KeyCode.downArrow) {\r\n            return KeyCode.downArrow;\r\n        } else if (key === KeyName.tab || key === KeyCode.tab) {\r\n            return KeyCode.tab;\r\n        } else if (key === KeyName.shift || key === KeyCode.shift) {\r\n            return KeyCode.shift;\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n    getNearDate(now: IMyDate, min: IMyDate, max: IMyDate) {\r\n        const minMilliseconds = this.getTimeInMilliseconds(min)\r\n        const maxMilliseconds = this.getTimeInMilliseconds(max)\r\n        const nowMilliseconds = this.getTimeInMilliseconds(now)\r\n        if (maxMilliseconds - nowMilliseconds > nowMilliseconds - minMilliseconds) {\r\n            return min;\r\n        } else {\r\n            return max;\r\n        }\r\n    }\r\n    // \r\n    // [0minHour\r\n    // (maxHour,23]\r\n    disabledHours(min: IMyDate, max: IMyDate, currentDate: IMyDate) {\r\n        let minHour = min.hour;\r\n        let maxHour = max.hour;\r\n        let res = [];\r\n        if (this.isDateSame({ year: currentDate.year, month: currentDate.month, day: currentDate.day }, { year: min.year, month: min.month, day: min.day })) {\r\n            while (minHour-- >= 0) {\r\n                res.push(minHour);\r\n            }\r\n        } else if (this.isDateSame({ year: currentDate.year, month: currentDate.month, day: currentDate.day }, { year: max.year, month: max.month, day: max.day })) {\r\n            while (maxHour++ < 24) {\r\n                res.push(maxHour);\r\n            }\r\n        }\r\n        return res;\r\n    }\r\n    // \r\n    //[0minMinute\r\n    //maxMinute59]\r\n    disabledMinutes(min: IMyDate, max: IMyDate, _hour: number, currentDate: IMyDate) {\r\n        let maxHour = max.hour;\r\n        let maxMinute = max.minute;\r\n        let minHour = min.hour;\r\n        let minMinute = min.minute;\r\n        let res = [];\r\n        if (this.isDateSame({ year: currentDate.year, month: currentDate.month, day: currentDate.day }, { year: min.year, month: min.month, day: min.day })) {\r\n            if (_hour == minHour) {\r\n                while (minMinute-- >= 0) {\r\n                    res.push(minMinute);\r\n                }\r\n            }\r\n        } else if (this.isDateSame({ year: currentDate.year, month: currentDate.month, day: currentDate.day }, { year: max.year, month: max.month, day: max.day })) {\r\n            if (_hour == maxHour) {\r\n                while (maxMinute++ < 60) {\r\n                    res.push(maxMinute);\r\n                }\r\n            }\r\n        }\r\n        return res;\r\n\r\n    }\r\n    // \r\n    //[0minSecond\r\n    //maxSecond59]\r\n    disabledSeconds(min: IMyDate, max: IMyDate, _hour: number, _minute: number, currentDate: IMyDate) {\r\n        let maxHour = max.hour;\r\n        let maxMinute = max.minute;\r\n        let maxSecond = max.second;\r\n        let minHour = min.hour;\r\n        let minMinute = min.minute;\r\n        let minSecond = min.second;\r\n        let res = [];\r\n        if (this.isDateSame({ year: currentDate.year, month: currentDate.month, day: currentDate.day }, { year: min.year, month: min.month, day: min.day })) {\r\n            if (_hour == minHour && _minute == minMinute) {\r\n                while (minSecond-- >= 0) {\r\n                    res.push(minSecond);\r\n                }\r\n            }\r\n\r\n        } else if (this.isDateSame({ year: currentDate.year, month: currentDate.month, day: currentDate.day }, { year: max.year, month: max.month, day: max.day })) {\r\n            if (_hour == maxHour && _minute == maxMinute) {\r\n                while (maxSecond++ < 60) {\r\n                    res.push(maxSecond);\r\n                }\r\n            }\r\n        }\r\n        return res;\r\n    }\r\n}\r\n","import { IMyDate, IMyDateRange, IMySelectorPosition, IMyOptions } from '../interfaces/public-api';\r\nimport { PX, EMPTY_STR } from '../constants/constants';\r\nimport { Year } from '../enums/year.enum';\r\nimport { UtilService } from './farris-datepicker.util.service';\r\nimport { ComponentRef } from '@angular/core';\r\n\r\nexport class DatePickerService {\r\n    opts;\r\n    utilService;\r\n\r\n    private _mouseWheelHandle = null;\r\n    private _mouseScrollHandle = null;\r\n\r\n    constructor(opts) {\r\n        this.opts = opts;\r\n        this.utilService = new UtilService();\r\n    }\r\n\r\n    static parseOptions(opts: IMyOptions, defaultOpts): IMyOptions {\r\n        if (defaultOpts !== undefined) {\r\n            Object.keys(defaultOpts).forEach(k => {\r\n                if (defaultOpts[k] !== undefined && defaultOpts[k] !== '') {\r\n                    (opts as IMyOptions)[k] = defaultOpts[k];\r\n                }\r\n            });\r\n        }\r\n        if (opts.minYear < Year.min) {\r\n            opts.minYear = Year.min;\r\n        }\r\n        if (opts.maxYear > Year.max) {\r\n            opts.maxYear = Year.max;\r\n        }\r\n        return opts;\r\n    }\r\n\r\n    validate(value: string) {\r\n        const { dateRange } = this.opts;\r\n\r\n        let valid = false;\r\n        if (!dateRange) {\r\n            const date: IMyDate = this.utilService.isDateValid(value, this.opts);\r\n\r\n            valid = this.utilService.isInitializedDate(date);\r\n        } else {\r\n            const _dateRange: IMyDateRange = this.utilService.isDateValidDateRange(value, this.opts);\r\n            const { begin, end } = _dateRange;\r\n            valid = this.utilService.isInitializedDate(begin) && this.utilService.isInitializedDate(end);\r\n        }\r\n\r\n        return valid;\r\n    }\r\n\r\n    registerScrollEvent(fn) {\r\n        this._mouseScrollHandle = fn;\r\n        document.addEventListener('scroll', this._mouseScrollHandle);\r\n    }\r\n\r\n\r\n    removeMouseEvent() {\r\n        const container = document.querySelector('.date-overlay-container');\r\n        if (container) {\r\n            container.removeEventListener('mousewheel', this._mouseWheelHandle);\r\n        }\r\n\r\n        document.removeEventListener('scroll', this._mouseScrollHandle);\r\n    }\r\n\r\n    appendSelector(elem: any): void {\r\n        let container = document.querySelector('.date-overlay-container');\r\n        if (container) {\r\n            if (container.hasChildNodes()) {\r\n                container.childNodes.forEach(el => {\r\n                    if (el !== elem) {\r\n                        container.removeChild(el);\r\n                    }\r\n                });\r\n            }\r\n        } else {\r\n            container = document.createElement('div');\r\n            container.classList.add('date-overlay-container');\r\n            container.classList.add('overlay-container');\r\n            document.body.appendChild(container);\r\n        }\r\n\r\n        container.addEventListener('mousewheel', this._mouseWheelHandle = (e: MouseEvent) => {\r\n            const target = e.target as any;\r\n            if (!target.closest('.calendar-time-picker-select')) {\r\n                e.preventDefault();\r\n            }\r\n            return;\r\n        });\r\n\r\n        container.appendChild(elem);\r\n    }\r\n\r\n    getSelectorPosition(elem: any, calendarRef: ComponentRef<any>  = null): IMySelectorPosition {\r\n        let top = 0;\r\n        let left = 0;\r\n        let _selectorHeight = 0;\r\n        let _selectorWidth = 0;\r\n        const {\r\n            selectorHeight,\r\n            selectorWidth,\r\n            showTime,\r\n            dateRange,\r\n            showType\r\n        } = this.opts;\r\n\r\n        const b: any = document.body.getBoundingClientRect();\r\n        const e: any = elem.getBoundingClientRect();\r\n        top = e.top - b.top;\r\n        left = e.left - b.left;\r\n        let position = 'bottom';\r\n        if (dateRange && showType !== 4) {\r\n            _selectorWidth = this.getSelectorDimension(selectorWidth) * 2;\r\n        } else {\r\n            _selectorWidth = this.getSelectorDimension(selectorWidth);\r\n        }\r\n\r\n        if (showTime) {\r\n            _selectorHeight = this.getSelectorDimension(selectorHeight) + 36;\r\n        } else {\r\n            _selectorHeight = this.getSelectorDimension(selectorHeight);\r\n        }\r\n        if (top + elem.offsetHeight + _selectorHeight > window.innerHeight && top - _selectorHeight - 2 > 0) {\r\n            top = top - _selectorHeight - 2 - (showTime ? 6 : 0);\r\n            position = 'top';\r\n        } else {\r\n            top = top + elem.offsetHeight + 2;\r\n        }\r\n\r\n        if (window.innerHeight - top < _selectorHeight) {\r\n            top = top - (_selectorHeight - (window.innerHeight - e.top - e.height - 15));\r\n\r\n            if (calendarRef) {\r\n                const calendarElem = calendarRef.location.nativeElement;\r\n                const arrow = calendarElem.querySelector('.arrow');\r\n                if (arrow) {\r\n                    arrow.style.display = 'none';\r\n                }\r\n            }\r\n        }\r\n\r\n        if (left + _selectorWidth > b.width) {\r\n            left = b.width - _selectorWidth - 15;\r\n        }\r\n        left = left > 0 ? left : 0;\r\n\r\n        const scrollTop = document.body.scrollTop || document.documentElement.scrollTop;\r\n        top -= scrollTop;\r\n\r\n        return { top, left, position };\r\n    }\r\n    private getSelectorDimension(value: string): number {\r\n        return Number(value.replace(PX, EMPTY_STR));\r\n    }\r\n\r\n}\r\n","import { IMyDayLabels } from './my-day-labels.interface';\r\nimport { IMyMonthLabels } from './my-month-labels.interface';\r\nimport { IMyDate } from './my-date.interface';\r\nimport { IMyDateRange } from './my-date-range.interface';\r\nimport { IMyMarkedDates } from './my-marked-dates.interface';\r\nimport { IMyMarkedDate } from './my-marked-date.interface';\r\nimport { IMyStyles } from './my-styles.interface';\r\nimport { DefaultView } from '../enums/default-view.enum';\r\nimport { Year } from '../enums/year.enum';\r\nimport { IMyShortcuts } from './my-shortcuts.interface';\r\nimport { ShowType } from '../enums/show-type.enum';\r\n\r\n\r\nexport interface IMyOptions {\r\n    dateRange?: boolean;\r\n    showTime?: boolean;\r\n    showType?: ShowType;\r\n    dayLabels?: IMyDayLabels;\r\n    monthLabels?: IMyMonthLabels;\r\n    yearTxt?: string;\r\n    dateFormat?: string;\r\n    defaultView?: DefaultView;\r\n    firstDayOfWeek?: string;\r\n    satHighlight?: boolean;\r\n    sunHighlight?: boolean;\r\n    highlightDates?: Array<IMyDate>;\r\n    markCurrentDay?: boolean;\r\n    markCurrentMonth?: boolean;\r\n    markCurrentYear?: boolean;\r\n    monthSelector?: boolean;\r\n    yearSelector?: boolean;\r\n    disableHeaderButtons?: boolean;\r\n    showWeekNumbers?: boolean;\r\n    selectorHeight?: string;\r\n    selectorWidth?: string;\r\n    disableUntil?: IMyDate;\r\n    disableSince?: IMyDate;\r\n    disableDates?: Array<IMyDate>;\r\n    disableDateRanges?: Array<IMyDateRange>;\r\n    disableWeekends?: boolean;\r\n    disableWeekdays?: Array<string>;\r\n    enableDates?: Array<IMyDate>;\r\n    markDates?: Array<IMyMarkedDates>;\r\n    markWeekends?: IMyMarkedDate;\r\n    closeSelectorOnDateSelect?: boolean;\r\n    closeSelectorOnDocumentClick?: boolean;\r\n    minYear?: Year;\r\n    maxYear?: Year;\r\n    focusInputOnDateSelect?: boolean;\r\n    moveFocusByArrowKeys?: boolean;\r\n    dateRangeDatesDelimiter?: string;\r\n    inputFieldValidation?: boolean;\r\n    stylesData?: IMyStyles;\r\n    ariaLabelPrevMonth?: string;\r\n    ariaLabelNextMonth?: string;\r\n    shortcuts?: Array<IMyShortcuts>;\r\n    timeBtnText?: string;\r\n    dateBtnText?: string;\r\n    commitBtnText?: string;\r\n    weekText?: string;\r\n    returnFormat?: string;\r\n    placeholder?: string;\r\n    timeFormat?: string;\r\n    range?: any;\r\n    monthRangeValue?: number;\r\n    message?: any;\r\n   \r\n    viewType?: ViewType | string;\r\n}\r\n\r\n\r\n\r\n /** replace: together:  replace */\r\nexport enum ViewType {\r\n    Replace = 'replace',\r\n    Together = 'together'\r\n};","import { Component, ElementRef, ViewEncapsulation, ViewChild, Renderer2, ChangeDetectorRef, HostBinding } from '@angular/core';\r\nimport {\r\n    IMyDate, IMyDateRange, IMyMonth, IMyCalendarDay, IMyCalendarMonth, IMyCalendarYear,\r\n    IMyWeek, IMyOptions, IMySelectorPosition, IMyCalendarViewChanged, IMyRangeDateSelection, IMyDateModel,\r\n    IMyMonthRow\r\n} from '../../interfaces/public-api';\r\nimport { UtilService } from '../../services/public-api';\r\nimport { DefaultView, KeyCode, MonthId, ResetDateType } from '../../enums/public-api';\r\nimport {\r\n    DOT, UNDER_LINE, D, M, Y, DATE_ROW_COUNT, DATE_COL_COUNT, MONTH_ROW_COUNT, MONTH_COL_COUNT,\r\n    YEAR_ROW_COUNT, YEAR_COL_COUNT, SU, MO, TU, WE, TH, FR, SA, EMPTY_STR, STYLE\r\n} from '../../constants/constants';\r\nimport { TimePickerPanelComponent } from '@farris/ui-time-picker';\r\nimport { flatten, cloneDeep } from 'lodash-es';\r\nimport { ViewType } from '../../interfaces/my-options.interface';\r\n@Component({\r\n    selector: 'farris-datepicker-calendar',\r\n    templateUrl: './calendar.component.html',\r\n    providers: [UtilService],\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\nexport class CalendarComponent {\r\n    @ViewChild('selectorEl') selectorEl: ElementRef;\r\n    @ViewChild('styleEl') styleEl: ElementRef;\r\n    @ViewChild('endTimeRef') endTimeRef: TimePickerPanelComponent;\r\n\r\n    @HostBinding('style.position') position = 'static';\r\n\r\n    opts: IMyOptions;\r\n    visibleMonth: IMyMonth = { monthTxt: EMPTY_STR, monthNbr: 0, year: 0, yearTxt: EMPTY_STR };\r\n    visibleMonth_range: IMyMonth = { monthTxt: EMPTY_STR, monthNbr: 0, year: 0, yearTxt: EMPTY_STR };\r\n    selectedMonth: IMyMonth = { monthNbr: 0, year: 0 };\r\n    selectedMonth_range: IMyMonth = { monthNbr: 0, year: 0 };\r\n    selectedDate: IMyDate = { year: 0, month: 0, day: 0 };\r\n    selectedDateRange: IMyDateRange = { begin: { year: 0, month: 0, day: 0 }, end: { year: 0, month: 0, day: 0 } };\r\n    selectedWeek: IMyWeek = { weekNbr: 0, year: 0 };\r\n    weekDays: Array<string> = [];\r\n    dates: Array<IMyWeek> = [];\r\n    dates_range: Array<IMyWeek> = [];\r\n    months: Array<IMyMonthRow> = [];\r\n    months_range: Array<IMyMonthRow> = [];\r\n    years: Array<Array<IMyCalendarYear>> = [];\r\n    years_range: Array<Array<IMyCalendarYear>> = [];\r\n    timeVlaue: string;\r\n    timeVlaue_range: string;\r\n\r\n    dayIdx = 0;\r\n    weekDayOpts: Array<string> = [SU, MO, TU, WE, TH, FR, SA];\r\n\r\n    selectMonth = false;\r\n    selectMonth_range = false;\r\n    selectYear = false;\r\n    selectYear_range = false;\r\n    selectTime = false;\r\n\r\n    dateChanged: (dm: IMyDateModel, close: boolean) => void;\r\n    calendarViewChanged: (cvc: IMyCalendarViewChanged) => void;\r\n    rangeDateSelection: (rds: IMyRangeDateSelection) => void;\r\n    closedByEsc: () => void;\r\n    selectorPos: IMySelectorPosition = null;\r\n    scrollDiff = 0;\r\n\r\n    prevViewDisabled = false;\r\n    nextViewDisabled = false;\r\n    prevDobViewDisabled = false;\r\n    nextDobViewDisabled = false;\r\n\r\n    prevViewDisabled_range = false;\r\n    nextViewDisabled_range = false;\r\n    prevDobViewDisabled_range = false;\r\n    nextDobViewDisabled_range = false;\r\n\r\n\r\n    getTimeStr(date: Date): string {\r\n        const hour = this.utilService.preZero(date.getHours());\r\n        const minute = this.utilService.preZero(date.getMinutes());\r\n        const second = this.utilService.preZero(date.getSeconds());\r\n        return `${hour}:${minute}:${second}`;\r\n    }\r\n    // \r\n    disabledHours = () => {\r\n        const min = this.opts.disableUntil;\r\n        const max = this.opts.disableSince;\r\n        const currentDate = this.opts.dateRange ? this.selectedDateRange.begin : this.selectedDate;\r\n        const res = this.utilService.disabledHours(min, max, currentDate);\r\n        return res;\r\n    }\r\n    // \r\n    disabledMinutes = (hour: number) => {\r\n        const min = this.opts.disableUntil;\r\n        const max = this.opts.disableSince;\r\n        const currentDate = this.opts.dateRange ? this.selectedDateRange.begin : this.selectedDate;\r\n        const res = this.utilService.disabledMinutes(min, max, hour, currentDate);\r\n        return res;\r\n    }\r\n    // \r\n    disabledSeconds = (hour: number, minute: number) => {\r\n        const min = this.opts.disableUntil;\r\n        const max = this.opts.disableSince;\r\n        const currentDate = this.opts.dateRange ? this.selectedDateRange.begin : this.selectedDate;\r\n        const res = this.utilService.disabledSeconds(min, max, hour, minute, currentDate);\r\n        return res;\r\n    }\r\n\r\n\r\n    constructor(private renderer: Renderer2, private cdr: ChangeDetectorRef, private utilService: UtilService) { }\r\n\r\n    initialize(\r\n        opts: IMyOptions,\r\n        defaultMonth: string,\r\n        selectorPos: IMySelectorPosition,\r\n        inputValue: string,\r\n        dc: (dm: IMyDateModel, close: boolean) => void,\r\n        cvc: (cvc: IMyCalendarViewChanged) => void,\r\n        rds: (rds: IMyRangeDateSelection) => void,\r\n        cbe: () => void\r\n    ): void {\r\n        this.opts = opts;\r\n        this.selectorPos = selectorPos;\r\n        this.weekDays.length = 0;\r\n        const { defaultView, dateRange, firstDayOfWeek, dayLabels, stylesData, yearTxt } = this.opts;\r\n        this.visibleMonth.yearTxt = yearTxt;\r\n        this.visibleMonth_range.yearTxt = yearTxt;\r\n        // if (stylesData.styles.length) {\r\n        //     const styleElTemp: any = this.renderer.createElement(STYLE);\r\n        //     this.renderer.appendChild(styleElTemp, this.renderer.createText(stylesData.styles));\r\n        //     this.renderer.appendChild(this.styleEl.nativeElement, styleElTemp);\r\n        // }\r\n\r\n        this.dayIdx = this.weekDayOpts.indexOf(firstDayOfWeek);\r\n        if (this.dayIdx !== -1) {\r\n            let idx: number = this.dayIdx;\r\n            // tslint:disable-next-line:prefer-for-of\r\n            for (let i = 0; i < this.weekDayOpts.length; i++) {\r\n                this.weekDays.push(dayLabels[this.weekDayOpts[idx]]);\r\n                idx = this.weekDayOpts[idx] === SA ? 0 : idx + 1;\r\n            }\r\n        }\r\n        let today: IMyDate = this.getToday();\r\n        const isInDisableRange = this.utilService.isDisabledDate(today, this.opts);\r\n        today = !isInDisableRange ? today : this.utilService.getNearDate(today, this.opts.disableUntil, this.opts.disableSince);\r\n\r\n        switch (defaultView) {\r\n            case DefaultView.Month:\r\n                this.selectedMonth = { monthNbr: 0, year: today.year };\r\n                this.selectedMonth_range = { monthNbr: 0, year: today.year + 1 };\r\n                break;\r\n            case DefaultView.Year:\r\n                this.selectedMonth = { monthNbr: 0, year: today.year };\r\n                this.selectedMonth_range = { monthNbr: 0, year: today.year + 10 };\r\n                break;\r\n            default:\r\n                this.selectedMonth = { monthNbr: today.month, year: today.year };\r\n                if (today.month >= 12) {\r\n                    this.selectedMonth_range = { monthNbr: 1, year: today.year + 1 };\r\n                } else {\r\n                    this.selectedMonth_range = { monthNbr: today.month + this.opts.monthRangeValue, year: today.year };\r\n                }\r\n                break;\r\n        }\r\n        if (defaultMonth && defaultMonth.length) {\r\n            this.selectedMonth = this.utilService.parseDefaultMonth(defaultMonth);\r\n            this.selectedMonth_range = this.utilService.parseDefaultMonth(defaultMonth);\r\n            if (this.selectedMonth_range.monthNbr >= 12) {\r\n                this.selectedMonth_range.year++;\r\n                this.selectedMonth_range.monthNbr = 1;\r\n            } else {\r\n                this.selectedMonth_range.monthNbr = this.selectedMonth_range.monthNbr + this.opts.monthRangeValue;\r\n            }\r\n        }\r\n\r\n        if (!dateRange) {\r\n            // Single date mode\r\n            const date: IMyDate = this.utilService.isDateValid(inputValue, this.opts, true);\r\n            if (this.utilService.isInitializedDate(date)) {\r\n                this.selectedDate = date;\r\n                const hour = this.utilService.preZero(date.hour);\r\n                const minute = this.utilService.preZero(date.minute);\r\n                const second = this.utilService.preZero(date.second);\r\n                this.timeVlaue = `${hour}:${minute}:${second}`;\r\n                this.selectedMonth = { monthNbr: date.month, year: date.year };\r\n            }\r\n        } else {\r\n            // Date range mode\r\n            const { begin, end } = this.utilService.isDateValidDateRange(inputValue, this.opts);\r\n            if (this.utilService.isInitializedDate(begin) && this.utilService.isInitializedDate(end)) {\r\n                this.selectedDateRange = { begin, end };\r\n                const hour = this.utilService.preZero(begin.hour);\r\n                const minute = this.utilService.preZero(begin.minute);\r\n                const second = this.utilService.preZero(begin.second);\r\n                this.timeVlaue = `${hour}:${minute}:${second}`;\r\n                const _hour = this.utilService.preZero(end.hour);\r\n                const _minute = this.utilService.preZero(end.minute);\r\n                const _second = this.utilService.preZero(end.second);\r\n                this.timeVlaue_range = `${_hour}:${_minute}:${_second}`;\r\n\r\n                this.selectedMonth = { monthNbr: begin.month, year: begin.year };\r\n\r\n                if (begin.month === end.month && begin.year === end.year) {\r\n                    if (end.month >= 12) {\r\n                        this.selectedMonth_range = { monthNbr: 1, year: end.year + 1 };\r\n                    } else {\r\n                        let endyear = end.year;\r\n                        if (defaultView === DefaultView.Month) {\r\n                            endyear = endyear + 1;\r\n                        }\r\n\r\n                        this.selectedMonth_range = { monthNbr: end.month + this.opts.monthRangeValue, year: endyear };\r\n                    }\r\n                } else {\r\n                    if (defaultView === DefaultView.Month && begin.year === end.year) {\r\n                        this.selectedMonth_range = { monthNbr: end.month, year: end.year + 1 };\r\n                    } else {\r\n                        this.selectedMonth_range = { monthNbr: end.month, year: end.year };\r\n                    }\r\n                }\r\n                const weekNbr =\r\n                    this.utilService.getWeekNumber(begin) === this.utilService.getWeekNumber(end)\r\n                        ? this.utilService.getWeekNumber(begin)\r\n                        : 0;\r\n                this.selectedWeek = { weekNbr, year: begin.year };\r\n            }\r\n        }\r\n\r\n        this.dateChanged = dc;\r\n        this.calendarViewChanged = cvc;\r\n        this.rangeDateSelection = rds;\r\n        this.closedByEsc = cbe;\r\n        this.setCalendarVisibleMonth();\r\n\r\n        if (defaultView === DefaultView.Month) {\r\n            this.onMonthViewBtnClicked();\r\n            if (dateRange) {\r\n                this.onMonthViewBtnClicked(true);\r\n            }\r\n        } else if (defaultView === DefaultView.Year) {\r\n            this.onYearViewBtnClicked();\r\n            if (dateRange) {\r\n                this.onYearViewBtnClicked(true);\r\n            }\r\n        }\r\n    }\r\n\r\n    resetDateValue(value: ResetDateType): void {\r\n        if (value === ResetDateType.singleDate || value === ResetDateType.both) {\r\n            this.selectedDate = this.utilService.resetDate();\r\n        }\r\n        if (value === ResetDateType.dateRange || value === ResetDateType.both) {\r\n            this.selectedDateRange.begin = this.utilService.resetDate();\r\n            this.selectedDateRange.end = this.utilService.resetDate();\r\n        }\r\n    }\r\n\r\n    resetMonthYearSelect(isSecondCalendar?: boolean): void {\r\n        if (!isSecondCalendar) {\r\n            this.selectMonth = false;\r\n            this.selectYear = false;\r\n        } else {\r\n            this.selectMonth_range = false;\r\n            this.selectYear_range = false;\r\n        }\r\n    }\r\n\r\n    onMonthViewBtnClicked(isSecondCalendar?: boolean): void {\r\n        this.selectTime = false;\r\n        if (!isSecondCalendar) {\r\n            this.selectMonth = !this.selectMonth;\r\n            this.selectYear = false;\r\n            if (this.selectMonth) {\r\n                this.generateMonths(isSecondCalendar);\r\n            } else {\r\n                this.visibleMonth.year = this.selectedMonth.year;\r\n            }\r\n        } else {\r\n            this.selectMonth_range = !this.selectMonth_range;\r\n            this.selectYear_range = false;\r\n            if (this.selectMonth_range) {\r\n                this.generateMonths(isSecondCalendar);\r\n            } else {\r\n                this.visibleMonth_range.year = this.selectedMonth_range.year;\r\n            }\r\n            this.cdr.detectChanges();\r\n        }\r\n    }\r\n\r\n    onMonthCellClicked(cell: IMyCalendarMonth, isSecondCalendar: boolean): void {\r\n        if (!isSecondCalendar) {\r\n            const { year, monthNbr } = this.visibleMonth;\r\n\r\n            const mc: boolean = cell.nbr !== monthNbr;\r\n            this.visibleMonth = {\r\n                monthTxt: this.opts.monthLabels[cell.nbr],\r\n                monthNbr: cell.nbr,\r\n                year,\r\n                yearTxt: this.opts.yearTxt\r\n            };\r\n            this.selectedMonth.year = this.visibleMonth.year;\r\n            if (this.opts.showType === 2) {\r\n                this.toSelectMonth(this.visibleMonth);\r\n            } else {\r\n                this.generateCalendar(cell.nbr, year, mc, isSecondCalendar);\r\n                this.selectMonth = false;\r\n            }\r\n        } else {\r\n            const { year, monthNbr } = this.visibleMonth_range;\r\n\r\n            const mc: boolean = cell.nbr !== monthNbr;\r\n            this.visibleMonth_range = {\r\n                monthTxt: this.opts.monthLabels[cell.nbr],\r\n                monthNbr: cell.nbr,\r\n                year,\r\n                yearTxt: this.opts.yearTxt\r\n            };\r\n            this.selectedMonth_range.year = this.visibleMonth_range.year;\r\n            if (this.opts.showType === 2) {\r\n                this.toSelectMonth(this.visibleMonth_range);\r\n            } else {\r\n                this.generateCalendar(cell.nbr, year, mc, isSecondCalendar);\r\n                this.selectMonth_range = false;\r\n            }\r\n        }\r\n    }\r\n\r\n    onMonthCellKeyDown(cell: IMyCalendarMonth) {\r\n        // Make possible to move focus by arrow keys\r\n        const { sourceRow, sourceCol } = this.getSourceRowAndColumnFromEvent(event);\r\n        const { moveFocus, targetRow, targetCol } = this.getTargetFocusRowAndColumn(\r\n            event,\r\n            sourceRow,\r\n            sourceCol,\r\n            MONTH_ROW_COUNT,\r\n            MONTH_COL_COUNT\r\n        );\r\n\r\n        if (moveFocus) {\r\n            this.focusCellElement(M, targetRow, targetCol);\r\n        }\r\n    }\r\n\r\n    onYearViewBtnClicked(isSecondCalendar?: boolean): void {\r\n        this.selectTime = false;\r\n        if (!isSecondCalendar) {\r\n            this.visibleMonth.year = this.selectedMonth.year;\r\n            if (!this.selectYear) {\r\n                this.generateYears(this.visibleMonth.year, isSecondCalendar);\r\n            } else {\r\n                this.generateCalendar(this.visibleMonth.monthNbr, this.visibleMonth.year, false, isSecondCalendar);\r\n            }\r\n\r\n            this.selectYear = this.opts.showType === 3 ? true : !this.selectYear;\r\n            if (this.opts.showType === 2) {\r\n                this.selectMonth = !this.selectMonth;\r\n            } else {\r\n                this.selectMonth = false;\r\n            }\r\n            // this.selectYear = !this.selectYear;\r\n            // this.selectMonth = false;\r\n        } else {\r\n            this.visibleMonth_range.year = this.selectedMonth_range.year;\r\n            if (!this.selectYear_range) {\r\n                this.generateYears(this.visibleMonth_range.year, isSecondCalendar);\r\n            } else {\r\n                this.generateCalendar(this.visibleMonth_range.monthNbr, this.visibleMonth_range.year, false, isSecondCalendar);\r\n            }\r\n            this.selectYear_range = this.opts.showType === 3 ? true : !this.selectYear_range;\r\n            if (this.opts.showType === 2) {\r\n                this.selectMonth_range = !this.selectMonth_range;\r\n            } else {\r\n                this.selectMonth_range = false;\r\n            }\r\n        }\r\n        this.cdr.detectChanges();\r\n    }\r\n\r\n    onYearCellClicked(cell: IMyCalendarYear, isSecondCalendar?: boolean): void {\r\n        if (!isSecondCalendar) {\r\n            const { year, monthNbr, monthTxt } = this.visibleMonth;\r\n\r\n            const yc: boolean = cell.year !== year;\r\n            this.visibleMonth = { monthTxt, monthNbr, year: cell.year, yearTxt: this.opts.yearTxt };\r\n            this.selectedMonth.year = this.visibleMonth.year;\r\n            if (this.opts.showType === 3) {\r\n                this.toSelectYear({ year: this.visibleMonth.year });\r\n            } else if (this.opts.showType === 2) {\r\n                this.generateMonths(isSecondCalendar);\r\n                this.selectYear = false;\r\n                this.selectMonth = true;\r\n            } else {\r\n                this.generateCalendar(monthNbr, cell.year, yc, isSecondCalendar);\r\n                this.selectYear = false;\r\n            }\r\n        } else {\r\n            const { year, monthNbr, monthTxt } = this.visibleMonth_range;\r\n\r\n            const yc: boolean = cell.year !== year;\r\n            this.visibleMonth_range = {\r\n                monthTxt,\r\n                monthNbr,\r\n                year: cell.year,\r\n                yearTxt: this.opts.yearTxt\r\n            };\r\n            this.selectedMonth_range.year = this.visibleMonth_range.year;\r\n            if (this.opts.showType === 3) {\r\n                this.toSelectYear({ year: this.visibleMonth_range.year });\r\n            } else if (this.opts.showType === 2) {\r\n                this.generateMonths(isSecondCalendar);\r\n                this.selectYear_range = false;\r\n                this.selectMonth_range = true;\r\n            } else {\r\n                this.generateCalendar(monthNbr, cell.year, yc, isSecondCalendar);\r\n                this.selectYear_range = false;\r\n            }\r\n        }\r\n    }\r\n\r\n    onYearCellKeyDown(cell: IMyCalendarYear) {\r\n        // Make possible to move focus by arrow keys\r\n        const { sourceRow, sourceCol } = this.getSourceRowAndColumnFromEvent(event);\r\n        const { moveFocus, targetRow, targetCol } = this.getTargetFocusRowAndColumn(\r\n            event,\r\n            sourceRow,\r\n            sourceCol,\r\n            YEAR_ROW_COUNT,\r\n            YEAR_COL_COUNT\r\n        );\r\n\r\n        if (moveFocus) {\r\n            this.focusCellElement(Y, targetRow, targetCol);\r\n        }\r\n    }\r\n\r\n    generateMonths(isSecondCalendar?: boolean): void {\r\n        const today: IMyDate = this.getToday();\r\n        const { disableUntil, disableSince } = this.opts;\r\n\r\n        // tslint:disable-next-line:one-variable-per-declaration\r\n        let year: number, monthNbr: number;\r\n        if (!isSecondCalendar) {\r\n            this.months.length = 0;\r\n            year = this.visibleMonth.year;\r\n            monthNbr = this.visibleMonth.monthNbr;\r\n        } else {\r\n            this.months_range.length = 0;\r\n            year = this.visibleMonth_range.year;\r\n            monthNbr = this.visibleMonth_range.monthNbr;\r\n        }\r\n\r\n        for (let i = 1; i <= 12; i += 3) {\r\n            const row: Array<IMyCalendarMonth> = [];\r\n            for (let j = i; j < i + 3; j++) {\r\n                const disabled: boolean =\r\n                    this.utilService.isMonthDisabledByDisableUntil(\r\n                        { year, month: j, day: this.daysInMonth(j, year) },\r\n                        disableUntil\r\n                    ) || this.utilService.isMonthDisabledByDisableSince({ year, month: j, day: 1 }, disableSince);\r\n\r\n                row.push({\r\n                    nbr: j,\r\n                    name: this.opts.monthLabels[j],\r\n                    currMonth: j === today.month && year === today.year,\r\n                    disabled,\r\n                    monthObj: { year, month: j }\r\n                });\r\n            }\r\n            if (!isSecondCalendar) {\r\n                this.months.push({ row, year });\r\n            } else {\r\n                this.months_range.push({ row, year });\r\n            }\r\n        }\r\n        this.setMonthViewHeaderBtnDisabledState(year, isSecondCalendar);\r\n    }\r\n\r\n    generateYears(inputYear: number, isSecondCalendar?: boolean): void {\r\n        const { minYear, maxYear, disableUntil, disableSince } = this.opts;\r\n\r\n        let y: number = inputYear - (inputYear % 10);\r\n\r\n        const { year, monthNbr } = this.visibleMonth;\r\n\r\n        if (!isSecondCalendar) {\r\n            this.years.length = 0;\r\n        } else {\r\n            if (!this.years_range.length && ((this.years&& this.years.length) && y < this.years[3][2].year && y > this.years[0][0].year)  && this.opts.showType === 3) {\r\n                y+= 10;\r\n            }\r\n            this.years_range.length = 0;\r\n            const allYears = flatten<any>(this.years_range);\r\n            if (allYears.findIndex(n => n.year == inputYear) > -1) {\r\n                y = this.years_range[3][2].year;\r\n            }\r\n        }\r\n        const today: IMyDate = this.getToday();\r\n\r\n        for (let i = y - 1; i < y + 10; i += 3) {\r\n            const row: Array<IMyCalendarYear> = [];\r\n            for (let j = i; j < i + 3; j++) {\r\n                const disabled: boolean =\r\n                    this.utilService.isMonthDisabledByDisableUntil(\r\n                        {\r\n                            year: j,\r\n                            month: monthNbr,\r\n                            day: this.daysInMonth(monthNbr, j)\r\n                        },\r\n                        disableUntil\r\n                    ) ||\r\n                    this.utilService.isMonthDisabledByDisableSince({ year: j, month: monthNbr, day: 1 }, disableSince);\r\n\r\n                const minMax: boolean = j < minYear || j > maxYear;\r\n                row.push({\r\n                    year: j,\r\n                    currYear: j === today.year,\r\n                    selected: j === year,\r\n                    disabled: disabled || minMax,\r\n                    yearObj: { year: j }\r\n                });\r\n            }\r\n            if (!isSecondCalendar) {\r\n                this.years.push(row);\r\n            } else {\r\n                this.years_range.push(row);\r\n            }\r\n        }\r\n        if (!isSecondCalendar) {\r\n            this.setYearViewHeaderBtnDisabledState(this.years[0][1].year, this.years[3][1].year, isSecondCalendar);\r\n        } else {\r\n            this.setYearViewHeaderBtnDisabledState(\r\n                this.years_range[0][1].year,\r\n                this.years_range[3][1].year,\r\n                isSecondCalendar\r\n            );\r\n        }\r\n    }\r\n\r\n    setCalendarVisibleMonth(): void {\r\n        // Sets visible month of calendar\r\n        const { year, monthNbr } = this.selectedMonth;\r\n        this.visibleMonth = {\r\n            monthTxt: this.opts.monthLabels[monthNbr],\r\n            monthNbr,\r\n            year,\r\n            yearTxt: this.opts.yearTxt\r\n        };\r\n\r\n        // Create current month\r\n        if (this.opts.dateRange) {\r\n            this.visibleMonth_range = {\r\n                monthTxt: this.opts.monthLabels[this.selectedMonth_range.monthNbr],\r\n                monthNbr: this.selectedMonth_range.monthNbr,\r\n                year: this.selectedMonth_range.year,\r\n                yearTxt: this.opts.yearTxt\r\n            };\r\n            this.generateCalendar(this.selectedMonth_range.monthNbr, this.selectedMonth_range.year, true, true);\r\n        }\r\n        this.generateCalendar(monthNbr, year, true, false);\r\n    }\r\n\r\n    onPrevNavigateBtnClicked(event?: any, isSecondCalendar?: boolean): void {\r\n        if (!isSecondCalendar) {\r\n            if (event) {\r\n                if (!this.selectMonth && !this.selectYear) {\r\n                    this.setDateViewMonth(isSecondCalendar, false);\r\n                } else if (this.selectMonth) {\r\n                    this.visibleMonth.year--;\r\n                    this.generateMonths(isSecondCalendar);\r\n                } else if (this.selectYear) {\r\n                    this.generateYears(this.years[2][2].year - 10);\r\n                }\r\n            } else {\r\n                if (!this.selectMonth && !this.selectYear) {\r\n                    this.visibleMonth.year--;\r\n                    this.setDateViewMonth(isSecondCalendar);\r\n                } else if (this.selectMonth) {\r\n                    this.visibleMonth.year--;\r\n                    this.generateMonths(isSecondCalendar);\r\n                } else if (this.selectYear) {\r\n                    this.generateYears(this.years[2][2].year - 10, isSecondCalendar);\r\n                }\r\n            }\r\n        } else {\r\n            if (event) {\r\n                if (!this.selectMonth_range && !this.selectYear_range) {\r\n                    this.setDateViewMonth(isSecondCalendar, false);\r\n                } else if (this.selectMonth_range) {\r\n                    this.visibleMonth_range.year--;\r\n                    this.generateMonths(isSecondCalendar);\r\n                } else if (this.selectYear_range) {\r\n                    this.generateYears(this.years_range[2][2].year - 10);\r\n                }\r\n            } else {\r\n                if (!this.selectMonth_range && !this.selectYear_range) {\r\n                    this.visibleMonth_range.year--;\r\n                    this.setDateViewMonth(isSecondCalendar);\r\n                } else if (this.selectMonth_range) {\r\n                    this.visibleMonth_range.year--;\r\n                    this.generateMonths(isSecondCalendar);\r\n                } else if (this.selectYear_range) {\r\n                    this.generateYears(this.years_range[2][2].year - 10, isSecondCalendar);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    onNextNavigateBtnClicked(event?: any, isSecondCalendar?: boolean): void {\r\n        if (!isSecondCalendar) {\r\n            if (event) {\r\n                if (!this.selectMonth && !this.selectYear) {\r\n                    this.setDateViewMonth(isSecondCalendar, true);\r\n                } else if (this.selectMonth) {\r\n                    this.visibleMonth.year++;\r\n                    this.generateMonths();\r\n                } else if (this.selectYear) {\r\n                    this.generateYears(this.years[2][2].year + 10);\r\n                }\r\n            } else {\r\n                if (!this.selectMonth && !this.selectYear) {\r\n                    this.visibleMonth.year++;\r\n                    this.setDateViewMonth(isSecondCalendar);\r\n                } else if (this.selectMonth) {\r\n                    this.visibleMonth.year++;\r\n                    this.generateMonths();\r\n                } else if (this.selectYear) {\r\n                    this.generateYears(this.years[2][2].year + 10);\r\n                }\r\n            }\r\n        } else {\r\n            if (event) {\r\n                if (!this.selectMonth_range && !this.selectYear_range) {\r\n                    this.setDateViewMonth(isSecondCalendar, true);\r\n                } else if (this.selectMonth_range) {\r\n                    this.visibleMonth_range.year++;\r\n                    this.generateMonths(isSecondCalendar);\r\n                } else if (this.selectYear_range) {\r\n                    this.generateYears(this.years_range[2][2].year + 10, isSecondCalendar);\r\n                }\r\n            } else {\r\n                if (!this.selectMonth_range && !this.selectYear_range) {\r\n                    this.visibleMonth_range.year++;\r\n                    this.setDateViewMonth(isSecondCalendar);\r\n                } else if (this.selectMonth_range) {\r\n                    this.visibleMonth_range.year++;\r\n                    this.generateMonths(isSecondCalendar);\r\n                } else if (this.selectYear_range) {\r\n                    this.generateYears(this.years_range[2][2].year + 10, isSecondCalendar);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    setDateViewMonth(isSecondCalendar?: boolean, isNext?: boolean): void {\r\n        let change: number;\r\n        if (isNext === undefined) {\r\n            change = 0;\r\n        } else {\r\n            change = isNext ? 1 : -1;\r\n        }\r\n        if (!isSecondCalendar) {\r\n            const { year, monthNbr } = this.visibleMonth;\r\n\r\n            const d: Date = this.getDate(year, monthNbr, 1);\r\n            d.setMonth(d.getMonth() + change);\r\n\r\n            const y: number = d.getFullYear();\r\n            const m: number = d.getMonth() + 1;\r\n\r\n            this.visibleMonth = {\r\n                monthTxt: this.opts.monthLabels[m],\r\n                monthNbr: m,\r\n                year: y,\r\n                yearTxt: this.opts.yearTxt\r\n            };\r\n            this.generateCalendar(m, y, true, isSecondCalendar);\r\n        } else {\r\n            const { year, monthNbr } = this.visibleMonth_range;\r\n\r\n            const d: Date = this.getDate(year, monthNbr, 1);\r\n            d.setMonth(d.getMonth() + change);\r\n\r\n            const y: number = d.getFullYear();\r\n            const m: number = d.getMonth() + 1;\r\n\r\n            this.visibleMonth_range = {\r\n                monthTxt: this.opts.monthLabels[m],\r\n                monthNbr: m,\r\n                year: y,\r\n                yearTxt: this.opts.yearTxt\r\n            };\r\n            this.generateCalendar(m, y, true, isSecondCalendar);\r\n        }\r\n    }\r\n\r\n    onCloseSelector(event: any): void {\r\n        const keyCode: number = this.utilService.getKeyCodeFromEvent(event);\r\n        if (keyCode === KeyCode.esc) {\r\n            this.closedByEsc();\r\n        }\r\n    }\r\n\r\n    onDayCellClicked(cell: IMyCalendarDay, isSecondCalendar?: boolean): void {\r\n        if (cell.cmo === 1) {\r\n            this.onPrevNavigateBtnClicked(true, isSecondCalendar);\r\n        } else if (cell.cmo === 3) {\r\n            this.onNextNavigateBtnClicked(true, isSecondCalendar);\r\n        }\r\n        this.selectDate(cell.dateObj);\r\n        this.resetMonthYearSelect(isSecondCalendar);\r\n    }\r\n\r\n    onDayCellKeyDown(cell: IMyCalendarDay) {\r\n        // Make possible to move focus by arrow keys\r\n        const { sourceRow, sourceCol } = this.getSourceRowAndColumnFromEvent(event);\r\n        const { moveFocus, targetRow, targetCol } = this.getTargetFocusRowAndColumn(\r\n            event,\r\n            sourceRow,\r\n            sourceCol,\r\n            DATE_ROW_COUNT,\r\n            DATE_COL_COUNT\r\n        );\r\n\r\n        if (moveFocus) {\r\n            this.focusCellElement(D, targetRow, targetCol);\r\n        }\r\n    }\r\n    onDayCellMouseEnter(cell: any, isSecondCalendar?: boolean) {\r\n        if (isSecondCalendar) {\r\n            for (const w of this.dates) {\r\n                for (const day of w.week) {\r\n                    day.range =\r\n                        (this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin, day.dateObj) &&\r\n                            this.utilService.isDateSameOrEarlier(day.dateObj, cell.dateObj)) ||\r\n                        (this.utilService.isDateSameOrEarlier(day.dateObj, this.selectedDateRange.begin) &&\r\n                            this.utilService.isDateSameOrEarlier(cell.dateObj, day.dateObj));\r\n                }\r\n            }\r\n        } else {\r\n            for (const w of this.dates_range) {\r\n                for (const day of w.week) {\r\n                    day.range =\r\n                        (this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin, day.dateObj) &&\r\n                            this.utilService.isDateSameOrEarlier(day.dateObj, cell.dateObj)) ||\r\n                        (this.utilService.isDateSameOrEarlier(day.dateObj, this.selectedDateRange.begin) &&\r\n                            this.utilService.isDateSameOrEarlier(cell.dateObj, day.dateObj));\r\n                }\r\n            }\r\n        }\r\n    }\r\n    onDayCellMouseLeave(isSecondCalendar?: boolean) {\r\n        if (isSecondCalendar) {\r\n            for (const w of this.dates) {\r\n                for (const day of w.week) {\r\n                    day.range = false;\r\n                }\r\n            }\r\n        } else {\r\n            for (const w of this.dates_range) {\r\n                for (const day of w.week) {\r\n                    day.range = false;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    onMonthCellMouseEnter(cell: any, isSecondCalendar?: boolean) {\r\n        if (isSecondCalendar) {\r\n            for (const item of this.months) {\r\n                for (const month of item.row) {\r\n                    month.range =\r\n                        (this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin, month.monthObj) &&\r\n                            this.utilService.isDateSameOrEarlier(month.monthObj, cell.monthObj)) ||\r\n                        (this.utilService.isDateSameOrEarlier(month.monthObj, this.selectedDateRange.begin) &&\r\n                            this.utilService.isDateSameOrEarlier(cell.monthObj, month.monthObj));\r\n                }\r\n            }\r\n        } else {\r\n            for (const item of this.months_range) {\r\n                for (const month of item.row) {\r\n                    month.range =\r\n                        (this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin, month.monthObj) &&\r\n                            this.utilService.isDateSameOrEarlier(month.monthObj, cell.monthObj)) ||\r\n                        (this.utilService.isDateSameOrEarlier(month.monthObj, this.selectedDateRange.begin) &&\r\n                            this.utilService.isDateSameOrEarlier(cell.monthObj, month.monthObj));\r\n                }\r\n            }\r\n        }\r\n    }\r\n    onMonthCellMouseLeave(isSecondCalendar?: boolean) {\r\n        if (isSecondCalendar) {\r\n            for (const item of this.months) {\r\n                for (const month of item.row) {\r\n                    month.range = false;\r\n                }\r\n            }\r\n        } else {\r\n            for (const item of this.months) {\r\n                for (const month of item.row) {\r\n                    month.range = false;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    onYearCellMouseEnter(cell: any, isSecondCalendar?: boolean) {\r\n        if (isSecondCalendar) {\r\n            for (const item of this.years) {\r\n                for (const year of item) {\r\n                    year.range =\r\n                        (this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin, year.yearObj) &&\r\n                            this.utilService.isDateSameOrEarlier(year.yearObj, cell.yearObj)) ||\r\n                        (this.utilService.isDateSameOrEarlier(year.yearObj, this.selectedDateRange.begin) &&\r\n                            this.utilService.isDateSameOrEarlier(cell.yearObj, year.yearObj));\r\n                }\r\n            }\r\n        } else {\r\n            for (const item of this.years_range) {\r\n                for (const year of item) {\r\n                    year.range =\r\n                        (this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin, year.yearObj) &&\r\n                            this.utilService.isDateSameOrEarlier(year.yearObj, cell.yearObj)) ||\r\n                        (this.utilService.isDateSameOrEarlier(year.yearObj, this.selectedDateRange.begin) &&\r\n                            this.utilService.isDateSameOrEarlier(cell.yearObj, year.yearObj));\r\n                }\r\n            }\r\n        }\r\n    }\r\n    onYearCellMouseLeave(isSecondCalendar?: boolean) {\r\n        if (isSecondCalendar) {\r\n            for (const item of this.years) {\r\n                for (const year of item) {\r\n                    year.range = false;\r\n                }\r\n            }\r\n        } else {\r\n            for (const item of this.years_range) {\r\n                for (const year of item) {\r\n                    year.range = false;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    onWeekClicked(weekData: IMyWeek) {\r\n        const showTime = this.opts.returnFormat && this.opts.returnFormat.toLocaleLowerCase().indexOf('hh:mm') > -1;\r\n        this.selectedWeek = { weekNbr: weekData.weekNbr, year: weekData.year };\r\n\r\n        if (showTime) {\r\n            weekData.week[0].dateObj.hour = 0;\r\n            weekData.week[0].dateObj.minute = 0;\r\n            weekData.week[0].dateObj.second = 0;\r\n\r\n            weekData.week[6].dateObj.hour = 23;\r\n            weekData.week[6].dateObj.minute = 59;\r\n            weekData.week[6].dateObj.second = 59;\r\n        }\r\n\r\n        this.selectDate(weekData.week[0].dateObj);\r\n        this.selectDate(weekData.week[6].dateObj);\r\n    }\r\n    getSourceRowAndColumnFromEvent(event: any): any {\r\n        let sourceRow = 0;\r\n        let sourceCol = 0;\r\n        if (event.target && event.target.id) {\r\n            // value of id is for example: m_0_1 (first number = row, second number = column)\r\n            const arr: Array<string> = event.target.id.split(UNDER_LINE);\r\n            sourceRow = Number(arr[1]);\r\n            sourceCol = Number(arr[2]);\r\n        }\r\n        return { sourceRow, sourceCol };\r\n    }\r\n\r\n    getTargetFocusRowAndColumn(event: any, row: number, col: number, rowCount: number, colCount: number): any {\r\n        let moveFocus = false;\r\n        let targetRow: number = row;\r\n        let targetCol: number = col;\r\n\r\n        const keyCode: number = this.utilService.getKeyCodeFromEvent(event);\r\n        if (keyCode === KeyCode.upArrow && row > 0) {\r\n            moveFocus = true;\r\n            targetRow--;\r\n        } else if (keyCode === KeyCode.downArrow && row < rowCount) {\r\n            moveFocus = true;\r\n            targetRow++;\r\n        } else if (keyCode === KeyCode.leftArrow && col > 0) {\r\n            moveFocus = true;\r\n            targetCol--;\r\n        } else if (keyCode === KeyCode.rightArrow && col < colCount) {\r\n            moveFocus = true;\r\n            targetCol++;\r\n        }\r\n        return { moveFocus, targetRow, targetCol };\r\n    }\r\n\r\n    focusCellElement(type: string, row: number, col: number): void {\r\n        const elem: any = this.selectorEl.nativeElement.querySelector(DOT + type + UNDER_LINE + row + UNDER_LINE + col);\r\n        if (elem) {\r\n            elem.focus();\r\n        }\r\n    }\r\n\r\n    selectDate(date: IMyDate): void {\r\n        const { dateFormat, monthLabels, dateRangeDatesDelimiter, closeSelectorOnDateSelect, showTime, returnFormat } = this.opts;\r\n\r\n        if (this.opts.dateRange) {\r\n            // Date range\r\n            const isBeginDateInitialized: boolean = this.utilService.isInitializedDate(this.selectedDateRange.begin);\r\n            const isEndDateInitialized: boolean = this.utilService.isInitializedDate(this.selectedDateRange.end) &&\r\n                JSON.stringify(this.selectedDateRange.begin) !== JSON.stringify(this.selectedDateRange.end);\r\n\r\n            if (isBeginDateInitialized && isEndDateInitialized) {\r\n                // both already selected - set begin date and reset end date\r\n                this.selectedDateRange.begin = date;\r\n                this.selectedDateRange.end = this.utilService.resetDate();\r\n\r\n                this.rangeDateSelection({\r\n                    isBegin: true,\r\n                    date,\r\n                    jsDate: this.utilService.getDate(date),\r\n                    dateFormat,\r\n                    formatted: this.utilService.formatDate(date, dateFormat, monthLabels),\r\n                    epoc: this.utilService.getEpocTime(date)\r\n                });\r\n            } else if (!isBeginDateInitialized) {\r\n                // begin date\r\n                this.selectedDateRange.begin = date;\r\n                if (!isEndDateInitialized) {\r\n                    this.selectedDateRange.end = date;\r\n                }\r\n                this.rangeDateSelection({\r\n                    isBegin: true,\r\n                    date,\r\n                    jsDate: this.utilService.getDate(date),\r\n                    dateFormat,\r\n                    formatted: this.utilService.formatDate(date, dateFormat, monthLabels),\r\n                    epoc: this.utilService.getEpocTime(date)\r\n                });\r\n            } else {\r\n                // second selection\r\n                const firstDateEarlier: boolean = this.utilService.isDateEarlier(date, this.selectedDateRange.begin);\r\n                if (firstDateEarlier) {\r\n                    const _date = this.selectedDateRange.begin;\r\n                    this.selectedDateRange.end = _date;\r\n                    this.rangeDateSelection({\r\n                        isBegin: false,\r\n                        date: _date,\r\n                        jsDate: this.utilService.getDate(_date),\r\n                        dateFormat,\r\n                        formatted: this.utilService.formatDate(_date, dateFormat, monthLabels),\r\n                        epoc: this.utilService.getEpocTime(_date)\r\n                    });\r\n                    this.selectedDateRange.begin = date;\r\n                    this.rangeDateSelection({\r\n                        isBegin: true,\r\n                        date,\r\n                        jsDate: this.utilService.getDate(date),\r\n                        dateFormat,\r\n                        formatted: this.utilService.formatDate(date, dateFormat, monthLabels),\r\n                        epoc: this.utilService.getEpocTime(date)\r\n                    });\r\n                } else {\r\n                    this.selectedDateRange.end = date;\r\n                    this.rangeDateSelection({\r\n                        isBegin: false,\r\n                        date,\r\n                        jsDate: this.utilService.getDate(date),\r\n                        dateFormat,\r\n                        formatted: this.utilService.formatDate(date, dateFormat, monthLabels),\r\n                        epoc: this.utilService.getEpocTime(date)\r\n                    });\r\n                }\r\n                if (!this.opts.showTime) {\r\n                    this.dateChanged(\r\n                        this.utilService.getDateModel(\r\n                            null,\r\n                            this.selectedDateRange,\r\n                            dateFormat,\r\n                            monthLabels,\r\n                            dateRangeDatesDelimiter,\r\n                            returnFormat\r\n                        ),\r\n                        closeSelectorOnDateSelect\r\n                    );\r\n                }\r\n            }\r\n        } else {\r\n            // Single date\r\n            this.selectedDate = date;\r\n\r\n            if (!this.opts.showTime) {\r\n                this.dateChanged(\r\n                    this.utilService.getDateModel(\r\n                        this.selectedDate,\r\n                        null,\r\n                        dateFormat,\r\n                        monthLabels,\r\n                        dateRangeDatesDelimiter,\r\n                        returnFormat\r\n                    ),\r\n                    showTime ? false : closeSelectorOnDateSelect\r\n                );\r\n            } else {\r\n                if (!this.timeVlaue && this.opts.viewType == ViewType.Together) {\r\n                    this.timeVlaue = this.getTimeStr(new Date);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    toSelectMonth(month: IMyMonth): void {\r\n        const { dateFormat, monthLabels, dateRangeDatesDelimiter, closeSelectorOnDateSelect, showTime, returnFormat } = this.opts;\r\n        if (this.opts.dateRange) {\r\n            // month range\r\n            const isBeginMonthInitialized: boolean = this.utilService.isInitializedMonth(this.selectedDateRange.begin);\r\n            const isEndMonthInitialized: boolean = this.utilService.isInitializedMonth(this.selectedDateRange.end);\r\n            if (isBeginMonthInitialized && isEndMonthInitialized) {\r\n                // both already selected - set begin date and reset end date\r\n                this.selectedDateRange.begin = { year: month.year, month: month.monthNbr };\r\n                this.selectedDateRange.end = this.utilService.resetDate();\r\n                this.rangeDateSelection({\r\n                    isBegin: true,\r\n                    date: this.selectedDateRange.begin,\r\n                    jsDate: this.utilService.getDate(this.selectedDateRange.begin),\r\n                    dateFormat,\r\n                    formatted: this.utilService.formatDate(this.selectedDateRange.begin, dateFormat, monthLabels),\r\n                    epoc: this.utilService.getEpocTime(this.selectedDateRange.begin)\r\n                });\r\n            } else if (!isBeginMonthInitialized) {\r\n                // begin date\r\n                this.selectedDateRange.begin = { year: month.year, month: month.monthNbr };\r\n                this.rangeDateSelection({\r\n                    isBegin: true,\r\n                    date: this.selectedDateRange.begin,\r\n                    jsDate: this.utilService.getDate(this.selectedDateRange.begin),\r\n                    dateFormat,\r\n                    formatted: this.utilService.formatDate(this.selectedDateRange.begin, dateFormat, monthLabels),\r\n                    epoc: this.utilService.getEpocTime(this.selectedDateRange.begin)\r\n                });\r\n            } else {\r\n                // second selection\r\n                const firstDateEarlier: boolean = this.utilService.isDateEarlier(\r\n                    { year: month.year, month: month.monthNbr },\r\n                    this.selectedDateRange.begin\r\n                );\r\n                if (firstDateEarlier) {\r\n                    const _date = this.selectedDateRange.begin;\r\n                    this.selectedDateRange.end = _date;\r\n                    this.rangeDateSelection({\r\n                        isBegin: false,\r\n                        date: _date,\r\n                        jsDate: this.utilService.getDate(_date),\r\n                        dateFormat,\r\n                        formatted: this.utilService.formatDate(_date, dateFormat, monthLabels),\r\n                        epoc: this.utilService.getEpocTime(_date)\r\n                    });\r\n                    this.selectedDateRange.begin = { year: month.year, month: month.monthNbr };\r\n                    this.rangeDateSelection({\r\n                        isBegin: true,\r\n                        date: this.selectedDateRange.begin,\r\n                        jsDate: this.utilService.getDate(this.selectedDateRange.begin),\r\n                        dateFormat,\r\n                        formatted: this.utilService.formatDate(this.selectedDateRange.begin, dateFormat, monthLabels),\r\n                        epoc: this.utilService.getEpocTime(this.selectedDateRange.begin)\r\n                    });\r\n                } else {\r\n                    this.selectedDateRange.end = { year: month.year, month: month.monthNbr };\r\n                    this.rangeDateSelection({\r\n                        isBegin: false,\r\n                        date: this.selectedDateRange.end,\r\n                        jsDate: this.utilService.getDate(this.selectedDateRange.end),\r\n                        dateFormat,\r\n                        formatted: this.utilService.formatDate(this.selectedDateRange.end, dateFormat, monthLabels),\r\n                        epoc: this.utilService.getEpocTime(this.selectedDateRange.end)\r\n                    });\r\n                }\r\n                if (!this.opts.showTime) {\r\n                    this.dateChanged(\r\n                        this.utilService.getDateModel(\r\n                            null,\r\n                            this.selectedDateRange,\r\n                            dateFormat,\r\n                            monthLabels,\r\n                            dateRangeDatesDelimiter,\r\n                            returnFormat\r\n                        ),\r\n                        closeSelectorOnDateSelect\r\n                    );\r\n                }\r\n            }\r\n        } else {\r\n            this.selectedMonth = month;\r\n            this.dateChanged(\r\n                this.utilService.getDateModel(\r\n                    { year: month.year, month: month.monthNbr },\r\n                    null,\r\n                    dateFormat,\r\n                    monthLabels,\r\n                    dateRangeDatesDelimiter,\r\n                    returnFormat\r\n                ),\r\n                showTime ? false : closeSelectorOnDateSelect\r\n            );\r\n        }\r\n    }\r\n    toSelectYear(year: { year: number }): void {\r\n        const { dateFormat, monthLabels, dateRangeDatesDelimiter, closeSelectorOnDateSelect, showTime, returnFormat } = this.opts;\r\n        if (this.opts.dateRange) {\r\n            // month range\r\n            const isBeginYearInitialized: boolean = this.utilService.isInitializedYear(this.selectedDateRange.begin);\r\n            const isEndYearInitialized: boolean = this.utilService.isInitializedYear(this.selectedDateRange.end);\r\n            if (isBeginYearInitialized && isEndYearInitialized) {\r\n                // both already selected - set begin date and reset end date\r\n                this.selectedDateRange.begin = year;\r\n                this.selectedDateRange.end = this.utilService.resetDate();\r\n                this.rangeDateSelection({\r\n                    isBegin: true,\r\n                    date: this.selectedDateRange.begin,\r\n                    jsDate: this.utilService.getDate(this.selectedDateRange.begin),\r\n                    dateFormat,\r\n                    formatted: this.utilService.formatDate(this.selectedDateRange.begin, dateFormat, monthLabels),\r\n                    epoc: this.utilService.getEpocTime(this.selectedDateRange.begin)\r\n                });\r\n            } else if (!isBeginYearInitialized) {\r\n                // begin date\r\n                this.selectedDateRange.begin = year;\r\n                this.rangeDateSelection({\r\n                    isBegin: true,\r\n                    date: this.selectedDateRange.begin,\r\n                    jsDate: this.utilService.getDate(this.selectedDateRange.begin),\r\n                    dateFormat,\r\n                    formatted: this.utilService.formatDate(this.selectedDateRange.begin, dateFormat, monthLabels),\r\n                    epoc: this.utilService.getEpocTime(this.selectedDateRange.begin)\r\n                });\r\n            } else {\r\n                // second selection\r\n                const firstDateEarlier: boolean = this.utilService.isDateEarlier(year, this.selectedDateRange.begin);\r\n                if (firstDateEarlier) {\r\n                    const _date = this.selectedDateRange.begin;\r\n                    this.selectedDateRange.end = _date;\r\n                    this.rangeDateSelection({\r\n                        isBegin: false,\r\n                        date: _date,\r\n                        jsDate: this.utilService.getDate(_date),\r\n                        dateFormat,\r\n                        formatted: this.utilService.formatDate(_date, dateFormat, monthLabels),\r\n                        epoc: this.utilService.getEpocTime(_date)\r\n                    });\r\n                    this.selectedDateRange.begin = year;\r\n                    this.rangeDateSelection({\r\n                        isBegin: true,\r\n                        date: this.selectedDateRange.begin,\r\n                        jsDate: this.utilService.getDate(this.selectedDateRange.begin),\r\n                        dateFormat,\r\n                        formatted: this.utilService.formatDate(this.selectedDateRange.begin, dateFormat, monthLabels),\r\n                        epoc: this.utilService.getEpocTime(this.selectedDateRange.begin)\r\n                    });\r\n                } else {\r\n                    this.selectedDateRange.end = year;\r\n                    this.rangeDateSelection({\r\n                        isBegin: false,\r\n                        date: this.selectedDateRange.end,\r\n                        jsDate: this.utilService.getDate(this.selectedDateRange.end),\r\n                        dateFormat,\r\n                        formatted: this.utilService.formatDate(this.selectedDateRange.end, dateFormat, monthLabels),\r\n                        epoc: this.utilService.getEpocTime(this.selectedDateRange.end)\r\n                    });\r\n                }\r\n                if (!this.opts.showTime) {\r\n                    this.dateChanged(\r\n                        this.utilService.getDateModel(\r\n                            null,\r\n                            this.selectedDateRange,\r\n                            dateFormat,\r\n                            monthLabels,\r\n                            dateRangeDatesDelimiter,\r\n                            returnFormat\r\n                        ),\r\n                        closeSelectorOnDateSelect\r\n                    );\r\n                }\r\n            }\r\n        } else {\r\n            this.dateChanged(\r\n                this.utilService.getDateModel(year, null, dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat),\r\n                showTime ? false : closeSelectorOnDateSelect\r\n            );\r\n        }\r\n    }\r\n    monthStartIdx(y: number, m: number): number {\r\n        // Month start index\r\n        const d: Date = new Date();\r\n        d.setDate(1);\r\n        d.setMonth(m - 1);\r\n        d.setFullYear(y);\r\n        const idx = d.getDay() + this.sundayIdx();\r\n        return idx >= 7 ? idx - 7 : idx;\r\n    }\r\n\r\n    daysInMonth(m: number, y: number): number {\r\n        // Return number of days of current month\r\n        return new Date(y, m, 0).getDate();\r\n    }\r\n\r\n    daysInPrevMonth(m: number, y: number): number {\r\n        // Return number of days of the previous month\r\n        const d: Date = this.getDate(y, m, 1);\r\n        d.setMonth(d.getMonth() - 1);\r\n        return this.daysInMonth(d.getMonth() + 1, d.getFullYear());\r\n    }\r\n\r\n    isCurrDay(d: number, m: number, y: number, cmo: number, today: IMyDate): boolean {\r\n        // Check is a given date the today\r\n        return d === today.day && m === today.month && y === today.year && cmo === MonthId.curr;\r\n    }\r\n\r\n    getWidth() {\r\n        const hasShortCuts = this.opts.shortcuts && this.opts.shortcuts.length > 0;\r\n        if (this.opts.dateRange && this.opts.showType !== 4) {\r\n            return hasShortCuts ? '660px' : '574px';\r\n        } else {\r\n            const w =  (hasShortCuts ? 380 : 287) + (this.opts.viewType === ViewType.Together ? 200 : 0);\r\n            return w + 'px';\r\n        }\r\n    }\r\n\r\n    getToday(): IMyDate {\r\n        const date: Date = new Date();\r\n        if (this.opts.showTime) {\r\n            return {\r\n                year: date.getFullYear(),\r\n                month: date.getMonth() + 1,\r\n                day: date.getDate(),\r\n                hour: date.getHours(),\r\n                minute: date.getMinutes(),\r\n                second: date.getSeconds()\r\n            };\r\n        } else {\r\n            return { year: date.getFullYear(), month: date.getMonth() + 1, day: date.getDate() };\r\n        }\r\n    }\r\n\r\n    getDayNumber(date: IMyDate): number {\r\n        // Get day number: su=0, mo=1, tu=2, we=3 ...\r\n        const d: Date = this.getDate(date.year, date.month, date.day);\r\n        return d.getDay();\r\n    }\r\n\r\n    getWeekday(date: IMyDate): string {\r\n        // Get weekday: su, mo, tu, we ...\r\n        return this.weekDayOpts[this.getDayNumber(date)];\r\n    }\r\n\r\n    getDate(year: number, month: number, day: number): Date {\r\n        // Creates a date object from given year, month and day\r\n        return new Date(year, month - 1, day, 0, 0, 0, 0);\r\n    }\r\n\r\n    sundayIdx(): number {\r\n        // Index of Sunday day\r\n        return this.dayIdx > 0 ? 7 - this.dayIdx : 0;\r\n    }\r\n\r\n    generateCalendar(m: number, y: number, notifyChange: boolean, isSecondCalendar?: boolean): void {\r\n        if (!isSecondCalendar) {\r\n            this.dates.length = 0;\r\n        } else {\r\n            this.dates_range.length = 0;\r\n        }\r\n        const today: IMyDate = this.getToday();\r\n        const monthStart: number = this.monthStartIdx(y, m);\r\n        const dInThisM: number = this.daysInMonth(m, y);\r\n        const dInPrevM: number = this.daysInPrevMonth(m, y);\r\n\r\n        let dayNbr = 1;\r\n        let cmo: number = MonthId.prev;\r\n        for (let i = 1; i < 7; i++) {\r\n            const week: Array<IMyCalendarDay> = [];\r\n            if (i === 1) {\r\n                // First week\r\n                const pm = dInPrevM - monthStart + 1;\r\n                // Previous month\r\n                for (let j = pm; j <= dInPrevM; j++) {\r\n                    const date: IMyDate = { year: m === 1 ? y - 1 : y, month: m === 1 ? 12 : m - 1, day: j };\r\n                    week.push({\r\n                        dateObj: date,\r\n                        cmo,\r\n                        currDay: this.isCurrDay(j, m, y, cmo, today),\r\n                        disabled: this.utilService.isDisabledDate(date, this.opts),\r\n                        markedDate: this.utilService.isMarkedDate(date, this.opts.markDates, this.opts.markWeekends),\r\n                        highlight: this.utilService.isHighlightedDate(\r\n                            date,\r\n                            this.opts.sunHighlight,\r\n                            this.opts.satHighlight,\r\n                            this.opts.highlightDates\r\n                        )\r\n                    });\r\n                }\r\n\r\n                cmo = MonthId.curr;\r\n                // Current month\r\n                const daysLeft: number = 7 - week.length;\r\n                for (let j = 0; j < daysLeft; j++) {\r\n                    const date: IMyDate = { year: y, month: m, day: dayNbr };\r\n                    week.push({\r\n                        dateObj: date,\r\n                        cmo,\r\n                        currDay: this.isCurrDay(dayNbr, m, y, cmo, today),\r\n                        disabled: this.utilService.isDisabledDate(date, this.opts),\r\n                        markedDate: this.utilService.isMarkedDate(date, this.opts.markDates, this.opts.markWeekends),\r\n                        highlight: this.utilService.isHighlightedDate(\r\n                            date,\r\n                            this.opts.sunHighlight,\r\n                            this.opts.satHighlight,\r\n                            this.opts.highlightDates\r\n                        )\r\n                    });\r\n                    dayNbr++;\r\n                }\r\n            } else {\r\n                // Rest of the weeks\r\n                for (let j = 1; j < 8; j++) {\r\n                    if (dayNbr > dInThisM) {\r\n                        // Next month\r\n                        dayNbr = 1;\r\n                        cmo = MonthId.next;\r\n                    }\r\n                    const date: IMyDate = {\r\n                        year: cmo === MonthId.next && m === 12 ? y + 1 : y,\r\n                        month: cmo === MonthId.curr ? m : cmo === MonthId.next && m < 12 ? m + 1 : 1,\r\n                        day: dayNbr\r\n                    };\r\n                    week.push({\r\n                        dateObj: date,\r\n                        cmo,\r\n                        currDay: this.isCurrDay(dayNbr, m, y, cmo, today),\r\n                        disabled: this.utilService.isDisabledDate(date, this.opts),\r\n                        markedDate: this.utilService.isMarkedDate(date, this.opts.markDates, this.opts.markWeekends),\r\n                        highlight: this.utilService.isHighlightedDate(\r\n                            date,\r\n                            this.opts.sunHighlight,\r\n                            this.opts.satHighlight,\r\n                            this.opts.highlightDates\r\n                        )\r\n                    });\r\n                    dayNbr++;\r\n                }\r\n            }\r\n            const weekNbr: number =\r\n                this.opts.showWeekNumbers && this.opts.firstDayOfWeek === MO\r\n                    ? this.utilService.getWeekNumber(week[0].dateObj)\r\n                    : 0;\r\n            if (!isSecondCalendar) {\r\n                this.dates.push({ week, weekNbr, year: y });\r\n            } else {\r\n                this.dates_range.push({ week, weekNbr, year: y });\r\n            }\r\n        }\r\n\r\n        this.setDateViewHeaderBtnDisabledState(m, y, isSecondCalendar);\r\n\r\n        if (notifyChange) {\r\n            // Notify parent\r\n            this.calendarViewChanged({\r\n                year: y,\r\n                month: m,\r\n                first: { number: 1, weekday: this.getWeekday({ year: y, month: m, day: 1 }) },\r\n                last: { number: dInThisM, weekday: this.getWeekday({ year: y, month: m, day: dInThisM }) }\r\n            });\r\n        }\r\n    }\r\n\r\n    setDateViewHeaderBtnDisabledState(m: number, y: number, isSecondCalendar: boolean): void {\r\n        let dpm = false;\r\n        let dnm = false;\r\n\r\n        const { disableUntil, disableSince, minYear, maxYear } = this.opts;\r\n\r\n        dpm = this.utilService.isMonthDisabledByDisableUntil(\r\n            {\r\n                year: m === 1 ? y - 1 : y,\r\n                month: m === 1 ? 12 : m - 1,\r\n                day: this.daysInMonth(m === 1 ? 12 : m - 1, m === 1 ? y - 1 : y)\r\n            },\r\n            disableUntil\r\n        );\r\n        dnm = this.utilService.isMonthDisabledByDisableSince(\r\n            { year: m === 12 ? y + 1 : y, month: m === 12 ? 1 : m + 1, day: 1 },\r\n            disableSince\r\n        );\r\n        if (!isSecondCalendar) {\r\n            this.prevViewDisabled = (m === 1 && y === minYear) || dpm;\r\n            this.nextViewDisabled = (m === 12 && y === maxYear) || dnm;\r\n            this.prevDobViewDisabled = y === minYear || dpm;\r\n            this.nextDobViewDisabled = y === maxYear || dnm;\r\n        } else {\r\n            this.prevViewDisabled_range = (m === 1 && y === minYear) || dpm;\r\n            this.nextViewDisabled_range = (m === 12 && y === maxYear) || dnm;\r\n            this.prevDobViewDisabled_range = y === minYear || dpm;\r\n            this.nextDobViewDisabled_range = y === maxYear || dnm;\r\n        }\r\n    }\r\n\r\n    setMonthViewHeaderBtnDisabledState(y: number, isSecondCalendar: boolean): void {\r\n        let dpm = false;\r\n        let dnm = false;\r\n\r\n        const { disableUntil, disableSince, minYear, maxYear } = this.opts;\r\n\r\n        dpm = this.utilService.isMonthDisabledByDisableUntil({ year: y - 1, month: 12, day: 31 }, disableUntil);\r\n        dnm = this.utilService.isMonthDisabledByDisableSince({ year: y + 1, month: 1, day: 1 }, disableSince);\r\n        if (!isSecondCalendar) {\r\n            this.prevViewDisabled = y === minYear || dpm;\r\n            this.nextViewDisabled = y === maxYear || dnm;\r\n            this.prevDobViewDisabled = y === minYear || dpm;\r\n            this.nextDobViewDisabled = y === maxYear || dnm;\r\n        } else {\r\n            this.prevViewDisabled_range = y === minYear || dpm;\r\n            this.nextViewDisabled_range = y === maxYear || dnm;\r\n            this.prevDobViewDisabled_range = y === minYear || dpm;\r\n            this.nextDobViewDisabled_range = y === maxYear || dnm;\r\n        }\r\n    }\r\n\r\n    setYearViewHeaderBtnDisabledState(yp: number, yn: number, isSecondCalendar: boolean): void {\r\n        let dpy = false;\r\n        let dny = false;\r\n\r\n        const { disableUntil, disableSince, minYear, maxYear } = this.opts;\r\n\r\n        dpy = this.utilService.isMonthDisabledByDisableUntil({ year: yp - 1, month: 12, day: 31 }, disableUntil);\r\n        dny = this.utilService.isMonthDisabledByDisableSince({ year: yn + 1, month: 1, day: 1 }, disableSince);\r\n        if (!isSecondCalendar) {\r\n            this.prevViewDisabled = yp <= minYear || dpy;\r\n            this.nextViewDisabled = yn >= maxYear || dny;\r\n            this.prevDobViewDisabled = yp <= minYear || dpy;\r\n            this.nextDobViewDisabled = yn >= maxYear || dny;\r\n        } else {\r\n            this.prevViewDisabled_range = yp <= minYear || dpy;\r\n            this.nextViewDisabled_range = yn >= maxYear || dny;\r\n            this.prevDobViewDisabled_range = yp <= minYear || dpy;\r\n            this.nextDobViewDisabled_range = yn >= maxYear || dny;\r\n        }\r\n    }\r\n    onContainerClick(event: Event) {\r\n        event.stopPropagation();\r\n    }\r\n    onClickTimeBtn(event: Event) {\r\n        event.stopPropagation();\r\n        if (this.opts.dateRange) {\r\n            const beginIsInitializedDate = this.utilService.isInitializedDate(this.selectedDateRange.begin);\r\n            const endIsInitializedDate = this.utilService.isInitializedDate(this.selectedDateRange.end);\r\n            const now = new Date();\r\n            if (!beginIsInitializedDate || !endIsInitializedDate) {\r\n                // \r\n                if (!beginIsInitializedDate) {\r\n                    this.selectedDateRange.begin = { year: now.getFullYear(), month: now.getMonth() + 1, day: now.getDate() };\r\n                }\r\n                let endYear = now.getFullYear();\r\n                let endmonth = now.getMonth() + 1;\r\n                if (endmonth >= 12) {\r\n                    endYear = endYear + 1;\r\n                    endmonth = 1;\r\n                }\r\n                // else {\r\n                //     endmonth = endmonth + this.opts.monthRangeValue;\r\n                // }\r\n                this.selectedDateRange.end = { ...this.selectedDateRange.begin };\r\n                // this.selectedDateRange.end = { year: endYear, month: endmonth, day: now.getDate() };\r\n                // selectTimedateRange\r\n                this.timeVlaue = this.getTimeStr(now);\r\n                this.timeVlaue_range = this.getTimeStr(now);\r\n            }\r\n\r\n            if (!this.timeVlaue_range) {\r\n                this.timeVlaue_range = this.getTimeStr(now);\r\n            }\r\n\r\n        } else {\r\n            if (!this.utilService.isInitializedDate(this.selectedDate)) {\r\n                const now = new Date();\r\n                // selectTime\r\n                this.timeVlaue = this.getTimeStr(now);\r\n                this.selectedDate = { year: now.getFullYear(), month: now.getMonth() + 1, day: now.getDate() };\r\n            }\r\n        }\r\n\r\n        \r\n        if (!this.timeVlaue) {\r\n            const now = new Date();\r\n            // selectTime\r\n            this.timeVlaue = this.getTimeStr(now);\r\n            if (!this.utilService.isInitializedDate(this.selectedDate)) {\r\n                this.selectedDate = { year: now.getFullYear(), month: now.getMonth() + 1, day: now.getDate() };\r\n            }\r\n        }\r\n\r\n\r\n        if (this.selectYear) {\r\n            this.selectYear = false;\r\n        }\r\n        if (this.selectMonth) {\r\n            this.selectMonth = false;\r\n        }\r\n\r\n        if (this.selectYear_range) {\r\n            this.selectYear_range = false;\r\n        }\r\n\r\n        if (this.selectMonth_range) {\r\n            this.selectMonth_range = false;\r\n        }\r\n\r\n        this.selectTime = !this.selectTime;\r\n        this.cdr.detectChanges();\r\n    }\r\n\r\n    private getTimeValue(isDateRange) {\r\n        const t = { start: null, end: null };\r\n        if (this.timeVlaue) {\r\n            const timeArr = this.timeVlaue.replace('', ':').replace('', ':').replace('', '').split(':');\r\n            if (timeArr.length >= 2) {\r\n                t.start = {\r\n                    hour: timeArr[0],\r\n                    minute: timeArr[1],\r\n                    second: timeArr[2] ? timeArr[2] : 0\r\n                };\r\n            }\r\n        } else {\r\n            const nowDate = new Date();\r\n            const hour = nowDate.getHours();\r\n            const minute = nowDate.getMinutes();\r\n            const second = nowDate.getSeconds();\r\n\r\n            if (this.opts.dateRange) {\r\n                t.start = { hour: 0, minute: 0, second: 0 };\r\n            } else {\r\n                t.start = { hour, minute, second };\r\n            }\r\n        }\r\n\r\n        if (isDateRange) {\r\n            if (this.timeVlaue_range) {\r\n                const timeArr_range = this.timeVlaue_range.replace('', ':').replace('', ':').replace('', '').split(':');\r\n                if (timeArr_range.length >= 2) {\r\n                    t.end = {\r\n                        hour: timeArr_range[0],\r\n                        minute: timeArr_range[1],\r\n                        second: timeArr_range[2] ? timeArr_range[2] : 0\r\n                    };\r\n                }\r\n            } else {\r\n                const hour = 23;\r\n                const minute = 59;\r\n                const second = 59;\r\n                t.end = { hour, minute, second };\r\n            }\r\n        }\r\n\r\n        return t;\r\n    }\r\n\r\n\r\n    onClickOkBtn(event: Event) {\r\n        event.stopPropagation();\r\n        let timeObj = null;\r\n        let timeObj_range = null;\r\n        let selectedDate = null;\r\n        let selectedDate_range = null;\r\n        if (this.opts.showTime) {\r\n            const { start, end } = this.getTimeValue(this.opts.dateRange);\r\n            timeObj = start;\r\n            timeObj_range = end;\r\n        }\r\n        const { dateFormat, monthLabels, dateRangeDatesDelimiter, closeSelectorOnDateSelect, returnFormat } = this.opts;\r\n        if (!this.opts.dateRange) {\r\n            selectedDate = { ...this.initializedDate(this.selectedDate), ...timeObj };\r\n            const isInDisableRange = this.utilService.isDisabledDate(selectedDate, this.opts);\r\n            const earlier = this.utilService.isDateSameOrEarlier(selectedDate, this.opts.disableUntil);\r\n\r\n            selectedDate = !isInDisableRange\r\n                ? selectedDate\r\n                : { ...selectedDate, ...(earlier ? this.opts.disableUntil : this.opts.disableSince) };\r\n        } else {\r\n            const begin = { ...this.initializedDate(this.selectedDateRange.begin), ...timeObj };\r\n            const end = { ...this.initializedDate(this.selectedDateRange.end, begin), ...timeObj_range };\r\n            selectedDate_range = { begin, end };\r\n        }\r\n        const dateModel: IMyDateModel = this.utilService.getDateModel(\r\n            selectedDate,\r\n            selectedDate_range,\r\n            dateFormat,\r\n            monthLabels,\r\n            dateRangeDatesDelimiter,\r\n            returnFormat\r\n        );\r\n        this.dateChanged(dateModel, closeSelectorOnDateSelect);\r\n    }\r\n\r\n    initializedDate(date: IMyDate, otherDate: IMyDate = { year: 0, month: 0, day: 0 }): IMyDate {\r\n        const daysInMonth: Array<number> = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\r\n        if (!this.utilService.isInitializedDate(date) && !this.utilService.isInitializedDate(otherDate)) {\r\n            const year = new Date().getFullYear();\r\n            const month = new Date().getMonth() + 1;\r\n            const day = new Date().getDate();\r\n            return this.utilService.isDisabledDate({ year, month, day }, this.opts) ? this.opts.disableUntil : { year, month, day };\r\n        } else if (!this.utilService.isInitializedDate(date)) {\r\n            const year = otherDate.month + 1 > 12 ? otherDate.year + 1 : otherDate.year;\r\n            let month = otherDate.month + 1 > 12 ? 1 : otherDate.month + this.opts.monthRangeValue;\r\n            if (!date.month) {\r\n                month = otherDate.month;\r\n            }\r\n            const day = otherDate.day < 1 || otherDate.day > daysInMonth[month - 1] ? 1 : otherDate.day;\r\n            return this.utilService.isDisabledDate({ year, month, day }, this.opts) ? this.opts.disableSince : { year, month, day };\r\n        }\r\n        return date;\r\n    }\r\n\r\n    setTime(date: any) {\r\n        const { dateFormat, monthLabels, dateRangeDatesDelimiter, closeSelectorOnDateSelect, returnFormat } = this.opts;\r\n        if (date instanceof Date) {\r\n            if (this.opts.showType !== 4 && !this.opts.dateRange) {\r\n                let targetDate: IMyDate;\r\n                if (this.opts.showTime) {\r\n                    targetDate = {\r\n                        year: date.getFullYear(),\r\n                        month: date.getMonth() + 1,\r\n                        day: date.getDate(),\r\n                        hour: date.getHours(),\r\n                        minute: date.getMinutes(),\r\n                        second: date.getSeconds()\r\n                    };\r\n                } else {\r\n                    targetDate = { year: date.getFullYear(), month: date.getMonth() + 1, day: date.getDate() };\r\n                }\r\n                const dateModel: IMyDateModel = this.utilService.getDateModel(\r\n                    targetDate,\r\n                    null,\r\n                    dateFormat,\r\n                    monthLabels,\r\n                    dateRangeDatesDelimiter,\r\n                    returnFormat\r\n                );\r\n                this.dateChanged(dateModel, closeSelectorOnDateSelect);\r\n            } else {\r\n                //   \r\n                const dateModel: IMyDateModel = this.utilService.getDateModel(\r\n                    null,\r\n                    this.utilService.getNowWeekTime(date),\r\n                    dateFormat,\r\n                    monthLabels,\r\n                    dateRangeDatesDelimiter,\r\n                    returnFormat\r\n                );\r\n                this.dateChanged(dateModel, closeSelectorOnDateSelect);\r\n            }\r\n        } else if (date instanceof Object && this.opts.dateRange) {\r\n            let targetDateRange: IMyDateRange;\r\n            const { begin, end } = date;\r\n            if (!begin || !end) {\r\n                return;\r\n            }\r\n            if (this.opts.showTime) {\r\n                targetDateRange = {\r\n                    begin: {\r\n                        year: begin.getFullYear(),\r\n                        month: begin.getMonth() + 1,\r\n                        day: begin.getDate(),\r\n                        hour: begin.getHours(),\r\n                        minute: begin.getMinutes(),\r\n                        second: begin.getSeconds()\r\n                    },\r\n                    end: {\r\n                        year: end.getFullYear(),\r\n                        month: end.getMonth() + 1,\r\n                        day: end.getDate(),\r\n                        hour: end.getHours(),\r\n                        minute: end.getMinutes(),\r\n                        second: end.getSeconds()\r\n                    }\r\n                };\r\n            } else {\r\n                targetDateRange = {\r\n                    begin: { year: begin.getFullYear(), month: begin.getMonth() + 1, day: begin.getDate() },\r\n                    end: { year: end.getFullYear(), month: end.getMonth() + 1, day: end.getDate() }\r\n                };\r\n            }\r\n            const dateModel: IMyDateModel = this.utilService.getDateModel(\r\n                null,\r\n                targetDateRange,\r\n                dateFormat,\r\n                monthLabels,\r\n                dateRangeDatesDelimiter,\r\n                returnFormat\r\n            );\r\n            this.dateChanged(dateModel, closeSelectorOnDateSelect);\r\n        } else {\r\n            // console.warn('');\r\n        }\r\n    }\r\n}\r\n","/*\r\n * @Author: (Lucas Huang)\r\n * @Date: 2019-08-02 14:14:22\r\n * @LastEditors: (Lucas Huang)\r\n * @LastEditTime: 2019-09-09 09:27:58\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\nimport {\r\n    Component,\r\n    EventEmitter,\r\n    Input,\r\n    OnChanges,\r\n    Output,\r\n    ViewEncapsulation,\r\n    SimpleChanges\r\n} from '@angular/core';\r\nimport {\r\n    IMyOptions,\r\n    IMyMonth,\r\n    IMyCalendarYear\r\n} from '../../interfaces/public-api';\r\nimport {\r\n    OPTS,\r\n    YEARS,\r\n    VISIBLE_MONTH,\r\n    SELECT_MONTH,\r\n    SELECT_YEAR,\r\n    PREV_VIEW_DISABLED,\r\n    NEXT_VIEW_DISABLED,\r\n    YYYY,\r\n    MM\r\n} from '../../constants/constants';\r\n\r\n@Component({\r\n    selector: 'lib-selection-bar',\r\n    templateUrl: './selection-bar.component.html',\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\nexport class SelectionBarComponent implements OnChanges {\r\n    @Input() opts: IMyOptions;\r\n    @Input() years: Array<Array<IMyCalendarYear>>;\r\n    @Input() visibleMonth: IMyMonth;\r\n    @Input() selectMonth: boolean;\r\n    @Input() selectYear: boolean;\r\n    @Input() selectToday: boolean;\r\n    @Input() prevViewDisabled: boolean;\r\n    @Input() nextViewDisabled: boolean;\r\n    @Input() prevDobViewDisabled: boolean;\r\n    @Input() nextDobViewDisabled: boolean;\r\n\r\n    @Output() prevNavigateBtnClicked: EventEmitter<boolean> = new EventEmitter<\r\n        boolean\r\n    >();\r\n    @Output() nextNavigateBtnClicked: EventEmitter<boolean> = new EventEmitter<\r\n        boolean\r\n    >();\r\n    @Output() monthViewBtnClicked: EventEmitter<void> = new EventEmitter<\r\n        void\r\n    >();\r\n    @Output() yearViewBtnClicked: EventEmitter<void> = new EventEmitter<void>();\r\n    @Output() todayViewBtnClicked: EventEmitter<void> = new EventEmitter<\r\n        void\r\n    >();\r\n    constructor() {}\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        if (changes.hasOwnProperty(OPTS)) {\r\n            this.opts = changes[OPTS].currentValue;\r\n        }\r\n        if (changes.hasOwnProperty(YEARS)) {\r\n            this.years = changes[YEARS].currentValue;\r\n        }\r\n        if (changes.hasOwnProperty(VISIBLE_MONTH)) {\r\n            this.visibleMonth = changes[VISIBLE_MONTH].currentValue;\r\n        }\r\n        if (changes.hasOwnProperty(SELECT_MONTH)) {\r\n            this.selectMonth = changes[SELECT_MONTH].currentValue;\r\n        }\r\n        if (changes.hasOwnProperty(SELECT_YEAR)) {\r\n            this.selectYear = changes[SELECT_YEAR].currentValue;\r\n        }\r\n        if (changes.hasOwnProperty(PREV_VIEW_DISABLED)) {\r\n            this.prevViewDisabled = changes[PREV_VIEW_DISABLED].currentValue;\r\n        }\r\n        if (changes.hasOwnProperty(NEXT_VIEW_DISABLED)) {\r\n            this.nextViewDisabled = changes[NEXT_VIEW_DISABLED].currentValue;\r\n        }\r\n    }\r\n\r\n    onPrevNavigateBtnClicked(event: any): void {\r\n        event.stopPropagation();\r\n        !this.prevViewDisabled && this.prevNavigateBtnClicked.emit(true);\r\n    }\r\n\r\n    onNextNavigateBtnClicked(event: any): void {\r\n        event.stopPropagation();\r\n        !this.nextViewDisabled && this.nextNavigateBtnClicked.emit(true);\r\n    }\r\n    onPrevDobNavigateBtnClicked(event: any): void {\r\n        event.stopPropagation();\r\n        !this.prevDobViewDisabled && this.prevNavigateBtnClicked.emit(false);\r\n    }\r\n\r\n    onNextDobNavigateBtnClicked(event: any): void {\r\n        event.stopPropagation();\r\n        !this.nextDobViewDisabled && this.nextNavigateBtnClicked.emit(false);\r\n    }\r\n    onMonthViewBtnClicked(event): void {\r\n        event.stopPropagation();\r\n        this.monthViewBtnClicked.emit();\r\n    }\r\n\r\n    onYearViewBtnClicked(event): void {\r\n        event.stopPropagation();\r\n        this.yearViewBtnClicked.emit();\r\n    }\r\n    onTodayViewBtnClicked(event): void {\r\n        event.stopPropagation();\r\n        this.todayViewBtnClicked.emit();\r\n    }\r\n    getFormateType(): string {\r\n        const yIndex = this.opts.dateFormat\r\n            ? this.opts.dateFormat.indexOf(YYYY)\r\n            : 0;\r\n        const mIndex = this.opts.dateFormat\r\n            ? this.opts.dateFormat.indexOf(MM)\r\n            : 0;\r\n        return yIndex > mIndex ? `${MM}-${YYYY}` : `${YYYY}-${MM}`;\r\n    }\r\n}\r\n","/*\r\n * @Author: (Lucas Huang)\r\n * @Date: 2019-09-04 07:39:58\r\n * @LastEditors: (Lucas Huang)\r\n * @LastEditTime: 2019-09-04 15:03:39\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\nimport {\r\n    Component,\r\n    EventEmitter,\r\n    Input,\r\n    OnChanges,\r\n    Output,\r\n    ViewEncapsulation,\r\n    SimpleChanges\r\n} from '@angular/core';\r\nimport { UtilService } from '../../services/public-api';\r\nimport {\r\n    IMyOptions,\r\n    IMyCalendarDay,\r\n    IMyDate,\r\n    IMyDateRange,\r\n    IMyWeek\r\n} from '../../interfaces/public-api';\r\nimport { MonthId, KeyCode } from '../../enums/public-api';\r\nimport {\r\n    OPTS,\r\n    DATES,\r\n    WEEK_DAYS,\r\n    SELECTED_DATE,\r\n    SELECTED_DATE_RANGE\r\n} from '../../constants/constants';\r\n\r\n// import { IMyWeek } from '../../interfaces/my-month-row.interface'\r\n\r\n@Component({\r\n    selector: 'lib-day-view',\r\n    templateUrl: './day-view.component.html',\r\n    providers: [UtilService],\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\nexport class DayViewComponent implements OnChanges {\r\n    @Input() opts: IMyOptions;\r\n    @Input() dates: Array<IMyWeek>;\r\n    @Input() weekDays: Array<string>;\r\n    @Input() selectedDate: IMyDate;\r\n    @Input() selectedDateRange: IMyDateRange;\r\n    @Input() selectedWeek: IMyWeek;\r\n\r\n    @Output() dayCellClicked: EventEmitter<IMyCalendarDay> = new EventEmitter<\r\n        IMyCalendarDay\r\n    >();\r\n    @Output() dayCellKeyDown: EventEmitter<IMyCalendarDay> = new EventEmitter<\r\n        IMyCalendarDay\r\n    >();\r\n    @Output() weekClicked: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n    @Output() onMouseEnter: EventEmitter<any> = new EventEmitter<any>();\r\n    @Output() onMouseLeave: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n    prevMonthId: number = MonthId.prev;\r\n    currMonthId: number = MonthId.curr;\r\n    nextMonthId: number = MonthId.next;\r\n\r\n    constructor(private utilService: UtilService) {}\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        if (changes.hasOwnProperty(OPTS)) {\r\n            this.opts = changes[OPTS].currentValue;\r\n        }\r\n        if (changes.hasOwnProperty(DATES)) {\r\n            this.dates = changes[DATES].currentValue;\r\n        }\r\n        if (changes.hasOwnProperty(WEEK_DAYS)) {\r\n            this.weekDays = changes[WEEK_DAYS].currentValue;\r\n        }\r\n        if (changes.hasOwnProperty(SELECTED_DATE)) {\r\n            this.selectedDate = changes[SELECTED_DATE].currentValue;\r\n        }\r\n        if (changes.hasOwnProperty(SELECTED_DATE_RANGE)) {\r\n            this.selectedDateRange = changes[SELECTED_DATE_RANGE].currentValue;\r\n        }\r\n    }\r\n\r\n    onDayCellClicked(event: any, cell: IMyCalendarDay): void {\r\n        if (cell.disabled || this.opts.showType === 4) {\r\n            return;\r\n        }\r\n        event.stopPropagation();\r\n        this.dayCellClicked.emit(cell);\r\n    }\r\n\r\n    onDayCellKeyDown(event: KeyboardEvent, cell: IMyCalendarDay) {\r\n        const keyCode: number = this.utilService.getKeyCodeFromEvent(event);\r\n        if (keyCode !== KeyCode.tab) {\r\n            event.preventDefault();\r\n\r\n            if (keyCode === KeyCode.enter || keyCode === KeyCode.space) {\r\n                this.onDayCellClicked(event, cell);\r\n            } else if (this.opts.moveFocusByArrowKeys) {\r\n                this.dayCellKeyDown.emit(cell);\r\n            }\r\n        }\r\n    }\r\n    onWeekClicked(event: KeyboardEvent, week: IMyWeek) {\r\n        if (this.opts.showType !== 4) { return; }\r\n        event.stopPropagation();\r\n        this.weekClicked.emit(week);\r\n    }\r\n\r\n    onDayCellMouseEnter(cell: any): void {\r\n        if (\r\n            this.utilService.isInitializedDate(this.selectedDateRange.begin) &&\r\n            (!this.utilService.isInitializedDate(this.selectedDateRange.end) ||\r\n                JSON.stringify(this.selectedDateRange.begin) === JSON.stringify(this.selectedDateRange.end))\r\n        ) {\r\n            for (const w of this.dates) {\r\n                for (const day of w.week) {\r\n                    day.range =\r\n                        (this.utilService.isDateSameOrEarlier(\r\n                            this.selectedDateRange.begin,\r\n                            day.dateObj\r\n                        ) &&\r\n                            this.utilService.isDateSameOrEarlier(\r\n                                day.dateObj,\r\n                                cell.dateObj\r\n                            )) ||\r\n                        (this.utilService.isDateSameOrEarlier(\r\n                            day.dateObj,\r\n                            this.selectedDateRange.begin\r\n                        ) &&\r\n                            this.utilService.isDateSameOrEarlier(\r\n                                cell.dateObj,\r\n                                day.dateObj\r\n                            ));\r\n                }\r\n            }\r\n            this.onMouseEnter.emit(cell);\r\n        }\r\n    }\r\n\r\n    onDayCellMouseLeave(): void {\r\n        for (const w of this.dates) {\r\n            for (const day of w.week) {\r\n                day.range = false;\r\n            }\r\n        }\r\n        this.onMouseLeave.emit();\r\n    }\r\n\r\n    isDateInRange(date: IMyDate): boolean {\r\n        return this.utilService.isDateInRange(date, this.selectedDateRange);\r\n    }\r\n\r\n    isDateSame(date: IMyDate): boolean {\r\n        return this.utilService.isDateSame(\r\n            {\r\n                year: this.selectedDate.year,\r\n                month: this.selectedDate.month,\r\n                day: this.selectedDate.day\r\n            },\r\n            date\r\n        );\r\n    }\r\n\r\n    isDateRangeBeginOrEndSame(date: IMyDate): boolean {\r\n        const selectedDateRange = {\r\n            begin: {\r\n                year: this.selectedDateRange.begin.year,\r\n                month: this.selectedDateRange.begin.month,\r\n                day: this.selectedDateRange.begin.day\r\n            },\r\n            end: {\r\n                year: this.selectedDateRange.end.year,\r\n                month: this.selectedDateRange.end.month,\r\n                day: this.selectedDateRange.end.day\r\n            }\r\n        };\r\n        return this.utilService.isDateRangeBeginOrEndSame(\r\n            selectedDateRange,\r\n            date\r\n        );\r\n    }\r\n}\r\n","/*\r\n * @Author: (Lucas Huang)\r\n * @Date: 2019-08-15 17:31:08\r\n * @LastEditors: (Lucas Huang)\r\n * @LastEditTime: 2019-09-04 15:01:15\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\nimport {\r\n    Component,\r\n    EventEmitter,\r\n    Input,\r\n    OnChanges,\r\n    Output,\r\n    SimpleChanges,\r\n    ViewEncapsulation\r\n} from '@angular/core';\r\nimport { UtilService } from '../../services/public-api';\r\nimport {\r\n    IMyCalendarMonth,\r\n    IMyOptions,\r\n    IMyDate,\r\n    IMyDateRange,\r\n    IMyMonthRow\r\n} from '../../interfaces/public-api';\r\nimport { KeyCode } from '../../enums/public-api';\r\nimport { OPTS, MONTHS } from '../../constants/constants';\r\n\r\n@Component({\r\n    selector: 'lib-month-view',\r\n    templateUrl: './month-view.component.html',\r\n    providers: [UtilService],\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\nexport class MonthViewComponent implements OnChanges {\r\n    @Input() opts: IMyOptions;\r\n    @Input() months: Array<IMyMonthRow> = [];\r\n    @Input() selectedDate: IMyDate;\r\n    @Input() selectedDateRange: IMyDateRange;\r\n    @Output() monthCellClicked: EventEmitter<IMyCalendarMonth> = new EventEmitter<IMyCalendarMonth>();\r\n    @Output() monthCellKeyDown: EventEmitter<IMyCalendarMonth> = new EventEmitter<IMyCalendarMonth>();\r\n\r\n    @Output() onMouseEnter: EventEmitter<any> = new EventEmitter<any>();\r\n    @Output() onMouseLeave: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n    constructor(private utilService: UtilService) { }\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        if (changes.hasOwnProperty(OPTS)) {\r\n            this.opts = changes[OPTS].currentValue;\r\n        }\r\n        if (changes.hasOwnProperty(MONTHS)) {\r\n            this.months = changes[MONTHS].currentValue;\r\n        }\r\n    }\r\n\r\n    onMonthCellClicked(event: any, cell: IMyCalendarMonth): void {\r\n        event.stopPropagation();\r\n\r\n        if (cell.disabled) {\r\n            return;\r\n        }\r\n\r\n        this.monthCellClicked.emit(cell);\r\n    }\r\n\r\n    onMonthCellKeyDown(event: KeyboardEvent, cell: IMyCalendarMonth) {\r\n        const keyCode: number = this.utilService.getKeyCodeFromEvent(event);\r\n        if (keyCode !== KeyCode.tab) {\r\n            event.preventDefault();\r\n\r\n            if (keyCode === KeyCode.enter || keyCode === KeyCode.space) {\r\n                this.onMonthCellClicked(event, cell);\r\n            } else if (this.opts.moveFocusByArrowKeys) {\r\n                this.monthCellKeyDown.emit(cell);\r\n            }\r\n        }\r\n    }\r\n    onMonthCellMouseEnter(cell: any): void {\r\n        if (\r\n            this.utilService.isInitializedDate(this.selectedDateRange.begin) &&\r\n            !this.utilService.isInitializedDate(this.selectedDateRange.end)\r\n        ) {\r\n            for (let i = 0; i < this.months.length; i++) {\r\n                let row = this.months[i].row;\r\n                for (let j = 0; j < row.length; j++) {\r\n                    let month = row[j];\r\n                    month.range =\r\n                        (this.utilService.isDateSameOrEarlier(\r\n                            this.selectedDateRange.begin,\r\n                            month.monthObj\r\n                        ) &&\r\n                            this.utilService.isDateSameOrEarlier(\r\n                                month.monthObj,\r\n                                cell.monthObj\r\n                            )) ||\r\n                        (this.utilService.isDateSameOrEarlier(\r\n                            month.monthObj,\r\n                            this.selectedDateRange.begin\r\n                        ) &&\r\n                            this.utilService.isDateSameOrEarlier(\r\n                                cell.monthObj,\r\n                                month.monthObj\r\n                            ));\r\n                }\r\n            }\r\n            this.onMouseEnter.emit(cell);\r\n        }\r\n    }\r\n\r\n    onMonthCellMouseLeave(): void {\r\n        for (let i = 0; i < this.months.length; i++) {\r\n            let row = this.months[i].row;\r\n            for (let j = 0; j < row.length; j++) {\r\n                let month = row[j];\r\n                month.range = false;\r\n            }\r\n        }\r\n        this.onMouseLeave.emit();\r\n    }\r\n    isMonthInRange(date: IMyDate): boolean {\r\n        return this.utilService.isDateInRange(date, this.selectedDateRange);\r\n    }\r\n    isMonthSame(date: IMyDate): boolean {\r\n        return this.utilService.isDateSame(\r\n            {\r\n                year: this.selectedDate.year,\r\n                month: this.selectedDate.month\r\n            },\r\n            date\r\n        );\r\n    }\r\n    isMonthRangeBeginOrEndSame(date: IMyDate): boolean {\r\n        return this.utilService.isDateRangeBeginOrEndSame(\r\n            this.selectedDateRange,\r\n            date\r\n        );\r\n    }\r\n}\r\n","import { Component, EventEmitter, Input, OnChanges, Output, SimpleChanges, ViewEncapsulation } from '@angular/core';\r\nimport { YEARS, OPTS } from '../../constants/constants';\r\nimport { UtilService } from '../../services/public-api';\r\nimport { IMyCalendarYear, IMyOptions, IMyDate, IMyDateRange } from '../../interfaces/public-api';\r\nimport { KeyCode } from '../../enums/public-api';\r\n@Component({\r\n    selector: 'lib-year-view',\r\n    templateUrl: './year-view.component.html',\r\n    providers: [UtilService],\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\nexport class YearViewComponent implements OnChanges {\r\n    @Input() opts: IMyOptions;\r\n    @Input() years: Array<Array<IMyCalendarYear>>;\r\n    @Input() prevViewDisabled: boolean;\r\n    @Input() nextViewDisabled: boolean;\r\n    @Input() selectedDate: IMyDate;\r\n    @Input() selectedDateRange: IMyDateRange;\r\n\r\n    @Output() yearCellClicked: EventEmitter<IMyCalendarYear> = new EventEmitter<IMyCalendarYear>();\r\n    @Output() yearCellKeyDown: EventEmitter<IMyCalendarYear> = new EventEmitter<IMyCalendarYear>();\r\n    @Output() prevCellClicked: EventEmitter<void> = new EventEmitter<void>();\r\n    @Output() nextCellClicked: EventEmitter<void> = new EventEmitter<void>();\r\n\r\n    @Output() onMouseEnter: EventEmitter<any> = new EventEmitter<any>();\r\n    @Output() onMouseLeave: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n    constructor(private utilService: UtilService) {}\r\n    ngOnInit(): void {}\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        if (changes.hasOwnProperty(OPTS)) {\r\n            this.opts = changes[OPTS].currentValue;\r\n        }\r\n        if (changes.hasOwnProperty(YEARS)) {\r\n            this.years = changes[YEARS].currentValue;\r\n        }\r\n    }\r\n\r\n    onYearCellClicked(event: any, cell: IMyCalendarYear): void {\r\n        event.stopPropagation();\r\n        if (cell.disabled) {\r\n            return;\r\n        }\r\n        this.yearCellClicked.emit(cell);\r\n    }\r\n\r\n    onYearCellKeyDown(event: KeyboardEvent, cell: IMyCalendarYear) {\r\n        const keyCode: number = this.utilService.getKeyCodeFromEvent(event);\r\n        if (keyCode !== KeyCode.tab) {\r\n            event.preventDefault();\r\n\r\n            if (keyCode === KeyCode.enter || keyCode === KeyCode.space) {\r\n                this.onYearCellClicked(event, cell);\r\n            } else if (this.opts.moveFocusByArrowKeys) {\r\n                this.yearCellKeyDown.emit(cell);\r\n            }\r\n        }\r\n    }\r\n    onPrevOrNextYearCellClicked(event: any, index: number) {\r\n        event.stopPropagation();\r\n        if (index === 0) {\r\n            if (this.prevViewDisabled) return;\r\n            this.prevCellClicked.emit(event);\r\n        } else {\r\n            if (this.nextViewDisabled) return;\r\n            this.nextCellClicked.emit(event);\r\n        }\r\n    }\r\n    onMonthCellMouseEnter(cell: any): void {\r\n        if (\r\n            this.utilService.isInitializedDate(this.selectedDateRange.begin) &&\r\n            !this.utilService.isInitializedDate(this.selectedDateRange.end)\r\n        ) {\r\n            for (let i = 0; i < this.years.length; i++) {\r\n                let row = this.years[i];\r\n                for (let j = 0; j < row.length; j++) {\r\n                    let year = row[j];\r\n                    year.range =\r\n                        (this.utilService.isDateSameOrEarlier(\r\n                            this.selectedDateRange.begin,\r\n                            year.yearObj\r\n                        ) &&\r\n                            this.utilService.isDateSameOrEarlier(\r\n                                year.yearObj,\r\n                                cell.yearObj\r\n                            )) ||\r\n                        (this.utilService.isDateSameOrEarlier(\r\n                            year.yearObj,\r\n                            this.selectedDateRange.begin\r\n                        ) &&\r\n                            this.utilService.isDateSameOrEarlier(\r\n                                cell.yearObj,\r\n                                year.yearObj\r\n                            ));\r\n                }\r\n            }\r\n            this.onMouseEnter.emit(cell);\r\n        }\r\n    }\r\n\r\n    onMonthCellMouseLeave(): void {\r\n        for (let i = 0; i < this.years.length; i++) {\r\n            let row = this.years[i];\r\n            for (let j = 0; j < row.length; j++) {\r\n                let year = row[j];\r\n                year.range = false;\r\n            }\r\n        }\r\n        this.onMouseLeave.emit();\r\n    }\r\n    isMonthInRange(year: IMyDate): boolean {\r\n        return this.utilService.isDateInRange(year, this.selectedDateRange);\r\n    }\r\n    isMonthSame(year: IMyDate): boolean {\r\n        return this.utilService.isDateSame(\r\n            {\r\n                year: this.selectedDate.year\r\n            },\r\n            year\r\n        );\r\n    }\r\n    isMonthRangeBeginOrEndSame(year: IMyDate): boolean {\r\n        return this.utilService.isDateSame(\r\n            { year: this.selectedDateRange.begin.year }, year\r\n        ) || this.utilService.isDateSame(\r\n            { year: this.selectedDateRange.end.year }, year\r\n        );\r\n    }\r\n}\r\n","import {\r\n    Directive,\r\n    Input,\r\n    ComponentRef,\r\n    ElementRef,\r\n    ViewContainerRef,\r\n    Renderer2,\r\n    ChangeDetectorRef,\r\n    ComponentFactoryResolver,\r\n    forwardRef,\r\n    EventEmitter,\r\n    Output,\r\n    SimpleChanges,\r\n    OnChanges,\r\n    HostListener,\r\n    OnDestroy,\r\n    NgZone\r\n} from '@angular/core';\r\nimport {\r\n    AbstractControl,\r\n    ControlValueAccessor,\r\n    NG_VALIDATORS,\r\n    NG_VALUE_ACCESSOR,\r\n    Validator\r\n} from '@angular/forms';\r\nimport { CalendarComponent } from './components/calendar/calendar.component';\r\n\r\nimport {\r\n    IMyOptions,\r\n    IMyDate,\r\n    IMyDateModel,\r\n    IMyDateRange,\r\n    IMyRangeDateSelection,\r\n    IMyCalendarViewChanged,\r\n    IMyInputFieldChanged,\r\n    IMySelectorPosition\r\n} from './interfaces/public-api';\r\n\r\nimport {\r\n    UtilService,\r\n    DatepickerLocaleService,\r\n    DefaultConfigService\r\n} from './services/public-api';\r\n\r\nimport { KeyCode, CalToggle, Year, ResetDateType } from './enums/public-api';\r\n\r\nimport {\r\n    KEYUP,\r\n    BLUR,\r\n    EMPTY_STR,\r\n    DISABLED,\r\n    CLICK,\r\n    BODY,\r\n    VALUE,\r\n    OPTIONS,\r\n    DEFAULT_MONTH,\r\n    LOCALE,\r\n    OBJECT,\r\n    PX\r\n} from './constants/constants';\r\n\r\nconst NGX_DP_VALUE_ACCESSOR = {\r\n    provide: NG_VALUE_ACCESSOR,\r\n    useExisting: forwardRef(() => FarrisDatePickerDirective),\r\n    multi: true\r\n};\r\n\r\nconst NGX_DP_VALIDATORS = {\r\n    provide: NG_VALIDATORS,\r\n    useExisting: forwardRef(() => FarrisDatePickerDirective),\r\n    multi: true\r\n};\r\n\r\n@Directive({\r\n    selector: '[farris-datepicker]',\r\n    exportAs: 'farris-datepicker',\r\n    providers: [\r\n        UtilService,\r\n        DatepickerLocaleService,\r\n        DefaultConfigService,\r\n        NGX_DP_VALUE_ACCESSOR,\r\n        NGX_DP_VALIDATORS\r\n    ]\r\n})\r\nexport class FarrisDatePickerDirective\r\n    implements OnChanges, OnDestroy, ControlValueAccessor, Validator {\r\n    @Input() options: IMyOptions;\r\n    @Input() locale: string;\r\n    @Input() defaultMonth: string;\r\n\r\n    @Output() dateChanged: EventEmitter<IMyDateModel> = new EventEmitter<\r\n        IMyDateModel\r\n    >();\r\n    @Output() inputFieldChanged: EventEmitter<\r\n        IMyInputFieldChanged\r\n    > = new EventEmitter<IMyInputFieldChanged>();\r\n    @Output() calendarViewChanged: EventEmitter<\r\n        IMyCalendarViewChanged\r\n    > = new EventEmitter<IMyCalendarViewChanged>();\r\n    @Output() calendarToggle: EventEmitter<number> = new EventEmitter<number>();\r\n    @Output() rangeDateSelection: EventEmitter<\r\n        IMyRangeDateSelection\r\n    > = new EventEmitter<IMyRangeDateSelection>();\r\n\r\n    private cRef: ComponentRef<CalendarComponent> = null;\r\n    private inputText = '';\r\n    private preventClose = false;\r\n    private disabled = false;\r\n\r\n    private opts: IMyOptions;\r\n\r\n    // scrollFn: any = (e) => {\r\n    //     console.log((e.target as any).scrollTop);\r\n    // };\r\n\r\n    onChangeCb: (_: any) => void = () => {};\r\n    onTouchedCb: () => void = () => {};\r\n\r\n    constructor(\r\n        public localeService: DatepickerLocaleService,\r\n        private utilService: UtilService,\r\n        private vcRef: ViewContainerRef,\r\n        private cfr: ComponentFactoryResolver,\r\n        private renderer: Renderer2,\r\n        private cdr: ChangeDetectorRef,\r\n        private elem: ElementRef,\r\n        private config: DefaultConfigService,\r\n        private zone: NgZone\r\n    ) {\r\n        this.opts = this.config.getDefaultConfig();\r\n        this.parseOptions(this.opts);\r\n    }\r\n\r\n    @HostListener(KEYUP, ['$event']) onKeyUp(event: KeyboardEvent) {\r\n        const keyCode: number = this.utilService.getKeyCodeFromEvent(event);\r\n        if (this.ignoreKeyPress(keyCode)) {\r\n            return;\r\n        } else if (keyCode === KeyCode.esc) {\r\n            this.closeSelector(CalToggle.CloseByEsc);\r\n        } else {\r\n            const { value } = this.elem.nativeElement;\r\n\r\n            let valid = false;\r\n            if (!this.opts.dateRange) {\r\n                const date: IMyDate = this.utilService.isDateValid(\r\n                    value,\r\n                    this.opts\r\n                );\r\n                valid = this.utilService.isInitializedDate(date);\r\n            } else {\r\n                const { begin, end } = this.utilService.isDateValidDateRange(\r\n                    value,\r\n                    this.opts\r\n                );\r\n                valid =\r\n                    this.utilService.isInitializedDate(begin) &&\r\n                    this.utilService.isInitializedDate(end);\r\n            }\r\n            this.emitInputFieldChanged(value, valid);\r\n        }\r\n    }\r\n\r\n    @HostListener(BLUR) onBlur() {\r\n        const {\r\n            inputFieldValidation,\r\n            dateRange\r\n        } = this.opts;\r\n\r\n        if (inputFieldValidation) {\r\n            const { value } = this.elem.nativeElement;\r\n            let valid = false;\r\n            if (!dateRange) {\r\n                const date: IMyDate = this.utilService.isDateValid(\r\n                    value,\r\n                    this.opts\r\n                );\r\n\r\n                valid = this.utilService.isInitializedDate(date);\r\n            } else {\r\n                const _dateRange: IMyDateRange = this.utilService.isDateValidDateRange(\r\n                    value,\r\n                    this.opts\r\n                );\r\n                const { begin, end } = _dateRange;\r\n                valid =\r\n                    this.utilService.isInitializedDate(begin) &&\r\n                    this.utilService.isInitializedDate(end);\r\n            }\r\n\r\n            if (!valid && this.inputText !== value) {\r\n                this.clearDate();\r\n            }\r\n            this.onChangeCb(value);\r\n        }\r\n        this.onTouchedCb();\r\n    }\r\n\r\n    // wrapper with arrow function to preserve the use of 'this' word\r\n    private onClickWrapper = (ev: MouseEvent) => {\r\n        this.onClick(ev);\r\n    }\r\n\r\n    onClick(evt: MouseEvent) {\r\n        if (\r\n            this.opts.closeSelectorOnDocumentClick &&\r\n            !this.preventClose &&\r\n            evt.target &&\r\n            this.cRef !== null &&\r\n            this.elem.nativeElement !== evt.target &&\r\n            !this.cRef.location.nativeElement.contains(evt.target) &&\r\n            !this.disabled\r\n        ) {\r\n            this.closeSelector(CalToggle.CloseByOutClick);\r\n        }\r\n    }\r\n    public ngOnChanges(changes: SimpleChanges): void {\r\n        if (changes.hasOwnProperty(LOCALE)) {\r\n            this.setLocaleOptions();\r\n        }\r\n\r\n        if (changes.hasOwnProperty(DEFAULT_MONTH)) {\r\n            let dm: any = changes[DEFAULT_MONTH].currentValue;\r\n            if (typeof dm === OBJECT) {\r\n                dm = dm.defMonth;\r\n            }\r\n            this.defaultMonth = dm;\r\n        }\r\n\r\n        if (changes.hasOwnProperty(OPTIONS)) {\r\n            this.parseOptions(changes[OPTIONS].currentValue);\r\n        }\r\n    }\r\n\r\n    public ngOnDestroy(): void {\r\n        this.closeCalendar();\r\n    }\r\n\r\n    setLocaleOptions(): void {\r\n        const opts: IMyOptions = this.localeService.getLocaleOptions(\r\n            this.locale\r\n        );\r\n        Object.keys(opts).forEach(k => {\r\n            (this.opts as IMyOptions)[k] = opts[k];\r\n        });\r\n    }\r\n\r\n    public parseOptions(opts: IMyOptions): void {\r\n        if (opts !== undefined) {\r\n            Object.keys(opts).forEach(k => {\r\n                if (opts[k] !== undefined && opts[k] !== '') {\r\n                    (this.opts as IMyOptions)[k] = opts[k];\r\n                }\r\n            });\r\n        }\r\n        if (this.opts.minYear < Year.min) {\r\n            this.opts.minYear = Year.min;\r\n        }\r\n        if (this.opts.maxYear > Year.max) {\r\n            this.opts.maxYear = Year.max;\r\n        }\r\n    }\r\n    formatDate(value: any) {\r\n        const {\r\n            dateRange,\r\n            dateFormat,\r\n            monthLabels,\r\n            dateRangeDatesDelimiter,\r\n            returnFormat\r\n        } = this.opts;\r\n        if (!dateRange) {\r\n            // Single date mode\r\n            const date: IMyDate = this.utilService.isDateValid(\r\n                value,\r\n                this.opts\r\n            );\r\n            return this.utilService.getDateModel(\r\n                date,\r\n                null,\r\n                dateFormat,\r\n                monthLabels,\r\n                dateRangeDatesDelimiter,\r\n                returnFormat\r\n            );\r\n        } else {\r\n            // Date range mode\r\n            const _dateRange = this.utilService.isDateValidDateRange(\r\n                value,\r\n                this.opts\r\n            );\r\n            return this.utilService.getDateModel(\r\n                null,\r\n                _dateRange,\r\n                dateFormat,\r\n                monthLabels,\r\n                dateRangeDatesDelimiter,\r\n                returnFormat\r\n            );\r\n        }\r\n    }\r\n    public writeValue(value: any): void {\r\n        if (this.disabled) {\r\n            return;\r\n        }\r\n        if (value) {\r\n            value = this.formatDate(value);\r\n        }\r\n\r\n        if (!value) {\r\n            this.setInputValue(EMPTY_STR);\r\n            this.emitInputFieldChanged(EMPTY_STR, false);\r\n\r\n            if (this.cRef !== null) {\r\n                this.cRef.instance.resetDateValue(ResetDateType.both);\r\n            }\r\n        } else if (value.isRange === false && value.singleDate) {\r\n            // single date\r\n            const { date, formatted } = value.singleDate;\r\n            const valid: boolean = this.utilService.isInitializedDate(date);\r\n            if (valid) {\r\n                this.setInputValue(formatted);\r\n                this.emitInputFieldChanged(formatted, valid);\r\n\r\n                if (this.cRef !== null) {\r\n                    this.cRef.instance.resetDateValue(ResetDateType.dateRange);\r\n                }\r\n            }\r\n        } else if (value.isRange === true && value.dateRange) {\r\n            // date range\r\n            const { beginDate, endDate, formatted } = value.dateRange;\r\n\r\n            if (beginDate && endDate) {\r\n                const valid: boolean =\r\n                    this.utilService.isInitializedDate(beginDate) &&\r\n                    this.utilService.isInitializedDate(endDate);\r\n                if (valid) {\r\n                    this.setInputValue(formatted);\r\n                    this.emitInputFieldChanged(formatted, valid);\r\n\r\n                    if (this.cRef !== null) {\r\n                        this.cRef.instance.resetDateValue(\r\n                            ResetDateType.singleDate\r\n                        );\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    public registerOnChange(fn: any): void {\r\n        this.onChangeCb = fn;\r\n    }\r\n\r\n    public registerOnTouched(fn: any): void {\r\n        this.onTouchedCb = fn;\r\n    }\r\n\r\n    public setDisabledState(isDisabled: boolean): void {\r\n        this.disabled = isDisabled;\r\n        this.renderer.setProperty(\r\n            this.elem.nativeElement,\r\n            DISABLED,\r\n            isDisabled\r\n        );\r\n\r\n        if (isDisabled) {\r\n            this.closeCalendar();\r\n        }\r\n    }\r\n\r\n    public validate(c: AbstractControl): { [p: string]: any } {\r\n        return null;\r\n    }\r\n\r\n    public openCalendar(): void {\r\n        if (this.disabled) {\r\n            return;\r\n        }\r\n        this.preventClose = true;\r\n        this.cdr.detectChanges();\r\n        if (this.cRef === null) {\r\n            this.cRef = this.vcRef.createComponent(\r\n                this.cfr.resolveComponentFactory(CalendarComponent)\r\n            );\r\n            this.appendSelector(this.cRef.location.nativeElement);\r\n            this.cRef.instance.initialize(\r\n                this.opts,\r\n                this.defaultMonth,\r\n                this.getSelectorPosition(this.elem.nativeElement),\r\n                this.elem.nativeElement.value,\r\n                (dm: IMyDateModel, close: boolean) => {\r\n                    this.focusToInput();\r\n                    this.updateModel(dm);\r\n                    if (close) {\r\n                        this.closeSelector(CalToggle.CloseByDateSel);\r\n                    }\r\n                    this.emitDateChanged(dm);\r\n                    this.emitInputFieldChanged(\r\n                        this.utilService.getFormattedDate(dm),\r\n                        true\r\n                    );\r\n                },\r\n                (cvc: IMyCalendarViewChanged) => {\r\n                    this.emitCalendarChanged(cvc);\r\n                },\r\n                (rds: IMyRangeDateSelection) => {\r\n                    this.emitRangeDateSelection(rds);\r\n                },\r\n                () => {\r\n                    this.closeSelector(CalToggle.CloseByEsc);\r\n                }\r\n            );\r\n            this.emitCalendarToggle(CalToggle.Open);\r\n            this.cdr.detectChanges();\r\n        } else {\r\n            this.appendSelector(this.cRef.location.nativeElement);\r\n        }\r\n        this.preventClose = false;\r\n    }\r\n\r\n    public closeCalendar(): void {\r\n        this.closeSelector(CalToggle.CloseByCalBtn);\r\n    }\r\n\r\n    public toggleCalendar(event: MouseEvent): void {\r\n        event.stopPropagation();\r\n        if (this.disabled) {\r\n            return;\r\n        }\r\n        if (this.cRef === null) {\r\n            document.addEventListener(CLICK, this.onClickWrapper, true);\r\n            this.openCalendar();\r\n            const container = document.querySelector('.date-overlay-container');\r\n            this.renderer.setStyle(container, 'pointer-events', 'auto');\r\n        } else {\r\n            let flag = true;\r\n            const container = document.querySelector('.date-overlay-container');\r\n            if (container && this.cRef.location) {\r\n                if (container.hasChildNodes()) {\r\n                    container.childNodes.forEach(el => {\r\n                        if (el === this.cRef.location.nativeElement) {\r\n                            flag = false;\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            if (flag) {\r\n                this.renderer.setStyle(container, 'pointer-events', 'auto');\r\n                this.openCalendar();\r\n            } else {\r\n                document.removeEventListener(CLICK, this.onClickWrapper);\r\n                this.closeSelector(CalToggle.CloseByCalBtn);\r\n                this.renderer.setStyle(container, 'pointer-events', '');\r\n            }\r\n        }\r\n    }\r\n\r\n    public clearDate(): void {\r\n        if (this.disabled) {\r\n            return;\r\n        }\r\n        this.setInputValue(EMPTY_STR);\r\n        this.emitDateChanged({\r\n            isRange: this.opts.dateRange,\r\n            singleDate: {\r\n                date: this.utilService.resetDate(),\r\n                jsDate: null,\r\n                formatted: EMPTY_STR,\r\n                epoc: 0\r\n            },\r\n            dateRange: {\r\n                beginDate: this.utilService.resetDate(),\r\n                beginJsDate: null,\r\n                beginEpoc: 0,\r\n                endDate: this.utilService.resetDate(),\r\n                endJsDate: null,\r\n                endEpoc: 0,\r\n                formatted: EMPTY_STR\r\n            }\r\n        });\r\n        this.onChangeCb(null);\r\n        this.onTouchedCb();\r\n        this.closeSelector(CalToggle.CloseByCalBtn);\r\n    }\r\n\r\n    public isDateValid(): boolean {\r\n        const { value } = this.elem.nativeElement;\r\n\r\n        if (value !== EMPTY_STR) {\r\n            const date: IMyDate = this.utilService.isDateValid(\r\n                value,\r\n                this.opts\r\n            );\r\n            if (this.utilService.isInitializedDate(date)) {\r\n                this.emitInputFieldChanged(value, true);\r\n                return true;\r\n            }\r\n        }\r\n        this.emitInputFieldChanged(value, false);\r\n        return false;\r\n    }\r\n\r\n    private ignoreKeyPress(keyCode: number): boolean {\r\n        // keyCode === KeyCode.tab ||\r\n\r\n        return (\r\n            keyCode === KeyCode.leftArrow ||\r\n            keyCode === KeyCode.rightArrow ||\r\n            keyCode === KeyCode.upArrow ||\r\n            keyCode === KeyCode.downArrow ||\r\n            keyCode === KeyCode.shift\r\n        );\r\n    }\r\n\r\n    private closeSelector(reason: number): void {\r\n        if (this.cRef !== null) {\r\n            this.vcRef.remove(this.vcRef.indexOf(this.cRef.hostView));\r\n            this.cRef = null;\r\n            this.cdr.detectChanges();\r\n            this.emitCalendarToggle(reason);\r\n            const container = document.querySelector('.date-overlay-container');\r\n            this.renderer.setStyle(container, 'pointer-events', '');\r\n        }\r\n    }\r\n\r\n    private updateModel(model: IMyDateModel): void {\r\n        this.setInputValue(this.utilService.getFormattedDate(model));\r\n        this.onChangeCb(this.utilService.getFormattedDate(model));\r\n        this.onTouchedCb();\r\n    }\r\n\r\n    private setInputValue(value: string): void {\r\n        this.inputText = value;\r\n        this.renderer.setProperty(this.elem.nativeElement, VALUE, value);\r\n    }\r\n\r\n    private focusToInput(): void {\r\n        if (this.opts.focusInputOnDateSelect) {\r\n            this.elem.nativeElement.focus();\r\n        }\r\n    }\r\n\r\n    private emitDateChanged(dateModel: IMyDateModel): void {\r\n        this.dateChanged.emit(dateModel);\r\n    }\r\n\r\n    private emitInputFieldChanged(value: string, valid: boolean): void {\r\n        this.inputFieldChanged.emit({\r\n            value,\r\n            dateFormat: this.opts.dateFormat,\r\n            valid\r\n        });\r\n    }\r\n\r\n    private emitCalendarChanged(cvc: IMyCalendarViewChanged) {\r\n        this.calendarViewChanged.emit(cvc);\r\n    }\r\n\r\n    private emitRangeDateSelection(rds: IMyRangeDateSelection) {\r\n        this.rangeDateSelection.emit(rds);\r\n    }\r\n\r\n    private emitCalendarToggle(reason: number): void {\r\n        this.calendarToggle.emit(reason);\r\n    }\r\n\r\n    private jsDateToMyDate(date: Date): IMyDate {\r\n        return {\r\n            year: date.getFullYear(),\r\n            month: date.getMonth() + 1,\r\n            day: date.getDate()\r\n        };\r\n    }\r\n\r\n    private appendSelector(elem: any): void {\r\n        let container = document.querySelector('.date-overlay-container');\r\n        if (container) {\r\n            if (container.hasChildNodes()) {\r\n                container.childNodes.forEach(el => {\r\n                    if (el !== elem) {\r\n                        container.removeChild(el);\r\n                    }\r\n                });\r\n            }\r\n        } else {\r\n            container = document.createElement('div');\r\n            container.classList.add('date-overlay-container');\r\n            container.classList.add('overlay-container');\r\n            document.body.appendChild(container);\r\n        }\r\n        container.appendChild(elem);\r\n    }\r\n\r\n    private getSelectorPosition(elem: any): IMySelectorPosition {\r\n        let top = 0;\r\n        let left = 0;\r\n        let _selectorHeight = 0;\r\n        let _selectorWidth = 0;\r\n        const {\r\n            selectorHeight,\r\n            selectorWidth,\r\n            showTime,\r\n            dateRange\r\n        } = this.opts;\r\n\r\n        const b: any = document.body.getBoundingClientRect();\r\n        const e: any = elem.getBoundingClientRect();\r\n        top = e.top - b.top;\r\n        left = e.left - b.left;\r\n        let position = 'bottom';\r\n        if (dateRange) {\r\n            _selectorWidth = this.getSelectorDimension(selectorWidth) * 2;\r\n        } else {\r\n            _selectorWidth = this.getSelectorDimension(selectorWidth);\r\n        }\r\n\r\n        if (showTime) {\r\n            _selectorHeight = this.getSelectorDimension(selectorHeight) + 36;\r\n        } else {\r\n            _selectorHeight = this.getSelectorDimension(selectorHeight);\r\n        }\r\n        if (top + elem.offsetHeight + _selectorHeight > window.innerHeight && top - _selectorHeight - 2 > 0) {\r\n            top = top - _selectorHeight - 2;\r\n            position = 'top';\r\n        } else {\r\n            top = top + elem.offsetHeight + 2;\r\n        }\r\n\r\n        if (left + _selectorWidth > b.width) {\r\n            left = b.width - _selectorWidth - 15;\r\n        }\r\n        left = left > 0 ? left : 0;\r\n        return { top , left, position };\r\n    }\r\n\r\n    private getSelectorDimension(value: string): number {\r\n        return Number(value.replace(PX, EMPTY_STR));\r\n    }\r\n}\r\n","import { NotifyService } from '@farris/ui-notify';\r\nimport { DateTimeHelperService } from '@farris/ui-common/date';\r\nimport {\r\n    Component, OnInit, Input, EventEmitter, Output, ViewChild, forwardRef, SimpleChanges,\r\n    ElementRef, HostListener, OnChanges, HostBinding, Injector, ComponentRef, ViewContainerRef, ComponentFactoryResolver,\r\n    Renderer2, OnDestroy, AfterViewInit, ApplicationRef, ChangeDetectorRef\r\n} from '@angular/core';\r\nimport { NG_VALUE_ACCESSOR, ControlValueAccessor, NgControl } from '@angular/forms';\r\nimport { FarrisDatePickerDirective } from './farris-datepicker.input';\r\nimport {\r\n    IMyOptions, IMyDate, IMyDateModel, IMyShortcuts, IMyDateFormat,\r\n    IMyCalendarViewChanged, IMyRangeDateSelection\r\n} from './interfaces/public-api';\r\n\r\nimport { DefaultView, ShowType, CalToggle } from './enums/public-api';\r\n\r\nimport { UtilService, DefaultConfigService, DatepickerLocaleService, DatePickerService } from './services/public-api';\r\nimport { LocaleService } from '@farris/ui-locale';\r\nimport { isValid, parse } from 'date-fns';\r\nimport { CalendarComponent } from './components/calendar/calendar.component';\r\nimport { CLICK, EMPTY_STR } from './constants/constants';\r\nimport { OverLayHiddenService } from '@farris/ui-common';\r\nimport { ViewType } from './interfaces/my-options.interface';\r\n\r\nconst FARRIS_DP_VALUE_ACCESSOR = {\r\n    provide: NG_VALUE_ACCESSOR,\r\n    useExisting: forwardRef(() => FarrisDatepickerComponent),\r\n    multi: true\r\n};\r\n\r\n@Component({\r\n    selector: 'farris-datepicker',\r\n    exportAs: 'farris-datepicker',\r\n    templateUrl: './farris-datepicker.component.html',\r\n    styles: [\r\n        `\r\n            :host {\r\n                display: block;\r\n            }\r\n\r\n            :host .datepicker-clear {\r\n                position: absolute;\r\n                height: 100%;\r\n                right: 0;\r\n                top: 0;\r\n                z-index: 100;\r\n            }\r\n        `\r\n    ],\r\n    providers: [FARRIS_DP_VALUE_ACCESSOR, UtilService, DefaultConfigService, LocaleService]\r\n})\r\nexport class FarrisDatepickerComponent implements OnInit, ControlValueAccessor, OnChanges, OnDestroy, AfterViewInit {\r\n\r\n    @HostBinding('class') cls = 'f-cmp-datepicker f-cmp-inputgroup';\r\n\r\n    @Input() viewType: ViewType = ViewType.Replace;\r\n\r\n    // \r\n    @Input() disabled = false;\r\n    // \r\n    @Input() readonly = false;\r\n    // \r\n    @Input() editable = true;\r\n    // \r\n    @Input() dateRange = false;\r\n    // \r\n    @Input() showTime = false;\r\n    // \r\n    @Input() showType: ShowType = ShowType.all;\r\n    // \r\n    @Input() locale = 'zh-cn';\r\n    // \r\n    @Input()\r\n    set dateFormat(value: string) {\r\n        if (value) {\r\n            // value  yyyy-MM-dd HH:mm:ss\r\n            // const formArr = 'yyyy-MM-dd HH:mm:ss'.split(' ');\r\n            value = value.replace(/^\\s+|\\s+$/g, ''); // \r\n            value = value.replace(/\\s+/g, ' '); // 1\r\n            const formArr = value.split(' ');\r\n            this._dateFormat = formArr[0];\r\n            // 'yyyy-MM-dd h:mm:ss a'12\r\n            if (formArr.length === 3) {\r\n                this._timeFormat = 'h:mm:ss a';\r\n            } else {\r\n                this._timeFormat = formArr[1];\r\n            }\r\n        }\r\n\r\n        // this._dateFormat = this._dateFormat ? (this._dateFormat + '').replace(/m/g, 'M') : '';\r\n        if (this._dateFormat) {\r\n            const mm = ['yyyy-mm', 'yyyy/mm', 'yyyymm', 'mm/yyyy'];\r\n            const _mm = mm.find(m => this._dateFormat.includes(m));\r\n            if (_mm) {\r\n                this._dateFormat = this._dateFormat.replace(_mm, _mm.replace(/m/g, 'M'));\r\n            }\r\n\r\n            if (this._timeFormat && this.showTime) {\r\n                this._dateFormat += ' ' + this._timeFormat;\r\n                if (this._timeFormat.indexOf('') > -1) {\r\n                    this._timeFormat = this._timeFormat.replace('', ':').replace('', ':').replace('', '');\r\n                }\r\n            }\r\n        }\r\n\r\n        // this.dateOpts.dateFormat = this._dateFormat;\r\n    }\r\n    get dateFormat(): string {\r\n        return this._dateFormat;\r\n    }\r\n    // \r\n    @Input() useDefault = false;\r\n    @Input() returnType: 'Object' | 'Date' | 'String' = 'String';\r\n    @Input() returnFormat: string;\r\n    // placeholder\r\n    @Input() placeholder = '';\r\n    @Input() beginPlaceholder = '';\r\n    @Input() endPlaceholder = '';\r\n    /**   true */\r\n    @Input() whenValueChangedThenCloseSelectorPanel = true;\r\n    // \r\n    // \r\n    @Input()\r\n    set minDate(val: any) {\r\n        const type = Object.prototype.toString.call(val);\r\n        let date: Date;\r\n        switch (type) {\r\n            case '[object Date]':\r\n                date = val;\r\n                break;\r\n            case '[object String]':\r\n                if (val) {\r\n                    date = new Date(val);\r\n                } else {\r\n                    date = new Date(1840, 1, 1, 0, 0, 0);\r\n                }\r\n                break;\r\n            case '[object Null]':\r\n                date = new Date(1840, 1, 1, 0, 0, 0);\r\n                break;\r\n            // case null:\r\n            //     date = new Date(1840, 1, 1, 0, 0, 0);\r\n            //     break;\r\n            case '[object Undefined]':\r\n                date = new Date(1840, 1, 1, 0, 0, 0);\r\n                break;\r\n            default:\r\n                date = new Date(1840, 1, 1, 0, 0, 0);\r\n                break;\r\n        }\r\n        if (isValid(date)) {\r\n            const year = date.getFullYear();\r\n            const month = date.getMonth() + 1;\r\n            const day = date.getDate();\r\n            const hour = date.getHours();\r\n            const minute = date.getMinutes();\r\n            const second = date.getSeconds();\r\n            this._minDate = { year, month, day, hour, minute, second };\r\n        }\r\n    }\r\n    get minDate() {\r\n        return this._minDate;\r\n    }\r\n    // \r\n    // \r\n    @Input()\r\n    set maxDate(val: any) {\r\n        const type = Object.prototype.toString.call(val);\r\n        let date: Date;\r\n\r\n        switch (type) {\r\n            case '[object Date]':\r\n                date = val;\r\n                break;\r\n            case '[object String]':\r\n                if (val) {\r\n                    date = new Date(val);\r\n                } else {\r\n                    date = new Date(10000, 1, 1, 0, 0, 0);\r\n                }\r\n                break;\r\n            case '[object Null]':\r\n                date = new Date(10000, 1, 1, 0, 0, 0);\r\n                break;\r\n            // case null:\r\n            //     date = new Date(10000, 1, 1, 0, 0, 0);\r\n            //     break;\r\n            case '[object Undefined]':\r\n                date = new Date(10000, 1, 1, 0, 0, 0);\r\n                break;\r\n            default:\r\n                date = new Date(10000, 1, 1, 0, 0, 0);\r\n                break;\r\n        }\r\n        if (isValid(date)) {\r\n            const year = date.getFullYear();\r\n            const month = date.getMonth() + 1;\r\n            const day = date.getDate();\r\n            const hour = date.getHours();\r\n            const minute = date.getMinutes();\r\n            const second = date.getSeconds();\r\n            this._maxDate = { year, month, day, hour, minute, second };\r\n        }\r\n    }\r\n    get maxDate() {\r\n        return this._maxDate;\r\n    }\r\n    // \r\n    @Input() highlightDates: Array<IMyDate> = [];\r\n    // \r\n    @Input() disableDateRangesBegin: IMyDate = {\r\n        year: 0,\r\n        month: 0,\r\n        day: 0\r\n    };\r\n    // \r\n    @Input() disableDateRangesEnd: IMyDate = {\r\n        year: 0,\r\n        month: 0,\r\n        day: 0\r\n    };\r\n    // \r\n    @Input() disableDates: Array<IMyDate> = [];\r\n    // \r\n    @Input() disableWeekdays: Array<string> = [];\r\n    // \r\n    @Input() markDates: Array<IMyDate> = [];\r\n    // \r\n    @Input() markDatesColor = '#59a1ff';\r\n    // \r\n    @Input() showWeekNumbers = false;\r\n    // \r\n    @Input() isMarkWeekends = false;\r\n    // \r\n    @Input() markWeekendsColor = '#59a1ff';\r\n    // input\r\n    @Input() dateRangeDatesDelimiter = '~';\r\n    //  sidebar \r\n    @Input() shortcuts: Array<IMyShortcuts> = [];\r\n    //  + monthRangeValue\r\n    @Input() monthRangeValue = 1;\r\n    // \r\n    @Input()\r\n    set beginValue(value: string | Date) {\r\n        value = value ? value : '';\r\n        if (value instanceof Date) {\r\n            value = this.dateTo(value);\r\n            this.returnType = 'Date';\r\n        } else {\r\n            if (value.indexOf('T') > -1) {\r\n                value = value.replace('T', ' ');\r\n            }\r\n            this.returnType = 'String';\r\n        }\r\n        this._beginValue = value;\r\n        if (this._initFinished) {\r\n            this.setValue(this._beginValue + this.dateRangeDatesDelimiter + this._endValue);\r\n        }\r\n    }\r\n    get beginValue() {\r\n        return this.dateFrom(this._beginValue, true);\r\n    }\r\n    // \r\n    @Input()\r\n    set endValue(value: string | Date) {\r\n        value = value ? value : '';\r\n        if (value instanceof Date) {\r\n            value = this.dateTo(value);\r\n            this.returnType = 'Date';\r\n        } else {\r\n            if (value.indexOf('T') > -1) {\r\n                value = value.replace('T', ' ');\r\n            }\r\n            this.returnType = 'String';\r\n        }\r\n        this._endValue = value;\r\n        if (this._initFinished) {\r\n            this.setValue(this._beginValue + this.dateRangeDatesDelimiter + this._endValue);\r\n        }\r\n    }\r\n    get endValue() {\r\n        return this.dateFrom(this._endValue, true);\r\n    }\r\n    // clear \r\n    @Output() clear = new EventEmitter();\r\n    // valueChanged \r\n    @Output() valueChange = new EventEmitter();\r\n    // focus \r\n    @Output() focus = new EventEmitter();\r\n    // blur \r\n    @Output() blur = new EventEmitter();\r\n    // beginValueChange\r\n    @Output() beginValueChange = new EventEmitter();\r\n    // endValueChange\r\n    @Output() endValueChange = new EventEmitter();\r\n    // PrevFocus dateRange \r\n    @Output() PrevFocus = new EventEmitter();\r\n    // NextFocus dateRange \r\n    @Output() NextFocus = new EventEmitter();\r\n\r\n    // close \r\n    @Output() close = new EventEmitter();\r\n\r\n\r\n    @ViewChild(FarrisDatePickerDirective) dp: FarrisDatePickerDirective;\r\n    @ViewChild('clearIcon') clearIcon: ElementRef;\r\n    @ViewChild('calendar', { read: ViewContainerRef }) calendarRef: ViewContainerRef;\r\n    @ViewChild('onPrevFocus') PFocus: ElementRef;\r\n    @ViewChild('onNextFocus') NFocus: ElementRef;\r\n\r\n    @ViewChild('dateInput') dateInput: ElementRef;\r\n\r\n    private cRef: ComponentRef<CalendarComponent> = null;\r\n    private _timeFormat = '';\r\n    private _value = '';\r\n    public _beginValue = '';\r\n    public _endValue = '';\r\n    private _initFinished = false;\r\n    private _timer: any;\r\n    private _dateFormat: string;\r\n    private _minDate: IMyDate = {\r\n        year: 1840,\r\n        month: 1,\r\n        day: 1,\r\n        hour: 0,\r\n        minute: 0,\r\n        second: 0\r\n    };\r\n    private _maxDate: IMyDate = {\r\n        year: 10000,\r\n        month: 1,\r\n        day: 1,\r\n        hour: 0,\r\n        minute: 0,\r\n        second: 0\r\n    };\r\n    set value(v) {\r\n        this._value = v ? v : '';\r\n    }\r\n    get value() {\r\n        return this._value;\r\n    }\r\n\r\n    dateOpts: IMyOptions = {};\r\n    defaultConfig: IMyOptions;\r\n    localDateOpts: IMyOptions;\r\n    localeConfig: DatepickerLocaleService;\r\n    localeService: LocaleService;\r\n    // \r\n    beginFocus = false;\r\n    // \r\n    endFocus = false;\r\n    // \r\n    totalFocus = false;\r\n\r\n    originTime: any;\r\n    // Tip\r\n    isActiveTip = false;\r\n    private vcRef: ViewContainerRef;\r\n    private cfr: ComponentFactoryResolver;\r\n    private renderer: Renderer2;\r\n    private datePicekrService: DatePickerService;\r\n    private _realValue = null;\r\n    private _realRangeValue = null;\r\n    private notifySer: NotifyService;\r\n    private formatedValue = '';\r\n    dtService: DateTimeHelperService = null;\r\n    private _applicationRef: ApplicationRef;\r\n\r\n    private _ngControl: NgControl;\r\n    _updateOn = 'change';\r\n\r\n    //  true blur valueChanged\r\n    // blur  valueChanged  false;\r\n    private _valueChangeEmitted = false;\r\n    private _mousedownEvent = null;\r\n    private closeCalendarHandler = null;\r\n    private cdr: ChangeDetectorRef = null;\r\n    /**  */\r\n    private _SELECT_DATE_ = null;\r\n\r\n    onModelChange = (obj: any) => { };\r\n    onModelTouched = () => { };\r\n\r\n    private overLayService: OverLayHiddenService;\r\n    constructor(\r\n        private el: ElementRef,\r\n        private utilService: UtilService,\r\n        private defaultConfigService: DefaultConfigService,\r\n        private injector: Injector\r\n    ) {\r\n        this.defaultConfig = this.defaultConfigService.getDefaultConfig();\r\n        if (this.injector) {\r\n            this.localeService = this.injector.get(LocaleService);\r\n            this.dtService = this.injector.get(DateTimeHelperService);\r\n            this.notifySer = this.injector.get(NotifyService, null);\r\n            if (this.notifySer) {\r\n                this.notifySer.config.position = 'top-center';\r\n            }\r\n        }\r\n        this.localeConfig = new DatepickerLocaleService();\r\n        this.vcRef = this.injector.get(ViewContainerRef, null);\r\n        this.cfr = this.injector.get(ComponentFactoryResolver, null);\r\n        this.renderer = this.injector.get(Renderer2, null);\r\n        this._applicationRef = this.injector.get(ApplicationRef);\r\n        this.cdr = this.injector.get(ChangeDetectorRef);\r\n        // this.datePicekrService = this.injector.get(DatePickerService, null)\r\n        this.overLayService = new OverLayHiddenService();\r\n    }\r\n\r\n    ngOnInit(): void {\r\n\r\n        this._ngControl = this.injector.get(NgControl, null);\r\n\r\n        this.initPlaceholder();\r\n        this.mergeDateOptions();\r\n        if (this._beginValue && this._endValue) {\r\n            this.setValue(this._beginValue + this.dateRangeDatesDelimiter + this._endValue);\r\n        }\r\n        this._initFinished = true;\r\n        this.datePicekrService = new DatePickerService(this.dateOpts);\r\n    }\r\n\r\n    private initPlaceholder() {\r\n        if (this.localeService) {\r\n            this.locale = this.localeService.getValue('locale');\r\n            this.localDateOpts = this.localeConfig.getLocaleOptions(this.locale);\r\n            this.placeholder = this.placeholder\r\n                ? this.placeholder\r\n                : this.localDateOpts.placeholder\r\n                    ? this.localDateOpts.placeholder\r\n                    : '';\r\n            if (!this.beginPlaceholder) {\r\n                this.beginPlaceholder = this.localDateOpts.range.begin || this.placeholder;\r\n            }\r\n\r\n            if (!this.endPlaceholder) {\r\n                this.endPlaceholder = this.localDateOpts.range.end || this.placeholder;\r\n            }\r\n        }\r\n    }\r\n\r\n    private mergeDateOptions() {\r\n        this.dateOpts = { ...this.defaultConfig, ...this.buildOptions() };\r\n\r\n        if (this.dateOpts.dateFormat) {\r\n            if (!this._dateFormat) {\r\n                this.dateFormat = this.dateOpts.dateFormat;\r\n                this.dateOpts.dateFormat = this.dateFormat;\r\n            }\r\n        }\r\n\r\n        if (this.showTime && !this._timeFormat) {\r\n            this._timeFormat = 'HH:mm:ss';\r\n            this.dateOpts.timeFormat = this._timeFormat;\r\n        }\r\n\r\n        if (this.dateOpts.returnFormat) {\r\n            if (!this.returnFormat) {\r\n                this.returnFormat = this.dateOpts.returnFormat;\r\n            }\r\n        }\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (changes.locale && changes.locale.isFirstChange()) {\r\n            // this.dp.setLocaleOptions();\r\n            this.localDateOpts = this.localeConfig.getLocaleOptions(this.locale);\r\n        }\r\n        if (changes) {\r\n            let flag = false;\r\n\r\n            const inputs = ['showTime', 'showType', 'dateRange', 'maxDate', 'minDate', 'monthRangeValue'];\r\n\r\n\r\n            Object.keys(changes).forEach(e => {\r\n                if (!changes[e].isFirstChange() && (this.dateOpts[e] || inputs.includes(e))) {\r\n                    // this[e] = changes[e].currentValue;\r\n                    flag = true;\r\n                }\r\n            });\r\n            if (flag) {\r\n                this.dateOpts = { ...this.defaultConfig, ...this.buildOptions() };\r\n            }\r\n        }\r\n        if (\r\n            changes.readonly &&\r\n            !changes.readonly.currentValue &&\r\n            !changes.readonly.firstChange &&\r\n            !this.value &&\r\n            this.useDefault\r\n        ) {\r\n            this.setDefaultValue();\r\n        }\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        if (this._ngControl && this._ngControl.control) {\r\n            this._updateOn = this._ngControl.control.updateOn;\r\n        }\r\n\r\n        this._timer = setTimeout(() => {\r\n            this.setDefaultValue();\r\n        });\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        clearTimeout(this._timer);\r\n        this.closeSelector();\r\n\r\n        this.overLayService.destory(this.el.nativeElement);\r\n        this.overLayService = null;\r\n    }\r\n\r\n    @HostListener('mouseenter', ['$event']) onMouseEnter(event) {\r\n        if (this.value && !this.readonly && !this.disabled) {\r\n            if (this.value) {\r\n                this.clearIcon.nativeElement.style.visibility = '';\r\n            }\r\n            if (this.dateOpts.dateRange) {\r\n                if (this.dateOpts.showTime) {\r\n                    this.isActiveTip = this.el.nativeElement.getBoundingClientRect().width < 300;\r\n                } else {\r\n                    this.isActiveTip = this.el.nativeElement.getBoundingClientRect().width < 190;\r\n                }\r\n            } else {\r\n                if (this.dateOpts.showTime) {\r\n                    this.isActiveTip = this.el.nativeElement.getBoundingClientRect().width < 170;\r\n                } else {\r\n                    this.isActiveTip = this.el.nativeElement.getBoundingClientRect().width < 120;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    @HostListener('mouseleave', ['$event']) onMouseLeave(event) {\r\n        if (!this.readonly && !this.disabled) {\r\n            this.clearIcon.nativeElement.style.visibility = 'hidden';\r\n        }\r\n    }\r\n\r\n    onBlur(e) {\r\n        this.totalFocus = false;\r\n\r\n        let _runblur = true;\r\n        if (this.value) {\r\n            try {\r\n                this.value = this.transform(this.value);\r\n                const valid = this._isValid(this.value);\r\n                if (!valid) {\r\n                    this.clearDate();\r\n                    _runblur = false;\r\n                }\r\n            } catch (e) {\r\n                this.clearDate();\r\n                _runblur = false;\r\n            }\r\n        }\r\n\r\n        const updateModel = () => {\r\n            if (!this._valueChangeEmitted) {\r\n                const realDate = this.dateFrom(this.transform(this.value, this.returnFormat));\r\n                this.onNgModelChange(this.value, realDate, true);\r\n                this.onModelTouched();\r\n            }\r\n        };\r\n\r\n        if (this.editable && _runblur) {\r\n            if (this['inDatagrid']) {\r\n                updateModel();\r\n            } else {\r\n                setTimeout(updateModel, 250);\r\n            }\r\n        }\r\n        this._valueChangeEmitted = false;\r\n        if (this._mousedownEvent) {\r\n            this._mousedownEvent();\r\n            this._mousedownEvent = null;\r\n        }\r\n        this.blur.emit();\r\n    }\r\n\r\n    onFocus(e) {\r\n        this.totalFocus = true;\r\n        this.registerMouseDownHandle();\r\n        this.focus.emit();\r\n    }\r\n\r\n    onInputClick(event) {\r\n        event.stopPropagation();\r\n        if (!this.readonly && !this.disabled) {\r\n            this.registerMouseDownHandle();\r\n            this.toggleCalendar(false);\r\n        }\r\n    }\r\n\r\n    private registerMouseDownHandle() {\r\n        if (!this._mousedownEvent) {\r\n            this._mousedownEvent = this.renderer.listen(document, 'mousedown', (e: any) => {\r\n                if (e.target.className.toString().indexOf('SVGAnimatedString') > -1) {\r\n                    return;\r\n                }\r\n                if (e.target.closest('.f-cmp-datepicker') ||\r\n                    e.target.closest('.f-datepicker-container') || e.target.className.indexOf('f-icon-date') > -1) {\r\n                    if (this.dateInput) {\r\n                        this.renderer.setStyle(this.dateInput.nativeElement, 'unselectable', 'on');\r\n                    }\r\n                    e.preventDefault();\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    setDefaultValue() {\r\n        if (!this.readonly && !this.value && this.useDefault) {\r\n            const now = new Date();\r\n            let nowValue = '';\r\n            if (!this.dateOpts.dateRange) {\r\n                nowValue = this.dateTo(now);\r\n\r\n            } else {\r\n                nowValue =\r\n                    this.dateTo(now) +\r\n                    this.dateRangeDatesDelimiter +\r\n                    this.dateTo(new Date(now.setMonth(now.getMonth() + 1)));\r\n\r\n            }\r\n            if (this.datePicekrService.validate(nowValue)) {\r\n                this.value = nowValue;\r\n                this.onNgModelChange(this.value);\r\n                this.onModelTouched();\r\n            }\r\n        }\r\n    }\r\n\r\n    clearDate($event: MouseEvent = null) {\r\n        if ($event) {\r\n            $event.stopPropagation();\r\n        }\r\n\r\n        this._SELECT_DATE_ = null;\r\n\r\n        if (!this.disabled) {\r\n            this._realRangeValue = null;\r\n            this._realValue = null;\r\n            this.onDateChanged({\r\n                isRange: this.dateOpts.dateRange,\r\n                singleDate: {\r\n                    date: this.utilService.resetDate(),\r\n                    jsDate: null,\r\n                    formatted: EMPTY_STR,\r\n                    epoc: 0\r\n                },\r\n                dateRange: {\r\n                    beginDate: this.utilService.resetDate(),\r\n                    beginJsDate: null,\r\n                    beginEpoc: 0,\r\n                    endDate: this.utilService.resetDate(),\r\n                    endJsDate: null,\r\n                    endEpoc: 0,\r\n                    formatted: EMPTY_STR\r\n                }\r\n            });\r\n            this.closeSelector(CalToggle.CloseByCalBtn);\r\n            this.onModelChange(null);\r\n            this.clear.emit();\r\n            if (this.clearIcon) {\r\n                this.clearIcon.nativeElement.style.visibility = 'hidden';\r\n            }\r\n        }\r\n    }\r\n\r\n    onSingleInputNgModelChange($event) {\r\n        this.value = $event || '';\r\n        this._realValue = this.value ? this.dateFrom($event) : '';\r\n        this.closeSelector();\r\n    }\r\n\r\n\r\n    onNgModelChange(value: any, realdate = null, emitValueChange = false) {\r\n        // this.value = value;\r\n        if (this.dateRange || this.showType == ShowType.selectWeek) {\r\n\r\n            const tmpArr = value ? value.split(this.dateRangeDatesDelimiter) : ['', ''];\r\n            const _beginValue = this.transform(tmpArr[0], this.returnFormat);\r\n            const _endValue = this.transform(tmpArr[1], this.returnFormat);\r\n\r\n            this._beginValue = this.transform(tmpArr[0]);\r\n            this._endValue = this.transform(tmpArr[1]);\r\n\r\n\r\n            value = _beginValue && _endValue ? _beginValue + this.dateRangeDatesDelimiter + _endValue : '';\r\n            this._realRangeValue = value;\r\n            this.onModelChange(value);\r\n            this.cdr.detectChanges();\r\n            this.beginValueChange.emit(this._beginValue);\r\n            this.endValueChange.emit(this._endValue);\r\n\r\n            const p = {\r\n                date: null,\r\n                formatted: this.value,\r\n                returnFormatted: this._realRangeValue,\r\n                cmpRef: this\r\n            };\r\n\r\n            this.valueChange.emit(p);\r\n        } else {\r\n\r\n            if (value === '') {\r\n                this.value = '';\r\n                this._onModelChange(null, emitValueChange);\r\n                return;\r\n            }\r\n\r\n            if (realdate) {\r\n                this._realValue = this.getRealReturnFormatted(realdate);\r\n                this._onModelChange(this._realValue, emitValueChange);\r\n\r\n                if (this.dateInput && this.dateInput.nativeElement.value !== this.value) {\r\n                    this.renderer.setProperty(this.dateInput.nativeElement, 'value', this.value);\r\n                }\r\n            } else {\r\n                if (this._isValid(value)) {\r\n                    this._realValue = this.getRealReturnFormatted(realdate);\r\n                    if (this.dateInput) {\r\n                        this.renderer.setProperty(this.dateInput.nativeElement, 'value', this.value);\r\n                    }\r\n                    this._onModelChange(this._realValue, emitValueChange);\r\n                }\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    private _onModelChange(realValue, emit) {\r\n        this._realValue = realValue;\r\n        this.onModelChange(realValue);\r\n        if (emit) {\r\n            const p = {\r\n                date: this.utilService.isDateValid(this.value, this.dateOpts, true),\r\n                formatted: this.value,\r\n                returnFormatted: realValue,\r\n                cmpRef: this\r\n            };\r\n\r\n            if (this.valueChange.observers.length) {\r\n                if (this.whenValueChangedThenCloseSelectorPanel) {\r\n                    this.closeSelector();\r\n                }\r\n\r\n                this.valueChange.emit(p);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    private getRealReturnFormatted(realdate: any) {\r\n\r\n        if (realdate) {\r\n            if (this.returnType === 'Date') {\r\n                return realdate;\r\n            } else {\r\n                if (this.returnFormat) {\r\n                    return this.dtService.formatTo(realdate, this.returnFormat);\r\n                }\r\n                return realdate;\r\n            }\r\n        } else {\r\n            return this.dateFrom(this._realValue || this.value) || '';\r\n        }\r\n    }\r\n\r\n    onDateRangeInputBlur(event: any) {\r\n        this.setValue(this._beginValue + this.dateRangeDatesDelimiter + this._endValue);\r\n        this.onNgModelChange(this._realRangeValue || this.value);\r\n    }\r\n\r\n    openCalendar(): void {\r\n        if (this.disabled) {\r\n            return;\r\n        }\r\n\r\n        let val = this._realValue;\r\n        if (this.dateRange) {\r\n            val = this._realRangeValue;\r\n        } else {\r\n            if (this.returnType === 'Date') {\r\n                val = this.transform(val, this.returnFormat);\r\n            }\r\n        }\r\n\r\n        if (this.cRef === null) {\r\n            this.cRef = this.calendarRef.createComponent(\r\n                this.cfr.resolveComponentFactory(CalendarComponent)\r\n            );\r\n\r\n            this.datePicekrService.appendSelector(this.cRef.location.nativeElement);\r\n\r\n            this.datePicekrService.registerScrollEvent(() => {\r\n                this.closeSelector();\r\n            });\r\n\r\n            this.cRef.instance.initialize(\r\n                this.dateOpts,\r\n                '',\r\n                this.datePicekrService.getSelectorPosition(this.el.nativeElement, this.cRef),\r\n                val,\r\n                (dm: IMyDateModel, close: boolean) => {\r\n\r\n                    if (this.dateOpts.dateRange && this.showTime && dm.dateRange.endJsDate < dm.dateRange.beginJsDate) {\r\n                        // const { year: beginYear, month: beginMonth,  day: beginDay  } = {...dm.dateRange.beginDate};\r\n                        // const { year: endYear, month: endMonth,  day: endDay  } = {...dm.dateRange.endDate};\r\n                        // error message:  The end time must not be earlier than the start time\r\n                        // error message:  \r\n                        const msg = this.localDateOpts.message['101'];\r\n                        if (this.notifySer) {\r\n                            this.notifySer.warning(msg);\r\n                        } else {\r\n                            alert(msg);\r\n                        }\r\n                        return;\r\n                    }\r\n\r\n                    this.onDateChanged(dm);\r\n                    if (close) {\r\n                        this.closeSelector(CalToggle.CloseByDateSel);\r\n                    }\r\n                },\r\n                (cvc: IMyCalendarViewChanged) => {\r\n                    // this.emitCalendarChanged(cvc);\r\n                },\r\n                (rds: IMyRangeDateSelection) => {\r\n                    // this.emitRangeDateSelection(rds);\r\n                },\r\n                () => {\r\n                    this.closeSelector(CalToggle.CloseByEsc);\r\n                }\r\n            );\r\n\r\n            // this.cdr.detectChanges();\r\n        } else {\r\n            this.datePicekrService.appendSelector(this.cRef.location.nativeElement);\r\n        }\r\n\r\n        this.overLayService.registerMouseEvent(this.el.nativeElement, (e: MouseEvent) => {\r\n            if (this.cRef && this.cRef.location.nativeElement.contains(e.target)) {\r\n                return;\r\n            }\r\n            this.closeSelector();\r\n        }, { onlyTopWindow: true});\r\n\r\n        this.cRef.changeDetectorRef.detectChanges();\r\n        // this.preventClose = false;\r\n    }\r\n    closeSelector(reason?: number): void {\r\n        if (this.cRef !== null) {\r\n            this.calendarRef.remove(this.calendarRef.indexOf(this.cRef.hostView));\r\n            this.cRef = null;\r\n            // this.cdr.detectChanges();\r\n            const container = document.querySelector('.date-overlay-container');\r\n            if (container.childElementCount) {\r\n                container.remove();\r\n            }\r\n            this.renderer.setStyle(container, 'pointer-events', '');\r\n        }\r\n        this.totalFocus = false;\r\n        if (this.dateOpts.dateRange) {\r\n            this.beginFocus = false;\r\n            this.endFocus = false;\r\n        }\r\n\r\n        if (this.closeCalendarHandler) {\r\n            this.closeCalendarHandler();\r\n            this.closeCalendarHandler = null;\r\n        }\r\n\r\n        if (this.datePicekrService) {\r\n            this.datePicekrService.removeMouseEvent();\r\n        }\r\n\r\n        this.overLayService.destory(this.el.nativeElement);\r\n    }\r\n    toggleCalendar(close: boolean, emit = true) {\r\n        if (this.disabled) {\r\n            this.totalFocus = false;\r\n            if (this.dateOpts.dateRange) {\r\n                this.beginFocus = false;\r\n                this.endFocus = false;\r\n            }\r\n            return;\r\n        }\r\n        if (this.cRef === null) {\r\n            if (!this.closeCalendarHandler) {\r\n                this.closeCalendarHandler = this.renderer.listen(document, CLICK, () => this.closeSelector(CalToggle.CloseByOutClick));\r\n            }\r\n            this.totalFocus = true;\r\n            this.openCalendar();\r\n            const container = document.querySelector('.date-overlay-container');\r\n            this.renderer.setStyle(container, 'pointer-events', 'auto');\r\n        } else {\r\n            let flag = true;\r\n            const container = document.querySelector('.date-overlay-container');\r\n            if (container && this.cRef.location) {\r\n                if (container.hasChildNodes()) {\r\n                    container.childNodes.forEach(el => {\r\n                        if (el === this.cRef.location.nativeElement) {\r\n                            flag = false;\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            if (flag) {\r\n                this.renderer.setStyle(container, 'pointer-events', 'auto');\r\n                this.totalFocus = true;\r\n                this.openCalendar();\r\n            } else {\r\n                this.totalFocus = false;\r\n\r\n                if (this.dateOpts.dateRange) {\r\n                    this.beginFocus = false;\r\n                    this.endFocus = false;\r\n                }\r\n                // document.removeEventListener(CLICK, this.onClickHidden);\r\n                close && this.closeSelector(CalToggle.CloseByCalBtn);\r\n                // this.renderer.setStyle(container, 'pointer-events', '')\r\n                if (emit) {\r\n                    this.close.emit();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    onDateChanged(event: IMyDateModel) {\r\n        this._SELECT_DATE_ = event;\r\n        let valChangeParams: any = '';\r\n        if (event.singleDate) {\r\n            this.value = event.singleDate.formatted;\r\n            this.formatedValue = event.singleDate.formatted;\r\n            const returnFormatted = this.getRealReturnFormatted(event.singleDate.jsDate);\r\n            valChangeParams = { ...event.singleDate, formatted: event.singleDate.formatted, returnFormatted };\r\n\r\n            const { year, month, day, hour, minute, second } = event.singleDate.date;\r\n\r\n            if (month && (this.dateFormat.indexOf('yyyy') === -1 || this.dateFormat.indexOf('dd') === -1)) {\r\n                const nd = new Date(\r\n                    year || new Date().getFullYear(),\r\n                    month - 1,\r\n                    day || 1,\r\n                    hour || 0,\r\n                    minute || 0,\r\n                    second || 0\r\n                );\r\n\r\n                event.singleDate.jsDate = nd;\r\n            }\r\n\r\n            this.onNgModelChange(returnFormatted, event.singleDate.jsDate);\r\n        } else if (event.dateRange) {\r\n            this.value = event.dateRange.formatted;\r\n            this.formatedValue = event.dateRange.formatted;\r\n            const returnFormatted = event.dateRange.returnFormatted;\r\n            // let returnFormatted = this.dateFrom(event.dateRange.returnFormatted);\r\n            valChangeParams = { ...event.dateRange, formatted: event.dateRange.formatted, returnFormatted };\r\n            this.onNgModelChange(returnFormatted, event.dateRange);\r\n        }\r\n        this.onModelTouched();\r\n        this._valueChangeEmitted = true;\r\n        this.valueChange.emit(valChangeParams);\r\n    }\r\n\r\n    buildOptions() {\r\n        let dateOpts: any;\r\n        if (!this.localDateOpts) {\r\n            this.localDateOpts = this.localeConfig.getLocaleOptions(this.locale);\r\n        }\r\n\r\n        if (this.showType === ShowType.noDateAndMonth) {\r\n            this.localDateOpts.dateFormat = 'yyyy';\r\n            this.localDateOpts.returnFormat = 'yyyy';\r\n        }\r\n\r\n        const _showTime = (Number(this.showType) === ShowType.all) ? this.showTime : false;\r\n\r\n        dateOpts = {\r\n            dateRange: this.dateRange,\r\n            showTime: _showTime,\r\n            showType: Number(this.showType),\r\n            dateFormat: this.dateFormat ? this.dateFormat : this.localDateOpts.dateFormat,\r\n            returnFormat: this.returnFormat ? this.returnFormat : this.localDateOpts.returnFormat,\r\n            minYear: this._minDate.year,\r\n            maxYear: this._maxDate.year,\r\n            highlightDates: this.highlightDates,\r\n            disableDates: this.disableDates,\r\n            showWeekNumbers: this.showWeekNumbers,\r\n            disableDateRanges: [\r\n                {\r\n                    begin: this.disableDateRangesBegin,\r\n                    end: this.disableDateRangesEnd\r\n                }\r\n            ],\r\n            disableUntil: this._minDate,\r\n            disableSince: this._maxDate,\r\n            disableWeekdays: this.disableWeekdays,\r\n            markDates: [\r\n                {\r\n                    dates: this.markDates,\r\n                    color: this.markDatesColor\r\n                }\r\n            ],\r\n            markWeekends: {\r\n                marked: this.isMarkWeekends,\r\n                color: this.markWeekendsColor\r\n            },\r\n            dateRangeDatesDelimiter: this.dateRangeDatesDelimiter,\r\n            shortcuts: this.shortcuts,\r\n            timeFormat: this._timeFormat,\r\n            monthRangeValue: this.monthRangeValue,\r\n            viewType: this.viewType\r\n        };\r\n\r\n        switch (Number(this.showType)) {\r\n            case ShowType.noDate:\r\n                dateOpts.defaultView = DefaultView.Month;\r\n                break;\r\n            case ShowType.noDateAndMonth:\r\n                dateOpts.defaultView = DefaultView.Year;\r\n                // dateOpts.dateFormat = 'yyyy';\r\n                // dateOpts.returnFormat = 'yyyy';\r\n                // this.dateFormat = 'yyyy';\r\n                break;\r\n            case ShowType.selectWeek:\r\n                dateOpts.showWeekNumbers = true;\r\n                dateOpts.dateRange = true;\r\n                dateOpts.firstDayOfWeek = 'mo';\r\n                break;\r\n            // default:\r\n            // this.returnType = 'String';\r\n\r\n        }\r\n        return { ...this.localDateOpts, ...dateOpts };\r\n    }\r\n\r\n    dateTo(d: any) {\r\n        const dateFormat = this.dateOpts.dateFormat ? this.dateOpts.dateFormat : this.defaultConfig.dateFormat;\r\n        const monthLabels = this.dateOpts.monthLabels ? this.dateOpts.monthLabels : this.defaultConfig.monthLabels;\r\n        const showTime = this.dateOpts.showTime ? this.dateOpts.showTime : this.defaultConfig.showTime;\r\n        const year = d.getFullYear();\r\n        const month = d.getMonth() + 1;\r\n        const day = d.getDate();\r\n        const hour = d.getHours();\r\n        const minute = d.getMinutes();\r\n        const second = d.getSeconds();\r\n        let date: IMyDate;\r\n        if (!showTime) {\r\n            date = { year, month, day };\r\n            this.originTime = { hour, minute, second };\r\n        } else {\r\n            date = { year, month, day, hour, minute, second };\r\n        }\r\n        return this.utilService.formatDate(date, dateFormat, monthLabels);\r\n    }\r\n    //  Date \r\n    dateFrom(str: any, ignorRange = false) {\r\n        if (!str) {\r\n            return '';\r\n        }\r\n\r\n        const _this = this;\r\n\r\n        const dateRange = this.dateOpts.dateRange ? this.dateOpts.dateRange : this.defaultConfig.dateRange;\r\n        const dateFormat = this.dateOpts.dateFormat ? this.dateOpts.dateFormat : this.defaultConfig.dateFormat;\r\n        const returnFormat = this.dateOpts.returnFormat ? this.dateOpts.returnFormat : this.defaultConfig.returnFormat;\r\n        const showTime = this.dateOpts.showTime ? this.dateOpts.showTime : this.defaultConfig.showTime;\r\n        const delimeters: Array<string> = returnFormat.match(/[^(DdMmYy)]{1,}/g);\r\n        let dateValue: Array<IMyDateFormat>;\r\n        const getValue = this.utilService.getDateValue;\r\n        if ((dateRange || this.dateOpts.showType === ShowType.selectWeek) && !ignorRange) {\r\n            const tmpBegin = str.split(this.dateRangeDatesDelimiter)[0];\r\n            const tmpEnd = str.split(this.dateRangeDatesDelimiter)[1];\r\n            let tmpBeginDate = this.utilService.isDateValid(tmpBegin, this.dateOpts, true);\r\n            let tmpEndDate = this.utilService.isDateValid(tmpEnd, this.dateOpts, true);\r\n            tmpBeginDate = this.utilService.isInitializedDate(tmpBeginDate) ? tmpBeginDate : this.dateOpts.disableUntil;\r\n            tmpEndDate = this.utilService.isInitializedDate(tmpEndDate) ? tmpEndDate : this.dateOpts.disableSince;\r\n            return (\r\n                this.utilService.formatDate(tmpBeginDate, returnFormat, this.defaultConfig.monthLabels) +\r\n                this.dateRangeDatesDelimiter +\r\n                this.utilService.formatDate(tmpEndDate, returnFormat, this.defaultConfig.monthLabels)\r\n            );\r\n        } else {\r\n            if (this.returnType === 'Date') {\r\n                if (str && str instanceof Date) {\r\n                    return str;\r\n                }\r\n                return convert(str, getValue, this.originTime);\r\n            } else {\r\n                const tmpDate = this.utilService.isDateValid(str, this.dateOpts, true);\r\n                return this.utilService.formatDate(tmpDate, returnFormat, this.defaultConfig.monthLabels);\r\n            }\r\n        }\r\n\r\n        function convert(v, _getValue: any, originTime = { hour: 0, minute: 0, second: 0 }) {\r\n            let fmt = returnFormat;\r\n            if (_this.returnType === 'Date') {\r\n                fmt = 'yyyy-MM-dd' + (showTime ? ' HH:mm:ss' : '');\r\n            }\r\n            if (showTime) {\r\n                const date = v.split(' ')[0];\r\n                let time = v.split(' ')[1];\r\n\r\n                dateValue = _getValue(date, fmt, delimeters);\r\n                if (time) {\r\n                    time = time.replace(/[,]/g, ':').replace(/[]/, '');\r\n                    const [h, m, s] = time.split(':');\r\n                    const hour = h;\r\n                    const minute = m;\r\n                    const second = s ? s : '';\r\n\r\n                    dateValue[3] = { value: hour, format: 'hh' };\r\n                    dateValue[4] = { value: minute, format: 'mm' };\r\n                    if (second) {\r\n                        dateValue[5] = { value: second, format: 'ss' };\r\n                    }\r\n                }\r\n            } else {\r\n                const date = v.split(' ')[0];\r\n                dateValue = _getValue(date, fmt, delimeters);\r\n            }\r\n\r\n\r\n            let year = Number(dateValue[0] ? dateValue[0].value : 1970);\r\n            const yearValue = dateValue[0];\r\n            if (yearValue.format) {\r\n                if (!yearValue.value || yearValue.value.length !== yearValue.format.length) {\r\n                    year = null;\r\n                }\r\n            }\r\n\r\n            const month = Number(dateValue[1] ? dateValue[1].value : 1) - 1;\r\n            const day = Number(dateValue[2] ? dateValue[2].value : 1);\r\n            const _hour = dateValue[3] ? Number(dateValue[3].value) : originTime.hour;\r\n            const _minute = dateValue[4] ? Number(dateValue[4].value) : originTime.minute;\r\n            const _second = dateValue[5] ? Number(dateValue[5].value) : originTime.second;\r\n\r\n            if (!year) {\r\n                return null;\r\n            }\r\n            return new Date(year, month, day, _hour, _minute, _second);\r\n        }\r\n    }\r\n\r\n    transform(value: any, _fmt = this.dateOpts.dateFormat) {\r\n        value = value ? value : '';\r\n        const { returnFormat, dateFormat, showTime } = this.dateOpts;\r\n        let _tmpDate = null;\r\n        if (typeof value === 'string') {\r\n            _tmpDate = parse(value, returnFormat, new Date());\r\n\r\n            if (!isValid(_tmpDate)) {\r\n                if (this._SELECT_DATE_ && this._SELECT_DATE_.singleDate) {\r\n                    _tmpDate = this._SELECT_DATE_.singleDate.jsDate;\r\n                } else {\r\n                    if (this._realValue) {\r\n                        _tmpDate =  parse(this._realValue, returnFormat, new Date());\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            if (value instanceof Date) {\r\n                _tmpDate = value;\r\n            }\r\n        }\r\n        let formattedVal = value;\r\n        if (isValid(_tmpDate)) {\r\n            formattedVal = this.dtService.formatTo(_tmpDate, _fmt);\r\n            return formattedVal;\r\n        } else {\r\n            // ,,\r\n            value = value.replace(/[,]/g, '-').replace(/[]/, '');\r\n            if (value[value.length - 1] === '-') {\r\n                value = value.substr(0, value.length - 1);\r\n            }\r\n\r\n            if (isValid(new Date(value))) {\r\n                formattedVal = this.dtService.formatTo(value, _fmt);\r\n            } else {\r\n                value = '';\r\n            }\r\n        }\r\n        if (value) {\r\n            if (this.dateFrom(value, true) === '') {\r\n                const tmpDate = this.utilService.isDateValid(\r\n                    value,\r\n                    Object.assign({}, this.dateOpts, {\r\n                        dateFormat: returnFormat\r\n                    })\r\n                );\r\n                formattedVal = this.utilService.formatDate(tmpDate, _fmt, this.defaultConfig.monthLabels);\r\n            }\r\n        }\r\n        return formattedVal;\r\n    }\r\n\r\n    setValue(value: string) {\r\n        if (this.value !== value) {\r\n            if (this.dateOpts.dateRange) {\r\n                const _tmpDateArr = value.split(this.dateRangeDatesDelimiter);\r\n                const beginStr = _tmpDateArr[0];\r\n                const endStr = _tmpDateArr[1];\r\n                this._beginValue = this.transform(beginStr);\r\n                this._endValue = this.transform(endStr);\r\n                this.value = this._beginValue && this._endValue ? this._beginValue + this.dateRangeDatesDelimiter + this._endValue : '';\r\n            } else {\r\n                if (value) {\r\n                    this.value = this.transform(value);\r\n                } else {\r\n                    this.value = '';\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    updateValue(value: string) {\r\n        if (this.dateOpts.dateRange) {\r\n            const _tmpDateArr = value.split(this.dateRangeDatesDelimiter);\r\n            const beginStr = _tmpDateArr[0];\r\n            const endStr = _tmpDateArr[1];\r\n            this._beginValue = this.transform(beginStr);\r\n            this._endValue = this.transform(endStr);\r\n            this.value = this._beginValue && this._endValue ? this._beginValue + this.dateRangeDatesDelimiter + this._endValue : '';\r\n        } else {\r\n            this.value = this.transform(value);\r\n        }\r\n    }\r\n\r\n    getValueByType(val) {\r\n        if (val instanceof Date) {\r\n            this.returnType = 'Date';\r\n            // return this.dateTo(val);\r\n            return val;\r\n        } else if (val && val instanceof Object) {\r\n            const { begin, end } = val;\r\n            const beginStr = begin instanceof Date ? this.dateTo(begin) : '';\r\n            const endStr = begin instanceof Date ? this.dateTo(end) : '';\r\n\r\n            this.returnType = 'Object';\r\n            return beginStr && endStr ? beginStr + this.dateRangeDatesDelimiter + endStr : '';\r\n        } else if (val && typeof val === 'string') {\r\n            if (val.indexOf('T') > -1) {\r\n                val = val.replace('T', ' ');\r\n            }\r\n            this.returnType = 'String';\r\n            return val;\r\n        } else {\r\n            return '';\r\n        }\r\n    }\r\n    writeValue(val: any): void {\r\n        this._realValue = val;\r\n        if (this.dateRange) {\r\n            this._realRangeValue = val;\r\n        }\r\n        this.setValue(this.getValueByType(val));\r\n    }\r\n    registerOnChange(fn: any): void {\r\n        this.onModelChange = fn;\r\n    }\r\n    registerOnTouched(fn: any): void {\r\n        this.onModelTouched = fn;\r\n    }\r\n    setDisabledState?(isDisabled: boolean): void {\r\n        this.disabled = isDisabled;\r\n    }\r\n    onPrevFocus(value: boolean): void {\r\n        this.beginFocus = true;\r\n        if (this.endFocus == true) {\r\n            this.endFocus = !this.endFocus;\r\n        }\r\n        this.PrevFocus.emit();\r\n    }\r\n    onNextFocus(value: boolean): void {\r\n        this.endFocus = true;\r\n        if (this.beginFocus == true) {\r\n            this.beginFocus = !this.beginFocus;\r\n        }\r\n        this.NextFocus.emit();\r\n    }\r\n\r\n    private _convert2dateString(val: string, realValue = false) {\r\n        if (val) {\r\n            let t = val.replace(/[,]/g, '-').replace(/[,]/g, ' ').replace(/[,,,]/g, ':').replace('', '');\r\n\r\n\r\n            if (realValue) {\r\n                const objDate = this.utilService.isDateValid(val, this.dateOpts, true);\r\n                if (objDate) {\r\n                    let { year, month, day, hour, minute, second} = objDate;\r\n                    if (!year) {\r\n                        year = new Date().getFullYear();\r\n                    }\r\n                    if (!month) {\r\n                        month = new Date().getMonth();\r\n                    }\r\n\r\n                    if (!day) {\r\n                        day = 1;\r\n                    }\r\n\r\n                    if (!hour) {\r\n                        hour = 0;\r\n                    }\r\n\r\n                    if (!minute) {\r\n                        minute = 0;\r\n                    }\r\n\r\n                    if (!second) {\r\n                        second = 0;\r\n                    }\r\n\r\n                    return `${year}-${month}-${day} ${hour}:${minute}:${second}`;\r\n                }\r\n            }\r\n\r\n            if (t[t.length - 1] === '-') {\r\n                // t = t.substr(0, t.length - 1);\r\n                t += '01';\r\n            }\r\n\r\n            if (t[t.length - 1] === ':') {\r\n                t = t.substr(0, t.length - 1);\r\n            }\r\n\r\n            return t.replace(/^\\s+|\\s+$/g, '');\r\n        }\r\n\r\n        return val;\r\n    }\r\n\r\n\r\n    private _isValid(value: any) {\r\n        value = this._convert2dateString(value);\r\n        if (value) {\r\n            if (this.dateFormat.indexOf('yyyy') === -1 || this.dateFormat.indexOf('dd') === -1) {\r\n                const _tmpDate = parse(this.value, this.dateFormat, new Date());\r\n                if (this._realValue) {\r\n                    if (this.returnType === 'Date') {\r\n                        return isValid(this._realValue);\r\n                    } else {\r\n                        return isValid(new Date(this._convert2dateString(this._realValue, true)));\r\n                    }\r\n                }\r\n\r\n                const d = this.utilService.isDateValid(value, this.dateOpts);\r\n                if (d) {\r\n                    if (d.year || d.month) {\r\n                        const cdate = new Date();\r\n                        const year = cdate.getFullYear();\r\n                        const str = (this.dateOpts.returnFormat || 'yyyy-MM-dd')\r\n                            .replace('yyyy', '' + (d.year || year)).replace('MM', '' + d.month).replace('dd', '1');\r\n                        return isValid(new Date(str));\r\n                    }\r\n                    return false;\r\n                }\r\n                return isValid(value);\r\n            } else {\r\n                const reg = /^\\d{1,}$/;\r\n                if (reg.test(value) && this.dateFormat.indexOf('yyyyMMdd') > -1) { //  yyyyMMddHHmmss\r\n                    const _r =  this._isValid2(value);\r\n                    if (_r.isValided) {\r\n                        this._realValue = this.getRealReturnFormatted(_r.date);\r\n                        this.value = this.transform(_r.date);\r\n                    }\r\n                    return _r.isValided;\r\n                } else {\r\n                    const _tmpDate = parse(value, this.dateFormat, new Date());\r\n                    const d = this.utilService.isDateValid(this.value, this.dateOpts);\r\n                    return isValid(_tmpDate) || this.utilService.isInitializedDate(d);\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    private _isValid2(value: string): any {\r\n        let year = 0;\r\n        let month = 0;\r\n        let day = 0;\r\n        let hour = 0;\r\n        let minute = 0;\r\n        let seconds = 0;\r\n\r\n        const df = this.dateFormat;\r\n\r\n        if (df.includes('yyyy')) {\r\n            if (value) {\r\n                year = +value.slice(0, 4);\r\n                value = value.slice(4);\r\n            } else {\r\n                return false;\r\n            }\r\n        }\r\n        if (df.includes('MM')) {\r\n            if (value) {\r\n                month = +value.slice(0, 2) - 1;\r\n                value = value.slice(2);\r\n\r\n                if (month < 0) {\r\n                    month = 0;\r\n                }\r\n            } else {\r\n                return false;\r\n            }\r\n        }\r\n        if (df.includes('dd')) {\r\n            if (value) {\r\n                day = +value.slice(0, 2);\r\n                value = value.slice(2);\r\n            } else {\r\n                return false;\r\n            }\r\n        }\r\n        if (df.includes('HH')) {\r\n            if (value) {\r\n                hour = +value.slice(0, 2);\r\n                value = value.slice(2);\r\n            }\r\n        }\r\n        if (df.includes('mm')) {\r\n            if (value) {\r\n                minute = +value.slice(0, 2);\r\n                value = value.slice(2);\r\n            }\r\n        }\r\n        if (df.includes('ss')) {\r\n            if (value) {\r\n                seconds = +value.slice(0, 2);\r\n            }\r\n        }\r\n\r\n        const d = new Date(year, month, day, hour, minute, seconds);\r\n        return {\r\n            isValided: isValid(d),\r\n            date: d\r\n        };\r\n    }\r\n\r\n}\r\n","/*\r\n * @Author: (Lucas Huang)\r\n * @Date: 2019-08-02 14:14:22\r\n * @LastEditors: (Lucas Huang)\r\n * @LastEditTime: 2019-09-04 15:03:00\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\nimport {\r\n    Component,\r\n    EventEmitter,\r\n    Input,\r\n    Output,\r\n    ViewEncapsulation\r\n} from '@angular/core';\r\nimport { IMyOptions } from '../../interfaces/public-api';\r\n@Component({\r\n    selector: 'lib-selection-sidebar',\r\n    templateUrl: './selection-sidebar.component.html',\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\nexport class SelectionSidebarComponent {\r\n    @Input() opts: IMyOptions;\r\n    @Output() setTime: EventEmitter<void> = new EventEmitter<void>();\r\n}\r\n","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'angular-datepicker',\r\n    template: ''\r\n})\r\nexport class AngularMyDatePickerComponent {}\r\n","import { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { NgModule } from '@angular/core';\r\n\r\nimport { CalendarComponent } from './components/calendar/calendar.component';\r\nimport { SelectionBarComponent } from './components/selection-bar/selection-bar.component';\r\nimport { DayViewComponent } from './components/day-view/day-view.component';\r\nimport { MonthViewComponent } from './components/month-view/month-view.component';\r\nimport { YearViewComponent } from './components/year-view/year-view.component';\r\n\r\nimport { FarrisDatePickerDirective } from './farris-datepicker.input';\r\nimport { FarrisDatepickerComponent } from './farris-datepicker.component';\r\nimport { SelectionSidebarComponent } from './components/selection-sidebar/selection-sidebar.component';\r\nimport { AngularMyDatePickerComponent } from './AngularMyDatePicker.component';\r\nimport { TimePickerModule } from '@farris/ui-time-picker';\r\nimport { LocaleModule } from '@farris/ui-locale';\r\nimport { PopoverModule } from '@farris/ui-popover';\r\nimport { DateHelperModule } from '@farris/ui-common/date';\r\nimport { NotifyModule  } from '@farris/ui-notify';\r\nimport { FarrisCommonModule } from '@farris/ui-common';\r\n@NgModule({\r\n    imports: [\r\n        CommonModule,\r\n        FormsModule, \r\n        TimePickerModule,\r\n        LocaleModule,\r\n        FarrisCommonModule,\r\n        PopoverModule.forRoot(),\r\n        DateHelperModule.forRoot(),\r\n        NotifyModule.forRoot(),\r\n    ],\r\n    declarations: [\r\n        CalendarComponent,\r\n        SelectionSidebarComponent,\r\n        SelectionBarComponent,\r\n        DayViewComponent,\r\n        MonthViewComponent,\r\n        YearViewComponent,\r\n        FarrisDatepickerComponent,\r\n        FarrisDatePickerDirective,\r\n        AngularMyDatePickerComponent,\r\n    ],\r\n    entryComponents: [CalendarComponent],\r\n    exports: [\r\n        CalendarComponent,\r\n        SelectionBarComponent,\r\n        SelectionSidebarComponent,\r\n        DayViewComponent,\r\n        MonthViewComponent,\r\n        YearViewComponent,\r\n        FarrisDatepickerComponent,\r\n        FarrisDatePickerDirective\r\n    ]\r\n})\r\nexport class FarrisDatePickerModule {}\r\n"]}