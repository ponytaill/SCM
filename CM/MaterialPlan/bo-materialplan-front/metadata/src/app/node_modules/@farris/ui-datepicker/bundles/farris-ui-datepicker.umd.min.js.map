{"version":3,"sources":["node_modules/tslib/tslib.es6.js","ng://@farris/ui-datepicker/lib/enums/cal-toggle.enum.ts","ng://@farris/ui-datepicker/lib/enums/default-view.enum.ts","ng://@farris/ui-datepicker/lib/enums/key-code.enum.ts","ng://@farris/ui-datepicker/lib/enums/key-name.enum.ts","ng://@farris/ui-datepicker/lib/enums/month-id.enum.ts","ng://@farris/ui-datepicker/lib/enums/reset-date-type.enum.ts","ng://@farris/ui-datepicker/lib/enums/show-type.enum.ts","ng://@farris/ui-datepicker/lib/enums/year.enum.ts","ng://@farris/ui-datepicker/lib/services/farris-datepicker.config.service.ts","ng://@farris/ui-datepicker/lib/constants/constants.ts","ng://@farris/ui-datepicker/lib/services/farris-datepicker.locale.service.ts","ng://@farris/ui-datepicker/lib/services/farris-datepicker.util.service.ts","ng://@farris/ui-datepicker/lib/services/farris-datepicker.service.ts","ng://@farris/ui-datepicker/lib/interfaces/my-options.interface.ts","ng://@farris/ui-datepicker/lib/components/calendar/calendar.component.ts","ng://@farris/ui-datepicker/lib/components/selection-bar/selection-bar.component.ts","ng://@farris/ui-datepicker/lib/components/day-view/day-view.component.ts","ng://@farris/ui-datepicker/lib/components/month-view/month-view.component.ts","ng://@farris/ui-datepicker/lib/components/year-view/year-view.component.ts","ng://@farris/ui-datepicker/lib/farris-datepicker.input.ts","ng://@farris/ui-datepicker/lib/farris-datepicker.component.ts","ng://@farris/ui-datepicker/lib/components/selection-sidebar/selection-sidebar.component.ts","ng://@farris/ui-datepicker/lib/AngularMyDatePicker.component.ts","ng://@farris/ui-datepicker/lib/components/dynamic-view/dynamic-view.component.ts","ng://@farris/ui-datepicker/lib/dynamic-date-input/dynamic-date-input.component.ts","ng://@farris/ui-datepicker/lib/farris-datepicker.module.ts"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","this","__values","o","m","Symbol","iterator","next","value","done","__read","r","e","ar","push","error","Open","CloseByDateSel","CloseByCalBtn","CloseByOutClick","CloseByEsc","Date","Month","Year","enter","esc","space","leftArrow","upArrow","rightArrow","downArrow","tab","shift","prev","curr","both","singleDate","dateRange","all","noDate","noDateAndMonth","selectWeek","min","max","DefaultConfigService","getDefaultConfig","defaultConfig","Injectable","dayLabels","su","mo","tu","we","th","fr","sa","monthLabels","1","2","3","4","5","6","7","8","9","10","11","12","dateFormat","returnFormat","defaultView","DefaultView","showType","ShowType","firstDayOfWeek","satHighlight","sunHighlight","highlightDates","markCurrentDay","markCurrentMonth","markCurrentYear","monthSelector","yearSelector","disableHeaderButtons","showWeekNumbers","selectorHeight","selectorWidth","disableUntil","year","month","day","hour","minute","second","disableSince","disableDates","disableDateRanges","disableWeekends","disableWeekdays","enableDates","markDates","markWeekends","marked","color","closeSelectorOnDateSelect","closeSelectorOnDocumentClick","minYear","maxYear","focusInputOnDateSelect","moveFocusByArrowKeys","dateRangeDatesDelimiter","inputFieldValidation","stylesData","selector","styles","ariaLabelPrevMonth","ariaLabelNextMonth","shortcuts","weekText","D","DD","M","MM","MMM","YYYY","UNDER_LINE","SU","MO","TU","WE","TH","FR","SA","DEFAULT_LOCALE","EMPTY_STR","CLICK","KEYUP","BLUR","DISABLED","OPTIONS","DEFAULT_MONTH","OPTS","YEARS","VISIBLE_MONTH","SELECT_MONTH","SELECT_YEAR","PREV_VIEW_DISABLED","NEXT_VIEW_DISABLED","DATES","WEEK_DAYS","SELECTED_DATE","SELECTED_DATE_RANGE","MONTHS","DatepickerLocaleService","getLocaleOptions","locale","locales","EN_US","yearTxt","timeBtnText","dateBtnText","commitBtnText","placeholder","range","begin","end","message","101","dynamicLocale","setting","today","presentWeek","presentMonth","presentYear","previous","future","week","current","first","last","ZH_CN","ZH_CHT","UtilService","isDateValid","dateStr","options","isReturn","_dateStr","returnDate","resetDate","showTime","_st","formatStr","replace","substring","toLocaleLowerCase","indexOf","daysInMonth","isMonthStr","delimeters","match","split","timeStr","_timer","Number","substr","isNaN","undefined","test","df","includes","slice","dateValue","getDateValue","getNumberByValue","getMonthNumberByMonthName","date","isDisabledDate","isDateValidDateRange","dateRangeStr","dates","_a","beginDate","endDate","isInitializedDate","isDateSameOrEarlier","da","del","re","RegExp","ds","format","yearIndex","monthIndex","dayIndex","key","toLowerCase","nbr","parseDefaultMonth","monthString","monthTxt","monthNbr","dateMs","getTimeInMilliseconds","dayNbr","getDayNumber","dn","disableWeekdays_1","tslib_1.__values","disableWeekdays_1_1","wd","getWeekdayIndex","disableDates_1","disableDates_1_1","d","disableDateRanges_1","disableDateRanges_1_1","isMarkedDate","markedDates","markedDates_1","markedDates_1_1","md","_c","_d","isHighlightedDate","highlightDates_1","highlightDates_1_1","getWeekNumber","setDate","getDate","getDay","Math","round","getTime","getFullYear","getNowWeekTime","getMonth","isMonthDisabledByDisableUntil","isMonthDisabledByDisableSince","getDateModel","rangeDelimiter","singleDateModel","dateRangeModel","date$$1","jsDate","getDate2","formatted","formatDate","returnFormatted","epoc","getEpocTime","beginJsDate","beginEpoc","endJsDate","endEpoc","isRange","delete","String","preZero","delStr","index","getFormattedDate","model","val","isInitializedMonth","isInitializedYear","isDateEarlier","firstDate","secondDate","isDateSame","isDateRangeBeginOrEndSame","isDateInRange","now","weekDays","getKeyCodeFromEvent","event","keyCode","KeyName","KeyCode","getNearDate","minMilliseconds","maxMilliseconds","nowMilliseconds","disabledHours","currentDate","minHour","maxHour","res","disabledMinutes","_hour","maxMinute","minMinute","disabledSeconds","_minute","maxSecond","minSecond","getDateTypeString","dt","formatDynamicValue","fval","name","count","dateType","DatePickerService","parseOptions","opts","defaultOpts","keys","forEach","k","validate","valid","_dateRange","utilService","registerScrollEvent","fn","_mouseScrollHandle","document","addEventListener","removeMouseEvent","container","querySelector","removeEventListener","_mouseWheelHandle","appendSelector","elem","hasChildNodes","childNodes","el","removeChild","createElement","classList","add","body","appendChild","closest","preventDefault","getSelectorPosition","calendarRef","top","left","_selectorHeight","_selectorWidth","enableDynamic","showPresent","b","getBoundingClientRect","position","getSelectorDimension","offsetHeight","window","innerHeight","height","arrow","location","nativeElement","style","display","width","scrollTop","documentElement","CalendarComponent","getTimeStr","getHours","getMinutes","getSeconds","initialize","defaultMonth","selectorPos","inputValue","dc","cvc","rds","cbe","visibleMonth","visibleMonth_range","dayIdx","weekDayOpts","idx","getToday","selectedMonth","selectedMonth_range","monthRangeValue","_b","selectedDateRange","timeVlaue","_second","timeVlaue_range","endyear","weekNbr","selectedWeek","selectedDate","dateChanged","calendarViewChanged","rangeDateSelection","closedByEsc","setCalendarVisibleMonth","onMonthViewBtnClicked","onYearViewBtnClicked","resetDateValue","ResetDateType","resetMonthYearSelect","isSecondCalendar","selectMonth_range","selectYear_range","selectMonth","selectYear","selectTime","generateMonths","cdr","detectChanges","onMonthCellClicked","cell","mc","toSelectMonth","generateCalendar","onMonthCellKeyDown","getSourceRowAndColumnFromEvent","sourceRow","sourceCol","getTargetFocusRowAndColumn","moveFocus","targetRow","targetCol","focusCellElement","generateYears","onYearCellClicked","yc","toSelectYear","onYearCellKeyDown","months_range","months","row","j","disabled","currMonth","monthObj","setMonthViewHeaderBtnDisabledState","inputYear","y","years_range","years","flatten","findIndex","minMax","currYear","selected","yearObj","setYearViewHeaderBtnDisabledState","onPrevNavigateBtnClicked","setDateViewMonth","onNextNavigateBtnClicked","isNext","change","setMonth","onCloseSelector","onDayCellClicked","cmo","selectDate","dateObj","onDayCellKeyDown","onDayCellMouseEnter","_e","_f","w","_g","_h","_j","dates_range","_k","_l","_m","onDayCellMouseLeave","onMonthCellMouseEnter","item","onMonthCellMouseLeave","onYearCellMouseEnter","item_1","item_1_1","item_2","item_2_1","onYearCellMouseLeave","item_3","item_3_1","item_4","item_4_1","onWeekClicked","weekData","target","id","arr","col","rowCount","colCount","type","selectorEl","focus","isBeginDateInitialized","isEndDateInitialized","JSON","stringify","isBegin","_date","viewType","ViewType","isBeginMonthInitialized","isEndMonthInitialized","isBeginYearInitialized","isEndYearInitialized","monthStartIdx","setFullYear","sundayIdx","daysInPrevMonth","isCurrDay","MonthId","getWidth","hasShortCuts","getWeekday","notifyChange","monthStart","dInThisM","dInPrevM","currDay","markedDate","highlight","daysLeft","setDateViewHeaderBtnDisabledState","number","weekday","dpm","dnm","prevViewDisabled_range","nextViewDisabled_range","prevDobViewDisabled_range","nextDobViewDisabled_range","prevViewDisabled","nextViewDisabled","prevDobViewDisabled","nextDobViewDisabled","yp","yn","dpy","dny","onContainerClick","stopPropagation","onClickTimeBtn","beginIsInitializedDate","endIsInitializedDate","endmonth","onShowDynamicView","$event","showDynamicView","dynamicViewShow","emit","onShowDatePanel","getTimeValue","isDateRange","start","timeArr","nowDate","timeArr_range","onClickOkBtn","timeObj","timeObj_range","selectedDate_range","initializedDate","isInDisableRange","earlier","dateModel","onTodayClick","onDynamicOkClick","dynamicviewRef","text","formatValue","getValue","dynamicValueChanged","otherDate","setTime","targetDate","targetDateRange","onSelectCurrentWeek","dateHlp","getWeekDate","baselineDate","map","getYearWeek","onDynamicValueChanged","btnDynamicDisabled","Component","args","template","providers","encapsulation","ViewEncapsulation","None","Renderer2","ChangeDetectorRef","ViewChild","HostBinding","Output","renderer","_this","EventEmitter","scrollDiff","disabledHours2","disabledMinutes2","disabledSeconds2","SelectionBarComponent","ngOnChanges","changes","currentValue","prevNavigateBtnClicked","nextNavigateBtnClicked","onPrevDobNavigateBtnClicked","onNextDobNavigateBtnClicked","monthViewBtnClicked","yearViewBtnClicked","onTodayViewBtnClicked","todayViewBtnClicked","getFormateType","yIndex","Input","DayViewComponent","dayCellClicked","dayCellKeyDown","weekClicked","onMouseEnter","onMouseLeave","prevMonthId","currMonthId","nextMonthId","MonthViewComponent","monthCellClicked","monthCellKeyDown","isMonthInRange","isMonthSame","isMonthRangeBeginOrEndSame","YearViewComponent","ngOnInit","yearCellClicked","yearCellKeyDown","onPrevOrNextYearCellClicked","prevCellClicked","nextCellClicked","NGX_DP_VALUE_ACCESSOR","provide","NG_VALUE_ACCESSOR","useExisting","forwardRef","FarrisDatePickerDirective","multi","NGX_DP_VALIDATORS","NG_VALIDATORS","onKeyUp","ignoreKeyPress","closeSelector","CalToggle","emitInputFieldChanged","onBlur","inputText","clearDate","onChangeCb","onTouchedCb","onClick","evt","preventClose","cRef","contains","setLocaleOptions","dm","defMonth","ngOnDestroy","closeCalendar","localeService","writeValue","setInputValue","instance","registerOnChange","registerOnTouched","setDisabledState","isDisabled","setProperty","c","openCalendar","vcRef","createComponent","cfr","resolveComponentFactory","close","focusToInput","updateModel","emitDateChanged","emitCalendarChanged","emitRangeDateSelection","emitCalendarToggle","toggleCalendar","onClickWrapper","setStyle","flag_1","reason","remove","hostView","inputFieldChanged","calendarToggle","jsDateToMyDate","Directive","exportAs","ViewContainerRef","ComponentFactoryResolver","ElementRef","NgZone","HostListener","config","zone","ev","FARRIS_DP_VALUE_ACCESSOR","FarrisDatepickerComponent","defineProperty","_dateFormat","_this_1","formArr","_timeFormat","_mm","find","_minDate","toString","isValid","_maxDate","dateFrom","_beginValue","dateTo","returnType","_initFinished","setValue","_endValue","_value","v","_ngControl","injector","get","NgControl","initPlaceholder","mergeDateOptions","datePicekrService","dateOpts","localDateOpts","localeConfig","beginPlaceholder","endPlaceholder","buildOptions","timeFormat","isFirstChange","inputs_1","readonly","firstChange","useDefault","setDefaultValue","ngAfterViewInit","control","_updateOn","updateOn","setTimeout","clearTimeout","overLayService","destory","clearIcon","visibility","isActiveTip","_runblur","totalFocus","transform","_isValid","_valueChangeEmitted","realDate","onNgModelChange","onModelTouched","editable","_mousedownEvent","blur","onFocus","registerMouseDownHandle","onInputClick","listen","className","dateInput","nowValue","clearDynamicDate","_SELECT_DATE_","_realRangeValue","_realValue","onDateChanged","onModelChange","clear","onSingleInputNgModelChange","realdate","emitValueChange","tmpArr","beginValueChange","endValueChange","cmpRef","valueChange","_onModelChange","getRealReturnFormatted","realValue","observers","whenValueChangedThenCloseSelectorPanel","dtService","formatTo","onDateRangeInputBlur","msg","notifySer","warning","alert","subscribe","dynamicValue","singleValue","dynamicViewChanged","registerMouseEvent","onlyTopWindow","changeDetectorRef","childElementCount","beginFocus","endFocus","closeCalendarHandler","flag_2","valChangeParams","formatedValue","nd","MIN_DATE","minDate","differenceInSeconds","maxDate","MAX_DATE","_showTime","disableDateRangesBegin","disableDateRangesEnd","markDatesColor","isMarkWeekends","markWeekendsColor","dynamicText","dynamicValueChange","previousMaxDays","futureMaxDays","hourStep","minuteStep","secondStep","originTime","str","ignorRange","convert","_getValue","fmt","time","h","yearValue","tmpDate","tmpBegin","tmpEnd","tmpBeginDate","tmpEndDate","_fmt","_tmpDate","parse","formattedVal","_tmpDateArr","beginStr","endStr","markForCheck","updateValue","getValueByType","isDate","onPrevFocus","PrevFocus","onNextFocus","NextFocus","_convert2dateString","t_1","checkSpaceReg","objDate","_r","_isValid2","isValided","seconds","LocaleService","Injector","read","defaultConfigService","cls","showClear","obj","DateTimeHelperService","NotifyService","_applicationRef","ApplicationRef","OverLayHiddenService","SelectionSidebarComponent","AngularMyDatePickerComponent","DynamicViewComponent","_data","onListItemFormControlClick","lbl","click","previous_dateType","previous_days","future_dateType","future_days","present_first_dateType","present_last_dateType","cd","period","isFirstDay","isLastDay","setDays","typ","days","checkMaxDays","tye","onNumberKeydown","DynamicDateInputComponent","inject","inputClick","tabKeydown","FarrisDatePickerModule","NgModule","imports","CommonModule","FormsModule","TimePickerModule","LocaleModule","FarrisCommonModule","PopoverModule","forRoot","DateHelperModule","NotifyModule","declarations","entryComponents","exports"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","export enum CalToggle {\r\n    Open = 1,\r\n    CloseByDateSel = 2,\r\n    CloseByCalBtn = 3,\r\n    CloseByOutClick = 4,\r\n    CloseByEsc = 5\r\n}\r\n","export enum DefaultView {\r\n    Date = 1,\r\n    Month = 2,\r\n    Year = 3\r\n}\r\n","/**\r\n * Event key codes\r\n */\r\nexport enum KeyCode {\r\n    enter = 13,\r\n    esc = 27,\r\n    space = 32,\r\n    leftArrow = 37,\r\n    upArrow = 38,\r\n    rightArrow = 39,\r\n    downArrow = 40,\r\n    tab = 9,\r\n    shift = 16\r\n}\r\n","/**\r\n * Event key names\r\n */\r\nexport enum KeyName {\r\n    enter = 'Enter',\r\n    esc = 'Escape',\r\n    space = ' ',\r\n    leftArrow = 'ArrowLeft',\r\n    upArrow = 'ArrowUp',\r\n    rightArrow = 'ArrowRight',\r\n    downArrow = 'ArrowDown',\r\n    tab = 'Tab',\r\n    shift = 'Shift'\r\n}\r\n","export enum MonthId {\r\n    prev = 1,\r\n    curr = 2,\r\n    next = 3\r\n}\r\n","export enum ResetDateType {\r\n    both = 0,\r\n    singleDate = 1,\r\n    dateRange = 2\r\n}\r\n","export enum ShowType {\r\n    all = 1,\r\n    noDate = 2,\r\n    noDateAndMonth = 3,\r\n    selectWeek = 4\r\n}\r\n","export enum Year {\r\n    min = 1000,\r\n    max = 9999\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { IMyOptions } from '../interfaces/public-api';\r\nimport { Year, DefaultView, ShowType } from '../enums/public-api';\r\n\r\n@Injectable()\r\nexport class DefaultConfigService {\r\n    private defaultConfig: IMyOptions = {\r\n        dateRange: false,\r\n        dayLabels: {\r\n            su: 'Sun',\r\n            mo: 'Mon',\r\n            tu: 'Tue',\r\n            we: 'Wed',\r\n            th: 'Thu',\r\n            fr: 'Fri',\r\n            sa: 'Sat'\r\n        },\r\n        monthLabels: {\r\n            1: 'Jan',\r\n            2: 'Feb',\r\n            3: 'Mar',\r\n            4: 'Apr',\r\n            5: 'May',\r\n            6: 'Jun',\r\n            7: 'Jul',\r\n            8: 'Aug',\r\n            9: 'Sep',\r\n            10: 'Oct',\r\n            11: 'Nov',\r\n            12: 'Dec'\r\n        },\r\n        dateFormat: 'yyyy-MM-dd',\r\n        returnFormat: 'yyyy-MM-dd',\r\n        defaultView: DefaultView.Date,\r\n        showType: ShowType.all,\r\n        firstDayOfWeek: 'mo',\r\n        satHighlight: false,\r\n        sunHighlight: false,\r\n        highlightDates: [],\r\n        markCurrentDay: true,\r\n        markCurrentMonth: true,\r\n        markCurrentYear: true,\r\n        monthSelector: true,\r\n        yearSelector: true,\r\n        disableHeaderButtons: true,\r\n        showWeekNumbers: false,\r\n        selectorHeight: '295px',\r\n        selectorWidth: '287px',\r\n        disableUntil: { year: 0, month: 0, day: 0 ,hour:0,minute:0,second:0},\r\n        disableSince: { year: 0, month: 0, day: 0 ,hour:0,minute:0,second:0},\r\n        disableDates: [],\r\n        disableDateRanges: [],\r\n        disableWeekends: false,\r\n        disableWeekdays: [],\r\n        enableDates: [],\r\n        markDates: [],\r\n        markWeekends: { marked: false, color: '' },\r\n        closeSelectorOnDateSelect: true,\r\n        closeSelectorOnDocumentClick: true,\r\n        minYear: Year.min,\r\n        maxYear: Year.max,\r\n        focusInputOnDateSelect: true,\r\n        moveFocusByArrowKeys: true,\r\n        dateRangeDatesDelimiter: ' - ',\r\n        inputFieldValidation: true,\r\n        stylesData: { selector: '', styles: '' },\r\n        ariaLabelPrevMonth: 'Previous Month',\r\n        ariaLabelNextMonth: 'Next Month',\r\n        shortcuts: [],\r\n        weekText: 'Week'\r\n    };\r\n\r\n    public getDefaultConfig() {\r\n        return this.defaultConfig;\r\n    }\r\n}\r\n","/**\r\n * Constants\r\n */\r\nconst D = 'd';\r\nconst DD = 'dd';\r\nconst M = 'M';\r\nconst MM = 'MM';\r\nconst MMM = 'MMM';\r\nconst Y = 'y';\r\nconst YYYY = 'yyyy';\r\n\r\nconst DATE_ROW_COUNT = 5;\r\nconst DATE_COL_COUNT = 6;\r\nconst MONTH_ROW_COUNT = 3;\r\nconst MONTH_COL_COUNT = 2;\r\nconst YEAR_ROW_COUNT = 4;\r\nconst YEAR_COL_COUNT = 4;\r\n\r\nconst DOT = '.';\r\nconst UNDER_LINE = '_';\r\n\r\nconst SU = 'su';\r\nconst MO = 'mo';\r\nconst TU = 'tu';\r\nconst WE = 'we';\r\nconst TH = 'th';\r\nconst FR = 'fr';\r\nconst SA = 'sa';\r\n\r\nconst DEFAULT_LOCALE = 'ZH_CN';\r\n\r\nconst ZERO_STR = '0';\r\nconst EMPTY_STR = '';\r\n\r\nconst CLICK = 'click';\r\nconst KEYUP = 'keyup';\r\nconst BLUR = 'blur';\r\nconst DISABLED = 'disabled';\r\nconst BODY = 'body';\r\nconst VALUE = 'value';\r\nconst OPTIONS = 'options';\r\nconst DEFAULT_MONTH = 'defaultMonth';\r\nconst LOCALE = 'locale';\r\nconst OBJECT = 'object';\r\nconst PX = 'px';\r\nconst STYLE = 'style';\r\n\r\nconst OPTS = 'opts';\r\nconst YEARS = 'years';\r\nconst VISIBLE_MONTH = 'visibleMonth';\r\nconst SELECT_MONTH = 'selectMonth';\r\nconst SELECT_YEAR = 'selectYear';\r\nconst PREV_VIEW_DISABLED = 'prevViewDisabled';\r\nconst NEXT_VIEW_DISABLED = 'nextViewDisabled';\r\nconst DATES = 'dates';\r\nconst WEEK_DAYS = 'weekDays';\r\nconst SELECTED_DATE = 'selectedDate';\r\nconst SELECTED_DATE_RANGE = 'selectedDateRange';\r\nconst MONTHS = 'months';\r\n\r\nconst PREVENT_CLOSE_TIMEOUT = 50;\r\n\r\nexport {\r\n    D,\r\n    DD,\r\n    M,\r\n    MM,\r\n    MMM,\r\n    Y,\r\n    YYYY,\r\n    DATE_ROW_COUNT,\r\n    DATE_COL_COUNT,\r\n    MONTH_ROW_COUNT,\r\n    MONTH_COL_COUNT,\r\n    YEAR_ROW_COUNT,\r\n    YEAR_COL_COUNT,\r\n    DOT,\r\n    UNDER_LINE,\r\n    SU,\r\n    MO,\r\n    TU,\r\n    WE,\r\n    TH,\r\n    FR,\r\n    SA,\r\n    DEFAULT_LOCALE,\r\n    ZERO_STR,\r\n    EMPTY_STR,\r\n    CLICK,\r\n    KEYUP,\r\n    BLUR,\r\n    DISABLED,\r\n    BODY,\r\n    VALUE,\r\n    OPTIONS,\r\n    DEFAULT_MONTH,\r\n    LOCALE,\r\n    OBJECT,\r\n    PX,\r\n    STYLE,\r\n    OPTS,\r\n    YEARS,\r\n    VISIBLE_MONTH,\r\n    SELECT_MONTH,\r\n    SELECT_YEAR,\r\n    PREV_VIEW_DISABLED,\r\n    NEXT_VIEW_DISABLED,\r\n    DATES,\r\n    WEEK_DAYS,\r\n    SELECTED_DATE,\r\n    SELECTED_DATE_RANGE,\r\n    MONTHS,\r\n    PREVENT_CLOSE_TIMEOUT\r\n};\r\n","import { Injectable } from '@angular/core';\r\nimport { IMyLocales, IMyOptions } from '../interfaces/public-api';\r\n\r\nimport { DEFAULT_LOCALE } from '../constants/constants';\r\n\r\n@Injectable()\r\nexport class DatepickerLocaleService {\r\n    private locales: IMyLocales = {\r\n        'EN_US': {\r\n            dayLabels: { su: 'Sun', mo: 'Mon', tu: 'Tue', we: 'Wed', th: 'Thu', fr: 'Fri', sa: 'Sat' },\r\n            monthLabels: {\r\n                1: 'Jan',\r\n                2: 'Feb',\r\n                3: 'Mar',\r\n                4: 'Apr',\r\n                5: 'May',\r\n                6: 'Jun',\r\n                7: 'Jul',\r\n                8: 'Aug',\r\n                9: 'Sep',\r\n                10: 'Oct',\r\n                11: 'Nov',\r\n                12: 'Dec'\r\n            },\r\n            dateFormat: 'MM/dd/yyyy',\r\n            returnFormat: 'MM/dd/yyyy',\r\n            firstDayOfWeek: 'mo',\r\n            sunHighlight: false,\r\n            yearTxt: '',\r\n            timeBtnText: 'Select Time',\r\n            dateBtnText: 'Select Date',\r\n            commitBtnText: 'OK',\r\n            weekText: 'Week',\r\n            placeholder: 'Please select a date',\r\n            range: {\r\n                begin: 'Please select a begin date',\r\n                end: 'Please select a end date'\r\n            },\r\n            message: {\r\n                101: 'The end time must not be earlier than the start time.'\r\n            },\r\n            dynamicLocale: {\r\n                setting: 'Dynamic Date',\r\n                today: 'Today',\r\n                presentWeek: 'Current Week',\r\n                presentMonth: 'Current Month',\r\n                presentYear: 'Current Year',\r\n                previous: 'Previous',\r\n                future: 'Future',\r\n                day: 'Day',\r\n                month: 'Month',\r\n                year: 'Year',\r\n                week: 'Week',\r\n                current: 'Current',\r\n                first: 'First Day',\r\n                last: 'Last Day'\r\n            }\r\n        },\r\n        'ZH_CN': {\r\n            dayLabels: { su: '', mo: '', tu: '', we: '', th: '', fr: '', sa: '' },\r\n            monthLabels: {\r\n                1: '',\r\n                2: '',\r\n                3: '',\r\n                4: '',\r\n                5: '',\r\n                6: '',\r\n                7: '',\r\n                8: '',\r\n                9: '',\r\n                10: '',\r\n                11: '',\r\n                12: ''\r\n            },\r\n            dateFormat: 'yyyy-MM-dd',\r\n            returnFormat: 'yyyy-MM-dd',\r\n            firstDayOfWeek: 'mo',\r\n            sunHighlight: false,\r\n            yearTxt: '',\r\n            timeBtnText: '',\r\n            dateBtnText: '',\r\n            commitBtnText: '',\r\n            weekText: '',\r\n            placeholder: '',\r\n            range: {\r\n                begin: '',\r\n                end: ''\r\n            },\r\n            message: {\r\n                101: ''\r\n            },\r\n            dynamicLocale: {\r\n                setting: '',\r\n                today: '',\r\n                presentWeek: '',\r\n                presentMonth: '',\r\n                presentYear: '',\r\n                previous: '',\r\n                future: '',\r\n                day: '',\r\n                month: '',\r\n                year: '',\r\n                week: '',\r\n                current: '',\r\n                first: ' 1 ',\r\n                last: ' 1 '\r\n            }\r\n        },\r\n        'ZH_CHT': {\r\n            dayLabels: { su: '', mo: '', tu: '', we: '', th: '', fr: '', sa: '' },\r\n            monthLabels: {\r\n                1: '',\r\n                2: '',\r\n                3: '',\r\n                4: '',\r\n                5: '',\r\n                6: '',\r\n                7: '',\r\n                8: '',\r\n                9: '',\r\n                10: '',\r\n                11: '',\r\n                12: ''\r\n            },\r\n            dateFormat: 'yyyy-MM-dd',\r\n            returnFormat: 'yyyy-MM-dd',\r\n            firstDayOfWeek: 'mo',\r\n            sunHighlight: false,\r\n            yearTxt: '',\r\n            timeBtnText: '',\r\n            dateBtnText: '',\r\n            commitBtnText: '',\r\n            weekText: '',\r\n            placeholder: '',\r\n            range: {\r\n                begin: '',\r\n                end: ''\r\n            },\r\n            message: {\r\n                101: ''\r\n            },\r\n            dynamicLocale: {\r\n                setting: '',\r\n                today: '',\r\n                presentWeek: '',\r\n                presentMonth: '',\r\n                presentYear: '',\r\n                previous: '',\r\n                future: '',\r\n                day: '',\r\n                month: '',\r\n                year: '',\r\n                week: '',\r\n                current: '',\r\n                first: ' 1 ',\r\n                last: ' 1 '\r\n            }\r\n        } // ,\r\n        // he: {\r\n        //     dayLabels: { su: '', mo: '', tu: '', we: '', th: '', fr: '', sa: '' },\r\n        //     monthLabels: {\r\n        //         1: '',\r\n        //         2: '',\r\n        //         3: '',\r\n        //         4: '',\r\n        //         5: '',\r\n        //         6: '',\r\n        //         7: '',\r\n        //         8: '',\r\n        //         9: '',\r\n        //         10: '',\r\n        //         11: '',\r\n        //         12: ''\r\n        //     },\r\n        //     dateFormat: 'dd/mm/yyyy',\r\n        //     firstDayOfWeek: 'su',\r\n        //     sunHighlight: false\r\n        // },\r\n        // ja: {\r\n        //     dayLabels: { su: '', mo: '', tu: '', we: '', th: '', fr: '', sa: '' },\r\n        //     monthLabels: {\r\n        //         1: '',\r\n        //         2: '',\r\n        //         3: '',\r\n        //         4: '',\r\n        //         5: '',\r\n        //         6: '',\r\n        //         7: '',\r\n        //         8: '',\r\n        //         9: '',\r\n        //         10: '',\r\n        //         11: '',\r\n        //         12: ''\r\n        //     },\r\n        //     dateFormat: 'yyyy.mm.dd',\r\n        //     sunHighlight: false\r\n        // },\r\n        // fr: {\r\n        //     dayLabels: { su: 'Dim', mo: 'Lun', tu: 'Mar', we: 'Mer', th: 'Jeu', fr: 'Ven', sa: 'Sam' },\r\n        //     monthLabels: {\r\n        //         1: 'Jan',\r\n        //         2: 'Fv',\r\n        //         3: 'Mar',\r\n        //         4: 'Avr',\r\n        //         5: 'Mai',\r\n        //         6: 'Juin',\r\n        //         7: 'Juil',\r\n        //         8: 'Ao',\r\n        //         9: 'Sep',\r\n        //         10: 'Oct',\r\n        //         11: 'Nov',\r\n        //         12: 'Dc'\r\n        //     },\r\n        //     dateFormat: 'dd/mm/yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // 'fr-ch': {\r\n        //     dayLabels: { su: 'Dim', mo: 'Lun', tu: 'Mar', we: 'Mer', th: 'Jeu', fr: 'Ven', sa: 'Sam' },\r\n        //     monthLabels: {\r\n        //         1: 'Jan',\r\n        //         2: 'Fv',\r\n        //         3: 'Mar',\r\n        //         4: 'Avr',\r\n        //         5: 'Mai',\r\n        //         6: 'Juin',\r\n        //         7: 'Juil',\r\n        //         8: 'Ao',\r\n        //         9: 'Sep',\r\n        //         10: 'Oct',\r\n        //         11: 'Nov',\r\n        //         12: 'Dc'\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // fi: {\r\n        //     dayLabels: { su: 'Su', mo: 'Ma', tu: 'Ti', we: 'Ke', th: 'To', fr: 'Pe', sa: 'La' },\r\n        //     monthLabels: {\r\n        //         1: 'Tam',\r\n        //         2: 'Hel',\r\n        //         3: 'Maa',\r\n        //         4: 'Huh',\r\n        //         5: 'Tou',\r\n        //         6: 'Kes',\r\n        //         7: 'Hei',\r\n        //         8: 'Elo',\r\n        //         9: 'Syy',\r\n        //         10: 'Lok',\r\n        //         11: 'Mar',\r\n        //         12: 'Jou'\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // es: {\r\n        //     dayLabels: { su: 'Do', mo: 'Lu', tu: 'Ma', we: 'Mi', th: 'Ju', fr: 'Vi', sa: 'Sa' },\r\n        //     monthLabels: {\r\n        //         1: 'Ene',\r\n        //         2: 'Feb',\r\n        //         3: 'Mar',\r\n        //         4: 'Abr',\r\n        //         5: 'May',\r\n        //         6: 'Jun',\r\n        //         7: 'Jul',\r\n        //         8: 'Ago',\r\n        //         9: 'Sep',\r\n        //         10: 'Oct',\r\n        //         11: 'Nov',\r\n        //         12: 'Dic'\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // hu: {\r\n        //     dayLabels: { su: 'Vas', mo: 'Ht', tu: 'Kedd', we: 'Sze', th: 'Cs', fr: 'Pn', sa: 'Szo' },\r\n        //     monthLabels: {\r\n        //         1: 'Jan',\r\n        //         2: 'Feb',\r\n        //         3: 'Mr',\r\n        //         4: 'pr',\r\n        //         5: 'Mj',\r\n        //         6: 'Jn',\r\n        //         7: 'Jl',\r\n        //         8: 'Aug',\r\n        //         9: 'Szep',\r\n        //         10: 'Okt',\r\n        //         11: 'Nov',\r\n        //         12: 'Dec'\r\n        //     },\r\n        //     dateFormat: 'yyyy-mm-dd',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // sv: {\r\n        //     dayLabels: { su: 'Sn', mo: 'Mn', tu: 'Tis', we: 'Ons', th: 'Tor', fr: 'Fre', sa: 'Lr' },\r\n        //     monthLabels: {\r\n        //         1: 'Jan',\r\n        //         2: 'Feb',\r\n        //         3: 'Mar',\r\n        //         4: 'Apr',\r\n        //         5: 'Maj',\r\n        //         6: 'Jun',\r\n        //         7: 'Jul',\r\n        //         8: 'Aug',\r\n        //         9: 'Sep',\r\n        //         10: 'Okt',\r\n        //         11: 'Nov',\r\n        //         12: 'Dec'\r\n        //     },\r\n        //     dateFormat: 'yyyy-mm-dd',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // nl: {\r\n        //     dayLabels: { su: 'Zon', mo: 'Maa', tu: 'Din', we: 'Woe', th: 'Don', fr: 'Vri', sa: 'Zat' },\r\n        //     monthLabels: {\r\n        //         1: 'Jan',\r\n        //         2: 'Feb',\r\n        //         3: 'Mar',\r\n        //         4: 'Apr',\r\n        //         5: 'Mei',\r\n        //         6: 'Jun',\r\n        //         7: 'Jul',\r\n        //         8: 'Aug',\r\n        //         9: 'Sep',\r\n        //         10: 'Okt',\r\n        //         11: 'Nov',\r\n        //         12: 'Dec'\r\n        //     },\r\n        //     dateFormat: 'dd-mm-yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // ru: {\r\n        //     dayLabels: { su: '', mo: '', tu: '', we: '', th: '', fr: '', sa: '' },\r\n        //     monthLabels: {\r\n        //         1: '',\r\n        //         2: '',\r\n        //         3: '',\r\n        //         4: '',\r\n        //         5: '',\r\n        //         6: '',\r\n        //         7: '',\r\n        //         8: '',\r\n        //         9: '',\r\n        //         10: '',\r\n        //         11: '',\r\n        //         12: ''\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // uk: {\r\n        //     dayLabels: { su: '', mo: '', tu: '', we: '', th: '', fr: '', sa: '' },\r\n        //     monthLabels: {\r\n        //         1: '',\r\n        //         2: '',\r\n        //         3: '',\r\n        //         4: '',\r\n        //         5: '',\r\n        //         6: '',\r\n        //         7: '',\r\n        //         8: '',\r\n        //         9: '',\r\n        //         10: '',\r\n        //         11: '',\r\n        //         12: ''\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // no: {\r\n        //     dayLabels: { su: 'Sn', mo: 'Man', tu: 'Tir', we: 'Ons', th: 'Tor', fr: 'Fre', sa: 'Lr' },\r\n        //     monthLabels: {\r\n        //         1: 'Jan',\r\n        //         2: 'Feb',\r\n        //         3: 'Mar',\r\n        //         4: 'Apr',\r\n        //         5: 'Mai',\r\n        //         6: 'Jun',\r\n        //         7: 'Jul',\r\n        //         8: 'Aug',\r\n        //         9: 'Sep',\r\n        //         10: 'Okt',\r\n        //         11: 'Nov',\r\n        //         12: 'Des'\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // tr: {\r\n        //     dayLabels: { su: 'Paz', mo: 'Pzt', tu: 'Sal', we: 'ar', th: 'Per', fr: 'Cum', sa: 'Cmt' },\r\n        //     monthLabels: {\r\n        //         1: 'Oca',\r\n        //         2: 'ub',\r\n        //         3: 'Mar',\r\n        //         4: 'Nis',\r\n        //         5: 'May',\r\n        //         6: 'Haz',\r\n        //         7: 'Tem',\r\n        //         8: 'Au',\r\n        //         9: 'Eyl',\r\n        //         10: 'Eki',\r\n        //         11: 'Kas',\r\n        //         12: 'Ara'\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // 'pt-br': {\r\n        //     dayLabels: { su: 'Dom', mo: 'Seg', tu: 'Ter', we: 'Qua', th: 'Qui', fr: 'Sex', sa: 'Sab' },\r\n        //     monthLabels: {\r\n        //         1: 'Jan',\r\n        //         2: 'Fev',\r\n        //         3: 'Mar',\r\n        //         4: 'Abr',\r\n        //         5: 'Mai',\r\n        //         6: 'Jun',\r\n        //         7: 'Jul',\r\n        //         8: 'Ago',\r\n        //         9: 'Set',\r\n        //         10: 'Out',\r\n        //         11: 'Nov',\r\n        //         12: 'Dez'\r\n        //     },\r\n        //     dateFormat: 'dd/mm/yyyy',\r\n        //     firstDayOfWeek: 'su',\r\n        //     sunHighlight: false\r\n        // },\r\n        // de: {\r\n        //     dayLabels: { su: 'So', mo: 'Mo', tu: 'Di', we: 'Mi', th: 'Do', fr: 'Fr', sa: 'Sa' },\r\n        //     monthLabels: {\r\n        //         1: 'Jan',\r\n        //         2: 'Feb',\r\n        //         3: 'Mr',\r\n        //         4: 'Apr',\r\n        //         5: 'Mai',\r\n        //         6: 'Jun',\r\n        //         7: 'Jul',\r\n        //         8: 'Aug',\r\n        //         9: 'Sep',\r\n        //         10: 'Okt',\r\n        //         11: 'Nov',\r\n        //         12: 'Dez'\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // 'de-ch': {\r\n        //     dayLabels: { su: 'So', mo: 'Mo', tu: 'Di', we: 'Mi', th: 'Do', fr: 'Fr', sa: 'Sa' },\r\n        //     monthLabels: {\r\n        //         1: 'Jan',\r\n        //         2: 'Feb',\r\n        //         3: 'Mr',\r\n        //         4: 'Apr',\r\n        //         5: 'Mai',\r\n        //         6: 'Jun',\r\n        //         7: 'Jul',\r\n        //         8: 'Aug',\r\n        //         9: 'Sep',\r\n        //         10: 'Okt',\r\n        //         11: 'Nov',\r\n        //         12: 'Dez'\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // it: {\r\n        //     dayLabels: { su: 'Dom', mo: 'Lun', tu: 'Mar', we: 'Mer', th: 'Gio', fr: 'Ven', sa: 'Sab' },\r\n        //     monthLabels: {\r\n        //         1: 'Gen',\r\n        //         2: 'Feb',\r\n        //         3: 'Mar',\r\n        //         4: 'Apr',\r\n        //         5: 'Mag',\r\n        //         6: 'Giu',\r\n        //         7: 'Lug',\r\n        //         8: 'Ago',\r\n        //         9: 'Set',\r\n        //         10: 'Ott',\r\n        //         11: 'Nov',\r\n        //         12: 'Dic'\r\n        //     },\r\n        //     dateFormat: 'dd/mm/yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // 'it-ch': {\r\n        //     dayLabels: { su: 'Dom', mo: 'Lun', tu: 'Mar', we: 'Mer', th: 'Gio', fr: 'Ven', sa: 'Sab' },\r\n        //     monthLabels: {\r\n        //         1: 'Gen',\r\n        //         2: 'Feb',\r\n        //         3: 'Mar',\r\n        //         4: 'Apr',\r\n        //         5: 'Mag',\r\n        //         6: 'Giu',\r\n        //         7: 'Lug',\r\n        //         8: 'Ago',\r\n        //         9: 'Set',\r\n        //         10: 'Ott',\r\n        //         11: 'Nov',\r\n        //         12: 'Dic'\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // pl: {\r\n        //     dayLabels: { su: 'Nie', mo: 'Pon', tu: 'Wto', we: 'ro', th: 'Czw', fr: 'Pi', sa: 'Sob' },\r\n        //     monthLabels: {\r\n        //         1: 'Sty',\r\n        //         2: 'Lut',\r\n        //         3: 'Mar',\r\n        //         4: 'Kwi',\r\n        //         5: 'Maj',\r\n        //         6: 'Cze',\r\n        //         7: 'Lip',\r\n        //         8: 'Sie',\r\n        //         9: 'Wrz',\r\n        //         10: 'Pa',\r\n        //         11: 'Lis',\r\n        //         12: 'Gru'\r\n        //     },\r\n        //     dateFormat: 'yyyy-mm-dd',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // my: {\r\n        //     dayLabels: {\r\n        //         su: '',\r\n        //         mo: '',\r\n        //         tu: '',\r\n        //         we: '',\r\n        //         th: '',\r\n        //         fr: '',\r\n        //         sa: ''\r\n        //     },\r\n        //     monthLabels: {\r\n        //         1: '',\r\n        //         2: '',\r\n        //         3: '',\r\n        //         4: '',\r\n        //         5: '',\r\n        //         6: '',\r\n        //         7: '',\r\n        //         8: '',\r\n        //         9: '',\r\n        //         10: '',\r\n        //         11: '',\r\n        //         12: ''\r\n        //     },\r\n        //     dateFormat: 'yyyy-mm-dd',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // sk: {\r\n        //     dayLabels: { su: 'Ne', mo: 'Po', tu: 'Ut', we: 'St', th: 't', fr: 'Pi', sa: 'So' },\r\n        //     monthLabels: {\r\n        //         1: 'Jan',\r\n        //         2: 'Feb',\r\n        //         3: 'Mar',\r\n        //         4: 'Apr',\r\n        //         5: 'Mj',\r\n        //         6: 'Jn',\r\n        //         7: 'Jl',\r\n        //         8: 'Aug',\r\n        //         9: 'Sep',\r\n        //         10: 'Okt',\r\n        //         11: 'Nov',\r\n        //         12: 'Dec'\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // sl: {\r\n        //     dayLabels: { su: 'Ned', mo: 'Pon', tu: 'Tor', we: 'Sre', th: 'et', fr: 'Pet', sa: 'Sob' },\r\n        //     monthLabels: {\r\n        //         1: 'Jan',\r\n        //         2: 'Feb',\r\n        //         3: 'Mar',\r\n        //         4: 'Apr',\r\n        //         5: 'Maj',\r\n        //         6: 'Jun',\r\n        //         7: 'Jul',\r\n        //         8: 'Avg',\r\n        //         9: 'Sep',\r\n        //         10: 'Okt',\r\n        //         11: 'Nov',\r\n        //         12: 'Dec'\r\n        //     },\r\n        //     dateFormat: 'dd. mm. yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // ro: {\r\n        //     dayLabels: { su: 'du', mo: 'lu', tu: 'ma', we: 'mi', th: 'jo', fr: 'vi', sa: 'sa' },\r\n        //     monthLabels: {\r\n        //         1: 'ian',\r\n        //         2: 'feb',\r\n        //         3: 'mart',\r\n        //         4: 'apr',\r\n        //         5: 'mai',\r\n        //         6: 'iun',\r\n        //         7: 'iul',\r\n        //         8: 'aug',\r\n        //         9: 'sept',\r\n        //         10: 'oct',\r\n        //         11: 'nov',\r\n        //         12: 'dec'\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // ca: {\r\n        //     dayLabels: { su: 'dg', mo: 'dl', tu: 'dt', we: 'dc', th: 'dj', fr: 'dv', sa: 'ds' },\r\n        //     monthLabels: {\r\n        //         1: 'Gen',\r\n        //         2: 'Febr',\r\n        //         3: 'Mar',\r\n        //         4: 'Abr',\r\n        //         5: 'Maig',\r\n        //         6: 'Juny',\r\n        //         7: 'Jul',\r\n        //         8: 'Ag',\r\n        //         9: 'Set',\r\n        //         10: 'Oct',\r\n        //         11: 'Nov',\r\n        //         12: 'Des'\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // id: {\r\n        //     dayLabels: { su: 'Min', mo: 'Sen', tu: 'Sel', we: 'Rab', th: 'Kam', fr: 'Jum', sa: 'Sab' },\r\n        //     monthLabels: {\r\n        //         1: 'Jan',\r\n        //         2: 'Feb',\r\n        //         3: 'Mar',\r\n        //         4: 'Apr',\r\n        //         5: 'Mei',\r\n        //         6: 'Jun',\r\n        //         7: 'Jul',\r\n        //         8: 'Ags',\r\n        //         9: 'Sep',\r\n        //         10: 'Okt',\r\n        //         11: 'Nov',\r\n        //         12: 'Des'\r\n        //     },\r\n        //     dateFormat: 'dd-mm-yyyy',\r\n        //     firstDayOfWeek: 'su',\r\n        //     sunHighlight: false\r\n        // },\r\n        // 'en-au': {\r\n        //     dayLabels: { su: 'Sun', mo: 'Mon', tu: 'Tue', we: 'Wed', th: 'Thu', fr: 'Fri', sa: 'Sat' },\r\n        //     monthLabels: {\r\n        //         1: 'Jan',\r\n        //         2: 'Feb',\r\n        //         3: 'Mar',\r\n        //         4: 'Apr',\r\n        //         5: 'May',\r\n        //         6: 'Jun',\r\n        //         7: 'Jul',\r\n        //         8: 'Aug',\r\n        //         9: 'Sep',\r\n        //         10: 'Oct',\r\n        //         11: 'Nov',\r\n        //         12: 'Dec'\r\n        //     },\r\n        //     dateFormat: 'dd/mm/yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // 'am-et': {\r\n        //     dayLabels: { su: '', mo: '', tu: '', we: '', th: '', fr: '', sa: '' },\r\n        //     monthLabels: {\r\n        //         1: '',\r\n        //         2: '',\r\n        //         3: '',\r\n        //         4: '',\r\n        //         5: '',\r\n        //         6: '',\r\n        //         7: '',\r\n        //         8: '',\r\n        //         9: '',\r\n        //         10: '',\r\n        //         11: '',\r\n        //         12: ''\r\n        //     },\r\n        //     dateFormat: 'yyyy-mm-dd',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // cs: {\r\n        //     dayLabels: { su: 'Ne', mo: 'Po', tu: 't', we: 'St', th: 't', fr: 'P', sa: 'So' },\r\n        //     monthLabels: {\r\n        //         1: 'Led',\r\n        //         2: 'no',\r\n        //         3: 'Be',\r\n        //         4: 'Dub',\r\n        //         5: 'Kv',\r\n        //         6: 'vn',\r\n        //         7: 'vc',\r\n        //         8: 'Srp',\r\n        //         9: 'Z',\r\n        //         10: 'j',\r\n        //         11: 'Lis',\r\n        //         12: 'Pro'\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // el: {\r\n        //     dayLabels: { su: '', mo: '', tu: '', we: '', th: '', fr: '', sa: '' },\r\n        //     monthLabels: {\r\n        //         1: '',\r\n        //         2: '',\r\n        //         3: '',\r\n        //         4: '',\r\n        //         5: '',\r\n        //         6: '',\r\n        //         7: '',\r\n        //         8: '',\r\n        //         9: '',\r\n        //         10: '',\r\n        //         11: '',\r\n        //         12: ''\r\n        //     },\r\n        //     dateFormat: 'dd/mm/yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // kk: {\r\n        //     dayLabels: { su: '', mo: '', tu: '', we: '', th: '', fr: '', sa: '' },\r\n        //     monthLabels: {\r\n        //         1: '',\r\n        //         2: '',\r\n        //         3: '',\r\n        //         4: '',\r\n        //         5: '',\r\n        //         6: '',\r\n        //         7: '',\r\n        //         8: '',\r\n        //         9: '',\r\n        //         10: '',\r\n        //         11: '',\r\n        //         12: ''\r\n        //     },\r\n        //     dateFormat: 'dd-mmm-yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // th: {\r\n        //     dayLabels: { su: '', mo: '', tu: '', we: '', th: '', fr: '', sa: '' },\r\n        //     monthLabels: {\r\n        //         1: '.',\r\n        //         2: '..',\r\n        //         3: '..',\r\n        //         4: '..',\r\n        //         5: '..',\r\n        //         6: '..',\r\n        //         7: '..',\r\n        //         8: '..',\r\n        //         9: '..',\r\n        //         10: '..',\r\n        //         11: '..',\r\n        //         12: '..'\r\n        //     },\r\n        //     dateFormat: 'dd-mm-yyyy',\r\n        //     firstDayOfWeek: 'su',\r\n        //     sunHighlight: false\r\n        // },\r\n        // 'ko-kr': {\r\n        //     dayLabels: { su: '', mo: '', tu: '', we: '', th: '', fr: '', sa: '' },\r\n        //     monthLabels: {\r\n        //         1: '1',\r\n        //         2: '2',\r\n        //         3: '3',\r\n        //         4: '4',\r\n        //         5: '5',\r\n        //         6: '6',\r\n        //         7: '7',\r\n        //         8: '8',\r\n        //         9: '9',\r\n        //         10: '10',\r\n        //         11: '11',\r\n        //         12: '12'\r\n        //     },\r\n        //     dateFormat: 'yyyy mm dd',\r\n        //     firstDayOfWeek: 'su',\r\n        //     sunHighlight: false\r\n        // },\r\n        // da: {\r\n        //     dayLabels: { su: 'Sn', mo: 'Man', tu: 'Tir', we: 'Ons', th: 'Tor', fr: 'Fre', sa: 'Lr' },\r\n        //     monthLabels: {\r\n        //         1: 'Jan',\r\n        //         2: 'Feb',\r\n        //         3: 'Mar',\r\n        //         4: 'Apr',\r\n        //         5: 'Maj',\r\n        //         6: 'Jun',\r\n        //         7: 'Jul',\r\n        //         8: 'Aug',\r\n        //         9: 'Sep',\r\n        //         10: 'Okt',\r\n        //         11: 'Nov',\r\n        //         12: 'Dec'\r\n        //     },\r\n        //     dateFormat: 'dd-mm-yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // lt: {\r\n        //     dayLabels: { su: 'Sk', mo: 'Pr', tu: 'An', we: 'Tr', th: 'Kt', fr: 'Pn', sa: 't' },\r\n        //     monthLabels: {\r\n        //         1: 'Saus.',\r\n        //         2: 'Vas.',\r\n        //         3: 'Kov.',\r\n        //         4: 'Bal.',\r\n        //         5: 'Geg.',\r\n        //         6: 'Bir.',\r\n        //         7: 'Liep.',\r\n        //         8: 'Rugp.',\r\n        //         9: 'Rugs.',\r\n        //         10: 'Sapl.',\r\n        //         11: 'Lapkr.',\r\n        //         12: 'Gruod.'\r\n        //     },\r\n        //     dateFormat: 'yyyy-mm-dd',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // vi: {\r\n        //     dayLabels: { su: 'CN', mo: 'T2', tu: 'T3', we: 'T4', th: 'T5', fr: 'T6', sa: 'T7' },\r\n        //     monthLabels: {\r\n        //         1: 'THG 1',\r\n        //         2: 'THG 2',\r\n        //         3: 'THG 3',\r\n        //         4: 'THG 4',\r\n        //         5: 'THG 5',\r\n        //         6: 'THG 6',\r\n        //         7: 'THG 7',\r\n        //         8: 'THG 8',\r\n        //         9: 'THG 9',\r\n        //         10: 'THG 10',\r\n        //         11: 'THG 11',\r\n        //         12: 'THG 12'\r\n        //     },\r\n        //     dateFormat: 'dd/mm/yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // bn: {\r\n        //     dayLabels: { su: '', mo: '', tu: '', we: '', th: '', fr: '', sa: '' },\r\n        //     monthLabels: {\r\n        //         1: '',\r\n        //         2: '',\r\n        //         3: '',\r\n        //         4: '',\r\n        //         5: '',\r\n        //         6: '',\r\n        //         7: '',\r\n        //         8: '',\r\n        //         9: '',\r\n        //         10: '',\r\n        //         11: '',\r\n        //         12: ''\r\n        //     },\r\n        //     dateFormat: 'dd-mm-yyyy',\r\n        //     firstDayOfWeek: 'su',\r\n        //     sunHighlight: false\r\n        // },\r\n        // bg: {\r\n        //     dayLabels: { su: '', mo: '', tu: '', we: '', th: '', fr: '', sa: '' },\r\n        //     monthLabels: {\r\n        //         1: '.',\r\n        //         2: '.',\r\n        //         3: '',\r\n        //         4: '.',\r\n        //         5: '',\r\n        //         6: '',\r\n        //         7: '',\r\n        //         8: '.',\r\n        //         9: '.',\r\n        //         10: '.',\r\n        //         11: '.',\r\n        //         12: '.'\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // hr: {\r\n        //     dayLabels: { su: 'Ne', mo: 'Po', tu: 'Ul', we: 'Sr', th: 'e', fr: 'Pe', sa: 'Su' },\r\n        //     monthLabels: {\r\n        //         1: 'Sij',\r\n        //         2: 'Vel',\r\n        //         3: 'Ou',\r\n        //         4: 'Tra',\r\n        //         5: 'Svi',\r\n        //         6: 'Lip',\r\n        //         7: 'Srp',\r\n        //         8: 'Kol',\r\n        //         9: 'Ruj',\r\n        //         10: 'Lis',\r\n        //         11: 'Stu',\r\n        //         12: 'Pro'\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy.',\r\n        //     firstDayOfWeek: 'su',\r\n        //     sunHighlight: false\r\n        // },\r\n        // ar: {\r\n        //     dayLabels: {\r\n        //         su: '',\r\n        //         mo: '',\r\n        //         tu: '',\r\n        //         we: '',\r\n        //         th: '',\r\n        //         fr: '',\r\n        //         sa: ''\r\n        //     },\r\n        //     monthLabels: {\r\n        //         1: '',\r\n        //         2: '',\r\n        //         3: '',\r\n        //         4: '',\r\n        //         5: '',\r\n        //         6: '',\r\n        //         7: '',\r\n        //         8: '',\r\n        //         9: '',\r\n        //         10: '',\r\n        //         11: '',\r\n        //         12: ''\r\n        //     },\r\n        //     dateFormat: 'yyyy-mm-dd',\r\n        //     firstDayOfWeek: 'sa',\r\n        //     sunHighlight: false\r\n        // },\r\n        // is: {\r\n        //     dayLabels: { su: 'sun', mo: 'mn', tu: 'ri', we: 'mi', th: 'fim', fr: 'fs', sa: 'lau' },\r\n        //     monthLabels: {\r\n        //         1: 'jan',\r\n        //         2: 'feb',\r\n        //         3: 'mar',\r\n        //         4: 'apr',\r\n        //         5: 'ma',\r\n        //         6: 'jn',\r\n        //         7: 'jl',\r\n        //         8: 'g',\r\n        //         9: 'sep',\r\n        //         10: 'okt',\r\n        //         11: 'nv',\r\n        //         12: 'des'\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy',\r\n        //     firstDayOfWeek: 'su',\r\n        //     sunHighlight: false\r\n        // },\r\n        // tw: {\r\n        //     dayLabels: { su: '', mo: '', tu: '', we: '', th: '', fr: '', sa: '' },\r\n        //     monthLabels: {\r\n        //         1: '',\r\n        //         2: '',\r\n        //         3: '',\r\n        //         4: '',\r\n        //         5: '',\r\n        //         6: '',\r\n        //         7: '',\r\n        //         8: '',\r\n        //         9: '',\r\n        //         10: '',\r\n        //         11: '',\r\n        //         12: ''\r\n        //     },\r\n        //     dateFormat: 'yyyy-mm-dd',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // lv: {\r\n        //     dayLabels: { su: 'S', mo: 'P', tu: 'O', we: 'T', th: 'C', fr: 'P', sa: 'S' },\r\n        //     monthLabels: {\r\n        //         1: 'Janv',\r\n        //         2: 'Febr',\r\n        //         3: 'Marts',\r\n        //         4: 'Apr',\r\n        //         5: 'Maijs',\r\n        //         6: 'Jn',\r\n        //         7: 'Jl',\r\n        //         8: 'Aug',\r\n        //         9: 'Sept',\r\n        //         10: 'Okt',\r\n        //         11: 'Nov',\r\n        //         12: 'Dec'\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // et: {\r\n        //     dayLabels: { su: 'P', mo: 'E', tu: 'T', we: 'K', th: 'N', fr: 'R', sa: 'L' },\r\n        //     monthLabels: {\r\n        //         1: 'Jaan',\r\n        //         2: 'Veebr',\r\n        //         3: 'Mrts',\r\n        //         4: 'Apr',\r\n        //         5: 'Mai',\r\n        //         6: 'Juuni',\r\n        //         7: 'Juuli',\r\n        //         8: 'Aug',\r\n        //         9: 'Sept',\r\n        //         10: 'Okt',\r\n        //         11: 'Nov',\r\n        //         12: 'Dets'\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // }\r\n    };\r\n\r\n    getLocaleOptions(locale: string): IMyOptions {\r\n        if (locale && this.locales.hasOwnProperty(locale)) {\r\n            // User given locale\r\n            return this.locales[locale];\r\n        }\r\n        // Default: en\r\n        return this.locales[DEFAULT_LOCALE];\r\n    }\r\n}\r\n","/*\r\n * @Author: (Lucas Huang)\r\n * @Date: 2019-09-04 07:40:04\r\n * @LastEditors: (Lucas Huang)\r\n * @LastEditTime: 2019-09-04 15:21:46\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\nimport { Injectable } from '@angular/core';\r\nimport {\r\n    IMyDateModel,\r\n    IMySingleDateModel,\r\n    IMyDateRangeModel,\r\n    IMyDate,\r\n    IMyDateRange,\r\n    IMyMonth,\r\n    IMyMonthLabels,\r\n    IMyMarkedDates,\r\n    IMyMarkedDate,\r\n    IMyDateFormat,\r\n    IMyOptions\r\n} from '../interfaces/public-api';\r\nimport { KeyCode, KeyName, ShowType } from '../enums/public-api';\r\nimport { D, DD, M, MM, MMM, YYYY, SU, MO, TU, WE, TH, FR, SA, ZERO_STR, EMPTY_STR } from '../constants/constants';\r\nimport { DynamicData, DynamicDateType } from '../interfaces/dynamic-data-type.interface';\r\n\r\n@Injectable()\r\nexport class UtilService {\r\n    weekDays: Array<string> = [SU, MO, TU, WE, TH, FR, SA];\r\n\r\n    isDateValid(dateStr: string, options: IMyOptions, isReturn = false): IMyDate {\r\n        // tslint:disable-next-line:one-variable-per-declaration\r\n        let _dateStr: string, hour = 0, minute = 0, second = 0;\r\n\r\n        const returnDate: IMyDate = this.resetDate();\r\n\r\n        if (!dateStr || !dateStr.length) {\r\n            return returnDate;\r\n        }\r\n\r\n        const { dateFormat, minYear, maxYear, monthLabels, showTime, returnFormat, showType } = options;\r\n        let _st = showTime;\r\n        let formatStr = dateFormat;\r\n        if (isReturn) {\r\n            formatStr = returnFormat.replace(/[,]/g, '-').replace(/[]/, '').replace(/[,]/g, ':').replace(/[]/g, '');\r\n            dateStr = dateStr.replace(/[,]/g, '-').replace(/[]/, '').replace(/[,]/g, ':').replace(/[]/g, '');\r\n\r\n            if (dateStr[dateStr.length - 1] === '-' || dateStr[dateStr.length - 1] === ':') {\r\n                dateStr = dateStr.substring(0, dateStr.length - 1);\r\n            }\r\n\r\n            if (!showTime && returnFormat.toLocaleLowerCase().indexOf('hh:mm') > -1) {\r\n                _st = true;\r\n            }\r\n        }\r\n\r\n        const daysInMonth: Array<number> = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\r\n        const isMonthStr: boolean = formatStr.indexOf(MMM) !== -1;\r\n        let delimeters: Array<string> = formatStr.match(/[^(DdMmYy)]{1,}/g);\r\n        if (_st && dateStr) {\r\n            _dateStr = dateStr.split(' ')[0];\r\n            Object.assign(returnDate, { hour: 0, minute: 0, second: 0 });\r\n            const timeStr = dateStr.split(' ')[1];\r\n            if (timeStr) {\r\n                const _timer = timeStr.replace('', ':').replace('', ':').replace('', '').split(':');\r\n                if (_timer[0]) {\r\n                    hour = Number(_timer[0].substr(0, 2));\r\n                    hour = isNaN(hour) ? 0 : hour;\r\n                }\r\n                if (_timer[1]) {\r\n                    minute = Number(_timer[1].substr(0, 2));\r\n                    minute = isNaN(minute) ? 0 : minute;\r\n                }\r\n\r\n                if (_timer[2]) {\r\n                    second = Number(_timer[2].substr(0, 2));\r\n                    second = isNaN(second) ? 0 : second;\r\n                }\r\n            } else {\r\n                delimeters = undefined;\r\n                const reg = /^\\d{1,}$/;\r\n                if (reg.test(dateStr)) { //  yyyyMMddHHmmss\r\n                    const df = formatStr;\r\n                    _dateStr = dateStr.substr(0, 8);\r\n                    let _timer = dateStr.substr(8);\r\n                    if (_timer) {\r\n                        if (df.includes('HH')) {\r\n                            if (_timer) {\r\n                                hour = +_timer.slice(0, 2);\r\n                                _timer = _timer.slice(2);\r\n                            }\r\n                        }\r\n                        if (df.includes('mm')) {\r\n                            if (_timer) {\r\n                                minute = +_timer.slice(0, 2);\r\n                                _timer = _timer.slice(2);\r\n                            }\r\n                        }\r\n                        if (df.includes('ss')) {\r\n                            if (_timer) {\r\n                                second = +_timer.slice(0, 2);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            _dateStr = dateStr ? dateStr.split(' ')[0] : '';\r\n        }\r\n        const dateValue: Array<IMyDateFormat> = this.getDateValue(_dateStr, formatStr, delimeters);\r\n\r\n        const year: number = this.getNumberByValue(dateValue[0]);\r\n        const month: number = isMonthStr\r\n            ? this.getMonthNumberByMonthName(dateValue[1], monthLabels)\r\n            : this.getNumberByValue(dateValue[1]);\r\n        const day: number = this.getNumberByValue(dateValue[2]);\r\n\r\n        if (showType === ShowType.noDateAndMonth) {\r\n            return { year, month: 1, day: 1 };\r\n        }\r\n\r\n        if (month !== -1 && day !== -1 && year !== -1) {\r\n            if (year < minYear || year > maxYear || month < 1 || month > 12) {\r\n                return returnDate;\r\n            }\r\n            const date: IMyDate = _st ? { year, month, day, hour, minute, second } : { year, month, day };\r\n\r\n            if (this.isDisabledDate(date, options)) {\r\n                return returnDate;\r\n            }\r\n\r\n            if (year % 400 === 0 || (year % 100 !== 0 && year % 4 === 0)) {\r\n                daysInMonth[1] = 29;\r\n            }\r\n\r\n            if (day < 1 || day > daysInMonth[month - 1]) {\r\n                return returnDate;\r\n            }\r\n\r\n            // Valid date\r\n            if (options.showType === ShowType.noDate) {\r\n                return { year: date.year, month: date.month };\r\n            } else if (options.showType === ShowType.noDateAndMonth) {\r\n                return { year: date.year };\r\n            } else {\r\n                return date;\r\n            }\r\n        }\r\n        return returnDate;\r\n    }\r\n\r\n    isDateValidDateRange(dateRangeStr: string, options: IMyOptions): IMyDateRange {\r\n        let dateRange: IMyDateRange = {\r\n            begin: this.resetDate(),\r\n            end: this.resetDate()\r\n        };\r\n        if (dateRangeStr && dateRangeStr.length) {\r\n            const dates: Array<string> = dateRangeStr.split(options.dateRangeDatesDelimiter);\r\n            if (dates && dates.length === 2) {\r\n                const [beginDate, endDate] = dates;\r\n                const begin: IMyDate = this.isDateValid(beginDate, options, true);\r\n                if (this.isInitializedDate(begin)) {\r\n                    const end: IMyDate = this.isDateValid(endDate, options, true);\r\n\r\n                    if (this.isInitializedDate(end) && this.isDateSameOrEarlier(begin, end)) {\r\n                        dateRange = { begin, end };\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return dateRange;\r\n    }\r\n\r\n    getDateValue(dateStr: string, dateFormat: string, delimeters: Array<string>): Array<IMyDateFormat> {\r\n        const da: Array<IMyDateFormat> = [];\r\n\r\n        if (delimeters) {\r\n            let del: string = delimeters[0];\r\n            if (delimeters[0] !== delimeters[1]) {\r\n                del = delimeters[0] + delimeters[1];\r\n                if (delimeters[2] && delimeters[1] !== delimeters[2]) {\r\n                    del = del + delimeters[2];\r\n                }\r\n            }\r\n            const re: any = new RegExp('[' + del + ']');\r\n            const ds: Array<string> = dateStr.split(re);\r\n            const df: Array<string> = dateFormat.split(re);\r\n            for (let i = 0; i < df.length; i++) {\r\n                if (df[i].indexOf(YYYY) !== -1) {\r\n                    da[0] = { value: ds[i], format: df[i] };\r\n                }\r\n                if (df[i].indexOf(M) !== -1) {\r\n                    da[1] = ds[i] === undefined ? { value: '1', format: df[i] } : { value: ds[i], format: df[i] };\r\n                }\r\n                if (df[i].indexOf(D) !== -1) {\r\n                    da[2] = ds[i] === undefined ? { value: '1', format: df[i] } : { value: ds[i], format: df[i] };\r\n                }\r\n            }\r\n        } else {\r\n            const yearIndex = (dateFormat + '').indexOf(YYYY);\r\n            const monthIndex = (dateFormat + '').indexOf(MM);\r\n            const dayIndex = (dateFormat + '').indexOf(DD);\r\n            if (yearIndex >= 0) {\r\n                da[0] = { value: dateStr.substring(yearIndex, yearIndex + 4), format: dateFormat.substring(yearIndex, yearIndex + 4) };\r\n            }\r\n            if (monthIndex >= 0) {\r\n                da[1] = { value: dateStr.substring(monthIndex, monthIndex + 2), format: dateFormat.substring(monthIndex, monthIndex + 2) };\r\n            }\r\n            if (dayIndex >= 0) {\r\n                da[2] = { value: dateStr.substring(dayIndex, dayIndex + 2), format: dateFormat.substring(dayIndex, dayIndex + 2) };\r\n            }\r\n        }\r\n        return da;\r\n    }\r\n\r\n    getMonthNumberByMonthName(df: IMyDateFormat, monthLabels: IMyMonthLabels): number {\r\n        if (df.value) {\r\n            for (let key = 1; key <= 12; key++) {\r\n                if (df.value.toLowerCase() === monthLabels[key].toLowerCase()) {\r\n                    return key;\r\n                }\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n\r\n    getNumberByValue(df: IMyDateFormat): number {\r\n        if (!df) {\r\n            return 1;\r\n        }\r\n        if (!/^\\d+$/.test(df.value)) {\r\n            return -1;\r\n        }\r\n\r\n        let nbr: number = Number(df.value);\r\n        if (\r\n            (df.format.length === 1 && df.value.length !== 1 && nbr < 10) ||\r\n            (df.format.length === 1 && df.value.length !== 2 && nbr >= 10)\r\n        ) {\r\n            nbr = -1;\r\n        } else if (df.format.length === 2 && df.value.length > 2) {\r\n            nbr = -1;\r\n        }\r\n        return nbr;\r\n    }\r\n\r\n    parseDefaultMonth(monthString: string): IMyMonth {\r\n        const month: IMyMonth = { monthTxt: EMPTY_STR, monthNbr: 0, year: 0 };\r\n        if (monthString !== EMPTY_STR) {\r\n            const split = monthString.split(monthString.match(/[^0-9]/)[0]);\r\n            month.monthNbr = split[0].length === 2 ? Number(split[0]) : Number(split[1]);\r\n            month.year = split[0].length === 2 ? Number(split[1]) : Number(split[0]);\r\n        }\r\n        return month;\r\n    }\r\n\r\n    isDisabledDate(date: IMyDate, options: IMyOptions): boolean {\r\n        const {\r\n            minYear,\r\n            maxYear,\r\n            disableUntil,\r\n            disableSince,\r\n            disableWeekends,\r\n            disableDates,\r\n            disableDateRanges,\r\n            disableWeekdays,\r\n            enableDates\r\n        } = options;\r\n\r\n        // for (const d of enableDates) {\r\n        //     if (\r\n        //         (d.year === 0 || d.year === date.year) &&\r\n        //         (d.month === 0 || d.month === date.month) &&\r\n        //         d.day === date.day\r\n        //     ) {\r\n        //         return false;\r\n        //     }\r\n        // }\r\n\r\n        if ((date.year < minYear && date.month === 12) || (date.year > maxYear && date.month === 1)) {\r\n            return true;\r\n        }\r\n        const dateMs: number = this.getTimeInMilliseconds(date);\r\n        if (this.isInitializedDate(disableUntil) && (dateMs + 24 * 60 * 60 * 1000 - 1) < this.getTimeInMilliseconds(disableUntil)) {\r\n            return true;\r\n        }\r\n        if (this.isInitializedDate(disableSince) && dateMs > this.getTimeInMilliseconds(disableSince)) {\r\n            return true;\r\n        }\r\n\r\n        if (disableWeekends) {\r\n            const dayNbr = this.getDayNumber(date);\r\n            if (dayNbr === 0 || dayNbr === 6) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        const dn = this.getDayNumber(date);\r\n        if (disableWeekdays.length > 0) {\r\n            for (const wd of disableWeekdays) {\r\n                if (dn === this.getWeekdayIndex(wd)) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n\r\n        for (const d of disableDates) {\r\n            if (\r\n                (d.year === 0 || d.year === date.year) &&\r\n                (d.month === 0 || d.month === date.month) &&\r\n                d.day === date.day\r\n            ) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        for (const d of disableDateRanges) {\r\n            if (\r\n                this.isInitializedDate(d.begin) &&\r\n                this.isInitializedDate(d.end) &&\r\n                dateMs >= this.getTimeInMilliseconds(d.begin) &&\r\n                dateMs <= this.getTimeInMilliseconds(d.end)\r\n            ) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    isMarkedDate(date: IMyDate, markedDates: Array<IMyMarkedDates>, markWeekends: IMyMarkedDate): IMyMarkedDate {\r\n        for (const md of markedDates) {\r\n            for (const d of md.dates) {\r\n                if (\r\n                    (d.year === 0 || d.year === date.year) &&\r\n                    (d.month === 0 || d.month === date.month) &&\r\n                    d.day === date.day\r\n                ) {\r\n                    return { marked: true, color: md.color };\r\n                }\r\n            }\r\n        }\r\n        if (markWeekends && markWeekends.marked) {\r\n            const dayNbr = this.getDayNumber(date);\r\n            if (dayNbr === 0 || dayNbr === 6) {\r\n                return { marked: true, color: markWeekends.color };\r\n            }\r\n        }\r\n        return { marked: false, color: EMPTY_STR };\r\n    }\r\n\r\n    isHighlightedDate(\r\n        date: IMyDate,\r\n        sunHighlight: boolean,\r\n        satHighlight: boolean,\r\n        highlightDates: Array<IMyDate>\r\n    ): boolean {\r\n        const dayNbr: number = this.getDayNumber(date);\r\n        if ((sunHighlight && dayNbr === 0) || (satHighlight && dayNbr === 6)) {\r\n            return true;\r\n        }\r\n        for (const d of highlightDates) {\r\n            if (\r\n                (d.year === 0 || d.year === date.year) &&\r\n                (d.month === 0 || d.month === date.month) &&\r\n                d.day === date.day\r\n            ) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    getWeekNumber(date: IMyDate): number {\r\n        const d: Date = new Date(date.year, date.month - 1, date.day, 0, 0, 0, 0);\r\n        d.setDate(d.getDate() + (d.getDay() === 0 ? -3 : 4 - d.getDay()));\r\n        return Math.round((d.getTime() - new Date(d.getFullYear(), 0, 4).getTime()) / 86400000 / 7) + 1;\r\n    }\r\n    getNowWeekTime(date: Date): IMyDateRange {\r\n        date.setDate(date.getDate() - ((date.getDay() + 6) % 7));\r\n        const begin = {\r\n            year: date.getFullYear(),\r\n            month: date.getMonth() + 1,\r\n            day: date.getDate()\r\n        };\r\n        date.setDate(date.getDate() + 6);\r\n        const end = {\r\n            year: date.getFullYear(),\r\n            month: date.getMonth() + 1,\r\n            day: date.getDate()\r\n        };\r\n        return { begin, end };\r\n    }\r\n\r\n    isMonthDisabledByDisableUntil(date: IMyDate, disableUntil: IMyDate): boolean {\r\n        return (\r\n            this.isInitializedDate(disableUntil) &&\r\n            this.getTimeInMilliseconds(date) <= this.getTimeInMilliseconds(disableUntil)\r\n        );\r\n    }\r\n\r\n    isMonthDisabledByDisableSince(date: IMyDate, disableSince: IMyDate): boolean {\r\n        return (\r\n            this.isInitializedDate(disableSince) &&\r\n            this.getTimeInMilliseconds(date) >= this.getTimeInMilliseconds(disableSince)\r\n        );\r\n    }\r\n\r\n    getDateModel(\r\n        date: IMyDate,\r\n        dateRange: IMyDateRange,\r\n        dateFormat: string,\r\n        monthLabels: IMyMonthLabels,\r\n        rangeDelimiter: string,\r\n        returnFormat: string,\r\n        dateStr: string = EMPTY_STR\r\n    ): IMyDateModel {\r\n        let singleDateModel: IMySingleDateModel = null;\r\n        let dateRangeModel: IMyDateRangeModel = null;\r\n\r\n        if (date) {\r\n            singleDateModel = {\r\n                date,\r\n                jsDate: this.getDate2(date),\r\n                formatted: dateStr.length ? dateStr : this.formatDate(date, dateFormat, monthLabels),\r\n                returnFormatted: this.formatDate(date, returnFormat, monthLabels),\r\n                epoc: this.getEpocTime(date)\r\n            };\r\n        } else {\r\n            dateRangeModel = {\r\n                beginDate: dateRange.begin,\r\n                beginJsDate: this.getDate(dateRange.begin),\r\n                beginEpoc: this.getEpocTime(dateRange.begin),\r\n                endDate: dateRange.end,\r\n                endJsDate: this.getDate(dateRange.end),\r\n                endEpoc: this.getEpocTime(dateRange.end),\r\n                formatted:\r\n                    this.formatDate(dateRange.begin, dateFormat, monthLabels) +\r\n                    rangeDelimiter +\r\n                    this.formatDate(dateRange.end, dateFormat, monthLabels),\r\n                returnFormatted:\r\n                    this.formatDate(dateRange.begin, returnFormat, monthLabels) +\r\n                    rangeDelimiter +\r\n                    this.formatDate(dateRange.end, returnFormat, monthLabels),\r\n            };\r\n        }\r\n        return {\r\n            isRange: date === null,\r\n            singleDate: singleDateModel,\r\n            dateRange: dateRangeModel\r\n        };\r\n    }\r\n\r\n    formatDate(date: IMyDate, dateFormat: string, monthLabels: IMyMonthLabels): string {\r\n        if (!date.month && dateFormat.indexOf(MM) === -1) {\r\n            dateFormat = this.delete(dateFormat, MM);\r\n        }\r\n        if (!date.day && dateFormat.indexOf(DD) === -1) {\r\n            dateFormat = this.delete(dateFormat, DD);\r\n        }\r\n        let formatted: string = dateFormat.replace(YYYY, String(date.year));\r\n\r\n        if (dateFormat.indexOf(M) === -1) {\r\n            formatted = formatted.replace(MM, '01');\r\n        } else {\r\n            if (dateFormat.indexOf(MMM) !== -1) {\r\n                formatted = formatted.replace(MMM, monthLabels[date.month]);\r\n            } else if (dateFormat.indexOf(MM) !== -1) {\r\n                formatted = formatted.replace(MM, this.preZero(date.month || 1));\r\n            } else {\r\n                formatted = formatted.replace(M, String(date.month || 1));\r\n            }\r\n        }\r\n\r\n        if (dateFormat.indexOf(DD) === -1) {\r\n            formatted = formatted.replace(DD, '01');\r\n        } else if (dateFormat.indexOf(DD) !== -1) {\r\n            formatted = formatted.replace(DD, this.preZero(date.day || 1));\r\n        } else {\r\n            formatted = formatted.replace(D, String(date.day || 1));\r\n        }\r\n\r\n        formatted = formatted.replace('MM', 'mm').replace('HH', this.preZero(date.hour || 0))\r\n        .replace('mm', this.preZero(date.minute || 0))\r\n        .replace('ss', this.preZero(date.second || 0));\r\n\r\n        return formatted && formatted.length > 2 ? formatted : '';\r\n    }\r\n\r\n    delete(format: string, delStr: string) {\r\n        const re = format.match(/[^(DdMmYy)]{1,}/g);\r\n        const index = format.indexOf(delStr);\r\n\r\n        if (index < 0) {\r\n            return format;\r\n        } else if (index === 0) {\r\n            if (re) {\r\n                return format.substring(3);\r\n            } else {\r\n                return format.substring(2);\r\n            }\r\n        } else if (index + 2 === format.length) {\r\n            if (re) {\r\n                return format.substring(0, format.length - 3);\r\n            } else {\r\n                return format.substring(0, format.length - 2);\r\n            }\r\n        } else {\r\n            if (re) {\r\n                return format.substring(0, index) + format.substring(index + 3);\r\n            } else {\r\n                return format.substring(0, index) + format.substring(index + 2);\r\n            }\r\n        }\r\n    }\r\n    getFormattedDate(model: IMyDateModel): string {\r\n        return !model.isRange ? model.singleDate.formatted : model.dateRange.formatted;\r\n    }\r\n\r\n    preZero(val: number): string {\r\n        return val < 10 ? ZERO_STR + Number(val) : String(val);\r\n    }\r\n\r\n    isInitializedDate(date: IMyDate): boolean {\r\n        return date && date.year !== 0 && date.month !== 0 && date.day !== 0;\r\n    }\r\n\r\n    isInitializedMonth(date: IMyDate): boolean {\r\n        return date && date.year !== 0 && date.month !== 0;\r\n    }\r\n\r\n    isInitializedYear(date: IMyDate): boolean {\r\n        return date && date.year !== 0;\r\n    }\r\n\r\n    isDateEarlier(firstDate: IMyDate, secondDate: IMyDate): boolean {\r\n        return this.getTimeInMilliseconds(firstDate) < this.getTimeInMilliseconds(secondDate);\r\n    }\r\n\r\n    isDateSameOrEarlier(firstDate: IMyDate, secondDate: IMyDate): boolean {\r\n        return this.getTimeInMilliseconds(firstDate) <= this.getTimeInMilliseconds(secondDate);\r\n    }\r\n\r\n    isDateSame(firstDate: IMyDate, secondDate: IMyDate): boolean {\r\n        return this.getTimeInMilliseconds(firstDate) === this.getTimeInMilliseconds(secondDate);\r\n    }\r\n\r\n    isDateRangeBeginOrEndSame(dateRange: IMyDateRange, date: IMyDate): boolean {\r\n        const dateMs: number = this.getTimeInMilliseconds(date);\r\n        return (\r\n            this.getTimeInMilliseconds(dateRange.begin) === dateMs ||\r\n            this.getTimeInMilliseconds(dateRange.end) === dateMs\r\n        );\r\n    }\r\n\r\n    isDateInRange(date: IMyDate, dateRange: IMyDateRange): boolean {\r\n        if (!this.isInitializedDate(dateRange.begin) || !this.isInitializedDate(dateRange.end)) {\r\n            return false;\r\n        }\r\n        return this.isDateSameOrEarlier(dateRange.begin, date) && this.isDateSameOrEarlier(date, dateRange.end);\r\n    }\r\n\r\n    resetDate(): IMyDate {\r\n        return { year: 0, month: 0, day: 0 };\r\n    }\r\n\r\n    getTimeInMilliseconds(date: IMyDate): number {\r\n        return this.getDate(date).getTime();\r\n    }\r\n\r\n    getDate2(date: IMyDate): Date {\r\n        const now = new Date();\r\n\r\n        if (!date.year) {\r\n            date.year = now.getFullYear();\r\n        }\r\n\r\n        if (!date.month) {\r\n            date.month = now.getMonth() + 1;\r\n        }\r\n\r\n        if (!date.day) {\r\n            date.day = 1;\r\n        }\r\n\r\n        return new Date(\r\n            date.year,\r\n            date.month - 1,\r\n            date.day,\r\n            date.hour ? date.hour : 0,\r\n            date.minute ? date.minute : 0,\r\n            date.second ? date.second : 0,\r\n            0\r\n        );\r\n    }\r\n\r\n    getDate(date: IMyDate): Date {\r\n        return new Date(\r\n            date.year || 0,\r\n            date.month ? date.month - 1 : 0,\r\n            date.day || 0,\r\n            date.hour ? date.hour : 0,\r\n            date.minute ? date.minute : 0,\r\n            date.second ? date.second : 0,\r\n            0\r\n        );\r\n    }\r\n\r\n    getDayNumber(date: IMyDate): number {\r\n        return new Date(\r\n            date.year,\r\n            date.month - 1,\r\n            date.day,\r\n            date.hour ? date.hour : 0,\r\n            date.minute ? date.minute : 0,\r\n            date.second ? date.second : 0,\r\n            0\r\n        ).getDay();\r\n    }\r\n\r\n    getWeekdayIndex(wd: string) {\r\n        return this.weekDays.indexOf(wd);\r\n    }\r\n\r\n    getEpocTime(date: IMyDate): number {\r\n        return Math.round(this.getTimeInMilliseconds(date) / 1000.0);\r\n    }\r\n\r\n    getKeyCodeFromEvent(event: any): number {\r\n        const key: any = event.key || event.keyCode;\r\n\r\n        if (key === KeyName.enter || key === KeyCode.enter) {\r\n            return KeyCode.enter;\r\n        } else if (key === KeyName.esc || key === KeyCode.esc) {\r\n            return KeyCode.esc;\r\n        } else if (key === KeyName.space || key === KeyCode.space) {\r\n            return KeyCode.space;\r\n        } else if (key === KeyName.leftArrow || key === KeyCode.leftArrow) {\r\n            return KeyCode.leftArrow;\r\n        } else if (key === KeyName.upArrow || key === KeyCode.upArrow) {\r\n            return KeyCode.upArrow;\r\n        } else if (key === KeyName.rightArrow || key === KeyCode.rightArrow) {\r\n            return KeyCode.rightArrow;\r\n        } else if (key === KeyName.downArrow || key === KeyCode.downArrow) {\r\n            return KeyCode.downArrow;\r\n        } else if (key === KeyName.tab || key === KeyCode.tab) {\r\n            return KeyCode.tab;\r\n        } else if (key === KeyName.shift || key === KeyCode.shift) {\r\n            return KeyCode.shift;\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n    getNearDate(now: IMyDate, min: IMyDate, max: IMyDate) {\r\n        const minMilliseconds = this.getTimeInMilliseconds(min)\r\n        const maxMilliseconds = this.getTimeInMilliseconds(max)\r\n        const nowMilliseconds = this.getTimeInMilliseconds(now)\r\n        if (maxMilliseconds - nowMilliseconds > nowMilliseconds - minMilliseconds) {\r\n            return min;\r\n        } else {\r\n            return max;\r\n        }\r\n    }\r\n    // \r\n    // [0minHour\r\n    // (maxHour,23]\r\n    disabledHours(min: IMyDate, max: IMyDate, currentDate: IMyDate) {\r\n        let minHour = min.hour;\r\n        let maxHour = max.hour;\r\n        let res = [];\r\n        if (this.isDateSame({ year: currentDate.year, month: currentDate.month, day: currentDate.day }, { year: min.year, month: min.month, day: min.day })) {\r\n            while (minHour-- >= 0) {\r\n                res.push(minHour);\r\n            }\r\n        }\r\n\r\n        if (this.isDateSame({ year: currentDate.year, month: currentDate.month, day: currentDate.day }, { year: max.year, month: max.month, day: max.day })) {\r\n            while (maxHour++ < 24) {\r\n                res.push(maxHour);\r\n            }\r\n        }\r\n        return res;\r\n    }\r\n    // \r\n    //[0minMinute\r\n    //maxMinute59]\r\n    disabledMinutes(min: IMyDate, max: IMyDate, _hour: number, currentDate: IMyDate) {\r\n        let maxHour = max.hour;\r\n        let maxMinute = max.minute;\r\n        let minHour = min.hour;\r\n        let minMinute = min.minute;\r\n        let res = [];\r\n        if (this.isDateSame({ year: currentDate.year, month: currentDate.month, day: currentDate.day }, { year: min.year, month: min.month, day: min.day })) {\r\n            if (_hour == minHour) {\r\n                while (minMinute-- >= 0) {\r\n                    res.push(minMinute);\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        if (this.isDateSame({ year: currentDate.year, month: currentDate.month, day: currentDate.day }, { year: max.year, month: max.month, day: max.day })) {\r\n            if (_hour == maxHour) {\r\n                while (maxMinute++ < 60) {\r\n                    res.push(maxMinute);\r\n                }\r\n            }\r\n        }\r\n\r\n        return res;\r\n\r\n    }\r\n    // \r\n    //[0minSecond\r\n    //maxSecond59]\r\n    disabledSeconds(min: IMyDate, max: IMyDate, _hour: number, _minute: number, currentDate: IMyDate) {\r\n        let maxHour = max.hour;\r\n        let maxMinute = max.minute;\r\n        let maxSecond = max.second;\r\n        let minHour = min.hour;\r\n        let minMinute = min.minute;\r\n        let minSecond = min.second;\r\n        let res = [];\r\n        if (this.isDateSame({ year: currentDate.year, month: currentDate.month, day: currentDate.day }, { year: min.year, month: min.month, day: min.day })) {\r\n            if (_hour == minHour && _minute == minMinute) {\r\n                while (minSecond-- >= 0) {\r\n                    res.push(minSecond);\r\n                }\r\n            }\r\n        }\r\n\r\n        if (this.isDateSame({ year: currentDate.year, month: currentDate.month, day: currentDate.day }, { year: max.year, month: max.month, day: max.day })) {\r\n            if (_hour == maxHour && _minute == maxMinute) {\r\n                while (maxSecond++ < 60) {\r\n                    res.push(maxSecond);\r\n                }\r\n            }\r\n        }\r\n\r\n        return res;\r\n    }\r\n    \r\n    private getDateTypeString(dt: DynamicDateType, dynamicLocale) {\r\n        switch(dt) {\r\n            case 'week':\r\n                return dynamicLocale.week || '';\r\n            case 'day':\r\n                return dynamicLocale.day || '';\r\n            case 'month':\r\n                return dynamicLocale.month || '';\r\n            case 'year':\r\n                return dynamicLocale.year || '';\r\n        }\r\n    }\r\n\r\n    formatDynamicValue(val: DynamicData, dynamicLocale) {\r\n        if (val) {\r\n            let fval = '';\r\n            switch(val.name) {\r\n                case 'present_day': // \r\n                fval = dynamicLocale.today || '';\r\n                break;\r\n            case 'present_month': // \r\n                fval = dynamicLocale.presentMonth || '';\r\n                break;\r\n            case 'present_year':\r\n                fval = dynamicLocale.presentYear ||'';\r\n                break;\r\n            case 'previou':\r\n                fval =  (dynamicLocale.previous|| '') + ' ' + val.count + ' ' + this.getDateTypeString(val.dateType, dynamicLocale);\r\n                break;\r\n            case 'future':\r\n                fval = (dynamicLocale.future || '') + ' '+ val.count + ' ' +this.getDateTypeString(val.dateType, dynamicLocale);\r\n                break;\r\n            case 'present_first':\r\n                fval = (dynamicLocale.current||'') + this.getDateTypeString(val.dateType, dynamicLocale) + (dynamicLocale.first||' 1 ');\r\n                break;\r\n            case 'present_last':\r\n                fval = (dynamicLocale.current||'') + this.getDateTypeString(val.dateType, dynamicLocale) + (dynamicLocale.last||' 1 ');\r\n                break;\r\n            }\r\n\r\n            return fval;\r\n        } else {\r\n            return '';\r\n        }\r\n    }\r\n}\r\n","import { IMyDate, IMyDateRange, IMySelectorPosition, IMyOptions } from '../interfaces/public-api';\r\nimport { PX, EMPTY_STR } from '../constants/constants';\r\nimport { Year } from '../enums/year.enum';\r\nimport { UtilService } from './farris-datepicker.util.service';\r\nimport { ComponentRef } from '@angular/core';\r\n\r\nexport class DatePickerService {\r\n    opts;\r\n    utilService;\r\n\r\n    private _mouseWheelHandle = null;\r\n    private _mouseScrollHandle = null;\r\n\r\n    constructor(opts) {\r\n        this.opts = opts;\r\n        this.utilService = new UtilService();\r\n    }\r\n\r\n    static parseOptions(opts: IMyOptions, defaultOpts): IMyOptions {\r\n        if (defaultOpts !== undefined) {\r\n            Object.keys(defaultOpts).forEach(k => {\r\n                if (defaultOpts[k] !== undefined && defaultOpts[k] !== '') {\r\n                    (opts as IMyOptions)[k] = defaultOpts[k];\r\n                }\r\n            });\r\n        }\r\n        if (opts.minYear < Year.min) {\r\n            opts.minYear = Year.min;\r\n        }\r\n        if (opts.maxYear > Year.max) {\r\n            opts.maxYear = Year.max;\r\n        }\r\n        return opts;\r\n    }\r\n\r\n    validate(value: string) {\r\n        const { dateRange } = this.opts;\r\n\r\n        let valid = false;\r\n        if (!dateRange) {\r\n            const date: IMyDate = this.utilService.isDateValid(value, this.opts);\r\n\r\n            valid = this.utilService.isInitializedDate(date);\r\n        } else {\r\n            const _dateRange: IMyDateRange = this.utilService.isDateValidDateRange(value, this.opts);\r\n            const { begin, end } = _dateRange;\r\n            valid = this.utilService.isInitializedDate(begin) && this.utilService.isInitializedDate(end);\r\n        }\r\n\r\n        return valid;\r\n    }\r\n\r\n    registerScrollEvent(fn) {\r\n        this._mouseScrollHandle = fn;\r\n        document.addEventListener('scroll', this._mouseScrollHandle);\r\n    }\r\n\r\n\r\n    removeMouseEvent() {\r\n        const container = document.querySelector('.date-overlay-container');\r\n        if (container) {\r\n            container.removeEventListener('mousewheel', this._mouseWheelHandle);\r\n        }\r\n\r\n        document.removeEventListener('scroll', this._mouseScrollHandle);\r\n    }\r\n\r\n    appendSelector(elem: any): void {\r\n        let container = document.querySelector('.date-overlay-container');\r\n        if (container) {\r\n            if (container.hasChildNodes()) {\r\n                container.childNodes.forEach(el => {\r\n                    if (el !== elem) {\r\n                        container.removeChild(el);\r\n                    }\r\n                });\r\n            }\r\n        } else {\r\n            container = document.createElement('div');\r\n            container.classList.add('date-overlay-container');\r\n            container.classList.add('overlay-container');\r\n            document.body.appendChild(container);\r\n        }\r\n\r\n        container.addEventListener('mousewheel', this._mouseWheelHandle = (e: MouseEvent) => {\r\n            const target = e.target as any;\r\n            if (!target.closest('.calendar-time-picker-select')) {\r\n                e.preventDefault();\r\n            }\r\n            return;\r\n        });\r\n\r\n        container.appendChild(elem);\r\n    }\r\n\r\n    getSelectorPosition(elem: any, calendarRef: ComponentRef<any>  = null): IMySelectorPosition {\r\n        let top = 0;\r\n        let left = 0;\r\n        let _selectorHeight = 0;\r\n        let _selectorWidth = 0;\r\n        const {\r\n            selectorHeight,\r\n            selectorWidth,\r\n            showTime,\r\n            dateRange,\r\n            showType,\r\n            enableDynamic,\r\n            showPresent\r\n        } = this.opts;\r\n\r\n        const b: any = document.body.getBoundingClientRect();\r\n        const e: any = elem.getBoundingClientRect();\r\n        top = e.top - b.top;\r\n        left = e.left - b.left;\r\n        let position = 'bottom';\r\n        if (dateRange && showType !== 4) {\r\n            _selectorWidth = this.getSelectorDimension(selectorWidth) * 2;\r\n        } else {\r\n            _selectorWidth = this.getSelectorDimension(selectorWidth);\r\n        }\r\n\r\n        _selectorHeight = this.getSelectorDimension(selectorHeight);\r\n        // if (showTime || enableDynamic) {\r\n        //     top = top - 6;\r\n        // }\r\n\r\n        top = top - 6;\r\n        if ((showPresent &&  (!dateRange || showType === 4)) || showTime || enableDynamic) {\r\n            _selectorHeight += 45;\r\n        }\r\n\r\n        if (top + elem.offsetHeight + _selectorHeight > window.innerHeight && top - _selectorHeight - 2 > 0) {\r\n            top = top - _selectorHeight - 2 ;\r\n            position = 'top';\r\n        } else {\r\n            top = top + elem.offsetHeight + 2;\r\n        }\r\n\r\n        if (window.innerHeight - top < _selectorHeight) {\r\n            top = top - (_selectorHeight - (window.innerHeight - e.top - e.height - 15));\r\n\r\n            if (calendarRef) {\r\n                const calendarElem = calendarRef.location.nativeElement;\r\n                const arrow = calendarElem.querySelector('.arrow');\r\n                if (arrow) {\r\n                    arrow.style.display = 'none';\r\n                }\r\n            }\r\n        }\r\n\r\n        if (left + _selectorWidth > b.width) {\r\n            left = b.width - _selectorWidth - 15;\r\n        }\r\n        left = left > 0 ? left : 0;\r\n\r\n        const scrollTop = document.body.scrollTop || document.documentElement.scrollTop;\r\n        top -= scrollTop;\r\n\r\n        return { top, left, position };\r\n    }\r\n    private getSelectorDimension(value: string): number {\r\n        return Number(value.replace(PX, EMPTY_STR));\r\n    }\r\n\r\n}\r\n","import { IMyDayLabels } from './my-day-labels.interface';\r\nimport { IMyMonthLabels } from './my-month-labels.interface';\r\nimport { IMyDate } from './my-date.interface';\r\nimport { IMyDateRange } from './my-date-range.interface';\r\nimport { IMyMarkedDates } from './my-marked-dates.interface';\r\nimport { IMyMarkedDate } from './my-marked-date.interface';\r\nimport { IMyStyles } from './my-styles.interface';\r\nimport { DefaultView } from '../enums/default-view.enum';\r\nimport { Year } from '../enums/year.enum';\r\nimport { IMyShortcuts } from './my-shortcuts.interface';\r\nimport { ShowType } from '../enums/show-type.enum';\r\nimport { DynamicData } from './dynamic-data-type.interface';\r\n\r\n\r\nexport interface IMyOptions {\r\n    dateRange?: boolean;\r\n    showTime?: boolean;\r\n    showType?: ShowType;\r\n    dayLabels?: IMyDayLabels;\r\n    monthLabels?: IMyMonthLabels;\r\n    yearTxt?: string;\r\n    dateFormat?: string;\r\n    defaultView?: DefaultView;\r\n    firstDayOfWeek?: string;\r\n    satHighlight?: boolean;\r\n    sunHighlight?: boolean;\r\n    highlightDates?: Array<IMyDate>;\r\n    markCurrentDay?: boolean;\r\n    markCurrentMonth?: boolean;\r\n    markCurrentYear?: boolean;\r\n    monthSelector?: boolean;\r\n    yearSelector?: boolean;\r\n    disableHeaderButtons?: boolean;\r\n    showWeekNumbers?: boolean;\r\n    selectorHeight?: string;\r\n    selectorWidth?: string;\r\n    disableUntil?: IMyDate;\r\n    disableSince?: IMyDate;\r\n    disableDates?: Array<IMyDate>;\r\n    disableDateRanges?: Array<IMyDateRange>;\r\n    disableWeekends?: boolean;\r\n    disableWeekdays?: Array<string>;\r\n    enableDates?: Array<IMyDate>;\r\n    markDates?: Array<IMyMarkedDates>;\r\n    markWeekends?: IMyMarkedDate;\r\n    closeSelectorOnDateSelect?: boolean;\r\n    closeSelectorOnDocumentClick?: boolean;\r\n    minYear?: Year;\r\n    maxYear?: Year;\r\n    focusInputOnDateSelect?: boolean;\r\n    moveFocusByArrowKeys?: boolean;\r\n    dateRangeDatesDelimiter?: string;\r\n    inputFieldValidation?: boolean;\r\n    stylesData?: IMyStyles;\r\n    ariaLabelPrevMonth?: string;\r\n    ariaLabelNextMonth?: string;\r\n    shortcuts?: Array<IMyShortcuts>;\r\n    timeBtnText?: string;\r\n    dateBtnText?: string;\r\n    commitBtnText?: string;\r\n    weekText?: string;\r\n    returnFormat?: string;\r\n    placeholder?: string;\r\n    timeFormat?: string;\r\n    range?: any;\r\n    monthRangeValue?: number;\r\n    message?: any;\r\n   \r\n    viewType?: ViewType | string;\r\n    enableDynamic?: boolean;\r\n    showDynamicView?: boolean;\r\n    dynamicValue?: DynamicData;\r\n    // \r\n    dynamicValueChanged?: (e: {text: string, value: {}}) => void;\r\n    /**  */\r\n    previousMaxDays?: number;\r\n    /**  */\r\n    futureMaxDays?: number;\r\n    /**   */\r\n    dynamicLocale?: any;\r\n    /**   */\r\n    showPresent?: boolean;\r\n\r\n    hourStep?: number;\r\n    minuteStep?: number;\r\n    secondStep?: number;\r\n}\r\n\r\n\r\n\r\n /** switch: together:  switch */\r\nexport enum ViewType {\r\n    Switch = 'switch',\r\n    Together = 'together'\r\n};","import { Component, ElementRef, ViewEncapsulation, ViewChild, Renderer2, ChangeDetectorRef, HostBinding, Output, EventEmitter } from '@angular/core';\r\nimport {\r\n    IMyDate, IMyDateRange, IMyMonth, IMyCalendarDay, IMyCalendarMonth, IMyCalendarYear,\r\n    IMyWeek, IMyOptions, IMySelectorPosition, IMyCalendarViewChanged, IMyRangeDateSelection, IMyDateModel,\r\n    IMyMonthRow\r\n} from '../../interfaces/public-api';\r\nimport { UtilService } from '../../services/public-api';\r\nimport { DefaultView, KeyCode, MonthId, ResetDateType } from '../../enums/public-api';\r\nimport {\r\n    DOT, UNDER_LINE, D, M, Y, DATE_ROW_COUNT, DATE_COL_COUNT, MONTH_ROW_COUNT, MONTH_COL_COUNT,\r\n    YEAR_ROW_COUNT, YEAR_COL_COUNT, SU, MO, TU, WE, TH, FR, SA, EMPTY_STR, STYLE\r\n} from '../../constants/constants';\r\nimport { TimePickerPanelComponent } from '@farris/ui-time-picker';\r\nimport { flatten, cloneDeep } from 'lodash-es';\r\nimport { ViewType } from '../../interfaces/my-options.interface';\r\nimport { DateTimeHelperService } from '@farris/ui-common/date';\r\n@Component({\r\n    selector: 'farris-datepicker-calendar',\r\n    templateUrl: './calendar.component.html',\r\n    providers: [UtilService],\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\nexport class CalendarComponent {\r\n    @ViewChild('selectorEl') selectorEl: ElementRef;\r\n    @ViewChild('styleEl') styleEl: ElementRef;\r\n    @ViewChild('endTimeRef') endTimeRef: TimePickerPanelComponent;\r\n    @ViewChild('dynamicViewEle') dynamicViewEle: ElementRef;\r\n\r\n    @HostBinding('style.position') position = 'static';\r\n\r\n    @Output() dynamicViewShow = new EventEmitter();\r\n\r\n    dateHlp: DateTimeHelperService = null;\r\n\r\n    opts: IMyOptions;\r\n    visibleMonth: IMyMonth = { monthTxt: EMPTY_STR, monthNbr: 0, year: 0, yearTxt: EMPTY_STR };\r\n    visibleMonth_range: IMyMonth = { monthTxt: EMPTY_STR, monthNbr: 0, year: 0, yearTxt: EMPTY_STR };\r\n    selectedMonth: IMyMonth = { monthNbr: 0, year: 0 };\r\n    selectedMonth_range: IMyMonth = { monthNbr: 0, year: 0 };\r\n    selectedDate: IMyDate = { year: 0, month: 0, day: 0 };\r\n    selectedDateRange: IMyDateRange = { begin: { year: 0, month: 0, day: 0 }, end: { year: 0, month: 0, day: 0 } };\r\n    selectedWeek: IMyWeek = { weekNbr: 0, year: 0 };\r\n    weekDays: Array<string> = [];\r\n    dates: Array<IMyWeek> = [];\r\n    dates_range: Array<IMyWeek> = [];\r\n    months: Array<IMyMonthRow> = [];\r\n    months_range: Array<IMyMonthRow> = [];\r\n    years: Array<Array<IMyCalendarYear>> = [];\r\n    years_range: Array<Array<IMyCalendarYear>> = [];\r\n    timeVlaue: string;\r\n    timeVlaue_range: string;\r\n\r\n    dayIdx = 0;\r\n    weekDayOpts: Array<string> = [SU, MO, TU, WE, TH, FR, SA];\r\n\r\n    selectMonth = false;\r\n    selectMonth_range = false;\r\n    selectYear = false;\r\n    selectYear_range = false;\r\n    selectTime = false;\r\n\r\n    dateChanged: (dm: IMyDateModel, close: boolean) => void;\r\n    calendarViewChanged: (cvc: IMyCalendarViewChanged) => void;\r\n    rangeDateSelection: (rds: IMyRangeDateSelection) => void;\r\n\r\n\r\n    closedByEsc: () => void;\r\n    selectorPos: IMySelectorPosition = null;\r\n    scrollDiff = 0;\r\n\r\n    prevViewDisabled = false;\r\n    nextViewDisabled = false;\r\n    prevDobViewDisabled = false;\r\n    nextDobViewDisabled = false;\r\n\r\n    prevViewDisabled_range = false;\r\n    nextViewDisabled_range = false;\r\n    prevDobViewDisabled_range = false;\r\n    nextDobViewDisabled_range = false;\r\n\r\n    getTimeStr(date: Date): string {\r\n        const hour = this.utilService.preZero(date.getHours());\r\n        const minute = this.utilService.preZero(date.getMinutes());\r\n        const second = this.utilService.preZero(date.getSeconds());\r\n        return `${hour}:${minute}:${second}`;\r\n    }\r\n    // \r\n    disabledHours = () => {\r\n        const min = this.opts.disableUntil;\r\n        const max = this.opts.disableSince;\r\n        const currentDate = this.opts.dateRange ? this.selectedDateRange.begin : this.selectedDate;\r\n        const res = this.utilService.disabledHours(min, max, currentDate);\r\n        return res;\r\n    }\r\n    // \r\n    disabledMinutes = (hour: number) => {\r\n        const min = this.opts.disableUntil;\r\n        const max = this.opts.disableSince;\r\n        const currentDate = this.opts.dateRange ? this.selectedDateRange.begin : this.selectedDate;\r\n        const res = this.utilService.disabledMinutes(min, max, hour, currentDate);\r\n        return res;\r\n    }\r\n    // \r\n    disabledSeconds = (hour: number, minute: number) => {\r\n        const min = this.opts.disableUntil;\r\n        const max = this.opts.disableSince;\r\n        const currentDate = this.opts.dateRange ? this.selectedDateRange.begin : this.selectedDate;\r\n        const res = this.utilService.disabledSeconds(min, max, hour, minute, currentDate);\r\n        return res;\r\n    }\r\n\r\n\r\n    disabledHours2 = () => {\r\n        const min = this.opts.disableUntil;\r\n        const max = this.opts.disableSince;\r\n        const currentDate = this.opts.dateRange ? this.selectedDateRange.end : this.selectedDate;\r\n        const res = this.utilService.disabledHours(min, max, currentDate);\r\n        return res;\r\n    }\r\n    // \r\n    disabledMinutes2 = (hour: number) => {\r\n        const min = this.opts.disableUntil;\r\n        const max = this.opts.disableSince;\r\n        const currentDate = this.opts.dateRange ? this.selectedDateRange.end : this.selectedDate;\r\n        const res = this.utilService.disabledMinutes(min, max, hour, currentDate);\r\n        return res;\r\n    }\r\n    // \r\n    disabledSeconds2 = (hour: number, minute: number) => {\r\n        const min = this.opts.disableUntil;\r\n        const max = this.opts.disableSince;\r\n        const currentDate = this.opts.dateRange ? this.selectedDateRange.end : this.selectedDate;\r\n        const res = this.utilService.disabledSeconds(min, max, hour, minute, currentDate);\r\n        return res;\r\n    }\r\n\r\n    btnDynamicDisabled = true;\r\n\r\n    constructor(private renderer: Renderer2, private cdr: ChangeDetectorRef, private utilService: UtilService) { }\r\n\r\n    initialize(\r\n        opts: IMyOptions,\r\n        defaultMonth: string,\r\n        selectorPos: IMySelectorPosition,\r\n        inputValue: string,\r\n        dc: (dm: IMyDateModel, close: boolean) => void,\r\n        cvc: (cvc: IMyCalendarViewChanged) => void,\r\n        rds: (rds: IMyRangeDateSelection) => void,\r\n        cbe: () => void\r\n    ): void {\r\n        this.opts = opts;\r\n        this.selectorPos = selectorPos;\r\n        this.weekDays.length = 0;\r\n        const { defaultView, dateRange, firstDayOfWeek, dayLabels, stylesData, yearTxt } = this.opts;\r\n        this.visibleMonth.yearTxt = yearTxt;\r\n        this.visibleMonth_range.yearTxt = yearTxt;\r\n        // if (stylesData.styles.length) {\r\n        //     const styleElTemp: any = this.renderer.createElement(STYLE);\r\n        //     this.renderer.appendChild(styleElTemp, this.renderer.createText(stylesData.styles));\r\n        //     this.renderer.appendChild(this.styleEl.nativeElement, styleElTemp);\r\n        // }\r\n\r\n        this.dayIdx = this.weekDayOpts.indexOf(firstDayOfWeek);\r\n        if (this.dayIdx !== -1) {\r\n            let idx: number = this.dayIdx;\r\n            // tslint:disable-next-line:prefer-for-of\r\n            for (let i = 0; i < this.weekDayOpts.length; i++) {\r\n                this.weekDays.push(dayLabels[this.weekDayOpts[idx]]);\r\n                idx = this.weekDayOpts[idx] === SA ? 0 : idx + 1;\r\n            }\r\n        }\r\n        let today: IMyDate = this.getToday();\r\n        const isInDisableRange = this.utilService.isDisabledDate(today, this.opts);\r\n        today = !isInDisableRange ? today : this.utilService.getNearDate(today, this.opts.disableUntil, this.opts.disableSince);\r\n\r\n        switch (defaultView) {\r\n            case DefaultView.Month:\r\n                this.selectedMonth = { monthNbr: 0, year: today.year };\r\n                this.selectedMonth_range = { monthNbr: 0, year: today.year + 1 };\r\n                break;\r\n            case DefaultView.Year:\r\n                this.selectedMonth = { monthNbr: 0, year: today.year };\r\n                this.selectedMonth_range = { monthNbr: 0, year: today.year + 10 };\r\n                break;\r\n            default:\r\n                this.selectedMonth = { monthNbr: today.month, year: today.year };\r\n                if (today.month >= 12) {\r\n                    this.selectedMonth_range = { monthNbr: 1, year: today.year + 1 };\r\n                } else {\r\n                    this.selectedMonth_range = { monthNbr: today.month + this.opts.monthRangeValue, year: today.year };\r\n                }\r\n                break;\r\n        }\r\n        if (defaultMonth && defaultMonth.length) {\r\n            this.selectedMonth = this.utilService.parseDefaultMonth(defaultMonth);\r\n            this.selectedMonth_range = this.utilService.parseDefaultMonth(defaultMonth);\r\n            if (this.selectedMonth_range.monthNbr >= 12) {\r\n                this.selectedMonth_range.year++;\r\n                this.selectedMonth_range.monthNbr = 1;\r\n            } else {\r\n                this.selectedMonth_range.monthNbr = this.selectedMonth_range.monthNbr + this.opts.monthRangeValue;\r\n            }\r\n        }\r\n\r\n        if (!dateRange) {\r\n            // Single date mode\r\n            const date: IMyDate = this.utilService.isDateValid(inputValue, this.opts, true);\r\n            if (this.utilService.isInitializedDate(date)) {\r\n                this.selectedDate = date;\r\n                const hour = this.utilService.preZero(date.hour);\r\n                const minute = this.utilService.preZero(date.minute);\r\n                const second = this.utilService.preZero(date.second);\r\n                this.timeVlaue = `${hour}:${minute}:${second}`;\r\n                this.selectedMonth = { monthNbr: date.month, year: date.year };\r\n            }\r\n        } else {\r\n            // Date range mode\r\n            const { begin, end } = this.utilService.isDateValidDateRange(inputValue, this.opts);\r\n            if (this.utilService.isInitializedDate(begin) && this.utilService.isInitializedDate(end)) {\r\n                this.selectedDateRange = { begin, end };\r\n                const hour = this.utilService.preZero(begin.hour);\r\n                const minute = this.utilService.preZero(begin.minute);\r\n                const second = this.utilService.preZero(begin.second);\r\n                this.timeVlaue = `${hour}:${minute}:${second}`;\r\n                const _hour = this.utilService.preZero(end.hour);\r\n                const _minute = this.utilService.preZero(end.minute);\r\n                const _second = this.utilService.preZero(end.second);\r\n                this.timeVlaue_range = `${_hour}:${_minute}:${_second}`;\r\n\r\n                this.selectedMonth = { monthNbr: begin.month, year: begin.year };\r\n\r\n                if (begin.month === end.month && begin.year === end.year) {\r\n                    if (end.month >= 12) {\r\n                        this.selectedMonth_range = { monthNbr: 1, year: end.year + 1 };\r\n                    } else {\r\n                        let endyear = end.year;\r\n                        if (defaultView === DefaultView.Month) {\r\n                            endyear = endyear + 1;\r\n                        }\r\n\r\n                        this.selectedMonth_range = { monthNbr: end.month + this.opts.monthRangeValue, year: endyear };\r\n                    }\r\n                } else {\r\n                    if (defaultView === DefaultView.Month && begin.year === end.year) {\r\n                        this.selectedMonth_range = { monthNbr: end.month, year: end.year + 1 };\r\n                    } else {\r\n                        this.selectedMonth_range = { monthNbr: end.month, year: end.year };\r\n                    }\r\n                }\r\n                const weekNbr =\r\n                    this.utilService.getWeekNumber(begin) === this.utilService.getWeekNumber(end)\r\n                        ? this.utilService.getWeekNumber(begin)\r\n                        : 0;\r\n                this.selectedWeek = { weekNbr, year: begin.year };\r\n            }\r\n\r\n        }\r\n\r\n        this.dateChanged = dc;\r\n        this.calendarViewChanged = cvc;\r\n        this.rangeDateSelection = rds;\r\n        this.closedByEsc = cbe;\r\n        this.setCalendarVisibleMonth();\r\n\r\n        if (defaultView === DefaultView.Month) {\r\n            this.onMonthViewBtnClicked();\r\n            if (dateRange) {\r\n                this.onMonthViewBtnClicked(true);\r\n            }\r\n        } else if (defaultView === DefaultView.Year) {\r\n            this.onYearViewBtnClicked();\r\n            if (dateRange) {\r\n                this.onYearViewBtnClicked(true);\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    resetDateValue(value: ResetDateType): void {\r\n        if (value === ResetDateType.singleDate || value === ResetDateType.both) {\r\n            this.selectedDate = this.utilService.resetDate();\r\n        }\r\n        if (value === ResetDateType.dateRange || value === ResetDateType.both) {\r\n            this.selectedDateRange.begin = this.utilService.resetDate();\r\n            this.selectedDateRange.end = this.utilService.resetDate();\r\n        }\r\n    }\r\n\r\n    resetMonthYearSelect(isSecondCalendar?: boolean): void {\r\n        if (!isSecondCalendar) {\r\n            this.selectMonth = false;\r\n            this.selectYear = false;\r\n        } else {\r\n            this.selectMonth_range = false;\r\n            this.selectYear_range = false;\r\n        }\r\n    }\r\n\r\n    onMonthViewBtnClicked(isSecondCalendar?: boolean): void {\r\n        this.selectTime = false;\r\n        if (!isSecondCalendar) {\r\n            this.selectMonth = !this.selectMonth;\r\n            this.selectYear = false;\r\n            if (this.selectMonth) {\r\n                this.generateMonths(isSecondCalendar);\r\n            } else {\r\n                this.visibleMonth.year = this.selectedMonth.year;\r\n            }\r\n        } else {\r\n            this.selectMonth_range = !this.selectMonth_range;\r\n            this.selectYear_range = false;\r\n            if (this.selectMonth_range) {\r\n                this.generateMonths(isSecondCalendar);\r\n            } else {\r\n                this.visibleMonth_range.year = this.selectedMonth_range.year;\r\n            }\r\n            this.cdr.detectChanges();\r\n        }\r\n    }\r\n\r\n    onMonthCellClicked(cell: IMyCalendarMonth, isSecondCalendar: boolean): void {\r\n        if (!isSecondCalendar) {\r\n            const { year, monthNbr } = this.visibleMonth;\r\n\r\n            const mc: boolean = cell.nbr !== monthNbr;\r\n            this.visibleMonth = {\r\n                monthTxt: this.opts.monthLabels[cell.nbr],\r\n                monthNbr: cell.nbr,\r\n                year,\r\n                yearTxt: this.opts.yearTxt\r\n            };\r\n            this.selectedMonth.year = this.visibleMonth.year;\r\n            if (this.opts.showType === 2) {\r\n                this.toSelectMonth(this.visibleMonth);\r\n            } else {\r\n                this.generateCalendar(cell.nbr, year, mc, isSecondCalendar);\r\n                this.selectMonth = false;\r\n            }\r\n        } else {\r\n            const { year, monthNbr } = this.visibleMonth_range;\r\n\r\n            const mc: boolean = cell.nbr !== monthNbr;\r\n            this.visibleMonth_range = {\r\n                monthTxt: this.opts.monthLabels[cell.nbr],\r\n                monthNbr: cell.nbr,\r\n                year,\r\n                yearTxt: this.opts.yearTxt\r\n            };\r\n            this.selectedMonth_range.year = this.visibleMonth_range.year;\r\n            if (this.opts.showType === 2) {\r\n                this.toSelectMonth(this.visibleMonth_range);\r\n            } else {\r\n                this.generateCalendar(cell.nbr, year, mc, isSecondCalendar);\r\n                this.selectMonth_range = false;\r\n            }\r\n        }\r\n    }\r\n\r\n    onMonthCellKeyDown(cell: IMyCalendarMonth) {\r\n        // Make possible to move focus by arrow keys\r\n        const { sourceRow, sourceCol } = this.getSourceRowAndColumnFromEvent(event);\r\n        const { moveFocus, targetRow, targetCol } = this.getTargetFocusRowAndColumn(\r\n            event,\r\n            sourceRow,\r\n            sourceCol,\r\n            MONTH_ROW_COUNT,\r\n            MONTH_COL_COUNT\r\n        );\r\n\r\n        if (moveFocus) {\r\n            this.focusCellElement(M, targetRow, targetCol);\r\n        }\r\n    }\r\n\r\n    onYearViewBtnClicked(isSecondCalendar?: boolean): void {\r\n        this.selectTime = false;\r\n        if (!isSecondCalendar) {\r\n            this.visibleMonth.year = this.selectedMonth.year;\r\n            if (!this.selectYear) {\r\n                this.generateYears(this.visibleMonth.year, isSecondCalendar);\r\n            } else {\r\n                this.generateCalendar(this.visibleMonth.monthNbr, this.visibleMonth.year, false, isSecondCalendar);\r\n            }\r\n\r\n            this.selectYear = this.opts.showType === 3 ? true : !this.selectYear;\r\n            if (this.opts.showType === 2) {\r\n                this.selectMonth = !this.selectMonth;\r\n            } else {\r\n                this.selectMonth = false;\r\n            }\r\n            // this.selectYear = !this.selectYear;\r\n            // this.selectMonth = false;\r\n        } else {\r\n            this.visibleMonth_range.year = this.selectedMonth_range.year;\r\n            if (!this.selectYear_range) {\r\n                this.generateYears(this.visibleMonth_range.year, isSecondCalendar);\r\n            } else {\r\n                this.generateCalendar(this.visibleMonth_range.monthNbr, this.visibleMonth_range.year, false, isSecondCalendar);\r\n            }\r\n            this.selectYear_range = this.opts.showType === 3 ? true : !this.selectYear_range;\r\n            if (this.opts.showType === 2) {\r\n                this.selectMonth_range = !this.selectMonth_range;\r\n            } else {\r\n                this.selectMonth_range = false;\r\n            }\r\n        }\r\n        this.cdr.detectChanges();\r\n    }\r\n\r\n    onYearCellClicked(cell: IMyCalendarYear, isSecondCalendar?: boolean): void {\r\n        if (!isSecondCalendar) {\r\n            const { year, monthNbr, monthTxt } = this.visibleMonth;\r\n\r\n            const yc: boolean = cell.year !== year;\r\n            this.visibleMonth = { monthTxt, monthNbr, year: cell.year, yearTxt: this.opts.yearTxt };\r\n            this.selectedMonth.year = this.visibleMonth.year;\r\n            if (this.opts.showType === 3) {\r\n                this.toSelectYear({ year: this.visibleMonth.year });\r\n            } else if (this.opts.showType === 2) {\r\n                this.generateMonths(isSecondCalendar);\r\n                this.selectYear = false;\r\n                this.selectMonth = true;\r\n            } else {\r\n                this.generateCalendar(monthNbr, cell.year, yc, isSecondCalendar);\r\n                this.selectYear = false;\r\n            }\r\n        } else {\r\n            const { year, monthNbr, monthTxt } = this.visibleMonth_range;\r\n\r\n            const yc: boolean = cell.year !== year;\r\n            this.visibleMonth_range = {\r\n                monthTxt,\r\n                monthNbr,\r\n                year: cell.year,\r\n                yearTxt: this.opts.yearTxt\r\n            };\r\n            this.selectedMonth_range.year = this.visibleMonth_range.year;\r\n            if (this.opts.showType === 3) {\r\n                this.toSelectYear({ year: this.visibleMonth_range.year });\r\n            } else if (this.opts.showType === 2) {\r\n                this.generateMonths(isSecondCalendar);\r\n                this.selectYear_range = false;\r\n                this.selectMonth_range = true;\r\n            } else {\r\n                this.generateCalendar(monthNbr, cell.year, yc, isSecondCalendar);\r\n                this.selectYear_range = false;\r\n            }\r\n        }\r\n    }\r\n\r\n    onYearCellKeyDown(cell: IMyCalendarYear) {\r\n        // Make possible to move focus by arrow keys\r\n        const { sourceRow, sourceCol } = this.getSourceRowAndColumnFromEvent(event);\r\n        const { moveFocus, targetRow, targetCol } = this.getTargetFocusRowAndColumn(\r\n            event,\r\n            sourceRow,\r\n            sourceCol,\r\n            YEAR_ROW_COUNT,\r\n            YEAR_COL_COUNT\r\n        );\r\n\r\n        if (moveFocus) {\r\n            this.focusCellElement(Y, targetRow, targetCol);\r\n        }\r\n    }\r\n\r\n    generateMonths(isSecondCalendar?: boolean): void {\r\n        const today: IMyDate = this.getToday();\r\n        const { disableUntil, disableSince } = this.opts;\r\n\r\n        // tslint:disable-next-line:one-variable-per-declaration\r\n        let year: number, monthNbr: number;\r\n        if (!isSecondCalendar) {\r\n            this.months.length = 0;\r\n            year = this.visibleMonth.year;\r\n            monthNbr = this.visibleMonth.monthNbr;\r\n        } else {\r\n            this.months_range.length = 0;\r\n            year = this.visibleMonth_range.year;\r\n            monthNbr = this.visibleMonth_range.monthNbr;\r\n        }\r\n\r\n        for (let i = 1; i <= 12; i += 3) {\r\n            const row: Array<IMyCalendarMonth> = [];\r\n            for (let j = i; j < i + 3; j++) {\r\n                const disabled: boolean =\r\n                    this.utilService.isMonthDisabledByDisableUntil(\r\n                        { year, month: j, day: this.daysInMonth(j, year) },\r\n                        disableUntil\r\n                    ) || this.utilService.isMonthDisabledByDisableSince({ year, month: j, day: 1 }, disableSince);\r\n\r\n                row.push({\r\n                    nbr: j,\r\n                    name: this.opts.monthLabels[j],\r\n                    currMonth: j === today.month && year === today.year,\r\n                    disabled,\r\n                    monthObj: { year, month: j }\r\n                });\r\n            }\r\n            if (!isSecondCalendar) {\r\n                this.months.push({ row, year });\r\n            } else {\r\n                this.months_range.push({ row, year });\r\n            }\r\n        }\r\n        this.setMonthViewHeaderBtnDisabledState(year, isSecondCalendar);\r\n        this.generateCalendar(this.selectedDate.month, year, isSecondCalendar);\r\n    }\r\n\r\n    generateYears(inputYear: number, isSecondCalendar?: boolean): void {\r\n        const { minYear, maxYear, disableUntil, disableSince } = this.opts;\r\n\r\n        let y: number = inputYear - (inputYear % 10);\r\n\r\n        const { year, monthNbr } = this.visibleMonth;\r\n\r\n        if (!isSecondCalendar) {\r\n            this.years.length = 0;\r\n        } else {\r\n            if (!this.years_range.length && ((this.years&& this.years.length) && y < this.years[3][2].year && y > this.years[0][0].year)  && this.opts.showType === 3) {\r\n                y+= 10;\r\n            }\r\n            this.years_range.length = 0;\r\n            const allYears = flatten<any>(this.years_range);\r\n            if (allYears.findIndex(n => n.year == inputYear) > -1) {\r\n                y = this.years_range[3][2].year;\r\n            }\r\n        }\r\n        const today: IMyDate = this.getToday();\r\n\r\n        for (let i = y - 1; i < y + 10; i += 3) {\r\n            const row: Array<IMyCalendarYear> = [];\r\n            for (let j = i; j < i + 3; j++) {\r\n                const disabled: boolean =\r\n                    this.utilService.isMonthDisabledByDisableUntil(\r\n                        {\r\n                            year: j,\r\n                            month: monthNbr,\r\n                            day: this.daysInMonth(monthNbr, j)\r\n                        },\r\n                        disableUntil\r\n                    ) ||\r\n                    this.utilService.isMonthDisabledByDisableSince({ year: j, month: monthNbr, day: 1 }, disableSince);\r\n\r\n                const minMax: boolean = j < minYear || j > maxYear;\r\n                row.push({\r\n                    year: j,\r\n                    currYear: j === today.year,\r\n                    selected: j === year,\r\n                    disabled: disabled || minMax,\r\n                    yearObj: { year: j }\r\n                });\r\n            }\r\n            if (!isSecondCalendar) {\r\n                this.years.push(row);\r\n            } else {\r\n                this.years_range.push(row);\r\n            }\r\n        }\r\n        if (!isSecondCalendar) {\r\n            this.setYearViewHeaderBtnDisabledState(this.years[0][1].year, this.years[3][1].year, isSecondCalendar);\r\n        } else {\r\n            this.setYearViewHeaderBtnDisabledState(\r\n                this.years_range[0][1].year,\r\n                this.years_range[3][1].year,\r\n                isSecondCalendar\r\n            );\r\n        }\r\n    }\r\n\r\n    setCalendarVisibleMonth(): void {\r\n        // Sets visible month of calendar\r\n        const { year, monthNbr } = this.selectedMonth;\r\n        this.visibleMonth = {\r\n            monthTxt: this.opts.monthLabels[monthNbr],\r\n            monthNbr,\r\n            year,\r\n            yearTxt: this.opts.yearTxt\r\n        };\r\n\r\n        // Create current month\r\n        if (this.opts.dateRange) {\r\n            this.visibleMonth_range = {\r\n                monthTxt: this.opts.monthLabels[this.selectedMonth_range.monthNbr],\r\n                monthNbr: this.selectedMonth_range.monthNbr,\r\n                year: this.selectedMonth_range.year,\r\n                yearTxt: this.opts.yearTxt\r\n            };\r\n            this.generateCalendar(this.selectedMonth_range.monthNbr, this.selectedMonth_range.year, true, true);\r\n        }\r\n        this.generateCalendar(monthNbr, year, true, false);\r\n    }\r\n\r\n    onPrevNavigateBtnClicked(event?: any, isSecondCalendar?: boolean): void {\r\n        if (!isSecondCalendar) {\r\n            if (event) {\r\n                if (!this.selectMonth && !this.selectYear) {\r\n                    this.setDateViewMonth(isSecondCalendar, false);\r\n                } else if (this.selectMonth) {\r\n                    this.visibleMonth.year--;\r\n                    this.generateMonths(isSecondCalendar);\r\n                } else if (this.selectYear) {\r\n                    this.generateYears(this.years[2][2].year - 10);\r\n                }\r\n            } else {\r\n                if (!this.selectMonth && !this.selectYear) {\r\n                    this.visibleMonth.year--;\r\n                    this.setDateViewMonth(isSecondCalendar);\r\n                } else if (this.selectMonth) {\r\n                    this.visibleMonth.year--;\r\n                    this.generateMonths(isSecondCalendar);\r\n                } else if (this.selectYear) {\r\n                    this.generateYears(this.years[2][2].year - 10, isSecondCalendar);\r\n                }\r\n            }\r\n        } else {\r\n            if (event) {\r\n                if (!this.selectMonth_range && !this.selectYear_range) {\r\n                    this.setDateViewMonth(isSecondCalendar, false);\r\n                } else if (this.selectMonth_range) {\r\n                    this.visibleMonth_range.year--;\r\n                    this.generateMonths(isSecondCalendar);\r\n                } else if (this.selectYear_range) {\r\n                    this.generateYears(this.years_range[2][2].year - 10);\r\n                }\r\n            } else {\r\n                if (!this.selectMonth_range && !this.selectYear_range) {\r\n                    this.visibleMonth_range.year--;\r\n                    this.setDateViewMonth(isSecondCalendar);\r\n                } else if (this.selectMonth_range) {\r\n                    this.visibleMonth_range.year--;\r\n                    this.generateMonths(isSecondCalendar);\r\n                } else if (this.selectYear_range) {\r\n                    this.generateYears(this.years_range[2][2].year - 10, isSecondCalendar);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    onNextNavigateBtnClicked(event?: any, isSecondCalendar?: boolean): void {\r\n        if (!isSecondCalendar) {\r\n            if (event) {\r\n                if (!this.selectMonth && !this.selectYear) {\r\n                    this.setDateViewMonth(isSecondCalendar, true);\r\n                } else if (this.selectMonth) {\r\n                    this.visibleMonth.year++;\r\n                    this.generateMonths();\r\n                } else if (this.selectYear) {\r\n                    this.generateYears(this.years[2][2].year + 10);\r\n                }\r\n            } else {\r\n                if (!this.selectMonth && !this.selectYear) {\r\n                    this.visibleMonth.year++;\r\n                    this.setDateViewMonth(isSecondCalendar);\r\n                } else if (this.selectMonth) {\r\n                    this.visibleMonth.year++;\r\n                    this.generateMonths();\r\n                } else if (this.selectYear) {\r\n                    this.generateYears(this.years[2][2].year + 10);\r\n                }\r\n            }\r\n        } else {\r\n            if (event) {\r\n                if (!this.selectMonth_range && !this.selectYear_range) {\r\n                    this.setDateViewMonth(isSecondCalendar, true);\r\n                } else if (this.selectMonth_range) {\r\n                    this.visibleMonth_range.year++;\r\n                    this.generateMonths(isSecondCalendar);\r\n                } else if (this.selectYear_range) {\r\n                    this.generateYears(this.years_range[2][2].year + 10, isSecondCalendar);\r\n                }\r\n            } else {\r\n                if (!this.selectMonth_range && !this.selectYear_range) {\r\n                    this.visibleMonth_range.year++;\r\n                    this.setDateViewMonth(isSecondCalendar);\r\n                } else if (this.selectMonth_range) {\r\n                    this.visibleMonth_range.year++;\r\n                    this.generateMonths(isSecondCalendar);\r\n                } else if (this.selectYear_range) {\r\n                    this.generateYears(this.years_range[2][2].year + 10, isSecondCalendar);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    setDateViewMonth(isSecondCalendar?: boolean, isNext?: boolean): void {\r\n        let change: number;\r\n        if (isNext === undefined) {\r\n            change = 0;\r\n        } else {\r\n            change = isNext ? 1 : -1;\r\n        }\r\n        if (!isSecondCalendar) {\r\n            const { year, monthNbr } = this.visibleMonth;\r\n\r\n            const d: Date = this.getDate(year, monthNbr, 1);\r\n            d.setMonth(d.getMonth() + change);\r\n\r\n            const y: number = d.getFullYear();\r\n            const m: number = d.getMonth() + 1;\r\n\r\n            this.visibleMonth = {\r\n                monthTxt: this.opts.monthLabels[m],\r\n                monthNbr: m,\r\n                year: y,\r\n                yearTxt: this.opts.yearTxt\r\n            };\r\n            this.generateCalendar(m, y, true, isSecondCalendar);\r\n        } else {\r\n            const { year, monthNbr } = this.visibleMonth_range;\r\n\r\n            const d: Date = this.getDate(year, monthNbr, 1);\r\n            d.setMonth(d.getMonth() + change);\r\n\r\n            const y: number = d.getFullYear();\r\n            const m: number = d.getMonth() + 1;\r\n\r\n            this.visibleMonth_range = {\r\n                monthTxt: this.opts.monthLabels[m],\r\n                monthNbr: m,\r\n                year: y,\r\n                yearTxt: this.opts.yearTxt\r\n            };\r\n            this.generateCalendar(m, y, true, isSecondCalendar);\r\n        }\r\n    }\r\n\r\n    onCloseSelector(event: any): void {\r\n        const keyCode: number = this.utilService.getKeyCodeFromEvent(event);\r\n        if (keyCode === KeyCode.esc) {\r\n            this.closedByEsc();\r\n        }\r\n    }\r\n\r\n    onDayCellClicked(cell: IMyCalendarDay, isSecondCalendar?: boolean): void {\r\n        if (cell.cmo === 1) {\r\n            this.onPrevNavigateBtnClicked(true, isSecondCalendar);\r\n        } else if (cell.cmo === 3) {\r\n            this.onNextNavigateBtnClicked(true, isSecondCalendar);\r\n        }\r\n        this.selectDate(cell.dateObj);\r\n        this.resetMonthYearSelect(isSecondCalendar);\r\n    }\r\n\r\n    onDayCellKeyDown(cell: IMyCalendarDay) {\r\n        // Make possible to move focus by arrow keys\r\n        const { sourceRow, sourceCol } = this.getSourceRowAndColumnFromEvent(event);\r\n        const { moveFocus, targetRow, targetCol } = this.getTargetFocusRowAndColumn(\r\n            event,\r\n            sourceRow,\r\n            sourceCol,\r\n            DATE_ROW_COUNT,\r\n            DATE_COL_COUNT\r\n        );\r\n\r\n        if (moveFocus) {\r\n            this.focusCellElement(D, targetRow, targetCol);\r\n        }\r\n    }\r\n    onDayCellMouseEnter(cell: any, isSecondCalendar?: boolean) {\r\n        if (isSecondCalendar) {\r\n            for (const w of this.dates) {\r\n                for (const day of w.week) {\r\n                    day.range =\r\n                        (this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin, day.dateObj) &&\r\n                            this.utilService.isDateSameOrEarlier(day.dateObj, cell.dateObj)) ||\r\n                        (this.utilService.isDateSameOrEarlier(day.dateObj, this.selectedDateRange.begin) &&\r\n                            this.utilService.isDateSameOrEarlier(cell.dateObj, day.dateObj));\r\n                }\r\n            }\r\n        } else {\r\n            for (const w of this.dates_range) {\r\n                for (const day of w.week) {\r\n                    day.range =\r\n                        (this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin, day.dateObj) &&\r\n                            this.utilService.isDateSameOrEarlier(day.dateObj, cell.dateObj)) ||\r\n                        (this.utilService.isDateSameOrEarlier(day.dateObj, this.selectedDateRange.begin) &&\r\n                            this.utilService.isDateSameOrEarlier(cell.dateObj, day.dateObj));\r\n                }\r\n            }\r\n        }\r\n    }\r\n    onDayCellMouseLeave(isSecondCalendar?: boolean) {\r\n        if (isSecondCalendar) {\r\n            for (const w of this.dates) {\r\n                for (const day of w.week) {\r\n                    day.range = false;\r\n                }\r\n            }\r\n        } else {\r\n            for (const w of this.dates_range) {\r\n                for (const day of w.week) {\r\n                    day.range = false;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    onMonthCellMouseEnter(cell: any, isSecondCalendar?: boolean) {\r\n        if (isSecondCalendar) {\r\n            for (const item of this.months) {\r\n                for (const month of item.row) {\r\n                    month.range =\r\n                        (this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin, month.monthObj) &&\r\n                            this.utilService.isDateSameOrEarlier(month.monthObj, cell.monthObj)) ||\r\n                        (this.utilService.isDateSameOrEarlier(month.monthObj, this.selectedDateRange.begin) &&\r\n                            this.utilService.isDateSameOrEarlier(cell.monthObj, month.monthObj));\r\n                }\r\n            }\r\n        } else {\r\n            for (const item of this.months_range) {\r\n                for (const month of item.row) {\r\n                    month.range =\r\n                        (this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin, month.monthObj) &&\r\n                            this.utilService.isDateSameOrEarlier(month.monthObj, cell.monthObj)) ||\r\n                        (this.utilService.isDateSameOrEarlier(month.monthObj, this.selectedDateRange.begin) &&\r\n                            this.utilService.isDateSameOrEarlier(cell.monthObj, month.monthObj));\r\n                }\r\n            }\r\n        }\r\n    }\r\n    onMonthCellMouseLeave(isSecondCalendar?: boolean) {\r\n        if (isSecondCalendar) {\r\n            for (const item of this.months) {\r\n                for (const month of item.row) {\r\n                    month.range = false;\r\n                }\r\n            }\r\n        } else {\r\n            for (const item of this.months) {\r\n                for (const month of item.row) {\r\n                    month.range = false;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    onYearCellMouseEnter(cell: any, isSecondCalendar?: boolean) {\r\n        if (isSecondCalendar) {\r\n            for (const item of this.years) {\r\n                for (const year of item) {\r\n                    year.range =\r\n                        (this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin, year.yearObj) &&\r\n                            this.utilService.isDateSameOrEarlier(year.yearObj, cell.yearObj)) ||\r\n                        (this.utilService.isDateSameOrEarlier(year.yearObj, this.selectedDateRange.begin) &&\r\n                            this.utilService.isDateSameOrEarlier(cell.yearObj, year.yearObj));\r\n                }\r\n            }\r\n        } else {\r\n            for (const item of this.years_range) {\r\n                for (const year of item) {\r\n                    year.range =\r\n                        (this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin, year.yearObj) &&\r\n                            this.utilService.isDateSameOrEarlier(year.yearObj, cell.yearObj)) ||\r\n                        (this.utilService.isDateSameOrEarlier(year.yearObj, this.selectedDateRange.begin) &&\r\n                            this.utilService.isDateSameOrEarlier(cell.yearObj, year.yearObj));\r\n                }\r\n            }\r\n        }\r\n    }\r\n    onYearCellMouseLeave(isSecondCalendar?: boolean) {\r\n        if (isSecondCalendar) {\r\n            for (const item of this.years) {\r\n                for (const year of item) {\r\n                    year.range = false;\r\n                }\r\n            }\r\n        } else {\r\n            for (const item of this.years_range) {\r\n                for (const year of item) {\r\n                    year.range = false;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    onWeekClicked(weekData: IMyWeek) {\r\n        const showTime = this.opts.returnFormat && this.opts.returnFormat.toLocaleLowerCase().indexOf('hh:mm') > -1;\r\n        this.selectedWeek = { weekNbr: weekData.weekNbr, year: weekData.year };\r\n\r\n        if (showTime) {\r\n            weekData.week[0].dateObj.hour = 0;\r\n            weekData.week[0].dateObj.minute = 0;\r\n            weekData.week[0].dateObj.second = 0;\r\n\r\n            weekData.week[6].dateObj.hour = 23;\r\n            weekData.week[6].dateObj.minute = 59;\r\n            weekData.week[6].dateObj.second = 59;\r\n        }\r\n\r\n        this.selectDate(weekData.week[0].dateObj);\r\n        this.selectDate(weekData.week[6].dateObj);\r\n    }\r\n    getSourceRowAndColumnFromEvent(event: any): any {\r\n        let sourceRow = 0;\r\n        let sourceCol = 0;\r\n        if (event.target && event.target.id) {\r\n            // value of id is for example: m_0_1 (first number = row, second number = column)\r\n            const arr: Array<string> = event.target.id.split(UNDER_LINE);\r\n            sourceRow = Number(arr[1]);\r\n            sourceCol = Number(arr[2]);\r\n        }\r\n        return { sourceRow, sourceCol };\r\n    }\r\n\r\n    getTargetFocusRowAndColumn(event: any, row: number, col: number, rowCount: number, colCount: number): any {\r\n        let moveFocus = false;\r\n        let targetRow: number = row;\r\n        let targetCol: number = col;\r\n\r\n        const keyCode: number = this.utilService.getKeyCodeFromEvent(event);\r\n        if (keyCode === KeyCode.upArrow && row > 0) {\r\n            moveFocus = true;\r\n            targetRow--;\r\n        } else if (keyCode === KeyCode.downArrow && row < rowCount) {\r\n            moveFocus = true;\r\n            targetRow++;\r\n        } else if (keyCode === KeyCode.leftArrow && col > 0) {\r\n            moveFocus = true;\r\n            targetCol--;\r\n        } else if (keyCode === KeyCode.rightArrow && col < colCount) {\r\n            moveFocus = true;\r\n            targetCol++;\r\n        }\r\n        return { moveFocus, targetRow, targetCol };\r\n    }\r\n\r\n    focusCellElement(type: string, row: number, col: number): void {\r\n        const elem: any = this.selectorEl.nativeElement.querySelector(DOT + type + UNDER_LINE + row + UNDER_LINE + col);\r\n        if (elem) {\r\n            elem.focus();\r\n        }\r\n    }\r\n\r\n    selectDate(date: IMyDate): void {\r\n        const { dateFormat, monthLabels, dateRangeDatesDelimiter, closeSelectorOnDateSelect, showTime, returnFormat } = this.opts;\r\n\r\n        if (this.opts.dateRange) {\r\n            // Date range\r\n            const isBeginDateInitialized: boolean = this.utilService.isInitializedDate(this.selectedDateRange.begin);\r\n            const isEndDateInitialized: boolean = this.utilService.isInitializedDate(this.selectedDateRange.end) &&\r\n                JSON.stringify(this.selectedDateRange.begin) !== JSON.stringify(this.selectedDateRange.end);\r\n\r\n            if (isBeginDateInitialized && isEndDateInitialized) {\r\n                // both already selected - set begin date and reset end date\r\n                this.selectedDateRange.begin = date;\r\n                this.selectedDateRange.end = this.utilService.resetDate();\r\n\r\n                this.rangeDateSelection({\r\n                    isBegin: true,\r\n                    date,\r\n                    jsDate: this.utilService.getDate(date),\r\n                    dateFormat,\r\n                    formatted: this.utilService.formatDate(date, dateFormat, monthLabels),\r\n                    epoc: this.utilService.getEpocTime(date)\r\n                });\r\n            } else if (!isBeginDateInitialized) {\r\n                // begin date\r\n                this.selectedDateRange.begin = date;\r\n                if (!isEndDateInitialized) {\r\n                    this.selectedDateRange.end = date;\r\n                }\r\n                this.rangeDateSelection({\r\n                    isBegin: true,\r\n                    date,\r\n                    jsDate: this.utilService.getDate(date),\r\n                    dateFormat,\r\n                    formatted: this.utilService.formatDate(date, dateFormat, monthLabels),\r\n                    epoc: this.utilService.getEpocTime(date)\r\n                });\r\n            } else {\r\n                // second selection\r\n                const firstDateEarlier: boolean = this.utilService.isDateEarlier(date, this.selectedDateRange.begin);\r\n                if (firstDateEarlier) {\r\n                    const _date = this.selectedDateRange.begin;\r\n                    this.selectedDateRange.end = _date;\r\n                    this.rangeDateSelection({\r\n                        isBegin: false,\r\n                        date: _date,\r\n                        jsDate: this.utilService.getDate(_date),\r\n                        dateFormat,\r\n                        formatted: this.utilService.formatDate(_date, dateFormat, monthLabels),\r\n                        epoc: this.utilService.getEpocTime(_date)\r\n                    });\r\n                    this.selectedDateRange.begin = date;\r\n                    this.rangeDateSelection({\r\n                        isBegin: true,\r\n                        date,\r\n                        jsDate: this.utilService.getDate(date),\r\n                        dateFormat,\r\n                        formatted: this.utilService.formatDate(date, dateFormat, monthLabels),\r\n                        epoc: this.utilService.getEpocTime(date)\r\n                    });\r\n                } else {\r\n                    this.selectedDateRange.end = date;\r\n                    this.rangeDateSelection({\r\n                        isBegin: false,\r\n                        date,\r\n                        jsDate: this.utilService.getDate(date),\r\n                        dateFormat,\r\n                        formatted: this.utilService.formatDate(date, dateFormat, monthLabels),\r\n                        epoc: this.utilService.getEpocTime(date)\r\n                    });\r\n                }\r\n                if (!this.opts.showTime) {\r\n                    this.dateChanged(\r\n                        this.utilService.getDateModel(\r\n                            null,\r\n                            this.selectedDateRange,\r\n                            dateFormat,\r\n                            monthLabels,\r\n                            dateRangeDatesDelimiter,\r\n                            returnFormat\r\n                        ),\r\n                        closeSelectorOnDateSelect\r\n                    );\r\n                }\r\n            }\r\n        } else {\r\n            // Single date\r\n            this.selectedDate = date;\r\n\r\n            if (!this.opts.showTime) {\r\n                this.dateChanged(\r\n                    this.utilService.getDateModel(\r\n                        this.selectedDate,\r\n                        null,\r\n                        dateFormat,\r\n                        monthLabels,\r\n                        dateRangeDatesDelimiter,\r\n                        returnFormat\r\n                    ),\r\n                    showTime ? false : closeSelectorOnDateSelect\r\n                );\r\n            } else {\r\n                if (!this.timeVlaue && this.opts.viewType == ViewType.Together) {\r\n                    this.timeVlaue = this.getTimeStr(new Date);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    toSelectMonth(month: IMyMonth): void {\r\n        const { dateFormat, monthLabels, dateRangeDatesDelimiter, closeSelectorOnDateSelect, showTime, returnFormat } = this.opts;\r\n        if (this.opts.dateRange) {\r\n            // month range\r\n            const isBeginMonthInitialized: boolean = this.utilService.isInitializedMonth(this.selectedDateRange.begin);\r\n            const isEndMonthInitialized: boolean = this.utilService.isInitializedMonth(this.selectedDateRange.end);\r\n            if (isBeginMonthInitialized && isEndMonthInitialized) {\r\n                // both already selected - set begin date and reset end date\r\n                this.selectedDateRange.begin = { year: month.year, month: month.monthNbr };\r\n                this.selectedDateRange.end = this.utilService.resetDate();\r\n                this.rangeDateSelection({\r\n                    isBegin: true,\r\n                    date: this.selectedDateRange.begin,\r\n                    jsDate: this.utilService.getDate(this.selectedDateRange.begin),\r\n                    dateFormat,\r\n                    formatted: this.utilService.formatDate(this.selectedDateRange.begin, dateFormat, monthLabels),\r\n                    epoc: this.utilService.getEpocTime(this.selectedDateRange.begin)\r\n                });\r\n            } else if (!isBeginMonthInitialized) {\r\n                // begin date\r\n                this.selectedDateRange.begin = { year: month.year, month: month.monthNbr };\r\n                this.rangeDateSelection({\r\n                    isBegin: true,\r\n                    date: this.selectedDateRange.begin,\r\n                    jsDate: this.utilService.getDate(this.selectedDateRange.begin),\r\n                    dateFormat,\r\n                    formatted: this.utilService.formatDate(this.selectedDateRange.begin, dateFormat, monthLabels),\r\n                    epoc: this.utilService.getEpocTime(this.selectedDateRange.begin)\r\n                });\r\n            } else {\r\n                // second selection\r\n                const firstDateEarlier: boolean = this.utilService.isDateEarlier(\r\n                    { year: month.year, month: month.monthNbr },\r\n                    this.selectedDateRange.begin\r\n                );\r\n                if (firstDateEarlier) {\r\n                    const _date = this.selectedDateRange.begin;\r\n                    this.selectedDateRange.end = _date;\r\n                    this.rangeDateSelection({\r\n                        isBegin: false,\r\n                        date: _date,\r\n                        jsDate: this.utilService.getDate(_date),\r\n                        dateFormat,\r\n                        formatted: this.utilService.formatDate(_date, dateFormat, monthLabels),\r\n                        epoc: this.utilService.getEpocTime(_date)\r\n                    });\r\n                    this.selectedDateRange.begin = { year: month.year, month: month.monthNbr };\r\n                    this.rangeDateSelection({\r\n                        isBegin: true,\r\n                        date: this.selectedDateRange.begin,\r\n                        jsDate: this.utilService.getDate(this.selectedDateRange.begin),\r\n                        dateFormat,\r\n                        formatted: this.utilService.formatDate(this.selectedDateRange.begin, dateFormat, monthLabels),\r\n                        epoc: this.utilService.getEpocTime(this.selectedDateRange.begin)\r\n                    });\r\n                } else {\r\n                    this.selectedDateRange.end = { year: month.year, month: month.monthNbr };\r\n                    this.rangeDateSelection({\r\n                        isBegin: false,\r\n                        date: this.selectedDateRange.end,\r\n                        jsDate: this.utilService.getDate(this.selectedDateRange.end),\r\n                        dateFormat,\r\n                        formatted: this.utilService.formatDate(this.selectedDateRange.end, dateFormat, monthLabels),\r\n                        epoc: this.utilService.getEpocTime(this.selectedDateRange.end)\r\n                    });\r\n                }\r\n                if (!this.opts.showTime) {\r\n                    this.dateChanged(\r\n                        this.utilService.getDateModel(\r\n                            null,\r\n                            this.selectedDateRange,\r\n                            dateFormat,\r\n                            monthLabels,\r\n                            dateRangeDatesDelimiter,\r\n                            returnFormat\r\n                        ),\r\n                        closeSelectorOnDateSelect\r\n                    );\r\n                }\r\n            }\r\n        } else {\r\n            this.selectedMonth = month;\r\n            this.dateChanged(\r\n                this.utilService.getDateModel(\r\n                    { year: month.year, month: month.monthNbr },\r\n                    null,\r\n                    dateFormat,\r\n                    monthLabels,\r\n                    dateRangeDatesDelimiter,\r\n                    returnFormat\r\n                ),\r\n                showTime ? false : closeSelectorOnDateSelect\r\n            );\r\n        }\r\n    }\r\n    toSelectYear(year: { year: number }): void {\r\n        const { dateFormat, monthLabels, dateRangeDatesDelimiter, closeSelectorOnDateSelect, showTime, returnFormat } = this.opts;\r\n        if (this.opts.dateRange) {\r\n            // month range\r\n            const isBeginYearInitialized: boolean = this.utilService.isInitializedYear(this.selectedDateRange.begin);\r\n            const isEndYearInitialized: boolean = this.utilService.isInitializedYear(this.selectedDateRange.end);\r\n            if (isBeginYearInitialized && isEndYearInitialized) {\r\n                // both already selected - set begin date and reset end date\r\n                this.selectedDateRange.begin = year;\r\n                this.selectedDateRange.end = this.utilService.resetDate();\r\n                this.rangeDateSelection({\r\n                    isBegin: true,\r\n                    date: this.selectedDateRange.begin,\r\n                    jsDate: this.utilService.getDate(this.selectedDateRange.begin),\r\n                    dateFormat,\r\n                    formatted: this.utilService.formatDate(this.selectedDateRange.begin, dateFormat, monthLabels),\r\n                    epoc: this.utilService.getEpocTime(this.selectedDateRange.begin)\r\n                });\r\n            } else if (!isBeginYearInitialized) {\r\n                // begin date\r\n                this.selectedDateRange.begin = year;\r\n                this.rangeDateSelection({\r\n                    isBegin: true,\r\n                    date: this.selectedDateRange.begin,\r\n                    jsDate: this.utilService.getDate(this.selectedDateRange.begin),\r\n                    dateFormat,\r\n                    formatted: this.utilService.formatDate(this.selectedDateRange.begin, dateFormat, monthLabels),\r\n                    epoc: this.utilService.getEpocTime(this.selectedDateRange.begin)\r\n                });\r\n            } else {\r\n                // second selection\r\n                const firstDateEarlier: boolean = this.utilService.isDateEarlier(year, this.selectedDateRange.begin);\r\n                if (firstDateEarlier) {\r\n                    const _date = this.selectedDateRange.begin;\r\n                    this.selectedDateRange.end = _date;\r\n                    this.rangeDateSelection({\r\n                        isBegin: false,\r\n                        date: _date,\r\n                        jsDate: this.utilService.getDate(_date),\r\n                        dateFormat,\r\n                        formatted: this.utilService.formatDate(_date, dateFormat, monthLabels),\r\n                        epoc: this.utilService.getEpocTime(_date)\r\n                    });\r\n                    this.selectedDateRange.begin = year;\r\n                    this.rangeDateSelection({\r\n                        isBegin: true,\r\n                        date: this.selectedDateRange.begin,\r\n                        jsDate: this.utilService.getDate(this.selectedDateRange.begin),\r\n                        dateFormat,\r\n                        formatted: this.utilService.formatDate(this.selectedDateRange.begin, dateFormat, monthLabels),\r\n                        epoc: this.utilService.getEpocTime(this.selectedDateRange.begin)\r\n                    });\r\n                } else {\r\n                    this.selectedDateRange.end = year;\r\n                    this.rangeDateSelection({\r\n                        isBegin: false,\r\n                        date: this.selectedDateRange.end,\r\n                        jsDate: this.utilService.getDate(this.selectedDateRange.end),\r\n                        dateFormat,\r\n                        formatted: this.utilService.formatDate(this.selectedDateRange.end, dateFormat, monthLabels),\r\n                        epoc: this.utilService.getEpocTime(this.selectedDateRange.end)\r\n                    });\r\n                }\r\n                if (!this.opts.showTime) {\r\n                    this.dateChanged(\r\n                        this.utilService.getDateModel(\r\n                            null,\r\n                            this.selectedDateRange,\r\n                            dateFormat,\r\n                            monthLabels,\r\n                            dateRangeDatesDelimiter,\r\n                            returnFormat\r\n                        ),\r\n                        closeSelectorOnDateSelect\r\n                    );\r\n                }\r\n            }\r\n        } else {\r\n            this.dateChanged(\r\n                this.utilService.getDateModel(year, null, dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat),\r\n                showTime ? false : closeSelectorOnDateSelect\r\n            );\r\n        }\r\n    }\r\n    monthStartIdx(y: number, m: number): number {\r\n        // Month start index\r\n        const d: Date = new Date();\r\n        d.setDate(1);\r\n        d.setMonth(m - 1);\r\n        d.setFullYear(y);\r\n        const idx = d.getDay() + this.sundayIdx();\r\n        return idx >= 7 ? idx - 7 : idx;\r\n    }\r\n\r\n    daysInMonth(m: number, y: number): number {\r\n        // Return number of days of current month\r\n        return new Date(y, m, 0).getDate();\r\n    }\r\n\r\n    daysInPrevMonth(m: number, y: number): number {\r\n        // Return number of days of the previous month\r\n        const d: Date = this.getDate(y, m, 1);\r\n        d.setMonth(d.getMonth() - 1);\r\n        return this.daysInMonth(d.getMonth() + 1, d.getFullYear());\r\n    }\r\n\r\n    isCurrDay(d: number, m: number, y: number, cmo: number, today: IMyDate): boolean {\r\n        // Check is a given date the today\r\n        return d === today.day && m === today.month && y === today.year && cmo === MonthId.curr;\r\n    }\r\n\r\n    getWidth() {\r\n        const hasShortCuts = this.opts.shortcuts && this.opts.shortcuts.length > 0;\r\n        if (this.opts.dateRange && this.opts.showType !== 4) {\r\n            return hasShortCuts ? '660px' : '574px';\r\n        } else {\r\n            const w =  (hasShortCuts ? 380 : 287) + (this.opts.viewType === ViewType.Together ? 200 : 0);\r\n            return w + 'px';\r\n        }\r\n    }\r\n\r\n    getToday(): IMyDate {\r\n        const date: Date = new Date();\r\n        if (this.opts.showTime) {\r\n            return {\r\n                year: date.getFullYear(),\r\n                month: date.getMonth() + 1,\r\n                day: date.getDate(),\r\n                hour: date.getHours(),\r\n                minute: date.getMinutes(),\r\n                second: date.getSeconds()\r\n            };\r\n        } else {\r\n            return { year: date.getFullYear(), month: date.getMonth() + 1, day: date.getDate() };\r\n        }\r\n    }\r\n\r\n    getDayNumber(date: IMyDate): number {\r\n        // Get day number: su=0, mo=1, tu=2, we=3 ...\r\n        const d: Date = this.getDate(date.year, date.month, date.day);\r\n        return d.getDay();\r\n    }\r\n\r\n    getWeekday(date: IMyDate): string {\r\n        // Get weekday: su, mo, tu, we ...\r\n        return this.weekDayOpts[this.getDayNumber(date)];\r\n    }\r\n\r\n    getDate(year: number, month: number, day: number): Date {\r\n        // Creates a date object from given year, month and day\r\n        return new Date(year, month - 1, day, 0, 0, 0, 0);\r\n    }\r\n\r\n    sundayIdx(): number {\r\n        // Index of Sunday day\r\n        return this.dayIdx > 0 ? 7 - this.dayIdx : 0;\r\n    }\r\n\r\n    generateCalendar(m: number, y: number, notifyChange: boolean, isSecondCalendar?: boolean): void {\r\n        if (!isSecondCalendar) {\r\n            this.dates.length = 0;\r\n        } else {\r\n            this.dates_range.length = 0;\r\n        }\r\n        const today: IMyDate = this.getToday();\r\n        const monthStart: number = this.monthStartIdx(y, m);\r\n        const dInThisM: number = this.daysInMonth(m, y);\r\n        const dInPrevM: number = this.daysInPrevMonth(m, y);\r\n\r\n        let dayNbr = 1;\r\n        let cmo: number = MonthId.prev;\r\n        for (let i = 1; i < 7; i++) {\r\n            const week: Array<IMyCalendarDay> = [];\r\n            if (i === 1) {\r\n                // First week\r\n                const pm = dInPrevM - monthStart + 1;\r\n                // Previous month\r\n                for (let j = pm; j <= dInPrevM; j++) {\r\n                    const date: IMyDate = { year: m === 1 ? y - 1 : y, month: m === 1 ? 12 : m - 1, day: j };\r\n                    week.push({\r\n                        dateObj: date,\r\n                        cmo,\r\n                        currDay: this.isCurrDay(j, m, y, cmo, today),\r\n                        disabled: this.utilService.isDisabledDate(date, this.opts),\r\n                        markedDate: this.utilService.isMarkedDate(date, this.opts.markDates, this.opts.markWeekends),\r\n                        highlight: this.utilService.isHighlightedDate(\r\n                            date,\r\n                            this.opts.sunHighlight,\r\n                            this.opts.satHighlight,\r\n                            this.opts.highlightDates\r\n                        )\r\n                    });\r\n                }\r\n\r\n                cmo = MonthId.curr;\r\n                // Current month\r\n                const daysLeft: number = 7 - week.length;\r\n                for (let j = 0; j < daysLeft; j++) {\r\n                    const date: IMyDate = { year: y, month: m, day: dayNbr };\r\n                    week.push({\r\n                        dateObj: date,\r\n                        cmo,\r\n                        currDay: this.isCurrDay(dayNbr, m, y, cmo, today),\r\n                        disabled: this.utilService.isDisabledDate(date, this.opts),\r\n                        markedDate: this.utilService.isMarkedDate(date, this.opts.markDates, this.opts.markWeekends),\r\n                        highlight: this.utilService.isHighlightedDate(\r\n                            date,\r\n                            this.opts.sunHighlight,\r\n                            this.opts.satHighlight,\r\n                            this.opts.highlightDates\r\n                        )\r\n                    });\r\n                    dayNbr++;\r\n                }\r\n            } else {\r\n                // Rest of the weeks\r\n                for (let j = 1; j < 8; j++) {\r\n                    if (dayNbr > dInThisM) {\r\n                        // Next month\r\n                        dayNbr = 1;\r\n                        cmo = MonthId.next;\r\n                    }\r\n                    const date: IMyDate = {\r\n                        year: cmo === MonthId.next && m === 12 ? y + 1 : y,\r\n                        month: cmo === MonthId.curr ? m : cmo === MonthId.next && m < 12 ? m + 1 : 1,\r\n                        day: dayNbr\r\n                    };\r\n                    week.push({\r\n                        dateObj: date,\r\n                        cmo,\r\n                        currDay: this.isCurrDay(dayNbr, m, y, cmo, today),\r\n                        disabled: this.utilService.isDisabledDate(date, this.opts),\r\n                        markedDate: this.utilService.isMarkedDate(date, this.opts.markDates, this.opts.markWeekends),\r\n                        highlight: this.utilService.isHighlightedDate(\r\n                            date,\r\n                            this.opts.sunHighlight,\r\n                            this.opts.satHighlight,\r\n                            this.opts.highlightDates\r\n                        )\r\n                    });\r\n                    dayNbr++;\r\n                }\r\n            }\r\n            const weekNbr: number =\r\n                this.opts.showWeekNumbers && this.opts.firstDayOfWeek === MO\r\n                    ? this.utilService.getWeekNumber(week[0].dateObj)\r\n                    : 0;\r\n            if (!isSecondCalendar) {\r\n                this.dates.push({ week, weekNbr, year: y });\r\n            } else {\r\n                this.dates_range.push({ week, weekNbr, year: y });\r\n            }\r\n        }\r\n\r\n        this.setDateViewHeaderBtnDisabledState(m, y, isSecondCalendar);\r\n\r\n        if (notifyChange) {\r\n            // Notify parent\r\n            this.calendarViewChanged({\r\n                year: y,\r\n                month: m,\r\n                first: { number: 1, weekday: this.getWeekday({ year: y, month: m, day: 1 }) },\r\n                last: { number: dInThisM, weekday: this.getWeekday({ year: y, month: m, day: dInThisM }) }\r\n            });\r\n        }\r\n    }\r\n\r\n    setDateViewHeaderBtnDisabledState(m: number, y: number, isSecondCalendar: boolean): void {\r\n        let dpm = false;\r\n        let dnm = false;\r\n\r\n        const { disableUntil, disableSince, minYear, maxYear } = this.opts;\r\n\r\n        dpm = this.utilService.isMonthDisabledByDisableUntil(\r\n            {\r\n                year: m === 1 ? y - 1 : y,\r\n                month: m === 1 ? 12 : m - 1,\r\n                day: this.daysInMonth(m === 1 ? 12 : m - 1, m === 1 ? y - 1 : y)\r\n            },\r\n            disableUntil\r\n        );\r\n        dnm = this.utilService.isMonthDisabledByDisableSince(\r\n            { year: m === 12 ? y + 1 : y, month: m === 12 ? 1 : m + 1, day: 1 },\r\n            disableSince\r\n        );\r\n        if (!isSecondCalendar) {\r\n            this.prevViewDisabled = (m === 1 && y === minYear) || dpm;\r\n            this.nextViewDisabled = (m === 12 && y === maxYear) || dnm;\r\n            this.prevDobViewDisabled = y === minYear || dpm;\r\n            this.nextDobViewDisabled = y === maxYear || dnm;\r\n        } else {\r\n            this.prevViewDisabled_range = (m === 1 && y === minYear) || dpm;\r\n            this.nextViewDisabled_range = (m === 12 && y === maxYear) || dnm;\r\n            this.prevDobViewDisabled_range = y === minYear || dpm;\r\n            this.nextDobViewDisabled_range = y === maxYear || dnm;\r\n        }\r\n    }\r\n\r\n    setMonthViewHeaderBtnDisabledState(y: number, isSecondCalendar: boolean): void {\r\n        let dpm = false;\r\n        let dnm = false;\r\n\r\n        const { disableUntil, disableSince, minYear, maxYear } = this.opts;\r\n\r\n        dpm = this.utilService.isMonthDisabledByDisableUntil({ year: y - 1, month: 12, day: 31 }, disableUntil);\r\n        dnm = this.utilService.isMonthDisabledByDisableSince({ year: y + 1, month: 1, day: 1 }, disableSince);\r\n        if (!isSecondCalendar) {\r\n            this.prevViewDisabled = y === minYear || dpm;\r\n            this.nextViewDisabled = y === maxYear || dnm;\r\n            this.prevDobViewDisabled = y === minYear || dpm;\r\n            this.nextDobViewDisabled = y === maxYear || dnm;\r\n        } else {\r\n            this.prevViewDisabled_range = y === minYear || dpm;\r\n            this.nextViewDisabled_range = y === maxYear || dnm;\r\n            this.prevDobViewDisabled_range = y === minYear || dpm;\r\n            this.nextDobViewDisabled_range = y === maxYear || dnm;\r\n        }\r\n    }\r\n\r\n    setYearViewHeaderBtnDisabledState(yp: number, yn: number, isSecondCalendar: boolean): void {\r\n        let dpy = false;\r\n        let dny = false;\r\n\r\n        const { disableUntil, disableSince, minYear, maxYear } = this.opts;\r\n\r\n        dpy = this.utilService.isMonthDisabledByDisableUntil({ year: yp - 1, month: 12, day: 31 }, disableUntil);\r\n        dny = this.utilService.isMonthDisabledByDisableSince({ year: yn + 1, month: 1, day: 1 }, disableSince);\r\n        if (!isSecondCalendar) {\r\n            this.prevViewDisabled = yp <= minYear || dpy;\r\n            this.nextViewDisabled = yn >= maxYear || dny;\r\n            this.prevDobViewDisabled = yp <= minYear || dpy;\r\n            this.nextDobViewDisabled = yn >= maxYear || dny;\r\n        } else {\r\n            this.prevViewDisabled_range = yp <= minYear || dpy;\r\n            this.nextViewDisabled_range = yn >= maxYear || dny;\r\n            this.prevDobViewDisabled_range = yp <= minYear || dpy;\r\n            this.nextDobViewDisabled_range = yn >= maxYear || dny;\r\n        }\r\n    }\r\n    onContainerClick(event: Event) {\r\n        event.stopPropagation();\r\n    }\r\n    onClickTimeBtn(event: Event) {\r\n        event.stopPropagation();\r\n        if (this.opts.dateRange) {\r\n            const beginIsInitializedDate = this.utilService.isInitializedDate(this.selectedDateRange.begin);\r\n            const endIsInitializedDate = this.utilService.isInitializedDate(this.selectedDateRange.end);\r\n            const now = new Date();\r\n            if (!beginIsInitializedDate || !endIsInitializedDate) {\r\n                // \r\n                if (!beginIsInitializedDate) {\r\n                    this.selectedDateRange.begin = { year: now.getFullYear(), month: now.getMonth() + 1, day: now.getDate() };\r\n                }\r\n                let endYear = now.getFullYear();\r\n                let endmonth = now.getMonth() + 1;\r\n                if (endmonth >= 12) {\r\n                    endYear = endYear + 1;\r\n                    endmonth = 1;\r\n                }\r\n                // else {\r\n                //     endmonth = endmonth + this.opts.monthRangeValue;\r\n                // }\r\n                this.selectedDateRange.end = { ...this.selectedDateRange.begin };\r\n                // this.selectedDateRange.end = { year: endYear, month: endmonth, day: now.getDate() };\r\n                // selectTimedateRange\r\n                this.timeVlaue = this.getTimeStr(now);\r\n                this.timeVlaue_range = this.getTimeStr(now);\r\n            }\r\n\r\n            if (!this.timeVlaue_range) {\r\n                this.timeVlaue_range = this.getTimeStr(now);\r\n            }\r\n\r\n        } else {\r\n            if (!this.utilService.isInitializedDate(this.selectedDate)) {\r\n                const now = new Date();\r\n                // selectTime\r\n                this.timeVlaue = this.getTimeStr(now);\r\n                this.selectedDate = { year: now.getFullYear(), month: now.getMonth() + 1, day: now.getDate() };\r\n            }\r\n        }\r\n\r\n        \r\n        if (!this.timeVlaue) {\r\n            const now = new Date();\r\n            // selectTime\r\n            this.timeVlaue = this.getTimeStr(now);\r\n            if (!this.utilService.isInitializedDate(this.selectedDate)) {\r\n                this.selectedDate = { year: now.getFullYear(), month: now.getMonth() + 1, day: now.getDate() };\r\n            }\r\n        }\r\n\r\n\r\n        if (this.selectYear) {\r\n            this.selectYear = false;\r\n        }\r\n        if (this.selectMonth) {\r\n            this.selectMonth = false;\r\n        }\r\n\r\n        if (this.selectYear_range) {\r\n            this.selectYear_range = false;\r\n        }\r\n\r\n        if (this.selectMonth_range) {\r\n            this.selectMonth_range = false;\r\n        }\r\n\r\n        this.selectTime = !this.selectTime;\r\n        this.cdr.detectChanges();\r\n    }\r\n\r\n    onShowDynamicView($event) {\r\n        $event.stopPropagation();\r\n        this.opts.showDynamicView = true;\r\n        this.dynamicViewShow.emit( { showDynamicView: true } );\r\n        this.cdr.detectChanges();\r\n    }\r\n\r\n    onShowDatePanel($event) {\r\n        $event.stopPropagation();\r\n        this.opts.showDynamicView = false;\r\n        this.dynamicViewShow.emit( { showDynamicView: false } );\r\n        this.cdr.detectChanges();\r\n    }\r\n\r\n\r\n    private getTimeValue(isDateRange) {\r\n        const t = { start: null, end: null };\r\n        if (this.timeVlaue) {\r\n            const timeArr = this.timeVlaue.replace('', ':').replace('', ':').replace('', '').split(':');\r\n            if (timeArr.length >= 2) {\r\n                t.start = {\r\n                    hour: timeArr[0],\r\n                    minute: timeArr[1],\r\n                    second: timeArr[2] ? timeArr[2] : 0\r\n                };\r\n            }\r\n        } else {\r\n            const nowDate = new Date();\r\n            const hour = nowDate.getHours();\r\n            const minute = nowDate.getMinutes();\r\n            const second = nowDate.getSeconds();\r\n\r\n            if (this.opts.dateRange) {\r\n                t.start = { hour: 0, minute: 0, second: 0 };\r\n            } else {\r\n                t.start = { hour, minute, second };\r\n            }\r\n        }\r\n\r\n        if (isDateRange) {\r\n            if (this.timeVlaue_range) {\r\n                const timeArr_range = this.timeVlaue_range.replace('', ':').replace('', ':').replace('', '').split(':');\r\n                if (timeArr_range.length >= 2) {\r\n                    t.end = {\r\n                        hour: timeArr_range[0],\r\n                        minute: timeArr_range[1],\r\n                        second: timeArr_range[2] ? timeArr_range[2] : 0\r\n                    };\r\n                }\r\n            } else {\r\n                const hour = 23;\r\n                const minute = 59;\r\n                const second = 59;\r\n                t.end = { hour, minute, second };\r\n            }\r\n        }\r\n\r\n        return t;\r\n    }\r\n\r\n\r\n    onClickOkBtn(event: Event) {\r\n        event.stopPropagation();\r\n        let timeObj = null;\r\n        let timeObj_range = null;\r\n        let selectedDate = null;\r\n        let selectedDate_range = null;\r\n        if (this.opts.showTime) {\r\n            const { start, end } = this.getTimeValue(this.opts.dateRange);\r\n            timeObj = start;\r\n            timeObj_range = end;\r\n        }\r\n        const { dateFormat, monthLabels, dateRangeDatesDelimiter, closeSelectorOnDateSelect, returnFormat } = this.opts;\r\n        if (!this.opts.dateRange) {\r\n            selectedDate = { ...this.initializedDate(this.selectedDate), ...timeObj };\r\n            const isInDisableRange = this.utilService.isDisabledDate(selectedDate, this.opts);\r\n            const earlier = this.utilService.isDateSameOrEarlier(selectedDate, this.opts.disableUntil);\r\n\r\n            selectedDate = !isInDisableRange\r\n                ? selectedDate\r\n                : { ...selectedDate, ...(earlier ? this.opts.disableUntil : this.opts.disableSince) };\r\n        } else {\r\n            const begin = { ...this.initializedDate(this.selectedDateRange.begin), ...timeObj };\r\n            const end = { ...this.initializedDate(this.selectedDateRange.end, begin), ...timeObj_range };\r\n            selectedDate_range = { begin, end };\r\n        }\r\n        const dateModel: IMyDateModel = this.utilService.getDateModel(\r\n            selectedDate,\r\n            selectedDate_range,\r\n            dateFormat,\r\n            monthLabels,\r\n            dateRangeDatesDelimiter,\r\n            returnFormat\r\n        );\r\n        this.dateChanged(dateModel, closeSelectorOnDateSelect);\r\n    }\r\n\r\n    onTodayClick($event) {\r\n        $event.stopPropagation();\r\n        let timeObj = null;\r\n        let selectedDate = null;\r\n        let selectedDate_range = null;\r\n        if (this.opts.showTime) {\r\n            const { start } = this.getTimeValue(false);\r\n            timeObj = start;\r\n        }\r\n        const { dateFormat, monthLabels, dateRangeDatesDelimiter, closeSelectorOnDateSelect, returnFormat } = this.opts;\r\n        \r\n        selectedDate = { ...this.initializedDate({ year: 0, month: 0, day: 0 }), ...timeObj };\r\n        const isInDisableRange = this.utilService.isDisabledDate(selectedDate, this.opts);\r\n        const earlier = this.utilService.isDateSameOrEarlier(selectedDate, this.opts.disableUntil);\r\n\r\n        selectedDate = !isInDisableRange\r\n            ? selectedDate\r\n            : { ...selectedDate, ...(earlier ? this.opts.disableUntil : this.opts.disableSince) };\r\n\r\n        const dateModel: IMyDateModel = this.utilService.getDateModel(\r\n            selectedDate,\r\n            selectedDate_range,\r\n            dateFormat,\r\n            monthLabels,\r\n            dateRangeDatesDelimiter,\r\n            returnFormat\r\n        );\r\n        this.dateChanged(dateModel, closeSelectorOnDateSelect);\r\n    }\r\n\r\n\r\n\r\n    onDynamicOkClick($event, dynamicviewRef) {\r\n        if (dynamicviewRef) {\r\n            const text = dynamicviewRef.formatValue();\r\n            const value = dynamicviewRef.getValue();\r\n            value.text = text;\r\n            this.opts.dynamicValueChanged(value);\r\n        }\r\n    }\r\n\r\n    initializedDate(date: IMyDate, otherDate: IMyDate = { year: 0, month: 0, day: 0 }): IMyDate {\r\n        const daysInMonth: Array<number> = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\r\n        if (!this.utilService.isInitializedDate(date) && !this.utilService.isInitializedDate(otherDate)) {\r\n            const year = new Date().getFullYear();\r\n            const month = new Date().getMonth() + 1;\r\n            const day = new Date().getDate();\r\n            return this.utilService.isDisabledDate({ year, month, day }, this.opts) ? this.opts.disableUntil : { year, month, day };\r\n        } else if (!this.utilService.isInitializedDate(date)) {\r\n            const year = otherDate.month + 1 > 12 ? otherDate.year + 1 : otherDate.year;\r\n            let month = otherDate.month + 1 > 12 ? 1 : otherDate.month + this.opts.monthRangeValue;\r\n            if (!date.month) {\r\n                month = otherDate.month;\r\n            }\r\n            const day = otherDate.day < 1 || otherDate.day > daysInMonth[month - 1] ? 1 : otherDate.day;\r\n            return this.utilService.isDisabledDate({ year, month, day }, this.opts) ? this.opts.disableSince : { year, month, day };\r\n        }\r\n        return date;\r\n    }\r\n\r\n    setTime(date: any) {\r\n        const { dateFormat, monthLabels, dateRangeDatesDelimiter, closeSelectorOnDateSelect, returnFormat } = this.opts;\r\n        if (date instanceof Date) {\r\n            if (this.opts.showType !== 4 && !this.opts.dateRange) {\r\n                let targetDate: IMyDate;\r\n                if (this.opts.showTime) {\r\n                    targetDate = {\r\n                        year: date.getFullYear(),\r\n                        month: date.getMonth() + 1,\r\n                        day: date.getDate(),\r\n                        hour: date.getHours(),\r\n                        minute: date.getMinutes(),\r\n                        second: date.getSeconds()\r\n                    };\r\n                } else {\r\n                    targetDate = { year: date.getFullYear(), month: date.getMonth() + 1, day: date.getDate() };\r\n                }\r\n                const dateModel: IMyDateModel = this.utilService.getDateModel(\r\n                    targetDate,\r\n                    null,\r\n                    dateFormat,\r\n                    monthLabels,\r\n                    dateRangeDatesDelimiter,\r\n                    returnFormat\r\n                );\r\n                this.dateChanged(dateModel, closeSelectorOnDateSelect);\r\n            } else {\r\n                //   \r\n                const dateModel: IMyDateModel = this.utilService.getDateModel(\r\n                    null,\r\n                    this.utilService.getNowWeekTime(date),\r\n                    dateFormat,\r\n                    monthLabels,\r\n                    dateRangeDatesDelimiter,\r\n                    returnFormat\r\n                );\r\n                this.dateChanged(dateModel, closeSelectorOnDateSelect);\r\n            }\r\n        } else if (date instanceof Object && this.opts.dateRange) {\r\n            let targetDateRange: IMyDateRange;\r\n            const { begin, end } = date;\r\n            if (!begin || !end) {\r\n                return;\r\n            }\r\n            if (this.opts.showTime) {\r\n                targetDateRange = {\r\n                    begin: {\r\n                        year: begin.getFullYear(),\r\n                        month: begin.getMonth() + 1,\r\n                        day: begin.getDate(),\r\n                        hour: begin.getHours(),\r\n                        minute: begin.getMinutes(),\r\n                        second: begin.getSeconds()\r\n                    },\r\n                    end: {\r\n                        year: end.getFullYear(),\r\n                        month: end.getMonth() + 1,\r\n                        day: end.getDate(),\r\n                        hour: end.getHours(),\r\n                        minute: end.getMinutes(),\r\n                        second: end.getSeconds()\r\n                    }\r\n                };\r\n            } else {\r\n                targetDateRange = {\r\n                    begin: { year: begin.getFullYear(), month: begin.getMonth() + 1, day: begin.getDate() },\r\n                    end: { year: end.getFullYear(), month: end.getMonth() + 1, day: end.getDate() }\r\n                };\r\n            }\r\n            const dateModel: IMyDateModel = this.utilService.getDateModel(\r\n                null,\r\n                targetDateRange,\r\n                dateFormat,\r\n                monthLabels,\r\n                dateRangeDatesDelimiter,\r\n                returnFormat\r\n            );\r\n            this.dateChanged(dateModel, closeSelectorOnDateSelect);\r\n        } else {\r\n            // console.warn('');\r\n        }\r\n    }\r\n\r\n    onSelectCurrentWeek($event: MouseEvent) {\r\n        $event.stopPropagation();\r\n        let weekDays = this.dateHlp.getWeekDate({baselineDate: new Date()});\r\n        weekDays = weekDays.map(n => {\r\n            return {\r\n                dateObj: {\r\n                    day: n.day, month: n.month, year: n.year\r\n                }\r\n            }\r\n        })\r\n\r\n        const year = new Date().getFullYear();\r\n        const month = new Date().getMonth() + 1;\r\n        const day = new Date().getDate();\r\n\r\n        const weekNbr = this.dateHlp.getYearWeek(year, month, day);\r\n        const weekData = { week: weekDays, weekNbr, year };\r\n        \r\n        this.onWeekClicked(weekData);\r\n    }\r\n\r\n    onDynamicValueChanged($event) {\r\n        this.btnDynamicDisabled = !$event;\r\n    }\r\n}\r\n","/*\r\n * @Author: (Lucas Huang)\r\n * @Date: 2019-08-02 14:14:22\r\n * @LastEditors: (Lucas Huang)\r\n * @LastEditTime: 2019-09-09 09:27:58\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\nimport {\r\n    Component,\r\n    EventEmitter,\r\n    Input,\r\n    OnChanges,\r\n    Output,\r\n    ViewEncapsulation,\r\n    SimpleChanges\r\n} from '@angular/core';\r\nimport {\r\n    IMyOptions,\r\n    IMyMonth,\r\n    IMyCalendarYear\r\n} from '../../interfaces/public-api';\r\nimport {\r\n    OPTS,\r\n    YEARS,\r\n    VISIBLE_MONTH,\r\n    SELECT_MONTH,\r\n    SELECT_YEAR,\r\n    PREV_VIEW_DISABLED,\r\n    NEXT_VIEW_DISABLED,\r\n    YYYY,\r\n    MM\r\n} from '../../constants/constants';\r\n\r\n@Component({\r\n    selector: 'lib-selection-bar',\r\n    templateUrl: './selection-bar.component.html',\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\nexport class SelectionBarComponent implements OnChanges {\r\n    @Input() opts: IMyOptions;\r\n    @Input() years: Array<Array<IMyCalendarYear>>;\r\n    @Input() visibleMonth: IMyMonth;\r\n    @Input() selectMonth: boolean;\r\n    @Input() selectYear: boolean;\r\n    @Input() selectToday: boolean;\r\n    @Input() prevViewDisabled: boolean;\r\n    @Input() nextViewDisabled: boolean;\r\n    @Input() prevDobViewDisabled: boolean;\r\n    @Input() nextDobViewDisabled: boolean;\r\n\r\n    @Output() prevNavigateBtnClicked: EventEmitter<boolean> = new EventEmitter<\r\n        boolean\r\n    >();\r\n    @Output() nextNavigateBtnClicked: EventEmitter<boolean> = new EventEmitter<\r\n        boolean\r\n    >();\r\n    @Output() monthViewBtnClicked: EventEmitter<void> = new EventEmitter<\r\n        void\r\n    >();\r\n    @Output() yearViewBtnClicked: EventEmitter<void> = new EventEmitter<void>();\r\n    @Output() todayViewBtnClicked: EventEmitter<void> = new EventEmitter<\r\n        void\r\n    >();\r\n    constructor() {}\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        if (changes.hasOwnProperty(OPTS)) {\r\n            this.opts = changes[OPTS].currentValue;\r\n        }\r\n        if (changes.hasOwnProperty(YEARS)) {\r\n            this.years = changes[YEARS].currentValue;\r\n        }\r\n        if (changes.hasOwnProperty(VISIBLE_MONTH)) {\r\n            this.visibleMonth = changes[VISIBLE_MONTH].currentValue;\r\n        }\r\n        if (changes.hasOwnProperty(SELECT_MONTH)) {\r\n            this.selectMonth = changes[SELECT_MONTH].currentValue;\r\n        }\r\n        if (changes.hasOwnProperty(SELECT_YEAR)) {\r\n            this.selectYear = changes[SELECT_YEAR].currentValue;\r\n        }\r\n        if (changes.hasOwnProperty(PREV_VIEW_DISABLED)) {\r\n            this.prevViewDisabled = changes[PREV_VIEW_DISABLED].currentValue;\r\n        }\r\n        if (changes.hasOwnProperty(NEXT_VIEW_DISABLED)) {\r\n            this.nextViewDisabled = changes[NEXT_VIEW_DISABLED].currentValue;\r\n        }\r\n    }\r\n\r\n    onPrevNavigateBtnClicked(event: any): void {\r\n        event.stopPropagation();\r\n        !this.prevViewDisabled && this.prevNavigateBtnClicked.emit(true);\r\n    }\r\n\r\n    onNextNavigateBtnClicked(event: any): void {\r\n        event.stopPropagation();\r\n        !this.nextViewDisabled && this.nextNavigateBtnClicked.emit(true);\r\n    }\r\n    onPrevDobNavigateBtnClicked(event: any): void {\r\n        event.stopPropagation();\r\n        !this.prevDobViewDisabled && this.prevNavigateBtnClicked.emit(false);\r\n    }\r\n\r\n    onNextDobNavigateBtnClicked(event: any): void {\r\n        event.stopPropagation();\r\n        !this.nextDobViewDisabled && this.nextNavigateBtnClicked.emit(false);\r\n    }\r\n    onMonthViewBtnClicked(event): void {\r\n        event.stopPropagation();\r\n        this.monthViewBtnClicked.emit();\r\n    }\r\n\r\n    onYearViewBtnClicked(event): void {\r\n        event.stopPropagation();\r\n        this.yearViewBtnClicked.emit();\r\n    }\r\n    onTodayViewBtnClicked(event): void {\r\n        event.stopPropagation();\r\n        this.todayViewBtnClicked.emit();\r\n    }\r\n    getFormateType(): string {\r\n        const yIndex = this.opts.dateFormat\r\n            ? this.opts.dateFormat.indexOf(YYYY)\r\n            : 0;\r\n        const mIndex = this.opts.dateFormat\r\n            ? this.opts.dateFormat.indexOf(MM)\r\n            : 0;\r\n        return yIndex > mIndex ? `${MM}-${YYYY}` : `${YYYY}-${MM}`;\r\n    }\r\n}\r\n","/*\r\n * @Author: (Lucas Huang)\r\n * @Date: 2019-09-04 07:39:58\r\n * @LastEditors: (Lucas Huang)\r\n * @LastEditTime: 2019-09-04 15:03:39\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\nimport {\r\n    Component,\r\n    EventEmitter,\r\n    Input,\r\n    OnChanges,\r\n    Output,\r\n    ViewEncapsulation,\r\n    SimpleChanges\r\n} from '@angular/core';\r\nimport { UtilService } from '../../services/public-api';\r\nimport {\r\n    IMyOptions,\r\n    IMyCalendarDay,\r\n    IMyDate,\r\n    IMyDateRange,\r\n    IMyWeek\r\n} from '../../interfaces/public-api';\r\nimport { MonthId, KeyCode } from '../../enums/public-api';\r\nimport {\r\n    OPTS,\r\n    DATES,\r\n    WEEK_DAYS,\r\n    SELECTED_DATE,\r\n    SELECTED_DATE_RANGE\r\n} from '../../constants/constants';\r\n\r\n// import { IMyWeek } from '../../interfaces/my-month-row.interface'\r\n\r\n@Component({\r\n    selector: 'lib-day-view',\r\n    templateUrl: './day-view.component.html',\r\n    providers: [UtilService],\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\nexport class DayViewComponent implements OnChanges {\r\n    @Input() opts: IMyOptions;\r\n    @Input() dates: Array<IMyWeek>;\r\n    @Input() weekDays: Array<string>;\r\n    @Input() selectedDate: IMyDate;\r\n    @Input() selectedDateRange: IMyDateRange;\r\n    @Input() selectedWeek: IMyWeek;\r\n\r\n    @Output() dayCellClicked: EventEmitter<IMyCalendarDay> = new EventEmitter<\r\n        IMyCalendarDay\r\n    >();\r\n    @Output() dayCellKeyDown: EventEmitter<IMyCalendarDay> = new EventEmitter<\r\n        IMyCalendarDay\r\n    >();\r\n    @Output() weekClicked: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n    @Output() onMouseEnter: EventEmitter<any> = new EventEmitter<any>();\r\n    @Output() onMouseLeave: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n    prevMonthId: number = MonthId.prev;\r\n    currMonthId: number = MonthId.curr;\r\n    nextMonthId: number = MonthId.next;\r\n\r\n    constructor(private utilService: UtilService) {}\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        if (changes.hasOwnProperty(OPTS)) {\r\n            this.opts = changes[OPTS].currentValue;\r\n        }\r\n        if (changes.hasOwnProperty(DATES)) {\r\n            this.dates = changes[DATES].currentValue;\r\n        }\r\n        if (changes.hasOwnProperty(WEEK_DAYS)) {\r\n            this.weekDays = changes[WEEK_DAYS].currentValue;\r\n        }\r\n        if (changes.hasOwnProperty(SELECTED_DATE)) {\r\n            this.selectedDate = changes[SELECTED_DATE].currentValue;\r\n        }\r\n        if (changes.hasOwnProperty(SELECTED_DATE_RANGE)) {\r\n            this.selectedDateRange = changes[SELECTED_DATE_RANGE].currentValue;\r\n        }\r\n    }\r\n\r\n    onDayCellClicked(event: any, cell: IMyCalendarDay): void {\r\n        if (cell.disabled || this.opts.showType === 4) {\r\n            return;\r\n        }\r\n        event.stopPropagation();\r\n        this.dayCellClicked.emit(cell);\r\n    }\r\n\r\n    onDayCellKeyDown(event: KeyboardEvent, cell: IMyCalendarDay) {\r\n        const keyCode: number = this.utilService.getKeyCodeFromEvent(event);\r\n        if (keyCode !== KeyCode.tab) {\r\n            event.preventDefault();\r\n\r\n            if (keyCode === KeyCode.enter || keyCode === KeyCode.space) {\r\n                this.onDayCellClicked(event, cell);\r\n            } else if (this.opts.moveFocusByArrowKeys) {\r\n                this.dayCellKeyDown.emit(cell);\r\n            }\r\n        }\r\n    }\r\n    onWeekClicked(event: KeyboardEvent, week: IMyWeek) {\r\n        if (this.opts.showType !== 4) { return; }\r\n        event.stopPropagation();\r\n        this.weekClicked.emit(week);\r\n    }\r\n\r\n    onDayCellMouseEnter(cell: any): void {\r\n        if (\r\n            this.utilService.isInitializedDate(this.selectedDateRange.begin) &&\r\n            (!this.utilService.isInitializedDate(this.selectedDateRange.end) ||\r\n                JSON.stringify(this.selectedDateRange.begin) === JSON.stringify(this.selectedDateRange.end))\r\n        ) {\r\n            for (const w of this.dates) {\r\n                for (const day of w.week) {\r\n                    day.range =\r\n                        (this.utilService.isDateSameOrEarlier(\r\n                            this.selectedDateRange.begin,\r\n                            day.dateObj\r\n                        ) &&\r\n                            this.utilService.isDateSameOrEarlier(\r\n                                day.dateObj,\r\n                                cell.dateObj\r\n                            )) ||\r\n                        (this.utilService.isDateSameOrEarlier(\r\n                            day.dateObj,\r\n                            this.selectedDateRange.begin\r\n                        ) &&\r\n                            this.utilService.isDateSameOrEarlier(\r\n                                cell.dateObj,\r\n                                day.dateObj\r\n                            ));\r\n                }\r\n            }\r\n            this.onMouseEnter.emit(cell);\r\n        }\r\n    }\r\n\r\n    onDayCellMouseLeave(): void {\r\n        for (const w of this.dates) {\r\n            for (const day of w.week) {\r\n                day.range = false;\r\n            }\r\n        }\r\n        this.onMouseLeave.emit();\r\n    }\r\n\r\n    isDateInRange(date: IMyDate): boolean {\r\n        return this.utilService.isDateInRange(date, this.selectedDateRange);\r\n    }\r\n\r\n    isDateSame(date: IMyDate): boolean {\r\n        return this.utilService.isDateSame(\r\n            {\r\n                year: this.selectedDate.year,\r\n                month: this.selectedDate.month,\r\n                day: this.selectedDate.day\r\n            },\r\n            date\r\n        );\r\n    }\r\n\r\n    isDateRangeBeginOrEndSame(date: IMyDate): boolean {\r\n        const selectedDateRange = {\r\n            begin: {\r\n                year: this.selectedDateRange.begin.year,\r\n                month: this.selectedDateRange.begin.month,\r\n                day: this.selectedDateRange.begin.day\r\n            },\r\n            end: {\r\n                year: this.selectedDateRange.end.year,\r\n                month: this.selectedDateRange.end.month,\r\n                day: this.selectedDateRange.end.day\r\n            }\r\n        };\r\n        return this.utilService.isDateRangeBeginOrEndSame(\r\n            selectedDateRange,\r\n            date\r\n        );\r\n    }\r\n}\r\n","/*\r\n * @Author: (Lucas Huang)\r\n * @Date: 2019-08-15 17:31:08\r\n * @LastEditors: (Lucas Huang)\r\n * @LastEditTime: 2019-09-04 15:01:15\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\nimport {\r\n    Component,\r\n    EventEmitter,\r\n    Input,\r\n    OnChanges,\r\n    Output,\r\n    SimpleChanges,\r\n    ViewEncapsulation\r\n} from '@angular/core';\r\nimport { UtilService } from '../../services/public-api';\r\nimport {\r\n    IMyCalendarMonth,\r\n    IMyOptions,\r\n    IMyDate,\r\n    IMyDateRange,\r\n    IMyMonthRow,\r\n    IMyMonth\r\n} from '../../interfaces/public-api';\r\nimport { KeyCode } from '../../enums/public-api';\r\nimport { OPTS, MONTHS } from '../../constants/constants';\r\n\r\n@Component({\r\n    selector: 'lib-month-view',\r\n    templateUrl: './month-view.component.html',\r\n    providers: [UtilService],\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\nexport class MonthViewComponent implements OnChanges {\r\n    @Input() opts: IMyOptions;\r\n    @Input() months: Array<IMyMonthRow> = [];\r\n    @Input() selectedDate: IMyDate;\r\n    @Input() selectedDateRange: IMyDateRange;\r\n    @Input() visibleMonth: IMyMonth;\r\n    @Output() monthCellClicked: EventEmitter<IMyCalendarMonth> = new EventEmitter<IMyCalendarMonth>();\r\n    @Output() monthCellKeyDown: EventEmitter<IMyCalendarMonth> = new EventEmitter<IMyCalendarMonth>();\r\n\r\n    @Output() onMouseEnter: EventEmitter<any> = new EventEmitter<any>();\r\n    @Output() onMouseLeave: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n    constructor(private utilService: UtilService) { }\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        if (changes.hasOwnProperty(OPTS)) {\r\n            this.opts = changes[OPTS].currentValue;\r\n        }\r\n        if (changes.hasOwnProperty(MONTHS)) {\r\n            this.months = changes[MONTHS].currentValue;\r\n        }\r\n    }\r\n\r\n    onMonthCellClicked(event: any, cell: IMyCalendarMonth): void {\r\n        event.stopPropagation();\r\n\r\n        if (cell.disabled) {\r\n            return;\r\n        }\r\n\r\n        this.monthCellClicked.emit(cell);\r\n    }\r\n\r\n    onMonthCellKeyDown(event: KeyboardEvent, cell: IMyCalendarMonth) {\r\n        const keyCode: number = this.utilService.getKeyCodeFromEvent(event);\r\n        if (keyCode !== KeyCode.tab) {\r\n            event.preventDefault();\r\n\r\n            if (keyCode === KeyCode.enter || keyCode === KeyCode.space) {\r\n                this.onMonthCellClicked(event, cell);\r\n            } else if (this.opts.moveFocusByArrowKeys) {\r\n                this.monthCellKeyDown.emit(cell);\r\n            }\r\n        }\r\n    }\r\n    onMonthCellMouseEnter(cell: any): void {\r\n        if (\r\n            this.utilService.isInitializedDate(this.selectedDateRange.begin) &&\r\n            !this.utilService.isInitializedDate(this.selectedDateRange.end)\r\n        ) {\r\n            for (let i = 0; i < this.months.length; i++) {\r\n                let row = this.months[i].row;\r\n                for (let j = 0; j < row.length; j++) {\r\n                    let month = row[j];\r\n                    month.range =\r\n                        (this.utilService.isDateSameOrEarlier(\r\n                            this.selectedDateRange.begin,\r\n                            month.monthObj\r\n                        ) &&\r\n                            this.utilService.isDateSameOrEarlier(\r\n                                month.monthObj,\r\n                                cell.monthObj\r\n                            )) ||\r\n                        (this.utilService.isDateSameOrEarlier(\r\n                            month.monthObj,\r\n                            this.selectedDateRange.begin\r\n                        ) &&\r\n                            this.utilService.isDateSameOrEarlier(\r\n                                cell.monthObj,\r\n                                month.monthObj\r\n                            ));\r\n                }\r\n            }\r\n            this.onMouseEnter.emit(cell);\r\n        }\r\n    }\r\n\r\n    onMonthCellMouseLeave(): void {\r\n        for (let i = 0; i < this.months.length; i++) {\r\n            let row = this.months[i].row;\r\n            for (let j = 0; j < row.length; j++) {\r\n                let month = row[j];\r\n                month.range = false;\r\n            }\r\n        }\r\n        this.onMouseLeave.emit();\r\n    }\r\n    isMonthInRange(date: IMyDate): boolean {\r\n        return this.utilService.isDateInRange(date, this.selectedDateRange);\r\n    }\r\n    isMonthSame(date: IMyDate): boolean {\r\n        return this.utilService.isDateSame(\r\n            {\r\n                year: this.visibleMonth.year,\r\n                month: this.visibleMonth.monthNbr\r\n            },\r\n            date\r\n        );\r\n    }\r\n    isMonthRangeBeginOrEndSame(date: IMyDate): boolean {\r\n        return this.utilService.isDateRangeBeginOrEndSame(\r\n            this.selectedDateRange,\r\n            date\r\n        );\r\n    }\r\n}\r\n","import { Component, EventEmitter, Input, OnChanges, Output, SimpleChanges, ViewEncapsulation } from '@angular/core';\r\nimport { YEARS, OPTS } from '../../constants/constants';\r\nimport { UtilService } from '../../services/public-api';\r\nimport { IMyCalendarYear, IMyOptions, IMyDate, IMyDateRange, IMyMonth } from '../../interfaces/public-api';\r\nimport { KeyCode } from '../../enums/public-api';\r\n@Component({\r\n    selector: 'lib-year-view',\r\n    templateUrl: './year-view.component.html',\r\n    providers: [UtilService],\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\nexport class YearViewComponent implements OnChanges {\r\n    @Input() opts: IMyOptions;\r\n    @Input() years: Array<Array<IMyCalendarYear>>;\r\n    @Input() prevViewDisabled: boolean;\r\n    @Input() nextViewDisabled: boolean;\r\n    @Input() selectedDate: IMyDate;\r\n    @Input() selectedDateRange: IMyDateRange;\r\n    @Input() visibleMonth: IMyMonth;\r\n\r\n\r\n    @Output() yearCellClicked: EventEmitter<IMyCalendarYear> = new EventEmitter<IMyCalendarYear>();\r\n    @Output() yearCellKeyDown: EventEmitter<IMyCalendarYear> = new EventEmitter<IMyCalendarYear>();\r\n    @Output() prevCellClicked: EventEmitter<void> = new EventEmitter<void>();\r\n    @Output() nextCellClicked: EventEmitter<void> = new EventEmitter<void>();\r\n\r\n    @Output() onMouseEnter: EventEmitter<any> = new EventEmitter<any>();\r\n    @Output() onMouseLeave: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n    constructor(private utilService: UtilService) {}\r\n    ngOnInit(): void {}\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        if (changes.hasOwnProperty(OPTS)) {\r\n            this.opts = changes[OPTS].currentValue;\r\n        }\r\n        if (changes.hasOwnProperty(YEARS)) {\r\n            this.years = changes[YEARS].currentValue;\r\n        }\r\n    }\r\n\r\n    onYearCellClicked(event: any, cell: IMyCalendarYear): void {\r\n        event.stopPropagation();\r\n        if (cell.disabled) {\r\n            return;\r\n        }\r\n        this.yearCellClicked.emit(cell);\r\n    }\r\n\r\n    onYearCellKeyDown(event: KeyboardEvent, cell: IMyCalendarYear) {\r\n        const keyCode: number = this.utilService.getKeyCodeFromEvent(event);\r\n        if (keyCode !== KeyCode.tab) {\r\n            event.preventDefault();\r\n\r\n            if (keyCode === KeyCode.enter || keyCode === KeyCode.space) {\r\n                this.onYearCellClicked(event, cell);\r\n            } else if (this.opts.moveFocusByArrowKeys) {\r\n                this.yearCellKeyDown.emit(cell);\r\n            }\r\n        }\r\n    }\r\n    onPrevOrNextYearCellClicked(event: any, index: number) {\r\n        event.stopPropagation();\r\n        if (index === 0) {\r\n            if (this.prevViewDisabled) return;\r\n            this.prevCellClicked.emit(event);\r\n        } else {\r\n            if (this.nextViewDisabled) return;\r\n            this.nextCellClicked.emit(event);\r\n        }\r\n    }\r\n    onMonthCellMouseEnter(cell: any): void {\r\n        if (\r\n            this.utilService.isInitializedDate(this.selectedDateRange.begin) &&\r\n            !this.utilService.isInitializedDate(this.selectedDateRange.end)\r\n        ) {\r\n            for (let i = 0; i < this.years.length; i++) {\r\n                let row = this.years[i];\r\n                for (let j = 0; j < row.length; j++) {\r\n                    let year = row[j];\r\n                    year.range =\r\n                        (this.utilService.isDateSameOrEarlier(\r\n                            this.selectedDateRange.begin,\r\n                            year.yearObj\r\n                        ) &&\r\n                            this.utilService.isDateSameOrEarlier(\r\n                                year.yearObj,\r\n                                cell.yearObj\r\n                            )) ||\r\n                        (this.utilService.isDateSameOrEarlier(\r\n                            year.yearObj,\r\n                            this.selectedDateRange.begin\r\n                        ) &&\r\n                            this.utilService.isDateSameOrEarlier(\r\n                                cell.yearObj,\r\n                                year.yearObj\r\n                            ));\r\n                }\r\n            }\r\n            this.onMouseEnter.emit(cell);\r\n        }\r\n    }\r\n\r\n    onMonthCellMouseLeave(): void {\r\n        for (let i = 0; i < this.years.length; i++) {\r\n            let row = this.years[i];\r\n            for (let j = 0; j < row.length; j++) {\r\n                let year = row[j];\r\n                year.range = false;\r\n            }\r\n        }\r\n        this.onMouseLeave.emit();\r\n    }\r\n    isMonthInRange(year: IMyDate): boolean {\r\n        return this.utilService.isDateInRange(year, this.selectedDateRange);\r\n    }\r\n    isMonthSame(year: IMyDate): boolean {\r\n        return this.utilService.isDateSame(\r\n            {\r\n                year: this.visibleMonth.year\r\n            },\r\n            year\r\n        );\r\n    }\r\n    isMonthRangeBeginOrEndSame(year: IMyDate): boolean {\r\n        return this.utilService.isDateSame(\r\n            { year: this.selectedDateRange.begin.year }, year\r\n        ) || this.utilService.isDateSame(\r\n            { year: this.selectedDateRange.end.year }, year\r\n        );\r\n    }\r\n}\r\n","import {\r\n    Directive,\r\n    Input,\r\n    ComponentRef,\r\n    ElementRef,\r\n    ViewContainerRef,\r\n    Renderer2,\r\n    ChangeDetectorRef,\r\n    ComponentFactoryResolver,\r\n    forwardRef,\r\n    EventEmitter,\r\n    Output,\r\n    SimpleChanges,\r\n    OnChanges,\r\n    HostListener,\r\n    OnDestroy,\r\n    NgZone\r\n} from '@angular/core';\r\nimport {\r\n    AbstractControl,\r\n    ControlValueAccessor,\r\n    NG_VALIDATORS,\r\n    NG_VALUE_ACCESSOR,\r\n    Validator\r\n} from '@angular/forms';\r\nimport { CalendarComponent } from './components/calendar/calendar.component';\r\n\r\nimport {\r\n    IMyOptions,\r\n    IMyDate,\r\n    IMyDateModel,\r\n    IMyDateRange,\r\n    IMyRangeDateSelection,\r\n    IMyCalendarViewChanged,\r\n    IMyInputFieldChanged,\r\n    IMySelectorPosition\r\n} from './interfaces/public-api';\r\n\r\nimport {\r\n    UtilService,\r\n    DatepickerLocaleService,\r\n    DefaultConfigService\r\n} from './services/public-api';\r\n\r\nimport { KeyCode, CalToggle, Year, ResetDateType } from './enums/public-api';\r\n\r\nimport {\r\n    KEYUP,\r\n    BLUR,\r\n    EMPTY_STR,\r\n    DISABLED,\r\n    CLICK,\r\n    BODY,\r\n    VALUE,\r\n    OPTIONS,\r\n    DEFAULT_MONTH,\r\n    LOCALE,\r\n    OBJECT,\r\n    PX\r\n} from './constants/constants';\r\n\r\nconst NGX_DP_VALUE_ACCESSOR = {\r\n    provide: NG_VALUE_ACCESSOR,\r\n    useExisting: forwardRef(() => FarrisDatePickerDirective),\r\n    multi: true\r\n};\r\n\r\nconst NGX_DP_VALIDATORS = {\r\n    provide: NG_VALIDATORS,\r\n    useExisting: forwardRef(() => FarrisDatePickerDirective),\r\n    multi: true\r\n};\r\n\r\n@Directive({\r\n    selector: '[farris-datepicker]',\r\n    exportAs: 'farris-datepicker',\r\n    providers: [\r\n        UtilService,\r\n        DatepickerLocaleService,\r\n        DefaultConfigService,\r\n        NGX_DP_VALUE_ACCESSOR,\r\n        NGX_DP_VALIDATORS\r\n    ]\r\n})\r\nexport class FarrisDatePickerDirective\r\n    implements OnChanges, OnDestroy, ControlValueAccessor, Validator {\r\n    @Input() options: IMyOptions;\r\n    @Input() locale: string;\r\n    @Input() defaultMonth: string;\r\n\r\n    @Output() dateChanged: EventEmitter<IMyDateModel> = new EventEmitter<\r\n        IMyDateModel\r\n    >();\r\n    @Output() inputFieldChanged: EventEmitter<\r\n        IMyInputFieldChanged\r\n    > = new EventEmitter<IMyInputFieldChanged>();\r\n    @Output() calendarViewChanged: EventEmitter<\r\n        IMyCalendarViewChanged\r\n    > = new EventEmitter<IMyCalendarViewChanged>();\r\n    @Output() calendarToggle: EventEmitter<number> = new EventEmitter<number>();\r\n    @Output() rangeDateSelection: EventEmitter<\r\n        IMyRangeDateSelection\r\n    > = new EventEmitter<IMyRangeDateSelection>();\r\n\r\n    private cRef: ComponentRef<CalendarComponent> = null;\r\n    private inputText = '';\r\n    private preventClose = false;\r\n    private disabled = false;\r\n\r\n    private opts: IMyOptions;\r\n\r\n    // scrollFn: any = (e) => {\r\n    //     console.log((e.target as any).scrollTop);\r\n    // };\r\n\r\n    onChangeCb: (_: any) => void = () => {};\r\n    onTouchedCb: () => void = () => {};\r\n\r\n    constructor(\r\n        public localeService: DatepickerLocaleService,\r\n        private utilService: UtilService,\r\n        private vcRef: ViewContainerRef,\r\n        private cfr: ComponentFactoryResolver,\r\n        private renderer: Renderer2,\r\n        private cdr: ChangeDetectorRef,\r\n        private elem: ElementRef,\r\n        private config: DefaultConfigService,\r\n        private zone: NgZone\r\n    ) {\r\n        this.opts = this.config.getDefaultConfig();\r\n        this.parseOptions(this.opts);\r\n    }\r\n\r\n    @HostListener(KEYUP, ['$event']) onKeyUp(event: KeyboardEvent) {\r\n        const keyCode: number = this.utilService.getKeyCodeFromEvent(event);\r\n        if (this.ignoreKeyPress(keyCode)) {\r\n            return;\r\n        } else if (keyCode === KeyCode.esc) {\r\n            this.closeSelector(CalToggle.CloseByEsc);\r\n        } else {\r\n            const { value } = this.elem.nativeElement;\r\n\r\n            let valid = false;\r\n            if (!this.opts.dateRange) {\r\n                const date: IMyDate = this.utilService.isDateValid(\r\n                    value,\r\n                    this.opts\r\n                );\r\n                valid = this.utilService.isInitializedDate(date);\r\n            } else {\r\n                const { begin, end } = this.utilService.isDateValidDateRange(\r\n                    value,\r\n                    this.opts\r\n                );\r\n                valid =\r\n                    this.utilService.isInitializedDate(begin) &&\r\n                    this.utilService.isInitializedDate(end);\r\n            }\r\n            this.emitInputFieldChanged(value, valid);\r\n        }\r\n    }\r\n\r\n    @HostListener(BLUR) onBlur() {\r\n        const {\r\n            inputFieldValidation,\r\n            dateRange\r\n        } = this.opts;\r\n\r\n        if (inputFieldValidation) {\r\n            const { value } = this.elem.nativeElement;\r\n            let valid = false;\r\n            if (!dateRange) {\r\n                const date: IMyDate = this.utilService.isDateValid(\r\n                    value,\r\n                    this.opts\r\n                );\r\n\r\n                valid = this.utilService.isInitializedDate(date);\r\n            } else {\r\n                const _dateRange: IMyDateRange = this.utilService.isDateValidDateRange(\r\n                    value,\r\n                    this.opts\r\n                );\r\n                const { begin, end } = _dateRange;\r\n                valid =\r\n                    this.utilService.isInitializedDate(begin) &&\r\n                    this.utilService.isInitializedDate(end);\r\n            }\r\n\r\n            if (!valid && this.inputText !== value) {\r\n                this.clearDate();\r\n            }\r\n            this.onChangeCb(value);\r\n        }\r\n        this.onTouchedCb();\r\n    }\r\n\r\n    // wrapper with arrow function to preserve the use of 'this' word\r\n    private onClickWrapper = (ev: MouseEvent) => {\r\n        this.onClick(ev);\r\n    }\r\n\r\n    onClick(evt: MouseEvent) {\r\n        if (\r\n            this.opts.closeSelectorOnDocumentClick &&\r\n            !this.preventClose &&\r\n            evt.target &&\r\n            this.cRef !== null &&\r\n            this.elem.nativeElement !== evt.target &&\r\n            !this.cRef.location.nativeElement.contains(evt.target) &&\r\n            !this.disabled\r\n        ) {\r\n            this.closeSelector(CalToggle.CloseByOutClick);\r\n        }\r\n    }\r\n    public ngOnChanges(changes: SimpleChanges): void {\r\n        if (changes.hasOwnProperty(LOCALE)) {\r\n            this.setLocaleOptions();\r\n        }\r\n\r\n        if (changes.hasOwnProperty(DEFAULT_MONTH)) {\r\n            let dm: any = changes[DEFAULT_MONTH].currentValue;\r\n            if (typeof dm === OBJECT) {\r\n                dm = dm.defMonth;\r\n            }\r\n            this.defaultMonth = dm;\r\n        }\r\n\r\n        if (changes.hasOwnProperty(OPTIONS)) {\r\n            this.parseOptions(changes[OPTIONS].currentValue);\r\n        }\r\n    }\r\n\r\n    public ngOnDestroy(): void {\r\n        this.closeCalendar();\r\n    }\r\n\r\n    setLocaleOptions(): void {\r\n        const opts: IMyOptions = this.localeService.getLocaleOptions(\r\n            this.locale\r\n        );\r\n        Object.keys(opts).forEach(k => {\r\n            (this.opts as IMyOptions)[k] = opts[k];\r\n        });\r\n    }\r\n\r\n    public parseOptions(opts: IMyOptions): void {\r\n        if (opts !== undefined) {\r\n            Object.keys(opts).forEach(k => {\r\n                if (opts[k] !== undefined && opts[k] !== '') {\r\n                    (this.opts as IMyOptions)[k] = opts[k];\r\n                }\r\n            });\r\n        }\r\n        if (this.opts.minYear < Year.min) {\r\n            this.opts.minYear = Year.min;\r\n        }\r\n        if (this.opts.maxYear > Year.max) {\r\n            this.opts.maxYear = Year.max;\r\n        }\r\n    }\r\n    formatDate(value: any) {\r\n        const {\r\n            dateRange,\r\n            dateFormat,\r\n            monthLabels,\r\n            dateRangeDatesDelimiter,\r\n            returnFormat\r\n        } = this.opts;\r\n        if (!dateRange) {\r\n            // Single date mode\r\n            const date: IMyDate = this.utilService.isDateValid(\r\n                value,\r\n                this.opts\r\n            );\r\n            return this.utilService.getDateModel(\r\n                date,\r\n                null,\r\n                dateFormat,\r\n                monthLabels,\r\n                dateRangeDatesDelimiter,\r\n                returnFormat\r\n            );\r\n        } else {\r\n            // Date range mode\r\n            const _dateRange = this.utilService.isDateValidDateRange(\r\n                value,\r\n                this.opts\r\n            );\r\n            return this.utilService.getDateModel(\r\n                null,\r\n                _dateRange,\r\n                dateFormat,\r\n                monthLabels,\r\n                dateRangeDatesDelimiter,\r\n                returnFormat\r\n            );\r\n        }\r\n    }\r\n    public writeValue(value: any): void {\r\n        if (this.disabled) {\r\n            return;\r\n        }\r\n        if (value) {\r\n            value = this.formatDate(value);\r\n        }\r\n\r\n        if (!value) {\r\n            this.setInputValue(EMPTY_STR);\r\n            this.emitInputFieldChanged(EMPTY_STR, false);\r\n\r\n            if (this.cRef !== null) {\r\n                this.cRef.instance.resetDateValue(ResetDateType.both);\r\n            }\r\n        } else if (value.isRange === false && value.singleDate) {\r\n            // single date\r\n            const { date, formatted } = value.singleDate;\r\n            const valid: boolean = this.utilService.isInitializedDate(date);\r\n            if (valid) {\r\n                this.setInputValue(formatted);\r\n                this.emitInputFieldChanged(formatted, valid);\r\n\r\n                if (this.cRef !== null) {\r\n                    this.cRef.instance.resetDateValue(ResetDateType.dateRange);\r\n                }\r\n            }\r\n        } else if (value.isRange === true && value.dateRange) {\r\n            // date range\r\n            const { beginDate, endDate, formatted } = value.dateRange;\r\n\r\n            if (beginDate && endDate) {\r\n                const valid: boolean =\r\n                    this.utilService.isInitializedDate(beginDate) &&\r\n                    this.utilService.isInitializedDate(endDate);\r\n                if (valid) {\r\n                    this.setInputValue(formatted);\r\n                    this.emitInputFieldChanged(formatted, valid);\r\n\r\n                    if (this.cRef !== null) {\r\n                        this.cRef.instance.resetDateValue(\r\n                            ResetDateType.singleDate\r\n                        );\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    public registerOnChange(fn: any): void {\r\n        this.onChangeCb = fn;\r\n    }\r\n\r\n    public registerOnTouched(fn: any): void {\r\n        this.onTouchedCb = fn;\r\n    }\r\n\r\n    public setDisabledState(isDisabled: boolean): void {\r\n        this.disabled = isDisabled;\r\n        this.renderer.setProperty(\r\n            this.elem.nativeElement,\r\n            DISABLED,\r\n            isDisabled\r\n        );\r\n\r\n        if (isDisabled) {\r\n            this.closeCalendar();\r\n        }\r\n    }\r\n\r\n    public validate(c: AbstractControl): { [p: string]: any } {\r\n        return null;\r\n    }\r\n\r\n    public openCalendar(): void {\r\n        if (this.disabled) {\r\n            return;\r\n        }\r\n        this.preventClose = true;\r\n        this.cdr.detectChanges();\r\n        if (this.cRef === null) {\r\n            this.cRef = this.vcRef.createComponent(\r\n                this.cfr.resolveComponentFactory(CalendarComponent)\r\n            );\r\n            this.appendSelector(this.cRef.location.nativeElement);\r\n            this.cRef.instance.initialize(\r\n                this.opts,\r\n                this.defaultMonth,\r\n                this.getSelectorPosition(this.elem.nativeElement),\r\n                this.elem.nativeElement.value,\r\n                (dm: IMyDateModel, close: boolean) => {\r\n                    this.focusToInput();\r\n                    this.updateModel(dm);\r\n                    if (close) {\r\n                        this.closeSelector(CalToggle.CloseByDateSel);\r\n                    }\r\n                    this.emitDateChanged(dm);\r\n                    this.emitInputFieldChanged(\r\n                        this.utilService.getFormattedDate(dm),\r\n                        true\r\n                    );\r\n                },\r\n                (cvc: IMyCalendarViewChanged) => {\r\n                    this.emitCalendarChanged(cvc);\r\n                },\r\n                (rds: IMyRangeDateSelection) => {\r\n                    this.emitRangeDateSelection(rds);\r\n                },\r\n                () => {\r\n                    this.closeSelector(CalToggle.CloseByEsc);\r\n                }\r\n            );\r\n            this.emitCalendarToggle(CalToggle.Open);\r\n            this.cdr.detectChanges();\r\n        } else {\r\n            this.appendSelector(this.cRef.location.nativeElement);\r\n        }\r\n        this.preventClose = false;\r\n    }\r\n\r\n    public closeCalendar(): void {\r\n        this.closeSelector(CalToggle.CloseByCalBtn);\r\n    }\r\n\r\n    public toggleCalendar(event: MouseEvent): void {\r\n        event.stopPropagation();\r\n        if (this.disabled) {\r\n            return;\r\n        }\r\n        if (this.cRef === null) {\r\n            document.addEventListener(CLICK, this.onClickWrapper, true);\r\n            this.openCalendar();\r\n            const container = document.querySelector('.date-overlay-container');\r\n            this.renderer.setStyle(container, 'pointer-events', 'auto');\r\n        } else {\r\n            let flag = true;\r\n            const container = document.querySelector('.date-overlay-container');\r\n            if (container && this.cRef.location) {\r\n                if (container.hasChildNodes()) {\r\n                    container.childNodes.forEach(el => {\r\n                        if (el === this.cRef.location.nativeElement) {\r\n                            flag = false;\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            if (flag) {\r\n                this.renderer.setStyle(container, 'pointer-events', 'auto');\r\n                this.openCalendar();\r\n            } else {\r\n                document.removeEventListener(CLICK, this.onClickWrapper);\r\n                this.closeSelector(CalToggle.CloseByCalBtn);\r\n                this.renderer.setStyle(container, 'pointer-events', '');\r\n            }\r\n        }\r\n    }\r\n\r\n    public clearDate(): void {\r\n        if (this.disabled) {\r\n            return;\r\n        }\r\n        this.setInputValue(EMPTY_STR);\r\n        this.emitDateChanged({\r\n            isRange: this.opts.dateRange,\r\n            singleDate: {\r\n                date: this.utilService.resetDate(),\r\n                jsDate: null,\r\n                formatted: EMPTY_STR,\r\n                epoc: 0\r\n            },\r\n            dateRange: {\r\n                beginDate: this.utilService.resetDate(),\r\n                beginJsDate: null,\r\n                beginEpoc: 0,\r\n                endDate: this.utilService.resetDate(),\r\n                endJsDate: null,\r\n                endEpoc: 0,\r\n                formatted: EMPTY_STR\r\n            }\r\n        });\r\n        this.onChangeCb(null);\r\n        this.onTouchedCb();\r\n        this.closeSelector(CalToggle.CloseByCalBtn);\r\n    }\r\n\r\n    public isDateValid(): boolean {\r\n        const { value } = this.elem.nativeElement;\r\n\r\n        if (value !== EMPTY_STR) {\r\n            const date: IMyDate = this.utilService.isDateValid(\r\n                value,\r\n                this.opts\r\n            );\r\n            if (this.utilService.isInitializedDate(date)) {\r\n                this.emitInputFieldChanged(value, true);\r\n                return true;\r\n            }\r\n        }\r\n        this.emitInputFieldChanged(value, false);\r\n        return false;\r\n    }\r\n\r\n    private ignoreKeyPress(keyCode: number): boolean {\r\n        // keyCode === KeyCode.tab ||\r\n\r\n        return (\r\n            keyCode === KeyCode.leftArrow ||\r\n            keyCode === KeyCode.rightArrow ||\r\n            keyCode === KeyCode.upArrow ||\r\n            keyCode === KeyCode.downArrow ||\r\n            keyCode === KeyCode.shift\r\n        );\r\n    }\r\n\r\n    private closeSelector(reason: number): void {\r\n        if (this.cRef !== null) {\r\n            this.vcRef.remove(this.vcRef.indexOf(this.cRef.hostView));\r\n            this.cRef = null;\r\n            this.cdr.detectChanges();\r\n            this.emitCalendarToggle(reason);\r\n            const container = document.querySelector('.date-overlay-container');\r\n            this.renderer.setStyle(container, 'pointer-events', '');\r\n        }\r\n    }\r\n\r\n    private updateModel(model: IMyDateModel): void {\r\n        this.setInputValue(this.utilService.getFormattedDate(model));\r\n        this.onChangeCb(this.utilService.getFormattedDate(model));\r\n        this.onTouchedCb();\r\n    }\r\n\r\n    private setInputValue(value: string): void {\r\n        this.inputText = value;\r\n        this.renderer.setProperty(this.elem.nativeElement, VALUE, value);\r\n    }\r\n\r\n    private focusToInput(): void {\r\n        if (this.opts.focusInputOnDateSelect) {\r\n            this.elem.nativeElement.focus();\r\n        }\r\n    }\r\n\r\n    private emitDateChanged(dateModel: IMyDateModel): void {\r\n        this.dateChanged.emit(dateModel);\r\n    }\r\n\r\n    private emitInputFieldChanged(value: string, valid: boolean): void {\r\n        this.inputFieldChanged.emit({\r\n            value,\r\n            dateFormat: this.opts.dateFormat,\r\n            valid\r\n        });\r\n    }\r\n\r\n    private emitCalendarChanged(cvc: IMyCalendarViewChanged) {\r\n        this.calendarViewChanged.emit(cvc);\r\n    }\r\n\r\n    private emitRangeDateSelection(rds: IMyRangeDateSelection) {\r\n        this.rangeDateSelection.emit(rds);\r\n    }\r\n\r\n    private emitCalendarToggle(reason: number): void {\r\n        this.calendarToggle.emit(reason);\r\n    }\r\n\r\n    private jsDateToMyDate(date: Date): IMyDate {\r\n        return {\r\n            year: date.getFullYear(),\r\n            month: date.getMonth() + 1,\r\n            day: date.getDate()\r\n        };\r\n    }\r\n\r\n    private appendSelector(elem: any): void {\r\n        let container = document.querySelector('.date-overlay-container');\r\n        if (container) {\r\n            if (container.hasChildNodes()) {\r\n                container.childNodes.forEach(el => {\r\n                    if (el !== elem) {\r\n                        container.removeChild(el);\r\n                    }\r\n                });\r\n            }\r\n        } else {\r\n            container = document.createElement('div');\r\n            container.classList.add('date-overlay-container');\r\n            container.classList.add('overlay-container');\r\n            document.body.appendChild(container);\r\n        }\r\n        container.appendChild(elem);\r\n    }\r\n\r\n    private getSelectorPosition(elem: any): IMySelectorPosition {\r\n        let top = 0;\r\n        let left = 0;\r\n        let _selectorHeight = 0;\r\n        let _selectorWidth = 0;\r\n        const {\r\n            selectorHeight,\r\n            selectorWidth,\r\n            showTime,\r\n            dateRange\r\n        } = this.opts;\r\n\r\n        const b: any = document.body.getBoundingClientRect();\r\n        const e: any = elem.getBoundingClientRect();\r\n        top = e.top - b.top;\r\n        left = e.left - b.left;\r\n        let position = 'bottom';\r\n        if (dateRange) {\r\n            _selectorWidth = this.getSelectorDimension(selectorWidth) * 2;\r\n        } else {\r\n            _selectorWidth = this.getSelectorDimension(selectorWidth);\r\n        }\r\n\r\n        if (showTime) {\r\n            _selectorHeight = this.getSelectorDimension(selectorHeight) + 36;\r\n        } else {\r\n            _selectorHeight = this.getSelectorDimension(selectorHeight);\r\n        }\r\n        if (top + elem.offsetHeight + _selectorHeight > window.innerHeight && top - _selectorHeight - 2 > 0) {\r\n            top = top - _selectorHeight - 2;\r\n            position = 'top';\r\n        } else {\r\n            top = top + elem.offsetHeight + 2;\r\n        }\r\n\r\n        if (left + _selectorWidth > b.width) {\r\n            left = b.width - _selectorWidth - 15;\r\n        }\r\n        left = left > 0 ? left : 0;\r\n        return { top , left, position };\r\n    }\r\n\r\n    private getSelectorDimension(value: string): number {\r\n        return Number(value.replace(PX, EMPTY_STR));\r\n    }\r\n}\r\n","import { NotifyService } from '@farris/ui-notify';\r\nimport { DateTimeHelperService } from '@farris/ui-common/date';\r\nimport {\r\n    Component, OnInit, Input, EventEmitter, Output, ViewChild, forwardRef, SimpleChanges,\r\n    ElementRef, HostListener, OnChanges, HostBinding, Injector, ComponentRef, ViewContainerRef, ComponentFactoryResolver,\r\n    Renderer2, OnDestroy, AfterViewInit, ApplicationRef, ChangeDetectorRef\r\n} from '@angular/core';\r\nimport { NG_VALUE_ACCESSOR, ControlValueAccessor, NgControl } from '@angular/forms';\r\nimport { FarrisDatePickerDirective } from './farris-datepicker.input';\r\nimport {\r\n    IMyOptions, IMyDate, IMyDateModel, IMyShortcuts, IMyDateFormat,\r\n    IMyCalendarViewChanged, IMyRangeDateSelection\r\n} from './interfaces/public-api';\r\n\r\nimport { DefaultView, ShowType, CalToggle } from './enums/public-api';\r\n\r\nimport { UtilService, DefaultConfigService, DatepickerLocaleService, DatePickerService } from './services/public-api';\r\nimport { LocaleService } from '@farris/ui-locale';\r\nimport { differenceInSeconds, isDate, isValid, parse } from 'date-fns';\r\nimport { CalendarComponent } from './components/calendar/calendar.component';\r\nimport { CLICK, EMPTY_STR } from './constants/constants';\r\nimport { OverLayHiddenService } from '@farris/ui-common';\r\nimport { ViewType } from './interfaces/my-options.interface';\r\nimport { DynamicData } from './interfaces/dynamic-data-type.interface';\r\n\r\nconst FARRIS_DP_VALUE_ACCESSOR = {\r\n    provide: NG_VALUE_ACCESSOR,\r\n    useExisting: forwardRef(() => FarrisDatepickerComponent),\r\n    multi: true\r\n};\r\n\r\n@Component({\r\n    selector: 'farris-datepicker',\r\n    exportAs: 'farris-datepicker',\r\n    templateUrl: './farris-datepicker.component.html',\r\n    styles: [\r\n        `\r\n            :host {\r\n                display: block;\r\n            }\r\n\r\n            :host .datepicker-clear {\r\n                position: absolute;\r\n                height: 100%;\r\n                right: 0;\r\n                top: 0;\r\n                z-index: 100;\r\n            }\r\n        `\r\n    ],\r\n    providers: [FARRIS_DP_VALUE_ACCESSOR, UtilService, DefaultConfigService, LocaleService]\r\n})\r\nexport class FarrisDatepickerComponent implements OnInit, ControlValueAccessor, OnChanges, OnDestroy, AfterViewInit {\r\n\r\n    @HostBinding('class') cls = 'f-cmp-datepicker f-cmp-inputgroup';\r\n\r\n    @Input() viewType: ViewType = ViewType.Switch;\r\n\r\n    // \r\n    @Input() disabled = false;\r\n    // \r\n    @Input() readonly = false;\r\n    // \r\n    @Input() editable = true;\r\n    // \r\n    @Input() dateRange = false;\r\n    // \r\n    @Input() showTime = false;\r\n\r\n    @Input() hourStep = 1;\r\n    @Input() minuteStep = 1;\r\n    @Input() secondStep = 1;\r\n\r\n\r\n    // \r\n    @Input() showType: ShowType = ShowType.all;\r\n    // \r\n    @Input() locale = 'zh-cn';\r\n    // \r\n    @Input()\r\n    set dateFormat(value: string) {\r\n        if (value) {\r\n            // value  yyyy-MM-dd HH:mm:ss\r\n            // const formArr = 'yyyy-MM-dd HH:mm:ss'.split(' ');\r\n            value = value.replace(/^\\s+|\\s+$/g, ''); // \r\n            value = value.replace(/\\s+/g, ' '); // 1\r\n            const formArr = value.split(' ');\r\n            this._dateFormat = formArr[0];\r\n            // 'yyyy-MM-dd h:mm:ss a'12\r\n            if (formArr.length === 3) {\r\n                this._timeFormat = 'h:mm:ss a';\r\n            } else {\r\n                this._timeFormat = formArr[1];\r\n            }\r\n        }\r\n\r\n        // this._dateFormat = this._dateFormat ? (this._dateFormat + '').replace(/m/g, 'M') : '';\r\n        if (this._dateFormat) {\r\n            const mm = ['yyyy-mm', 'yyyy/mm', 'yyyymm', 'mm/yyyy'];\r\n            const _mm = mm.find(m => this._dateFormat.includes(m));\r\n            if (_mm) {\r\n                this._dateFormat = this._dateFormat.replace(_mm, _mm.replace(/m/g, 'M'));\r\n            }\r\n\r\n            if (this._timeFormat && this.showTime) {\r\n                this._dateFormat += ' ' + this._timeFormat;\r\n                if (this._timeFormat.indexOf('') > -1) {\r\n                    this._timeFormat = this._timeFormat.replace('', ':').replace('', ':').replace('', '');\r\n                }\r\n            }\r\n        }\r\n\r\n        // this.dateOpts.dateFormat = this._dateFormat;\r\n    }\r\n    get dateFormat(): string {\r\n        return this._dateFormat;\r\n    }\r\n    // \r\n    @Input() useDefault = false;\r\n    @Input() returnType: 'Object' | 'Date' | 'String' = 'String';\r\n    @Input() returnFormat: string;\r\n    // placeholder\r\n    @Input() placeholder = '';\r\n    @Input() beginPlaceholder = '';\r\n    @Input() endPlaceholder = '';\r\n    /**   true */\r\n    @Input() whenValueChangedThenCloseSelectorPanel = true;\r\n    // \r\n    // \r\n    @Input()\r\n    set minDate(val: any) {\r\n        const type = Object.prototype.toString.call(val);\r\n        let date: Date;\r\n        switch (type) {\r\n            case '[object Date]':\r\n                date = val;\r\n                break;\r\n            case '[object String]':\r\n                if (val) {\r\n                    date = new Date(val);\r\n                } else {\r\n                    date = new Date(1840, 1, 1, 0, 0, 0);\r\n                }\r\n                break;\r\n            case '[object Null]':\r\n                date = new Date(1840, 1, 1, 0, 0, 0);\r\n                break;\r\n            // case null:\r\n            //     date = new Date(1840, 1, 1, 0, 0, 0);\r\n            //     break;\r\n            case '[object Undefined]':\r\n                date = new Date(1840, 1, 1, 0, 0, 0);\r\n                break;\r\n            default:\r\n                date = new Date(1840, 1, 1, 0, 0, 0);\r\n                break;\r\n        }\r\n        if (isValid(date)) {\r\n            const year = date.getFullYear();\r\n            const month = date.getMonth() + 1;\r\n            const day = date.getDate();\r\n            const hour = date.getHours();\r\n            const minute = date.getMinutes();\r\n            const second = date.getSeconds();\r\n            this._minDate = { year, month, day, hour, minute, second };\r\n        }\r\n    }\r\n    get minDate() {\r\n        return this._minDate;\r\n    }\r\n    // \r\n    // \r\n    @Input()\r\n    set maxDate(val: any) {\r\n        const type = Object.prototype.toString.call(val);\r\n        let date: Date;\r\n\r\n        switch (type) {\r\n            case '[object Date]':\r\n                date = val;\r\n                break;\r\n            case '[object String]':\r\n                if (val) {\r\n                    date = new Date(val);\r\n                } else {\r\n                    date = new Date(10000, 1, 1, 0, 0, 0);\r\n                }\r\n                break;\r\n            case '[object Null]':\r\n                date = new Date(10000, 1, 1, 0, 0, 0);\r\n                break;\r\n            // case null:\r\n            //     date = new Date(10000, 1, 1, 0, 0, 0);\r\n            //     break;\r\n            case '[object Undefined]':\r\n                date = new Date(10000, 1, 1, 0, 0, 0);\r\n                break;\r\n            default:\r\n                date = new Date(10000, 1, 1, 0, 0, 0);\r\n                break;\r\n        }\r\n        if (isValid(date)) {\r\n            const year = date.getFullYear();\r\n            const month = date.getMonth() + 1;\r\n            const day = date.getDate();\r\n            const hour = date.getHours();\r\n            const minute = date.getMinutes();\r\n            const second = date.getSeconds();\r\n            this._maxDate = { year, month, day, hour, minute, second };\r\n        }\r\n    }\r\n    get maxDate() {\r\n        return this._maxDate;\r\n    }\r\n    // \r\n    @Input() highlightDates: Array<IMyDate> = [];\r\n    // \r\n    @Input() disableDateRangesBegin: IMyDate = {\r\n        year: 0,\r\n        month: 0,\r\n        day: 0\r\n    };\r\n    // \r\n    @Input() disableDateRangesEnd: IMyDate = {\r\n        year: 0,\r\n        month: 0,\r\n        day: 0\r\n    };\r\n    // \r\n    @Input() disableDates: Array<IMyDate> = [];\r\n    // \r\n    @Input() disableWeekdays: Array<string> = [];\r\n    // \r\n    @Input() markDates: Array<IMyDate> = [];\r\n    // \r\n    @Input() markDatesColor = '#59a1ff';\r\n    // \r\n    @Input() showWeekNumbers = false;\r\n    // \r\n    @Input() isMarkWeekends = false;\r\n    // \r\n    @Input() markWeekendsColor = '#59a1ff';\r\n    // input\r\n    @Input() dateRangeDatesDelimiter = '~';\r\n    //  sidebar \r\n    @Input() shortcuts: Array<IMyShortcuts> = [];\r\n    //  + monthRangeValue\r\n    @Input() monthRangeValue = 1;\r\n    // \r\n    @Input()\r\n    set beginValue(value: string | Date) {\r\n        value = value ? value : '';\r\n        if (value instanceof Date) {\r\n            value = this.dateTo(value);\r\n            this.returnType = 'Date';\r\n        } else {\r\n            if (value.indexOf('T') > -1) {\r\n                value = value.replace('T', ' ');\r\n            }\r\n            this.returnType = 'String';\r\n        }\r\n        this._beginValue = value;\r\n        if (this._initFinished) {\r\n            this.setValue(this._beginValue + this.dateRangeDatesDelimiter + this._endValue);\r\n        }\r\n    }\r\n    get beginValue() {\r\n        return this.dateFrom(this._beginValue, true);\r\n    }\r\n    // \r\n    @Input()\r\n    set endValue(value: string | Date) {\r\n        value = value ? value : '';\r\n        if (value instanceof Date) {\r\n            value = this.dateTo(value);\r\n            this.returnType = 'Date';\r\n        } else {\r\n            if (value.indexOf('T') > -1) {\r\n                value = value.replace('T', ' ');\r\n            }\r\n            this.returnType = 'String';\r\n        }\r\n        this._endValue = value;\r\n        if (this._initFinished) {\r\n            this.setValue(this._beginValue + this.dateRangeDatesDelimiter + this._endValue);\r\n        }\r\n    }\r\n    get endValue() {\r\n        return this.dateFrom(this._endValue, true);\r\n    }\r\n\r\n    /**\r\n     *  false\r\n     */\r\n    @Input() enableDynamic = false;\r\n    /**  */\r\n    @Input() previousMaxDays = 30;\r\n    /**  */\r\n    @Input() futureMaxDays = 30;\r\n\r\n    @Input() showClear = true;\r\n    /**   */\r\n    @Input() showPresent = false;\r\n    /** 1   mo  su:  mo */\r\n    @Input() firstDayOfWeek: 'mo'|'su' = 'mo';\r\n\r\n    // clear \r\n    @Output() clear = new EventEmitter();\r\n    // valueChanged \r\n    @Output() valueChange = new EventEmitter();\r\n    // focus \r\n    @Output() focus = new EventEmitter();\r\n    // blur \r\n    @Output() blur = new EventEmitter();\r\n    // beginValueChange\r\n    @Output() beginValueChange = new EventEmitter();\r\n    // endValueChange\r\n    @Output() endValueChange = new EventEmitter();\r\n    // PrevFocus dateRange \r\n    @Output() PrevFocus = new EventEmitter();\r\n    // NextFocus dateRange \r\n    @Output() NextFocus = new EventEmitter();\r\n\r\n    // close \r\n    @Output() close = new EventEmitter();\r\n\r\n\r\n    @ViewChild(FarrisDatePickerDirective) dp: FarrisDatePickerDirective;\r\n    @ViewChild('clearIcon') clearIcon: ElementRef;\r\n    @ViewChild('calendar', { read: ViewContainerRef }) calendarRef: ViewContainerRef;\r\n    @ViewChild('onPrevFocus') PFocus: ElementRef;\r\n    @ViewChild('onNextFocus') NFocus: ElementRef;\r\n\r\n    @ViewChild('dateInput') dateInput: ElementRef;\r\n\r\n    private cRef: ComponentRef<CalendarComponent> = null;\r\n    private _timeFormat = '';\r\n    private _value = '';\r\n    public _beginValue = '';\r\n    public _endValue = '';\r\n    private _initFinished = false;\r\n    private _timer: any;\r\n    private _dateFormat: string;\r\n    private _minDate: IMyDate = {\r\n        year: 1840,\r\n        month: 1,\r\n        day: 1,\r\n        hour: 0,\r\n        minute: 0,\r\n        second: 0\r\n    };\r\n    private _maxDate: IMyDate = {\r\n        year: 10000,\r\n        month: 1,\r\n        day: 1,\r\n        hour: 0,\r\n        minute: 0,\r\n        second: 0\r\n    };\r\n    set value(v) {\r\n        this._value = v ? v : '';\r\n    }\r\n    get value() {\r\n        return this._value;\r\n    }\r\n    selectedWeek = null;\r\n    dateOpts: IMyOptions = {};\r\n    defaultConfig: IMyOptions;\r\n    localDateOpts: IMyOptions;\r\n    localeConfig: DatepickerLocaleService;\r\n    localeService: LocaleService;\r\n    // \r\n    beginFocus = false;\r\n    // \r\n    endFocus = false;\r\n    // \r\n    totalFocus = false;\r\n\r\n    originTime: any;\r\n    // Tip\r\n    isActiveTip = false;\r\n    private vcRef: ViewContainerRef;\r\n    private cfr: ComponentFactoryResolver;\r\n    private renderer: Renderer2;\r\n    private datePicekrService: DatePickerService;\r\n    private _realValue = null;\r\n    private _realRangeValue = null;\r\n    private notifySer: NotifyService;\r\n    private formatedValue = '';\r\n    dtService: DateTimeHelperService = null;\r\n    private _applicationRef: ApplicationRef;\r\n\r\n    private _ngControl: NgControl;\r\n    _updateOn = 'change';\r\n\r\n    //  true blur valueChanged\r\n    // blur  valueChanged  false;\r\n    private _valueChangeEmitted = false;\r\n    private _mousedownEvent = null;\r\n    private closeCalendarHandler = null;\r\n    private cdr: ChangeDetectorRef = null;\r\n    /**  */\r\n    private _SELECT_DATE_ = null;\r\n\r\n    dynamicText = '';\r\n    @Input() dynamicValue: DynamicData = null;\r\n    @Output() dynamicValueChange = new EventEmitter();\r\n    @Output() dynamicViewChanged = new EventEmitter();\r\n\r\n    onModelChange = (obj: any) => { };\r\n    onModelTouched = () => { };\r\n\r\n    private overLayService: OverLayHiddenService;\r\n    constructor(\r\n        private el: ElementRef,\r\n        private utilService: UtilService,\r\n        private defaultConfigService: DefaultConfigService,\r\n        private injector: Injector\r\n    ) {\r\n        this.defaultConfig = this.defaultConfigService.getDefaultConfig();\r\n        if (this.injector) {\r\n            this.localeService = this.injector.get(LocaleService);\r\n            this.dtService = this.injector.get(DateTimeHelperService);\r\n            this.notifySer = this.injector.get(NotifyService, null);\r\n            if (this.notifySer) {\r\n                this.notifySer.config.position = 'top-center';\r\n            }\r\n        }\r\n        this.localeConfig = new DatepickerLocaleService();\r\n        this.vcRef = this.injector.get(ViewContainerRef, null);\r\n        this.cfr = this.injector.get(ComponentFactoryResolver, null);\r\n        this.renderer = this.injector.get(Renderer2, null);\r\n        this._applicationRef = this.injector.get(ApplicationRef);\r\n        this.cdr = this.injector.get(ChangeDetectorRef);\r\n        // this.datePicekrService = this.injector.get(DatePickerService, null)\r\n        this.overLayService = new OverLayHiddenService();\r\n    }\r\n\r\n    ngOnInit(): void {\r\n\r\n        this._ngControl = this.injector.get(NgControl, null);\r\n\r\n        this.initPlaceholder();\r\n        this.mergeDateOptions();\r\n        if (this._beginValue && this._endValue) {\r\n            this.setValue(this._beginValue + this.dateRangeDatesDelimiter + this._endValue);\r\n        }\r\n        this._initFinished = true;\r\n        this.datePicekrService = new DatePickerService(this.dateOpts);\r\n    }\r\n\r\n    private initPlaceholder() {\r\n        if (this.localeService) {\r\n            this.locale = this.localeService.getValue('locale');\r\n            this.localDateOpts = this.localeConfig.getLocaleOptions(this.locale);\r\n            this.placeholder = this.placeholder\r\n                ? this.placeholder\r\n                : this.localDateOpts.placeholder\r\n                    ? this.localDateOpts.placeholder\r\n                    : '';\r\n            if (!this.beginPlaceholder) {\r\n                this.beginPlaceholder = this.localDateOpts.range.begin || this.placeholder;\r\n            }\r\n\r\n            if (!this.endPlaceholder) {\r\n                this.endPlaceholder = this.localDateOpts.range.end || this.placeholder;\r\n            }\r\n        }\r\n    }\r\n\r\n    private mergeDateOptions() {\r\n        this.dateOpts = { ...this.defaultConfig, ...this.buildOptions() };\r\n\r\n        if (this.dateOpts.dateFormat) {\r\n            if (!this._dateFormat) {\r\n                this.dateFormat = this.dateOpts.dateFormat;\r\n                this.dateOpts.dateFormat = this.dateFormat;\r\n            }\r\n        }\r\n\r\n        if (this.showTime && !this._timeFormat) {\r\n            this._timeFormat = 'HH:mm:ss';\r\n            this.dateOpts.timeFormat = this._timeFormat;\r\n        }\r\n\r\n        if (this.dateOpts.returnFormat) {\r\n            if (!this.returnFormat) {\r\n                this.returnFormat = this.dateOpts.returnFormat;\r\n            }\r\n        }\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (changes.locale && changes.locale.isFirstChange()) {\r\n            // this.dp.setLocaleOptions();\r\n            this.localDateOpts = this.localeConfig.getLocaleOptions(this.locale);\r\n        }\r\n        if (changes) {\r\n            let flag = false;\r\n\r\n            const inputs = ['showTime', 'showType', 'dateRange', 'maxDate', 'minDate', 'monthRangeValue'];\r\n\r\n\r\n            Object.keys(changes).forEach(e => {\r\n                if (!changes[e].isFirstChange() && (this.dateOpts[e] || inputs.includes(e))) {\r\n                    // this[e] = changes[e].currentValue;\r\n                    flag = true;\r\n                }\r\n            });\r\n            if (flag) {\r\n                this.dateOpts = { ...(this.dateOpts ||this.defaultConfig), ...this.buildOptions() };\r\n            }\r\n        }\r\n        if (\r\n            changes.readonly &&\r\n            !changes.readonly.currentValue &&\r\n            !changes.readonly.firstChange &&\r\n            !this.value &&\r\n            this.useDefault\r\n        ) {\r\n            this.setDefaultValue();\r\n        }\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        if (this._ngControl && this._ngControl.control) {\r\n            this._updateOn = this._ngControl.control.updateOn;\r\n        }\r\n\r\n        this._timer = setTimeout(() => {\r\n            this.setDefaultValue();\r\n        });\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        clearTimeout(this._timer);\r\n        this.closeSelector();\r\n\r\n        this.overLayService.destory(this.el.nativeElement);\r\n        this.overLayService = null;\r\n    }\r\n\r\n    @HostListener('mouseenter', ['$event']) onMouseEnter(event) {\r\n        if (this.value && !this.readonly && !this.disabled) {\r\n            if (this.value && this.clearIcon) {\r\n                this.clearIcon.nativeElement.style.visibility = '';\r\n            }\r\n            if (this.dateOpts.dateRange) {\r\n                if (this.dateOpts.showTime) {\r\n                    this.isActiveTip = this.el.nativeElement.getBoundingClientRect().width < 300;\r\n                } else {\r\n                    this.isActiveTip = this.el.nativeElement.getBoundingClientRect().width < 190;\r\n                }\r\n            } else {\r\n                if (this.dateOpts.showTime) {\r\n                    this.isActiveTip = this.el.nativeElement.getBoundingClientRect().width < 170;\r\n                } else {\r\n                    this.isActiveTip = this.el.nativeElement.getBoundingClientRect().width < 120;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    @HostListener('mouseleave', ['$event']) onMouseLeave(event) {\r\n        if (!this.readonly && !this.disabled && this.clearIcon) {\r\n            this.clearIcon.nativeElement.style.visibility = 'hidden';\r\n        }\r\n    }\r\n\r\n    onBlur(e) {\r\n        this.totalFocus = false;\r\n\r\n        let _runblur = true;\r\n        if (this.value) {\r\n            try {\r\n                this.value = this.transform(this.value);\r\n                const valid = this._isValid(this.value);\r\n                if (!valid) {\r\n                    this.clearDate();\r\n                    _runblur = false;\r\n                }\r\n            } catch (e) {\r\n                this.clearDate();\r\n                _runblur = false;\r\n            }\r\n        }\r\n\r\n        const updateModel = () => {\r\n            if (!this._valueChangeEmitted) {\r\n                const realDate = this.dateFrom(this.transform(this.value, this.returnFormat));\r\n                this.onNgModelChange(this.value, realDate, true);\r\n                this.onModelTouched();\r\n            }\r\n        };\r\n\r\n        if (this.editable && _runblur) {\r\n            if (this['inDatagrid']) {\r\n                updateModel();\r\n            } else {\r\n                setTimeout(updateModel, 250);\r\n            }\r\n        }\r\n        this._valueChangeEmitted = false;\r\n        if (this._mousedownEvent) {\r\n            this._mousedownEvent();\r\n            this._mousedownEvent = null;\r\n        }\r\n        this.blur.emit();\r\n    }\r\n\r\n    onFocus(e) {\r\n        this.totalFocus = true;\r\n        this.registerMouseDownHandle();\r\n        this.focus.emit();\r\n    }\r\n\r\n    onInputClick(event) {\r\n        event.stopPropagation();\r\n        if (!this.readonly && !this.disabled) {\r\n            this.registerMouseDownHandle();\r\n            this.toggleCalendar(false);\r\n        }\r\n    }\r\n\r\n    private registerMouseDownHandle() {\r\n        if (!this._mousedownEvent) {\r\n            this._mousedownEvent = this.renderer.listen(document, 'mousedown', (e: any) => {\r\n                if (e.target.className.toString().indexOf('SVGAnimatedString') > -1) {\r\n                    return;\r\n                }\r\n\r\n                if (e.target.closest('.dynamic-view-item')) {\r\n                    return;\r\n                }\r\n\r\n                if (e.target.closest('.f-cmp-datepicker') ||\r\n                    e.target.closest('.f-datepicker-container') || e.target.className.indexOf('f-icon-date') > -1) {\r\n                    if (this.dateInput) {\r\n                        this.renderer.setStyle(this.dateInput.nativeElement, 'unselectable', 'on');\r\n                    }\r\n                    e.preventDefault();\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    setDefaultValue() {\r\n        if (!this.readonly && !this.value && this.useDefault) {\r\n            const now = new Date();\r\n            let nowValue = '';\r\n            if (!this.dateOpts.dateRange) {\r\n                nowValue = this.dateTo(now);\r\n\r\n            } else {\r\n                nowValue =\r\n                    this.dateTo(now) +\r\n                    this.dateRangeDatesDelimiter +\r\n                    this.dateTo(new Date(now.setMonth(now.getMonth() + 1)));\r\n\r\n            }\r\n            if (this.datePicekrService.validate(nowValue)) {\r\n                this.value = nowValue;\r\n                this.onNgModelChange(this.value);\r\n                this.onModelTouched();\r\n            }\r\n        }\r\n    }\r\n\r\n    clearDynamicDate($event = null) {\r\n        if ($event) {\r\n            $event.stopPropagation();\r\n        }\r\n\r\n        this.dateOpts.dynamicValueChanged(null);\r\n    }\r\n\r\n    clearDate($event: MouseEvent = null) {\r\n        if ($event) {\r\n            $event.stopPropagation();\r\n        }\r\n\r\n        this._SELECT_DATE_ = null;\r\n\r\n        if (!this.disabled) {\r\n            this._realRangeValue = null;\r\n            this._realValue = null;\r\n            this.onDateChanged({\r\n                isRange: this.dateOpts.dateRange,\r\n                singleDate: {\r\n                    date: this.utilService.resetDate(),\r\n                    jsDate: null,\r\n                    formatted: EMPTY_STR,\r\n                    epoc: 0\r\n                },\r\n                dateRange: {\r\n                    beginDate: this.utilService.resetDate(),\r\n                    beginJsDate: null,\r\n                    beginEpoc: 0,\r\n                    endDate: this.utilService.resetDate(),\r\n                    endJsDate: null,\r\n                    endEpoc: 0,\r\n                    formatted: EMPTY_STR\r\n                }\r\n            });\r\n            this.closeSelector(CalToggle.CloseByCalBtn);\r\n            this.onModelChange(null);\r\n            this.clear.emit();\r\n            if (this.clearIcon) {\r\n                this.clearIcon.nativeElement.style.visibility = 'hidden';\r\n            }\r\n        }\r\n    }\r\n\r\n    onSingleInputNgModelChange($event) {\r\n        this.value = $event || '';\r\n        this._realValue = this.value ? this.dateFrom($event) : '';\r\n        this.closeSelector();\r\n    }\r\n\r\n\r\n    onNgModelChange(value: any, realdate = null, emitValueChange = false) {\r\n        // this.value = value;\r\n        if (this.dateRange || this.showType == ShowType.selectWeek) {\r\n\r\n            const tmpArr = value ? value.split(this.dateRangeDatesDelimiter) : ['', ''];\r\n            const _beginValue = this.transform(tmpArr[0], this.returnFormat);\r\n            const _endValue = this.transform(tmpArr[1], this.returnFormat);\r\n\r\n            this._beginValue = this.transform(tmpArr[0]);\r\n            this._endValue = this.transform(tmpArr[1]);\r\n\r\n\r\n            value = _beginValue && _endValue ? _beginValue + this.dateRangeDatesDelimiter + _endValue : '';\r\n            this._realRangeValue = value;\r\n            this.onModelChange(value);\r\n            this.cdr.detectChanges();\r\n            this.beginValueChange.emit(this._beginValue);\r\n            this.endValueChange.emit(this._endValue);\r\n\r\n            const p = {\r\n                date: null,\r\n                formatted: this.value,\r\n                returnFormatted: this._realRangeValue,\r\n                cmpRef: this\r\n            };\r\n\r\n            this.valueChange.emit(p);\r\n        } else {\r\n\r\n            if (value === '') {\r\n                this.value = '';\r\n                this._onModelChange(null, emitValueChange);\r\n                return;\r\n            }\r\n\r\n            if (realdate) {\r\n                this._realValue = this.getRealReturnFormatted(realdate);\r\n                this._onModelChange(this._realValue, emitValueChange);\r\n\r\n                if (this.dateInput && this.dateInput.nativeElement.value !== this.value) {\r\n                    this.renderer.setProperty(this.dateInput.nativeElement, 'value', this.value);\r\n                }\r\n            } else {\r\n                if (this._isValid(value)) {\r\n                    this._realValue = this.getRealReturnFormatted(realdate);\r\n                    if (this.dateInput) {\r\n                        this.renderer.setProperty(this.dateInput.nativeElement, 'value', this.value);\r\n                    }\r\n                    this._onModelChange(this._realValue, emitValueChange);\r\n                }\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    private _onModelChange(realValue, emit) {\r\n        this._realValue = realValue;\r\n        this.onModelChange(realValue);\r\n        if (emit) {\r\n            const p = {\r\n                date: this.utilService.isDateValid(this.value, this.dateOpts, true),\r\n                formatted: this.value,\r\n                returnFormatted: realValue,\r\n                cmpRef: this\r\n            };\r\n\r\n            if (this.valueChange.observers.length) {\r\n                if (this.whenValueChangedThenCloseSelectorPanel) {\r\n                    this.closeSelector();\r\n                }\r\n\r\n                this.valueChange.emit(p);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    private getRealReturnFormatted(realdate: any) {\r\n\r\n        if (realdate) {\r\n            if (this.returnType === 'Date') {\r\n                return realdate;\r\n            } else {\r\n                if (this.returnFormat) {\r\n                    return this.dtService.formatTo(realdate, this.returnFormat);\r\n                }\r\n                return realdate;\r\n            }\r\n        } else {\r\n            return this.dateFrom(this._realValue || this.value) || '';\r\n        }\r\n    }\r\n\r\n    onDateRangeInputBlur(event: any) {\r\n        this.setValue(this._beginValue + this.dateRangeDatesDelimiter + this._endValue);\r\n        this.onNgModelChange(this._realRangeValue || this.value);\r\n    }\r\n\r\n    openCalendar(): void {\r\n        if (this.disabled) {\r\n            return;\r\n        }\r\n\r\n        let val = this._realValue;\r\n        if (this.dateRange || this.showType == ShowType.selectWeek) {\r\n            val = this._realRangeValue;\r\n        } else {\r\n            if (this.returnType === 'Date') {\r\n                val = this.transform(val, this.returnFormat);\r\n            }\r\n        }\r\n\r\n        if (this.cRef === null) {\r\n            this.cRef = this.calendarRef.createComponent(\r\n                this.cfr.resolveComponentFactory(CalendarComponent)\r\n            );\r\n\r\n            this.datePicekrService.appendSelector(this.cRef.location.nativeElement);\r\n\r\n            this.datePicekrService.registerScrollEvent(() => {\r\n                this.closeSelector();\r\n            });\r\n\r\n\r\n            this.cRef.instance.dateHlp = this.dtService;\r\n\r\n            if (this.showType === 4 && this.selectedWeek) {\r\n                this.cRef.instance.selectedWeek = this.selectedWeek;\r\n            }\r\n\r\n            this.cRef.instance.initialize(\r\n                this.dateOpts,\r\n                '',\r\n                this.datePicekrService.getSelectorPosition(this.el.nativeElement, this.cRef),\r\n                val,\r\n                (dm: IMyDateModel, close: boolean) => {\r\n\r\n                    if (this.dateOpts.dateRange && this.showTime && dm.dateRange.endJsDate < dm.dateRange.beginJsDate) {\r\n                        // const { year: beginYear, month: beginMonth,  day: beginDay  } = {...dm.dateRange.beginDate};\r\n                        // const { year: endYear, month: endMonth,  day: endDay  } = {...dm.dateRange.endDate};\r\n                        // error message:  The end time must not be earlier than the start time\r\n                        // error message:  \r\n                        const msg = this.localDateOpts.message['101'];\r\n                        if (this.notifySer) {\r\n                            this.notifySer.warning(msg);\r\n                        } else {\r\n                            alert(msg);\r\n                        }\r\n                        return;\r\n                    }\r\n                    this.selectedWeek = this.cRef.instance.selectedWeek;\r\n                    this.onDateChanged(dm);\r\n                    if (close) {\r\n                        this.closeSelector(CalToggle.CloseByDateSel);\r\n                    }\r\n                },\r\n                (cvc: IMyCalendarViewChanged) => {\r\n                    // this.emitCalendarChanged(cvc);\r\n                },\r\n                (rds: IMyRangeDateSelection) => {\r\n                    // this.emitRangeDateSelection(rds);\r\n                },\r\n                () => {\r\n                    this.closeSelector(CalToggle.CloseByEsc);\r\n                }\r\n            );\r\n\r\n            this.cRef.instance.dynamicViewShow.subscribe((e: {showDynamicView: boolean}) => {\r\n                const t = Object.assign(e, {dynamicValue: this.dynamicValue, singleValue: this._realValue, instance: this})\r\n                this.dynamicViewChanged.emit(t);\r\n            })\r\n\r\n            // this.cdr.detectChanges();\r\n        } else {\r\n            this.datePicekrService.appendSelector(this.cRef.location.nativeElement);\r\n        }\r\n\r\n        this.overLayService.registerMouseEvent(this.el.nativeElement, (e: MouseEvent) => {\r\n            if (this.cRef && this.cRef.location.nativeElement.contains(e.target)) {\r\n                return;\r\n            }\r\n            this.closeSelector();\r\n        }, { onlyTopWindow: true});\r\n\r\n        this.cRef.changeDetectorRef.detectChanges();\r\n        // this.preventClose = false;\r\n    }\r\n    closeSelector(reason?: number): void {\r\n        if (this.cRef !== null) {\r\n            this.calendarRef.remove(this.calendarRef.indexOf(this.cRef.hostView));\r\n            this.cRef = null;\r\n            // this.cdr.detectChanges();\r\n            const container = document.querySelector('.date-overlay-container');\r\n            if (container.childElementCount) {\r\n                container.remove();\r\n            }\r\n            this.renderer.setStyle(container, 'pointer-events', '');\r\n        }\r\n        this.totalFocus = false;\r\n        if (this.dateOpts.dateRange) {\r\n            this.beginFocus = false;\r\n            this.endFocus = false;\r\n        }\r\n\r\n        if (this.closeCalendarHandler) {\r\n            this.closeCalendarHandler();\r\n            this.closeCalendarHandler = null;\r\n        }\r\n\r\n        if (this.datePicekrService) {\r\n            this.datePicekrService.removeMouseEvent();\r\n        }\r\n\r\n        this.overLayService.destory(this.el.nativeElement);\r\n    }\r\n    toggleCalendar(close: boolean, emit = true) {\r\n        if (this.disabled) {\r\n            this.totalFocus = false;\r\n            if (this.dateOpts.dateRange) {\r\n                this.beginFocus = false;\r\n                this.endFocus = false;\r\n            }\r\n            return;\r\n        }\r\n        if (this.cRef === null) {\r\n            if (!this.closeCalendarHandler) {\r\n                this.closeCalendarHandler = this.renderer.listen(document, CLICK, () => this.closeSelector(CalToggle.CloseByOutClick));\r\n            }\r\n            this.totalFocus = true;\r\n            this.openCalendar();\r\n            const container = document.querySelector('.date-overlay-container');\r\n            this.renderer.setStyle(container, 'pointer-events', 'auto');\r\n        } else {\r\n            let flag = true;\r\n            const container = document.querySelector('.date-overlay-container');\r\n            if (container && this.cRef.location) {\r\n                if (container.hasChildNodes()) {\r\n                    container.childNodes.forEach(el => {\r\n                        if (el === this.cRef.location.nativeElement) {\r\n                            flag = false;\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            if (flag) {\r\n                this.renderer.setStyle(container, 'pointer-events', 'auto');\r\n                this.totalFocus = true;\r\n                this.openCalendar();\r\n            } else {\r\n                this.totalFocus = false;\r\n\r\n                if (this.dateOpts.dateRange) {\r\n                    this.beginFocus = false;\r\n                    this.endFocus = false;\r\n                }\r\n                // document.removeEventListener(CLICK, this.onClickHidden);\r\n                close && this.closeSelector(CalToggle.CloseByCalBtn);\r\n                // this.renderer.setStyle(container, 'pointer-events', '')\r\n                if (emit) {\r\n                    this.close.emit();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    onDateChanged(event: IMyDateModel) {\r\n        this._SELECT_DATE_ = event;\r\n        let valChangeParams: any = '';\r\n        if (event.singleDate) {\r\n            this.value = event.singleDate.formatted;\r\n            this.formatedValue = event.singleDate.formatted;\r\n            const returnFormatted = this.getRealReturnFormatted(event.singleDate.jsDate);\r\n            valChangeParams = { ...event.singleDate, formatted: event.singleDate.formatted, returnFormatted };\r\n\r\n            const { year, month, day, hour, minute, second } = event.singleDate.date;\r\n\r\n            if (month && (this.dateFormat.indexOf('yyyy') === -1 || this.dateFormat.indexOf('dd') === -1)) {\r\n                const nd = new Date(\r\n                    year || new Date().getFullYear(),\r\n                    month - 1,\r\n                    day || 1,\r\n                    hour || 0,\r\n                    minute || 0,\r\n                    second || 0\r\n                );\r\n\r\n                event.singleDate.jsDate = nd;\r\n            }\r\n\r\n            const MIN_DATE = new Date(`${this.minDate.year}-${this.minDate.month}-${this.minDate.day} ${this.minDate.hour}:${this.minDate.minute}:${this.minDate.second}`);\r\n            if (this.minDate.year !== 1840) {\r\n                if (differenceInSeconds(MIN_DATE, event.singleDate.jsDate) > 0) {\r\n                    event.singleDate.jsDate = MIN_DATE;\r\n                    this.value = this.transform(MIN_DATE);\r\n                }\r\n            } else if (this.maxDate.year !== 10000) {\r\n                const MAX_DATE = new Date(`${this.maxDate.year}-${this.maxDate.month}-${this.maxDate.day} ${this.maxDate.hour}:${this.maxDate.minute}:${this.maxDate.second}`);\r\n                \r\n                if (event.singleDate.date.year === 1840 || differenceInSeconds(MIN_DATE, event.singleDate.jsDate) === 0 || differenceInSeconds(MAX_DATE, event.singleDate.jsDate) < 0) {\r\n                    event.singleDate.jsDate = MAX_DATE;\r\n                    this.value = this.transform(MAX_DATE);\r\n                }\r\n            }\r\n\r\n            this.onNgModelChange(returnFormatted, event.singleDate.jsDate);\r\n        } else if (event.dateRange) {\r\n            this.value = event.dateRange.formatted;\r\n            this.formatedValue = event.dateRange.formatted;\r\n            const returnFormatted = event.dateRange.returnFormatted;\r\n            // let returnFormatted = this.dateFrom(event.dateRange.returnFormatted);\r\n            valChangeParams = { ...event.dateRange, formatted: event.dateRange.formatted, returnFormatted };\r\n            this.onNgModelChange(returnFormatted, event.dateRange);\r\n        }\r\n        this.onModelTouched();\r\n        this._valueChangeEmitted = true;\r\n        this.valueChange.emit(valChangeParams);\r\n    }\r\n\r\n    buildOptions() {\r\n        let dateOpts: any;\r\n        if (!this.localDateOpts) {\r\n            this.localDateOpts = this.localeConfig.getLocaleOptions(this.locale);\r\n        }\r\n\r\n        if (this.showType === ShowType.noDateAndMonth) {\r\n            this.localDateOpts.dateFormat = 'yyyy';\r\n            this.localDateOpts.returnFormat = 'yyyy';\r\n        }\r\n\r\n        const _showTime = (Number(this.showType) === ShowType.all) ? this.showTime : false;\r\n\r\n        dateOpts = {\r\n            dateRange: this.dateRange,\r\n            showTime: _showTime,\r\n            showType: Number(this.showType),\r\n            dateFormat: this.dateFormat ? this.dateFormat : this.localDateOpts.dateFormat,\r\n            returnFormat: this.returnFormat ? this.returnFormat : this.localDateOpts.returnFormat,\r\n            minYear: this._minDate.year,\r\n            maxYear: this._maxDate.year,\r\n            highlightDates: this.highlightDates,\r\n            disableDates: this.disableDates,\r\n            showWeekNumbers: this.showWeekNumbers,\r\n            disableDateRanges: [\r\n                {\r\n                    begin: this.disableDateRangesBegin,\r\n                    end: this.disableDateRangesEnd\r\n                }\r\n            ],\r\n            disableUntil: this._minDate,\r\n            disableSince: this._maxDate,\r\n            disableWeekdays: this.disableWeekdays,\r\n            markDates: [\r\n                {\r\n                    dates: this.markDates,\r\n                    color: this.markDatesColor\r\n                }\r\n            ],\r\n            markWeekends: {\r\n                marked: this.isMarkWeekends,\r\n                color: this.markWeekendsColor\r\n            },\r\n            dateRangeDatesDelimiter: this.dateRangeDatesDelimiter,\r\n            shortcuts: this.shortcuts,\r\n            timeFormat: this._timeFormat,\r\n            monthRangeValue: this.monthRangeValue,\r\n            viewType: this.viewType,\r\n            enableDynamic: this.enableDynamic,\r\n            dynamicValue: this.dynamicValue,\r\n            dynamicValueChanged: (e: DynamicData) => {\r\n                this.dynamicValue = e;\r\n                this.dynamicText = e ? e.text : '';\r\n                this.dateOpts.dynamicValue = e;\r\n                this.dynamicValueChange.emit(e);\r\n                this.closeSelector();\r\n            },\r\n            previousMaxDays: this.previousMaxDays,\r\n            futureMaxDays: this.futureMaxDays,\r\n            dynamicLocale: this.localDateOpts.dynamicLocale,\r\n            showPresent: this.showPresent,\r\n            hourStep: this.hourStep,\r\n            minuteStep: this.minuteStep,\r\n            secondStep: this.secondStep\r\n        };\r\n        dateOpts.firstDayOfWeek = this.firstDayOfWeek;\r\n        switch (Number(this.showType)) {\r\n            case ShowType.noDate:\r\n                dateOpts.defaultView = DefaultView.Month;\r\n                break;\r\n            case ShowType.noDateAndMonth:\r\n                dateOpts.defaultView = DefaultView.Year;\r\n                // dateOpts.dateFormat = 'yyyy';\r\n                // dateOpts.returnFormat = 'yyyy';\r\n                // this.dateFormat = 'yyyy';\r\n                break;\r\n            case ShowType.selectWeek:\r\n                dateOpts.showWeekNumbers = true;\r\n                dateOpts.dateRange = true;\r\n                dateOpts.firstDayOfWeek = 'mo';\r\n                break;\r\n            // default:\r\n            // this.returnType = 'String';\r\n\r\n        }\r\n        return { ...this.localDateOpts, ...dateOpts };\r\n    }\r\n\r\n    dateTo(d: any) {\r\n        const dateFormat = this.dateOpts.dateFormat ? this.dateOpts.dateFormat : this.defaultConfig.dateFormat;\r\n        const monthLabels = this.dateOpts.monthLabels ? this.dateOpts.monthLabels : this.defaultConfig.monthLabels;\r\n        const showTime = this.dateOpts.showTime ? this.dateOpts.showTime : this.defaultConfig.showTime;\r\n        const year = d.getFullYear();\r\n        const month = d.getMonth() + 1;\r\n        const day = d.getDate();\r\n        const hour = d.getHours();\r\n        const minute = d.getMinutes();\r\n        const second = d.getSeconds();\r\n        let date: IMyDate;\r\n        if (!showTime) {\r\n            date = { year, month, day };\r\n            this.originTime = { hour, minute, second };\r\n        } else {\r\n            date = { year, month, day, hour, minute, second };\r\n        }\r\n        return this.utilService.formatDate(date, dateFormat, monthLabels);\r\n    }\r\n    //  Date \r\n    dateFrom(str: any, ignorRange = false) {\r\n        if (!str) {\r\n            return '';\r\n        }\r\n\r\n        const _this = this;\r\n\r\n        const dateRange = this.dateOpts.dateRange ? this.dateOpts.dateRange : this.defaultConfig.dateRange;\r\n        const dateFormat = this.dateOpts.dateFormat ? this.dateOpts.dateFormat : this.defaultConfig.dateFormat;\r\n        const returnFormat = this.dateOpts.returnFormat ? this.dateOpts.returnFormat : this.defaultConfig.returnFormat;\r\n        const showTime = this.dateOpts.showTime ? this.dateOpts.showTime : this.defaultConfig.showTime;\r\n        const delimeters: Array<string> = returnFormat.match(/[^(DdMmYy)]{1,}/g);\r\n        let dateValue: Array<IMyDateFormat>;\r\n        const getValue = this.utilService.getDateValue;\r\n        if ((dateRange || this.dateOpts.showType === ShowType.selectWeek) && !ignorRange) {\r\n            const tmpBegin = str.split(this.dateRangeDatesDelimiter)[0];\r\n            const tmpEnd = str.split(this.dateRangeDatesDelimiter)[1];\r\n            let tmpBeginDate = this.utilService.isDateValid(tmpBegin, this.dateOpts, true);\r\n            let tmpEndDate = this.utilService.isDateValid(tmpEnd, this.dateOpts, true);\r\n            tmpBeginDate = this.utilService.isInitializedDate(tmpBeginDate) ? tmpBeginDate : this.dateOpts.disableUntil;\r\n            tmpEndDate = this.utilService.isInitializedDate(tmpEndDate) ? tmpEndDate : this.dateOpts.disableSince;\r\n            return (\r\n                this.utilService.formatDate(tmpBeginDate, returnFormat, this.defaultConfig.monthLabels) +\r\n                this.dateRangeDatesDelimiter +\r\n                this.utilService.formatDate(tmpEndDate, returnFormat, this.defaultConfig.monthLabels)\r\n            );\r\n        } else {\r\n            if (this.returnType === 'Date') {\r\n                if (str && str instanceof Date) {\r\n                    return str;\r\n                }\r\n                return convert(str, getValue, this.originTime);\r\n            } else {\r\n                const tmpDate = this.utilService.isDateValid(str, this.dateOpts, true);\r\n                return this.utilService.formatDate(tmpDate, returnFormat, this.defaultConfig.monthLabels);\r\n            }\r\n        }\r\n\r\n        function convert(v, _getValue: any, originTime = { hour: 0, minute: 0, second: 0 }) {\r\n            let fmt = returnFormat;\r\n            if (_this.returnType === 'Date') {\r\n                fmt = 'yyyy-MM-dd' + (showTime ? ' HH:mm:ss' : '');\r\n            }\r\n            if (showTime) {\r\n                const date = v.split(' ')[0];\r\n                let time = v.split(' ')[1];\r\n\r\n                dateValue = _getValue(date, fmt, delimeters);\r\n                if (time) {\r\n                    time = time.replace(/[,]/g, ':').replace(/[]/, '');\r\n                    const [h, m, s] = time.split(':');\r\n                    const hour = h;\r\n                    const minute = m;\r\n                    const second = s ? s : '';\r\n\r\n                    dateValue[3] = { value: hour, format: 'hh' };\r\n                    dateValue[4] = { value: minute, format: 'mm' };\r\n                    if (second) {\r\n                        dateValue[5] = { value: second, format: 'ss' };\r\n                    }\r\n                }\r\n            } else {\r\n                const date = v.split(' ')[0];\r\n                dateValue = _getValue(date, fmt, delimeters);\r\n            }\r\n\r\n\r\n            let year = Number(dateValue[0] ? dateValue[0].value : 1970);\r\n            const yearValue = dateValue[0];\r\n            if (yearValue.format) {\r\n                if (!yearValue.value || yearValue.value.length !== yearValue.format.length) {\r\n                    year = null;\r\n                }\r\n            }\r\n\r\n            const month = Number(dateValue[1] ? dateValue[1].value : 1) - 1;\r\n            const day = Number(dateValue[2] ? dateValue[2].value : 1);\r\n            const _hour = dateValue[3] ? Number(dateValue[3].value) : originTime.hour;\r\n            const _minute = dateValue[4] ? Number(dateValue[4].value) : originTime.minute;\r\n            const _second = dateValue[5] ? Number(dateValue[5].value) : originTime.second;\r\n\r\n            if (!year) {\r\n                return null;\r\n            }\r\n            return new Date(year, month, day, _hour, _minute, _second);\r\n        }\r\n    }\r\n\r\n    transform(value: any, _fmt = this.dateOpts.dateFormat) {\r\n        value = value ? value : '';\r\n        const { returnFormat, dateFormat, showTime } = this.dateOpts;\r\n        let _tmpDate = null;\r\n        if (typeof value === 'string') {\r\n            _tmpDate = parse(value, returnFormat, new Date());\r\n\r\n            if (!isValid(_tmpDate)) {\r\n                if (this._SELECT_DATE_ && this._SELECT_DATE_.singleDate) {\r\n                    _tmpDate = this._SELECT_DATE_.singleDate.jsDate;\r\n                } else {\r\n                    if (this._realValue) {\r\n                        _tmpDate =  parse(this._realValue, returnFormat, new Date());\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            if (value instanceof Date) {\r\n                _tmpDate = value;\r\n            }\r\n        }\r\n        let formattedVal = value;\r\n        if (isValid(_tmpDate)) {\r\n            formattedVal = this.dtService.formatTo(_tmpDate, _fmt);\r\n            return formattedVal;\r\n        } else {\r\n            // ,,\r\n            value = value.replace(/[,]/g, '-').replace(/[]/, '');\r\n            if (value[value.length - 1] === '-') {\r\n                value = value.substr(0, value.length - 1);\r\n            }\r\n\r\n            if (isValid(new Date(value))) {\r\n                formattedVal = this.dtService.formatTo(value, _fmt);\r\n            } else {\r\n                value = '';\r\n            }\r\n        }\r\n        if (value) {\r\n            if (this.dateFrom(value, true) === '') {\r\n                const tmpDate = this.utilService.isDateValid(\r\n                    value,\r\n                    Object.assign({}, this.dateOpts, {\r\n                        dateFormat: returnFormat\r\n                    })\r\n                );\r\n                formattedVal = this.utilService.formatDate(tmpDate, _fmt, this.defaultConfig.monthLabels);\r\n            }\r\n        }\r\n        return formattedVal;\r\n    }\r\n\r\n    setValue(value: string) {\r\n        if (this.value !== value) {\r\n            if (this.dateOpts.dateRange) {\r\n                const _tmpDateArr = value.split(this.dateRangeDatesDelimiter);\r\n                const beginStr = _tmpDateArr[0];\r\n                const endStr = _tmpDateArr[1];\r\n                this._beginValue = this.transform(beginStr);\r\n                this._endValue = this.transform(endStr);\r\n                this.value = this._beginValue && this._endValue ? this._beginValue + this.dateRangeDatesDelimiter + this._endValue : '';\r\n            } else {\r\n                if (value) {\r\n                    this.value = this.transform(value);\r\n                } else {\r\n                    this.value = '';\r\n                }\r\n            }\r\n\r\n            this.cdr.markForCheck();\r\n        }\r\n    }\r\n\r\n    updateValue(value: string) {\r\n        if (this.dateOpts.dateRange) {\r\n            const _tmpDateArr = value.split(this.dateRangeDatesDelimiter);\r\n            const beginStr = _tmpDateArr[0];\r\n            const endStr = _tmpDateArr[1];\r\n            this._beginValue = this.transform(beginStr);\r\n            this._endValue = this.transform(endStr);\r\n            this.value = this._beginValue && this._endValue ? this._beginValue + this.dateRangeDatesDelimiter + this._endValue : '';\r\n        } else {\r\n            this.value = this.transform(value);\r\n        }\r\n    }\r\n\r\n    getValueByType(val) {\r\n        if (val instanceof Date) {\r\n            this.returnType = 'Date';\r\n            // return this.dateTo(val);\r\n            return val;\r\n        } else if (val && val instanceof Object) {\r\n            const { begin, end } = val;\r\n            const beginStr = begin instanceof Date ? this.dateTo(begin) : '';\r\n            const endStr = begin instanceof Date ? this.dateTo(end) : '';\r\n\r\n            this.returnType = 'Object';\r\n            return beginStr && endStr ? beginStr + this.dateRangeDatesDelimiter + endStr : '';\r\n        } else if (val && typeof val === 'string') {\r\n            if (val.indexOf('T') > -1) {\r\n                val = val.replace('T', ' ');\r\n            }\r\n            this.returnType = 'String';\r\n            return val;\r\n        } else {\r\n            return '';\r\n        }\r\n    }\r\n    \r\n    writeValue(val: any): void {\r\n        if (typeof val === 'object' && val && !isDate(val)) {\r\n            this.dynamicValue = val;\r\n            this.dynamicText = this.utilService.formatDynamicValue(val, this.dateOpts.dynamicLocale);\r\n            this.dateOpts.showDynamicView = true;\r\n            this.dateOpts.dynamicValue = this.dynamicValue;\r\n        } else {\r\n            // this.dateOpts.showDynamicView = false;\r\n            this._realValue = val;\r\n            if (this.dateRange) {\r\n                this._realRangeValue = val;\r\n            }\r\n\r\n            this.setValue(this.getValueByType(val));\r\n        }\r\n    }\r\n    registerOnChange(fn: any): void {\r\n        this.onModelChange = fn;\r\n    }\r\n    registerOnTouched(fn: any): void {\r\n        this.onModelTouched = fn;\r\n    }\r\n    setDisabledState?(isDisabled: boolean): void {\r\n        this.disabled = isDisabled;\r\n    }\r\n    onPrevFocus(value: boolean): void {\r\n        this.beginFocus = true;\r\n        if (this.endFocus == true) {\r\n            this.endFocus = !this.endFocus;\r\n        }\r\n        this.PrevFocus.emit();\r\n    }\r\n    onNextFocus(value: boolean): void {\r\n        this.endFocus = true;\r\n        if (this.beginFocus == true) {\r\n            this.beginFocus = !this.beginFocus;\r\n        }\r\n        this.NextFocus.emit();\r\n    }\r\n\r\n    private _convert2dateString(val: string, realValue = false) {\r\n        if (val) {\r\n            let t = val.replace(/[,]/g, '-').replace(/[,]/g, ' ').replace(/[,,,]/g, ':').replace('', '');\r\n\r\n            if (this.showType === ShowType.noDateAndMonth && t.indexOf('-') === -1) {\r\n                t += '-';\r\n            }\r\n\r\n            // \r\n            var checkSpaceReg = /(\\s)\\1{1,}/g;\r\n            if (t.match(checkSpaceReg)) {\r\n                t.match(checkSpaceReg).forEach(n => {\r\n                    if (n[0] === ' ') {\r\n                        t = t.replace(n,  ' ');\r\n                    }\r\n                });\r\n            }\r\n\r\n            if (realValue) {\r\n                const objDate = this.utilService.isDateValid(val, this.dateOpts, true);\r\n                if (objDate) {\r\n                    let { year, month, day, hour, minute, second} = objDate;\r\n                    if (!year) {\r\n                        year = new Date().getFullYear();\r\n                    }\r\n                    if (!month) {\r\n                        month = new Date().getMonth();\r\n                    }\r\n\r\n                    if (!day) {\r\n                        day = 1;\r\n                    }\r\n\r\n                    if (!hour) {\r\n                        hour = 0;\r\n                    }\r\n\r\n                    if (!minute) {\r\n                        minute = 0;\r\n                    }\r\n\r\n                    if (!second) {\r\n                        second = 0;\r\n                    }\r\n\r\n                    return `${year}-${month}-${day} ${hour}:${minute}:${second}`;\r\n                }\r\n            }\r\n\r\n            if (t[t.length - 1] === '-') {\r\n                // t = t.substr(0, t.length - 1);\r\n                t += '01';\r\n            }\r\n\r\n            if (t[t.length - 1] === ':') {\r\n                t = t.substr(0, t.length - 1);\r\n            }\r\n\r\n            return t.replace(/^\\s+|\\s+$/g, '');\r\n        }\r\n\r\n        return val;\r\n    }\r\n\r\n\r\n    private _isValid(value: any) {\r\n        value = this._convert2dateString(value);\r\n        if (value) {\r\n            if (this.dateFormat.indexOf('yyyy') === -1 || this.dateFormat.indexOf('dd') === -1) {\r\n                const _tmpDate = parse(this.value, this.dateFormat, new Date());\r\n                if (this._realValue) {\r\n                    if (this.returnType === 'Date') {\r\n                        return isValid(this._realValue);\r\n                    } else {\r\n                        return isValid(new Date(this._convert2dateString(this._realValue, true)));\r\n                        // return isValid(parse(this._realValue, this.returnFormat, new Date()));\r\n                    }\r\n                }\r\n\r\n                const d = this.utilService.isDateValid(value, this.dateOpts);\r\n                if (d) {\r\n                    if (d.year || d.month) {\r\n                        const cdate = new Date();\r\n                        const year = cdate.getFullYear();\r\n                        const str = (this.dateOpts.returnFormat || 'yyyy-MM-dd')\r\n                            .replace('yyyy', '' + (d.year || year)).replace('MM', '' + d.month).replace('dd', '1');\r\n                        return isValid(new Date(str));\r\n                    }\r\n                    return false;\r\n                }\r\n                return isValid(value);\r\n            } else {\r\n                const reg = /^\\d{1,}$/;\r\n                if (reg.test(value) && this.dateFormat.indexOf('yyyyMMdd') > -1) { //  yyyyMMddHHmmss\r\n                    const _r =  this._isValid2(value);\r\n                    if (_r.isValided) {\r\n                        this._realValue = this.getRealReturnFormatted(_r.date);\r\n                        this.value = this.transform(_r.date);\r\n                    }\r\n                    return _r.isValided;\r\n                } else {\r\n                    const _tmpDate = parse(value, this.dateFormat, new Date());\r\n                    const d = this.utilService.isDateValid(this.value, this.dateOpts);\r\n                    return isValid(_tmpDate) || this.utilService.isInitializedDate(d);\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    private _isValid2(value: string): any {\r\n        let year = 0;\r\n        let month = 0;\r\n        let day = 0;\r\n        let hour = 0;\r\n        let minute = 0;\r\n        let seconds = 0;\r\n\r\n        const df = this.dateFormat;\r\n\r\n        if (df.includes('yyyy')) {\r\n            if (value) {\r\n                year = +value.slice(0, 4);\r\n                value = value.slice(4);\r\n            } else {\r\n                return false;\r\n            }\r\n        }\r\n        if (df.includes('MM')) {\r\n            if (value) {\r\n                month = +value.slice(0, 2) - 1;\r\n                value = value.slice(2);\r\n\r\n                if (month < 0) {\r\n                    month = 0;\r\n                }\r\n            } else {\r\n                return false;\r\n            }\r\n        }\r\n        if (df.includes('dd')) {\r\n            if (value) {\r\n                day = +value.slice(0, 2);\r\n                value = value.slice(2);\r\n            } else {\r\n                return false;\r\n            }\r\n        }\r\n        if (df.includes('HH')) {\r\n            if (value) {\r\n                hour = +value.slice(0, 2);\r\n                value = value.slice(2);\r\n            }\r\n        }\r\n        if (df.includes('mm')) {\r\n            if (value) {\r\n                minute = +value.slice(0, 2);\r\n                value = value.slice(2);\r\n            }\r\n        }\r\n        if (df.includes('ss')) {\r\n            if (value) {\r\n                seconds = +value.slice(0, 2);\r\n            }\r\n        }\r\n\r\n        const d = new Date(year, month, day, hour, minute, seconds);\r\n        return {\r\n            isValided: isValid(d),\r\n            date: d\r\n        };\r\n    }\r\n\r\n}\r\n","/*\r\n * @Author: (Lucas Huang)\r\n * @Date: 2019-08-02 14:14:22\r\n * @LastEditors: (Lucas Huang)\r\n * @LastEditTime: 2019-09-04 15:03:00\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\nimport {\r\n    Component,\r\n    EventEmitter,\r\n    Input,\r\n    Output,\r\n    ViewEncapsulation\r\n} from '@angular/core';\r\nimport { IMyOptions } from '../../interfaces/public-api';\r\n@Component({\r\n    selector: 'lib-selection-sidebar',\r\n    templateUrl: './selection-sidebar.component.html',\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\nexport class SelectionSidebarComponent {\r\n    @Input() opts: IMyOptions;\r\n    @Output() setTime: EventEmitter<void> = new EventEmitter<void>();\r\n}\r\n","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'angular-datepicker',\r\n    template: ''\r\n})\r\nexport class AngularMyDatePickerComponent {}\r\n","import { EventEmitter, ChangeDetectorRef, Component, Injector, Input, OnInit, Output } from '@angular/core';\r\nimport { DynamicData, DynamicDateType } from '../../interfaces/dynamic-data-type.interface';\r\n\r\n@Component({\r\n    selector: 'lib-dynamic-view',\r\n    templateUrl: 'dynamic-view.component.html',\r\n    styleUrls: [\r\n        './dynamic-view.css'\r\n    ]\r\n})\r\n\r\nexport class DynamicViewComponent implements OnInit {\r\n    _value: string = '';\r\n\r\n    get value() {\r\n        return this._value;\r\n    }\r\n\r\n    set value(val) {\r\n        this._value = val;\r\n        this.valueChange.emit(val);\r\n    }\r\n\r\n    private _data: DynamicData = null;\r\n    @Input() set data(val: DynamicData) {\r\n        this._data = val;\r\n        this.setValue(val);\r\n    }\r\n\r\n    get data() {\r\n        return this._data;\r\n    }\r\n\r\n    @Input() previousMaxDays = 30;\r\n    @Input() futureMaxDays = 30;\r\n\r\n    @Input() locale: any;\r\n\r\n    previous_dateType: DynamicDateType  = 'day';\r\n    previous_days: number = 1;\r\n\r\n    future_dateType: DynamicDateType = 'day'\r\n    future_days = 1;\r\n\r\n    present_first_dateType: DynamicDateType = 'month';\r\n    present_last_dateType: DynamicDateType = 'month';\r\n\r\n    @Output() valueChange = new EventEmitter();\r\n\r\n    constructor(private injector: Injector, private cd: ChangeDetectorRef) { }\r\n\r\n    ngOnInit() { }\r\n\r\n    onListItemFormControlClick($event) {\r\n        const lbl = $event.target.closest('label');\r\n        if (lbl) {\r\n            lbl.click();\r\n        }\r\n    }\r\n\r\n    setValue(val: DynamicData) {\r\n        if (val) {\r\n            this.value = val.name;\r\n            switch(this.value) {\r\n                case 'present_day': // \r\n                case 'present_month': // \r\n                case 'present_year':\r\n                    break;\r\n                case 'previou':\r\n                    this.previous_dateType = val.dateType;\r\n                    this.previous_days = val.count;\r\n                    break;\r\n                case 'future':\r\n                    this.future_dateType = val.dateType;\r\n                    this.future_days = val.count;\r\n                    break;\r\n                case 'present_first':\r\n                    this.present_first_dateType = val.dateType;\r\n                    break;\r\n                case 'present_last':\r\n                    this.present_last_dateType = val.dateType;\r\n                    break; \r\n            }\r\n            this.cd.detectChanges();\r\n        }\r\n    }\r\n\r\n    getValue(): DynamicData {\r\n        let val = null;\r\n        if (this.value) {\r\n            switch(this.value) {\r\n                case 'present_day': // \r\n                    val = {dateType:'day', period:'present', count: null, isFirstDay: false, isLastDay: false};\r\n                    break;\r\n                case 'present_month': // \r\n                    val = {dateType:'month', period:'present', count: null, isFirstDay: false, isLastDay: false};\r\n                    break;\r\n                case 'present_year':\r\n                    val = {dateType:'year', period:'present', count: null, isFirstDay: false, isLastDay: false};\r\n                    break;\r\n                case 'previou':\r\n                    val = { dateType: this.previous_dateType , period:'previous', count: this.previous_days, isFirstDay: false, isLastDay: false};\r\n                    break;\r\n                case 'future':\r\n                    val = { dateType: this.future_dateType , period:'future', count: this.future_days, isFirstDay: false, isLastDay: false};\r\n                    break;\r\n                case 'present_first':\r\n                    val = { dateType: this.present_first_dateType , period:'present', count: null, isFirstDay: true, isLastDay: false};\r\n                    break;\r\n                case 'present_last':\r\n                    val = { dateType: this.present_last_dateType , period:'present', count: null, isFirstDay: false, isLastDay: true};\r\n                    break;\r\n            }\r\n\r\n            if (val) {\r\n                val.name = this.value;\r\n            }\r\n        }\r\n        return val;\r\n    }\r\n\r\n    private getDateTypeString(dt: DynamicDateType) {\r\n        switch(dt) {\r\n            case 'week':\r\n                return this.locale.week || '';\r\n            case 'day':\r\n                return this.locale.day || '';\r\n            case 'month':\r\n                return this.locale.month || '';\r\n            case 'year':\r\n                return this.locale.year || '';\r\n        }\r\n    }\r\n\r\n    formatValue() {\r\n        const val = this.getValue();\r\n        if (val) {\r\n            let fval = '';\r\n            switch(val.name) {\r\n                case 'present_day': // \r\n                fval = this.locale.today || '';\r\n                break;\r\n            case 'present_month': // \r\n                fval = this.locale.presentMonth || '';\r\n                break;\r\n            case 'present_year':\r\n                fval = this.locale.presentYear ||'';\r\n                break;\r\n            case 'previou':\r\n                fval =  (this.locale.previous|| '') + ' ' + val.count + ' ' + this.getDateTypeString(val.dateType);\r\n                break;\r\n            case 'future':\r\n                fval = (this.locale.future || '') + ' '+ val.count + ' ' +this.getDateTypeString(val.dateType);\r\n                break;\r\n            case 'present_first':\r\n                fval = (this.locale.current||'') + this.getDateTypeString(val.dateType) + (this.locale.first||' 1 ');\r\n                break;\r\n            case 'present_last':\r\n                fval = (this.locale.current||'') + this.getDateTypeString(val.dateType) + (this.locale.last||' 1 ');\r\n                break;\r\n            }\r\n\r\n            return fval;\r\n        } else {\r\n            return '';\r\n        }\r\n    }\r\n\r\n\r\n    private setDays(typ: string, days: number) {\r\n        if (typ === 'previous') {\r\n            this.previous_days = days;\r\n        } else {\r\n            this.future_days = days;\r\n        }\r\n    }\r\n\r\n    checkMaxDays($event, tye: string) {\r\n        const target = $event.target as any;\r\n        const val = target.value.replace(/[^\\d]/g,'');\r\n        const days = Number(val);\r\n        target.value = days;\r\n        const max = tye === 'previous' ? this.previousMaxDays: this.futureMaxDays; \r\n        this.setDays(tye, days);\r\n\r\n        if (days > max) {\r\n            target.value = max;\r\n            this.setDays(tye, max);\r\n            return;\r\n        } else {\r\n            if (days < 1) {\r\n                target.value = 1;\r\n                this.setDays(tye, 1);\r\n                return;\r\n            }\r\n        }\r\n    }\r\n\r\n    onNumberKeydown($event: KeyboardEvent) {\r\n        $event.stopPropagation();\r\n        if ($event.key === '.' || $event.key === '-' || $event.key === '+') {\r\n            $event.preventDefault();\r\n        }\r\n    }\r\n}","import { Component, ElementRef, EventEmitter, HostListener, Injector, Input, OnInit, Output, ViewChild } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'dynamic-date-input',\r\n    templateUrl: 'dynamic-date-input.component.html'\r\n})\r\n\r\nexport class DynamicDateInputComponent implements OnInit {\r\n\r\n    @Input() readonly: boolean;\r\n    @Input() disabled: boolean;\r\n\r\n    @Input() value: string;\r\n    @Input() text: string;\r\n\r\n    @Input() isFocus: boolean;\r\n    @Input() placeholder: string;\r\n\r\n    @Input() showClear: boolean;\r\n\r\n\r\n    @Output() inputClick = new EventEmitter();\r\n    @Output() tabKeydown =  new EventEmitter();\r\n    @Output() clear =  new EventEmitter();\r\n\r\n    @ViewChild('clearIcon') clearIcon: ElementRef;\r\n    \r\n    constructor(private inject: Injector) { }\r\n\r\n    ngOnInit() { }\r\n\r\n    @HostListener('mouseenter', ['$event'])\r\n    onMouseEnter(event) {\r\n        if (this.value && !this.disabled && !this.readonly) {\r\n            if (this.value && this.clearIcon) {\r\n                this.clearIcon.nativeElement.style.visibility = '';\r\n            }\r\n        }\r\n    }\r\n\r\n    @HostListener('mouseleave', ['$event'])\r\n    onMouseLeave(event) {\r\n        if (!this.disabled && this.clearIcon && !this.readonly) {\r\n            this.clearIcon.nativeElement.style.visibility = 'hidden';\r\n        }\r\n    }\r\n}","import { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { NgModule } from '@angular/core';\r\n\r\nimport { CalendarComponent } from './components/calendar/calendar.component';\r\nimport { SelectionBarComponent } from './components/selection-bar/selection-bar.component';\r\nimport { DayViewComponent } from './components/day-view/day-view.component';\r\nimport { MonthViewComponent } from './components/month-view/month-view.component';\r\nimport { YearViewComponent } from './components/year-view/year-view.component';\r\n\r\nimport { FarrisDatePickerDirective } from './farris-datepicker.input';\r\nimport { FarrisDatepickerComponent } from './farris-datepicker.component';\r\nimport { SelectionSidebarComponent } from './components/selection-sidebar/selection-sidebar.component';\r\nimport { AngularMyDatePickerComponent } from './AngularMyDatePicker.component';\r\nimport { TimePickerModule } from '@farris/ui-time-picker';\r\nimport { LocaleModule } from '@farris/ui-locale';\r\nimport { PopoverModule } from '@farris/ui-popover';\r\nimport { DateHelperModule } from '@farris/ui-common/date';\r\nimport { NotifyModule  } from '@farris/ui-notify';\r\nimport { FarrisCommonModule } from '@farris/ui-common';\r\nimport { DynamicViewComponent } from './components/dynamic-view/dynamic-view.component';\r\nimport { DynamicDateInputComponent } from './dynamic-date-input/dynamic-date-input.component';\r\n@NgModule({\r\n    imports: [\r\n        CommonModule,\r\n        FormsModule, \r\n        TimePickerModule,\r\n        LocaleModule,\r\n        FarrisCommonModule,\r\n        PopoverModule.forRoot(),\r\n        DateHelperModule.forRoot(),\r\n        NotifyModule.forRoot(),\r\n    ],\r\n    declarations: [\r\n        CalendarComponent,\r\n        SelectionSidebarComponent,\r\n        SelectionBarComponent,\r\n        DayViewComponent,\r\n        MonthViewComponent,\r\n        YearViewComponent,\r\n        FarrisDatepickerComponent,\r\n        FarrisDatePickerDirective,\r\n        AngularMyDatePickerComponent,\r\n        DynamicViewComponent,\r\n        DynamicDateInputComponent\r\n    ],\r\n    entryComponents: [CalendarComponent],\r\n    exports: [\r\n        CalendarComponent,\r\n        SelectionBarComponent,\r\n        SelectionSidebarComponent,\r\n        DayViewComponent,\r\n        MonthViewComponent,\r\n        YearViewComponent,\r\n        FarrisDatepickerComponent,\r\n        FarrisDatePickerDirective,\r\n        DynamicViewComponent,\r\n        DynamicDateInputComponent\r\n    ]\r\n})\r\nexport class FarrisDatePickerModule {}\r\n"]}