/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, ElementRef, ViewEncapsulation, ViewChild, Renderer2, ChangeDetectorRef, HostBinding } from '@angular/core';
import { UtilService } from '../../services/public-api';
import { DefaultView, KeyCode, MonthId, ResetDateType } from '../../enums/public-api';
import { DOT, UNDER_LINE, D, M, Y, DATE_ROW_COUNT, DATE_COL_COUNT, MONTH_ROW_COUNT, MONTH_COL_COUNT, YEAR_ROW_COUNT, YEAR_COL_COUNT, SU, MO, TU, WE, TH, FR, SA, EMPTY_STR } from '../../constants/constants';
import { TimePickerPanelComponent } from '@farris/ui-time-picker';
import { flatten } from 'lodash-es';
import { ViewType } from '../../interfaces/my-options.interface';
var CalendarComponent = /** @class */ (function () {
    function CalendarComponent(renderer, cdr, utilService) {
        var _this = this;
        this.renderer = renderer;
        this.cdr = cdr;
        this.utilService = utilService;
        this.position = 'static';
        this.visibleMonth = { monthTxt: EMPTY_STR, monthNbr: 0, year: 0, yearTxt: EMPTY_STR };
        this.visibleMonth_range = { monthTxt: EMPTY_STR, monthNbr: 0, year: 0, yearTxt: EMPTY_STR };
        this.selectedMonth = { monthNbr: 0, year: 0 };
        this.selectedMonth_range = { monthNbr: 0, year: 0 };
        this.selectedDate = { year: 0, month: 0, day: 0 };
        this.selectedDateRange = { begin: { year: 0, month: 0, day: 0 }, end: { year: 0, month: 0, day: 0 } };
        this.selectedWeek = { weekNbr: 0, year: 0 };
        this.weekDays = [];
        this.dates = [];
        this.dates_range = [];
        this.months = [];
        this.months_range = [];
        this.years = [];
        this.years_range = [];
        this.dayIdx = 0;
        this.weekDayOpts = [SU, MO, TU, WE, TH, FR, SA];
        this.selectMonth = false;
        this.selectMonth_range = false;
        this.selectYear = false;
        this.selectYear_range = false;
        this.selectTime = false;
        this.selectorPos = null;
        this.scrollDiff = 0;
        this.prevViewDisabled = false;
        this.nextViewDisabled = false;
        this.prevDobViewDisabled = false;
        this.nextDobViewDisabled = false;
        this.prevViewDisabled_range = false;
        this.nextViewDisabled_range = false;
        this.prevDobViewDisabled_range = false;
        this.nextDobViewDisabled_range = false;
        // 禁用日期时间控件中的时间段的小时
        this.disabledHours = (/**
         * @return {?}
         */
        function () {
            /** @type {?} */
            var min = _this.opts.disableUntil;
            /** @type {?} */
            var max = _this.opts.disableSince;
            /** @type {?} */
            var currentDate = _this.opts.dateRange ? _this.selectedDateRange.begin : _this.selectedDate;
            /** @type {?} */
            var res = _this.utilService.disabledHours(min, max, currentDate);
            return res;
        });
        // 禁用日期时间控件中的时间段的分钟
        this.disabledMinutes = (/**
         * @param {?} hour
         * @return {?}
         */
        function (hour) {
            /** @type {?} */
            var min = _this.opts.disableUntil;
            /** @type {?} */
            var max = _this.opts.disableSince;
            /** @type {?} */
            var currentDate = _this.opts.dateRange ? _this.selectedDateRange.begin : _this.selectedDate;
            /** @type {?} */
            var res = _this.utilService.disabledMinutes(min, max, hour, currentDate);
            return res;
        });
        // 禁用日期时间控件中的时间段的秒
        this.disabledSeconds = (/**
         * @param {?} hour
         * @param {?} minute
         * @return {?}
         */
        function (hour, minute) {
            /** @type {?} */
            var min = _this.opts.disableUntil;
            /** @type {?} */
            var max = _this.opts.disableSince;
            /** @type {?} */
            var currentDate = _this.opts.dateRange ? _this.selectedDateRange.begin : _this.selectedDate;
            /** @type {?} */
            var res = _this.utilService.disabledSeconds(min, max, hour, minute, currentDate);
            return res;
        });
    }
    /**
     * @param {?} date
     * @return {?}
     */
    CalendarComponent.prototype.getTimeStr = /**
     * @param {?} date
     * @return {?}
     */
    function (date) {
        /** @type {?} */
        var hour = this.utilService.preZero(date.getHours());
        /** @type {?} */
        var minute = this.utilService.preZero(date.getMinutes());
        /** @type {?} */
        var second = this.utilService.preZero(date.getSeconds());
        return hour + ":" + minute + ":" + second;
    };
    /**
     * @param {?} opts
     * @param {?} defaultMonth
     * @param {?} selectorPos
     * @param {?} inputValue
     * @param {?} dc
     * @param {?} cvc
     * @param {?} rds
     * @param {?} cbe
     * @return {?}
     */
    CalendarComponent.prototype.initialize = /**
     * @param {?} opts
     * @param {?} defaultMonth
     * @param {?} selectorPos
     * @param {?} inputValue
     * @param {?} dc
     * @param {?} cvc
     * @param {?} rds
     * @param {?} cbe
     * @return {?}
     */
    function (opts, defaultMonth, selectorPos, inputValue, dc, cvc, rds, cbe) {
        this.opts = opts;
        this.selectorPos = selectorPos;
        this.weekDays.length = 0;
        var _a = this.opts, defaultView = _a.defaultView, dateRange = _a.dateRange, firstDayOfWeek = _a.firstDayOfWeek, dayLabels = _a.dayLabels, stylesData = _a.stylesData, yearTxt = _a.yearTxt;
        this.visibleMonth.yearTxt = yearTxt;
        this.visibleMonth_range.yearTxt = yearTxt;
        // if (stylesData.styles.length) {
        //     const styleElTemp: any = this.renderer.createElement(STYLE);
        //     this.renderer.appendChild(styleElTemp, this.renderer.createText(stylesData.styles));
        //     this.renderer.appendChild(this.styleEl.nativeElement, styleElTemp);
        // }
        this.dayIdx = this.weekDayOpts.indexOf(firstDayOfWeek);
        if (this.dayIdx !== -1) {
            /** @type {?} */
            var idx = this.dayIdx;
            // tslint:disable-next-line:prefer-for-of
            for (var i = 0; i < this.weekDayOpts.length; i++) {
                this.weekDays.push(dayLabels[this.weekDayOpts[idx]]);
                idx = this.weekDayOpts[idx] === SA ? 0 : idx + 1;
            }
        }
        /** @type {?} */
        var today = this.getToday();
        /** @type {?} */
        var isInDisableRange = this.utilService.isDisabledDate(today, this.opts);
        today = !isInDisableRange ? today : this.utilService.getNearDate(today, this.opts.disableUntil, this.opts.disableSince);
        switch (defaultView) {
            case DefaultView.Month:
                this.selectedMonth = { monthNbr: 0, year: today.year };
                this.selectedMonth_range = { monthNbr: 0, year: today.year + 1 };
                break;
            case DefaultView.Year:
                this.selectedMonth = { monthNbr: 0, year: today.year };
                this.selectedMonth_range = { monthNbr: 0, year: today.year + 10 };
                break;
            default:
                this.selectedMonth = { monthNbr: today.month, year: today.year };
                if (today.month >= 12) {
                    this.selectedMonth_range = { monthNbr: 1, year: today.year + 1 };
                }
                else {
                    this.selectedMonth_range = { monthNbr: today.month + this.opts.monthRangeValue, year: today.year };
                }
                break;
        }
        if (defaultMonth && defaultMonth.length) {
            this.selectedMonth = this.utilService.parseDefaultMonth(defaultMonth);
            this.selectedMonth_range = this.utilService.parseDefaultMonth(defaultMonth);
            if (this.selectedMonth_range.monthNbr >= 12) {
                this.selectedMonth_range.year++;
                this.selectedMonth_range.monthNbr = 1;
            }
            else {
                this.selectedMonth_range.monthNbr = this.selectedMonth_range.monthNbr + this.opts.monthRangeValue;
            }
        }
        if (!dateRange) {
            // Single date mode
            /** @type {?} */
            var date = this.utilService.isDateValid(inputValue, this.opts, true);
            if (this.utilService.isInitializedDate(date)) {
                this.selectedDate = date;
                /** @type {?} */
                var hour = this.utilService.preZero(date.hour);
                /** @type {?} */
                var minute = this.utilService.preZero(date.minute);
                /** @type {?} */
                var second = this.utilService.preZero(date.second);
                this.timeVlaue = hour + ":" + minute + ":" + second;
                this.selectedMonth = { monthNbr: date.month, year: date.year };
            }
        }
        else {
            // Date range mode
            var _b = this.utilService.isDateValidDateRange(inputValue, this.opts), begin = _b.begin, end = _b.end;
            if (this.utilService.isInitializedDate(begin) && this.utilService.isInitializedDate(end)) {
                this.selectedDateRange = { begin: begin, end: end };
                /** @type {?} */
                var hour = this.utilService.preZero(begin.hour);
                /** @type {?} */
                var minute = this.utilService.preZero(begin.minute);
                /** @type {?} */
                var second = this.utilService.preZero(begin.second);
                this.timeVlaue = hour + ":" + minute + ":" + second;
                /** @type {?} */
                var _hour = this.utilService.preZero(end.hour);
                /** @type {?} */
                var _minute = this.utilService.preZero(end.minute);
                /** @type {?} */
                var _second = this.utilService.preZero(end.second);
                this.timeVlaue_range = _hour + ":" + _minute + ":" + _second;
                this.selectedMonth = { monthNbr: begin.month, year: begin.year };
                if (begin.month === end.month && begin.year === end.year) {
                    if (end.month >= 12) {
                        this.selectedMonth_range = { monthNbr: 1, year: end.year + 1 };
                    }
                    else {
                        /** @type {?} */
                        var endyear = end.year;
                        if (defaultView === DefaultView.Month) {
                            endyear = endyear + 1;
                        }
                        this.selectedMonth_range = { monthNbr: end.month + this.opts.monthRangeValue, year: endyear };
                    }
                }
                else {
                    if (defaultView === DefaultView.Month && begin.year === end.year) {
                        this.selectedMonth_range = { monthNbr: end.month, year: end.year + 1 };
                    }
                    else {
                        this.selectedMonth_range = { monthNbr: end.month, year: end.year };
                    }
                }
                /** @type {?} */
                var weekNbr = this.utilService.getWeekNumber(begin) === this.utilService.getWeekNumber(end)
                    ? this.utilService.getWeekNumber(begin)
                    : 0;
                this.selectedWeek = { weekNbr: weekNbr, year: begin.year };
            }
        }
        this.dateChanged = dc;
        this.calendarViewChanged = cvc;
        this.rangeDateSelection = rds;
        this.closedByEsc = cbe;
        this.setCalendarVisibleMonth();
        if (defaultView === DefaultView.Month) {
            this.onMonthViewBtnClicked();
            if (dateRange) {
                this.onMonthViewBtnClicked(true);
            }
        }
        else if (defaultView === DefaultView.Year) {
            this.onYearViewBtnClicked();
            if (dateRange) {
                this.onYearViewBtnClicked(true);
            }
        }
    };
    /**
     * @param {?} value
     * @return {?}
     */
    CalendarComponent.prototype.resetDateValue = /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        if (value === ResetDateType.singleDate || value === ResetDateType.both) {
            this.selectedDate = this.utilService.resetDate();
        }
        if (value === ResetDateType.dateRange || value === ResetDateType.both) {
            this.selectedDateRange.begin = this.utilService.resetDate();
            this.selectedDateRange.end = this.utilService.resetDate();
        }
    };
    /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.resetMonthYearSelect = /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    function (isSecondCalendar) {
        if (!isSecondCalendar) {
            this.selectMonth = false;
            this.selectYear = false;
        }
        else {
            this.selectMonth_range = false;
            this.selectYear_range = false;
        }
    };
    /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.onMonthViewBtnClicked = /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    function (isSecondCalendar) {
        this.selectTime = false;
        if (!isSecondCalendar) {
            this.selectMonth = !this.selectMonth;
            this.selectYear = false;
            if (this.selectMonth) {
                this.generateMonths(isSecondCalendar);
            }
            else {
                this.visibleMonth.year = this.selectedMonth.year;
            }
        }
        else {
            this.selectMonth_range = !this.selectMonth_range;
            this.selectYear_range = false;
            if (this.selectMonth_range) {
                this.generateMonths(isSecondCalendar);
            }
            else {
                this.visibleMonth_range.year = this.selectedMonth_range.year;
            }
            this.cdr.detectChanges();
        }
    };
    /**
     * @param {?} cell
     * @param {?} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.onMonthCellClicked = /**
     * @param {?} cell
     * @param {?} isSecondCalendar
     * @return {?}
     */
    function (cell, isSecondCalendar) {
        if (!isSecondCalendar) {
            var _a = this.visibleMonth, year = _a.year, monthNbr = _a.monthNbr;
            /** @type {?} */
            var mc = cell.nbr !== monthNbr;
            this.visibleMonth = {
                monthTxt: this.opts.monthLabels[cell.nbr],
                monthNbr: cell.nbr,
                year: year,
                yearTxt: this.opts.yearTxt
            };
            this.selectedMonth.year = this.visibleMonth.year;
            if (this.opts.showType === 2) {
                this.toSelectMonth(this.visibleMonth);
            }
            else {
                this.generateCalendar(cell.nbr, year, mc, isSecondCalendar);
                this.selectMonth = false;
            }
        }
        else {
            var _b = this.visibleMonth_range, year = _b.year, monthNbr = _b.monthNbr;
            /** @type {?} */
            var mc = cell.nbr !== monthNbr;
            this.visibleMonth_range = {
                monthTxt: this.opts.monthLabels[cell.nbr],
                monthNbr: cell.nbr,
                year: year,
                yearTxt: this.opts.yearTxt
            };
            this.selectedMonth_range.year = this.visibleMonth_range.year;
            if (this.opts.showType === 2) {
                this.toSelectMonth(this.visibleMonth_range);
            }
            else {
                this.generateCalendar(cell.nbr, year, mc, isSecondCalendar);
                this.selectMonth_range = false;
            }
        }
    };
    /**
     * @param {?} cell
     * @return {?}
     */
    CalendarComponent.prototype.onMonthCellKeyDown = /**
     * @param {?} cell
     * @return {?}
     */
    function (cell) {
        // Make possible to move focus by arrow keys
        var _a = this.getSourceRowAndColumnFromEvent(event), sourceRow = _a.sourceRow, sourceCol = _a.sourceCol;
        var _b = this.getTargetFocusRowAndColumn(event, sourceRow, sourceCol, MONTH_ROW_COUNT, MONTH_COL_COUNT), moveFocus = _b.moveFocus, targetRow = _b.targetRow, targetCol = _b.targetCol;
        if (moveFocus) {
            this.focusCellElement(M, targetRow, targetCol);
        }
    };
    /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.onYearViewBtnClicked = /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    function (isSecondCalendar) {
        this.selectTime = false;
        if (!isSecondCalendar) {
            this.visibleMonth.year = this.selectedMonth.year;
            if (!this.selectYear) {
                this.generateYears(this.visibleMonth.year, isSecondCalendar);
            }
            else {
                this.generateCalendar(this.visibleMonth.monthNbr, this.visibleMonth.year, false, isSecondCalendar);
            }
            this.selectYear = this.opts.showType === 3 ? true : !this.selectYear;
            if (this.opts.showType === 2) {
                this.selectMonth = !this.selectMonth;
            }
            else {
                this.selectMonth = false;
            }
            // this.selectYear = !this.selectYear;
            // this.selectMonth = false;
        }
        else {
            this.visibleMonth_range.year = this.selectedMonth_range.year;
            if (!this.selectYear_range) {
                this.generateYears(this.visibleMonth_range.year, isSecondCalendar);
            }
            else {
                this.generateCalendar(this.visibleMonth_range.monthNbr, this.visibleMonth_range.year, false, isSecondCalendar);
            }
            this.selectYear_range = this.opts.showType === 3 ? true : !this.selectYear_range;
            if (this.opts.showType === 2) {
                this.selectMonth_range = !this.selectMonth_range;
            }
            else {
                this.selectMonth_range = false;
            }
        }
        this.cdr.detectChanges();
    };
    /**
     * @param {?} cell
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.onYearCellClicked = /**
     * @param {?} cell
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    function (cell, isSecondCalendar) {
        if (!isSecondCalendar) {
            var _a = this.visibleMonth, year = _a.year, monthNbr = _a.monthNbr, monthTxt = _a.monthTxt;
            /** @type {?} */
            var yc = cell.year !== year;
            this.visibleMonth = { monthTxt: monthTxt, monthNbr: monthNbr, year: cell.year, yearTxt: this.opts.yearTxt };
            this.selectedMonth.year = this.visibleMonth.year;
            if (this.opts.showType === 3) {
                this.toSelectYear({ year: this.visibleMonth.year });
            }
            else if (this.opts.showType === 2) {
                this.generateMonths(isSecondCalendar);
                this.selectYear = false;
                this.selectMonth = true;
            }
            else {
                this.generateCalendar(monthNbr, cell.year, yc, isSecondCalendar);
                this.selectYear = false;
            }
        }
        else {
            var _b = this.visibleMonth_range, year = _b.year, monthNbr = _b.monthNbr, monthTxt = _b.monthTxt;
            /** @type {?} */
            var yc = cell.year !== year;
            this.visibleMonth_range = {
                monthTxt: monthTxt,
                monthNbr: monthNbr,
                year: cell.year,
                yearTxt: this.opts.yearTxt
            };
            this.selectedMonth_range.year = this.visibleMonth_range.year;
            if (this.opts.showType === 3) {
                this.toSelectYear({ year: this.visibleMonth_range.year });
            }
            else if (this.opts.showType === 2) {
                this.generateMonths(isSecondCalendar);
                this.selectYear_range = false;
                this.selectMonth_range = true;
            }
            else {
                this.generateCalendar(monthNbr, cell.year, yc, isSecondCalendar);
                this.selectYear_range = false;
            }
        }
    };
    /**
     * @param {?} cell
     * @return {?}
     */
    CalendarComponent.prototype.onYearCellKeyDown = /**
     * @param {?} cell
     * @return {?}
     */
    function (cell) {
        // Make possible to move focus by arrow keys
        var _a = this.getSourceRowAndColumnFromEvent(event), sourceRow = _a.sourceRow, sourceCol = _a.sourceCol;
        var _b = this.getTargetFocusRowAndColumn(event, sourceRow, sourceCol, YEAR_ROW_COUNT, YEAR_COL_COUNT), moveFocus = _b.moveFocus, targetRow = _b.targetRow, targetCol = _b.targetCol;
        if (moveFocus) {
            this.focusCellElement(Y, targetRow, targetCol);
        }
    };
    /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.generateMonths = /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    function (isSecondCalendar) {
        /** @type {?} */
        var today = this.getToday();
        var _a = this.opts, disableUntil = _a.disableUntil, disableSince = _a.disableSince;
        // tslint:disable-next-line:one-variable-per-declaration
        /** @type {?} */
        var year;
        /** @type {?} */
        var monthNbr;
        if (!isSecondCalendar) {
            this.months.length = 0;
            year = this.visibleMonth.year;
            monthNbr = this.visibleMonth.monthNbr;
        }
        else {
            this.months_range.length = 0;
            year = this.visibleMonth_range.year;
            monthNbr = this.visibleMonth_range.monthNbr;
        }
        for (var i = 1; i <= 12; i += 3) {
            /** @type {?} */
            var row = [];
            for (var j = i; j < i + 3; j++) {
                /** @type {?} */
                var disabled = this.utilService.isMonthDisabledByDisableUntil({ year: year, month: j, day: this.daysInMonth(j, year) }, disableUntil) || this.utilService.isMonthDisabledByDisableSince({ year: year, month: j, day: 1 }, disableSince);
                row.push({
                    nbr: j,
                    name: this.opts.monthLabels[j],
                    currMonth: j === today.month && year === today.year,
                    disabled: disabled,
                    monthObj: { year: year, month: j }
                });
            }
            if (!isSecondCalendar) {
                this.months.push({ row: row, year: year });
            }
            else {
                this.months_range.push({ row: row, year: year });
            }
        }
        this.setMonthViewHeaderBtnDisabledState(year, isSecondCalendar);
    };
    /**
     * @param {?} inputYear
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.generateYears = /**
     * @param {?} inputYear
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    function (inputYear, isSecondCalendar) {
        var _a = this.opts, minYear = _a.minYear, maxYear = _a.maxYear, disableUntil = _a.disableUntil, disableSince = _a.disableSince;
        /** @type {?} */
        var y = inputYear - (inputYear % 10);
        var _b = this.visibleMonth, year = _b.year, monthNbr = _b.monthNbr;
        if (!isSecondCalendar) {
            this.years.length = 0;
        }
        else {
            if (!this.years_range.length && ((this.years && this.years.length) && y < this.years[3][2].year && y > this.years[0][0].year) && this.opts.showType === 3) {
                y += 10;
            }
            this.years_range.length = 0;
            /** @type {?} */
            var allYears = flatten(this.years_range);
            if (allYears.findIndex((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return n.year == inputYear; })) > -1) {
                y = this.years_range[3][2].year;
            }
        }
        /** @type {?} */
        var today = this.getToday();
        for (var i = y - 1; i < y + 10; i += 3) {
            /** @type {?} */
            var row = [];
            for (var j = i; j < i + 3; j++) {
                /** @type {?} */
                var disabled = this.utilService.isMonthDisabledByDisableUntil({
                    year: j,
                    month: monthNbr,
                    day: this.daysInMonth(monthNbr, j)
                }, disableUntil) ||
                    this.utilService.isMonthDisabledByDisableSince({ year: j, month: monthNbr, day: 1 }, disableSince);
                /** @type {?} */
                var minMax = j < minYear || j > maxYear;
                row.push({
                    year: j,
                    currYear: j === today.year,
                    selected: j === year,
                    disabled: disabled || minMax,
                    yearObj: { year: j }
                });
            }
            if (!isSecondCalendar) {
                this.years.push(row);
            }
            else {
                this.years_range.push(row);
            }
        }
        if (!isSecondCalendar) {
            this.setYearViewHeaderBtnDisabledState(this.years[0][1].year, this.years[3][1].year, isSecondCalendar);
        }
        else {
            this.setYearViewHeaderBtnDisabledState(this.years_range[0][1].year, this.years_range[3][1].year, isSecondCalendar);
        }
    };
    /**
     * @return {?}
     */
    CalendarComponent.prototype.setCalendarVisibleMonth = /**
     * @return {?}
     */
    function () {
        // Sets visible month of calendar
        var _a = this.selectedMonth, year = _a.year, monthNbr = _a.monthNbr;
        this.visibleMonth = {
            monthTxt: this.opts.monthLabels[monthNbr],
            monthNbr: monthNbr,
            year: year,
            yearTxt: this.opts.yearTxt
        };
        // Create current month
        if (this.opts.dateRange) {
            this.visibleMonth_range = {
                monthTxt: this.opts.monthLabels[this.selectedMonth_range.monthNbr],
                monthNbr: this.selectedMonth_range.monthNbr,
                year: this.selectedMonth_range.year,
                yearTxt: this.opts.yearTxt
            };
            this.generateCalendar(this.selectedMonth_range.monthNbr, this.selectedMonth_range.year, true, true);
        }
        this.generateCalendar(monthNbr, year, true, false);
    };
    /**
     * @param {?=} event
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.onPrevNavigateBtnClicked = /**
     * @param {?=} event
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    function (event, isSecondCalendar) {
        if (!isSecondCalendar) {
            if (event) {
                if (!this.selectMonth && !this.selectYear) {
                    this.setDateViewMonth(isSecondCalendar, false);
                }
                else if (this.selectMonth) {
                    this.visibleMonth.year--;
                    this.generateMonths(isSecondCalendar);
                }
                else if (this.selectYear) {
                    this.generateYears(this.years[2][2].year - 10);
                }
            }
            else {
                if (!this.selectMonth && !this.selectYear) {
                    this.visibleMonth.year--;
                    this.setDateViewMonth(isSecondCalendar);
                }
                else if (this.selectMonth) {
                    this.visibleMonth.year--;
                    this.generateMonths(isSecondCalendar);
                }
                else if (this.selectYear) {
                    this.generateYears(this.years[2][2].year - 10, isSecondCalendar);
                }
            }
        }
        else {
            if (event) {
                if (!this.selectMonth_range && !this.selectYear_range) {
                    this.setDateViewMonth(isSecondCalendar, false);
                }
                else if (this.selectMonth_range) {
                    this.visibleMonth_range.year--;
                    this.generateMonths(isSecondCalendar);
                }
                else if (this.selectYear_range) {
                    this.generateYears(this.years_range[2][2].year - 10);
                }
            }
            else {
                if (!this.selectMonth_range && !this.selectYear_range) {
                    this.visibleMonth_range.year--;
                    this.setDateViewMonth(isSecondCalendar);
                }
                else if (this.selectMonth_range) {
                    this.visibleMonth_range.year--;
                    this.generateMonths(isSecondCalendar);
                }
                else if (this.selectYear_range) {
                    this.generateYears(this.years_range[2][2].year - 10, isSecondCalendar);
                }
            }
        }
    };
    /**
     * @param {?=} event
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.onNextNavigateBtnClicked = /**
     * @param {?=} event
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    function (event, isSecondCalendar) {
        if (!isSecondCalendar) {
            if (event) {
                if (!this.selectMonth && !this.selectYear) {
                    this.setDateViewMonth(isSecondCalendar, true);
                }
                else if (this.selectMonth) {
                    this.visibleMonth.year++;
                    this.generateMonths();
                }
                else if (this.selectYear) {
                    this.generateYears(this.years[2][2].year + 10);
                }
            }
            else {
                if (!this.selectMonth && !this.selectYear) {
                    this.visibleMonth.year++;
                    this.setDateViewMonth(isSecondCalendar);
                }
                else if (this.selectMonth) {
                    this.visibleMonth.year++;
                    this.generateMonths();
                }
                else if (this.selectYear) {
                    this.generateYears(this.years[2][2].year + 10);
                }
            }
        }
        else {
            if (event) {
                if (!this.selectMonth_range && !this.selectYear_range) {
                    this.setDateViewMonth(isSecondCalendar, true);
                }
                else if (this.selectMonth_range) {
                    this.visibleMonth_range.year++;
                    this.generateMonths(isSecondCalendar);
                }
                else if (this.selectYear_range) {
                    this.generateYears(this.years_range[2][2].year + 10, isSecondCalendar);
                }
            }
            else {
                if (!this.selectMonth_range && !this.selectYear_range) {
                    this.visibleMonth_range.year++;
                    this.setDateViewMonth(isSecondCalendar);
                }
                else if (this.selectMonth_range) {
                    this.visibleMonth_range.year++;
                    this.generateMonths(isSecondCalendar);
                }
                else if (this.selectYear_range) {
                    this.generateYears(this.years_range[2][2].year + 10, isSecondCalendar);
                }
            }
        }
    };
    /**
     * @param {?=} isSecondCalendar
     * @param {?=} isNext
     * @return {?}
     */
    CalendarComponent.prototype.setDateViewMonth = /**
     * @param {?=} isSecondCalendar
     * @param {?=} isNext
     * @return {?}
     */
    function (isSecondCalendar, isNext) {
        /** @type {?} */
        var change;
        if (isNext === undefined) {
            change = 0;
        }
        else {
            change = isNext ? 1 : -1;
        }
        if (!isSecondCalendar) {
            var _a = this.visibleMonth, year = _a.year, monthNbr = _a.monthNbr;
            /** @type {?} */
            var d = this.getDate(year, monthNbr, 1);
            d.setMonth(d.getMonth() + change);
            /** @type {?} */
            var y = d.getFullYear();
            /** @type {?} */
            var m = d.getMonth() + 1;
            this.visibleMonth = {
                monthTxt: this.opts.monthLabels[m],
                monthNbr: m,
                year: y,
                yearTxt: this.opts.yearTxt
            };
            this.generateCalendar(m, y, true, isSecondCalendar);
        }
        else {
            var _b = this.visibleMonth_range, year = _b.year, monthNbr = _b.monthNbr;
            /** @type {?} */
            var d = this.getDate(year, monthNbr, 1);
            d.setMonth(d.getMonth() + change);
            /** @type {?} */
            var y = d.getFullYear();
            /** @type {?} */
            var m = d.getMonth() + 1;
            this.visibleMonth_range = {
                monthTxt: this.opts.monthLabels[m],
                monthNbr: m,
                year: y,
                yearTxt: this.opts.yearTxt
            };
            this.generateCalendar(m, y, true, isSecondCalendar);
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    CalendarComponent.prototype.onCloseSelector = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        /** @type {?} */
        var keyCode = this.utilService.getKeyCodeFromEvent(event);
        if (keyCode === KeyCode.esc) {
            this.closedByEsc();
        }
    };
    /**
     * @param {?} cell
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.onDayCellClicked = /**
     * @param {?} cell
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    function (cell, isSecondCalendar) {
        if (cell.cmo === 1) {
            this.onPrevNavigateBtnClicked(true, isSecondCalendar);
        }
        else if (cell.cmo === 3) {
            this.onNextNavigateBtnClicked(true, isSecondCalendar);
        }
        this.selectDate(cell.dateObj);
        this.resetMonthYearSelect(isSecondCalendar);
    };
    /**
     * @param {?} cell
     * @return {?}
     */
    CalendarComponent.prototype.onDayCellKeyDown = /**
     * @param {?} cell
     * @return {?}
     */
    function (cell) {
        // Make possible to move focus by arrow keys
        var _a = this.getSourceRowAndColumnFromEvent(event), sourceRow = _a.sourceRow, sourceCol = _a.sourceCol;
        var _b = this.getTargetFocusRowAndColumn(event, sourceRow, sourceCol, DATE_ROW_COUNT, DATE_COL_COUNT), moveFocus = _b.moveFocus, targetRow = _b.targetRow, targetCol = _b.targetCol;
        if (moveFocus) {
            this.focusCellElement(D, targetRow, targetCol);
        }
    };
    /**
     * @param {?} cell
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.onDayCellMouseEnter = /**
     * @param {?} cell
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    function (cell, isSecondCalendar) {
        var e_1, _a, e_2, _b, e_3, _c, e_4, _d;
        if (isSecondCalendar) {
            try {
                for (var _e = tslib_1.__values(this.dates), _f = _e.next(); !_f.done; _f = _e.next()) {
                    var w = _f.value;
                    try {
                        for (var _g = tslib_1.__values(w.week), _h = _g.next(); !_h.done; _h = _g.next()) {
                            var day = _h.value;
                            day.range =
                                (this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin, day.dateObj) &&
                                    this.utilService.isDateSameOrEarlier(day.dateObj, cell.dateObj)) ||
                                    (this.utilService.isDateSameOrEarlier(day.dateObj, this.selectedDateRange.begin) &&
                                        this.utilService.isDateSameOrEarlier(cell.dateObj, day.dateObj));
                        }
                    }
                    catch (e_2_1) { e_2 = { error: e_2_1 }; }
                    finally {
                        try {
                            if (_h && !_h.done && (_b = _g.return)) _b.call(_g);
                        }
                        finally { if (e_2) throw e_2.error; }
                    }
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (_f && !_f.done && (_a = _e.return)) _a.call(_e);
                }
                finally { if (e_1) throw e_1.error; }
            }
        }
        else {
            try {
                for (var _j = tslib_1.__values(this.dates_range), _k = _j.next(); !_k.done; _k = _j.next()) {
                    var w = _k.value;
                    try {
                        for (var _l = tslib_1.__values(w.week), _m = _l.next(); !_m.done; _m = _l.next()) {
                            var day = _m.value;
                            day.range =
                                (this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin, day.dateObj) &&
                                    this.utilService.isDateSameOrEarlier(day.dateObj, cell.dateObj)) ||
                                    (this.utilService.isDateSameOrEarlier(day.dateObj, this.selectedDateRange.begin) &&
                                        this.utilService.isDateSameOrEarlier(cell.dateObj, day.dateObj));
                        }
                    }
                    catch (e_4_1) { e_4 = { error: e_4_1 }; }
                    finally {
                        try {
                            if (_m && !_m.done && (_d = _l.return)) _d.call(_l);
                        }
                        finally { if (e_4) throw e_4.error; }
                    }
                }
            }
            catch (e_3_1) { e_3 = { error: e_3_1 }; }
            finally {
                try {
                    if (_k && !_k.done && (_c = _j.return)) _c.call(_j);
                }
                finally { if (e_3) throw e_3.error; }
            }
        }
    };
    /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.onDayCellMouseLeave = /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    function (isSecondCalendar) {
        var e_5, _a, e_6, _b, e_7, _c, e_8, _d;
        if (isSecondCalendar) {
            try {
                for (var _e = tslib_1.__values(this.dates), _f = _e.next(); !_f.done; _f = _e.next()) {
                    var w = _f.value;
                    try {
                        for (var _g = tslib_1.__values(w.week), _h = _g.next(); !_h.done; _h = _g.next()) {
                            var day = _h.value;
                            day.range = false;
                        }
                    }
                    catch (e_6_1) { e_6 = { error: e_6_1 }; }
                    finally {
                        try {
                            if (_h && !_h.done && (_b = _g.return)) _b.call(_g);
                        }
                        finally { if (e_6) throw e_6.error; }
                    }
                }
            }
            catch (e_5_1) { e_5 = { error: e_5_1 }; }
            finally {
                try {
                    if (_f && !_f.done && (_a = _e.return)) _a.call(_e);
                }
                finally { if (e_5) throw e_5.error; }
            }
        }
        else {
            try {
                for (var _j = tslib_1.__values(this.dates_range), _k = _j.next(); !_k.done; _k = _j.next()) {
                    var w = _k.value;
                    try {
                        for (var _l = tslib_1.__values(w.week), _m = _l.next(); !_m.done; _m = _l.next()) {
                            var day = _m.value;
                            day.range = false;
                        }
                    }
                    catch (e_8_1) { e_8 = { error: e_8_1 }; }
                    finally {
                        try {
                            if (_m && !_m.done && (_d = _l.return)) _d.call(_l);
                        }
                        finally { if (e_8) throw e_8.error; }
                    }
                }
            }
            catch (e_7_1) { e_7 = { error: e_7_1 }; }
            finally {
                try {
                    if (_k && !_k.done && (_c = _j.return)) _c.call(_j);
                }
                finally { if (e_7) throw e_7.error; }
            }
        }
    };
    /**
     * @param {?} cell
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.onMonthCellMouseEnter = /**
     * @param {?} cell
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    function (cell, isSecondCalendar) {
        var e_9, _a, e_10, _b, e_11, _c, e_12, _d;
        if (isSecondCalendar) {
            try {
                for (var _e = tslib_1.__values(this.months), _f = _e.next(); !_f.done; _f = _e.next()) {
                    var item = _f.value;
                    try {
                        for (var _g = tslib_1.__values(item.row), _h = _g.next(); !_h.done; _h = _g.next()) {
                            var month = _h.value;
                            month.range =
                                (this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin, month.monthObj) &&
                                    this.utilService.isDateSameOrEarlier(month.monthObj, cell.monthObj)) ||
                                    (this.utilService.isDateSameOrEarlier(month.monthObj, this.selectedDateRange.begin) &&
                                        this.utilService.isDateSameOrEarlier(cell.monthObj, month.monthObj));
                        }
                    }
                    catch (e_10_1) { e_10 = { error: e_10_1 }; }
                    finally {
                        try {
                            if (_h && !_h.done && (_b = _g.return)) _b.call(_g);
                        }
                        finally { if (e_10) throw e_10.error; }
                    }
                }
            }
            catch (e_9_1) { e_9 = { error: e_9_1 }; }
            finally {
                try {
                    if (_f && !_f.done && (_a = _e.return)) _a.call(_e);
                }
                finally { if (e_9) throw e_9.error; }
            }
        }
        else {
            try {
                for (var _j = tslib_1.__values(this.months_range), _k = _j.next(); !_k.done; _k = _j.next()) {
                    var item = _k.value;
                    try {
                        for (var _l = tslib_1.__values(item.row), _m = _l.next(); !_m.done; _m = _l.next()) {
                            var month = _m.value;
                            month.range =
                                (this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin, month.monthObj) &&
                                    this.utilService.isDateSameOrEarlier(month.monthObj, cell.monthObj)) ||
                                    (this.utilService.isDateSameOrEarlier(month.monthObj, this.selectedDateRange.begin) &&
                                        this.utilService.isDateSameOrEarlier(cell.monthObj, month.monthObj));
                        }
                    }
                    catch (e_12_1) { e_12 = { error: e_12_1 }; }
                    finally {
                        try {
                            if (_m && !_m.done && (_d = _l.return)) _d.call(_l);
                        }
                        finally { if (e_12) throw e_12.error; }
                    }
                }
            }
            catch (e_11_1) { e_11 = { error: e_11_1 }; }
            finally {
                try {
                    if (_k && !_k.done && (_c = _j.return)) _c.call(_j);
                }
                finally { if (e_11) throw e_11.error; }
            }
        }
    };
    /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.onMonthCellMouseLeave = /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    function (isSecondCalendar) {
        var e_13, _a, e_14, _b, e_15, _c, e_16, _d;
        if (isSecondCalendar) {
            try {
                for (var _e = tslib_1.__values(this.months), _f = _e.next(); !_f.done; _f = _e.next()) {
                    var item = _f.value;
                    try {
                        for (var _g = tslib_1.__values(item.row), _h = _g.next(); !_h.done; _h = _g.next()) {
                            var month = _h.value;
                            month.range = false;
                        }
                    }
                    catch (e_14_1) { e_14 = { error: e_14_1 }; }
                    finally {
                        try {
                            if (_h && !_h.done && (_b = _g.return)) _b.call(_g);
                        }
                        finally { if (e_14) throw e_14.error; }
                    }
                }
            }
            catch (e_13_1) { e_13 = { error: e_13_1 }; }
            finally {
                try {
                    if (_f && !_f.done && (_a = _e.return)) _a.call(_e);
                }
                finally { if (e_13) throw e_13.error; }
            }
        }
        else {
            try {
                for (var _j = tslib_1.__values(this.months), _k = _j.next(); !_k.done; _k = _j.next()) {
                    var item = _k.value;
                    try {
                        for (var _l = tslib_1.__values(item.row), _m = _l.next(); !_m.done; _m = _l.next()) {
                            var month = _m.value;
                            month.range = false;
                        }
                    }
                    catch (e_16_1) { e_16 = { error: e_16_1 }; }
                    finally {
                        try {
                            if (_m && !_m.done && (_d = _l.return)) _d.call(_l);
                        }
                        finally { if (e_16) throw e_16.error; }
                    }
                }
            }
            catch (e_15_1) { e_15 = { error: e_15_1 }; }
            finally {
                try {
                    if (_k && !_k.done && (_c = _j.return)) _c.call(_j);
                }
                finally { if (e_15) throw e_15.error; }
            }
        }
    };
    /**
     * @param {?} cell
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.onYearCellMouseEnter = /**
     * @param {?} cell
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    function (cell, isSecondCalendar) {
        var e_17, _a, e_18, _b, e_19, _c, e_20, _d;
        if (isSecondCalendar) {
            try {
                for (var _e = tslib_1.__values(this.years), _f = _e.next(); !_f.done; _f = _e.next()) {
                    var item = _f.value;
                    try {
                        for (var item_1 = tslib_1.__values(item), item_1_1 = item_1.next(); !item_1_1.done; item_1_1 = item_1.next()) {
                            var year = item_1_1.value;
                            year.range =
                                (this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin, year.yearObj) &&
                                    this.utilService.isDateSameOrEarlier(year.yearObj, cell.yearObj)) ||
                                    (this.utilService.isDateSameOrEarlier(year.yearObj, this.selectedDateRange.begin) &&
                                        this.utilService.isDateSameOrEarlier(cell.yearObj, year.yearObj));
                        }
                    }
                    catch (e_18_1) { e_18 = { error: e_18_1 }; }
                    finally {
                        try {
                            if (item_1_1 && !item_1_1.done && (_b = item_1.return)) _b.call(item_1);
                        }
                        finally { if (e_18) throw e_18.error; }
                    }
                }
            }
            catch (e_17_1) { e_17 = { error: e_17_1 }; }
            finally {
                try {
                    if (_f && !_f.done && (_a = _e.return)) _a.call(_e);
                }
                finally { if (e_17) throw e_17.error; }
            }
        }
        else {
            try {
                for (var _g = tslib_1.__values(this.years_range), _h = _g.next(); !_h.done; _h = _g.next()) {
                    var item = _h.value;
                    try {
                        for (var item_2 = tslib_1.__values(item), item_2_1 = item_2.next(); !item_2_1.done; item_2_1 = item_2.next()) {
                            var year = item_2_1.value;
                            year.range =
                                (this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin, year.yearObj) &&
                                    this.utilService.isDateSameOrEarlier(year.yearObj, cell.yearObj)) ||
                                    (this.utilService.isDateSameOrEarlier(year.yearObj, this.selectedDateRange.begin) &&
                                        this.utilService.isDateSameOrEarlier(cell.yearObj, year.yearObj));
                        }
                    }
                    catch (e_20_1) { e_20 = { error: e_20_1 }; }
                    finally {
                        try {
                            if (item_2_1 && !item_2_1.done && (_d = item_2.return)) _d.call(item_2);
                        }
                        finally { if (e_20) throw e_20.error; }
                    }
                }
            }
            catch (e_19_1) { e_19 = { error: e_19_1 }; }
            finally {
                try {
                    if (_h && !_h.done && (_c = _g.return)) _c.call(_g);
                }
                finally { if (e_19) throw e_19.error; }
            }
        }
    };
    /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.onYearCellMouseLeave = /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    function (isSecondCalendar) {
        var e_21, _a, e_22, _b, e_23, _c, e_24, _d;
        if (isSecondCalendar) {
            try {
                for (var _e = tslib_1.__values(this.years), _f = _e.next(); !_f.done; _f = _e.next()) {
                    var item = _f.value;
                    try {
                        for (var item_3 = tslib_1.__values(item), item_3_1 = item_3.next(); !item_3_1.done; item_3_1 = item_3.next()) {
                            var year = item_3_1.value;
                            year.range = false;
                        }
                    }
                    catch (e_22_1) { e_22 = { error: e_22_1 }; }
                    finally {
                        try {
                            if (item_3_1 && !item_3_1.done && (_b = item_3.return)) _b.call(item_3);
                        }
                        finally { if (e_22) throw e_22.error; }
                    }
                }
            }
            catch (e_21_1) { e_21 = { error: e_21_1 }; }
            finally {
                try {
                    if (_f && !_f.done && (_a = _e.return)) _a.call(_e);
                }
                finally { if (e_21) throw e_21.error; }
            }
        }
        else {
            try {
                for (var _g = tslib_1.__values(this.years_range), _h = _g.next(); !_h.done; _h = _g.next()) {
                    var item = _h.value;
                    try {
                        for (var item_4 = tslib_1.__values(item), item_4_1 = item_4.next(); !item_4_1.done; item_4_1 = item_4.next()) {
                            var year = item_4_1.value;
                            year.range = false;
                        }
                    }
                    catch (e_24_1) { e_24 = { error: e_24_1 }; }
                    finally {
                        try {
                            if (item_4_1 && !item_4_1.done && (_d = item_4.return)) _d.call(item_4);
                        }
                        finally { if (e_24) throw e_24.error; }
                    }
                }
            }
            catch (e_23_1) { e_23 = { error: e_23_1 }; }
            finally {
                try {
                    if (_h && !_h.done && (_c = _g.return)) _c.call(_g);
                }
                finally { if (e_23) throw e_23.error; }
            }
        }
    };
    /**
     * @param {?} weekData
     * @return {?}
     */
    CalendarComponent.prototype.onWeekClicked = /**
     * @param {?} weekData
     * @return {?}
     */
    function (weekData) {
        /** @type {?} */
        var showTime = this.opts.returnFormat && this.opts.returnFormat.toLocaleLowerCase().indexOf('hh:mm') > -1;
        this.selectedWeek = { weekNbr: weekData.weekNbr, year: weekData.year };
        if (showTime) {
            weekData.week[0].dateObj.hour = 0;
            weekData.week[0].dateObj.minute = 0;
            weekData.week[0].dateObj.second = 0;
            weekData.week[6].dateObj.hour = 23;
            weekData.week[6].dateObj.minute = 59;
            weekData.week[6].dateObj.second = 59;
        }
        this.selectDate(weekData.week[0].dateObj);
        this.selectDate(weekData.week[6].dateObj);
    };
    /**
     * @param {?} event
     * @return {?}
     */
    CalendarComponent.prototype.getSourceRowAndColumnFromEvent = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        /** @type {?} */
        var sourceRow = 0;
        /** @type {?} */
        var sourceCol = 0;
        if (event.target && event.target.id) {
            // value of id is for example: m_0_1 (first number = row, second number = column)
            /** @type {?} */
            var arr = event.target.id.split(UNDER_LINE);
            sourceRow = Number(arr[1]);
            sourceCol = Number(arr[2]);
        }
        return { sourceRow: sourceRow, sourceCol: sourceCol };
    };
    /**
     * @param {?} event
     * @param {?} row
     * @param {?} col
     * @param {?} rowCount
     * @param {?} colCount
     * @return {?}
     */
    CalendarComponent.prototype.getTargetFocusRowAndColumn = /**
     * @param {?} event
     * @param {?} row
     * @param {?} col
     * @param {?} rowCount
     * @param {?} colCount
     * @return {?}
     */
    function (event, row, col, rowCount, colCount) {
        /** @type {?} */
        var moveFocus = false;
        /** @type {?} */
        var targetRow = row;
        /** @type {?} */
        var targetCol = col;
        /** @type {?} */
        var keyCode = this.utilService.getKeyCodeFromEvent(event);
        if (keyCode === KeyCode.upArrow && row > 0) {
            moveFocus = true;
            targetRow--;
        }
        else if (keyCode === KeyCode.downArrow && row < rowCount) {
            moveFocus = true;
            targetRow++;
        }
        else if (keyCode === KeyCode.leftArrow && col > 0) {
            moveFocus = true;
            targetCol--;
        }
        else if (keyCode === KeyCode.rightArrow && col < colCount) {
            moveFocus = true;
            targetCol++;
        }
        return { moveFocus: moveFocus, targetRow: targetRow, targetCol: targetCol };
    };
    /**
     * @param {?} type
     * @param {?} row
     * @param {?} col
     * @return {?}
     */
    CalendarComponent.prototype.focusCellElement = /**
     * @param {?} type
     * @param {?} row
     * @param {?} col
     * @return {?}
     */
    function (type, row, col) {
        /** @type {?} */
        var elem = this.selectorEl.nativeElement.querySelector(DOT + type + UNDER_LINE + row + UNDER_LINE + col);
        if (elem) {
            elem.focus();
        }
    };
    /**
     * @param {?} date
     * @return {?}
     */
    CalendarComponent.prototype.selectDate = /**
     * @param {?} date
     * @return {?}
     */
    function (date) {
        var _a = this.opts, dateFormat = _a.dateFormat, monthLabels = _a.monthLabels, dateRangeDatesDelimiter = _a.dateRangeDatesDelimiter, closeSelectorOnDateSelect = _a.closeSelectorOnDateSelect, showTime = _a.showTime, returnFormat = _a.returnFormat;
        if (this.opts.dateRange) {
            // Date range
            /** @type {?} */
            var isBeginDateInitialized = this.utilService.isInitializedDate(this.selectedDateRange.begin);
            /** @type {?} */
            var isEndDateInitialized = this.utilService.isInitializedDate(this.selectedDateRange.end) &&
                JSON.stringify(this.selectedDateRange.begin) !== JSON.stringify(this.selectedDateRange.end);
            if (isBeginDateInitialized && isEndDateInitialized) {
                // both already selected - set begin date and reset end date
                this.selectedDateRange.begin = date;
                this.selectedDateRange.end = this.utilService.resetDate();
                this.rangeDateSelection({
                    isBegin: true,
                    date: date,
                    jsDate: this.utilService.getDate(date),
                    dateFormat: dateFormat,
                    formatted: this.utilService.formatDate(date, dateFormat, monthLabels),
                    epoc: this.utilService.getEpocTime(date)
                });
            }
            else if (!isBeginDateInitialized) {
                // begin date
                this.selectedDateRange.begin = date;
                if (!isEndDateInitialized) {
                    this.selectedDateRange.end = date;
                }
                this.rangeDateSelection({
                    isBegin: true,
                    date: date,
                    jsDate: this.utilService.getDate(date),
                    dateFormat: dateFormat,
                    formatted: this.utilService.formatDate(date, dateFormat, monthLabels),
                    epoc: this.utilService.getEpocTime(date)
                });
            }
            else {
                // second selection
                /** @type {?} */
                var firstDateEarlier = this.utilService.isDateEarlier(date, this.selectedDateRange.begin);
                if (firstDateEarlier) {
                    /** @type {?} */
                    var _date = this.selectedDateRange.begin;
                    this.selectedDateRange.end = _date;
                    this.rangeDateSelection({
                        isBegin: false,
                        date: _date,
                        jsDate: this.utilService.getDate(_date),
                        dateFormat: dateFormat,
                        formatted: this.utilService.formatDate(_date, dateFormat, monthLabels),
                        epoc: this.utilService.getEpocTime(_date)
                    });
                    this.selectedDateRange.begin = date;
                    this.rangeDateSelection({
                        isBegin: true,
                        date: date,
                        jsDate: this.utilService.getDate(date),
                        dateFormat: dateFormat,
                        formatted: this.utilService.formatDate(date, dateFormat, monthLabels),
                        epoc: this.utilService.getEpocTime(date)
                    });
                }
                else {
                    this.selectedDateRange.end = date;
                    this.rangeDateSelection({
                        isBegin: false,
                        date: date,
                        jsDate: this.utilService.getDate(date),
                        dateFormat: dateFormat,
                        formatted: this.utilService.formatDate(date, dateFormat, monthLabels),
                        epoc: this.utilService.getEpocTime(date)
                    });
                }
                if (!this.opts.showTime) {
                    this.dateChanged(this.utilService.getDateModel(null, this.selectedDateRange, dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat), closeSelectorOnDateSelect);
                }
            }
        }
        else {
            // Single date
            this.selectedDate = date;
            if (!this.opts.showTime) {
                this.dateChanged(this.utilService.getDateModel(this.selectedDate, null, dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat), showTime ? false : closeSelectorOnDateSelect);
            }
            else {
                if (!this.timeVlaue && this.opts.viewType == ViewType.Together) {
                    this.timeVlaue = this.getTimeStr(new Date);
                }
            }
        }
    };
    /**
     * @param {?} month
     * @return {?}
     */
    CalendarComponent.prototype.toSelectMonth = /**
     * @param {?} month
     * @return {?}
     */
    function (month) {
        var _a = this.opts, dateFormat = _a.dateFormat, monthLabels = _a.monthLabels, dateRangeDatesDelimiter = _a.dateRangeDatesDelimiter, closeSelectorOnDateSelect = _a.closeSelectorOnDateSelect, showTime = _a.showTime, returnFormat = _a.returnFormat;
        if (this.opts.dateRange) {
            // month range
            /** @type {?} */
            var isBeginMonthInitialized = this.utilService.isInitializedMonth(this.selectedDateRange.begin);
            /** @type {?} */
            var isEndMonthInitialized = this.utilService.isInitializedMonth(this.selectedDateRange.end);
            if (isBeginMonthInitialized && isEndMonthInitialized) {
                // both already selected - set begin date and reset end date
                this.selectedDateRange.begin = { year: month.year, month: month.monthNbr };
                this.selectedDateRange.end = this.utilService.resetDate();
                this.rangeDateSelection({
                    isBegin: true,
                    date: this.selectedDateRange.begin,
                    jsDate: this.utilService.getDate(this.selectedDateRange.begin),
                    dateFormat: dateFormat,
                    formatted: this.utilService.formatDate(this.selectedDateRange.begin, dateFormat, monthLabels),
                    epoc: this.utilService.getEpocTime(this.selectedDateRange.begin)
                });
            }
            else if (!isBeginMonthInitialized) {
                // begin date
                this.selectedDateRange.begin = { year: month.year, month: month.monthNbr };
                this.rangeDateSelection({
                    isBegin: true,
                    date: this.selectedDateRange.begin,
                    jsDate: this.utilService.getDate(this.selectedDateRange.begin),
                    dateFormat: dateFormat,
                    formatted: this.utilService.formatDate(this.selectedDateRange.begin, dateFormat, monthLabels),
                    epoc: this.utilService.getEpocTime(this.selectedDateRange.begin)
                });
            }
            else {
                // second selection
                /** @type {?} */
                var firstDateEarlier = this.utilService.isDateEarlier({ year: month.year, month: month.monthNbr }, this.selectedDateRange.begin);
                if (firstDateEarlier) {
                    /** @type {?} */
                    var _date = this.selectedDateRange.begin;
                    this.selectedDateRange.end = _date;
                    this.rangeDateSelection({
                        isBegin: false,
                        date: _date,
                        jsDate: this.utilService.getDate(_date),
                        dateFormat: dateFormat,
                        formatted: this.utilService.formatDate(_date, dateFormat, monthLabels),
                        epoc: this.utilService.getEpocTime(_date)
                    });
                    this.selectedDateRange.begin = { year: month.year, month: month.monthNbr };
                    this.rangeDateSelection({
                        isBegin: true,
                        date: this.selectedDateRange.begin,
                        jsDate: this.utilService.getDate(this.selectedDateRange.begin),
                        dateFormat: dateFormat,
                        formatted: this.utilService.formatDate(this.selectedDateRange.begin, dateFormat, monthLabels),
                        epoc: this.utilService.getEpocTime(this.selectedDateRange.begin)
                    });
                }
                else {
                    this.selectedDateRange.end = { year: month.year, month: month.monthNbr };
                    this.rangeDateSelection({
                        isBegin: false,
                        date: this.selectedDateRange.end,
                        jsDate: this.utilService.getDate(this.selectedDateRange.end),
                        dateFormat: dateFormat,
                        formatted: this.utilService.formatDate(this.selectedDateRange.end, dateFormat, monthLabels),
                        epoc: this.utilService.getEpocTime(this.selectedDateRange.end)
                    });
                }
                if (!this.opts.showTime) {
                    this.dateChanged(this.utilService.getDateModel(null, this.selectedDateRange, dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat), closeSelectorOnDateSelect);
                }
            }
        }
        else {
            this.selectedMonth = month;
            this.dateChanged(this.utilService.getDateModel({ year: month.year, month: month.monthNbr }, null, dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat), showTime ? false : closeSelectorOnDateSelect);
        }
    };
    /**
     * @param {?} year
     * @return {?}
     */
    CalendarComponent.prototype.toSelectYear = /**
     * @param {?} year
     * @return {?}
     */
    function (year) {
        var _a = this.opts, dateFormat = _a.dateFormat, monthLabels = _a.monthLabels, dateRangeDatesDelimiter = _a.dateRangeDatesDelimiter, closeSelectorOnDateSelect = _a.closeSelectorOnDateSelect, showTime = _a.showTime, returnFormat = _a.returnFormat;
        if (this.opts.dateRange) {
            // month range
            /** @type {?} */
            var isBeginYearInitialized = this.utilService.isInitializedYear(this.selectedDateRange.begin);
            /** @type {?} */
            var isEndYearInitialized = this.utilService.isInitializedYear(this.selectedDateRange.end);
            if (isBeginYearInitialized && isEndYearInitialized) {
                // both already selected - set begin date and reset end date
                this.selectedDateRange.begin = year;
                this.selectedDateRange.end = this.utilService.resetDate();
                this.rangeDateSelection({
                    isBegin: true,
                    date: this.selectedDateRange.begin,
                    jsDate: this.utilService.getDate(this.selectedDateRange.begin),
                    dateFormat: dateFormat,
                    formatted: this.utilService.formatDate(this.selectedDateRange.begin, dateFormat, monthLabels),
                    epoc: this.utilService.getEpocTime(this.selectedDateRange.begin)
                });
            }
            else if (!isBeginYearInitialized) {
                // begin date
                this.selectedDateRange.begin = year;
                this.rangeDateSelection({
                    isBegin: true,
                    date: this.selectedDateRange.begin,
                    jsDate: this.utilService.getDate(this.selectedDateRange.begin),
                    dateFormat: dateFormat,
                    formatted: this.utilService.formatDate(this.selectedDateRange.begin, dateFormat, monthLabels),
                    epoc: this.utilService.getEpocTime(this.selectedDateRange.begin)
                });
            }
            else {
                // second selection
                /** @type {?} */
                var firstDateEarlier = this.utilService.isDateEarlier(year, this.selectedDateRange.begin);
                if (firstDateEarlier) {
                    /** @type {?} */
                    var _date = this.selectedDateRange.begin;
                    this.selectedDateRange.end = _date;
                    this.rangeDateSelection({
                        isBegin: false,
                        date: _date,
                        jsDate: this.utilService.getDate(_date),
                        dateFormat: dateFormat,
                        formatted: this.utilService.formatDate(_date, dateFormat, monthLabels),
                        epoc: this.utilService.getEpocTime(_date)
                    });
                    this.selectedDateRange.begin = year;
                    this.rangeDateSelection({
                        isBegin: true,
                        date: this.selectedDateRange.begin,
                        jsDate: this.utilService.getDate(this.selectedDateRange.begin),
                        dateFormat: dateFormat,
                        formatted: this.utilService.formatDate(this.selectedDateRange.begin, dateFormat, monthLabels),
                        epoc: this.utilService.getEpocTime(this.selectedDateRange.begin)
                    });
                }
                else {
                    this.selectedDateRange.end = year;
                    this.rangeDateSelection({
                        isBegin: false,
                        date: this.selectedDateRange.end,
                        jsDate: this.utilService.getDate(this.selectedDateRange.end),
                        dateFormat: dateFormat,
                        formatted: this.utilService.formatDate(this.selectedDateRange.end, dateFormat, monthLabels),
                        epoc: this.utilService.getEpocTime(this.selectedDateRange.end)
                    });
                }
                if (!this.opts.showTime) {
                    this.dateChanged(this.utilService.getDateModel(null, this.selectedDateRange, dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat), closeSelectorOnDateSelect);
                }
            }
        }
        else {
            this.dateChanged(this.utilService.getDateModel(year, null, dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat), showTime ? false : closeSelectorOnDateSelect);
        }
    };
    /**
     * @param {?} y
     * @param {?} m
     * @return {?}
     */
    CalendarComponent.prototype.monthStartIdx = /**
     * @param {?} y
     * @param {?} m
     * @return {?}
     */
    function (y, m) {
        // Month start index
        /** @type {?} */
        var d = new Date();
        d.setDate(1);
        d.setMonth(m - 1);
        d.setFullYear(y);
        /** @type {?} */
        var idx = d.getDay() + this.sundayIdx();
        return idx >= 7 ? idx - 7 : idx;
    };
    /**
     * @param {?} m
     * @param {?} y
     * @return {?}
     */
    CalendarComponent.prototype.daysInMonth = /**
     * @param {?} m
     * @param {?} y
     * @return {?}
     */
    function (m, y) {
        // Return number of days of current month
        return new Date(y, m, 0).getDate();
    };
    /**
     * @param {?} m
     * @param {?} y
     * @return {?}
     */
    CalendarComponent.prototype.daysInPrevMonth = /**
     * @param {?} m
     * @param {?} y
     * @return {?}
     */
    function (m, y) {
        // Return number of days of the previous month
        /** @type {?} */
        var d = this.getDate(y, m, 1);
        d.setMonth(d.getMonth() - 1);
        return this.daysInMonth(d.getMonth() + 1, d.getFullYear());
    };
    /**
     * @param {?} d
     * @param {?} m
     * @param {?} y
     * @param {?} cmo
     * @param {?} today
     * @return {?}
     */
    CalendarComponent.prototype.isCurrDay = /**
     * @param {?} d
     * @param {?} m
     * @param {?} y
     * @param {?} cmo
     * @param {?} today
     * @return {?}
     */
    function (d, m, y, cmo, today) {
        // Check is a given date the today
        return d === today.day && m === today.month && y === today.year && cmo === MonthId.curr;
    };
    /**
     * @return {?}
     */
    CalendarComponent.prototype.getWidth = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var hasShortCuts = this.opts.shortcuts && this.opts.shortcuts.length > 0;
        if (this.opts.dateRange && this.opts.showType !== 4) {
            return hasShortCuts ? '660px' : '574px';
        }
        else {
            /** @type {?} */
            var w = (hasShortCuts ? 380 : 287) + (this.opts.viewType === ViewType.Together ? 200 : 0);
            return w + 'px';
        }
    };
    /**
     * @return {?}
     */
    CalendarComponent.prototype.getToday = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var date = new Date();
        if (this.opts.showTime) {
            return {
                year: date.getFullYear(),
                month: date.getMonth() + 1,
                day: date.getDate(),
                hour: date.getHours(),
                minute: date.getMinutes(),
                second: date.getSeconds()
            };
        }
        else {
            return { year: date.getFullYear(), month: date.getMonth() + 1, day: date.getDate() };
        }
    };
    /**
     * @param {?} date
     * @return {?}
     */
    CalendarComponent.prototype.getDayNumber = /**
     * @param {?} date
     * @return {?}
     */
    function (date) {
        // Get day number: su=0, mo=1, tu=2, we=3 ...
        /** @type {?} */
        var d = this.getDate(date.year, date.month, date.day);
        return d.getDay();
    };
    /**
     * @param {?} date
     * @return {?}
     */
    CalendarComponent.prototype.getWeekday = /**
     * @param {?} date
     * @return {?}
     */
    function (date) {
        // Get weekday: su, mo, tu, we ...
        return this.weekDayOpts[this.getDayNumber(date)];
    };
    /**
     * @param {?} year
     * @param {?} month
     * @param {?} day
     * @return {?}
     */
    CalendarComponent.prototype.getDate = /**
     * @param {?} year
     * @param {?} month
     * @param {?} day
     * @return {?}
     */
    function (year, month, day) {
        // Creates a date object from given year, month and day
        return new Date(year, month - 1, day, 0, 0, 0, 0);
    };
    /**
     * @return {?}
     */
    CalendarComponent.prototype.sundayIdx = /**
     * @return {?}
     */
    function () {
        // Index of Sunday day
        return this.dayIdx > 0 ? 7 - this.dayIdx : 0;
    };
    /**
     * @param {?} m
     * @param {?} y
     * @param {?} notifyChange
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.generateCalendar = /**
     * @param {?} m
     * @param {?} y
     * @param {?} notifyChange
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    function (m, y, notifyChange, isSecondCalendar) {
        if (!isSecondCalendar) {
            this.dates.length = 0;
        }
        else {
            this.dates_range.length = 0;
        }
        /** @type {?} */
        var today = this.getToday();
        /** @type {?} */
        var monthStart = this.monthStartIdx(y, m);
        /** @type {?} */
        var dInThisM = this.daysInMonth(m, y);
        /** @type {?} */
        var dInPrevM = this.daysInPrevMonth(m, y);
        /** @type {?} */
        var dayNbr = 1;
        /** @type {?} */
        var cmo = MonthId.prev;
        for (var i = 1; i < 7; i++) {
            /** @type {?} */
            var week = [];
            if (i === 1) {
                // First week
                /** @type {?} */
                var pm = dInPrevM - monthStart + 1;
                // Previous month
                for (var j = pm; j <= dInPrevM; j++) {
                    /** @type {?} */
                    var date = { year: m === 1 ? y - 1 : y, month: m === 1 ? 12 : m - 1, day: j };
                    week.push({
                        dateObj: date,
                        cmo: cmo,
                        currDay: this.isCurrDay(j, m, y, cmo, today),
                        disabled: this.utilService.isDisabledDate(date, this.opts),
                        markedDate: this.utilService.isMarkedDate(date, this.opts.markDates, this.opts.markWeekends),
                        highlight: this.utilService.isHighlightedDate(date, this.opts.sunHighlight, this.opts.satHighlight, this.opts.highlightDates)
                    });
                }
                cmo = MonthId.curr;
                // Current month
                /** @type {?} */
                var daysLeft = 7 - week.length;
                for (var j = 0; j < daysLeft; j++) {
                    /** @type {?} */
                    var date = { year: y, month: m, day: dayNbr };
                    week.push({
                        dateObj: date,
                        cmo: cmo,
                        currDay: this.isCurrDay(dayNbr, m, y, cmo, today),
                        disabled: this.utilService.isDisabledDate(date, this.opts),
                        markedDate: this.utilService.isMarkedDate(date, this.opts.markDates, this.opts.markWeekends),
                        highlight: this.utilService.isHighlightedDate(date, this.opts.sunHighlight, this.opts.satHighlight, this.opts.highlightDates)
                    });
                    dayNbr++;
                }
            }
            else {
                // Rest of the weeks
                for (var j = 1; j < 8; j++) {
                    if (dayNbr > dInThisM) {
                        // Next month
                        dayNbr = 1;
                        cmo = MonthId.next;
                    }
                    /** @type {?} */
                    var date = {
                        year: cmo === MonthId.next && m === 12 ? y + 1 : y,
                        month: cmo === MonthId.curr ? m : cmo === MonthId.next && m < 12 ? m + 1 : 1,
                        day: dayNbr
                    };
                    week.push({
                        dateObj: date,
                        cmo: cmo,
                        currDay: this.isCurrDay(dayNbr, m, y, cmo, today),
                        disabled: this.utilService.isDisabledDate(date, this.opts),
                        markedDate: this.utilService.isMarkedDate(date, this.opts.markDates, this.opts.markWeekends),
                        highlight: this.utilService.isHighlightedDate(date, this.opts.sunHighlight, this.opts.satHighlight, this.opts.highlightDates)
                    });
                    dayNbr++;
                }
            }
            /** @type {?} */
            var weekNbr = this.opts.showWeekNumbers && this.opts.firstDayOfWeek === MO
                ? this.utilService.getWeekNumber(week[0].dateObj)
                : 0;
            if (!isSecondCalendar) {
                this.dates.push({ week: week, weekNbr: weekNbr, year: y });
            }
            else {
                this.dates_range.push({ week: week, weekNbr: weekNbr, year: y });
            }
        }
        this.setDateViewHeaderBtnDisabledState(m, y, isSecondCalendar);
        if (notifyChange) {
            // Notify parent
            this.calendarViewChanged({
                year: y,
                month: m,
                first: { number: 1, weekday: this.getWeekday({ year: y, month: m, day: 1 }) },
                last: { number: dInThisM, weekday: this.getWeekday({ year: y, month: m, day: dInThisM }) }
            });
        }
    };
    /**
     * @param {?} m
     * @param {?} y
     * @param {?} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.setDateViewHeaderBtnDisabledState = /**
     * @param {?} m
     * @param {?} y
     * @param {?} isSecondCalendar
     * @return {?}
     */
    function (m, y, isSecondCalendar) {
        /** @type {?} */
        var dpm = false;
        /** @type {?} */
        var dnm = false;
        var _a = this.opts, disableUntil = _a.disableUntil, disableSince = _a.disableSince, minYear = _a.minYear, maxYear = _a.maxYear;
        dpm = this.utilService.isMonthDisabledByDisableUntil({
            year: m === 1 ? y - 1 : y,
            month: m === 1 ? 12 : m - 1,
            day: this.daysInMonth(m === 1 ? 12 : m - 1, m === 1 ? y - 1 : y)
        }, disableUntil);
        dnm = this.utilService.isMonthDisabledByDisableSince({ year: m === 12 ? y + 1 : y, month: m === 12 ? 1 : m + 1, day: 1 }, disableSince);
        if (!isSecondCalendar) {
            this.prevViewDisabled = (m === 1 && y === minYear) || dpm;
            this.nextViewDisabled = (m === 12 && y === maxYear) || dnm;
            this.prevDobViewDisabled = y === minYear || dpm;
            this.nextDobViewDisabled = y === maxYear || dnm;
        }
        else {
            this.prevViewDisabled_range = (m === 1 && y === minYear) || dpm;
            this.nextViewDisabled_range = (m === 12 && y === maxYear) || dnm;
            this.prevDobViewDisabled_range = y === minYear || dpm;
            this.nextDobViewDisabled_range = y === maxYear || dnm;
        }
    };
    /**
     * @param {?} y
     * @param {?} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.setMonthViewHeaderBtnDisabledState = /**
     * @param {?} y
     * @param {?} isSecondCalendar
     * @return {?}
     */
    function (y, isSecondCalendar) {
        /** @type {?} */
        var dpm = false;
        /** @type {?} */
        var dnm = false;
        var _a = this.opts, disableUntil = _a.disableUntil, disableSince = _a.disableSince, minYear = _a.minYear, maxYear = _a.maxYear;
        dpm = this.utilService.isMonthDisabledByDisableUntil({ year: y - 1, month: 12, day: 31 }, disableUntil);
        dnm = this.utilService.isMonthDisabledByDisableSince({ year: y + 1, month: 1, day: 1 }, disableSince);
        if (!isSecondCalendar) {
            this.prevViewDisabled = y === minYear || dpm;
            this.nextViewDisabled = y === maxYear || dnm;
            this.prevDobViewDisabled = y === minYear || dpm;
            this.nextDobViewDisabled = y === maxYear || dnm;
        }
        else {
            this.prevViewDisabled_range = y === minYear || dpm;
            this.nextViewDisabled_range = y === maxYear || dnm;
            this.prevDobViewDisabled_range = y === minYear || dpm;
            this.nextDobViewDisabled_range = y === maxYear || dnm;
        }
    };
    /**
     * @param {?} yp
     * @param {?} yn
     * @param {?} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.setYearViewHeaderBtnDisabledState = /**
     * @param {?} yp
     * @param {?} yn
     * @param {?} isSecondCalendar
     * @return {?}
     */
    function (yp, yn, isSecondCalendar) {
        /** @type {?} */
        var dpy = false;
        /** @type {?} */
        var dny = false;
        var _a = this.opts, disableUntil = _a.disableUntil, disableSince = _a.disableSince, minYear = _a.minYear, maxYear = _a.maxYear;
        dpy = this.utilService.isMonthDisabledByDisableUntil({ year: yp - 1, month: 12, day: 31 }, disableUntil);
        dny = this.utilService.isMonthDisabledByDisableSince({ year: yn + 1, month: 1, day: 1 }, disableSince);
        if (!isSecondCalendar) {
            this.prevViewDisabled = yp <= minYear || dpy;
            this.nextViewDisabled = yn >= maxYear || dny;
            this.prevDobViewDisabled = yp <= minYear || dpy;
            this.nextDobViewDisabled = yn >= maxYear || dny;
        }
        else {
            this.prevViewDisabled_range = yp <= minYear || dpy;
            this.nextViewDisabled_range = yn >= maxYear || dny;
            this.prevDobViewDisabled_range = yp <= minYear || dpy;
            this.nextDobViewDisabled_range = yn >= maxYear || dny;
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    CalendarComponent.prototype.onContainerClick = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        event.stopPropagation();
    };
    /**
     * @param {?} event
     * @return {?}
     */
    CalendarComponent.prototype.onClickTimeBtn = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        event.stopPropagation();
        if (this.opts.dateRange) {
            /** @type {?} */
            var beginIsInitializedDate = this.utilService.isInitializedDate(this.selectedDateRange.begin);
            /** @type {?} */
            var endIsInitializedDate = this.utilService.isInitializedDate(this.selectedDateRange.end);
            /** @type {?} */
            var now = new Date();
            if (!beginIsInitializedDate || !endIsInitializedDate) {
                // 直接点击确定显示本月和下月
                if (!beginIsInitializedDate) {
                    this.selectedDateRange.begin = { year: now.getFullYear(), month: now.getMonth() + 1, day: now.getDate() };
                }
                /** @type {?} */
                var endYear = now.getFullYear();
                /** @type {?} */
                var endmonth = now.getMonth() + 1;
                if (endmonth >= 12) {
                    endYear = endYear + 1;
                    endmonth = 1;
                }
                // else {
                //     endmonth = endmonth + this.opts.monthRangeValue;
                // }
                this.selectedDateRange.end = tslib_1.__assign({}, this.selectedDateRange.begin);
                // this.selectedDateRange.end = { year: endYear, month: endmonth, day: now.getDate() };
                // 点击selectTime之前给dateRange赋两个时间值
                this.timeVlaue = this.getTimeStr(now);
                this.timeVlaue_range = this.getTimeStr(now);
            }
            if (!this.timeVlaue_range) {
                this.timeVlaue_range = this.getTimeStr(now);
            }
        }
        else {
            if (!this.utilService.isInitializedDate(this.selectedDate)) {
                /** @type {?} */
                var now = new Date();
                // 点击selectTime之前赋值
                this.timeVlaue = this.getTimeStr(now);
                this.selectedDate = { year: now.getFullYear(), month: now.getMonth() + 1, day: now.getDate() };
            }
        }
        if (!this.timeVlaue) {
            /** @type {?} */
            var now = new Date();
            // 点击selectTime之前赋值
            this.timeVlaue = this.getTimeStr(now);
            if (!this.utilService.isInitializedDate(this.selectedDate)) {
                this.selectedDate = { year: now.getFullYear(), month: now.getMonth() + 1, day: now.getDate() };
            }
        }
        if (this.selectYear) {
            this.selectYear = false;
        }
        if (this.selectMonth) {
            this.selectMonth = false;
        }
        if (this.selectYear_range) {
            this.selectYear_range = false;
        }
        if (this.selectMonth_range) {
            this.selectMonth_range = false;
        }
        this.selectTime = !this.selectTime;
        this.cdr.detectChanges();
    };
    /**
     * @private
     * @param {?} isDateRange
     * @return {?}
     */
    CalendarComponent.prototype.getTimeValue = /**
     * @private
     * @param {?} isDateRange
     * @return {?}
     */
    function (isDateRange) {
        /** @type {?} */
        var t = { start: null, end: null };
        if (this.timeVlaue) {
            /** @type {?} */
            var timeArr = this.timeVlaue.replace('时', ':').replace('分', ':').replace('秒', '').split(':');
            if (timeArr.length >= 2) {
                t.start = {
                    hour: timeArr[0],
                    minute: timeArr[1],
                    second: timeArr[2] ? timeArr[2] : 0
                };
            }
        }
        else {
            /** @type {?} */
            var nowDate = new Date();
            /** @type {?} */
            var hour = nowDate.getHours();
            /** @type {?} */
            var minute = nowDate.getMinutes();
            /** @type {?} */
            var second = nowDate.getSeconds();
            if (this.opts.dateRange) {
                t.start = { hour: 0, minute: 0, second: 0 };
            }
            else {
                t.start = { hour: hour, minute: minute, second: second };
            }
        }
        if (isDateRange) {
            if (this.timeVlaue_range) {
                /** @type {?} */
                var timeArr_range = this.timeVlaue_range.replace('时', ':').replace('分', ':').replace('秒', '').split(':');
                if (timeArr_range.length >= 2) {
                    t.end = {
                        hour: timeArr_range[0],
                        minute: timeArr_range[1],
                        second: timeArr_range[2] ? timeArr_range[2] : 0
                    };
                }
            }
            else {
                /** @type {?} */
                var hour = 23;
                /** @type {?} */
                var minute = 59;
                /** @type {?} */
                var second = 59;
                t.end = { hour: hour, minute: minute, second: second };
            }
        }
        return t;
    };
    /**
     * @param {?} event
     * @return {?}
     */
    CalendarComponent.prototype.onClickOkBtn = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        event.stopPropagation();
        /** @type {?} */
        var timeObj = null;
        /** @type {?} */
        var timeObj_range = null;
        /** @type {?} */
        var selectedDate = null;
        /** @type {?} */
        var selectedDate_range = null;
        if (this.opts.showTime) {
            var _a = this.getTimeValue(this.opts.dateRange), start = _a.start, end = _a.end;
            timeObj = start;
            timeObj_range = end;
        }
        var _b = this.opts, dateFormat = _b.dateFormat, monthLabels = _b.monthLabels, dateRangeDatesDelimiter = _b.dateRangeDatesDelimiter, closeSelectorOnDateSelect = _b.closeSelectorOnDateSelect, returnFormat = _b.returnFormat;
        if (!this.opts.dateRange) {
            selectedDate = tslib_1.__assign({}, this.initializedDate(this.selectedDate), timeObj);
            /** @type {?} */
            var isInDisableRange = this.utilService.isDisabledDate(selectedDate, this.opts);
            /** @type {?} */
            var earlier = this.utilService.isDateSameOrEarlier(selectedDate, this.opts.disableUntil);
            selectedDate = !isInDisableRange
                ? selectedDate
                : tslib_1.__assign({}, selectedDate, (earlier ? this.opts.disableUntil : this.opts.disableSince));
        }
        else {
            /** @type {?} */
            var begin = tslib_1.__assign({}, this.initializedDate(this.selectedDateRange.begin), timeObj);
            /** @type {?} */
            var end = tslib_1.__assign({}, this.initializedDate(this.selectedDateRange.end, begin), timeObj_range);
            selectedDate_range = { begin: begin, end: end };
        }
        /** @type {?} */
        var dateModel = this.utilService.getDateModel(selectedDate, selectedDate_range, dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat);
        this.dateChanged(dateModel, closeSelectorOnDateSelect);
    };
    /**
     * @param {?} date
     * @param {?=} otherDate
     * @return {?}
     */
    CalendarComponent.prototype.initializedDate = /**
     * @param {?} date
     * @param {?=} otherDate
     * @return {?}
     */
    function (date, otherDate) {
        if (otherDate === void 0) { otherDate = { year: 0, month: 0, day: 0 }; }
        /** @type {?} */
        var daysInMonth = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
        if (!this.utilService.isInitializedDate(date) && !this.utilService.isInitializedDate(otherDate)) {
            /** @type {?} */
            var year = new Date().getFullYear();
            /** @type {?} */
            var month = new Date().getMonth() + 1;
            /** @type {?} */
            var day = new Date().getDate();
            return this.utilService.isDisabledDate({ year: year, month: month, day: day }, this.opts) ? this.opts.disableUntil : { year: year, month: month, day: day };
        }
        else if (!this.utilService.isInitializedDate(date)) {
            /** @type {?} */
            var year = otherDate.month + 1 > 12 ? otherDate.year + 1 : otherDate.year;
            /** @type {?} */
            var month = otherDate.month + 1 > 12 ? 1 : otherDate.month + this.opts.monthRangeValue;
            if (!date.month) {
                month = otherDate.month;
            }
            /** @type {?} */
            var day = otherDate.day < 1 || otherDate.day > daysInMonth[month - 1] ? 1 : otherDate.day;
            return this.utilService.isDisabledDate({ year: year, month: month, day: day }, this.opts) ? this.opts.disableSince : { year: year, month: month, day: day };
        }
        return date;
    };
    /**
     * @param {?} date
     * @return {?}
     */
    CalendarComponent.prototype.setTime = /**
     * @param {?} date
     * @return {?}
     */
    function (date) {
        var _a = this.opts, dateFormat = _a.dateFormat, monthLabels = _a.monthLabels, dateRangeDatesDelimiter = _a.dateRangeDatesDelimiter, closeSelectorOnDateSelect = _a.closeSelectorOnDateSelect, returnFormat = _a.returnFormat;
        if (date instanceof Date) {
            if (this.opts.showType !== 4 && !this.opts.dateRange) {
                /** @type {?} */
                var targetDate = void 0;
                if (this.opts.showTime) {
                    targetDate = {
                        year: date.getFullYear(),
                        month: date.getMonth() + 1,
                        day: date.getDate(),
                        hour: date.getHours(),
                        minute: date.getMinutes(),
                        second: date.getSeconds()
                    };
                }
                else {
                    targetDate = { year: date.getFullYear(), month: date.getMonth() + 1, day: date.getDate() };
                }
                /** @type {?} */
                var dateModel = this.utilService.getDateModel(targetDate, null, dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat);
                this.dateChanged(dateModel, closeSelectorOnDateSelect);
            }
            else {
                // 启用周选择时  快捷按钮参数为单个日期
                /** @type {?} */
                var dateModel = this.utilService.getDateModel(null, this.utilService.getNowWeekTime(date), dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat);
                this.dateChanged(dateModel, closeSelectorOnDateSelect);
            }
        }
        else if (date instanceof Object && this.opts.dateRange) {
            /** @type {?} */
            var targetDateRange = void 0;
            var begin = date.begin, end = date.end;
            if (!begin || !end) {
                return;
            }
            if (this.opts.showTime) {
                targetDateRange = {
                    begin: {
                        year: begin.getFullYear(),
                        month: begin.getMonth() + 1,
                        day: begin.getDate(),
                        hour: begin.getHours(),
                        minute: begin.getMinutes(),
                        second: begin.getSeconds()
                    },
                    end: {
                        year: end.getFullYear(),
                        month: end.getMonth() + 1,
                        day: end.getDate(),
                        hour: end.getHours(),
                        minute: end.getMinutes(),
                        second: end.getSeconds()
                    }
                };
            }
            else {
                targetDateRange = {
                    begin: { year: begin.getFullYear(), month: begin.getMonth() + 1, day: begin.getDate() },
                    end: { year: end.getFullYear(), month: end.getMonth() + 1, day: end.getDate() }
                };
            }
            /** @type {?} */
            var dateModel = this.utilService.getDateModel(null, targetDateRange, dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat);
            this.dateChanged(dateModel, closeSelectorOnDateSelect);
        }
        else {
            // console.warn('参数必须符合要求！');
        }
    };
    CalendarComponent.decorators = [
        { type: Component, args: [{
                    selector: 'farris-datepicker-calendar',
                    template: "<div class=\"f-datepicker-container\" #selectorEl\r\n    [ngStyle]=\"{\r\n        top: selectorPos.top + 'px',\r\n        left: selectorPos.left + 'px',\r\n        width: getWidth()\r\n    }\"\r\n    (keyup)=\"onCloseSelector($event)\"\r\n    tabindex=\"0\"\r\n    [ngClass]=\"'container-position-' + selectorPos.position\"\r\n    (click)=\"onContainerClick($event)\"\r\n>\r\n    <lib-selection-sidebar *ngIf=\"opts.shortcuts[0]\" [opts]=\"opts\" (setTime)=\"setTime($event)\"></lib-selection-sidebar>\r\n    <div class=\"f-datepicker-content\" [ngStyle]=\"{'margin-left': opts.shortcuts[0] ? '100px' : 0}\">\r\n        <lib-selection-bar\r\n            [opts]=\"opts\"\r\n            [years]=\"years\"\r\n            [visibleMonth]=\"visibleMonth\"\r\n            [selectMonth]=\"selectMonth\"\r\n            [selectYear]=\"selectYear\"\r\n            [prevViewDisabled]=\"prevViewDisabled\"\r\n            [nextViewDisabled]=\"nextViewDisabled\"\r\n            [prevDobViewDisabled]=\"prevDobViewDisabled\"\r\n            [nextDobViewDisabled]=\"nextDobViewDisabled\"\r\n            (prevNavigateBtnClicked)=\"onPrevNavigateBtnClicked($event)\"\r\n            (nextNavigateBtnClicked)=\"onNextNavigateBtnClicked($event)\"\r\n            (monthViewBtnClicked)=\"onMonthViewBtnClicked()\"\r\n            (yearViewBtnClicked)=\"onYearViewBtnClicked()\"\r\n        ></lib-selection-bar>\r\n\r\n        <lib-day-view\r\n            *ngIf=\"!selectMonth && !selectYear && !selectTime\"\r\n            [opts]=\"opts\"\r\n            [dates]=\"dates\"\r\n            [weekDays]=\"weekDays\"\r\n            [selectedDate]=\"selectedDate\"\r\n            [selectedDateRange]=\"selectedDateRange\"\r\n            [selectedWeek]=\"selectedWeek\"\r\n            (dayCellClicked)=\"onDayCellClicked($event)\"\r\n            (dayCellKeyDown)=\"onDayCellKeyDown($event)\"\r\n            (onMouseEnter)=\"onDayCellMouseEnter($event)\"\r\n            (onMouseLeave)=\"onDayCellMouseLeave($event)\"\r\n            (weekClicked)=\"onWeekClicked($event)\"\r\n        ></lib-day-view>\r\n        <lib-month-view\r\n            *ngIf=\"selectMonth\"\r\n            [opts]=\"opts\"\r\n            [months]=\"months\"\r\n            [selectedDate]=\"selectedDate\"\r\n            [selectedDateRange]=\"selectedDateRange\"\r\n            (monthCellClicked)=\"onMonthCellClicked($event, false)\"\r\n            (monthCellKeyDown)=\"onMonthCellKeyDown($event)\"\r\n            (onMouseEnter)=\"onMonthCellMouseEnter($event, false)\"\r\n            (onMouseLeave)=\"onMonthCellMouseLeave($event)\"\r\n        ></lib-month-view>\r\n\r\n        <lib-year-view\r\n            *ngIf=\"selectYear\"\r\n            [opts]=\"opts\"\r\n            [years]=\"years\"\r\n            [selectedDate]=\"selectedDate\"\r\n            [selectedDateRange]=\"selectedDateRange\"\r\n            [prevViewDisabled]=\"prevViewDisabled\"\r\n            [nextViewDisabled]=\"nextViewDisabled\"\r\n            (yearCellClicked)=\"onYearCellClicked($event)\"\r\n            (yearCellKeyDown)=\"onYearCellKeyDown($event)\"\r\n            (prevCellClicked)=\"onPrevNavigateBtnClicked()\"\r\n            (nextCellClicked)=\"onNextNavigateBtnClicked()\"\r\n            (onMouseEnter)=\"onYearCellMouseEnter($event)\"\r\n            (onMouseLeave)=\"onYearCellMouseLeave($event)\"\r\n        ></lib-year-view>\r\n        <time-picker-panel\r\n            *ngIf=\"selectTime\"\r\n            [(ngModel)]=\"timeVlaue\"\r\n            [opened]=\"true\"\r\n            [inDatePicker]=\"true\"\r\n            [disabledHours]=\"disabledHours\"\r\n            [disabledMinutes]=\"disabledMinutes\"\r\n            [disabledSeconds]=\"disabledSeconds\"\r\n            [format]=\"opts.timeFormat\"\r\n        >\r\n        </time-picker-panel>\r\n        <!-- <div class=\"f-datepicker-commitBtn-wrapper\" *ngIf=\"opts.showTime\">\r\n            <button (click)=\"selectTime=!selectTime\" class=\"f-datepicker-commitBtn\">\r\n                {{ selectTime? '\u9009\u62E9\u65E5\u671F' : '\u9009\u62E9\u65F6\u95F4' }}\r\n            </button>\r\n            <button (click)=\"onClickOk()\" class=\"f-datepicker-commitBtn\">\r\n                OK\r\n            </button>\r\n        </div> -->\r\n    </div>\r\n    <div class=\"f-datepicker-content\" *ngIf=\"opts.dateRange && opts.showType !== 4\">\r\n        <lib-selection-bar\r\n            [opts]=\"opts\"\r\n            [years]=\"years_range\"\r\n            [visibleMonth]=\"visibleMonth_range\"\r\n            [selectMonth]=\"selectMonth_range\"\r\n            [selectYear]=\"selectYear_range\"\r\n            [prevViewDisabled]=\"prevViewDisabled_range\"\r\n            [nextViewDisabled]=\"nextViewDisabled_range\"\r\n            [prevDobViewDisabled]=\"prevDobViewDisabled_range\"\r\n            [nextDobViewDisabled]=\"nextDobViewDisabled_range\"\r\n            (prevNavigateBtnClicked)=\"onPrevNavigateBtnClicked($event, true)\"\r\n            (nextNavigateBtnClicked)=\"onNextNavigateBtnClicked($event, true)\"\r\n            (monthViewBtnClicked)=\"onMonthViewBtnClicked(true)\"\r\n            (yearViewBtnClicked)=\"onYearViewBtnClicked(true)\"\r\n        ></lib-selection-bar>\r\n\r\n        <lib-day-view\r\n            *ngIf=\"!selectMonth_range && !selectYear_range && !selectTime\"\r\n            [opts]=\"opts\"\r\n            [dates]=\"dates_range\"\r\n            [weekDays]=\"weekDays\"\r\n            [selectedDate]=\"selectedDate\"\r\n            [selectedDateRange]=\"selectedDateRange\"\r\n            (dayCellClicked)=\"onDayCellClicked($event, true)\"\r\n            (dayCellKeyDown)=\"onDayCellKeyDown($event)\"\r\n            (onMouseEnter)=\"onDayCellMouseEnter($event, true)\"\r\n            (onMouseLeave)=\"onDayCellMouseLeave(true)\"\r\n        ></lib-day-view>\r\n        <lib-month-view\r\n            *ngIf=\"selectMonth_range\"\r\n            [opts]=\"opts\"\r\n            [months]=\"months_range\"\r\n            [selectedDate]=\"selectedDate\"\r\n            [selectedDateRange]=\"selectedDateRange\"\r\n            (monthCellClicked)=\"onMonthCellClicked($event, true)\"\r\n            (monthCellKeyDown)=\"onMonthCellKeyDown($event)\"\r\n            (onMouseEnter)=\"onMonthCellMouseEnter($event, true)\"\r\n            (onMouseLeave)=\"onMonthCellMouseLeave(true)\"\r\n        ></lib-month-view>\r\n\r\n        <lib-year-view\r\n            *ngIf=\"selectYear_range\"\r\n            [opts]=\"opts\"\r\n            [years]=\"years_range\"\r\n            [selectedDate]=\"selectedDate\"\r\n            [selectedDateRange]=\"selectedDateRange\"\r\n            [prevViewDisabled]=\"prevViewDisabled\"\r\n            [nextViewDisabled]=\"nextViewDisabled\"\r\n            (yearCellClicked)=\"onYearCellClicked($event, true)\"\r\n            (yearCellKeyDown)=\"onYearCellKeyDown($event)\"\r\n            (prevCellClicked)=\"onPrevNavigateBtnClicked($event, true)\"\r\n            (nextCellClicked)=\"onNextNavigateBtnClicked($event, true)\"\r\n            (onMouseEnter)=\"onYearCellMouseEnter($event, true)\"\r\n            (onMouseLeave)=\"onYearCellMouseLeave(true)\"\r\n        ></lib-year-view>\r\n        <time-picker-panel\r\n            *ngIf=\"selectTime\"\r\n            [(ngModel)]=\"timeVlaue_range\"\r\n            [opened]=\"true\"\r\n            [inDatePicker]=\"true\"\r\n            [disabledHours]=\"disabledHours\"\r\n            [disabledMinutes]=\"disabledMinutes\"\r\n            [disabledSeconds]=\"disabledSeconds\"\r\n            [format]=\"opts.timeFormat\"\r\n            #endTimeRef\r\n        >\r\n        </time-picker-panel>\r\n    </div>\r\n\r\n    <div class=\"f-datepicker-content\" *ngIf=\"!opts.dateRange && opts.viewType === 'together' && opts.showTime\" style=\"width: 190px;margin-left: 10px;\">\r\n\r\n        <div style=\"height: 41px;\r\n        border-bottom: 1px solid #E4E7EF;\r\n        text-align: center;\r\n        line-height: 40px;\r\n        font-size: 16px;\r\n        font-weight: 500;margin-bottom: 15px;\">{{ timeVlaue }}</div>\r\n\r\n        <time-picker-panel\r\n        [(ngModel)]=\"timeVlaue\"\r\n        [opened]=\"true\"\r\n        [inDatePicker]=\"true\"\r\n        [disabledHours]=\"disabledHours\"\r\n        [disabledMinutes]=\"disabledMinutes\"\r\n        [disabledSeconds]=\"disabledSeconds\"\r\n        [selectCurrentTimeWhenNull]=\"false\"\r\n        [format]=\"opts.timeFormat\"></time-picker-panel>\r\n    </div>\r\n\r\n    <div class=\"f-datepicker-commitBtn-wrapper\" *ngIf=\"opts.showTime\" style=\"justify-content: end;\">\r\n        <button (click)=\"onClickTimeBtn($event)\" class=\"btn btn-link f-datepicker-select-btn\" *ngIf=\"opts.viewType === 'replace'\">\r\n            {{\r\n                selectTime\r\n                    ? opts.dateBtnText\r\n                        ? opts.dateBtnText\r\n                        : \"Select Date\"\r\n                    : opts.timeBtnText\r\n                    ? opts.timeBtnText\r\n                    : \"Select Time\"\r\n            }}\r\n        </button>\r\n        <button (click)=\"onClickOkBtn($event)\" class=\"btn btn-primary f-datepicker-makesure-btn\">\r\n            {{ opts.commitBtnText ? opts.commitBtnText : \"OK\" }}\r\n        </button>\r\n    </div>\r\n    <span class=\"arrow\"></span>\r\n</div>\r\n",
                    providers: [UtilService],
                    encapsulation: ViewEncapsulation.None
                }] }
    ];
    /** @nocollapse */
    CalendarComponent.ctorParameters = function () { return [
        { type: Renderer2 },
        { type: ChangeDetectorRef },
        { type: UtilService }
    ]; };
    CalendarComponent.propDecorators = {
        selectorEl: [{ type: ViewChild, args: ['selectorEl',] }],
        styleEl: [{ type: ViewChild, args: ['styleEl',] }],
        endTimeRef: [{ type: ViewChild, args: ['endTimeRef',] }],
        position: [{ type: HostBinding, args: ['style.position',] }]
    };
    return CalendarComponent;
}());
export { CalendarComponent };
if (false) {
    /** @type {?} */
    CalendarComponent.prototype.selectorEl;
    /** @type {?} */
    CalendarComponent.prototype.styleEl;
    /** @type {?} */
    CalendarComponent.prototype.endTimeRef;
    /** @type {?} */
    CalendarComponent.prototype.position;
    /** @type {?} */
    CalendarComponent.prototype.opts;
    /** @type {?} */
    CalendarComponent.prototype.visibleMonth;
    /** @type {?} */
    CalendarComponent.prototype.visibleMonth_range;
    /** @type {?} */
    CalendarComponent.prototype.selectedMonth;
    /** @type {?} */
    CalendarComponent.prototype.selectedMonth_range;
    /** @type {?} */
    CalendarComponent.prototype.selectedDate;
    /** @type {?} */
    CalendarComponent.prototype.selectedDateRange;
    /** @type {?} */
    CalendarComponent.prototype.selectedWeek;
    /** @type {?} */
    CalendarComponent.prototype.weekDays;
    /** @type {?} */
    CalendarComponent.prototype.dates;
    /** @type {?} */
    CalendarComponent.prototype.dates_range;
    /** @type {?} */
    CalendarComponent.prototype.months;
    /** @type {?} */
    CalendarComponent.prototype.months_range;
    /** @type {?} */
    CalendarComponent.prototype.years;
    /** @type {?} */
    CalendarComponent.prototype.years_range;
    /** @type {?} */
    CalendarComponent.prototype.timeVlaue;
    /** @type {?} */
    CalendarComponent.prototype.timeVlaue_range;
    /** @type {?} */
    CalendarComponent.prototype.dayIdx;
    /** @type {?} */
    CalendarComponent.prototype.weekDayOpts;
    /** @type {?} */
    CalendarComponent.prototype.selectMonth;
    /** @type {?} */
    CalendarComponent.prototype.selectMonth_range;
    /** @type {?} */
    CalendarComponent.prototype.selectYear;
    /** @type {?} */
    CalendarComponent.prototype.selectYear_range;
    /** @type {?} */
    CalendarComponent.prototype.selectTime;
    /** @type {?} */
    CalendarComponent.prototype.dateChanged;
    /** @type {?} */
    CalendarComponent.prototype.calendarViewChanged;
    /** @type {?} */
    CalendarComponent.prototype.rangeDateSelection;
    /** @type {?} */
    CalendarComponent.prototype.closedByEsc;
    /** @type {?} */
    CalendarComponent.prototype.selectorPos;
    /** @type {?} */
    CalendarComponent.prototype.scrollDiff;
    /** @type {?} */
    CalendarComponent.prototype.prevViewDisabled;
    /** @type {?} */
    CalendarComponent.prototype.nextViewDisabled;
    /** @type {?} */
    CalendarComponent.prototype.prevDobViewDisabled;
    /** @type {?} */
    CalendarComponent.prototype.nextDobViewDisabled;
    /** @type {?} */
    CalendarComponent.prototype.prevViewDisabled_range;
    /** @type {?} */
    CalendarComponent.prototype.nextViewDisabled_range;
    /** @type {?} */
    CalendarComponent.prototype.prevDobViewDisabled_range;
    /** @type {?} */
    CalendarComponent.prototype.nextDobViewDisabled_range;
    /** @type {?} */
    CalendarComponent.prototype.disabledHours;
    /** @type {?} */
    CalendarComponent.prototype.disabledMinutes;
    /** @type {?} */
    CalendarComponent.prototype.disabledSeconds;
    /**
     * @type {?}
     * @private
     */
    CalendarComponent.prototype.renderer;
    /**
     * @type {?}
     * @private
     */
    CalendarComponent.prototype.cdr;
    /**
     * @type {?}
     * @private
     */
    CalendarComponent.prototype.utilService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FsZW5kYXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy91aS1kYXRlcGlja2VyLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvY2FsZW5kYXIvY2FsZW5kYXIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQUUsaUJBQWlCLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxpQkFBaUIsRUFBRSxXQUFXLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFNL0gsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLDJCQUEyQixDQUFDO0FBQ3hELE9BQU8sRUFBRSxXQUFXLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUN0RixPQUFPLEVBQ0gsR0FBRyxFQUFFLFVBQVUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxjQUFjLEVBQUUsY0FBYyxFQUFFLGVBQWUsRUFBRSxlQUFlLEVBQzFGLGNBQWMsRUFBRSxjQUFjLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLFNBQVMsRUFDeEUsTUFBTSwyQkFBMkIsQ0FBQztBQUNuQyxPQUFPLEVBQUUsd0JBQXdCLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUNsRSxPQUFPLEVBQUUsT0FBTyxFQUFhLE1BQU0sV0FBVyxDQUFDO0FBQy9DLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSx1Q0FBdUMsQ0FBQztBQUNqRTtJQTBGSSwyQkFBb0IsUUFBbUIsRUFBVSxHQUFzQixFQUFVLFdBQXdCO1FBQXpHLGlCQUE4RztRQUExRixhQUFRLEdBQVIsUUFBUSxDQUFXO1FBQVUsUUFBRyxHQUFILEdBQUcsQ0FBbUI7UUFBVSxnQkFBVyxHQUFYLFdBQVcsQ0FBYTtRQS9FMUUsYUFBUSxH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Q0FBMkY7O0lBQzNGLCtDQUFpRzs7SUFDakcsMENBQW1EOztJQUNuRCxnREFBeUQ7O0lBQ3pELHlDQUFzRDs7SUFDdEQsOENBQStHOztJQUMvRyx5Q0FBZ0Q7O0lBQ2hELHFDQUE2Qjs7SUFDN0Isa0NBQTJCOztJQUMzQix3Q0FBaUM7O0lBQ2pDLG1DQUFnQzs7SUFDaEMseUNBQXNDOztJQUN0QyxrQ0FBMEM7O0lBQzFDLHdDQUFnRDs7SUFDaEQsc0NBQWtCOztJQUNsQiw0Q0FBd0I7O0lBRXhCLG1DQUFXOztJQUNYLHdDQUEwRDs7SUFFMUQsd0NBQW9COztJQUNwQiw4Q0FBMEI7O0lBQzFCLHVDQUFtQjs7SUFDbkIsNkNBQXlCOztJQUN6Qix1Q0FBbUI7O0lBRW5CLHdDQUF3RDs7SUFDeEQsZ0RBQTJEOztJQUMzRCwrQ0FBeUQ7O0lBQ3pELHdDQUF3Qjs7SUFDeEIsd0NBQXdDOztJQUN4Qyx1Q0FBZTs7SUFFZiw2Q0FBeUI7O0lBQ3pCLDZDQUF5Qjs7SUFDekIsZ0RBQTRCOztJQUM1QixnREFBNEI7O0lBRTVCLG1EQUErQjs7SUFDL0IsbURBQStCOztJQUMvQixzREFBa0M7O0lBQ2xDLHNEQUFrQzs7SUFVbEMsMENBTUM7O0lBRUQsNENBTUM7O0lBRUQsNENBTUM7Ozs7O0lBR1cscUNBQTJCOzs7OztJQUFFLGdDQUE4Qjs7Ozs7SUFBRSx3Q0FBZ0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIEVsZW1lbnRSZWYsIFZpZXdFbmNhcHN1bGF0aW9uLCBWaWV3Q2hpbGQsIFJlbmRlcmVyMiwgQ2hhbmdlRGV0ZWN0b3JSZWYsIEhvc3RCaW5kaW5nIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7XHJcbiAgICBJTXlEYXRlLCBJTXlEYXRlUmFuZ2UsIElNeU1vbnRoLCBJTXlDYWxlbmRhckRheSwgSU15Q2FsZW5kYXJNb250aCwgSU15Q2FsZW5kYXJZZWFyLFxyXG4gICAgSU15V2VlaywgSU15T3B0aW9ucywgSU15U2VsZWN0b3JQb3NpdGlvbiwgSU15Q2FsZW5kYXJWaWV3Q2hhbmdlZCwgSU15UmFuZ2VEYXRlU2VsZWN0aW9uLCBJTXlEYXRlTW9kZWwsXHJcbiAgICBJTXlNb250aFJvd1xyXG59IGZyb20gJy4uLy4uL2ludGVyZmFjZXMvcHVibGljLWFwaSc7XHJcbmltcG9ydCB7IFV0aWxTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvcHVibGljLWFwaSc7XHJcbmltcG9ydCB7IERlZmF1bHRWaWV3LCBLZXlDb2RlLCBNb250aElkLCBSZXNldERhdGVUeXBlIH0gZnJvbSAnLi4vLi4vZW51bXMvcHVibGljLWFwaSc7XHJcbmltcG9ydCB7XHJcbiAgICBET1QsIFVOREVSX0xJTkUsIEQsIE0sIFksIERBVEVfUk9XX0NPVU5ULCBEQVRFX0NPTF9DT1VOVCwgTU9OVEhfUk9XX0NPVU5ULCBNT05USF9DT0xfQ09VTlQsXHJcbiAgICBZRUFSX1JPV19DT1VOVCwgWUVBUl9DT0xfQ09VTlQsIFNVLCBNTywgVFUsIFdFLCBUSCwgRlIsIFNBLCBFTVBUWV9TVFIsIFNUWUxFXHJcbn0gZnJvbSAnLi4vLi4vY29uc3RhbnRzL2NvbnN0YW50cyc7XHJcbmltcG9ydCB7IFRpbWVQaWNrZXJQYW5lbENvbXBvbmVudCB9IGZyb20gJ0BmYXJyaXMvdWktdGltZS1waWNrZXInO1xyXG5pbXBvcnQgeyBmbGF0dGVuLCBjbG9uZURlZXAgfSBmcm9tICdsb2Rhc2gtZXMnO1xyXG5pbXBvcnQgeyBWaWV3VHlwZSB9IGZyb20gJy4uLy4uL2ludGVyZmFjZXMvbXktb3B0aW9ucy5pbnRlcmZhY2UnO1xyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiAnZmFycmlzLWRhdGVwaWNrZXItY2FsZW5kYXInLFxyXG4gICAgdGVtcGxhdGVVcmw6ICcuL2NhbGVuZGFyLmNvbXBvbmVudC5odG1sJyxcclxuICAgIHByb3ZpZGVyczogW1V0aWxTZXJ2aWNlXSxcclxuICAgIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmVcclxufSlcclxuZXhwb3J0IGNsYXNzIENhbGVuZGFyQ29tcG9uZW50IHtcclxuICAgIEBWaWV3Q2hpbGQoJ3NlbGVjdG9yRWwnKSBzZWxlY3RvckVsOiBFbGVtZW50UmVmO1xyXG4gICAgQFZpZXdDaGlsZCgnc3R5bGVFbCcpIHN0eWxlRWw6IEVsZW1lbnRSZWY7XHJcbiAgICBAVmlld0NoaWxkKCdlbmRUaW1lUmVmJykgZW5kVGltZVJlZjogVGltZVBpY2tlclBhbmVsQ29tcG9uZW50O1xyXG5cclxuICAgIEBIb3N0QmluZGluZygnc3R5bGUucG9zaXRpb24nKSBwb3NpdGlvbiA9ICdzdGF0aWMnO1xyXG5cclxuICAgIG9wdHM6IElNeU9wdGlvbnM7XHJcbiAgICB2aXNpYmxlTW9udGg6IElNeU1vbnRoID0geyBtb250aFR4dDogRU1QVFlfU1RSLCBtb250aE5icjogMCwgeWVhcjogMCwgeWVhclR4dDogRU1QVFlfU1RSIH07XHJcbiAgICB2aXNpYmxlTW9udGhfcmFuZ2U6IElNeU1vbnRoID0geyBtb250aFR4dDogRU1QVFlfU1RSLCBtb250aE5icjogMCwgeWVhcjogMCwgeWVhclR4dDogRU1QVFlfU1RSIH07XHJcbiAgICBzZWxlY3RlZE1vbnRoOiBJTXlNb250aCA9IHsgbW9udGhOYnI6IDAsIHllYXI6IDAgfTtcclxuICAgIHNlbGVjdGVkTW9udGhfcmFuZ2U6IElNeU1vbnRoID0geyBtb250aE5icjogMCwgeWVhcjogMCB9O1xyXG4gICAgc2VsZWN0ZWREYXRlOiBJTXlEYXRlID0geyB5ZWFyOiAwLCBtb250aDogMCwgZGF5OiAwIH07XHJcbiAgICBzZWxlY3RlZERhdGVSYW5nZTogSU15RGF0ZVJhbmdlID0geyBiZWdpbjogeyB5ZWFyOiAwLCBtb250aDogMCwgZGF5OiAwIH0sIGVuZDogeyB5ZWFyOiAwLCBtb250aDogMCwgZGF5OiAwIH0gfTtcclxuICAgIHNlbGVjdGVkV2VlazogSU15V2VlayA9IHsgd2Vla05icjogMCwgeWVhcjogMCB9O1xyXG4gICAgd2Vla0RheXM6IEFycmF5PHN0cmluZz4gPSBbXTtcclxuICAgIGRhdGVzOiBBcnJheTxJTXlXZWVrPiA9IFtdO1xyXG4gICAgZGF0ZXNfcmFuZ2U6IEFycmF5PElNeVdlZWs+ID0gW107XHJcbiAgICBtb250aHM6IEFycmF5PElNeU1vbnRoUm93PiA9IFtdO1xyXG4gICAgbW9udGhzX3JhbmdlOiBBcnJheTxJTXlNb250aFJvdz4gPSBbXTtcclxuICAgIHllYXJzOiBBcnJheTxBcnJheTxJTXlDYWxlbmRhclllYXI+PiA9IFtdO1xyXG4gICAgeWVhcnNfcmFuZ2U6IEFycmF5PEFycmF5PElNeUNhbGVuZGFyWWVhcj4+ID0gW107XHJcbiAgICB0aW1lVmxhdWU6IHN0cmluZztcclxuICAgIHRpbWVWbGF1ZV9yYW5nZTogc3RyaW5nO1xyXG5cclxuICAgIGRheUlkeCA9IDA7XHJcbiAgICB3ZWVrRGF5T3B0czogQXJyYXk8c3RyaW5nPiA9IFtTVSwgTU8sIFRVLCBXRSwgVEgsIEZSLCBTQV07XHJcblxyXG4gICAgc2VsZWN0TW9udGggPSBmYWxzZTtcclxuICAgIHNlbGVjdE1vbnRoX3JhbmdlID0gZmFsc2U7XHJcbiAgICBzZWxlY3RZZWFyID0gZmFsc2U7XHJcbiAgICBzZWxlY3RZZWFyX3JhbmdlID0gZmFsc2U7XHJcbiAgICBzZWxlY3RUaW1lID0gZmFsc2U7XHJcblxyXG4gICAgZGF0ZUNoYW5nZWQ6IChkbTogSU15RGF0ZU1vZGVsLCBjbG9zZTogYm9vbGVhbikgPT4gdm9pZDtcclxuICAgIGNhbGVuZGFyVmlld0NoYW5nZWQ6IChjdmM6IElNeUNhbGVuZGFyVmlld0NoYW5nZWQpID0+IHZvaWQ7XHJcbiAgICByYW5nZURhdGVTZWxlY3Rpb246IChyZHM6IElNeVJhbmdlRGF0ZVNlbGVjdGlvbikgPT4gdm9pZDtcclxuICAgIGNsb3NlZEJ5RXNjOiAoKSA9PiB2b2lkO1xyXG4gICAgc2VsZWN0b3JQb3M6IElNeVNlbGVjdG9yUG9zaXRpb24gPSBudWxsO1xyXG4gICAgc2Nyb2xsRGlmZiA9IDA7XHJcblxyXG4gICAgcHJldlZpZXdEaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgbmV4dFZpZXdEaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgcHJldkRvYlZpZXdEaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgbmV4dERvYlZpZXdEaXNhYmxlZCA9IGZhbHNlO1xyXG5cclxuICAgIHByZXZWaWV3RGlzYWJsZWRfcmFuZ2UgPSBmYWxzZTtcclxuICAgIG5leHRWaWV3RGlzYWJsZWRfcmFuZ2UgPSBmYWxzZTtcclxuICAgIHByZXZEb2JWaWV3RGlzYWJsZWRfcmFuZ2UgPSBmYWxzZTtcclxuICAgIG5leHREb2JWaWV3RGlzYWJsZWRfcmFuZ2UgPSBmYWxzZTtcclxuXHJcblxyXG4gICAgZ2V0VGltZVN0cihkYXRlOiBEYXRlKTogc3RyaW5nIHtcclxuICAgICAgICBjb25zdCBob3VyID0gdGhpcy51dGlsU2VydmljZS5wcmVaZXJvKGRhdGUuZ2V0SG91cnMoKSk7XHJcbiAgICAgICAgY29uc3QgbWludXRlID0gdGhpcy51dGlsU2VydmljZS5wcmVaZXJvKGRhdGUuZ2V0TWludXRlcygpKTtcclxuICAgICAgICBjb25zdCBzZWNvbmQgPSB0aGlzLnV0aWxTZXJ2aWNlLnByZVplcm8oZGF0ZS5nZXRTZWNvbmRzKCkpO1xyXG4gICAgICAgIHJldHVybiBgJHtob3VyfToke21pbnV0ZX06JHtzZWNvbmR9YDtcclxuICAgIH1cclxuICAgIC8vIOemgeeUqOaXpeacn+aXtumXtOaOp+S7tuS4reeahOaXtumXtOauteeahOWwj+aXtlxyXG4gICAgZGlzYWJsZWRIb3VycyA9ICgpID0+IHtcclxuICAgICAgICBjb25zdCBtaW4gPSB0aGlzLm9wdHMuZGlzYWJsZVVudGlsO1xyXG4gICAgICAgIGNvbnN0IG1heCA9IHRoaXMub3B0cy5kaXNhYmxlU2luY2U7XHJcbiAgICAgICAgY29uc3QgY3VycmVudERhdGUgPSB0aGlzLm9wdHMuZGF0ZVJhbmdlID8gdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbiA6IHRoaXMuc2VsZWN0ZWREYXRlO1xyXG4gICAgICAgIGNvbnN0IHJlcyA9IHRoaXMudXRpbFNlcnZpY2UuZGlzYWJsZWRIb3VycyhtaW4sIG1heCwgY3VycmVudERhdGUpO1xyXG4gICAgICAgIHJldHVybiByZXM7XHJcbiAgICB9XHJcbiAgICAvLyDnpoHnlKjml6XmnJ/ml7bpl7Tmjqfku7bkuK3nmoTml7bpl7TmrrXnmoTliIbpkp9cclxuICAgIGRpc2FibGVkTWludXRlcyA9IChob3VyOiBudW1iZXIpID0+IHtcclxuICAgICAgICBjb25zdCBtaW4gPSB0aGlzLm9wdHMuZGlzYWJsZVVudGlsO1xyXG4gICAgICAgIGNvbnN0IG1heCA9IHRoaXMub3B0cy5kaXNhYmxlU2luY2U7XHJcbiAgICAgICAgY29uc3QgY3VycmVudERhdGUgPSB0aGlzLm9wdHMuZGF0ZVJhbmdlID8gdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbiA6IHRoaXMuc2VsZWN0ZWREYXRlO1xyXG4gICAgICAgIGNvbnN0IHJlcyA9IHRoaXMudXRpbFNlcnZpY2UuZGlzYWJsZWRNaW51dGVzKG1pbiwgbWF4LCBob3VyLCBjdXJyZW50RGF0ZSk7XHJcbiAgICAgICAgcmV0dXJuIHJlcztcclxuICAgIH1cclxuICAgIC8vIOemgeeUqOaXpeacn+aXtumXtOaOp+S7tuS4reeahOaXtumXtOauteeahOenklxyXG4gICAgZGlzYWJsZWRTZWNvbmRzID0gKGhvdXI6IG51bWJlciwgbWludXRlOiBudW1iZXIpID0+IHtcclxuICAgICAgICBjb25zdCBtaW4gPSB0aGlzLm9wdHMuZGlzYWJsZVVudGlsO1xyXG4gICAgICAgIGNvbnN0IG1heCA9IHRoaXMub3B0cy5kaXNhYmxlU2luY2U7XHJcbiAgICAgICAgY29uc3QgY3VycmVudERhdGUgPSB0aGlzLm9wdHMuZGF0ZVJhbmdlID8gdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbiA6IHRoaXMuc2VsZWN0ZWREYXRlO1xyXG4gICAgICAgIGNvbnN0IHJlcyA9IHRoaXMudXRpbFNlcnZpY2UuZGlzYWJsZWRTZWNvbmRzKG1pbiwgbWF4LCBob3VyLCBtaW51dGUsIGN1cnJlbnREYXRlKTtcclxuICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlbmRlcmVyOiBSZW5kZXJlcjIsIHByaXZhdGUgY2RyOiBDaGFuZ2VEZXRlY3RvclJlZiwgcHJpdmF0ZSB1dGlsU2VydmljZTogVXRpbFNlcnZpY2UpIHsgfVxyXG5cclxuICAgIGluaXRpYWxpemUoXHJcbiAgICAgICAgb3B0czogSU15T3B0aW9ucyxcclxuICAgICAgICBkZWZhdWx0TW9udGg6IHN0cmluZyxcclxuICAgICAgICBzZWxlY3RvclBvczogSU15U2VsZWN0b3JQb3NpdGlvbixcclxuICAgICAgICBpbnB1dFZhbHVlOiBzdHJpbmcsXHJcbiAgICAgICAgZGM6IChkbTogSU15RGF0ZU1vZGVsLCBjbG9zZTogYm9vbGVhbikgPT4gdm9pZCxcclxuICAgICAgICBjdmM6IChjdmM6IElNeUNhbGVuZGFyVmlld0NoYW5nZWQpID0+IHZvaWQsXHJcbiAgICAgICAgcmRzOiAocmRzOiBJTXlSYW5nZURhdGVTZWxlY3Rpb24pID0+IHZvaWQsXHJcbiAgICAgICAgY2JlOiAoKSA9PiB2b2lkXHJcbiAgICApOiB2b2lkIHtcclxuICAgICAgICB0aGlzLm9wdHMgPSBvcHRzO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0b3JQb3MgPSBzZWxlY3RvclBvcztcclxuICAgICAgICB0aGlzLndlZWtEYXlzLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgY29uc3QgeyBkZWZhdWx0VmlldywgZGF0ZVJhbmdlLCBmaXJzdERheU9mV2VlaywgZGF5TGFiZWxzLCBzdHlsZXNEYXRhLCB5ZWFyVHh0IH0gPSB0aGlzLm9wdHM7XHJcbiAgICAgICAgdGhpcy52aXNpYmxlTW9udGgueWVhclR4dCA9IHllYXJUeHQ7XHJcbiAgICAgICAgdGhpcy52aXNpYmxlTW9udGhfcmFuZ2UueWVhclR4dCA9IHllYXJUeHQ7XHJcbiAgICAgICAgLy8gaWYgKHN0eWxlc0RhdGEuc3R5bGVzLmxlbmd0aCkge1xyXG4gICAgICAgIC8vICAgICBjb25zdCBzdHlsZUVsVGVtcDogYW55ID0gdGhpcy5yZW5kZXJlci5jcmVhdGVFbGVtZW50KFNUWUxFKTtcclxuICAgICAgICAvLyAgICAgdGhpcy5yZW5kZXJlci5hcHBlbmRDaGlsZChzdHlsZUVsVGVtcCwgdGhpcy5yZW5kZXJlci5jcmVhdGVUZXh0KHN0eWxlc0RhdGEuc3R5bGVzKSk7XHJcbiAgICAgICAgLy8gICAgIHRoaXMucmVuZGVyZXIuYXBwZW5kQ2hpbGQodGhpcy5zdHlsZUVsLm5hdGl2ZUVsZW1lbnQsIHN0eWxlRWxUZW1wKTtcclxuICAgICAgICAvLyB9XHJcblxyXG4gICAgICAgIHRoaXMuZGF5SWR4ID0gdGhpcy53ZWVrRGF5T3B0cy5pbmRleE9mKGZpcnN0RGF5T2ZXZWVrKTtcclxuICAgICAgICBpZiAodGhpcy5kYXlJZHggIT09IC0xKSB7XHJcbiAgICAgICAgICAgIGxldCBpZHg6IG51bWJlciA9IHRoaXMuZGF5SWR4O1xyXG4gICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6cHJlZmVyLWZvci1vZlxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMud2Vla0RheU9wdHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHRoaXMud2Vla0RheXMucHVzaChkYXlMYWJlbHNbdGhpcy53ZWVrRGF5T3B0c1tpZHhdXSk7XHJcbiAgICAgICAgICAgICAgICBpZHggPSB0aGlzLndlZWtEYXlPcHRzW2lkeF0gPT09IFNBID8gMCA6IGlkeCArIDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHRvZGF5OiBJTXlEYXRlID0gdGhpcy5nZXRUb2RheSgpO1xyXG4gICAgICAgIGNvbnN0IGlzSW5EaXNhYmxlUmFuZ2UgPSB0aGlzLnV0aWxTZXJ2aWNlLmlzRGlzYWJsZWREYXRlKHRvZGF5LCB0aGlzLm9wdHMpO1xyXG4gICAgICAgIHRvZGF5ID0gIWlzSW5EaXNhYmxlUmFuZ2UgPyB0b2RheSA6IHRoaXMudXRpbFNlcnZpY2UuZ2V0TmVhckRhdGUodG9kYXksIHRoaXMub3B0cy5kaXNhYmxlVW50aWwsIHRoaXMub3B0cy5kaXNhYmxlU2luY2UpO1xyXG5cclxuICAgICAgICBzd2l0Y2ggKGRlZmF1bHRWaWV3KSB7XHJcbiAgICAgICAgICAgIGNhc2UgRGVmYXVsdFZpZXcuTW9udGg6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkTW9udGggPSB7IG1vbnRoTmJyOiAwLCB5ZWFyOiB0b2RheS55ZWFyIH07XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkTW9udGhfcmFuZ2UgPSB7IG1vbnRoTmJyOiAwLCB5ZWFyOiB0b2RheS55ZWFyICsgMSB9O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgRGVmYXVsdFZpZXcuWWVhcjpcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRNb250aCA9IHsgbW9udGhOYnI6IDAsIHllYXI6IHRvZGF5LnllYXIgfTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRNb250aF9yYW5nZSA9IHsgbW9udGhOYnI6IDAsIHllYXI6IHRvZGF5LnllYXIgKyAxMCB9O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkTW9udGggPSB7IG1vbnRoTmJyOiB0b2RheS5tb250aCwgeWVhcjogdG9kYXkueWVhciB9O1xyXG4gICAgICAgICAgICAgICAgaWYgKHRvZGF5Lm1vbnRoID49IDEyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE1vbnRoX3JhbmdlID0geyBtb250aE5icjogMSwgeWVhcjogdG9kYXkueWVhciArIDEgfTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE1vbnRoX3JhbmdlID0geyBtb250aE5icjogdG9kYXkubW9udGggKyB0aGlzLm9wdHMubW9udGhSYW5nZVZhbHVlLCB5ZWFyOiB0b2RheS55ZWFyIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGRlZmF1bHRNb250aCAmJiBkZWZhdWx0TW9udGgubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRNb250aCA9IHRoaXMudXRpbFNlcnZpY2UucGFyc2VEZWZhdWx0TW9udGgoZGVmYXVsdE1vbnRoKTtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE1vbnRoX3JhbmdlID0gdGhpcy51dGlsU2VydmljZS5wYXJzZURlZmF1bHRNb250aChkZWZhdWx0TW9udGgpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZE1vbnRoX3JhbmdlLm1vbnRoTmJyID49IDEyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkTW9udGhfcmFuZ2UueWVhcisrO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE1vbnRoX3JhbmdlLm1vbnRoTmJyID0gMTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRNb250aF9yYW5nZS5tb250aE5iciA9IHRoaXMuc2VsZWN0ZWRNb250aF9yYW5nZS5tb250aE5iciArIHRoaXMub3B0cy5tb250aFJhbmdlVmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghZGF0ZVJhbmdlKSB7XHJcbiAgICAgICAgICAgIC8vIFNpbmdsZSBkYXRlIG1vZGVcclxuICAgICAgICAgICAgY29uc3QgZGF0ZTogSU15RGF0ZSA9IHRoaXMudXRpbFNlcnZpY2UuaXNEYXRlVmFsaWQoaW5wdXRWYWx1ZSwgdGhpcy5vcHRzLCB0cnVlKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMudXRpbFNlcnZpY2UuaXNJbml0aWFsaXplZERhdGUoZGF0ZSkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlID0gZGF0ZTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGhvdXIgPSB0aGlzLnV0aWxTZXJ2aWNlLnByZVplcm8oZGF0ZS5ob3VyKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1pbnV0ZSA9IHRoaXMudXRpbFNlcnZpY2UucHJlWmVybyhkYXRlLm1pbnV0ZSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZWNvbmQgPSB0aGlzLnV0aWxTZXJ2aWNlLnByZVplcm8oZGF0ZS5zZWNvbmQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy50aW1lVmxhdWUgPSBgJHtob3VyfToke21pbnV0ZX06JHtzZWNvbmR9YDtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRNb250aCA9IHsgbW9udGhOYnI6IGRhdGUubW9udGgsIHllYXI6IGRhdGUueWVhciB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gRGF0ZSByYW5nZSBtb2RlXHJcbiAgICAgICAgICAgIGNvbnN0IHsgYmVnaW4sIGVuZCB9ID0gdGhpcy51dGlsU2VydmljZS5pc0RhdGVWYWxpZERhdGVSYW5nZShpbnB1dFZhbHVlLCB0aGlzLm9wdHMpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy51dGlsU2VydmljZS5pc0luaXRpYWxpemVkRGF0ZShiZWdpbikgJiYgdGhpcy51dGlsU2VydmljZS5pc0luaXRpYWxpemVkRGF0ZShlbmQpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlID0geyBiZWdpbiwgZW5kIH07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBob3VyID0gdGhpcy51dGlsU2VydmljZS5wcmVaZXJvKGJlZ2luLmhvdXIpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWludXRlID0gdGhpcy51dGlsU2VydmljZS5wcmVaZXJvKGJlZ2luLm1pbnV0ZSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZWNvbmQgPSB0aGlzLnV0aWxTZXJ2aWNlLnByZVplcm8oYmVnaW4uc2Vjb25kKTtcclxuICAgICAgICAgICAgICAgIHRoaXMudGltZVZsYXVlID0gYCR7aG91cn06JHttaW51dGV9OiR7c2Vjb25kfWA7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBfaG91ciA9IHRoaXMudXRpbFNlcnZpY2UucHJlWmVybyhlbmQuaG91cik7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBfbWludXRlID0gdGhpcy51dGlsU2VydmljZS5wcmVaZXJvKGVuZC5taW51dGUpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgX3NlY29uZCA9IHRoaXMudXRpbFNlcnZpY2UucHJlWmVybyhlbmQuc2Vjb25kKTtcclxuICAgICAgICAgICAgICAgIHRoaXMudGltZVZsYXVlX3JhbmdlID0gYCR7X2hvdXJ9OiR7X21pbnV0ZX06JHtfc2Vjb25kfWA7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE1vbnRoID0geyBtb250aE5icjogYmVnaW4ubW9udGgsIHllYXI6IGJlZ2luLnllYXIgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoYmVnaW4ubW9udGggPT09IGVuZC5tb250aCAmJiBiZWdpbi55ZWFyID09PSBlbmQueWVhcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlbmQubW9udGggPj0gMTIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE1vbnRoX3JhbmdlID0geyBtb250aE5icjogMSwgeWVhcjogZW5kLnllYXIgKyAxIH07XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGVuZHllYXIgPSBlbmQueWVhcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlZmF1bHRWaWV3ID09PSBEZWZhdWx0Vmlldy5Nb250aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5keWVhciA9IGVuZHllYXIgKyAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkTW9udGhfcmFuZ2UgPSB7IG1vbnRoTmJyOiBlbmQubW9udGggKyB0aGlzLm9wdHMubW9udGhSYW5nZVZhbHVlLCB5ZWFyOiBlbmR5ZWFyIH07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGVmYXVsdFZpZXcgPT09IERlZmF1bHRWaWV3Lk1vbnRoICYmIGJlZ2luLnllYXIgPT09IGVuZC55ZWFyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRNb250aF9yYW5nZSA9IHsgbW9udGhOYnI6IGVuZC5tb250aCwgeWVhcjogZW5kLnllYXIgKyAxIH07XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE1vbnRoX3JhbmdlID0geyBtb250aE5icjogZW5kLm1vbnRoLCB5ZWFyOiBlbmQueWVhciB9O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnN0IHdlZWtOYnIgPVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXRpbFNlcnZpY2UuZ2V0V2Vla051bWJlcihiZWdpbikgPT09IHRoaXMudXRpbFNlcnZpY2UuZ2V0V2Vla051bWJlcihlbmQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy51dGlsU2VydmljZS5nZXRXZWVrTnVtYmVyKGJlZ2luKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IDA7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkV2VlayA9IHsgd2Vla05iciwgeWVhcjogYmVnaW4ueWVhciB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmRhdGVDaGFuZ2VkID0gZGM7XHJcbiAgICAgICAgdGhpcy5jYWxlbmRhclZpZXdDaGFuZ2VkID0gY3ZjO1xyXG4gICAgICAgIHRoaXMucmFuZ2VEYXRlU2VsZWN0aW9uID0gcmRzO1xyXG4gICAgICAgIHRoaXMuY2xvc2VkQnlFc2MgPSBjYmU7XHJcbiAgICAgICAgdGhpcy5zZXRDYWxlbmRhclZpc2libGVNb250aCgpO1xyXG5cclxuICAgICAgICBpZiAoZGVmYXVsdFZpZXcgPT09IERlZmF1bHRWaWV3Lk1vbnRoKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25Nb250aFZpZXdCdG5DbGlja2VkKCk7XHJcbiAgICAgICAgICAgIGlmIChkYXRlUmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25Nb250aFZpZXdCdG5DbGlja2VkKHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChkZWZhdWx0VmlldyA9PT0gRGVmYXVsdFZpZXcuWWVhcikge1xyXG4gICAgICAgICAgICB0aGlzLm9uWWVhclZpZXdCdG5DbGlja2VkKCk7XHJcbiAgICAgICAgICAgIGlmIChkYXRlUmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25ZZWFyVmlld0J0bkNsaWNrZWQodHJ1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVzZXREYXRlVmFsdWUodmFsdWU6IFJlc2V0RGF0ZVR5cGUpOiB2b2lkIHtcclxuICAgICAgICBpZiAodmFsdWUgPT09IFJlc2V0RGF0ZVR5cGUuc2luZ2xlRGF0ZSB8fCB2YWx1ZSA9PT0gUmVzZXREYXRlVHlwZS5ib3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlID0gdGhpcy51dGlsU2VydmljZS5yZXNldERhdGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHZhbHVlID09PSBSZXNldERhdGVUeXBlLmRhdGVSYW5nZSB8fCB2YWx1ZSA9PT0gUmVzZXREYXRlVHlwZS5ib3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4gPSB0aGlzLnV0aWxTZXJ2aWNlLnJlc2V0RGF0ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmVuZCA9IHRoaXMudXRpbFNlcnZpY2UucmVzZXREYXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlc2V0TW9udGhZZWFyU2VsZWN0KGlzU2Vjb25kQ2FsZW5kYXI/OiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCFpc1NlY29uZENhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0TW9udGggPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RZZWFyID0gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RNb250aF9yYW5nZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdFllYXJfcmFuZ2UgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25Nb250aFZpZXdCdG5DbGlja2VkKGlzU2Vjb25kQ2FsZW5kYXI/OiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RUaW1lID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKCFpc1NlY29uZENhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0TW9udGggPSAhdGhpcy5zZWxlY3RNb250aDtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RZZWFyID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdE1vbnRoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlTW9udGhzKGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy52aXNpYmxlTW9udGgueWVhciA9IHRoaXMuc2VsZWN0ZWRNb250aC55ZWFyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RNb250aF9yYW5nZSA9ICF0aGlzLnNlbGVjdE1vbnRoX3JhbmdlO1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdFllYXJfcmFuZ2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0TW9udGhfcmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVNb250aHMoaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZpc2libGVNb250aF9yYW5nZS55ZWFyID0gdGhpcy5zZWxlY3RlZE1vbnRoX3JhbmdlLnllYXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbk1vbnRoQ2VsbENsaWNrZWQoY2VsbDogSU15Q2FsZW5kYXJNb250aCwgaXNTZWNvbmRDYWxlbmRhcjogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgIGlmICghaXNTZWNvbmRDYWxlbmRhcikge1xyXG4gICAgICAgICAgICBjb25zdCB7IHllYXIsIG1vbnRoTmJyIH0gPSB0aGlzLnZpc2libGVNb250aDtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG1jOiBib29sZWFuID0gY2VsbC5uYnIgIT09IG1vbnRoTmJyO1xyXG4gICAgICAgICAgICB0aGlzLnZpc2libGVNb250aCA9IHtcclxuICAgICAgICAgICAgICAgIG1vbnRoVHh0OiB0aGlzLm9wdHMubW9udGhMYWJlbHNbY2VsbC5uYnJdLFxyXG4gICAgICAgICAgICAgICAgbW9udGhOYnI6IGNlbGwubmJyLFxyXG4gICAgICAgICAgICAgICAgeWVhcixcclxuICAgICAgICAgICAgICAgIHllYXJUeHQ6IHRoaXMub3B0cy55ZWFyVHh0XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRNb250aC55ZWFyID0gdGhpcy52aXNpYmxlTW9udGgueWVhcjtcclxuICAgICAgICAgICAgaWYgKHRoaXMub3B0cy5zaG93VHlwZSA9PT0gMikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50b1NlbGVjdE1vbnRoKHRoaXMudmlzaWJsZU1vbnRoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVDYWxlbmRhcihjZWxsLm5iciwgeWVhciwgbWMsIGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RNb250aCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgeyB5ZWFyLCBtb250aE5iciB9ID0gdGhpcy52aXNpYmxlTW9udGhfcmFuZ2U7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBtYzogYm9vbGVhbiA9IGNlbGwubmJyICE9PSBtb250aE5icjtcclxuICAgICAgICAgICAgdGhpcy52aXNpYmxlTW9udGhfcmFuZ2UgPSB7XHJcbiAgICAgICAgICAgICAgICBtb250aFR4dDogdGhpcy5vcHRzLm1vbnRoTGFiZWxzW2NlbGwubmJyXSxcclxuICAgICAgICAgICAgICAgIG1vbnRoTmJyOiBjZWxsLm5icixcclxuICAgICAgICAgICAgICAgIHllYXIsXHJcbiAgICAgICAgICAgICAgICB5ZWFyVHh0OiB0aGlzLm9wdHMueWVhclR4dFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkTW9udGhfcmFuZ2UueWVhciA9IHRoaXMudmlzaWJsZU1vbnRoX3JhbmdlLnllYXI7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdHMuc2hvd1R5cGUgPT09IDIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudG9TZWxlY3RNb250aCh0aGlzLnZpc2libGVNb250aF9yYW5nZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlQ2FsZW5kYXIoY2VsbC5uYnIsIHllYXIsIG1jLCBpc1NlY29uZENhbGVuZGFyKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0TW9udGhfcmFuZ2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbk1vbnRoQ2VsbEtleURvd24oY2VsbDogSU15Q2FsZW5kYXJNb250aCkge1xyXG4gICAgICAgIC8vIE1ha2UgcG9zc2libGUgdG8gbW92ZSBmb2N1cyBieSBhcnJvdyBrZXlzXHJcbiAgICAgICAgY29uc3QgeyBzb3VyY2VSb3csIHNvdXJjZUNvbCB9ID0gdGhpcy5nZXRTb3VyY2VSb3dBbmRDb2x1bW5Gcm9tRXZlbnQoZXZlbnQpO1xyXG4gICAgICAgIGNvbnN0IHsgbW92ZUZvY3VzLCB0YXJnZXRSb3csIHRhcmdldENvbCB9ID0gdGhpcy5nZXRUYXJnZXRGb2N1c1Jvd0FuZENvbHVtbihcclxuICAgICAgICAgICAgZXZlbnQsXHJcbiAgICAgICAgICAgIHNvdXJjZVJvdyxcclxuICAgICAgICAgICAgc291cmNlQ29sLFxyXG4gICAgICAgICAgICBNT05USF9ST1dfQ09VTlQsXHJcbiAgICAgICAgICAgIE1PTlRIX0NPTF9DT1VOVFxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGlmIChtb3ZlRm9jdXMpIHtcclxuICAgICAgICAgICAgdGhpcy5mb2N1c0NlbGxFbGVtZW50KE0sIHRhcmdldFJvdywgdGFyZ2V0Q29sKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25ZZWFyVmlld0J0bkNsaWNrZWQoaXNTZWNvbmRDYWxlbmRhcj86IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnNlbGVjdFRpbWUgPSBmYWxzZTtcclxuICAgICAgICBpZiAoIWlzU2Vjb25kQ2FsZW5kYXIpIHtcclxuICAgICAgICAgICAgdGhpcy52aXNpYmxlTW9udGgueWVhciA9IHRoaXMuc2VsZWN0ZWRNb250aC55ZWFyO1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuc2VsZWN0WWVhcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZVllYXJzKHRoaXMudmlzaWJsZU1vbnRoLnllYXIsIGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZUNhbGVuZGFyKHRoaXMudmlzaWJsZU1vbnRoLm1vbnRoTmJyLCB0aGlzLnZpc2libGVNb250aC55ZWFyLCBmYWxzZSwgaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0WWVhciA9IHRoaXMub3B0cy5zaG93VHlwZSA9PT0gMyA/IHRydWUgOiAhdGhpcy5zZWxlY3RZZWFyO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5vcHRzLnNob3dUeXBlID09PSAyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdE1vbnRoID0gIXRoaXMuc2VsZWN0TW9udGg7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdE1vbnRoID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gdGhpcy5zZWxlY3RZZWFyID0gIXRoaXMuc2VsZWN0WWVhcjtcclxuICAgICAgICAgICAgLy8gdGhpcy5zZWxlY3RNb250aCA9IGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudmlzaWJsZU1vbnRoX3JhbmdlLnllYXIgPSB0aGlzLnNlbGVjdGVkTW9udGhfcmFuZ2UueWVhcjtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLnNlbGVjdFllYXJfcmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVZZWFycyh0aGlzLnZpc2libGVNb250aF9yYW5nZS55ZWFyLCBpc1NlY29uZENhbGVuZGFyKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVDYWxlbmRhcih0aGlzLnZpc2libGVNb250aF9yYW5nZS5tb250aE5iciwgdGhpcy52aXNpYmxlTW9udGhfcmFuZ2UueWVhciwgZmFsc2UsIGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0WWVhcl9yYW5nZSA9IHRoaXMub3B0cy5zaG93VHlwZSA9PT0gMyA/IHRydWUgOiAhdGhpcy5zZWxlY3RZZWFyX3JhbmdlO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5vcHRzLnNob3dUeXBlID09PSAyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdE1vbnRoX3JhbmdlID0gIXRoaXMuc2VsZWN0TW9udGhfcmFuZ2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdE1vbnRoX3JhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uWWVhckNlbGxDbGlja2VkKGNlbGw6IElNeUNhbGVuZGFyWWVhciwgaXNTZWNvbmRDYWxlbmRhcj86IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICBpZiAoIWlzU2Vjb25kQ2FsZW5kYXIpIHtcclxuICAgICAgICAgICAgY29uc3QgeyB5ZWFyLCBtb250aE5iciwgbW9udGhUeHQgfSA9IHRoaXMudmlzaWJsZU1vbnRoO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgeWM6IGJvb2xlYW4gPSBjZWxsLnllYXIgIT09IHllYXI7XHJcbiAgICAgICAgICAgIHRoaXMudmlzaWJsZU1vbnRoID0geyBtb250aFR4dCwgbW9udGhOYnIsIHllYXI6IGNlbGwueWVhciwgeWVhclR4dDogdGhpcy5vcHRzLnllYXJUeHQgfTtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE1vbnRoLnllYXIgPSB0aGlzLnZpc2libGVNb250aC55ZWFyO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5vcHRzLnNob3dUeXBlID09PSAzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRvU2VsZWN0WWVhcih7IHllYXI6IHRoaXMudmlzaWJsZU1vbnRoLnllYXIgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5vcHRzLnNob3dUeXBlID09PSAyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlTW9udGhzKGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RZZWFyID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdE1vbnRoID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVDYWxlbmRhcihtb250aE5iciwgY2VsbC55ZWFyLCB5YywgaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFllYXIgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgeWVhciwgbW9udGhOYnIsIG1vbnRoVHh0IH0gPSB0aGlzLnZpc2libGVNb250aF9yYW5nZTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHljOiBib29sZWFuID0gY2VsbC55ZWFyICE9PSB5ZWFyO1xyXG4gICAgICAgICAgICB0aGlzLnZpc2libGVNb250aF9yYW5nZSA9IHtcclxuICAgICAgICAgICAgICAgIG1vbnRoVHh0LFxyXG4gICAgICAgICAgICAgICAgbW9udGhOYnIsXHJcbiAgICAgICAgICAgICAgICB5ZWFyOiBjZWxsLnllYXIsXHJcbiAgICAgICAgICAgICAgICB5ZWFyVHh0OiB0aGlzLm9wdHMueWVhclR4dFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkTW9udGhfcmFuZ2UueWVhciA9IHRoaXMudmlzaWJsZU1vbnRoX3JhbmdlLnllYXI7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdHMuc2hvd1R5cGUgPT09IDMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudG9TZWxlY3RZZWFyKHsgeWVhcjogdGhpcy52aXNpYmxlTW9udGhfcmFuZ2UueWVhciB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLm9wdHMuc2hvd1R5cGUgPT09IDIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVNb250aHMoaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFllYXJfcmFuZ2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0TW9udGhfcmFuZ2UgPSB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZUNhbGVuZGFyKG1vbnRoTmJyLCBjZWxsLnllYXIsIHljLCBpc1NlY29uZENhbGVuZGFyKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0WWVhcl9yYW5nZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uWWVhckNlbGxLZXlEb3duKGNlbGw6IElNeUNhbGVuZGFyWWVhcikge1xyXG4gICAgICAgIC8vIE1ha2UgcG9zc2libGUgdG8gbW92ZSBmb2N1cyBieSBhcnJvdyBrZXlzXHJcbiAgICAgICAgY29uc3QgeyBzb3VyY2VSb3csIHNvdXJjZUNvbCB9ID0gdGhpcy5nZXRTb3VyY2VSb3dBbmRDb2x1bW5Gcm9tRXZlbnQoZXZlbnQpO1xyXG4gICAgICAgIGNvbnN0IHsgbW92ZUZvY3VzLCB0YXJnZXRSb3csIHRhcmdldENvbCB9ID0gdGhpcy5nZXRUYXJnZXRGb2N1c1Jvd0FuZENvbHVtbihcclxuICAgICAgICAgICAgZXZlbnQsXHJcbiAgICAgICAgICAgIHNvdXJjZVJvdyxcclxuICAgICAgICAgICAgc291cmNlQ29sLFxyXG4gICAgICAgICAgICBZRUFSX1JPV19DT1VOVCxcclxuICAgICAgICAgICAgWUVBUl9DT0xfQ09VTlRcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBpZiAobW92ZUZvY3VzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZm9jdXNDZWxsRWxlbWVudChZLCB0YXJnZXRSb3csIHRhcmdldENvbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdlbmVyYXRlTW9udGhzKGlzU2Vjb25kQ2FsZW5kYXI/OiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgdG9kYXk6IElNeURhdGUgPSB0aGlzLmdldFRvZGF5KCk7XHJcbiAgICAgICAgY29uc3QgeyBkaXNhYmxlVW50aWwsIGRpc2FibGVTaW5jZSB9ID0gdGhpcy5vcHRzO1xyXG5cclxuICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6b25lLXZhcmlhYmxlLXBlci1kZWNsYXJhdGlvblxyXG4gICAgICAgIGxldCB5ZWFyOiBudW1iZXIsIG1vbnRoTmJyOiBudW1iZXI7XHJcbiAgICAgICAgaWYgKCFpc1NlY29uZENhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgIHRoaXMubW9udGhzLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgICAgIHllYXIgPSB0aGlzLnZpc2libGVNb250aC55ZWFyO1xyXG4gICAgICAgICAgICBtb250aE5iciA9IHRoaXMudmlzaWJsZU1vbnRoLm1vbnRoTmJyO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMubW9udGhzX3JhbmdlLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgICAgIHllYXIgPSB0aGlzLnZpc2libGVNb250aF9yYW5nZS55ZWFyO1xyXG4gICAgICAgICAgICBtb250aE5iciA9IHRoaXMudmlzaWJsZU1vbnRoX3JhbmdlLm1vbnRoTmJyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gMTI7IGkgKz0gMykge1xyXG4gICAgICAgICAgICBjb25zdCByb3c6IEFycmF5PElNeUNhbGVuZGFyTW9udGg+ID0gW107XHJcbiAgICAgICAgICAgIGZvciAobGV0IGogPSBpOyBqIDwgaSArIDM7IGorKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGlzYWJsZWQ6IGJvb2xlYW4gPVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXRpbFNlcnZpY2UuaXNNb250aERpc2FibGVkQnlEaXNhYmxlVW50aWwoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgeWVhciwgbW9udGg6IGosIGRheTogdGhpcy5kYXlzSW5Nb250aChqLCB5ZWFyKSB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlVW50aWxcclxuICAgICAgICAgICAgICAgICAgICApIHx8IHRoaXMudXRpbFNlcnZpY2UuaXNNb250aERpc2FibGVkQnlEaXNhYmxlU2luY2UoeyB5ZWFyLCBtb250aDogaiwgZGF5OiAxIH0sIGRpc2FibGVTaW5jZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcm93LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIG5icjogaixcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLm9wdHMubW9udGhMYWJlbHNbal0sXHJcbiAgICAgICAgICAgICAgICAgICAgY3Vyck1vbnRoOiBqID09PSB0b2RheS5tb250aCAmJiB5ZWFyID09PSB0b2RheS55ZWFyLFxyXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkLFxyXG4gICAgICAgICAgICAgICAgICAgIG1vbnRoT2JqOiB7IHllYXIsIG1vbnRoOiBqIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghaXNTZWNvbmRDYWxlbmRhcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tb250aHMucHVzaCh7IHJvdywgeWVhciB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubW9udGhzX3JhbmdlLnB1c2goeyByb3csIHllYXIgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZXRNb250aFZpZXdIZWFkZXJCdG5EaXNhYmxlZFN0YXRlKHllYXIsIGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgfVxyXG5cclxuICAgIGdlbmVyYXRlWWVhcnMoaW5wdXRZZWFyOiBudW1iZXIsIGlzU2Vjb25kQ2FsZW5kYXI/OiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgeyBtaW5ZZWFyLCBtYXhZZWFyLCBkaXNhYmxlVW50aWwsIGRpc2FibGVTaW5jZSB9ID0gdGhpcy5vcHRzO1xyXG5cclxuICAgICAgICBsZXQgeTogbnVtYmVyID0gaW5wdXRZZWFyIC0gKGlucHV0WWVhciAlIDEwKTtcclxuXHJcbiAgICAgICAgY29uc3QgeyB5ZWFyLCBtb250aE5iciB9ID0gdGhpcy52aXNpYmxlTW9udGg7XHJcblxyXG4gICAgICAgIGlmICghaXNTZWNvbmRDYWxlbmRhcikge1xyXG4gICAgICAgICAgICB0aGlzLnllYXJzLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLnllYXJzX3JhbmdlLmxlbmd0aCAmJiAoKHRoaXMueWVhcnMmJiB0aGlzLnllYXJzLmxlbmd0aCkgJiYgeSA8IHRoaXMueWVhcnNbM11bMl0ueWVhciAmJiB5ID4gdGhpcy55ZWFyc1swXVswXS55ZWFyKSAgJiYgdGhpcy5vcHRzLnNob3dUeXBlID09PSAzKSB7XHJcbiAgICAgICAgICAgICAgICB5Kz0gMTA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy55ZWFyc19yYW5nZS5sZW5ndGggPSAwO1xyXG4gICAgICAgICAgICBjb25zdCBhbGxZZWFycyA9IGZsYXR0ZW48YW55Pih0aGlzLnllYXJzX3JhbmdlKTtcclxuICAgICAgICAgICAgaWYgKGFsbFllYXJzLmZpbmRJbmRleChuID0+IG4ueWVhciA9PSBpbnB1dFllYXIpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgIHkgPSB0aGlzLnllYXJzX3JhbmdlWzNdWzJdLnllYXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdG9kYXk6IElNeURhdGUgPSB0aGlzLmdldFRvZGF5KCk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSB5IC0gMTsgaSA8IHkgKyAxMDsgaSArPSAzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJvdzogQXJyYXk8SU15Q2FsZW5kYXJZZWFyPiA9IFtdO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gaTsgaiA8IGkgKyAzOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRpc2FibGVkOiBib29sZWFuID1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnV0aWxTZXJ2aWNlLmlzTW9udGhEaXNhYmxlZEJ5RGlzYWJsZVVudGlsKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ZWFyOiBqLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9udGg6IG1vbnRoTmJyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF5OiB0aGlzLmRheXNJbk1vbnRoKG1vbnRoTmJyLCBqKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlVW50aWxcclxuICAgICAgICAgICAgICAgICAgICApIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51dGlsU2VydmljZS5pc01vbnRoRGlzYWJsZWRCeURpc2FibGVTaW5jZSh7IHllYXI6IGosIG1vbnRoOiBtb250aE5iciwgZGF5OiAxIH0sIGRpc2FibGVTaW5jZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgbWluTWF4OiBib29sZWFuID0gaiA8IG1pblllYXIgfHwgaiA+IG1heFllYXI7XHJcbiAgICAgICAgICAgICAgICByb3cucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgeWVhcjogaixcclxuICAgICAgICAgICAgICAgICAgICBjdXJyWWVhcjogaiA9PT0gdG9kYXkueWVhcixcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZDogaiA9PT0geWVhcixcclxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogZGlzYWJsZWQgfHwgbWluTWF4LFxyXG4gICAgICAgICAgICAgICAgICAgIHllYXJPYmo6IHsgeWVhcjogaiB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIWlzU2Vjb25kQ2FsZW5kYXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMueWVhcnMucHVzaChyb3cpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy55ZWFyc19yYW5nZS5wdXNoKHJvdyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFpc1NlY29uZENhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0WWVhclZpZXdIZWFkZXJCdG5EaXNhYmxlZFN0YXRlKHRoaXMueWVhcnNbMF1bMV0ueWVhciwgdGhpcy55ZWFyc1szXVsxXS55ZWFyLCBpc1NlY29uZENhbGVuZGFyKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnNldFllYXJWaWV3SGVhZGVyQnRuRGlzYWJsZWRTdGF0ZShcclxuICAgICAgICAgICAgICAgIHRoaXMueWVhcnNfcmFuZ2VbMF1bMV0ueWVhcixcclxuICAgICAgICAgICAgICAgIHRoaXMueWVhcnNfcmFuZ2VbM11bMV0ueWVhcixcclxuICAgICAgICAgICAgICAgIGlzU2Vjb25kQ2FsZW5kYXJcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0Q2FsZW5kYXJWaXNpYmxlTW9udGgoKTogdm9pZCB7XHJcbiAgICAgICAgLy8gU2V0cyB2aXNpYmxlIG1vbnRoIG9mIGNhbGVuZGFyXHJcbiAgICAgICAgY29uc3QgeyB5ZWFyLCBtb250aE5iciB9ID0gdGhpcy5zZWxlY3RlZE1vbnRoO1xyXG4gICAgICAgIHRoaXMudmlzaWJsZU1vbnRoID0ge1xyXG4gICAgICAgICAgICBtb250aFR4dDogdGhpcy5vcHRzLm1vbnRoTGFiZWxzW21vbnRoTmJyXSxcclxuICAgICAgICAgICAgbW9udGhOYnIsXHJcbiAgICAgICAgICAgIHllYXIsXHJcbiAgICAgICAgICAgIHllYXJUeHQ6IHRoaXMub3B0cy55ZWFyVHh0XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gQ3JlYXRlIGN1cnJlbnQgbW9udGhcclxuICAgICAgICBpZiAodGhpcy5vcHRzLmRhdGVSYW5nZSkge1xyXG4gICAgICAgICAgICB0aGlzLnZpc2libGVNb250aF9yYW5nZSA9IHtcclxuICAgICAgICAgICAgICAgIG1vbnRoVHh0OiB0aGlzLm9wdHMubW9udGhMYWJlbHNbdGhpcy5zZWxlY3RlZE1vbnRoX3JhbmdlLm1vbnRoTmJyXSxcclxuICAgICAgICAgICAgICAgIG1vbnRoTmJyOiB0aGlzLnNlbGVjdGVkTW9udGhfcmFuZ2UubW9udGhOYnIsXHJcbiAgICAgICAgICAgICAgICB5ZWFyOiB0aGlzLnNlbGVjdGVkTW9udGhfcmFuZ2UueWVhcixcclxuICAgICAgICAgICAgICAgIHllYXJUeHQ6IHRoaXMub3B0cy55ZWFyVHh0XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVDYWxlbmRhcih0aGlzLnNlbGVjdGVkTW9udGhfcmFuZ2UubW9udGhOYnIsIHRoaXMuc2VsZWN0ZWRNb250aF9yYW5nZS55ZWFyLCB0cnVlLCB0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5nZW5lcmF0ZUNhbGVuZGFyKG1vbnRoTmJyLCB5ZWFyLCB0cnVlLCBmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25QcmV2TmF2aWdhdGVCdG5DbGlja2VkKGV2ZW50PzogYW55LCBpc1NlY29uZENhbGVuZGFyPzogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgIGlmICghaXNTZWNvbmRDYWxlbmRhcikge1xyXG4gICAgICAgICAgICBpZiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5zZWxlY3RNb250aCAmJiAhdGhpcy5zZWxlY3RZZWFyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXREYXRlVmlld01vbnRoKGlzU2Vjb25kQ2FsZW5kYXIsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWxlY3RNb250aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmlzaWJsZU1vbnRoLnllYXItLTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlTW9udGhzKGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdFllYXIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlWWVhcnModGhpcy55ZWFyc1syXVsyXS55ZWFyIC0gMTApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnNlbGVjdE1vbnRoICYmICF0aGlzLnNlbGVjdFllYXIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZpc2libGVNb250aC55ZWFyLS07XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXREYXRlVmlld01vbnRoKGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdE1vbnRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aXNpYmxlTW9udGgueWVhci0tO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVNb250aHMoaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0WWVhcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVZZWFycyh0aGlzLnllYXJzWzJdWzJdLnllYXIgLSAxMCwgaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5zZWxlY3RNb250aF9yYW5nZSAmJiAhdGhpcy5zZWxlY3RZZWFyX3JhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXREYXRlVmlld01vbnRoKGlzU2Vjb25kQ2FsZW5kYXIsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWxlY3RNb250aF9yYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmlzaWJsZU1vbnRoX3JhbmdlLnllYXItLTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlTW9udGhzKGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdFllYXJfcmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlWWVhcnModGhpcy55ZWFyc19yYW5nZVsyXVsyXS55ZWFyIC0gMTApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnNlbGVjdE1vbnRoX3JhbmdlICYmICF0aGlzLnNlbGVjdFllYXJfcmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZpc2libGVNb250aF9yYW5nZS55ZWFyLS07XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXREYXRlVmlld01vbnRoKGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdE1vbnRoX3JhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aXNpYmxlTW9udGhfcmFuZ2UueWVhci0tO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVNb250aHMoaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0WWVhcl9yYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVZZWFycyh0aGlzLnllYXJzX3JhbmdlWzJdWzJdLnllYXIgLSAxMCwgaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25OZXh0TmF2aWdhdGVCdG5DbGlja2VkKGV2ZW50PzogYW55LCBpc1NlY29uZENhbGVuZGFyPzogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgIGlmICghaXNTZWNvbmRDYWxlbmRhcikge1xyXG4gICAgICAgICAgICBpZiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5zZWxlY3RNb250aCAmJiAhdGhpcy5zZWxlY3RZZWFyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXREYXRlVmlld01vbnRoKGlzU2Vjb25kQ2FsZW5kYXIsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdE1vbnRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aXNpYmxlTW9udGgueWVhcisrO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVNb250aHMoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWxlY3RZZWFyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZVllYXJzKHRoaXMueWVhcnNbMl1bMl0ueWVhciArIDEwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5zZWxlY3RNb250aCAmJiAhdGhpcy5zZWxlY3RZZWFyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aXNpYmxlTW9udGgueWVhcisrO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0RGF0ZVZpZXdNb250aChpc1NlY29uZENhbGVuZGFyKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWxlY3RNb250aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmlzaWJsZU1vbnRoLnllYXIrKztcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlTW9udGhzKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0WWVhcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVZZWFycyh0aGlzLnllYXJzWzJdWzJdLnllYXIgKyAxMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5zZWxlY3RNb250aF9yYW5nZSAmJiAhdGhpcy5zZWxlY3RZZWFyX3JhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXREYXRlVmlld01vbnRoKGlzU2Vjb25kQ2FsZW5kYXIsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdE1vbnRoX3JhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aXNpYmxlTW9udGhfcmFuZ2UueWVhcisrO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVNb250aHMoaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0WWVhcl9yYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVZZWFycyh0aGlzLnllYXJzX3JhbmdlWzJdWzJdLnllYXIgKyAxMCwgaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc2VsZWN0TW9udGhfcmFuZ2UgJiYgIXRoaXMuc2VsZWN0WWVhcl9yYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmlzaWJsZU1vbnRoX3JhbmdlLnllYXIrKztcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldERhdGVWaWV3TW9udGgoaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0TW9udGhfcmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZpc2libGVNb250aF9yYW5nZS55ZWFyKys7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZU1vbnRocyhpc1NlY29uZENhbGVuZGFyKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWxlY3RZZWFyX3JhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZVllYXJzKHRoaXMueWVhcnNfcmFuZ2VbMl1bMl0ueWVhciArIDEwLCBpc1NlY29uZENhbGVuZGFyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXREYXRlVmlld01vbnRoKGlzU2Vjb25kQ2FsZW5kYXI/OiBib29sZWFuLCBpc05leHQ/OiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgbGV0IGNoYW5nZTogbnVtYmVyO1xyXG4gICAgICAgIGlmIChpc05leHQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBjaGFuZ2UgPSAwO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNoYW5nZSA9IGlzTmV4dCA/IDEgOiAtMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFpc1NlY29uZENhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgeWVhciwgbW9udGhOYnIgfSA9IHRoaXMudmlzaWJsZU1vbnRoO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZDogRGF0ZSA9IHRoaXMuZ2V0RGF0ZSh5ZWFyLCBtb250aE5iciwgMSk7XHJcbiAgICAgICAgICAgIGQuc2V0TW9udGgoZC5nZXRNb250aCgpICsgY2hhbmdlKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHk6IG51bWJlciA9IGQuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICAgICAgY29uc3QgbTogbnVtYmVyID0gZC5nZXRNb250aCgpICsgMTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMudmlzaWJsZU1vbnRoID0ge1xyXG4gICAgICAgICAgICAgICAgbW9udGhUeHQ6IHRoaXMub3B0cy5tb250aExhYmVsc1ttXSxcclxuICAgICAgICAgICAgICAgIG1vbnRoTmJyOiBtLFxyXG4gICAgICAgICAgICAgICAgeWVhcjogeSxcclxuICAgICAgICAgICAgICAgIHllYXJUeHQ6IHRoaXMub3B0cy55ZWFyVHh0XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVDYWxlbmRhcihtLCB5LCB0cnVlLCBpc1NlY29uZENhbGVuZGFyKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCB7IHllYXIsIG1vbnRoTmJyIH0gPSB0aGlzLnZpc2libGVNb250aF9yYW5nZTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGQ6IERhdGUgPSB0aGlzLmdldERhdGUoeWVhciwgbW9udGhOYnIsIDEpO1xyXG4gICAgICAgICAgICBkLnNldE1vbnRoKGQuZ2V0TW9udGgoKSArIGNoYW5nZSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB5OiBudW1iZXIgPSBkLmdldEZ1bGxZZWFyKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IG06IG51bWJlciA9IGQuZ2V0TW9udGgoKSArIDE7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnZpc2libGVNb250aF9yYW5nZSA9IHtcclxuICAgICAgICAgICAgICAgIG1vbnRoVHh0OiB0aGlzLm9wdHMubW9udGhMYWJlbHNbbV0sXHJcbiAgICAgICAgICAgICAgICBtb250aE5icjogbSxcclxuICAgICAgICAgICAgICAgIHllYXI6IHksXHJcbiAgICAgICAgICAgICAgICB5ZWFyVHh0OiB0aGlzLm9wdHMueWVhclR4dFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLmdlbmVyYXRlQ2FsZW5kYXIobSwgeSwgdHJ1ZSwgaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uQ2xvc2VTZWxlY3RvcihldmVudDogYW55KTogdm9pZCB7XHJcbiAgICAgICAgY29uc3Qga2V5Q29kZTogbnVtYmVyID0gdGhpcy51dGlsU2VydmljZS5nZXRLZXlDb2RlRnJvbUV2ZW50KGV2ZW50KTtcclxuICAgICAgICBpZiAoa2V5Q29kZSA9PT0gS2V5Q29kZS5lc2MpIHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZWRCeUVzYygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbkRheUNlbGxDbGlja2VkKGNlbGw6IElNeUNhbGVuZGFyRGF5LCBpc1NlY29uZENhbGVuZGFyPzogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgIGlmIChjZWxsLmNtbyA9PT0gMSkge1xyXG4gICAgICAgICAgICB0aGlzLm9uUHJldk5hdmlnYXRlQnRuQ2xpY2tlZCh0cnVlLCBpc1NlY29uZENhbGVuZGFyKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGNlbGwuY21vID09PSAzKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25OZXh0TmF2aWdhdGVCdG5DbGlja2VkKHRydWUsIGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNlbGVjdERhdGUoY2VsbC5kYXRlT2JqKTtcclxuICAgICAgICB0aGlzLnJlc2V0TW9udGhZZWFyU2VsZWN0KGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uRGF5Q2VsbEtleURvd24oY2VsbDogSU15Q2FsZW5kYXJEYXkpIHtcclxuICAgICAgICAvLyBNYWtlIHBvc3NpYmxlIHRvIG1vdmUgZm9jdXMgYnkgYXJyb3cga2V5c1xyXG4gICAgICAgIGNvbnN0IHsgc291cmNlUm93LCBzb3VyY2VDb2wgfSA9IHRoaXMuZ2V0U291cmNlUm93QW5kQ29sdW1uRnJvbUV2ZW50KGV2ZW50KTtcclxuICAgICAgICBjb25zdCB7IG1vdmVGb2N1cywgdGFyZ2V0Um93LCB0YXJnZXRDb2wgfSA9IHRoaXMuZ2V0VGFyZ2V0Rm9jdXNSb3dBbmRDb2x1bW4oXHJcbiAgICAgICAgICAgIGV2ZW50LFxyXG4gICAgICAgICAgICBzb3VyY2VSb3csXHJcbiAgICAgICAgICAgIHNvdXJjZUNvbCxcclxuICAgICAgICAgICAgREFURV9ST1dfQ09VTlQsXHJcbiAgICAgICAgICAgIERBVEVfQ09MX0NPVU5UXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgaWYgKG1vdmVGb2N1cykge1xyXG4gICAgICAgICAgICB0aGlzLmZvY3VzQ2VsbEVsZW1lbnQoRCwgdGFyZ2V0Um93LCB0YXJnZXRDb2wpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG9uRGF5Q2VsbE1vdXNlRW50ZXIoY2VsbDogYW55LCBpc1NlY29uZENhbGVuZGFyPzogYm9vbGVhbikge1xyXG4gICAgICAgIGlmIChpc1NlY29uZENhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgdyBvZiB0aGlzLmRhdGVzKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGRheSBvZiB3LndlZWspIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXkucmFuZ2UgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAodGhpcy51dGlsU2VydmljZS5pc0RhdGVTYW1lT3JFYXJsaWVyKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4sIGRheS5kYXRlT2JqKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51dGlsU2VydmljZS5pc0RhdGVTYW1lT3JFYXJsaWVyKGRheS5kYXRlT2JqLCBjZWxsLmRhdGVPYmopKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAodGhpcy51dGlsU2VydmljZS5pc0RhdGVTYW1lT3JFYXJsaWVyKGRheS5kYXRlT2JqLCB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51dGlsU2VydmljZS5pc0RhdGVTYW1lT3JFYXJsaWVyKGNlbGwuZGF0ZU9iaiwgZGF5LmRhdGVPYmopKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgdyBvZiB0aGlzLmRhdGVzX3JhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGRheSBvZiB3LndlZWspIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXkucmFuZ2UgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAodGhpcy51dGlsU2VydmljZS5pc0RhdGVTYW1lT3JFYXJsaWVyKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4sIGRheS5kYXRlT2JqKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51dGlsU2VydmljZS5pc0RhdGVTYW1lT3JFYXJsaWVyKGRheS5kYXRlT2JqLCBjZWxsLmRhdGVPYmopKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAodGhpcy51dGlsU2VydmljZS5pc0RhdGVTYW1lT3JFYXJsaWVyKGRheS5kYXRlT2JqLCB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51dGlsU2VydmljZS5pc0RhdGVTYW1lT3JFYXJsaWVyKGNlbGwuZGF0ZU9iaiwgZGF5LmRhdGVPYmopKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG9uRGF5Q2VsbE1vdXNlTGVhdmUoaXNTZWNvbmRDYWxlbmRhcj86IGJvb2xlYW4pIHtcclxuICAgICAgICBpZiAoaXNTZWNvbmRDYWxlbmRhcikge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHcgb2YgdGhpcy5kYXRlcykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBkYXkgb2Ygdy53ZWVrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF5LnJhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHcgb2YgdGhpcy5kYXRlc19yYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBkYXkgb2Ygdy53ZWVrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF5LnJhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBvbk1vbnRoQ2VsbE1vdXNlRW50ZXIoY2VsbDogYW55LCBpc1NlY29uZENhbGVuZGFyPzogYm9vbGVhbikge1xyXG4gICAgICAgIGlmIChpc1NlY29uZENhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiB0aGlzLm1vbnRocykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBtb250aCBvZiBpdGVtLnJvdykge1xyXG4gICAgICAgICAgICAgICAgICAgIG1vbnRoLnJhbmdlID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMudXRpbFNlcnZpY2UuaXNEYXRlU2FtZU9yRWFybGllcih0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luLCBtb250aC5tb250aE9iaikgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXRpbFNlcnZpY2UuaXNEYXRlU2FtZU9yRWFybGllcihtb250aC5tb250aE9iaiwgY2VsbC5tb250aE9iaikpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVNhbWVPckVhcmxpZXIobW9udGgubW9udGhPYmosIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4pICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVNhbWVPckVhcmxpZXIoY2VsbC5tb250aE9iaiwgbW9udGgubW9udGhPYmopKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiB0aGlzLm1vbnRoc19yYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBtb250aCBvZiBpdGVtLnJvdykge1xyXG4gICAgICAgICAgICAgICAgICAgIG1vbnRoLnJhbmdlID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMudXRpbFNlcnZpY2UuaXNEYXRlU2FtZU9yRWFybGllcih0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luLCBtb250aC5tb250aE9iaikgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXRpbFNlcnZpY2UuaXNEYXRlU2FtZU9yRWFybGllcihtb250aC5tb250aE9iaiwgY2VsbC5tb250aE9iaikpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVNhbWVPckVhcmxpZXIobW9udGgubW9udGhPYmosIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4pICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVNhbWVPckVhcmxpZXIoY2VsbC5tb250aE9iaiwgbW9udGgubW9udGhPYmopKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG9uTW9udGhDZWxsTW91c2VMZWF2ZShpc1NlY29uZENhbGVuZGFyPzogYm9vbGVhbikge1xyXG4gICAgICAgIGlmIChpc1NlY29uZENhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiB0aGlzLm1vbnRocykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBtb250aCBvZiBpdGVtLnJvdykge1xyXG4gICAgICAgICAgICAgICAgICAgIG1vbnRoLnJhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgdGhpcy5tb250aHMpIHtcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbW9udGggb2YgaXRlbS5yb3cpIHtcclxuICAgICAgICAgICAgICAgICAgICBtb250aC5yYW5nZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgb25ZZWFyQ2VsbE1vdXNlRW50ZXIoY2VsbDogYW55LCBpc1NlY29uZENhbGVuZGFyPzogYm9vbGVhbikge1xyXG4gICAgICAgIGlmIChpc1NlY29uZENhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiB0aGlzLnllYXJzKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHllYXIgb2YgaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHllYXIucmFuZ2UgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAodGhpcy51dGlsU2VydmljZS5pc0RhdGVTYW1lT3JFYXJsaWVyKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4sIHllYXIueWVhck9iaikgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXRpbFNlcnZpY2UuaXNEYXRlU2FtZU9yRWFybGllcih5ZWFyLnllYXJPYmosIGNlbGwueWVhck9iaikpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVNhbWVPckVhcmxpZXIoeWVhci55ZWFyT2JqLCB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51dGlsU2VydmljZS5pc0RhdGVTYW1lT3JFYXJsaWVyKGNlbGwueWVhck9iaiwgeWVhci55ZWFyT2JqKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgdGhpcy55ZWFyc19yYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB5ZWFyIG9mIGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICB5ZWFyLnJhbmdlID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMudXRpbFNlcnZpY2UuaXNEYXRlU2FtZU9yRWFybGllcih0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luLCB5ZWFyLnllYXJPYmopICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVNhbWVPckVhcmxpZXIoeWVhci55ZWFyT2JqLCBjZWxsLnllYXJPYmopKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAodGhpcy51dGlsU2VydmljZS5pc0RhdGVTYW1lT3JFYXJsaWVyKHllYXIueWVhck9iaiwgdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbikgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXRpbFNlcnZpY2UuaXNEYXRlU2FtZU9yRWFybGllcihjZWxsLnllYXJPYmosIHllYXIueWVhck9iaikpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgb25ZZWFyQ2VsbE1vdXNlTGVhdmUoaXNTZWNvbmRDYWxlbmRhcj86IGJvb2xlYW4pIHtcclxuICAgICAgICBpZiAoaXNTZWNvbmRDYWxlbmRhcikge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgdGhpcy55ZWFycykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB5ZWFyIG9mIGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICB5ZWFyLnJhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgdGhpcy55ZWFyc19yYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB5ZWFyIG9mIGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICB5ZWFyLnJhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBvbldlZWtDbGlja2VkKHdlZWtEYXRhOiBJTXlXZWVrKSB7XHJcbiAgICAgICAgY29uc3Qgc2hvd1RpbWUgPSB0aGlzLm9wdHMucmV0dXJuRm9ybWF0ICYmIHRoaXMub3B0cy5yZXR1cm5Gb3JtYXQudG9Mb2NhbGVMb3dlckNhc2UoKS5pbmRleE9mKCdoaDptbScpID4gLTE7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZFdlZWsgPSB7IHdlZWtOYnI6IHdlZWtEYXRhLndlZWtOYnIsIHllYXI6IHdlZWtEYXRhLnllYXIgfTtcclxuXHJcbiAgICAgICAgaWYgKHNob3dUaW1lKSB7XHJcbiAgICAgICAgICAgIHdlZWtEYXRhLndlZWtbMF0uZGF0ZU9iai5ob3VyID0gMDtcclxuICAgICAgICAgICAgd2Vla0RhdGEud2Vla1swXS5kYXRlT2JqLm1pbnV0ZSA9IDA7XHJcbiAgICAgICAgICAgIHdlZWtEYXRhLndlZWtbMF0uZGF0ZU9iai5zZWNvbmQgPSAwO1xyXG5cclxuICAgICAgICAgICAgd2Vla0RhdGEud2Vla1s2XS5kYXRlT2JqLmhvdXIgPSAyMztcclxuICAgICAgICAgICAgd2Vla0RhdGEud2Vla1s2XS5kYXRlT2JqLm1pbnV0ZSA9IDU5O1xyXG4gICAgICAgICAgICB3ZWVrRGF0YS53ZWVrWzZdLmRhdGVPYmouc2Vjb25kID0gNTk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNlbGVjdERhdGUod2Vla0RhdGEud2Vla1swXS5kYXRlT2JqKTtcclxuICAgICAgICB0aGlzLnNlbGVjdERhdGUod2Vla0RhdGEud2Vla1s2XS5kYXRlT2JqKTtcclxuICAgIH1cclxuICAgIGdldFNvdXJjZVJvd0FuZENvbHVtbkZyb21FdmVudChldmVudDogYW55KTogYW55IHtcclxuICAgICAgICBsZXQgc291cmNlUm93ID0gMDtcclxuICAgICAgICBsZXQgc291cmNlQ29sID0gMDtcclxuICAgICAgICBpZiAoZXZlbnQudGFyZ2V0ICYmIGV2ZW50LnRhcmdldC5pZCkge1xyXG4gICAgICAgICAgICAvLyB2YWx1ZSBvZiBpZCBpcyBmb3IgZXhhbXBsZTogbV8wXzEgKGZpcnN0IG51bWJlciA9IHJvdywgc2Vjb25kIG51bWJlciA9IGNvbHVtbilcclxuICAgICAgICAgICAgY29uc3QgYXJyOiBBcnJheTxzdHJpbmc+ID0gZXZlbnQudGFyZ2V0LmlkLnNwbGl0KFVOREVSX0xJTkUpO1xyXG4gICAgICAgICAgICBzb3VyY2VSb3cgPSBOdW1iZXIoYXJyWzFdKTtcclxuICAgICAgICAgICAgc291cmNlQ29sID0gTnVtYmVyKGFyclsyXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7IHNvdXJjZVJvdywgc291cmNlQ29sIH07XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VGFyZ2V0Rm9jdXNSb3dBbmRDb2x1bW4oZXZlbnQ6IGFueSwgcm93OiBudW1iZXIsIGNvbDogbnVtYmVyLCByb3dDb3VudDogbnVtYmVyLCBjb2xDb3VudDogbnVtYmVyKTogYW55IHtcclxuICAgICAgICBsZXQgbW92ZUZvY3VzID0gZmFsc2U7XHJcbiAgICAgICAgbGV0IHRhcmdldFJvdzogbnVtYmVyID0gcm93O1xyXG4gICAgICAgIGxldCB0YXJnZXRDb2w6IG51bWJlciA9IGNvbDtcclxuXHJcbiAgICAgICAgY29uc3Qga2V5Q29kZTogbnVtYmVyID0gdGhpcy51dGlsU2VydmljZS5nZXRLZXlDb2RlRnJvbUV2ZW50KGV2ZW50KTtcclxuICAgICAgICBpZiAoa2V5Q29kZSA9PT0gS2V5Q29kZS51cEFycm93ICYmIHJvdyA+IDApIHtcclxuICAgICAgICAgICAgbW92ZUZvY3VzID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGFyZ2V0Um93LS07XHJcbiAgICAgICAgfSBlbHNlIGlmIChrZXlDb2RlID09PSBLZXlDb2RlLmRvd25BcnJvdyAmJiByb3cgPCByb3dDb3VudCkge1xyXG4gICAgICAgICAgICBtb3ZlRm9jdXMgPSB0cnVlO1xyXG4gICAgICAgICAgICB0YXJnZXRSb3crKztcclxuICAgICAgICB9IGVsc2UgaWYgKGtleUNvZGUgPT09IEtleUNvZGUubGVmdEFycm93ICYmIGNvbCA+IDApIHtcclxuICAgICAgICAgICAgbW92ZUZvY3VzID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGFyZ2V0Q29sLS07XHJcbiAgICAgICAgfSBlbHNlIGlmIChrZXlDb2RlID09PSBLZXlDb2RlLnJpZ2h0QXJyb3cgJiYgY29sIDwgY29sQ291bnQpIHtcclxuICAgICAgICAgICAgbW92ZUZvY3VzID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGFyZ2V0Q29sKys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7IG1vdmVGb2N1cywgdGFyZ2V0Um93LCB0YXJnZXRDb2wgfTtcclxuICAgIH1cclxuXHJcbiAgICBmb2N1c0NlbGxFbGVtZW50KHR5cGU6IHN0cmluZywgcm93OiBudW1iZXIsIGNvbDogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgZWxlbTogYW55ID0gdGhpcy5zZWxlY3RvckVsLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcihET1QgKyB0eXBlICsgVU5ERVJfTElORSArIHJvdyArIFVOREVSX0xJTkUgKyBjb2wpO1xyXG4gICAgICAgIGlmIChlbGVtKSB7XHJcbiAgICAgICAgICAgIGVsZW0uZm9jdXMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2VsZWN0RGF0ZShkYXRlOiBJTXlEYXRlKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgeyBkYXRlRm9ybWF0LCBtb250aExhYmVscywgZGF0ZVJhbmdlRGF0ZXNEZWxpbWl0ZXIsIGNsb3NlU2VsZWN0b3JPbkRhdGVTZWxlY3QsIHNob3dUaW1lLCByZXR1cm5Gb3JtYXQgfSA9IHRoaXMub3B0cztcclxuXHJcbiAgICAgICAgaWYgKHRoaXMub3B0cy5kYXRlUmFuZ2UpIHtcclxuICAgICAgICAgICAgLy8gRGF0ZSByYW5nZVxyXG4gICAgICAgICAgICBjb25zdCBpc0JlZ2luRGF0ZUluaXRpYWxpemVkOiBib29sZWFuID0gdGhpcy51dGlsU2VydmljZS5pc0luaXRpYWxpemVkRGF0ZSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luKTtcclxuICAgICAgICAgICAgY29uc3QgaXNFbmREYXRlSW5pdGlhbGl6ZWQ6IGJvb2xlYW4gPSB0aGlzLnV0aWxTZXJ2aWNlLmlzSW5pdGlhbGl6ZWREYXRlKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuZW5kKSAmJlxyXG4gICAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbikgIT09IEpTT04uc3RyaW5naWZ5KHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuZW5kKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChpc0JlZ2luRGF0ZUluaXRpYWxpemVkICYmIGlzRW5kRGF0ZUluaXRpYWxpemVkKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBib3RoIGFscmVhZHkgc2VsZWN0ZWQgLSBzZXQgYmVnaW4gZGF0ZSBhbmQgcmVzZXQgZW5kIGRhdGVcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4gPSBkYXRlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5lbmQgPSB0aGlzLnV0aWxTZXJ2aWNlLnJlc2V0RGF0ZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMucmFuZ2VEYXRlU2VsZWN0aW9uKHtcclxuICAgICAgICAgICAgICAgICAgICBpc0JlZ2luOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAganNEYXRlOiB0aGlzLnV0aWxTZXJ2aWNlLmdldERhdGUoZGF0ZSksXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUZvcm1hdCxcclxuICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWQ6IHRoaXMudXRpbFNlcnZpY2UuZm9ybWF0RGF0ZShkYXRlLCBkYXRlRm9ybWF0LCBtb250aExhYmVscyksXHJcbiAgICAgICAgICAgICAgICAgICAgZXBvYzogdGhpcy51dGlsU2VydmljZS5nZXRFcG9jVGltZShkYXRlKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWlzQmVnaW5EYXRlSW5pdGlhbGl6ZWQpIHtcclxuICAgICAgICAgICAgICAgIC8vIGJlZ2luIGRhdGVcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4gPSBkYXRlO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFpc0VuZERhdGVJbml0aWFsaXplZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuZW5kID0gZGF0ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMucmFuZ2VEYXRlU2VsZWN0aW9uKHtcclxuICAgICAgICAgICAgICAgICAgICBpc0JlZ2luOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAganNEYXRlOiB0aGlzLnV0aWxTZXJ2aWNlLmdldERhdGUoZGF0ZSksXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUZvcm1hdCxcclxuICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWQ6IHRoaXMudXRpbFNlcnZpY2UuZm9ybWF0RGF0ZShkYXRlLCBkYXRlRm9ybWF0LCBtb250aExhYmVscyksXHJcbiAgICAgICAgICAgICAgICAgICAgZXBvYzogdGhpcy51dGlsU2VydmljZS5nZXRFcG9jVGltZShkYXRlKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBzZWNvbmQgc2VsZWN0aW9uXHJcbiAgICAgICAgICAgICAgICBjb25zdCBmaXJzdERhdGVFYXJsaWVyOiBib29sZWFuID0gdGhpcy51dGlsU2VydmljZS5pc0RhdGVFYXJsaWVyKGRhdGUsIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4pO1xyXG4gICAgICAgICAgICAgICAgaWYgKGZpcnN0RGF0ZUVhcmxpZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBfZGF0ZSA9IHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW47XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5lbmQgPSBfZGF0ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJhbmdlRGF0ZVNlbGVjdGlvbih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQmVnaW46IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiBfZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAganNEYXRlOiB0aGlzLnV0aWxTZXJ2aWNlLmdldERhdGUoX2RhdGUpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlRm9ybWF0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWQ6IHRoaXMudXRpbFNlcnZpY2UuZm9ybWF0RGF0ZShfZGF0ZSwgZGF0ZUZvcm1hdCwgbW9udGhMYWJlbHMpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcG9jOiB0aGlzLnV0aWxTZXJ2aWNlLmdldEVwb2NUaW1lKF9kYXRlKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4gPSBkYXRlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmFuZ2VEYXRlU2VsZWN0aW9uKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNCZWdpbjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAganNEYXRlOiB0aGlzLnV0aWxTZXJ2aWNlLmdldERhdGUoZGF0ZSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVGb3JtYXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZDogdGhpcy51dGlsU2VydmljZS5mb3JtYXREYXRlKGRhdGUsIGRhdGVGb3JtYXQsIG1vbnRoTGFiZWxzKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXBvYzogdGhpcy51dGlsU2VydmljZS5nZXRFcG9jVGltZShkYXRlKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmVuZCA9IGRhdGU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yYW5nZURhdGVTZWxlY3Rpb24oe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0JlZ2luOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAganNEYXRlOiB0aGlzLnV0aWxTZXJ2aWNlLmdldERhdGUoZGF0ZSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVGb3JtYXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZDogdGhpcy51dGlsU2VydmljZS5mb3JtYXREYXRlKGRhdGUsIGRhdGVGb3JtYXQsIG1vbnRoTGFiZWxzKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXBvYzogdGhpcy51dGlsU2VydmljZS5nZXRFcG9jVGltZShkYXRlKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLm9wdHMuc2hvd1RpbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGVDaGFuZ2VkKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnV0aWxTZXJ2aWNlLmdldERhdGVNb2RlbChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZUZvcm1hdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vbnRoTGFiZWxzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZVJhbmdlRGF0ZXNEZWxpbWl0ZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5Gb3JtYXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2VTZWxlY3Rvck9uRGF0ZVNlbGVjdFxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBTaW5nbGUgZGF0ZVxyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZSA9IGRhdGU7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMub3B0cy5zaG93VGltZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRlQ2hhbmdlZChcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnV0aWxTZXJ2aWNlLmdldERhdGVNb2RlbChcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVGb3JtYXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vbnRoTGFiZWxzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlUmFuZ2VEYXRlc0RlbGltaXRlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuRm9ybWF0XHJcbiAgICAgICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgICAgICBzaG93VGltZSA/IGZhbHNlIDogY2xvc2VTZWxlY3Rvck9uRGF0ZVNlbGVjdFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy50aW1lVmxhdWUgJiYgdGhpcy5vcHRzLnZpZXdUeXBlID09IFZpZXdUeXBlLlRvZ2V0aGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50aW1lVmxhdWUgPSB0aGlzLmdldFRpbWVTdHIobmV3IERhdGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgdG9TZWxlY3RNb250aChtb250aDogSU15TW9udGgpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCB7IGRhdGVGb3JtYXQsIG1vbnRoTGFiZWxzLCBkYXRlUmFuZ2VEYXRlc0RlbGltaXRlciwgY2xvc2VTZWxlY3Rvck9uRGF0ZVNlbGVjdCwgc2hvd1RpbWUsIHJldHVybkZvcm1hdCB9ID0gdGhpcy5vcHRzO1xyXG4gICAgICAgIGlmICh0aGlzLm9wdHMuZGF0ZVJhbmdlKSB7XHJcbiAgICAgICAgICAgIC8vIG1vbnRoIHJhbmdlXHJcbiAgICAgICAgICAgIGNvbnN0IGlzQmVnaW5Nb250aEluaXRpYWxpemVkOiBib29sZWFuID0gdGhpcy51dGlsU2VydmljZS5pc0luaXRpYWxpemVkTW9udGgodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbik7XHJcbiAgICAgICAgICAgIGNvbnN0IGlzRW5kTW9udGhJbml0aWFsaXplZDogYm9vbGVhbiA9IHRoaXMudXRpbFNlcnZpY2UuaXNJbml0aWFsaXplZE1vbnRoKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuZW5kKTtcclxuICAgICAgICAgICAgaWYgKGlzQmVnaW5Nb250aEluaXRpYWxpemVkICYmIGlzRW5kTW9udGhJbml0aWFsaXplZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gYm90aCBhbHJlYWR5IHNlbGVjdGVkIC0gc2V0IGJlZ2luIGRhdGUgYW5kIHJlc2V0IGVuZCBkYXRlXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luID0geyB5ZWFyOiBtb250aC55ZWFyLCBtb250aDogbW9udGgubW9udGhOYnIgfTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuZW5kID0gdGhpcy51dGlsU2VydmljZS5yZXNldERhdGUoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmFuZ2VEYXRlU2VsZWN0aW9uKHtcclxuICAgICAgICAgICAgICAgICAgICBpc0JlZ2luOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAganNEYXRlOiB0aGlzLnV0aWxTZXJ2aWNlLmdldERhdGUodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbiksXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUZvcm1hdCxcclxuICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWQ6IHRoaXMudXRpbFNlcnZpY2UuZm9ybWF0RGF0ZSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luLCBkYXRlRm9ybWF0LCBtb250aExhYmVscyksXHJcbiAgICAgICAgICAgICAgICAgICAgZXBvYzogdGhpcy51dGlsU2VydmljZS5nZXRFcG9jVGltZSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWlzQmVnaW5Nb250aEluaXRpYWxpemVkKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBiZWdpbiBkYXRlXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luID0geyB5ZWFyOiBtb250aC55ZWFyLCBtb250aDogbW9udGgubW9udGhOYnIgfTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmFuZ2VEYXRlU2VsZWN0aW9uKHtcclxuICAgICAgICAgICAgICAgICAgICBpc0JlZ2luOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAganNEYXRlOiB0aGlzLnV0aWxTZXJ2aWNlLmdldERhdGUodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbiksXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUZvcm1hdCxcclxuICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWQ6IHRoaXMudXRpbFNlcnZpY2UuZm9ybWF0RGF0ZSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luLCBkYXRlRm9ybWF0LCBtb250aExhYmVscyksXHJcbiAgICAgICAgICAgICAgICAgICAgZXBvYzogdGhpcy51dGlsU2VydmljZS5nZXRFcG9jVGltZSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBzZWNvbmQgc2VsZWN0aW9uXHJcbiAgICAgICAgICAgICAgICBjb25zdCBmaXJzdERhdGVFYXJsaWVyOiBib29sZWFuID0gdGhpcy51dGlsU2VydmljZS5pc0RhdGVFYXJsaWVyKFxyXG4gICAgICAgICAgICAgICAgICAgIHsgeWVhcjogbW9udGgueWVhciwgbW9udGg6IG1vbnRoLm1vbnRoTmJyIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpblxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIGlmIChmaXJzdERhdGVFYXJsaWVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgX2RhdGUgPSB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuZW5kID0gX2RhdGU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yYW5nZURhdGVTZWxlY3Rpb24oe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0JlZ2luOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogX2RhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzRGF0ZTogdGhpcy51dGlsU2VydmljZS5nZXREYXRlKF9kYXRlKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZUZvcm1hdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkOiB0aGlzLnV0aWxTZXJ2aWNlLmZvcm1hdERhdGUoX2RhdGUsIGRhdGVGb3JtYXQsIG1vbnRoTGFiZWxzKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXBvYzogdGhpcy51dGlsU2VydmljZS5nZXRFcG9jVGltZShfZGF0ZSlcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luID0geyB5ZWFyOiBtb250aC55ZWFyLCBtb250aDogbW9udGgubW9udGhOYnIgfTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJhbmdlRGF0ZVNlbGVjdGlvbih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQmVnaW46IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzRGF0ZTogdGhpcy51dGlsU2VydmljZS5nZXREYXRlKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlRm9ybWF0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWQ6IHRoaXMudXRpbFNlcnZpY2UuZm9ybWF0RGF0ZSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luLCBkYXRlRm9ybWF0LCBtb250aExhYmVscyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVwb2M6IHRoaXMudXRpbFNlcnZpY2UuZ2V0RXBvY1RpbWUodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbilcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5lbmQgPSB7IHllYXI6IG1vbnRoLnllYXIsIG1vbnRoOiBtb250aC5tb250aE5iciB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmFuZ2VEYXRlU2VsZWN0aW9uKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNCZWdpbjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuZW5kLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBqc0RhdGU6IHRoaXMudXRpbFNlcnZpY2UuZ2V0RGF0ZSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmVuZCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVGb3JtYXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZDogdGhpcy51dGlsU2VydmljZS5mb3JtYXREYXRlKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuZW5kLCBkYXRlRm9ybWF0LCBtb250aExhYmVscyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVwb2M6IHRoaXMudXRpbFNlcnZpY2UuZ2V0RXBvY1RpbWUodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5lbmQpXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMub3B0cy5zaG93VGltZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0ZUNoYW5nZWQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXRpbFNlcnZpY2UuZ2V0RGF0ZU1vZGVsKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlRm9ybWF0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9udGhMYWJlbHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlUmFuZ2VEYXRlc0RlbGltaXRlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybkZvcm1hdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9zZVNlbGVjdG9yT25EYXRlU2VsZWN0XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRNb250aCA9IG1vbnRoO1xyXG4gICAgICAgICAgICB0aGlzLmRhdGVDaGFuZ2VkKFxyXG4gICAgICAgICAgICAgICAgdGhpcy51dGlsU2VydmljZS5nZXREYXRlTW9kZWwoXHJcbiAgICAgICAgICAgICAgICAgICAgeyB5ZWFyOiBtb250aC55ZWFyLCBtb250aDogbW9udGgubW9udGhOYnIgfSxcclxuICAgICAgICAgICAgICAgICAgICBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVGb3JtYXQsXHJcbiAgICAgICAgICAgICAgICAgICAgbW9udGhMYWJlbHMsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZVJhbmdlRGF0ZXNEZWxpbWl0ZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuRm9ybWF0XHJcbiAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgc2hvd1RpbWUgPyBmYWxzZSA6IGNsb3NlU2VsZWN0b3JPbkRhdGVTZWxlY3RcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICB0b1NlbGVjdFllYXIoeWVhcjogeyB5ZWFyOiBudW1iZXIgfSk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHsgZGF0ZUZvcm1hdCwgbW9udGhMYWJlbHMsIGRhdGVSYW5nZURhdGVzRGVsaW1pdGVyLCBjbG9zZVNlbGVjdG9yT25EYXRlU2VsZWN0LCBzaG93VGltZSwgcmV0dXJuRm9ybWF0IH0gPSB0aGlzLm9wdHM7XHJcbiAgICAgICAgaWYgKHRoaXMub3B0cy5kYXRlUmFuZ2UpIHtcclxuICAgICAgICAgICAgLy8gbW9udGggcmFuZ2VcclxuICAgICAgICAgICAgY29uc3QgaXNCZWdpblllYXJJbml0aWFsaXplZDogYm9vbGVhbiA9IHRoaXMudXRpbFNlcnZpY2UuaXNJbml0aWFsaXplZFllYXIodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbik7XHJcbiAgICAgICAgICAgIGNvbnN0IGlzRW5kWWVhckluaXRpYWxpemVkOiBib29sZWFuID0gdGhpcy51dGlsU2VydmljZS5pc0luaXRpYWxpemVkWWVhcih0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmVuZCk7XHJcbiAgICAgICAgICAgIGlmIChpc0JlZ2luWWVhckluaXRpYWxpemVkICYmIGlzRW5kWWVhckluaXRpYWxpemVkKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBib3RoIGFscmVhZHkgc2VsZWN0ZWQgLSBzZXQgYmVnaW4gZGF0ZSBhbmQgcmVzZXQgZW5kIGRhdGVcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4gPSB5ZWFyO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5lbmQgPSB0aGlzLnV0aWxTZXJ2aWNlLnJlc2V0RGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yYW5nZURhdGVTZWxlY3Rpb24oe1xyXG4gICAgICAgICAgICAgICAgICAgIGlzQmVnaW46IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZTogdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbixcclxuICAgICAgICAgICAgICAgICAgICBqc0RhdGU6IHRoaXMudXRpbFNlcnZpY2UuZ2V0RGF0ZSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luKSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRlRm9ybWF0LFxyXG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZDogdGhpcy51dGlsU2VydmljZS5mb3JtYXREYXRlKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4sIGRhdGVGb3JtYXQsIG1vbnRoTGFiZWxzKSxcclxuICAgICAgICAgICAgICAgICAgICBlcG9jOiB0aGlzLnV0aWxTZXJ2aWNlLmdldEVwb2NUaW1lKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4pXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICghaXNCZWdpblllYXJJbml0aWFsaXplZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gYmVnaW4gZGF0ZVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbiA9IHllYXI7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJhbmdlRGF0ZVNlbGVjdGlvbih7XHJcbiAgICAgICAgICAgICAgICAgICAgaXNCZWdpbjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRlOiB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgIGpzRGF0ZTogdGhpcy51dGlsU2VydmljZS5nZXREYXRlKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4pLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVGb3JtYXQsXHJcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkOiB0aGlzLnV0aWxTZXJ2aWNlLmZvcm1hdERhdGUodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbiwgZGF0ZUZvcm1hdCwgbW9udGhMYWJlbHMpLFxyXG4gICAgICAgICAgICAgICAgICAgIGVwb2M6IHRoaXMudXRpbFNlcnZpY2UuZ2V0RXBvY1RpbWUodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbilcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gc2Vjb25kIHNlbGVjdGlvblxyXG4gICAgICAgICAgICAgICAgY29uc3QgZmlyc3REYXRlRWFybGllcjogYm9vbGVhbiA9IHRoaXMudXRpbFNlcnZpY2UuaXNEYXRlRWFybGllcih5ZWFyLCB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luKTtcclxuICAgICAgICAgICAgICAgIGlmIChmaXJzdERhdGVFYXJsaWVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgX2RhdGUgPSB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuZW5kID0gX2RhdGU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yYW5nZURhdGVTZWxlY3Rpb24oe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0JlZ2luOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogX2RhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzRGF0ZTogdGhpcy51dGlsU2VydmljZS5nZXREYXRlKF9kYXRlKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZUZvcm1hdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkOiB0aGlzLnV0aWxTZXJ2aWNlLmZvcm1hdERhdGUoX2RhdGUsIGRhdGVGb3JtYXQsIG1vbnRoTGFiZWxzKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXBvYzogdGhpcy51dGlsU2VydmljZS5nZXRFcG9jVGltZShfZGF0ZSlcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luID0geWVhcjtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJhbmdlRGF0ZVNlbGVjdGlvbih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQmVnaW46IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzRGF0ZTogdGhpcy51dGlsU2VydmljZS5nZXREYXRlKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlRm9ybWF0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWQ6IHRoaXMudXRpbFNlcnZpY2UuZm9ybWF0RGF0ZSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luLCBkYXRlRm9ybWF0LCBtb250aExhYmVscyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVwb2M6IHRoaXMudXRpbFNlcnZpY2UuZ2V0RXBvY1RpbWUodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbilcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5lbmQgPSB5ZWFyO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmFuZ2VEYXRlU2VsZWN0aW9uKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNCZWdpbjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuZW5kLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBqc0RhdGU6IHRoaXMudXRpbFNlcnZpY2UuZ2V0RGF0ZSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmVuZCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVGb3JtYXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZDogdGhpcy51dGlsU2VydmljZS5mb3JtYXREYXRlKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuZW5kLCBkYXRlRm9ybWF0LCBtb250aExhYmVscyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVwb2M6IHRoaXMudXRpbFNlcnZpY2UuZ2V0RXBvY1RpbWUodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5lbmQpXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMub3B0cy5zaG93VGltZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0ZUNoYW5nZWQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXRpbFNlcnZpY2UuZ2V0RGF0ZU1vZGVsKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlRm9ybWF0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9udGhMYWJlbHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlUmFuZ2VEYXRlc0RlbGltaXRlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybkZvcm1hdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9zZVNlbGVjdG9yT25EYXRlU2VsZWN0XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0ZUNoYW5nZWQoXHJcbiAgICAgICAgICAgICAgICB0aGlzLnV0aWxTZXJ2aWNlLmdldERhdGVNb2RlbCh5ZWFyLCBudWxsLCBkYXRlRm9ybWF0LCBtb250aExhYmVscywgZGF0ZVJhbmdlRGF0ZXNEZWxpbWl0ZXIsIHJldHVybkZvcm1hdCksXHJcbiAgICAgICAgICAgICAgICBzaG93VGltZSA/IGZhbHNlIDogY2xvc2VTZWxlY3Rvck9uRGF0ZVNlbGVjdFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG1vbnRoU3RhcnRJZHgoeTogbnVtYmVyLCBtOiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgICAgIC8vIE1vbnRoIHN0YXJ0IGluZGV4XHJcbiAgICAgICAgY29uc3QgZDogRGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgZC5zZXREYXRlKDEpO1xyXG4gICAgICAgIGQuc2V0TW9udGgobSAtIDEpO1xyXG4gICAgICAgIGQuc2V0RnVsbFllYXIoeSk7XHJcbiAgICAgICAgY29uc3QgaWR4ID0gZC5nZXREYXkoKSArIHRoaXMuc3VuZGF5SWR4KCk7XHJcbiAgICAgICAgcmV0dXJuIGlkeCA+PSA3ID8gaWR4IC0gNyA6IGlkeDtcclxuICAgIH1cclxuXHJcbiAgICBkYXlzSW5Nb250aChtOiBudW1iZXIsIHk6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgICAgLy8gUmV0dXJuIG51bWJlciBvZiBkYXlzIG9mIGN1cnJlbnQgbW9udGhcclxuICAgICAgICByZXR1cm4gbmV3IERhdGUoeSwgbSwgMCkuZ2V0RGF0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGRheXNJblByZXZNb250aChtOiBudW1iZXIsIHk6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgICAgLy8gUmV0dXJuIG51bWJlciBvZiBkYXlzIG9mIHRoZSBwcmV2aW91cyBtb250aFxyXG4gICAgICAgIGNvbnN0IGQ6IERhdGUgPSB0aGlzLmdldERhdGUoeSwgbSwgMSk7XHJcbiAgICAgICAgZC5zZXRNb250aChkLmdldE1vbnRoKCkgLSAxKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXlzSW5Nb250aChkLmdldE1vbnRoKCkgKyAxLCBkLmdldEZ1bGxZZWFyKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGlzQ3VyckRheShkOiBudW1iZXIsIG06IG51bWJlciwgeTogbnVtYmVyLCBjbW86IG51bWJlciwgdG9kYXk6IElNeURhdGUpOiBib29sZWFuIHtcclxuICAgICAgICAvLyBDaGVjayBpcyBhIGdpdmVuIGRhdGUgdGhlIHRvZGF5XHJcbiAgICAgICAgcmV0dXJuIGQgPT09IHRvZGF5LmRheSAmJiBtID09PSB0b2RheS5tb250aCAmJiB5ID09PSB0b2RheS55ZWFyICYmIGNtbyA9PT0gTW9udGhJZC5jdXJyO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFdpZHRoKCkge1xyXG4gICAgICAgIGNvbnN0IGhhc1Nob3J0Q3V0cyA9IHRoaXMub3B0cy5zaG9ydGN1dHMgJiYgdGhpcy5vcHRzLnNob3J0Y3V0cy5sZW5ndGggPiAwO1xyXG4gICAgICAgIGlmICh0aGlzLm9wdHMuZGF0ZVJhbmdlICYmIHRoaXMub3B0cy5zaG93VHlwZSAhPT0gNCkge1xyXG4gICAgICAgICAgICByZXR1cm4gaGFzU2hvcnRDdXRzID8gJzY2MHB4JyA6ICc1NzRweCc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgdyA9ICAoaGFzU2hvcnRDdXRzID8gMzgwIDogMjg3KSArICh0aGlzLm9wdHMudmlld1R5cGUgPT09IFZpZXdUeXBlLlRvZ2V0aGVyID8gMjAwIDogMCk7XHJcbiAgICAgICAgICAgIHJldHVybiB3ICsgJ3B4JztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VG9kYXkoKTogSU15RGF0ZSB7XHJcbiAgICAgICAgY29uc3QgZGF0ZTogRGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgaWYgKHRoaXMub3B0cy5zaG93VGltZSkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgeWVhcjogZGF0ZS5nZXRGdWxsWWVhcigpLFxyXG4gICAgICAgICAgICAgICAgbW9udGg6IGRhdGUuZ2V0TW9udGgoKSArIDEsXHJcbiAgICAgICAgICAgICAgICBkYXk6IGRhdGUuZ2V0RGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgaG91cjogZGF0ZS5nZXRIb3VycygpLFxyXG4gICAgICAgICAgICAgICAgbWludXRlOiBkYXRlLmdldE1pbnV0ZXMoKSxcclxuICAgICAgICAgICAgICAgIHNlY29uZDogZGF0ZS5nZXRTZWNvbmRzKClcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4geyB5ZWFyOiBkYXRlLmdldEZ1bGxZZWFyKCksIG1vbnRoOiBkYXRlLmdldE1vbnRoKCkgKyAxLCBkYXk6IGRhdGUuZ2V0RGF0ZSgpIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldERheU51bWJlcihkYXRlOiBJTXlEYXRlKTogbnVtYmVyIHtcclxuICAgICAgICAvLyBHZXQgZGF5IG51bWJlcjogc3U9MCwgbW89MSwgdHU9Miwgd2U9MyAuLi5cclxuICAgICAgICBjb25zdCBkOiBEYXRlID0gdGhpcy5nZXREYXRlKGRhdGUueWVhciwgZGF0ZS5tb250aCwgZGF0ZS5kYXkpO1xyXG4gICAgICAgIHJldHVybiBkLmdldERheSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFdlZWtkYXkoZGF0ZTogSU15RGF0ZSk6IHN0cmluZyB7XHJcbiAgICAgICAgLy8gR2V0IHdlZWtkYXk6IHN1LCBtbywgdHUsIHdlIC4uLlxyXG4gICAgICAgIHJldHVybiB0aGlzLndlZWtEYXlPcHRzW3RoaXMuZ2V0RGF5TnVtYmVyKGRhdGUpXTtcclxuICAgIH1cclxuXHJcbiAgICBnZXREYXRlKHllYXI6IG51bWJlciwgbW9udGg6IG51bWJlciwgZGF5OiBudW1iZXIpOiBEYXRlIHtcclxuICAgICAgICAvLyBDcmVhdGVzIGEgZGF0ZSBvYmplY3QgZnJvbSBnaXZlbiB5ZWFyLCBtb250aCBhbmQgZGF5XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHllYXIsIG1vbnRoIC0gMSwgZGF5LCAwLCAwLCAwLCAwKTtcclxuICAgIH1cclxuXHJcbiAgICBzdW5kYXlJZHgoKTogbnVtYmVyIHtcclxuICAgICAgICAvLyBJbmRleCBvZiBTdW5kYXkgZGF5XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF5SWR4ID4gMCA/IDcgLSB0aGlzLmRheUlkeCA6IDA7XHJcbiAgICB9XHJcblxyXG4gICAgZ2VuZXJhdGVDYWxlbmRhcihtOiBudW1iZXIsIHk6IG51bWJlciwgbm90aWZ5Q2hhbmdlOiBib29sZWFuLCBpc1NlY29uZENhbGVuZGFyPzogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgIGlmICghaXNTZWNvbmRDYWxlbmRhcikge1xyXG4gICAgICAgICAgICB0aGlzLmRhdGVzLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5kYXRlc19yYW5nZS5sZW5ndGggPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB0b2RheTogSU15RGF0ZSA9IHRoaXMuZ2V0VG9kYXkoKTtcclxuICAgICAgICBjb25zdCBtb250aFN0YXJ0OiBudW1iZXIgPSB0aGlzLm1vbnRoU3RhcnRJZHgoeSwgbSk7XHJcbiAgICAgICAgY29uc3QgZEluVGhpc006IG51bWJlciA9IHRoaXMuZGF5c0luTW9udGgobSwgeSk7XHJcbiAgICAgICAgY29uc3QgZEluUHJldk06IG51bWJlciA9IHRoaXMuZGF5c0luUHJldk1vbnRoKG0sIHkpO1xyXG5cclxuICAgICAgICBsZXQgZGF5TmJyID0gMTtcclxuICAgICAgICBsZXQgY21vOiBudW1iZXIgPSBNb250aElkLnByZXY7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCA3OyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3Qgd2VlazogQXJyYXk8SU15Q2FsZW5kYXJEYXk+ID0gW107XHJcbiAgICAgICAgICAgIGlmIChpID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBGaXJzdCB3ZWVrXHJcbiAgICAgICAgICAgICAgICBjb25zdCBwbSA9IGRJblByZXZNIC0gbW9udGhTdGFydCArIDE7XHJcbiAgICAgICAgICAgICAgICAvLyBQcmV2aW91cyBtb250aFxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IHBtOyBqIDw9IGRJblByZXZNOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRlOiBJTXlEYXRlID0geyB5ZWFyOiBtID09PSAxID8geSAtIDEgOiB5LCBtb250aDogbSA9PT0gMSA/IDEyIDogbSAtIDEsIGRheTogaiB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHdlZWsucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVPYmo6IGRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNtbyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyckRheTogdGhpcy5pc0N1cnJEYXkoaiwgbSwgeSwgY21vLCB0b2RheSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiB0aGlzLnV0aWxTZXJ2aWNlLmlzRGlzYWJsZWREYXRlKGRhdGUsIHRoaXMub3B0cyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlZERhdGU6IHRoaXMudXRpbFNlcnZpY2UuaXNNYXJrZWREYXRlKGRhdGUsIHRoaXMub3B0cy5tYXJrRGF0ZXMsIHRoaXMub3B0cy5tYXJrV2Vla2VuZHMpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoaWdobGlnaHQ6IHRoaXMudXRpbFNlcnZpY2UuaXNIaWdobGlnaHRlZERhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRzLnN1bkhpZ2hsaWdodCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3B0cy5zYXRIaWdobGlnaHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdHMuaGlnaGxpZ2h0RGF0ZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGNtbyA9IE1vbnRoSWQuY3VycjtcclxuICAgICAgICAgICAgICAgIC8vIEN1cnJlbnQgbW9udGhcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRheXNMZWZ0OiBudW1iZXIgPSA3IC0gd2Vlay5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGRheXNMZWZ0OyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRlOiBJTXlEYXRlID0geyB5ZWFyOiB5LCBtb250aDogbSwgZGF5OiBkYXlOYnIgfTtcclxuICAgICAgICAgICAgICAgICAgICB3ZWVrLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlT2JqOiBkYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbW8sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJEYXk6IHRoaXMuaXNDdXJyRGF5KGRheU5iciwgbSwgeSwgY21vLCB0b2RheSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiB0aGlzLnV0aWxTZXJ2aWNlLmlzRGlzYWJsZWREYXRlKGRhdGUsIHRoaXMub3B0cyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlZERhdGU6IHRoaXMudXRpbFNlcnZpY2UuaXNNYXJrZWREYXRlKGRhdGUsIHRoaXMub3B0cy5tYXJrRGF0ZXMsIHRoaXMub3B0cy5tYXJrV2Vla2VuZHMpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoaWdobGlnaHQ6IHRoaXMudXRpbFNlcnZpY2UuaXNIaWdobGlnaHRlZERhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRzLnN1bkhpZ2hsaWdodCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3B0cy5zYXRIaWdobGlnaHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdHMuaGlnaGxpZ2h0RGF0ZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGRheU5icisrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gUmVzdCBvZiB0aGUgd2Vla3NcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAxOyBqIDwgODsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRheU5iciA+IGRJblRoaXNNKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5leHQgbW9udGhcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF5TmJyID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY21vID0gTW9udGhJZC5uZXh0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRlOiBJTXlEYXRlID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB5ZWFyOiBjbW8gPT09IE1vbnRoSWQubmV4dCAmJiBtID09PSAxMiA/IHkgKyAxIDogeSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW9udGg6IGNtbyA9PT0gTW9udGhJZC5jdXJyID8gbSA6IGNtbyA9PT0gTW9udGhJZC5uZXh0ICYmIG0gPCAxMiA/IG0gKyAxIDogMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF5OiBkYXlOYnJcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHdlZWsucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVPYmo6IGRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNtbyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyckRheTogdGhpcy5pc0N1cnJEYXkoZGF5TmJyLCBtLCB5LCBjbW8sIHRvZGF5KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IHRoaXMudXRpbFNlcnZpY2UuaXNEaXNhYmxlZERhdGUoZGF0ZSwgdGhpcy5vcHRzKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFya2VkRGF0ZTogdGhpcy51dGlsU2VydmljZS5pc01hcmtlZERhdGUoZGF0ZSwgdGhpcy5vcHRzLm1hcmtEYXRlcywgdGhpcy5vcHRzLm1hcmtXZWVrZW5kcyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodDogdGhpcy51dGlsU2VydmljZS5pc0hpZ2hsaWdodGVkRGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdHMuc3VuSGlnaGxpZ2h0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRzLnNhdEhpZ2hsaWdodCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3B0cy5oaWdobGlnaHREYXRlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF5TmJyKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3Qgd2Vla05icjogbnVtYmVyID1cclxuICAgICAgICAgICAgICAgIHRoaXMub3B0cy5zaG93V2Vla051bWJlcnMgJiYgdGhpcy5vcHRzLmZpcnN0RGF5T2ZXZWVrID09PSBNT1xyXG4gICAgICAgICAgICAgICAgICAgID8gdGhpcy51dGlsU2VydmljZS5nZXRXZWVrTnVtYmVyKHdlZWtbMF0uZGF0ZU9iailcclxuICAgICAgICAgICAgICAgICAgICA6IDA7XHJcbiAgICAgICAgICAgIGlmICghaXNTZWNvbmRDYWxlbmRhcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRlcy5wdXNoKHsgd2Vlaywgd2Vla05iciwgeWVhcjogeSB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0ZXNfcmFuZ2UucHVzaCh7IHdlZWssIHdlZWtOYnIsIHllYXI6IHkgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc2V0RGF0ZVZpZXdIZWFkZXJCdG5EaXNhYmxlZFN0YXRlKG0sIHksIGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG5cclxuICAgICAgICBpZiAobm90aWZ5Q2hhbmdlKSB7XHJcbiAgICAgICAgICAgIC8vIE5vdGlmeSBwYXJlbnRcclxuICAgICAgICAgICAgdGhpcy5jYWxlbmRhclZpZXdDaGFuZ2VkKHtcclxuICAgICAgICAgICAgICAgIHllYXI6IHksXHJcbiAgICAgICAgICAgICAgICBtb250aDogbSxcclxuICAgICAgICAgICAgICAgIGZpcnN0OiB7IG51bWJlcjogMSwgd2Vla2RheTogdGhpcy5nZXRXZWVrZGF5KHsgeWVhcjogeSwgbW9udGg6IG0sIGRheTogMSB9KSB9LFxyXG4gICAgICAgICAgICAgICAgbGFzdDogeyBudW1iZXI6IGRJblRoaXNNLCB3ZWVrZGF5OiB0aGlzLmdldFdlZWtkYXkoeyB5ZWFyOiB5LCBtb250aDogbSwgZGF5OiBkSW5UaGlzTSB9KSB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXREYXRlVmlld0hlYWRlckJ0bkRpc2FibGVkU3RhdGUobTogbnVtYmVyLCB5OiBudW1iZXIsIGlzU2Vjb25kQ2FsZW5kYXI6IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICBsZXQgZHBtID0gZmFsc2U7XHJcbiAgICAgICAgbGV0IGRubSA9IGZhbHNlO1xyXG5cclxuICAgICAgICBjb25zdCB7IGRpc2FibGVVbnRpbCwgZGlzYWJsZVNpbmNlLCBtaW5ZZWFyLCBtYXhZZWFyIH0gPSB0aGlzLm9wdHM7XHJcblxyXG4gICAgICAgIGRwbSA9IHRoaXMudXRpbFNlcnZpY2UuaXNNb250aERpc2FibGVkQnlEaXNhYmxlVW50aWwoXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHllYXI6IG0gPT09IDEgPyB5IC0gMSA6IHksXHJcbiAgICAgICAgICAgICAgICBtb250aDogbSA9PT0gMSA/IDEyIDogbSAtIDEsXHJcbiAgICAgICAgICAgICAgICBkYXk6IHRoaXMuZGF5c0luTW9udGgobSA9PT0gMSA/IDEyIDogbSAtIDEsIG0gPT09IDEgPyB5IC0gMSA6IHkpXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGRpc2FibGVVbnRpbFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgZG5tID0gdGhpcy51dGlsU2VydmljZS5pc01vbnRoRGlzYWJsZWRCeURpc2FibGVTaW5jZShcclxuICAgICAgICAgICAgeyB5ZWFyOiBtID09PSAxMiA/IHkgKyAxIDogeSwgbW9udGg6IG0gPT09IDEyID8gMSA6IG0gKyAxLCBkYXk6IDEgfSxcclxuICAgICAgICAgICAgZGlzYWJsZVNpbmNlXHJcbiAgICAgICAgKTtcclxuICAgICAgICBpZiAoIWlzU2Vjb25kQ2FsZW5kYXIpIHtcclxuICAgICAgICAgICAgdGhpcy5wcmV2Vmlld0Rpc2FibGVkID0gKG0gPT09IDEgJiYgeSA9PT0gbWluWWVhcikgfHwgZHBtO1xyXG4gICAgICAgICAgICB0aGlzLm5leHRWaWV3RGlzYWJsZWQgPSAobSA9PT0gMTIgJiYgeSA9PT0gbWF4WWVhcikgfHwgZG5tO1xyXG4gICAgICAgICAgICB0aGlzLnByZXZEb2JWaWV3RGlzYWJsZWQgPSB5ID09PSBtaW5ZZWFyIHx8IGRwbTtcclxuICAgICAgICAgICAgdGhpcy5uZXh0RG9iVmlld0Rpc2FibGVkID0geSA9PT0gbWF4WWVhciB8fCBkbm07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5wcmV2Vmlld0Rpc2FibGVkX3JhbmdlID0gKG0gPT09IDEgJiYgeSA9PT0gbWluWWVhcikgfHwgZHBtO1xyXG4gICAgICAgICAgICB0aGlzLm5leHRWaWV3RGlzYWJsZWRfcmFuZ2UgPSAobSA9PT0gMTIgJiYgeSA9PT0gbWF4WWVhcikgfHwgZG5tO1xyXG4gICAgICAgICAgICB0aGlzLnByZXZEb2JWaWV3RGlzYWJsZWRfcmFuZ2UgPSB5ID09PSBtaW5ZZWFyIHx8IGRwbTtcclxuICAgICAgICAgICAgdGhpcy5uZXh0RG9iVmlld0Rpc2FibGVkX3JhbmdlID0geSA9PT0gbWF4WWVhciB8fCBkbm07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldE1vbnRoVmlld0hlYWRlckJ0bkRpc2FibGVkU3RhdGUoeTogbnVtYmVyLCBpc1NlY29uZENhbGVuZGFyOiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgbGV0IGRwbSA9IGZhbHNlO1xyXG4gICAgICAgIGxldCBkbm0gPSBmYWxzZTtcclxuXHJcbiAgICAgICAgY29uc3QgeyBkaXNhYmxlVW50aWwsIGRpc2FibGVTaW5jZSwgbWluWWVhciwgbWF4WWVhciB9ID0gdGhpcy5vcHRzO1xyXG5cclxuICAgICAgICBkcG0gPSB0aGlzLnV0aWxTZXJ2aWNlLmlzTW9udGhEaXNhYmxlZEJ5RGlzYWJsZVVudGlsKHsgeWVhcjogeSAtIDEsIG1vbnRoOiAxMiwgZGF5OiAzMSB9LCBkaXNhYmxlVW50aWwpO1xyXG4gICAgICAgIGRubSA9IHRoaXMudXRpbFNlcnZpY2UuaXNNb250aERpc2FibGVkQnlEaXNhYmxlU2luY2UoeyB5ZWFyOiB5ICsgMSwgbW9udGg6IDEsIGRheTogMSB9LCBkaXNhYmxlU2luY2UpO1xyXG4gICAgICAgIGlmICghaXNTZWNvbmRDYWxlbmRhcikge1xyXG4gICAgICAgICAgICB0aGlzLnByZXZWaWV3RGlzYWJsZWQgPSB5ID09PSBtaW5ZZWFyIHx8IGRwbTtcclxuICAgICAgICAgICAgdGhpcy5uZXh0Vmlld0Rpc2FibGVkID0geSA9PT0gbWF4WWVhciB8fCBkbm07XHJcbiAgICAgICAgICAgIHRoaXMucHJldkRvYlZpZXdEaXNhYmxlZCA9IHkgPT09IG1pblllYXIgfHwgZHBtO1xyXG4gICAgICAgICAgICB0aGlzLm5leHREb2JWaWV3RGlzYWJsZWQgPSB5ID09PSBtYXhZZWFyIHx8IGRubTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnByZXZWaWV3RGlzYWJsZWRfcmFuZ2UgPSB5ID09PSBtaW5ZZWFyIHx8IGRwbTtcclxuICAgICAgICAgICAgdGhpcy5uZXh0Vmlld0Rpc2FibGVkX3JhbmdlID0geSA9PT0gbWF4WWVhciB8fCBkbm07XHJcbiAgICAgICAgICAgIHRoaXMucHJldkRvYlZpZXdEaXNhYmxlZF9yYW5nZSA9IHkgPT09IG1pblllYXIgfHwgZHBtO1xyXG4gICAgICAgICAgICB0aGlzLm5leHREb2JWaWV3RGlzYWJsZWRfcmFuZ2UgPSB5ID09PSBtYXhZZWFyIHx8IGRubTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0WWVhclZpZXdIZWFkZXJCdG5EaXNhYmxlZFN0YXRlKHlwOiBudW1iZXIsIHluOiBudW1iZXIsIGlzU2Vjb25kQ2FsZW5kYXI6IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICBsZXQgZHB5ID0gZmFsc2U7XHJcbiAgICAgICAgbGV0IGRueSA9IGZhbHNlO1xyXG5cclxuICAgICAgICBjb25zdCB7IGRpc2FibGVVbnRpbCwgZGlzYWJsZVNpbmNlLCBtaW5ZZWFyLCBtYXhZZWFyIH0gPSB0aGlzLm9wdHM7XHJcblxyXG4gICAgICAgIGRweSA9IHRoaXMudXRpbFNlcnZpY2UuaXNNb250aERpc2FibGVkQnlEaXNhYmxlVW50aWwoeyB5ZWFyOiB5cCAtIDEsIG1vbnRoOiAxMiwgZGF5OiAzMSB9LCBkaXNhYmxlVW50aWwpO1xyXG4gICAgICAgIGRueSA9IHRoaXMudXRpbFNlcnZpY2UuaXNNb250aERpc2FibGVkQnlEaXNhYmxlU2luY2UoeyB5ZWFyOiB5biArIDEsIG1vbnRoOiAxLCBkYXk6IDEgfSwgZGlzYWJsZVNpbmNlKTtcclxuICAgICAgICBpZiAoIWlzU2Vjb25kQ2FsZW5kYXIpIHtcclxuICAgICAgICAgICAgdGhpcy5wcmV2Vmlld0Rpc2FibGVkID0geXAgPD0gbWluWWVhciB8fCBkcHk7XHJcbiAgICAgICAgICAgIHRoaXMubmV4dFZpZXdEaXNhYmxlZCA9IHluID49IG1heFllYXIgfHwgZG55O1xyXG4gICAgICAgICAgICB0aGlzLnByZXZEb2JWaWV3RGlzYWJsZWQgPSB5cCA8PSBtaW5ZZWFyIHx8IGRweTtcclxuICAgICAgICAgICAgdGhpcy5uZXh0RG9iVmlld0Rpc2FibGVkID0geW4gPj0gbWF4WWVhciB8fCBkbnk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5wcmV2Vmlld0Rpc2FibGVkX3JhbmdlID0geXAgPD0gbWluWWVhciB8fCBkcHk7XHJcbiAgICAgICAgICAgIHRoaXMubmV4dFZpZXdEaXNhYmxlZF9yYW5nZSA9IHluID49IG1heFllYXIgfHwgZG55O1xyXG4gICAgICAgICAgICB0aGlzLnByZXZEb2JWaWV3RGlzYWJsZWRfcmFuZ2UgPSB5cCA8PSBtaW5ZZWFyIHx8IGRweTtcclxuICAgICAgICAgICAgdGhpcy5uZXh0RG9iVmlld0Rpc2FibGVkX3JhbmdlID0geW4gPj0gbWF4WWVhciB8fCBkbnk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgb25Db250YWluZXJDbGljayhldmVudDogRXZlbnQpIHtcclxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIH1cclxuICAgIG9uQ2xpY2tUaW1lQnRuKGV2ZW50OiBFdmVudCkge1xyXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIGlmICh0aGlzLm9wdHMuZGF0ZVJhbmdlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJlZ2luSXNJbml0aWFsaXplZERhdGUgPSB0aGlzLnV0aWxTZXJ2aWNlLmlzSW5pdGlhbGl6ZWREYXRlKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4pO1xyXG4gICAgICAgICAgICBjb25zdCBlbmRJc0luaXRpYWxpemVkRGF0ZSA9IHRoaXMudXRpbFNlcnZpY2UuaXNJbml0aWFsaXplZERhdGUodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5lbmQpO1xyXG4gICAgICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICBpZiAoIWJlZ2luSXNJbml0aWFsaXplZERhdGUgfHwgIWVuZElzSW5pdGlhbGl6ZWREYXRlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyDnm7TmjqXngrnlh7vnoa7lrprmmL7npLrmnKzmnIjlkozkuIvmnIhcclxuICAgICAgICAgICAgICAgIGlmICghYmVnaW5Jc0luaXRpYWxpemVkRGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4gPSB7IHllYXI6IG5vdy5nZXRGdWxsWWVhcigpLCBtb250aDogbm93LmdldE1vbnRoKCkgKyAxLCBkYXk6IG5vdy5nZXREYXRlKCkgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGxldCBlbmRZZWFyID0gbm93LmdldEZ1bGxZZWFyKCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgZW5kbW9udGggPSBub3cuZ2V0TW9udGgoKSArIDE7XHJcbiAgICAgICAgICAgICAgICBpZiAoZW5kbW9udGggPj0gMTIpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbmRZZWFyID0gZW5kWWVhciArIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgZW5kbW9udGggPSAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgZW5kbW9udGggPSBlbmRtb250aCArIHRoaXMub3B0cy5tb250aFJhbmdlVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmVuZCA9IHsgLi4udGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbiB9O1xyXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5lbmQgPSB7IHllYXI6IGVuZFllYXIsIG1vbnRoOiBlbmRtb250aCwgZGF5OiBub3cuZ2V0RGF0ZSgpIH07XHJcbiAgICAgICAgICAgICAgICAvLyDngrnlh7tzZWxlY3RUaW1l5LmL5YmN57uZZGF0ZVJhbmdl6LWL5Lik5Liq5pe26Ze05YC8XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRpbWVWbGF1ZSA9IHRoaXMuZ2V0VGltZVN0cihub3cpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy50aW1lVmxhdWVfcmFuZ2UgPSB0aGlzLmdldFRpbWVTdHIobm93KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCF0aGlzLnRpbWVWbGF1ZV9yYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50aW1lVmxhdWVfcmFuZ2UgPSB0aGlzLmdldFRpbWVTdHIobm93KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMudXRpbFNlcnZpY2UuaXNJbml0aWFsaXplZERhdGUodGhpcy5zZWxlY3RlZERhdGUpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgLy8g54K55Ye7c2VsZWN0VGltZeS5i+WJjei1i+WAvFxyXG4gICAgICAgICAgICAgICAgdGhpcy50aW1lVmxhdWUgPSB0aGlzLmdldFRpbWVTdHIobm93KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlID0geyB5ZWFyOiBub3cuZ2V0RnVsbFllYXIoKSwgbW9udGg6IG5vdy5nZXRNb250aCgpICsgMSwgZGF5OiBub3cuZ2V0RGF0ZSgpIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICghdGhpcy50aW1lVmxhdWUpIHtcclxuICAgICAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcclxuICAgICAgICAgICAgLy8g54K55Ye7c2VsZWN0VGltZeS5i+WJjei1i+WAvFxyXG4gICAgICAgICAgICB0aGlzLnRpbWVWbGF1ZSA9IHRoaXMuZ2V0VGltZVN0cihub3cpO1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMudXRpbFNlcnZpY2UuaXNJbml0aWFsaXplZERhdGUodGhpcy5zZWxlY3RlZERhdGUpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZSA9IHsgeWVhcjogbm93LmdldEZ1bGxZZWFyKCksIG1vbnRoOiBub3cuZ2V0TW9udGgoKSArIDEsIGRheTogbm93LmdldERhdGUoKSB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0WWVhcikge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdFllYXIgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0TW9udGgpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RNb250aCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0WWVhcl9yYW5nZSkge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdFllYXJfcmFuZ2UgPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdE1vbnRoX3JhbmdlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0TW9udGhfcmFuZ2UgPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc2VsZWN0VGltZSA9ICF0aGlzLnNlbGVjdFRpbWU7XHJcbiAgICAgICAgdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0VGltZVZhbHVlKGlzRGF0ZVJhbmdlKSB7XHJcbiAgICAgICAgY29uc3QgdCA9IHsgc3RhcnQ6IG51bGwsIGVuZDogbnVsbCB9O1xyXG4gICAgICAgIGlmICh0aGlzLnRpbWVWbGF1ZSkge1xyXG4gICAgICAgICAgICBjb25zdCB0aW1lQXJyID0gdGhpcy50aW1lVmxhdWUucmVwbGFjZSgn5pe2JywgJzonKS5yZXBsYWNlKCfliIYnLCAnOicpLnJlcGxhY2UoJ+enkicsICcnKS5zcGxpdCgnOicpO1xyXG4gICAgICAgICAgICBpZiAodGltZUFyci5sZW5ndGggPj0gMikge1xyXG4gICAgICAgICAgICAgICAgdC5zdGFydCA9IHtcclxuICAgICAgICAgICAgICAgICAgICBob3VyOiB0aW1lQXJyWzBdLFxyXG4gICAgICAgICAgICAgICAgICAgIG1pbnV0ZTogdGltZUFyclsxXSxcclxuICAgICAgICAgICAgICAgICAgICBzZWNvbmQ6IHRpbWVBcnJbMl0gPyB0aW1lQXJyWzJdIDogMFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5vd0RhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICBjb25zdCBob3VyID0gbm93RGF0ZS5nZXRIb3VycygpO1xyXG4gICAgICAgICAgICBjb25zdCBtaW51dGUgPSBub3dEYXRlLmdldE1pbnV0ZXMoKTtcclxuICAgICAgICAgICAgY29uc3Qgc2Vjb25kID0gbm93RGF0ZS5nZXRTZWNvbmRzKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5vcHRzLmRhdGVSYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgdC5zdGFydCA9IHsgaG91cjogMCwgbWludXRlOiAwLCBzZWNvbmQ6IDAgfTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHQuc3RhcnQgPSB7IGhvdXIsIG1pbnV0ZSwgc2Vjb25kIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChpc0RhdGVSYW5nZSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy50aW1lVmxhdWVfcmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVBcnJfcmFuZ2UgPSB0aGlzLnRpbWVWbGF1ZV9yYW5nZS5yZXBsYWNlKCfml7YnLCAnOicpLnJlcGxhY2UoJ+WIhicsICc6JykucmVwbGFjZSgn56eSJywgJycpLnNwbGl0KCc6Jyk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGltZUFycl9yYW5nZS5sZW5ndGggPj0gMikge1xyXG4gICAgICAgICAgICAgICAgICAgIHQuZW5kID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBob3VyOiB0aW1lQXJyX3JhbmdlWzBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW51dGU6IHRpbWVBcnJfcmFuZ2VbMV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlY29uZDogdGltZUFycl9yYW5nZVsyXSA/IHRpbWVBcnJfcmFuZ2VbMl0gOiAwXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGhvdXIgPSAyMztcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1pbnV0ZSA9IDU5O1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2Vjb25kID0gNTk7XHJcbiAgICAgICAgICAgICAgICB0LmVuZCA9IHsgaG91ciwgbWludXRlLCBzZWNvbmQgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIG9uQ2xpY2tPa0J0bihldmVudDogRXZlbnQpIHtcclxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICBsZXQgdGltZU9iaiA9IG51bGw7XHJcbiAgICAgICAgbGV0IHRpbWVPYmpfcmFuZ2UgPSBudWxsO1xyXG4gICAgICAgIGxldCBzZWxlY3RlZERhdGUgPSBudWxsO1xyXG4gICAgICAgIGxldCBzZWxlY3RlZERhdGVfcmFuZ2UgPSBudWxsO1xyXG4gICAgICAgIGlmICh0aGlzLm9wdHMuc2hvd1RpbWUpIHtcclxuICAgICAgICAgICAgY29uc3QgeyBzdGFydCwgZW5kIH0gPSB0aGlzLmdldFRpbWVWYWx1ZSh0aGlzLm9wdHMuZGF0ZVJhbmdlKTtcclxuICAgICAgICAgICAgdGltZU9iaiA9IHN0YXJ0O1xyXG4gICAgICAgICAgICB0aW1lT2JqX3JhbmdlID0gZW5kO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB7IGRhdGVGb3JtYXQsIG1vbnRoTGFiZWxzLCBkYXRlUmFuZ2VEYXRlc0RlbGltaXRlciwgY2xvc2VTZWxlY3Rvck9uRGF0ZVNlbGVjdCwgcmV0dXJuRm9ybWF0IH0gPSB0aGlzLm9wdHM7XHJcbiAgICAgICAgaWYgKCF0aGlzLm9wdHMuZGF0ZVJhbmdlKSB7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkRGF0ZSA9IHsgLi4udGhpcy5pbml0aWFsaXplZERhdGUodGhpcy5zZWxlY3RlZERhdGUpLCAuLi50aW1lT2JqIH07XHJcbiAgICAgICAgICAgIGNvbnN0IGlzSW5EaXNhYmxlUmFuZ2UgPSB0aGlzLnV0aWxTZXJ2aWNlLmlzRGlzYWJsZWREYXRlKHNlbGVjdGVkRGF0ZSwgdGhpcy5vcHRzKTtcclxuICAgICAgICAgICAgY29uc3QgZWFybGllciA9IHRoaXMudXRpbFNlcnZpY2UuaXNEYXRlU2FtZU9yRWFybGllcihzZWxlY3RlZERhdGUsIHRoaXMub3B0cy5kaXNhYmxlVW50aWwpO1xyXG5cclxuICAgICAgICAgICAgc2VsZWN0ZWREYXRlID0gIWlzSW5EaXNhYmxlUmFuZ2VcclxuICAgICAgICAgICAgICAgID8gc2VsZWN0ZWREYXRlXHJcbiAgICAgICAgICAgICAgICA6IHsgLi4uc2VsZWN0ZWREYXRlLCAuLi4oZWFybGllciA/IHRoaXMub3B0cy5kaXNhYmxlVW50aWwgOiB0aGlzLm9wdHMuZGlzYWJsZVNpbmNlKSB9O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJlZ2luID0geyAuLi50aGlzLmluaXRpYWxpemVkRGF0ZSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luKSwgLi4udGltZU9iaiB9O1xyXG4gICAgICAgICAgICBjb25zdCBlbmQgPSB7IC4uLnRoaXMuaW5pdGlhbGl6ZWREYXRlKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuZW5kLCBiZWdpbiksIC4uLnRpbWVPYmpfcmFuZ2UgfTtcclxuICAgICAgICAgICAgc2VsZWN0ZWREYXRlX3JhbmdlID0geyBiZWdpbiwgZW5kIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGRhdGVNb2RlbDogSU15RGF0ZU1vZGVsID0gdGhpcy51dGlsU2VydmljZS5nZXREYXRlTW9kZWwoXHJcbiAgICAgICAgICAgIHNlbGVjdGVkRGF0ZSxcclxuICAgICAgICAgICAgc2VsZWN0ZWREYXRlX3JhbmdlLFxyXG4gICAgICAgICAgICBkYXRlRm9ybWF0LFxyXG4gICAgICAgICAgICBtb250aExhYmVscyxcclxuICAgICAgICAgICAgZGF0ZVJhbmdlRGF0ZXNEZWxpbWl0ZXIsXHJcbiAgICAgICAgICAgIHJldHVybkZvcm1hdFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgdGhpcy5kYXRlQ2hhbmdlZChkYXRlTW9kZWwsIGNsb3NlU2VsZWN0b3JPbkRhdGVTZWxlY3QpO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXRpYWxpemVkRGF0ZShkYXRlOiBJTXlEYXRlLCBvdGhlckRhdGU6IElNeURhdGUgPSB7IHllYXI6IDAsIG1vbnRoOiAwLCBkYXk6IDAgfSk6IElNeURhdGUge1xyXG4gICAgICAgIGNvbnN0IGRheXNJbk1vbnRoOiBBcnJheTxudW1iZXI+ID0gWzMxLCAyOCwgMzEsIDMwLCAzMSwgMzAsIDMxLCAzMSwgMzAsIDMxLCAzMCwgMzFdO1xyXG4gICAgICAgIGlmICghdGhpcy51dGlsU2VydmljZS5pc0luaXRpYWxpemVkRGF0ZShkYXRlKSAmJiAhdGhpcy51dGlsU2VydmljZS5pc0luaXRpYWxpemVkRGF0ZShvdGhlckRhdGUpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHllYXIgPSBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vbnRoID0gbmV3IERhdGUoKS5nZXRNb250aCgpICsgMTtcclxuICAgICAgICAgICAgY29uc3QgZGF5ID0gbmV3IERhdGUoKS5nZXREYXRlKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnV0aWxTZXJ2aWNlLmlzRGlzYWJsZWREYXRlKHsgeWVhciwgbW9udGgsIGRheSB9LCB0aGlzLm9wdHMpID8gdGhpcy5vcHRzLmRpc2FibGVVbnRpbCA6IHsgeWVhciwgbW9udGgsIGRheSB9O1xyXG4gICAgICAgIH0gZWxzZSBpZiAoIXRoaXMudXRpbFNlcnZpY2UuaXNJbml0aWFsaXplZERhdGUoZGF0ZSkpIHtcclxuICAgICAgICAgICAgY29uc3QgeWVhciA9IG90aGVyRGF0ZS5tb250aCArIDEgPiAxMiA/IG90aGVyRGF0ZS55ZWFyICsgMSA6IG90aGVyRGF0ZS55ZWFyO1xyXG4gICAgICAgICAgICBsZXQgbW9udGggPSBvdGhlckRhdGUubW9udGggKyAxID4gMTIgPyAxIDogb3RoZXJEYXRlLm1vbnRoICsgdGhpcy5vcHRzLm1vbnRoUmFuZ2VWYWx1ZTtcclxuICAgICAgICAgICAgaWYgKCFkYXRlLm1vbnRoKSB7XHJcbiAgICAgICAgICAgICAgICBtb250aCA9IG90aGVyRGF0ZS5tb250aDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBkYXkgPSBvdGhlckRhdGUuZGF5IDwgMSB8fCBvdGhlckRhdGUuZGF5ID4gZGF5c0luTW9udGhbbW9udGggLSAxXSA/IDEgOiBvdGhlckRhdGUuZGF5O1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy51dGlsU2VydmljZS5pc0Rpc2FibGVkRGF0ZSh7IHllYXIsIG1vbnRoLCBkYXkgfSwgdGhpcy5vcHRzKSA/IHRoaXMub3B0cy5kaXNhYmxlU2luY2UgOiB7IHllYXIsIG1vbnRoLCBkYXkgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGRhdGU7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0VGltZShkYXRlOiBhbnkpIHtcclxuICAgICAgICBjb25zdCB7IGRhdGVGb3JtYXQsIG1vbnRoTGFiZWxzLCBkYXRlUmFuZ2VEYXRlc0RlbGltaXRlciwgY2xvc2VTZWxlY3Rvck9uRGF0ZVNlbGVjdCwgcmV0dXJuRm9ybWF0IH0gPSB0aGlzLm9wdHM7XHJcbiAgICAgICAgaWYgKGRhdGUgaW5zdGFuY2VvZiBEYXRlKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdHMuc2hvd1R5cGUgIT09IDQgJiYgIXRoaXMub3B0cy5kYXRlUmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgIGxldCB0YXJnZXREYXRlOiBJTXlEYXRlO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0cy5zaG93VGltZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldERhdGUgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHllYXI6IGRhdGUuZ2V0RnVsbFllYXIoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW9udGg6IGRhdGUuZ2V0TW9udGgoKSArIDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRheTogZGF0ZS5nZXREYXRlKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhvdXI6IGRhdGUuZ2V0SG91cnMoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWludXRlOiBkYXRlLmdldE1pbnV0ZXMoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2Vjb25kOiBkYXRlLmdldFNlY29uZHMoKVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldERhdGUgPSB7IHllYXI6IGRhdGUuZ2V0RnVsbFllYXIoKSwgbW9udGg6IGRhdGUuZ2V0TW9udGgoKSArIDEsIGRheTogZGF0ZS5nZXREYXRlKCkgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVNb2RlbDogSU15RGF0ZU1vZGVsID0gdGhpcy51dGlsU2VydmljZS5nZXREYXRlTW9kZWwoXHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVGb3JtYXQsXHJcbiAgICAgICAgICAgICAgICAgICAgbW9udGhMYWJlbHMsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZVJhbmdlRGF0ZXNEZWxpbWl0ZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuRm9ybWF0XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRlQ2hhbmdlZChkYXRlTW9kZWwsIGNsb3NlU2VsZWN0b3JPbkRhdGVTZWxlY3QpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8g5ZCv55So5ZGo6YCJ5oup5pe2ICDlv6vmjbfmjInpkq7lj4LmlbDkuLrljZXkuKrml6XmnJ9cclxuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVNb2RlbDogSU15RGF0ZU1vZGVsID0gdGhpcy51dGlsU2VydmljZS5nZXREYXRlTW9kZWwoXHJcbiAgICAgICAgICAgICAgICAgICAgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnV0aWxTZXJ2aWNlLmdldE5vd1dlZWtUaW1lKGRhdGUpLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVGb3JtYXQsXHJcbiAgICAgICAgICAgICAgICAgICAgbW9udGhMYWJlbHMsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZVJhbmdlRGF0ZXNEZWxpbWl0ZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuRm9ybWF0XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRlQ2hhbmdlZChkYXRlTW9kZWwsIGNsb3NlU2VsZWN0b3JPbkRhdGVTZWxlY3QpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChkYXRlIGluc3RhbmNlb2YgT2JqZWN0ICYmIHRoaXMub3B0cy5kYXRlUmFuZ2UpIHtcclxuICAgICAgICAgICAgbGV0IHRhcmdldERhdGVSYW5nZTogSU15RGF0ZVJhbmdlO1xyXG4gICAgICAgICAgICBjb25zdCB7IGJlZ2luLCBlbmQgfSA9IGRhdGU7XHJcbiAgICAgICAgICAgIGlmICghYmVnaW4gfHwgIWVuZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdHMuc2hvd1RpbWUpIHtcclxuICAgICAgICAgICAgICAgIHRhcmdldERhdGVSYW5nZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBiZWdpbjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB5ZWFyOiBiZWdpbi5nZXRGdWxsWWVhcigpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtb250aDogYmVnaW4uZ2V0TW9udGgoKSArIDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRheTogYmVnaW4uZ2V0RGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBob3VyOiBiZWdpbi5nZXRIb3VycygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW51dGU6IGJlZ2luLmdldE1pbnV0ZXMoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2Vjb25kOiBiZWdpbi5nZXRTZWNvbmRzKClcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGVuZDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB5ZWFyOiBlbmQuZ2V0RnVsbFllYXIoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW9udGg6IGVuZC5nZXRNb250aCgpICsgMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF5OiBlbmQuZ2V0RGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBob3VyOiBlbmQuZ2V0SG91cnMoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWludXRlOiBlbmQuZ2V0TWludXRlcygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWNvbmQ6IGVuZC5nZXRTZWNvbmRzKClcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0RGF0ZVJhbmdlID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGJlZ2luOiB7IHllYXI6IGJlZ2luLmdldEZ1bGxZZWFyKCksIG1vbnRoOiBiZWdpbi5nZXRNb250aCgpICsgMSwgZGF5OiBiZWdpbi5nZXREYXRlKCkgfSxcclxuICAgICAgICAgICAgICAgICAgICBlbmQ6IHsgeWVhcjogZW5kLmdldEZ1bGxZZWFyKCksIG1vbnRoOiBlbmQuZ2V0TW9udGgoKSArIDEsIGRheTogZW5kLmdldERhdGUoKSB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGVNb2RlbDogSU15RGF0ZU1vZGVsID0gdGhpcy51dGlsU2VydmljZS5nZXREYXRlTW9kZWwoXHJcbiAgICAgICAgICAgICAgICBudWxsLFxyXG4gICAgICAgICAgICAgICAgdGFyZ2V0RGF0ZVJhbmdlLFxyXG4gICAgICAgICAgICAgICAgZGF0ZUZvcm1hdCxcclxuICAgICAgICAgICAgICAgIG1vbnRoTGFiZWxzLFxyXG4gICAgICAgICAgICAgICAgZGF0ZVJhbmdlRGF0ZXNEZWxpbWl0ZXIsXHJcbiAgICAgICAgICAgICAgICByZXR1cm5Gb3JtYXRcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgdGhpcy5kYXRlQ2hhbmdlZChkYXRlTW9kZWwsIGNsb3NlU2VsZWN0b3JPbkRhdGVTZWxlY3QpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUud2Fybign5Y+C5pWw5b+F6aG756ym5ZCI6KaB5rGC77yBJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiJdfQ==