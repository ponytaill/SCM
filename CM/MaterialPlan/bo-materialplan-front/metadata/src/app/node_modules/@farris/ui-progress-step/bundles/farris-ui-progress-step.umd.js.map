{"version":3,"file":"farris-ui-progress-step.umd.js.map","sources":["ng://@farris/ui-progress-step/lib/progress-step.service.ts","ng://@farris/ui-progress-step/lib/progress-step.component.ts","ng://@farris/ui-progress-step/lib/progress-step.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ProgressStepService {\r\n\r\n  constructor() { }\r\n}\r\n","import { Component, OnInit, Input, Output, Directive, TemplateRef, ContentChild,EventEmitter, OnChanges, SimpleChanges } from '@angular/core';\r\n\r\n@Directive({\r\n  selector: '[progressStepItem]'\r\n})\r\nexport class ProgressStepItemTemplateDirective {\r\n  constructor(public template: TemplateRef<any>) {}\r\n}\r\n\r\n@Directive({\r\n  selector: '[progressStepExtend]'\r\n})\r\nexport class ProgressStepExtendTemplateDirective {\r\n  constructor(public template: TemplateRef<any>) {}\r\n}\r\n\r\n\r\nexport interface stepMessage {\r\n  \"id\": string,\r\n  \"title\": string,\r\n  \"icon\"?:string,\r\n  \"status\"?:string,\r\n  \"clickDisable\"?:boolean,\r\n  \"hidden\"?:boolean,\r\n  \"class\"?:string\r\n}\r\nexport interface progressData {\r\n  activeIndex:number,\r\n  stepMessages:stepMessage[]\r\n}\r\n\r\n@Component({\r\n  selector: 'farris-progress-step',\r\n  templateUrl:'./progress-step.component.html',\r\n  styleUrls:[\r\n    './progress-step.component.scss'\r\n  ]\r\n})\r\nexport class ProgressStepComponent implements OnInit, OnChanges {\r\n\r\n  @ContentChild(ProgressStepItemTemplateDirective, {read: TemplateRef}) progressStepTemplate: TemplateRef<any>;\r\n  @ContentChild(ProgressStepExtendTemplateDirective, {read: TemplateRef}) progressStepExtendTmpl: TemplateRef<any>;\r\n\r\n  //è¿åº¦æ¡æ°æ®\r\n  // @Input() stepData:progressData;\r\n\r\n  /**æ¨ªåhorizontalãç«åæåvertical*/\r\n  @Input() direction = 'horizontal';\r\n  /**æ¯å¦éºæ»¡ */\r\n  @Input() fill:boolean = false;\r\n  /**æ¯å¦æ¯æç¹å» */\r\n  @Input() clickable:boolean = false;\r\n  // æ­¥éª¤æ¡æ´ä½æ ·å¼\r\n  @Input() stepsCls='';\r\n  @Input() fHeight:number;\r\n  // æ­¥éª¤æ¡Style,åæ³ [stepStyle]=\"{'max-width':'100px'}\"\r\n  @Input() stepStyle:any;\r\n  @Output('stepClick') stepClick = new EventEmitter();\r\n  \r\n\r\n  @Input() steps: stepMessage[];\r\n  @Input() currentId: string;\r\n  @Input() storedIndexState:boolean = false;\r\n\r\n  _subStepData;\r\n  @Input()\r\n  set subStepData(value){\r\n    this._subStepData = value;\r\n  }\r\n  get subStepData(){\r\n    return this._subStepData;\r\n  }\r\n\r\n  stepMessages: stepMessage[];\r\n  activeIndex:number = 0; //ä»0å¼å§\r\n  currentIndex:number;\r\n\r\n  private innerStepData: progressData;\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  _stepData:progressData;\r\n  @Input()\r\n  set stepData(value){\r\n    // if(value['stepMessages']&&value['stepMessages'].length){\r\n    //   value['stepMessages'].forEach(step => {\r\n    //     //if(typeof step.status === 'undefined'){\r\n    //       step.status = '';\r\n    //     //}\r\n    //   });\r\n    //   this.stepMessages = value['stepMessages'].filter((step) =>{\r\n    //     return !step.hidden;\r\n    //   });\r\n    // }\r\n    // this.activeIndex = value['activeIndex'];\r\n    setTimeout(() => {\r\n      if(value){\r\n        this.stepInit(value);\r\n      }\r\n    });\r\n  }\r\n  get stepData(){\r\n    return this._stepData;\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    // if (changes['stepData'] && this.stepData) {\r\n    //   // if(this.stepData['stepMessages']&&this.stepData['stepMessages'].length){\r\n    //   //   this.stepData['stepMessages'].forEach(step => {\r\n    //   //     //if(typeof step.status === 'undefined'){\r\n    //   //       step.status = '';\r\n    //   //     //}\r\n    //   //   });\r\n    //   //   this.stepMessages = this.stepData['stepMessages'].filter((step) =>{\r\n    //   //     return !step.hidden;\r\n    //   //   });\r\n    //   // }\r\n    //   // this.activeIndex = this.stepData['activeIndex'];\r\n    //   this.stepInit();\r\n    // } else \r\n    if (changes['steps'] || changes['currentId']) {\r\n      if (!this.steps || this.stepData) { return; }\r\n      this.steps.forEach(item => item.status = '');\r\n      this.stepMessages = this.steps.filter(item => !item.hidden);\r\n      let index = this.stepMessages.findIndex(item => item.id === this.currentId);\r\n      this.activeIndex = index === -1 ? 0 : index;\r\n    }\r\n  }\r\n\r\n  /**ç¹å»æä¸æ­¥ */\r\n  listClick(step,index){\r\n    if(this.clickable){\r\n      this.stepClick.emit({'step':step,'index':index});\r\n    }\r\n  }\r\n\r\n  goStep(index){\r\n    if(this.storedIndexState){\r\n      if(this.activeIndex == index){\r\n        this.currentIndex = null;\r\n      }\r\n      else{\r\n        this.currentIndex = index;\r\n      }\r\n    }\r\n    else{\r\n      this.stepMessages.forEach((step, i )=> {\r\n        if(i<index){\r\n          step.status = 'finish';\r\n        }\r\n        else if(i>index){\r\n          step.status = '';\r\n        }\r\n        else{\r\n          step.status = 'active';\r\n        }\r\n      });\r\n      this.activeIndex = index;\r\n    }\r\n    \r\n  }\r\n\r\n  /**ä¸ä¸æ­¥ */\r\n  nextStep(){\r\n    if(this.storedIndexState && this.currentIndex < this.stepMessages.length-1){\r\n      this.currentIndex++;\r\n    }\r\n    if(this.activeIndex < this.stepMessages.length-1){\r\n      this.stepMessages[this.activeIndex].status = 'finish';\r\n      this.stepMessages[this.activeIndex+1].status = 'active';\r\n      this.activeIndex++;\r\n      if(this.storedIndexState){\r\n        this.currentIndex = this.activeIndex;\r\n      }\r\n\r\n    }\r\n    //return this.activeIndex;\r\n  }\r\n  /**ä¸ä¸æ­¥ */\r\n  prevStep(){\r\n    // if(this.storedIndexState && this.currentIndex > 0){\r\n    //   this.currentIndex--;\r\n    // }\r\n    if(this.activeIndex > 0){\r\n    // else if(this.activeIndex > 0 && !this.storedIndexState){\r\n      this.stepMessages[this.activeIndex].status = '';\r\n      this.stepMessages[this.activeIndex-1].status = 'active';\r\n      this.activeIndex--;\r\n      if(this.storedIndexState){\r\n        this.currentIndex = this.activeIndex;\r\n      }\r\n      \r\n    }\r\n    //return this.activeIndex;\r\n  }\r\n\r\n  getCurrentStepIndex(){\r\n    return this.activeIndex;\r\n  }\r\n\r\n  stepInit(data){\r\n    if(data['stepMessages']&&data['stepMessages'].length){\r\n      data['stepMessages'].forEach(step => {\r\n        //if(typeof step.status === 'undefined'){\r\n          step.status = '';\r\n        //}\r\n      });\r\n      this.stepMessages = data['stepMessages'].filter((step) =>{\r\n        return !step.hidden;\r\n      });\r\n    }\r\n    this.activeIndex = data['activeIndex'];\r\n    if(this.storedIndexState){\r\n      this.currentIndex = this.activeIndex;\r\n    }\r\n  }\r\n\r\n  setProgressData(progressData:progressData){\r\n    if(progressData){\r\n      //this.stepData = progressData;\r\n      this.stepInit(progressData);\r\n    }\r\n  }\r\n\r\n  setActiveIndex(num:number){\r\n    let activeNum:number  = (num>= 0 && num < this.stepMessages.length)? num: 0;\r\n    this.activeIndex = activeNum;\r\n    \r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { ProgressStepComponent,ProgressStepItemTemplateDirective,ProgressStepExtendTemplateDirective } from './progress-step.component';\r\nimport { LocaleModule } from '@farris/ui-locale';\r\n\r\n@NgModule({\r\n  declarations: [ProgressStepComponent,ProgressStepItemTemplateDirective,ProgressStepExtendTemplateDirective],\r\n  imports: [\r\n    CommonModule,\r\n    LocaleModule.forRoot()\r\n  ],\r\n  exports: [ProgressStepComponent,ProgressStepItemTemplateDirective,ProgressStepExtendTemplateDirective]\r\n})\r\nexport class ProgressStepModule { }\r\n"],"names":["Injectable","Directive","TemplateRef","EventEmitter","Component","ContentChild","Input","Output","NgModule","CommonModule","LocaleModule"],"mappings":"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"}
