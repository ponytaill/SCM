/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { switchMap, takeUntil } from 'rxjs/operators';
/*
* @Author: 疯狂秀才(lucas huang)
 * @Date: 2018-12-18 18:44:13
 * @LastEditors: 疯狂秀才(Lucas Huang)
 * @LastEditTime: 2019-11-29 08:41:39
 * @Company: Inspur
 * @Version: v0.0.1
 */
import { Component, Input, TemplateRef, Directive, ContentChildren, QueryList, HostListener, Output, EventEmitter, ElementRef, Injector, ViewChild, Optional, Self, NgZone, Renderer2, ViewEncapsulation, ChangeDetectionStrategy, ChangeDetectorRef, HostBinding } from '@angular/core';
import { FarrisTemplateDirective, CommonUtils, IdService, FarrisComponentInstanceService, DebugService } from '@farris/ui-common';
import { ResizeService } from '@farris/ui-common/events';
import { ColumnFormatService } from '@farris/ui-common/column';
import { InputGroupComponent } from '@farris/ui-input-group';
import { LocaleService } from '@farris/ui-locale';
import { PerfectScrollbarComponent } from '@farris/ui-perfect-scrollbar';
import { of, BehaviorSubject, Subject, timer } from 'rxjs';
import { map } from 'rxjs/operators';
import { extend, remove } from 'lodash-es';
import ResizeObserver from 'resize-observer-polyfill';
import { VirtualizedLoaderService } from './virtualized-loader.service';
import { TreetableService } from './treetable.service';
import { SearchHandle } from './search.handle';
import { TTHotkeys } from './hotkeys';
import { FarrisContextMenuDirective } from '@farris/ui-context-menu';
/**
 * 单元格点事件参数
 * @record
 */
export function CellClickParam() { }
if (false) {
    /** @type {?} */
    CellClickParam.prototype.event;
    /** @type {?} */
    CellClickParam.prototype.col;
    /** @type {?} */
    CellClickParam.prototype.node;
}
/**
 * 节点钩选事件
 * @record
 */
export function NodeCheckedParam() { }
if (false) {
    /** @type {?|undefined} */
    NodeCheckedParam.prototype.originalEvent;
    /** @type {?} */
    NodeCheckedParam.prototype.node;
    /** @type {?|undefined} */
    NodeCheckedParam.prototype.nodes;
    /** @type {?} */
    NodeCheckedParam.prototype.instance;
}
/**
 * @record
 */
export function NodeSelectedParam() { }
if (false) {
    /** @type {?|undefined} */
    NodeSelectedParam.prototype.originalEvent;
    /** @type {?} */
    NodeSelectedParam.prototype.node;
    /** @type {?|undefined} */
    NodeSelectedParam.prototype.type;
    /** @type {?|undefined} */
    NodeSelectedParam.prototype.index;
    /** @type {?|undefined} */
    NodeSelectedParam.prototype.parents;
    /** @type {?} */
    NodeSelectedParam.prototype.instance;
}
/** @type {?} */
var NODES_PAGER_COLUMN_FIELD = '__nodespagerbar__';
var TreeTableColumnDirective = /** @class */ (function () {
    function TreeTableColumnDirective() {
    }
    TreeTableColumnDirective.decorators = [
        { type: Directive, args: [{
                    selector: 'tt-column, [tt-column]'
                },] }
    ];
    TreeTableColumnDirective.propDecorators = {
        field: [{ type: Input }],
        title: [{ type: Input }],
        width: [{ type: Input }],
        hAlign: [{ type: Input }],
        align: [{ type: Input }],
        formatter: [{ type: Input }]
    };
    return TreeTableColumnDirective;
}());
export { TreeTableColumnDirective };
if (false) {
    /** @type {?} */
    TreeTableColumnDirective.prototype.field;
    /** @type {?} */
    TreeTableColumnDirective.prototype.title;
    /** @type {?} */
    TreeTableColumnDirective.prototype.width;
    /** @type {?} */
    TreeTableColumnDirective.prototype.hAlign;
    /** @type {?} */
    TreeTableColumnDirective.prototype.align;
    /** @type {?} */
    TreeTableColumnDirective.prototype.formatter;
}
var TreeTableComponent = /** @class */ (function () {
    function TreeTableComponent(ttService, el, resizeSer, renderer, utils, colFormatSer, shortcuts, cdRef, ngZone, injector) {
        var _this = this;
        this.ttService = ttService;
        this.el = el;
        this.resizeSer = resizeSer;
        this.renderer = renderer;
        this.utils = utils;
        this.colFormatSer = colFormatSer;
        this.shortcuts = shortcuts;
        this.cdRef = cdRef;
        this.ngZone = ngZone;
        this.injector = injector;
        this.id = '';
        /**
         * 宽度
         */
        this.width = 500;
        /**
         * 高度
         */
        this.height = 400;
        this.showFilterBar = false;
        /**
         * 显示查询字段
         */
        this.showSearchField = true;
        this.headerHeight = 35;
        /**
         * 表头折行
         */
        this.headerWrap = false;
        /**
         * 行高
         */
        this.rowHeight = 29;
        /**
         * 列信息
         */
        this.columns = [];
        this._groupColumns = [];
        /**
         * 启用多表头
         */
        this.useGroupHeader = false;
        this.fitColumns = true;
        this.autoFitColumns = false;
        this.allColumnsTitle = '所有列';
        /**
         * 显示连接线，默认为 false
         */
        this.showLines = false;
        this.showLinesOnHover = false;
        /**
         * 是否启用多选。 默认为单选
         */
        this.multiSelect = false;
        this.singleSelect = true;
        /**
         * 启用多选后，是否显示checkbox
         */
        this.showCheckbox = false;
        /**
         * 显示边框线
         */
        this.showBorder = true;
        this.showCheckAll = true;
        this.showHeader = true;
        /**
         * 启用斑马线
         */
        this.striped = false;
        /**
         * 启用鼠标划过效果
         */
        this.hovered = true;
        /**
         * 禁用。 禁用时不允许选中行
         */
        this.disabled = false;
        /**
         * 数据加载方式; 默认值 为 all
         * - all: 全部加载
         * - async: 分层加载
         */
        this.loadDataType = 'all';
        /**
         * 固定表头
         */
        this.fixedHeader = false;
        /**
         * 当多选时，选中当前行并钩选
         */
        this.checkOnSelect = false;
        /**
         * 当多选时，钩选并选中当前行
         */
        this.selectOnCheck = false;
        /**
         * 启用多选时，此属性为true 时，仅当前行选中
         */
        this.onlySelectSelf = false;
        /**
         * 启用列宽调整
         */
        this.resizableColumns = true;
        /**
         * 设置为true时自适应父容的尺寸
         */
        this.fit = false;
        /**
         * 启用级联选中功能
         */
        this.cascadeCheck = true;
        /**
         * 向下级联选中
         */
        this.cascadeDown = true;
        /**
         * 向上级联选中
         */
        this.cascadeUp = true;
        /**
         * 空数据时，显示的提示文本
         */
        this.emptyMessage = '暂无数据';
        /**
         * 缩进间距，默认为 16px
         */
        this.indentSpacing = 16;
        /**
         * 单击行选中后，在次点击不会被取消选中状态;
         */
        this.keepSelect = true;
        /**
         * 虚拟加载
         */
        this.virtualized = false;
        /**
         * 仅允许选择叶子节点
         * - default: 应用服务器端传回的设置，如果服务器端没有设置，则与 no 保持一至；
         * - yes: 如果客户端设置为 `yes`, 服务器端的设置失效；
         * - no: 允许选择所有节点；服务器端设置失效
         */
        this.onlySelectLeaf = 'default';
        /**
         * 显示图标
         */
        this.showIcon = false;
        /**
         * 叶子节点图标
         */
        this.leafIcon = 'file';
        /**
         * 节点展开图标
         */
        this.expandIcon = 'folder-open';
        /**
         * 节点折叠图标
         */
        this.collapseIcon = 'folder';
        this.foldIcon = 'treetable-toggler';
        this.unfoldIcon = 'extanded treetable-toggler';
        /**
         * 启用节点图标从数据中获取。 默认为 false
         */
        this.useIconFromData = false;
        /**
         * 当数据源中icon未设置时使用内置ICON. 默认为 true
         */
        this.whenDataIconEmptyUseDefault = true;
        /**
         * 从数据源字段中获取图标
         */
        this.iconField = '';
        /**
         * 启用远端排序
         */
        this.remoteSort = true;
        /**
         * 启用前端文本查找
         */
        this.enableFindText = false;
        // 树列表默认展开层级。 -1： 不展开； 0： 全部展开； >0:  展开到指定级数；
        this.expandLevel = -1;
        this.selectValue = '';
        this.selectValueChange = new EventEmitter();
        /**
         * 启用双击展开节点
         */
        this.dblClickExpand = true;
        /**
         * 选中节点ID数组
         */
        this.selectValues = [];
        this.selectValuesChange = new EventEmitter();
        /**
         * 是否禁止折行，默认不折行
         */
        this.nowrap = true;
        this.checkValues = [];
        this.checkValuesChange = new EventEmitter();
        /**
         * 分页信息
         */
        this.pagination = false;
        /**
         * 分页加载子节点数据
         */
        this.paginationForChildren = false;
        /**
         * 分页条显示模式， default, simple
         */
        this.pagerViewMode = 'default';
        /**
         * 启用服务器端分页
         */
        this.pagerOnServer = true;
        /**
         * 每页记录数
         */
        this.pageList = [10, 20, 30, 50, 100];
        /**
         * 当前页码
         */
        this.pageIndex = 1;
        /**
         * 每页记录数
         */
        this.pageSize = 20;
        /**
         * 分页区高度
         */
        this.pagerHeight = 56;
        /**
         * 显示每页记录数
         */
        this.showPageList = false;
        /**
         * 显示分页信息
         */
        this.showPageInfo = true;
        /**
         * 显示页码
         */
        this.showPageNumber = true;
        /**
         * 显示页码最大数量
         */
        this.pagerLabelSize = 7;
        /**
         * 显示页码输入框
         */
        this.showGotoInput = false;
        /**
         * 子节点分页是否显示总记录数，默认 false
         */
        this.showTotalForChildren = false;
        /**
         * 总记录数
         */
        this.total = 0;
        this.enableContextMenu = false;
        this.contextMenuItems = [];
        this.pageSizeChanged = new EventEmitter();
        this.pageChanged = new EventEmitter();
        /**
         * 排序后
         */
        this.columnSorted = new EventEmitter();
        /**
         * 选中事件
         */
        this.nodeSelected = new EventEmitter();
        /**
         * 取消选中事件
         */
        this.nodeUnSelect = new EventEmitter();
        /**
         * 钩选
         */
        this.nodeChecked = new EventEmitter();
        /**
         * 取消钩选
         */
        this.nodeUnChecked = new EventEmitter();
        /**
         * 全选事件
         */
        this.checkAll = new EventEmitter();
        /**
         * 取消全选
         */
        this.unCheckAll = new EventEmitter();
        /**
         * 查询
         */
        this.search = new EventEmitter();
        this.dblClick = new EventEmitter();
        this.loadedData = new EventEmitter();
        this.expand = new EventEmitter();
        this.collapse = new EventEmitter();
        this.expandAllNodes = new EventEmitter();
        this.collapseAllNodes = new EventEmitter();
        this.appendNew = new EventEmitter();
        this.removed = new EventEmitter();
        this.updated = new EventEmitter();
        this.clearSearchValue = new EventEmitter();
        this.cellClick = new EventEmitter();
        this.childsPageChanged = new EventEmitter();
        this.searchValueChange = new EventEmitter();
        this.loadedTimer = 100;
        this._data = [];
        // loaddata 时 先设置为空数组，
        this.isLoadNewDataSetEmpty = false;
        /**
         * 根据内容自动宽度，默认 false;
         * 此属性开启后，自动列宽失效
         */
        this.autoWidth = false;
        /**
         * 选中项集合
         */
        this._selections = [];
        /**
         * 选中项索引
         */
        this.selectRowIndex = -1;
        /**
         * 选中当前行
         */
        this._selectedRow = null;
        /**
         * 钩选的记录集合
         */
        this._checkeds = [];
        this.searchData = { field: '*', value: '' };
        this.searchButtonText = '<i class="f-icon f-icon-search"></i>';
        /**
         * 显示查询工具条
         */
        this.showFindInput = false;
        this.isDataChanged = false;
        this.topHideHeight = 0;
        this.bottomHideHeight = 0;
        this.state = {
            searchRowNodes: null,
            searched: false,
            rowNodes: [],
            scrollY: 0,
            scrollX: 0
        };
        /**
         * 待查询的文本
         */
        this.findValue = '';
        /**
         * 结果总数
         */
        this.findCount = 0;
        /**
         * 当前索引
         */
        this.findCurrent = 0;
        /**
         * 存储文本查询结果
         */
        this.findResult = [];
        this.ro = null;
        this.findKeysHandler = null;
        this._hotKeys = null;
        this.styleSheetId = 'treetable-style-';
        // 调整模板，此属性仅为帮助中的树组件
        this.fast = false;
        this.paginationOptions = {
            id: 'Farris-TreeTable-Pagination_',
            itemsPerPage: this.pageSize,
            currentPage: this.pageIndex,
            pageList: this.pageList,
            totalItems: this.total,
            remote: this.pagerOnServer
        };
        this.selectNodeChangedSubject = new BehaviorSubject(null);
        this._UUID = '';
        // 是否有固定列
        this.fixedColumns = false;
        this.destroy$ = new Subject();
        this.farrisInstances = null;
        this.difference = (/**
         * @param {?} first
         * @param {?} second
         * @return {?}
         */
        function (first, second) { return first.filter((/**
         * @param {?} item
         * @return {?}
         */
        function (item) { return !second.some((/**
         * @param {?} secondItem
         * @return {?}
         */
        function (secondItem) { return secondItem == item; })); })); });
        this.debugSer = null;
        this.onBeforeShowContextMenu = (/**
         * @param {?} e
         * @return {?}
         */
        function (e) {
            // row_1_fixedleft  row_1  row_1_fixedright
            var contextMenuDom = e.contextMenuDom, event = e.event;
            /** @type {?} */
            var rowID = event.target.id;
            if (contextMenuDom) {
                rowID = _this.trId2DataId(contextMenuDom);
                /** @type {?} */
                var rowNode_1 = _this.findRowNode(rowID);
                /** @type {?} */
                var go$ = of({ show: true });
                if (_this.beforeShowContextMenu) {
                    go$ = _this.beforeShowContextMenu({ data: rowNode_1, tree: _this });
                }
                return go$.pipe(switchMap((/**
                 * @param {?} r
                 * @return {?}
                 */
                function (r) {
                    if (r.show) {
                        if (r.menus) {
                            _this.contextMenuItems = r.menus;
                            _this.detectChanges();
                        }
                        /** @type {?} */
                        var viewportW = contextMenuDom.closest('.farris-treetable').offsetWidth;
                        /** @type {?} */
                        var targetW = contextMenuDom.offsetWidth;
                        /** @type {?} */
                        var focusTargetWidth = viewportW > targetW ? targetW : viewportW;
                        return of({ show: true, data: { data: rowNode_1, tree: _this }, focusTargetWidth: focusTargetWidth });
                    }
                    else {
                        return of({ show: false });
                    }
                })));
            }
            return of({ show: false });
        });
        this.searchHandle = new SearchHandle(this);
        this.scrollLoader = new VirtualizedLoaderService(this);
        if (this.injector) {
            this._hotKeys = this.injector.get(TTHotkeys, null);
            this.localeService = this.injector.get(LocaleService, null);
            this.idService = this.injector.get(IdService, null);
            this.farrisInstances = this.injector.get(FarrisComponentInstanceService, null);
        }
        if (this.idService) {
            this._UUID = this.idService.uuid();
            this.styleSheetId += this.idService.uuid();
        }
        else {
            this._UUID = ('' + Math.random()).slice(2);
            this.styleSheetId += ('' + Math.random()).slice(2);
        }
        this.ttService = new TreetableService();
        this.debugSer = this.injector.get(DebugService, null);
        if (this.debugSer) {
            this.debugSer.useDebugMode();
        }
    }
    Object.defineProperty(TreeTableComponent.prototype, "groupColumns", {
        get: /**
         * @return {?}
         */
        function () {
            return this._groupColumns;
        },
        set: /**
         * @param {?} cols
         * @return {?}
         */
        function (cols) {
            this._groupColumns = cols || [];
            /** @type {?} */
            var _columns = this.ttService.checkColumnsForGroupHeader(cols.map((/**
             * @param {?} cs
             * @return {?}
             */
            function (cs) { return tslib_1.__spread(cs); })), this).columns;
            this.columns = _columns.filter((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return n.field; }));
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TreeTableComponent.prototype, "data", {
        get: /**
         * @return {?}
         */
        function () {
            return this._data;
        },
        set: /**
         * @param {?} val
         * @return {?}
         */
        function (val) {
            this._data = val;
            this.updateSerializedValue();
            if (!this.isLoadNewDataSetEmpty) {
                this.initNodeStatus();
            }
            // autowidth 时，表头宽度依据内容宽度作同步处理
            this.setNewColumnsWidth();
            this.loadDataSuccess();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TreeTableComponent.prototype, "allCheckbox", {
        set: /**
         * @param {?} content
         * @return {?}
         */
        function (content) {
            this.headerCheckboxCmp = content;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TreeTableComponent.prototype, "selections", {
        get: /**
         * @return {?}
         */
        function () {
            return this._selections;
        },
        set: /**
         * @param {?} vals
         * @return {?}
         */
        function (vals) {
            var _this = this;
            if (vals && vals.length) {
                // 过滤掉数据源中不存在节点
                this._selections = vals.filter((/**
                 * @param {?} tn
                 * @return {?}
                 */
                function (tn) { return tn && _this.findRowNode(tn.id); }));
                /** @type {?} */
                var ids_1 = this._selections.map((/**
                 * @param {?} tn
                 * @return {?}
                 */
                function (tn) { return tn.id; }));
                if (ids_1.length !== this.selectValues.length ||
                    (ids_1.length === this.selectValues.length && this.difference(ids_1, this.selectValues).length)) {
                    this.selectValues = ids_1;
                    setTimeout((/**
                     * @return {?}
                     */
                    function () {
                        _this.selectValuesChange.emit(ids_1);
                    }));
                }
            }
            else {
                this._selections = [];
                this.selectValues = [];
                this.selectValuesChange.emit([]);
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TreeTableComponent.prototype, "selectedRow", {
        get: /**
         * @return {?}
         */
        function () {
            return this._selectedRow;
        },
        set: /**
         * @param {?} treeNode
         * @return {?}
         */
        function (treeNode) {
            this._selectedRow = treeNode;
            if (treeNode) {
                if (this.selectValue !== treeNode.id) {
                    this.selectValue = treeNode.id;
                    this.selectValueChange.emit(treeNode.id);
                }
            }
            else {
                this.selectValue = null;
                this.selectValueChange.emit(null);
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TreeTableComponent.prototype, "checkeds", {
        get: /**
         * @return {?}
         */
        function () {
            return this._checkeds;
        },
        set: /**
         * @param {?} treeNodes
         * @return {?}
         */
        function (treeNodes) {
            var _this = this;
            if (treeNodes && treeNodes.length) {
                this._checkeds = treeNodes.filter((/**
                 * @param {?} tn
                 * @return {?}
                 */
                function (tn) { return _this.findRowNode(tn.id); }));
                /** @type {?} */
                var ids_2 = this._checkeds.map((/**
                 * @param {?} tn
                 * @return {?}
                 */
                function (tn) { return tn.id; }));
                this.checkValues = this.checkValues || [];
                if (ids_2.length !== this.checkValues.length || (ids_2.length === this.checkValues.length && this.difference(ids_2, this.checkValues).length)) {
                    this.checkValues = ids_2;
                    setTimeout((/**
                     * @return {?}
                     */
                    function () {
                        _this.checkValuesChange.emit(ids_2);
                    }));
                }
            }
            else {
                this._checkeds = [];
                this.checkValues = [];
                this.checkValuesChange.emit([]);
            }
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} msg
     * @param {?=} type
     * @return {?}
     */
    TreeTableComponent.prototype.writeConsole = /**
     * @param {?} msg
     * @param {?=} type
     * @return {?}
     */
    function (msg, type) {
        if (type === void 0) { type = 'warn'; }
        if (this.debugSer) {
            this.debugSer[type](msg);
        }
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableComponent.prototype.checkOptons = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        // 启用数据折行后，虚拟渲染功能失效
        if (!this.nowrap) {
            this.virtualized = false;
        }
        setTimeout((/**
         * @return {?}
         */
        function () {
            _this.reSetSize();
            _this.setScorllBodyHeight();
        }));
        if (this.multiSelect) {
            this.singleSelect = false;
        }
        if (this.singleSelect && this.showCheckbox) {
            this.checkOnSelect = true;
            this.selectOnCheck = true;
        }
        if (!this.beforeSortColumn) {
            this.beforeSortColumn = (/**
             * @return {?}
             */
            function () { return of(true); });
        }
        if (this.fit) {
            this.renderer.addClass(this.el.nativeElement, 'f-utils-fill-flex-column');
            /** @type {?} */
            var parentEl = this.el.nativeElement.parentElement || this.el.nativeElement.parentNode;
            if (parentEl) {
                // this.renderer.addClass(parentEl, 'f-utils-fill');
                this.renderer.setStyle(parentEl, 'overflow', 'hidden');
            }
        }
        if (!this.beforeClickNode) {
            this.beforeClickNode = (/**
             * @return {?}
             */
            function () { return of(true); });
        }
        if (!this.beforeCheckAll) {
            this.beforeCheckAll = (/**
             * @return {?}
             */
            function () { return of(true); });
        }
        if (!this.beforeUnCheckAll) {
            this.beforeUnCheckAll = (/**
             * @return {?}
             */
            function () { return of(true); });
        }
        if (this.autoWidth) {
            this.fitColumns = false;
            this.resizableColumns = false;
        }
        if (!this.disabledRow) {
            this.disabledRow = (/**
             * @return {?}
             */
            function () { return false; });
        }
    };
    /**
     * @return {?}
     */
    TreeTableComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.id = 'Treetable-' + this._UUID;
        // 创建 stylesheet
        this.styleElement = this.utils.createStyleSheet(this.styleSheetId);
        this.checkColumnOption();
        this.checkOptons();
        if (this.ngZone) {
            this.ngZone.runOutsideAngular((/**
             * @return {?}
             */
            function () {
                if (_this.el.nativeElement.parentElement) {
                    _this.ro = new ResizeObserver((/**
                     * @param {?} entries
                     * @param {?} observer
                     * @return {?}
                     */
                    function (entries, observer) {
                        if (entries && entries[0]) {
                            var _a = entries[0].contentRect, width = _a.width, height = _a.height;
                            /** @type {?} */
                            var target = entries[0].target;
                            if (_this.fit && target['offsetParent']) {
                                _this.resize({ width: width, height: _this.showBorder ? height - 2 : height });
                            }
                        }
                    }));
                    _this.ro.observe(_this.el.nativeElement.parentElement);
                }
            }));
        }
        this.paginationOptions = this.initPaginationOptions();
    };
    /**
     * @return {?}
     */
    TreeTableComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        if (this.ro) {
            if (this.el.nativeElement.parentElement) {
                this.ro.unobserve(this.el.nativeElement.parentElement);
            }
            this.ro.disconnect();
            this.ro = null;
        }
        if (this.findKeysHandler) {
            this.findKeysHandler.unsubscribe();
        }
        this.utils.removeStyleSheet(this.styleSheetId);
        this.styleElement = null;
        if (this.farrisInstances) {
            this.farrisInstances.destroy(this.el.nativeElement);
        }
        this.ttService = null;
        this.destroy$.next();
        this.destroy$.complete();
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    TreeTableComponent.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        if (changes.data && !changes.data.isFirstChange()) {
            this.isDataChanged = changes.data.currentValue !== changes.data.previousValue;
        }
        if (changes.multiSelect && !changes.multiSelect.isFirstChange()) {
            this.singleSelect = !changes.multiSelect.currentValue;
            if (this.singleSelect && this.showCheckbox) {
                this.selectOnCheck = true;
                this.checkOnSelect = true;
            }
        }
        if (changes.disabled && !changes.disabled.isFirstChange()) {
            this.hovered = !changes.disabled.currentValue;
        }
        if (changes.enableFindText && !changes.enableFindText.isFirstChange()) {
            this.setFindText(changes.enableFindText.currentValue);
        }
        if (changes.selectValue && !changes.selectValue.isFirstChange()) {
            this.selectNode(changes.selectValue.currentValue);
        }
        if (changes.selectValues && !changes.selectValues.isFirstChange()) {
            this.selectNodes(changes.selectValues.currentValue);
        }
        if (changes.checkValues && !changes.checkValues.isFirstChange()) {
            this.checkedNodes(changes.checkValues.currentValue);
        }
        if (changes.pageIndex !== undefined && !changes.pageIndex.isFirstChange()) {
            this.paginationOptions = Object.assign(this.paginationOptions, {
                currentPage: this.pageIndex
            });
        }
        if (changes.pageSize !== undefined && !changes.pageSize.isFirstChange()) {
            this.paginationOptions = Object.assign(this.paginationOptions, {
                itemsPerPage: this.pageSize
            });
        }
        if (changes.pageList !== undefined && !changes.pageList.isFirstChange()) {
            this.paginationOptions = Object.assign(this.paginationOptions, {
                pageList: this.pageList
            });
        }
        if (changes.total !== undefined && !changes.total.isFirstChange()) {
            this.paginationOptions = Object.assign(this.paginationOptions, {
                totalItems: this.total
            });
        }
        if (changes.fitColumns && !changes.fitColumns.isFirstChange()) {
            this.setTableWidth(this.allColumnsWidth());
        }
        if (changes.columns && !changes.columns.isFirstChange()) {
            this.checkColumnOption();
        }
        if (changes.showBorder && !changes.showBorder.isFirstChange()) {
            // this.reSetSize();
        }
    };
    /**
     * @return {?}
     */
    TreeTableComponent.prototype.ngAfterViewChecked = /**
     * @return {?}
     */
    function () {
        // if (this.isDataChanged) {
        //     this.loadedData.emit();
        //     this.isDataChanged = false;
        // } else {
        //     this.ngZone.runOutsideAngular(() => {
        //         if (this.psRef) {
        //             this.psRef.directiveRef.update();
        //         }
        //     });
        // }
    };
    /**
     * @return {?}
     */
    TreeTableComponent.prototype.ngAfterContentInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.templates.forEach((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            switch (item.getType()) {
                case 'header':
                    _this.headerTemplate = item.template;
                    break;
                case 'body':
                    _this.bodyTemplate = item.template;
                    break;
            }
        }));
        if (this.columnsRef.length) {
            this.columns = this.ttc2columns(this.columnsRef);
            this.columnsRef.changes.subscribe((/**
             * @param {?} d
             * @return {?}
             */
            function (d) {
                _this.columns = _this.ttc2columns(d);
            }));
        }
    };
    /**
     * @return {?}
     */
    TreeTableComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        this.containerElement = this.el.nativeElement.querySelector('.farris-treetable');
        this.registerShortcuts();
        // autowidth 时，表头宽度依据内容宽度作同步处理
        this.setNewColumnsWidth();
        this.setRightFixedColumnShadow();
        if (this.el && this.farrisInstances) {
            this.farrisInstances.add(this.el.nativeElement, this);
        }
        if (this.bodyTemplate) {
            this.utils.appendCssRules(["#" + this.id + " .farris-treetable .farris-treetable-tbody td {padding: .25rem 0.75rem;}"], this.styleElement.sheet);
        }
        // 兼容旧版设计器        
        if (this.fit && this.el.nativeElement.parentElement.nodeName !== 'DIV') {
            if (this.el.nativeElement.parentElement.nodeName === 'APP-DG-TREE-GRID') {
                /** @type {?} */
                var div = this.el.nativeElement.parentElement.closest('div');
                if (div) {
                    div.style.overflow = 'hidden';
                }
            }
        }
        this.loadDataSuccess();
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableComponent.prototype.loadDataSuccess = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        timer(this.loadedTimer).pipe(takeUntil(this.destroy$)).subscribe((/**
         * @return {?}
         */
        function () {
            if (_this.psRef && _this.psRef.directiveRef) {
                _this.psRef.directiveRef.update();
            }
            _this.loadedData.emit();
        }));
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableComponent.prototype.setNewColumnsWidth = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (!this.autoWidth) {
            return;
        }
        /** @type {?} */
        var newColWidth = {};
        /** @type {?} */
        var headerCells = [];
        /** @type {?} */
        var firstRowCells = [];
        // let colgroups = [];
        if (this.showHeader && this.headerTable) {
            headerCells = Array.from(this.headerTable.nativeElement.querySelectorAll('th'));
        }
        if (this.serializedValue && this.serializedValue.length && this.bodyTable) {
            firstRowCells = Array.from(this.bodyTable.nativeElement.querySelector('tr').querySelectorAll('td'));
            // colgroups = this.bodyTable.nativeElement.querySelector('colgroup').querySelectorAll('col');
        }
        firstRowCells.forEach((/**
         * @param {?} td
         * @param {?} index
         * @return {?}
         */
        function (td, index) {
            /** @type {?} */
            var fieldName = td.getAttribute('field');
            /** @type {?} */
            var colWidth = td.getBoundingClientRect().width.toFixed(2);
            newColWidth[fieldName] = colWidth;
            /** @type {?} */
            var col = _this.columns.find((/**
             * @param {?} c
             * @return {?}
             */
            function (c) { return c.field === fieldName; }));
            if (col && col.width !== undefined) {
                colWidth = colWidth > col.width ? colWidth : col.width;
            }
            td.style.minWidth = colWidth + 'px';
            headerCells[index].style.width = colWidth + 'px';
        }));
    };
    /**
     * @param {?} col
     * @return {?}
     */
    TreeTableComponent.prototype.columnIsVisible = /**
     * @param {?} col
     * @return {?}
     */
    function (col) {
        return this.ttService.columnIsVisible(col, this);
    };
    /**
     * @private
     * @param {?} n
     * @return {?}
     */
    TreeTableComponent.prototype.columnCssName = /**
     * @private
     * @param {?} n
     * @return {?}
     */
    function (n) {
        return "#" + this.id + " .treetable-cell[field=\"" + n.field + "\"], #" + this.id + " .treetable-header-cell[field=\"" + n.field + "\"]:not(.group-header-cell)";
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableComponent.prototype.checkGroupColumns = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var i = this.groupColumns.length - 1;
        while (i >= 0) {
            /** @type {?} */
            var ids = this.groupColumns[i].map((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return n.parentId; }));
            ids = Array.from(new Set(ids));
            ids.map((/**
             * @param {?} id
             * @return {?}
             */
            function (id) {
                /** @type {?} */
                var childCols = _this.groupColumns[i].filter((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) { return n.parentId == id; })).map((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) {
                    /** @type {?} */
                    var dataField = _this.columns.find((/**
                     * @param {?} c
                     * @return {?}
                     */
                    function (c) { return c.id === n.id; }));
                    return dataField || n;
                }));
                return {
                    id: id,
                    width: childCols.reduce((/**
                     * @param {?} r
                     * @param {?} c
                     * @return {?}
                     */
                    function (r, c) { return r += c.width; }), 0),
                    left: childCols[0].left,
                    right: childCols[childCols.length - 1].right || 0
                };
            })).forEach((/**
             * @param {?} p
             * @return {?}
             */
            function (p) {
                if (i - 1 >= 0) {
                    /** @type {?} */
                    var pCol = _this.groupColumns[i - 1].find((/**
                     * @param {?} pc
                     * @return {?}
                     */
                    function (pc) { return pc.id == p.id; }));
                    /** @type {?} */
                    var dataField = _this.columns.find((/**
                     * @param {?} c
                     * @return {?}
                     */
                    function (c) { return c.id === p.id; }));
                    pCol = dataField || pCol;
                    pCol.width = p.width;
                    if (pCol.fixed === 'left') {
                        pCol.left = p.left;
                    }
                    if (pCol.fixed === 'right') {
                        pCol.right = p.right;
                    }
                }
            }));
            i--;
        }
    };
    // 按固定列的顺序排序
    // 按固定列的顺序排序
    /**
     * @private
     * @param {?=} updateColumns
     * @return {?}
     */
    TreeTableComponent.prototype.sortColumnsByFixed = 
    // 按固定列的顺序排序
    /**
     * @private
     * @param {?=} updateColumns
     * @return {?}
     */
    function (updateColumns) {
        if (updateColumns === void 0) { updateColumns = true; }
        /** @type {?} */
        var fixedLeft = this.columns.filter((/**
         * @param {?} n
         * @return {?}
         */
        function (n) { return n.fixed === 'left'; }));
        /** @type {?} */
        var fixedCenter = this.columns.filter((/**
         * @param {?} n
         * @return {?}
         */
        function (n) { return !n.fixed || n.fixed === 'center'; }));
        /** @type {?} */
        var fixedRight = this.columns.filter((/**
         * @param {?} n
         * @return {?}
         */
        function (n) { return n.fixed === 'right'; }));
        if (fixedLeft && fixedLeft.length) {
            fixedLeft.forEach((/**
             * @param {?} n
             * @param {?} index
             * @return {?}
             */
            function (n, index) {
                if (index) {
                    n.left = fixedLeft.reduce((/**
                     * @param {?} r
                     * @param {?} c
                     * @param {?} i
                     * @return {?}
                     */
                    function (r, c, i) {
                        if (i < index) {
                            return r += c.width;
                        }
                        return r;
                    }), 0);
                }
                else {
                    n.left = 0;
                }
            }));
        }
        if (fixedRight && fixedRight.length) {
            /** @type {?} */
            var rightWidthTotal_1 = fixedRight.reduce((/**
             * @param {?} r
             * @param {?} c
             * @return {?}
             */
            function (r, c) {
                return r + c.width;
            }), 0);
            fixedRight.forEach((/**
             * @param {?} n
             * @param {?} index
             * @return {?}
             */
            function (n, index) {
                rightWidthTotal_1 -= n.width;
                n.right = rightWidthTotal_1;
            }));
        }
        if (updateColumns) {
            this.columns = fixedLeft.concat(fixedCenter).concat(fixedRight);
        }
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableComponent.prototype.checkColumnOption = /**
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var cssRules = [];
        // 启用分页加载子节点
        if (this.paginationForChildren) {
            /** @type {?} */
            var pagerBarCol = {
                field: NODES_PAGER_COLUMN_FIELD,
                width: 160,
                title: '',
                align: 'center',
                template: this.nodesPagerBar,
                rowspan: 1,
            };
            if (this.useGroupHeader) {
                if (this.groupColumns[0][this.groupColumns[0].length - 1].fixed === 'right') {
                    pagerBarCol.fixed = 'right';
                }
                pagerBarCol.rowspan = this.groupColumns.length;
                this.groupColumns[0].push(pagerBarCol);
            }
            this.columns.push(pagerBarCol);
        }
        if (!this.fitColumns) {
            this.sortColumnsByFixed();
        }
        this.columns.forEach((/**
         * @param {?} n
         * @param {?} i
         * @return {?}
         */
        function (n, i) {
            if (n.visible === undefined) {
                n.visible = true;
            }
            if (n['halign']) {
                n.hAlign = n['halign'];
            }
            if (n.width === undefined) {
                n.width = 100;
            }
            if (!n.id) {
                n.id = 'treetable-header-' + (n.field || i);
            }
        }));
        /** @type {?} */
        var colWidthTotal = this.allColumnsWidth();
        /** @type {?} */
        var fixedCols = 0;
        /** @type {?} */
        var fixedRightColumns = this.columns.filter((/**
         * @param {?} n
         * @return {?}
         */
        function (n) { return n.fixed === 'right'; }));
        if (fixedRightColumns && fixedRightColumns.length) {
            fixedRightColumns[0]['rightShadowCol'] = true;
            fixedRightColumns[fixedRightColumns.length - 1]['lastColumn'] = true;
        }
        else {
            if (this.columns && this.columns.length) {
                this.columns[this.columns.length - 1]['lastColumn'] = true;
            }
        }
        /** @type {?} */
        var fixedLeftColumns = this.columns.filter((/**
         * @param {?} n
         * @return {?}
         */
        function (n) { return n.fixed === 'left'; }));
        if (fixedLeftColumns && fixedLeftColumns.length) {
            fixedLeftColumns[fixedLeftColumns.length - 1]['leftShadowCol'] = true;
        }
        fixedCols = this.setCellWidthCss(colWidthTotal, fixedCols, cssRules);
        this.setTableWidth(colWidthTotal);
        this.fixedColumns = !!fixedCols;
    };
    /**
     * @private
     * @param {?} colWidthTotal
     * @param {?} fixedCols
     * @param {?} cssRules
     * @return {?}
     */
    TreeTableComponent.prototype.setCellWidthCss = /**
     * @private
     * @param {?} colWidthTotal
     * @param {?} fixedCols
     * @param {?} cssRules
     * @return {?}
     */
    function (colWidthTotal, fixedCols, cssRules) {
        var _this = this;
        this.columns.forEach((/**
         * @param {?} n
         * @param {?} index
         * @return {?}
         */
        function (n, index) {
            /** @type {?} */
            var isVisible = _this.columnIsVisible(n);
            /** @type {?} */
            var ruleName = _this.columnCssName(n);
            /** @type {?} */
            var cssRule = _this.utils.getCssRule(ruleName, _this.styleElement.sheet);
            if (!cssRule) {
                /** @type {?} */
                var stylecss = ruleName + ' { ';
                stylecss += isVisible ? '' : 'display: none;';
                if (_this.fitColumns) {
                    stylecss += "width: " + (n.width / colWidthTotal * 100).toFixed(2) + "%;";
                }
                else {
                    stylecss += "width: " + n.width + "px;";
                    if (n.fixed) {
                        if (n.fixed === 'left') {
                            stylecss += "left: " + n.left + "px";
                            fixedCols++;
                        }
                        if (n.fixed === 'right') {
                            stylecss += "right: " + n.right + "px";
                            fixedCols++;
                        }
                    }
                }
                stylecss += '}';
                cssRules.push(stylecss);
            }
            else {
                cssRule.style.display = isVisible ? '' : 'none';
                if (_this.fitColumns) {
                    cssRule.style.width = (n.width / colWidthTotal * 100).toFixed(2) + "%";
                }
                else {
                    cssRule.style.width = n.width + "px";
                    if (n.fixed) {
                        if (n.fixed === 'left') {
                            cssRule.style.left = n.left + "px";
                        }
                        if (n.fixed === 'right') {
                            cssRule.style.right = n.right + "px";
                        }
                    }
                }
            }
        }));
        if (this.useGroupHeader) {
            this.autoWidth = false; // 多表头启用后，自动列宽失效 TFS 496088
            this.checkGroupColumns();
            /** @type {?} */
            var i = this.groupColumns.length - 2;
            while (i >= 0) {
                /** @type {?} */
                var groupHeaderColCsses = this.groupColumns[i].filter((/**
                 * @param {?} col
                 * @return {?}
                 */
                function (col) { return !col.field; })).map((/**
                 * @param {?} col
                 * @return {?}
                 */
                function (col) {
                    /** @type {?} */
                    var groupColCssName = "#" + col.id + "{ width: " + col.width + "px";
                    if (col.fixed) {
                        if (col.fixed === 'left') {
                            groupColCssName += ';left:' + col.left + 'px';
                        }
                        if (col.fixed === 'right') {
                            groupColCssName += ';right:' + col.right + 'px';
                        }
                    }
                    return groupColCssName += '}';
                }));
                this.utils.appendCssRules2(groupHeaderColCsses, this.styleElement.sheet);
                i--;
            }
        }
        if (cssRules.length) {
            this.utils.appendCssRules(cssRules, this.styleElement.sheet);
        }
        return fixedCols;
    };
    /**
     * @private
     * @param {?} colWidthTotal
     * @return {?}
     */
    TreeTableComponent.prototype.setTableWidth = /**
     * @private
     * @param {?} colWidthTotal
     * @return {?}
     */
    function (colWidthTotal) {
        if (this.headerTable && this.bodyTable) {
            if (!this.fitColumns && !this.autoFitColumns) {
                this.headerTable.nativeElement.style.width = colWidthTotal + "px";
                this.bodyTable.nativeElement.style.width = colWidthTotal + "px";
            }
            else {
                this.headerTable.nativeElement.style.width = '100%';
                this.bodyTable.nativeElement.style.width = '100%';
            }
        }
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableComponent.prototype.allColumnsWidth = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        return this.columns.reduce((/**
         * @param {?} r
         * @param {?} c
         * @return {?}
         */
        function (r, c) {
            if (_this.columnIsVisible(c)) {
                return r + c.width;
            }
            else {
                return r;
            }
        }), 0);
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    TreeTableComponent.prototype.onPageChange = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        this.pageChanged.emit($event);
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    TreeTableComponent.prototype.onPageSizeChange = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        this.pageSizeChanged.emit($event);
    };
    /**
     * @param {?} pageInfo
     * @return {?}
     */
    TreeTableComponent.prototype.updatePageInfo = /**
     * @param {?} pageInfo
     * @return {?}
     */
    function (pageInfo) {
        if (pageInfo && Object.keys(pageInfo).length) {
            /** @type {?} */
            var obj = {};
            if (pageInfo.total !== undefined) {
                obj.totalItems = pageInfo.total;
            }
            if (pageInfo.pageIndex !== undefined) {
                obj.currentPage = pageInfo.pageIndex;
            }
            if (pageInfo.pageSize !== undefined) {
                obj.itemsPerPage = pageInfo.pageSize;
            }
            if (pageInfo.pageList !== undefined) {
                obj.pageList = pageInfo.pageList;
            }
            this.paginationOptions = Object.assign(this.paginationOptions, obj);
        }
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableComponent.prototype.initPaginationOptions = /**
     * @private
     * @return {?}
     */
    function () {
        return {
            id: 'Farris-TreeTable-Pagination_' + this._UUID,
            itemsPerPage: this.pageSize,
            currentPage: this.pageIndex,
            pageList: this.pageList,
            totalItems: this.total,
            remote: this.pagerOnServer
        };
    };
    /**
     * @param {?} col
     * @param {?} rowdata
     * @param {?=} fast
     * @return {?}
     */
    TreeTableComponent.prototype.getNodeText = /**
     * @param {?} col
     * @param {?} rowdata
     * @param {?=} fast
     * @return {?}
     */
    function (col, rowdata, fast) {
        if (fast === void 0) { fast = false; }
        if (col.isMultilingualField) {
            /** @type {?} */
            var val = this.utils.getValue(col.field, rowdata);
            if (this.localeService) {
                /** @type {?} */
                var localeId = this.localeService.localeId || 'zh-CHS';
                if (val && typeof val === 'object' && Object.keys(val).length > 0) {
                    return val[localeId];
                }
                else {
                    return val;
                }
            }
        }
        else {
            return this.utils.getValue(col.field, rowdata, !fast);
        }
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableComponent.prototype.initNodeStatus = /**
     * @private
     * @return {?}
     */
    function () {
        if (!this.singleSelect) {
            if (this.checkValues && this.checkValues.length) {
                this.checkedNodes(this.checkValues, false, false);
            }
            if (this.selectValues && this.selectValues.length && !this.onlySelectSelf) {
                this.selectNodes(this.selectValues, false, false);
            }
        }
        else {
            if (this.selectValue) {
                this.selectNode(this.selectValue, false);
            }
        }
    };
    /** 注册快捷键 */
    /**
     * 注册快捷键
     * @private
     * @return {?}
     */
    TreeTableComponent.prototype.registerShortcuts = /**
     * 注册快捷键
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.showFilterBar && this._hotKeys) {
            this._hotKeys.addShortcut({ keys: 'enter', element: this.inputGroup.textbox.nativeElement }).subscribe((/**
             * @return {?}
             */
            function () {
                _this.onSearch();
            }));
        }
        this.setFindText(this.enableFindText);
    };
    /**
     * @private
     * @param {?=} enable
     * @return {?}
     */
    TreeTableComponent.prototype.setFindText = /**
     * @private
     * @param {?=} enable
     * @return {?}
     */
    function (enable) {
        var _this = this;
        if (enable === void 0) { enable = true; }
        this.enableFindText = enable;
        if (this.enableFindText && this._hotKeys) {
            // 查询工具条
            this.findKeysHandler = this._hotKeys.addShortcut({ keys: 'control.shift.f' }).subscribe((/**
             * @param {?} e
             * @return {?}
             */
            function (e) {
                if (_this.enableFindText) {
                    _this.showFindInput = true;
                    _this.detectChanges();
                }
            }));
        }
        else {
            if (this.showFindInput) {
                this.showFindInput = false;
                this.cdRef.detectChanges();
            }
            if (this.findKeysHandler) {
                this.findKeysHandler.unsubscribe();
                this.findKeysHandler = null;
            }
        }
    };
    /**
     * @private
     * @param {?} rowNode
     * @param {?=} field
     * @param {?=} clsType
     * @return {?}
     */
    TreeTableComponent.prototype.getCustomCls = /**
     * @private
     * @param {?} rowNode
     * @param {?=} field
     * @param {?=} clsType
     * @return {?}
     */
    function (rowNode, field, clsType) {
        if (field === void 0) { field = ''; }
        if (clsType === void 0) { clsType = 'row'; }
        /** @type {?} */
        var cls = {};
        /** @type {?} */
        var fn = this.rowStyler;
        if (clsType === 'cell') {
            fn = this.cellStyler;
        }
        if (fn) {
            /** @type {?} */
            var rowCls = fn(rowNode.node, field);
            if (rowCls) {
                /** @type {?} */
                var arrcls = [];
                if (typeof rowCls === 'string') {
                    arrcls = [rowCls];
                }
                else {
                    if (Array.isArray(rowCls)) {
                        arrcls = rowCls;
                    }
                }
                if (arrcls.length) {
                    /** @type {?} */
                    var rowClsObj_1 = {};
                    arrcls.forEach((/**
                     * @param {?} c
                     * @return {?}
                     */
                    function (c) {
                        rowClsObj_1['' + c] = true;
                    }));
                    /** @type {?} */
                    var _cls = tslib_1.__assign({}, rowClsObj_1, cls);
                    return _cls;
                }
                else {
                    return rowCls;
                }
            }
            else {
                return cls;
            }
        }
        else {
            return cls;
        }
    };
    /**
     * @param {?} rowNode
     * @param {?=} field
     * @return {?}
     */
    TreeTableComponent.prototype.getRowCls = /**
     * @param {?} rowNode
     * @param {?=} field
     * @return {?}
     */
    function (rowNode, field) {
        return this.getCustomCls(rowNode, 'row');
    };
    /**
     * @param {?} rowNode
     * @param {?} field
     * @return {?}
     */
    TreeTableComponent.prototype.getCellCls = /**
     * @param {?} rowNode
     * @param {?} field
     * @return {?}
     */
    function (rowNode, field) {
        return this.getCustomCls(rowNode, field, 'cell');
    };
    /**
     * @param {?} currentCol
     * @return {?}
     */
    TreeTableComponent.prototype.getRealColWidth = /**
     * @param {?} currentCol
     * @return {?}
     */
    function (currentCol) {
        var _this = this;
        if (this.columns && this.columns.length && this.fitColumns) {
            /** @type {?} */
            var colWidthTotal = this.columns.reduce((/**
             * @param {?} r
             * @param {?} c
             * @return {?}
             */
            function (r, c) {
                return r + (_this.columnIsVisible(c) && (r.field !== NODES_PAGER_COLUMN_FIELD || r.fixedWidth) ? c.width : 0);
            }), 0);
            if (this.columnIsVisible(currentCol)) {
                if (currentCol.field !== NODES_PAGER_COLUMN_FIELD && !currentCol.fixedWidth) {
                    return (currentCol.width / colWidthTotal * 100).toFixed(2) + '%';
                }
                else {
                    return (currentCol.width || 120) + 'px';
                }
            }
            else {
                return 0;
            }
        }
        return currentCol.width + 'px';
    };
    /**
     * @return {?}
     */
    TreeTableComponent.prototype.onResized = /**
     * @return {?}
     */
    function () {
        this.resizeSer.windowResized();
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableComponent.prototype.setRightFixedColumnShadow = /**
     * @private
     * @return {?}
     */
    function () {
        if (this.psRef && this.psRef.directiveRef) {
            /** @type {?} */
            var ps = ((/** @type {?} */ (this.psRef.directiveRef))).instance;
            if (!ps) {
                return;
            }
            var containerWidth = ps.containerWidth, scrollbarXLeft = ps.scrollbarXLeft, contentWidth = ps.contentWidth;
            if (containerWidth + scrollbarXLeft < contentWidth) {
                /** @type {?} */
                var fixedRightColumns = this.columns.filter((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) { return n.fixed === 'right'; }));
                /** @type {?} */
                var ruleName = "#" + this.id + ".f-treetable--fixed-columns";
                if (fixedRightColumns && fixedRightColumns.length) {
                    /** @type {?} */
                    var fixedRightCssRuleKey = ruleName + " [r-tt-shadow-col]::before";
                    /** @type {?} */
                    var rightCSSRule = fixedRightCssRuleKey + "{\n                        box-shadow:#d9d9d9 -12px 0px 8px -12px inset;\n                    }";
                    this.utils.appendCssRules([rightCSSRule], this.styleElement.sheet);
                }
            }
        }
    };
    /**
     * @private
     * @param {?} x
     * @param {?} e
     * @return {?}
     */
    TreeTableComponent.prototype.setFixedColumnShadow = /**
     * @private
     * @param {?} x
     * @param {?} e
     * @return {?}
     */
    function (x, e) {
        /** @type {?} */
        var fixedLeftColumns = this.columns.filter((/**
         * @param {?} n
         * @return {?}
         */
        function (n) { return n.fixed === 'left'; }));
        /** @type {?} */
        var fixedRightColumns = this.columns.filter((/**
         * @param {?} n
         * @return {?}
         */
        function (n) { return n.fixed === 'right'; }));
        /** @type {?} */
        var ruleName = "#" + this.id + ".f-treetable--fixed-columns";
        /** @type {?} */
        var fixedLeftCssRuleKey = '';
        /** @type {?} */
        var fixedRightCssRuleKey = '';
        /** @type {?} */
        var leftCSSRule = '';
        /** @type {?} */
        var rightCSSRule = '';
        if (fixedLeftColumns && fixedLeftColumns.length) {
            /** @type {?} */
            var lastFixedLeftColumn = fixedLeftColumns[fixedLeftColumns.length - 1];
            fixedLeftCssRuleKey = ruleName + " [field=\"" + lastFixedLeftColumn.field + "\"]::after";
            leftCSSRule = fixedLeftCssRuleKey + "{\n                box-shadow:#d9d9d9 12px 0px 8px -12px inset;\n            }";
        }
        if (fixedRightColumns && fixedRightColumns.length) {
            fixedRightCssRuleKey = ruleName + " [r-tt-shadow-col]::before";
            rightCSSRule = fixedRightCssRuleKey + "{\n                box-shadow:#d9d9d9 -12px 0px 8px -12px inset;\n            }";
        }
        if (x === 0) {
            // 移除左侧固定列阴影样式
            if (fixedLeftCssRuleKey) {
                this.utils.removeCssRule(fixedLeftCssRuleKey, this.styleElement.sheet);
            }
        }
        else if ((x + e.srcElement.offsetWidth).toFixed() == e.srcElement.scrollWidth) {
            // 移除右则固定列阴影样式
            if (fixedRightCssRuleKey) {
                this.utils.removeCssRule(fixedRightCssRuleKey, this.styleElement.sheet);
            }
        }
        else {
            // 添加左右固定列样式
            /** @type {?} */
            var arr = [];
            if (leftCSSRule) {
                arr.push(leftCSSRule);
            }
            if (rightCSSRule) {
                arr.push(rightCSSRule);
            }
            this.utils.appendCssRules(arr, this.styleElement.sheet);
        }
    };
    /**
     * @param {?} e
     * @return {?}
     */
    TreeTableComponent.prototype.onScrollX = /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        if (this.showHeader && this.headerBox) {
            /** @type {?} */
            var x = e.srcElement.scrollLeft;
            this.state.scrollX = x;
            // this.renderer.setStyle(this.headerBox.nativeElement.querySelector('table'), 'transform', `translate3d(-${x}px, 0px, 0px)`);
            this.headerBox.nativeElement.scrollLeft = x;
            this.setFixedColumnShadow(x, e);
        }
    };
    /**
     * @param {?} e
     * @return {?}
     */
    TreeTableComponent.prototype.onScrollY = /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        if (this.virtualized) {
            /** @type {?} */
            var scrollTop = e.target.scrollTop;
            this.renderData(scrollTop);
        }
    };
    /**
     * @private
     * @param {?} scrolltop
     * @return {?}
     */
    TreeTableComponent.prototype.renderData = /**
     * @private
     * @param {?} scrolltop
     * @return {?}
     */
    function (scrolltop) {
        var _a = this.scrollLoader.getRowNodes(scrolltop), data = _a.data, topHideHeight = _a.topHideHeight, bottomHideHeight = _a.bottomHideHeight;
        this.state.scrollY = scrolltop;
        this.serializedValue = data;
        this.topHideHeight = topHideHeight;
        this.bottomHideHeight = bottomHideHeight;
        this.detectChanges();
        this.setNewColumnsWidth();
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    TreeTableComponent.prototype.onSearchValueChange = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        if (!$event) {
            this.onClearSearchValue();
        }
        this.searchValueChange.emit(this.searchData);
    };
    /**
     * @return {?}
     */
    TreeTableComponent.prototype.onClearSearchValue = /**
     * @return {?}
     */
    function () {
        this.searchData.value = '';
        this.state.searched = false;
        this.clearSearchValue.emit();
    };
    /**
     * @param {?} event
     * @param {?} col
     * @param {?} node
     * @return {?}
     */
    TreeTableComponent.prototype.onCellClick = /**
     * @param {?} event
     * @param {?} col
     * @param {?} node
     * @return {?}
     */
    function (event, col, node) {
        this.cellClick.emit({ event: event, col: col, node: node });
    };
    /**
     * @param {?} index
     * @param {?} rowNode
     * @return {?}
     */
    TreeTableComponent.prototype.trackByFn = /**
     * @param {?} index
     * @param {?} rowNode
     * @return {?}
     */
    function (index, rowNode) {
        return rowNode.id;
    };
    /**
     * 格式化数据
     */
    /**
     * 格式化数据
     * @param {?} col
     * @param {?} data
     * @param {?} formatter
     * @return {?}
     */
    TreeTableComponent.prototype.formatData = /**
     * 格式化数据
     * @param {?} col
     * @param {?} data
     * @param {?} formatter
     * @return {?}
     */
    function (col, data, formatter) {
        // const val = this.utils.getValue(field, data, true );
        /** @type {?} */
        var val = this.getNodeText(col, data);
        if (formatter && formatter.type === 'timeago') {
            if (!formatter.options) {
                formatter.options = { locale: this.localeService.localeId };
            }
            else {
                if (!formatter.options.locale) {
                    formatter.options.locale = this.localeService.localeId;
                }
            }
        }
        return this.colFormatSer.format(val, data, formatter, { locale: this.localeService.localeId });
    };
    /**
     * @return {?}
     */
    TreeTableComponent.prototype.columnsChanged = /**
     * @return {?}
     */
    function () {
        this.checkColumnOption();
        this.detectChanges();
    };
    /**
     * @private
     * @param {?} list
     * @return {?}
     */
    TreeTableComponent.prototype.ttc2columns = /**
     * @private
     * @param {?} list
     * @return {?}
     */
    function (list) {
        return list.map((/**
         * @param {?} n
         * @return {?}
         */
        function (n) {
            return {
                field: n.field,
                title: n.title,
                align: n.align,
                hAlign: n.hAlign,
                width: n.width,
                formatter: n.formatter
            };
        }));
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableComponent.prototype.reSetSize = /**
     * @private
     * @return {?}
     */
    function () {
        if (this.fit) {
            /** @type {?} */
            var parentEl = this.el.nativeElement.parentNode;
            this.setWidth(parentEl.offsetWidth);
            this.height = parentEl.offsetHeight;
            // 如果在使用时，为组件设置的高度，则以此值为准，仅支持 固定值 ，不支持 百分比
            if (this.el.nativeElement.style.height) {
                /** @type {?} */
                var h = this.el.nativeElement.style.height;
                if (h.indexOf('px') > -1) {
                    h = parseInt(h.replace('px', ''), 10);
                    if (h > 0) {
                        this.height = h;
                    }
                }
            }
        }
    };
    /**
     * @private
     * @param {?=} nodePosY
     * @return {?}
     */
    TreeTableComponent.prototype.renderVirtualRowNodes = /**
     * @private
     * @param {?=} nodePosY
     * @return {?}
     */
    function (nodePosY) {
        var _this = this;
        if (nodePosY === void 0) { nodePosY = null; }
        if (this.virtualized) {
            /** @type {?} */
            var scrollY_1 = nodePosY || this.state.scrollY;
            /** @type {?} */
            var _rownodes = this.scrollLoader.getRowNodes(scrollY_1);
            this.serializedValue = _rownodes.data;
            this.topHideHeight = _rownodes.topHideHeight;
            this.bottomHideHeight = _rownodes.bottomHideHeight;
            this.detectChanges();
            if (nodePosY) {
                this.ngZone.runOutsideAngular((/**
                 * @return {?}
                 */
                function () {
                    setTimeout((/**
                     * @return {?}
                     */
                    function () {
                        _this.psRef.directiveRef.elementRef.nativeElement.scrollTop = nodePosY;
                    }), 20);
                }));
            }
        }
    };
    /**
     * @param {?=} nodePosY
     * @return {?}
     */
    TreeTableComponent.prototype.updateSerializedValue = /**
     * @param {?=} nodePosY
     * @return {?}
     */
    function (nodePosY) {
        if (nodePosY === void 0) { nodePosY = null; }
        this.serializedValue = [];
        this.searchHandle.allNodes = [];
        this.state.rowNodes = [];
        this.serializeNodes(null, this.data, 0, true);
        if (this.virtualized && this.fixedHeader) {
            this.renderVirtualRowNodes(nodePosY);
        }
        else {
            this.serializedValue = this.state.rowNodes;
            this.detectChanges();
            // if (emitChanges) {
            // }
        }
    };
    /**
     * 将树节点数据序列化为RowNode
     * @param parent 父级节点
     * @param nodes 树节点集合
     * @param level 级别
     * @param visible 是否可见
     */
    /**
     * 将树节点数据序列化为RowNode
     * @param {?} parent 父级节点
     * @param {?} nodes 树节点集合
     * @param {?} level 级别
     * @param {?} visible 是否可见
     * @param {?=} parentIds
     * @return {?}
     */
    TreeTableComponent.prototype.serializeNodes = /**
     * 将树节点数据序列化为RowNode
     * @param {?} parent 父级节点
     * @param {?} nodes 树节点集合
     * @param {?} level 级别
     * @param {?} visible 是否可见
     * @param {?=} parentIds
     * @return {?}
     */
    function (parent, nodes, level, visible, parentIds) {
        var _this = this;
        if (nodes && nodes.length) {
            if (!nodes[0].data) {
                return;
            }
            nodes.forEach((/**
             * @param {?} node
             * @param {?} index
             * @return {?}
             */
            function (node, index) {
                node.parent = parent;
                if (!node.hasOwnProperty('selectable')) {
                    node.selectable = true;
                }
                if (!node.hasOwnProperty('showIcon')) {
                    node.showIcon = true;
                }
                if (_this.onlySelectLeaf === 'yes' && node.selectable) {
                    node.selectable = !!node.leaf;
                }
                /** @type {?} */
                var keyid = node.data[_this.idField];
                node.id = keyid;
                /** @type {?} */
                var isSelected = _this.findIndexInSelection(node) > -1;
                /** @type {?} */
                var isChecked = _this.findIndexInCheckeds(node) > -1;
                /** @type {?} */
                var isLast = index === nodes.length - 1;
                /** @type {?} */
                var isFirst = index === 0;
                /** @type {?} */
                var parents = [];
                /** @type {?} */
                var parentRn = null;
                if (parent) {
                    /** @type {?} */
                    var parentID = parent.data[_this.idField];
                    /** @type {?} */
                    var _parents = parentIds || [];
                    parents = parents.concat(_parents.map((/**
                     * @param {?} n
                     * @return {?}
                     */
                    function (n) { return n; })));
                    parents.push(parentID);
                    parentRn = _this.state.rowNodes.find((/**
                     * @param {?} n
                     * @return {?}
                     */
                    function (n) { return n.id === parent.id; }));
                }
                /** @type {?} */
                var rowNode = {
                    id: keyid,
                    node: node,
                    parent: parent,
                    level: level,
                    visible: visible && (parent ? parent.expanded : true),
                    isSelected: isSelected,
                    isChecked: isChecked,
                    parents: parents,
                    parentRowNode: parentRn,
                    index: _this.state.rowNodes.length,
                    last: isLast,
                    first: isFirst
                };
                // this.serializedValue.push(rowNode);
                _this.state.rowNodes.push(rowNode);
                _this.serializeNodes(node, node.children, level + 1, rowNode.visible, parents);
            }));
        }
    };
    /**
     * 判断指定的节点是否被选中
     * @param node 树节点
     */
    /**
     * 判断指定的节点是否被选中
     * @param {?} node 树节点
     * @return {?}
     */
    TreeTableComponent.prototype.isSelected = /**
     * 判断指定的节点是否被选中
     * @param {?} node 树节点
     * @return {?}
     */
    function (node) {
        var _this = this;
        if (this.singleSelect) {
            if (node && this.selectedRow) {
                return node.data[this.idField] === this.selectedRow.data[this.idField];
            }
            return false;
        }
        else {
            if (this.selections && this.selections.length) {
                return this.selections.findIndex((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) { return n.data[_this.idField] === node.data[_this.idField]; })) > -1;
            }
            return false;
        }
    };
    /** 判断当前节点的钩选状态 */
    /**
     * 判断当前节点的钩选状态
     * @param {?} node
     * @return {?}
     */
    TreeTableComponent.prototype.isChecked = /**
     * 判断当前节点的钩选状态
     * @param {?} node
     * @return {?}
     */
    function (node) {
        var _this = this;
        if (node && this.checkeds) {
            if (this.checkeds instanceof Array) {
                return this.checkeds.findIndex((/**
                 * @param {?} v
                 * @return {?}
                 */
                function (v) {
                    return v.data[_this.idField] === node.data[_this.idField];
                })) > -1;
            }
            return false;
        }
        return false;
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableComponent.prototype.unSelectedCurrentRowEmit = /**
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var currSelected = this.selectedRow;
        if (currSelected) {
            this.nodeUnSelect.emit({ node: currSelected, type: 'row', instance: this });
        }
    };
    /**
     * @private
     * @param {?} e
     * @return {?}
     */
    TreeTableComponent.prototype._singleSelectNode = /**
     * @private
     * @param {?} e
     * @return {?}
     */
    function (e) {
        this.clearSelections();
        this.selectedRow = e.rowNode.node;
        this.selectRowIndex = e.rowIndex;
        this.selections = [e.rowNode.node];
        e.rowNode.isSelected = true;
        if (this.showCheckbox) {
            e.rowNode.isChecked = true;
            this.clearCheckeds();
            this.setCheckeds(e.rowNode);
        }
        /** @type {?} */
        var sp = {
            originalEvent: e.originalEvent,
            node: e.rowNode.node, type: 'row',
            index: e.rowIndex,
            parents: e.rowNode.parents,
            instance: this
        };
        this.nodeSelected.emit(sp);
    };
    /**
     * @private
     * @param {?} e
     * @return {?}
     */
    TreeTableComponent.prototype._singleUnSelectNode = /**
     * @private
     * @param {?} e
     * @return {?}
     */
    function (e) {
        this.selectedRow = null;
        this.selectRowIndex = -1;
        e.rowNode.isSelected = false;
        e.rowNode.isChecked = false;
        this.selections = [];
        this.nodeUnSelect.emit({
            originalEvent: e.originalEvent,
            node: e.rowNode.node, type: 'row', parents: e.rowNode.parents,
            instance: this
        });
    };
    /**
     * @private
     * @param {?} event
     * @param {?=} selected
     * @return {?}
     */
    TreeTableComponent.prototype.__singleSelectNode = /**
     * @private
     * @param {?} event
     * @param {?=} selected
     * @return {?}
     */
    function (event, selected) {
        if (selected === void 0) { selected = false; }
        if (!selected) {
            this.unSelectedCurrentRowEmit();
            this._singleSelectNode(event);
        }
        else {
            if (!this.keepSelect) {
                this._singleUnSelectNode(event);
            }
        }
    };
    /**
     * @private
     * @param {?} event
     * @param {?} selected
     * @return {?}
     */
    TreeTableComponent.prototype.__multiSelectNode = /**
     * @private
     * @param {?} event
     * @param {?} selected
     * @return {?}
     */
    function (event, selected) {
        /** @type {?} */
        var rowNode = event.rowNode;
        if (selected) {
            this.unSelectedCurrentRowEmit();
            this.singleSelectWhenMultiSelect(rowNode, true);
            this.nodeSelected.emit({
                originalEvent: event.originalEvent, node: rowNode.node,
                type: 'row', index: event.rowIndex, parents: rowNode.parents,
                instance: this
            });
        }
        else {
            if (!this.keepSelect) {
                this.singleSelectWhenMultiSelect(rowNode, false);
                this.nodeUnSelect.emit({
                    originalEvent: event.originalEvent, node: rowNode.node,
                    type: 'row', index: event.rowIndex, parents: rowNode.parents,
                    instance: this
                });
            }
        }
    };
    /**
     * 行单击事件
     */
    /**
     * 行单击事件
     * @param {?} event
     * @return {?}
     */
    TreeTableComponent.prototype.handleRowClick = /**
     * 行单击事件
     * @param {?} event
     * @return {?}
     */
    function (event) {
        /** @type {?} */
        var rowNode = event.rowNode;
        rowNode.node['elementRef'] = event.originalEvent.target;
        /** @type {?} */
        var selected = this.isSelected(rowNode.node);
        if (this.singleSelect) {
            this.__singleSelectNode(event, selected);
        }
        else {
            rowNode.indeterminate = false;
            if (this.onlySelectSelf) {
                this.__multiSelectNode(event, !selected);
            }
            else {
                rowNode.isSelected = !selected;
                this.state.rowNodes.find((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) { return n.id === rowNode.id; })).isSelected = !selected;
                this.setSelections(rowNode);
                /** @type {?} */
                var rowSelectChangeParams = {
                    originalEvent: event.originalEvent, node: rowNode.node,
                    type: 'row', index: event.rowIndex, parents: rowNode.parents,
                    instance: this
                };
                if (rowNode.isSelected) {
                    this.nodeSelected.emit(rowSelectChangeParams);
                }
                else {
                    this.nodeUnSelect.emit(rowSelectChangeParams);
                }
                if (this.checkOnSelect) {
                    rowNode.isChecked = !selected;
                    this.state.rowNodes.find((/**
                     * @param {?} n
                     * @return {?}
                     */
                    function (n) { return n.id === rowNode.id; })).isChecked = !selected;
                    this.setCheckeds(rowNode);
                    /** @type {?} */
                    var nodes = this.cascadeNodes(rowNode, rowNode.isChecked);
                    this.ttService.onChangeCheckboxStatus(rowNode);
                    if (rowNode.isChecked) {
                        this.nodeChecked.emit({ originalEvent: event, node: rowNode.node, nodes: nodes, instance: this });
                    }
                    else {
                        this.nodeUnChecked.emit({ originalEvent: event, node: rowNode.node, nodes: nodes, instance: this });
                    }
                }
            }
            if (this.checkOnSelect) {
                /** @type {?} */
                var ids = this.checkeds.map((/**
                 * @param {?} tn
                 * @return {?}
                 */
                function (tn) { return tn.id; }));
                this.checkValues = ids;
                this.checkValuesChange.emit(ids);
            }
        }
        this.detectChanges();
    };
    /**
     * 带有checkbox 的单选
     * @param rowNode 当前节点
     */
    /**
     * 带有checkbox 的单选
     * @private
     * @param {?} rowNode 当前节点
     * @param {?} flag
     * @return {?}
     */
    TreeTableComponent.prototype.singleSelectWhenMultiSelect = /**
     * 带有checkbox 的单选
     * @private
     * @param {?} rowNode 当前节点
     * @param {?} flag
     * @return {?}
     */
    function (rowNode, flag) {
        if (this.checkOnSelect) {
            rowNode.isChecked = flag;
            this.setCheckeds(rowNode);
            this.cascadeNodes(rowNode, rowNode.isChecked);
            if (rowNode.isChecked) {
                this.nodeChecked.emit({ originalEvent: event, node: rowNode.node, instance: this });
            }
            else {
                this.nodeUnChecked.emit({ originalEvent: event, node: rowNode.node, instance: this });
            }
        }
        this.clearSelections();
        if (this.onlySelectSelf) {
            this.selectedRow = rowNode.node;
        }
        rowNode.isSelected = flag;
        this.setSelections(rowNode);
    };
    /**
     * @private
     * @param {?} rowNode
     * @param {?} flag
     * @param {?} event
     * @return {?}
     */
    TreeTableComponent.prototype.selectWhenChecked = /**
     * @private
     * @param {?} rowNode
     * @param {?} flag
     * @param {?} event
     * @return {?}
     */
    function (rowNode, flag, event) {
        if (rowNode.node.selectable) {
            rowNode.isChecked = flag;
        }
        this.setCheckeds(rowNode, false);
        if (this.selectOnCheck) {
            if (this.onlySelectSelf) {
                if (flag || (this.selectedRow && this.selectedRow.id === rowNode.id)) {
                    this.clearSelections();
                }
            }
            if (this.singleSelect && this.showCheckbox) {
                this.clearCheckeds();
            }
            if (rowNode.node.selectable) {
                rowNode.isSelected = flag;
            }
            this.setSelections(rowNode);
            this.state.rowNodes.find((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return n.id === rowNode.id; })).isSelected = flag;
            if (rowNode.isSelected) {
                this.nodeSelected.emit({ originalEvent: event, node: rowNode.node, instance: this, type: 'checkbox' });
            }
            else {
                this.nodeUnSelect.emit({ originalEvent: event, node: rowNode.node, instance: this, type: 'checkbox' });
            }
        }
    };
    /**
     * @private
     * @param {?} rowNode
     * @param {?} items
     * @return {?}
     */
    TreeTableComponent.prototype.isInArray = /**
     * @private
     * @param {?} rowNode
     * @param {?} items
     * @return {?}
     */
    function (rowNode, items) {
        var _this = this;
        if (items && items.length === 0) {
            return false;
        }
        return items.findIndex((/**
         * @param {?} i
         * @return {?}
         */
        function (i) { return i.data[_this.idField] === rowNode.id; })) > -1;
    };
    /**
     * @private
     * @param {?} rowNode
     * @return {?}
     */
    TreeTableComponent.prototype.setSelections = /**
     * @private
     * @param {?} rowNode
     * @return {?}
     */
    function (rowNode) {
        var _this = this;
        if (rowNode.isSelected) {
            if (!this.selections) {
                this.selections = [];
            }
            if (!this.isInArray(rowNode, this.selections)) {
                // this.selections = [...this.selections, rowNode.node];
                this.selections.push(rowNode.node);
            }
        }
        else {
            if (this.selections) {
                /** @type {?} */
                var i = this.selections.findIndex((/**
                 * @param {?} tn
                 * @return {?}
                 */
                function (tn) { return tn.data[_this.idField] === rowNode.node.data[_this.idField]; }));
                if (i !== -1) {
                    this.selections.splice(i, 1);
                }
                // this.selections = this.selections.filter((tn: TreeNode) => tn.data[this.idField] !== rowNode.node.data[this.idField]);
            }
        }
    };
    /**
     * @private
     * @param {?} rowNode
     * @param {?=} updated
     * @return {?}
     */
    TreeTableComponent.prototype.setCheckeds = /**
     * @private
     * @param {?} rowNode
     * @param {?=} updated
     * @return {?}
     */
    function (rowNode, updated) {
        var _this = this;
        if (updated === void 0) { updated = true; }
        if (rowNode.isChecked) {
            if (!this.checkeds) {
                this.checkeds = [];
            }
            if (!this.isInArray(rowNode, this.checkeds)) {
                // this.checkeds = [ ...this.checkeds, rowNode.node];
                this.checkeds.push(rowNode.node);
            }
        }
        else {
            if (this.checkeds) {
                /** @type {?} */
                var i = this.checkeds.findIndex((/**
                 * @param {?} tn
                 * @return {?}
                 */
                function (tn) { return tn.data[_this.idField] === rowNode.node.data[_this.idField]; }));
                if (i !== -1) {
                    this.checkeds.splice(i, 1);
                }
                // this.checkeds = this.checkeds.filter((tn: TreeNode) => tn.data[this.idField] !== rowNode.node.data[this.idField]);
            }
        }
        if (updated) {
            this.checkeds = tslib_1.__spread(this.checkeds);
        }
    };
    /**
     * @private
     * @param {?} data
     * @return {?}
     */
    TreeTableComponent.prototype.getDiffrentData = /**
     * @private
     * @param {?} data
     * @return {?}
     */
    function (data) {
        var _this = this;
        if (data.length) {
            /** @type {?} */
            var _nodes_1 = [];
            data.forEach((/**
             * @param {?} n
             * @return {?}
             */
            function (n) {
                if (_nodes_1.findIndex((/**
                 * @param {?} t
                 * @return {?}
                 */
                function (t) { return t.data[_this.idField] === n.data[_this.idField]; })) === -1) {
                    _nodes_1.push(n);
                }
            }));
            return _nodes_1;
        }
        return data;
    };
    /**
     * @private
     * @param {?} rowNode
     * @param {?} checked
     * @param {?=} sync
     * @return {?}
     */
    TreeTableComponent.prototype.cascadeCheckedNode = /**
     * @private
     * @param {?} rowNode
     * @param {?} checked
     * @param {?=} sync
     * @return {?}
     */
    function (rowNode, checked, sync) {
        if (sync === void 0) { sync = false; }
        /** @type {?} */
        var nodes = [];
        if (rowNode.node.selectable) {
            rowNode.isChecked = checked;
        }
        this.setCheckeds(rowNode, false);
        if (this.selectOnCheck) {
            if (sync) {
                /** @type {?} */
                var status_1 = this.isIndeterminate(rowNode) !== 2;
                checked = status_1 ? checked : false;
            }
            if (rowNode.node.selectable) {
                rowNode.isSelected = checked;
                this.setSelections(rowNode);
            }
        }
        if (!this.isInArray(rowNode, nodes)) {
            nodes.push(rowNode.node);
        }
        return nodes;
    };
    /**
     * 向下级联选中
     * @param node 当前节点
     * @param checked 选中状态
     * 返回受影响的行
     */
    /**
     * 向下级联选中
     * @param {?} rowNode
     * @param {?} checked 选中状态
     * 返回受影响的行
     * @return {?}
     */
    TreeTableComponent.prototype.propagateSelectionDown = /**
     * 向下级联选中
     * @param {?} rowNode
     * @param {?} checked 选中状态
     * 返回受影响的行
     * @return {?}
     */
    function (rowNode, checked) {
        var _this = this;
        /** @type {?} */
        var nodes = this.cascadeCheckedNode(rowNode, checked);
        if (this.cascadeCheck && this.cascadeDown && rowNode.node.children && rowNode.node.children.length) {
            rowNode.node.children.forEach((/**
             * @param {?} v
             * @param {?} i
             * @return {?}
             */
            function (v, i) {
                /** @type {?} */
                var rn = _this.state.rowNodes.find((/**
                 * @param {?} row
                 * @return {?}
                 */
                function (row) { return row.id === v.data[_this.idField]; }));
                if (rn) {
                    rn.indeterminate = false;
                    if (rn.node.selectable) {
                        rn.isChecked = checked;
                    }
                    nodes = nodes.concat(_this.propagateSelectionDown(rn, checked));
                    _this.ttService.onChangeCheckboxStatus(rn);
                }
            }));
        }
        return nodes;
    };
    /**
     * 向上级联选中
     */
    /**
     * 向上级联选中
     * @param {?} rowNode
     * @param {?} checked
     * @return {?}
     */
    TreeTableComponent.prototype.propagateSelectionUp = /**
     * 向上级联选中
     * @param {?} rowNode
     * @param {?} checked
     * @return {?}
     */
    function (rowNode, checked) {
        var _this = this;
        /** @type {?} */
        var nodes = this.cascadeCheckedNode(rowNode, checked);
        if (this.cascadeCheck && this.cascadeUp && rowNode.node.parent) {
            if (rowNode.parents && rowNode.parents.length) {
                /** @type {?} */
                var rns_1 = [];
                rowNode.parents.forEach((/**
                 * @param {?} n
                 * @param {?} i
                 * @return {?}
                 */
                function (n, i) {
                    /** @type {?} */
                    var rn = _this.findRowNode(n);
                    if (rn && rn.node.selectable) {
                        // rn.isChecked = checked;
                        /** @type {?} */
                        var checkedNodes = _this.cascadeCheckedNode(rn, checked, true);
                        if (checkedNodes.length) {
                            nodes.push(checkedNodes[0]);
                        }
                        rns_1.push(rn);
                    }
                }));
                rns_1.reverse().forEach((/**
                 * @param {?} rn
                 * @return {?}
                 */
                function (rn) {
                    _this.updateCheckboxStatus(rn);
                }));
            }
        }
        return nodes;
    };
    // 节点状态（选中，勾选）同步更新
    // 节点状态（选中，勾选）同步更新
    /**
     * @private
     * @return {?}
     */
    TreeTableComponent.prototype.updateNodeStatus = 
    // 节点状态（选中，勾选）同步更新
    /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.state.searched) {
            /** @type {?} */
            var rowNodes = this.state.searchRowNodes;
            if (!rowNodes) {
                return;
            }
            rowNodes.forEach((/**
             * @param {?} rn
             * @return {?}
             */
            function (rn) {
                /** @type {?} */
                var checkedItem = _this.state.rowNodes.find((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) { return n.id === rn.id; }));
                /** @type {?} */
                var chked = checkedItem ? checkedItem.isChecked : false;
                rn.indeterminate = false;
                rn.isChecked = chked;
                if (_this.selectOnCheck) {
                    if (checkedItem.isSelected != rn.isChecked) {
                        checkedItem.isSelected = checkedItem.isChecked;
                    }
                    rn.isSelected = checkedItem.isSelected;
                }
            }));
        }
        else {
            if (this.selectOnCheck) {
                this.state.rowNodes.forEach((/**
                 * @param {?} rn
                 * @return {?}
                 */
                function (rn) {
                    if (_this.onlySelectSelf) {
                        if (!_this.selections || !_this.selections.length) {
                            rn.isSelected = false;
                        }
                        else {
                            if (_this.selections[0].id === rn.id) {
                                rn.isSelected = true;
                            }
                            else {
                                rn.isSelected = false;
                            }
                        }
                    }
                    else {
                        if (rn.isSelected != rn.isChecked) {
                            rn.isSelected = rn.isChecked;
                        }
                    }
                }));
            }
        }
    };
    /**
     * 级联选择节点
     * @param rowNode 当前节点
     * @param checked 是否钩选
     */
    /**
     * 级联选择节点
     * @private
     * @param {?} rowNode 当前节点
     * @param {?} checked 是否钩选
     * @return {?}
     */
    TreeTableComponent.prototype.cascadeNodes = /**
     * 级联选择节点
     * @private
     * @param {?} rowNode 当前节点
     * @param {?} checked 是否钩选
     * @return {?}
     */
    function (rowNode, checked) {
        /** @type {?} */
        var checkedNodes = this.propagateSelectionDown(rowNode, checked);
        checkedNodes = checkedNodes.concat(this.propagateSelectionUp(rowNode, checked));
        checkedNodes = this.getDiffrentData(checkedNodes);
        this.updateNodeStatus();
        this.updateAllCheckboxStatus();
        return checkedNodes.filter((/**
         * @param {?} n
         * @return {?}
         */
        function (n) {
            return n.selectable;
        }));
    };
    /**
     * 行Checkbox 选中变化事件
     * @param event 鼠标点击事件对象
     * @param rowNode 当前树节点
     */
    /**
     * 行Checkbox 选中变化事件
     * @param {?} event 鼠标点击事件对象
     * @param {?} rowNode 当前树节点
     * @param {?} checked
     * @return {?}
     */
    TreeTableComponent.prototype.toggleNodeWithCheckbox = /**
     * 行Checkbox 选中变化事件
     * @param {?} event 鼠标点击事件对象
     * @param {?} rowNode 当前树节点
     * @param {?} checked
     * @return {?}
     */
    function (event, rowNode, checked) {
        this.state.rowNodes.find((/**
         * @param {?} n
         * @return {?}
         */
        function (n) { return n.id === rowNode.id; })).isChecked = checked;
        rowNode.indeterminate = false;
        /** @type {?} */
        var data = this.cascadeNodes(rowNode, checked);
        this.ttService.onChangeCheckboxStatus(rowNode);
        if (checked) {
            this.nodeChecked.emit({ originalEvent: event, node: rowNode.node, nodes: data, instance: this });
        }
        else {
            this.nodeUnChecked.emit({ originalEvent: event, node: rowNode.node, nodes: data, instance: this });
        }
        this.selectWhenChecked(rowNode, checked, event);
        if (this.onlySelectSelf && checked) {
            this.selectedRow = rowNode.node;
        }
        this.checkeds = tslib_1.__spread(this.checkeds);
        this.detectChanges();
        event.stopPropagation();
    };
    /**
     * 全选
     * @param event 鼠标事件对象
     * @param checked 是否选中
     */
    /**
     * 全选
     * @param {?} event 鼠标事件对象
     * @param {?} checked 是否选中
     * @return {?}
     */
    TreeTableComponent.prototype.toggleNodesWithCheckbox = /**
     * 全选
     * @param {?} event 鼠标事件对象
     * @param {?} checked 是否选中
     * @return {?}
     */
    function (event, checked) {
        if (checked) {
            if (this.data && this.data.length) {
                this.checkAllNodes({ originalEvent: event, checked: checked, instance: this });
            }
        }
        else {
            this.selections = null;
            this.unCheckAllNodes({ originalEvent: event, checked: checked, instance: this });
        }
        this.detectChanges();
    };
    /** 更新全选checkbox 的状态 */
    /**
     * 更新全选checkbox 的状态
     * @private
     * @return {?}
     */
    TreeTableComponent.prototype.updateAllCheckboxStatus = /**
     * 更新全选checkbox 的状态
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var status = this.isIndeterminate();
        if (this.showCheckAll && !this.singleSelect && this.showCheckbox) {
            if (status !== undefined) {
                if (this.headerCheckboxCmp) {
                    this.headerCheckboxCmp.chkAll.nativeElement.indeterminate = status === 2;
                    this.headerCheckboxCmp.checked = status === 1;
                }
            }
        }
    };
    /** 更新父节点checkbox 选中状态 */
    /**
     * 更新父节点checkbox 选中状态
     * @private
     * @param {?} rowNode
     * @return {?}
     */
    TreeTableComponent.prototype.updateParentCheckboxStatus = /**
     * 更新父节点checkbox 选中状态
     * @private
     * @param {?} rowNode
     * @return {?}
     */
    function (rowNode) {
        var _this = this;
        /** @type {?} */
        var pNodes = [];
        rowNode.parents.forEach((/**
         * @param {?} rnid
         * @return {?}
         */
        function (rnid) {
            /** @type {?} */
            var rn = _this.findRowNode(rnid);
            if (rn) {
                pNodes.push(rn);
            }
        }));
        pNodes.reverse().forEach((/**
         * @param {?} rn
         * @return {?}
         */
        function (rn) {
            _this.updateCheckboxStatus(rn);
        }));
    };
    /** 更新N个父节点复选框中的选中状态 */
    /**
     * 更新N个父节点复选框中的选中状态
     * @private
     * @param {?} parentIds
     * @return {?}
     */
    TreeTableComponent.prototype.updateParentsCheckStatus = /**
     * 更新N个父节点复选框中的选中状态
     * @private
     * @param {?} parentIds
     * @return {?}
     */
    function (parentIds) {
        var _this = this;
        /** @type {?} */
        var pids = [];
        parentIds.forEach((/**
         * @param {?} ids
         * @return {?}
         */
        function (ids) {
            pids = tslib_1.__spread(pids, ids);
        }));
        pids = Array.from(new Set(pids));
        /** @type {?} */
        var pRowNodes = this.findRowNodes(pids);
        pRowNodes.sort((/**
         * @param {?} r
         * @param {?} n
         * @return {?}
         */
        function (r, n) {
            return n.level - r.level;
        })).forEach((/**
         * @param {?} rn
         * @return {?}
         */
        function (rn) {
            _this.updateCheckboxStatus(rn);
        }));
    };
    /** 更新节点中checkbox的状态 */
    /**
     * 更新节点中checkbox的状态
     * @private
     * @param {?} rowNode
     * @return {?}
     */
    TreeTableComponent.prototype.updateCheckboxStatus = /**
     * 更新节点中checkbox的状态
     * @private
     * @param {?} rowNode
     * @return {?}
     */
    function (rowNode) {
        /** @type {?} */
        var status = this.isIndeterminate(rowNode);
        if (status !== undefined && rowNode.node.selectable) {
            rowNode.indeterminate = status === 2;
            this.ttService.onChangeCheckboxStatus(rowNode);
        }
    };
    /** 判断指定节点checkbox 的状态 */
    /**
     * 判断指定节点checkbox 的状态
     * @private
     * @param {?=} rowNode
     * @return {?}
     */
    TreeTableComponent.prototype.isIndeterminate = /**
     * 判断指定节点checkbox 的状态
     * @private
     * @param {?=} rowNode
     * @return {?}
     */
    function (rowNode) {
        /** @type {?} */
        var status = this.getCheckboxStatus(rowNode);
        if (status !== undefined) {
            /** @type {?} */
            var checked = false;
            if (status === 2) {
                checked = false;
            }
            else {
                checked = !!status;
            }
            if (rowNode && rowNode.node.selectable) {
                rowNode.isChecked = checked;
                this.setCheckeds(rowNode, false);
            }
        }
        return status;
    };
    /**
     * 返回父级节点checkbox 的状态。0：不选中， 1： 选中， 2：不确定
     * @param rowNode 父级节点；为空时返回全选checkbox 的状态
     */
    /**
     * 返回父级节点checkbox 的状态。0：不选中， 1： 选中， 2：不确定
     * @private
     * @param {?=} rowNode 父级节点；为空时返回全选checkbox 的状态
     * @return {?}
     */
    TreeTableComponent.prototype.getCheckboxStatus = /**
     * 返回父级节点checkbox 的状态。0：不选中， 1： 选中， 2：不确定
     * @private
     * @param {?=} rowNode 父级节点；为空时返回全选checkbox 的状态
     * @return {?}
     */
    function (rowNode) {
        var _this = this;
        /** @type {?} */
        var uncheckedLength = 0;
        /** @type {?} */
        var checkedLength = 0;
        /** @type {?} */
        var len = 0;
        /** @type {?} */
        var childNodes = [];
        if (rowNode) {
            childNodes = rowNode.node.children || [];
        }
        else {
            childNodes = this.state.rowNodes;
        }
        len = childNodes.length;
        childNodes.forEach((/**
         * @param {?} n
         * @return {?}
         */
        function (n) {
            /** @type {?} */
            var rn = n;
            if (rowNode) {
                rn = _this.findRowNode(n.data[_this.idField]);
            }
            if (rn && !rn.indeterminate) {
                if (rn.isChecked) {
                    checkedLength++;
                }
                else {
                    uncheckedLength++;
                }
            }
        }));
        if (len === 0) {
            return undefined;
        }
        /** @type {?} */
        var flag = 0;
        if (uncheckedLength === len) {
            flag = 0;
        }
        else {
            if (checkedLength === len) {
                flag = 1;
            }
            else {
                flag = 2;
            }
        }
        return flag;
    };
    /**
     * @private
     * @param {?} node
     * @param {?} treeNodes
     * @return {?}
     */
    TreeTableComponent.prototype.findIndexIn = /**
     * @private
     * @param {?} node
     * @param {?} treeNodes
     * @return {?}
     */
    function (node, treeNodes) {
        var _this = this;
        /** @type {?} */
        var index = -1;
        if (treeNodes && treeNodes.length) {
            index = treeNodes.findIndex((/**
             * @param {?} v
             * @param {?} i
             * @return {?}
             */
            function (v, i) {
                return _this.equals(v, node);
            }));
        }
        return index;
    };
    /**
     * 在选中的集合中查找指定节点的索引
     * @param node 树节点
     */
    /**
     * 在选中的集合中查找指定节点的索引
     * @param {?} node 树节点
     * @return {?}
     */
    TreeTableComponent.prototype.findIndexInCheckeds = /**
     * 在选中的集合中查找指定节点的索引
     * @param {?} node 树节点
     * @return {?}
     */
    function (node) {
        return this.findIndexIn(node, this.checkeds);
    };
    /**
     * 在选中的集合中查找指定节点的索引
     * @param node 树节点
     */
    /**
     * 在选中的集合中查找指定节点的索引
     * @param {?} node 树节点
     * @return {?}
     */
    TreeTableComponent.prototype.findIndexInSelection = /**
     * 在选中的集合中查找指定节点的索引
     * @param {?} node 树节点
     * @return {?}
     */
    function (node) {
        return this.findIndexIn(node, this.selections);
    };
    /** 对比两个节点是否同一个节点 */
    /**
     * 对比两个节点是否同一个节点
     * @param {?} target
     * @param {?} source
     * @return {?}
     */
    TreeTableComponent.prototype.equals = /**
     * 对比两个节点是否同一个节点
     * @param {?} target
     * @param {?} source
     * @return {?}
     */
    function (target, source) {
        return target.data[this.idField] === source.data[this.idField];
    };
    /**
     * 展开所有节点
     * @param rowNode 展开此节点下的所有节点；如果为空，则展开所有节点
     * @param deep 设置为true 时，当前节点下的所有子节点全部展开, 默认 false
     * @param childrenEmptyEmitExpand  当没有子节点是否触发展开事件，默认为 true
     */
    /**
     * 展开所有节点
     * @param {?=} treeNode
     * @param {?=} deep 设置为true 时，当前节点下的所有子节点全部展开, 默认 false
     * @param {?=} childrenEmptyEmitExpand  当没有子节点是否触发展开事件，默认为 true
     * @return {?}
     */
    TreeTableComponent.prototype.toggleExpand = /**
     * 展开所有节点
     * @param {?=} treeNode
     * @param {?=} deep 设置为true 时，当前节点下的所有子节点全部展开, 默认 false
     * @param {?=} childrenEmptyEmitExpand  当没有子节点是否触发展开事件，默认为 true
     * @return {?}
     */
    function (treeNode, deep, childrenEmptyEmitExpand) {
        var _this = this;
        if (deep === void 0) { deep = false; }
        if (childrenEmptyEmitExpand === void 0) { childrenEmptyEmitExpand = true; }
        if (treeNode) {
            treeNode.expanded = !treeNode.expanded;
            this.updateNodeProperty(treeNode.id, { expanded: treeNode.expanded });
            this.toggleVisible(treeNode);
            if (this.virtualized) {
                if (treeNode.children && treeNode.children.length) {
                    this.renderVirtualRowNodes();
                }
            }
            if (treeNode.expanded) {
                if (childrenEmptyEmitExpand || (treeNode.children && treeNode.children.length)) {
                    this.expand.emit(treeNode);
                }
                else {
                    treeNode.expanded = !treeNode.expanded;
                    return;
                }
            }
            else {
                this.collapse.emit(treeNode);
            }
            if (deep) {
                if (treeNode.children && treeNode.children.length) {
                    treeNode.children.forEach((/**
                     * @param {?} row
                     * @param {?} i
                     * @return {?}
                     */
                    function (row, i) {
                        _this.toggleExpand(row, deep, childrenEmptyEmitExpand);
                    }));
                }
            }
        }
        else {
            if (this.data && this.data.length) {
                this.data.forEach((/**
                 * @param {?} row
                 * @return {?}
                 */
                function (row) {
                    _this.toggleExpand(row);
                }));
            }
        }
        this.setNewColumnsWidth();
    };
    /**
     * @private
     * @param {?} treeNode
     * @return {?}
     */
    TreeTableComponent.prototype.toggleVisible = /**
     * @private
     * @param {?} treeNode
     * @return {?}
     */
    function (treeNode) {
        var _this = this;
        /** @type {?} */
        var rowNode = this.findRowNode(treeNode.id);
        if (rowNode) {
            /** @type {?} */
            var rid_1 = rowNode.id;
            /** @type {?} */
            var setRowVisible_1 = (/**
             * @param {?} rn
             * @param {?} visible
             * @return {?}
             */
            function (rn, visible) {
                /** @type {?} */
                var rnParent = _this.findRowNode(rn.parent.data[_this.idField]);
                if (rnParent) {
                    rn.visible = rnParent.visible && rnParent.node.expanded;
                }
                else {
                    rn.visible = visible;
                }
                /** @type {?} */
                var _r = _this.serializedValue.find((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) { return n.id === rn.id; }));
                if (_r) {
                    _r.visible = rn.visible;
                }
            });
            this.state.rowNodes.filter((/**
             * @param {?} rn
             * @return {?}
             */
            function (rn) { return rn.parents.indexOf(rid_1) > -1; })).forEach((/**
             * @param {?} rn
             * @return {?}
             */
            function (rn) {
                setRowVisible_1(rn, treeNode.expanded);
            }));
        }
    };
    /** 展开指定节点
     * emit: 触发展开事件
     * render: 数据重新加载
     */
    /**
     * 展开指定节点
     * emit: 触发展开事件
     * render: 数据重新加载
     * @param {?} id
     * @param {?=} emit
     * @param {?=} render
     * @return {?}
     */
    TreeTableComponent.prototype.expandNode = /**
     * 展开指定节点
     * emit: 触发展开事件
     * render: 数据重新加载
     * @param {?} id
     * @param {?=} emit
     * @param {?=} render
     * @return {?}
     */
    function (id, emit, render) {
        if (emit === void 0) { emit = true; }
        if (render === void 0) { render = true; }
        if (id) {
            /** @type {?} */
            var rowNode = this.findRowNode(id);
            if (rowNode) {
                rowNode.node.expanded = true;
                this.toggleVisible(rowNode.node);
                if (render) {
                    if (this.virtualized) {
                        if (rowNode.node.children && rowNode.node.children.length) {
                            this.renderVirtualRowNodes();
                        }
                    }
                    else {
                        this.detectChanges();
                    }
                }
                if (emit) {
                    this.expand.emit(rowNode.node);
                }
                this.setNewColumnsWidth();
            }
            else {
                this.writeConsole('Con\'t find tree node widh id:' + id, 'error');
            }
        }
    };
    /** 展开所有节点 */
    /**
     * 展开所有节点
     * @return {?}
     */
    TreeTableComponent.prototype.expandAll = /**
     * 展开所有节点
     * @return {?}
     */
    function () {
        this.state.rowNodes = this.state.rowNodes.map((/**
         * @param {?} row
         * @return {?}
         */
        function (row) {
            row.node.expanded = true;
            row.visible = true;
            return row;
        }));
        if (this.virtualized) {
            this.renderVirtualRowNodes();
        }
        else {
            this.serializedValue = this.state.rowNodes;
        }
        this.setNewColumnsWidth();
        this.expandAllNodes.emit();
        this.detectChanges();
    };
    /**
     * @param {?} id
     * @return {?}
     */
    TreeTableComponent.prototype.expandNodes = /**
     * @param {?} id
     * @return {?}
     */
    function (id) {
        // const rowNode = this.findRowNode(id);
        // const rootNode = this.getRoot(id);
        // if (rowNode) {
        //     const treeNode = rowNode.node;
        //     treeNode.expanded = true;
        //     rowNode.visible = true;
        //     const parents = rowNode.parents;
        //     this.state.rowNodes.filter(n => n.parents.indexOf(rootNode.id) > -1).forEach(r => {
        //         if (parents.indexOf(r.id) > -1) {
        //             r.visible = true;
        //             r.node.expanded = true;
        //         }
        //     });
        //     this.detectChanges();
        // }
    };
    /** 展开指定节点下的所有节点 */
    /**
     * 展开指定节点下的所有节点
     * @param {?} rowNode
     * @return {?}
     */
    TreeTableComponent.prototype.expandAllNodesBy = /**
     * 展开指定节点下的所有节点
     * @param {?} rowNode
     * @return {?}
     */
    function (rowNode) {
        if (rowNode) {
            /** @type {?} */
            var treeNode = rowNode.node;
            treeNode.expanded = true;
            rowNode.visible = true;
            this.state.rowNodes.filter((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return n.parents.indexOf(rowNode.id) > -1; })).forEach((/**
             * @param {?} r
             * @return {?}
             */
            function (r) {
                r.visible = true;
                r.node.expanded = true;
            }));
            this.detectChanges();
            this.setNewColumnsWidth();
        }
    };
    /** 折叠指定节点 */
    /**
     * 折叠指定节点
     * @param {?} id
     * @return {?}
     */
    TreeTableComponent.prototype.collapseNode = /**
     * 折叠指定节点
     * @param {?} id
     * @return {?}
     */
    function (id) {
        if (id) {
            /** @type {?} */
            var rowNode = this.findRowNode(id);
            if (rowNode) {
                rowNode.node.expanded = false;
                this.toggleVisible(rowNode.node);
                this.detectChanges();
                this.setNewColumnsWidth();
                this.collapse.emit(rowNode.node);
            }
            else {
                this.writeConsole('Con\'t find tree node widh id:' + id, 'error');
            }
        }
    };
    /** 折叠所有节点 */
    /**
     * 折叠所有节点
     * @return {?}
     */
    TreeTableComponent.prototype.collapseAll = /**
     * 折叠所有节点
     * @return {?}
     */
    function () {
        this.state.rowNodes = this.state.rowNodes.map((/**
         * @param {?} row
         * @return {?}
         */
        function (row) {
            row.node.expanded = false;
            row.visible = !row.parent;
            return row;
        }));
        if (this.virtualized) {
            this.renderVirtualRowNodes();
        }
        else {
            this.serializedValue = this.state.rowNodes;
        }
        this.collapseAllNodes.emit();
        this.detectChanges();
        this.setNewColumnsWidth();
    };
    /**
     * @return {?}
     */
    TreeTableComponent.prototype.getContainerOffset = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var rect = this.containerElement.getBoundingClientRect();
        return {
            left: rect.left + document.body.scrollLeft,
            top: rect.top + document.body.scrollTop
        };
    };
    /**
     * @param {?} event
     * @return {?}
     */
    TreeTableComponent.prototype.onColumnResizeBegin = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        /** @type {?} */
        var containerLeft = Math.round(this.getContainerOffset().left);
        this.lastResizerHelperX = (event.pageX - containerLeft + this.containerElement.scrollLeft);
        event.preventDefault();
    };
    /**
     * @param {?} event
     * @return {?}
     */
    TreeTableComponent.prototype.onColumnResize = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        if (this.resizableColumns) {
            /** @type {?} */
            var containerLeft = this.getContainerOffset().left;
            this.renderer.addClass(this.containerElement, 'ui-unselectable-text');
            this.resizerHelperVC.nativeElement.style.height = this.containerElement.offsetHeight + 'px';
            this.resizerHelperVC.nativeElement.style.top = 0 + 'px';
            this.resizerHelperVC.nativeElement.style.left = (event.pageX - containerLeft) + 'px';
            this.resizerHelperVC.nativeElement.style.display = 'block';
        }
    };
    /**
     * @param {?} event
     * @param {?} column
     * @return {?}
     */
    TreeTableComponent.prototype.onColumnResizeEnd = /**
     * @param {?} event
     * @param {?} column
     * @return {?}
     */
    function (event, column) {
        if (!this.resizerHelperVC.nativeElement.offsetLeft) {
            return;
        }
        // 偏移量
        /** @type {?} */
        var delta = this.resizerHelperVC.nativeElement.offsetLeft - this.lastResizerHelperX;
        // 列宽
        /** @type {?} */
        var columnWidth = column.offsetWidth;
        // 新宽度
        /** @type {?} */
        var newColumnWidth = columnWidth + delta;
        // 最小宽度
        /** @type {?} */
        var minWidth = column.style.minWidth || 15;
        /** @type {?} */
        var resizeColumnIndex = -1;
        if (column.id) {
            resizeColumnIndex = this.columns.findIndex((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return n.id === column.id; }));
        }
        else {
            /** @type {?} */
            var colField_1 = column.getAttribute('field');
            if (colField_1) {
                resizeColumnIndex = this.columns.findIndex((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) { return n.field === colField_1; }));
            }
        }
        if (!this.fitColumns) {
            this.resizeColGroup(this.headerTable.nativeElement, resizeColumnIndex, newColumnWidth, 0);
            this.resizeColGroup(this.bodyTable.nativeElement, resizeColumnIndex, newColumnWidth, 0);
            if (this.columns[resizeColumnIndex]) {
                this.columns[resizeColumnIndex].width = newColumnWidth;
            }
            this.sortColumnsByFixed(false);
            this.setCellWidthCss(this.allColumnsWidth(), 0, []);
            // this.setTableWidth(this.allColumnsWidth());
            // // update css.
            // const _colInfo = this.columns[resizeColumnIndex];
            // if (_colInfo) {
            //     const ruleName = this.columnCssName(_colInfo);
            //     const stylecss = ruleName + '{width:' + newColumnWidth + 'px}';
            //     this.utils.appendCssRules([stylecss], this.styleElement.sheet);
            // }
            // const nextColumn = this.columns[resizeColumnIndex + 1];
            // if (nextColumn && nextColumn.fixed) {
            //     const ruleName = this.columnCssName(nextColumn);
            //     const stylecss = ruleName + '{' + nextColumn.fixed + ':' + nextColumn[nextColumn.fixed] + 'px}';
            //     this.utils.appendCssRules([stylecss], this.styleElement.sheet);
            // }
        }
        else {
            if (newColumnWidth > minWidth) {
                /** @type {?} */
                var nextColumn = column.nextElementSibling;
                while (!nextColumn.offsetParent) {
                    nextColumn = nextColumn.nextElementSibling;
                }
                if (nextColumn) {
                    /** @type {?} */
                    var nextColumnWidth = nextColumn.offsetWidth - delta;
                    /** @type {?} */
                    var nextColumnMinWidth = nextColumn.style.minWidth || 15;
                    if (newColumnWidth > 15 && nextColumnWidth > nextColumnMinWidth) {
                        this.resizeColGroup(this.headerTable.nativeElement, resizeColumnIndex, newColumnWidth, nextColumnWidth);
                        this.resizeColGroup(this.bodyTable.nativeElement, resizeColumnIndex, newColumnWidth, nextColumnWidth);
                    }
                }
            }
        }
        this.resizerHelperVC.nativeElement.style.display = 'none';
        this.renderer.removeClass(this.containerElement, 'ui-unselectable-text');
        this.psRef.directiveRef.update();
    };
    /**
     * @param {?} table
     * @param {?} resizeColumnIndex
     * @param {?} newColumnWidth
     * @param {?=} nextColumnWidth
     * @return {?}
     */
    TreeTableComponent.prototype.resizeColGroup = /**
     * @param {?} table
     * @param {?} resizeColumnIndex
     * @param {?} newColumnWidth
     * @param {?=} nextColumnWidth
     * @return {?}
     */
    function (table, resizeColumnIndex, newColumnWidth, nextColumnWidth) {
        if (table) {
            /** @type {?} */
            var colGroup = table.children[0].nodeName === 'COLGROUP' ? table.children[0] : null;
            if (colGroup) {
                /** @type {?} */
                var col = colGroup.children[resizeColumnIndex];
                /** @type {?} */
                var nextCol = col.nextElementSibling;
                col.style.width = newColumnWidth + 'px';
                if (nextCol) {
                    if (nextColumnWidth && this.fitColumns) {
                        nextCol.style.width = nextColumnWidth + 'px';
                    }
                }
            }
            else {
                throw new Error('Scrollable tables require a colgroup to support resizable columns');
            }
        }
    };
    /**
     * @return {?}
     */
    TreeTableComponent.prototype.onSearch = /**
     * @return {?}
     */
    function () {
        this.state.searchRowNodes = null;
        this.state.searched = !!this.searchData.value;
        if (this.searchData.value) {
            this.searchData.value = this.searchData.value.trim();
        }
        this.search.emit(this.searchData);
    };
    /**
     * @param {?} node
     * @param {?=} parent
     * @return {?}
     */
    TreeTableComponent.prototype.insert = /**
     * @param {?} node
     * @param {?=} parent
     * @return {?}
     */
    function (node, parent) {
        if (parent) {
            if (!parent.children) {
                parent.children = [];
            }
            parent.children.push(node);
            this.expandNode(parent.data[this.idField]);
            this.appendNew.emit({ parent: parent });
        }
        else {
            this.data.push(node);
        }
        this.updateSerializedValue();
    };
    /**
     * @param {?} data
     * @param {?=} parent
     * @return {?}
     */
    TreeTableComponent.prototype.append = /**
     * @param {?} data
     * @param {?=} parent
     * @return {?}
     */
    function (data, parent) {
        if (data && data[this.idField]) {
            this.insert({ data: data, id: data[this.idField] }, parent);
        }
        else {
            this.writeConsole('Please set id value.', 'warn');
        }
    };
    /**
     * @private
     * @param {?} parent
     * @return {?}
     */
    TreeTableComponent.prototype.emitAppendNew = /**
     * @private
     * @param {?} parent
     * @return {?}
     */
    function (parent) {
        if (this.virtualized) {
            /** @type {?} */
            var nodePosY = this.psRef.directiveRef.elementRef.nativeElement.scrollTop;
            this.updateSerializedValue(nodePosY);
        }
        else {
            this.updateSerializedValue();
        }
    };
    /**
     * @param {?} nodes
     * @param {?} parent
     * @param {?=} emit
     * @return {?}
     */
    TreeTableComponent.prototype.appendChildren = /**
     * @param {?} nodes
     * @param {?} parent
     * @param {?=} emit
     * @return {?}
     */
    function (nodes, parent, emit) {
        if (emit === void 0) { emit = true; }
        var _a;
        if (nodes && nodes.length) {
            if (parent) {
                (_a = parent.children).push.apply(_a, tslib_1.__spread(nodes));
                this.emitAppendNew(parent);
                if (emit) {
                    this.appendNew.emit({ parent: parent });
                }
            }
            else {
                throw new Error('未找到父级节点');
            }
        }
        else {
            this.updateSerializedValue();
            this.writeConsole('添加子节点的数据为空', 'warn');
        }
    };
    /**
     * @param {?} nodes
     * @param {?} parent
     * @param {?=} emit
     * @return {?}
     */
    TreeTableComponent.prototype.loadChildren = /**
     * @param {?} nodes
     * @param {?} parent
     * @param {?=} emit
     * @return {?}
     */
    function (nodes, parent, emit) {
        if (emit === void 0) { emit = true; }
        if (parent) {
            parent.children = nodes || [];
            this.emitAppendNew(parent);
            if (emit) {
                this.appendNew.emit({ parent: parent });
            }
        }
    };
    /**
     * @param {?} nodeId
     * @return {?}
     */
    TreeTableComponent.prototype.remove = /**
     * @param {?} nodeId
     * @return {?}
     */
    function (nodeId) {
        var _this = this;
        if (nodeId) {
            /** @type {?} */
            var rowNode = this.findRowNode(nodeId);
            if (rowNode) {
                // remove(this.state.rowNodes, (n) => {
                //     return n.id === nodeId;
                // });
                if (this.selectValue === nodeId) {
                    this.selectedRow = null;
                    this.selectValue = null;
                }
                if (rowNode.parent) {
                    remove(rowNode.parent.children, (/**
                     * @param {?} n
                     * @return {?}
                     */
                    function (n) {
                        return n.data[_this.idField] === nodeId;
                    }));
                }
                else {
                    remove(this.state.rowNodes, (/**
                     * @param {?} n
                     * @return {?}
                     */
                    function (n) {
                        return n.id === nodeId;
                    }));
                    this.data = this.data.filter((/**
                     * @param {?} n
                     * @return {?}
                     */
                    function (n) { return n.data[_this.idField] !== nodeId; }));
                }
                this.updateSerializedValue();
                this.detectChanges();
                this.ttService.onRemove(rowNode);
                this.removed.emit(rowNode);
            }
        }
    };
    /**
     * @param {?} nodeId
     * @param {?} data
     * @return {?}
     */
    TreeTableComponent.prototype.update = /**
     * @param {?} nodeId
     * @param {?} data
     * @return {?}
     */
    function (nodeId, data) {
        if (nodeId && data) {
            /** @type {?} */
            var rowNode = this.findRowNode(nodeId);
            if (rowNode) {
                rowNode.node.data = extend(rowNode.node.data, data);
                this.detectChanges();
                this.ttService.onUpdate(rowNode);
                this.updated.emit(rowNode);
            }
        }
    };
    /**
     * @param {?} nodeid
     * @param {?} property
     * @return {?}
     */
    TreeTableComponent.prototype.updateNodeProperty = /**
     * @param {?} nodeid
     * @param {?} property
     * @return {?}
     */
    function (nodeid, property) {
        /** @type {?} */
        var rowNode = this.findRowNode(nodeid);
        if (rowNode && property) {
            Object.keys(property).forEach((/**
             * @param {?} k
             * @return {?}
             */
            function (k) {
                rowNode.node[k] = property[k];
            }));
        }
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableComponent.prototype.setScorllBodyHeight = /**
     * @private
     * @return {?}
     */
    function () {
        this.scorllBodyHeight = this.height;
        if (this.showFilterBar) {
            this.scorllBodyHeight = this.scorllBodyHeight - 46;
        }
        if (this.fixedHeader && this.showHeader) {
            if (this.headerBox && (this.headerWrap || this.useGroupHeader)) {
                /** @type {?} */
                var hh = this.headerBox.nativeElement.clientHeight;
                this.scorllBodyHeight = this.scorllBodyHeight - hh;
            }
            else {
                // 宽松版时，表头高度增高，需要按实际取得表头高度
                /** @type {?} */
                var _headerHeight = this.headerHeight;
                /** @type {?} */
                var themesKey = localStorage.getItem('gsp_rtf_themSKey');
                if (themesKey === 'loose' && this.headerBox) {
                    _headerHeight = this.headerBox.nativeElement.getBoundingClientRect().height;
                }
                this.scorllBodyHeight = this.scorllBodyHeight - _headerHeight;
            }
        }
        if (this.pagination) {
            this.scorllBodyHeight = this.scorllBodyHeight - this.pagerHeight;
        }
        this.detectChanges();
    };
    /**
     * @private
     * @param {?} w
     * @return {?}
     */
    TreeTableComponent.prototype.setWidth = /**
     * @private
     * @param {?} w
     * @return {?}
     */
    function (w) {
        this.width = w;
    };
    /**
     * @param {?=} size
     * @return {?}
     */
    TreeTableComponent.prototype.resize = /**
     * @param {?=} size
     * @return {?}
     */
    function (size) {
        if (size) {
            /** @type {?} */
            var w = parseInt('' + size.width, 10);
            /** @type {?} */
            var h = parseInt('' + size.height, 10);
            if (this.width === w && this.height === h) {
                if (this.state.scrollY) {
                    this.psRef.directiveRef.scrollToY(this.state.scrollY);
                }
                if (this.state.scrollX) {
                    this.psRef.directiveRef.scrollToX(this.state.scrollX);
                }
                return;
            }
            this.setWidth(w);
            this.height = h;
        }
        this.setScorllBodyHeight();
        if (this.data && this.data.length) {
            this.renderVirtualRowNodes();
        }
        // setTimeout(() => {
        //     if (this.psRef) {
        //         this.psRef.directiveRef.update();
        //     }
        // }, 100);
    };
    /**
     * @param {?} data
     * @return {?}
     */
    TreeTableComponent.prototype.loadData = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        if (this.showLines) {
            this.isLoadNewDataSetEmpty = true;
            this.data = [];
            this.isLoadNewDataSetEmpty = false;
        }
        this.data = data;
    };
    /**
     * @return {?}
     */
    TreeTableComponent.prototype.empty = /**
     * @return {?}
     */
    function () {
        this.data = [];
    };
    /**
     * @return {?}
     */
    TreeTableComponent.prototype.getCurrentAllRowNodes = /**
     * @return {?}
     */
    function () {
        if (this.state.searched && this.state.searchRowNodes && this.state.searchRowNodes.length) {
            return this.state.searchRowNodes || this.state.rowNodes;
        }
        else {
            return this.state.rowNodes;
        }
    };
    /**
     * @param {?=} detectChanges
     * @return {?}
     */
    TreeTableComponent.prototype.clearAll = /**
     * @param {?=} detectChanges
     * @return {?}
     */
    function (detectChanges) {
        var _this = this;
        if (detectChanges === void 0) { detectChanges = true; }
        this.state.rowNodes.filter((/**
         * @param {?} rn
         * @return {?}
         */
        function (rn) { return rn.indeterminate; })).forEach((/**
         * @param {?} rn
         * @return {?}
         */
        function (rn) {
            rn.indeterminate = false;
            _this.ttService.onChangeCheckboxStatus(rn);
        }));
        this.state.rowNodes = this.state.rowNodes.map((/**
         * @param {?} row
         * @return {?}
         */
        function (row) {
            row.isChecked = false;
            row.isSelected = false;
            row.indeterminate = false;
            return row;
        }));
        // if (this.searchData && this.searchData.value) {
        if (this.state.searched && this.state.searchRowNodes && this.state.searchRowNodes.length) {
            this.serializedValue = this.state.searchRowNodes.map((/**
             * @param {?} row
             * @return {?}
             */
            function (row) {
                row.isChecked = false;
                row.isSelected = false;
                row.indeterminate = false;
                return row;
            }));
        }
        this.checkeds = [];
        this.selections = [];
        this.selectedRow = undefined;
        if (this.showCheckAll && this.headerCheckboxCmp) {
            this.headerCheckboxCmp.chkAll.nativeElement.indeterminate = false;
            this.headerCheckboxCmp.checked = false;
        }
        if (detectChanges) {
            this.detectChanges();
        }
        return this;
    };
    /**
     * @return {?}
     */
    TreeTableComponent.prototype.detectChanges = /**
     * @return {?}
     */
    function () {
        this.cdRef.markForCheck();
        // tslint:disable-next-line:no-string-literal
        if (!this.cdRef['destroyed']) {
            this.cdRef.detectChanges();
        }
        return this;
    };
    /**
     * @return {?}
     */
    TreeTableComponent.prototype.clearCheckeds = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.checkeds && this.checkeds.length) {
            this.findRowNodes(this.checkeds.map((/**
             * @param {?} tn
             * @return {?}
             */
            function (tn) { return tn.data[_this.idField]; }))).forEach((/**
             * @param {?} rn
             * @return {?}
             */
            function (rn) {
                rn.isChecked = false;
            }));
        }
        this.checkeds = [];
        if (this.showCheckAll && this.headerCheckboxCmp) {
            this.headerCheckboxCmp.chkAll.nativeElement.indeterminate = false;
            this.headerCheckboxCmp.checked = false;
        }
        return this;
    };
    /**
     * @return {?}
     */
    TreeTableComponent.prototype.clearSelections = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.serializedValue && this.serializedValue.length) {
            this.serializedValue.forEach((/**
             * @param {?} n
             * @return {?}
             */
            function (n) {
                n.isSelected = false;
            }));
        }
        this.state.rowNodes.forEach((/**
         * @param {?} n
         * @return {?}
         */
        function (n) {
            n.isSelected = false;
        }));
        if (this.selections && this.selections.length) {
            /** @type {?} */
            var nodeIds = this.selections.map((/**
             * @param {?} tn
             * @return {?}
             */
            function (tn) { return tn.data[_this.idField]; }));
            this.findRowNodes(nodeIds).forEach((/**
             * @param {?} rn
             * @return {?}
             */
            function (rn) {
                rn.isSelected = false;
                if (_this.singleSelect) {
                    rn.isChecked = false;
                }
            }));
        }
        this.selections = undefined;
        this.selectedRow = undefined;
        return this;
    };
    /** 选中第1个可以选中的节点 */
    /**
     * 选中第1个可以选中的节点
     * @return {?}
     */
    TreeTableComponent.prototype.selectFirstNode = /**
     * 选中第1个可以选中的节点
     * @return {?}
     */
    function () {
        if (this.state.rowNodes && this.state.rowNodes.length) {
            /** @type {?} */
            var firstCanSelectNode = this.state.rowNodes.find((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return n.node.selectable; }));
            if (firstCanSelectNode) {
                this.selectNode(firstCanSelectNode.id);
            }
        }
    };
    /**
     * @private
     * @param {?} id
     * @return {?}
     */
    TreeTableComponent.prototype.scrollToCurrentRow = /**
     * @private
     * @param {?} id
     * @return {?}
     */
    function (id) {
        /** @type {?} */
        var trId = 'rownode-' + id;
        // const trEle =    document.getElementById(trId);
        /** @type {?} */
        var trEle = this.el.nativeElement.querySelector('#' + trId) || document.getElementById(trId);
        if (trEle && trEle.closest('.farris-treetable') && trEle.closest('.farris-treetable').id === this.id) {
            if (!this.isElementInViewport(trEle)) {
                if (trEle.scrollIntoViewIfNeeded) {
                    trEle.scrollIntoViewIfNeeded();
                    return true;
                }
                /** @type {?} */
                var browserInfo = this.utils.getBrowserType();
                if (browserInfo.ff && this.utils.getFFVer() < 58) {
                    trEle.scrollIntoView();
                }
                else {
                    trEle.scrollIntoView({ block: 'nearest', inline: 'nearest' });
                }
            }
            else {
                trEle.scrollIntoView({ block: 'nearest' });
            }
            return true;
        }
        return false;
    };
    /**
     * @private
     * @param {?} el
     * @return {?}
     */
    TreeTableComponent.prototype.isElementInViewport = /**
     * @private
     * @param {?} el
     * @return {?}
     */
    function (el) {
        /** @type {?} */
        var containerEl = this.el.nativeElement.querySelector('.farris-treetable-body');
        if (!containerEl) {
            return false;
        }
        /** @type {?} */
        var container = containerEl.getBoundingClientRect();
        /** @type {?} */
        var viewPortHeight = container.height;
        /** @type {?} */
        var offsetTop = el.offsetTop + this.topHideHeight;
        /** @type {?} */
        var scrollTop = this.psRef.directiveRef.elementRef.nativeElement.scrollTop;
        /** @type {?} */
        var top = offsetTop - scrollTop;
        return top >= 0 && top <= viewPortHeight;
    };
    /**
     * @private
     * @param {?} nodeId
     * @return {?}
     */
    TreeTableComponent.prototype._scrollToNode = /**
     * @private
     * @param {?} nodeId
     * @return {?}
     */
    function (nodeId) {
        this.scrollToCurrentNode(nodeId);
    };
    /**
     * @param {?=} nodeid
     * @return {?}
     */
    TreeTableComponent.prototype.scrollToCurrentNode = /**
     * @param {?=} nodeid
     * @return {?}
     */
    function (nodeid) {
        var _this = this;
        if (nodeid === void 0) { nodeid = ''; }
        /** @type {?} */
        var id = nodeid;
        if (!nodeid && this.selectedRow) {
            id = this.selectedRow.id;
        }
        /** @type {?} */
        var result = this.scrollToCurrentRow(id);
        if (!result) {
            /** @type {?} */
            var rowNode = this.findRowNode(id);
            /** @type {?} */
            var showRowsOnePager = Math.ceil(this.scorllBodyHeight / this.rowHeight) + 1;
            if (rowNode.parents && rowNode.parents.length) {
                rowNode.parents.forEach((/**
                 * @param {?} pid
                 * @return {?}
                 */
                function (pid) {
                    _this.expandNode(pid, false, false);
                }));
            }
            /** @type {?} */
            var rowIndex = this.state.rowNodes.filter((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return n.visible; })).findIndex((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return n.id === id; }));
            if (rowIndex < showRowsOnePager) {
                if (this.virtualized) {
                    this.renderData(0);
                }
                setTimeout((/**
                 * @return {?}
                 */
                function () {
                    _this.scrollToCurrentRow(id);
                }));
                return;
            }
            /** @type {?} */
            var top_1 = rowIndex * this.rowHeight;
            if (this.virtualized) {
                this.renderData(top_1 - this.rowHeight);
                setTimeout((/**
                 * @return {?}
                 */
                function () {
                    _this.scrollToCurrentRow(id);
                    if (_this.psRef && _this.psRef.directiveRef) {
                        _this.psRef.directiveRef.elementRef.nativeElement.scrollTop += 1;
                    }
                }), 50);
            }
            else {
                this.scrollToY(top_1 - this.rowHeight);
                this.scrollToCurrentRow(id);
            }
        }
    };
    /** 选中指定ID 的节点,
     * detectChanges: 触发脏值检查，默认为 true
     * gotocurrent: 使用选中节点可见，默认为 true
     */
    /**
     * 选中指定ID 的节点,
     * detectChanges: 触发脏值检查，默认为 true
     * gotocurrent: 使用选中节点可见，默认为 true
     * @param {?} id
     * @param {?=} detectChanges
     * @param {?=} gotocurrent
     * @return {?}
     */
    TreeTableComponent.prototype.selectNode = /**
     * 选中指定ID 的节点,
     * detectChanges: 触发脏值检查，默认为 true
     * gotocurrent: 使用选中节点可见，默认为 true
     * @param {?} id
     * @param {?=} detectChanges
     * @param {?=} gotocurrent
     * @return {?}
     */
    function (id, detectChanges, gotocurrent) {
        var _this = this;
        if (detectChanges === void 0) { detectChanges = true; }
        if (gotocurrent === void 0) { gotocurrent = true; }
        if (!id) {
            return this;
        }
        /** @type {?} */
        var node = this.findRowNode(id);
        /** @type {?} */
        var emit = !this.selectedRow || (this.selectedRow && id !== this.selectedRow.id);
        if (node && emit) {
            node.isSelected = true;
            if (this.singleSelect || this.onlySelectSelf) {
                this.clearSelections();
                node.isSelected = true;
                this.selections = [node.node];
                if (this.checkOnSelect && this.showCheckbox) {
                    node.isChecked = true;
                    if (this.multiSelect) {
                        this.setCheckeds(node);
                    }
                    else {
                        this.clearCheckeds();
                        this.checkeds = [node.node];
                    }
                    if (this.cascadeCheck && this.cascadeUp) {
                        this.updateParentCheckboxStatus(node);
                    }
                }
            }
            else {
                this.setSelections(node);
            }
            this.selectedRow = node.node;
            this.selectNodeChangedSubject.next(id);
            this.nodeSelected.emit({ node: node.node, instance: this });
            if (this.serializedValue.find((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return n.id == _this.selectedRow.id; }))) {
                this.serializedValue.find((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) { return n.id == _this.selectedRow.id; })).isSelected = true;
            }
            if (detectChanges) {
                this.detectChanges();
            }
            if (gotocurrent && this.fixedHeader) {
                this.scrollToCurrentNode();
            }
        }
        else {
            if (!node) {
                this.selectedRow = null;
                this.writeConsole("\u672A\u627E\u5230ID\u4E3A " + id + " \u7684\u6570\u636E\uFF01\uFF01");
            }
        }
        return this;
    };
    /** 取消选中 */
    /**
     * 取消选中
     * @param {?} id
     * @param {?=} detectChanges
     * @return {?}
     */
    TreeTableComponent.prototype.unSelectNode = /**
     * 取消选中
     * @param {?} id
     * @param {?=} detectChanges
     * @return {?}
     */
    function (id, detectChanges) {
        if (detectChanges === void 0) { detectChanges = true; }
        /** @type {?} */
        var rowNode = this.findRowNode(id);
        if (rowNode) {
            rowNode.isSelected = false;
            if (this.singleSelect) {
                this.clearSelections();
                this.selectedRow = null;
                rowNode.isChecked = false;
                this.selections = [];
            }
            else {
                if (this.onlySelectSelf) {
                    this.selections = [];
                }
                else {
                    this.setSelections(rowNode);
                }
            }
            if (detectChanges) {
                this.detectChanges();
            }
            this.nodeUnSelect.emit({ node: rowNode.node, instance: this });
        }
        else {
            this.writeConsole("\u672A\u627E\u5230ID\u4E3A" + id + "\u7684\u6570\u636E\uFF01\uFF01");
        }
    };
    /** 选中多行数据 */
    /**
     * 选中多行数据
     * @param {?} ids
     * @param {?=} detectChanges
     * @param {?=} emitNodeSelected
     * @return {?}
     */
    TreeTableComponent.prototype.selectNodes = /**
     * 选中多行数据
     * @param {?} ids
     * @param {?=} detectChanges
     * @param {?=} emitNodeSelected
     * @return {?}
     */
    function (ids, detectChanges, emitNodeSelected) {
        var _this = this;
        if (detectChanges === void 0) { detectChanges = true; }
        if (emitNodeSelected === void 0) { emitNodeSelected = false; }
        if (ids && ids.length) {
            /** @type {?} */
            var nodes = this.findRowNodes(ids).map((/**
             * @param {?} rn
             * @return {?}
             */
            function (rn) {
                rn.isSelected = true;
                _this.setSelections(rn);
                return rn.node;
            }));
            this.selections = tslib_1.__spread(this.selections);
            if (detectChanges) {
                this.detectChanges();
            }
            this.selectNodeChangedSubject.next(ids.join(','));
            if (emitNodeSelected) {
                this.nodeSelected.emit({ node: nodes, instance: this });
            }
        }
        return this;
    };
    /** 取消选中 */
    /**
     * 取消选中
     * @param {?=} ids
     * @return {?}
     */
    TreeTableComponent.prototype.unSelectNodes = /**
     * 取消选中
     * @param {?=} ids
     * @return {?}
     */
    function (ids) {
        var _this = this;
        if (ids && ids.length) {
            /** @type {?} */
            var rownodes = this.findRowNodes(ids);
            if (rownodes && rownodes.length) {
                rownodes.forEach((/**
                 * @param {?} rn
                 * @return {?}
                 */
                function (rn) {
                    rn.isSelected = false;
                    _this.setSelections(rn);
                }));
                this.selections = tslib_1.__spread(this.selections);
                this.detectChanges();
                this.nodeUnSelect.emit({ node: rownodes.map((/**
                     * @param {?} r
                     * @return {?}
                     */
                    function (r) { return r.node; })), instance: this });
            }
        }
        else {
            this.clearSelections();
            this.detectChanges();
        }
    };
    /**
     * 钩选指定的节点
     * @param updateParentCheckboxStatus: 是否更新父级节点checkbox 状态, 默认为 true
     * @param detectChanges 触发变更检测。默认为 true
     */
    /**
     * 钩选指定的节点
     * @param {?} id
     * @param {?=} updateParentCheckboxStatus
     * @param {?=} detectChanges 触发变更检测。默认为 true
     * @return {?}
     */
    TreeTableComponent.prototype.checkedNode = /**
     * 钩选指定的节点
     * @param {?} id
     * @param {?=} updateParentCheckboxStatus
     * @param {?=} detectChanges 触发变更检测。默认为 true
     * @return {?}
     */
    function (id, updateParentCheckboxStatus, detectChanges) {
        if (updateParentCheckboxStatus === void 0) { updateParentCheckboxStatus = true; }
        if (detectChanges === void 0) { detectChanges = true; }
        if (this.isEnableMultiSelect()) {
            /** @type {?} */
            var node = this.findRowNode(id);
            if (node) {
                node.isChecked = true;
                if (!this.isChecked(node.node)) {
                    // this.checkeds = [...this.checkeds || [], node.node];
                    this.setCheckeds(node, false);
                    if (updateParentCheckboxStatus && this.cascadeCheck && this.cascadeUp) {
                        this.updateParentCheckboxStatus(node);
                    }
                }
                if (detectChanges) {
                    this.detectChanges();
                }
                this.nodeChecked.emit({ originalEvent: null, node: node.node, instance: this });
            }
            else {
                this.writeConsole("\u672A\u627E\u5230ID\u4E3A" + id + "\u7684\u6570\u636E\uFF01\uFF01");
            }
        }
    };
    /**
     * @param {?} id
     * @param {?=} updateParentCheckboxStatus
     * @return {?}
     */
    TreeTableComponent.prototype.unCheckedNode = /**
     * @param {?} id
     * @param {?=} updateParentCheckboxStatus
     * @return {?}
     */
    function (id, updateParentCheckboxStatus) {
        if (updateParentCheckboxStatus === void 0) { updateParentCheckboxStatus = true; }
        if (this.isEnableMultiSelect()) {
            /** @type {?} */
            var rownode = this.findRowNode(id);
            if (rownode) {
                rownode.isChecked = false;
                this.setCheckeds(rownode);
                if (this.selectOnCheck) {
                    rownode.isSelected = false;
                    this.setSelections(rownode);
                }
                if (this.selectedRow && this.selectedRow.id === id) {
                    this.selectedRow = null;
                }
                if (this.singleSelect || !this.cascadeCheck) {
                    this.updateNodeStatus();
                    if (updateParentCheckboxStatus && this.cascadeCheck && this.cascadeUp) {
                        this.updateParentCheckboxStatus(rownode);
                    }
                    if (this.checkValues) {
                        this.checkValues = this.checkValues.filter((/**
                         * @param {?} n
                         * @return {?}
                         */
                        function (n) { return n !== id; }));
                        this.checkValuesChange.emit(this.checkValues);
                    }
                    this.detectChanges();
                    this.nodeUnChecked.emit({ node: rownode, instance: this });
                }
                else {
                    /** @type {?} */
                    var unNodes = this.cascadeNodes(rownode, false);
                    this.checkeds = tslib_1.__spread(this.checkeds);
                    this.checkValuesChange.emit(this.checkValues);
                    this.detectChanges();
                    this.nodeUnChecked.emit({ node: rownode, nodes: unNodes, instance: this });
                }
            }
            else {
                this.writeConsole("\u672A\u627E\u5230ID\u4E3A" + id + "\u7684\u6570\u636E\uFF01\uFF01");
            }
        }
    };
    /**
     * @private
     * @param {?} ids
     * @param {?} checked
     * @return {?}
     */
    TreeTableComponent.prototype._checkedNodes = /**
     * @private
     * @param {?} ids
     * @param {?} checked
     * @return {?}
     */
    function (ids, checked) {
        var _this = this;
        /** @type {?} */
        var parentIDS = [];
        /** @type {?} */
        var nodes = this.findRowNodes(ids).map((/**
         * @param {?} rn
         * @return {?}
         */
        function (rn) {
            parentIDS.push(rn.parents);
            if (rn.node.selectable) {
                rn.isChecked = checked;
                _this.setCheckeds(rn, false);
            }
            return rn.node;
        }));
        this.checkeds = tslib_1.__spread(this.checkeds);
        if (this.cascadeCheck && this.cascadeUp) {
            // 更新父节点复框的选中状态
            this.updateParentsCheckStatus(parentIDS);
        }
        return nodes;
    };
    /** 批量选中节点
     * @param ids: id 集合
     * @param detectChanges: boolean  默认为 true ,是否触发变更检测
     * closeCascade:  执行取消钩选时是否关闭级联功能。默认为 false
     *      设为true时，钩选将禁用级联的功能，仅处理当前节点的选中状态。执行完毕后，恢复原先的级联选项。
     */
    /**
     * 批量选中节点
     * @param {?} ids
     * @param {?=} detectChanges
     * @param {?=} emit
     * @param {?=} closeCascade
     * @return {?}
     */
    TreeTableComponent.prototype.checkedNodes = /**
     * 批量选中节点
     * @param {?} ids
     * @param {?=} detectChanges
     * @param {?=} emit
     * @param {?=} closeCascade
     * @return {?}
     */
    function (ids, detectChanges, emit, closeCascade) {
        if (detectChanges === void 0) { detectChanges = true; }
        if (emit === void 0) { emit = true; }
        if (this.isEnableMultiSelect()) {
            if (ids && ids.length) {
                /** @type {?} */
                var _cascade = this.cascadeCheck;
                if (closeCascade && _cascade) {
                    this.cascadeCheck = false;
                }
                /** @type {?} */
                var nodes = this._checkedNodes(ids, true);
                if (closeCascade && _cascade) {
                    // 恢复级联
                    this.cascadeCheck = true;
                }
                this.updateAllCheckboxStatus();
                // this.checkeds = nodes;
                if (detectChanges) {
                    this.detectChanges();
                }
                if (emit) {
                    this.nodeChecked.emit({ originalEvent: null, node: nodes, nodes: nodes, instance: this });
                }
            }
        }
    };
    /**
     * 取消选中的节点.
     * ids: 标识Id 数组
     * closeCascade: 执行取消钩选时是否关闭级联功能。默认为 false
     *     设为true时，钩选将禁用级联的功能，仅处理当前节点的选中状态。执行完毕后，恢复原先的级联选项。
     * emit: 是否触发取消勾选事件。默认为 true
     */
    /**
     * 取消选中的节点.
     * ids: 标识Id 数组
     * closeCascade: 执行取消钩选时是否关闭级联功能。默认为 false
     *     设为true时，钩选将禁用级联的功能，仅处理当前节点的选中状态。执行完毕后，恢复原先的级联选项。
     * emit: 是否触发取消勾选事件。默认为 true
     * @param {?} ids
     * @param {?=} closeCascade
     * @param {?=} emit
     * @return {?}
     */
    TreeTableComponent.prototype.unCheckedNodes = /**
     * 取消选中的节点.
     * ids: 标识Id 数组
     * closeCascade: 执行取消钩选时是否关闭级联功能。默认为 false
     *     设为true时，钩选将禁用级联的功能，仅处理当前节点的选中状态。执行完毕后，恢复原先的级联选项。
     * emit: 是否触发取消勾选事件。默认为 true
     * @param {?} ids
     * @param {?=} closeCascade
     * @param {?=} emit
     * @return {?}
     */
    function (ids, closeCascade, emit) {
        if (emit === void 0) { emit = true; }
        if (ids && ids.length) {
            /** @type {?} */
            var _cascade = this.cascadeCheck;
            if (closeCascade && _cascade) {
                this.cascadeCheck = false;
            }
            /** @type {?} */
            var nodes = this._checkedNodes(ids, false);
            if (closeCascade && _cascade) {
                this.cascadeCheck = true;
            }
            this.detectChanges();
            // this.checkeds = nodes;
            if (emit) {
                this.nodeUnChecked.emit({ originalEvent: null, node: nodes, nodes: nodes, instance: this });
            }
        }
        else {
            this.clearCheckeds();
            this.detectChanges();
        }
    };
    /**
     * @param {?} id
     * @return {?}
     */
    TreeTableComponent.prototype.findRowNode = /**
     * @param {?} id
     * @return {?}
     */
    function (id) {
        if (id) {
            if (this.state.rowNodes) {
                return this.state.rowNodes.find((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) { return n.id === id; }));
            }
        }
        return undefined;
    };
    /** 将在 v0.2.x 废弃；请使用 findRowNode 方法 */
    /**
     * 将在 v0.2.x 废弃；请使用 findRowNode 方法
     * @param {?} id
     * @return {?}
     */
    TreeTableComponent.prototype.findNode = /**
     * 将在 v0.2.x 废弃；请使用 findRowNode 方法
     * @param {?} id
     * @return {?}
     */
    function (id) {
        return this.findRowNode(id);
    };
    /**
     * 根据当前节点ID，获取顶级父节点
     * @param id 当前节点ID
     * @returns 返回顶级节点
     */
    /**
     * 根据当前节点ID，获取顶级父节点
     * @param {?} id 当前节点ID
     * @return {?} 返回顶级节点
     */
    TreeTableComponent.prototype.getRoot = /**
     * 根据当前节点ID，获取顶级父节点
     * @param {?} id 当前节点ID
     * @return {?} 返回顶级节点
     */
    function (id) {
        /** @type {?} */
        var rowNode = this.findRowNode(id);
        if (rowNode) {
            if (rowNode.parents && rowNode.parents.length) {
                return this.findRowNode(rowNode.parents[0]);
            }
            return rowNode;
        }
        return null;
    };
    /**
     * @param {?} ids
     * @return {?}
     */
    TreeTableComponent.prototype.findRowNodes = /**
     * @param {?} ids
     * @return {?}
     */
    function (ids) {
        return this.state.rowNodes.filter((/**
         * @param {?} rn
         * @return {?}
         */
        function (rn) { return ids.indexOf(rn.id) > -1; }));
    };
    /**
     * @param {?=} args
     * @return {?}
     */
    TreeTableComponent.prototype.checkAllNodes = /**
     * @param {?=} args
     * @return {?}
     */
    function (args) {
        var _this = this;
        /** @type {?} */
        var rowNodes = this.getCurrentAllRowNodes();
        rowNodes = rowNodes.filter((/**
         * @param {?} n
         * @return {?}
         */
        function (n) { return (n.node.selectable || n.node.selectable === undefined); }));
        this.checkeds = rowNodes.map((/**
         * @param {?} n
         * @return {?}
         */
        function (n) {
            n.indeterminate = false;
            _this.ttService.onChangeCheckboxStatus(n);
            if (n.node.selectable || n.node.selectable === undefined) {
                n.isChecked = true;
            }
            return n.node;
        }));
        if (this.selectOnCheck && !this.onlySelectSelf) {
            this.selections = rowNodes.map((/**
             * @param {?} n
             * @return {?}
             */
            function (n) {
                if (n.node.selectable || n.node.selectable === undefined) {
                    n.isSelected = true;
                }
                return n.node;
            }));
        }
        if (this.state.searched) {
            rowNodes.forEach((/**
             * @param {?} rn
             * @return {?}
             */
            function (rn) {
                /** @type {?} */
                var row = _this.state.rowNodes.find((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) { return n.id === rn.id; }));
                if (row) {
                    row.isSelected = rn.isSelected;
                    row.isChecked = rn.isChecked;
                }
            }));
        }
        this.checkAll.emit(args);
        this.updateAllCheckboxStatus();
        this.detectChanges();
    };
    /**
     * @param {?=} args
     * @return {?}
     */
    TreeTableComponent.prototype.unCheckAllNodes = /**
     * @param {?=} args
     * @return {?}
     */
    function (args) {
        this.clearAll();
        this.unCheckAll.emit(args);
        this.detectChanges();
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableComponent.prototype.isEnableMultiSelect = /**
     * @private
     * @return {?}
     */
    function () {
        if (this.singleSelect) {
            if (!this.showCheckbox) {
                return false;
            }
            return true;
        }
        return true;
    };
    // 从数据中获取节点图标
    // iconField 为 object
    //      如果 展开图标为空，折叠图标不为空，或反之，则展开与折叠图标保持一至；
    //      如果 叶子图标为空，则使用组件默认的图标
    // iconField 为 字符串： 则叶子 展开 折叠 图标使用同一个。 如果为空， 则使用组件默认图标
    // 从数据中获取节点图标
    // iconField 为 object
    //      如果 展开图标为空，折叠图标不为空，或反之，则展开与折叠图标保持一至；
    //      如果 叶子图标为空，则使用组件默认的图标
    // iconField 为 字符串： 则叶子 展开 折叠 图标使用同一个。 如果为空， 则使用组件默认图标
    /**
     * @private
     * @param {?} tn
     * @return {?}
     */
    TreeTableComponent.prototype.getNodeIconFromData = 
    // 从数据中获取节点图标
    // iconField 为 object
    //      如果 展开图标为空，折叠图标不为空，或反之，则展开与折叠图标保持一至；
    //      如果 叶子图标为空，则使用组件默认的图标
    // iconField 为 字符串： 则叶子 展开 折叠 图标使用同一个。 如果为空， 则使用组件默认图标
    /**
     * @private
     * @param {?} tn
     * @return {?}
     */
    function (tn) {
        /** @type {?} */
        var leaf = null;
        /** @type {?} */
        var expand = null;
        /** @type {?} */
        var collapse = null;
        if (this.useIconFromData) {
            if (this.iconField) {
                /** @type {?} */
                var _iconField = '';
                if (typeof this.iconField === 'string') {
                    _iconField = this.iconField;
                    if (tn[_iconField]) {
                        leaf = tn[_iconField];
                    }
                    else {
                        leaf = this.utils.getValue(_iconField, tn.data);
                    }
                    expand = collapse = leaf;
                }
                else {
                    if (this.iconField.leaf) {
                        leaf = this.utils.getValue(this.iconField.leaf, tn.data);
                    }
                    if (this.iconField.expand) {
                        expand = this.utils.getValue(this.iconField.expand, tn.data);
                    }
                    if (this.iconField.collapse) {
                        collapse = this.utils.getValue(this.iconField.collapse, tn.data);
                    }
                    if (expand && !collapse) {
                        collapse = expand;
                    }
                    if (!expand && collapse) {
                        expand = collapse;
                    }
                }
            }
        }
        return {
            leaf: leaf, expand: expand, collapse: collapse
        };
    };
    /**
     * @param {?} treeNode
     * @return {?}
     */
    TreeTableComponent.prototype.getTreeIcon = /**
     * @param {?} treeNode
     * @return {?}
     */
    function (treeNode) {
        var _a;
        /** @type {?} */
        var tn = treeNode;
        /** @type {?} */
        var leafIcon = this.leafIcon || 'file';
        /** @type {?} */
        var expandIcon = this.expandIcon || 'folder-open';
        /** @type {?} */
        var collapseIcon = this.collapseIcon || 'folder';
        /** @type {?} */
        var loading = 'f-loading-round';
        if (tn['showLoading']) {
            return _a = {}, _a[loading] = true, _a;
        }
        if (tn.icon) {
            leafIcon = tn.icon;
        }
        if (tn.expandedIcon) {
            expandIcon = tn.expandedIcon;
        }
        if (tn.collapsedIcon) {
            collapseIcon = tn.collapsedIcon;
        }
        if (this.useIconFromData) {
            var _b = this.getNodeIconFromData(treeNode), leaf = _b.leaf, expand = _b.expand, collapse = _b.collapse;
            if (this.whenDataIconEmptyUseDefault) {
                if (leaf) {
                    leafIcon = leaf;
                }
                if (expand) {
                    expandIcon = expand;
                }
                if (collapse) {
                    collapseIcon = collapse;
                }
            }
            else {
                leafIcon = leaf || '';
                expandIcon = expand || '';
                collapseIcon = collapse || '';
            }
        }
        /** @type {?} */
        var collapsedExpression = (!tn.leaf || !!(tn.children && tn.children.length)) && !tn.expanded;
        /** @type {?} */
        var expandedExpression = !!tn.expanded;
        /** @type {?} */
        var leafExpression = tn.leaf === undefined ? (!tn.children || !tn.children.length) : tn.leaf;
        /** @type {?} */
        var icons = {};
        if (leafExpression && leafIcon) {
            icons[leafIcon] = leafExpression;
        }
        else {
            if (tn.expanded && expandIcon) {
                icons[expandIcon] = expandedExpression;
            }
            else {
                if (collapseIcon) {
                    icons[collapseIcon] = collapsedExpression;
                }
            }
        }
        if (this.iconCls) {
            icons[this.iconCls] = true;
        }
        return icons;
    };
    /**
     * @private
     * @param {?} a
     * @param {?} b
     * @return {?}
     */
    TreeTableComponent.prototype.compare = /**
     * @private
     * @param {?} a
     * @param {?} b
     * @return {?}
     */
    function (a, b) {
        if (typeof a === 'string') {
            return a.localeCompare(b);
        }
        else {
            return a === b ? 0 : (a > b ? 1 : -1);
        }
    };
    /**
     * @private
     * @param {?} r1
     * @param {?} r2
     * @return {?}
     */
    TreeTableComponent.prototype._sort = /**
     * @private
     * @param {?} r1
     * @param {?} r2
     * @return {?}
     */
    function (r1, r2) {
        /** @type {?} */
        var r = 0;
        /** @type {?} */
        var sortFields = this.sortName.split(',');
        /** @type {?} */
        var orders = this.sortOrder.split(',');
        if (!this.sortName) {
            return r;
        }
        var _loop_1 = function (i) {
            /** @type {?} */
            var sn = sortFields[i];
            /** @type {?} */
            var so = orders[i];
            /** @type {?} */
            var col = this_1.columns.find((/**
             * @param {?} c
             * @return {?}
             */
            function (c) { return c.field === sn; }));
            /** @type {?} */
            var orderby = col.sorter || this_1.compare;
            /** @type {?} */
            var v1 = this_1.utils.getValue(sn, r1.data);
            if (v1 === null || v1 === undefined) {
                v1 = '';
            }
            /** @type {?} */
            var v2 = this_1.utils.getValue(sn, r2.data);
            if (v2 === null || v2 === undefined) {
                v2 = '';
            }
            r = orderby(v1, v2);
            if (r !== 0) {
                return { value: r * (so === 'asc' ? 1 : -1) };
            }
        };
        var this_1 = this;
        for (var i = 0; i < sortFields.length; i++) {
            var state_1 = _loop_1(i);
            if (typeof state_1 === "object")
                return state_1.value;
        }
        return r;
    };
    /**
     * @return {?}
     */
    TreeTableComponent.prototype.clientSort = /**
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var sortedData = this.data.sort(this._sort.bind(this));
        /** @type {?} */
        var sortChildNodes = (/**
         * @param {?} childNodes
         * @return {?}
         */
        function (childNodes) {
            childNodes = childNodes.sort(_this._sort.bind(_this));
            childNodes.forEach((/**
             * @param {?} n
             * @return {?}
             */
            function (n) {
                if (n.children && n.children.length) {
                    n.children = n.children.sort(_this._sort.bind(_this));
                    sortChildNodes(n.children);
                }
            }));
            return childNodes;
        });
        sortedData.forEach((/**
         * @param {?} c
         * @return {?}
         */
        function (c) {
            c.children = sortChildNodes(c.children);
        }));
        this.loadData(sortedData);
    };
    /**
     * @param {?} $event
     * @param {?} col
     * @return {?}
     */
    TreeTableComponent.prototype.onSortColumnClick = /**
     * @param {?} $event
     * @param {?} col
     * @return {?}
     */
    function ($event, col) {
        var _this = this;
        if (!col.sortable) {
            return;
        }
        /** @type {?} */
        var sortName = this.sortName;
        /** @type {?} */
        var sortOrder = this.sortOrder;
        /** @type {?} */
        var sortFields = [];
        /** @type {?} */
        var sortOrders = [];
        if (sortName) {
            sortFields = sortName.split(',');
            sortOrders = sortOrder.split(',');
        }
        /** @type {?} */
        var colOrder = col.order || 'asc';
        /** @type {?} */
        var newOrder = colOrder;
        /** @type {?} */
        var i = sortFields.findIndex((/**
         * @param {?} n
         * @return {?}
         */
        function (n) { return n === col.field; }));
        if (i >= 0) {
            /** @type {?} */
            var _order = sortOrders[i] === 'asc' ? 'desc' : 'asc';
            newOrder = _order;
            // if (this.multiSort && newOrder === 'asc') {
            if (newOrder === 'asc') {
                newOrder = undefined;
                sortFields.splice(i, 1);
                sortOrders.splice(i, 1);
            }
            else {
                sortOrders[i] = _order;
            }
        }
        else {
            if (this.multiSort) {
                sortFields.push(col.field);
                sortOrders.push(colOrder);
            }
            else {
                sortFields = [col.field];
                sortOrders = [colOrder];
            }
        }
        col.order = newOrder;
        this.sortName = sortFields.join(',');
        this.sortOrder = sortOrders.join(',');
        if (!this.multiSort) {
            /** @type {?} */
            var updateFieldOrder = (/**
             * @param {?} cols
             * @return {?}
             */
            function (cols) {
                if (!cols || !cols.length) {
                    return;
                }
                cols.forEach((/**
                 * @param {?} c
                 * @return {?}
                 */
                function (c) {
                    c.order = undefined;
                    /** @type {?} */
                    var k = sortFields.findIndex((/**
                     * @param {?} f
                     * @return {?}
                     */
                    function (f) { return f === c.field; }));
                    if (k >= 0) {
                        c.order = sortOrders[k];
                    }
                }));
            });
            updateFieldOrder(this.columns);
            this.cdRef.detectChanges();
        }
        this.beforeSortColumn(this.sortName, this.sortOrder).subscribe((/**
         * @return {?}
         */
        function () {
            if (_this.remoteSort) {
                // this.reload();
            }
            else {
                _this.clientSort();
            }
            _this.columnSorted.emit({ sortName: _this.sortName, sortOrder: _this.sortOrder });
        }));
    };
    /** 查询工具条前端字符查询 */
    /**
     * 查询工具条前端字符查询
     * @param {?} $event
     * @return {?}
     */
    TreeTableComponent.prototype.findKeyWords = /**
     * 查询工具条前端字符查询
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        /** @type {?} */
        var searchValue = $event.value;
        /** @type {?} */
        var field = $event.field;
        this.findField = field;
        if (searchValue && searchValue.length >= 2) {
            this.findValue = searchValue;
            if (!field) {
                this.writeConsole('Please set a field for the FindField property.', 'warn');
                return;
            }
            /** @type {?} */
            var result = this.searchHandle.searchOnClient(field, searchValue, this.state.rowNodes);
            if (result && result.length) {
                this.findResult = result.sort((/**
                 * @param {?} a
                 * @param {?} b
                 * @return {?}
                 */
                function (a, b) { return a.index === b.index ? 0 : (a.index > b.index ? 1 : -1); }));
                this.findCount = result.length;
                this.findCurrent = 1;
                this._scrollToNode(result[0].id);
                this.highLightKeywords();
            }
            else {
                this.findResult = [];
                this.findCurrent = 0;
                this.findCount = 0;
            }
        }
        else {
            this.resetFindText();
            this.cdRef.detectChanges();
        }
    };
    /**
     * @param {?} step
     * @return {?}
     */
    TreeTableComponent.prototype.nextFindValue = /**
     * @param {?} step
     * @return {?}
     */
    function (step) {
        var _this = this;
        if (!this.findResult || !this.findResult.length) {
            return;
        }
        /** @type {?} */
        var allHighLights = Array.from(this.el.nativeElement.querySelectorAll('.search-highlight'));
        if (this.findCurrent === this.findResult.length) {
            this.findCurrent = 1;
        }
        else {
            if (step) {
                this.findCurrent = this.findCurrent + step;
                if (step === -1) {
                    if (this.findCurrent <= 0) {
                        this.findCurrent = 1;
                    }
                }
            }
            else {
                this.findCurrent++;
            }
        }
        /** @type {?} */
        var active = this.el.nativeElement.querySelector('.search-highlight.active');
        if (active) {
            this.renderer.removeClass(active, 'active');
        }
        /** @type {?} */
        var _index = this.findCurrent - 1;
        /** @type {?} */
        var nextRow = this.findResult[_index];
        if (nextRow) {
            this._scrollToNode(nextRow.id);
            if (this.virtualized) {
                this.ngZone.runOutsideAngular((/**
                 * @return {?}
                 */
                function () {
                    if (_this['HIGH_LIGHT_TIMER']) {
                        clearTimeout(_this['HIGH_LIGHT_TIMER']);
                    }
                    _this['HIGH_LIGHT_TIMER'] = setTimeout((/**
                     * @return {?}
                     */
                    function () {
                        /** @type {?} */
                        var trId = 'rownode-' + nextRow.id;
                        /** @type {?} */
                        var tr = _this.el.nativeElement.querySelector('#' + trId);
                        if (tr) {
                            /** @type {?} */
                            var highLightDom = tr.querySelector('.search-highlight');
                            if (highLightDom) {
                                _this.renderer.addClass(highLightDom, 'active');
                            }
                        }
                    }), 100);
                }));
            }
            else {
                if (allHighLights[_index]) {
                    this.renderer.addClass(allHighLights[_index], 'active');
                }
            }
        }
    };
    /** 查询工具条前端字符查询 */
    /*
    findKeyWords($event) {
        const searchValue = $event.value;
        const field = $event.field;
        this.findField = field;
        if (searchValue && searchValue.length >= 2) {
            this.findValue = searchValue;

            if (!field) {
                this.writeConsole('Please set a field for the FindField property.', 'warn');
                return;
            }

            const result = this.searchHandle.searchOnClient(field, searchValue, this.state.rowNodes);

            if (result && result.length) {
                this.findResult = result.sort((a, b) => a.index === b.index ? 0 : (a.index > b.index ? 1 : -1));
                const firstRowIndex = result[0].index;

                this.findCount = result.length;

                const parents = this.searchHandle.findParents(result, this.state.rowNodes);

                this.findCurrent = 1;
                [...parents, ...result].forEach((r: RowNode) => {
                    this.expandNode(r.id);
                });

                let y = 0;
                this.state.rowNodes.forEach((row: RowNode, index: number) => {
                    if (row.visible && firstRowIndex > index) {
                        y += this.rowHeight;
                    }
                });
                if (this.psRef && this.psRef.directiveRef) {
                    this.psRef.directiveRef.scrollToY(y - 30);
                }

                this.highLightKeywords();
            } else {
                this.findResult = [];
                this.findCurrent = 0;
                this.findCount = 0;
            }
        } else {
            this.resetFindText();
            this.cdRef.detectChanges();
        }
    }

    nextFindValue(step) {
        if (!this.findResult || !this.findResult.length) {
            return;
        }
        const allHighLights = Array.from(this.el.nativeElement.querySelectorAll('.search-highlight'));

        if (this.findCurrent === this.findResult.length) {
            this.findCurrent = 1;
        } else {
            if (step) {
                this.findCurrent = this.findCurrent + step;
                if (step === -1) {
                    if (this.findCurrent <= 0) {
                        this.findCurrent = 1;
                    }
                }
            } else {
                this.findCurrent++;
            }
        }

        const active = this.el.nativeElement.querySelector('.search-highlight.active');

        let _index = allHighLights.indexOf(active);

        if (active) {
            this.renderer.removeClass(active, 'active');
        }

        if (this.virtualized) {

            _index += !step ? 1 : step;

            if (allHighLights[_index]) {
                this.renderer.addClass(allHighLights[_index], 'active');

            } else {
                // 先滚动指定位置
                const nextRow = this.findResult[this.findCurrent - 1];
                let y = 0;
                this.state.rowNodes.forEach((row: RowNode, index: number) => {
                    if (row.visible && nextRow.index > index) {
                        y += this.rowHeight;
                    }
                });

                if (this.psRef && this.psRef.directiveRef) {
                    this.psRef.directiveRef.scrollToY(y - 30, 200);
                }
                this.ngZone.runOutsideAngular(() => {
                    setTimeout(() => {
                        const keyWords = this.el.nativeElement.querySelectorAll('.search-highlight');
                        this.renderer.addClass(keyWords[0], 'active');
                    }, 100);
                });
            }
        } else {
            const currentEl: any = allHighLights[this.findCurrent - 1];
            if (currentEl) {
                this.renderer.addClass(currentEl, 'active');
                if (this.psRef && this.psRef.directiveRef) {
                    const sTop = currentEl.closest('td').offsetTop - 30;
                    this.psRef.directiveRef.scrollToY(sTop, 200);
                }
            }
        }


        this.cdRef.detectChanges();
    }
*/
    /**
     * 查询工具条前端字符查询
     * @return {?}
     */
    /*
        findKeyWords($event) {
            const searchValue = $event.value;
            const field = $event.field;
            this.findField = field;
            if (searchValue && searchValue.length >= 2) {
                this.findValue = searchValue;
    
                if (!field) {
                    this.writeConsole('Please set a field for the FindField property.', 'warn');
                    return;
                }
    
                const result = this.searchHandle.searchOnClient(field, searchValue, this.state.rowNodes);
    
                if (result && result.length) {
                    this.findResult = result.sort((a, b) => a.index === b.index ? 0 : (a.index > b.index ? 1 : -1));
                    const firstRowIndex = result[0].index;
    
                    this.findCount = result.length;
    
                    const parents = this.searchHandle.findParents(result, this.state.rowNodes);
    
                    this.findCurrent = 1;
                    [...parents, ...result].forEach((r: RowNode) => {
                        this.expandNode(r.id);
                    });
    
                    let y = 0;
                    this.state.rowNodes.forEach((row: RowNode, index: number) => {
                        if (row.visible && firstRowIndex > index) {
                            y += this.rowHeight;
                        }
                    });
                    if (this.psRef && this.psRef.directiveRef) {
                        this.psRef.directiveRef.scrollToY(y - 30);
                    }
    
                    this.highLightKeywords();
                } else {
                    this.findResult = [];
                    this.findCurrent = 0;
                    this.findCount = 0;
                }
            } else {
                this.resetFindText();
                this.cdRef.detectChanges();
            }
        }
    
        nextFindValue(step) {
            if (!this.findResult || !this.findResult.length) {
                return;
            }
            const allHighLights = Array.from(this.el.nativeElement.querySelectorAll('.search-highlight'));
    
            if (this.findCurrent === this.findResult.length) {
                this.findCurrent = 1;
            } else {
                if (step) {
                    this.findCurrent = this.findCurrent + step;
                    if (step === -1) {
                        if (this.findCurrent <= 0) {
                            this.findCurrent = 1;
                        }
                    }
                } else {
                    this.findCurrent++;
                }
            }
    
            const active = this.el.nativeElement.querySelector('.search-highlight.active');
    
            let _index = allHighLights.indexOf(active);
    
            if (active) {
                this.renderer.removeClass(active, 'active');
            }
    
            if (this.virtualized) {
    
                _index += !step ? 1 : step;
    
                if (allHighLights[_index]) {
                    this.renderer.addClass(allHighLights[_index], 'active');
    
                } else {
                    // 先滚动指定位置
                    const nextRow = this.findResult[this.findCurrent - 1];
                    let y = 0;
                    this.state.rowNodes.forEach((row: RowNode, index: number) => {
                        if (row.visible && nextRow.index > index) {
                            y += this.rowHeight;
                        }
                    });
    
                    if (this.psRef && this.psRef.directiveRef) {
                        this.psRef.directiveRef.scrollToY(y - 30, 200);
                    }
                    this.ngZone.runOutsideAngular(() => {
                        setTimeout(() => {
                            const keyWords = this.el.nativeElement.querySelectorAll('.search-highlight');
                            this.renderer.addClass(keyWords[0], 'active');
                        }, 100);
                    });
                }
            } else {
                const currentEl: any = allHighLights[this.findCurrent - 1];
                if (currentEl) {
                    this.renderer.addClass(currentEl, 'active');
                    if (this.psRef && this.psRef.directiveRef) {
                        const sTop = currentEl.closest('td').offsetTop - 30;
                        this.psRef.directiveRef.scrollToY(sTop, 200);
                    }
                }
            }
    
    
            this.cdRef.detectChanges();
        }
    */
    TreeTableComponent.prototype.closeFindPanel = /**
     * 查询工具条前端字符查询
     * @return {?}
     */
    /*
        findKeyWords($event) {
            const searchValue = $event.value;
            const field = $event.field;
            this.findField = field;
            if (searchValue && searchValue.length >= 2) {
                this.findValue = searchValue;
    
                if (!field) {
                    this.writeConsole('Please set a field for the FindField property.', 'warn');
                    return;
                }
    
                const result = this.searchHandle.searchOnClient(field, searchValue, this.state.rowNodes);
    
                if (result && result.length) {
                    this.findResult = result.sort((a, b) => a.index === b.index ? 0 : (a.index > b.index ? 1 : -1));
                    const firstRowIndex = result[0].index;
    
                    this.findCount = result.length;
    
                    const parents = this.searchHandle.findParents(result, this.state.rowNodes);
    
                    this.findCurrent = 1;
                    [...parents, ...result].forEach((r: RowNode) => {
                        this.expandNode(r.id);
                    });
    
                    let y = 0;
                    this.state.rowNodes.forEach((row: RowNode, index: number) => {
                        if (row.visible && firstRowIndex > index) {
                            y += this.rowHeight;
                        }
                    });
                    if (this.psRef && this.psRef.directiveRef) {
                        this.psRef.directiveRef.scrollToY(y - 30);
                    }
    
                    this.highLightKeywords();
                } else {
                    this.findResult = [];
                    this.findCurrent = 0;
                    this.findCount = 0;
                }
            } else {
                this.resetFindText();
                this.cdRef.detectChanges();
            }
        }
    
        nextFindValue(step) {
            if (!this.findResult || !this.findResult.length) {
                return;
            }
            const allHighLights = Array.from(this.el.nativeElement.querySelectorAll('.search-highlight'));
    
            if (this.findCurrent === this.findResult.length) {
                this.findCurrent = 1;
            } else {
                if (step) {
                    this.findCurrent = this.findCurrent + step;
                    if (step === -1) {
                        if (this.findCurrent <= 0) {
                            this.findCurrent = 1;
                        }
                    }
                } else {
                    this.findCurrent++;
                }
            }
    
            const active = this.el.nativeElement.querySelector('.search-highlight.active');
    
            let _index = allHighLights.indexOf(active);
    
            if (active) {
                this.renderer.removeClass(active, 'active');
            }
    
            if (this.virtualized) {
    
                _index += !step ? 1 : step;
    
                if (allHighLights[_index]) {
                    this.renderer.addClass(allHighLights[_index], 'active');
    
                } else {
                    // 先滚动指定位置
                    const nextRow = this.findResult[this.findCurrent - 1];
                    let y = 0;
                    this.state.rowNodes.forEach((row: RowNode, index: number) => {
                        if (row.visible && nextRow.index > index) {
                            y += this.rowHeight;
                        }
                    });
    
                    if (this.psRef && this.psRef.directiveRef) {
                        this.psRef.directiveRef.scrollToY(y - 30, 200);
                    }
                    this.ngZone.runOutsideAngular(() => {
                        setTimeout(() => {
                            const keyWords = this.el.nativeElement.querySelectorAll('.search-highlight');
                            this.renderer.addClass(keyWords[0], 'active');
                        }, 100);
                    });
                }
            } else {
                const currentEl: any = allHighLights[this.findCurrent - 1];
                if (currentEl) {
                    this.renderer.addClass(currentEl, 'active');
                    if (this.psRef && this.psRef.directiveRef) {
                        const sTop = currentEl.closest('td').offsetTop - 30;
                        this.psRef.directiveRef.scrollToY(sTop, 200);
                    }
                }
            }
    
    
            this.cdRef.detectChanges();
        }
    */
    function () {
        this.showFindInput = false;
        this.resetFindText();
        this.cdRef.detectChanges();
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableComponent.prototype.highLightKeywords = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        this.ngZone.runOutsideAngular((/**
         * @return {?}
         */
        function () {
            setTimeout((/**
             * @return {?}
             */
            function () {
                _this.cdRef.detectChanges();
                /** @type {?} */
                var allHighLights = _this.el.nativeElement.querySelectorAll('.search-highlight');
                if (!allHighLights.length) {
                    return;
                }
                _this.renderer.addClass(allHighLights[0], 'active');
            }), 100);
        }));
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableComponent.prototype.resetFindText = /**
     * @private
     * @return {?}
     */
    function () {
        this.findValue = '';
        this.findCurrent = 0;
        this.findCount = 0;
        this.findResult = [];
    };
    /**
     * @param {?} y
     * @param {?=} animations
     * @return {?}
     */
    TreeTableComponent.prototype.scrollToY = /**
     * @param {?} y
     * @param {?=} animations
     * @return {?}
     */
    function (y, animations) {
        if (animations === void 0) { animations = 200; }
        this.state.scrollY = y || 0;
        this.psRef.directiveRef.scrollToY(y, animations);
    };
    /**
     * @private
     * @param {?} field
     * @param {?} isHide
     * @return {?}
     */
    TreeTableComponent.prototype.showOrHideColumn = /**
     * @private
     * @param {?} field
     * @param {?} isHide
     * @return {?}
     */
    function (field, isHide) {
        if (Array.isArray(field)) {
            this.columns.forEach((/**
             * @param {?} n
             * @return {?}
             */
            function (n) {
                if (field.indexOf(n.field) > -1) {
                    n.visible = !isHide;
                }
            }));
        }
        else {
            this.columns.forEach((/**
             * @param {?} n
             * @return {?}
             */
            function (n) {
                if (field === n.field) {
                    n.visible = !isHide;
                }
            }));
        }
        this.columnsChanged();
    };
    /**
     * @param {?} field
     * @return {?}
     */
    TreeTableComponent.prototype.showColumn = /**
     * @param {?} field
     * @return {?}
     */
    function (field) {
        this.showOrHideColumn(field, false);
    };
    /**
     * @param {?} field
     * @return {?}
     */
    TreeTableComponent.prototype.hideColumn = /**
     * @param {?} field
     * @return {?}
     */
    function (field) {
        this.showOrHideColumn(field, true);
    };
    /**
     * @param {?} parentNode
     * @return {?}
     */
    TreeTableComponent.prototype.showChildsLoading = /**
     * @param {?} parentNode
     * @return {?}
     */
    function (parentNode) {
        var _a;
        /** @type {?} */
        var colspan = this.columns.filter((/**
         * @param {?} n
         * @return {?}
         */
        function (n) { return n.visible !== false; })).length;
        /** @type {?} */
        var data = (_a = {}, _a[this.idField] = '正在加载中....', _a.__colspan__ = colspan, _a);
        this.loadChildren([{ data: data, __childs_loading__: true }], parentNode, false);
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    TreeTableComponent.prototype.onChildsPageChanged = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        this.childsPageChanged.emit($event);
    };
    /**
     * @private
     * @param {?} tr
     * @return {?}
     */
    TreeTableComponent.prototype.trId2DataId = /**
     * @private
     * @param {?} tr
     * @return {?}
     */
    function (tr) {
        return tr.id.replace('rownode-', '');
    };
    // 快捷键
    // 快捷键
    /**
     * @param {?} $event
     * @return {?}
     */
    TreeTableComponent.prototype.onKeydownEvent = 
    // 快捷键
    /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        var _this = this;
        if (!$event || !this.singleSelect || !this.data || !this.data.length) {
            return;
        }
        /** @type {?} */
        var keys = ['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight'];
        if (!keys.includes($event.key) || $event.target.nodeName === 'INPUT') {
            return;
        }
        $event.stopPropagation();
        $event.preventDefault();
        this.inputGroup.textbox.nativeElement.blur();
        /** @type {?} */
        var newIdx;
        /** @type {?} */
        var trs = Array.from(this.bodyTable.nativeElement.querySelectorAll('tr'));
        /** @type {?} */
        var trCount = trs.length;
        /** @type {?} */
        var selectedTrIndex = -1;
        if (this.selectedRow) {
            selectedTrIndex = trs.findIndex((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return _this.trId2DataId(n) === _this.selectedRow.id; }));
        }
        if ($event.code === 'ArrowDown') {
            newIdx = selectedTrIndex + 1;
        }
        else if ($event.code === 'ArrowUp') {
            if (selectedTrIndex !== -1) {
                newIdx = selectedTrIndex - 1;
            }
        }
        else {
            if (this.selectedRow && ($event.code === 'ArrowRight' || $event.code === 'ArrowLeft')) {
                this.toggleExpand(this.selectedRow);
            }
            return;
        }
        if (newIdx >= 0 && newIdx < trCount) {
            /** @type {?} */
            var _tr = (/** @type {?} */ (trs[newIdx]));
            if (_tr) {
                /** @type {?} */
                var id = this.trId2DataId(_tr);
                this.selectNode(id);
                _tr.scrollIntoView({ block: 'nearest' });
            }
        }
    };
    /** 根据传入的父级ID，获取所有子级节点 */
    /**
     * 根据传入的父级ID，获取所有子级节点
     * @param {?} parentId
     * @return {?}
     */
    TreeTableComponent.prototype.getChildNodes = /**
     * 根据传入的父级ID，获取所有子级节点
     * @param {?} parentId
     * @return {?}
     */
    function (parentId) {
        var _this = this;
        /** @type {?} */
        var nodes = [];
        if (parentId) {
            /** @type {?} */
            var rowNode = this.findRowNode(parentId);
            if (rowNode && rowNode.node.children && rowNode.node.children.length) {
                rowNode.node.children.forEach((/**
                 * @param {?} tn
                 * @return {?}
                 */
                function (tn) {
                    if (tn.selectable) {
                        nodes.push(tn);
                    }
                    nodes = nodes.concat(_this.getChildNodes(tn.id));
                }));
            }
            return nodes;
        }
        return [];
    };
    /** 根据传入的节点ID， 获取所有父级节点 */
    /**
     * 根据传入的节点ID， 获取所有父级节点
     * @param {?} id
     * @return {?}
     */
    TreeTableComponent.prototype.getParentNodes = /**
     * 根据传入的节点ID， 获取所有父级节点
     * @param {?} id
     * @return {?}
     */
    function (id) {
        var _this = this;
        /** @type {?} */
        var nodes = [];
        if (id) {
            /** @type {?} */
            var rowNode = this.findRowNode(id);
            if (rowNode && rowNode.parents && rowNode.parents.length) {
                rowNode.parents.forEach((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) {
                    /** @type {?} */
                    var rn = _this.findRowNode(n);
                    if (rn && rn.node.selectable) {
                        nodes.push(rn);
                    }
                }));
            }
            return nodes;
        }
        return [];
    };
    TreeTableComponent.decorators = [
        { type: Component, args: [{
                    selector: 'farris-treetable',
                    template: "<!--\r\n * @Author: \u75AF\u72C2\u79C0\u624D(Lucas Huang)\r\n * @Date: 2019-06-03 20:00:11\r\n * @LastEditors: \u75AF\u72C2\u79C0\u624D(Lucas Huang)\r\n * @LastEditTime: 2019-11-28 14:23:52\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n -->\r\n<div class=\"filter-row\" style=\"width: 100%;\" *ngIf=\"showFilterBar\">\r\n    <form style=\"display: flex; width: 100%;\">\r\n        <div class=\"search-fields\" style=\"padding-left:0;\" [style.display]=\"showSearchField ? '': 'none'\">\r\n            <select class=\"custom-select\" [(ngModel)]=\"searchData.field\" name=\"field\">\r\n                <option value=\"*\">{{allColumnsTitle}}</option>\r\n                <option *ngFor=\"let col of searchFields\" value=\"{{col.value}}\">{{ col.label }}</option>\r\n            </select>\r\n        </div>\r\n        <div class=\"search-text flex-fill\" style=\"padding-right: 0px;\">\r\n            <input-group #inputGroup [groupText]=\"searchButtonText\" name=\"searchValue\" [(ngModel)]=\"searchData.value\"\r\n                (clear)=\"onClearSearchValue()\" (valueChange)=\"onSearchValueChange($event)\" (clickHandle)=\"onSearch()\"\r\n                (keydownHandle)=\"onKeydownEvent($event)\"></input-group>\r\n        </div>\r\n    </form>\r\n</div>\r\n\r\n<ng-content select=\"tt-column\"></ng-content>\r\n\r\n<ng-template #tdcell let-col let-serializedNode=\"rowNode\" let-left=\"left\">\r\n\r\n    <ng-container *ngIf=\"enableFindText\">\r\n        <span *ngIf=\"!col.formatter\" style=\"width: 100%;\"\r\n            [innerHTML]=\"getNodeText(col, serializedNode.node.data) | highlight: findValue: col.field :findField\"></span>\r\n        <span *ngIf=\"col.formatter\" style=\"width: 100%;\" \r\n            [innerHTML]=\"formatData(col, serializedNode.node.data, col.formatter) | safe: 'html' \"></span>\r\n    </ng-container>\r\n\r\n    <ng-container *ngIf=\"!enableFindText\">\r\n        <span *ngIf=\"!col.formatter && !fast\" style=\"width: 100%;\"\r\n            [innerHTML]=\"getNodeText(col, serializedNode.node.data)\"></span>\r\n        <span *ngIf=\"!col.formatter && fast\" style=\"width: 100%;\"\r\n            [textContent]=\"getNodeText(col, serializedNode.node.data, true)\"></span>\r\n        <span *ngIf=\"col.formatter\" style=\"width: 100%;\" \r\n            [innerHTML]=\"formatData(col, serializedNode.node.data, col.formatter) | safe: 'html' \"></span>\r\n    </ng-container>\r\n</ng-template>\r\n\r\n<ng-template #tbodyrows>\r\n    <ng-template ngFor let-serializedNode let-rowIndex=\"index\" [ngForTrackBy]=\"trackByFn\" [ngForOf]=\"pagination ? (serializedValue | paginate: paginationOptions) : serializedValue\">\r\n        <tr *ngIf=\"serializedNode.visible\" #row=\"row\" \r\n            [attr.id]=\" 'rownode-' + serializedNode.id\" class=\"f-treetable-row\"\r\n            [selectRow]=\"serializedNode\" [rowIndex]=\"rowIndex\" [dblclick]=\"true\" [dblclickNode]=\"serializedNode\"\r\n            [selectRowDisabled]=\"serializedNode.node | disablenode: disabledRow\"\r\n            [customRowStyle]=\"serializedNode\"\r\n            [class.f-treetable-disable-row]=\"serializedNode.node | disablenode: disabledRow\"\r\n            [class.farris-table-selectedrow]=\"serializedNode.isSelected\">\r\n\r\n            <td *ngIf=\"serializedNode.node.data['__colspan__']\"  [attr.colspan]=\" serializedNode.node.data['__colspan__'] || 0\">\r\n                <childs-loading></childs-loading>\r\n            </td>\r\n\r\n            <ng-container *ngIf=\"!serializedNode.node.data['__colspan__']\">\r\n                <td *ngFor=\"let col of columns; let i = index;\"\r\n                    [customCellStyle]=\"col\" [rowNode]=\"serializedNode\" [rowIndex]=\"rowIndex\"\r\n                    [style.textAlign]=\"col!.align || 'left'\" \r\n                    (click)=\"onCellClick($event, col, serializedNode.node)\"\r\n                    class=\"treetable-cell\" [attr.field]=\"col.field\"\r\n                    [attr.colspan]=\" serializedNode.node.data['__cellspan__'] || 0\"\r\n                    [attr.title]=\"col | tipmsg: serializedNode.node\"\r\n                    [class.f-treetable--fixed-left]=\"fixedColumns && fixedHeader && col.fixed && col.fixed === 'left'\"\r\n                    [class.f-treetable--fixed-right]=\"fixedColumns && fixedHeader && col.fixed && col.fixed === 'right'\"\r\n                    [customRowStyle]=\"serializedNode\" [field]=\"col\"\r\n                    [attr.r-tt-shadow-col]=\"col.rightShadowCol\"\r\n                    [attr.l-tt-shadow-col]=\"col.leftShadowCol\"\r\n                >\r\n\r\n                    <div class=\"treetable-cell-content d-flex\">\r\n                        <farris-treeTableToggler style=\"float: left\"\r\n                            [showLines]=\"showLines\"\r\n                            [indentSpacing]=\"indentSpacing\"\r\n                            [disabled]=\"serializedNode.node | disablenode: disabledRow: disabled\"\r\n                            [rowNode]=\"serializedNode\" *ngIf=\"i == 0\"></farris-treeTableToggler>\r\n                        \r\n                        <div class=\"flex-grow-1 text\"  *ngIf=\"!col.componentType\">\r\n                            <ng-container *ngIf=\"!col.template && col.field\">\r\n                                <ng-container *ngTemplateOutlet=\"tdcell; context: {$implicit: col, node: serializedNode.node, rowNode: serializedNode, rowData: serializedNode.node.data  }\" ></ng-container>\r\n                            </ng-container>\r\n            \r\n                            <ng-container *ngIf=\"col.template\"\r\n                                [ngTemplateOutlet]=\"col.template\"\r\n                                [ngTemplateOutletContext]=\"{$implicit: { column: col, node: serializedNode.node, rowNode: serializedNode, rowData:  serializedNode.node.data  }}\">\r\n                            </ng-container>\r\n                        </div>\r\n                        <div class=\"flex-grow-1 text\"  *ngIf=\"col.componentType\" [component-template]=\"col\" [ctx]=\" { column: col, node: serializedNode.node, rowNode: serializedNode, rowData:  serializedNode.node.data  }\">\r\n                        </div>\r\n                    </div>\r\n                </td>\r\n            </ng-container>\r\n        </tr>\r\n    </ng-template>\r\n</ng-template>\r\n\r\n<ng-template #tbody>\r\n    <tbody class=\"farris-treetable-tbody\"\r\n        [farris-context-menus]=\"contextMenuItems\" [disabled]=\"!enableContextMenu\" \r\n        [activeDomName]=\"'tr'\" [beforeShowContextMenu]=\"onBeforeShowContextMenu\"\r\n        [menuClass]=\"'f-treetable-context-menu'\">\r\n        <ng-container *ngTemplateOutlet=\"tbodyrows\"></ng-container>\r\n    </tbody>\r\n</ng-template>\r\n\r\n<!--\u5355\u884C\u8868\u5934\u6A21\u677F-->\r\n<ng-template #headerCells let-cols let-firstRow=\"firstRow\">\r\n    <ng-template ngFor let-col [ngForOf]=\"cols\" let-i=\"index\" let-first=\"first\" let-last=\"last\">\r\n        <th [resizable-column]=\"(!col.lastColumn || !last) && (!col.colspan || col.colspan == 1)\" [style.textAlign]=\"col!.hAlign || 'left'\" #th \r\n            class=\"treetable-header-cell\"\r\n            [class.f-treetable--fixed-left]=\"fixedColumns && col.fixed && col.fixed === 'left'\"\r\n            [class.f-treetable--fixed-right]=\"fixedColumns && col.fixed && col.fixed === 'right'\"\r\n            [attr.field]=\"col.field || ''\"\r\n            [attr.r-tt-shadow-col]=\"col.rightShadowCol\"\r\n            [attr.l-tt-shadow-col]=\"col.leftShadowCol\"\r\n            [attr.colspan]=\"col.colspan\" \r\n            [attr.rowspan]=\"col.rowspan\"\r\n            [class.group-header-cell]=\"col.colspan && col.colspan > 1\"\r\n            [attr.id]=\"col.id\"\r\n            >\r\n      \r\n            <div class=\"d-flex\" style=\"line-height: 1.25em;\" [style.padding-right.px]=\"col.sortable ? 10: 0\">\r\n                <ng-container *ngIf=\"!singleSelect && showCheckAll && first && showCheckbox && !last && firstRow\">\r\n                    <tt-header-checkbox #allCheckbox></tt-header-checkbox>\r\n                </ng-container>\r\n                <ng-container *ngIf=\"col.headTemplate&& !col.headerComponentType\"\r\n                    [ngTemplateOutlet]=\"col.headTemplate\"\r\n                    [ngTemplateOutletContext]=\"{$implicit: { column: col}}\">\r\n                </ng-container>\r\n                <ng-container *ngIf=\"!col.headTemplate && !col.headerComponentType\">\r\n                    <span style=\"overflow: hidden;width: 100%;\" *ngIf=\"!headerWrap\">{{ col.title }}</span>\r\n                    <span style=\"white-space: pre-wrap;width: 100%;\"  *ngIf=\"headerWrap\">{{ col.title }}</span>\r\n                </ng-container>\r\n\r\n                <div class=\"flex-grow-1 text\" *ngIf=\"col.headerComponentType\" [component-template]=\"col\" [templateType]=\"'head'\" [ctx]=\"{ column: col}\" [style.whiteSpace]=\"headerWrap ? 'pre-wrap': ''\"></div>\r\n\r\n\r\n                <ng-container *ngIf=\"col.sortable\">\r\n                    <span class=\"f-treetable-sort\"\r\n                        [class.f-treetable-sort-asc]=\"col.order === 'asc'\"\r\n                        [class.f-treetable-sort-desc]=\"col.order === 'desc'\"\r\n                        (click)=\"onSortColumnClick($event, col)\" *ngIf=\"col.order\"></span>\r\n                    <span class=\"f-treetable-sort\" (click)=\"onSortColumnClick($event, col)\" *ngIf=\"!col.order\"></span>\r\n                </ng-container>\r\n\r\n            </div>\r\n        </th>\r\n    </ng-template>\r\n</ng-template>\r\n\r\n<!--\u591A\u884C\u8868\u5934\u6A21\u677F-->\r\n<ng-template #groupHeader>\r\n    <tr *ngFor=\"let cols of groupColumns; first as isFirst\">\r\n        <ng-container *ngTemplateOutlet=\"headerCells; context: {$implicit: cols, firstRow: isFirst}\"></ng-container>\r\n    </tr>\r\n</ng-template>\r\n\r\n\r\n<ng-template #scorllview>\r\n    <div class=\"farris-treetable fixed\" [attr.id]=\"id\" [class.f-treetable--fixed-columns]=\"fixedColumns\"\r\n        [class.farris-treetable-nowrap]=\"!nowrap\" [class.table-bordered]=\"showBorder\"\r\n        [ngClass]=\"{'farris-treetable-disabled': disabled}\"\r\n        [class.farris-treetable-showlines]=\"showLinesOnHover && showLines\" [style.width]=\"fit ? '100%': (width + 'px')\">\r\n        <div #headerBox class=\"farris-treetable-header\" *ngIf=\"showHeader && columns\" style=\"overflow: hidden; background-color: #f7f8fb\">\r\n            <table #headerTable class=\"table\" >\r\n                <colgroup *ngIf=\"!autoWidth\">\r\n                    <ng-container *ngFor=\"let col of columns\">\r\n                        <col *ngIf=\"columnIsVisible(col)\" [style.width]=\"getRealColWidth(col)\" />\r\n                    </ng-container>\r\n                </colgroup>\r\n                <thead class=\"farris-treetable-thead\" [class.header-wrap]=\"headerWrap\">\r\n                    <ng-container *ngIf=\"!headerTemplate\">\r\n                        <tr *ngIf=\"!useGroupHeader; else groupHeader\">\r\n                            <ng-container *ngTemplateOutlet=\"headerCells; context: {$implicit: columns, firstRow: true}\"></ng-container>\r\n                        </tr>\r\n                    </ng-container>\r\n\r\n                    <ng-container *ngIf=\"headerTemplate\">\r\n                        <ng-container *ngTemplateOutlet=\"headerTemplate; context: {$implicit: columns}\"></ng-container>\r\n                    </ng-container>\r\n                </thead>\r\n            </table>\r\n            <!-- \u5BA2\u6237\u7AEF\u67E5\u8BE2\u5B9A\u4F4D\u5DE5\u5177\u6761 -->\r\n            <find-input *ngIf=\"showFindInput\" [columns]=\"columns\" [current]=\"findCurrent\" [count]=\"findCount\"\r\n                (valueChanged)=\"findKeyWords($event)\" (close)=\"closeFindPanel()\" (enterHandler)=\"nextFindValue($event)\">\r\n            </find-input>\r\n\r\n        </div>\r\n\r\n        <div class=\"farris-treetable-body\">\r\n            <perfect-scrollbar #perfectScrollbar [config]=\"{minScrollbarLength: 15}\" (psScrollX)=\"onScrollX($event)\"\r\n                (psScrollY)=\"onScrollY($event)\" [style.height.px]=\"scorllBodyHeight\">\r\n                <div *ngIf=\"topHideHeight && virtualized\" [style.height.px]=\"topHideHeight\"> </div>\r\n                <table #bodyTable class=\"table\" [style.tableLayout]=\"autoWidth? 'auto': 'fixed'\"\r\n                    [ngClass]=\"{'table-striped': striped, 'table-hover': (hovered && serializedValue && serializedValue.length), 'f-table-norecords': (!serializedValue || !serializedValue.length),\r\n                    'h-100': (!serializedValue || !serializedValue.length) }\">\r\n                    <colgroup>\r\n                        <ng-container *ngFor=\"let col of columns\">\r\n                            <col *ngIf=\"columnIsVisible(col)\" [style.width]=\"getRealColWidth(col)\" />\r\n                        </ng-container>\r\n                    </colgroup>\r\n\r\n                    <ng-container *ngIf=\"!serializedValue || !serializedValue.length\">\r\n                        <tbody class=\"farris-treetable-tbody\">\r\n                            <tr class=\"f-table-norecords-row\">\r\n                                <td [attr.align]=\"'center'\" class=\"farris-treetable-emptydata\" [attr.colspan]=\"columns.length\">\r\n                                    <div class=\"f-table-norecords-content\" >\r\n                                        {{ 'treetable.emptyMessage' | locale }}\r\n                                    </div>\r\n                                </td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </ng-container>\r\n\r\n                    <ng-container *ngIf=\"serializedValue && serializedValue.length\">\r\n                        <ng-container *ngIf=\"bodyTemplate\">\r\n                            <tbody class=\"farris-treetable-tbody\" treeTableBody [columns]=\"columns\" [template]=\"bodyTemplate\"></tbody>\r\n                        </ng-container>\r\n\r\n                        <ng-container #defaultBodyTemplate *ngIf=\"!bodyTemplate\">\r\n                            <ng-container *ngTemplateOutlet=\"tbody\"></ng-container>\r\n                        </ng-container>\r\n                    </ng-container>\r\n                </table>\r\n                <div *ngIf=\"bottomHideHeight && virtualized\" [style.height.px]=\"bottomHideHeight\"> </div>\r\n            </perfect-scrollbar>\r\n        </div>\r\n\r\n        <!-- \u5206\u9875\u6761 -->\r\n        <div *ngIf=\"pagination\" #tablePager class=\"farris-table-pager\" [ngStyle]=\" { 'opacity': (disabled ? 0.6 : 1), 'pointer-events': (disabled? 'none': '')  }\">\r\n            <pagination-controls #pager [id]=\"paginationOptions?.id\"\r\n                [maxSize]=\"pagerLabelSize\" [directionLinks]=\"true\"\r\n                [autoHide]=\"false\" [responsive]=\"true\"\r\n                [previousLabel]=\"' '\" [nextLabel]=\"' '\"\r\n                [showPageInfo]=\"showPageInfo\" [showPageNumber]=\"showPageNumber\" [showPageList]=\"showPageList\"\r\n                (pageChange)=\"onPageChange($event)\" [showGotoInput]=\"showGotoInput\"\r\n                (pageSizeChange)=\"onPageSizeChange($event)\"\r\n                >\r\n\r\n                \r\n            </pagination-controls>\r\n        </div>\r\n\r\n        <div #resizerHelper class=\"column-resizer-helper\" *ngIf=\"resizableColumns\"></div>\r\n    </div>\r\n</ng-template>\r\n\r\n<ng-template #nodespagerbar let-ctx>\r\n    <nodes-pager [context]=\"ctx\" [disabled]=\"disabled\" (pageChange)=\"onChildsPageChanged($event)\" [showTotal]=\"showTotalForChildren\"></nodes-pager>\r\n</ng-template>\r\n\r\n\r\n\r\n<div class=\"farris-treetable\" [class.table-bordered]=\"showBorder\" [attr.id]=\"id\"\r\n    [class.farris-treetable-showlines]=\"showLinesOnHover && showLines\" \r\n    [class.farris-treetable-nowrap]=\"!nowrap\"  *ngIf=\"!fixedHeader; else scorllview\">\r\n    <table class=\"table\" [style.tableLayout]=\"autoWidth? 'auto': 'fixed'\"\r\n        [ngClass]=\"{'table-striped': striped, 'table-hover': (hovered && serializedValue && serializedValue.length), 'f-table-norecords': (!serializedValue || !serializedValue.length),\r\n        'h-100': (!serializedValue || !serializedValue.length) }\">\r\n        <thead class=\"farris-treetable-thead\" *ngIf=\"showHeader\" [class.header-wrap]=\"headerWrap\">\r\n            <ng-container *ngIf=\"!headerTemplate && columns\">\r\n                <th *ngFor=\"let col of columns;let isFirst=first\" [style.textAlign]=\"col!.hAlign || 'left'\" class=\"treetable-header-cell\" [attr.field]=\"col.field\">\r\n                    <div class=\"d-flex\">\r\n                        <ng-container *ngIf=\"!singleSelect && showCheckAll && isFirst && showCheckbox\">\r\n                            <tt-header-checkbox #allCheckbox class=\"f-cmp-treetable-toggler\"></tt-header-checkbox>\r\n                        </ng-container>\r\n\r\n                        <ng-container *ngIf=\"!col.headTemplate && !col.headComponentType\">\r\n                            <div class=\"flex-grow-1 text\" [style.whiteSpace]=\"headerWrap ? 'pre-wrap': ''\">{{col.title}}</div>\r\n                        </ng-container>\r\n        \r\n                        <ng-container *ngIf=\"col.headTemplate && !col.headComponentType\"\r\n                            [ngTemplateOutlet]=\"col.headTemplate\"\r\n                            [ngTemplateOutletContext]=\"{$implicit: { column: col}}\">\r\n                        </ng-container>\r\n                        <div class=\"flex-grow-1 text\" *ngIf=\"col.headerComponentType\" [component-template]=\"col\" [templateType]=\"'head'\" [ctx]=\" { column: col}\" [style.whiteSpace]=\"headerWrap ? 'pre-wrap': ''\"></div>\r\n                    </div>\r\n                </th>\r\n            </ng-container>\r\n            <ng-container *ngIf=\"headerTemplate\">\r\n                <ng-container *ngTemplateOutlet=\"headerTemplate; context: {$implicit: columns}\"></ng-container>\r\n            </ng-container>\r\n        </thead>\r\n        <ng-container *ngIf=\"serializedValue && serializedValue.length\">\r\n             <!-- \u5BA2\u6237\u7AEF\u67E5\u8BE2\u5B9A\u4F4D\u5DE5\u5177\u6761 -->\r\n             <find-input *ngIf=\"showFindInput\" [current]=\"findCurrent\" [count]=\"findCount\"\r\n             (valueChanged)=\"findKeyWords($event)\" (close)=\"closeFindPanel()\"  [columns]=\"columns\"\r\n             (enterHandler)=\"nextFindValue($event)\"></find-input>\r\n            <ng-container *ngIf=\"bodyTemplate\">\r\n                <tbody class=\"farris-treetable-tbody\" treeTableBody [columns]=\"columns\" [template]=\"bodyTemplate\">\r\n                </tbody>\r\n            </ng-container>\r\n            <ng-container *ngIf=\"!bodyTemplate\">\r\n                <ng-container *ngTemplateOutlet=\"tbody\"></ng-container>\r\n            </ng-container>\r\n        </ng-container>\r\n        <ng-container *ngIf=\"!serializedValue || !serializedValue.length\">\r\n            <tbody class=\"farris-treetable-tbody\">\r\n                <tr class=\"f-table-norecords-row\" style=\"height: 200px\">\r\n                    <td [attr.align]=\"'center'\" class=\"farris-treetable-emptydata\" [attr.colspan]=\"columns.length\">\r\n                        <div class=\"f-table-norecords-content\" >\r\n                            {{ 'treetable.emptyMessage' | locale }}\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </ng-container>\r\n    </table>\r\n</div>\r\n\r\n",
                    exportAs: 'treeTable',
                    encapsulation: ViewEncapsulation.None,
                    changeDetection: ChangeDetectionStrategy.OnPush,
                    styles: ["\n        .farris-treetable {\n            position: relative;\n        }\n        .resizable-column {\n            background-clip: padding-box;\n            position: relative;\n        }\n        .column-resizer {\n            display: block;\n            position: absolute!important;\n            top: 0;\n            right: 0;\n            margin: 0;\n            width: .5em;\n            height: 100%;\n            padding: 0;\n            cursor: col-resize;\n            border: 1px solid transparent;\n        }\n        .column-resizer-helper {\n            width: 1px;\n            position: absolute;\n            z-index: 10;\n            display: none;\n            border-right: 1px dashed #1890ff;\n        }\n\n        .farris-treetable-disabled .farris-treetable-body .table tr{\n            opacity: 0.4;\n            cursor: not-allowed;\n        }\n        .farris-treetable-disabled .table tr.farris-table-selectedrow{\n            opacity: 1;\n            cursor: default;\n        }\n\n        .custom-checkbox .custom-control-input:indeterminate~.custom-control-label::after {\n            background-image: url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 4 4'%3e%3cpath stroke='%23fff' d='M0 2h4'/%3e%3c/svg%3e\");\n            background-color: #1890ff;\n        }\n        .unselectable-text {\n            -webkit-user-select: none;\n            -moz-user-select: none;\n            -o-user-select: none;\n            -ms-user-select: none;\n            user-select: none\n        }\n        .search-highlight {\n            background-color: #FFFF1F;\n        }\n        .search-highlight.active{\n            background-color: #FF901C;\n        }\n\n\n                \n        .f-treetable--fixed-columns .treetable-header-cell {\n            vertical-align: middle;\n        }\n\n        .f-treetable--fixed-columns .ps__rail-x,\n        .f-treetable--fixed-columns .ps__rail-y {\n            z-index: 3;\n        }\n\n        .f-treetable--fixed-left,\n        .f-treetable--fixed-right {\n            position: sticky !important;\n            z-index: 2;\n            background-color: #ffffff;\n            overflow: inherit !important;\n        }\n        .treetable-header-cell.f-treetable--fixed-left,\n        .treetable-header-cell.f-treetable--fixed-right {\n            background-color: #F4F4F4;\n            border-color: #E4E7EF;\n            border: none;\n            outline-color: #E4E7EF;\n            outline-style: solid;\n            outline-width: 1px;\n        }\n\n        .f-treetable--fixed-columns\n            tr\n            th.f-treetable--fixed-left[l-tt-shadow-col]::after,\n        .f-treetable--fixed-columns td.f-treetable--fixed-left::after,\n        .f-treetable--fixed-right::before {\n            pointer-events: none;\n            content: \"\";\n            width: 36px !important;\n            display: inline-block !important;\n            position: absolute !important;\n            margin-top: 0 !important;\n            top: 0 !important;\n            height: 100% !important;\n            bottom: -1px !important;\n            transition: box-shadow 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n            background-color: transparent !important;\n        }\n\n        .f-treetable--fixed-columns\n            tr\n            th.f-treetable--fixed-left:not([l-tt-shadow-col])::after {\n            content: \"\";\n            position: absolute;\n            right: 0;\n            top: 50%;\n            margin-top: calc(-1.125rem / 2);\n            display: block;\n            height: 1.125rem;\n            width: 1px;\n            background-color: #e6e9f0;\n            box-shadow: none;\n        }\n\n        .f-treetable--fixed-columns\n            tr\n            th.f-treetable--fixed-left[l-tt-shadow-col]::after,\n        .f-treetable--fixed-columns tr td.f-treetable--fixed-left::after {\n            right: -36px !important;\n        }\n\n        .f-treetable--fixed-columns .f-treetable--fixed-right::before {\n            left: -36px !important;\n        }\n\n        .f-treetable--fixed-columns .table-hover tbody tr:hover td {\n            background-color: #edf5ff;\n        }\n\n        .f-treetable--fixed-columns\n            .farris-treetable-tbody\n            tr.farris-table-selectedrow\n            td {\n            background-color: #dae9ff!important;\n            color: #424347;\n        }\n\n        .f-treetable--fixed-columns\n            .farris-treetable-tbody\n            tr.f-treetable-disable-row\n            td {\n            background: #fafafc;\n        }\n\n        .f-treetable--fixed-columns.table-bordered\n            tr\n            th.f-treetable--fixed-left[l-tt-shadow-col],\n        .f-treetable--fixed-columns.table-bordered tr th.f-treetable--fixed-right,\n        .f-treetable--fixed-columns.table-bordered tr td.f-treetable--fixed-left,\n        .f-treetable--fixed-columns.table-bordered tr td.f-treetable--fixed-right {\n            border-right: 0;\n            box-shadow: inset -1px 0px 0px #eaecf3;\n        }\n\n        .f-treetable--fixed-columns.table-bordered tr td,\n        .f-treetable--fixed-columns.table-bordered tr td {\n            border-left: 0;\n        }\n\n        .f-treetable--fixed-columns tbody tr:nth-of-type(even) td {\n            background-color: #F7F7F7;\n        }\n\n    "]
                }] }
    ];
    /** @nocollapse */
    TreeTableComponent.ctorParameters = function () { return [
        { type: TreetableService },
        { type: ElementRef },
        { type: ResizeService },
        { type: Renderer2 },
        { type: CommonUtils },
        { type: ColumnFormatService },
        { type: TTHotkeys },
        { type: ChangeDetectorRef },
        { type: NgZone },
        { type: Injector }
    ]; };
    TreeTableComponent.propDecorators = {
        width: [{ type: Input }],
        height: [{ type: Input }],
        showFilterBar: [{ type: Input }],
        showSearchField: [{ type: Input }],
        headerHeight: [{ type: Input }],
        headerWrap: [{ type: Input }],
        rowHeight: [{ type: Input }],
        columns: [{ type: Input }],
        groupColumns: [{ type: Input }],
        useGroupHeader: [{ type: Input }],
        fitColumns: [{ type: Input }],
        autoFitColumns: [{ type: Input }],
        searchFields: [{ type: Input }],
        allColumnsTitle: [{ type: Input }],
        showLines: [{ type: Input }],
        showLinesOnHover: [{ type: Input }],
        multiSelect: [{ type: Input }],
        singleSelect: [{ type: Input }],
        showCheckbox: [{ type: Input }],
        idField: [{ type: Input }],
        showBorder: [{ type: Input }],
        showCheckAll: [{ type: Input }],
        showHeader: [{ type: Input }],
        striped: [{ type: Input }],
        hovered: [{ type: Input }],
        disabled: [{ type: Input }],
        disabledRow: [{ type: Input }],
        loadDataType: [{ type: Input }],
        fixedHeader: [{ type: Input }],
        checkOnSelect: [{ type: Input }],
        selectOnCheck: [{ type: Input }],
        onlySelectSelf: [{ type: Input }],
        resizableColumns: [{ type: Input }],
        fit: [{ type: Input }],
        cascadeCheck: [{ type: Input }],
        cascadeDown: [{ type: Input }],
        cascadeUp: [{ type: Input }],
        emptyMessage: [{ type: Input }],
        indentSpacing: [{ type: Input }],
        keepSelect: [{ type: Input }],
        virtualized: [{ type: Input }],
        onlySelectLeaf: [{ type: Input }],
        showIcon: [{ type: Input }],
        leafIcon: [{ type: Input }],
        expandIcon: [{ type: Input }],
        collapseIcon: [{ type: Input }],
        foldIcon: [{ type: Input }],
        unfoldIcon: [{ type: Input }],
        useIconFromData: [{ type: Input }],
        whenDataIconEmptyUseDefault: [{ type: Input }],
        iconField: [{ type: Input }],
        iconCls: [{ type: Input }],
        remoteSort: [{ type: Input }],
        sortName: [{ type: Input }],
        sortOrder: [{ type: Input }],
        multiSort: [{ type: Input }],
        beforeSortColumn: [{ type: Input }],
        rowStyler: [{ type: Input }],
        cellStyler: [{ type: Input }],
        enableFindText: [{ type: Input }],
        findField: [{ type: Input }],
        expandLevel: [{ type: Input }],
        selectValue: [{ type: Input }],
        selectValueChange: [{ type: Output }],
        dblClickExpand: [{ type: Input }],
        selectValues: [{ type: Input }],
        selectValuesChange: [{ type: Output }],
        nowrap: [{ type: Input }],
        checkValues: [{ type: Input }],
        checkValuesChange: [{ type: Output }],
        beforeNodeSelected: [{ type: Input }],
        beforeNodeUnSelected: [{ type: Input }],
        beforeNodeChecked: [{ type: Input }],
        beforeNodeUnChecked: [{ type: Input }],
        beforeCheckAll: [{ type: Input }],
        beforeUnCheckAll: [{ type: Input }],
        beforeClickNode: [{ type: Input }],
        pagination: [{ type: Input }],
        paginationForChildren: [{ type: Input }],
        pagerViewMode: [{ type: Input }],
        pagerOnServer: [{ type: Input }],
        pageList: [{ type: Input }],
        pageIndex: [{ type: Input }],
        pageSize: [{ type: Input }],
        pagerHeight: [{ type: Input }],
        showPageList: [{ type: Input }],
        showPageInfo: [{ type: Input }],
        showPageNumber: [{ type: Input }],
        pagerLabelSize: [{ type: Input }],
        showGotoInput: [{ type: Input }],
        showTotalForChildren: [{ type: Input }],
        total: [{ type: Input }],
        enableContextMenu: [{ type: Input }],
        contextMenuItems: [{ type: Input }],
        beforeShowContextMenu: [{ type: Input }],
        pageSizeChanged: [{ type: Output }],
        pageChanged: [{ type: Output }],
        columnSorted: [{ type: Output }],
        nodeSelected: [{ type: Output }],
        nodeUnSelect: [{ type: Output }],
        nodeChecked: [{ type: Output }],
        nodeUnChecked: [{ type: Output }],
        checkAll: [{ type: Output }],
        unCheckAll: [{ type: Output }],
        search: [{ type: Output }],
        dblClick: [{ type: Output }],
        loadedData: [{ type: Output }],
        expand: [{ type: Output }],
        collapse: [{ type: Output }],
        expandAllNodes: [{ type: Output }],
        collapseAllNodes: [{ type: Output }],
        appendNew: [{ type: Output }],
        removed: [{ type: Output }],
        updated: [{ type: Output }],
        clearSearchValue: [{ type: Output }],
        cellClick: [{ type: Output }],
        childsPageChanged: [{ type: Output }],
        searchValueChange: [{ type: Output }],
        loadedTimer: [{ type: Input }],
        data: [{ type: Input }],
        autoWidth: [{ type: Input }],
        templates: [{ type: ContentChildren, args: [FarrisTemplateDirective,] }],
        columnsRef: [{ type: ContentChildren, args: [TreeTableColumnDirective,] }],
        headerBox: [{ type: ViewChild, args: ['headerBox',] }],
        resizerHelperVC: [{ type: ViewChild, args: ['resizerHelper',] }],
        headerTable: [{ type: ViewChild, args: ['headerTable',] }],
        bodyTable: [{ type: ViewChild, args: ['bodyTable',] }],
        inputGroup: [{ type: ViewChild, args: ['inputGroup',] }],
        psRef: [{ type: ViewChild, args: [PerfectScrollbarComponent,] }],
        allCheckbox: [{ type: ViewChild, args: ['allCheckbox',] }],
        nodesPagerBar: [{ type: ViewChild, args: ['nodespagerbar',] }],
        ctxMenu: [{ type: ViewChild, args: [FarrisContextMenuDirective,] }],
        onResized: [{ type: HostListener, args: ['window:resize',] }]
    };
    return TreeTableComponent;
}());
export { TreeTableComponent };
if (false) {
    /** @type {?} */
    TreeTableComponent.prototype.id;
    /**
     * 宽度
     * @type {?}
     */
    TreeTableComponent.prototype.width;
    /**
     * 高度
     * @type {?}
     */
    TreeTableComponent.prototype.height;
    /** @type {?} */
    TreeTableComponent.prototype.showFilterBar;
    /**
     * 显示查询字段
     * @type {?}
     */
    TreeTableComponent.prototype.showSearchField;
    /** @type {?} */
    TreeTableComponent.prototype.headerHeight;
    /**
     * 表头折行
     * @type {?}
     */
    TreeTableComponent.prototype.headerWrap;
    /**
     * 行高
     * @type {?}
     */
    TreeTableComponent.prototype.rowHeight;
    /**
     * 列信息
     * @type {?}
     */
    TreeTableComponent.prototype.columns;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype._groupColumns;
    /**
     * 启用多表头
     * @type {?}
     */
    TreeTableComponent.prototype.useGroupHeader;
    /** @type {?} */
    TreeTableComponent.prototype.fitColumns;
    /** @type {?} */
    TreeTableComponent.prototype.autoFitColumns;
    /** @type {?} */
    TreeTableComponent.prototype.searchFields;
    /** @type {?} */
    TreeTableComponent.prototype.allColumnsTitle;
    /**
     * 显示连接线，默认为 false
     * @type {?}
     */
    TreeTableComponent.prototype.showLines;
    /** @type {?} */
    TreeTableComponent.prototype.showLinesOnHover;
    /**
     * 是否启用多选。 默认为单选
     * @type {?}
     */
    TreeTableComponent.prototype.multiSelect;
    /** @type {?} */
    TreeTableComponent.prototype.singleSelect;
    /**
     * 启用多选后，是否显示checkbox
     * @type {?}
     */
    TreeTableComponent.prototype.showCheckbox;
    /**
     * 主键字段
     * @type {?}
     */
    TreeTableComponent.prototype.idField;
    /**
     * 显示边框线
     * @type {?}
     */
    TreeTableComponent.prototype.showBorder;
    /** @type {?} */
    TreeTableComponent.prototype.showCheckAll;
    /** @type {?} */
    TreeTableComponent.prototype.showHeader;
    /**
     * 启用斑马线
     * @type {?}
     */
    TreeTableComponent.prototype.striped;
    /**
     * 启用鼠标划过效果
     * @type {?}
     */
    TreeTableComponent.prototype.hovered;
    /**
     * 禁用。 禁用时不允许选中行
     * @type {?}
     */
    TreeTableComponent.prototype.disabled;
    /**
     * 禁卡节点选中
     * @type {?}
     */
    TreeTableComponent.prototype.disabledRow;
    /**
     * 数据加载方式; 默认值 为 all
     * - all: 全部加载
     * - async: 分层加载
     * @type {?}
     */
    TreeTableComponent.prototype.loadDataType;
    /**
     * 固定表头
     * @type {?}
     */
    TreeTableComponent.prototype.fixedHeader;
    /**
     * 当多选时，选中当前行并钩选
     * @type {?}
     */
    TreeTableComponent.prototype.checkOnSelect;
    /**
     * 当多选时，钩选并选中当前行
     * @type {?}
     */
    TreeTableComponent.prototype.selectOnCheck;
    /**
     * 启用多选时，此属性为true 时，仅当前行选中
     * @type {?}
     */
    TreeTableComponent.prototype.onlySelectSelf;
    /**
     * 启用列宽调整
     * @type {?}
     */
    TreeTableComponent.prototype.resizableColumns;
    /**
     * 设置为true时自适应父容的尺寸
     * @type {?}
     */
    TreeTableComponent.prototype.fit;
    /**
     * 启用级联选中功能
     * @type {?}
     */
    TreeTableComponent.prototype.cascadeCheck;
    /**
     * 向下级联选中
     * @type {?}
     */
    TreeTableComponent.prototype.cascadeDown;
    /**
     * 向上级联选中
     * @type {?}
     */
    TreeTableComponent.prototype.cascadeUp;
    /**
     * 空数据时，显示的提示文本
     * @type {?}
     */
    TreeTableComponent.prototype.emptyMessage;
    /**
     * 缩进间距，默认为 16px
     * @type {?}
     */
    TreeTableComponent.prototype.indentSpacing;
    /**
     * 单击行选中后，在次点击不会被取消选中状态;
     * @type {?}
     */
    TreeTableComponent.prototype.keepSelect;
    /**
     * 虚拟加载
     * @type {?}
     */
    TreeTableComponent.prototype.virtualized;
    /**
     * 仅允许选择叶子节点
     * - default: 应用服务器端传回的设置，如果服务器端没有设置，则与 no 保持一至；
     * - yes: 如果客户端设置为 `yes`, 服务器端的设置失效；
     * - no: 允许选择所有节点；服务器端设置失效
     * @type {?}
     */
    TreeTableComponent.prototype.onlySelectLeaf;
    /**
     * 显示图标
     * @type {?}
     */
    TreeTableComponent.prototype.showIcon;
    /**
     * 叶子节点图标
     * @type {?}
     */
    TreeTableComponent.prototype.leafIcon;
    /**
     * 节点展开图标
     * @type {?}
     */
    TreeTableComponent.prototype.expandIcon;
    /**
     * 节点折叠图标
     * @type {?}
     */
    TreeTableComponent.prototype.collapseIcon;
    /** @type {?} */
    TreeTableComponent.prototype.foldIcon;
    /** @type {?} */
    TreeTableComponent.prototype.unfoldIcon;
    /**
     * 启用节点图标从数据中获取。 默认为 false
     * @type {?}
     */
    TreeTableComponent.prototype.useIconFromData;
    /**
     * 当数据源中icon未设置时使用内置ICON. 默认为 true
     * @type {?}
     */
    TreeTableComponent.prototype.whenDataIconEmptyUseDefault;
    /**
     * 从数据源字段中获取图标
     * @type {?}
     */
    TreeTableComponent.prototype.iconField;
    /**
     * 图标自定义样式
     * @type {?}
     */
    TreeTableComponent.prototype.iconCls;
    /**
     * 启用远端排序
     * @type {?}
     */
    TreeTableComponent.prototype.remoteSort;
    /**
     * 排序字段
     * @type {?}
     */
    TreeTableComponent.prototype.sortName;
    /**
     * 排序方式 asc | desc
     * @type {?}
     */
    TreeTableComponent.prototype.sortOrder;
    /**
     * 允许多列排序
     * @type {?}
     */
    TreeTableComponent.prototype.multiSort;
    /** @type {?} */
    TreeTableComponent.prototype.beforeSortColumn;
    /** @type {?} */
    TreeTableComponent.prototype.rowStyler;
    /** @type {?} */
    TreeTableComponent.prototype.cellStyler;
    /**
     * 启用前端文本查找
     * @type {?}
     */
    TreeTableComponent.prototype.enableFindText;
    /**
     * 文本查询字段, 弃用
     * @type {?}
     */
    TreeTableComponent.prototype.findField;
    /** @type {?} */
    TreeTableComponent.prototype.expandLevel;
    /** @type {?} */
    TreeTableComponent.prototype.selectValue;
    /** @type {?} */
    TreeTableComponent.prototype.selectValueChange;
    /**
     * 启用双击展开节点
     * @type {?}
     */
    TreeTableComponent.prototype.dblClickExpand;
    /**
     * 选中节点ID数组
     * @type {?}
     */
    TreeTableComponent.prototype.selectValues;
    /** @type {?} */
    TreeTableComponent.prototype.selectValuesChange;
    /**
     * 是否禁止折行，默认不折行
     * @type {?}
     */
    TreeTableComponent.prototype.nowrap;
    /** @type {?} */
    TreeTableComponent.prototype.checkValues;
    /** @type {?} */
    TreeTableComponent.prototype.checkValuesChange;
    /** @type {?} */
    TreeTableComponent.prototype.beforeNodeSelected;
    /** @type {?} */
    TreeTableComponent.prototype.beforeNodeUnSelected;
    /** @type {?} */
    TreeTableComponent.prototype.beforeNodeChecked;
    /** @type {?} */
    TreeTableComponent.prototype.beforeNodeUnChecked;
    /** @type {?} */
    TreeTableComponent.prototype.beforeCheckAll;
    /** @type {?} */
    TreeTableComponent.prototype.beforeUnCheckAll;
    /** @type {?} */
    TreeTableComponent.prototype.beforeClickNode;
    /**
     * 分页信息
     * @type {?}
     */
    TreeTableComponent.prototype.pagination;
    /**
     * 分页加载子节点数据
     * @type {?}
     */
    TreeTableComponent.prototype.paginationForChildren;
    /**
     * 分页条显示模式， default, simple
     * @type {?}
     */
    TreeTableComponent.prototype.pagerViewMode;
    /**
     * 启用服务器端分页
     * @type {?}
     */
    TreeTableComponent.prototype.pagerOnServer;
    /**
     * 每页记录数
     * @type {?}
     */
    TreeTableComponent.prototype.pageList;
    /**
     * 当前页码
     * @type {?}
     */
    TreeTableComponent.prototype.pageIndex;
    /**
     * 每页记录数
     * @type {?}
     */
    TreeTableComponent.prototype.pageSize;
    /**
     * 分页区高度
     * @type {?}
     */
    TreeTableComponent.prototype.pagerHeight;
    /**
     * 显示每页记录数
     * @type {?}
     */
    TreeTableComponent.prototype.showPageList;
    /**
     * 显示分页信息
     * @type {?}
     */
    TreeTableComponent.prototype.showPageInfo;
    /**
     * 显示页码
     * @type {?}
     */
    TreeTableComponent.prototype.showPageNumber;
    /**
     * 显示页码最大数量
     * @type {?}
     */
    TreeTableComponent.prototype.pagerLabelSize;
    /**
     * 显示页码输入框
     * @type {?}
     */
    TreeTableComponent.prototype.showGotoInput;
    /**
     * 子节点分页是否显示总记录数，默认 false
     * @type {?}
     */
    TreeTableComponent.prototype.showTotalForChildren;
    /**
     * 总记录数
     * @type {?}
     */
    TreeTableComponent.prototype.total;
    /** @type {?} */
    TreeTableComponent.prototype.enableContextMenu;
    /** @type {?} */
    TreeTableComponent.prototype.contextMenuItems;
    /** @type {?} */
    TreeTableComponent.prototype.beforeShowContextMenu;
    /** @type {?} */
    TreeTableComponent.prototype.pageSizeChanged;
    /** @type {?} */
    TreeTableComponent.prototype.pageChanged;
    /**
     * 排序后
     * @type {?}
     */
    TreeTableComponent.prototype.columnSorted;
    /**
     * 选中事件
     * @type {?}
     */
    TreeTableComponent.prototype.nodeSelected;
    /**
     * 取消选中事件
     * @type {?}
     */
    TreeTableComponent.prototype.nodeUnSelect;
    /**
     * 钩选
     * @type {?}
     */
    TreeTableComponent.prototype.nodeChecked;
    /**
     * 取消钩选
     * @type {?}
     */
    TreeTableComponent.prototype.nodeUnChecked;
    /**
     * 全选事件
     * @type {?}
     */
    TreeTableComponent.prototype.checkAll;
    /**
     * 取消全选
     * @type {?}
     */
    TreeTableComponent.prototype.unCheckAll;
    /**
     * 查询
     * @type {?}
     */
    TreeTableComponent.prototype.search;
    /** @type {?} */
    TreeTableComponent.prototype.dblClick;
    /** @type {?} */
    TreeTableComponent.prototype.loadedData;
    /** @type {?} */
    TreeTableComponent.prototype.expand;
    /** @type {?} */
    TreeTableComponent.prototype.collapse;
    /** @type {?} */
    TreeTableComponent.prototype.expandAllNodes;
    /** @type {?} */
    TreeTableComponent.prototype.collapseAllNodes;
    /** @type {?} */
    TreeTableComponent.prototype.appendNew;
    /** @type {?} */
    TreeTableComponent.prototype.removed;
    /** @type {?} */
    TreeTableComponent.prototype.updated;
    /** @type {?} */
    TreeTableComponent.prototype.clearSearchValue;
    /** @type {?} */
    TreeTableComponent.prototype.cellClick;
    /** @type {?} */
    TreeTableComponent.prototype.childsPageChanged;
    /** @type {?} */
    TreeTableComponent.prototype.searchValueChange;
    /** @type {?} */
    TreeTableComponent.prototype.loadedTimer;
    /** @type {?} */
    TreeTableComponent.prototype.serializedValue;
    /** @type {?} */
    TreeTableComponent.prototype._data;
    /** @type {?} */
    TreeTableComponent.prototype.isLoadNewDataSetEmpty;
    /**
     * 根据内容自动宽度，默认 false;
     * 此属性开启后，自动列宽失效
     * @type {?}
     */
    TreeTableComponent.prototype.autoWidth;
    /** @type {?} */
    TreeTableComponent.prototype.templates;
    /** @type {?} */
    TreeTableComponent.prototype.columnsRef;
    /** @type {?} */
    TreeTableComponent.prototype.headerBox;
    /** @type {?} */
    TreeTableComponent.prototype.resizerHelperVC;
    /** @type {?} */
    TreeTableComponent.prototype.headerTable;
    /** @type {?} */
    TreeTableComponent.prototype.bodyTable;
    /** @type {?} */
    TreeTableComponent.prototype.inputGroup;
    /** @type {?} */
    TreeTableComponent.prototype.psRef;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.headerCheckboxCmp;
    /** @type {?} */
    TreeTableComponent.prototype.nodesPagerBar;
    /** @type {?} */
    TreeTableComponent.prototype.ctxMenu;
    /**
     * 表头模板
     * @type {?}
     */
    TreeTableComponent.prototype.headerTemplate;
    /**
     * 表体模板
     * @type {?}
     */
    TreeTableComponent.prototype.bodyTemplate;
    /**
     * 选中项集合
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype._selections;
    /**
     * 选中项索引
     * @type {?}
     */
    TreeTableComponent.prototype.selectRowIndex;
    /**
     * 选中当前行
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype._selectedRow;
    /**
     * 钩选的记录集合
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype._checkeds;
    /** @type {?} */
    TreeTableComponent.prototype.containerElement;
    /** @type {?} */
    TreeTableComponent.prototype.lastResizerHelperX;
    /** @type {?} */
    TreeTableComponent.prototype.searchData;
    /** @type {?} */
    TreeTableComponent.prototype.scorllBodyHeight;
    /** @type {?} */
    TreeTableComponent.prototype.searchHandle;
    /** @type {?} */
    TreeTableComponent.prototype.searchButtonText;
    /**
     * 显示查询工具条
     * @type {?}
     */
    TreeTableComponent.prototype.showFindInput;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.isDataChanged;
    /** @type {?} */
    TreeTableComponent.prototype.scrollLoader;
    /** @type {?} */
    TreeTableComponent.prototype.topHideHeight;
    /** @type {?} */
    TreeTableComponent.prototype.bottomHideHeight;
    /** @type {?} */
    TreeTableComponent.prototype.state;
    /**
     * 待查询的文本
     * @type {?}
     */
    TreeTableComponent.prototype.findValue;
    /**
     * 结果总数
     * @type {?}
     */
    TreeTableComponent.prototype.findCount;
    /**
     * 当前索引
     * @type {?}
     */
    TreeTableComponent.prototype.findCurrent;
    /**
     * 存储文本查询结果
     * @type {?}
     */
    TreeTableComponent.prototype.findResult;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.ro;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.findKeysHandler;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype._hotKeys;
    /** @type {?} */
    TreeTableComponent.prototype.localeService;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.idService;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.styleSheetId;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.styleElement;
    /** @type {?} */
    TreeTableComponent.prototype.fast;
    /** @type {?} */
    TreeTableComponent.prototype.paginationOptions;
    /** @type {?} */
    TreeTableComponent.prototype.selectNodeChangedSubject;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype._UUID;
    /** @type {?} */
    TreeTableComponent.prototype.fixedColumns;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.destroy$;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.farrisInstances;
    /** @type {?} */
    TreeTableComponent.prototype.difference;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.debugSer;
    /** @type {?} */
    TreeTableComponent.prototype.onBeforeShowContextMenu;
    /** @type {?} */
    TreeTableComponent.prototype.ttService;
    /** @type {?} */
    TreeTableComponent.prototype.el;
    /** @type {?} */
    TreeTableComponent.prototype.resizeSer;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.renderer;
    /** @type {?} */
    TreeTableComponent.prototype.utils;
    /** @type {?} */
    TreeTableComponent.prototype.colFormatSer;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.shortcuts;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.cdRef;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.ngZone;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.injector;
}
var TTBodyComponent = /** @class */ (function () {
    function TTBodyComponent(tt) {
        this.tt = tt;
    }
    TTBodyComponent.decorators = [
        { type: Component, args: [{
                    selector: '[treeTableBody]',
                    template: "\n        <ng-template ngFor let-serializedNode let-rowIndex=\"index\" [ngForOf]=\"tt.serializedValue\">\n            <ng-container *ngIf=\"serializedNode.visible\">\n                <ng-container\n                    *ngTemplateOutlet=\"template;\n                        context: {$implicit: serializedNode, node: serializedNode.node,\n                        rowData: serializedNode.node.data, rowIndex: rowIndex, columns: columns}\">\n                </ng-container>\n            </ng-container>\n        </ng-template>\n    "
                }] }
    ];
    /** @nocollapse */
    TTBodyComponent.ctorParameters = function () { return [
        { type: TreeTableComponent }
    ]; };
    TTBodyComponent.propDecorators = {
        columns: [{ type: Input }],
        template: [{ type: Input }]
    };
    return TTBodyComponent;
}());
export { TTBodyComponent };
if (false) {
    /**
     * 列集合
     * @type {?}
     */
    TTBodyComponent.prototype.columns;
    /**
     * 表体模板
     * @type {?}
     */
    TTBodyComponent.prototype.template;
    /** @type {?} */
    TTBodyComponent.prototype.tt;
}
// [style.marginLeft]="rowNode.level * 16 + 'px'"
/**
 * 树节点展开折叠
 */
var TreeTableTogglerComponent = /** @class */ (function () {
    function TreeTableTogglerComponent(tt, ngzone, render) {
        this.tt = tt;
        this.ngzone = ngzone;
        this.render = render;
        this.cls = true;
        this.showLines = false;
        this.indentSpacing = 16;
        this.treeNodeIcon = {};
        this.isShowTriangle = false;
        this.noChilds = false;
        this.subscriptions = [];
    }
    Object.defineProperty(TreeTableTogglerComponent.prototype, "offsetWidth", {
        get: /**
         * @return {?}
         */
        function () {
            return this.togglerEl.nativeElement.parentElement.offsetWidth;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    TreeTableTogglerComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.treeNodeIcon = this.tt.getTreeIcon(this.rowNode.node);
        this.isShowTriangle = this.showTriangle();
        this.noChilds = this.hasChildren();
        /** @type {?} */
        var expandSub = this.tt.expand.subscribe((/**
         * @param {?} node
         * @return {?}
         */
        function (node) {
            if (_this.rowNode.id === node.data[_this.tt.idField]) {
                _this.updateIcon(_this.rowNode.node);
                if (_this.tt.psRef) {
                    _this.tt.psRef.directiveRef.update();
                }
                _this.tt.detectChanges();
            }
        }));
        /** @type {?} */
        var collapseSub = this.tt.collapse.subscribe((/**
         * @param {?} node
         * @return {?}
         */
        function (node) {
            if (_this.rowNode.id === node.data[_this.tt.idField]) {
                _this.updateIcon(_this.rowNode.node);
                if (_this.tt.psRef) {
                    _this.tt.psRef.directiveRef.update();
                }
                _this.tt.detectChanges();
            }
        }));
        /** @type {?} */
        var addNewSub = this.tt.appendNew.subscribe((/**
         * @param {?} e
         * @return {?}
         */
        function (e) {
            if (e.parent) {
                if (_this.rowNode.id === e.parent.data[_this.tt.idField]) {
                    if (_this.rowNode.node.leaf || _this.rowNode.node.leaf === undefined) {
                        _this.rowNode.node.leaf = false;
                    }
                }
                _this.updateIcon(_this.rowNode.node);
            }
        }));
        this.subscriptions = [expandSub, collapseSub, addNewSub];
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    TreeTableTogglerComponent.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        if (changes.showLines && !changes.showLines.isFirstChange()) {
            if (this.showLines) {
                this.render.setStyle(this.togglerEl.nativeElement, 'display', this.isShowTriangle ? '' : 'none');
            }
            else {
                this.render.removeStyle(this.togglerEl.nativeElement, 'display');
            }
            this.reSetLines();
        }
        if (changes.rowNode && !changes.rowNode.isFirstChange()) {
            this.updateIcon(this.rowNode.node);
            // if (changes.rowNode.currentValue.node.children) {
            //     if (!!changes.rowNode.currentValue.node.children.length !== !!changes.rowNode.previousValue.node.children.length) {
            //         this.reSetLines();
            //     }
            // }
            if (this.tt.showLines) {
                /** @type {?} */
                var currenChildrenLength = 0;
                /** @type {?} */
                var previousChildrenLength = 0;
                if (changes.rowNode.currentValue && changes.rowNode.currentValue.node.children) {
                    currenChildrenLength = changes.rowNode.currentValue.node.children.length;
                }
                if (changes.rowNode.previousValue && changes.rowNode.previousValue.node.children) {
                    previousChildrenLength = changes.rowNode.previousValue.node.children.length;
                }
                if (currenChildrenLength != previousChildrenLength || (!currenChildrenLength && !previousChildrenLength)) {
                    this.reSetLines();
                }
            }
        }
    };
    /**
     * @return {?}
     */
    TreeTableTogglerComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (!this.tt.bodyTemplate && this.showLines) {
            setTimeout((/**
             * @return {?}
             */
            function () {
                _this.reSetLines();
            }));
        }
    };
    /**
     * @return {?}
     */
    TreeTableTogglerComponent.prototype.ngDoCheck = /**
     * @return {?}
     */
    function () {
        // this.isShowTriangle = this.showTriangle();
    };
    /**
     * @return {?}
     */
    TreeTableTogglerComponent.prototype.ngAfterViewChecked = /**
     * @return {?}
     */
    function () {
        // if (this.tt && this.tt.data) {
        //     this.reSetLines();
        // }
    };
    /**
     * @return {?}
     */
    TreeTableTogglerComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this.unAllSubscriptions();
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableTogglerComponent.prototype.unAllSubscriptions = /**
     * @private
     * @return {?}
     */
    function () {
        this.subscriptions.forEach((/**
         * @param {?} s
         * @return {?}
         */
        function (s) {
            s.unsubscribe();
        }));
        this.subscriptions = [];
    };
    /**
     * @return {?}
     */
    TreeTableTogglerComponent.prototype.hasChildren = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var tn = this.rowNode.node;
        return tn.leaf === false || this.rowNode.level !== 0 || (tn.children && tn.children.length > 0);
    };
    /**
     * @return {?}
     */
    TreeTableTogglerComponent.prototype.showTriangle = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var tn = this.rowNode.node;
        if (this.tt.loadDataType === 'all') {
            return tn.leaf === false || (tn.children && tn.children.length > 0);
        }
        else {
            return tn.leaf === false;
        }
    };
    /**
     * @return {?}
     */
    TreeTableTogglerComponent.prototype.reSetLines = /**
     * @return {?}
     */
    function () {
        if (this.togglerEl) {
            /** @type {?} */
            var parentEl = this.togglerEl.nativeElement.closest('.treetable-cell-content');
            if (parentEl) {
                /** @type {?} */
                var lineEls = parentEl.querySelectorAll('.treetable-lines');
                for (var k = 0; k < lineEls.length; k++) {
                    lineEls[k].remove();
                }
            }
        }
        this._renderLines();
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableTogglerComponent.prototype._renderLines = /**
     * @private
     * @return {?}
     */
    function () {
        if (!this.tt.bodyTemplate) {
            if (this.showLines) {
                this.renderLines();
            }
            else {
                // this.noLineStyle();
            }
        }
        else {
            /*
            if (this.togglerEl) {
                if (this.togglerEl.nativeElement.closest('tr')) {
                    const tds = this.togglerEl.nativeElement.closest('tr').querySelectorAll('td');
                    Array.from(tds).forEach(n => {
                        this.render.setStyle(n, 'padding', '0.25rem 0.75rem');
                    });
                }
            } */
        }
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableTogglerComponent.prototype.noLineStyle = /**
     * @private
     * @return {?}
     */
    function () {
        // this.cls = false;
        if (this.togglerEl) {
            // this.render.setStyle(this.togglerEl.nativeElement, 'margin-left', `${this.rowNode.level * this.indentSpacing}px`);
            this.render.setStyle(this.togglerEl.nativeElement, 'visibility', this.isShowTriangle ? 'visible' : 'hidden');
            this.render.removeStyle(this.togglerEl.nativeElement, 'display');
        }
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableTogglerComponent.prototype.renderLines = /**
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var len = this.rowNode.level;
        if (!this.togglerEl) {
            return;
        }
        /** @type {?} */
        var parentEl = this.togglerEl.nativeElement.closest('.treetable-cell-content');
        if (!parentEl) {
            return;
        }
        /** @type {?} */
        var referEl = this.togglerEl.nativeElement.parentElement;
        if (len === 0 && !this.showTriangle()) {
            this.createLeafNodeLines(referEl, parentEl, true);
        }
        for (var i = 0; i < len; i++) {
            parentEl.insertBefore(this.newLineElement(), referEl);
            /** @type {?} */
            var nearLine = this.newLineElement(false);
            parentEl.insertBefore(nearLine, referEl);
            /** @type {?} */
            var isLeaf = !this.showTriangle();
            if (isLeaf && i === len - 1) {
                this.createLeafNodeLines(referEl, parentEl);
            }
        }
    };
    /**
     * @private
     * @param {?=} border
     * @return {?}
     */
    TreeTableTogglerComponent.prototype.newLineElement = /**
     * @private
     * @param {?=} border
     * @return {?}
     */
    function (border) {
        if (border === void 0) { border = true; }
        /** @type {?} */
        var newLineEl = this.render.createElement('div');
        this.render.addClass(newLineEl, 'treetable-lines');
        if (this.showLines) {
            if (border) {
                this.render.addClass(newLineEl, 'treetable-lines-border-color');
            }
        }
        return newLineEl;
    };
    /**
     * 构造 ∟ or ├
     */
    /**
     * 构造 ∟ or ├
     * @private
     * @param {?} containerEl
     * @param {?} parentEl
     * @param {?=} isTopNode
     * @return {?}
     */
    TreeTableTogglerComponent.prototype.createLeafNodeLines = /**
     * 构造 ∟ or ├
     * @private
     * @param {?} containerEl
     * @param {?} parentEl
     * @param {?=} isTopNode
     * @return {?}
     */
    function (containerEl, parentEl, isTopNode) {
        // ├
        // <div class="treetable-lines" style="border-color: rgb(204, 204, 204);"></div>
        // <div class="treetable-lines treetable-lines-leaf" style="border-color: transparent;">
        //     <div class="normal"></div>
        // </div>
        if (isTopNode === void 0) { isTopNode = false; }
        // ├
        // <div class="treetable-lines" style="border-color: rgb(204, 204, 204);"></div>
        // <div class="treetable-lines treetable-lines-leaf" style="border-color: transparent;">
        //     <div class="normal"></div>
        // </div>
        // ∟
        // <div class="treetable-lines" style="border-color: transparent"></div>
        // <div class="treetable-lines treetable-lines-leaf" style="border-color: transparent;">
        //     <div style="corner"></div>
        // </div>
        /** @type {?} */
        var l1 = this.newLineElement();
        /** @type {?} */
        var l2 = this.newLineElement(false);
        this.render.addClass(l2, 'treetable-lines-leaf');
        /** @type {?} */
        var dessert = this.render.createElement('div');
        if (this.showLines) {
            /** @type {?} */
            var cls = 'normal';
            if (this.rowNode.last) {
                cls = 'corner';
                this.render.removeClass(l1, 'treetable-lines-border-color');
            }
            l2.appendChild(dessert);
            this.render.addClass(dessert, cls);
            this.render.addClass(dessert, 'treetable-lines-border-color');
        }
        parentEl.insertBefore(l1, containerEl);
        parentEl.insertBefore(l2, containerEl);
        if (isTopNode) {
            this.render.setStyle(l2, 'marginRight', '3px');
        }
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableTogglerComponent.prototype.registerClickEvent = /**
     * @private
     * @return {?}
     */
    function () {
        if (this.togglerEl) {
            this.render.listen(this.togglerEl.nativeElement, 'click', this.onClick.bind(this));
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    TreeTableTogglerComponent.prototype.onClick = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        event.stopPropagation();
        event.preventDefault();
        if (this.rowNode.node['showLoading']) {
            return false;
        }
        if (!this.tt.disabled) {
            this.tt.toggleExpand(this.rowNode.node);
        }
        return false;
    };
    /**
     * @private
     * @param {?} treeNode
     * @return {?}
     */
    TreeTableTogglerComponent.prototype.updateIcon = /**
     * @private
     * @param {?} treeNode
     * @return {?}
     */
    function (treeNode) {
        this.isShowTriangle = this.showTriangle();
        this.noChilds = this.hasChildren();
        this.treeNodeIcon = this.tt.getTreeIcon(treeNode);
    };
    TreeTableTogglerComponent.decorators = [
        { type: Component, args: [{
                    selector: 'farris-treeTableToggler',
                    template: "\n    <a href=\"javascript:void(0)\" #toggler\n            class=\"treenode-fold\" *ngIf=\"showLines\"\n            [ngClass]=\"rowNode.node.expanded ? tt.unfoldIcon : tt.foldIcon\"\n            [style.display]=\"isShowTriangle ? '' : 'none'\"\n            (click)=\"onClick($event)\"></a>\n\n    <a href=\"javascript:void(0)\" #toggler\n            class=\"treenode-fold\"  *ngIf=\"!showLines\"\n            [ngClass]=\"rowNode.node.expanded ? tt.unfoldIcon : tt.foldIcon\"\n            [style.marginLeft.px]=\"rowNode.level * indentSpacing\"\n            [style.visibility]=\"isShowTriangle ? 'visible' : 'hidden'\"\n            (click)=\"onClick($event)\"></a>\n    <span class=\"tree-icon-line\" [style.display]=\"isShowTriangle && showLines? '' : 'none'\"></span>\n    <span [style.display]=\"(tt.showIcon && rowNode.node.showIcon) ? 'inline-block': 'none'\" class=\"treenode-icon\" [ngClass]=\"treeNodeIcon\"></span>\n\n    <tt-checkbox  [rowNode]=\"rowNode\" *ngIf=\"tt.showCheckbox\" [disabled]=\"disabled\" [checked]=\"rowNode.isChecked\" ></tt-checkbox>\n    ",
                    encapsulation: ViewEncapsulation.None,
                    exportAs: 'ttToggler'
                }] }
    ];
    /** @nocollapse */
    TreeTableTogglerComponent.ctorParameters = function () { return [
        { type: TreeTableComponent },
        { type: NgZone },
        { type: Renderer2 }
    ]; };
    TreeTableTogglerComponent.propDecorators = {
        cls: [{ type: HostBinding, args: ['class.f-cmp-treetable-toggler',] }],
        rowNode: [{ type: Input }],
        disabled: [{ type: Input }],
        showLines: [{ type: Input }],
        indentSpacing: [{ type: Input }],
        togglerEl: [{ type: ViewChild, args: ['toggler',] }]
    };
    return TreeTableTogglerComponent;
}());
export { TreeTableTogglerComponent };
if (false) {
    /** @type {?} */
    TreeTableTogglerComponent.prototype.cls;
    /**
     * 树节点
     * @type {?}
     */
    TreeTableTogglerComponent.prototype.rowNode;
    /** @type {?} */
    TreeTableTogglerComponent.prototype.disabled;
    /** @type {?} */
    TreeTableTogglerComponent.prototype.showLines;
    /** @type {?} */
    TreeTableTogglerComponent.prototype.indentSpacing;
    /** @type {?} */
    TreeTableTogglerComponent.prototype.treeNodeIcon;
    /** @type {?} */
    TreeTableTogglerComponent.prototype.isShowTriangle;
    /** @type {?} */
    TreeTableTogglerComponent.prototype.noChilds;
    /** @type {?} */
    TreeTableTogglerComponent.prototype.subscriptions;
    /** @type {?} */
    TreeTableTogglerComponent.prototype.togglerEl;
    /** @type {?} */
    TreeTableTogglerComponent.prototype.tt;
    /**
     * @type {?}
     * @private
     */
    TreeTableTogglerComponent.prototype.ngzone;
    /**
     * @type {?}
     * @private
     */
    TreeTableTogglerComponent.prototype.render;
}
/**
 * 选中行组件
 */
var TreeTableSelectRowDirective = /** @class */ (function () {
    function TreeTableSelectRowDirective(tt, el, render, ngZone) {
        var _this = this;
        this.tt = tt;
        this.el = el;
        this.render = render;
        this.ngZone = ngZone;
        this.prevent = false;
        this.delay = 0;
        this.subscription = this.tt.selectNodeChangedSubject.subscribe((/**
         * @param {?} ids
         * @return {?}
         */
        function (ids) {
            if (ids && _this.rowNode) {
                /** @type {?} */
                var idArr = ids.split(',');
                if (idArr.indexOf(_this.rowNode.id) > -1) {
                    _this.toggleClass();
                    _this.rowNode.node['elementRef'] = _this.el;
                }
            }
        }));
    }
    /**
     * @return {?}
     */
    TreeTableSelectRowDirective.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        // this.rowNode.node.selectable = !this.selectRowDisabled;
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    TreeTableSelectRowDirective.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        // if (changes.selectRowDisabled && !changes.selectRowDisabled.isFirstChange()) {
        //     this.rowNode.node.selectable = !changes.selectRowDisabled.currentValue;
        // }
    };
    /**
     * @return {?}
     */
    TreeTableSelectRowDirective.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        if (this.subscription) {
            this.subscription.unsubscribe();
            this.subscription = null;
        }
    };
    /**
     * @return {?}
     */
    TreeTableSelectRowDirective.prototype.ngDoCheck = /**
     * @return {?}
     */
    function () {
        if (this.tt.bodyTemplate) {
            if (!this.tt.isSelected(this.rowNode.node)) {
                this.render.removeClass(this.el.nativeElement, 'farris-table-selectedrow');
            }
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    TreeTableSelectRowDirective.prototype.onclick = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        var _this = this;
        if (this.isEnabled()) {
            // this.rowClick(event);
            if (this.delay !== 0) {
                if (!this.prevent) {
                    this.prevent = true;
                    this.timer = setTimeout((/**
                     * @return {?}
                     */
                    function () {
                        _this.rowClick(event);
                        _this.prevent = false;
                    }), this.delay);
                }
            }
            else {
                this.rowClick(event);
            }
        }
        // event.stopPropagation();
    };
    /**
     * @return {?}
     */
    TreeTableSelectRowDirective.prototype.isEnabled = /**
     * @return {?}
     */
    function () {
        return !this.tt.disabled && this.selectRowDisabled !== true;
    };
    /**
     * @private
     * @param {?} event
     * @return {?}
     */
    TreeTableSelectRowDirective.prototype.rowClick = /**
     * @private
     * @param {?} event
     * @return {?}
     */
    function (event) {
        var _this = this;
        event.stopPropagation();
        this.tt.beforeClickNode({ instance: this.tt, rowNode: this.rowNode, event: event, type: 'row' }).subscribe((/**
         * @param {?} e
         * @return {?}
         */
        function (e) {
            if (!e) {
                return;
            }
            _this.tt.handleRowClick({
                originalEvent: event,
                rowNode: _this.rowNode,
                rowIndex: _this.rowIndex
            });
            _this.ngZone.runOutsideAngular((/**
             * @return {?}
             */
            function () {
                _this.toggleClass();
            }));
        }));
    };
    /**
     * @return {?}
     */
    TreeTableSelectRowDirective.prototype.toggleClass = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (!this.tt.bodyTemplate) {
            if (this.tt.isSelected(this.rowNode.node)) {
                if (this.tt.singleSelect) {
                    this.tt.el.nativeElement.querySelectorAll('.farris-treetable-tbody>tr.farris-table-selectedrow').forEach((/**
                     * @param {?} n
                     * @return {?}
                     */
                    function (n) {
                        _this.render.removeClass(n, 'farris-table-selectedrow');
                    }));
                }
                this.render.addClass(this.el.nativeElement, 'farris-table-selectedrow');
            }
            else {
                if (!this.tt.keepSelect) {
                    this.render.removeClass(this.el.nativeElement, 'farris-table-selectedrow');
                }
            }
        }
    };
    TreeTableSelectRowDirective.decorators = [
        { type: Directive, args: [{
                    selector: '[selectRow]',
                    exportAs: 'row'
                },] }
    ];
    /** @nocollapse */
    TreeTableSelectRowDirective.ctorParameters = function () { return [
        { type: TreeTableComponent },
        { type: ElementRef },
        { type: Renderer2 },
        { type: NgZone }
    ]; };
    TreeTableSelectRowDirective.propDecorators = {
        rowNode: [{ type: Input, args: ['selectRow',] }],
        rowIndex: [{ type: Input }],
        selectRowDisabled: [{ type: Input }],
        delay: [{ type: Input }],
        onclick: [{ type: HostListener, args: ['click', ['$event'],] }]
    };
    return TreeTableSelectRowDirective;
}());
export { TreeTableSelectRowDirective };
if (false) {
    /** @type {?} */
    TreeTableSelectRowDirective.prototype.rowNode;
    /** @type {?} */
    TreeTableSelectRowDirective.prototype.rowIndex;
    /** @type {?} */
    TreeTableSelectRowDirective.prototype.selectRowDisabled;
    /** @type {?} */
    TreeTableSelectRowDirective.prototype.subscription;
    /** @type {?} */
    TreeTableSelectRowDirective.prototype.prevent;
    /** @type {?} */
    TreeTableSelectRowDirective.prototype.timer;
    /** @type {?} */
    TreeTableSelectRowDirective.prototype.delay;
    /** @type {?} */
    TreeTableSelectRowDirective.prototype.tt;
    /**
     * @type {?}
     * @private
     */
    TreeTableSelectRowDirective.prototype.el;
    /**
     * @type {?}
     * @private
     */
    TreeTableSelectRowDirective.prototype.render;
    /**
     * @type {?}
     * @private
     */
    TreeTableSelectRowDirective.prototype.ngZone;
}
/**
 * 表头全选组件
 */
var TreeTableHeaderCheckboxComponent = /** @class */ (function () {
    function TreeTableHeaderCheckboxComponent(tt, ttService) {
        this.tt = tt;
        this.ttService = ttService;
        this.checkedChange = new EventEmitter();
    }
    /**
     * @return {?}
     */
    TreeTableHeaderCheckboxComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () { };
    /**
     * @param {?} event
     * @return {?}
     */
    TreeTableHeaderCheckboxComponent.prototype.handleClick = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        var _this = this;
        if (!this.disabled && !this.tt.disabled) {
            /** @type {?} */
            var beforeEvent = !this.checked ? this.tt.beforeCheckAll : this.tt.beforeUnCheckAll;
            beforeEvent({ instance: this.tt, checked: !this.checked }).subscribe((/**
             * @param {?} e
             * @return {?}
             */
            function (e) {
                // 全选功能
                _this.chkAll.nativeElement.indeterminate = false;
                _this.checked = !_this.checked;
                _this.tt.toggleNodesWithCheckbox(event, _this.checked);
            }));
        }
        event.stopPropagation();
        return false;
    };
    TreeTableHeaderCheckboxComponent.decorators = [
        { type: Component, args: [{
                    selector: 'tt-header-checkbox',
                    template: "\n    <div class=\"custom-control custom-checkbox  custom-control-inline tt-checkbox\" style=\"top: -2px;\">\n        <input type=\"checkbox\" #chkAll class=\"custom-control-input\"  [checked]=\"checked\">\n        <label class=\"custom-control-label\" (click)=\"handleClick($event)\"></label>\n    </div>\n    ",
                    styles: ["\n        :host {\n            vertical-align: middle;\n        }\n        "]
                }] }
    ];
    /** @nocollapse */
    TreeTableHeaderCheckboxComponent.ctorParameters = function () { return [
        { type: TreeTableComponent },
        { type: TreetableService }
    ]; };
    TreeTableHeaderCheckboxComponent.propDecorators = {
        checked: [{ type: Input }],
        disabled: [{ type: Input }],
        checkedChange: [{ type: Output }],
        chkAll: [{ type: ViewChild, args: ['chkAll',] }]
    };
    return TreeTableHeaderCheckboxComponent;
}());
export { TreeTableHeaderCheckboxComponent };
if (false) {
    /** @type {?} */
    TreeTableHeaderCheckboxComponent.prototype.checked;
    /** @type {?} */
    TreeTableHeaderCheckboxComponent.prototype.disabled;
    /** @type {?} */
    TreeTableHeaderCheckboxComponent.prototype.checkedChange;
    /** @type {?} */
    TreeTableHeaderCheckboxComponent.prototype.chkAll;
    /** @type {?} */
    TreeTableHeaderCheckboxComponent.prototype.tt;
    /** @type {?} */
    TreeTableHeaderCheckboxComponent.prototype.ttService;
}
/**
 * 表体checkbox 组件
 */
var TreeTableCheckboxComponent = /** @class */ (function () {
    function TreeTableCheckboxComponent(tt, ttService) {
        this.tt = tt;
        this.ttService = ttService;
        this.cls1 = true;
        this.checkedChange = new EventEmitter();
        this.destroy$ = new Subject();
        this.ttService = this.tt.ttService;
    }
    /**
     * @return {?}
     */
    TreeTableCheckboxComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this.destroy$.next();
        this.destroy$.complete();
    };
    /**
     * @return {?}
     */
    TreeTableCheckboxComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.chk.nativeElement.indeterminate = this.rowNode.indeterminate || false;
        this.ttService.changeCheckboxStatus$.pipe(takeUntil(this.destroy$)).pipe(map((/**
         * @param {?} n
         * @return {?}
         */
        function (n) {
            if (n.id === _this.rowNode.id) {
                return n;
            }
            return null;
        }))).subscribe((/**
         * @param {?} n
         * @return {?}
         */
        function (n) {
            if (n) {
                _this.chk.nativeElement.indeterminate = n.indeterminate;
                _this.checked = n.isChecked;
                _this.chk.nativeElement.checked = _this.checked;
            }
        }));
    };
    /**
     * @param {?} event
     * @return {?}
     */
    TreeTableCheckboxComponent.prototype.handleClick = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        var _this = this;
        event.stopPropagation();
        if (!this.disabled) {
            this.tt.beforeClickNode({ instance: this.tt, rowNode: this.rowNode, event: event, type: 'checkbox' }).subscribe((/**
             * @param {?} e
             * @return {?}
             */
            function (e) {
                if (!e) {
                    return;
                }
                _this.checked = !_this.checked;
                if (_this.tt.singleSelect) {
                    _this.tt.clearAll();
                    if (_this.checked) {
                        _this.tt.selectNode(_this.rowNode.id, true);
                    }
                    else {
                        _this.tt.unSelectNode(_this.rowNode.id, true);
                    }
                }
                else {
                    _this.tt.toggleNodeWithCheckbox(event, _this.rowNode, _this.checked);
                }
            }));
        }
        return false;
    };
    TreeTableCheckboxComponent.decorators = [
        { type: Component, args: [{
                    selector: 'tt-checkbox',
                    template: "\n    <div class=\"custom-control custom-checkbox  custom-control-inline tt-checkbox\">\n        <input type=\"checkbox\" #chk class=\"custom-control-input\" [disabled]=\"disabled\" [checked]=\"checked\">\n        <label class=\"custom-control-label\" (click)=\"handleClick($event)\"></label>\n    </div>\n    ",
                    styles: ["\n        :host {\n            vertical-align: middle;\n        }\n        :host .custom-checkbox {\n            opacity: 1;\n            float: none;\n        }\n        "]
                }] }
    ];
    /** @nocollapse */
    TreeTableCheckboxComponent.ctorParameters = function () { return [
        { type: TreeTableComponent },
        { type: TreetableService }
    ]; };
    TreeTableCheckboxComponent.propDecorators = {
        cls1: [{ type: HostBinding, args: ['class.tree-toggler-checkbox',] }],
        checked: [{ type: Input }],
        disabled: [{ type: Input }],
        rowNode: [{ type: Input }],
        checkedChange: [{ type: Output }],
        chk: [{ type: ViewChild, args: ['chk',] }]
    };
    return TreeTableCheckboxComponent;
}());
export { TreeTableCheckboxComponent };
if (false) {
    /** @type {?} */
    TreeTableCheckboxComponent.prototype.cls1;
    /** @type {?} */
    TreeTableCheckboxComponent.prototype.checked;
    /** @type {?} */
    TreeTableCheckboxComponent.prototype.disabled;
    /** @type {?} */
    TreeTableCheckboxComponent.prototype.rowNode;
    /** @type {?} */
    TreeTableCheckboxComponent.prototype.checkedChange;
    /** @type {?} */
    TreeTableCheckboxComponent.prototype.chk;
    /** @type {?} */
    TreeTableCheckboxComponent.prototype.destroy$;
    /** @type {?} */
    TreeTableCheckboxComponent.prototype.tt;
    /** @type {?} */
    TreeTableCheckboxComponent.prototype.ttService;
}
var DblClickRowDirective = /** @class */ (function () {
    function DblClickRowDirective(tt, el, ttService, selectRowDir) {
        this.tt = tt;
        this.el = el;
        this.ttService = ttService;
        this.selectRowDir = selectRowDir;
        this.enableDblClick = false;
        this.ttService = this.tt.ttService;
    }
    /**
     * @return {?}
     */
    DblClickRowDirective.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        if (!this.enableDblClick) {
            this.selectRowDir.delay = 0;
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    DblClickRowDirective.prototype.ondblclick = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        /** @type {?} */
        var prevEl = ((/** @type {?} */ (event.target))).previousSibling;
        if (prevEl && prevEl.type === 'checkbox') {
            return;
        }
        if (this.tt.disabled) {
            return false;
        }
        if (this.tt.multiSelect && this.dblclickNode) {
            if (this.dblclickNode.node.leaf) {
                return false;
            }
        }
        /** @type {?} */
        var clsName = event.target['className'];
        /** @type {?} */
        var togglerTag = null;
        if (clsName.indexOf('f-cmp-treetable-toggler') > -1) {
            togglerTag = event.target['querySelector']('.treenode-fold');
        }
        else {
            if (event.target['className'].indexOf('treenode-fold') > -1) {
                togglerTag = (/** @type {?} */ (event.target));
            }
        }
        if (togglerTag && togglerTag.style.visibility === 'visible') {
            return false;
        }
        if (this.selectRowDir) {
            this.selectRowDir.prevent = false;
            clearTimeout(this.selectRowDir.timer);
            if (this.selectRowDir.rowNode && this.enableDblClick) {
                /** @type {?} */
                var rn = this.selectRowDir.rowNode;
                if (this.tt.loadDataType === 'all' && !rn.node.leaf && this.tt.dblClickExpand) {
                    this.tt.toggleExpand(rn.node);
                }
                this.tt.dblClick.emit(rn.node);
            }
        }
        // event.stopPropagation();
    };
    DblClickRowDirective.decorators = [
        { type: Directive, args: [{
                    selector: '[dblclick]'
                },] }
    ];
    /** @nocollapse */
    DblClickRowDirective.ctorParameters = function () { return [
        { type: TreeTableComponent },
        { type: ElementRef },
        { type: TreetableService },
        { type: TreeTableSelectRowDirective, decorators: [{ type: Optional }, { type: Self }] }
    ]; };
    DblClickRowDirective.propDecorators = {
        enableDblClick: [{ type: Input, args: ['dblclick',] }],
        dblclickNode: [{ type: Input }],
        ondblclick: [{ type: HostListener, args: ['dblclick', ['$event'],] }]
    };
    return DblClickRowDirective;
}());
export { DblClickRowDirective };
if (false) {
    /** @type {?} */
    DblClickRowDirective.prototype.enableDblClick;
    /** @type {?} */
    DblClickRowDirective.prototype.dblclickNode;
    /** @type {?} */
    DblClickRowDirective.prototype.tt;
    /** @type {?} */
    DblClickRowDirective.prototype.el;
    /** @type {?} */
    DblClickRowDirective.prototype.ttService;
    /** @type {?} */
    DblClickRowDirective.prototype.selectRowDir;
}
var CustomRowStyleDirective = /** @class */ (function () {
    function CustomRowStyleDirective(injector, ngZone, el, tt, utils, render) {
        this.injector = injector;
        this.ngZone = ngZone;
        this.el = el;
        this.tt = tt;
        this.utils = utils;
        this.render = render;
    }
    /**
     * @return {?}
     */
    CustomRowStyleDirective.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        if (this.col && this.tt.fixedColumns && this.tt.fixedHeader && this.col.fixed) {
            if (this.col.fixed === 'left' || this.col.fixed === 'right') {
                this.setRowStyle();
            }
            return;
        }
        else {
            this.setRowStyle();
        }
    };
    /**
     * @private
     * @return {?}
     */
    CustomRowStyleDirective.prototype.setRowStyle = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var fn = this.tt.rowStyler;
        if (fn) {
            /** @type {?} */
            var sty_1 = fn(this.rowNode.node);
            if (sty_1) {
                if (typeof sty_1 === 'object' && (sty_1.style || sty_1.cls)) {
                    if (sty_1.style) {
                        Object.keys(sty_1.style).forEach((/**
                         * @param {?} s
                         * @return {?}
                         */
                        function (s) {
                            _this.render.setStyle(_this.el.nativeElement, s, sty_1.style[s]);
                        }));
                    }
                    if (sty_1.cls) {
                        sty_1.cls.split(',').forEach((/**
                         * @param {?} c
                         * @return {?}
                         */
                        function (c) {
                            _this.render.addClass(_this.el.nativeElement, c);
                        }));
                    }
                }
                else {
                    if (Array.isArray(sty_1) || typeof sty_1 === 'string') {
                        /** @type {?} */
                        var cls_1 = this.tt.getRowCls(this.rowNode);
                        if (cls_1 && Object.keys(cls_1).length) {
                            Object.keys(cls_1).forEach((/**
                             * @param {?} c
                             * @return {?}
                             */
                            function (c) {
                                if (cls_1[c]) {
                                    _this.render.addClass(_this.el.nativeElement, c);
                                }
                            }));
                        }
                    }
                    else {
                        Object.keys(sty_1).forEach((/**
                         * @param {?} s
                         * @return {?}
                         */
                        function (s) {
                            _this.render.setStyle(_this.el.nativeElement, s, sty_1[s]);
                        }));
                    }
                }
            }
        }
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    CustomRowStyleDirective.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        if (changes.rowNode && !changes.rowNode.isFirstChange()) {
            this.setRowStyle();
        }
    };
    CustomRowStyleDirective.decorators = [
        { type: Directive, args: [{
                    selector: '[customRowStyle]'
                },] }
    ];
    /** @nocollapse */
    CustomRowStyleDirective.ctorParameters = function () { return [
        { type: Injector },
        { type: NgZone },
        { type: ElementRef },
        { type: TreeTableComponent },
        { type: CommonUtils },
        { type: Renderer2 }
    ]; };
    CustomRowStyleDirective.propDecorators = {
        rowNode: [{ type: Input, args: ['customRowStyle',] }],
        col: [{ type: Input, args: ['field',] }]
    };
    return CustomRowStyleDirective;
}());
export { CustomRowStyleDirective };
if (false) {
    /** @type {?} */
    CustomRowStyleDirective.prototype.rowNode;
    /** @type {?} */
    CustomRowStyleDirective.prototype.col;
    /**
     * @type {?}
     * @private
     */
    CustomRowStyleDirective.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    CustomRowStyleDirective.prototype.ngZone;
    /**
     * @type {?}
     * @private
     */
    CustomRowStyleDirective.prototype.el;
    /**
     * @type {?}
     * @private
     */
    CustomRowStyleDirective.prototype.tt;
    /** @type {?} */
    CustomRowStyleDirective.prototype.utils;
    /**
     * @type {?}
     * @private
     */
    CustomRowStyleDirective.prototype.render;
}
var TTCustomCellStyleDirective = /** @class */ (function () {
    function TTCustomCellStyleDirective(injector, ngZone, el, tt, utils, render) {
        this.injector = injector;
        this.ngZone = ngZone;
        this.el = el;
        this.tt = tt;
        this.utils = utils;
        this.render = render;
    }
    /**
     * @return {?}
     */
    TTCustomCellStyleDirective.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        if (this.tt && this.tt.getCellCls) {
            this.setCellStyle();
        }
        if (!this.tt.showBorder && this.tt.columns.length === 1) {
            this.render.setStyle(this.el.nativeElement, 'border-width', '0px');
        }
    };
    /**
     * @private
     * @return {?}
     */
    TTCustomCellStyleDirective.prototype.setCellStyle = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var cellCls = this.tt.getCellCls(this.rowNode, this.column.field);
        if (this.column && this.column.styler) {
            if (cellCls && Object.keys(cellCls).length) {
                Object.keys(cellCls).forEach((/**
                 * @param {?} c
                 * @return {?}
                 */
                function (c) {
                    if (cellCls[c]) {
                        _this.render.addClass(_this.el.nativeElement, c);
                    }
                }));
            }
            /** @type {?} */
            var rowData = this.rowNode.node.data;
            /** @type {?} */
            var ccs_1 = this.column.styler(this.utils.getValue(this.column.field, rowData), rowData, this.rowIndex, this.rowNode);
            if (ccs_1) {
                if (ccs_1.style || ccs_1.cls) {
                    if (ccs_1.style) {
                        Object.keys(ccs_1.style).forEach((/**
                         * @param {?} s
                         * @return {?}
                         */
                        function (s) {
                            _this.render.setStyle(_this.el.nativeElement, s, ccs_1.style[s]);
                        }));
                    }
                    if (ccs_1.cls) {
                        ccs_1.cls.split(',').forEach((/**
                         * @param {?} c
                         * @return {?}
                         */
                        function (c) {
                            _this.render.addClass(_this.el.nativeElement, c);
                        }));
                    }
                }
            }
        }
        else {
            Object.keys(cellCls).forEach((/**
             * @param {?} s
             * @return {?}
             */
            function (s) {
                _this.render.setStyle(_this.el.nativeElement, s, cellCls[s]);
            }));
        }
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    TTCustomCellStyleDirective.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        if (changes.rowNode && !changes.rowNode.isFirstChange()) {
            this.setCellStyle();
        }
    };
    TTCustomCellStyleDirective.decorators = [
        { type: Directive, args: [{
                    selector: '[customCellStyle]'
                },] }
    ];
    /** @nocollapse */
    TTCustomCellStyleDirective.ctorParameters = function () { return [
        { type: Injector },
        { type: NgZone },
        { type: ElementRef },
        { type: TreeTableComponent },
        { type: CommonUtils },
        { type: Renderer2 }
    ]; };
    TTCustomCellStyleDirective.propDecorators = {
        column: [{ type: Input, args: ['customCellStyle',] }],
        rowNode: [{ type: Input }],
        rowIndex: [{ type: Input }]
    };
    return TTCustomCellStyleDirective;
}());
export { TTCustomCellStyleDirective };
if (false) {
    /** @type {?} */
    TTCustomCellStyleDirective.prototype.column;
    /** @type {?} */
    TTCustomCellStyleDirective.prototype.rowNode;
    /** @type {?} */
    TTCustomCellStyleDirective.prototype.rowIndex;
    /**
     * @type {?}
     * @private
     */
    TTCustomCellStyleDirective.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    TTCustomCellStyleDirective.prototype.ngZone;
    /**
     * @type {?}
     * @private
     */
    TTCustomCellStyleDirective.prototype.el;
    /**
     * @type {?}
     * @private
     */
    TTCustomCellStyleDirective.prototype.tt;
    /** @type {?} */
    TTCustomCellStyleDirective.prototype.utils;
    /**
     * @type {?}
     * @private
     */
    TTCustomCellStyleDirective.prototype.render;
}
var TTResizableColumnDirective = /** @class */ (function () {
    function TTResizableColumnDirective(tt, ngzone, el, render) {
        this.tt = tt;
        this.ngzone = ngzone;
        this.el = el;
        this.render = render;
        this.enableResize = true;
    }
    /**
     * @return {?}
     */
    TTResizableColumnDirective.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.isEnable()) {
            this.render.addClass(this.el.nativeElement, 'resizable-column');
            this.resizer = document.createElement('span');
            this.resizer.className = 'column-resizer';
            this.el.nativeElement.appendChild(this.resizer);
            this.ngzone.runOutsideAngular((/**
             * @return {?}
             */
            function () {
                _this.resizerMouseDownListener = _this.onMouseDown.bind(_this);
                _this.resizer.addEventListener('mousedown', _this.resizerMouseDownListener);
                _this.el.nativeElement.addEventListener('mouseenter', _this.onMouseEnter.bind(_this));
            }));
        }
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    TTResizableColumnDirective.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        if (changes.enableResize && !changes.enableResize.isFirstChange()) {
            if (!this.isEnable() && this.resizer) {
                this.resizer.remove();
            }
        }
    };
    /**
     * @return {?}
     */
    TTResizableColumnDirective.prototype.isEnable = /**
     * @return {?}
     */
    function () {
        return this.tt.resizableColumns && !this.tt.autoWidth && this.enableResize;
    };
    /**
     * @return {?}
     */
    TTResizableColumnDirective.prototype.bindDocumentEvents = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.ngzone.runOutsideAngular((/**
         * @return {?}
         */
        function () {
            _this.documentMouseMoveListener = _this.onMouseMove.bind(_this);
            document.addEventListener('mousemove', _this.documentMouseMoveListener);
            _this.documentMouseUpListener = _this.onMouseUp.bind(_this);
            document.addEventListener('mouseup', _this.documentMouseUpListener);
        }));
    };
    /**
     * @return {?}
     */
    TTResizableColumnDirective.prototype.unbindDocumentEvents = /**
     * @return {?}
     */
    function () {
        if (this.documentMouseMoveListener) {
            document.removeEventListener('mousemove', this.documentMouseMoveListener);
            this.documentMouseMoveListener = null;
        }
        if (this.documentMouseUpListener) {
            document.removeEventListener('mouseup', this.documentMouseUpListener);
            this.documentMouseUpListener = null;
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    TTResizableColumnDirective.prototype.onMouseDown = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        if (this.isEnable()) {
            this.tt.onColumnResizeBegin(event);
            this.bindDocumentEvents();
        }
    };
    /**
     * @return {?}
     */
    TTResizableColumnDirective.prototype.onMouseEnter = /**
     * @return {?}
     */
    function () {
    };
    /**
     * @param {?} event
     * @return {?}
     */
    TTResizableColumnDirective.prototype.onMouseMove = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.tt.onColumnResize(event);
    };
    /**
     * @param {?} event
     * @return {?}
     */
    TTResizableColumnDirective.prototype.onMouseUp = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.tt.onColumnResizeEnd(event, this.el.nativeElement);
        this.unbindDocumentEvents();
    };
    /**
     * @return {?}
     */
    TTResizableColumnDirective.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        if (this.resizerMouseDownListener) {
            this.resizer.removeEventListener('mousedown', this.resizerMouseDownListener);
        }
        this.unbindDocumentEvents();
    };
    TTResizableColumnDirective.decorators = [
        { type: Directive, args: [{
                    selector: '[resizable-column]'
                },] }
    ];
    /** @nocollapse */
    TTResizableColumnDirective.ctorParameters = function () { return [
        { type: TreeTableComponent },
        { type: NgZone },
        { type: ElementRef },
        { type: Renderer2 }
    ]; };
    TTResizableColumnDirective.propDecorators = {
        enableResize: [{ type: Input, args: ['resizable-column',] }]
    };
    return TTResizableColumnDirective;
}());
export { TTResizableColumnDirective };
if (false) {
    /** @type {?} */
    TTResizableColumnDirective.prototype.enableResize;
    /** @type {?} */
    TTResizableColumnDirective.prototype.resizer;
    /** @type {?} */
    TTResizableColumnDirective.prototype.resizerMouseDownListener;
    /** @type {?} */
    TTResizableColumnDirective.prototype.documentMouseMoveListener;
    /** @type {?} */
    TTResizableColumnDirective.prototype.documentMouseUpListener;
    /** @type {?} */
    TTResizableColumnDirective.prototype.tt;
    /** @type {?} */
    TTResizableColumnDirective.prototype.ngzone;
    /** @type {?} */
    TTResizableColumnDirective.prototype.el;
    /** @type {?} */
    TTResizableColumnDirective.prototype.render;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHJlZXRhYmxlLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvdWktdHJlZXRhYmxlLyIsInNvdXJjZXMiOlsibGliL3RyZWV0YWJsZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxNQUFNLGdCQUFnQixDQUFDOzs7Ozs7Ozs7QUFVdEQsT0FBTyxFQUNILFNBQVMsRUFBVSxLQUFLLEVBQUUsV0FBVyxFQUFFLFNBQVMsRUFDaEQsZUFBZSxFQUFFLFNBQVMsRUFDMUIsWUFBWSxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFDeEQsU0FBUyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQWlCLE1BQU0sRUFBRSxTQUFTLEVBQUUsaUJBQWlCLEVBQ2xDLHVCQUF1QixFQUFFLGlCQUFpQixFQUFXLFdBQVcsRUFDL0csTUFBTSxlQUFlLENBQUM7QUFFdkIsT0FBTyxFQUFFLHVCQUF1QixFQUFFLFdBQVcsRUFBRSxTQUFTLEVBQUUsOEJBQThCLEVBQUUsWUFBWSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDbEksT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBQ3pELE9BQU8sRUFBRSxtQkFBbUIsRUFBbUIsTUFBTSwwQkFBMEIsQ0FBQztBQUNoRixPQUFPLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUM3RCxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDbEQsT0FBTyxFQUFFLHlCQUF5QixFQUFFLE1BQU0sOEJBQThCLENBQUM7QUFFekUsT0FBTyxFQUE0QixFQUFFLEVBQUUsZUFBZSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDckYsT0FBTyxFQUFFLEdBQUcsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQ3JDLE9BQU8sRUFBYSxN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QUksQ0FBQyxPQUFPLENBQUMsbUJBQW1CLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDO1NBQ2hGO1FBRUQsSUFBSSxDQUFDLG9CQUFvQixFQUFFLENBQUM7SUFDaEMsQ0FBQzs7Z0JBNUZKLFNBQVMsU0FBQztvQkFDUCxRQUFRLEVBQUUsb0JBQW9CO2lCQUNqQzs7OztnQkFTa0Isa0JBQWtCO2dCQWwxSlMsTUFBTTtnQkFEWixVQUFVO2dCQUNJLFNBQVM7OzsrQkEyMEoxRCxLQUFLLFNBQUMsa0JBQWtCOztJQTBGN0IsaUNBQUM7Q0FBQSxBQTlGRCxJQThGQztTQTNGWSwwQkFBMEI7OztJQUNuQyxrREFBK0M7O0lBQy9DLDZDQUF5Qjs7SUFDekIsOERBQThCOztJQUM5QiwrREFBK0I7O0lBQy9CLDZEQUE2Qjs7SUFHekIsd0NBQTZCOztJQUFFLDRDQUFxQjs7SUFDcEQsd0NBQXFCOztJQUFFLDRDQUF3QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHN3aXRjaE1hcCwgdGFrZVVudGlsIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xyXG4vKlxyXG4qIEBBdXRob3I6IOeWr+eLguengOaJjShsdWNhcyBodWFuZylcclxuICogQERhdGU6IDIwMTgtMTItMTggMTg6NDQ6MTNcclxuICogQExhc3RFZGl0b3JzOiDnlq/ni4Lnp4DmiY0oTHVjYXMgSHVhbmcpXHJcbiAqIEBMYXN0RWRpdFRpbWU6IDIwMTktMTEtMjkgMDg6NDE6MzlcclxuICogQENvbXBhbnk6IEluc3B1clxyXG4gKiBAVmVyc2lvbjogdjAuMC4xXHJcbiAqL1xyXG5cclxuaW1wb3J0IHtcclxuICAgIENvbXBvbmVudCwgT25Jbml0LCBJbnB1dCwgVGVtcGxhdGVSZWYsIERpcmVjdGl2ZSxcclxuICAgIENvbnRlbnRDaGlsZHJlbiwgUXVlcnlMaXN0LCBBZnRlckNvbnRlbnRJbml0LCBPbkRlc3Ryb3ksXHJcbiAgICBIb3N0TGlzdGVuZXIsIE91dHB1dCwgRXZlbnRFbWl0dGVyLCBFbGVtZW50UmVmLCBJbmplY3RvcixcclxuICAgIFZpZXdDaGlsZCwgT3B0aW9uYWwsIFNlbGYsIEFmdGVyVmlld0luaXQsIE5nWm9uZSwgUmVuZGVyZXIyLCBWaWV3RW5jYXBzdWxhdGlvbixcclxuICAgIE9uQ2hhbmdlcywgU2ltcGxlQ2hhbmdlcywgQWZ0ZXJWaWV3Q2hlY2tlZCwgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksIENoYW5nZURldGVjdG9yUmVmLCBEb0NoZWNrLCBIb3N0QmluZGluZ1xyXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5cclxuaW1wb3J0IHsgRmFycmlzVGVtcGxhdGVEaXJlY3RpdmUsIENvbW1vblV0aWxzLCBJZFNlcnZpY2UsIEZhcnJpc0NvbXBvbmVudEluc3RhbmNlU2VydmljZSwgRGVidWdTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1jb21tb24nO1xyXG5pbXBvcnQgeyBSZXNpemVTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1jb21tb24vZXZlbnRzJztcclxuaW1wb3J0IHsgQ29sdW1uRm9ybWF0U2VydmljZSwgQ29sdW1uRm9ybWF0dGVyIH0gZnJvbSAnQGZhcnJpcy91aS1jb21tb24vY29sdW1uJztcclxuaW1wb3J0IHsgSW5wdXRHcm91cENvbXBvbmVudCB9IGZyb20gJ0BmYXJyaXMvdWktaW5wdXQtZ3JvdXAnO1xyXG5pbXBvcnQgeyBMb2NhbGVTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1sb2NhbGUnO1xyXG5pbXBvcnQgeyBQZXJmZWN0U2Nyb2xsYmFyQ29tcG9uZW50IH0gZnJvbSAnQGZhcnJpcy91aS1wZXJmZWN0LXNjcm9sbGJhcic7XHJcblxyXG5pbXBvcnQgeyBTdWJzY3JpcHRpb24sIE9ic2VydmFibGUsIG9mLCBCZWhhdmlvclN1YmplY3QsIFN1YmplY3QsIHRpbWVyIH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IG1hcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcclxuaW1wb3J0IHsgY2xvbmVEZWVwLCBleHRlbmQsIHJlbW92ZSB9IGZyb20gJ2xvZGFzaC1lcyc7XHJcbmltcG9ydCBSZXNpemVPYnNlcnZlciBmcm9tICdyZXNpemUtb2JzZXJ2ZXItcG9seWZpbGwnO1xyXG5cclxuaW1wb3J0IHsgVHJlZVRhYmxlQ29sdW1uIH0gZnJvbSAnLi90eXBlcy90cmVldGFibGUtY29sdW1uJztcclxuaW1wb3J0IHsgVmlydHVhbGl6ZWRMb2FkZXJTZXJ2aWNlIH0gZnJvbSAnLi92aXJ0dWFsaXplZC1sb2FkZXIuc2VydmljZSc7XHJcbmltcG9ydCB7IFRyZWVOb2RlLCBSb3dOb2RlLCBTZWxlY3RFdmVudEFyZ3MgfSBmcm9tICcuL3R5cGVzL3RyZWVub2RlJztcclxuaW1wb3J0IHsgVHJlZXRhYmxlU2VydmljZSB9IGZyb20gJy4vdHJlZXRhYmxlLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBTZWFyY2hIYW5kbGUgfSBmcm9tICcuL3NlYXJjaC5oYW5kbGUnO1xyXG5pbXBvcnQgeyBUVEhvdGtleXMgfSBmcm9tICcuL2hvdGtleXMnO1xyXG5pbXBvcnQgeyBQYWdpbmF0aW9uSW5zdGFuY2UgfSBmcm9tICdAZmFycmlzL3VpLXBhZ2luYXRpb24nO1xyXG5pbXBvcnQgeyBGYXJyaXNDb250ZXh0TWVudURpcmVjdGl2ZSB9IGZyb20gJ0BmYXJyaXMvdWktY29udGV4dC1tZW51JztcclxuXHJcblxyXG4vKiog5Y2V5YWD5qC854K55LqL5Lu25Y+C5pWwICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ2VsbENsaWNrUGFyYW0ge1xyXG4gICAgZXZlbnQ6IEV2ZW50O1xyXG4gICAgY29sOiBUcmVlVGFibGVDb2x1bW47XHJcbiAgICBub2RlOiBUcmVlTm9kZTtcclxufVxyXG4vKiog6IqC54K56ZKp6YCJ5LqL5Lu2ICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgTm9kZUNoZWNrZWRQYXJhbSB7XHJcbiAgICBvcmlnaW5hbEV2ZW50PzogYW55O1xyXG4gICAgbm9kZTogVHJlZU5vZGUgfCBUcmVlTm9kZVtdO1xyXG4gICAgbm9kZXM/OiBhbnlbXTtcclxuICAgIGluc3RhbmNlOiBUcmVlVGFibGVDb21wb25lbnQ7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgTm9kZVNlbGVjdGVkUGFyYW0ge1xyXG4gICAgb3JpZ2luYWxFdmVudD86IEV2ZW50O1xyXG4gICAgbm9kZTogVHJlZU5vZGUgfCBUcmVlTm9kZVtdO1xyXG4gICAgdHlwZT86ICdyb3cnIHwgJ2NoZWNrYm94JztcclxuICAgIGluZGV4PzogbnVtYmVyO1xyXG4gICAgcGFyZW50cz86IGFueVtdO1xyXG4gICAgaW5zdGFuY2U6IFRyZWVUYWJsZUNvbXBvbmVudDtcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgSWNvbkZpZWxkVHlwZSA9IHtcclxuICAgIGxlYWY/OiBzdHJpbmcsXHJcbiAgICBleHBhbmQ/OiBzdHJpbmcsXHJcbiAgICBjb2xsYXBzZT86IHN0cmluZ1xyXG59IHwgc3RyaW5nO1xyXG5cclxuXHJcbmNvbnN0IE5PREVTX1BBR0VSX0NPTFVNTl9GSUVMRCA9ICdfX25vZGVzcGFnZXJiYXJfXyc7XHJcblxyXG5cclxuQERpcmVjdGl2ZSh7XHJcbiAgICBzZWxlY3RvcjogJ3R0LWNvbHVtbiwgW3R0LWNvbHVtbl0nXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBUcmVlVGFibGVDb2x1bW5EaXJlY3RpdmUge1xyXG4gICAgQElucHV0KCkgZmllbGQ6IHN0cmluZztcclxuICAgIEBJbnB1dCgpIHRpdGxlOiBzdHJpbmc7XHJcbiAgICBASW5wdXQoKSB3aWR0aD86IG51bWJlcjtcclxuICAgIEBJbnB1dCgpIGhBbGlnbj86IHN0cmluZztcclxuICAgIEBJbnB1dCgpIGFsaWduPzogc3RyaW5nO1xyXG4gICAgQElucHV0KCkgZm9ybWF0dGVyPzogKCkgPT4gYW55IHwgQ29sdW1uRm9ybWF0dGVyO1xyXG59XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiAnZmFycmlzLXRyZWV0YWJsZScsXHJcbiAgICB0ZW1wbGF0ZVVybDogJ3RyZWV0YWJsZS5jb21wb25lbnQuaHRtbCcsXHJcbiAgICBzdHlsZXM6IFtgXHJcbiAgICAgICAgLmZhcnJpcy10cmVldGFibGUge1xyXG4gICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC5yZXNpemFibGUtY29sdW1uIHtcclxuICAgICAgICAgICAgYmFja2dyb3VuZC1jbGlwOiBwYWRkaW5nLWJveDtcclxuICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAuY29sdW1uLXJlc2l6ZXIge1xyXG4gICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcclxuICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlIWltcG9ydGFudDtcclxuICAgICAgICAgICAgdG9wOiAwO1xyXG4gICAgICAgICAgICByaWdodDogMDtcclxuICAgICAgICAgICAgbWFyZ2luOiAwO1xyXG4gICAgICAgICAgICB3aWR0aDogLjVlbTtcclxuICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xyXG4gICAgICAgICAgICBwYWRkaW5nOiAwO1xyXG4gICAgICAgICAgICBjdXJzb3I6IGNvbC1yZXNpemU7XHJcbiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHRyYW5zcGFyZW50O1xyXG4gICAgICAgIH1cclxuICAgICAgICAuY29sdW1uLXJlc2l6ZXItaGVscGVyIHtcclxuICAgICAgICAgICAgd2lkdGg6IDFweDtcclxuICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgICAgICAgICB6LWluZGV4OiAxMDtcclxuICAgICAgICAgICAgZGlzcGxheTogbm9uZTtcclxuICAgICAgICAgICAgYm9yZGVyLXJpZ2h0OiAxcHggZGFzaGVkICMxODkwZmY7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAuZmFycmlzLXRyZWV0YWJsZS1kaXNhYmxlZCAuZmFycmlzLXRyZWV0YWJsZS1ib2R5IC50YWJsZSB0cntcclxuICAgICAgICAgICAgb3BhY2l0eTogMC40O1xyXG4gICAgICAgICAgICBjdXJzb3I6IG5vdC1hbGxvd2VkO1xyXG4gICAgICAgIH1cclxuICAgICAgICAuZmFycmlzLXRyZWV0YWJsZS1kaXNhYmxlZCAudGFibGUgdHIuZmFycmlzLXRhYmxlLXNlbGVjdGVkcm93e1xyXG4gICAgICAgICAgICBvcGFjaXR5OiAxO1xyXG4gICAgICAgICAgICBjdXJzb3I6IGRlZmF1bHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAuY3VzdG9tLWNoZWNrYm94IC5jdXN0b20tY29udHJvbC1pbnB1dDppbmRldGVybWluYXRlfi5jdXN0b20tY29udHJvbC1sYWJlbDo6YWZ0ZXIge1xyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCJkYXRhOmltYWdlL3N2Zyt4bWwsJTNjc3ZnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zycgdmlld0JveD0nMCAwIDQgNCclM2UlM2NwYXRoIHN0cm9rZT0nJTIzZmZmJyBkPSdNMCAyaDQnLyUzZSUzYy9zdmclM2VcIik7XHJcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMxODkwZmY7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC51bnNlbGVjdGFibGUtdGV4dCB7XHJcbiAgICAgICAgICAgIC13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmU7XHJcbiAgICAgICAgICAgIC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7XHJcbiAgICAgICAgICAgIC1vLXVzZXItc2VsZWN0OiBub25lO1xyXG4gICAgICAgICAgICAtbXMtdXNlci1zZWxlY3Q6IG5vbmU7XHJcbiAgICAgICAgICAgIHVzZXItc2VsZWN0OiBub25lXHJcbiAgICAgICAgfVxyXG4gICAgICAgIC5zZWFyY2gtaGlnaGxpZ2h0IHtcclxuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI0ZGRkYxRjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLnNlYXJjaC1oaWdobGlnaHQuYWN0aXZle1xyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjRkY5MDFDO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgLmYtdHJlZXRhYmxlLS1maXhlZC1jb2x1bW5zIC50cmVldGFibGUtaGVhZGVyLWNlbGwge1xyXG4gICAgICAgICAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLmYtdHJlZXRhYmxlLS1maXhlZC1jb2x1bW5zIC5wc19fcmFpbC14LFxyXG4gICAgICAgIC5mLXRyZWV0YWJsZS0tZml4ZWQtY29sdW1ucyAucHNfX3JhaWwteSB7XHJcbiAgICAgICAgICAgIHotaW5kZXg6IDM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAuZi10cmVldGFibGUtLWZpeGVkLWxlZnQsXHJcbiAgICAgICAgLmYtdHJlZXRhYmxlLS1maXhlZC1yaWdodCB7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiBzdGlja3kgIWltcG9ydGFudDtcclxuICAgICAgICAgICAgei1pbmRleDogMjtcclxuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZmZmZjtcclxuICAgICAgICAgICAgb3ZlcmZsb3c6IGluaGVyaXQgIWltcG9ydGFudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLnRyZWV0YWJsZS1oZWFkZXItY2VsbC5mLXRyZWV0YWJsZS0tZml4ZWQtbGVmdCxcclxuICAgICAgICAudHJlZXRhYmxlLWhlYWRlci1jZWxsLmYtdHJlZXRhYmxlLS1maXhlZC1yaWdodCB7XHJcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNGNEY0RjQ7XHJcbiAgICAgICAgICAgIGJvcmRlci1jb2xvcjogI0U0RTdFRjtcclxuICAgICAgICAgICAgYm9yZGVyOiBub25lO1xyXG4gICAgICAgICAgICBvdXRsaW5lLWNvbG9yOiAjRTRFN0VGO1xyXG4gICAgICAgICAgICBvdXRsaW5lLXN0eWxlOiBzb2xpZDtcclxuICAgICAgICAgICAgb3V0bGluZS13aWR0aDogMXB4O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLmYtdHJlZXRhYmxlLS1maXhlZC1jb2x1bW5zXHJcbiAgICAgICAgICAgIHRyXHJcbiAgICAgICAgICAgIHRoLmYtdHJlZXRhYmxlLS1maXhlZC1sZWZ0W2wtdHQtc2hhZG93LWNvbF06OmFmdGVyLFxyXG4gICAgICAgIC5mLXRyZWV0YWJsZS0tZml4ZWQtY29sdW1ucyB0ZC5mLXRyZWV0YWJsZS0tZml4ZWQtbGVmdDo6YWZ0ZXIsXHJcbiAgICAgICAgLmYtdHJlZXRhYmxlLS1maXhlZC1yaWdodDo6YmVmb3JlIHtcclxuICAgICAgICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XHJcbiAgICAgICAgICAgIGNvbnRlbnQ6IFwiXCI7XHJcbiAgICAgICAgICAgIHdpZHRoOiAzNnB4ICFpbXBvcnRhbnQ7XHJcbiAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jayAhaW1wb3J0YW50O1xyXG4gICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGUgIWltcG9ydGFudDtcclxuICAgICAgICAgICAgbWFyZ2luLXRvcDogMCAhaW1wb3J0YW50O1xyXG4gICAgICAgICAgICB0b3A6IDAgIWltcG9ydGFudDtcclxuICAgICAgICAgICAgaGVpZ2h0OiAxMDAlICFpbXBvcnRhbnQ7XHJcbiAgICAgICAgICAgIGJvdHRvbTogLTFweCAhaW1wb3J0YW50O1xyXG4gICAgICAgICAgICB0cmFuc2l0aW9uOiBib3gtc2hhZG93IDAuMnMgY3ViaWMtYmV6aWVyKDAuNCwgMCwgMC4yLCAxKTtcclxuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQgIWltcG9ydGFudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC5mLXRyZWV0YWJsZS0tZml4ZWQtY29sdW1uc1xyXG4gICAgICAgICAgICB0clxyXG4gICAgICAgICAgICB0aC5mLXRyZWV0YWJsZS0tZml4ZWQtbGVmdDpub3QoW2wtdHQtc2hhZG93LWNvbF0pOjphZnRlciB7XHJcbiAgICAgICAgICAgIGNvbnRlbnQ6IFwiXCI7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgICAgICAgICAgcmlnaHQ6IDA7XHJcbiAgICAgICAgICAgIHRvcDogNTAlO1xyXG4gICAgICAgICAgICBtYXJnaW4tdG9wOiBjYWxjKC0xLjEyNXJlbSAvIDIpO1xyXG4gICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcclxuICAgICAgICAgICAgaGVpZ2h0OiAxLjEyNXJlbTtcclxuICAgICAgICAgICAgd2lkdGg6IDFweDtcclxuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2U2ZTlmMDtcclxuICAgICAgICAgICAgYm94LXNoYWRvdzogbm9uZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC5mLXRyZWV0YWJsZS0tZml4ZWQtY29sdW1uc1xyXG4gICAgICAgICAgICB0clxyXG4gICAgICAgICAgICB0aC5mLXRyZWV0YWJsZS0tZml4ZWQtbGVmdFtsLXR0LXNoYWRvdy1jb2xdOjphZnRlcixcclxuICAgICAgICAuZi10cmVldGFibGUtLWZpeGVkLWNvbHVtbnMgdHIgdGQuZi10cmVldGFibGUtLWZpeGVkLWxlZnQ6OmFmdGVyIHtcclxuICAgICAgICAgICAgcmlnaHQ6IC0zNnB4ICFpbXBvcnRhbnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAuZi10cmVldGFibGUtLWZpeGVkLWNvbHVtbnMgLmYtdHJlZXRhYmxlLS1maXhlZC1yaWdodDo6YmVmb3JlIHtcclxuICAgICAgICAgICAgbGVmdDogLTM2cHggIWltcG9ydGFudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC5mLXRyZWV0YWJsZS0tZml4ZWQtY29sdW1ucyAudGFibGUtaG92ZXIgdGJvZHkgdHI6aG92ZXIgdGQge1xyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWRmNWZmO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLmYtdHJlZXRhYmxlLS1maXhlZC1jb2x1bW5zXHJcbiAgICAgICAgICAgIC5mYXJyaXMtdHJlZXRhYmxlLXRib2R5XHJcbiAgICAgICAgICAgIHRyLmZhcnJpcy10YWJsZS1zZWxlY3RlZHJvd1xyXG4gICAgICAgICAgICB0ZCB7XHJcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNkYWU5ZmYhaW1wb3J0YW50O1xyXG4gICAgICAgICAgICBjb2xvcjogIzQyNDM0NztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC5mLXRyZWV0YWJsZS0tZml4ZWQtY29sdW1uc1xyXG4gICAgICAgICAgICAuZmFycmlzLXRyZWV0YWJsZS10Ym9keVxyXG4gICAgICAgICAgICB0ci5mLXRyZWV0YWJsZS1kaXNhYmxlLXJvd1xyXG4gICAgICAgICAgICB0ZCB7XHJcbiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmYWZhZmM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAuZi10cmVldGFibGUtLWZpeGVkLWNvbHVtbnMudGFibGUtYm9yZGVyZWRcclxuICAgICAgICAgICAgdHJcclxuICAgICAgICAgICAgdGguZi10cmVldGFibGUtLWZpeGVkLWxlZnRbbC10dC1zaGFkb3ctY29sXSxcclxuICAgICAgICAuZi10cmVldGFibGUtLWZpeGVkLWNvbHVtbnMudGFibGUtYm9yZGVyZWQgdHIgdGguZi10cmVldGFibGUtLWZpeGVkLXJpZ2h0LFxyXG4gICAgICAgIC5mLXRyZWV0YWJsZS0tZml4ZWQtY29sdW1ucy50YWJsZS1ib3JkZXJlZCB0ciB0ZC5mLXRyZWV0YWJsZS0tZml4ZWQtbGVmdCxcclxuICAgICAgICAuZi10cmVldGFibGUtLWZpeGVkLWNvbHVtbnMudGFibGUtYm9yZGVyZWQgdHIgdGQuZi10cmVldGFibGUtLWZpeGVkLXJpZ2h0IHtcclxuICAgICAgICAgICAgYm9yZGVyLXJpZ2h0OiAwO1xyXG4gICAgICAgICAgICBib3gtc2hhZG93OiBpbnNldCAtMXB4IDBweCAwcHggI2VhZWNmMztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC5mLXRyZWV0YWJsZS0tZml4ZWQtY29sdW1ucy50YWJsZS1ib3JkZXJlZCB0ciB0ZCxcclxuICAgICAgICAuZi10cmVldGFibGUtLWZpeGVkLWNvbHVtbnMudGFibGUtYm9yZGVyZWQgdHIgdGQge1xyXG4gICAgICAgICAgICBib3JkZXItbGVmdDogMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC5mLXRyZWV0YWJsZS0tZml4ZWQtY29sdW1ucyB0Ym9keSB0cjpudGgtb2YtdHlwZShldmVuKSB0ZCB7XHJcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNGN0Y3Rjc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIGBdLFxyXG4gICAgZXhwb3J0QXM6ICd0cmVlVGFibGUnLFxyXG4gICAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZSxcclxuICAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBUcmVlVGFibGVDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyQ29udGVudEluaXQsIEFmdGVyVmlld0luaXQsIE9uQ2hhbmdlcywgQWZ0ZXJWaWV3Q2hlY2tlZCwgT25EZXN0cm95IHtcclxuICAgIGlkID0gJyc7XHJcbiAgICAvKiog5a695bqmICovXHJcbiAgICBASW5wdXQoKSB3aWR0aCA9IDUwMDtcclxuICAgIC8qKiDpq5jluqYgKi9cclxuICAgIEBJbnB1dCgpIGhlaWdodCA9IDQwMDtcclxuXHJcbiAgICBASW5wdXQoKSBzaG93RmlsdGVyQmFyID0gZmFsc2U7XHJcbiAgICAvKiog5pi+56S65p+l6K+i5a2X5q61ICovXHJcbiAgICBASW5wdXQoKSBzaG93U2VhcmNoRmllbGQgPSB0cnVlO1xyXG5cclxuICAgIEBJbnB1dCgpIGhlYWRlckhlaWdodCA9IDM1O1xyXG4gICAgLyoqIOihqOWktOaKmOihjCAqL1xyXG4gICAgQElucHV0KCkgaGVhZGVyV3JhcCA9IGZhbHNlO1xyXG4gICAgLyoqIOihjOmrmCAqL1xyXG4gICAgQElucHV0KCkgcm93SGVpZ2h0ID0gMjk7XHJcbiAgICAvKipcclxuICAgICAqIOWIl+S/oeaBr1xyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBjb2x1bW5zID0gW107XHJcbiAgICBwcml2YXRlIF9ncm91cENvbHVtbnMgPSBbXTtcclxuICAgIEBJbnB1dCgpIHNldCBncm91cENvbHVtbnMoY29scykge1xyXG4gICAgICAgIHRoaXMuX2dyb3VwQ29sdW1ucyA9IGNvbHMgfHwgW107XHJcbiAgICAgICAgY29uc3QgX2NvbHVtbnMgPSB0aGlzLnR0U2VydmljZS5jaGVja0NvbHVtbnNGb3JHcm91cEhlYWRlcihjb2xzLm1hcChjcyA9PiBbLi4uY3NdKSwgdGhpcykuY29sdW1ucztcclxuICAgICAgICB0aGlzLmNvbHVtbnMgPSBfY29sdW1ucy5maWx0ZXIobiA9PiBuLmZpZWxkKTtcclxuICAgIH1cclxuICAgIGdldCBncm91cENvbHVtbnMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dyb3VwQ29sdW1ucztcclxuICAgIH1cclxuICAgIC8qKiDlkK/nlKjlpJrooajlpLQgKi9cclxuICAgIEBJbnB1dCgpIHVzZUdyb3VwSGVhZGVyID0gZmFsc2U7XHJcblxyXG4gICAgQElucHV0KCkgZml0Q29sdW1ucyA9IHRydWU7XHJcbiAgICBASW5wdXQoKSBhdXRvRml0Q29sdW1ucyA9IGZhbHNlO1xyXG5cclxuICAgIEBJbnB1dCgpIHNlYXJjaEZpZWxkczogeyBsYWJlbDogc3RyaW5nLCB2YWx1ZTogc3RyaW5nIH1bXTtcclxuXHJcbiAgICBASW5wdXQoKSBhbGxDb2x1bW5zVGl0bGUgPSAn5omA5pyJ5YiXJztcclxuXHJcbiAgICAvKiog5pi+56S66L+e5o6l57q/77yM6buY6K6k5Li6IGZhbHNlICovXHJcbiAgICBASW5wdXQoKSBzaG93TGluZXMgPSBmYWxzZTtcclxuICAgIEBJbnB1dCgpIHNob3dMaW5lc09uSG92ZXIgPSBmYWxzZTtcclxuICAgIC8qKlxyXG4gICAgICog5piv5ZCm5ZCv55So5aSa6YCJ44CCIOm7mOiupOS4uuWNlemAiVxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBtdWx0aVNlbGVjdCA9IGZhbHNlO1xyXG4gICAgQElucHV0KCkgc2luZ2xlU2VsZWN0ID0gdHJ1ZTtcclxuICAgIC8qKiDlkK/nlKjlpJrpgInlkI7vvIzmmK/lkKbmmL7npLpjaGVja2JveCAqL1xyXG4gICAgQElucHV0KCkgc2hvd0NoZWNrYm94ID0gZmFsc2U7XHJcbiAgICAvKipcclxuICAgICAqIOS4u+mUruWtl+autVxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBpZEZpZWxkOiBzdHJpbmc7XHJcblxyXG4gICAgLyoqIOaYvuekuui+ueahhue6vyAqL1xyXG4gICAgQElucHV0KCkgc2hvd0JvcmRlciA9IHRydWU7XHJcblxyXG4gICAgQElucHV0KCkgc2hvd0NoZWNrQWxsID0gdHJ1ZTtcclxuXHJcbiAgICBASW5wdXQoKSBzaG93SGVhZGVyID0gdHJ1ZTtcclxuICAgIC8qKiDlkK/nlKjmlpHpqaznur8gKi9cclxuICAgIEBJbnB1dCgpIHN0cmlwZWQgPSBmYWxzZTtcclxuICAgIC8qKiDlkK/nlKjpvKDmoIfliJLov4fmlYjmnpwgKi9cclxuICAgIEBJbnB1dCgpIGhvdmVyZWQgPSB0cnVlO1xyXG4gICAgLyoqIOemgeeUqOOAgiDnpoHnlKjml7bkuI3lhYHorrjpgInkuK3ooYwgKi9cclxuICAgIEBJbnB1dCgpIGRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAvKiog56aB5Y2h6IqC54K56YCJ5LitICovXHJcbiAgICBASW5wdXQoKSBkaXNhYmxlZFJvdzogKHBhcmFtOiB7IG5vZGU6IFRyZWVOb2RlLCBpbnN0YW5jZTogVHJlZVRhYmxlQ29tcG9uZW50IH0pID0+IGJvb2xlYW47XHJcblxyXG4gICAgLyoqIOaVsOaNruWKoOi9veaWueW8jzsg6buY6K6k5YC8IOS4uiBhbGxcclxuICAgICAqIC0gYWxsOiDlhajpg6jliqDovb1cclxuICAgICAqIC0gYXN5bmM6IOWIhuWxguWKoOi9vVxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBsb2FkRGF0YVR5cGU6ICdhbGwnIHwgJ2FzeW5jJyA9ICdhbGwnO1xyXG4gICAgLyoqIOWbuuWumuihqOWktCAqL1xyXG4gICAgQElucHV0KCkgZml4ZWRIZWFkZXIgPSBmYWxzZTtcclxuXHJcbiAgICAvKiog5b2T5aSa6YCJ5pe277yM6YCJ5Lit5b2T5YmN6KGM5bm26ZKp6YCJICovXHJcbiAgICBASW5wdXQoKSBjaGVja09uU2VsZWN0ID0gZmFsc2U7XHJcbiAgICAvKiog5b2T5aSa6YCJ5pe277yM6ZKp6YCJ5bm26YCJ5Lit5b2T5YmN6KGMICovXHJcbiAgICBASW5wdXQoKSBzZWxlY3RPbkNoZWNrID0gZmFsc2U7XHJcbiAgICAvKipcclxuICAgICAqIOWQr+eUqOWkmumAieaXtu+8jOatpOWxnuaAp+S4unRydWUg5pe277yM5LuF5b2T5YmN6KGM6YCJ5LitXHJcbiAgICAgKi9cclxuICAgIEBJbnB1dCgpIG9ubHlTZWxlY3RTZWxmID0gZmFsc2U7XHJcblxyXG4gICAgLyoqIOWQr+eUqOWIl+Wuveiwg+aVtCAqL1xyXG4gICAgQElucHV0KCkgcmVzaXphYmxlQ29sdW1ucyA9IHRydWU7XHJcbiAgICAvKiog6K6+572u5Li6dHJ1ZeaXtuiHqumAguW6lOeItuWuueeahOWwuuWvuCAqL1xyXG4gICAgQElucHV0KCkgZml0ID0gZmFsc2U7XHJcblxyXG4gICAgLyoqIOWQr+eUqOe6p+iBlOmAieS4reWKn+iDvSAqL1xyXG4gICAgQElucHV0KCkgY2FzY2FkZUNoZWNrID0gdHJ1ZTtcclxuICAgIC8qKiDlkJHkuIvnuqfogZTpgInkuK0gKi9cclxuICAgIEBJbnB1dCgpIGNhc2NhZGVEb3duID0gdHJ1ZTtcclxuICAgIC8qKiDlkJHkuIrnuqfogZTpgInkuK0gKi9cclxuICAgIEBJbnB1dCgpIGNhc2NhZGVVcCA9IHRydWU7XHJcbiAgICAvKiog56m65pWw5o2u5pe277yM5pi+56S655qE5o+Q56S65paH5pysICovXHJcbiAgICBASW5wdXQoKSBlbXB0eU1lc3NhZ2UgPSAn5pqC5peg5pWw5o2uJztcclxuICAgIC8qKiDnvKnov5vpl7Tot53vvIzpu5jorqTkuLogMTZweCAqL1xyXG4gICAgQElucHV0KCkgaW5kZW50U3BhY2luZyA9IDE2O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICog5Y2V5Ye76KGM6YCJ5Lit5ZCO77yM5Zyo5qyh54K55Ye75LiN5Lya6KKr5Y+W5raI6YCJ5Lit54q25oCBO1xyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBrZWVwU2VsZWN0ID0gdHJ1ZTtcclxuICAgIC8qKiDomZrmi5/liqDovb0gKi9cclxuICAgIEBJbnB1dCgpIHZpcnR1YWxpemVkID0gZmFsc2U7XHJcbiAgICAvKipcclxuICAgICAqIOS7heWFgeiuuOmAieaLqeWPtuWtkOiKgueCuVxyXG4gICAgICogLSBkZWZhdWx0OiDlupTnlKjmnI3liqHlmajnq6/kvKDlm57nmoTorr7nva7vvIzlpoLmnpzmnI3liqHlmajnq6/msqHmnInorr7nva7vvIzliJnkuI4gbm8g5L+d5oyB5LiA6Iez77ybXHJcbiAgICAgKiAtIHllczog5aaC5p6c5a6i5oi356uv6K6+572u5Li6IGB5ZXNgLCDmnI3liqHlmajnq6/nmoTorr7nva7lpLHmlYjvvJtcclxuICAgICAqIC0gbm86IOWFgeiuuOmAieaLqeaJgOacieiKgueCue+8m+acjeWKoeWZqOerr+iuvue9ruWkseaViFxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBvbmx5U2VsZWN0TGVhZjogYm9vbGVhbiB8ICdkZWZhdWx0JyB8ICd5ZXMnIHwgJ25vJyA9ICdkZWZhdWx0JztcclxuXHJcbiAgICAvKiog5pi+56S65Zu+5qCHICovXHJcbiAgICBASW5wdXQoKSBzaG93SWNvbiA9IGZhbHNlO1xyXG4gICAgLyoqIOWPtuWtkOiKgueCueWbvuaghyAqL1xyXG4gICAgQElucHV0KCkgbGVhZkljb24gPSAnZmlsZSc7XHJcbiAgICAvKiog6IqC54K55bGV5byA5Zu+5qCHICovXHJcbiAgICBASW5wdXQoKSBleHBhbmRJY29uID0gJ2ZvbGRlci1vcGVuJztcclxuICAgIC8qKiDoioLngrnmipjlj6Dlm77moIcgKi9cclxuICAgIEBJbnB1dCgpIGNvbGxhcHNlSWNvbiA9ICdmb2xkZXInO1xyXG5cclxuICAgIEBJbnB1dCgpIGZvbGRJY29uID0gJ3RyZWV0YWJsZS10b2dnbGVyJztcclxuICAgIEBJbnB1dCgpIHVuZm9sZEljb24gPSAnZXh0YW5kZWQgdHJlZXRhYmxlLXRvZ2dsZXInO1xyXG5cclxuICAgIC8qKiDlkK/nlKjoioLngrnlm77moIfku47mlbDmja7kuK3ojrflj5bjgIIg6buY6K6k5Li6IGZhbHNlICovXHJcbiAgICBASW5wdXQoKSB1c2VJY29uRnJvbURhdGEgPSBmYWxzZTtcclxuICAgIC8qKiDlvZPmlbDmja7mupDkuK1pY29u5pyq6K6+572u5pe25L2/55So5YaF572uSUNPTi4g6buY6K6k5Li6IHRydWUgKi9cclxuICAgIEBJbnB1dCgpIHdoZW5EYXRhSWNvbkVtcHR5VXNlRGVmYXVsdCA9IHRydWU7XHJcbiAgICAvKiog5LuO5pWw5o2u5rqQ5a2X5q615Lit6I635Y+W5Zu+5qCHICovXHJcbiAgICBASW5wdXQoKSBpY29uRmllbGQ6IEljb25GaWVsZFR5cGUgPSAnJztcclxuICAgIC8qKiDlm77moIfoh6rlrprkuYnmoLflvI8gKi9cclxuICAgIEBJbnB1dCgpIGljb25DbHM6IHN0cmluZztcclxuXHJcbiAgICAvKiog5ZCv55So6L+c56uv5o6S5bqPICovXHJcbiAgICBASW5wdXQoKSByZW1vdGVTb3J0ID0gdHJ1ZTtcclxuICAgIC8qKiDmjpLluo/lrZfmrrUgKi9cclxuICAgIEBJbnB1dCgpIHNvcnROYW1lOiBzdHJpbmc7XHJcbiAgICAvKiog5o6S5bqP5pa55byPIGFzYyB8IGRlc2MgKi9cclxuICAgIEBJbnB1dCgpIHNvcnRPcmRlcjogc3RyaW5nO1xyXG4gICAgLyoqIOWFgeiuuOWkmuWIl+aOkuW6jyAqL1xyXG4gICAgQElucHV0KCkgbXVsdGlTb3J0OiBib29sZWFuO1xyXG5cclxuICAgIEBJbnB1dCgpIGJlZm9yZVNvcnRDb2x1bW46IChmaWVsZDogc3RyaW5nLCBvcmRlcjogc3RyaW5nKSA9PiBPYnNlcnZhYmxlPGJvb2xlYW4+O1xyXG5cclxuICAgIEBJbnB1dCgpIHJvd1N0eWxlcjogKHRyZWVOb2RlOiBUcmVlTm9kZSwgZmllbGQ/OiBzdHJpbmcpID0+IGFueTtcclxuICAgIEBJbnB1dCgpIGNlbGxTdHlsZXI6ICh0cmVlTm9kZTogVHJlZU5vZGUsIGZpZWxkOiBzdHJpbmcpID0+IGFueTtcclxuXHJcbiAgICAvKiog5ZCv55So5YmN56uv5paH5pys5p+l5om+ICovXHJcbiAgICBASW5wdXQoKSBlbmFibGVGaW5kVGV4dCA9IGZhbHNlO1xyXG4gICAgLyoqIOaWh+acrOafpeivouWtl+autSwg5byD55SoICovXHJcbiAgICBASW5wdXQoKSBmaW5kRmllbGQ6IHN0cmluZztcclxuICAgIC8vIOagkeWIl+ihqOm7mOiupOWxleW8gOWxgue6p+OAgiAtMe+8miDkuI3lsZXlvIDvvJsgMO+8miDlhajpg6jlsZXlvIDvvJsgPjA6ICDlsZXlvIDliLDmjIflrprnuqfmlbDvvJtcclxuICAgIEBJbnB1dCgpIGV4cGFuZExldmVsID0gLTE7XHJcblxyXG4gICAgQElucHV0KCkgc2VsZWN0VmFsdWUgPSAnJztcclxuICAgIEBPdXRwdXQoKSBzZWxlY3RWYWx1ZUNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIC8qKiDlkK/nlKjlj4zlh7vlsZXlvIDoioLngrkgKi9cclxuICAgIEBJbnB1dCgpIGRibENsaWNrRXhwYW5kID0gdHJ1ZTtcclxuXHJcbiAgICAvKiog6YCJ5Lit6IqC54K5SUTmlbDnu4QgKi9cclxuICAgIEBJbnB1dCgpIHNlbGVjdFZhbHVlcyA9IFtdO1xyXG4gICAgQE91dHB1dCgpIHNlbGVjdFZhbHVlc0NoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIC8qKiDmmK/lkKbnpoHmraLmipjooYzvvIzpu5jorqTkuI3mipjooYwgKi9cclxuICAgIEBJbnB1dCgpIG5vd3JhcCA9IHRydWU7XHJcblxyXG4gICAgQElucHV0KCkgY2hlY2tWYWx1ZXMgPSBbXTtcclxuICAgIEBPdXRwdXQoKSBjaGVja1ZhbHVlc0NoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcblxyXG4gICAgQElucHV0KCkgYmVmb3JlTm9kZVNlbGVjdGVkOiAoZTogYW55KSA9PiBPYnNlcnZhYmxlPGJvb2xlYW4+O1xyXG4gICAgQElucHV0KCkgYmVmb3JlTm9kZVVuU2VsZWN0ZWQ6ICgpID0+IE9ic2VydmFibGU8Ym9vbGVhbj47XHJcblxyXG4gICAgQElucHV0KCkgYmVmb3JlTm9kZUNoZWNrZWQ6ICgpID0+IE9ic2VydmFibGU8Ym9vbGVhbj47XHJcbiAgICBASW5wdXQoKSBiZWZvcmVOb2RlVW5DaGVja2VkOiAoKSA9PiBPYnNlcnZhYmxlPGJvb2xlYW4+O1xyXG5cclxuICAgIEBJbnB1dCgpIGJlZm9yZUNoZWNrQWxsOiAoZT86IGFueSkgPT4gT2JzZXJ2YWJsZTxib29sZWFuPjtcclxuICAgIEBJbnB1dCgpIGJlZm9yZVVuQ2hlY2tBbGw6IChlPzogYW55KSA9PiBPYnNlcnZhYmxlPGJvb2xlYW4+O1xyXG5cclxuICAgIEBJbnB1dCgpIGJlZm9yZUNsaWNrTm9kZTogKGU/OiBhbnkpID0+IE9ic2VydmFibGU8Ym9vbGVhbj47XHJcblxyXG4gICAgLyoqIOWIhumhteS/oeaBryAqL1xyXG4gICAgQElucHV0KCkgcGFnaW5hdGlvbiA9IGZhbHNlO1xyXG4gICAgLyoqIOWIhumhteWKoOi9veWtkOiKgueCueaVsOaNriAqL1xyXG4gICAgQElucHV0KCkgcGFnaW5hdGlvbkZvckNoaWxkcmVuID0gZmFsc2U7XHJcbiAgICAvKiog5YiG6aG15p2h5pi+56S65qih5byP77yMIGRlZmF1bHQsIHNpbXBsZSAqL1xyXG4gICAgQElucHV0KCkgcGFnZXJWaWV3TW9kZSA9ICdkZWZhdWx0JztcclxuICAgIC8qKiDlkK/nlKjmnI3liqHlmajnq6/liIbpobUgKi9cclxuICAgIEBJbnB1dCgpIHBhZ2VyT25TZXJ2ZXIgPSB0cnVlO1xyXG4gICAgLyoqIOavj+mhteiusOW9leaVsCAqL1xyXG4gICAgQElucHV0KCkgcGFnZUxpc3QgPSBbMTAsIDIwLCAzMCwgNTAsIDEwMF07XHJcbiAgICAvKiog5b2T5YmN6aG156CBICovXHJcbiAgICBASW5wdXQoKSBwYWdlSW5kZXggPSAxO1xyXG4gICAgLyoqIOavj+mhteiusOW9leaVsCAqL1xyXG4gICAgQElucHV0KCkgcGFnZVNpemUgPSAyMDtcclxuICAgIC8qKiDliIbpobXljLrpq5jluqYgKi9cclxuICAgIEBJbnB1dCgpIHBhZ2VySGVpZ2h0ID0gNTY7XHJcbiAgICAvKiog5pi+56S65q+P6aG16K6w5b2V5pWwICovXHJcbiAgICBASW5wdXQoKSBzaG93UGFnZUxpc3QgPSBmYWxzZTtcclxuICAgIC8qKiDmmL7npLrliIbpobXkv6Hmga8gKi9cclxuICAgIEBJbnB1dCgpIHNob3dQYWdlSW5mbyA9IHRydWU7XHJcbiAgICAvKiog5pi+56S66aG156CBICovXHJcbiAgICBASW5wdXQoKSBzaG93UGFnZU51bWJlciA9IHRydWU7XHJcbiAgICAvKiog5pi+56S66aG156CB5pyA5aSn5pWw6YePICovXHJcbiAgICBASW5wdXQoKSBwYWdlckxhYmVsU2l6ZSA9IDc7XHJcbiAgICAvKiog5pi+56S66aG156CB6L6T5YWl5qGGICovXHJcbiAgICBASW5wdXQoKSBzaG93R290b0lucHV0ID0gZmFsc2U7XHJcbiAgICAvKiog5a2Q6IqC54K55YiG6aG15piv5ZCm5pi+56S65oC76K6w5b2V5pWw77yM6buY6K6kIGZhbHNlICovXHJcbiAgICBASW5wdXQoKSBzaG93VG90YWxGb3JDaGlsZHJlbiA9IGZhbHNlO1xyXG4gICAgLyoqIOaAu+iusOW9leaVsCAqL1xyXG4gICAgQElucHV0KCkgdG90YWwgPSAwO1xyXG5cclxuXHJcbiAgICBASW5wdXQoKSBlbmFibGVDb250ZXh0TWVudSA9IGZhbHNlO1xyXG4gICAgQElucHV0KCkgY29udGV4dE1lbnVJdGVtcyA9IFtdO1xyXG4gICAgQElucHV0KCkgYmVmb3JlU2hvd0NvbnRleHRNZW51OiAoZTogeyBba2V5OiBzdHJpbmddOiBhbnkgfSkgPT4gT2JzZXJ2YWJsZTx7IHNob3c6IGJvb2xlYW4sIG1lbnVzOiBBcnJheTxhbnk+fT47XHJcblxyXG4gICAgQE91dHB1dCgpIHBhZ2VTaXplQ2hhbmdlZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIEBPdXRwdXQoKSBwYWdlQ2hhbmdlZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgICAvKiog5o6S5bqP5ZCOICovXHJcbiAgICBAT3V0cHV0KCkgY29sdW1uU29ydGVkID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgLyoqIOmAieS4reS6i+S7tiAqL1xyXG4gICAgQE91dHB1dCgpIG5vZGVTZWxlY3RlZDogRXZlbnRFbWl0dGVyPE5vZGVTZWxlY3RlZFBhcmFtPiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIC8qKiDlj5bmtojpgInkuK3kuovku7YgKi9cclxuICAgIEBPdXRwdXQoKSBub2RlVW5TZWxlY3Q6IEV2ZW50RW1pdHRlcjxOb2RlU2VsZWN0ZWRQYXJhbT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgLyoqIOmSqemAiSAqL1xyXG4gICAgQE91dHB1dCgpIG5vZGVDaGVja2VkOiBFdmVudEVtaXR0ZXI8Tm9kZUNoZWNrZWRQYXJhbT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICAvKiog5Y+W5raI6ZKp6YCJICovXHJcbiAgICBAT3V0cHV0KCkgbm9kZVVuQ2hlY2tlZDogRXZlbnRFbWl0dGVyPE5vZGVDaGVja2VkUGFyYW0+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICAgIC8qKiDlhajpgInkuovku7YgKi9cclxuICAgIEBPdXRwdXQoKSBjaGVja0FsbDogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICAvKiog5Y+W5raI5YWo6YCJICovXHJcbiAgICBAT3V0cHV0KCkgdW5DaGVja0FsbDogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICAvKiog5p+l6K+iICovXHJcbiAgICBAT3V0cHV0KCkgc2VhcmNoOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgICBAT3V0cHV0KCkgZGJsQ2xpY2s6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICAgIEBPdXRwdXQoKSBsb2FkZWREYXRhOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgICBAT3V0cHV0KCkgZXhwYW5kOiBFdmVudEVtaXR0ZXI8VHJlZU5vZGU+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgQE91dHB1dCgpIGNvbGxhcHNlOiBFdmVudEVtaXR0ZXI8VHJlZU5vZGU+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICAgIEBPdXRwdXQoKSBleHBhbmRBbGxOb2RlczogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICBAT3V0cHV0KCkgY29sbGFwc2VBbGxOb2RlczogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgQE91dHB1dCgpIGFwcGVuZE5ldzogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICBAT3V0cHV0KCkgcmVtb3ZlZDogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICBAT3V0cHV0KCkgdXBkYXRlZDogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgQE91dHB1dCgpIGNsZWFyU2VhcmNoVmFsdWUgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICBAT3V0cHV0KCkgY2VsbENsaWNrID0gbmV3IEV2ZW50RW1pdHRlcjxDZWxsQ2xpY2tQYXJhbT4oKTtcclxuICAgIEBPdXRwdXQoKSBjaGlsZHNQYWdlQ2hhbmdlZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgICBAT3V0cHV0KCkgc2VhcmNoVmFsdWVDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuXHJcbiAgICBASW5wdXQoKSBsb2FkZWRUaW1lciA9IDEwMDtcclxuXHJcbiAgICBzZXJpYWxpemVkVmFsdWU6IFJvd05vZGVbXTtcclxuXHJcbiAgICBfZGF0YTogVHJlZU5vZGVbXSA9IFtdO1xyXG4gICAgLy8gbG9hZGRhdGEg5pe2IOWFiOiuvue9ruS4uuepuuaVsOe7hO+8jFxyXG4gICAgaXNMb2FkTmV3RGF0YVNldEVtcHR5ID0gZmFsc2U7XHJcbiAgICBnZXQgZGF0YSgpOiBhbnlbXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RhdGE7XHJcbiAgICB9XHJcbiAgICBASW5wdXQoKSBzZXQgZGF0YSh2YWw6IGFueVtdKSB7XHJcbiAgICAgICAgdGhpcy5fZGF0YSA9IHZhbDtcclxuICAgICAgICB0aGlzLnVwZGF0ZVNlcmlhbGl6ZWRWYWx1ZSgpO1xyXG4gICAgICAgIGlmICghdGhpcy5pc0xvYWROZXdEYXRhU2V0RW1wdHkpIHtcclxuICAgICAgICAgICAgdGhpcy5pbml0Tm9kZVN0YXR1cygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBhdXRvd2lkdGgg5pe277yM6KGo5aS05a695bqm5L6d5o2u5YaF5a655a695bqm5L2c5ZCM5q2l5aSE55CGXHJcbiAgICAgICAgdGhpcy5zZXROZXdDb2x1bW5zV2lkdGgoKTtcclxuXHJcbiAgICAgICAgdGhpcy5sb2FkRGF0YVN1Y2Nlc3MoKTtcclxuICAgIH1cclxuICAgIC8qKiDmoLnmja7lhoXlrrnoh6rliqjlrr3luqbvvIzpu5jorqQgZmFsc2U7XHJcbiAgICAgKiDmraTlsZ7mgKflvIDlkK/lkI7vvIzoh6rliqjliJflrr3lpLHmlYhcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgYXV0b1dpZHRoID0gZmFsc2U7XHJcblxyXG4gICAgQENvbnRlbnRDaGlsZHJlbihGYXJyaXNUZW1wbGF0ZURpcmVjdGl2ZSkgdGVtcGxhdGVzOiBRdWVyeUxpc3Q8RmFycmlzVGVtcGxhdGVEaXJlY3RpdmU+O1xyXG4gICAgQENvbnRlbnRDaGlsZHJlbihUcmVlVGFibGVDb2x1bW5EaXJlY3RpdmUpIGNvbHVtbnNSZWY6IFF1ZXJ5TGlzdDxUcmVlVGFibGVDb2x1bW5EaXJlY3RpdmU+O1xyXG5cclxuICAgIEBWaWV3Q2hpbGQoJ2hlYWRlckJveCcpIGhlYWRlckJveDogRWxlbWVudFJlZjtcclxuICAgIEBWaWV3Q2hpbGQoJ3Jlc2l6ZXJIZWxwZXInKSByZXNpemVySGVscGVyVkM6IEVsZW1lbnRSZWY7XHJcbiAgICBAVmlld0NoaWxkKCdoZWFkZXJUYWJsZScpIGhlYWRlclRhYmxlOiBFbGVtZW50UmVmO1xyXG4gICAgQFZpZXdDaGlsZCgnYm9keVRhYmxlJykgYm9keVRhYmxlOiBFbGVtZW50UmVmO1xyXG5cclxuICAgIEBWaWV3Q2hpbGQoJ2lucHV0R3JvdXAnKSBpbnB1dEdyb3VwOiBJbnB1dEdyb3VwQ29tcG9uZW50O1xyXG4gICAgQFZpZXdDaGlsZChQZXJmZWN0U2Nyb2xsYmFyQ29tcG9uZW50KSBwc1JlZj86IFBlcmZlY3RTY3JvbGxiYXJDb21wb25lbnQ7XHJcblxyXG4gICAgcHJpdmF0ZSBoZWFkZXJDaGVja2JveENtcDogVHJlZVRhYmxlSGVhZGVyQ2hlY2tib3hDb21wb25lbnQ7XHJcbiAgICBAVmlld0NoaWxkKCdhbGxDaGVja2JveCcpIHNldCBhbGxDaGVja2JveChjb250ZW50OiBUcmVlVGFibGVIZWFkZXJDaGVja2JveENvbXBvbmVudCkge1xyXG4gICAgICAgIHRoaXMuaGVhZGVyQ2hlY2tib3hDbXAgPSBjb250ZW50O1xyXG4gICAgfVxyXG5cclxuICAgIEBWaWV3Q2hpbGQoJ25vZGVzcGFnZXJiYXInKSBub2Rlc1BhZ2VyQmFyOiBUZW1wbGF0ZVJlZjxhbnk+O1xyXG4gICAgQFZpZXdDaGlsZChGYXJyaXNDb250ZXh0TWVudURpcmVjdGl2ZSkgY3R4TWVudTogRmFycmlzQ29udGV4dE1lbnVEaXJlY3RpdmU7XHJcbiAgICAvKipcclxuICAgICAqIOihqOWktOaooeadv1xyXG4gICAgICovXHJcbiAgICBoZWFkZXJUZW1wbGF0ZTogVGVtcGxhdGVSZWY8YW55PjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIOihqOS9k+aooeadv1xyXG4gICAgICovXHJcbiAgICBib2R5VGVtcGxhdGU6IFRlbXBsYXRlUmVmPGFueT47XHJcblxyXG4gICAgLyoqIOmAieS4remhuembhuWQiCAqL1xyXG4gICAgcHJpdmF0ZSBfc2VsZWN0aW9ucyA9IFtdO1xyXG4gICAgZ2V0IHNlbGVjdGlvbnMoKTogVHJlZU5vZGVbXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbGVjdGlvbnM7XHJcbiAgICB9XHJcbiAgICBzZXQgc2VsZWN0aW9ucyh2YWxzOiBUcmVlTm9kZVtdKSB7XHJcbiAgICAgICAgaWYgKHZhbHMgJiYgdmFscy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgLy8g6L+H5ruk5o6J5pWw5o2u5rqQ5Lit5LiN5a2Y5Zyo6IqC54K5XHJcbiAgICAgICAgICAgIHRoaXMuX3NlbGVjdGlvbnMgPSB2YWxzLmZpbHRlcih0biA9PiB0biAmJiB0aGlzLmZpbmRSb3dOb2RlKHRuLmlkKSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGlkcyA9IHRoaXMuX3NlbGVjdGlvbnMubWFwKHRuID0+IHRuLmlkKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChpZHMubGVuZ3RoICE9PSB0aGlzLnNlbGVjdFZhbHVlcy5sZW5ndGggfHxcclxuICAgICAgICAgICAgICAgIChpZHMubGVuZ3RoID09PSB0aGlzLnNlbGVjdFZhbHVlcy5sZW5ndGggJiYgdGhpcy5kaWZmZXJlbmNlKGlkcywgdGhpcy5zZWxlY3RWYWx1ZXMpLmxlbmd0aCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0VmFsdWVzID0gaWRzO1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RWYWx1ZXNDaGFuZ2UuZW1pdChpZHMpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9zZWxlY3Rpb25zID0gW107XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0VmFsdWVzID0gW107XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0VmFsdWVzQ2hhbmdlLmVtaXQoW10pO1xyXG5cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOmAieS4remhuee0ouW8lVxyXG4gICAgICovXHJcbiAgICBzZWxlY3RSb3dJbmRleCA9IC0xO1xyXG5cclxuICAgIC8qKiDpgInkuK3lvZPliY3ooYwgKi9cclxuICAgIHByaXZhdGUgX3NlbGVjdGVkUm93ID0gbnVsbDtcclxuICAgIGdldCBzZWxlY3RlZFJvdygpOiBUcmVlTm9kZSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbGVjdGVkUm93O1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBzZWxlY3RlZFJvdyh0cmVlTm9kZTogVHJlZU5vZGUpIHtcclxuICAgICAgICB0aGlzLl9zZWxlY3RlZFJvdyA9IHRyZWVOb2RlO1xyXG4gICAgICAgIGlmICh0cmVlTm9kZSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RWYWx1ZSAhPT0gdHJlZU5vZGUuaWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0VmFsdWUgPSB0cmVlTm9kZS5pZDtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0VmFsdWVDaGFuZ2UuZW1pdCh0cmVlTm9kZS5pZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdFZhbHVlID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RWYWx1ZUNoYW5nZS5lbWl0KG51bGwpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqIOmSqemAieeahOiusOW9lembhuWQiCAqL1xyXG4gICAgcHJpdmF0ZSBfY2hlY2tlZHMgPSBbXTtcclxuICAgIGdldCBjaGVja2VkcygpOiBUcmVlTm9kZVtdIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY2hlY2tlZHM7XHJcbiAgICB9XHJcbiAgICBzZXQgY2hlY2tlZHModHJlZU5vZGVzOiBUcmVlTm9kZVtdKSB7XHJcbiAgICAgICAgaWYgKHRyZWVOb2RlcyAmJiB0cmVlTm9kZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NoZWNrZWRzID0gdHJlZU5vZGVzLmZpbHRlcih0biA9PiB0aGlzLmZpbmRSb3dOb2RlKHRuLmlkKSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGlkcyA9IHRoaXMuX2NoZWNrZWRzLm1hcCh0biA9PiB0bi5pZCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tWYWx1ZXMgPSB0aGlzLmNoZWNrVmFsdWVzIHx8IFtdO1xyXG4gICAgICAgICAgICBpZiAoaWRzLmxlbmd0aCAhPT0gdGhpcy5jaGVja1ZhbHVlcy5sZW5ndGggfHwgIChpZHMubGVuZ3RoID09PSB0aGlzLmNoZWNrVmFsdWVzLmxlbmd0aCAmJiB0aGlzLmRpZmZlcmVuY2UoaWRzLCB0aGlzLmNoZWNrVmFsdWVzKS5sZW5ndGgpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrVmFsdWVzID0gaWRzO1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja1ZhbHVlc0NoYW5nZS5lbWl0KGlkcyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NoZWNrZWRzID0gW107XHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tWYWx1ZXMgPSBbXTtcclxuICAgICAgICAgICAgdGhpcy5jaGVja1ZhbHVlc0NoYW5nZS5lbWl0KFtdKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5pyA5aSW5bGCRElWXHJcbiAgICBjb250YWluZXJFbGVtZW50OiBIVE1MRGl2RWxlbWVudDtcclxuXHJcbiAgICAvLyDorrDlvZXliJfmi5bliqjliY3nmoTkvY3nva5cclxuICAgIGxhc3RSZXNpemVySGVscGVyWDogbnVtYmVyO1xyXG5cclxuICAgIHNlYXJjaERhdGEgPSB7IGZpZWxkOiAnKicsIHZhbHVlOiAnJyB9O1xyXG5cclxuICAgIHNjb3JsbEJvZHlIZWlnaHQ6IG51bWJlcjtcclxuXHJcbiAgICBzZWFyY2hIYW5kbGU6IFNlYXJjaEhhbmRsZTtcclxuICAgIHNlYXJjaEJ1dHRvblRleHQgPSAnPGkgY2xhc3M9XCJmLWljb24gZi1pY29uLXNlYXJjaFwiPjwvaT4nO1xyXG4gICAgLyoqIOaYvuekuuafpeivouW3peWFt+adoSAqL1xyXG4gICAgc2hvd0ZpbmRJbnB1dCA9IGZhbHNlO1xyXG5cclxuICAgIHByaXZhdGUgaXNEYXRhQ2hhbmdlZCA9IGZhbHNlO1xyXG5cclxuICAgIHNjcm9sbExvYWRlcjogVmlydHVhbGl6ZWRMb2FkZXJTZXJ2aWNlO1xyXG4gICAgdG9wSGlkZUhlaWdodCA9IDA7XHJcbiAgICBib3R0b21IaWRlSGVpZ2h0ID0gMDtcclxuICAgIHN0YXRlID0ge1xyXG4gICAgICAgIHNlYXJjaFJvd05vZGVzOiBudWxsLFxyXG4gICAgICAgIHNlYXJjaGVkOiBmYWxzZSxcclxuICAgICAgICByb3dOb2RlczogW10sXHJcbiAgICAgICAgc2Nyb2xsWTogMCxcclxuICAgICAgICBzY3JvbGxYOiAwXHJcbiAgICB9O1xyXG5cclxuICAgIC8qKiDlvoXmn6Xor6LnmoTmlofmnKwgKi9cclxuICAgIGZpbmRWYWx1ZSA9ICcnO1xyXG4gICAgLyoqIOe7k+aenOaAu+aVsCAqL1xyXG4gICAgZmluZENvdW50ID0gMDtcclxuICAgIC8qKiDlvZPliY3ntKLlvJUgKi9cclxuICAgIGZpbmRDdXJyZW50ID0gMDtcclxuICAgIC8qKiDlrZjlgqjmlofmnKzmn6Xor6Lnu5PmnpwgKi9cclxuICAgIGZpbmRSZXN1bHQgPSBbXTtcclxuICAgIHByaXZhdGUgcm86IFJlc2l6ZU9ic2VydmVyIHwgbnVsbCA9IG51bGw7XHJcbiAgICBwcml2YXRlIGZpbmRLZXlzSGFuZGxlciA9IG51bGw7XHJcbiAgICBwcml2YXRlIF9ob3RLZXlzOiBUVEhvdGtleXMgPSBudWxsO1xyXG4gICAgbG9jYWxlU2VydmljZTogTG9jYWxlU2VydmljZTtcclxuICAgIHByaXZhdGUgaWRTZXJ2aWNlOiBJZFNlcnZpY2U7XHJcbiAgICBwcml2YXRlIHN0eWxlU2hlZXRJZCA9ICd0cmVldGFibGUtc3R5bGUtJztcclxuICAgIHByaXZhdGUgc3R5bGVFbGVtZW50O1xyXG5cclxuICAgIC8vIOiwg+aVtOaooeadv++8jOatpOWxnuaAp+S7heS4uuW4ruWKqeS4reeahOagkee7hOS7tlxyXG4gICAgZmFzdCA9IGZhbHNlO1xyXG5cclxuICAgIHBhZ2luYXRpb25PcHRpb25zOiBQYWdpbmF0aW9uSW5zdGFuY2UgPSB7XHJcbiAgICAgICAgaWQ6ICdGYXJyaXMtVHJlZVRhYmxlLVBhZ2luYXRpb25fJyxcclxuICAgICAgICBpdGVtc1BlclBhZ2U6IHRoaXMucGFnZVNpemUsXHJcbiAgICAgICAgY3VycmVudFBhZ2U6IHRoaXMucGFnZUluZGV4LFxyXG4gICAgICAgIHBhZ2VMaXN0OiB0aGlzLnBhZ2VMaXN0LFxyXG4gICAgICAgIHRvdGFsSXRlbXM6IHRoaXMudG90YWwsXHJcbiAgICAgICAgcmVtb3RlOiB0aGlzLnBhZ2VyT25TZXJ2ZXJcclxuICAgIH07XHJcblxyXG4gICAgc2VsZWN0Tm9kZUNoYW5nZWRTdWJqZWN0ID0gbmV3IEJlaGF2aW9yU3ViamVjdChudWxsKTtcclxuICAgIHByaXZhdGUgX1VVSUQgPSAnJztcclxuICAgIC8vIOaYr+WQpuacieWbuuWumuWIl1xyXG4gICAgZml4ZWRDb2x1bW5zID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIGRlc3Ryb3kkID0gbmV3IFN1YmplY3QoKTtcclxuICAgIHByaXZhdGUgZmFycmlzSW5zdGFuY2VzOiBGYXJyaXNDb21wb25lbnRJbnN0YW5jZVNlcnZpY2UgPSBudWxsO1xyXG4gICAgZGlmZmVyZW5jZSA9IChmaXJzdDogYW55W10sIHNlY29uZDogYW55W10pID0+IGZpcnN0LmZpbHRlcihpdGVtID0+ICFzZWNvbmQuc29tZShzZWNvbmRJdGVtID0+IHNlY29uZEl0ZW0gPT0gaXRlbSkpO1xyXG4gICAgcHJpdmF0ZSBkZWJ1Z1NlcjogRGVidWdTZXJ2aWNlID0gbnVsbDtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHB1YmxpYyB0dFNlcnZpY2U6IFRyZWV0YWJsZVNlcnZpY2UsIHB1YmxpYyBlbDogRWxlbWVudFJlZixcclxuICAgICAgICBwdWJsaWMgcmVzaXplU2VyOiBSZXNpemVTZXJ2aWNlLCBwcml2YXRlIHJlbmRlcmVyOiBSZW5kZXJlcjIsXHJcbiAgICAgICAgcHVibGljIHV0aWxzOiBDb21tb25VdGlscywgcHVibGljIGNvbEZvcm1hdFNlcjogQ29sdW1uRm9ybWF0U2VydmljZSxcclxuICAgICAgICBwcml2YXRlIHNob3J0Y3V0czogVFRIb3RrZXlzLCBwcml2YXRlIGNkUmVmOiBDaGFuZ2VEZXRlY3RvclJlZixcclxuICAgICAgICBwcml2YXRlIG5nWm9uZTogTmdab25lLCBwcml2YXRlIGluamVjdG9yOiBJbmplY3Rvcikge1xyXG4gICAgICAgIHRoaXMuc2VhcmNoSGFuZGxlID0gbmV3IFNlYXJjaEhhbmRsZSh0aGlzKTtcclxuICAgICAgICB0aGlzLnNjcm9sbExvYWRlciA9IG5ldyBWaXJ0dWFsaXplZExvYWRlclNlcnZpY2UodGhpcyk7XHJcbiAgICAgICAgaWYgKHRoaXMuaW5qZWN0b3IpIHtcclxuICAgICAgICAgICAgdGhpcy5faG90S2V5cyA9IHRoaXMuaW5qZWN0b3IuZ2V0KFRUSG90a2V5cywgbnVsbCk7XHJcbiAgICAgICAgICAgIHRoaXMubG9jYWxlU2VydmljZSA9IHRoaXMuaW5qZWN0b3IuZ2V0KExvY2FsZVNlcnZpY2UsIG51bGwpO1xyXG4gICAgICAgICAgICB0aGlzLmlkU2VydmljZSA9IHRoaXMuaW5qZWN0b3IuZ2V0KElkU2VydmljZSwgbnVsbCk7XHJcbiAgICAgICAgICAgIHRoaXMuZmFycmlzSW5zdGFuY2VzID0gdGhpcy5pbmplY3Rvci5nZXQoRmFycmlzQ29tcG9uZW50SW5zdGFuY2VTZXJ2aWNlLCBudWxsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuaWRTZXJ2aWNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX1VVSUQgPSB0aGlzLmlkU2VydmljZS51dWlkKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc3R5bGVTaGVldElkICs9IHRoaXMuaWRTZXJ2aWNlLnV1aWQoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9VVUlEID0gKCcnICsgTWF0aC5yYW5kb20oKSkuc2xpY2UoMik7XHJcbiAgICAgICAgICAgIHRoaXMuc3R5bGVTaGVldElkICs9ICgnJyArIE1hdGgucmFuZG9tKCkpLnNsaWNlKDIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy50dFNlcnZpY2UgPSBuZXcgVHJlZXRhYmxlU2VydmljZSgpO1xyXG5cclxuICAgICAgICB0aGlzLmRlYnVnU2VyID0gdGhpcy5pbmplY3Rvci5nZXQoRGVidWdTZXJ2aWNlLCBudWxsKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZGVidWdTZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5kZWJ1Z1Nlci51c2VEZWJ1Z01vZGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgd3JpdGVDb25zb2xlKG1zZywgdHlwZTogJ2luZm8nfCdsb2cnfCd3YXJuJ3wnZXJyb3InID0gJ3dhcm4nKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGVidWdTZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5kZWJ1Z1Nlclt0eXBlXShtc2cpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNoZWNrT3B0b25zKCkge1xyXG4gICAgICAgIC8vIOWQr+eUqOaVsOaNruaKmOihjOWQju+8jOiZmuaLn+a4suafk+WKn+iDveWkseaViFxyXG4gICAgICAgIGlmICghdGhpcy5ub3dyYXApIHtcclxuICAgICAgICAgICAgdGhpcy52aXJ0dWFsaXplZCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucmVTZXRTaXplKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U2NvcmxsQm9keUhlaWdodCgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5tdWx0aVNlbGVjdCkge1xyXG4gICAgICAgICAgICB0aGlzLnNpbmdsZVNlbGVjdCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2luZ2xlU2VsZWN0ICYmIHRoaXMuc2hvd0NoZWNrYm94KSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tPblNlbGVjdCA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0T25DaGVjayA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMuYmVmb3JlU29ydENvbHVtbikge1xyXG4gICAgICAgICAgICB0aGlzLmJlZm9yZVNvcnRDb2x1bW4gPSAoKSA9PiBvZih0cnVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmZpdCkge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKHRoaXMuZWwubmF0aXZlRWxlbWVudCwgJ2YtdXRpbHMtZmlsbC1mbGV4LWNvbHVtbicpO1xyXG4gICAgICAgICAgICBjb25zdCBwYXJlbnRFbCA9IHRoaXMuZWwubmF0aXZlRWxlbWVudC5wYXJlbnRFbGVtZW50IHx8IHRoaXMuZWwubmF0aXZlRWxlbWVudC5wYXJlbnROb2RlO1xyXG4gICAgICAgICAgICBpZiAocGFyZW50RWwpIHtcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3MocGFyZW50RWwsICdmLXV0aWxzLWZpbGwnKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUocGFyZW50RWwsICdvdmVyZmxvdycsICdoaWRkZW4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmJlZm9yZUNsaWNrTm9kZSkge1xyXG4gICAgICAgICAgICB0aGlzLmJlZm9yZUNsaWNrTm9kZSA9ICgpID0+IG9mKHRydWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmJlZm9yZUNoZWNrQWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYmVmb3JlQ2hlY2tBbGwgPSAoKSA9PiBvZih0cnVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5iZWZvcmVVbkNoZWNrQWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYmVmb3JlVW5DaGVja0FsbCA9ICgpID0+IG9mKHRydWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuYXV0b1dpZHRoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZml0Q29sdW1ucyA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLnJlc2l6YWJsZUNvbHVtbnMgPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5kaXNhYmxlZFJvdykge1xyXG4gICAgICAgICAgICB0aGlzLmRpc2FibGVkUm93ID0gKCkgPT4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG5nT25Jbml0KCkge1xyXG4gICAgICAgIHRoaXMuaWQgPSAnVHJlZXRhYmxlLScgKyB0aGlzLl9VVUlEO1xyXG4gICAgICAgIC8vIOWIm+W7uiBzdHlsZXNoZWV0XHJcbiAgICAgICAgdGhpcy5zdHlsZUVsZW1lbnQgPSB0aGlzLnV0aWxzLmNyZWF0ZVN0eWxlU2hlZXQodGhpcy5zdHlsZVNoZWV0SWQpO1xyXG4gICAgICAgIHRoaXMuY2hlY2tDb2x1bW5PcHRpb24oKTtcclxuXHJcbiAgICAgICAgdGhpcy5jaGVja09wdG9ucygpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5uZ1pvbmUpIHtcclxuICAgICAgICAgICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZWwubmF0aXZlRWxlbWVudC5wYXJlbnRFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ybyA9IG5ldyBSZXNpemVPYnNlcnZlcigoZW50cmllcywgb2JzZXJ2ZXIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVudHJpZXMgJiYgZW50cmllc1swXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSBlbnRyaWVzWzBdLmNvbnRlbnRSZWN0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gIGVudHJpZXNbMF0udGFyZ2V0O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZpdCAmJiB0YXJnZXRbJ29mZnNldFBhcmVudCddKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXNpemUoeyB3aWR0aCwgaGVpZ2h0OiB0aGlzLnNob3dCb3JkZXI/IGhlaWdodCAtMjogaGVpZ2h0IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yby5vYnNlcnZlKHRoaXMuZWwubmF0aXZlRWxlbWVudC5wYXJlbnRFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnBhZ2luYXRpb25PcHRpb25zID0gdGhpcy5pbml0UGFnaW5hdGlvbk9wdGlvbnMoKTtcclxuICAgIH1cclxuXHJcbiAgICBuZ09uRGVzdHJveSgpIHtcclxuICAgICAgICBpZiAodGhpcy5ybykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5lbC5uYXRpdmVFbGVtZW50LnBhcmVudEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucm8udW5vYnNlcnZlKHRoaXMuZWwubmF0aXZlRWxlbWVudC5wYXJlbnRFbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnJvLmRpc2Nvbm5lY3QoKTtcclxuICAgICAgICAgICAgdGhpcy5ybyA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5maW5kS2V5c0hhbmRsZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5maW5kS2V5c0hhbmRsZXIudW5zdWJzY3JpYmUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMudXRpbHMucmVtb3ZlU3R5bGVTaGVldCh0aGlzLnN0eWxlU2hlZXRJZCk7XHJcbiAgICAgICAgdGhpcy5zdHlsZUVsZW1lbnQgPSBudWxsO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5mYXJyaXNJbnN0YW5jZXMpIHtcclxuICAgICAgICAgICAgdGhpcy5mYXJyaXNJbnN0YW5jZXMuZGVzdHJveSh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy50dFNlcnZpY2UgPSBudWxsO1xyXG5cclxuICAgICAgICB0aGlzLmRlc3Ryb3kkLm5leHQoKTtcclxuICAgICAgICB0aGlzLmRlc3Ryb3kkLmNvbXBsZXRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcykge1xyXG4gICAgICAgIGlmIChjaGFuZ2VzLmRhdGEgJiYgIWNoYW5nZXMuZGF0YS5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5pc0RhdGFDaGFuZ2VkID0gY2hhbmdlcy5kYXRhLmN1cnJlbnRWYWx1ZSAhPT0gY2hhbmdlcy5kYXRhLnByZXZpb3VzVmFsdWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY2hhbmdlcy5tdWx0aVNlbGVjdCAmJiAhY2hhbmdlcy5tdWx0aVNlbGVjdC5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5zaW5nbGVTZWxlY3QgPSAhY2hhbmdlcy5tdWx0aVNlbGVjdC5jdXJyZW50VmFsdWU7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNpbmdsZVNlbGVjdCAmJiB0aGlzLnNob3dDaGVja2JveCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RPbkNoZWNrID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tPblNlbGVjdCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjaGFuZ2VzLmRpc2FibGVkICYmICFjaGFuZ2VzLmRpc2FibGVkLmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmhvdmVyZWQgPSAhY2hhbmdlcy5kaXNhYmxlZC5jdXJyZW50VmFsdWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY2hhbmdlcy5lbmFibGVGaW5kVGV4dCAmJiAhY2hhbmdlcy5lbmFibGVGaW5kVGV4dC5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRGaW5kVGV4dChjaGFuZ2VzLmVuYWJsZUZpbmRUZXh0LmN1cnJlbnRWYWx1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY2hhbmdlcy5zZWxlY3RWYWx1ZSAmJiAhY2hhbmdlcy5zZWxlY3RWYWx1ZS5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3ROb2RlKGNoYW5nZXMuc2VsZWN0VmFsdWUuY3VycmVudFZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNoYW5nZXMuc2VsZWN0VmFsdWVzICYmICFjaGFuZ2VzLnNlbGVjdFZhbHVlcy5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3ROb2RlcyhjaGFuZ2VzLnNlbGVjdFZhbHVlcy5jdXJyZW50VmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY2hhbmdlcy5jaGVja1ZhbHVlcyAmJiAhY2hhbmdlcy5jaGVja1ZhbHVlcy5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5jaGVja2VkTm9kZXMoY2hhbmdlcy5jaGVja1ZhbHVlcy5jdXJyZW50VmFsdWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMucGFnZUluZGV4ICE9PSB1bmRlZmluZWQgJiYgIWNoYW5nZXMucGFnZUluZGV4LmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnBhZ2luYXRpb25PcHRpb25zID0gT2JqZWN0LmFzc2lnbih0aGlzLnBhZ2luYXRpb25PcHRpb25zLCB7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50UGFnZTogdGhpcy5wYWdlSW5kZXhcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY2hhbmdlcy5wYWdlU2l6ZSAhPT0gdW5kZWZpbmVkICYmICFjaGFuZ2VzLnBhZ2VTaXplLmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnBhZ2luYXRpb25PcHRpb25zID0gT2JqZWN0LmFzc2lnbih0aGlzLnBhZ2luYXRpb25PcHRpb25zLCB7XHJcbiAgICAgICAgICAgICAgICBpdGVtc1BlclBhZ2U6IHRoaXMucGFnZVNpemVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY2hhbmdlcy5wYWdlTGlzdCAhPT0gdW5kZWZpbmVkICYmICFjaGFuZ2VzLnBhZ2VMaXN0LmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnBhZ2luYXRpb25PcHRpb25zID0gT2JqZWN0LmFzc2lnbih0aGlzLnBhZ2luYXRpb25PcHRpb25zLCB7XHJcbiAgICAgICAgICAgICAgICBwYWdlTGlzdDogdGhpcy5wYWdlTGlzdFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjaGFuZ2VzLnRvdGFsICE9PSB1bmRlZmluZWQgJiYgIWNoYW5nZXMudG90YWwuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGFnaW5hdGlvbk9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHRoaXMucGFnaW5hdGlvbk9wdGlvbnMsIHtcclxuICAgICAgICAgICAgICAgIHRvdGFsSXRlbXM6IHRoaXMudG90YWxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY2hhbmdlcy5maXRDb2x1bW5zICYmICFjaGFuZ2VzLmZpdENvbHVtbnMuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0VGFibGVXaWR0aCh0aGlzLmFsbENvbHVtbnNXaWR0aCgpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjaGFuZ2VzLmNvbHVtbnMgJiYgIWNoYW5nZXMuY29sdW1ucy5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5jaGVja0NvbHVtbk9wdGlvbigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMuc2hvd0JvcmRlciAmJiAhY2hhbmdlcy5zaG93Qm9yZGVyLmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICAvLyB0aGlzLnJlU2V0U2l6ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBuZ0FmdGVyVmlld0NoZWNrZWQoKSB7XHJcbiAgICAgICAgLy8gaWYgKHRoaXMuaXNEYXRhQ2hhbmdlZCkge1xyXG4gICAgICAgIC8vICAgICB0aGlzLmxvYWRlZERhdGEuZW1pdCgpO1xyXG4gICAgICAgIC8vICAgICB0aGlzLmlzRGF0YUNoYW5nZWQgPSBmYWxzZTtcclxuICAgICAgICAvLyB9IGVsc2Uge1xyXG4gICAgICAgIC8vICAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XHJcbiAgICAgICAgLy8gICAgICAgICBpZiAodGhpcy5wc1JlZikge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIHRoaXMucHNSZWYuZGlyZWN0aXZlUmVmLnVwZGF0ZSgpO1xyXG4gICAgICAgIC8vICAgICAgICAgfVxyXG4gICAgICAgIC8vICAgICB9KTtcclxuICAgICAgICAvLyB9XHJcbiAgICB9XHJcblxyXG4gICAgbmdBZnRlckNvbnRlbnRJbml0KCkge1xyXG4gICAgICAgIHRoaXMudGVtcGxhdGVzLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgc3dpdGNoIChpdGVtLmdldFR5cGUoKSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnaGVhZGVyJzpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhlYWRlclRlbXBsYXRlID0gaXRlbS50ZW1wbGF0ZTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2JvZHknOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYm9keVRlbXBsYXRlID0gaXRlbS50ZW1wbGF0ZTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5jb2x1bW5zUmVmLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbHVtbnMgPSB0aGlzLnR0YzJjb2x1bW5zKHRoaXMuY29sdW1uc1JlZik7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNvbHVtbnNSZWYuY2hhbmdlcy5zdWJzY3JpYmUoKGQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb2x1bW5zID0gdGhpcy50dGMyY29sdW1ucyhkKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG5nQWZ0ZXJWaWV3SW5pdCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQgPSB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcignLmZhcnJpcy10cmVldGFibGUnKTtcclxuICAgICBcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyU2hvcnRjdXRzKCk7XHJcblxyXG4gICAgICAgIC8vIGF1dG93aWR0aCDml7bvvIzooajlpLTlrr3luqbkvp3mja7lhoXlrrnlrr3luqbkvZzlkIzmraXlpITnkIZcclxuICAgICAgICB0aGlzLnNldE5ld0NvbHVtbnNXaWR0aCgpO1xyXG4gICAgICAgIHRoaXMuc2V0UmlnaHRGaXhlZENvbHVtblNoYWRvdygpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5lbCAmJiB0aGlzLmZhcnJpc0luc3RhbmNlcykge1xyXG4gICAgICAgICAgICB0aGlzLmZhcnJpc0luc3RhbmNlcy5hZGQodGhpcy5lbC5uYXRpdmVFbGVtZW50LCB0aGlzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmJvZHlUZW1wbGF0ZSkge1xyXG4gICAgICAgICAgICB0aGlzLnV0aWxzLmFwcGVuZENzc1J1bGVzKFtgIyR7dGhpcy5pZH0gLmZhcnJpcy10cmVldGFibGUgLmZhcnJpcy10cmVldGFibGUtdGJvZHkgdGQge3BhZGRpbmc6IC4yNXJlbSAwLjc1cmVtO31gXSwgdGhpcy5zdHlsZUVsZW1lbnQuc2hlZXQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8g5YW85a655pen54mI6K6+6K6h5ZmoICAgICAgICBcclxuICAgICAgICBpZiAodGhpcy5maXQgJiYgdGhpcy5lbC5uYXRpdmVFbGVtZW50LnBhcmVudEVsZW1lbnQubm9kZU5hbWUgIT09ICdESVYnKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQucGFyZW50RWxlbWVudC5ub2RlTmFtZSA9PT0gJ0FQUC1ERy1UUkVFLUdSSUQnKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkaXYgPSB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQucGFyZW50RWxlbWVudC5jbG9zZXN0KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgIGlmIChkaXYpIHtcclxuICAgICAgICAgICAgICAgICAgICBkaXYuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5sb2FkRGF0YVN1Y2Nlc3MoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGxvYWREYXRhU3VjY2VzcygpIHtcclxuICAgICAgICB0aW1lcih0aGlzLmxvYWRlZFRpbWVyKS5waXBlKFxyXG4gICAgICAgICAgICB0YWtlVW50aWwodGhpcy5kZXN0cm95JClcclxuICAgICAgICApLnN1YnNjcmliZSgoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBzUmVmICYmIHRoaXMucHNSZWYuZGlyZWN0aXZlUmVmKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBzUmVmLmRpcmVjdGl2ZVJlZi51cGRhdGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmxvYWRlZERhdGEuZW1pdCgpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG5cclxuICAgIHByaXZhdGUgc2V0TmV3Q29sdW1uc1dpZHRoKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5hdXRvV2lkdGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBuZXdDb2xXaWR0aDogYW55ID0ge307XHJcbiAgICAgICAgbGV0IGhlYWRlckNlbGxzID0gW107XHJcbiAgICAgICAgbGV0IGZpcnN0Um93Q2VsbHMgPSBbXTtcclxuICAgICAgICAvLyBsZXQgY29sZ3JvdXBzID0gW107XHJcbiAgICAgICAgaWYgKHRoaXMuc2hvd0hlYWRlciAmJiB0aGlzLmhlYWRlclRhYmxlKSB7XHJcbiAgICAgICAgICAgIGhlYWRlckNlbGxzID0gQXJyYXkuZnJvbTxIVE1MRWxlbWVudD4odGhpcy5oZWFkZXJUYWJsZS5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RoJykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5zZXJpYWxpemVkVmFsdWUgJiYgdGhpcy5zZXJpYWxpemVkVmFsdWUubGVuZ3RoICYmIHRoaXMuYm9keVRhYmxlKSB7XHJcbiAgICAgICAgICAgIGZpcnN0Um93Q2VsbHMgPSBBcnJheS5mcm9tPEhUTUxFbGVtZW50Pih0aGlzLmJvZHlUYWJsZS5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ3RyJykucXVlcnlTZWxlY3RvckFsbCgndGQnKSk7XHJcbiAgICAgICAgICAgIC8vIGNvbGdyb3VwcyA9IHRoaXMuYm9keVRhYmxlLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcignY29sZ3JvdXAnKS5xdWVyeVNlbGVjdG9yQWxsKCdjb2wnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZpcnN0Um93Q2VsbHMuZm9yRWFjaCgodGQ6IGFueSwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZmllbGROYW1lID0gdGQuZ2V0QXR0cmlidXRlKCdmaWVsZCcpO1xyXG4gICAgICAgICAgICBsZXQgY29sV2lkdGggPSB0ZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aC50b0ZpeGVkKDIpO1xyXG4gICAgICAgICAgICBuZXdDb2xXaWR0aFtmaWVsZE5hbWVdID0gY29sV2lkdGg7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBjb2wgPSB0aGlzLmNvbHVtbnMuZmluZChjID0+IGMuZmllbGQgPT09IGZpZWxkTmFtZSk7XHJcbiAgICAgICAgICAgIGlmIChjb2wgJiYgY29sLndpZHRoICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGNvbFdpZHRoID0gY29sV2lkdGggPiBjb2wud2lkdGggPyBjb2xXaWR0aCA6IGNvbC53aWR0aDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGQuc3R5bGUubWluV2lkdGggPSBjb2xXaWR0aCArICdweCc7XHJcbiAgICAgICAgICAgIGhlYWRlckNlbGxzW2luZGV4XS5zdHlsZS53aWR0aCA9IGNvbFdpZHRoICsgJ3B4JztcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb2x1bW5Jc1Zpc2libGUoY29sKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudHRTZXJ2aWNlLmNvbHVtbklzVmlzaWJsZShjb2wsIHRoaXMpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwcml2YXRlIGNvbHVtbkNzc05hbWUobjogYW55KSB7XHJcbiAgICAgICAgcmV0dXJuIGAjJHt0aGlzLmlkfSAudHJlZXRhYmxlLWNlbGxbZmllbGQ9XCIke24uZmllbGR9XCJdLCAjJHt0aGlzLmlkfSAudHJlZXRhYmxlLWhlYWRlci1jZWxsW2ZpZWxkPVwiJHtuLmZpZWxkfVwiXTpub3QoLmdyb3VwLWhlYWRlci1jZWxsKWA7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHByaXZhdGUgY2hlY2tHcm91cENvbHVtbnMoKSB7XHJcbiAgICAgICAgdmFyIGkgPSB0aGlzLmdyb3VwQ29sdW1ucy5sZW5ndGggLSAxO1xyXG4gICAgICAgIHdoaWxlKGkgPj0gMCkge1xyXG4gICAgICAgICAgICB2YXIgaWRzID0gdGhpcy5ncm91cENvbHVtbnNbaV0ubWFwKG4gPT4gbi5wYXJlbnRJZCk7XHJcbiAgICAgICAgICAgIGlkcyA9IEFycmF5LmZyb20obmV3IFNldChpZHMpKTtcclxuICAgICAgICAgICAgaWRzLm1hcChpZCA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjaGlsZENvbHMgPSB0aGlzLmdyb3VwQ29sdW1uc1tpXS5maWx0ZXIobiA9PiBuLnBhcmVudElkID09IGlkKS5tYXAobiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YUZpZWxkID0gdGhpcy5jb2x1bW5zLmZpbmQoYyA9PiBjLmlkID09PSBuLmlkKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0YUZpZWxkIHx8IG47XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IFxyXG4gICAgICAgICAgICAgICAgICAgIGlkLFxyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiBjaGlsZENvbHMucmVkdWNlKChyLGMpID0+IHsgcmV0dXJuIHIrPWMud2lkdGggfSwgMCksXHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogY2hpbGRDb2xzWzBdLmxlZnQsXHJcbiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IGNoaWxkQ29sc1tjaGlsZENvbHMubGVuZ3RoIC0gMV0ucmlnaHQgfHwgMFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfSkuZm9yRWFjaChwID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChpIC0gMSA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBDb2wgPSB0aGlzLmdyb3VwQ29sdW1uc1tpLTFdLmZpbmQocGMgPT4gcGMuaWQgPT0gcC5pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YUZpZWxkID0gdGhpcy5jb2x1bW5zLmZpbmQoYyA9PiBjLmlkID09PSBwLmlkKTtcclxuICAgICAgICAgICAgICAgICAgICBwQ29sID0gZGF0YUZpZWxkIHx8IHBDb2w7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHBDb2wud2lkdGggPSBwLndpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwQ29sLmZpeGVkID09PSAnbGVmdCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcENvbC5sZWZ0ID0gcC5sZWZ0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAocENvbC5maXhlZCA9PT0gJ3JpZ2h0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwQ29sLnJpZ2h0ID0gcC5yaWdodDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpLS07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIOaMieWbuuWumuWIl+eahOmhuuW6j+aOkuW6j1xyXG4gICAgcHJpdmF0ZSBzb3J0Q29sdW1uc0J5Rml4ZWQodXBkYXRlQ29sdW1ucyA9IHRydWUpIHtcclxuICAgICAgICBjb25zdCBmaXhlZExlZnQgPSB0aGlzLmNvbHVtbnMuZmlsdGVyKG4gPT4gbi5maXhlZCA9PT0gJ2xlZnQnKTtcclxuICAgICAgICBjb25zdCBmaXhlZENlbnRlciA9IHRoaXMuY29sdW1ucy5maWx0ZXIobiA9PiAhbi5maXhlZCB8fCBuLmZpeGVkID09PSAnY2VudGVyJyk7XHJcbiAgICAgICAgY29uc3QgZml4ZWRSaWdodCA9IHRoaXMuY29sdW1ucy5maWx0ZXIobiA9PiBuLmZpeGVkID09PSAncmlnaHQnKTtcclxuXHJcbiAgICAgICAgaWYgKGZpeGVkTGVmdCAmJiBmaXhlZExlZnQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGZpeGVkTGVmdC5mb3JFYWNoKChuLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbi5sZWZ0ID0gZml4ZWRMZWZ0LnJlZHVjZSgociwgYywgaSk9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpIDwgaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByICs9IGMud2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIDApXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIG4ubGVmdCA9IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGZpeGVkUmlnaHQgJiYgZml4ZWRSaWdodC5sZW5ndGgpIHtcclxuXHJcbiAgICAgICAgICAgIGxldCByaWdodFdpZHRoVG90YWwgPSBmaXhlZFJpZ2h0LnJlZHVjZSgociwgYykgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHIgKyBjLndpZHRoO1xyXG4gICAgICAgICAgICB9LCAwKTtcclxuXHJcbiAgICAgICAgICAgIGZpeGVkUmlnaHQuZm9yRWFjaCgobiwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJpZ2h0V2lkdGhUb3RhbCAtPSBuLndpZHRoO1xyXG4gICAgICAgICAgICAgICAgbi5yaWdodCA9IHJpZ2h0V2lkdGhUb3RhbDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcblxyXG4gICAgICAgIGlmICh1cGRhdGVDb2x1bW5zKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29sdW1ucyA9IGZpeGVkTGVmdC5jb25jYXQoZml4ZWRDZW50ZXIpLmNvbmNhdChmaXhlZFJpZ2h0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjaGVja0NvbHVtbk9wdGlvbigpIHtcclxuICAgICAgICBjb25zdCBjc3NSdWxlcyA9IFtdO1xyXG5cclxuICAgICAgICBcclxuICAgICAgICAvLyDlkK/nlKjliIbpobXliqDovb3lrZDoioLngrlcclxuICAgICAgICBpZiAodGhpcy5wYWdpbmF0aW9uRm9yQ2hpbGRyZW4pIHtcclxuICAgICAgICAgICAgY29uc3QgcGFnZXJCYXJDb2w6IGFueSA9IHtcclxuICAgICAgICAgICAgICAgIGZpZWxkOiBOT0RFU19QQUdFUl9DT0xVTU5fRklFTEQsXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogMTYwLFxyXG4gICAgICAgICAgICAgICAgdGl0bGU6ICcnLFxyXG4gICAgICAgICAgICAgICAgYWxpZ246ICdjZW50ZXInLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6IHRoaXMubm9kZXNQYWdlckJhcixcclxuICAgICAgICAgICAgICAgIHJvd3NwYW46IDEsXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnVzZUdyb3VwSGVhZGVyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5ncm91cENvbHVtbnNbMF1bdGhpcy5ncm91cENvbHVtbnNbMF0ubGVuZ3RoIC0gMV0uZml4ZWQgPT09ICdyaWdodCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBwYWdlckJhckNvbC5maXhlZCA9ICdyaWdodCc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBwYWdlckJhckNvbC5yb3dzcGFuID0gdGhpcy5ncm91cENvbHVtbnMubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ncm91cENvbHVtbnNbMF0ucHVzaChwYWdlckJhckNvbClcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5jb2x1bW5zLnB1c2gocGFnZXJCYXJDb2wpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIGlmICghdGhpcy5maXRDb2x1bW5zKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc29ydENvbHVtbnNCeUZpeGVkKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmNvbHVtbnMuZm9yRWFjaCgobiwgaSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAobi52aXNpYmxlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIG4udmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChuWydoYWxpZ24nXSkge1xyXG4gICAgICAgICAgICAgICAgbi5oQWxpZ24gPSBuWydoYWxpZ24nXTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKG4ud2lkdGggPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgbi53aWR0aCA9IDEwMDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCFuLmlkKSB7XHJcbiAgICAgICAgICAgICAgICBuLmlkID0gJ3RyZWV0YWJsZS1oZWFkZXItJyArIChuLmZpZWxkIHx8IGkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNvbFdpZHRoVG90YWwgPSB0aGlzLmFsbENvbHVtbnNXaWR0aCgpO1xyXG4gICAgICAgIGxldCBmaXhlZENvbHMgPSAwO1xyXG5cclxuICAgICAgICBjb25zdCBmaXhlZFJpZ2h0Q29sdW1ucyA9IHRoaXMuY29sdW1ucy5maWx0ZXIobiA9PiBuLmZpeGVkID09PSAncmlnaHQnKTtcclxuICAgICAgICBpZiAoZml4ZWRSaWdodENvbHVtbnMgJiYgZml4ZWRSaWdodENvbHVtbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGZpeGVkUmlnaHRDb2x1bW5zWzBdWydyaWdodFNoYWRvd0NvbCddID0gdHJ1ZTtcclxuICAgICAgICAgICAgZml4ZWRSaWdodENvbHVtbnNbZml4ZWRSaWdodENvbHVtbnMubGVuZ3RoIC0gMV1bJ2xhc3RDb2x1bW4nXSA9IHRydWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuY29sdW1ucyAmJiB0aGlzLmNvbHVtbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbnNbdGhpcy5jb2x1bW5zLmxlbmd0aCAtIDFdWydsYXN0Q29sdW1uJ10gPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBmaXhlZExlZnRDb2x1bW5zID0gdGhpcy5jb2x1bW5zLmZpbHRlcihuID0+IG4uZml4ZWQgPT09ICdsZWZ0Jyk7XHJcbiAgICAgICAgaWYgKGZpeGVkTGVmdENvbHVtbnMgJiYgZml4ZWRMZWZ0Q29sdW1ucy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgZml4ZWRMZWZ0Q29sdW1uc1tmaXhlZExlZnRDb2x1bW5zLmxlbmd0aCAtIDFdWydsZWZ0U2hhZG93Q29sJ10gPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZml4ZWRDb2xzID0gdGhpcy5zZXRDZWxsV2lkdGhDc3MoY29sV2lkdGhUb3RhbCwgZml4ZWRDb2xzLCBjc3NSdWxlcyk7XHJcbiAgICAgICAgdGhpcy5zZXRUYWJsZVdpZHRoKGNvbFdpZHRoVG90YWwpO1xyXG5cclxuICAgICAgICB0aGlzLmZpeGVkQ29sdW1ucyA9ICEhZml4ZWRDb2xzO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0Q2VsbFdpZHRoQ3NzKGNvbFdpZHRoVG90YWw6IGFueSwgZml4ZWRDb2xzOiBudW1iZXIsIGNzc1J1bGVzOiBhbnlbXSkge1xyXG5cclxuXHJcbiAgICAgICAgdGhpcy5jb2x1bW5zLmZvckVhY2goKG4sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlzVmlzaWJsZSA9IHRoaXMuY29sdW1uSXNWaXNpYmxlKG4pO1xyXG4gICAgICAgICAgICBjb25zdCBydWxlTmFtZSA9IHRoaXMuY29sdW1uQ3NzTmFtZShuKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGNzc1J1bGUgPSB0aGlzLnV0aWxzLmdldENzc1J1bGUocnVsZU5hbWUsIHRoaXMuc3R5bGVFbGVtZW50LnNoZWV0KTtcclxuICAgICAgICAgICAgaWYgKCFjc3NSdWxlKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc3R5bGVjc3MgPSBydWxlTmFtZSArICcgeyAnO1xyXG4gICAgICAgICAgICAgICAgc3R5bGVjc3MgKz0gaXNWaXNpYmxlID8gJycgOiAnZGlzcGxheTogbm9uZTsnO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmZpdENvbHVtbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICBzdHlsZWNzcyArPSBgd2lkdGg6ICR7KG4ud2lkdGggLyBjb2xXaWR0aFRvdGFsICogMTAwKS50b0ZpeGVkKDIpfSU7YDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGVjc3MgKz0gYHdpZHRoOiAke24ud2lkdGh9cHg7YDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG4uZml4ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4uZml4ZWQgPT09ICdsZWZ0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGVjc3MgKz0gYGxlZnQ6ICR7bi5sZWZ0fXB4YDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpeGVkQ29scysrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobi5maXhlZCA9PT0gJ3JpZ2h0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGVjc3MgKz0gYHJpZ2h0OiAke24ucmlnaHR9cHhgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZml4ZWRDb2xzKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgc3R5bGVjc3MgKz0gJ30nO1xyXG4gICAgICAgICAgICAgICAgY3NzUnVsZXMucHVzaChzdHlsZWNzcyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjc3NSdWxlLnN0eWxlLmRpc3BsYXkgPSBpc1Zpc2libGUgPyAnJyA6ICdub25lJztcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmZpdENvbHVtbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICBjc3NSdWxlLnN0eWxlLndpZHRoID0gYCR7KG4ud2lkdGggLyBjb2xXaWR0aFRvdGFsICogMTAwKS50b0ZpeGVkKDIpfSVgO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjc3NSdWxlLnN0eWxlLndpZHRoID0gYCR7bi53aWR0aH1weGA7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG4uZml4ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4uZml4ZWQgPT09ICdsZWZ0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3NzUnVsZS5zdHlsZS5sZWZ0ID0gYCR7bi5sZWZ0fXB4YDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4uZml4ZWQgPT09ICdyaWdodCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNzc1J1bGUuc3R5bGUucmlnaHQgPSBgJHtuLnJpZ2h0fXB4YDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgaWYgKHRoaXMudXNlR3JvdXBIZWFkZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5hdXRvV2lkdGggPSBmYWxzZTsgIC8vIOWkmuihqOWktOWQr+eUqOWQju+8jOiHquWKqOWIl+WuveWkseaViCBURlMgNDk2MDg4XHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tHcm91cENvbHVtbnMoKTtcclxuICAgICAgICAgICAgdmFyIGkgPSB0aGlzLmdyb3VwQ29sdW1ucy5sZW5ndGggLSAyO1xyXG4gICAgICAgICAgICB3aGlsZSAoaSA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBncm91cEhlYWRlckNvbENzc2VzID0gdGhpcy5ncm91cENvbHVtbnNbaV0uZmlsdGVyKGNvbCA9PiAhY29sLmZpZWxkKS5tYXAoY29sID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZ3JvdXBDb2xDc3NOYW1lID0gYCMke2NvbC5pZH17IHdpZHRoOiAke2NvbC53aWR0aH1weGA7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2wuZml4ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbC5maXhlZCA9PT0gJ2xlZnQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cENvbENzc05hbWUgKz0gJztsZWZ0OicgKyBjb2wubGVmdCArICdweCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb2wuZml4ZWQgPT09ICdyaWdodCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwQ29sQ3NzTmFtZSArPSAnO3JpZ2h0OicgKyBjb2wucmlnaHQgKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ3JvdXBDb2xDc3NOYW1lICs9ICd9JztcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHRoaXMudXRpbHMuYXBwZW5kQ3NzUnVsZXMyKGdyb3VwSGVhZGVyQ29sQ3NzZXMsIHRoaXMuc3R5bGVFbGVtZW50LnNoZWV0KTtcclxuICAgICAgICAgICAgICAgIGktLTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIGlmIChjc3NSdWxlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy51dGlscy5hcHBlbmRDc3NSdWxlcyhjc3NSdWxlcywgdGhpcy5zdHlsZUVsZW1lbnQuc2hlZXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZml4ZWRDb2xzO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0VGFibGVXaWR0aChjb2xXaWR0aFRvdGFsOiBudW1iZXIpIHtcclxuICAgICAgICBpZiAodGhpcy5oZWFkZXJUYWJsZSAmJiB0aGlzLmJvZHlUYWJsZSkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuZml0Q29sdW1ucyAmJiAhdGhpcy5hdXRvRml0Q29sdW1ucykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oZWFkZXJUYWJsZS5uYXRpdmVFbGVtZW50LnN0eWxlLndpZHRoID0gYCR7Y29sV2lkdGhUb3RhbH1weGA7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJvZHlUYWJsZS5uYXRpdmVFbGVtZW50LnN0eWxlLndpZHRoID0gYCR7Y29sV2lkdGhUb3RhbH1weGA7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhlYWRlclRhYmxlLm5hdGl2ZUVsZW1lbnQuc3R5bGUud2lkdGggPSAnMTAwJSc7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJvZHlUYWJsZS5uYXRpdmVFbGVtZW50LnN0eWxlLndpZHRoID0gJzEwMCUnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYWxsQ29sdW1uc1dpZHRoKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbHVtbnMucmVkdWNlKChyLCBjKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbHVtbklzVmlzaWJsZShjKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHIgKyBjLndpZHRoO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHI7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSwgMCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25QYWdlQ2hhbmdlKCRldmVudCkge1xyXG4gICAgICAgIHRoaXMucGFnZUNoYW5nZWQuZW1pdCgkZXZlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uUGFnZVNpemVDaGFuZ2UoJGV2ZW50KSB7XHJcbiAgICAgICAgdGhpcy5wYWdlU2l6ZUNoYW5nZWQuZW1pdCgkZXZlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVBhZ2VJbmZvKHBhZ2VJbmZvOiB7IHBhZ2VJbmRleD86IG51bWJlciwgcGFnZVNpemU/OiBudW1iZXIsIHRvdGFsPzogbnVtYmVyLCBwYWdlTGlzdD86IG51bWJlcltdIH0pIHtcclxuICAgICAgICBpZiAocGFnZUluZm8gJiYgT2JqZWN0LmtleXMocGFnZUluZm8pLmxlbmd0aCkge1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgb2JqOiBhbnkgPSB7fTtcclxuICAgICAgICAgICAgaWYgKHBhZ2VJbmZvLnRvdGFsICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIG9iai50b3RhbEl0ZW1zID0gcGFnZUluZm8udG90YWw7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChwYWdlSW5mby5wYWdlSW5kZXggIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgb2JqLmN1cnJlbnRQYWdlID0gcGFnZUluZm8ucGFnZUluZGV4O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAocGFnZUluZm8ucGFnZVNpemUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgb2JqLml0ZW1zUGVyUGFnZSA9IHBhZ2VJbmZvLnBhZ2VTaXplO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAocGFnZUluZm8ucGFnZUxpc3QgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgb2JqLnBhZ2VMaXN0ID0gcGFnZUluZm8ucGFnZUxpc3Q7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMucGFnaW5hdGlvbk9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHRoaXMucGFnaW5hdGlvbk9wdGlvbnMsIG9iaik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwcml2YXRlIGluaXRQYWdpbmF0aW9uT3B0aW9ucygpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBpZDogJ0ZhcnJpcy1UcmVlVGFibGUtUGFnaW5hdGlvbl8nICsgdGhpcy5fVVVJRCxcclxuICAgICAgICAgICAgaXRlbXNQZXJQYWdlOiB0aGlzLnBhZ2VTaXplLFxyXG4gICAgICAgICAgICBjdXJyZW50UGFnZTogdGhpcy5wYWdlSW5kZXgsXHJcbiAgICAgICAgICAgIHBhZ2VMaXN0OiB0aGlzLnBhZ2VMaXN0LFxyXG4gICAgICAgICAgICB0b3RhbEl0ZW1zOiB0aGlzLnRvdGFsLFxyXG4gICAgICAgICAgICByZW1vdGU6IHRoaXMucGFnZXJPblNlcnZlclxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Tm9kZVRleHQoY29sOiBUcmVlVGFibGVDb2x1bW4sIHJvd2RhdGEsIGZhc3QgPSBmYWxzZSkge1xyXG4gICAgICAgIGlmIChjb2wuaXNNdWx0aWxpbmd1YWxGaWVsZCkge1xyXG4gICAgICAgICAgICBjb25zdCB2YWwgPSB0aGlzLnV0aWxzLmdldFZhbHVlKGNvbC5maWVsZCwgcm93ZGF0YSk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmxvY2FsZVNlcnZpY2UpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsZUlkID0gdGhpcy5sb2NhbGVTZXJ2aWNlLmxvY2FsZUlkIHx8ICd6aC1DSFMnO1xyXG4gICAgICAgICAgICAgICAgaWYgKHZhbCAmJiB0eXBlb2YgdmFsID09PSAnb2JqZWN0JyAmJiBPYmplY3Qua2V5cyh2YWwpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsW2xvY2FsZUlkXTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnV0aWxzLmdldFZhbHVlKGNvbC5maWVsZCwgcm93ZGF0YSwgIWZhc3QpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGluaXROb2RlU3RhdHVzKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5zaW5nbGVTZWxlY3QpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tWYWx1ZXMgJiYgdGhpcy5jaGVja1ZhbHVlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tlZE5vZGVzKHRoaXMuY2hlY2tWYWx1ZXMsIGZhbHNlLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0VmFsdWVzICYmIHRoaXMuc2VsZWN0VmFsdWVzLmxlbmd0aCAmJiAhdGhpcy5vbmx5U2VsZWN0U2VsZikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3ROb2Rlcyh0aGlzLnNlbGVjdFZhbHVlcywgZmFsc2UsIGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdE5vZGUodGhpcy5zZWxlY3RWYWx1ZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKiDms6jlhozlv6vmjbfplK4gKi9cclxuICAgIHByaXZhdGUgcmVnaXN0ZXJTaG9ydGN1dHMoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2hvd0ZpbHRlckJhciAmJiB0aGlzLl9ob3RLZXlzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hvdEtleXMuYWRkU2hvcnRjdXQoeyBrZXlzOiAnZW50ZXInLCBlbGVtZW50OiB0aGlzLmlucHV0R3JvdXAudGV4dGJveC5uYXRpdmVFbGVtZW50IH0pLnN1YnNjcmliZSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uU2VhcmNoKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zZXRGaW5kVGV4dCh0aGlzLmVuYWJsZUZpbmRUZXh0KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNldEZpbmRUZXh0KGVuYWJsZSA9IHRydWUpIHtcclxuICAgICAgICB0aGlzLmVuYWJsZUZpbmRUZXh0ID0gZW5hYmxlO1xyXG4gICAgICAgIGlmICh0aGlzLmVuYWJsZUZpbmRUZXh0ICYmIHRoaXMuX2hvdEtleXMpIHtcclxuICAgICAgICAgICAgLy8g5p+l6K+i5bel5YW35p2hXHJcbiAgICAgICAgICAgIHRoaXMuZmluZEtleXNIYW5kbGVyID0gdGhpcy5faG90S2V5cy5hZGRTaG9ydGN1dCh7IGtleXM6ICdjb250cm9sLnNoaWZ0LmYnIH0pLnN1YnNjcmliZSgoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlRmluZFRleHQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dGaW5kSW5wdXQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zaG93RmluZElucHV0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dGaW5kSW5wdXQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2RSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmZpbmRLZXlzSGFuZGxlcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5maW5kS2V5c0hhbmRsZXIudW5zdWJzY3JpYmUoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmluZEtleXNIYW5kbGVyID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldEN1c3RvbUNscyhyb3dOb2RlOiBSb3dOb2RlLCBmaWVsZDogc3RyaW5nID0gJycsIGNsc1R5cGU6ICdyb3cnIHwgJ2NlbGwnID0gJ3JvdycpIHtcclxuICAgICAgICBjb25zdCBjbHMgPSB7fTtcclxuICAgICAgICBsZXQgZm4gPSB0aGlzLnJvd1N0eWxlcjtcclxuICAgICAgICBpZiAoY2xzVHlwZSA9PT0gJ2NlbGwnKSB7XHJcbiAgICAgICAgICAgIGZuID0gdGhpcy5jZWxsU3R5bGVyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGZuKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJvd0NscyA9IGZuKHJvd05vZGUubm9kZSwgZmllbGQpO1xyXG4gICAgICAgICAgICBpZiAocm93Q2xzKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgYXJyY2xzID0gW107XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJvd0NscyA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICBhcnJjbHMgPSBbcm93Q2xzXTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocm93Q2xzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJjbHMgPSByb3dDbHM7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChhcnJjbHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgcm93Q2xzT2JqID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgYXJyY2xzLmZvckVhY2goYyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvd0Nsc09ialsnJyArIGNdID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBfY2xzID0geyAuLi5yb3dDbHNPYmosIC4uLmNscyB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfY2xzO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcm93Q2xzO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNscztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjbHM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldFJvd0Nscyhyb3dOb2RlOiBSb3dOb2RlLCBmaWVsZD86IHN0cmluZykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldEN1c3RvbUNscyhyb3dOb2RlLCAncm93Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q2VsbENscyhyb3dOb2RlOiBSb3dOb2RlLCBmaWVsZDogc3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q3VzdG9tQ2xzKHJvd05vZGUsIGZpZWxkLCAnY2VsbCcpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFJlYWxDb2xXaWR0aChjdXJyZW50Q29sOiBUcmVlVGFibGVDb2x1bW4pIHtcclxuICAgICAgICBpZiAodGhpcy5jb2x1bW5zICYmIHRoaXMuY29sdW1ucy5sZW5ndGggJiYgdGhpcy5maXRDb2x1bW5zKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbFdpZHRoVG90YWwgPSB0aGlzLmNvbHVtbnMucmVkdWNlKChyLCBjKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gciArICh0aGlzLmNvbHVtbklzVmlzaWJsZShjKSAmJiAoci5maWVsZCAhPT0gTk9ERVNfUEFHRVJfQ09MVU1OX0ZJRUxEICB8fCByLmZpeGVkV2lkdGgpPyBjLndpZHRoIDogMCk7XHJcbiAgICAgICAgICAgIH0sIDApO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuY29sdW1uSXNWaXNpYmxlKGN1cnJlbnRDb2wpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIGN1cnJlbnRDb2wuZmllbGQgIT09IE5PREVTX1BBR0VSX0NPTFVNTl9GSUVMRCAmJiAgIWN1cnJlbnRDb2wuZml4ZWRXaWR0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoY3VycmVudENvbC53aWR0aCAvIGNvbFdpZHRoVG90YWwgKiAxMDApLnRvRml4ZWQoMikgKyAnJSc7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoY3VycmVudENvbC53aWR0aCB8fCAxMjApICsgJ3B4JztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjdXJyZW50Q29sLndpZHRoICsgJ3B4JztcclxuICAgIH1cclxuXHJcbiAgICBASG9zdExpc3RlbmVyKCd3aW5kb3c6cmVzaXplJylcclxuICAgIG9uUmVzaXplZCgpIHtcclxuICAgICAgICB0aGlzLnJlc2l6ZVNlci53aW5kb3dSZXNpemVkKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXRSaWdodEZpeGVkQ29sdW1uU2hhZG93KCkge1xyXG4gICAgICAgIGlmICh0aGlzLnBzUmVmICYmIHRoaXMucHNSZWYuZGlyZWN0aXZlUmVmKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBzID0gKHRoaXMucHNSZWYuZGlyZWN0aXZlUmVmIGFzIGFueSkuaW5zdGFuY2U7XHJcbiAgICAgICAgICAgIGlmICghcHMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCB7IGNvbnRhaW5lcldpZHRoLCBzY3JvbGxiYXJYTGVmdCwgY29udGVudFdpZHRoIH0gPSBwcztcclxuICAgICAgICAgICAgaWYgKGNvbnRhaW5lcldpZHRoICsgc2Nyb2xsYmFyWExlZnQgPCBjb250ZW50V2lkdGgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBmaXhlZFJpZ2h0Q29sdW1ucyA9IHRoaXMuY29sdW1ucy5maWx0ZXIobiA9PiBuLmZpeGVkID09PSAncmlnaHQnKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJ1bGVOYW1lID0gYCMke3RoaXMuaWR9LmYtdHJlZXRhYmxlLS1maXhlZC1jb2x1bW5zYDtcclxuICAgICAgICAgICAgICAgIGlmIChmaXhlZFJpZ2h0Q29sdW1ucyAmJiBmaXhlZFJpZ2h0Q29sdW1ucy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmaXhlZFJpZ2h0Q3NzUnVsZUtleSA9IGAke3J1bGVOYW1lfSBbci10dC1zaGFkb3ctY29sXTo6YmVmb3JlYDtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByaWdodENTU1J1bGUgPSBgJHtmaXhlZFJpZ2h0Q3NzUnVsZUtleX17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJveC1zaGFkb3c6I2Q5ZDlkOSAtMTJweCAwcHggOHB4IC0xMnB4IGluc2V0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1gO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnV0aWxzLmFwcGVuZENzc1J1bGVzKFtyaWdodENTU1J1bGVdLCB0aGlzLnN0eWxlRWxlbWVudC5zaGVldCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXRGaXhlZENvbHVtblNoYWRvdyh4LCBlKSB7XHJcbiAgICAgICAgY29uc3QgZml4ZWRMZWZ0Q29sdW1ucyA9IHRoaXMuY29sdW1ucy5maWx0ZXIobiA9PiBuLmZpeGVkID09PSAnbGVmdCcpO1xyXG4gICAgICAgIGNvbnN0IGZpeGVkUmlnaHRDb2x1bW5zID0gdGhpcy5jb2x1bW5zLmZpbHRlcihuID0+IG4uZml4ZWQgPT09ICdyaWdodCcpO1xyXG4gICAgICAgIGNvbnN0IHJ1bGVOYW1lID0gYCMke3RoaXMuaWR9LmYtdHJlZXRhYmxlLS1maXhlZC1jb2x1bW5zYDtcclxuICAgICAgICBsZXQgZml4ZWRMZWZ0Q3NzUnVsZUtleSA9ICcnO1xyXG4gICAgICAgIGxldCBmaXhlZFJpZ2h0Q3NzUnVsZUtleSA9ICcnO1xyXG4gICAgICAgIGxldCBsZWZ0Q1NTUnVsZSA9ICcnO1xyXG4gICAgICAgIGxldCByaWdodENTU1J1bGUgPSAnJztcclxuICAgICAgICBpZiAoZml4ZWRMZWZ0Q29sdW1ucyAmJiBmaXhlZExlZnRDb2x1bW5zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBjb25zdCBsYXN0Rml4ZWRMZWZ0Q29sdW1uID0gZml4ZWRMZWZ0Q29sdW1uc1tmaXhlZExlZnRDb2x1bW5zLmxlbmd0aCAtIDFdO1xyXG4gICAgICAgICAgICBmaXhlZExlZnRDc3NSdWxlS2V5ID0gYCR7cnVsZU5hbWV9IFtmaWVsZD1cIiR7bGFzdEZpeGVkTGVmdENvbHVtbi5maWVsZH1cIl06OmFmdGVyYDtcclxuICAgICAgICAgICAgbGVmdENTU1J1bGUgPSBgJHtmaXhlZExlZnRDc3NSdWxlS2V5fXtcclxuICAgICAgICAgICAgICAgIGJveC1zaGFkb3c6I2Q5ZDlkOSAxMnB4IDBweCA4cHggLTEycHggaW5zZXQ7XHJcbiAgICAgICAgICAgIH1gO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGZpeGVkUmlnaHRDb2x1bW5zICYmIGZpeGVkUmlnaHRDb2x1bW5zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBmaXhlZFJpZ2h0Q3NzUnVsZUtleSA9IGAke3J1bGVOYW1lfSBbci10dC1zaGFkb3ctY29sXTo6YmVmb3JlYDtcclxuICAgICAgICAgICAgcmlnaHRDU1NSdWxlID0gYCR7Zml4ZWRSaWdodENzc1J1bGVLZXl9e1xyXG4gICAgICAgICAgICAgICAgYm94LXNoYWRvdzojZDlkOWQ5IC0xMnB4IDBweCA4cHggLTEycHggaW5zZXQ7XHJcbiAgICAgICAgICAgIH1gO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIGlmICh4ID09PSAwKSB7XHJcbiAgICAgICAgICAgIC8vIOenu+mZpOW3puS+p+WbuuWumuWIl+mYtOW9seagt+W8j1xyXG4gICAgICAgICAgICBpZiAoZml4ZWRMZWZ0Q3NzUnVsZUtleSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy51dGlscy5yZW1vdmVDc3NSdWxlKGZpeGVkTGVmdENzc1J1bGVLZXksIHRoaXMuc3R5bGVFbGVtZW50LnNoZWV0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoKHggKyBlLnNyY0VsZW1lbnQub2Zmc2V0V2lkdGgpLnRvRml4ZWQoKSA9PSBlLnNyY0VsZW1lbnQuc2Nyb2xsV2lkdGgpIHtcclxuICAgICAgICAgICAgLy8g56e76Zmk5Y+z5YiZ5Zu65a6a5YiX6Zi05b2x5qC35byPXHJcbiAgICAgICAgICAgIGlmIChmaXhlZFJpZ2h0Q3NzUnVsZUtleSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy51dGlscy5yZW1vdmVDc3NSdWxlKGZpeGVkUmlnaHRDc3NSdWxlS2V5LCB0aGlzLnN0eWxlRWxlbWVudC5zaGVldCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyDmt7vliqDlt6blj7Plm7rlrprliJfmoLflvI9cclxuICAgICAgICAgICAgY29uc3QgYXJyID0gW107XHJcbiAgICAgICAgICAgIGlmIChsZWZ0Q1NTUnVsZSkge1xyXG4gICAgICAgICAgICAgICAgYXJyLnB1c2gobGVmdENTU1J1bGUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAocmlnaHRDU1NSdWxlKSB7XHJcbiAgICAgICAgICAgICAgICBhcnIucHVzaChyaWdodENTU1J1bGUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnV0aWxzLmFwcGVuZENzc1J1bGVzKGFyciwgdGhpcy5zdHlsZUVsZW1lbnQuc2hlZXQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvblNjcm9sbFgoZTogYW55KSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2hvd0hlYWRlciAmJiB0aGlzLmhlYWRlckJveCkge1xyXG4gICAgICAgICAgICBjb25zdCB4ID0gZS5zcmNFbGVtZW50LnNjcm9sbExlZnQ7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuc2Nyb2xsWCA9IHg7XHJcbiAgICAgICAgICAgIC8vIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUodGhpcy5oZWFkZXJCb3gubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCd0YWJsZScpLCAndHJhbnNmb3JtJywgYHRyYW5zbGF0ZTNkKC0ke3h9cHgsIDBweCwgMHB4KWApO1xyXG4gICAgICAgICAgICB0aGlzLmhlYWRlckJveC5uYXRpdmVFbGVtZW50LnNjcm9sbExlZnQgPSB4O1xyXG5cclxuICAgICAgICAgICAgdGhpcy5zZXRGaXhlZENvbHVtblNoYWRvdyh4LCBlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25TY3JvbGxZKGU6IGFueSkge1xyXG4gICAgICAgIGlmICh0aGlzLnZpcnR1YWxpemVkKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNjcm9sbFRvcCA9IGUudGFyZ2V0LnNjcm9sbFRvcDtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJEYXRhKHNjcm9sbFRvcCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVuZGVyRGF0YShzY3JvbGx0b3A6IG51bWJlcikge1xyXG4gICAgICAgIGNvbnN0IHsgZGF0YSwgdG9wSGlkZUhlaWdodCwgYm90dG9tSGlkZUhlaWdodCB9ID0gdGhpcy5zY3JvbGxMb2FkZXIuZ2V0Um93Tm9kZXMoc2Nyb2xsdG9wKTtcclxuICAgICAgICB0aGlzLnN0YXRlLnNjcm9sbFkgPSBzY3JvbGx0b3A7XHJcbiAgICAgICAgdGhpcy5zZXJpYWxpemVkVmFsdWUgPSBkYXRhO1xyXG4gICAgICAgIHRoaXMudG9wSGlkZUhlaWdodCA9IHRvcEhpZGVIZWlnaHQ7XHJcbiAgICAgICAgdGhpcy5ib3R0b21IaWRlSGVpZ2h0ID0gYm90dG9tSGlkZUhlaWdodDtcclxuXHJcbiAgICAgICAgdGhpcy5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgdGhpcy5zZXROZXdDb2x1bW5zV2lkdGgoKTtcclxuICAgIH1cclxuXHJcbiAgICBvblNlYXJjaFZhbHVlQ2hhbmdlKCRldmVudCkge1xyXG4gICAgICAgIGlmICghJGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMub25DbGVhclNlYXJjaFZhbHVlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNlYXJjaFZhbHVlQ2hhbmdlLmVtaXQodGhpcy5zZWFyY2hEYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNsZWFyU2VhcmNoVmFsdWUoKSB7XHJcbiAgICAgICAgdGhpcy5zZWFyY2hEYXRhLnZhbHVlID0gJyc7XHJcbiAgICAgICAgdGhpcy5zdGF0ZS5zZWFyY2hlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuY2xlYXJTZWFyY2hWYWx1ZS5lbWl0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25DZWxsQ2xpY2soZXZlbnQ6IEV2ZW50LCBjb2w6IGFueSwgbm9kZTogYW55KSB7XHJcbiAgICAgICAgdGhpcy5jZWxsQ2xpY2suZW1pdCh7IGV2ZW50LCBjb2wsIG5vZGUgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgdHJhY2tCeUZuKGluZGV4LCByb3dOb2RlKSB7XHJcbiAgICAgICAgcmV0dXJuIHJvd05vZGUuaWQ7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOagvOW8j+WMluaVsOaNrlxyXG4gICAgICovXHJcbiAgICBmb3JtYXREYXRhKGNvbDogYW55LCBkYXRhOiBhbnksIGZvcm1hdHRlcjogYW55KSB7XHJcbiAgICAgICAgLy8gY29uc3QgdmFsID0gdGhpcy51dGlscy5nZXRWYWx1ZShmaWVsZCwgZGF0YSwgdHJ1ZSApO1xyXG4gICAgICAgIGNvbnN0IHZhbCA9IHRoaXMuZ2V0Tm9kZVRleHQoY29sLCBkYXRhKTtcclxuICAgICAgICBpZiAoZm9ybWF0dGVyICYmIGZvcm1hdHRlci50eXBlID09PSAndGltZWFnbycpIHtcclxuICAgICAgICAgICAgaWYgKCFmb3JtYXR0ZXIub3B0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgZm9ybWF0dGVyLm9wdGlvbnMgPSB7IGxvY2FsZTogdGhpcy5sb2NhbGVTZXJ2aWNlLmxvY2FsZUlkfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFmb3JtYXR0ZXIub3B0aW9ucy5sb2NhbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZXIub3B0aW9ucy5sb2NhbGUgPSB0aGlzLmxvY2FsZVNlcnZpY2UubG9jYWxlSWQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29sRm9ybWF0U2VyLmZvcm1hdCh2YWwsIGRhdGEsIGZvcm1hdHRlciwge2xvY2FsZTogdGhpcy5sb2NhbGVTZXJ2aWNlLmxvY2FsZUlkIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbHVtbnNDaGFuZ2VkKCkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tDb2x1bW5PcHRpb24oKTtcclxuICAgICAgICB0aGlzLmRldGVjdENoYW5nZXMoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHR0YzJjb2x1bW5zKGxpc3Q6IFF1ZXJ5TGlzdDxUcmVlVGFibGVDb2x1bW5EaXJlY3RpdmU+KSB7XHJcbiAgICAgICAgcmV0dXJuIGxpc3QubWFwKChuOiBUcmVlVGFibGVDb2x1bW5EaXJlY3RpdmUpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGZpZWxkOiBuLmZpZWxkLFxyXG4gICAgICAgICAgICAgICAgdGl0bGU6IG4udGl0bGUsXHJcbiAgICAgICAgICAgICAgICBhbGlnbjogbi5hbGlnbixcclxuICAgICAgICAgICAgICAgIGhBbGlnbjogbi5oQWxpZ24sXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogbi53aWR0aCxcclxuICAgICAgICAgICAgICAgIGZvcm1hdHRlcjogbi5mb3JtYXR0ZXJcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlU2V0U2l6ZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5maXQpIHtcclxuICAgICAgICAgICAgY29uc3QgcGFyZW50RWwgPSB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQucGFyZW50Tm9kZTtcclxuICAgICAgICAgICAgdGhpcy5zZXRXaWR0aChwYXJlbnRFbC5vZmZzZXRXaWR0aClcclxuICAgICAgICAgICAgdGhpcy5oZWlnaHQgPSBwYXJlbnRFbC5vZmZzZXRIZWlnaHQ7XHJcblxyXG4gICAgICAgICAgICAvLyDlpoLmnpzlnKjkvb/nlKjml7bvvIzkuLrnu4Tku7borr7nva7nmoTpq5jluqbvvIzliJnku6XmraTlgLzkuLrlh4bvvIzku4XmlK/mjIEg5Zu65a6a5YC8IO+8jOS4jeaUr+aMgSDnmb7liIbmr5RcclxuICAgICAgICAgICAgaWYgKHRoaXMuZWwubmF0aXZlRWxlbWVudC5zdHlsZS5oZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgIGxldCBoID0gdGhpcy5lbC5uYXRpdmVFbGVtZW50LnN0eWxlLmhlaWdodDtcclxuICAgICAgICAgICAgICAgIGlmIChoLmluZGV4T2YoJ3B4JykgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGggPSBwYXJzZUludChoLnJlcGxhY2UoJ3B4JywgJycpLCAxMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGVpZ2h0ID0gaDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZW5kZXJWaXJ0dWFsUm93Tm9kZXMobm9kZVBvc1kgPSBudWxsKSB7XHJcbiAgICAgICAgaWYgKHRoaXMudmlydHVhbGl6ZWQpIHtcclxuICAgICAgICAgICAgY29uc3Qgc2Nyb2xsWSA9IG5vZGVQb3NZIHx8IHRoaXMuc3RhdGUuc2Nyb2xsWTtcclxuICAgICAgICAgICAgY29uc3QgX3Jvd25vZGVzID0gdGhpcy5zY3JvbGxMb2FkZXIuZ2V0Um93Tm9kZXMoc2Nyb2xsWSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2VyaWFsaXplZFZhbHVlID0gX3Jvd25vZGVzLmRhdGE7XHJcbiAgICAgICAgICAgIHRoaXMudG9wSGlkZUhlaWdodCA9IF9yb3dub2Rlcy50b3BIaWRlSGVpZ2h0O1xyXG4gICAgICAgICAgICB0aGlzLmJvdHRvbUhpZGVIZWlnaHQgPSBfcm93bm9kZXMuYm90dG9tSGlkZUhlaWdodDtcclxuICAgICAgICAgICAgdGhpcy5kZXRlY3RDaGFuZ2VzKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAobm9kZVBvc1kpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wc1JlZi5kaXJlY3RpdmVSZWYuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LnNjcm9sbFRvcCA9IG5vZGVQb3NZO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIDIwKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVNlcmlhbGl6ZWRWYWx1ZShub2RlUG9zWTogYW55ID0gbnVsbCkge1xyXG4gICAgICAgIHRoaXMuc2VyaWFsaXplZFZhbHVlID0gW107XHJcbiAgICAgICAgdGhpcy5zZWFyY2hIYW5kbGUuYWxsTm9kZXMgPSBbXTtcclxuICAgICAgICB0aGlzLnN0YXRlLnJvd05vZGVzID0gW107XHJcblxyXG4gICAgICAgIHRoaXMuc2VyaWFsaXplTm9kZXMobnVsbCwgdGhpcy5kYXRhLCAwLCB0cnVlKTtcclxuICAgICAgICBpZiAodGhpcy52aXJ0dWFsaXplZCAmJiB0aGlzLmZpeGVkSGVhZGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyVmlydHVhbFJvd05vZGVzKG5vZGVQb3NZKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnNlcmlhbGl6ZWRWYWx1ZSA9IHRoaXMuc3RhdGUucm93Tm9kZXM7XHJcbiAgICAgICAgICAgIHRoaXMuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgICAgICAvLyBpZiAoZW1pdENoYW5nZXMpIHtcclxuICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWwhuagkeiKgueCueaVsOaNruW6j+WIl+WMluS4ulJvd05vZGVcclxuICAgICAqIEBwYXJhbSBwYXJlbnQg54i257qn6IqC54K5XHJcbiAgICAgKiBAcGFyYW0gbm9kZXMg5qCR6IqC54K56ZuG5ZCIXHJcbiAgICAgKiBAcGFyYW0gbGV2ZWwg57qn5YirXHJcbiAgICAgKiBAcGFyYW0gdmlzaWJsZSDmmK/lkKblj6/op4FcclxuICAgICAqL1xyXG4gICAgc2VyaWFsaXplTm9kZXMocGFyZW50OiBUcmVlTm9kZSwgbm9kZXM6IFRyZWVOb2RlW10sIGxldmVsOiBudW1iZXIsIHZpc2libGU6IGJvb2xlYW4sIHBhcmVudElkcz86IGFueVtdKSB7XHJcbiAgICAgICAgaWYgKG5vZGVzICYmIG5vZGVzLmxlbmd0aCkge1xyXG5cclxuICAgICAgICAgICAgaWYgKCFub2Rlc1swXS5kYXRhKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG5vZGVzLmZvckVhY2goKG5vZGUsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBub2RlLnBhcmVudCA9IHBhcmVudDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIW5vZGUuaGFzT3duUHJvcGVydHkoJ3NlbGVjdGFibGUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5vZGUuc2VsZWN0YWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFub2RlLmhhc093blByb3BlcnR5KCdzaG93SWNvbicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5zaG93SWNvbiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub25seVNlbGVjdExlYWYgPT09ICd5ZXMnICYmIG5vZGUuc2VsZWN0YWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5vZGUuc2VsZWN0YWJsZSA9ICEhbm9kZS5sZWFmO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc3Qga2V5aWQgPSBub2RlLmRhdGFbdGhpcy5pZEZpZWxkXTtcclxuICAgICAgICAgICAgICAgIG5vZGUuaWQgPSBrZXlpZDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlzU2VsZWN0ZWQgPSB0aGlzLmZpbmRJbmRleEluU2VsZWN0aW9uKG5vZGUpID4gLTE7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpc0NoZWNrZWQgPSB0aGlzLmZpbmRJbmRleEluQ2hlY2tlZHMobm9kZSkgPiAtMTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlzTGFzdCA9IGluZGV4ID09PSBub2Rlcy5sZW5ndGggLSAxO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaXNGaXJzdCA9IGluZGV4ID09PSAwO1xyXG4gICAgICAgICAgICAgICAgbGV0IHBhcmVudHMgPSBbXTtcclxuICAgICAgICAgICAgICAgIGxldCBwYXJlbnRSbiA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICBpZiAocGFyZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyZW50SUQgPSBwYXJlbnQuZGF0YVt0aGlzLmlkRmllbGRdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IF9wYXJlbnRzID0gcGFyZW50SWRzIHx8IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudHMgPSBwYXJlbnRzLmNvbmNhdChfcGFyZW50cy5tYXAobiA9PiBuKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50cy5wdXNoKHBhcmVudElEKTtcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnRSbiA9IHRoaXMuc3RhdGUucm93Tm9kZXMuZmluZChuID0+IG4uaWQgPT09IHBhcmVudC5pZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3Qgcm93Tm9kZTogUm93Tm9kZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBpZDoga2V5aWQsXHJcbiAgICAgICAgICAgICAgICAgICAgbm9kZSxcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgbGV2ZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgdmlzaWJsZTogdmlzaWJsZSAmJiAocGFyZW50ID8gcGFyZW50LmV4cGFuZGVkIDogdHJ1ZSksXHJcbiAgICAgICAgICAgICAgICAgICAgaXNTZWxlY3RlZCxcclxuICAgICAgICAgICAgICAgICAgICBpc0NoZWNrZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50cyxcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnRSb3dOb2RlOiBwYXJlbnRSbixcclxuICAgICAgICAgICAgICAgICAgICBpbmRleDogdGhpcy5zdGF0ZS5yb3dOb2Rlcy5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICAgICAgbGFzdDogaXNMYXN0LFxyXG4gICAgICAgICAgICAgICAgICAgIGZpcnN0OiBpc0ZpcnN0XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5zZXJpYWxpemVkVmFsdWUucHVzaChyb3dOb2RlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUucm93Tm9kZXMucHVzaChyb3dOb2RlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VyaWFsaXplTm9kZXMobm9kZSwgbm9kZS5jaGlsZHJlbiwgbGV2ZWwgKyAxLCByb3dOb2RlLnZpc2libGUsIHBhcmVudHMpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDliKTmlq3mjIflrprnmoToioLngrnmmK/lkKbooqvpgInkuK1cclxuICAgICAqIEBwYXJhbSBub2RlIOagkeiKgueCuVxyXG4gICAgICovXHJcbiAgICBpc1NlbGVjdGVkKG5vZGU6IFRyZWVOb2RlKTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2luZ2xlU2VsZWN0KSB7XHJcbiAgICAgICAgICAgIGlmIChub2RlICYmIHRoaXMuc2VsZWN0ZWRSb3cpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBub2RlLmRhdGFbdGhpcy5pZEZpZWxkXSA9PT0gdGhpcy5zZWxlY3RlZFJvdy5kYXRhW3RoaXMuaWRGaWVsZF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGlvbnMgJiYgdGhpcy5zZWxlY3Rpb25zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0aW9ucy5maW5kSW5kZXgobiA9PiBuLmRhdGFbdGhpcy5pZEZpZWxkXSA9PT0gbm9kZS5kYXRhW3RoaXMuaWRGaWVsZF0pID4gLTE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKiDliKTmlq3lvZPliY3oioLngrnnmoTpkqnpgInnirbmgIEgKi9cclxuICAgIGlzQ2hlY2tlZChub2RlOiBUcmVlTm9kZSk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmIChub2RlICYmIHRoaXMuY2hlY2tlZHMpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tlZHMgaW5zdGFuY2VvZiBBcnJheSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2hlY2tlZHMuZmluZEluZGV4KCh2KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHYuZGF0YVt0aGlzLmlkRmllbGRdID09PSBub2RlLmRhdGFbdGhpcy5pZEZpZWxkXTtcclxuICAgICAgICAgICAgICAgIH0pID4gLTE7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwcml2YXRlIHVuU2VsZWN0ZWRDdXJyZW50Um93RW1pdCgpIHtcclxuICAgICAgICBjb25zdCBjdXJyU2VsZWN0ZWQgPSB0aGlzLnNlbGVjdGVkUm93O1xyXG4gICAgICAgIGlmIChjdXJyU2VsZWN0ZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5ub2RlVW5TZWxlY3QuZW1pdCh7IG5vZGU6IGN1cnJTZWxlY3RlZCwgdHlwZTogJ3JvdycsIGluc3RhbmNlOiB0aGlzIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9zaW5nbGVTZWxlY3ROb2RlKGU6IFNlbGVjdEV2ZW50QXJncykge1xyXG5cclxuICAgICAgICB0aGlzLmNsZWFyU2VsZWN0aW9ucygpO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRSb3cgPSBlLnJvd05vZGUubm9kZTtcclxuICAgICAgICB0aGlzLnNlbGVjdFJvd0luZGV4ID0gZS5yb3dJbmRleDtcclxuICAgICAgICB0aGlzLnNlbGVjdGlvbnMgPSBbZS5yb3dOb2RlLm5vZGVdO1xyXG4gICAgICAgIGUucm93Tm9kZS5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2hvd0NoZWNrYm94KSB7XHJcbiAgICAgICAgICAgIGUucm93Tm9kZS5pc0NoZWNrZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLmNsZWFyQ2hlY2tlZHMoKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRDaGVja2VkcyhlLnJvd05vZGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgc3A6IE5vZGVTZWxlY3RlZFBhcmFtID0ge1xyXG4gICAgICAgICAgICBvcmlnaW5hbEV2ZW50OiBlLm9yaWdpbmFsRXZlbnQsXHJcbiAgICAgICAgICAgIG5vZGU6IGUucm93Tm9kZS5ub2RlLCB0eXBlOiAncm93JyxcclxuICAgICAgICAgICAgaW5kZXg6IGUucm93SW5kZXgsXHJcbiAgICAgICAgICAgIHBhcmVudHM6IGUucm93Tm9kZS5wYXJlbnRzLFxyXG4gICAgICAgICAgICBpbnN0YW5jZTogdGhpc1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5ub2RlU2VsZWN0ZWQuZW1pdChzcCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfc2luZ2xlVW5TZWxlY3ROb2RlKGU6IFNlbGVjdEV2ZW50QXJncykge1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRSb3cgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0Um93SW5kZXggPSAtMTtcclxuICAgICAgICBlLnJvd05vZGUuaXNTZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgIGUucm93Tm9kZS5pc0NoZWNrZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnNlbGVjdGlvbnMgPSBbXTtcclxuXHJcbiAgICAgICAgdGhpcy5ub2RlVW5TZWxlY3QuZW1pdCh7XHJcbiAgICAgICAgICAgIG9yaWdpbmFsRXZlbnQ6IGUub3JpZ2luYWxFdmVudCxcclxuICAgICAgICAgICAgbm9kZTogZS5yb3dOb2RlLm5vZGUsIHR5cGU6ICdyb3cnLCBwYXJlbnRzOiBlLnJvd05vZGUucGFyZW50cyxcclxuICAgICAgICAgICAgaW5zdGFuY2U6IHRoaXNcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9fc2luZ2xlU2VsZWN0Tm9kZShldmVudDogU2VsZWN0RXZlbnRBcmdzLCBzZWxlY3RlZCA9IGZhbHNlKSB7XHJcbiAgICAgICAgaWYgKCFzZWxlY3RlZCkge1xyXG4gICAgICAgICAgICB0aGlzLnVuU2VsZWN0ZWRDdXJyZW50Um93RW1pdCgpO1xyXG4gICAgICAgICAgICB0aGlzLl9zaW5nbGVTZWxlY3ROb2RlKGV2ZW50KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMua2VlcFNlbGVjdCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2luZ2xlVW5TZWxlY3ROb2RlKGV2ZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9fbXVsdGlTZWxlY3ROb2RlKGV2ZW50OiBTZWxlY3RFdmVudEFyZ3MsIHNlbGVjdGVkKSB7XHJcbiAgICAgICAgY29uc3Qgcm93Tm9kZSA9IGV2ZW50LnJvd05vZGU7XHJcbiAgICAgICAgaWYgKHNlbGVjdGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMudW5TZWxlY3RlZEN1cnJlbnRSb3dFbWl0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2luZ2xlU2VsZWN0V2hlbk11bHRpU2VsZWN0KHJvd05vZGUsIHRydWUpO1xyXG4gICAgICAgICAgICB0aGlzLm5vZGVTZWxlY3RlZC5lbWl0KHtcclxuICAgICAgICAgICAgICAgIG9yaWdpbmFsRXZlbnQ6IGV2ZW50Lm9yaWdpbmFsRXZlbnQsIG5vZGU6IHJvd05vZGUubm9kZSxcclxuICAgICAgICAgICAgICAgIHR5cGU6ICdyb3cnLCBpbmRleDogZXZlbnQucm93SW5kZXgsIHBhcmVudHM6IHJvd05vZGUucGFyZW50cyxcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlOiB0aGlzXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5rZWVwU2VsZWN0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNpbmdsZVNlbGVjdFdoZW5NdWx0aVNlbGVjdChyb3dOb2RlLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGVVblNlbGVjdC5lbWl0KHtcclxuICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbEV2ZW50OiBldmVudC5vcmlnaW5hbEV2ZW50LCBub2RlOiByb3dOb2RlLm5vZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3JvdycsIGluZGV4OiBldmVudC5yb3dJbmRleCwgcGFyZW50czogcm93Tm9kZS5wYXJlbnRzLFxyXG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlOiB0aGlzXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOihjOWNleWHu+S6i+S7tlxyXG4gICAgICovXHJcbiAgICBoYW5kbGVSb3dDbGljayhldmVudDogU2VsZWN0RXZlbnRBcmdzKSB7XHJcbiAgICAgICAgY29uc3Qgcm93Tm9kZSA9IGV2ZW50LnJvd05vZGU7XHJcbiAgICAgICAgcm93Tm9kZS5ub2RlWydlbGVtZW50UmVmJ10gPSBldmVudC5vcmlnaW5hbEV2ZW50LnRhcmdldDtcclxuICAgICAgICBjb25zdCBzZWxlY3RlZCA9IHRoaXMuaXNTZWxlY3RlZChyb3dOb2RlLm5vZGUpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zaW5nbGVTZWxlY3QpIHtcclxuICAgICAgICAgICAgdGhpcy5fX3NpbmdsZVNlbGVjdE5vZGUoZXZlbnQsIHNlbGVjdGVkKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByb3dOb2RlLmluZGV0ZXJtaW5hdGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKHRoaXMub25seVNlbGVjdFNlbGYpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX19tdWx0aVNlbGVjdE5vZGUoZXZlbnQsICFzZWxlY3RlZCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByb3dOb2RlLmlzU2VsZWN0ZWQgPSAhc2VsZWN0ZWQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnJvd05vZGVzLmZpbmQobiA9PiBuLmlkID09PSByb3dOb2RlLmlkKS5pc1NlbGVjdGVkID0gIXNlbGVjdGVkO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTZWxlY3Rpb25zKHJvd05vZGUpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHJvd1NlbGVjdENoYW5nZVBhcmFtczogTm9kZVNlbGVjdGVkUGFyYW0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxFdmVudDogZXZlbnQub3JpZ2luYWxFdmVudCwgbm9kZTogcm93Tm9kZS5ub2RlLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdyb3cnLCBpbmRleDogZXZlbnQucm93SW5kZXgsIHBhcmVudHM6IHJvd05vZGUucGFyZW50cyxcclxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZTogdGhpc1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocm93Tm9kZS5pc1NlbGVjdGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub2RlU2VsZWN0ZWQuZW1pdChyb3dTZWxlY3RDaGFuZ2VQYXJhbXMpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vZGVVblNlbGVjdC5lbWl0KHJvd1NlbGVjdENoYW5nZVBhcmFtcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrT25TZWxlY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICByb3dOb2RlLmlzQ2hlY2tlZCA9ICFzZWxlY3RlZDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnJvd05vZGVzLmZpbmQobiA9PiBuLmlkID09PSByb3dOb2RlLmlkKS5pc0NoZWNrZWQgPSAhc2VsZWN0ZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRDaGVja2Vkcyhyb3dOb2RlKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBub2RlcyA9IHRoaXMuY2FzY2FkZU5vZGVzKHJvd05vZGUsIHJvd05vZGUuaXNDaGVja2VkKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnR0U2VydmljZS5vbkNoYW5nZUNoZWNrYm94U3RhdHVzKHJvd05vZGUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAocm93Tm9kZS5pc0NoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub2RlQ2hlY2tlZC5lbWl0KHsgb3JpZ2luYWxFdmVudDogZXZlbnQsIG5vZGU6IHJvd05vZGUubm9kZSwgbm9kZXMsIGluc3RhbmNlOiB0aGlzIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm9kZVVuQ2hlY2tlZC5lbWl0KHsgb3JpZ2luYWxFdmVudDogZXZlbnQsIG5vZGU6IHJvd05vZGUubm9kZSwgbm9kZXMsIGluc3RhbmNlOiB0aGlzIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrT25TZWxlY3QpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlkcyA9IHRoaXMuY2hlY2tlZHMubWFwKHRuID0+IHRuLmlkKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tWYWx1ZXMgPSBpZHM7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrVmFsdWVzQ2hhbmdlLmVtaXQoaWRzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDluKbmnIljaGVja2JveCDnmoTljZXpgIlcclxuICAgICAqIEBwYXJhbSByb3dOb2RlIOW9k+WJjeiKgueCuVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHNpbmdsZVNlbGVjdFdoZW5NdWx0aVNlbGVjdChyb3dOb2RlOiBSb3dOb2RlLCBmbGFnOiBib29sZWFuKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY2hlY2tPblNlbGVjdCkge1xyXG4gICAgICAgICAgICByb3dOb2RlLmlzQ2hlY2tlZCA9IGZsYWc7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0Q2hlY2tlZHMocm93Tm9kZSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNhc2NhZGVOb2Rlcyhyb3dOb2RlLCByb3dOb2RlLmlzQ2hlY2tlZCk7XHJcblxyXG4gICAgICAgICAgICBpZiAocm93Tm9kZS5pc0NoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubm9kZUNoZWNrZWQuZW1pdCh7IG9yaWdpbmFsRXZlbnQ6IGV2ZW50LCBub2RlOiByb3dOb2RlLm5vZGUsIGluc3RhbmNlOiB0aGlzIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ub2RlVW5DaGVja2VkLmVtaXQoeyBvcmlnaW5hbEV2ZW50OiBldmVudCwgbm9kZTogcm93Tm9kZS5ub2RlLCBpbnN0YW5jZTogdGhpcyB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jbGVhclNlbGVjdGlvbnMoKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMub25seVNlbGVjdFNlbGYpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvdyA9IHJvd05vZGUubm9kZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcm93Tm9kZS5pc1NlbGVjdGVkID0gZmxhZztcclxuICAgICAgICB0aGlzLnNldFNlbGVjdGlvbnMocm93Tm9kZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZWxlY3RXaGVuQ2hlY2tlZChyb3dOb2RlOiBSb3dOb2RlLCBmbGFnOiBib29sZWFuLCBldmVudDogYW55KSB7XHJcbiAgICAgICAgaWYgKHJvd05vZGUubm9kZS5zZWxlY3RhYmxlKSB7XHJcbiAgICAgICAgICAgIHJvd05vZGUuaXNDaGVja2VkID0gZmxhZztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZXRDaGVja2Vkcyhyb3dOb2RlLCBmYWxzZSk7XHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0T25DaGVjaykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5vbmx5U2VsZWN0U2VsZikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGZsYWcgfHwgKHRoaXMuc2VsZWN0ZWRSb3cgJiYgdGhpcy5zZWxlY3RlZFJvdy5pZCA9PT0gcm93Tm9kZS5pZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyU2VsZWN0aW9ucygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5zaW5nbGVTZWxlY3QgJiYgdGhpcy5zaG93Q2hlY2tib3gpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJDaGVja2VkcygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChyb3dOb2RlLm5vZGUuc2VsZWN0YWJsZSkge1xyXG4gICAgICAgICAgICAgICAgcm93Tm9kZS5pc1NlbGVjdGVkID0gZmxhZztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnNldFNlbGVjdGlvbnMocm93Tm9kZSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLnJvd05vZGVzLmZpbmQobiA9PiBuLmlkID09PSByb3dOb2RlLmlkKS5pc1NlbGVjdGVkID0gZmxhZztcclxuXHJcbiAgICAgICAgICAgIGlmIChyb3dOb2RlLmlzU2VsZWN0ZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubm9kZVNlbGVjdGVkLmVtaXQoeyBvcmlnaW5hbEV2ZW50OiBldmVudCwgbm9kZTogcm93Tm9kZS5ub2RlLCBpbnN0YW5jZTogdGhpcywgdHlwZTogJ2NoZWNrYm94JyB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubm9kZVVuU2VsZWN0LmVtaXQoeyBvcmlnaW5hbEV2ZW50OiBldmVudCwgbm9kZTogcm93Tm9kZS5ub2RlLCBpbnN0YW5jZTogdGhpcywgdHlwZTogJ2NoZWNrYm94JyB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGlzSW5BcnJheShyb3dOb2RlOiBSb3dOb2RlLCBpdGVtczogVHJlZU5vZGVbXSkge1xyXG4gICAgICAgIGlmIChpdGVtcyAmJiBpdGVtcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaXRlbXMuZmluZEluZGV4KGkgPT4gaS5kYXRhW3RoaXMuaWRGaWVsZF0gPT09IHJvd05vZGUuaWQpID4gLTE7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXRTZWxlY3Rpb25zKHJvd05vZGU6IFJvd05vZGUpIHtcclxuICAgICAgICBpZiAocm93Tm9kZS5pc1NlbGVjdGVkKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5zZWxlY3Rpb25zKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbnMgPSBbXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNJbkFycmF5KHJvd05vZGUsIHRoaXMuc2VsZWN0aW9ucykpIHtcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMuc2VsZWN0aW9ucyA9IFsuLi50aGlzLnNlbGVjdGlvbnMsIHJvd05vZGUubm9kZV07XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbnMucHVzaChyb3dOb2RlLm5vZGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IHRoaXMuc2VsZWN0aW9ucy5maW5kSW5kZXgoKHRuOiBUcmVlTm9kZSkgPT4gdG4uZGF0YVt0aGlzLmlkRmllbGRdID09PSByb3dOb2RlLm5vZGUuZGF0YVt0aGlzLmlkRmllbGRdKTtcclxuICAgICAgICAgICAgICAgIGlmIChpICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9ucy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLnNlbGVjdGlvbnMgPSB0aGlzLnNlbGVjdGlvbnMuZmlsdGVyKCh0bjogVHJlZU5vZGUpID0+IHRuLmRhdGFbdGhpcy5pZEZpZWxkXSAhPT0gcm93Tm9kZS5ub2RlLmRhdGFbdGhpcy5pZEZpZWxkXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXRDaGVja2Vkcyhyb3dOb2RlOiBSb3dOb2RlLCB1cGRhdGVkID0gdHJ1ZSkge1xyXG4gICAgICAgIGlmIChyb3dOb2RlLmlzQ2hlY2tlZCkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuY2hlY2tlZHMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tlZHMgPSBbXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNJbkFycmF5KHJvd05vZGUsIHRoaXMuY2hlY2tlZHMpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLmNoZWNrZWRzID0gWyAuLi50aGlzLmNoZWNrZWRzLCByb3dOb2RlLm5vZGVdO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja2Vkcy5wdXNoKHJvd05vZGUubm9kZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jaGVja2Vkcykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IHRoaXMuY2hlY2tlZHMuZmluZEluZGV4KCh0bjogVHJlZU5vZGUpID0+IHRuLmRhdGFbdGhpcy5pZEZpZWxkXSA9PT0gcm93Tm9kZS5ub2RlLmRhdGFbdGhpcy5pZEZpZWxkXSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaSAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWRzLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIHRoaXMuY2hlY2tlZHMgPSB0aGlzLmNoZWNrZWRzLmZpbHRlcigodG46IFRyZWVOb2RlKSA9PiB0bi5kYXRhW3RoaXMuaWRGaWVsZF0gIT09IHJvd05vZGUubm9kZS5kYXRhW3RoaXMuaWRGaWVsZF0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodXBkYXRlZCkge1xyXG4gICAgICAgICAgICB0aGlzLmNoZWNrZWRzID0gWyAuLi50aGlzLmNoZWNrZWRzXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXREaWZmcmVudERhdGEoZGF0YTogVHJlZU5vZGVbXSkge1xyXG4gICAgICAgIGlmIChkYXRhLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBjb25zdCBfbm9kZXMgPSBbXTtcclxuICAgICAgICAgICAgZGF0YS5mb3JFYWNoKG4gPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKF9ub2Rlcy5maW5kSW5kZXgodCA9PiB0LmRhdGFbdGhpcy5pZEZpZWxkXSA9PT0gbi5kYXRhW3RoaXMuaWRGaWVsZF0pID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIF9ub2Rlcy5wdXNoKG4pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIF9ub2RlcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY2FzY2FkZUNoZWNrZWROb2RlKHJvd05vZGU6IFJvd05vZGUsIGNoZWNrZWQ6IGJvb2xlYW4sIHN5bmMgPSBmYWxzZSk6IFRyZWVOb2RlW10ge1xyXG4gICAgICAgIGNvbnN0IG5vZGVzOiBUcmVlTm9kZVtdID0gW107XHJcbiAgICAgICAgaWYgKHJvd05vZGUubm9kZS5zZWxlY3RhYmxlKSB7XHJcbiAgICAgICAgICAgIHJvd05vZGUuaXNDaGVja2VkID0gY2hlY2tlZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZXRDaGVja2Vkcyhyb3dOb2RlLCBmYWxzZSk7XHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0T25DaGVjaykge1xyXG4gICAgICAgICAgICBpZiAoc3luYykge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhdHVzID0gdGhpcy5pc0luZGV0ZXJtaW5hdGUocm93Tm9kZSkgIT09IDI7XHJcbiAgICAgICAgICAgICAgICBjaGVja2VkID0gc3RhdHVzID8gY2hlY2tlZDogZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChyb3dOb2RlLm5vZGUuc2VsZWN0YWJsZSkge1xyXG4gICAgICAgICAgICAgICAgcm93Tm9kZS5pc1NlbGVjdGVkID0gY2hlY2tlZDtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U2VsZWN0aW9ucyhyb3dOb2RlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXRoaXMuaXNJbkFycmF5KHJvd05vZGUsIG5vZGVzKSkge1xyXG4gICAgICAgICAgICBub2Rlcy5wdXNoKHJvd05vZGUubm9kZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBub2RlcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWQkeS4i+e6p+iBlOmAieS4rVxyXG4gICAgICogQHBhcmFtIG5vZGUg5b2T5YmN6IqC54K5XHJcbiAgICAgKiBAcGFyYW0gY2hlY2tlZCDpgInkuK3nirbmgIFcclxuICAgICAqIOi/lOWbnuWPl+W9seWTjeeahOihjFxyXG4gICAgICovXHJcbiAgICBwcm9wYWdhdGVTZWxlY3Rpb25Eb3duKHJvd05vZGU6IFJvd05vZGUsIGNoZWNrZWQ6IGJvb2xlYW4pIHtcclxuICAgICAgICBsZXQgbm9kZXMgPSB0aGlzLmNhc2NhZGVDaGVja2VkTm9kZShyb3dOb2RlLCBjaGVja2VkKTtcclxuICAgICAgICBpZiAodGhpcy5jYXNjYWRlQ2hlY2sgJiYgdGhpcy5jYXNjYWRlRG93biAmJiByb3dOb2RlLm5vZGUuY2hpbGRyZW4gJiYgcm93Tm9kZS5ub2RlLmNoaWxkcmVuLmxlbmd0aCkge1xyXG4gICAgICAgICAgICByb3dOb2RlLm5vZGUuY2hpbGRyZW4uZm9yRWFjaCgodiwgaSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgcm4gPSB0aGlzLnN0YXRlLnJvd05vZGVzLmZpbmQoKHJvdzogUm93Tm9kZSkgPT4gcm93LmlkID09PSB2LmRhdGFbdGhpcy5pZEZpZWxkXSk7XHJcbiAgICAgICAgICAgICAgICBpZiAocm4pIHtcclxuICAgICAgICAgICAgICAgICAgICBybi5pbmRldGVybWluYXRlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJuLm5vZGUuc2VsZWN0YWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBybi5pc0NoZWNrZWQgPSBjaGVja2VkO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBub2RlcyA9IG5vZGVzLmNvbmNhdCh0aGlzLnByb3BhZ2F0ZVNlbGVjdGlvbkRvd24ocm4sIGNoZWNrZWQpKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnR0U2VydmljZS5vbkNoYW5nZUNoZWNrYm94U3RhdHVzKHJuKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbm9kZXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlkJHkuIrnuqfogZTpgInkuK1cclxuICAgICAqL1xyXG4gICAgcHJvcGFnYXRlU2VsZWN0aW9uVXAocm93Tm9kZTogUm93Tm9kZSwgY2hlY2tlZDogYm9vbGVhbikge1xyXG4gICAgICAgIGNvbnN0IG5vZGVzID0gdGhpcy5jYXNjYWRlQ2hlY2tlZE5vZGUocm93Tm9kZSwgY2hlY2tlZCk7XHJcbiAgICAgICAgaWYgKHRoaXMuY2FzY2FkZUNoZWNrICYmIHRoaXMuY2FzY2FkZVVwICYmIHJvd05vZGUubm9kZS5wYXJlbnQpIHtcclxuICAgICAgICAgICAgaWYgKHJvd05vZGUucGFyZW50cyAmJiByb3dOb2RlLnBhcmVudHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBybnM6IFJvd05vZGVbXSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgcm93Tm9kZS5wYXJlbnRzLmZvckVhY2goKG4sIGkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBybiA9IHRoaXMuZmluZFJvd05vZGUobik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJuICYmIHJuLm5vZGUuc2VsZWN0YWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBybi5pc0NoZWNrZWQgPSBjaGVja2VkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGVja2VkTm9kZXMgPSB0aGlzLmNhc2NhZGVDaGVja2VkTm9kZShybiwgY2hlY2tlZCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGVja2VkTm9kZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2Rlcy5wdXNoKGNoZWNrZWROb2Rlc1swXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcm5zLnB1c2gocm4pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHJucy5yZXZlcnNlKCkuZm9yRWFjaChybiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDaGVja2JveFN0YXR1cyhybik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIHJldHVybiBub2RlcztcclxuICAgIH1cclxuXHJcbiAgICAvLyDoioLngrnnirbmgIHvvIjpgInkuK3vvIzli77pgInvvInlkIzmraXmm7TmlrBcclxuICAgIHByaXZhdGUgdXBkYXRlTm9kZVN0YXR1cygpIHtcclxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5zZWFyY2hlZCkge1xyXG4gICAgICAgICAgICBjb25zdCByb3dOb2RlcyA9IHRoaXMuc3RhdGUuc2VhcmNoUm93Tm9kZXM7XHJcbiAgICAgICAgICAgIGlmICghcm93Tm9kZXMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByb3dOb2Rlcy5mb3JFYWNoKHJuID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNoZWNrZWRJdGVtOiBSb3dOb2RlID0gdGhpcy5zdGF0ZS5yb3dOb2Rlcy5maW5kKG4gPT4gbi5pZCA9PT0gcm4uaWQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGNoa2VkID0gY2hlY2tlZEl0ZW0gPyBjaGVja2VkSXRlbS5pc0NoZWNrZWQgOiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHJuLmluZGV0ZXJtaW5hdGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHJuLmlzQ2hlY2tlZCA9IGNoa2VkO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdE9uQ2hlY2spIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2hlY2tlZEl0ZW0uaXNTZWxlY3RlZCAhPSBybi5pc0NoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZEl0ZW0uaXNTZWxlY3RlZCA9IGNoZWNrZWRJdGVtLmlzQ2hlY2tlZDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcm4uaXNTZWxlY3RlZCA9IGNoZWNrZWRJdGVtLmlzU2VsZWN0ZWQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdE9uQ2hlY2spIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUucm93Tm9kZXMuZm9yRWFjaChybiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMub25seVNlbGVjdFNlbGYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnNlbGVjdGlvbnMgfHwgIXRoaXMuc2VsZWN0aW9ucy5sZW5ndGggKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBybi5pc1NlbGVjdGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3Rpb25zWzBdLmlkID09PSBybi5pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJuLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBybi5pc1NlbGVjdGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocm4uaXNTZWxlY3RlZCAhPSBybi5pc0NoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJuLmlzU2VsZWN0ZWQgPSBybi5pc0NoZWNrZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOe6p+iBlOmAieaLqeiKgueCuVxyXG4gICAgICogQHBhcmFtIHJvd05vZGUg5b2T5YmN6IqC54K5XHJcbiAgICAgKiBAcGFyYW0gY2hlY2tlZCDmmK/lkKbpkqnpgIlcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBjYXNjYWRlTm9kZXMocm93Tm9kZTogUm93Tm9kZSwgY2hlY2tlZDogYm9vbGVhbikge1xyXG4gICAgICAgIGxldCBjaGVja2VkTm9kZXMgPSB0aGlzLnByb3BhZ2F0ZVNlbGVjdGlvbkRvd24ocm93Tm9kZSwgY2hlY2tlZCk7XHJcbiAgICAgICAgY2hlY2tlZE5vZGVzID0gY2hlY2tlZE5vZGVzLmNvbmNhdCh0aGlzLnByb3BhZ2F0ZVNlbGVjdGlvblVwKHJvd05vZGUsIGNoZWNrZWQpKTtcclxuICAgICAgICBjaGVja2VkTm9kZXMgPSB0aGlzLmdldERpZmZyZW50RGF0YShjaGVja2VkTm9kZXMpO1xyXG5cclxuICAgICAgICB0aGlzLnVwZGF0ZU5vZGVTdGF0dXMoKTtcclxuXHJcbiAgICAgICAgdGhpcy51cGRhdGVBbGxDaGVja2JveFN0YXR1cygpO1xyXG5cclxuICAgICAgICByZXR1cm4gY2hlY2tlZE5vZGVzLmZpbHRlcihuID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIG4uc2VsZWN0YWJsZTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOihjENoZWNrYm94IOmAieS4reWPmOWMluS6i+S7tlxyXG4gICAgICogQHBhcmFtIGV2ZW50IOm8oOagh+eCueWHu+S6i+S7tuWvueixoVxyXG4gICAgICogQHBhcmFtIHJvd05vZGUg5b2T5YmN5qCR6IqC54K5XHJcbiAgICAgKi9cclxuICAgIHRvZ2dsZU5vZGVXaXRoQ2hlY2tib3goZXZlbnQ6IEV2ZW50LCByb3dOb2RlOiBSb3dOb2RlLCBjaGVja2VkOiBib29sZWFuKTogYW55IHtcclxuICAgICAgICB0aGlzLnN0YXRlLnJvd05vZGVzLmZpbmQobiA9PiBuLmlkID09PSByb3dOb2RlLmlkKS5pc0NoZWNrZWQgPSBjaGVja2VkO1xyXG4gICAgICAgIHJvd05vZGUuaW5kZXRlcm1pbmF0ZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICBjb25zdCBkYXRhID0gdGhpcy5jYXNjYWRlTm9kZXMocm93Tm9kZSwgY2hlY2tlZCk7XHJcblxyXG4gICAgICAgIHRoaXMudHRTZXJ2aWNlLm9uQ2hhbmdlQ2hlY2tib3hTdGF0dXMocm93Tm9kZSk7XHJcbiAgICAgICAgaWYgKGNoZWNrZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5ub2RlQ2hlY2tlZC5lbWl0KHsgb3JpZ2luYWxFdmVudDogZXZlbnQsIG5vZGU6IHJvd05vZGUubm9kZSwgbm9kZXM6IGRhdGEsIGluc3RhbmNlOiB0aGlzIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZVVuQ2hlY2tlZC5lbWl0KHsgb3JpZ2luYWxFdmVudDogZXZlbnQsIG5vZGU6IHJvd05vZGUubm9kZSwgbm9kZXM6IGRhdGEsIGluc3RhbmNlOiB0aGlzIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zZWxlY3RXaGVuQ2hlY2tlZChyb3dOb2RlLCBjaGVja2VkLCBldmVudCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLm9ubHlTZWxlY3RTZWxmICYmIGNoZWNrZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvdyA9IHJvd05vZGUubm9kZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuY2hlY2tlZHMgPSBbLi4udGhpcy5jaGVja2Vkc107XHJcbiAgICAgICAgdGhpcy5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlhajpgIlcclxuICAgICAqIEBwYXJhbSBldmVudCDpvKDmoIfkuovku7blr7nosaFcclxuICAgICAqIEBwYXJhbSBjaGVja2VkIOaYr+WQpumAieS4rVxyXG4gICAgICovXHJcbiAgICB0b2dnbGVOb2Rlc1dpdGhDaGVja2JveChldmVudDogRXZlbnQsIGNoZWNrZWQ6IGJvb2xlYW4pIHtcclxuICAgICAgICBpZiAoY2hlY2tlZCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5kYXRhICYmIHRoaXMuZGF0YS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tBbGxOb2Rlcyh7IG9yaWdpbmFsRXZlbnQ6IGV2ZW50LCBjaGVja2VkLCBpbnN0YW5jZTogdGhpcyB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9ucyA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMudW5DaGVja0FsbE5vZGVzKHsgb3JpZ2luYWxFdmVudDogZXZlbnQsIGNoZWNrZWQsIGluc3RhbmNlOiB0aGlzIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIOabtOaWsOWFqOmAiWNoZWNrYm94IOeahOeKtuaAgSAqL1xyXG4gICAgcHJpdmF0ZSB1cGRhdGVBbGxDaGVja2JveFN0YXR1cygpIHtcclxuICAgICAgICBjb25zdCBzdGF0dXMgPSB0aGlzLmlzSW5kZXRlcm1pbmF0ZSgpO1xyXG4gICAgICAgIGlmICh0aGlzLnNob3dDaGVja0FsbCAmJiAhdGhpcy5zaW5nbGVTZWxlY3QgJiYgdGhpcy5zaG93Q2hlY2tib3gpIHtcclxuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5oZWFkZXJDaGVja2JveENtcCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGVhZGVyQ2hlY2tib3hDbXAuY2hrQWxsLm5hdGl2ZUVsZW1lbnQuaW5kZXRlcm1pbmF0ZSA9IHN0YXR1cyA9PT0gMjtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhlYWRlckNoZWNrYm94Q21wLmNoZWNrZWQgPSBzdGF0dXMgPT09IDE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIOabtOaWsOeItuiKgueCuWNoZWNrYm94IOmAieS4reeKtuaAgSAqL1xyXG4gICAgcHJpdmF0ZSB1cGRhdGVQYXJlbnRDaGVja2JveFN0YXR1cyhyb3dOb2RlOiBSb3dOb2RlKSB7XHJcbiAgICAgICAgY29uc3QgcE5vZGVzID0gW107XHJcbiAgICAgICAgcm93Tm9kZS5wYXJlbnRzLmZvckVhY2gocm5pZCA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJuID0gdGhpcy5maW5kUm93Tm9kZShybmlkKTtcclxuICAgICAgICAgICAgaWYgKHJuKSB7XHJcbiAgICAgICAgICAgICAgICBwTm9kZXMucHVzaChybik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcE5vZGVzLnJldmVyc2UoKS5mb3JFYWNoKHJuID0+IHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVDaGVja2JveFN0YXR1cyhybik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKiog5pu05pawTuS4queItuiKgueCueWkjemAieahhuS4reeahOmAieS4reeKtuaAgSAqL1xyXG4gICAgcHJpdmF0ZSB1cGRhdGVQYXJlbnRzQ2hlY2tTdGF0dXMocGFyZW50SWRzOiBhbnkpIHtcclxuICAgICAgICBsZXQgcGlkcyA9IFtdO1xyXG4gICAgICAgIHBhcmVudElkcy5mb3JFYWNoKChpZHM6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBwaWRzID0gWy4uLnBpZHMsIC4uLmlkc107XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHBpZHMgPSBBcnJheS5mcm9tKG5ldyBTZXQocGlkcykpO1xyXG5cclxuICAgICAgICBjb25zdCBwUm93Tm9kZXMgPSB0aGlzLmZpbmRSb3dOb2RlcyhwaWRzKTtcclxuXHJcbiAgICAgICAgcFJvd05vZGVzLnNvcnQoKHIsIG4pID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIG4ubGV2ZWwgLSByLmxldmVsO1xyXG4gICAgICAgIH0pLmZvckVhY2gocm4gPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNoZWNrYm94U3RhdHVzKHJuKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgLyoqIOabtOaWsOiKgueCueS4rWNoZWNrYm9455qE54q25oCBICovXHJcbiAgICBwcml2YXRlIHVwZGF0ZUNoZWNrYm94U3RhdHVzKHJvd05vZGU6IFJvd05vZGUpIHtcclxuICAgICAgICBjb25zdCBzdGF0dXMgPSB0aGlzLmlzSW5kZXRlcm1pbmF0ZShyb3dOb2RlKTtcclxuICAgICAgICBpZiAoc3RhdHVzICE9PSB1bmRlZmluZWQgJiYgcm93Tm9kZS5ub2RlLnNlbGVjdGFibGUpIHtcclxuICAgICAgICAgICAgcm93Tm9kZS5pbmRldGVybWluYXRlID0gc3RhdHVzID09PSAyO1xyXG4gICAgICAgICAgICB0aGlzLnR0U2VydmljZS5vbkNoYW5nZUNoZWNrYm94U3RhdHVzKHJvd05vZGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKiog5Yik5pat5oyH5a6a6IqC54K5Y2hlY2tib3gg55qE54q25oCBICovXHJcbiAgICBwcml2YXRlIGlzSW5kZXRlcm1pbmF0ZShyb3dOb2RlPzogUm93Tm9kZSk6IGFueSB7XHJcbiAgICAgICAgY29uc3Qgc3RhdHVzID0gdGhpcy5nZXRDaGVja2JveFN0YXR1cyhyb3dOb2RlKTtcclxuICAgICAgICBpZiAoc3RhdHVzICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgbGV0IGNoZWNrZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKHN0YXR1cyA9PT0gMikge1xyXG4gICAgICAgICAgICAgICAgY2hlY2tlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY2hlY2tlZCA9ICEhc3RhdHVzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChyb3dOb2RlICYmIHJvd05vZGUubm9kZS5zZWxlY3RhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICByb3dOb2RlLmlzQ2hlY2tlZCA9IGNoZWNrZWQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldENoZWNrZWRzKHJvd05vZGUsIGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc3RhdHVzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6L+U5Zue54i257qn6IqC54K5Y2hlY2tib3gg55qE54q25oCB44CCMO+8muS4jemAieS4re+8jCAx77yaIOmAieS4re+8jCAy77ya5LiN56Gu5a6aXHJcbiAgICAgKiBAcGFyYW0gcm93Tm9kZSDniLbnuqfoioLngrnvvJvkuLrnqbrml7bov5Tlm57lhajpgIljaGVja2JveCDnmoTnirbmgIFcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBnZXRDaGVja2JveFN0YXR1cyhyb3dOb2RlPzogUm93Tm9kZSkge1xyXG4gICAgICAgIGxldCB1bmNoZWNrZWRMZW5ndGggPSAwO1xyXG4gICAgICAgIGxldCBjaGVja2VkTGVuZ3RoID0gMDtcclxuICAgICAgICBsZXQgbGVuID0gMDtcclxuICAgICAgICBsZXQgY2hpbGROb2RlcyA9IFtdO1xyXG4gICAgICAgIGlmIChyb3dOb2RlKSB7XHJcbiAgICAgICAgICAgIGNoaWxkTm9kZXMgPSByb3dOb2RlLm5vZGUuY2hpbGRyZW4gfHwgW107XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY2hpbGROb2RlcyA9IHRoaXMuc3RhdGUucm93Tm9kZXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxlbiA9IGNoaWxkTm9kZXMubGVuZ3RoO1xyXG4gICAgICAgIGNoaWxkTm9kZXMuZm9yRWFjaChuID0+IHtcclxuICAgICAgICAgICAgbGV0IHJuID0gbjtcclxuICAgICAgICAgICAgaWYgKHJvd05vZGUpIHtcclxuICAgICAgICAgICAgICAgIHJuID0gdGhpcy5maW5kUm93Tm9kZShuLmRhdGFbdGhpcy5pZEZpZWxkXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHJuICYmICFybi5pbmRldGVybWluYXRlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocm4uaXNDaGVja2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tlZExlbmd0aCsrO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB1bmNoZWNrZWRMZW5ndGgrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAobGVuID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBmbGFnID0gMDtcclxuICAgICAgICBpZiAodW5jaGVja2VkTGVuZ3RoID09PSBsZW4pIHtcclxuICAgICAgICAgICAgZmxhZyA9IDA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKGNoZWNrZWRMZW5ndGggPT09IGxlbikge1xyXG4gICAgICAgICAgICAgICAgZmxhZyA9IDE7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBmbGFnID0gMjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZsYWc7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBmaW5kSW5kZXhJbihub2RlOiBUcmVlTm9kZSwgdHJlZU5vZGVzOiBUcmVlTm9kZVtdKSB7XHJcbiAgICAgICAgbGV0IGluZGV4ID0gLTE7XHJcbiAgICAgICAgaWYgKHRyZWVOb2RlcyAmJiB0cmVlTm9kZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGluZGV4ID0gdHJlZU5vZGVzLmZpbmRJbmRleCgodiwgaSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXF1YWxzKHYsIG5vZGUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBpbmRleDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWcqOmAieS4reeahOmbhuWQiOS4reafpeaJvuaMh+WumuiKgueCueeahOe0ouW8lVxyXG4gICAgICogQHBhcmFtIG5vZGUg5qCR6IqC54K5XHJcbiAgICAgKi9cclxuICAgIGZpbmRJbmRleEluQ2hlY2tlZHMobm9kZTogVHJlZU5vZGUpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZpbmRJbmRleEluKG5vZGUsIHRoaXMuY2hlY2tlZHMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5Zyo6YCJ5Lit55qE6ZuG5ZCI5Lit5p+l5om+5oyH5a6a6IqC54K555qE57Si5byVXHJcbiAgICAgKiBAcGFyYW0gbm9kZSDmoJHoioLngrlcclxuICAgICAqL1xyXG4gICAgZmluZEluZGV4SW5TZWxlY3Rpb24obm9kZTogVHJlZU5vZGUpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZpbmRJbmRleEluKG5vZGUsIHRoaXMuc2VsZWN0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIOWvueavlOS4pOS4quiKgueCueaYr+WQpuWQjOS4gOS4quiKgueCuSAqL1xyXG4gICAgZXF1YWxzKHRhcmdldDogVHJlZU5vZGUsIHNvdXJjZTogVHJlZU5vZGUpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGFyZ2V0LmRhdGFbdGhpcy5pZEZpZWxkXSA9PT0gc291cmNlLmRhdGFbdGhpcy5pZEZpZWxkXTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWxleW8gOaJgOacieiKgueCuVxyXG4gICAgICogQHBhcmFtIHJvd05vZGUg5bGV5byA5q2k6IqC54K55LiL55qE5omA5pyJ6IqC54K577yb5aaC5p6c5Li656m677yM5YiZ5bGV5byA5omA5pyJ6IqC54K5XHJcbiAgICAgKiBAcGFyYW0gZGVlcCDorr7nva7kuLp0cnVlIOaXtu+8jOW9k+WJjeiKgueCueS4i+eahOaJgOacieWtkOiKgueCueWFqOmDqOWxleW8gCwg6buY6K6kIGZhbHNlXHJcbiAgICAgKiBAcGFyYW0gY2hpbGRyZW5FbXB0eUVtaXRFeHBhbmQgIOW9k+ayoeacieWtkOiKgueCueaYr+WQpuinpuWPkeWxleW8gOS6i+S7tu+8jOm7mOiupOS4uiB0cnVlXHJcbiAgICAgKi9cclxuICAgIHRvZ2dsZUV4cGFuZCh0cmVlTm9kZT86IFRyZWVOb2RlLCBkZWVwID0gZmFsc2UsIGNoaWxkcmVuRW1wdHlFbWl0RXhwYW5kID0gdHJ1ZSkge1xyXG4gICAgICAgIGlmICh0cmVlTm9kZSkge1xyXG4gICAgICAgICAgICB0cmVlTm9kZS5leHBhbmRlZCA9ICF0cmVlTm9kZS5leHBhbmRlZDtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVOb2RlUHJvcGVydHkodHJlZU5vZGUuaWQsIHtleHBhbmRlZDogdHJlZU5vZGUuZXhwYW5kZWR9KTtcclxuICAgICAgICAgICAgdGhpcy50b2dnbGVWaXNpYmxlKHRyZWVOb2RlKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnZpcnR1YWxpemVkKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHJlZU5vZGUuY2hpbGRyZW4gJiYgdHJlZU5vZGUuY2hpbGRyZW4ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJWaXJ0dWFsUm93Tm9kZXMoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRyZWVOb2RlLmV4cGFuZGVkKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2hpbGRyZW5FbXB0eUVtaXRFeHBhbmQgfHwgKHRyZWVOb2RlLmNoaWxkcmVuICYmIHRyZWVOb2RlLmNoaWxkcmVuLmxlbmd0aCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4cGFuZC5lbWl0KHRyZWVOb2RlKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJlZU5vZGUuZXhwYW5kZWQgPSAhdHJlZU5vZGUuZXhwYW5kZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb2xsYXBzZS5lbWl0KHRyZWVOb2RlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGRlZXApIHtcclxuICAgICAgICAgICAgICAgIGlmICh0cmVlTm9kZS5jaGlsZHJlbiAmJiB0cmVlTm9kZS5jaGlsZHJlbi5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0cmVlTm9kZS5jaGlsZHJlbi5mb3JFYWNoKChyb3csIGkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b2dnbGVFeHBhbmQocm93LCBkZWVwLCBjaGlsZHJlbkVtcHR5RW1pdEV4cGFuZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuZGF0YSAmJiB0aGlzLmRhdGEubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGEuZm9yRWFjaCgocm93OiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZUV4cGFuZChyb3cpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNldE5ld0NvbHVtbnNXaWR0aCgpO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHRvZ2dsZVZpc2libGUodHJlZU5vZGU6IFRyZWVOb2RlKSB7XHJcbiAgICAgICAgY29uc3Qgcm93Tm9kZSA9IHRoaXMuZmluZFJvd05vZGUodHJlZU5vZGUuaWQpO1xyXG4gICAgICAgIGlmIChyb3dOb2RlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJpZCA9IHJvd05vZGUuaWQ7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBzZXRSb3dWaXNpYmxlID0gKHJuLCB2aXNpYmxlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByblBhcmVudCA9IHRoaXMuZmluZFJvd05vZGUocm4ucGFyZW50LmRhdGFbdGhpcy5pZEZpZWxkXSk7XHJcbiAgICAgICAgICAgICAgICBpZiAocm5QYXJlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBybi52aXNpYmxlID0gcm5QYXJlbnQudmlzaWJsZSAmJiByblBhcmVudC5ub2RlLmV4cGFuZGVkO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBybi52aXNpYmxlID0gdmlzaWJsZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBfciA9IHRoaXMuc2VyaWFsaXplZFZhbHVlLmZpbmQobiA9PiBuLmlkID09PSBybi5pZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoX3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBfci52aXNpYmxlID0gcm4udmlzaWJsZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUucm93Tm9kZXMuZmlsdGVyKHJuID0+IHJuLnBhcmVudHMuaW5kZXhPZihyaWQpID4gLTEpLmZvckVhY2gocm4gPT4ge1xyXG4gICAgICAgICAgICAgICAgc2V0Um93VmlzaWJsZShybiwgdHJlZU5vZGUuZXhwYW5kZWQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIOWxleW8gOaMh+WumuiKgueCuVxyXG4gICAgICogZW1pdDog6Kem5Y+R5bGV5byA5LqL5Lu2XHJcbiAgICAgKiByZW5kZXI6IOaVsOaNrumHjeaWsOWKoOi9vVxyXG4gICAgICovXHJcbiAgICBleHBhbmROb2RlKGlkOiBzdHJpbmcsIGVtaXQgPSB0cnVlLCByZW5kZXIgPSB0cnVlKSB7XHJcbiAgICAgICAgaWYgKGlkKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJvd05vZGUgPSB0aGlzLmZpbmRSb3dOb2RlKGlkKTtcclxuICAgICAgICAgICAgaWYgKHJvd05vZGUpIHtcclxuICAgICAgICAgICAgICAgIHJvd05vZGUubm9kZS5leHBhbmRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZVZpc2libGUocm93Tm9kZS5ub2RlKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocmVuZGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudmlydHVhbGl6ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJvd05vZGUubm9kZS5jaGlsZHJlbiAmJiByb3dOb2RlLm5vZGUuY2hpbGRyZW4ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclZpcnR1YWxSb3dOb2RlcygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChlbWl0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5leHBhbmQuZW1pdChyb3dOb2RlLm5vZGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0TmV3Q29sdW1uc1dpZHRoKCk7XHJcblxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy53cml0ZUNvbnNvbGUoJ0NvblxcJ3QgZmluZCB0cmVlIG5vZGUgd2lkaCBpZDonICsgaWQsICdlcnJvcicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKiDlsZXlvIDmiYDmnInoioLngrkgKi9cclxuICAgIGV4cGFuZEFsbCgpIHtcclxuICAgICAgICB0aGlzLnN0YXRlLnJvd05vZGVzID0gdGhpcy5zdGF0ZS5yb3dOb2Rlcy5tYXAoKHJvdzogUm93Tm9kZSkgPT4ge1xyXG4gICAgICAgICAgICByb3cubm9kZS5leHBhbmRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIHJvdy52aXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHJvdztcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMudmlydHVhbGl6ZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJWaXJ0dWFsUm93Tm9kZXMoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnNlcmlhbGl6ZWRWYWx1ZSA9IHRoaXMuc3RhdGUucm93Tm9kZXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2V0TmV3Q29sdW1uc1dpZHRoKCk7XHJcbiAgICAgICAgdGhpcy5leHBhbmRBbGxOb2Rlcy5lbWl0KCk7XHJcbiAgICAgICAgdGhpcy5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwYW5kTm9kZXMoaWQ6IHN0cmluZykge1xyXG4gICAgICAgIC8vIGNvbnN0IHJvd05vZGUgPSB0aGlzLmZpbmRSb3dOb2RlKGlkKTtcclxuICAgICAgICAvLyBjb25zdCByb290Tm9kZSA9IHRoaXMuZ2V0Um9vdChpZCk7XHJcbiAgICAgICAgLy8gaWYgKHJvd05vZGUpIHtcclxuICAgICAgICAvLyAgICAgY29uc3QgdHJlZU5vZGUgPSByb3dOb2RlLm5vZGU7XHJcbiAgICAgICAgLy8gICAgIHRyZWVOb2RlLmV4cGFuZGVkID0gdHJ1ZTtcclxuICAgICAgICAvLyAgICAgcm93Tm9kZS52aXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICAvLyAgICAgY29uc3QgcGFyZW50cyA9IHJvd05vZGUucGFyZW50cztcclxuXHJcbiAgICAgICAgLy8gICAgIHRoaXMuc3RhdGUucm93Tm9kZXMuZmlsdGVyKG4gPT4gbi5wYXJlbnRzLmluZGV4T2Yocm9vdE5vZGUuaWQpID4gLTEpLmZvckVhY2gociA9PiB7XHJcbiAgICAgICAgLy8gICAgICAgICBpZiAocGFyZW50cy5pbmRleE9mKHIuaWQpID4gLTEpIHtcclxuICAgICAgICAvLyAgICAgICAgICAgICByLnZpc2libGUgPSB0cnVlO1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIHIubm9kZS5leHBhbmRlZCA9IHRydWU7XHJcbiAgICAgICAgLy8gICAgICAgICB9XHJcbiAgICAgICAgLy8gICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgLy8gICAgIHRoaXMuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIC8vIH1cclxuICAgIH1cclxuXHJcbiAgICAvKiog5bGV5byA5oyH5a6a6IqC54K55LiL55qE5omA5pyJ6IqC54K5ICovXHJcbiAgICBleHBhbmRBbGxOb2Rlc0J5KHJvd05vZGU6IGFueSkge1xyXG4gICAgICAgIGlmIChyb3dOb2RlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRyZWVOb2RlID0gcm93Tm9kZS5ub2RlO1xyXG4gICAgICAgICAgICB0cmVlTm9kZS5leHBhbmRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIHJvd05vZGUudmlzaWJsZSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLnJvd05vZGVzLmZpbHRlcihuID0+IG4ucGFyZW50cy5pbmRleE9mKHJvd05vZGUuaWQpID4gLTEpLmZvckVhY2gociA9PiB7XHJcbiAgICAgICAgICAgICAgICByLnZpc2libGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgci5ub2RlLmV4cGFuZGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgdGhpcy5zZXROZXdDb2x1bW5zV2lkdGgoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIOaKmOWPoOaMh+WumuiKgueCuSAqL1xyXG4gICAgY29sbGFwc2VOb2RlKGlkOiBzdHJpbmcpIHtcclxuICAgICAgICBpZiAoaWQpIHtcclxuICAgICAgICAgICAgY29uc3Qgcm93Tm9kZSA9IHRoaXMuZmluZFJvd05vZGUoaWQpO1xyXG4gICAgICAgICAgICBpZiAocm93Tm9kZSkge1xyXG4gICAgICAgICAgICAgICAgcm93Tm9kZS5ub2RlLmV4cGFuZGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZVZpc2libGUocm93Tm9kZS5ub2RlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXROZXdDb2x1bW5zV2lkdGgoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29sbGFwc2UuZW1pdChyb3dOb2RlLm5vZGUpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy53cml0ZUNvbnNvbGUoJ0NvblxcJ3QgZmluZCB0cmVlIG5vZGUgd2lkaCBpZDonICsgaWQsICdlcnJvcicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqIOaKmOWPoOaJgOacieiKgueCuSAqL1xyXG4gICAgY29sbGFwc2VBbGwoKSB7XHJcbiAgICAgICAgdGhpcy5zdGF0ZS5yb3dOb2RlcyA9IHRoaXMuc3RhdGUucm93Tm9kZXMubWFwKChyb3c6IFJvd05vZGUpID0+IHtcclxuICAgICAgICAgICAgcm93Lm5vZGUuZXhwYW5kZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgcm93LnZpc2libGUgPSAhcm93LnBhcmVudDtcclxuICAgICAgICAgICAgcmV0dXJuIHJvdztcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMudmlydHVhbGl6ZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJWaXJ0dWFsUm93Tm9kZXMoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnNlcmlhbGl6ZWRWYWx1ZSA9IHRoaXMuc3RhdGUucm93Tm9kZXM7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgdGhpcy5jb2xsYXBzZUFsbE5vZGVzLmVtaXQoKTtcclxuICAgICAgICB0aGlzLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICB0aGlzLnNldE5ld0NvbHVtbnNXaWR0aCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldENvbnRhaW5lck9mZnNldCgpIHtcclxuICAgICAgICBjb25zdCByZWN0ID0gdGhpcy5jb250YWluZXJFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGxlZnQ6IHJlY3QubGVmdCArIGRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdCxcclxuICAgICAgICAgICAgdG9wOiByZWN0LnRvcCArIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNvbHVtblJlc2l6ZUJlZ2luKGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgY29udGFpbmVyTGVmdCA9IE1hdGgucm91bmQodGhpcy5nZXRDb250YWluZXJPZmZzZXQoKS5sZWZ0KTtcclxuICAgICAgICB0aGlzLmxhc3RSZXNpemVySGVscGVyWCA9IChldmVudC5wYWdlWCAtIGNvbnRhaW5lckxlZnQgKyB0aGlzLmNvbnRhaW5lckVsZW1lbnQuc2Nyb2xsTGVmdCk7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNvbHVtblJlc2l6ZShldmVudCkge1xyXG4gICAgICAgIGlmICh0aGlzLnJlc2l6YWJsZUNvbHVtbnMpIHtcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyTGVmdCA9IHRoaXMuZ2V0Q29udGFpbmVyT2Zmc2V0KCkubGVmdDtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyh0aGlzLmNvbnRhaW5lckVsZW1lbnQsICd1aS11bnNlbGVjdGFibGUtdGV4dCcpO1xyXG4gICAgICAgICAgICB0aGlzLnJlc2l6ZXJIZWxwZXJWQy5uYXRpdmVFbGVtZW50LnN0eWxlLmhlaWdodCA9IHRoaXMuY29udGFpbmVyRWxlbWVudC5vZmZzZXRIZWlnaHQgKyAncHgnO1xyXG4gICAgICAgICAgICB0aGlzLnJlc2l6ZXJIZWxwZXJWQy5uYXRpdmVFbGVtZW50LnN0eWxlLnRvcCA9IDAgKyAncHgnO1xyXG4gICAgICAgICAgICB0aGlzLnJlc2l6ZXJIZWxwZXJWQy5uYXRpdmVFbGVtZW50LnN0eWxlLmxlZnQgPSAoZXZlbnQucGFnZVggLSBjb250YWluZXJMZWZ0KSArICdweCc7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnJlc2l6ZXJIZWxwZXJWQy5uYXRpdmVFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbkNvbHVtblJlc2l6ZUVuZChldmVudDogYW55LCBjb2x1bW46IGFueSkge1xyXG4gICAgICAgIGlmICghdGhpcy5yZXNpemVySGVscGVyVkMubmF0aXZlRWxlbWVudC5vZmZzZXRMZWZ0KSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIOWBj+enu+mHj1xyXG4gICAgICAgIGNvbnN0IGRlbHRhID0gdGhpcy5yZXNpemVySGVscGVyVkMubmF0aXZlRWxlbWVudC5vZmZzZXRMZWZ0IC0gdGhpcy5sYXN0UmVzaXplckhlbHBlclg7XHJcbiAgICAgICAgLy8g5YiX5a69XHJcbiAgICAgICAgY29uc3QgY29sdW1uV2lkdGggPSBjb2x1bW4ub2Zmc2V0V2lkdGg7XHJcbiAgICAgICAgLy8g5paw5a695bqmXHJcbiAgICAgICAgY29uc3QgbmV3Q29sdW1uV2lkdGggPSBjb2x1bW5XaWR0aCArIGRlbHRhO1xyXG4gICAgICAgIC8vIOacgOWwj+WuveW6plxyXG4gICAgICAgIGNvbnN0IG1pbldpZHRoID0gY29sdW1uLnN0eWxlLm1pbldpZHRoIHx8IDE1O1xyXG5cclxuICAgICAgICBsZXQgcmVzaXplQ29sdW1uSW5kZXggPSAtMTtcclxuICAgICAgICBpZiAoY29sdW1uLmlkKSB7XHJcbiAgICAgICAgICAgIHJlc2l6ZUNvbHVtbkluZGV4ID0gdGhpcy5jb2x1bW5zLmZpbmRJbmRleChuID0+IG4uaWQgPT09IGNvbHVtbi5pZCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgY29sRmllbGQgPSBjb2x1bW4uZ2V0QXR0cmlidXRlKCdmaWVsZCcpO1xyXG4gICAgICAgICAgICBpZiAoY29sRmllbGQpIHtcclxuICAgICAgICAgICAgICAgIHJlc2l6ZUNvbHVtbkluZGV4ID0gdGhpcy5jb2x1bW5zLmZpbmRJbmRleChuID0+IG4uZmllbGQgPT09IGNvbEZpZWxkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIGlmICghdGhpcy5maXRDb2x1bW5zKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzaXplQ29sR3JvdXAodGhpcy5oZWFkZXJUYWJsZS5uYXRpdmVFbGVtZW50LCByZXNpemVDb2x1bW5JbmRleCwgbmV3Q29sdW1uV2lkdGgsIDApO1xyXG4gICAgICAgICAgICB0aGlzLnJlc2l6ZUNvbEdyb3VwKHRoaXMuYm9keVRhYmxlLm5hdGl2ZUVsZW1lbnQsIHJlc2l6ZUNvbHVtbkluZGV4LCBuZXdDb2x1bW5XaWR0aCwgMCk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5jb2x1bW5zW3Jlc2l6ZUNvbHVtbkluZGV4XSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb2x1bW5zW3Jlc2l6ZUNvbHVtbkluZGV4XS53aWR0aCA9IG5ld0NvbHVtbldpZHRoO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNvcnRDb2x1bW5zQnlGaXhlZChmYWxzZSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNldENlbGxXaWR0aENzcyh0aGlzLmFsbENvbHVtbnNXaWR0aCgpLCAwLCBbXSk7XHJcblxyXG4gICAgICAgICAgICAvLyB0aGlzLnNldFRhYmxlV2lkdGgodGhpcy5hbGxDb2x1bW5zV2lkdGgoKSk7XHJcblxyXG4gICAgICAgICAgICAvLyAvLyB1cGRhdGUgY3NzLlxyXG4gICAgICAgICAgICAvLyBjb25zdCBfY29sSW5mbyA9IHRoaXMuY29sdW1uc1tyZXNpemVDb2x1bW5JbmRleF07XHJcbiAgICAgICAgICAgIC8vIGlmIChfY29sSW5mbykge1xyXG4gICAgICAgICAgICAvLyAgICAgY29uc3QgcnVsZU5hbWUgPSB0aGlzLmNvbHVtbkNzc05hbWUoX2NvbEluZm8pO1xyXG4gICAgICAgICAgICAvLyAgICAgY29uc3Qgc3R5bGVjc3MgPSBydWxlTmFtZSArICd7d2lkdGg6JyArIG5ld0NvbHVtbldpZHRoICsgJ3B4fSc7XHJcbiAgICAgICAgICAgIC8vICAgICB0aGlzLnV0aWxzLmFwcGVuZENzc1J1bGVzKFtzdHlsZWNzc10sIHRoaXMuc3R5bGVFbGVtZW50LnNoZWV0KTtcclxuICAgICAgICAgICAgLy8gfVxyXG5cclxuICAgICAgICAgICAgLy8gY29uc3QgbmV4dENvbHVtbiA9IHRoaXMuY29sdW1uc1tyZXNpemVDb2x1bW5JbmRleCArIDFdO1xyXG4gICAgICAgICAgICAvLyBpZiAobmV4dENvbHVtbiAmJiBuZXh0Q29sdW1uLmZpeGVkKSB7XHJcbiAgICAgICAgICAgIC8vICAgICBjb25zdCBydWxlTmFtZSA9IHRoaXMuY29sdW1uQ3NzTmFtZShuZXh0Q29sdW1uKTtcclxuICAgICAgICAgICAgLy8gICAgIGNvbnN0IHN0eWxlY3NzID0gcnVsZU5hbWUgKyAneycgKyBuZXh0Q29sdW1uLmZpeGVkICsgJzonICsgbmV4dENvbHVtbltuZXh0Q29sdW1uLmZpeGVkXSArICdweH0nO1xyXG4gICAgICAgICAgICAvLyAgICAgdGhpcy51dGlscy5hcHBlbmRDc3NSdWxlcyhbc3R5bGVjc3NdLCB0aGlzLnN0eWxlRWxlbWVudC5zaGVldCk7XHJcbiAgICAgICAgICAgIC8vIH1cclxuXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKG5ld0NvbHVtbldpZHRoID4gbWluV2lkdGgpIHtcclxuICAgICAgICAgICAgICAgIGxldCBuZXh0Q29sdW1uID0gY29sdW1uLm5leHRFbGVtZW50U2libGluZztcclxuICAgICAgICAgICAgICAgIHdoaWxlICghbmV4dENvbHVtbi5vZmZzZXRQYXJlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXh0Q29sdW1uID0gbmV4dENvbHVtbi5uZXh0RWxlbWVudFNpYmxpbmc7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG5leHRDb2x1bW4pIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXh0Q29sdW1uV2lkdGggPSBuZXh0Q29sdW1uLm9mZnNldFdpZHRoIC0gZGVsdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dENvbHVtbk1pbldpZHRoID0gbmV4dENvbHVtbi5zdHlsZS5taW5XaWR0aCB8fCAxNTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld0NvbHVtbldpZHRoID4gMTUgJiYgbmV4dENvbHVtbldpZHRoID4gbmV4dENvbHVtbk1pbldpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVzaXplQ29sR3JvdXAodGhpcy5oZWFkZXJUYWJsZS5uYXRpdmVFbGVtZW50LCByZXNpemVDb2x1bW5JbmRleCwgbmV3Q29sdW1uV2lkdGgsIG5leHRDb2x1bW5XaWR0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVzaXplQ29sR3JvdXAodGhpcy5ib2R5VGFibGUubmF0aXZlRWxlbWVudCwgcmVzaXplQ29sdW1uSW5kZXgsIG5ld0NvbHVtbldpZHRoLCBuZXh0Q29sdW1uV2lkdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5yZXNpemVySGVscGVyVkMubmF0aXZlRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlQ2xhc3ModGhpcy5jb250YWluZXJFbGVtZW50LCAndWktdW5zZWxlY3RhYmxlLXRleHQnKTtcclxuICAgICAgICB0aGlzLnBzUmVmLmRpcmVjdGl2ZVJlZi51cGRhdGUoKTtcclxuICAgIH1cclxuXHJcbiAgICByZXNpemVDb2xHcm91cCh0YWJsZSwgcmVzaXplQ29sdW1uSW5kZXgsIG5ld0NvbHVtbldpZHRoLCBuZXh0Q29sdW1uV2lkdGg/OiBudW1iZXIpIHtcclxuICAgICAgICBpZiAodGFibGUpIHtcclxuICAgICAgICAgICAgY29uc3QgY29sR3JvdXAgPSB0YWJsZS5jaGlsZHJlblswXS5ub2RlTmFtZSA9PT0gJ0NPTEdST1VQJyA/IHRhYmxlLmNoaWxkcmVuWzBdIDogbnVsbDtcclxuXHJcbiAgICAgICAgICAgIGlmIChjb2xHcm91cCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29sID0gY29sR3JvdXAuY2hpbGRyZW5bcmVzaXplQ29sdW1uSW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV4dENvbCA9IGNvbC5uZXh0RWxlbWVudFNpYmxpbmc7XHJcbiAgICAgICAgICAgICAgICBjb2wuc3R5bGUud2lkdGggPSBuZXdDb2x1bW5XaWR0aCArICdweCc7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChuZXh0Q29sKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5leHRDb2x1bW5XaWR0aCAmJiB0aGlzLmZpdENvbHVtbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dENvbC5zdHlsZS53aWR0aCA9IG5leHRDb2x1bW5XaWR0aCArICdweCc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTY3JvbGxhYmxlIHRhYmxlcyByZXF1aXJlIGEgY29sZ3JvdXAgdG8gc3VwcG9ydCByZXNpemFibGUgY29sdW1ucycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uU2VhcmNoKCkge1xyXG4gICAgICAgIHRoaXMuc3RhdGUuc2VhcmNoUm93Tm9kZXMgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuc3RhdGUuc2VhcmNoZWQgPSAhIXRoaXMuc2VhcmNoRGF0YS52YWx1ZTtcclxuICAgICAgICBpZiAodGhpcy5zZWFyY2hEYXRhLnZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoRGF0YS52YWx1ZSA9IHRoaXMuc2VhcmNoRGF0YS52YWx1ZS50cmltKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2VhcmNoLmVtaXQodGhpcy5zZWFyY2hEYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICBpbnNlcnQobm9kZTogVHJlZU5vZGUsIHBhcmVudD86IFRyZWVOb2RlKSB7XHJcbiAgICAgICAgaWYgKHBhcmVudCkge1xyXG4gICAgICAgICAgICBpZiAoIXBhcmVudC5jaGlsZHJlbikge1xyXG4gICAgICAgICAgICAgICAgcGFyZW50LmNoaWxkcmVuID0gW107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcGFyZW50LmNoaWxkcmVuLnB1c2gobm9kZSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV4cGFuZE5vZGUocGFyZW50LmRhdGFbdGhpcy5pZEZpZWxkXSk7XHJcbiAgICAgICAgICAgIHRoaXMuYXBwZW5kTmV3LmVtaXQoeyBwYXJlbnQgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5kYXRhLnB1c2gobm9kZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnVwZGF0ZVNlcmlhbGl6ZWRWYWx1ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGFwcGVuZChkYXRhOiB7IFtrZXk6IHN0cmluZ106IGFueSB9LCBwYXJlbnQ/OiBUcmVlTm9kZSkge1xyXG4gICAgICAgIGlmIChkYXRhICYmIGRhdGFbdGhpcy5pZEZpZWxkXSkge1xyXG4gICAgICAgICAgICB0aGlzLmluc2VydCh7IGRhdGEsIGlkOiBkYXRhW3RoaXMuaWRGaWVsZF0gfSwgcGFyZW50KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLndyaXRlQ29uc29sZSgnUGxlYXNlIHNldCBpZCB2YWx1ZS4nLCAnd2FybicpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGVtaXRBcHBlbmROZXcocGFyZW50OiBUcmVlTm9kZSkge1xyXG4gICAgICAgIGlmICh0aGlzLnZpcnR1YWxpemVkKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5vZGVQb3NZID0gdGhpcy5wc1JlZi5kaXJlY3RpdmVSZWYuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LnNjcm9sbFRvcDtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVTZXJpYWxpemVkVmFsdWUobm9kZVBvc1kpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU2VyaWFsaXplZFZhbHVlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBhcHBlbmRDaGlsZHJlbihub2RlczogVHJlZU5vZGVbXSwgcGFyZW50OiBUcmVlTm9kZSwgZW1pdCA9IHRydWUpIHtcclxuICAgICAgICBpZiAobm9kZXMgJiYgbm9kZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGlmIChwYXJlbnQpIHtcclxuICAgICAgICAgICAgICAgIHBhcmVudC5jaGlsZHJlbi5wdXNoKC4uLm5vZGVzKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZW1pdEFwcGVuZE5ldyhwYXJlbnQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGVtaXQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGVuZE5ldy5lbWl0KHsgcGFyZW50IH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfmnKrmib7liLDniLbnuqfoioLngrknKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU2VyaWFsaXplZFZhbHVlKCk7XHJcbiAgICAgICAgICAgIHRoaXMud3JpdGVDb25zb2xlKCfmt7vliqDlrZDoioLngrnnmoTmlbDmja7kuLrnqbonLCAnd2FybicpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBsb2FkQ2hpbGRyZW4obm9kZXM6IFRyZWVOb2RlW10sIHBhcmVudDogVHJlZU5vZGUsIGVtaXQgPSB0cnVlKSB7XHJcbiAgICAgICAgaWYgKHBhcmVudCkge1xyXG4gICAgICAgICAgICBwYXJlbnQuY2hpbGRyZW4gPSBub2RlcyB8fCBbXTtcclxuICAgICAgICAgICAgdGhpcy5lbWl0QXBwZW5kTmV3KHBhcmVudCk7XHJcbiAgICAgICAgICAgIGlmIChlbWl0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGVuZE5ldy5lbWl0KHsgcGFyZW50IH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlbW92ZShub2RlSWQ6IHN0cmluZykge1xyXG4gICAgICAgIGlmIChub2RlSWQpIHtcclxuICAgICAgICAgICAgY29uc3Qgcm93Tm9kZSA9IHRoaXMuZmluZFJvd05vZGUobm9kZUlkKTtcclxuICAgICAgICAgICAgaWYgKHJvd05vZGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIHJlbW92ZSh0aGlzLnN0YXRlLnJvd05vZGVzLCAobikgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgIHJldHVybiBuLmlkID09PSBub2RlSWQ7XHJcbiAgICAgICAgICAgICAgICAvLyB9KTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdFZhbHVlID09PSBub2RlSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFZhbHVlID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocm93Tm9kZS5wYXJlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZW1vdmUocm93Tm9kZS5wYXJlbnQuY2hpbGRyZW4sIChuKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLmRhdGFbdGhpcy5pZEZpZWxkXSA9PT0gbm9kZUlkO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZW1vdmUodGhpcy5zdGF0ZS5yb3dOb2RlcywgKG4pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4uaWQgPT09IG5vZGVJZDtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhID0gdGhpcy5kYXRhLmZpbHRlcihuID0+IG4uZGF0YVt0aGlzLmlkRmllbGRdICE9PSBub2RlSWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTZXJpYWxpemVkVmFsdWUoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy50dFNlcnZpY2Uub25SZW1vdmUocm93Tm9kZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZWQuZW1pdChyb3dOb2RlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGUobm9kZUlkOiBzdHJpbmcsIGRhdGE6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0pIHtcclxuICAgICAgICBpZiAobm9kZUlkICYmIGRhdGEpIHtcclxuICAgICAgICAgICAgY29uc3Qgcm93Tm9kZSA9IHRoaXMuZmluZFJvd05vZGUobm9kZUlkKTtcclxuICAgICAgICAgICAgaWYgKHJvd05vZGUpIHtcclxuICAgICAgICAgICAgICAgIHJvd05vZGUubm9kZS5kYXRhID0gZXh0ZW5kKHJvd05vZGUubm9kZS5kYXRhLCBkYXRhKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy50dFNlcnZpY2Uub25VcGRhdGUocm93Tm9kZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZWQuZW1pdChyb3dOb2RlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVOb2RlUHJvcGVydHkobm9kZWlkOiBzdHJpbmcsIHByb3BlcnR5OiB7IFtrZXk6IHN0cmluZ106IGFueSB9ICkge1xyXG4gICAgICAgIGNvbnN0IHJvd05vZGUgPSB0aGlzLmZpbmRSb3dOb2RlKG5vZGVpZCk7XHJcbiAgICAgICAgaWYgKHJvd05vZGUgJiYgcHJvcGVydHkpIHtcclxuICAgICAgICAgICAgT2JqZWN0LmtleXMocHJvcGVydHkpLmZvckVhY2goayA9PiB7XHJcbiAgICAgICAgICAgICAgICByb3dOb2RlLm5vZGVba10gPSBwcm9wZXJ0eVtrXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0U2NvcmxsQm9keUhlaWdodCgpIHtcclxuICAgICAgICB0aGlzLnNjb3JsbEJvZHlIZWlnaHQgPSB0aGlzLmhlaWdodDtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2hvd0ZpbHRlckJhcikge1xyXG4gICAgICAgICAgICB0aGlzLnNjb3JsbEJvZHlIZWlnaHQgPSB0aGlzLnNjb3JsbEJvZHlIZWlnaHQgLSA0NjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuZml4ZWRIZWFkZXIgJiYgdGhpcy5zaG93SGVhZGVyKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmhlYWRlckJveCAmJiAodGhpcy5oZWFkZXJXcmFwIHx8IHRoaXMudXNlR3JvdXBIZWFkZXIpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBoaCA9IHRoaXMuaGVhZGVyQm94Lm5hdGl2ZUVsZW1lbnQuY2xpZW50SGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY29ybGxCb2R5SGVpZ2h0ID0gdGhpcy5zY29ybGxCb2R5SGVpZ2h0IC0gaGg7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyDlrr3mnb7niYjml7bvvIzooajlpLTpq5jluqblop7pq5jvvIzpnIDopoHmjInlrp7pmYXlj5blvpfooajlpLTpq5jluqZcclxuICAgICAgICAgICAgICAgIGxldCBfaGVhZGVySGVpZ2h0ID0gdGhpcy5oZWFkZXJIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0aGVtZXNLZXkgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZ3NwX3J0Zl90aGVtU0tleScpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoZW1lc0tleSA9PT0gJ2xvb3NlJyAmJiB0aGlzLmhlYWRlckJveCkge1xyXG4gICAgICAgICAgICAgICAgICAgIF9oZWFkZXJIZWlnaHQgPSB0aGlzLmhlYWRlckJveC5uYXRpdmVFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuc2NvcmxsQm9keUhlaWdodCA9IHRoaXMuc2NvcmxsQm9keUhlaWdodCAtIF9oZWFkZXJIZWlnaHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnBhZ2luYXRpb24pIHtcclxuICAgICAgICAgICAgdGhpcy5zY29ybGxCb2R5SGVpZ2h0ID0gdGhpcy5zY29ybGxCb2R5SGVpZ2h0IC0gdGhpcy5wYWdlckhlaWdodDtcclxuICAgICAgICB9XHJcblxyXG5cclxuXHJcbiAgICAgICAgdGhpcy5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXRXaWR0aCh3KSB7XHJcbiAgICAgICAgdGhpcy53aWR0aCA9IHc7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzaXplKHNpemU/OiB7IHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyIH0pIHtcclxuICAgICAgICBpZiAoc2l6ZSkge1xyXG4gICAgICAgICAgICBjb25zdCB3ID0gcGFyc2VJbnQoJycgKyBzaXplLndpZHRoLCAxMCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGggPSBwYXJzZUludCgnJyArIHNpemUuaGVpZ2h0LCAxMCk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy53aWR0aCA9PT0gdyAmJiB0aGlzLmhlaWdodCA9PT0gaCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUuc2Nyb2xsWSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHNSZWYuZGlyZWN0aXZlUmVmLnNjcm9sbFRvWSh0aGlzLnN0YXRlLnNjcm9sbFkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLnNjcm9sbFgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBzUmVmLmRpcmVjdGl2ZVJlZi5zY3JvbGxUb1godGhpcy5zdGF0ZS5zY3JvbGxYKVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnNldFdpZHRoKHcpO1xyXG4gICAgICAgICAgICB0aGlzLmhlaWdodCA9IGg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2V0U2NvcmxsQm9keUhlaWdodCgpO1xyXG4gICAgICAgIGlmICh0aGlzLmRhdGEgJiYgdGhpcy5kYXRhLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlclZpcnR1YWxSb3dOb2RlcygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgLy8gICAgIGlmICh0aGlzLnBzUmVmKSB7XHJcbiAgICAgICAgLy8gICAgICAgICB0aGlzLnBzUmVmLmRpcmVjdGl2ZVJlZi51cGRhdGUoKTtcclxuICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgIC8vIH0sIDEwMCk7XHJcbiAgICB9XHJcblxyXG4gICAgbG9hZERhdGEoZGF0YTogVHJlZU5vZGVbXSkge1xyXG4gICAgICAgIGlmICh0aGlzLnNob3dMaW5lcykge1xyXG4gICAgICAgICAgICB0aGlzLmlzTG9hZE5ld0RhdGFTZXRFbXB0eSA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YSA9IFtdO1xyXG4gICAgICAgICAgICB0aGlzLmlzTG9hZE5ld0RhdGFTZXRFbXB0eSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIGVtcHR5KCkge1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEN1cnJlbnRBbGxSb3dOb2RlcygpIHtcclxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5zZWFyY2hlZCAmJiB0aGlzLnN0YXRlLnNlYXJjaFJvd05vZGVzICYmIHRoaXMuc3RhdGUuc2VhcmNoUm93Tm9kZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXRlLnNlYXJjaFJvd05vZGVzIHx8IHRoaXMuc3RhdGUucm93Tm9kZXM7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUucm93Tm9kZXM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNsZWFyQWxsKGRldGVjdENoYW5nZXMgPSB0cnVlKTogVHJlZVRhYmxlQ29tcG9uZW50IHtcclxuICAgICAgICB0aGlzLnN0YXRlLnJvd05vZGVzLmZpbHRlcihybiA9PiBybi5pbmRldGVybWluYXRlKS5mb3JFYWNoKHJuID0+IHtcclxuICAgICAgICAgICAgcm4uaW5kZXRlcm1pbmF0ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLnR0U2VydmljZS5vbkNoYW5nZUNoZWNrYm94U3RhdHVzKHJuKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5zdGF0ZS5yb3dOb2RlcyA9IHRoaXMuc3RhdGUucm93Tm9kZXMubWFwKChyb3c6IFJvd05vZGUpID0+IHtcclxuICAgICAgICAgICAgcm93LmlzQ2hlY2tlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICByb3cuaXNTZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICByb3cuaW5kZXRlcm1pbmF0ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICByZXR1cm4gcm93O1xyXG4gICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgLy8gaWYgKHRoaXMuc2VhcmNoRGF0YSAmJiB0aGlzLnNlYXJjaERhdGEudmFsdWUpIHtcclxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5zZWFyY2hlZCAmJiB0aGlzLnN0YXRlLnNlYXJjaFJvd05vZGVzICYmIHRoaXMuc3RhdGUuc2VhcmNoUm93Tm9kZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VyaWFsaXplZFZhbHVlID0gdGhpcy5zdGF0ZS5zZWFyY2hSb3dOb2Rlcy5tYXAoKHJvdzogUm93Tm9kZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcm93LmlzQ2hlY2tlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgcm93LmlzU2VsZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHJvdy5pbmRldGVybWluYXRlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcm93O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuY2hlY2tlZHMgPSBbXTtcclxuICAgICAgICB0aGlzLnNlbGVjdGlvbnMgPSBbXTtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkUm93ID0gdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zaG93Q2hlY2tBbGwgJiYgdGhpcy5oZWFkZXJDaGVja2JveENtcCkge1xyXG4gICAgICAgICAgICB0aGlzLmhlYWRlckNoZWNrYm94Q21wLmNoa0FsbC5uYXRpdmVFbGVtZW50LmluZGV0ZXJtaW5hdGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5oZWFkZXJDaGVja2JveENtcC5jaGVja2VkID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZGV0ZWN0Q2hhbmdlcykge1xyXG4gICAgICAgICAgICB0aGlzLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIGRldGVjdENoYW5nZXMoKTogVHJlZVRhYmxlQ29tcG9uZW50IHtcclxuICAgICAgICB0aGlzLmNkUmVmLm1hcmtGb3JDaGVjaygpO1xyXG4gICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1zdHJpbmctbGl0ZXJhbFxyXG4gICAgICAgIGlmICghdGhpcy5jZFJlZlsnZGVzdHJveWVkJ10pIHtcclxuICAgICAgICAgICAgdGhpcy5jZFJlZi5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIGNsZWFyQ2hlY2tlZHMoKTogVHJlZVRhYmxlQ29tcG9uZW50IHtcclxuICAgICAgICBpZiAodGhpcy5jaGVja2VkcyAmJiB0aGlzLmNoZWNrZWRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLmZpbmRSb3dOb2Rlcyh0aGlzLmNoZWNrZWRzLm1hcCh0biA9PiB0bi5kYXRhW3RoaXMuaWRGaWVsZF0pKS5mb3JFYWNoKHJuID0+IHtcclxuICAgICAgICAgICAgICAgIHJuLmlzQ2hlY2tlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuY2hlY2tlZHMgPSBbXTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2hvd0NoZWNrQWxsICYmIHRoaXMuaGVhZGVyQ2hlY2tib3hDbXApIHtcclxuICAgICAgICAgICAgdGhpcy5oZWFkZXJDaGVja2JveENtcC5jaGtBbGwubmF0aXZlRWxlbWVudC5pbmRldGVybWluYXRlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyQ2hlY2tib3hDbXAuY2hlY2tlZCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgY2xlYXJTZWxlY3Rpb25zKCk6IFRyZWVUYWJsZUNvbXBvbmVudCB7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNlcmlhbGl6ZWRWYWx1ZSAmJiB0aGlzLnNlcmlhbGl6ZWRWYWx1ZS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXJpYWxpemVkVmFsdWUuZm9yRWFjaChuID0+IHtcclxuICAgICAgICAgICAgICAgIG4uaXNTZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc3RhdGUucm93Tm9kZXMuZm9yRWFjaChuID0+IHtcclxuICAgICAgICAgICAgbi5pc1NlbGVjdGVkID0gZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGlvbnMgJiYgdGhpcy5zZWxlY3Rpb25zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBjb25zdCBub2RlSWRzID0gdGhpcy5zZWxlY3Rpb25zLm1hcCh0biA9PiB0bi5kYXRhW3RoaXMuaWRGaWVsZF0pO1xyXG4gICAgICAgICAgICB0aGlzLmZpbmRSb3dOb2Rlcyhub2RlSWRzKS5mb3JFYWNoKHJuID0+IHtcclxuICAgICAgICAgICAgICAgIHJuLmlzU2VsZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNpbmdsZVNlbGVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJuLmlzQ2hlY2tlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc2VsZWN0aW9ucyA9IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkUm93ID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgLyoqIOmAieS4reesrDHkuKrlj6/ku6XpgInkuK3nmoToioLngrkgKi9cclxuICAgIHNlbGVjdEZpcnN0Tm9kZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5yb3dOb2RlcyAmJiB0aGlzLnN0YXRlLnJvd05vZGVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBjb25zdCBmaXJzdENhblNlbGVjdE5vZGUgPSB0aGlzLnN0YXRlLnJvd05vZGVzLmZpbmQobiA9PiBuLm5vZGUuc2VsZWN0YWJsZSk7XHJcbiAgICAgICAgICAgIGlmIChmaXJzdENhblNlbGVjdE5vZGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Tm9kZShmaXJzdENhblNlbGVjdE5vZGUuaWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2Nyb2xsVG9DdXJyZW50Um93KGlkOiBzdHJpbmcpIHtcclxuICAgICAgICBjb25zdCB0cklkID0gJ3Jvd25vZGUtJyArIGlkO1xyXG4gICAgICAgIC8vIGNvbnN0IHRyRWxlID0gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodHJJZCk7XHJcbiAgICAgICAgY29uc3QgdHJFbGUgPSB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcignIycgKyB0cklkKSB8fCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0cklkKTtcclxuICAgICAgICBpZiAodHJFbGUgJiYgdHJFbGUuY2xvc2VzdCgnLmZhcnJpcy10cmVldGFibGUnKSAmJiB0ckVsZS5jbG9zZXN0KCcuZmFycmlzLXRyZWV0YWJsZScpLmlkID09PSB0aGlzLmlkKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0VsZW1lbnRJblZpZXdwb3J0KHRyRWxlKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRyRWxlLnNjcm9sbEludG9WaWV3SWZOZWVkZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0ckVsZS5zY3JvbGxJbnRvVmlld0lmTmVlZGVkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zdCBicm93c2VySW5mbyA9IHRoaXMudXRpbHMuZ2V0QnJvd3NlclR5cGUoKTtcclxuICAgICAgICAgICAgICAgIGlmIChicm93c2VySW5mby5mZiAmJiB0aGlzLnV0aWxzLmdldEZGVmVyKCkgPCA1OCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyRWxlLnNjcm9sbEludG9WaWV3KCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyRWxlLnNjcm9sbEludG9WaWV3KHsgYmxvY2s6ICduZWFyZXN0JywgaW5saW5lOiAnbmVhcmVzdCcgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0ckVsZS5zY3JvbGxJbnRvVmlldyh7IGJsb2NrOiAnbmVhcmVzdCd9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaXNFbGVtZW50SW5WaWV3cG9ydChlbCkge1xyXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lckVsID0gdGhpcy5lbC5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mYXJyaXMtdHJlZXRhYmxlLWJvZHknKTtcclxuICAgICAgICBpZiAoIWNvbnRhaW5lckVsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gY29udGFpbmVyRWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgY29uc3Qgdmlld1BvcnRIZWlnaHQgPSBjb250YWluZXIuaGVpZ2h0O1xyXG4gICAgICAgIGNvbnN0IG9mZnNldFRvcCA9IGVsLm9mZnNldFRvcCArIHRoaXMudG9wSGlkZUhlaWdodDtcclxuICAgICAgICBjb25zdCBzY3JvbGxUb3AgPSB0aGlzLnBzUmVmLmRpcmVjdGl2ZVJlZi5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQuc2Nyb2xsVG9wO1xyXG4gICAgICAgIGNvbnN0IHRvcCA9IG9mZnNldFRvcCAtIHNjcm9sbFRvcDtcclxuICAgICAgICByZXR1cm4gIHRvcCA+PSAwICYmIHRvcCA8PSB2aWV3UG9ydEhlaWdodDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9zY3JvbGxUb05vZGUobm9kZUlkOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLnNjcm9sbFRvQ3VycmVudE5vZGUobm9kZUlkKTtcclxuICAgIH1cclxuXHJcbiAgICBzY3JvbGxUb0N1cnJlbnROb2RlKG5vZGVpZCA9ICcnKSB7XHJcbiAgICAgICAgbGV0IGlkID0gbm9kZWlkO1xyXG4gICAgICAgIGlmICghbm9kZWlkICYmIHRoaXMuc2VsZWN0ZWRSb3cpIHtcclxuICAgICAgICAgICAgaWQgPSB0aGlzLnNlbGVjdGVkUm93LmlkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5zY3JvbGxUb0N1cnJlbnRSb3coaWQpO1xyXG4gICAgICAgIGlmICghcmVzdWx0KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJvd05vZGUgPSB0aGlzLmZpbmRSb3dOb2RlKGlkKTtcclxuICAgICAgICAgICAgY29uc3Qgc2hvd1Jvd3NPbmVQYWdlciA9IE1hdGguY2VpbCh0aGlzLnNjb3JsbEJvZHlIZWlnaHQgLyB0aGlzLnJvd0hlaWdodCApICsgMTtcclxuICAgICAgICAgICAgaWYgKHJvd05vZGUucGFyZW50cyAmJiByb3dOb2RlLnBhcmVudHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICByb3dOb2RlLnBhcmVudHMuZm9yRWFjaChwaWQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kTm9kZShwaWQsIGZhbHNlLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgY29uc3Qgcm93SW5kZXggPSB0aGlzLnN0YXRlLnJvd05vZGVzLmZpbHRlcihuID0+IG4udmlzaWJsZSkuZmluZEluZGV4KG4gPT4gbi5pZCA9PT0gaWQpO1xyXG4gICAgICAgICAgICBpZiAocm93SW5kZXggPCBzaG93Um93c09uZVBhZ2VyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy52aXJ0dWFsaXplZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyRGF0YSgwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG9DdXJyZW50Um93KGlkKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IHRvcCA9IHJvd0luZGV4ICogdGhpcy5yb3dIZWlnaHQ7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy52aXJ0dWFsaXplZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJEYXRhKHRvcCAtIHRoaXMucm93SGVpZ2h0KTtcclxuXHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbFRvQ3VycmVudFJvdyhpZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucHNSZWYgJiYgdGhpcy5wc1JlZi5kaXJlY3RpdmVSZWYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wc1JlZi5kaXJlY3RpdmVSZWYuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LnNjcm9sbFRvcCArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sIDUwKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG9ZKHRvcCAtIHRoaXMucm93SGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG9DdXJyZW50Um93KGlkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKiog6YCJ5Lit5oyH5a6aSUQg55qE6IqC54K5LFxyXG4gICAgICogZGV0ZWN0Q2hhbmdlczog6Kem5Y+R6ISP5YC85qOA5p+l77yM6buY6K6k5Li6IHRydWVcclxuICAgICAqIGdvdG9jdXJyZW50OiDkvb/nlKjpgInkuK3oioLngrnlj6/op4HvvIzpu5jorqTkuLogdHJ1ZVxyXG4gICAgICovXHJcbiAgICBzZWxlY3ROb2RlKGlkOiBzdHJpbmcsIGRldGVjdENoYW5nZXMgPSB0cnVlLCBnb3RvY3VycmVudCA9IHRydWUpOiBUcmVlVGFibGVDb21wb25lbnQge1xyXG4gICAgICAgIGlmICghaWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBub2RlID0gdGhpcy5maW5kUm93Tm9kZShpZCk7XHJcbiAgICAgICAgY29uc3QgZW1pdCA9ICF0aGlzLnNlbGVjdGVkUm93IHx8ICh0aGlzLnNlbGVjdGVkUm93ICYmIGlkICE9PSB0aGlzLnNlbGVjdGVkUm93LmlkKTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAobm9kZSAmJiBlbWl0KSB7XHJcbiAgICAgICAgICAgIG5vZGUuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNpbmdsZVNlbGVjdCB8fCB0aGlzLm9ubHlTZWxlY3RTZWxmKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyU2VsZWN0aW9ucygpO1xyXG4gICAgICAgICAgICAgICAgbm9kZS5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9ucyA9IFtub2RlLm5vZGVdO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tPblNlbGVjdCAmJiB0aGlzLnNob3dDaGVja2JveCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5vZGUuaXNDaGVja2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tdWx0aVNlbGVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldENoZWNrZWRzKG5vZGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJDaGVja2VkcygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWRzID0gW25vZGUubm9kZV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jYXNjYWRlQ2hlY2sgJiYgdGhpcy5jYXNjYWRlVXApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVQYXJlbnRDaGVja2JveFN0YXR1cyhub2RlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFNlbGVjdGlvbnMobm9kZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3cgPSBub2RlLm5vZGU7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0Tm9kZUNoYW5nZWRTdWJqZWN0Lm5leHQoaWQpO1xyXG4gICAgICAgICAgICB0aGlzLm5vZGVTZWxlY3RlZC5lbWl0KHsgbm9kZTogbm9kZS5ub2RlLCBpbnN0YW5jZTogdGhpcyB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNlcmlhbGl6ZWRWYWx1ZS5maW5kKG49Pm4uaWQgPT0gdGhpcy5zZWxlY3RlZFJvdy5pZCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VyaWFsaXplZFZhbHVlLmZpbmQobj0+bi5pZCA9PSB0aGlzLnNlbGVjdGVkUm93LmlkKS5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChkZXRlY3RDaGFuZ2VzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZ290b2N1cnJlbnQgJiYgdGhpcy5maXhlZEhlYWRlcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxUb0N1cnJlbnROb2RlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoIW5vZGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3cgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgdGhpcy53cml0ZUNvbnNvbGUoYOacquaJvuWIsElE5Li6ICR7aWR9IOeahOaVsOaNru+8ge+8gWApXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIOWPlua2iOmAieS4rSAqL1xyXG4gICAgdW5TZWxlY3ROb2RlKGlkOiBzdHJpbmcsIGRldGVjdENoYW5nZXMgPSB0cnVlKSB7XHJcbiAgICAgICAgY29uc3Qgcm93Tm9kZSA9IHRoaXMuZmluZFJvd05vZGUoaWQpO1xyXG4gICAgICAgIGlmIChyb3dOb2RlKSB7XHJcbiAgICAgICAgICAgIHJvd05vZGUuaXNTZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zaW5nbGVTZWxlY3QpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJTZWxlY3Rpb25zKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHJvd05vZGUuaXNDaGVja2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbnMgPSBbXTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9ubHlTZWxlY3RTZWxmKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25zID0gW107XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U2VsZWN0aW9ucyhyb3dOb2RlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGRldGVjdENoYW5nZXMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMubm9kZVVuU2VsZWN0LmVtaXQoeyBub2RlOiByb3dOb2RlLm5vZGUsIGluc3RhbmNlOiB0aGlzIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMud3JpdGVDb25zb2xlKGDmnKrmib7liLBJROS4uiR7aWR955qE5pWw5o2u77yB77yBYCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKiDpgInkuK3lpJrooYzmlbDmja4gKi9cclxuICAgIHNlbGVjdE5vZGVzKGlkczogc3RyaW5nW10sIGRldGVjdENoYW5nZXMgPSB0cnVlLCBlbWl0Tm9kZVNlbGVjdGVkID0gZmFsc2UpOiBUcmVlVGFibGVDb21wb25lbnQge1xyXG4gICAgICAgIGlmIChpZHMgJiYgaWRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBjb25zdCBub2RlcyA9IHRoaXMuZmluZFJvd05vZGVzKGlkcykubWFwKHJuID0+IHtcclxuICAgICAgICAgICAgICAgIHJuLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTZWxlY3Rpb25zKHJuKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBybi5ub2RlO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9ucyA9IFsuLi50aGlzLnNlbGVjdGlvbnNdO1xyXG5cclxuICAgICAgICAgICAgaWYgKGRldGVjdENoYW5nZXMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdE5vZGVDaGFuZ2VkU3ViamVjdC5uZXh0KGlkcy5qb2luKCcsJykpO1xyXG4gICAgICAgICAgICBpZiAoZW1pdE5vZGVTZWxlY3RlZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ub2RlU2VsZWN0ZWQuZW1pdCh7IG5vZGU6IG5vZGVzLCBpbnN0YW5jZTogdGhpcyB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKiog5Y+W5raI6YCJ5LitICovXHJcbiAgICB1blNlbGVjdE5vZGVzKGlkcz86IHN0cmluZ1tdKSB7XHJcbiAgICAgICAgaWYgKGlkcyAmJiBpZHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJvd25vZGVzID0gdGhpcy5maW5kUm93Tm9kZXMoaWRzKTtcclxuICAgICAgICAgICAgaWYgKHJvd25vZGVzICYmIHJvd25vZGVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgcm93bm9kZXMuZm9yRWFjaChybiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcm4uaXNTZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U2VsZWN0aW9ucyhybik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9ucyA9IFsuLi50aGlzLnNlbGVjdGlvbnNdO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGVVblNlbGVjdC5lbWl0KHsgbm9kZTogcm93bm9kZXMubWFwKHIgPT4gci5ub2RlKSwgaW5zdGFuY2U6IHRoaXMgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmNsZWFyU2VsZWN0aW9ucygpO1xyXG4gICAgICAgICAgICB0aGlzLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDpkqnpgInmjIflrprnmoToioLngrlcclxuICAgICAqIEBwYXJhbSB1cGRhdGVQYXJlbnRDaGVja2JveFN0YXR1czog5piv5ZCm5pu05paw54i257qn6IqC54K5Y2hlY2tib3gg54q25oCBLCDpu5jorqTkuLogdHJ1ZVxyXG4gICAgICogQHBhcmFtIGRldGVjdENoYW5nZXMg6Kem5Y+R5Y+Y5pu05qOA5rWL44CC6buY6K6k5Li6IHRydWVcclxuICAgICAqL1xyXG4gICAgY2hlY2tlZE5vZGUoaWQ6IHN0cmluZywgdXBkYXRlUGFyZW50Q2hlY2tib3hTdGF0dXMgPSB0cnVlLCBkZXRlY3RDaGFuZ2VzID0gdHJ1ZSkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzRW5hYmxlTXVsdGlTZWxlY3QoKSkge1xyXG4gICAgICAgICAgICBjb25zdCBub2RlID0gdGhpcy5maW5kUm93Tm9kZShpZCk7XHJcbiAgICAgICAgICAgIGlmIChub2RlKSB7XHJcbiAgICAgICAgICAgICAgICBub2RlLmlzQ2hlY2tlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNDaGVja2VkKG5vZGUubm9kZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLmNoZWNrZWRzID0gWy4uLnRoaXMuY2hlY2tlZHMgfHwgW10sIG5vZGUubm9kZV07XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRDaGVja2Vkcyhub2RlLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHVwZGF0ZVBhcmVudENoZWNrYm94U3RhdHVzICYmIHRoaXMuY2FzY2FkZUNoZWNrICYmIHRoaXMuY2FzY2FkZVVwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUGFyZW50Q2hlY2tib3hTdGF0dXMobm9kZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGRldGVjdENoYW5nZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMubm9kZUNoZWNrZWQuZW1pdCh7IG9yaWdpbmFsRXZlbnQ6IG51bGwsIG5vZGU6IG5vZGUubm9kZSwgaW5zdGFuY2U6IHRoaXMgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLndyaXRlQ29uc29sZShg5pyq5om+5YiwSUTkuLoke2lkfeeahOaVsOaNru+8ge+8gWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHVuQ2hlY2tlZE5vZGUoaWQ6IHN0cmluZywgdXBkYXRlUGFyZW50Q2hlY2tib3hTdGF0dXMgPSB0cnVlLCApIHtcclxuICAgICAgICBpZiAodGhpcy5pc0VuYWJsZU11bHRpU2VsZWN0KCkpIHtcclxuICAgICAgICAgICAgY29uc3Qgcm93bm9kZSA9IHRoaXMuZmluZFJvd05vZGUoaWQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHJvd25vZGUpIHtcclxuICAgICAgICAgICAgICAgIHJvd25vZGUuaXNDaGVja2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldENoZWNrZWRzKHJvd25vZGUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0T25DaGVjaykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJvd25vZGUuaXNTZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U2VsZWN0aW9ucyhyb3dub2RlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRSb3cgJiYgdGhpcy5zZWxlY3RlZFJvdy5pZCA9PT0gaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zaW5nbGVTZWxlY3QgfHwgIXRoaXMuY2FzY2FkZUNoZWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVOb2RlU3RhdHVzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh1cGRhdGVQYXJlbnRDaGVja2JveFN0YXR1cyAmJiB0aGlzLmNhc2NhZGVDaGVjayAmJiB0aGlzLmNhc2NhZGVVcCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVBhcmVudENoZWNrYm94U3RhdHVzKHJvd25vZGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tWYWx1ZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja1ZhbHVlcyA9IHRoaXMuY2hlY2tWYWx1ZXMuZmlsdGVyKG4gPT4gbiAhPT0gaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrVmFsdWVzQ2hhbmdlLmVtaXQodGhpcy5jaGVja1ZhbHVlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vZGVVbkNoZWNrZWQuZW1pdCh7IG5vZGU6IHJvd25vZGUsIGluc3RhbmNlOiB0aGlzIH0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB1bk5vZGVzID0gdGhpcy5jYXNjYWRlTm9kZXMocm93bm9kZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tlZHMgPSBbLi4udGhpcy5jaGVja2Vkc107XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja1ZhbHVlc0NoYW5nZS5lbWl0KHRoaXMuY2hlY2tWYWx1ZXMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vZGVVbkNoZWNrZWQuZW1pdCh7IG5vZGU6IHJvd25vZGUsIG5vZGVzOiB1bk5vZGVzLCBpbnN0YW5jZTogdGhpcyB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy53cml0ZUNvbnNvbGUoYOacquaJvuWIsElE5Li6JHtpZH3nmoTmlbDmja7vvIHvvIFgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9jaGVja2VkTm9kZXMoaWRzOiBzdHJpbmdbXSwgY2hlY2tlZDogYm9vbGVhbikge1xyXG4gICAgICAgIGNvbnN0IHBhcmVudElEUyA9IFtdO1xyXG4gICAgICAgIGNvbnN0IG5vZGVzID0gdGhpcy5maW5kUm93Tm9kZXMoaWRzKS5tYXAocm4gPT4ge1xyXG4gICAgICAgICAgICBwYXJlbnRJRFMucHVzaChybi5wYXJlbnRzKTtcclxuICAgICAgICAgICAgaWYgKHJuLm5vZGUuc2VsZWN0YWJsZSkge1xyXG4gICAgICAgICAgICAgICAgcm4uaXNDaGVja2VkID0gY2hlY2tlZDtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0Q2hlY2tlZHMocm4sIGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcm4ubm9kZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmNoZWNrZWRzID0gWy4uLnRoaXMuY2hlY2tlZHNdO1xyXG4gICAgICAgIGlmICh0aGlzLmNhc2NhZGVDaGVjayAmJiB0aGlzLmNhc2NhZGVVcCkge1xyXG4gICAgICAgICAgICAvLyDmm7TmlrDniLboioLngrnlpI3moYbnmoTpgInkuK3nirbmgIFcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVQYXJlbnRzQ2hlY2tTdGF0dXMocGFyZW50SURTKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBub2RlcztcclxuICAgIH1cclxuXHJcbiAgICAvKiog5om56YeP6YCJ5Lit6IqC54K5XHJcbiAgICAgKiBAcGFyYW0gaWRzOiBpZCDpm4blkIhcclxuICAgICAqIEBwYXJhbSBkZXRlY3RDaGFuZ2VzOiBib29sZWFuICDpu5jorqTkuLogdHJ1ZSAs5piv5ZCm6Kem5Y+R5Y+Y5pu05qOA5rWLXHJcbiAgICAgKiBjbG9zZUNhc2NhZGU6ICDmiafooYzlj5bmtojpkqnpgInml7bmmK/lkKblhbPpl63nuqfogZTlip/og73jgILpu5jorqTkuLogZmFsc2VcclxuICAgICAqICAgICAg6K6+5Li6dHJ1ZeaXtu+8jOmSqemAieWwhuemgeeUqOe6p+iBlOeahOWKn+iDve+8jOS7heWkhOeQhuW9k+WJjeiKgueCueeahOmAieS4reeKtuaAgeOAguaJp+ihjOWujOavleWQju+8jOaBouWkjeWOn+WFiOeahOe6p+iBlOmAiemhueOAglxyXG4gICAgICovXHJcbiAgICBjaGVja2VkTm9kZXMoaWRzOiBhbnlbXSwgZGV0ZWN0Q2hhbmdlcyA9IHRydWUsIGVtaXQgPSB0cnVlLCBjbG9zZUNhc2NhZGU/OiBib29sZWFuKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNFbmFibGVNdWx0aVNlbGVjdCgpKSB7XHJcbiAgICAgICAgICAgIGlmIChpZHMgJiYgaWRzLmxlbmd0aCkge1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IF9jYXNjYWRlID0gdGhpcy5jYXNjYWRlQ2hlY2s7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2xvc2VDYXNjYWRlICYmIF9jYXNjYWRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYXNjYWRlQ2hlY2sgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBub2RlcyA9IHRoaXMuX2NoZWNrZWROb2RlcyhpZHMsIHRydWUpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjbG9zZUNhc2NhZGUgJiYgX2Nhc2NhZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyDmgaLlpI3nuqfogZRcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhc2NhZGVDaGVjayA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVBbGxDaGVja2JveFN0YXR1cygpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIHRoaXMuY2hlY2tlZHMgPSBub2RlcztcclxuICAgICAgICAgICAgICAgIGlmIChkZXRlY3RDaGFuZ2VzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGVtaXQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vZGVDaGVja2VkLmVtaXQoeyBvcmlnaW5hbEV2ZW50OiBudWxsLCBub2RlOiBub2Rlcywgbm9kZXMsIGluc3RhbmNlOiB0aGlzIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5Y+W5raI6YCJ5Lit55qE6IqC54K5LlxyXG4gICAgICogaWRzOiDmoIfor4ZJZCDmlbDnu4RcclxuICAgICAqIGNsb3NlQ2FzY2FkZTog5omn6KGM5Y+W5raI6ZKp6YCJ5pe25piv5ZCm5YWz6Zet57qn6IGU5Yqf6IO944CC6buY6K6k5Li6IGZhbHNlXHJcbiAgICAgKiAgICAg6K6+5Li6dHJ1ZeaXtu+8jOmSqemAieWwhuemgeeUqOe6p+iBlOeahOWKn+iDve+8jOS7heWkhOeQhuW9k+WJjeiKgueCueeahOmAieS4reeKtuaAgeOAguaJp+ihjOWujOavleWQju+8jOaBouWkjeWOn+WFiOeahOe6p+iBlOmAiemhueOAglxyXG4gICAgICogZW1pdDog5piv5ZCm6Kem5Y+R5Y+W5raI5Yu+6YCJ5LqL5Lu244CC6buY6K6k5Li6IHRydWVcclxuICAgICAqL1xyXG4gICAgdW5DaGVja2VkTm9kZXMoaWRzOiBzdHJpbmdbXSwgY2xvc2VDYXNjYWRlPzogYm9vbGVhbiwgZW1pdCA9IHRydWUpIHtcclxuXHJcbiAgICAgICAgaWYgKGlkcyAmJiBpZHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IF9jYXNjYWRlID0gdGhpcy5jYXNjYWRlQ2hlY2s7XHJcbiAgICAgICAgICAgIGlmIChjbG9zZUNhc2NhZGUgJiYgX2Nhc2NhZGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FzY2FkZUNoZWNrID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG5vZGVzID0gdGhpcy5fY2hlY2tlZE5vZGVzKGlkcywgZmFsc2UpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGNsb3NlQ2FzY2FkZSAmJiBfY2FzY2FkZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jYXNjYWRlQ2hlY2sgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgLy8gdGhpcy5jaGVja2VkcyA9IG5vZGVzO1xyXG4gICAgICAgICAgICBpZiAoZW1pdCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ub2RlVW5DaGVja2VkLmVtaXQoeyBvcmlnaW5hbEV2ZW50OiBudWxsLCBub2RlOiBub2Rlcywgbm9kZXMsIGluc3RhbmNlOiB0aGlzIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5jbGVhckNoZWNrZWRzKCk7XHJcbiAgICAgICAgICAgIHRoaXMuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmaW5kUm93Tm9kZShpZDogc3RyaW5nKTogUm93Tm9kZSB7XHJcbiAgICAgICAgaWYgKGlkKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLnJvd05vZGVzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5yb3dOb2Rlcy5maW5kKG4gPT4gbi5pZCA9PT0gaWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiDlsIblnKggdjAuMi54IOW6n+W8g++8m+ivt+S9v+eUqCBmaW5kUm93Tm9kZSDmlrnms5UgKi9cclxuICAgIGZpbmROb2RlKGlkOiBzdHJpbmcpOiBSb3dOb2RlIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5maW5kUm93Tm9kZShpZCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmoLnmja7lvZPliY3oioLngrlJRO+8jOiOt+WPlumhtue6p+eItuiKgueCuVxyXG4gICAgICogQHBhcmFtIGlkIOW9k+WJjeiKgueCuUlEXHJcbiAgICAgKiBAcmV0dXJucyDov5Tlm57pobbnuqfoioLngrlcclxuICAgICAqL1xyXG4gICAgZ2V0Um9vdChpZDogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3Qgcm93Tm9kZSA9IHRoaXMuZmluZFJvd05vZGUoaWQpO1xyXG4gICAgICAgIGlmIChyb3dOb2RlKSB7XHJcbiAgICAgICAgICAgIGlmIChyb3dOb2RlLnBhcmVudHMgJiYgcm93Tm9kZS5wYXJlbnRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmluZFJvd05vZGUocm93Tm9kZS5wYXJlbnRzWzBdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcm93Tm9kZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGZpbmRSb3dOb2RlcyhpZHM6IHN0cmluZ1tdKTogUm93Tm9kZVtdIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5yb3dOb2Rlcy5maWx0ZXIocm4gPT4gaWRzLmluZGV4T2Yocm4uaWQpID4gLTEpO1xyXG4gICAgfVxyXG5cclxuICAgIGNoZWNrQWxsTm9kZXMoYXJncz86IGFueSkge1xyXG4gICAgICAgIGxldCByb3dOb2RlcyA9IHRoaXMuZ2V0Q3VycmVudEFsbFJvd05vZGVzKCk7XHJcbiAgICAgICAgcm93Tm9kZXMgPSByb3dOb2Rlcy5maWx0ZXIobiA9PiAobi5ub2RlLnNlbGVjdGFibGUgfHwgbi5ub2RlLnNlbGVjdGFibGUgPT09IHVuZGVmaW5lZCkpO1xyXG5cclxuICAgICAgICB0aGlzLmNoZWNrZWRzID0gcm93Tm9kZXMubWFwKG4gPT4ge1xyXG4gICAgICAgICAgICBuLmluZGV0ZXJtaW5hdGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy50dFNlcnZpY2Uub25DaGFuZ2VDaGVja2JveFN0YXR1cyhuKTtcclxuICAgICAgICAgICAgaWYgKG4ubm9kZS5zZWxlY3RhYmxlIHx8IG4ubm9kZS5zZWxlY3RhYmxlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIG4uaXNDaGVja2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbi5ub2RlO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zZWxlY3RPbkNoZWNrICYmICF0aGlzLm9ubHlTZWxlY3RTZWxmKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9ucyA9IHJvd05vZGVzLm1hcChuID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChuLm5vZGUuc2VsZWN0YWJsZSB8fCBuLm5vZGUuc2VsZWN0YWJsZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbi5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBuLm5vZGU7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuc2VhcmNoZWQpIHtcclxuICAgICAgICAgICAgcm93Tm9kZXMuZm9yRWFjaChybiA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByb3cgPSB0aGlzLnN0YXRlLnJvd05vZGVzLmZpbmQobiA9PiBuLmlkID09PSBybi5pZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAocm93KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcm93LmlzU2VsZWN0ZWQgPSBybi5pc1NlbGVjdGVkO1xyXG4gICAgICAgICAgICAgICAgICAgIHJvdy5pc0NoZWNrZWQgPSBybi5pc0NoZWNrZWQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jaGVja0FsbC5lbWl0KGFyZ3MpO1xyXG5cclxuICAgICAgICB0aGlzLnVwZGF0ZUFsbENoZWNrYm94U3RhdHVzKCk7XHJcbiAgICAgICAgdGhpcy5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdW5DaGVja0FsbE5vZGVzKGFyZ3M/OiBhbnkpIHtcclxuICAgICAgICB0aGlzLmNsZWFyQWxsKCk7XHJcbiAgICAgICAgdGhpcy51bkNoZWNrQWxsLmVtaXQoYXJncyk7XHJcbiAgICAgICAgdGhpcy5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpc0VuYWJsZU11bHRpU2VsZWN0KCkge1xyXG4gICAgICAgIGlmICh0aGlzLnNpbmdsZVNlbGVjdCkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuc2hvd0NoZWNrYm94KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOS7juaVsOaNruS4reiOt+WPluiKgueCueWbvuagh1xyXG4gICAgLy8gaWNvbkZpZWxkIOS4uiBvYmplY3RcclxuICAgIC8vICAgICAg5aaC5p6cIOWxleW8gOWbvuagh+S4uuepuu+8jOaKmOWPoOWbvuagh+S4jeS4uuepuu+8jOaIluWPjeS5i++8jOWImeWxleW8gOS4juaKmOWPoOWbvuagh+S/neaMgeS4gOiHs++8m1xyXG4gICAgLy8gICAgICDlpoLmnpwg5Y+25a2Q5Zu+5qCH5Li656m677yM5YiZ5L2/55So57uE5Lu26buY6K6k55qE5Zu+5qCHXHJcbiAgICAvLyBpY29uRmllbGQg5Li6IOWtl+espuS4su+8miDliJnlj7blrZAg5bGV5byAIOaKmOWPoCDlm77moIfkvb/nlKjlkIzkuIDkuKrjgIIg5aaC5p6c5Li656m677yMIOWImeS9v+eUqOe7hOS7tum7mOiupOWbvuagh1xyXG4gICAgcHJpdmF0ZSBnZXROb2RlSWNvbkZyb21EYXRhKHRuOiBUcmVlTm9kZSkge1xyXG4gICAgICAgIGxldCBsZWFmID0gbnVsbDtcclxuICAgICAgICBsZXQgZXhwYW5kID0gbnVsbDtcclxuICAgICAgICBsZXQgY29sbGFwc2UgPSBudWxsO1xyXG4gICAgICAgIGlmICh0aGlzLnVzZUljb25Gcm9tRGF0YSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pY29uRmllbGQpIHtcclxuICAgICAgICAgICAgICAgIGxldCBfaWNvbkZpZWxkID0gJyc7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuaWNvbkZpZWxkID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgIF9pY29uRmllbGQgPSB0aGlzLmljb25GaWVsZDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodG5bX2ljb25GaWVsZF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGVhZiA9IHRuW19pY29uRmllbGRdO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlYWYgPSB0aGlzLnV0aWxzLmdldFZhbHVlKF9pY29uRmllbGQsIHRuLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZXhwYW5kID0gY29sbGFwc2UgPSBsZWFmO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pY29uRmllbGQubGVhZikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZWFmID0gdGhpcy51dGlscy5nZXRWYWx1ZSh0aGlzLmljb25GaWVsZC5sZWFmLCB0bi5kYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaWNvbkZpZWxkLmV4cGFuZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBhbmQgPSB0aGlzLnV0aWxzLmdldFZhbHVlKHRoaXMuaWNvbkZpZWxkLmV4cGFuZCwgdG4uZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmljb25GaWVsZC5jb2xsYXBzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xsYXBzZSA9IHRoaXMudXRpbHMuZ2V0VmFsdWUodGhpcy5pY29uRmllbGQuY29sbGFwc2UsIHRuLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV4cGFuZCAmJiAhY29sbGFwc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sbGFwc2UgPSBleHBhbmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWV4cGFuZCAmJiBjb2xsYXBzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBhbmQgPSBjb2xsYXBzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBsZWFmLCBleHBhbmQsIGNvbGxhcHNlXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRUcmVlSWNvbih0cmVlTm9kZTogVHJlZU5vZGUpIHtcclxuICAgICAgICBjb25zdCB0biA9IHRyZWVOb2RlO1xyXG4gICAgICAgIGxldCBsZWFmSWNvbiA9IHRoaXMubGVhZkljb24gfHwgJ2ZpbGUnO1xyXG4gICAgICAgIGxldCBleHBhbmRJY29uID0gdGhpcy5leHBhbmRJY29uIHx8ICdmb2xkZXItb3Blbic7XHJcbiAgICAgICAgbGV0IGNvbGxhcHNlSWNvbiA9IHRoaXMuY29sbGFwc2VJY29uIHx8ICdmb2xkZXInO1xyXG4gICAgICAgIGNvbnN0IGxvYWRpbmcgPSAnZi1sb2FkaW5nLXJvdW5kJztcclxuXHJcbiAgICAgICAgaWYgKHRuWydzaG93TG9hZGluZyddKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IFtsb2FkaW5nXTogdHJ1ZSB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRuLmljb24pIHtcclxuICAgICAgICAgICAgbGVhZkljb24gPSB0bi5pY29uO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRuLmV4cGFuZGVkSWNvbikge1xyXG4gICAgICAgICAgICBleHBhbmRJY29uID0gdG4uZXhwYW5kZWRJY29uO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRuLmNvbGxhcHNlZEljb24pIHtcclxuICAgICAgICAgICAgY29sbGFwc2VJY29uID0gdG4uY29sbGFwc2VkSWNvbjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnVzZUljb25Gcm9tRGF0YSkge1xyXG4gICAgICAgICAgICBjb25zdCB7IGxlYWYsIGV4cGFuZCwgY29sbGFwc2UgfSA9IHRoaXMuZ2V0Tm9kZUljb25Gcm9tRGF0YSh0cmVlTm9kZSk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLndoZW5EYXRhSWNvbkVtcHR5VXNlRGVmYXVsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGxlYWYpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZWFmSWNvbiA9IGxlYWY7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoZXhwYW5kKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXhwYW5kSWNvbiA9IGV4cGFuZDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChjb2xsYXBzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbGxhcHNlSWNvbiA9IGNvbGxhcHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbGVhZkljb24gPSBsZWFmIHx8ICcnO1xyXG4gICAgICAgICAgICAgICAgZXhwYW5kSWNvbiA9IGV4cGFuZCB8fCAnJztcclxuICAgICAgICAgICAgICAgIGNvbGxhcHNlSWNvbiA9IGNvbGxhcHNlIHx8ICcnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgY29uc3QgY29sbGFwc2VkRXhwcmVzc2lvbiA9ICghdG4ubGVhZiB8fCAhISh0bi5jaGlsZHJlbiAmJiB0bi5jaGlsZHJlbi5sZW5ndGgpKSAmJiAhdG4uZXhwYW5kZWQ7XHJcbiAgICAgICAgY29uc3QgZXhwYW5kZWRFeHByZXNzaW9uID0gISF0bi5leHBhbmRlZDtcclxuICAgICAgICBjb25zdCBsZWFmRXhwcmVzc2lvbiA9IHRuLmxlYWYgPT09IHVuZGVmaW5lZCA/ICghdG4uY2hpbGRyZW4gfHwgIXRuLmNoaWxkcmVuLmxlbmd0aCkgOiB0bi5sZWFmO1xyXG5cclxuICAgICAgICBjb25zdCBpY29ucyA9IHt9O1xyXG5cclxuICAgICAgICBpZiAobGVhZkV4cHJlc3Npb24gJiYgbGVhZkljb24pIHtcclxuICAgICAgICAgICAgaWNvbnNbbGVhZkljb25dID0gbGVhZkV4cHJlc3Npb247XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRuLmV4cGFuZGVkICYmIGV4cGFuZEljb24pIHtcclxuICAgICAgICAgICAgICAgIGljb25zW2V4cGFuZEljb25dID0gZXhwYW5kZWRFeHByZXNzaW9uO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvbGxhcHNlSWNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGljb25zW2NvbGxhcHNlSWNvbl0gPSBjb2xsYXBzZWRFeHByZXNzaW9uO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5pY29uQ2xzKSB7XHJcbiAgICAgICAgICAgIGljb25zW3RoaXMuaWNvbkNsc10gPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGljb25zO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY29tcGFyZShhLCBiKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBhID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICByZXR1cm4gYS5sb2NhbGVDb21wYXJlKGIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhID09PSBiID8gMCA6IChhID4gYiA/IDEgOiAtMSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBfc29ydChyMSwgcjIpIHtcclxuICAgICAgICBsZXQgciA9IDA7XHJcbiAgICAgICAgY29uc3Qgc29ydEZpZWxkcyA9IHRoaXMuc29ydE5hbWUuc3BsaXQoJywnKTtcclxuICAgICAgICBjb25zdCBvcmRlcnMgPSB0aGlzLnNvcnRPcmRlci5zcGxpdCgnLCcpO1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMuc29ydE5hbWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNvcnRGaWVsZHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3Qgc24gPSBzb3J0RmllbGRzW2ldO1xyXG4gICAgICAgICAgICBjb25zdCBzbyA9IG9yZGVyc1tpXTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGNvbCA9IHRoaXMuY29sdW1ucy5maW5kKGMgPT4gYy5maWVsZCA9PT0gc24pO1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgb3JkZXJieSA9IGNvbC5zb3J0ZXIgfHwgdGhpcy5jb21wYXJlO1xyXG4gICAgICAgICAgICBsZXQgdjEgPSB0aGlzLnV0aWxzLmdldFZhbHVlKHNuLCByMS5kYXRhKTtcclxuICAgICAgICAgICAgaWYgKHYxID09PSBudWxsIHx8IHYxID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHYxID0gJyc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGV0IHYyID0gdGhpcy51dGlscy5nZXRWYWx1ZShzbiwgcjIuZGF0YSk7XHJcbiAgICAgICAgICAgIGlmICh2MiA9PT0gbnVsbCB8fCB2MiA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICB2MiA9ICcnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHIgPSBvcmRlcmJ5KHYxLCB2Mik7XHJcbiAgICAgICAgICAgIGlmIChyICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gciAqIChzbyA9PT0gJ2FzYycgPyAxIDogLTEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByO1xyXG4gICAgfVxyXG5cclxuICAgIGNsaWVudFNvcnQoKSB7XHJcbiAgICAgICAgY29uc3Qgc29ydGVkRGF0YSA9IHRoaXMuZGF0YS5zb3J0KHRoaXMuX3NvcnQuYmluZCh0aGlzKSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHNvcnRDaGlsZE5vZGVzID0gKGNoaWxkTm9kZXMpID0+IHtcclxuICAgICAgICAgICAgY2hpbGROb2RlcyA9IGNoaWxkTm9kZXMuc29ydCh0aGlzLl9zb3J0LmJpbmQodGhpcykpO1xyXG4gICAgICAgICAgICBjaGlsZE5vZGVzLmZvckVhY2gobiA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAobi5jaGlsZHJlbiAmJiBuLmNoaWxkcmVuLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG4uY2hpbGRyZW4gPSBuLmNoaWxkcmVuLnNvcnQodGhpcy5fc29ydC5iaW5kKHRoaXMpKTtcclxuICAgICAgICAgICAgICAgICAgICBzb3J0Q2hpbGROb2RlcyhuLmNoaWxkcmVuKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBjaGlsZE5vZGVzO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHNvcnRlZERhdGEuZm9yRWFjaChjID0+IHtcclxuICAgICAgICAgICAgYy5jaGlsZHJlbiA9IHNvcnRDaGlsZE5vZGVzKGMuY2hpbGRyZW4pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmxvYWREYXRhKHNvcnRlZERhdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uU29ydENvbHVtbkNsaWNrKCRldmVudCwgY29sKSB7XHJcbiAgICAgICAgaWYgKCFjb2wuc29ydGFibGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBzb3J0TmFtZSA9IHRoaXMuc29ydE5hbWU7XHJcbiAgICAgICAgY29uc3Qgc29ydE9yZGVyID0gdGhpcy5zb3J0T3JkZXI7XHJcbiAgICAgICAgbGV0IHNvcnRGaWVsZHMgPSBbXTtcclxuICAgICAgICBsZXQgc29ydE9yZGVycyA9IFtdO1xyXG4gICAgICAgIGlmIChzb3J0TmFtZSkge1xyXG4gICAgICAgICAgICBzb3J0RmllbGRzID0gc29ydE5hbWUuc3BsaXQoJywnKTtcclxuICAgICAgICAgICAgc29ydE9yZGVycyA9IHNvcnRPcmRlci5zcGxpdCgnLCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgY29sT3JkZXIgPSBjb2wub3JkZXIgfHwgJ2FzYyc7XHJcbiAgICAgICAgbGV0IG5ld09yZGVyID0gY29sT3JkZXI7XHJcbiAgICAgICAgY29uc3QgaSA9IHNvcnRGaWVsZHMuZmluZEluZGV4KG4gPT4gbiA9PT0gY29sLmZpZWxkKTtcclxuICAgICAgICBpZiAoaSA+PSAwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IF9vcmRlciA9IHNvcnRPcmRlcnNbaV0gPT09ICdhc2MnID8gJ2Rlc2MnIDogJ2FzYyc7XHJcbiAgICAgICAgICAgIG5ld09yZGVyID0gX29yZGVyO1xyXG4gICAgICAgICAgICAvLyBpZiAodGhpcy5tdWx0aVNvcnQgJiYgbmV3T3JkZXIgPT09ICdhc2MnKSB7XHJcbiAgICAgICAgICAgIGlmIChuZXdPcmRlciA9PT0gJ2FzYycpIHtcclxuICAgICAgICAgICAgICAgIG5ld09yZGVyID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgc29ydEZpZWxkcy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgICAgICBzb3J0T3JkZXJzLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHNvcnRPcmRlcnNbaV0gPSBfb3JkZXI7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMubXVsdGlTb3J0KSB7XHJcbiAgICAgICAgICAgICAgICBzb3J0RmllbGRzLnB1c2goY29sLmZpZWxkKTtcclxuICAgICAgICAgICAgICAgIHNvcnRPcmRlcnMucHVzaChjb2xPcmRlcik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzb3J0RmllbGRzID0gW2NvbC5maWVsZF07XHJcbiAgICAgICAgICAgICAgICBzb3J0T3JkZXJzID0gW2NvbE9yZGVyXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29sLm9yZGVyID0gbmV3T3JkZXI7XHJcblxyXG4gICAgICAgIHRoaXMuc29ydE5hbWUgPSBzb3J0RmllbGRzLmpvaW4oJywnKTtcclxuICAgICAgICB0aGlzLnNvcnRPcmRlciA9IHNvcnRPcmRlcnMuam9pbignLCcpO1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMubXVsdGlTb3J0KSB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVGaWVsZE9yZGVyID0gKGNvbHM6IFRyZWVUYWJsZUNvbHVtbltdKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWNvbHMgfHwgIWNvbHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29scy5mb3JFYWNoKGMgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGMub3JkZXIgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgayA9IHNvcnRGaWVsZHMuZmluZEluZGV4KGYgPT4gZiA9PT0gYy5maWVsZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGsgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjLm9yZGVyID0gc29ydE9yZGVyc1trXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHVwZGF0ZUZpZWxkT3JkZXIodGhpcy5jb2x1bW5zKTtcclxuICAgICAgICAgICAgdGhpcy5jZFJlZi5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmJlZm9yZVNvcnRDb2x1bW4odGhpcy5zb3J0TmFtZSwgdGhpcy5zb3J0T3JkZXIpLnN1YnNjcmliZSgoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnJlbW90ZVNvcnQpIHtcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMucmVsb2FkKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsaWVudFNvcnQoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5jb2x1bW5Tb3J0ZWQuZW1pdCh7IHNvcnROYW1lOiB0aGlzLnNvcnROYW1lLCBzb3J0T3JkZXI6IHRoaXMuc29ydE9yZGVyIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiDmn6Xor6Llt6XlhbfmnaHliY3nq6/lrZfnrKbmn6Xor6IgKi9cclxuICAgIGZpbmRLZXlXb3JkcygkZXZlbnQpIHtcclxuICAgICAgICBjb25zdCBzZWFyY2hWYWx1ZSA9ICRldmVudC52YWx1ZTtcclxuICAgICAgICBjb25zdCBmaWVsZCA9ICRldmVudC5maWVsZDtcclxuICAgICAgICB0aGlzLmZpbmRGaWVsZCA9IGZpZWxkO1xyXG4gICAgICAgIGlmIChzZWFyY2hWYWx1ZSAmJiBzZWFyY2hWYWx1ZS5sZW5ndGggPj0gMikge1xyXG4gICAgICAgICAgICB0aGlzLmZpbmRWYWx1ZSA9IHNlYXJjaFZhbHVlO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFmaWVsZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy53cml0ZUNvbnNvbGUoJ1BsZWFzZSBzZXQgYSBmaWVsZCBmb3IgdGhlIEZpbmRGaWVsZCBwcm9wZXJ0eS4nLCAnd2FybicpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnNlYXJjaEhhbmRsZS5zZWFyY2hPbkNsaWVudChmaWVsZCwgc2VhcmNoVmFsdWUsIHRoaXMuc3RhdGUucm93Tm9kZXMpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHJlc3VsdCAmJiByZXN1bHQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpbmRSZXN1bHQgPSByZXN1bHQuc29ydCgoYSwgYikgPT4gYS5pbmRleCA9PT0gYi5pbmRleCA/IDAgOiAoYS5pbmRleCA+IGIuaW5kZXggPyAxIDogLTEpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmluZENvdW50ID0gcmVzdWx0Lmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmluZEN1cnJlbnQgPSAxO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zY3JvbGxUb05vZGUocmVzdWx0WzBdLmlkKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmhpZ2hMaWdodEtleXdvcmRzKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpbmRSZXN1bHQgPSBbXTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmluZEN1cnJlbnQgPSAwO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5maW5kQ291bnQgPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5yZXNldEZpbmRUZXh0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2RSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgbmV4dEZpbmRWYWx1ZShzdGVwKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmZpbmRSZXN1bHQgfHwgIXRoaXMuZmluZFJlc3VsdC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBhbGxIaWdoTGlnaHRzID0gQXJyYXkuZnJvbSh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNlYXJjaC1oaWdobGlnaHQnKSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmZpbmRDdXJyZW50ID09PSB0aGlzLmZpbmRSZXN1bHQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmluZEN1cnJlbnQgPSAxO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChzdGVwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpbmRDdXJyZW50ID0gdGhpcy5maW5kQ3VycmVudCArIHN0ZXA7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3RlcCA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5maW5kQ3VycmVudCA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmluZEN1cnJlbnQgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmluZEN1cnJlbnQrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgYWN0aXZlID0gdGhpcy5lbC5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZWFyY2gtaGlnaGxpZ2h0LmFjdGl2ZScpO1xyXG5cclxuICAgICAgICBpZiAoYWN0aXZlKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlQ2xhc3MoYWN0aXZlLCAnYWN0aXZlJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBfaW5kZXggPSB0aGlzLmZpbmRDdXJyZW50IC0gMTtcclxuICAgICAgICBjb25zdCBuZXh0Um93ID0gdGhpcy5maW5kUmVzdWx0W19pbmRleF07XHJcbiAgICAgICAgaWYgKG5leHRSb3cpIHtcclxuICAgICAgICAgICAgdGhpcy5fc2Nyb2xsVG9Ob2RlKG5leHRSb3cuaWQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMudmlydHVhbGl6ZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpc1snSElHSF9MSUdIVF9USU1FUiddKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzWydISUdIX0xJR0hUX1RJTUVSJ10pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzWydISUdIX0xJR0hUX1RJTUVSJ10gPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdHJJZCA9ICdyb3dub2RlLScgKyBuZXh0Um93LmlkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ciA9IHRoaXMuZWwubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIHRySWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhpZ2hMaWdodERvbSA9IHRyLnF1ZXJ5U2VsZWN0b3IoJy5zZWFyY2gtaGlnaGxpZ2h0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGlnaExpZ2h0RG9tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyhoaWdoTGlnaHREb20sICdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0sIDEwMCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChhbGxIaWdoTGlnaHRzW19pbmRleF0pIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKGFsbEhpZ2hMaWdodHNbX2luZGV4XSwgJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKiog5p+l6K+i5bel5YW35p2h5YmN56uv5a2X56ym5p+l6K+iICovXHJcbiAgICAvKlxyXG4gICAgZmluZEtleVdvcmRzKCRldmVudCkge1xyXG4gICAgICAgIGNvbnN0IHNlYXJjaFZhbHVlID0gJGV2ZW50LnZhbHVlO1xyXG4gICAgICAgIGNvbnN0IGZpZWxkID0gJGV2ZW50LmZpZWxkO1xyXG4gICAgICAgIHRoaXMuZmluZEZpZWxkID0gZmllbGQ7XHJcbiAgICAgICAgaWYgKHNlYXJjaFZhbHVlICYmIHNlYXJjaFZhbHVlLmxlbmd0aCA+PSAyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmluZFZhbHVlID0gc2VhcmNoVmFsdWU7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWZpZWxkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLndyaXRlQ29uc29sZSgnUGxlYXNlIHNldCBhIGZpZWxkIGZvciB0aGUgRmluZEZpZWxkIHByb3BlcnR5LicsICd3YXJuJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuc2VhcmNoSGFuZGxlLnNlYXJjaE9uQ2xpZW50KGZpZWxkLCBzZWFyY2hWYWx1ZSwgdGhpcy5zdGF0ZS5yb3dOb2Rlcyk7XHJcblxyXG4gICAgICAgICAgICBpZiAocmVzdWx0ICYmIHJlc3VsdC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmluZFJlc3VsdCA9IHJlc3VsdC5zb3J0KChhLCBiKSA9PiBhLmluZGV4ID09PSBiLmluZGV4ID8gMCA6IChhLmluZGV4ID4gYi5pbmRleCA/IDEgOiAtMSkpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZmlyc3RSb3dJbmRleCA9IHJlc3VsdFswXS5pbmRleDtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpbmRDb3VudCA9IHJlc3VsdC5sZW5ndGg7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgcGFyZW50cyA9IHRoaXMuc2VhcmNoSGFuZGxlLmZpbmRQYXJlbnRzKHJlc3VsdCwgdGhpcy5zdGF0ZS5yb3dOb2Rlcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5maW5kQ3VycmVudCA9IDE7XHJcbiAgICAgICAgICAgICAgICBbLi4ucGFyZW50cywgLi4ucmVzdWx0XS5mb3JFYWNoKChyOiBSb3dOb2RlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5leHBhbmROb2RlKHIuaWQpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHkgPSAwO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5yb3dOb2Rlcy5mb3JFYWNoKChyb3c6IFJvd05vZGUsIGluZGV4OiBudW1iZXIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocm93LnZpc2libGUgJiYgZmlyc3RSb3dJbmRleCA+IGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHkgKz0gdGhpcy5yb3dIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wc1JlZiAmJiB0aGlzLnBzUmVmLmRpcmVjdGl2ZVJlZikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHNSZWYuZGlyZWN0aXZlUmVmLnNjcm9sbFRvWSh5IC0gMzApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuaGlnaExpZ2h0S2V5d29yZHMoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmluZFJlc3VsdCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5maW5kQ3VycmVudCA9IDA7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpbmRDb3VudCA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnJlc2V0RmluZFRleHQoKTtcclxuICAgICAgICAgICAgdGhpcy5jZFJlZi5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG5leHRGaW5kVmFsdWUoc3RlcCkge1xyXG4gICAgICAgIGlmICghdGhpcy5maW5kUmVzdWx0IHx8ICF0aGlzLmZpbmRSZXN1bHQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgYWxsSGlnaExpZ2h0cyA9IEFycmF5LmZyb20odGhpcy5lbC5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZWFyY2gtaGlnaGxpZ2h0JykpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5maW5kQ3VycmVudCA9PT0gdGhpcy5maW5kUmVzdWx0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLmZpbmRDdXJyZW50ID0gMTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoc3RlcCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5maW5kQ3VycmVudCA9IHRoaXMuZmluZEN1cnJlbnQgKyBzdGVwO1xyXG4gICAgICAgICAgICAgICAgaWYgKHN0ZXAgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZmluZEN1cnJlbnQgPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbmRDdXJyZW50ID0gMTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpbmRDdXJyZW50Kys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGFjdGl2ZSA9IHRoaXMuZWwubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuc2VhcmNoLWhpZ2hsaWdodC5hY3RpdmUnKTtcclxuXHJcbiAgICAgICAgbGV0IF9pbmRleCA9IGFsbEhpZ2hMaWdodHMuaW5kZXhPZihhY3RpdmUpO1xyXG5cclxuICAgICAgICBpZiAoYWN0aXZlKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlQ2xhc3MoYWN0aXZlLCAnYWN0aXZlJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy52aXJ0dWFsaXplZCkge1xyXG5cclxuICAgICAgICAgICAgX2luZGV4ICs9ICFzdGVwID8gMSA6IHN0ZXA7XHJcblxyXG4gICAgICAgICAgICBpZiAoYWxsSGlnaExpZ2h0c1tfaW5kZXhdKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKGFsbEhpZ2hMaWdodHNbX2luZGV4XSwgJ2FjdGl2ZScpO1xyXG5cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIOWFiOa7muWKqOaMh+WumuS9jee9rlxyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV4dFJvdyA9IHRoaXMuZmluZFJlc3VsdFt0aGlzLmZpbmRDdXJyZW50IC0gMV07XHJcbiAgICAgICAgICAgICAgICBsZXQgeSA9IDA7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnJvd05vZGVzLmZvckVhY2goKHJvdzogUm93Tm9kZSwgaW5kZXg6IG51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyb3cudmlzaWJsZSAmJiBuZXh0Um93LmluZGV4ID4gaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeSArPSB0aGlzLnJvd0hlaWdodDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wc1JlZiAmJiB0aGlzLnBzUmVmLmRpcmVjdGl2ZVJlZikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHNSZWYuZGlyZWN0aXZlUmVmLnNjcm9sbFRvWSh5IC0gMzAsIDIwMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleVdvcmRzID0gdGhpcy5lbC5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZWFyY2gtaGlnaGxpZ2h0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3Moa2V5V29yZHNbMF0sICdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICB9LCAxMDApO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50RWw6IGFueSA9IGFsbEhpZ2hMaWdodHNbdGhpcy5maW5kQ3VycmVudCAtIDFdO1xyXG4gICAgICAgICAgICBpZiAoY3VycmVudEVsKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKGN1cnJlbnRFbCwgJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucHNSZWYgJiYgdGhpcy5wc1JlZi5kaXJlY3RpdmVSZWYpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzVG9wID0gY3VycmVudEVsLmNsb3Nlc3QoJ3RkJykub2Zmc2V0VG9wIC0gMzA7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wc1JlZi5kaXJlY3RpdmVSZWYuc2Nyb2xsVG9ZKHNUb3AsIDIwMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICB0aGlzLmNkUmVmLmRldGVjdENoYW5nZXMoKTtcclxuICAgIH1cclxuKi9cclxuICAgIGNsb3NlRmluZFBhbmVsKCkge1xyXG4gICAgICAgIHRoaXMuc2hvd0ZpbmRJbnB1dCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMucmVzZXRGaW5kVGV4dCgpO1xyXG4gICAgICAgIHRoaXMuY2RSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaGlnaExpZ2h0S2V5d29yZHMoKSB7XHJcbiAgICAgICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2RSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYWxsSGlnaExpZ2h0cyA9IHRoaXMuZWwubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2VhcmNoLWhpZ2hsaWdodCcpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFhbGxIaWdoTGlnaHRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3MoYWxsSGlnaExpZ2h0c1swXSwgJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICB9LCAxMDApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVzZXRGaW5kVGV4dCgpIHtcclxuICAgICAgICB0aGlzLmZpbmRWYWx1ZSA9ICcnO1xyXG4gICAgICAgIHRoaXMuZmluZEN1cnJlbnQgPSAwO1xyXG4gICAgICAgIHRoaXMuZmluZENvdW50ID0gMDtcclxuICAgICAgICB0aGlzLmZpbmRSZXN1bHQgPSBbXTtcclxuICAgIH1cclxuXHJcbiAgXHJcblxyXG4gICAgc2Nyb2xsVG9ZKHk6IG51bWJlciwgYW5pbWF0aW9ucyA9IDIwMCkge1xyXG4gICAgICAgIHRoaXMuc3RhdGUuc2Nyb2xsWSA9IHkgfHwgMDtcclxuICAgICAgICB0aGlzLnBzUmVmLmRpcmVjdGl2ZVJlZi5zY3JvbGxUb1koeSwgYW5pbWF0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaG93T3JIaWRlQ29sdW1uKGZpZWxkOiBzdHJpbmcgfCBzdHJpbmdbXSwgaXNIaWRlOiBib29sZWFuKSB7XHJcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZmllbGQpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29sdW1ucy5mb3JFYWNoKG4gPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkLmluZGV4T2Yobi5maWVsZCkgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG4udmlzaWJsZSA9ICFpc0hpZGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29sdW1ucy5mb3JFYWNoKG4gPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkID09PSBuLmZpZWxkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbi52aXNpYmxlID0gIWlzSGlkZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmNvbHVtbnNDaGFuZ2VkKCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2hvd0NvbHVtbihmaWVsZDogc3RyaW5nIHwgc3RyaW5nW10pIHtcclxuICAgICAgICB0aGlzLnNob3dPckhpZGVDb2x1bW4oZmllbGQsIGZhbHNlKTtcclxuICAgIH1cclxuXHJcbiAgICBoaWRlQ29sdW1uKGZpZWxkOiBzdHJpbmcgfCBzdHJpbmdbXSkge1xyXG4gICAgICAgIHRoaXMuc2hvd09ySGlkZUNvbHVtbihmaWVsZCwgdHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2hvd0NoaWxkc0xvYWRpbmcocGFyZW50Tm9kZTogVHJlZU5vZGUpIHtcclxuICAgICAgICBjb25zdCBjb2xzcGFuID0gdGhpcy5jb2x1bW5zLmZpbHRlcihuID0+IG4udmlzaWJsZSAhPT0gZmFsc2UpLmxlbmd0aDtcclxuICAgICAgICBjb25zdCBkYXRhID0geyBbdGhpcy5pZEZpZWxkXTogJ+ato+WcqOWKoOi9veS4rS4uLi4nLCBfX2NvbHNwYW5fXzogY29sc3BhbiB9O1xyXG4gICAgICAgIHRoaXMubG9hZENoaWxkcmVuKFt7IGRhdGEsIF9fY2hpbGRzX2xvYWRpbmdfXzogdHJ1ZSB9XSwgcGFyZW50Tm9kZSwgZmFsc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ2hpbGRzUGFnZUNoYW5nZWQoJGV2ZW50KSB7XHJcbiAgICAgICAgdGhpcy5jaGlsZHNQYWdlQ2hhbmdlZC5lbWl0KCRldmVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB0cklkMkRhdGFJZCh0cikge1xyXG4gICAgICAgIHJldHVybiB0ci5pZC5yZXBsYWNlKCdyb3dub2RlLScsICcnKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLy8g5b+r5o236ZSuXHJcbiAgICBvbktleWRvd25FdmVudCgkZXZlbnQpIHtcclxuICAgICAgICBpZiAoISRldmVudCB8fCAhdGhpcy5zaW5nbGVTZWxlY3QgfHwgIXRoaXMuZGF0YSB8fCAhdGhpcy5kYXRhLmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBrZXlzID0gWydBcnJvd1VwJywgJ0Fycm93RG93bicsICdBcnJvd0xlZnQnLCAnQXJyb3dSaWdodCddO1xyXG5cclxuICAgICAgICBpZiAoIWtleXMuaW5jbHVkZXMoJGV2ZW50LmtleSkgfHwgJGV2ZW50LnRhcmdldC5ub2RlTmFtZSA9PT0gJ0lOUFVUJykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgJGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdGhpcy5pbnB1dEdyb3VwLnRleHRib3gubmF0aXZlRWxlbWVudC5ibHVyKCk7XHJcbiAgICAgICAgbGV0IG5ld0lkeDtcclxuICAgICAgICBjb25zdCB0cnMgPSBBcnJheS5mcm9tKHRoaXMuYm9keVRhYmxlLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgndHInKSk7XHJcbiAgICAgICAgY29uc3QgdHJDb3VudCA9IHRycy5sZW5ndGg7XHJcbiAgICAgICAgbGV0IHNlbGVjdGVkVHJJbmRleCA9IC0xO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFJvdykge1xyXG4gICAgICAgICAgICBzZWxlY3RlZFRySW5kZXggPSB0cnMuZmluZEluZGV4KChuOiBhbnkpID0+IHRoaXMudHJJZDJEYXRhSWQobikgPT09IHRoaXMuc2VsZWN0ZWRSb3cuaWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCRldmVudC5jb2RlID09PSAnQXJyb3dEb3duJykge1xyXG4gICAgICAgICAgICBuZXdJZHggPSBzZWxlY3RlZFRySW5kZXggKyAxO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoJGV2ZW50LmNvZGUgPT09ICdBcnJvd1VwJykge1xyXG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWRUckluZGV4ICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgbmV3SWR4ID0gc2VsZWN0ZWRUckluZGV4IC0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkUm93ICYmICgkZXZlbnQuY29kZSA9PT0gJ0Fycm93UmlnaHQnIHx8ICRldmVudC5jb2RlID09PSAnQXJyb3dMZWZ0JykpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlRXhwYW5kKHRoaXMuc2VsZWN0ZWRSb3cpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAobmV3SWR4ID49IDAgJiYgbmV3SWR4IDwgdHJDb3VudCkge1xyXG4gICAgICAgICAgICBjb25zdCBfdHIgPSB0cnNbbmV3SWR4XSBhcyBhbnk7XHJcbiAgICAgICAgICAgIGlmIChfdHIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlkID0gdGhpcy50cklkMkRhdGFJZChfdHIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3ROb2RlKGlkKTtcclxuICAgICAgICAgICAgICAgIF90ci5zY3JvbGxJbnRvVmlldyh7IGJsb2NrOiAnbmVhcmVzdCcgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25CZWZvcmVTaG93Q29udGV4dE1lbnUgPSAoZTogYW55KSA9PiB7XHJcbiAgICAgICAgLy8gcm93XzFfZml4ZWRsZWZ0ICByb3dfMSAgcm93XzFfZml4ZWRyaWdodFxyXG4gICAgICAgIGNvbnN0IHsgY29udGV4dE1lbnVEb20sIGV2ZW50IH0gPSBlO1xyXG5cclxuICAgICAgICBsZXQgcm93SUQgPSBldmVudC50YXJnZXQuaWQ7XHJcblxyXG4gICAgICAgIGlmIChjb250ZXh0TWVudURvbSkge1xyXG4gICAgICAgICAgICByb3dJRCA9IHRoaXMudHJJZDJEYXRhSWQoY29udGV4dE1lbnVEb20pO1xyXG4gICAgICAgICAgICBjb25zdCByb3dOb2RlID0gdGhpcy5maW5kUm93Tm9kZShyb3dJRCk7XHJcblxyXG4gICAgICAgICAgICBsZXQgZ28kID0gb2Yoe3Nob3c6IHRydWV9KTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuYmVmb3JlU2hvd0NvbnRleHRNZW51KSB7XHJcbiAgICAgICAgICAgICAgICBnbyQgPSB0aGlzLmJlZm9yZVNob3dDb250ZXh0TWVudSh7IGRhdGE6IHJvd05vZGUsIHRyZWU6IHRoaXMgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBnbyQucGlwZShcclxuICAgICAgICAgICAgICAgIHN3aXRjaE1hcCgocjogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHIuc2hvdykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHIubWVudXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dE1lbnVJdGVtcyA9IHIubWVudXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgdmlld3BvcnRXID0gY29udGV4dE1lbnVEb20uY2xvc2VzdCgnLmZhcnJpcy10cmVldGFibGUnKS5vZmZzZXRXaWR0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0VyA9IGNvbnRleHRNZW51RG9tLm9mZnNldFdpZHRoO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZm9jdXNUYXJnZXRXaWR0aCA9IHZpZXdwb3J0VyA+IHRhcmdldFcgPyB0YXJnZXRXIDogdmlld3BvcnRXO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2YoeyBzaG93OiB0cnVlLCBkYXRhOiB7IGRhdGE6IHJvd05vZGUsIHRyZWU6IHRoaXMgfSwgZm9jdXNUYXJnZXRXaWR0aCB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2YoeyBzaG93OiBmYWxzZSB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb2YoeyBzaG93OiBmYWxzZSB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKiog5qC55o2u5Lyg5YWl55qE54i257qnSUTvvIzojrflj5bmiYDmnInlrZDnuqfoioLngrkgKi9cclxuICAgIGdldENoaWxkTm9kZXMocGFyZW50SWQ6IHN0cmluZyk6IFRyZWVOb2RlW10ge1xyXG4gICAgICAgIGxldCBub2RlcyA9IFtdO1xyXG4gICAgICAgIGlmIChwYXJlbnRJZCkge1xyXG4gICAgICAgICAgICBjb25zdCByb3dOb2RlID0gdGhpcy5maW5kUm93Tm9kZShwYXJlbnRJZCk7XHJcbiAgICAgICAgICAgIGlmIChyb3dOb2RlICYmIHJvd05vZGUubm9kZS5jaGlsZHJlbiAmJiByb3dOb2RlLm5vZGUuY2hpbGRyZW4ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICByb3dOb2RlLm5vZGUuY2hpbGRyZW4uZm9yRWFjaCgodG46IFRyZWVOb2RlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRuLnNlbGVjdGFibGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZXMucHVzaCh0bik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIG5vZGVzID0gbm9kZXMuY29uY2F0KHRoaXMuZ2V0Q2hpbGROb2Rlcyh0bi5pZCkpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBub2RlcztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFtdXHJcbiAgICB9XHJcblxyXG4gICAgLyoqIOagueaNruS8oOWFpeeahOiKgueCuUlE77yMIOiOt+WPluaJgOacieeItue6p+iKgueCuSAqL1xyXG4gICAgZ2V0UGFyZW50Tm9kZXMoaWQ6IHN0cmluZyk6IFJvd05vZGVbXSB7XHJcbiAgICAgICAgbGV0IG5vZGVzID0gW107XHJcbiAgICAgICAgaWYgKGlkKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJvd05vZGUgPSB0aGlzLmZpbmRSb3dOb2RlKGlkKTtcclxuICAgICAgICAgICAgaWYgKHJvd05vZGUgJiYgcm93Tm9kZS5wYXJlbnRzICYmIHJvd05vZGUucGFyZW50cy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHJvd05vZGUucGFyZW50cy5mb3JFYWNoKChuKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgcm4gPSB0aGlzLmZpbmRSb3dOb2RlKG4pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChybiAmJiBybi5ub2RlLnNlbGVjdGFibGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZXMucHVzaChybik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5vZGVzO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gW11cclxuICAgIH1cclxuXHJcbn1cclxuXHJcblxyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiAnW3RyZWVUYWJsZUJvZHldJyxcclxuICAgIHRlbXBsYXRlOiBgXHJcbiAgICAgICAgPG5nLXRlbXBsYXRlIG5nRm9yIGxldC1zZXJpYWxpemVkTm9kZSBsZXQtcm93SW5kZXg9XCJpbmRleFwiIFtuZ0Zvck9mXT1cInR0LnNlcmlhbGl6ZWRWYWx1ZVwiPlxyXG4gICAgICAgICAgICA8bmctY29udGFpbmVyICpuZ0lmPVwic2VyaWFsaXplZE5vZGUudmlzaWJsZVwiPlxyXG4gICAgICAgICAgICAgICAgPG5nLWNvbnRhaW5lclxyXG4gICAgICAgICAgICAgICAgICAgICpuZ1RlbXBsYXRlT3V0bGV0PVwidGVtcGxhdGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQ6IHskaW1wbGljaXQ6IHNlcmlhbGl6ZWROb2RlLCBub2RlOiBzZXJpYWxpemVkTm9kZS5ub2RlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByb3dEYXRhOiBzZXJpYWxpemVkTm9kZS5ub2RlLmRhdGEsIHJvd0luZGV4OiByb3dJbmRleCwgY29sdW1uczogY29sdW1uc31cIj5cclxuICAgICAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxyXG4gICAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cclxuICAgICAgICA8L25nLXRlbXBsYXRlPlxyXG4gICAgYFxyXG59KVxyXG5leHBvcnQgY2xhc3MgVFRCb2R5Q29tcG9uZW50IHtcclxuICAgIC8qKlxyXG4gICAgICog5YiX6ZuG5ZCIXHJcbiAgICAgKi9cclxuICAgIEBJbnB1dCgpIGNvbHVtbnM6IGFueVtdO1xyXG5cclxuICAgIC8qKiDooajkvZPmqKHmnb8gKi9cclxuICAgIEBJbnB1dCgpIHRlbXBsYXRlOiBUZW1wbGF0ZVJlZjxhbnk+O1xyXG5cclxuXHJcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgdHQ6IFRyZWVUYWJsZUNvbXBvbmVudCkgeyB9XHJcbn1cclxuXHJcbi8vIFtzdHlsZS5tYXJnaW5MZWZ0XT1cInJvd05vZGUubGV2ZWwgKiAxNiArICdweCdcIlxyXG5cclxuLyoqXHJcbiAqIOagkeiKgueCueWxleW8gOaKmOWPoFxyXG4gKi9cclxuQENvbXBvbmVudCh7XHJcbiAgICBzZWxlY3RvcjogJ2ZhcnJpcy10cmVlVGFibGVUb2dnbGVyJyxcclxuICAgIHRlbXBsYXRlOiBgXHJcbiAgICA8YSBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApXCIgI3RvZ2dsZXJcclxuICAgICAgICAgICAgY2xhc3M9XCJ0cmVlbm9kZS1mb2xkXCIgKm5nSWY9XCJzaG93TGluZXNcIlxyXG4gICAgICAgICAgICBbbmdDbGFzc109XCJyb3dOb2RlLm5vZGUuZXhwYW5kZWQgPyB0dC51bmZvbGRJY29uIDogdHQuZm9sZEljb25cIlxyXG4gICAgICAgICAgICBbc3R5bGUuZGlzcGxheV09XCJpc1Nob3dUcmlhbmdsZSA/ICcnIDogJ25vbmUnXCJcclxuICAgICAgICAgICAgKGNsaWNrKT1cIm9uQ2xpY2soJGV2ZW50KVwiPjwvYT5cclxuXHJcbiAgICA8YSBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApXCIgI3RvZ2dsZXJcclxuICAgICAgICAgICAgY2xhc3M9XCJ0cmVlbm9kZS1mb2xkXCIgICpuZ0lmPVwiIXNob3dMaW5lc1wiXHJcbiAgICAgICAgICAgIFtuZ0NsYXNzXT1cInJvd05vZGUubm9kZS5leHBhbmRlZCA/IHR0LnVuZm9sZEljb24gOiB0dC5mb2xkSWNvblwiXHJcbiAgICAgICAgICAgIFtzdHlsZS5tYXJnaW5MZWZ0LnB4XT1cInJvd05vZGUubGV2ZWwgKiBpbmRlbnRTcGFjaW5nXCJcclxuICAgICAgICAgICAgW3N0eWxlLnZpc2liaWxpdHldPVwiaXNTaG93VHJpYW5nbGUgPyAndmlzaWJsZScgOiAnaGlkZGVuJ1wiXHJcbiAgICAgICAgICAgIChjbGljayk9XCJvbkNsaWNrKCRldmVudClcIj48L2E+XHJcbiAgICA8c3BhbiBjbGFzcz1cInRyZWUtaWNvbi1saW5lXCIgW3N0eWxlLmRpc3BsYXldPVwiaXNTaG93VHJpYW5nbGUgJiYgc2hvd0xpbmVzPyAnJyA6ICdub25lJ1wiPjwvc3Bhbj5cclxuICAgIDxzcGFuIFtzdHlsZS5kaXNwbGF5XT1cIih0dC5zaG93SWNvbiAmJiByb3dOb2RlLm5vZGUuc2hvd0ljb24pID8gJ2lubGluZS1ibG9jayc6ICdub25lJ1wiIGNsYXNzPVwidHJlZW5vZGUtaWNvblwiIFtuZ0NsYXNzXT1cInRyZWVOb2RlSWNvblwiPjwvc3Bhbj5cclxuXHJcbiAgICA8dHQtY2hlY2tib3ggIFtyb3dOb2RlXT1cInJvd05vZGVcIiAqbmdJZj1cInR0LnNob3dDaGVja2JveFwiIFtkaXNhYmxlZF09XCJkaXNhYmxlZFwiIFtjaGVja2VkXT1cInJvd05vZGUuaXNDaGVja2VkXCIgPjwvdHQtY2hlY2tib3g+XHJcbiAgICBgLFxyXG4gICAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZSxcclxuICAgIGV4cG9ydEFzOiAndHRUb2dnbGVyJ1xyXG59KVxyXG5leHBvcnQgY2xhc3MgVHJlZVRhYmxlVG9nZ2xlckNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgQWZ0ZXJWaWV3SW5pdCwgT25EZXN0cm95LCBEb0NoZWNrLCBPbkNoYW5nZXMsIEFmdGVyVmlld0NoZWNrZWQge1xyXG4gICAgQEhvc3RCaW5kaW5nKCdjbGFzcy5mLWNtcC10cmVldGFibGUtdG9nZ2xlcicpIGNscyA9IHRydWU7XHJcbiAgICAvKipcclxuICAgICAqIOagkeiKgueCuVxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSByb3dOb2RlOiBSb3dOb2RlO1xyXG4gICAgQElucHV0KCkgZGlzYWJsZWQ6IGJvb2xlYW47XHJcblxyXG4gICAgQElucHV0KCkgc2hvd0xpbmVzID0gZmFsc2U7XHJcblxyXG4gICAgQElucHV0KCkgaW5kZW50U3BhY2luZyA9IDE2O1xyXG5cclxuICAgIHRyZWVOb2RlSWNvbiA9IHt9O1xyXG4gICAgaXNTaG93VHJpYW5nbGUgPSBmYWxzZTtcclxuICAgIG5vQ2hpbGRzID0gZmFsc2U7XHJcblxyXG4gICAgc3Vic2NyaXB0aW9uczogU3Vic2NyaXB0aW9uW10gPSBbXTtcclxuXHJcbiAgICBnZXQgb2Zmc2V0V2lkdGgoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudG9nZ2xlckVsLm5hdGl2ZUVsZW1lbnQucGFyZW50RWxlbWVudC5vZmZzZXRXaWR0aDtcclxuICAgIH1cclxuXHJcbiAgICBAVmlld0NoaWxkKCd0b2dnbGVyJykgdG9nZ2xlckVsOiBFbGVtZW50UmVmO1xyXG4gICAgY29uc3RydWN0b3IocHVibGljIHR0OiBUcmVlVGFibGVDb21wb25lbnQsIHByaXZhdGUgbmd6b25lOiBOZ1pvbmUsIHByaXZhdGUgcmVuZGVyOiBSZW5kZXJlcjIpIHtcclxuICAgIH1cclxuICAgIG5nT25Jbml0KCkge1xyXG4gICAgICAgIHRoaXMudHJlZU5vZGVJY29uID0gdGhpcy50dC5nZXRUcmVlSWNvbih0aGlzLnJvd05vZGUubm9kZSk7XHJcblxyXG4gICAgICAgIHRoaXMuaXNTaG93VHJpYW5nbGUgPSB0aGlzLnNob3dUcmlhbmdsZSgpO1xyXG4gICAgICAgIHRoaXMubm9DaGlsZHMgPSB0aGlzLmhhc0NoaWxkcmVuKCk7XHJcbiAgICAgICAgY29uc3QgZXhwYW5kU3ViID0gdGhpcy50dC5leHBhbmQuc3Vic2NyaWJlKChub2RlOiBUcmVlTm9kZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5yb3dOb2RlLmlkID09PSBub2RlLmRhdGFbdGhpcy50dC5pZEZpZWxkXSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVJY29uKHRoaXMucm93Tm9kZS5ub2RlKTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnR0LnBzUmVmKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50dC5wc1JlZi5kaXJlY3RpdmVSZWYudXBkYXRlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLnR0LmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBjb2xsYXBzZVN1YiA9IHRoaXMudHQuY29sbGFwc2Uuc3Vic2NyaWJlKChub2RlOiBUcmVlTm9kZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5yb3dOb2RlLmlkID09PSBub2RlLmRhdGFbdGhpcy50dC5pZEZpZWxkXSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVJY29uKHRoaXMucm93Tm9kZS5ub2RlKTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnR0LnBzUmVmKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50dC5wc1JlZi5kaXJlY3RpdmVSZWYudXBkYXRlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLnR0LmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBhZGROZXdTdWIgPSB0aGlzLnR0LmFwcGVuZE5ldy5zdWJzY3JpYmUoKGU6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZS5wYXJlbnQpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnJvd05vZGUuaWQgPT09IGUucGFyZW50LmRhdGFbdGhpcy50dC5pZEZpZWxkXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnJvd05vZGUubm9kZS5sZWFmIHx8IHRoaXMucm93Tm9kZS5ub2RlLmxlYWYgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJvd05vZGUubm9kZS5sZWFmID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlSWNvbih0aGlzLnJvd05vZGUubm9kZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zID0gW2V4cGFuZFN1YiwgY29sbGFwc2VTdWIsIGFkZE5ld1N1Yl07XHJcblxyXG4gICAgfVxyXG5cclxuICAgIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpIHtcclxuICAgICAgICBpZiAoY2hhbmdlcy5zaG93TGluZXMgJiYgIWNoYW5nZXMuc2hvd0xpbmVzLmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zaG93TGluZXMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyLnNldFN0eWxlKHRoaXMudG9nZ2xlckVsLm5hdGl2ZUVsZW1lbnQsICdkaXNwbGF5JywgdGhpcy5pc1Nob3dUcmlhbmdsZSA/ICcnIDogJ25vbmUnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyLnJlbW92ZVN0eWxlKHRoaXMudG9nZ2xlckVsLm5hdGl2ZUVsZW1lbnQsICdkaXNwbGF5Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5yZVNldExpbmVzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY2hhbmdlcy5yb3dOb2RlICYmICFjaGFuZ2VzLnJvd05vZGUuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlSWNvbih0aGlzLnJvd05vZGUubm9kZSk7XHJcblxyXG4gICAgICAgICAgICAvLyBpZiAoY2hhbmdlcy5yb3dOb2RlLmN1cnJlbnRWYWx1ZS5ub2RlLmNoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgIC8vICAgICBpZiAoISFjaGFuZ2VzLnJvd05vZGUuY3VycmVudFZhbHVlLm5vZGUuY2hpbGRyZW4ubGVuZ3RoICE9PSAhIWNoYW5nZXMucm93Tm9kZS5wcmV2aW91c1ZhbHVlLm5vZGUuY2hpbGRyZW4ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgdGhpcy5yZVNldExpbmVzKCk7XHJcbiAgICAgICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMudHQuc2hvd0xpbmVzKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgY3VycmVuQ2hpbGRyZW5MZW5ndGggPSAwO1xyXG4gICAgICAgICAgICAgICAgbGV0IHByZXZpb3VzQ2hpbGRyZW5MZW5ndGggPSAwO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNoYW5nZXMucm93Tm9kZS5jdXJyZW50VmFsdWUgJiYgY2hhbmdlcy5yb3dOb2RlLmN1cnJlbnRWYWx1ZS5ub2RlLmNoaWxkcmVuICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbkNoaWxkcmVuTGVuZ3RoID0gY2hhbmdlcy5yb3dOb2RlLmN1cnJlbnRWYWx1ZS5ub2RlLmNoaWxkcmVuLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoY2hhbmdlcy5yb3dOb2RlLnByZXZpb3VzVmFsdWUgJiYgY2hhbmdlcy5yb3dOb2RlLnByZXZpb3VzVmFsdWUubm9kZS5jaGlsZHJlbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHByZXZpb3VzQ2hpbGRyZW5MZW5ndGggPSBjaGFuZ2VzLnJvd05vZGUucHJldmlvdXNWYWx1ZS5ub2RlLmNoaWxkcmVuLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVuQ2hpbGRyZW5MZW5ndGggIT0gcHJldmlvdXNDaGlsZHJlbkxlbmd0aCB8fCAoIWN1cnJlbkNoaWxkcmVuTGVuZ3RoICYmICFwcmV2aW91c0NoaWxkcmVuTGVuZ3RoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVTZXRMaW5lcygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcclxuICAgICAgICBpZiAoIXRoaXMudHQuYm9keVRlbXBsYXRlICYmIHRoaXMuc2hvd0xpbmVzKSB7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZVNldExpbmVzKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBuZ0RvQ2hlY2soKSB7XHJcbiAgICAgICAgLy8gdGhpcy5pc1Nob3dUcmlhbmdsZSA9IHRoaXMuc2hvd1RyaWFuZ2xlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgbmdBZnRlclZpZXdDaGVja2VkKCkge1xyXG4gICAgICAgIC8vIGlmICh0aGlzLnR0ICYmIHRoaXMudHQuZGF0YSkge1xyXG4gICAgICAgIC8vICAgICB0aGlzLnJlU2V0TGluZXMoKTtcclxuICAgICAgICAvLyB9XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkRlc3Ryb3koKSB7XHJcbiAgICAgICAgdGhpcy51bkFsbFN1YnNjcmlwdGlvbnMoKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJpdmF0ZSB1bkFsbFN1YnNjcmlwdGlvbnMoKSB7XHJcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLmZvckVhY2gocyA9PiB7XHJcbiAgICAgICAgICAgIHMudW5zdWJzY3JpYmUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMgPSBbXTtcclxuICAgIH1cclxuXHJcbiAgICBoYXNDaGlsZHJlbigpIHtcclxuICAgICAgICBjb25zdCB0biA9IHRoaXMucm93Tm9kZS5ub2RlO1xyXG4gICAgICAgIHJldHVybiB0bi5sZWFmID09PSBmYWxzZSB8fCB0aGlzLnJvd05vZGUubGV2ZWwgIT09IDAgfHwgKHRuLmNoaWxkcmVuICYmIHRuLmNoaWxkcmVuLmxlbmd0aCA+IDApO1xyXG4gICAgfVxyXG5cclxuICAgIHNob3dUcmlhbmdsZSgpOiBib29sZWFuIHtcclxuICAgICAgICBjb25zdCB0biA9IHRoaXMucm93Tm9kZS5ub2RlO1xyXG5cclxuICAgICAgICBpZiAodGhpcy50dC5sb2FkRGF0YVR5cGUgPT09ICdhbGwnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0bi5sZWFmID09PSBmYWxzZSB8fCAodG4uY2hpbGRyZW4gJiYgdG4uY2hpbGRyZW4ubGVuZ3RoID4gMCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRuLmxlYWYgPT09IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZVNldExpbmVzKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnRvZ2dsZXJFbCkge1xyXG4gICAgICAgICAgICBjb25zdCBwYXJlbnRFbCA9IHRoaXMudG9nZ2xlckVsLm5hdGl2ZUVsZW1lbnQuY2xvc2VzdCgnLnRyZWV0YWJsZS1jZWxsLWNvbnRlbnQnKTtcclxuICAgICAgICAgICAgaWYgKHBhcmVudEVsKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5lRWxzID0gcGFyZW50RWwucXVlcnlTZWxlY3RvckFsbCgnLnRyZWV0YWJsZS1saW5lcycpO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBsaW5lRWxzLmxlbmd0aDsgaysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGluZUVsc1trXS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fcmVuZGVyTGluZXMoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9yZW5kZXJMaW5lcygpIHtcclxuICAgICAgICBpZiAoIXRoaXMudHQuYm9keVRlbXBsYXRlKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNob3dMaW5lcykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJMaW5lcygpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5ub0xpbmVTdHlsZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLypcclxuICAgICAgICAgICAgaWYgKHRoaXMudG9nZ2xlckVsKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50b2dnbGVyRWwubmF0aXZlRWxlbWVudC5jbG9zZXN0KCd0cicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGRzID0gdGhpcy50b2dnbGVyRWwubmF0aXZlRWxlbWVudC5jbG9zZXN0KCd0cicpLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgQXJyYXkuZnJvbSh0ZHMpLmZvckVhY2gobiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyLnNldFN0eWxlKG4sICdwYWRkaW5nJywgJzAuMjVyZW0gMC43NXJlbScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9ICovXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwcml2YXRlIG5vTGluZVN0eWxlKCkge1xyXG4gICAgICAgIC8vIHRoaXMuY2xzID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHRoaXMudG9nZ2xlckVsKSB7XHJcbiAgICAgICAgICAgIC8vIHRoaXMucmVuZGVyLnNldFN0eWxlKHRoaXMudG9nZ2xlckVsLm5hdGl2ZUVsZW1lbnQsICdtYXJnaW4tbGVmdCcsIGAke3RoaXMucm93Tm9kZS5sZXZlbCAqIHRoaXMuaW5kZW50U3BhY2luZ31weGApO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlci5zZXRTdHlsZSh0aGlzLnRvZ2dsZXJFbC5uYXRpdmVFbGVtZW50LCAndmlzaWJpbGl0eScsIHRoaXMuaXNTaG93VHJpYW5nbGUgPyAndmlzaWJsZScgOiAnaGlkZGVuJyk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyLnJlbW92ZVN0eWxlKHRoaXMudG9nZ2xlckVsLm5hdGl2ZUVsZW1lbnQsICdkaXNwbGF5Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVuZGVyTGluZXMoKSB7XHJcbiAgICAgICAgY29uc3QgbGVuID0gdGhpcy5yb3dOb2RlLmxldmVsO1xyXG4gICAgICAgIGlmICggIXRoaXMudG9nZ2xlckVsKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgcGFyZW50RWwgPSB0aGlzLnRvZ2dsZXJFbC5uYXRpdmVFbGVtZW50LmNsb3Nlc3QoJy50cmVldGFibGUtY2VsbC1jb250ZW50Jyk7XHJcblxyXG4gICAgICAgIGlmICghcGFyZW50RWwpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgcmVmZXJFbCA9IHRoaXMudG9nZ2xlckVsLm5hdGl2ZUVsZW1lbnQucGFyZW50RWxlbWVudDtcclxuXHJcbiAgICAgICAgaWYgKGxlbiA9PT0gMCAmJiAhdGhpcy5zaG93VHJpYW5nbGUoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUxlYWZOb2RlTGluZXMocmVmZXJFbCwgcGFyZW50RWwsIHRydWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgICAgICBwYXJlbnRFbC5pbnNlcnRCZWZvcmUodGhpcy5uZXdMaW5lRWxlbWVudCgpLCByZWZlckVsKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG5lYXJMaW5lID0gdGhpcy5uZXdMaW5lRWxlbWVudChmYWxzZSk7XHJcbiAgICAgICAgICAgIHBhcmVudEVsLmluc2VydEJlZm9yZShuZWFyTGluZSwgcmVmZXJFbCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBpc0xlYWYgPSAhdGhpcy5zaG93VHJpYW5nbGUoKTtcclxuICAgICAgICAgICAgaWYgKGlzTGVhZiAmJiBpID09PSBsZW4gLSAxKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUxlYWZOb2RlTGluZXMocmVmZXJFbCwgcGFyZW50RWwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgbmV3TGluZUVsZW1lbnQoYm9yZGVyID0gdHJ1ZSkge1xyXG4gICAgICAgIGNvbnN0IG5ld0xpbmVFbCA9IHRoaXMucmVuZGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIHRoaXMucmVuZGVyLmFkZENsYXNzKG5ld0xpbmVFbCwgJ3RyZWV0YWJsZS1saW5lcycpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zaG93TGluZXMpIHtcclxuICAgICAgICAgICAgaWYgKGJvcmRlcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIuYWRkQ2xhc3MobmV3TGluZUVsLCAndHJlZXRhYmxlLWxpbmVzLWJvcmRlci1jb2xvcicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXdMaW5lRWw7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmnoTpgKAg4oifIG9yIOKUnFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNyZWF0ZUxlYWZOb2RlTGluZXMoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50LCBwYXJlbnRFbDogRWxlbWVudCwgaXNUb3BOb2RlID0gZmFsc2UpIHtcclxuICAgICAgICAvLyDilJxcclxuICAgICAgICAvLyA8ZGl2IGNsYXNzPVwidHJlZXRhYmxlLWxpbmVzXCIgc3R5bGU9XCJib3JkZXItY29sb3I6IHJnYigyMDQsIDIwNCwgMjA0KTtcIj48L2Rpdj5cclxuICAgICAgICAvLyA8ZGl2IGNsYXNzPVwidHJlZXRhYmxlLWxpbmVzIHRyZWV0YWJsZS1saW5lcy1sZWFmXCIgc3R5bGU9XCJib3JkZXItY29sb3I6IHRyYW5zcGFyZW50O1wiPlxyXG4gICAgICAgIC8vICAgICA8ZGl2IGNsYXNzPVwibm9ybWFsXCI+PC9kaXY+XHJcbiAgICAgICAgLy8gPC9kaXY+XHJcblxyXG4gICAgICAgIC8vIOKIn1xyXG4gICAgICAgIC8vIDxkaXYgY2xhc3M9XCJ0cmVldGFibGUtbGluZXNcIiBzdHlsZT1cImJvcmRlci1jb2xvcjogdHJhbnNwYXJlbnRcIj48L2Rpdj5cclxuICAgICAgICAvLyA8ZGl2IGNsYXNzPVwidHJlZXRhYmxlLWxpbmVzIHRyZWV0YWJsZS1saW5lcy1sZWFmXCIgc3R5bGU9XCJib3JkZXItY29sb3I6IHRyYW5zcGFyZW50O1wiPlxyXG4gICAgICAgIC8vICAgICA8ZGl2IHN0eWxlPVwiY29ybmVyXCI+PC9kaXY+XHJcbiAgICAgICAgLy8gPC9kaXY+XHJcblxyXG4gICAgICAgIGNvbnN0IGwxID0gdGhpcy5uZXdMaW5lRWxlbWVudCgpO1xyXG4gICAgICAgIGNvbnN0IGwyID0gdGhpcy5uZXdMaW5lRWxlbWVudChmYWxzZSk7XHJcblxyXG4gICAgICAgIHRoaXMucmVuZGVyLmFkZENsYXNzKGwyLCAndHJlZXRhYmxlLWxpbmVzLWxlYWYnKTtcclxuICAgICAgICBjb25zdCBkZXNzZXJ0ID0gdGhpcy5yZW5kZXIuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNob3dMaW5lcykge1xyXG4gICAgICAgICAgICBsZXQgY2xzID0gJ25vcm1hbCc7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnJvd05vZGUubGFzdCkge1xyXG4gICAgICAgICAgICAgICAgY2xzID0gJ2Nvcm5lcic7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlci5yZW1vdmVDbGFzcyhsMSwgJ3RyZWV0YWJsZS1saW5lcy1ib3JkZXItY29sb3InKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsMi5hcHBlbmRDaGlsZChkZXNzZXJ0KTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXIuYWRkQ2xhc3MoZGVzc2VydCwgY2xzKTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXIuYWRkQ2xhc3MoZGVzc2VydCwgJ3RyZWV0YWJsZS1saW5lcy1ib3JkZXItY29sb3InKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHBhcmVudEVsLmluc2VydEJlZm9yZShsMSwgY29udGFpbmVyRWwpO1xyXG4gICAgICAgIHBhcmVudEVsLmluc2VydEJlZm9yZShsMiwgY29udGFpbmVyRWwpO1xyXG5cclxuICAgICAgICBpZiAoaXNUb3BOb2RlKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyLnNldFN0eWxlKGwyLCAnbWFyZ2luUmlnaHQnLCAnM3B4Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVnaXN0ZXJDbGlja0V2ZW50KCkge1xyXG4gICAgICAgIGlmICh0aGlzLnRvZ2dsZXJFbCkge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlci5saXN0ZW4odGhpcy50b2dnbGVyRWwubmF0aXZlRWxlbWVudCwgJ2NsaWNrJywgdGhpcy5vbkNsaWNrLmJpbmQodGhpcykpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbkNsaWNrKGV2ZW50OiBFdmVudCkge1xyXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnJvd05vZGUubm9kZVsnc2hvd0xvYWRpbmcnXSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMudHQuZGlzYWJsZWQpIHtcclxuICAgICAgICAgICAgdGhpcy50dC50b2dnbGVFeHBhbmQodGhpcy5yb3dOb2RlLm5vZGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB1cGRhdGVJY29uKHRyZWVOb2RlOiBUcmVlTm9kZSkge1xyXG4gICAgICAgIHRoaXMuaXNTaG93VHJpYW5nbGUgPSB0aGlzLnNob3dUcmlhbmdsZSgpO1xyXG4gICAgICAgIHRoaXMubm9DaGlsZHMgPSB0aGlzLmhhc0NoaWxkcmVuKCk7XHJcbiAgICAgICAgdGhpcy50cmVlTm9kZUljb24gPSB0aGlzLnR0LmdldFRyZWVJY29uKHRyZWVOb2RlKTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiDpgInkuK3ooYznu4Tku7ZcclxuICovXHJcbkBEaXJlY3RpdmUoe1xyXG4gICAgc2VsZWN0b3I6ICdbc2VsZWN0Um93XScsXHJcbiAgICBleHBvcnRBczogJ3JvdydcclxufSlcclxuZXhwb3J0IGNsYXNzIFRyZWVUYWJsZVNlbGVjdFJvd0RpcmVjdGl2ZSBpbXBsZW1lbnRzIERvQ2hlY2ssIE9uRGVzdHJveSwgT25Jbml0LCBPbkNoYW5nZXMge1xyXG5cclxuICAgIEBJbnB1dCgnc2VsZWN0Um93Jykgcm93Tm9kZTogUm93Tm9kZTtcclxuICAgIEBJbnB1dCgpIHJvd0luZGV4OiBudW1iZXI7XHJcblxyXG4gICAgQElucHV0KCkgc2VsZWN0Um93RGlzYWJsZWQ6IGJvb2xlYW47XHJcblxyXG4gICAgc3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb247XHJcblxyXG4gICAgcHVibGljIHByZXZlbnQgPSBmYWxzZTtcclxuICAgIHB1YmxpYyB0aW1lcjogYW55O1xyXG4gICAgQElucHV0KCkgZGVsYXkgPSAwO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyB0dDogVHJlZVRhYmxlQ29tcG9uZW50LCBwcml2YXRlIGVsOiBFbGVtZW50UmVmLCBwcml2YXRlIHJlbmRlcjogUmVuZGVyZXIyLCBwcml2YXRlIG5nWm9uZTogTmdab25lKSB7XHJcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb24gPSB0aGlzLnR0LnNlbGVjdE5vZGVDaGFuZ2VkU3ViamVjdC5zdWJzY3JpYmUoKGlkczogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChpZHMgJiYgdGhpcy5yb3dOb2RlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpZEFyciA9IGlkcy5zcGxpdCgnLCcpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGlkQXJyLmluZGV4T2YodGhpcy5yb3dOb2RlLmlkKSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b2dnbGVDbGFzcygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucm93Tm9kZS5ub2RlWydlbGVtZW50UmVmJ10gPSB0aGlzLmVsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkluaXQoKSB7XHJcbiAgICAgICAgLy8gdGhpcy5yb3dOb2RlLm5vZGUuc2VsZWN0YWJsZSA9ICF0aGlzLnNlbGVjdFJvd0Rpc2FibGVkO1xyXG4gICAgfVxyXG5cclxuICAgIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpIHtcclxuICAgICAgICAvLyBpZiAoY2hhbmdlcy5zZWxlY3RSb3dEaXNhYmxlZCAmJiAhY2hhbmdlcy5zZWxlY3RSb3dEaXNhYmxlZC5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAvLyAgICAgdGhpcy5yb3dOb2RlLm5vZGUuc2VsZWN0YWJsZSA9ICFjaGFuZ2VzLnNlbGVjdFJvd0Rpc2FibGVkLmN1cnJlbnRWYWx1ZTtcclxuICAgICAgICAvLyB9XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkRlc3Ryb3koKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc3Vic2NyaXB0aW9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbmdEb0NoZWNrKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnR0LmJvZHlUZW1wbGF0ZSkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMudHQuaXNTZWxlY3RlZCh0aGlzLnJvd05vZGUubm9kZSkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyLnJlbW92ZUNsYXNzKHRoaXMuZWwubmF0aXZlRWxlbWVudCwgJ2ZhcnJpcy10YWJsZS1zZWxlY3RlZHJvdycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIEBIb3N0TGlzdGVuZXIoJ2NsaWNrJywgWyckZXZlbnQnXSlcclxuICAgIG9uY2xpY2soZXZlbnQ6IE1vdXNlRXZlbnQpIHtcclxuICAgICAgICBpZiAodGhpcy5pc0VuYWJsZWQoKSkge1xyXG4gICAgICAgICAgICAvLyB0aGlzLnJvd0NsaWNrKGV2ZW50KTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZGVsYXkgIT09IDApIHtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5wcmV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmV2ZW50ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucm93Q2xpY2soZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByZXZlbnQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9LCB0aGlzLmRlbGF5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucm93Q2xpY2soZXZlbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICBpc0VuYWJsZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuICF0aGlzLnR0LmRpc2FibGVkICYmIHRoaXMuc2VsZWN0Um93RGlzYWJsZWQgIT09IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByb3dDbGljayhldmVudDogRXZlbnQpIHtcclxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHJcbiAgICAgICAgdGhpcy50dC5iZWZvcmVDbGlja05vZGUoeyBpbnN0YW5jZTogdGhpcy50dCwgcm93Tm9kZTogdGhpcy5yb3dOb2RlLCBldmVudCwgdHlwZTogJ3JvdycgfSkuc3Vic2NyaWJlKChlOiBib29sZWFuKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghZSkgeyByZXR1cm47IH1cclxuICAgICAgICAgICAgdGhpcy50dC5oYW5kbGVSb3dDbGljayh7XHJcbiAgICAgICAgICAgICAgICBvcmlnaW5hbEV2ZW50OiBldmVudCxcclxuICAgICAgICAgICAgICAgIHJvd05vZGU6IHRoaXMucm93Tm9kZSxcclxuICAgICAgICAgICAgICAgIHJvd0luZGV4OiB0aGlzLnJvd0luZGV4XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50b2dnbGVDbGFzcygpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICB0b2dnbGVDbGFzcygpIHtcclxuICAgICAgICBpZiAoIXRoaXMudHQuYm9keVRlbXBsYXRlKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnR0LmlzU2VsZWN0ZWQodGhpcy5yb3dOb2RlLm5vZGUpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50dC5zaW5nbGVTZWxlY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnR0LmVsLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZhcnJpcy10cmVldGFibGUtdGJvZHk+dHIuZmFycmlzLXRhYmxlLXNlbGVjdGVkcm93JykuZm9yRWFjaChuID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIucmVtb3ZlQ2xhc3MobiwgJ2ZhcnJpcy10YWJsZS1zZWxlY3RlZHJvdycpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIuYWRkQ2xhc3ModGhpcy5lbC5uYXRpdmVFbGVtZW50LCAnZmFycmlzLXRhYmxlLXNlbGVjdGVkcm93Jyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMudHQua2VlcFNlbGVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyLnJlbW92ZUNsYXNzKHRoaXMuZWwubmF0aXZlRWxlbWVudCwgJ2ZhcnJpcy10YWJsZS1zZWxlY3RlZHJvdycpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICog6KGo5aS05YWo6YCJ57uE5Lu2XHJcbiAqL1xyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiAndHQtaGVhZGVyLWNoZWNrYm94JyxcclxuICAgIHRlbXBsYXRlOiBgXHJcbiAgICA8ZGl2IGNsYXNzPVwiY3VzdG9tLWNvbnRyb2wgY3VzdG9tLWNoZWNrYm94ICBjdXN0b20tY29udHJvbC1pbmxpbmUgdHQtY2hlY2tib3hcIiBzdHlsZT1cInRvcDogLTJweDtcIj5cclxuICAgICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgI2Noa0FsbCBjbGFzcz1cImN1c3RvbS1jb250cm9sLWlucHV0XCIgIFtjaGVja2VkXT1cImNoZWNrZWRcIj5cclxuICAgICAgICA8bGFiZWwgY2xhc3M9XCJjdXN0b20tY29udHJvbC1sYWJlbFwiIChjbGljayk9XCJoYW5kbGVDbGljaygkZXZlbnQpXCI+PC9sYWJlbD5cclxuICAgIDwvZGl2PlxyXG4gICAgYCxcclxuICAgIHN0eWxlczogW1xyXG4gICAgICAgIGBcclxuICAgICAgICA6aG9zdCB7XHJcbiAgICAgICAgICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGBcclxuICAgIF1cclxufSlcclxuZXhwb3J0IGNsYXNzIFRyZWVUYWJsZUhlYWRlckNoZWNrYm94Q29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcclxuICAgIEBJbnB1dCgpIGNoZWNrZWQ6IGJvb2xlYW47XHJcbiAgICBASW5wdXQoKSBkaXNhYmxlZDogYm9vbGVhbjtcclxuXHJcbiAgICBAT3V0cHV0KCkgY2hlY2tlZENoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgICBAVmlld0NoaWxkKCdjaGtBbGwnKSBjaGtBbGw6IEVsZW1lbnRSZWY7XHJcblxyXG4gICAgY29uc3RydWN0b3IocHVibGljIHR0OiBUcmVlVGFibGVDb21wb25lbnQsIHB1YmxpYyB0dFNlcnZpY2U6IFRyZWV0YWJsZVNlcnZpY2UpIHtcclxuICAgIH1cclxuXHJcbiAgICBuZ09uSW5pdCgpIHsgfVxyXG5cclxuICAgIGhhbmRsZUNsaWNrKGV2ZW50KSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmRpc2FibGVkICYmICF0aGlzLnR0LmRpc2FibGVkKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJlZm9yZUV2ZW50ID0gIXRoaXMuY2hlY2tlZCA/IHRoaXMudHQuYmVmb3JlQ2hlY2tBbGwgOiB0aGlzLnR0LmJlZm9yZVVuQ2hlY2tBbGw7XHJcblxyXG4gICAgICAgICAgICBiZWZvcmVFdmVudCh7IGluc3RhbmNlOiB0aGlzLnR0LCBjaGVja2VkOiAhdGhpcy5jaGVja2VkIH0pLnN1YnNjcmliZShlID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIOWFqOmAieWKn+iDvVxyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGtBbGwubmF0aXZlRWxlbWVudC5pbmRldGVybWluYXRlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWQgPSAhdGhpcy5jaGVja2VkO1xyXG4gICAgICAgICAgICAgICAgdGhpcy50dC50b2dnbGVOb2Rlc1dpdGhDaGVja2JveChldmVudCwgdGhpcy5jaGVja2VkKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiDooajkvZNjaGVja2JveCDnu4Tku7ZcclxuICovXHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6ICd0dC1jaGVja2JveCcsXHJcbiAgICB0ZW1wbGF0ZTogYFxyXG4gICAgPGRpdiBjbGFzcz1cImN1c3RvbS1jb250cm9sIGN1c3RvbS1jaGVja2JveCAgY3VzdG9tLWNvbnRyb2wtaW5saW5lIHR0LWNoZWNrYm94XCI+XHJcbiAgICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiICNjaGsgY2xhc3M9XCJjdXN0b20tY29udHJvbC1pbnB1dFwiIFtkaXNhYmxlZF09XCJkaXNhYmxlZFwiIFtjaGVja2VkXT1cImNoZWNrZWRcIj5cclxuICAgICAgICA8bGFiZWwgY2xhc3M9XCJjdXN0b20tY29udHJvbC1sYWJlbFwiIChjbGljayk9XCJoYW5kbGVDbGljaygkZXZlbnQpXCI+PC9sYWJlbD5cclxuICAgIDwvZGl2PlxyXG4gICAgYCxcclxuICAgIHN0eWxlczogW1xyXG4gICAgICAgIGBcclxuICAgICAgICA6aG9zdCB7XHJcbiAgICAgICAgICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIDpob3N0IC5jdXN0b20tY2hlY2tib3gge1xyXG4gICAgICAgICAgICBvcGFjaXR5OiAxO1xyXG4gICAgICAgICAgICBmbG9hdDogbm9uZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYFxyXG4gICAgXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgVHJlZVRhYmxlQ2hlY2tib3hDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uRGVzdHJveSB7XHJcbiAgICBASG9zdEJpbmRpbmcoJ2NsYXNzLnRyZWUtdG9nZ2xlci1jaGVja2JveCcpIGNsczEgPSB0cnVlO1xyXG4gICAgQElucHV0KCkgY2hlY2tlZDogYm9vbGVhbjtcclxuICAgIEBJbnB1dCgpIGRpc2FibGVkOiBib29sZWFuO1xyXG5cclxuICAgIEBJbnB1dCgpIHJvd05vZGU6IFJvd05vZGU7XHJcblxyXG4gICAgQE91dHB1dCgpIGNoZWNrZWRDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgQFZpZXdDaGlsZCgnY2hrJykgY2hrOiBFbGVtZW50UmVmO1xyXG4gICAgZGVzdHJveSQgPSBuZXcgU3ViamVjdCgpO1xyXG4gICAgY29uc3RydWN0b3IocHVibGljIHR0OiBUcmVlVGFibGVDb21wb25lbnQsIHB1YmxpYyB0dFNlcnZpY2U6IFRyZWV0YWJsZVNlcnZpY2UpIHtcclxuICAgICAgICB0aGlzLnR0U2VydmljZSA9IHRoaXMudHQudHRTZXJ2aWNlO1xyXG4gICAgfVxyXG4gICAgbmdPbkRlc3Ryb3koKSB7XHJcbiAgICAgICAgdGhpcy5kZXN0cm95JC5uZXh0KCk7XHJcbiAgICAgICAgdGhpcy5kZXN0cm95JC5jb21wbGV0ZSgpO1xyXG4gICAgfVxyXG4gICAgbmdPbkluaXQoKSB7XHJcbiAgICAgICAgdGhpcy5jaGsubmF0aXZlRWxlbWVudC5pbmRldGVybWluYXRlID0gdGhpcy5yb3dOb2RlLmluZGV0ZXJtaW5hdGUgfHwgZmFsc2U7XHJcblxyXG4gICAgICAgIHRoaXMudHRTZXJ2aWNlLmNoYW5nZUNoZWNrYm94U3RhdHVzJC5waXBlKFxyXG4gICAgICAgICAgICB0YWtlVW50aWwodGhpcy5kZXN0cm95JClcclxuICAgICAgICApLnBpcGUoXHJcbiAgICAgICAgICAgIG1hcChuID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChuLmlkID09PSB0aGlzLnJvd05vZGUuaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICkuc3Vic2NyaWJlKG4gPT4ge1xyXG4gICAgICAgICAgICBpZiAobikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGsubmF0aXZlRWxlbWVudC5pbmRldGVybWluYXRlID0gbi5pbmRldGVybWluYXRlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja2VkID0gbi5pc0NoZWNrZWQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoay5uYXRpdmVFbGVtZW50LmNoZWNrZWQgPSB0aGlzLmNoZWNrZWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgaGFuZGxlQ2xpY2soZXZlbnQpIHtcclxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICBpZiAoIXRoaXMuZGlzYWJsZWQpIHtcclxuICAgICAgICAgICAgdGhpcy50dC5iZWZvcmVDbGlja05vZGUoeyBpbnN0YW5jZTogdGhpcy50dCwgcm93Tm9kZTogdGhpcy5yb3dOb2RlLCBldmVudCwgdHlwZTogJ2NoZWNrYm94JyB9KS5zdWJzY3JpYmUoKGU6IGJvb2xlYW4pID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghZSkgeyByZXR1cm47IH1cclxuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tlZCA9ICF0aGlzLmNoZWNrZWQ7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50dC5zaW5nbGVTZWxlY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnR0LmNsZWFyQWxsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnR0LnNlbGVjdE5vZGUodGhpcy5yb3dOb2RlLmlkLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnR0LnVuU2VsZWN0Tm9kZSh0aGlzLnJvd05vZGUuaWQsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50dC50b2dnbGVOb2RlV2l0aENoZWNrYm94KGV2ZW50LCB0aGlzLnJvd05vZGUsIHRoaXMuY2hlY2tlZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuXHJcbkBEaXJlY3RpdmUoe1xyXG4gICAgc2VsZWN0b3I6ICdbZGJsY2xpY2tdJ1xyXG59KVxyXG5leHBvcnQgY2xhc3MgRGJsQ2xpY2tSb3dEaXJlY3RpdmUgaW1wbGVtZW50cyBPbkluaXQge1xyXG4gICAgQElucHV0KCdkYmxjbGljaycpIGVuYWJsZURibENsaWNrID0gZmFsc2U7XHJcbiAgICBASW5wdXQoKSBkYmxjbGlja05vZGU6IFJvd05vZGU7XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHVibGljIHR0OiBUcmVlVGFibGVDb21wb25lbnQsIHB1YmxpYyBlbDogRWxlbWVudFJlZiwgcHVibGljIHR0U2VydmljZTogVHJlZXRhYmxlU2VydmljZSxcclxuICAgICAgICBAT3B0aW9uYWwoKSBAU2VsZigpIHB1YmxpYyBzZWxlY3RSb3dEaXI6IFRyZWVUYWJsZVNlbGVjdFJvd0RpcmVjdGl2ZSkge1xyXG4gICAgICAgICAgICB0aGlzLnR0U2VydmljZSA9IHRoaXMudHQudHRTZXJ2aWNlO1xyXG4gICAgfVxyXG5cclxuICAgIG5nT25Jbml0KCkge1xyXG4gICAgICAgIGlmICghdGhpcy5lbmFibGVEYmxDbGljaykge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdFJvd0Rpci5kZWxheSA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIEBIb3N0TGlzdGVuZXIoJ2RibGNsaWNrJywgWyckZXZlbnQnXSlcclxuICAgIG9uZGJsY2xpY2soZXZlbnQ6IEV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgcHJldkVsID0gKCBldmVudC50YXJnZXQgYXMgYW55KS5wcmV2aW91c1NpYmxpbmc7XHJcbiAgICAgICAgaWYgKHByZXZFbCAmJiBwcmV2RWwudHlwZSA9PT0gJ2NoZWNrYm94Jykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgaWYgKHRoaXMudHQuZGlzYWJsZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMudHQubXVsdGlTZWxlY3QgJiYgdGhpcy5kYmxjbGlja05vZGUpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZGJsY2xpY2tOb2RlLm5vZGUubGVhZikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgY29uc3QgY2xzTmFtZSA9IGV2ZW50LnRhcmdldFsnY2xhc3NOYW1lJ107XHJcblxyXG4gICAgICAgIGxldCB0b2dnbGVyVGFnID0gbnVsbDtcclxuICAgICAgICBpZiAoY2xzTmFtZS5pbmRleE9mKCdmLWNtcC10cmVldGFibGUtdG9nZ2xlcicpID4gLTEpIHtcclxuICAgICAgICAgICAgdG9nZ2xlclRhZyA9IGV2ZW50LnRhcmdldFsncXVlcnlTZWxlY3RvciddKCcudHJlZW5vZGUtZm9sZCcpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChldmVudC50YXJnZXRbJ2NsYXNzTmFtZSddLmluZGV4T2YoJ3RyZWVub2RlLWZvbGQnKSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICB0b2dnbGVyVGFnID0gZXZlbnQudGFyZ2V0IGFzIGFueTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRvZ2dsZXJUYWcgJiYgdG9nZ2xlclRhZy5zdHlsZS52aXNpYmlsaXR5ID09PSAndmlzaWJsZScpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0Um93RGlyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0Um93RGlyLnByZXZlbnQgPSBmYWxzZTtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuc2VsZWN0Um93RGlyLnRpbWVyKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0Um93RGlyLnJvd05vZGUgJiYgdGhpcy5lbmFibGVEYmxDbGljaykge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgcm4gPSB0aGlzLnNlbGVjdFJvd0Rpci5yb3dOb2RlO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudHQubG9hZERhdGFUeXBlID09PSAnYWxsJyAmJiAhcm4ubm9kZS5sZWFmICYmIHRoaXMudHQuZGJsQ2xpY2tFeHBhbmQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnR0LnRvZ2dsZUV4cGFuZChybi5ub2RlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMudHQuZGJsQ2xpY2suZW1pdChybi5ub2RlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbkBEaXJlY3RpdmUoe1xyXG4gICAgc2VsZWN0b3I6ICdbY3VzdG9tUm93U3R5bGVdJ1xyXG59KVxyXG5leHBvcnQgY2xhc3MgQ3VzdG9tUm93U3R5bGVEaXJlY3RpdmUgaW1wbGVtZW50cyBPbkluaXQsIE9uQ2hhbmdlcyB7XHJcbiAgICBASW5wdXQoJ2N1c3RvbVJvd1N0eWxlJykgcm93Tm9kZTogUm93Tm9kZTtcclxuICAgIEBJbnB1dCgnZmllbGQnKSBjb2w6IFRyZWVUYWJsZUNvbHVtbjtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGluamVjdG9yOiBJbmplY3RvciwgcHJpdmF0ZSBuZ1pvbmU6IE5nWm9uZSxcclxuICAgICAgICBwcml2YXRlIGVsOiBFbGVtZW50UmVmLCBwcml2YXRlIHR0OiBUcmVlVGFibGVDb21wb25lbnQsXHJcbiAgICAgICAgcHVibGljIHV0aWxzOiBDb21tb25VdGlscywgcHJpdmF0ZSByZW5kZXI6IFJlbmRlcmVyMikge1xyXG4gICAgfVxyXG4gICAgbmdPbkluaXQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY29sICYmIHRoaXMudHQuZml4ZWRDb2x1bW5zICYmIHRoaXMudHQuZml4ZWRIZWFkZXIgJiYgdGhpcy5jb2wuZml4ZWQpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuY29sLmZpeGVkID09PSAnbGVmdCcgfHwgdGhpcy5jb2wuZml4ZWQgPT09ICdyaWdodCcpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0Um93U3R5bGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRSb3dTdHlsZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNldFJvd1N0eWxlKCkge1xyXG4gICAgICAgIGNvbnN0IGZuID0gdGhpcy50dC5yb3dTdHlsZXI7XHJcbiAgICAgICAgaWYgKGZuKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHN0eSA9IGZuKHRoaXMucm93Tm9kZS5ub2RlKTtcclxuICAgICAgICAgICAgaWYgKHN0eSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzdHkgPT09ICdvYmplY3QnICYmIChzdHkuc3R5bGUgfHwgc3R5LmNscykpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc3R5LnN0eWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHN0eS5zdHlsZSkuZm9yRWFjaChzID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyLnNldFN0eWxlKHRoaXMuZWwubmF0aXZlRWxlbWVudCwgcywgc3R5LnN0eWxlW3NdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoc3R5LmNscykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHkuY2xzLnNwbGl0KCcsJykuZm9yRWFjaChjID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyLmFkZENsYXNzKHRoaXMuZWwubmF0aXZlRWxlbWVudCwgYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHN0eSkgfHwgdHlwZW9mIHN0eSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2xzID0gdGhpcy50dC5nZXRSb3dDbHModGhpcy5yb3dOb2RlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNscyAmJiBPYmplY3Qua2V5cyhjbHMpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoY2xzKS5mb3JFYWNoKGMgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjbHNbY10pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIuYWRkQ2xhc3ModGhpcy5lbC5uYXRpdmVFbGVtZW50LCBjKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHN0eSkuZm9yRWFjaChzID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyLnNldFN0eWxlKHRoaXMuZWwubmF0aXZlRWxlbWVudCwgcywgc3R5W3NdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpIHtcclxuICAgICAgICBpZiAoY2hhbmdlcy5yb3dOb2RlICYmICFjaGFuZ2VzLnJvd05vZGUuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0Um93U3R5bGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbkBEaXJlY3RpdmUoe1xyXG4gICAgc2VsZWN0b3I6ICdbY3VzdG9tQ2VsbFN0eWxlXSdcclxufSlcclxuZXhwb3J0IGNsYXNzIFRUQ3VzdG9tQ2VsbFN0eWxlRGlyZWN0aXZlIGltcGxlbWVudHMgT25Jbml0LCBPbkNoYW5nZXMge1xyXG4gICAgQElucHV0KCdjdXN0b21DZWxsU3R5bGUnKSBjb2x1bW46IFRyZWVUYWJsZUNvbHVtbjtcclxuICAgIEBJbnB1dCgpIHJvd05vZGU6IFJvd05vZGU7XHJcbiAgICBASW5wdXQoKSByb3dJbmRleDogYW55O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgaW5qZWN0b3I6IEluamVjdG9yLCBwcml2YXRlIG5nWm9uZTogTmdab25lLFxyXG4gICAgICAgIHByaXZhdGUgZWw6IEVsZW1lbnRSZWYsIHByaXZhdGUgdHQ6IFRyZWVUYWJsZUNvbXBvbmVudCxcclxuICAgICAgICBwdWJsaWMgdXRpbHM6IENvbW1vblV0aWxzLCBwcml2YXRlIHJlbmRlcjogUmVuZGVyZXIyKSB7XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkluaXQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMudHQgJiYgdGhpcy50dC5nZXRDZWxsQ2xzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0Q2VsbFN0eWxlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMudHQuc2hvd0JvcmRlciAmJiB0aGlzLnR0LmNvbHVtbnMubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyLnNldFN0eWxlKHRoaXMuZWwubmF0aXZlRWxlbWVudCwgJ2JvcmRlci13aWR0aCcsICcwcHgnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXRDZWxsU3R5bGUoKSB7XHJcbiAgICAgICAgY29uc3QgY2VsbENscyA9IHRoaXMudHQuZ2V0Q2VsbENscyh0aGlzLnJvd05vZGUsIHRoaXMuY29sdW1uLmZpZWxkKTtcclxuICAgICAgICBpZiAodGhpcy5jb2x1bW4gJiYgdGhpcy5jb2x1bW4uc3R5bGVyKSB7XHJcbiAgICAgICAgICAgIGlmIChjZWxsQ2xzICYmIE9iamVjdC5rZXlzKGNlbGxDbHMpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoY2VsbENscykuZm9yRWFjaChjID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2VsbENsc1tjXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlci5hZGRDbGFzcyh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsIGMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCByb3dEYXRhID0gdGhpcy5yb3dOb2RlLm5vZGUuZGF0YTtcclxuICAgICAgICAgICAgY29uc3QgY2NzID0gdGhpcy5jb2x1bW4uc3R5bGVyKHRoaXMudXRpbHMuZ2V0VmFsdWUodGhpcy5jb2x1bW4uZmllbGQsIHJvd0RhdGEpLCByb3dEYXRhLCB0aGlzLnJvd0luZGV4LCB0aGlzLnJvd05vZGUpO1xyXG4gICAgICAgICAgICBpZiAoY2NzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2NzLnN0eWxlIHx8IGNjcy5jbHMpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2NzLnN0eWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKGNjcy5zdHlsZSkuZm9yRWFjaChzID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyLnNldFN0eWxlKHRoaXMuZWwubmF0aXZlRWxlbWVudCwgcywgY2NzLnN0eWxlW3NdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2NzLmNscykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjY3MuY2xzLnNwbGl0KCcsJykuZm9yRWFjaChjID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyLmFkZENsYXNzKHRoaXMuZWwubmF0aXZlRWxlbWVudCwgYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKGNlbGxDbHMpLmZvckVhY2gocyA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlci5zZXRTdHlsZSh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsIHMsIGNlbGxDbHNbc10pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcykge1xyXG4gICAgICAgIGlmIChjaGFuZ2VzLnJvd05vZGUgJiYgIWNoYW5nZXMucm93Tm9kZS5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRDZWxsU3R5bGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbkBEaXJlY3RpdmUoe1xyXG4gICAgc2VsZWN0b3I6ICdbcmVzaXphYmxlLWNvbHVtbl0nXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBUVFJlc2l6YWJsZUNvbHVtbkRpcmVjdGl2ZSBpbXBsZW1lbnRzIEFmdGVyVmlld0luaXQsIE9uRGVzdHJveSwgT25DaGFuZ2VzIHtcclxuICAgIEBJbnB1dCgncmVzaXphYmxlLWNvbHVtbicpIGVuYWJsZVJlc2l6ZSA9IHRydWU7XHJcbiAgICByZXNpemVyOiBIVE1MU3BhbkVsZW1lbnQ7XHJcbiAgICByZXNpemVyTW91c2VEb3duTGlzdGVuZXI6IGFueTtcclxuICAgIGRvY3VtZW50TW91c2VNb3ZlTGlzdGVuZXI6IGFueTtcclxuICAgIGRvY3VtZW50TW91c2VVcExpc3RlbmVyOiBhbnk7XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHVibGljIHR0OiBUcmVlVGFibGVDb21wb25lbnQsIHB1YmxpYyBuZ3pvbmU6IE5nWm9uZSxcclxuICAgICAgICBwdWJsaWMgZWw6IEVsZW1lbnRSZWYsIHB1YmxpYyByZW5kZXI6IFJlbmRlcmVyMikge1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBuZ0FmdGVyVmlld0luaXQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNFbmFibGUoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlci5hZGRDbGFzcyh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsICdyZXNpemFibGUtY29sdW1uJyk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnJlc2l6ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcbiAgICAgICAgICAgIHRoaXMucmVzaXplci5jbGFzc05hbWUgPSAnY29sdW1uLXJlc2l6ZXInO1xyXG4gICAgICAgICAgICB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5yZXNpemVyKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMubmd6b25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVzaXplck1vdXNlRG93bkxpc3RlbmVyID0gdGhpcy5vbk1vdXNlRG93bi5iaW5kKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNpemVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMucmVzaXplck1vdXNlRG93bkxpc3RlbmVyKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIHRoaXMub25Nb3VzZUVudGVyLmJpbmQodGhpcykpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcyk6IHZvaWQge1xyXG4gICAgICAgIGlmIChjaGFuZ2VzLmVuYWJsZVJlc2l6ZSAmJiAhY2hhbmdlcy5lbmFibGVSZXNpemUuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0VuYWJsZSgpICYmIHRoaXMucmVzaXplcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNpemVyLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlzRW5hYmxlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnR0LnJlc2l6YWJsZUNvbHVtbnMgJiYgIXRoaXMudHQuYXV0b1dpZHRoICYmIHRoaXMuZW5hYmxlUmVzaXplO1xyXG4gICAgfVxyXG5cclxuICAgIGJpbmREb2N1bWVudEV2ZW50cygpIHtcclxuICAgICAgICB0aGlzLm5nem9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZG9jdW1lbnRNb3VzZU1vdmVMaXN0ZW5lciA9IHRoaXMub25Nb3VzZU1vdmUuYmluZCh0aGlzKTtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5kb2N1bWVudE1vdXNlTW92ZUxpc3RlbmVyKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZG9jdW1lbnRNb3VzZVVwTGlzdGVuZXIgPSB0aGlzLm9uTW91c2VVcC5iaW5kKHRoaXMpO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5kb2N1bWVudE1vdXNlVXBMaXN0ZW5lcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgdW5iaW5kRG9jdW1lbnRFdmVudHMoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZG9jdW1lbnRNb3VzZU1vdmVMaXN0ZW5lcikge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLmRvY3VtZW50TW91c2VNb3ZlTGlzdGVuZXIpO1xyXG4gICAgICAgICAgICB0aGlzLmRvY3VtZW50TW91c2VNb3ZlTGlzdGVuZXIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZG9jdW1lbnRNb3VzZVVwTGlzdGVuZXIpIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMuZG9jdW1lbnRNb3VzZVVwTGlzdGVuZXIpO1xyXG4gICAgICAgICAgICB0aGlzLmRvY3VtZW50TW91c2VVcExpc3RlbmVyID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25Nb3VzZURvd24oZXZlbnQ6IEV2ZW50KSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNFbmFibGUoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnR0Lm9uQ29sdW1uUmVzaXplQmVnaW4oZXZlbnQpO1xyXG4gICAgICAgICAgICB0aGlzLmJpbmREb2N1bWVudEV2ZW50cygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbk1vdXNlRW50ZXIoKSB7XHJcbiAgICB9XHJcblxyXG4gICAgb25Nb3VzZU1vdmUoZXZlbnQ6IEV2ZW50KSB7XHJcbiAgICAgICAgdGhpcy50dC5vbkNvbHVtblJlc2l6ZShldmVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25Nb3VzZVVwKGV2ZW50OiBFdmVudCkge1xyXG4gICAgICAgIHRoaXMudHQub25Db2x1bW5SZXNpemVFbmQoZXZlbnQsIHRoaXMuZWwubmF0aXZlRWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy51bmJpbmREb2N1bWVudEV2ZW50cygpO1xyXG4gICAgfVxyXG5cclxuICAgIG5nT25EZXN0cm95KCkge1xyXG4gICAgICAgIGlmICh0aGlzLnJlc2l6ZXJNb3VzZURvd25MaXN0ZW5lcikge1xyXG4gICAgICAgICAgICB0aGlzLnJlc2l6ZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5yZXNpemVyTW91c2VEb3duTGlzdGVuZXIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy51bmJpbmREb2N1bWVudEV2ZW50cygpO1xyXG4gICAgfVxyXG5cclxufVxyXG4iXX0=