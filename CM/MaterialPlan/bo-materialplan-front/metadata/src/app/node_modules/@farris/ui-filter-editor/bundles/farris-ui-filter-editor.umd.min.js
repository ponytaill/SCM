!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/platform-browser"),require("rxjs"),require("lodash-es"),require("@farris/ui-modal"),require("@farris/ui-common/types"),require("@angular/forms"),require("@angular/common"),require("@farris/ui-lookup"),require("@farris/ui-dialog"),require("@farris/ui-perfect-scrollbar"),require("@farris/ui-messager"),require("@farris/ui-common"),require("@farris/ui-input-group"),require("@angular/core"),require("@farris/ui-locale"),require("@farris/ui-combo-lookup")):"function"==typeof define&&define.amd?define("@farris/ui-filter-editor",["exports","@angular/platform-browser","rxjs","lodash-es","@farris/ui-modal","@farris/ui-common/types","@angular/forms","@angular/common","@farris/ui-lookup","@farris/ui-dialog","@farris/ui-perfect-scrollbar","@farris/ui-messager","@farris/ui-common","@farris/ui-input-group","@angular/core","@farris/ui-locale","@farris/ui-combo-lookup"],e):e((t.farris=t.farris||{},t.farris["ui-filter-editor"]={}),t.ng.platformBrowser,t.rxjs,t.lodashEs,t.uiModal,t.types,t.ng.forms,t.ng.common,t.uiLookup,t.uiDialog,t.uiPerfectScrollbar,t.uiMessager,t.uiCommon,t.uiInputGroup,t.ng.core,t.uiLocale,t.uiComboLookup)}(this,function(t,e,o,n,i,r,s,l,a,c,p,d,u,h,f,m,g){"use strict";var b=(y.prototype.buildSqlWhere=function(t){return this.commonUtils.buildSqlWhere(t)},y.decorators=[{type:f.Injectable}],y.ctorParameters=function(){return[{type:u.CommonUtils,decorators:[{type:f.Optional}]}]},y);function y(t){this.conditionsChanged=new o.Subject,this.commonUtils=t||new u.CommonUtils}var v=(x.prototype.ngOnInit=function(){this.conditions&&this.conditions.length&&(this.conditions=this.conditions.map(function(t){var e=parseInt(""+t.compare,10);return e!==r.Compare.In&&e!==r.Compare.NotIn||(t.value=t.value.replace(/\r\n/g,",")),t}))},x.prototype.onTabChange=function(t){this.tabIndex=t},x.prototype.onShowExpress=function(t){this.showExpress.emit(t)},x.decorators=[{type:f.Component,args:[{selector:"filter-editor",template:'\n        <filter-tabs\n            class="f-utils-fill-flex-column"\n            [showCode]="showCode"\n            [showSql]="showSql"\n            [columns]="columns"\n            [height]="height"\n            [enableExpress]="enableExpress"\n            [enableFrontExpress]="enableFrontExpress"\n            [conditions]="conditions"\n            [fieldEditor]="fieldEditor"\n            (showExpress)="onShowExpress($event)"\n            (selectTabChange)="onTabChange($event)">\n        </filter-tabs>\n    '}]}],x.ctorParameters=function(){return[{type:e.DomSanitizer},{type:b}]},x.propDecorators={columns:[{type:f.Input}],conditions:[{type:f.Input}],height:[{type:f.Input}],showCode:[{type:f.Input}],showSql:[{type:f.Input}],enableExpress:[{type:f.Input}],enableFrontExpress:[{type:f.Input}],fieldEditor:[{type:f.Input}],showExpress:[{type:f.Output}],cls:[{type:f.HostBinding,args:["class"]}]},x);function x(t,e){var o=this;this.sanitizer=t,this.filterService=e,this.tabIndex=0,this.columns=[],this.conditions=[],this.showCode=!1,this.showSql=!1,this.enableExpress=!1,this.enableFrontExpress=!1,this.fieldEditor={type:"select",options:{}},this.showExpress=new f.EventEmitter,this.cls="f-utils-flex-column f-utils-absolute-all",this.filterService.conditionsChanged.subscribe(function(t){o.conditions=t})}var E=function(t,e){return(E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)};function C(t,e){var o="function"==typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,i,r=o.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(n=r.next()).done;)s.push(n.value)}catch(l){i={error:l}}finally{try{n&&!n.done&&(o=r["return"])&&o.call(r)}finally{if(i)throw i.error}}return s}function w(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(C(arguments[e]));return t}var k=(I.prototype.ngOnChanges=function(t){},I.prototype.ngOnInit=function(){if(this.fieldEditor||(this.fieldEditor={type:"select",options:{}}),this.initRelationData(),!this.conditions||!this.conditions.length){var t=Object.assign({},this.newCondition);this.conditions=[t],this.changeConditionList()}},I.prototype.initRelationData=function(){if(this.localeService){var t=this.localeService.getValue("filterEditor.relationValue.and"),e=this.localeService.getValue("filterEditor.relationValue.or");this.relationData=[{label:"",value:0},{label:t,value:1},{label:e,value:2}]}},I.prototype.insertCondition=function(t){var e=Object.assign({},this.newCondition);0===t?this.conditions.unshift(e):this.conditions.splice(t,0,e),this.changeConditionList()},I.prototype.removeCondition=function(t){this.conditions.splice(t,1),this.changeConditionList(),this.currentCondition&&t===this.currentCondition.index&&(this.currentCondition=null)},I.prototype.onAddFilter=function(){this.conditions=w(this.conditions,[Object.assign({},this.newCondition)]),this.changeConditionList()},I.prototype.onClear=function(){var t=this;this.messagerService.question("确认要清空当前所有条件吗？",function(){t.conditions=[],t.changeConditionList()})},I.prototype.onMoveTop=function(){this.currentCondition&&(this.conditions.unshift(this.currentCondition.condition),this.conditions.splice(this.currentCondition.index+1,1),this.currentCondition.index=0,this.changeConditionList())},I.prototype.onMovePrev=function(){var t;if(this.currentCondition){var e=this.currentCondition.index,o=this.conditions.splice(e,1);(t=this.conditions).splice.apply(t,w([e-1,0],o)),this.currentCondition.index=e-1,this.changeConditionList()}},I.prototype.onMoveNext=function(){var t;if(this.currentCondition){var e=this.currentCondition.index,o=this.conditions.splice(e,1);(t=this.conditions).splice.apply(t,w([e+1,0],o)),this.currentCondition.index=e+1,this.changeConditionList()}},I.prototype.onMoveBottom=function(){this.currentCondition&&(this.conditions.push(this.currentCondition.condition),this.conditions.splice(this.currentCondition.index,1),this.currentCondition.index=this.conditions.length-1,this.changeConditionList())},I.prototype.changeConditionList=function(){this.filterService.conditionsChanged.next(this.conditions)},I.prototype.selected=function(t){this.currentCondition=t},I.prototype.isSelected=function(t){return!!this.currentCondition&&this.currentCondition.index===t},I.prototype.showExpressDialog=function(t,e,o){var n=1===e.expresstype?"express":"frontExpress";this.showExpress.emit({event:t,condition:e,value:o,type:n})},I.prototype.onComboSelectChange=function(t,e){if(t){var o=t.data;o&&(e.filterField=o.value)}},I.decorators=[{type:f.Component,args:[{selector:"filter-grid",template:'<div class="table-header ">\r\n    <table class="table table-bordered" style="margin-bottom: 0">\r\n        <colgroup>\r\n            <col *ngFor="let s of columnSizeData" [style.width]=" s + \'px\'">\r\n        </colgroup>\r\n        <thead>\r\n            <tr>\r\n                <th></th>\r\n                <th><b>{{ \'filterEditor.leftBrackets\' | locale }}</b></th>\r\n                <th><b>{{ \'filterEditor.field\' | locale }}</b></th>\r\n                <th><b>{{ \'filterEditor.operator\' | locale }}</b></th>\r\n                <th><b>{{ \'filterEditor.valueType\' | locale }}</b></th>\r\n                <th><b>{{ \'filterEditor.value\' | locale }}</b></th>\r\n                <th><b>{{ \'filterEditor.rightBrackets\' | locale }}</b></th>\r\n                <th><b>{{ \'filterEditor.relation\' | locale }}</b></th>\r\n            </tr>\r\n        </thead>\r\n    </table>\r\n</div>\r\n<div class="table-body flex-fill" style="overflow: hidden" #tablebodybox>\r\n    <perfect-scrollbar [config]="{}">\r\n        <table class="table table-bordered" style="margin-bottom: 0;">\r\n            <colgroup>\r\n                <col *ngFor="let s of columnSizeData" [style.width]=" s + \'px\'">\r\n            </colgroup>\r\n            <tbody>\r\n                <tr *ngFor="let condition of conditions; let index=index;" (click)="selected({\'index\':index, \'condition\': condition})" [class.selected]="isSelected(index)" >\r\n                    <td>\r\n                        <button type="button" (click)="insertCondition(index)" class="k-button k-button-icon k-flat"><span class="k-icon k-i-plus"></span></button>\r\n                        <button type="button" (click)="removeCondition(index)" class="k-button k-button-icon k-flat"><span class="k-icon k-i-minus"></span></button>\r\n                    </td>\r\n                    <td>\r\n                        <select class="form-control filter-select" [(ngModel)]="condition.lbracket" name="lbracket">\r\n                            <option *ngFor="let item of LeftBracketData" [value]="item">{{ item }}</option>\r\n                        </select>\r\n                    </td>\r\n                    <td>\r\n                        <select *ngIf="fieldEditor.type === \'select\'" class="form-control filter-select" [(ngModel)]="condition.filterField" name="filterField">\r\n                            <option *ngFor="let col of columns" [value]="col.value">{{ col.label }}</option>\r\n                        </select>\r\n\r\n                        <farris-combo-lookup *ngIf="fieldEditor.type === \'combo-tree\'" name="filterField"\r\n                            [idField]="fieldEditor?.options?.idField ||\'value\'"\r\n                            [textField]="fieldEditor?.options?.textField ||\'label\'"\r\n                            [displayType]="\'LOOKUPTREELIST\'" [useValue]="true"\r\n                            [useTreeView]="true"\r\n                            [columns]="fieldEditor?.options?.columns || []"\r\n                            [data]="columns"\r\n                            [(ngModel)]="condition.filterField"\r\n                            [remoteSearch]="false"\r\n                            [autoWidth]="fieldEditor?.options?.autoWidth"\r\n                            [panelWidth]="fieldEditor?.options?.panelWidth || 200">\r\n                        </farris-combo-lookup>\r\n\r\n\r\n                    </td>\r\n                    <td>\r\n                        <select class="form-control filter-select" name="compare" [(ngModel)]="condition.compare">\r\n                            <option *ngFor="let item of operators" [value]="item.value">{{item.label}}</option>\r\n                        </select>\r\n                    </td>\r\n                    <td>\r\n                        <select class="form-control filter-select" name="expresstype" [(ngModel)]="condition.expresstype">\r\n                            <option [value]="0">{{\'filterEditor.expressType.value\' | locale }}</option>\r\n                            <option [value]="1" *ngIf="enableExpress" >{{\'filterEditor.expressType.express\' | locale }}</option>\r\n                            <option [value]="\'frontExpress\'" *ngIf="enableFrontExpress" >{{\'filterEditor.expressType.frontExpress\' | locale }}</option>\r\n                        </select>\r\n                    </td>\r\n                    <td>\r\n                        <input-group name="value" [(ngModel)]="condition.value" [groupText]="condition.expresstype == 1||condition.expresstype===\'frontExpress\'?groupIcon: \'\'"\r\n                        (clickHandle)="showExpressDialog($event, condition, condition.value)"></input-group>\r\n                    </td>\r\n                    <td>\r\n                        <select class="form-control filter-select"  [(ngModel)]="condition.rbracket" name="rbracket">\r\n                            <option *ngFor="let item of RighttBracketData" [value]="item">{{ item }}</option>\r\n                        </select>\r\n                    </td>\r\n                    <td>\r\n                        <select class="form-control filter-select" [(ngModel)]="condition.relation" name="relation">\r\n                            <option *ngFor="let item of relationData" [value]="item.value">{{ item.label }}</option>\r\n                        </select>\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n    </perfect-scrollbar>\r\n</div>\r\n<div style="flex-shrink: 0;">\r\n<filter-footer\r\n(addFilter)="onAddFilter()"\r\n(clearFilter)="onClear()"\r\n(moveTop)="onMoveTop()"\r\n(movePrev)="onMovePrev()"\r\n(moveNext)="onMoveNext()"\r\n(moveBottom)="onMoveBottom()"></filter-footer>\r\n</div>\r\n',styles:["\n        .filter-select { width:100%; padding-left: 0; padding-right: 0; }\n        .selected { background: #c2e4ff; }\n        "]}]}],I.ctorParameters=function(){return[{type:f.ElementRef},{type:f.Renderer2},{type:b},{type:d.MessagerService}]},I.propDecorators={conditions:[{type:f.Input}],columns:[{type:f.Input}],enableExpress:[{type:f.Input}],enableFrontExpress:[{type:f.Input}],height:[{type:f.Input}],fieldEditor:[{type:f.Input}],showExpress:[{type:f.Output}],tablebodybox:[{type:f.ViewChild,args:["tablebodybox"]}]},I);function I(t,e,o,n){this.el=t,this.render=e,this.filterService=o,this.messagerService=n,this.LeftBracketData=r.LeftBracket,this.RighttBracketData=r.RighttBracket,this.relationData=r.Relation,this.operators=r.CompareOperators,this.columnSizeData=[60,50,120,100,60,120,50,50],this.groupIcon='<i class="f-icon f-icon-lookup"></i>',this.conditions=[],this.columns=[],this.enableExpress=!1,this.enableFrontExpress=!1,this.showExpress=new f.EventEmitter,this.currentCondition=null,this.newCondition={filterField:"",value:"",lbracket:"",rbracket:"",relation:r.FilterRelation.Empty,compare:r.Compare.Equal,expresstype:r.ExpressValueType.Value},this.localeService=null,this.localeService=this.messagerService.localeService}var S=(F.prototype.ngOnInit=function(){},F.prototype.onAddFilter=function(){this.addFilter.emit()},F.prototype.onClear=function(){this.clearFilter.emit()},F.prototype.onMoveTop=function(){this.moveTop.emit()},F.prototype.onMovePrev=function(){this.movePrev.emit()},F.prototype.onMoveNext=function(){this.moveNext.emit()},F.prototype.onMoveBottom=function(){this.moveBottom.emit()},F.prototype.canUse=function(){return!!this.grid.currentCondition&&1<this.grid.conditions.length},F.prototype.canMoveUp=function(){return!!this.canUse()&&0<this.grid.currentCondition.index},F.prototype.canMoveDown=function(){return!!this.canUse()&&this.grid.currentCondition.index<this.grid.conditions.length-1},F.decorators=[{type:f.Component,args:[{selector:"filter-footer",template:'\n    <div class="footer-container">\n        <button type="button" (click)="onAddFilter()"\n            class="k-button k-button-icontext k-flat "><span class="f-icon f-icon-add"></span> {{ \'filterEditor.addWhere\' | locale }}</button>\n        <button type="button" (click)="onClear()" [disabled]="!grid.conditions.length"\n            class="k-button k-button-icontext k-flat "><span class="f-icon f-icon-close"></span> {{ \'filterEditor.clear\' | locale }}</button>\n        <button type="button" [disabled]="!canMoveUp()" (click)="onMoveTop()"\n            class="k-button k-button-icontext k-flat "><span class="f-icon f-icon-arrow-end-up"></span>\n            {{\'filterEditor.moveTop\' | locale }}</button>\n        <button type="button" [disabled]="!canMoveUp()" (click)="onMovePrev()"\n            class="k-button k-button-icontext k-flat "><span class="f-icon f-icon-arrow-60-up"></span>\n            {{\'filterEditor.moveUp\' | locale }}</button>\n        <button type="button" [disabled]="!canMoveDown()" (click)="onMoveNext()"\n            class="k-button k-button-icontext k-flat "><span class="f-icon f-icon-arrow-60-down"></span>\n            {{\'filterEditor.moveDown\' | locale }}</button>\n        <button type="button" [disabled]="!canMoveDown()" (click)="onMoveBottom()"\n            class="k-button k-button-icontext k-flat"><span class="f-icon f-icon-arrow-end-down"></span>\n            {{\'filterEditor.moveBottom\' | locale }}</button>\n    </div>\n    '}]}],F.ctorParameters=function(){return[{type:k}]},F.propDecorators={cls:[{type:f.HostBinding,args:["class"]}],addFilter:[{type:f.Output}],clearFilter:[{type:f.Output}],moveTop:[{type:f.Output}],movePrev:[{type:f.Output}],moveNext:[{type:f.Output}],moveBottom:[{type:f.Output}]},F);function F(t){this.grid=t,this.cls="f-filter-footer",this.addFilter=new f.EventEmitter,this.clearFilter=new f.EventEmitter,this.moveTop=new f.EventEmitter,this.movePrev=new f.EventEmitter,this.moveNext=new f.EventEmitter,this.moveBottom=new f.EventEmitter}var M=(D.prototype.ngOnInit=function(){},D.prototype.showTab=function(t){this.currentTabIndex=t,this.selectTabChange.emit(t)},D.prototype.showExpressDialog=function(t){this.showExpress.emit(t)},D.decorators=[{type:f.Component,args:[{selector:"filter-tabs",template:'\n    <ul class="nav nav-tabs" style="min-height: 38px">\n        <li class="nav-item">\n            <a class="nav-link" [class.active]="currentTabIndex === 0"  (click)="showTab(0)">{{ \'filterEditor.designTab\' | locale }}</a>\n        </li>\n        <li class="nav-item" *ngIf="showCode">\n            <a class="nav-link" [class.active]="currentTabIndex === 1" (click)="showTab(1)">{{ \'filterEditor.jsonTab\' | locale }}</a>\n        </li>\n        <li class="nav-item" *ngIf="showSql">\n            <a class="nav-link" [class.active]="currentTabIndex === 2" (click)="showTab(2)">{{ \'filterEditor.sqlTab\' | locale }}</a>\n        </li>\n    </ul>\n\n    <ng-container *ngIf="currentTabIndex === 0">\n        <filter-grid style="overflow: hidden;"\n          [enableExpress]="enableExpress" [enableFrontExpress]="enableFrontExpress"\n          class="d-flex flex-column flex-fill"  [fieldEditor]="fieldEditor"\n          [conditions]="conditions" [columns]="columns" (showExpress)="showExpressDialog($event)"></filter-grid>\n    </ng-container>\n    <ng-container *ngIf="currentTabIndex === 1 && showCode">\n        <filter-code [height]="height" [conditions]="conditions"></filter-code>\n    </ng-container>\n    <ng-container *ngIf="currentTabIndex === 2 && showSql">\n        <filter-sql [height]="height" [conditions]="conditions"></filter-sql>\n    </ng-container>\n\n    ',styles:[".nav-item { cursor: default;}\n        .nav-item a.active {font-weight: bold;}\n        "]}]}],D.ctorParameters=function(){return[]},D.propDecorators={columns:[{type:f.Input}],conditions:[{type:f.Input}],height:[{type:f.Input}],showCode:[{type:f.Input}],showSql:[{type:f.Input}],fieldEditor:[{type:f.Input}],selectTabChange:[{type:f.Output}],enableExpress:[{type:f.Input}],enableFrontExpress:[{type:f.Input}],showExpress:[{type:f.Output}]},D);function D(){this.columns=[],this.conditions=[],this.showCode=!1,this.showSql=!1,this.fieldEditor={type:"select"},this.selectTabChange=new f.EventEmitter,this.enableExpress=!1,this.enableFrontExpress=!1,this.showExpress=new f.EventEmitter,this.currentTabIndex=0}var T,q={provide:s.NG_VALUE_ACCESSOR,useExisting:f.forwardRef(function(){return R}),multi:!0},R=(function V(t,e){function o(){this.constructor=t}E(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}(O,T=a.LookupComponent),O.prototype.ngOnInit=function(){},O.prototype.onmouseover=function(t){this.showClearButton=!0},O.prototype.onmouseleave=function(t){this.showClearButton=!1},O.prototype.showDialog=function(){var e=this;if(!this.disabled){this.fieldEditor&&"combo-tree"===this.fieldEditor.type&&(this.fieldEditor.options=this.fieldEditor.options||{},this.fieldEditor.options.autoWidth===undefined&&(this.fieldEditor.options.autoWidth=!0),this.fieldEditor.options.columns||(this.fieldEditor.options.columns=[{field:"label",title:"label",width:100}]),this.fieldEditor.options.textField||(this.fieldEditor.options.textField="label"),this.fieldEditor.options.idField||(this.fieldEditor.options.idField="value"));var t=this.cfr.resolveComponentFactory(v);this.filterEditorRef=t.create(this.injector),this.filterEditorRef.instance.columns=this.columns,this.filterEditorRef.instance.conditions=this.conditions,this.originalData=n.cloneDeep(this.conditions),this.dlgRef=this.modalService.show(this.filterEditorRef,{width:800,height:500,title:this.localeService.getValue("filterEditor.title"),enableScroll:!1,minHeight:398,minWidth:798,iconCls:"f-icon f-icon-filter",buttons:this.btnRef,buttonAlign:"right",initialState:{showCode:this.showCode,showSql:this.showSql,enableExpress:this.enableExpress,fieldEditor:this.fieldEditor},closed:function(t){t&&e.cancel()}}),this.filterEditorRef.instance.height=this.dlgRef.dialog.instance.getContainerSize().height,this.filterEditorRef.instance.showExpress.subscribe(function(t){e.showExpress.emit(t)}),this.dlgRef.dialog.instance.resized.subscribe(function(t){e.filterEditorRef.instance.height=t.containerHeight}),this.filterEditorRef.changeDetectorRef.detectChanges(),this.dlgRef.dialog.changeDetectorRef.reattach(),this.openDialog.emit()}},O.prototype.writeValue=function(t){t&&("string"==typeof t&&(t=JSON.parse(t)),this.conditions=t||[],this.text=this.commonUtils.buildSqlWhere(this.conditions))},O.prototype.save=function(){this.conditions.length?(this.conditions=this.conditions.filter(function(t){return t.filterField}),this.conditions=this.conditions.map(function(t){var e=parseInt(""+t.compare,10);return e!==r.Compare.In&&e!==r.Compare.NotIn||(t.value=t.value.replace(/,/g,"\r\n")),t}),this.text=this.commonUtils.buildSqlWhere(this.conditions)):this.text="",this.cd&&this.cd.detectChanges(),this.closeDialog()},O.prototype.cancel=function(){this.conditions=this.originalData,this.closeDialog()},O.prototype.closeDialog=function(){this.updateModel(),this.filterEditorRef=null,this.dlgRef.close()},O.prototype.clear=function(){this.text="",this.conditions=[],this.updateModel()},O.prototype.updateModel=function(){var t=this.conditions;"string"===this.returnType&&(t=JSON.stringify(this.conditions)),this.onModelChange(t),this.onModelTouched(t)},O.decorators=[{type:f.Component,args:[{selector:"filter,filter-textbox",template:'<div class="input-group">\r\n    <input #txtbox\r\n        class="form-control" \r\n        [value]="text"\r\n        [readonly]="!editable || readonly"\r\n        [class.f-state-disabled] = "disabled"\r\n        [class.f-state-readonly] = "readonly"\r\n        [class.f-state-editable] = "!editable"\r\n        [disabled]="disabled"/>\r\n    <div class="input-group-append" *ngIf="!readonly && !disabled">\r\n        <span *ngIf="showClearButton && enableClear" class="input-group-text input-group-clear" (click)="clear()">\r\n            <i class="f-icon modal_close"></i>\r\n        </span>\r\n        <span class="f-select input-group-text"  (click)="showDialog()">\r\n            <i class="f-icon f-icon-lookup"></i>\r\n        </span>\r\n    </div>\r\n</div>\r\n\r\n<ng-template #defaultButtonRef>\r\n    <button class="btn btn-outline-secondary" (click)="cancel()"> {{ \'filterEditor.cancelButton\'|locale }} </button>&nbsp;\r\n    <button class="btn btn-primary" (click)="save()"> {{ \'filterEditor.okButton\'| locale }} </button>\r\n</ng-template>',providers:[q,b],styles:["\n        .lookup-clear { cursor: pointer; background: #fff!important;}\n        .lookup-clear:hover { background: #e9ecef!important;}\n        "]}]}],O.ctorParameters=function(){return[{type:f.Injector},{type:f.ComponentFactoryResolver},{type:i.BsModalService},{type:f.ElementRef},{type:b}]},O.propDecorators={hostCls:[{type:f.HostBinding,args:["class"]}],columns:[{type:f.Input}],showCode:[{type:f.Input}],showSql:[{type:f.Input}],enableExpress:[{type:f.Input}],fieldEditor:[{type:f.Input}],enableClear:[{type:f.Input}],returnType:[{type:f.Input}],openDialog:[{type:f.Output}],showExpress:[{type:f.Output}],btnRef:[{type:f.ViewChild,args:["defaultButtonRef"]}],textbox:[{type:f.ViewChild,args:["txtbox"]}],onmouseover:[{type:f.HostListener,args:["mouseover",["$event"]]}],onmouseleave:[{type:f.HostListener,args:["mouseleave",["$event"]]}]},O);function O(t,e,o,n,i){var r=T.call(this,t,n)||this;return r.cfr=e,r.modalService=o,r.el=n,r.filterService=i,r.hostCls="f-cmp-inputgroup",r.text="",r.conditions=[],r.originalData=[],r.columns=[],r.showCode=!1,r.showSql=!1,r.enableExpress=!1,r.fieldEditor={type:"select",options:{}},r.enableClear=!0,r.returnType="object",r.openDialog=new f.EventEmitter,r.showExpress=new f.EventEmitter,r.showClearButton=!1,r.cd=null,r.commonUtils=null,r.filterService.conditionsChanged.subscribe(function(t){r.conditions=t}),r.localeService=r.injector.get(m.LocaleService),r.cd=r.injector.get(f.ChangeDetectorRef),r.commonUtils=r.injector.get(u.CommonUtils,null)||new u.CommonUtils,r}var B=(L.prototype.ngOnInit=function(){this.sql=this.filterService.buildSqlWhere(this.conditions)},L.prototype.ngOnChanges=function(t){t.conditions&&!t.conditions.isFirstChange()&&(this.sql=this.filterService.buildSqlWhere(this.conditions))},L.decorators=[{type:f.Component,args:[{selector:"filter-sql",template:'\n    <pre class="flex-fill" [style.height.px]="height - 38">\n<code>{{ sql  }}</code>\n    </pre>\n    ',styles:["\n        pre {\n            color: #d8d9d9;\n            background: #424242;\n            padding-left: 20px;\n            padding-top: 20px;\n            margin-bottom: 0;\n            font-size: 16px;\n        }\n        "]}]}],L.ctorParameters=function(){return[{type:b}]},L.propDecorators={height:[{type:f.Input}],cls:[{type:f.HostBinding,args:["class"]}],conditions:[{type:f.Input}]},L);function L(t){this.filterService=t,this.cls="d-flex flex-column flex-fill",this.conditions=[],this.sql=""}var P=(U.prototype.ngOnInit=function(){this.el.nativeElement.style.overflow="auto"},U.decorators=[{type:f.Component,args:[{selector:"filter-code",template:'\n    <div style="overflow:auto" [style.height.px]="height - 38">\n        <pre class="flex-fill">\n            <code>{{ conditions | json }}</code>\n        </pre>\n    </div>\n    ',styles:["\n        pre {\n            color: #d8d9d9;\n            background: #424242;\n            padding-left: 20px;\n            padding-top: 20px;\n            margin-bottom: 0;\n            font-size: 16px;\n        }\n        "]}]}],U.ctorParameters=function(){return[{type:f.ElementRef}]},U.propDecorators={cls:[{type:f.HostBinding,args:["class"]}],height:[{type:f.Input}],conditions:[{type:f.Input}]},U);function U(t){this.el=t,this.cls="d-flex flex-column flex-fill",this.conditions=[]}var j=(_.decorators=[{type:f.NgModule,args:[{imports:[l.CommonModule,s.FormsModule,u.FarrisCommonModule,d.MessagerModule.forRoot(),p.PerfectScrollbarModule,c.FarrisDialogModule,a.LookupModule,h.InputGroupModule,m.LocaleModule.forRoot(),g.ComboLookupModule],exports:[R,v,k,S],declarations:[M,k,S,v,P,B,R],providers:[],entryComponents:[v]}]}],_);function _(){}t.FilterCodeComponent=P,t.FilterSqlCodeComponent=B,t.FilterService=b,t.FilterEditorComponent=v,t.FilterFooterComponent=S,t.FilterGridComponent=k,t.FilterTabsComponent=M,t.FILTER_LOOKUPGRID_VALUE_ACCESSOR=q,t.FilterComponent=R,t.FilterModule=j,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=farris-ui-filter-editor.umd.min.js.map