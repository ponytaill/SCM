/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
/*
 * @Author: 疯狂秀才(Lucas Huang)
 * @Date: 2019-08-14 15:22:21
 * @LastEditors: 疯狂秀才(Lucas Huang)
 * @LastEditTime: 2019-08-15 16:44:15
 * @QQ: 1055818239
 * @Version: v0.0.1
 */
import { Component, Input, ContentChild, HostBinding, ViewChild, Optional, NgZone, Injector, Renderer2, } from "@angular/core";
import { FarrisSectionTitleDirective } from "./directive/section-title.directive";
import { FarrisSectionHeaderDirective } from "./directive/section-header.directive";
import { FarrisSectionHcontentDirective } from "./directive/section-hcontent.directive";
import { FarrisSectionToolbarDirective, FarrisSectionViewChangeDirective, } from "./directive/section-toolbar.directive";
import { FarrisSectionExtendDirective } from "./directive/section-extend.directive";
import { FarrisSectionContentDirective } from "./directive/section-content.directive";
import { Observable, Subject, of } from "rxjs";
import ResizeObserver from "resize-observer-polyfill";
import { map, debounceTime } from "rxjs/operators";
var FarrisSectionComponent = /** @class */ (function () {
    function FarrisSectionComponent(inject) {
        this.inject = inject;
        this.contentCls = "";
        this.baseCls = true;
        this.maxStatus = false;
        // 是否显示header
        this.showHeader = true;
        // 是否支持最大化
        this.enableMaximize = false;
        /**
         * 是否启用収折功能
         * 默认不启用収折,值为''
         * 启用默认収折,值为'default'
         * 启用自定义収折,值为 'custom'
         *
         */
        this.enableAccordion = "";
        // section是否铺满
        this.fill = false;
        // 默认是是否展开
        this.expandStatus = true;
        // 就来按钮位置
        this.toolbarPosition = "";
        //
        this.toolbarBtns = [];
        // 工具栏按钮
        this._toolbar = null;
        //标记按钮工具栏是否隐藏[更多]按钮
        this.toolbarDpHidden = true;
        // 参照Tab中这样的处理方式有问题----延后修改
        // 是否被禁用的状态
        // 按照之前的逻辑，如果没有找到key，就说明被禁用
        this._disableDatas = new Subject();
        // 按照之前的逻辑，如果没有找到key，就说明可见
        this._visibleDatas = new Subject();
        this.clickThrottleTime = 350;
        this.clickItems = new Subject();
        // 用于计算响应时
        this.ro = null;
        this.resizeEl = null;
        this.inMoreButtonContents = [];
        if (this.inject) {
            this.ngZone = this.inject.get(NgZone, null);
            this.renderer = this.inject.get(Renderer2, null);
        }
    }
    Object.defineProperty(FarrisSectionComponent.prototype, "fillCls", {
        get: /**
         * @return {?}
         */
        function () {
            return this.fill;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FarrisSectionComponent.prototype, "enableAccordionCls", {
        get: /**
         * @return {?}
         */
        function () {
            return this.enableAccordion == "default";
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FarrisSectionComponent.prototype, "enableCollapseCls", {
        get: /**
         * @return {?}
         */
        function () {
            if (this.enableAccordion === "default" ||
                this.enableAccordion === "custom") {
                return !this.expandStatus;
            }
            else {
                return false;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FarrisSectionComponent.prototype, "enableCustomAccordionCls", {
        get: /**
         * @return {?}
         */
        function () {
            return this.enableAccordion == "custom";
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FarrisSectionComponent.prototype, "toolbar", {
        get: /**
         * @return {?}
         */
        function () {
            return this._toolbar;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (value) {
                this._toolbar = value;
                // 计算位置
                this.toolbarPosition = this.getToolbarPosition();
                //
                this.toolbarBtns = tslib_1.__spread(this.toolbar.contents);
                this.inMoreButtonContents = [];
                // 绑定事件
                this.bindResizeEvent();
                // 调整界面
                this.afterBindToolbarData();
            }
            else {
                this._toolbar = null;
                // 有位置
                this.toolbarPosition = "";
                this.toolbarBtns = [];
                this.inMoreButtonContents = [];
                // 移除绑定事件
                this.unBindResizeEvent();
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FarrisSectionComponent.prototype, "btnStates", {
        set: /**
         * @param {?} values
         * @return {?}
         */
        function (values) {
            if (values) {
                if (this._disableDatas &&
                    this._disableDatas.hasOwnProperty("unsubscribe")) {
                    this._disableDatas["unsubscribe"]();
                }
                this._disableDatas = values;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FarrisSectionComponent.prototype, "btnVisible", {
        // 是否可见的状态
        set: 
        // 是否可见的状态
        /**
         * @param {?} values
         * @return {?}
         */
        function (values) {
            if (values) {
                if (this._visibleDatas &&
                    this._visibleDatas.hasOwnProperty("unsubscribe")) {
                    this._visibleDatas["unsubscribe"]();
                }
                this._visibleDatas = values;
            }
        },
        enumerable: true,
        configurable: true
    });
    // 用于提供循环效率
    // 用于提供循环效率
    /**
     * @param {?} index
     * @param {?} btn
     * @return {?}
     */
    FarrisSectionComponent.prototype.trackByButton = 
    // 用于提供循环效率
    /**
     * @param {?} index
     * @param {?} btn
     * @return {?}
     */
    function (index, btn) {
        return btn.id;
    };
    /**
     * @return {?}
     */
    FarrisSectionComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        // 标记点击事件
        this.clickSubscription = this.clickItems
            .pipe(debounceTime(this.clickThrottleTime))
            .subscribe((/**
         * @param {?} btnInfo
         * @return {?}
         */
        function (btnInfo) {
            if (btnInfo.click && typeof btnInfo.click == "function") {
                btnInfo.click({ context: _this.context });
            }
        }));
        // 绑定状态
        this._disableDatas.subscribe((/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            // 调整按钮可用状态
            _this.changeState(data, "disable");
        }));
        this._visibleDatas.subscribe((/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            // 调整按钮可见状态
            _this.changeState(data, "visible");
        }));
    };
    /**
     * 获取按钮配置中，禁用、可见的属性
     * @param id
     * @param stateProp
     */
    /**
     * 获取按钮配置中，禁用、可见的属性
     * @param {?} btnItem
     * @param {?} stateProp
     * @return {?}
     */
    FarrisSectionComponent.prototype.getState = /**
     * 获取按钮配置中，禁用、可见的属性
     * @param {?} btnItem
     * @param {?} stateProp
     * @return {?}
     */
    function (btnItem, stateProp) {
        if (btnItem.hasOwnProperty(stateProp)) {
            return btnItem[stateProp];
        }
        // 不存在属性
        if (stateProp == "visible") {
            return true;
        }
        return false;
    };
    /**
     * 改变可用状态
     * @param values
     */
    /**
     * 改变可用状态
     * @private
     * @param {?} values
     * @param {?} stateProp
     * @return {?}
     */
    FarrisSectionComponent.prototype.changeState = /**
     * 改变可用状态
     * @private
     * @param {?} values
     * @param {?} stateProp
     * @return {?}
     */
    function (values, stateProp) {
        var _this = this;
        /** @type {?} */
        var idArray = Object.keys(values);
        idArray.forEach((/**
         * @param {?} id
         * @return {?}
         */
        function (id) {
            /** @type {?} */
            var state = values[id];
            /** @type {?} */
            var item = _this._findItemByID(id, _this.toolbarBtns);
            if (item) {
                item[stateProp] = state;
            }
        }));
        this.inMoreButtonContents.forEach((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            /** @type {?} */
            var findId = idArray.find((/**
             * @param {?} id
             * @return {?}
             */
            function (id) { return id == item.id; }));
            if (findId) {
                item[stateProp] = values[findId];
            }
        }));
    };
    /**
     * 查找
     * @param id
     * @param datas
     */
    /**
     * 查找
     * @private
     * @param {?} id
     * @param {?} datas
     * @return {?}
     */
    FarrisSectionComponent.prototype._findItemByID = /**
     * 查找
     * @private
     * @param {?} id
     * @param {?} datas
     * @return {?}
     */
    function (id, datas) {
        return datas.find((/**
         * @param {?} item
         * @return {?}
         */
        function (item) { return item.id == id; }));
    };
    /**
     * @return {?}
     */
    FarrisSectionComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        if (this.clickSubscription) {
            this.clickSubscription.unsubscribe();
            this.clickSubscription = null;
        }
        if (this._visibleDatas &&
            this._visibleDatas.hasOwnProperty("unsubscribe")) {
            this._visibleDatas["unsubscribe"]();
            this._visibleDatas = null;
        }
        if (this._disableDatas &&
            this._disableDatas.hasOwnProperty("unsubscribe")) {
            this._disableDatas["unsubscribe"]();
            this._disableDatas = null;
        }
        this.unBindResizeEvent();
    };
    /**
     * 绑定限制
     */
    /**
     * 绑定限制
     * @private
     * @return {?}
     */
    FarrisSectionComponent.prototype.bindResizeEvent = /**
     * 绑定限制
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        // 标记响应时
        if (this.ngZone && this.toolbar && this.toolbar.contents.length > 0) {
            this.ngZone.runOutsideAngular((/**
             * @return {?}
             */
            function () {
                setTimeout((/**
                 * @return {?}
                 */
                function () {
                    if (!_this.toolbarContainer) {
                        return;
                    }
                    if (_this.ro) {
                        if (_this.toolbarContainer.nativeElement.parentElement ==
                            _this.resizeEl) {
                            // 已绑定过
                            return;
                        }
                        else {
                            _this.unBindResizeEvent();
                        }
                    }
                    if (_this.ro === null) {
                        _this.ro = new ResizeObserver((/**
                         * @param {?} el
                         * @return {?}
                         */
                        function (el) {
                            _this._calculateToolbarDropdownIsShow();
                            _this._calculateButtonsShow();
                        }));
                        _this.resizeEl =
                            _this.toolbarContainer.nativeElement.parentElement;
                        _this.ro.observe(_this.resizeEl);
                    }
                }), 0);
            }));
        }
        else {
            this.unBindResizeEvent();
        }
    };
    /**
     * 按钮数据变更后触发检查
     */
    /**
     * 按钮数据变更后触发检查
     * @private
     * @return {?}
     */
    FarrisSectionComponent.prototype.afterBindToolbarData = /**
     * 按钮数据变更后触发检查
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.ngZone && this.toolbar && this.toolbar.contents.length > 0) {
            this.ngZone.runOutsideAngular((/**
             * @return {?}
             */
            function () {
                setTimeout((/**
                 * @return {?}
                 */
                function () {
                    _this._calculateToolbarDropdownIsShow();
                    _this._calculateButtonsShow();
                }), 0);
            }));
        }
    };
    /**
     * 判断下拉按钮是否显示
     */
    /**
     * 判断下拉按钮是否显示
     * @private
     * @return {?}
     */
    FarrisSectionComponent.prototype._calculateToolbarDropdownIsShow = /**
     * 判断下拉按钮是否显示
     * @private
     * @return {?}
     */
    function () {
        if (!this.toolbarContainer || !this.toolbar || !this.toolbarPosition) {
            // 容器未显示，没有数据，没有按钮位置
            this.toolbarDpHidden = true;
            return;
        }
        /** @type {?} */
        var btnParentsContainer = this.toolbarContainer.nativeElement.parentElement;
        if (this.btnPlaceHolder.nativeElement.scrollWidth >
            btnParentsContainer.offsetWidth) {
            this.toolbarDpHidden = false;
        }
        else {
            this.toolbarDpHidden = true;
        }
    };
    /**
     * 计算显示的按钮个数及更多中显示的按钮个数
     */
    /**
     * 计算显示的按钮个数及更多中显示的按钮个数
     * @private
     * @return {?}
     */
    FarrisSectionComponent.prototype._calculateButtonsShow = /**
     * 计算显示的按钮个数及更多中显示的按钮个数
     * @private
     * @return {?}
     */
    function () {
        if (!this.toolbarContainer || !this.toolbar || !this.toolbarPosition) {
            // 容器未显示，没有数据，没有按钮位置
            return;
        }
        if (this.toolbarDpHidden) {
            this.toolbarBtns = tslib_1.__spread(this.toolbar.contents);
            this.inMoreButtonContents = [];
            return;
        }
        /** @type {?} */
        var toolbarParentContainerEl = this.toolbarContainer.nativeElement.parentElement;
        /** @type {?} */
        var divEl = this.toolbarContainer.nativeElement;
        /** @type {?} */
        var btnPlaceHolderEl = this.btnPlaceHolder.nativeElement;
        /** @type {?} */
        var btnPlaceHolderBtns = btnPlaceHolderEl.querySelectorAll("button");
        // 更多按钮
        /** @type {?} */
        var moreButton = toolbarParentContainerEl.querySelector(".morebtn");
        // 计算按钮的宽度
        /** @type {?} */
        var basicStart = parseInt(btnPlaceHolderEl.getBoundingClientRect().left);
        /** @type {?} */
        var basicWidth = toolbarParentContainerEl.offsetWidth - moreButton.offsetWidth - 12;
        /** @type {?} */
        var toolbarDropdownHidden = true;
        /** @type {?} */
        var k = 0;
        // 只有一个按钮
        if (btnPlaceHolderBtns.length == 1) {
            if (btnPlaceHolderEl.offsetWidth > basicWidth) {
                toolbarDropdownHidden = false;
            }
            else {
                k = 1;
            }
        }
        else {
            for (k = 1; k <= btnPlaceHolderBtns.length - 1; k++) {
                // 如果内容超出,考虑到按钮之间的间距
                if (k == btnPlaceHolderBtns.length - 1) {
                    if (btnPlaceHolderEl.offsetWidth > basicWidth) {
                        toolbarDropdownHidden = false;
                        k = k - 1;
                        break;
                    }
                }
                else if (parseInt(btnPlaceHolderBtns[k].getBoundingClientRect().left) -
                    basicStart >
                    basicWidth) {
                    toolbarDropdownHidden = false;
                    k = k - 1;
                    break;
                }
            }
        }
        this.toolbarDpHidden = toolbarDropdownHidden;
        /** @type {?} */
        var showBtns = divEl.querySelectorAll("button");
        /** @type {?} */
        var resultBtns = this.toolbar.contents.filter((/**
         * @param {?} item
         * @param {?} index
         * @return {?}
         */
        function (item, index) {
            return index < k;
        }));
        this.toolbarBtns = resultBtns ? tslib_1.__spread(resultBtns) : [];
        // for (let m = k; m < showBtns.length; m++) {
        //     this.renderer.setStyle(showBtns[m], 'display', 'none');
        // }
        if (this.toolbar.contents && this.toolbar.contents.length) {
            this.inMoreButtonContents = this.toolbar.contents.filter((/**
             * @param {?} item
             * @param {?} index
             * @return {?}
             */
            function (item, index) {
                return index >= k;
            }));
        }
    };
    /**
     * 在按钮状态变化时解除限制
     */
    /**
     * 在按钮状态变化时解除限制
     * @private
     * @return {?}
     */
    FarrisSectionComponent.prototype.unBindResizeEvent = /**
     * 在按钮状态变化时解除限制
     * @private
     * @return {?}
     */
    function () {
        if (this.ro) {
            if (this.resizeEl) {
                this.ro.unobserve(this.resizeEl);
            }
            this.ro = null;
        }
    };
    /**
     * @return string
     * '' 不存在按钮，无所谓位置
     * 'inHead' 按钮在头部
     * 'inContent' 按钮在内容位置
     */
    /**
     * @private
     * @return {?} string
     * '' 不存在按钮，无所谓位置
     * 'inHead' 按钮在头部
     * 'inContent' 按钮在内容位置
     */
    FarrisSectionComponent.prototype.getToolbarPosition = /**
     * @private
     * @return {?} string
     * '' 不存在按钮，无所谓位置
     * 'inHead' 按钮在头部
     * 'inContent' 按钮在内容位置
     */
    function () {
        if (this.toolbar &&
            this.toolbar.hasOwnProperty("position") &&
            this.toolbar.hasOwnProperty("contents") &&
            this.toolbar.contents.length > 0) {
            // 如果有属性，且按钮有值
            if (this.toolbar.position === "inHead") {
                return "inHead";
            }
            else {
                return "inContent";
            }
        }
        return "";
    };
    /**
     * 判断是否显示、隐藏
     * @param id
     * @param state
     */
    /**
     * 判断是否显示、隐藏
     * @param {?} id
     * @param {?=} state
     * @param {?=} defaultValue
     * @return {?}
     */
    FarrisSectionComponent.prototype.getToolbarState = /**
     * 判断是否显示、隐藏
     * @param {?} id
     * @param {?=} state
     * @param {?=} defaultValue
     * @return {?}
     */
    function (id, state, defaultValue) {
        if (state === void 0) { state = this.btnStates; }
        if (defaultValue === void 0) { defaultValue = false; }
        if (state) {
            return state.pipe(map((/**
             * @param {?} n
             * @return {?}
             */
            function (n) {
                if (n[id] === undefined) {
                    // console.warn(`未找ID为：${id} 相关状态设置！`);
                    return defaultValue;
                }
                return n[id];
            })));
        }
        else {
            return of(defaultValue);
        }
    };
    /**
     * @param {?} btnInfo
     * @return {?}
     */
    FarrisSectionComponent.prototype.clickHandler = /**
     * @param {?} btnInfo
     * @return {?}
     */
    function (btnInfo) {
        if (!btnInfo) {
            return;
        }
        this.clickItems.next(btnInfo);
    };
    FarrisSectionComponent.decorators = [
        { type: Component, args: [{
                    selector: "farris-section",
                    template: "<div class=\"f-section-header\" [ngClass]=\"headerDirective && headerDirective.headerCls\" *ngIf=\"showHeader\">\r\n    \r\n    <div *ngIf=\"headerComponentType\" component-template [cmpRef]=\"headerComponentType\" [ctx]=\"ctx\"></div>\r\n\r\n    <ng-template [ngTemplateOutlet]=\"headerDirective.templateRef\"\r\n        *ngIf=\"!headerComponentType&&headerDirective && headerDirective.templateRef\"></ng-template>\r\n    <ng-template [ngIf]=\"!headerDirective\">\r\n        <div component-template *ngIf=\"titleComponentType\" [cmpRef]=\"titleComponentType\" [ctx]=\"ctx\"></div>\r\n        <ng-template [ngTemplateOutlet]=\"headerTitleDirective.templateRef\"\r\n            *ngIf=\"!titleComponentType&&headerTitleDirective && headerTitleDirective.templateRef\" [ngTemplateOutletContext]=\"{context:this.context,index:this.index }\"></ng-template>\r\n        <div *ngIf=\"!headerComponentType&&!titleComponentType&&(!headerTitleDirective||!headerTitleDirective.templateRef)\" class=\"f-title\"\r\n            (click)=\"this.expandStatus = !this.expandStatus\">\r\n            <h4 class=\"f-title-text\">{{ mainTitle }}</h4>\r\n            <span *ngIf=\"subTitle && subTitle.length\">{{\r\n            subTitle\r\n        }}</span>\r\n        </div>\r\n        <div class=\"f-content\"  *ngIf=\"contentComponentType\" component-template [cmpRef]=\"contentComponentType\" [ctx]=\"ctx\"></div>\r\n        <div class=\"f-content\" [ngClass]=\"\r\n            headerContentDirective &&\r\n            headerContentDirective.hcontentCls\r\n        \" *ngIf=\"\r\n            !contentComponentType&&headerContentDirective &&\r\n            headerContentDirective.templateRef\r\n        \">\r\n            <ng-template [ngTemplateOutlet]=\"headerContentDirective.templateRef\"></ng-template>\r\n        </div>\r\n        <div class=\"f-toolbar\"  *ngIf=\"toolbarComponentType\" component-template [cmpRef]=\"toolbarComponentType\" [ctx]=\"ctx\"></div>\r\n        <div class=\"f-toolbar\" [ngClass]=\"\r\n            headerToolbarDirective &&\r\n            headerToolbarDirective.toolbarCls\" *ngIf=\" !toolbarComponentType&&headerToolbarDirective &&headerToolbarDirective.templateRef \">\r\n            <ng-template [ngTemplateOutlet]=\"headerToolbarDirective.templateRef\" *ngIf=\"\r\n                headerToolbarDirective &&\r\n                headerToolbarDirective.templateRef\r\n            \"></ng-template>\r\n        </div>\r\n        <div #toolbarHeaderContainer class=\"f-section-toolbar f-section-header--toolbar\"\r\n            *ngIf=\"!toolbarComponentType&&!headerToolbarDirective&&toolbarPosition=='inHead'\">\r\n            <ng-container [ngTemplateOutlet]=\"toolbarBtnTmpl\"\r\n                [ngTemplateOutletContext]=\"{ datas: toolbarBtns, dpHidden:toolbarDpHidden,dpDatas:inMoreButtonContents}\">\r\n            </ng-container>\r\n        </div>\r\n        <div class=\"f-viewchange\" *ngIf=\"viewchagneComponentType\" component-template [cmpRef]=\"viewchagneComponentType\" [ctx]=\"ctx\"></div>\r\n        <div class=\"f-viewchange\" [ngClass]=\"viewChangeDirective && viewChangeDirective.viewChangeCls\"\r\n            *ngIf=\"!viewchagneComponentType&&viewChangeDirective &&viewChangeDirective.templateRef \">\r\n            <ng-template [ngTemplateOutlet]=\"viewChangeDirective.templateRef\"></ng-template>\r\n        </div>\r\n        <div class=\"f-max-accordion\" *ngIf=\"enableMaximize||enableAccordion!=''\">\r\n            <span class=\"f-icon\" *ngIf=\"enableMaximize\" [class.f-icon-maximize]=\"!maxStatus\"\r\n                [class.f-icon-minimize]=\"maxStatus\" (click)=\"this.maxStatus = !this.maxStatus\"> </span>\r\n            <button class=\"btn f-btn-collapse-expand f-btn-mx\" *ngIf=\"enableAccordion\"\r\n                [ngClass]=\"{ 'f-state-expand': expandStatus }\" (click)=\"this.expandStatus = !this.expandStatus\">\r\n                <span *ngIf=\"!expandStatus\">{{'section.expandLabel'|locale}}</span>\r\n                <span *ngIf=\"expandStatus\">{{'section.collapseLabel'|locale}}</span>\r\n            </button>\r\n        </div>\r\n    </ng-template>\r\n\r\n    <div class=\"f-section-header--btn-placeholder\" #btnPlaceholder *ngIf=\"!headerToolbarDirective&&toolbarPosition\">\r\n        <ng-container *ngFor=\"let btn of toolbar.contents\">\r\n            <button [ngClass]=\"btn.appearance.class\"\r\n                *ngIf=\"getToolbarState(btn.id, btnVisible,true) | async\">{{btn.title}}</button>\r\n        </ng-container>\r\n    </div>\r\n</div>\r\n<div class=\"f-section-header--btn-placeholder\" #btnPlaceholder *ngIf=\"!showHeader&&toolbarPosition=='inContent'\">\r\n    <ng-container *ngFor=\"let btn of toolbar.contents\">\r\n        <button [ngClass]=\"btn.appearance.class\"\r\n            *ngIf=\"getToolbarState(btn.id, btnVisible,true) | async\">{{btn.title}}</button>\r\n    </ng-container>\r\n</div>\r\n\r\n<div class=\"f-section-extend\" *ngIf=\"extendComponentType\" component-template [cmpRef]=\"extendComponentType\" [ctx]=\"ctx\">\r\n</div>\r\n\r\n<div class=\"f-section-extend\" [ngClass]=\"extendDirective && extendDirective.extendCls\" \r\n    *ngIf=\"!extendComponentType&&extendDirective && extendDirective.templateRef\">\r\n    <ng-template  [ngTemplateOutlet]=\"extendDirective.templateRef\"></ng-template>\r\n</div>\r\n\r\n<div class=\"f-section-content\" [ngClass]=\"contentCls\">\r\n    <div class=\"f-section-toolbar f-section-content--toolbar\"\r\n        *ngIf=\"!toolbarComponentType&&!headerToolbarDirective&&toolbarPosition=='inContent'\">\r\n        <ng-container [ngTemplateOutlet]=\"toolbarBtnTmpl\"\r\n            [ngTemplateOutletContext]=\"{ datas: toolbarBtns, dpHidden:toolbarDpHidden,dpDatas:inMoreButtonContents}\">\r\n        </ng-container>\r\n    </div>\r\n    <ng-content></ng-content>\r\n</div>\r\n<ng-template #toolbarBtnTmpl let-datas=\"datas\" let-dpHidden=\"dpHidden\" let-dpDatas=\"dpDatas\">\r\n    <div class=\"toolbar-btn-inline-flex\" #toolbarContainer>\r\n        <ng-container *ngFor=\"let btn of datas;trackBy:trackByButton\">\r\n            <button [attr.id]=\"btn.id\" [ngClass]=\"btn.appearance.class\"\r\n                *ngIf=\"getState(btn,'visible')\"\r\n                [disabled]=\"getState(btn,'disable')\"\r\n                (click)=\"clickHandler(btn)\">{{btn.title}}</button>\r\n        </ng-container>\r\n    </div>\r\n    <div class=\"btn-group sc-nav-btn\" ngbDropdown [hidden]=\"dpHidden\">\r\n        <button class=\"btn btn-link morebtn\" ngbDropdownToggle>{{'tabs.more' | locale}}</button>\r\n        <ul class=\"dropdown-menu\" ngbDropdownMenu *ngIf=\"dpDatas.length>0\">\r\n            <ng-container *ngFor=\"let dpBtn of dpDatas;trackBy:trackByButton\">\r\n                <li class=\"dropdown-item text-truncate px-2\"   *ngIf=\"getState(dpBtn,'visible')\">\r\n                    <button style=\"width:100%;\" [attr.id]=\"dpBtn.id\" class=\"btn btn-link text-left\"\r\n                        [class.disabled]=\"getState(dpBtn,'disable')\"\r\n                        (click)=\"clickHandler(dpBtn)\">{{dpBtn.title}}</button>\r\n                </li>\r\n            </ng-container>\r\n        </ul>\r\n    </div>\r\n</ng-template>",
                    styles: [".f-section-header--btn-placeholder{position:absolute;display:-webkit-inline-box;display:inline-flex;top:-30px;left:0;opacity:0;overflow:hidden;z-index:-90}.f-section-content .toolbar-btn-inline-flex,.f-section-header .toolbar-btn-inline-flex{display:-webkit-inline-box;display:inline-flex;overflow:hidden}.f-section-header--toolbar{-webkit-box-flex:1;flex:1;-webkit-box-align:center;align-items:center;width:30%;display:-webkit-box;display:flex;-webkit-box-pack:end;justify-content:flex-end;margin-left:.875rem}.f-section-content--toolbar{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}"]
                }] }
    ];
    /** @nocollapse */
    FarrisSectionComponent.ctorParameters = function () { return [
        { type: Injector, decorators: [{ type: Optional }] }
    ]; };
    FarrisSectionComponent.propDecorators = {
        contentCls: [{ type: Input }],
        baseCls: [{ type: HostBinding, args: ["class.f-section",] }],
        maxStatus: [{ type: HostBinding, args: ["class.f-section-maximize",] }],
        fillCls: [{ type: HostBinding, args: ["class.f-section-fill",] }],
        enableAccordionCls: [{ type: HostBinding, args: ["class.f-section-accordion",] }],
        enableCollapseCls: [{ type: HostBinding, args: ["class.f-state-collapse",] }],
        enableCustomAccordionCls: [{ type: HostBinding, args: ["class.f-section-custom-accordion",] }],
        mainTitle: [{ type: Input }],
        subTitle: [{ type: Input }],
        showHeader: [{ type: Input }],
        enableMaximize: [{ type: Input }],
        enableAccordion: [{ type: Input }],
        fill: [{ type: Input }],
        expandStatus: [{ type: Input }],
        context: [{ type: Input }],
        index: [{ type: Input }],
        toolbar: [{ type: Input }],
        ctx: [{ type: Input }],
        headerComponentType: [{ type: Input }],
        titleComponentType: [{ type: Input }],
        contentComponentType: [{ type: Input }],
        toolbarComponentType: [{ type: Input }],
        extendComponentType: [{ type: Input }],
        viewchagneComponentType: [{ type: Input }],
        headerDirective: [{ type: ContentChild, args: [FarrisSectionHeaderDirective,] }],
        headerTitleDirective: [{ type: ContentChild, args: [FarrisSectionTitleDirective,] }],
        headerContentDirective: [{ type: ContentChild, args: [FarrisSectionHcontentDirective,] }],
        headerToolbarDirective: [{ type: ContentChild, args: [FarrisSectionToolbarDirective,] }],
        extendDirective: [{ type: ContentChild, args: [FarrisSectionExtendDirective,] }],
        contentDirective: [{ type: ContentChild, args: [FarrisSectionContentDirective,] }],
        viewChangeDirective: [{ type: ContentChild, args: [FarrisSectionViewChangeDirective,] }],
        btnStates: [{ type: Input }],
        btnVisible: [{ type: Input }],
        clickThrottleTime: [{ type: Input }],
        toolbarContainer: [{ type: ViewChild, args: ["toolbarContainer",] }],
        btnPlaceHolder: [{ type: ViewChild, args: ["btnPlaceholder",] }]
    };
    return FarrisSectionComponent;
}());
export { FarrisSectionComponent };
if (false) {
    /** @type {?} */
    FarrisSectionComponent.prototype.contentCls;
    /** @type {?} */
    FarrisSectionComponent.prototype.baseCls;
    /** @type {?} */
    FarrisSectionComponent.prototype.maxStatus;
    /** @type {?} */
    FarrisSectionComponent.prototype.mainTitle;
    /** @type {?} */
    FarrisSectionComponent.prototype.subTitle;
    /** @type {?} */
    FarrisSectionComponent.prototype.showHeader;
    /** @type {?} */
    FarrisSectionComponent.prototype.enableMaximize;
    /**
     * 是否启用収折功能
     * 默认不启用収折,值为''
     * 启用默认収折,值为'default'
     * 启用自定义収折,值为 'custom'
     *
     * @type {?}
     */
    FarrisSectionComponent.prototype.enableAccordion;
    /** @type {?} */
    FarrisSectionComponent.prototype.fill;
    /** @type {?} */
    FarrisSectionComponent.prototype.expandStatus;
    /**
     * 事件上下文，解决按钮点击时没有上下文的问题
     * @type {?}
     */
    FarrisSectionComponent.prototype.context;
    /** @type {?} */
    FarrisSectionComponent.prototype.index;
    /** @type {?} */
    FarrisSectionComponent.prototype.toolbarPosition;
    /** @type {?} */
    FarrisSectionComponent.prototype.toolbarBtns;
    /**
     * @type {?}
     * @private
     */
    FarrisSectionComponent.prototype._toolbar;
    /** @type {?} */
    FarrisSectionComponent.prototype.toolbarDpHidden;
    /** @type {?} */
    FarrisSectionComponent.prototype.ctx;
    /** @type {?} */
    FarrisSectionComponent.prototype.headerComponentType;
    /** @type {?} */
    FarrisSectionComponent.prototype.titleComponentType;
    /** @type {?} */
    FarrisSectionComponent.prototype.contentComponentType;
    /** @type {?} */
    FarrisSectionComponent.prototype.toolbarComponentType;
    /** @type {?} */
    FarrisSectionComponent.prototype.extendComponentType;
    /** @type {?} */
    FarrisSectionComponent.prototype.viewchagneComponentType;
    /** @type {?} */
    FarrisSectionComponent.prototype.headerDirective;
    /** @type {?} */
    FarrisSectionComponent.prototype.headerTitleDirective;
    /** @type {?} */
    FarrisSectionComponent.prototype.headerContentDirective;
    /** @type {?} */
    FarrisSectionComponent.prototype.headerToolbarDirective;
    /** @type {?} */
    FarrisSectionComponent.prototype.extendDirective;
    /** @type {?} */
    FarrisSectionComponent.prototype.contentDirective;
    /** @type {?} */
    FarrisSectionComponent.prototype.viewChangeDirective;
    /** @type {?} */
    FarrisSectionComponent.prototype._disableDatas;
    /** @type {?} */
    FarrisSectionComponent.prototype._visibleDatas;
    /** @type {?} */
    FarrisSectionComponent.prototype.clickThrottleTime;
    /** @type {?} */
    FarrisSectionComponent.prototype.toolbarContainer;
    /** @type {?} */
    FarrisSectionComponent.prototype.btnPlaceHolder;
    /**
     * @type {?}
     * @private
     */
    FarrisSectionComponent.prototype.clickItems;
    /**
     * @type {?}
     * @private
     */
    FarrisSectionComponent.prototype.clickSubscription;
    /**
     * @type {?}
     * @private
     */
    FarrisSectionComponent.prototype.ro;
    /**
     * @type {?}
     * @private
     */
    FarrisSectionComponent.prototype.resizeEl;
    /**
     * @type {?}
     * @private
     */
    FarrisSectionComponent.prototype.ngZone;
    /**
     * @type {?}
     * @private
     */
    FarrisSectionComponent.prototype.renderer;
    /** @type {?} */
    FarrisSectionComponent.prototype.inMoreButtonContents;
    /**
     * @type {?}
     * @private
     */
    FarrisSectionComponent.prototype.inject;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VjdGlvbi5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL3VpLXNlY3Rpb24vIiwic291cmNlcyI6WyJsaWIvc2VjdGlvbi5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQVFBLE9BQU8sRUFDSCxTQUFTLEVBRVQsS0FBSyxFQUNMLFlBQVksRUFDWixXQUFXLEVBRVgsU0FBUyxFQUNULFFBQVEsRUFDUixNQUFNLEVBQ04sUUFBUSxFQUVSLFNBQVMsR0FDWixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUsMkJBQTJCLEVBQUUsTUFBTSxxQ0FBcUMsQ0FBQztBQUNsRixPQUFPLEVBQUUsNEJBQTRCLEVBQUUsTUFBTSxzQ0FBc0MsQ0FBQztBQUNwRixPQUFPLEVBQUUsOEJBQThCLEVBQUUsTUFBTSx3Q0FBd0MsQ0FBQztBQUN4RixPQUFPLEVBQ0gsNkJBQTZCLEVBQzdCLGdDQUFnQyxHQUNuQyxNQUFNLHVDQUF1QyxDQUFDO0FBQy9DLE9BQU8sRUFBRSw0QkFBNEIsRUFBRSxNQUFNLHNDQUFzQyxDQUFDO0FBQ3BGLE9BQU8sRUFBRSw2QkFBNkIsRUFBRSxNQUFNLHVDQUF1QyxDQUFDO0FBQ3RGLE9BQU8sRUFBRSxVQUFVLEVBQUUsT0FBTyxFQUFnQixFQUFFLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFFN0QsT0FBTyxjQUFjLE1BQU0sMEJBQTBCLENBQUM7QUFDdEQsT0FBTyxFQUFFLEdBQUcsRUFBRSxZQUFZLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUVuRDtJQTZLSSxnQ0FBZ0MsTUFBZ0I7UUFBaEIsV0FBTSxHQUFOLE1BQU0sQ0FBVTtRQXZLdkMsZUFBVSxHQUFHLEVBQUUsQ0FBQztRQUNPLFlBQU8sR0FBRyxJQUFJLENBQUM7UUFDTixjQUFTLEdBQVksS0FBSyxDQUFDOztRQTRCM0QsZUFBVSxHQUFHLElBQUksQ0FBQzs7UUFFbEIsbUJBQWMsR0FBRyxLQUFLLENBQUM7Ozs7Ozs7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QUFDLGtCQUFrQjtpQ0FFNUIsU0FBUyxTQUFDLGdCQUFnQjs7SUE2VC9CLDZCQUFDO0NBQUEsQUF6ZEQsSUF5ZEM7U0FwZFksc0JBQXNCOzs7SUFDL0IsNENBQXlCOztJQUN6Qix5Q0FBK0M7O0lBQy9DLDJDQUFvRTs7SUF3QnBFLDJDQUEyQjs7SUFFM0IsMENBQTBCOztJQUUxQiw0Q0FBMkI7O0lBRTNCLGdEQUFnQzs7Ozs7Ozs7O0lBT2hDLGlEQUE4Qjs7SUFFOUIsc0NBQXNCOztJQUV0Qiw4Q0FBNkI7Ozs7O0lBSTdCLHlDQUFzQjs7SUFDdEIsdUNBQW9COztJQUVwQixpREFBcUI7O0lBRXJCLDZDQUFpQjs7Ozs7SUFFakIsMENBQThDOztJQTRCOUMsaURBQXVCOztJQUN2QixxQ0FBYTs7SUFFYixxREFBbUQ7O0lBRW5ELG9EQUFrRDs7SUFFbEQsc0RBQW9EOztJQUVwRCxzREFBb0Q7O0lBRXBELHFEQUFtRDs7SUFFbkQseURBQXVEOztJQUd2RCxpREFBaUU7O0lBRWpFLHNEQUFxRTs7SUFFckUsd0RBQTBFOztJQUUxRSx3REFBeUU7O0lBRXpFLGlEQUFpRTs7SUFFakUsa0RBQW1FOztJQUVuRSxxREFBeUU7O0lBS3pFLCtDQUNrQjs7SUFjbEIsK0NBQ2tCOztJQWNsQixtREFBaUM7O0lBR2pDLGtEQUFnRDs7SUFFaEQsZ0RBQTRDOzs7OztJQUU1Qyw0Q0FBd0M7Ozs7O0lBQ3hDLG1EQUF3Qzs7Ozs7SUFNeEMsb0NBQWtDOzs7OztJQUNsQywwQ0FBd0I7Ozs7O0lBRXhCLHdDQUFlOzs7OztJQUVmLDBDQUFpQjs7SUFDakIsc0RBQTBDOzs7OztJQUU5Qix3Q0FBb0MiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxyXG4gKiBAQXV0aG9yOiDnlq/ni4Lnp4DmiY0oTHVjYXMgSHVhbmcpXHJcbiAqIEBEYXRlOiAyMDE5LTA4LTE0IDE1OjIyOjIxXHJcbiAqIEBMYXN0RWRpdG9yczog55av54uC56eA5omNKEx1Y2FzIEh1YW5nKVxyXG4gKiBATGFzdEVkaXRUaW1lOiAyMDE5LTA4LTE1IDE2OjQ0OjE1XHJcbiAqIEBRUTogMTA1NTgxODIzOVxyXG4gKiBAVmVyc2lvbjogdjAuMC4xXHJcbiAqL1xyXG5pbXBvcnQge1xyXG4gICAgQ29tcG9uZW50LFxyXG4gICAgT25Jbml0LFxyXG4gICAgSW5wdXQsXHJcbiAgICBDb250ZW50Q2hpbGQsXHJcbiAgICBIb3N0QmluZGluZyxcclxuICAgIE9uRGVzdHJveSxcclxuICAgIFZpZXdDaGlsZCxcclxuICAgIE9wdGlvbmFsLFxyXG4gICAgTmdab25lLFxyXG4gICAgSW5qZWN0b3IsXHJcbiAgICBFbGVtZW50UmVmLFxyXG4gICAgUmVuZGVyZXIyLFxyXG59IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XHJcbmltcG9ydCB7IEZhcnJpc1NlY3Rpb25UaXRsZURpcmVjdGl2ZSB9IGZyb20gXCIuL2RpcmVjdGl2ZS9zZWN0aW9uLXRpdGxlLmRpcmVjdGl2ZVwiO1xyXG5pbXBvcnQgeyBGYXJyaXNTZWN0aW9uSGVhZGVyRGlyZWN0aXZlIH0gZnJvbSBcIi4vZGlyZWN0aXZlL3NlY3Rpb24taGVhZGVyLmRpcmVjdGl2ZVwiO1xyXG5pbXBvcnQgeyBGYXJyaXNTZWN0aW9uSGNvbnRlbnREaXJlY3RpdmUgfSBmcm9tIFwiLi9kaXJlY3RpdmUvc2VjdGlvbi1oY29udGVudC5kaXJlY3RpdmVcIjtcclxuaW1wb3J0IHtcclxuICAgIEZhcnJpc1NlY3Rpb25Ub29sYmFyRGlyZWN0aXZlLFxyXG4gICAgRmFycmlzU2VjdGlvblZpZXdDaGFuZ2VEaXJlY3RpdmUsXHJcbn0gZnJvbSBcIi4vZGlyZWN0aXZlL3NlY3Rpb24tdG9vbGJhci5kaXJlY3RpdmVcIjtcclxuaW1wb3J0IHsgRmFycmlzU2VjdGlvbkV4dGVuZERpcmVjdGl2ZSB9IGZyb20gXCIuL2RpcmVjdGl2ZS9zZWN0aW9uLWV4dGVuZC5kaXJlY3RpdmVcIjtcclxuaW1wb3J0IHsgRmFycmlzU2VjdGlvbkNvbnRlbnREaXJlY3RpdmUgfSBmcm9tIFwiLi9kaXJlY3RpdmUvc2VjdGlvbi1jb250ZW50LmRpcmVjdGl2ZVwiO1xyXG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBTdWJqZWN0LCBTdWJzY3JpcHRpb24sIG9mIH0gZnJvbSBcInJ4anNcIjtcclxuaW1wb3J0IHsgVG9vbGJhckNvbmZpZywgQnV0dG9uQ29uZmlnIH0gZnJvbSBcIi4vdG9vbGJhci5jb25maWdcIjtcclxuaW1wb3J0IFJlc2l6ZU9ic2VydmVyIGZyb20gXCJyZXNpemUtb2JzZXJ2ZXItcG9seWZpbGxcIjtcclxuaW1wb3J0IHsgbWFwLCBkZWJvdW5jZVRpbWUgfSBmcm9tIFwicnhqcy9vcGVyYXRvcnNcIjtcclxuaW1wb3J0IHsgQ29tcG9uZW50VGVtcGxhdGVSZWYgfSBmcm9tIFwiQGZhcnJpcy91aS1jb21tb25cIjtcclxuQENvbXBvbmVudCh7XHJcbiAgICBzZWxlY3RvcjogXCJmYXJyaXMtc2VjdGlvblwiLFxyXG4gICAgdGVtcGxhdGVVcmw6IFwiLi9zZWN0aW9uLmNvbXBvbmVudC5odG1sXCIsXHJcbiAgICBzdHlsZVVybHM6IFtcIi4vc2VjdGlvbi5jb21wb25lbnQuY3NzXCJdLFxyXG59KVxyXG5leHBvcnQgY2xhc3MgRmFycmlzU2VjdGlvbkNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25EZXN0cm95IHtcclxuICAgIEBJbnB1dCgpIGNvbnRlbnRDbHMgPSBcIlwiO1xyXG4gICAgQEhvc3RCaW5kaW5nKFwiY2xhc3MuZi1zZWN0aW9uXCIpIGJhc2VDbHMgPSB0cnVlO1xyXG4gICAgQEhvc3RCaW5kaW5nKFwiY2xhc3MuZi1zZWN0aW9uLW1heGltaXplXCIpIG1heFN0YXR1czogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgQEhvc3RCaW5kaW5nKFwiY2xhc3MuZi1zZWN0aW9uLWZpbGxcIikgZ2V0IGZpbGxDbHMoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZmlsbDtcclxuICAgIH1cclxuICAgIEBIb3N0QmluZGluZyhcImNsYXNzLmYtc2VjdGlvbi1hY2NvcmRpb25cIilcclxuICAgIGdldCBlbmFibGVBY2NvcmRpb25DbHMoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5hYmxlQWNjb3JkaW9uID09IFwiZGVmYXVsdFwiO1xyXG4gICAgfVxyXG4gICAgQEhvc3RCaW5kaW5nKFwiY2xhc3MuZi1zdGF0ZS1jb2xsYXBzZVwiKSBnZXQgZW5hYmxlQ29sbGFwc2VDbHMoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICB0aGlzLmVuYWJsZUFjY29yZGlvbiA9PT0gXCJkZWZhdWx0XCIgfHxcclxuICAgICAgICAgICAgdGhpcy5lbmFibGVBY2NvcmRpb24gPT09IFwiY3VzdG9tXCJcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgcmV0dXJuICF0aGlzLmV4cGFuZFN0YXR1cztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIEBIb3N0QmluZGluZyhcImNsYXNzLmYtc2VjdGlvbi1jdXN0b20tYWNjb3JkaW9uXCIpXHJcbiAgICBnZXQgZW5hYmxlQ3VzdG9tQWNjb3JkaW9uQ2xzKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmVuYWJsZUFjY29yZGlvbiA9PSBcImN1c3RvbVwiO1xyXG4gICAgfVxyXG4gICAgLy8g5Li75qCH6aKYXHJcbiAgICBASW5wdXQoKSBtYWluVGl0bGU6IHN0cmluZztcclxuICAgIC8vIOWJr+agh+mimFxyXG4gICAgQElucHV0KCkgc3ViVGl0bGU6IHN0cmluZztcclxuICAgIC8vIOaYr+WQpuaYvuekumhlYWRlclxyXG4gICAgQElucHV0KCkgc2hvd0hlYWRlciA9IHRydWU7XHJcbiAgICAvLyDmmK/lkKbmlK/mjIHmnIDlpKfljJZcclxuICAgIEBJbnB1dCgpIGVuYWJsZU1heGltaXplID0gZmFsc2U7XHJcbiAgICAvKipcclxuICAgICAqIOaYr+WQpuWQr+eUqOWPjuaKmOWKn+iDvVxyXG4gICAgICog6buY6K6k5LiN5ZCv55So5Y+O5oqYLOWAvOS4uicnXHJcbiAgICAgKiDlkK/nlKjpu5jorqTlj47mipgs5YC85Li6J2RlZmF1bHQnXHJcbiAgICAgKiDlkK/nlKjoh6rlrprkuYnlj47mipgs5YC85Li6ICdjdXN0b20nXHJcbiAgICAgKiovXHJcbiAgICBASW5wdXQoKSBlbmFibGVBY2NvcmRpb24gPSBcIlwiO1xyXG4gICAgLy8gc2VjdGlvbuaYr+WQpumTuua7oVxyXG4gICAgQElucHV0KCkgZmlsbCA9IGZhbHNlO1xyXG4gICAgLy8g6buY6K6k5piv5piv5ZCm5bGV5byAXHJcbiAgICBASW5wdXQoKSBleHBhbmRTdGF0dXMgPSB0cnVlO1xyXG4gICAgLyoqXHJcbiAgICAgKiDkuovku7bkuIrkuIvmlofvvIzop6PlhrPmjInpkq7ngrnlh7vml7bmsqHmnInkuIrkuIvmlofnmoTpl67pophcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgY29udGV4dDogYW55O1xyXG4gICAgQElucHV0KCkgaW5kZXg6IGFueTtcclxuICAgIC8vIOWwseadpeaMiemSruS9jee9rlxyXG4gICAgdG9vbGJhclBvc2l0aW9uID0gXCJcIjtcclxuICAgIC8vXHJcbiAgICB0b29sYmFyQnRucyA9IFtdO1xyXG4gICAgLy8g5bel5YW35qCP5oyJ6ZKuXHJcbiAgICBwcml2YXRlIF90b29sYmFyOiBUb29sYmFyQ29uZmlnIHwgbnVsbCA9IG51bGw7XHJcbiAgICBASW5wdXQoKVxyXG4gICAgc2V0IHRvb2xiYXIodmFsdWU6IFRvb2xiYXJDb25maWcgfCBudWxsKSB7XHJcbiAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Rvb2xiYXIgPSB2YWx1ZTtcclxuICAgICAgICAgICAgLy8g6K6h566X5L2N572uXHJcbiAgICAgICAgICAgIHRoaXMudG9vbGJhclBvc2l0aW9uID0gdGhpcy5nZXRUb29sYmFyUG9zaXRpb24oKTtcclxuICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgdGhpcy50b29sYmFyQnRucyA9IFsuLi50aGlzLnRvb2xiYXIuY29udGVudHNdO1xyXG4gICAgICAgICAgICB0aGlzLmluTW9yZUJ1dHRvbkNvbnRlbnRzID0gW107XHJcbiAgICAgICAgICAgIC8vIOe7keWumuS6i+S7tlxyXG4gICAgICAgICAgICB0aGlzLmJpbmRSZXNpemVFdmVudCgpO1xyXG4gICAgICAgICAgICAvLyDosIPmlbTnlYzpnaJcclxuICAgICAgICAgICAgdGhpcy5hZnRlckJpbmRUb29sYmFyRGF0YSgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Rvb2xiYXIgPSBudWxsO1xyXG4gICAgICAgICAgICAvLyDmnInkvY3nva5cclxuICAgICAgICAgICAgdGhpcy50b29sYmFyUG9zaXRpb24gPSBcIlwiO1xyXG4gICAgICAgICAgICB0aGlzLnRvb2xiYXJCdG5zID0gW107XHJcbiAgICAgICAgICAgIHRoaXMuaW5Nb3JlQnV0dG9uQ29udGVudHMgPSBbXTtcclxuICAgICAgICAgICAgLy8g56e76Zmk57uR5a6a5LqL5Lu2XHJcbiAgICAgICAgICAgIHRoaXMudW5CaW5kUmVzaXplRXZlbnQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXQgdG9vbGJhcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdG9vbGJhcjtcclxuICAgIH1cclxuICAgIC8v5qCH6K6w5oyJ6ZKu5bel5YW35qCP5piv5ZCm6ZqQ6JePW+abtOWkml3mjInpkq5cclxuICAgIHRvb2xiYXJEcEhpZGRlbiA9IHRydWU7XHJcbiAgICBASW5wdXQoKSBjdHg7XHJcbiAgICAvLyBzZWN0aW9u5aS06YOoXHJcbiAgICBASW5wdXQoKSBoZWFkZXJDb21wb25lbnRUeXBlOiBDb21wb25lbnRUZW1wbGF0ZVJlZjtcclxuICAgICAvLyBzZWN0aW9u5aS06YOo5qCH6aKY5Yy65qih5p2/XHJcbiAgICBASW5wdXQoKSB0aXRsZUNvbXBvbmVudFR5cGU6IENvbXBvbmVudFRlbXBsYXRlUmVmO1xyXG4gICAgLy9zZWN0aW9u5aS06YOo5Y+v5omp5bGV5Yy65Z+f5qih5p2/XHJcbiAgICBASW5wdXQoKSBjb250ZW50Q29tcG9uZW50VHlwZTogQ29tcG9uZW50VGVtcGxhdGVSZWY7XHJcbiAgICAgLy9zZWN0aW9u5aS06YOo5bel5YW35qCP5Yy65Z+f5qih5p2/XHJcbiAgICBASW5wdXQoKSB0b29sYmFyQ29tcG9uZW50VHlwZTogQ29tcG9uZW50VGVtcGxhdGVSZWY7XHJcbiAgICAvL3NlY3Rpb27lj6/mianlsZXljLrln5/mqKHmnb/igJTigJTlhoXlrrnljLrkuIrpnaLnmoTmianlsZXvvIzmoIfpopjkuIvpnaJcclxuICAgIEBJbnB1dCgpIGV4dGVuZENvbXBvbmVudFR5cGU6IENvbXBvbmVudFRlbXBsYXRlUmVmO1xyXG4gICAgLy9zZWN0aW9u5aS06YOoVmlld0NoYW5nZeWMuuWfn+aooeadv1xyXG4gICAgQElucHV0KCkgdmlld2NoYWduZUNvbXBvbmVudFR5cGU6IENvbXBvbmVudFRlbXBsYXRlUmVmO1xyXG5cclxuICAgIC8vIHNlY3Rpb27lpLTpg6jmqKHmnb9cclxuICAgIEBDb250ZW50Q2hpbGQoRmFycmlzU2VjdGlvbkhlYWRlckRpcmVjdGl2ZSkgaGVhZGVyRGlyZWN0aXZlOiBhbnk7XHJcbiAgICAvLyBzZWN0aW9u5aS06YOo5qCH6aKY5Yy65qih5p2/XHJcbiAgICBAQ29udGVudENoaWxkKEZhcnJpc1NlY3Rpb25UaXRsZURpcmVjdGl2ZSkgaGVhZGVyVGl0bGVEaXJlY3RpdmU6IGFueTtcclxuICAgIC8vc2VjdGlvbuWktOmDqOWPr+aJqeWxleWMuuWfn+aooeadv1xyXG4gICAgQENvbnRlbnRDaGlsZChGYXJyaXNTZWN0aW9uSGNvbnRlbnREaXJlY3RpdmUpIGhlYWRlckNvbnRlbnREaXJlY3RpdmU6IGFueTtcclxuICAgIC8vc2VjdGlvbuWktOmDqOW3peWFt+agj+WMuuWfn+aooeadv1xyXG4gICAgQENvbnRlbnRDaGlsZChGYXJyaXNTZWN0aW9uVG9vbGJhckRpcmVjdGl2ZSkgaGVhZGVyVG9vbGJhckRpcmVjdGl2ZTogYW55O1xyXG4gICAgLy9zZWN0aW9u5Y+v5omp5bGV5Yy65Z+f5qih5p2/4oCU4oCU5YaF5a655Yy65LiK6Z2i55qE5omp5bGV77yM5qCH6aKY5LiL6Z2iXHJcbiAgICBAQ29udGVudENoaWxkKEZhcnJpc1NlY3Rpb25FeHRlbmREaXJlY3RpdmUpIGV4dGVuZERpcmVjdGl2ZTogYW55O1xyXG4gICAgLy9zZWN0aW9u5YaF5a655Yy65Z+f5qih5p2/XHJcbiAgICBAQ29udGVudENoaWxkKEZhcnJpc1NlY3Rpb25Db250ZW50RGlyZWN0aXZlKSBjb250ZW50RGlyZWN0aXZlOiBhbnk7XHJcbiAgICAvL3NlY3Rpb27lpLTpg6hWaWV3Q2hhbmdl5Yy65Z+f5qih5p2/XHJcbiAgICBAQ29udGVudENoaWxkKEZhcnJpc1NlY3Rpb25WaWV3Q2hhbmdlRGlyZWN0aXZlKSB2aWV3Q2hhbmdlRGlyZWN0aXZlOiBhbnk7XHJcblxyXG4gICAgLy8g5Y+C54WnVGFi5Lit6L+Z5qC355qE5aSE55CG5pa55byP5pyJ6Zeu6aKYLS0tLeW7tuWQjuS/ruaUuVxyXG4gICAgLy8g5piv5ZCm6KKr56aB55So55qE54q25oCBXHJcbiAgICAvLyDmjInnhafkuYvliY3nmoTpgLvovpHvvIzlpoLmnpzmsqHmnInmib7liLBrZXnvvIzlsLHor7TmmI7ooqvnpoHnlKhcclxuICAgIF9kaXNhYmxlRGF0YXM6IE9ic2VydmFibGU8QXJyYXk8eyBba2V5OiBzdHJpbmddOiBib29sZWFuIH0+PiA9XHJcbiAgICAgICAgbmV3IFN1YmplY3QoKTtcclxuICAgIEBJbnB1dCgpXHJcbiAgICBzZXQgYnRuU3RhdGVzKHZhbHVlczogT2JzZXJ2YWJsZTxBcnJheTx7IFtrZXk6IHN0cmluZ106IGJvb2xlYW4gfT4+KSB7XHJcbiAgICAgICAgaWYgKHZhbHVlcykge1xyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9kaXNhYmxlRGF0YXMgJiZcclxuICAgICAgICAgICAgICAgIHRoaXMuX2Rpc2FibGVEYXRhcy5oYXNPd25Qcm9wZXJ0eShcInVuc3Vic2NyaWJlXCIpXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZGlzYWJsZURhdGFzW1widW5zdWJzY3JpYmVcIl0oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9kaXNhYmxlRGF0YXMgPSB2YWx1ZXM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8g5oyJ54Wn5LmL5YmN55qE6YC76L6R77yM5aaC5p6c5rKh5pyJ5om+5Yiwa2V577yM5bCx6K+05piO5Y+v6KeBXHJcbiAgICBfdmlzaWJsZURhdGFzOiBPYnNlcnZhYmxlPEFycmF5PHsgW2tleTogc3RyaW5nXTogYm9vbGVhbiB9Pj4gPVxyXG4gICAgICAgIG5ldyBTdWJqZWN0KCk7XHJcbiAgICAvLyDmmK/lkKblj6/op4HnmoTnirbmgIFcclxuICAgIEBJbnB1dCgpXHJcbiAgICBzZXQgYnRuVmlzaWJsZSh2YWx1ZXM6IE9ic2VydmFibGU8QXJyYXk8eyBba2V5OiBzdHJpbmddOiBib29sZWFuIH0+Pikge1xyXG4gICAgICAgIGlmICh2YWx1ZXMpIHtcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5fdmlzaWJsZURhdGFzICYmXHJcbiAgICAgICAgICAgICAgICB0aGlzLl92aXNpYmxlRGF0YXMuaGFzT3duUHJvcGVydHkoXCJ1bnN1YnNjcmliZVwiKVxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3Zpc2libGVEYXRhc1tcInVuc3Vic2NyaWJlXCJdKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5fdmlzaWJsZURhdGFzID0gdmFsdWVzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIEBJbnB1dCgpIGNsaWNrVGhyb3R0bGVUaW1lID0gMzUwO1xyXG5cclxuICAgIC8vIOmAmui/h+aMiemSruaVsOe7hOaYvuekuuW3peWFt+agj1xyXG4gICAgQFZpZXdDaGlsZChcInRvb2xiYXJDb250YWluZXJcIikgdG9vbGJhckNvbnRhaW5lcjtcclxuICAgIC8vIOiuoeeul+W3peWFt+agj+aMiemSruWuveW6pueahOi+heWKqeWMuuWfn1xyXG4gICAgQFZpZXdDaGlsZChcImJ0blBsYWNlaG9sZGVyXCIpIGJ0blBsYWNlSG9sZGVyO1xyXG5cclxuICAgIHByaXZhdGUgY2xpY2tJdGVtcyA9IG5ldyBTdWJqZWN0PGFueT4oKTtcclxuICAgIHByaXZhdGUgY2xpY2tTdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbjtcclxuICAgIC8vIOeUqOS6juaPkOS+m+W+queOr+aViOeOh1xyXG4gICAgdHJhY2tCeUJ1dHRvbihpbmRleDogbnVtYmVyLCBidG46IGFueSk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIGJ0bi5pZDtcclxuICAgIH1cclxuICAgIC8vIOeUqOS6juiuoeeul+WTjeW6lOaXtlxyXG4gICAgcHJpdmF0ZSBybzogUmVzaXplT2JzZXJ2ZXIgPSBudWxsO1xyXG4gICAgcHJpdmF0ZSByZXNpemVFbCA9IG51bGw7XHJcbiAgICAvLyDlpITnkIblj5jljJZcclxuICAgIHByaXZhdGUgbmdab25lO1xyXG4gICAgLy9cclxuICAgIHByaXZhdGUgcmVuZGVyZXI7XHJcbiAgICBpbk1vcmVCdXR0b25Db250ZW50czogQnV0dG9uQ29uZmlnW10gPSBbXTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihAT3B0aW9uYWwoKSBwcml2YXRlIGluamVjdDogSW5qZWN0b3IpIHtcclxuICAgICAgICBpZiAodGhpcy5pbmplY3QpIHtcclxuICAgICAgICAgICAgdGhpcy5uZ1pvbmUgPSB0aGlzLmluamVjdC5nZXQoTmdab25lLCBudWxsKTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlciA9IHRoaXMuaW5qZWN0LmdldChSZW5kZXJlcjIsIG51bGwpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBuZ09uSW5pdCgpIHtcclxuICAgICAgICAvLyDmoIforrDngrnlh7vkuovku7ZcclxuICAgICAgICB0aGlzLmNsaWNrU3Vic2NyaXB0aW9uID0gdGhpcy5jbGlja0l0ZW1zXHJcbiAgICAgICAgICAgIC5waXBlKGRlYm91bmNlVGltZSh0aGlzLmNsaWNrVGhyb3R0bGVUaW1lKSlcclxuICAgICAgICAgICAgLnN1YnNjcmliZSgoYnRuSW5mbzogQnV0dG9uQ29uZmlnKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYnRuSW5mby5jbGljayAmJiB0eXBlb2YgYnRuSW5mby5jbGljayA9PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBidG5JbmZvLmNsaWNrKHsgY29udGV4dDogdGhpcy5jb250ZXh0IH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAvLyDnu5HlrprnirbmgIFcclxuICAgICAgICB0aGlzLl9kaXNhYmxlRGF0YXMuc3Vic2NyaWJlKChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIOiwg+aVtOaMiemSruWPr+eUqOeKtuaAgVxyXG4gICAgICAgICAgICB0aGlzLmNoYW5nZVN0YXRlKGRhdGEsIFwiZGlzYWJsZVwiKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLl92aXNpYmxlRGF0YXMuc3Vic2NyaWJlKChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIOiwg+aVtOaMiemSruWPr+ingeeKtuaAgVxyXG4gICAgICAgICAgICB0aGlzLmNoYW5nZVN0YXRlKGRhdGEsIFwidmlzaWJsZVwiKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog6I635Y+W5oyJ6ZKu6YWN572u5Lit77yM56aB55So44CB5Y+v6KeB55qE5bGe5oCnXHJcbiAgICAgKiBAcGFyYW0gaWRcclxuICAgICAqIEBwYXJhbSBzdGF0ZVByb3BcclxuICAgICAqL1xyXG4gICAgZ2V0U3RhdGUoYnRuSXRlbSwgc3RhdGVQcm9wKSB7XHJcbiAgICAgICAgaWYgKGJ0bkl0ZW0uaGFzT3duUHJvcGVydHkoc3RhdGVQcm9wKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gYnRuSXRlbVtzdGF0ZVByb3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDkuI3lrZjlnKjlsZ7mgKdcclxuICAgICAgICBpZiAoc3RhdGVQcm9wID09IFwidmlzaWJsZVwiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOaUueWPmOWPr+eUqOeKtuaAgVxyXG4gICAgICogQHBhcmFtIHZhbHVlc1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNoYW5nZVN0YXRlKHZhbHVlcywgc3RhdGVQcm9wKSB7XHJcbiAgICAgICAgY29uc3QgaWRBcnJheSA9IE9iamVjdC5rZXlzKHZhbHVlcyk7XHJcbiAgICAgICAgaWRBcnJheS5mb3JFYWNoKChpZCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBzdGF0ZSA9IHZhbHVlc1tpZF07XHJcbiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLl9maW5kSXRlbUJ5SUQoaWQsIHRoaXMudG9vbGJhckJ0bnMpO1xyXG4gICAgICAgICAgICBpZiAoaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgaXRlbVtzdGF0ZVByb3BdID0gc3RhdGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmluTW9yZUJ1dHRvbkNvbnRlbnRzLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZmluZElkID0gaWRBcnJheS5maW5kKChpZCkgPT4gaWQgPT0gaXRlbS5pZCk7XHJcbiAgICAgICAgICAgIGlmIChmaW5kSWQpIHtcclxuICAgICAgICAgICAgICAgIGl0ZW1bc3RhdGVQcm9wXSA9IHZhbHVlc1tmaW5kSWRdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmn6Xmib5cclxuICAgICAqIEBwYXJhbSBpZFxyXG4gICAgICogQHBhcmFtIGRhdGFzXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgX2ZpbmRJdGVtQnlJRChpZDogc3RyaW5nLCBkYXRhczogQnV0dG9uQ29uZmlnW10pIHtcclxuICAgICAgICByZXR1cm4gZGF0YXMuZmluZCgoaXRlbSkgPT4gaXRlbS5pZCA9PSBpZCk7XHJcbiAgICB9XHJcbiAgICBuZ09uRGVzdHJveSgpIHtcclxuICAgICAgICBpZiAodGhpcy5jbGlja1N1YnNjcmlwdGlvbikge1xyXG4gICAgICAgICAgICB0aGlzLmNsaWNrU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2xpY2tTdWJzY3JpcHRpb24gPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIHRoaXMuX3Zpc2libGVEYXRhcyAmJlxyXG4gICAgICAgICAgICB0aGlzLl92aXNpYmxlRGF0YXMuaGFzT3duUHJvcGVydHkoXCJ1bnN1YnNjcmliZVwiKVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICB0aGlzLl92aXNpYmxlRGF0YXNbXCJ1bnN1YnNjcmliZVwiXSgpO1xyXG4gICAgICAgICAgICB0aGlzLl92aXNpYmxlRGF0YXMgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIHRoaXMuX2Rpc2FibGVEYXRhcyAmJlxyXG4gICAgICAgICAgICB0aGlzLl9kaXNhYmxlRGF0YXMuaGFzT3duUHJvcGVydHkoXCJ1bnN1YnNjcmliZVwiKVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICB0aGlzLl9kaXNhYmxlRGF0YXNbXCJ1bnN1YnNjcmliZVwiXSgpO1xyXG4gICAgICAgICAgICB0aGlzLl9kaXNhYmxlRGF0YXMgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnVuQmluZFJlc2l6ZUV2ZW50KCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOe7keWumumZkOWItlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGJpbmRSZXNpemVFdmVudCgpIHtcclxuICAgICAgICAvLyDmoIforrDlk43lupTml7ZcclxuICAgICAgICBpZiAodGhpcy5uZ1pvbmUgJiYgdGhpcy50b29sYmFyICYmIHRoaXMudG9vbGJhci5jb250ZW50cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy50b29sYmFyQ29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucm8pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b29sYmFyQ29udGFpbmVyLm5hdGl2ZUVsZW1lbnQucGFyZW50RWxlbWVudCA9PVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXNpemVFbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOW3sue7keWumui/h1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51bkJpbmRSZXNpemVFdmVudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnJvID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucm8gPSBuZXcgUmVzaXplT2JzZXJ2ZXIoKGVsKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9jYWxjdWxhdGVUb29sYmFyRHJvcGRvd25Jc1Nob3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2NhbGN1bGF0ZUJ1dHRvbnNTaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc2l6ZUVsID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9vbGJhckNvbnRhaW5lci5uYXRpdmVFbGVtZW50LnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucm8ub2JzZXJ2ZSh0aGlzLnJlc2l6ZUVsKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LCAwKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy51bkJpbmRSZXNpemVFdmVudCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5oyJ6ZKu5pWw5o2u5Y+Y5pu05ZCO6Kem5Y+R5qOA5p+lXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgYWZ0ZXJCaW5kVG9vbGJhckRhdGEoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubmdab25lICYmIHRoaXMudG9vbGJhciAmJiB0aGlzLnRvb2xiYXIuY29udGVudHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jYWxjdWxhdGVUb29sYmFyRHJvcGRvd25Jc1Nob3coKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jYWxjdWxhdGVCdXR0b25zU2hvdygpO1xyXG4gICAgICAgICAgICAgICAgfSwgMCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5Yik5pat5LiL5ouJ5oyJ6ZKu5piv5ZCm5pi+56S6XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgX2NhbGN1bGF0ZVRvb2xiYXJEcm9wZG93bklzU2hvdygpIHtcclxuICAgICAgICBpZiAoIXRoaXMudG9vbGJhckNvbnRhaW5lciB8fCAhdGhpcy50b29sYmFyIHx8ICF0aGlzLnRvb2xiYXJQb3NpdGlvbikge1xyXG4gICAgICAgICAgICAvLyDlrrnlmajmnKrmmL7npLrvvIzmsqHmnInmlbDmja7vvIzmsqHmnInmjInpkq7kvY3nva5cclxuICAgICAgICAgICAgdGhpcy50b29sYmFyRHBIaWRkZW4gPSB0cnVlO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGJ0blBhcmVudHNDb250YWluZXIgPVxyXG4gICAgICAgICAgICB0aGlzLnRvb2xiYXJDb250YWluZXIubmF0aXZlRWxlbWVudC5wYXJlbnRFbGVtZW50O1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgdGhpcy5idG5QbGFjZUhvbGRlci5uYXRpdmVFbGVtZW50LnNjcm9sbFdpZHRoID5cclxuICAgICAgICAgICAgYnRuUGFyZW50c0NvbnRhaW5lci5vZmZzZXRXaWR0aFxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICB0aGlzLnRvb2xiYXJEcEhpZGRlbiA9IGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudG9vbGJhckRwSGlkZGVuID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOiuoeeul+aYvuekuueahOaMiemSruS4quaVsOWPiuabtOWkmuS4reaYvuekuueahOaMiemSruS4quaVsFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIF9jYWxjdWxhdGVCdXR0b25zU2hvdygpIHtcclxuICAgICAgICBpZiAoIXRoaXMudG9vbGJhckNvbnRhaW5lciB8fCAhdGhpcy50b29sYmFyIHx8ICF0aGlzLnRvb2xiYXJQb3NpdGlvbikge1xyXG4gICAgICAgICAgICAvLyDlrrnlmajmnKrmmL7npLrvvIzmsqHmnInmlbDmja7vvIzmsqHmnInmjInpkq7kvY3nva5cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy50b29sYmFyRHBIaWRkZW4pIHtcclxuICAgICAgICAgICAgdGhpcy50b29sYmFyQnRucyA9IFsuLi50aGlzLnRvb2xiYXIuY29udGVudHNdO1xyXG4gICAgICAgICAgICB0aGlzLmluTW9yZUJ1dHRvbkNvbnRlbnRzID0gW107XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHRvb2xiYXJQYXJlbnRDb250YWluZXJFbCA9XHJcbiAgICAgICAgICAgIHRoaXMudG9vbGJhckNvbnRhaW5lci5uYXRpdmVFbGVtZW50LnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgICAgbGV0IGRpdkVsID0gdGhpcy50b29sYmFyQ29udGFpbmVyLm5hdGl2ZUVsZW1lbnQ7XHJcbiAgICAgICAgbGV0IGJ0blBsYWNlSG9sZGVyRWwgPSB0aGlzLmJ0blBsYWNlSG9sZGVyLm5hdGl2ZUVsZW1lbnQ7XHJcbiAgICAgICAgbGV0IGJ0blBsYWNlSG9sZGVyQnRucyA9IGJ0blBsYWNlSG9sZGVyRWwucXVlcnlTZWxlY3RvckFsbChcImJ1dHRvblwiKTtcclxuXHJcbiAgICAgICAgLy8g5pu05aSa5oyJ6ZKuXHJcbiAgICAgICAgY29uc3QgbW9yZUJ1dHRvbiA9IHRvb2xiYXJQYXJlbnRDb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKFwiLm1vcmVidG5cIik7XHJcbiAgICAgICAgLy8g6K6h566X5oyJ6ZKu55qE5a695bqmXHJcbiAgICAgICAgbGV0IGJhc2ljU3RhcnQgPSBwYXJzZUludChcclxuICAgICAgICAgICAgYnRuUGxhY2VIb2xkZXJFbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0XHJcbiAgICAgICAgKTtcclxuICAgICAgICBsZXQgYmFzaWNXaWR0aCA9XHJcbiAgICAgICAgICAgIHRvb2xiYXJQYXJlbnRDb250YWluZXJFbC5vZmZzZXRXaWR0aCAtIG1vcmVCdXR0b24ub2Zmc2V0V2lkdGggLSAxMjtcclxuICAgICAgICBsZXQgdG9vbGJhckRyb3Bkb3duSGlkZGVuID0gdHJ1ZTtcclxuICAgICAgICBsZXQgayA9IDA7XHJcbiAgICAgICAgLy8g5Y+q5pyJ5LiA5Liq5oyJ6ZKuXHJcbiAgICAgICAgaWYgKGJ0blBsYWNlSG9sZGVyQnRucy5sZW5ndGggPT0gMSkge1xyXG4gICAgICAgICAgICBpZiAoYnRuUGxhY2VIb2xkZXJFbC5vZmZzZXRXaWR0aCA+IGJhc2ljV2lkdGgpIHtcclxuICAgICAgICAgICAgICAgIHRvb2xiYXJEcm9wZG93bkhpZGRlbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgayA9IDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBmb3IgKGsgPSAxOyBrIDw9IGJ0blBsYWNlSG9sZGVyQnRucy5sZW5ndGggLSAxOyBrKyspIHtcclxuICAgICAgICAgICAgICAgIC8vIOWmguaenOWGheWuuei2heWHuizogIPomZHliLDmjInpkq7kuYvpl7TnmoTpl7Tot51cclxuICAgICAgICAgICAgICAgIGlmIChrID09IGJ0blBsYWNlSG9sZGVyQnRucy5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJ0blBsYWNlSG9sZGVyRWwub2Zmc2V0V2lkdGggPiBiYXNpY1dpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xiYXJEcm9wZG93bkhpZGRlbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBrID0gayAtIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ0blBsYWNlSG9sZGVyQnRuc1trXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0XHJcbiAgICAgICAgICAgICAgICAgICAgKSAtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2ljU3RhcnQgPlxyXG4gICAgICAgICAgICAgICAgICAgIGJhc2ljV2lkdGhcclxuICAgICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvb2xiYXJEcm9wZG93bkhpZGRlbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGsgPSBrIC0gMTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy50b29sYmFyRHBIaWRkZW4gPSB0b29sYmFyRHJvcGRvd25IaWRkZW47XHJcbiAgICAgICAgbGV0IHNob3dCdG5zID0gZGl2RWwucXVlcnlTZWxlY3RvckFsbChcImJ1dHRvblwiKTtcclxuICAgICAgICBsZXQgcmVzdWx0QnRucyA9IHRoaXMudG9vbGJhci5jb250ZW50cy5maWx0ZXIoKGl0ZW0sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBpbmRleCA8IGs7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy50b29sYmFyQnRucyA9IHJlc3VsdEJ0bnMgPyBbLi4ucmVzdWx0QnRuc10gOiBbXTtcclxuICAgICAgICAvLyBmb3IgKGxldCBtID0gazsgbSA8IHNob3dCdG5zLmxlbmd0aDsgbSsrKSB7XHJcbiAgICAgICAgLy8gICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUoc2hvd0J0bnNbbV0sICdkaXNwbGF5JywgJ25vbmUnKTtcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgaWYgKHRoaXMudG9vbGJhci5jb250ZW50cyAmJiB0aGlzLnRvb2xiYXIuY29udGVudHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5Nb3JlQnV0dG9uQ29udGVudHMgPSB0aGlzLnRvb2xiYXIuY29udGVudHMuZmlsdGVyKFxyXG4gICAgICAgICAgICAgICAgKGl0ZW0sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGluZGV4ID49IGs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlnKjmjInpkq7nirbmgIHlj5jljJbml7bop6PpmaTpmZDliLZcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSB1bkJpbmRSZXNpemVFdmVudCgpIHtcclxuICAgICAgICBpZiAodGhpcy5ybykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5yZXNpemVFbCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yby51bm9ic2VydmUodGhpcy5yZXNpemVFbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5ybyA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJuIHN0cmluZ1xyXG4gICAgICogJycg5LiN5a2Y5Zyo5oyJ6ZKu77yM5peg5omA6LCT5L2N572uXHJcbiAgICAgKiAnaW5IZWFkJyDmjInpkq7lnKjlpLTpg6hcclxuICAgICAqICdpbkNvbnRlbnQnIOaMiemSruWcqOWGheWuueS9jee9rlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGdldFRvb2xiYXJQb3NpdGlvbigpIHtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIHRoaXMudG9vbGJhciAmJlxyXG4gICAgICAgICAgICB0aGlzLnRvb2xiYXIuaGFzT3duUHJvcGVydHkoXCJwb3NpdGlvblwiKSAmJlxyXG4gICAgICAgICAgICB0aGlzLnRvb2xiYXIuaGFzT3duUHJvcGVydHkoXCJjb250ZW50c1wiKSAmJlxyXG4gICAgICAgICAgICB0aGlzLnRvb2xiYXIuY29udGVudHMubGVuZ3RoID4gMFxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICAvLyDlpoLmnpzmnInlsZ7mgKfvvIzkuJTmjInpkq7mnInlgLxcclxuICAgICAgICAgICAgaWYgKHRoaXMudG9vbGJhci5wb3NpdGlvbiA9PT0gXCJpbkhlYWRcIikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiaW5IZWFkXCI7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJpbkNvbnRlbnRcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gXCJcIjtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5Yik5pat5piv5ZCm5pi+56S644CB6ZqQ6JePXHJcbiAgICAgKiBAcGFyYW0gaWRcclxuICAgICAqIEBwYXJhbSBzdGF0ZVxyXG4gICAgICovXHJcbiAgICBnZXRUb29sYmFyU3RhdGUoXHJcbiAgICAgICAgaWQ6IHN0cmluZyxcclxuICAgICAgICBzdGF0ZTogT2JzZXJ2YWJsZTxhbnk+ID0gdGhpcy5idG5TdGF0ZXMsXHJcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBib29sZWFuID0gZmFsc2VcclxuICAgICkge1xyXG4gICAgICAgIGlmIChzdGF0ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gc3RhdGUucGlwZShcclxuICAgICAgICAgICAgICAgIG1hcCgobjogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5baWRdID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS53YXJuKGDmnKrmib5JROS4uu+8miR7aWR9IOebuOWFs+eKtuaAgeiuvue9ru+8gWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVmYXVsdFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbltpZF07XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBvZihkZWZhdWx0VmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNsaWNrSGFuZGxlcihidG5JbmZvKSB7XHJcbiAgICAgICAgaWYgKCFidG5JbmZvKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jbGlja0l0ZW1zLm5leHQoYnRuSW5mbyk7XHJcbiAgICB9XHJcbn1cclxuIl19