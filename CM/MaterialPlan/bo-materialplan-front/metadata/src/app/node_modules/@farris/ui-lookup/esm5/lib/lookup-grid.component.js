/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
/*
 * @Author: 疯狂秀才(lucas huang)
 * @Date: 2018-11-23 11:23:12
 * @LastEditors: 疯狂秀才(Lucas Huang)
 * @LastEditTime: 2020-10-20 20:18:26
 * @Company: Inspur
 * @Version: v0.3.x
 */
import { Component, Input, ViewChild, EventEmitter, Injector, ComponentFactoryResolver, Output, ChangeDetectorRef, ViewEncapsulation, ViewContainerRef, forwardRef, ElementRef, NgZone, Renderer2, } from "@angular/core";
import { NG_VALUE_ACCESSOR } from "@angular/forms";
import { of, Subject } from "rxjs";
import { LocaleService } from "@farris/ui-locale";
import { MessagerService } from "@farris/ui-messager";
import { LoadingService } from "@farris/ui-loading";
import { DataTableComponent } from "@farris/ui-datatable";
import { TreeTableComponent } from "@farris/ui-treetable";
import { LayoutPanelComponent } from "@farris/ui-layout";
import { CommonUtils, DebugService, FarrisComponentInstanceService, OverLayHiddenService } from "@farris/ui-common";
import { ShortcutsService } from "@farris/ui-shortcuts";
import { InputGroupComponent } from "@farris/ui-input-group";
import { NotifyService } from "@farris/ui-notify";
import { FAVORITE_FIELD_NAME, INPUT_GROUP_ICON, LookupGridDisplayType, QuickSelectDefaultOptions, } from "./lookup-displaytype";
import { LookupComponent } from "./lookup.component";
import { lookupGridDefaults, displayInfoDefault, LookupLayout, } from "./lookup-grid-options";
import { ServerSideToken } from "./http/ILookupHttpService";
import { LookupDefaultMapping } from "./lookup-defaut-mapping";
import { LookupUtils } from "./utils";
import { PersonalConfigService } from "./lookup-presonalConfig.service";
import { UtilService, TreeNodeHelper, FavoriteHelper, SelectionManager, DataTableEventManager, TreeTableEventManager, MultiSelectionManager, LookupHttpManager, LookupComponentManager, LookupDialogManager, onTextChanged, LookupSelectionService, } from "./services";
import { map } from "rxjs/operators";
import { EventManager } from "@angular/platform-browser";
import { cloneDeep } from "lodash-es";
/** @type {?} */
export var LOOKUPGRID_VALUE_ACCESSOR = {
    provide: NG_VALUE_ACCESSOR,
    useExisting: forwardRef((/**
     * @return {?}
     */
    function () { return LookupGridComponent; })),
    multi: true,
};
var LookupGridComponent = /** @class */ (function (_super) {
    tslib_1.__extends(LookupGridComponent, _super);
    function LookupGridComponent(injector, cfr, el, utils, defaultMapping, changeDetector, shortcuts, lookupUtils, zone, render2) {
        var _this = _super.call(this, injector, el, changeDetector) || this;
        _this.injector = injector;
        _this.cfr = cfr;
        _this.el = el;
        _this.utils = utils;
        _this.defaultMapping = defaultMapping;
        _this.changeDetector = changeDetector;
        _this.shortcuts = shortcuts;
        _this.lookupUtils = lookupUtils;
        _this.zone = zone;
        _this.render2 = render2;
        _this.groupIcon = INPUT_GROUP_ICON;
        _this._displayType = "";
        /**
         * 使用表单设计器中的显示类型。否则使用元数据设置的显示类型。 默认：false
         */
        _this.customDisplayType = false;
        _this.viewType = "text";
        /**
         * 启用清空按钮
         */
        _this.enableClear = true;
        /**
         * 服务器端排序
         */
        _this.remoteSort = true;
        /**
         * 树表显示全选复选框。 默认不显示
         */
        _this.showCheckAll = false;
        /**
         * 是否启用多选
         */
        _this.singleSelect = true;
        /**
         * 多选分隔符
         */
        _this.multipleChoiceSeparator = ",";
        /**
         * 可以为元数据ID、webapiURL
         */
        _this.uri = '';
        /**
         * BE REST RUI
         * - 此处设置后 uri 失效
         */
        _this.beUri = "";
        /**
         * 显示过滤工具条
         */
        _this.showFilterBar = true;
        /**
         * 是否启用分页
         */
        _this.pagination = true;
        /**
         * 当前页索引，从 0开始
         */
        _this.pageIndex = 1;
        /**
         * 每页记录数
         */
        _this.pageSize = 20;
        /**
         * 可用分页记录数列表
         */
        _this.pageList = [10, 20, 30, 50, 100];
        /**
         * 总记录数
         */
        _this.total = 0;
        /** 可拖动列 */
        // @Input() resizableColumns = true;
        /**
         * 显示列信息, 默认为 []
         */
        _this.columns = [];
        /**
         * 帮助查询是否为远端查询
         */
        _this.remoteSearch = true;
        /**
         * 文本变化后，进行服务器端查询
         */
        _this.searchOnServer = true;
        /**
         * 不进行服务器查询，有啥算啥
         */
        _this.nosearch = false;
        /**
         * 启用任意输入后，值通过输入时触发
         */
        _this.clearMappings = new EventEmitter();
        // 收藏列表
        _this.favoriteItems = [];
        /**
         * 是否启用级联选择控制选项
         */
        _this.enableCascade = false;
        /**
         * 级联控制默认值： enable: 同步选择, up：包含上级, down：包含下级, disable：仅选择自身
         */
        _this.cascadeStatus = "enable";
        /**
         * 分别级联选项的启用状态，默认全部启用
         */
        _this.cascadeItems = {
            enable: true,
            up: true,
            down: true,
            disable: true
        };
        /**
         * 显示级联控制
         */
        _this.showCascadeControl = true;
        _this.placeholder = "";
        /**
         * 显示已选记录列表。 默认为 false 不显示
         */
        _this.showSelected = false;
        /**
         * 应用收藏夹
         */
        _this.useFavorite = false;
        /**
         * 收藏数据来自于： locale: 本地存储， remote: 服务器端存储
         */
        _this.favoriteDataFrom = "remote";
        /**
         * 使用提示,快捷选择
         */
        _this.useTip = false;
        /**
         * 记录窗口大小
         */
        _this.isRecordSize = false;
        /**
         * 是否启用选中value值对应的行数据，默认 true
         */
        _this.enableToSelect = true;
        _this.enableFindText = false;
        /**
         * -1: 不展开； 0: 全部展开；>0: 展开到指定级数
         */
        _this.expandLevel = -1;
        _this.navTreeTableOptions = {};
        _this.treeTableOptions = {};
        _this.dataTableOptions = {};
        _this.defaultTreeTableOptions = {
            maxLevel: 9,
            enableContextMenu: false,
            contextMenuItems: [],
        };
        /**
         * 树形帮助数据加载方式： default: 内置取数； loadall: 加载所有 layerload：分层加载
         */
        _this.loadTreeDataType = "default";
        /**
         * 窗口打开后立即加载数据，默认为 true
         */
        _this.loadDataWhenOpen = true;
        /**
         * 导航列表，树列表在帮助打开后选中的数据;
         * 设置后，`selectFirstInNav` 失效！
         */
        _this.navSelectedIds = "";
        /**
         * 导航帮助，选中第1条数据，默认为 false;
         * 注意：当`navSelectedIds`不为空时，此属性失效。
         */
        _this.selectFirstInNav = false;
        /**
         * 启用构造完整树过滤
         */
        _this.enableFullTree = true;
        /**
         * 显示文本自定义函数
         */
        _this.displayFormatter = undefined;
        /**
         * 显示文本字段集合，以 英文 逗号隔开
         */
        _this.displayFields = "";
        _this.displayTextSeparator = "_";
        /**
         * 帮助元数据ID，不为空时调用指定的URI
         * /api/runtime/bcc/v1.0/help/data/{helpId}
         */
        _this.helpId = "";
        /**
         * 文本对齐方式； left | center | right; 默认 left
         */
        _this.textAlign = "left";
        /**
         * 鼠标滑过输入框时显示输入框内的文本信息
         */
        _this.enableTitle = true;
        _this.useExtendInfo = false;
        _this.extInfoFields = "";
        _this.extendInfo = "";
        /**
         * IDE 设计器自定义格式化 2103
         */
        _this.customFormatter = null;
        _this.customNavFormatter = null;
        /**
         * 自定义确定事件
         */
        _this.okHandler = null;
        /**
         * 自定义取消事件
         */
        _this.cancelHandler = null;
        _this.tagboxHeight = "auto";
        /**
         * 启用获取所有子级数据的功能
         */
        _this.enableGetAllChildNodes = true;
        _this.shortcutKey = {
            /**
             * 打开帮助窗口
             */
            open: "ArrowRight",
            /**
             * 确认选择数据
             */
            confirm: "Enter",
            /**
             * 搜索框焦点
             */
            searchFocus: "F3",
            /**
             * 选中上一条
             */
            moveUp: "ArrowUp",
            /**
             * 选中下一条
             */
            moveDown: "ArrowDown",
            /**
             * 展开节点
             */
            expand: "ArrowRight",
            /**
             * 折叠节点
             */
            collapse: "ArrowLeft",
            /**
             * 下一页
             */
            nextPager: "PageDown",
            /**
             * 上一页
             */
            prevPager: "PageUp",
        };
        /**
         * 快捷选择相关配置项，默认为 null, 即不启用此功能
         */
        _this.quickSelect = null;
        /**
         * 树形帮助 是否使用树形结构数据。默认为 true, 当为 false 时，服务器端无须构造树形结构，按普通列表输出
         */
        _this.treeToList = false;
        _this.navTreeToList = false;
        /**
         * 带导航的帮助中，是否显示左侧导航部分。默认 true
         */
        _this.showNavigation = true;
        _this.layoutFormat = LookupLayout.default;
        _this.selectedData = new EventEmitter();
        _this.clear = new EventEmitter();
        _this.search = new EventEmitter();
        // 帮助文本框中值变化事件
        _this.valueChanged = new EventEmitter();
        _this.loadSuccess = new EventEmitter();
        _this.pagerChanged = new EventEmitter();
        _this.expandTreeNode = new EventEmitter();
        _this.textChanged = new EventEmitter();
        _this.checkedChange = new EventEmitter();
        _this.tagRemoved = new EventEmitter();
        /**
         * 内容中留白边距
         */
        _this.containerMargin = { top: 0, bottom: 5, left: 14, right: 14 };
        _this.containerStyle = {};
        _this._gridOptions = lookupGridDefaults;
        // 导航帮助左则宽度
        _this.leftPanelWidth = 320;
        // 导航帮助窗口最小宽度
        _this.navLookupDialogMinWidth = 960;
        _this.navigationFilter = null;
        _this.subscriptions = [];
        _this.isTextChange = false;
        _this.isTabChanged = false;
        _this.displayInfo = Object.assign({}, displayInfoDefault);
        _this.tabChangeSubscription = null;
        // 暂存行点击数据  用于收藏
        _this.personalConf = {};
        _this.favoriteColumns = [];
        /**
         * 临时查询参数
         */
        _this._searchState = null;
        _this.allData = [];
        _this.allColumnsTitle = "所有列";
        _this.mustWriteSomething = "请输入关键字后查询。";
        _this.mustChoosAdatarow = "请选择一条记录！";
        _this.addFavoriteSuccess = "收藏成功。";
        _this.delFavoriteSuccess = "移除收藏成功。";
        /**
         * 使用内置的查询方法, 默认 false
         */
        _this.useInsideSearchHandler = false;
        _this.searching = false;
        /**
         * 临时存储查询结果集
         */
        _this._searchResult = null;
        _this.lookupinitializationSubject = new Subject();
        /**
         * 多选时，选中的数据
         */
        _this.currentSelectedItems = of([]);
        /**
         * 已选数据列信息
         */
        _this.selectedColumns = [];
        _this.activeTab = "datalist";
        _this.favHelper = null;
        _this.ttEventMgr = null;
        _this.multiSelMgr = null;
        _this.httpMgr = null;
        _this.lookupCmpMgr = null;
        _this.dialogMgr = null;
        _this.selectionMgr = null;
        _this.dtEventMgr = null;
        _this.lookupSelectionSer = null;
        _this.controlId = "";
        _this.savingFaoriteData = false;
        _this.isReady = false;
        _this.showTagboxClearButton = false;
        _this.hasError = false;
        _this.isGetAllChidlNodes = false;
        /**
         * 选中记录ID，自定义帮助取数时使用
         */
        _this.selectedIds = [];
        _this.lookupSearchInputEvent = null;
        _this.farrisInstances = null;
        /**
         * 用户初始设置
         */
        _this._userSettings = {};
        _this._treeInfo_ = null;
        /**
         * dialog 内容区域高度。 弹窗总高度 - 头部高度 - 脚部高度 - （启用收藏 TAB头高度）
         */
        _this.dialogContentHeight = 0;
        /**
         * 左树右列表， 左树点击节点查询时是否包括下级节点的数据，默认 false
         */
        _this.includeSubordinates = false;
        _this.includeSubordinates$ = new Subject();
        _this.includeSubordinates$$ = null;
        _this.debugSer = null;
        _this.createInstance();
        _this.currentSelectedItems = _this.lookupSelectionSer.selected$;
        _this.eventManager = _this.injector.get(EventManager);
        _this.farrisInstances = _this.injector.get(FarrisComponentInstanceService, null);
        _this.overLayService = new OverLayHiddenService();
        _this.debugSer = _this.injector.get(DebugService, null);
        if (_this.debugSer) {
            _this.debugSer.useDebugMode();
        }
        return _this;
    }
    Object.defineProperty(LookupGridComponent.prototype, "displayType", {
        get: /**
         * @return {?}
         */
        function () {
            return this._displayType;
        },
        set: /**
         * @param {?} val
         * @return {?}
         */
        function (val) {
            if (val) {
                /** @type {?} */
                var types = Object.values(LookupGridDisplayType);
                /** @type {?} */
                var i = types.findIndex((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) { return n === val.toUpperCase(); }));
                if (i > -1) {
                    /** @type {?} */
                    var keys = Object.keys(LookupGridDisplayType);
                    this._displayType = LookupGridDisplayType[keys[i]];
                }
            }
            else {
                this._displayType = val;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LookupGridComponent.prototype, "gridOptions", {
        get: /**
         * @return {?}
         */
        function () {
            if (this.useFavorite &&
                this.columns &&
                this.columns.length > 0 &&
                !this.columns.find((/**
                 * @param {?} item
                 * @return {?}
                 */
                function (item) { return item.field === FAVORITE_FIELD_NAME; }))) {
                this.columns.push({
                    field: FAVORITE_FIELD_NAME,
                    title: "",
                    width: 40,
                    align: "center",
                    fixed: 'right',
                    // fixedWidth: true,
                    formatter: this.favHelper.favoriteColumnFormatter,
                });
            }
            this._gridOptions = Object.assign(this._gridOptions, {
                singleSelect: this.singleSelect,
                idField: this.idField,
                uri: this.uri,
                showFilterBar: this.showFilterBar,
                pagination: this.pagination,
                pageIndex: this.pageIndex,
                pageSize: this.pageSize,
                pageList: this.pageList,
                total: this.total,
                items: this.items,
                columns: this.columns,
                resizableColumns: true,
                fixedHeader: true,
                hover: true,
                treeInfo: this.treeInfo,
            });
            return this._gridOptions;
        },
        set: /**
         * @param {?} opts
         * @return {?}
         */
        function (opts) {
            this._gridOptions = Object.assign({}, this._gridOptions, opts);
            this.selectedColumns = this.multiSelMgr.initSelectedColumns();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LookupGridComponent.prototype, "selections", {
        get: /**
         * @return {?}
         */
        function () {
            /** @type {?} */
            var selectItems = this.lookupSelectionSer.getSelections();
            if (this.singleSelect) {
                return selectItems[0];
            }
            else {
                return selectItems;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LookupGridComponent.prototype, "usePersionalConf", {
        get: /**
         * @return {?}
         */
        function () {
            return this.useFavorite || this.useTip || this.isRecordSize;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LookupGridComponent.prototype, "displayTextList", {
        get: /**
         * @return {?}
         */
        function () {
            if (this.displayText) {
                return this.displayText.split(this.multipleChoiceSeparator);
            }
            return [];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LookupGridComponent.prototype, "userInitialConfig", {
        get: /**
         * @return {?}
         */
        function () {
            return this._userSettings;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} msg
     * @param {?=} type
     * @return {?}
     */
    LookupGridComponent.prototype.writeConsole = /**
     * @param {?} msg
     * @param {?=} type
     * @return {?}
     */
    function (msg, type) {
        if (type === void 0) { type = 'warn'; }
        if (this.debugSer) {
            this.debugSer[type](msg);
        }
    };
    /**
     * @private
     * @return {?}
     */
    LookupGridComponent.prototype.cacheUserConfig = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        this._userSettings._title = this.title;
        this.displayInfo.title = this.title;
        this._userSettings._columns = this.deepClone(this.columns || []);
        this._userSettings.getColumns = (/**
         * @return {?}
         */
        function () {
            return _this._userSettings._columns;
        });
        this._userSettings.reset = (/**
         * @return {?}
         */
        function () {
            _this.title = _this._userSettings._title;
            _this.displayInfo.title = _this.title;
            _this.columns = _this._userSettings.getColumns();
        });
    };
    /**
     * @private
     * @param {?} obj
     * @return {?}
     */
    LookupGridComponent.prototype.deepClone = /**
     * @private
     * @param {?} obj
     * @return {?}
     */
    function (obj) {
        var _this = this;
        if (obj === null) {
            return null;
        }
        /** @type {?} */
        var clone = Object.assign({}, obj);
        Object.keys(clone).forEach((/**
         * @param {?} key
         * @return {?}
         */
        function (key) {
            return (clone[key] =
                typeof obj[key] === "object"
                    ? _this.deepClone(obj[key])
                    : obj[key]);
        }));
        if (Array.isArray(obj)) {
            clone.length = obj.length;
            return Array.from(clone);
        }
        return clone;
    };
    /**
     * @return {?}
     */
    LookupGridComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        _super.prototype.ngOnInit.call(this);
        this.cacheUserConfig();
        if (!this.loadTreeDataType) {
            this.loadTreeDataType = "default";
        }
        this.checkGridOptions();
        this.displayInfo.title = this.title;
        /** 传递上下文 */
        if (this.http) {
            this.http.context = this.context;
        }
        this.allColumnsTitle = this.localService.getValue("lookup.allColumns");
        this.mustWriteSomething = this.localService.getValue("lookup.mustWriteSomething");
        this.mustChoosAdatarow = this.localService.getValue("lookup.mustChoosAdatarow");
        this.addFavoriteSuccess =
            this.localService.getValue("lookup.favoriteInfo.addFav") ||
                this.addFavoriteSuccess;
        this.delFavoriteSuccess =
            this.localService.getValue("lookup.favoriteInfo.cancelFav") ||
                this.delFavoriteSuccess;
        this.dialogMgr.onDialogCreated();
        this._treeInfo_ = this.treeInfo ? cloneDeep(this.treeInfo) : null;
        if (this.quickSelect) {
            this.quickSelect = Object.assign({}, QuickSelectDefaultOptions, this.quickSelect || {});
        }
        /** 内容中留白边距 */
        this.setContainerMargin();
    };
    /**
     * @private
     * @return {?}
     */
    LookupGridComponent.prototype.setContainerMargin = /**
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var mrn = this.layoutFormat === 'default' ? 14 : 24;
        this.containerMargin = { top: 0, bottom: 5, left: mrn, right: mrn };
        this.containerStyle = {
            marginLeft: this.containerMargin.left + "px",
            marginRight: this.containerMargin.right + "px",
            marginTop: this.containerMargin.top + "px",
            marginBottom: this.containerMargin.bottom + "px",
        };
    };
    /**
     * @return {?}
     */
    LookupGridComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        _super.prototype.ngOnDestroy.call(this);
        this.subscriptions.forEach((/**
         * @param {?} n
         * @return {?}
         */
        function (n) {
            if (n) {
                n.unsubscribe();
                n = null;
            }
        }));
        if (this.selectionMgr) {
            this.selectionMgr.destroy();
        }
        this.subscriptions = [];
        if (this.farrisInstances) {
            this.farrisInstances.destroy(this.el.nativeElement);
        }
        if (this.lookupSearchInputEvent) {
            this.lookupSearchInputEvent();
        }
        this.lookupUtils.destroy();
        this.overLayService.destory(this.el.nativeElement);
        this.overLayService = null;
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    LookupGridComponent.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        if (changes.columns && !changes.columns.isFirstChange()) {
            this.cacheUserConfig();
        }
        if (changes.layoutFormat && !changes.layoutFormat.isFirstChange()) {
            this.setContainerMargin();
        }
    };
    /**
     * @return {?}
     */
    LookupGridComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        if (!this.quickSelect || !this.quickSelect.enable) {
            this.lookupSearchInputEvent = onTextChanged.bind(this)();
        }
        // 初始化个性化配置
        if (this.usePersionalConf) {
            this.favHelper.initPersonalInfo();
        }
        if (this.useExtendInfo) {
            /** @type {?} */
            var jsonData = this.selectionMgr.getBindingData();
            this.updateExtendInfo(jsonData, false);
        }
        if (this.viewType === "text") {
            // this.shortcuts.add({
            //     key: 'F2',
            //     target: this.inputGroup.textbox.nativeElement,
            //     command: () => {
            //         this.showDialog();
            //     }
            // });
            this.render2.listen(this.inputGroup.textbox.nativeElement, "keydown.F2", this.showDialog.bind(this));
        }
        else {
            this.registerMouseEventForTagView();
            if (this.tagboxHeight) {
                /** @type {?} */
                var el = this.tagbox.nativeElement.querySelector(".multi-more");
                /** @type {?} */
                var tbh = this.tagboxHeight;
                if (tbh !== "auto") {
                    tbh += "px";
                    if (this.maxTagboxHeight) {
                        this.render2.setStyle(el, "maxHeight", this.maxTagboxHeight + "px");
                    }
                }
                this.render2.setStyle(el, "height", tbh);
            }
        }
        if (this.el && this.farrisInstances) {
            this.farrisInstances.add(this.el.nativeElement, this);
        }
    };
    /**
     * @private
     * @return {?}
     */
    LookupGridComponent.prototype.createInstance = /**
     * @private
     * @return {?}
     */
    function () {
        this.http = this.injector.get(ServerSideToken, null);
        this.messagerService = this.injector.get(MessagerService);
        this.loadingService = this.injector.get(LoadingService);
        this.notifyService = this.injector.get(NotifyService, null);
        this.personalConfigService = this.injector.get(PersonalConfigService, null);
        this.lookupSelectionSer = new LookupSelectionService(this);
        this.utilService = new UtilService(this);
        this.localService = this.injector.get(LocaleService);
        this.treeNodeHelper = new TreeNodeHelper(this);
        this.favHelper = new FavoriteHelper(this);
        this.ttEventMgr = new TreeTableEventManager(this);
        this.multiSelMgr = new MultiSelectionManager(this);
        this.httpMgr = new LookupHttpManager(this);
        this.lookupCmpMgr = new LookupComponentManager(this);
        this.dialogMgr = new LookupDialogManager(this);
        this.selectionMgr = new SelectionManager(this);
        this.dtEventMgr = new DataTableEventManager(this);
    };
    /**
     * @return {?}
     */
    LookupGridComponent.prototype.showDialog = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.disabled || this.readonly) {
            return false;
        }
        this.selectionMgr.initDisplayValue();
        this.dictPickingSubscription = this.dictPicking({
            instance: this,
        }).subscribe((/**
         * @param {?} pr
         * @return {?}
         */
        function (pr) {
            _this.dialogMgr.canOpenDialog(pr);
        }));
        return false;
    };
    /** 判断是否为双列表帮助 */
    /**
     * 判断是否为双列表帮助
     * @return {?}
     */
    LookupGridComponent.prototype.isDoublleList = /**
     * 判断是否为双列表帮助
     * @return {?}
     */
    function () {
        return ((this.displayType === LookupGridDisplayType.NavList ||
            this.displayType === LookupGridDisplayType.NavTreeList ||
            this.displayType === LookupGridDisplayType.NavListTree) && this.showNavigation);
    };
    /** 判断是否显示为树帮助 */
    /**
     * 判断是否显示为树帮助
     * @return {?}
     */
    LookupGridComponent.prototype.isTree = /**
     * 判断是否显示为树帮助
     * @return {?}
     */
    function () {
        /** @type {?} */
        var dtyp = this.displayType.toUpperCase();
        return (dtyp === LookupGridDisplayType.TreeList || dtyp === LookupGridDisplayType.NavListTree);
    };
    /**
     * @param {?} e
     * @return {?}
     */
    LookupGridComponent.prototype.onResized = /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        this.resizeCmp(e.size);
        this.resized.emit(e.size);
    };
    /**
     * @param {?} pos
     * @return {?}
     */
    LookupGridComponent.prototype.onResizing = /**
     * @param {?} pos
     * @return {?}
     */
    function (pos) {
        this.resizing.emit(pos.size);
        this.resizeCmp(pos.size);
        if (this.isDoublleList() && this.leftComponentRef) {
            this.leftComponentRef.instance.resize({
                width: this.leftPanel.width,
                height: this.dialogMgr.getHeight(),
            });
        }
    };
    /**
     * @param {?} pos
     * @return {?}
     */
    LookupGridComponent.prototype.onMaxDialog = /**
     * @param {?} pos
     * @return {?}
     */
    function (pos) {
        this.resizeCmp(pos.size);
        if (this.leftPanel) {
            this.leftComponentRef.instance.resize({
                width: this.leftPanel.width,
                height: this.dialogMgr.getHeight(),
            });
        }
        // tfs 543132 
        // this.dialogHeight = pos.size.height;
        this.dialogContentHeight = this.dialogMgr.resetDialogContentHeight();
        this.dialogMaxed.emit(pos.size);
    };
    /**
     * @param {?=} size
     * @return {?}
     */
    LookupGridComponent.prototype.resizeCmp = /**
     * @param {?=} size
     * @return {?}
     */
    function (size) {
        if (!this.componentRef || !this.componentRef.instance) {
            return;
        }
        if (!size) {
            size = this.dialog.size;
        }
        /** @type {?} */
        var _size = {
            width: size.width -
                this.containerMargin.left -
                this.containerMargin.right,
            height: this.dialogMgr.getHeight(),
        };
        if (this.useFavorite && this.favoritesComponentRef) {
            this.favoritesComponentRef.instance.resize(_size);
        }
        if (this.isRecordSize) {
            this.personalConf.size = this.dialog.size;
            this.personalConfigService.updatePersonalConfig({
                size: this.dialog.size,
            });
        }
        if (this.isDoublleList()) {
            _size.width = size.width - this.leftPanel.width - (this.layoutFormat === 'default' ? 20 : 48) - 7;
            ;
        }
        this.componentRef.instance.resize(_size);
    };
    /**
     * @private
     * @return {?}
     */
    LookupGridComponent.prototype.checkGridOptions = /**
     * @private
     * @return {?}
     */
    function () {
        if (!this.gridOptions.idField) {
            this.writeConsole("未设置主键字段 idField");
        }
        if (!this.beforeSelectData) {
            this.beforeSelectData = (/**
             * @return {?}
             */
            function () {
                return of(true);
            });
        }
        /** @type {?} */
        var ctxMenuLanguages = this.localService.getValue("lookup.contextMenu");
        this.treeTableOptions = Object.assign({ language: ctxMenuLanguages }, this.defaultTreeTableOptions, this.treeTableOptions || {});
        // this.dataTableOptions = Object.assign({}, this.defaultTreeTableOptions, this.dataTableOptions);
        // this.navTreeTableOptions = Object.assign({}, this.defaultTreeTableOptions, this.navTreeTableOptions);
    };
    /**
     * @return {?}
     */
    LookupGridComponent.prototype.getComponentType = /**
     * @return {?}
     */
    function () {
        if (!this.displayType) {
            this.displayType = "LIST";
        }
        switch (this.displayType) {
            case LookupGridDisplayType.List:
            case LookupGridDisplayType.NavList:
            case LookupGridDisplayType.NavTreeList:
                return DataTableComponent;
            case LookupGridDisplayType.TreeList:
            case LookupGridDisplayType.NavListTree:
                return TreeTableComponent;
        }
    };
    /**
     * @param {?=} msg
     * @return {?}
     */
    LookupGridComponent.prototype.showLoading = /**
     * @param {?=} msg
     * @return {?}
     */
    function (msg) {
        if (msg === void 0) { msg = ""; }
        if (this.dialog && this.dialog.modalContent && !this.loading) {
            /** @type {?} */
            var opts = {
                container: this.dialog.modalContent,
                delay: 200,
            };
            if (msg) {
                opts["message"] = msg;
            }
            this.loading = this.loadingService.show(opts);
        }
        else {
            this.loading = this.loadingService.show();
        }
    };
    /**
     * @return {?}
     */
    LookupGridComponent.prototype.closeLoading = /**
     * @return {?}
     */
    function () {
        if (this.loading) {
            this.loading.close();
            this.loading = null;
        }
        this.loadingService.clearAll();
    };
    /**
     * @param {?} resdata
     * @return {?}
     */
    LookupGridComponent.prototype.getSearchColumns = /**
     * @param {?} resdata
     * @return {?}
     */
    function (resdata) {
        /** @type {?} */
        var cols = resdata.columns || this.columns;
        if (resdata.searchFields) {
            return resdata.searchFields.map((/**
             * @param {?} sf
             * @return {?}
             */
            function (sf) {
                /** @type {?} */
                var c = cols.find((/**
                 * @param {?} col
                 * @return {?}
                 */
                function (col) { return col.field.toLowerCase() === sf.value.toLowerCase(); }));
                if (c) {
                    sf.label = c.title;
                }
                return sf;
            }));
        }
        else if (cols) {
            return cols
                .filter((/**
             * @param {?} c
             * @return {?}
             */
            function (c) { return c.searchField; }))
                .map((/**
             * @param {?} col
             * @return {?}
             */
            function (col) {
                return {
                    label: col.title,
                    value: col.field,
                };
            }));
        }
        return [];
    };
    /**
     * @private
     * @param {?} resData
     * @return {?}
     */
    LookupGridComponent.prototype.initOptions = /**
     * @private
     * @param {?} resData
     * @return {?}
     */
    function (resData) {
        var _this = this;
        /** @type {?} */
        var obser = of(true);
        this.gridOptions.searchFields = this.getSearchColumns(resData);
        if (resData) {
            // 如果组件中未设置显示列，则使用服务器端返回的设置； 否则将使用组件中配置的展示列
            if ((!this.columns || !this.columns.length) &&
                resData.columns &&
                resData.columns.length) {
                this.columns = resData.columns;
            }
            this.setLookupTitleText(resData);
            if (this.isDoublleList() &&
                this.dialogWidth < this.navLookupDialogMinWidth &&
                !this.isRecordSize) {
                this.dialogWidth = this.navLookupDialogMinWidth;
                this.dialog.reSize({ width: this.dialogWidth });
            }
            if (!this.customDisplayType) {
                // this.displayType = resData.displayType || this.displayType || 'LIST';
                // if (this.treeToList) {
                //     this.displayType = this.isDoublleList() ? ' NAVLIST ': 'LIST';
                // }
                this.changeDetector.detectChanges();
                this.lookupCmpMgr.createComponentWithServerData(resData);
            }
            if (this.isDoublleList() && resData.navigation && !this.leftComponentRef) {
                this.navigationOptions = resData.navigation;
                this.navigationOptions.hover = true;
                this.navigationOptions.searchFields = this.getSearchColumns(this.navigationOptions);
                // update columns formatter
                if (this.customNavFormatter) {
                    this.navigationOptions.columns.forEach((/**
                     * @param {?} col
                     * @return {?}
                     */
                    function (col) {
                        if (_this.customNavFormatter[col.field]) {
                            col.formatter = _this.customNavFormatter[col.field];
                        }
                    }));
                    this.navigationOptions["rowStyler"] =
                        this.customNavFormatter.rowStyler;
                    this.navigationOptions["cellStyler"] =
                        this.customNavFormatter.cellStyler;
                }
                // 20210926 树导航帮助中 左侧树支持分层加载
                if (this.displayType === LookupGridDisplayType.NavTreeList) {
                    /** @type {?} */
                    var _nav_treeinfo_loadtype = this.navigationOptions.treeInfo.loadDataType;
                    if (this.loadTreeDataType !== "default") {
                        _nav_treeinfo_loadtype =
                            this.loadTreeDataType === "loadall"
                                ? "all"
                                : "async";
                    }
                    this.navigationOptions.treeInfo.loadDataType =
                        _nav_treeinfo_loadtype;
                }
                obser = this.lookupCmpMgr.createLeftComponent(this.navigationOptions);
            }
        }
        else {
            this.lookupCmpMgr.createContent(this.gridOptions);
            this.lookupCmpMgr.createFavoriteComponent();
        }
        if (this.isTextChange) {
            this.componentRef.instance.searchData.value = this.displayText;
        }
        else {
            if (this._searchState && this._searchState.value) {
                this.componentRef.instance.searchData.value = this._searchState.value;
            }
        }
        // update columns formatter
        if (this.customFormatter) {
            this.columns.forEach((/**
             * @param {?} col
             * @return {?}
             */
            function (col) {
                if (_this.customFormatter[col.field]) {
                    col.formatter = _this.customFormatter[col.field];
                }
            }));
            if (this.customFormatter.rowStyler) {
                this.componentRef.instance.rowStyler = this.customFormatter.rowStyler;
            }
            if (this.customFormatter.cellStyler) {
                this.componentRef.instance.cellStyler = this.customFormatter.cellStyler;
            }
        }
        else {
            if (resData.customStyles) {
                var _a = resData.customStyles, rowStylers_1 = _a.row, cellStylers_1 = _a.cell;
                /** @type {?} */
                var filterFn_1 = (/**
                 * @param {?} n
                 * @param {?} data
                 * @return {?}
                 */
                function (n, data) {
                    /** @type {?} */
                    var d = _this.utils.getValue(n.field, data);
                    if (typeof d === 'boolean') {
                        if (n.value == '0' || n.value == '1' || n.value == 'true' || n.value == 'false') {
                            return d === (n.value == '0' || n.value == 'false') ? false : true;
                        }
                        return d === !!n.value;
                    }
                    return d === n.value;
                });
                if (rowStylers_1) {
                    this.componentRef.instance.rowStyler = (/**
                     * @param {?} __0
                     * @return {?}
                     */
                    function (_a) {
                        var data = _a.data;
                        /** @type {?} */
                        var styleItem = rowStylers_1.find((/**
                         * @param {?} n
                         * @return {?}
                         */
                        function (n) {
                            return filterFn_1(n, data);
                        }));
                        if (styleItem) {
                            return styleItem.styles;
                        }
                        return null;
                    });
                }
                if (cellStylers_1) {
                    this.componentRef.instance.cellStyler = (/**
                     * @param {?} e
                     * @param {?} field
                     * @return {?}
                     */
                    function (e, field) {
                        var data = e.data;
                        /** @type {?} */
                        var styleItem = cellStylers_1.filter((/**
                         * @param {?} n
                         * @return {?}
                         */
                        function (n) { return n.field === field; })).find((/**
                         * @param {?} t
                         * @return {?}
                         */
                        function (t) {
                            return filterFn_1(t, data);
                        }));
                        if (styleItem) {
                            return styleItem.styles;
                        }
                        return null;
                    });
                }
            }
        }
        // this.changeDetector.detectChanges();
        return obser;
    };
    /**
     * 设置帮助窗口标题
     */
    /**
     * 设置帮助窗口标题
     * @private
     * @param {?} resData
     * @return {?}
     */
    LookupGridComponent.prototype.setLookupTitleText = /**
     * 设置帮助窗口标题
     * @private
     * @param {?} resData
     * @return {?}
     */
    function (resData) {
        if (resData.displayInfo) {
            this.displayInfo = resData.displayInfo;
        }
        // 如果自定义标题，将以此标题为准。否则加载服务器端返回的数据
        if (this.title && this.title !== "此处显示帮助标题") {
            this.displayInfo.title = this.title;
        }
        if (this.displayInfo && resData.title) {
            if (!this.displayInfo.title) {
                this.displayInfo.title = resData.title;
            }
        }
    };
    /**
     * @private
     * @return {?}
     */
    LookupGridComponent.prototype.showGetAllChildrenCheckbox = /**
     * @private
     * @return {?}
     */
    function () {
        if (this.isTree() && this.treeInfo) {
            this.enableGetAllChildNodes =
                this.treeInfo.loadDataType !== "all" && this.treeInfo.layerType === "pathcode";
        }
        else {
            this.enableGetAllChildNodes = false;
        }
    };
    /**
     * @return {?}
     */
    LookupGridComponent.prototype.initData = /**
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var observer = {
            next: (/**
             * @param {?} data
             * @return {?}
             */
            function (data) {
                if (data === false) {
                    if (!_this.columns || !_this.columns.length) {
                        _this.closeLoading();
                        _this.closeDialog();
                        if (!_this.messagerService.modals || !_this.messagerService.modals.length) {
                            _this.notifyService.error({ msg: _this.localService.getValue('lookup.configError'), timeout: 3000 });
                        }
                        return;
                    }
                }
                // 服务器端发生错误，返回NULL 时，直接关闭窗口
                if (data === null) {
                    _this.isShow = false;
                    if (_this.dialog) {
                        _this.dialog.close();
                    }
                    return;
                }
                _this.initOptions(data).subscribe((/**
                 * @return {?}
                 */
                function () {
                    _this.selectedColumns =
                        _this.multiSelMgr.initSelectedColumns();
                    _this.favoriteColumns = _this.favHelper.getFavoriteColumns();
                    if (_this.usePersionalConf) {
                        if (!_this.personalConfigService.getPersonalData()) {
                            _this.personalConfigService.savePersonalConfig(_this.personalConf);
                        }
                    }
                    if (!_this.isTabChanged) {
                        _this.lookupSelectionSer.loadSelections(data.selectedItems || []);
                    }
                    if (_this.isDoublleList()) {
                        // 导航帮助时，设置左侧选中数据时，不加载主数据列表。
                        if (_this.navSelectedIds || _this.selectFirstInNav) {
                            _this.loadDataWhenOpen = false;
                        }
                    }
                    if (data['activeTab'] && !_this.isTabChanged) {
                        _this.activeTab = 'datalist';
                        if (_this.personalConf && _this.personalConf.tabIndex !== _this.activeTab) {
                            _this.personalConf.tabIndex = _this.activeTab;
                        }
                    }
                    _this.loadData(data);
                    if (_this.isTree()) {
                        if (_this.activeTab === "datalist") {
                            /** @type {?} */
                            var tt = (/** @type {?} */ (_this.componentRef.instance));
                            if (tt.searchData.value && _this.items && _this.items.length) {
                                if (_this.items[0].children && _this.items[0].children.length) {
                                    tt.toggleExpand(_this.items[0], true, false);
                                }
                            }
                        }
                        _this.showGetAllChildrenCheckbox();
                    }
                    _this.isTextChange = false;
                    _this._searchResult = null; // 清空临时查询 结果
                    _this.closeLoading();
                    // this.isReady$.next(true);
                    _this.isReady = true;
                    _this.changeDetector.detectChanges();
                    _this.lookupinitializationSubject.next();
                }));
            }),
            error: (/**
             * @param {?} err
             * @return {?}
             */
            function (err) {
                // this.isReady$.next(true);
                _this.closeLoading();
                _this._searchResult = null; // 清空临时查询 结果
                _this.isTextChange = false;
                _this.hasError = true;
                _this.changeDetector.detectChanges();
                if (typeof err === "string") {
                    _this.messagerService.error(err);
                }
                else {
                    if (err) {
                        if (err.Message) {
                            _this.messagerService.error(err.Message);
                        }
                        else {
                            if (err.error) {
                                _this.messagerService.exception(err.error);
                            }
                            else {
                                _this.messagerService.error("应用服务器错误,请联系系统管理员！");
                            }
                        }
                    }
                }
            }),
        };
        /** @type {?} */
        var p = {
            pageInfo: {
                pageSize: this.pageSize || 20,
                pageIndex: 1,
            },
        };
        /** @type {?} */
        var t = "all";
        if (this.isTextChange) {
            this._searchState = {
                field: "*",
                value: this.displayText
            };
        }
        if (this._searchState && this._searchState.value) {
            p['search'] = this._searchState;
            t = 'search';
        }
        if (!this.isTabChanged && this.enableToSelect) {
            /** @type {?} */
            var vals = this.selectionMgr.getSelectedIds();
            if (vals && vals.length) {
                p["selectedInfo"] = {
                    selected: true,
                    selectedIds: vals,
                };
            }
            else {
                if (this["selectedIds"]) {
                    p["selectedInfo"] = {
                        selected: true,
                        selectedIds: this["selectedIds"],
                    };
                }
            }
        }
        this.showLoading();
        this.hasError = false;
        this.httpMgr.lookupRequest(p, t).pipe(map((/**
         * @param {?} restData
         * @return {?}
         */
        function (restData) {
            if (restData) {
                restData.selectedItems = restData["selectedData"] || [];
            }
            else {
                if (restData && typeof restData === "object") {
                    restData.selectedItems = [];
                }
            }
            return restData === null ? false : restData;
        }))).subscribe(observer);
    };
    /**
     * @param {?=} resData
     * @param {?=} rebindEvent
     * @return {?}
     */
    LookupGridComponent.prototype.loadData = /**
     * @param {?=} resData
     * @param {?=} rebindEvent
     * @return {?}
     */
    function (resData, rebindEvent) {
        if (rebindEvent === void 0) { rebindEvent = true; }
        if (this.activeTab === "datalist") {
            if (this.useFavorite && !this.isTree()) {
                this.favHelper.updateFavoritesStatus(resData.items);
            }
            switch (this.displayType) {
                case LookupGridDisplayType.NavList:
                case LookupGridDisplayType.NavTreeList:
                case LookupGridDisplayType.List:
                    this.loadDataTableData(resData);
                    if (rebindEvent) {
                        this.dtEventMgr.bindDataTableEvent();
                    }
                    break;
                case LookupGridDisplayType.TreeList:
                case LookupGridDisplayType.NavListTree:
                    this.loadTreeTableData(resData, rebindEvent);
                    break;
            }
        }
        else if (this.activeTab === "favorite") {
            this.loadFavData(resData);
        }
        // 选中数据
        this.selectionMgr.selectCurrentValue();
    };
    /**
     * @private
     * @param {?} result
     * @return {?}
     */
    LookupGridComponent.prototype.loadFavData = /**
     * @private
     * @param {?} result
     * @return {?}
     */
    function (result) {
        var _this = this;
        // 加载收藏数据
        if (this.useFavorite) {
            if (this.isTree()) {
                this.setTreeInfo(result);
                /** @type {?} */
                var treeNodes = this.favHelper.initFavoriteTreeData(result.items);
                /** @type {?} */
                var treeData = this.treeNodeHelper
                    .flatTreeNodes(treeNodes)
                    .map((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) {
                    n.data["_addtional_"] = n["addtional"];
                    return n.data;
                }));
                this.lookupSelectionSer.initFavoriteItems(treeData);
                setTimeout((/**
                 * @return {?}
                 */
                function () {
                    _this.favoritesComponentRef.instance.scrollToY(1);
                }));
            }
            else {
                this.lookupSelectionSer.initFavoriteItems(result.items);
            }
            this.favHelper.loadFavoritesData(result);
        }
    };
    /**
     * @param {?=} resData
     * @return {?}
     */
    LookupGridComponent.prototype.loadDataTableData = /**
     * @param {?=} resData
     * @return {?}
     */
    function (resData) {
        if (resData) {
            if (this.useFavorite && !this.isTree()) {
                this.favHelper.updateFavoritesStatus(resData.items);
            }
            if (this.gridOptions) {
                if (resData && resData.columns && resData.columns.length) {
                    if (!this.gridOptions.columns ||
                        !this.gridOptions.columns.length) {
                        this.columns = resData.columns;
                    }
                }
                this.items = resData.items;
                this.total = resData.total || resData.items.length;
                if (resData.searchFields) {
                    this.gridOptions.searchFields = this.getSearchColumns(resData);
                }
                if (resData.pageInfo) {
                    if (resData.pageInfo.pageList &&
                        (!this.pageList || !this.pageList.length)) {
                        this.pageList = resData.pageInfo.pageList;
                    }
                    this.pagination = resData.pageInfo.enablePager;
                    this.pageIndex = resData.pageInfo.pageIndex;
                    this.pageSize = resData.pageInfo.pageSize;
                }
                else {
                    this.pagination = false;
                }
            }
            else {
                this.gridOptions = (/** @type {?} */ (resData));
            }
        }
        this.updateDataTable(this.gridOptions);
    };
    /**
     * @private
     * @param {?} opts
     * @return {?}
     */
    LookupGridComponent.prototype.updateDataTable = /**
     * @private
     * @param {?} opts
     * @return {?}
     */
    function (opts) {
        if (opts) {
            /** @type {?} */
            var dt = (/** @type {?} */ (this.componentRef.instance));
            if (!dt.columns || dt.columns.length === 0) {
                dt.columns = this.gridOptions.columns;
            }
            dt.allColumnsTitle = this.allColumnsTitle;
            dt.searchFields = opts.searchFields;
            dt.pagination = opts.pagination;
            dt.pageList = this.pageList;
            dt.remoteSort = this.remoteSort;
            if (this.loadDataWhenOpen) {
                dt.loadData({
                    pageSize: opts.pageSize,
                    pageIndex: this.gridOptions.pageIndex,
                    total: this.gridOptions.total,
                    data: this.gridOptions.items,
                });
                dt.cd.markForCheck();
            }
            this.loadSuccess.emit();
        }
    };
    /**
     * @private
     * @param {?} resData
     * @return {?}
     */
    LookupGridComponent.prototype.setTreeInfo = /**
     * @private
     * @param {?} resData
     * @return {?}
     */
    function (resData) {
        if (!resData) {
            return;
        }
        /** @type {?} */
        var _treeInfo = null;
        if (resData.treeInfo) {
            /** @type {?} */
            var onlySelectLeaf = resData.treeInfo.onlySelectLeaf;
            /** @type {?} */
            var _osl = "no";
            if (onlySelectLeaf !== undefined) {
                _osl = onlySelectLeaf ? "yes" : "no";
            }
            _treeInfo = tslib_1.__assign({}, resData.treeInfo, { onlySelectLeaf: _osl });
        }
        if (this.gridOptions.treeInfo) {
            /** @type {?} */
            var treeInfo = this.gridOptions.treeInfo;
            if (treeInfo) {
                if (treeInfo.onlySelectLeaf === undefined ||
                    treeInfo.onlySelectLeaf === null) {
                    treeInfo.onlySelectLeaf = "no";
                }
                if (typeof treeInfo.onlySelectLeaf === "boolean") {
                    treeInfo.onlySelectLeaf = treeInfo.onlySelectLeaf ? "yes" : "no";
                }
                // 20210902
                if (this.loadTreeDataType === "default") {
                    treeInfo.loadDataType = _treeInfo.loadDataType;
                }
                else {
                    treeInfo.loadDataType =
                        this.loadTreeDataType === "loadall" ? "all" : "async";
                }
                if (treeInfo.onlySelectLeaf !== "default") {
                    _treeInfo = Object.assign(_treeInfo, treeInfo);
                }
            }
        }
        this.treeInfo = _treeInfo;
    };
    /**
     * @private
     * @param {?=} resData
     * @param {?=} rebindEvent
     * @return {?}
     */
    LookupGridComponent.prototype.loadTreeTableData = /**
     * @private
     * @param {?=} resData
     * @param {?=} rebindEvent
     * @return {?}
     */
    function (resData, rebindEvent) {
        var _this = this;
        if (rebindEvent === void 0) { rebindEvent = true; }
        /** @type {?} */
        var items = resData ? resData.items : this.gridOptions.items;
        this.items = items;
        if (resData) {
            this.setTreeInfo(resData);
            /** @type {?} */
            var treeInfo = this.gridOptions.treeInfo;
            if (!treeInfo["treeDataIsInit"]) {
                if (treeInfo.layerType.toLowerCase() === "pathcode") {
                    this.items = this.lookupUtils.makeTree(this.items, treeInfo);
                }
                else {
                    this.items = this.lookupUtils.makeTreeWithParentID(this.items, "", treeInfo.dataField ? treeInfo.dataField + "." + treeInfo.parentField : treeInfo.parentField, this.idField);
                }
            }
        }
        if (this.componentRef.instance instanceof TreeTableComponent) {
            /** @type {?} */
            var tt_1 = (/** @type {?} */ (this.componentRef.instance));
            if (this.treeInfo) {
                tt_1.loadDataType = this.treeInfo.loadDataType;
            }
            if (!this.columns || !this.columns.length) {
                tt_1.columns = resData.columns || [];
                this.gridOptions.columns = tt_1.columns;
            }
            /** @type {?} */
            var isLoadAllTreeData = (/**
             * @return {?}
             */
            function () {
                if (_this.loadTreeDataType === "default") {
                    return tt_1.loadDataType === "all";
                }
                else {
                    return _this.loadTreeDataType === "loadall";
                }
            });
            if (rebindEvent) {
                this.ttEventMgr.bindTreetableEvent();
            }
            /** @type {?} */
            var isLoadAll = isLoadAllTreeData();
            /** 完整树节点检查 By Lucas 20200302 */
            this.items = this.checkNodeCanBeSelect(this.items, isLoadAll);
            tt_1.keepSelect = true;
            if (this.useFavorite) {
                this.favHelper.updateFavoritesStatus(this.items);
            }
            if (this.loadDataWhenOpen) {
                tt_1.loadData(this.items);
            }
            tt_1.resize();
        }
    };
    /**
     * 在构完整树中，有部分节点因为条件被过滤，为显示完整树，
     * 这些节点在运行时是不允许被选中的, 返回新的节点数组
     * By Lucas 20200302
     */
    /**
     * 在构完整树中，有部分节点因为条件被过滤，为显示完整树，
     * 这些节点在运行时是不允许被选中的, 返回新的节点数组
     * By Lucas 20200302
     * @param {?} nodes
     * @param {?=} isAllTreeData
     * @return {?}
     */
    LookupGridComponent.prototype.checkNodeCanBeSelect = /**
     * 在构完整树中，有部分节点因为条件被过滤，为显示完整树，
     * 这些节点在运行时是不允许被选中的, 返回新的节点数组
     * By Lucas 20200302
     * @param {?} nodes
     * @param {?=} isAllTreeData
     * @return {?}
     */
    function (nodes, isAllTreeData) {
        var _this = this;
        if (isAllTreeData === void 0) { isAllTreeData = false; }
        if (nodes && nodes.length) {
            return nodes.map((/**
             * @param {?} node
             * @return {?}
             */
            function (node) {
                if (node.hasOwnProperty("addtional")) {
                    node.selectable = !node["addtional"];
                }
                if (node.children && node.children.length) {
                    _this.checkNodeCanBeSelect(node.children, isAllTreeData);
                }
                else {
                    if (isAllTreeData && (!_this._searchState || !_this._searchState.value)) {
                        node.leaf = true;
                    }
                }
                return node;
            }));
        }
        return nodes;
    };
    /**
     * @param {?} val
     * @return {?}
     */
    LookupGridComponent.prototype.onChanges = /**
     * @param {?} val
     * @return {?}
     */
    function (val) {
        if (!val) {
            this.onClear();
        }
        else {
            this.displayText = val;
            this.isTextChange = this.originalText !== this.displayText;
            if (this.nosearch) {
                this.setModelValue(val);
                this.clearMappings.emit({ instance: this, value: val, });
            }
            this.onModelTouched(val);
            this.valueChanged.emit(val);
            this.textChanged.emit(val);
        }
    };
    /**
     * @param {?=} emit
     * @return {?}
     */
    LookupGridComponent.prototype.onClear = /**
     * @param {?=} emit
     * @return {?}
     */
    function (emit) {
        if (emit === void 0) { emit = true; }
        this.isTextChange = false;
        this.displayText = "";
        this.displayValue = "";
        this.originalText = "";
        this.extendInfo = "";
        this.setModelValue("");
        if (this.mappingFn) {
            this.mappingFn(null, this.mapFields);
        }
        else {
            if (this.mapFields) {
                /** @type {?} */
                var bindingData = this.selectionMgr.getBindingData();
                if (bindingData) {
                    this.defaultMapping.lookupFieldMap(null, this.mapFields, bindingData);
                }
            }
        }
        this.multiSelMgr.clear();
        if (emit) {
            this.clear.emit();
        }
    };
    /**
     * @param {?=} emit
     * @return {?}
     */
    LookupGridComponent.prototype.clearValue = /**
     * @param {?=} emit
     * @return {?}
     */
    function (emit) {
        if (emit === void 0) { emit = true; }
        this.onClear(emit);
    };
    /**
     * @param {?=} rowData
     * @return {?}
     */
    LookupGridComponent.prototype.selectItem = /**
     * @param {?=} rowData
     * @return {?}
     */
    function (rowData) {
        var _this = this;
        /** @type {?} */
        var selectedRow = null;
        if (rowData) {
            selectedRow = rowData;
        }
        else {
            selectedRow = this.selections;
            if (!selectedRow) {
                selectedRow = null;
            }
            else {
                if (Array.isArray(selectedRow) && !selectedRow.length) {
                    selectedRow = null;
                }
            }
        }
        this._searchState = {
            field: '*',
            value: ''
        };
        // 如果定义自定义处理确定事件，则由自定义事件处理后面的逻辑
        if (this.okHandler) {
            this.okHandler({ data: selectedRow, instance: this });
        }
        else {
            if (this.beforeSelectData) {
                /** @type {?} */
                var bsdResult = this.beforeSelectData({
                    instance: this,
                    data: selectedRow,
                });
                if (bsdResult && bsdResult.subscribe) {
                    bsdResult.subscribe((/**
                     * @param {?} e
                     * @return {?}
                     */
                    function (e) {
                        _this._beforeSelectDataCallBack(e, selectedRow);
                    }));
                }
                else {
                    this.writeConsole('帮助数据选中前事件未返回值或返回类型非Observable, 请检查', 'error');
                }
            }
            else {
                this._beforeSelectDataCallBack(true, selectedRow);
            }
        }
    };
    /**
     * @param {?} data
     * @param {?=} treeInfo
     * @return {?}
     */
    LookupGridComponent.prototype.getPathCode = /**
     * @param {?} data
     * @param {?=} treeInfo
     * @return {?}
     */
    function (data, treeInfo) {
        if (treeInfo === void 0) { treeInfo = null; }
        return this.lookupUtils.getPathCode(data, treeInfo || this.treeInfo);
    };
    /**
     * @param {?} data
     * @param {?=} treeInfo
     * @return {?}
     */
    LookupGridComponent.prototype.getLayerData = /**
     * @param {?} data
     * @param {?=} treeInfo
     * @return {?}
     */
    function (data, treeInfo) {
        if (treeInfo === void 0) { treeInfo = null; }
        return this.lookupUtils.getLayerData(data, treeInfo || this.treeInfo);
    };
    /**
     * @private
     * @param {?} rows
     * @return {?}
     */
    LookupGridComponent.prototype.getParentPathCode = /**
     * @private
     * @param {?} rows
     * @return {?}
     */
    function (rows) {
        var _this = this;
        /** @type {?} */
        var maxBy = (/**
         * @param {?} arr
         * @param {?} fn
         * @return {?}
         */
        function (arr, fn) {
            return Math.max.apply(Math, tslib_1.__spread(arr.map(typeof fn === "function" ? fn : (/**
             * @param {?} val
             * @return {?}
             */
            function (val) { return val[fn]; }))));
        });
        // const { dataField, pathField, layerField } = this.treeInfo;
        /** @type {?} */
        var maxLayer = maxBy(rows, (/**
         * @param {?} x
         * @return {?}
         */
        function (x) { return _this.getLayerData(x); }));
        var _loop_1 = function (i) {
            /** @type {?} */
            var _rows = rows.filter((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return _this.getLayerData(n) === i; }));
            if (_rows && _rows.length && _rows.length < rows.length) {
                _rows.forEach((/**
                 * @param {?} r
                 * @return {?}
                 */
                function (r) {
                    /** @type {?} */
                    var patchCode = _this.getPathCode(r);
                    /** @type {?} */
                    var _rows2 = rows.filter((/**
                     * @param {?} n
                     * @return {?}
                     */
                    function (n) {
                        /** @type {?} */
                        var _pc = _this.getPathCode(n);
                        return _pc !== patchCode && _pc.indexOf(patchCode) === 0;
                    }));
                    if (_rows2 && _rows2.length) {
                        rows = rows.filter((/**
                         * @param {?} n
                         * @return {?}
                         */
                        function (n) { return _this.getPathCode(n) !== patchCode; }));
                    }
                }));
            }
        };
        for (var i = 1; i <= maxLayer; i++) {
            _loop_1(i);
        }
        return rows;
    };
    /**
     * @private
     * @param {?} e
     * @param {?} selectedRow
     * @return {?}
     */
    LookupGridComponent.prototype._beforeSelectDataCallBack = /**
     * @private
     * @param {?} e
     * @param {?} selectedRow
     * @return {?}
     */
    function (e, selectedRow) {
        var _this = this;
        /** @type {?} */
        var canSelect = e;
        /** @type {?} */
        var message = "";
        if (typeof e === "boolean") {
            canSelect = e;
        }
        else {
            if (typeof e === "object") {
                canSelect = e.canSelect;
                message = e.message;
            }
            else {
                canSelect = false;
            }
        }
        if (!selectedRow) {
            message = this.mustChoosAdatarow;
            canSelect = false;
        }
        if (canSelect) {
            /** @type {?} */
            var selectedRows$ = of(selectedRow);
            // 多选 树帮助 异步加载 分级码 开启同步选择 或包含下级
            if (!this.singleSelect && this.enableCascade && this.isTree()) {
                if (this.treeInfo.loadDataType !== "all" && this.treeInfo.layerType === "pathcode" && this.isGetAllChidlNodes) {
                    /** @type {?} */
                    var parentsIds = this.getParentPathCode(selectedRow);
                    if (parentsIds && parentsIds.length) {
                        parentsIds = parentsIds.map((/**
                         * @param {?} n
                         * @return {?}
                         */
                        function (n) { return _this.getPathCode(n); }));
                        this.showLoading();
                        selectedRows$ = this.httpMgr
                            .getData({ parentsIds: parentsIds }, "allChildren")
                            .pipe(map((/**
                         * @param {?} r
                         * @return {?}
                         */
                        function (r) {
                            /** @type {?} */
                            var items = r.items
                                ? r.items.map((/**
                                 * @param {?} d
                                 * @return {?}
                                 */
                                function (d) { return d.data; }))
                                : [];
                            /** @type {?} */
                            var allitems = tslib_1.__spread(selectedRow, items);
                            /** @type {?} */
                            var ids = allitems.map((/**
                             * @param {?} n
                             * @return {?}
                             */
                            function (n) { return n[_this.idField]; }));
                            ids = Array.from(new Set(ids));
                            return ids.map((/**
                             * @param {?} n
                             * @return {?}
                             */
                            function (n) {
                                return allitems.find((/**
                                 * @param {?} a
                                 * @return {?}
                                 */
                                function (a) { return a[_this.idField] === n; }));
                            }));
                        })));
                    }
                }
            }
            selectedRows$.subscribe((/**
             * @param {?} rows
             * @return {?}
             */
            function (rows) {
                _this.closeLoading();
                _this.updateControlValue(rows);
                if (!_this.useTip || !rows) {
                    return;
                }
                if (_this.useTip) {
                    _this.personalConfigService.updateQueckSelected(rows, _this.localService.localeId);
                }
            }));
        }
        else {
            if (message) {
                if (this.notifyService) {
                    this.notifyService.warning(message);
                }
                else {
                    this.messagerService.warning(message, "", true, (/**
                     * @return {?}
                     */
                    function () {
                        _this.dialog.el.nativeElement.click();
                    }));
                }
            }
        }
    };
    /**
     * @private
     * @param {?} selectedRow
     * @return {?}
     */
    LookupGridComponent.prototype.updateControlValue = /**
     * @private
     * @param {?} selectedRow
     * @return {?}
     */
    function (selectedRow) {
        if (selectedRow) {
            this.setDisplayText(selectedRow);
            if (this.mappingFn) {
                this.mappingFn(selectedRow, this.mapFields, this.bindingData);
            }
            else {
                if (this.mapFields && this.bindingData) {
                    this.defaultMapping.lookupFieldMap(selectedRow, this.mapFields, this.bindingData);
                }
            }
            this.setModelValue(this.displayText);
            if (this["inDatagrid"] && selectedRow) {
                /** @type {?} */
                var selectItems = Array.isArray(selectedRow)
                    ? selectedRow
                    : [selectedRow];
                this.updateBindData(selectItems);
            }
            this.selectedData.emit(selectedRow);
            this.runDictPickedEvent(selectedRow);
            this.isTextChange = false;
        }
        else {
            if (document.activeElement) {
                ((/** @type {?} */ (document.activeElement))).blur();
            }
            this.messagerService.warning(this.mustChoosAdatarow);
        }
    };
    /**
     * @private
     * @param {?} selectedRow
     * @return {?}
     */
    LookupGridComponent.prototype.updateBindData = /**
     * @private
     * @param {?} selectedRow
     * @return {?}
     */
    function (selectedRow) {
        var _this = this;
        if (!this.mapFields) {
            return;
        }
        /** @type {?} */
        var helpFields = Object.keys(this.mapFields);
        if (this.ngControl &&
            this.ngControl.formDirective &&
            this.ngControl.formDirective.form &&
            this.ngControl.formDirective.form.bindingData) {
            /** @type {?} */
            var bindingData_1 = this.ngControl.formDirective.form.bindingData;
            if (bindingData_1) {
                helpFields.forEach((/**
                 * @param {?} helpField
                 * @return {?}
                 */
                function (helpField) {
                    _this.mapFields[helpField]
                        .split(",")
                        .forEach((/**
                     * @param {?} formField
                     * @return {?}
                     */
                    function (formField) {
                        /** @type {?} */
                        var val = selectedRow
                            .map((/**
                         * @param {?} r
                         * @return {?}
                         */
                        function (r) {
                            return _this.utils.getValue(helpField, r);
                        }))
                            .join(_this.multipleChoiceSeparator);
                        _this.utils.setValue(bindingData_1, formField, val);
                    }));
                }));
            }
            // if (bindingData.setValue) {
            //     const bindingPath = this.ngControl.formDirective.form.bindingPath;
            //     let pathArr: string[] = [];
            //     if (bindingPath) {
            //         pathArr = bindingPath.split('/').filter(n => n !== '');
            //     }
            //     helpFields.forEach((helpField: any) => {
            //         this.mapFields[helpField].split(',').forEach((formField: any) => {
            //             const fieldPaths = pathArr.concat(formField.split('.'));
            //             const val = selectedRow.map(r => {
            //                 return this.utils.getValue(formField, r);
            //             }).join(this.multipleChoiceSeparator);
            //             bindingData.setValue(pathArr.concat(fieldPaths), val, true, true);
            //         });
            //     });
            // }
        }
        else {
            // if (this.bindingData) {
            //     helpFields.forEach((helpField: any) => {
            //         this.mapFields[helpField].split(',').forEach((formField: any) => {
            //             const val = selectedRow.map(r => {
            //                 return this.utils.getValue(formField, r);
            //             }).join(this.multipleChoiceSeparator);
            //             this.utils.setValue(this.bindingData, formField, val);
            //         });
            //     });
            // }
        }
    };
    /**
     * @private
     * @param {?=} isHelpData
     * @return {?}
     */
    LookupGridComponent.prototype.getExtendInfoFields = /**
     * @private
     * @param {?=} isHelpData
     * @return {?}
     */
    function (isHelpData) {
        var _this = this;
        if (isHelpData === void 0) { isHelpData = true; }
        if (!this.extInfoFields) {
            this.writeConsole("\u672A\u8BBE\u7F6E\u6269\u5C55\u5B57\u6BB5\u3002");
            return [];
        }
        /** @type {?} */
        var tipFieldArr = this.extInfoFields.split(",");
        if (isHelpData) {
            /** @type {?} */
            var extendInfoFields = [];
            extendInfoFields = tipFieldArr.map((/**
             * @param {?} tf
             * @return {?}
             */
            function (tf) {
                /** @type {?} */
                var mapKey = Object.keys(_this.mapFields).find((/**
                 * @param {?} k
                 * @return {?}
                 */
                function (k) {
                    return _this.mapFields[k] === tf;
                }));
                if (mapKey) {
                    return mapKey;
                }
                else {
                    _this.writeConsole("\u5728\u5E2E\u52A9\u6620\u5C04\u5B57\u6BB5\u4E2D\u672A\u627E\u5230" + tf);
                    return "";
                }
            }));
            return extendInfoFields;
        }
        return tipFieldArr;
    };
    /**
     * @return {?}
     */
    LookupGridComponent.prototype.onUpdateExtendInfo = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var jsonData = this.selectionMgr.getBindingData();
        this.updateExtendInfo(jsonData, false);
    };
    // 选中帮助数据后，更新扩展信息
    // 选中帮助数据后，更新扩展信息
    /**
     * @private
     * @param {?} data
     * @param {?=} isHelpData
     * @return {?}
     */
    LookupGridComponent.prototype.updateExtendInfo = 
    // 选中帮助数据后，更新扩展信息
    /**
     * @private
     * @param {?} data
     * @param {?=} isHelpData
     * @return {?}
     */
    function (data, isHelpData) {
        var _this = this;
        if (isHelpData === void 0) { isHelpData = true; }
        if (data) {
            if (this.extInfoFormatter) {
                if (Array.isArray(data)) {
                    /** @type {?} */
                    var tipString = data.map((/**
                     * @param {?} n
                     * @return {?}
                     */
                    function (n) {
                        return _this.getExtendInfoText(n);
                    }));
                    this.extendInfo = tipString.join("，");
                }
                else {
                    this.extendInfo = this.getExtendInfoText(data);
                }
            }
            else {
                /** @type {?} */
                var extendInfoFields_1 = this.getExtendInfoFields(isHelpData);
                if (extendInfoFields_1 && extendInfoFields_1.length) {
                    if (Array.isArray(data)) {
                        /** @type {?} */
                        var tipString = data.map((/**
                         * @param {?} n
                         * @return {?}
                         */
                        function (n) {
                            return _this.getExtendInfoText(n, extendInfoFields_1);
                        }));
                        this.extendInfo = tipString.join("，");
                    }
                    else {
                        this.extendInfo = this.getExtendInfoText(data, extendInfoFields_1);
                    }
                }
            }
        }
    };
    /**
     * @private
     * @param {?} itemData
     * @param {?=} fields
     * @return {?}
     */
    LookupGridComponent.prototype.getExtendInfoText = /**
     * @private
     * @param {?} itemData
     * @param {?=} fields
     * @return {?}
     */
    function (itemData, fields) {
        var _this = this;
        if (fields === void 0) { fields = null; }
        if (typeof this.extInfoFormatter === "function") {
            return this.extInfoFormatter({
                bindingData: itemData,
                instance: this,
            });
        }
        else {
            /** @type {?} */
            var tipString_1 = [];
            /** @type {?} */
            var tipValues = fields.map((/**
             * @param {?} t
             * @return {?}
             */
            function (t) {
                var _a;
                /** @type {?} */
                var tfv = _this.utils.getValue(t, itemData);
                tipString_1.push(tfv);
                return _a = {}, _a[t] = tfv, _a;
            }));
            return tipString_1.join(" ");
        }
    };
    /**
     * @private
     * @param {?} rows
     * @return {?}
     */
    LookupGridComponent.prototype.getDisplayText = /**
     * @private
     * @param {?} rows
     * @return {?}
     */
    function (rows) {
        var _this = this;
        /** @type {?} */
        var df = this.displayFields
            ? this.displayFields.split(",")
            : [this.textField];
        /** @type {?} */
        var txtArr = rows.map((/**
         * @param {?} r
         * @return {?}
         */
        function (r) {
            /** @type {?} */
            var t = [];
            df.forEach((/**
             * @param {?} n
             * @return {?}
             */
            function (n) {
                t.push(_this.utils.getValue(n, r));
            }));
            return t.join(_this.displayTextSeparator);
        }));
        if (this.gridOptions.singleSelect) {
            return txtArr.join("");
        }
        else {
            if (this.displayFields) {
                return txtArr.map((/**
                 * @param {?} t
                 * @return {?}
                 */
                function (t) { return "[" + t + "]"; })).join(",");
            }
            else {
                return txtArr.join(",");
            }
        }
    };
    /**
     * @private
     * @param {?} selectedRow
     * @return {?}
     */
    LookupGridComponent.prototype.setDisplayText = /**
     * @private
     * @param {?} selectedRow
     * @return {?}
     */
    function (selectedRow) {
        var _this = this;
        this.originalText = this.displayText;
        if (this.gridOptions.singleSelect) {
            if (this.displayFormatter) {
                this.displayText = this.utils.getValue(this.textField, selectedRow);
                if (!this.isTree()) {
                    this.displayText = this.displayFormatter(this.displayText, [selectedRow], {
                        lookup: this,
                        datatable: (/** @type {?} */ (this.componentRef
                            .instance)),
                    });
                }
                else {
                    /** @type {?} */
                    var tt = (/** @type {?} */ (this.componentRef.instance));
                    this.displayText = this.displayFormatter(this.displayText, [selectedRow], { lookup: this, tree: tt });
                }
            }
            else {
                this.displayText = this.getDisplayText([selectedRow]);
            }
            this.displayValue = selectedRow[this.valueField || this.idField];
        }
        else {
            if (selectedRow.length) {
                if (this.displayFormatter) {
                    this.displayText = selectedRow
                        .map((/**
                     * @param {?} r
                     * @return {?}
                     */
                    function (r) {
                        return _this.utils.getValue(_this.textField, r);
                    }))
                        .join(this.multipleChoiceSeparator);
                    if (!this.isTree()) {
                        this.displayText = this.displayFormatter(this.displayText, selectedRow, {
                            lookup: this,
                            datatable: (/** @type {?} */ (this.componentRef
                                .instance)),
                        });
                    }
                    else {
                        /** @type {?} */
                        var tt = (/** @type {?} */ (this.componentRef
                            .instance));
                        this.displayText = this.displayFormatter(this.displayText, selectedRow, { lookup: this, tree: tt });
                    }
                }
                else {
                    this.displayText = this.getDisplayText(selectedRow);
                }
                this.displayValue = selectedRow
                    .map((/**
                 * @param {?} r
                 * @return {?}
                 */
                function (r) {
                    return _this.utils.getValue(_this.valueField || _this.idField, r);
                }))
                    .join(this.multipleChoiceSeparator);
            }
        }
        this.originalText = this.displayText;
    };
    /**
     * @param {?} rowData
     * @return {?}
     */
    LookupGridComponent.prototype.runDictPickedEvent = /**
     * @param {?} rowData
     * @return {?}
     */
    function (rowData) {
        var _this = this;
        if (this.dictPicked) {
            if (this.okButton) {
                this.okButton.nativeElement.disabled = true;
            }
            this.dictPickedSubscription = this.dictPicked(rowData).subscribe((/**
             * @param {?} v
             * @return {?}
             */
            function (v) {
                if (_this.okButton) {
                    _this.okButton.nativeElement.disabled = false;
                }
                if (typeof v === "boolean") {
                    if (v) {
                        _this.closeDialog(rowData);
                    }
                }
                else if (typeof v === "object" &&
                    v.closeDialog !== undefined &&
                    !v.closeDialog) {
                    if (v.message) {
                        _this.messagerService.warning(v.message);
                    }
                    else {
                        _this.closeDialog(rowData);
                    }
                }
                else {
                    _this.closeDialog(rowData);
                }
            }));
        }
        else {
            this.closeDialog(rowData);
        }
    };
    /**
     * @private
     * @return {?}
     */
    LookupGridComponent.prototype.focusToInput = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        this.zone.runOutsideAngular((/**
         * @return {?}
         */
        function () {
            setTimeout((/**
             * @return {?}
             */
            function () {
                if (_this.inputGroup && _this.inputGroup.textbox) {
                    _this.inputGroup.textbox.nativeElement.focus();
                }
            }));
        }));
    };
    /**
     * @param {?=} rowData
     * @return {?}
     */
    LookupGridComponent.prototype.closeDialog = /**
     * @param {?=} rowData
     * @return {?}
     */
    function (rowData) {
        if (rowData === void 0) { rowData = null; }
        if (this.dialog) {
            this.dialog.close();
        }
        if (rowData) {
            this.multiSelMgr.save(rowData);
        }
        // this.isShow = false;
        this.focusToInput();
    };
    /**
     * @return {?}
     */
    LookupGridComponent.prototype.cancelSelect = /**
     * @return {?}
     */
    function () {
        this.closeDialog();
        this.isTextChange = false;
        if (!this.nosearch) {
            this.displayText = this.originalText;
            this.setModelValue(this.displayText);
        }
        if (this.cancelHandler) {
            this.cancelHandler(this);
        }
    };
    /**
     * @param {?} v
     * @return {?}
     */
    LookupGridComponent.prototype.setModelValue = /**
     * @param {?} v
     * @return {?}
     */
    function (v) {
        if (this.onModelChange) {
            this.onModelChange(v);
            this.valueChanged.emit(v);
        }
    };
    // 数据列表，收藏， 已选数据 tab 页切换
    // 数据列表，收藏， 已选数据 tab 页切换
    /**
     * @param {?} e
     * @return {?}
     */
    LookupGridComponent.prototype.onTabChange = 
    // 数据列表，收藏， 已选数据 tab 页切换
    /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        var _this = this;
        this.activeTab = e.tabIndex;
        this.personalConf.tabIndex = this.activeTab;
        /** @type {?} */
        var _firstChange = this.isTabChanged;
        this.isTabChanged = true;
        this.personalConfigService.updatePersonalConfig({
            tabIndex: e.tabIndex,
        });
        if (this.activeTab === "datalist") {
            if (this.isDoublleList() && !this.leftComponentRef) {
                if (this.navigationOptions) {
                    this.lookupCmpMgr.createLeftComponent(this.navigationOptions);
                }
                else {
                    this.initData();
                    return;
                }
            }
            if (!this.items || !this.items.length) {
                this.initData();
            }
            else {
                if (!_firstChange) {
                    if (this.isTree()) {
                        this.loadTreeTableData();
                    }
                    else {
                        this.loadDataTableData();
                        this.dtEventMgr.bindDataTableEvent();
                    }
                }
                // this.selectionMgr.selectCurrentValue();
            }
            this.showGetAllChildrenCheckbox();
        }
        else {
            if (this.activeTab === "favorite") {
                if (this.isTree()) {
                    this.initData();
                }
                else {
                    if (!this.favoriteItems ||
                        !this.favoriteItems.length ||
                        this.favoriteItems.length !== this.favHelper.getFavoritIds().length) {
                        this.initData();
                    }
                    else if (!_firstChange) {
                        this.favHelper._loadFavoriteData(this.favoriteItems);
                        // this.selectionMgr.selectCurrentValue();
                    }
                    //  else {
                    //     this.selectionMgr.selectCurrentValue();
                    // }
                }
            }
        }
        this.changeDetector.detectChanges();
        setTimeout((/**
         * @return {?}
         */
        function () {
            _this.resizeCmp();
            if (_this.isTree()) {
                /** @type {?} */
                var y = _this.componentRef.instance.state.scrollY;
                _this.componentRef.instance.scrollToY(y, 0);
                if (_this.enableCascade) {
                    _this.ttEventMgr.cascadeValueChanged(_this.cascadeStatus);
                }
            }
            _this.selectionMgr.selectCurrentValue();
        }));
    };
    //#region  Tag View ----------------------------------------------------------------------
    //#region  Tag View ----------------------------------------------------------------------
    /**
     * @private
     * @return {?}
     */
    LookupGridComponent.prototype.registerMouseEventForTagView = 
    //#region  Tag View ----------------------------------------------------------------------
    /**
     * @private
     * @return {?}
     */
    function () {
        if (this.enableClear) {
            this.tagbox.nativeElement.addEventListener("mouseenter", this.onTagboxMouseEnter.bind(this));
            this.tagbox.nativeElement.addEventListener("mouseleave", this.onTagboxMouseLeave.bind(this));
        }
    };
    /**
     * @private
     * @param {?} event
     * @param {?=} isShow
     * @return {?}
     */
    LookupGridComponent.prototype.toggleClearIcon = /**
     * @private
     * @param {?} event
     * @param {?=} isShow
     * @return {?}
     */
    function (event, isShow) {
        if (isShow === void 0) { isShow = false; }
        /** @type {?} */
        var str = isShow ? "" : "none";
        /** @type {?} */
        var clearIcon = event.target.querySelector(".input-group-clear");
        if (clearIcon) {
            clearIcon.style.display = str;
        }
    };
    /**
     * @private
     * @param {?} event
     * @return {?}
     */
    LookupGridComponent.prototype.onTagboxMouseEnter = /**
     * @private
     * @param {?} event
     * @return {?}
     */
    function (event) {
        if (this.displayText && this.enableClear) {
            if (!this.readonly && !this.disabled) {
                this.showTagboxClearButton = true;
            }
        }
        if (this.showTagboxClearButton) {
            this.toggleClearIcon(event, true);
        }
    };
    /**
     * @private
     * @param {?} event
     * @return {?}
     */
    LookupGridComponent.prototype.onTagboxMouseLeave = /**
     * @private
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.toggleClearIcon(event);
    };
    /**
     * @param {?} $event
     * @param {?} txt
     * @return {?}
     */
    LookupGridComponent.prototype.onRemoveSelectItem = /**
     * @param {?} $event
     * @param {?} txt
     * @return {?}
     */
    function ($event, txt) {
        $event.stopPropagation();
        /** @type {?} */
        var textArray = Array.from(this.displayTextList);
        /** @type {?} */
        var removedIndex = this.displayTextList.indexOf(txt);
        textArray.splice(removedIndex, 1);
        this.displayText = textArray.join(this.multipleChoiceSeparator);
        this.originalText = this.displayText;
        this.setModelValue(this.displayText);
        if (this.displayValue) {
            /** @type {?} */
            var vals = this.displayValue.split(this.multipleChoiceSeparator);
            vals.splice(removedIndex, 1);
            this.displayValue = vals.join(this.multipleChoiceSeparator);
        }
        if (this.mapFields) {
            this.updateOtherFieldDataWhenTagremoved(removedIndex);
        }
        this.tagRemoved.emit({ removedIndex: removedIndex, instance: this });
    };
    /**
     * @private
     * @param {?} removedIndex
     * @return {?}
     */
    LookupGridComponent.prototype.updateOtherFieldDataWhenTagremoved = /**
     * @private
     * @param {?} removedIndex
     * @return {?}
     */
    function (removedIndex) {
        var _this = this;
        /** @type {?} */
        var helpFields = Object.keys(this.mapFields);
        /** @type {?} */
        var textFieldIndex = helpFields.indexOf(this.textField);
        if (this.ngControl &&
            this.ngControl.formDirective &&
            this.ngControl.formDirective.form &&
            this.ngControl.formDirective.form.bindingData) {
            /** @type {?} */
            var bindingData_2 = this.ngControl.formDirective.form.bindingData;
            if (bindingData_2.setValue) {
                /** @type {?} */
                var bindingPath = this.ngControl.formDirective.form.bindingPath;
                /** @type {?} */
                var pathArr_1 = [];
                if (bindingPath) {
                    pathArr_1 = bindingPath.split("/").filter((/**
                     * @param {?} n
                     * @return {?}
                     */
                    function (n) { return n !== ""; }));
                }
                helpFields.forEach((/**
                 * @param {?} helpField
                 * @return {?}
                 */
                function (helpField) {
                    _this.mapFields[helpField]
                        .split(",")
                        .forEach((/**
                     * @param {?} formField
                     * @return {?}
                     */
                    function (formField) {
                        /** @type {?} */
                        var fieldPaths = pathArr_1.concat(formField.split("."));
                        /** @type {?} */
                        var val = bindingData_2.getValue(fieldPaths);
                        /** @type {?} */
                        var valArr = val.split(_this.multipleChoiceSeparator);
                        valArr.splice(removedIndex, 1);
                        /** @type {?} */
                        var newVal = valArr.join(_this.multipleChoiceSeparator);
                        bindingData_2.setValue(pathArr_1.concat(fieldPaths), newVal, true, true);
                    }));
                }));
            }
        }
        else {
            if (this.bindingData) {
                if (textFieldIndex > -1) {
                    helpFields.splice(textFieldIndex, 1);
                }
                helpFields.forEach((/**
                 * @param {?} helpField
                 * @return {?}
                 */
                function (helpField) {
                    _this.mapFields[helpField]
                        .split(",")
                        .forEach((/**
                     * @param {?} formField
                     * @return {?}
                     */
                    function (formField) {
                        /** @type {?} */
                        var val = _this.utils.getValue(formField, _this.bindingData);
                        /** @type {?} */
                        var valArr = val.split(_this.multipleChoiceSeparator);
                        valArr.splice(removedIndex, 1);
                        /** @type {?} */
                        var newVal = valArr.join(_this.multipleChoiceSeparator);
                        _this.utils.setValue(_this.bindingData, formField, newVal);
                    }));
                }));
            }
        }
    };
    //#endregion
    //#endregion
    /**
     * @param {?} $event
     * @return {?}
     */
    LookupGridComponent.prototype.onAllChildNodesClick = 
    //#endregion
    /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        this.isGetAllChidlNodes = !this.isGetAllChidlNodes;
    };
    /**
     * @param {?} val
     * @return {?}
     */
    LookupGridComponent.prototype.onIncludeSubordinatesChange = /**
     * @param {?} val
     * @return {?}
     */
    function (val) {
        this.includeSubordinates = val;
        this.includeSubordinates$.next(val);
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    LookupGridComponent.prototype.onTagContainerClick = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        $event.stopPropagation();
        if (this.tagInput) {
            this.tagInput.focus();
            this.tagInput.textbox.nativeElement.click();
        }
    };
    /**
     * @param {?} nodes
     * @return {?}
     */
    LookupGridComponent.prototype.expandFirstNode = /**
     * @param {?} nodes
     * @return {?}
     */
    function (nodes) {
        var _this = this;
        if (nodes && nodes.length) {
            return nodes.map((/**
             * @param {?} node
             * @return {?}
             */
            function (node) {
                if (node.children && node.children.length) {
                    node.expanded = true;
                    _this.expandFirstNode(node.children);
                }
                return node;
            }));
        }
        return nodes;
    };
    ;
    // 用于组织个性化数据key
    // 用于组织个性化数据key
    /**
     * @return {?}
     */
    LookupGridComponent.prototype.getLookupBindingFields = 
    // 用于组织个性化数据key
    /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.ngControl) {
            if (this.ngControl.name) {
                return this.ngControl.name;
            }
            else {
                if (this.mapFields && this.mapFields.length) {
                    return Object.keys(this.mapFields).map((/**
                     * @param {?} k
                     * @return {?}
                     */
                    function (k) {
                        return _this.mapFields[k];
                    })).join('_');
                }
                else {
                    return this.textField;
                }
            }
        }
        else {
            return '';
        }
    };
    LookupGridComponent.decorators = [
        { type: Component, args: [{
                    selector: "farris-lookup-grid",
                    template: "<!--\r\n * @Author: \u75AF\u72C2\u79C0\u624D(Lucas Huang)\r\n * @Date: 2019-06-16 13:44:59\r\n * @LastEditors: \u75AF\u72C2\u79C0\u624D(Lucas Huang)\r\n * @LastEditTime: 2019-11-18 08:47:32\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n -->\r\n\r\n <input-group #inputgroup\r\n    *ngIf=\"viewType === 'text'\"\r\n    [groupText]=\"groupIcon\"\r\n    [lookup-tip]= \"useTip\"\r\n    [(ngModel)]=\"displayText\"\r\n    [disabled]=\"disabled\"\r\n    [readonly]=\"readonly\"\r\n    [editable]=\"editable\"\r\n    [customCls]=\"'lookupbox'\"\r\n    [placeholder]=\"'lookup.placeholder' | locale: '\u8BF7\u9009\u62E9': placeholder\"\r\n    [enableClear]=\"enableClear\"\r\n    [useExtendInfo]=\"useExtendInfo\"\r\n    [extendInfo]=\"extendInfo\"\r\n    [maxLength]=\"maxLength\"\r\n    (updateExtendInfo)=\"onUpdateExtendInfo()\"\r\n    [textAlign]=\"textAlign\"\r\n    [value]=\"displayText\"\r\n    (valueChange)=\"onChanges($event)\"\r\n    (clickHandle)=\"showDialog()\"\r\n    (clear)=\"onClear()\"\r\n    [quick-select]=\"quickSelect\"\r\n></input-group>\r\n\r\n<!--Tag style-->\r\n<div #tagbox class=\"input-group\" [class.f-state-disabled]=\"disabled\" [class.f-state-readonly]=\"readonly\" *ngIf=\"viewType === 'tag'\" [attr.title]=\"displayText\">\r\n    <div class=\"form-control f-cmp-inputgroup--multi-wrapper multi-more\" style=\"height: auto; min-height: 24px;\">\r\n        <div class=\"multi--content d-flex flex-row\" style=\"width: 100%;flex-wrap: wrap;\" #tagContainer (click)=\"onTagContainerClick($event)\">\r\n            <span class=\"multi--item\" *ngFor=\"let txt of displayTextList; let index\" title=\"\" style=\"cursor: default;padding: 0 5px;\r\n            background: #ebf7fe;\r\n            border: 1px solid #cfedff;\r\n            position: relative;\r\n            padding-right: 20px;\r\n            margin-right: 3px;margin-top: 1px;height:18px; float: left;\">\r\n                {{txt}}\r\n                <i class=\"f-icon f-icon-close\" *ngIf=\"!readonly && !disabled\" style=\"cursor: pointer;position:absolute; right: 2px\" (click)=\"onRemoveSelectItem($event, txt)\"></i>\r\n            </span>\r\n\r\n            <span *ngIf=\"quickSelect && quickSelect.enable && !readonly && !disabled\" style=\"flex: 1;position: relative;min-width: 100px;height: 18px;margin: 0;padding: 0;float: left;overflow: hidden;\">\r\n                <!-- <input type=\"text\" style=\"border: 0;outline: none;width: 100px;\" #tagInput> -->\r\n                <input-group #tagInput style=\"position: absolute; top: 0px; height: 20px;align-items: center;display: flex;left: -8px; width: 100%\"\r\n                    [placeholder]=\"'lookup.placeholder' | locale: '\u8BF7\u9009\u62E9': placeholder\"\r\n                    [quick-select]=\"quickSelect\"  [enableClear]=\"false\" [noborder]=\"true\"\r\n                ></input-group>\r\n            </span>\r\n        </div>\r\n        <!-- <div class=\"multi--more\" *ngIf=\"selections && selections.length\">\r\n            <i class=\"f-icon multi--more-icon\"></i><span class=\"multi--more-text\">{{selections.length}}</span>\r\n        </div> -->\r\n    </div>\r\n    <div class=\"input-group-append\" style=\"position: relative;\" title=\"\" >\r\n        <span class=\"input-group-text input-group-clear\" style=\"display: none; padding: 0px 4px;position: absolute;right: 22px;height: 100%;\" (click)=\"onClear()\">\r\n            <i class=\"f-icon modal_close\"></i>\r\n        </span>\r\n        <span class=\"input-group-text\" (click)=\"showDialog()\">\r\n            <span class=\"f-icon f-icon-lookup\"></span>\r\n        </span>\r\n    </div>\r\n</div>\r\n\r\n\r\n<farris-dialog\r\n    #dialog\r\n    *ngIf=\"isShow\"\r\n    [draggable]=\"draggable\"\r\n    [resizable]=\"resizable\"\r\n    [title]=\"displayInfo.title\"\r\n    [beforeOpen]=\"beforeOpen\"\r\n    [beforeClose]=\"beforeClose\"\r\n    [(width)]=\"dialogWidth\"\r\n    [(height)]=\"dialogHeight\"\r\n    [showButtons]=\"showButtons\"\r\n    [showMaxButton]=\"showMaxButton\"\r\n    [showCloseButton]=\"true\"\r\n    [buttons]=\"buttonsRef || defaultButtonRef\"\r\n    [buttonAlign]=\"buttonAlign\"\r\n    [enableScroll]=\"false\"\r\n    [dialogHeaderHeight]=\"50\"\r\n    (maxed)=\"onMaxDialog($event)\"\r\n    (resized)=\"onResized($event)\"\r\n    (resizing)=\"onResizing($event)\"\r\n    [showHeader] = \"layoutFormat === 'default'\"\r\n    class=\"farris-lookup-dialog\"\r\n    [class.lookup-advanced]=\"layoutFormat === 'advanced'\"\r\n>\r\n\r\n\r\n    <div [ngStyle]=\"containerStyle\" style=\"height: 100%;\" >\r\n        <lookup-tabs (tabChange)=\"onTabChange($event)\" [enableFav]=\"useFavorite\" [activeTab]=\"activeTab\" \r\n            [visible]=\"isReady\" [dialogTitle]=\"displayInfo.title\" [layout]=\"layoutFormat\"\r\n            [enableSelected]=\"showSelected && !singleSelect\" [selectedTotal]=\"(currentSelectedItems | async)?.length\">\r\n            <div datalist class=\"d-flex f-utils-absolute-all \">   \r\n                <layout [direction]=\"'h'\" [fill]=\"true\" *ngIf=\"isDoublleList()\">\r\n                    <layout-panel #leftPanel [width]=\"leftPanelWidth\" region=\"west\" [minWidth]=\"10\" [showBorder]=\"false\" [overflow]=\"'hidden'\">\r\n                        <ng-container #leftContainer></ng-container>\r\n                    </layout-panel>\r\n                    <layout-panel region=\"center\" [showBorder]=\"false\" [overflow]=\"'hidden'\">\r\n                        <ng-container #centerContainer></ng-container>\r\n                    </layout-panel>\r\n                </layout>\r\n                \r\n                <ng-container *ngIf=\"!isDoublleList()\" #contentContainer></ng-container>\r\n            </div>\r\n            <div favorites  class=\"d-flex f-utils-all h-100\" *ngIf=\"useFavorite\"> \r\n                <ng-container #favoritesContainer></ng-container>\r\n            </div>\r\n            <div selected class=\"d-flex f-utils-all\" *ngIf=\"showSelected\" > \r\n                <farris-datatable #multiSelectDT\r\n                    [height]=\"gridOptions?.height\"\r\n                    [pagination]=\"false\" [fill]=\"true\"\r\n                    [columns]=\"selectedColumns\"\r\n                    [data]=\"currentSelectedItems | async\"\r\n                    [remoteSort]=\"false\"\r\n                    (cellClick)=\"multiSelMgr?.onSelectedTableCellClick($event)\"\r\n                >\r\n                </farris-datatable>\r\n            </div>\r\n        </lookup-tabs>\r\n\r\n    </div>\r\n</farris-dialog>\r\n\r\n<ng-template #defaultButtonRef>\r\n    \r\n    <div class=\"flex-fill\" style=\"text-align: left;\" *ngIf=\"isReady && enableCascade && displayType==='TREELIST' && singleSelect === false\">\r\n        <select *ngIf=\"showCascadeControl\" class=\"form-control\" style=\"width: auto; display: inline-block\" (ngModelChange)=\"ttEventMgr?.cascadeValueChanged($event)\" [ngModel]=\"cascadeStatus\" name=\"cascadeStatus\">\r\n            <option value=\"enable\" *ngIf=\"cascadeItems ? cascadeItems.enable : true\">{{ 'lookup.cascade.enable' | locale: '\u540C\u6B65\u9009\u62E9' }}</option>\r\n            <option value=\"up\" *ngIf=\"cascadeItems ? cascadeItems.up : true\">{{ 'lookup.cascade.up' | locale: '\u5305\u542B\u4E0A\u7EA7' }}</option>\r\n            <option value=\"down\" *ngIf=\"cascadeItems ? cascadeItems.down : true\">{{ 'lookup.cascade.down' | locale: '\u5305\u542B\u4E0B\u7EA7' }}</option>\r\n            <option value=\"disable\" *ngIf=\"cascadeItems ? cascadeItems.disable : true\">{{ 'lookup.cascade.disable' | locale: '\u4EC5\u9009\u62E9\u81EA\u8EAB' }}</option>\r\n        </select>\r\n\r\n        <div class=\"custom-control custom-checkbox custom-control-inline ml-3\" *ngIf=\"enableGetAllChildNodes\">\r\n            <input class=\"custom-control-input\" type=\"checkbox\" id=\"farris-lookup_get-all-child-nodes\">\r\n            <label class=\"custom-control-label btn-link\" for=\"farris-lookup_get-all-child-nodes\" style=\"padding-left: 18px;\"\r\n                (click)=\"onAllChildNodesClick($event)\">{{'lookup.getAllChilds'|locale: '\u83B7\u53D6\u6240\u6709\u5B50\u7EA7\u6570\u636E'}}</label>\r\n        </div>\r\n    </div>\r\n\r\n\r\n    <div class=\"flex-fill\" style=\"text-align: left;\" *ngIf=\"isReady && displayType==='NAVTREELIST' && activeTab === 'datalist' && showNavigation\">\r\n        <div class=\"custom-control custom-checkbox custom-control-inline\">\r\n            <input class=\"custom-control-input\" type=\"checkbox\" id=\"farris-lookup_get-all-child-nodes\" [ngModel]=\"includeSubordinates\" (ngModelChange)=\"onIncludeSubordinatesChange($event)\">\r\n            <label class=\"custom-control-label btn-link\" for=\"farris-lookup_get-all-child-nodes\" style=\"padding-left: 18px;\">{{ 'lookup.cascade.down' | locale: '\u5305\u542B\u4E0B\u7EA7' }}</label>\r\n        </div>\r\n    </div>\r\n\r\n\r\n    <button type=\"button\" class=\"btn btn-secondary btn-lg\" (click)=\"cancelSelect()\" [disabled]=\"!(isReady || hasError)\" >\r\n        {{ 'lookup.cancelText' | locale: '\u53D6\u6D88' }}\r\n    </button>\r\n    <button #okbtn type=\"button\" [disabled]=\"!isReady\"  class=\"btn btn-primary btn-lg\" (click)=\"selectItem()\" >\r\n        {{ 'lookup.okText' | locale: '\u786E\u5B9A' }}\r\n    </button>\r\n   \r\n    \r\n</ng-template>\r\n",
                    providers: [
                        LOOKUPGRID_VALUE_ACCESSOR,
                        ShortcutsService,
                        LookupDefaultMapping,
                        LookupUtils,
                        PersonalConfigService,
                    ],
                    encapsulation: ViewEncapsulation.None,
                    exportAs: "lookup",
                    styles: [".input-group{flex-wrap:nowrap}.ng-dirty.ng-invalid>input-group>.lookupbox{border-color:#ff0303}.lookup-clear{cursor:pointer;background:#fff!important}.lookup-clear:hover{background:#e9ecef!important}.f-lookup-favorite{cursor:pointer;color:#ff9800}.f-lookup-unfavorite{cursor:pointer;color:#dd2438}.lookup-tip{position:absolute;min-width:200px;max-height:400px;padding:.25rem 0;z-index:7777;background:#fff;box-shadow:0 2px 8px 0 rgba(0,0,0,.15);border-radius:2px}.lookup-tip .lookup-tip-header{font-weight:700;padding:.25rem .475rem;border-radius:0}.lookup-tip ul{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;padding-left:0;margin-bottom:0}.lookup-tip ul li{position:relative;display:block;width:100%;margin-bottom:-1px;padding:.25rem .875rem;color:rgba(0,0,0,.85);background-color:#fff;cursor:pointer}.lookup-tip ul li:hover{background-color:#e6f7ff}.f-lookup_quick-panel{height:100%;z-index:10001;position:absolute;overflow:auto;background:#fff;margin-top:.25rem;box-shadow:0 2px 8px 0 #dedede;border-radius:3px}.f-lookup_quick-panel .list{margin:0 6px}.f-lookup_quick-panel .list-group-item{padding:0 8px;border:0;margin-bottom:0;word-break:break-all;min-height:30px}.f-lookup_quick-panel .more{height:50px;text-align:center;line-height:50px}.f-lookup_quick-panel .norecord{height:100%;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;display:-webkit-box;display:flex;font-size:16px;color:#bec6db}.lookup-advanced .lookup-tabs-content{border-top:0!important}.lookup-advanced .modal-footer{padding-bottom:20px}.lookup-advanced .farris-datatable-container,.lookup-advanced .farris-treetable{border:1px solid #e9ecf3;border-radius:8px;overflow:hidden}"]
                }] }
    ];
    /** @nocollapse */
    LookupGridComponent.ctorParameters = function () { return [
        { type: Injector },
        { type: ComponentFactoryResolver },
        { type: ElementRef },
        { type: CommonUtils },
        { type: LookupDefaultMapping },
        { type: ChangeDetectorRef },
        { type: ShortcutsService },
        { type: LookupUtils },
        { type: NgZone },
        { type: Renderer2 }
    ]; };
    LookupGridComponent.propDecorators = {
        customDisplayType: [{ type: Input }],
        viewType: [{ type: Input }],
        displayType: [{ type: Input }],
        enableClear: [{ type: Input }],
        remoteSort: [{ type: Input }],
        condition: [{ type: Input }],
        showCheckAll: [{ type: Input }],
        singleSelect: [{ type: Input }],
        multipleChoiceSeparator: [{ type: Input }],
        idField: [{ type: Input }],
        uri: [{ type: Input }],
        beUri: [{ type: Input }],
        showFilterBar: [{ type: Input }],
        pagination: [{ type: Input }],
        pageIndex: [{ type: Input }],
        pageSize: [{ type: Input }],
        pageList: [{ type: Input }],
        total: [{ type: Input }],
        columns: [{ type: Input }],
        remoteSearch: [{ type: Input }],
        searchOnServer: [{ type: Input }],
        nosearch: [{ type: Input }],
        clearMappings: [{ type: Output }],
        maxLength: [{ type: Input }],
        mappingFn: [{ type: Input }],
        items: [{ type: Input }],
        favoriteItems: [{ type: Input }],
        customData: [{ type: Input }],
        bindingData: [{ type: Input }],
        treeInfo: [{ type: Input }],
        enableCascade: [{ type: Input }],
        cascadeStatus: [{ type: Input }],
        cascadeItems: [{ type: Input }],
        showCascadeControl: [{ type: Input }],
        placeholder: [{ type: Input }],
        showSelected: [{ type: Input }],
        useFavorite: [{ type: Input }],
        favoriteDataFrom: [{ type: Input }],
        useTip: [{ type: Input }],
        isRecordSize: [{ type: Input }],
        userId: [{ type: Input }],
        enableToSelect: [{ type: Input }],
        enableFindText: [{ type: Input }],
        expandLevel: [{ type: Input }],
        navTreeTableOptions: [{ type: Input }],
        treeTableOptions: [{ type: Input }],
        dataTableOptions: [{ type: Input }],
        loadTreeDataType: [{ type: Input }],
        loadDataWhenOpen: [{ type: Input }],
        navSelectedIds: [{ type: Input }],
        selectFirstInNav: [{ type: Input }],
        enableFullTree: [{ type: Input }],
        displayFormatter: [{ type: Input }],
        displayFields: [{ type: Input }],
        displayTextSeparator: [{ type: Input }],
        helpId: [{ type: Input }],
        textAlign: [{ type: Input }],
        enableTitle: [{ type: Input }],
        useExtendInfo: [{ type: Input }],
        extInfoFields: [{ type: Input }],
        extInfoFormatter: [{ type: Input }],
        extendInfo: [{ type: Input }],
        customFormatter: [{ type: Input }],
        customNavFormatter: [{ type: Input }],
        okHandler: [{ type: Input }],
        cancelHandler: [{ type: Input }],
        tagboxHeight: [{ type: Input }],
        maxTagboxHeight: [{ type: Input }],
        enableGetAllChildNodes: [{ type: Input }],
        shortcutKey: [{ type: Input }],
        quickSelect: [{ type: Input }],
        treeToList: [{ type: Input }],
        navTreeToList: [{ type: Input }],
        showNavigation: [{ type: Input }],
        beforeSelectData: [{ type: Input }],
        layoutFormat: [{ type: Input }],
        selectedData: [{ type: Output }],
        clear: [{ type: Output }],
        search: [{ type: Output }],
        valueChanged: [{ type: Output }],
        loadSuccess: [{ type: Output }],
        pagerChanged: [{ type: Output }],
        expandTreeNode: [{ type: Output }],
        textChanged: [{ type: Output }],
        checkedChange: [{ type: Output }],
        tagRemoved: [{ type: Output }],
        gridOptions: [{ type: Input }],
        contentContainer: [{ type: ViewChild, args: ["contentContainer", { read: ViewContainerRef },] }],
        favoritesContainer: [{ type: ViewChild, args: ["favoritesContainer", { read: ViewContainerRef },] }],
        leftContainer: [{ type: ViewChild, args: ["leftContainer", { read: ViewContainerRef },] }],
        centerContainer: [{ type: ViewChild, args: ["centerContainer", { read: ViewContainerRef },] }],
        multiSelectDT: [{ type: ViewChild, args: ["multiSelectDT",] }],
        inputGroup: [{ type: ViewChild, args: ["inputgroup",] }],
        leftPanel: [{ type: ViewChild, args: ["leftPanel",] }],
        tagbox: [{ type: ViewChild, args: ["tagbox",] }],
        okButton: [{ type: ViewChild, args: ["okbtn",] }],
        tagInput: [{ type: ViewChild, args: ["tagInput",] }]
    };
    return LookupGridComponent;
}(LookupComponent));
export { LookupGridComponent };
if (false) {
    /** @type {?} */
    LookupGridComponent.prototype.groupIcon;
    /** @type {?} */
    LookupGridComponent.prototype._displayType;
    /**
     * 使用表单设计器中的显示类型。否则使用元数据设置的显示类型。 默认：false
     * @type {?}
     */
    LookupGridComponent.prototype.customDisplayType;
    /** @type {?} */
    LookupGridComponent.prototype.viewType;
    /**
     * 启用清空按钮
     * @type {?}
     */
    LookupGridComponent.prototype.enableClear;
    /**
     * 服务器端排序
     * @type {?}
     */
    LookupGridComponent.prototype.remoteSort;
    /** @type {?} */
    LookupGridComponent.prototype.condition;
    /**
     * 树表显示全选复选框。 默认不显示
     * @type {?}
     */
    LookupGridComponent.prototype.showCheckAll;
    /**
     * 是否启用多选
     * @type {?}
     */
    LookupGridComponent.prototype.singleSelect;
    /**
     * 多选分隔符
     * @type {?}
     */
    LookupGridComponent.prototype.multipleChoiceSeparator;
    /**
     * 主键字段
     * @type {?}
     */
    LookupGridComponent.prototype.idField;
    /**
     * 可以为元数据ID、webapiURL
     * @type {?}
     */
    LookupGridComponent.prototype.uri;
    /**
     * BE REST RUI
     * - 此处设置后 uri 失效
     * @type {?}
     */
    LookupGridComponent.prototype.beUri;
    /**
     * 显示过滤工具条
     * @type {?}
     */
    LookupGridComponent.prototype.showFilterBar;
    /**
     * 是否启用分页
     * @type {?}
     */
    LookupGridComponent.prototype.pagination;
    /**
     * 当前页索引，从 0开始
     * @type {?}
     */
    LookupGridComponent.prototype.pageIndex;
    /**
     * 每页记录数
     * @type {?}
     */
    LookupGridComponent.prototype.pageSize;
    /**
     * 可用分页记录数列表
     * @type {?}
     */
    LookupGridComponent.prototype.pageList;
    /**
     * 总记录数
     * @type {?}
     */
    LookupGridComponent.prototype.total;
    /**
     * 显示列信息, 默认为 []
     * @type {?}
     */
    LookupGridComponent.prototype.columns;
    /**
     * 帮助查询是否为远端查询
     * @type {?}
     */
    LookupGridComponent.prototype.remoteSearch;
    /**
     * 文本变化后，进行服务器端查询
     * @type {?}
     */
    LookupGridComponent.prototype.searchOnServer;
    /**
     * 不进行服务器查询，有啥算啥
     * @type {?}
     */
    LookupGridComponent.prototype.nosearch;
    /**
     * 启用任意输入后，值通过输入时触发
     * @type {?}
     */
    LookupGridComponent.prototype.clearMappings;
    /**
     * 允许输入的字符最大长度。
     * 任意输入时，此属性有效
     * @type {?}
     */
    LookupGridComponent.prototype.maxLength;
    /** @type {?} */
    LookupGridComponent.prototype.mappingFn;
    /**
     * 数据列表
     * @type {?}
     */
    LookupGridComponent.prototype.items;
    /** @type {?} */
    LookupGridComponent.prototype.favoriteItems;
    /**
     * 自定义数据
     * @type {?}
     */
    LookupGridComponent.prototype.customData;
    /**
     * 绑定值所在的对象
     * @type {?}
     */
    LookupGridComponent.prototype.bindingData;
    /** @type {?} */
    LookupGridComponent.prototype.treeInfo;
    /**
     * 是否启用级联选择控制选项
     * @type {?}
     */
    LookupGridComponent.prototype.enableCascade;
    /**
     * 级联控制默认值： enable: 同步选择, up：包含上级, down：包含下级, disable：仅选择自身
     * @type {?}
     */
    LookupGridComponent.prototype.cascadeStatus;
    /**
     * 分别级联选项的启用状态，默认全部启用
     * @type {?}
     */
    LookupGridComponent.prototype.cascadeItems;
    /**
     * 显示级联控制
     * @type {?}
     */
    LookupGridComponent.prototype.showCascadeControl;
    /** @type {?} */
    LookupGridComponent.prototype.placeholder;
    /**
     * 显示已选记录列表。 默认为 false 不显示
     * @type {?}
     */
    LookupGridComponent.prototype.showSelected;
    /**
     * 应用收藏夹
     * @type {?}
     */
    LookupGridComponent.prototype.useFavorite;
    /**
     * 收藏数据来自于： locale: 本地存储， remote: 服务器端存储
     * @type {?}
     */
    LookupGridComponent.prototype.favoriteDataFrom;
    /**
     * 使用提示,快捷选择
     * @type {?}
     */
    LookupGridComponent.prototype.useTip;
    /**
     * 记录窗口大小
     * @type {?}
     */
    LookupGridComponent.prototype.isRecordSize;
    /**
     * 快速选择
     * @type {?}
     */
    LookupGridComponent.prototype.userId;
    /**
     * 是否启用选中value值对应的行数据，默认 true
     * @type {?}
     */
    LookupGridComponent.prototype.enableToSelect;
    /** @type {?} */
    LookupGridComponent.prototype.enableFindText;
    /**
     * -1: 不展开； 0: 全部展开；>0: 展开到指定级数
     * @type {?}
     */
    LookupGridComponent.prototype.expandLevel;
    /** @type {?} */
    LookupGridComponent.prototype.navTreeTableOptions;
    /** @type {?} */
    LookupGridComponent.prototype.treeTableOptions;
    /** @type {?} */
    LookupGridComponent.prototype.dataTableOptions;
    /** @type {?} */
    LookupGridComponent.prototype.defaultTreeTableOptions;
    /**
     * 树形帮助数据加载方式： default: 内置取数； loadall: 加载所有 layerload：分层加载
     * @type {?}
     */
    LookupGridComponent.prototype.loadTreeDataType;
    /**
     * 窗口打开后立即加载数据，默认为 true
     * @type {?}
     */
    LookupGridComponent.prototype.loadDataWhenOpen;
    /**
     * 导航列表，树列表在帮助打开后选中的数据;
     * 设置后，`selectFirstInNav` 失效！
     * @type {?}
     */
    LookupGridComponent.prototype.navSelectedIds;
    /**
     * 导航帮助，选中第1条数据，默认为 false;
     * 注意：当`navSelectedIds`不为空时，此属性失效。
     * @type {?}
     */
    LookupGridComponent.prototype.selectFirstInNav;
    /**
     * 启用构造完整树过滤
     * @type {?}
     */
    LookupGridComponent.prototype.enableFullTree;
    /**
     * 显示文本自定义函数
     * @type {?}
     */
    LookupGridComponent.prototype.displayFormatter;
    /**
     * 显示文本字段集合，以 英文 逗号隔开
     * @type {?}
     */
    LookupGridComponent.prototype.displayFields;
    /** @type {?} */
    LookupGridComponent.prototype.displayTextSeparator;
    /**
     * 帮助元数据ID，不为空时调用指定的URI
     * /api/runtime/bcc/v1.0/help/data/{helpId}
     * @type {?}
     */
    LookupGridComponent.prototype.helpId;
    /**
     * 文本对齐方式； left | center | right; 默认 left
     * @type {?}
     */
    LookupGridComponent.prototype.textAlign;
    /**
     * 鼠标滑过输入框时显示输入框内的文本信息
     * @type {?}
     */
    LookupGridComponent.prototype.enableTitle;
    /** @type {?} */
    LookupGridComponent.prototype.useExtendInfo;
    /** @type {?} */
    LookupGridComponent.prototype.extInfoFields;
    /** @type {?} */
    LookupGridComponent.prototype.extInfoFormatter;
    /** @type {?} */
    LookupGridComponent.prototype.extendInfo;
    /**
     * IDE 设计器自定义格式化 2103
     * @type {?}
     */
    LookupGridComponent.prototype.customFormatter;
    /** @type {?} */
    LookupGridComponent.prototype.customNavFormatter;
    /**
     * 自定义确定事件
     * @type {?}
     */
    LookupGridComponent.prototype.okHandler;
    /**
     * 自定义取消事件
     * @type {?}
     */
    LookupGridComponent.prototype.cancelHandler;
    /** @type {?} */
    LookupGridComponent.prototype.tagboxHeight;
    /** @type {?} */
    LookupGridComponent.prototype.maxTagboxHeight;
    /**
     * 启用获取所有子级数据的功能
     * @type {?}
     */
    LookupGridComponent.prototype.enableGetAllChildNodes;
    /** @type {?} */
    LookupGridComponent.prototype.shortcutKey;
    /**
     * 快捷选择相关配置项，默认为 null, 即不启用此功能
     * @type {?}
     */
    LookupGridComponent.prototype.quickSelect;
    /**
     * 树形帮助 是否使用树形结构数据。默认为 true, 当为 false 时，服务器端无须构造树形结构，按普通列表输出
     * @type {?}
     */
    LookupGridComponent.prototype.treeToList;
    /** @type {?} */
    LookupGridComponent.prototype.navTreeToList;
    /**
     * 带导航的帮助中，是否显示左侧导航部分。默认 true
     * @type {?}
     */
    LookupGridComponent.prototype.showNavigation;
    /**
     * 数据选择后，值映射前触发
     * 返回 Observable
     *      canSelect: <boolean>  是否允许选择
     *      message: <string> 不允许选择时的提示信息
     * @type {?}
     */
    LookupGridComponent.prototype.beforeSelectData;
    /** @type {?} */
    LookupGridComponent.prototype.layoutFormat;
    /** @type {?} */
    LookupGridComponent.prototype.selectedData;
    /** @type {?} */
    LookupGridComponent.prototype.clear;
    /** @type {?} */
    LookupGridComponent.prototype.search;
    /** @type {?} */
    LookupGridComponent.prototype.valueChanged;
    /** @type {?} */
    LookupGridComponent.prototype.loadSuccess;
    /** @type {?} */
    LookupGridComponent.prototype.pagerChanged;
    /** @type {?} */
    LookupGridComponent.prototype.expandTreeNode;
    /** @type {?} */
    LookupGridComponent.prototype.textChanged;
    /** @type {?} */
    LookupGridComponent.prototype.checkedChange;
    /** @type {?} */
    LookupGridComponent.prototype.tagRemoved;
    /**
     * 内容中留白边距
     * @type {?}
     */
    LookupGridComponent.prototype.containerMargin;
    /** @type {?} */
    LookupGridComponent.prototype.containerStyle;
    /** @type {?} */
    LookupGridComponent.prototype._gridOptions;
    /** @type {?} */
    LookupGridComponent.prototype.contentContainer;
    /** @type {?} */
    LookupGridComponent.prototype.favoritesContainer;
    /** @type {?} */
    LookupGridComponent.prototype.leftContainer;
    /** @type {?} */
    LookupGridComponent.prototype.centerContainer;
    /** @type {?} */
    LookupGridComponent.prototype.multiSelectDT;
    /** @type {?} */
    LookupGridComponent.prototype.inputGroup;
    /** @type {?} */
    LookupGridComponent.prototype.leftPanel;
    /** @type {?} */
    LookupGridComponent.prototype.tagbox;
    /** @type {?} */
    LookupGridComponent.prototype.okButton;
    /** @type {?} */
    LookupGridComponent.prototype.tagInput;
    /** @type {?} */
    LookupGridComponent.prototype.componentRef;
    /** @type {?} */
    LookupGridComponent.prototype.leftComponentRef;
    /** @type {?} */
    LookupGridComponent.prototype.favoritesComponentRef;
    /** @type {?} */
    LookupGridComponent.prototype.http;
    /** @type {?} */
    LookupGridComponent.prototype.messagerService;
    /** @type {?} */
    LookupGridComponent.prototype.loadingService;
    /** @type {?} */
    LookupGridComponent.prototype.loading;
    /** @type {?} */
    LookupGridComponent.prototype.navigationOptions;
    /** @type {?} */
    LookupGridComponent.prototype.leftPanelWidth;
    /** @type {?} */
    LookupGridComponent.prototype.navLookupDialogMinWidth;
    /** @type {?} */
    LookupGridComponent.prototype.navigationFilter;
    /** @type {?} */
    LookupGridComponent.prototype.subscriptions;
    /** @type {?} */
    LookupGridComponent.prototype.dialogOpenedSubscription;
    /** @type {?} */
    LookupGridComponent.prototype.dialogClosedSubscription;
    /** @type {?} */
    LookupGridComponent.prototype.isTextChange;
    /** @type {?} */
    LookupGridComponent.prototype.isTabChanged;
    /** @type {?} */
    LookupGridComponent.prototype.displayInfo;
    /** @type {?} */
    LookupGridComponent.prototype.tabChangeSubscription;
    /** @type {?} */
    LookupGridComponent.prototype.personalConf;
    /** @type {?} */
    LookupGridComponent.prototype.favoriteColumns;
    /**
     * 临时查询参数
     * @type {?}
     */
    LookupGridComponent.prototype._searchState;
    /** @type {?} */
    LookupGridComponent.prototype.allData;
    /** @type {?} */
    LookupGridComponent.prototype.personalConfigService;
    /** @type {?} */
    LookupGridComponent.prototype.utilService;
    /** @type {?} */
    LookupGridComponent.prototype.treeNodeHelper;
    /** @type {?} */
    LookupGridComponent.prototype.localService;
    /** @type {?} */
    LookupGridComponent.prototype.notifyService;
    /** @type {?} */
    LookupGridComponent.prototype.allColumnsTitle;
    /** @type {?} */
    LookupGridComponent.prototype.mustWriteSomething;
    /** @type {?} */
    LookupGridComponent.prototype.mustChoosAdatarow;
    /** @type {?} */
    LookupGridComponent.prototype.addFavoriteSuccess;
    /** @type {?} */
    LookupGridComponent.prototype.delFavoriteSuccess;
    /**
     * 使用内置的查询方法, 默认 false
     * @type {?}
     */
    LookupGridComponent.prototype.useInsideSearchHandler;
    /** @type {?} */
    LookupGridComponent.prototype.searching;
    /**
     * 临时存储查询结果集
     * @type {?}
     */
    LookupGridComponent.prototype._searchResult;
    /** @type {?} */
    LookupGridComponent.prototype.lookupinitializationSubject;
    /**
     * 多选时，选中的数据
     * @type {?}
     */
    LookupGridComponent.prototype.currentSelectedItems;
    /**
     * 已选数据列信息
     * @type {?}
     */
    LookupGridComponent.prototype.selectedColumns;
    /** @type {?} */
    LookupGridComponent.prototype.activeTab;
    /** @type {?} */
    LookupGridComponent.prototype.favHelper;
    /** @type {?} */
    LookupGridComponent.prototype.ttEventMgr;
    /** @type {?} */
    LookupGridComponent.prototype.multiSelMgr;
    /** @type {?} */
    LookupGridComponent.prototype.httpMgr;
    /** @type {?} */
    LookupGridComponent.prototype.lookupCmpMgr;
    /** @type {?} */
    LookupGridComponent.prototype.dialogMgr;
    /** @type {?} */
    LookupGridComponent.prototype.selectionMgr;
    /** @type {?} */
    LookupGridComponent.prototype.dtEventMgr;
    /** @type {?} */
    LookupGridComponent.prototype.lookupSelectionSer;
    /** @type {?} */
    LookupGridComponent.prototype.controlId;
    /** @type {?} */
    LookupGridComponent.prototype.savingFaoriteData;
    /** @type {?} */
    LookupGridComponent.prototype.isReady;
    /** @type {?} */
    LookupGridComponent.prototype.showTagboxClearButton;
    /** @type {?} */
    LookupGridComponent.prototype.hasError;
    /** @type {?} */
    LookupGridComponent.prototype.isGetAllChidlNodes;
    /** @type {?} */
    LookupGridComponent.prototype.eventManager;
    /**
     * 选中记录ID，自定义帮助取数时使用
     * @type {?}
     */
    LookupGridComponent.prototype.selectedIds;
    /**
     * @type {?}
     * @private
     */
    LookupGridComponent.prototype.lookupSearchInputEvent;
    /**
     * @type {?}
     * @private
     */
    LookupGridComponent.prototype.farrisInstances;
    /**
     * 用户初始设置
     * @type {?}
     * @private
     */
    LookupGridComponent.prototype._userSettings;
    /** @type {?} */
    LookupGridComponent.prototype._treeInfo_;
    /**
     * dialog 内容区域高度。 弹窗总高度 - 头部高度 - 脚部高度 - （启用收藏 TAB头高度）
     * @type {?}
     */
    LookupGridComponent.prototype.dialogContentHeight;
    /**
     * 左树右列表， 左树点击节点查询时是否包括下级节点的数据，默认 false
     * @type {?}
     */
    LookupGridComponent.prototype.includeSubordinates;
    /** @type {?} */
    LookupGridComponent.prototype.includeSubordinates$;
    /** @type {?} */
    LookupGridComponent.prototype.includeSubordinates$$;
    /** @type {?} */
    LookupGridComponent.prototype.overLayService;
    /**
     * @type {?}
     * @private
     */
    LookupGridComponent.prototype.debugSer;
    /** @type {?} */
    LookupGridComponent.prototype.injector;
    /** @type {?} */
    LookupGridComponent.prototype.cfr;
    /** @type {?} */
    LookupGridComponent.prototype.el;
    /** @type {?} */
    LookupGridComponent.prototype.utils;
    /**
     * @type {?}
     * @private
     */
    LookupGridComponent.prototype.defaultMapping;
    /** @type {?} */
    LookupGridComponent.prototype.changeDetector;
    /** @type {?} */
    LookupGridComponent.prototype.shortcuts;
    /** @type {?} */
    LookupGridComponent.prototype.lookupUtils;
    /**
     * @type {?}
     * @private
     */
    LookupGridComponent.prototype.zone;
    /** @type {?} */
    LookupGridComponent.prototype.render2;
    /* Skipping unhandled member: ;*/
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9va3VwLWdyaWQuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy91aS1sb29rdXAvIiwic291cmNlcyI6WyJsaWIvbG9va3VwLWdyaWQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFTQSxPQUFPLEVBQUMsU0FBUyxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQ25DLFlBQVksRUFBUSxRQUFRLEVBQUMsd0JBQXdCLEVBQ3JELE1BQU0sRUFBQyxpQkFBaUIsRUFBQyxpQkFBaUIsRUFBZSxnQkFBZ0IsRUFDekUsVUFBVSxFQUFtQixVQUFVLEVBQUMsTUFBTSxFQUFDLFNBQVMsR0FBeUIsTUFBTSxlQUFlLENBQUM7QUFFdkcsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDbkQsT0FBTyxFQUE0QixFQUFFLEVBQUUsT0FBTyxFQUFtQixNQUFNLE1BQU0sQ0FBQztBQUU5RSxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFFbEQsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ3RELE9BQU8sRUFBRSxjQUFjLEVBQW9CLE1BQU0sb0JBQW9CLENBQUM7QUFDdEUsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFDMUQsT0FBTyxFQUFFLGtCQUFrQixFQUFZLE1BQU0sc0JBQXNCLENBQUM7QUFDcEUsT0FBTyxFQUFFLG9CQUFvQixFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDekQsT0FBTyxFQUFFLFdBQVcsRUFBRSxZQUFZLEVBQUUsOEJBQThCLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUVwSCxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUN4RCxPQUFPLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUM3RCxPQUFPLEVBQUUsYUFBYSxF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MkI7Ozs7O0lBRTNCLDBDQUFpQjs7Ozs7SUFDakIscURBQXNDOzs7OztJQUN0Qyw4Q0FBK0Q7Ozs7OztJQUUvRCw0Q0FBZ0M7O0lBTWhDLHlDQUFrQjs7Ozs7SUFHbEIsa0RBQXdCOzs7OztJQUV4QixrREFBNEI7O0lBQzVCLG1EQUFxQzs7SUFDckMsb0RBQTJDOztJQUMzQyw2Q0FBcUM7Ozs7O0lBQ3JDLHVDQUFzQzs7SUFHbEMsdUNBQXlCOztJQUN6QixrQ0FBb0M7O0lBQ3BDLGlDQUFxQjs7SUFDckIsb0NBQXlCOzs7OztJQUN6Qiw2Q0FBNEM7O0lBQzVDLDZDQUF3Qzs7SUFDeEMsd0NBQWtDOztJQUNsQywwQ0FBK0I7Ozs7O0lBQy9CLG1DQUFvQjs7SUFDcEIsc0NBQXlCIiwic291cmNlc0NvbnRlbnQiOlsiLypcclxuICogQEF1dGhvcjog55av54uC56eA5omNKGx1Y2FzIGh1YW5nKVxyXG4gKiBARGF0ZTogMjAxOC0xMS0yMyAxMToyMzoxMlxyXG4gKiBATGFzdEVkaXRvcnM6IOeWr+eLguengOaJjShMdWNhcyBIdWFuZylcclxuICogQExhc3RFZGl0VGltZTogMjAyMC0xMC0yMCAyMDoxODoyNlxyXG4gKiBAQ29tcGFueTogSW5zcHVyXHJcbiAqIEBWZXJzaW9uOiB2MC4zLnhcclxuICovXHJcblxyXG5pbXBvcnQge0NvbXBvbmVudCwgSW5wdXQsIFZpZXdDaGlsZCwgT25DaGFuZ2VzLCBTaW1wbGVDaGFuZ2VzLFxyXG5FdmVudEVtaXR0ZXIsT25Jbml0LEluamVjdG9yLENvbXBvbmVudEZhY3RvcnlSZXNvbHZlcixcclxuT3V0cHV0LENoYW5nZURldGVjdG9yUmVmLFZpZXdFbmNhcHN1bGF0aW9uLEFmdGVyVmlld0luaXQsVmlld0NvbnRhaW5lclJlZixcclxuZm9yd2FyZFJlZixDb21wb25lbnRSZWYsVHlwZSxFbGVtZW50UmVmLE5nWm9uZSxSZW5kZXJlcjIsT25EZXN0cm95LEhvc3RMaXN0ZW5lcix9IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XHJcblxyXG5pbXBvcnQgeyBOR19WQUxVRV9BQ0NFU1NPUiB9IGZyb20gXCJAYW5ndWxhci9mb3Jtc1wiO1xyXG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBTdWJzY3JpcHRpb24sIG9mLCBTdWJqZWN0LCBCZWhhdmlvclN1YmplY3QgfSBmcm9tIFwicnhqc1wiO1xyXG5cclxuaW1wb3J0IHsgTG9jYWxlU2VydmljZSB9IGZyb20gXCJAZmFycmlzL3VpLWxvY2FsZVwiO1xyXG5pbXBvcnQgeyBJUmVzaXplRXZlbnQgfSBmcm9tIFwiQGZhcnJpcy91aS1kcmFnZ2FibGVcIjtcclxuaW1wb3J0IHsgTWVzc2FnZXJTZXJ2aWNlIH0gZnJvbSBcIkBmYXJyaXMvdWktbWVzc2FnZXJcIjtcclxuaW1wb3J0IHsgTG9hZGluZ1NlcnZpY2UsIExvYWRpbmdDb21wb25lbnQgfSBmcm9tIFwiQGZhcnJpcy91aS1sb2FkaW5nXCI7XHJcbmltcG9ydCB7IERhdGFUYWJsZUNvbXBvbmVudCB9IGZyb20gXCJAZmFycmlzL3VpLWRhdGF0YWJsZVwiO1xyXG5pbXBvcnQgeyBUcmVlVGFibGVDb21wb25lbnQsIFRyZWVOb2RlIH0gZnJvbSBcIkBmYXJyaXMvdWktdHJlZXRhYmxlXCI7XHJcbmltcG9ydCB7IExheW91dFBhbmVsQ29tcG9uZW50IH0gZnJvbSBcIkBmYXJyaXMvdWktbGF5b3V0XCI7XHJcbmltcG9ydCB7IENvbW1vblV0aWxzLCBEZWJ1Z1NlcnZpY2UsIEZhcnJpc0NvbXBvbmVudEluc3RhbmNlU2VydmljZSwgT3ZlckxheUhpZGRlblNlcnZpY2UgfSBmcm9tIFwiQGZhcnJpcy91aS1jb21tb25cIjtcclxuaW1wb3J0IHsgRW50aXR5RmlsdGVyIH0gZnJvbSBcIkBmYXJyaXMvdWktY29tbW9uL3R5cGVzXCI7XHJcbmltcG9ydCB7IFNob3J0Y3V0c1NlcnZpY2UgfSBmcm9tIFwiQGZhcnJpcy91aS1zaG9ydGN1dHNcIjtcclxuaW1wb3J0IHsgSW5wdXRHcm91cENvbXBvbmVudCB9IGZyb20gXCJAZmFycmlzL3VpLWlucHV0LWdyb3VwXCI7XHJcbmltcG9ydCB7IE5vdGlmeVNlcnZpY2UgfSBmcm9tIFwiQGZhcnJpcy91aS1ub3RpZnlcIjtcclxuXHJcbmltcG9ydCB7XHJcbiAgICBGQVZPUklURV9GSUVMRF9OQU1FLFxyXG4gICAgSU5QVVRfR1JPVVBfSUNPTixcclxuICAgIExvb2t1cEdyaWREaXNwbGF5VHlwZSxcclxuICAgIEV4dEluZm9Gb3JtYXR0ZXIsXHJcbiAgICBDdXN0b21EYXRhRm9ybWF0dGVyLFxyXG4gICAgUXVpY2tTZWxlY3RPcHRpb24sXHJcbiAgICBRdWlja1NlbGVjdERlZmF1bHRPcHRpb25zLFxyXG59IGZyb20gXCIuL2xvb2t1cC1kaXNwbGF5dHlwZVwiO1xyXG5pbXBvcnQgeyBMb29rdXBDb21wb25lbnQgfSBmcm9tIFwiLi9sb29rdXAuY29tcG9uZW50XCI7XHJcbmltcG9ydCB7XHJcbiAgICBMb29rdXBHcmlkT3B0aW9ucyxcclxuICAgIGxvb2t1cEdyaWREZWZhdWx0cyxcclxuICAgIExvb2t1cEdyaWRSZXN1bHQsXHJcbiAgICBOYXZpZ2F0aW9uT3B0aW9ucyxcclxuICAgIERpc3BsYXlJbmZvLFxyXG4gICAgZGlzcGxheUluZm9EZWZhdWx0LFxyXG4gICAgUGlja2luZ1Jlc3VsdCxcclxuICAgIFRyZWVJbmZvLFxyXG4gICAgTE9BRF9EQVRBX1RZUEUsXHJcbiAgICBPTkxZX1NFTEVDVF9MRUFGLFxyXG4gICAgUGVyc29uYWxDb25maWcsXHJcbiAgICBMb29rdXBMYXlvdXQsXHJcbn0gZnJvbSBcIi4vbG9va3VwLWdyaWQtb3B0aW9uc1wiO1xyXG5pbXBvcnQgeyBJTG9va3VwSHR0cFNlcnZpY2UsIFNlcnZlclNpZGVUb2tlbiB9IGZyb20gXCIuL2h0dHAvSUxvb2t1cEh0dHBTZXJ2aWNlXCI7XHJcbmltcG9ydCB7IE5hdmlnYXRpb25GaWx0ZXIgfSBmcm9tIFwiLi9odHRwL1JlbW90ZVBhcmFtc1wiO1xyXG5pbXBvcnQgeyBMb29rdXBMZWZ0Q29tcG9uZW50IH0gZnJvbSBcIi4vbG9va3VwLWxlZnQuY29tcG9uZW50XCI7XHJcbmltcG9ydCB7IExvb2t1cERlZmF1bHRNYXBwaW5nIH0gZnJvbSBcIi4vbG9va3VwLWRlZmF1dC1tYXBwaW5nXCI7XHJcbmltcG9ydCB7IExvb2t1cFV0aWxzIH0gZnJvbSBcIi4vdXRpbHNcIjtcclxuaW1wb3J0IHsgUGVyc29uYWxDb25maWdTZXJ2aWNlIH0gZnJvbSBcIi4vbG9va3VwLXByZXNvbmFsQ29uZmlnLnNlcnZpY2VcIjtcclxuaW1wb3J0IHtcclxuICAgIFV0aWxTZXJ2aWNlLFxyXG4gICAgVHJlZU5vZGVIZWxwZXIsXHJcbiAgICBGYXZvcml0ZUhlbHBlcixcclxuICAgIFNlbGVjdGlvbk1hbmFnZXIsXHJcbiAgICBEYXRhVGFibGVFdmVudE1hbmFnZXIsXHJcbiAgICBUcmVlVGFibGVFdmVudE1hbmFnZXIsXHJcbiAgICBNdWx0aVNlbGVjdGlvbk1hbmFnZXIsXHJcbiAgICBMb29rdXBIdHRwTWFuYWdlcixcclxuICAgIExvb2t1cENvbXBvbmVudE1hbmFnZXIsXHJcbiAgICBMb29rdXBEaWFsb2dNYW5hZ2VyLFxyXG4gICAgb25UZXh0Q2hhbmdlZCxcclxuICAgIExvb2t1cFNlbGVjdGlvblNlcnZpY2UsXHJcbn0gZnJvbSBcIi4vc2VydmljZXNcIjtcclxuaW1wb3J0IHsgY2F0Y2hFcnJvciwgbWFwLCBzd2l0Y2hNYXAgfSBmcm9tIFwicnhqcy9vcGVyYXRvcnNcIjtcclxuXHJcbmltcG9ydCB7IEV2ZW50TWFuYWdlciB9IGZyb20gXCJAYW5ndWxhci9wbGF0Zm9ybS1icm93c2VyXCI7XHJcbmltcG9ydCB7IGNsb25lRGVlcCB9IGZyb20gXCJsb2Rhc2gtZXNcIjtcclxuaW1wb3J0IHsgTG9va3VwUXVpY2tTZWxlY3RQYW5lbENvbXBvbmVudCB9IGZyb20gXCIuL3F1aWNrLXNlbGVjdC9xdWljay1zZWxlY3QtcGFuZWwuY29tcG9uZW50XCI7XHJcbmltcG9ydCB7IExvb2t1cFF1aWNrU2VsZWN0RGlyZWN0aXZlIH0gZnJvbSBcIi4vcXVpY2stc2VsZWN0L2xvb2t1cC1xdWljay1zZWxlY3QuZGlyZWN0aXZlXCI7XHJcblxyXG5cclxuZXhwb3J0IGNvbnN0IExPT0tVUEdSSURfVkFMVUVfQUNDRVNTT1I6IGFueSA9IHtcclxuICAgIHByb3ZpZGU6IE5HX1ZBTFVFX0FDQ0VTU09SLFxyXG4gICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gTG9va3VwR3JpZENvbXBvbmVudCksXHJcbiAgICBtdWx0aTogdHJ1ZSxcclxufTtcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6IFwiZmFycmlzLWxvb2t1cC1ncmlkXCIsXHJcbiAgICB0ZW1wbGF0ZVVybDogXCIuL2xvb2t1cC1ncmlkLmNvbXBvbmVudC5odG1sXCIsXHJcbiAgICBzdHlsZVVybHM6IFtcIi4vbG9va3VwLWdyaWQuY29tcG9uZW50LnNjc3NcIl0sXHJcbiAgICBwcm92aWRlcnM6IFtcclxuICAgICAgICBMT09LVVBHUklEX1ZBTFVFX0FDQ0VTU09SLFxyXG4gICAgICAgIFNob3J0Y3V0c1NlcnZpY2UsXHJcbiAgICAgICAgTG9va3VwRGVmYXVsdE1hcHBpbmcsXHJcbiAgICAgICAgTG9va3VwVXRpbHMsXHJcbiAgICAgICAgUGVyc29uYWxDb25maWdTZXJ2aWNlLFxyXG4gICAgXSxcclxuICAgIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmUsXHJcbiAgICBleHBvcnRBczogXCJsb29rdXBcIlxyXG59KVxyXG5leHBvcnQgY2xhc3MgTG9va3VwR3JpZENvbXBvbmVudFxyXG4gICAgZXh0ZW5kcyBMb29rdXBDb21wb25lbnRcclxuICAgIGltcGxlbWVudHMgT25Jbml0LCBBZnRlclZpZXdJbml0LCBPbkNoYW5nZXMsIE9uRGVzdHJveVxyXG57XHJcbiAgICBncm91cEljb24gPSBJTlBVVF9HUk9VUF9JQ09OO1xyXG4gICAgX2Rpc3BsYXlUeXBlID0gXCJcIjtcclxuXHJcbiAgICAvKiog5L2/55So6KGo5Y2V6K6+6K6h5Zmo5Lit55qE5pi+56S657G75Z6L44CC5ZCm5YiZ5L2/55So5YWD5pWw5o2u6K6+572u55qE5pi+56S657G75Z6L44CCIOm7mOiupO+8mmZhbHNlICovXHJcbiAgICBASW5wdXQoKSBjdXN0b21EaXNwbGF5VHlwZSA9IGZhbHNlO1xyXG4gICAgQElucHV0KCkgdmlld1R5cGU6IFwidGV4dFwiIHwgXCJ0YWdcIiA9IFwidGV4dFwiO1xyXG4gICAgQElucHV0KClcclxuICAgIGdldCBkaXNwbGF5VHlwZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGlzcGxheVR5cGU7XHJcbiAgICB9XHJcbiAgICBzZXQgZGlzcGxheVR5cGUodmFsOiBzdHJpbmcpIHtcclxuICAgICAgICBpZiAodmFsKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHR5cGVzID0gT2JqZWN0LnZhbHVlcyhMb29rdXBHcmlkRGlzcGxheVR5cGUpO1xyXG4gICAgICAgICAgICBjb25zdCBpID0gdHlwZXMuZmluZEluZGV4KChuKSA9PiBuID09PSB2YWwudG9VcHBlckNhc2UoKSk7XHJcbiAgICAgICAgICAgIGlmIChpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhMb29rdXBHcmlkRGlzcGxheVR5cGUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZGlzcGxheVR5cGUgPSBMb29rdXBHcmlkRGlzcGxheVR5cGVba2V5c1tpXV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9kaXNwbGF5VHlwZSA9IHZhbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKiog5ZCv55So5riF56m65oyJ6ZKuICovXHJcbiAgICBASW5wdXQoKSBlbmFibGVDbGVhciA9IHRydWU7XHJcbiAgICAvKiog5pyN5Yqh5Zmo56uv5o6S5bqPICovXHJcbiAgICBASW5wdXQoKSByZW1vdGVTb3J0ID0gdHJ1ZTtcclxuXHJcbiAgICBASW5wdXQoKSBjb25kaXRpb246IEVudGl0eUZpbHRlcjtcclxuXHJcbiAgICAvKiog5qCR6KGo5pi+56S65YWo6YCJ5aSN6YCJ5qGG44CCIOm7mOiupOS4jeaYvuekuiAqL1xyXG4gICAgQElucHV0KCkgc2hvd0NoZWNrQWxsID0gZmFsc2U7XHJcblxyXG4gICAgLyoqIOaYr+WQpuWQr+eUqOWkmumAiSAqL1xyXG4gICAgQElucHV0KCkgc2luZ2xlU2VsZWN0ID0gdHJ1ZTtcclxuICAgIC8qKiDlpJrpgInliIbpmpTnrKYgKi9cclxuICAgIEBJbnB1dCgpIG11bHRpcGxlQ2hvaWNlU2VwYXJhdG9yID0gXCIsXCI7XHJcbiAgICAvKiog5Li76ZSu5a2X5q61ICovXHJcbiAgICBASW5wdXQoKSBpZEZpZWxkPzogc3RyaW5nO1xyXG4gICAgLyoqIOWPr+S7peS4uuWFg+aVsOaNrklE44CBd2ViYXBpVVJMICovXHJcbiAgICBASW5wdXQoKSB1cmk/OiBzdHJpbmcgPSAnJztcclxuICAgIC8qKlxyXG4gICAgICogQkUgUkVTVCBSVUlcclxuICAgICAqIC0g5q2k5aSE6K6+572u5ZCOIHVyaSDlpLHmlYhcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgYmVVcmkgPSBcIlwiO1xyXG4gICAgLyoqXHJcbiAgICAgKiDmmL7npLrov4fmu6Tlt6XlhbfmnaFcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgc2hvd0ZpbHRlckJhciA9IHRydWU7XHJcbiAgICAvKiog5piv5ZCm5ZCv55So5YiG6aG1ICovXHJcbiAgICBASW5wdXQoKSBwYWdpbmF0aW9uID0gdHJ1ZTtcclxuICAgIC8qKiDlvZPliY3pobXntKLlvJXvvIzku44gMOW8gOWniyAqL1xyXG4gICAgQElucHV0KCkgcGFnZUluZGV4ID0gMTtcclxuICAgIC8qKiDmr4/pobXorrDlvZXmlbAgKi9cclxuICAgIEBJbnB1dCgpIHBhZ2VTaXplID0gMjA7XHJcbiAgICAvKiog5Y+v55So5YiG6aG16K6w5b2V5pWw5YiX6KGoICovXHJcbiAgICBASW5wdXQoKSBwYWdlTGlzdCA9IFsxMCwgMjAsIDMwLCA1MCwgMTAwXTtcclxuICAgIC8qKiDmgLvorrDlvZXmlbAgKi9cclxuICAgIEBJbnB1dCgpIHRvdGFsID0gMDtcclxuICAgIC8qKiDlj6/mi5bliqjliJcgKi9cclxuICAgIC8vIEBJbnB1dCgpIHJlc2l6YWJsZUNvbHVtbnMgPSB0cnVlO1xyXG4gICAgLyoqIOaYvuekuuWIl+S/oeaBrywg6buY6K6k5Li6IFtdICovXHJcbiAgICBASW5wdXQoKSBjb2x1bW5zOiBhbnlbXSA9IFtdO1xyXG5cclxuICAgIC8qKiDluK7liqnmn6Xor6LmmK/lkKbkuLrov5znq6/mn6Xor6IgKi9cclxuICAgIEBJbnB1dCgpIHJlbW90ZVNlYXJjaCA9IHRydWU7XHJcblxyXG4gICAgLyoqIOaWh+acrOWPmOWMluWQju+8jOi/m+ihjOacjeWKoeWZqOerr+afpeivoiAqL1xyXG4gICAgQElucHV0KCkgc2VhcmNoT25TZXJ2ZXIgPSB0cnVlO1xyXG4gICAgLyoqIOS4jei/m+ihjOacjeWKoeWZqOafpeivou+8jOacieWVpeeul+WVpSAqL1xyXG4gICAgQElucHV0KCkgbm9zZWFyY2ggPSBmYWxzZTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIOWQr+eUqOS7u+aEj+i+k+WFpeWQju+8jOWAvOmAmui/h+i+k+WFpeaXtuinpuWPkVxyXG4gICAgICovXHJcbiAgICBAT3V0cHV0KCkgY2xlYXJNYXBwaW5ncyA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIOWFgeiuuOi+k+WFpeeahOWtl+espuacgOWkp+mVv+W6puOAglxyXG4gICAgICog5Lu75oSP6L6T5YWl5pe277yM5q2k5bGe5oCn5pyJ5pWIXHJcbiAgICAgKi9cclxuICAgIEBJbnB1dCgpIG1heExlbmd0aDtcclxuXHJcbiAgICBASW5wdXQoKSBtYXBwaW5nRm46IChyb3dEYXRhLCBtYXBGaWVsZHMsIGJpbmRpbmdEYXRhPzogYW55KSA9PiB2b2lkO1xyXG4gICAgLyoqIOaVsOaNruWIl+ihqCAqL1xyXG4gICAgQElucHV0KCkgaXRlbXM6IGFueTtcclxuICAgIC8vIOaUtuiXj+WIl+ihqFxyXG4gICAgQElucHV0KCkgZmF2b3JpdGVJdGVtczogYW55W10gPSBbXTtcclxuICAgIC8qKiDoh6rlrprkuYnmlbDmja4gKi9cclxuICAgIEBJbnB1dCgpIGN1c3RvbURhdGE6IGFueTtcclxuXHJcbiAgICAvKiog57uR5a6a5YC85omA5Zyo55qE5a+56LGhICovXHJcbiAgICBASW5wdXQoKSBiaW5kaW5nRGF0YToge307XHJcblxyXG4gICAgQElucHV0KCkgdHJlZUluZm86IFRyZWVJbmZvO1xyXG4gICAgLyoqIOaYr+WQpuWQr+eUqOe6p+iBlOmAieaLqeaOp+WItumAiemhuSAqL1xyXG4gICAgQElucHV0KCkgZW5hYmxlQ2FzY2FkZSA9IGZhbHNlO1xyXG4gICAgLyoqIOe6p+iBlOaOp+WItum7mOiupOWAvO+8miBlbmFibGU6IOWQjOatpemAieaLqSwgdXDvvJrljIXlkKvkuIrnuqcsIGRvd27vvJrljIXlkKvkuIvnuqcsIGRpc2FibGXvvJrku4XpgInmi6noh6rouqsgKi9cclxuICAgIEBJbnB1dCgpIGNhc2NhZGVTdGF0dXM6IFwiZW5hYmxlXCIgfCBcInVwXCIgfCBcImRvd25cIiB8IFwiZGlzYWJsZVwiID0gXCJlbmFibGVcIjtcclxuICAgIC8qKiDliIbliKvnuqfogZTpgInpobnnmoTlkK/nlKjnirbmgIHvvIzpu5jorqTlhajpg6jlkK/nlKggKi9cclxuICAgIEBJbnB1dCgpIGNhc2NhZGVJdGVtcyA9IHtcclxuICAgICAgICBlbmFibGU6IHRydWUsXHJcbiAgICAgICAgdXA6IHRydWUsIFxyXG4gICAgICAgIGRvd246IHRydWUsXHJcbiAgICAgICAgZGlzYWJsZTogdHJ1ZVxyXG4gICAgfVxyXG4gICAgLyoqIOaYvuekuue6p+iBlOaOp+WItiAqL1xyXG4gICAgQElucHV0KCkgc2hvd0Nhc2NhZGVDb250cm9sID0gdHJ1ZTtcclxuXHJcbiAgICBASW5wdXQoKSBwbGFjZWhvbGRlciA9IFwiXCI7XHJcblxyXG4gICAgLyoqIOaYvuekuuW3sumAieiusOW9leWIl+ihqOOAgiDpu5jorqTkuLogZmFsc2Ug5LiN5pi+56S6ICovXHJcbiAgICBASW5wdXQoKSBzaG93U2VsZWN0ZWQgPSBmYWxzZTtcclxuXHJcbiAgICAvKiog5bqU55So5pS26JeP5aS5ICovXHJcbiAgICBASW5wdXQoKSB1c2VGYXZvcml0ZSA9IGZhbHNlO1xyXG4gICAgLyoqIOaUtuiXj+aVsOaNruadpeiHquS6ju+8miBsb2NhbGU6IOacrOWcsOWtmOWCqO+8jCByZW1vdGU6IOacjeWKoeWZqOerr+WtmOWCqCAqL1xyXG4gICAgQElucHV0KCkgZmF2b3JpdGVEYXRhRnJvbTogXCJsb2NhbGVcIiB8IFwicmVtb3RlXCIgPSBcInJlbW90ZVwiO1xyXG4gICAgLyoqIOS9v+eUqOaPkOekuizlv6vmjbfpgInmi6kgKi9cclxuICAgIEBJbnB1dCgpIHVzZVRpcCA9IGZhbHNlO1xyXG4gICAgLyoqIOiusOW9leeql+WPo+Wkp+WwjyAqL1xyXG4gICAgQElucHV0KCkgaXNSZWNvcmRTaXplID0gZmFsc2U7XHJcblxyXG4gICAgLyoqIOW/q+mAn+mAieaLqSAqL1xyXG4gICAgQElucHV0KCkgdXNlcklkOiBzdHJpbmc7XHJcblxyXG4gICAgLyoqIOaYr+WQpuWQr+eUqOmAieS4rXZhbHVl5YC85a+55bqU55qE6KGM5pWw5o2u77yM6buY6K6kIHRydWUgKi9cclxuICAgIEBJbnB1dCgpIGVuYWJsZVRvU2VsZWN0ID0gdHJ1ZTtcclxuXHJcbiAgICBASW5wdXQoKSBlbmFibGVGaW5kVGV4dCA9IGZhbHNlO1xyXG4gICAgLyoqIC0xOiDkuI3lsZXlvIDvvJsgMDog5YWo6YOo5bGV5byA77ybPjA6IOWxleW8gOWIsOaMh+Wumue6p+aVsCAqL1xyXG4gICAgQElucHV0KCkgZXhwYW5kTGV2ZWwgPSAtMTtcclxuXHJcbiAgICBASW5wdXQoKSBuYXZUcmVlVGFibGVPcHRpb25zOiBhbnkgPSB7fTtcclxuICAgIEBJbnB1dCgpIHRyZWVUYWJsZU9wdGlvbnM6IGFueSA9IHt9O1xyXG4gICAgQElucHV0KCkgZGF0YVRhYmxlT3B0aW9uczogYW55ID0ge307XHJcblxyXG5cclxuICAgIGRlZmF1bHRUcmVlVGFibGVPcHRpb25zID0ge1xyXG4gICAgICAgIG1heExldmVsOiA5LFxyXG4gICAgICAgIGVuYWJsZUNvbnRleHRNZW51OiBmYWxzZSxcclxuICAgICAgICBjb250ZXh0TWVudUl0ZW1zOiBbXSxcclxuICAgIH07XHJcblxyXG4gICAgLyoqIOagkeW9ouW4ruWKqeaVsOaNruWKoOi9veaWueW8j++8miBkZWZhdWx0OiDlhoXnva7lj5bmlbDvvJsgbG9hZGFsbDog5Yqg6L295omA5pyJIGxheWVybG9hZO+8muWIhuWxguWKoOi9vSAqL1xyXG4gICAgQElucHV0KCkgbG9hZFRyZWVEYXRhVHlwZTogXCJkZWZhdWx0XCIgfCBcImxvYWRhbGxcIiB8IFwibGF5ZXJsb2FkXCIgPSBcImRlZmF1bHRcIjtcclxuXHJcbiAgICAvKiog56qX5Y+j5omT5byA5ZCO56uL5Y2z5Yqg6L295pWw5o2u77yM6buY6K6k5Li6IHRydWUgKi9cclxuICAgIEBJbnB1dCgpIGxvYWREYXRhV2hlbk9wZW4gPSB0cnVlO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICog5a+86Iiq5YiX6KGo77yM5qCR5YiX6KGo5Zyo5biu5Yqp5omT5byA5ZCO6YCJ5Lit55qE5pWw5o2uO1xyXG4gICAgICog6K6+572u5ZCO77yMYHNlbGVjdEZpcnN0SW5OYXZgIOWkseaViO+8gVxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBuYXZTZWxlY3RlZElkcyA9IFwiXCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlr7zoiKrluK7liqnvvIzpgInkuK3nrKwx5p2h5pWw5o2u77yM6buY6K6k5Li6IGZhbHNlO1xyXG4gICAgICog5rOo5oSP77ya5b2TYG5hdlNlbGVjdGVkSWRzYOS4jeS4uuepuuaXtu+8jOatpOWxnuaAp+WkseaViOOAglxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBzZWxlY3RGaXJzdEluTmF2ID0gZmFsc2U7XHJcblxyXG4gICAgLyoqIOWQr+eUqOaehOmAoOWujOaVtOagkei/h+a7pCAqL1xyXG4gICAgQElucHV0KCkgZW5hYmxlRnVsbFRyZWUgPSB0cnVlO1xyXG5cclxuICAgIC8qKiDmmL7npLrmlofmnKzoh6rlrprkuYnlh73mlbAgKi9cclxuICAgIEBJbnB1dCgpIGRpc3BsYXlGb3JtYXR0ZXI6IChcclxuICAgICAgICB2YWx1ZTogc3RyaW5nLFxyXG4gICAgICAgIGRhdGE6IGFueSxcclxuICAgICAgICBpbnN0YW5jZTogYW55XHJcbiAgICApID0+IHN0cmluZyA9IHVuZGVmaW5lZDtcclxuICAgIC8qKiDmmL7npLrmlofmnKzlrZfmrrXpm4blkIjvvIzku6Ug6Iux5paHIOmAl+WPt+malOW8gCAqL1xyXG4gICAgQElucHV0KCkgZGlzcGxheUZpZWxkcyA9IFwiXCI7XHJcbiAgICBASW5wdXQoKSBkaXNwbGF5VGV4dFNlcGFyYXRvciA9IFwiX1wiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICog5biu5Yqp5YWD5pWw5o2uSUTvvIzkuI3kuLrnqbrml7bosIPnlKjmjIflrprnmoRVUklcclxuICAgICAqIC9hcGkvcnVudGltZS9iY2MvdjEuMC9oZWxwL2RhdGEve2hlbHBJZH1cclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgaGVscElkID0gXCJcIjtcclxuICAgIC8qKiDmlofmnKzlr7npvZDmlrnlvI/vvJsgbGVmdCB8IGNlbnRlciB8IHJpZ2h0OyDpu5jorqQgbGVmdCAqL1xyXG4gICAgQElucHV0KCkgdGV4dEFsaWduID0gXCJsZWZ0XCI7XHJcblxyXG4gICAgLyoqIOm8oOagh+a7kei/h+i+k+WFpeahhuaXtuaYvuekuui+k+WFpeahhuWGheeahOaWh+acrOS/oeaBryAqL1xyXG4gICAgQElucHV0KCkgZW5hYmxlVGl0bGUgPSB0cnVlO1xyXG4gICAgQElucHV0KCkgdXNlRXh0ZW5kSW5mbyA9IGZhbHNlO1xyXG4gICAgQElucHV0KCkgZXh0SW5mb0ZpZWxkcyA9IFwiXCI7XHJcbiAgICBASW5wdXQoKSBleHRJbmZvRm9ybWF0dGVyOiBFeHRJbmZvRm9ybWF0dGVyO1xyXG4gICAgQElucHV0KCkgZXh0ZW5kSW5mbyA9IFwiXCI7XHJcbiAgICAvKiogSURFIOiuvuiuoeWZqOiHquWumuS5ieagvOW8j+WMliAyMTAzICovXHJcbiAgICBASW5wdXQoKSBjdXN0b21Gb3JtYXR0ZXI6IEN1c3RvbURhdGFGb3JtYXR0ZXIgPSBudWxsO1xyXG4gICAgQElucHV0KCkgY3VzdG9tTmF2Rm9ybWF0dGVyOiBDdXN0b21EYXRhRm9ybWF0dGVyID0gbnVsbDtcclxuXHJcbiAgICAvKiog6Ieq5a6a5LmJ56Gu5a6a5LqL5Lu2ICovXHJcbiAgICBASW5wdXQoKSBva0hhbmRsZXIgPSBudWxsO1xyXG4gICAgLyoqIOiHquWumuS5ieWPlua2iOS6i+S7tiAqL1xyXG4gICAgQElucHV0KCkgY2FuY2VsSGFuZGxlciA9IG51bGw7XHJcblxyXG4gICAgQElucHV0KCkgdGFnYm94SGVpZ2h0ID0gXCJhdXRvXCI7XHJcbiAgICBASW5wdXQoKSBtYXhUYWdib3hIZWlnaHQ7XHJcblxyXG4gICAgLyoqIOWQr+eUqOiOt+WPluaJgOacieWtkOe6p+aVsOaNrueahOWKn+iDvSAqL1xyXG4gICAgQElucHV0KCkgZW5hYmxlR2V0QWxsQ2hpbGROb2RlcyA9IHRydWU7XHJcblxyXG4gICAgQElucHV0KCkgc2hvcnRjdXRLZXkgPSB7XHJcbiAgICAgICAgLyoqIOaJk+W8gOW4ruWKqeeql+WPoyAqL1xyXG4gICAgICAgIG9wZW46IFwiQXJyb3dSaWdodFwiLFxyXG4gICAgICAgIC8qKiDnoa7orqTpgInmi6nmlbDmja4gKi9cclxuICAgICAgICBjb25maXJtOiBcIkVudGVyXCIsXHJcbiAgICAgICAgLyoqIOaQnOe0ouahhueEpueCuSAqL1xyXG4gICAgICAgIHNlYXJjaEZvY3VzOiBcIkYzXCIsXHJcbiAgICAgICAgLyoqIOmAieS4reS4iuS4gOadoSAqL1xyXG4gICAgICAgIG1vdmVVcDogXCJBcnJvd1VwXCIsXHJcbiAgICAgICAgLyoqIOmAieS4reS4i+S4gOadoSAqL1xyXG4gICAgICAgIG1vdmVEb3duOiBcIkFycm93RG93blwiLFxyXG4gICAgICAgIC8qKiDlsZXlvIDoioLngrkgKi9cclxuICAgICAgICBleHBhbmQ6IFwiQXJyb3dSaWdodFwiLFxyXG4gICAgICAgIC8qKiDmipjlj6DoioLngrkgKi9cclxuICAgICAgICBjb2xsYXBzZTogXCJBcnJvd0xlZnRcIixcclxuICAgICAgICAvKiog5LiL5LiA6aG1ICovXHJcbiAgICAgICAgbmV4dFBhZ2VyOiBcIlBhZ2VEb3duXCIsXHJcbiAgICAgICAgLyoqIOS4iuS4gOmhtSAqL1xyXG4gICAgICAgIHByZXZQYWdlcjogXCJQYWdlVXBcIixcclxuICAgIH07XHJcbiAgICAvKiog5b+r5o236YCJ5oup55u45YWz6YWN572u6aG577yM6buY6K6k5Li6IG51bGwsIOWNs+S4jeWQr+eUqOatpOWKn+iDvSAqL1xyXG4gICAgQElucHV0KCkgcXVpY2tTZWxlY3Q6IFF1aWNrU2VsZWN0T3B0aW9uID0gbnVsbDtcclxuXHJcbiAgICAvKiog5qCR5b2i5biu5YqpIOaYr+WQpuS9v+eUqOagkeW9oue7k+aehOaVsOaNruOAgum7mOiupOS4uiB0cnVlLCDlvZPkuLogZmFsc2Ug5pe277yM5pyN5Yqh5Zmo56uv5peg6aG75p6E6YCg5qCR5b2i57uT5p6E77yM5oyJ5pmu6YCa5YiX6KGo6L6T5Ye6ICovXHJcbiAgICBASW5wdXQoKSB0cmVlVG9MaXN0ID0gZmFsc2U7XHJcbiAgICBASW5wdXQoKSBuYXZUcmVlVG9MaXN0ID0gZmFsc2U7XHJcblxyXG4gICAgLyoqIOW4puWvvOiIqueahOW4ruWKqeS4re+8jOaYr+WQpuaYvuekuuW3puS+p+WvvOiIqumDqOWIhuOAgum7mOiupCB0cnVlICovXHJcbiAgICBASW5wdXQoKSBzaG93TmF2aWdhdGlvbiA9IHRydWU7XHJcblxyXG4gICAgLyoqIOaVsOaNrumAieaLqeWQju+8jOWAvOaYoOWwhOWJjeinpuWPkVxyXG4gICAgICog6L+U5ZueIE9ic2VydmFibGVcclxuICAgICAqICAgICAgY2FuU2VsZWN0OiA8Ym9vbGVhbj4gIOaYr+WQpuWFgeiuuOmAieaLqVxyXG4gICAgICogICAgICBtZXNzYWdlOiA8c3RyaW5nPiDkuI3lhYHorrjpgInmi6nml7bnmoTmj5DnpLrkv6Hmga9cclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgYmVmb3JlU2VsZWN0RGF0YTogKHA6IHtcclxuICAgICAgICBpbnN0YW5jZTogYW55O1xyXG4gICAgICAgIGRhdGE6IGFueTtcclxuICAgIH0pID0+IE9ic2VydmFibGU8eyBjYW5TZWxlY3Q6IGJvb2xlYW47IG1lc3NhZ2U6IHN0cmluZyB9IHwgYm9vbGVhbj47XHJcblxyXG5cclxuICAgIEBJbnB1dCgpIGxheW91dEZvcm1hdDogTG9va3VwTGF5b3V0ID0gTG9va3VwTGF5b3V0LmRlZmF1bHQ7XHJcblxyXG4gICAgQE91dHB1dCgpIHNlbGVjdGVkRGF0YSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIEBPdXRwdXQoKSBjbGVhciA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIEBPdXRwdXQoKSBzZWFyY2ggPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICAvLyDluK7liqnmlofmnKzmoYbkuK3lgLzlj5jljJbkuovku7ZcclxuICAgIEBPdXRwdXQoKSB2YWx1ZUNoYW5nZWQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICBAT3V0cHV0KCkgbG9hZFN1Y2Nlc3MgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgQE91dHB1dCgpIHBhZ2VyQ2hhbmdlZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgICBAT3V0cHV0KCkgZXhwYW5kVHJlZU5vZGUgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICBAT3V0cHV0KCkgdGV4dENoYW5nZWQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgQE91dHB1dCgpIGNoZWNrZWRDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPHtcclxuICAgICAgICBkYXRhOiBhbnk7XHJcbiAgICAgICAgaXNDaGVjazogYm9vbGVhbjtcclxuICAgIH0+KCk7XHJcblxyXG4gICAgQE91dHB1dCgpIHRhZ1JlbW92ZWQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgLyoqIOWGheWuueS4reeVmeeZvei+uei3nSAqL1xyXG4gICAgY29udGFpbmVyTWFyZ2luID0geyB0b3A6IDAsIGJvdHRvbTogNSwgbGVmdDogIDE0LCByaWdodDogMTQgfTtcclxuICAgIGNvbnRhaW5lclN0eWxlID0ge1xyXG4gICAgfTtcclxuXHJcbiAgICBfZ3JpZE9wdGlvbnM6IExvb2t1cEdyaWRPcHRpb25zID0gbG9va3VwR3JpZERlZmF1bHRzO1xyXG5cclxuICAgIGdldCBncmlkT3B0aW9ucygpIHtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIHRoaXMudXNlRmF2b3JpdGUgJiZcclxuICAgICAgICAgICAgdGhpcy5jb2x1bW5zICYmXHJcbiAgICAgICAgICAgIHRoaXMuY29sdW1ucy5sZW5ndGggPiAwICYmXHJcbiAgICAgICAgICAgICF0aGlzLmNvbHVtbnMuZmluZCgoaXRlbSkgPT4gaXRlbS5maWVsZCA9PT0gRkFWT1JJVEVfRklFTERfTkFNRSlcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgdGhpcy5jb2x1bW5zLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgZmllbGQ6IEZBVk9SSVRFX0ZJRUxEX05BTUUsXHJcbiAgICAgICAgICAgICAgICB0aXRsZTogXCJcIixcclxuICAgICAgICAgICAgICAgIHdpZHRoOiA0MCxcclxuICAgICAgICAgICAgICAgIGFsaWduOiBcImNlbnRlclwiLFxyXG4gICAgICAgICAgICAgICAgZml4ZWQ6ICdyaWdodCcsXHJcbiAgICAgICAgICAgICAgICAvLyBmaXhlZFdpZHRoOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgZm9ybWF0dGVyOiB0aGlzLmZhdkhlbHBlci5mYXZvcml0ZUNvbHVtbkZvcm1hdHRlcixcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2dyaWRPcHRpb25zID0gT2JqZWN0LmFzc2lnbih0aGlzLl9ncmlkT3B0aW9ucywge1xyXG4gICAgICAgICAgICBzaW5nbGVTZWxlY3Q6IHRoaXMuc2luZ2xlU2VsZWN0LFxyXG4gICAgICAgICAgICBpZEZpZWxkOiB0aGlzLmlkRmllbGQsXHJcbiAgICAgICAgICAgIHVyaTogdGhpcy51cmksXHJcbiAgICAgICAgICAgIHNob3dGaWx0ZXJCYXI6IHRoaXMuc2hvd0ZpbHRlckJhcixcclxuICAgICAgICAgICAgcGFnaW5hdGlvbjogdGhpcy5wYWdpbmF0aW9uLFxyXG4gICAgICAgICAgICBwYWdlSW5kZXg6IHRoaXMucGFnZUluZGV4LFxyXG4gICAgICAgICAgICBwYWdlU2l6ZTogdGhpcy5wYWdlU2l6ZSxcclxuICAgICAgICAgICAgcGFnZUxpc3Q6IHRoaXMucGFnZUxpc3QsXHJcbiAgICAgICAgICAgIHRvdGFsOiB0aGlzLnRvdGFsLFxyXG4gICAgICAgICAgICBpdGVtczogdGhpcy5pdGVtcyxcclxuICAgICAgICAgICAgY29sdW1uczogdGhpcy5jb2x1bW5zLFxyXG4gICAgICAgICAgICByZXNpemFibGVDb2x1bW5zOiB0cnVlLFxyXG4gICAgICAgICAgICBmaXhlZEhlYWRlcjogdHJ1ZSxcclxuICAgICAgICAgICAgaG92ZXI6IHRydWUsXHJcbiAgICAgICAgICAgIHRyZWVJbmZvOiB0aGlzLnRyZWVJbmZvLFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5fZ3JpZE9wdGlvbnM7XHJcbiAgICB9XHJcbiAgICBASW5wdXQoKSBzZXQgZ3JpZE9wdGlvbnMob3B0cykge1xyXG4gICAgICAgIHRoaXMuX2dyaWRPcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5fZ3JpZE9wdGlvbnMsIG9wdHMpO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRDb2x1bW5zID0gdGhpcy5tdWx0aVNlbE1nci5pbml0U2VsZWN0ZWRDb2x1bW5zKCk7XHJcbiAgICB9XHJcblxyXG4gICAgQFZpZXdDaGlsZChcImNvbnRlbnRDb250YWluZXJcIiwgeyByZWFkOiBWaWV3Q29udGFpbmVyUmVmIH0pXHJcbiAgICBjb250ZW50Q29udGFpbmVyOiBWaWV3Q29udGFpbmVyUmVmO1xyXG4gICAgQFZpZXdDaGlsZChcImZhdm9yaXRlc0NvbnRhaW5lclwiLCB7IHJlYWQ6IFZpZXdDb250YWluZXJSZWYgfSlcclxuICAgIGZhdm9yaXRlc0NvbnRhaW5lcjogVmlld0NvbnRhaW5lclJlZjtcclxuICAgIEBWaWV3Q2hpbGQoXCJsZWZ0Q29udGFpbmVyXCIsIHsgcmVhZDogVmlld0NvbnRhaW5lclJlZiB9KVxyXG4gICAgbGVmdENvbnRhaW5lcjogVmlld0NvbnRhaW5lclJlZjtcclxuICAgIEBWaWV3Q2hpbGQoXCJjZW50ZXJDb250YWluZXJcIiwgeyByZWFkOiBWaWV3Q29udGFpbmVyUmVmIH0pXHJcbiAgICBjZW50ZXJDb250YWluZXI6IFZpZXdDb250YWluZXJSZWY7XHJcbiAgICBAVmlld0NoaWxkKFwibXVsdGlTZWxlY3REVFwiKSBtdWx0aVNlbGVjdERUOiBEYXRhVGFibGVDb21wb25lbnQ7XHJcbiAgICBAVmlld0NoaWxkKFwiaW5wdXRncm91cFwiKSBpbnB1dEdyb3VwOiBJbnB1dEdyb3VwQ29tcG9uZW50O1xyXG4gICAgQFZpZXdDaGlsZChcImxlZnRQYW5lbFwiKSBsZWZ0UGFuZWw6IExheW91dFBhbmVsQ29tcG9uZW50O1xyXG4gICAgQFZpZXdDaGlsZChcInRhZ2JveFwiKSB0YWdib3g6IEVsZW1lbnRSZWY7XHJcblxyXG4gICAgQFZpZXdDaGlsZChcIm9rYnRuXCIpIG9rQnV0dG9uOiBFbGVtZW50UmVmO1xyXG4gICAgQFZpZXdDaGlsZChcInRhZ0lucHV0XCIpIHRhZ0lucHV0OiBJbnB1dEdyb3VwQ29tcG9uZW50O1xyXG5cclxuICAgIGNvbXBvbmVudFJlZjogQ29tcG9uZW50UmVmPGFueT47XHJcbiAgICBsZWZ0Q29tcG9uZW50UmVmOiBDb21wb25lbnRSZWY8TG9va3VwTGVmdENvbXBvbmVudD47XHJcbiAgICBmYXZvcml0ZXNDb21wb25lbnRSZWY6IENvbXBvbmVudFJlZjxhbnk+O1xyXG5cclxuICAgIHB1YmxpYyBodHRwOiBJTG9va3VwSHR0cFNlcnZpY2U7XHJcbiAgICBwdWJsaWMgbWVzc2FnZXJTZXJ2aWNlOiBNZXNzYWdlclNlcnZpY2U7XHJcbiAgICBwdWJsaWMgbG9hZGluZ1NlcnZpY2U6IExvYWRpbmdTZXJ2aWNlO1xyXG4gICAgbG9hZGluZzogTG9hZGluZ0NvbXBvbmVudDtcclxuICAgIC8vIGRhdGFGaWVsZE1hcHM6IGFueTtcclxuICAgIG5hdmlnYXRpb25PcHRpb25zOiBOYXZpZ2F0aW9uT3B0aW9ucztcclxuXHJcbiAgICAvLyDlr7zoiKrluK7liqnlt6bliJnlrr3luqZcclxuICAgIGxlZnRQYW5lbFdpZHRoID0gMzIwO1xyXG4gICAgLy8g5a+86Iiq5biu5Yqp56qX5Y+j5pyA5bCP5a695bqmXHJcbiAgICBuYXZMb29rdXBEaWFsb2dNaW5XaWR0aCA9IDk2MDtcclxuXHJcbiAgICBuYXZpZ2F0aW9uRmlsdGVyOiBOYXZpZ2F0aW9uRmlsdGVyID0gbnVsbDtcclxuXHJcbiAgICBzdWJzY3JpcHRpb25zOiBTdWJzY3JpcHRpb25bXSA9IFtdO1xyXG4gICAgZGlhbG9nT3BlbmVkU3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb247XHJcbiAgICBkaWFsb2dDbG9zZWRTdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbjtcclxuXHJcbiAgICBpc1RleHRDaGFuZ2UgPSBmYWxzZTtcclxuICAgIGlzVGFiQ2hhbmdlZCA9IGZhbHNlO1xyXG5cclxuICAgIGRpc3BsYXlJbmZvOiBEaXNwbGF5SW5mbyA9IE9iamVjdC5hc3NpZ24oe30sIGRpc3BsYXlJbmZvRGVmYXVsdCk7XHJcblxyXG4gICAgdGFiQ2hhbmdlU3Vic2NyaXB0aW9uID0gbnVsbDtcclxuICAgIC8vIOaaguWtmOihjOeCueWHu+aVsOaNriAg55So5LqO5pS26JePXHJcbiAgICBwZXJzb25hbENvbmY6IFBlcnNvbmFsQ29uZmlnID0ge307XHJcbiAgICBmYXZvcml0ZUNvbHVtbnM6IGFueVtdID0gW107XHJcbiAgICAvKiog5Li05pe25p+l6K+i5Y+C5pWwICovXHJcbiAgICBfc2VhcmNoU3RhdGUgPSBudWxsO1xyXG4gICAgYWxsRGF0YTogYW55ID0gW107XHJcbiAgICBnZXQgc2VsZWN0aW9ucygpIHtcclxuICAgICAgICBjb25zdCBzZWxlY3RJdGVtcyA9IHRoaXMubG9va3VwU2VsZWN0aW9uU2VyLmdldFNlbGVjdGlvbnMoKTtcclxuICAgICAgICBpZiAodGhpcy5zaW5nbGVTZWxlY3QpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGVjdEl0ZW1zWzBdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxlY3RJdGVtcztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXQgdXNlUGVyc2lvbmFsQ29uZigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy51c2VGYXZvcml0ZSB8fCB0aGlzLnVzZVRpcCB8fCB0aGlzLmlzUmVjb3JkU2l6ZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZGlzcGxheVRleHRMaXN0KCkge1xyXG4gICAgICAgIGlmICh0aGlzLmRpc3BsYXlUZXh0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRpc3BsYXlUZXh0LnNwbGl0KHRoaXMubXVsdGlwbGVDaG9pY2VTZXBhcmF0b3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHBlcnNvbmFsQ29uZmlnU2VydmljZTogUGVyc29uYWxDb25maWdTZXJ2aWNlO1xyXG4gICAgcHVibGljIHV0aWxTZXJ2aWNlOiBVdGlsU2VydmljZTtcclxuICAgIHB1YmxpYyB0cmVlTm9kZUhlbHBlcjogVHJlZU5vZGVIZWxwZXI7XHJcbiAgICBwdWJsaWMgbG9jYWxTZXJ2aWNlOiBMb2NhbGVTZXJ2aWNlO1xyXG4gICAgcHVibGljIG5vdGlmeVNlcnZpY2U6IE5vdGlmeVNlcnZpY2U7XHJcbiAgICBhbGxDb2x1bW5zVGl0bGUgPSBcIuaJgOacieWIl1wiO1xyXG4gICAgbXVzdFdyaXRlU29tZXRoaW5nID0gXCLor7fovpPlhaXlhbPplK7lrZflkI7mn6Xor6LjgIJcIjtcclxuICAgIG11c3RDaG9vc0FkYXRhcm93ID0gXCLor7fpgInmi6nkuIDmnaHorrDlvZXvvIFcIjtcclxuICAgIGFkZEZhdm9yaXRlU3VjY2VzcyA9IFwi5pS26JeP5oiQ5Yqf44CCXCI7XHJcbiAgICBkZWxGYXZvcml0ZVN1Y2Nlc3MgPSBcIuenu+mZpOaUtuiXj+aIkOWKn+OAglwiO1xyXG5cclxuICAgIC8qKiDkvb/nlKjlhoXnva7nmoTmn6Xor6Lmlrnms5UsIOm7mOiupCBmYWxzZSAqL1xyXG4gICAgdXNlSW5zaWRlU2VhcmNoSGFuZGxlciA9IGZhbHNlO1xyXG4gICAgc2VhcmNoaW5nID0gZmFsc2U7XHJcbiAgICAvKiog5Li05pe25a2Y5YKo5p+l6K+i57uT5p6c6ZuGICovXHJcbiAgICBfc2VhcmNoUmVzdWx0ID0gbnVsbDtcclxuXHJcbiAgICBsb29rdXBpbml0aWFsaXphdGlvblN1YmplY3QgPSBuZXcgU3ViamVjdCgpO1xyXG5cclxuICAgIC8qKiDlpJrpgInml7bvvIzpgInkuK3nmoTmlbDmja4gKi9cclxuICAgIGN1cnJlbnRTZWxlY3RlZEl0ZW1zOiBPYnNlcnZhYmxlPGFueT4gPSBvZihbXSk7XHJcbiAgICAvKiog5bey6YCJ5pWw5o2u5YiX5L+h5oGvICovXHJcbiAgICBzZWxlY3RlZENvbHVtbnMgPSBbXTtcclxuICAgIGFjdGl2ZVRhYjogc3RyaW5nIHwgXCJkYXRhbGlzdFwiIHwgXCJmYXZvcml0ZVwiIHwgXCJzZWxlY3RlZFwiID0gXCJkYXRhbGlzdFwiO1xyXG5cclxuICAgIGZhdkhlbHBlcjogRmF2b3JpdGVIZWxwZXIgPSBudWxsO1xyXG4gICAgdHRFdmVudE1ncjogVHJlZVRhYmxlRXZlbnRNYW5hZ2VyID0gbnVsbDtcclxuICAgIG11bHRpU2VsTWdyOiBNdWx0aVNlbGVjdGlvbk1hbmFnZXIgPSBudWxsO1xyXG4gICAgaHR0cE1ncjogTG9va3VwSHR0cE1hbmFnZXIgPSBudWxsO1xyXG4gICAgbG9va3VwQ21wTWdyOiBMb29rdXBDb21wb25lbnRNYW5hZ2VyID0gbnVsbDtcclxuICAgIGRpYWxvZ01ncjogTG9va3VwRGlhbG9nTWFuYWdlciA9IG51bGw7XHJcbiAgICBzZWxlY3Rpb25NZ3I6IFNlbGVjdGlvbk1hbmFnZXIgPSBudWxsO1xyXG4gICAgZHRFdmVudE1ncjogRGF0YVRhYmxlRXZlbnRNYW5hZ2VyID0gbnVsbDtcclxuXHJcbiAgICBsb29rdXBTZWxlY3Rpb25TZXI6IExvb2t1cFNlbGVjdGlvblNlcnZpY2UgPSBudWxsO1xyXG5cclxuICAgIGNvbnRyb2xJZCA9IFwiXCI7XHJcbiAgICBzYXZpbmdGYW9yaXRlRGF0YSA9IGZhbHNlO1xyXG4gICAgaXNSZWFkeSA9IGZhbHNlO1xyXG4gICAgc2hvd1RhZ2JveENsZWFyQnV0dG9uID0gZmFsc2U7XHJcbiAgICBoYXNFcnJvciA9IGZhbHNlO1xyXG5cclxuICAgIGlzR2V0QWxsQ2hpZGxOb2RlcyA9IGZhbHNlO1xyXG4gICAgZXZlbnRNYW5hZ2VyOiBFdmVudE1hbmFnZXI7XHJcbiAgICAvKiog6YCJ5Lit6K6w5b2VSUTvvIzoh6rlrprkuYnluK7liqnlj5bmlbDml7bkvb/nlKggKi9cclxuICAgIHNlbGVjdGVkSWRzID0gW107XHJcbiAgICBwcml2YXRlIGxvb2t1cFNlYXJjaElucHV0RXZlbnQgPSBudWxsO1xyXG4gICAgcHJpdmF0ZSBmYXJyaXNJbnN0YW5jZXM6IEZhcnJpc0NvbXBvbmVudEluc3RhbmNlU2VydmljZSA9IG51bGw7XHJcbiAgICAvKiog55So5oi35Yid5aeL6K6+572uICovXHJcbiAgICBwcml2YXRlIF91c2VyU2V0dGluZ3M6IGFueSA9IHt9O1xyXG5cclxuICAgIGdldCB1c2VySW5pdGlhbENvbmZpZygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdXNlclNldHRpbmdzO1xyXG4gICAgfVxyXG5cclxuICAgIF90cmVlSW5mb18gPSBudWxsO1xyXG5cclxuICAgIC8qKiBkaWFsb2cg5YaF5a655Yy65Z+f6auY5bqm44CCIOW8ueeql+aAu+mrmOW6piAtIOWktOmDqOmrmOW6piAtIOiEmumDqOmrmOW6piAtIO+8iOWQr+eUqOaUtuiXjyBUQULlpLTpq5jluqbvvIkgKi9cclxuICAgIGRpYWxvZ0NvbnRlbnRIZWlnaHQgPSAwO1xyXG4gICAgLyoqIOW3puagkeWPs+WIl+ihqO+8jCDlt6bmoJHngrnlh7voioLngrnmn6Xor6Lml7bmmK/lkKbljIXmi6zkuIvnuqfoioLngrnnmoTmlbDmja7vvIzpu5jorqQgZmFsc2UgKi9cclxuICAgIGluY2x1ZGVTdWJvcmRpbmF0ZXMgPSBmYWxzZTtcclxuICAgIGluY2x1ZGVTdWJvcmRpbmF0ZXMkID0gbmV3IFN1YmplY3QoKTtcclxuICAgIGluY2x1ZGVTdWJvcmRpbmF0ZXMkJDogU3Vic2NyaXB0aW9uID0gbnVsbDtcclxuICAgIG92ZXJMYXlTZXJ2aWNlOiBPdmVyTGF5SGlkZGVuU2VydmljZTtcclxuICAgIHByaXZhdGUgZGVidWdTZXI6IERlYnVnU2VydmljZSA9IG51bGw7XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHVibGljIGluamVjdG9yOiBJbmplY3RvcixcclxuICAgICAgICBwdWJsaWMgY2ZyOiBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsXHJcbiAgICAgICAgcHVibGljIGVsOiBFbGVtZW50UmVmLFxyXG4gICAgICAgIHB1YmxpYyB1dGlsczogQ29tbW9uVXRpbHMsXHJcbiAgICAgICAgcHJpdmF0ZSBkZWZhdWx0TWFwcGluZzogTG9va3VwRGVmYXVsdE1hcHBpbmcsXHJcbiAgICAgICAgcHVibGljIGNoYW5nZURldGVjdG9yOiBDaGFuZ2VEZXRlY3RvclJlZixcclxuICAgICAgICBwdWJsaWMgc2hvcnRjdXRzOiBTaG9ydGN1dHNTZXJ2aWNlLFxyXG4gICAgICAgIHB1YmxpYyBsb29rdXBVdGlsczogTG9va3VwVXRpbHMsXHJcbiAgICAgICAgcHJpdmF0ZSB6b25lOiBOZ1pvbmUsXHJcbiAgICAgICAgcHVibGljIHJlbmRlcjI6IFJlbmRlcmVyMlxyXG4gICAgKSB7XHJcbiAgICAgICAgc3VwZXIoaW5qZWN0b3IsIGVsLCBjaGFuZ2VEZXRlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVJbnN0YW5jZSgpO1xyXG4gICAgICAgIHRoaXMuY3VycmVudFNlbGVjdGVkSXRlbXMgPSB0aGlzLmxvb2t1cFNlbGVjdGlvblNlci5zZWxlY3RlZCQ7XHJcbiAgICAgICAgdGhpcy5ldmVudE1hbmFnZXIgPSB0aGlzLmluamVjdG9yLmdldChFdmVudE1hbmFnZXIpO1xyXG4gICAgICAgIHRoaXMuZmFycmlzSW5zdGFuY2VzID0gdGhpcy5pbmplY3Rvci5nZXQoXHJcbiAgICAgICAgICAgIEZhcnJpc0NvbXBvbmVudEluc3RhbmNlU2VydmljZSxcclxuICAgICAgICAgICAgbnVsbFxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHRoaXMub3ZlckxheVNlcnZpY2UgPSBuZXcgT3ZlckxheUhpZGRlblNlcnZpY2UoKTtcclxuXHJcbiAgICAgICAgdGhpcy5kZWJ1Z1NlciA9IHRoaXMuaW5qZWN0b3IuZ2V0KERlYnVnU2VydmljZSwgbnVsbCk7XHJcbiAgICAgICAgaWYgKHRoaXMuZGVidWdTZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5kZWJ1Z1Nlci51c2VEZWJ1Z01vZGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgd3JpdGVDb25zb2xlKG1zZywgdHlwZTogJ2luZm8nfCdsb2cnfCd3YXJuJ3wnZXJyb3InID0gJ3dhcm4nKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGVidWdTZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5kZWJ1Z1Nlclt0eXBlXShtc2cpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNhY2hlVXNlckNvbmZpZygpIHtcclxuICAgICAgICB0aGlzLl91c2VyU2V0dGluZ3MuX3RpdGxlID0gdGhpcy50aXRsZTtcclxuICAgICAgICB0aGlzLmRpc3BsYXlJbmZvLnRpdGxlID0gdGhpcy50aXRsZTtcclxuICAgICAgICB0aGlzLl91c2VyU2V0dGluZ3MuX2NvbHVtbnMgPSB0aGlzLmRlZXBDbG9uZSh0aGlzLmNvbHVtbnMgfHwgW10pO1xyXG4gICAgICAgIHRoaXMuX3VzZXJTZXR0aW5ncy5nZXRDb2x1bW5zID0gKCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdXNlclNldHRpbmdzLl9jb2x1bW5zO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuX3VzZXJTZXR0aW5ncy5yZXNldCA9ICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy50aXRsZSA9IHRoaXMuX3VzZXJTZXR0aW5ncy5fdGl0bGU7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzcGxheUluZm8udGl0bGUgPSB0aGlzLnRpdGxlO1xyXG4gICAgICAgICAgICB0aGlzLmNvbHVtbnMgPSB0aGlzLl91c2VyU2V0dGluZ3MuZ2V0Q29sdW1ucygpO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBkZWVwQ2xvbmUob2JqKSB7XHJcbiAgICAgICAgaWYgKG9iaiA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgY2xvbmUgPSBPYmplY3QuYXNzaWduKHt9LCBvYmopO1xyXG4gICAgICAgIE9iamVjdC5rZXlzKGNsb25lKS5mb3JFYWNoKFxyXG4gICAgICAgICAgICAoa2V5KSA9PlxyXG4gICAgICAgICAgICAgICAgKGNsb25lW2tleV0gPVxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGVvZiBvYmpba2V5XSA9PT0gXCJvYmplY3RcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMuZGVlcENsb25lKG9ialtrZXldKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG9ialtrZXldKVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkob2JqKSkge1xyXG4gICAgICAgICAgICBjbG9uZS5sZW5ndGggPSBvYmoubGVuZ3RoO1xyXG4gICAgICAgICAgICByZXR1cm4gQXJyYXkuZnJvbShjbG9uZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjbG9uZTtcclxuICAgIH1cclxuXHJcbiAgICBuZ09uSW5pdCgpIHtcclxuICAgICAgICBzdXBlci5uZ09uSW5pdCgpO1xyXG4gICAgICAgIHRoaXMuY2FjaGVVc2VyQ29uZmlnKCk7XHJcbiAgICAgICAgaWYgKCF0aGlzLmxvYWRUcmVlRGF0YVR5cGUpIHtcclxuICAgICAgICAgICAgdGhpcy5sb2FkVHJlZURhdGFUeXBlID0gXCJkZWZhdWx0XCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmNoZWNrR3JpZE9wdGlvbnMoKTtcclxuICAgICAgICB0aGlzLmRpc3BsYXlJbmZvLnRpdGxlID0gdGhpcy50aXRsZTtcclxuICAgICAgICAvKiog5Lyg6YCS5LiK5LiL5paHICovXHJcbiAgICAgICAgaWYgKHRoaXMuaHR0cCkge1xyXG4gICAgICAgICAgICB0aGlzLmh0dHAuY29udGV4dCA9IHRoaXMuY29udGV4dDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuYWxsQ29sdW1uc1RpdGxlID0gdGhpcy5sb2NhbFNlcnZpY2UuZ2V0VmFsdWUoXCJsb29rdXAuYWxsQ29sdW1uc1wiKTtcclxuICAgICAgICB0aGlzLm11c3RXcml0ZVNvbWV0aGluZyA9IHRoaXMubG9jYWxTZXJ2aWNlLmdldFZhbHVlKFxyXG4gICAgICAgICAgICBcImxvb2t1cC5tdXN0V3JpdGVTb21ldGhpbmdcIlxyXG4gICAgICAgICk7XHJcbiAgICAgICAgdGhpcy5tdXN0Q2hvb3NBZGF0YXJvdyA9IHRoaXMubG9jYWxTZXJ2aWNlLmdldFZhbHVlKFxyXG4gICAgICAgICAgICBcImxvb2t1cC5tdXN0Q2hvb3NBZGF0YXJvd1wiXHJcbiAgICAgICAgKTtcclxuICAgICAgICB0aGlzLmFkZEZhdm9yaXRlU3VjY2VzcyA9XHJcbiAgICAgICAgICAgIHRoaXMubG9jYWxTZXJ2aWNlLmdldFZhbHVlKFwibG9va3VwLmZhdm9yaXRlSW5mby5hZGRGYXZcIikgfHxcclxuICAgICAgICAgICAgdGhpcy5hZGRGYXZvcml0ZVN1Y2Nlc3M7XHJcbiAgICAgICAgdGhpcy5kZWxGYXZvcml0ZVN1Y2Nlc3MgPVxyXG4gICAgICAgICAgICB0aGlzLmxvY2FsU2VydmljZS5nZXRWYWx1ZShcImxvb2t1cC5mYXZvcml0ZUluZm8uY2FuY2VsRmF2XCIpIHx8XHJcbiAgICAgICAgICAgIHRoaXMuZGVsRmF2b3JpdGVTdWNjZXNzO1xyXG5cclxuICAgICAgICB0aGlzLmRpYWxvZ01nci5vbkRpYWxvZ0NyZWF0ZWQoKTtcclxuXHJcbiAgICAgICAgdGhpcy5fdHJlZUluZm9fID0gdGhpcy50cmVlSW5mbyA/IGNsb25lRGVlcCh0aGlzLnRyZWVJbmZvKSA6IG51bGw7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnF1aWNrU2VsZWN0KSB7XHJcbiAgICAgICAgICAgIHRoaXMucXVpY2tTZWxlY3QgPSBPYmplY3QuYXNzaWduKHt9LCBRdWlja1NlbGVjdERlZmF1bHRPcHRpb25zLCB0aGlzLnF1aWNrU2VsZWN0IHx8IHt9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKiDlhoXlrrnkuK3nlZnnmb3ovrnot50gKi9cclxuICAgICAgICB0aGlzLnNldENvbnRhaW5lck1hcmdpbigpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0Q29udGFpbmVyTWFyZ2luKCkge1xyXG4gICAgICAgIGNvbnN0IG1ybiA9IHRoaXMubGF5b3V0Rm9ybWF0ID09PSAnZGVmYXVsdCcgPyAxNCA6IDI0O1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyTWFyZ2luID0geyB0b3A6IDAsIGJvdHRvbTogNSwgbGVmdDogbXJuLCByaWdodDogbXJuIH07XHJcblxyXG4gICAgICAgIHRoaXMuY29udGFpbmVyU3R5bGUgPSB7XHJcbiAgICAgICAgICAgIG1hcmdpbkxlZnQ6IHRoaXMuY29udGFpbmVyTWFyZ2luLmxlZnQgKyBcInB4XCIsXHJcbiAgICAgICAgICAgIG1hcmdpblJpZ2h0OiB0aGlzLmNvbnRhaW5lck1hcmdpbi5yaWdodCArIFwicHhcIixcclxuICAgICAgICAgICAgbWFyZ2luVG9wOiB0aGlzLmNvbnRhaW5lck1hcmdpbi50b3AgKyBcInB4XCIsXHJcbiAgICAgICAgICAgIG1hcmdpbkJvdHRvbTogdGhpcy5jb250YWluZXJNYXJnaW4uYm90dG9tICsgXCJweFwiLFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkRlc3Ryb3koKSB7XHJcbiAgICAgICAgc3VwZXIubmdPbkRlc3Ryb3koKTtcclxuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMuZm9yRWFjaCgobikgPT4ge1xyXG4gICAgICAgICAgICBpZiAobikge1xyXG4gICAgICAgICAgICAgICAgbi51bnN1YnNjcmliZSgpO1xyXG4gICAgICAgICAgICAgICAgbiA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0aW9uTWdyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uTWdyLmRlc3Ryb3koKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucyA9IFtdO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5mYXJyaXNJbnN0YW5jZXMpIHtcclxuICAgICAgICAgICAgdGhpcy5mYXJyaXNJbnN0YW5jZXMuZGVzdHJveSh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMubG9va3VwU2VhcmNoSW5wdXRFdmVudCkge1xyXG4gICAgICAgICAgICB0aGlzLmxvb2t1cFNlYXJjaElucHV0RXZlbnQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5sb29rdXBVdGlscy5kZXN0cm95KCk7XHJcblxyXG4gICAgICAgIHRoaXMub3ZlckxheVNlcnZpY2UuZGVzdG9yeSh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMub3ZlckxheVNlcnZpY2UgPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpIHtcclxuICAgICAgICBpZiAoY2hhbmdlcy5jb2x1bW5zICYmICFjaGFuZ2VzLmNvbHVtbnMuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FjaGVVc2VyQ29uZmlnKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY2hhbmdlcy5sYXlvdXRGb3JtYXQgJiYgIWNoYW5nZXMubGF5b3V0Rm9ybWF0LmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldENvbnRhaW5lck1hcmdpbigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBuZ0FmdGVyVmlld0luaXQoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnF1aWNrU2VsZWN0IHx8ICF0aGlzLnF1aWNrU2VsZWN0LmVuYWJsZSkge1xyXG4gICAgICAgICAgICB0aGlzLmxvb2t1cFNlYXJjaElucHV0RXZlbnQgPSBvblRleHRDaGFuZ2VkLmJpbmQodGhpcykoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIOWIneWni+WMluS4quaAp+WMlumFjee9rlxyXG4gICAgICAgIGlmICh0aGlzLnVzZVBlcnNpb25hbENvbmYpIHtcclxuICAgICAgICAgICAgdGhpcy5mYXZIZWxwZXIuaW5pdFBlcnNvbmFsSW5mbygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMudXNlRXh0ZW5kSW5mbykge1xyXG4gICAgICAgICAgICBjb25zdCBqc29uRGF0YSA9IHRoaXMuc2VsZWN0aW9uTWdyLmdldEJpbmRpbmdEYXRhKCk7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlRXh0ZW5kSW5mbyhqc29uRGF0YSwgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMudmlld1R5cGUgPT09IFwidGV4dFwiKSB7XHJcbiAgICAgICAgICAgIC8vIHRoaXMuc2hvcnRjdXRzLmFkZCh7XHJcbiAgICAgICAgICAgIC8vICAgICBrZXk6ICdGMicsXHJcbiAgICAgICAgICAgIC8vICAgICB0YXJnZXQ6IHRoaXMuaW5wdXRHcm91cC50ZXh0Ym94Lm5hdGl2ZUVsZW1lbnQsXHJcbiAgICAgICAgICAgIC8vICAgICBjb21tYW5kOiAoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgdGhpcy5zaG93RGlhbG9nKCk7XHJcbiAgICAgICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgICAgIC8vIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcjIubGlzdGVuKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5pbnB1dEdyb3VwLnRleHRib3gubmF0aXZlRWxlbWVudCxcclxuICAgICAgICAgICAgICAgIFwia2V5ZG93bi5GMlwiLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93RGlhbG9nLmJpbmQodGhpcylcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyTW91c2VFdmVudEZvclRhZ1ZpZXcoKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnRhZ2JveEhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZWwgPVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFnYm94Lm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tdWx0aS1tb3JlXCIpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHRiaCA9IHRoaXMudGFnYm94SGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgaWYgKHRiaCAhPT0gXCJhdXRvXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0YmggKz0gXCJweFwiO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tYXhUYWdib3hIZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIyLnNldFN0eWxlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm1heEhlaWdodFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYCR7dGhpcy5tYXhUYWdib3hIZWlnaHR9cHhgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyMi5zZXRTdHlsZShlbCwgXCJoZWlnaHRcIiwgdGJoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZWwgJiYgdGhpcy5mYXJyaXNJbnN0YW5jZXMpIHtcclxuICAgICAgICAgICAgdGhpcy5mYXJyaXNJbnN0YW5jZXMuYWRkKHRoaXMuZWwubmF0aXZlRWxlbWVudCwgdGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY3JlYXRlSW5zdGFuY2UoKSB7XHJcbiAgICAgICAgdGhpcy5odHRwID0gdGhpcy5pbmplY3Rvci5nZXQoU2VydmVyU2lkZVRva2VuLCBudWxsKTtcclxuICAgICAgICB0aGlzLm1lc3NhZ2VyU2VydmljZSA9IHRoaXMuaW5qZWN0b3IuZ2V0KE1lc3NhZ2VyU2VydmljZSk7XHJcbiAgICAgICAgdGhpcy5sb2FkaW5nU2VydmljZSA9IHRoaXMuaW5qZWN0b3IuZ2V0KExvYWRpbmdTZXJ2aWNlKTtcclxuICAgICAgICB0aGlzLm5vdGlmeVNlcnZpY2UgPSB0aGlzLmluamVjdG9yLmdldChOb3RpZnlTZXJ2aWNlLCBudWxsKTtcclxuXHJcbiAgICAgICAgdGhpcy5wZXJzb25hbENvbmZpZ1NlcnZpY2UgPSB0aGlzLmluamVjdG9yLmdldChcclxuICAgICAgICAgICAgUGVyc29uYWxDb25maWdTZXJ2aWNlLFxyXG4gICAgICAgICAgICBudWxsXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgdGhpcy5sb29rdXBTZWxlY3Rpb25TZXIgPSBuZXcgTG9va3VwU2VsZWN0aW9uU2VydmljZSh0aGlzKTtcclxuXHJcbiAgICAgICAgdGhpcy51dGlsU2VydmljZSA9IG5ldyBVdGlsU2VydmljZSh0aGlzKTtcclxuICAgICAgICB0aGlzLmxvY2FsU2VydmljZSA9IHRoaXMuaW5qZWN0b3IuZ2V0KExvY2FsZVNlcnZpY2UpO1xyXG4gICAgICAgIHRoaXMudHJlZU5vZGVIZWxwZXIgPSBuZXcgVHJlZU5vZGVIZWxwZXIodGhpcyk7XHJcblxyXG4gICAgICAgIHRoaXMuZmF2SGVscGVyID0gbmV3IEZhdm9yaXRlSGVscGVyKHRoaXMpO1xyXG4gICAgICAgIHRoaXMudHRFdmVudE1nciA9IG5ldyBUcmVlVGFibGVFdmVudE1hbmFnZXIodGhpcyk7XHJcbiAgICAgICAgdGhpcy5tdWx0aVNlbE1nciA9IG5ldyBNdWx0aVNlbGVjdGlvbk1hbmFnZXIodGhpcyk7XHJcbiAgICAgICAgdGhpcy5odHRwTWdyID0gbmV3IExvb2t1cEh0dHBNYW5hZ2VyKHRoaXMpO1xyXG4gICAgICAgIHRoaXMubG9va3VwQ21wTWdyID0gbmV3IExvb2t1cENvbXBvbmVudE1hbmFnZXIodGhpcyk7XHJcbiAgICAgICAgdGhpcy5kaWFsb2dNZ3IgPSBuZXcgTG9va3VwRGlhbG9nTWFuYWdlcih0aGlzKTtcclxuICAgICAgICB0aGlzLnNlbGVjdGlvbk1nciA9IG5ldyBTZWxlY3Rpb25NYW5hZ2VyKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuZHRFdmVudE1nciA9IG5ldyBEYXRhVGFibGVFdmVudE1hbmFnZXIodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgc2hvd0RpYWxvZygpOiBhbnkge1xyXG4gICAgICAgIGlmICh0aGlzLmRpc2FibGVkIHx8IHRoaXMucmVhZG9ubHkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25NZ3IuaW5pdERpc3BsYXlWYWx1ZSgpO1xyXG4gICAgICAgIHRoaXMuZGljdFBpY2tpbmdTdWJzY3JpcHRpb24gPSB0aGlzLmRpY3RQaWNraW5nKHtcclxuICAgICAgICAgICAgaW5zdGFuY2U6IHRoaXMsXHJcbiAgICAgICAgfSkuc3Vic2NyaWJlKChwcjogUGlja2luZ1Jlc3VsdCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmRpYWxvZ01nci5jYW5PcGVuRGlhbG9nKHByKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiDliKTmlq3mmK/lkKbkuLrlj4zliJfooajluK7liqkgKi9cclxuICAgIGlzRG91YmxsZUxpc3QoKSB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAoIHRoaXMuZGlzcGxheVR5cGUgPT09IExvb2t1cEdyaWREaXNwbGF5VHlwZS5OYXZMaXN0IHx8XHJcbiAgICAgICAgICAgIHRoaXMuZGlzcGxheVR5cGUgPT09IExvb2t1cEdyaWREaXNwbGF5VHlwZS5OYXZUcmVlTGlzdCB8fFxyXG4gICAgICAgICAgICB0aGlzLmRpc3BsYXlUeXBlID09PSBMb29rdXBHcmlkRGlzcGxheVR5cGUuTmF2TGlzdFRyZWUpICYmIHRoaXMuc2hvd05hdmlnYXRpb25cclxuICAgICAgICApO1xyXG4gICAgfVxyXG4gICAgLyoqIOWIpOaWreaYr+WQpuaYvuekuuS4uuagkeW4ruWKqSAqL1xyXG4gICAgaXNUcmVlKCkge1xyXG4gICAgICAgIGNvbnN0IGR0eXAgPSB0aGlzLmRpc3BsYXlUeXBlLnRvVXBwZXJDYXNlKClcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICBkdHlwID09PSBMb29rdXBHcmlkRGlzcGxheVR5cGUuVHJlZUxpc3QgfHwgZHR5cCA9PT0gTG9va3VwR3JpZERpc3BsYXlUeXBlLk5hdkxpc3RUcmVlXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBvblJlc2l6ZWQoZTogYW55KSB7XHJcbiAgICAgICAgdGhpcy5yZXNpemVDbXAoZS5zaXplKTtcclxuICAgICAgICB0aGlzLnJlc2l6ZWQuZW1pdChlLnNpemUpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uUmVzaXppbmcocG9zOiBJUmVzaXplRXZlbnQpIHtcclxuICAgICAgICB0aGlzLnJlc2l6aW5nLmVtaXQocG9zLnNpemUpO1xyXG4gICAgICAgIHRoaXMucmVzaXplQ21wKHBvcy5zaXplKTtcclxuICAgICAgICBpZiAodGhpcy5pc0RvdWJsbGVMaXN0KCkgJiYgdGhpcy5sZWZ0Q29tcG9uZW50UmVmKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGVmdENvbXBvbmVudFJlZi5pbnN0YW5jZS5yZXNpemUoe1xyXG4gICAgICAgICAgICAgICAgd2lkdGg6IHRoaXMubGVmdFBhbmVsLndpZHRoLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiB0aGlzLmRpYWxvZ01nci5nZXRIZWlnaHQoKSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uTWF4RGlhbG9nKHBvczogSVJlc2l6ZUV2ZW50KSB7XHJcbiAgICAgICAgdGhpcy5yZXNpemVDbXAocG9zLnNpemUpO1xyXG4gICAgICAgIGlmICh0aGlzLmxlZnRQYW5lbCkge1xyXG4gICAgICAgICAgICB0aGlzLmxlZnRDb21wb25lbnRSZWYuaW5zdGFuY2UucmVzaXplKHtcclxuICAgICAgICAgICAgICAgIHdpZHRoOiB0aGlzLmxlZnRQYW5lbC53aWR0aCxcclxuICAgICAgICAgICAgICAgIGhlaWdodDogdGhpcy5kaWFsb2dNZ3IuZ2V0SGVpZ2h0KCksXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyB0ZnMgNTQzMTMyIFxyXG4gICAgICAgIC8vIHRoaXMuZGlhbG9nSGVpZ2h0ID0gcG9zLnNpemUuaGVpZ2h0O1xyXG4gICAgICAgIHRoaXMuZGlhbG9nQ29udGVudEhlaWdodCA9IHRoaXMuZGlhbG9nTWdyLnJlc2V0RGlhbG9nQ29udGVudEhlaWdodCgpO1xyXG4gICAgICAgIHRoaXMuZGlhbG9nTWF4ZWQuZW1pdChwb3Muc2l6ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzaXplQ21wKHNpemU/OiBhbnkpIHtcclxuICAgICAgICBpZiAoIXRoaXMuY29tcG9uZW50UmVmIHx8ICF0aGlzLmNvbXBvbmVudFJlZi5pbnN0YW5jZSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXNpemUpIHtcclxuICAgICAgICAgICAgc2l6ZSA9IHRoaXMuZGlhbG9nLnNpemU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IF9zaXplID0ge1xyXG4gICAgICAgICAgICB3aWR0aDpcclxuICAgICAgICAgICAgICAgIHNpemUud2lkdGggLVxyXG4gICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXJNYXJnaW4ubGVmdCAtXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lck1hcmdpbi5yaWdodCxcclxuICAgICAgICAgICAgaGVpZ2h0OiB0aGlzLmRpYWxvZ01nci5nZXRIZWlnaHQoKSxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpZiAodGhpcy51c2VGYXZvcml0ZSAmJiB0aGlzLmZhdm9yaXRlc0NvbXBvbmVudFJlZikge1xyXG4gICAgICAgICAgICB0aGlzLmZhdm9yaXRlc0NvbXBvbmVudFJlZi5pbnN0YW5jZS5yZXNpemUoX3NpemUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5pc1JlY29yZFNpemUpIHtcclxuICAgICAgICAgICAgdGhpcy5wZXJzb25hbENvbmYuc2l6ZSA9IHRoaXMuZGlhbG9nLnNpemU7XHJcbiAgICAgICAgICAgIHRoaXMucGVyc29uYWxDb25maWdTZXJ2aWNlLnVwZGF0ZVBlcnNvbmFsQ29uZmlnKHtcclxuICAgICAgICAgICAgICAgIHNpemU6IHRoaXMuZGlhbG9nLnNpemUsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5pc0RvdWJsbGVMaXN0KCkpIHtcclxuICAgICAgICAgICAgX3NpemUud2lkdGggPSBzaXplLndpZHRoIC0gdGhpcy5sZWZ0UGFuZWwud2lkdGggLSAodGhpcy5sYXlvdXRGb3JtYXQgPT09ICdkZWZhdWx0JyA/IDIwIDogNDgpIC0gNzs7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmNvbXBvbmVudFJlZi5pbnN0YW5jZS5yZXNpemUoX3NpemUpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY2hlY2tHcmlkT3B0aW9ucygpIHtcclxuICAgICAgICBpZiAoIXRoaXMuZ3JpZE9wdGlvbnMuaWRGaWVsZCkge1xyXG4gICAgICAgICAgICB0aGlzLndyaXRlQ29uc29sZShcIuacquiuvue9ruS4u+mUruWtl+autSBpZEZpZWxkXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmJlZm9yZVNlbGVjdERhdGEpIHtcclxuICAgICAgICAgICAgdGhpcy5iZWZvcmVTZWxlY3REYXRhID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9mKHRydWUpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgY3R4TWVudUxhbmd1YWdlcyA9XHJcbiAgICAgICAgICAgIHRoaXMubG9jYWxTZXJ2aWNlLmdldFZhbHVlKFwibG9va3VwLmNvbnRleHRNZW51XCIpO1xyXG5cclxuICAgICAgICB0aGlzLnRyZWVUYWJsZU9wdGlvbnMgPSBPYmplY3QuYXNzaWduKFxyXG4gICAgICAgICAgICB7IGxhbmd1YWdlOiBjdHhNZW51TGFuZ3VhZ2VzIH0sXHJcbiAgICAgICAgICAgIHRoaXMuZGVmYXVsdFRyZWVUYWJsZU9wdGlvbnMsXHJcbiAgICAgICAgICAgIHRoaXMudHJlZVRhYmxlT3B0aW9ucyB8fCB7fVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgLy8gdGhpcy5kYXRhVGFibGVPcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5kZWZhdWx0VHJlZVRhYmxlT3B0aW9ucywgdGhpcy5kYXRhVGFibGVPcHRpb25zKTtcclxuICAgICAgICAvLyB0aGlzLm5hdlRyZWVUYWJsZU9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmRlZmF1bHRUcmVlVGFibGVPcHRpb25zLCB0aGlzLm5hdlRyZWVUYWJsZU9wdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldENvbXBvbmVudFR5cGUoKTogVHlwZTxhbnk+IHtcclxuICAgICAgICBpZiAoIXRoaXMuZGlzcGxheVR5cGUpIHtcclxuICAgICAgICAgICAgdGhpcy5kaXNwbGF5VHlwZSA9IFwiTElTVFwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzd2l0Y2ggKHRoaXMuZGlzcGxheVR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSBMb29rdXBHcmlkRGlzcGxheVR5cGUuTGlzdDpcclxuICAgICAgICAgICAgY2FzZSBMb29rdXBHcmlkRGlzcGxheVR5cGUuTmF2TGlzdDpcclxuICAgICAgICAgICAgY2FzZSBMb29rdXBHcmlkRGlzcGxheVR5cGUuTmF2VHJlZUxpc3Q6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gRGF0YVRhYmxlQ29tcG9uZW50O1xyXG4gICAgICAgICAgICBjYXNlIExvb2t1cEdyaWREaXNwbGF5VHlwZS5UcmVlTGlzdDpcclxuICAgICAgICAgICAgY2FzZSBMb29rdXBHcmlkRGlzcGxheVR5cGUuTmF2TGlzdFRyZWU6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gVHJlZVRhYmxlQ29tcG9uZW50O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzaG93TG9hZGluZyhtc2cgPSBcIlwiKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGlhbG9nICYmIHRoaXMuZGlhbG9nLm1vZGFsQ29udGVudCAmJiAhdGhpcy5sb2FkaW5nKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9wdHMgPSB7XHJcbiAgICAgICAgICAgICAgICBjb250YWluZXI6IHRoaXMuZGlhbG9nLm1vZGFsQ29udGVudCxcclxuICAgICAgICAgICAgICAgIGRlbGF5OiAyMDAsXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBpZiAobXNnKSB7XHJcbiAgICAgICAgICAgICAgICBvcHRzW1wibWVzc2FnZVwiXSA9IG1zZztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gdGhpcy5sb2FkaW5nU2VydmljZS5zaG93KG9wdHMpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IHRoaXMubG9hZGluZ1NlcnZpY2Uuc2hvdygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjbG9zZUxvYWRpbmcoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubG9hZGluZykge1xyXG4gICAgICAgICAgICB0aGlzLmxvYWRpbmcuY2xvc2UoKTtcclxuICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMubG9hZGluZ1NlcnZpY2UuY2xlYXJBbGwoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRTZWFyY2hDb2x1bW5zKHJlc2RhdGE6IGFueSkge1xyXG4gICAgICAgIGNvbnN0IGNvbHMgPSByZXNkYXRhLmNvbHVtbnMgfHwgdGhpcy5jb2x1bW5zO1xyXG4gICAgICAgIGlmIChyZXNkYXRhLnNlYXJjaEZpZWxkcykge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzZGF0YS5zZWFyY2hGaWVsZHMubWFwKChzZikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYyA9IGNvbHMuZmluZChcclxuICAgICAgICAgICAgICAgICAgICAoY29sKSA9PiBjb2wuZmllbGQudG9Mb3dlckNhc2UoKSA9PT0gc2YudmFsdWUudG9Mb3dlckNhc2UoKVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIGlmIChjKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2YubGFiZWwgPSBjLnRpdGxlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNmO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2UgaWYgKGNvbHMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbHNcclxuICAgICAgICAgICAgICAgIC5maWx0ZXIoKGMpID0+IGMuc2VhcmNoRmllbGQpXHJcbiAgICAgICAgICAgICAgICAubWFwKChjb2wpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogY29sLnRpdGxlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogY29sLmZpZWxkLFxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaW5pdE9wdGlvbnMocmVzRGF0YTogTG9va3VwR3JpZFJlc3VsdCkge1xyXG4gICAgICAgIGxldCBvYnNlciA9IG9mKHRydWUpO1xyXG4gICAgICAgIHRoaXMuZ3JpZE9wdGlvbnMuc2VhcmNoRmllbGRzID0gdGhpcy5nZXRTZWFyY2hDb2x1bW5zKHJlc0RhdGEpO1xyXG4gICAgICAgIGlmIChyZXNEYXRhKSB7XHJcbiAgICAgICAgICAgIC8vIOWmguaenOe7hOS7tuS4reacquiuvue9ruaYvuekuuWIl++8jOWImeS9v+eUqOacjeWKoeWZqOerr+i/lOWbnueahOiuvue9ru+8myDlkKbliJnlsIbkvb/nlKjnu4Tku7bkuK3phY3nva7nmoTlsZXnpLrliJdcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgKCF0aGlzLmNvbHVtbnMgfHwgIXRoaXMuY29sdW1ucy5sZW5ndGgpICYmXHJcbiAgICAgICAgICAgICAgICByZXNEYXRhLmNvbHVtbnMgJiZcclxuICAgICAgICAgICAgICAgIHJlc0RhdGEuY29sdW1ucy5sZW5ndGhcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbnMgPSByZXNEYXRhLmNvbHVtbnM7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2V0TG9va3VwVGl0bGVUZXh0KHJlc0RhdGEpO1xyXG5cclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5pc0RvdWJsbGVMaXN0KCkgJiZcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nV2lkdGggPCB0aGlzLm5hdkxvb2t1cERpYWxvZ01pbldpZHRoICYmXHJcbiAgICAgICAgICAgICAgICAhdGhpcy5pc1JlY29yZFNpemVcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZ1dpZHRoID0gdGhpcy5uYXZMb29rdXBEaWFsb2dNaW5XaWR0aDtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nLnJlU2l6ZSh7IHdpZHRoOiB0aGlzLmRpYWxvZ1dpZHRoIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuY3VzdG9tRGlzcGxheVR5cGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMuZGlzcGxheVR5cGUgPSByZXNEYXRhLmRpc3BsYXlUeXBlIHx8IHRoaXMuZGlzcGxheVR5cGUgfHwgJ0xJU1QnO1xyXG4gICAgICAgICAgICAgICAgLy8gaWYgKHRoaXMudHJlZVRvTGlzdCkge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgIHRoaXMuZGlzcGxheVR5cGUgPSB0aGlzLmlzRG91YmxsZUxpc3QoKSA/ICcgTkFWTElTVCAnOiAnTElTVCc7XHJcbiAgICAgICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZURldGVjdG9yLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9va3VwQ21wTWdyLmNyZWF0ZUNvbXBvbmVudFdpdGhTZXJ2ZXJEYXRhKHJlc0RhdGEpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIHRoaXMuaXNEb3VibGxlTGlzdCgpICYmIHJlc0RhdGEubmF2aWdhdGlvbiAmJiAhdGhpcy5sZWZ0Q29tcG9uZW50UmVmKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5hdmlnYXRpb25PcHRpb25zID0gcmVzRGF0YS5uYXZpZ2F0aW9uO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5uYXZpZ2F0aW9uT3B0aW9ucy5ob3ZlciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5hdmlnYXRpb25PcHRpb25zLnNlYXJjaEZpZWxkcyA9IHRoaXMuZ2V0U2VhcmNoQ29sdW1ucyh0aGlzLm5hdmlnYXRpb25PcHRpb25zKTtcclxuICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSBjb2x1bW5zIGZvcm1hdHRlclxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY3VzdG9tTmF2Rm9ybWF0dGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uYXZpZ2F0aW9uT3B0aW9ucy5jb2x1bW5zLmZvckVhY2goKGNvbCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jdXN0b21OYXZGb3JtYXR0ZXJbY29sLmZpZWxkXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sLmZvcm1hdHRlciA9IHRoaXMuY3VzdG9tTmF2Rm9ybWF0dGVyW2NvbC5maWVsZF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uYXZpZ2F0aW9uT3B0aW9uc1tcInJvd1N0eWxlclwiXSA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VzdG9tTmF2Rm9ybWF0dGVyLnJvd1N0eWxlcjtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5hdmlnYXRpb25PcHRpb25zW1wiY2VsbFN0eWxlclwiXSA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VzdG9tTmF2Rm9ybWF0dGVyLmNlbGxTdHlsZXI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyAyMDIxMDkyNiDmoJHlr7zoiKrluK7liqnkuK0g5bem5L6n5qCR5pSv5oyB5YiG5bGC5Yqg6L29XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5kaXNwbGF5VHlwZSA9PT0gTG9va3VwR3JpZERpc3BsYXlUeXBlLk5hdlRyZWVMaXN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IF9uYXZfdHJlZWluZm9fbG9hZHR5cGUgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5hdmlnYXRpb25PcHRpb25zLnRyZWVJbmZvLmxvYWREYXRhVHlwZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5sb2FkVHJlZURhdGFUeXBlICE9PSBcImRlZmF1bHRcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfbmF2X3RyZWVpbmZvX2xvYWR0eXBlID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZFRyZWVEYXRhVHlwZSA9PT0gXCJsb2FkYWxsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiYWxsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiYXN5bmNcIjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uYXZpZ2F0aW9uT3B0aW9ucy50cmVlSW5mby5sb2FkRGF0YVR5cGUgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfbmF2X3RyZWVpbmZvX2xvYWR0eXBlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIG9ic2VyID0gdGhpcy5sb29rdXBDbXBNZ3IuY3JlYXRlTGVmdENvbXBvbmVudCh0aGlzLm5hdmlnYXRpb25PcHRpb25zKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9va3VwQ21wTWdyLmNyZWF0ZUNvbnRlbnQodGhpcy5ncmlkT3B0aW9ucyk7XHJcbiAgICAgICAgICAgIHRoaXMubG9va3VwQ21wTWdyLmNyZWF0ZUZhdm9yaXRlQ29tcG9uZW50KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5pc1RleHRDaGFuZ2UpIHtcclxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnRSZWYuaW5zdGFuY2Uuc2VhcmNoRGF0YS52YWx1ZSA9IHRoaXMuZGlzcGxheVRleHQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX3NlYXJjaFN0YXRlICYmIHRoaXMuX3NlYXJjaFN0YXRlLnZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbXBvbmVudFJlZi5pbnN0YW5jZS5zZWFyY2hEYXRhLnZhbHVlID0gdGhpcy5fc2VhcmNoU3RhdGUudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHVwZGF0ZSBjb2x1bW5zIGZvcm1hdHRlclxyXG4gICAgICAgIGlmICh0aGlzLmN1c3RvbUZvcm1hdHRlcikge1xyXG4gICAgICAgICAgICB0aGlzLmNvbHVtbnMuZm9yRWFjaCgoY29sKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jdXN0b21Gb3JtYXR0ZXJbY29sLmZpZWxkXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbC5mb3JtYXR0ZXIgPSB0aGlzLmN1c3RvbUZvcm1hdHRlcltjb2wuZmllbGRdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmN1c3RvbUZvcm1hdHRlci5yb3dTdHlsZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50UmVmLmluc3RhbmNlLnJvd1N0eWxlciA9IHRoaXMuY3VzdG9tRm9ybWF0dGVyLnJvd1N0eWxlcjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuY3VzdG9tRm9ybWF0dGVyLmNlbGxTdHlsZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50UmVmLmluc3RhbmNlLmNlbGxTdHlsZXIgPSB0aGlzLmN1c3RvbUZvcm1hdHRlci5jZWxsU3R5bGVyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHJlc0RhdGEuY3VzdG9tU3R5bGVzKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IHJvdzogcm93U3R5bGVycywgY2VsbDogY2VsbFN0eWxlcnMgfSA9IHJlc0RhdGEuY3VzdG9tU3R5bGVzO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGZpbHRlckZuID0gKG4sIGRhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkID0gdGhpcy51dGlscy5nZXRWYWx1ZShuLmZpZWxkLCBkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGQgPT09ICdib29sZWFuJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobi52YWx1ZSA9PSAnMCcgfHwgbi52YWx1ZSA9PSAnMScgfHwgbi52YWx1ZSA9PSAndHJ1ZScgfHwgbi52YWx1ZSA9PSAnZmFsc2UnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZCA9PT0gKG4udmFsdWUgPT0gJzAnIHx8IG4udmFsdWUgPT0gJ2ZhbHNlJykgPyBmYWxzZSA6IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQgPT09ICEhbi52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQgPT09IG4udmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHJvd1N0eWxlcnMpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXBvbmVudFJlZi5pbnN0YW5jZS5yb3dTdHlsZXIgPSAoeyBkYXRhIH0pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3R5bGVJdGVtID0gcm93U3R5bGVycy5maW5kKG4gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpbHRlckZuKG4sIGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0eWxlSXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0eWxlSXRlbS5zdHlsZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoY2VsbFN0eWxlcnMpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXBvbmVudFJlZi5pbnN0YW5jZS5jZWxsU3R5bGVyID0gKGUsIGZpZWxkKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgZGF0YSB9ID0gZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3R5bGVJdGVtID0gY2VsbFN0eWxlcnMuZmlsdGVyKG4gPT4gbi5maWVsZCA9PT0gZmllbGQpLmZpbmQodCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmlsdGVyRm4odCwgZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0eWxlSXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0eWxlSXRlbS5zdHlsZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHRoaXMuY2hhbmdlRGV0ZWN0b3IuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIHJldHVybiBvYnNlcjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiuvue9ruW4ruWKqeeql+WPo+agh+mimFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHNldExvb2t1cFRpdGxlVGV4dChyZXNEYXRhOiBMb29rdXBHcmlkUmVzdWx0KSB7XHJcbiAgICAgICAgaWYgKHJlc0RhdGEuZGlzcGxheUluZm8pIHtcclxuICAgICAgICAgICAgdGhpcy5kaXNwbGF5SW5mbyA9IHJlc0RhdGEuZGlzcGxheUluZm87XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDlpoLmnpzoh6rlrprkuYnmoIfpopjvvIzlsIbku6XmraTmoIfpopjkuLrlh4bjgILlkKbliJnliqDovb3mnI3liqHlmajnq6/ov5Tlm57nmoTmlbDmja5cclxuICAgICAgICBpZiAodGhpcy50aXRsZSAmJiB0aGlzLnRpdGxlICE9PSBcIuatpOWkhOaYvuekuuW4ruWKqeagh+mimFwiKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzcGxheUluZm8udGl0bGUgPSB0aGlzLnRpdGxlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZGlzcGxheUluZm8gJiYgcmVzRGF0YS50aXRsZSkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuZGlzcGxheUluZm8udGl0bGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheUluZm8udGl0bGUgPSByZXNEYXRhLnRpdGxlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2hvd0dldEFsbENoaWxkcmVuQ2hlY2tib3goKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNUcmVlKCkgJiYgdGhpcy50cmVlSW5mbykge1xyXG4gICAgICAgICAgICB0aGlzLmVuYWJsZUdldEFsbENoaWxkTm9kZXMgPVxyXG4gICAgICAgICAgICAgICAgdGhpcy50cmVlSW5mby5sb2FkRGF0YVR5cGUgIT09IFwiYWxsXCIgJiYgdGhpcy50cmVlSW5mby5sYXllclR5cGUgPT09IFwicGF0aGNvZGVcIjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmVuYWJsZUdldEFsbENoaWxkTm9kZXMgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdERhdGEoKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IG9ic2VydmVyID0ge1xyXG4gICAgICAgICAgICBuZXh0OiAoZGF0YTogTG9va3VwR3JpZFJlc3VsdCkgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChkYXRhID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5jb2x1bW5zIHx8ICF0aGlzLmNvbHVtbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VMb2FkaW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VEaWFsb2coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLm1lc3NhZ2VyU2VydmljZS5tb2RhbHMgfHwgIXRoaXMubWVzc2FnZXJTZXJ2aWNlLm1vZGFscy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5U2VydmljZS5lcnJvcih7bXNnOiB0aGlzLmxvY2FsU2VydmljZS5nZXRWYWx1ZSgnbG9va3VwLmNvbmZpZ0Vycm9yJykgLCB0aW1lb3V0OiAzMDAwfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyDmnI3liqHlmajnq6/lj5HnlJ/plJnor6/vvIzov5Tlm55OVUxMIOaXtu+8jOebtOaOpeWFs+mXreeql+WPo1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzU2hvdyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmRpYWxvZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZy5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLmluaXRPcHRpb25zKGRhdGEpLnN1YnNjcmliZSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZENvbHVtbnMgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm11bHRpU2VsTWdyLmluaXRTZWxlY3RlZENvbHVtbnMoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZhdm9yaXRlQ29sdW1ucyA9IHRoaXMuZmF2SGVscGVyLmdldEZhdm9yaXRlQ29sdW1ucygpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy51c2VQZXJzaW9uYWxDb25mKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5wZXJzb25hbENvbmZpZ1NlcnZpY2UuZ2V0UGVyc29uYWxEYXRhKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGVyc29uYWxDb25maWdTZXJ2aWNlLnNhdmVQZXJzb25hbENvbmZpZyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBlcnNvbmFsQ29uZlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNUYWJDaGFuZ2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9va3VwU2VsZWN0aW9uU2VyLmxvYWRTZWxlY3Rpb25zKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5zZWxlY3RlZEl0ZW1zIHx8IFtdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0RvdWJsbGVMaXN0KCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5a+86Iiq5biu5Yqp5pe277yM6K6+572u5bem5L6n6YCJ5Lit5pWw5o2u5pe277yM5LiN5Yqg6L295Li75pWw5o2u5YiX6KGo44CCXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm5hdlNlbGVjdGVkSWRzIHx8IHRoaXMuc2VsZWN0Rmlyc3RJbk5hdikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkRGF0YVdoZW5PcGVuID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhWydhY3RpdmVUYWInXSAmJiAhdGhpcy5pc1RhYkNoYW5nZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVUYWIgPSAnZGF0YWxpc3QnO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGVyc29uYWxDb25mICYmIHRoaXMucGVyc29uYWxDb25mLnRhYkluZGV4ICE9PSB0aGlzLmFjdGl2ZVRhYikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wZXJzb25hbENvbmYudGFiSW5kZXggPSB0aGlzLmFjdGl2ZVRhYjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZERhdGEoZGF0YSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzVHJlZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZVRhYiA9PT0gXCJkYXRhbGlzdFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0dCA9IHRoaXMuY29tcG9uZW50UmVmLmluc3RhbmNlIGFzIFRyZWVUYWJsZUNvbXBvbmVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0dC5zZWFyY2hEYXRhLnZhbHVlICYmIHRoaXMuaXRlbXMgJiYgdGhpcy5pdGVtcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pdGVtc1swXS5jaGlsZHJlbiAmJiB0aGlzLml0ZW1zWzBdLmNoaWxkcmVuLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0dC50b2dnbGVFeHBhbmQodGhpcy5pdGVtc1swXSwgdHJ1ZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93R2V0QWxsQ2hpbGRyZW5DaGVja2JveCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzVGV4dENoYW5nZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3NlYXJjaFJlc3VsdCA9IG51bGw7IC8vIOa4heepuuS4tOaXtuafpeivoiDnu5PmnpxcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlTG9hZGluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuaXNSZWFkeSQubmV4dCh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzUmVhZHkgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3IuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9va3VwaW5pdGlhbGl6YXRpb25TdWJqZWN0Lm5leHQoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlcnJvcjogKGVycjogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLmlzUmVhZHkkLm5leHQodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlTG9hZGluZygpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2VhcmNoUmVzdWx0ID0gbnVsbDsgLy8g5riF56m65Li05pe25p+l6K+iIOe7k+aenFxyXG4gICAgICAgICAgICAgICAgdGhpcy5pc1RleHRDaGFuZ2UgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmhhc0Vycm9yID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3IuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBlcnIgPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VyU2VydmljZS5lcnJvcihlcnIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIuTWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlclNlcnZpY2UuZXJyb3IoZXJyLk1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVyci5lcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXJTZXJ2aWNlLmV4Y2VwdGlvbihlcnIuZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VyU2VydmljZS5lcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCLlupTnlKjmnI3liqHlmajplJnor68s6K+36IGU57O757O757uf566h55CG5ZGY77yBXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGxldCBwOiBhbnkgPSB7XHJcbiAgICAgICAgICAgIHBhZ2VJbmZvOiB7XHJcbiAgICAgICAgICAgICAgICBwYWdlU2l6ZTogdGhpcy5wYWdlU2l6ZSB8fCAyMCxcclxuICAgICAgICAgICAgICAgIHBhZ2VJbmRleDogMSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIGxldCB0OiBMT0FEX0RBVEFfVFlQRSA9IFwiYWxsXCI7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNUZXh0Q2hhbmdlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3NlYXJjaFN0YXRlID0geyBcclxuICAgICAgICAgICAgICAgIGZpZWxkOiBcIipcIixcclxuICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLmRpc3BsYXlUZXh0XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9zZWFyY2hTdGF0ZSAmJiB0aGlzLl9zZWFyY2hTdGF0ZS52YWx1ZSkge1xyXG4gICAgICAgICAgICBwWydzZWFyY2gnXSA9IHRoaXMuX3NlYXJjaFN0YXRlO1xyXG4gICAgICAgICAgICB0ID0gJ3NlYXJjaCc7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmlzVGFiQ2hhbmdlZCAmJiB0aGlzLmVuYWJsZVRvU2VsZWN0KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHMgPSB0aGlzLnNlbGVjdGlvbk1nci5nZXRTZWxlY3RlZElkcygpO1xyXG4gICAgICAgICAgICBpZiAodmFscyAmJiB2YWxzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgcFtcInNlbGVjdGVkSW5mb1wiXSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZElkczogdmFscyxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpc1tcInNlbGVjdGVkSWRzXCJdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcFtcInNlbGVjdGVkSW5mb1wiXSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkSWRzOiB0aGlzW1wic2VsZWN0ZWRJZHNcIl0sXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zaG93TG9hZGluZygpO1xyXG4gICAgICAgIHRoaXMuaGFzRXJyb3IgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgdGhpcy5odHRwTWdyLmxvb2t1cFJlcXVlc3QocCwgdCkucGlwZShcclxuICAgICAgICAgICAgbWFwKChyZXN0RGF0YTogTG9va3VwR3JpZFJlc3VsdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3REYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdERhdGEuc2VsZWN0ZWRJdGVtcyA9IHJlc3REYXRhW1wic2VsZWN0ZWREYXRhXCJdIHx8IFtdO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdERhdGEgJiYgdHlwZW9mIHJlc3REYXRhID09PSBcIm9iamVjdFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3REYXRhLnNlbGVjdGVkSXRlbXMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdERhdGEgPT09IG51bGwgPyBmYWxzZSA6IHJlc3REYXRhO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICkuc3Vic2NyaWJlKG9ic2VydmVyKTtcclxuICAgIH1cclxuXHJcbiAgICBsb2FkRGF0YShyZXNEYXRhPzogTG9va3VwR3JpZFJlc3VsdCwgcmViaW5kRXZlbnQgPSB0cnVlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlVGFiID09PSBcImRhdGFsaXN0XCIpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMudXNlRmF2b3JpdGUgJiYgIXRoaXMuaXNUcmVlKCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmF2SGVscGVyLnVwZGF0ZUZhdm9yaXRlc1N0YXR1cyhyZXNEYXRhLml0ZW1zKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgc3dpdGNoICh0aGlzLmRpc3BsYXlUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIExvb2t1cEdyaWREaXNwbGF5VHlwZS5OYXZMaXN0OlxyXG4gICAgICAgICAgICAgICAgY2FzZSBMb29rdXBHcmlkRGlzcGxheVR5cGUuTmF2VHJlZUxpc3Q6XHJcbiAgICAgICAgICAgICAgICBjYXNlIExvb2t1cEdyaWREaXNwbGF5VHlwZS5MaXN0OlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZERhdGFUYWJsZURhdGEocmVzRGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlYmluZEV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHRFdmVudE1nci5iaW5kRGF0YVRhYmxlRXZlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIExvb2t1cEdyaWREaXNwbGF5VHlwZS5UcmVlTGlzdDpcclxuICAgICAgICAgICAgICAgIGNhc2UgTG9va3VwR3JpZERpc3BsYXlUeXBlLk5hdkxpc3RUcmVlOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZFRyZWVUYWJsZURhdGEocmVzRGF0YSwgcmViaW5kRXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmFjdGl2ZVRhYiA9PT0gXCJmYXZvcml0ZVwiKSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9hZEZhdkRhdGEocmVzRGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDpgInkuK3mlbDmja5cclxuICAgICAgICB0aGlzLnNlbGVjdGlvbk1nci5zZWxlY3RDdXJyZW50VmFsdWUoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGxvYWRGYXZEYXRhKHJlc3VsdDogTG9va3VwR3JpZFJlc3VsdCkge1xyXG4gICAgICAgIC8vIOWKoOi9veaUtuiXj+aVsOaNrlxyXG4gICAgICAgIGlmICh0aGlzLnVzZUZhdm9yaXRlKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzVHJlZSgpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFRyZWVJbmZvKHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0cmVlTm9kZXMgPSB0aGlzLmZhdkhlbHBlci5pbml0RmF2b3JpdGVUcmVlRGF0YShcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQuaXRlbXNcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0cmVlRGF0YSA9IHRoaXMudHJlZU5vZGVIZWxwZXJcclxuICAgICAgICAgICAgICAgICAgICAuZmxhdFRyZWVOb2Rlcyh0cmVlTm9kZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgLm1hcCgobikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuLmRhdGFbXCJfYWRkdGlvbmFsX1wiXSA9IG5bXCJhZGR0aW9uYWxcIl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLmRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvb2t1cFNlbGVjdGlvblNlci5pbml0RmF2b3JpdGVJdGVtcyh0cmVlRGF0YSk7XHJcblxyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mYXZvcml0ZXNDb21wb25lbnRSZWYuaW5zdGFuY2Uuc2Nyb2xsVG9ZKDEpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvb2t1cFNlbGVjdGlvblNlci5pbml0RmF2b3JpdGVJdGVtcyhyZXN1bHQuaXRlbXMpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmZhdkhlbHBlci5sb2FkRmF2b3JpdGVzRGF0YShyZXN1bHQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBsb2FkRGF0YVRhYmxlRGF0YShyZXNEYXRhPzogTG9va3VwR3JpZFJlc3VsdCkge1xyXG4gICAgICAgIGlmIChyZXNEYXRhKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnVzZUZhdm9yaXRlICYmICF0aGlzLmlzVHJlZSgpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZhdkhlbHBlci51cGRhdGVGYXZvcml0ZXNTdGF0dXMocmVzRGF0YS5pdGVtcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuZ3JpZE9wdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXNEYXRhICYmIHJlc0RhdGEuY29sdW1ucyAmJiByZXNEYXRhLmNvbHVtbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAhdGhpcy5ncmlkT3B0aW9ucy5jb2x1bW5zIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICF0aGlzLmdyaWRPcHRpb25zLmNvbHVtbnMubGVuZ3RoXHJcbiAgICAgICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29sdW1ucyA9IHJlc0RhdGEuY29sdW1ucztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5pdGVtcyA9IHJlc0RhdGEuaXRlbXM7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzRGF0YS50b3RhbCB8fCByZXNEYXRhLml0ZW1zLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIGlmICggcmVzRGF0YS5zZWFyY2hGaWVsZHMgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ncmlkT3B0aW9ucy5zZWFyY2hGaWVsZHMgPSB0aGlzLmdldFNlYXJjaENvbHVtbnMocmVzRGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzRGF0YS5wYWdlSW5mbykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzRGF0YS5wYWdlSW5mby5wYWdlTGlzdCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoIXRoaXMucGFnZUxpc3QgfHwgIXRoaXMucGFnZUxpc3QubGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhZ2VMaXN0ID0gcmVzRGF0YS5wYWdlSW5mby5wYWdlTGlzdDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdpbmF0aW9uID0gcmVzRGF0YS5wYWdlSW5mby5lbmFibGVQYWdlcjtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhZ2VJbmRleCA9IHJlc0RhdGEucGFnZUluZm8ucGFnZUluZGV4O1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFnZVNpemUgPSByZXNEYXRhLnBhZ2VJbmZvLnBhZ2VTaXplO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhZ2luYXRpb24gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ3JpZE9wdGlvbnMgPSByZXNEYXRhIGFzIExvb2t1cEdyaWRPcHRpb25zO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnVwZGF0ZURhdGFUYWJsZSh0aGlzLmdyaWRPcHRpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZURhdGFUYWJsZShvcHRzOiBhbnkpIHtcclxuICAgICAgICBpZiAob3B0cykge1xyXG4gICAgICAgICAgICBjb25zdCBkdCA9IHRoaXMuY29tcG9uZW50UmVmLmluc3RhbmNlIGFzIERhdGFUYWJsZUNvbXBvbmVudDtcclxuXHJcbiAgICAgICAgICAgIGlmICghZHQuY29sdW1ucyB8fCBkdC5jb2x1bW5zLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgZHQuY29sdW1ucyA9IHRoaXMuZ3JpZE9wdGlvbnMuY29sdW1ucztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZHQuYWxsQ29sdW1uc1RpdGxlID0gdGhpcy5hbGxDb2x1bW5zVGl0bGU7XHJcbiAgICAgICAgICAgIGR0LnNlYXJjaEZpZWxkcyA9IG9wdHMuc2VhcmNoRmllbGRzO1xyXG4gICAgICAgICAgICBkdC5wYWdpbmF0aW9uID0gb3B0cy5wYWdpbmF0aW9uO1xyXG4gICAgICAgICAgICBkdC5wYWdlTGlzdCA9IHRoaXMucGFnZUxpc3Q7XHJcbiAgICAgICAgICAgIGR0LnJlbW90ZVNvcnQgPSB0aGlzLnJlbW90ZVNvcnQ7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5sb2FkRGF0YVdoZW5PcGVuKSB7XHJcbiAgICAgICAgICAgICAgICBkdC5sb2FkRGF0YSh7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZVNpemU6IG9wdHMucGFnZVNpemUsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZUluZGV4OiB0aGlzLmdyaWRPcHRpb25zLnBhZ2VJbmRleCxcclxuICAgICAgICAgICAgICAgICAgICB0b3RhbDogdGhpcy5ncmlkT3B0aW9ucy50b3RhbCxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB0aGlzLmdyaWRPcHRpb25zLml0ZW1zLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBkdC5jZC5tYXJrRm9yQ2hlY2soKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmxvYWRTdWNjZXNzLmVtaXQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXRUcmVlSW5mbyhyZXNEYXRhKSB7XHJcbiAgICAgICAgaWYgKCFyZXNEYXRhKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBfdHJlZUluZm8gPSBudWxsO1xyXG4gICAgICAgIGlmIChyZXNEYXRhLnRyZWVJbmZvKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9ubHlTZWxlY3RMZWFmID0gcmVzRGF0YS50cmVlSW5mby5vbmx5U2VsZWN0TGVhZjtcclxuICAgICAgICAgICAgbGV0IF9vc2w6IE9OTFlfU0VMRUNUX0xFQUYgPSBcIm5vXCI7XHJcbiAgICAgICAgICAgIGlmIChvbmx5U2VsZWN0TGVhZiAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBfb3NsID0gb25seVNlbGVjdExlYWYgPyBcInllc1wiIDogXCJub1wiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF90cmVlSW5mbyA9IHsgLi4ucmVzRGF0YS50cmVlSW5mbywgb25seVNlbGVjdExlYWY6IF9vc2wgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmdyaWRPcHRpb25zLnRyZWVJbmZvKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRyZWVJbmZvID0gdGhpcy5ncmlkT3B0aW9ucy50cmVlSW5mbztcclxuICAgICAgICAgICAgaWYgKHRyZWVJbmZvKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgdHJlZUluZm8ub25seVNlbGVjdExlYWYgPT09IHVuZGVmaW5lZCB8fFxyXG4gICAgICAgICAgICAgICAgICAgIHRyZWVJbmZvLm9ubHlTZWxlY3RMZWFmID09PSBudWxsXHJcbiAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgICB0cmVlSW5mby5vbmx5U2VsZWN0TGVhZiA9IFwibm9cIjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRyZWVJbmZvLm9ubHlTZWxlY3RMZWFmID09PSBcImJvb2xlYW5cIikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyZWVJbmZvLm9ubHlTZWxlY3RMZWFmID0gdHJlZUluZm8ub25seVNlbGVjdExlYWYgPyBcInllc1wiIDogXCJub1wiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIDIwMjEwOTAyXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5sb2FkVHJlZURhdGFUeXBlID09PSBcImRlZmF1bHRcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyZWVJbmZvLmxvYWREYXRhVHlwZSA9IF90cmVlSW5mby5sb2FkRGF0YVR5cGU7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyZWVJbmZvLmxvYWREYXRhVHlwZSA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZFRyZWVEYXRhVHlwZSA9PT0gXCJsb2FkYWxsXCIgPyBcImFsbFwiIDogXCJhc3luY1wiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0cmVlSW5mby5vbmx5U2VsZWN0TGVhZiAhPT0gXCJkZWZhdWx0XCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBfdHJlZUluZm8gPSBPYmplY3QuYXNzaWduKF90cmVlSW5mbywgdHJlZUluZm8pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnRyZWVJbmZvID0gX3RyZWVJbmZvO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgbG9hZFRyZWVUYWJsZURhdGEocmVzRGF0YT86IExvb2t1cEdyaWRSZXN1bHQsIHJlYmluZEV2ZW50ID0gdHJ1ZSkge1xyXG4gICAgICAgIGNvbnN0IGl0ZW1zID0gcmVzRGF0YSA/IHJlc0RhdGEuaXRlbXMgOiB0aGlzLmdyaWRPcHRpb25zLml0ZW1zO1xyXG4gICAgICAgIHRoaXMuaXRlbXMgPSBpdGVtcztcclxuXHJcbiAgICAgICAgaWYgKHJlc0RhdGEpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRUcmVlSW5mbyhyZXNEYXRhKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHRyZWVJbmZvID0gdGhpcy5ncmlkT3B0aW9ucy50cmVlSW5mbztcclxuICAgICAgICAgICAgaWYgKCF0cmVlSW5mb1tcInRyZWVEYXRhSXNJbml0XCJdKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHJlZUluZm8ubGF5ZXJUeXBlLnRvTG93ZXJDYXNlKCkgPT09IFwicGF0aGNvZGVcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXRlbXMgPSB0aGlzLmxvb2t1cFV0aWxzLm1ha2VUcmVlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLml0ZW1zLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmVlSW5mb1xyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXRlbXMgPSB0aGlzLmxvb2t1cFV0aWxzLm1ha2VUcmVlV2l0aFBhcmVudElEKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLml0ZW1zLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIlwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmVlSW5mby5kYXRhRmllbGQgPyBgJHt0cmVlSW5mby5kYXRhRmllbGR9LiR7dHJlZUluZm8ucGFyZW50RmllbGR9YDogdHJlZUluZm8ucGFyZW50RmllbGQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaWRGaWVsZFxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmNvbXBvbmVudFJlZi5pbnN0YW5jZSBpbnN0YW5jZW9mIFRyZWVUYWJsZUNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICBjb25zdCB0dCA9IHRoaXMuY29tcG9uZW50UmVmLmluc3RhbmNlIGFzIFRyZWVUYWJsZUNvbXBvbmVudDtcclxuICAgICAgICAgICAgaWYgKHRoaXMudHJlZUluZm8pIHtcclxuICAgICAgICAgICAgICAgIHR0LmxvYWREYXRhVHlwZSA9IHRoaXMudHJlZUluZm8ubG9hZERhdGFUeXBlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuY29sdW1ucyB8fCAhdGhpcy5jb2x1bW5zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdHQuY29sdW1ucyA9IHJlc0RhdGEuY29sdW1ucyB8fCBbXTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ3JpZE9wdGlvbnMuY29sdW1ucyA9IHR0LmNvbHVtbnM7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGlzTG9hZEFsbFRyZWVEYXRhID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubG9hZFRyZWVEYXRhVHlwZSA9PT0gXCJkZWZhdWx0XCIpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHQubG9hZERhdGFUeXBlID09PSBcImFsbFwiO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5sb2FkVHJlZURhdGFUeXBlID09PSBcImxvYWRhbGxcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGlmIChyZWJpbmRFdmVudCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50dEV2ZW50TWdyLmJpbmRUcmVldGFibGVFdmVudCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IGlzTG9hZEFsbCA9IGlzTG9hZEFsbFRyZWVEYXRhKCk7XHJcblxyXG4gICAgICAgICAgICAvKiog5a6M5pW05qCR6IqC54K55qOA5p+lIEJ5IEx1Y2FzIDIwMjAwMzAyICovXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLml0ZW1zID0gdGhpcy5jaGVja05vZGVDYW5CZVNlbGVjdCh0aGlzLml0ZW1zLCBpc0xvYWRBbGwpO1xyXG4gICAgICAgICAgICB0dC5rZWVwU2VsZWN0ID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnVzZUZhdm9yaXRlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZhdkhlbHBlci51cGRhdGVGYXZvcml0ZXNTdGF0dXModGhpcy5pdGVtcyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmxvYWREYXRhV2hlbk9wZW4pIHtcclxuICAgICAgICAgICAgICAgIHR0LmxvYWREYXRhKHRoaXMuaXRlbXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHR0LnJlc2l6ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWcqOaehOWujOaVtOagkeS4re+8jOaciemDqOWIhuiKgueCueWboOS4uuadoeS7tuiiq+i/h+a7pO+8jOS4uuaYvuekuuWujOaVtOagke+8jFxyXG4gICAgICog6L+Z5Lqb6IqC54K55Zyo6L+Q6KGM5pe25piv5LiN5YWB6K646KKr6YCJ5Lit55qELCDov5Tlm57mlrDnmoToioLngrnmlbDnu4RcclxuICAgICAqIEJ5IEx1Y2FzIDIwMjAwMzAyXHJcbiAgICAgKi9cclxuICAgIGNoZWNrTm9kZUNhbkJlU2VsZWN0KG5vZGVzLCBpc0FsbFRyZWVEYXRhID0gZmFsc2UpOiBUcmVlTm9kZVtdIHtcclxuICAgICAgICBpZiAobm9kZXMgJiYgbm9kZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBub2Rlcy5tYXAoKG5vZGU6IFRyZWVOb2RlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAobm9kZS5oYXNPd25Qcm9wZXJ0eShcImFkZHRpb25hbFwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5vZGUuc2VsZWN0YWJsZSA9ICFub2RlW1wiYWRkdGlvbmFsXCJdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChub2RlLmNoaWxkcmVuICYmIG5vZGUuY2hpbGRyZW4ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja05vZGVDYW5CZVNlbGVjdChub2RlLmNoaWxkcmVuLCBpc0FsbFRyZWVEYXRhKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzQWxsVHJlZURhdGEgJiYgKCF0aGlzLl9zZWFyY2hTdGF0ZSB8fCAhdGhpcy5fc2VhcmNoU3RhdGUudmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUubGVhZiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBub2RlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5vZGVzO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ2hhbmdlcyh2YWwpIHtcclxuICAgICAgICBpZiAoIXZhbCkge1xyXG4gICAgICAgICAgICB0aGlzLm9uQ2xlYXIoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmRpc3BsYXlUZXh0ID0gdmFsO1xyXG4gICAgICAgICAgICB0aGlzLmlzVGV4dENoYW5nZSA9IHRoaXMub3JpZ2luYWxUZXh0ICE9PSB0aGlzLmRpc3BsYXlUZXh0O1xyXG4gICAgICAgICAgICBpZiAodGhpcy5ub3NlYXJjaCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRNb2RlbFZhbHVlKHZhbCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyTWFwcGluZ3MuZW1pdCh7IGluc3RhbmNlOiB0aGlzLCB2YWx1ZTogdmFsLCB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5vbk1vZGVsVG91Y2hlZCh2YWwpO1xyXG4gICAgICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlZC5lbWl0KHZhbCk7XHJcbiAgICAgICAgICAgIHRoaXMudGV4dENoYW5nZWQuZW1pdCh2YWwpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgb25DbGVhcihlbWl0ID0gdHJ1ZSkge1xyXG4gICAgICAgIHRoaXMuaXNUZXh0Q2hhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5VGV4dCA9IFwiXCI7XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5VmFsdWUgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMub3JpZ2luYWxUZXh0ID0gXCJcIjtcclxuICAgICAgICB0aGlzLmV4dGVuZEluZm8gPSBcIlwiO1xyXG4gICAgICAgIHRoaXMuc2V0TW9kZWxWYWx1ZShcIlwiKTtcclxuICAgICAgICBpZiAodGhpcy5tYXBwaW5nRm4pIHtcclxuICAgICAgICAgICAgdGhpcy5tYXBwaW5nRm4obnVsbCwgdGhpcy5tYXBGaWVsZHMpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm1hcEZpZWxkcykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYmluZGluZ0RhdGEgPSB0aGlzLnNlbGVjdGlvbk1nci5nZXRCaW5kaW5nRGF0YSgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGJpbmRpbmdEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWZhdWx0TWFwcGluZy5sb29rdXBGaWVsZE1hcChcclxuICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXBGaWVsZHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJpbmRpbmdEYXRhXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm11bHRpU2VsTWdyLmNsZWFyKCk7XHJcbiAgICAgICAgaWYgKGVtaXQpIHtcclxuICAgICAgICAgICAgdGhpcy5jbGVhci5lbWl0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNsZWFyVmFsdWUoZW1pdCA9IHRydWUpIHtcclxuICAgICAgICB0aGlzLm9uQ2xlYXIoZW1pdCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2VsZWN0SXRlbShyb3dEYXRhPzogYW55KSB7XHJcbiAgICAgICAgbGV0IHNlbGVjdGVkUm93ID0gbnVsbDtcclxuICAgICAgICBpZiAocm93RGF0YSkge1xyXG4gICAgICAgICAgICBzZWxlY3RlZFJvdyA9IHJvd0RhdGE7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2VsZWN0ZWRSb3cgPSB0aGlzLnNlbGVjdGlvbnM7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXNlbGVjdGVkUm93KSB7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3RlZFJvdyA9IG51bGw7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShzZWxlY3RlZFJvdykgJiYgIXNlbGVjdGVkUm93Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkUm93ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fc2VhcmNoU3RhdGUgPSB7IFxyXG4gICAgICAgICAgICBmaWVsZDogJyonLFxyXG4gICAgICAgICAgICB2YWx1ZTogJydcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIOWmguaenOWumuS5ieiHquWumuS5ieWkhOeQhuehruWumuS6i+S7tu+8jOWImeeUseiHquWumuS5ieS6i+S7tuWkhOeQhuWQjumdoueahOmAu+i+kVxyXG4gICAgICAgIGlmICh0aGlzLm9rSGFuZGxlcikge1xyXG4gICAgICAgICAgICB0aGlzLm9rSGFuZGxlcih7IGRhdGE6IHNlbGVjdGVkUm93LCBpbnN0YW5jZTogdGhpcyB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5iZWZvcmVTZWxlY3REYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBic2RSZXN1bHQgPSB0aGlzLmJlZm9yZVNlbGVjdERhdGEoe1xyXG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlOiB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHNlbGVjdGVkUm93LFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoYnNkUmVzdWx0ICYmIGJzZFJlc3VsdC5zdWJzY3JpYmUpIHtcclxuICAgICAgICAgICAgICAgICAgICBic2RSZXN1bHQuc3Vic2NyaWJlKChlOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fYmVmb3JlU2VsZWN0RGF0YUNhbGxCYWNrKGUsIHNlbGVjdGVkUm93KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy53cml0ZUNvbnNvbGUoJ+W4ruWKqeaVsOaNrumAieS4reWJjeS6i+S7tuacqui/lOWbnuWAvOaIlui/lOWbnuexu+Wei+mdnk9ic2VydmFibGUsIOivt+ajgOafpScsICdlcnJvcicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fYmVmb3JlU2VsZWN0RGF0YUNhbGxCYWNrKHRydWUsIHNlbGVjdGVkUm93KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRQYXRoQ29kZShkYXRhLCB0cmVlSW5mbyA9IG51bGwpIHtcclxuICAgICAgIHJldHVybiB0aGlzLmxvb2t1cFV0aWxzLmdldFBhdGhDb2RlKGRhdGEsIHRyZWVJbmZvIHx8IHRoaXMudHJlZUluZm8pO1xyXG4gICAgfVxyXG4gICAgZ2V0TGF5ZXJEYXRhKGRhdGEsIHRyZWVJbmZvID0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxvb2t1cFV0aWxzLmdldExheWVyRGF0YShkYXRhLCB0cmVlSW5mbyB8fCB0aGlzLnRyZWVJbmZvKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJpdmF0ZSBnZXRQYXJlbnRQYXRoQ29kZShyb3dzKSB7XHJcbiAgICAgICAgY29uc3QgbWF4QnkgPSAoYXJyLCBmbikgPT5cclxuICAgICAgICAgICAgTWF0aC5tYXgoXHJcbiAgICAgICAgICAgICAgICAuLi5hcnIubWFwKHR5cGVvZiBmbiA9PT0gXCJmdW5jdGlvblwiID8gZm4gOiAodmFsKSA9PiB2YWxbZm5dKVxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAvLyBjb25zdCB7IGRhdGFGaWVsZCwgcGF0aEZpZWxkLCBsYXllckZpZWxkIH0gPSB0aGlzLnRyZWVJbmZvO1xyXG4gICAgICAgIGNvbnN0IG1heExheWVyID0gbWF4Qnkocm93cywgKHgpID0+IHRoaXMuZ2V0TGF5ZXJEYXRhKHgpKTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gbWF4TGF5ZXI7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBfcm93cyA9IHJvd3MuZmlsdGVyKChuKSA9PiB0aGlzLmdldExheWVyRGF0YShuKSA9PT0gaSk7XHJcbiAgICAgICAgICAgIGlmIChfcm93cyAmJiBfcm93cy5sZW5ndGggJiYgX3Jvd3MubGVuZ3RoIDwgcm93cy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIF9yb3dzLmZvckVhY2goKHIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXRjaENvZGUgPSB0aGlzLmdldFBhdGhDb2RlKHIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IF9yb3dzMiA9IHJvd3MuZmlsdGVyKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAobikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9wYyA9IHRoaXMuZ2V0UGF0aENvZGUobik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3BjICE9PSBwYXRjaENvZGUgJiYgX3BjLmluZGV4T2YocGF0Y2hDb2RlKSA9PT0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9yb3dzMiAmJiBfcm93czIubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvd3MgPSByb3dzLmZpbHRlcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChuKSA9PiB0aGlzLmdldFBhdGhDb2RlKG4pICE9PSBwYXRjaENvZGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJvd3M7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfYmVmb3JlU2VsZWN0RGF0YUNhbGxCYWNrKGUsIHNlbGVjdGVkUm93KSB7XHJcbiAgICAgICAgbGV0IGNhblNlbGVjdCA9IGU7XHJcbiAgICAgICAgbGV0IG1lc3NhZ2UgPSBcIlwiO1xyXG4gICAgICAgIGlmICh0eXBlb2YgZSA9PT0gXCJib29sZWFuXCIpIHtcclxuICAgICAgICAgICAgY2FuU2VsZWN0ID0gZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGUgPT09IFwib2JqZWN0XCIpIHtcclxuICAgICAgICAgICAgICAgIGNhblNlbGVjdCA9IGUuY2FuU2VsZWN0O1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGUubWVzc2FnZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNhblNlbGVjdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXNlbGVjdGVkUm93KSB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2UgPSB0aGlzLm11c3RDaG9vc0FkYXRhcm93O1xyXG4gICAgICAgICAgICBjYW5TZWxlY3QgPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjYW5TZWxlY3QpIHtcclxuICAgICAgICAgICAgbGV0IHNlbGVjdGVkUm93cyQgPSBvZihzZWxlY3RlZFJvdyk7XHJcbiAgICAgICAgICAgIC8vIOWkmumAiSDmoJHluK7liqkg5byC5q2l5Yqg6L29IOWIhue6p+eggSDlvIDlkK/lkIzmraXpgInmi6kg5oiW5YyF5ZCr5LiL57qnXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5zaW5nbGVTZWxlY3QgJiYgdGhpcy5lbmFibGVDYXNjYWRlICYmIHRoaXMuaXNUcmVlKCkgKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50cmVlSW5mby5sb2FkRGF0YVR5cGUgIT09IFwiYWxsXCIgJiYgdGhpcy50cmVlSW5mby5sYXllclR5cGUgPT09IFwicGF0aGNvZGVcIiAmJiB0aGlzLmlzR2V0QWxsQ2hpZGxOb2Rlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBwYXJlbnRzSWRzID0gdGhpcy5nZXRQYXJlbnRQYXRoQ29kZShzZWxlY3RlZFJvdyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmVudHNJZHMgJiYgcGFyZW50c0lkcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50c0lkcyA9IHBhcmVudHNJZHMubWFwKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKG4pID0+IHRoaXMuZ2V0UGF0aENvZGUobilcclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFJvd3MkID0gdGhpcy5odHRwTWdyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZ2V0RGF0YSh7IHBhcmVudHNJZHMgfSwgXCJhbGxDaGlsZHJlblwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBpcGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwKChyOiBMb29rdXBHcmlkUmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1zID0gci5pdGVtc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyByLml0ZW1zLm1hcCgoZCkgPT4gZC5kYXRhKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWxsaXRlbXMgPSBbLi4uc2VsZWN0ZWRSb3csIC4uLml0ZW1zXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGlkcyA9IGFsbGl0ZW1zLm1hcCgobikgPT4gblt0aGlzLmlkRmllbGRdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRzID0gQXJyYXkuZnJvbShuZXcgU2V0KGlkcykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaWRzLm1hcCgobikgPT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbGl0ZW1zLmZpbmQoKGEpID0+IGFbdGhpcy5pZEZpZWxkXSA9PT0gbilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHNlbGVjdGVkUm93cyQuc3Vic2NyaWJlKChyb3dzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlTG9hZGluZygpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDb250cm9sVmFsdWUocm93cyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMudXNlVGlwIHx8ICFyb3dzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudXNlVGlwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wZXJzb25hbENvbmZpZ1NlcnZpY2UudXBkYXRlUXVlY2tTZWxlY3RlZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgcm93cyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2NhbFNlcnZpY2UubG9jYWxlSWRcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubm90aWZ5U2VydmljZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5U2VydmljZS53YXJuaW5nKG1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VyU2VydmljZS53YXJuaW5nKG1lc3NhZ2UsIFwiXCIsIHRydWUsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaWFsb2cuZWwubmF0aXZlRWxlbWVudC5jbGljaygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdXBkYXRlQ29udHJvbFZhbHVlKHNlbGVjdGVkUm93KSB7XHJcbiAgICAgICAgaWYgKHNlbGVjdGVkUm93KSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0RGlzcGxheVRleHQoc2VsZWN0ZWRSb3cpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5tYXBwaW5nRm4pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubWFwcGluZ0ZuKHNlbGVjdGVkUm93LCB0aGlzLm1hcEZpZWxkcywgdGhpcy5iaW5kaW5nRGF0YSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5tYXBGaWVsZHMgJiYgdGhpcy5iaW5kaW5nRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVmYXVsdE1hcHBpbmcubG9va3VwRmllbGRNYXAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkUm93LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1hcEZpZWxkcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5iaW5kaW5nRGF0YVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zZXRNb2RlbFZhbHVlKHRoaXMuZGlzcGxheVRleHQpO1xyXG4gICAgICAgICAgICBpZiAodGhpc1tcImluRGF0YWdyaWRcIl0gJiYgc2VsZWN0ZWRSb3cpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdEl0ZW1zID0gQXJyYXkuaXNBcnJheShzZWxlY3RlZFJvdylcclxuICAgICAgICAgICAgICAgICAgICA/IHNlbGVjdGVkUm93XHJcbiAgICAgICAgICAgICAgICAgICAgOiBbc2VsZWN0ZWRSb3ddO1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVCaW5kRGF0YShzZWxlY3RJdGVtcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGEuZW1pdChzZWxlY3RlZFJvdyk7XHJcbiAgICAgICAgICAgIHRoaXMucnVuRGljdFBpY2tlZEV2ZW50KHNlbGVjdGVkUm93KTtcclxuICAgICAgICAgICAgdGhpcy5pc1RleHRDaGFuZ2UgPSBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgYXMgSFRNTEJ1dHRvbkVsZW1lbnQpLmJsdXIoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2VyU2VydmljZS53YXJuaW5nKHRoaXMubXVzdENob29zQWRhdGFyb3cpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZUJpbmREYXRhKHNlbGVjdGVkUm93KSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLm1hcEZpZWxkcykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBoZWxwRmllbGRzID0gT2JqZWN0LmtleXModGhpcy5tYXBGaWVsZHMpO1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgdGhpcy5uZ0NvbnRyb2wgJiZcclxuICAgICAgICAgICAgdGhpcy5uZ0NvbnRyb2wuZm9ybURpcmVjdGl2ZSAmJlxyXG4gICAgICAgICAgICB0aGlzLm5nQ29udHJvbC5mb3JtRGlyZWN0aXZlLmZvcm0gJiZcclxuICAgICAgICAgICAgdGhpcy5uZ0NvbnRyb2wuZm9ybURpcmVjdGl2ZS5mb3JtLmJpbmRpbmdEYXRhXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJpbmRpbmdEYXRhID0gdGhpcy5uZ0NvbnRyb2wuZm9ybURpcmVjdGl2ZS5mb3JtLmJpbmRpbmdEYXRhO1xyXG5cclxuICAgICAgICAgICAgaWYgKGJpbmRpbmdEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBoZWxwRmllbGRzLmZvckVhY2goKGhlbHBGaWVsZDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXBGaWVsZHNbaGVscEZpZWxkXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc3BsaXQoXCIsXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5mb3JFYWNoKChmb3JtRmllbGQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsID0gc2VsZWN0ZWRSb3dcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnV0aWxzLmdldFZhbHVlKGhlbHBGaWVsZCwgcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuam9pbih0aGlzLm11bHRpcGxlQ2hvaWNlU2VwYXJhdG9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXRpbHMuc2V0VmFsdWUoYmluZGluZ0RhdGEsIGZvcm1GaWVsZCwgdmFsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gaWYgKGJpbmRpbmdEYXRhLnNldFZhbHVlKSB7XHJcbiAgICAgICAgICAgIC8vICAgICBjb25zdCBiaW5kaW5nUGF0aCA9IHRoaXMubmdDb250cm9sLmZvcm1EaXJlY3RpdmUuZm9ybS5iaW5kaW5nUGF0aDtcclxuICAgICAgICAgICAgLy8gICAgIGxldCBwYXRoQXJyOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgICAgICAgICAvLyAgICAgaWYgKGJpbmRpbmdQYXRoKSB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgcGF0aEFyciA9IGJpbmRpbmdQYXRoLnNwbGl0KCcvJykuZmlsdGVyKG4gPT4gbiAhPT0gJycpO1xyXG4gICAgICAgICAgICAvLyAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gICAgIGhlbHBGaWVsZHMuZm9yRWFjaCgoaGVscEZpZWxkOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgLy8gICAgICAgICB0aGlzLm1hcEZpZWxkc1toZWxwRmllbGRdLnNwbGl0KCcsJykuZm9yRWFjaCgoZm9ybUZpZWxkOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgY29uc3QgZmllbGRQYXRocyA9IHBhdGhBcnIuY29uY2F0KGZvcm1GaWVsZC5zcGxpdCgnLicpKTtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgY29uc3QgdmFsID0gc2VsZWN0ZWRSb3cubWFwKHIgPT4ge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudXRpbHMuZ2V0VmFsdWUoZm9ybUZpZWxkLCByKTtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgfSkuam9pbih0aGlzLm11bHRpcGxlQ2hvaWNlU2VwYXJhdG9yKTtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgYmluZGluZ0RhdGEuc2V0VmFsdWUocGF0aEFyci5jb25jYXQoZmllbGRQYXRocyksIHZhbCwgdHJ1ZSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vICAgICB9KTtcclxuICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIGlmICh0aGlzLmJpbmRpbmdEYXRhKSB7XHJcbiAgICAgICAgICAgIC8vICAgICBoZWxwRmllbGRzLmZvckVhY2goKGhlbHBGaWVsZDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgdGhpcy5tYXBGaWVsZHNbaGVscEZpZWxkXS5zcGxpdCgnLCcpLmZvckVhY2goKGZvcm1GaWVsZDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIGNvbnN0IHZhbCA9IHNlbGVjdGVkUm93Lm1hcChyID0+IHtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnV0aWxzLmdldFZhbHVlKGZvcm1GaWVsZCwgcik7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIH0pLmpvaW4odGhpcy5tdWx0aXBsZUNob2ljZVNlcGFyYXRvcik7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIHRoaXMudXRpbHMuc2V0VmFsdWUodGhpcy5iaW5kaW5nRGF0YSwgZm9ybUZpZWxkLCB2YWwpO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvLyAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRFeHRlbmRJbmZvRmllbGRzKGlzSGVscERhdGEgPSB0cnVlKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmV4dEluZm9GaWVsZHMpIHtcclxuICAgICAgICAgICAgdGhpcy53cml0ZUNvbnNvbGUoYOacquiuvue9ruaJqeWxleWtl+auteOAgmApO1xyXG4gICAgICAgICAgICByZXR1cm4gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHRpcEZpZWxkQXJyID0gdGhpcy5leHRJbmZvRmllbGRzLnNwbGl0KFwiLFwiKTtcclxuXHJcbiAgICAgICAgaWYgKGlzSGVscERhdGEpIHtcclxuICAgICAgICAgICAgbGV0IGV4dGVuZEluZm9GaWVsZHMgPSBbXTtcclxuICAgICAgICAgICAgZXh0ZW5kSW5mb0ZpZWxkcyA9IHRpcEZpZWxkQXJyLm1hcCgodGYpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1hcEtleSA9IE9iamVjdC5rZXlzKHRoaXMubWFwRmllbGRzKS5maW5kKChrKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubWFwRmllbGRzW2tdID09PSB0ZjtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChtYXBLZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWFwS2V5O1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLndyaXRlQ29uc29sZShg5Zyo5biu5Yqp5pig5bCE5a2X5q615Lit5pyq5om+5YiwJHt0Zn1gKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBleHRlbmRJbmZvRmllbGRzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRpcEZpZWxkQXJyO1xyXG4gICAgfVxyXG5cclxuICAgIG9uVXBkYXRlRXh0ZW5kSW5mbygpIHtcclxuICAgICAgICBjb25zdCBqc29uRGF0YSA9IHRoaXMuc2VsZWN0aW9uTWdyLmdldEJpbmRpbmdEYXRhKCk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVFeHRlbmRJbmZvKGpzb25EYXRhLCBmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g6YCJ5Lit5biu5Yqp5pWw5o2u5ZCO77yM5pu05paw5omp5bGV5L+h5oGvXHJcbiAgICBwcml2YXRlIHVwZGF0ZUV4dGVuZEluZm8oZGF0YTogYW55LCBpc0hlbHBEYXRhID0gdHJ1ZSkge1xyXG4gICAgICAgIGlmIChkYXRhKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmV4dEluZm9Gb3JtYXR0ZXIpIHtcclxuICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGlwU3RyaW5nID0gZGF0YS5tYXAoKG4pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RXh0ZW5kSW5mb1RleHQobik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5leHRlbmRJbmZvID0gdGlwU3RyaW5nLmpvaW4oXCLvvIxcIik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXh0ZW5kSW5mbyA9IHRoaXMuZ2V0RXh0ZW5kSW5mb1RleHQoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBleHRlbmRJbmZvRmllbGRzID0gdGhpcy5nZXRFeHRlbmRJbmZvRmllbGRzKGlzSGVscERhdGEpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGV4dGVuZEluZm9GaWVsZHMgJiYgZXh0ZW5kSW5mb0ZpZWxkcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0aXBTdHJpbmcgPSBkYXRhLm1hcCgobikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RXh0ZW5kSW5mb1RleHQobiwgZXh0ZW5kSW5mb0ZpZWxkcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV4dGVuZEluZm8gPSB0aXBTdHJpbmcuam9pbihcIu+8jFwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV4dGVuZEluZm8gPSB0aGlzLmdldEV4dGVuZEluZm9UZXh0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dGVuZEluZm9GaWVsZHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRFeHRlbmRJbmZvVGV4dChpdGVtRGF0YSwgZmllbGRzID0gbnVsbCkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5leHRJbmZvRm9ybWF0dGVyID09PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXh0SW5mb0Zvcm1hdHRlcih7XHJcbiAgICAgICAgICAgICAgICBiaW5kaW5nRGF0YTogaXRlbURhdGEsXHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZTogdGhpcyxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgdGlwU3RyaW5nID0gW107XHJcbiAgICAgICAgICAgIGNvbnN0IHRpcFZhbHVlcyA9IGZpZWxkcy5tYXAoKHQpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRmdiA9IHRoaXMudXRpbHMuZ2V0VmFsdWUodCwgaXRlbURhdGEpO1xyXG4gICAgICAgICAgICAgICAgdGlwU3RyaW5nLnB1c2godGZ2KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IFt0XTogdGZ2IH07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gdGlwU3RyaW5nLmpvaW4oXCIgXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldERpc3BsYXlUZXh0KHJvd3M6IGFueSkge1xyXG4gICAgICAgIGNvbnN0IGRmID0gdGhpcy5kaXNwbGF5RmllbGRzXHJcbiAgICAgICAgICAgID8gdGhpcy5kaXNwbGF5RmllbGRzLnNwbGl0KFwiLFwiKVxyXG4gICAgICAgICAgICA6IFt0aGlzLnRleHRGaWVsZF07XHJcbiAgICAgICAgY29uc3QgdHh0QXJyID0gcm93cy5tYXAoKHIpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdCA9IFtdO1xyXG4gICAgICAgICAgICBkZi5mb3JFYWNoKChuKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0LnB1c2godGhpcy51dGlscy5nZXRWYWx1ZShuLCByKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gdC5qb2luKHRoaXMuZGlzcGxheVRleHRTZXBhcmF0b3IpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5ncmlkT3B0aW9ucy5zaW5nbGVTZWxlY3QpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHR4dEFyci5qb2luKFwiXCIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRpc3BsYXlGaWVsZHMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0eHRBcnIubWFwKCh0KSA9PiBcIltcIiArIHQgKyBcIl1cIikuam9pbihcIixcIik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHh0QXJyLmpvaW4oXCIsXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0RGlzcGxheVRleHQoc2VsZWN0ZWRSb3c6IGFueSkge1xyXG4gICAgICAgIHRoaXMub3JpZ2luYWxUZXh0ID0gdGhpcy5kaXNwbGF5VGV4dDtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZ3JpZE9wdGlvbnMuc2luZ2xlU2VsZWN0KSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRpc3BsYXlGb3JtYXR0ZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheVRleHQgPSB0aGlzLnV0aWxzLmdldFZhbHVlKFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGV4dEZpZWxkLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkUm93XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzVHJlZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5VGV4dCA9IHRoaXMuZGlzcGxheUZvcm1hdHRlcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5VGV4dCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgW3NlbGVjdGVkUm93XSxcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9va3VwOiB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YXRhYmxlOiB0aGlzLmNvbXBvbmVudFJlZlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbnN0YW5jZSBhcyBEYXRhVGFibGVDb21wb25lbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0dCA9IHRoaXMuY29tcG9uZW50UmVmLmluc3RhbmNlIGFzIFRyZWVUYWJsZUNvbXBvbmVudDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlUZXh0ID0gdGhpcy5kaXNwbGF5Rm9ybWF0dGVyKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlUZXh0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBbc2VsZWN0ZWRSb3ddLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7IGxvb2t1cDogdGhpcywgdHJlZTogdHQgfVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlUZXh0ID0gdGhpcy5nZXREaXNwbGF5VGV4dChbc2VsZWN0ZWRSb3ddKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmRpc3BsYXlWYWx1ZSA9IHNlbGVjdGVkUm93W3RoaXMudmFsdWVGaWVsZCB8fCB0aGlzLmlkRmllbGRdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChzZWxlY3RlZFJvdy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRpc3BsYXlGb3JtYXR0ZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlUZXh0ID0gc2VsZWN0ZWRSb3dcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgocikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudXRpbHMuZ2V0VmFsdWUodGhpcy50ZXh0RmllbGQsIHIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuam9pbih0aGlzLm11bHRpcGxlQ2hvaWNlU2VwYXJhdG9yKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNUcmVlKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5VGV4dCA9IHRoaXMuZGlzcGxheUZvcm1hdHRlcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheVRleHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFJvdyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb29rdXA6IHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YXRhYmxlOiB0aGlzLmNvbXBvbmVudFJlZlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5zdGFuY2UgYXMgRGF0YVRhYmxlQ29tcG9uZW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHR0ID0gdGhpcy5jb21wb25lbnRSZWZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbnN0YW5jZSBhcyBUcmVlVGFibGVDb21wb25lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheVRleHQgPSB0aGlzLmRpc3BsYXlGb3JtYXR0ZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlUZXh0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRSb3csXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGxvb2t1cDogdGhpcywgdHJlZTogdHQgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5VGV4dCA9IHRoaXMuZ2V0RGlzcGxheVRleHQoc2VsZWN0ZWRSb3cpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheVZhbHVlID0gc2VsZWN0ZWRSb3dcclxuICAgICAgICAgICAgICAgICAgICAubWFwKChyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnV0aWxzLmdldFZhbHVlKHRoaXMudmFsdWVGaWVsZCB8fCB0aGlzLmlkRmllbGQsIHIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLmpvaW4odGhpcy5tdWx0aXBsZUNob2ljZVNlcGFyYXRvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vcmlnaW5hbFRleHQgPSB0aGlzLmRpc3BsYXlUZXh0O1xyXG4gICAgfVxyXG5cclxuICAgIHJ1bkRpY3RQaWNrZWRFdmVudChyb3dEYXRhOiBhbnkpIHtcclxuICAgICAgICBpZiAodGhpcy5kaWN0UGlja2VkKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9rQnV0dG9uKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9rQnV0dG9uLm5hdGl2ZUVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuZGljdFBpY2tlZFN1YnNjcmlwdGlvbiA9IHRoaXMuZGljdFBpY2tlZChyb3dEYXRhKS5zdWJzY3JpYmUoXHJcbiAgICAgICAgICAgICAgICAodjogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMub2tCdXR0b24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5va0J1dHRvbi5uYXRpdmVFbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdiA9PT0gXCJib29sZWFuXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VEaWFsb2cocm93RGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlb2YgdiA9PT0gXCJvYmplY3RcIiAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2LmNsb3NlRGlhbG9nICE9PSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgIXYuY2xvc2VEaWFsb2dcclxuICAgICAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYubWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlclNlcnZpY2Uud2FybmluZyh2Lm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZURpYWxvZyhyb3dEYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VEaWFsb2cocm93RGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2VEaWFsb2cocm93RGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZm9jdXNUb0lucHV0KCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuem9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaW5wdXRHcm91cCAmJiB0aGlzLmlucHV0R3JvdXAudGV4dGJveCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRHcm91cC50ZXh0Ym94Lm5hdGl2ZUVsZW1lbnQuZm9jdXMoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2VEaWFsb2cocm93RGF0YSA9IG51bGwpIHtcclxuICAgICAgICBpZiAodGhpcy5kaWFsb2cpIHtcclxuICAgICAgICAgICAgdGhpcy5kaWFsb2cuY2xvc2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHJvd0RhdGEpIHtcclxuICAgICAgICAgICAgdGhpcy5tdWx0aVNlbE1nci5zYXZlKHJvd0RhdGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyB0aGlzLmlzU2hvdyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuZm9jdXNUb0lucHV0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgY2FuY2VsU2VsZWN0KCkge1xyXG4gICAgICAgIHRoaXMuY2xvc2VEaWFsb2coKTtcclxuICAgICAgICB0aGlzLmlzVGV4dENoYW5nZSA9IGZhbHNlO1xyXG4gICAgICAgIGlmICghdGhpcy5ub3NlYXJjaCkge1xyXG4gICAgICAgICAgICB0aGlzLmRpc3BsYXlUZXh0ID0gdGhpcy5vcmlnaW5hbFRleHQ7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0TW9kZWxWYWx1ZSh0aGlzLmRpc3BsYXlUZXh0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmNhbmNlbEhhbmRsZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5jYW5jZWxIYW5kbGVyKHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXRNb2RlbFZhbHVlKHYpIHtcclxuICAgICAgICBpZiAodGhpcy5vbk1vZGVsQ2hhbmdlKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25Nb2RlbENoYW5nZSh2KTtcclxuICAgICAgICAgICAgdGhpcy52YWx1ZUNoYW5nZWQuZW1pdCh2KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5pWw5o2u5YiX6KGo77yM5pS26JeP77yMIOW3sumAieaVsOaNriB0YWIg6aG15YiH5o2iXHJcbiAgICBvblRhYkNoYW5nZShlOiBhbnkpIHtcclxuICAgICAgICB0aGlzLmFjdGl2ZVRhYiA9IGUudGFiSW5kZXg7XHJcbiAgICAgICAgdGhpcy5wZXJzb25hbENvbmYudGFiSW5kZXggPSB0aGlzLmFjdGl2ZVRhYjtcclxuICAgICAgICBjb25zdCBfZmlyc3RDaGFuZ2UgPSB0aGlzLmlzVGFiQ2hhbmdlZDtcclxuICAgICAgICB0aGlzLmlzVGFiQ2hhbmdlZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5wZXJzb25hbENvbmZpZ1NlcnZpY2UudXBkYXRlUGVyc29uYWxDb25maWcoe1xyXG4gICAgICAgICAgICB0YWJJbmRleDogZS50YWJJbmRleCxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlVGFiID09PSBcImRhdGFsaXN0XCIpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNEb3VibGxlTGlzdCgpICYmICF0aGlzLmxlZnRDb21wb25lbnRSZWYpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm5hdmlnYXRpb25PcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb29rdXBDbXBNZ3IuY3JlYXRlTGVmdENvbXBvbmVudChcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uYXZpZ2F0aW9uT3B0aW9uc1xyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdERhdGEoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5pdGVtcyB8fCAhdGhpcy5pdGVtcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5pdERhdGEoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICghX2ZpcnN0Q2hhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNUcmVlKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkVHJlZVRhYmxlRGF0YSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZERhdGFUYWJsZURhdGEoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kdEV2ZW50TWdyLmJpbmREYXRhVGFibGVFdmVudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIHRoaXMuc2VsZWN0aW9uTWdyLnNlbGVjdEN1cnJlbnRWYWx1ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0dldEFsbENoaWxkcmVuQ2hlY2tib3goKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5hY3RpdmVUYWIgPT09IFwiZmF2b3JpdGVcIikge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNUcmVlKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXREYXRhKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgIXRoaXMuZmF2b3JpdGVJdGVtcyB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAhdGhpcy5mYXZvcml0ZUl0ZW1zLmxlbmd0aCB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZhdm9yaXRlSXRlbXMubGVuZ3RoICE9PSB0aGlzLmZhdkhlbHBlci5nZXRGYXZvcml0SWRzKCkubGVuZ3RoXHJcbiAgICAgICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdERhdGEoKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCFfZmlyc3RDaGFuZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mYXZIZWxwZXIuX2xvYWRGYXZvcml0ZURhdGEodGhpcy5mYXZvcml0ZUl0ZW1zKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5zZWxlY3Rpb25NZ3Iuc2VsZWN0Q3VycmVudFZhbHVlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgdGhpcy5zZWxlY3Rpb25NZ3Iuc2VsZWN0Q3VycmVudFZhbHVlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmNoYW5nZURldGVjdG9yLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5yZXNpemVDbXAoKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNUcmVlKCkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHkgPSB0aGlzLmNvbXBvbmVudFJlZi5pbnN0YW5jZS5zdGF0ZS5zY3JvbGxZO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnRSZWYuaW5zdGFuY2Uuc2Nyb2xsVG9ZKHksIDApO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZUNhc2NhZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnR0RXZlbnRNZ3IuY2FzY2FkZVZhbHVlQ2hhbmdlZCh0aGlzLmNhc2NhZGVTdGF0dXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uTWdyLnNlbGVjdEN1cnJlbnRWYWx1ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vI3JlZ2lvbiAgVGFnIFZpZXcgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgcHJpdmF0ZSByZWdpc3Rlck1vdXNlRXZlbnRGb3JUYWdWaWV3KCkge1xyXG4gICAgICAgIGlmICh0aGlzLmVuYWJsZUNsZWFyKSB7XHJcbiAgICAgICAgICAgIHRoaXMudGFnYm94Lm5hdGl2ZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAgICAgICAgIFwibW91c2VlbnRlclwiLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5vblRhZ2JveE1vdXNlRW50ZXIuYmluZCh0aGlzKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB0aGlzLnRhZ2JveC5uYXRpdmVFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgICAgICAgICBcIm1vdXNlbGVhdmVcIixcclxuICAgICAgICAgICAgICAgIHRoaXMub25UYWdib3hNb3VzZUxlYXZlLmJpbmQodGhpcylcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB0b2dnbGVDbGVhckljb24oZXZlbnQ6IGFueSwgaXNTaG93ID0gZmFsc2UpIHtcclxuICAgICAgICBjb25zdCBzdHIgPSBpc1Nob3cgPyBcIlwiIDogXCJub25lXCI7XHJcbiAgICAgICAgY29uc3QgY2xlYXJJY29uID0gZXZlbnQudGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXCIuaW5wdXQtZ3JvdXAtY2xlYXJcIik7XHJcbiAgICAgICAgaWYgKGNsZWFySWNvbikge1xyXG4gICAgICAgICAgICBjbGVhckljb24uc3R5bGUuZGlzcGxheSA9IHN0cjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBvblRhZ2JveE1vdXNlRW50ZXIoZXZlbnQpIHtcclxuICAgICAgICBpZiAodGhpcy5kaXNwbGF5VGV4dCAmJiB0aGlzLmVuYWJsZUNsZWFyKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5yZWFkb25seSAmJiAhdGhpcy5kaXNhYmxlZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93VGFnYm94Q2xlYXJCdXR0b24gPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnNob3dUYWdib3hDbGVhckJ1dHRvbikge1xyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUNsZWFySWNvbihldmVudCwgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25UYWdib3hNb3VzZUxlYXZlKGV2ZW50KSB7XHJcbiAgICAgICAgdGhpcy50b2dnbGVDbGVhckljb24oZXZlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uUmVtb3ZlU2VsZWN0SXRlbSgkZXZlbnQsIHR4dCkge1xyXG4gICAgICAgICRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICBjb25zdCB0ZXh0QXJyYXkgPSBBcnJheS5mcm9tKHRoaXMuZGlzcGxheVRleHRMaXN0KTtcclxuICAgICAgICBjb25zdCByZW1vdmVkSW5kZXggPSB0aGlzLmRpc3BsYXlUZXh0TGlzdC5pbmRleE9mKHR4dCk7XHJcbiAgICAgICAgdGV4dEFycmF5LnNwbGljZShyZW1vdmVkSW5kZXgsIDEpO1xyXG4gICAgICAgIHRoaXMuZGlzcGxheVRleHQgPSB0ZXh0QXJyYXkuam9pbih0aGlzLm11bHRpcGxlQ2hvaWNlU2VwYXJhdG9yKTtcclxuICAgICAgICB0aGlzLm9yaWdpbmFsVGV4dCA9IHRoaXMuZGlzcGxheVRleHQ7XHJcbiAgICAgICAgdGhpcy5zZXRNb2RlbFZhbHVlKHRoaXMuZGlzcGxheVRleHQpO1xyXG5cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZGlzcGxheVZhbHVlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHMgPSB0aGlzLmRpc3BsYXlWYWx1ZS5zcGxpdCh0aGlzLm11bHRpcGxlQ2hvaWNlU2VwYXJhdG9yKTtcclxuICAgICAgICAgICAgdmFscy5zcGxpY2UocmVtb3ZlZEluZGV4LCAxKTtcclxuICAgICAgICAgICAgdGhpcy5kaXNwbGF5VmFsdWUgPSB2YWxzLmpvaW4odGhpcy5tdWx0aXBsZUNob2ljZVNlcGFyYXRvcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5tYXBGaWVsZHMpIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVPdGhlckZpZWxkRGF0YVdoZW5UYWdyZW1vdmVkKHJlbW92ZWRJbmRleCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnRhZ1JlbW92ZWQuZW1pdCh7IHJlbW92ZWRJbmRleCwgaW5zdGFuY2U6IHRoaXMgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB1cGRhdGVPdGhlckZpZWxkRGF0YVdoZW5UYWdyZW1vdmVkKHJlbW92ZWRJbmRleCkge1xyXG4gICAgICAgIGNvbnN0IGhlbHBGaWVsZHMgPSBPYmplY3Qua2V5cyh0aGlzLm1hcEZpZWxkcyk7XHJcbiAgICAgICAgY29uc3QgdGV4dEZpZWxkSW5kZXggPSBoZWxwRmllbGRzLmluZGV4T2YodGhpcy50ZXh0RmllbGQpO1xyXG5cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIHRoaXMubmdDb250cm9sICYmXHJcbiAgICAgICAgICAgIHRoaXMubmdDb250cm9sLmZvcm1EaXJlY3RpdmUgJiZcclxuICAgICAgICAgICAgdGhpcy5uZ0NvbnRyb2wuZm9ybURpcmVjdGl2ZS5mb3JtICYmXHJcbiAgICAgICAgICAgIHRoaXMubmdDb250cm9sLmZvcm1EaXJlY3RpdmUuZm9ybS5iaW5kaW5nRGF0YVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICBjb25zdCBiaW5kaW5nRGF0YSA9IHRoaXMubmdDb250cm9sLmZvcm1EaXJlY3RpdmUuZm9ybS5iaW5kaW5nRGF0YTtcclxuICAgICAgICAgICAgaWYgKGJpbmRpbmdEYXRhLnNldFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBiaW5kaW5nUGF0aCA9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uZ0NvbnRyb2wuZm9ybURpcmVjdGl2ZS5mb3JtLmJpbmRpbmdQYXRoO1xyXG4gICAgICAgICAgICAgICAgbGV0IHBhdGhBcnI6IHN0cmluZ1tdID0gW107XHJcbiAgICAgICAgICAgICAgICBpZiAoYmluZGluZ1BhdGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBwYXRoQXJyID0gYmluZGluZ1BhdGguc3BsaXQoXCIvXCIpLmZpbHRlcigobikgPT4gbiAhPT0gXCJcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaGVscEZpZWxkcy5mb3JFYWNoKChoZWxwRmllbGQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWFwRmllbGRzW2hlbHBGaWVsZF1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNwbGl0KFwiLFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZm9yRWFjaCgoZm9ybUZpZWxkOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkUGF0aHMgPSBwYXRoQXJyLmNvbmNhdChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtRmllbGQuc3BsaXQoXCIuXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsID0gYmluZGluZ0RhdGEuZ2V0VmFsdWUoZmllbGRQYXRocyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWxBcnIgPSB2YWwuc3BsaXQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tdWx0aXBsZUNob2ljZVNlcGFyYXRvclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbEFyci5zcGxpY2UocmVtb3ZlZEluZGV4LCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1ZhbCA9IHZhbEFyci5qb2luKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubXVsdGlwbGVDaG9pY2VTZXBhcmF0b3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaW5kaW5nRGF0YS5zZXRWYWx1ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoQXJyLmNvbmNhdChmaWVsZFBhdGhzKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuYmluZGluZ0RhdGEpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0ZXh0RmllbGRJbmRleCA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVscEZpZWxkcy5zcGxpY2UodGV4dEZpZWxkSW5kZXgsIDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaGVscEZpZWxkcy5mb3JFYWNoKChoZWxwRmllbGQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWFwRmllbGRzW2hlbHBGaWVsZF1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNwbGl0KFwiLFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZm9yRWFjaCgoZm9ybUZpZWxkOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbCA9IHRoaXMudXRpbHMuZ2V0VmFsdWUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUZpZWxkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmluZGluZ0RhdGFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWxBcnIgPSB2YWwuc3BsaXQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tdWx0aXBsZUNob2ljZVNlcGFyYXRvclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbEFyci5zcGxpY2UocmVtb3ZlZEluZGV4LCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1ZhbCA9IHZhbEFyci5qb2luKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubXVsdGlwbGVDaG9pY2VTZXBhcmF0b3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnV0aWxzLnNldFZhbHVlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmluZGluZ0RhdGEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUZpZWxkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1ZhbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIG9uQWxsQ2hpbGROb2Rlc0NsaWNrKCRldmVudDogYW55KSB7XHJcbiAgICAgICAgdGhpcy5pc0dldEFsbENoaWRsTm9kZXMgPSAhdGhpcy5pc0dldEFsbENoaWRsTm9kZXM7XHJcbiAgICB9XHJcblxyXG4gICAgb25JbmNsdWRlU3Vib3JkaW5hdGVzQ2hhbmdlKHZhbCkge1xyXG4gICAgICAgIHRoaXMuaW5jbHVkZVN1Ym9yZGluYXRlcyA9IHZhbDtcclxuICAgICAgICB0aGlzLmluY2x1ZGVTdWJvcmRpbmF0ZXMkLm5leHQodmFsKTtcclxuICAgIH1cclxuXHJcbiAgICBvblRhZ0NvbnRhaW5lckNsaWNrKCRldmVudDogTW91c2VFdmVudCkge1xyXG4gICAgICAgICRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICBpZiAodGhpcy50YWdJbnB1dCkge1xyXG4gICAgICAgICAgICB0aGlzLnRhZ0lucHV0LmZvY3VzKCk7XHJcbiAgICAgICAgICAgIHRoaXMudGFnSW5wdXQudGV4dGJveC5uYXRpdmVFbGVtZW50LmNsaWNrKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGV4cGFuZEZpcnN0Tm9kZShub2Rlcyk6IFRyZWVOb2RlW10ge1xyXG4gICAgICAgIGlmIChub2RlcyAmJiBub2Rlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5vZGVzLm1hcCgobm9kZTogVHJlZU5vZGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChub2RlLmNoaWxkcmVuICYmIG5vZGUuY2hpbGRyZW4ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5leHBhbmRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5leHBhbmRGaXJzdE5vZGUobm9kZS5jaGlsZHJlbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBub2RlcztcclxuICAgIH07XHJcblxyXG4gICAgLy8g55So5LqO57uE57uH5Liq5oCn5YyW5pWw5o2ua2V5XHJcbiAgICBnZXRMb29rdXBCaW5kaW5nRmllbGRzKCkge1xyXG4gICAgICAgIGlmICh0aGlzLm5nQ29udHJvbCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5uZ0NvbnRyb2wubmFtZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubmdDb250cm9sLm5hbWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5tYXBGaWVsZHMgJiYgdGhpcy5tYXBGaWVsZHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMubWFwRmllbGRzKS5tYXAoayA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm1hcEZpZWxkc1trXTtcclxuICAgICAgICAgICAgICAgICAgICB9KS5qb2luKCdfJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRleHRGaWVsZDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIl19