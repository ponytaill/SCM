/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { switchMap, takeUntil } from 'rxjs/operators';
/*
* @Author: 疯狂秀才(lucas huang)
 * @Date: 2018-12-18 18:44:13
 * @LastEditors: 疯狂秀才(Lucas Huang)
 * @LastEditTime: 2019-11-29 08:41:39
 * @Company: Inspur
 * @Version: v0.0.1
 */
import { Component, Input, TemplateRef, Directive, ContentChildren, QueryList, HostListener, Output, EventEmitter, ElementRef, Injector, ViewChild, Optional, Self, NgZone, Renderer2, ViewEncapsulation, ChangeDetectionStrategy, ChangeDetectorRef, HostBinding } from '@angular/core';
import { FarrisTemplateDirective, CommonUtils, IdService, FarrisComponentInstanceService, DebugService } from '@farris/ui-common';
import { ResizeService } from '@farris/ui-common/events';
import { ColumnFormatService } from '@farris/ui-common/column';
import { InputGroupComponent } from '@farris/ui-input-group';
import { LocaleService } from '@farris/ui-locale';
import { PerfectScrollbarComponent } from '@farris/ui-perfect-scrollbar';
import { of, BehaviorSubject, Subject, timer } from 'rxjs';
import { map } from 'rxjs/operators';
import { extend, remove } from 'lodash-es';
import ResizeObserver from 'resize-observer-polyfill';
import { VirtualizedLoaderService } from './virtualized-loader.service';
import { TreetableService } from './treetable.service';
import { SearchHandle } from './search.handle';
import { TTHotkeys } from './hotkeys';
import { FarrisContextMenuDirective } from '@farris/ui-context-menu';
/**
 * 单元格点事件参数
 * @record
 */
export function CellClickParam() { }
if (false) {
    /** @type {?} */
    CellClickParam.prototype.event;
    /** @type {?} */
    CellClickParam.prototype.col;
    /** @type {?} */
    CellClickParam.prototype.node;
}
/**
 * 节点钩选事件
 * @record
 */
export function NodeCheckedParam() { }
if (false) {
    /** @type {?|undefined} */
    NodeCheckedParam.prototype.originalEvent;
    /** @type {?} */
    NodeCheckedParam.prototype.node;
    /** @type {?|undefined} */
    NodeCheckedParam.prototype.nodes;
    /** @type {?} */
    NodeCheckedParam.prototype.instance;
}
/**
 * @record
 */
export function NodeSelectedParam() { }
if (false) {
    /** @type {?|undefined} */
    NodeSelectedParam.prototype.originalEvent;
    /** @type {?} */
    NodeSelectedParam.prototype.node;
    /** @type {?|undefined} */
    NodeSelectedParam.prototype.type;
    /** @type {?|undefined} */
    NodeSelectedParam.prototype.index;
    /** @type {?|undefined} */
    NodeSelectedParam.prototype.parents;
    /** @type {?} */
    NodeSelectedParam.prototype.instance;
}
/** @type {?} */
const NODES_PAGER_COLUMN_FIELD = '__nodespagerbar__';
export class TreeTableColumnDirective {
}
TreeTableColumnDirective.decorators = [
    { type: Directive, args: [{
                selector: 'tt-column, [tt-column]'
            },] }
];
TreeTableColumnDirective.propDecorators = {
    field: [{ type: Input }],
    title: [{ type: Input }],
    width: [{ type: Input }],
    hAlign: [{ type: Input }],
    align: [{ type: Input }],
    formatter: [{ type: Input }]
};
if (false) {
    /** @type {?} */
    TreeTableColumnDirective.prototype.field;
    /** @type {?} */
    TreeTableColumnDirective.prototype.title;
    /** @type {?} */
    TreeTableColumnDirective.prototype.width;
    /** @type {?} */
    TreeTableColumnDirective.prototype.hAlign;
    /** @type {?} */
    TreeTableColumnDirective.prototype.align;
    /** @type {?} */
    TreeTableColumnDirective.prototype.formatter;
}
export class TreeTableComponent {
    /**
     * @param {?} ttService
     * @param {?} el
     * @param {?} resizeSer
     * @param {?} renderer
     * @param {?} utils
     * @param {?} colFormatSer
     * @param {?} shortcuts
     * @param {?} cdRef
     * @param {?} ngZone
     * @param {?} injector
     */
    constructor(ttService, el, resizeSer, renderer, utils, colFormatSer, shortcuts, cdRef, ngZone, injector) {
        this.ttService = ttService;
        this.el = el;
        this.resizeSer = resizeSer;
        this.renderer = renderer;
        this.utils = utils;
        this.colFormatSer = colFormatSer;
        this.shortcuts = shortcuts;
        this.cdRef = cdRef;
        this.ngZone = ngZone;
        this.injector = injector;
        this.id = '';
        /**
         * 宽度
         */
        this.width = 500;
        /**
         * 高度
         */
        this.height = 400;
        this.showFilterBar = false;
        /**
         * 显示查询字段
         */
        this.showSearchField = true;
        this.headerHeight = 35;
        /**
         * 表头折行
         */
        this.headerWrap = false;
        /**
         * 行高
         */
        this.rowHeight = 29;
        /**
         * 列信息
         */
        this.columns = [];
        this._groupColumns = [];
        /**
         * 启用多表头
         */
        this.useGroupHeader = false;
        this.fitColumns = true;
        this.autoFitColumns = false;
        this.allColumnsTitle = '所有列';
        /**
         * 显示连接线，默认为 false
         */
        this.showLines = false;
        this.showLinesOnHover = false;
        /**
         * 是否启用多选。 默认为单选
         */
        this.multiSelect = false;
        this.singleSelect = true;
        /**
         * 启用多选后，是否显示checkbox
         */
        this.showCheckbox = false;
        /**
         * 显示边框线
         */
        this.showBorder = true;
        this.showCheckAll = true;
        this.showHeader = true;
        /**
         * 启用斑马线
         */
        this.striped = false;
        /**
         * 启用鼠标划过效果
         */
        this.hovered = true;
        /**
         * 禁用。 禁用时不允许选中行
         */
        this.disabled = false;
        /**
         * 数据加载方式; 默认值 为 all
         * - all: 全部加载
         * - async: 分层加载
         */
        this.loadDataType = 'all';
        /**
         * 固定表头
         */
        this.fixedHeader = false;
        /**
         * 当多选时，选中当前行并钩选
         */
        this.checkOnSelect = false;
        /**
         * 当多选时，钩选并选中当前行
         */
        this.selectOnCheck = false;
        /**
         * 启用多选时，此属性为true 时，仅当前行选中
         */
        this.onlySelectSelf = false;
        /**
         * 启用列宽调整
         */
        this.resizableColumns = true;
        /**
         * 设置为true时自适应父容的尺寸
         */
        this.fit = false;
        /**
         * 启用级联选中功能
         */
        this.cascadeCheck = true;
        /**
         * 向下级联选中
         */
        this.cascadeDown = true;
        /**
         * 向上级联选中
         */
        this.cascadeUp = true;
        /**
         * 空数据时，显示的提示文本
         */
        this.emptyMessage = '暂无数据';
        /**
         * 缩进间距，默认为 16px
         */
        this.indentSpacing = 16;
        /**
         * 单击行选中后，在次点击不会被取消选中状态;
         */
        this.keepSelect = true;
        /**
         * 虚拟加载
         */
        this.virtualized = false;
        /**
         * 仅允许选择叶子节点
         * - default: 应用服务器端传回的设置，如果服务器端没有设置，则与 no 保持一至；
         * - yes: 如果客户端设置为 `yes`, 服务器端的设置失效；
         * - no: 允许选择所有节点；服务器端设置失效
         */
        this.onlySelectLeaf = 'default';
        /**
         * 显示图标
         */
        this.showIcon = false;
        /**
         * 叶子节点图标
         */
        this.leafIcon = 'file';
        /**
         * 节点展开图标
         */
        this.expandIcon = 'folder-open';
        /**
         * 节点折叠图标
         */
        this.collapseIcon = 'folder';
        this.foldIcon = 'treetable-toggler';
        this.unfoldIcon = 'extanded treetable-toggler';
        /**
         * 启用节点图标从数据中获取。 默认为 false
         */
        this.useIconFromData = false;
        /**
         * 当数据源中icon未设置时使用内置ICON. 默认为 true
         */
        this.whenDataIconEmptyUseDefault = true;
        /**
         * 从数据源字段中获取图标
         */
        this.iconField = '';
        /**
         * 启用远端排序
         */
        this.remoteSort = true;
        /**
         * 启用前端文本查找
         */
        this.enableFindText = false;
        // 树列表默认展开层级。 -1： 不展开； 0： 全部展开； >0:  展开到指定级数；
        this.expandLevel = -1;
        this.selectValue = '';
        this.selectValueChange = new EventEmitter();
        /**
         * 启用双击展开节点
         */
        this.dblClickExpand = true;
        /**
         * 选中节点ID数组
         */
        this.selectValues = [];
        this.selectValuesChange = new EventEmitter();
        /**
         * 是否禁止折行，默认不折行
         */
        this.nowrap = true;
        this.checkValues = [];
        this.checkValuesChange = new EventEmitter();
        /**
         * 分页信息
         */
        this.pagination = false;
        /**
         * 分页加载子节点数据
         */
        this.paginationForChildren = false;
        /**
         * 分页条显示模式， default, simple
         */
        this.pagerViewMode = 'default';
        /**
         * 启用服务器端分页
         */
        this.pagerOnServer = true;
        /**
         * 每页记录数
         */
        this.pageList = [10, 20, 30, 50, 100];
        /**
         * 当前页码
         */
        this.pageIndex = 1;
        /**
         * 每页记录数
         */
        this.pageSize = 20;
        /**
         * 分页区高度
         */
        this.pagerHeight = 56;
        /**
         * 显示每页记录数
         */
        this.showPageList = false;
        /**
         * 显示分页信息
         */
        this.showPageInfo = true;
        /**
         * 显示页码
         */
        this.showPageNumber = true;
        /**
         * 显示页码最大数量
         */
        this.pagerLabelSize = 7;
        /**
         * 显示页码输入框
         */
        this.showGotoInput = false;
        /**
         * 子节点分页是否显示总记录数，默认 false
         */
        this.showTotalForChildren = false;
        /**
         * 总记录数
         */
        this.total = 0;
        this.enableContextMenu = false;
        this.contextMenuItems = [];
        this.pageSizeChanged = new EventEmitter();
        this.pageChanged = new EventEmitter();
        /**
         * 排序后
         */
        this.columnSorted = new EventEmitter();
        /**
         * 选中事件
         */
        this.nodeSelected = new EventEmitter();
        /**
         * 取消选中事件
         */
        this.nodeUnSelect = new EventEmitter();
        /**
         * 钩选
         */
        this.nodeChecked = new EventEmitter();
        /**
         * 取消钩选
         */
        this.nodeUnChecked = new EventEmitter();
        /**
         * 全选事件
         */
        this.checkAll = new EventEmitter();
        /**
         * 取消全选
         */
        this.unCheckAll = new EventEmitter();
        /**
         * 查询
         */
        this.search = new EventEmitter();
        this.dblClick = new EventEmitter();
        this.loadedData = new EventEmitter();
        this.expand = new EventEmitter();
        this.collapse = new EventEmitter();
        this.expandAllNodes = new EventEmitter();
        this.collapseAllNodes = new EventEmitter();
        this.appendNew = new EventEmitter();
        this.removed = new EventEmitter();
        this.updated = new EventEmitter();
        this.clearSearchValue = new EventEmitter();
        this.cellClick = new EventEmitter();
        this.childsPageChanged = new EventEmitter();
        this.searchValueChange = new EventEmitter();
        this.loadedTimer = 100;
        this._data = [];
        // loaddata 时 先设置为空数组，
        this.isLoadNewDataSetEmpty = false;
        /**
         * 根据内容自动宽度，默认 false;
         * 此属性开启后，自动列宽失效
         */
        this.autoWidth = false;
        /**
         * 选中项集合
         */
        this._selections = [];
        /**
         * 选中项索引
         */
        this.selectRowIndex = -1;
        /**
         * 选中当前行
         */
        this._selectedRow = null;
        /**
         * 钩选的记录集合
         */
        this._checkeds = [];
        this.searchData = { field: '*', value: '' };
        this.searchButtonText = '<i class="f-icon f-icon-search"></i>';
        /**
         * 显示查询工具条
         */
        this.showFindInput = false;
        this.isDataChanged = false;
        this.topHideHeight = 0;
        this.bottomHideHeight = 0;
        this.state = {
            searchRowNodes: null,
            searched: false,
            rowNodes: [],
            scrollY: 0,
            scrollX: 0
        };
        /**
         * 待查询的文本
         */
        this.findValue = '';
        /**
         * 结果总数
         */
        this.findCount = 0;
        /**
         * 当前索引
         */
        this.findCurrent = 0;
        /**
         * 存储文本查询结果
         */
        this.findResult = [];
        this.ro = null;
        this.findKeysHandler = null;
        this._hotKeys = null;
        this.styleSheetId = 'treetable-style-';
        // 调整模板，此属性仅为帮助中的树组件
        this.fast = false;
        this.paginationOptions = {
            id: 'Farris-TreeTable-Pagination_',
            itemsPerPage: this.pageSize,
            currentPage: this.pageIndex,
            pageList: this.pageList,
            totalItems: this.total,
            remote: this.pagerOnServer
        };
        this.selectNodeChangedSubject = new BehaviorSubject(null);
        this._UUID = '';
        // 是否有固定列
        this.fixedColumns = false;
        this.destroy$ = new Subject();
        this.farrisInstances = null;
        this.difference = (/**
         * @param {?} first
         * @param {?} second
         * @return {?}
         */
        (first, second) => first.filter((/**
         * @param {?} item
         * @return {?}
         */
        item => !second.some((/**
         * @param {?} secondItem
         * @return {?}
         */
        secondItem => secondItem == item)))));
        this.debugSer = null;
        this.onBeforeShowContextMenu = (/**
         * @param {?} e
         * @return {?}
         */
        (e) => {
            // row_1_fixedleft  row_1  row_1_fixedright
            const { contextMenuDom, event } = e;
            /** @type {?} */
            let rowID = event.target.id;
            if (contextMenuDom) {
                rowID = this.trId2DataId(contextMenuDom);
                /** @type {?} */
                const rowNode = this.findRowNode(rowID);
                /** @type {?} */
                let go$ = of({ show: true });
                if (this.beforeShowContextMenu) {
                    go$ = this.beforeShowContextMenu({ data: rowNode, tree: this });
                }
                return go$.pipe(switchMap((/**
                 * @param {?} r
                 * @return {?}
                 */
                (r) => {
                    if (r.show) {
                        if (r.menus) {
                            this.contextMenuItems = r.menus;
                            this.detectChanges();
                        }
                        /** @type {?} */
                        const viewportW = contextMenuDom.closest('.farris-treetable').offsetWidth;
                        /** @type {?} */
                        const targetW = contextMenuDom.offsetWidth;
                        /** @type {?} */
                        const focusTargetWidth = viewportW > targetW ? targetW : viewportW;
                        return of({ show: true, data: { data: rowNode, tree: this }, focusTargetWidth });
                    }
                    else {
                        return of({ show: false });
                    }
                })));
            }
            return of({ show: false });
        });
        this.searchHandle = new SearchHandle(this);
        this.scrollLoader = new VirtualizedLoaderService(this);
        if (this.injector) {
            this._hotKeys = this.injector.get(TTHotkeys, null);
            this.localeService = this.injector.get(LocaleService, null);
            this.idService = this.injector.get(IdService, null);
            this.farrisInstances = this.injector.get(FarrisComponentInstanceService, null);
        }
        if (this.idService) {
            this._UUID = this.idService.uuid();
            this.styleSheetId += this.idService.uuid();
        }
        else {
            this._UUID = ('' + Math.random()).slice(2);
            this.styleSheetId += ('' + Math.random()).slice(2);
        }
        this.ttService = new TreetableService();
        this.debugSer = this.injector.get(DebugService, null);
        if (this.debugSer) {
            this.debugSer.useDebugMode();
        }
    }
    /**
     * @param {?} cols
     * @return {?}
     */
    set groupColumns(cols) {
        this._groupColumns = cols || [];
        /** @type {?} */
        const _columns = this.ttService.checkColumnsForGroupHeader(cols.map((/**
         * @param {?} cs
         * @return {?}
         */
        cs => [...cs])), this).columns;
        this.columns = _columns.filter((/**
         * @param {?} n
         * @return {?}
         */
        n => n.field));
    }
    /**
     * @return {?}
     */
    get groupColumns() {
        return this._groupColumns;
    }
    /**
     * @return {?}
     */
    get data() {
        return this._data;
    }
    /**
     * @param {?} val
     * @return {?}
     */
    set data(val) {
        this._data = val;
        this.updateSerializedValue();
        if (!this.isLoadNewDataSetEmpty) {
            this.initNodeStatus();
        }
        // autowidth 时，表头宽度依据内容宽度作同步处理
        this.setNewColumnsWidth();
        this.loadDataSuccess();
    }
    /**
     * @param {?} content
     * @return {?}
     */
    set allCheckbox(content) {
        this.headerCheckboxCmp = content;
    }
    /**
     * @return {?}
     */
    get selections() {
        return this._selections;
    }
    /**
     * @param {?} vals
     * @return {?}
     */
    set selections(vals) {
        if (vals && vals.length) {
            // 过滤掉数据源中不存在节点
            this._selections = vals.filter((/**
             * @param {?} tn
             * @return {?}
             */
            tn => tn && this.findRowNode(tn.id)));
            /** @type {?} */
            const ids = this._selections.map((/**
             * @param {?} tn
             * @return {?}
             */
            tn => tn.id));
            if (ids.length !== this.selectValues.length ||
                (ids.length === this.selectValues.length && this.difference(ids, this.selectValues).length)) {
                this.selectValues = ids;
                setTimeout((/**
                 * @return {?}
                 */
                () => {
                    this.selectValuesChange.emit(ids);
                }));
            }
        }
        else {
            this._selections = [];
            this.selectValues = [];
            this.selectValuesChange.emit([]);
        }
    }
    /**
     * @return {?}
     */
    get selectedRow() {
        return this._selectedRow;
    }
    /**
     * @param {?} treeNode
     * @return {?}
     */
    set selectedRow(treeNode) {
        this._selectedRow = treeNode;
        if (treeNode) {
            if (this.selectValue !== treeNode.id) {
                this.selectValue = treeNode.id;
                this.selectValueChange.emit(treeNode.id);
            }
        }
        else {
            this.selectValue = null;
            this.selectValueChange.emit(null);
        }
    }
    /**
     * @return {?}
     */
    get checkeds() {
        return this._checkeds;
    }
    /**
     * @param {?} treeNodes
     * @return {?}
     */
    set checkeds(treeNodes) {
        if (treeNodes && treeNodes.length) {
            this._checkeds = treeNodes.filter((/**
             * @param {?} tn
             * @return {?}
             */
            tn => this.findRowNode(tn.id)));
            /** @type {?} */
            const ids = this._checkeds.map((/**
             * @param {?} tn
             * @return {?}
             */
            tn => tn.id));
            this.checkValues = this.checkValues || [];
            if (ids.length !== this.checkValues.length || (ids.length === this.checkValues.length && this.difference(ids, this.checkValues).length)) {
                this.checkValues = ids;
                setTimeout((/**
                 * @return {?}
                 */
                () => {
                    this.checkValuesChange.emit(ids);
                }));
            }
        }
        else {
            this._checkeds = [];
            this.checkValues = [];
            this.checkValuesChange.emit([]);
        }
    }
    /**
     * @param {?} msg
     * @param {?=} type
     * @return {?}
     */
    writeConsole(msg, type = 'warn') {
        if (this.debugSer) {
            this.debugSer[type](msg);
        }
    }
    /**
     * @private
     * @return {?}
     */
    checkOptons() {
        // 启用数据折行后，虚拟渲染功能失效
        if (!this.nowrap) {
            this.virtualized = false;
        }
        setTimeout((/**
         * @return {?}
         */
        () => {
            this.reSetSize();
            this.setScorllBodyHeight();
        }));
        if (this.multiSelect) {
            this.singleSelect = false;
        }
        if (this.singleSelect && this.showCheckbox) {
            this.checkOnSelect = true;
            this.selectOnCheck = true;
        }
        if (!this.beforeSortColumn) {
            this.beforeSortColumn = (/**
             * @return {?}
             */
            () => of(true));
        }
        if (this.fit) {
            this.renderer.addClass(this.el.nativeElement, 'f-utils-fill-flex-column');
            /** @type {?} */
            const parentEl = this.el.nativeElement.parentElement || this.el.nativeElement.parentNode;
            if (parentEl) {
                // this.renderer.addClass(parentEl, 'f-utils-fill');
                this.renderer.setStyle(parentEl, 'overflow', 'hidden');
            }
        }
        if (!this.beforeClickNode) {
            this.beforeClickNode = (/**
             * @return {?}
             */
            () => of(true));
        }
        if (!this.beforeCheckAll) {
            this.beforeCheckAll = (/**
             * @return {?}
             */
            () => of(true));
        }
        if (!this.beforeUnCheckAll) {
            this.beforeUnCheckAll = (/**
             * @return {?}
             */
            () => of(true));
        }
        if (this.autoWidth) {
            this.fitColumns = false;
            this.resizableColumns = false;
        }
        if (!this.disabledRow) {
            this.disabledRow = (/**
             * @return {?}
             */
            () => false);
        }
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.id = 'Treetable-' + this._UUID;
        // 创建 stylesheet
        this.styleElement = this.utils.createStyleSheet(this.styleSheetId);
        this.checkColumnOption();
        this.checkOptons();
        if (this.ngZone) {
            this.ngZone.runOutsideAngular((/**
             * @return {?}
             */
            () => {
                if (this.el.nativeElement.parentElement) {
                    this.ro = new ResizeObserver((/**
                     * @param {?} entries
                     * @param {?} observer
                     * @return {?}
                     */
                    (entries, observer) => {
                        if (entries && entries[0]) {
                            const { width, height } = entries[0].contentRect;
                            /** @type {?} */
                            const target = entries[0].target;
                            if (this.fit && target['offsetParent']) {
                                this.resize({ width, height: this.showBorder ? height - 2 : height });
                            }
                        }
                    }));
                    this.ro.observe(this.el.nativeElement.parentElement);
                }
            }));
        }
        this.paginationOptions = this.initPaginationOptions();
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        if (this.ro) {
            if (this.el.nativeElement.parentElement) {
                this.ro.unobserve(this.el.nativeElement.parentElement);
            }
            this.ro.disconnect();
            this.ro = null;
        }
        if (this.findKeysHandler) {
            this.findKeysHandler.unsubscribe();
        }
        this.utils.removeStyleSheet(this.styleSheetId);
        this.styleElement = null;
        if (this.farrisInstances) {
            this.farrisInstances.destroy(this.el.nativeElement);
        }
        this.ttService = null;
        this.destroy$.next();
        this.destroy$.complete();
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    ngOnChanges(changes) {
        if (changes.data && !changes.data.isFirstChange()) {
            this.isDataChanged = changes.data.currentValue !== changes.data.previousValue;
        }
        if (changes.multiSelect && !changes.multiSelect.isFirstChange()) {
            this.singleSelect = !changes.multiSelect.currentValue;
            if (this.singleSelect && this.showCheckbox) {
                this.selectOnCheck = true;
                this.checkOnSelect = true;
            }
        }
        if (changes.disabled && !changes.disabled.isFirstChange()) {
            this.hovered = !changes.disabled.currentValue;
        }
        if (changes.enableFindText && !changes.enableFindText.isFirstChange()) {
            this.setFindText(changes.enableFindText.currentValue);
        }
        if (changes.selectValue && !changes.selectValue.isFirstChange()) {
            this.selectNode(changes.selectValue.currentValue);
        }
        if (changes.selectValues && !changes.selectValues.isFirstChange()) {
            this.selectNodes(changes.selectValues.currentValue);
        }
        if (changes.checkValues && !changes.checkValues.isFirstChange()) {
            this.checkedNodes(changes.checkValues.currentValue);
        }
        if (changes.pageIndex !== undefined && !changes.pageIndex.isFirstChange()) {
            this.paginationOptions = Object.assign(this.paginationOptions, {
                currentPage: this.pageIndex
            });
        }
        if (changes.pageSize !== undefined && !changes.pageSize.isFirstChange()) {
            this.paginationOptions = Object.assign(this.paginationOptions, {
                itemsPerPage: this.pageSize
            });
        }
        if (changes.pageList !== undefined && !changes.pageList.isFirstChange()) {
            this.paginationOptions = Object.assign(this.paginationOptions, {
                pageList: this.pageList
            });
        }
        if (changes.total !== undefined && !changes.total.isFirstChange()) {
            this.paginationOptions = Object.assign(this.paginationOptions, {
                totalItems: this.total
            });
        }
        if (changes.fitColumns && !changes.fitColumns.isFirstChange()) {
            this.setTableWidth(this.allColumnsWidth());
        }
        if (changes.columns && !changes.columns.isFirstChange()) {
            this.checkColumnOption();
        }
        if (changes.showBorder && !changes.showBorder.isFirstChange()) {
            // this.reSetSize();
        }
    }
    /**
     * @return {?}
     */
    ngAfterViewChecked() {
        // if (this.isDataChanged) {
        //     this.loadedData.emit();
        //     this.isDataChanged = false;
        // } else {
        //     this.ngZone.runOutsideAngular(() => {
        //         if (this.psRef) {
        //             this.psRef.directiveRef.update();
        //         }
        //     });
        // }
    }
    /**
     * @return {?}
     */
    ngAfterContentInit() {
        this.templates.forEach((/**
         * @param {?} item
         * @return {?}
         */
        (item) => {
            switch (item.getType()) {
                case 'header':
                    this.headerTemplate = item.template;
                    break;
                case 'body':
                    this.bodyTemplate = item.template;
                    break;
            }
        }));
        if (this.columnsRef.length) {
            this.columns = this.ttc2columns(this.columnsRef);
            this.columnsRef.changes.subscribe((/**
             * @param {?} d
             * @return {?}
             */
            (d) => {
                this.columns = this.ttc2columns(d);
            }));
        }
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        this.containerElement = this.el.nativeElement.querySelector('.farris-treetable');
        this.registerShortcuts();
        // autowidth 时，表头宽度依据内容宽度作同步处理
        this.setNewColumnsWidth();
        this.setRightFixedColumnShadow();
        if (this.el && this.farrisInstances) {
            this.farrisInstances.add(this.el.nativeElement, this);
        }
        if (this.bodyTemplate) {
            this.utils.appendCssRules([`#${this.id} .farris-treetable .farris-treetable-tbody td {padding: .25rem 0.75rem;}`], this.styleElement.sheet);
        }
        // 兼容旧版设计器        
        if (this.fit && this.el.nativeElement.parentElement.nodeName !== 'DIV') {
            if (this.el.nativeElement.parentElement.nodeName === 'APP-DG-TREE-GRID') {
                /** @type {?} */
                const div = this.el.nativeElement.parentElement.closest('div');
                if (div) {
                    div.style.overflow = 'hidden';
                }
            }
        }
        this.loadDataSuccess();
    }
    /**
     * @private
     * @return {?}
     */
    loadDataSuccess() {
        timer(this.loadedTimer).pipe(takeUntil(this.destroy$)).subscribe((/**
         * @return {?}
         */
        () => {
            if (this.psRef && this.psRef.directiveRef) {
                this.psRef.directiveRef.update();
            }
            this.loadedData.emit();
        }));
    }
    /**
     * @private
     * @return {?}
     */
    setNewColumnsWidth() {
        if (!this.autoWidth) {
            return;
        }
        /** @type {?} */
        const newColWidth = {};
        /** @type {?} */
        let headerCells = [];
        /** @type {?} */
        let firstRowCells = [];
        // let colgroups = [];
        if (this.showHeader && this.headerTable) {
            headerCells = Array.from(this.headerTable.nativeElement.querySelectorAll('th'));
        }
        if (this.serializedValue && this.serializedValue.length && this.bodyTable) {
            firstRowCells = Array.from(this.bodyTable.nativeElement.querySelector('tr').querySelectorAll('td'));
            // colgroups = this.bodyTable.nativeElement.querySelector('colgroup').querySelectorAll('col');
        }
        firstRowCells.forEach((/**
         * @param {?} td
         * @param {?} index
         * @return {?}
         */
        (td, index) => {
            /** @type {?} */
            const fieldName = td.getAttribute('field');
            /** @type {?} */
            let colWidth = td.getBoundingClientRect().width.toFixed(2);
            newColWidth[fieldName] = colWidth;
            /** @type {?} */
            const col = this.columns.find((/**
             * @param {?} c
             * @return {?}
             */
            c => c.field === fieldName));
            if (col && col.width !== undefined) {
                colWidth = colWidth > col.width ? colWidth : col.width;
            }
            td.style.minWidth = colWidth + 'px';
            headerCells[index].style.width = colWidth + 'px';
        }));
    }
    /**
     * @param {?} col
     * @return {?}
     */
    columnIsVisible(col) {
        return this.ttService.columnIsVisible(col, this);
    }
    /**
     * @private
     * @param {?} n
     * @return {?}
     */
    columnCssName(n) {
        return `#${this.id} .treetable-cell[field="${n.field}"], #${this.id} .treetable-header-cell[field="${n.field}"]:not(.group-header-cell)`;
    }
    /**
     * @private
     * @return {?}
     */
    checkGroupColumns() {
        /** @type {?} */
        var i = this.groupColumns.length - 1;
        while (i >= 0) {
            /** @type {?} */
            var ids = this.groupColumns[i].map((/**
             * @param {?} n
             * @return {?}
             */
            n => n.parentId));
            ids = Array.from(new Set(ids));
            ids.map((/**
             * @param {?} id
             * @return {?}
             */
            id => {
                /** @type {?} */
                const childCols = this.groupColumns[i].filter((/**
                 * @param {?} n
                 * @return {?}
                 */
                n => n.parentId == id)).map((/**
                 * @param {?} n
                 * @return {?}
                 */
                n => {
                    /** @type {?} */
                    const dataField = this.columns.find((/**
                     * @param {?} c
                     * @return {?}
                     */
                    c => c.id === n.id));
                    return dataField || n;
                }));
                return {
                    id,
                    width: childCols.reduce((/**
                     * @param {?} r
                     * @param {?} c
                     * @return {?}
                     */
                    (r, c) => { return r += c.width; }), 0),
                    left: childCols[0].left,
                    right: childCols[childCols.length - 1].right || 0
                };
            })).forEach((/**
             * @param {?} p
             * @return {?}
             */
            p => {
                if (i - 1 >= 0) {
                    /** @type {?} */
                    let pCol = this.groupColumns[i - 1].find((/**
                     * @param {?} pc
                     * @return {?}
                     */
                    pc => pc.id == p.id));
                    /** @type {?} */
                    const dataField = this.columns.find((/**
                     * @param {?} c
                     * @return {?}
                     */
                    c => c.id === p.id));
                    pCol = dataField || pCol;
                    pCol.width = p.width;
                    if (pCol.fixed === 'left') {
                        pCol.left = p.left;
                    }
                    if (pCol.fixed === 'right') {
                        pCol.right = p.right;
                    }
                }
            }));
            i--;
        }
    }
    // 按固定列的顺序排序
    /**
     * @private
     * @param {?=} updateColumns
     * @return {?}
     */
    sortColumnsByFixed(updateColumns = true) {
        /** @type {?} */
        const fixedLeft = this.columns.filter((/**
         * @param {?} n
         * @return {?}
         */
        n => n.fixed === 'left'));
        /** @type {?} */
        const fixedCenter = this.columns.filter((/**
         * @param {?} n
         * @return {?}
         */
        n => !n.fixed || n.fixed === 'center'));
        /** @type {?} */
        const fixedRight = this.columns.filter((/**
         * @param {?} n
         * @return {?}
         */
        n => n.fixed === 'right'));
        if (fixedLeft && fixedLeft.length) {
            fixedLeft.forEach((/**
             * @param {?} n
             * @param {?} index
             * @return {?}
             */
            (n, index) => {
                if (index) {
                    n.left = fixedLeft.reduce((/**
                     * @param {?} r
                     * @param {?} c
                     * @param {?} i
                     * @return {?}
                     */
                    (r, c, i) => {
                        if (i < index) {
                            return r += c.width;
                        }
                        return r;
                    }), 0);
                }
                else {
                    n.left = 0;
                }
            }));
        }
        if (fixedRight && fixedRight.length) {
            /** @type {?} */
            let rightWidthTotal = fixedRight.reduce((/**
             * @param {?} r
             * @param {?} c
             * @return {?}
             */
            (r, c) => {
                return r + c.width;
            }), 0);
            fixedRight.forEach((/**
             * @param {?} n
             * @param {?} index
             * @return {?}
             */
            (n, index) => {
                rightWidthTotal -= n.width;
                n.right = rightWidthTotal;
            }));
        }
        if (updateColumns) {
            this.columns = fixedLeft.concat(fixedCenter).concat(fixedRight);
        }
    }
    /**
     * @private
     * @return {?}
     */
    checkColumnOption() {
        /** @type {?} */
        const cssRules = [];
        // 启用分页加载子节点
        if (this.paginationForChildren) {
            /** @type {?} */
            const pagerBarCol = {
                field: NODES_PAGER_COLUMN_FIELD,
                width: 160,
                title: '',
                align: 'center',
                template: this.nodesPagerBar,
                rowspan: 1,
            };
            if (this.useGroupHeader) {
                if (this.groupColumns[0][this.groupColumns[0].length - 1].fixed === 'right') {
                    pagerBarCol.fixed = 'right';
                }
                pagerBarCol.rowspan = this.groupColumns.length;
                this.groupColumns[0].push(pagerBarCol);
            }
            this.columns.push(pagerBarCol);
        }
        if (!this.fitColumns) {
            this.sortColumnsByFixed();
        }
        this.columns.forEach((/**
         * @param {?} n
         * @param {?} i
         * @return {?}
         */
        (n, i) => {
            if (n.visible === undefined) {
                n.visible = true;
            }
            if (n['halign']) {
                n.hAlign = n['halign'];
            }
            if (n.width === undefined) {
                n.width = 100;
            }
            if (!n.id) {
                n.id = 'treetable-header-' + (n.field || i);
            }
        }));
        /** @type {?} */
        const colWidthTotal = this.allColumnsWidth();
        /** @type {?} */
        let fixedCols = 0;
        /** @type {?} */
        const fixedRightColumns = this.columns.filter((/**
         * @param {?} n
         * @return {?}
         */
        n => n.fixed === 'right'));
        if (fixedRightColumns && fixedRightColumns.length) {
            fixedRightColumns[0]['rightShadowCol'] = true;
            fixedRightColumns[fixedRightColumns.length - 1]['lastColumn'] = true;
        }
        else {
            if (this.columns && this.columns.length) {
                this.columns[this.columns.length - 1]['lastColumn'] = true;
            }
        }
        /** @type {?} */
        const fixedLeftColumns = this.columns.filter((/**
         * @param {?} n
         * @return {?}
         */
        n => n.fixed === 'left'));
        if (fixedLeftColumns && fixedLeftColumns.length) {
            fixedLeftColumns[fixedLeftColumns.length - 1]['leftShadowCol'] = true;
        }
        fixedCols = this.setCellWidthCss(colWidthTotal, fixedCols, cssRules);
        this.setTableWidth(colWidthTotal);
        this.fixedColumns = !!fixedCols;
    }
    /**
     * @private
     * @param {?} colWidthTotal
     * @param {?} fixedCols
     * @param {?} cssRules
     * @return {?}
     */
    setCellWidthCss(colWidthTotal, fixedCols, cssRules) {
        this.columns.forEach((/**
         * @param {?} n
         * @param {?} index
         * @return {?}
         */
        (n, index) => {
            /** @type {?} */
            const isVisible = this.columnIsVisible(n);
            /** @type {?} */
            const ruleName = this.columnCssName(n);
            /** @type {?} */
            const cssRule = this.utils.getCssRule(ruleName, this.styleElement.sheet);
            if (!cssRule) {
                /** @type {?} */
                let stylecss = ruleName + ' { ';
                stylecss += isVisible ? '' : 'display: none;';
                if (this.fitColumns) {
                    stylecss += `width: ${(n.width / colWidthTotal * 100).toFixed(2)}%;`;
                }
                else {
                    stylecss += `width: ${n.width}px;`;
                    if (n.fixed) {
                        if (n.fixed === 'left') {
                            stylecss += `left: ${n.left}px`;
                            fixedCols++;
                        }
                        if (n.fixed === 'right') {
                            stylecss += `right: ${n.right}px`;
                            fixedCols++;
                        }
                    }
                }
                stylecss += '}';
                cssRules.push(stylecss);
            }
            else {
                cssRule.style.display = isVisible ? '' : 'none';
                if (this.fitColumns) {
                    cssRule.style.width = `${(n.width / colWidthTotal * 100).toFixed(2)}%`;
                }
                else {
                    cssRule.style.width = `${n.width}px`;
                    if (n.fixed) {
                        if (n.fixed === 'left') {
                            cssRule.style.left = `${n.left}px`;
                        }
                        if (n.fixed === 'right') {
                            cssRule.style.right = `${n.right}px`;
                        }
                    }
                }
            }
        }));
        if (this.useGroupHeader) {
            this.autoWidth = false; // 多表头启用后，自动列宽失效 TFS 496088
            this.checkGroupColumns();
            /** @type {?} */
            var i = this.groupColumns.length - 2;
            while (i >= 0) {
                /** @type {?} */
                const groupHeaderColCsses = this.groupColumns[i].filter((/**
                 * @param {?} col
                 * @return {?}
                 */
                col => !col.field)).map((/**
                 * @param {?} col
                 * @return {?}
                 */
                col => {
                    /** @type {?} */
                    let groupColCssName = `#${col.id}{ width: ${col.width}px`;
                    if (col.fixed) {
                        if (col.fixed === 'left') {
                            groupColCssName += ';left:' + col.left + 'px';
                        }
                        if (col.fixed === 'right') {
                            groupColCssName += ';right:' + col.right + 'px';
                        }
                    }
                    return groupColCssName += '}';
                }));
                this.utils.appendCssRules2(groupHeaderColCsses, this.styleElement.sheet);
                i--;
            }
        }
        if (cssRules.length) {
            this.utils.appendCssRules(cssRules, this.styleElement.sheet);
        }
        return fixedCols;
    }
    /**
     * @private
     * @param {?} colWidthTotal
     * @return {?}
     */
    setTableWidth(colWidthTotal) {
        if (this.headerTable && this.bodyTable) {
            if (!this.fitColumns && !this.autoFitColumns) {
                this.headerTable.nativeElement.style.width = `${colWidthTotal}px`;
                this.bodyTable.nativeElement.style.width = `${colWidthTotal}px`;
            }
            else {
                this.headerTable.nativeElement.style.width = '100%';
                this.bodyTable.nativeElement.style.width = '100%';
            }
        }
    }
    /**
     * @private
     * @return {?}
     */
    allColumnsWidth() {
        return this.columns.reduce((/**
         * @param {?} r
         * @param {?} c
         * @return {?}
         */
        (r, c) => {
            if (this.columnIsVisible(c)) {
                return r + c.width;
            }
            else {
                return r;
            }
        }), 0);
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    onPageChange($event) {
        this.pageChanged.emit($event);
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    onPageSizeChange($event) {
        this.pageSizeChanged.emit($event);
    }
    /**
     * @param {?} pageInfo
     * @return {?}
     */
    updatePageInfo(pageInfo) {
        if (pageInfo && Object.keys(pageInfo).length) {
            /** @type {?} */
            const obj = {};
            if (pageInfo.total !== undefined) {
                obj.totalItems = pageInfo.total;
            }
            if (pageInfo.pageIndex !== undefined) {
                obj.currentPage = pageInfo.pageIndex;
            }
            if (pageInfo.pageSize !== undefined) {
                obj.itemsPerPage = pageInfo.pageSize;
            }
            if (pageInfo.pageList !== undefined) {
                obj.pageList = pageInfo.pageList;
            }
            this.paginationOptions = Object.assign(this.paginationOptions, obj);
        }
    }
    /**
     * @private
     * @return {?}
     */
    initPaginationOptions() {
        return {
            id: 'Farris-TreeTable-Pagination_' + this._UUID,
            itemsPerPage: this.pageSize,
            currentPage: this.pageIndex,
            pageList: this.pageList,
            totalItems: this.total,
            remote: this.pagerOnServer
        };
    }
    /**
     * @param {?} col
     * @param {?} rowdata
     * @param {?=} fast
     * @return {?}
     */
    getNodeText(col, rowdata, fast = false) {
        if (col.isMultilingualField) {
            /** @type {?} */
            const val = this.utils.getValue(col.field, rowdata);
            if (this.localeService) {
                /** @type {?} */
                const localeId = this.localeService.localeId || 'zh-CHS';
                if (val && typeof val === 'object' && Object.keys(val).length > 0) {
                    return val[localeId];
                }
                else {
                    return val;
                }
            }
        }
        else {
            return this.utils.getValue(col.field, rowdata, !fast);
        }
    }
    /**
     * @private
     * @return {?}
     */
    initNodeStatus() {
        if (!this.singleSelect) {
            if (this.checkValues && this.checkValues.length) {
                this.checkedNodes(this.checkValues, false, false);
            }
            if (this.selectValues && this.selectValues.length && !this.onlySelectSelf) {
                this.selectNodes(this.selectValues, false, false);
            }
        }
        else {
            if (this.selectValue) {
                this.selectNode(this.selectValue, false);
            }
        }
    }
    /**
     * 注册快捷键
     * @private
     * @return {?}
     */
    registerShortcuts() {
        if (this.showFilterBar && this._hotKeys) {
            this._hotKeys.addShortcut({ keys: 'enter', element: this.inputGroup.textbox.nativeElement }).subscribe((/**
             * @return {?}
             */
            () => {
                this.onSearch();
            }));
        }
        this.setFindText(this.enableFindText);
    }
    /**
     * @private
     * @param {?=} enable
     * @return {?}
     */
    setFindText(enable = true) {
        this.enableFindText = enable;
        if (this.enableFindText && this._hotKeys) {
            // 查询工具条
            this.findKeysHandler = this._hotKeys.addShortcut({ keys: 'control.shift.f' }).subscribe((/**
             * @param {?} e
             * @return {?}
             */
            (e) => {
                if (this.enableFindText) {
                    this.showFindInput = true;
                    this.detectChanges();
                }
            }));
        }
        else {
            if (this.showFindInput) {
                this.showFindInput = false;
                this.cdRef.detectChanges();
            }
            if (this.findKeysHandler) {
                this.findKeysHandler.unsubscribe();
                this.findKeysHandler = null;
            }
        }
    }
    /**
     * @private
     * @param {?} rowNode
     * @param {?=} field
     * @param {?=} clsType
     * @return {?}
     */
    getCustomCls(rowNode, field = '', clsType = 'row') {
        /** @type {?} */
        const cls = {};
        /** @type {?} */
        let fn = this.rowStyler;
        if (clsType === 'cell') {
            fn = this.cellStyler;
        }
        if (fn) {
            /** @type {?} */
            const rowCls = fn(rowNode.node, field);
            if (rowCls) {
                /** @type {?} */
                let arrcls = [];
                if (typeof rowCls === 'string') {
                    arrcls = [rowCls];
                }
                else {
                    if (Array.isArray(rowCls)) {
                        arrcls = rowCls;
                    }
                }
                if (arrcls.length) {
                    /** @type {?} */
                    const rowClsObj = {};
                    arrcls.forEach((/**
                     * @param {?} c
                     * @return {?}
                     */
                    c => {
                        rowClsObj['' + c] = true;
                    }));
                    /** @type {?} */
                    const _cls = Object.assign({}, rowClsObj, cls);
                    return _cls;
                }
                else {
                    return rowCls;
                }
            }
            else {
                return cls;
            }
        }
        else {
            return cls;
        }
    }
    /**
     * @param {?} rowNode
     * @param {?=} field
     * @return {?}
     */
    getRowCls(rowNode, field) {
        return this.getCustomCls(rowNode, 'row');
    }
    /**
     * @param {?} rowNode
     * @param {?} field
     * @return {?}
     */
    getCellCls(rowNode, field) {
        return this.getCustomCls(rowNode, field, 'cell');
    }
    /**
     * @param {?} currentCol
     * @return {?}
     */
    getRealColWidth(currentCol) {
        if (this.columns && this.columns.length && this.fitColumns) {
            /** @type {?} */
            const colWidthTotal = this.columns.reduce((/**
             * @param {?} r
             * @param {?} c
             * @return {?}
             */
            (r, c) => {
                return r + (this.columnIsVisible(c) && (r.field !== NODES_PAGER_COLUMN_FIELD || r.fixedWidth) ? c.width : 0);
            }), 0);
            if (this.columnIsVisible(currentCol)) {
                if (currentCol.field !== NODES_PAGER_COLUMN_FIELD && !currentCol.fixedWidth) {
                    return (currentCol.width / colWidthTotal * 100).toFixed(2) + '%';
                }
                else {
                    return (currentCol.width || 120) + 'px';
                }
            }
            else {
                return 0;
            }
        }
        return currentCol.width + 'px';
    }
    /**
     * @return {?}
     */
    onResized() {
        this.resizeSer.windowResized();
    }
    /**
     * @private
     * @return {?}
     */
    setRightFixedColumnShadow() {
        if (this.psRef && this.psRef.directiveRef) {
            /** @type {?} */
            const ps = ((/** @type {?} */ (this.psRef.directiveRef))).instance;
            if (!ps) {
                return;
            }
            const { containerWidth, scrollbarXLeft, contentWidth } = ps;
            if (containerWidth + scrollbarXLeft < contentWidth) {
                /** @type {?} */
                const fixedRightColumns = this.columns.filter((/**
                 * @param {?} n
                 * @return {?}
                 */
                n => n.fixed === 'right'));
                /** @type {?} */
                const ruleName = `#${this.id}.f-treetable--fixed-columns`;
                if (fixedRightColumns && fixedRightColumns.length) {
                    /** @type {?} */
                    const fixedRightCssRuleKey = `${ruleName} [r-tt-shadow-col]::before`;
                    /** @type {?} */
                    const rightCSSRule = `${fixedRightCssRuleKey}{
                        box-shadow:#d9d9d9 -12px 0px 8px -12px inset;
                    }`;
                    this.utils.appendCssRules([rightCSSRule], this.styleElement.sheet);
                }
            }
        }
    }
    /**
     * @private
     * @param {?} x
     * @param {?} e
     * @return {?}
     */
    setFixedColumnShadow(x, e) {
        /** @type {?} */
        const fixedLeftColumns = this.columns.filter((/**
         * @param {?} n
         * @return {?}
         */
        n => n.fixed === 'left'));
        /** @type {?} */
        const fixedRightColumns = this.columns.filter((/**
         * @param {?} n
         * @return {?}
         */
        n => n.fixed === 'right'));
        /** @type {?} */
        const ruleName = `#${this.id}.f-treetable--fixed-columns`;
        /** @type {?} */
        let fixedLeftCssRuleKey = '';
        /** @type {?} */
        let fixedRightCssRuleKey = '';
        /** @type {?} */
        let leftCSSRule = '';
        /** @type {?} */
        let rightCSSRule = '';
        if (fixedLeftColumns && fixedLeftColumns.length) {
            /** @type {?} */
            const lastFixedLeftColumn = fixedLeftColumns[fixedLeftColumns.length - 1];
            fixedLeftCssRuleKey = `${ruleName} [field="${lastFixedLeftColumn.field}"]::after`;
            leftCSSRule = `${fixedLeftCssRuleKey}{
                box-shadow:#d9d9d9 12px 0px 8px -12px inset;
            }`;
        }
        if (fixedRightColumns && fixedRightColumns.length) {
            fixedRightCssRuleKey = `${ruleName} [r-tt-shadow-col]::before`;
            rightCSSRule = `${fixedRightCssRuleKey}{
                box-shadow:#d9d9d9 -12px 0px 8px -12px inset;
            }`;
        }
        if (x === 0) {
            // 移除左侧固定列阴影样式
            if (fixedLeftCssRuleKey) {
                this.utils.removeCssRule(fixedLeftCssRuleKey, this.styleElement.sheet);
            }
        }
        else if ((x + e.srcElement.offsetWidth).toFixed() == e.srcElement.scrollWidth) {
            // 移除右则固定列阴影样式
            if (fixedRightCssRuleKey) {
                this.utils.removeCssRule(fixedRightCssRuleKey, this.styleElement.sheet);
            }
        }
        else {
            // 添加左右固定列样式
            /** @type {?} */
            const arr = [];
            if (leftCSSRule) {
                arr.push(leftCSSRule);
            }
            if (rightCSSRule) {
                arr.push(rightCSSRule);
            }
            this.utils.appendCssRules(arr, this.styleElement.sheet);
        }
    }
    /**
     * @param {?} e
     * @return {?}
     */
    onScrollX(e) {
        if (this.showHeader && this.headerBox) {
            /** @type {?} */
            const x = e.srcElement.scrollLeft;
            this.state.scrollX = x;
            // this.renderer.setStyle(this.headerBox.nativeElement.querySelector('table'), 'transform', `translate3d(-${x}px, 0px, 0px)`);
            this.headerBox.nativeElement.scrollLeft = x;
            this.setFixedColumnShadow(x, e);
        }
    }
    /**
     * @param {?} e
     * @return {?}
     */
    onScrollY(e) {
        if (this.virtualized) {
            /** @type {?} */
            const scrollTop = e.target.scrollTop;
            this.renderData(scrollTop);
        }
    }
    /**
     * @private
     * @param {?} scrolltop
     * @return {?}
     */
    renderData(scrolltop) {
        const { data, topHideHeight, bottomHideHeight } = this.scrollLoader.getRowNodes(scrolltop);
        this.state.scrollY = scrolltop;
        this.serializedValue = data;
        this.topHideHeight = topHideHeight;
        this.bottomHideHeight = bottomHideHeight;
        this.detectChanges();
        this.setNewColumnsWidth();
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    onSearchValueChange($event) {
        if (!$event) {
            this.onClearSearchValue();
        }
        this.searchValueChange.emit(this.searchData);
    }
    /**
     * @return {?}
     */
    onClearSearchValue() {
        this.searchData.value = '';
        this.state.searched = false;
        this.clearSearchValue.emit();
    }
    /**
     * @param {?} event
     * @param {?} col
     * @param {?} node
     * @return {?}
     */
    onCellClick(event, col, node) {
        this.cellClick.emit({ event, col, node });
    }
    /**
     * @param {?} index
     * @param {?} rowNode
     * @return {?}
     */
    trackByFn(index, rowNode) {
        return rowNode.id;
    }
    /**
     * 格式化数据
     * @param {?} col
     * @param {?} data
     * @param {?} formatter
     * @return {?}
     */
    formatData(col, data, formatter) {
        // const val = this.utils.getValue(field, data, true );
        /** @type {?} */
        const val = this.getNodeText(col, data);
        if (formatter && formatter.type === 'timeago') {
            if (!formatter.options) {
                formatter.options = { locale: this.localeService.localeId };
            }
            else {
                if (!formatter.options.locale) {
                    formatter.options.locale = this.localeService.localeId;
                }
            }
        }
        return this.colFormatSer.format(val, data, formatter, { locale: this.localeService.localeId });
    }
    /**
     * @return {?}
     */
    columnsChanged() {
        this.checkColumnOption();
        this.detectChanges();
    }
    /**
     * @private
     * @param {?} list
     * @return {?}
     */
    ttc2columns(list) {
        return list.map((/**
         * @param {?} n
         * @return {?}
         */
        (n) => {
            return {
                field: n.field,
                title: n.title,
                align: n.align,
                hAlign: n.hAlign,
                width: n.width,
                formatter: n.formatter
            };
        }));
    }
    /**
     * @private
     * @return {?}
     */
    reSetSize() {
        if (this.fit) {
            /** @type {?} */
            const parentEl = this.el.nativeElement.parentNode;
            this.setWidth(parentEl.offsetWidth);
            this.height = parentEl.offsetHeight;
            // 如果在使用时，为组件设置的高度，则以此值为准，仅支持 固定值 ，不支持 百分比
            if (this.el.nativeElement.style.height) {
                /** @type {?} */
                let h = this.el.nativeElement.style.height;
                if (h.indexOf('px') > -1) {
                    h = parseInt(h.replace('px', ''), 10);
                    if (h > 0) {
                        this.height = h;
                    }
                }
            }
        }
    }
    /**
     * @private
     * @param {?=} nodePosY
     * @return {?}
     */
    renderVirtualRowNodes(nodePosY = null) {
        if (this.virtualized) {
            /** @type {?} */
            const scrollY = nodePosY || this.state.scrollY;
            /** @type {?} */
            const _rownodes = this.scrollLoader.getRowNodes(scrollY);
            this.serializedValue = _rownodes.data;
            this.topHideHeight = _rownodes.topHideHeight;
            this.bottomHideHeight = _rownodes.bottomHideHeight;
            this.detectChanges();
            if (nodePosY) {
                this.ngZone.runOutsideAngular((/**
                 * @return {?}
                 */
                () => {
                    setTimeout((/**
                     * @return {?}
                     */
                    () => {
                        this.psRef.directiveRef.elementRef.nativeElement.scrollTop = nodePosY;
                    }), 20);
                }));
            }
        }
    }
    /**
     * @param {?=} nodePosY
     * @return {?}
     */
    updateSerializedValue(nodePosY = null) {
        this.serializedValue = [];
        this.searchHandle.allNodes = [];
        this.state.rowNodes = [];
        this.serializeNodes(null, this.data, 0, true);
        if (this.virtualized && this.fixedHeader) {
            this.renderVirtualRowNodes(nodePosY);
        }
        else {
            this.serializedValue = this.state.rowNodes;
            this.detectChanges();
            // if (emitChanges) {
            // }
        }
    }
    /**
     * 将树节点数据序列化为RowNode
     * @param {?} parent 父级节点
     * @param {?} nodes 树节点集合
     * @param {?} level 级别
     * @param {?} visible 是否可见
     * @param {?=} parentIds
     * @return {?}
     */
    serializeNodes(parent, nodes, level, visible, parentIds) {
        if (nodes && nodes.length) {
            if (!nodes[0].data) {
                return;
            }
            nodes.forEach((/**
             * @param {?} node
             * @param {?} index
             * @return {?}
             */
            (node, index) => {
                node.parent = parent;
                if (!node.hasOwnProperty('selectable')) {
                    node.selectable = true;
                }
                if (!node.hasOwnProperty('showIcon')) {
                    node.showIcon = true;
                }
                if (this.onlySelectLeaf === 'yes' && node.selectable) {
                    node.selectable = !!node.leaf;
                }
                /** @type {?} */
                const keyid = node.data[this.idField];
                node.id = keyid;
                /** @type {?} */
                const isSelected = this.findIndexInSelection(node) > -1;
                /** @type {?} */
                const isChecked = this.findIndexInCheckeds(node) > -1;
                /** @type {?} */
                const isLast = index === nodes.length - 1;
                /** @type {?} */
                const isFirst = index === 0;
                /** @type {?} */
                let parents = [];
                /** @type {?} */
                let parentRn = null;
                if (parent) {
                    /** @type {?} */
                    const parentID = parent.data[this.idField];
                    /** @type {?} */
                    const _parents = parentIds || [];
                    parents = parents.concat(_parents.map((/**
                     * @param {?} n
                     * @return {?}
                     */
                    n => n)));
                    parents.push(parentID);
                    parentRn = this.state.rowNodes.find((/**
                     * @param {?} n
                     * @return {?}
                     */
                    n => n.id === parent.id));
                }
                /** @type {?} */
                const rowNode = {
                    id: keyid,
                    node,
                    parent,
                    level,
                    visible: visible && (parent ? parent.expanded : true),
                    isSelected,
                    isChecked,
                    parents,
                    parentRowNode: parentRn,
                    index: this.state.rowNodes.length,
                    last: isLast,
                    first: isFirst
                };
                // this.serializedValue.push(rowNode);
                this.state.rowNodes.push(rowNode);
                this.serializeNodes(node, node.children, level + 1, rowNode.visible, parents);
            }));
        }
    }
    /**
     * 判断指定的节点是否被选中
     * @param {?} node 树节点
     * @return {?}
     */
    isSelected(node) {
        if (this.singleSelect) {
            if (node && this.selectedRow) {
                return node.data[this.idField] === this.selectedRow.data[this.idField];
            }
            return false;
        }
        else {
            if (this.selections && this.selections.length) {
                return this.selections.findIndex((/**
                 * @param {?} n
                 * @return {?}
                 */
                n => n.data[this.idField] === node.data[this.idField])) > -1;
            }
            return false;
        }
    }
    /**
     * 判断当前节点的钩选状态
     * @param {?} node
     * @return {?}
     */
    isChecked(node) {
        if (node && this.checkeds) {
            if (this.checkeds instanceof Array) {
                return this.checkeds.findIndex((/**
                 * @param {?} v
                 * @return {?}
                 */
                (v) => {
                    return v.data[this.idField] === node.data[this.idField];
                })) > -1;
            }
            return false;
        }
        return false;
    }
    /**
     * @private
     * @return {?}
     */
    unSelectedCurrentRowEmit() {
        /** @type {?} */
        const currSelected = this.selectedRow;
        if (currSelected) {
            this.nodeUnSelect.emit({ node: currSelected, type: 'row', instance: this });
        }
    }
    /**
     * @private
     * @param {?} e
     * @return {?}
     */
    _singleSelectNode(e) {
        this.clearSelections();
        this.selectedRow = e.rowNode.node;
        this.selectRowIndex = e.rowIndex;
        this.selections = [e.rowNode.node];
        e.rowNode.isSelected = true;
        if (this.showCheckbox) {
            e.rowNode.isChecked = true;
            this.clearCheckeds();
            this.setCheckeds(e.rowNode);
        }
        /** @type {?} */
        const sp = {
            originalEvent: e.originalEvent,
            node: e.rowNode.node, type: 'row',
            index: e.rowIndex,
            parents: e.rowNode.parents,
            instance: this
        };
        this.nodeSelected.emit(sp);
    }
    /**
     * @private
     * @param {?} e
     * @return {?}
     */
    _singleUnSelectNode(e) {
        this.selectedRow = null;
        this.selectRowIndex = -1;
        e.rowNode.isSelected = false;
        e.rowNode.isChecked = false;
        this.selections = [];
        this.nodeUnSelect.emit({
            originalEvent: e.originalEvent,
            node: e.rowNode.node, type: 'row', parents: e.rowNode.parents,
            instance: this
        });
    }
    /**
     * @private
     * @param {?} event
     * @param {?=} selected
     * @return {?}
     */
    __singleSelectNode(event, selected = false) {
        if (!selected) {
            this.unSelectedCurrentRowEmit();
            this._singleSelectNode(event);
        }
        else {
            if (!this.keepSelect) {
                this._singleUnSelectNode(event);
            }
        }
    }
    /**
     * @private
     * @param {?} event
     * @param {?} selected
     * @return {?}
     */
    __multiSelectNode(event, selected) {
        /** @type {?} */
        const rowNode = event.rowNode;
        if (selected) {
            this.unSelectedCurrentRowEmit();
            this.singleSelectWhenMultiSelect(rowNode, true);
            this.nodeSelected.emit({
                originalEvent: event.originalEvent, node: rowNode.node,
                type: 'row', index: event.rowIndex, parents: rowNode.parents,
                instance: this
            });
        }
        else {
            if (!this.keepSelect) {
                this.singleSelectWhenMultiSelect(rowNode, false);
                this.nodeUnSelect.emit({
                    originalEvent: event.originalEvent, node: rowNode.node,
                    type: 'row', index: event.rowIndex, parents: rowNode.parents,
                    instance: this
                });
            }
        }
    }
    /**
     * 行单击事件
     * @param {?} event
     * @return {?}
     */
    handleRowClick(event) {
        /** @type {?} */
        const rowNode = event.rowNode;
        rowNode.node['elementRef'] = event.originalEvent.target;
        /** @type {?} */
        const selected = this.isSelected(rowNode.node);
        if (this.singleSelect) {
            this.__singleSelectNode(event, selected);
        }
        else {
            rowNode.indeterminate = false;
            if (this.onlySelectSelf) {
                this.__multiSelectNode(event, !selected);
            }
            else {
                rowNode.isSelected = !selected;
                this.state.rowNodes.find((/**
                 * @param {?} n
                 * @return {?}
                 */
                n => n.id === rowNode.id)).isSelected = !selected;
                this.setSelections(rowNode);
                /** @type {?} */
                const rowSelectChangeParams = {
                    originalEvent: event.originalEvent, node: rowNode.node,
                    type: 'row', index: event.rowIndex, parents: rowNode.parents,
                    instance: this
                };
                if (rowNode.isSelected) {
                    this.nodeSelected.emit(rowSelectChangeParams);
                }
                else {
                    this.nodeUnSelect.emit(rowSelectChangeParams);
                }
                if (this.checkOnSelect) {
                    rowNode.isChecked = !selected;
                    this.state.rowNodes.find((/**
                     * @param {?} n
                     * @return {?}
                     */
                    n => n.id === rowNode.id)).isChecked = !selected;
                    this.setCheckeds(rowNode);
                    /** @type {?} */
                    const nodes = this.cascadeNodes(rowNode, rowNode.isChecked);
                    this.ttService.onChangeCheckboxStatus(rowNode);
                    if (rowNode.isChecked) {
                        this.nodeChecked.emit({ originalEvent: event, node: rowNode.node, nodes, instance: this });
                    }
                    else {
                        this.nodeUnChecked.emit({ originalEvent: event, node: rowNode.node, nodes, instance: this });
                    }
                }
            }
            if (this.checkOnSelect) {
                /** @type {?} */
                const ids = this.checkeds.map((/**
                 * @param {?} tn
                 * @return {?}
                 */
                tn => tn.id));
                this.checkValues = ids;
                this.checkValuesChange.emit(ids);
            }
        }
        this.detectChanges();
    }
    /**
     * 带有checkbox 的单选
     * @private
     * @param {?} rowNode 当前节点
     * @param {?} flag
     * @return {?}
     */
    singleSelectWhenMultiSelect(rowNode, flag) {
        if (this.checkOnSelect) {
            rowNode.isChecked = flag;
            this.setCheckeds(rowNode);
            this.cascadeNodes(rowNode, rowNode.isChecked);
            if (rowNode.isChecked) {
                this.nodeChecked.emit({ originalEvent: event, node: rowNode.node, instance: this });
            }
            else {
                this.nodeUnChecked.emit({ originalEvent: event, node: rowNode.node, instance: this });
            }
        }
        this.clearSelections();
        if (this.onlySelectSelf) {
            this.selectedRow = rowNode.node;
        }
        rowNode.isSelected = flag;
        this.setSelections(rowNode);
    }
    /**
     * @private
     * @param {?} rowNode
     * @param {?} flag
     * @param {?} event
     * @return {?}
     */
    selectWhenChecked(rowNode, flag, event) {
        if (rowNode.node.selectable) {
            rowNode.isChecked = flag;
        }
        this.setCheckeds(rowNode, false);
        if (this.selectOnCheck) {
            if (this.onlySelectSelf) {
                if (flag || (this.selectedRow && this.selectedRow.id === rowNode.id)) {
                    this.clearSelections();
                }
            }
            if (this.singleSelect && this.showCheckbox) {
                this.clearCheckeds();
            }
            if (rowNode.node.selectable) {
                rowNode.isSelected = flag;
            }
            this.setSelections(rowNode);
            this.state.rowNodes.find((/**
             * @param {?} n
             * @return {?}
             */
            n => n.id === rowNode.id)).isSelected = flag;
            if (rowNode.isSelected) {
                this.nodeSelected.emit({ originalEvent: event, node: rowNode.node, instance: this, type: 'checkbox' });
            }
            else {
                this.nodeUnSelect.emit({ originalEvent: event, node: rowNode.node, instance: this, type: 'checkbox' });
            }
        }
    }
    /**
     * @private
     * @param {?} rowNode
     * @param {?} items
     * @return {?}
     */
    isInArray(rowNode, items) {
        if (items && items.length === 0) {
            return false;
        }
        return items.findIndex((/**
         * @param {?} i
         * @return {?}
         */
        i => i.data[this.idField] === rowNode.id)) > -1;
    }
    /**
     * @private
     * @param {?} rowNode
     * @return {?}
     */
    setSelections(rowNode) {
        if (rowNode.isSelected) {
            if (!this.selections) {
                this.selections = [];
            }
            if (!this.isInArray(rowNode, this.selections)) {
                // this.selections = [...this.selections, rowNode.node];
                this.selections.push(rowNode.node);
            }
        }
        else {
            if (this.selections) {
                /** @type {?} */
                const i = this.selections.findIndex((/**
                 * @param {?} tn
                 * @return {?}
                 */
                (tn) => tn.data[this.idField] === rowNode.node.data[this.idField]));
                if (i !== -1) {
                    this.selections.splice(i, 1);
                }
                // this.selections = this.selections.filter((tn: TreeNode) => tn.data[this.idField] !== rowNode.node.data[this.idField]);
            }
        }
    }
    /**
     * @private
     * @param {?} rowNode
     * @param {?=} updated
     * @return {?}
     */
    setCheckeds(rowNode, updated = true) {
        if (rowNode.isChecked) {
            if (!this.checkeds) {
                this.checkeds = [];
            }
            if (!this.isInArray(rowNode, this.checkeds)) {
                // this.checkeds = [ ...this.checkeds, rowNode.node];
                this.checkeds.push(rowNode.node);
            }
        }
        else {
            if (this.checkeds) {
                /** @type {?} */
                const i = this.checkeds.findIndex((/**
                 * @param {?} tn
                 * @return {?}
                 */
                (tn) => tn.data[this.idField] === rowNode.node.data[this.idField]));
                if (i !== -1) {
                    this.checkeds.splice(i, 1);
                }
                // this.checkeds = this.checkeds.filter((tn: TreeNode) => tn.data[this.idField] !== rowNode.node.data[this.idField]);
            }
        }
        if (updated) {
            this.checkeds = [...this.checkeds];
        }
    }
    /**
     * @private
     * @param {?} data
     * @return {?}
     */
    getDiffrentData(data) {
        if (data.length) {
            /** @type {?} */
            const _nodes = [];
            data.forEach((/**
             * @param {?} n
             * @return {?}
             */
            n => {
                if (_nodes.findIndex((/**
                 * @param {?} t
                 * @return {?}
                 */
                t => t.data[this.idField] === n.data[this.idField])) === -1) {
                    _nodes.push(n);
                }
            }));
            return _nodes;
        }
        return data;
    }
    /**
     * @private
     * @param {?} rowNode
     * @param {?} checked
     * @param {?=} sync
     * @return {?}
     */
    cascadeCheckedNode(rowNode, checked, sync = false) {
        /** @type {?} */
        const nodes = [];
        if (rowNode.node.selectable) {
            rowNode.isChecked = checked;
        }
        this.setCheckeds(rowNode, false);
        if (this.selectOnCheck) {
            if (sync) {
                /** @type {?} */
                const status = this.isIndeterminate(rowNode) !== 2;
                checked = status ? checked : false;
            }
            if (rowNode.node.selectable) {
                rowNode.isSelected = checked;
                this.setSelections(rowNode);
            }
        }
        if (!this.isInArray(rowNode, nodes)) {
            nodes.push(rowNode.node);
        }
        return nodes;
    }
    /**
     * 向下级联选中
     * @param {?} rowNode
     * @param {?} checked 选中状态
     * 返回受影响的行
     * @return {?}
     */
    propagateSelectionDown(rowNode, checked) {
        /** @type {?} */
        let nodes = this.cascadeCheckedNode(rowNode, checked);
        if (this.cascadeCheck && this.cascadeDown && rowNode.node.children && rowNode.node.children.length) {
            rowNode.node.children.forEach((/**
             * @param {?} v
             * @param {?} i
             * @return {?}
             */
            (v, i) => {
                /** @type {?} */
                const rn = this.state.rowNodes.find((/**
                 * @param {?} row
                 * @return {?}
                 */
                (row) => row.id === v.data[this.idField]));
                if (rn) {
                    rn.indeterminate = false;
                    if (rn.node.selectable) {
                        rn.isChecked = checked;
                    }
                    nodes = nodes.concat(this.propagateSelectionDown(rn, checked));
                    this.ttService.onChangeCheckboxStatus(rn);
                }
            }));
        }
        return nodes;
    }
    /**
     * 向上级联选中
     * @param {?} rowNode
     * @param {?} checked
     * @return {?}
     */
    propagateSelectionUp(rowNode, checked) {
        /** @type {?} */
        const nodes = this.cascadeCheckedNode(rowNode, checked);
        if (this.cascadeCheck && this.cascadeUp && rowNode.node.parent) {
            if (rowNode.parents && rowNode.parents.length) {
                /** @type {?} */
                const rns = [];
                rowNode.parents.forEach((/**
                 * @param {?} n
                 * @param {?} i
                 * @return {?}
                 */
                (n, i) => {
                    /** @type {?} */
                    const rn = this.findRowNode(n);
                    if (rn && rn.node.selectable) {
                        // rn.isChecked = checked;
                        /** @type {?} */
                        const checkedNodes = this.cascadeCheckedNode(rn, checked, true);
                        if (checkedNodes.length) {
                            nodes.push(checkedNodes[0]);
                        }
                        rns.push(rn);
                    }
                }));
                rns.reverse().forEach((/**
                 * @param {?} rn
                 * @return {?}
                 */
                rn => {
                    this.updateCheckboxStatus(rn);
                }));
            }
        }
        return nodes;
    }
    // 节点状态（选中，勾选）同步更新
    /**
     * @private
     * @return {?}
     */
    updateNodeStatus() {
        if (this.state.searched) {
            /** @type {?} */
            const rowNodes = this.state.searchRowNodes;
            if (!rowNodes) {
                return;
            }
            rowNodes.forEach((/**
             * @param {?} rn
             * @return {?}
             */
            rn => {
                /** @type {?} */
                const checkedItem = this.state.rowNodes.find((/**
                 * @param {?} n
                 * @return {?}
                 */
                n => n.id === rn.id));
                /** @type {?} */
                const chked = checkedItem ? checkedItem.isChecked : false;
                rn.indeterminate = false;
                rn.isChecked = chked;
                if (this.selectOnCheck) {
                    if (checkedItem.isSelected != rn.isChecked) {
                        checkedItem.isSelected = checkedItem.isChecked;
                    }
                    rn.isSelected = checkedItem.isSelected;
                }
            }));
        }
        else {
            if (this.selectOnCheck) {
                this.state.rowNodes.forEach((/**
                 * @param {?} rn
                 * @return {?}
                 */
                rn => {
                    if (this.onlySelectSelf) {
                        if (!this.selections || !this.selections.length) {
                            rn.isSelected = false;
                        }
                        else {
                            if (this.selections[0].id === rn.id) {
                                rn.isSelected = true;
                            }
                            else {
                                rn.isSelected = false;
                            }
                        }
                    }
                    else {
                        if (rn.isSelected != rn.isChecked) {
                            rn.isSelected = rn.isChecked;
                        }
                    }
                }));
            }
        }
    }
    /**
     * 级联选择节点
     * @private
     * @param {?} rowNode 当前节点
     * @param {?} checked 是否钩选
     * @return {?}
     */
    cascadeNodes(rowNode, checked) {
        /** @type {?} */
        let checkedNodes = this.propagateSelectionDown(rowNode, checked);
        checkedNodes = checkedNodes.concat(this.propagateSelectionUp(rowNode, checked));
        checkedNodes = this.getDiffrentData(checkedNodes);
        this.updateNodeStatus();
        this.updateAllCheckboxStatus();
        return checkedNodes.filter((/**
         * @param {?} n
         * @return {?}
         */
        n => {
            return n.selectable;
        }));
    }
    /**
     * 行Checkbox 选中变化事件
     * @param {?} event 鼠标点击事件对象
     * @param {?} rowNode 当前树节点
     * @param {?} checked
     * @return {?}
     */
    toggleNodeWithCheckbox(event, rowNode, checked) {
        this.state.rowNodes.find((/**
         * @param {?} n
         * @return {?}
         */
        n => n.id === rowNode.id)).isChecked = checked;
        rowNode.indeterminate = false;
        /** @type {?} */
        const data = this.cascadeNodes(rowNode, checked);
        this.ttService.onChangeCheckboxStatus(rowNode);
        if (checked) {
            this.nodeChecked.emit({ originalEvent: event, node: rowNode.node, nodes: data, instance: this });
        }
        else {
            this.nodeUnChecked.emit({ originalEvent: event, node: rowNode.node, nodes: data, instance: this });
        }
        this.selectWhenChecked(rowNode, checked, event);
        if (this.onlySelectSelf && checked) {
            this.selectedRow = rowNode.node;
        }
        this.checkeds = [...this.checkeds];
        this.detectChanges();
        event.stopPropagation();
    }
    /**
     * 全选
     * @param {?} event 鼠标事件对象
     * @param {?} checked 是否选中
     * @return {?}
     */
    toggleNodesWithCheckbox(event, checked) {
        if (checked) {
            if (this.data && this.data.length) {
                this.checkAllNodes({ originalEvent: event, checked, instance: this });
            }
        }
        else {
            this.selections = null;
            this.unCheckAllNodes({ originalEvent: event, checked, instance: this });
        }
        this.detectChanges();
    }
    /**
     * 更新全选checkbox 的状态
     * @private
     * @return {?}
     */
    updateAllCheckboxStatus() {
        /** @type {?} */
        const status = this.isIndeterminate();
        if (this.showCheckAll && !this.singleSelect && this.showCheckbox) {
            if (status !== undefined) {
                if (this.headerCheckboxCmp) {
                    this.headerCheckboxCmp.chkAll.nativeElement.indeterminate = status === 2;
                    this.headerCheckboxCmp.checked = status === 1;
                }
            }
        }
    }
    /**
     * 更新父节点checkbox 选中状态
     * @private
     * @param {?} rowNode
     * @return {?}
     */
    updateParentCheckboxStatus(rowNode) {
        /** @type {?} */
        const pNodes = [];
        rowNode.parents.forEach((/**
         * @param {?} rnid
         * @return {?}
         */
        rnid => {
            /** @type {?} */
            const rn = this.findRowNode(rnid);
            if (rn) {
                pNodes.push(rn);
            }
        }));
        pNodes.reverse().forEach((/**
         * @param {?} rn
         * @return {?}
         */
        rn => {
            this.updateCheckboxStatus(rn);
        }));
    }
    /**
     * 更新N个父节点复选框中的选中状态
     * @private
     * @param {?} parentIds
     * @return {?}
     */
    updateParentsCheckStatus(parentIds) {
        /** @type {?} */
        let pids = [];
        parentIds.forEach((/**
         * @param {?} ids
         * @return {?}
         */
        (ids) => {
            pids = [...pids, ...ids];
        }));
        pids = Array.from(new Set(pids));
        /** @type {?} */
        const pRowNodes = this.findRowNodes(pids);
        pRowNodes.sort((/**
         * @param {?} r
         * @param {?} n
         * @return {?}
         */
        (r, n) => {
            return n.level - r.level;
        })).forEach((/**
         * @param {?} rn
         * @return {?}
         */
        rn => {
            this.updateCheckboxStatus(rn);
        }));
    }
    /**
     * 更新节点中checkbox的状态
     * @private
     * @param {?} rowNode
     * @return {?}
     */
    updateCheckboxStatus(rowNode) {
        /** @type {?} */
        const status = this.isIndeterminate(rowNode);
        if (status !== undefined && rowNode.node.selectable) {
            rowNode.indeterminate = status === 2;
            this.ttService.onChangeCheckboxStatus(rowNode);
        }
    }
    /**
     * 判断指定节点checkbox 的状态
     * @private
     * @param {?=} rowNode
     * @return {?}
     */
    isIndeterminate(rowNode) {
        /** @type {?} */
        const status = this.getCheckboxStatus(rowNode);
        if (status !== undefined) {
            /** @type {?} */
            let checked = false;
            if (status === 2) {
                checked = false;
            }
            else {
                checked = !!status;
            }
            if (rowNode && rowNode.node.selectable) {
                rowNode.isChecked = checked;
                this.setCheckeds(rowNode, false);
            }
        }
        return status;
    }
    /**
     * 返回父级节点checkbox 的状态。0：不选中， 1： 选中， 2：不确定
     * @private
     * @param {?=} rowNode 父级节点；为空时返回全选checkbox 的状态
     * @return {?}
     */
    getCheckboxStatus(rowNode) {
        /** @type {?} */
        let uncheckedLength = 0;
        /** @type {?} */
        let checkedLength = 0;
        /** @type {?} */
        let len = 0;
        /** @type {?} */
        let childNodes = [];
        if (rowNode) {
            childNodes = rowNode.node.children || [];
        }
        else {
            childNodes = this.state.rowNodes;
        }
        len = childNodes.length;
        childNodes.forEach((/**
         * @param {?} n
         * @return {?}
         */
        n => {
            /** @type {?} */
            let rn = n;
            if (rowNode) {
                rn = this.findRowNode(n.data[this.idField]);
            }
            if (rn && !rn.indeterminate) {
                if (rn.isChecked) {
                    checkedLength++;
                }
                else {
                    uncheckedLength++;
                }
            }
        }));
        if (len === 0) {
            return undefined;
        }
        /** @type {?} */
        let flag = 0;
        if (uncheckedLength === len) {
            flag = 0;
        }
        else {
            if (checkedLength === len) {
                flag = 1;
            }
            else {
                flag = 2;
            }
        }
        return flag;
    }
    /**
     * @private
     * @param {?} node
     * @param {?} treeNodes
     * @return {?}
     */
    findIndexIn(node, treeNodes) {
        /** @type {?} */
        let index = -1;
        if (treeNodes && treeNodes.length) {
            index = treeNodes.findIndex((/**
             * @param {?} v
             * @param {?} i
             * @return {?}
             */
            (v, i) => {
                return this.equals(v, node);
            }));
        }
        return index;
    }
    /**
     * 在选中的集合中查找指定节点的索引
     * @param {?} node 树节点
     * @return {?}
     */
    findIndexInCheckeds(node) {
        return this.findIndexIn(node, this.checkeds);
    }
    /**
     * 在选中的集合中查找指定节点的索引
     * @param {?} node 树节点
     * @return {?}
     */
    findIndexInSelection(node) {
        return this.findIndexIn(node, this.selections);
    }
    /**
     * 对比两个节点是否同一个节点
     * @param {?} target
     * @param {?} source
     * @return {?}
     */
    equals(target, source) {
        return target.data[this.idField] === source.data[this.idField];
    }
    /**
     * 展开所有节点
     * @param {?=} treeNode
     * @param {?=} deep 设置为true 时，当前节点下的所有子节点全部展开, 默认 false
     * @param {?=} childrenEmptyEmitExpand  当没有子节点是否触发展开事件，默认为 true
     * @return {?}
     */
    toggleExpand(treeNode, deep = false, childrenEmptyEmitExpand = true) {
        if (treeNode) {
            treeNode.expanded = !treeNode.expanded;
            this.updateNodeProperty(treeNode.id, { expanded: treeNode.expanded });
            this.toggleVisible(treeNode);
            if (this.virtualized) {
                if (treeNode.children && treeNode.children.length) {
                    this.renderVirtualRowNodes();
                }
            }
            if (treeNode.expanded) {
                if (childrenEmptyEmitExpand || (treeNode.children && treeNode.children.length)) {
                    this.expand.emit(treeNode);
                }
                else {
                    treeNode.expanded = !treeNode.expanded;
                    return;
                }
            }
            else {
                this.collapse.emit(treeNode);
            }
            if (deep) {
                if (treeNode.children && treeNode.children.length) {
                    treeNode.children.forEach((/**
                     * @param {?} row
                     * @param {?} i
                     * @return {?}
                     */
                    (row, i) => {
                        this.toggleExpand(row, deep, childrenEmptyEmitExpand);
                    }));
                }
            }
        }
        else {
            if (this.data && this.data.length) {
                this.data.forEach((/**
                 * @param {?} row
                 * @return {?}
                 */
                (row) => {
                    this.toggleExpand(row);
                }));
            }
        }
        this.setNewColumnsWidth();
    }
    /**
     * @private
     * @param {?} treeNode
     * @return {?}
     */
    toggleVisible(treeNode) {
        /** @type {?} */
        const rowNode = this.findRowNode(treeNode.id);
        if (rowNode) {
            /** @type {?} */
            const rid = rowNode.id;
            /** @type {?} */
            const setRowVisible = (/**
             * @param {?} rn
             * @param {?} visible
             * @return {?}
             */
            (rn, visible) => {
                /** @type {?} */
                const rnParent = this.findRowNode(rn.parent.data[this.idField]);
                if (rnParent) {
                    rn.visible = rnParent.visible && rnParent.node.expanded;
                }
                else {
                    rn.visible = visible;
                }
                /** @type {?} */
                const _r = this.serializedValue.find((/**
                 * @param {?} n
                 * @return {?}
                 */
                n => n.id === rn.id));
                if (_r) {
                    _r.visible = rn.visible;
                }
            });
            this.state.rowNodes.filter((/**
             * @param {?} rn
             * @return {?}
             */
            rn => rn.parents.indexOf(rid) > -1)).forEach((/**
             * @param {?} rn
             * @return {?}
             */
            rn => {
                setRowVisible(rn, treeNode.expanded);
            }));
        }
    }
    /**
     * 展开指定节点
     * emit: 触发展开事件
     * render: 数据重新加载
     * @param {?} id
     * @param {?=} emit
     * @param {?=} render
     * @return {?}
     */
    expandNode(id, emit = true, render = true) {
        if (id) {
            /** @type {?} */
            const rowNode = this.findRowNode(id);
            if (rowNode) {
                rowNode.node.expanded = true;
                this.toggleVisible(rowNode.node);
                if (render) {
                    if (this.virtualized) {
                        if (rowNode.node.children && rowNode.node.children.length) {
                            this.renderVirtualRowNodes();
                        }
                    }
                    else {
                        this.detectChanges();
                    }
                }
                if (emit) {
                    this.expand.emit(rowNode.node);
                }
                this.setNewColumnsWidth();
            }
            else {
                this.writeConsole('Con\'t find tree node widh id:' + id, 'error');
            }
        }
    }
    /**
     * 展开所有节点
     * @return {?}
     */
    expandAll() {
        this.state.rowNodes = this.state.rowNodes.map((/**
         * @param {?} row
         * @return {?}
         */
        (row) => {
            row.node.expanded = true;
            row.visible = true;
            return row;
        }));
        if (this.virtualized) {
            this.renderVirtualRowNodes();
        }
        else {
            this.serializedValue = this.state.rowNodes;
        }
        this.setNewColumnsWidth();
        this.expandAllNodes.emit();
        this.detectChanges();
    }
    /**
     * @param {?} id
     * @return {?}
     */
    expandNodes(id) {
        // const rowNode = this.findRowNode(id);
        // const rootNode = this.getRoot(id);
        // if (rowNode) {
        //     const treeNode = rowNode.node;
        //     treeNode.expanded = true;
        //     rowNode.visible = true;
        //     const parents = rowNode.parents;
        //     this.state.rowNodes.filter(n => n.parents.indexOf(rootNode.id) > -1).forEach(r => {
        //         if (parents.indexOf(r.id) > -1) {
        //             r.visible = true;
        //             r.node.expanded = true;
        //         }
        //     });
        //     this.detectChanges();
        // }
    }
    /**
     * 展开指定节点下的所有节点
     * @param {?} rowNode
     * @return {?}
     */
    expandAllNodesBy(rowNode) {
        if (rowNode) {
            /** @type {?} */
            const treeNode = rowNode.node;
            treeNode.expanded = true;
            rowNode.visible = true;
            this.state.rowNodes.filter((/**
             * @param {?} n
             * @return {?}
             */
            n => n.parents.indexOf(rowNode.id) > -1)).forEach((/**
             * @param {?} r
             * @return {?}
             */
            r => {
                r.visible = true;
                r.node.expanded = true;
            }));
            this.detectChanges();
            this.setNewColumnsWidth();
        }
    }
    /**
     * 折叠指定节点
     * @param {?} id
     * @return {?}
     */
    collapseNode(id) {
        if (id) {
            /** @type {?} */
            const rowNode = this.findRowNode(id);
            if (rowNode) {
                rowNode.node.expanded = false;
                this.toggleVisible(rowNode.node);
                this.detectChanges();
                this.setNewColumnsWidth();
                this.collapse.emit(rowNode.node);
            }
            else {
                this.writeConsole('Con\'t find tree node widh id:' + id, 'error');
            }
        }
    }
    /**
     * 折叠所有节点
     * @return {?}
     */
    collapseAll() {
        this.state.rowNodes = this.state.rowNodes.map((/**
         * @param {?} row
         * @return {?}
         */
        (row) => {
            row.node.expanded = false;
            row.visible = !row.parent;
            return row;
        }));
        if (this.virtualized) {
            this.renderVirtualRowNodes();
        }
        else {
            this.serializedValue = this.state.rowNodes;
        }
        this.collapseAllNodes.emit();
        this.detectChanges();
        this.setNewColumnsWidth();
    }
    /**
     * @return {?}
     */
    getContainerOffset() {
        /** @type {?} */
        const rect = this.containerElement.getBoundingClientRect();
        return {
            left: rect.left + document.body.scrollLeft,
            top: rect.top + document.body.scrollTop
        };
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onColumnResizeBegin(event) {
        /** @type {?} */
        const containerLeft = Math.round(this.getContainerOffset().left);
        this.lastResizerHelperX = (event.pageX - containerLeft + this.containerElement.scrollLeft);
        event.preventDefault();
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onColumnResize(event) {
        if (this.resizableColumns) {
            /** @type {?} */
            const containerLeft = this.getContainerOffset().left;
            this.renderer.addClass(this.containerElement, 'ui-unselectable-text');
            this.resizerHelperVC.nativeElement.style.height = this.containerElement.offsetHeight + 'px';
            this.resizerHelperVC.nativeElement.style.top = 0 + 'px';
            this.resizerHelperVC.nativeElement.style.left = (event.pageX - containerLeft) + 'px';
            this.resizerHelperVC.nativeElement.style.display = 'block';
        }
    }
    /**
     * @param {?} event
     * @param {?} column
     * @return {?}
     */
    onColumnResizeEnd(event, column) {
        if (!this.resizerHelperVC.nativeElement.offsetLeft) {
            return;
        }
        // 偏移量
        /** @type {?} */
        const delta = this.resizerHelperVC.nativeElement.offsetLeft - this.lastResizerHelperX;
        // 列宽
        /** @type {?} */
        const columnWidth = column.offsetWidth;
        // 新宽度
        /** @type {?} */
        const newColumnWidth = columnWidth + delta;
        // 最小宽度
        /** @type {?} */
        const minWidth = column.style.minWidth || 15;
        /** @type {?} */
        let resizeColumnIndex = -1;
        if (column.id) {
            resizeColumnIndex = this.columns.findIndex((/**
             * @param {?} n
             * @return {?}
             */
            n => n.id === column.id));
        }
        else {
            /** @type {?} */
            const colField = column.getAttribute('field');
            if (colField) {
                resizeColumnIndex = this.columns.findIndex((/**
                 * @param {?} n
                 * @return {?}
                 */
                n => n.field === colField));
            }
        }
        if (!this.fitColumns) {
            this.resizeColGroup(this.headerTable.nativeElement, resizeColumnIndex, newColumnWidth, 0);
            this.resizeColGroup(this.bodyTable.nativeElement, resizeColumnIndex, newColumnWidth, 0);
            if (this.columns[resizeColumnIndex]) {
                this.columns[resizeColumnIndex].width = newColumnWidth;
            }
            this.sortColumnsByFixed(false);
            this.setCellWidthCss(this.allColumnsWidth(), 0, []);
            // this.setTableWidth(this.allColumnsWidth());
            // // update css.
            // const _colInfo = this.columns[resizeColumnIndex];
            // if (_colInfo) {
            //     const ruleName = this.columnCssName(_colInfo);
            //     const stylecss = ruleName + '{width:' + newColumnWidth + 'px}';
            //     this.utils.appendCssRules([stylecss], this.styleElement.sheet);
            // }
            // const nextColumn = this.columns[resizeColumnIndex + 1];
            // if (nextColumn && nextColumn.fixed) {
            //     const ruleName = this.columnCssName(nextColumn);
            //     const stylecss = ruleName + '{' + nextColumn.fixed + ':' + nextColumn[nextColumn.fixed] + 'px}';
            //     this.utils.appendCssRules([stylecss], this.styleElement.sheet);
            // }
        }
        else {
            if (newColumnWidth > minWidth) {
                /** @type {?} */
                let nextColumn = column.nextElementSibling;
                while (!nextColumn.offsetParent) {
                    nextColumn = nextColumn.nextElementSibling;
                }
                if (nextColumn) {
                    /** @type {?} */
                    const nextColumnWidth = nextColumn.offsetWidth - delta;
                    /** @type {?} */
                    const nextColumnMinWidth = nextColumn.style.minWidth || 15;
                    if (newColumnWidth > 15 && nextColumnWidth > nextColumnMinWidth) {
                        this.resizeColGroup(this.headerTable.nativeElement, resizeColumnIndex, newColumnWidth, nextColumnWidth);
                        this.resizeColGroup(this.bodyTable.nativeElement, resizeColumnIndex, newColumnWidth, nextColumnWidth);
                    }
                }
            }
        }
        this.resizerHelperVC.nativeElement.style.display = 'none';
        this.renderer.removeClass(this.containerElement, 'ui-unselectable-text');
        this.psRef.directiveRef.update();
    }
    /**
     * @param {?} table
     * @param {?} resizeColumnIndex
     * @param {?} newColumnWidth
     * @param {?=} nextColumnWidth
     * @return {?}
     */
    resizeColGroup(table, resizeColumnIndex, newColumnWidth, nextColumnWidth) {
        if (table) {
            /** @type {?} */
            const colGroup = table.children[0].nodeName === 'COLGROUP' ? table.children[0] : null;
            if (colGroup) {
                /** @type {?} */
                const col = colGroup.children[resizeColumnIndex];
                /** @type {?} */
                const nextCol = col.nextElementSibling;
                col.style.width = newColumnWidth + 'px';
                if (nextCol) {
                    if (nextColumnWidth && this.fitColumns) {
                        nextCol.style.width = nextColumnWidth + 'px';
                    }
                }
            }
            else {
                throw new Error('Scrollable tables require a colgroup to support resizable columns');
            }
        }
    }
    /**
     * @return {?}
     */
    onSearch() {
        this.state.searchRowNodes = null;
        this.state.searched = !!this.searchData.value;
        if (this.searchData.value) {
            this.searchData.value = this.searchData.value.trim();
        }
        this.search.emit(this.searchData);
    }
    /**
     * @param {?} node
     * @param {?=} parent
     * @return {?}
     */
    insert(node, parent) {
        if (parent) {
            if (!parent.children) {
                parent.children = [];
            }
            parent.children.push(node);
            this.expandNode(parent.data[this.idField]);
            this.appendNew.emit({ parent });
        }
        else {
            this.data.push(node);
        }
        this.updateSerializedValue();
    }
    /**
     * @param {?} data
     * @param {?=} parent
     * @return {?}
     */
    append(data, parent) {
        if (data && data[this.idField]) {
            this.insert({ data, id: data[this.idField] }, parent);
        }
        else {
            this.writeConsole('Please set id value.', 'warn');
        }
    }
    /**
     * @private
     * @param {?} parent
     * @return {?}
     */
    emitAppendNew(parent) {
        if (this.virtualized) {
            /** @type {?} */
            const nodePosY = this.psRef.directiveRef.elementRef.nativeElement.scrollTop;
            this.updateSerializedValue(nodePosY);
        }
        else {
            this.updateSerializedValue();
        }
    }
    /**
     * @param {?} nodes
     * @param {?} parent
     * @param {?=} emit
     * @return {?}
     */
    appendChildren(nodes, parent, emit = true) {
        if (nodes && nodes.length) {
            if (parent) {
                parent.children.push(...nodes);
                this.emitAppendNew(parent);
                if (emit) {
                    this.appendNew.emit({ parent });
                }
            }
            else {
                throw new Error('未找到父级节点');
            }
        }
        else {
            this.updateSerializedValue();
            this.writeConsole('添加子节点的数据为空', 'warn');
        }
    }
    /**
     * @param {?} nodes
     * @param {?} parent
     * @param {?=} emit
     * @return {?}
     */
    loadChildren(nodes, parent, emit = true) {
        if (parent) {
            parent.children = nodes || [];
            this.emitAppendNew(parent);
            if (emit) {
                this.appendNew.emit({ parent });
            }
        }
    }
    /**
     * @param {?} nodeId
     * @return {?}
     */
    remove(nodeId) {
        if (nodeId) {
            /** @type {?} */
            const rowNode = this.findRowNode(nodeId);
            if (rowNode) {
                // remove(this.state.rowNodes, (n) => {
                //     return n.id === nodeId;
                // });
                if (this.selectValue === nodeId) {
                    this.selectedRow = null;
                    this.selectValue = null;
                }
                if (rowNode.parent) {
                    remove(rowNode.parent.children, (/**
                     * @param {?} n
                     * @return {?}
                     */
                    (n) => {
                        return n.data[this.idField] === nodeId;
                    }));
                }
                else {
                    remove(this.state.rowNodes, (/**
                     * @param {?} n
                     * @return {?}
                     */
                    (n) => {
                        return n.id === nodeId;
                    }));
                    this.data = this.data.filter((/**
                     * @param {?} n
                     * @return {?}
                     */
                    n => n.data[this.idField] !== nodeId));
                }
                this.updateSerializedValue();
                this.detectChanges();
                this.ttService.onRemove(rowNode);
                this.removed.emit(rowNode);
            }
        }
    }
    /**
     * @param {?} nodeId
     * @param {?} data
     * @return {?}
     */
    update(nodeId, data) {
        if (nodeId && data) {
            /** @type {?} */
            const rowNode = this.findRowNode(nodeId);
            if (rowNode) {
                rowNode.node.data = extend(rowNode.node.data, data);
                this.detectChanges();
                this.ttService.onUpdate(rowNode);
                this.updated.emit(rowNode);
            }
        }
    }
    /**
     * @param {?} nodeid
     * @param {?} property
     * @return {?}
     */
    updateNodeProperty(nodeid, property) {
        /** @type {?} */
        const rowNode = this.findRowNode(nodeid);
        if (rowNode && property) {
            Object.keys(property).forEach((/**
             * @param {?} k
             * @return {?}
             */
            k => {
                rowNode.node[k] = property[k];
            }));
        }
    }
    /**
     * @private
     * @return {?}
     */
    setScorllBodyHeight() {
        this.scorllBodyHeight = this.height;
        if (this.showFilterBar) {
            this.scorllBodyHeight = this.scorllBodyHeight - 46;
        }
        if (this.fixedHeader && this.showHeader) {
            if (this.headerBox && (this.headerWrap || this.useGroupHeader)) {
                /** @type {?} */
                const hh = this.headerBox.nativeElement.clientHeight;
                this.scorllBodyHeight = this.scorllBodyHeight - hh;
            }
            else {
                // 宽松版时，表头高度增高，需要按实际取得表头高度
                /** @type {?} */
                let _headerHeight = this.headerHeight;
                /** @type {?} */
                const themesKey = localStorage.getItem('gsp_rtf_themSKey');
                if (themesKey === 'loose' && this.headerBox) {
                    _headerHeight = this.headerBox.nativeElement.getBoundingClientRect().height;
                }
                this.scorllBodyHeight = this.scorllBodyHeight - _headerHeight;
            }
        }
        if (this.pagination) {
            this.scorllBodyHeight = this.scorllBodyHeight - this.pagerHeight;
        }
        this.detectChanges();
    }
    /**
     * @private
     * @param {?} w
     * @return {?}
     */
    setWidth(w) {
        this.width = w;
    }
    /**
     * @param {?=} size
     * @return {?}
     */
    resize(size) {
        if (size) {
            /** @type {?} */
            const w = parseInt('' + size.width, 10);
            /** @type {?} */
            const h = parseInt('' + size.height, 10);
            if (this.width === w && this.height === h) {
                if (this.state.scrollY) {
                    this.psRef.directiveRef.scrollToY(this.state.scrollY);
                }
                if (this.state.scrollX) {
                    this.psRef.directiveRef.scrollToX(this.state.scrollX);
                }
                return;
            }
            this.setWidth(w);
            this.height = h;
        }
        this.setScorllBodyHeight();
        if (this.data && this.data.length) {
            this.renderVirtualRowNodes();
        }
        // setTimeout(() => {
        //     if (this.psRef) {
        //         this.psRef.directiveRef.update();
        //     }
        // }, 100);
    }
    /**
     * @param {?} data
     * @return {?}
     */
    loadData(data) {
        if (this.showLines) {
            this.isLoadNewDataSetEmpty = true;
            this.data = [];
            this.isLoadNewDataSetEmpty = false;
        }
        this.data = data;
    }
    /**
     * @return {?}
     */
    empty() {
        this.data = [];
    }
    /**
     * @return {?}
     */
    getCurrentAllRowNodes() {
        if (this.state.searched && this.state.searchRowNodes && this.state.searchRowNodes.length) {
            return this.state.searchRowNodes || this.state.rowNodes;
        }
        else {
            return this.state.rowNodes;
        }
    }
    /**
     * @param {?=} detectChanges
     * @return {?}
     */
    clearAll(detectChanges = true) {
        this.state.rowNodes.filter((/**
         * @param {?} rn
         * @return {?}
         */
        rn => rn.indeterminate)).forEach((/**
         * @param {?} rn
         * @return {?}
         */
        rn => {
            rn.indeterminate = false;
            this.ttService.onChangeCheckboxStatus(rn);
        }));
        this.state.rowNodes = this.state.rowNodes.map((/**
         * @param {?} row
         * @return {?}
         */
        (row) => {
            row.isChecked = false;
            row.isSelected = false;
            row.indeterminate = false;
            return row;
        }));
        // if (this.searchData && this.searchData.value) {
        if (this.state.searched && this.state.searchRowNodes && this.state.searchRowNodes.length) {
            this.serializedValue = this.state.searchRowNodes.map((/**
             * @param {?} row
             * @return {?}
             */
            (row) => {
                row.isChecked = false;
                row.isSelected = false;
                row.indeterminate = false;
                return row;
            }));
        }
        this.checkeds = [];
        this.selections = [];
        this.selectedRow = undefined;
        if (this.showCheckAll && this.headerCheckboxCmp) {
            this.headerCheckboxCmp.chkAll.nativeElement.indeterminate = false;
            this.headerCheckboxCmp.checked = false;
        }
        if (detectChanges) {
            this.detectChanges();
        }
        return this;
    }
    /**
     * @return {?}
     */
    detectChanges() {
        this.cdRef.markForCheck();
        // tslint:disable-next-line:no-string-literal
        if (!this.cdRef['destroyed']) {
            this.cdRef.detectChanges();
        }
        return this;
    }
    /**
     * @return {?}
     */
    clearCheckeds() {
        if (this.checkeds && this.checkeds.length) {
            this.findRowNodes(this.checkeds.map((/**
             * @param {?} tn
             * @return {?}
             */
            tn => tn.data[this.idField]))).forEach((/**
             * @param {?} rn
             * @return {?}
             */
            rn => {
                rn.isChecked = false;
            }));
        }
        this.checkeds = [];
        if (this.showCheckAll && this.headerCheckboxCmp) {
            this.headerCheckboxCmp.chkAll.nativeElement.indeterminate = false;
            this.headerCheckboxCmp.checked = false;
        }
        return this;
    }
    /**
     * @return {?}
     */
    clearSelections() {
        if (this.serializedValue && this.serializedValue.length) {
            this.serializedValue.forEach((/**
             * @param {?} n
             * @return {?}
             */
            n => {
                n.isSelected = false;
            }));
        }
        this.state.rowNodes.forEach((/**
         * @param {?} n
         * @return {?}
         */
        n => {
            n.isSelected = false;
        }));
        if (this.selections && this.selections.length) {
            /** @type {?} */
            const nodeIds = this.selections.map((/**
             * @param {?} tn
             * @return {?}
             */
            tn => tn.data[this.idField]));
            this.findRowNodes(nodeIds).forEach((/**
             * @param {?} rn
             * @return {?}
             */
            rn => {
                rn.isSelected = false;
                if (this.singleSelect) {
                    rn.isChecked = false;
                }
            }));
        }
        this.selections = undefined;
        this.selectedRow = undefined;
        return this;
    }
    /**
     * 选中第1个可以选中的节点
     * @return {?}
     */
    selectFirstNode() {
        if (this.state.rowNodes && this.state.rowNodes.length) {
            /** @type {?} */
            const firstCanSelectNode = this.state.rowNodes.find((/**
             * @param {?} n
             * @return {?}
             */
            n => n.node.selectable));
            if (firstCanSelectNode) {
                this.selectNode(firstCanSelectNode.id);
            }
        }
    }
    /**
     * @private
     * @param {?} id
     * @return {?}
     */
    scrollToCurrentRow(id) {
        /** @type {?} */
        const trId = 'rownode-' + id;
        // const trEle =    document.getElementById(trId);
        /** @type {?} */
        const trEle = this.el.nativeElement.querySelector('#' + trId) || document.getElementById(trId);
        if (trEle && trEle.closest('.farris-treetable') && trEle.closest('.farris-treetable').id === this.id) {
            if (!this.isElementInViewport(trEle)) {
                if (trEle.scrollIntoViewIfNeeded) {
                    trEle.scrollIntoViewIfNeeded();
                    return true;
                }
                /** @type {?} */
                const browserInfo = this.utils.getBrowserType();
                if (browserInfo.ff && this.utils.getFFVer() < 58) {
                    trEle.scrollIntoView();
                }
                else {
                    trEle.scrollIntoView({ block: 'nearest', inline: 'nearest' });
                }
            }
            else {
                trEle.scrollIntoView({ block: 'nearest' });
            }
            return true;
        }
        return false;
    }
    /**
     * @private
     * @param {?} el
     * @return {?}
     */
    isElementInViewport(el) {
        /** @type {?} */
        const containerEl = this.el.nativeElement.querySelector('.farris-treetable-body');
        if (!containerEl) {
            return false;
        }
        /** @type {?} */
        const container = containerEl.getBoundingClientRect();
        /** @type {?} */
        const viewPortHeight = container.height;
        /** @type {?} */
        const offsetTop = el.offsetTop + this.topHideHeight;
        /** @type {?} */
        const scrollTop = this.psRef.directiveRef.elementRef.nativeElement.scrollTop;
        /** @type {?} */
        const top = offsetTop - scrollTop;
        return top >= 0 && top <= viewPortHeight;
    }
    /**
     * @private
     * @param {?} nodeId
     * @return {?}
     */
    _scrollToNode(nodeId) {
        this.scrollToCurrentNode(nodeId);
    }
    /**
     * @param {?=} nodeid
     * @return {?}
     */
    scrollToCurrentNode(nodeid = '') {
        /** @type {?} */
        let id = nodeid;
        if (!nodeid && this.selectedRow) {
            id = this.selectedRow.id;
        }
        /** @type {?} */
        const result = this.scrollToCurrentRow(id);
        if (!result) {
            /** @type {?} */
            const rowNode = this.findRowNode(id);
            /** @type {?} */
            const showRowsOnePager = Math.ceil(this.scorllBodyHeight / this.rowHeight) + 1;
            if (rowNode.parents && rowNode.parents.length) {
                rowNode.parents.forEach((/**
                 * @param {?} pid
                 * @return {?}
                 */
                pid => {
                    this.expandNode(pid, false, false);
                }));
            }
            /** @type {?} */
            const rowIndex = this.state.rowNodes.filter((/**
             * @param {?} n
             * @return {?}
             */
            n => n.visible)).findIndex((/**
             * @param {?} n
             * @return {?}
             */
            n => n.id === id));
            if (rowIndex < showRowsOnePager) {
                if (this.virtualized) {
                    this.renderData(0);
                }
                setTimeout((/**
                 * @return {?}
                 */
                () => {
                    this.scrollToCurrentRow(id);
                }));
                return;
            }
            /** @type {?} */
            const top = rowIndex * this.rowHeight;
            if (this.virtualized) {
                this.renderData(top - this.rowHeight);
                setTimeout((/**
                 * @return {?}
                 */
                () => {
                    this.scrollToCurrentRow(id);
                    if (this.psRef && this.psRef.directiveRef) {
                        this.psRef.directiveRef.elementRef.nativeElement.scrollTop += 1;
                    }
                }), 50);
            }
            else {
                this.scrollToY(top - this.rowHeight);
                this.scrollToCurrentRow(id);
            }
        }
    }
    /**
     * 选中指定ID 的节点,
     * detectChanges: 触发脏值检查，默认为 true
     * gotocurrent: 使用选中节点可见，默认为 true
     * @param {?} id
     * @param {?=} detectChanges
     * @param {?=} gotocurrent
     * @return {?}
     */
    selectNode(id, detectChanges = true, gotocurrent = true) {
        if (!id) {
            return this;
        }
        /** @type {?} */
        let node = this.findRowNode(id);
        /** @type {?} */
        const emit = !this.selectedRow || (this.selectedRow && id !== this.selectedRow.id);
        if (node && emit) {
            node.isSelected = true;
            if (this.singleSelect || this.onlySelectSelf) {
                this.clearSelections();
                node.isSelected = true;
                this.selections = [node.node];
                if (this.checkOnSelect && this.showCheckbox) {
                    node.isChecked = true;
                    if (this.multiSelect) {
                        this.setCheckeds(node);
                    }
                    else {
                        this.clearCheckeds();
                        this.checkeds = [node.node];
                    }
                    if (this.cascadeCheck && this.cascadeUp) {
                        this.updateParentCheckboxStatus(node);
                    }
                }
            }
            else {
                this.setSelections(node);
            }
            this.selectedRow = node.node;
            this.selectNodeChangedSubject.next(id);
            this.nodeSelected.emit({ node: node.node, instance: this });
            if (this.serializedValue.find((/**
             * @param {?} n
             * @return {?}
             */
            n => n.id == this.selectedRow.id))) {
                this.serializedValue.find((/**
                 * @param {?} n
                 * @return {?}
                 */
                n => n.id == this.selectedRow.id)).isSelected = true;
            }
            if (detectChanges) {
                this.detectChanges();
            }
            if (gotocurrent && this.fixedHeader) {
                this.scrollToCurrentNode();
            }
        }
        else {
            if (!node) {
                this.selectedRow = null;
                this.writeConsole(`未找到ID为 ${id} 的数据！！`);
            }
        }
        return this;
    }
    /**
     * 取消选中
     * @param {?} id
     * @param {?=} detectChanges
     * @return {?}
     */
    unSelectNode(id, detectChanges = true) {
        /** @type {?} */
        const rowNode = this.findRowNode(id);
        if (rowNode) {
            rowNode.isSelected = false;
            if (this.singleSelect) {
                this.clearSelections();
                this.selectedRow = null;
                rowNode.isChecked = false;
                this.selections = [];
            }
            else {
                if (this.onlySelectSelf) {
                    this.selections = [];
                }
                else {
                    this.setSelections(rowNode);
                }
            }
            if (detectChanges) {
                this.detectChanges();
            }
            this.nodeUnSelect.emit({ node: rowNode.node, instance: this });
        }
        else {
            this.writeConsole(`未找到ID为${id}的数据！！`);
        }
    }
    /**
     * 选中多行数据
     * @param {?} ids
     * @param {?=} detectChanges
     * @param {?=} emitNodeSelected
     * @return {?}
     */
    selectNodes(ids, detectChanges = true, emitNodeSelected = false) {
        if (ids && ids.length) {
            /** @type {?} */
            const nodes = this.findRowNodes(ids).map((/**
             * @param {?} rn
             * @return {?}
             */
            rn => {
                rn.isSelected = true;
                this.setSelections(rn);
                return rn.node;
            }));
            this.selections = [...this.selections];
            if (detectChanges) {
                this.detectChanges();
            }
            this.selectNodeChangedSubject.next(ids.join(','));
            if (emitNodeSelected) {
                this.nodeSelected.emit({ node: nodes, instance: this });
            }
        }
        return this;
    }
    /**
     * 取消选中
     * @param {?=} ids
     * @return {?}
     */
    unSelectNodes(ids) {
        if (ids && ids.length) {
            /** @type {?} */
            const rownodes = this.findRowNodes(ids);
            if (rownodes && rownodes.length) {
                rownodes.forEach((/**
                 * @param {?} rn
                 * @return {?}
                 */
                rn => {
                    rn.isSelected = false;
                    this.setSelections(rn);
                }));
                this.selections = [...this.selections];
                this.detectChanges();
                this.nodeUnSelect.emit({ node: rownodes.map((/**
                     * @param {?} r
                     * @return {?}
                     */
                    r => r.node)), instance: this });
            }
        }
        else {
            this.clearSelections();
            this.detectChanges();
        }
    }
    /**
     * 钩选指定的节点
     * @param {?} id
     * @param {?=} updateParentCheckboxStatus
     * @param {?=} detectChanges 触发变更检测。默认为 true
     * @return {?}
     */
    checkedNode(id, updateParentCheckboxStatus = true, detectChanges = true) {
        if (this.isEnableMultiSelect()) {
            /** @type {?} */
            const node = this.findRowNode(id);
            if (node) {
                node.isChecked = true;
                if (!this.isChecked(node.node)) {
                    // this.checkeds = [...this.checkeds || [], node.node];
                    this.setCheckeds(node, false);
                    if (updateParentCheckboxStatus && this.cascadeCheck && this.cascadeUp) {
                        this.updateParentCheckboxStatus(node);
                    }
                }
                if (detectChanges) {
                    this.detectChanges();
                }
                this.nodeChecked.emit({ originalEvent: null, node: node.node, instance: this });
            }
            else {
                this.writeConsole(`未找到ID为${id}的数据！！`);
            }
        }
    }
    /**
     * @param {?} id
     * @param {?=} updateParentCheckboxStatus
     * @return {?}
     */
    unCheckedNode(id, updateParentCheckboxStatus = true) {
        if (this.isEnableMultiSelect()) {
            /** @type {?} */
            const rownode = this.findRowNode(id);
            if (rownode) {
                rownode.isChecked = false;
                this.setCheckeds(rownode);
                if (this.selectOnCheck) {
                    rownode.isSelected = false;
                    this.setSelections(rownode);
                }
                if (this.selectedRow && this.selectedRow.id === id) {
                    this.selectedRow = null;
                }
                if (this.singleSelect || !this.cascadeCheck) {
                    this.updateNodeStatus();
                    if (updateParentCheckboxStatus && this.cascadeCheck && this.cascadeUp) {
                        this.updateParentCheckboxStatus(rownode);
                    }
                    if (this.checkValues) {
                        this.checkValues = this.checkValues.filter((/**
                         * @param {?} n
                         * @return {?}
                         */
                        n => n !== id));
                        this.checkValuesChange.emit(this.checkValues);
                    }
                    this.detectChanges();
                    this.nodeUnChecked.emit({ node: rownode, instance: this });
                }
                else {
                    /** @type {?} */
                    const unNodes = this.cascadeNodes(rownode, false);
                    this.checkeds = [...this.checkeds];
                    this.checkValuesChange.emit(this.checkValues);
                    this.detectChanges();
                    this.nodeUnChecked.emit({ node: rownode, nodes: unNodes, instance: this });
                }
            }
            else {
                this.writeConsole(`未找到ID为${id}的数据！！`);
            }
        }
    }
    /**
     * @private
     * @param {?} ids
     * @param {?} checked
     * @return {?}
     */
    _checkedNodes(ids, checked) {
        /** @type {?} */
        const parentIDS = [];
        /** @type {?} */
        const nodes = this.findRowNodes(ids).map((/**
         * @param {?} rn
         * @return {?}
         */
        rn => {
            parentIDS.push(rn.parents);
            if (rn.node.selectable) {
                rn.isChecked = checked;
                this.setCheckeds(rn, false);
            }
            return rn.node;
        }));
        this.checkeds = [...this.checkeds];
        if (this.cascadeCheck && this.cascadeUp) {
            // 更新父节点复框的选中状态
            this.updateParentsCheckStatus(parentIDS);
        }
        return nodes;
    }
    /**
     * 批量选中节点
     * @param {?} ids
     * @param {?=} detectChanges
     * @param {?=} emit
     * @param {?=} closeCascade
     * @return {?}
     */
    checkedNodes(ids, detectChanges = true, emit = true, closeCascade) {
        if (this.isEnableMultiSelect()) {
            if (ids && ids.length) {
                /** @type {?} */
                const _cascade = this.cascadeCheck;
                if (closeCascade && _cascade) {
                    this.cascadeCheck = false;
                }
                /** @type {?} */
                const nodes = this._checkedNodes(ids, true);
                if (closeCascade && _cascade) {
                    // 恢复级联
                    this.cascadeCheck = true;
                }
                this.updateAllCheckboxStatus();
                // this.checkeds = nodes;
                if (detectChanges) {
                    this.detectChanges();
                }
                if (emit) {
                    this.nodeChecked.emit({ originalEvent: null, node: nodes, nodes, instance: this });
                }
            }
        }
    }
    /**
     * 取消选中的节点.
     * ids: 标识Id 数组
     * closeCascade: 执行取消钩选时是否关闭级联功能。默认为 false
     *     设为true时，钩选将禁用级联的功能，仅处理当前节点的选中状态。执行完毕后，恢复原先的级联选项。
     * emit: 是否触发取消勾选事件。默认为 true
     * @param {?} ids
     * @param {?=} closeCascade
     * @param {?=} emit
     * @return {?}
     */
    unCheckedNodes(ids, closeCascade, emit = true) {
        if (ids && ids.length) {
            /** @type {?} */
            const _cascade = this.cascadeCheck;
            if (closeCascade && _cascade) {
                this.cascadeCheck = false;
            }
            /** @type {?} */
            const nodes = this._checkedNodes(ids, false);
            if (closeCascade && _cascade) {
                this.cascadeCheck = true;
            }
            this.detectChanges();
            // this.checkeds = nodes;
            if (emit) {
                this.nodeUnChecked.emit({ originalEvent: null, node: nodes, nodes, instance: this });
            }
        }
        else {
            this.clearCheckeds();
            this.detectChanges();
        }
    }
    /**
     * @param {?} id
     * @return {?}
     */
    findRowNode(id) {
        if (id) {
            if (this.state.rowNodes) {
                return this.state.rowNodes.find((/**
                 * @param {?} n
                 * @return {?}
                 */
                n => n.id === id));
            }
        }
        return undefined;
    }
    /**
     * 将在 v0.2.x 废弃；请使用 findRowNode 方法
     * @param {?} id
     * @return {?}
     */
    findNode(id) {
        return this.findRowNode(id);
    }
    /**
     * 根据当前节点ID，获取顶级父节点
     * @param {?} id 当前节点ID
     * @return {?} 返回顶级节点
     */
    getRoot(id) {
        /** @type {?} */
        const rowNode = this.findRowNode(id);
        if (rowNode) {
            if (rowNode.parents && rowNode.parents.length) {
                return this.findRowNode(rowNode.parents[0]);
            }
            return rowNode;
        }
        return null;
    }
    /**
     * @param {?} ids
     * @return {?}
     */
    findRowNodes(ids) {
        return this.state.rowNodes.filter((/**
         * @param {?} rn
         * @return {?}
         */
        rn => ids.indexOf(rn.id) > -1));
    }
    /**
     * @param {?=} args
     * @return {?}
     */
    checkAllNodes(args) {
        /** @type {?} */
        let rowNodes = this.getCurrentAllRowNodes();
        rowNodes = rowNodes.filter((/**
         * @param {?} n
         * @return {?}
         */
        n => (n.node.selectable || n.node.selectable === undefined)));
        this.checkeds = rowNodes.map((/**
         * @param {?} n
         * @return {?}
         */
        n => {
            n.indeterminate = false;
            this.ttService.onChangeCheckboxStatus(n);
            if (n.node.selectable || n.node.selectable === undefined) {
                n.isChecked = true;
            }
            return n.node;
        }));
        if (this.selectOnCheck && !this.onlySelectSelf) {
            this.selections = rowNodes.map((/**
             * @param {?} n
             * @return {?}
             */
            n => {
                if (n.node.selectable || n.node.selectable === undefined) {
                    n.isSelected = true;
                }
                return n.node;
            }));
        }
        if (this.state.searched) {
            rowNodes.forEach((/**
             * @param {?} rn
             * @return {?}
             */
            rn => {
                /** @type {?} */
                const row = this.state.rowNodes.find((/**
                 * @param {?} n
                 * @return {?}
                 */
                n => n.id === rn.id));
                if (row) {
                    row.isSelected = rn.isSelected;
                    row.isChecked = rn.isChecked;
                }
            }));
        }
        this.checkAll.emit(args);
        this.updateAllCheckboxStatus();
        this.detectChanges();
    }
    /**
     * @param {?=} args
     * @return {?}
     */
    unCheckAllNodes(args) {
        this.clearAll();
        this.unCheckAll.emit(args);
        this.detectChanges();
    }
    /**
     * @private
     * @return {?}
     */
    isEnableMultiSelect() {
        if (this.singleSelect) {
            if (!this.showCheckbox) {
                return false;
            }
            return true;
        }
        return true;
    }
    // 从数据中获取节点图标
    // iconField 为 object
    //      如果 展开图标为空，折叠图标不为空，或反之，则展开与折叠图标保持一至；
    //      如果 叶子图标为空，则使用组件默认的图标
    // iconField 为 字符串： 则叶子 展开 折叠 图标使用同一个。 如果为空， 则使用组件默认图标
    /**
     * @private
     * @param {?} tn
     * @return {?}
     */
    getNodeIconFromData(tn) {
        /** @type {?} */
        let leaf = null;
        /** @type {?} */
        let expand = null;
        /** @type {?} */
        let collapse = null;
        if (this.useIconFromData) {
            if (this.iconField) {
                /** @type {?} */
                let _iconField = '';
                if (typeof this.iconField === 'string') {
                    _iconField = this.iconField;
                    if (tn[_iconField]) {
                        leaf = tn[_iconField];
                    }
                    else {
                        leaf = this.utils.getValue(_iconField, tn.data);
                    }
                    expand = collapse = leaf;
                }
                else {
                    if (this.iconField.leaf) {
                        leaf = this.utils.getValue(this.iconField.leaf, tn.data);
                    }
                    if (this.iconField.expand) {
                        expand = this.utils.getValue(this.iconField.expand, tn.data);
                    }
                    if (this.iconField.collapse) {
                        collapse = this.utils.getValue(this.iconField.collapse, tn.data);
                    }
                    if (expand && !collapse) {
                        collapse = expand;
                    }
                    if (!expand && collapse) {
                        expand = collapse;
                    }
                }
            }
        }
        return {
            leaf, expand, collapse
        };
    }
    /**
     * @param {?} treeNode
     * @return {?}
     */
    getTreeIcon(treeNode) {
        /** @type {?} */
        const tn = treeNode;
        /** @type {?} */
        let leafIcon = this.leafIcon || 'file';
        /** @type {?} */
        let expandIcon = this.expandIcon || 'folder-open';
        /** @type {?} */
        let collapseIcon = this.collapseIcon || 'folder';
        /** @type {?} */
        const loading = 'f-loading-round';
        if (tn['showLoading']) {
            return { [loading]: true };
        }
        if (tn.icon) {
            leafIcon = tn.icon;
        }
        if (tn.expandedIcon) {
            expandIcon = tn.expandedIcon;
        }
        if (tn.collapsedIcon) {
            collapseIcon = tn.collapsedIcon;
        }
        if (this.useIconFromData) {
            const { leaf, expand, collapse } = this.getNodeIconFromData(treeNode);
            if (this.whenDataIconEmptyUseDefault) {
                if (leaf) {
                    leafIcon = leaf;
                }
                if (expand) {
                    expandIcon = expand;
                }
                if (collapse) {
                    collapseIcon = collapse;
                }
            }
            else {
                leafIcon = leaf || '';
                expandIcon = expand || '';
                collapseIcon = collapse || '';
            }
        }
        /** @type {?} */
        const collapsedExpression = (!tn.leaf || !!(tn.children && tn.children.length)) && !tn.expanded;
        /** @type {?} */
        const expandedExpression = !!tn.expanded;
        /** @type {?} */
        const leafExpression = tn.leaf === undefined ? (!tn.children || !tn.children.length) : tn.leaf;
        /** @type {?} */
        const icons = {};
        if (leafExpression && leafIcon) {
            icons[leafIcon] = leafExpression;
        }
        else {
            if (tn.expanded && expandIcon) {
                icons[expandIcon] = expandedExpression;
            }
            else {
                if (collapseIcon) {
                    icons[collapseIcon] = collapsedExpression;
                }
            }
        }
        if (this.iconCls) {
            icons[this.iconCls] = true;
        }
        return icons;
    }
    /**
     * @private
     * @param {?} a
     * @param {?} b
     * @return {?}
     */
    compare(a, b) {
        if (typeof a === 'string') {
            return a.localeCompare(b);
        }
        else {
            return a === b ? 0 : (a > b ? 1 : -1);
        }
    }
    /**
     * @private
     * @param {?} r1
     * @param {?} r2
     * @return {?}
     */
    _sort(r1, r2) {
        /** @type {?} */
        let r = 0;
        /** @type {?} */
        const sortFields = this.sortName.split(',');
        /** @type {?} */
        const orders = this.sortOrder.split(',');
        if (!this.sortName) {
            return r;
        }
        for (let i = 0; i < sortFields.length; i++) {
            /** @type {?} */
            const sn = sortFields[i];
            /** @type {?} */
            const so = orders[i];
            /** @type {?} */
            const col = this.columns.find((/**
             * @param {?} c
             * @return {?}
             */
            c => c.field === sn));
            /** @type {?} */
            const orderby = col.sorter || this.compare;
            /** @type {?} */
            let v1 = this.utils.getValue(sn, r1.data);
            if (v1 === null || v1 === undefined) {
                v1 = '';
            }
            /** @type {?} */
            let v2 = this.utils.getValue(sn, r2.data);
            if (v2 === null || v2 === undefined) {
                v2 = '';
            }
            r = orderby(v1, v2);
            if (r !== 0) {
                return r * (so === 'asc' ? 1 : -1);
            }
        }
        return r;
    }
    /**
     * @return {?}
     */
    clientSort() {
        /** @type {?} */
        const sortedData = this.data.sort(this._sort.bind(this));
        /** @type {?} */
        const sortChildNodes = (/**
         * @param {?} childNodes
         * @return {?}
         */
        (childNodes) => {
            childNodes = childNodes.sort(this._sort.bind(this));
            childNodes.forEach((/**
             * @param {?} n
             * @return {?}
             */
            n => {
                if (n.children && n.children.length) {
                    n.children = n.children.sort(this._sort.bind(this));
                    sortChildNodes(n.children);
                }
            }));
            return childNodes;
        });
        sortedData.forEach((/**
         * @param {?} c
         * @return {?}
         */
        c => {
            c.children = sortChildNodes(c.children);
        }));
        this.loadData(sortedData);
    }
    /**
     * @param {?} $event
     * @param {?} col
     * @return {?}
     */
    onSortColumnClick($event, col) {
        if (!col.sortable) {
            return;
        }
        /** @type {?} */
        const sortName = this.sortName;
        /** @type {?} */
        const sortOrder = this.sortOrder;
        /** @type {?} */
        let sortFields = [];
        /** @type {?} */
        let sortOrders = [];
        if (sortName) {
            sortFields = sortName.split(',');
            sortOrders = sortOrder.split(',');
        }
        /** @type {?} */
        const colOrder = col.order || 'asc';
        /** @type {?} */
        let newOrder = colOrder;
        /** @type {?} */
        const i = sortFields.findIndex((/**
         * @param {?} n
         * @return {?}
         */
        n => n === col.field));
        if (i >= 0) {
            /** @type {?} */
            const _order = sortOrders[i] === 'asc' ? 'desc' : 'asc';
            newOrder = _order;
            // if (this.multiSort && newOrder === 'asc') {
            if (newOrder === 'asc') {
                newOrder = undefined;
                sortFields.splice(i, 1);
                sortOrders.splice(i, 1);
            }
            else {
                sortOrders[i] = _order;
            }
        }
        else {
            if (this.multiSort) {
                sortFields.push(col.field);
                sortOrders.push(colOrder);
            }
            else {
                sortFields = [col.field];
                sortOrders = [colOrder];
            }
        }
        col.order = newOrder;
        this.sortName = sortFields.join(',');
        this.sortOrder = sortOrders.join(',');
        if (!this.multiSort) {
            /** @type {?} */
            const updateFieldOrder = (/**
             * @param {?} cols
             * @return {?}
             */
            (cols) => {
                if (!cols || !cols.length) {
                    return;
                }
                cols.forEach((/**
                 * @param {?} c
                 * @return {?}
                 */
                c => {
                    c.order = undefined;
                    /** @type {?} */
                    const k = sortFields.findIndex((/**
                     * @param {?} f
                     * @return {?}
                     */
                    f => f === c.field));
                    if (k >= 0) {
                        c.order = sortOrders[k];
                    }
                }));
            });
            updateFieldOrder(this.columns);
            this.cdRef.detectChanges();
        }
        this.beforeSortColumn(this.sortName, this.sortOrder).subscribe((/**
         * @return {?}
         */
        () => {
            if (this.remoteSort) {
                // this.reload();
            }
            else {
                this.clientSort();
            }
            this.columnSorted.emit({ sortName: this.sortName, sortOrder: this.sortOrder });
        }));
    }
    /**
     * 查询工具条前端字符查询
     * @param {?} $event
     * @return {?}
     */
    findKeyWords($event) {
        /** @type {?} */
        const searchValue = $event.value;
        /** @type {?} */
        const field = $event.field;
        this.findField = field;
        if (searchValue && searchValue.length >= 2) {
            this.findValue = searchValue;
            if (!field) {
                this.writeConsole('Please set a field for the FindField property.', 'warn');
                return;
            }
            /** @type {?} */
            const result = this.searchHandle.searchOnClient(field, searchValue, this.state.rowNodes);
            if (result && result.length) {
                this.findResult = result.sort((/**
                 * @param {?} a
                 * @param {?} b
                 * @return {?}
                 */
                (a, b) => a.index === b.index ? 0 : (a.index > b.index ? 1 : -1)));
                this.findCount = result.length;
                this.findCurrent = 1;
                this._scrollToNode(result[0].id);
                this.highLightKeywords();
            }
            else {
                this.findResult = [];
                this.findCurrent = 0;
                this.findCount = 0;
            }
        }
        else {
            this.resetFindText();
            this.cdRef.detectChanges();
        }
    }
    /**
     * @param {?} step
     * @return {?}
     */
    nextFindValue(step) {
        if (!this.findResult || !this.findResult.length) {
            return;
        }
        /** @type {?} */
        const allHighLights = Array.from(this.el.nativeElement.querySelectorAll('.search-highlight'));
        if (this.findCurrent === this.findResult.length) {
            this.findCurrent = 1;
        }
        else {
            if (step) {
                this.findCurrent = this.findCurrent + step;
                if (step === -1) {
                    if (this.findCurrent <= 0) {
                        this.findCurrent = 1;
                    }
                }
            }
            else {
                this.findCurrent++;
            }
        }
        /** @type {?} */
        const active = this.el.nativeElement.querySelector('.search-highlight.active');
        if (active) {
            this.renderer.removeClass(active, 'active');
        }
        /** @type {?} */
        const _index = this.findCurrent - 1;
        /** @type {?} */
        const nextRow = this.findResult[_index];
        if (nextRow) {
            this._scrollToNode(nextRow.id);
            if (this.virtualized) {
                this.ngZone.runOutsideAngular((/**
                 * @return {?}
                 */
                () => {
                    if (this['HIGH_LIGHT_TIMER']) {
                        clearTimeout(this['HIGH_LIGHT_TIMER']);
                    }
                    this['HIGH_LIGHT_TIMER'] = setTimeout((/**
                     * @return {?}
                     */
                    () => {
                        /** @type {?} */
                        const trId = 'rownode-' + nextRow.id;
                        /** @type {?} */
                        const tr = this.el.nativeElement.querySelector('#' + trId);
                        if (tr) {
                            /** @type {?} */
                            const highLightDom = tr.querySelector('.search-highlight');
                            if (highLightDom) {
                                this.renderer.addClass(highLightDom, 'active');
                            }
                        }
                    }), 100);
                }));
            }
            else {
                if (allHighLights[_index]) {
                    this.renderer.addClass(allHighLights[_index], 'active');
                }
            }
        }
    }
    /**
     * 查询工具条前端字符查询
     * @return {?}
     */
    /*
        findKeyWords($event) {
            const searchValue = $event.value;
            const field = $event.field;
            this.findField = field;
            if (searchValue && searchValue.length >= 2) {
                this.findValue = searchValue;
    
                if (!field) {
                    this.writeConsole('Please set a field for the FindField property.', 'warn');
                    return;
                }
    
                const result = this.searchHandle.searchOnClient(field, searchValue, this.state.rowNodes);
    
                if (result && result.length) {
                    this.findResult = result.sort((a, b) => a.index === b.index ? 0 : (a.index > b.index ? 1 : -1));
                    const firstRowIndex = result[0].index;
    
                    this.findCount = result.length;
    
                    const parents = this.searchHandle.findParents(result, this.state.rowNodes);
    
                    this.findCurrent = 1;
                    [...parents, ...result].forEach((r: RowNode) => {
                        this.expandNode(r.id);
                    });
    
                    let y = 0;
                    this.state.rowNodes.forEach((row: RowNode, index: number) => {
                        if (row.visible && firstRowIndex > index) {
                            y += this.rowHeight;
                        }
                    });
                    if (this.psRef && this.psRef.directiveRef) {
                        this.psRef.directiveRef.scrollToY(y - 30);
                    }
    
                    this.highLightKeywords();
                } else {
                    this.findResult = [];
                    this.findCurrent = 0;
                    this.findCount = 0;
                }
            } else {
                this.resetFindText();
                this.cdRef.detectChanges();
            }
        }
    
        nextFindValue(step) {
            if (!this.findResult || !this.findResult.length) {
                return;
            }
            const allHighLights = Array.from(this.el.nativeElement.querySelectorAll('.search-highlight'));
    
            if (this.findCurrent === this.findResult.length) {
                this.findCurrent = 1;
            } else {
                if (step) {
                    this.findCurrent = this.findCurrent + step;
                    if (step === -1) {
                        if (this.findCurrent <= 0) {
                            this.findCurrent = 1;
                        }
                    }
                } else {
                    this.findCurrent++;
                }
            }
    
            const active = this.el.nativeElement.querySelector('.search-highlight.active');
    
            let _index = allHighLights.indexOf(active);
    
            if (active) {
                this.renderer.removeClass(active, 'active');
            }
    
            if (this.virtualized) {
    
                _index += !step ? 1 : step;
    
                if (allHighLights[_index]) {
                    this.renderer.addClass(allHighLights[_index], 'active');
    
                } else {
                    // 先滚动指定位置
                    const nextRow = this.findResult[this.findCurrent - 1];
                    let y = 0;
                    this.state.rowNodes.forEach((row: RowNode, index: number) => {
                        if (row.visible && nextRow.index > index) {
                            y += this.rowHeight;
                        }
                    });
    
                    if (this.psRef && this.psRef.directiveRef) {
                        this.psRef.directiveRef.scrollToY(y - 30, 200);
                    }
                    this.ngZone.runOutsideAngular(() => {
                        setTimeout(() => {
                            const keyWords = this.el.nativeElement.querySelectorAll('.search-highlight');
                            this.renderer.addClass(keyWords[0], 'active');
                        }, 100);
                    });
                }
            } else {
                const currentEl: any = allHighLights[this.findCurrent - 1];
                if (currentEl) {
                    this.renderer.addClass(currentEl, 'active');
                    if (this.psRef && this.psRef.directiveRef) {
                        const sTop = currentEl.closest('td').offsetTop - 30;
                        this.psRef.directiveRef.scrollToY(sTop, 200);
                    }
                }
            }
    
    
            this.cdRef.detectChanges();
        }
    */
    closeFindPanel() {
        this.showFindInput = false;
        this.resetFindText();
        this.cdRef.detectChanges();
    }
    /**
     * @private
     * @return {?}
     */
    highLightKeywords() {
        this.ngZone.runOutsideAngular((/**
         * @return {?}
         */
        () => {
            setTimeout((/**
             * @return {?}
             */
            () => {
                this.cdRef.detectChanges();
                /** @type {?} */
                const allHighLights = this.el.nativeElement.querySelectorAll('.search-highlight');
                if (!allHighLights.length) {
                    return;
                }
                this.renderer.addClass(allHighLights[0], 'active');
            }), 100);
        }));
    }
    /**
     * @private
     * @return {?}
     */
    resetFindText() {
        this.findValue = '';
        this.findCurrent = 0;
        this.findCount = 0;
        this.findResult = [];
    }
    /**
     * @param {?} y
     * @param {?=} animations
     * @return {?}
     */
    scrollToY(y, animations = 200) {
        this.state.scrollY = y || 0;
        this.psRef.directiveRef.scrollToY(y, animations);
    }
    /**
     * @private
     * @param {?} field
     * @param {?} isHide
     * @return {?}
     */
    showOrHideColumn(field, isHide) {
        if (Array.isArray(field)) {
            this.columns.forEach((/**
             * @param {?} n
             * @return {?}
             */
            n => {
                if (field.indexOf(n.field) > -1) {
                    n.visible = !isHide;
                }
            }));
        }
        else {
            this.columns.forEach((/**
             * @param {?} n
             * @return {?}
             */
            n => {
                if (field === n.field) {
                    n.visible = !isHide;
                }
            }));
        }
        this.columnsChanged();
    }
    /**
     * @param {?} field
     * @return {?}
     */
    showColumn(field) {
        this.showOrHideColumn(field, false);
    }
    /**
     * @param {?} field
     * @return {?}
     */
    hideColumn(field) {
        this.showOrHideColumn(field, true);
    }
    /**
     * @param {?} parentNode
     * @return {?}
     */
    showChildsLoading(parentNode) {
        /** @type {?} */
        const colspan = this.columns.filter((/**
         * @param {?} n
         * @return {?}
         */
        n => n.visible !== false)).length;
        /** @type {?} */
        const data = { [this.idField]: '正在加载中....', __colspan__: colspan };
        this.loadChildren([{ data, __childs_loading__: true }], parentNode, false);
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    onChildsPageChanged($event) {
        this.childsPageChanged.emit($event);
    }
    /**
     * @private
     * @param {?} tr
     * @return {?}
     */
    trId2DataId(tr) {
        return tr.id.replace('rownode-', '');
    }
    // 快捷键
    /**
     * @param {?} $event
     * @return {?}
     */
    onKeydownEvent($event) {
        if (!$event || !this.singleSelect || !this.data || !this.data.length) {
            return;
        }
        /** @type {?} */
        const keys = ['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight'];
        if (!keys.includes($event.key) || $event.target.nodeName === 'INPUT') {
            return;
        }
        $event.stopPropagation();
        $event.preventDefault();
        this.inputGroup.textbox.nativeElement.blur();
        /** @type {?} */
        let newIdx;
        /** @type {?} */
        const trs = Array.from(this.bodyTable.nativeElement.querySelectorAll('tr'));
        /** @type {?} */
        const trCount = trs.length;
        /** @type {?} */
        let selectedTrIndex = -1;
        if (this.selectedRow) {
            selectedTrIndex = trs.findIndex((/**
             * @param {?} n
             * @return {?}
             */
            (n) => this.trId2DataId(n) === this.selectedRow.id));
        }
        if ($event.code === 'ArrowDown') {
            newIdx = selectedTrIndex + 1;
        }
        else if ($event.code === 'ArrowUp') {
            if (selectedTrIndex !== -1) {
                newIdx = selectedTrIndex - 1;
            }
        }
        else {
            if (this.selectedRow && ($event.code === 'ArrowRight' || $event.code === 'ArrowLeft')) {
                this.toggleExpand(this.selectedRow);
            }
            return;
        }
        if (newIdx >= 0 && newIdx < trCount) {
            /** @type {?} */
            const _tr = (/** @type {?} */ (trs[newIdx]));
            if (_tr) {
                /** @type {?} */
                const id = this.trId2DataId(_tr);
                this.selectNode(id);
                _tr.scrollIntoView({ block: 'nearest' });
            }
        }
    }
    /**
     * 根据传入的父级ID，获取所有子级节点
     * @param {?} parentId
     * @return {?}
     */
    getChildNodes(parentId) {
        /** @type {?} */
        let nodes = [];
        if (parentId) {
            /** @type {?} */
            const rowNode = this.findRowNode(parentId);
            if (rowNode && rowNode.node.children && rowNode.node.children.length) {
                rowNode.node.children.forEach((/**
                 * @param {?} tn
                 * @return {?}
                 */
                (tn) => {
                    if (tn.selectable) {
                        nodes.push(tn);
                    }
                    nodes = nodes.concat(this.getChildNodes(tn.id));
                }));
            }
            return nodes;
        }
        return [];
    }
    /**
     * 根据传入的节点ID， 获取所有父级节点
     * @param {?} id
     * @return {?}
     */
    getParentNodes(id) {
        /** @type {?} */
        let nodes = [];
        if (id) {
            /** @type {?} */
            const rowNode = this.findRowNode(id);
            if (rowNode && rowNode.parents && rowNode.parents.length) {
                rowNode.parents.forEach((/**
                 * @param {?} n
                 * @return {?}
                 */
                (n) => {
                    /** @type {?} */
                    const rn = this.findRowNode(n);
                    if (rn && rn.node.selectable) {
                        nodes.push(rn);
                    }
                }));
            }
            return nodes;
        }
        return [];
    }
}
TreeTableComponent.decorators = [
    { type: Component, args: [{
                selector: 'farris-treetable',
                template: "<!--\r\n * @Author: \u75AF\u72C2\u79C0\u624D(Lucas Huang)\r\n * @Date: 2019-06-03 20:00:11\r\n * @LastEditors: \u75AF\u72C2\u79C0\u624D(Lucas Huang)\r\n * @LastEditTime: 2019-11-28 14:23:52\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n -->\r\n<div class=\"filter-row\" style=\"width: 100%;\" *ngIf=\"showFilterBar\">\r\n    <form style=\"display: flex; width: 100%;\">\r\n        <div class=\"search-fields\" style=\"padding-left:0;\" [style.display]=\"showSearchField ? '': 'none'\">\r\n            <select class=\"custom-select\" [(ngModel)]=\"searchData.field\" name=\"field\">\r\n                <option value=\"*\">{{allColumnsTitle}}</option>\r\n                <option *ngFor=\"let col of searchFields\" value=\"{{col.value}}\">{{ col.label }}</option>\r\n            </select>\r\n        </div>\r\n        <div class=\"search-text flex-fill\" style=\"padding-right: 0px;\">\r\n            <input-group #inputGroup [groupText]=\"searchButtonText\" name=\"searchValue\" [(ngModel)]=\"searchData.value\"\r\n                (clear)=\"onClearSearchValue()\" (valueChange)=\"onSearchValueChange($event)\" (clickHandle)=\"onSearch()\"\r\n                (keydownHandle)=\"onKeydownEvent($event)\"></input-group>\r\n        </div>\r\n    </form>\r\n</div>\r\n\r\n<ng-content select=\"tt-column\"></ng-content>\r\n\r\n<ng-template #tdcell let-col let-serializedNode=\"rowNode\" let-left=\"left\">\r\n\r\n    <ng-container *ngIf=\"enableFindText\">\r\n        <span *ngIf=\"!col.formatter\" style=\"width: 100%;\"\r\n            [innerHTML]=\"getNodeText(col, serializedNode.node.data) | highlight: findValue: col.field :findField\"></span>\r\n        <span *ngIf=\"col.formatter\" style=\"width: 100%;\" \r\n            [innerHTML]=\"formatData(col, serializedNode.node.data, col.formatter) | safe: 'html' \"></span>\r\n    </ng-container>\r\n\r\n    <ng-container *ngIf=\"!enableFindText\">\r\n        <span *ngIf=\"!col.formatter && !fast\" style=\"width: 100%;\"\r\n            [innerHTML]=\"getNodeText(col, serializedNode.node.data)\"></span>\r\n        <span *ngIf=\"!col.formatter && fast\" style=\"width: 100%;\"\r\n            [textContent]=\"getNodeText(col, serializedNode.node.data, true)\"></span>\r\n        <span *ngIf=\"col.formatter\" style=\"width: 100%;\" \r\n            [innerHTML]=\"formatData(col, serializedNode.node.data, col.formatter) | safe: 'html' \"></span>\r\n    </ng-container>\r\n</ng-template>\r\n\r\n<ng-template #tbodyrows>\r\n    <ng-template ngFor let-serializedNode let-rowIndex=\"index\" [ngForTrackBy]=\"trackByFn\" [ngForOf]=\"pagination ? (serializedValue | paginate: paginationOptions) : serializedValue\">\r\n        <tr *ngIf=\"serializedNode.visible\" #row=\"row\" \r\n            [attr.id]=\" 'rownode-' + serializedNode.id\" class=\"f-treetable-row\"\r\n            [selectRow]=\"serializedNode\" [rowIndex]=\"rowIndex\" [dblclick]=\"true\" [dblclickNode]=\"serializedNode\"\r\n            [selectRowDisabled]=\"serializedNode.node | disablenode: disabledRow\"\r\n            [customRowStyle]=\"serializedNode\"\r\n            [class.f-treetable-disable-row]=\"serializedNode.node | disablenode: disabledRow\"\r\n            [class.farris-table-selectedrow]=\"serializedNode.isSelected\">\r\n\r\n            <td *ngIf=\"serializedNode.node.data['__colspan__']\"  [attr.colspan]=\" serializedNode.node.data['__colspan__'] || 0\">\r\n                <childs-loading></childs-loading>\r\n            </td>\r\n\r\n            <ng-container *ngIf=\"!serializedNode.node.data['__colspan__']\">\r\n                <td *ngFor=\"let col of columns; let i = index;\"\r\n                    [customCellStyle]=\"col\" [rowNode]=\"serializedNode\" [rowIndex]=\"rowIndex\"\r\n                    [style.textAlign]=\"col!.align || 'left'\" \r\n                    (click)=\"onCellClick($event, col, serializedNode.node)\"\r\n                    class=\"treetable-cell\" [attr.field]=\"col.field\"\r\n                    [attr.colspan]=\" serializedNode.node.data['__cellspan__'] || 0\"\r\n                    [attr.title]=\"col | tipmsg: serializedNode.node\"\r\n                    [class.f-treetable--fixed-left]=\"fixedColumns && fixedHeader && col.fixed && col.fixed === 'left'\"\r\n                    [class.f-treetable--fixed-right]=\"fixedColumns && fixedHeader && col.fixed && col.fixed === 'right'\"\r\n                    [customRowStyle]=\"serializedNode\" [field]=\"col\"\r\n                    [attr.r-tt-shadow-col]=\"col.rightShadowCol\"\r\n                    [attr.l-tt-shadow-col]=\"col.leftShadowCol\"\r\n                >\r\n\r\n                    <div class=\"treetable-cell-content d-flex\">\r\n                        <farris-treeTableToggler style=\"float: left\"\r\n                            [showLines]=\"showLines\"\r\n                            [indentSpacing]=\"indentSpacing\"\r\n                            [disabled]=\"serializedNode.node | disablenode: disabledRow: disabled\"\r\n                            [rowNode]=\"serializedNode\" *ngIf=\"i == 0\"></farris-treeTableToggler>\r\n                        \r\n                        <div class=\"flex-grow-1 text\"  *ngIf=\"!col.componentType\">\r\n                            <ng-container *ngIf=\"!col.template && col.field\">\r\n                                <ng-container *ngTemplateOutlet=\"tdcell; context: {$implicit: col, node: serializedNode.node, rowNode: serializedNode, rowData: serializedNode.node.data  }\" ></ng-container>\r\n                            </ng-container>\r\n            \r\n                            <ng-container *ngIf=\"col.template\"\r\n                                [ngTemplateOutlet]=\"col.template\"\r\n                                [ngTemplateOutletContext]=\"{$implicit: { column: col, node: serializedNode.node, rowNode: serializedNode, rowData:  serializedNode.node.data  }}\">\r\n                            </ng-container>\r\n                        </div>\r\n                        <div class=\"flex-grow-1 text\"  *ngIf=\"col.componentType\" [component-template]=\"col\" [ctx]=\" { column: col, node: serializedNode.node, rowNode: serializedNode, rowData:  serializedNode.node.data  }\">\r\n                        </div>\r\n                    </div>\r\n                </td>\r\n            </ng-container>\r\n        </tr>\r\n    </ng-template>\r\n</ng-template>\r\n\r\n<ng-template #tbody>\r\n    <tbody class=\"farris-treetable-tbody\"\r\n        [farris-context-menus]=\"contextMenuItems\" [disabled]=\"!enableContextMenu\" \r\n        [activeDomName]=\"'tr'\" [beforeShowContextMenu]=\"onBeforeShowContextMenu\"\r\n        [menuClass]=\"'f-treetable-context-menu'\">\r\n        <ng-container *ngTemplateOutlet=\"tbodyrows\"></ng-container>\r\n    </tbody>\r\n</ng-template>\r\n\r\n<!--\u5355\u884C\u8868\u5934\u6A21\u677F-->\r\n<ng-template #headerCells let-cols let-firstRow=\"firstRow\">\r\n    <ng-template ngFor let-col [ngForOf]=\"cols\" let-i=\"index\" let-first=\"first\" let-last=\"last\">\r\n        <th [resizable-column]=\"(!col.lastColumn || !last) && (!col.colspan || col.colspan == 1)\" [style.textAlign]=\"col!.hAlign || 'left'\" #th \r\n            class=\"treetable-header-cell\"\r\n            [class.f-treetable--fixed-left]=\"fixedColumns && col.fixed && col.fixed === 'left'\"\r\n            [class.f-treetable--fixed-right]=\"fixedColumns && col.fixed && col.fixed === 'right'\"\r\n            [attr.field]=\"col.field || ''\"\r\n            [attr.r-tt-shadow-col]=\"col.rightShadowCol\"\r\n            [attr.l-tt-shadow-col]=\"col.leftShadowCol\"\r\n            [attr.colspan]=\"col.colspan\" \r\n            [attr.rowspan]=\"col.rowspan\"\r\n            [class.group-header-cell]=\"col.colspan && col.colspan > 1\"\r\n            [attr.id]=\"col.id\"\r\n            >\r\n      \r\n            <div class=\"d-flex\" style=\"line-height: 1.25em;\" [style.padding-right.px]=\"col.sortable ? 10: 0\">\r\n                <ng-container *ngIf=\"!singleSelect && showCheckAll && first && showCheckbox && !last && firstRow\">\r\n                    <tt-header-checkbox #allCheckbox></tt-header-checkbox>\r\n                </ng-container>\r\n                <ng-container *ngIf=\"col.headTemplate&& !col.headerComponentType\"\r\n                    [ngTemplateOutlet]=\"col.headTemplate\"\r\n                    [ngTemplateOutletContext]=\"{$implicit: { column: col}}\">\r\n                </ng-container>\r\n                <ng-container *ngIf=\"!col.headTemplate && !col.headerComponentType\">\r\n                    <span style=\"overflow: hidden;width: 100%;\" *ngIf=\"!headerWrap\">{{ col.title }}</span>\r\n                    <span style=\"white-space: pre-wrap;width: 100%;\"  *ngIf=\"headerWrap\">{{ col.title }}</span>\r\n                </ng-container>\r\n\r\n                <div class=\"flex-grow-1 text\" *ngIf=\"col.headerComponentType\" [component-template]=\"col\" [templateType]=\"'head'\" [ctx]=\"{ column: col}\" [style.whiteSpace]=\"headerWrap ? 'pre-wrap': ''\"></div>\r\n\r\n\r\n                <ng-container *ngIf=\"col.sortable\">\r\n                    <span class=\"f-treetable-sort\"\r\n                        [class.f-treetable-sort-asc]=\"col.order === 'asc'\"\r\n                        [class.f-treetable-sort-desc]=\"col.order === 'desc'\"\r\n                        (click)=\"onSortColumnClick($event, col)\" *ngIf=\"col.order\"></span>\r\n                    <span class=\"f-treetable-sort\" (click)=\"onSortColumnClick($event, col)\" *ngIf=\"!col.order\"></span>\r\n                </ng-container>\r\n\r\n            </div>\r\n        </th>\r\n    </ng-template>\r\n</ng-template>\r\n\r\n<!--\u591A\u884C\u8868\u5934\u6A21\u677F-->\r\n<ng-template #groupHeader>\r\n    <tr *ngFor=\"let cols of groupColumns; first as isFirst\">\r\n        <ng-container *ngTemplateOutlet=\"headerCells; context: {$implicit: cols, firstRow: isFirst}\"></ng-container>\r\n    </tr>\r\n</ng-template>\r\n\r\n\r\n<ng-template #scorllview>\r\n    <div class=\"farris-treetable fixed\" [attr.id]=\"id\" [class.f-treetable--fixed-columns]=\"fixedColumns\"\r\n        [class.farris-treetable-nowrap]=\"!nowrap\" [class.table-bordered]=\"showBorder\"\r\n        [ngClass]=\"{'farris-treetable-disabled': disabled}\"\r\n        [class.farris-treetable-showlines]=\"showLinesOnHover && showLines\" [style.width]=\"fit ? '100%': (width + 'px')\">\r\n        <div #headerBox class=\"farris-treetable-header\" *ngIf=\"showHeader && columns\" style=\"overflow: hidden; background-color: #f7f8fb\">\r\n            <table #headerTable class=\"table\" >\r\n                <colgroup *ngIf=\"!autoWidth\">\r\n                    <ng-container *ngFor=\"let col of columns\">\r\n                        <col *ngIf=\"columnIsVisible(col)\" [style.width]=\"getRealColWidth(col)\" />\r\n                    </ng-container>\r\n                </colgroup>\r\n                <thead class=\"farris-treetable-thead\" [class.header-wrap]=\"headerWrap\">\r\n                    <ng-container *ngIf=\"!headerTemplate\">\r\n                        <tr *ngIf=\"!useGroupHeader; else groupHeader\">\r\n                            <ng-container *ngTemplateOutlet=\"headerCells; context: {$implicit: columns, firstRow: true}\"></ng-container>\r\n                        </tr>\r\n                    </ng-container>\r\n\r\n                    <ng-container *ngIf=\"headerTemplate\">\r\n                        <ng-container *ngTemplateOutlet=\"headerTemplate; context: {$implicit: columns}\"></ng-container>\r\n                    </ng-container>\r\n                </thead>\r\n            </table>\r\n            <!-- \u5BA2\u6237\u7AEF\u67E5\u8BE2\u5B9A\u4F4D\u5DE5\u5177\u6761 -->\r\n            <find-input *ngIf=\"showFindInput\" [columns]=\"columns\" [current]=\"findCurrent\" [count]=\"findCount\"\r\n                (valueChanged)=\"findKeyWords($event)\" (close)=\"closeFindPanel()\" (enterHandler)=\"nextFindValue($event)\">\r\n            </find-input>\r\n\r\n        </div>\r\n\r\n        <div class=\"farris-treetable-body\">\r\n            <perfect-scrollbar #perfectScrollbar [config]=\"{minScrollbarLength: 15}\" (psScrollX)=\"onScrollX($event)\"\r\n                (psScrollY)=\"onScrollY($event)\" [style.height.px]=\"scorllBodyHeight\">\r\n                <div *ngIf=\"topHideHeight && virtualized\" [style.height.px]=\"topHideHeight\"> </div>\r\n                <table #bodyTable class=\"table\" [style.tableLayout]=\"autoWidth? 'auto': 'fixed'\"\r\n                    [ngClass]=\"{'table-striped': striped, 'table-hover': (hovered && serializedValue && serializedValue.length), 'f-table-norecords': (!serializedValue || !serializedValue.length),\r\n                    'h-100': (!serializedValue || !serializedValue.length) }\">\r\n                    <colgroup>\r\n                        <ng-container *ngFor=\"let col of columns\">\r\n                            <col *ngIf=\"columnIsVisible(col)\" [style.width]=\"getRealColWidth(col)\" />\r\n                        </ng-container>\r\n                    </colgroup>\r\n\r\n                    <ng-container *ngIf=\"!serializedValue || !serializedValue.length\">\r\n                        <tbody class=\"farris-treetable-tbody\">\r\n                            <tr class=\"f-table-norecords-row\">\r\n                                <td [attr.align]=\"'center'\" class=\"farris-treetable-emptydata\" [attr.colspan]=\"columns.length\">\r\n                                    <div class=\"f-table-norecords-content\" >\r\n                                        {{ 'treetable.emptyMessage' | locale }}\r\n                                    </div>\r\n                                </td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </ng-container>\r\n\r\n                    <ng-container *ngIf=\"serializedValue && serializedValue.length\">\r\n                        <ng-container *ngIf=\"bodyTemplate\">\r\n                            <tbody class=\"farris-treetable-tbody\" treeTableBody [columns]=\"columns\" [template]=\"bodyTemplate\"></tbody>\r\n                        </ng-container>\r\n\r\n                        <ng-container #defaultBodyTemplate *ngIf=\"!bodyTemplate\">\r\n                            <ng-container *ngTemplateOutlet=\"tbody\"></ng-container>\r\n                        </ng-container>\r\n                    </ng-container>\r\n                </table>\r\n                <div *ngIf=\"bottomHideHeight && virtualized\" [style.height.px]=\"bottomHideHeight\"> </div>\r\n            </perfect-scrollbar>\r\n        </div>\r\n\r\n        <!-- \u5206\u9875\u6761 -->\r\n        <div *ngIf=\"pagination\" #tablePager class=\"farris-table-pager\" [ngStyle]=\" { 'opacity': (disabled ? 0.6 : 1), 'pointer-events': (disabled? 'none': '')  }\">\r\n            <pagination-controls #pager [id]=\"paginationOptions?.id\"\r\n                [maxSize]=\"pagerLabelSize\" [directionLinks]=\"true\"\r\n                [autoHide]=\"false\" [responsive]=\"true\"\r\n                [previousLabel]=\"' '\" [nextLabel]=\"' '\"\r\n                [showPageInfo]=\"showPageInfo\" [showPageNumber]=\"showPageNumber\" [showPageList]=\"showPageList\"\r\n                (pageChange)=\"onPageChange($event)\" [showGotoInput]=\"showGotoInput\"\r\n                (pageSizeChange)=\"onPageSizeChange($event)\"\r\n                >\r\n\r\n                \r\n            </pagination-controls>\r\n        </div>\r\n\r\n        <div #resizerHelper class=\"column-resizer-helper\" *ngIf=\"resizableColumns\"></div>\r\n    </div>\r\n</ng-template>\r\n\r\n<ng-template #nodespagerbar let-ctx>\r\n    <nodes-pager [context]=\"ctx\" [disabled]=\"disabled\" (pageChange)=\"onChildsPageChanged($event)\" [showTotal]=\"showTotalForChildren\"></nodes-pager>\r\n</ng-template>\r\n\r\n\r\n\r\n<div class=\"farris-treetable\" [class.table-bordered]=\"showBorder\" [attr.id]=\"id\"\r\n    [class.farris-treetable-showlines]=\"showLinesOnHover && showLines\" \r\n    [class.farris-treetable-nowrap]=\"!nowrap\"  *ngIf=\"!fixedHeader; else scorllview\">\r\n    <table class=\"table\" [style.tableLayout]=\"autoWidth? 'auto': 'fixed'\"\r\n        [ngClass]=\"{'table-striped': striped, 'table-hover': (hovered && serializedValue && serializedValue.length), 'f-table-norecords': (!serializedValue || !serializedValue.length),\r\n        'h-100': (!serializedValue || !serializedValue.length) }\">\r\n        <thead class=\"farris-treetable-thead\" *ngIf=\"showHeader\" [class.header-wrap]=\"headerWrap\">\r\n            <ng-container *ngIf=\"!headerTemplate && columns\">\r\n                <th *ngFor=\"let col of columns;let isFirst=first\" [style.textAlign]=\"col!.hAlign || 'left'\" class=\"treetable-header-cell\" [attr.field]=\"col.field\">\r\n                    <div class=\"d-flex\">\r\n                        <ng-container *ngIf=\"!singleSelect && showCheckAll && isFirst && showCheckbox\">\r\n                            <tt-header-checkbox #allCheckbox class=\"f-cmp-treetable-toggler\"></tt-header-checkbox>\r\n                        </ng-container>\r\n\r\n                        <ng-container *ngIf=\"!col.headTemplate && !col.headComponentType\">\r\n                            <div class=\"flex-grow-1 text\" [style.whiteSpace]=\"headerWrap ? 'pre-wrap': ''\">{{col.title}}</div>\r\n                        </ng-container>\r\n        \r\n                        <ng-container *ngIf=\"col.headTemplate && !col.headComponentType\"\r\n                            [ngTemplateOutlet]=\"col.headTemplate\"\r\n                            [ngTemplateOutletContext]=\"{$implicit: { column: col}}\">\r\n                        </ng-container>\r\n                        <div class=\"flex-grow-1 text\" *ngIf=\"col.headerComponentType\" [component-template]=\"col\" [templateType]=\"'head'\" [ctx]=\" { column: col}\" [style.whiteSpace]=\"headerWrap ? 'pre-wrap': ''\"></div>\r\n                    </div>\r\n                </th>\r\n            </ng-container>\r\n            <ng-container *ngIf=\"headerTemplate\">\r\n                <ng-container *ngTemplateOutlet=\"headerTemplate; context: {$implicit: columns}\"></ng-container>\r\n            </ng-container>\r\n        </thead>\r\n        <ng-container *ngIf=\"serializedValue && serializedValue.length\">\r\n             <!-- \u5BA2\u6237\u7AEF\u67E5\u8BE2\u5B9A\u4F4D\u5DE5\u5177\u6761 -->\r\n             <find-input *ngIf=\"showFindInput\" [current]=\"findCurrent\" [count]=\"findCount\"\r\n             (valueChanged)=\"findKeyWords($event)\" (close)=\"closeFindPanel()\"  [columns]=\"columns\"\r\n             (enterHandler)=\"nextFindValue($event)\"></find-input>\r\n            <ng-container *ngIf=\"bodyTemplate\">\r\n                <tbody class=\"farris-treetable-tbody\" treeTableBody [columns]=\"columns\" [template]=\"bodyTemplate\">\r\n                </tbody>\r\n            </ng-container>\r\n            <ng-container *ngIf=\"!bodyTemplate\">\r\n                <ng-container *ngTemplateOutlet=\"tbody\"></ng-container>\r\n            </ng-container>\r\n        </ng-container>\r\n        <ng-container *ngIf=\"!serializedValue || !serializedValue.length\">\r\n            <tbody class=\"farris-treetable-tbody\">\r\n                <tr class=\"f-table-norecords-row\" style=\"height: 200px\">\r\n                    <td [attr.align]=\"'center'\" class=\"farris-treetable-emptydata\" [attr.colspan]=\"columns.length\">\r\n                        <div class=\"f-table-norecords-content\" >\r\n                            {{ 'treetable.emptyMessage' | locale }}\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </ng-container>\r\n    </table>\r\n</div>\r\n\r\n",
                exportAs: 'treeTable',
                encapsulation: ViewEncapsulation.None,
                changeDetection: ChangeDetectionStrategy.OnPush,
                styles: [`
        .farris-treetable {
            position: relative;
        }
        .resizable-column {
            background-clip: padding-box;
            position: relative;
        }
        .column-resizer {
            display: block;
            position: absolute!important;
            top: 0;
            right: 0;
            margin: 0;
            width: .5em;
            height: 100%;
            padding: 0;
            cursor: col-resize;
            border: 1px solid transparent;
        }
        .column-resizer-helper {
            width: 1px;
            position: absolute;
            z-index: 10;
            display: none;
            border-right: 1px dashed #1890ff;
        }

        .farris-treetable-disabled .farris-treetable-body .table tr{
            opacity: 0.4;
            cursor: not-allowed;
        }
        .farris-treetable-disabled .table tr.farris-table-selectedrow{
            opacity: 1;
            cursor: default;
        }

        .custom-checkbox .custom-control-input:indeterminate~.custom-control-label::after {
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 4 4'%3e%3cpath stroke='%23fff' d='M0 2h4'/%3e%3c/svg%3e");
            background-color: #1890ff;
        }
        .unselectable-text {
            -webkit-user-select: none;
            -moz-user-select: none;
            -o-user-select: none;
            -ms-user-select: none;
            user-select: none
        }
        .search-highlight {
            background-color: #FFFF1F;
        }
        .search-highlight.active{
            background-color: #FF901C;
        }


                
        .f-treetable--fixed-columns .treetable-header-cell {
            vertical-align: middle;
        }

        .f-treetable--fixed-columns .ps__rail-x,
        .f-treetable--fixed-columns .ps__rail-y {
            z-index: 3;
        }

        .f-treetable--fixed-left,
        .f-treetable--fixed-right {
            position: sticky !important;
            z-index: 2;
            background-color: #ffffff;
            overflow: inherit !important;
        }
        .treetable-header-cell.f-treetable--fixed-left,
        .treetable-header-cell.f-treetable--fixed-right {
            background-color: #F4F4F4;
            border-color: #E4E7EF;
            border: none;
            outline-color: #E4E7EF;
            outline-style: solid;
            outline-width: 1px;
        }

        .f-treetable--fixed-columns
            tr
            th.f-treetable--fixed-left[l-tt-shadow-col]::after,
        .f-treetable--fixed-columns td.f-treetable--fixed-left::after,
        .f-treetable--fixed-right::before {
            pointer-events: none;
            content: "";
            width: 36px !important;
            display: inline-block !important;
            position: absolute !important;
            margin-top: 0 !important;
            top: 0 !important;
            height: 100% !important;
            bottom: -1px !important;
            transition: box-shadow 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            background-color: transparent !important;
        }

        .f-treetable--fixed-columns
            tr
            th.f-treetable--fixed-left:not([l-tt-shadow-col])::after {
            content: "";
            position: absolute;
            right: 0;
            top: 50%;
            margin-top: calc(-1.125rem / 2);
            display: block;
            height: 1.125rem;
            width: 1px;
            background-color: #e6e9f0;
            box-shadow: none;
        }

        .f-treetable--fixed-columns
            tr
            th.f-treetable--fixed-left[l-tt-shadow-col]::after,
        .f-treetable--fixed-columns tr td.f-treetable--fixed-left::after {
            right: -36px !important;
        }

        .f-treetable--fixed-columns .f-treetable--fixed-right::before {
            left: -36px !important;
        }

        .f-treetable--fixed-columns .table-hover tbody tr:hover td {
            background-color: #edf5ff;
        }

        .f-treetable--fixed-columns
            .farris-treetable-tbody
            tr.farris-table-selectedrow
            td {
            background-color: #dae9ff!important;
            color: #424347;
        }

        .f-treetable--fixed-columns
            .farris-treetable-tbody
            tr.f-treetable-disable-row
            td {
            background: #fafafc;
        }

        .f-treetable--fixed-columns.table-bordered
            tr
            th.f-treetable--fixed-left[l-tt-shadow-col],
        .f-treetable--fixed-columns.table-bordered tr th.f-treetable--fixed-right,
        .f-treetable--fixed-columns.table-bordered tr td.f-treetable--fixed-left,
        .f-treetable--fixed-columns.table-bordered tr td.f-treetable--fixed-right {
            border-right: 0;
            box-shadow: inset -1px 0px 0px #eaecf3;
        }

        .f-treetable--fixed-columns.table-bordered tr td,
        .f-treetable--fixed-columns.table-bordered tr td {
            border-left: 0;
        }

        .f-treetable--fixed-columns tbody tr:nth-of-type(even) td {
            background-color: #F7F7F7;
        }

    `]
            }] }
];
/** @nocollapse */
TreeTableComponent.ctorParameters = () => [
    { type: TreetableService },
    { type: ElementRef },
    { type: ResizeService },
    { type: Renderer2 },
    { type: CommonUtils },
    { type: ColumnFormatService },
    { type: TTHotkeys },
    { type: ChangeDetectorRef },
    { type: NgZone },
    { type: Injector }
];
TreeTableComponent.propDecorators = {
    width: [{ type: Input }],
    height: [{ type: Input }],
    showFilterBar: [{ type: Input }],
    showSearchField: [{ type: Input }],
    headerHeight: [{ type: Input }],
    headerWrap: [{ type: Input }],
    rowHeight: [{ type: Input }],
    columns: [{ type: Input }],
    groupColumns: [{ type: Input }],
    useGroupHeader: [{ type: Input }],
    fitColumns: [{ type: Input }],
    autoFitColumns: [{ type: Input }],
    searchFields: [{ type: Input }],
    allColumnsTitle: [{ type: Input }],
    showLines: [{ type: Input }],
    showLinesOnHover: [{ type: Input }],
    multiSelect: [{ type: Input }],
    singleSelect: [{ type: Input }],
    showCheckbox: [{ type: Input }],
    idField: [{ type: Input }],
    showBorder: [{ type: Input }],
    showCheckAll: [{ type: Input }],
    showHeader: [{ type: Input }],
    striped: [{ type: Input }],
    hovered: [{ type: Input }],
    disabled: [{ type: Input }],
    disabledRow: [{ type: Input }],
    loadDataType: [{ type: Input }],
    fixedHeader: [{ type: Input }],
    checkOnSelect: [{ type: Input }],
    selectOnCheck: [{ type: Input }],
    onlySelectSelf: [{ type: Input }],
    resizableColumns: [{ type: Input }],
    fit: [{ type: Input }],
    cascadeCheck: [{ type: Input }],
    cascadeDown: [{ type: Input }],
    cascadeUp: [{ type: Input }],
    emptyMessage: [{ type: Input }],
    indentSpacing: [{ type: Input }],
    keepSelect: [{ type: Input }],
    virtualized: [{ type: Input }],
    onlySelectLeaf: [{ type: Input }],
    showIcon: [{ type: Input }],
    leafIcon: [{ type: Input }],
    expandIcon: [{ type: Input }],
    collapseIcon: [{ type: Input }],
    foldIcon: [{ type: Input }],
    unfoldIcon: [{ type: Input }],
    useIconFromData: [{ type: Input }],
    whenDataIconEmptyUseDefault: [{ type: Input }],
    iconField: [{ type: Input }],
    iconCls: [{ type: Input }],
    remoteSort: [{ type: Input }],
    sortName: [{ type: Input }],
    sortOrder: [{ type: Input }],
    multiSort: [{ type: Input }],
    beforeSortColumn: [{ type: Input }],
    rowStyler: [{ type: Input }],
    cellStyler: [{ type: Input }],
    enableFindText: [{ type: Input }],
    findField: [{ type: Input }],
    expandLevel: [{ type: Input }],
    selectValue: [{ type: Input }],
    selectValueChange: [{ type: Output }],
    dblClickExpand: [{ type: Input }],
    selectValues: [{ type: Input }],
    selectValuesChange: [{ type: Output }],
    nowrap: [{ type: Input }],
    checkValues: [{ type: Input }],
    checkValuesChange: [{ type: Output }],
    beforeNodeSelected: [{ type: Input }],
    beforeNodeUnSelected: [{ type: Input }],
    beforeNodeChecked: [{ type: Input }],
    beforeNodeUnChecked: [{ type: Input }],
    beforeCheckAll: [{ type: Input }],
    beforeUnCheckAll: [{ type: Input }],
    beforeClickNode: [{ type: Input }],
    pagination: [{ type: Input }],
    paginationForChildren: [{ type: Input }],
    pagerViewMode: [{ type: Input }],
    pagerOnServer: [{ type: Input }],
    pageList: [{ type: Input }],
    pageIndex: [{ type: Input }],
    pageSize: [{ type: Input }],
    pagerHeight: [{ type: Input }],
    showPageList: [{ type: Input }],
    showPageInfo: [{ type: Input }],
    showPageNumber: [{ type: Input }],
    pagerLabelSize: [{ type: Input }],
    showGotoInput: [{ type: Input }],
    showTotalForChildren: [{ type: Input }],
    total: [{ type: Input }],
    enableContextMenu: [{ type: Input }],
    contextMenuItems: [{ type: Input }],
    beforeShowContextMenu: [{ type: Input }],
    pageSizeChanged: [{ type: Output }],
    pageChanged: [{ type: Output }],
    columnSorted: [{ type: Output }],
    nodeSelected: [{ type: Output }],
    nodeUnSelect: [{ type: Output }],
    nodeChecked: [{ type: Output }],
    nodeUnChecked: [{ type: Output }],
    checkAll: [{ type: Output }],
    unCheckAll: [{ type: Output }],
    search: [{ type: Output }],
    dblClick: [{ type: Output }],
    loadedData: [{ type: Output }],
    expand: [{ type: Output }],
    collapse: [{ type: Output }],
    expandAllNodes: [{ type: Output }],
    collapseAllNodes: [{ type: Output }],
    appendNew: [{ type: Output }],
    removed: [{ type: Output }],
    updated: [{ type: Output }],
    clearSearchValue: [{ type: Output }],
    cellClick: [{ type: Output }],
    childsPageChanged: [{ type: Output }],
    searchValueChange: [{ type: Output }],
    loadedTimer: [{ type: Input }],
    data: [{ type: Input }],
    autoWidth: [{ type: Input }],
    templates: [{ type: ContentChildren, args: [FarrisTemplateDirective,] }],
    columnsRef: [{ type: ContentChildren, args: [TreeTableColumnDirective,] }],
    headerBox: [{ type: ViewChild, args: ['headerBox',] }],
    resizerHelperVC: [{ type: ViewChild, args: ['resizerHelper',] }],
    headerTable: [{ type: ViewChild, args: ['headerTable',] }],
    bodyTable: [{ type: ViewChild, args: ['bodyTable',] }],
    inputGroup: [{ type: ViewChild, args: ['inputGroup',] }],
    psRef: [{ type: ViewChild, args: [PerfectScrollbarComponent,] }],
    allCheckbox: [{ type: ViewChild, args: ['allCheckbox',] }],
    nodesPagerBar: [{ type: ViewChild, args: ['nodespagerbar',] }],
    ctxMenu: [{ type: ViewChild, args: [FarrisContextMenuDirective,] }],
    onResized: [{ type: HostListener, args: ['window:resize',] }]
};
if (false) {
    /** @type {?} */
    TreeTableComponent.prototype.id;
    /**
     * 宽度
     * @type {?}
     */
    TreeTableComponent.prototype.width;
    /**
     * 高度
     * @type {?}
     */
    TreeTableComponent.prototype.height;
    /** @type {?} */
    TreeTableComponent.prototype.showFilterBar;
    /**
     * 显示查询字段
     * @type {?}
     */
    TreeTableComponent.prototype.showSearchField;
    /** @type {?} */
    TreeTableComponent.prototype.headerHeight;
    /**
     * 表头折行
     * @type {?}
     */
    TreeTableComponent.prototype.headerWrap;
    /**
     * 行高
     * @type {?}
     */
    TreeTableComponent.prototype.rowHeight;
    /**
     * 列信息
     * @type {?}
     */
    TreeTableComponent.prototype.columns;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype._groupColumns;
    /**
     * 启用多表头
     * @type {?}
     */
    TreeTableComponent.prototype.useGroupHeader;
    /** @type {?} */
    TreeTableComponent.prototype.fitColumns;
    /** @type {?} */
    TreeTableComponent.prototype.autoFitColumns;
    /** @type {?} */
    TreeTableComponent.prototype.searchFields;
    /** @type {?} */
    TreeTableComponent.prototype.allColumnsTitle;
    /**
     * 显示连接线，默认为 false
     * @type {?}
     */
    TreeTableComponent.prototype.showLines;
    /** @type {?} */
    TreeTableComponent.prototype.showLinesOnHover;
    /**
     * 是否启用多选。 默认为单选
     * @type {?}
     */
    TreeTableComponent.prototype.multiSelect;
    /** @type {?} */
    TreeTableComponent.prototype.singleSelect;
    /**
     * 启用多选后，是否显示checkbox
     * @type {?}
     */
    TreeTableComponent.prototype.showCheckbox;
    /**
     * 主键字段
     * @type {?}
     */
    TreeTableComponent.prototype.idField;
    /**
     * 显示边框线
     * @type {?}
     */
    TreeTableComponent.prototype.showBorder;
    /** @type {?} */
    TreeTableComponent.prototype.showCheckAll;
    /** @type {?} */
    TreeTableComponent.prototype.showHeader;
    /**
     * 启用斑马线
     * @type {?}
     */
    TreeTableComponent.prototype.striped;
    /**
     * 启用鼠标划过效果
     * @type {?}
     */
    TreeTableComponent.prototype.hovered;
    /**
     * 禁用。 禁用时不允许选中行
     * @type {?}
     */
    TreeTableComponent.prototype.disabled;
    /**
     * 禁卡节点选中
     * @type {?}
     */
    TreeTableComponent.prototype.disabledRow;
    /**
     * 数据加载方式; 默认值 为 all
     * - all: 全部加载
     * - async: 分层加载
     * @type {?}
     */
    TreeTableComponent.prototype.loadDataType;
    /**
     * 固定表头
     * @type {?}
     */
    TreeTableComponent.prototype.fixedHeader;
    /**
     * 当多选时，选中当前行并钩选
     * @type {?}
     */
    TreeTableComponent.prototype.checkOnSelect;
    /**
     * 当多选时，钩选并选中当前行
     * @type {?}
     */
    TreeTableComponent.prototype.selectOnCheck;
    /**
     * 启用多选时，此属性为true 时，仅当前行选中
     * @type {?}
     */
    TreeTableComponent.prototype.onlySelectSelf;
    /**
     * 启用列宽调整
     * @type {?}
     */
    TreeTableComponent.prototype.resizableColumns;
    /**
     * 设置为true时自适应父容的尺寸
     * @type {?}
     */
    TreeTableComponent.prototype.fit;
    /**
     * 启用级联选中功能
     * @type {?}
     */
    TreeTableComponent.prototype.cascadeCheck;
    /**
     * 向下级联选中
     * @type {?}
     */
    TreeTableComponent.prototype.cascadeDown;
    /**
     * 向上级联选中
     * @type {?}
     */
    TreeTableComponent.prototype.cascadeUp;
    /**
     * 空数据时，显示的提示文本
     * @type {?}
     */
    TreeTableComponent.prototype.emptyMessage;
    /**
     * 缩进间距，默认为 16px
     * @type {?}
     */
    TreeTableComponent.prototype.indentSpacing;
    /**
     * 单击行选中后，在次点击不会被取消选中状态;
     * @type {?}
     */
    TreeTableComponent.prototype.keepSelect;
    /**
     * 虚拟加载
     * @type {?}
     */
    TreeTableComponent.prototype.virtualized;
    /**
     * 仅允许选择叶子节点
     * - default: 应用服务器端传回的设置，如果服务器端没有设置，则与 no 保持一至；
     * - yes: 如果客户端设置为 `yes`, 服务器端的设置失效；
     * - no: 允许选择所有节点；服务器端设置失效
     * @type {?}
     */
    TreeTableComponent.prototype.onlySelectLeaf;
    /**
     * 显示图标
     * @type {?}
     */
    TreeTableComponent.prototype.showIcon;
    /**
     * 叶子节点图标
     * @type {?}
     */
    TreeTableComponent.prototype.leafIcon;
    /**
     * 节点展开图标
     * @type {?}
     */
    TreeTableComponent.prototype.expandIcon;
    /**
     * 节点折叠图标
     * @type {?}
     */
    TreeTableComponent.prototype.collapseIcon;
    /** @type {?} */
    TreeTableComponent.prototype.foldIcon;
    /** @type {?} */
    TreeTableComponent.prototype.unfoldIcon;
    /**
     * 启用节点图标从数据中获取。 默认为 false
     * @type {?}
     */
    TreeTableComponent.prototype.useIconFromData;
    /**
     * 当数据源中icon未设置时使用内置ICON. 默认为 true
     * @type {?}
     */
    TreeTableComponent.prototype.whenDataIconEmptyUseDefault;
    /**
     * 从数据源字段中获取图标
     * @type {?}
     */
    TreeTableComponent.prototype.iconField;
    /**
     * 图标自定义样式
     * @type {?}
     */
    TreeTableComponent.prototype.iconCls;
    /**
     * 启用远端排序
     * @type {?}
     */
    TreeTableComponent.prototype.remoteSort;
    /**
     * 排序字段
     * @type {?}
     */
    TreeTableComponent.prototype.sortName;
    /**
     * 排序方式 asc | desc
     * @type {?}
     */
    TreeTableComponent.prototype.sortOrder;
    /**
     * 允许多列排序
     * @type {?}
     */
    TreeTableComponent.prototype.multiSort;
    /** @type {?} */
    TreeTableComponent.prototype.beforeSortColumn;
    /** @type {?} */
    TreeTableComponent.prototype.rowStyler;
    /** @type {?} */
    TreeTableComponent.prototype.cellStyler;
    /**
     * 启用前端文本查找
     * @type {?}
     */
    TreeTableComponent.prototype.enableFindText;
    /**
     * 文本查询字段, 弃用
     * @type {?}
     */
    TreeTableComponent.prototype.findField;
    /** @type {?} */
    TreeTableComponent.prototype.expandLevel;
    /** @type {?} */
    TreeTableComponent.prototype.selectValue;
    /** @type {?} */
    TreeTableComponent.prototype.selectValueChange;
    /**
     * 启用双击展开节点
     * @type {?}
     */
    TreeTableComponent.prototype.dblClickExpand;
    /**
     * 选中节点ID数组
     * @type {?}
     */
    TreeTableComponent.prototype.selectValues;
    /** @type {?} */
    TreeTableComponent.prototype.selectValuesChange;
    /**
     * 是否禁止折行，默认不折行
     * @type {?}
     */
    TreeTableComponent.prototype.nowrap;
    /** @type {?} */
    TreeTableComponent.prototype.checkValues;
    /** @type {?} */
    TreeTableComponent.prototype.checkValuesChange;
    /** @type {?} */
    TreeTableComponent.prototype.beforeNodeSelected;
    /** @type {?} */
    TreeTableComponent.prototype.beforeNodeUnSelected;
    /** @type {?} */
    TreeTableComponent.prototype.beforeNodeChecked;
    /** @type {?} */
    TreeTableComponent.prototype.beforeNodeUnChecked;
    /** @type {?} */
    TreeTableComponent.prototype.beforeCheckAll;
    /** @type {?} */
    TreeTableComponent.prototype.beforeUnCheckAll;
    /** @type {?} */
    TreeTableComponent.prototype.beforeClickNode;
    /**
     * 分页信息
     * @type {?}
     */
    TreeTableComponent.prototype.pagination;
    /**
     * 分页加载子节点数据
     * @type {?}
     */
    TreeTableComponent.prototype.paginationForChildren;
    /**
     * 分页条显示模式， default, simple
     * @type {?}
     */
    TreeTableComponent.prototype.pagerViewMode;
    /**
     * 启用服务器端分页
     * @type {?}
     */
    TreeTableComponent.prototype.pagerOnServer;
    /**
     * 每页记录数
     * @type {?}
     */
    TreeTableComponent.prototype.pageList;
    /**
     * 当前页码
     * @type {?}
     */
    TreeTableComponent.prototype.pageIndex;
    /**
     * 每页记录数
     * @type {?}
     */
    TreeTableComponent.prototype.pageSize;
    /**
     * 分页区高度
     * @type {?}
     */
    TreeTableComponent.prototype.pagerHeight;
    /**
     * 显示每页记录数
     * @type {?}
     */
    TreeTableComponent.prototype.showPageList;
    /**
     * 显示分页信息
     * @type {?}
     */
    TreeTableComponent.prototype.showPageInfo;
    /**
     * 显示页码
     * @type {?}
     */
    TreeTableComponent.prototype.showPageNumber;
    /**
     * 显示页码最大数量
     * @type {?}
     */
    TreeTableComponent.prototype.pagerLabelSize;
    /**
     * 显示页码输入框
     * @type {?}
     */
    TreeTableComponent.prototype.showGotoInput;
    /**
     * 子节点分页是否显示总记录数，默认 false
     * @type {?}
     */
    TreeTableComponent.prototype.showTotalForChildren;
    /**
     * 总记录数
     * @type {?}
     */
    TreeTableComponent.prototype.total;
    /** @type {?} */
    TreeTableComponent.prototype.enableContextMenu;
    /** @type {?} */
    TreeTableComponent.prototype.contextMenuItems;
    /** @type {?} */
    TreeTableComponent.prototype.beforeShowContextMenu;
    /** @type {?} */
    TreeTableComponent.prototype.pageSizeChanged;
    /** @type {?} */
    TreeTableComponent.prototype.pageChanged;
    /**
     * 排序后
     * @type {?}
     */
    TreeTableComponent.prototype.columnSorted;
    /**
     * 选中事件
     * @type {?}
     */
    TreeTableComponent.prototype.nodeSelected;
    /**
     * 取消选中事件
     * @type {?}
     */
    TreeTableComponent.prototype.nodeUnSelect;
    /**
     * 钩选
     * @type {?}
     */
    TreeTableComponent.prototype.nodeChecked;
    /**
     * 取消钩选
     * @type {?}
     */
    TreeTableComponent.prototype.nodeUnChecked;
    /**
     * 全选事件
     * @type {?}
     */
    TreeTableComponent.prototype.checkAll;
    /**
     * 取消全选
     * @type {?}
     */
    TreeTableComponent.prototype.unCheckAll;
    /**
     * 查询
     * @type {?}
     */
    TreeTableComponent.prototype.search;
    /** @type {?} */
    TreeTableComponent.prototype.dblClick;
    /** @type {?} */
    TreeTableComponent.prototype.loadedData;
    /** @type {?} */
    TreeTableComponent.prototype.expand;
    /** @type {?} */
    TreeTableComponent.prototype.collapse;
    /** @type {?} */
    TreeTableComponent.prototype.expandAllNodes;
    /** @type {?} */
    TreeTableComponent.prototype.collapseAllNodes;
    /** @type {?} */
    TreeTableComponent.prototype.appendNew;
    /** @type {?} */
    TreeTableComponent.prototype.removed;
    /** @type {?} */
    TreeTableComponent.prototype.updated;
    /** @type {?} */
    TreeTableComponent.prototype.clearSearchValue;
    /** @type {?} */
    TreeTableComponent.prototype.cellClick;
    /** @type {?} */
    TreeTableComponent.prototype.childsPageChanged;
    /** @type {?} */
    TreeTableComponent.prototype.searchValueChange;
    /** @type {?} */
    TreeTableComponent.prototype.loadedTimer;
    /** @type {?} */
    TreeTableComponent.prototype.serializedValue;
    /** @type {?} */
    TreeTableComponent.prototype._data;
    /** @type {?} */
    TreeTableComponent.prototype.isLoadNewDataSetEmpty;
    /**
     * 根据内容自动宽度，默认 false;
     * 此属性开启后，自动列宽失效
     * @type {?}
     */
    TreeTableComponent.prototype.autoWidth;
    /** @type {?} */
    TreeTableComponent.prototype.templates;
    /** @type {?} */
    TreeTableComponent.prototype.columnsRef;
    /** @type {?} */
    TreeTableComponent.prototype.headerBox;
    /** @type {?} */
    TreeTableComponent.prototype.resizerHelperVC;
    /** @type {?} */
    TreeTableComponent.prototype.headerTable;
    /** @type {?} */
    TreeTableComponent.prototype.bodyTable;
    /** @type {?} */
    TreeTableComponent.prototype.inputGroup;
    /** @type {?} */
    TreeTableComponent.prototype.psRef;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.headerCheckboxCmp;
    /** @type {?} */
    TreeTableComponent.prototype.nodesPagerBar;
    /** @type {?} */
    TreeTableComponent.prototype.ctxMenu;
    /**
     * 表头模板
     * @type {?}
     */
    TreeTableComponent.prototype.headerTemplate;
    /**
     * 表体模板
     * @type {?}
     */
    TreeTableComponent.prototype.bodyTemplate;
    /**
     * 选中项集合
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype._selections;
    /**
     * 选中项索引
     * @type {?}
     */
    TreeTableComponent.prototype.selectRowIndex;
    /**
     * 选中当前行
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype._selectedRow;
    /**
     * 钩选的记录集合
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype._checkeds;
    /** @type {?} */
    TreeTableComponent.prototype.containerElement;
    /** @type {?} */
    TreeTableComponent.prototype.lastResizerHelperX;
    /** @type {?} */
    TreeTableComponent.prototype.searchData;
    /** @type {?} */
    TreeTableComponent.prototype.scorllBodyHeight;
    /** @type {?} */
    TreeTableComponent.prototype.searchHandle;
    /** @type {?} */
    TreeTableComponent.prototype.searchButtonText;
    /**
     * 显示查询工具条
     * @type {?}
     */
    TreeTableComponent.prototype.showFindInput;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.isDataChanged;
    /** @type {?} */
    TreeTableComponent.prototype.scrollLoader;
    /** @type {?} */
    TreeTableComponent.prototype.topHideHeight;
    /** @type {?} */
    TreeTableComponent.prototype.bottomHideHeight;
    /** @type {?} */
    TreeTableComponent.prototype.state;
    /**
     * 待查询的文本
     * @type {?}
     */
    TreeTableComponent.prototype.findValue;
    /**
     * 结果总数
     * @type {?}
     */
    TreeTableComponent.prototype.findCount;
    /**
     * 当前索引
     * @type {?}
     */
    TreeTableComponent.prototype.findCurrent;
    /**
     * 存储文本查询结果
     * @type {?}
     */
    TreeTableComponent.prototype.findResult;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.ro;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.findKeysHandler;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype._hotKeys;
    /** @type {?} */
    TreeTableComponent.prototype.localeService;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.idService;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.styleSheetId;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.styleElement;
    /** @type {?} */
    TreeTableComponent.prototype.fast;
    /** @type {?} */
    TreeTableComponent.prototype.paginationOptions;
    /** @type {?} */
    TreeTableComponent.prototype.selectNodeChangedSubject;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype._UUID;
    /** @type {?} */
    TreeTableComponent.prototype.fixedColumns;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.destroy$;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.farrisInstances;
    /** @type {?} */
    TreeTableComponent.prototype.difference;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.debugSer;
    /** @type {?} */
    TreeTableComponent.prototype.onBeforeShowContextMenu;
    /** @type {?} */
    TreeTableComponent.prototype.ttService;
    /** @type {?} */
    TreeTableComponent.prototype.el;
    /** @type {?} */
    TreeTableComponent.prototype.resizeSer;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.renderer;
    /** @type {?} */
    TreeTableComponent.prototype.utils;
    /** @type {?} */
    TreeTableComponent.prototype.colFormatSer;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.shortcuts;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.cdRef;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.ngZone;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.injector;
}
export class TTBodyComponent {
    /**
     * @param {?} tt
     */
    constructor(tt) {
        this.tt = tt;
    }
}
TTBodyComponent.decorators = [
    { type: Component, args: [{
                selector: '[treeTableBody]',
                template: `
        <ng-template ngFor let-serializedNode let-rowIndex="index" [ngForOf]="tt.serializedValue">
            <ng-container *ngIf="serializedNode.visible">
                <ng-container
                    *ngTemplateOutlet="template;
                        context: {$implicit: serializedNode, node: serializedNode.node,
                        rowData: serializedNode.node.data, rowIndex: rowIndex, columns: columns}">
                </ng-container>
            </ng-container>
        </ng-template>
    `
            }] }
];
/** @nocollapse */
TTBodyComponent.ctorParameters = () => [
    { type: TreeTableComponent }
];
TTBodyComponent.propDecorators = {
    columns: [{ type: Input }],
    template: [{ type: Input }]
};
if (false) {
    /**
     * 列集合
     * @type {?}
     */
    TTBodyComponent.prototype.columns;
    /**
     * 表体模板
     * @type {?}
     */
    TTBodyComponent.prototype.template;
    /** @type {?} */
    TTBodyComponent.prototype.tt;
}
// [style.marginLeft]="rowNode.level * 16 + 'px'"
/**
 * 树节点展开折叠
 */
export class TreeTableTogglerComponent {
    /**
     * @param {?} tt
     * @param {?} ngzone
     * @param {?} render
     */
    constructor(tt, ngzone, render) {
        this.tt = tt;
        this.ngzone = ngzone;
        this.render = render;
        this.cls = true;
        this.showLines = false;
        this.indentSpacing = 16;
        this.treeNodeIcon = {};
        this.isShowTriangle = false;
        this.noChilds = false;
        this.subscriptions = [];
    }
    /**
     * @return {?}
     */
    get offsetWidth() {
        return this.togglerEl.nativeElement.parentElement.offsetWidth;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.treeNodeIcon = this.tt.getTreeIcon(this.rowNode.node);
        this.isShowTriangle = this.showTriangle();
        this.noChilds = this.hasChildren();
        /** @type {?} */
        const expandSub = this.tt.expand.subscribe((/**
         * @param {?} node
         * @return {?}
         */
        (node) => {
            if (this.rowNode.id === node.data[this.tt.idField]) {
                this.updateIcon(this.rowNode.node);
                if (this.tt.psRef) {
                    this.tt.psRef.directiveRef.update();
                }
                this.tt.detectChanges();
            }
        }));
        /** @type {?} */
        const collapseSub = this.tt.collapse.subscribe((/**
         * @param {?} node
         * @return {?}
         */
        (node) => {
            if (this.rowNode.id === node.data[this.tt.idField]) {
                this.updateIcon(this.rowNode.node);
                if (this.tt.psRef) {
                    this.tt.psRef.directiveRef.update();
                }
                this.tt.detectChanges();
            }
        }));
        /** @type {?} */
        const addNewSub = this.tt.appendNew.subscribe((/**
         * @param {?} e
         * @return {?}
         */
        (e) => {
            if (e.parent) {
                if (this.rowNode.id === e.parent.data[this.tt.idField]) {
                    if (this.rowNode.node.leaf || this.rowNode.node.leaf === undefined) {
                        this.rowNode.node.leaf = false;
                    }
                }
                this.updateIcon(this.rowNode.node);
            }
        }));
        this.subscriptions = [expandSub, collapseSub, addNewSub];
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    ngOnChanges(changes) {
        if (changes.showLines && !changes.showLines.isFirstChange()) {
            if (this.showLines) {
                this.render.setStyle(this.togglerEl.nativeElement, 'display', this.isShowTriangle ? '' : 'none');
            }
            else {
                this.render.removeStyle(this.togglerEl.nativeElement, 'display');
            }
            this.reSetLines();
        }
        if (changes.rowNode && !changes.rowNode.isFirstChange()) {
            this.updateIcon(this.rowNode.node);
            // if (changes.rowNode.currentValue.node.children) {
            //     if (!!changes.rowNode.currentValue.node.children.length !== !!changes.rowNode.previousValue.node.children.length) {
            //         this.reSetLines();
            //     }
            // }
            if (this.tt.showLines) {
                /** @type {?} */
                let currenChildrenLength = 0;
                /** @type {?} */
                let previousChildrenLength = 0;
                if (changes.rowNode.currentValue && changes.rowNode.currentValue.node.children) {
                    currenChildrenLength = changes.rowNode.currentValue.node.children.length;
                }
                if (changes.rowNode.previousValue && changes.rowNode.previousValue.node.children) {
                    previousChildrenLength = changes.rowNode.previousValue.node.children.length;
                }
                if (currenChildrenLength != previousChildrenLength || (!currenChildrenLength && !previousChildrenLength)) {
                    this.reSetLines();
                }
            }
        }
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        if (!this.tt.bodyTemplate && this.showLines) {
            setTimeout((/**
             * @return {?}
             */
            () => {
                this.reSetLines();
            }));
        }
    }
    /**
     * @return {?}
     */
    ngDoCheck() {
        // this.isShowTriangle = this.showTriangle();
    }
    /**
     * @return {?}
     */
    ngAfterViewChecked() {
        // if (this.tt && this.tt.data) {
        //     this.reSetLines();
        // }
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        this.unAllSubscriptions();
    }
    /**
     * @private
     * @return {?}
     */
    unAllSubscriptions() {
        this.subscriptions.forEach((/**
         * @param {?} s
         * @return {?}
         */
        s => {
            s.unsubscribe();
        }));
        this.subscriptions = [];
    }
    /**
     * @return {?}
     */
    hasChildren() {
        /** @type {?} */
        const tn = this.rowNode.node;
        return tn.leaf === false || this.rowNode.level !== 0 || (tn.children && tn.children.length > 0);
    }
    /**
     * @return {?}
     */
    showTriangle() {
        /** @type {?} */
        const tn = this.rowNode.node;
        if (this.tt.loadDataType === 'all') {
            return tn.leaf === false || (tn.children && tn.children.length > 0);
        }
        else {
            return tn.leaf === false;
        }
    }
    /**
     * @return {?}
     */
    reSetLines() {
        if (this.togglerEl) {
            /** @type {?} */
            const parentEl = this.togglerEl.nativeElement.closest('.treetable-cell-content');
            if (parentEl) {
                /** @type {?} */
                const lineEls = parentEl.querySelectorAll('.treetable-lines');
                for (let k = 0; k < lineEls.length; k++) {
                    lineEls[k].remove();
                }
            }
        }
        this._renderLines();
    }
    /**
     * @private
     * @return {?}
     */
    _renderLines() {
        if (!this.tt.bodyTemplate) {
            if (this.showLines) {
                this.renderLines();
            }
            else {
                // this.noLineStyle();
            }
        }
        else {
            /*
            if (this.togglerEl) {
                if (this.togglerEl.nativeElement.closest('tr')) {
                    const tds = this.togglerEl.nativeElement.closest('tr').querySelectorAll('td');
                    Array.from(tds).forEach(n => {
                        this.render.setStyle(n, 'padding', '0.25rem 0.75rem');
                    });
                }
            } */
        }
    }
    /**
     * @private
     * @return {?}
     */
    noLineStyle() {
        // this.cls = false;
        if (this.togglerEl) {
            // this.render.setStyle(this.togglerEl.nativeElement, 'margin-left', `${this.rowNode.level * this.indentSpacing}px`);
            this.render.setStyle(this.togglerEl.nativeElement, 'visibility', this.isShowTriangle ? 'visible' : 'hidden');
            this.render.removeStyle(this.togglerEl.nativeElement, 'display');
        }
    }
    /**
     * @private
     * @return {?}
     */
    renderLines() {
        /** @type {?} */
        const len = this.rowNode.level;
        if (!this.togglerEl) {
            return;
        }
        /** @type {?} */
        const parentEl = this.togglerEl.nativeElement.closest('.treetable-cell-content');
        if (!parentEl) {
            return;
        }
        /** @type {?} */
        const referEl = this.togglerEl.nativeElement.parentElement;
        if (len === 0 && !this.showTriangle()) {
            this.createLeafNodeLines(referEl, parentEl, true);
        }
        for (let i = 0; i < len; i++) {
            parentEl.insertBefore(this.newLineElement(), referEl);
            /** @type {?} */
            const nearLine = this.newLineElement(false);
            parentEl.insertBefore(nearLine, referEl);
            /** @type {?} */
            const isLeaf = !this.showTriangle();
            if (isLeaf && i === len - 1) {
                this.createLeafNodeLines(referEl, parentEl);
            }
        }
    }
    /**
     * @private
     * @param {?=} border
     * @return {?}
     */
    newLineElement(border = true) {
        /** @type {?} */
        const newLineEl = this.render.createElement('div');
        this.render.addClass(newLineEl, 'treetable-lines');
        if (this.showLines) {
            if (border) {
                this.render.addClass(newLineEl, 'treetable-lines-border-color');
            }
        }
        return newLineEl;
    }
    /**
     * 构造 ∟ or ├
     * @private
     * @param {?} containerEl
     * @param {?} parentEl
     * @param {?=} isTopNode
     * @return {?}
     */
    createLeafNodeLines(containerEl, parentEl, isTopNode = false) {
        // ├
        // <div class="treetable-lines" style="border-color: rgb(204, 204, 204);"></div>
        // <div class="treetable-lines treetable-lines-leaf" style="border-color: transparent;">
        //     <div class="normal"></div>
        // </div>
        // ├
        // <div class="treetable-lines" style="border-color: rgb(204, 204, 204);"></div>
        // <div class="treetable-lines treetable-lines-leaf" style="border-color: transparent;">
        //     <div class="normal"></div>
        // </div>
        // ∟
        // <div class="treetable-lines" style="border-color: transparent"></div>
        // <div class="treetable-lines treetable-lines-leaf" style="border-color: transparent;">
        //     <div style="corner"></div>
        // </div>
        /** @type {?} */
        const l1 = this.newLineElement();
        /** @type {?} */
        const l2 = this.newLineElement(false);
        this.render.addClass(l2, 'treetable-lines-leaf');
        /** @type {?} */
        const dessert = this.render.createElement('div');
        if (this.showLines) {
            /** @type {?} */
            let cls = 'normal';
            if (this.rowNode.last) {
                cls = 'corner';
                this.render.removeClass(l1, 'treetable-lines-border-color');
            }
            l2.appendChild(dessert);
            this.render.addClass(dessert, cls);
            this.render.addClass(dessert, 'treetable-lines-border-color');
        }
        parentEl.insertBefore(l1, containerEl);
        parentEl.insertBefore(l2, containerEl);
        if (isTopNode) {
            this.render.setStyle(l2, 'marginRight', '3px');
        }
    }
    /**
     * @private
     * @return {?}
     */
    registerClickEvent() {
        if (this.togglerEl) {
            this.render.listen(this.togglerEl.nativeElement, 'click', this.onClick.bind(this));
        }
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onClick(event) {
        event.stopPropagation();
        event.preventDefault();
        if (this.rowNode.node['showLoading']) {
            return false;
        }
        if (!this.tt.disabled) {
            this.tt.toggleExpand(this.rowNode.node);
        }
        return false;
    }
    /**
     * @private
     * @param {?} treeNode
     * @return {?}
     */
    updateIcon(treeNode) {
        this.isShowTriangle = this.showTriangle();
        this.noChilds = this.hasChildren();
        this.treeNodeIcon = this.tt.getTreeIcon(treeNode);
    }
}
TreeTableTogglerComponent.decorators = [
    { type: Component, args: [{
                selector: 'farris-treeTableToggler',
                template: `
    <a href="javascript:void(0)" #toggler
            class="treenode-fold" *ngIf="showLines"
            [ngClass]="rowNode.node.expanded ? tt.unfoldIcon : tt.foldIcon"
            [style.display]="isShowTriangle ? '' : 'none'"
            (click)="onClick($event)"></a>

    <a href="javascript:void(0)" #toggler
            class="treenode-fold"  *ngIf="!showLines"
            [ngClass]="rowNode.node.expanded ? tt.unfoldIcon : tt.foldIcon"
            [style.marginLeft.px]="rowNode.level * indentSpacing"
            [style.visibility]="isShowTriangle ? 'visible' : 'hidden'"
            (click)="onClick($event)"></a>
    <span class="tree-icon-line" [style.display]="isShowTriangle && showLines? '' : 'none'"></span>
    <span [style.display]="(tt.showIcon && rowNode.node.showIcon) ? 'inline-block': 'none'" class="treenode-icon" [ngClass]="treeNodeIcon"></span>

    <tt-checkbox  [rowNode]="rowNode" *ngIf="tt.showCheckbox" [disabled]="disabled" [checked]="rowNode.isChecked" ></tt-checkbox>
    `,
                encapsulation: ViewEncapsulation.None,
                exportAs: 'ttToggler'
            }] }
];
/** @nocollapse */
TreeTableTogglerComponent.ctorParameters = () => [
    { type: TreeTableComponent },
    { type: NgZone },
    { type: Renderer2 }
];
TreeTableTogglerComponent.propDecorators = {
    cls: [{ type: HostBinding, args: ['class.f-cmp-treetable-toggler',] }],
    rowNode: [{ type: Input }],
    disabled: [{ type: Input }],
    showLines: [{ type: Input }],
    indentSpacing: [{ type: Input }],
    togglerEl: [{ type: ViewChild, args: ['toggler',] }]
};
if (false) {
    /** @type {?} */
    TreeTableTogglerComponent.prototype.cls;
    /**
     * 树节点
     * @type {?}
     */
    TreeTableTogglerComponent.prototype.rowNode;
    /** @type {?} */
    TreeTableTogglerComponent.prototype.disabled;
    /** @type {?} */
    TreeTableTogglerComponent.prototype.showLines;
    /** @type {?} */
    TreeTableTogglerComponent.prototype.indentSpacing;
    /** @type {?} */
    TreeTableTogglerComponent.prototype.treeNodeIcon;
    /** @type {?} */
    TreeTableTogglerComponent.prototype.isShowTriangle;
    /** @type {?} */
    TreeTableTogglerComponent.prototype.noChilds;
    /** @type {?} */
    TreeTableTogglerComponent.prototype.subscriptions;
    /** @type {?} */
    TreeTableTogglerComponent.prototype.togglerEl;
    /** @type {?} */
    TreeTableTogglerComponent.prototype.tt;
    /**
     * @type {?}
     * @private
     */
    TreeTableTogglerComponent.prototype.ngzone;
    /**
     * @type {?}
     * @private
     */
    TreeTableTogglerComponent.prototype.render;
}
/**
 * 选中行组件
 */
export class TreeTableSelectRowDirective {
    /**
     * @param {?} tt
     * @param {?} el
     * @param {?} render
     * @param {?} ngZone
     */
    constructor(tt, el, render, ngZone) {
        this.tt = tt;
        this.el = el;
        this.render = render;
        this.ngZone = ngZone;
        this.prevent = false;
        this.delay = 0;
        this.subscription = this.tt.selectNodeChangedSubject.subscribe((/**
         * @param {?} ids
         * @return {?}
         */
        (ids) => {
            if (ids && this.rowNode) {
                /** @type {?} */
                const idArr = ids.split(',');
                if (idArr.indexOf(this.rowNode.id) > -1) {
                    this.toggleClass();
                    this.rowNode.node['elementRef'] = this.el;
                }
            }
        }));
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        // this.rowNode.node.selectable = !this.selectRowDisabled;
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    ngOnChanges(changes) {
        // if (changes.selectRowDisabled && !changes.selectRowDisabled.isFirstChange()) {
        //     this.rowNode.node.selectable = !changes.selectRowDisabled.currentValue;
        // }
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        if (this.subscription) {
            this.subscription.unsubscribe();
            this.subscription = null;
        }
    }
    /**
     * @return {?}
     */
    ngDoCheck() {
        if (this.tt.bodyTemplate) {
            if (!this.tt.isSelected(this.rowNode.node)) {
                this.render.removeClass(this.el.nativeElement, 'farris-table-selectedrow');
            }
        }
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onclick(event) {
        if (this.isEnabled()) {
            // this.rowClick(event);
            if (this.delay !== 0) {
                if (!this.prevent) {
                    this.prevent = true;
                    this.timer = setTimeout((/**
                     * @return {?}
                     */
                    () => {
                        this.rowClick(event);
                        this.prevent = false;
                    }), this.delay);
                }
            }
            else {
                this.rowClick(event);
            }
        }
        // event.stopPropagation();
    }
    /**
     * @return {?}
     */
    isEnabled() {
        return !this.tt.disabled && this.selectRowDisabled !== true;
    }
    /**
     * @private
     * @param {?} event
     * @return {?}
     */
    rowClick(event) {
        event.stopPropagation();
        this.tt.beforeClickNode({ instance: this.tt, rowNode: this.rowNode, event, type: 'row' }).subscribe((/**
         * @param {?} e
         * @return {?}
         */
        (e) => {
            if (!e) {
                return;
            }
            this.tt.handleRowClick({
                originalEvent: event,
                rowNode: this.rowNode,
                rowIndex: this.rowIndex
            });
            this.ngZone.runOutsideAngular((/**
             * @return {?}
             */
            () => {
                this.toggleClass();
            }));
        }));
    }
    /**
     * @return {?}
     */
    toggleClass() {
        if (!this.tt.bodyTemplate) {
            if (this.tt.isSelected(this.rowNode.node)) {
                if (this.tt.singleSelect) {
                    this.tt.el.nativeElement.querySelectorAll('.farris-treetable-tbody>tr.farris-table-selectedrow').forEach((/**
                     * @param {?} n
                     * @return {?}
                     */
                    n => {
                        this.render.removeClass(n, 'farris-table-selectedrow');
                    }));
                }
                this.render.addClass(this.el.nativeElement, 'farris-table-selectedrow');
            }
            else {
                if (!this.tt.keepSelect) {
                    this.render.removeClass(this.el.nativeElement, 'farris-table-selectedrow');
                }
            }
        }
    }
}
TreeTableSelectRowDirective.decorators = [
    { type: Directive, args: [{
                selector: '[selectRow]',
                exportAs: 'row'
            },] }
];
/** @nocollapse */
TreeTableSelectRowDirective.ctorParameters = () => [
    { type: TreeTableComponent },
    { type: ElementRef },
    { type: Renderer2 },
    { type: NgZone }
];
TreeTableSelectRowDirective.propDecorators = {
    rowNode: [{ type: Input, args: ['selectRow',] }],
    rowIndex: [{ type: Input }],
    selectRowDisabled: [{ type: Input }],
    delay: [{ type: Input }],
    onclick: [{ type: HostListener, args: ['click', ['$event'],] }]
};
if (false) {
    /** @type {?} */
    TreeTableSelectRowDirective.prototype.rowNode;
    /** @type {?} */
    TreeTableSelectRowDirective.prototype.rowIndex;
    /** @type {?} */
    TreeTableSelectRowDirective.prototype.selectRowDisabled;
    /** @type {?} */
    TreeTableSelectRowDirective.prototype.subscription;
    /** @type {?} */
    TreeTableSelectRowDirective.prototype.prevent;
    /** @type {?} */
    TreeTableSelectRowDirective.prototype.timer;
    /** @type {?} */
    TreeTableSelectRowDirective.prototype.delay;
    /** @type {?} */
    TreeTableSelectRowDirective.prototype.tt;
    /**
     * @type {?}
     * @private
     */
    TreeTableSelectRowDirective.prototype.el;
    /**
     * @type {?}
     * @private
     */
    TreeTableSelectRowDirective.prototype.render;
    /**
     * @type {?}
     * @private
     */
    TreeTableSelectRowDirective.prototype.ngZone;
}
/**
 * 表头全选组件
 */
export class TreeTableHeaderCheckboxComponent {
    /**
     * @param {?} tt
     * @param {?} ttService
     */
    constructor(tt, ttService) {
        this.tt = tt;
        this.ttService = ttService;
        this.checkedChange = new EventEmitter();
    }
    /**
     * @return {?}
     */
    ngOnInit() { }
    /**
     * @param {?} event
     * @return {?}
     */
    handleClick(event) {
        if (!this.disabled && !this.tt.disabled) {
            /** @type {?} */
            const beforeEvent = !this.checked ? this.tt.beforeCheckAll : this.tt.beforeUnCheckAll;
            beforeEvent({ instance: this.tt, checked: !this.checked }).subscribe((/**
             * @param {?} e
             * @return {?}
             */
            e => {
                // 全选功能
                this.chkAll.nativeElement.indeterminate = false;
                this.checked = !this.checked;
                this.tt.toggleNodesWithCheckbox(event, this.checked);
            }));
        }
        event.stopPropagation();
        return false;
    }
}
TreeTableHeaderCheckboxComponent.decorators = [
    { type: Component, args: [{
                selector: 'tt-header-checkbox',
                template: `
    <div class="custom-control custom-checkbox  custom-control-inline tt-checkbox" style="top: -2px;">
        <input type="checkbox" #chkAll class="custom-control-input"  [checked]="checked">
        <label class="custom-control-label" (click)="handleClick($event)"></label>
    </div>
    `,
                styles: [`
        :host {
            vertical-align: middle;
        }
        `]
            }] }
];
/** @nocollapse */
TreeTableHeaderCheckboxComponent.ctorParameters = () => [
    { type: TreeTableComponent },
    { type: TreetableService }
];
TreeTableHeaderCheckboxComponent.propDecorators = {
    checked: [{ type: Input }],
    disabled: [{ type: Input }],
    checkedChange: [{ type: Output }],
    chkAll: [{ type: ViewChild, args: ['chkAll',] }]
};
if (false) {
    /** @type {?} */
    TreeTableHeaderCheckboxComponent.prototype.checked;
    /** @type {?} */
    TreeTableHeaderCheckboxComponent.prototype.disabled;
    /** @type {?} */
    TreeTableHeaderCheckboxComponent.prototype.checkedChange;
    /** @type {?} */
    TreeTableHeaderCheckboxComponent.prototype.chkAll;
    /** @type {?} */
    TreeTableHeaderCheckboxComponent.prototype.tt;
    /** @type {?} */
    TreeTableHeaderCheckboxComponent.prototype.ttService;
}
/**
 * 表体checkbox 组件
 */
export class TreeTableCheckboxComponent {
    /**
     * @param {?} tt
     * @param {?} ttService
     */
    constructor(tt, ttService) {
        this.tt = tt;
        this.ttService = ttService;
        this.cls1 = true;
        this.checkedChange = new EventEmitter();
        this.destroy$ = new Subject();
        this.ttService = this.tt.ttService;
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        this.destroy$.next();
        this.destroy$.complete();
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.chk.nativeElement.indeterminate = this.rowNode.indeterminate || false;
        this.ttService.changeCheckboxStatus$.pipe(takeUntil(this.destroy$)).pipe(map((/**
         * @param {?} n
         * @return {?}
         */
        n => {
            if (n.id === this.rowNode.id) {
                return n;
            }
            return null;
        }))).subscribe((/**
         * @param {?} n
         * @return {?}
         */
        n => {
            if (n) {
                this.chk.nativeElement.indeterminate = n.indeterminate;
                this.checked = n.isChecked;
                this.chk.nativeElement.checked = this.checked;
            }
        }));
    }
    /**
     * @param {?} event
     * @return {?}
     */
    handleClick(event) {
        event.stopPropagation();
        if (!this.disabled) {
            this.tt.beforeClickNode({ instance: this.tt, rowNode: this.rowNode, event, type: 'checkbox' }).subscribe((/**
             * @param {?} e
             * @return {?}
             */
            (e) => {
                if (!e) {
                    return;
                }
                this.checked = !this.checked;
                if (this.tt.singleSelect) {
                    this.tt.clearAll();
                    if (this.checked) {
                        this.tt.selectNode(this.rowNode.id, true);
                    }
                    else {
                        this.tt.unSelectNode(this.rowNode.id, true);
                    }
                }
                else {
                    this.tt.toggleNodeWithCheckbox(event, this.rowNode, this.checked);
                }
            }));
        }
        return false;
    }
}
TreeTableCheckboxComponent.decorators = [
    { type: Component, args: [{
                selector: 'tt-checkbox',
                template: `
    <div class="custom-control custom-checkbox  custom-control-inline tt-checkbox">
        <input type="checkbox" #chk class="custom-control-input" [disabled]="disabled" [checked]="checked">
        <label class="custom-control-label" (click)="handleClick($event)"></label>
    </div>
    `,
                styles: [`
        :host {
            vertical-align: middle;
        }
        :host .custom-checkbox {
            opacity: 1;
            float: none;
        }
        `]
            }] }
];
/** @nocollapse */
TreeTableCheckboxComponent.ctorParameters = () => [
    { type: TreeTableComponent },
    { type: TreetableService }
];
TreeTableCheckboxComponent.propDecorators = {
    cls1: [{ type: HostBinding, args: ['class.tree-toggler-checkbox',] }],
    checked: [{ type: Input }],
    disabled: [{ type: Input }],
    rowNode: [{ type: Input }],
    checkedChange: [{ type: Output }],
    chk: [{ type: ViewChild, args: ['chk',] }]
};
if (false) {
    /** @type {?} */
    TreeTableCheckboxComponent.prototype.cls1;
    /** @type {?} */
    TreeTableCheckboxComponent.prototype.checked;
    /** @type {?} */
    TreeTableCheckboxComponent.prototype.disabled;
    /** @type {?} */
    TreeTableCheckboxComponent.prototype.rowNode;
    /** @type {?} */
    TreeTableCheckboxComponent.prototype.checkedChange;
    /** @type {?} */
    TreeTableCheckboxComponent.prototype.chk;
    /** @type {?} */
    TreeTableCheckboxComponent.prototype.destroy$;
    /** @type {?} */
    TreeTableCheckboxComponent.prototype.tt;
    /** @type {?} */
    TreeTableCheckboxComponent.prototype.ttService;
}
export class DblClickRowDirective {
    /**
     * @param {?} tt
     * @param {?} el
     * @param {?} ttService
     * @param {?} selectRowDir
     */
    constructor(tt, el, ttService, selectRowDir) {
        this.tt = tt;
        this.el = el;
        this.ttService = ttService;
        this.selectRowDir = selectRowDir;
        this.enableDblClick = false;
        this.ttService = this.tt.ttService;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        if (!this.enableDblClick) {
            this.selectRowDir.delay = 0;
        }
    }
    /**
     * @param {?} event
     * @return {?}
     */
    ondblclick(event) {
        /** @type {?} */
        const prevEl = ((/** @type {?} */ (event.target))).previousSibling;
        if (prevEl && prevEl.type === 'checkbox') {
            return;
        }
        if (this.tt.disabled) {
            return false;
        }
        if (this.tt.multiSelect && this.dblclickNode) {
            if (this.dblclickNode.node.leaf) {
                return false;
            }
        }
        /** @type {?} */
        const clsName = event.target['className'];
        /** @type {?} */
        let togglerTag = null;
        if (clsName.indexOf('f-cmp-treetable-toggler') > -1) {
            togglerTag = event.target['querySelector']('.treenode-fold');
        }
        else {
            if (event.target['className'].indexOf('treenode-fold') > -1) {
                togglerTag = (/** @type {?} */ (event.target));
            }
        }
        if (togglerTag && togglerTag.style.visibility === 'visible') {
            return false;
        }
        if (this.selectRowDir) {
            this.selectRowDir.prevent = false;
            clearTimeout(this.selectRowDir.timer);
            if (this.selectRowDir.rowNode && this.enableDblClick) {
                /** @type {?} */
                const rn = this.selectRowDir.rowNode;
                if (this.tt.loadDataType === 'all' && !rn.node.leaf && this.tt.dblClickExpand) {
                    this.tt.toggleExpand(rn.node);
                }
                this.tt.dblClick.emit(rn.node);
            }
        }
        // event.stopPropagation();
    }
}
DblClickRowDirective.decorators = [
    { type: Directive, args: [{
                selector: '[dblclick]'
            },] }
];
/** @nocollapse */
DblClickRowDirective.ctorParameters = () => [
    { type: TreeTableComponent },
    { type: ElementRef },
    { type: TreetableService },
    { type: TreeTableSelectRowDirective, decorators: [{ type: Optional }, { type: Self }] }
];
DblClickRowDirective.propDecorators = {
    enableDblClick: [{ type: Input, args: ['dblclick',] }],
    dblclickNode: [{ type: Input }],
    ondblclick: [{ type: HostListener, args: ['dblclick', ['$event'],] }]
};
if (false) {
    /** @type {?} */
    DblClickRowDirective.prototype.enableDblClick;
    /** @type {?} */
    DblClickRowDirective.prototype.dblclickNode;
    /** @type {?} */
    DblClickRowDirective.prototype.tt;
    /** @type {?} */
    DblClickRowDirective.prototype.el;
    /** @type {?} */
    DblClickRowDirective.prototype.ttService;
    /** @type {?} */
    DblClickRowDirective.prototype.selectRowDir;
}
export class CustomRowStyleDirective {
    /**
     * @param {?} injector
     * @param {?} ngZone
     * @param {?} el
     * @param {?} tt
     * @param {?} utils
     * @param {?} render
     */
    constructor(injector, ngZone, el, tt, utils, render) {
        this.injector = injector;
        this.ngZone = ngZone;
        this.el = el;
        this.tt = tt;
        this.utils = utils;
        this.render = render;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        if (this.col && this.tt.fixedColumns && this.tt.fixedHeader && this.col.fixed) {
            if (this.col.fixed === 'left' || this.col.fixed === 'right') {
                this.setRowStyle();
            }
            return;
        }
        else {
            this.setRowStyle();
        }
    }
    /**
     * @private
     * @return {?}
     */
    setRowStyle() {
        /** @type {?} */
        const fn = this.tt.rowStyler;
        if (fn) {
            /** @type {?} */
            const sty = fn(this.rowNode.node);
            if (sty) {
                if (typeof sty === 'object' && (sty.style || sty.cls)) {
                    if (sty.style) {
                        Object.keys(sty.style).forEach((/**
                         * @param {?} s
                         * @return {?}
                         */
                        s => {
                            this.render.setStyle(this.el.nativeElement, s, sty.style[s]);
                        }));
                    }
                    if (sty.cls) {
                        sty.cls.split(',').forEach((/**
                         * @param {?} c
                         * @return {?}
                         */
                        c => {
                            this.render.addClass(this.el.nativeElement, c);
                        }));
                    }
                }
                else {
                    if (Array.isArray(sty) || typeof sty === 'string') {
                        /** @type {?} */
                        const cls = this.tt.getRowCls(this.rowNode);
                        if (cls && Object.keys(cls).length) {
                            Object.keys(cls).forEach((/**
                             * @param {?} c
                             * @return {?}
                             */
                            c => {
                                if (cls[c]) {
                                    this.render.addClass(this.el.nativeElement, c);
                                }
                            }));
                        }
                    }
                    else {
                        Object.keys(sty).forEach((/**
                         * @param {?} s
                         * @return {?}
                         */
                        s => {
                            this.render.setStyle(this.el.nativeElement, s, sty[s]);
                        }));
                    }
                }
            }
        }
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    ngOnChanges(changes) {
        if (changes.rowNode && !changes.rowNode.isFirstChange()) {
            this.setRowStyle();
        }
    }
}
CustomRowStyleDirective.decorators = [
    { type: Directive, args: [{
                selector: '[customRowStyle]'
            },] }
];
/** @nocollapse */
CustomRowStyleDirective.ctorParameters = () => [
    { type: Injector },
    { type: NgZone },
    { type: ElementRef },
    { type: TreeTableComponent },
    { type: CommonUtils },
    { type: Renderer2 }
];
CustomRowStyleDirective.propDecorators = {
    rowNode: [{ type: Input, args: ['customRowStyle',] }],
    col: [{ type: Input, args: ['field',] }]
};
if (false) {
    /** @type {?} */
    CustomRowStyleDirective.prototype.rowNode;
    /** @type {?} */
    CustomRowStyleDirective.prototype.col;
    /**
     * @type {?}
     * @private
     */
    CustomRowStyleDirective.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    CustomRowStyleDirective.prototype.ngZone;
    /**
     * @type {?}
     * @private
     */
    CustomRowStyleDirective.prototype.el;
    /**
     * @type {?}
     * @private
     */
    CustomRowStyleDirective.prototype.tt;
    /** @type {?} */
    CustomRowStyleDirective.prototype.utils;
    /**
     * @type {?}
     * @private
     */
    CustomRowStyleDirective.prototype.render;
}
export class TTCustomCellStyleDirective {
    /**
     * @param {?} injector
     * @param {?} ngZone
     * @param {?} el
     * @param {?} tt
     * @param {?} utils
     * @param {?} render
     */
    constructor(injector, ngZone, el, tt, utils, render) {
        this.injector = injector;
        this.ngZone = ngZone;
        this.el = el;
        this.tt = tt;
        this.utils = utils;
        this.render = render;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        if (this.tt && this.tt.getCellCls) {
            this.setCellStyle();
        }
        if (!this.tt.showBorder && this.tt.columns.length === 1) {
            this.render.setStyle(this.el.nativeElement, 'border-width', '0px');
        }
    }
    /**
     * @private
     * @return {?}
     */
    setCellStyle() {
        /** @type {?} */
        const cellCls = this.tt.getCellCls(this.rowNode, this.column.field);
        if (this.column && this.column.styler) {
            if (cellCls && Object.keys(cellCls).length) {
                Object.keys(cellCls).forEach((/**
                 * @param {?} c
                 * @return {?}
                 */
                c => {
                    if (cellCls[c]) {
                        this.render.addClass(this.el.nativeElement, c);
                    }
                }));
            }
            /** @type {?} */
            const rowData = this.rowNode.node.data;
            /** @type {?} */
            const ccs = this.column.styler(this.utils.getValue(this.column.field, rowData), rowData, this.rowIndex, this.rowNode);
            if (ccs) {
                if (ccs.style || ccs.cls) {
                    if (ccs.style) {
                        Object.keys(ccs.style).forEach((/**
                         * @param {?} s
                         * @return {?}
                         */
                        s => {
                            this.render.setStyle(this.el.nativeElement, s, ccs.style[s]);
                        }));
                    }
                    if (ccs.cls) {
                        ccs.cls.split(',').forEach((/**
                         * @param {?} c
                         * @return {?}
                         */
                        c => {
                            this.render.addClass(this.el.nativeElement, c);
                        }));
                    }
                }
            }
        }
        else {
            Object.keys(cellCls).forEach((/**
             * @param {?} s
             * @return {?}
             */
            s => {
                this.render.setStyle(this.el.nativeElement, s, cellCls[s]);
            }));
        }
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    ngOnChanges(changes) {
        if (changes.rowNode && !changes.rowNode.isFirstChange()) {
            this.setCellStyle();
        }
    }
}
TTCustomCellStyleDirective.decorators = [
    { type: Directive, args: [{
                selector: '[customCellStyle]'
            },] }
];
/** @nocollapse */
TTCustomCellStyleDirective.ctorParameters = () => [
    { type: Injector },
    { type: NgZone },
    { type: ElementRef },
    { type: TreeTableComponent },
    { type: CommonUtils },
    { type: Renderer2 }
];
TTCustomCellStyleDirective.propDecorators = {
    column: [{ type: Input, args: ['customCellStyle',] }],
    rowNode: [{ type: Input }],
    rowIndex: [{ type: Input }]
};
if (false) {
    /** @type {?} */
    TTCustomCellStyleDirective.prototype.column;
    /** @type {?} */
    TTCustomCellStyleDirective.prototype.rowNode;
    /** @type {?} */
    TTCustomCellStyleDirective.prototype.rowIndex;
    /**
     * @type {?}
     * @private
     */
    TTCustomCellStyleDirective.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    TTCustomCellStyleDirective.prototype.ngZone;
    /**
     * @type {?}
     * @private
     */
    TTCustomCellStyleDirective.prototype.el;
    /**
     * @type {?}
     * @private
     */
    TTCustomCellStyleDirective.prototype.tt;
    /** @type {?} */
    TTCustomCellStyleDirective.prototype.utils;
    /**
     * @type {?}
     * @private
     */
    TTCustomCellStyleDirective.prototype.render;
}
export class TTResizableColumnDirective {
    /**
     * @param {?} tt
     * @param {?} ngzone
     * @param {?} el
     * @param {?} render
     */
    constructor(tt, ngzone, el, render) {
        this.tt = tt;
        this.ngzone = ngzone;
        this.el = el;
        this.render = render;
        this.enableResize = true;
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        if (this.isEnable()) {
            this.render.addClass(this.el.nativeElement, 'resizable-column');
            this.resizer = document.createElement('span');
            this.resizer.className = 'column-resizer';
            this.el.nativeElement.appendChild(this.resizer);
            this.ngzone.runOutsideAngular((/**
             * @return {?}
             */
            () => {
                this.resizerMouseDownListener = this.onMouseDown.bind(this);
                this.resizer.addEventListener('mousedown', this.resizerMouseDownListener);
                this.el.nativeElement.addEventListener('mouseenter', this.onMouseEnter.bind(this));
            }));
        }
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    ngOnChanges(changes) {
        if (changes.enableResize && !changes.enableResize.isFirstChange()) {
            if (!this.isEnable() && this.resizer) {
                this.resizer.remove();
            }
        }
    }
    /**
     * @return {?}
     */
    isEnable() {
        return this.tt.resizableColumns && !this.tt.autoWidth && this.enableResize;
    }
    /**
     * @return {?}
     */
    bindDocumentEvents() {
        this.ngzone.runOutsideAngular((/**
         * @return {?}
         */
        () => {
            this.documentMouseMoveListener = this.onMouseMove.bind(this);
            document.addEventListener('mousemove', this.documentMouseMoveListener);
            this.documentMouseUpListener = this.onMouseUp.bind(this);
            document.addEventListener('mouseup', this.documentMouseUpListener);
        }));
    }
    /**
     * @return {?}
     */
    unbindDocumentEvents() {
        if (this.documentMouseMoveListener) {
            document.removeEventListener('mousemove', this.documentMouseMoveListener);
            this.documentMouseMoveListener = null;
        }
        if (this.documentMouseUpListener) {
            document.removeEventListener('mouseup', this.documentMouseUpListener);
            this.documentMouseUpListener = null;
        }
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onMouseDown(event) {
        if (this.isEnable()) {
            this.tt.onColumnResizeBegin(event);
            this.bindDocumentEvents();
        }
    }
    /**
     * @return {?}
     */
    onMouseEnter() {
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onMouseMove(event) {
        this.tt.onColumnResize(event);
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onMouseUp(event) {
        this.tt.onColumnResizeEnd(event, this.el.nativeElement);
        this.unbindDocumentEvents();
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        if (this.resizerMouseDownListener) {
            this.resizer.removeEventListener('mousedown', this.resizerMouseDownListener);
        }
        this.unbindDocumentEvents();
    }
}
TTResizableColumnDirective.decorators = [
    { type: Directive, args: [{
                selector: '[resizable-column]'
            },] }
];
/** @nocollapse */
TTResizableColumnDirective.ctorParameters = () => [
    { type: TreeTableComponent },
    { type: NgZone },
    { type: ElementRef },
    { type: Renderer2 }
];
TTResizableColumnDirective.propDecorators = {
    enableResize: [{ type: Input, args: ['resizable-column',] }]
};
if (false) {
    /** @type {?} */
    TTResizableColumnDirective.prototype.enableResize;
    /** @type {?} */
    TTResizableColumnDirective.prototype.resizer;
    /** @type {?} */
    TTResizableColumnDirective.prototype.resizerMouseDownListener;
    /** @type {?} */
    TTResizableColumnDirective.prototype.documentMouseMoveListener;
    /** @type {?} */
    TTResizableColumnDirective.prototype.documentMouseUpListener;
    /** @type {?} */
    TTResizableColumnDirective.prototype.tt;
    /** @type {?} */
    TTResizableColumnDirective.prototype.ngzone;
    /** @type {?} */
    TTResizableColumnDirective.prototype.el;
    /** @type {?} */
    TTResizableColumnDirective.prototype.render;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHJlZXRhYmxlLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvdWktdHJlZXRhYmxlLyIsInNvdXJjZXMiOlsibGliL3RyZWV0YWJsZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7Ozs7Ozs7OztBQVV0RCxPQUFPLEVBQ0gsU0FBUyxFQUFVLEtBQUssRUFBRSxXQUFXLEVBQUUsU0FBUyxFQUNoRCxlQUFlLEVBQUUsU0FBUyxFQUMxQixZQUFZLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFBRSxVQUFVLEVBQUUsUUFBUSxFQUN4RCxTQUFTLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBaUIsTUFBTSxFQUFFLFNBQVMsRUFBRSxpQkFBaUIsRUFDbEMsdUJBQXVCLEVBQUUsaUJBQWlCLEVBQVcsV0FBVyxFQUMvRyxNQUFNLGVBQWUsQ0FBQztBQUV2QixPQUFPLEVBQUUsdUJBQXVCLEVBQUUsV0FBVyxFQUFFLFNBQVMsRUFBRSw4QkFBOEIsRUFBRSxZQUFZLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUNsSSxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sMEJBQTBCLENBQUM7QUFDekQsT0FBTyxFQUFFLG1CQUFtQixFQUFtQixNQUFNLDBCQUEwQixDQUFDO0FBQ2hGLE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBQzdELE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUNsRCxPQUFPLEVBQUUseUJBQXlCLEVBQUUsTUFBTSw4QkFBOEIsQ0FBQztBQUV6RSxPQUFPLEVBQTRCLEVBQUUsRUFBRSxlQUFlLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUNyRixPQUFPLEVBQUUsR0FBRyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDckMsT0FBTyxFQUFhLE1B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QUFxQjs7SUFBRSw0Q0FBd0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzd2l0Y2hNYXAsIHRha2VVbnRpbCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcclxuLypcclxuKiBAQXV0aG9yOiDnlq/ni4Lnp4DmiY0obHVjYXMgaHVhbmcpXHJcbiAqIEBEYXRlOiAyMDE4LTEyLTE4IDE4OjQ0OjEzXHJcbiAqIEBMYXN0RWRpdG9yczog55av54uC56eA5omNKEx1Y2FzIEh1YW5nKVxyXG4gKiBATGFzdEVkaXRUaW1lOiAyMDE5LTExLTI5IDA4OjQxOjM5XHJcbiAqIEBDb21wYW55OiBJbnNwdXJcclxuICogQFZlcnNpb246IHYwLjAuMVxyXG4gKi9cclxuXHJcbmltcG9ydCB7XHJcbiAgICBDb21wb25lbnQsIE9uSW5pdCwgSW5wdXQsIFRlbXBsYXRlUmVmLCBEaXJlY3RpdmUsXHJcbiAgICBDb250ZW50Q2hpbGRyZW4sIFF1ZXJ5TGlzdCwgQWZ0ZXJDb250ZW50SW5pdCwgT25EZXN0cm95LFxyXG4gICAgSG9zdExpc3RlbmVyLCBPdXRwdXQsIEV2ZW50RW1pdHRlciwgRWxlbWVudFJlZiwgSW5qZWN0b3IsXHJcbiAgICBWaWV3Q2hpbGQsIE9wdGlvbmFsLCBTZWxmLCBBZnRlclZpZXdJbml0LCBOZ1pvbmUsIFJlbmRlcmVyMiwgVmlld0VuY2Fwc3VsYXRpb24sXHJcbiAgICBPbkNoYW5nZXMsIFNpbXBsZUNoYW5nZXMsIEFmdGVyVmlld0NoZWNrZWQsIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LCBDaGFuZ2VEZXRlY3RvclJlZiwgRG9DaGVjaywgSG9zdEJpbmRpbmdcclxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuXHJcbmltcG9ydCB7IEZhcnJpc1RlbXBsYXRlRGlyZWN0aXZlLCBDb21tb25VdGlscywgSWRTZXJ2aWNlLCBGYXJyaXNDb21wb25lbnRJbnN0YW5jZVNlcnZpY2UsIERlYnVnU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktY29tbW9uJztcclxuaW1wb3J0IHsgUmVzaXplU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktY29tbW9uL2V2ZW50cyc7XHJcbmltcG9ydCB7IENvbHVtbkZvcm1hdFNlcnZpY2UsIENvbHVtbkZvcm1hdHRlciB9IGZyb20gJ0BmYXJyaXMvdWktY29tbW9uL2NvbHVtbic7XHJcbmltcG9ydCB7IElucHV0R3JvdXBDb21wb25lbnQgfSBmcm9tICdAZmFycmlzL3VpLWlucHV0LWdyb3VwJztcclxuaW1wb3J0IHsgTG9jYWxlU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbG9jYWxlJztcclxuaW1wb3J0IHsgUGVyZmVjdFNjcm9sbGJhckNvbXBvbmVudCB9IGZyb20gJ0BmYXJyaXMvdWktcGVyZmVjdC1zY3JvbGxiYXInO1xyXG5cclxuaW1wb3J0IHsgU3Vic2NyaXB0aW9uLCBPYnNlcnZhYmxlLCBvZiwgQmVoYXZpb3JTdWJqZWN0LCBTdWJqZWN0LCB0aW1lciB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBtYXAgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XHJcbmltcG9ydCB7IGNsb25lRGVlcCwgZXh0ZW5kLCByZW1vdmUgfSBmcm9tICdsb2Rhc2gtZXMnO1xyXG5pbXBvcnQgUmVzaXplT2JzZXJ2ZXIgZnJvbSAncmVzaXplLW9ic2VydmVyLXBvbHlmaWxsJztcclxuXHJcbmltcG9ydCB7IFRyZWVUYWJsZUNvbHVtbiB9IGZyb20gJy4vdHlwZXMvdHJlZXRhYmxlLWNvbHVtbic7XHJcbmltcG9ydCB7IFZpcnR1YWxpemVkTG9hZGVyU2VydmljZSB9IGZyb20gJy4vdmlydHVhbGl6ZWQtbG9hZGVyLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBUcmVlTm9kZSwgUm93Tm9kZSwgU2VsZWN0RXZlbnRBcmdzIH0gZnJvbSAnLi90eXBlcy90cmVlbm9kZSc7XHJcbmltcG9ydCB7IFRyZWV0YWJsZVNlcnZpY2UgfSBmcm9tICcuL3RyZWV0YWJsZS5zZXJ2aWNlJztcclxuaW1wb3J0IHsgU2VhcmNoSGFuZGxlIH0gZnJvbSAnLi9zZWFyY2guaGFuZGxlJztcclxuaW1wb3J0IHsgVFRIb3RrZXlzIH0gZnJvbSAnLi9ob3RrZXlzJztcclxuaW1wb3J0IHsgUGFnaW5hdGlvbkluc3RhbmNlIH0gZnJvbSAnQGZhcnJpcy91aS1wYWdpbmF0aW9uJztcclxuaW1wb3J0IHsgRmFycmlzQ29udGV4dE1lbnVEaXJlY3RpdmUgfSBmcm9tICdAZmFycmlzL3VpLWNvbnRleHQtbWVudSc7XHJcblxyXG5cclxuLyoqIOWNleWFg+agvOeCueS6i+S7tuWPguaVsCAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIENlbGxDbGlja1BhcmFtIHtcclxuICAgIGV2ZW50OiBFdmVudDtcclxuICAgIGNvbDogVHJlZVRhYmxlQ29sdW1uO1xyXG4gICAgbm9kZTogVHJlZU5vZGU7XHJcbn1cclxuLyoqIOiKgueCuemSqemAieS6i+S7tiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIE5vZGVDaGVja2VkUGFyYW0ge1xyXG4gICAgb3JpZ2luYWxFdmVudD86IGFueTtcclxuICAgIG5vZGU6IFRyZWVOb2RlIHwgVHJlZU5vZGVbXTtcclxuICAgIG5vZGVzPzogYW55W107XHJcbiAgICBpbnN0YW5jZTogVHJlZVRhYmxlQ29tcG9uZW50O1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIE5vZGVTZWxlY3RlZFBhcmFtIHtcclxuICAgIG9yaWdpbmFsRXZlbnQ/OiBFdmVudDtcclxuICAgIG5vZGU6IFRyZWVOb2RlIHwgVHJlZU5vZGVbXTtcclxuICAgIHR5cGU/OiAncm93JyB8ICdjaGVja2JveCc7XHJcbiAgICBpbmRleD86IG51bWJlcjtcclxuICAgIHBhcmVudHM/OiBhbnlbXTtcclxuICAgIGluc3RhbmNlOiBUcmVlVGFibGVDb21wb25lbnQ7XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIEljb25GaWVsZFR5cGUgPSB7XHJcbiAgICBsZWFmPzogc3RyaW5nLFxyXG4gICAgZXhwYW5kPzogc3RyaW5nLFxyXG4gICAgY29sbGFwc2U/OiBzdHJpbmdcclxufSB8IHN0cmluZztcclxuXHJcblxyXG5jb25zdCBOT0RFU19QQUdFUl9DT0xVTU5fRklFTEQgPSAnX19ub2Rlc3BhZ2VyYmFyX18nO1xyXG5cclxuXHJcbkBEaXJlY3RpdmUoe1xyXG4gICAgc2VsZWN0b3I6ICd0dC1jb2x1bW4sIFt0dC1jb2x1bW5dJ1xyXG59KVxyXG5leHBvcnQgY2xhc3MgVHJlZVRhYmxlQ29sdW1uRGlyZWN0aXZlIHtcclxuICAgIEBJbnB1dCgpIGZpZWxkOiBzdHJpbmc7XHJcbiAgICBASW5wdXQoKSB0aXRsZTogc3RyaW5nO1xyXG4gICAgQElucHV0KCkgd2lkdGg/OiBudW1iZXI7XHJcbiAgICBASW5wdXQoKSBoQWxpZ24/OiBzdHJpbmc7XHJcbiAgICBASW5wdXQoKSBhbGlnbj86IHN0cmluZztcclxuICAgIEBJbnB1dCgpIGZvcm1hdHRlcj86ICgpID0+IGFueSB8IENvbHVtbkZvcm1hdHRlcjtcclxufVxyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgICBzZWxlY3RvcjogJ2ZhcnJpcy10cmVldGFibGUnLFxyXG4gICAgdGVtcGxhdGVVcmw6ICd0cmVldGFibGUuY29tcG9uZW50Lmh0bWwnLFxyXG4gICAgc3R5bGVzOiBbYFxyXG4gICAgICAgIC5mYXJyaXMtdHJlZXRhYmxlIHtcclxuICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAucmVzaXphYmxlLWNvbHVtbiB7XHJcbiAgICAgICAgICAgIGJhY2tncm91bmQtY2xpcDogcGFkZGluZy1ib3g7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLmNvbHVtbi1yZXNpemVyIHtcclxuICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZSFpbXBvcnRhbnQ7XHJcbiAgICAgICAgICAgIHRvcDogMDtcclxuICAgICAgICAgICAgcmlnaHQ6IDA7XHJcbiAgICAgICAgICAgIG1hcmdpbjogMDtcclxuICAgICAgICAgICAgd2lkdGg6IC41ZW07XHJcbiAgICAgICAgICAgIGhlaWdodDogMTAwJTtcclxuICAgICAgICAgICAgcGFkZGluZzogMDtcclxuICAgICAgICAgICAgY3Vyc29yOiBjb2wtcmVzaXplO1xyXG4gICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB0cmFuc3BhcmVudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLmNvbHVtbi1yZXNpemVyLWhlbHBlciB7XHJcbiAgICAgICAgICAgIHdpZHRoOiAxcHg7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgICAgICAgICAgei1pbmRleDogMTA7XHJcbiAgICAgICAgICAgIGRpc3BsYXk6IG5vbmU7XHJcbiAgICAgICAgICAgIGJvcmRlci1yaWdodDogMXB4IGRhc2hlZCAjMTg5MGZmO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLmZhcnJpcy10cmVldGFibGUtZGlzYWJsZWQgLmZhcnJpcy10cmVldGFibGUtYm9keSAudGFibGUgdHJ7XHJcbiAgICAgICAgICAgIG9wYWNpdHk6IDAuNDtcclxuICAgICAgICAgICAgY3Vyc29yOiBub3QtYWxsb3dlZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLmZhcnJpcy10cmVldGFibGUtZGlzYWJsZWQgLnRhYmxlIHRyLmZhcnJpcy10YWJsZS1zZWxlY3RlZHJvd3tcclxuICAgICAgICAgICAgb3BhY2l0eTogMTtcclxuICAgICAgICAgICAgY3Vyc29yOiBkZWZhdWx0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLmN1c3RvbS1jaGVja2JveCAuY3VzdG9tLWNvbnRyb2wtaW5wdXQ6aW5kZXRlcm1pbmF0ZX4uY3VzdG9tLWNvbnRyb2wtbGFiZWw6OmFmdGVyIHtcclxuICAgICAgICAgICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKFwiZGF0YTppbWFnZS9zdmcreG1sLCUzY3N2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCA0IDQnJTNlJTNjcGF0aCBzdHJva2U9JyUyM2ZmZicgZD0nTTAgMmg0Jy8lM2UlM2Mvc3ZnJTNlXCIpO1xyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMTg5MGZmO1xyXG4gICAgICAgIH1cclxuICAgICAgICAudW5zZWxlY3RhYmxlLXRleHQge1xyXG4gICAgICAgICAgICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lO1xyXG4gICAgICAgICAgICAtbW96LXVzZXItc2VsZWN0OiBub25lO1xyXG4gICAgICAgICAgICAtby11c2VyLXNlbGVjdDogbm9uZTtcclxuICAgICAgICAgICAgLW1zLXVzZXItc2VsZWN0OiBub25lO1xyXG4gICAgICAgICAgICB1c2VyLXNlbGVjdDogbm9uZVxyXG4gICAgICAgIH1cclxuICAgICAgICAuc2VhcmNoLWhpZ2hsaWdodCB7XHJcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNGRkZGMUY7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC5zZWFyY2gtaGlnaGxpZ2h0LmFjdGl2ZXtcclxuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI0ZGOTAxQztcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgIC5mLXRyZWV0YWJsZS0tZml4ZWQtY29sdW1ucyAudHJlZXRhYmxlLWhlYWRlci1jZWxsIHtcclxuICAgICAgICAgICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC5mLXRyZWV0YWJsZS0tZml4ZWQtY29sdW1ucyAucHNfX3JhaWwteCxcclxuICAgICAgICAuZi10cmVldGFibGUtLWZpeGVkLWNvbHVtbnMgLnBzX19yYWlsLXkge1xyXG4gICAgICAgICAgICB6LWluZGV4OiAzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLmYtdHJlZXRhYmxlLS1maXhlZC1sZWZ0LFxyXG4gICAgICAgIC5mLXRyZWV0YWJsZS0tZml4ZWQtcmlnaHQge1xyXG4gICAgICAgICAgICBwb3NpdGlvbjogc3RpY2t5ICFpbXBvcnRhbnQ7XHJcbiAgICAgICAgICAgIHotaW5kZXg6IDI7XHJcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmZmZmY7XHJcbiAgICAgICAgICAgIG92ZXJmbG93OiBpbmhlcml0ICFpbXBvcnRhbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC50cmVldGFibGUtaGVhZGVyLWNlbGwuZi10cmVldGFibGUtLWZpeGVkLWxlZnQsXHJcbiAgICAgICAgLnRyZWV0YWJsZS1oZWFkZXItY2VsbC5mLXRyZWV0YWJsZS0tZml4ZWQtcmlnaHQge1xyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjRjRGNEY0O1xyXG4gICAgICAgICAgICBib3JkZXItY29sb3I6ICNFNEU3RUY7XHJcbiAgICAgICAgICAgIGJvcmRlcjogbm9uZTtcclxuICAgICAgICAgICAgb3V0bGluZS1jb2xvcjogI0U0RTdFRjtcclxuICAgICAgICAgICAgb3V0bGluZS1zdHlsZTogc29saWQ7XHJcbiAgICAgICAgICAgIG91dGxpbmUtd2lkdGg6IDFweDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC5mLXRyZWV0YWJsZS0tZml4ZWQtY29sdW1uc1xyXG4gICAgICAgICAgICB0clxyXG4gICAgICAgICAgICB0aC5mLXRyZWV0YWJsZS0tZml4ZWQtbGVmdFtsLXR0LXNoYWRvdy1jb2xdOjphZnRlcixcclxuICAgICAgICAuZi10cmVldGFibGUtLWZpeGVkLWNvbHVtbnMgdGQuZi10cmVldGFibGUtLWZpeGVkLWxlZnQ6OmFmdGVyLFxyXG4gICAgICAgIC5mLXRyZWV0YWJsZS0tZml4ZWQtcmlnaHQ6OmJlZm9yZSB7XHJcbiAgICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xyXG4gICAgICAgICAgICBjb250ZW50OiBcIlwiO1xyXG4gICAgICAgICAgICB3aWR0aDogMzZweCAhaW1wb3J0YW50O1xyXG4gICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2sgIWltcG9ydGFudDtcclxuICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlICFpbXBvcnRhbnQ7XHJcbiAgICAgICAgICAgIG1hcmdpbi10b3A6IDAgIWltcG9ydGFudDtcclxuICAgICAgICAgICAgdG9wOiAwICFpbXBvcnRhbnQ7XHJcbiAgICAgICAgICAgIGhlaWdodDogMTAwJSAhaW1wb3J0YW50O1xyXG4gICAgICAgICAgICBib3R0b206IC0xcHggIWltcG9ydGFudDtcclxuICAgICAgICAgICAgdHJhbnNpdGlvbjogYm94LXNoYWRvdyAwLjJzIGN1YmljLWJlemllcigwLjQsIDAsIDAuMiwgMSk7XHJcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAuZi10cmVldGFibGUtLWZpeGVkLWNvbHVtbnNcclxuICAgICAgICAgICAgdHJcclxuICAgICAgICAgICAgdGguZi10cmVldGFibGUtLWZpeGVkLWxlZnQ6bm90KFtsLXR0LXNoYWRvdy1jb2xdKTo6YWZ0ZXIge1xyXG4gICAgICAgICAgICBjb250ZW50OiBcIlwiO1xyXG4gICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICAgICAgICAgIHJpZ2h0OiAwO1xyXG4gICAgICAgICAgICB0b3A6IDUwJTtcclxuICAgICAgICAgICAgbWFyZ2luLXRvcDogY2FsYygtMS4xMjVyZW0gLyAyKTtcclxuICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XHJcbiAgICAgICAgICAgIGhlaWdodDogMS4xMjVyZW07XHJcbiAgICAgICAgICAgIHdpZHRoOiAxcHg7XHJcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNlNmU5ZjA7XHJcbiAgICAgICAgICAgIGJveC1zaGFkb3c6IG5vbmU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAuZi10cmVldGFibGUtLWZpeGVkLWNvbHVtbnNcclxuICAgICAgICAgICAgdHJcclxuICAgICAgICAgICAgdGguZi10cmVldGFibGUtLWZpeGVkLWxlZnRbbC10dC1zaGFkb3ctY29sXTo6YWZ0ZXIsXHJcbiAgICAgICAgLmYtdHJlZXRhYmxlLS1maXhlZC1jb2x1bW5zIHRyIHRkLmYtdHJlZXRhYmxlLS1maXhlZC1sZWZ0OjphZnRlciB7XHJcbiAgICAgICAgICAgIHJpZ2h0OiAtMzZweCAhaW1wb3J0YW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLmYtdHJlZXRhYmxlLS1maXhlZC1jb2x1bW5zIC5mLXRyZWV0YWJsZS0tZml4ZWQtcmlnaHQ6OmJlZm9yZSB7XHJcbiAgICAgICAgICAgIGxlZnQ6IC0zNnB4ICFpbXBvcnRhbnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAuZi10cmVldGFibGUtLWZpeGVkLWNvbHVtbnMgLnRhYmxlLWhvdmVyIHRib2R5IHRyOmhvdmVyIHRkIHtcclxuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2VkZjVmZjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC5mLXRyZWV0YWJsZS0tZml4ZWQtY29sdW1uc1xyXG4gICAgICAgICAgICAuZmFycmlzLXRyZWV0YWJsZS10Ym9keVxyXG4gICAgICAgICAgICB0ci5mYXJyaXMtdGFibGUtc2VsZWN0ZWRyb3dcclxuICAgICAgICAgICAgdGQge1xyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZGFlOWZmIWltcG9ydGFudDtcclxuICAgICAgICAgICAgY29sb3I6ICM0MjQzNDc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAuZi10cmVldGFibGUtLWZpeGVkLWNvbHVtbnNcclxuICAgICAgICAgICAgLmZhcnJpcy10cmVldGFibGUtdGJvZHlcclxuICAgICAgICAgICAgdHIuZi10cmVldGFibGUtZGlzYWJsZS1yb3dcclxuICAgICAgICAgICAgdGQge1xyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmFmYWZjO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLmYtdHJlZXRhYmxlLS1maXhlZC1jb2x1bW5zLnRhYmxlLWJvcmRlcmVkXHJcbiAgICAgICAgICAgIHRyXHJcbiAgICAgICAgICAgIHRoLmYtdHJlZXRhYmxlLS1maXhlZC1sZWZ0W2wtdHQtc2hhZG93LWNvbF0sXHJcbiAgICAgICAgLmYtdHJlZXRhYmxlLS1maXhlZC1jb2x1bW5zLnRhYmxlLWJvcmRlcmVkIHRyIHRoLmYtdHJlZXRhYmxlLS1maXhlZC1yaWdodCxcclxuICAgICAgICAuZi10cmVldGFibGUtLWZpeGVkLWNvbHVtbnMudGFibGUtYm9yZGVyZWQgdHIgdGQuZi10cmVldGFibGUtLWZpeGVkLWxlZnQsXHJcbiAgICAgICAgLmYtdHJlZXRhYmxlLS1maXhlZC1jb2x1bW5zLnRhYmxlLWJvcmRlcmVkIHRyIHRkLmYtdHJlZXRhYmxlLS1maXhlZC1yaWdodCB7XHJcbiAgICAgICAgICAgIGJvcmRlci1yaWdodDogMDtcclxuICAgICAgICAgICAgYm94LXNoYWRvdzogaW5zZXQgLTFweCAwcHggMHB4ICNlYWVjZjM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAuZi10cmVldGFibGUtLWZpeGVkLWNvbHVtbnMudGFibGUtYm9yZGVyZWQgdHIgdGQsXHJcbiAgICAgICAgLmYtdHJlZXRhYmxlLS1maXhlZC1jb2x1bW5zLnRhYmxlLWJvcmRlcmVkIHRyIHRkIHtcclxuICAgICAgICAgICAgYm9yZGVyLWxlZnQ6IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAuZi10cmVldGFibGUtLWZpeGVkLWNvbHVtbnMgdGJvZHkgdHI6bnRoLW9mLXR5cGUoZXZlbikgdGQge1xyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjRjdGN0Y3O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICBgXSxcclxuICAgIGV4cG9ydEFzOiAndHJlZVRhYmxlJyxcclxuICAgIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmUsXHJcbiAgICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaFxyXG59KVxyXG5leHBvcnQgY2xhc3MgVHJlZVRhYmxlQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBBZnRlckNvbnRlbnRJbml0LCBBZnRlclZpZXdJbml0LCBPbkNoYW5nZXMsIEFmdGVyVmlld0NoZWNrZWQsIE9uRGVzdHJveSB7XHJcbiAgICBpZCA9ICcnO1xyXG4gICAgLyoqIOWuveW6piAqL1xyXG4gICAgQElucHV0KCkgd2lkdGggPSA1MDA7XHJcbiAgICAvKiog6auY5bqmICovXHJcbiAgICBASW5wdXQoKSBoZWlnaHQgPSA0MDA7XHJcblxyXG4gICAgQElucHV0KCkgc2hvd0ZpbHRlckJhciA9IGZhbHNlO1xyXG4gICAgLyoqIOaYvuekuuafpeivouWtl+autSAqL1xyXG4gICAgQElucHV0KCkgc2hvd1NlYXJjaEZpZWxkID0gdHJ1ZTtcclxuXHJcbiAgICBASW5wdXQoKSBoZWFkZXJIZWlnaHQgPSAzNTtcclxuICAgIC8qKiDooajlpLTmipjooYwgKi9cclxuICAgIEBJbnB1dCgpIGhlYWRlcldyYXAgPSBmYWxzZTtcclxuICAgIC8qKiDooYzpq5ggKi9cclxuICAgIEBJbnB1dCgpIHJvd0hlaWdodCA9IDI5O1xyXG4gICAgLyoqXHJcbiAgICAgKiDliJfkv6Hmga9cclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgY29sdW1ucyA9IFtdO1xyXG4gICAgcHJpdmF0ZSBfZ3JvdXBDb2x1bW5zID0gW107XHJcbiAgICBASW5wdXQoKSBzZXQgZ3JvdXBDb2x1bW5zKGNvbHMpIHtcclxuICAgICAgICB0aGlzLl9ncm91cENvbHVtbnMgPSBjb2xzIHx8IFtdO1xyXG4gICAgICAgIGNvbnN0IF9jb2x1bW5zID0gdGhpcy50dFNlcnZpY2UuY2hlY2tDb2x1bW5zRm9yR3JvdXBIZWFkZXIoY29scy5tYXAoY3MgPT4gWy4uLmNzXSksIHRoaXMpLmNvbHVtbnM7XHJcbiAgICAgICAgdGhpcy5jb2x1bW5zID0gX2NvbHVtbnMuZmlsdGVyKG4gPT4gbi5maWVsZCk7XHJcbiAgICB9XHJcbiAgICBnZXQgZ3JvdXBDb2x1bW5zKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9ncm91cENvbHVtbnM7XHJcbiAgICB9XHJcbiAgICAvKiog5ZCv55So5aSa6KGo5aS0ICovXHJcbiAgICBASW5wdXQoKSB1c2VHcm91cEhlYWRlciA9IGZhbHNlO1xyXG5cclxuICAgIEBJbnB1dCgpIGZpdENvbHVtbnMgPSB0cnVlO1xyXG4gICAgQElucHV0KCkgYXV0b0ZpdENvbHVtbnMgPSBmYWxzZTtcclxuXHJcbiAgICBASW5wdXQoKSBzZWFyY2hGaWVsZHM6IHsgbGFiZWw6IHN0cmluZywgdmFsdWU6IHN0cmluZyB9W107XHJcblxyXG4gICAgQElucHV0KCkgYWxsQ29sdW1uc1RpdGxlID0gJ+aJgOacieWIlyc7XHJcblxyXG4gICAgLyoqIOaYvuekuui/nuaOpee6v++8jOm7mOiupOS4uiBmYWxzZSAqL1xyXG4gICAgQElucHV0KCkgc2hvd0xpbmVzID0gZmFsc2U7XHJcbiAgICBASW5wdXQoKSBzaG93TGluZXNPbkhvdmVyID0gZmFsc2U7XHJcbiAgICAvKipcclxuICAgICAqIOaYr+WQpuWQr+eUqOWkmumAieOAgiDpu5jorqTkuLrljZXpgIlcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgbXVsdGlTZWxlY3QgPSBmYWxzZTtcclxuICAgIEBJbnB1dCgpIHNpbmdsZVNlbGVjdCA9IHRydWU7XHJcbiAgICAvKiog5ZCv55So5aSa6YCJ5ZCO77yM5piv5ZCm5pi+56S6Y2hlY2tib3ggKi9cclxuICAgIEBJbnB1dCgpIHNob3dDaGVja2JveCA9IGZhbHNlO1xyXG4gICAgLyoqXHJcbiAgICAgKiDkuLvplK7lrZfmrrVcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgaWRGaWVsZDogc3RyaW5nO1xyXG5cclxuICAgIC8qKiDmmL7npLrovrnmoYbnur8gKi9cclxuICAgIEBJbnB1dCgpIHNob3dCb3JkZXIgPSB0cnVlO1xyXG5cclxuICAgIEBJbnB1dCgpIHNob3dDaGVja0FsbCA9IHRydWU7XHJcblxyXG4gICAgQElucHV0KCkgc2hvd0hlYWRlciA9IHRydWU7XHJcbiAgICAvKiog5ZCv55So5paR6ams57q/ICovXHJcbiAgICBASW5wdXQoKSBzdHJpcGVkID0gZmFsc2U7XHJcbiAgICAvKiog5ZCv55So6byg5qCH5YiS6L+H5pWI5p6cICovXHJcbiAgICBASW5wdXQoKSBob3ZlcmVkID0gdHJ1ZTtcclxuICAgIC8qKiDnpoHnlKjjgIIg56aB55So5pe25LiN5YWB6K646YCJ5Lit6KGMICovXHJcbiAgICBASW5wdXQoKSBkaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgLyoqIOemgeWNoeiKgueCuemAieS4rSAqL1xyXG4gICAgQElucHV0KCkgZGlzYWJsZWRSb3c6IChwYXJhbTogeyBub2RlOiBUcmVlTm9kZSwgaW5zdGFuY2U6IFRyZWVUYWJsZUNvbXBvbmVudCB9KSA9PiBib29sZWFuO1xyXG5cclxuICAgIC8qKiDmlbDmja7liqDovb3mlrnlvI87IOm7mOiupOWAvCDkuLogYWxsXHJcbiAgICAgKiAtIGFsbDog5YWo6YOo5Yqg6L29XHJcbiAgICAgKiAtIGFzeW5jOiDliIblsYLliqDovb1cclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgbG9hZERhdGFUeXBlOiAnYWxsJyB8ICdhc3luYycgPSAnYWxsJztcclxuICAgIC8qKiDlm7rlrprooajlpLQgKi9cclxuICAgIEBJbnB1dCgpIGZpeGVkSGVhZGVyID0gZmFsc2U7XHJcblxyXG4gICAgLyoqIOW9k+WkmumAieaXtu+8jOmAieS4reW9k+WJjeihjOW5tumSqemAiSAqL1xyXG4gICAgQElucHV0KCkgY2hlY2tPblNlbGVjdCA9IGZhbHNlO1xyXG4gICAgLyoqIOW9k+WkmumAieaXtu+8jOmSqemAieW5tumAieS4reW9k+WJjeihjCAqL1xyXG4gICAgQElucHV0KCkgc2VsZWN0T25DaGVjayA9IGZhbHNlO1xyXG4gICAgLyoqXHJcbiAgICAgKiDlkK/nlKjlpJrpgInml7bvvIzmraTlsZ7mgKfkuLp0cnVlIOaXtu+8jOS7heW9k+WJjeihjOmAieS4rVxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBvbmx5U2VsZWN0U2VsZiA9IGZhbHNlO1xyXG5cclxuICAgIC8qKiDlkK/nlKjliJflrr3osIPmlbQgKi9cclxuICAgIEBJbnB1dCgpIHJlc2l6YWJsZUNvbHVtbnMgPSB0cnVlO1xyXG4gICAgLyoqIOiuvue9ruS4unRydWXml7boh6rpgILlupTniLblrrnnmoTlsLrlr7ggKi9cclxuICAgIEBJbnB1dCgpIGZpdCA9IGZhbHNlO1xyXG5cclxuICAgIC8qKiDlkK/nlKjnuqfogZTpgInkuK3lip/og70gKi9cclxuICAgIEBJbnB1dCgpIGNhc2NhZGVDaGVjayA9IHRydWU7XHJcbiAgICAvKiog5ZCR5LiL57qn6IGU6YCJ5LitICovXHJcbiAgICBASW5wdXQoKSBjYXNjYWRlRG93biA9IHRydWU7XHJcbiAgICAvKiog5ZCR5LiK57qn6IGU6YCJ5LitICovXHJcbiAgICBASW5wdXQoKSBjYXNjYWRlVXAgPSB0cnVlO1xyXG4gICAgLyoqIOepuuaVsOaNruaXtu+8jOaYvuekuueahOaPkOekuuaWh+acrCAqL1xyXG4gICAgQElucHV0KCkgZW1wdHlNZXNzYWdlID0gJ+aaguaXoOaVsOaNric7XHJcbiAgICAvKiog57yp6L+b6Ze06Led77yM6buY6K6k5Li6IDE2cHggKi9cclxuICAgIEBJbnB1dCgpIGluZGVudFNwYWNpbmcgPSAxNjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIOWNleWHu+ihjOmAieS4reWQju+8jOWcqOasoeeCueWHu+S4jeS8muiiq+WPlua2iOmAieS4reeKtuaAgTtcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkga2VlcFNlbGVjdCA9IHRydWU7XHJcbiAgICAvKiog6Jma5ouf5Yqg6L29ICovXHJcbiAgICBASW5wdXQoKSB2aXJ0dWFsaXplZCA9IGZhbHNlO1xyXG4gICAgLyoqXHJcbiAgICAgKiDku4XlhYHorrjpgInmi6nlj7blrZDoioLngrlcclxuICAgICAqIC0gZGVmYXVsdDog5bqU55So5pyN5Yqh5Zmo56uv5Lyg5Zue55qE6K6+572u77yM5aaC5p6c5pyN5Yqh5Zmo56uv5rKh5pyJ6K6+572u77yM5YiZ5LiOIG5vIOS/neaMgeS4gOiHs++8m1xyXG4gICAgICogLSB5ZXM6IOWmguaenOWuouaIt+err+iuvue9ruS4uiBgeWVzYCwg5pyN5Yqh5Zmo56uv55qE6K6+572u5aSx5pWI77ybXHJcbiAgICAgKiAtIG5vOiDlhYHorrjpgInmi6nmiYDmnInoioLngrnvvJvmnI3liqHlmajnq6/orr7nva7lpLHmlYhcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgb25seVNlbGVjdExlYWY6IGJvb2xlYW4gfCAnZGVmYXVsdCcgfCAneWVzJyB8ICdubycgPSAnZGVmYXVsdCc7XHJcblxyXG4gICAgLyoqIOaYvuekuuWbvuaghyAqL1xyXG4gICAgQElucHV0KCkgc2hvd0ljb24gPSBmYWxzZTtcclxuICAgIC8qKiDlj7blrZDoioLngrnlm77moIcgKi9cclxuICAgIEBJbnB1dCgpIGxlYWZJY29uID0gJ2ZpbGUnO1xyXG4gICAgLyoqIOiKgueCueWxleW8gOWbvuaghyAqL1xyXG4gICAgQElucHV0KCkgZXhwYW5kSWNvbiA9ICdmb2xkZXItb3Blbic7XHJcbiAgICAvKiog6IqC54K55oqY5Y+g5Zu+5qCHICovXHJcbiAgICBASW5wdXQoKSBjb2xsYXBzZUljb24gPSAnZm9sZGVyJztcclxuXHJcbiAgICBASW5wdXQoKSBmb2xkSWNvbiA9ICd0cmVldGFibGUtdG9nZ2xlcic7XHJcbiAgICBASW5wdXQoKSB1bmZvbGRJY29uID0gJ2V4dGFuZGVkIHRyZWV0YWJsZS10b2dnbGVyJztcclxuXHJcbiAgICAvKiog5ZCv55So6IqC54K55Zu+5qCH5LuO5pWw5o2u5Lit6I635Y+W44CCIOm7mOiupOS4uiBmYWxzZSAqL1xyXG4gICAgQElucHV0KCkgdXNlSWNvbkZyb21EYXRhID0gZmFsc2U7XHJcbiAgICAvKiog5b2T5pWw5o2u5rqQ5LitaWNvbuacquiuvue9ruaXtuS9v+eUqOWGhee9rklDT04uIOm7mOiupOS4uiB0cnVlICovXHJcbiAgICBASW5wdXQoKSB3aGVuRGF0YUljb25FbXB0eVVzZURlZmF1bHQgPSB0cnVlO1xyXG4gICAgLyoqIOS7juaVsOaNrua6kOWtl+auteS4reiOt+WPluWbvuaghyAqL1xyXG4gICAgQElucHV0KCkgaWNvbkZpZWxkOiBJY29uRmllbGRUeXBlID0gJyc7XHJcbiAgICAvKiog5Zu+5qCH6Ieq5a6a5LmJ5qC35byPICovXHJcbiAgICBASW5wdXQoKSBpY29uQ2xzOiBzdHJpbmc7XHJcblxyXG4gICAgLyoqIOWQr+eUqOi/nOerr+aOkuW6jyAqL1xyXG4gICAgQElucHV0KCkgcmVtb3RlU29ydCA9IHRydWU7XHJcbiAgICAvKiog5o6S5bqP5a2X5q61ICovXHJcbiAgICBASW5wdXQoKSBzb3J0TmFtZTogc3RyaW5nO1xyXG4gICAgLyoqIOaOkuW6j+aWueW8jyBhc2MgfCBkZXNjICovXHJcbiAgICBASW5wdXQoKSBzb3J0T3JkZXI6IHN0cmluZztcclxuICAgIC8qKiDlhYHorrjlpJrliJfmjpLluo8gKi9cclxuICAgIEBJbnB1dCgpIG11bHRpU29ydDogYm9vbGVhbjtcclxuXHJcbiAgICBASW5wdXQoKSBiZWZvcmVTb3J0Q29sdW1uOiAoZmllbGQ6IHN0cmluZywgb3JkZXI6IHN0cmluZykgPT4gT2JzZXJ2YWJsZTxib29sZWFuPjtcclxuXHJcbiAgICBASW5wdXQoKSByb3dTdHlsZXI6ICh0cmVlTm9kZTogVHJlZU5vZGUsIGZpZWxkPzogc3RyaW5nKSA9PiBhbnk7XHJcbiAgICBASW5wdXQoKSBjZWxsU3R5bGVyOiAodHJlZU5vZGU6IFRyZWVOb2RlLCBmaWVsZDogc3RyaW5nKSA9PiBhbnk7XHJcblxyXG4gICAgLyoqIOWQr+eUqOWJjeerr+aWh+acrOafpeaJviAqL1xyXG4gICAgQElucHV0KCkgZW5hYmxlRmluZFRleHQgPSBmYWxzZTtcclxuICAgIC8qKiDmlofmnKzmn6Xor6LlrZfmrrUsIOW8g+eUqCAqL1xyXG4gICAgQElucHV0KCkgZmluZEZpZWxkOiBzdHJpbmc7XHJcbiAgICAvLyDmoJHliJfooajpu5jorqTlsZXlvIDlsYLnuqfjgIIgLTHvvJog5LiN5bGV5byA77ybIDDvvJog5YWo6YOo5bGV5byA77ybID4wOiAg5bGV5byA5Yiw5oyH5a6a57qn5pWw77ybXHJcbiAgICBASW5wdXQoKSBleHBhbmRMZXZlbCA9IC0xO1xyXG5cclxuICAgIEBJbnB1dCgpIHNlbGVjdFZhbHVlID0gJyc7XHJcbiAgICBAT3V0cHV0KCkgc2VsZWN0VmFsdWVDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICAvKiog5ZCv55So5Y+M5Ye75bGV5byA6IqC54K5ICovXHJcbiAgICBASW5wdXQoKSBkYmxDbGlja0V4cGFuZCA9IHRydWU7XHJcblxyXG4gICAgLyoqIOmAieS4reiKgueCuUlE5pWw57uEICovXHJcbiAgICBASW5wdXQoKSBzZWxlY3RWYWx1ZXMgPSBbXTtcclxuICAgIEBPdXRwdXQoKSBzZWxlY3RWYWx1ZXNDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICAvKiog5piv5ZCm56aB5q2i5oqY6KGM77yM6buY6K6k5LiN5oqY6KGMICovXHJcbiAgICBASW5wdXQoKSBub3dyYXAgPSB0cnVlO1xyXG5cclxuICAgIEBJbnB1dCgpIGNoZWNrVmFsdWVzID0gW107XHJcbiAgICBAT3V0cHV0KCkgY2hlY2tWYWx1ZXNDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG5cclxuICAgIEBJbnB1dCgpIGJlZm9yZU5vZGVTZWxlY3RlZDogKGU6IGFueSkgPT4gT2JzZXJ2YWJsZTxib29sZWFuPjtcclxuICAgIEBJbnB1dCgpIGJlZm9yZU5vZGVVblNlbGVjdGVkOiAoKSA9PiBPYnNlcnZhYmxlPGJvb2xlYW4+O1xyXG5cclxuICAgIEBJbnB1dCgpIGJlZm9yZU5vZGVDaGVja2VkOiAoKSA9PiBPYnNlcnZhYmxlPGJvb2xlYW4+O1xyXG4gICAgQElucHV0KCkgYmVmb3JlTm9kZVVuQ2hlY2tlZDogKCkgPT4gT2JzZXJ2YWJsZTxib29sZWFuPjtcclxuXHJcbiAgICBASW5wdXQoKSBiZWZvcmVDaGVja0FsbDogKGU/OiBhbnkpID0+IE9ic2VydmFibGU8Ym9vbGVhbj47XHJcbiAgICBASW5wdXQoKSBiZWZvcmVVbkNoZWNrQWxsOiAoZT86IGFueSkgPT4gT2JzZXJ2YWJsZTxib29sZWFuPjtcclxuXHJcbiAgICBASW5wdXQoKSBiZWZvcmVDbGlja05vZGU6IChlPzogYW55KSA9PiBPYnNlcnZhYmxlPGJvb2xlYW4+O1xyXG5cclxuICAgIC8qKiDliIbpobXkv6Hmga8gKi9cclxuICAgIEBJbnB1dCgpIHBhZ2luYXRpb24gPSBmYWxzZTtcclxuICAgIC8qKiDliIbpobXliqDovb3lrZDoioLngrnmlbDmja4gKi9cclxuICAgIEBJbnB1dCgpIHBhZ2luYXRpb25Gb3JDaGlsZHJlbiA9IGZhbHNlO1xyXG4gICAgLyoqIOWIhumhteadoeaYvuekuuaooeW8j++8jCBkZWZhdWx0LCBzaW1wbGUgKi9cclxuICAgIEBJbnB1dCgpIHBhZ2VyVmlld01vZGUgPSAnZGVmYXVsdCc7XHJcbiAgICAvKiog5ZCv55So5pyN5Yqh5Zmo56uv5YiG6aG1ICovXHJcbiAgICBASW5wdXQoKSBwYWdlck9uU2VydmVyID0gdHJ1ZTtcclxuICAgIC8qKiDmr4/pobXorrDlvZXmlbAgKi9cclxuICAgIEBJbnB1dCgpIHBhZ2VMaXN0ID0gWzEwLCAyMCwgMzAsIDUwLCAxMDBdO1xyXG4gICAgLyoqIOW9k+WJjemhteeggSAqL1xyXG4gICAgQElucHV0KCkgcGFnZUluZGV4ID0gMTtcclxuICAgIC8qKiDmr4/pobXorrDlvZXmlbAgKi9cclxuICAgIEBJbnB1dCgpIHBhZ2VTaXplID0gMjA7XHJcbiAgICAvKiog5YiG6aG15Yy66auY5bqmICovXHJcbiAgICBASW5wdXQoKSBwYWdlckhlaWdodCA9IDU2O1xyXG4gICAgLyoqIOaYvuekuuavj+mhteiusOW9leaVsCAqL1xyXG4gICAgQElucHV0KCkgc2hvd1BhZ2VMaXN0ID0gZmFsc2U7XHJcbiAgICAvKiog5pi+56S65YiG6aG15L+h5oGvICovXHJcbiAgICBASW5wdXQoKSBzaG93UGFnZUluZm8gPSB0cnVlO1xyXG4gICAgLyoqIOaYvuekuumhteeggSAqL1xyXG4gICAgQElucHV0KCkgc2hvd1BhZ2VOdW1iZXIgPSB0cnVlO1xyXG4gICAgLyoqIOaYvuekuumhteeggeacgOWkp+aVsOmHjyAqL1xyXG4gICAgQElucHV0KCkgcGFnZXJMYWJlbFNpemUgPSA3O1xyXG4gICAgLyoqIOaYvuekuumhteeggei+k+WFpeahhiAqL1xyXG4gICAgQElucHV0KCkgc2hvd0dvdG9JbnB1dCA9IGZhbHNlO1xyXG4gICAgLyoqIOWtkOiKgueCueWIhumhteaYr+WQpuaYvuekuuaAu+iusOW9leaVsO+8jOm7mOiupCBmYWxzZSAqL1xyXG4gICAgQElucHV0KCkgc2hvd1RvdGFsRm9yQ2hpbGRyZW4gPSBmYWxzZTtcclxuICAgIC8qKiDmgLvorrDlvZXmlbAgKi9cclxuICAgIEBJbnB1dCgpIHRvdGFsID0gMDtcclxuXHJcblxyXG4gICAgQElucHV0KCkgZW5hYmxlQ29udGV4dE1lbnUgPSBmYWxzZTtcclxuICAgIEBJbnB1dCgpIGNvbnRleHRNZW51SXRlbXMgPSBbXTtcclxuICAgIEBJbnB1dCgpIGJlZm9yZVNob3dDb250ZXh0TWVudTogKGU6IHsgW2tleTogc3RyaW5nXTogYW55IH0pID0+IE9ic2VydmFibGU8eyBzaG93OiBib29sZWFuLCBtZW51czogQXJyYXk8YW55Pn0+O1xyXG5cclxuICAgIEBPdXRwdXQoKSBwYWdlU2l6ZUNoYW5nZWQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICBAT3V0cHV0KCkgcGFnZUNoYW5nZWQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgLyoqIOaOkuW6j+WQjiAqL1xyXG4gICAgQE91dHB1dCgpIGNvbHVtblNvcnRlZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIC8qKiDpgInkuK3kuovku7YgKi9cclxuICAgIEBPdXRwdXQoKSBub2RlU2VsZWN0ZWQ6IEV2ZW50RW1pdHRlcjxOb2RlU2VsZWN0ZWRQYXJhbT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICAvKiog5Y+W5raI6YCJ5Lit5LqL5Lu2ICovXHJcbiAgICBAT3V0cHV0KCkgbm9kZVVuU2VsZWN0OiBFdmVudEVtaXR0ZXI8Tm9kZVNlbGVjdGVkUGFyYW0+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICAgIC8qKiDpkqnpgIkgKi9cclxuICAgIEBPdXRwdXQoKSBub2RlQ2hlY2tlZDogRXZlbnRFbWl0dGVyPE5vZGVDaGVja2VkUGFyYW0+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgLyoqIOWPlua2iOmSqemAiSAqL1xyXG4gICAgQE91dHB1dCgpIG5vZGVVbkNoZWNrZWQ6IEV2ZW50RW1pdHRlcjxOb2RlQ2hlY2tlZFBhcmFtPiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgICAvKiog5YWo6YCJ5LqL5Lu2ICovXHJcbiAgICBAT3V0cHV0KCkgY2hlY2tBbGw6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgLyoqIOWPlua2iOWFqOmAiSAqL1xyXG4gICAgQE91dHB1dCgpIHVuQ2hlY2tBbGw6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgLyoqIOafpeivoiAqL1xyXG4gICAgQE91dHB1dCgpIHNlYXJjaDogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgQE91dHB1dCgpIGRibENsaWNrOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgICBAT3V0cHV0KCkgbG9hZGVkRGF0YTogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgQE91dHB1dCgpIGV4cGFuZDogRXZlbnRFbWl0dGVyPFRyZWVOb2RlPiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIEBPdXRwdXQoKSBjb2xsYXBzZTogRXZlbnRFbWl0dGVyPFRyZWVOb2RlPiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgICBAT3V0cHV0KCkgZXhwYW5kQWxsTm9kZXM6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgQE91dHB1dCgpIGNvbGxhcHNlQWxsTm9kZXM6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICAgIEBPdXRwdXQoKSBhcHBlbmROZXc6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgQE91dHB1dCgpIHJlbW92ZWQ6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgQE91dHB1dCgpIHVwZGF0ZWQ6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICAgIEBPdXRwdXQoKSBjbGVhclNlYXJjaFZhbHVlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgQE91dHB1dCgpIGNlbGxDbGljayA9IG5ldyBFdmVudEVtaXR0ZXI8Q2VsbENsaWNrUGFyYW0+KCk7XHJcbiAgICBAT3V0cHV0KCkgY2hpbGRzUGFnZUNoYW5nZWQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgQE91dHB1dCgpIHNlYXJjaFZhbHVlQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcblxyXG4gICAgQElucHV0KCkgbG9hZGVkVGltZXIgPSAxMDA7XHJcblxyXG4gICAgc2VyaWFsaXplZFZhbHVlOiBSb3dOb2RlW107XHJcblxyXG4gICAgX2RhdGE6IFRyZWVOb2RlW10gPSBbXTtcclxuICAgIC8vIGxvYWRkYXRhIOaXtiDlhYjorr7nva7kuLrnqbrmlbDnu4TvvIxcclxuICAgIGlzTG9hZE5ld0RhdGFTZXRFbXB0eSA9IGZhbHNlO1xyXG4gICAgZ2V0IGRhdGEoKTogYW55W10ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kYXRhO1xyXG4gICAgfVxyXG4gICAgQElucHV0KCkgc2V0IGRhdGEodmFsOiBhbnlbXSkge1xyXG4gICAgICAgIHRoaXMuX2RhdGEgPSB2YWw7XHJcbiAgICAgICAgdGhpcy51cGRhdGVTZXJpYWxpemVkVmFsdWUoKTtcclxuICAgICAgICBpZiAoIXRoaXMuaXNMb2FkTmV3RGF0YVNldEVtcHR5KSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5pdE5vZGVTdGF0dXMoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gYXV0b3dpZHRoIOaXtu+8jOihqOWktOWuveW6puS+neaNruWGheWuueWuveW6puS9nOWQjOatpeWkhOeQhlxyXG4gICAgICAgIHRoaXMuc2V0TmV3Q29sdW1uc1dpZHRoKCk7XHJcblxyXG4gICAgICAgIHRoaXMubG9hZERhdGFTdWNjZXNzKCk7XHJcbiAgICB9XHJcbiAgICAvKiog5qC55o2u5YaF5a656Ieq5Yqo5a695bqm77yM6buY6K6kIGZhbHNlO1xyXG4gICAgICog5q2k5bGe5oCn5byA5ZCv5ZCO77yM6Ieq5Yqo5YiX5a695aSx5pWIXHJcbiAgICAgKi9cclxuICAgIEBJbnB1dCgpIGF1dG9XaWR0aCA9IGZhbHNlO1xyXG5cclxuICAgIEBDb250ZW50Q2hpbGRyZW4oRmFycmlzVGVtcGxhdGVEaXJlY3RpdmUpIHRlbXBsYXRlczogUXVlcnlMaXN0PEZhcnJpc1RlbXBsYXRlRGlyZWN0aXZlPjtcclxuICAgIEBDb250ZW50Q2hpbGRyZW4oVHJlZVRhYmxlQ29sdW1uRGlyZWN0aXZlKSBjb2x1bW5zUmVmOiBRdWVyeUxpc3Q8VHJlZVRhYmxlQ29sdW1uRGlyZWN0aXZlPjtcclxuXHJcbiAgICBAVmlld0NoaWxkKCdoZWFkZXJCb3gnKSBoZWFkZXJCb3g6IEVsZW1lbnRSZWY7XHJcbiAgICBAVmlld0NoaWxkKCdyZXNpemVySGVscGVyJykgcmVzaXplckhlbHBlclZDOiBFbGVtZW50UmVmO1xyXG4gICAgQFZpZXdDaGlsZCgnaGVhZGVyVGFibGUnKSBoZWFkZXJUYWJsZTogRWxlbWVudFJlZjtcclxuICAgIEBWaWV3Q2hpbGQoJ2JvZHlUYWJsZScpIGJvZHlUYWJsZTogRWxlbWVudFJlZjtcclxuXHJcbiAgICBAVmlld0NoaWxkKCdpbnB1dEdyb3VwJykgaW5wdXRHcm91cDogSW5wdXRHcm91cENvbXBvbmVudDtcclxuICAgIEBWaWV3Q2hpbGQoUGVyZmVjdFNjcm9sbGJhckNvbXBvbmVudCkgcHNSZWY/OiBQZXJmZWN0U2Nyb2xsYmFyQ29tcG9uZW50O1xyXG5cclxuICAgIHByaXZhdGUgaGVhZGVyQ2hlY2tib3hDbXA6IFRyZWVUYWJsZUhlYWRlckNoZWNrYm94Q29tcG9uZW50O1xyXG4gICAgQFZpZXdDaGlsZCgnYWxsQ2hlY2tib3gnKSBzZXQgYWxsQ2hlY2tib3goY29udGVudDogVHJlZVRhYmxlSGVhZGVyQ2hlY2tib3hDb21wb25lbnQpIHtcclxuICAgICAgICB0aGlzLmhlYWRlckNoZWNrYm94Q21wID0gY29udGVudDtcclxuICAgIH1cclxuXHJcbiAgICBAVmlld0NoaWxkKCdub2Rlc3BhZ2VyYmFyJykgbm9kZXNQYWdlckJhcjogVGVtcGxhdGVSZWY8YW55PjtcclxuICAgIEBWaWV3Q2hpbGQoRmFycmlzQ29udGV4dE1lbnVEaXJlY3RpdmUpIGN0eE1lbnU6IEZhcnJpc0NvbnRleHRNZW51RGlyZWN0aXZlO1xyXG4gICAgLyoqXHJcbiAgICAgKiDooajlpLTmqKHmnb9cclxuICAgICAqL1xyXG4gICAgaGVhZGVyVGVtcGxhdGU6IFRlbXBsYXRlUmVmPGFueT47XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDooajkvZPmqKHmnb9cclxuICAgICAqL1xyXG4gICAgYm9keVRlbXBsYXRlOiBUZW1wbGF0ZVJlZjxhbnk+O1xyXG5cclxuICAgIC8qKiDpgInkuK3pobnpm4blkIggKi9cclxuICAgIHByaXZhdGUgX3NlbGVjdGlvbnMgPSBbXTtcclxuICAgIGdldCBzZWxlY3Rpb25zKCk6IFRyZWVOb2RlW10ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zZWxlY3Rpb25zO1xyXG4gICAgfVxyXG4gICAgc2V0IHNlbGVjdGlvbnModmFsczogVHJlZU5vZGVbXSkge1xyXG4gICAgICAgIGlmICh2YWxzICYmIHZhbHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIC8vIOi/h+a7pOaOieaVsOaNrua6kOS4reS4jeWtmOWcqOiKgueCuVxyXG4gICAgICAgICAgICB0aGlzLl9zZWxlY3Rpb25zID0gdmFscy5maWx0ZXIodG4gPT4gdG4gJiYgdGhpcy5maW5kUm93Tm9kZSh0bi5pZCkpO1xyXG4gICAgICAgICAgICBjb25zdCBpZHMgPSB0aGlzLl9zZWxlY3Rpb25zLm1hcCh0biA9PiB0bi5pZCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoaWRzLmxlbmd0aCAhPT0gdGhpcy5zZWxlY3RWYWx1ZXMubGVuZ3RoIHx8XHJcbiAgICAgICAgICAgICAgICAoaWRzLmxlbmd0aCA9PT0gdGhpcy5zZWxlY3RWYWx1ZXMubGVuZ3RoICYmIHRoaXMuZGlmZmVyZW5jZShpZHMsIHRoaXMuc2VsZWN0VmFsdWVzKS5sZW5ndGgpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFZhbHVlcyA9IGlkcztcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0VmFsdWVzQ2hhbmdlLmVtaXQoaWRzKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fc2VsZWN0aW9ucyA9IFtdO1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdFZhbHVlcyA9IFtdO1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdFZhbHVlc0NoYW5nZS5lbWl0KFtdKTtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDpgInkuK3pobnntKLlvJVcclxuICAgICAqL1xyXG4gICAgc2VsZWN0Um93SW5kZXggPSAtMTtcclxuXHJcbiAgICAvKiog6YCJ5Lit5b2T5YmN6KGMICovXHJcbiAgICBwcml2YXRlIF9zZWxlY3RlZFJvdyA9IG51bGw7XHJcbiAgICBnZXQgc2VsZWN0ZWRSb3coKTogVHJlZU5vZGUge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zZWxlY3RlZFJvdztcclxuICAgIH1cclxuXHJcbiAgICBzZXQgc2VsZWN0ZWRSb3codHJlZU5vZGU6IFRyZWVOb2RlKSB7XHJcbiAgICAgICAgdGhpcy5fc2VsZWN0ZWRSb3cgPSB0cmVlTm9kZTtcclxuICAgICAgICBpZiAodHJlZU5vZGUpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0VmFsdWUgIT09IHRyZWVOb2RlLmlkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFZhbHVlID0gdHJlZU5vZGUuaWQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFZhbHVlQ2hhbmdlLmVtaXQodHJlZU5vZGUuaWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RWYWx1ZSA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0VmFsdWVDaGFuZ2UuZW1pdChudWxsKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKiDpkqnpgInnmoTorrDlvZXpm4blkIggKi9cclxuICAgIHByaXZhdGUgX2NoZWNrZWRzID0gW107XHJcbiAgICBnZXQgY2hlY2tlZHMoKTogVHJlZU5vZGVbXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrZWRzO1xyXG4gICAgfVxyXG4gICAgc2V0IGNoZWNrZWRzKHRyZWVOb2RlczogVHJlZU5vZGVbXSkge1xyXG4gICAgICAgIGlmICh0cmVlTm9kZXMgJiYgdHJlZU5vZGVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLl9jaGVja2VkcyA9IHRyZWVOb2Rlcy5maWx0ZXIodG4gPT4gdGhpcy5maW5kUm93Tm9kZSh0bi5pZCkpO1xyXG4gICAgICAgICAgICBjb25zdCBpZHMgPSB0aGlzLl9jaGVja2Vkcy5tYXAodG4gPT4gdG4uaWQpO1xyXG4gICAgICAgICAgICB0aGlzLmNoZWNrVmFsdWVzID0gdGhpcy5jaGVja1ZhbHVlcyB8fCBbXTtcclxuICAgICAgICAgICAgaWYgKGlkcy5sZW5ndGggIT09IHRoaXMuY2hlY2tWYWx1ZXMubGVuZ3RoIHx8ICAoaWRzLmxlbmd0aCA9PT0gdGhpcy5jaGVja1ZhbHVlcy5sZW5ndGggJiYgdGhpcy5kaWZmZXJlbmNlKGlkcywgdGhpcy5jaGVja1ZhbHVlcykubGVuZ3RoKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja1ZhbHVlcyA9IGlkcztcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tWYWx1ZXNDaGFuZ2UuZW1pdChpZHMpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9jaGVja2VkcyA9IFtdO1xyXG4gICAgICAgICAgICB0aGlzLmNoZWNrVmFsdWVzID0gW107XHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tWYWx1ZXNDaGFuZ2UuZW1pdChbXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIOacgOWkluWxgkRJVlxyXG4gICAgY29udGFpbmVyRWxlbWVudDogSFRNTERpdkVsZW1lbnQ7XHJcblxyXG4gICAgLy8g6K6w5b2V5YiX5ouW5Yqo5YmN55qE5L2N572uXHJcbiAgICBsYXN0UmVzaXplckhlbHBlclg6IG51bWJlcjtcclxuXHJcbiAgICBzZWFyY2hEYXRhID0geyBmaWVsZDogJyonLCB2YWx1ZTogJycgfTtcclxuXHJcbiAgICBzY29ybGxCb2R5SGVpZ2h0OiBudW1iZXI7XHJcblxyXG4gICAgc2VhcmNoSGFuZGxlOiBTZWFyY2hIYW5kbGU7XHJcbiAgICBzZWFyY2hCdXR0b25UZXh0ID0gJzxpIGNsYXNzPVwiZi1pY29uIGYtaWNvbi1zZWFyY2hcIj48L2k+JztcclxuICAgIC8qKiDmmL7npLrmn6Xor6Llt6XlhbfmnaEgKi9cclxuICAgIHNob3dGaW5kSW5wdXQgPSBmYWxzZTtcclxuXHJcbiAgICBwcml2YXRlIGlzRGF0YUNoYW5nZWQgPSBmYWxzZTtcclxuXHJcbiAgICBzY3JvbGxMb2FkZXI6IFZpcnR1YWxpemVkTG9hZGVyU2VydmljZTtcclxuICAgIHRvcEhpZGVIZWlnaHQgPSAwO1xyXG4gICAgYm90dG9tSGlkZUhlaWdodCA9IDA7XHJcbiAgICBzdGF0ZSA9IHtcclxuICAgICAgICBzZWFyY2hSb3dOb2RlczogbnVsbCxcclxuICAgICAgICBzZWFyY2hlZDogZmFsc2UsXHJcbiAgICAgICAgcm93Tm9kZXM6IFtdLFxyXG4gICAgICAgIHNjcm9sbFk6IDAsXHJcbiAgICAgICAgc2Nyb2xsWDogMFxyXG4gICAgfTtcclxuXHJcbiAgICAvKiog5b6F5p+l6K+i55qE5paH5pysICovXHJcbiAgICBmaW5kVmFsdWUgPSAnJztcclxuICAgIC8qKiDnu5PmnpzmgLvmlbAgKi9cclxuICAgIGZpbmRDb3VudCA9IDA7XHJcbiAgICAvKiog5b2T5YmN57Si5byVICovXHJcbiAgICBmaW5kQ3VycmVudCA9IDA7XHJcbiAgICAvKiog5a2Y5YKo5paH5pys5p+l6K+i57uT5p6cICovXHJcbiAgICBmaW5kUmVzdWx0ID0gW107XHJcbiAgICBwcml2YXRlIHJvOiBSZXNpemVPYnNlcnZlciB8IG51bGwgPSBudWxsO1xyXG4gICAgcHJpdmF0ZSBmaW5kS2V5c0hhbmRsZXIgPSBudWxsO1xyXG4gICAgcHJpdmF0ZSBfaG90S2V5czogVFRIb3RrZXlzID0gbnVsbDtcclxuICAgIGxvY2FsZVNlcnZpY2U6IExvY2FsZVNlcnZpY2U7XHJcbiAgICBwcml2YXRlIGlkU2VydmljZTogSWRTZXJ2aWNlO1xyXG4gICAgcHJpdmF0ZSBzdHlsZVNoZWV0SWQgPSAndHJlZXRhYmxlLXN0eWxlLSc7XHJcbiAgICBwcml2YXRlIHN0eWxlRWxlbWVudDtcclxuXHJcbiAgICAvLyDosIPmlbTmqKHmnb/vvIzmraTlsZ7mgKfku4XkuLrluK7liqnkuK3nmoTmoJHnu4Tku7ZcclxuICAgIGZhc3QgPSBmYWxzZTtcclxuXHJcbiAgICBwYWdpbmF0aW9uT3B0aW9uczogUGFnaW5hdGlvbkluc3RhbmNlID0ge1xyXG4gICAgICAgIGlkOiAnRmFycmlzLVRyZWVUYWJsZS1QYWdpbmF0aW9uXycsXHJcbiAgICAgICAgaXRlbXNQZXJQYWdlOiB0aGlzLnBhZ2VTaXplLFxyXG4gICAgICAgIGN1cnJlbnRQYWdlOiB0aGlzLnBhZ2VJbmRleCxcclxuICAgICAgICBwYWdlTGlzdDogdGhpcy5wYWdlTGlzdCxcclxuICAgICAgICB0b3RhbEl0ZW1zOiB0aGlzLnRvdGFsLFxyXG4gICAgICAgIHJlbW90ZTogdGhpcy5wYWdlck9uU2VydmVyXHJcbiAgICB9O1xyXG5cclxuICAgIHNlbGVjdE5vZGVDaGFuZ2VkU3ViamVjdCA9IG5ldyBCZWhhdmlvclN1YmplY3QobnVsbCk7XHJcbiAgICBwcml2YXRlIF9VVUlEID0gJyc7XHJcbiAgICAvLyDmmK/lkKbmnInlm7rlrprliJdcclxuICAgIGZpeGVkQ29sdW1ucyA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBkZXN0cm95JCA9IG5ldyBTdWJqZWN0KCk7XHJcbiAgICBwcml2YXRlIGZhcnJpc0luc3RhbmNlczogRmFycmlzQ29tcG9uZW50SW5zdGFuY2VTZXJ2aWNlID0gbnVsbDtcclxuICAgIGRpZmZlcmVuY2UgPSAoZmlyc3Q6IGFueVtdLCBzZWNvbmQ6IGFueVtdKSA9PiBmaXJzdC5maWx0ZXIoaXRlbSA9PiAhc2Vjb25kLnNvbWUoc2Vjb25kSXRlbSA9PiBzZWNvbmRJdGVtID09IGl0ZW0pKTtcclxuICAgIHByaXZhdGUgZGVidWdTZXI6IERlYnVnU2VydmljZSA9IG51bGw7XHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwdWJsaWMgdHRTZXJ2aWNlOiBUcmVldGFibGVTZXJ2aWNlLCBwdWJsaWMgZWw6IEVsZW1lbnRSZWYsXHJcbiAgICAgICAgcHVibGljIHJlc2l6ZVNlcjogUmVzaXplU2VydmljZSwgcHJpdmF0ZSByZW5kZXJlcjogUmVuZGVyZXIyLFxyXG4gICAgICAgIHB1YmxpYyB1dGlsczogQ29tbW9uVXRpbHMsIHB1YmxpYyBjb2xGb3JtYXRTZXI6IENvbHVtbkZvcm1hdFNlcnZpY2UsXHJcbiAgICAgICAgcHJpdmF0ZSBzaG9ydGN1dHM6IFRUSG90a2V5cywgcHJpdmF0ZSBjZFJlZjogQ2hhbmdlRGV0ZWN0b3JSZWYsXHJcbiAgICAgICAgcHJpdmF0ZSBuZ1pvbmU6IE5nWm9uZSwgcHJpdmF0ZSBpbmplY3RvcjogSW5qZWN0b3IpIHtcclxuICAgICAgICB0aGlzLnNlYXJjaEhhbmRsZSA9IG5ldyBTZWFyY2hIYW5kbGUodGhpcyk7XHJcbiAgICAgICAgdGhpcy5zY3JvbGxMb2FkZXIgPSBuZXcgVmlydHVhbGl6ZWRMb2FkZXJTZXJ2aWNlKHRoaXMpO1xyXG4gICAgICAgIGlmICh0aGlzLmluamVjdG9yKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hvdEtleXMgPSB0aGlzLmluamVjdG9yLmdldChUVEhvdGtleXMsIG51bGwpO1xyXG4gICAgICAgICAgICB0aGlzLmxvY2FsZVNlcnZpY2UgPSB0aGlzLmluamVjdG9yLmdldChMb2NhbGVTZXJ2aWNlLCBudWxsKTtcclxuICAgICAgICAgICAgdGhpcy5pZFNlcnZpY2UgPSB0aGlzLmluamVjdG9yLmdldChJZFNlcnZpY2UsIG51bGwpO1xyXG4gICAgICAgICAgICB0aGlzLmZhcnJpc0luc3RhbmNlcyA9IHRoaXMuaW5qZWN0b3IuZ2V0KEZhcnJpc0NvbXBvbmVudEluc3RhbmNlU2VydmljZSwgbnVsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmlkU2VydmljZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9VVUlEID0gdGhpcy5pZFNlcnZpY2UudXVpZCgpO1xyXG4gICAgICAgICAgICB0aGlzLnN0eWxlU2hlZXRJZCArPSB0aGlzLmlkU2VydmljZS51dWlkKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fVVVJRCA9ICgnJyArIE1hdGgucmFuZG9tKCkpLnNsaWNlKDIpO1xyXG4gICAgICAgICAgICB0aGlzLnN0eWxlU2hlZXRJZCArPSAoJycgKyBNYXRoLnJhbmRvbSgpKS5zbGljZSgyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMudHRTZXJ2aWNlID0gbmV3IFRyZWV0YWJsZVNlcnZpY2UoKTtcclxuXHJcbiAgICAgICAgdGhpcy5kZWJ1Z1NlciA9IHRoaXMuaW5qZWN0b3IuZ2V0KERlYnVnU2VydmljZSwgbnVsbCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmRlYnVnU2VyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVidWdTZXIudXNlRGVidWdNb2RlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHdyaXRlQ29uc29sZShtc2csIHR5cGU6ICdpbmZvJ3wnbG9nJ3wnd2Fybid8J2Vycm9yJyA9ICd3YXJuJykge1xyXG4gICAgICAgIGlmICh0aGlzLmRlYnVnU2VyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVidWdTZXJbdHlwZV0obXNnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjaGVja09wdG9ucygpIHtcclxuICAgICAgICAvLyDlkK/nlKjmlbDmja7mipjooYzlkI7vvIzomZrmi5/muLLmn5Plip/og73lpLHmlYhcclxuICAgICAgICBpZiAoIXRoaXMubm93cmFwKSB7XHJcbiAgICAgICAgICAgIHRoaXMudmlydHVhbGl6ZWQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlU2V0U2l6ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnNldFNjb3JsbEJvZHlIZWlnaHQoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMubXVsdGlTZWxlY3QpIHtcclxuICAgICAgICAgICAgdGhpcy5zaW5nbGVTZWxlY3QgPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNpbmdsZVNlbGVjdCAmJiB0aGlzLnNob3dDaGVja2JveCkge1xyXG4gICAgICAgICAgICB0aGlzLmNoZWNrT25TZWxlY3QgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdE9uQ2hlY2sgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmJlZm9yZVNvcnRDb2x1bW4pIHtcclxuICAgICAgICAgICAgdGhpcy5iZWZvcmVTb3J0Q29sdW1uID0gKCkgPT4gb2YodHJ1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5maXQpIHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsICdmLXV0aWxzLWZpbGwtZmxleC1jb2x1bW4nKTtcclxuICAgICAgICAgICAgY29uc3QgcGFyZW50RWwgPSB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQucGFyZW50RWxlbWVudCB8fCB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQucGFyZW50Tm9kZTtcclxuICAgICAgICAgICAgaWYgKHBhcmVudEVsKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKHBhcmVudEVsLCAnZi11dGlscy1maWxsJyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKHBhcmVudEVsLCAnb3ZlcmZsb3cnLCAnaGlkZGVuJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5iZWZvcmVDbGlja05vZGUpIHtcclxuICAgICAgICAgICAgdGhpcy5iZWZvcmVDbGlja05vZGUgPSAoKSA9PiBvZih0cnVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5iZWZvcmVDaGVja0FsbCkge1xyXG4gICAgICAgICAgICB0aGlzLmJlZm9yZUNoZWNrQWxsID0gKCkgPT4gb2YodHJ1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMuYmVmb3JlVW5DaGVja0FsbCkge1xyXG4gICAgICAgICAgICB0aGlzLmJlZm9yZVVuQ2hlY2tBbGwgPSAoKSA9PiBvZih0cnVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmF1dG9XaWR0aCkge1xyXG4gICAgICAgICAgICB0aGlzLmZpdENvbHVtbnMgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5yZXNpemFibGVDb2x1bW5zID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMuZGlzYWJsZWRSb3cpIHtcclxuICAgICAgICAgICAgdGhpcy5kaXNhYmxlZFJvdyA9ICgpID0+IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBuZ09uSW5pdCgpIHtcclxuICAgICAgICB0aGlzLmlkID0gJ1RyZWV0YWJsZS0nICsgdGhpcy5fVVVJRDtcclxuICAgICAgICAvLyDliJvlu7ogc3R5bGVzaGVldFxyXG4gICAgICAgIHRoaXMuc3R5bGVFbGVtZW50ID0gdGhpcy51dGlscy5jcmVhdGVTdHlsZVNoZWV0KHRoaXMuc3R5bGVTaGVldElkKTtcclxuICAgICAgICB0aGlzLmNoZWNrQ29sdW1uT3B0aW9uKCk7XHJcblxyXG4gICAgICAgIHRoaXMuY2hlY2tPcHRvbnMoKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMubmdab25lKSB7XHJcbiAgICAgICAgICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQucGFyZW50RWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucm8gPSBuZXcgUmVzaXplT2JzZXJ2ZXIoKGVudHJpZXMsIG9ic2VydmVyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbnRyaWVzICYmIGVudHJpZXNbMF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gZW50cmllc1swXS5jb250ZW50UmVjdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9ICBlbnRyaWVzWzBdLnRhcmdldDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5maXQgJiYgdGFyZ2V0WydvZmZzZXRQYXJlbnQnXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVzaXplKHsgd2lkdGgsIGhlaWdodDogdGhpcy5zaG93Qm9yZGVyPyBoZWlnaHQgLTI6IGhlaWdodCB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucm8ub2JzZXJ2ZSh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQucGFyZW50RWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5wYWdpbmF0aW9uT3B0aW9ucyA9IHRoaXMuaW5pdFBhZ2luYXRpb25PcHRpb25zKCk7XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkRlc3Ryb3koKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucm8pIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZWwubmF0aXZlRWxlbWVudC5wYXJlbnRFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJvLnVub2JzZXJ2ZSh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQucGFyZW50RWxlbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5yby5kaXNjb25uZWN0KCk7XHJcbiAgICAgICAgICAgIHRoaXMucm8gPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZmluZEtleXNIYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmluZEtleXNIYW5kbGVyLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnV0aWxzLnJlbW92ZVN0eWxlU2hlZXQodGhpcy5zdHlsZVNoZWV0SWQpO1xyXG4gICAgICAgIHRoaXMuc3R5bGVFbGVtZW50ID0gbnVsbDtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZmFycmlzSW5zdGFuY2VzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmFycmlzSW5zdGFuY2VzLmRlc3Ryb3kodGhpcy5lbC5uYXRpdmVFbGVtZW50KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMudHRTZXJ2aWNlID0gbnVsbDtcclxuXHJcbiAgICAgICAgdGhpcy5kZXN0cm95JC5uZXh0KCk7XHJcbiAgICAgICAgdGhpcy5kZXN0cm95JC5jb21wbGV0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpIHtcclxuICAgICAgICBpZiAoY2hhbmdlcy5kYXRhICYmICFjaGFuZ2VzLmRhdGEuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaXNEYXRhQ2hhbmdlZCA9IGNoYW5nZXMuZGF0YS5jdXJyZW50VmFsdWUgIT09IGNoYW5nZXMuZGF0YS5wcmV2aW91c1ZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMubXVsdGlTZWxlY3QgJiYgIWNoYW5nZXMubXVsdGlTZWxlY3QuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2luZ2xlU2VsZWN0ID0gIWNoYW5nZXMubXVsdGlTZWxlY3QuY3VycmVudFZhbHVlO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zaW5nbGVTZWxlY3QgJiYgdGhpcy5zaG93Q2hlY2tib3gpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0T25DaGVjayA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrT25TZWxlY3QgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY2hhbmdlcy5kaXNhYmxlZCAmJiAhY2hhbmdlcy5kaXNhYmxlZC5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5ob3ZlcmVkID0gIWNoYW5nZXMuZGlzYWJsZWQuY3VycmVudFZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMuZW5hYmxlRmluZFRleHQgJiYgIWNoYW5nZXMuZW5hYmxlRmluZFRleHQuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0RmluZFRleHQoY2hhbmdlcy5lbmFibGVGaW5kVGV4dC5jdXJyZW50VmFsdWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMuc2VsZWN0VmFsdWUgJiYgIWNoYW5nZXMuc2VsZWN0VmFsdWUuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0Tm9kZShjaGFuZ2VzLnNlbGVjdFZhbHVlLmN1cnJlbnRWYWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjaGFuZ2VzLnNlbGVjdFZhbHVlcyAmJiAhY2hhbmdlcy5zZWxlY3RWYWx1ZXMuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0Tm9kZXMoY2hhbmdlcy5zZWxlY3RWYWx1ZXMuY3VycmVudFZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNoYW5nZXMuY2hlY2tWYWx1ZXMgJiYgIWNoYW5nZXMuY2hlY2tWYWx1ZXMuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tlZE5vZGVzKGNoYW5nZXMuY2hlY2tWYWx1ZXMuY3VycmVudFZhbHVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjaGFuZ2VzLnBhZ2VJbmRleCAhPT0gdW5kZWZpbmVkICYmICFjaGFuZ2VzLnBhZ2VJbmRleC5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5wYWdpbmF0aW9uT3B0aW9ucyA9IE9iamVjdC5hc3NpZ24odGhpcy5wYWdpbmF0aW9uT3B0aW9ucywge1xyXG4gICAgICAgICAgICAgICAgY3VycmVudFBhZ2U6IHRoaXMucGFnZUluZGV4XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMucGFnZVNpemUgIT09IHVuZGVmaW5lZCAmJiAhY2hhbmdlcy5wYWdlU2l6ZS5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5wYWdpbmF0aW9uT3B0aW9ucyA9IE9iamVjdC5hc3NpZ24odGhpcy5wYWdpbmF0aW9uT3B0aW9ucywge1xyXG4gICAgICAgICAgICAgICAgaXRlbXNQZXJQYWdlOiB0aGlzLnBhZ2VTaXplXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMucGFnZUxpc3QgIT09IHVuZGVmaW5lZCAmJiAhY2hhbmdlcy5wYWdlTGlzdC5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5wYWdpbmF0aW9uT3B0aW9ucyA9IE9iamVjdC5hc3NpZ24odGhpcy5wYWdpbmF0aW9uT3B0aW9ucywge1xyXG4gICAgICAgICAgICAgICAgcGFnZUxpc3Q6IHRoaXMucGFnZUxpc3RcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY2hhbmdlcy50b3RhbCAhPT0gdW5kZWZpbmVkICYmICFjaGFuZ2VzLnRvdGFsLmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnBhZ2luYXRpb25PcHRpb25zID0gT2JqZWN0LmFzc2lnbih0aGlzLnBhZ2luYXRpb25PcHRpb25zLCB7XHJcbiAgICAgICAgICAgICAgICB0b3RhbEl0ZW1zOiB0aGlzLnRvdGFsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMuZml0Q29sdW1ucyAmJiAhY2hhbmdlcy5maXRDb2x1bW5zLmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFRhYmxlV2lkdGgodGhpcy5hbGxDb2x1bW5zV2lkdGgoKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY2hhbmdlcy5jb2x1bW5zICYmICFjaGFuZ2VzLmNvbHVtbnMuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tDb2x1bW5PcHRpb24oKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjaGFuZ2VzLnNob3dCb3JkZXIgJiYgIWNoYW5nZXMuc2hvd0JvcmRlci5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAgICAgLy8gdGhpcy5yZVNldFNpemUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbmdBZnRlclZpZXdDaGVja2VkKCkge1xyXG4gICAgICAgIC8vIGlmICh0aGlzLmlzRGF0YUNoYW5nZWQpIHtcclxuICAgICAgICAvLyAgICAgdGhpcy5sb2FkZWREYXRhLmVtaXQoKTtcclxuICAgICAgICAvLyAgICAgdGhpcy5pc0RhdGFDaGFuZ2VkID0gZmFsc2U7XHJcbiAgICAgICAgLy8gfSBlbHNlIHtcclxuICAgICAgICAvLyAgICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xyXG4gICAgICAgIC8vICAgICAgICAgaWYgKHRoaXMucHNSZWYpIHtcclxuICAgICAgICAvLyAgICAgICAgICAgICB0aGlzLnBzUmVmLmRpcmVjdGl2ZVJlZi51cGRhdGUoKTtcclxuICAgICAgICAvLyAgICAgICAgIH1cclxuICAgICAgICAvLyAgICAgfSk7XHJcbiAgICAgICAgLy8gfVxyXG4gICAgfVxyXG5cclxuICAgIG5nQWZ0ZXJDb250ZW50SW5pdCgpIHtcclxuICAgICAgICB0aGlzLnRlbXBsYXRlcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoaXRlbS5nZXRUeXBlKCkpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2hlYWRlcic6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oZWFkZXJUZW1wbGF0ZSA9IGl0ZW0udGVtcGxhdGU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdib2R5JzpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmJvZHlUZW1wbGF0ZSA9IGl0ZW0udGVtcGxhdGU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuY29sdW1uc1JlZi5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5jb2x1bW5zID0gdGhpcy50dGMyY29sdW1ucyh0aGlzLmNvbHVtbnNSZWYpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jb2x1bW5zUmVmLmNoYW5nZXMuc3Vic2NyaWJlKChkOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29sdW1ucyA9IHRoaXMudHRjMmNvbHVtbnMoZCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBuZ0FmdGVyVmlld0luaXQoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXJFbGVtZW50ID0gdGhpcy5lbC5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mYXJyaXMtdHJlZXRhYmxlJyk7XHJcbiAgICAgXHJcbiAgICAgICAgdGhpcy5yZWdpc3RlclNob3J0Y3V0cygpO1xyXG5cclxuICAgICAgICAvLyBhdXRvd2lkdGgg5pe277yM6KGo5aS05a695bqm5L6d5o2u5YaF5a655a695bqm5L2c5ZCM5q2l5aSE55CGXHJcbiAgICAgICAgdGhpcy5zZXROZXdDb2x1bW5zV2lkdGgoKTtcclxuICAgICAgICB0aGlzLnNldFJpZ2h0Rml4ZWRDb2x1bW5TaGFkb3coKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZWwgJiYgdGhpcy5mYXJyaXNJbnN0YW5jZXMpIHtcclxuICAgICAgICAgICAgdGhpcy5mYXJyaXNJbnN0YW5jZXMuYWRkKHRoaXMuZWwubmF0aXZlRWxlbWVudCwgdGhpcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5ib2R5VGVtcGxhdGUpIHtcclxuICAgICAgICAgICAgdGhpcy51dGlscy5hcHBlbmRDc3NSdWxlcyhbYCMke3RoaXMuaWR9IC5mYXJyaXMtdHJlZXRhYmxlIC5mYXJyaXMtdHJlZXRhYmxlLXRib2R5IHRkIHtwYWRkaW5nOiAuMjVyZW0gMC43NXJlbTt9YF0sIHRoaXMuc3R5bGVFbGVtZW50LnNoZWV0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIOWFvOWuueaXp+eJiOiuvuiuoeWZqCAgICAgICAgXHJcbiAgICAgICAgaWYgKHRoaXMuZml0ICYmIHRoaXMuZWwubmF0aXZlRWxlbWVudC5wYXJlbnRFbGVtZW50Lm5vZGVOYW1lICE9PSAnRElWJykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5lbC5uYXRpdmVFbGVtZW50LnBhcmVudEVsZW1lbnQubm9kZU5hbWUgPT09ICdBUFAtREctVFJFRS1HUklEJykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGl2ID0gdGhpcy5lbC5uYXRpdmVFbGVtZW50LnBhcmVudEVsZW1lbnQuY2xvc2VzdCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGl2KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGl2LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMubG9hZERhdGFTdWNjZXNzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBsb2FkRGF0YVN1Y2Nlc3MoKSB7XHJcbiAgICAgICAgdGltZXIodGhpcy5sb2FkZWRUaW1lcikucGlwZShcclxuICAgICAgICAgICAgdGFrZVVudGlsKHRoaXMuZGVzdHJveSQpXHJcbiAgICAgICAgKS5zdWJzY3JpYmUoKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5wc1JlZiAmJiB0aGlzLnBzUmVmLmRpcmVjdGl2ZVJlZikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wc1JlZi5kaXJlY3RpdmVSZWYudXBkYXRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5sb2FkZWREYXRhLmVtaXQoKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwcml2YXRlIHNldE5ld0NvbHVtbnNXaWR0aCgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuYXV0b1dpZHRoKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgbmV3Q29sV2lkdGg6IGFueSA9IHt9O1xyXG4gICAgICAgIGxldCBoZWFkZXJDZWxscyA9IFtdO1xyXG4gICAgICAgIGxldCBmaXJzdFJvd0NlbGxzID0gW107XHJcbiAgICAgICAgLy8gbGV0IGNvbGdyb3VwcyA9IFtdO1xyXG4gICAgICAgIGlmICh0aGlzLnNob3dIZWFkZXIgJiYgdGhpcy5oZWFkZXJUYWJsZSkge1xyXG4gICAgICAgICAgICBoZWFkZXJDZWxscyA9IEFycmF5LmZyb208SFRNTEVsZW1lbnQ+KHRoaXMuaGVhZGVyVGFibGUubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCd0aCcpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuc2VyaWFsaXplZFZhbHVlICYmIHRoaXMuc2VyaWFsaXplZFZhbHVlLmxlbmd0aCAmJiB0aGlzLmJvZHlUYWJsZSkge1xyXG4gICAgICAgICAgICBmaXJzdFJvd0NlbGxzID0gQXJyYXkuZnJvbTxIVE1MRWxlbWVudD4odGhpcy5ib2R5VGFibGUubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCd0cicpLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RkJykpO1xyXG4gICAgICAgICAgICAvLyBjb2xncm91cHMgPSB0aGlzLmJvZHlUYWJsZS5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ2NvbGdyb3VwJykucXVlcnlTZWxlY3RvckFsbCgnY29sJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmaXJzdFJvd0NlbGxzLmZvckVhY2goKHRkOiBhbnksIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkTmFtZSA9IHRkLmdldEF0dHJpYnV0ZSgnZmllbGQnKTtcclxuICAgICAgICAgICAgbGV0IGNvbFdpZHRoID0gdGQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGgudG9GaXhlZCgyKTtcclxuICAgICAgICAgICAgbmV3Q29sV2lkdGhbZmllbGROYW1lXSA9IGNvbFdpZHRoO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgY29sID0gdGhpcy5jb2x1bW5zLmZpbmQoYyA9PiBjLmZpZWxkID09PSBmaWVsZE5hbWUpO1xyXG4gICAgICAgICAgICBpZiAoY29sICYmIGNvbC53aWR0aCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBjb2xXaWR0aCA9IGNvbFdpZHRoID4gY29sLndpZHRoID8gY29sV2lkdGggOiBjb2wud2lkdGg7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRkLnN0eWxlLm1pbldpZHRoID0gY29sV2lkdGggKyAncHgnO1xyXG4gICAgICAgICAgICBoZWFkZXJDZWxsc1tpbmRleF0uc3R5bGUud2lkdGggPSBjb2xXaWR0aCArICdweCc7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29sdW1uSXNWaXNpYmxlKGNvbCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnR0U2VydmljZS5jb2x1bW5Jc1Zpc2libGUoY29sLCB0aGlzKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJpdmF0ZSBjb2x1bW5Dc3NOYW1lKG46IGFueSkge1xyXG4gICAgICAgIHJldHVybiBgIyR7dGhpcy5pZH0gLnRyZWV0YWJsZS1jZWxsW2ZpZWxkPVwiJHtuLmZpZWxkfVwiXSwgIyR7dGhpcy5pZH0gLnRyZWV0YWJsZS1oZWFkZXItY2VsbFtmaWVsZD1cIiR7bi5maWVsZH1cIl06bm90KC5ncm91cC1oZWFkZXItY2VsbClgO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwcml2YXRlIGNoZWNrR3JvdXBDb2x1bW5zKCkge1xyXG4gICAgICAgIHZhciBpID0gdGhpcy5ncm91cENvbHVtbnMubGVuZ3RoIC0gMTtcclxuICAgICAgICB3aGlsZShpID49IDApIHtcclxuICAgICAgICAgICAgdmFyIGlkcyA9IHRoaXMuZ3JvdXBDb2x1bW5zW2ldLm1hcChuID0+IG4ucGFyZW50SWQpO1xyXG4gICAgICAgICAgICBpZHMgPSBBcnJheS5mcm9tKG5ldyBTZXQoaWRzKSk7XHJcbiAgICAgICAgICAgIGlkcy5tYXAoaWQgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2hpbGRDb2xzID0gdGhpcy5ncm91cENvbHVtbnNbaV0uZmlsdGVyKG4gPT4gbi5wYXJlbnRJZCA9PSBpZCkubWFwKG4gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGFGaWVsZCA9IHRoaXMuY29sdW1ucy5maW5kKGMgPT4gYy5pZCA9PT0gbi5pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGFGaWVsZCB8fCBuO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geyBcclxuICAgICAgICAgICAgICAgICAgICBpZCxcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogY2hpbGRDb2xzLnJlZHVjZSgocixjKSA9PiB7IHJldHVybiByKz1jLndpZHRoIH0sIDApLFxyXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IGNoaWxkQ29sc1swXS5sZWZ0LFxyXG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0OiBjaGlsZENvbHNbY2hpbGRDb2xzLmxlbmd0aCAtIDFdLnJpZ2h0IHx8IDBcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0pLmZvckVhY2gocCA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaSAtIDEgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBwQ29sID0gdGhpcy5ncm91cENvbHVtbnNbaS0xXS5maW5kKHBjID0+IHBjLmlkID09IHAuaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGFGaWVsZCA9IHRoaXMuY29sdW1ucy5maW5kKGMgPT4gYy5pZCA9PT0gcC5pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcENvbCA9IGRhdGFGaWVsZCB8fCBwQ29sO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBwQ29sLndpZHRoID0gcC53aWR0aDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocENvbC5maXhlZCA9PT0gJ2xlZnQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBDb2wubGVmdCA9IHAubGVmdDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBDb2wuZml4ZWQgPT09ICdyaWdodCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcENvbC5yaWdodCA9IHAucmlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaS0tO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyDmjInlm7rlrprliJfnmoTpobrluo/mjpLluo9cclxuICAgIHByaXZhdGUgc29ydENvbHVtbnNCeUZpeGVkKHVwZGF0ZUNvbHVtbnMgPSB0cnVlKSB7XHJcbiAgICAgICAgY29uc3QgZml4ZWRMZWZ0ID0gdGhpcy5jb2x1bW5zLmZpbHRlcihuID0+IG4uZml4ZWQgPT09ICdsZWZ0Jyk7XHJcbiAgICAgICAgY29uc3QgZml4ZWRDZW50ZXIgPSB0aGlzLmNvbHVtbnMuZmlsdGVyKG4gPT4gIW4uZml4ZWQgfHwgbi5maXhlZCA9PT0gJ2NlbnRlcicpO1xyXG4gICAgICAgIGNvbnN0IGZpeGVkUmlnaHQgPSB0aGlzLmNvbHVtbnMuZmlsdGVyKG4gPT4gbi5maXhlZCA9PT0gJ3JpZ2h0Jyk7XHJcblxyXG4gICAgICAgIGlmIChmaXhlZExlZnQgJiYgZml4ZWRMZWZ0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICBmaXhlZExlZnQuZm9yRWFjaCgobiwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG4ubGVmdCA9IGZpeGVkTGVmdC5yZWR1Y2UoKHIsIGMsIGkpPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA8IGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gciArPSBjLndpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcjtcclxuICAgICAgICAgICAgICAgICAgICB9LCAwKVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBuLmxlZnQgPSAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChmaXhlZFJpZ2h0ICYmIGZpeGVkUmlnaHQubGVuZ3RoKSB7XHJcblxyXG4gICAgICAgICAgICBsZXQgcmlnaHRXaWR0aFRvdGFsID0gZml4ZWRSaWdodC5yZWR1Y2UoKHIsIGMpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByICsgYy53aWR0aDtcclxuICAgICAgICAgICAgfSwgMCk7XHJcblxyXG4gICAgICAgICAgICBmaXhlZFJpZ2h0LmZvckVhY2goKG4sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICByaWdodFdpZHRoVG90YWwgLT0gbi53aWR0aDtcclxuICAgICAgICAgICAgICAgIG4ucmlnaHQgPSByaWdodFdpZHRoVG90YWw7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG5cclxuICAgICAgICBpZiAodXBkYXRlQ29sdW1ucykge1xyXG4gICAgICAgICAgICB0aGlzLmNvbHVtbnMgPSBmaXhlZExlZnQuY29uY2F0KGZpeGVkQ2VudGVyKS5jb25jYXQoZml4ZWRSaWdodCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY2hlY2tDb2x1bW5PcHRpb24oKSB7XHJcbiAgICAgICAgY29uc3QgY3NzUnVsZXMgPSBbXTtcclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8g5ZCv55So5YiG6aG15Yqg6L295a2Q6IqC54K5XHJcbiAgICAgICAgaWYgKHRoaXMucGFnaW5hdGlvbkZvckNoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhZ2VyQmFyQ29sOiBhbnkgPSB7XHJcbiAgICAgICAgICAgICAgICBmaWVsZDogTk9ERVNfUEFHRVJfQ09MVU1OX0ZJRUxELFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDE2MCxcclxuICAgICAgICAgICAgICAgIHRpdGxlOiAnJyxcclxuICAgICAgICAgICAgICAgIGFsaWduOiAnY2VudGVyJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiB0aGlzLm5vZGVzUGFnZXJCYXIsXHJcbiAgICAgICAgICAgICAgICByb3dzcGFuOiAxLFxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy51c2VHcm91cEhlYWRlcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZ3JvdXBDb2x1bW5zWzBdW3RoaXMuZ3JvdXBDb2x1bW5zWzBdLmxlbmd0aCAtIDFdLmZpeGVkID09PSAncmlnaHQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZXJCYXJDb2wuZml4ZWQgPSAncmlnaHQnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcGFnZXJCYXJDb2wucm93c3BhbiA9IHRoaXMuZ3JvdXBDb2x1bW5zLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ3JvdXBDb2x1bW5zWzBdLnB1c2gocGFnZXJCYXJDb2wpXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuY29sdW1ucy5wdXNoKHBhZ2VyQmFyQ29sKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBpZiAoIXRoaXMuZml0Q29sdW1ucykge1xyXG4gICAgICAgICAgICB0aGlzLnNvcnRDb2x1bW5zQnlGaXhlZCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jb2x1bW5zLmZvckVhY2goKG4sIGkpID0+IHtcclxuICAgICAgICAgICAgaWYgKG4udmlzaWJsZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBuLnZpc2libGUgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoblsnaGFsaWduJ10pIHtcclxuICAgICAgICAgICAgICAgIG4uaEFsaWduID0gblsnaGFsaWduJ107XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChuLndpZHRoID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIG4ud2lkdGggPSAxMDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghbi5pZCkge1xyXG4gICAgICAgICAgICAgICAgbi5pZCA9ICd0cmVldGFibGUtaGVhZGVyLScgKyAobi5maWVsZCB8fCBpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBjb2xXaWR0aFRvdGFsID0gdGhpcy5hbGxDb2x1bW5zV2lkdGgoKTtcclxuICAgICAgICBsZXQgZml4ZWRDb2xzID0gMDtcclxuXHJcbiAgICAgICAgY29uc3QgZml4ZWRSaWdodENvbHVtbnMgPSB0aGlzLmNvbHVtbnMuZmlsdGVyKG4gPT4gbi5maXhlZCA9PT0gJ3JpZ2h0Jyk7XHJcbiAgICAgICAgaWYgKGZpeGVkUmlnaHRDb2x1bW5zICYmIGZpeGVkUmlnaHRDb2x1bW5zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBmaXhlZFJpZ2h0Q29sdW1uc1swXVsncmlnaHRTaGFkb3dDb2wnXSA9IHRydWU7XHJcbiAgICAgICAgICAgIGZpeGVkUmlnaHRDb2x1bW5zW2ZpeGVkUmlnaHRDb2x1bW5zLmxlbmd0aCAtIDFdWydsYXN0Q29sdW1uJ10gPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbHVtbnMgJiYgdGhpcy5jb2x1bW5zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb2x1bW5zW3RoaXMuY29sdW1ucy5sZW5ndGggLSAxXVsnbGFzdENvbHVtbiddID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgZml4ZWRMZWZ0Q29sdW1ucyA9IHRoaXMuY29sdW1ucy5maWx0ZXIobiA9PiBuLmZpeGVkID09PSAnbGVmdCcpO1xyXG4gICAgICAgIGlmIChmaXhlZExlZnRDb2x1bW5zICYmIGZpeGVkTGVmdENvbHVtbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGZpeGVkTGVmdENvbHVtbnNbZml4ZWRMZWZ0Q29sdW1ucy5sZW5ndGggLSAxXVsnbGVmdFNoYWRvd0NvbCddID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZpeGVkQ29scyA9IHRoaXMuc2V0Q2VsbFdpZHRoQ3NzKGNvbFdpZHRoVG90YWwsIGZpeGVkQ29scywgY3NzUnVsZXMpO1xyXG4gICAgICAgIHRoaXMuc2V0VGFibGVXaWR0aChjb2xXaWR0aFRvdGFsKTtcclxuXHJcbiAgICAgICAgdGhpcy5maXhlZENvbHVtbnMgPSAhIWZpeGVkQ29scztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNldENlbGxXaWR0aENzcyhjb2xXaWR0aFRvdGFsOiBhbnksIGZpeGVkQ29sczogbnVtYmVyLCBjc3NSdWxlczogYW55W10pIHtcclxuXHJcblxyXG4gICAgICAgIHRoaXMuY29sdW1ucy5mb3JFYWNoKChuLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBpc1Zpc2libGUgPSB0aGlzLmNvbHVtbklzVmlzaWJsZShuKTtcclxuICAgICAgICAgICAgY29uc3QgcnVsZU5hbWUgPSB0aGlzLmNvbHVtbkNzc05hbWUobik7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBjc3NSdWxlID0gdGhpcy51dGlscy5nZXRDc3NSdWxlKHJ1bGVOYW1lLCB0aGlzLnN0eWxlRWxlbWVudC5zaGVldCk7XHJcbiAgICAgICAgICAgIGlmICghY3NzUnVsZSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHN0eWxlY3NzID0gcnVsZU5hbWUgKyAnIHsgJztcclxuICAgICAgICAgICAgICAgIHN0eWxlY3NzICs9IGlzVmlzaWJsZSA/ICcnIDogJ2Rpc3BsYXk6IG5vbmU7JztcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5maXRDb2x1bW5zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGVjc3MgKz0gYHdpZHRoOiAkeyhuLndpZHRoIC8gY29sV2lkdGhUb3RhbCAqIDEwMCkudG9GaXhlZCgyKX0lO2A7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlY3NzICs9IGB3aWR0aDogJHtuLndpZHRofXB4O2A7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuLmZpeGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuLmZpeGVkID09PSAnbGVmdCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlY3NzICs9IGBsZWZ0OiAke24ubGVmdH1weGA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXhlZENvbHMrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4uZml4ZWQgPT09ICdyaWdodCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlY3NzICs9IGByaWdodDogJHtuLnJpZ2h0fXB4YDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpeGVkQ29scysrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHN0eWxlY3NzICs9ICd9JztcclxuICAgICAgICAgICAgICAgIGNzc1J1bGVzLnB1c2goc3R5bGVjc3MpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY3NzUnVsZS5zdHlsZS5kaXNwbGF5ID0gaXNWaXNpYmxlID8gJycgOiAnbm9uZSc7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5maXRDb2x1bW5zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3NzUnVsZS5zdHlsZS53aWR0aCA9IGAkeyhuLndpZHRoIC8gY29sV2lkdGhUb3RhbCAqIDEwMCkudG9GaXhlZCgyKX0lYDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3NzUnVsZS5zdHlsZS53aWR0aCA9IGAke24ud2lkdGh9cHhgO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuLmZpeGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuLmZpeGVkID09PSAnbGVmdCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNzc1J1bGUuc3R5bGUubGVmdCA9IGAke24ubGVmdH1weGA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuLmZpeGVkID09PSAncmlnaHQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjc3NSdWxlLnN0eWxlLnJpZ2h0ID0gYCR7bi5yaWdodH1weGA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgIGlmICh0aGlzLnVzZUdyb3VwSGVhZGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXV0b1dpZHRoID0gZmFsc2U7ICAvLyDlpJrooajlpLTlkK/nlKjlkI7vvIzoh6rliqjliJflrr3lpLHmlYggVEZTIDQ5NjA4OFxyXG4gICAgICAgICAgICB0aGlzLmNoZWNrR3JvdXBDb2x1bW5zKCk7XHJcbiAgICAgICAgICAgIHZhciBpID0gdGhpcy5ncm91cENvbHVtbnMubGVuZ3RoIC0gMjtcclxuICAgICAgICAgICAgd2hpbGUgKGkgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZ3JvdXBIZWFkZXJDb2xDc3NlcyA9IHRoaXMuZ3JvdXBDb2x1bW5zW2ldLmZpbHRlcihjb2wgPT4gIWNvbC5maWVsZCkubWFwKGNvbCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGdyb3VwQ29sQ3NzTmFtZSA9IGAjJHtjb2wuaWR9eyB3aWR0aDogJHtjb2wud2lkdGh9cHhgO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29sLmZpeGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb2wuZml4ZWQgPT09ICdsZWZ0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBDb2xDc3NOYW1lICs9ICc7bGVmdDonICsgY29sLmxlZnQgKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29sLmZpeGVkID09PSAncmlnaHQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cENvbENzc05hbWUgKz0gJztyaWdodDonICsgY29sLnJpZ2h0ICsgJ3B4JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdyb3VwQ29sQ3NzTmFtZSArPSAnfSc7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB0aGlzLnV0aWxzLmFwcGVuZENzc1J1bGVzMihncm91cEhlYWRlckNvbENzc2VzLCB0aGlzLnN0eWxlRWxlbWVudC5zaGVldCk7XHJcbiAgICAgICAgICAgICAgICBpLS07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBpZiAoY3NzUnVsZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMudXRpbHMuYXBwZW5kQ3NzUnVsZXMoY3NzUnVsZXMsIHRoaXMuc3R5bGVFbGVtZW50LnNoZWV0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZpeGVkQ29scztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNldFRhYmxlV2lkdGgoY29sV2lkdGhUb3RhbDogbnVtYmVyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaGVhZGVyVGFibGUgJiYgdGhpcy5ib2R5VGFibGUpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmZpdENvbHVtbnMgJiYgIXRoaXMuYXV0b0ZpdENvbHVtbnMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaGVhZGVyVGFibGUubmF0aXZlRWxlbWVudC5zdHlsZS53aWR0aCA9IGAke2NvbFdpZHRoVG90YWx9cHhgO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ib2R5VGFibGUubmF0aXZlRWxlbWVudC5zdHlsZS53aWR0aCA9IGAke2NvbFdpZHRoVG90YWx9cHhgO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oZWFkZXJUYWJsZS5uYXRpdmVFbGVtZW50LnN0eWxlLndpZHRoID0gJzEwMCUnO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ib2R5VGFibGUubmF0aXZlRWxlbWVudC5zdHlsZS53aWR0aCA9ICcxMDAlJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFsbENvbHVtbnNXaWR0aCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb2x1bW5zLnJlZHVjZSgociwgYykgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jb2x1bW5Jc1Zpc2libGUoYykpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByICsgYy53aWR0aDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0sIDApO1xyXG4gICAgfVxyXG5cclxuICAgIG9uUGFnZUNoYW5nZSgkZXZlbnQpIHtcclxuICAgICAgICB0aGlzLnBhZ2VDaGFuZ2VkLmVtaXQoJGV2ZW50KTtcclxuICAgIH1cclxuXHJcbiAgICBvblBhZ2VTaXplQ2hhbmdlKCRldmVudCkge1xyXG4gICAgICAgIHRoaXMucGFnZVNpemVDaGFuZ2VkLmVtaXQoJGV2ZW50KTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVQYWdlSW5mbyhwYWdlSW5mbzogeyBwYWdlSW5kZXg/OiBudW1iZXIsIHBhZ2VTaXplPzogbnVtYmVyLCB0b3RhbD86IG51bWJlciwgcGFnZUxpc3Q/OiBudW1iZXJbXSB9KSB7XHJcbiAgICAgICAgaWYgKHBhZ2VJbmZvICYmIE9iamVjdC5rZXlzKHBhZ2VJbmZvKS5sZW5ndGgpIHtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG9iajogYW55ID0ge307XHJcbiAgICAgICAgICAgIGlmIChwYWdlSW5mby50b3RhbCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBvYmoudG90YWxJdGVtcyA9IHBhZ2VJbmZvLnRvdGFsO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAocGFnZUluZm8ucGFnZUluZGV4ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIG9iai5jdXJyZW50UGFnZSA9IHBhZ2VJbmZvLnBhZ2VJbmRleDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHBhZ2VJbmZvLnBhZ2VTaXplICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIG9iai5pdGVtc1BlclBhZ2UgPSBwYWdlSW5mby5wYWdlU2l6ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHBhZ2VJbmZvLnBhZ2VMaXN0ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIG9iai5wYWdlTGlzdCA9IHBhZ2VJbmZvLnBhZ2VMaXN0O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnBhZ2luYXRpb25PcHRpb25zID0gT2JqZWN0LmFzc2lnbih0aGlzLnBhZ2luYXRpb25PcHRpb25zLCBvYmopO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJpdmF0ZSBpbml0UGFnaW5hdGlvbk9wdGlvbnMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaWQ6ICdGYXJyaXMtVHJlZVRhYmxlLVBhZ2luYXRpb25fJyArIHRoaXMuX1VVSUQsXHJcbiAgICAgICAgICAgIGl0ZW1zUGVyUGFnZTogdGhpcy5wYWdlU2l6ZSxcclxuICAgICAgICAgICAgY3VycmVudFBhZ2U6IHRoaXMucGFnZUluZGV4LFxyXG4gICAgICAgICAgICBwYWdlTGlzdDogdGhpcy5wYWdlTGlzdCxcclxuICAgICAgICAgICAgdG90YWxJdGVtczogdGhpcy50b3RhbCxcclxuICAgICAgICAgICAgcmVtb3RlOiB0aGlzLnBhZ2VyT25TZXJ2ZXJcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGdldE5vZGVUZXh0KGNvbDogVHJlZVRhYmxlQ29sdW1uLCByb3dkYXRhLCBmYXN0ID0gZmFsc2UpIHtcclxuICAgICAgICBpZiAoY29sLmlzTXVsdGlsaW5ndWFsRmllbGQpIHtcclxuICAgICAgICAgICAgY29uc3QgdmFsID0gdGhpcy51dGlscy5nZXRWYWx1ZShjb2wuZmllbGQsIHJvd2RhdGEpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5sb2NhbGVTZXJ2aWNlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsb2NhbGVJZCA9IHRoaXMubG9jYWxlU2VydmljZS5sb2NhbGVJZCB8fCAnemgtQ0hTJztcclxuICAgICAgICAgICAgICAgIGlmICh2YWwgJiYgdHlwZW9mIHZhbCA9PT0gJ29iamVjdCcgJiYgT2JqZWN0LmtleXModmFsKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbFtsb2NhbGVJZF07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy51dGlscy5nZXRWYWx1ZShjb2wuZmllbGQsIHJvd2RhdGEsICFmYXN0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpbml0Tm9kZVN0YXR1cygpIHtcclxuICAgICAgICBpZiAoIXRoaXMuc2luZ2xlU2VsZWN0KSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrVmFsdWVzICYmIHRoaXMuY2hlY2tWYWx1ZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWROb2Rlcyh0aGlzLmNoZWNrVmFsdWVzLCBmYWxzZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdFZhbHVlcyAmJiB0aGlzLnNlbGVjdFZhbHVlcy5sZW5ndGggJiYgIXRoaXMub25seVNlbGVjdFNlbGYpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Tm9kZXModGhpcy5zZWxlY3RWYWx1ZXMsIGZhbHNlLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3ROb2RlKHRoaXMuc2VsZWN0VmFsdWUsIGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKiog5rOo5YaM5b+r5o236ZSuICovXHJcbiAgICBwcml2YXRlIHJlZ2lzdGVyU2hvcnRjdXRzKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnNob3dGaWx0ZXJCYXIgJiYgdGhpcy5faG90S2V5cykge1xyXG4gICAgICAgICAgICB0aGlzLl9ob3RLZXlzLmFkZFNob3J0Y3V0KHsga2V5czogJ2VudGVyJywgZWxlbWVudDogdGhpcy5pbnB1dEdyb3VwLnRleHRib3gubmF0aXZlRWxlbWVudCB9KS5zdWJzY3JpYmUoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vblNlYXJjaCgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc2V0RmluZFRleHQodGhpcy5lbmFibGVGaW5kVGV4dCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXRGaW5kVGV4dChlbmFibGUgPSB0cnVlKSB7XHJcbiAgICAgICAgdGhpcy5lbmFibGVGaW5kVGV4dCA9IGVuYWJsZTtcclxuICAgICAgICBpZiAodGhpcy5lbmFibGVGaW5kVGV4dCAmJiB0aGlzLl9ob3RLZXlzKSB7XHJcbiAgICAgICAgICAgIC8vIOafpeivouW3peWFt+adoVxyXG4gICAgICAgICAgICB0aGlzLmZpbmRLZXlzSGFuZGxlciA9IHRoaXMuX2hvdEtleXMuYWRkU2hvcnRjdXQoeyBrZXlzOiAnY29udHJvbC5zaGlmdC5mJyB9KS5zdWJzY3JpYmUoKGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZUZpbmRUZXh0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93RmluZElucHV0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2hvd0ZpbmRJbnB1dCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93RmluZElucHV0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNkUmVmLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5maW5kS2V5c0hhbmRsZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmluZEtleXNIYW5kbGVyLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpbmRLZXlzSGFuZGxlciA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRDdXN0b21DbHMocm93Tm9kZTogUm93Tm9kZSwgZmllbGQ6IHN0cmluZyA9ICcnLCBjbHNUeXBlOiAncm93JyB8ICdjZWxsJyA9ICdyb3cnKSB7XHJcbiAgICAgICAgY29uc3QgY2xzID0ge307XHJcbiAgICAgICAgbGV0IGZuID0gdGhpcy5yb3dTdHlsZXI7XHJcbiAgICAgICAgaWYgKGNsc1R5cGUgPT09ICdjZWxsJykge1xyXG4gICAgICAgICAgICBmbiA9IHRoaXMuY2VsbFN0eWxlcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChmbikge1xyXG4gICAgICAgICAgICBjb25zdCByb3dDbHMgPSBmbihyb3dOb2RlLm5vZGUsIGZpZWxkKTtcclxuICAgICAgICAgICAgaWYgKHJvd0Nscykge1xyXG4gICAgICAgICAgICAgICAgbGV0IGFycmNscyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByb3dDbHMgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXJyY2xzID0gW3Jvd0Nsc107XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHJvd0NscykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXJyY2xzID0gcm93Q2xzO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoYXJyY2xzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJvd0Nsc09iaiA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgIGFycmNscy5mb3JFYWNoKGMgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByb3dDbHNPYmpbJycgKyBjXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgX2NscyA9IHsgLi4ucm93Q2xzT2JqLCAuLi5jbHMgfTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NscztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJvd0NscztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjbHM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gY2xzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRSb3dDbHMocm93Tm9kZTogUm93Tm9kZSwgZmllbGQ/OiBzdHJpbmcpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRDdXN0b21DbHMocm93Tm9kZSwgJ3JvdycpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldENlbGxDbHMocm93Tm9kZTogUm93Tm9kZSwgZmllbGQ6IHN0cmluZykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldEN1c3RvbUNscyhyb3dOb2RlLCBmaWVsZCwgJ2NlbGwnKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRSZWFsQ29sV2lkdGgoY3VycmVudENvbDogVHJlZVRhYmxlQ29sdW1uKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY29sdW1ucyAmJiB0aGlzLmNvbHVtbnMubGVuZ3RoICYmIHRoaXMuZml0Q29sdW1ucykge1xyXG4gICAgICAgICAgICBjb25zdCBjb2xXaWR0aFRvdGFsID0gdGhpcy5jb2x1bW5zLnJlZHVjZSgociwgYykgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHIgKyAodGhpcy5jb2x1bW5Jc1Zpc2libGUoYykgJiYgKHIuZmllbGQgIT09IE5PREVTX1BBR0VSX0NPTFVNTl9GSUVMRCAgfHwgci5maXhlZFdpZHRoKT8gYy53aWR0aCA6IDApO1xyXG4gICAgICAgICAgICB9LCAwKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbHVtbklzVmlzaWJsZShjdXJyZW50Q29sKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCBjdXJyZW50Q29sLmZpZWxkICE9PSBOT0RFU19QQUdFUl9DT0xVTU5fRklFTEQgJiYgICFjdXJyZW50Q29sLmZpeGVkV2lkdGgpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGN1cnJlbnRDb2wud2lkdGggLyBjb2xXaWR0aFRvdGFsICogMTAwKS50b0ZpeGVkKDIpICsgJyUnO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGN1cnJlbnRDb2wud2lkdGggfHwgMTIwKSArICdweCc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY3VycmVudENvbC53aWR0aCArICdweCc7XHJcbiAgICB9XHJcblxyXG4gICAgQEhvc3RMaXN0ZW5lcignd2luZG93OnJlc2l6ZScpXHJcbiAgICBvblJlc2l6ZWQoKSB7XHJcbiAgICAgICAgdGhpcy5yZXNpemVTZXIud2luZG93UmVzaXplZCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0UmlnaHRGaXhlZENvbHVtblNoYWRvdygpIHtcclxuICAgICAgICBpZiAodGhpcy5wc1JlZiAmJiB0aGlzLnBzUmVmLmRpcmVjdGl2ZVJlZikge1xyXG4gICAgICAgICAgICBjb25zdCBwcyA9ICh0aGlzLnBzUmVmLmRpcmVjdGl2ZVJlZiBhcyBhbnkpLmluc3RhbmNlO1xyXG4gICAgICAgICAgICBpZiAoIXBzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgeyBjb250YWluZXJXaWR0aCwgc2Nyb2xsYmFyWExlZnQsIGNvbnRlbnRXaWR0aCB9ID0gcHM7XHJcbiAgICAgICAgICAgIGlmIChjb250YWluZXJXaWR0aCArIHNjcm9sbGJhclhMZWZ0IDwgY29udGVudFdpZHRoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgZml4ZWRSaWdodENvbHVtbnMgPSB0aGlzLmNvbHVtbnMuZmlsdGVyKG4gPT4gbi5maXhlZCA9PT0gJ3JpZ2h0Jyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBydWxlTmFtZSA9IGAjJHt0aGlzLmlkfS5mLXRyZWV0YWJsZS0tZml4ZWQtY29sdW1uc2A7XHJcbiAgICAgICAgICAgICAgICBpZiAoZml4ZWRSaWdodENvbHVtbnMgJiYgZml4ZWRSaWdodENvbHVtbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZml4ZWRSaWdodENzc1J1bGVLZXkgPSBgJHtydWxlTmFtZX0gW3ItdHQtc2hhZG93LWNvbF06OmJlZm9yZWA7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmlnaHRDU1NSdWxlID0gYCR7Zml4ZWRSaWdodENzc1J1bGVLZXl9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBib3gtc2hhZG93OiNkOWQ5ZDkgLTEycHggMHB4IDhweCAtMTJweCBpbnNldDtcclxuICAgICAgICAgICAgICAgICAgICB9YDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51dGlscy5hcHBlbmRDc3NSdWxlcyhbcmlnaHRDU1NSdWxlXSwgdGhpcy5zdHlsZUVsZW1lbnQuc2hlZXQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0Rml4ZWRDb2x1bW5TaGFkb3coeCwgZSkge1xyXG4gICAgICAgIGNvbnN0IGZpeGVkTGVmdENvbHVtbnMgPSB0aGlzLmNvbHVtbnMuZmlsdGVyKG4gPT4gbi5maXhlZCA9PT0gJ2xlZnQnKTtcclxuICAgICAgICBjb25zdCBmaXhlZFJpZ2h0Q29sdW1ucyA9IHRoaXMuY29sdW1ucy5maWx0ZXIobiA9PiBuLmZpeGVkID09PSAncmlnaHQnKTtcclxuICAgICAgICBjb25zdCBydWxlTmFtZSA9IGAjJHt0aGlzLmlkfS5mLXRyZWV0YWJsZS0tZml4ZWQtY29sdW1uc2A7XHJcbiAgICAgICAgbGV0IGZpeGVkTGVmdENzc1J1bGVLZXkgPSAnJztcclxuICAgICAgICBsZXQgZml4ZWRSaWdodENzc1J1bGVLZXkgPSAnJztcclxuICAgICAgICBsZXQgbGVmdENTU1J1bGUgPSAnJztcclxuICAgICAgICBsZXQgcmlnaHRDU1NSdWxlID0gJyc7XHJcbiAgICAgICAgaWYgKGZpeGVkTGVmdENvbHVtbnMgJiYgZml4ZWRMZWZ0Q29sdW1ucy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgY29uc3QgbGFzdEZpeGVkTGVmdENvbHVtbiA9IGZpeGVkTGVmdENvbHVtbnNbZml4ZWRMZWZ0Q29sdW1ucy5sZW5ndGggLSAxXTtcclxuICAgICAgICAgICAgZml4ZWRMZWZ0Q3NzUnVsZUtleSA9IGAke3J1bGVOYW1lfSBbZmllbGQ9XCIke2xhc3RGaXhlZExlZnRDb2x1bW4uZmllbGR9XCJdOjphZnRlcmA7XHJcbiAgICAgICAgICAgIGxlZnRDU1NSdWxlID0gYCR7Zml4ZWRMZWZ0Q3NzUnVsZUtleX17XHJcbiAgICAgICAgICAgICAgICBib3gtc2hhZG93OiNkOWQ5ZDkgMTJweCAwcHggOHB4IC0xMnB4IGluc2V0O1xyXG4gICAgICAgICAgICB9YDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChmaXhlZFJpZ2h0Q29sdW1ucyAmJiBmaXhlZFJpZ2h0Q29sdW1ucy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgZml4ZWRSaWdodENzc1J1bGVLZXkgPSBgJHtydWxlTmFtZX0gW3ItdHQtc2hhZG93LWNvbF06OmJlZm9yZWA7XHJcbiAgICAgICAgICAgIHJpZ2h0Q1NTUnVsZSA9IGAke2ZpeGVkUmlnaHRDc3NSdWxlS2V5fXtcclxuICAgICAgICAgICAgICAgIGJveC1zaGFkb3c6I2Q5ZDlkOSAtMTJweCAwcHggOHB4IC0xMnB4IGluc2V0O1xyXG4gICAgICAgICAgICB9YDtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBpZiAoeCA9PT0gMCkge1xyXG4gICAgICAgICAgICAvLyDnp7vpmaTlt6bkvqflm7rlrprliJfpmLTlvbHmoLflvI9cclxuICAgICAgICAgICAgaWYgKGZpeGVkTGVmdENzc1J1bGVLZXkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudXRpbHMucmVtb3ZlQ3NzUnVsZShmaXhlZExlZnRDc3NSdWxlS2V5LCB0aGlzLnN0eWxlRWxlbWVudC5zaGVldCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKCh4ICsgZS5zcmNFbGVtZW50Lm9mZnNldFdpZHRoKS50b0ZpeGVkKCkgPT0gZS5zcmNFbGVtZW50LnNjcm9sbFdpZHRoKSB7XHJcbiAgICAgICAgICAgIC8vIOenu+mZpOWPs+WImeWbuuWumuWIl+mYtOW9seagt+W8j1xyXG4gICAgICAgICAgICBpZiAoZml4ZWRSaWdodENzc1J1bGVLZXkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudXRpbHMucmVtb3ZlQ3NzUnVsZShmaXhlZFJpZ2h0Q3NzUnVsZUtleSwgdGhpcy5zdHlsZUVsZW1lbnQuc2hlZXQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8g5re75Yqg5bem5Y+z5Zu65a6a5YiX5qC35byPXHJcbiAgICAgICAgICAgIGNvbnN0IGFyciA9IFtdO1xyXG4gICAgICAgICAgICBpZiAobGVmdENTU1J1bGUpIHtcclxuICAgICAgICAgICAgICAgIGFyci5wdXNoKGxlZnRDU1NSdWxlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHJpZ2h0Q1NTUnVsZSkge1xyXG4gICAgICAgICAgICAgICAgYXJyLnB1c2gocmlnaHRDU1NSdWxlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy51dGlscy5hcHBlbmRDc3NSdWxlcyhhcnIsIHRoaXMuc3R5bGVFbGVtZW50LnNoZWV0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25TY3JvbGxYKGU6IGFueSkge1xyXG4gICAgICAgIGlmICh0aGlzLnNob3dIZWFkZXIgJiYgdGhpcy5oZWFkZXJCb3gpIHtcclxuICAgICAgICAgICAgY29uc3QgeCA9IGUuc3JjRWxlbWVudC5zY3JvbGxMZWZ0O1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLnNjcm9sbFggPSB4O1xyXG4gICAgICAgICAgICAvLyB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKHRoaXMuaGVhZGVyQm94Lm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcigndGFibGUnKSwgJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUzZCgtJHt4fXB4LCAwcHgsIDBweClgKTtcclxuICAgICAgICAgICAgdGhpcy5oZWFkZXJCb3gubmF0aXZlRWxlbWVudC5zY3JvbGxMZWZ0ID0geDtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2V0Rml4ZWRDb2x1bW5TaGFkb3coeCwgZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uU2Nyb2xsWShlOiBhbnkpIHtcclxuICAgICAgICBpZiAodGhpcy52aXJ0dWFsaXplZCkge1xyXG4gICAgICAgICAgICBjb25zdCBzY3JvbGxUb3AgPSBlLnRhcmdldC5zY3JvbGxUb3A7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyRGF0YShzY3JvbGxUb3ApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlbmRlckRhdGEoc2Nyb2xsdG9wOiBudW1iZXIpIHtcclxuICAgICAgICBjb25zdCB7IGRhdGEsIHRvcEhpZGVIZWlnaHQsIGJvdHRvbUhpZGVIZWlnaHQgfSA9IHRoaXMuc2Nyb2xsTG9hZGVyLmdldFJvd05vZGVzKHNjcm9sbHRvcCk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZS5zY3JvbGxZID0gc2Nyb2xsdG9wO1xyXG4gICAgICAgIHRoaXMuc2VyaWFsaXplZFZhbHVlID0gZGF0YTtcclxuICAgICAgICB0aGlzLnRvcEhpZGVIZWlnaHQgPSB0b3BIaWRlSGVpZ2h0O1xyXG4gICAgICAgIHRoaXMuYm90dG9tSGlkZUhlaWdodCA9IGJvdHRvbUhpZGVIZWlnaHQ7XHJcblxyXG4gICAgICAgIHRoaXMuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIHRoaXMuc2V0TmV3Q29sdW1uc1dpZHRoKCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25TZWFyY2hWYWx1ZUNoYW5nZSgkZXZlbnQpIHtcclxuICAgICAgICBpZiAoISRldmVudCkge1xyXG4gICAgICAgICAgICB0aGlzLm9uQ2xlYXJTZWFyY2hWYWx1ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zZWFyY2hWYWx1ZUNoYW5nZS5lbWl0KHRoaXMuc2VhcmNoRGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25DbGVhclNlYXJjaFZhbHVlKCkge1xyXG4gICAgICAgIHRoaXMuc2VhcmNoRGF0YS52YWx1ZSA9ICcnO1xyXG4gICAgICAgIHRoaXMuc3RhdGUuc2VhcmNoZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmNsZWFyU2VhcmNoVmFsdWUuZW1pdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ2VsbENsaWNrKGV2ZW50OiBFdmVudCwgY29sOiBhbnksIG5vZGU6IGFueSkge1xyXG4gICAgICAgIHRoaXMuY2VsbENsaWNrLmVtaXQoeyBldmVudCwgY29sLCBub2RlIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHRyYWNrQnlGbihpbmRleCwgcm93Tm9kZSkge1xyXG4gICAgICAgIHJldHVybiByb3dOb2RlLmlkO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDmoLzlvI/ljJbmlbDmja5cclxuICAgICAqL1xyXG4gICAgZm9ybWF0RGF0YShjb2w6IGFueSwgZGF0YTogYW55LCBmb3JtYXR0ZXI6IGFueSkge1xyXG4gICAgICAgIC8vIGNvbnN0IHZhbCA9IHRoaXMudXRpbHMuZ2V0VmFsdWUoZmllbGQsIGRhdGEsIHRydWUgKTtcclxuICAgICAgICBjb25zdCB2YWwgPSB0aGlzLmdldE5vZGVUZXh0KGNvbCwgZGF0YSk7XHJcbiAgICAgICAgaWYgKGZvcm1hdHRlciAmJiBmb3JtYXR0ZXIudHlwZSA9PT0gJ3RpbWVhZ28nKSB7XHJcbiAgICAgICAgICAgIGlmICghZm9ybWF0dGVyLm9wdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIGZvcm1hdHRlci5vcHRpb25zID0geyBsb2NhbGU6IHRoaXMubG9jYWxlU2VydmljZS5sb2NhbGVJZH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICghZm9ybWF0dGVyLm9wdGlvbnMubG9jYWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVyLm9wdGlvbnMubG9jYWxlID0gdGhpcy5sb2NhbGVTZXJ2aWNlLmxvY2FsZUlkO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbEZvcm1hdFNlci5mb3JtYXQodmFsLCBkYXRhLCBmb3JtYXR0ZXIsIHtsb2NhbGU6IHRoaXMubG9jYWxlU2VydmljZS5sb2NhbGVJZCB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb2x1bW5zQ2hhbmdlZCgpIHtcclxuICAgICAgICB0aGlzLmNoZWNrQ29sdW1uT3B0aW9uKCk7XHJcbiAgICAgICAgdGhpcy5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB0dGMyY29sdW1ucyhsaXN0OiBRdWVyeUxpc3Q8VHJlZVRhYmxlQ29sdW1uRGlyZWN0aXZlPikge1xyXG4gICAgICAgIHJldHVybiBsaXN0Lm1hcCgobjogVHJlZVRhYmxlQ29sdW1uRGlyZWN0aXZlKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBmaWVsZDogbi5maWVsZCxcclxuICAgICAgICAgICAgICAgIHRpdGxlOiBuLnRpdGxlLFxyXG4gICAgICAgICAgICAgICAgYWxpZ246IG4uYWxpZ24sXHJcbiAgICAgICAgICAgICAgICBoQWxpZ246IG4uaEFsaWduLFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6IG4ud2lkdGgsXHJcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZXI6IG4uZm9ybWF0dGVyXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZVNldFNpemUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZml0KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudEVsID0gdGhpcy5lbC5uYXRpdmVFbGVtZW50LnBhcmVudE5vZGU7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0V2lkdGgocGFyZW50RWwub2Zmc2V0V2lkdGgpXHJcbiAgICAgICAgICAgIHRoaXMuaGVpZ2h0ID0gcGFyZW50RWwub2Zmc2V0SGVpZ2h0O1xyXG5cclxuICAgICAgICAgICAgLy8g5aaC5p6c5Zyo5L2/55So5pe277yM5Li657uE5Lu26K6+572u55qE6auY5bqm77yM5YiZ5Lul5q2k5YC85Li65YeG77yM5LuF5pSv5oyBIOWbuuWumuWAvCDvvIzkuI3mlK/mjIEg55m+5YiG5q+UXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQuc3R5bGUuaGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaCA9IHRoaXMuZWwubmF0aXZlRWxlbWVudC5zdHlsZS5oZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoaC5pbmRleE9mKCdweCcpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICBoID0gcGFyc2VJbnQoaC5yZXBsYWNlKCdweCcsICcnKSwgMTApO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhlaWdodCA9IGg7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVuZGVyVmlydHVhbFJvd05vZGVzKG5vZGVQb3NZID0gbnVsbCkge1xyXG4gICAgICAgIGlmICh0aGlzLnZpcnR1YWxpemVkKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNjcm9sbFkgPSBub2RlUG9zWSB8fCB0aGlzLnN0YXRlLnNjcm9sbFk7XHJcbiAgICAgICAgICAgIGNvbnN0IF9yb3dub2RlcyA9IHRoaXMuc2Nyb2xsTG9hZGVyLmdldFJvd05vZGVzKHNjcm9sbFkpO1xyXG4gICAgICAgICAgICB0aGlzLnNlcmlhbGl6ZWRWYWx1ZSA9IF9yb3dub2Rlcy5kYXRhO1xyXG4gICAgICAgICAgICB0aGlzLnRvcEhpZGVIZWlnaHQgPSBfcm93bm9kZXMudG9wSGlkZUhlaWdodDtcclxuICAgICAgICAgICAgdGhpcy5ib3R0b21IaWRlSGVpZ2h0ID0gX3Jvd25vZGVzLmJvdHRvbUhpZGVIZWlnaHQ7XHJcbiAgICAgICAgICAgIHRoaXMuZGV0ZWN0Q2hhbmdlcygpO1xyXG5cclxuICAgICAgICAgICAgaWYgKG5vZGVQb3NZKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHNSZWYuZGlyZWN0aXZlUmVmLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudC5zY3JvbGxUb3AgPSBub2RlUG9zWTtcclxuICAgICAgICAgICAgICAgICAgICB9LCAyMCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVTZXJpYWxpemVkVmFsdWUobm9kZVBvc1k6IGFueSA9IG51bGwpIHtcclxuICAgICAgICB0aGlzLnNlcmlhbGl6ZWRWYWx1ZSA9IFtdO1xyXG4gICAgICAgIHRoaXMuc2VhcmNoSGFuZGxlLmFsbE5vZGVzID0gW107XHJcbiAgICAgICAgdGhpcy5zdGF0ZS5yb3dOb2RlcyA9IFtdO1xyXG5cclxuICAgICAgICB0aGlzLnNlcmlhbGl6ZU5vZGVzKG51bGwsIHRoaXMuZGF0YSwgMCwgdHJ1ZSk7XHJcbiAgICAgICAgaWYgKHRoaXMudmlydHVhbGl6ZWQgJiYgdGhpcy5maXhlZEhlYWRlcikge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlclZpcnR1YWxSb3dOb2Rlcyhub2RlUG9zWSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zZXJpYWxpemVkVmFsdWUgPSB0aGlzLnN0YXRlLnJvd05vZGVzO1xyXG4gICAgICAgICAgICB0aGlzLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgLy8gaWYgKGVtaXRDaGFuZ2VzKSB7XHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlsIbmoJHoioLngrnmlbDmja7luo/liJfljJbkuLpSb3dOb2RlXHJcbiAgICAgKiBAcGFyYW0gcGFyZW50IOeItue6p+iKgueCuVxyXG4gICAgICogQHBhcmFtIG5vZGVzIOagkeiKgueCuembhuWQiFxyXG4gICAgICogQHBhcmFtIGxldmVsIOe6p+WIq1xyXG4gICAgICogQHBhcmFtIHZpc2libGUg5piv5ZCm5Y+v6KeBXHJcbiAgICAgKi9cclxuICAgIHNlcmlhbGl6ZU5vZGVzKHBhcmVudDogVHJlZU5vZGUsIG5vZGVzOiBUcmVlTm9kZVtdLCBsZXZlbDogbnVtYmVyLCB2aXNpYmxlOiBib29sZWFuLCBwYXJlbnRJZHM/OiBhbnlbXSkge1xyXG4gICAgICAgIGlmIChub2RlcyAmJiBub2Rlcy5sZW5ndGgpIHtcclxuXHJcbiAgICAgICAgICAgIGlmICghbm9kZXNbMF0uZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBub2Rlcy5mb3JFYWNoKChub2RlLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbm9kZS5wYXJlbnQgPSBwYXJlbnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFub2RlLmhhc093blByb3BlcnR5KCdzZWxlY3RhYmxlJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBub2RlLnNlbGVjdGFibGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICghbm9kZS5oYXNPd25Qcm9wZXJ0eSgnc2hvd0ljb24nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5vZGUuc2hvd0ljb24gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9ubHlTZWxlY3RMZWFmID09PSAneWVzJyAmJiBub2RlLnNlbGVjdGFibGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBub2RlLnNlbGVjdGFibGUgPSAhIW5vZGUubGVhZjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnN0IGtleWlkID0gbm9kZS5kYXRhW3RoaXMuaWRGaWVsZF07XHJcbiAgICAgICAgICAgICAgICBub2RlLmlkID0ga2V5aWQ7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpc1NlbGVjdGVkID0gdGhpcy5maW5kSW5kZXhJblNlbGVjdGlvbihub2RlKSA+IC0xO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaXNDaGVja2VkID0gdGhpcy5maW5kSW5kZXhJbkNoZWNrZWRzKG5vZGUpID4gLTE7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpc0xhc3QgPSBpbmRleCA9PT0gbm9kZXMubGVuZ3RoIC0gMTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlzRmlyc3QgPSBpbmRleCA9PT0gMDtcclxuICAgICAgICAgICAgICAgIGxldCBwYXJlbnRzID0gW107XHJcbiAgICAgICAgICAgICAgICBsZXQgcGFyZW50Um4gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBhcmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcmVudElEID0gcGFyZW50LmRhdGFbdGhpcy5pZEZpZWxkXTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBfcGFyZW50cyA9IHBhcmVudElkcyB8fCBbXTtcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnRzID0gcGFyZW50cy5jb25jYXQoX3BhcmVudHMubWFwKG4gPT4gbikpO1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudHMucHVzaChwYXJlbnRJRCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50Um4gPSB0aGlzLnN0YXRlLnJvd05vZGVzLmZpbmQobiA9PiBuLmlkID09PSBwYXJlbnQuaWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHJvd05vZGU6IFJvd05vZGUgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGtleWlkLFxyXG4gICAgICAgICAgICAgICAgICAgIG5vZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50LFxyXG4gICAgICAgICAgICAgICAgICAgIGxldmVsLFxyXG4gICAgICAgICAgICAgICAgICAgIHZpc2libGU6IHZpc2libGUgJiYgKHBhcmVudCA/IHBhcmVudC5leHBhbmRlZCA6IHRydWUpLFxyXG4gICAgICAgICAgICAgICAgICAgIGlzU2VsZWN0ZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgaXNDaGVja2VkLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudHMsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50Um93Tm9kZTogcGFyZW50Um4sXHJcbiAgICAgICAgICAgICAgICAgICAgaW5kZXg6IHRoaXMuc3RhdGUucm93Tm9kZXMubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhc3Q6IGlzTGFzdCxcclxuICAgICAgICAgICAgICAgICAgICBmaXJzdDogaXNGaXJzdFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMuc2VyaWFsaXplZFZhbHVlLnB1c2gocm93Tm9kZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnJvd05vZGVzLnB1c2gocm93Tm9kZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlcmlhbGl6ZU5vZGVzKG5vZGUsIG5vZGUuY2hpbGRyZW4sIGxldmVsICsgMSwgcm93Tm9kZS52aXNpYmxlLCBwYXJlbnRzKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5Yik5pat5oyH5a6a55qE6IqC54K55piv5ZCm6KKr6YCJ5LitXHJcbiAgICAgKiBAcGFyYW0gbm9kZSDmoJHoioLngrlcclxuICAgICAqL1xyXG4gICAgaXNTZWxlY3RlZChub2RlOiBUcmVlTm9kZSk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmICh0aGlzLnNpbmdsZVNlbGVjdCkge1xyXG4gICAgICAgICAgICBpZiAobm9kZSAmJiB0aGlzLnNlbGVjdGVkUm93KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZS5kYXRhW3RoaXMuaWRGaWVsZF0gPT09IHRoaXMuc2VsZWN0ZWRSb3cuZGF0YVt0aGlzLmlkRmllbGRdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3Rpb25zICYmIHRoaXMuc2VsZWN0aW9ucy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGlvbnMuZmluZEluZGV4KG4gPT4gbi5kYXRhW3RoaXMuaWRGaWVsZF0gPT09IG5vZGUuZGF0YVt0aGlzLmlkRmllbGRdKSA+IC0xO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKiog5Yik5pat5b2T5YmN6IqC54K555qE6ZKp6YCJ54q25oCBICovXHJcbiAgICBpc0NoZWNrZWQobm9kZTogVHJlZU5vZGUpOiBib29sZWFuIHtcclxuICAgICAgICBpZiAobm9kZSAmJiB0aGlzLmNoZWNrZWRzKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrZWRzIGluc3RhbmNlb2YgQXJyYXkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNoZWNrZWRzLmZpbmRJbmRleCgodikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2LmRhdGFbdGhpcy5pZEZpZWxkXSA9PT0gbm9kZS5kYXRhW3RoaXMuaWRGaWVsZF07XHJcbiAgICAgICAgICAgICAgICB9KSA+IC0xO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJpdmF0ZSB1blNlbGVjdGVkQ3VycmVudFJvd0VtaXQoKSB7XHJcbiAgICAgICAgY29uc3QgY3VyclNlbGVjdGVkID0gdGhpcy5zZWxlY3RlZFJvdztcclxuICAgICAgICBpZiAoY3VyclNlbGVjdGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZVVuU2VsZWN0LmVtaXQoeyBub2RlOiBjdXJyU2VsZWN0ZWQsIHR5cGU6ICdyb3cnLCBpbnN0YW5jZTogdGhpcyB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfc2luZ2xlU2VsZWN0Tm9kZShlOiBTZWxlY3RFdmVudEFyZ3MpIHtcclxuXHJcbiAgICAgICAgdGhpcy5jbGVhclNlbGVjdGlvbnMoKTtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkUm93ID0gZS5yb3dOb2RlLm5vZGU7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RSb3dJbmRleCA9IGUucm93SW5kZXg7XHJcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25zID0gW2Uucm93Tm9kZS5ub2RlXTtcclxuICAgICAgICBlLnJvd05vZGUuaXNTZWxlY3RlZCA9IHRydWU7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNob3dDaGVja2JveCkge1xyXG4gICAgICAgICAgICBlLnJvd05vZGUuaXNDaGVja2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5jbGVhckNoZWNrZWRzKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0Q2hlY2tlZHMoZS5yb3dOb2RlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHNwOiBOb2RlU2VsZWN0ZWRQYXJhbSA9IHtcclxuICAgICAgICAgICAgb3JpZ2luYWxFdmVudDogZS5vcmlnaW5hbEV2ZW50LFxyXG4gICAgICAgICAgICBub2RlOiBlLnJvd05vZGUubm9kZSwgdHlwZTogJ3JvdycsXHJcbiAgICAgICAgICAgIGluZGV4OiBlLnJvd0luZGV4LFxyXG4gICAgICAgICAgICBwYXJlbnRzOiBlLnJvd05vZGUucGFyZW50cyxcclxuICAgICAgICAgICAgaW5zdGFuY2U6IHRoaXNcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMubm9kZVNlbGVjdGVkLmVtaXQoc3ApO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX3NpbmdsZVVuU2VsZWN0Tm9kZShlOiBTZWxlY3RFdmVudEFyZ3MpIHtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkUm93ID0gbnVsbDtcclxuICAgICAgICB0aGlzLnNlbGVjdFJvd0luZGV4ID0gLTE7XHJcbiAgICAgICAgZS5yb3dOb2RlLmlzU2VsZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgICBlLnJvd05vZGUuaXNDaGVja2VkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25zID0gW107XHJcblxyXG4gICAgICAgIHRoaXMubm9kZVVuU2VsZWN0LmVtaXQoe1xyXG4gICAgICAgICAgICBvcmlnaW5hbEV2ZW50OiBlLm9yaWdpbmFsRXZlbnQsXHJcbiAgICAgICAgICAgIG5vZGU6IGUucm93Tm9kZS5ub2RlLCB0eXBlOiAncm93JywgcGFyZW50czogZS5yb3dOb2RlLnBhcmVudHMsXHJcbiAgICAgICAgICAgIGluc3RhbmNlOiB0aGlzXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfX3NpbmdsZVNlbGVjdE5vZGUoZXZlbnQ6IFNlbGVjdEV2ZW50QXJncywgc2VsZWN0ZWQgPSBmYWxzZSkge1xyXG4gICAgICAgIGlmICghc2VsZWN0ZWQpIHtcclxuICAgICAgICAgICAgdGhpcy51blNlbGVjdGVkQ3VycmVudFJvd0VtaXQoKTtcclxuICAgICAgICAgICAgdGhpcy5fc2luZ2xlU2VsZWN0Tm9kZShldmVudCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmtlZXBTZWxlY3QpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NpbmdsZVVuU2VsZWN0Tm9kZShldmVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfX211bHRpU2VsZWN0Tm9kZShldmVudDogU2VsZWN0RXZlbnRBcmdzLCBzZWxlY3RlZCkge1xyXG4gICAgICAgIGNvbnN0IHJvd05vZGUgPSBldmVudC5yb3dOb2RlO1xyXG4gICAgICAgIGlmIChzZWxlY3RlZCkge1xyXG4gICAgICAgICAgICB0aGlzLnVuU2VsZWN0ZWRDdXJyZW50Um93RW1pdCgpO1xyXG4gICAgICAgICAgICB0aGlzLnNpbmdsZVNlbGVjdFdoZW5NdWx0aVNlbGVjdChyb3dOb2RlLCB0cnVlKTtcclxuICAgICAgICAgICAgdGhpcy5ub2RlU2VsZWN0ZWQuZW1pdCh7XHJcbiAgICAgICAgICAgICAgICBvcmlnaW5hbEV2ZW50OiBldmVudC5vcmlnaW5hbEV2ZW50LCBub2RlOiByb3dOb2RlLm5vZGUsXHJcbiAgICAgICAgICAgICAgICB0eXBlOiAncm93JywgaW5kZXg6IGV2ZW50LnJvd0luZGV4LCBwYXJlbnRzOiByb3dOb2RlLnBhcmVudHMsXHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZTogdGhpc1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMua2VlcFNlbGVjdCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaW5nbGVTZWxlY3RXaGVuTXVsdGlTZWxlY3Qocm93Tm9kZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ub2RlVW5TZWxlY3QuZW1pdCh7XHJcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxFdmVudDogZXZlbnQub3JpZ2luYWxFdmVudCwgbm9kZTogcm93Tm9kZS5ub2RlLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdyb3cnLCBpbmRleDogZXZlbnQucm93SW5kZXgsIHBhcmVudHM6IHJvd05vZGUucGFyZW50cyxcclxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZTogdGhpc1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDooYzljZXlh7vkuovku7ZcclxuICAgICAqL1xyXG4gICAgaGFuZGxlUm93Q2xpY2soZXZlbnQ6IFNlbGVjdEV2ZW50QXJncykge1xyXG4gICAgICAgIGNvbnN0IHJvd05vZGUgPSBldmVudC5yb3dOb2RlO1xyXG4gICAgICAgIHJvd05vZGUubm9kZVsnZWxlbWVudFJlZiddID0gZXZlbnQub3JpZ2luYWxFdmVudC50YXJnZXQ7XHJcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWQgPSB0aGlzLmlzU2VsZWN0ZWQocm93Tm9kZS5ub2RlKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2luZ2xlU2VsZWN0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX19zaW5nbGVTZWxlY3ROb2RlKGV2ZW50LCBzZWxlY3RlZCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcm93Tm9kZS5pbmRldGVybWluYXRlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9ubHlTZWxlY3RTZWxmKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9fbXVsdGlTZWxlY3ROb2RlKGV2ZW50LCAhc2VsZWN0ZWQpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcm93Tm9kZS5pc1NlbGVjdGVkID0gIXNlbGVjdGVkO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5yb3dOb2Rlcy5maW5kKG4gPT4gbi5pZCA9PT0gcm93Tm9kZS5pZCkuaXNTZWxlY3RlZCA9ICFzZWxlY3RlZDtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U2VsZWN0aW9ucyhyb3dOb2RlKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCByb3dTZWxlY3RDaGFuZ2VQYXJhbXM6IE5vZGVTZWxlY3RlZFBhcmFtID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsRXZlbnQ6IGV2ZW50Lm9yaWdpbmFsRXZlbnQsIG5vZGU6IHJvd05vZGUubm9kZSxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAncm93JywgaW5kZXg6IGV2ZW50LnJvd0luZGV4LCBwYXJlbnRzOiByb3dOb2RlLnBhcmVudHMsXHJcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2U6IHRoaXNcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHJvd05vZGUuaXNTZWxlY3RlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm9kZVNlbGVjdGVkLmVtaXQocm93U2VsZWN0Q2hhbmdlUGFyYW1zKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub2RlVW5TZWxlY3QuZW1pdChyb3dTZWxlY3RDaGFuZ2VQYXJhbXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jaGVja09uU2VsZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcm93Tm9kZS5pc0NoZWNrZWQgPSAhc2VsZWN0ZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5yb3dOb2Rlcy5maW5kKG4gPT4gbi5pZCA9PT0gcm93Tm9kZS5pZCkuaXNDaGVja2VkID0gIXNlbGVjdGVkO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Q2hlY2tlZHMocm93Tm9kZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm9kZXMgPSB0aGlzLmNhc2NhZGVOb2Rlcyhyb3dOb2RlLCByb3dOb2RlLmlzQ2hlY2tlZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50dFNlcnZpY2Uub25DaGFuZ2VDaGVja2JveFN0YXR1cyhyb3dOb2RlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJvd05vZGUuaXNDaGVja2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm9kZUNoZWNrZWQuZW1pdCh7IG9yaWdpbmFsRXZlbnQ6IGV2ZW50LCBub2RlOiByb3dOb2RlLm5vZGUsIG5vZGVzLCBpbnN0YW5jZTogdGhpcyB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vZGVVbkNoZWNrZWQuZW1pdCh7IG9yaWdpbmFsRXZlbnQ6IGV2ZW50LCBub2RlOiByb3dOb2RlLm5vZGUsIG5vZGVzLCBpbnN0YW5jZTogdGhpcyB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5jaGVja09uU2VsZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpZHMgPSB0aGlzLmNoZWNrZWRzLm1hcCh0biA9PiB0bi5pZCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrVmFsdWVzID0gaWRzO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja1ZhbHVlc0NoYW5nZS5lbWl0KGlkcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5bim5pyJY2hlY2tib3gg55qE5Y2V6YCJXHJcbiAgICAgKiBAcGFyYW0gcm93Tm9kZSDlvZPliY3oioLngrlcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzaW5nbGVTZWxlY3RXaGVuTXVsdGlTZWxlY3Qocm93Tm9kZTogUm93Tm9kZSwgZmxhZzogYm9vbGVhbikge1xyXG4gICAgICAgIGlmICh0aGlzLmNoZWNrT25TZWxlY3QpIHtcclxuICAgICAgICAgICAgcm93Tm9kZS5pc0NoZWNrZWQgPSBmbGFnO1xyXG4gICAgICAgICAgICB0aGlzLnNldENoZWNrZWRzKHJvd05vZGUpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jYXNjYWRlTm9kZXMocm93Tm9kZSwgcm93Tm9kZS5pc0NoZWNrZWQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHJvd05vZGUuaXNDaGVja2VkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGVDaGVja2VkLmVtaXQoeyBvcmlnaW5hbEV2ZW50OiBldmVudCwgbm9kZTogcm93Tm9kZS5ub2RlLCBpbnN0YW5jZTogdGhpcyB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubm9kZVVuQ2hlY2tlZC5lbWl0KHsgb3JpZ2luYWxFdmVudDogZXZlbnQsIG5vZGU6IHJvd05vZGUubm9kZSwgaW5zdGFuY2U6IHRoaXMgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuY2xlYXJTZWxlY3Rpb25zKCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLm9ubHlTZWxlY3RTZWxmKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3cgPSByb3dOb2RlLm5vZGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJvd05vZGUuaXNTZWxlY3RlZCA9IGZsYWc7XHJcbiAgICAgICAgdGhpcy5zZXRTZWxlY3Rpb25zKHJvd05vZGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2VsZWN0V2hlbkNoZWNrZWQocm93Tm9kZTogUm93Tm9kZSwgZmxhZzogYm9vbGVhbiwgZXZlbnQ6IGFueSkge1xyXG4gICAgICAgIGlmIChyb3dOb2RlLm5vZGUuc2VsZWN0YWJsZSkge1xyXG4gICAgICAgICAgICByb3dOb2RlLmlzQ2hlY2tlZCA9IGZsYWc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2V0Q2hlY2tlZHMocm93Tm9kZSwgZmFsc2UpO1xyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdE9uQ2hlY2spIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMub25seVNlbGVjdFNlbGYpIHtcclxuICAgICAgICAgICAgICAgIGlmIChmbGFnIHx8ICh0aGlzLnNlbGVjdGVkUm93ICYmIHRoaXMuc2VsZWN0ZWRSb3cuaWQgPT09IHJvd05vZGUuaWQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhclNlbGVjdGlvbnMoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuc2luZ2xlU2VsZWN0ICYmIHRoaXMuc2hvd0NoZWNrYm94KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyQ2hlY2tlZHMoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocm93Tm9kZS5ub2RlLnNlbGVjdGFibGUpIHtcclxuICAgICAgICAgICAgICAgIHJvd05vZGUuaXNTZWxlY3RlZCA9IGZsYWc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zZXRTZWxlY3Rpb25zKHJvd05vZGUpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5yb3dOb2Rlcy5maW5kKG4gPT4gbi5pZCA9PT0gcm93Tm9kZS5pZCkuaXNTZWxlY3RlZCA9IGZsYWc7XHJcblxyXG4gICAgICAgICAgICBpZiAocm93Tm9kZS5pc1NlbGVjdGVkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGVTZWxlY3RlZC5lbWl0KHsgb3JpZ2luYWxFdmVudDogZXZlbnQsIG5vZGU6IHJvd05vZGUubm9kZSwgaW5zdGFuY2U6IHRoaXMsIHR5cGU6ICdjaGVja2JveCcgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGVVblNlbGVjdC5lbWl0KHsgb3JpZ2luYWxFdmVudDogZXZlbnQsIG5vZGU6IHJvd05vZGUubm9kZSwgaW5zdGFuY2U6IHRoaXMsIHR5cGU6ICdjaGVja2JveCcgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpc0luQXJyYXkocm93Tm9kZTogUm93Tm9kZSwgaXRlbXM6IFRyZWVOb2RlW10pIHtcclxuICAgICAgICBpZiAoaXRlbXMgJiYgaXRlbXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGl0ZW1zLmZpbmRJbmRleChpID0+IGkuZGF0YVt0aGlzLmlkRmllbGRdID09PSByb3dOb2RlLmlkKSA+IC0xO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0U2VsZWN0aW9ucyhyb3dOb2RlOiBSb3dOb2RlKSB7XHJcbiAgICAgICAgaWYgKHJvd05vZGUuaXNTZWxlY3RlZCkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuc2VsZWN0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25zID0gW107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCF0aGlzLmlzSW5BcnJheShyb3dOb2RlLCB0aGlzLnNlbGVjdGlvbnMpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLnNlbGVjdGlvbnMgPSBbLi4udGhpcy5zZWxlY3Rpb25zLCByb3dOb2RlLm5vZGVdO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25zLnB1c2gocm93Tm9kZS5ub2RlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSB0aGlzLnNlbGVjdGlvbnMuZmluZEluZGV4KCh0bjogVHJlZU5vZGUpID0+IHRuLmRhdGFbdGhpcy5pZEZpZWxkXSA9PT0gcm93Tm9kZS5ub2RlLmRhdGFbdGhpcy5pZEZpZWxkXSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaSAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbnMuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5zZWxlY3Rpb25zID0gdGhpcy5zZWxlY3Rpb25zLmZpbHRlcigodG46IFRyZWVOb2RlKSA9PiB0bi5kYXRhW3RoaXMuaWRGaWVsZF0gIT09IHJvd05vZGUubm9kZS5kYXRhW3RoaXMuaWRGaWVsZF0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0Q2hlY2tlZHMocm93Tm9kZTogUm93Tm9kZSwgdXBkYXRlZCA9IHRydWUpIHtcclxuICAgICAgICBpZiAocm93Tm9kZS5pc0NoZWNrZWQpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmNoZWNrZWRzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWRzID0gW107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCF0aGlzLmlzSW5BcnJheShyb3dOb2RlLCB0aGlzLmNoZWNrZWRzKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5jaGVja2VkcyA9IFsgLi4udGhpcy5jaGVja2Vkcywgcm93Tm9kZS5ub2RlXTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tlZHMucHVzaChyb3dOb2RlLm5vZGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tlZHMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSB0aGlzLmNoZWNrZWRzLmZpbmRJbmRleCgodG46IFRyZWVOb2RlKSA9PiB0bi5kYXRhW3RoaXMuaWRGaWVsZF0gPT09IHJvd05vZGUubm9kZS5kYXRhW3RoaXMuaWRGaWVsZF0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKGkgIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja2Vkcy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLmNoZWNrZWRzID0gdGhpcy5jaGVja2Vkcy5maWx0ZXIoKHRuOiBUcmVlTm9kZSkgPT4gdG4uZGF0YVt0aGlzLmlkRmllbGRdICE9PSByb3dOb2RlLm5vZGUuZGF0YVt0aGlzLmlkRmllbGRdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHVwZGF0ZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5jaGVja2VkcyA9IFsgLi4udGhpcy5jaGVja2Vkc107XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0RGlmZnJlbnREYXRhKGRhdGE6IFRyZWVOb2RlW10pIHtcclxuICAgICAgICBpZiAoZGF0YS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgY29uc3QgX25vZGVzID0gW107XHJcbiAgICAgICAgICAgIGRhdGEuZm9yRWFjaChuID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChfbm9kZXMuZmluZEluZGV4KHQgPT4gdC5kYXRhW3RoaXMuaWRGaWVsZF0gPT09IG4uZGF0YVt0aGlzLmlkRmllbGRdKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICBfbm9kZXMucHVzaChuKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBfbm9kZXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNhc2NhZGVDaGVja2VkTm9kZShyb3dOb2RlOiBSb3dOb2RlLCBjaGVja2VkOiBib29sZWFuLCBzeW5jID0gZmFsc2UpOiBUcmVlTm9kZVtdIHtcclxuICAgICAgICBjb25zdCBub2RlczogVHJlZU5vZGVbXSA9IFtdO1xyXG4gICAgICAgIGlmIChyb3dOb2RlLm5vZGUuc2VsZWN0YWJsZSkge1xyXG4gICAgICAgICAgICByb3dOb2RlLmlzQ2hlY2tlZCA9IGNoZWNrZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2V0Q2hlY2tlZHMocm93Tm9kZSwgZmFsc2UpO1xyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdE9uQ2hlY2spIHtcclxuICAgICAgICAgICAgaWYgKHN5bmMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXR1cyA9IHRoaXMuaXNJbmRldGVybWluYXRlKHJvd05vZGUpICE9PSAyO1xyXG4gICAgICAgICAgICAgICAgY2hlY2tlZCA9IHN0YXR1cyA/IGNoZWNrZWQ6IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAocm93Tm9kZS5ub2RlLnNlbGVjdGFibGUpIHtcclxuICAgICAgICAgICAgICAgIHJvd05vZGUuaXNTZWxlY3RlZCA9IGNoZWNrZWQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFNlbGVjdGlvbnMocm93Tm9kZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzSW5BcnJheShyb3dOb2RlLCBub2RlcykpIHtcclxuICAgICAgICAgICAgbm9kZXMucHVzaChyb3dOb2RlLm5vZGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbm9kZXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlkJHkuIvnuqfogZTpgInkuK1cclxuICAgICAqIEBwYXJhbSBub2RlIOW9k+WJjeiKgueCuVxyXG4gICAgICogQHBhcmFtIGNoZWNrZWQg6YCJ5Lit54q25oCBXHJcbiAgICAgKiDov5Tlm57lj5flvbHlk43nmoTooYxcclxuICAgICAqL1xyXG4gICAgcHJvcGFnYXRlU2VsZWN0aW9uRG93bihyb3dOb2RlOiBSb3dOb2RlLCBjaGVja2VkOiBib29sZWFuKSB7XHJcbiAgICAgICAgbGV0IG5vZGVzID0gdGhpcy5jYXNjYWRlQ2hlY2tlZE5vZGUocm93Tm9kZSwgY2hlY2tlZCk7XHJcbiAgICAgICAgaWYgKHRoaXMuY2FzY2FkZUNoZWNrICYmIHRoaXMuY2FzY2FkZURvd24gJiYgcm93Tm9kZS5ub2RlLmNoaWxkcmVuICYmIHJvd05vZGUubm9kZS5jaGlsZHJlbi5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcm93Tm9kZS5ub2RlLmNoaWxkcmVuLmZvckVhY2goKHYsIGkpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJuID0gdGhpcy5zdGF0ZS5yb3dOb2Rlcy5maW5kKChyb3c6IFJvd05vZGUpID0+IHJvdy5pZCA9PT0gdi5kYXRhW3RoaXMuaWRGaWVsZF0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcm4uaW5kZXRlcm1pbmF0ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChybi5ub2RlLnNlbGVjdGFibGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcm4uaXNDaGVja2VkID0gY2hlY2tlZDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgbm9kZXMgPSBub2Rlcy5jb25jYXQodGhpcy5wcm9wYWdhdGVTZWxlY3Rpb25Eb3duKHJuLCBjaGVja2VkKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50dFNlcnZpY2Uub25DaGFuZ2VDaGVja2JveFN0YXR1cyhybik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG5vZGVzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5ZCR5LiK57qn6IGU6YCJ5LitXHJcbiAgICAgKi9cclxuICAgIHByb3BhZ2F0ZVNlbGVjdGlvblVwKHJvd05vZGU6IFJvd05vZGUsIGNoZWNrZWQ6IGJvb2xlYW4pIHtcclxuICAgICAgICBjb25zdCBub2RlcyA9IHRoaXMuY2FzY2FkZUNoZWNrZWROb2RlKHJvd05vZGUsIGNoZWNrZWQpO1xyXG4gICAgICAgIGlmICh0aGlzLmNhc2NhZGVDaGVjayAmJiB0aGlzLmNhc2NhZGVVcCAmJiByb3dOb2RlLm5vZGUucGFyZW50KSB7XHJcbiAgICAgICAgICAgIGlmIChyb3dOb2RlLnBhcmVudHMgJiYgcm93Tm9kZS5wYXJlbnRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgcm5zOiBSb3dOb2RlW10gPSBbXTtcclxuICAgICAgICAgICAgICAgIHJvd05vZGUucGFyZW50cy5mb3JFYWNoKChuLCBpKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgcm4gPSB0aGlzLmZpbmRSb3dOb2RlKG4pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChybiAmJiBybi5ub2RlLnNlbGVjdGFibGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcm4uaXNDaGVja2VkID0gY2hlY2tlZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hlY2tlZE5vZGVzID0gdGhpcy5jYXNjYWRlQ2hlY2tlZE5vZGUocm4sIGNoZWNrZWQsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hlY2tlZE5vZGVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZXMucHVzaChjaGVja2VkTm9kZXNbMF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJucy5wdXNoKHJuKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBybnMucmV2ZXJzZSgpLmZvckVhY2gocm4gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ2hlY2tib3hTdGF0dXMocm4pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICByZXR1cm4gbm9kZXM7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g6IqC54K554q25oCB77yI6YCJ5Lit77yM5Yu+6YCJ77yJ5ZCM5q2l5pu05pawXHJcbiAgICBwcml2YXRlIHVwZGF0ZU5vZGVTdGF0dXMoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuc2VhcmNoZWQpIHtcclxuICAgICAgICAgICAgY29uc3Qgcm93Tm9kZXMgPSB0aGlzLnN0YXRlLnNlYXJjaFJvd05vZGVzO1xyXG4gICAgICAgICAgICBpZiAoIXJvd05vZGVzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcm93Tm9kZXMuZm9yRWFjaChybiA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjaGVja2VkSXRlbTogUm93Tm9kZSA9IHRoaXMuc3RhdGUucm93Tm9kZXMuZmluZChuID0+IG4uaWQgPT09IHJuLmlkKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBjaGtlZCA9IGNoZWNrZWRJdGVtID8gY2hlY2tlZEl0ZW0uaXNDaGVja2VkIDogZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBybi5pbmRldGVybWluYXRlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBybi5pc0NoZWNrZWQgPSBjaGtlZDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RPbkNoZWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrZWRJdGVtLmlzU2VsZWN0ZWQgIT0gcm4uaXNDaGVja2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWRJdGVtLmlzU2VsZWN0ZWQgPSBjaGVja2VkSXRlbS5pc0NoZWNrZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJuLmlzU2VsZWN0ZWQgPSBjaGVja2VkSXRlbS5pc1NlbGVjdGVkO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RPbkNoZWNrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnJvd05vZGVzLmZvckVhY2gocm4gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm9ubHlTZWxlY3RTZWxmKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5zZWxlY3Rpb25zIHx8ICF0aGlzLnNlbGVjdGlvbnMubGVuZ3RoICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm4uaXNTZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0aW9uc1swXS5pZCA9PT0gcm4uaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBybi5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm4uaXNTZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJuLmlzU2VsZWN0ZWQgIT0gcm4uaXNDaGVja2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBybi5pc1NlbGVjdGVkID0gcm4uaXNDaGVja2VkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDnuqfogZTpgInmi6noioLngrlcclxuICAgICAqIEBwYXJhbSByb3dOb2RlIOW9k+WJjeiKgueCuVxyXG4gICAgICogQHBhcmFtIGNoZWNrZWQg5piv5ZCm6ZKp6YCJXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgY2FzY2FkZU5vZGVzKHJvd05vZGU6IFJvd05vZGUsIGNoZWNrZWQ6IGJvb2xlYW4pIHtcclxuICAgICAgICBsZXQgY2hlY2tlZE5vZGVzID0gdGhpcy5wcm9wYWdhdGVTZWxlY3Rpb25Eb3duKHJvd05vZGUsIGNoZWNrZWQpO1xyXG4gICAgICAgIGNoZWNrZWROb2RlcyA9IGNoZWNrZWROb2Rlcy5jb25jYXQodGhpcy5wcm9wYWdhdGVTZWxlY3Rpb25VcChyb3dOb2RlLCBjaGVja2VkKSk7XHJcbiAgICAgICAgY2hlY2tlZE5vZGVzID0gdGhpcy5nZXREaWZmcmVudERhdGEoY2hlY2tlZE5vZGVzKTtcclxuXHJcbiAgICAgICAgdGhpcy51cGRhdGVOb2RlU3RhdHVzKCk7XHJcblxyXG4gICAgICAgIHRoaXMudXBkYXRlQWxsQ2hlY2tib3hTdGF0dXMoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGNoZWNrZWROb2Rlcy5maWx0ZXIobiA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBuLnNlbGVjdGFibGU7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDooYxDaGVja2JveCDpgInkuK3lj5jljJbkuovku7ZcclxuICAgICAqIEBwYXJhbSBldmVudCDpvKDmoIfngrnlh7vkuovku7blr7nosaFcclxuICAgICAqIEBwYXJhbSByb3dOb2RlIOW9k+WJjeagkeiKgueCuVxyXG4gICAgICovXHJcbiAgICB0b2dnbGVOb2RlV2l0aENoZWNrYm94KGV2ZW50OiBFdmVudCwgcm93Tm9kZTogUm93Tm9kZSwgY2hlY2tlZDogYm9vbGVhbik6IGFueSB7XHJcbiAgICAgICAgdGhpcy5zdGF0ZS5yb3dOb2Rlcy5maW5kKG4gPT4gbi5pZCA9PT0gcm93Tm9kZS5pZCkuaXNDaGVja2VkID0gY2hlY2tlZDtcclxuICAgICAgICByb3dOb2RlLmluZGV0ZXJtaW5hdGUgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuY2FzY2FkZU5vZGVzKHJvd05vZGUsIGNoZWNrZWQpO1xyXG5cclxuICAgICAgICB0aGlzLnR0U2VydmljZS5vbkNoYW5nZUNoZWNrYm94U3RhdHVzKHJvd05vZGUpO1xyXG4gICAgICAgIGlmIChjaGVja2VkKSB7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZUNoZWNrZWQuZW1pdCh7IG9yaWdpbmFsRXZlbnQ6IGV2ZW50LCBub2RlOiByb3dOb2RlLm5vZGUsIG5vZGVzOiBkYXRhLCBpbnN0YW5jZTogdGhpcyB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLm5vZGVVbkNoZWNrZWQuZW1pdCh7IG9yaWdpbmFsRXZlbnQ6IGV2ZW50LCBub2RlOiByb3dOb2RlLm5vZGUsIG5vZGVzOiBkYXRhLCBpbnN0YW5jZTogdGhpcyB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc2VsZWN0V2hlbkNoZWNrZWQocm93Tm9kZSwgY2hlY2tlZCwgZXZlbnQpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5vbmx5U2VsZWN0U2VsZiAmJiBjaGVja2VkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3cgPSByb3dOb2RlLm5vZGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmNoZWNrZWRzID0gWy4uLnRoaXMuY2hlY2tlZHNdO1xyXG4gICAgICAgIHRoaXMuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5YWo6YCJXHJcbiAgICAgKiBAcGFyYW0gZXZlbnQg6byg5qCH5LqL5Lu25a+56LGhXHJcbiAgICAgKiBAcGFyYW0gY2hlY2tlZCDmmK/lkKbpgInkuK1cclxuICAgICAqL1xyXG4gICAgdG9nZ2xlTm9kZXNXaXRoQ2hlY2tib3goZXZlbnQ6IEV2ZW50LCBjaGVja2VkOiBib29sZWFuKSB7XHJcbiAgICAgICAgaWYgKGNoZWNrZWQpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZGF0YSAmJiB0aGlzLmRhdGEubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrQWxsTm9kZXMoeyBvcmlnaW5hbEV2ZW50OiBldmVudCwgY2hlY2tlZCwgaW5zdGFuY2U6IHRoaXMgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvbnMgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLnVuQ2hlY2tBbGxOb2Rlcyh7IG9yaWdpbmFsRXZlbnQ6IGV2ZW50LCBjaGVja2VkLCBpbnN0YW5jZTogdGhpcyB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiDmm7TmlrDlhajpgIljaGVja2JveCDnmoTnirbmgIEgKi9cclxuICAgIHByaXZhdGUgdXBkYXRlQWxsQ2hlY2tib3hTdGF0dXMoKSB7XHJcbiAgICAgICAgY29uc3Qgc3RhdHVzID0gdGhpcy5pc0luZGV0ZXJtaW5hdGUoKTtcclxuICAgICAgICBpZiAodGhpcy5zaG93Q2hlY2tBbGwgJiYgIXRoaXMuc2luZ2xlU2VsZWN0ICYmIHRoaXMuc2hvd0NoZWNrYm94KSB7XHJcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaGVhZGVyQ2hlY2tib3hDbXApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhlYWRlckNoZWNrYm94Q21wLmNoa0FsbC5uYXRpdmVFbGVtZW50LmluZGV0ZXJtaW5hdGUgPSBzdGF0dXMgPT09IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oZWFkZXJDaGVja2JveENtcC5jaGVja2VkID0gc3RhdHVzID09PSAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKiDmm7TmlrDniLboioLngrljaGVja2JveCDpgInkuK3nirbmgIEgKi9cclxuICAgIHByaXZhdGUgdXBkYXRlUGFyZW50Q2hlY2tib3hTdGF0dXMocm93Tm9kZTogUm93Tm9kZSkge1xyXG4gICAgICAgIGNvbnN0IHBOb2RlcyA9IFtdO1xyXG4gICAgICAgIHJvd05vZGUucGFyZW50cy5mb3JFYWNoKHJuaWQgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBybiA9IHRoaXMuZmluZFJvd05vZGUocm5pZCk7XHJcbiAgICAgICAgICAgIGlmIChybikge1xyXG4gICAgICAgICAgICAgICAgcE5vZGVzLnB1c2gocm4pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHBOb2Rlcy5yZXZlcnNlKCkuZm9yRWFjaChybiA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ2hlY2tib3hTdGF0dXMocm4pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqIOabtOaWsE7kuKrniLboioLngrnlpI3pgInmoYbkuK3nmoTpgInkuK3nirbmgIEgKi9cclxuICAgIHByaXZhdGUgdXBkYXRlUGFyZW50c0NoZWNrU3RhdHVzKHBhcmVudElkczogYW55KSB7XHJcbiAgICAgICAgbGV0IHBpZHMgPSBbXTtcclxuICAgICAgICBwYXJlbnRJZHMuZm9yRWFjaCgoaWRzOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgcGlkcyA9IFsuLi5waWRzLCAuLi5pZHNdO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBwaWRzID0gQXJyYXkuZnJvbShuZXcgU2V0KHBpZHMpKTtcclxuXHJcbiAgICAgICAgY29uc3QgcFJvd05vZGVzID0gdGhpcy5maW5kUm93Tm9kZXMocGlkcyk7XHJcblxyXG4gICAgICAgIHBSb3dOb2Rlcy5zb3J0KChyLCBuKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBuLmxldmVsIC0gci5sZXZlbDtcclxuICAgICAgICB9KS5mb3JFYWNoKHJuID0+IHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVDaGVja2JveFN0YXR1cyhybik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIC8qKiDmm7TmlrDoioLngrnkuK1jaGVja2JveOeahOeKtuaAgSAqL1xyXG4gICAgcHJpdmF0ZSB1cGRhdGVDaGVja2JveFN0YXR1cyhyb3dOb2RlOiBSb3dOb2RlKSB7XHJcbiAgICAgICAgY29uc3Qgc3RhdHVzID0gdGhpcy5pc0luZGV0ZXJtaW5hdGUocm93Tm9kZSk7XHJcbiAgICAgICAgaWYgKHN0YXR1cyAhPT0gdW5kZWZpbmVkICYmIHJvd05vZGUubm9kZS5zZWxlY3RhYmxlKSB7XHJcbiAgICAgICAgICAgIHJvd05vZGUuaW5kZXRlcm1pbmF0ZSA9IHN0YXR1cyA9PT0gMjtcclxuICAgICAgICAgICAgdGhpcy50dFNlcnZpY2Uub25DaGFuZ2VDaGVja2JveFN0YXR1cyhyb3dOb2RlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIOWIpOaWreaMh+WumuiKgueCuWNoZWNrYm94IOeahOeKtuaAgSAqL1xyXG4gICAgcHJpdmF0ZSBpc0luZGV0ZXJtaW5hdGUocm93Tm9kZT86IFJvd05vZGUpOiBhbnkge1xyXG4gICAgICAgIGNvbnN0IHN0YXR1cyA9IHRoaXMuZ2V0Q2hlY2tib3hTdGF0dXMocm93Tm9kZSk7XHJcbiAgICAgICAgaWYgKHN0YXR1cyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGxldCBjaGVja2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmIChzdGF0dXMgPT09IDIpIHtcclxuICAgICAgICAgICAgICAgIGNoZWNrZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNoZWNrZWQgPSAhIXN0YXR1cztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocm93Tm9kZSAmJiByb3dOb2RlLm5vZGUuc2VsZWN0YWJsZSkge1xyXG4gICAgICAgICAgICAgICAgcm93Tm9kZS5pc0NoZWNrZWQgPSBjaGVja2VkO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRDaGVja2Vkcyhyb3dOb2RlLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHN0YXR1cztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOi/lOWbnueItue6p+iKgueCuWNoZWNrYm94IOeahOeKtuaAgeOAgjDvvJrkuI3pgInkuK3vvIwgMe+8miDpgInkuK3vvIwgMu+8muS4jeehruWumlxyXG4gICAgICogQHBhcmFtIHJvd05vZGUg54i257qn6IqC54K577yb5Li656m65pe26L+U5Zue5YWo6YCJY2hlY2tib3gg55qE54q25oCBXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZ2V0Q2hlY2tib3hTdGF0dXMocm93Tm9kZT86IFJvd05vZGUpIHtcclxuICAgICAgICBsZXQgdW5jaGVja2VkTGVuZ3RoID0gMDtcclxuICAgICAgICBsZXQgY2hlY2tlZExlbmd0aCA9IDA7XHJcbiAgICAgICAgbGV0IGxlbiA9IDA7XHJcbiAgICAgICAgbGV0IGNoaWxkTm9kZXMgPSBbXTtcclxuICAgICAgICBpZiAocm93Tm9kZSkge1xyXG4gICAgICAgICAgICBjaGlsZE5vZGVzID0gcm93Tm9kZS5ub2RlLmNoaWxkcmVuIHx8IFtdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNoaWxkTm9kZXMgPSB0aGlzLnN0YXRlLnJvd05vZGVzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZW4gPSBjaGlsZE5vZGVzLmxlbmd0aDtcclxuICAgICAgICBjaGlsZE5vZGVzLmZvckVhY2gobiA9PiB7XHJcbiAgICAgICAgICAgIGxldCBybiA9IG47XHJcbiAgICAgICAgICAgIGlmIChyb3dOb2RlKSB7XHJcbiAgICAgICAgICAgICAgICBybiA9IHRoaXMuZmluZFJvd05vZGUobi5kYXRhW3RoaXMuaWRGaWVsZF0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChybiAmJiAhcm4uaW5kZXRlcm1pbmF0ZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJuLmlzQ2hlY2tlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrZWRMZW5ndGgrKztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdW5jaGVja2VkTGVuZ3RoKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKGxlbiA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgZmxhZyA9IDA7XHJcbiAgICAgICAgaWYgKHVuY2hlY2tlZExlbmd0aCA9PT0gbGVuKSB7XHJcbiAgICAgICAgICAgIGZsYWcgPSAwO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChjaGVja2VkTGVuZ3RoID09PSBsZW4pIHtcclxuICAgICAgICAgICAgICAgIGZsYWcgPSAxO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZmxhZyA9IDI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmbGFnO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZmluZEluZGV4SW4obm9kZTogVHJlZU5vZGUsIHRyZWVOb2RlczogVHJlZU5vZGVbXSkge1xyXG4gICAgICAgIGxldCBpbmRleCA9IC0xO1xyXG4gICAgICAgIGlmICh0cmVlTm9kZXMgJiYgdHJlZU5vZGVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBpbmRleCA9IHRyZWVOb2Rlcy5maW5kSW5kZXgoKHYsIGkpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVxdWFscyh2LCBub2RlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gaW5kZXg7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlnKjpgInkuK3nmoTpm4blkIjkuK3mn6Xmib7mjIflrproioLngrnnmoTntKLlvJVcclxuICAgICAqIEBwYXJhbSBub2RlIOagkeiKgueCuVxyXG4gICAgICovXHJcbiAgICBmaW5kSW5kZXhJbkNoZWNrZWRzKG5vZGU6IFRyZWVOb2RlKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5maW5kSW5kZXhJbihub2RlLCB0aGlzLmNoZWNrZWRzKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWcqOmAieS4reeahOmbhuWQiOS4reafpeaJvuaMh+WumuiKgueCueeahOe0ouW8lVxyXG4gICAgICogQHBhcmFtIG5vZGUg5qCR6IqC54K5XHJcbiAgICAgKi9cclxuICAgIGZpbmRJbmRleEluU2VsZWN0aW9uKG5vZGU6IFRyZWVOb2RlKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5maW5kSW5kZXhJbihub2RlLCB0aGlzLnNlbGVjdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiDlr7nmr5TkuKTkuKroioLngrnmmK/lkKblkIzkuIDkuKroioLngrkgKi9cclxuICAgIGVxdWFscyh0YXJnZXQ6IFRyZWVOb2RlLCBzb3VyY2U6IFRyZWVOb2RlKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRhcmdldC5kYXRhW3RoaXMuaWRGaWVsZF0gPT09IHNvdXJjZS5kYXRhW3RoaXMuaWRGaWVsZF07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlsZXlvIDmiYDmnInoioLngrlcclxuICAgICAqIEBwYXJhbSByb3dOb2RlIOWxleW8gOatpOiKgueCueS4i+eahOaJgOacieiKgueCue+8m+WmguaenOS4uuepuu+8jOWImeWxleW8gOaJgOacieiKgueCuVxyXG4gICAgICogQHBhcmFtIGRlZXAg6K6+572u5Li6dHJ1ZSDml7bvvIzlvZPliY3oioLngrnkuIvnmoTmiYDmnInlrZDoioLngrnlhajpg6jlsZXlvIAsIOm7mOiupCBmYWxzZVxyXG4gICAgICogQHBhcmFtIGNoaWxkcmVuRW1wdHlFbWl0RXhwYW5kICDlvZPmsqHmnInlrZDoioLngrnmmK/lkKbop6blj5HlsZXlvIDkuovku7bvvIzpu5jorqTkuLogdHJ1ZVxyXG4gICAgICovXHJcbiAgICB0b2dnbGVFeHBhbmQodHJlZU5vZGU/OiBUcmVlTm9kZSwgZGVlcCA9IGZhbHNlLCBjaGlsZHJlbkVtcHR5RW1pdEV4cGFuZCA9IHRydWUpIHtcclxuICAgICAgICBpZiAodHJlZU5vZGUpIHtcclxuICAgICAgICAgICAgdHJlZU5vZGUuZXhwYW5kZWQgPSAhdHJlZU5vZGUuZXhwYW5kZWQ7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlTm9kZVByb3BlcnR5KHRyZWVOb2RlLmlkLCB7ZXhwYW5kZWQ6IHRyZWVOb2RlLmV4cGFuZGVkfSk7XHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlVmlzaWJsZSh0cmVlTm9kZSk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy52aXJ0dWFsaXplZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRyZWVOb2RlLmNoaWxkcmVuICYmIHRyZWVOb2RlLmNoaWxkcmVuLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyVmlydHVhbFJvd05vZGVzKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0cmVlTm9kZS5leHBhbmRlZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkcmVuRW1wdHlFbWl0RXhwYW5kIHx8ICh0cmVlTm9kZS5jaGlsZHJlbiAmJiB0cmVlTm9kZS5jaGlsZHJlbi5sZW5ndGgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5leHBhbmQuZW1pdCh0cmVlTm9kZSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyZWVOb2RlLmV4cGFuZGVkID0gIXRyZWVOb2RlLmV4cGFuZGVkO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29sbGFwc2UuZW1pdCh0cmVlTm9kZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChkZWVwKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHJlZU5vZGUuY2hpbGRyZW4gJiYgdHJlZU5vZGUuY2hpbGRyZW4ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJlZU5vZGUuY2hpbGRyZW4uZm9yRWFjaCgocm93LCBpKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlRXhwYW5kKHJvdywgZGVlcCwgY2hpbGRyZW5FbXB0eUVtaXRFeHBhbmQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRhdGEgJiYgdGhpcy5kYXRhLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhLmZvckVhY2goKHJvdzogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b2dnbGVFeHBhbmQocm93KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zZXROZXdDb2x1bW5zV2lkdGgoKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB0b2dnbGVWaXNpYmxlKHRyZWVOb2RlOiBUcmVlTm9kZSkge1xyXG4gICAgICAgIGNvbnN0IHJvd05vZGUgPSB0aGlzLmZpbmRSb3dOb2RlKHRyZWVOb2RlLmlkKTtcclxuICAgICAgICBpZiAocm93Tm9kZSkge1xyXG4gICAgICAgICAgICBjb25zdCByaWQgPSByb3dOb2RlLmlkO1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgc2V0Um93VmlzaWJsZSA9IChybiwgdmlzaWJsZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgcm5QYXJlbnQgPSB0aGlzLmZpbmRSb3dOb2RlKHJuLnBhcmVudC5kYXRhW3RoaXMuaWRGaWVsZF0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJuUGFyZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcm4udmlzaWJsZSA9IHJuUGFyZW50LnZpc2libGUgJiYgcm5QYXJlbnQubm9kZS5leHBhbmRlZDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcm4udmlzaWJsZSA9IHZpc2libGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgX3IgPSB0aGlzLnNlcmlhbGl6ZWRWYWx1ZS5maW5kKG4gPT4gbi5pZCA9PT0gcm4uaWQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKF9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3IudmlzaWJsZSA9IHJuLnZpc2libGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLnJvd05vZGVzLmZpbHRlcihybiA9PiBybi5wYXJlbnRzLmluZGV4T2YocmlkKSA+IC0xKS5mb3JFYWNoKHJuID0+IHtcclxuICAgICAgICAgICAgICAgIHNldFJvd1Zpc2libGUocm4sIHRyZWVOb2RlLmV4cGFuZGVkKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKiDlsZXlvIDmjIflrproioLngrlcclxuICAgICAqIGVtaXQ6IOinpuWPkeWxleW8gOS6i+S7tlxyXG4gICAgICogcmVuZGVyOiDmlbDmja7ph43mlrDliqDovb1cclxuICAgICAqL1xyXG4gICAgZXhwYW5kTm9kZShpZDogc3RyaW5nLCBlbWl0ID0gdHJ1ZSwgcmVuZGVyID0gdHJ1ZSkge1xyXG4gICAgICAgIGlmIChpZCkge1xyXG4gICAgICAgICAgICBjb25zdCByb3dOb2RlID0gdGhpcy5maW5kUm93Tm9kZShpZCk7XHJcbiAgICAgICAgICAgIGlmIChyb3dOb2RlKSB7XHJcbiAgICAgICAgICAgICAgICByb3dOb2RlLm5vZGUuZXhwYW5kZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy50b2dnbGVWaXNpYmxlKHJvd05vZGUubm9kZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHJlbmRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnZpcnR1YWxpemVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyb3dOb2RlLm5vZGUuY2hpbGRyZW4gJiYgcm93Tm9kZS5ub2RlLmNoaWxkcmVuLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJWaXJ0dWFsUm93Tm9kZXMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZW1pdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kLmVtaXQocm93Tm9kZS5ub2RlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldE5ld0NvbHVtbnNXaWR0aCgpO1xyXG5cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMud3JpdGVDb25zb2xlKCdDb25cXCd0IGZpbmQgdHJlZSBub2RlIHdpZGggaWQ6JyArIGlkLCAnZXJyb3InKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKiog5bGV5byA5omA5pyJ6IqC54K5ICovXHJcbiAgICBleHBhbmRBbGwoKSB7XHJcbiAgICAgICAgdGhpcy5zdGF0ZS5yb3dOb2RlcyA9IHRoaXMuc3RhdGUucm93Tm9kZXMubWFwKChyb3c6IFJvd05vZGUpID0+IHtcclxuICAgICAgICAgICAgcm93Lm5vZGUuZXhwYW5kZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICByb3cudmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgIHJldHVybiByb3c7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnZpcnR1YWxpemVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyVmlydHVhbFJvd05vZGVzKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zZXJpYWxpemVkVmFsdWUgPSB0aGlzLnN0YXRlLnJvd05vZGVzO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNldE5ld0NvbHVtbnNXaWR0aCgpO1xyXG4gICAgICAgIHRoaXMuZXhwYW5kQWxsTm9kZXMuZW1pdCgpO1xyXG4gICAgICAgIHRoaXMuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cGFuZE5vZGVzKGlkOiBzdHJpbmcpIHtcclxuICAgICAgICAvLyBjb25zdCByb3dOb2RlID0gdGhpcy5maW5kUm93Tm9kZShpZCk7XHJcbiAgICAgICAgLy8gY29uc3Qgcm9vdE5vZGUgPSB0aGlzLmdldFJvb3QoaWQpO1xyXG4gICAgICAgIC8vIGlmIChyb3dOb2RlKSB7XHJcbiAgICAgICAgLy8gICAgIGNvbnN0IHRyZWVOb2RlID0gcm93Tm9kZS5ub2RlO1xyXG4gICAgICAgIC8vICAgICB0cmVlTm9kZS5leHBhbmRlZCA9IHRydWU7XHJcbiAgICAgICAgLy8gICAgIHJvd05vZGUudmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgLy8gICAgIGNvbnN0IHBhcmVudHMgPSByb3dOb2RlLnBhcmVudHM7XHJcblxyXG4gICAgICAgIC8vICAgICB0aGlzLnN0YXRlLnJvd05vZGVzLmZpbHRlcihuID0+IG4ucGFyZW50cy5pbmRleE9mKHJvb3ROb2RlLmlkKSA+IC0xKS5mb3JFYWNoKHIgPT4ge1xyXG4gICAgICAgIC8vICAgICAgICAgaWYgKHBhcmVudHMuaW5kZXhPZihyLmlkKSA+IC0xKSB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgci52aXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICAvLyAgICAgICAgICAgICByLm5vZGUuZXhwYW5kZWQgPSB0cnVlO1xyXG4gICAgICAgIC8vICAgICAgICAgfVxyXG4gICAgICAgIC8vICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgIC8vICAgICB0aGlzLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAvLyB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIOWxleW8gOaMh+WumuiKgueCueS4i+eahOaJgOacieiKgueCuSAqL1xyXG4gICAgZXhwYW5kQWxsTm9kZXNCeShyb3dOb2RlOiBhbnkpIHtcclxuICAgICAgICBpZiAocm93Tm9kZSkge1xyXG4gICAgICAgICAgICBjb25zdCB0cmVlTm9kZSA9IHJvd05vZGUubm9kZTtcclxuICAgICAgICAgICAgdHJlZU5vZGUuZXhwYW5kZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICByb3dOb2RlLnZpc2libGUgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5yb3dOb2Rlcy5maWx0ZXIobiA9PiBuLnBhcmVudHMuaW5kZXhPZihyb3dOb2RlLmlkKSA+IC0xKS5mb3JFYWNoKHIgPT4ge1xyXG4gICAgICAgICAgICAgICAgci52aXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHIubm9kZS5leHBhbmRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0TmV3Q29sdW1uc1dpZHRoKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKiDmipjlj6DmjIflrproioLngrkgKi9cclxuICAgIGNvbGxhcHNlTm9kZShpZDogc3RyaW5nKSB7XHJcbiAgICAgICAgaWYgKGlkKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJvd05vZGUgPSB0aGlzLmZpbmRSb3dOb2RlKGlkKTtcclxuICAgICAgICAgICAgaWYgKHJvd05vZGUpIHtcclxuICAgICAgICAgICAgICAgIHJvd05vZGUubm9kZS5leHBhbmRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy50b2dnbGVWaXNpYmxlKHJvd05vZGUubm9kZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0TmV3Q29sdW1uc1dpZHRoKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbGxhcHNlLmVtaXQocm93Tm9kZS5ub2RlKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMud3JpdGVDb25zb2xlKCdDb25cXCd0IGZpbmQgdHJlZSBub2RlIHdpZGggaWQ6JyArIGlkLCAnZXJyb3InKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKiDmipjlj6DmiYDmnInoioLngrkgKi9cclxuICAgIGNvbGxhcHNlQWxsKCkge1xyXG4gICAgICAgIHRoaXMuc3RhdGUucm93Tm9kZXMgPSB0aGlzLnN0YXRlLnJvd05vZGVzLm1hcCgocm93OiBSb3dOb2RlKSA9PiB7XHJcbiAgICAgICAgICAgIHJvdy5ub2RlLmV4cGFuZGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHJvdy52aXNpYmxlID0gIXJvdy5wYXJlbnQ7XHJcbiAgICAgICAgICAgIHJldHVybiByb3c7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnZpcnR1YWxpemVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyVmlydHVhbFJvd05vZGVzKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zZXJpYWxpemVkVmFsdWUgPSB0aGlzLnN0YXRlLnJvd05vZGVzO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIHRoaXMuY29sbGFwc2VBbGxOb2Rlcy5lbWl0KCk7XHJcbiAgICAgICAgdGhpcy5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgdGhpcy5zZXROZXdDb2x1bW5zV2lkdGgoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDb250YWluZXJPZmZzZXQoKSB7XHJcbiAgICAgICAgY29uc3QgcmVjdCA9IHRoaXMuY29udGFpbmVyRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBsZWZ0OiByZWN0LmxlZnQgKyBkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQsXHJcbiAgICAgICAgICAgIHRvcDogcmVjdC50b3AgKyBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgb25Db2x1bW5SZXNpemVCZWdpbihldmVudCkge1xyXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lckxlZnQgPSBNYXRoLnJvdW5kKHRoaXMuZ2V0Q29udGFpbmVyT2Zmc2V0KCkubGVmdCk7XHJcbiAgICAgICAgdGhpcy5sYXN0UmVzaXplckhlbHBlclggPSAoZXZlbnQucGFnZVggLSBjb250YWluZXJMZWZ0ICsgdGhpcy5jb250YWluZXJFbGVtZW50LnNjcm9sbExlZnQpO1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25Db2x1bW5SZXNpemUoZXZlbnQpIHtcclxuICAgICAgICBpZiAodGhpcy5yZXNpemFibGVDb2x1bW5zKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lckxlZnQgPSB0aGlzLmdldENvbnRhaW5lck9mZnNldCgpLmxlZnQ7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3ModGhpcy5jb250YWluZXJFbGVtZW50LCAndWktdW5zZWxlY3RhYmxlLXRleHQnKTtcclxuICAgICAgICAgICAgdGhpcy5yZXNpemVySGVscGVyVkMubmF0aXZlRWxlbWVudC5zdHlsZS5oZWlnaHQgPSB0aGlzLmNvbnRhaW5lckVsZW1lbnQub2Zmc2V0SGVpZ2h0ICsgJ3B4JztcclxuICAgICAgICAgICAgdGhpcy5yZXNpemVySGVscGVyVkMubmF0aXZlRWxlbWVudC5zdHlsZS50b3AgPSAwICsgJ3B4JztcclxuICAgICAgICAgICAgdGhpcy5yZXNpemVySGVscGVyVkMubmF0aXZlRWxlbWVudC5zdHlsZS5sZWZ0ID0gKGV2ZW50LnBhZ2VYIC0gY29udGFpbmVyTGVmdCkgKyAncHgnO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5yZXNpemVySGVscGVyVkMubmF0aXZlRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25Db2x1bW5SZXNpemVFbmQoZXZlbnQ6IGFueSwgY29sdW1uOiBhbnkpIHtcclxuICAgICAgICBpZiAoIXRoaXMucmVzaXplckhlbHBlclZDLm5hdGl2ZUVsZW1lbnQub2Zmc2V0TGVmdCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDlgY/np7vph49cclxuICAgICAgICBjb25zdCBkZWx0YSA9IHRoaXMucmVzaXplckhlbHBlclZDLm5hdGl2ZUVsZW1lbnQub2Zmc2V0TGVmdCAtIHRoaXMubGFzdFJlc2l6ZXJIZWxwZXJYO1xyXG4gICAgICAgIC8vIOWIl+WuvVxyXG4gICAgICAgIGNvbnN0IGNvbHVtbldpZHRoID0gY29sdW1uLm9mZnNldFdpZHRoO1xyXG4gICAgICAgIC8vIOaWsOWuveW6plxyXG4gICAgICAgIGNvbnN0IG5ld0NvbHVtbldpZHRoID0gY29sdW1uV2lkdGggKyBkZWx0YTtcclxuICAgICAgICAvLyDmnIDlsI/lrr3luqZcclxuICAgICAgICBjb25zdCBtaW5XaWR0aCA9IGNvbHVtbi5zdHlsZS5taW5XaWR0aCB8fCAxNTtcclxuXHJcbiAgICAgICAgbGV0IHJlc2l6ZUNvbHVtbkluZGV4ID0gLTE7XHJcbiAgICAgICAgaWYgKGNvbHVtbi5pZCkge1xyXG4gICAgICAgICAgICByZXNpemVDb2x1bW5JbmRleCA9IHRoaXMuY29sdW1ucy5maW5kSW5kZXgobiA9PiBuLmlkID09PSBjb2x1bW4uaWQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbEZpZWxkID0gY29sdW1uLmdldEF0dHJpYnV0ZSgnZmllbGQnKTtcclxuICAgICAgICAgICAgaWYgKGNvbEZpZWxkKSB7XHJcbiAgICAgICAgICAgICAgICByZXNpemVDb2x1bW5JbmRleCA9IHRoaXMuY29sdW1ucy5maW5kSW5kZXgobiA9PiBuLmZpZWxkID09PSBjb2xGaWVsZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBpZiAoIXRoaXMuZml0Q29sdW1ucykge1xyXG4gICAgICAgICAgICB0aGlzLnJlc2l6ZUNvbEdyb3VwKHRoaXMuaGVhZGVyVGFibGUubmF0aXZlRWxlbWVudCwgcmVzaXplQ29sdW1uSW5kZXgsIG5ld0NvbHVtbldpZHRoLCAwKTtcclxuICAgICAgICAgICAgdGhpcy5yZXNpemVDb2xHcm91cCh0aGlzLmJvZHlUYWJsZS5uYXRpdmVFbGVtZW50LCByZXNpemVDb2x1bW5JbmRleCwgbmV3Q29sdW1uV2lkdGgsIDApO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuY29sdW1uc1tyZXNpemVDb2x1bW5JbmRleF0pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29sdW1uc1tyZXNpemVDb2x1bW5JbmRleF0ud2lkdGggPSBuZXdDb2x1bW5XaWR0aDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5zb3J0Q29sdW1uc0J5Rml4ZWQoZmFsc2UpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5zZXRDZWxsV2lkdGhDc3ModGhpcy5hbGxDb2x1bW5zV2lkdGgoKSwgMCwgW10pO1xyXG5cclxuICAgICAgICAgICAgLy8gdGhpcy5zZXRUYWJsZVdpZHRoKHRoaXMuYWxsQ29sdW1uc1dpZHRoKCkpO1xyXG5cclxuICAgICAgICAgICAgLy8gLy8gdXBkYXRlIGNzcy5cclxuICAgICAgICAgICAgLy8gY29uc3QgX2NvbEluZm8gPSB0aGlzLmNvbHVtbnNbcmVzaXplQ29sdW1uSW5kZXhdO1xyXG4gICAgICAgICAgICAvLyBpZiAoX2NvbEluZm8pIHtcclxuICAgICAgICAgICAgLy8gICAgIGNvbnN0IHJ1bGVOYW1lID0gdGhpcy5jb2x1bW5Dc3NOYW1lKF9jb2xJbmZvKTtcclxuICAgICAgICAgICAgLy8gICAgIGNvbnN0IHN0eWxlY3NzID0gcnVsZU5hbWUgKyAne3dpZHRoOicgKyBuZXdDb2x1bW5XaWR0aCArICdweH0nO1xyXG4gICAgICAgICAgICAvLyAgICAgdGhpcy51dGlscy5hcHBlbmRDc3NSdWxlcyhbc3R5bGVjc3NdLCB0aGlzLnN0eWxlRWxlbWVudC5zaGVldCk7XHJcbiAgICAgICAgICAgIC8vIH1cclxuXHJcbiAgICAgICAgICAgIC8vIGNvbnN0IG5leHRDb2x1bW4gPSB0aGlzLmNvbHVtbnNbcmVzaXplQ29sdW1uSW5kZXggKyAxXTtcclxuICAgICAgICAgICAgLy8gaWYgKG5leHRDb2x1bW4gJiYgbmV4dENvbHVtbi5maXhlZCkge1xyXG4gICAgICAgICAgICAvLyAgICAgY29uc3QgcnVsZU5hbWUgPSB0aGlzLmNvbHVtbkNzc05hbWUobmV4dENvbHVtbik7XHJcbiAgICAgICAgICAgIC8vICAgICBjb25zdCBzdHlsZWNzcyA9IHJ1bGVOYW1lICsgJ3snICsgbmV4dENvbHVtbi5maXhlZCArICc6JyArIG5leHRDb2x1bW5bbmV4dENvbHVtbi5maXhlZF0gKyAncHh9JztcclxuICAgICAgICAgICAgLy8gICAgIHRoaXMudXRpbHMuYXBwZW5kQ3NzUnVsZXMoW3N0eWxlY3NzXSwgdGhpcy5zdHlsZUVsZW1lbnQuc2hlZXQpO1xyXG4gICAgICAgICAgICAvLyB9XHJcblxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChuZXdDb2x1bW5XaWR0aCA+IG1pbldpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgbmV4dENvbHVtbiA9IGNvbHVtbi5uZXh0RWxlbWVudFNpYmxpbmc7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAoIW5leHRDb2x1bW4ub2Zmc2V0UGFyZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV4dENvbHVtbiA9IG5leHRDb2x1bW4ubmV4dEVsZW1lbnRTaWJsaW5nO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChuZXh0Q29sdW1uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dENvbHVtbldpZHRoID0gbmV4dENvbHVtbi5vZmZzZXRXaWR0aCAtIGRlbHRhO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHRDb2x1bW5NaW5XaWR0aCA9IG5leHRDb2x1bW4uc3R5bGUubWluV2lkdGggfHwgMTU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdDb2x1bW5XaWR0aCA+IDE1ICYmIG5leHRDb2x1bW5XaWR0aCA+IG5leHRDb2x1bW5NaW5XaWR0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc2l6ZUNvbEdyb3VwKHRoaXMuaGVhZGVyVGFibGUubmF0aXZlRWxlbWVudCwgcmVzaXplQ29sdW1uSW5kZXgsIG5ld0NvbHVtbldpZHRoLCBuZXh0Q29sdW1uV2lkdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc2l6ZUNvbEdyb3VwKHRoaXMuYm9keVRhYmxlLm5hdGl2ZUVsZW1lbnQsIHJlc2l6ZUNvbHVtbkluZGV4LCBuZXdDb2x1bW5XaWR0aCwgbmV4dENvbHVtbldpZHRoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMucmVzaXplckhlbHBlclZDLm5hdGl2ZUVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZUNsYXNzKHRoaXMuY29udGFpbmVyRWxlbWVudCwgJ3VpLXVuc2VsZWN0YWJsZS10ZXh0Jyk7XHJcbiAgICAgICAgdGhpcy5wc1JlZi5kaXJlY3RpdmVSZWYudXBkYXRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzaXplQ29sR3JvdXAodGFibGUsIHJlc2l6ZUNvbHVtbkluZGV4LCBuZXdDb2x1bW5XaWR0aCwgbmV4dENvbHVtbldpZHRoPzogbnVtYmVyKSB7XHJcbiAgICAgICAgaWYgKHRhYmxlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbEdyb3VwID0gdGFibGUuY2hpbGRyZW5bMF0ubm9kZU5hbWUgPT09ICdDT0xHUk9VUCcgPyB0YWJsZS5jaGlsZHJlblswXSA6IG51bGw7XHJcblxyXG4gICAgICAgICAgICBpZiAoY29sR3JvdXApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbCA9IGNvbEdyb3VwLmNoaWxkcmVuW3Jlc2l6ZUNvbHVtbkluZGV4XTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5leHRDb2wgPSBjb2wubmV4dEVsZW1lbnRTaWJsaW5nO1xyXG4gICAgICAgICAgICAgICAgY29sLnN0eWxlLndpZHRoID0gbmV3Q29sdW1uV2lkdGggKyAncHgnO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobmV4dENvbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXh0Q29sdW1uV2lkdGggJiYgdGhpcy5maXRDb2x1bW5zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHRDb2wuc3R5bGUud2lkdGggPSBuZXh0Q29sdW1uV2lkdGggKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignU2Nyb2xsYWJsZSB0YWJsZXMgcmVxdWlyZSBhIGNvbGdyb3VwIHRvIHN1cHBvcnQgcmVzaXphYmxlIGNvbHVtbnMnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvblNlYXJjaCgpIHtcclxuICAgICAgICB0aGlzLnN0YXRlLnNlYXJjaFJvd05vZGVzID0gbnVsbDtcclxuICAgICAgICB0aGlzLnN0YXRlLnNlYXJjaGVkID0gISF0aGlzLnNlYXJjaERhdGEudmFsdWU7XHJcbiAgICAgICAgaWYgKHRoaXMuc2VhcmNoRGF0YS52YWx1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLnNlYXJjaERhdGEudmFsdWUgPSB0aGlzLnNlYXJjaERhdGEudmFsdWUudHJpbSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNlYXJjaC5lbWl0KHRoaXMuc2VhcmNoRGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgaW5zZXJ0KG5vZGU6IFRyZWVOb2RlLCBwYXJlbnQ/OiBUcmVlTm9kZSkge1xyXG4gICAgICAgIGlmIChwYXJlbnQpIHtcclxuICAgICAgICAgICAgaWYgKCFwYXJlbnQuY2hpbGRyZW4pIHtcclxuICAgICAgICAgICAgICAgIHBhcmVudC5jaGlsZHJlbiA9IFtdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHBhcmVudC5jaGlsZHJlbi5wdXNoKG5vZGUpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5leHBhbmROb2RlKHBhcmVudC5kYXRhW3RoaXMuaWRGaWVsZF0pO1xyXG4gICAgICAgICAgICB0aGlzLmFwcGVuZE5ldy5lbWl0KHsgcGFyZW50IH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YS5wdXNoKG5vZGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy51cGRhdGVTZXJpYWxpemVkVmFsdWUoKTtcclxuICAgIH1cclxuXHJcbiAgICBhcHBlbmQoZGF0YTogeyBba2V5OiBzdHJpbmddOiBhbnkgfSwgcGFyZW50PzogVHJlZU5vZGUpIHtcclxuICAgICAgICBpZiAoZGF0YSAmJiBkYXRhW3RoaXMuaWRGaWVsZF0pIHtcclxuICAgICAgICAgICAgdGhpcy5pbnNlcnQoeyBkYXRhLCBpZDogZGF0YVt0aGlzLmlkRmllbGRdIH0sIHBhcmVudCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy53cml0ZUNvbnNvbGUoJ1BsZWFzZSBzZXQgaWQgdmFsdWUuJywgJ3dhcm4nKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBlbWl0QXBwZW5kTmV3KHBhcmVudDogVHJlZU5vZGUpIHtcclxuICAgICAgICBpZiAodGhpcy52aXJ0dWFsaXplZCkge1xyXG4gICAgICAgICAgICBjb25zdCBub2RlUG9zWSA9IHRoaXMucHNSZWYuZGlyZWN0aXZlUmVmLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudC5zY3JvbGxUb3A7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU2VyaWFsaXplZFZhbHVlKG5vZGVQb3NZKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNlcmlhbGl6ZWRWYWx1ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgYXBwZW5kQ2hpbGRyZW4obm9kZXM6IFRyZWVOb2RlW10sIHBhcmVudDogVHJlZU5vZGUsIGVtaXQgPSB0cnVlKSB7XHJcbiAgICAgICAgaWYgKG5vZGVzICYmIG5vZGVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBpZiAocGFyZW50KSB7XHJcbiAgICAgICAgICAgICAgICBwYXJlbnQuY2hpbGRyZW4ucHVzaCguLi5ub2Rlcyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXRBcHBlbmROZXcocGFyZW50KTtcclxuICAgICAgICAgICAgICAgIGlmIChlbWl0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBlbmROZXcuZW1pdCh7IHBhcmVudCB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcign5pyq5om+5Yiw54i257qn6IqC54K5Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNlcmlhbGl6ZWRWYWx1ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLndyaXRlQ29uc29sZSgn5re75Yqg5a2Q6IqC54K555qE5pWw5o2u5Li656m6JywgJ3dhcm4nKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbG9hZENoaWxkcmVuKG5vZGVzOiBUcmVlTm9kZVtdLCBwYXJlbnQ6IFRyZWVOb2RlLCBlbWl0ID0gdHJ1ZSkge1xyXG4gICAgICAgIGlmIChwYXJlbnQpIHtcclxuICAgICAgICAgICAgcGFyZW50LmNoaWxkcmVuID0gbm9kZXMgfHwgW107XHJcbiAgICAgICAgICAgIHRoaXMuZW1pdEFwcGVuZE5ldyhwYXJlbnQpO1xyXG4gICAgICAgICAgICBpZiAoZW1pdCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hcHBlbmROZXcuZW1pdCh7IHBhcmVudCB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZW1vdmUobm9kZUlkOiBzdHJpbmcpIHtcclxuICAgICAgICBpZiAobm9kZUlkKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJvd05vZGUgPSB0aGlzLmZpbmRSb3dOb2RlKG5vZGVJZCk7XHJcbiAgICAgICAgICAgIGlmIChyb3dOb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyByZW1vdmUodGhpcy5zdGF0ZS5yb3dOb2RlcywgKG4pID0+IHtcclxuICAgICAgICAgICAgICAgIC8vICAgICByZXR1cm4gbi5pZCA9PT0gbm9kZUlkO1xyXG4gICAgICAgICAgICAgICAgLy8gfSk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RWYWx1ZSA9PT0gbm9kZUlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvdyA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RWYWx1ZSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHJvd05vZGUucGFyZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlKHJvd05vZGUucGFyZW50LmNoaWxkcmVuLCAobikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5kYXRhW3RoaXMuaWRGaWVsZF0gPT09IG5vZGVJZDtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlKHRoaXMuc3RhdGUucm93Tm9kZXMsIChuKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLmlkID09PSBub2RlSWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YSA9IHRoaXMuZGF0YS5maWx0ZXIobiA9PiBuLmRhdGFbdGhpcy5pZEZpZWxkXSAhPT0gbm9kZUlkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU2VyaWFsaXplZFZhbHVlKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMudHRTZXJ2aWNlLm9uUmVtb3ZlKHJvd05vZGUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVkLmVtaXQocm93Tm9kZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlKG5vZGVJZDogc3RyaW5nLCBkYXRhOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9KSB7XHJcbiAgICAgICAgaWYgKG5vZGVJZCAmJiBkYXRhKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJvd05vZGUgPSB0aGlzLmZpbmRSb3dOb2RlKG5vZGVJZCk7XHJcbiAgICAgICAgICAgIGlmIChyb3dOb2RlKSB7XHJcbiAgICAgICAgICAgICAgICByb3dOb2RlLm5vZGUuZGF0YSA9IGV4dGVuZChyb3dOb2RlLm5vZGUuZGF0YSwgZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMudHRTZXJ2aWNlLm9uVXBkYXRlKHJvd05vZGUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVkLmVtaXQocm93Tm9kZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlTm9kZVByb3BlcnR5KG5vZGVpZDogc3RyaW5nLCBwcm9wZXJ0eTogeyBba2V5OiBzdHJpbmddOiBhbnkgfSApIHtcclxuICAgICAgICBjb25zdCByb3dOb2RlID0gdGhpcy5maW5kUm93Tm9kZShub2RlaWQpO1xyXG4gICAgICAgIGlmIChyb3dOb2RlICYmIHByb3BlcnR5KSB7XHJcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHByb3BlcnR5KS5mb3JFYWNoKGsgPT4ge1xyXG4gICAgICAgICAgICAgICAgcm93Tm9kZS5ub2RlW2tdID0gcHJvcGVydHlba107XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNldFNjb3JsbEJvZHlIZWlnaHQoKSB7XHJcbiAgICAgICAgdGhpcy5zY29ybGxCb2R5SGVpZ2h0ID0gdGhpcy5oZWlnaHQ7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNob3dGaWx0ZXJCYXIpIHtcclxuICAgICAgICAgICAgdGhpcy5zY29ybGxCb2R5SGVpZ2h0ID0gdGhpcy5zY29ybGxCb2R5SGVpZ2h0IC0gNDY7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmZpeGVkSGVhZGVyICYmIHRoaXMuc2hvd0hlYWRlcikge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5oZWFkZXJCb3ggJiYgKHRoaXMuaGVhZGVyV3JhcCB8fCB0aGlzLnVzZUdyb3VwSGVhZGVyKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaGggPSB0aGlzLmhlYWRlckJveC5uYXRpdmVFbGVtZW50LmNsaWVudEhlaWdodDtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2NvcmxsQm9keUhlaWdodCA9IHRoaXMuc2NvcmxsQm9keUhlaWdodCAtIGhoO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8g5a695p2+54mI5pe277yM6KGo5aS06auY5bqm5aKe6auY77yM6ZyA6KaB5oyJ5a6e6ZmF5Y+W5b6X6KGo5aS06auY5bqmXHJcbiAgICAgICAgICAgICAgICBsZXQgX2hlYWRlckhlaWdodCA9IHRoaXMuaGVhZGVySGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGhlbWVzS2V5ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2dzcF9ydGZfdGhlbVNLZXknKTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGVtZXNLZXkgPT09ICdsb29zZScgJiYgdGhpcy5oZWFkZXJCb3gpIHtcclxuICAgICAgICAgICAgICAgICAgICBfaGVhZGVySGVpZ2h0ID0gdGhpcy5oZWFkZXJCb3gubmF0aXZlRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjb3JsbEJvZHlIZWlnaHQgPSB0aGlzLnNjb3JsbEJvZHlIZWlnaHQgLSBfaGVhZGVySGVpZ2h0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5wYWdpbmF0aW9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2NvcmxsQm9keUhlaWdodCA9IHRoaXMuc2NvcmxsQm9keUhlaWdodCAtIHRoaXMucGFnZXJIZWlnaHQ7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcblxyXG4gICAgICAgIHRoaXMuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0V2lkdGgodykge1xyXG4gICAgICAgIHRoaXMud2lkdGggPSB3O1xyXG4gICAgfVxyXG5cclxuICAgIHJlc2l6ZShzaXplPzogeyB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciB9KSB7XHJcbiAgICAgICAgaWYgKHNpemUpIHtcclxuICAgICAgICAgICAgY29uc3QgdyA9IHBhcnNlSW50KCcnICsgc2l6ZS53aWR0aCwgMTApO1xyXG4gICAgICAgICAgICBjb25zdCBoID0gcGFyc2VJbnQoJycgKyBzaXplLmhlaWdodCwgMTApO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMud2lkdGggPT09IHcgJiYgdGhpcy5oZWlnaHQgPT09IGgpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLnNjcm9sbFkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBzUmVmLmRpcmVjdGl2ZVJlZi5zY3JvbGxUb1kodGhpcy5zdGF0ZS5zY3JvbGxZKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5zY3JvbGxYKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wc1JlZi5kaXJlY3RpdmVSZWYuc2Nyb2xsVG9YKHRoaXMuc3RhdGUuc2Nyb2xsWClcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zZXRXaWR0aCh3KTtcclxuICAgICAgICAgICAgdGhpcy5oZWlnaHQgPSBoO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNldFNjb3JsbEJvZHlIZWlnaHQoKTtcclxuICAgICAgICBpZiAodGhpcy5kYXRhICYmIHRoaXMuZGF0YS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJWaXJ0dWFsUm93Tm9kZXMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIC8vICAgICBpZiAodGhpcy5wc1JlZikge1xyXG4gICAgICAgIC8vICAgICAgICAgdGhpcy5wc1JlZi5kaXJlY3RpdmVSZWYudXBkYXRlKCk7XHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvLyB9LCAxMDApO1xyXG4gICAgfVxyXG5cclxuICAgIGxvYWREYXRhKGRhdGE6IFRyZWVOb2RlW10pIHtcclxuICAgICAgICBpZiAodGhpcy5zaG93TGluZXMpIHtcclxuICAgICAgICAgICAgdGhpcy5pc0xvYWROZXdEYXRhU2V0RW1wdHkgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLmRhdGEgPSBbXTtcclxuICAgICAgICAgICAgdGhpcy5pc0xvYWROZXdEYXRhU2V0RW1wdHkgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YTtcclxuICAgIH1cclxuXHJcbiAgICBlbXB0eSgpIHtcclxuICAgICAgICB0aGlzLmRhdGEgPSBbXTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDdXJyZW50QWxsUm93Tm9kZXMoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuc2VhcmNoZWQgJiYgdGhpcy5zdGF0ZS5zZWFyY2hSb3dOb2RlcyAmJiB0aGlzLnN0YXRlLnNlYXJjaFJvd05vZGVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5zZWFyY2hSb3dOb2RlcyB8fCB0aGlzLnN0YXRlLnJvd05vZGVzO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXRlLnJvd05vZGVzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjbGVhckFsbChkZXRlY3RDaGFuZ2VzID0gdHJ1ZSk6IFRyZWVUYWJsZUNvbXBvbmVudCB7XHJcbiAgICAgICAgdGhpcy5zdGF0ZS5yb3dOb2Rlcy5maWx0ZXIocm4gPT4gcm4uaW5kZXRlcm1pbmF0ZSkuZm9yRWFjaChybiA9PiB7XHJcbiAgICAgICAgICAgIHJuLmluZGV0ZXJtaW5hdGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy50dFNlcnZpY2Uub25DaGFuZ2VDaGVja2JveFN0YXR1cyhybik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuc3RhdGUucm93Tm9kZXMgPSB0aGlzLnN0YXRlLnJvd05vZGVzLm1hcCgocm93OiBSb3dOb2RlKSA9PiB7XHJcbiAgICAgICAgICAgIHJvdy5pc0NoZWNrZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgcm93LmlzU2VsZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgcm93LmluZGV0ZXJtaW5hdGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgcmV0dXJuIHJvdztcclxuICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgIC8vIGlmICh0aGlzLnNlYXJjaERhdGEgJiYgdGhpcy5zZWFyY2hEYXRhLnZhbHVlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuc2VhcmNoZWQgJiYgdGhpcy5zdGF0ZS5zZWFyY2hSb3dOb2RlcyAmJiB0aGlzLnN0YXRlLnNlYXJjaFJvd05vZGVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLnNlcmlhbGl6ZWRWYWx1ZSA9IHRoaXMuc3RhdGUuc2VhcmNoUm93Tm9kZXMubWFwKChyb3c6IFJvd05vZGUpID0+IHtcclxuICAgICAgICAgICAgICAgIHJvdy5pc0NoZWNrZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHJvdy5pc1NlbGVjdGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICByb3cuaW5kZXRlcm1pbmF0ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJvdztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmNoZWNrZWRzID0gW107XHJcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25zID0gW107XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZFJvdyA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2hvd0NoZWNrQWxsICYmIHRoaXMuaGVhZGVyQ2hlY2tib3hDbXApIHtcclxuICAgICAgICAgICAgdGhpcy5oZWFkZXJDaGVja2JveENtcC5jaGtBbGwubmF0aXZlRWxlbWVudC5pbmRldGVybWluYXRlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyQ2hlY2tib3hDbXAuY2hlY2tlZCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGRldGVjdENoYW5nZXMpIHtcclxuICAgICAgICAgICAgdGhpcy5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBkZXRlY3RDaGFuZ2VzKCk6IFRyZWVUYWJsZUNvbXBvbmVudCB7XHJcbiAgICAgICAgdGhpcy5jZFJlZi5tYXJrRm9yQ2hlY2soKTtcclxuICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tc3RyaW5nLWxpdGVyYWxcclxuICAgICAgICBpZiAoIXRoaXMuY2RSZWZbJ2Rlc3Ryb3llZCddKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2RSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBjbGVhckNoZWNrZWRzKCk6IFRyZWVUYWJsZUNvbXBvbmVudCB7XHJcbiAgICAgICAgaWYgKHRoaXMuY2hlY2tlZHMgJiYgdGhpcy5jaGVja2Vkcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5maW5kUm93Tm9kZXModGhpcy5jaGVja2Vkcy5tYXAodG4gPT4gdG4uZGF0YVt0aGlzLmlkRmllbGRdKSkuZm9yRWFjaChybiA9PiB7XHJcbiAgICAgICAgICAgICAgICBybi5pc0NoZWNrZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmNoZWNrZWRzID0gW107XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNob3dDaGVja0FsbCAmJiB0aGlzLmhlYWRlckNoZWNrYm94Q21wKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyQ2hlY2tib3hDbXAuY2hrQWxsLm5hdGl2ZUVsZW1lbnQuaW5kZXRlcm1pbmF0ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLmhlYWRlckNoZWNrYm94Q21wLmNoZWNrZWQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIGNsZWFyU2VsZWN0aW9ucygpOiBUcmVlVGFibGVDb21wb25lbnQge1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zZXJpYWxpemVkVmFsdWUgJiYgdGhpcy5zZXJpYWxpemVkVmFsdWUubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VyaWFsaXplZFZhbHVlLmZvckVhY2gobiA9PiB7XHJcbiAgICAgICAgICAgICAgICBuLmlzU2VsZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnN0YXRlLnJvd05vZGVzLmZvckVhY2gobiA9PiB7XHJcbiAgICAgICAgICAgIG4uaXNTZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zZWxlY3Rpb25zICYmIHRoaXMuc2VsZWN0aW9ucy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgY29uc3Qgbm9kZUlkcyA9IHRoaXMuc2VsZWN0aW9ucy5tYXAodG4gPT4gdG4uZGF0YVt0aGlzLmlkRmllbGRdKTtcclxuICAgICAgICAgICAgdGhpcy5maW5kUm93Tm9kZXMobm9kZUlkcykuZm9yRWFjaChybiA9PiB7XHJcbiAgICAgICAgICAgICAgICBybi5pc1NlbGVjdGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zaW5nbGVTZWxlY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICBybi5pc0NoZWNrZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNlbGVjdGlvbnMgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZFJvdyA9IHVuZGVmaW5lZDtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIC8qKiDpgInkuK3nrKwx5Liq5Y+v5Lul6YCJ5Lit55qE6IqC54K5ICovXHJcbiAgICBzZWxlY3RGaXJzdE5vZGUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUucm93Tm9kZXMgJiYgdGhpcy5zdGF0ZS5yb3dOb2Rlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgY29uc3QgZmlyc3RDYW5TZWxlY3ROb2RlID0gdGhpcy5zdGF0ZS5yb3dOb2Rlcy5maW5kKG4gPT4gbi5ub2RlLnNlbGVjdGFibGUpO1xyXG4gICAgICAgICAgICBpZiAoZmlyc3RDYW5TZWxlY3ROb2RlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdE5vZGUoZmlyc3RDYW5TZWxlY3ROb2RlLmlkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNjcm9sbFRvQ3VycmVudFJvdyhpZDogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3QgdHJJZCA9ICdyb3dub2RlLScgKyBpZDtcclxuICAgICAgICAvLyBjb25zdCB0ckVsZSA9ICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRySWQpO1xyXG4gICAgICAgIGNvbnN0IHRyRWxlID0gdGhpcy5lbC5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgdHJJZCkgfHwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodHJJZCk7XHJcbiAgICAgICAgaWYgKHRyRWxlICYmIHRyRWxlLmNsb3Nlc3QoJy5mYXJyaXMtdHJlZXRhYmxlJykgJiYgdHJFbGUuY2xvc2VzdCgnLmZhcnJpcy10cmVldGFibGUnKS5pZCA9PT0gdGhpcy5pZCkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNFbGVtZW50SW5WaWV3cG9ydCh0ckVsZSkpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0ckVsZS5zY3JvbGxJbnRvVmlld0lmTmVlZGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJFbGUuc2Nyb2xsSW50b1ZpZXdJZk5lZWRlZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc3QgYnJvd3NlckluZm8gPSB0aGlzLnV0aWxzLmdldEJyb3dzZXJUeXBlKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoYnJvd3NlckluZm8uZmYgJiYgdGhpcy51dGlscy5nZXRGRlZlcigpIDwgNTgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0ckVsZS5zY3JvbGxJbnRvVmlldygpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0ckVsZS5zY3JvbGxJbnRvVmlldyh7IGJsb2NrOiAnbmVhcmVzdCcsIGlubGluZTogJ25lYXJlc3QnIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdHJFbGUuc2Nyb2xsSW50b1ZpZXcoeyBibG9jazogJ25lYXJlc3QnfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGlzRWxlbWVudEluVmlld3BvcnQoZWwpIHtcclxuICAgICAgICBjb25zdCBjb250YWluZXJFbCA9IHRoaXMuZWwubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZmFycmlzLXRyZWV0YWJsZS1ib2R5Jyk7XHJcbiAgICAgICAgaWYgKCFjb250YWluZXJFbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGNvbnRhaW5lckVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgIGNvbnN0IHZpZXdQb3J0SGVpZ2h0ID0gY29udGFpbmVyLmhlaWdodDtcclxuICAgICAgICBjb25zdCBvZmZzZXRUb3AgPSBlbC5vZmZzZXRUb3AgKyB0aGlzLnRvcEhpZGVIZWlnaHQ7XHJcbiAgICAgICAgY29uc3Qgc2Nyb2xsVG9wID0gdGhpcy5wc1JlZi5kaXJlY3RpdmVSZWYuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LnNjcm9sbFRvcDtcclxuICAgICAgICBjb25zdCB0b3AgPSBvZmZzZXRUb3AgLSBzY3JvbGxUb3A7XHJcbiAgICAgICAgcmV0dXJuICB0b3AgPj0gMCAmJiB0b3AgPD0gdmlld1BvcnRIZWlnaHQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfc2Nyb2xsVG9Ob2RlKG5vZGVJZDogc3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy5zY3JvbGxUb0N1cnJlbnROb2RlKG5vZGVJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2Nyb2xsVG9DdXJyZW50Tm9kZShub2RlaWQgPSAnJykge1xyXG4gICAgICAgIGxldCBpZCA9IG5vZGVpZDtcclxuICAgICAgICBpZiAoIW5vZGVpZCAmJiB0aGlzLnNlbGVjdGVkUm93KSB7XHJcbiAgICAgICAgICAgIGlkID0gdGhpcy5zZWxlY3RlZFJvdy5pZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuc2Nyb2xsVG9DdXJyZW50Um93KGlkKTtcclxuICAgICAgICBpZiAoIXJlc3VsdCkge1xyXG4gICAgICAgICAgICBjb25zdCByb3dOb2RlID0gdGhpcy5maW5kUm93Tm9kZShpZCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNob3dSb3dzT25lUGFnZXIgPSBNYXRoLmNlaWwodGhpcy5zY29ybGxCb2R5SGVpZ2h0IC8gdGhpcy5yb3dIZWlnaHQgKSArIDE7XHJcbiAgICAgICAgICAgIGlmIChyb3dOb2RlLnBhcmVudHMgJiYgcm93Tm9kZS5wYXJlbnRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgcm93Tm9kZS5wYXJlbnRzLmZvckVhY2gocGlkID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4cGFuZE5vZGUocGlkLCBmYWxzZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgIGNvbnN0IHJvd0luZGV4ID0gdGhpcy5zdGF0ZS5yb3dOb2Rlcy5maWx0ZXIobiA9PiBuLnZpc2libGUpLmZpbmRJbmRleChuID0+IG4uaWQgPT09IGlkKTtcclxuICAgICAgICAgICAgaWYgKHJvd0luZGV4IDwgc2hvd1Jvd3NPbmVQYWdlcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudmlydHVhbGl6ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckRhdGEoMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbFRvQ3VycmVudFJvdyhpZCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCB0b3AgPSByb3dJbmRleCAqIHRoaXMucm93SGVpZ2h0O1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMudmlydHVhbGl6ZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyRGF0YSh0b3AgLSB0aGlzLnJvd0hlaWdodCk7XHJcblxyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxUb0N1cnJlbnRSb3coaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBzUmVmICYmIHRoaXMucHNSZWYuZGlyZWN0aXZlUmVmKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHNSZWYuZGlyZWN0aXZlUmVmLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudC5zY3JvbGxUb3AgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LCA1MCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbFRvWSh0b3AgLSB0aGlzLnJvd0hlaWdodCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbFRvQ3VycmVudFJvdyhpZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIOmAieS4reaMh+WumklEIOeahOiKgueCuSxcclxuICAgICAqIGRldGVjdENoYW5nZXM6IOinpuWPkeiEj+WAvOajgOafpe+8jOm7mOiupOS4uiB0cnVlXHJcbiAgICAgKiBnb3RvY3VycmVudDog5L2/55So6YCJ5Lit6IqC54K55Y+v6KeB77yM6buY6K6k5Li6IHRydWVcclxuICAgICAqL1xyXG4gICAgc2VsZWN0Tm9kZShpZDogc3RyaW5nLCBkZXRlY3RDaGFuZ2VzID0gdHJ1ZSwgZ290b2N1cnJlbnQgPSB0cnVlKTogVHJlZVRhYmxlQ29tcG9uZW50IHtcclxuICAgICAgICBpZiAoIWlkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgbm9kZSA9IHRoaXMuZmluZFJvd05vZGUoaWQpO1xyXG4gICAgICAgIGNvbnN0IGVtaXQgPSAhdGhpcy5zZWxlY3RlZFJvdyB8fCAodGhpcy5zZWxlY3RlZFJvdyAmJiBpZCAhPT0gdGhpcy5zZWxlY3RlZFJvdy5pZCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKG5vZGUgJiYgZW1pdCkge1xyXG4gICAgICAgICAgICBub2RlLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zaW5nbGVTZWxlY3QgfHwgdGhpcy5vbmx5U2VsZWN0U2VsZikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhclNlbGVjdGlvbnMoKTtcclxuICAgICAgICAgICAgICAgIG5vZGUuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbnMgPSBbbm9kZS5ub2RlXTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrT25TZWxlY3QgJiYgdGhpcy5zaG93Q2hlY2tib3gpIHtcclxuICAgICAgICAgICAgICAgICAgICBub2RlLmlzQ2hlY2tlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubXVsdGlTZWxlY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRDaGVja2Vkcyhub2RlKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyQ2hlY2tlZHMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja2VkcyA9IFtub2RlLm5vZGVdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY2FzY2FkZUNoZWNrICYmIHRoaXMuY2FzY2FkZVVwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUGFyZW50Q2hlY2tib3hTdGF0dXMobm9kZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTZWxlY3Rpb25zKG5vZGUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93ID0gbm9kZS5ub2RlO1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdE5vZGVDaGFuZ2VkU3ViamVjdC5uZXh0KGlkKTtcclxuICAgICAgICAgICAgdGhpcy5ub2RlU2VsZWN0ZWQuZW1pdCh7IG5vZGU6IG5vZGUubm9kZSwgaW5zdGFuY2U6IHRoaXMgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5zZXJpYWxpemVkVmFsdWUuZmluZChuPT5uLmlkID09IHRoaXMuc2VsZWN0ZWRSb3cuaWQpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlcmlhbGl6ZWRWYWx1ZS5maW5kKG49Pm4uaWQgPT0gdGhpcy5zZWxlY3RlZFJvdy5pZCkuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoZGV0ZWN0Q2hhbmdlcykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGdvdG9jdXJyZW50ICYmIHRoaXMuZml4ZWRIZWFkZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG9DdXJyZW50Tm9kZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKCFub2RlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHRoaXMud3JpdGVDb25zb2xlKGDmnKrmib7liLBJROS4uiAke2lkfSDnmoTmlbDmja7vvIHvvIFgKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiDlj5bmtojpgInkuK0gKi9cclxuICAgIHVuU2VsZWN0Tm9kZShpZDogc3RyaW5nLCBkZXRlY3RDaGFuZ2VzID0gdHJ1ZSkge1xyXG4gICAgICAgIGNvbnN0IHJvd05vZGUgPSB0aGlzLmZpbmRSb3dOb2RlKGlkKTtcclxuICAgICAgICBpZiAocm93Tm9kZSkge1xyXG4gICAgICAgICAgICByb3dOb2RlLmlzU2VsZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2luZ2xlU2VsZWN0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyU2VsZWN0aW9ucygpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvdyA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICByb3dOb2RlLmlzQ2hlY2tlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25zID0gW107XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vbmx5U2VsZWN0U2VsZikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9ucyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFNlbGVjdGlvbnMocm93Tm9kZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChkZXRlY3RDaGFuZ2VzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLm5vZGVVblNlbGVjdC5lbWl0KHsgbm9kZTogcm93Tm9kZS5ub2RlLCBpbnN0YW5jZTogdGhpcyB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLndyaXRlQ29uc29sZShg5pyq5om+5YiwSUTkuLoke2lkfeeahOaVsOaNru+8ge+8gWApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKiog6YCJ5Lit5aSa6KGM5pWw5o2uICovXHJcbiAgICBzZWxlY3ROb2RlcyhpZHM6IHN0cmluZ1tdLCBkZXRlY3RDaGFuZ2VzID0gdHJ1ZSwgZW1pdE5vZGVTZWxlY3RlZCA9IGZhbHNlKTogVHJlZVRhYmxlQ29tcG9uZW50IHtcclxuICAgICAgICBpZiAoaWRzICYmIGlkcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgY29uc3Qgbm9kZXMgPSB0aGlzLmZpbmRSb3dOb2RlcyhpZHMpLm1hcChybiA9PiB7XHJcbiAgICAgICAgICAgICAgICBybi5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U2VsZWN0aW9ucyhybik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcm4ubm9kZTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvbnMgPSBbLi4udGhpcy5zZWxlY3Rpb25zXTtcclxuXHJcbiAgICAgICAgICAgIGlmIChkZXRlY3RDaGFuZ2VzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5zZWxlY3ROb2RlQ2hhbmdlZFN1YmplY3QubmV4dChpZHMuam9pbignLCcpKTtcclxuICAgICAgICAgICAgaWYgKGVtaXROb2RlU2VsZWN0ZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubm9kZVNlbGVjdGVkLmVtaXQoeyBub2RlOiBub2RlcywgaW5zdGFuY2U6IHRoaXMgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIOWPlua2iOmAieS4rSAqL1xyXG4gICAgdW5TZWxlY3ROb2RlcyhpZHM/OiBzdHJpbmdbXSkge1xyXG4gICAgICAgIGlmIChpZHMgJiYgaWRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBjb25zdCByb3dub2RlcyA9IHRoaXMuZmluZFJvd05vZGVzKGlkcyk7XHJcbiAgICAgICAgICAgIGlmIChyb3dub2RlcyAmJiByb3dub2Rlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHJvd25vZGVzLmZvckVhY2gocm4gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJuLmlzU2VsZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFNlbGVjdGlvbnMocm4pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbnMgPSBbLi4udGhpcy5zZWxlY3Rpb25zXTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ub2RlVW5TZWxlY3QuZW1pdCh7IG5vZGU6IHJvd25vZGVzLm1hcChyID0+IHIubm9kZSksIGluc3RhbmNlOiB0aGlzIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5jbGVhclNlbGVjdGlvbnMoKTtcclxuICAgICAgICAgICAgdGhpcy5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6ZKp6YCJ5oyH5a6a55qE6IqC54K5XHJcbiAgICAgKiBAcGFyYW0gdXBkYXRlUGFyZW50Q2hlY2tib3hTdGF0dXM6IOaYr+WQpuabtOaWsOeItue6p+iKgueCuWNoZWNrYm94IOeKtuaAgSwg6buY6K6k5Li6IHRydWVcclxuICAgICAqIEBwYXJhbSBkZXRlY3RDaGFuZ2VzIOinpuWPkeWPmOabtOajgOa1i+OAgum7mOiupOS4uiB0cnVlXHJcbiAgICAgKi9cclxuICAgIGNoZWNrZWROb2RlKGlkOiBzdHJpbmcsIHVwZGF0ZVBhcmVudENoZWNrYm94U3RhdHVzID0gdHJ1ZSwgZGV0ZWN0Q2hhbmdlcyA9IHRydWUpIHtcclxuICAgICAgICBpZiAodGhpcy5pc0VuYWJsZU11bHRpU2VsZWN0KCkpIHtcclxuICAgICAgICAgICAgY29uc3Qgbm9kZSA9IHRoaXMuZmluZFJvd05vZGUoaWQpO1xyXG4gICAgICAgICAgICBpZiAobm9kZSkge1xyXG4gICAgICAgICAgICAgICAgbm9kZS5pc0NoZWNrZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzQ2hlY2tlZChub2RlLm5vZGUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5jaGVja2VkcyA9IFsuLi50aGlzLmNoZWNrZWRzIHx8IFtdLCBub2RlLm5vZGVdO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Q2hlY2tlZHMobm9kZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh1cGRhdGVQYXJlbnRDaGVja2JveFN0YXR1cyAmJiB0aGlzLmNhc2NhZGVDaGVjayAmJiB0aGlzLmNhc2NhZGVVcCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVBhcmVudENoZWNrYm94U3RhdHVzKG5vZGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChkZXRlY3RDaGFuZ2VzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGVDaGVja2VkLmVtaXQoeyBvcmlnaW5hbEV2ZW50OiBudWxsLCBub2RlOiBub2RlLm5vZGUsIGluc3RhbmNlOiB0aGlzIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy53cml0ZUNvbnNvbGUoYOacquaJvuWIsElE5Li6JHtpZH3nmoTmlbDmja7vvIHvvIFgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB1bkNoZWNrZWROb2RlKGlkOiBzdHJpbmcsIHVwZGF0ZVBhcmVudENoZWNrYm94U3RhdHVzID0gdHJ1ZSwgKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNFbmFibGVNdWx0aVNlbGVjdCgpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJvd25vZGUgPSB0aGlzLmZpbmRSb3dOb2RlKGlkKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChyb3dub2RlKSB7XHJcbiAgICAgICAgICAgICAgICByb3dub2RlLmlzQ2hlY2tlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRDaGVja2Vkcyhyb3dub2RlKTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdE9uQ2hlY2spIHtcclxuICAgICAgICAgICAgICAgICAgICByb3dub2RlLmlzU2VsZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFNlbGVjdGlvbnMocm93bm9kZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkUm93ICYmIHRoaXMuc2VsZWN0ZWRSb3cuaWQgPT09IGlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvdyA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2luZ2xlU2VsZWN0IHx8ICF0aGlzLmNhc2NhZGVDaGVjaykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlTm9kZVN0YXR1cygpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodXBkYXRlUGFyZW50Q2hlY2tib3hTdGF0dXMgJiYgdGhpcy5jYXNjYWRlQ2hlY2sgJiYgdGhpcy5jYXNjYWRlVXApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVQYXJlbnRDaGVja2JveFN0YXR1cyhyb3dub2RlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrVmFsdWVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tWYWx1ZXMgPSB0aGlzLmNoZWNrVmFsdWVzLmZpbHRlcihuID0+IG4gIT09IGlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja1ZhbHVlc0NoYW5nZS5lbWl0KHRoaXMuY2hlY2tWYWx1ZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub2RlVW5DaGVja2VkLmVtaXQoeyBub2RlOiByb3dub2RlLCBpbnN0YW5jZTogdGhpcyB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdW5Ob2RlcyA9IHRoaXMuY2FzY2FkZU5vZGVzKHJvd25vZGUsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWRzID0gWy4uLnRoaXMuY2hlY2tlZHNdO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tWYWx1ZXNDaGFuZ2UuZW1pdCh0aGlzLmNoZWNrVmFsdWVzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub2RlVW5DaGVja2VkLmVtaXQoeyBub2RlOiByb3dub2RlLCBub2RlczogdW5Ob2RlcywgaW5zdGFuY2U6IHRoaXMgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMud3JpdGVDb25zb2xlKGDmnKrmib7liLBJROS4uiR7aWR955qE5pWw5o2u77yB77yBYCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfY2hlY2tlZE5vZGVzKGlkczogc3RyaW5nW10sIGNoZWNrZWQ6IGJvb2xlYW4pIHtcclxuICAgICAgICBjb25zdCBwYXJlbnRJRFMgPSBbXTtcclxuICAgICAgICBjb25zdCBub2RlcyA9IHRoaXMuZmluZFJvd05vZGVzKGlkcykubWFwKHJuID0+IHtcclxuICAgICAgICAgICAgcGFyZW50SURTLnB1c2gocm4ucGFyZW50cyk7XHJcbiAgICAgICAgICAgIGlmIChybi5ub2RlLnNlbGVjdGFibGUpIHtcclxuICAgICAgICAgICAgICAgIHJuLmlzQ2hlY2tlZCA9IGNoZWNrZWQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldENoZWNrZWRzKHJuLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJuLm5vZGU7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5jaGVja2VkcyA9IFsuLi50aGlzLmNoZWNrZWRzXTtcclxuICAgICAgICBpZiAodGhpcy5jYXNjYWRlQ2hlY2sgJiYgdGhpcy5jYXNjYWRlVXApIHtcclxuICAgICAgICAgICAgLy8g5pu05paw54i26IqC54K55aSN5qGG55qE6YCJ5Lit54q25oCBXHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUGFyZW50c0NoZWNrU3RhdHVzKHBhcmVudElEUyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbm9kZXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIOaJuemHj+mAieS4reiKgueCuVxyXG4gICAgICogQHBhcmFtIGlkczogaWQg6ZuG5ZCIXHJcbiAgICAgKiBAcGFyYW0gZGV0ZWN0Q2hhbmdlczogYm9vbGVhbiAg6buY6K6k5Li6IHRydWUgLOaYr+WQpuinpuWPkeWPmOabtOajgOa1i1xyXG4gICAgICogY2xvc2VDYXNjYWRlOiAg5omn6KGM5Y+W5raI6ZKp6YCJ5pe25piv5ZCm5YWz6Zet57qn6IGU5Yqf6IO944CC6buY6K6k5Li6IGZhbHNlXHJcbiAgICAgKiAgICAgIOiuvuS4unRydWXml7bvvIzpkqnpgInlsIbnpoHnlKjnuqfogZTnmoTlip/og73vvIzku4XlpITnkIblvZPliY3oioLngrnnmoTpgInkuK3nirbmgIHjgILmiafooYzlrozmr5XlkI7vvIzmgaLlpI3ljp/lhYjnmoTnuqfogZTpgInpobnjgIJcclxuICAgICAqL1xyXG4gICAgY2hlY2tlZE5vZGVzKGlkczogYW55W10sIGRldGVjdENoYW5nZXMgPSB0cnVlLCBlbWl0ID0gdHJ1ZSwgY2xvc2VDYXNjYWRlPzogYm9vbGVhbikge1xyXG4gICAgICAgIGlmICh0aGlzLmlzRW5hYmxlTXVsdGlTZWxlY3QoKSkge1xyXG4gICAgICAgICAgICBpZiAoaWRzICYmIGlkcy5sZW5ndGgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBfY2FzY2FkZSA9IHRoaXMuY2FzY2FkZUNoZWNrO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNsb3NlQ2FzY2FkZSAmJiBfY2FzY2FkZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FzY2FkZUNoZWNrID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3Qgbm9kZXMgPSB0aGlzLl9jaGVja2VkTm9kZXMoaWRzLCB0cnVlKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoY2xvc2VDYXNjYWRlICYmIF9jYXNjYWRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5oGi5aSN57qn6IGUXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYXNjYWRlQ2hlY2sgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQWxsQ2hlY2tib3hTdGF0dXMoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLmNoZWNrZWRzID0gbm9kZXM7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGV0ZWN0Q2hhbmdlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChlbWl0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub2RlQ2hlY2tlZC5lbWl0KHsgb3JpZ2luYWxFdmVudDogbnVsbCwgbm9kZTogbm9kZXMsIG5vZGVzLCBpbnN0YW5jZTogdGhpcyB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWPlua2iOmAieS4reeahOiKgueCuS5cclxuICAgICAqIGlkczog5qCH6K+GSWQg5pWw57uEXHJcbiAgICAgKiBjbG9zZUNhc2NhZGU6IOaJp+ihjOWPlua2iOmSqemAieaXtuaYr+WQpuWFs+mXree6p+iBlOWKn+iDveOAgum7mOiupOS4uiBmYWxzZVxyXG4gICAgICogICAgIOiuvuS4unRydWXml7bvvIzpkqnpgInlsIbnpoHnlKjnuqfogZTnmoTlip/og73vvIzku4XlpITnkIblvZPliY3oioLngrnnmoTpgInkuK3nirbmgIHjgILmiafooYzlrozmr5XlkI7vvIzmgaLlpI3ljp/lhYjnmoTnuqfogZTpgInpobnjgIJcclxuICAgICAqIGVtaXQ6IOaYr+WQpuinpuWPkeWPlua2iOWLvumAieS6i+S7tuOAgum7mOiupOS4uiB0cnVlXHJcbiAgICAgKi9cclxuICAgIHVuQ2hlY2tlZE5vZGVzKGlkczogc3RyaW5nW10sIGNsb3NlQ2FzY2FkZT86IGJvb2xlYW4sIGVtaXQgPSB0cnVlKSB7XHJcblxyXG4gICAgICAgIGlmIChpZHMgJiYgaWRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBjb25zdCBfY2FzY2FkZSA9IHRoaXMuY2FzY2FkZUNoZWNrO1xyXG4gICAgICAgICAgICBpZiAoY2xvc2VDYXNjYWRlICYmIF9jYXNjYWRlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhc2NhZGVDaGVjayA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBub2RlcyA9IHRoaXMuX2NoZWNrZWROb2RlcyhpZHMsIGZhbHNlKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChjbG9zZUNhc2NhZGUgJiYgX2Nhc2NhZGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FzY2FkZUNoZWNrID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgIC8vIHRoaXMuY2hlY2tlZHMgPSBub2RlcztcclxuICAgICAgICAgICAgaWYgKGVtaXQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubm9kZVVuQ2hlY2tlZC5lbWl0KHsgb3JpZ2luYWxFdmVudDogbnVsbCwgbm9kZTogbm9kZXMsIG5vZGVzLCBpbnN0YW5jZTogdGhpcyB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xlYXJDaGVja2VkcygpO1xyXG4gICAgICAgICAgICB0aGlzLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZmluZFJvd05vZGUoaWQ6IHN0cmluZyk6IFJvd05vZGUge1xyXG4gICAgICAgIGlmIChpZCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5yb3dOb2Rlcykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUucm93Tm9kZXMuZmluZChuID0+IG4uaWQgPT09IGlkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxuXHJcbiAgICAvKiog5bCG5ZyoIHYwLjIueCDlup/lvIPvvJvor7fkvb/nlKggZmluZFJvd05vZGUg5pa55rOVICovXHJcbiAgICBmaW5kTm9kZShpZDogc3RyaW5nKTogUm93Tm9kZSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZmluZFJvd05vZGUoaWQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5qC55o2u5b2T5YmN6IqC54K5SUTvvIzojrflj5bpobbnuqfniLboioLngrlcclxuICAgICAqIEBwYXJhbSBpZCDlvZPliY3oioLngrlJRFxyXG4gICAgICogQHJldHVybnMg6L+U5Zue6aG257qn6IqC54K5XHJcbiAgICAgKi9cclxuICAgIGdldFJvb3QoaWQ6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IHJvd05vZGUgPSB0aGlzLmZpbmRSb3dOb2RlKGlkKTtcclxuICAgICAgICBpZiAocm93Tm9kZSkge1xyXG4gICAgICAgICAgICBpZiAocm93Tm9kZS5wYXJlbnRzICYmIHJvd05vZGUucGFyZW50cy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbmRSb3dOb2RlKHJvd05vZGUucGFyZW50c1swXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJvd05vZGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBmaW5kUm93Tm9kZXMoaWRzOiBzdHJpbmdbXSk6IFJvd05vZGVbXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUucm93Tm9kZXMuZmlsdGVyKHJuID0+IGlkcy5pbmRleE9mKHJuLmlkKSA+IC0xKTtcclxuICAgIH1cclxuXHJcbiAgICBjaGVja0FsbE5vZGVzKGFyZ3M/OiBhbnkpIHtcclxuICAgICAgICBsZXQgcm93Tm9kZXMgPSB0aGlzLmdldEN1cnJlbnRBbGxSb3dOb2RlcygpO1xyXG4gICAgICAgIHJvd05vZGVzID0gcm93Tm9kZXMuZmlsdGVyKG4gPT4gKG4ubm9kZS5zZWxlY3RhYmxlIHx8IG4ubm9kZS5zZWxlY3RhYmxlID09PSB1bmRlZmluZWQpKTtcclxuXHJcbiAgICAgICAgdGhpcy5jaGVja2VkcyA9IHJvd05vZGVzLm1hcChuID0+IHtcclxuICAgICAgICAgICAgbi5pbmRldGVybWluYXRlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMudHRTZXJ2aWNlLm9uQ2hhbmdlQ2hlY2tib3hTdGF0dXMobik7XHJcbiAgICAgICAgICAgIGlmIChuLm5vZGUuc2VsZWN0YWJsZSB8fCBuLm5vZGUuc2VsZWN0YWJsZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBuLmlzQ2hlY2tlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG4ubm9kZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0T25DaGVjayAmJiAhdGhpcy5vbmx5U2VsZWN0U2VsZikge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvbnMgPSByb3dOb2Rlcy5tYXAobiA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAobi5ub2RlLnNlbGVjdGFibGUgfHwgbi5ub2RlLnNlbGVjdGFibGUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG4uaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbi5ub2RlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLnNlYXJjaGVkKSB7XHJcbiAgICAgICAgICAgIHJvd05vZGVzLmZvckVhY2gocm4gPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgcm93ID0gdGhpcy5zdGF0ZS5yb3dOb2Rlcy5maW5kKG4gPT4gbi5pZCA9PT0gcm4uaWQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJvdykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJvdy5pc1NlbGVjdGVkID0gcm4uaXNTZWxlY3RlZDtcclxuICAgICAgICAgICAgICAgICAgICByb3cuaXNDaGVja2VkID0gcm4uaXNDaGVja2VkO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuY2hlY2tBbGwuZW1pdChhcmdzKTtcclxuXHJcbiAgICAgICAgdGhpcy51cGRhdGVBbGxDaGVja2JveFN0YXR1cygpO1xyXG4gICAgICAgIHRoaXMuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIHVuQ2hlY2tBbGxOb2RlcyhhcmdzPzogYW55KSB7XHJcbiAgICAgICAgdGhpcy5jbGVhckFsbCgpO1xyXG4gICAgICAgIHRoaXMudW5DaGVja0FsbC5lbWl0KGFyZ3MpO1xyXG4gICAgICAgIHRoaXMuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaXNFbmFibGVNdWx0aVNlbGVjdCgpIHtcclxuICAgICAgICBpZiAodGhpcy5zaW5nbGVTZWxlY3QpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLnNob3dDaGVja2JveCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDku47mlbDmja7kuK3ojrflj5boioLngrnlm77moIdcclxuICAgIC8vIGljb25GaWVsZCDkuLogb2JqZWN0XHJcbiAgICAvLyAgICAgIOWmguaenCDlsZXlvIDlm77moIfkuLrnqbrvvIzmipjlj6Dlm77moIfkuI3kuLrnqbrvvIzmiJblj43kuYvvvIzliJnlsZXlvIDkuI7mipjlj6Dlm77moIfkv53mjIHkuIDoh7PvvJtcclxuICAgIC8vICAgICAg5aaC5p6cIOWPtuWtkOWbvuagh+S4uuepuu+8jOWImeS9v+eUqOe7hOS7tum7mOiupOeahOWbvuagh1xyXG4gICAgLy8gaWNvbkZpZWxkIOS4uiDlrZfnrKbkuLLvvJog5YiZ5Y+25a2QIOWxleW8gCDmipjlj6Ag5Zu+5qCH5L2/55So5ZCM5LiA5Liq44CCIOWmguaenOS4uuepuu+8jCDliJnkvb/nlKjnu4Tku7bpu5jorqTlm77moIdcclxuICAgIHByaXZhdGUgZ2V0Tm9kZUljb25Gcm9tRGF0YSh0bjogVHJlZU5vZGUpIHtcclxuICAgICAgICBsZXQgbGVhZiA9IG51bGw7XHJcbiAgICAgICAgbGV0IGV4cGFuZCA9IG51bGw7XHJcbiAgICAgICAgbGV0IGNvbGxhcHNlID0gbnVsbDtcclxuICAgICAgICBpZiAodGhpcy51c2VJY29uRnJvbURhdGEpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaWNvbkZpZWxkKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgX2ljb25GaWVsZCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmljb25GaWVsZCA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICBfaWNvbkZpZWxkID0gdGhpcy5pY29uRmllbGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRuW19pY29uRmllbGRdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlYWYgPSB0bltfaWNvbkZpZWxkXTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZWFmID0gdGhpcy51dGlscy5nZXRWYWx1ZShfaWNvbkZpZWxkLCB0bi5kYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGV4cGFuZCA9IGNvbGxhcHNlID0gbGVhZjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaWNvbkZpZWxkLmxlYWYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGVhZiA9IHRoaXMudXRpbHMuZ2V0VmFsdWUodGhpcy5pY29uRmllbGQubGVhZiwgdG4uZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmljb25GaWVsZC5leHBhbmQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwYW5kID0gdGhpcy51dGlscy5nZXRWYWx1ZSh0aGlzLmljb25GaWVsZC5leHBhbmQsIHRuLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pY29uRmllbGQuY29sbGFwc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sbGFwc2UgPSB0aGlzLnV0aWxzLmdldFZhbHVlKHRoaXMuaWNvbkZpZWxkLmNvbGxhcHNlLCB0bi5kYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChleHBhbmQgJiYgIWNvbGxhcHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxhcHNlID0gZXhwYW5kO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFleHBhbmQgJiYgY29sbGFwc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwYW5kID0gY29sbGFwc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbGVhZiwgZXhwYW5kLCBjb2xsYXBzZVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VHJlZUljb24odHJlZU5vZGU6IFRyZWVOb2RlKSB7XHJcbiAgICAgICAgY29uc3QgdG4gPSB0cmVlTm9kZTtcclxuICAgICAgICBsZXQgbGVhZkljb24gPSB0aGlzLmxlYWZJY29uIHx8ICdmaWxlJztcclxuICAgICAgICBsZXQgZXhwYW5kSWNvbiA9IHRoaXMuZXhwYW5kSWNvbiB8fCAnZm9sZGVyLW9wZW4nO1xyXG4gICAgICAgIGxldCBjb2xsYXBzZUljb24gPSB0aGlzLmNvbGxhcHNlSWNvbiB8fCAnZm9sZGVyJztcclxuICAgICAgICBjb25zdCBsb2FkaW5nID0gJ2YtbG9hZGluZy1yb3VuZCc7XHJcblxyXG4gICAgICAgIGlmICh0blsnc2hvd0xvYWRpbmcnXSkge1xyXG4gICAgICAgICAgICByZXR1cm4geyBbbG9hZGluZ106IHRydWUgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0bi5pY29uKSB7XHJcbiAgICAgICAgICAgIGxlYWZJY29uID0gdG4uaWNvbjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0bi5leHBhbmRlZEljb24pIHtcclxuICAgICAgICAgICAgZXhwYW5kSWNvbiA9IHRuLmV4cGFuZGVkSWNvbjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0bi5jb2xsYXBzZWRJY29uKSB7XHJcbiAgICAgICAgICAgIGNvbGxhcHNlSWNvbiA9IHRuLmNvbGxhcHNlZEljb247XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy51c2VJY29uRnJvbURhdGEpIHtcclxuICAgICAgICAgICAgY29uc3QgeyBsZWFmLCBleHBhbmQsIGNvbGxhcHNlIH0gPSB0aGlzLmdldE5vZGVJY29uRnJvbURhdGEodHJlZU5vZGUpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy53aGVuRGF0YUljb25FbXB0eVVzZURlZmF1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChsZWFmKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGVhZkljb24gPSBsZWFmO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGV4cGFuZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGV4cGFuZEljb24gPSBleHBhbmQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoY29sbGFwc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb2xsYXBzZUljb24gPSBjb2xsYXBzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGxlYWZJY29uID0gbGVhZiB8fCAnJztcclxuICAgICAgICAgICAgICAgIGV4cGFuZEljb24gPSBleHBhbmQgfHwgJyc7XHJcbiAgICAgICAgICAgICAgICBjb2xsYXBzZUljb24gPSBjb2xsYXBzZSB8fCAnJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIGNvbnN0IGNvbGxhcHNlZEV4cHJlc3Npb24gPSAoIXRuLmxlYWYgfHwgISEodG4uY2hpbGRyZW4gJiYgdG4uY2hpbGRyZW4ubGVuZ3RoKSkgJiYgIXRuLmV4cGFuZGVkO1xyXG4gICAgICAgIGNvbnN0IGV4cGFuZGVkRXhwcmVzc2lvbiA9ICEhdG4uZXhwYW5kZWQ7XHJcbiAgICAgICAgY29uc3QgbGVhZkV4cHJlc3Npb24gPSB0bi5sZWFmID09PSB1bmRlZmluZWQgPyAoIXRuLmNoaWxkcmVuIHx8ICF0bi5jaGlsZHJlbi5sZW5ndGgpIDogdG4ubGVhZjtcclxuXHJcbiAgICAgICAgY29uc3QgaWNvbnMgPSB7fTtcclxuXHJcbiAgICAgICAgaWYgKGxlYWZFeHByZXNzaW9uICYmIGxlYWZJY29uKSB7XHJcbiAgICAgICAgICAgIGljb25zW2xlYWZJY29uXSA9IGxlYWZFeHByZXNzaW9uO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0bi5leHBhbmRlZCAmJiBleHBhbmRJY29uKSB7XHJcbiAgICAgICAgICAgICAgICBpY29uc1tleHBhbmRJY29uXSA9IGV4cGFuZGVkRXhwcmVzc2lvbjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChjb2xsYXBzZUljb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBpY29uc1tjb2xsYXBzZUljb25dID0gY29sbGFwc2VkRXhwcmVzc2lvbjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaWNvbkNscykge1xyXG4gICAgICAgICAgICBpY29uc1t0aGlzLmljb25DbHNdID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBpY29ucztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNvbXBhcmUoYSwgYikge1xyXG4gICAgICAgIGlmICh0eXBlb2YgYSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGEubG9jYWxlQ29tcGFyZShiKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gYSA9PT0gYiA/IDAgOiAoYSA+IGIgPyAxIDogLTEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgX3NvcnQocjEsIHIyKSB7XHJcbiAgICAgICAgbGV0IHIgPSAwO1xyXG4gICAgICAgIGNvbnN0IHNvcnRGaWVsZHMgPSB0aGlzLnNvcnROYW1lLnNwbGl0KCcsJyk7XHJcbiAgICAgICAgY29uc3Qgb3JkZXJzID0gdGhpcy5zb3J0T3JkZXIuc3BsaXQoJywnKTtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLnNvcnROYW1lKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzb3J0RmllbGRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNuID0gc29ydEZpZWxkc1tpXTtcclxuICAgICAgICAgICAgY29uc3Qgc28gPSBvcmRlcnNbaV07XHJcblxyXG4gICAgICAgICAgICBjb25zdCBjb2wgPSB0aGlzLmNvbHVtbnMuZmluZChjID0+IGMuZmllbGQgPT09IHNuKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG9yZGVyYnkgPSBjb2wuc29ydGVyIHx8IHRoaXMuY29tcGFyZTtcclxuICAgICAgICAgICAgbGV0IHYxID0gdGhpcy51dGlscy5nZXRWYWx1ZShzbiwgcjEuZGF0YSk7XHJcbiAgICAgICAgICAgIGlmICh2MSA9PT0gbnVsbCB8fCB2MSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICB2MSA9ICcnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxldCB2MiA9IHRoaXMudXRpbHMuZ2V0VmFsdWUoc24sIHIyLmRhdGEpO1xyXG4gICAgICAgICAgICBpZiAodjIgPT09IG51bGwgfHwgdjIgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgdjIgPSAnJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByID0gb3JkZXJieSh2MSwgdjIpO1xyXG4gICAgICAgICAgICBpZiAociAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHIgKiAoc28gPT09ICdhc2MnID8gMSA6IC0xKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcjtcclxuICAgIH1cclxuXHJcbiAgICBjbGllbnRTb3J0KCkge1xyXG4gICAgICAgIGNvbnN0IHNvcnRlZERhdGEgPSB0aGlzLmRhdGEuc29ydCh0aGlzLl9zb3J0LmJpbmQodGhpcykpO1xyXG5cclxuICAgICAgICBjb25zdCBzb3J0Q2hpbGROb2RlcyA9IChjaGlsZE5vZGVzKSA9PiB7XHJcbiAgICAgICAgICAgIGNoaWxkTm9kZXMgPSBjaGlsZE5vZGVzLnNvcnQodGhpcy5fc29ydC5iaW5kKHRoaXMpKTtcclxuICAgICAgICAgICAgY2hpbGROb2Rlcy5mb3JFYWNoKG4gPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKG4uY2hpbGRyZW4gJiYgbi5jaGlsZHJlbi5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBuLmNoaWxkcmVuID0gbi5jaGlsZHJlbi5zb3J0KHRoaXMuX3NvcnQuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc29ydENoaWxkTm9kZXMobi5jaGlsZHJlbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gY2hpbGROb2RlcztcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBzb3J0ZWREYXRhLmZvckVhY2goYyA9PiB7XHJcbiAgICAgICAgICAgIGMuY2hpbGRyZW4gPSBzb3J0Q2hpbGROb2RlcyhjLmNoaWxkcmVuKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5sb2FkRGF0YShzb3J0ZWREYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICBvblNvcnRDb2x1bW5DbGljaygkZXZlbnQsIGNvbCkge1xyXG4gICAgICAgIGlmICghY29sLnNvcnRhYmxlKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qgc29ydE5hbWUgPSB0aGlzLnNvcnROYW1lO1xyXG4gICAgICAgIGNvbnN0IHNvcnRPcmRlciA9IHRoaXMuc29ydE9yZGVyO1xyXG4gICAgICAgIGxldCBzb3J0RmllbGRzID0gW107XHJcbiAgICAgICAgbGV0IHNvcnRPcmRlcnMgPSBbXTtcclxuICAgICAgICBpZiAoc29ydE5hbWUpIHtcclxuICAgICAgICAgICAgc29ydEZpZWxkcyA9IHNvcnROYW1lLnNwbGl0KCcsJyk7XHJcbiAgICAgICAgICAgIHNvcnRPcmRlcnMgPSBzb3J0T3JkZXIuc3BsaXQoJywnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGNvbE9yZGVyID0gY29sLm9yZGVyIHx8ICdhc2MnO1xyXG4gICAgICAgIGxldCBuZXdPcmRlciA9IGNvbE9yZGVyO1xyXG4gICAgICAgIGNvbnN0IGkgPSBzb3J0RmllbGRzLmZpbmRJbmRleChuID0+IG4gPT09IGNvbC5maWVsZCk7XHJcbiAgICAgICAgaWYgKGkgPj0gMCkge1xyXG4gICAgICAgICAgICBjb25zdCBfb3JkZXIgPSBzb3J0T3JkZXJzW2ldID09PSAnYXNjJyA/ICdkZXNjJyA6ICdhc2MnO1xyXG4gICAgICAgICAgICBuZXdPcmRlciA9IF9vcmRlcjtcclxuICAgICAgICAgICAgLy8gaWYgKHRoaXMubXVsdGlTb3J0ICYmIG5ld09yZGVyID09PSAnYXNjJykge1xyXG4gICAgICAgICAgICBpZiAobmV3T3JkZXIgPT09ICdhc2MnKSB7XHJcbiAgICAgICAgICAgICAgICBuZXdPcmRlciA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIHNvcnRGaWVsZHMuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgICAgICAgICAgc29ydE9yZGVycy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzb3J0T3JkZXJzW2ldID0gX29yZGVyO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm11bHRpU29ydCkge1xyXG4gICAgICAgICAgICAgICAgc29ydEZpZWxkcy5wdXNoKGNvbC5maWVsZCk7XHJcbiAgICAgICAgICAgICAgICBzb3J0T3JkZXJzLnB1c2goY29sT3JkZXIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgc29ydEZpZWxkcyA9IFtjb2wuZmllbGRdO1xyXG4gICAgICAgICAgICAgICAgc29ydE9yZGVycyA9IFtjb2xPcmRlcl07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbC5vcmRlciA9IG5ld09yZGVyO1xyXG5cclxuICAgICAgICB0aGlzLnNvcnROYW1lID0gc29ydEZpZWxkcy5qb2luKCcsJyk7XHJcbiAgICAgICAgdGhpcy5zb3J0T3JkZXIgPSBzb3J0T3JkZXJzLmpvaW4oJywnKTtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLm11bHRpU29ydCkge1xyXG5cclxuICAgICAgICAgICAgY29uc3QgdXBkYXRlRmllbGRPcmRlciA9IChjb2xzOiBUcmVlVGFibGVDb2x1bW5bXSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFjb2xzIHx8ICFjb2xzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbHMuZm9yRWFjaChjID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjLm9yZGVyID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGsgPSBzb3J0RmllbGRzLmZpbmRJbmRleChmID0+IGYgPT09IGMuZmllbGQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChrID49IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYy5vcmRlciA9IHNvcnRPcmRlcnNba107XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB1cGRhdGVGaWVsZE9yZGVyKHRoaXMuY29sdW1ucyk7XHJcbiAgICAgICAgICAgIHRoaXMuY2RSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5iZWZvcmVTb3J0Q29sdW1uKHRoaXMuc29ydE5hbWUsIHRoaXMuc29ydE9yZGVyKS5zdWJzY3JpYmUoKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5yZW1vdGVTb3J0KSB7XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbGllbnRTb3J0KCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuY29sdW1uU29ydGVkLmVtaXQoeyBzb3J0TmFtZTogdGhpcy5zb3J0TmFtZSwgc29ydE9yZGVyOiB0aGlzLnNvcnRPcmRlciB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKiog5p+l6K+i5bel5YW35p2h5YmN56uv5a2X56ym5p+l6K+iICovXHJcbiAgICBmaW5kS2V5V29yZHMoJGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3Qgc2VhcmNoVmFsdWUgPSAkZXZlbnQudmFsdWU7XHJcbiAgICAgICAgY29uc3QgZmllbGQgPSAkZXZlbnQuZmllbGQ7XHJcbiAgICAgICAgdGhpcy5maW5kRmllbGQgPSBmaWVsZDtcclxuICAgICAgICBpZiAoc2VhcmNoVmFsdWUgJiYgc2VhcmNoVmFsdWUubGVuZ3RoID49IDIpIHtcclxuICAgICAgICAgICAgdGhpcy5maW5kVmFsdWUgPSBzZWFyY2hWYWx1ZTtcclxuXHJcbiAgICAgICAgICAgIGlmICghZmllbGQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMud3JpdGVDb25zb2xlKCdQbGVhc2Ugc2V0IGEgZmllbGQgZm9yIHRoZSBGaW5kRmllbGQgcHJvcGVydHkuJywgJ3dhcm4nKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5zZWFyY2hIYW5kbGUuc2VhcmNoT25DbGllbnQoZmllbGQsIHNlYXJjaFZhbHVlLCB0aGlzLnN0YXRlLnJvd05vZGVzKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChyZXN1bHQgJiYgcmVzdWx0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5maW5kUmVzdWx0ID0gcmVzdWx0LnNvcnQoKGEsIGIpID0+IGEuaW5kZXggPT09IGIuaW5kZXggPyAwIDogKGEuaW5kZXggPiBiLmluZGV4ID8gMSA6IC0xKSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpbmRDb3VudCA9IHJlc3VsdC5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpbmRDdXJyZW50ID0gMTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2Nyb2xsVG9Ob2RlKHJlc3VsdFswXS5pZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5oaWdoTGlnaHRLZXl3b3JkcygpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5maW5kUmVzdWx0ID0gW107XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpbmRDdXJyZW50ID0gMDtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmluZENvdW50ID0gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzZXRGaW5kVGV4dCgpO1xyXG4gICAgICAgICAgICB0aGlzLmNkUmVmLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIG5leHRGaW5kVmFsdWUoc3RlcCkge1xyXG4gICAgICAgIGlmICghdGhpcy5maW5kUmVzdWx0IHx8ICF0aGlzLmZpbmRSZXN1bHQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgYWxsSGlnaExpZ2h0cyA9IEFycmF5LmZyb20odGhpcy5lbC5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZWFyY2gtaGlnaGxpZ2h0JykpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5maW5kQ3VycmVudCA9PT0gdGhpcy5maW5kUmVzdWx0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLmZpbmRDdXJyZW50ID0gMTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoc3RlcCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5maW5kQ3VycmVudCA9IHRoaXMuZmluZEN1cnJlbnQgKyBzdGVwO1xyXG4gICAgICAgICAgICAgICAgaWYgKHN0ZXAgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZmluZEN1cnJlbnQgPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbmRDdXJyZW50ID0gMTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpbmRDdXJyZW50Kys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGFjdGl2ZSA9IHRoaXMuZWwubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuc2VhcmNoLWhpZ2hsaWdodC5hY3RpdmUnKTtcclxuXHJcbiAgICAgICAgaWYgKGFjdGl2ZSkge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZUNsYXNzKGFjdGl2ZSwgJ2FjdGl2ZScpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgX2luZGV4ID0gdGhpcy5maW5kQ3VycmVudCAtIDE7XHJcbiAgICAgICAgY29uc3QgbmV4dFJvdyA9IHRoaXMuZmluZFJlc3VsdFtfaW5kZXhdO1xyXG4gICAgICAgIGlmIChuZXh0Um93KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Njcm9sbFRvTm9kZShuZXh0Um93LmlkKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnZpcnR1YWxpemVkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXNbJ0hJR0hfTElHSFRfVElNRVInXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpc1snSElHSF9MSUdIVF9USU1FUiddKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpc1snSElHSF9MSUdIVF9USU1FUiddID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRySWQgPSAncm93bm9kZS0nICsgbmV4dFJvdy5pZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdHIgPSB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcignIycgKyB0cklkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBoaWdoTGlnaHREb20gPSB0ci5xdWVyeVNlbGVjdG9yKCcuc2VhcmNoLWhpZ2hsaWdodCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhpZ2hMaWdodERvbSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3MoaGlnaExpZ2h0RG9tLCAnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9LCAxMDApO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYWxsSGlnaExpZ2h0c1tfaW5kZXhdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyhhbGxIaWdoTGlnaHRzW19pbmRleF0sICdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIOafpeivouW3peWFt+adoeWJjeerr+Wtl+espuafpeivoiAqL1xyXG4gICAgLypcclxuICAgIGZpbmRLZXlXb3JkcygkZXZlbnQpIHtcclxuICAgICAgICBjb25zdCBzZWFyY2hWYWx1ZSA9ICRldmVudC52YWx1ZTtcclxuICAgICAgICBjb25zdCBmaWVsZCA9ICRldmVudC5maWVsZDtcclxuICAgICAgICB0aGlzLmZpbmRGaWVsZCA9IGZpZWxkO1xyXG4gICAgICAgIGlmIChzZWFyY2hWYWx1ZSAmJiBzZWFyY2hWYWx1ZS5sZW5ndGggPj0gMikge1xyXG4gICAgICAgICAgICB0aGlzLmZpbmRWYWx1ZSA9IHNlYXJjaFZhbHVlO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFmaWVsZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy53cml0ZUNvbnNvbGUoJ1BsZWFzZSBzZXQgYSBmaWVsZCBmb3IgdGhlIEZpbmRGaWVsZCBwcm9wZXJ0eS4nLCAnd2FybicpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnNlYXJjaEhhbmRsZS5zZWFyY2hPbkNsaWVudChmaWVsZCwgc2VhcmNoVmFsdWUsIHRoaXMuc3RhdGUucm93Tm9kZXMpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHJlc3VsdCAmJiByZXN1bHQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpbmRSZXN1bHQgPSByZXN1bHQuc29ydCgoYSwgYikgPT4gYS5pbmRleCA9PT0gYi5pbmRleCA/IDAgOiAoYS5pbmRleCA+IGIuaW5kZXggPyAxIDogLTEpKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZpcnN0Um93SW5kZXggPSByZXN1bHRbMF0uaW5kZXg7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5maW5kQ291bnQgPSByZXN1bHQubGVuZ3RoO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHBhcmVudHMgPSB0aGlzLnNlYXJjaEhhbmRsZS5maW5kUGFyZW50cyhyZXN1bHQsIHRoaXMuc3RhdGUucm93Tm9kZXMpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuZmluZEN1cnJlbnQgPSAxO1xyXG4gICAgICAgICAgICAgICAgWy4uLnBhcmVudHMsIC4uLnJlc3VsdF0uZm9yRWFjaCgocjogUm93Tm9kZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kTm9kZShyLmlkKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCB5ID0gMDtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUucm93Tm9kZXMuZm9yRWFjaCgocm93OiBSb3dOb2RlLCBpbmRleDogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJvdy52aXNpYmxlICYmIGZpcnN0Um93SW5kZXggPiBpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB5ICs9IHRoaXMucm93SGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucHNSZWYgJiYgdGhpcy5wc1JlZi5kaXJlY3RpdmVSZWYpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBzUmVmLmRpcmVjdGl2ZVJlZi5zY3JvbGxUb1koeSAtIDMwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmhpZ2hMaWdodEtleXdvcmRzKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpbmRSZXN1bHQgPSBbXTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmluZEN1cnJlbnQgPSAwO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5maW5kQ291bnQgPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5yZXNldEZpbmRUZXh0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2RSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBuZXh0RmluZFZhbHVlKHN0ZXApIHtcclxuICAgICAgICBpZiAoIXRoaXMuZmluZFJlc3VsdCB8fCAhdGhpcy5maW5kUmVzdWx0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGFsbEhpZ2hMaWdodHMgPSBBcnJheS5mcm9tKHRoaXMuZWwubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2VhcmNoLWhpZ2hsaWdodCcpKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZmluZEN1cnJlbnQgPT09IHRoaXMuZmluZFJlc3VsdC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5maW5kQ3VycmVudCA9IDE7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHN0ZXApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmluZEN1cnJlbnQgPSB0aGlzLmZpbmRDdXJyZW50ICsgc3RlcDtcclxuICAgICAgICAgICAgICAgIGlmIChzdGVwID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZpbmRDdXJyZW50IDw9IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5maW5kQ3VycmVudCA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5maW5kQ3VycmVudCsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBhY3RpdmUgPSB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcignLnNlYXJjaC1oaWdobGlnaHQuYWN0aXZlJyk7XHJcblxyXG4gICAgICAgIGxldCBfaW5kZXggPSBhbGxIaWdoTGlnaHRzLmluZGV4T2YoYWN0aXZlKTtcclxuXHJcbiAgICAgICAgaWYgKGFjdGl2ZSkge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZUNsYXNzKGFjdGl2ZSwgJ2FjdGl2ZScpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMudmlydHVhbGl6ZWQpIHtcclxuXHJcbiAgICAgICAgICAgIF9pbmRleCArPSAhc3RlcCA/IDEgOiBzdGVwO1xyXG5cclxuICAgICAgICAgICAgaWYgKGFsbEhpZ2hMaWdodHNbX2luZGV4XSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyhhbGxIaWdoTGlnaHRzW19pbmRleF0sICdhY3RpdmUnKTtcclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyDlhYjmu5rliqjmjIflrprkvY3nva5cclxuICAgICAgICAgICAgICAgIGNvbnN0IG5leHRSb3cgPSB0aGlzLmZpbmRSZXN1bHRbdGhpcy5maW5kQ3VycmVudCAtIDFdO1xyXG4gICAgICAgICAgICAgICAgbGV0IHkgPSAwO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5yb3dOb2Rlcy5mb3JFYWNoKChyb3c6IFJvd05vZGUsIGluZGV4OiBudW1iZXIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocm93LnZpc2libGUgJiYgbmV4dFJvdy5pbmRleCA+IGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHkgKz0gdGhpcy5yb3dIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucHNSZWYgJiYgdGhpcy5wc1JlZi5kaXJlY3RpdmVSZWYpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBzUmVmLmRpcmVjdGl2ZVJlZi5zY3JvbGxUb1koeSAtIDMwLCAyMDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBrZXlXb3JkcyA9IHRoaXMuZWwubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2VhcmNoLWhpZ2hsaWdodCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKGtleVdvcmRzWzBdLCAnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgMTAwKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgY3VycmVudEVsOiBhbnkgPSBhbGxIaWdoTGlnaHRzW3RoaXMuZmluZEN1cnJlbnQgLSAxXTtcclxuICAgICAgICAgICAgaWYgKGN1cnJlbnRFbCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyhjdXJyZW50RWwsICdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBzUmVmICYmIHRoaXMucHNSZWYuZGlyZWN0aXZlUmVmKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc1RvcCA9IGN1cnJlbnRFbC5jbG9zZXN0KCd0ZCcpLm9mZnNldFRvcCAtIDMwO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHNSZWYuZGlyZWN0aXZlUmVmLnNjcm9sbFRvWShzVG9wLCAyMDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgdGhpcy5jZFJlZi5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICB9XHJcbiovXHJcbiAgICBjbG9zZUZpbmRQYW5lbCgpIHtcclxuICAgICAgICB0aGlzLnNob3dGaW5kSW5wdXQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnJlc2V0RmluZFRleHQoKTtcclxuICAgICAgICB0aGlzLmNkUmVmLmRldGVjdENoYW5nZXMoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGhpZ2hMaWdodEtleXdvcmRzKCkge1xyXG4gICAgICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNkUmVmLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGFsbEhpZ2hMaWdodHMgPSB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNlYXJjaC1oaWdobGlnaHQnKTtcclxuICAgICAgICAgICAgICAgIGlmICghYWxsSGlnaExpZ2h0cy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKGFsbEhpZ2hMaWdodHNbMF0sICdhY3RpdmUnKTtcclxuICAgICAgICAgICAgfSwgMTAwKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlc2V0RmluZFRleHQoKSB7XHJcbiAgICAgICAgdGhpcy5maW5kVmFsdWUgPSAnJztcclxuICAgICAgICB0aGlzLmZpbmRDdXJyZW50ID0gMDtcclxuICAgICAgICB0aGlzLmZpbmRDb3VudCA9IDA7XHJcbiAgICAgICAgdGhpcy5maW5kUmVzdWx0ID0gW107XHJcbiAgICB9XHJcblxyXG4gIFxyXG5cclxuICAgIHNjcm9sbFRvWSh5OiBudW1iZXIsIGFuaW1hdGlvbnMgPSAyMDApIHtcclxuICAgICAgICB0aGlzLnN0YXRlLnNjcm9sbFkgPSB5IHx8IDA7XHJcbiAgICAgICAgdGhpcy5wc1JlZi5kaXJlY3RpdmVSZWYuc2Nyb2xsVG9ZKHksIGFuaW1hdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2hvd09ySGlkZUNvbHVtbihmaWVsZDogc3RyaW5nIHwgc3RyaW5nW10sIGlzSGlkZTogYm9vbGVhbikge1xyXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGZpZWxkKSkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbHVtbnMuZm9yRWFjaChuID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChmaWVsZC5pbmRleE9mKG4uZmllbGQpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICBuLnZpc2libGUgPSAhaXNIaWRlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmNvbHVtbnMuZm9yRWFjaChuID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChmaWVsZCA9PT0gbi5maWVsZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG4udmlzaWJsZSA9ICFpc0hpZGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jb2x1bW5zQ2hhbmdlZCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHNob3dDb2x1bW4oZmllbGQ6IHN0cmluZyB8IHN0cmluZ1tdKSB7XHJcbiAgICAgICAgdGhpcy5zaG93T3JIaWRlQ29sdW1uKGZpZWxkLCBmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgaGlkZUNvbHVtbihmaWVsZDogc3RyaW5nIHwgc3RyaW5nW10pIHtcclxuICAgICAgICB0aGlzLnNob3dPckhpZGVDb2x1bW4oZmllbGQsIHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHNob3dDaGlsZHNMb2FkaW5nKHBhcmVudE5vZGU6IFRyZWVOb2RlKSB7XHJcbiAgICAgICAgY29uc3QgY29sc3BhbiA9IHRoaXMuY29sdW1ucy5maWx0ZXIobiA9PiBuLnZpc2libGUgIT09IGZhbHNlKS5sZW5ndGg7XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IHsgW3RoaXMuaWRGaWVsZF06ICfmraPlnKjliqDovb3kuK0uLi4uJywgX19jb2xzcGFuX186IGNvbHNwYW4gfTtcclxuICAgICAgICB0aGlzLmxvYWRDaGlsZHJlbihbeyBkYXRhLCBfX2NoaWxkc19sb2FkaW5nX186IHRydWUgfV0sIHBhcmVudE5vZGUsIGZhbHNlKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNoaWxkc1BhZ2VDaGFuZ2VkKCRldmVudCkge1xyXG4gICAgICAgIHRoaXMuY2hpbGRzUGFnZUNoYW5nZWQuZW1pdCgkZXZlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdHJJZDJEYXRhSWQodHIpIHtcclxuICAgICAgICByZXR1cm4gdHIuaWQucmVwbGFjZSgncm93bm9kZS0nLCAnJyk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vIOW/q+aNt+mUrlxyXG4gICAgb25LZXlkb3duRXZlbnQoJGV2ZW50KSB7XHJcbiAgICAgICAgaWYgKCEkZXZlbnQgfHwgIXRoaXMuc2luZ2xlU2VsZWN0IHx8ICF0aGlzLmRhdGEgfHwgIXRoaXMuZGF0YS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qga2V5cyA9IFsnQXJyb3dVcCcsICdBcnJvd0Rvd24nLCAnQXJyb3dMZWZ0JywgJ0Fycm93UmlnaHQnXTtcclxuXHJcbiAgICAgICAgaWYgKCFrZXlzLmluY2x1ZGVzKCRldmVudC5rZXkpIHx8ICRldmVudC50YXJnZXQubm9kZU5hbWUgPT09ICdJTlBVVCcpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHRoaXMuaW5wdXRHcm91cC50ZXh0Ym94Lm5hdGl2ZUVsZW1lbnQuYmx1cigpO1xyXG4gICAgICAgIGxldCBuZXdJZHg7XHJcbiAgICAgICAgY29uc3QgdHJzID0gQXJyYXkuZnJvbSh0aGlzLmJvZHlUYWJsZS5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RyJykpO1xyXG4gICAgICAgIGNvbnN0IHRyQ291bnQgPSB0cnMubGVuZ3RoO1xyXG4gICAgICAgIGxldCBzZWxlY3RlZFRySW5kZXggPSAtMTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRSb3cpIHtcclxuICAgICAgICAgICAgc2VsZWN0ZWRUckluZGV4ID0gdHJzLmZpbmRJbmRleCgobjogYW55KSA9PiB0aGlzLnRySWQyRGF0YUlkKG4pID09PSB0aGlzLnNlbGVjdGVkUm93LmlkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICgkZXZlbnQuY29kZSA9PT0gJ0Fycm93RG93bicpIHtcclxuICAgICAgICAgICAgbmV3SWR4ID0gc2VsZWN0ZWRUckluZGV4ICsgMTtcclxuICAgICAgICB9IGVsc2UgaWYgKCRldmVudC5jb2RlID09PSAnQXJyb3dVcCcpIHtcclxuICAgICAgICAgICAgaWYgKHNlbGVjdGVkVHJJbmRleCAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIG5ld0lkeCA9IHNlbGVjdGVkVHJJbmRleCAtIDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFJvdyAmJiAoJGV2ZW50LmNvZGUgPT09ICdBcnJvd1JpZ2h0JyB8fCAkZXZlbnQuY29kZSA9PT0gJ0Fycm93TGVmdCcpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZUV4cGFuZCh0aGlzLnNlbGVjdGVkUm93KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKG5ld0lkeCA+PSAwICYmIG5ld0lkeCA8IHRyQ291bnQpIHtcclxuICAgICAgICAgICAgY29uc3QgX3RyID0gdHJzW25ld0lkeF0gYXMgYW55O1xyXG4gICAgICAgICAgICBpZiAoX3RyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpZCA9IHRoaXMudHJJZDJEYXRhSWQoX3RyKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Tm9kZShpZCk7XHJcbiAgICAgICAgICAgICAgICBfdHIuc2Nyb2xsSW50b1ZpZXcoeyBibG9jazogJ25lYXJlc3QnIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uQmVmb3JlU2hvd0NvbnRleHRNZW51ID0gKGU6IGFueSkgPT4ge1xyXG4gICAgICAgIC8vIHJvd18xX2ZpeGVkbGVmdCAgcm93XzEgIHJvd18xX2ZpeGVkcmlnaHRcclxuICAgICAgICBjb25zdCB7IGNvbnRleHRNZW51RG9tLCBldmVudCB9ID0gZTtcclxuXHJcbiAgICAgICAgbGV0IHJvd0lEID0gZXZlbnQudGFyZ2V0LmlkO1xyXG5cclxuICAgICAgICBpZiAoY29udGV4dE1lbnVEb20pIHtcclxuICAgICAgICAgICAgcm93SUQgPSB0aGlzLnRySWQyRGF0YUlkKGNvbnRleHRNZW51RG9tKTtcclxuICAgICAgICAgICAgY29uc3Qgcm93Tm9kZSA9IHRoaXMuZmluZFJvd05vZGUocm93SUQpO1xyXG5cclxuICAgICAgICAgICAgbGV0IGdvJCA9IG9mKHtzaG93OiB0cnVlfSk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmJlZm9yZVNob3dDb250ZXh0TWVudSkge1xyXG4gICAgICAgICAgICAgICAgZ28kID0gdGhpcy5iZWZvcmVTaG93Q29udGV4dE1lbnUoeyBkYXRhOiByb3dOb2RlLCB0cmVlOiB0aGlzIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZ28kLnBpcGUoXHJcbiAgICAgICAgICAgICAgICBzd2l0Y2hNYXAoKHI6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyLnNob3cpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyLm1lbnVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHRNZW51SXRlbXMgPSByLm1lbnVzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZpZXdwb3J0VyA9IGNvbnRleHRNZW51RG9tLmNsb3Nlc3QoJy5mYXJyaXMtdHJlZXRhYmxlJykub2Zmc2V0V2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldFcgPSBjb250ZXh0TWVudURvbS5vZmZzZXRXaWR0aDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZvY3VzVGFyZ2V0V2lkdGggPSB2aWV3cG9ydFcgPiB0YXJnZXRXID8gdGFyZ2V0VyA6IHZpZXdwb3J0VztcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9mKHsgc2hvdzogdHJ1ZSwgZGF0YTogeyBkYXRhOiByb3dOb2RlLCB0cmVlOiB0aGlzIH0sIGZvY3VzVGFyZ2V0V2lkdGggfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9mKHsgc2hvdzogZmFsc2UgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG9mKHsgc2hvdzogZmFsc2UgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIOagueaNruS8oOWFpeeahOeItue6p0lE77yM6I635Y+W5omA5pyJ5a2Q57qn6IqC54K5ICovXHJcbiAgICBnZXRDaGlsZE5vZGVzKHBhcmVudElkOiBzdHJpbmcpOiBUcmVlTm9kZVtdIHtcclxuICAgICAgICBsZXQgbm9kZXMgPSBbXTtcclxuICAgICAgICBpZiAocGFyZW50SWQpIHtcclxuICAgICAgICAgICAgY29uc3Qgcm93Tm9kZSA9IHRoaXMuZmluZFJvd05vZGUocGFyZW50SWQpO1xyXG4gICAgICAgICAgICBpZiAocm93Tm9kZSAmJiByb3dOb2RlLm5vZGUuY2hpbGRyZW4gJiYgcm93Tm9kZS5ub2RlLmNoaWxkcmVuLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgcm93Tm9kZS5ub2RlLmNoaWxkcmVuLmZvckVhY2goKHRuOiBUcmVlTm9kZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0bi5zZWxlY3RhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVzLnB1c2godG4pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBub2RlcyA9IG5vZGVzLmNvbmNhdCh0aGlzLmdldENoaWxkTm9kZXModG4uaWQpKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbm9kZXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBbXVxyXG4gICAgfVxyXG5cclxuICAgIC8qKiDmoLnmja7kvKDlhaXnmoToioLngrlJRO+8jCDojrflj5bmiYDmnInniLbnuqfoioLngrkgKi9cclxuICAgIGdldFBhcmVudE5vZGVzKGlkOiBzdHJpbmcpOiBSb3dOb2RlW10ge1xyXG4gICAgICAgIGxldCBub2RlcyA9IFtdO1xyXG4gICAgICAgIGlmIChpZCkge1xyXG4gICAgICAgICAgICBjb25zdCByb3dOb2RlID0gdGhpcy5maW5kUm93Tm9kZShpZCk7XHJcbiAgICAgICAgICAgIGlmIChyb3dOb2RlICYmIHJvd05vZGUucGFyZW50cyAmJiByb3dOb2RlLnBhcmVudHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICByb3dOb2RlLnBhcmVudHMuZm9yRWFjaCgobikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJuID0gdGhpcy5maW5kUm93Tm9kZShuKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocm4gJiYgcm4ubm9kZS5zZWxlY3RhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVzLnB1c2gocm4pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBub2RlcztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFtdXHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgICBzZWxlY3RvcjogJ1t0cmVlVGFibGVCb2R5XScsXHJcbiAgICB0ZW1wbGF0ZTogYFxyXG4gICAgICAgIDxuZy10ZW1wbGF0ZSBuZ0ZvciBsZXQtc2VyaWFsaXplZE5vZGUgbGV0LXJvd0luZGV4PVwiaW5kZXhcIiBbbmdGb3JPZl09XCJ0dC5zZXJpYWxpemVkVmFsdWVcIj5cclxuICAgICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cInNlcmlhbGl6ZWROb2RlLnZpc2libGVcIj5cclxuICAgICAgICAgICAgICAgIDxuZy1jb250YWluZXJcclxuICAgICAgICAgICAgICAgICAgICAqbmdUZW1wbGF0ZU91dGxldD1cInRlbXBsYXRlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0OiB7JGltcGxpY2l0OiBzZXJpYWxpemVkTm9kZSwgbm9kZTogc2VyaWFsaXplZE5vZGUubm9kZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcm93RGF0YTogc2VyaWFsaXplZE5vZGUubm9kZS5kYXRhLCByb3dJbmRleDogcm93SW5kZXgsIGNvbHVtbnM6IGNvbHVtbnN9XCI+XHJcbiAgICAgICAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cclxuICAgICAgICAgICAgPC9uZy1jb250YWluZXI+XHJcbiAgICAgICAgPC9uZy10ZW1wbGF0ZT5cclxuICAgIGBcclxufSlcclxuZXhwb3J0IGNsYXNzIFRUQm9keUNvbXBvbmVudCB7XHJcbiAgICAvKipcclxuICAgICAqIOWIl+mbhuWQiFxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBjb2x1bW5zOiBhbnlbXTtcclxuXHJcbiAgICAvKiog6KGo5L2T5qih5p2/ICovXHJcbiAgICBASW5wdXQoKSB0ZW1wbGF0ZTogVGVtcGxhdGVSZWY8YW55PjtcclxuXHJcblxyXG4gICAgY29uc3RydWN0b3IocHVibGljIHR0OiBUcmVlVGFibGVDb21wb25lbnQpIHsgfVxyXG59XHJcblxyXG4vLyBbc3R5bGUubWFyZ2luTGVmdF09XCJyb3dOb2RlLmxldmVsICogMTYgKyAncHgnXCJcclxuXHJcbi8qKlxyXG4gKiDmoJHoioLngrnlsZXlvIDmipjlj6BcclxuICovXHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6ICdmYXJyaXMtdHJlZVRhYmxlVG9nZ2xlcicsXHJcbiAgICB0ZW1wbGF0ZTogYFxyXG4gICAgPGEgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKVwiICN0b2dnbGVyXHJcbiAgICAgICAgICAgIGNsYXNzPVwidHJlZW5vZGUtZm9sZFwiICpuZ0lmPVwic2hvd0xpbmVzXCJcclxuICAgICAgICAgICAgW25nQ2xhc3NdPVwicm93Tm9kZS5ub2RlLmV4cGFuZGVkID8gdHQudW5mb2xkSWNvbiA6IHR0LmZvbGRJY29uXCJcclxuICAgICAgICAgICAgW3N0eWxlLmRpc3BsYXldPVwiaXNTaG93VHJpYW5nbGUgPyAnJyA6ICdub25lJ1wiXHJcbiAgICAgICAgICAgIChjbGljayk9XCJvbkNsaWNrKCRldmVudClcIj48L2E+XHJcblxyXG4gICAgPGEgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKVwiICN0b2dnbGVyXHJcbiAgICAgICAgICAgIGNsYXNzPVwidHJlZW5vZGUtZm9sZFwiICAqbmdJZj1cIiFzaG93TGluZXNcIlxyXG4gICAgICAgICAgICBbbmdDbGFzc109XCJyb3dOb2RlLm5vZGUuZXhwYW5kZWQgPyB0dC51bmZvbGRJY29uIDogdHQuZm9sZEljb25cIlxyXG4gICAgICAgICAgICBbc3R5bGUubWFyZ2luTGVmdC5weF09XCJyb3dOb2RlLmxldmVsICogaW5kZW50U3BhY2luZ1wiXHJcbiAgICAgICAgICAgIFtzdHlsZS52aXNpYmlsaXR5XT1cImlzU2hvd1RyaWFuZ2xlID8gJ3Zpc2libGUnIDogJ2hpZGRlbidcIlxyXG4gICAgICAgICAgICAoY2xpY2spPVwib25DbGljaygkZXZlbnQpXCI+PC9hPlxyXG4gICAgPHNwYW4gY2xhc3M9XCJ0cmVlLWljb24tbGluZVwiIFtzdHlsZS5kaXNwbGF5XT1cImlzU2hvd1RyaWFuZ2xlICYmIHNob3dMaW5lcz8gJycgOiAnbm9uZSdcIj48L3NwYW4+XHJcbiAgICA8c3BhbiBbc3R5bGUuZGlzcGxheV09XCIodHQuc2hvd0ljb24gJiYgcm93Tm9kZS5ub2RlLnNob3dJY29uKSA/ICdpbmxpbmUtYmxvY2snOiAnbm9uZSdcIiBjbGFzcz1cInRyZWVub2RlLWljb25cIiBbbmdDbGFzc109XCJ0cmVlTm9kZUljb25cIj48L3NwYW4+XHJcblxyXG4gICAgPHR0LWNoZWNrYm94ICBbcm93Tm9kZV09XCJyb3dOb2RlXCIgKm5nSWY9XCJ0dC5zaG93Q2hlY2tib3hcIiBbZGlzYWJsZWRdPVwiZGlzYWJsZWRcIiBbY2hlY2tlZF09XCJyb3dOb2RlLmlzQ2hlY2tlZFwiID48L3R0LWNoZWNrYm94PlxyXG4gICAgYCxcclxuICAgIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmUsXHJcbiAgICBleHBvcnRBczogJ3R0VG9nZ2xlcidcclxufSlcclxuZXhwb3J0IGNsYXNzIFRyZWVUYWJsZVRvZ2dsZXJDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyVmlld0luaXQsIE9uRGVzdHJveSwgRG9DaGVjaywgT25DaGFuZ2VzLCBBZnRlclZpZXdDaGVja2VkIHtcclxuICAgIEBIb3N0QmluZGluZygnY2xhc3MuZi1jbXAtdHJlZXRhYmxlLXRvZ2dsZXInKSBjbHMgPSB0cnVlO1xyXG4gICAgLyoqXHJcbiAgICAgKiDmoJHoioLngrlcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgcm93Tm9kZTogUm93Tm9kZTtcclxuICAgIEBJbnB1dCgpIGRpc2FibGVkOiBib29sZWFuO1xyXG5cclxuICAgIEBJbnB1dCgpIHNob3dMaW5lcyA9IGZhbHNlO1xyXG5cclxuICAgIEBJbnB1dCgpIGluZGVudFNwYWNpbmcgPSAxNjtcclxuXHJcbiAgICB0cmVlTm9kZUljb24gPSB7fTtcclxuICAgIGlzU2hvd1RyaWFuZ2xlID0gZmFsc2U7XHJcbiAgICBub0NoaWxkcyA9IGZhbHNlO1xyXG5cclxuICAgIHN1YnNjcmlwdGlvbnM6IFN1YnNjcmlwdGlvbltdID0gW107XHJcblxyXG4gICAgZ2V0IG9mZnNldFdpZHRoKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRvZ2dsZXJFbC5uYXRpdmVFbGVtZW50LnBhcmVudEVsZW1lbnQub2Zmc2V0V2lkdGg7XHJcbiAgICB9XHJcblxyXG4gICAgQFZpZXdDaGlsZCgndG9nZ2xlcicpIHRvZ2dsZXJFbDogRWxlbWVudFJlZjtcclxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyB0dDogVHJlZVRhYmxlQ29tcG9uZW50LCBwcml2YXRlIG5nem9uZTogTmdab25lLCBwcml2YXRlIHJlbmRlcjogUmVuZGVyZXIyKSB7XHJcbiAgICB9XHJcbiAgICBuZ09uSW5pdCgpIHtcclxuICAgICAgICB0aGlzLnRyZWVOb2RlSWNvbiA9IHRoaXMudHQuZ2V0VHJlZUljb24odGhpcy5yb3dOb2RlLm5vZGUpO1xyXG5cclxuICAgICAgICB0aGlzLmlzU2hvd1RyaWFuZ2xlID0gdGhpcy5zaG93VHJpYW5nbGUoKTtcclxuICAgICAgICB0aGlzLm5vQ2hpbGRzID0gdGhpcy5oYXNDaGlsZHJlbigpO1xyXG4gICAgICAgIGNvbnN0IGV4cGFuZFN1YiA9IHRoaXMudHQuZXhwYW5kLnN1YnNjcmliZSgobm9kZTogVHJlZU5vZGUpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMucm93Tm9kZS5pZCA9PT0gbm9kZS5kYXRhW3RoaXMudHQuaWRGaWVsZF0pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlSWNvbih0aGlzLnJvd05vZGUubm9kZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50dC5wc1JlZikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHQucHNSZWYuZGlyZWN0aXZlUmVmLnVwZGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy50dC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgY29sbGFwc2VTdWIgPSB0aGlzLnR0LmNvbGxhcHNlLnN1YnNjcmliZSgobm9kZTogVHJlZU5vZGUpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMucm93Tm9kZS5pZCA9PT0gbm9kZS5kYXRhW3RoaXMudHQuaWRGaWVsZF0pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlSWNvbih0aGlzLnJvd05vZGUubm9kZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50dC5wc1JlZikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHQucHNSZWYuZGlyZWN0aXZlUmVmLnVwZGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy50dC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgYWRkTmV3U3ViID0gdGhpcy50dC5hcHBlbmROZXcuc3Vic2NyaWJlKChlOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgaWYgKGUucGFyZW50KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5yb3dOb2RlLmlkID09PSBlLnBhcmVudC5kYXRhW3RoaXMudHQuaWRGaWVsZF0pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5yb3dOb2RlLm5vZGUubGVhZiB8fCB0aGlzLnJvd05vZGUubm9kZS5sZWFmID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yb3dOb2RlLm5vZGUubGVhZiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUljb24odGhpcy5yb3dOb2RlLm5vZGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucyA9IFtleHBhbmRTdWIsIGNvbGxhcHNlU3ViLCBhZGROZXdTdWJdO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XHJcbiAgICAgICAgaWYgKGNoYW5nZXMuc2hvd0xpbmVzICYmICFjaGFuZ2VzLnNob3dMaW5lcy5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2hvd0xpbmVzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlci5zZXRTdHlsZSh0aGlzLnRvZ2dsZXJFbC5uYXRpdmVFbGVtZW50LCAnZGlzcGxheScsIHRoaXMuaXNTaG93VHJpYW5nbGUgPyAnJyA6ICdub25lJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlci5yZW1vdmVTdHlsZSh0aGlzLnRvZ2dsZXJFbC5uYXRpdmVFbGVtZW50LCAnZGlzcGxheScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMucmVTZXRMaW5lcygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMucm93Tm9kZSAmJiAhY2hhbmdlcy5yb3dOb2RlLmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUljb24odGhpcy5yb3dOb2RlLm5vZGUpO1xyXG5cclxuICAgICAgICAgICAgLy8gaWYgKGNoYW5nZXMucm93Tm9kZS5jdXJyZW50VmFsdWUubm9kZS5jaGlsZHJlbikge1xyXG4gICAgICAgICAgICAvLyAgICAgaWYgKCEhY2hhbmdlcy5yb3dOb2RlLmN1cnJlbnRWYWx1ZS5ub2RlLmNoaWxkcmVuLmxlbmd0aCAhPT0gISFjaGFuZ2VzLnJvd05vZGUucHJldmlvdXNWYWx1ZS5ub2RlLmNoaWxkcmVuLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIHRoaXMucmVTZXRMaW5lcygpO1xyXG4gICAgICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnR0LnNob3dMaW5lcykge1xyXG4gICAgICAgICAgICAgICAgbGV0IGN1cnJlbkNoaWxkcmVuTGVuZ3RoID0gMDtcclxuICAgICAgICAgICAgICAgIGxldCBwcmV2aW91c0NoaWxkcmVuTGVuZ3RoID0gMDtcclxuICAgICAgICAgICAgICAgIGlmIChjaGFuZ2VzLnJvd05vZGUuY3VycmVudFZhbHVlICYmIGNoYW5nZXMucm93Tm9kZS5jdXJyZW50VmFsdWUubm9kZS5jaGlsZHJlbiApIHtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW5DaGlsZHJlbkxlbmd0aCA9IGNoYW5nZXMucm93Tm9kZS5jdXJyZW50VmFsdWUubm9kZS5jaGlsZHJlbi5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGNoYW5nZXMucm93Tm9kZS5wcmV2aW91c1ZhbHVlICYmIGNoYW5nZXMucm93Tm9kZS5wcmV2aW91c1ZhbHVlLm5vZGUuY2hpbGRyZW4pIHtcclxuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c0NoaWxkcmVuTGVuZ3RoID0gY2hhbmdlcy5yb3dOb2RlLnByZXZpb3VzVmFsdWUubm9kZS5jaGlsZHJlbi5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbkNoaWxkcmVuTGVuZ3RoICE9IHByZXZpb3VzQ2hpbGRyZW5MZW5ndGggfHwgKCFjdXJyZW5DaGlsZHJlbkxlbmd0aCAmJiAhcHJldmlvdXNDaGlsZHJlbkxlbmd0aCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlU2V0TGluZXMoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBuZ0FmdGVyVmlld0luaXQoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnR0LmJvZHlUZW1wbGF0ZSAmJiB0aGlzLnNob3dMaW5lcykge1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVTZXRMaW5lcygpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbmdEb0NoZWNrKCkge1xyXG4gICAgICAgIC8vIHRoaXMuaXNTaG93VHJpYW5nbGUgPSB0aGlzLnNob3dUcmlhbmdsZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIG5nQWZ0ZXJWaWV3Q2hlY2tlZCgpIHtcclxuICAgICAgICAvLyBpZiAodGhpcy50dCAmJiB0aGlzLnR0LmRhdGEpIHtcclxuICAgICAgICAvLyAgICAgdGhpcy5yZVNldExpbmVzKCk7XHJcbiAgICAgICAgLy8gfVxyXG4gICAgfVxyXG5cclxuICAgIG5nT25EZXN0cm95KCkge1xyXG4gICAgICAgIHRoaXMudW5BbGxTdWJzY3JpcHRpb25zKCk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHByaXZhdGUgdW5BbGxTdWJzY3JpcHRpb25zKCkge1xyXG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5mb3JFYWNoKHMgPT4ge1xyXG4gICAgICAgICAgICBzLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgaGFzQ2hpbGRyZW4oKSB7XHJcbiAgICAgICAgY29uc3QgdG4gPSB0aGlzLnJvd05vZGUubm9kZTtcclxuICAgICAgICByZXR1cm4gdG4ubGVhZiA9PT0gZmFsc2UgfHwgdGhpcy5yb3dOb2RlLmxldmVsICE9PSAwIHx8ICh0bi5jaGlsZHJlbiAmJiB0bi5jaGlsZHJlbi5sZW5ndGggPiAwKTtcclxuICAgIH1cclxuXHJcbiAgICBzaG93VHJpYW5nbGUoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgY29uc3QgdG4gPSB0aGlzLnJvd05vZGUubm9kZTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMudHQubG9hZERhdGFUeXBlID09PSAnYWxsJykge1xyXG4gICAgICAgICAgICByZXR1cm4gdG4ubGVhZiA9PT0gZmFsc2UgfHwgKHRuLmNoaWxkcmVuICYmIHRuLmNoaWxkcmVuLmxlbmd0aCA+IDApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0bi5sZWFmID09PSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVTZXRMaW5lcygpIHtcclxuICAgICAgICBpZiAodGhpcy50b2dnbGVyRWwpIHtcclxuICAgICAgICAgICAgY29uc3QgcGFyZW50RWwgPSB0aGlzLnRvZ2dsZXJFbC5uYXRpdmVFbGVtZW50LmNsb3Nlc3QoJy50cmVldGFibGUtY2VsbC1jb250ZW50Jyk7XHJcbiAgICAgICAgICAgIGlmIChwYXJlbnRFbCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbGluZUVscyA9IHBhcmVudEVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy50cmVldGFibGUtbGluZXMnKTtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgbGluZUVscy5sZW5ndGg7IGsrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpbmVFbHNba10ucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX3JlbmRlckxpbmVzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfcmVuZGVyTGluZXMoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnR0LmJvZHlUZW1wbGF0ZSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zaG93TGluZXMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyTGluZXMoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMubm9MaW5lU3R5bGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8qXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnRvZ2dsZXJFbCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudG9nZ2xlckVsLm5hdGl2ZUVsZW1lbnQuY2xvc2VzdCgndHInKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRkcyA9IHRoaXMudG9nZ2xlckVsLm5hdGl2ZUVsZW1lbnQuY2xvc2VzdCgndHInKS5xdWVyeVNlbGVjdG9yQWxsKCd0ZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIEFycmF5LmZyb20odGRzKS5mb3JFYWNoKG4gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlci5zZXRTdHlsZShuLCAncGFkZGluZycsICcwLjI1cmVtIDAuNzVyZW0nKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSAqL1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJpdmF0ZSBub0xpbmVTdHlsZSgpIHtcclxuICAgICAgICAvLyB0aGlzLmNscyA9IGZhbHNlO1xyXG4gICAgICAgIGlmICh0aGlzLnRvZ2dsZXJFbCkge1xyXG4gICAgICAgICAgICAvLyB0aGlzLnJlbmRlci5zZXRTdHlsZSh0aGlzLnRvZ2dsZXJFbC5uYXRpdmVFbGVtZW50LCAnbWFyZ2luLWxlZnQnLCBgJHt0aGlzLnJvd05vZGUubGV2ZWwgKiB0aGlzLmluZGVudFNwYWNpbmd9cHhgKTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXIuc2V0U3R5bGUodGhpcy50b2dnbGVyRWwubmF0aXZlRWxlbWVudCwgJ3Zpc2liaWxpdHknLCB0aGlzLmlzU2hvd1RyaWFuZ2xlID8gJ3Zpc2libGUnIDogJ2hpZGRlbicpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlci5yZW1vdmVTdHlsZSh0aGlzLnRvZ2dsZXJFbC5uYXRpdmVFbGVtZW50LCAnZGlzcGxheScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlbmRlckxpbmVzKCkge1xyXG4gICAgICAgIGNvbnN0IGxlbiA9IHRoaXMucm93Tm9kZS5sZXZlbDtcclxuICAgICAgICBpZiAoICF0aGlzLnRvZ2dsZXJFbCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHBhcmVudEVsID0gdGhpcy50b2dnbGVyRWwubmF0aXZlRWxlbWVudC5jbG9zZXN0KCcudHJlZXRhYmxlLWNlbGwtY29udGVudCcpO1xyXG5cclxuICAgICAgICBpZiAoIXBhcmVudEVsKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHJlZmVyRWwgPSB0aGlzLnRvZ2dsZXJFbC5uYXRpdmVFbGVtZW50LnBhcmVudEVsZW1lbnQ7XHJcblxyXG4gICAgICAgIGlmIChsZW4gPT09IDAgJiYgIXRoaXMuc2hvd1RyaWFuZ2xlKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5jcmVhdGVMZWFmTm9kZUxpbmVzKHJlZmVyRWwsIHBhcmVudEVsLCB0cnVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICAgICAgcGFyZW50RWwuaW5zZXJ0QmVmb3JlKHRoaXMubmV3TGluZUVsZW1lbnQoKSwgcmVmZXJFbCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBuZWFyTGluZSA9IHRoaXMubmV3TGluZUVsZW1lbnQoZmFsc2UpO1xyXG4gICAgICAgICAgICBwYXJlbnRFbC5pbnNlcnRCZWZvcmUobmVhckxpbmUsIHJlZmVyRWwpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgaXNMZWFmID0gIXRoaXMuc2hvd1RyaWFuZ2xlKCk7XHJcbiAgICAgICAgICAgIGlmIChpc0xlYWYgJiYgaSA9PT0gbGVuIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVMZWFmTm9kZUxpbmVzKHJlZmVyRWwsIHBhcmVudEVsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG5ld0xpbmVFbGVtZW50KGJvcmRlciA9IHRydWUpIHtcclxuICAgICAgICBjb25zdCBuZXdMaW5lRWwgPSB0aGlzLnJlbmRlci5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICB0aGlzLnJlbmRlci5hZGRDbGFzcyhuZXdMaW5lRWwsICd0cmVldGFibGUtbGluZXMnKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2hvd0xpbmVzKSB7XHJcbiAgICAgICAgICAgIGlmIChib3JkZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyLmFkZENsYXNzKG5ld0xpbmVFbCwgJ3RyZWV0YWJsZS1saW5lcy1ib3JkZXItY29sb3InKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3TGluZUVsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5p6E6YCgIOKInyBvciDilJxcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBjcmVhdGVMZWFmTm9kZUxpbmVzKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCwgcGFyZW50RWw6IEVsZW1lbnQsIGlzVG9wTm9kZSA9IGZhbHNlKSB7XHJcbiAgICAgICAgLy8g4pScXHJcbiAgICAgICAgLy8gPGRpdiBjbGFzcz1cInRyZWV0YWJsZS1saW5lc1wiIHN0eWxlPVwiYm9yZGVyLWNvbG9yOiByZ2IoMjA0LCAyMDQsIDIwNCk7XCI+PC9kaXY+XHJcbiAgICAgICAgLy8gPGRpdiBjbGFzcz1cInRyZWV0YWJsZS1saW5lcyB0cmVldGFibGUtbGluZXMtbGVhZlwiIHN0eWxlPVwiYm9yZGVyLWNvbG9yOiB0cmFuc3BhcmVudDtcIj5cclxuICAgICAgICAvLyAgICAgPGRpdiBjbGFzcz1cIm5vcm1hbFwiPjwvZGl2PlxyXG4gICAgICAgIC8vIDwvZGl2PlxyXG5cclxuICAgICAgICAvLyDiiJ9cclxuICAgICAgICAvLyA8ZGl2IGNsYXNzPVwidHJlZXRhYmxlLWxpbmVzXCIgc3R5bGU9XCJib3JkZXItY29sb3I6IHRyYW5zcGFyZW50XCI+PC9kaXY+XHJcbiAgICAgICAgLy8gPGRpdiBjbGFzcz1cInRyZWV0YWJsZS1saW5lcyB0cmVldGFibGUtbGluZXMtbGVhZlwiIHN0eWxlPVwiYm9yZGVyLWNvbG9yOiB0cmFuc3BhcmVudDtcIj5cclxuICAgICAgICAvLyAgICAgPGRpdiBzdHlsZT1cImNvcm5lclwiPjwvZGl2PlxyXG4gICAgICAgIC8vIDwvZGl2PlxyXG5cclxuICAgICAgICBjb25zdCBsMSA9IHRoaXMubmV3TGluZUVsZW1lbnQoKTtcclxuICAgICAgICBjb25zdCBsMiA9IHRoaXMubmV3TGluZUVsZW1lbnQoZmFsc2UpO1xyXG5cclxuICAgICAgICB0aGlzLnJlbmRlci5hZGRDbGFzcyhsMiwgJ3RyZWV0YWJsZS1saW5lcy1sZWFmJyk7XHJcbiAgICAgICAgY29uc3QgZGVzc2VydCA9IHRoaXMucmVuZGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zaG93TGluZXMpIHtcclxuICAgICAgICAgICAgbGV0IGNscyA9ICdub3JtYWwnO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5yb3dOb2RlLmxhc3QpIHtcclxuICAgICAgICAgICAgICAgIGNscyA9ICdjb3JuZXInO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIucmVtb3ZlQ2xhc3MobDEsICd0cmVldGFibGUtbGluZXMtYm9yZGVyLWNvbG9yJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbDIuYXBwZW5kQ2hpbGQoZGVzc2VydCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyLmFkZENsYXNzKGRlc3NlcnQsIGNscyk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyLmFkZENsYXNzKGRlc3NlcnQsICd0cmVldGFibGUtbGluZXMtYm9yZGVyLWNvbG9yJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwYXJlbnRFbC5pbnNlcnRCZWZvcmUobDEsIGNvbnRhaW5lckVsKTtcclxuICAgICAgICBwYXJlbnRFbC5pbnNlcnRCZWZvcmUobDIsIGNvbnRhaW5lckVsKTtcclxuXHJcbiAgICAgICAgaWYgKGlzVG9wTm9kZSkge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlci5zZXRTdHlsZShsMiwgJ21hcmdpblJpZ2h0JywgJzNweCcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlZ2lzdGVyQ2xpY2tFdmVudCgpIHtcclxuICAgICAgICBpZiAodGhpcy50b2dnbGVyRWwpIHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXIubGlzdGVuKHRoaXMudG9nZ2xlckVsLm5hdGl2ZUVsZW1lbnQsICdjbGljaycsIHRoaXMub25DbGljay5iaW5kKHRoaXMpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25DbGljayhldmVudDogRXZlbnQpIHtcclxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5yb3dOb2RlLm5vZGVbJ3Nob3dMb2FkaW5nJ10pIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLnR0LmRpc2FibGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMudHQudG9nZ2xlRXhwYW5kKHRoaXMucm93Tm9kZS5ub2RlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdXBkYXRlSWNvbih0cmVlTm9kZTogVHJlZU5vZGUpIHtcclxuICAgICAgICB0aGlzLmlzU2hvd1RyaWFuZ2xlID0gdGhpcy5zaG93VHJpYW5nbGUoKTtcclxuICAgICAgICB0aGlzLm5vQ2hpbGRzID0gdGhpcy5oYXNDaGlsZHJlbigpO1xyXG4gICAgICAgIHRoaXMudHJlZU5vZGVJY29uID0gdGhpcy50dC5nZXRUcmVlSWNvbih0cmVlTm9kZSk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG4vKipcclxuICog6YCJ5Lit6KGM57uE5Lu2XHJcbiAqL1xyXG5ARGlyZWN0aXZlKHtcclxuICAgIHNlbGVjdG9yOiAnW3NlbGVjdFJvd10nLFxyXG4gICAgZXhwb3J0QXM6ICdyb3cnXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBUcmVlVGFibGVTZWxlY3RSb3dEaXJlY3RpdmUgaW1wbGVtZW50cyBEb0NoZWNrLCBPbkRlc3Ryb3ksIE9uSW5pdCwgT25DaGFuZ2VzIHtcclxuXHJcbiAgICBASW5wdXQoJ3NlbGVjdFJvdycpIHJvd05vZGU6IFJvd05vZGU7XHJcbiAgICBASW5wdXQoKSByb3dJbmRleDogbnVtYmVyO1xyXG5cclxuICAgIEBJbnB1dCgpIHNlbGVjdFJvd0Rpc2FibGVkOiBib29sZWFuO1xyXG5cclxuICAgIHN1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uO1xyXG5cclxuICAgIHB1YmxpYyBwcmV2ZW50ID0gZmFsc2U7XHJcbiAgICBwdWJsaWMgdGltZXI6IGFueTtcclxuICAgIEBJbnB1dCgpIGRlbGF5ID0gMDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgdHQ6IFRyZWVUYWJsZUNvbXBvbmVudCwgcHJpdmF0ZSBlbDogRWxlbWVudFJlZiwgcHJpdmF0ZSByZW5kZXI6IFJlbmRlcmVyMiwgcHJpdmF0ZSBuZ1pvbmU6IE5nWm9uZSkge1xyXG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uID0gdGhpcy50dC5zZWxlY3ROb2RlQ2hhbmdlZFN1YmplY3Quc3Vic2NyaWJlKChpZHM6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICBpZiAoaWRzICYmIHRoaXMucm93Tm9kZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaWRBcnIgPSBpZHMuc3BsaXQoJywnKTtcclxuICAgICAgICAgICAgICAgIGlmIChpZEFyci5pbmRleE9mKHRoaXMucm93Tm9kZS5pZCkgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlQ2xhc3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJvd05vZGUubm9kZVsnZWxlbWVudFJlZiddID0gdGhpcy5lbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG5nT25Jbml0KCkge1xyXG4gICAgICAgIC8vIHRoaXMucm93Tm9kZS5ub2RlLnNlbGVjdGFibGUgPSAhdGhpcy5zZWxlY3RSb3dEaXNhYmxlZDtcclxuICAgIH1cclxuXHJcbiAgICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XHJcbiAgICAgICAgLy8gaWYgKGNoYW5nZXMuc2VsZWN0Um93RGlzYWJsZWQgJiYgIWNoYW5nZXMuc2VsZWN0Um93RGlzYWJsZWQuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgLy8gICAgIHRoaXMucm93Tm9kZS5ub2RlLnNlbGVjdGFibGUgPSAhY2hhbmdlcy5zZWxlY3RSb3dEaXNhYmxlZC5jdXJyZW50VmFsdWU7XHJcbiAgICAgICAgLy8gfVxyXG4gICAgfVxyXG5cclxuICAgIG5nT25EZXN0cm95KCkge1xyXG4gICAgICAgIGlmICh0aGlzLnN1YnNjcmlwdGlvbikge1xyXG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbiA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG5nRG9DaGVjaygpIHtcclxuICAgICAgICBpZiAodGhpcy50dC5ib2R5VGVtcGxhdGUpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLnR0LmlzU2VsZWN0ZWQodGhpcy5yb3dOb2RlLm5vZGUpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlci5yZW1vdmVDbGFzcyh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsICdmYXJyaXMtdGFibGUtc2VsZWN0ZWRyb3cnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBASG9zdExpc3RlbmVyKCdjbGljaycsIFsnJGV2ZW50J10pXHJcbiAgICBvbmNsaWNrKGV2ZW50OiBNb3VzZUV2ZW50KSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNFbmFibGVkKCkpIHtcclxuICAgICAgICAgICAgLy8gdGhpcy5yb3dDbGljayhldmVudCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRlbGF5ICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMucHJldmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJldmVudCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50aW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJvd0NsaWNrKGV2ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmV2ZW50ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgdGhpcy5kZWxheSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJvd0NsaWNrKGV2ZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgaXNFbmFibGVkKCkge1xyXG4gICAgICAgIHJldHVybiAhdGhpcy50dC5kaXNhYmxlZCAmJiB0aGlzLnNlbGVjdFJvd0Rpc2FibGVkICE9PSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcm93Q2xpY2soZXZlbnQ6IEV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblxyXG4gICAgICAgIHRoaXMudHQuYmVmb3JlQ2xpY2tOb2RlKHsgaW5zdGFuY2U6IHRoaXMudHQsIHJvd05vZGU6IHRoaXMucm93Tm9kZSwgZXZlbnQsIHR5cGU6ICdyb3cnIH0pLnN1YnNjcmliZSgoZTogYm9vbGVhbikgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIWUpIHsgcmV0dXJuOyB9XHJcbiAgICAgICAgICAgIHRoaXMudHQuaGFuZGxlUm93Q2xpY2soe1xyXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxFdmVudDogZXZlbnQsXHJcbiAgICAgICAgICAgICAgICByb3dOb2RlOiB0aGlzLnJvd05vZGUsXHJcbiAgICAgICAgICAgICAgICByb3dJbmRleDogdGhpcy5yb3dJbmRleFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlQ2xhc3MoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgdG9nZ2xlQ2xhc3MoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnR0LmJvZHlUZW1wbGF0ZSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy50dC5pc1NlbGVjdGVkKHRoaXMucm93Tm9kZS5ub2RlKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudHQuc2luZ2xlU2VsZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50dC5lbC5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5mYXJyaXMtdHJlZXRhYmxlLXRib2R5PnRyLmZhcnJpcy10YWJsZS1zZWxlY3RlZHJvdycpLmZvckVhY2gobiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyLnJlbW92ZUNsYXNzKG4sICdmYXJyaXMtdGFibGUtc2VsZWN0ZWRyb3cnKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyLmFkZENsYXNzKHRoaXMuZWwubmF0aXZlRWxlbWVudCwgJ2ZhcnJpcy10YWJsZS1zZWxlY3RlZHJvdycpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnR0LmtlZXBTZWxlY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlci5yZW1vdmVDbGFzcyh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsICdmYXJyaXMtdGFibGUtc2VsZWN0ZWRyb3cnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIOihqOWktOWFqOmAiee7hOS7tlxyXG4gKi9cclxuQENvbXBvbmVudCh7XHJcbiAgICBzZWxlY3RvcjogJ3R0LWhlYWRlci1jaGVja2JveCcsXHJcbiAgICB0ZW1wbGF0ZTogYFxyXG4gICAgPGRpdiBjbGFzcz1cImN1c3RvbS1jb250cm9sIGN1c3RvbS1jaGVja2JveCAgY3VzdG9tLWNvbnRyb2wtaW5saW5lIHR0LWNoZWNrYm94XCIgc3R5bGU9XCJ0b3A6IC0ycHg7XCI+XHJcbiAgICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiICNjaGtBbGwgY2xhc3M9XCJjdXN0b20tY29udHJvbC1pbnB1dFwiICBbY2hlY2tlZF09XCJjaGVja2VkXCI+XHJcbiAgICAgICAgPGxhYmVsIGNsYXNzPVwiY3VzdG9tLWNvbnRyb2wtbGFiZWxcIiAoY2xpY2spPVwiaGFuZGxlQ2xpY2soJGV2ZW50KVwiPjwvbGFiZWw+XHJcbiAgICA8L2Rpdj5cclxuICAgIGAsXHJcbiAgICBzdHlsZXM6IFtcclxuICAgICAgICBgXHJcbiAgICAgICAgOmhvc3Qge1xyXG4gICAgICAgICAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBgXHJcbiAgICBdXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBUcmVlVGFibGVIZWFkZXJDaGVja2JveENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XHJcbiAgICBASW5wdXQoKSBjaGVja2VkOiBib29sZWFuO1xyXG4gICAgQElucHV0KCkgZGlzYWJsZWQ6IGJvb2xlYW47XHJcblxyXG4gICAgQE91dHB1dCgpIGNoZWNrZWRDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgQFZpZXdDaGlsZCgnY2hrQWxsJykgY2hrQWxsOiBFbGVtZW50UmVmO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyB0dDogVHJlZVRhYmxlQ29tcG9uZW50LCBwdWJsaWMgdHRTZXJ2aWNlOiBUcmVldGFibGVTZXJ2aWNlKSB7XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkluaXQoKSB7IH1cclxuXHJcbiAgICBoYW5kbGVDbGljayhldmVudCkge1xyXG4gICAgICAgIGlmICghdGhpcy5kaXNhYmxlZCAmJiAhdGhpcy50dC5kaXNhYmxlZCkge1xyXG4gICAgICAgICAgICBjb25zdCBiZWZvcmVFdmVudCA9ICF0aGlzLmNoZWNrZWQgPyB0aGlzLnR0LmJlZm9yZUNoZWNrQWxsIDogdGhpcy50dC5iZWZvcmVVbkNoZWNrQWxsO1xyXG5cclxuICAgICAgICAgICAgYmVmb3JlRXZlbnQoeyBpbnN0YW5jZTogdGhpcy50dCwgY2hlY2tlZDogIXRoaXMuY2hlY2tlZCB9KS5zdWJzY3JpYmUoZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyDlhajpgInlip/og71cclxuICAgICAgICAgICAgICAgIHRoaXMuY2hrQWxsLm5hdGl2ZUVsZW1lbnQuaW5kZXRlcm1pbmF0ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja2VkID0gIXRoaXMuY2hlY2tlZDtcclxuICAgICAgICAgICAgICAgIHRoaXMudHQudG9nZ2xlTm9kZXNXaXRoQ2hlY2tib3goZXZlbnQsIHRoaXMuY2hlY2tlZCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG4vKipcclxuICog6KGo5L2TY2hlY2tib3gg57uE5Lu2XHJcbiAqL1xyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiAndHQtY2hlY2tib3gnLFxyXG4gICAgdGVtcGxhdGU6IGBcclxuICAgIDxkaXYgY2xhc3M9XCJjdXN0b20tY29udHJvbCBjdXN0b20tY2hlY2tib3ggIGN1c3RvbS1jb250cm9sLWlubGluZSB0dC1jaGVja2JveFwiPlxyXG4gICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiAjY2hrIGNsYXNzPVwiY3VzdG9tLWNvbnRyb2wtaW5wdXRcIiBbZGlzYWJsZWRdPVwiZGlzYWJsZWRcIiBbY2hlY2tlZF09XCJjaGVja2VkXCI+XHJcbiAgICAgICAgPGxhYmVsIGNsYXNzPVwiY3VzdG9tLWNvbnRyb2wtbGFiZWxcIiAoY2xpY2spPVwiaGFuZGxlQ2xpY2soJGV2ZW50KVwiPjwvbGFiZWw+XHJcbiAgICA8L2Rpdj5cclxuICAgIGAsXHJcbiAgICBzdHlsZXM6IFtcclxuICAgICAgICBgXHJcbiAgICAgICAgOmhvc3Qge1xyXG4gICAgICAgICAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xyXG4gICAgICAgIH1cclxuICAgICAgICA6aG9zdCAuY3VzdG9tLWNoZWNrYm94IHtcclxuICAgICAgICAgICAgb3BhY2l0eTogMTtcclxuICAgICAgICAgICAgZmxvYXQ6IG5vbmU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGBcclxuICAgIF1cclxufSlcclxuZXhwb3J0IGNsYXNzIFRyZWVUYWJsZUNoZWNrYm94Q29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkRlc3Ryb3kge1xyXG4gICAgQEhvc3RCaW5kaW5nKCdjbGFzcy50cmVlLXRvZ2dsZXItY2hlY2tib3gnKSBjbHMxID0gdHJ1ZTtcclxuICAgIEBJbnB1dCgpIGNoZWNrZWQ6IGJvb2xlYW47XHJcbiAgICBASW5wdXQoKSBkaXNhYmxlZDogYm9vbGVhbjtcclxuXHJcbiAgICBASW5wdXQoKSByb3dOb2RlOiBSb3dOb2RlO1xyXG5cclxuICAgIEBPdXRwdXQoKSBjaGVja2VkQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICAgIEBWaWV3Q2hpbGQoJ2NoaycpIGNoazogRWxlbWVudFJlZjtcclxuICAgIGRlc3Ryb3kkID0gbmV3IFN1YmplY3QoKTtcclxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyB0dDogVHJlZVRhYmxlQ29tcG9uZW50LCBwdWJsaWMgdHRTZXJ2aWNlOiBUcmVldGFibGVTZXJ2aWNlKSB7XHJcbiAgICAgICAgdGhpcy50dFNlcnZpY2UgPSB0aGlzLnR0LnR0U2VydmljZTtcclxuICAgIH1cclxuICAgIG5nT25EZXN0cm95KCkge1xyXG4gICAgICAgIHRoaXMuZGVzdHJveSQubmV4dCgpO1xyXG4gICAgICAgIHRoaXMuZGVzdHJveSQuY29tcGxldGUoKTtcclxuICAgIH1cclxuICAgIG5nT25Jbml0KCkge1xyXG4gICAgICAgIHRoaXMuY2hrLm5hdGl2ZUVsZW1lbnQuaW5kZXRlcm1pbmF0ZSA9IHRoaXMucm93Tm9kZS5pbmRldGVybWluYXRlIHx8IGZhbHNlO1xyXG5cclxuICAgICAgICB0aGlzLnR0U2VydmljZS5jaGFuZ2VDaGVja2JveFN0YXR1cyQucGlwZShcclxuICAgICAgICAgICAgdGFrZVVudGlsKHRoaXMuZGVzdHJveSQpXHJcbiAgICAgICAgKS5waXBlKFxyXG4gICAgICAgICAgICBtYXAobiA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAobi5pZCA9PT0gdGhpcy5yb3dOb2RlLmlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICApLnN1YnNjcmliZShuID0+IHtcclxuICAgICAgICAgICAgaWYgKG4pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hrLm5hdGl2ZUVsZW1lbnQuaW5kZXRlcm1pbmF0ZSA9IG4uaW5kZXRlcm1pbmF0ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tlZCA9IG4uaXNDaGVja2VkO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGsubmF0aXZlRWxlbWVudC5jaGVja2VkID0gdGhpcy5jaGVja2VkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGhhbmRsZUNsaWNrKGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgaWYgKCF0aGlzLmRpc2FibGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMudHQuYmVmb3JlQ2xpY2tOb2RlKHsgaW5zdGFuY2U6IHRoaXMudHQsIHJvd05vZGU6IHRoaXMucm93Tm9kZSwgZXZlbnQsIHR5cGU6ICdjaGVja2JveCcgfSkuc3Vic2NyaWJlKChlOiBib29sZWFuKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWUpIHsgcmV0dXJuOyB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWQgPSAhdGhpcy5jaGVja2VkO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudHQuc2luZ2xlU2VsZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50dC5jbGVhckFsbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50dC5zZWxlY3ROb2RlKHRoaXMucm93Tm9kZS5pZCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50dC51blNlbGVjdE5vZGUodGhpcy5yb3dOb2RlLmlkLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHQudG9nZ2xlTm9kZVdpdGhDaGVja2JveChldmVudCwgdGhpcy5yb3dOb2RlLCB0aGlzLmNoZWNrZWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG59XHJcblxyXG5ARGlyZWN0aXZlKHtcclxuICAgIHNlbGVjdG9yOiAnW2RibGNsaWNrXSdcclxufSlcclxuZXhwb3J0IGNsYXNzIERibENsaWNrUm93RGlyZWN0aXZlIGltcGxlbWVudHMgT25Jbml0IHtcclxuICAgIEBJbnB1dCgnZGJsY2xpY2snKSBlbmFibGVEYmxDbGljayA9IGZhbHNlO1xyXG4gICAgQElucHV0KCkgZGJsY2xpY2tOb2RlOiBSb3dOb2RlO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHB1YmxpYyB0dDogVHJlZVRhYmxlQ29tcG9uZW50LCBwdWJsaWMgZWw6IEVsZW1lbnRSZWYsIHB1YmxpYyB0dFNlcnZpY2U6IFRyZWV0YWJsZVNlcnZpY2UsXHJcbiAgICAgICAgQE9wdGlvbmFsKCkgQFNlbGYoKSBwdWJsaWMgc2VsZWN0Um93RGlyOiBUcmVlVGFibGVTZWxlY3RSb3dEaXJlY3RpdmUpIHtcclxuICAgICAgICAgICAgdGhpcy50dFNlcnZpY2UgPSB0aGlzLnR0LnR0U2VydmljZTtcclxuICAgIH1cclxuXHJcbiAgICBuZ09uSW5pdCgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuZW5hYmxlRGJsQ2xpY2spIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RSb3dEaXIuZGVsYXkgPSAwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBASG9zdExpc3RlbmVyKCdkYmxjbGljaycsIFsnJGV2ZW50J10pXHJcbiAgICBvbmRibGNsaWNrKGV2ZW50OiBFdmVudCkge1xyXG4gICAgICAgIGNvbnN0IHByZXZFbCA9ICggZXZlbnQudGFyZ2V0IGFzIGFueSkucHJldmlvdXNTaWJsaW5nO1xyXG4gICAgICAgIGlmIChwcmV2RWwgJiYgcHJldkVsLnR5cGUgPT09ICdjaGVja2JveCcpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIGlmICh0aGlzLnR0LmRpc2FibGVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnR0Lm11bHRpU2VsZWN0ICYmIHRoaXMuZGJsY2xpY2tOb2RlKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRibGNsaWNrTm9kZS5ub2RlLmxlYWYpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIGNvbnN0IGNsc05hbWUgPSBldmVudC50YXJnZXRbJ2NsYXNzTmFtZSddO1xyXG5cclxuICAgICAgICBsZXQgdG9nZ2xlclRhZyA9IG51bGw7XHJcbiAgICAgICAgaWYgKGNsc05hbWUuaW5kZXhPZignZi1jbXAtdHJlZXRhYmxlLXRvZ2dsZXInKSA+IC0xKSB7XHJcbiAgICAgICAgICAgIHRvZ2dsZXJUYWcgPSBldmVudC50YXJnZXRbJ3F1ZXJ5U2VsZWN0b3InXSgnLnRyZWVub2RlLWZvbGQnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoZXZlbnQudGFyZ2V0WydjbGFzc05hbWUnXS5pbmRleE9mKCd0cmVlbm9kZS1mb2xkJykgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgdG9nZ2xlclRhZyA9IGV2ZW50LnRhcmdldCBhcyBhbnk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0b2dnbGVyVGFnICYmIHRvZ2dsZXJUYWcuc3R5bGUudmlzaWJpbGl0eSA9PT0gJ3Zpc2libGUnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdFJvd0Rpcikge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdFJvd0Rpci5wcmV2ZW50ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnNlbGVjdFJvd0Rpci50aW1lcik7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdFJvd0Rpci5yb3dOb2RlICYmIHRoaXMuZW5hYmxlRGJsQ2xpY2spIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJuID0gdGhpcy5zZWxlY3RSb3dEaXIucm93Tm9kZTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnR0LmxvYWREYXRhVHlwZSA9PT0gJ2FsbCcgJiYgIXJuLm5vZGUubGVhZiAmJiB0aGlzLnR0LmRibENsaWNrRXhwYW5kKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50dC50b2dnbGVFeHBhbmQocm4ubm9kZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLnR0LmRibENsaWNrLmVtaXQocm4ubm9kZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgfVxyXG59XHJcblxyXG5ARGlyZWN0aXZlKHtcclxuICAgIHNlbGVjdG9yOiAnW2N1c3RvbVJvd1N0eWxlXSdcclxufSlcclxuZXhwb3J0IGNsYXNzIEN1c3RvbVJvd1N0eWxlRGlyZWN0aXZlIGltcGxlbWVudHMgT25Jbml0LCBPbkNoYW5nZXMge1xyXG4gICAgQElucHV0KCdjdXN0b21Sb3dTdHlsZScpIHJvd05vZGU6IFJvd05vZGU7XHJcbiAgICBASW5wdXQoJ2ZpZWxkJykgY29sOiBUcmVlVGFibGVDb2x1bW47XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBpbmplY3RvcjogSW5qZWN0b3IsIHByaXZhdGUgbmdab25lOiBOZ1pvbmUsXHJcbiAgICAgICAgcHJpdmF0ZSBlbDogRWxlbWVudFJlZiwgcHJpdmF0ZSB0dDogVHJlZVRhYmxlQ29tcG9uZW50LFxyXG4gICAgICAgIHB1YmxpYyB1dGlsczogQ29tbW9uVXRpbHMsIHByaXZhdGUgcmVuZGVyOiBSZW5kZXJlcjIpIHtcclxuICAgIH1cclxuICAgIG5nT25Jbml0KCkge1xyXG4gICAgICAgIGlmICh0aGlzLmNvbCAmJiB0aGlzLnR0LmZpeGVkQ29sdW1ucyAmJiB0aGlzLnR0LmZpeGVkSGVhZGVyICYmIHRoaXMuY29sLmZpeGVkKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbC5maXhlZCA9PT0gJ2xlZnQnIHx8IHRoaXMuY29sLmZpeGVkID09PSAncmlnaHQnKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFJvd1N0eWxlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0Um93U3R5bGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXRSb3dTdHlsZSgpIHtcclxuICAgICAgICBjb25zdCBmbiA9IHRoaXMudHQucm93U3R5bGVyO1xyXG4gICAgICAgIGlmIChmbikge1xyXG4gICAgICAgICAgICBjb25zdCBzdHkgPSBmbih0aGlzLnJvd05vZGUubm9kZSk7XHJcbiAgICAgICAgICAgIGlmIChzdHkpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc3R5ID09PSAnb2JqZWN0JyAmJiAoc3R5LnN0eWxlIHx8IHN0eS5jbHMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0eS5zdHlsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhzdHkuc3R5bGUpLmZvckVhY2gocyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlci5zZXRTdHlsZSh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsIHMsIHN0eS5zdHlsZVtzXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0eS5jbHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5LmNscy5zcGxpdCgnLCcpLmZvckVhY2goYyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlci5hZGRDbGFzcyh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsIGMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShzdHkpIHx8IHR5cGVvZiBzdHkgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNscyA9IHRoaXMudHQuZ2V0Um93Q2xzKHRoaXMucm93Tm9kZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjbHMgJiYgT2JqZWN0LmtleXMoY2xzKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKGNscykuZm9yRWFjaChjID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2xzW2NdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyLmFkZENsYXNzKHRoaXMuZWwubmF0aXZlRWxlbWVudCwgYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhzdHkpLmZvckVhY2gocyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlci5zZXRTdHlsZSh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsIHMsIHN0eVtzXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XHJcbiAgICAgICAgaWYgKGNoYW5nZXMucm93Tm9kZSAmJiAhY2hhbmdlcy5yb3dOb2RlLmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFJvd1N0eWxlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5ARGlyZWN0aXZlKHtcclxuICAgIHNlbGVjdG9yOiAnW2N1c3RvbUNlbGxTdHlsZV0nXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBUVEN1c3RvbUNlbGxTdHlsZURpcmVjdGl2ZSBpbXBsZW1lbnRzIE9uSW5pdCwgT25DaGFuZ2VzIHtcclxuICAgIEBJbnB1dCgnY3VzdG9tQ2VsbFN0eWxlJykgY29sdW1uOiBUcmVlVGFibGVDb2x1bW47XHJcbiAgICBASW5wdXQoKSByb3dOb2RlOiBSb3dOb2RlO1xyXG4gICAgQElucHV0KCkgcm93SW5kZXg6IGFueTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGluamVjdG9yOiBJbmplY3RvciwgcHJpdmF0ZSBuZ1pvbmU6IE5nWm9uZSxcclxuICAgICAgICBwcml2YXRlIGVsOiBFbGVtZW50UmVmLCBwcml2YXRlIHR0OiBUcmVlVGFibGVDb21wb25lbnQsXHJcbiAgICAgICAgcHVibGljIHV0aWxzOiBDb21tb25VdGlscywgcHJpdmF0ZSByZW5kZXI6IFJlbmRlcmVyMikge1xyXG4gICAgfVxyXG5cclxuICAgIG5nT25Jbml0KCkge1xyXG4gICAgICAgIGlmICh0aGlzLnR0ICYmIHRoaXMudHQuZ2V0Q2VsbENscykge1xyXG4gICAgICAgICAgICB0aGlzLnNldENlbGxTdHlsZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLnR0LnNob3dCb3JkZXIgJiYgdGhpcy50dC5jb2x1bW5zLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlci5zZXRTdHlsZSh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsICdib3JkZXItd2lkdGgnLCAnMHB4Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0Q2VsbFN0eWxlKCkge1xyXG4gICAgICAgIGNvbnN0IGNlbGxDbHMgPSB0aGlzLnR0LmdldENlbGxDbHModGhpcy5yb3dOb2RlLCB0aGlzLmNvbHVtbi5maWVsZCk7XHJcbiAgICAgICAgaWYgKHRoaXMuY29sdW1uICYmIHRoaXMuY29sdW1uLnN0eWxlcikge1xyXG4gICAgICAgICAgICBpZiAoY2VsbENscyAmJiBPYmplY3Qua2V5cyhjZWxsQ2xzKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKGNlbGxDbHMpLmZvckVhY2goYyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNlbGxDbHNbY10pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIuYWRkQ2xhc3ModGhpcy5lbC5uYXRpdmVFbGVtZW50LCBjKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3Qgcm93RGF0YSA9IHRoaXMucm93Tm9kZS5ub2RlLmRhdGE7XHJcbiAgICAgICAgICAgIGNvbnN0IGNjcyA9IHRoaXMuY29sdW1uLnN0eWxlcih0aGlzLnV0aWxzLmdldFZhbHVlKHRoaXMuY29sdW1uLmZpZWxkLCByb3dEYXRhKSwgcm93RGF0YSwgdGhpcy5yb3dJbmRleCwgdGhpcy5yb3dOb2RlKTtcclxuICAgICAgICAgICAgaWYgKGNjcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNjcy5zdHlsZSB8fCBjY3MuY2xzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNjcy5zdHlsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhjY3Muc3R5bGUpLmZvckVhY2gocyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlci5zZXRTdHlsZSh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsIHMsIGNjcy5zdHlsZVtzXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNjcy5jbHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2NzLmNscy5zcGxpdCgnLCcpLmZvckVhY2goYyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlci5hZGRDbGFzcyh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsIGMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBPYmplY3Qua2V5cyhjZWxsQ2xzKS5mb3JFYWNoKHMgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIuc2V0U3R5bGUodGhpcy5lbC5uYXRpdmVFbGVtZW50LCBzLCBjZWxsQ2xzW3NdKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpIHtcclxuICAgICAgICBpZiAoY2hhbmdlcy5yb3dOb2RlICYmICFjaGFuZ2VzLnJvd05vZGUuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0Q2VsbFN0eWxlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5ARGlyZWN0aXZlKHtcclxuICAgIHNlbGVjdG9yOiAnW3Jlc2l6YWJsZS1jb2x1bW5dJ1xyXG59KVxyXG5leHBvcnQgY2xhc3MgVFRSZXNpemFibGVDb2x1bW5EaXJlY3RpdmUgaW1wbGVtZW50cyBBZnRlclZpZXdJbml0LCBPbkRlc3Ryb3ksIE9uQ2hhbmdlcyB7XHJcbiAgICBASW5wdXQoJ3Jlc2l6YWJsZS1jb2x1bW4nKSBlbmFibGVSZXNpemUgPSB0cnVlO1xyXG4gICAgcmVzaXplcjogSFRNTFNwYW5FbGVtZW50O1xyXG4gICAgcmVzaXplck1vdXNlRG93bkxpc3RlbmVyOiBhbnk7XHJcbiAgICBkb2N1bWVudE1vdXNlTW92ZUxpc3RlbmVyOiBhbnk7XHJcbiAgICBkb2N1bWVudE1vdXNlVXBMaXN0ZW5lcjogYW55O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHB1YmxpYyB0dDogVHJlZVRhYmxlQ29tcG9uZW50LCBwdWJsaWMgbmd6b25lOiBOZ1pvbmUsXHJcbiAgICAgICAgcHVibGljIGVsOiBFbGVtZW50UmVmLCBwdWJsaWMgcmVuZGVyOiBSZW5kZXJlcjIpIHtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgbmdBZnRlclZpZXdJbml0KCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzRW5hYmxlKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXIuYWRkQ2xhc3ModGhpcy5lbC5uYXRpdmVFbGVtZW50LCAncmVzaXphYmxlLWNvbHVtbicpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5yZXNpemVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG4gICAgICAgICAgICB0aGlzLnJlc2l6ZXIuY2xhc3NOYW1lID0gJ2NvbHVtbi1yZXNpemVyJztcclxuICAgICAgICAgICAgdGhpcy5lbC5uYXRpdmVFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMucmVzaXplcik7XHJcblxyXG4gICAgICAgICAgICB0aGlzLm5nem9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc2l6ZXJNb3VzZURvd25MaXN0ZW5lciA9IHRoaXMub25Nb3VzZURvd24uYmluZCh0aGlzKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVzaXplci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLnJlc2l6ZXJNb3VzZURvd25MaXN0ZW5lcik7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5lbC5uYXRpdmVFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCB0aGlzLm9uTW91c2VFbnRlci5iaW5kKHRoaXMpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpOiB2b2lkIHtcclxuICAgICAgICBpZiAoY2hhbmdlcy5lbmFibGVSZXNpemUgJiYgIWNoYW5nZXMuZW5hYmxlUmVzaXplLmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNFbmFibGUoKSAmJiB0aGlzLnJlc2l6ZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVzaXplci5yZW1vdmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpc0VuYWJsZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50dC5yZXNpemFibGVDb2x1bW5zICYmICF0aGlzLnR0LmF1dG9XaWR0aCAmJiB0aGlzLmVuYWJsZVJlc2l6ZTtcclxuICAgIH1cclxuXHJcbiAgICBiaW5kRG9jdW1lbnRFdmVudHMoKSB7XHJcbiAgICAgICAgdGhpcy5uZ3pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmRvY3VtZW50TW91c2VNb3ZlTGlzdGVuZXIgPSB0aGlzLm9uTW91c2VNb3ZlLmJpbmQodGhpcyk7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuZG9jdW1lbnRNb3VzZU1vdmVMaXN0ZW5lcik7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmRvY3VtZW50TW91c2VVcExpc3RlbmVyID0gdGhpcy5vbk1vdXNlVXAuYmluZCh0aGlzKTtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMuZG9jdW1lbnRNb3VzZVVwTGlzdGVuZXIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHVuYmluZERvY3VtZW50RXZlbnRzKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmRvY3VtZW50TW91c2VNb3ZlTGlzdGVuZXIpIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5kb2N1bWVudE1vdXNlTW92ZUxpc3RlbmVyKTtcclxuICAgICAgICAgICAgdGhpcy5kb2N1bWVudE1vdXNlTW92ZUxpc3RlbmVyID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmRvY3VtZW50TW91c2VVcExpc3RlbmVyKSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLmRvY3VtZW50TW91c2VVcExpc3RlbmVyKTtcclxuICAgICAgICAgICAgdGhpcy5kb2N1bWVudE1vdXNlVXBMaXN0ZW5lciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uTW91c2VEb3duKGV2ZW50OiBFdmVudCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzRW5hYmxlKCkpIHtcclxuICAgICAgICAgICAgdGhpcy50dC5vbkNvbHVtblJlc2l6ZUJlZ2luKGV2ZW50KTtcclxuICAgICAgICAgICAgdGhpcy5iaW5kRG9jdW1lbnRFdmVudHMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25Nb3VzZUVudGVyKCkge1xyXG4gICAgfVxyXG5cclxuICAgIG9uTW91c2VNb3ZlKGV2ZW50OiBFdmVudCkge1xyXG4gICAgICAgIHRoaXMudHQub25Db2x1bW5SZXNpemUoZXZlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uTW91c2VVcChldmVudDogRXZlbnQpIHtcclxuICAgICAgICB0aGlzLnR0Lm9uQ29sdW1uUmVzaXplRW5kKGV2ZW50LCB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMudW5iaW5kRG9jdW1lbnRFdmVudHMoKTtcclxuICAgIH1cclxuXHJcbiAgICBuZ09uRGVzdHJveSgpIHtcclxuICAgICAgICBpZiAodGhpcy5yZXNpemVyTW91c2VEb3duTGlzdGVuZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5yZXNpemVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMucmVzaXplck1vdXNlRG93bkxpc3RlbmVyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMudW5iaW5kRG9jdW1lbnRFdmVudHMoKTtcclxuICAgIH1cclxuXHJcbn1cclxuIl19