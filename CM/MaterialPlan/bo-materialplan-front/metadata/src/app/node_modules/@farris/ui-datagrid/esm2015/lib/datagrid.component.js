/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/*
 * @Author: 疯狂秀才(Lucas Huang)
 * @Date: 2019-08-06 07:43:07
 * @LastEditors: 疯狂秀才(Lucas Huang)
 * @LastEditTime: 2019-11-30 16:42:51
 * @QQ: 1055818239
 * @Version: v0.8.0
 * - 2021/04/07 增加 enableHighlightCell 属性，支持选中单元格高亮
 */
import { Component, Input, ViewEncapsulation, ContentChildren, QueryList, Output, EventEmitter, Renderer2, ChangeDetectionStrategy, ChangeDetectorRef, Injector, HostBinding, NgZone, ElementRef, ViewChild, ApplicationRef, TemplateRef, HostListener } from '@angular/core';
import { DomSanitizer } from '@angular/platform-browser';
import ResizeObserver from 'resize-observer-polyfill';
import { of, BehaviorSubject } from 'rxjs';
import { ColumnFilterType } from './types/data-column';
import { DatagridFacadeService } from './services/datagrid-facade.service';
import { DatagridColumnDirective } from './components/columns/datagrid-column.directive';
import { IgnoreProperties } from './services/state';
import { DATAGRID_REST_SERVICEE } from './services/rest.service';
import { DatagridService } from './services/datagrid.service';
import { GRID_EDITORS, CELL_SELECTED_CLS, GRID_VALIDATORS, SIZE_TYPE, GRID_SETTINGS_SERVICE, GRID_SETTINGS_HTTP, CELL_EDITING_CLS, TR_PREFIX, TR_ID_PREFIX } from './types/constant';
import { DomHandler } from './services/domhandler';
import { Utils } from './utils/utils';
import { CommonUtils, DebugService, FarrisComponentInstanceService } from '@farris/ui-common';
import { ColumnFormatService } from '@farris/ui-common/column';
import { flatten } from 'lodash-es';
import { LocaleService } from '@farris/ui-locale';
import { DatagridColumnsHelper } from './services/datagrid-columns.helper';
import { DatagridFilterService } from './services/datagrid-filter.service';
import { debounceTime } from 'rxjs/operators';
import { SmartFilterToolbarComponent } from './components/filter-toolbar/smart-filter-toolbar.component';
import { DatagridSmartFilterService } from './services/datagrid-smart-filter.service';
import { IdService } from '@farris/ui-common';
import { SelectionModeService } from './services/selection-mode.service';
export class DatagridComponent {
    /**
     * @param {?} cd
     * @param {?} el
     * @param {?} inject
     * @param {?} zone
     * @param {?} dfs
     * @param {?} dgs
     * @param {?} app
     * @param {?} domSanitizer
     * @param {?} render2
     */
    constructor(cd, el, inject, zone, dfs, dgs, app, domSanitizer, render2) {
        this.cd = cd;
        this.el = el;
        this.inject = inject;
        this.zone = zone;
        this.dfs = dfs;
        this.dgs = dgs;
        this.app = app;
        this.domSanitizer = domSanitizer;
        this.render2 = render2;
        this.auther = `Lucas Huang - QQ:1055818239`;
        this.version = '0.8.x';
        this.__component_type__ = 'DatagridComponent';
        /**
         * 启用性能优化版，默认为 false
         */
        this.fast = false;
        this.pos = 'relative';
        this.hostCls = false;
        /**
         * 使用主题
         */
        this.useThemes = true;
        // 用于存储用户个性化设置
        this.id = '';
        /**
         * 自动高度 - 启用此属性后，就是一个普普通通的 table , 不能编辑，不能排序，不能分页，不能... 就是一凡胎
         */
        this.useHtmlTable = false;
        /**
         * 自动高度
         */
        this.autoHeight = false;
        /**
         * 配合 autoHeight 一起使用，当此值大于0 时，且autoHeight 为true时，数据总行高达到最大高度时，将停止自动高度并使用内部滚动条
         */
        this.maxHeight = 0;
        /**
         * 显示边框
         */
        this.showBorder = false;
        /**
         * 启用斑马线
         */
        this.striped = true;
        /**
         * 宽度
         */
        this.width = 800;
        /**
         * 高度
         */
        this.height = 300;
        /**
         * 显示表头
         */
        this.showHeader = true;
        /**
         * 表头-单行高度
         */
        this.headerHeight = 35;
        /**
         * 表头折行
         */
        this.headerWrap = false;
        /**
         * 显示页脚
         */
        this.showFooter = false;
        /**
         * 页脚默认行高
         */
        this.footerHeight = 29;
        /**
         * 页脚数据来源, 默认为 client
         */
        this.footerDataFrom = 'client';
        /**
         * 合计行显示位置，默认为底部
         */
        this.footerPosition = 'bottom';
        /**
         * 行高
         */
        this.rowHeight = 29;
        /**
         * 设置grid 行高尺寸
         * sm: 小，md: 正常， lg: 大，xl: 超大
         */
        this._sizeType = 'sm';
        /**
         * 填充容器
         */
        this._fit = false;
        /**
         * 如果为真，则自动展开/收缩列的大小以适合网格宽度并防止水平滚动。
         */
        this._fitColumns = false;
        /**
         * 根据grid的宽度自动调整列宽度
         */
        this._autoFitColumns = false;
        /**
         * 禁用
         */
        this.disabled = false;
        /**
         * 滚动条显示模式，默认为 auto
         */
        this.scrollBarShowMode = 'auto';
        this.scrollBarOptions = {
            width: 18,
            height: 18
        };
        /**
         * 当滚动一直显示时，是否显示两端的箭头
         */
        this.showScrollArrow = false;
        /**
         * 可拖动列设置列宽
         */
        this.resizeColumn = true;
        /**
         * 显示行号
         */
        this.showLineNumber = false;
        /**
         * 行号表头字符
         */
        this.lineNumberTitle = '';
        /**
         * 行号宽度
         */
        this.lineNumberWidth = 36;
        /**
         * 鼠标滑过效果开关，默认开启
         */
        this.rowHover = true;
        /**
         * 允许编辑时，单击进入编辑状态; false为双击进入编辑
         */
        this.clickToEdit = true;
        this._lockPagination = false;
        /**
         * 分页信息
         */
        this.__pagination = true;
        /**
         * 分页组件自定义内容区模板
         */
        this.pagerContentTemplate = null;
        /**
         * 分页条对齐展示方式， left, right, center   默认为 right
         */
        this.pagerPos = 'right';
        /**
         * 分页条显示模式， default, simple
         */
        this.pagerViewMode = 'default';
        /**
         * 启用服务器端分页
         */
        this.pagerOnServer = true;
        /**
         * 每页记录数
         */
        this.pageList = [10, 20, 30, 50, 100];
        /**
         * 当前页码
         */
        this.pageIndex = 1;
        /**
         * 每页记录数
         */
        this.pageSize = 20;
        /**
         * 分页区高度
         */
        this.pagerHeight = 56;
        /**
         * 显示每页记录数
         */
        this.showPageList = false;
        /**
         * 显示分页信息
         */
        this.showPageInfo = true;
        /**
         * 显示页码
         */
        this.showPageNumber = true;
        /**
         * 显示页码最大数量
         */
        this.pagerLabelSize = 7;
        /**
         * 显示转至指定页码输入框
         */
        this.showGotoInput = false;
        /**
         * 启用跨页多选
         */
        this.enableMorePageSelect = false;
        /**
         * 显示选中列表
         */
        this.showSelectedList = false;
        /**
         * 单元格信息提示延时，默认 1000ms
         */
        this.cellTipTimer = 1000;
        /**
         * grid 内部处理分页状态
         */
        this.controlPaginationState = true;
        /**
         * 总记录数
         */
        this._total = 0;
        /**
         * 启用选中行
         */
        this.enableSelectRow = true;
        /**
         * 启用多选
         */
        this.multiSelect = false;
        /**
         * 启用多选时，是否显示checkbox
         */
        this.showCheckbox = false;
        /**
         * 显示全选checkbox
         */
        this.showAllCheckbox = false;
        /**
         * 当启用多选时，点击行选中，只允许且只有一行被选中。, 默认为 true
         */
        this.onlySelectSelf = true;
        /**
         * 启用多选且显示checkbox, 选中行同时钩选, 默认为 false
         */
        this.checkOnSelect = false;
        /**
         * 启用多选且显示checkbox, 钩选后选中行, 默认为 false
         */
        this.selectOnCheck = false;
        /**
         * 行选中模式，custom: 自定义， default: 仿Windows资源管理器选中
         * 注意： 此属性仅多选，显示复选框有效
         * 默认值： custom
         * addTime: 2021-12-14 by LUCAS HUANG
         */
        this.selectionMode = 'custom';
        /**
         * 单击行选中后，在次点击不会被取消选中状态;
         */
        this.keepSelect = true;
        /**
         * 当数据为空时，使用空白显示，且高度为一行的高度。 默认为 false
         */
        this.useBlankWhenDataIsEmpty = false;
        /**
         * 数据为空时的高度
         */
        this.emptyDataHeight = 240;
        /**
         * 空数据时，显示的提示文本
         */
        this.emptyMessage = '暂无数据';
        /**
         * 无数据时的模板
         */
        this.emptyTemplate = null;
        /**
         * 主键字段
         */
        this.idField = 'id';
        /**
         * 页脚数据
         */
        this._footerData = of([]);
        /**
         * 验证不通过时可以结束编辑
         */
        this.endEditByInvalid = true;
        /**
         * 列集合
         */
        this._columns = [];
        this._fields = [];
        /**
         * 禁止数据折行，默认值：true,即在一行显示，不折行。
         */
        this.nowrap = true;
        /**
         * 虚拟加载
         */
        this.virtualized = false;
        /**
         * 是否启用异步加载数据
         */
        this.virtualizedAsyncLoad = false;
        /**
         * 编辑方式： row(整行编辑)、cell(单元格编辑)；默认为 row
         */
        this.editMode = 'row';
        /**
         * 编辑状态
         */
        this._editable = false;
        /**
         * 启用可编辑单元格样式。
         */
        this.enableEditCellStyle = false;
        /**
         * 进入编辑状态时选是否选中文本；默认为 false
         * 仅文本框支持此特性
         */
        this.selectOnEditing = false;
        /**
         * 编辑器高度
         */
        this.editorHeight = 30;
        /**
         * 启用远端排序
         */
        this.remoteSort = false;
        this.hoverRowCls = 'f-datagrid-row-hover';
        /**
         * 允许拖拽列顺序
         */
        this.enableDragColumn = false;
        /**
         * 行分组面板高度，默认 50PX
         */
        this.rowGroupPanelHeight = 50;
        /**
         * 启用分组行
         */
        this.groupRows = false;
        /**
         * 启用行分组合计行
         */
        this.groupFooter = false;
        /**
         * 分组行是否展开，默认为 展开
         */
        this.expandGroupRows = true;
        /**
         * 合计数据显示位置
         * inGroupRow: 与分组在同一行，分别相关合计字段对齐
         * groupFooterRow: 在分组数据最后增加一行
         * 默认为 groupFooterRow
         */
        this.groupSummaryPosition = 'groupFooterRow';
        /**
         * 分组信息合并列数
         * 默认为 1
         */
        this.groupCellColSpan = 1;
        /**
         * 分组字段名称, 多字段分组以英文逗号分隔
         */
        this._groupField = '';
        this.groupFields$ = new BehaviorSubject([]);
        /**
         * 显示分组列
         */
        this.showGroupColumn = true;
        /**
         * 显示分组列面板。默认为 false
         */
        this._showRowGroupPanel = false;
        /**
         * 双击表头适应内容宽度
         */
        this.AutoColumnWidthUseDblclick = true;
        /**
         * 使用内部过滤器; 默认为 false
         */
        this.useDefaultFilter = false;
        /**
         * 过滤图标与排序图标合并，此属性与 enableFilterRow 互斥
         */
        this.enableSmartFilter = false;
        /**
         * 显示过滤行
         */
        this.enableFilterRow = false;
        /**
         * 服务器端过滤
         */
        this.remoteFilter = false;
        /**
         * 启用过滤条件显示条
         */
        this.showFilterBar = false;
        /**
         * 过滤条件汇总条高度，默认 32px
         */
        this.filterBarHeight = 32;
        this.filterRowHeight = 40;
        this.conditions = {};
        this.selectValue = null;
        this.checkValues = [];
        this.selectValues = [];
        /**
         * 合并单元格；先支持纵向合并
         */
        this.mergeCell = false;
        this.mergeFields = [];
        /**
         * 合并单元格数据启用客户端排序
         */
        this.enableClientSortForMergeCell = false;
        /**
         * 使用高级控制面板(列设置)
         */
        this.useControlPanel = false;
        /**
         * 启用简洁控制面板模式。默认为 false
         */
        this.enableSimpleMode = false;
        /**
         * 点击列设置图标，默认打开的控制面板
         */
        this.controlPanelMode = 'advanced';
        /**
         * 启用列设置方案
         */
        this.enableScheme = false;
        /**
         * 系统预制方案名称
         */
        this.defaultSchemeName = '系统预制';
        /**
         * 阻止click 事件冒泡
         */
        this.stopPropagation = true;
        /**
         * (202105 弃用)
         * 点击单元格进行编辑状态时，关闭其他Grid的编辑器。默认 false，
         * 多个列表存时，仅有一个列表中有编辑状态，其他列表结束编辑
         */
        this.closeOtherGridEditor = false;
        /**
         * 当数据源为空时，清空已选记录
         */
        this.clearSelectionsWhenDataIsEmpty = true;
        /**
         * 启用右键菜单，默认为 false
         */
        this.enableContextMenu = false;
        /**
         * 右键菜单数据
         */
        this.contextMenus = null;
        this.selectValueChange = new EventEmitter();
        this.checkValuesChange = new EventEmitter();
        this.selectValuesChange = new EventEmitter();
        this.beginEdit = new EventEmitter();
        this.endEdit = new EventEmitter();
        this.cancelEdited = new EventEmitter();
        this.scrollY = new EventEmitter();
        this.pageSizeChanged = new EventEmitter();
        this.pageChanged = new EventEmitter();
        this.loadSuccess = new EventEmitter();
        this.filterChanged = new EventEmitter();
        /**
         * 启用选中单元格高亮显示
         */
        this.enableHighlightCell = false;
        /**
         * 选中的数据始终从数据源中获取. 默认为 false
         */
        this.checkedRowsDataFromSource = false;
        /**
         * 当前单元格为只读时，使用tab 键跳到下个单元格时，是否允许进入编辑状态，默认为 false;
         * 默认情况下，当前单元格只读，按TAB跳到下个CELL 时，选中CELL ，回车进入编辑。
         * 开启后，下个单元格自动进入编辑状态。
         */
        this.editcellWhenTabKeydwon = false;
        /**
         * 单元格点击前事件
         */
        this.beforeClickCell = new EventEmitter();
        this.dblclickRow = new EventEmitter();
        this.selectChanged = new EventEmitter();
        this.unSelect = new EventEmitter();
        this.selectAll = new EventEmitter();
        this.unSelectAll = new EventEmitter();
        /**
         * 异步请求虚拟加载
         */
        this.scrollYLoad = new EventEmitter();
        this.checked = new EventEmitter();
        this.unChecked = new EventEmitter();
        this.checkAll = new EventEmitter();
        this.unCheckAll = new EventEmitter();
        this.checkedChange = new EventEmitter();
        this.columnSorted = new EventEmitter();
        this.rowClick = new EventEmitter();
        this.rowAppended = new EventEmitter();
        this.rowDeleted = new EventEmitter();
        this.rowUpdated = new EventEmitter();
        this.dataChange = new EventEmitter();
        /**
         * 最后一行的最后单元格回车处理事件
         */
        this.lastCellEnterHandler = new EventEmitter();
        /**
         * 分组字段变化后
         */
        this.groupFieldChange = new EventEmitter();
        /**
         * 拖动列改变列显示位置后触发
         */
        this.columnMoved = new EventEmitter();
        /**
         * 单元格点击事件
         */
        this.cellClick = new EventEmitter();
        this._loading = false;
        this._selectedRow = null;
        this.ds = {
            index: 0,
            rows: [],
            top: 0,
            bottom: 0,
            scrolling: false // 是否由滚动条触发
        };
        this.pagerOpts = {};
        this.editors = {};
        this.validators = [];
        this.footerWidth = 0;
        this.clickDelay = 150;
        this.resizeColumnInfo = {
            proxyLineEdge: 0,
            startWidth: 0,
            startX: 0,
            left: 0
        };
        this.ro = null;
        this.subscriptions = [];
        this.realHeaderHeight = 0;
        // 弹窗中使用时，窗口点击事件处理
        this.modalClickEvent = null;
        this.pending = false;
        this.scrollInstance = null;
        // 合并单元辅助信息
        this.mergeCellInfo = {};
        this.ignoreTarget = ['INPUT', 'SELECT', 'TEXTAREA'];
        this.clientFilterService = null;
        // DatagridSettingsService;
        /* 控制列字段名称: _datagrid-setting-control_ */
        this.ControlPanelFeild = '_datagrid-setting-control_';
        this._isResized = false;
        this.gridSize = { width: this.width + 'px', height: this.height + 'px' };
        // 客户端过滤时，是否过滤行发生变化
        this.clientFilterChanged = false;
        // style's ID
        this.styleSheetId = '';
        this.groupRowPanelPlaceholder = '';
        this.commonUtils = null;
        this.smartFilterService = null;
        this.smartFilterResult = { controlData: [], conditions: [] };
        this.smartFilterBarHeight = 32;
        this._active_datagrid_cls = 'datagrid-active';
        this._blured_datagrid_cls = 'datagrid-blurred';
        // 自定义grid样式，列表初始后，会添加一个自定义名称的样式
        this._custom_datagrid_cls = 'datagrid';
        // 焦点行索引，每次行点击后更新
        this.focusRowIndex = -1;
        this.documentBodyMouseDown = null;
        this.farrisInstances = null;
        this.currentPagerData = [];
        this.resizeTimer = null;
        this.debugSer = null;
        this.DATA_CHANGED_TIMER = null;
        this.formValidations = null;
        this.trackByRows = (/**
         * @param {?} index
         * @param {?} row
         * @return {?}
         */
        (index, row) => {
            if (row) {
                return row[this.idField] || index;
            }
            return index;
        });
        this.onDocumentMouseDown = (/**
         * @param {?} event
         * @return {?}
         */
        (event) => {
            /** @type {?} */
            const dgrid = event.target.closest('.f-datagrid');
            if (this.pending) {
                return false;
            }
            if (!dgrid) {
                this.activeDataGrid(false);
            }
            else {
                if (dgrid.id === this.id) {
                    return;
                }
            }
            if (this.currentCell) {
                if (Utils.hasDialogOpen()) {
                    /** @type {?} */
                    const indlg = this.inDialog();
                    /** @type {?} */
                    const currentTargetInDialog = event.target.closest('.modal-body');
                    if (indlg && currentTargetInDialog) {
                        if (indlg != currentTargetInDialog) {
                            return;
                        }
                    }
                    else {
                        return;
                    }
                }
                if (!this.currentCell.cellElement) {
                    return;
                }
                if (this.currentCell.isEditing) {
                    /** @type {?} */
                    const zoneClick = event.target['__zone_symbol__clickfalse'];
                    /** @type {?} */
                    const isBeBtn = event.target.closest('.bedesigner-toolbar');
                    /** @type {?} */
                    const isOldBeBtn = event.target.className.indexOf('beEleGridButton') > -1;
                    /** @type {?} */
                    const disableClickEvent = zoneClick && zoneClick.length && (event.target.closest('.f-section-in-mainsubcard') || isOldBeBtn || isBeBtn || event.target.closest('.datagrid-toolbars'));
                    if (disableClickEvent && !dgrid) {
                        event.target.style.pointerEvents = 'none';
                        event.stopPropagation();
                    }
                    /** @type {?} */
                    const _timer = disableClickEvent ? ((isBeBtn || isOldBeBtn) ? 50 : 200) : 0;
                    /** @type {?} */
                    const stopEditingRowIndex = this.currentCell.rowIndex;
                    this.currentCell.cellElement.closeEdit().pipe(debounceTime(_timer)).subscribe((/**
                     * @param {?} f
                     * @return {?}
                     */
                    f => {
                        if (this.currentCell && stopEditingRowIndex !== this.currentCell.rowIndex) {
                            return;
                        }
                        if (f) {
                            if (this.currentCell && this.currentCell.cellElement) {
                                DomHandler.removeClass(this.currentCell.cellElement, CELL_SELECTED_CLS);
                                DomHandler.removeClass(this.currentCell.cellElement, CELL_EDITING_CLS);
                            }
                            this.dfs.cancelSelectCell();
                            this.unbindDocumentEditListener();
                            this.currentCell = null;
                            if (disableClickEvent) {
                                zoneClick.forEach((/**
                                 * @param {?} n
                                 * @return {?}
                                 */
                                n => {
                                    n.callback(event);
                                }));
                                event.target.style.pointerEvents = 'auto';
                                if (isBeBtn || isOldBeBtn) {
                                    this.app.tick();
                                }
                            }
                        }
                    }));
                }
            }
        });
        this.styleSheetId = 'DATAGRID-' + Utils.uuid();
        this.localeService = this.inject.get(LocaleService);
        this.restService = this.inject.get(DATAGRID_REST_SERVICEE, null);
        this.colFormatSer = this.inject.get(ColumnFormatService);
        this.commonUtils = this.inject.get(CommonUtils, null);
        this.clientFilterService = new DatagridFilterService(dfs, this.localeService, inject);
        this.farrisInstances = this.inject.get(FarrisComponentInstanceService, null);
        this.debugSer = this.inject.get(DebugService, null);
        if (!this.debugSer) {
            this.debugSer = new DebugService();
        }
        if (this.debugSer.useDebugMode) {
            this.debugSer.useDebugMode();
        }
        this.smartFilterService = this.inject.get(DatagridSmartFilterService, null);
        this.idService = this.inject.get(IdService, null);
        this.dfs.localId = this.localeService.localeId;
        this.settingService = this.inject.get(GRID_SETTINGS_SERVICE, null);
        if (this.settingService) {
            /** @type {?} */
            const settingsHttp = this.inject.get(GRID_SETTINGS_HTTP, null);
            this.settingService.httpRestService = settingsHttp;
        }
        /** @type {?} */
        const dataSubscription = this.dfs.data$.subscribe((/**
         * @param {?} dataSource
         * @return {?}
         */
        (dataSource) => {
            this.cleanDom();
            /** @type {?} */
            const ds = Object.assign({}, dataSource);
            if (this.conditions && Object.keys(this.conditions).length && !this.remoteFilter && this.useDefaultFilter) {
                ds.rows = this.clientFilterService.executeFilter(ds.rows, this.conditions);
            }
            this.ds = ds;
            if (this.ds.rows && this.ds.rows.length) {
                this.data = this.dfs.getData();
                if (this.mergeCell && this.mergeFields && this.mergeFields.length) {
                    this.mergeCellInfo = this.dgs.getMergeCellInfo3(this.ds.rows, [...this.mergeFields]);
                }
                this.setPagerTotal();
                this.loadSuccess.emit(this.ds.rows);
            }
            else {
                this.data = [];
                this.currentCell = null;
                if (this.clearSelectionsWhenDataIsEmpty) {
                    this.clearAll();
                }
            }
            if (!this.ds.scrolling) {
                this.updateFooterData();
            }
            // 性能优化
            this.cd.detectChanges();
            if (this.DATA_CHANGED_TIMER) {
                clearTimeout(this.DATA_CHANGED_TIMER);
            }
            this.DATA_CHANGED_TIMER = setTimeout((/**
             * @return {?}
             */
            () => {
                if (this.autoHeight && this.maxHeight) {
                    if (this.maxHeight < 55) {
                        this.maxHeight = 60;
                    }
                    /** @type {?} */
                    const gridContainerEl = this.el.nativeElement.parentElement;
                    if (gridContainerEl.nodeName !== 'DIV') {
                        this.writeConsole('Datagrid父容器必须为DIV。');
                    }
                    else {
                        gridContainerEl.style.height = 'unset';
                        gridContainerEl.style.maxHeight = this.maxHeight + 'px';
                        gridContainerEl.style.minHeight = `${this.emptyDataHeight + this.realHeaderHeight}px`;
                    }
                }
                if (this.useBlankWhenDataIsEmpty) {
                    this.calculateGridSize(this.fit);
                }
            }), 100);
        }));
        this.subscriptions.push(dataSubscription);
        /** @type {?} */
        const columnGroupSubscription = this.dfs.columnGroup$.pipe(debounceTime(60)).subscribe((/**
         * @param {?} cg
         * @return {?}
         */
        cg => {
            if (cg) {
                this.colGroup = cg;
                this.footerWidth = cg.totalWidth;
                this.cd.detectChanges();
            }
        }));
        this.subscriptions.push(columnGroupSubscription);
        this.subscriptions.push(this.dfs.gridSize$.subscribe((/**
         * @param {?} cg
         * @return {?}
         */
        (cg) => {
            if (cg && cg.columnsGroup) {
                this.colGroup = cg.columnsGroup;
                this.cd.detectChanges();
            }
        })));
        this.initEditorAndValidator();
        /** @type {?} */
        const currentCellSubscription = this.dfs.currentCell$.subscribe((/**
         * @param {?} cell
         * @return {?}
         */
        (cell) => {
            this.currentCell = cell;
            if (cell && cell.cellRef) {
                cell.cellRef.isEditing = cell.isEditing;
            }
            this.unbindMoveSelectRowEvent();
            this.bindDocumentEditListener();
        }));
        this.dfs.selectRow$.subscribe((/**
         * @param {?} sr
         * @return {?}
         */
        (sr) => {
            if (!this.currentCell) {
                this.bindDocumentMoveSelectRowEvent();
            }
            this.selectedRow = sr;
            // this.cd.detectChanges();
            // this.selectChanged.emit(sr);
        }));
        this.subscriptions.push(currentCellSubscription);
        DatagridColumnsHelper.gridInstance = this;
        /** @type {?} */
        const filterChangedSubscription = this.dgs.onFilterChanged.subscribe((/**
         * @param {?} conditions
         * @return {?}
         */
        (conditions) => {
            // 更新缓存过滤条件
            this.conditions = conditions;
            this.clientFilterChanged = true;
            this.filterData(this.conditions);
        }));
        this.subscriptions.push(filterChangedSubscription);
        // this.initPaginationOptions();
        /** @type {?} */
        const footerDataSubscription = this.dgs.refreshFooterData.subscribe((/**
         * @return {?}
         */
        () => {
            this.updateFooterData();
            // this.cd.detectChanges();
        }));
        this.subscriptions.push(footerDataSubscription);
        this.dgs.commonUtils = this.commonUtils;
        this.dgs.focusRowChanged.subscribe((/**
         * @param {?} e
         * @return {?}
         */
        (e) => {
            if (e) {
                this.focusRowIndex = e.rowIndex;
            }
        }));
    }
    /**
     * @return {?}
     */
    get autoHeightCls() {
        return this.autoHeight;
    }
    /**
     * @return {?}
     */
    get sizeType() {
        return this._sizeType;
    }
    /**
     * @param {?} val
     * @return {?}
     */
    set sizeType(val) {
        this._sizeType = val;
    }
    /**
     * @return {?}
     */
    get fit() {
        return this._fit;
    }
    /**
     * @param {?} val
     * @return {?}
     */
    set fit(val) {
        this._fit = val;
        this.hostCls = val;
    }
    /**
     * @return {?}
     */
    get fitColumns() {
        return this._fitColumns;
    }
    /**
     * @param {?} val
     * @return {?}
     */
    set fitColumns(val) {
        if (this._fitColumns !== val) {
            this._fitColumns = val;
            if (val) {
                this.setFitColumns(val);
            }
            else {
                this.dfs.fitColumns(false);
                this.dfs.initColumns(false, true);
                this.restituteColumnsSize();
            }
        }
    }
    /**
     * @return {?}
     */
    get autoFitColumns() {
        return this._autoFitColumns;
    }
    /**
     * @param {?} val
     * @return {?}
     */
    set autoFitColumns(val) {
        this._autoFitColumns = val;
        this.dfs.updateProperty('autoFitColumns', val);
    }
    /**
     * 锁定分页条，锁定后页码点击无效
     * @return {?}
     */
    get lockPagination() {
        return this._lockPagination;
    }
    /**
     * @param {?} val
     * @return {?}
     */
    set lockPagination(val) {
        this._lockPagination = val;
        if (this.dgPager) {
            this.dgPager[val ? 'lock' : 'unlock']();
        }
    }
    /**
     * @param {?} val
     * @return {?}
     */
    set pagination(val) {
        if (this.__pagination !== val) {
            this.__pagination = val;
            this.dfs.updateProperty('pagination', val);
            this.dgs.showGridHeader.emit();
        }
    }
    /**
     * @return {?}
     */
    get pagination() {
        return this.__pagination;
    }
    /**
     * @return {?}
     */
    get total() {
        return this._total;
    }
    /**
     * @param {?} val
     * @return {?}
     */
    set total(val) {
        this._total = val;
        this.pagerOpts.totalItems = val;
        if (!this.pagination) {
            this.pagerOpts.itemsPerPage = val;
        }
        this.dfs.setTotal(val);
    }
    /**
     * @return {?}
     */
    get footerData() {
        return this._footerData;
    }
    /**
     * @param {?} rows
     * @return {?}
     */
    set footerData(rows) {
        if (rows && rows.subscribe) {
            this._footerData = rows;
        }
        else {
            this._footerData = of(rows || []);
        }
        if (rows) {
            this.setFooterHeight();
        }
        this.cd.detectChanges();
    }
    /**
     * @return {?}
     */
    get columns() {
        return this._columns;
    }
    /**
     * @param {?} values
     * @return {?}
     */
    set columns(values) {
        this._columns = this.correctColumns(values);
        this.dfs.updateProperty('columns', this._columns);
    }
    /**
     * @return {?}
     */
    get fields() {
        return this._fields;
    }
    /**
     * @param {?} cols
     * @return {?}
     */
    set fields(cols) {
        this._fields = cols;
        this.columns = cols;
        if (this.data) {
            this.columnsChanged(false, true);
        }
    }
    /**
     * @return {?}
     */
    get editable() {
        return this._editable;
    }
    /**
     * @param {?} v
     * @return {?}
     */
    set editable(v) {
        if (this._editable !== v) {
            this._editable = v;
            this.cd.detectChanges();
            this.dgs.updateEmptyStyle();
        }
    }
    /**
     * @return {?}
     */
    get groupField() {
        return this._groupField;
    }
    /**
     * @param {?} val
     * @return {?}
     */
    set groupField(val) {
        this._groupField = val || '';
        if (Array.isArray(this._groupField)) {
            this._groupField = this._groupField.join(',');
        }
        if (this._groupField) {
            this.groupFields$.next(this._groupField.split(','));
        }
        else {
            this.groupFields$.next([]);
        }
        this.dfs.updateProperty('groupField', this._groupField);
    }
    /**
     * @param {?} val
     * @return {?}
     */
    set showRowGroupPanel(val) {
        this._showRowGroupPanel = val;
    }
    /**
     * @return {?}
     */
    get showRowGroupPanel() {
        return this.groupRows && this._showRowGroupPanel;
    }
    /**
     * @return {?}
     */
    get loading() {
        return this._loading;
    }
    /**
     * @param {?} val
     * @return {?}
     */
    set loading(val) {
        this._loading = val;
        if (!this.cd['destroyed']) {
            this.cd.detectChanges();
        }
    }
    /**
     * @return {?}
     */
    get selections() {
        return this.dfs.getSelections();
    }
    /**
     * @return {?}
     */
    get checkeds() {
        return this.checkedRows;
    }
    /**
     * @return {?}
     */
    get checkedRows() {
        /** @type {?} */
        const chkeds = this.dfs.getCheckeds();
        if (this.enableMorePageSelect) {
            if (chkeds && chkeds.length) {
                if (!this.checkedRowsDataFromSource) {
                    return [...chkeds];
                }
                // 从数据源中获取最新数据
                return chkeds.map((/**
                 * @param {?} n
                 * @return {?}
                 */
                n => {
                    /** @type {?} */
                    const d = this.dfs.findRow(n.id);
                    if (d) {
                        n.data = d.data;
                    }
                    return n;
                }));
            }
        }
        else {
            if (this.data && this.data.length) {
                /** @type {?} */
                const temp = this.data.map((/**
                 * @param {?} n
                 * @return {?}
                 */
                n => n[this.idField]));
                if (!this.checkedRowsDataFromSource) {
                    return chkeds.filter((/**
                     * @param {?} n
                     * @return {?}
                     */
                    n => temp.includes(n.id)));
                }
                // 从数据源中获取最新数据
                return chkeds.filter((/**
                 * @param {?} n
                 * @return {?}
                 */
                n => temp.includes(n.id))).map((/**
                 * @param {?} n
                 * @return {?}
                 */
                n => {
                    /** @type {?} */
                    const d = this.dfs.findRow(n.id);
                    if (d) {
                        n.data = d.data;
                    }
                    return n;
                }));
            }
        }
        return [];
    }
    /**
     * @param {?} rows
     * @return {?}
     */
    set checkedRows(rows) {
        if (rows && rows.length) {
            rows = rows.map((/**
             * @param {?} r
             * @return {?}
             */
            r => {
                if (r.data) {
                    return r;
                }
                return {
                    id: r[this.idField],
                    data: r
                };
            }));
        }
        this.dfs.updateProperty('checkedRows', rows || []);
        this.initSelectOrChecked();
        this.cd.markForCheck();
    }
    /**
     * @return {?}
     */
    get selectedRow() {
        return this._selectedRow;
    }
    /**
     * @param {?} row
     * @return {?}
     */
    set selectedRow(row) {
        if (row) {
            if (this.selectValue != row.id) {
                this._selectedRow = row;
                this.selectValue = row.id;
                this.selectValueChange.emit(row.id);
                this.selectChanged.emit(row);
            }
        }
        else {
            this.unSelect.emit(this._selectedRow);
            this.selectValue = null;
            this.selectValueChange.emit('');
            this._selectedRow = null;
        }
        // this.cd.detectChanges();
    }
    /**
     * @param {?} $data
     * @return {?}
     */
    setCurrentPagerData($data) {
        this.currentPagerData = $data;
    }
    /**
     * @param {?} msg
     * @param {?=} type
     * @return {?}
     */
    writeConsole(msg, type = 'warn') {
        if (this.debugSer) {
            if (this.debugSer[type]) {
                this.debugSer[type](msg);
            }
            else {
                console[type](msg);
            }
        }
    }
    /**
     * @private
     * @return {?}
     */
    updateFooterData() {
        if ((this.showFooter || this.pagerContentTemplate) && this.footerDataFrom === 'client') {
            this.footerData = of(this.dfs.getFooterData(this.data));
        }
    }
    //#region Ng Event
    /**
     * @return {?}
     */
    ngDoCheck() {
        // if (!this.checkValues) {
        //     this.checkValues = [];
        // }
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.sms = new SelectionModeService(this);
        this.checkFilterStyle();
        if (this.useThemes) {
            this._checkSize();
        }
        this.checkOptions();
        this.groupRowPanelPlaceholder = this.localeService.getValue('datagrid.groupRow.tips');
        // this._flatColumns();
        // this.setHeaderHeight();
        if (this.smartFilterService) {
            if (this.enableSmartFilter && this.showFilterBar) {
                if (this.smartFilterResult && this.smartFilterResult.controlData && this.smartFilterResult.controlData.length) {
                    this.filterBarHeight = this.smartFilterBarHeight;
                }
                else {
                    this.filterBarHeight = 0;
                }
            }
            this.smartFilterService.filterChanged.subscribe((/**
             * @param {?} e
             * @return {?}
             */
            (e) => {
                if (!this.smartFilterResult && !e) {
                    return;
                }
                if (JSON.stringify(this.smartFilterResult) !== JSON.stringify(e)) {
                    this.smartFilterResult = e;
                    this.clientFilterChanged = true;
                    this.filterData(e.conditions);
                    if (!this.smartFilterResult || (this.smartFilterResult.controlData && !this.smartFilterResult.controlData.length)) {
                        this.onFilterBarResize(0);
                    }
                    else {
                        if (!this.filterBarHeight) {
                            this.onFilterBarResize(this.smartFilterBarHeight);
                        }
                    }
                }
            }));
        }
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        // 创建自定义style 容器
        // 
        this.setHeaderHeight();
        this.setPagerHeight();
        this.initBeforeEvents();
        if (this.fit) {
            this.setGridNewSizeWhenFit();
        }
        this.initState();
        if (this.el && this.farrisInstances) {
            this.farrisInstances.add(this.el.nativeElement, this);
        }
        if (!this.data || !this.data.length) {
            this.fetchData(1, this.pageSize).subscribe((/**
             * @param {?} res
             * @return {?}
             */
            res => {
                if (!res) {
                    return;
                }
                this.total = res.total;
                if (res.footer) {
                    this.footerData = res.footer;
                }
                this.loadData(res.items);
            }));
        }
        this.zone.runOutsideAngular((/**
         * @return {?}
         */
        () => {
            this.render2.addClass(this.dgContainer.nativeElement, this._custom_datagrid_cls);
            this.ro = new ResizeObserver((/**
             * @param {?} e
             * @return {?}
             */
            (e) => {
                /** @type {?} */
                const target = (/** @type {?} */ (e[0].target));
                if (target.style.display === 'none') {
                    return;
                }
                /** @type {?} */
                const _w = e[0].contentRect.width;
                if (!_w) {
                    return;
                }
                /** @type {?} */
                const _h = e[0].contentRect.height;
                /** @type {?} */
                const _floowW = Math.floor(_w);
                /** @type {?} */
                const _floorH = Math.floor(_h);
                /** @type {?} */
                const _roundW = Math.round(_w);
                /** @type {?} */
                const _roundH = Math.round(_h);
                /** @type {?} */
                const _ceilW = Math.ceil(_w);
                /** @type {?} */
                const _ceilH = Math.ceil(_h);
                if ((this.width === _floowW || this.width === _roundW || this.width === _ceilW) && (this.height === _floorH || this.height === _roundH || this.height === _ceilH)) {
                    this.dgs.restoreScrollbarPosition();
                    return;
                }
                if (this.resizeTimer) {
                    clearTimeout(this.resizeTimer);
                }
                this.resizeTimer = setTimeout((/**
                 * @return {?}
                 */
                () => {
                    this.calculateGridSize(this.fit);
                }), 100);
            }));
            this.ro.observe(this.el.nativeElement.parentElement);
            document.body.removeEventListener('mousedown', this.documentBodyMouseDown, true);
            document.body.addEventListener('mousedown', this.documentBodyMouseDown = (/**
             * @param {?} e
             * @return {?}
             */
            (e) => {
                if (!this.isEditing()) {
                    return;
                }
                /** @type {?} */
                const target = (/** @type {?} */ (e.target));
                if (target.closest('td.f-datagrid-cell') ||
                    target.closest('.date-overlay-container') ||
                    target.closest('.time-picker-overlay') ||
                    target.closest('.language-textbox-panel') ||
                    target.closest('.farris-notify') ||
                    target.closest('.comboPanel')) {
                    return;
                }
                this.onDocumentMouseDown(e);
            }), true);
        }));
        if (this.showFooter) {
            if (this.footerTemplate) {
                /** @type {?} */
                const footerDom = this.el.nativeElement.querySelector('.f-datagrid-footer');
                if (footerDom) {
                    this.footerHeight = this.el.nativeElement.querySelector('.f-datagrid-footer').offsetHeight;
                }
            }
        }
        if (this.fit) {
            if (this.el.nativeElement.parentElement) {
                this.el.nativeElement.parentElement.style.position = 'relative';
            }
            this.calculateGridSize(this.fit);
        }
        // 检查是否启用仿windows资源管理器中的多选模式
        if (this.selectionMode && this.selectionMode === 'default' && this.multiSelect) {
            this.sms.enableWindowsSelectionMode();
        }
        this.setCellStyle();
    }
    /**
     * @return {?}
     */
    ngAfterContentInit() {
        if (this.dgColumns && this.dgColumns.length) {
            this.columns = this.dgColumns.map((/**
             * @param {?} dgc
             * @return {?}
             */
            dgc => {
                return Object.assign({}, dgc);
            }));
        }
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    ngOnChanges(changes) {
        if (changes.data && !changes.data.isFirstChange()) {
            this.dfs.loadData(changes.data.currentValue);
            this.dgs.dataSourceChanged();
        }
        if (changes.showAllCheckbox !== undefined && !changes.showAllCheckbox.isFirstChange()) {
            if (changes.showAllCheckbox.currentValue != changes.showAllCheckbox.previousValue) {
                this.columnsChanged(false);
            }
        }
        if (changes.showCheckbox !== undefined && !changes.showCheckbox.isFirstChange()) {
            this.dfs.showCheckbox(changes.showCheckbox.currentValue);
        }
        if (changes.showLineNumber !== undefined && !changes.showLineNumber.isFirstChange()) {
            this.dfs.showLineNumber(changes.showLineNumber.currentValue);
        }
        if (changes.multiSelect !== undefined && !changes.multiSelect.isFirstChange()) {
            this.dfs.setMultiSelect(changes.multiSelect.currentValue);
        }
        if (changes.checkOnSelect !== undefined && !changes.checkOnSelect.isFirstChange()) {
            this.dfs.setCheckOnSelect(changes.checkOnSelect.currentValue);
        }
        if (changes.selectOnCheck !== undefined && !changes.selectOnCheck.isFirstChange()) {
            this.dfs.setSelectOnCheck(changes.selectOnCheck.currentValue);
        }
        if (changes.onlySelectSelf !== undefined && !changes.onlySelectSelf.isFirstChange()) {
            this.dfs.updateProperty('onlySelectSelf', changes.onlySelectSelf.currentValue);
        }
        if (changes.keepSelect !== undefined && !changes.keepSelect.isFirstChange()) {
            this.dfs.updateProperty('keepSelect', changes.keepSelect.currentValue);
        }
        if (changes.headerWrap !== undefined && !changes.headerWrap.isFirstChange()) {
            setTimeout((/**
             * @return {?}
             */
            () => {
                this.setHeaderHeight();
                this.cd.detectChanges();
                this.dfs.columnResizeEnd();
            }));
        }
        if (changes.nowrap !== undefined && !changes.nowrap.isFirstChange()) {
            this.checkNowrap();
            this.setRowHeight(false);
            this.dgs.cellContentWrapChanged.emit();
            this.dfs.updateProperty('nowrap', changes.nowrap.currentValue);
        }
        if (changes.multiSort !== undefined && !changes.multiSort.isFirstChange()) {
            this.dfs.updateProperty('multiSort', changes.multiSort.currentValue);
        }
        if (changes.editable !== undefined && !changes.editable.isFirstChange()) {
            this.dfs.updateProperty('editable', changes.editable.currentValue);
            if (!changes.editable.currentValue) {
                this.endCellEdit();
            }
            this.isSingleClick = null;
            // if (this.editable) {
            //     this.keepSelect = false;
            // } else {
            //     this.keepSelect = this.dfs._state.keepSelect;
            // }
            this.cd.detectChanges();
        }
        if (changes.showHeader !== undefined && !changes.showHeader.isFirstChange()) {
            this.dfs.updateProperty('showHeader', changes.showHeader.currentValue);
            this.headerHeightChange();
            this.cd.detectChanges();
        }
        if (changes.showFilterBar !== undefined && !changes.showFilterBar.isFirstChange()) {
            this.dfs.updateProperty('showFilterBar', changes.showFilterBar.currentValue);
            this.dgs.showGridHeader.emit(this.realHeaderHeight);
            // this.dgs.smartFilterBarExpand.emit();
            /** @type {?} */
            let fh = 0;
            if (this.conditions && this.conditions.length) {
                fh = 32;
            }
            this.onFilterBarResize(fh);
        }
        if (changes.showFooter !== undefined && !changes.showFooter.isFirstChange()) {
            this.dfs.updateProperty('showFooter', changes.showFooter.currentValue);
            // this.cd.detectChanges();
            this.calculateGridSize(this.fit);
        }
        if (changes.pagerOnServer !== undefined && !changes.pagerOnServer.isFirstChange()) {
            this.dfs.updateProperty('pagerOnServer', changes.pagerOnServer.currentValue);
            this.pagerOpts = Object.assign(this.pagerOpts, {
                remote: this.pagerOnServer
            });
        }
        if (changes.pageIndex !== undefined && !changes.pageIndex.isFirstChange()) {
            this.dfs.updateProperty('pageIndex', changes.pageIndex.currentValue);
            this.pagerOpts = Object.assign(this.pagerOpts, {
                currentPage: this.pageIndex
            });
        }
        if (changes.pageSize !== undefined && !changes.pageSize.isFirstChange()) {
            this.dfs.updateProperty('pageSize', changes.pageSize.currentValue);
            this.pagerOpts = Object.assign(this.pagerOpts, {
                itemsPerPage: this.pageSize
            });
        }
        if (changes.pageList !== undefined && !changes.pageList.isFirstChange()) {
            this.dfs.updateProperty('pageList', changes.pageList.currentValue);
            this.pagerOpts = Object.assign(this.pagerOpts, {
                pageList: this.pageList
            });
        }
        if (changes.columns !== undefined && !changes.columns.isFirstChange()) {
            this.columnsChanged();
        }
        if (changes.sizeType !== undefined && !changes.sizeType.isFirstChange()) {
            this._sizeType = changes.sizeType.currentValue;
            this.setRowHeight(true);
            this.dfs.updateProperty('rowHeight', this.rowHeight);
            this.setFooterHeight();
            this.refresh();
            this.dgs.onRowHeightChange(this.rowHeight);
        }
        if (changes.rowHeight && !changes.rowHeight.isFirstChange()) {
            this.setRowHeight(false);
        }
        if (changes.selectValue && !changes.selectValue.isFirstChange()) {
            this.selectRow(this.selectValue, false);
        }
        if (changes.checkValues && !changes.checkValues.isFirstChange()) {
            /** @type {?} */
            const checkIds = this.dfs.differenceBy(changes.checkValues.currentValue || [], changes.checkValues.previousValue || [], (/**
             * @param {?} v
             * @return {?}
             */
            (v) => v));
            if (checkIds && checkIds.length) {
                this.checkRows(checkIds, false);
            }
            /** @type {?} */
            const uncheckIds = this.dfs.differenceBy(changes.checkValues.previousValue || [], changes.checkValues.currentValue || [], (/**
             * @param {?} v
             * @return {?}
             */
            (v) => v));
            if (uncheckIds && uncheckIds.length) {
                this.unCheckRows(uncheckIds, false);
            }
            this.zone.runOutsideAngular((/**
             * @return {?}
             */
            () => {
                setTimeout((/**
                 * @return {?}
                 */
                () => {
                    this.checkValues = this.checkeds.map((/**
                     * @param {?} r
                     * @return {?}
                     */
                    r => r.id));
                    this.checkValuesChange.emit(this.checkValues);
                    this.checkedChange.emit(this.checkeds);
                    this.updateAllCheckboxStatus();
                }), 10);
            }));
        }
        if (changes.showGroupColumn && !changes.showGroupColumn.isFirstChange()) {
            this.toggleVisibleColumn(this.groupField.split(','), changes.showGroupColumn.currentValue);
            this.columnsChanged();
        }
        if (changes.autoFitColumns && !changes.autoFitColumns.isFirstChange()) {
            this.dfs.updateProperty('autoFitColumns', changes.autoFitColumns.currentValue);
        }
        // if (changes.fitColumns && !changes.fitColumns.isFirstChange()) {
        //     this.fitColumns = changes.fitColumns.currentValue;
        // }
        if (changes.groupRows && !changes.groupRows.isFirstChange()) {
            this.dfs.updateProperty('groupRows', changes.groupRows.currentValue);
            this.refresh();
        }
        if (changes.mergeCell && !changes.mergeCell.isFirstChange()) {
            this.refresh();
        }
        if (changes.mergeFields && !changes.mergeFields.isFirstChange()) {
            this.refresh();
        }
        if (changes.enableFilterRow && !changes.enableFilterRow.isFirstChange()) {
            this.dfs.updateProperty('enableFilterRow', changes.enableFilterRow.currentValue);
            if (this.showHeader) {
                this.setHeaderHeight();
                this.filterBarHeight = 32;
                this.dgs.toggleFilterRow.emit(this.enableFilterRow);
                this.dgs.showGridHeader.emit(this.realHeaderHeight);
                this.cd.detectChanges();
            }
        }
        if (changes.enableSmartFilter && !changes.enableSmartFilter.isFirstChange()) {
            this.dfs.updateProperty('enableSmartFilter', changes.enableSmartFilter.currentValue);
        }
        if (changes.enableDragColumn && !changes.enableDragColumn.isFirstChange()) {
            this.checkDragColumns();
        }
        if (changes.showRowGroupPanel && !changes.showRowGroupPanel.isFirstChange()) {
            this.dgs.smartFilterBarExpand.emit();
            this.dgs.showGridHeader.emit(this.realHeaderHeight);
        }
        if (changes.selectionMode && !changes.selectionMode.isFirstChange()) {
            this.sms.toggleMode();
        }
    }
    /**
     * @private
     * @return {?}
     */
    checkFilterStyle() {
        // 过滤行与智能过滤 同时启用时，将过滤行禁用
        if (this.enableFilterRow && this.enableSmartFilter) {
            this.enableFilterRow = false;
        }
    }
    /**
     * @private
     * @return {?}
     */
    _checkSize() {
        /** @type {?} */
        const themesKey = localStorage.getItem('gsp_rtf_themSKey');
        /** @type {?} */
        let st = 'sm';
        switch (themesKey) {
            case 'default':
                st = 'sm';
                break;
            case 'loose':
                st = 'md';
                break;
        }
        this.sizeType = st;
    }
    /**
     * @private
     * @return {?}
     */
    checkDragColumns() {
        if (this.isMultiHeader()) {
            this.enableDragColumn = false;
            // this.cd.detectChanges();
        }
    }
    /**
     * @private
     * @return {?}
     */
    checkOptions() {
        this.gridSize = { width: this.width + 'px', height: this.height + 'px' };
        if (!this.id) {
            this.id = 'FarrisDataGrid' + Utils.uuid().replace(/-/g, '').substr(0, 10);
            if (this.useControlPanel) {
                this.useControlPanel = false;
                this.writeConsole('启用列配置属性，未设置ID，此功能将禁用。');
            }
            this._custom_datagrid_cls = this.id;
        }
        else {
            this.styleSheetId = this.id + '_' + Utils.uuid().replace(/-/g, '').substr(0, 10);
            this._custom_datagrid_cls = this.styleSheetId;
        }
        if (this.settingService && this.useControlPanel) {
            this.settingService.registerGridInstance(this);
        }
        this.dgs.createStyleElement(this.styleSheetId);
        if (!this.idField) {
            throw new Error('The Datagrid\'s idField can\'t be Null. ');
        }
        this.checkNowrap();
        this.checkSortInfo();
        this.checkMergeCell();
        this.setCheckboxBehavior();
        this.initPaginationOptions();
        if (!this.columns) {
            this.columns = this.fields;
        }
        this.checkGroupHeaderColumns();
        // TFS: 356956
        this.checkGroupRowSetting();
        this.checkColumnsType();
        this.checkDragColumns();
        /** @type {?} */
        const _defaultSetting = (/**
         * @return {?}
         */
        () => {
            this._flatColumns();
            // this.setHeaderHeight();
            this.setRowHeight();
        });
        this.dfs.setinitialOptions({
            columns: this.columns,
            groupField: this.groupField,
            sortName: this.sortName,
            sortOrder: this.sortOrder
        });
        // 加载用户个性化设置 --》 列显示与列排序
        if (this.settingService && this.useControlPanel) {
            /** @type {?} */
            const settings$ = this.settingService.getSettings(this.id);
            if (!settings$) {
                _defaultSetting();
                return;
            }
            settings$.subscribe((/**
             * @param {?} sets
             * @return {?}
             */
            (sets) => {
                if (sets) {
                    this.userProfileSetting(sets);
                    this.setRowHeight(false);
                }
                if (this.data && this.data.length) {
                    this.dfs.updateProperty('data', this.data);
                }
                this.columnsChanged(this.groupRows && (this.data && !!this.data.length));
            }), (/**
             * @param {?} err
             * @return {?}
             */
            (err) => {
                _defaultSetting();
                this.writeConsole(err, 'error');
            }));
        }
        else {
            _defaultSetting();
        }
    }
    /**
     * @return {?}
     */
    refreshSelectedData() {
        if (this.selectedRow && this.selectedRow.id) {
            if (this.data && this.data.length) {
                /** @type {?} */
                const rd = this.data.find((/**
                 * @param {?} d
                 * @return {?}
                 */
                d => d[this.idField] === this.selectedRow.id));
                this.selectedRow.data = rd;
            }
            else {
                this.selectedRow = null;
            }
        }
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        this.unsubscribes();
        if (this.ro) {
            if (this.el.nativeElement.parentElement) {
                this.ro.unobserve(this.el.nativeElement.parentElement);
            }
            this.ro.disconnect();
        }
        if (this.documentRowKeydownHandler) {
            this.documentRowKeydownHandler();
        }
        this.currentCell = null;
        this.clientFilterService = null;
        this.cleanDom();
        // 移除动态的style
        this.dgs.removeStyleSheet();
        if (this.settingService && this.settingService.destroy) {
            this.settingService.destroy(this.id);
        }
        if (this.sms) {
            this.sms.destroy();
            this.sms = null;
        }
        document.body.removeEventListener('mousedown', this.documentBodyMouseDown, true);
        if (this.farrisInstances) {
            this.farrisInstances.destroy(this.el.nativeElement);
        }
        this._selectedRow = null;
        this.editors = {};
        DatagridColumnsHelper.gridInstance = null;
        this.unbindMoveSelectRowEvent();
        this.unbindDocumentEditListener();
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onClick(event) {
        if (this.showSelectedList && this.dgPager) {
            this.dgPager.closeSelectedList();
        }
        if (this.pending) {
            return;
        }
        /** @type {?} */
        const target = (/** @type {?} */ (event.target));
        if (target.nodeName === 'TEXTAREA' || target.nodeName === 'INPUT') {
            event.stopPropagation();
            return;
        }
        if (this.currentCell && this.currentCell.editor && this.currentCell.editor._editorClickEvent) {
            event.stopPropagation();
            return;
        }
        /*
        this.endCellEdit(event);
        this.dfs.cancelSelectCell();
        */
        if (this.stopPropagation) {
            event.stopPropagation();
            return;
        }
    }
    /**
     * @private
     * @return {?}
     */
    initPaginationOptions() {
        this.pagerOpts = {
            id: this.id ? this.id + '-pager_' + Utils.uuid() : 'farris-datagrid-pager_' + Utils.uuid(),
            itemsPerPage: this.pagination ? this.pageSize : this.total,
            currentPage: this.pageIndex,
            totalItems: this.total,
            pageList: this.pageList,
            remote: this.pagerOnServer
        };
    }
    /**
     * @private
     * @return {?}
     */
    updatePagerOptions() {
        this.pagerOpts = Object.assign(this.pagerOpts, {
            itemsPerPage: this.pageSize,
            currentPage: this.pageIndex,
            totalItems: this.total
        });
    }
    /**
     * @private
     * @return {?}
     */
    setPagerTotal() {
        /** @type {?} */
        const _total = this.data.length;
        if (this.pagination && this.total === 0 && this.virtualized) {
            this.pagerOpts.totalItems = _total;
        }
        else {
            if (!this.pagination) {
                this.pagerOpts.itemsPerPage = _total;
            }
        }
    }
    /**
     * @private
     * @param {?=} rows
     * @return {?}
     */
    setFooterHeight(rows) {
        if (this.showFooter && !this.footerTemplate) {
            rows = rows || this._footerData['value'];
            if (!rows || !rows.length) {
                return;
            }
            if (this.nowrap) {
                this.footerHeight = rows.length * this.footerHeight;
            }
            else {
                if (this['_footer_height_timer_']) {
                    clearTimeout(this['_footer_height_timer_']);
                }
                this['_footer_height_timer_'] = setTimeout((/**
                 * @return {?}
                 */
                () => {
                    /** @type {?} */
                    const topFooter = document.querySelector('.f-datagrid-footer-top');
                    /** @type {?} */
                    const bottomFooter = document.querySelector('.f-datagrid-footer-bottom');
                    if (topFooter) {
                        this.render2.setStyle(topFooter, 'height', '29px');
                        this.footerHeight = Math.max(...Array.from(topFooter.querySelectorAll('table')).map((/**
                         * @param {?} n
                         * @return {?}
                         */
                        n => n.offsetHeight)));
                        this.render2.setStyle(topFooter, 'height', this.footerHeight + 'px');
                    }
                    else {
                        if (bottomFooter) {
                            this.render2.setStyle(bottomFooter, 'height', '29px');
                            this.footerHeight = Math.max(...Array.from(bottomFooter.querySelectorAll('table')).map((/**
                             * @param {?} n
                             * @return {?}
                             */
                            n => n.offsetHeight)));
                            this.render2.setStyle(bottomFooter, 'height', this.footerHeight + 'px');
                        }
                    }
                    this.dfs.columnResizeEnd();
                }), 100);
            }
        }
    }
    /**
     * @return {?}
     */
    customStyleKey() {
        return `.${this._custom_datagrid_cls}`;
    }
    /**
     * @private
     * @param {?=} useSizeType
     * @return {?}
     */
    setRowHeight(useSizeType = false) {
        /** @type {?} */
        const _rowHeight = SIZE_TYPE[this._sizeType].row;
        /** @type {?} */
        const _rh = 29;
        if (useSizeType) {
            this.rowHeight = _rowHeight;
        }
        else {
            this.rowHeight = _rowHeight > this.rowHeight ? _rowHeight : this.rowHeight;
        }
        this.filterRowHeight = SIZE_TYPE[this._sizeType].pager;
        /** @type {?} */
        const key1 = `${this.customStyleKey()}.f-datagrid-body-row, ${this.customStyleKey()} .f-datagrid-cell`;
        /** @type {?} */
        const key2 = `${this.customStyleKey()} .f-datagrid-cell-content`;
        this.dgs.removeCssRule(key1);
        this.dgs.removeCssRule(key2);
        if (this.rowHeight !== _rh && this.nowrap) {
            /** @type {?} */
            const rowHeightCSS = [
                `${key1} { height: ${this.rowHeight}px }`,
                `${key2} { height: ${this.rowHeight}px; line-height: ${this.rowHeight}px }`
            ];
            this.dgs.appendCssRules(rowHeightCSS);
        }
    }
    /**
     * @return {?}
     */
    initSelectOrChecked() {
        /** @type {?} */
        const _data = this.dfs.getCurrentPageData();
        if (!this.enableMorePageSelect && this.multiSelect) {
            // this.clearAll();
            if (this.checkeds && this.checkeds.length) {
                this.checkeds.forEach((/**
                 * @param {?} r
                 * @return {?}
                 */
                r => {
                    if (!_data.find((/**
                     * @param {?} n
                     * @return {?}
                     */
                    n => n[this.idField] == r.id))) {
                        this.unCheckRow(r.id, false);
                    }
                }));
            }
            else {
                this.clearCheckeds();
            }
        }
        if (this.selectValue) {
            if (_data.find((/**
             * @param {?} n
             * @return {?}
             */
            n => n[this.idField] == this.selectValue))) {
                this.selectRow(this.selectValue, false);
                this.refreshSelectedData();
            }
        }
        if (this.multiSelect) {
            if (this.checkValues && this.checkValues.length) {
                /** @type {?} */
                const chkids = this.checkeds.map((/**
                 * @param {?} r
                 * @return {?}
                 */
                r => r.id));
                /** @type {?} */
                const diffIds = this.dfs.difference(chkids, this.checkValues);
                if (diffIds.length) {
                    this.checkRows(diffIds, false);
                }
                else {
                    this.checkValues = [];
                }
            }
            else {
                this.checkValues = [];
            }
            this.checkValues = this.checkeds.map((/**
             * @param {?} r
             * @return {?}
             */
            r => r.id));
            if (!this._isResized || this.virtualized) {
                this.checkValuesChange.emit(this.checkValues);
                this.checkedChange.emit(this.checkeds);
            }
            this.updateAllCheckboxStatus(_data);
        }
    }
    /**
     * @private
     * @param {?=} _data
     * @return {?}
     */
    updateAllCheckboxStatus(_data) {
        if (!_data) {
            _data = this.dfs.getCurrentPageData();
        }
        /** @type {?} */
        let checkAllStatus = 0;
        if (this.showAllCheckbox) {
            /** @type {?} */
            const allDataIDs = _data.map((/**
             * @param {?} r
             * @return {?}
             */
            r => r[this.idField]));
            /** @type {?} */
            const newCheckValues = allDataIDs.filter((/**
             * @param {?} n
             * @return {?}
             */
            n => this.checkValues.includes(n)));
            if (newCheckValues && newCheckValues.length) {
                /** @type {?} */
                const isSame = !this.dfs.difference(allDataIDs, this.checkValues).length;
                if (!this.checkValues || !this.checkValues.length) {
                    // 没有选中的数据
                    checkAllStatus = 0;
                }
                else if (isSame) { // this.checkValues.length === this.data.length ||
                    // 全部选中
                    checkAllStatus = 1;
                }
                else if (!isSame) { // this.checkValues.length !== this.data.length &&
                    // 有选中的数据，但不是全部选中
                    checkAllStatus = 2;
                }
            }
        }
        this.dgs.changeCheckAllStatus.emit(checkAllStatus);
    }
    // 当单选并显示复选框时，默认将 checkOnSelect, selectOnCheck 设置为 true;
    /**
     * @private
     * @return {?}
     */
    setCheckboxBehavior() {
        if (!this.multiSelect && this.showCheckbox) {
            // TFS: 380899
            // this.checkOnSelect = true;
            // this.selectOnCheck = true;
        }
    }
    /**
     * @private
     * @return {?}
     */
    _flatColumns() {
        this.flatColumns = flatten(this.columns).filter((/**
         * @param {?} col
         * @return {?}
         */
        (col) => !col.colspan && this.columnIsVisible(col)));
        if (this.isMultiHeader() && this.fast) {
            this.flatColumns = this.dfs.getGroupColumns(this.columns[0]);
        }
    }
    /**
     * @param {?} col
     * @return {?}
     */
    columnIsVisible(col) {
        return DatagridColumnsHelper.columnIsVisible(col, this);
    }
    // 添加列设置
    /**
     * @private
     * @return {?}
     */
    addControlCol() {
        if (this.useControlPanel) {
            /** @type {?} */
            const controlCol = this.columns[0].find((/**
             * @param {?} n
             * @return {?}
             */
            n => n.field === this.ControlPanelFeild));
            if (!controlCol) {
                /** @type {?} */
                const cp = { field: this.ControlPanelFeild, width: 24, rowspan: this.columns.length, fixed: 'right', visible: true };
                // 2021-05-24 启用过滤行后出错
                // if (this.enableFilterRow) {
                //     cp.rowspan += 1;
                // }
                this.columns[0].push(cp);
            }
            else {
                controlCol.visible = true;
            }
        }
    }
    /**
     * @private
     * @return {?}
     */
    checkGroupHeaderColumns() {
        if (this.isMultiHeader()) {
            /** @type {?} */
            const allCols = flatten(this.columns);
            DatagridColumnsHelper.checkGroupHeaderColumnVisible(allCols);
        }
    }
    // 检查列集合: [] -> [[]]
    /**
     * @private
     * @param {?} values
     * @return {?}
     */
    correctColumns(values) {
        if (values && values.length && !Array.isArray(values[0])) {
            return [values];
        }
        else {
            return values || [];
        }
    }
    /**
     * @private
     * @return {?}
     */
    checkColumnsType() {
        if (this.columns && this.columns.length) {
            // if (!Array.isArray(this.columns[0])) {
            //     this.columns = [ this.columns ];
            // }
            this.addControlCol();
            this.columns.forEach((/**
             * @param {?} cols
             * @param {?} columnsIndex
             * @return {?}
             */
            (cols, columnsIndex) => {
                cols.forEach((/**
                 * @param {?} col
                 * @param {?} index
                 * @return {?}
                 */
                (col, index) => {
                    if (!col.field) {
                        col.field = `farris-datagrid-column_${columnsIndex}_${index}`;
                    }
                    if (!col.valign) {
                        col.valign = 'middle';
                    }
                    if (col.width === undefined || col.width === null) {
                        col.width = 100;
                    }
                    else {
                        if (typeof col.width === 'string') {
                            col.width = parseInt(col.width, 10);
                        }
                    }
                    // 记录原始宽度
                    if (!col.originalWidth) {
                        col.originalWidth = col.width;
                    }
                    if (col.formatter && typeof col.formatter !== 'function' && Object.keys(col.formatter).length === 0) {
                        col.formatter = null;
                    }
                    if (!this.showGroupColumn && this.groupRows) {
                        this.toggleVisibleColumn(this.groupField.split(','), false);
                    }
                    // 过滤行检查
                    if (col.filter) {
                        if (typeof col.filter === 'boolean') {
                            if (col.field) {
                                col.filter = this.clientFilterService.createColumnFilterOptions(col);
                            }
                            else {
                                col.filter = false;
                            }
                        }
                        else {
                            if (!col.filter.options || !Object.keys(col.filter.options).length) {
                                switch (col.filter.type) {
                                    case ColumnFilterType.enum:
                                        col.filter.options = col.formatter['options'];
                                        break;
                                    case ColumnFilterType.date:
                                        col.filter.options = { dateFormat: 'yyyy-MM-dd', returnFormat: 'yyyy-MM-dd' };
                                        break;
                                    case ColumnFilterType.datetime:
                                        col.filter.options = { dateFormat: 'yyyy-MM-dd HH:mm:ss', returnFormat: 'yyyy-MM-dd HH:mm:ss' };
                                        break;
                                }
                            }
                        }
                    }
                    // 兼容 hidden 2021-05-31
                    if (col['hidden'] !== undefined && col.visible === undefined) {
                        if (typeof col['hidden'] === 'boolean') {
                            col.visible = !col['hidden'];
                        }
                        else {
                            if (typeof col['hidden'] === 'function') {
                                col.visible = (/**
                                 * @return {?}
                                 */
                                () => {
                                    /** @type {?} */
                                    const r = col['hidden'].bind(this);
                                    return !r;
                                });
                            }
                        }
                    }
                }));
            }));
        }
    }
    /**
     * @private
     * @return {?}
     */
    checkGroupRowSetting() {
        // 如果启用分组行，但未设置分组字段时，将关闭分组行功能
        // if (this.groupRows) {
        //     if (!this.groupField) {
        //         this.groupRows = false;
        //     }
        // }
    }
    /**
     * @private
     * @return {?}
     */
    checkMergeCell() {
        if (this.mergeCell) {
            if (!this.mergeFields || !this.mergeFields.length) {
                this.mergeCell = false;
            }
            else {
                this.virtualized = false;
                this.virtualizedAsyncLoad = false;
            }
        }
    }
    /**
     * @private
     * @return {?}
     */
    checkSortInfo() {
        if (this.sortName) {
            if (!this.sortOrder) {
                this.sortOrder = this.sortName.split(',').map((/**
                 * @return {?}
                 */
                () => 'asc')).join(',');
            }
        }
    }
    /**
     * @private
     * @return {?}
     */
    checkNowrap() {
        // 启用折行后，虚拟加载特性失效
        if (!this.nowrap) {
            this.virtualized = false;
        }
    }
    /**
     * @return {?}
     */
    setHeaderHeight() {
        this.realHeaderHeight = 0;
        if (this.showHeader) {
            // if (!this.headerWrap) {
            //     this.realHeaderHeight = this.columns.length * this.headerHeight;
            //     if (this.enableFilterRow) {
            //         this.realHeaderHeight += this.filterRowHeight;
            //     }
            // } else {
            //     const gridHeaderEl = this.el.nativeElement.querySelector('.f-datagrid-header');
            //     if (gridHeaderEl) {
            //         const trs = gridHeaderEl.querySelectorAll('table tr:not(.f-datagrid-filter-row)');
            //         trs.forEach(n => {
            //             n.style.height = 'auto';
            //             Array.from(n.children).forEach((a: any) => a.style.height = 'auto');
            //         });
            //         // const h = Math.max(...Array.from(trs).map((n: any) => n.clientHeight));
            //         // this.realHeaderHeight = h;
            //         const tableEl = gridHeaderEl.querySelector('table');
            //         if(tableEl) {
            //             this.realHeaderHeight = tableEl.offsetHeight;
            //         }
            //     }
            // }
            /** @type {?} */
            const gridHeaderEl = this.el.nativeElement.querySelector('.f-datagrid-header');
            if (!this.headerWrap) {
                const { header: hh, pager: ph } = SIZE_TYPE[this._sizeType];
                this.headerHeight = hh;
                this.realHeaderHeight = this.columns.length * this.headerHeight;
                if (this.enableFilterRow) {
                    // 解决宽松版下
                    this.filterRowHeight = ph;
                    this.realHeaderHeight += this.filterRowHeight;
                }
                if (gridHeaderEl) {
                    gridHeaderEl.style.minHeight = this.realHeaderHeight + 'px';
                }
            }
            else {
                if (gridHeaderEl) {
                    this.render2.removeStyle(gridHeaderEl, 'minHeight');
                    /** @type {?} */
                    const trs = gridHeaderEl.querySelectorAll('table tr:not(.f-datagrid-filter-row)');
                    trs.forEach((/**
                     * @param {?} n
                     * @return {?}
                     */
                    n => {
                        n.style.height = 'auto';
                        Array.from(n.children).forEach((/**
                         * @param {?} a
                         * @return {?}
                         */
                        (a) => a.style.height = 'auto'));
                    }));
                    /** @type {?} */
                    const tableEls = Array.from(gridHeaderEl.querySelectorAll('table'));
                    if (tableEls) {
                        /** @type {?} */
                        const heights = tableEls.map((/**
                         * @param {?} t
                         * @return {?}
                         */
                        (t) => t.offsetHeight));
                        /** @type {?} */
                        const maxHeight = Math.max(...heights);
                        this.realHeaderHeight = maxHeight;
                        gridHeaderEl.style.minHeight = this.realHeaderHeight + 'px';
                    }
                }
            }
        }
        return this.realHeaderHeight;
    }
    // 列集合变化
    /**
     * @param {?=} reloadData
     * @param {?=} useColumnSettingWidth
     * @return {?}
     */
    columnsChanged(reloadData = true, useColumnSettingWidth = null) {
        /** @type {?} */
        const _useColumnSettingWidth = useColumnSettingWidth === null ? this.fitColumns : useColumnSettingWidth;
        this.dfs.updateProperty('expandGroupRows', this.expandGroupRows);
        this.checkColumnsType();
        this._flatColumns();
        this.headerHeightChange();
        this.dfs.updateProperty('flatColumns', this.flatColumns);
        this.dfs.updateColumns(this.columns, _useColumnSettingWidth, true);
        // this.colGroup = this.dfs.getState().columnsGroup;
        // 动态列合计行
        this.updateFooterData();
        this.dgs.columnsChanged.emit({ scrollToLeft: reloadData });
        if (reloadData) {
            if (this['_COLUMNS_CHANAGED_TIMER_']) {
                clearTimeout(this['_COLUMNS_CHANAGED_TIMER_']);
            }
            this['_COLUMNS_CHANAGED_TIMER_'] = setTimeout((/**
             * @return {?}
             */
            () => {
                this.refresh();
            }), 60);
        }
        this.setCellStyle();
    }
    // 列头变化
    /**
     * @private
     * @return {?}
     */
    headerHeightChange() {
        this.setHeaderHeight();
        this.dgs.showGridHeader.emit(this.realHeaderHeight);
    }
    /**
     * 判断是否在弹出的窗口中；返回undefind 说明没有在弹出的窗口，否则视为当前列表在弹出窗口使用
     * @return {?}
     */
    inDialog() {
        return this.el.nativeElement.closest('.modal-body');
    }
    //#endregion
    //#region Init
    /**
     * 初始编辑器与验证器
     * @private
     * @return {?}
     */
    initEditorAndValidator() {
        /** @type {?} */
        const Editors = this.inject.get(GRID_EDITORS, []);
        if (Editors.length) {
            Editors.forEach((/**
             * @param {?} ed
             * @return {?}
             */
            ed => {
                this.editors[ed.name] = ed.value;
            }));
        }
        /** @type {?} */
        const _validators = this.inject.get(GRID_VALIDATORS, []);
        if (_validators && _validators.length) {
            // _validators.forEach(vr => {
            //     this.validators[vr.name] = vr.value;
            // });
            this.validators = _validators;
        }
    }
    /**
     * @return {?}
     */
    setPagerHeight() {
        if (!this.useHtmlTable) {
            if (!this.pagination) {
                this.pagerHeight = 0;
            }
            else {
                this.pagerHeight = this.dgPager && this.dgPager.outerHeight || 40;
            }
        }
    }
    /**
     * @private
     * @return {?}
     */
    initState() {
        this.data = this.data || [];
        /** @type {?} */
        let sta = {};
        Object.keys(this).forEach((/**
         * @param {?} k
         * @return {?}
         */
        (k) => {
            if (!IgnoreProperties.includes(k)) {
                sta[k] = this[k];
            }
        }));
        this.dfs.initState(Object.assign({}, sta, { fitColumns: this.fitColumns, fit: this.fit, groupField: this._groupField }));
        sta = null;
    }
    /**
     * @private
     * @param {?=} fitColumns
     * @return {?}
     */
    setFitColumns(fitColumns = true) {
        if (this.columns) {
            this.dfs.fitColumns(fitColumns);
        }
    }
    /**
     * @private
     * @return {?}
     */
    setGridNewSizeWhenFit() {
        /** @type {?} */
        const parent = this.el.nativeElement.parentElement;
        if (parent) {
            const { width, height } = parent.getBoundingClientRect();
            /** @type {?} */
            const padding = this.getElementPadding(parent);
            /** @type {?} */
            const border = this.getElementBorderWidth(parent);
            /** @type {?} */
            let m = 'floor';
            if (this.maxHeight && this.autoHeight) {
                m = 'ceil';
            }
            this.width = Math[m](Math.ceil(width) - border.left - border.right - padding.left - padding.right);
            this.height = Math[m](Math.ceil(height) - border.top - border.bottom - padding.top - padding.bottom);
            if (this.maxHeight && this.autoHeight) {
                this.height += 1;
            }
            if (!this.height) {
                this.height = this.dfs.getState().height || 300;
            }
            if (!this.width) {
                this.width = this.dfs.getState().width || 800;
            }
        }
    }
    /**
     * @param {?=} fit
     * @return {?}
     */
    calculateGridSize(fit = true) {
        if (this.useHtmlTable) {
            return;
        }
        /** @type {?} */
        const setNewSize = (/**
         * @return {?}
         */
        () => {
            /** @type {?} */
            let h = this.height;
            if (this.useBlankWhenDataIsEmpty && (!this.data || !this.data.length)) {
                h = this.emptyDataHeight + this.realHeaderHeight;
            }
            if (this.gridSize.height === h + 'px' && this.gridSize.width === this.width + 'px') {
                return;
            }
            this.gridSize = { width: this.width + 'px', height: h + 'px' };
            this.dfs.resize({ width: this.width, height: h });
        });
        if (fit) {
            this.setGridNewSizeWhenFit();
            if (this.width && this.height) {
                this._isResized = true;
                setNewSize();
                this._isResized = false;
                if (!this.cd['destroyed']) {
                    this.cd.detectChanges();
                }
            }
        }
        else {
            setNewSize();
        }
    }
    /**
     * @private
     * @return {?}
     */
    initBeforeEvents() {
        if (!this.beforeSelect) {
            this.beforeSelect = (/**
             * @return {?}
             */
            () => of(true));
        }
        if (!this.beforeUnselect) {
            this.beforeUnselect = (/**
             * @return {?}
             */
            () => of(true));
        }
        if (!this.beforeCheck) {
            this.beforeCheck = (/**
             * @return {?}
             */
            () => of(true));
        }
        if (!this.beforeUncheck) {
            this.beforeUncheck = (/**
             * @return {?}
             */
            () => of(true));
        }
        if (!this.beforeSortColumn) {
            this.beforeSortColumn = (/**
             * @return {?}
             */
            () => of(true));
        }
        if (!this.beforeEdit) {
            this.beforeEdit = (/**
             * @return {?}
             */
            () => of(true));
        }
        if (!this.afterEdit) {
            this.afterEdit = (/**
             * @return {?}
             */
            () => of(true));
        }
    }
    //#endregion
    //#region 快捷键
    /**
     * @private
     * @return {?}
     */
    unbindMoveSelectRowEvent() {
        if (this.documentRowKeydownHandler) {
            this.documentRowKeydownHandler();
            this.documentRowKeydownHandler = null;
        }
    }
    /**
     * @private
     * @return {?}
     */
    bindDocumentMoveSelectRowEvent() {
        this.unbindMoveSelectRowEvent();
        this.unbindDocumentEditListener();
        this.documentRowKeydownHandler = this.render2.listen(document, 'keydown', (/**
         * @param {?} e
         * @return {?}
         */
        (e) => {
            // e.preventDefault();
            if (!this.isActived()) {
                return;
            }
            // has loading
            if (document.querySelectorAll('farris-loading').length) {
                return;
            }
            if (e.target) {
                /** @type {?} */
                const targetName = ((/** @type {?} */ (e.target))).nodeName;
                if (this.ignoreTarget.indexOf(targetName) > -1) {
                    return;
                }
            }
            if (e.keyCode === 40 || e.keyCode === 38) {
                e.preventDefault();
            }
            switch (e.keyCode) {
                case 40:
                    this.selectNextRow();
                    break;
                case 38:
                    this.selectPrevRow();
                    break;
            }
        }));
    }
    /**
     * @private
     * @return {?}
     */
    bindEditListenerInModal() {
        // 弹窗中事件处理
        if (Utils.hasDialogOpen()) {
            /** @type {?} */
            const modalElement = this.inDialog();
            if (modalElement) {
                /** @type {?} */
                const _fmodal = modalElement.closest('.farris-modal');
                if (_fmodal) {
                    this.modalClickEvent = this.render2.listen(_fmodal, 'click', (/**
                     * @return {?}
                     */
                    () => {
                        this.endEditing();
                        this.currentCell = null;
                    }));
                }
            }
        }
    }
    /**
     * @private
     * @return {?}
     */
    bindDocumentEditListener() {
        this.unbindDocumentEditListener();
        /*
               if (!this.documentCellClickHandler) {
                   this.bindEditListenerInModal();
                   this.documentCellClickHandler = (event) => {
                       if (this.pending) {
                           return false;
                       }
                       if (this.currentCell) {
                           if (Utils.hasDialogOpen()) {
                               const indlg = this.inDialog();
                               const currentTargetInDialog = event.target.closest('.modal-body');
                               if (indlg && currentTargetInDialog) {
                                   if (indlg != currentTargetInDialog) {
                                       return;
                                   }
                               } else {
                                   return;
                               }
                           }
                           // DomHandler.removeClass(this.currentCell.cellElement, CELL_SELECTED_CLS);
       
                           // if (this.currentCell.isEditing) {
                           //     // this.dfs.endEditCell();
                           //     this.currentCell.cellElement.closeEdit();
                           // }
                           // this.dfs.cancelSelectCell();
                           // this.unbindDocumentEditListener();
       
                           if (this.currentCell.isEditing) {
                               // this.dfs.endEditCell();
                               this.currentCell.cellElement.closeEdit().subscribe(f => {
                                   if (f) {
                                       DomHandler.removeClass(this.currentCell.cellElement, CELL_SELECTED_CLS);
                                       DomHandler.removeClass(this.currentCell.cellElement, CELL_EDITING_CLS);
                                       this.dfs.cancelSelectCell();
                                       this.unbindDocumentEditListener();
                                       this.currentCell = null;
                                   }
                               });
                           }
                       }
                   };
                   this.docuemntCellClickEvents = this.render2.listen(document, 'click', this.documentCellClickHandler);
               }
       */
        if (!this.documentCellKeydownHandler) {
            this.documentCellKeydownHandler = (/**
             * @param {?} event
             * @return {?}
             */
            (event) => {
                if (!event.target.closest('.f-datagrid') && event.target.nodeName !== 'BODY') {
                    return;
                }
                if (this.isActived()) {
                    this.onKeyDownEvent(event);
                }
            });
            this.documentCellKeydownEvents = this.render2.listen(document, 'keydown', this.documentCellKeydownHandler);
        }
    }
    /**
     * @private
     * @return {?}
     */
    unbindDocumentEditListener() {
        if (this.documentCellClickHandler) {
            this.docuemntCellClickEvents();
            this.documentCellClickHandler = null;
        }
        if (this.documentCellKeydownHandler) {
            this.documentCellKeydownEvents();
            this.documentCellKeydownHandler = null;
        }
        if (this.modalClickEvent) {
            this.modalClickEvent();
            this.modalClickEvent = null;
        }
    }
    /**
     * @private
     * @param {?} e
     * @return {?}
     */
    onKeyDownEvent(e) {
        // if (e.ctrlKey || e.shiftKey || !this.editable) {
        //     return;
        // }
        // if (!e.target.closest('.f-datagrid')) {
        //     return;
        // }
        if (this.disabled) {
            return;
        }
        /** @type {?} */
        const keyCode = e.keyCode;
        if (this.currentCell && !this.currentCell.isEditing) {
            if ([13, 40, 37, 38, 39, 9].indexOf(keyCode) > -1) {
                e.preventDefault();
            }
            switch (keyCode) {
                case 32: // 空格
                    if (this.currentCell && this.currentCell.column.onSpaceHandler) {
                        e.stopPropagation();
                        this.currentCell.column.onSpaceHandler({ grid: this, cell: this.currentCell, event: e });
                    }
                    break;
                case 13: // Enter
                    if (this.currentCell) {
                        /** @type {?} */
                        const fn = this.currentCell.cellElement['editCell'];
                        if (fn) {
                            fn.apply(this.currentCell.cellElement);
                        }
                        else {
                            if (this.currentCell.column.onEnterHandler) {
                                e.stopPropagation();
                                this.currentCell.column.onEnterHandler({ grid: this, cell: this.currentCell, event: e });
                            }
                        }
                    }
                    break;
                case 40: // ↓
                    this.selectNextCell('down', e);
                    break;
                case 38: // ↑
                    this.selectNextCell('up', e);
                    break;
                case 39: // →
                    this.selectNextCell('right', e);
                    break;
                case 37: // ←
                    this.selectNextCell('left', e);
                    break;
                case 9: // Tab
                    if (e.shiftKey) {
                        this.selectNextCell('left', e);
                    }
                    else {
                        this.selectNextCell('right', e);
                    }
                    break;
            }
        }
    }
    /**
     * @private
     * @return {?}
     */
    unsubscribes() {
        this.subscriptions.forEach((/**
         * @param {?} ss
         * @return {?}
         */
        ss => {
            if (ss) {
                ss.unsubscribe();
                ss = null;
            }
        }));
        this.subscriptions = [];
        if (this.docuemntCellClickEvents) {
            this.docuemntCellClickEvents();
        }
    }
    //#endregion
    //#region Editing
    /**
     * @return {?}
     */
    isRowEditing() {
        if (!this.selectedRow || this.selectedRow.index === -1) {
            return false;
        }
        else {
            if (this.editMode === 'row') {
                return this.selectedRow.editors && this.selectedRow.editors.length;
            }
            else {
                return false;
            }
        }
    }
    /**
     * @return {?}
     */
    isCellEditing() {
        if (this.currentCell && this.editMode === 'cell') {
            if (!this.currentCell.editor && !this.currentCell.column.editorTemplate) {
                this.currentCell.isEditing = false;
            }
            return this.currentCell.isEditing;
        }
        return false;
    }
    /**
     * @return {?}
     */
    isEditing() {
        if (this.editMode === 'row') {
            return this.isRowEditing();
        }
        else {
            return this.isCellEditing();
        }
    }
    /**
     * @return {?}
     */
    endEditing() {
        if (this.editMode === 'row') {
            this.endRowEdit();
        }
        else if (this.editMode === 'cell') {
            this.endCellEdit();
        }
    }
    /**
     * @return {?}
     */
    getEditors() {
        return this.selectedRow.editors;
    }
    /**
     * @param {?} rowId
     * @param {?} field
     * @param {?=} validation
     * @return {?}
     */
    editCell(rowId, field, validation = null) {
        this.activeDataGrid();
        /** @type {?} */
        const rowIndex = this.dfs.findRowIndex(rowId);
        if (rowIndex > -1) {
            this.endCellEdit();
            /** @type {?} */
            const trId = TR_PREFIX + rowId;
            /** @type {?} */
            const trDom = this.el.nativeElement.querySelector('#' + trId);
            /** @type {?} */
            let tdDom = null;
            if (trDom) {
                tdDom = trDom.querySelector(`[field="${field}"]`);
            }
            /** @type {?} */
            const col = this.getColumn(field);
            if (!tdDom && col.fixed) {
                if (col.fixed === 'left') {
                    /** @type {?} */
                    const trDomL = this.el.nativeElement.querySelector('#' + trId + '_fixedleft');
                    tdDom = trDomL && trDomL.querySelector(`[field="${field}"]`);
                }
                else if (col.fixed === 'right') {
                    /** @type {?} */
                    const trDomR = this.el.nativeElement.querySelector('#' + trId + '_fixedright');
                    tdDom = trDomR && trDomR.querySelector(`[field="${field}"]`);
                }
            }
            if (validation) {
                this.formValidations = Object.assign(this.formValidations || {}, { [field]: validation });
            }
            if (tdDom && tdDom['editCell']) {
                this.currentCell = null;
                if (this['EDITCELL_TIMER']) {
                    clearTimeout(this['EDITCELL_TIMER']);
                }
                this['EDITCELL_TIMER'] = setTimeout((/**
                 * @return {?}
                 */
                () => {
                    tdDom.editCell();
                }), 0);
            }
        }
    }
    /**
     * @param {?=} event
     * @return {?}
     */
    endCellEdit(event) {
        // document.body.click();
        if (this.currentCell) {
            DomHandler.removeClass(this.currentCell.cellElement, CELL_SELECTED_CLS);
            if (this.currentCell.isEditing) {
                // this.dfs.endEditCell();
                if (this.currentCell.cellEditorRef) {
                    this.currentCell.cellEditorRef.hideCover();
                }
                /** @type {?} */
                const stopEdit = this.currentCell.cellElement.closeEdit();
                if (stopEdit) {
                    stopEdit.subscribe();
                }
            }
        }
    }
    /**
     * @param {?=} rowId
     * @return {?}
     */
    editRow(rowId) {
        if (!this.editable || this.editMode !== 'row') {
            return false;
        }
        if (rowId) {
            this.selectRow(rowId);
        }
        if (!this.selectedRow || this.selectedRow.index === -1) {
            this.writeConsole('Please select a row.');
            return false;
        }
        const { index: rowIndex, data: rowData } = Object.assign({}, this.selectedRow);
        /** @type {?} */
        const beforeEditEvent = this.beforeEdit({ rowIndex, rowData, gridInstance: this });
        if (!beforeEditEvent || !beforeEditEvent.subscribe) {
            this.writeConsole('please return an Observable Type.');
            return;
        }
        /** @type {?} */
        const trId = TR_PREFIX + rowId;
        /** @type {?} */
        const trDom = this.el.nativeElement.querySelector('#' + trId);
        if (!this.selectedRow.dr) {
            trDom.click();
        }
        beforeEditEvent.subscribe((/**
         * @param {?} flag
         * @return {?}
         */
        (flag) => {
            if (flag) {
                if (this.selectedRow.dr) {
                    /** @type {?} */
                    const cells = this.selectedRow.dr.cells.toArray();
                    if (!cells || !cells.length) {
                        return;
                    }
                    cells.forEach((/**
                     * @param {?} cell
                     * @return {?}
                     */
                    cell => {
                        if (cell.column.editor) {
                            cell.isEditing = true;
                        }
                    }));
                    this.selectedRow.dr.cd.detectChanges();
                    setTimeout((/**
                     * @return {?}
                     */
                    () => {
                        /** @type {?} */
                        const editors = cells.map((/**
                         * @param {?} cell
                         * @return {?}
                         */
                        cell => {
                            if (cell.cellEditor) {
                                return cell.cellEditor.componentRef;
                            }
                        })).filter((/**
                         * @param {?} editor
                         * @return {?}
                         */
                        editor => editor));
                        this.selectedRow.editors = editors;
                        if (editors && editors.length) {
                            if (editors[0].instance.inputElement) {
                                editors[0].instance.inputElement.focus();
                            }
                        }
                        // 绑定键盘事件
                        this.bindRowEditorKeydownEvent();
                        if (!this.cd['destroyed']) {
                            this.cd.detectChanges();
                        }
                        this.beginEdit.emit({ rowIndex, rowData, gridInstance: this, editor: editors });
                    }));
                }
            }
        }));
    }
    /**
     * @return {?}
     */
    endRowEdit() {
        if (!this.isRowEditing()) {
            return { canEnd: true };
        }
        if (!this.selectedRow || this.selectedRow.index === -1) {
            this.writeConsole('Please select a row.');
            return;
        }
        const { index: rowIndex, data: rowData, dr } = Object.assign({}, this.selectedRow);
        const { editor: currentEditor, column } = Object.assign({}, this.currentCell);
        // blur
        document.body.click();
        if (this.pending) {
            return { canEnd: false };
        }
        /** @type {?} */
        const rowForm = (/** @type {?} */ (dr.form));
        rowForm.markAsTouched();
        if (rowForm.invalid && !this.endEditByInvalid) {
            return { canEnd: false };
        }
        // afterEdit 要传递相关参数，在编辑状态时，移动滚动条会出事
        /** @type {?} */
        const afterEditEvent = this.afterEdit(rowIndex, rowData, column, currentEditor);
        if (!afterEditEvent || !afterEditEvent.subscribe) {
            this.writeConsole('please return an Observable Type.');
            return { canEnd: false };
        }
        afterEditEvent.subscribe((/**
         * @param {?} flag
         * @return {?}
         */
        (flag) => {
            if (flag) {
                this.closeAllCellEditor();
                if (this.selectedRow.dr.form) {
                    this.selectedRow.dr.rowData = Object.assign(this.selectedRow.dr.rowData, this.selectedRow.dr.form.value);
                    this.dfs.updateRow(this.selectedRow.id, this.selectedRow.dr.rowData);
                    this.cd.detectChanges();
                }
                /** @type {?} */
                let val = '';
                if (currentEditor && currentEditor.formControl) {
                    val = currentEditor.formControl.value;
                }
                this.endEdit.emit({ rowIndex, rowData, column, value: val });
                this.dgs.refreshFooterData.emit();
            }
        }));
    }
    /**
     * @param {?} rowId
     * @param {?=} emit
     * @return {?}
     */
    cancelEdit(rowId, emit = true) {
        if (!this.isEditing()) {
            return;
        }
        this.closeAllCellEditor();
        if (rowId) {
            this.dfs.rejectChanges(rowId);
        }
        this.cd.detectChanges();
        if (emit) {
            this.cancelEdited.emit();
        }
    }
    /**
     * @return {?}
     */
    closeAllCellEditor() {
        if (this.selectedRow && this.selectedRow.dr) {
            /** @type {?} */
            const cells = this.selectedRow.dr.cells;
            if (cells) {
                cells.forEach((/**
                 * @param {?} cell
                 * @return {?}
                 */
                cell => cell.isEditing = false));
                if (this.currentCell) {
                    this.currentCell.isEditing = false;
                }
            }
            this.selectedRow.editors = null;
        }
        // 取消键盘事件
        this.unbindRowEditorKeydownEvent();
    }
    /**
     * @private
     * @param {?} e
     * @return {?}
     */
    rowEditTabKeydwonEvent(e) {
        /** @type {?} */
        const keyCode = e.which || e.keyCode;
        if (keyCode === 9) { // tab
            // tab
            /** @type {?} */
            const td = e.target.closest('td');
            /** @type {?} */
            const tr = e.target.closest('tr');
            /** @type {?} */
            const nextTd = td.nextElementSibling;
            /** @type {?} */
            const hasNoEditor = (/**
             * @param {?} _td
             * @return {?}
             */
            (_td) => {
                return !_td.querySelector('input') && !_td.querySelector('textarea') && !_td.querySelector('select');
            });
            /** @type {?} */
            const editNextRow = (/**
             * @return {?}
             */
            () => {
                /** @type {?} */
                const nextTr = tr.nextElementSibling;
                if (nextTr) {
                    nextTr.click();
                    /** @type {?} */
                    const nextRowid = nextTr.getAttribute('id').replace(TR_PREFIX, '');
                    if (nextRowid) {
                        this.editRow(nextRowid);
                    }
                }
            });
            if (nextTd) {
                if (hasNoEditor(nextTd)) {
                    /** @type {?} */
                    const tds = tr.querySelectorAll('td');
                    /** @type {?} */
                    let tdIdx = -1;
                    tds.forEach((/**
                     * @param {?} t
                     * @param {?} i
                     * @return {?}
                     */
                    (t, i) => {
                        if (t === nextTd) {
                            tdIdx = i;
                        }
                    }));
                    /** @type {?} */
                    let nextTrEdit = true;
                    while (tdIdx < tds.length) {
                        /** @type {?} */
                        const _ntd = tds[tdIdx];
                        if (hasNoEditor(_ntd)) {
                            tdIdx++;
                        }
                        else {
                            nextTrEdit = false;
                            break;
                        }
                    }
                    if (nextTrEdit) {
                        editNextRow();
                    }
                }
            }
            else {
                editNextRow();
            }
        }
        e.stopPropagation();
    }
    /**
     * @private
     * @return {?}
     */
    bindRowEditorKeydownEvent() {
        if (!this.documentRowEditKeydownHanlder) {
            this.documentRowEditKeydownHanlder = this.render2.listen(document, 'keydown', this.rowEditTabKeydwonEvent.bind(this));
        }
        this.documentClickEndRowEditHandler = this.render2.listen(document, 'click', (/**
         * @param {?} e
         * @return {?}
         */
        (e) => {
            if (this.pending) {
                return false;
            }
            if (Utils.hasDialogOpen()) {
                return;
            }
            if (this.isRowEditing()) {
                // this.endRowEdit();
            }
        }));
    }
    /**
     * @private
     * @return {?}
     */
    unbindRowEditorKeydownEvent() {
        // 取消键盘事件
        if (this.documentRowEditKeydownHanlder) {
            this.documentRowEditKeydownHanlder();
            this.documentRowEditKeydownHanlder = null;
        }
        if (this.documentClickEndRowEditHandler) {
            this.documentClickEndRowEditHandler();
            this.documentClickEndRowEditHandler = null;
        }
    }
    //#endregion
    //#region Load Data
    /**
     * @private
     * @param {?} conditions
     * @param {?=} excuteLocaleFilter
     * @return {?}
     */
    _clientFilter(conditions, excuteLocaleFilter = false) {
        // 客户端过滤
        if (excuteLocaleFilter) {
            /** @type {?} */
            const allClientData = this.dfs.getData(true);
            if (conditions && Object.keys(conditions).length) {
                /** @type {?} */
                const _data = this.clientFilterService.executeFilter(allClientData, conditions);
                this.dfs.loadFilterData(_data);
            }
            else {
                this.loadData(allClientData, false, true);
            }
        }
        if (!this.virtualized) {
            this.scrollToTop();
        }
        this.filterChanged.emit(conditions);
    }
    /**
     * @private
     * @param {?} conditions
     * @return {?}
     */
    smartFilterData(conditions) {
        if (this.remoteFilter) { // 服务器端过滤
            // 服务器端过滤
            /** @type {?} */
            const entityFilters = this.clientFilterService.convertSmartFilter2EntityFilter(conditions);
            this.filterChanged.emit(entityFilters);
        }
        else {
            // 客户端过滤
            this._clientFilter(conditions, this.useDefaultFilter);
        }
    }
    // smart fitler 清空查询条件
    /**
     * @param {?=} $event
     * @return {?}
     */
    onClearSmartFilters($event) {
        this.smartFilterResult = { conditions: [], controlData: [] };
        this.conditions = [];
        this.smartFilterData([]);
        this.smartFilterService.clearAll();
        setTimeout((/**
         * @return {?}
         */
        () => {
            this.onFilterBarResize(0);
        }));
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    onRemoveSmartFilterItem($event) {
        if ($event) {
            /** @type {?} */
            const e = Object.assign({}, $event);
            e['labelCode'] = $event.fieldCode;
            this.smartFilterService.removeCondition(e, true);
        }
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    onFilterBarResize($event) {
        this.filterBarHeight = $event;
        /** @type {?} */
        const smartFilterEl = this.el.nativeElement.querySelector('.f-datagrid-column-drop-panel');
        if (smartFilterEl && !$event) {
            smartFilterEl.style.top = '0px';
        }
        this.dgs.showGridHeader.emit(this.realHeaderHeight);
        this.dgs.smartFilterBarExpand.emit();
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    onSmartFilterChange($event) {
        const { conditions, filterItem } = $event;
        this.smartFilterService.filterConditionChanged({ conditions, controlData: filterItem, from: 'toolbar' });
        // this.smartFilterData(conditions);
        this.dgs.smartFilterDataChange.emit(filterItem);
    }
    /**
     * @param {?=} conditions
     * @return {?}
     */
    filterData(conditions) {
        if (!conditions) {
            conditions = this.conditions;
        }
        else {
            this.conditions = conditions;
        }
        this.scrollToTop();
        if (this.enableSmartFilter) {
            this.smartFilterData(conditions);
            return;
        }
        if (this.remoteFilter) {
            /** @type {?} */
            const entityFilters = this.clientFilterService.convert2FilterArray(conditions);
            this.filterChanged.emit(entityFilters);
        }
        else {
            // 客户端过滤
            this._clientFilter(conditions, true);
        }
    }
    /**
     * 清空过滤条件
     * @return {?}
     */
    clearCondition() {
        this.dgs.onClearFilter();
    }
    /**
     * @param {?=} data
     * @param {?=} keepSortState
     * @param {?=} keepScrollPosition
     * @return {?}
     */
    loadData(data, keepSortState = false, keepScrollPosition = true) {
        if (this.loading) {
            this.closeLoading(!this.pagination);
        }
        data = data || [];
        if (keepScrollPosition && this.scrollInstance && this.scrollInstance.instance) {
            /** @type {?} */
            const lst = this.scrollInstance.instance.lastScrollTop;
            /** @type {?} */
            const lsl = this.scrollInstance.instance.lastScrollLeft;
            this.dfs.updateProperty('scrollInfo', { y: lst, x: lsl });
        }
        else {
            this.dfs.updateProperty('scrollInfo', { y: 0, x: 0 });
        }
        if (this.pagination) {
            this.dfs.setPagination(this.pageIndex, this.pageSize, this.total);
            this.updatePagerOptions();
            if (!this.cd['destroyed']) {
                this.cd.detectChanges();
            }
        }
        // 重新加载数据时，移除所有编辑列
        // this.closeAllCellEditor();
        this.data = data;
        if (keepSortState) {
            if (this.remoteSort) {
                this.dfs.loadData(data);
            }
            else {
                this.dfs.loadData(data, true, true);
            }
        }
        else {
            this.dfs.loadData(data);
        }
        this.setPagerHeight();
        this.dgs.dataSourceChanged();
    }
    /**
     * @param {?} data
     * @return {?}
     */
    loadVirtualData(data) {
        if (this.groupRows) {
            this.writeConsole('if you using GROUPROWS, please set [virtualized]="false" [virtualizedAsyncLoad]="false"');
            return;
        }
        if (this.virtualizedAsyncLoad) {
            this.dgs.onLoadVirtualData(data);
        }
    }
    /**
     * @param {?} pageIndex
     * @param {?} pageSize
     * @return {?}
     */
    fetchData(pageIndex, pageSize) {
        if (this.restService) {
            this.showLoading();
            /** @type {?} */
            const params = { pageIndex, pageSize };
            if (this.sortName) {
                params['sortName'] = this.sortName;
            }
            if (this.sortOrder) {
                params['sortOrder'] = this.sortOrder;
            }
            return this.restService.getData(this.url, params);
        }
        return of(undefined);
    }
    /**
     * @return {?}
     */
    refresh() {
        this.dfs.refresh();
    }
    /**
     * @return {?}
     */
    reload() {
        this.fetchData(1, this.pageSize).subscribe((/**
         * @param {?} res
         * @return {?}
         */
        res => {
            if (res) {
                this.pageIndex = 1;
                this.total = res.total;
                this.loadData(res.items);
            }
        }));
    }
    /**
     * 获取当前页数据
     * @return {?}
     */
    getRows() {
        if (this.groupRows || this.virtualized) {
            if (this.pagerOnServer) {
                return this.ds.rows;
            }
            else {
                return this.currentPagerData;
            }
        }
        else {
            if (this.pagerOnServer) {
                return this.data;
            }
            else {
                return this.currentPagerData;
            }
        }
    }
    //#endregion
    //#region Pagination
    /**
     * @param {?} pageIndex
     * @param {?=} detectChanges
     * @return {?}
     */
    setPageIndex(pageIndex, detectChanges = true) {
        this.pageIndex = pageIndex;
        this.pagerOpts.currentPage = pageIndex;
        if (detectChanges) {
            this.cd.detectChanges();
        }
    }
    // 更新每页
    /**
     * @param {?} pageList
     * @param {?=} detectChanges
     * @return {?}
     */
    setPageList(pageList, detectChanges = true) {
        this.pageList = pageList;
        this.pagerOpts.pageList = pageList;
        if (detectChanges) {
            this.cd.detectChanges();
        }
    }
    /**
     * @param {?} pageIndex
     * @return {?}
     */
    onPageChange(pageIndex) {
        if (this.lockPagination) {
            return;
        }
        if (this.controlPaginationState) {
            this.setPageIndex(pageIndex, false);
        }
        this.fetchData(pageIndex, this.pageSize).subscribe((/**
         * @param {?} res
         * @return {?}
         */
        res => {
            if (res) {
                this.loadData(res.items);
            }
        }));
        this.focusRowIndex = -1;
        this.scrollToTop();
        this.pageChanged.emit({ pageIndex, pageSize: this.pageSize });
    }
    /**
     * @param {?} pageSize
     * @return {?}
     */
    onPageSizeChange(pageSize) {
        if (this.lockPagination) {
            return;
        }
        this.focusRowIndex = -1;
        this.scrollToTop();
        this.pageSize = pageSize;
        this.pagerOpts.itemsPerPage = pageSize;
        this.fetchData(1, pageSize).subscribe((/**
         * @param {?} res
         * @return {?}
         */
        res => {
            if (res) {
                this.pageIndex = 1;
                this.loadData(res.items);
            }
        }));
        this.pageSizeChanged.emit({ pageSize, pageIndex: this.pageIndex });
    }
    /**
     * @param {?} id
     * @return {?}
     */
    onRemoveSelectedItem(id) {
        if (this.dfs.findRowIndex(id) > -1) {
            this.unCheckRow(id);
            this.cd.detectChanges();
        }
        else {
            this.unCheckRow(id, false);
            this.checkValues = this.checkeds.map((/**
             * @param {?} r
             * @return {?}
             */
            r => r.id));
        }
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    onClearSelectedItem($event) {
        // this.clearAll();
        if (this.selectOnCheck) {
            this.selectValue = '';
        }
        this.clearCheckeds(true);
    }
    //#endregion
    //#region Loading
    /**
     * @return {?}
     */
    showLoading() {
        this.loading = true;
        this.cd.detectChanges();
    }
    /**
     * @param {?=} detectChanges
     * @return {?}
     */
    closeLoading(detectChanges = true) {
        this.loading = false;
        if (detectChanges) {
            this.cd.detectChanges();
        }
    }
    //#endregion
    //#region Dom
    /**
     * @private
     * @param {?} strNum
     * @return {?}
     */
    replacePX2Empty(strNum) {
        if (strNum) {
            return Number.parseInt(strNum.replace('px', ''), 10);
        }
        return 0;
    }
    /**
     * @param {?} cls
     * @param {?} dom
     * @return {?}
     */
    renderCustomCls(cls, dom) {
        if (cls) {
            if (cls[0] === '!') {
                /** @type {?} */
                const _cls = cls.slice(1).split(' ').filter((/**
                 * @param {?} c
                 * @return {?}
                 */
                c => c));
                _cls.forEach((/**
                 * @param {?} c
                 * @return {?}
                 */
                c => {
                    if (c) {
                        this.render2.removeClass(dom, c);
                    }
                }));
            }
            else {
                cls.split(' ').filter((/**
                 * @param {?} c
                 * @return {?}
                 */
                c => c)).forEach((/**
                 * @param {?} c
                 * @return {?}
                 */
                c => {
                    if (c) {
                        this.render2.addClass(dom, c);
                    }
                }));
            }
        }
    }
    /**
     * @param {?} cs
     * @param {?} dom
     * @param {?=} cssRuleText
     * @return {?}
     */
    renderCustomStyle(cs, dom, cssRuleText = null) {
        if (!cs) {
            return;
        }
        if (cs.cls) {
            this.renderCustomCls(cs.cls, dom);
        }
        if (cs.style) {
            if (!cssRuleText) {
                Object.keys(cs.style).forEach((/**
                 * @param {?} n
                 * @return {?}
                 */
                n => {
                    if (n.toLowerCase() === 'color' && cs.style[n] && cs.style[n].indexOf('!important') === -1) {
                        cs.style[n] = cs.style[n] + '!important';
                    }
                }));
                cssRuleText = `${this.customStyleKey()} #${dom.id} ${JSON.stringify(cs.style)}`;
            }
            this.dgs.appendCssRules([cssRuleText]);
        }
    }
    /**
     * @param {?} el
     * @return {?}
     */
    getBoundingClientRect(el) {
        return el.nativeElement.getBoundingClientRect();
    }
    /**
     * @param {?} el
     * @return {?}
     */
    getElementPadding(el) {
        /** @type {?} */
        const style = getComputedStyle(el);
        return {
            top: this.replacePX2Empty(style.paddingTop),
            left: this.replacePX2Empty(style.paddingLeft),
            bottom: this.replacePX2Empty(style.paddingBottom),
            right: this.replacePX2Empty(style.paddingRight)
        };
    }
    /**
     * @param {?} el
     * @return {?}
     */
    getElementBorderWidth(el) {
        /** @type {?} */
        const style = getComputedStyle(el);
        return {
            top: this.replacePX2Empty(style.borderTopWidth),
            bottom: this.replacePX2Empty(style.borderBottomWidth),
            right: this.replacePX2Empty(style.borderRightWidth),
            left: this.replacePX2Empty(style.borderLeftWidth)
        };
    }
    /**
     * @param {?} field
     * @param {?} data
     * @param {?} formatter
     * @return {?}
     */
    formatData(field, data, formatter) {
        /** @type {?} */
        const value = this.getFieldValue(field, data);
        return this.colFormatSer.format(value, data, formatter);
    }
    /**
     * @param {?} field
     * @param {?} rowData
     * @return {?}
     */
    getFieldValue(field, rowData) {
        return Utils.getValue(field, rowData);
    }
    //#endregion
    //#region Select
    /**
     * @private
     * @return {?}
     */
    canOperateCheckbox() {
        return this.multiSelect && this.showCheckbox;
    }
    /**
     * @param {?} nextColumn
     * @return {?}
     */
    findNextTd(nextColumn) {
        if (!nextColumn) {
            return null;
        }
        /** @type {?} */
        const rowid = TR_ID_PREFIX + this.selectedRow.id;
        /** @type {?} */
        const leftTrID = TR_ID_PREFIX + this.selectedRow.id + '_fixedleft';
        /** @type {?} */
        const rightTrID = TR_ID_PREFIX + this.selectedRow.id + '_fixedright';
        /** @type {?} */
        let _tr = null;
        /** @type {?} */
        let _td = null;
        if (nextColumn.fixed === 'left') {
            _tr = document.querySelector(leftTrID);
            if (_tr) {
                _td = _tr.querySelector(`[field="${nextColumn.field}"]`);
            }
        }
        else if (nextColumn.fixed === 'right') {
            _tr = document.querySelector(rightTrID);
            if (_tr) {
                _td = _tr.querySelector(`[field="${nextColumn.field}"]`);
            }
        }
        else {
            _tr = document.querySelector(rowid);
            if (_tr) {
                _td = _tr.querySelector(`[field="${nextColumn.field}"]`);
            }
        }
        return _td;
    }
    /**
     * 依据当前字段查询下个字段的TD DOM
     * @param {?} field 当前字段名称
     * @param {?} dir 移动方向
     * @return {?} TD element
     */
    findNextCell(field, dir) {
        /** @type {?} */
        let td = null;
        if (this.currentCell && this.currentCell.cellElement) {
            /** @type {?} */
            const col = this.dfs.getColumn(field);
            /** @type {?} */
            const fixed = col.fixed || '';
            // let cellIndex = this.dfs.getColumnIndex(field, fixed);
            /** @type {?} */
            let cellIndex = this.colGroup.columns.findIndex((/**
             * @param {?} n
             * @return {?}
             */
            n => (n.id && n.id === col.id) || n.field === col.field));
            // if (fixed === 'left' || this.fast) {
            //     if (this.showCheckbox) {
            //         cellIndex += 1;
            //     }
            //     if (this.showLineNumber) {
            //         cellIndex += 1;
            //     }
            // }
            /** @type {?} */
            const currCellEl = this.currentCell.cellElement;
            /** @type {?} */
            const tdSelector = `[field="${field}"]`;
            if (dir === 'up') {
                /** @type {?} */
                const prevTr = this.dgs.findNextTr(currCellEl.parentElement.previousElementSibling, 'up');
                if (prevTr) {
                    td = prevTr.querySelector(tdSelector);
                }
            }
            else if (dir === 'down') {
                /** @type {?} */
                const nextTr = this.dgs.findNextTr(currCellEl.parentElement.nextElementSibling, 'down');
                if (nextTr) {
                    td = nextTr.querySelector(tdSelector);
                }
            }
            else if (dir === 'left') {
                /** @type {?} */
                const nextColumn = this.colGroup.columns[cellIndex - 1];
                if (nextColumn) {
                    td = this.findNextTd(nextColumn);
                }
            }
            else if (dir === 'right') {
                /** @type {?} */
                const nextColumn = this.colGroup.columns[cellIndex + 1];
                if (nextColumn) {
                    td = this.findNextTd(nextColumn);
                }
            }
        }
        return td;
    }
    /**
     * @param {?} dir
     * @param {?} event
     * @return {?}
     */
    selectNextCell(dir, event) {
        /** @type {?} */
        const nextTd = this.findNextCell(this.currentCell.field, dir);
        if (dir === 'up' && !nextTd) {
            return;
        }
        if (nextTd && nextTd.className.indexOf('f-datagrid-cell-rownumber') == -1 && nextTd.className.indexOf('f-datagrid-cell-checkbox') == -1) {
            if (event['code'] === 'Tab' && this.editable && this.editcellWhenTabKeydwon) {
                nextTd['click'].apply(nextTd, [event]);
            }
            else {
                if (nextTd.selectCell) {
                    if (this.selectionMode === 'default') {
                        this.clearCheckeds();
                    }
                    nextTd['selectCell'](event, nextTd);
                }
            }
            // nextTd['selectCell'](event, nextTd);
            return nextTd;
        }
        else {
            /** @type {?} */
            const nextCol = this.colGroup.columns[0];
            /** @type {?} */
            const tdSeletor = `td[field="${nextCol.field}"]`;
            /** @type {?} */
            const tr = this.currentCell.cellElement.parentElement;
            /** @type {?} */
            let _next = tr.nextElementSibling;
            if (dir === 'left') {
                _next = tr.previousElementSibling;
            }
            if (!_next) {
                return;
            }
            /** @type {?} */
            const trDomId = _next.id.replace('_fixedleft', '').replace('_fixedright', '');
            /** @type {?} */
            const leftTrSelector = '#' + trDomId + '_fixedleft';
            if (_next.id.indexOf('_fixedright') > -1) {
                if (this.colGroup.leftFixed && this.colGroup.leftFixed.length) {
                    _next = document.querySelector(leftTrSelector);
                }
            }
            if (dir === 'left') {
                if (_next.id.indexOf('_fixedleft') > -1) {
                    _next = document.querySelector(leftTrSelector);
                }
            }
            /** @type {?} */
            const nextTd = _next.querySelector(tdSeletor);
            if (nextTd && nextTd.selectCell) {
                if (this.selectionMode === 'default') {
                    this.clearCheckeds();
                }
                nextTd.selectCell(event, nextTd);
            }
            /*
            const nextTr = this.dgs.findNextTr(_next, dir === 'left' ? 'up' : 'down');
            if (nextTr && nextTr.tagName === 'TR') {
                // nextTr.children.find(td => td.editCell).editCell();
                let firstEditor = false;
                let i = 0;
                while (!firstEditor) {
                    firstEditor = !!nextTr.children[i].selectCell;
                    if (!firstEditor) {
                        i++;
                    }
                }
                if (nextTr.children[i] && nextTr.children[i].selectCell) {
                    if (this.selectionMode === 'default' ) {
                        this.clearCheckeds();
                    }
                    nextTr.children[i].selectCell(event, nextTr.children[i]);
                }
            }
            */
        }
    }
    /**
     * @return {?}
     */
    selectNextRow() {
        if (this.selectedRow) {
            /** @type {?} */
            const tr = this.selectedRow.dr.el.nativeElement;
            if (tr.nextElementSibling) {
                tr.nextElementSibling.click();
            }
        }
    }
    /**
     * @return {?}
     */
    selectPrevRow() {
        if (this.selectedRow) {
            /** @type {?} */
            const tr = this.selectedRow.dr.el.nativeElement;
            if (tr.previousElementSibling) {
                tr.previousElementSibling.click();
            }
        }
    }
    /**
     * @return {?}
     */
    removeCellSelectedCls() {
        if (this.currentCell) {
            DomHandler.removeClass(this.currentCell.cellElement, CELL_SELECTED_CLS);
            this.render2.removeClass(this.currentCell.cellElement, CELL_EDITING_CLS);
        }
        /** @type {?} */
        const selectedCell = this.el.nativeElement.querySelectorAll('.' + CELL_SELECTED_CLS);
        if (selectedCell.length) {
            selectedCell.forEach((/**
             * @param {?} n
             * @return {?}
             */
            n => {
                this.render2.removeClass(n, CELL_SELECTED_CLS);
            }));
        }
    }
    /**
     * 选中行
     * @param {?} id 选中行ID
     * @param {?=} emit 触发select 事件
     * @param {?=} toCurrentPosition 滚动条定位到当前选择中行
     * @return {?}
     */
    selectRow(id, emit = true, toCurrentPosition = false) {
        if (this.selectedRow && this.selectedRow.id === id) {
            if (emit) {
                this.dfs.selectRecord(id);
            }
            if (toCurrentPosition) {
                this.scrollToCurrentRow();
            }
            return;
        }
        /** @type {?} */
        const _selectRow = (/**
         * @return {?}
         */
        () => {
            this.removeCellSelectedCls();
            if (!this.enableSelectRow) {
                return;
            }
            if (!this.multiSelect && this.showCheckbox) {
                this.clearCheckeds(false, false);
            }
            if (this.multiSelect && this.selectionMode === 'default' && !this.enableMorePageSelect) {
                this.clearAll();
            }
            if (id && (!this.selectedRow || this.selectedRow.id != id)) {
                /** @type {?} */
                const row = this.dfs.findRow(id);
                if (row && this.disableRow) {
                    if (this.disableRow(row.data, row.index)) {
                        return;
                    }
                }
                if (emit) {
                    this.dfs.selectRecord(id);
                }
                else {
                    this.dfs.setSelectRow(id, emit);
                    this.selectedRow = this.dfs.getCurrentRow();
                    if (this.checkOnSelect) {
                        this.checkRows([id]);
                    }
                    this.dgs.setSelecedRow.emit({ id, selected: true });
                }
            }
            else {
                if (this.checkOnSelect) {
                    this.checkRows([id]);
                }
            }
            if (toCurrentPosition) {
                this.scrollToCurrentRow();
            }
        });
        if (this.isEditing()) {
            /** @type {?} */
            const stopEdit = this.currentCell.cellElement.closeEdit();
            if (stopEdit) {
                stopEdit.subscribe(_selectRow);
            }
        }
        else {
            _selectRow();
        }
    }
    /**
     * 滚动条滚动到当前行的位置
     * @return {?}
     */
    scrollToCurrentRow() {
        this.dgs.scrollToCurrentRow.next();
    }
    /**
     * @param {?} id
     * @param {?=} emit
     * @return {?}
     */
    unSelectRow(id, emit = true) {
        if (id) {
            this.closeAllCellEditor();
            if (this.currentCell && this.currentCell.rowId == id) {
                this.cancelSelectCell();
            }
            if (emit) {
                this.dfs.selectRecord(id, false);
            }
            else {
                this.dfs.setSelectRow(id, false);
                this.selectedRow = null;
                this.dgs.setSelecedRow.emit({ id, selected: false });
            }
        }
    }
    /**
     * @return {?}
     */
    selectAllRows() {
        if (this.multiSelect && this.enableSelectRow) {
            this.dfs.selectAll();
        }
    }
    /**
     * @return {?}
     */
    cancelSelectCell() {
        if (this.currentCell) {
            this.currentCell.cellElement.cancelSelected();
            if (!this.currentCell.isEditing) {
                this.currentCell = null;
                this.dfs.cancelSelectCell();
            }
        }
    }
    /**
     * @param {?=} excludeIds
     * @return {?}
     */
    clearSelections(excludeIds) {
        this.dfs.clearSelections(excludeIds);
        this.selectedRow = null;
        this.cancelSelectCell();
        this.cd.detectChanges();
    }
    /**
     * @param {?} id
     * @param {?=} emit
     * @return {?}
     */
    checkRow(id, emit = true) {
        if (this.canOperateCheckbox()) {
            if (emit) {
                this.dfs.checkRecord(id);
            }
            else {
                this.checkRows([id]);
            }
        }
    }
    /**
     * 钩选行，不触发选中事件
     * @param {?} ids
     * @param {?=} emit
     * @return {?}
     */
    checkRows(ids, emit = false) {
        if (ids && ids.length) {
            this.dfs.setCheckedRows(ids, true);
            this.dgs.setCheckedRows.next({ ids, checked: true });
            if (this.selectionMode === 'default') {
                this.dfs.updateProperty('selections', this.checkeds);
            }
            // this.cd.detectChanges();
            if (emit) {
                this.checkValues = this.checkeds.map((/**
                 * @param {?} r
                 * @return {?}
                 */
                r => r.id));
                this.checkValuesChange.emit(this.checkValues);
                this.checkedChange.emit(this.checkeds);
            }
            this.updateAllCheckboxStatus();
        }
    }
    /**
     * 取消钩选，不触发选中事件
     * @param {?} ids
     * @param {?=} emit
     * @return {?}
     */
    unCheckRows(ids, emit = false) {
        if (ids && ids.length) {
            this.dfs.setCheckedRows(ids, false);
            this.dgs.setCheckedRows.next({ ids, checked: false });
            // this.cd.detectChanges();
            if (emit) {
                this.checkValues = this.checkeds.map((/**
                 * @param {?} r
                 * @return {?}
                 */
                r => r.id));
                this.checkValuesChange.emit(this.checkValues);
                this.checkedChange.emit(this.checkeds);
            }
            this.updateAllCheckboxStatus();
        }
    }
    /**
     * @param {?=} emit
     * @return {?}
     */
    checkAllRows(emit = true) {
        if (this.canOperateCheckbox()) {
            this.dfs.checkAll();
            this.dgs.checkAll.emit();
            if (emit) {
                this.checkAll.emit();
            }
        }
    }
    /**
     * @param {?} id
     * @param {?=} emit
     * @return {?}
     */
    unCheckRow(id, emit = true) {
        if (this.canOperateCheckbox()) {
            if (this.currentCell && this.currentCell.rowId == id) {
                this.cancelSelectCell();
            }
            if (emit) {
                this.dfs.checkRecord(id, false);
            }
            else {
                this.unCheckRows([id]);
            }
            this.updateAllCheckboxStatus();
        }
    }
    /**
     * 清空钩选行，默认只清空当前页的钩选
     * clearAll: 清空所有 默认为 false; 否则仅清空当前页的钩选数据。
     * @param {?=} clearAll
     * @param {?=} emitUnCheckAll
     * @return {?}
     */
    clearCheckeds(clearAll = false, emitUnCheckAll = true) {
        this.dfs.clearCheckeds(clearAll);
        this.checkValues = [];
        this.cancelSelectCell();
        if (emitUnCheckAll) {
            this.dgs.uncheckAll.emit();
        }
    }
    /**
     * @return {?}
     */
    clearAll() {
        this.selectedRow = null;
        this.checkValues = [];
        this.dfs.clearAll();
        this.dgs.uncheckAll.emit();
        this.updateAllCheckboxStatus();
    }
    //#endregion
    //#region Resize Column
    /**
     * @private
     * @param {?} e
     * @return {?}
     */
    getResizeProxyPosLeft(e) {
        /** @type {?} */
        const target = (/** @type {?} */ (e.target));
        /** @type {?} */
        const dgRect = this.getBoundingClientRect(this.dgContainer);
        /** @type {?} */
        const td = target.parentElement;
        /** @type {?} */
        const tdLeft = td.getBoundingClientRect().left;
        /** @type {?} */
        const deltaEdge = td.offsetWidth - (e.pageX - tdLeft);
        this.resizeColumnInfo.proxyLineEdge = deltaEdge;
        this.resizeColumnInfo.startWidth = td.offsetWidth;
        this.resizeColumnInfo.startX = e.pageX;
        this.resizeColumnInfo.left = tdLeft - dgRect.left - 1 + deltaEdge;
        return e.pageX - dgRect.left - 1 + deltaEdge;
    }
    /**
     * @private
     * @param {?=} show
     * @return {?}
     */
    toggleResizeProxy(show = true) {
        /** @type {?} */
        let display = 'block';
        if (!show) {
            display = 'none';
        }
        this.render2.setStyle(this.resizeProxyBg.nativeElement, 'display', display);
        this.render2.setStyle(this.resizeProxy.nativeElement, 'display', display);
    }
    /**
     * @param {?} e
     * @return {?}
     */
    onColumnResizeBegin(e) {
        if (this.resizeProxy) {
            this.render2.setStyle(document.body, 'cursor', 'e-resize');
            /** @type {?} */
            const proxy = this.resizeProxy.nativeElement;
            /** @type {?} */
            const proxyPosLeft = this.getResizeProxyPosLeft(e);
            this.render2.setStyle(proxy, 'left', proxyPosLeft + 'px');
            /** @type {?} */
            let top = 0;
            if ((this.enableFilterRow || this.enableSmartFilter) && this.showFilterBar) {
                top += this.filterBarHeight;
            }
            if (this.showRowGroupPanel) {
                top += this.rowGroupPanelHeight;
            }
            this.render2.setStyle(proxy, 'top', `${top}px`);
            if (!this.autoHeight) {
                this.render2.setStyle(proxy, 'height', (this.height - this.pagerHeight) + 'px');
            }
            else {
                /** @type {?} */
                let bottomH = 0;
                if (this.pagination) {
                    bottomH += this.pagerHeight;
                }
                if (this.showFooter) {
                    bottomH += this.footerHeight;
                }
                this.render2.setStyle(proxy, 'height', `calc(100% - ${bottomH}px)`);
            }
            this.toggleResizeProxy();
        }
    }
    /**
     * @param {?} e
     * @return {?}
     */
    onColumnResize(e) {
        /** @type {?} */
        const proxy = this.resizeProxy.nativeElement;
        /** @type {?} */
        const dgRect = this.getBoundingClientRect(this.dgContainer);
        /** @type {?} */
        const proxyPosLeft = e.pageX - dgRect.left - 1 + this.resizeColumnInfo.proxyLineEdge;
        if (proxyPosLeft - this.resizeColumnInfo.left > 20) {
            this.render2.setStyle(proxy, 'left', proxyPosLeft + 'px');
        }
        else {
            this.render2.setStyle(proxy, 'left', (this.resizeColumnInfo.left + 20) + 'px');
        }
        e.stopPropagation();
        e.preventDefault();
    }
    /**
     * @param {?} e
     * @param {?} col
     * @return {?}
     */
    onColumnResizeEnd(e, col) {
        this.render2.removeStyle(document.body, 'cursor');
        this.toggleResizeProxy(false);
        this.resizeColumnInfo.proxyLineEdge = 0;
        /** @type {?} */
        let newColWidth = this.resizeColumnInfo.startWidth + e.pageX - this.resizeColumnInfo.startX;
        if (newColWidth < 20) {
            newColWidth = 20;
        }
        if (col.width > newColWidth) {
            /** @type {?} */
            const t = col.width - newColWidth;
            if (!this.fitColumns && this.scrollInstance.elementRef.nativeElement.scrollLeft) {
                /** @type {?} */
                const moveLeft = this.scrollInstance.elementRef.nativeElement.scrollLeft - t;
                this.scrollInstance.scrollToX(moveLeft);
            }
        }
        col.width = newColWidth;
        if (!this.nowrap && this.showFooter) {
            this.setFooterHeight();
        }
        if (this.useControlPanel && this.settingService) {
            this.settingService.saveUserConfig(this.id).subscribe((/**
             * @return {?}
             */
            () => {
                this.dfs.columnResizeEnd();
                this.dgs.columnResized.emit();
            }));
            return;
        }
        this.dfs.columnResizeEnd();
        this.dgs.columnResized.emit();
        this.updateFixedColumnCssForFastMode(col);
    }
    /**
     * 还原列宽
     * @return {?}
     */
    restituteColumnsSize() {
        this.dfs.resizeColumns(true);
        this.dgs.columnResized.emit();
    }
    /**
     * 单元格内容自适应列宽
     * @param {?} col
     * @param {?} th
     * @return {?}
     */
    sizeToContent(col, th) {
        if (!this.AutoColumnWidthUseDblclick) {
            return false;
        }
        /** @type {?} */
        let longestText = '';
        /** @type {?} */
        const items = this.data;
        for (let i = items.length - 1; i >= 0; i--) {
            // TFS: 356964 20200203
            /** @type {?} */
            let value = Utils.getValue(col.field, items[i]);
            if (value !== 0) {
                value = value || '';
            }
            /** @type {?} */
            let text = '' + value;
            if (col.formatter && value !== undefined) {
                text = this.colFormatSer.format(value, items[i], col.formatter);
            }
            if (Utils.getBLen(text) > Utils.getBLen(longestText)) {
                longestText = text;
            }
            else {
                this.longTextArea.nativeElement.innerHTML = text;
                /** @type {?} */
                const w1 = this.longTextArea.nativeElement.offsetWidth;
                this.longTextArea.nativeElement.innerHTML = longestText;
                /** @type {?} */
                const w2 = this.longTextArea.nativeElement.offsetWidth;
                if (w1 > w2) {
                    longestText = text;
                }
            }
        }
        this.longTextArea.nativeElement.innerHTML = longestText;
        /** @type {?} */
        const maxWidth = this.longTextArea.nativeElement.offsetWidth + 26;
        this.longTextArea.nativeElement.innerHTML = th.nativeElement.innerText;
        /** @type {?} */
        let thMinWidth = this.longTextArea.nativeElement.offsetWidth + 26;
        if (col.sortable) {
            thMinWidth += 24;
        }
        col.width = (maxWidth > thMinWidth ? maxWidth : thMinWidth);
        /** @type {?} */
        const colIndex = this.flatColumns.findIndex((/**
         * @param {?} c
         * @return {?}
         */
        c => c.field === col.field));
        if (colIndex === this.flatColumns.length - 1) {
            col.width += 6;
        }
        this.dfs.resizeColumns();
        this.dgs.columnResized.emit();
    }
    //#endregion
    //#region Changes
    /**
     * @return {?}
     */
    getChanges() {
        return this.dfs.getChanges();
    }
    /**
     * @return {?}
     */
    acceptChanges() {
        this.dfs.acceptChanges();
    }
    /**
     * @return {?}
     */
    rejectChanges() {
        this.dfs.rejectChanges();
    }
    //#endregion
    //#region CRUD
    /**
     * @param {?} row
     * @return {?}
     */
    appendRow(row) {
        this.cancelEdit(null);
        this.dfs.appendRow(row);
        this.dataChange.emit(this.dfs.getData());
        this.rowAppended.emit();
    }
    /**
     * @param {?} rowId
     * @param {?} newData
     * @return {?}
     */
    updateRow(rowId, newData) {
        this.dfs.updateRow(rowId, newData);
        this.dataChange.emit(this.dfs.getData());
        this.rowUpdated.emit();
    }
    /**
     * @param {?} rowId
     * @return {?}
     */
    refreshRow(rowId) {
        /** @type {?} */
        const row = this.dfs.findRow(rowId);
        if (row && row.data) {
            this.dfs.rowUpdate$.emit(row);
        }
        else {
            this.writeConsole('Can not found row by id. id: ' + rowId);
        }
    }
    /**
     * @param {?=} rowId
     * @return {?}
     */
    deleteRow(rowId) {
        this.cancelEdit(rowId, false);
        if (!rowId) {
            if (this.selectValue) {
                rowId = this.selectValue;
            }
            else {
                throw new Error(`删除行时主键标识ID 不能为空。`);
            }
        }
        /** @type {?} */
        const deleteRow = this.dfs.deleteRow(rowId);
        this.dataChange.emit(this.dfs.getData());
        this.currentCell = null;
        this.dfs.updateProperty('currentCell', null);
        this.cd.detectChanges();
        this.rowDeleted.emit(deleteRow);
    }
    /**
     * @return {?}
     */
    validateRow() { }
    /**
     * @return {?}
     */
    insertRow() { }
    //#endregion
    //#region Scrolling
    /**
     * @return {?}
     */
    scrollToLeft() {
        if (this.scrollInstance) {
            this.scrollInstance.scrollToLeft(0, 200);
        }
    }
    /**
     * @return {?}
     */
    scrollToRight() {
        if (this.scrollInstance) {
            this.scrollInstance.scrollToRight(0, 200);
        }
    }
    /**
     * @return {?}
     */
    scrollToTop() {
        if (this.scrollInstance) {
            this.scrollInstance.scrollToTop(0, 100);
            this.dfs.updateProperty('scrollInfo', { y: 0, x: 0 });
        }
    }
    /**
     * @return {?}
     */
    scrollToBottom() {
        if (this.scrollInstance) {
            this.scrollInstance.scrollToBottom(0, 100);
        }
    }
    //#endregion
    /**
     * @private
     * @param {?} cols
     * @param {?} field
     * @param {?=} readonly
     * @return {?}
     */
    _setColumnReadonly(cols, field, readonly = true) {
        if (cols && cols.length && field) {
            /** @type {?} */
            const col = cols.find((/**
             * @param {?} n
             * @return {?}
             */
            n => n.field === field));
            if (col) {
                col.readonly = readonly;
            }
        }
    }
    /**
     * @param {?} field
     * @param {?=} readonly
     * @return {?}
     */
    setColumnReadonly(field, readonly = true) {
        this._setColumnReadonly(this.colGroup.leftFixed, field, readonly);
        this._setColumnReadonly(this.colGroup.rightFixed, field, readonly);
        this._setColumnReadonly(this.colGroup.normalColumns, field, readonly);
    }
    // 是否为多表头
    /**
     * @return {?}
     */
    isMultiHeader() {
        return this.columns && this.columns.length > 1 && Array.isArray(this.columns[1]);
    }
    /**
     * @param {?} fields
     * @param {?=} visible
     * @return {?}
     */
    toggleVisibleColumn(fields, visible = true) {
        if (!this.isMultiHeader()) {
            this.columns.forEach((/**
             * @param {?} cols
             * @return {?}
             */
            (cols) => {
                fields.forEach((/**
                 * @param {?} field
                 * @return {?}
                 */
                field => {
                    /** @type {?} */
                    const col = cols.find((/**
                     * @param {?} c
                     * @return {?}
                     */
                    c => c.field === field || c.id === field));
                    if (col) {
                        col.visible = visible;
                    }
                }));
            }));
        }
        else {
            // 多表头
            /** @type {?} */
            const allCols = flatten(this.columns);
            allCols.forEach((/**
             * @param {?} p
             * @return {?}
             */
            p => {
                if (p.origianlColSpan === undefined) {
                    p.origianlColSpan = p.colspan;
                }
            }));
            fields.forEach((/**
             * @param {?} field
             * @return {?}
             */
            field => {
                /** @type {?} */
                const _col = allCols.find((/**
                 * @param {?} col
                 * @return {?}
                 */
                col => col.field === field || col.id === field));
                if (_col) {
                    if (_col.visible === visible) {
                        return;
                    }
                    _col.visible = visible;
                    /** @type {?} */
                    const parents = DatagridColumnsHelper.getParentColumns(_col, allCols);
                    /** @type {?} */
                    const childs = DatagridColumnsHelper.getChildColumns(_col, allCols);
                    childs.forEach((/**
                     * @param {?} c
                     * @return {?}
                     */
                    c => {
                        c.visible = visible;
                    }));
                    if (visible && childs.length) {
                        _col.colspan = _col.origianlColSpan;
                    }
                    /** @type {?} */
                    const _colspan = _col.colspan || 1;
                    parents.forEach((/**
                     * @param {?} p
                     * @return {?}
                     */
                    p => {
                        if (!visible) {
                            p.colspan = p.colspan - _colspan;
                        }
                        else {
                            /** @type {?} */
                            const _childs = allCols.filter((/**
                             * @param {?} n
                             * @return {?}
                             */
                            n => n.parentId === p.id && n.visible));
                            p.colspan = _childs.reduce((/**
                             * @param {?} r
                             * @param {?} c
                             * @return {?}
                             */
                            (r, c) => {
                                r = r + (c.colspan || 1);
                                return r;
                            }), 0);
                        }
                        p.visible = !!p.colspan;
                    }));
                }
            }));
        }
    }
    /**
     * @param {?} field
     * @return {?}
     */
    getColumn(field) {
        /** @type {?} */
        const allCols = flatten(this.columns);
        return allCols.find((/**
         * @param {?} n
         * @return {?}
         */
        n => n.field === field || n.id === field));
    }
    /**
     * @param {?} field
     * @param {?=} reload
     * @return {?}
     */
    showColumn(field, reload = true) {
        if (typeof field === 'string') {
            this.toggleVisibleColumn([field], true);
        }
        else {
            this.toggleVisibleColumn(field, true);
        }
        this.columnsChanged(reload);
    }
    /**
     * @param {?} field
     * @param {?=} reload
     * @return {?}
     */
    hideColumn(field, reload = true) {
        if (typeof field === 'string') {
            this.toggleVisibleColumn([field], false);
        }
        else {
            this.toggleVisibleColumn(field, false);
        }
        this.columnsChanged(reload);
    }
    /**
     * @param {?} field
     * @param {?} columnObject
     * @param {?=} detectChange
     * @return {?}
     */
    updateColumn(field, columnObject, detectChange = true) {
        this.columns.forEach((/**
         * @param {?} cols
         * @return {?}
         */
        (cols) => {
            /** @type {?} */
            let column = cols.find((/**
             * @param {?} col
             * @return {?}
             */
            col => col.field === field));
            if (column) {
                column = Object.assign(column, columnObject);
            }
        }));
        if (detectChange) {
            this.columnsChanged();
        }
    }
    /**
     * @param {?} field
     * @param {?} formatter
     * @param {?=} detectChange
     * @return {?}
     */
    setColumnFormatter(field, formatter, detectChange = true) {
        this.columns.forEach((/**
         * @param {?} cols
         * @return {?}
         */
        (cols) => {
            /** @type {?} */
            const column = cols.find((/**
             * @param {?} col
             * @return {?}
             */
            col => col.field === field));
            if (column) {
                column.formatter = formatter;
            }
        }));
        if (detectChange) {
            this.columnsChanged();
        }
    }
    /**
     * @param {?} field
     * @param {?} formatterOptions
     * @param {?=} detectChange
     * @return {?}
     */
    updateColumnFormatterOptions(field, formatterOptions, detectChange = true) {
        this.columns.forEach((/**
         * @param {?} cols
         * @return {?}
         */
        (cols) => {
            /** @type {?} */
            const column = cols.find((/**
             * @param {?} col
             * @return {?}
             */
            col => col.field === field));
            if (column && column.formatter) {
                /** @type {?} */
                const colFormatter = (/** @type {?} */ (column.formatter));
                colFormatter.options = colFormatter.options || {};
                colFormatter.options = Object.assign(colFormatter.options, formatterOptions || {});
            }
        }));
        if (detectChange) {
            this.columnsChanged();
        }
    }
    /**
     * @param {?} field
     * @param {?} title
     * @param {?=} detectChange
     * @return {?}
     */
    setColumnTitle(field, title, detectChange = true) {
        this.columns.forEach((/**
         * @param {?} cols
         * @return {?}
         */
        (cols) => {
            /** @type {?} */
            const column = cols.find((/**
             * @param {?} col
             * @return {?}
             */
            col => col.field === field));
            if (column) {
                column.title = title;
            }
        }));
        if (detectChange) {
            this.columnsChanged();
        }
    }
    /**
     * 排序
     * @param {?=} sortName 排序字段，如： 'name,age'
     * @param {?=} sortOrder 排序方式，如：'desc, asc'
     * @return {?}
     */
    sort(sortName, sortOrder) {
        if (sortName === null || sortName === '' || sortOrder === null || sortOrder === '') {
            this.clearSort();
        }
        else {
            if (sortName && sortOrder) {
                // this.updateSortInfo(sortName, sortOrder);
                this.sortName = sortName;
                this.sortOrder = sortOrder;
                this.dfs.setSortInfo(this.sortName, this.sortOrder);
            }
            if (!this.remoteSort) {
                this.dfs.clientSort();
            }
            this.onColumnSorted();
        }
    }
    /**
     * @return {?}
     */
    clearSort() {
        this.sortName = '';
        this.sortOrder = '';
        this.dfs.setSortInfo('', '');
        if (!this.remoteSort) {
            if (this.data && this.data.length) {
                this.dfs.clearSort();
            }
        }
        this.onColumnSorted();
    }
    /**
     * @return {?}
     */
    onColumnSorted() {
        /** @type {?} */
        let params = null;
        if (this.sortName && this.sortOrder) {
            /** @type {?} */
            const orders = this.sortOrder.split(',');
            params = this.sortName.split(',').reduce((/**
             * @param {?} r
             * @param {?} n
             * @param {?} i
             * @return {?}
             */
            (r, n, i) => {
                r[n] = orders[i] || 'asc';
                return r;
            }), {});
        }
        if (!this.remoteSort) {
            this.dfs.clientSort();
        }
        this.columnSorted.emit(params);
    }
    /**
     * @param {?} newSortName
     * @param {?} newSortOrder
     * @return {?}
     */
    updateSortInfo(newSortName, newSortOrder) {
        /** @type {?} */
        const sortName = this.sortName;
        /** @type {?} */
        const sortOrder = this.sortOrder;
        /** @type {?} */
        let sortFields = [];
        /** @type {?} */
        let sortOrders = [];
        if (sortName) {
            sortFields = sortName.split(',');
            sortOrders = sortOrder.split(',');
        }
        /** @type {?} */
        const _sortFields = newSortName.split(',');
        /** @type {?} */
        const _sortOrders = newSortOrder.split(',');
        _sortFields.forEach((/**
         * @param {?} nField
         * @param {?} nIndex
         * @return {?}
         */
        (nField, nIndex) => {
            /** @type {?} */
            const colOrder = _sortOrders[nIndex] || 'asc';
            /** @type {?} */
            let newOrder = colOrder;
            /** @type {?} */
            const i = sortFields.findIndex((/**
             * @param {?} n
             * @return {?}
             */
            n => n === nField));
            if (i >= 0) {
                /** @type {?} */
                const _order = sortOrders[i] === 'asc' ? 'desc' : 'asc';
                newOrder = _order;
                if (this.multiSort && newOrder === 'asc') {
                    newOrder = undefined;
                    sortFields.splice(i, 1);
                    sortOrders.splice(i, 1);
                }
                else {
                    sortOrders[i] = _order;
                }
            }
            else {
                if (this.multiSort) {
                    sortFields.push(nField);
                    sortOrders.push(colOrder);
                }
                else {
                    sortFields = [nField];
                    sortOrders = [colOrder];
                }
            }
        }));
        this.sortName = sortFields.join(',');
        this.sortOrder = sortOrders.join(',');
    }
    /**
     * 列设置
     * @param {?} $event
     * @return {?}
     */
    showControlPanel($event) {
        $event.stopPropagation();
        /** @type {?} */
        const self = this;
        if (this.useControlPanel && this.settingService) {
            this.checkSettingHttp();
            this.settingService.show(self);
        }
    }
    /**
     * @return {?}
     */
    checkSettingHttp() {
        if (!this.settingService.httpRestService || !this.settingService.httpRestService.befRepository) {
            /** @type {?} */
            const settingsHttp = this.inject.get(GRID_SETTINGS_HTTP, null);
            this.settingService.httpRestService = settingsHttp;
        }
    }
    /**
     * @param {?=} flag
     * @return {?}
     */
    disableHeader(flag = true) {
        this.dgs.disableHeader.emit(flag);
    }
    /**
     * 获取用户个性化设置
     * @private
     * @param {?} settings
     * @return {?}
     */
    userProfileSetting(settings) {
        const { sortInfo, viewColumns, groupField, columnFormat, expandGroupRows } = settings;
        /** @type {?} */
        let _sortName;
        /** @type {?} */
        let _sortOrder;
        if (sortInfo) {
            const { sortName, sortOrder } = sortInfo;
            _sortName = sortName;
            _sortOrder = sortOrder;
            if (sortName && sortName.length) {
                this.sortName = sortName.join(',');
                if (sortOrder) {
                    this.sortOrder = sortOrder.join(',');
                }
            }
            this['__sortInfo'] = sortInfo;
        }
        if (viewColumns && viewColumns.length) {
            this.columns = this.columns.map((/**
             * @param {?} cols
             * @return {?}
             */
            cols => {
                this.settingService.updateColumnFormat(cols, columnFormat, this);
                return this.settingService.newVisibleOrderColumns(cols, viewColumns, columnFormat, this);
            }));
            this.addControlCol();
            this.columns.forEach((/**
             * @param {?} cols
             * @return {?}
             */
            cols => {
                cols.forEach((/**
                 * @param {?} col
                 * @return {?}
                 */
                col => {
                    if (_sortName && _sortName.length) {
                        /** @type {?} */
                        const i = _sortName.indexOf(col.field);
                        if (i > -1) {
                            col.order = _sortOrder[i];
                        }
                    }
                }));
            }));
        }
        if (this.groupRows && (groupField !== null && groupField !== undefined)) {
            this.groupField = groupField;
            this.expandGroupRows = expandGroupRows === undefined ? this.expandGroupRows : expandGroupRows;
        }
    }
    // 是否为当前活动的表格
    /**
     * @private
     * @return {?}
     */
    isActived() {
        return DomHandler.hasClass(this.dgContainer.nativeElement, this._active_datagrid_cls);
    }
    // 清理无效的DOM
    /**
     * @private
     * @return {?}
     */
    cleanDom() {
        // 清理 TOOL-TIP
        /** @type {?} */
        const tips = document.querySelectorAll('.datagrid-cell-tooltip');
        if (tips && tips.length) {
            tips.forEach((/**
             * @param {?} n
             * @return {?}
             */
            n => {
                n.remove();
            }));
        }
    }
    /**
     * @param {?} col
     * @param {?} rowData
     * @return {?}
     */
    cellIsReadOnly(col, rowData) {
        /** @type {?} */
        let readOnly = false;
        if (this.disableRow) {
            readOnly = this.disableRow(rowData);
        }
        if (!readOnly) {
            if (col.readonly !== undefined) {
                if (typeof col.readonly === 'boolean') {
                    readOnly = col.readonly;
                }
                else if (typeof col.readonly === 'function') {
                    readOnly = col.readonly(rowData);
                }
            }
        }
        return readOnly;
    }
    /**
     * @private
     * @return {?}
     */
    groupFieldChanged() {
        this.columnsChanged();
        if (this.settingService) {
            this.checkSettingHttp();
            this.settingService.saveUserConfig(this.id).subscribe();
        }
        this.groupFieldChange.emit({ newGroupField: this.groupField, grid: this });
    }
    /**
     * @param {?} field
     * @return {?}
     */
    removeGroupField(field) {
        /** @type {?} */
        const fields = this.groupField.split(',');
        /** @type {?} */
        const delIdx = fields.indexOf(field);
        if (delIdx > -1) {
            fields.splice(delIdx, 1).join(',');
        }
        this.groupField = fields.join(',');
        this.toggleVisibleColumn([field], true);
        this.groupFieldChanged();
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    clearAllGrouppingField($event) {
        this.showLoading();
        setTimeout((/**
         * @return {?}
         */
        () => {
            /** @type {?} */
            const fields = this.groupField.split(',');
            this.groupField = '';
            this.toggleVisibleColumn(fields, true);
            this.groupFieldChanged();
            this.closeLoading();
        }));
    }
    /**
     * @param {?} groupFields
     * @return {?}
     */
    setGroupFields(groupFields) {
        this.groupField = groupFields;
        this.columnsChanged();
    }
    /**
     * @param {?=} active
     * @return {?}
     */
    activeDataGrid(active = true) {
        /** @type {?} */
        const grids = document.querySelectorAll('.f-datagrid.datagrid-active');
        if (grids.length) {
            grids.forEach((/**
             * @param {?} n
             * @return {?}
             */
            n => {
                this.render2.removeClass(n, this._active_datagrid_cls);
            }));
        }
        if (active) {
            this.render2.addClass(this.dgContainer.nativeElement, this._active_datagrid_cls);
        }
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    onDatagridContainerFocus($event) {
        if (!this.disabled) {
            this.activeDataGrid();
        }
    }
    /**
     * @private
     * @return {?}
     */
    setShadowColumnForFastMode() {
        if (this.fast) {
            /** @type {?} */
            const fixedLeft = this.flatColumns.filter((/**
             * @param {?} n
             * @return {?}
             */
            n => n.fixed === 'left'));
            /** @type {?} */
            const fixedRight = this.flatColumns.filter((/**
             * @param {?} n
             * @return {?}
             */
            n => n.fixed === 'right'));
            if (fixedLeft && fixedLeft.length) {
                /** @type {?} */
                let leftWidthTotal = 0;
                if (this.showCheckbox) {
                    leftWidthTotal += 36;
                }
                if (this.showLineNumber) {
                    leftWidthTotal += this.lineNumberWidth;
                }
                fixedLeft.forEach((/**
                 * @param {?} n
                 * @param {?} index
                 * @return {?}
                 */
                (n, index) => {
                    leftWidthTotal += index ? fixedLeft[index - 1].width : 0;
                    n.left = leftWidthTotal;
                }));
                fixedLeft[fixedLeft.length - 1]['leftShadowCol'] = true;
                this.dfs.getColumn(fixedLeft[fixedLeft.length - 1].field)['leftShadowCol'] = true;
            }
            if (fixedRight && fixedRight.length) {
                fixedRight[0]['rightShadowCol'] = true;
                /** @type {?} */
                let rightWidthTotal = fixedRight.reduce((/**
                 * @param {?} r
                 * @param {?} c
                 * @return {?}
                 */
                (r, c) => {
                    return r + c.width;
                }), 0);
                fixedRight.forEach((/**
                 * @param {?} n
                 * @param {?} index
                 * @return {?}
                 */
                (n, index) => {
                    rightWidthTotal -= n.width;
                    n.right = rightWidthTotal;
                }));
                this.dfs.getColumn(fixedRight[0].field)['rightShadowCol'] = true;
            }
        }
    }
    // 单元对齐方式样式动态生成
    /**
     * @private
     * @return {?}
     */
    setCellStyle() {
        if (!this.flatColumns || !this.flatColumns.length) {
            return;
        }
        /** @type {?} */
        const cssarr = [];
        /** @type {?} */
        const verticalAlign = (/**
         * @param {?} column
         * @return {?}
         */
        (column) => {
            /** @type {?} */
            let va = 'center';
            switch (column.valign) {
                case 'top':
                    va = 'flex-start';
                    break;
                case 'bottom':
                    va = 'flex-end';
                    break;
                default:
                    va = 'center';
                    break;
            }
            return va;
        });
        /** @type {?} */
        const horizontalAlign = (/**
         * @param {?} column
         * @return {?}
         */
        (column) => {
            /** @type {?} */
            let ha = 'flex-start';
            if (column.align === 'right') {
                ha = 'flex-end';
            }
            else if (column.align === 'center') {
                ha = 'center';
            }
            return ha;
        });
        this.setShadowColumnForFastMode();
        this.flatColumns.forEach((/**
         * @param {?} col
         * @return {?}
         */
        col => {
            /** @type {?} */
            const css = `${this.customStyleKey()} .cell-text-align__${col.field} {align-items: ${verticalAlign(col)}, justify-content: ${horizontalAlign(col)}}`;
            cssarr.push(css);
            if (this.fast) {
                if (col.fixed === 'left' || col.fixed === 'right') {
                    /** @type {?} */
                    let fixed = `${this.customStyleKey()} .f-datagrid-fast__fixed-${col.fixed}[field="${col.field}"]{`;
                    if (col.fixed === 'left') {
                        fixed += `left: ${col.left}px}`;
                    }
                    if (col.fixed === 'right') {
                        fixed += `right: ${col.right}px}`;
                    }
                    cssarr.push(fixed);
                }
            }
        }));
        this.dgs.appendCssRules(cssarr);
    }
    /**
     * @private
     * @param {?} col
     * @return {?}
     */
    updateFixedColumnCssForFastMode(col) {
        if (this.fast) {
            // update css.
            /** @type {?} */
            const colIndex = this.flatColumns.findIndex((/**
             * @param {?} n
             * @return {?}
             */
            n => n.field === col.field));
            /** @type {?} */
            const nextColumn = this.flatColumns[colIndex + 1];
            this.setShadowColumnForFastMode();
            if (nextColumn && nextColumn.fixed) {
                /** @type {?} */
                const ruleName = `${this.customStyleKey()} .f-datagrid-fast__fixed-${nextColumn.fixed}[field="${nextColumn.field}"]`;
                /** @type {?} */
                const stylecss = ruleName + '{' + nextColumn.fixed + ':' + nextColumn[nextColumn.fixed] + 'px}';
                this.dgs.appendCssRules([stylecss]);
            }
        }
    }
    /**
     * @param {?} groupRowIndex
     * @return {?}
     */
    expandGroupRow(groupRowIndex) {
        this.dgs.toggleGroupRow$.emit({ expand: true, groupRowIndex });
    }
    /**
     * @param {?} groupRowIndex
     * @return {?}
     */
    collapseGroupRow(groupRowIndex) {
        this.dgs.toggleGroupRow$.emit({ expand: false, groupRowIndex });
    }
    /**
     * @return {?}
     */
    expandAllGroupRows() {
        this.dgs.toggleAllGroupRows$.emit({ expand: true });
    }
    /**
     * @return {?}
     */
    collapseAllGroupRows() {
        this.dgs.toggleAllGroupRows$.emit({ expand: false });
    }
}
DatagridComponent.decorators = [
    { type: Component, args: [{
                selector: 'farris-datagrid',
                template: "<!--\r\n * @Author: \u75AF\u72C2\u79C0\u624D(Lucas Huang)\r\n * @Date: 2019-08-10 11:02:50\r\n * @LastEditors: \u75AF\u72C2\u79C0\u624D(Lucas Huang)\r\n * @LastEditTime: 2019-11-18 15:48:39\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n -->\r\n\r\n<div #datagridContainer *ngIf=\"!useHtmlTable\"  tabindex=\"0\" style=\"outline: 0;\" hidefocus=\"true\" class=\"f-datagrid\" [ngStyle]=\"gridSize\"  [attr.id]=\"id\"\r\n    [class.f-datagrid-rowhover]=\"rowHover\" [class.f-datagrid-bordered]=\"showBorder\" [class.f-datagrid-wrap]=\"!nowrap\" [class.f-datagrid-strip]=\"striped\"\r\n    [class.f-datagrid-mergecell]=\"mergeCell\" [class.f-datagrid-enable-highlight]=\"enableHighlightCell\" [class.f-datagrid-fast]=\"fast\" \r\n    [class.highlight-allowedit-cell]=\"enableEditCellStyle && editable\" [class.scrollbar-allways-show]=\"scrollBarShowMode === 'allways'\" [class.scroolbar-arrows]=\"showScrollArrow\"\r\n    [class.f-datagrid-sm]=\"sizeType === 'sm'\" [class.f-datagrid-lg]=\"sizeType === 'lg'\" [class.f-datagrid-xl]=\"sizeType === 'xl'\"\r\n    (focus)=\"onDatagridContainerFocus($event)\" >\r\n    <div class=\"f-datagrid-column-drop-panel d-flex flex-row\" *ngIf=\"showRowGroupPanel\"\r\n        [style.height.px]=\"rowGroupPanelHeight\" [style.top.px]=\"showFilterBar ? (filterBarHeight): 0\"\r\n        [attr.placeholder]=\"groupField ? '': groupRowPanelPlaceholder\" [style.pointer-events]=\"editable ? 'none': ''\">\r\n        <div class=\"row-group-fields flex-fill\" drop-column style=\"display: inline-block!important;\">\r\n            <div class=\"group-field smooth-dnd-draggable-wrapper\" *ngFor=\"let f of groupFields$ | async\">{{ dfs.getColumn(f)?.title }}\r\n                <span class=\"f-icon f-icon-x\" title=\"{{ 'datagrid.groupRow.removeColumn'| locale }}\" (click)=\"removeGroupField(f)\"></span>\r\n            </div>\r\n        </div>\r\n        <button class=\"f-datagrid-clear-group-field btn btn-light ml-auto\"\r\n        title=\"{{'datagrid.groupRow.clearTip' | locale}}\" (click)=\"clearAllGrouppingField($event)\" [style.display]=\"groupField ? '' : 'none'\">\r\n            <span class=\"f-icon f-icon-remove\"></span> {{'datagrid.groupRow.clear' | locale}}\r\n        </button>\r\n    </div>\r\n    \r\n    <filter-toolbar #filterText *ngIf=\"enableFilterRow && showFilterBar\"></filter-toolbar>\r\n    <smart-filter-toolbar #smartfiltertoolbar *ngIf=\"enableSmartFilter && showFilterBar\"\r\n    [height]=\"filterBarHeight\"\r\n    [filterData]=\"smartFilterResult?.controlData || []\" \r\n    (clearFilters)=\"onClearSmartFilters($event)\"\r\n    (removeFilter)=\"onRemoveSmartFilterItem($event)\"\r\n    [padding]=\"showBorder && filterBarHeight ? '3px': ''\"\r\n    (resize)=\"onFilterBarResize($event)\"\r\n    (filterChange)=\"onSmartFilterChange($event)\"></smart-filter-toolbar>\r\n\r\n    <datagrid-header class=\"d-flex flex-fill\" *ngIf=\"showHeader\" #header [fast]=\"fast\"\r\n    [columns]=\"columns\" [columnsGroup]=\"colGroup\" [height]=\"realHeaderHeight\"\r\n    [style.height.px]=\"realHeaderHeight\" style=\"position: relative;width:100%;\" \r\n    [enableDragColumn]=\"enableDragColumn\" [wrapHeader]=\"headerWrap\"\r\n    [enableFilterRow]=\"enableFilterRow\" [scrollbarMode]=\"scrollBarShowMode\"></datagrid-header>\r\n\r\n\r\n    <datagrid-footer [height]=\"footerHeight\" [width]=\"footerWidth\" [columnsGroup]=\"colGroup\" [position]=\"'top'\"\r\n    [columns]=\"colGroup?.normalColumns\" [data]=\"footerData | async\" \r\n    [hasFixedColumns]=\"colGroup?.leftFixed && colGroup?.leftFixed?.length\" [fast]=\"fast\"\r\n    *ngIf=\"(footerPosition==='top' || footerPosition === 'both') && showFooter && ((ds && ds.rows && ds.rows.length) || (footerData | async).length)\"></datagrid-footer>\r\n\r\n    <datagrid-body [columnsGroup]=\"colGroup\" [data]=\"ds.rows | paginate: pagerOpts\" (dataChange)=\"setCurrentPagerData($event)\"\r\n        [startRowIndex]=\"ds.index\" [checkedRows]=\"checkedRows\" cell-tooltip [canvasWidth]=\"colGroup?.totalWidth\"\r\n        [topHideHeight]=\"ds.top\" [bottomHideHeight]=\"ds.bottom\" [footerHeight]=\"footerHeight\"\r\n        [scrollBarMode]=\"scrollBarShowMode\" [contextMenuItems]=\"contextMenus\"  [fast]=\"fast\"></datagrid-body>\r\n\r\n    <datagrid-footer [height]=\"footerHeight\" [width]=\"footerWidth\" [columnsGroup]=\"colGroup\" [position]=\"'bottom'\"\r\n    [columns]=\"colGroup?.normalColumns\" [data]=\"footerData | async\"  [fast]=\"fast\"\r\n    [hasFixedColumns]=\"colGroup?.leftFixed && colGroup?.leftFixed?.length\" \r\n    *ngIf=\"(footerPosition==='bottom' || footerPosition === 'both') && showFooter && ((ds && ds.rows && ds.rows.length) || (footerData | async).length)\"></datagrid-footer>\r\n    \r\n    <datagrid-pager *ngIf=\"pagination\" #dgPager \r\n        [showPageList]=\"showPageList\"\r\n        [id]=\"pagerOpts.id\" [locked]=\"lockPagination\"\r\n        [showPageInfo]=\"showPageInfo\"\r\n        [viewMode]=\"pagerViewMode\"\r\n        [showPageNumber] = \"showPageNumber\"\r\n        [maxSize]=\"pagerLabelSize\"\r\n        [showSelectedList]=\"showSelectedList && multiSelect\"\r\n        [selectedData]=\"checkedRows\"\r\n        [showGotoInput]=\"showGotoInput\"\r\n        (pageChange)=\"onPageChange($event)\"\r\n        (pageSizeChange)=\"onPageSizeChange($event)\"\r\n        (removeSelectedItem)=\"onRemoveSelectedItem($event)\"\r\n        (clearSelectedItem)=\"onClearSelectedItem($event)\"\r\n        [listItemFormatter]=\"selectedItemFormatter\"\r\n        [contentTemplate]=\"pagerContentTemplate\"\r\n        [data]=\"footerData | async\"\r\n        [pagerPos]=\"pagerPos\"\r\n        ></datagrid-pager>\r\n\r\n    <div class=\"f-datagrid-resize-bg\" #resizeProxyBg></div>\r\n    <div #resizeProxy class=\"f-datagrid-resize-proxy\" *ngIf=\"resizeColumn\"></div>\r\n    \r\n    <datagrid-loading *ngIf=\"loading\"></datagrid-loading>\r\n    <div style=\"position: absolute; left: -1000px; top: -1000px;visibility: hidden;\" #longTextArea></div>\r\n    <div class=\"f-datagrid-disabled\" style=\"position: absolute;\r\n        background: #fff;\r\n        height: 100%;\r\n        width: 100%;\r\n        z-index: 99;\r\n        opacity: .3;\" *ngIf=\"disabled\">\r\n    </div>\r\n</div>\r\n\r\n\r\n<div #datagridContainer\r\nclass=\"f-datagrid f-datagrid-htmltable\" [attr.id]=\"id\"\r\n[class.f-datagrid-rowhover]=\"rowHover\"\r\n[class.f-datagrid-bordered]=\"showBorder\"\r\n[class.f-datagrid-wrap]=\"!nowrap\"\r\n[class.f-datagrid-strip]=\"striped\" \r\n[class.f-datagrid-md]=\"sizeType === 'md'\"\r\n[class.f-datagrid-sm]=\"sizeType === 'sm'\" [class.f-datagrid-lg]=\"sizeType === 'lg'\" [class.f-datagrid-xl]=\"sizeType === 'xl'\"\r\n*ngIf=\"useHtmlTable\" style=\"border-right: 0px; border-bottom: 0px; overflow: auto\">\r\n\r\n    <auto-height [columnsGroup]=\"colGroup\" [columns]=\"columns\" [data]=\"ds.rows\"></auto-height>\r\n</div>\r\n",
                encapsulation: ViewEncapsulation.None,
                changeDetection: ChangeDetectionStrategy.OnPush,
                providers: [
                    DatagridFacadeService,
                    DatagridService,
                    DatagridSmartFilterService
                ],
                exportAs: 'datagrid',
                styles: [`.f-datagrid-header table{
            background-color: #F1F3F7;
        }`]
            }] }
];
/** @nocollapse */
DatagridComponent.ctorParameters = () => [
    { type: ChangeDetectorRef },
    { type: ElementRef },
    { type: Injector },
    { type: NgZone },
    { type: DatagridFacadeService },
    { type: DatagridService },
    { type: ApplicationRef },
    { type: DomSanitizer },
    { type: Renderer2 }
];
DatagridComponent.propDecorators = {
    fast: [{ type: Input }],
    pos: [{ type: HostBinding, args: ['style.position',] }],
    hostCls: [{ type: HostBinding, args: ['class.f-datagrid-full',] }],
    autoHeightCls: [{ type: HostBinding, args: ['class.f-datagrid-auto-height',] }],
    useThemes: [{ type: Input }],
    id: [{ type: Input }],
    useHtmlTable: [{ type: Input }],
    autoHeight: [{ type: Input }],
    maxHeight: [{ type: Input }],
    showBorder: [{ type: Input }],
    striped: [{ type: Input }],
    width: [{ type: Input }],
    height: [{ type: Input }],
    showHeader: [{ type: Input }],
    headerHeight: [{ type: Input }],
    headerWrap: [{ type: Input }],
    showFooter: [{ type: Input }],
    footerHeight: [{ type: Input }],
    footerDataFrom: [{ type: Input }],
    footerTemplate: [{ type: Input }],
    footerPosition: [{ type: Input }],
    footerStyler: [{ type: Input }],
    rowHeight: [{ type: Input }],
    sizeType: [{ type: Input }],
    fit: [{ type: Input }],
    fitColumns: [{ type: Input }],
    autoFitColumns: [{ type: Input }],
    disabled: [{ type: Input }],
    scrollBarShowMode: [{ type: Input }],
    scrollBarOptions: [{ type: Input }],
    showScrollArrow: [{ type: Input }],
    resizeColumn: [{ type: Input }],
    showLineNumber: [{ type: Input }],
    lineNumberTitle: [{ type: Input }],
    lineNumberWidth: [{ type: Input }],
    rowHover: [{ type: Input }],
    clickToEdit: [{ type: Input }],
    lockPagination: [{ type: Input }],
    pagination: [{ type: Input }],
    pagerContentTemplate: [{ type: Input }],
    pagerPos: [{ type: Input }],
    pagerViewMode: [{ type: Input }],
    pagerOnServer: [{ type: Input }],
    pageList: [{ type: Input }],
    pageIndex: [{ type: Input }],
    pageSize: [{ type: Input }],
    pagerHeight: [{ type: Input }],
    showPageList: [{ type: Input }],
    showPageInfo: [{ type: Input }],
    showPageNumber: [{ type: Input }],
    pagerLabelSize: [{ type: Input }],
    showGotoInput: [{ type: Input }],
    enableMorePageSelect: [{ type: Input }],
    showSelectedList: [{ type: Input }],
    selectedItemFormatter: [{ type: Input }],
    cellTipTimer: [{ type: Input }],
    controlPaginationState: [{ type: Input }],
    total: [{ type: Input }],
    enableSelectRow: [{ type: Input }],
    multiSelect: [{ type: Input }],
    showCheckbox: [{ type: Input }],
    showAllCheckbox: [{ type: Input }],
    onlySelectSelf: [{ type: Input }],
    checkOnSelect: [{ type: Input }],
    selectOnCheck: [{ type: Input }],
    selectionMode: [{ type: Input }],
    keepSelect: [{ type: Input }],
    useBlankWhenDataIsEmpty: [{ type: Input }],
    emptyDataHeight: [{ type: Input }],
    emptyMessage: [{ type: Input }],
    emptyTemplate: [{ type: Input }],
    idField: [{ type: Input }],
    url: [{ type: Input }],
    data: [{ type: Input }],
    footerData: [{ type: Input }],
    endEditByInvalid: [{ type: Input }],
    columns: [{ type: Input }],
    fields: [{ type: Input }],
    nowrap: [{ type: Input }],
    virtualized: [{ type: Input }],
    virtualizedAsyncLoad: [{ type: Input }],
    rowStyler: [{ type: Input }],
    editMode: [{ type: Input }],
    editable: [{ type: Input }],
    enableEditCellStyle: [{ type: Input }],
    selectOnEditing: [{ type: Input }],
    editorHeight: [{ type: Input }],
    remoteSort: [{ type: Input }],
    sortName: [{ type: Input }],
    sortOrder: [{ type: Input }],
    multiSort: [{ type: Input }],
    hoverRowCls: [{ type: Input }],
    enableDragColumn: [{ type: Input }],
    rowGroupPanelHeight: [{ type: Input }],
    groupRows: [{ type: Input }],
    groupFooter: [{ type: Input }],
    expandGroupRows: [{ type: Input }],
    groupFooterStyler: [{ type: Input }],
    groupSummaryPosition: [{ type: Input }],
    groupCellColSpan: [{ type: Input }],
    groupField: [{ type: Input }],
    showGroupColumn: [{ type: Input }],
    groupFormatter: [{ type: Input }],
    groupStyler: [{ type: Input }],
    showRowGroupPanel: [{ type: Input }],
    AutoColumnWidthUseDblclick: [{ type: Input }],
    disableRow: [{ type: Input }],
    useDefaultFilter: [{ type: Input }],
    enableSmartFilter: [{ type: Input }],
    enableFilterRow: [{ type: Input }],
    remoteFilter: [{ type: Input }],
    showFilterBar: [{ type: Input }],
    filterBarHeight: [{ type: Input }],
    filterRowHeight: [{ type: Input }],
    conditions: [{ type: Input }],
    selectValue: [{ type: Input }],
    checkValues: [{ type: Input }],
    selectValues: [{ type: Input }],
    mergeCell: [{ type: Input }],
    mergeFields: [{ type: Input }],
    enableClientSortForMergeCell: [{ type: Input }],
    useControlPanel: [{ type: Input }],
    enableSimpleMode: [{ type: Input }],
    controlPanelMode: [{ type: Input }],
    enableScheme: [{ type: Input }],
    defaultSchemeName: [{ type: Input }],
    stopPropagation: [{ type: Input }],
    closeOtherGridEditor: [{ type: Input }],
    clearSelectionsWhenDataIsEmpty: [{ type: Input }],
    enableContextMenu: [{ type: Input }],
    contextMenus: [{ type: Input }],
    selectValueChange: [{ type: Output }],
    checkValuesChange: [{ type: Output }],
    selectValuesChange: [{ type: Output }],
    beforeEdit: [{ type: Input }],
    beginEdit: [{ type: Output }],
    afterEdit: [{ type: Input }],
    endEdit: [{ type: Output }],
    cancelEdited: [{ type: Output }],
    scrollY: [{ type: Output }],
    pageSizeChanged: [{ type: Output }],
    pageChanged: [{ type: Output }],
    loadSuccess: [{ type: Output }],
    filterChanged: [{ type: Output }],
    beforeSelect: [{ type: Input }],
    beforeUnselect: [{ type: Input }],
    beforeCheck: [{ type: Input }],
    beforeUncheck: [{ type: Input }],
    beforeSortColumn: [{ type: Input }],
    enableHighlightCell: [{ type: Input }],
    checkedRowsDataFromSource: [{ type: Input }],
    editcellWhenTabKeydwon: [{ type: Input }],
    beforeClickCell: [{ type: Output }],
    dblclickRow: [{ type: Output }],
    selectChanged: [{ type: Output }],
    unSelect: [{ type: Output }],
    selectAll: [{ type: Output }],
    unSelectAll: [{ type: Output }],
    scrollYLoad: [{ type: Output }],
    checked: [{ type: Output }],
    unChecked: [{ type: Output }],
    checkAll: [{ type: Output }],
    unCheckAll: [{ type: Output }],
    checkedChange: [{ type: Output }],
    columnSorted: [{ type: Output }],
    rowClick: [{ type: Output }],
    rowAppended: [{ type: Output }],
    rowDeleted: [{ type: Output }],
    rowUpdated: [{ type: Output }],
    dataChange: [{ type: Output }],
    lastCellEnterHandler: [{ type: Output }],
    groupFieldChange: [{ type: Output }],
    columnMoved: [{ type: Output }],
    cellClick: [{ type: Output }],
    dgColumns: [{ type: ContentChildren, args: [DatagridColumnDirective,] }],
    dgPager: [{ type: ViewChild, args: ['dgPager',] }],
    resizeProxy: [{ type: ViewChild, args: ['resizeProxy',] }],
    resizeProxyBg: [{ type: ViewChild, args: ['resizeProxyBg',] }],
    dgContainer: [{ type: ViewChild, args: ['datagridContainer',] }],
    longTextArea: [{ type: ViewChild, args: ['longTextArea',] }],
    smartFilterToolbar: [{ type: ViewChild, args: ['smartfiltertoolbar',] }],
    onClick: [{ type: HostListener, args: ['click', ['$event'],] }]
};
if (false) {
    /**
     * @type {?}
     * @private
     */
    DatagridComponent.prototype.auther;
    /**
     * @type {?}
     * @private
     */
    DatagridComponent.prototype.version;
    /** @type {?} */
    DatagridComponent.prototype.__component_type__;
    /**
     * 启用性能优化版，默认为 false
     * @type {?}
     */
    DatagridComponent.prototype.fast;
    /** @type {?} */
    DatagridComponent.prototype.pos;
    /** @type {?} */
    DatagridComponent.prototype.hostCls;
    /**
     * 使用主题
     * @type {?}
     */
    DatagridComponent.prototype.useThemes;
    /** @type {?} */
    DatagridComponent.prototype.id;
    /**
     * 自动高度 - 启用此属性后，就是一个普普通通的 table , 不能编辑，不能排序，不能分页，不能... 就是一凡胎
     * @type {?}
     */
    DatagridComponent.prototype.useHtmlTable;
    /**
     * 自动高度
     * @type {?}
     */
    DatagridComponent.prototype.autoHeight;
    /**
     * 配合 autoHeight 一起使用，当此值大于0 时，且autoHeight 为true时，数据总行高达到最大高度时，将停止自动高度并使用内部滚动条
     * @type {?}
     */
    DatagridComponent.prototype.maxHeight;
    /**
     * 显示边框
     * @type {?}
     */
    DatagridComponent.prototype.showBorder;
    /**
     * 启用斑马线
     * @type {?}
     */
    DatagridComponent.prototype.striped;
    /**
     * 宽度
     * @type {?}
     */
    DatagridComponent.prototype.width;
    /**
     * 高度
     * @type {?}
     */
    DatagridComponent.prototype.height;
    /**
     * 显示表头
     * @type {?}
     */
    DatagridComponent.prototype.showHeader;
    /**
     * 表头-单行高度
     * @type {?}
     */
    DatagridComponent.prototype.headerHeight;
    /**
     * 表头折行
     * @type {?}
     */
    DatagridComponent.prototype.headerWrap;
    /**
     * 显示页脚
     * @type {?}
     */
    DatagridComponent.prototype.showFooter;
    /**
     * 页脚默认行高
     * @type {?}
     */
    DatagridComponent.prototype.footerHeight;
    /**
     * 页脚数据来源, 默认为 client
     * @type {?}
     */
    DatagridComponent.prototype.footerDataFrom;
    /**
     * 页脚合计行模板
     * @type {?}
     */
    DatagridComponent.prototype.footerTemplate;
    /**
     * 合计行显示位置，默认为底部
     * @type {?}
     */
    DatagridComponent.prototype.footerPosition;
    /**
     * 页脚行自定义样式
     * @type {?}
     */
    DatagridComponent.prototype.footerStyler;
    /**
     * 行高
     * @type {?}
     */
    DatagridComponent.prototype.rowHeight;
    /**
     * 设置grid 行高尺寸
     * sm: 小，md: 正常， lg: 大，xl: 超大
     * @type {?}
     * @private
     */
    DatagridComponent.prototype._sizeType;
    /**
     * 填充容器
     * @type {?}
     * @private
     */
    DatagridComponent.prototype._fit;
    /**
     * 如果为真，则自动展开/收缩列的大小以适合网格宽度并防止水平滚动。
     * @type {?}
     * @private
     */
    DatagridComponent.prototype._fitColumns;
    /**
     * 根据grid的宽度自动调整列宽度
     * @type {?}
     * @private
     */
    DatagridComponent.prototype._autoFitColumns;
    /**
     * 禁用
     * @type {?}
     */
    DatagridComponent.prototype.disabled;
    /**
     * 滚动条显示模式，默认为 auto
     * @type {?}
     */
    DatagridComponent.prototype.scrollBarShowMode;
    /** @type {?} */
    DatagridComponent.prototype.scrollBarOptions;
    /**
     * 当滚动一直显示时，是否显示两端的箭头
     * @type {?}
     */
    DatagridComponent.prototype.showScrollArrow;
    /**
     * 可拖动列设置列宽
     * @type {?}
     */
    DatagridComponent.prototype.resizeColumn;
    /**
     * 显示行号
     * @type {?}
     */
    DatagridComponent.prototype.showLineNumber;
    /**
     * 行号表头字符
     * @type {?}
     */
    DatagridComponent.prototype.lineNumberTitle;
    /**
     * 行号宽度
     * @type {?}
     */
    DatagridComponent.prototype.lineNumberWidth;
    /**
     * 鼠标滑过效果开关，默认开启
     * @type {?}
     */
    DatagridComponent.prototype.rowHover;
    /**
     * 允许编辑时，单击进入编辑状态; false为双击进入编辑
     * @type {?}
     */
    DatagridComponent.prototype.clickToEdit;
    /**
     * @type {?}
     * @private
     */
    DatagridComponent.prototype._lockPagination;
    /**
     * 分页信息
     * @type {?}
     * @private
     */
    DatagridComponent.prototype.__pagination;
    /**
     * 分页组件自定义内容区模板
     * @type {?}
     */
    DatagridComponent.prototype.pagerContentTemplate;
    /**
     * 分页条对齐展示方式， left, right, center   默认为 right
     * @type {?}
     */
    DatagridComponent.prototype.pagerPos;
    /**
     * 分页条显示模式， default, simple
     * @type {?}
     */
    DatagridComponent.prototype.pagerViewMode;
    /**
     * 启用服务器端分页
     * @type {?}
     */
    DatagridComponent.prototype.pagerOnServer;
    /**
     * 每页记录数
     * @type {?}
     */
    DatagridComponent.prototype.pageList;
    /**
     * 当前页码
     * @type {?}
     */
    DatagridComponent.prototype.pageIndex;
    /**
     * 每页记录数
     * @type {?}
     */
    DatagridComponent.prototype.pageSize;
    /**
     * 分页区高度
     * @type {?}
     */
    DatagridComponent.prototype.pagerHeight;
    /**
     * 显示每页记录数
     * @type {?}
     */
    DatagridComponent.prototype.showPageList;
    /**
     * 显示分页信息
     * @type {?}
     */
    DatagridComponent.prototype.showPageInfo;
    /**
     * 显示页码
     * @type {?}
     */
    DatagridComponent.prototype.showPageNumber;
    /**
     * 显示页码最大数量
     * @type {?}
     */
    DatagridComponent.prototype.pagerLabelSize;
    /**
     * 显示转至指定页码输入框
     * @type {?}
     */
    DatagridComponent.prototype.showGotoInput;
    /**
     * 启用跨页多选
     * @type {?}
     */
    DatagridComponent.prototype.enableMorePageSelect;
    /**
     * 显示选中列表
     * @type {?}
     */
    DatagridComponent.prototype.showSelectedList;
    /**
     * 选中列表中，每条记录显示的内容
     * @type {?}
     */
    DatagridComponent.prototype.selectedItemFormatter;
    /**
     * 单元格信息提示延时，默认 1000ms
     * @type {?}
     */
    DatagridComponent.prototype.cellTipTimer;
    /**
     * grid 内部处理分页状态
     * @type {?}
     */
    DatagridComponent.prototype.controlPaginationState;
    /**
     * 总记录数
     * @type {?}
     * @private
     */
    DatagridComponent.prototype._total;
    /**
     * 启用选中行
     * @type {?}
     */
    DatagridComponent.prototype.enableSelectRow;
    /**
     * 启用多选
     * @type {?}
     */
    DatagridComponent.prototype.multiSelect;
    /**
     * 启用多选时，是否显示checkbox
     * @type {?}
     */
    DatagridComponent.prototype.showCheckbox;
    /**
     * 显示全选checkbox
     * @type {?}
     */
    DatagridComponent.prototype.showAllCheckbox;
    /**
     * 当启用多选时，点击行选中，只允许且只有一行被选中。, 默认为 true
     * @type {?}
     */
    DatagridComponent.prototype.onlySelectSelf;
    /**
     * 启用多选且显示checkbox, 选中行同时钩选, 默认为 false
     * @type {?}
     */
    DatagridComponent.prototype.checkOnSelect;
    /**
     * 启用多选且显示checkbox, 钩选后选中行, 默认为 false
     * @type {?}
     */
    DatagridComponent.prototype.selectOnCheck;
    /**
     * 行选中模式，custom: 自定义， default: 仿Windows资源管理器选中
     * 注意： 此属性仅多选，显示复选框有效
     * 默认值： custom
     * addTime: 2021-12-14 by LUCAS HUANG
     * @type {?}
     */
    DatagridComponent.prototype.selectionMode;
    /**
     * 单击行选中后，在次点击不会被取消选中状态;
     * @type {?}
     */
    DatagridComponent.prototype.keepSelect;
    /**
     * 当数据为空时，使用空白显示，且高度为一行的高度。 默认为 false
     * @type {?}
     */
    DatagridComponent.prototype.useBlankWhenDataIsEmpty;
    /**
     * 数据为空时的高度
     * @type {?}
     */
    DatagridComponent.prototype.emptyDataHeight;
    /**
     * 空数据时，显示的提示文本
     * @type {?}
     */
    DatagridComponent.prototype.emptyMessage;
    /**
     * 无数据时的模板
     * @type {?}
     */
    DatagridComponent.prototype.emptyTemplate;
    /**
     * 主键字段
     * @type {?}
     */
    DatagridComponent.prototype.idField;
    /**
     * 请求数据源的URL
     * @type {?}
     */
    DatagridComponent.prototype.url;
    /**
     * 数据源
     * @type {?}
     */
    DatagridComponent.prototype.data;
    /**
     * 页脚数据
     * @type {?}
     * @private
     */
    DatagridComponent.prototype._footerData;
    /**
     * 验证不通过时可以结束编辑
     * @type {?}
     */
    DatagridComponent.prototype.endEditByInvalid;
    /**
     * 列集合
     * @type {?}
     * @private
     */
    DatagridComponent.prototype._columns;
    /**
     * @type {?}
     * @private
     */
    DatagridComponent.prototype._fields;
    /**
     * 禁止数据折行，默认值：true,即在一行显示，不折行。
     * @type {?}
     */
    DatagridComponent.prototype.nowrap;
    /**
     * 虚拟加载
     * @type {?}
     */
    DatagridComponent.prototype.virtualized;
    /**
     * 是否启用异步加载数据
     * @type {?}
     */
    DatagridComponent.prototype.virtualizedAsyncLoad;
    /**
     * 行样式
     * @type {?}
     */
    DatagridComponent.prototype.rowStyler;
    /**
     * 编辑方式： row(整行编辑)、cell(单元格编辑)；默认为 row
     * @type {?}
     */
    DatagridComponent.prototype.editMode;
    /**
     * 编辑状态
     * @type {?}
     * @private
     */
    DatagridComponent.prototype._editable;
    /**
     * 启用可编辑单元格样式。
     * @type {?}
     */
    DatagridComponent.prototype.enableEditCellStyle;
    /**
     * 进入编辑状态时选是否选中文本；默认为 false
     * 仅文本框支持此特性
     * @type {?}
     */
    DatagridComponent.prototype.selectOnEditing;
    /**
     * 编辑器高度
     * @type {?}
     */
    DatagridComponent.prototype.editorHeight;
    /**
     * 启用远端排序
     * @type {?}
     */
    DatagridComponent.prototype.remoteSort;
    /**
     * 排序字段
     * @type {?}
     */
    DatagridComponent.prototype.sortName;
    /**
     * 排序方式 asc | desc
     * @type {?}
     */
    DatagridComponent.prototype.sortOrder;
    /**
     * 允许多列排序
     * @type {?}
     */
    DatagridComponent.prototype.multiSort;
    /** @type {?} */
    DatagridComponent.prototype.hoverRowCls;
    /**
     * 允许拖拽列顺序
     * @type {?}
     */
    DatagridComponent.prototype.enableDragColumn;
    /**
     * 行分组面板高度，默认 50PX
     * @type {?}
     */
    DatagridComponent.prototype.rowGroupPanelHeight;
    /**
     * 启用分组行
     * @type {?}
     */
    DatagridComponent.prototype.groupRows;
    /**
     * 启用行分组合计行
     * @type {?}
     */
    DatagridComponent.prototype.groupFooter;
    /**
     * 分组行是否展开，默认为 展开
     * @type {?}
     */
    DatagridComponent.prototype.expandGroupRows;
    /**
     * 分组合计行自定义样式：
     * 允许的值为
     * - { cls: 'cssclassname, ', style: { color: 'red', border: 1px solid } }
     * - (groupFooterRowData): { cls: 'cssclassname, ', style: { color: 'red', border: 1px solid } } => {}
     * @type {?}
     */
    DatagridComponent.prototype.groupFooterStyler;
    /**
     * 合计数据显示位置
     * inGroupRow: 与分组在同一行，分别相关合计字段对齐
     * groupFooterRow: 在分组数据最后增加一行
     * 默认为 groupFooterRow
     * @type {?}
     */
    DatagridComponent.prototype.groupSummaryPosition;
    /**
     * 分组信息合并列数
     * 默认为 1
     * @type {?}
     */
    DatagridComponent.prototype.groupCellColSpan;
    /**
     * 分组字段名称, 多字段分组以英文逗号分隔
     * @type {?}
     * @private
     */
    DatagridComponent.prototype._groupField;
    /** @type {?} */
    DatagridComponent.prototype.groupFields$;
    /**
     * 显示分组列
     * @type {?}
     */
    DatagridComponent.prototype.showGroupColumn;
    /**
     * 分组格式化
     * @type {?}
     */
    DatagridComponent.prototype.groupFormatter;
    /**
     * 分组行样式
     * @type {?}
     */
    DatagridComponent.prototype.groupStyler;
    /**
     * 显示分组列面板。默认为 false
     * @type {?}
     * @private
     */
    DatagridComponent.prototype._showRowGroupPanel;
    /**
     * 双击表头适应内容宽度
     * @type {?}
     */
    DatagridComponent.prototype.AutoColumnWidthUseDblclick;
    /**
     * 行钩选及选中禁用表达式
     * @type {?}
     */
    DatagridComponent.prototype.disableRow;
    /**
     * 使用内部过滤器; 默认为 false
     * @type {?}
     */
    DatagridComponent.prototype.useDefaultFilter;
    /**
     * 过滤图标与排序图标合并，此属性与 enableFilterRow 互斥
     * @type {?}
     */
    DatagridComponent.prototype.enableSmartFilter;
    /**
     * 显示过滤行
     * @type {?}
     */
    DatagridComponent.prototype.enableFilterRow;
    /**
     * 服务器端过滤
     * @type {?}
     */
    DatagridComponent.prototype.remoteFilter;
    /**
     * 启用过滤条件显示条
     * @type {?}
     */
    DatagridComponent.prototype.showFilterBar;
    /**
     * 过滤条件汇总条高度，默认 32px
     * @type {?}
     */
    DatagridComponent.prototype.filterBarHeight;
    /** @type {?} */
    DatagridComponent.prototype.filterRowHeight;
    /** @type {?} */
    DatagridComponent.prototype.conditions;
    /** @type {?} */
    DatagridComponent.prototype.selectValue;
    /** @type {?} */
    DatagridComponent.prototype.checkValues;
    /** @type {?} */
    DatagridComponent.prototype.selectValues;
    /**
     * 合并单元格；先支持纵向合并
     * @type {?}
     */
    DatagridComponent.prototype.mergeCell;
    /** @type {?} */
    DatagridComponent.prototype.mergeFields;
    /**
     * 合并单元格数据启用客户端排序
     * @type {?}
     */
    DatagridComponent.prototype.enableClientSortForMergeCell;
    /**
     * 使用高级控制面板(列设置)
     * @type {?}
     */
    DatagridComponent.prototype.useControlPanel;
    /**
     * 启用简洁控制面板模式。默认为 false
     * @type {?}
     */
    DatagridComponent.prototype.enableSimpleMode;
    /**
     * 点击列设置图标，默认打开的控制面板
     * @type {?}
     */
    DatagridComponent.prototype.controlPanelMode;
    /**
     * 启用列设置方案
     * @type {?}
     */
    DatagridComponent.prototype.enableScheme;
    /**
     * 系统预制方案名称
     * @type {?}
     */
    DatagridComponent.prototype.defaultSchemeName;
    /**
     * 阻止click 事件冒泡
     * @type {?}
     */
    DatagridComponent.prototype.stopPropagation;
    /**
     * (202105 弃用)
     * 点击单元格进行编辑状态时，关闭其他Grid的编辑器。默认 false，
     * 多个列表存时，仅有一个列表中有编辑状态，其他列表结束编辑
     * @type {?}
     */
    DatagridComponent.prototype.closeOtherGridEditor;
    /**
     * 当数据源为空时，清空已选记录
     * @type {?}
     */
    DatagridComponent.prototype.clearSelectionsWhenDataIsEmpty;
    /**
     * 启用右键菜单，默认为 false
     * @type {?}
     */
    DatagridComponent.prototype.enableContextMenu;
    /**
     * 右键菜单数据
     * @type {?}
     */
    DatagridComponent.prototype.contextMenus;
    /** @type {?} */
    DatagridComponent.prototype.selectValueChange;
    /** @type {?} */
    DatagridComponent.prototype.checkValuesChange;
    /** @type {?} */
    DatagridComponent.prototype.selectValuesChange;
    /** @type {?} */
    DatagridComponent.prototype.beforeEdit;
    /** @type {?} */
    DatagridComponent.prototype.beginEdit;
    /** @type {?} */
    DatagridComponent.prototype.afterEdit;
    /** @type {?} */
    DatagridComponent.prototype.endEdit;
    /** @type {?} */
    DatagridComponent.prototype.cancelEdited;
    /** @type {?} */
    DatagridComponent.prototype.scrollY;
    /** @type {?} */
    DatagridComponent.prototype.pageSizeChanged;
    /** @type {?} */
    DatagridComponent.prototype.pageChanged;
    /** @type {?} */
    DatagridComponent.prototype.loadSuccess;
    /** @type {?} */
    DatagridComponent.prototype.filterChanged;
    /** @type {?} */
    DatagridComponent.prototype.beforeSelect;
    /** @type {?} */
    DatagridComponent.prototype.beforeUnselect;
    /** @type {?} */
    DatagridComponent.prototype.beforeCheck;
    /** @type {?} */
    DatagridComponent.prototype.beforeUncheck;
    /** @type {?} */
    DatagridComponent.prototype.beforeSortColumn;
    /**
     * 启用选中单元格高亮显示
     * @type {?}
     */
    DatagridComponent.prototype.enableHighlightCell;
    /**
     * 选中的数据始终从数据源中获取. 默认为 false
     * @type {?}
     */
    DatagridComponent.prototype.checkedRowsDataFromSource;
    /**
     * 当前单元格为只读时，使用tab 键跳到下个单元格时，是否允许进入编辑状态，默认为 false;
     * 默认情况下，当前单元格只读，按TAB跳到下个CELL 时，选中CELL ，回车进入编辑。
     * 开启后，下个单元格自动进入编辑状态。
     * @type {?}
     */
    DatagridComponent.prototype.editcellWhenTabKeydwon;
    /**
     * 单元格点击前事件
     * @type {?}
     */
    DatagridComponent.prototype.beforeClickCell;
    /** @type {?} */
    DatagridComponent.prototype.dblclickRow;
    /** @type {?} */
    DatagridComponent.prototype.selectChanged;
    /** @type {?} */
    DatagridComponent.prototype.unSelect;
    /** @type {?} */
    DatagridComponent.prototype.selectAll;
    /** @type {?} */
    DatagridComponent.prototype.unSelectAll;
    /**
     * 异步请求虚拟加载
     * @type {?}
     */
    DatagridComponent.prototype.scrollYLoad;
    /** @type {?} */
    DatagridComponent.prototype.checked;
    /** @type {?} */
    DatagridComponent.prototype.unChecked;
    /** @type {?} */
    DatagridComponent.prototype.checkAll;
    /** @type {?} */
    DatagridComponent.prototype.unCheckAll;
    /** @type {?} */
    DatagridComponent.prototype.checkedChange;
    /** @type {?} */
    DatagridComponent.prototype.columnSorted;
    /** @type {?} */
    DatagridComponent.prototype.rowClick;
    /** @type {?} */
    DatagridComponent.prototype.rowAppended;
    /** @type {?} */
    DatagridComponent.prototype.rowDeleted;
    /** @type {?} */
    DatagridComponent.prototype.rowUpdated;
    /** @type {?} */
    DatagridComponent.prototype.dataChange;
    /**
     * 最后一行的最后单元格回车处理事件
     * @type {?}
     */
    DatagridComponent.prototype.lastCellEnterHandler;
    /**
     * 分组字段变化后
     * @type {?}
     */
    DatagridComponent.prototype.groupFieldChange;
    /**
     * 拖动列改变列显示位置后触发
     * @type {?}
     */
    DatagridComponent.prototype.columnMoved;
    /**
     * 单元格点击事件
     * @type {?}
     */
    DatagridComponent.prototype.cellClick;
    /** @type {?} */
    DatagridComponent.prototype.dgColumns;
    /** @type {?} */
    DatagridComponent.prototype.dgPager;
    /** @type {?} */
    DatagridComponent.prototype.resizeProxy;
    /** @type {?} */
    DatagridComponent.prototype.resizeProxyBg;
    /** @type {?} */
    DatagridComponent.prototype.dgContainer;
    /** @type {?} */
    DatagridComponent.prototype.longTextArea;
    /** @type {?} */
    DatagridComponent.prototype.smartFilterToolbar;
    /** @type {?} */
    DatagridComponent.prototype.colGroup;
    /**
     * @type {?}
     * @private
     */
    DatagridComponent.prototype._loading;
    /**
     * @type {?}
     * @private
     */
    DatagridComponent.prototype._selectedRow;
    /** @type {?} */
    DatagridComponent.prototype.ds;
    /** @type {?} */
    DatagridComponent.prototype.pagerOpts;
    /** @type {?} */
    DatagridComponent.prototype.restService;
    /** @type {?} */
    DatagridComponent.prototype.editors;
    /** @type {?} */
    DatagridComponent.prototype.validators;
    /** @type {?} */
    DatagridComponent.prototype.currentCell;
    /** @type {?} */
    DatagridComponent.prototype.flatColumns;
    /** @type {?} */
    DatagridComponent.prototype.footerWidth;
    /** @type {?} */
    DatagridComponent.prototype.clickDelay;
    /**
     * @type {?}
     * @private
     */
    DatagridComponent.prototype.resizeColumnInfo;
    /**
     * @type {?}
     * @private
     */
    DatagridComponent.prototype.ro;
    /** @type {?} */
    DatagridComponent.prototype.subscriptions;
    /** @type {?} */
    DatagridComponent.prototype.realHeaderHeight;
    /** @type {?} */
    DatagridComponent.prototype.isSingleClick;
    /** @type {?} */
    DatagridComponent.prototype.docuemntCellClickEvents;
    /** @type {?} */
    DatagridComponent.prototype.documentCellClickHandler;
    /** @type {?} */
    DatagridComponent.prototype.documentCellKeydownEvents;
    /** @type {?} */
    DatagridComponent.prototype.documentCellKeydownHandler;
    /**
     * @type {?}
     * @private
     */
    DatagridComponent.prototype.modalClickEvent;
    /** @type {?} */
    DatagridComponent.prototype.documentRowKeydownHandler;
    /** @type {?} */
    DatagridComponent.prototype.documentRowEditKeydownHanlder;
    /** @type {?} */
    DatagridComponent.prototype.documentClickEndRowEditHandler;
    /** @type {?} */
    DatagridComponent.prototype.pending;
    /** @type {?} */
    DatagridComponent.prototype.colFormatSer;
    /** @type {?} */
    DatagridComponent.prototype.scrollInstance;
    /** @type {?} */
    DatagridComponent.prototype.localeService;
    /** @type {?} */
    DatagridComponent.prototype.mergeCellInfo;
    /** @type {?} */
    DatagridComponent.prototype.ignoreTarget;
    /** @type {?} */
    DatagridComponent.prototype.clientFilterService;
    /** @type {?} */
    DatagridComponent.prototype.settingService;
    /** @type {?} */
    DatagridComponent.prototype.ControlPanelFeild;
    /**
     * @type {?}
     * @private
     */
    DatagridComponent.prototype._isResized;
    /** @type {?} */
    DatagridComponent.prototype.gridSize;
    /** @type {?} */
    DatagridComponent.prototype.clientFilterChanged;
    /** @type {?} */
    DatagridComponent.prototype.styleSheetId;
    /** @type {?} */
    DatagridComponent.prototype.groupRowPanelPlaceholder;
    /** @type {?} */
    DatagridComponent.prototype.commonUtils;
    /** @type {?} */
    DatagridComponent.prototype.smartFilterService;
    /** @type {?} */
    DatagridComponent.prototype.smartFilterResult;
    /** @type {?} */
    DatagridComponent.prototype.smartFilterBarHeight;
    /**
     * @type {?}
     * @private
     */
    DatagridComponent.prototype.idService;
    /**
     * @type {?}
     * @private
     */
    DatagridComponent.prototype._active_datagrid_cls;
    /**
     * @type {?}
     * @private
     */
    DatagridComponent.prototype._blured_datagrid_cls;
    /** @type {?} */
    DatagridComponent.prototype._custom_datagrid_cls;
    /** @type {?} */
    DatagridComponent.prototype.sms;
    /** @type {?} */
    DatagridComponent.prototype.focusRowIndex;
    /**
     * @type {?}
     * @private
     */
    DatagridComponent.prototype.documentBodyMouseDown;
    /**
     * @type {?}
     * @private
     */
    DatagridComponent.prototype.farrisInstances;
    /**
     * @type {?}
     * @private
     */
    DatagridComponent.prototype.currentPagerData;
    /**
     * @type {?}
     * @private
     */
    DatagridComponent.prototype.resizeTimer;
    /**
     * @type {?}
     * @private
     */
    DatagridComponent.prototype.debugSer;
    /**
     * @type {?}
     * @private
     */
    DatagridComponent.prototype.DATA_CHANGED_TIMER;
    /** @type {?} */
    DatagridComponent.prototype.formValidations;
    /** @type {?} */
    DatagridComponent.prototype.trackByRows;
    /** @type {?} */
    DatagridComponent.prototype.onDocumentMouseDown;
    /** @type {?} */
    DatagridComponent.prototype.cd;
    /** @type {?} */
    DatagridComponent.prototype.el;
    /** @type {?} */
    DatagridComponent.prototype.inject;
    /** @type {?} */
    DatagridComponent.prototype.zone;
    /** @type {?} */
    DatagridComponent.prototype.dfs;
    /** @type {?} */
    DatagridComponent.prototype.dgs;
    /**
     * @type {?}
     * @private
     */
    DatagridComponent.prototype.app;
    /**
     * @type {?}
     * @protected
     */
    DatagridComponent.prototype.domSanitizer;
    /** @type {?} */
    DatagridComponent.prototype.render2;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0YWdyaWQuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy91aS1kYXRhZ3JpZC8iLCJzb3VyY2VzIjpbImxpYi9kYXRhZ3JpZC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQVdBLE9BQU8sRUFDSCxTQUFTLEVBQVUsS0FBSyxFQUFFLGlCQUFpQixFQUMzQyxlQUFlLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsU0FBUyxFQUM1Qyx1QkFBdUIsRUFBRSxpQkFBaUIsRUFBRSxRQUFRLEVBQUUsV0FBVyxFQUM5RCxNQUFNLEVBQUUsVUFBVSxFQUFFLFNBQVMsRUFBaUIsY0FBYyxFQUFFLFdBQVcsRUFBRSxZQUFZLEVBQzVHLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSwyQkFBMkIsQ0FBQztBQUV6RCxPQUFPLGNBQWMsTUFBTSwwQkFBMEIsQ0FBQztBQUN0RCxPQUFPLEVBQUUsRUFBRSxFQUFrQyxlQUFlLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDM0UsT0FBTyxFQUF1RCxnQkFBZ0IsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQzVHLE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLG9DQUFvQyxDQUFDO0FBQzNFLE9BQU8sRUFBRSx1QkFBdUIsRUFBRSxNQUFNLGdEQUFnRCxDQUFDO0FBQ3pGLE9BQU8sRUFBWSxnQkFBZ0IsRUFBbUMsTUFBTSxrQkFBa0IsQ0FBQztBQUMvRixPQUFPLEVBQWUsc0JBQXNCLEVBQUUsTUFBTSx5QkFBeUIsQ0FBQztBQUM5RSxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFDOUQsT0FBTyxFQUFFLFlBQVksRUFBRSxpQkFBaUIsRUFBRSxlQUFlLEVBQUUsU0FBUyxFQUFFLHFCQUFxQixFQUFFLGtCQUFrQixFQUFFLGdCQUFnQixFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsTUFBTSxr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QUFpQzs7SUFDakMsZ0NBQTJCOzs7OztJQUMzQixnQ0FBMkI7Ozs7O0lBQzNCLHlDQUFvQzs7SUFDcEMsb0NBQXlCIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbi8qXHJcbiAqIEBBdXRob3I6IOeWr+eLguengOaJjShMdWNhcyBIdWFuZylcclxuICogQERhdGU6IDIwMTktMDgtMDYgMDc6NDM6MDdcclxuICogQExhc3RFZGl0b3JzOiDnlq/ni4Lnp4DmiY0oTHVjYXMgSHVhbmcpXHJcbiAqIEBMYXN0RWRpdFRpbWU6IDIwMTktMTEtMzAgMTY6NDI6NTFcclxuICogQFFROiAxMDU1ODE4MjM5XHJcbiAqIEBWZXJzaW9uOiB2MC44LjBcclxuICogLSAyMDIxLzA0LzA3IOWinuWKoCBlbmFibGVIaWdobGlnaHRDZWxsIOWxnuaAp++8jOaUr+aMgemAieS4reWNleWFg+agvOmrmOS6rlxyXG4gKi9cclxuXHJcbmltcG9ydCB7XHJcbiAgICBDb21wb25lbnQsIE9uSW5pdCwgSW5wdXQsIFZpZXdFbmNhcHN1bGF0aW9uLFxyXG4gICAgQ29udGVudENoaWxkcmVuLCBRdWVyeUxpc3QsIE91dHB1dCwgRXZlbnRFbWl0dGVyLCBSZW5kZXJlcjIsIE9uRGVzdHJveSwgT25DaGFuZ2VzLFxyXG4gICAgU2ltcGxlQ2hhbmdlcywgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksIENoYW5nZURldGVjdG9yUmVmLCBJbmplY3RvciwgSG9zdEJpbmRpbmcsXHJcbiAgICBBZnRlckNvbnRlbnRJbml0LCBOZ1pvbmUsIEVsZW1lbnRSZWYsIFZpZXdDaGlsZCwgQWZ0ZXJWaWV3SW5pdCwgQXBwbGljYXRpb25SZWYsIFRlbXBsYXRlUmVmLCBIb3N0TGlzdGVuZXIsIERvQ2hlY2tcclxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgRG9tU2FuaXRpemVyIH0gZnJvbSAnQGFuZ3VsYXIvcGxhdGZvcm0tYnJvd3Nlcic7XHJcbmltcG9ydCB7IEZvcm1Hcm91cCwgVmFsaWRhdG9yRm4gfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XHJcbmltcG9ydCBSZXNpemVPYnNlcnZlciBmcm9tICdyZXNpemUtb2JzZXJ2ZXItcG9seWZpbGwnO1xyXG5pbXBvcnQgeyBvZiwgU3Vic2NyaXB0aW9uLCBPYnNlcnZhYmxlLCBmcm9tLCBCZWhhdmlvclN1YmplY3QgfSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHsgRGF0YUNvbHVtbiwgQ3VzdG9tU3R5bGUsIE1vdmVEaXJlY3Rpb24sIENvbHVtbkdyb3VwLCBDb2x1bW5GaWx0ZXJUeXBlIH0gZnJvbSAnLi90eXBlcy9kYXRhLWNvbHVtbic7XHJcbmltcG9ydCB7IERhdGFncmlkRmFjYWRlU2VydmljZSB9IGZyb20gJy4vc2VydmljZXMvZGF0YWdyaWQtZmFjYWRlLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBEYXRhZ3JpZENvbHVtbkRpcmVjdGl2ZSB9IGZyb20gJy4vY29tcG9uZW50cy9jb2x1bW5zL2RhdGFncmlkLWNvbHVtbi5kaXJlY3RpdmUnO1xyXG5pbXBvcnQgeyBDZWxsSW5mbywgSWdub3JlUHJvcGVydGllcywgSVNfR1JPVVBfUk9XX0ZJRUxELCBTZWxlY3RlZFJvdyB9IGZyb20gJy4vc2VydmljZXMvc3RhdGUnO1xyXG5pbXBvcnQgeyBSZXN0U2VydmljZSwgREFUQUdSSURfUkVTVF9TRVJWSUNFRSB9IGZyb20gJy4vc2VydmljZXMvcmVzdC5zZXJ2aWNlJztcclxuaW1wb3J0IHsgRGF0YWdyaWRTZXJ2aWNlIH0gZnJvbSAnLi9zZXJ2aWNlcy9kYXRhZ3JpZC5zZXJ2aWNlJztcclxuaW1wb3J0IHsgR1JJRF9FRElUT1JTLCBDRUxMX1NFTEVDVEVEX0NMUywgR1JJRF9WQUxJREFUT1JTLCBTSVpFX1RZUEUsIEdSSURfU0VUVElOR1NfU0VSVklDRSwgR1JJRF9TRVRUSU5HU19IVFRQLCBDRUxMX0VESVRJTkdfQ0xTLCBUUl9QUkVGSVgsIFRSX0lEX1BSRUZJWCB9IGZyb20gJy4vdHlwZXMvY29uc3RhbnQnO1xyXG5pbXBvcnQgeyBEb21IYW5kbGVyIH0gZnJvbSAnLi9zZXJ2aWNlcy9kb21oYW5kbGVyJztcclxuaW1wb3J0IHsgVXRpbHMgfSBmcm9tICcuL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IHsgQ29tbW9uVXRpbHMsIERlYnVnU2VydmljZSwgRmFycmlzQ29tcG9uZW50SW5zdGFuY2VTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1jb21tb24nO1xyXG5pbXBvcnQgeyBDb2x1bW5Gb3JtYXRTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1jb21tb24vY29sdW1uJztcclxuaW1wb3J0IHsgZmxhdHRlbiwgY2xvbmVEZWVwIH0gZnJvbSAnbG9kYXNoLWVzJztcclxuaW1wb3J0IHsgU2Nyb2xsYmFyRGlyZWN0aXZlIH0gZnJvbSAnLi9zY3JvbGxiYXIvc2Nyb2xsYmFyLmRpcmVjdGl2ZSc7XHJcbmltcG9ydCB7IExvY2FsZVNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLWxvY2FsZSc7XHJcbmltcG9ydCB7IEJlZm9yRXZlbnRQYXJhbSwgUm93RWRpdFBhcmFtIH0gZnJvbSAnLi90eXBlcy9ldmVudC1wYXJhbXMnO1xyXG5pbXBvcnQgeyBEYXRhZ3JpZENvbHVtbnNIZWxwZXIgfSBmcm9tICcuL3NlcnZpY2VzL2RhdGFncmlkLWNvbHVtbnMuaGVscGVyJztcclxuaW1wb3J0IHsgRGF0YWdyaWRGaWx0ZXJTZXJ2aWNlIH0gZnJvbSAnLi9zZXJ2aWNlcy9kYXRhZ3JpZC1maWx0ZXIuc2VydmljZSc7XHJcbmltcG9ydCB7IGRlYm91bmNlVGltZSwgdGFrZVVudGlsIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xyXG5cclxuaW1wb3J0IHsgU21hcnRGaWx0ZXJUb29sYmFyQ29tcG9uZW50IH0gZnJvbSAnLi9jb21wb25lbnRzL2ZpbHRlci10b29sYmFyL3NtYXJ0LWZpbHRlci10b29sYmFyLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IERhdGFncmlkU21hcnRGaWx0ZXJTZXJ2aWNlIH0gZnJvbSAnLi9zZXJ2aWNlcy9kYXRhZ3JpZC1zbWFydC1maWx0ZXIuc2VydmljZSc7XHJcbmltcG9ydCB7IElkU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktY29tbW9uJztcclxuaW1wb3J0IHsgU2VsZWN0aW9uTW9kZVNlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2VzL3NlbGVjdGlvbi1tb2RlLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBDb250ZXh0TWVudUl0ZW0gfSBmcm9tICdAZmFycmlzL3VpLWNvbnRleHQtbWVudSc7XHJcbmltcG9ydCB7IEh0dHBDbGllbnQgfSBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6ICdmYXJyaXMtZGF0YWdyaWQnLFxyXG4gICAgdGVtcGxhdGVVcmw6ICcuL2RhdGFncmlkLmNvbXBvbmVudC5odG1sJyxcclxuICAgIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmUsXHJcbiAgICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcclxuICAgIHByb3ZpZGVyczogW1xyXG4gICAgICAgIERhdGFncmlkRmFjYWRlU2VydmljZSxcclxuICAgICAgICBEYXRhZ3JpZFNlcnZpY2UsXHJcbiAgICAgICAgRGF0YWdyaWRTbWFydEZpbHRlclNlcnZpY2VcclxuICAgIF0sXHJcbiAgICBleHBvcnRBczogJ2RhdGFncmlkJyxcclxuICAgIHN0eWxlczpbXHJcbiAgICAgICAgYC5mLWRhdGFncmlkLWhlYWRlciB0YWJsZXtcclxuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI0YxRjNGNztcclxuICAgICAgICB9YFxyXG4gICAgXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgRGF0YWdyaWRDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uRGVzdHJveSwgT25DaGFuZ2VzLCBBZnRlckNvbnRlbnRJbml0LCBBZnRlclZpZXdJbml0LCBEb0NoZWNrIHtcclxuICAgIHByaXZhdGUgYXV0aGVyID0gYEx1Y2FzIEh1YW5nIC0gUVE6MTA1NTgxODIzOWA7XHJcbiAgICBwcml2YXRlIHZlcnNpb24gPSAnMC44LngnO1xyXG4gICAgX19jb21wb25lbnRfdHlwZV9fID0gJ0RhdGFncmlkQ29tcG9uZW50JztcclxuXHJcbiAgICAvKiog5ZCv55So5oCn6IO95LyY5YyW54mI77yM6buY6K6k5Li6IGZhbHNlICovXHJcbiAgICBASW5wdXQoKSBmYXN0ID0gZmFsc2U7XHJcblxyXG4gICAgQEhvc3RCaW5kaW5nKCdzdHlsZS5wb3NpdGlvbicpIHBvcyA9ICdyZWxhdGl2ZSc7XHJcbiAgICBASG9zdEJpbmRpbmcoJ2NsYXNzLmYtZGF0YWdyaWQtZnVsbCcpIGhvc3RDbHMgPSBmYWxzZTtcclxuICAgIEBIb3N0QmluZGluZygnY2xhc3MuZi1kYXRhZ3JpZC1hdXRvLWhlaWdodCcpIGdldCBhdXRvSGVpZ2h0Q2xzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmF1dG9IZWlnaHQ7XHJcbiAgICB9XHJcbiAgICAvKiog5L2/55So5Li76aKYICovXHJcbiAgICBASW5wdXQoKSB1c2VUaGVtZXMgPSB0cnVlO1xyXG4gICAgLy8g55So5LqO5a2Y5YKo55So5oi35Liq5oCn5YyW6K6+572uXHJcbiAgICBASW5wdXQoKSBpZCA9ICcnO1xyXG4gICAgLyoqIOiHquWKqOmrmOW6piAtIOWQr+eUqOatpOWxnuaAp+WQju+8jOWwseaYr+S4gOS4quaZruaZrumAmumAmueahCB0YWJsZSAsIOS4jeiDvee8lui+ke+8jOS4jeiDveaOkuW6j++8jOS4jeiDveWIhumhte+8jOS4jeiDvS4uLiDlsLHmmK/kuIDlh6Hog44gKi9cclxuICAgIEBJbnB1dCgpIHVzZUh0bWxUYWJsZSA9IGZhbHNlO1xyXG4gICAgLyoqIOiHquWKqOmrmOW6piAqL1xyXG4gICAgQElucHV0KCkgYXV0b0hlaWdodCA9IGZhbHNlO1xyXG4gICAgLyoqIOmFjeWQiCBhdXRvSGVpZ2h0IOS4gOi1t+S9v+eUqO+8jOW9k+atpOWAvOWkp+S6jjAg5pe277yM5LiUYXV0b0hlaWdodCDkuLp0cnVl5pe277yM5pWw5o2u5oC76KGM6auY6L6+5Yiw5pyA5aSn6auY5bqm5pe277yM5bCG5YGc5q2i6Ieq5Yqo6auY5bqm5bm25L2/55So5YaF6YOo5rua5Yqo5p2hICovXHJcbiAgICBASW5wdXQoKSBtYXhIZWlnaHQgPSAwO1xyXG5cclxuICAgIC8qKiDmmL7npLrovrnmoYYgKi9cclxuICAgIEBJbnB1dCgpIHNob3dCb3JkZXIgPSBmYWxzZTtcclxuICAgIC8qKiDlkK/nlKjmlpHpqaznur8gICovXHJcbiAgICBASW5wdXQoKSBzdHJpcGVkID0gdHJ1ZTtcclxuICAgIC8qKiDlrr3luqYgKi9cclxuICAgIEBJbnB1dCgpIHdpZHRoID0gODAwO1xyXG4gICAgLyoqIOmrmOW6piAqL1xyXG4gICAgQElucHV0KCkgaGVpZ2h0ID0gMzAwO1xyXG5cclxuICAgIC8qKiDmmL7npLrooajlpLQgKi9cclxuICAgIEBJbnB1dCgpIHNob3dIZWFkZXIgPSB0cnVlO1xyXG4gICAgLyoqIOihqOWktC3ljZXooYzpq5jluqYgKi9cclxuICAgIEBJbnB1dCgpIGhlYWRlckhlaWdodCA9IDM1O1xyXG4gICAgLyoqIOihqOWktOaKmOihjCAqL1xyXG4gICAgQElucHV0KCkgaGVhZGVyV3JhcCA9IGZhbHNlO1xyXG4gICAgLyoqIOaYvuekuumhteiEmiAqL1xyXG4gICAgQElucHV0KCkgc2hvd0Zvb3RlciA9IGZhbHNlO1xyXG4gICAgLyoqIOmhteiEmum7mOiupOihjOmrmCAqL1xyXG4gICAgQElucHV0KCkgZm9vdGVySGVpZ2h0ID0gMjk7XHJcbiAgICAvKiog6aG16ISa5pWw5o2u5p2l5rqQLCDpu5jorqTkuLogY2xpZW50ICovXHJcbiAgICBASW5wdXQoKSBmb290ZXJEYXRhRnJvbTogJ3NlcnZlcicgfCAnY2xpZW50JyA9ICdjbGllbnQnO1xyXG4gICAgLyoqIOmhteiEmuWQiOiuoeihjOaooeadvyAqL1xyXG4gICAgQElucHV0KCkgZm9vdGVyVGVtcGxhdGU6IFRlbXBsYXRlUmVmPGFueT47XHJcbiAgICAvKiog5ZCI6K6h6KGM5pi+56S65L2N572u77yM6buY6K6k5Li65bqV6YOoICovXHJcbiAgICBASW5wdXQoKSBmb290ZXJQb3NpdGlvbjogJ3RvcCcgfCAnYm90dG9tJyB8ICdib3RoJyA9ICdib3R0b20nO1xyXG4gICAgLyoqIOmhteiEmuihjOiHquWumuS5ieagt+W8jyAqL1xyXG4gICAgQElucHV0KCkgZm9vdGVyU3R5bGVyOiAoKSA9PiB7IGNscz86IHN0cmluZywgc3R5bGU/OiBhbnkgfTtcclxuICAgIC8qKiDooYzpq5ggKi9cclxuICAgIEBJbnB1dCgpIHJvd0hlaWdodCA9IDI5O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICog6K6+572uZ3JpZCDooYzpq5jlsLrlr7hcclxuICAgICAqIHNtOiDlsI/vvIxtZDog5q2j5bi477yMIGxnOiDlpKfvvIx4bDog6LaF5aSnXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgX3NpemVUeXBlOiAnc20nIHwgJ21kJyB8ICdsZycgfCAneGwnID0gJ3NtJztcclxuICAgIGdldCBzaXplVHlwZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc2l6ZVR5cGU7XHJcbiAgICB9XHJcbiAgICBASW5wdXQoKSBzZXQgc2l6ZVR5cGUodmFsKSB7XHJcbiAgICAgICAgdGhpcy5fc2l6ZVR5cGUgPSB2YWw7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIOWhq+WFheWuueWZqCAqL1xyXG4gICAgcHJpdmF0ZSBfZml0ID0gZmFsc2U7XHJcbiAgICBASW5wdXQoKSBnZXQgZml0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9maXQ7XHJcbiAgICB9XHJcbiAgICBzZXQgZml0KHZhbDogYm9vbGVhbikge1xyXG4gICAgICAgIHRoaXMuX2ZpdCA9IHZhbDtcclxuICAgICAgICB0aGlzLmhvc3RDbHMgPSB2YWw7XHJcbiAgICB9XHJcbiAgICAvKiog5aaC5p6c5Li655yf77yM5YiZ6Ieq5Yqo5bGV5byAL+aUtue8qeWIl+eahOWkp+Wwj+S7pemAguWQiOe9keagvOWuveW6puW5tumYsuatouawtOW5s+a7muWKqOOAgiAqL1xyXG4gICAgcHJpdmF0ZSBfZml0Q29sdW1ucyA9IGZhbHNlO1xyXG4gICAgQElucHV0KCkgZ2V0IGZpdENvbHVtbnMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZpdENvbHVtbnM7XHJcbiAgICB9XHJcbiAgICBzZXQgZml0Q29sdW1ucyh2YWw6IGJvb2xlYW4pIHtcclxuICAgICAgICBpZiAodGhpcy5fZml0Q29sdW1ucyAhPT0gdmFsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2ZpdENvbHVtbnMgPSB2YWw7XHJcbiAgICAgICAgICAgIGlmICh2YWwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0Rml0Q29sdW1ucyh2YWwpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZnMuZml0Q29sdW1ucyhmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRmcy5pbml0Q29sdW1ucyhmYWxzZSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc3RpdHV0ZUNvbHVtbnNTaXplKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKiog5qC55o2uZ3JpZOeahOWuveW6puiHquWKqOiwg+aVtOWIl+WuveW6piAqL1xyXG4gICAgcHJpdmF0ZSBfYXV0b0ZpdENvbHVtbnMgPSBmYWxzZTtcclxuICAgIEBJbnB1dCgpIGdldCBhdXRvRml0Q29sdW1ucygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYXV0b0ZpdENvbHVtbnM7XHJcbiAgICB9XHJcbiAgICBzZXQgYXV0b0ZpdENvbHVtbnModmFsKSB7XHJcbiAgICAgICAgdGhpcy5fYXV0b0ZpdENvbHVtbnMgPSB2YWw7XHJcbiAgICAgICAgdGhpcy5kZnMudXBkYXRlUHJvcGVydHkoJ2F1dG9GaXRDb2x1bW5zJywgdmFsKTtcclxuICAgIH1cclxuXHJcbiAgICAvKiog56aB55SoICovXHJcbiAgICBASW5wdXQoKSBkaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgLyoqXHJcbiAgICAgKiDmu5rliqjmnaHmmL7npLrmqKHlvI/vvIzpu5jorqTkuLogYXV0b1xyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBzY3JvbGxCYXJTaG93TW9kZTogJ2F1dG8nIHwgJ2FsbHdheXMnID0gJ2F1dG8nO1xyXG4gICAgQElucHV0KCkgc2Nyb2xsQmFyT3B0aW9ucyA9IHtcclxuICAgICAgICB3aWR0aDogMTgsXHJcbiAgICAgICAgaGVpZ2h0OiAxOFxyXG4gICAgfTtcclxuICAgIC8qKiDlvZPmu5rliqjkuIDnm7TmmL7npLrml7bvvIzmmK/lkKbmmL7npLrkuKTnq6/nmoTnrq3lpLQgKi9cclxuICAgIEBJbnB1dCgpIHNob3dTY3JvbGxBcnJvdyA9IGZhbHNlO1xyXG5cclxuICAgIC8qKiDlj6/mi5bliqjliJforr7nva7liJflrr0gKi9cclxuICAgIEBJbnB1dCgpIHJlc2l6ZUNvbHVtbiA9IHRydWU7XHJcbiAgICAvKiog5pi+56S66KGM5Y+3ICovXHJcbiAgICBASW5wdXQoKSBzaG93TGluZU51bWJlciA9IGZhbHNlO1xyXG4gICAgLyoqIOihjOWPt+ihqOWktOWtl+espiAqL1xyXG4gICAgQElucHV0KCkgbGluZU51bWJlclRpdGxlID0gJyc7XHJcbiAgICAvKiog6KGM5Y+35a695bqmICovXHJcbiAgICBASW5wdXQoKSBsaW5lTnVtYmVyV2lkdGggPSAzNjtcclxuICAgIC8qKiDpvKDmoIfmu5Hov4fmlYjmnpzlvIDlhbPvvIzpu5jorqTlvIDlkK8gKi9cclxuICAgIEBJbnB1dCgpIHJvd0hvdmVyID0gdHJ1ZTtcclxuICAgIC8qKiDlhYHorrjnvJbovpHml7bvvIzljZXlh7vov5vlhaXnvJbovpHnirbmgIE7IGZhbHNl5Li65Y+M5Ye76L+b5YWl57yW6L6RICovXHJcbiAgICBASW5wdXQoKSBjbGlja1RvRWRpdCA9IHRydWU7XHJcblxyXG4gICAgcHJpdmF0ZSBfbG9ja1BhZ2luYXRpb24gPSBmYWxzZTtcclxuICAgIC8qKiDplIHlrprliIbpobXmnaHvvIzplIHlrprlkI7pobXnoIHngrnlh7vml6DmlYggKi9cclxuICAgIEBJbnB1dCgpIGdldCBsb2NrUGFnaW5hdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbG9ja1BhZ2luYXRpb247XHJcbiAgICB9XHJcbiAgICBzZXQgbG9ja1BhZ2luYXRpb24odmFsOiBib29sZWFuKSB7XHJcbiAgICAgICAgdGhpcy5fbG9ja1BhZ2luYXRpb24gPSB2YWw7XHJcbiAgICAgICAgaWYgKHRoaXMuZGdQYWdlcikge1xyXG4gICAgICAgICAgICB0aGlzLmRnUGFnZXJbdmFsID8gJ2xvY2snIDogJ3VubG9jayddKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKiDliIbpobXkv6Hmga8gKi9cclxuICAgIHByaXZhdGUgX19wYWdpbmF0aW9uID0gdHJ1ZTtcclxuICAgIEBJbnB1dCgpIHNldCBwYWdpbmF0aW9uKHZhbCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9fcGFnaW5hdGlvbiAhPT0gdmFsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX19wYWdpbmF0aW9uID0gdmFsO1xyXG4gICAgICAgICAgICB0aGlzLmRmcy51cGRhdGVQcm9wZXJ0eSgncGFnaW5hdGlvbicsIHZhbCk7XHJcbiAgICAgICAgICAgIHRoaXMuZGdzLnNob3dHcmlkSGVhZGVyLmVtaXQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXQgcGFnaW5hdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fX3BhZ2luYXRpb247XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIOWIhumhtee7hOS7tuiHquWumuS5ieWGheWuueWMuuaooeadvyAqL1xyXG4gICAgQElucHV0KCkgcGFnZXJDb250ZW50VGVtcGxhdGU6IFRlbXBsYXRlUmVmPGFueT4gPSBudWxsO1xyXG4gICAgLyoqIOWIhumhteadoeWvuem9kOWxleekuuaWueW8j++8jCBsZWZ0LCByaWdodCwgY2VudGVyICAg6buY6K6k5Li6IHJpZ2h0ICAqL1xyXG4gICAgQElucHV0KCkgcGFnZXJQb3M6ICdsZWZ0J3wnY2VudGVyJ3wgJ3JpZ2h0JyA9ICdyaWdodCc7XHJcblxyXG4gICAgLyoqIOWIhumhteadoeaYvuekuuaooeW8j++8jCBkZWZhdWx0LCBzaW1wbGUgKi9cclxuICAgIEBJbnB1dCgpIHBhZ2VyVmlld01vZGUgPSAnZGVmYXVsdCc7XHJcbiAgICAvKiog5ZCv55So5pyN5Yqh5Zmo56uv5YiG6aG1ICovXHJcbiAgICBASW5wdXQoKSBwYWdlck9uU2VydmVyID0gdHJ1ZTtcclxuICAgIC8qKiDmr4/pobXorrDlvZXmlbAgKi9cclxuICAgIEBJbnB1dCgpIHBhZ2VMaXN0ID0gWzEwLCAyMCwgMzAsIDUwLCAxMDBdO1xyXG4gICAgLyoqIOW9k+WJjemhteeggSAqL1xyXG4gICAgQElucHV0KCkgcGFnZUluZGV4ID0gMTtcclxuICAgIC8qKiDmr4/pobXorrDlvZXmlbAgKi9cclxuICAgIEBJbnB1dCgpIHBhZ2VTaXplID0gMjA7XHJcbiAgICAvKiog5YiG6aG15Yy66auY5bqmICovXHJcbiAgICBASW5wdXQoKSBwYWdlckhlaWdodCA9IDU2O1xyXG4gICAgLyoqIOaYvuekuuavj+mhteiusOW9leaVsCAqL1xyXG4gICAgQElucHV0KCkgc2hvd1BhZ2VMaXN0ID0gZmFsc2U7XHJcbiAgICAvKiog5pi+56S65YiG6aG15L+h5oGvICovXHJcbiAgICBASW5wdXQoKSBzaG93UGFnZUluZm8gPSB0cnVlO1xyXG4gICAgLyoqIOaYvuekuumhteeggSAqL1xyXG4gICAgQElucHV0KCkgc2hvd1BhZ2VOdW1iZXIgPSB0cnVlO1xyXG4gICAgLyoqIOaYvuekuumhteeggeacgOWkp+aVsOmHjyAqL1xyXG4gICAgQElucHV0KCkgcGFnZXJMYWJlbFNpemUgPSA3O1xyXG4gICAgLyoqIOaYvuekuui9rOiHs+aMh+Wumumhteeggei+k+WFpeahhiAqL1xyXG4gICAgQElucHV0KCkgc2hvd0dvdG9JbnB1dCA9IGZhbHNlO1xyXG4gICAgLyoqIOWQr+eUqOi3qOmhteWkmumAiSAqL1xyXG4gICAgQElucHV0KCkgZW5hYmxlTW9yZVBhZ2VTZWxlY3QgPSBmYWxzZTtcclxuICAgIC8qKiDmmL7npLrpgInkuK3liJfooaggKi9cclxuICAgIEBJbnB1dCgpIHNob3dTZWxlY3RlZExpc3QgPSBmYWxzZTtcclxuICAgIC8qKiDpgInkuK3liJfooajkuK3vvIzmr4/mnaHorrDlvZXmmL7npLrnmoTlhoXlrrkgKi9cclxuICAgIEBJbnB1dCgpIHNlbGVjdGVkSXRlbUZvcm1hdHRlcjogKGRhdGEpID0+IHN0cmluZztcclxuICAgIC8qKiDljZXlhYPmoLzkv6Hmga/mj5DnpLrlu7bml7bvvIzpu5jorqQgMTAwMG1zICovXHJcbiAgICBASW5wdXQoKSBjZWxsVGlwVGltZXIgPSAxMDAwO1xyXG4gICAgLyoqIGdyaWQg5YaF6YOo5aSE55CG5YiG6aG154q25oCBICovXHJcbiAgICBASW5wdXQoKSBjb250cm9sUGFnaW5hdGlvblN0YXRlID0gdHJ1ZTtcclxuICAgIC8qKiDmgLvorrDlvZXmlbAgKi9cclxuICAgIHByaXZhdGUgX3RvdGFsID0gMDtcclxuICAgIGdldCB0b3RhbCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdG90YWw7XHJcbiAgICB9XHJcblxyXG4gICAgQElucHV0KCkgc2V0IHRvdGFsKHZhbDogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5fdG90YWwgPSB2YWw7XHJcbiAgICAgICAgdGhpcy5wYWdlck9wdHMudG90YWxJdGVtcyA9IHZhbDtcclxuICAgICAgICBpZiAoIXRoaXMucGFnaW5hdGlvbikge1xyXG4gICAgICAgICAgICB0aGlzLnBhZ2VyT3B0cy5pdGVtc1BlclBhZ2UgPSB2YWw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZGZzLnNldFRvdGFsKHZhbCk7XHJcbiAgICB9XHJcbiAgICAvKiog5ZCv55So6YCJ5Lit6KGMICovXHJcbiAgICBASW5wdXQoKSBlbmFibGVTZWxlY3RSb3cgPSB0cnVlO1xyXG4gICAgLyoqIOWQr+eUqOWkmumAiSAqL1xyXG4gICAgQElucHV0KCkgbXVsdGlTZWxlY3QgPSBmYWxzZTtcclxuICAgIC8qKiDlkK/nlKjlpJrpgInml7bvvIzmmK/lkKbmmL7npLpjaGVja2JveCAqL1xyXG4gICAgQElucHV0KCkgc2hvd0NoZWNrYm94ID0gZmFsc2U7XHJcbiAgICAvKiog5pi+56S65YWo6YCJY2hlY2tib3ggKi9cclxuICAgIEBJbnB1dCgpIHNob3dBbGxDaGVja2JveCA9IGZhbHNlO1xyXG4gICAgLyoqIOW9k+WQr+eUqOWkmumAieaXtu+8jOeCueWHu+ihjOmAieS4re+8jOWPquWFgeiuuOS4lOWPquacieS4gOihjOiiq+mAieS4reOAgiwg6buY6K6k5Li6IHRydWUgKi9cclxuICAgIEBJbnB1dCgpIG9ubHlTZWxlY3RTZWxmID0gdHJ1ZTtcclxuICAgIC8qKiDlkK/nlKjlpJrpgInkuJTmmL7npLpjaGVja2JveCwg6YCJ5Lit6KGM5ZCM5pe26ZKp6YCJLCDpu5jorqTkuLogZmFsc2UgKi9cclxuICAgIEBJbnB1dCgpIGNoZWNrT25TZWxlY3QgPSBmYWxzZTtcclxuICAgIC8qKiDlkK/nlKjlpJrpgInkuJTmmL7npLpjaGVja2JveCwg6ZKp6YCJ5ZCO6YCJ5Lit6KGMLCDpu5jorqTkuLogZmFsc2UgKi9cclxuICAgIEBJbnB1dCgpIHNlbGVjdE9uQ2hlY2sgPSBmYWxzZTtcclxuICAgIC8qKlxyXG4gICAgICog6KGM6YCJ5Lit5qih5byP77yMY3VzdG9tOiDoh6rlrprkuYnvvIwgZGVmYXVsdDog5Lu/V2luZG93c+i1hOa6kOeuoeeQhuWZqOmAieS4rVxyXG4gICAgICog5rOo5oSP77yaIOatpOWxnuaAp+S7heWkmumAie+8jOaYvuekuuWkjemAieahhuacieaViFxyXG4gICAgICog6buY6K6k5YC877yaIGN1c3RvbVxyXG4gICAgICogYWRkVGltZTogMjAyMS0xMi0xNCBieSBMVUNBUyBIVUFOR1xyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBzZWxlY3Rpb25Nb2RlOiAnY3VzdG9tJyB8ICdkZWZhdWx0JyA9ICdjdXN0b20nO1xyXG4gICAgLyoqXHJcbiAgICAgKiDljZXlh7vooYzpgInkuK3lkI7vvIzlnKjmrKHngrnlh7vkuI3kvJrooqvlj5bmtojpgInkuK3nirbmgIE7XHJcbiAgICAgKi9cclxuICAgIEBJbnB1dCgpIGtlZXBTZWxlY3QgPSB0cnVlO1xyXG4gICAgLyoqIOW9k+aVsOaNruS4uuepuuaXtu+8jOS9v+eUqOepuueZveaYvuekuu+8jOS4lOmrmOW6puS4uuS4gOihjOeahOmrmOW6puOAgiDpu5jorqTkuLogZmFsc2UgKi9cclxuICAgIEBJbnB1dCgpIHVzZUJsYW5rV2hlbkRhdGFJc0VtcHR5ID0gZmFsc2U7XHJcblxyXG4gICAgLyoqIOaVsOaNruS4uuepuuaXtueahOmrmOW6piAqL1xyXG4gICAgQElucHV0KCkgZW1wdHlEYXRhSGVpZ2h0ID0gMjQwO1xyXG4gICAgLyoqIOepuuaVsOaNruaXtu+8jOaYvuekuueahOaPkOekuuaWh+acrCAqL1xyXG4gICAgQElucHV0KCkgZW1wdHlNZXNzYWdlID0gJ+aaguaXoOaVsOaNric7XHJcbiAgICAvKiog5peg5pWw5o2u5pe255qE5qih5p2/ICovXHJcbiAgICBASW5wdXQoKSBlbXB0eVRlbXBsYXRlOiBUZW1wbGF0ZVJlZjxhbnk+ID0gbnVsbDtcclxuXHJcbiAgICAvKiog5Li76ZSu5a2X5q61ICovXHJcbiAgICBASW5wdXQoKSBpZEZpZWxkID0gJ2lkJztcclxuICAgIC8qKiDor7fmsYLmlbDmja7mupDnmoRVUkwgKi9cclxuICAgIEBJbnB1dCgpIHVybDogc3RyaW5nO1xyXG4gICAgLyoqIOaVsOaNrua6kCAqL1xyXG4gICAgQElucHV0KCkgZGF0YTogYW55W107XHJcblxyXG4gICAgLyoqIOmhteiEmuaVsOaNriAqL1xyXG4gICAgcHJpdmF0ZSBfZm9vdGVyRGF0YTogT2JzZXJ2YWJsZTxhbnk+ID0gb2YoW10pO1xyXG4gICAgQElucHV0KCkgZ2V0IGZvb3RlckRhdGEoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Zvb3RlckRhdGE7XHJcbiAgICB9XHJcbiAgICBzZXQgZm9vdGVyRGF0YShyb3dzKSB7XHJcbiAgICAgICAgaWYgKHJvd3MgJiYgcm93cy5zdWJzY3JpYmUpIHtcclxuICAgICAgICAgICAgdGhpcy5fZm9vdGVyRGF0YSA9IHJvd3M7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fZm9vdGVyRGF0YSA9IG9mKHJvd3MgfHwgW10pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocm93cykge1xyXG4gICAgICAgICAgICB0aGlzLnNldEZvb3RlckhlaWdodCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNkLmRldGVjdENoYW5nZXMoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKiog6aqM6K+B5LiN6YCa6L+H5pe25Y+v5Lul57uT5p2f57yW6L6RICovXHJcbiAgICBASW5wdXQoKSBlbmRFZGl0QnlJbnZhbGlkID0gdHJ1ZTtcclxuXHJcbiAgICAvKiog5YiX6ZuG5ZCIICovXHJcbiAgICBwcml2YXRlIF9jb2x1bW5zID0gW107XHJcbiAgICBASW5wdXQoKVxyXG4gICAgZ2V0IGNvbHVtbnMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbHVtbnM7XHJcbiAgICB9XHJcbiAgICBzZXQgY29sdW1ucyh2YWx1ZXMpIHtcclxuICAgICAgICB0aGlzLl9jb2x1bW5zID0gdGhpcy5jb3JyZWN0Q29sdW1ucyh2YWx1ZXMpO1xyXG4gICAgICAgIHRoaXMuZGZzLnVwZGF0ZVByb3BlcnR5KCdjb2x1bW5zJywgdGhpcy5fY29sdW1ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfZmllbGRzID0gW107XHJcbiAgICBnZXQgZmllbGRzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9maWVsZHM7XHJcbiAgICB9XHJcblxyXG4gICAgQElucHV0KCkgc2V0IGZpZWxkcyhjb2xzKSB7XHJcbiAgICAgICAgdGhpcy5fZmllbGRzID0gY29scztcclxuICAgICAgICB0aGlzLmNvbHVtbnMgPSBjb2xzO1xyXG4gICAgICAgIGlmICh0aGlzLmRhdGEpIHtcclxuICAgICAgICAgICAgdGhpcy5jb2x1bW5zQ2hhbmdlZChmYWxzZSwgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqIOemgeatouaVsOaNruaKmOihjO+8jOm7mOiupOWAvO+8mnRydWUs5Y2z5Zyo5LiA6KGM5pi+56S677yM5LiN5oqY6KGM44CCICovXHJcbiAgICBASW5wdXQoKSBub3dyYXAgPSB0cnVlO1xyXG4gICAgLyoqIOiZmuaLn+WKoOi9vSAqL1xyXG4gICAgQElucHV0KCkgdmlydHVhbGl6ZWQgPSBmYWxzZTtcclxuICAgIC8qKiDmmK/lkKblkK/nlKjlvILmraXliqDovb3mlbDmja4gKi9cclxuICAgIEBJbnB1dCgpIHZpcnR1YWxpemVkQXN5bmNMb2FkID0gZmFsc2U7XHJcbiAgICAvKiog6KGM5qC35byPICovXHJcbiAgICBASW5wdXQoKSByb3dTdHlsZXI6IChyb3dEYXRhLCByb3dJbmRleD86IG51bWJlcikgPT4geyBjbHM/OiBzdHJpbmcsIHN0eWxlPzogYW55IH07XHJcbiAgICAvKiog57yW6L6R5pa55byP77yaIHJvdyjmlbTooYznvJbovpEp44CBY2VsbCjljZXlhYPmoLznvJbovpEp77yb6buY6K6k5Li6IHJvdyAqL1xyXG4gICAgQElucHV0KCkgZWRpdE1vZGU6ICdyb3cnIHwgJ2NlbGwnID0gJ3Jvdyc7XHJcbiAgICAvKiog57yW6L6R54q25oCBICovXHJcbiAgICBwcml2YXRlIF9lZGl0YWJsZSA9IGZhbHNlO1xyXG4gICAgZ2V0IGVkaXRhYmxlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9lZGl0YWJsZTtcclxuICAgIH1cclxuICAgIEBJbnB1dCgpIHNldCBlZGl0YWJsZSh2KSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2VkaXRhYmxlICE9PSB2KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2VkaXRhYmxlID0gdjtcclxuICAgICAgICAgICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgIHRoaXMuZGdzLnVwZGF0ZUVtcHR5U3R5bGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKiog5ZCv55So5Y+v57yW6L6R5Y2V5YWD5qC85qC35byP44CCICovXHJcbiAgICBASW5wdXQoKSBlbmFibGVFZGl0Q2VsbFN0eWxlID0gZmFsc2U7XHJcblxyXG4gICAgLyoqIOi/m+WFpee8lui+keeKtuaAgeaXtumAieaYr+WQpumAieS4reaWh+acrO+8m+m7mOiupOS4uiBmYWxzZVxyXG4gICAgICog5LuF5paH5pys5qGG5pSv5oyB5q2k54m55oCnXHJcbiAgICAgKi9cclxuICAgIEBJbnB1dCgpIHNlbGVjdE9uRWRpdGluZyA9IGZhbHNlO1xyXG5cclxuICAgIC8qKiDnvJbovpHlmajpq5jluqYgKi9cclxuICAgIEBJbnB1dCgpIGVkaXRvckhlaWdodCA9IDMwO1xyXG4gICAgLyoqIOWQr+eUqOi/nOerr+aOkuW6jyAqL1xyXG4gICAgQElucHV0KCkgcmVtb3RlU29ydCA9IGZhbHNlO1xyXG4gICAgLyoqIOaOkuW6j+Wtl+autSAqL1xyXG4gICAgQElucHV0KCkgc29ydE5hbWU6IHN0cmluZztcclxuICAgIC8qKiDmjpLluo/mlrnlvI8gYXNjIHwgZGVzYyAqL1xyXG4gICAgQElucHV0KCkgc29ydE9yZGVyOiBzdHJpbmc7XHJcbiAgICAvKiog5YWB6K645aSa5YiX5o6S5bqPICovXHJcbiAgICBASW5wdXQoKSBtdWx0aVNvcnQ6IGJvb2xlYW47XHJcblxyXG4gICAgQElucHV0KCkgaG92ZXJSb3dDbHMgPSAnZi1kYXRhZ3JpZC1yb3ctaG92ZXInO1xyXG5cclxuICAgIC8qKiDlhYHorrjmi5bmi73liJfpobrluo8gKi9cclxuICAgIEBJbnB1dCgpIGVuYWJsZURyYWdDb2x1bW4gPSBmYWxzZTtcclxuXHJcbiAgICAvKiog6KGM5YiG57uE6Z2i5p2/6auY5bqm77yM6buY6K6kIDUwUFggKi9cclxuICAgIEBJbnB1dCgpIHJvd0dyb3VwUGFuZWxIZWlnaHQgPSA1MDtcclxuICAgIC8qKiDlkK/nlKjliIbnu4TooYwgKi9cclxuICAgIEBJbnB1dCgpIGdyb3VwUm93cyA9IGZhbHNlO1xyXG4gICAgLyoqIOWQr+eUqOihjOWIhue7hOWQiOiuoeihjCAqL1xyXG4gICAgQElucHV0KCkgZ3JvdXBGb290ZXIgPSBmYWxzZTtcclxuICAgIC8qKiDliIbnu4TooYzmmK/lkKblsZXlvIDvvIzpu5jorqTkuLog5bGV5byAICAqL1xyXG4gICAgQElucHV0KCkgZXhwYW5kR3JvdXBSb3dzID0gdHJ1ZTtcclxuICAgIC8qKlxyXG4gICAgICog5YiG57uE5ZCI6K6h6KGM6Ieq5a6a5LmJ5qC35byP77yaXHJcbiAgICAgKiDlhYHorrjnmoTlgLzkuLpcclxuICAgICAqIC0geyBjbHM6ICdjc3NjbGFzc25hbWUsICcsIHN0eWxlOiB7IGNvbG9yOiAncmVkJywgYm9yZGVyOiAxcHggc29saWQgfSB9XHJcbiAgICAgKiAtIChncm91cEZvb3RlclJvd0RhdGEpOiB7IGNsczogJ2Nzc2NsYXNzbmFtZSwgJywgc3R5bGU6IHsgY29sb3I6ICdyZWQnLCBib3JkZXI6IDFweCBzb2xpZCB9IH0gPT4ge31cclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgZ3JvdXBGb290ZXJTdHlsZXI6IGFueTtcclxuICAgIC8qKiDlkIjorqHmlbDmja7mmL7npLrkvY3nva5cclxuICAgICAqIGluR3JvdXBSb3c6IOS4juWIhue7hOWcqOWQjOS4gOihjO+8jOWIhuWIq+ebuOWFs+WQiOiuoeWtl+auteWvuem9kFxyXG4gICAgICogZ3JvdXBGb290ZXJSb3c6IOWcqOWIhue7hOaVsOaNruacgOWQjuWinuWKoOS4gOihjFxyXG4gICAgICog6buY6K6k5Li6IGdyb3VwRm9vdGVyUm93XHJcbiAgICAgKi9cclxuICAgIEBJbnB1dCgpIGdyb3VwU3VtbWFyeVBvc2l0aW9uOiAnaW5Hcm91cFJvdycgfCAnZ3JvdXBGb290ZXJSb3cnID0gJ2dyb3VwRm9vdGVyUm93JztcclxuICAgIC8qKiDliIbnu4Tkv6Hmga/lkIjlubbliJfmlbBcclxuICAgICAqIOm7mOiupOS4uiAxXHJcbiAgICAgKi9cclxuICAgIEBJbnB1dCgpIGdyb3VwQ2VsbENvbFNwYW4gPSAxO1xyXG5cclxuICAgIC8qKiDliIbnu4TlrZfmrrXlkI3np7AsIOWkmuWtl+auteWIhue7hOS7peiLseaWh+mAl+WPt+WIhumalCAqL1xyXG4gICAgcHJpdmF0ZSBfZ3JvdXBGaWVsZCA9ICcnO1xyXG4gICAgZ3JvdXBGaWVsZHMkID0gbmV3IEJlaGF2aW9yU3ViamVjdChbXSk7XHJcbiAgICBnZXQgZ3JvdXBGaWVsZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZ3JvdXBGaWVsZDtcclxuICAgIH1cclxuICAgIEBJbnB1dCgpIHNldCBncm91cEZpZWxkKHZhbCkge1xyXG4gICAgICAgIHRoaXMuX2dyb3VwRmllbGQgPSB2YWwgfHwgJyc7XHJcblxyXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHRoaXMuX2dyb3VwRmllbGQpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2dyb3VwRmllbGQgPSB0aGlzLl9ncm91cEZpZWxkLmpvaW4oJywnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9ncm91cEZpZWxkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ3JvdXBGaWVsZHMkLm5leHQodGhpcy5fZ3JvdXBGaWVsZC5zcGxpdCgnLCcpKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmdyb3VwRmllbGRzJC5uZXh0KFtdKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZGZzLnVwZGF0ZVByb3BlcnR5KCdncm91cEZpZWxkJywgdGhpcy5fZ3JvdXBGaWVsZCk7XHJcbiAgICB9XHJcbiAgICAvKiog5pi+56S65YiG57uE5YiXICovXHJcbiAgICBASW5wdXQoKSBzaG93R3JvdXBDb2x1bW4gPSB0cnVlO1xyXG4gICAgLyoqIOWIhue7hOagvOW8j+WMliAqL1xyXG4gICAgQElucHV0KCkgZ3JvdXBGb3JtYXR0ZXI6IChncm91cFJvdzogYW55KSA9PiBhbnk7XHJcbiAgICAvKiog5YiG57uE6KGM5qC35byPICovXHJcbiAgICBASW5wdXQoKSBncm91cFN0eWxlcjogKGdyb3VwUm93OiBhbnkpID0+IHsgY2xzPzogc3RyaW5nLCBzdHlsZT86IGFueSB9O1xyXG5cclxuICAgIC8qKiDmmL7npLrliIbnu4TliJfpnaLmnb/jgILpu5jorqTkuLogZmFsc2UgKi9cclxuICAgIHByaXZhdGUgX3Nob3dSb3dHcm91cFBhbmVsID0gZmFsc2U7XHJcbiAgICBASW5wdXQoKSBzZXQgc2hvd1Jvd0dyb3VwUGFuZWwodmFsKSB7XHJcbiAgICAgICAgdGhpcy5fc2hvd1Jvd0dyb3VwUGFuZWwgPSB2YWw7XHJcbiAgICB9XHJcbiAgICBnZXQgc2hvd1Jvd0dyb3VwUGFuZWwoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ3JvdXBSb3dzICYmIHRoaXMuX3Nob3dSb3dHcm91cFBhbmVsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiDlj4zlh7vooajlpLTpgILlupTlhoXlrrnlrr3luqYgKi9cclxuICAgIEBJbnB1dCgpIEF1dG9Db2x1bW5XaWR0aFVzZURibGNsaWNrID0gdHJ1ZTtcclxuICAgIC8qKiDooYzpkqnpgInlj4rpgInkuK3npoHnlKjooajovr7lvI8gKi9cclxuICAgIEBJbnB1dCgpIGRpc2FibGVSb3c6IChyb3csIGluZGV4PzogYW55KSA9PiBib29sZWFuO1xyXG4gICAgLyoqIOS9v+eUqOWGhemDqOi/h+a7pOWZqDsg6buY6K6k5Li6IGZhbHNlICovXHJcbiAgICBASW5wdXQoKSB1c2VEZWZhdWx0RmlsdGVyID0gZmFsc2U7XHJcbiAgICAvKiog6L+H5ruk5Zu+5qCH5LiO5o6S5bqP5Zu+5qCH5ZCI5bm277yM5q2k5bGe5oCn5LiOIGVuYWJsZUZpbHRlclJvdyDkupLmlqUgKi9cclxuICAgIEBJbnB1dCgpIGVuYWJsZVNtYXJ0RmlsdGVyID0gZmFsc2U7XHJcbiAgICAvKiog5pi+56S66L+H5ruk6KGMICovXHJcbiAgICBASW5wdXQoKSBlbmFibGVGaWx0ZXJSb3cgPSBmYWxzZTtcclxuICAgIC8qKiDmnI3liqHlmajnq6/ov4fmu6QgKi9cclxuICAgIEBJbnB1dCgpIHJlbW90ZUZpbHRlciA9IGZhbHNlO1xyXG4gICAgLyoqIOWQr+eUqOi/h+a7pOadoeS7tuaYvuekuuadoSAqL1xyXG4gICAgQElucHV0KCkgc2hvd0ZpbHRlckJhciA9IGZhbHNlO1xyXG4gICAgLyoqIOi/h+a7pOadoeS7tuaxh+aAu+adoemrmOW6pu+8jOm7mOiupCAzMnB4ICAqL1xyXG4gICAgQElucHV0KCkgZmlsdGVyQmFySGVpZ2h0ID0gMzI7XHJcbiAgICBASW5wdXQoKSBmaWx0ZXJSb3dIZWlnaHQgPSA0MDtcclxuICAgIEBJbnB1dCgpIGNvbmRpdGlvbnM6IGFueSA9IHt9O1xyXG5cclxuICAgIEBJbnB1dCgpIHNlbGVjdFZhbHVlID0gbnVsbDtcclxuICAgIEBJbnB1dCgpIGNoZWNrVmFsdWVzID0gW107XHJcbiAgICBASW5wdXQoKSBzZWxlY3RWYWx1ZXMgPSBbXTtcclxuXHJcbiAgICAvKiog5ZCI5bm25Y2V5YWD5qC877yb5YWI5pSv5oyB57q15ZCR5ZCI5bm2ICovXHJcbiAgICBASW5wdXQoKSBtZXJnZUNlbGwgPSBmYWxzZTtcclxuICAgIEBJbnB1dCgpIG1lcmdlRmllbGRzID0gW107XHJcbiAgICAvKiog5ZCI5bm25Y2V5YWD5qC85pWw5o2u5ZCv55So5a6i5oi356uv5o6S5bqPICovXHJcbiAgICBASW5wdXQoKSBlbmFibGVDbGllbnRTb3J0Rm9yTWVyZ2VDZWxsID0gZmFsc2U7XHJcbiAgICAvKiog5L2/55So6auY57qn5o6n5Yi26Z2i5p2/KOWIl+iuvue9rikgKi9cclxuICAgIEBJbnB1dCgpIHVzZUNvbnRyb2xQYW5lbCA9IGZhbHNlO1xyXG4gICAgLyoqIOWQr+eUqOeugOa0geaOp+WItumdouadv+aooeW8j+OAgum7mOiupOS4uiBmYWxzZSAqL1xyXG4gICAgQElucHV0KCkgZW5hYmxlU2ltcGxlTW9kZSA9IGZhbHNlO1xyXG4gICAgLyoqIOeCueWHu+WIl+iuvue9ruWbvuagh++8jOm7mOiupOaJk+W8gOeahOaOp+WItumdouadvyAqL1xyXG4gICAgQElucHV0KCkgY29udHJvbFBhbmVsTW9kZTogJ2FkdmFuY2VkJyB8ICdzaW1wbGUnID0gJ2FkdmFuY2VkJztcclxuICAgIC8qKiDlkK/nlKjliJforr7nva7mlrnmoYggKi9cclxuICAgIEBJbnB1dCgpIGVuYWJsZVNjaGVtZSA9IGZhbHNlO1xyXG4gICAgLyoqIOezu+e7n+mihOWItuaWueahiOWQjeensCAqL1xyXG4gICAgQElucHV0KCkgZGVmYXVsdFNjaGVtZU5hbWUgPSAn57O757uf6aKE5Yi2JztcclxuXHJcbiAgICAvKiog6Zi75q2iY2xpY2sg5LqL5Lu25YaS5rOhICovXHJcbiAgICBASW5wdXQoKSBzdG9wUHJvcGFnYXRpb24gPSB0cnVlO1xyXG4gICAgLyoqXHJcbiAgICAgKiAoMjAyMTA1IOW8g+eUqClcclxuICAgICAqIOeCueWHu+WNleWFg+agvOi/m+ihjOe8lui+keeKtuaAgeaXtu+8jOWFs+mXreWFtuS7lkdyaWTnmoTnvJbovpHlmajjgILpu5jorqQgZmFsc2XvvIxcclxuICAgICAqIOWkmuS4quWIl+ihqOWtmOaXtu+8jOS7heacieS4gOS4quWIl+ihqOS4reaciee8lui+keeKtuaAge+8jOWFtuS7luWIl+ihqOe7k+adn+e8lui+kVxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBjbG9zZU90aGVyR3JpZEVkaXRvciA9IGZhbHNlO1xyXG4gICAgLyoqIOW9k+aVsOaNrua6kOS4uuepuuaXtu+8jOa4heepuuW3sumAieiusOW9lSAqL1xyXG4gICAgQElucHV0KCkgY2xlYXJTZWxlY3Rpb25zV2hlbkRhdGFJc0VtcHR5ID0gdHJ1ZTtcclxuICAgIC8qKiDlkK/nlKjlj7PplK7oj5zljZXvvIzpu5jorqTkuLogZmFsc2UgKi9cclxuICAgIEBJbnB1dCgpIGVuYWJsZUNvbnRleHRNZW51ID0gZmFsc2U7XHJcbiAgICAvKiog5Y+z6ZSu6I+c5Y2V5pWw5o2uICovXHJcbiAgICBASW5wdXQoKSBjb250ZXh0TWVudXM6IENvbnRleHRNZW51SXRlbVtdID0gbnVsbDtcclxuXHJcbiAgICBAT3V0cHV0KCkgc2VsZWN0VmFsdWVDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICBAT3V0cHV0KCkgY2hlY2tWYWx1ZXNDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICBAT3V0cHV0KCkgc2VsZWN0VmFsdWVzQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICAgIEBJbnB1dCgpIGJlZm9yZUVkaXQ6IChwYXJhbTogUm93RWRpdFBhcmFtKSA9PiBPYnNlcnZhYmxlPGJvb2xlYW4+O1xyXG4gICAgQE91dHB1dCgpIGJlZ2luRWRpdCA9IG5ldyBFdmVudEVtaXR0ZXI8Um93RWRpdFBhcmFtPigpO1xyXG4gICAgQElucHV0KCkgYWZ0ZXJFZGl0OiAocm93SW5kZXg6IG51bWJlciwgcm93RGF0YTogYW55LCBjb2x1bW4/OiBEYXRhQ29sdW1uLCBlZGl0b3I/OiBhbnkpID0+IE9ic2VydmFibGU8Ym9vbGVhbj47XHJcbiAgICBAT3V0cHV0KCkgZW5kRWRpdCA9IG5ldyBFdmVudEVtaXR0ZXI8eyByb3dJbmRleDogbnVtYmVyLCByb3dEYXRhOiBhbnksIGNvbHVtbj86IERhdGFDb2x1bW4sIHZhbHVlPzogYW55IH0+KCk7XHJcbiAgICBAT3V0cHV0KCkgY2FuY2VsRWRpdGVkID0gbmV3IEV2ZW50RW1pdHRlcjxzdHJpbmc+KCk7XHJcblxyXG4gICAgQE91dHB1dCgpIHNjcm9sbFkgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgQE91dHB1dCgpIHBhZ2VTaXplQ2hhbmdlZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIEBPdXRwdXQoKSBwYWdlQ2hhbmdlZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgICBAT3V0cHV0KCkgbG9hZFN1Y2Nlc3MgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgQE91dHB1dCgpIGZpbHRlckNoYW5nZWQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgQElucHV0KCkgYmVmb3JlU2VsZWN0OiAocGFyYW1zOiBCZWZvckV2ZW50UGFyYW0pID0+IE9ic2VydmFibGU8Ym9vbGVhbj47XHJcbiAgICBASW5wdXQoKSBiZWZvcmVVbnNlbGVjdDogKHBhcmFtczogQmVmb3JFdmVudFBhcmFtKSA9PiBPYnNlcnZhYmxlPGJvb2xlYW4+O1xyXG4gICAgQElucHV0KCkgYmVmb3JlQ2hlY2s6IChwYXJhbXM6IEJlZm9yRXZlbnRQYXJhbSkgPT4gT2JzZXJ2YWJsZTxib29sZWFuPjtcclxuICAgIEBJbnB1dCgpIGJlZm9yZVVuY2hlY2s6IChwYXJhbXM6IEJlZm9yRXZlbnRQYXJhbSkgPT4gT2JzZXJ2YWJsZTxib29sZWFuPjtcclxuICAgIEBJbnB1dCgpIGJlZm9yZVNvcnRDb2x1bW46IChmaWVsZDogc3RyaW5nLCBvcmRlcjogc3RyaW5nLCBpbnN0YW5jZTogRGF0YWdyaWRDb21wb25lbnQpID0+IE9ic2VydmFibGU8Ym9vbGVhbj47XHJcbiAgICAvKiog5ZCv55So6YCJ5Lit5Y2V5YWD5qC86auY5Lqu5pi+56S6ICovXHJcbiAgICBASW5wdXQoKSBlbmFibGVIaWdobGlnaHRDZWxsID0gZmFsc2U7XHJcbiAgICAvKiogIOmAieS4reeahOaVsOaNruWni+e7iOS7juaVsOaNrua6kOS4reiOt+WPli4g6buY6K6k5Li6IGZhbHNlICovXHJcbiAgICBASW5wdXQoKSBjaGVja2VkUm93c0RhdGFGcm9tU291cmNlID0gZmFsc2U7XHJcbiAgICAvKiog5b2T5YmN5Y2V5YWD5qC85Li65Y+q6K+75pe277yM5L2/55SodGFiIOmUrui3s+WIsOS4i+S4quWNleWFg+agvOaXtu+8jOaYr+WQpuWFgeiuuOi/m+WFpee8lui+keeKtuaAge+8jOm7mOiupOS4uiBmYWxzZTtcclxuICAgICAqIOm7mOiupOaDheWGteS4i++8jOW9k+WJjeWNleWFg+agvOWPquivu++8jOaMiVRBQui3s+WIsOS4i+S4qkNFTEwg5pe277yM6YCJ5LitQ0VMTCDvvIzlm57ovabov5vlhaXnvJbovpHjgIJcclxuICAgICAqIOW8gOWQr+WQju+8jOS4i+S4quWNleWFg+agvOiHquWKqOi/m+WFpee8lui+keeKtuaAgeOAglxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBlZGl0Y2VsbFdoZW5UYWJLZXlkd29uID0gZmFsc2U7XHJcblxyXG4gICAgLyoqIOWNleWFg+agvOeCueWHu+WJjeS6i+S7tiAqL1xyXG4gICAgQE91dHB1dCgpIGJlZm9yZUNsaWNrQ2VsbCA9IG5ldyBFdmVudEVtaXR0ZXI8Um93RWRpdFBhcmFtPigpO1xyXG5cclxuICAgIEBPdXRwdXQoKSBkYmxjbGlja1JvdyA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIEBPdXRwdXQoKSBzZWxlY3RDaGFuZ2VkID0gbmV3IEV2ZW50RW1pdHRlcjxTZWxlY3RlZFJvdz4oKTtcclxuICAgIEBPdXRwdXQoKSB1blNlbGVjdCA9IG5ldyBFdmVudEVtaXR0ZXI8U2VsZWN0ZWRSb3c+KCk7XHJcbiAgICBAT3V0cHV0KCkgc2VsZWN0QWxsID0gbmV3IEV2ZW50RW1pdHRlcjxTZWxlY3RlZFJvd1tdPigpO1xyXG4gICAgQE91dHB1dCgpIHVuU2VsZWN0QWxsID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgLyoqIOW8guatpeivt+axguiZmuaLn+WKoOi9vSAqL1xyXG4gICAgQE91dHB1dCgpIHNjcm9sbFlMb2FkID0gbmV3IEV2ZW50RW1pdHRlcjx7IHBhZ2VyOiBudW1iZXIsIHBhZ2VTaXplOiBudW1iZXIgfT4oKTtcclxuXHJcbiAgICBAT3V0cHV0KCkgY2hlY2tlZCA9IG5ldyBFdmVudEVtaXR0ZXI8U2VsZWN0ZWRSb3c+KCk7XHJcbiAgICBAT3V0cHV0KCkgdW5DaGVja2VkID0gbmV3IEV2ZW50RW1pdHRlcjxTZWxlY3RlZFJvdz4oKTtcclxuICAgIEBPdXRwdXQoKSBjaGVja0FsbCA9IG5ldyBFdmVudEVtaXR0ZXI8U2VsZWN0ZWRSb3dbXT4oKTtcclxuICAgIEBPdXRwdXQoKSB1bkNoZWNrQWxsID0gbmV3IEV2ZW50RW1pdHRlcjxTZWxlY3RlZFJvd1tdPigpO1xyXG4gICAgQE91dHB1dCgpIGNoZWNrZWRDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPFNlbGVjdGVkUm93W10+KCk7XHJcblxyXG4gICAgQE91dHB1dCgpIGNvbHVtblNvcnRlZCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG5cclxuICAgIEBPdXRwdXQoKSByb3dDbGljayA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIEBPdXRwdXQoKSByb3dBcHBlbmRlZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIEBPdXRwdXQoKSByb3dEZWxldGVkID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgQE91dHB1dCgpIHJvd1VwZGF0ZWQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgQE91dHB1dCgpIGRhdGFDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgLyoqIOacgOWQjuS4gOihjOeahOacgOWQjuWNleWFg+agvOWbnui9puWkhOeQhuS6i+S7tiAqL1xyXG4gICAgQE91dHB1dCgpIGxhc3RDZWxsRW50ZXJIYW5kbGVyID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICAgIC8qKiDliIbnu4TlrZfmrrXlj5jljJblkI4gKi9cclxuICAgIEBPdXRwdXQoKSBncm91cEZpZWxkQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgLyoqIOaLluWKqOWIl+aUueWPmOWIl+aYvuekuuS9jee9ruWQjuinpuWPkSAqL1xyXG4gICAgQE91dHB1dCgpIGNvbHVtbk1vdmVkID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgLyoqIOWNleWFg+agvOeCueWHu+S6i+S7tiAqL1xyXG4gICAgQE91dHB1dCgpIGNlbGxDbGljayA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgICBAQ29udGVudENoaWxkcmVuKERhdGFncmlkQ29sdW1uRGlyZWN0aXZlKSBkZ0NvbHVtbnM/OiBRdWVyeUxpc3Q8RGF0YWdyaWRDb2x1bW5EaXJlY3RpdmU+O1xyXG4gICAgQFZpZXdDaGlsZCgnZGdQYWdlcicpIGRnUGFnZXI6IGFueTtcclxuICAgIEBWaWV3Q2hpbGQoJ3Jlc2l6ZVByb3h5JykgcmVzaXplUHJveHk6IEVsZW1lbnRSZWY7XHJcbiAgICBAVmlld0NoaWxkKCdyZXNpemVQcm94eUJnJykgcmVzaXplUHJveHlCZzogRWxlbWVudFJlZjtcclxuICAgIEBWaWV3Q2hpbGQoJ2RhdGFncmlkQ29udGFpbmVyJykgZGdDb250YWluZXI6IEVsZW1lbnRSZWY7XHJcbiAgICBAVmlld0NoaWxkKCdsb25nVGV4dEFyZWEnKSBsb25nVGV4dEFyZWE6IEVsZW1lbnRSZWY7XHJcbiAgICBAVmlld0NoaWxkKCdzbWFydGZpbHRlcnRvb2xiYXInKSBzbWFydEZpbHRlclRvb2xiYXI6IFNtYXJ0RmlsdGVyVG9vbGJhckNvbXBvbmVudDtcclxuICAgIGNvbEdyb3VwOiBDb2x1bW5Hcm91cDtcclxuXHJcbiAgICBwcml2YXRlIF9sb2FkaW5nID0gZmFsc2U7XHJcbiAgICBnZXQgbG9hZGluZygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbG9hZGluZztcclxuICAgIH1cclxuICAgIHNldCBsb2FkaW5nKHZhbDogYm9vbGVhbikge1xyXG4gICAgICAgIHRoaXMuX2xvYWRpbmcgPSB2YWw7XHJcbiAgICAgICAgaWYgKCF0aGlzLmNkWydkZXN0cm95ZWQnXSkge1xyXG4gICAgICAgICAgICB0aGlzLmNkLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHNlbGVjdGlvbnMoKTogU2VsZWN0ZWRSb3dbXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGZzLmdldFNlbGVjdGlvbnMoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgY2hlY2tlZHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hlY2tlZFJvd3M7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGNoZWNrZWRSb3dzKCkge1xyXG4gICAgICAgIGNvbnN0IGNoa2VkcyA9IHRoaXMuZGZzLmdldENoZWNrZWRzKCk7XHJcbiAgICAgICAgaWYgKHRoaXMuZW5hYmxlTW9yZVBhZ2VTZWxlY3QpIHtcclxuICAgICAgICAgICAgaWYgKGNoa2VkcyAmJiBjaGtlZHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY2hlY2tlZFJvd3NEYXRhRnJvbVNvdXJjZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbLi4uY2hrZWRzXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIOS7juaVsOaNrua6kOS4reiOt+WPluacgOaWsOaVsOaNrlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNoa2Vkcy5tYXAobiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZCA9IHRoaXMuZGZzLmZpbmRSb3cobi5pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbi5kYXRhID0gZC5kYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbjtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZGF0YSAmJiB0aGlzLmRhdGEubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gdGhpcy5kYXRhLm1hcChuID0+IG5bdGhpcy5pZEZpZWxkXSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY2hlY2tlZFJvd3NEYXRhRnJvbVNvdXJjZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjaGtlZHMuZmlsdGVyKG4gPT4gdGVtcC5pbmNsdWRlcyhuLmlkKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyDku47mlbDmja7mupDkuK3ojrflj5bmnIDmlrDmlbDmja5cclxuICAgICAgICAgICAgICAgIHJldHVybiBjaGtlZHMuZmlsdGVyKG4gPT4gdGVtcC5pbmNsdWRlcyhuLmlkKSkubWFwKG4gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGQgPSB0aGlzLmRmcy5maW5kUm93KG4uaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG4uZGF0YSA9IGQuZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG47XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGNoZWNrZWRSb3dzKHJvd3M6IGFueVtdKSB7XHJcbiAgICAgICAgaWYgKHJvd3MgJiYgcm93cy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcm93cyA9IHJvd3MubWFwKHIgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHIuZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICBpZDogclt0aGlzLmlkRmllbGRdLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHJcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5kZnMudXBkYXRlUHJvcGVydHkoJ2NoZWNrZWRSb3dzJywgcm93cyB8fCBbXSk7XHJcbiAgICAgICAgdGhpcy5pbml0U2VsZWN0T3JDaGVja2VkKCk7XHJcbiAgICAgICAgdGhpcy5jZC5tYXJrRm9yQ2hlY2soKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9zZWxlY3RlZFJvdyA9IG51bGw7XHJcbiAgICBnZXQgc2VsZWN0ZWRSb3coKTogU2VsZWN0ZWRSb3cge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zZWxlY3RlZFJvdztcclxuICAgIH1cclxuICAgIHNldCBzZWxlY3RlZFJvdyhyb3cpIHtcclxuICAgICAgICBpZiAocm93KSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdFZhbHVlICE9IHJvdy5pZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2VsZWN0ZWRSb3cgPSByb3c7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFZhbHVlID0gcm93LmlkO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RWYWx1ZUNoYW5nZS5lbWl0KHJvdy5pZCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdENoYW5nZWQuZW1pdChyb3cpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy51blNlbGVjdC5lbWl0KHRoaXMuX3NlbGVjdGVkUm93KTtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RWYWx1ZSA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0VmFsdWVDaGFuZ2UuZW1pdCgnJyk7XHJcbiAgICAgICAgICAgIHRoaXMuX3NlbGVjdGVkUm93ID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZHMgPSB7XHJcbiAgICAgICAgaW5kZXg6IDAsXHJcbiAgICAgICAgcm93czogW10sXHJcbiAgICAgICAgdG9wOiAwLFxyXG4gICAgICAgIGJvdHRvbTogMCxcclxuICAgICAgICBzY3JvbGxpbmc6IGZhbHNlIC8vIOaYr+WQpueUsea7muWKqOadoeinpuWPkVxyXG4gICAgfTtcclxuXHJcbiAgICBwYWdlck9wdHM6IGFueSA9IHt9O1xyXG4gICAgcmVzdFNlcnZpY2U6IFJlc3RTZXJ2aWNlO1xyXG4gICAgZWRpdG9yczogeyBba2V5OiBzdHJpbmddOiBhbnkgfSA9IHt9O1xyXG5cclxuICAgIHZhbGlkYXRvcnM6IHsgbmFtZTogc3RyaW5nLCB2YWx1ZTogVmFsaWRhdG9yRm4gfVtdID0gW107XHJcblxyXG4gICAgY3VycmVudENlbGw6IENlbGxJbmZvO1xyXG4gICAgZmxhdENvbHVtbnM6IERhdGFDb2x1bW5bXTtcclxuICAgIGZvb3RlcldpZHRoID0gMDtcclxuXHJcbiAgICBjbGlja0RlbGF5ID0gMTUwO1xyXG4gICAgcHJpdmF0ZSByZXNpemVDb2x1bW5JbmZvID0ge1xyXG4gICAgICAgIHByb3h5TGluZUVkZ2U6IDAsXHJcbiAgICAgICAgc3RhcnRXaWR0aDogMCxcclxuICAgICAgICBzdGFydFg6IDAsXHJcbiAgICAgICAgbGVmdDogMFxyXG4gICAgfTtcclxuXHJcbiAgICBwcml2YXRlIHJvOiBSZXNpemVPYnNlcnZlciB8IG51bGwgPSBudWxsO1xyXG4gICAgc3Vic2NyaXB0aW9uczogU3Vic2NyaXB0aW9uW10gPSBbXTtcclxuICAgIHJlYWxIZWFkZXJIZWlnaHQgPSAwO1xyXG4gICAgaXNTaW5nbGVDbGljazogYm9vbGVhbjtcclxuXHJcbiAgICBkb2N1ZW1udENlbGxDbGlja0V2ZW50czogYW55O1xyXG4gICAgZG9jdW1lbnRDZWxsQ2xpY2tIYW5kbGVyOiBhbnk7XHJcbiAgICBkb2N1bWVudENlbGxLZXlkb3duRXZlbnRzOiBhbnk7XHJcbiAgICBkb2N1bWVudENlbGxLZXlkb3duSGFuZGxlcjogYW55O1xyXG5cclxuICAgIC8vIOW8ueeql+S4reS9v+eUqOaXtu+8jOeql+WPo+eCueWHu+S6i+S7tuWkhOeQhlxyXG4gICAgcHJpdmF0ZSBtb2RhbENsaWNrRXZlbnQgPSBudWxsO1xyXG5cclxuICAgIC8vIOihjOmAieS4remUruebmOS6i+S7tlxyXG4gICAgZG9jdW1lbnRSb3dLZXlkb3duSGFuZGxlcjogYW55O1xyXG4gICAgLy8g6KGM57yW6L6R5b+r5o236ZSuXHJcbiAgICBkb2N1bWVudFJvd0VkaXRLZXlkb3duSGFubGRlcjogYW55O1xyXG4gICAgLy8gZG9jdW1lbnQg5Y2V5Ye75pe257uT5p2f6KGM57yW6L6RXHJcbiAgICBkb2N1bWVudENsaWNrRW5kUm93RWRpdEhhbmRsZXI6IGFueTtcclxuXHJcbiAgICBwZW5kaW5nID0gZmFsc2U7XHJcbiAgICBwdWJsaWMgY29sRm9ybWF0U2VyOiBDb2x1bW5Gb3JtYXRTZXJ2aWNlO1xyXG4gICAgc2Nyb2xsSW5zdGFuY2U6IFNjcm9sbGJhckRpcmVjdGl2ZSA9IG51bGw7XHJcbiAgICAvLyDmnKzlnLDljJbmnI3liqFcclxuICAgIGxvY2FsZVNlcnZpY2U6IExvY2FsZVNlcnZpY2U7XHJcbiAgICAvLyDlkIjlubbljZXlhYPovoXliqnkv6Hmga9cclxuICAgIG1lcmdlQ2VsbEluZm8gPSB7fTtcclxuICAgIGlnbm9yZVRhcmdldCA9IFsnSU5QVVQnLCAnU0VMRUNUJywgJ1RFWFRBUkVBJ107XHJcbiAgICBjbGllbnRGaWx0ZXJTZXJ2aWNlOiBEYXRhZ3JpZEZpbHRlclNlcnZpY2UgPSBudWxsO1xyXG5cclxuICAgIHNldHRpbmdTZXJ2aWNlOiBhbnk7IC8vIERhdGFncmlkU2V0dGluZ3NTZXJ2aWNlO1xyXG5cclxuICAgIC8qIOaOp+WItuWIl+Wtl+auteWQjeensDogX2RhdGFncmlkLXNldHRpbmctY29udHJvbF8gKi9cclxuICAgIENvbnRyb2xQYW5lbEZlaWxkID0gJ19kYXRhZ3JpZC1zZXR0aW5nLWNvbnRyb2xfJztcclxuXHJcbiAgICBwcml2YXRlIF9pc1Jlc2l6ZWQgPSBmYWxzZTtcclxuXHJcbiAgICBncmlkU2l6ZSA9IHsgd2lkdGg6IHRoaXMud2lkdGggKyAncHgnLCBoZWlnaHQ6IHRoaXMuaGVpZ2h0ICsgJ3B4JyB9O1xyXG4gICAgLy8g5a6i5oi356uv6L+H5ruk5pe277yM5piv5ZCm6L+H5ruk6KGM5Y+R55Sf5Y+Y5YyWXHJcbiAgICBjbGllbnRGaWx0ZXJDaGFuZ2VkID0gZmFsc2U7XHJcbiAgICAvLyBzdHlsZSdzIElEXHJcbiAgICBzdHlsZVNoZWV0SWQgPSAnJztcclxuXHJcbiAgICBncm91cFJvd1BhbmVsUGxhY2Vob2xkZXIgPSAnJztcclxuICAgIGNvbW1vblV0aWxzOiBDb21tb25VdGlscyA9IG51bGw7XHJcbiAgICBzbWFydEZpbHRlclNlcnZpY2U6IERhdGFncmlkU21hcnRGaWx0ZXJTZXJ2aWNlID0gbnVsbDtcclxuICAgIHNtYXJ0RmlsdGVyUmVzdWx0ID0geyBjb250cm9sRGF0YTogW10sIGNvbmRpdGlvbnM6IFtdIH07XHJcbiAgICBzbWFydEZpbHRlckJhckhlaWdodCA9IDMyO1xyXG4gICAgcHJpdmF0ZSBpZFNlcnZpY2U6IElkU2VydmljZTtcclxuICAgIHByaXZhdGUgX2FjdGl2ZV9kYXRhZ3JpZF9jbHMgPSAnZGF0YWdyaWQtYWN0aXZlJztcclxuICAgIHByaXZhdGUgX2JsdXJlZF9kYXRhZ3JpZF9jbHMgPSAnZGF0YWdyaWQtYmx1cnJlZCc7XHJcblxyXG4gICAgLy8g6Ieq5a6a5LmJZ3JpZOagt+W8j++8jOWIl+ihqOWIneWni+WQju+8jOS8mua3u+WKoOS4gOS4quiHquWumuS5ieWQjeensOeahOagt+W8j1xyXG4gICAgX2N1c3RvbV9kYXRhZ3JpZF9jbHMgPSAnZGF0YWdyaWQnO1xyXG4gICAgLy8g5aSa6YCJ5Lu/IHdpbmRvd3Mg6YCJ5oup5qih5byPXHJcbiAgICBzbXM6IFNlbGVjdGlvbk1vZGVTZXJ2aWNlO1xyXG4gICAgLy8g54Sm54K56KGM57Si5byV77yM5q+P5qyh6KGM54K55Ye75ZCO5pu05pawXHJcbiAgICBmb2N1c1Jvd0luZGV4ID0gLTE7XHJcblxyXG4gICAgcHJpdmF0ZSBkb2N1bWVudEJvZHlNb3VzZURvd24gPSBudWxsO1xyXG4gICAgcHJpdmF0ZSBmYXJyaXNJbnN0YW5jZXM6IEZhcnJpc0NvbXBvbmVudEluc3RhbmNlU2VydmljZSA9IG51bGw7XHJcbiAgICBwcml2YXRlIGN1cnJlbnRQYWdlckRhdGEgPSBbXTtcclxuICAgIHByaXZhdGUgcmVzaXplVGltZXIgPSBudWxsO1xyXG4gICAgcHJpdmF0ZSBkZWJ1Z1NlcjogRGVidWdTZXJ2aWNlID0gbnVsbDtcclxuICAgIHByaXZhdGUgREFUQV9DSEFOR0VEX1RJTUVSID0gbnVsbDtcclxuXHJcblxyXG4gICAgZm9ybVZhbGlkYXRpb25zID0gbnVsbDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwdWJsaWMgY2Q6IENoYW5nZURldGVjdG9yUmVmLFxyXG4gICAgICAgIHB1YmxpYyBlbDogRWxlbWVudFJlZixcclxuICAgICAgICBwdWJsaWMgaW5qZWN0OiBJbmplY3RvciwgcHVibGljIHpvbmU6IE5nWm9uZSxcclxuICAgICAgICBwdWJsaWMgZGZzOiBEYXRhZ3JpZEZhY2FkZVNlcnZpY2UsXHJcbiAgICAgICAgcHVibGljIGRnczogRGF0YWdyaWRTZXJ2aWNlLFxyXG4gICAgICAgIHByaXZhdGUgYXBwOiBBcHBsaWNhdGlvblJlZixcclxuICAgICAgICBwcm90ZWN0ZWQgZG9tU2FuaXRpemVyOiBEb21TYW5pdGl6ZXIsXHJcbiAgICAgICAgcHVibGljIHJlbmRlcjI6IFJlbmRlcmVyMikge1xyXG5cclxuICAgICAgICB0aGlzLnN0eWxlU2hlZXRJZCA9ICdEQVRBR1JJRC0nICsgVXRpbHMudXVpZCgpO1xyXG5cclxuICAgICAgICB0aGlzLmxvY2FsZVNlcnZpY2UgPSB0aGlzLmluamVjdC5nZXQoTG9jYWxlU2VydmljZSk7XHJcbiAgICAgICAgdGhpcy5yZXN0U2VydmljZSA9IHRoaXMuaW5qZWN0LmdldDxSZXN0U2VydmljZT4oREFUQUdSSURfUkVTVF9TRVJWSUNFRSwgbnVsbCk7XHJcbiAgICAgICAgdGhpcy5jb2xGb3JtYXRTZXIgPSB0aGlzLmluamVjdC5nZXQoQ29sdW1uRm9ybWF0U2VydmljZSk7XHJcbiAgICAgICAgdGhpcy5jb21tb25VdGlscyA9IHRoaXMuaW5qZWN0LmdldChDb21tb25VdGlscywgbnVsbCk7XHJcbiAgICAgICAgdGhpcy5jbGllbnRGaWx0ZXJTZXJ2aWNlID0gbmV3IERhdGFncmlkRmlsdGVyU2VydmljZShkZnMsIHRoaXMubG9jYWxlU2VydmljZSwgaW5qZWN0KTtcclxuICAgICAgICB0aGlzLmZhcnJpc0luc3RhbmNlcyA9IHRoaXMuaW5qZWN0LmdldChGYXJyaXNDb21wb25lbnRJbnN0YW5jZVNlcnZpY2UsIG51bGwpO1xyXG4gICAgICAgIHRoaXMuZGVidWdTZXIgPSB0aGlzLmluamVjdC5nZXQoRGVidWdTZXJ2aWNlLCBudWxsKTtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmRlYnVnU2VyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVidWdTZXIgPSBuZXcgRGVidWdTZXJ2aWNlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5kZWJ1Z1Nlci51c2VEZWJ1Z01vZGUpIHtcclxuICAgICAgICAgICAgdGhpcy5kZWJ1Z1Nlci51c2VEZWJ1Z01vZGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc21hcnRGaWx0ZXJTZXJ2aWNlID0gdGhpcy5pbmplY3QuZ2V0KERhdGFncmlkU21hcnRGaWx0ZXJTZXJ2aWNlLCBudWxsKTtcclxuICAgICAgICB0aGlzLmlkU2VydmljZSA9IHRoaXMuaW5qZWN0LmdldChJZFNlcnZpY2UsIG51bGwpO1xyXG4gICAgICAgIHRoaXMuZGZzLmxvY2FsSWQgPSB0aGlzLmxvY2FsZVNlcnZpY2UubG9jYWxlSWQ7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0dGluZ1NlcnZpY2UgPSB0aGlzLmluamVjdC5nZXQoR1JJRF9TRVRUSU5HU19TRVJWSUNFLCBudWxsKTtcclxuICAgICAgICBpZiAodGhpcy5zZXR0aW5nU2VydmljZSkge1xyXG4gICAgICAgICAgICBjb25zdCBzZXR0aW5nc0h0dHAgPSB0aGlzLmluamVjdC5nZXQoR1JJRF9TRVRUSU5HU19IVFRQLCBudWxsKTtcclxuICAgICAgICAgICAgdGhpcy5zZXR0aW5nU2VydmljZS5odHRwUmVzdFNlcnZpY2UgPSBzZXR0aW5nc0h0dHA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBkYXRhU3Vic2NyaXB0aW9uID0gdGhpcy5kZnMuZGF0YSQuc3Vic2NyaWJlKChkYXRhU291cmNlOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jbGVhbkRvbSgpO1xyXG4gICAgICAgICAgICBjb25zdCBkcyA9IHsgLi4uZGF0YVNvdXJjZSB9O1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZGl0aW9ucyAmJiBPYmplY3Qua2V5cyh0aGlzLmNvbmRpdGlvbnMpLmxlbmd0aCAmJiAhdGhpcy5yZW1vdGVGaWx0ZXIgJiYgdGhpcy51c2VEZWZhdWx0RmlsdGVyKSB7XHJcbiAgICAgICAgICAgICAgICBkcy5yb3dzID0gdGhpcy5jbGllbnRGaWx0ZXJTZXJ2aWNlLmV4ZWN1dGVGaWx0ZXIoZHMucm93cywgdGhpcy5jb25kaXRpb25zKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5kcyA9IGRzO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuZHMucm93cyAmJiB0aGlzLmRzLnJvd3MubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGEgPSB0aGlzLmRmcy5nZXREYXRhKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubWVyZ2VDZWxsICYmIHRoaXMubWVyZ2VGaWVsZHMgJiYgdGhpcy5tZXJnZUZpZWxkcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1lcmdlQ2VsbEluZm8gPSB0aGlzLmRncy5nZXRNZXJnZUNlbGxJbmZvMyh0aGlzLmRzLnJvd3MsIFsuLi50aGlzLm1lcmdlRmllbGRzXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRQYWdlclRvdGFsKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvYWRTdWNjZXNzLmVtaXQodGhpcy5kcy5yb3dzKTtcclxuXHJcblxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhID0gW107XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRDZWxsID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNsZWFyU2VsZWN0aW9uc1doZW5EYXRhSXNFbXB0eSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJBbGwoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5kcy5zY3JvbGxpbmcpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlRm9vdGVyRGF0YSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIOaAp+iDveS8mOWMllxyXG4gICAgICAgICAgICB0aGlzLmNkLmRldGVjdENoYW5nZXMoKTtcclxuXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAodGhpcy5EQVRBX0NIQU5HRURfVElNRVIpIHtcclxuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLkRBVEFfQ0hBTkdFRF9USU1FUik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuREFUQV9DSEFOR0VEX1RJTUVSID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hdXRvSGVpZ2h0ICYmIHRoaXMubWF4SGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubWF4SGVpZ2h0IDwgNTUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXhIZWlnaHQgPSA2MDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGdyaWRDb250YWluZXJFbCA9IHRoaXMuZWwubmF0aXZlRWxlbWVudC5wYXJlbnRFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChncmlkQ29udGFpbmVyRWwubm9kZU5hbWUgIT09ICdESVYnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud3JpdGVDb25zb2xlKCdEYXRhZ3JpZOeItuWuueWZqOW/hemhu+S4ukRJVuOAgicpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyaWRDb250YWluZXJFbC5zdHlsZS5oZWlnaHQgPSAndW5zZXQnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBncmlkQ29udGFpbmVyRWwuc3R5bGUubWF4SGVpZ2h0ID0gdGhpcy5tYXhIZWlnaHQgKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBncmlkQ29udGFpbmVyRWwuc3R5bGUubWluSGVpZ2h0ID0gYCR7dGhpcy5lbXB0eURhdGFIZWlnaHQgKyB0aGlzLnJlYWxIZWFkZXJIZWlnaHR9cHhgO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy51c2VCbGFua1doZW5EYXRhSXNFbXB0eSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRlR3JpZFNpemUodGhpcy5maXQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCAxMDApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5wdXNoKGRhdGFTdWJzY3JpcHRpb24pO1xyXG5cclxuICAgICAgICBjb25zdCBjb2x1bW5Hcm91cFN1YnNjcmlwdGlvbiA9IHRoaXMuZGZzLmNvbHVtbkdyb3VwJC5waXBlKFxyXG4gICAgICAgICAgICBkZWJvdW5jZVRpbWUoNjApXHJcbiAgICAgICAgKS5zdWJzY3JpYmUoY2cgPT4ge1xyXG4gICAgICAgICAgICBpZiAoY2cpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29sR3JvdXAgPSBjZztcclxuICAgICAgICAgICAgICAgIHRoaXMuZm9vdGVyV2lkdGggPSBjZy50b3RhbFdpZHRoO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuY2QuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLnB1c2goY29sdW1uR3JvdXBTdWJzY3JpcHRpb24pO1xyXG5cclxuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMucHVzaChcclxuICAgICAgICAgICAgdGhpcy5kZnMuZ3JpZFNpemUkLnN1YnNjcmliZSgoY2c6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNnICYmIGNnLmNvbHVtbnNHcm91cCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29sR3JvdXAgPSBjZy5jb2x1bW5zR3JvdXA7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgdGhpcy5pbml0RWRpdG9yQW5kVmFsaWRhdG9yKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRDZWxsU3Vic2NyaXB0aW9uID0gdGhpcy5kZnMuY3VycmVudENlbGwkLnN1YnNjcmliZSgoY2VsbDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudENlbGwgPSBjZWxsO1xyXG4gICAgICAgICAgICBpZiAoY2VsbCAmJiBjZWxsLmNlbGxSZWYpIHtcclxuICAgICAgICAgICAgICAgIGNlbGwuY2VsbFJlZi5pc0VkaXRpbmcgPSBjZWxsLmlzRWRpdGluZztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnVuYmluZE1vdmVTZWxlY3RSb3dFdmVudCgpO1xyXG4gICAgICAgICAgICB0aGlzLmJpbmREb2N1bWVudEVkaXRMaXN0ZW5lcigpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgdGhpcy5kZnMuc2VsZWN0Um93JC5zdWJzY3JpYmUoKHNyOiBTZWxlY3RlZFJvdykgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuY3VycmVudENlbGwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYmluZERvY3VtZW50TW92ZVNlbGVjdFJvd0V2ZW50KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvdyA9IHNyO1xyXG4gICAgICAgICAgICAvLyB0aGlzLmNkLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgLy8gdGhpcy5zZWxlY3RDaGFuZ2VkLmVtaXQoc3IpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMucHVzaChjdXJyZW50Q2VsbFN1YnNjcmlwdGlvbik7XHJcblxyXG4gICAgICAgIERhdGFncmlkQ29sdW1uc0hlbHBlci5ncmlkSW5zdGFuY2UgPSB0aGlzO1xyXG5cclxuICAgICAgICBjb25zdCBmaWx0ZXJDaGFuZ2VkU3Vic2NyaXB0aW9uID0gdGhpcy5kZ3Mub25GaWx0ZXJDaGFuZ2VkLnN1YnNjcmliZSgoY29uZGl0aW9uczogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIC8vIOabtOaWsOe8k+WtmOi/h+a7pOadoeS7tlxyXG4gICAgICAgICAgICB0aGlzLmNvbmRpdGlvbnMgPSBjb25kaXRpb25zO1xyXG4gICAgICAgICAgICB0aGlzLmNsaWVudEZpbHRlckNoYW5nZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLmZpbHRlckRhdGEodGhpcy5jb25kaXRpb25zKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMucHVzaChmaWx0ZXJDaGFuZ2VkU3Vic2NyaXB0aW9uKTtcclxuICAgICAgICAvLyB0aGlzLmluaXRQYWdpbmF0aW9uT3B0aW9ucygpO1xyXG5cclxuICAgICAgICBjb25zdCBmb290ZXJEYXRhU3Vic2NyaXB0aW9uID0gdGhpcy5kZ3MucmVmcmVzaEZvb3RlckRhdGEuc3Vic2NyaWJlKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVGb290ZXJEYXRhKCk7XHJcbiAgICAgICAgICAgIC8vIHRoaXMuY2QuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5wdXNoKGZvb3RlckRhdGFTdWJzY3JpcHRpb24pO1xyXG4gICAgICAgIHRoaXMuZGdzLmNvbW1vblV0aWxzID0gdGhpcy5jb21tb25VdGlscztcclxuXHJcblxyXG4gICAgICAgIHRoaXMuZGdzLmZvY3VzUm93Q2hhbmdlZC5zdWJzY3JpYmUoKGU6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5mb2N1c1Jvd0luZGV4ID0gZS5yb3dJbmRleDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBzZXRDdXJyZW50UGFnZXJEYXRhKCRkYXRhKSB7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50UGFnZXJEYXRhID0gJGRhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgd3JpdGVDb25zb2xlKG1zZywgdHlwZTogJ2luZm8nfCdsb2cnfCd3YXJuJ3wnZXJyb3InID0gJ3dhcm4nKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGVidWdTZXIpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZGVidWdTZXJbdHlwZV0pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGVidWdTZXJbdHlwZV0obXNnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGVbdHlwZV0obXNnKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdXBkYXRlRm9vdGVyRGF0YSgpIHtcclxuICAgICAgICBpZiAoKHRoaXMuc2hvd0Zvb3RlciB8fCB0aGlzLnBhZ2VyQ29udGVudFRlbXBsYXRlICkgJiYgdGhpcy5mb290ZXJEYXRhRnJvbSA9PT0gJ2NsaWVudCcgKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZm9vdGVyRGF0YSA9IG9mKHRoaXMuZGZzLmdldEZvb3RlckRhdGEodGhpcy5kYXRhKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vI3JlZ2lvbiBOZyBFdmVudFxyXG5cclxuICAgIG5nRG9DaGVjaygpIHtcclxuICAgICAgICAvLyBpZiAoIXRoaXMuY2hlY2tWYWx1ZXMpIHtcclxuICAgICAgICAvLyAgICAgdGhpcy5jaGVja1ZhbHVlcyA9IFtdO1xyXG4gICAgICAgIC8vIH1cclxuICAgIH1cclxuXHJcbiAgICBuZ09uSW5pdCgpIHtcclxuXHJcbiAgICAgICAgdGhpcy5zbXMgPSBuZXcgU2VsZWN0aW9uTW9kZVNlcnZpY2UodGhpcyk7XHJcblxyXG4gICAgICAgIHRoaXMuY2hlY2tGaWx0ZXJTdHlsZSgpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy51c2VUaGVtZXMpIHtcclxuICAgICAgICAgICAgdGhpcy5fY2hlY2tTaXplKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY2hlY2tPcHRpb25zKCk7XHJcbiAgICAgICAgdGhpcy5ncm91cFJvd1BhbmVsUGxhY2Vob2xkZXIgPSB0aGlzLmxvY2FsZVNlcnZpY2UuZ2V0VmFsdWUoJ2RhdGFncmlkLmdyb3VwUm93LnRpcHMnKTtcclxuICAgICAgICAvLyB0aGlzLl9mbGF0Q29sdW1ucygpO1xyXG4gICAgICAgIC8vIHRoaXMuc2V0SGVhZGVySGVpZ2h0KCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNtYXJ0RmlsdGVyU2VydmljZSkge1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlU21hcnRGaWx0ZXIgJiYgdGhpcy5zaG93RmlsdGVyQmFyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zbWFydEZpbHRlclJlc3VsdCAmJiB0aGlzLnNtYXJ0RmlsdGVyUmVzdWx0LmNvbnRyb2xEYXRhICYmIHRoaXMuc21hcnRGaWx0ZXJSZXN1bHQuY29udHJvbERhdGEubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJCYXJIZWlnaHQgPSB0aGlzLnNtYXJ0RmlsdGVyQmFySGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbHRlckJhckhlaWdodCA9IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuc21hcnRGaWx0ZXJTZXJ2aWNlLmZpbHRlckNoYW5nZWQuc3Vic2NyaWJlKChlOiBhbnkpID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc21hcnRGaWx0ZXJSZXN1bHQgJiYgIWUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKEpTT04uc3RyaW5naWZ5KHRoaXMuc21hcnRGaWx0ZXJSZXN1bHQpICE9PSBKU09OLnN0cmluZ2lmeShlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc21hcnRGaWx0ZXJSZXN1bHQgPSBlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xpZW50RmlsdGVyQ2hhbmdlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJEYXRhKGUuY29uZGl0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnNtYXJ0RmlsdGVyUmVzdWx0IHx8ICh0aGlzLnNtYXJ0RmlsdGVyUmVzdWx0LmNvbnRyb2xEYXRhICYmICF0aGlzLnNtYXJ0RmlsdGVyUmVzdWx0LmNvbnRyb2xEYXRhLmxlbmd0aCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkZpbHRlckJhclJlc2l6ZSgwKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZmlsdGVyQmFySGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRmlsdGVyQmFyUmVzaXplKHRoaXMuc21hcnRGaWx0ZXJCYXJIZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbmdBZnRlclZpZXdJbml0KCk6IHZvaWQge1xyXG5cclxuICAgICAgICAvLyDliJvlu7roh6rlrprkuYlzdHlsZSDlrrnlmahcclxuICAgICAgICAvLyBcclxuXHJcbiAgICAgICAgdGhpcy5zZXRIZWFkZXJIZWlnaHQoKTtcclxuICAgICAgICB0aGlzLnNldFBhZ2VySGVpZ2h0KCk7XHJcbiAgICAgICAgdGhpcy5pbml0QmVmb3JlRXZlbnRzKCk7XHJcbiAgICAgICAgaWYgKHRoaXMuZml0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0R3JpZE5ld1NpemVXaGVuRml0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmluaXRTdGF0ZSgpO1xyXG4gICAgICAgIGlmICh0aGlzLmVsICYmIHRoaXMuZmFycmlzSW5zdGFuY2VzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmFycmlzSW5zdGFuY2VzLmFkZCh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsIHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXRoaXMuZGF0YSB8fCAhdGhpcy5kYXRhLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLmZldGNoRGF0YSgxLCB0aGlzLnBhZ2VTaXplKS5zdWJzY3JpYmUocmVzID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghcmVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy50b3RhbCA9IHJlcy50b3RhbDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocmVzLmZvb3Rlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZm9vdGVyRGF0YSA9IHJlcy5mb290ZXI7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkRGF0YShyZXMuaXRlbXMpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuem9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyMi5hZGRDbGFzcyh0aGlzLmRnQ29udGFpbmVyLm5hdGl2ZUVsZW1lbnQsIHRoaXMuX2N1c3RvbV9kYXRhZ3JpZF9jbHMpO1xyXG4gICAgICAgICAgICB0aGlzLnJvID0gbmV3IFJlc2l6ZU9ic2VydmVyKChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBlWzBdLnRhcmdldCBhcyBhbnk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0LnN0eWxlLmRpc3BsYXkgPT09ICdub25lJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBfdyA9IGVbMF0uY29udGVudFJlY3Qud2lkdGg7XHJcbiAgICAgICAgICAgICAgICBpZiAoIV93KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc3QgX2ggPSBlWzBdLmNvbnRlbnRSZWN0LmhlaWdodDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IF9mbG9vd1cgPSBNYXRoLmZsb29yKF93KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IF9mbG9vckggPSBNYXRoLmZsb29yKF9oKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IF9yb3VuZFcgPSBNYXRoLnJvdW5kKF93KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IF9yb3VuZEggPSBNYXRoLnJvdW5kKF9oKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IF9jZWlsVyA9IE1hdGguY2VpbChfdyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBfY2VpbEggPSBNYXRoLmNlaWwoX2gpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICgodGhpcy53aWR0aCA9PT0gX2Zsb293VyB8fCB0aGlzLndpZHRoID09PSBfcm91bmRXIHx8IHRoaXMud2lkdGggPT09IF9jZWlsVykgJiYgKHRoaXMuaGVpZ2h0ID09PSBfZmxvb3JIIHx8IHRoaXMuaGVpZ2h0ID09PSBfcm91bmRIIHx8IHRoaXMuaGVpZ2h0ID09PSBfY2VpbEgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZ3MucmVzdG9yZVNjcm9sbGJhclBvc2l0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlc2l6ZVRpbWVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucmVzaXplVGltZXIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNpemVUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRlR3JpZFNpemUodGhpcy5maXQpO1xyXG4gICAgICAgICAgICAgICAgfSwgMTAwKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnJvLm9ic2VydmUodGhpcy5lbC5uYXRpdmVFbGVtZW50LnBhcmVudEVsZW1lbnQpO1xyXG5cclxuXHJcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5kb2N1bWVudEJvZHlNb3VzZURvd24sIHRydWUpO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMuZG9jdW1lbnRCb2R5TW91c2VEb3duID0gKGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc0VkaXRpbmcoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0IGFzIGFueTtcclxuICAgICAgICAgICAgICAgIGlmICh0YXJnZXQuY2xvc2VzdCgndGQuZi1kYXRhZ3JpZC1jZWxsJykgfHxcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQuY2xvc2VzdCgnLmRhdGUtb3ZlcmxheS1jb250YWluZXInKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldC5jbG9zZXN0KCcudGltZS1waWNrZXItb3ZlcmxheScpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LmNsb3Nlc3QoJy5sYW5ndWFnZS10ZXh0Ym94LXBhbmVsJykgfHxcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQuY2xvc2VzdCgnLmZhcnJpcy1ub3RpZnknKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldC5jbG9zZXN0KCcuY29tYm9QYW5lbCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkRvY3VtZW50TW91c2VEb3duKGUpO1xyXG4gICAgICAgICAgICB9LCB0cnVlKTtcclxuXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNob3dGb290ZXIpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZm9vdGVyVGVtcGxhdGUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZvb3RlckRvbSA9IHRoaXMuZWwubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZi1kYXRhZ3JpZC1mb290ZXInKTtcclxuICAgICAgICAgICAgICAgIGlmIChmb290ZXJEb20pIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZvb3RlckhlaWdodCA9IHRoaXMuZWwubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZi1kYXRhZ3JpZC1mb290ZXInKS5vZmZzZXRIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmZpdCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5lbC5uYXRpdmVFbGVtZW50LnBhcmVudEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZWwubmF0aXZlRWxlbWVudC5wYXJlbnRFbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZUdyaWRTaXplKHRoaXMuZml0KTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAvLyDmo4Dmn6XmmK/lkKblkK/nlKjku793aW5kb3dz6LWE5rqQ566h55CG5Zmo5Lit55qE5aSa6YCJ5qih5byPXHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0aW9uTW9kZSAmJiB0aGlzLnNlbGVjdGlvbk1vZGUgPT09ICdkZWZhdWx0JyAmJiB0aGlzLm11bHRpU2VsZWN0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuc21zLmVuYWJsZVdpbmRvd3NTZWxlY3Rpb25Nb2RlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNldENlbGxTdHlsZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIG5nQWZ0ZXJDb250ZW50SW5pdCgpIHtcclxuICAgICAgICBpZiAodGhpcy5kZ0NvbHVtbnMgJiYgdGhpcy5kZ0NvbHVtbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29sdW1ucyA9IHRoaXMuZGdDb2x1bW5zLm1hcChkZ2MgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgLi4uZGdjIH07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XHJcbiAgICAgICAgaWYgKGNoYW5nZXMuZGF0YSAmJiAhY2hhbmdlcy5kYXRhLmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmRmcy5sb2FkRGF0YShjaGFuZ2VzLmRhdGEuY3VycmVudFZhbHVlKTtcclxuICAgICAgICAgICAgdGhpcy5kZ3MuZGF0YVNvdXJjZUNoYW5nZWQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjaGFuZ2VzLnNob3dBbGxDaGVja2JveCAhPT0gdW5kZWZpbmVkICYmICFjaGFuZ2VzLnNob3dBbGxDaGVja2JveC5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAgICAgaWYgKGNoYW5nZXMuc2hvd0FsbENoZWNrYm94LmN1cnJlbnRWYWx1ZSAhPSBjaGFuZ2VzLnNob3dBbGxDaGVja2JveC5wcmV2aW91c1ZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbnNDaGFuZ2VkKGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMuc2hvd0NoZWNrYm94ICE9PSB1bmRlZmluZWQgJiYgIWNoYW5nZXMuc2hvd0NoZWNrYm94LmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmRmcy5zaG93Q2hlY2tib3goY2hhbmdlcy5zaG93Q2hlY2tib3guY3VycmVudFZhbHVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjaGFuZ2VzLnNob3dMaW5lTnVtYmVyICE9PSB1bmRlZmluZWQgJiYgIWNoYW5nZXMuc2hvd0xpbmVOdW1iZXIuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGZzLnNob3dMaW5lTnVtYmVyKGNoYW5nZXMuc2hvd0xpbmVOdW1iZXIuY3VycmVudFZhbHVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjaGFuZ2VzLm11bHRpU2VsZWN0ICE9PSB1bmRlZmluZWQgJiYgIWNoYW5nZXMubXVsdGlTZWxlY3QuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGZzLnNldE11bHRpU2VsZWN0KGNoYW5nZXMubXVsdGlTZWxlY3QuY3VycmVudFZhbHVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjaGFuZ2VzLmNoZWNrT25TZWxlY3QgIT09IHVuZGVmaW5lZCAmJiAhY2hhbmdlcy5jaGVja09uU2VsZWN0LmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmRmcy5zZXRDaGVja09uU2VsZWN0KGNoYW5nZXMuY2hlY2tPblNlbGVjdC5jdXJyZW50VmFsdWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMuc2VsZWN0T25DaGVjayAhPT0gdW5kZWZpbmVkICYmICFjaGFuZ2VzLnNlbGVjdE9uQ2hlY2suaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGZzLnNldFNlbGVjdE9uQ2hlY2soY2hhbmdlcy5zZWxlY3RPbkNoZWNrLmN1cnJlbnRWYWx1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY2hhbmdlcy5vbmx5U2VsZWN0U2VsZiAhPT0gdW5kZWZpbmVkICYmICFjaGFuZ2VzLm9ubHlTZWxlY3RTZWxmLmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmRmcy51cGRhdGVQcm9wZXJ0eSgnb25seVNlbGVjdFNlbGYnLCBjaGFuZ2VzLm9ubHlTZWxlY3RTZWxmLmN1cnJlbnRWYWx1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY2hhbmdlcy5rZWVwU2VsZWN0ICE9PSB1bmRlZmluZWQgJiYgIWNoYW5nZXMua2VlcFNlbGVjdC5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5kZnMudXBkYXRlUHJvcGVydHkoJ2tlZXBTZWxlY3QnLCBjaGFuZ2VzLmtlZXBTZWxlY3QuY3VycmVudFZhbHVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjaGFuZ2VzLmhlYWRlcldyYXAgIT09IHVuZGVmaW5lZCAmJiAhY2hhbmdlcy5oZWFkZXJXcmFwLmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0SGVhZGVySGVpZ2h0KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNkLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGZzLmNvbHVtblJlc2l6ZUVuZCgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjaGFuZ2VzLm5vd3JhcCAhPT0gdW5kZWZpbmVkICYmICFjaGFuZ2VzLm5vd3JhcC5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5jaGVja05vd3JhcCgpO1xyXG4gICAgICAgICAgICB0aGlzLnNldFJvd0hlaWdodChmYWxzZSk7XHJcbiAgICAgICAgICAgIHRoaXMuZGdzLmNlbGxDb250ZW50V3JhcENoYW5nZWQuZW1pdCgpO1xyXG4gICAgICAgICAgICB0aGlzLmRmcy51cGRhdGVQcm9wZXJ0eSgnbm93cmFwJywgY2hhbmdlcy5ub3dyYXAuY3VycmVudFZhbHVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjaGFuZ2VzLm11bHRpU29ydCAhPT0gdW5kZWZpbmVkICYmICFjaGFuZ2VzLm11bHRpU29ydC5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5kZnMudXBkYXRlUHJvcGVydHkoJ211bHRpU29ydCcsIGNoYW5nZXMubXVsdGlTb3J0LmN1cnJlbnRWYWx1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY2hhbmdlcy5lZGl0YWJsZSAhPT0gdW5kZWZpbmVkICYmICFjaGFuZ2VzLmVkaXRhYmxlLmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmRmcy51cGRhdGVQcm9wZXJ0eSgnZWRpdGFibGUnLCBjaGFuZ2VzLmVkaXRhYmxlLmN1cnJlbnRWYWx1ZSk7XHJcbiAgICAgICAgICAgIGlmICghY2hhbmdlcy5lZGl0YWJsZS5jdXJyZW50VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZW5kQ2VsbEVkaXQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmlzU2luZ2xlQ2xpY2sgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgLy8gaWYgKHRoaXMuZWRpdGFibGUpIHtcclxuICAgICAgICAgICAgLy8gICAgIHRoaXMua2VlcFNlbGVjdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAvLyB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyAgICAgdGhpcy5rZWVwU2VsZWN0ID0gdGhpcy5kZnMuX3N0YXRlLmtlZXBTZWxlY3Q7XHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY2hhbmdlcy5zaG93SGVhZGVyICE9PSB1bmRlZmluZWQgJiYgIWNoYW5nZXMuc2hvd0hlYWRlci5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5kZnMudXBkYXRlUHJvcGVydHkoJ3Nob3dIZWFkZXInLCBjaGFuZ2VzLnNob3dIZWFkZXIuY3VycmVudFZhbHVlKTtcclxuICAgICAgICAgICAgdGhpcy5oZWFkZXJIZWlnaHRDaGFuZ2UoKTtcclxuICAgICAgICAgICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY2hhbmdlcy5zaG93RmlsdGVyQmFyICE9PSB1bmRlZmluZWQgJiYgIWNoYW5nZXMuc2hvd0ZpbHRlckJhci5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5kZnMudXBkYXRlUHJvcGVydHkoJ3Nob3dGaWx0ZXJCYXInLCBjaGFuZ2VzLnNob3dGaWx0ZXJCYXIuY3VycmVudFZhbHVlKTtcclxuICAgICAgICAgICAgdGhpcy5kZ3Muc2hvd0dyaWRIZWFkZXIuZW1pdCh0aGlzLnJlYWxIZWFkZXJIZWlnaHQpO1xyXG4gICAgICAgICAgICAvLyB0aGlzLmRncy5zbWFydEZpbHRlckJhckV4cGFuZC5lbWl0KCk7XHJcbiAgICAgICAgICAgIGxldCBmaCA9IDA7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmRpdGlvbnMgJiYgdGhpcy5jb25kaXRpb25zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgZmggPSAzMjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLm9uRmlsdGVyQmFyUmVzaXplKGZoKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBpZiAoY2hhbmdlcy5zaG93Rm9vdGVyICE9PSB1bmRlZmluZWQgJiYgIWNoYW5nZXMuc2hvd0Zvb3Rlci5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5kZnMudXBkYXRlUHJvcGVydHkoJ3Nob3dGb290ZXInLCBjaGFuZ2VzLnNob3dGb290ZXIuY3VycmVudFZhbHVlKTtcclxuICAgICAgICAgICAgLy8gdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRlR3JpZFNpemUodGhpcy5maXQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMucGFnZXJPblNlcnZlciAhPT0gdW5kZWZpbmVkICYmICFjaGFuZ2VzLnBhZ2VyT25TZXJ2ZXIuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGZzLnVwZGF0ZVByb3BlcnR5KCdwYWdlck9uU2VydmVyJywgY2hhbmdlcy5wYWdlck9uU2VydmVyLmN1cnJlbnRWYWx1ZSk7XHJcbiAgICAgICAgICAgIHRoaXMucGFnZXJPcHRzID0gT2JqZWN0LmFzc2lnbih0aGlzLnBhZ2VyT3B0cywge1xyXG4gICAgICAgICAgICAgICAgcmVtb3RlOiB0aGlzLnBhZ2VyT25TZXJ2ZXJcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY2hhbmdlcy5wYWdlSW5kZXggIT09IHVuZGVmaW5lZCAmJiAhY2hhbmdlcy5wYWdlSW5kZXguaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGZzLnVwZGF0ZVByb3BlcnR5KCdwYWdlSW5kZXgnLCBjaGFuZ2VzLnBhZ2VJbmRleC5jdXJyZW50VmFsdWUpO1xyXG4gICAgICAgICAgICB0aGlzLnBhZ2VyT3B0cyA9IE9iamVjdC5hc3NpZ24odGhpcy5wYWdlck9wdHMsIHtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRQYWdlOiB0aGlzLnBhZ2VJbmRleFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjaGFuZ2VzLnBhZ2VTaXplICE9PSB1bmRlZmluZWQgJiYgIWNoYW5nZXMucGFnZVNpemUuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGZzLnVwZGF0ZVByb3BlcnR5KCdwYWdlU2l6ZScsIGNoYW5nZXMucGFnZVNpemUuY3VycmVudFZhbHVlKTtcclxuICAgICAgICAgICAgdGhpcy5wYWdlck9wdHMgPSBPYmplY3QuYXNzaWduKHRoaXMucGFnZXJPcHRzLCB7XHJcbiAgICAgICAgICAgICAgICBpdGVtc1BlclBhZ2U6IHRoaXMucGFnZVNpemVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY2hhbmdlcy5wYWdlTGlzdCAhPT0gdW5kZWZpbmVkICYmICFjaGFuZ2VzLnBhZ2VMaXN0LmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmRmcy51cGRhdGVQcm9wZXJ0eSgncGFnZUxpc3QnLCBjaGFuZ2VzLnBhZ2VMaXN0LmN1cnJlbnRWYWx1ZSk7XHJcbiAgICAgICAgICAgIHRoaXMucGFnZXJPcHRzID0gT2JqZWN0LmFzc2lnbih0aGlzLnBhZ2VyT3B0cywge1xyXG4gICAgICAgICAgICAgICAgcGFnZUxpc3Q6IHRoaXMucGFnZUxpc3RcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY2hhbmdlcy5jb2x1bW5zICE9PSB1bmRlZmluZWQgJiYgIWNoYW5nZXMuY29sdW1ucy5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5jb2x1bW5zQ2hhbmdlZCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMuc2l6ZVR5cGUgIT09IHVuZGVmaW5lZCAmJiAhY2hhbmdlcy5zaXplVHlwZS5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5fc2l6ZVR5cGUgPSBjaGFuZ2VzLnNpemVUeXBlLmN1cnJlbnRWYWx1ZTtcclxuICAgICAgICAgICAgdGhpcy5zZXRSb3dIZWlnaHQodHJ1ZSk7XHJcbiAgICAgICAgICAgIHRoaXMuZGZzLnVwZGF0ZVByb3BlcnR5KCdyb3dIZWlnaHQnLCB0aGlzLnJvd0hlaWdodCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0Rm9vdGVySGVpZ2h0KCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xyXG4gICAgICAgICAgICB0aGlzLmRncy5vblJvd0hlaWdodENoYW5nZSh0aGlzLnJvd0hlaWdodCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY2hhbmdlcy5yb3dIZWlnaHQgJiYgIWNoYW5nZXMucm93SGVpZ2h0LmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFJvd0hlaWdodChmYWxzZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY2hhbmdlcy5zZWxlY3RWYWx1ZSAmJiAhY2hhbmdlcy5zZWxlY3RWYWx1ZS5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RSb3codGhpcy5zZWxlY3RWYWx1ZSwgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMuY2hlY2tWYWx1ZXMgJiYgIWNoYW5nZXMuY2hlY2tWYWx1ZXMuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNoZWNrSWRzID0gdGhpcy5kZnMuZGlmZmVyZW5jZUJ5KGNoYW5nZXMuY2hlY2tWYWx1ZXMuY3VycmVudFZhbHVlIHx8IFtdLCBjaGFuZ2VzLmNoZWNrVmFsdWVzLnByZXZpb3VzVmFsdWUgfHwgW10sICh2KSA9PiB2KTtcclxuICAgICAgICAgICAgaWYgKGNoZWNrSWRzICYmIGNoZWNrSWRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja1Jvd3MoY2hlY2tJZHMsIGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgdW5jaGVja0lkcyA9IHRoaXMuZGZzLmRpZmZlcmVuY2VCeShjaGFuZ2VzLmNoZWNrVmFsdWVzLnByZXZpb3VzVmFsdWUgfHwgW10sIGNoYW5nZXMuY2hlY2tWYWx1ZXMuY3VycmVudFZhbHVlIHx8IFtdLCAodikgPT4gdik7XHJcbiAgICAgICAgICAgIGlmICh1bmNoZWNrSWRzICYmIHVuY2hlY2tJZHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVuQ2hlY2tSb3dzKHVuY2hlY2tJZHMsIGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy56b25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tWYWx1ZXMgPSB0aGlzLmNoZWNrZWRzLm1hcChyID0+IHIuaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tWYWx1ZXNDaGFuZ2UuZW1pdCh0aGlzLmNoZWNrVmFsdWVzKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWRDaGFuZ2UuZW1pdCh0aGlzLmNoZWNrZWRzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVBbGxDaGVja2JveFN0YXR1cygpO1xyXG4gICAgICAgICAgICAgICAgfSwgMTApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjaGFuZ2VzLnNob3dHcm91cENvbHVtbiAmJiAhY2hhbmdlcy5zaG93R3JvdXBDb2x1bW4uaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlVmlzaWJsZUNvbHVtbih0aGlzLmdyb3VwRmllbGQuc3BsaXQoJywnKSwgY2hhbmdlcy5zaG93R3JvdXBDb2x1bW4uY3VycmVudFZhbHVlKTtcclxuICAgICAgICAgICAgdGhpcy5jb2x1bW5zQ2hhbmdlZCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMuYXV0b0ZpdENvbHVtbnMgJiYgIWNoYW5nZXMuYXV0b0ZpdENvbHVtbnMuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGZzLnVwZGF0ZVByb3BlcnR5KCdhdXRvRml0Q29sdW1ucycsIGNoYW5nZXMuYXV0b0ZpdENvbHVtbnMuY3VycmVudFZhbHVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGlmIChjaGFuZ2VzLmZpdENvbHVtbnMgJiYgIWNoYW5nZXMuZml0Q29sdW1ucy5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAvLyAgICAgdGhpcy5maXRDb2x1bW5zID0gY2hhbmdlcy5maXRDb2x1bW5zLmN1cnJlbnRWYWx1ZTtcclxuICAgICAgICAvLyB9XHJcblxyXG4gICAgICAgIGlmIChjaGFuZ2VzLmdyb3VwUm93cyAmJiAhY2hhbmdlcy5ncm91cFJvd3MuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGZzLnVwZGF0ZVByb3BlcnR5KCdncm91cFJvd3MnLCBjaGFuZ2VzLmdyb3VwUm93cy5jdXJyZW50VmFsdWUpO1xyXG4gICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjaGFuZ2VzLm1lcmdlQ2VsbCAmJiAhY2hhbmdlcy5tZXJnZUNlbGwuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMubWVyZ2VGaWVsZHMgJiYgIWNoYW5nZXMubWVyZ2VGaWVsZHMuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMuZW5hYmxlRmlsdGVyUm93ICYmICFjaGFuZ2VzLmVuYWJsZUZpbHRlclJvdy5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5kZnMudXBkYXRlUHJvcGVydHkoJ2VuYWJsZUZpbHRlclJvdycsIGNoYW5nZXMuZW5hYmxlRmlsdGVyUm93LmN1cnJlbnRWYWx1ZSk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNob3dIZWFkZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0SGVhZGVySGVpZ2h0KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlckJhckhlaWdodCA9IDMyO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZ3MudG9nZ2xlRmlsdGVyUm93LmVtaXQodGhpcy5lbmFibGVGaWx0ZXJSb3cpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZ3Muc2hvd0dyaWRIZWFkZXIuZW1pdCh0aGlzLnJlYWxIZWFkZXJIZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjaGFuZ2VzLmVuYWJsZVNtYXJ0RmlsdGVyICYmICFjaGFuZ2VzLmVuYWJsZVNtYXJ0RmlsdGVyLmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmRmcy51cGRhdGVQcm9wZXJ0eSgnZW5hYmxlU21hcnRGaWx0ZXInLCBjaGFuZ2VzLmVuYWJsZVNtYXJ0RmlsdGVyLmN1cnJlbnRWYWx1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY2hhbmdlcy5lbmFibGVEcmFnQ29sdW1uICYmICFjaGFuZ2VzLmVuYWJsZURyYWdDb2x1bW4uaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tEcmFnQ29sdW1ucygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMuc2hvd1Jvd0dyb3VwUGFuZWwgJiYgIWNoYW5nZXMuc2hvd1Jvd0dyb3VwUGFuZWwuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGdzLnNtYXJ0RmlsdGVyQmFyRXhwYW5kLmVtaXQoKTtcclxuICAgICAgICAgICAgdGhpcy5kZ3Muc2hvd0dyaWRIZWFkZXIuZW1pdCh0aGlzLnJlYWxIZWFkZXJIZWlnaHQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMuc2VsZWN0aW9uTW9kZSAmJiAhY2hhbmdlcy5zZWxlY3Rpb25Nb2RlLmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNtcy50b2dnbGVNb2RlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY2hlY2tGaWx0ZXJTdHlsZSgpIHtcclxuICAgICAgICAvLyDov4fmu6TooYzkuI7mmbrog73ov4fmu6Qg5ZCM5pe25ZCv55So5pe277yM5bCG6L+H5ruk6KGM56aB55SoXHJcbiAgICAgICAgaWYgKHRoaXMuZW5hYmxlRmlsdGVyUm93ICYmIHRoaXMuZW5hYmxlU21hcnRGaWx0ZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5lbmFibGVGaWx0ZXJSb3cgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfY2hlY2tTaXplKCkge1xyXG4gICAgICAgIGNvbnN0IHRoZW1lc0tleSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdnc3BfcnRmX3RoZW1TS2V5Jyk7XHJcbiAgICAgICAgbGV0IHN0OiBhbnkgPSAnc20nO1xyXG4gICAgICAgIHN3aXRjaCAodGhlbWVzS2V5KSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ2RlZmF1bHQnOlxyXG4gICAgICAgICAgICAgICAgc3QgPSAnc20nO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2xvb3NlJzpcclxuICAgICAgICAgICAgICAgIHN0ID0gJ21kJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zaXplVHlwZSA9IHN0O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY2hlY2tEcmFnQ29sdW1ucygpIHtcclxuICAgICAgICBpZiAodGhpcy5pc011bHRpSGVhZGVyKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5lbmFibGVEcmFnQ29sdW1uID0gZmFsc2U7XHJcbiAgICAgICAgICAgIC8vIHRoaXMuY2QuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNoZWNrT3B0aW9ucygpIHtcclxuXHJcbiAgICAgICAgdGhpcy5ncmlkU2l6ZSA9IHsgd2lkdGg6IHRoaXMud2lkdGggKyAncHgnLCBoZWlnaHQ6IHRoaXMuaGVpZ2h0ICsgJ3B4JyB9O1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMuaWQpIHtcclxuICAgICAgICAgICAgdGhpcy5pZCA9ICdGYXJyaXNEYXRhR3JpZCcgKyBVdGlscy51dWlkKCkucmVwbGFjZSgvLS9nLCAnJykuc3Vic3RyKDAsIDEwKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMudXNlQ29udHJvbFBhbmVsKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVzZUNvbnRyb2xQYW5lbCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy53cml0ZUNvbnNvbGUoJ+WQr+eUqOWIl+mFjee9ruWxnuaAp++8jOacquiuvue9rklE77yM5q2k5Yqf6IO95bCG56aB55So44CCJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5fY3VzdG9tX2RhdGFncmlkX2NscyA9IHRoaXMuaWQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zdHlsZVNoZWV0SWQgPSB0aGlzLmlkICsgJ18nICsgVXRpbHMudXVpZCgpLnJlcGxhY2UoLy0vZywgJycpLnN1YnN0cigwLCAxMCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2N1c3RvbV9kYXRhZ3JpZF9jbHMgPSB0aGlzLnN0eWxlU2hlZXRJZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ1NlcnZpY2UgJiYgdGhpcy51c2VDb250cm9sUGFuZWwpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXR0aW5nU2VydmljZS5yZWdpc3RlckdyaWRJbnN0YW5jZSh0aGlzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZGdzLmNyZWF0ZVN0eWxlRWxlbWVudCh0aGlzLnN0eWxlU2hlZXRJZCk7XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5pZEZpZWxkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIERhdGFncmlkXFwncyBpZEZpZWxkIGNhblxcJ3QgYmUgTnVsbC4gJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY2hlY2tOb3dyYXAoKTtcclxuICAgICAgICB0aGlzLmNoZWNrU29ydEluZm8oKTtcclxuICAgICAgICB0aGlzLmNoZWNrTWVyZ2VDZWxsKCk7XHJcbiAgICAgICAgdGhpcy5zZXRDaGVja2JveEJlaGF2aW9yKCk7XHJcbiAgICAgICAgdGhpcy5pbml0UGFnaW5hdGlvbk9wdGlvbnMoKTtcclxuICAgICAgICBpZiAoIXRoaXMuY29sdW1ucykge1xyXG4gICAgICAgICAgICB0aGlzLmNvbHVtbnMgPSB0aGlzLmZpZWxkcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuY2hlY2tHcm91cEhlYWRlckNvbHVtbnMoKTtcclxuXHJcbiAgICAgICAgLy8gVEZTOiAzNTY5NTZcclxuICAgICAgICB0aGlzLmNoZWNrR3JvdXBSb3dTZXR0aW5nKCk7XHJcbiAgICAgICAgdGhpcy5jaGVja0NvbHVtbnNUeXBlKCk7XHJcblxyXG4gICAgICAgIHRoaXMuY2hlY2tEcmFnQ29sdW1ucygpO1xyXG5cclxuICAgICAgICBjb25zdCBfZGVmYXVsdFNldHRpbmcgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2ZsYXRDb2x1bW5zKCk7XHJcbiAgICAgICAgICAgIC8vIHRoaXMuc2V0SGVhZGVySGVpZ2h0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0Um93SGVpZ2h0KCk7XHJcbiAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICAgIHRoaXMuZGZzLnNldGluaXRpYWxPcHRpb25zKHtcclxuICAgICAgICAgICAgY29sdW1uczogdGhpcy5jb2x1bW5zLFxyXG4gICAgICAgICAgICBncm91cEZpZWxkOiB0aGlzLmdyb3VwRmllbGQsXHJcbiAgICAgICAgICAgIHNvcnROYW1lOiB0aGlzLnNvcnROYW1lLFxyXG4gICAgICAgICAgICBzb3J0T3JkZXI6IHRoaXMuc29ydE9yZGVyXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIOWKoOi9veeUqOaIt+S4quaAp+WMluiuvue9riAtLeOAiyDliJfmmL7npLrkuI7liJfmjpLluo9cclxuICAgICAgICBpZiAodGhpcy5zZXR0aW5nU2VydmljZSAmJiB0aGlzLnVzZUNvbnRyb2xQYW5lbCkge1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgc2V0dGluZ3MkID0gdGhpcy5zZXR0aW5nU2VydmljZS5nZXRTZXR0aW5ncyh0aGlzLmlkKTtcclxuICAgICAgICAgICAgaWYgKCFzZXR0aW5ncyQpIHtcclxuICAgICAgICAgICAgICAgIF9kZWZhdWx0U2V0dGluZygpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldHRpbmdzJC5zdWJzY3JpYmUoKHNldHMpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChzZXRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51c2VyUHJvZmlsZVNldHRpbmcoc2V0cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRSb3dIZWlnaHQoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRhdGEgJiYgdGhpcy5kYXRhLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGZzLnVwZGF0ZVByb3BlcnR5KCdkYXRhJywgdGhpcy5kYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbnNDaGFuZ2VkKHRoaXMuZ3JvdXBSb3dzICYmICh0aGlzLmRhdGEgJiYgISF0aGlzLmRhdGEubGVuZ3RoKSk7XHJcbiAgICAgICAgICAgIH0sIChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgIF9kZWZhdWx0U2V0dGluZygpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy53cml0ZUNvbnNvbGUoZXJyLCAnZXJyb3InKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgX2RlZmF1bHRTZXR0aW5nKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICByZWZyZXNoU2VsZWN0ZWREYXRhKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkUm93ICYmIHRoaXMuc2VsZWN0ZWRSb3cuaWQpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZGF0YSAmJiB0aGlzLmRhdGEubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZCA9IHRoaXMuZGF0YS5maW5kKGQgPT4gZFt0aGlzLmlkRmllbGRdID09PSB0aGlzLnNlbGVjdGVkUm93LmlkKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3cuZGF0YSA9IHJkO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvdyA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkRlc3Ryb3koKSB7XHJcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZXMoKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMucm8pIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZWwubmF0aXZlRWxlbWVudC5wYXJlbnRFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJvLnVub2JzZXJ2ZSh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQucGFyZW50RWxlbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5yby5kaXNjb25uZWN0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5kb2N1bWVudFJvd0tleWRvd25IYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZG9jdW1lbnRSb3dLZXlkb3duSGFuZGxlcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jdXJyZW50Q2VsbCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5jbGllbnRGaWx0ZXJTZXJ2aWNlID0gbnVsbDtcclxuXHJcbiAgICAgICAgdGhpcy5jbGVhbkRvbSgpO1xyXG5cclxuICAgICAgICAvLyDnp7vpmaTliqjmgIHnmoRzdHlsZVxyXG4gICAgICAgIHRoaXMuZGdzLnJlbW92ZVN0eWxlU2hlZXQoKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ1NlcnZpY2UgJiYgdGhpcy5zZXR0aW5nU2VydmljZS5kZXN0cm95KSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ1NlcnZpY2UuZGVzdHJveSh0aGlzLmlkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNtcykge1xyXG4gICAgICAgICAgICB0aGlzLnNtcy5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIHRoaXMuc21zID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5kb2N1bWVudEJvZHlNb3VzZURvd24sIHRydWUpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5mYXJyaXNJbnN0YW5jZXMpIHtcclxuICAgICAgICAgICAgdGhpcy5mYXJyaXNJbnN0YW5jZXMuZGVzdHJveSh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9zZWxlY3RlZFJvdyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5lZGl0b3JzID0ge307XHJcbiAgICAgICAgRGF0YWdyaWRDb2x1bW5zSGVscGVyLmdyaWRJbnN0YW5jZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy51bmJpbmRNb3ZlU2VsZWN0Um93RXZlbnQoKTtcclxuICAgICAgICB0aGlzLnVuYmluZERvY3VtZW50RWRpdExpc3RlbmVyKCk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIEBIb3N0TGlzdGVuZXIoJ2NsaWNrJywgWyckZXZlbnQnXSlcclxuICAgIG9uQ2xpY2soZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5zaG93U2VsZWN0ZWRMaXN0ICYmIHRoaXMuZGdQYWdlcikge1xyXG4gICAgICAgICAgICB0aGlzLmRnUGFnZXIuY2xvc2VTZWxlY3RlZExpc3QoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnBlbmRpbmcpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IGFzIGFueTtcclxuICAgICAgICBpZiAodGFyZ2V0Lm5vZGVOYW1lID09PSAnVEVYVEFSRUEnIHx8IHRhcmdldC5ub2RlTmFtZSA9PT0gJ0lOUFVUJykge1xyXG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50Q2VsbCAmJiB0aGlzLmN1cnJlbnRDZWxsLmVkaXRvciAmJiB0aGlzLmN1cnJlbnRDZWxsLmVkaXRvci5fZWRpdG9yQ2xpY2tFdmVudCkge1xyXG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLypcclxuICAgICAgICB0aGlzLmVuZENlbGxFZGl0KGV2ZW50KTtcclxuICAgICAgICB0aGlzLmRmcy5jYW5jZWxTZWxlY3RDZWxsKCk7XHJcbiAgICAgICAgKi9cclxuICAgICAgICBpZiAodGhpcy5zdG9wUHJvcGFnYXRpb24pIHtcclxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpbml0UGFnaW5hdGlvbk9wdGlvbnMoKSB7XHJcbiAgICAgICAgdGhpcy5wYWdlck9wdHMgPSB7XHJcbiAgICAgICAgICAgIGlkOiB0aGlzLmlkID8gdGhpcy5pZCArICctcGFnZXJfJyArIFV0aWxzLnV1aWQoKSA6ICdmYXJyaXMtZGF0YWdyaWQtcGFnZXJfJyArIFV0aWxzLnV1aWQoKSxcclxuICAgICAgICAgICAgaXRlbXNQZXJQYWdlOiB0aGlzLnBhZ2luYXRpb24gPyB0aGlzLnBhZ2VTaXplIDogdGhpcy50b3RhbCxcclxuICAgICAgICAgICAgY3VycmVudFBhZ2U6IHRoaXMucGFnZUluZGV4LFxyXG4gICAgICAgICAgICB0b3RhbEl0ZW1zOiB0aGlzLnRvdGFsLFxyXG4gICAgICAgICAgICBwYWdlTGlzdDogdGhpcy5wYWdlTGlzdCxcclxuICAgICAgICAgICAgcmVtb3RlOiB0aGlzLnBhZ2VyT25TZXJ2ZXJcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdXBkYXRlUGFnZXJPcHRpb25zKCkge1xyXG4gICAgICAgIHRoaXMucGFnZXJPcHRzID0gT2JqZWN0LmFzc2lnbih0aGlzLnBhZ2VyT3B0cywge1xyXG4gICAgICAgICAgICBpdGVtc1BlclBhZ2U6IHRoaXMucGFnZVNpemUsXHJcbiAgICAgICAgICAgIGN1cnJlbnRQYWdlOiB0aGlzLnBhZ2VJbmRleCxcclxuICAgICAgICAgICAgdG90YWxJdGVtczogdGhpcy50b3RhbFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0UGFnZXJUb3RhbCgpIHtcclxuICAgICAgICBjb25zdCBfdG90YWwgPSB0aGlzLmRhdGEubGVuZ3RoO1xyXG4gICAgICAgIGlmICh0aGlzLnBhZ2luYXRpb24gJiYgdGhpcy50b3RhbCA9PT0gMCAmJiB0aGlzLnZpcnR1YWxpemVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGFnZXJPcHRzLnRvdGFsSXRlbXMgPSBfdG90YWw7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLnBhZ2luYXRpb24pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGFnZXJPcHRzLml0ZW1zUGVyUGFnZSA9IF90b3RhbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNldEZvb3RlckhlaWdodChyb3dzPzogW10pIHtcclxuICAgICAgICBpZiAodGhpcy5zaG93Rm9vdGVyICYmICF0aGlzLmZvb3RlclRlbXBsYXRlKSB7XHJcbiAgICAgICAgICAgIHJvd3MgPSByb3dzIHx8IHRoaXMuX2Zvb3RlckRhdGFbJ3ZhbHVlJ107XHJcblxyXG4gICAgICAgICAgICBpZiAoIXJvd3MgfHwgIXJvd3MubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLm5vd3JhcCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5mb290ZXJIZWlnaHQgPSByb3dzLmxlbmd0aCAqIHRoaXMuZm9vdGVySGVpZ2h0O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXNbJ19mb290ZXJfaGVpZ2h0X3RpbWVyXyddKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXNbJ19mb290ZXJfaGVpZ2h0X3RpbWVyXyddKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzWydfZm9vdGVyX2hlaWdodF90aW1lcl8nXSA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRvcEZvb3RlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mLWRhdGFncmlkLWZvb3Rlci10b3AnKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBib3R0b21Gb290ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZi1kYXRhZ3JpZC1mb290ZXItYm90dG9tJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0b3BGb290ZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIyLnNldFN0eWxlKHRvcEZvb3RlciwgJ2hlaWdodCcsICcyOXB4Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZm9vdGVySGVpZ2h0ID0gTWF0aC5tYXgoLi4uQXJyYXkuZnJvbSh0b3BGb290ZXIucXVlcnlTZWxlY3RvckFsbCgndGFibGUnKSkubWFwKG4gPT4gbi5vZmZzZXRIZWlnaHQpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIyLnNldFN0eWxlKHRvcEZvb3RlciwgJ2hlaWdodCcsIHRoaXMuZm9vdGVySGVpZ2h0ICsgJ3B4Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJvdHRvbUZvb3Rlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIyLnNldFN0eWxlKGJvdHRvbUZvb3RlciwgJ2hlaWdodCcsICcyOXB4Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZvb3RlckhlaWdodCA9IE1hdGgubWF4KC4uLkFycmF5LmZyb20oYm90dG9tRm9vdGVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RhYmxlJykpLm1hcChuID0+IG4ub2Zmc2V0SGVpZ2h0KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcjIuc2V0U3R5bGUoYm90dG9tRm9vdGVyLCAnaGVpZ2h0JywgdGhpcy5mb290ZXJIZWlnaHQgKyAncHgnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGZzLmNvbHVtblJlc2l6ZUVuZCgpO1xyXG4gICAgICAgICAgICAgICAgfSwgMTAwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjdXN0b21TdHlsZUtleSgpIHtcclxuICAgICAgICByZXR1cm4gYC4ke3RoaXMuX2N1c3RvbV9kYXRhZ3JpZF9jbHN9YDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNldFJvd0hlaWdodCh1c2VTaXplVHlwZSA9IGZhbHNlKSB7XHJcbiAgICAgICAgY29uc3QgX3Jvd0hlaWdodCA9IFNJWkVfVFlQRVt0aGlzLl9zaXplVHlwZV0ucm93O1xyXG4gICAgICAgIGNvbnN0IF9yaCA9IDI5O1xyXG4gICAgICAgIGlmICh1c2VTaXplVHlwZSkge1xyXG4gICAgICAgICAgICB0aGlzLnJvd0hlaWdodCA9IF9yb3dIZWlnaHQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5yb3dIZWlnaHQgPSBfcm93SGVpZ2h0ID4gdGhpcy5yb3dIZWlnaHQgPyBfcm93SGVpZ2h0IDogdGhpcy5yb3dIZWlnaHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmZpbHRlclJvd0hlaWdodCA9IFNJWkVfVFlQRVt0aGlzLl9zaXplVHlwZV0ucGFnZXI7XHJcblxyXG4gICAgICAgIGNvbnN0IGtleTEgPSBgJHt0aGlzLmN1c3RvbVN0eWxlS2V5KCl9LmYtZGF0YWdyaWQtYm9keS1yb3csICR7dGhpcy5jdXN0b21TdHlsZUtleSgpfSAuZi1kYXRhZ3JpZC1jZWxsYDtcclxuICAgICAgICBjb25zdCBrZXkyID0gYCR7dGhpcy5jdXN0b21TdHlsZUtleSgpfSAuZi1kYXRhZ3JpZC1jZWxsLWNvbnRlbnRgO1xyXG5cclxuICAgICAgICB0aGlzLmRncy5yZW1vdmVDc3NSdWxlKGtleTEpO1xyXG4gICAgICAgIHRoaXMuZGdzLnJlbW92ZUNzc1J1bGUoa2V5Mik7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnJvd0hlaWdodCAhPT0gX3JoICYmIHRoaXMubm93cmFwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJvd0hlaWdodENTUyA9IFtcclxuICAgICAgICAgICAgICAgIGAke2tleTF9IHsgaGVpZ2h0OiAke3RoaXMucm93SGVpZ2h0fXB4IH1gLFxyXG4gICAgICAgICAgICAgICAgYCR7a2V5Mn0geyBoZWlnaHQ6ICR7dGhpcy5yb3dIZWlnaHR9cHg7IGxpbmUtaGVpZ2h0OiAke3RoaXMucm93SGVpZ2h0fXB4IH1gXHJcbiAgICAgICAgICAgIF07XHJcblxyXG4gICAgICAgICAgICB0aGlzLmRncy5hcHBlbmRDc3NSdWxlcyhyb3dIZWlnaHRDU1MpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpbml0U2VsZWN0T3JDaGVja2VkKCkge1xyXG4gICAgICAgIGNvbnN0IF9kYXRhID0gdGhpcy5kZnMuZ2V0Q3VycmVudFBhZ2VEYXRhKCk7XHJcbiAgICAgICAgaWYgKCF0aGlzLmVuYWJsZU1vcmVQYWdlU2VsZWN0ICYmIHRoaXMubXVsdGlTZWxlY3QpIHtcclxuICAgICAgICAgICAgLy8gdGhpcy5jbGVhckFsbCgpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jaGVja2VkcyAmJiB0aGlzLmNoZWNrZWRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja2Vkcy5mb3JFYWNoKHIgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghX2RhdGEuZmluZChuID0+IG5bdGhpcy5pZEZpZWxkXSA9PSByLmlkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVuQ2hlY2tSb3coci5pZCwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhckNoZWNrZWRzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdFZhbHVlKSB7XHJcbiAgICAgICAgICAgIGlmIChfZGF0YS5maW5kKG4gPT4gblt0aGlzLmlkRmllbGRdID09IHRoaXMuc2VsZWN0VmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFJvdyh0aGlzLnNlbGVjdFZhbHVlLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hTZWxlY3RlZERhdGEoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMubXVsdGlTZWxlY3QpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tWYWx1ZXMgJiYgdGhpcy5jaGVja1ZhbHVlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNoa2lkcyA9IHRoaXMuY2hlY2tlZHMubWFwKHIgPT4gci5pZCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkaWZmSWRzID0gdGhpcy5kZnMuZGlmZmVyZW5jZShjaGtpZHMsIHRoaXMuY2hlY2tWYWx1ZXMpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChkaWZmSWRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tSb3dzKGRpZmZJZHMsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja1ZhbHVlcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja1ZhbHVlcyA9IFtdO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNoZWNrVmFsdWVzID0gdGhpcy5jaGVja2Vkcy5tYXAociA9PiByLmlkKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5faXNSZXNpemVkIHx8IHRoaXMudmlydHVhbGl6ZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tWYWx1ZXNDaGFuZ2UuZW1pdCh0aGlzLmNoZWNrVmFsdWVzKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tlZENoYW5nZS5lbWl0KHRoaXMuY2hlY2tlZHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQWxsQ2hlY2tib3hTdGF0dXMoX2RhdGEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZUFsbENoZWNrYm94U3RhdHVzKF9kYXRhPzogYW55KSB7XHJcbiAgICAgICAgaWYgKCFfZGF0YSkge1xyXG4gICAgICAgICAgICBfZGF0YSA9IHRoaXMuZGZzLmdldEN1cnJlbnRQYWdlRGF0YSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGNoZWNrQWxsU3RhdHVzID0gMDtcclxuICAgICAgICBpZiAodGhpcy5zaG93QWxsQ2hlY2tib3gpIHtcclxuICAgICAgICAgICAgY29uc3QgYWxsRGF0YUlEcyA9IF9kYXRhLm1hcChyID0+IHJbdGhpcy5pZEZpZWxkXSk7XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld0NoZWNrVmFsdWVzID0gYWxsRGF0YUlEcy5maWx0ZXIobiA9PiB0aGlzLmNoZWNrVmFsdWVzLmluY2x1ZGVzKG4pKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChuZXdDaGVja1ZhbHVlcyAmJiBuZXdDaGVja1ZhbHVlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlzU2FtZSA9ICF0aGlzLmRmcy5kaWZmZXJlbmNlKGFsbERhdGFJRHMsIHRoaXMuY2hlY2tWYWx1ZXMpLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5jaGVja1ZhbHVlcyB8fCAhdGhpcy5jaGVja1ZhbHVlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyDmsqHmnInpgInkuK3nmoTmlbDmja5cclxuICAgICAgICAgICAgICAgICAgICBjaGVja0FsbFN0YXR1cyA9IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpc1NhbWUpIHsgLy8gdGhpcy5jaGVja1ZhbHVlcy5sZW5ndGggPT09IHRoaXMuZGF0YS5sZW5ndGggfHxcclxuICAgICAgICAgICAgICAgICAgICAvLyDlhajpg6jpgInkuK1cclxuICAgICAgICAgICAgICAgICAgICBjaGVja0FsbFN0YXR1cyA9IDE7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCFpc1NhbWUpIHsgLy8gdGhpcy5jaGVja1ZhbHVlcy5sZW5ndGggIT09IHRoaXMuZGF0YS5sZW5ndGggJiZcclxuICAgICAgICAgICAgICAgICAgICAvLyDmnInpgInkuK3nmoTmlbDmja7vvIzkvYbkuI3mmK/lhajpg6jpgInkuK1cclxuICAgICAgICAgICAgICAgICAgICBjaGVja0FsbFN0YXR1cyA9IDI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZGdzLmNoYW5nZUNoZWNrQWxsU3RhdHVzLmVtaXQoY2hlY2tBbGxTdGF0dXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOW9k+WNlemAieW5tuaYvuekuuWkjemAieahhuaXtu+8jOm7mOiupOWwhiBjaGVja09uU2VsZWN0LCBzZWxlY3RPbkNoZWNrIOiuvue9ruS4uiB0cnVlO1xyXG4gICAgcHJpdmF0ZSBzZXRDaGVja2JveEJlaGF2aW9yKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5tdWx0aVNlbGVjdCAmJiB0aGlzLnNob3dDaGVja2JveCkge1xyXG4gICAgICAgICAgICAvLyBURlM6IDM4MDg5OVxyXG4gICAgICAgICAgICAvLyB0aGlzLmNoZWNrT25TZWxlY3QgPSB0cnVlO1xyXG4gICAgICAgICAgICAvLyB0aGlzLnNlbGVjdE9uQ2hlY2sgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9mbGF0Q29sdW1ucygpIHtcclxuICAgICAgICB0aGlzLmZsYXRDb2x1bW5zID0gZmxhdHRlbjxEYXRhQ29sdW1uPih0aGlzLmNvbHVtbnMpLmZpbHRlcigoY29sOiBEYXRhQ29sdW1uKSA9PiAhY29sLmNvbHNwYW4gJiYgdGhpcy5jb2x1bW5Jc1Zpc2libGUoY29sKSk7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNNdWx0aUhlYWRlcigpICYmIHRoaXMuZmFzdCkge1xyXG4gICAgICAgICAgICB0aGlzLmZsYXRDb2x1bW5zID0gdGhpcy5kZnMuZ2V0R3JvdXBDb2x1bW5zKHRoaXMuY29sdW1uc1swXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbHVtbklzVmlzaWJsZShjb2w6IERhdGFDb2x1bW4pIHtcclxuICAgICAgICByZXR1cm4gRGF0YWdyaWRDb2x1bW5zSGVscGVyLmNvbHVtbklzVmlzaWJsZShjb2wsIHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOa3u+WKoOWIl+iuvue9rlxyXG4gICAgcHJpdmF0ZSBhZGRDb250cm9sQ29sKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnVzZUNvbnRyb2xQYW5lbCkge1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sQ29sID0gdGhpcy5jb2x1bW5zWzBdLmZpbmQobiA9PiBuLmZpZWxkID09PSB0aGlzLkNvbnRyb2xQYW5lbEZlaWxkKTtcclxuICAgICAgICAgICAgaWYgKCFjb250cm9sQ29sKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjcCA9IHsgZmllbGQ6IHRoaXMuQ29udHJvbFBhbmVsRmVpbGQsIHdpZHRoOiAyNCwgcm93c3BhbjogdGhpcy5jb2x1bW5zLmxlbmd0aCwgZml4ZWQ6ICdyaWdodCcsIHZpc2libGU6IHRydWUgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyAyMDIxLTA1LTI0IOWQr+eUqOi/h+a7pOihjOWQjuWHuumUmVxyXG4gICAgICAgICAgICAgICAgLy8gaWYgKHRoaXMuZW5hYmxlRmlsdGVyUm93KSB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgY3Aucm93c3BhbiArPSAxO1xyXG4gICAgICAgICAgICAgICAgLy8gfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuY29sdW1uc1swXS5wdXNoKGNwKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xDb2wudmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjaGVja0dyb3VwSGVhZGVyQ29sdW1ucygpIHtcclxuICAgICAgICBpZiAodGhpcy5pc011bHRpSGVhZGVyKCkpIHtcclxuICAgICAgICAgICAgY29uc3QgYWxsQ29scyA9IGZsYXR0ZW48RGF0YUNvbHVtbj4odGhpcy5jb2x1bW5zKTtcclxuICAgICAgICAgICAgRGF0YWdyaWRDb2x1bW5zSGVscGVyLmNoZWNrR3JvdXBIZWFkZXJDb2x1bW5WaXNpYmxlKGFsbENvbHMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyDmo4Dmn6XliJfpm4blkIg6IFtdIC0+IFtbXV1cclxuXHJcbiAgICBwcml2YXRlIGNvcnJlY3RDb2x1bW5zKHZhbHVlcykge1xyXG4gICAgICAgIGlmICh2YWx1ZXMgJiYgdmFsdWVzLmxlbmd0aCAmJiAhQXJyYXkuaXNBcnJheSh2YWx1ZXNbMF0pKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbdmFsdWVzXTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWVzIHx8IFtdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNoZWNrQ29sdW1uc1R5cGUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY29sdW1ucyAmJiB0aGlzLmNvbHVtbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIC8vIGlmICghQXJyYXkuaXNBcnJheSh0aGlzLmNvbHVtbnNbMF0pKSB7XHJcbiAgICAgICAgICAgIC8vICAgICB0aGlzLmNvbHVtbnMgPSBbIHRoaXMuY29sdW1ucyBdO1xyXG4gICAgICAgICAgICAvLyB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmFkZENvbnRyb2xDb2woKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY29sdW1ucy5mb3JFYWNoKChjb2xzLCBjb2x1bW5zSW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbHMuZm9yRWFjaCgoY29sOiBEYXRhQ29sdW1uLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghY29sLmZpZWxkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbC5maWVsZCA9IGBmYXJyaXMtZGF0YWdyaWQtY29sdW1uXyR7Y29sdW1uc0luZGV4fV8ke2luZGV4fWA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbC52YWxpZ24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sLnZhbGlnbiA9ICdtaWRkbGUnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbC53aWR0aCA9PT0gdW5kZWZpbmVkIHx8IGNvbC53aWR0aCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2wud2lkdGggPSAxMDA7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjb2wud2lkdGggPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2wud2lkdGggPSBwYXJzZUludChjb2wud2lkdGgsIDEwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8g6K6w5b2V5Y6f5aeL5a695bqmXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjb2wub3JpZ2luYWxXaWR0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2wub3JpZ2luYWxXaWR0aCA9IGNvbC53aWR0aDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2wuZm9ybWF0dGVyICYmIHR5cGVvZiBjb2wuZm9ybWF0dGVyICE9PSAnZnVuY3Rpb24nICYmIE9iamVjdC5rZXlzKGNvbC5mb3JtYXR0ZXIpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2wuZm9ybWF0dGVyID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5zaG93R3JvdXBDb2x1bW4gJiYgdGhpcy5ncm91cFJvd3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b2dnbGVWaXNpYmxlQ29sdW1uKHRoaXMuZ3JvdXBGaWVsZC5zcGxpdCgnLCcpLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOi/h+a7pOihjOajgOafpVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2wuZmlsdGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY29sLmZpbHRlciA9PT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29sLmZpZWxkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sLmZpbHRlciA9IHRoaXMuY2xpZW50RmlsdGVyU2VydmljZS5jcmVhdGVDb2x1bW5GaWx0ZXJPcHRpb25zKGNvbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbC5maWx0ZXIgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY29sLmZpbHRlci5vcHRpb25zIHx8ICFPYmplY3Qua2V5cyhjb2wuZmlsdGVyLm9wdGlvbnMpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoY29sLmZpbHRlci50eXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgQ29sdW1uRmlsdGVyVHlwZS5lbnVtOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sLmZpbHRlci5vcHRpb25zID0gY29sLmZvcm1hdHRlclsnb3B0aW9ucyddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgQ29sdW1uRmlsdGVyVHlwZS5kYXRlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sLmZpbHRlci5vcHRpb25zID0geyBkYXRlRm9ybWF0OiAneXl5eS1NTS1kZCcsIHJldHVybkZvcm1hdDogJ3l5eXktTU0tZGQnIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBDb2x1bW5GaWx0ZXJUeXBlLmRhdGV0aW1lOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sLmZpbHRlci5vcHRpb25zID0geyBkYXRlRm9ybWF0OiAneXl5eS1NTS1kZCBISDptbTpzcycsIHJldHVybkZvcm1hdDogJ3l5eXktTU0tZGQgSEg6bW06c3MnIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyDlhbzlrrkgaGlkZGVuIDIwMjEtMDUtMzFcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29sWydoaWRkZW4nXSAhPT0gdW5kZWZpbmVkICYmIGNvbC52aXNpYmxlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjb2xbJ2hpZGRlbiddID09PSAnYm9vbGVhbicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbC52aXNpYmxlID0gIWNvbFsnaGlkZGVuJ107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNvbFsnaGlkZGVuJ10gPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2wudmlzaWJsZSA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgciA9IGNvbFsnaGlkZGVuJ10uYmluZCh0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY2hlY2tHcm91cFJvd1NldHRpbmcoKSB7XHJcbiAgICAgICAgLy8g5aaC5p6c5ZCv55So5YiG57uE6KGM77yM5L2G5pyq6K6+572u5YiG57uE5a2X5q615pe277yM5bCG5YWz6Zet5YiG57uE6KGM5Yqf6IO9XHJcbiAgICAgICAgLy8gaWYgKHRoaXMuZ3JvdXBSb3dzKSB7XHJcbiAgICAgICAgLy8gICAgIGlmICghdGhpcy5ncm91cEZpZWxkKSB7XHJcbiAgICAgICAgLy8gICAgICAgICB0aGlzLmdyb3VwUm93cyA9IGZhbHNlO1xyXG4gICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgLy8gfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY2hlY2tNZXJnZUNlbGwoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubWVyZ2VDZWxsKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5tZXJnZUZpZWxkcyB8fCAhdGhpcy5tZXJnZUZpZWxkcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubWVyZ2VDZWxsID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZpcnR1YWxpemVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZpcnR1YWxpemVkQXN5bmNMb2FkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjaGVja1NvcnRJbmZvKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnNvcnROYW1lKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5zb3J0T3JkZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc29ydE9yZGVyID0gdGhpcy5zb3J0TmFtZS5zcGxpdCgnLCcpLm1hcCgoKSA9PiAnYXNjJykuam9pbignLCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY2hlY2tOb3dyYXAoKSB7XHJcbiAgICAgICAgLy8g5ZCv55So5oqY6KGM5ZCO77yM6Jma5ouf5Yqg6L2954m55oCn5aSx5pWIXHJcbiAgICAgICAgaWYgKCF0aGlzLm5vd3JhcCkge1xyXG4gICAgICAgICAgICB0aGlzLnZpcnR1YWxpemVkID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldEhlYWRlckhlaWdodCgpIHtcclxuICAgICAgICB0aGlzLnJlYWxIZWFkZXJIZWlnaHQgPSAwO1xyXG4gICAgICAgIGlmICh0aGlzLnNob3dIZWFkZXIpIHtcclxuICAgICAgICAgICAgLy8gaWYgKCF0aGlzLmhlYWRlcldyYXApIHtcclxuICAgICAgICAgICAgLy8gICAgIHRoaXMucmVhbEhlYWRlckhlaWdodCA9IHRoaXMuY29sdW1ucy5sZW5ndGggKiB0aGlzLmhlYWRlckhlaWdodDtcclxuXHJcbiAgICAgICAgICAgIC8vICAgICBpZiAodGhpcy5lbmFibGVGaWx0ZXJSb3cpIHtcclxuICAgICAgICAgICAgLy8gICAgICAgICB0aGlzLnJlYWxIZWFkZXJIZWlnaHQgKz0gdGhpcy5maWx0ZXJSb3dIZWlnaHQ7XHJcbiAgICAgICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgICAgIC8vIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vICAgICBjb25zdCBncmlkSGVhZGVyRWwgPSB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcignLmYtZGF0YWdyaWQtaGVhZGVyJyk7XHJcbiAgICAgICAgICAgIC8vICAgICBpZiAoZ3JpZEhlYWRlckVsKSB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgY29uc3QgdHJzID0gZ3JpZEhlYWRlckVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RhYmxlIHRyOm5vdCguZi1kYXRhZ3JpZC1maWx0ZXItcm93KScpO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIHRycy5mb3JFYWNoKG4gPT4ge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICBuLnN0eWxlLmhlaWdodCA9ICdhdXRvJztcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgQXJyYXkuZnJvbShuLmNoaWxkcmVuKS5mb3JFYWNoKChhOiBhbnkpID0+IGEuc3R5bGUuaGVpZ2h0ID0gJ2F1dG8nKTtcclxuICAgICAgICAgICAgLy8gICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgLy8gY29uc3QgaCA9IE1hdGgubWF4KC4uLkFycmF5LmZyb20odHJzKS5tYXAoKG46IGFueSkgPT4gbi5jbGllbnRIZWlnaHQpKTtcclxuICAgICAgICAgICAgLy8gICAgICAgICAvLyB0aGlzLnJlYWxIZWFkZXJIZWlnaHQgPSBoO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIGNvbnN0IHRhYmxlRWwgPSBncmlkSGVhZGVyRWwucXVlcnlTZWxlY3RvcigndGFibGUnKTtcclxuICAgICAgICAgICAgLy8gICAgICAgICBpZih0YWJsZUVsKSB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIHRoaXMucmVhbEhlYWRlckhlaWdodCA9IHRhYmxlRWwub2Zmc2V0SGVpZ2h0O1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgICAgIC8vIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGdyaWRIZWFkZXJFbCA9IHRoaXMuZWwubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZi1kYXRhZ3JpZC1oZWFkZXInKTtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmhlYWRlcldyYXApIHtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IGhlYWRlcjogaGgsIHBhZ2VyOiBwaH0gPSBTSVpFX1RZUEVbdGhpcy5fc2l6ZVR5cGVdO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oZWFkZXJIZWlnaHQgPSBoaDtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVhbEhlYWRlckhlaWdodCA9IHRoaXMuY29sdW1ucy5sZW5ndGggKiB0aGlzLmhlYWRlckhlaWdodDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5lbmFibGVGaWx0ZXJSb3cpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyDop6PlhrPlrr3mnb7niYjkuItcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbHRlclJvd0hlaWdodCA9IHBoO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVhbEhlYWRlckhlaWdodCArPSB0aGlzLmZpbHRlclJvd0hlaWdodDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZ3JpZEhlYWRlckVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ3JpZEhlYWRlckVsLnN0eWxlLm1pbkhlaWdodCA9IHRoaXMucmVhbEhlYWRlckhlaWdodCArICdweCc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZ3JpZEhlYWRlckVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIyLnJlbW92ZVN0eWxlKGdyaWRIZWFkZXJFbCwgJ21pbkhlaWdodCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRycyA9IGdyaWRIZWFkZXJFbC5xdWVyeVNlbGVjdG9yQWxsKCd0YWJsZSB0cjpub3QoLmYtZGF0YWdyaWQtZmlsdGVyLXJvdyknKTtcclxuICAgICAgICAgICAgICAgICAgICB0cnMuZm9yRWFjaChuID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbi5zdHlsZS5oZWlnaHQgPSAnYXV0byc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEFycmF5LmZyb20obi5jaGlsZHJlbikuZm9yRWFjaCgoYTogYW55KSA9PiBhLnN0eWxlLmhlaWdodCA9ICdhdXRvJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhYmxlRWxzID0gQXJyYXkuZnJvbShncmlkSGVhZGVyRWwucXVlcnlTZWxlY3RvckFsbCgndGFibGUnKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYodGFibGVFbHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaGVpZ2h0cyA9IHRhYmxlRWxzLm1hcCgodDogYW55KSA9PiB0Lm9mZnNldEhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1heEhlaWdodCA9IE1hdGgubWF4KC4uLmhlaWdodHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlYWxIZWFkZXJIZWlnaHQgPSBtYXhIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyaWRIZWFkZXJFbC5zdHlsZS5taW5IZWlnaHQgPSB0aGlzLnJlYWxIZWFkZXJIZWlnaHQgKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5yZWFsSGVhZGVySGVpZ2h0O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOWIl+mbhuWQiOWPmOWMllxyXG4gICAgY29sdW1uc0NoYW5nZWQocmVsb2FkRGF0YSA9IHRydWUsIHVzZUNvbHVtblNldHRpbmdXaWR0aCA9IG51bGwpIHtcclxuICAgICAgICBjb25zdCBfdXNlQ29sdW1uU2V0dGluZ1dpZHRoID0gdXNlQ29sdW1uU2V0dGluZ1dpZHRoID09PSBudWxsID8gdGhpcy5maXRDb2x1bW5zIDogdXNlQ29sdW1uU2V0dGluZ1dpZHRoO1xyXG5cclxuICAgICAgICB0aGlzLmRmcy51cGRhdGVQcm9wZXJ0eSgnZXhwYW5kR3JvdXBSb3dzJywgdGhpcy5leHBhbmRHcm91cFJvd3MpO1xyXG5cclxuICAgICAgICB0aGlzLmNoZWNrQ29sdW1uc1R5cGUoKTtcclxuXHJcbiAgICAgICAgdGhpcy5fZmxhdENvbHVtbnMoKTtcclxuICAgICAgICB0aGlzLmhlYWRlckhlaWdodENoYW5nZSgpO1xyXG4gICAgICAgIHRoaXMuZGZzLnVwZGF0ZVByb3BlcnR5KCdmbGF0Q29sdW1ucycsIHRoaXMuZmxhdENvbHVtbnMpO1xyXG4gICAgICAgIHRoaXMuZGZzLnVwZGF0ZUNvbHVtbnModGhpcy5jb2x1bW5zLCBfdXNlQ29sdW1uU2V0dGluZ1dpZHRoLCB0cnVlKTtcclxuXHJcbiAgICAgICAgLy8gdGhpcy5jb2xHcm91cCA9IHRoaXMuZGZzLmdldFN0YXRlKCkuY29sdW1uc0dyb3VwO1xyXG4gICAgICAgIC8vIOWKqOaAgeWIl+WQiOiuoeihjFxyXG4gICAgICAgIHRoaXMudXBkYXRlRm9vdGVyRGF0YSgpO1xyXG5cclxuICAgICAgICB0aGlzLmRncy5jb2x1bW5zQ2hhbmdlZC5lbWl0KHsgc2Nyb2xsVG9MZWZ0OiByZWxvYWREYXRhIH0pO1xyXG5cclxuICAgICAgICBpZiAocmVsb2FkRGF0YSkge1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXNbJ19DT0xVTU5TX0NIQU5BR0VEX1RJTUVSXyddKSB7XHJcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpc1snX0NPTFVNTlNfQ0hBTkFHRURfVElNRVJfJ10pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzWydfQ09MVU1OU19DSEFOQUdFRF9USU1FUl8nXSA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XHJcbiAgICAgICAgICAgIH0sIDYwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc2V0Q2VsbFN0eWxlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5YiX5aS05Y+Y5YyWXHJcbiAgICBwcml2YXRlIGhlYWRlckhlaWdodENoYW5nZSgpIHtcclxuICAgICAgICB0aGlzLnNldEhlYWRlckhlaWdodCgpO1xyXG4gICAgICAgIHRoaXMuZGdzLnNob3dHcmlkSGVhZGVyLmVtaXQodGhpcy5yZWFsSGVhZGVySGVpZ2h0KTtcclxuICAgIH1cclxuXHJcbiAgICAvKiog5Yik5pat5piv5ZCm5Zyo5by55Ye655qE56qX5Y+j5Lit77yb6L+U5ZuedW5kZWZpbmQg6K+05piO5rKh5pyJ5Zyo5by55Ye655qE56qX5Y+j77yM5ZCm5YiZ6KeG5Li65b2T5YmN5YiX6KGo5Zyo5by55Ye656qX5Y+j5L2/55SoICovXHJcbiAgICBpbkRpYWxvZygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5lbC5uYXRpdmVFbGVtZW50LmNsb3Nlc3QoJy5tb2RhbC1ib2R5Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgLy8jcmVnaW9uIEluaXRcclxuICAgIC8qKiDliJ3lp4vnvJbovpHlmajkuI7pqozor4HlmaggKi9cclxuICAgIHByaXZhdGUgaW5pdEVkaXRvckFuZFZhbGlkYXRvcigpIHtcclxuICAgICAgICBjb25zdCBFZGl0b3JzID0gdGhpcy5pbmplY3QuZ2V0PGFueVtdPihHUklEX0VESVRPUlMsIFtdKTtcclxuXHJcbiAgICAgICAgaWYgKEVkaXRvcnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIEVkaXRvcnMuZm9yRWFjaChlZCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVkaXRvcnNbZWQubmFtZV0gPSBlZC52YWx1ZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IF92YWxpZGF0b3JzID0gdGhpcy5pbmplY3QuZ2V0PGFueVtdPihHUklEX1ZBTElEQVRPUlMsIFtdKTtcclxuICAgICAgICBpZiAoX3ZhbGlkYXRvcnMgJiYgX3ZhbGlkYXRvcnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIC8vIF92YWxpZGF0b3JzLmZvckVhY2godnIgPT4ge1xyXG4gICAgICAgICAgICAvLyAgICAgdGhpcy52YWxpZGF0b3JzW3ZyLm5hbWVdID0gdnIudmFsdWU7XHJcbiAgICAgICAgICAgIC8vIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnZhbGlkYXRvcnMgPSBfdmFsaWRhdG9ycztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0UGFnZXJIZWlnaHQoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnVzZUh0bWxUYWJsZSkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMucGFnaW5hdGlvbikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wYWdlckhlaWdodCA9IDA7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhZ2VySGVpZ2h0ID0gdGhpcy5kZ1BhZ2VyICYmIHRoaXMuZGdQYWdlci5vdXRlckhlaWdodCB8fCA0MDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGluaXRTdGF0ZSgpIHtcclxuICAgICAgICB0aGlzLmRhdGEgPSB0aGlzLmRhdGEgfHwgW107XHJcblxyXG4gICAgICAgIGxldCBzdGEgPSB7fTtcclxuICAgICAgICBPYmplY3Qua2V5cyh0aGlzKS5mb3JFYWNoKChrOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgaWYgKCFJZ25vcmVQcm9wZXJ0aWVzLmluY2x1ZGVzKGspKSB7XHJcbiAgICAgICAgICAgICAgICBzdGFba10gPSB0aGlzW2tdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuZGZzLmluaXRTdGF0ZSh7IC4uLnN0YSwgZml0Q29sdW1uczogdGhpcy5maXRDb2x1bW5zLCBmaXQ6IHRoaXMuZml0LCBncm91cEZpZWxkOiB0aGlzLl9ncm91cEZpZWxkIH0pO1xyXG4gICAgICAgIHN0YSA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXRGaXRDb2x1bW5zKGZpdENvbHVtbnMgPSB0cnVlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY29sdW1ucykge1xyXG4gICAgICAgICAgICB0aGlzLmRmcy5maXRDb2x1bW5zKGZpdENvbHVtbnMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNldEdyaWROZXdTaXplV2hlbkZpdCgpIHtcclxuICAgICAgICBjb25zdCBwYXJlbnQgPSB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQucGFyZW50RWxlbWVudDtcclxuICAgICAgICBpZiAocGFyZW50KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gcGFyZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcGFkZGluZyA9IHRoaXMuZ2V0RWxlbWVudFBhZGRpbmcocGFyZW50KTtcclxuICAgICAgICAgICAgY29uc3QgYm9yZGVyID0gdGhpcy5nZXRFbGVtZW50Qm9yZGVyV2lkdGgocGFyZW50KTtcclxuXHJcbiAgICAgICAgICAgIGxldCBtID0gJ2Zsb29yJ1xyXG4gICAgICAgICAgICBpZiAodGhpcy5tYXhIZWlnaHQgJiYgdGhpcy5hdXRvSGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICBtID0gJ2NlaWwnO1xyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgdGhpcy53aWR0aCA9IE1hdGhbbV0oTWF0aC5jZWlsKHdpZHRoKSAtIGJvcmRlci5sZWZ0IC0gYm9yZGVyLnJpZ2h0IC0gcGFkZGluZy5sZWZ0IC0gcGFkZGluZy5yaWdodCk7XHJcbiAgICAgICAgICAgIHRoaXMuaGVpZ2h0ID0gTWF0aFttXShNYXRoLmNlaWwoaGVpZ2h0KSAtIGJvcmRlci50b3AgLSBib3JkZXIuYm90dG9tIC0gcGFkZGluZy50b3AgLSBwYWRkaW5nLmJvdHRvbSk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5tYXhIZWlnaHQgJiYgdGhpcy5hdXRvSGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhlaWdodCArPSAxO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuaGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhlaWdodCA9IHRoaXMuZGZzLmdldFN0YXRlKCkuaGVpZ2h0IHx8IDMwMDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCF0aGlzLndpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLndpZHRoID0gdGhpcy5kZnMuZ2V0U3RhdGUoKS53aWR0aCB8fCA4MDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNhbGN1bGF0ZUdyaWRTaXplKGZpdCA9IHRydWUpIHtcclxuICAgICAgICBpZiAodGhpcy51c2VIdG1sVGFibGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgc2V0TmV3U2l6ZSA9ICgpID0+IHtcclxuICAgICAgICAgICAgbGV0IGggPSB0aGlzLmhlaWdodDtcclxuICAgICAgICAgICAgaWYgKHRoaXMudXNlQmxhbmtXaGVuRGF0YUlzRW1wdHkgJiYgKCF0aGlzLmRhdGEgfHwgIXRoaXMuZGF0YS5sZW5ndGgpKSB7XHJcbiAgICAgICAgICAgICAgICBoID0gdGhpcy5lbXB0eURhdGFIZWlnaHQgKyB0aGlzLnJlYWxIZWFkZXJIZWlnaHQ7XHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5ncmlkU2l6ZS5oZWlnaHQgPT09IGggKyAncHgnICYmIHRoaXMuZ3JpZFNpemUud2lkdGggPT09IHRoaXMud2lkdGggKyAncHgnKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuZ3JpZFNpemUgPSB7IHdpZHRoOiB0aGlzLndpZHRoICsgJ3B4JywgaGVpZ2h0OiBoICsgJ3B4JyB9O1xyXG4gICAgICAgICAgICB0aGlzLmRmcy5yZXNpemUoeyB3aWR0aDogdGhpcy53aWR0aCwgaGVpZ2h0OiBoIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGZpdCkge1xyXG4gICAgICAgICAgICB0aGlzLnNldEdyaWROZXdTaXplV2hlbkZpdCgpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy53aWR0aCAmJiB0aGlzLmhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5faXNSZXNpemVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHNldE5ld1NpemUoKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgdGhpcy5faXNSZXNpemVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY2RbJ2Rlc3Ryb3llZCddKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzZXROZXdTaXplKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGluaXRCZWZvcmVFdmVudHMoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmJlZm9yZVNlbGVjdCkge1xyXG4gICAgICAgICAgICB0aGlzLmJlZm9yZVNlbGVjdCA9ICgpID0+IG9mKHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXRoaXMuYmVmb3JlVW5zZWxlY3QpIHtcclxuICAgICAgICAgICAgdGhpcy5iZWZvcmVVbnNlbGVjdCA9ICgpID0+IG9mKHRydWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmJlZm9yZUNoZWNrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYmVmb3JlQ2hlY2sgPSAoKSA9PiBvZih0cnVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5iZWZvcmVVbmNoZWNrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYmVmb3JlVW5jaGVjayA9ICgpID0+IG9mKHRydWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmJlZm9yZVNvcnRDb2x1bW4pIHtcclxuICAgICAgICAgICAgdGhpcy5iZWZvcmVTb3J0Q29sdW1uID0gKCkgPT4gb2YodHJ1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMuYmVmb3JlRWRpdCkge1xyXG4gICAgICAgICAgICB0aGlzLmJlZm9yZUVkaXQgPSAoKSA9PiBvZih0cnVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5hZnRlckVkaXQpIHtcclxuICAgICAgICAgICAgdGhpcy5hZnRlckVkaXQgPSAoKSA9PiBvZih0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdHJhY2tCeVJvd3MgPSAoaW5kZXg6IG51bWJlciwgcm93OiBhbnkpID0+IHtcclxuICAgICAgICBpZiAocm93KSB7XHJcbiAgICAgICAgICAgIHJldHVybiByb3dbdGhpcy5pZEZpZWxkXSB8fCBpbmRleDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGluZGV4O1xyXG4gICAgfVxyXG5cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIC8vI3JlZ2lvbiDlv6vmjbfplK5cclxuXHJcbiAgICBwcml2YXRlIHVuYmluZE1vdmVTZWxlY3RSb3dFdmVudCgpIHtcclxuICAgICAgICBpZiAodGhpcy5kb2N1bWVudFJvd0tleWRvd25IYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZG9jdW1lbnRSb3dLZXlkb3duSGFuZGxlcigpO1xyXG4gICAgICAgICAgICB0aGlzLmRvY3VtZW50Um93S2V5ZG93bkhhbmRsZXIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJpdmF0ZSBiaW5kRG9jdW1lbnRNb3ZlU2VsZWN0Um93RXZlbnQoKSB7XHJcbiAgICAgICAgdGhpcy51bmJpbmRNb3ZlU2VsZWN0Um93RXZlbnQoKTtcclxuICAgICAgICB0aGlzLnVuYmluZERvY3VtZW50RWRpdExpc3RlbmVyKCk7XHJcbiAgICAgICAgdGhpcy5kb2N1bWVudFJvd0tleWRvd25IYW5kbGVyID0gdGhpcy5yZW5kZXIyLmxpc3Rlbihkb2N1bWVudCwgJ2tleWRvd24nLCAoZTogS2V5Ym9hcmRFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0FjdGl2ZWQoKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBoYXMgbG9hZGluZ1xyXG4gICAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnZmFycmlzLWxvYWRpbmcnKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGUudGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXROYW1lID0gKGUudGFyZ2V0IGFzIGFueSkubm9kZU5hbWU7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pZ25vcmVUYXJnZXQuaW5kZXhPZih0YXJnZXROYW1lKSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09PSA0MCB8fCBlLmtleUNvZGUgPT09IDM4KSB7XHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHN3aXRjaCAoZS5rZXlDb2RlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQwOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0TmV4dFJvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzODpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFByZXZSb3coKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYmluZEVkaXRMaXN0ZW5lckluTW9kYWwoKSB7XHJcbiAgICAgICAgLy8g5by556qX5Lit5LqL5Lu25aSE55CGXHJcbiAgICAgICAgaWYgKFV0aWxzLmhhc0RpYWxvZ09wZW4oKSkge1xyXG4gICAgICAgICAgICBjb25zdCBtb2RhbEVsZW1lbnQgPSB0aGlzLmluRGlhbG9nKCk7XHJcbiAgICAgICAgICAgIGlmIChtb2RhbEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IF9mbW9kYWwgPSBtb2RhbEVsZW1lbnQuY2xvc2VzdCgnLmZhcnJpcy1tb2RhbCcpO1xyXG4gICAgICAgICAgICAgICAgaWYgKF9mbW9kYWwpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1vZGFsQ2xpY2tFdmVudCA9IHRoaXMucmVuZGVyMi5saXN0ZW4oX2Ztb2RhbCwgJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZEVkaXRpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50Q2VsbCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25Eb2N1bWVudE1vdXNlRG93biA9IChldmVudCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGRncmlkID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJy5mLWRhdGFncmlkJyk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnBlbmRpbmcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFkZ3JpZCkge1xyXG4gICAgICAgICAgICB0aGlzLmFjdGl2ZURhdGFHcmlkKGZhbHNlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoZGdyaWQuaWQgPT09IHRoaXMuaWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudENlbGwpIHtcclxuICAgICAgICAgICAgaWYgKFV0aWxzLmhhc0RpYWxvZ09wZW4oKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5kbGcgPSB0aGlzLmluRGlhbG9nKCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50VGFyZ2V0SW5EaWFsb2cgPSBldmVudC50YXJnZXQuY2xvc2VzdCgnLm1vZGFsLWJvZHknKTtcclxuICAgICAgICAgICAgICAgIGlmIChpbmRsZyAmJiBjdXJyZW50VGFyZ2V0SW5EaWFsb2cpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5kbGcgIT0gY3VycmVudFRhcmdldEluRGlhbG9nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCAhdGhpcy5jdXJyZW50Q2VsbC5jZWxsRWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50Q2VsbC5pc0VkaXRpbmcpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCB6b25lQ2xpY2sgPSBldmVudC50YXJnZXRbJ19fem9uZV9zeW1ib2xfX2NsaWNrZmFsc2UnXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlzQmVCdG4gPSBldmVudC50YXJnZXQuY2xvc2VzdCgnLmJlZGVzaWduZXItdG9vbGJhcicpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaXNPbGRCZUJ0biA9IGV2ZW50LnRhcmdldC5jbGFzc05hbWUuaW5kZXhPZignYmVFbGVHcmlkQnV0dG9uJykgPiAtMTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRpc2FibGVDbGlja0V2ZW50ID0gem9uZUNsaWNrICYmIHpvbmVDbGljay5sZW5ndGggJiYgKGV2ZW50LnRhcmdldC5jbG9zZXN0KCcuZi1zZWN0aW9uLWluLW1haW5zdWJjYXJkJykgfHwgaXNPbGRCZUJ0biB8fCBpc0JlQnRuIHx8IGV2ZW50LnRhcmdldC5jbG9zZXN0KCcuZGF0YWdyaWQtdG9vbGJhcnMnKSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoZGlzYWJsZUNsaWNrRXZlbnQgJiYgIWRncmlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQudGFyZ2V0LnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgX3RpbWVyID0gZGlzYWJsZUNsaWNrRXZlbnQgPyAoKGlzQmVCdG4gfHwgaXNPbGRCZUJ0bik/IDUwOiAyMDApIDogMDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHN0b3BFZGl0aW5nUm93SW5kZXggPSB0aGlzLmN1cnJlbnRDZWxsLnJvd0luZGV4O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50Q2VsbC5jZWxsRWxlbWVudC5jbG9zZUVkaXQoKS5waXBlKGRlYm91bmNlVGltZShfdGltZXIpKS5zdWJzY3JpYmUoZiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudENlbGwgJiYgc3RvcEVkaXRpbmdSb3dJbmRleCAhPT0gdGhpcy5jdXJyZW50Q2VsbC5yb3dJbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRDZWxsICYmIHRoaXMuY3VycmVudENlbGwuY2VsbEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIERvbUhhbmRsZXIucmVtb3ZlQ2xhc3ModGhpcy5jdXJyZW50Q2VsbC5jZWxsRWxlbWVudCwgQ0VMTF9TRUxFQ1RFRF9DTFMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgRG9tSGFuZGxlci5yZW1vdmVDbGFzcyh0aGlzLmN1cnJlbnRDZWxsLmNlbGxFbGVtZW50LCBDRUxMX0VESVRJTkdfQ0xTKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRmcy5jYW5jZWxTZWxlY3RDZWxsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudW5iaW5kRG9jdW1lbnRFZGl0TGlzdGVuZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50Q2VsbCA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRpc2FibGVDbGlja0V2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB6b25lQ2xpY2suZm9yRWFjaChuID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLmNhbGxiYWNrKGV2ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQudGFyZ2V0LnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnYXV0byc7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzQmVCdG4gfHwgaXNPbGRCZUJ0bikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwLnRpY2soKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGJpbmREb2N1bWVudEVkaXRMaXN0ZW5lcigpIHtcclxuICAgICAgICB0aGlzLnVuYmluZERvY3VtZW50RWRpdExpc3RlbmVyKCk7XHJcbiAvKlxyXG4gICAgICAgIGlmICghdGhpcy5kb2N1bWVudENlbGxDbGlja0hhbmRsZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5iaW5kRWRpdExpc3RlbmVySW5Nb2RhbCgpO1xyXG4gICAgICAgICAgICB0aGlzLmRvY3VtZW50Q2VsbENsaWNrSGFuZGxlciA9IChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGVuZGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRDZWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFV0aWxzLmhhc0RpYWxvZ09wZW4oKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRsZyA9IHRoaXMuaW5EaWFsb2coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFRhcmdldEluRGlhbG9nID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJy5tb2RhbC1ib2R5Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbmRsZyAmJiBjdXJyZW50VGFyZ2V0SW5EaWFsb2cpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbmRsZyAhPSBjdXJyZW50VGFyZ2V0SW5EaWFsb2cpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRG9tSGFuZGxlci5yZW1vdmVDbGFzcyh0aGlzLmN1cnJlbnRDZWxsLmNlbGxFbGVtZW50LCBDRUxMX1NFTEVDVEVEX0NMUyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmICh0aGlzLmN1cnJlbnRDZWxsLmlzRWRpdGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAvLyB0aGlzLmRmcy5lbmRFZGl0Q2VsbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICB0aGlzLmN1cnJlbnRDZWxsLmNlbGxFbGVtZW50LmNsb3NlRWRpdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLmRmcy5jYW5jZWxTZWxlY3RDZWxsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy51bmJpbmREb2N1bWVudEVkaXRMaXN0ZW5lcigpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50Q2VsbC5pc0VkaXRpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5kZnMuZW5kRWRpdENlbGwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50Q2VsbC5jZWxsRWxlbWVudC5jbG9zZUVkaXQoKS5zdWJzY3JpYmUoZiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERvbUhhbmRsZXIucmVtb3ZlQ2xhc3ModGhpcy5jdXJyZW50Q2VsbC5jZWxsRWxlbWVudCwgQ0VMTF9TRUxFQ1RFRF9DTFMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERvbUhhbmRsZXIucmVtb3ZlQ2xhc3ModGhpcy5jdXJyZW50Q2VsbC5jZWxsRWxlbWVudCwgQ0VMTF9FRElUSU5HX0NMUyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZnMuY2FuY2VsU2VsZWN0Q2VsbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudW5iaW5kRG9jdW1lbnRFZGl0TGlzdGVuZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRDZWxsID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLmRvY3VlbW50Q2VsbENsaWNrRXZlbnRzID0gdGhpcy5yZW5kZXIyLmxpc3Rlbihkb2N1bWVudCwgJ2NsaWNrJywgdGhpcy5kb2N1bWVudENlbGxDbGlja0hhbmRsZXIpO1xyXG4gICAgICAgIH1cclxuKi9cclxuICAgICAgICBpZiAoIXRoaXMuZG9jdW1lbnRDZWxsS2V5ZG93bkhhbmRsZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5kb2N1bWVudENlbGxLZXlkb3duSGFuZGxlciA9IChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFldmVudC50YXJnZXQuY2xvc2VzdCgnLmYtZGF0YWdyaWQnKSAmJiBldmVudC50YXJnZXQubm9kZU5hbWUgIT09ICdCT0RZJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0FjdGl2ZWQoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25LZXlEb3duRXZlbnQoZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdGhpcy5kb2N1bWVudENlbGxLZXlkb3duRXZlbnRzID0gdGhpcy5yZW5kZXIyLmxpc3Rlbihkb2N1bWVudCwgJ2tleWRvd24nLCB0aGlzLmRvY3VtZW50Q2VsbEtleWRvd25IYW5kbGVyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB1bmJpbmREb2N1bWVudEVkaXRMaXN0ZW5lcigpIHtcclxuICAgICAgICBpZiAodGhpcy5kb2N1bWVudENlbGxDbGlja0hhbmRsZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5kb2N1ZW1udENlbGxDbGlja0V2ZW50cygpO1xyXG4gICAgICAgICAgICB0aGlzLmRvY3VtZW50Q2VsbENsaWNrSGFuZGxlciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5kb2N1bWVudENlbGxLZXlkb3duSGFuZGxlcikge1xyXG4gICAgICAgICAgICB0aGlzLmRvY3VtZW50Q2VsbEtleWRvd25FdmVudHMoKTtcclxuICAgICAgICAgICAgdGhpcy5kb2N1bWVudENlbGxLZXlkb3duSGFuZGxlciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5tb2RhbENsaWNrRXZlbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5tb2RhbENsaWNrRXZlbnQoKTtcclxuICAgICAgICAgICAgdGhpcy5tb2RhbENsaWNrRXZlbnQgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG9uS2V5RG93bkV2ZW50KGU6IGFueSkge1xyXG4gICAgICAgIC8vIGlmIChlLmN0cmxLZXkgfHwgZS5zaGlmdEtleSB8fCAhdGhpcy5lZGl0YWJsZSkge1xyXG4gICAgICAgIC8vICAgICByZXR1cm47XHJcbiAgICAgICAgLy8gfVxyXG5cclxuICAgICAgICAvLyBpZiAoIWUudGFyZ2V0LmNsb3Nlc3QoJy5mLWRhdGFncmlkJykpIHtcclxuICAgICAgICAvLyAgICAgcmV0dXJuO1xyXG4gICAgICAgIC8vIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZGlzYWJsZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBrZXlDb2RlID0gZS5rZXlDb2RlO1xyXG5cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudENlbGwgJiYgIXRoaXMuY3VycmVudENlbGwuaXNFZGl0aW5nKSB7XHJcbiAgICAgICAgICAgIGlmIChbMTMsIDQwLCAzNywgMzgsIDM5LCA5XS5pbmRleE9mKGtleUNvZGUpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzd2l0Y2ggKGtleUNvZGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMzI6IC8vIOepuuagvFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRDZWxsICYmIHRoaXMuY3VycmVudENlbGwuY29sdW1uLm9uU3BhY2VIYW5kbGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudENlbGwuY29sdW1uLm9uU3BhY2VIYW5kbGVyKHsgZ3JpZDogdGhpcywgY2VsbDogdGhpcy5jdXJyZW50Q2VsbCwgZXZlbnQ6IGUgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxMzogLy8gRW50ZXJcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50Q2VsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmbiA9IHRoaXMuY3VycmVudENlbGwuY2VsbEVsZW1lbnRbJ2VkaXRDZWxsJ107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm4uYXBwbHkodGhpcy5jdXJyZW50Q2VsbC5jZWxsRWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50Q2VsbC5jb2x1bW4ub25FbnRlckhhbmRsZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudENlbGwuY29sdW1uLm9uRW50ZXJIYW5kbGVyKHsgZ3JpZDogdGhpcywgY2VsbDogdGhpcy5jdXJyZW50Q2VsbCwgZXZlbnQ6IGUgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQwOiAvLyDihpNcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdE5leHRDZWxsKCdkb3duJywgZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM4OiAvLyDihpFcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdE5leHRDZWxsKCd1cCcsIGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzOTogLy8g4oaSXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3ROZXh0Q2VsbCgncmlnaHQnLCBlKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgMzc6IC8vIOKGkFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0TmV4dENlbGwoJ2xlZnQnLCBlKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgOTogLy8gVGFiXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUuc2hpZnRLZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3ROZXh0Q2VsbCgnbGVmdCcsIGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0TmV4dENlbGwoJ3JpZ2h0JywgZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwcml2YXRlIHVuc3Vic2NyaWJlcygpIHtcclxuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMuZm9yRWFjaChzcyA9PiB7XHJcbiAgICAgICAgICAgIGlmIChzcykge1xyXG4gICAgICAgICAgICAgICAgc3MudW5zdWJzY3JpYmUoKTtcclxuICAgICAgICAgICAgICAgIHNzID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMgPSBbXTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZG9jdWVtbnRDZWxsQ2xpY2tFdmVudHMpIHtcclxuICAgICAgICAgICAgdGhpcy5kb2N1ZW1udENlbGxDbGlja0V2ZW50cygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICAvLyNyZWdpb24gRWRpdGluZ1xyXG5cclxuICAgIGlzUm93RWRpdGluZygpIHtcclxuICAgICAgICBpZiAoIXRoaXMuc2VsZWN0ZWRSb3cgfHwgdGhpcy5zZWxlY3RlZFJvdy5pbmRleCA9PT0gLTEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmVkaXRNb2RlID09PSAncm93Jykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0ZWRSb3cuZWRpdG9ycyAmJiB0aGlzLnNlbGVjdGVkUm93LmVkaXRvcnMubGVuZ3RoO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlzQ2VsbEVkaXRpbmcoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudENlbGwgJiYgdGhpcy5lZGl0TW9kZSA9PT0gJ2NlbGwnKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5jdXJyZW50Q2VsbC5lZGl0b3IgJiYgIXRoaXMuY3VycmVudENlbGwuY29sdW1uLmVkaXRvclRlbXBsYXRlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRDZWxsLmlzRWRpdGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRDZWxsLmlzRWRpdGluZztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGlzRWRpdGluZygpIHtcclxuICAgICAgICBpZiAodGhpcy5lZGl0TW9kZSA9PT0gJ3JvdycpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXNSb3dFZGl0aW5nKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXNDZWxsRWRpdGluZygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBlbmRFZGl0aW5nKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmVkaXRNb2RlID09PSAncm93Jykge1xyXG4gICAgICAgICAgICB0aGlzLmVuZFJvd0VkaXQoKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZWRpdE1vZGUgPT09ICdjZWxsJykge1xyXG4gICAgICAgICAgICB0aGlzLmVuZENlbGxFZGl0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldEVkaXRvcnMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0ZWRSb3cuZWRpdG9ycztcclxuICAgIH1cclxuXHJcbiAgICBlZGl0Q2VsbChyb3dJZDogYW55LCBmaWVsZDogc3RyaW5nLCB2YWxpZGF0aW9uOiAgeyBpc1ZhbGlkOiBib29sZWFuLCBtZXNzYWdlOiBzdHJpbmcgfSA9IG51bGwpIHtcclxuICAgICAgICB0aGlzLmFjdGl2ZURhdGFHcmlkKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHJvd0luZGV4ID0gdGhpcy5kZnMuZmluZFJvd0luZGV4KHJvd0lkKTtcclxuICAgICAgICBpZiAocm93SW5kZXggPiAtMSkge1xyXG4gICAgICAgICAgICB0aGlzLmVuZENlbGxFZGl0KCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRySWQgPSBUUl9QUkVGSVggKyByb3dJZDtcclxuICAgICAgICAgICAgY29uc3QgdHJEb20gPSB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcignIycgKyB0cklkKTtcclxuXHJcbiAgICAgICAgICAgIGxldCB0ZERvbSA9IG51bGw7XHJcbiAgICAgICAgICAgIGlmICh0ckRvbSkge1xyXG4gICAgICAgICAgICAgICAgdGREb20gPSB0ckRvbS5xdWVyeVNlbGVjdG9yKGBbZmllbGQ9XCIke2ZpZWxkfVwiXWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbCA9IHRoaXMuZ2V0Q29sdW1uKGZpZWxkKTtcclxuICAgICAgICAgICAgaWYgKCF0ZERvbSAmJiBjb2wuZml4ZWQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjb2wuZml4ZWQgPT09ICdsZWZ0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRyRG9tTCA9IHRoaXMuZWwubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIHRySWQgKyAnX2ZpeGVkbGVmdCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRkRG9tID0gdHJEb21MICYmIHRyRG9tTC5xdWVyeVNlbGVjdG9yKGBbZmllbGQ9XCIke2ZpZWxkfVwiXWApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjb2wuZml4ZWQgPT09ICdyaWdodCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ckRvbVIgPSB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcignIycgKyB0cklkICsgJ19maXhlZHJpZ2h0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGREb20gPSB0ckRvbVIgJiYgdHJEb21SLnF1ZXJ5U2VsZWN0b3IoYFtmaWVsZD1cIiR7ZmllbGR9XCJdYCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh2YWxpZGF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZvcm1WYWxpZGF0aW9ucyA9IE9iamVjdC5hc3NpZ24oIHRoaXMuZm9ybVZhbGlkYXRpb25zIHx8IHt9LCB7IFtmaWVsZF06IHZhbGlkYXRpb259KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgIGlmICh0ZERvbSAmJiB0ZERvbVsnZWRpdENlbGwnXSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50Q2VsbCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpc1snRURJVENFTExfVElNRVInXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzWydFRElUQ0VMTF9USU1FUiddKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXNbJ0VESVRDRUxMX1RJTUVSJ10gPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0ZERvbS5lZGl0Q2VsbCgpO1xyXG4gICAgICAgICAgICAgICAgfSwgMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZW5kQ2VsbEVkaXQoZXZlbnQ/OiBhbnkpIHtcclxuICAgICAgICAvLyBkb2N1bWVudC5ib2R5LmNsaWNrKCk7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudENlbGwpIHtcclxuICAgICAgICAgICAgRG9tSGFuZGxlci5yZW1vdmVDbGFzcyh0aGlzLmN1cnJlbnRDZWxsLmNlbGxFbGVtZW50LCBDRUxMX1NFTEVDVEVEX0NMUyk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRDZWxsLmlzRWRpdGluZykge1xyXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5kZnMuZW5kRWRpdENlbGwoKTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRDZWxsLmNlbGxFZGl0b3JSZWYpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRDZWxsLmNlbGxFZGl0b3JSZWYuaGlkZUNvdmVyKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3RvcEVkaXQgPSB0aGlzLmN1cnJlbnRDZWxsLmNlbGxFbGVtZW50LmNsb3NlRWRpdCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHN0b3BFZGl0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RvcEVkaXQuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZWRpdFJvdyhyb3dJZD86IGFueSkge1xyXG4gICAgICAgIGlmICghdGhpcy5lZGl0YWJsZSB8fCB0aGlzLmVkaXRNb2RlICE9PSAncm93JykgeyByZXR1cm4gZmFsc2U7IH1cclxuXHJcbiAgICAgICAgaWYgKHJvd0lkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0Um93KHJvd0lkKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBpZiAoIXRoaXMuc2VsZWN0ZWRSb3cgfHwgdGhpcy5zZWxlY3RlZFJvdy5pbmRleCA9PT0gLTEpIHtcclxuICAgICAgICAgICAgdGhpcy53cml0ZUNvbnNvbGUoJ1BsZWFzZSBzZWxlY3QgYSByb3cuJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHsgaW5kZXg6IHJvd0luZGV4LCBkYXRhOiByb3dEYXRhIH0gPSB7IC4uLnRoaXMuc2VsZWN0ZWRSb3cgfTtcclxuXHJcbiAgICAgICAgY29uc3QgYmVmb3JlRWRpdEV2ZW50ID0gdGhpcy5iZWZvcmVFZGl0KHsgcm93SW5kZXgsIHJvd0RhdGEsIGdyaWRJbnN0YW5jZTogdGhpcyB9KTtcclxuICAgICAgICBpZiAoIWJlZm9yZUVkaXRFdmVudCB8fCAhYmVmb3JlRWRpdEV2ZW50LnN1YnNjcmliZSkge1xyXG4gICAgICAgICAgICB0aGlzLndyaXRlQ29uc29sZSgncGxlYXNlIHJldHVybiBhbiBPYnNlcnZhYmxlIFR5cGUuJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHRySWQgPSBUUl9QUkVGSVggKyByb3dJZDtcclxuICAgICAgICBjb25zdCB0ckRvbSA9IHRoaXMuZWwubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIHRySWQpO1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMuc2VsZWN0ZWRSb3cuZHIpIHtcclxuICAgICAgICAgICAgdHJEb20uY2xpY2soKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGJlZm9yZUVkaXRFdmVudC5zdWJzY3JpYmUoKGZsYWc6IGJvb2xlYW4pID0+IHtcclxuICAgICAgICAgICAgaWYgKGZsYWcpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkUm93LmRyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2VsbHMgPSB0aGlzLnNlbGVjdGVkUm93LmRyLmNlbGxzLnRvQXJyYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWNlbGxzIHx8ICFjZWxscy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2VsbHMuZm9yRWFjaChjZWxsID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNlbGwuY29sdW1uLmVkaXRvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5pc0VkaXRpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvdy5kci5jZC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVkaXRvcnMgPSBjZWxscy5tYXAoY2VsbCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2VsbC5jZWxsRWRpdG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNlbGwuY2VsbEVkaXRvci5jb21wb25lbnRSZWY7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLmZpbHRlcihlZGl0b3IgPT4gZWRpdG9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvdy5lZGl0b3JzID0gZWRpdG9ycztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlZGl0b3JzICYmIGVkaXRvcnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWRpdG9yc1swXS5pbnN0YW5jZS5pbnB1dEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3JzWzBdLmluc3RhbmNlLmlucHV0RWxlbWVudC5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDnu5HlrprplK7nm5jkuovku7ZcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5iaW5kUm93RWRpdG9yS2V5ZG93bkV2ZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5jZFsnZGVzdHJveWVkJ10pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2QuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmVnaW5FZGl0LmVtaXQoeyByb3dJbmRleCwgcm93RGF0YSwgZ3JpZEluc3RhbmNlOiB0aGlzLCBlZGl0b3I6IGVkaXRvcnMgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgZW5kUm93RWRpdCgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuaXNSb3dFZGl0aW5nKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgY2FuRW5kOiB0cnVlIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMuc2VsZWN0ZWRSb3cgfHwgdGhpcy5zZWxlY3RlZFJvdy5pbmRleCA9PT0gLTEpIHtcclxuICAgICAgICAgICAgdGhpcy53cml0ZUNvbnNvbGUoJ1BsZWFzZSBzZWxlY3QgYSByb3cuJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgeyBpbmRleDogcm93SW5kZXgsIGRhdGE6IHJvd0RhdGEsIGRyIH0gPSB7IC4uLnRoaXMuc2VsZWN0ZWRSb3cgfTtcclxuICAgICAgICBjb25zdCB7IGVkaXRvcjogY3VycmVudEVkaXRvciwgY29sdW1uIH0gPSB7IC4uLnRoaXMuY3VycmVudENlbGwgfTtcclxuICAgICAgICAvLyBibHVyXHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGljaygpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5wZW5kaW5nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IGNhbkVuZDogZmFsc2UgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHJvd0Zvcm0gPSBkci5mb3JtIGFzIEZvcm1Hcm91cDtcclxuICAgICAgICByb3dGb3JtLm1hcmtBc1RvdWNoZWQoKTtcclxuICAgICAgICBpZiAocm93Rm9ybS5pbnZhbGlkICYmICF0aGlzLmVuZEVkaXRCeUludmFsaWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgY2FuRW5kOiBmYWxzZSB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gYWZ0ZXJFZGl0IOimgeS8oOmAkuebuOWFs+WPguaVsO+8jOWcqOe8lui+keeKtuaAgeaXtu+8jOenu+WKqOa7muWKqOadoeS8muWHuuS6i1xyXG4gICAgICAgIGNvbnN0IGFmdGVyRWRpdEV2ZW50ID0gdGhpcy5hZnRlckVkaXQocm93SW5kZXgsIHJvd0RhdGEsIGNvbHVtbiwgY3VycmVudEVkaXRvcik7XHJcbiAgICAgICAgaWYgKCFhZnRlckVkaXRFdmVudCB8fCAhYWZ0ZXJFZGl0RXZlbnQuc3Vic2NyaWJlKSB7XHJcbiAgICAgICAgICAgIHRoaXMud3JpdGVDb25zb2xlKCdwbGVhc2UgcmV0dXJuIGFuIE9ic2VydmFibGUgVHlwZS4nKTtcclxuICAgICAgICAgICAgcmV0dXJuIHsgY2FuRW5kOiBmYWxzZSB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYWZ0ZXJFZGl0RXZlbnQuc3Vic2NyaWJlKChmbGFnOiBib29sZWFuKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChmbGFnKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlQWxsQ2VsbEVkaXRvcigpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkUm93LmRyLmZvcm0pIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93LmRyLnJvd0RhdGEgPSBPYmplY3QuYXNzaWduKHRoaXMuc2VsZWN0ZWRSb3cuZHIucm93RGF0YSwgdGhpcy5zZWxlY3RlZFJvdy5kci5mb3JtLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRmcy51cGRhdGVSb3codGhpcy5zZWxlY3RlZFJvdy5pZCwgdGhpcy5zZWxlY3RlZFJvdy5kci5yb3dEYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNkLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgdmFsID0gJyc7XHJcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudEVkaXRvciAmJiBjdXJyZW50RWRpdG9yLmZvcm1Db250cm9sKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsID0gY3VycmVudEVkaXRvci5mb3JtQ29udHJvbC52YWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmVuZEVkaXQuZW1pdCh7IHJvd0luZGV4LCByb3dEYXRhLCBjb2x1bW4sIHZhbHVlOiB2YWwgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5kZ3MucmVmcmVzaEZvb3RlckRhdGEuZW1pdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY2FuY2VsRWRpdChyb3dJZDogYW55LCBlbWl0ID0gdHJ1ZSkge1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMuaXNFZGl0aW5nKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jbG9zZUFsbENlbGxFZGl0b3IoKTtcclxuICAgICAgICBpZiAocm93SWQpIHtcclxuICAgICAgICAgICAgdGhpcy5kZnMucmVqZWN0Q2hhbmdlcyhyb3dJZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmNkLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICBpZiAoZW1pdCkge1xyXG4gICAgICAgICAgICB0aGlzLmNhbmNlbEVkaXRlZC5lbWl0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlQWxsQ2VsbEVkaXRvcigpIHtcclxuICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFJvdyAmJiB0aGlzLnNlbGVjdGVkUm93LmRyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNlbGxzID0gdGhpcy5zZWxlY3RlZFJvdy5kci5jZWxscztcclxuICAgICAgICAgICAgaWYgKGNlbGxzKSB7XHJcbiAgICAgICAgICAgICAgICBjZWxscy5mb3JFYWNoKGNlbGwgPT4gY2VsbC5pc0VkaXRpbmcgPSBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50Q2VsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudENlbGwuaXNFZGl0aW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvdy5lZGl0b3JzID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIOWPlua2iOmUruebmOS6i+S7tlxyXG4gICAgICAgIHRoaXMudW5iaW5kUm93RWRpdG9yS2V5ZG93bkV2ZW50KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByb3dFZGl0VGFiS2V5ZHdvbkV2ZW50KGU6IGFueSkge1xyXG4gICAgICAgIGNvbnN0IGtleUNvZGUgPSBlLndoaWNoIHx8IGUua2V5Q29kZTtcclxuXHJcbiAgICAgICAgaWYgKGtleUNvZGUgPT09IDkpIHsgIC8vIHRhYlxyXG4gICAgICAgICAgICBjb25zdCB0ZCA9IGUudGFyZ2V0LmNsb3Nlc3QoJ3RkJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRyID0gZS50YXJnZXQuY2xvc2VzdCgndHInKTtcclxuICAgICAgICAgICAgY29uc3QgbmV4dFRkID0gdGQubmV4dEVsZW1lbnRTaWJsaW5nO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgaGFzTm9FZGl0b3IgPSAoX3RkOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAhX3RkLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0JykgJiYgIV90ZC5xdWVyeVNlbGVjdG9yKCd0ZXh0YXJlYScpICYmICFfdGQucXVlcnlTZWxlY3Rvcignc2VsZWN0Jyk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBjb25zdCBlZGl0TmV4dFJvdyA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5leHRUciA9IHRyLm5leHRFbGVtZW50U2libGluZztcclxuICAgICAgICAgICAgICAgIGlmIChuZXh0VHIpIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXh0VHIuY2xpY2soKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXh0Um93aWQgPSBuZXh0VHIuZ2V0QXR0cmlidXRlKCdpZCcpLnJlcGxhY2UoVFJfUFJFRklYLCAnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5leHRSb3dpZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRSb3cobmV4dFJvd2lkKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBpZiAobmV4dFRkKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaGFzTm9FZGl0b3IobmV4dFRkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRkcyA9IHRyLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRkSWR4ID0gLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgdGRzLmZvckVhY2goKHQsIGkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQgPT09IG5leHRUZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGRJZHggPSBpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5leHRUckVkaXQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlICh0ZElkeCA8IHRkcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgX250ZCA9IHRkc1t0ZElkeF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYXNOb0VkaXRvcihfbnRkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGRJZHgrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHRUckVkaXQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAobmV4dFRyRWRpdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0TmV4dFJvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGVkaXROZXh0Um93KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBiaW5kUm93RWRpdG9yS2V5ZG93bkV2ZW50KCkge1xyXG4gICAgICAgIGlmICghdGhpcy5kb2N1bWVudFJvd0VkaXRLZXlkb3duSGFubGRlcikge1xyXG4gICAgICAgICAgICB0aGlzLmRvY3VtZW50Um93RWRpdEtleWRvd25IYW5sZGVyID0gdGhpcy5yZW5kZXIyLmxpc3Rlbihkb2N1bWVudCwgJ2tleWRvd24nLCB0aGlzLnJvd0VkaXRUYWJLZXlkd29uRXZlbnQuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZG9jdW1lbnRDbGlja0VuZFJvd0VkaXRIYW5kbGVyID0gdGhpcy5yZW5kZXIyLmxpc3Rlbihkb2N1bWVudCwgJ2NsaWNrJywgKGU6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5wZW5kaW5nKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKFV0aWxzLmhhc0RpYWxvZ09wZW4oKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5pc1Jvd0VkaXRpbmcoKSkge1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIHRoaXMuZW5kUm93RWRpdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB1bmJpbmRSb3dFZGl0b3JLZXlkb3duRXZlbnQoKSB7XHJcbiAgICAgICAgLy8g5Y+W5raI6ZSu55uY5LqL5Lu2XHJcbiAgICAgICAgaWYgKHRoaXMuZG9jdW1lbnRSb3dFZGl0S2V5ZG93bkhhbmxkZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5kb2N1bWVudFJvd0VkaXRLZXlkb3duSGFubGRlcigpO1xyXG4gICAgICAgICAgICB0aGlzLmRvY3VtZW50Um93RWRpdEtleWRvd25IYW5sZGVyID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmRvY3VtZW50Q2xpY2tFbmRSb3dFZGl0SGFuZGxlcikge1xyXG4gICAgICAgICAgICB0aGlzLmRvY3VtZW50Q2xpY2tFbmRSb3dFZGl0SGFuZGxlcigpO1xyXG4gICAgICAgICAgICB0aGlzLmRvY3VtZW50Q2xpY2tFbmRSb3dFZGl0SGFuZGxlciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIC8vI3JlZ2lvbiBMb2FkIERhdGFcclxuXHJcblxyXG4gICAgcHJpdmF0ZSBfY2xpZW50RmlsdGVyKGNvbmRpdGlvbnM6IGFueSwgZXhjdXRlTG9jYWxlRmlsdGVyID0gZmFsc2UpIHtcclxuICAgICAgICAvLyDlrqLmiLfnq6/ov4fmu6RcclxuICAgICAgICBpZiAoZXhjdXRlTG9jYWxlRmlsdGVyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFsbENsaWVudERhdGEgPSB0aGlzLmRmcy5nZXREYXRhKHRydWUpO1xyXG4gICAgICAgICAgICBpZiAoY29uZGl0aW9ucyAmJiBPYmplY3Qua2V5cyhjb25kaXRpb25zKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IF9kYXRhID0gdGhpcy5jbGllbnRGaWx0ZXJTZXJ2aWNlLmV4ZWN1dGVGaWx0ZXIoYWxsQ2xpZW50RGF0YSwgY29uZGl0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRmcy5sb2FkRmlsdGVyRGF0YShfZGF0YSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvYWREYXRhKGFsbENsaWVudERhdGEsIGZhbHNlLCB0cnVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLnZpcnR1YWxpemVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG9Ub3AoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZmlsdGVyQ2hhbmdlZC5lbWl0KGNvbmRpdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc21hcnRGaWx0ZXJEYXRhKGNvbmRpdGlvbnM6IGFueSkge1xyXG4gICAgICAgIGlmICh0aGlzLnJlbW90ZUZpbHRlcikgeyAvLyDmnI3liqHlmajnq6/ov4fmu6RcclxuICAgICAgICAgICAgY29uc3QgZW50aXR5RmlsdGVycyA9IHRoaXMuY2xpZW50RmlsdGVyU2VydmljZS5jb252ZXJ0U21hcnRGaWx0ZXIyRW50aXR5RmlsdGVyKGNvbmRpdGlvbnMpO1xyXG4gICAgICAgICAgICB0aGlzLmZpbHRlckNoYW5nZWQuZW1pdChlbnRpdHlGaWx0ZXJzKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyDlrqLmiLfnq6/ov4fmu6RcclxuICAgICAgICAgICAgdGhpcy5fY2xpZW50RmlsdGVyKGNvbmRpdGlvbnMsIHRoaXMudXNlRGVmYXVsdEZpbHRlcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICAvLyBzbWFydCBmaXRsZXIg5riF56m65p+l6K+i5p2h5Lu2XHJcbiAgICBvbkNsZWFyU21hcnRGaWx0ZXJzKCRldmVudD86IGFueSkge1xyXG4gICAgICAgIHRoaXMuc21hcnRGaWx0ZXJSZXN1bHQgPSB7IGNvbmRpdGlvbnM6IFtdLCBjb250cm9sRGF0YTogW10gfTtcclxuICAgICAgICB0aGlzLmNvbmRpdGlvbnMgPSBbXTtcclxuICAgICAgICB0aGlzLnNtYXJ0RmlsdGVyRGF0YShbXSk7XHJcbiAgICAgICAgdGhpcy5zbWFydEZpbHRlclNlcnZpY2UuY2xlYXJBbGwoKTtcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5vbkZpbHRlckJhclJlc2l6ZSgwKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBvblJlbW92ZVNtYXJ0RmlsdGVySXRlbSgkZXZlbnQpIHtcclxuICAgICAgICBpZiAoJGV2ZW50KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGUgPSB7IC4uLiRldmVudCB9O1xyXG4gICAgICAgICAgICBlWydsYWJlbENvZGUnXSA9ICRldmVudC5maWVsZENvZGU7XHJcbiAgICAgICAgICAgIHRoaXMuc21hcnRGaWx0ZXJTZXJ2aWNlLnJlbW92ZUNvbmRpdGlvbihlLCB0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25GaWx0ZXJCYXJSZXNpemUoJGV2ZW50KSB7XHJcbiAgICAgICAgdGhpcy5maWx0ZXJCYXJIZWlnaHQgPSAkZXZlbnQ7XHJcblxyXG4gICAgICAgIGNvbnN0IHNtYXJ0RmlsdGVyRWwgPSB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcignLmYtZGF0YWdyaWQtY29sdW1uLWRyb3AtcGFuZWwnKTtcclxuICAgICAgICBpZiAoc21hcnRGaWx0ZXJFbCAmJiAhJGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHNtYXJ0RmlsdGVyRWwuc3R5bGUudG9wID0gJzBweCc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZGdzLnNob3dHcmlkSGVhZGVyLmVtaXQodGhpcy5yZWFsSGVhZGVySGVpZ2h0KTtcclxuICAgICAgICB0aGlzLmRncy5zbWFydEZpbHRlckJhckV4cGFuZC5lbWl0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25TbWFydEZpbHRlckNoYW5nZSgkZXZlbnQpIHtcclxuICAgICAgICBjb25zdCB7IGNvbmRpdGlvbnMsIGZpbHRlckl0ZW0gfSA9ICRldmVudDtcclxuXHJcbiAgICAgICAgdGhpcy5zbWFydEZpbHRlclNlcnZpY2UuZmlsdGVyQ29uZGl0aW9uQ2hhbmdlZCh7IGNvbmRpdGlvbnMsIGNvbnRyb2xEYXRhOiBmaWx0ZXJJdGVtLCBmcm9tOiAndG9vbGJhcicgfSk7XHJcblxyXG4gICAgICAgIC8vIHRoaXMuc21hcnRGaWx0ZXJEYXRhKGNvbmRpdGlvbnMpO1xyXG4gICAgICAgIHRoaXMuZGdzLnNtYXJ0RmlsdGVyRGF0YUNoYW5nZS5lbWl0KGZpbHRlckl0ZW0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZpbHRlckRhdGEoY29uZGl0aW9ucz86IGFueSkge1xyXG4gICAgICAgIGlmICghY29uZGl0aW9ucykge1xyXG4gICAgICAgICAgICBjb25kaXRpb25zID0gdGhpcy5jb25kaXRpb25zO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29uZGl0aW9ucyA9IGNvbmRpdGlvbnM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNjcm9sbFRvVG9wKCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmVuYWJsZVNtYXJ0RmlsdGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc21hcnRGaWx0ZXJEYXRhKGNvbmRpdGlvbnMpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5yZW1vdGVGaWx0ZXIpIHtcclxuICAgICAgICAgICAgY29uc3QgZW50aXR5RmlsdGVycyA9IHRoaXMuY2xpZW50RmlsdGVyU2VydmljZS5jb252ZXJ0MkZpbHRlckFycmF5KGNvbmRpdGlvbnMpO1xyXG4gICAgICAgICAgICB0aGlzLmZpbHRlckNoYW5nZWQuZW1pdChlbnRpdHlGaWx0ZXJzKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyDlrqLmiLfnq6/ov4fmu6RcclxuICAgICAgICAgICAgdGhpcy5fY2xpZW50RmlsdGVyKGNvbmRpdGlvbnMsIHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKiDmuIXnqbrov4fmu6TmnaHku7YgKi9cclxuICAgIGNsZWFyQ29uZGl0aW9uKCkge1xyXG4gICAgICAgIHRoaXMuZGdzLm9uQ2xlYXJGaWx0ZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICBsb2FkRGF0YShkYXRhPzogYW55LCBrZWVwU29ydFN0YXRlID0gZmFsc2UsIGtlZXBTY3JvbGxQb3NpdGlvbiA9IHRydWUpIHtcclxuICAgICAgICBpZiAodGhpcy5sb2FkaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2VMb2FkaW5nKCF0aGlzLnBhZ2luYXRpb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkYXRhID0gZGF0YSB8fCBbXTtcclxuXHJcbiAgICAgICAgaWYgKGtlZXBTY3JvbGxQb3NpdGlvbiAmJiB0aGlzLnNjcm9sbEluc3RhbmNlICYmIHRoaXMuc2Nyb2xsSW5zdGFuY2UuaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgY29uc3QgbHN0ID0gdGhpcy5zY3JvbGxJbnN0YW5jZS5pbnN0YW5jZS5sYXN0U2Nyb2xsVG9wO1xyXG4gICAgICAgICAgICBjb25zdCBsc2wgPSB0aGlzLnNjcm9sbEluc3RhbmNlLmluc3RhbmNlLmxhc3RTY3JvbGxMZWZ0O1xyXG4gICAgICAgICAgICB0aGlzLmRmcy51cGRhdGVQcm9wZXJ0eSgnc2Nyb2xsSW5mbycsIHsgeTogbHN0LCB4OiBsc2wgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5kZnMudXBkYXRlUHJvcGVydHkoJ3Njcm9sbEluZm8nLCB7IHk6IDAsIHg6IDAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5wYWdpbmF0aW9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGZzLnNldFBhZ2luYXRpb24odGhpcy5wYWdlSW5kZXgsIHRoaXMucGFnZVNpemUsIHRoaXMudG90YWwpO1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVBhZ2VyT3B0aW9ucygpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCF0aGlzLmNkWydkZXN0cm95ZWQnXSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIOmHjeaWsOWKoOi9veaVsOaNruaXtu+8jOenu+mZpOaJgOaciee8lui+keWIl1xyXG4gICAgICAgIC8vIHRoaXMuY2xvc2VBbGxDZWxsRWRpdG9yKCk7XHJcblxyXG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XHJcbiAgICAgICAgaWYgKGtlZXBTb3J0U3RhdGUpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMucmVtb3RlU29ydCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZnMubG9hZERhdGEoZGF0YSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRmcy5sb2FkRGF0YShkYXRhLCB0cnVlLCB0cnVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGZzLmxvYWREYXRhKGRhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zZXRQYWdlckhlaWdodCgpO1xyXG4gICAgICAgIHRoaXMuZGdzLmRhdGFTb3VyY2VDaGFuZ2VkKCk7XHJcbiAgICB9XHJcblxyXG4gICAgbG9hZFZpcnR1YWxEYXRhKGRhdGE6IGFueSkge1xyXG4gICAgICAgIGlmICh0aGlzLmdyb3VwUm93cykge1xyXG4gICAgICAgICAgICB0aGlzLndyaXRlQ29uc29sZSgnaWYgeW91IHVzaW5nIEdST1VQUk9XUywgcGxlYXNlIHNldCBbdmlydHVhbGl6ZWRdPVwiZmFsc2VcIiBbdmlydHVhbGl6ZWRBc3luY0xvYWRdPVwiZmFsc2VcIicpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnZpcnR1YWxpemVkQXN5bmNMb2FkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGdzLm9uTG9hZFZpcnR1YWxEYXRhKGRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmZXRjaERhdGEocGFnZUluZGV4LCBwYWdlU2l6ZSkge1xyXG4gICAgICAgIGlmICh0aGlzLnJlc3RTZXJ2aWNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcoKTtcclxuICAgICAgICAgICAgY29uc3QgcGFyYW1zID0geyBwYWdlSW5kZXgsIHBhZ2VTaXplIH07XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNvcnROYW1lKSB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbXNbJ3NvcnROYW1lJ10gPSB0aGlzLnNvcnROYW1lO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNvcnRPcmRlcikge1xyXG4gICAgICAgICAgICAgICAgcGFyYW1zWydzb3J0T3JkZXInXSA9IHRoaXMuc29ydE9yZGVyO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZXN0U2VydmljZS5nZXREYXRhKHRoaXMudXJsLCBwYXJhbXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb2YodW5kZWZpbmVkKTtcclxuICAgIH1cclxuXHJcbiAgICByZWZyZXNoKCkge1xyXG4gICAgICAgIHRoaXMuZGZzLnJlZnJlc2goKTtcclxuICAgIH1cclxuXHJcbiAgICByZWxvYWQoKSB7XHJcbiAgICAgICAgdGhpcy5mZXRjaERhdGEoMSwgdGhpcy5wYWdlU2l6ZSkuc3Vic2NyaWJlKHJlcyA9PiB7XHJcbiAgICAgICAgICAgIGlmIChyZXMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGFnZUluZGV4ID0gMTtcclxuICAgICAgICAgICAgICAgIHRoaXMudG90YWwgPSByZXMudG90YWw7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvYWREYXRhKHJlcy5pdGVtcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKiog6I635Y+W5b2T5YmN6aG15pWw5o2uICovXHJcbiAgICBnZXRSb3dzKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmdyb3VwUm93cyB8fCB0aGlzLnZpcnR1YWxpemVkKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBhZ2VyT25TZXJ2ZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRzLnJvd3M7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50UGFnZXJEYXRhO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMucGFnZXJPblNlcnZlcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRQYWdlckRhdGE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgLy8jcmVnaW9uIFBhZ2luYXRpb25cclxuXHJcbiAgICBzZXRQYWdlSW5kZXgocGFnZUluZGV4OiBudW1iZXIsIGRldGVjdENoYW5nZXMgPSB0cnVlKSB7XHJcbiAgICAgICAgdGhpcy5wYWdlSW5kZXggPSBwYWdlSW5kZXg7XHJcbiAgICAgICAgdGhpcy5wYWdlck9wdHMuY3VycmVudFBhZ2UgPSBwYWdlSW5kZXg7XHJcblxyXG4gICAgICAgIGlmIChkZXRlY3RDaGFuZ2VzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2QuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyDmm7TmlrDmr4/pobVcclxuICAgIHNldFBhZ2VMaXN0KHBhZ2VMaXN0OiBudW1iZXJbXSwgZGV0ZWN0Q2hhbmdlcyA9IHRydWUpIHtcclxuICAgICAgICB0aGlzLnBhZ2VMaXN0ID0gcGFnZUxpc3Q7XHJcbiAgICAgICAgdGhpcy5wYWdlck9wdHMucGFnZUxpc3QgPSBwYWdlTGlzdDtcclxuICAgICAgICBpZiAoZGV0ZWN0Q2hhbmdlcykge1xyXG4gICAgICAgICAgICB0aGlzLmNkLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25QYWdlQ2hhbmdlKHBhZ2VJbmRleDogbnVtYmVyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubG9ja1BhZ2luYXRpb24pIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuY29udHJvbFBhZ2luYXRpb25TdGF0ZSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFBhZ2VJbmRleChwYWdlSW5kZXgsIGZhbHNlKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICB0aGlzLmZldGNoRGF0YShwYWdlSW5kZXgsIHRoaXMucGFnZVNpemUpLnN1YnNjcmliZShyZXMgPT4ge1xyXG4gICAgICAgICAgICBpZiAocmVzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvYWREYXRhKHJlcy5pdGVtcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmZvY3VzUm93SW5kZXggPSAtMTtcclxuICAgICAgICB0aGlzLnNjcm9sbFRvVG9wKCk7XHJcbiAgICAgICAgdGhpcy5wYWdlQ2hhbmdlZC5lbWl0KHsgcGFnZUluZGV4LCBwYWdlU2l6ZTogdGhpcy5wYWdlU2l6ZSB9KTtcclxuICAgIH1cclxuXHJcbiAgICBvblBhZ2VTaXplQ2hhbmdlKHBhZ2VTaXplOiBudW1iZXIpIHtcclxuICAgICAgICBpZiAodGhpcy5sb2NrUGFnaW5hdGlvbikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZm9jdXNSb3dJbmRleCA9IC0xO1xyXG4gICAgICAgIHRoaXMuc2Nyb2xsVG9Ub3AoKTtcclxuICAgICAgICB0aGlzLnBhZ2VTaXplID0gcGFnZVNpemU7XHJcbiAgICAgICAgdGhpcy5wYWdlck9wdHMuaXRlbXNQZXJQYWdlID0gcGFnZVNpemU7XHJcblxyXG4gICAgICAgIHRoaXMuZmV0Y2hEYXRhKDEsIHBhZ2VTaXplKS5zdWJzY3JpYmUocmVzID0+IHtcclxuICAgICAgICAgICAgaWYgKHJlcykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wYWdlSW5kZXggPSAxO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkRGF0YShyZXMuaXRlbXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5wYWdlU2l6ZUNoYW5nZWQuZW1pdCh7IHBhZ2VTaXplLCBwYWdlSW5kZXg6IHRoaXMucGFnZUluZGV4IH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG9uUmVtb3ZlU2VsZWN0ZWRJdGVtKGlkOiBhbnkpIHtcclxuICAgICAgICBpZiAodGhpcy5kZnMuZmluZFJvd0luZGV4KGlkKSA+IC0xKSB7XHJcbiAgICAgICAgICAgIHRoaXMudW5DaGVja1JvdyhpZCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2QuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudW5DaGVja1JvdyhpZCwgZmFsc2UpO1xyXG4gICAgICAgICAgICB0aGlzLmNoZWNrVmFsdWVzID0gdGhpcy5jaGVja2Vkcy5tYXAociA9PiByLmlkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25DbGVhclNlbGVjdGVkSXRlbSgkZXZlbnQpIHtcclxuICAgICAgICAvLyB0aGlzLmNsZWFyQWxsKCk7XHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0T25DaGVjaykge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdFZhbHVlID0gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY2xlYXJDaGVja2Vkcyh0cnVlKTtcclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIC8vI3JlZ2lvbiBMb2FkaW5nXHJcbiAgICBzaG93TG9hZGluZygpIHtcclxuICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuY2QuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlTG9hZGluZyhkZXRlY3RDaGFuZ2VzID0gdHJ1ZSkge1xyXG4gICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xyXG4gICAgICAgIGlmIChkZXRlY3RDaGFuZ2VzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2QuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIC8vI3JlZ2lvbiBEb21cclxuXHJcbiAgICBwcml2YXRlIHJlcGxhY2VQWDJFbXB0eShzdHJOdW06IHN0cmluZykge1xyXG4gICAgICAgIGlmIChzdHJOdW0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIE51bWJlci5wYXJzZUludChzdHJOdW0ucmVwbGFjZSgncHgnLCAnJyksIDEwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIDA7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyQ3VzdG9tQ2xzKGNsczogYW55LCBkb206IGFueSkge1xyXG4gICAgICAgIGlmIChjbHMpIHtcclxuICAgICAgICAgICAgaWYgKGNsc1swXSA9PT0gJyEnKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBfY2xzID0gY2xzLnNsaWNlKDEpLnNwbGl0KCcgJykuZmlsdGVyKGMgPT4gYyk7XHJcbiAgICAgICAgICAgICAgICBfY2xzLmZvckVhY2goYyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIyLnJlbW92ZUNsYXNzKGRvbSwgYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjbHMuc3BsaXQoJyAnKS5maWx0ZXIoYyA9PiBjKS5mb3JFYWNoKGMgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyMi5hZGRDbGFzcyhkb20sIGMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlckN1c3RvbVN0eWxlKGNzOiBDdXN0b21TdHlsZSwgZG9tOiBhbnksIGNzc1J1bGVUZXh0ID0gbnVsbCkge1xyXG4gICAgICAgIGlmICghY3MpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY3MuY2xzKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyQ3VzdG9tQ2xzKGNzLmNscywgZG9tKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjcy5zdHlsZSkge1xyXG4gICAgICAgICAgICBpZiAoIWNzc1J1bGVUZXh0KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoY3Muc3R5bGUpLmZvckVhY2gobiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG4udG9Mb3dlckNhc2UoKSA9PT0gJ2NvbG9yJyAmJiBjcy5zdHlsZVtuXSAmJiBjcy5zdHlsZVtuXS5pbmRleE9mKCchaW1wb3J0YW50JykgPT09IC0xICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjcy5zdHlsZVtuXSA9IGNzLnN0eWxlW25dICsgJyFpbXBvcnRhbnQnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGNzc1J1bGVUZXh0ID0gYCR7dGhpcy5jdXN0b21TdHlsZUtleSgpfSAjJHtkb20uaWR9ICR7SlNPTi5zdHJpbmdpZnkoY3Muc3R5bGUpfWA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuZGdzLmFwcGVuZENzc1J1bGVzKFtjc3NSdWxlVGV4dF0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRCb3VuZGluZ0NsaWVudFJlY3QoZWw6IEVsZW1lbnRSZWYpIHtcclxuICAgICAgICByZXR1cm4gZWwubmF0aXZlRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRFbGVtZW50UGFkZGluZyhlbDogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICBjb25zdCBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZWwpO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHRvcDogdGhpcy5yZXBsYWNlUFgyRW1wdHkoc3R5bGUucGFkZGluZ1RvcCksXHJcbiAgICAgICAgICAgIGxlZnQ6IHRoaXMucmVwbGFjZVBYMkVtcHR5KHN0eWxlLnBhZGRpbmdMZWZ0KSxcclxuICAgICAgICAgICAgYm90dG9tOiB0aGlzLnJlcGxhY2VQWDJFbXB0eShzdHlsZS5wYWRkaW5nQm90dG9tKSxcclxuICAgICAgICAgICAgcmlnaHQ6IHRoaXMucmVwbGFjZVBYMkVtcHR5KHN0eWxlLnBhZGRpbmdSaWdodClcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGdldEVsZW1lbnRCb3JkZXJXaWR0aChlbDogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICBjb25zdCBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZWwpO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHRvcDogdGhpcy5yZXBsYWNlUFgyRW1wdHkoc3R5bGUuYm9yZGVyVG9wV2lkdGgpLFxyXG4gICAgICAgICAgICBib3R0b206IHRoaXMucmVwbGFjZVBYMkVtcHR5KHN0eWxlLmJvcmRlckJvdHRvbVdpZHRoKSxcclxuICAgICAgICAgICAgcmlnaHQ6IHRoaXMucmVwbGFjZVBYMkVtcHR5KHN0eWxlLmJvcmRlclJpZ2h0V2lkdGgpLFxyXG4gICAgICAgICAgICBsZWZ0OiB0aGlzLnJlcGxhY2VQWDJFbXB0eShzdHlsZS5ib3JkZXJMZWZ0V2lkdGgpXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBmb3JtYXREYXRhKGZpZWxkOiBhbnksIGRhdGE6IGFueSwgZm9ybWF0dGVyOiBhbnkpIHtcclxuICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMuZ2V0RmllbGRWYWx1ZShmaWVsZCwgZGF0YSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29sRm9ybWF0U2VyLmZvcm1hdCh2YWx1ZSwgZGF0YSwgZm9ybWF0dGVyKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRGaWVsZFZhbHVlKGZpZWxkLCByb3dEYXRhKSB7XHJcbiAgICAgICAgcmV0dXJuIFV0aWxzLmdldFZhbHVlKGZpZWxkLCByb3dEYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICAvLyNyZWdpb24gU2VsZWN0XHJcbiAgICBwcml2YXRlIGNhbk9wZXJhdGVDaGVja2JveCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tdWx0aVNlbGVjdCAmJiB0aGlzLnNob3dDaGVja2JveDtcclxuICAgIH1cclxuXHJcbiAgICBmaW5kTmV4dFRkKG5leHRDb2x1bW4pIHtcclxuXHJcbiAgICAgICAgaWYgKCFuZXh0Q29sdW1uKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgcm93aWQgPSBUUl9JRF9QUkVGSVggKyB0aGlzLnNlbGVjdGVkUm93LmlkO1xyXG4gICAgICAgIGNvbnN0IGxlZnRUcklEID0gVFJfSURfUFJFRklYICsgdGhpcy5zZWxlY3RlZFJvdy5pZCArICdfZml4ZWRsZWZ0JztcclxuICAgICAgICBjb25zdCByaWdodFRySUQgPSBUUl9JRF9QUkVGSVggKyB0aGlzLnNlbGVjdGVkUm93LmlkICsgJ19maXhlZHJpZ2h0JztcclxuXHJcbiAgICAgICAgbGV0IF90ciA9IG51bGw7XHJcbiAgICAgICAgbGV0IF90ZCA9IG51bGw7XHJcblxyXG4gICAgICAgIGlmIChuZXh0Q29sdW1uLmZpeGVkID09PSAnbGVmdCcpIHtcclxuICAgICAgICAgICAgX3RyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihsZWZ0VHJJRCk7XHJcbiAgICAgICAgICAgIGlmIChfdHIpIHtcclxuICAgICAgICAgICAgICAgIF90ZCA9IF90ci5xdWVyeVNlbGVjdG9yKGBbZmllbGQ9XCIke25leHRDb2x1bW4uZmllbGR9XCJdYCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKG5leHRDb2x1bW4uZml4ZWQgPT09ICdyaWdodCcgKSB7XHJcbiAgICAgICAgICAgIF90ciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocmlnaHRUcklEKTtcclxuICAgICAgICAgICAgaWYgKF90cikge1xyXG4gICAgICAgICAgICAgICAgX3RkID0gX3RyLnF1ZXJ5U2VsZWN0b3IoYFtmaWVsZD1cIiR7bmV4dENvbHVtbi5maWVsZH1cIl1gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIF90ciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iocm93aWQpO1xyXG4gICAgICAgICAgICBpZiAoX3RyKSB7XHJcbiAgICAgICAgICAgICAgICBfdGQgPSBfdHIucXVlcnlTZWxlY3RvcihgW2ZpZWxkPVwiJHtuZXh0Q29sdW1uLmZpZWxkfVwiXWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gX3RkO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5L6d5o2u5b2T5YmN5a2X5q615p+l6K+i5LiL5Liq5a2X5q6155qEVEQgRE9NXHJcbiAgICAgKiBAcGFyYW0gZmllbGQg5b2T5YmN5a2X5q615ZCN56ewXHJcbiAgICAgKiBAcGFyYW0gZGlyIOenu+WKqOaWueWQkVxyXG4gICAgICogQHJldHVybnMgVEQgZWxlbWVudFxyXG4gICAgICovXHJcbiAgICBmaW5kTmV4dENlbGwoZmllbGQ6IHN0cmluZywgZGlyOiBNb3ZlRGlyZWN0aW9uKSB7XHJcbiAgICAgICAgbGV0IHRkID0gbnVsbDtcclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50Q2VsbCAmJiB0aGlzLmN1cnJlbnRDZWxsLmNlbGxFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbCA9IHRoaXMuZGZzLmdldENvbHVtbihmaWVsZCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpeGVkID0gY29sLmZpeGVkIHx8ICcnO1xyXG4gICAgICAgICAgICAvLyBsZXQgY2VsbEluZGV4ID0gdGhpcy5kZnMuZ2V0Q29sdW1uSW5kZXgoZmllbGQsIGZpeGVkKTtcclxuICAgICAgICAgICAgbGV0IGNlbGxJbmRleCA9IHRoaXMuY29sR3JvdXAuY29sdW1ucy5maW5kSW5kZXgobiA9PiAobi5pZCAmJiBuLmlkID09PSBjb2wuaWQpIHx8IG4uZmllbGQgPT09IGNvbC5maWVsZCk7XHJcblxyXG4gICAgICAgICAgICAvLyBpZiAoZml4ZWQgPT09ICdsZWZ0JyB8fCB0aGlzLmZhc3QpIHtcclxuICAgICAgICAgICAgLy8gICAgIGlmICh0aGlzLnNob3dDaGVja2JveCkge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIGNlbGxJbmRleCArPSAxO1xyXG4gICAgICAgICAgICAvLyAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gICAgIGlmICh0aGlzLnNob3dMaW5lTnVtYmVyKSB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgY2VsbEluZGV4ICs9IDE7XHJcbiAgICAgICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgICAgIC8vIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGN1cnJDZWxsRWwgPSB0aGlzLmN1cnJlbnRDZWxsLmNlbGxFbGVtZW50O1xyXG4gICAgICAgICAgICBjb25zdCB0ZFNlbGVjdG9yID0gYFtmaWVsZD1cIiR7ZmllbGR9XCJdYDtcclxuICAgICAgICAgICAgaWYgKGRpciA9PT0gJ3VwJykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcHJldlRyID0gdGhpcy5kZ3MuZmluZE5leHRUcihjdXJyQ2VsbEVsLnBhcmVudEVsZW1lbnQucHJldmlvdXNFbGVtZW50U2libGluZywgJ3VwJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJldlRyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGQgPSBwcmV2VHIucXVlcnlTZWxlY3Rvcih0ZFNlbGVjdG9yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmIChkaXIgPT09ICdkb3duJykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV4dFRyID0gdGhpcy5kZ3MuZmluZE5leHRUcihjdXJyQ2VsbEVsLnBhcmVudEVsZW1lbnQubmV4dEVsZW1lbnRTaWJsaW5nLCAnZG93bicpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG5leHRUcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRkID0gbmV4dFRyLnF1ZXJ5U2VsZWN0b3IodGRTZWxlY3Rvcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGlyID09PSAnbGVmdCcpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5leHRDb2x1bW4gPSB0aGlzLmNvbEdyb3VwLmNvbHVtbnNbY2VsbEluZGV4IC0gMV07XHJcbiAgICAgICAgICAgICAgICBpZiAobmV4dENvbHVtbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRkID0gdGhpcy5maW5kTmV4dFRkKG5leHRDb2x1bW4pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRpciA9PT0gJ3JpZ2h0Jykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV4dENvbHVtbiA9IHRoaXMuY29sR3JvdXAuY29sdW1uc1tjZWxsSW5kZXggKyAxXTtcclxuICAgICAgICAgICAgICAgIGlmIChuZXh0Q29sdW1uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGQgPSB0aGlzLmZpbmROZXh0VGQobmV4dENvbHVtbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRkO1xyXG4gICAgfVxyXG5cclxuICAgIHNlbGVjdE5leHRDZWxsKGRpcjogTW92ZURpcmVjdGlvbiwgZXZlbnQ6IEV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgbmV4dFRkID0gdGhpcy5maW5kTmV4dENlbGwodGhpcy5jdXJyZW50Q2VsbC5maWVsZCwgZGlyKTtcclxuXHJcbiAgICAgICAgaWYgKGRpciA9PT0gJ3VwJyAmJiAhbmV4dFRkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChuZXh0VGQgJiYgbmV4dFRkLmNsYXNzTmFtZS5pbmRleE9mKCdmLWRhdGFncmlkLWNlbGwtcm93bnVtYmVyJykgPT0gLTEgJiYgbmV4dFRkLmNsYXNzTmFtZS5pbmRleE9mKCdmLWRhdGFncmlkLWNlbGwtY2hlY2tib3gnKSA9PSAtMSkge1xyXG4gICAgICAgICAgICBpZiAoZXZlbnRbJ2NvZGUnXSA9PT0gJ1RhYicgJiYgdGhpcy5lZGl0YWJsZSAmJiB0aGlzLmVkaXRjZWxsV2hlblRhYktleWR3b24pIHtcclxuICAgICAgICAgICAgICAgIG5leHRUZFsnY2xpY2snXS5hcHBseShuZXh0VGQsIFtldmVudF0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKG5leHRUZC5zZWxlY3RDZWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0aW9uTW9kZSA9PT0gJ2RlZmF1bHQnICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyQ2hlY2tlZHMoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgbmV4dFRkWydzZWxlY3RDZWxsJ10oZXZlbnQsIG5leHRUZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gbmV4dFRkWydzZWxlY3RDZWxsJ10oZXZlbnQsIG5leHRUZCk7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXh0VGQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG5leHRDb2wgPSB0aGlzLmNvbEdyb3VwLmNvbHVtbnNbMF07XHJcbiAgICAgICAgICAgIGNvbnN0IHRkU2VsZXRvciA9IGB0ZFtmaWVsZD1cIiR7bmV4dENvbC5maWVsZH1cIl1gO1xyXG4gICAgICAgICAgICBjb25zdCB0ciA9IHRoaXMuY3VycmVudENlbGwuY2VsbEVsZW1lbnQucGFyZW50RWxlbWVudDtcclxuXHJcbiAgICAgICAgICAgIGxldCBfbmV4dCA9IHRyLm5leHRFbGVtZW50U2libGluZztcclxuICAgICAgICAgICAgaWYgKGRpciA9PT0gJ2xlZnQnKSB7XHJcbiAgICAgICAgICAgICAgICBfbmV4dCA9IHRyLnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCFfbmV4dCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCB0ckRvbUlkID0gX25leHQuaWQucmVwbGFjZSgnX2ZpeGVkbGVmdCcsJycpLnJlcGxhY2UoJ19maXhlZHJpZ2h0JywnJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGxlZnRUclNlbGVjdG9yID0gJyMnICsgdHJEb21JZCArICdfZml4ZWRsZWZ0JztcclxuXHJcbiAgICAgICAgICAgIGlmIChfbmV4dC5pZC5pbmRleE9mKCdfZml4ZWRyaWdodCcpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbEdyb3VwLmxlZnRGaXhlZCAmJiB0aGlzLmNvbEdyb3VwLmxlZnRGaXhlZC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBfbmV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobGVmdFRyU2VsZWN0b3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChkaXIgPT09ICdsZWZ0Jykge1xyXG4gICAgICAgICAgICAgICAgaWYgKF9uZXh0LmlkLmluZGV4T2YoJ19maXhlZGxlZnQnKSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX25leHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGxlZnRUclNlbGVjdG9yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG5leHRUZCA9IF9uZXh0LnF1ZXJ5U2VsZWN0b3IodGRTZWxldG9yKTtcclxuICAgICAgICAgICAgaWYgKG5leHRUZCAmJiBuZXh0VGQuc2VsZWN0Q2VsbCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0aW9uTW9kZSA9PT0gJ2RlZmF1bHQnICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJDaGVja2VkcygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbmV4dFRkLnNlbGVjdENlbGwoZXZlbnQsIG5leHRUZCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8qXHJcbiAgICAgICAgICAgIGNvbnN0IG5leHRUciA9IHRoaXMuZGdzLmZpbmROZXh0VHIoX25leHQsIGRpciA9PT0gJ2xlZnQnID8gJ3VwJyA6ICdkb3duJyk7XHJcbiAgICAgICAgICAgIGlmIChuZXh0VHIgJiYgbmV4dFRyLnRhZ05hbWUgPT09ICdUUicpIHtcclxuICAgICAgICAgICAgICAgIC8vIG5leHRUci5jaGlsZHJlbi5maW5kKHRkID0+IHRkLmVkaXRDZWxsKS5lZGl0Q2VsbCgpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGZpcnN0RWRpdG9yID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBsZXQgaSA9IDA7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAoIWZpcnN0RWRpdG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlyc3RFZGl0b3IgPSAhIW5leHRUci5jaGlsZHJlbltpXS5zZWxlY3RDZWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghZmlyc3RFZGl0b3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChuZXh0VHIuY2hpbGRyZW5baV0gJiYgbmV4dFRyLmNoaWxkcmVuW2ldLnNlbGVjdENlbGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3Rpb25Nb2RlID09PSAnZGVmYXVsdCcgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJDaGVja2VkcygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBuZXh0VHIuY2hpbGRyZW5baV0uc2VsZWN0Q2VsbChldmVudCwgbmV4dFRyLmNoaWxkcmVuW2ldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAqL1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZWxlY3ROZXh0Um93KCkge1xyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkUm93KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRyID0gdGhpcy5zZWxlY3RlZFJvdy5kci5lbC5uYXRpdmVFbGVtZW50O1xyXG4gICAgICAgICAgICBpZiAodHIubmV4dEVsZW1lbnRTaWJsaW5nKSB7XHJcbiAgICAgICAgICAgICAgICB0ci5uZXh0RWxlbWVudFNpYmxpbmcuY2xpY2soKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHNlbGVjdFByZXZSb3coKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRSb3cpIHtcclxuICAgICAgICAgICAgY29uc3QgdHIgPSB0aGlzLnNlbGVjdGVkUm93LmRyLmVsLm5hdGl2ZUVsZW1lbnQ7XHJcbiAgICAgICAgICAgIGlmICh0ci5wcmV2aW91c0VsZW1lbnRTaWJsaW5nKSB7XHJcbiAgICAgICAgICAgICAgICB0ci5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLmNsaWNrKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlQ2VsbFNlbGVjdGVkQ2xzKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRDZWxsKSB7XHJcbiAgICAgICAgICAgIERvbUhhbmRsZXIucmVtb3ZlQ2xhc3ModGhpcy5jdXJyZW50Q2VsbC5jZWxsRWxlbWVudCwgQ0VMTF9TRUxFQ1RFRF9DTFMpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcjIucmVtb3ZlQ2xhc3ModGhpcy5jdXJyZW50Q2VsbC5jZWxsRWxlbWVudCwgQ0VMTF9FRElUSU5HX0NMUyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBzZWxlY3RlZENlbGwgPSB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLicgKyBDRUxMX1NFTEVDVEVEX0NMUyk7XHJcbiAgICAgICAgaWYgKHNlbGVjdGVkQ2VsbC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgc2VsZWN0ZWRDZWxsLmZvckVhY2gobiA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcjIucmVtb3ZlQ2xhc3MobiwgQ0VMTF9TRUxFQ1RFRF9DTFMpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDpgInkuK3ooYxcclxuICAgICAqIEBwYXJhbSBpZCDpgInkuK3ooYxJRFxyXG4gICAgICogQHBhcmFtIGVtaXQg6Kem5Y+Rc2VsZWN0IOS6i+S7tlxyXG4gICAgICogQHBhcmFtIHRvQ3VycmVudFBvc2l0aW9uIOa7muWKqOadoeWumuS9jeWIsOW9k+WJjemAieaLqeS4reihjFxyXG4gICAgICovXHJcbiAgICBzZWxlY3RSb3coaWQ6IGFueSwgZW1pdCA9IHRydWUsIHRvQ3VycmVudFBvc2l0aW9uID0gZmFsc2UpIHtcclxuICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFJvdyAmJiB0aGlzLnNlbGVjdGVkUm93LmlkID09PSBpZCkge1xyXG4gICAgICAgICAgICBpZiAoZW1pdCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZnMuc2VsZWN0UmVjb3JkKGlkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKHRvQ3VycmVudFBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbFRvQ3VycmVudFJvdygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IF9zZWxlY3RSb3cgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLnJlbW92ZUNlbGxTZWxlY3RlZENscygpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCF0aGlzLmVuYWJsZVNlbGVjdFJvdykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMubXVsdGlTZWxlY3QgJiYgdGhpcy5zaG93Q2hlY2tib3gpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJDaGVja2VkcyhmYWxzZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5tdWx0aVNlbGVjdCAmJiB0aGlzLnNlbGVjdGlvbk1vZGUgPT09ICdkZWZhdWx0JyAmJiAhdGhpcy5lbmFibGVNb3JlUGFnZVNlbGVjdCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhckFsbCgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoaWQgJiYgKCF0aGlzLnNlbGVjdGVkUm93IHx8IHRoaXMuc2VsZWN0ZWRSb3cuaWQgIT0gaWQpKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3Qgcm93ID0gdGhpcy5kZnMuZmluZFJvdyhpZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAocm93ICYmIHRoaXMuZGlzYWJsZVJvdykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmRpc2FibGVSb3cocm93LmRhdGEsIHJvdy5pbmRleCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZW1pdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGZzLnNlbGVjdFJlY29yZChpZCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGZzLnNldFNlbGVjdFJvdyhpZCwgZW1pdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvdyA9IHRoaXMuZGZzLmdldEN1cnJlbnRSb3coKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jaGVja09uU2VsZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tSb3dzKFtpZF0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRncy5zZXRTZWxlY2VkUm93LmVtaXQoeyBpZCwgc2VsZWN0ZWQ6IHRydWUgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jaGVja09uU2VsZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja1Jvd3MoW2lkXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0b0N1cnJlbnRQb3NpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxUb0N1cnJlbnRSb3coKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIGlmICh0aGlzLmlzRWRpdGluZygpICkge1xyXG4gICAgICAgICAgICBjb25zdCBzdG9wRWRpdCA9IHRoaXMuY3VycmVudENlbGwuY2VsbEVsZW1lbnQuY2xvc2VFZGl0KCk7XHJcbiAgICAgICAgICAgIGlmIChzdG9wRWRpdCkge1xyXG4gICAgICAgICAgICAgICAgc3RvcEVkaXQuc3Vic2NyaWJlKF9zZWxlY3RSb3cpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgX3NlbGVjdFJvdygpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5rua5Yqo5p2h5rua5Yqo5Yiw5b2T5YmN6KGM55qE5L2N572uXHJcbiAgICAgKi9cclxuICAgIHNjcm9sbFRvQ3VycmVudFJvdygpIHtcclxuICAgICAgICB0aGlzLmRncy5zY3JvbGxUb0N1cnJlbnRSb3cubmV4dCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHVuU2VsZWN0Um93KGlkOiBhbnksIGVtaXQgPSB0cnVlKSB7XHJcbiAgICAgICAgaWYgKGlkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2VBbGxDZWxsRWRpdG9yKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50Q2VsbCAmJiB0aGlzLmN1cnJlbnRDZWxsLnJvd0lkID09IGlkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhbmNlbFNlbGVjdENlbGwoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGVtaXQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGZzLnNlbGVjdFJlY29yZChpZCwgZmFsc2UpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZnMuc2V0U2VsZWN0Um93KGlkLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGdzLnNldFNlbGVjZWRSb3cuZW1pdCh7IGlkLCBzZWxlY3RlZDogZmFsc2UgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2VsZWN0QWxsUm93cygpIHtcclxuICAgICAgICBpZiAodGhpcy5tdWx0aVNlbGVjdCAmJiB0aGlzLmVuYWJsZVNlbGVjdFJvdykge1xyXG4gICAgICAgICAgICB0aGlzLmRmcy5zZWxlY3RBbGwoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY2FuY2VsU2VsZWN0Q2VsbCgpIHtcclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50Q2VsbCkge1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRDZWxsLmNlbGxFbGVtZW50LmNhbmNlbFNlbGVjdGVkKCk7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5jdXJyZW50Q2VsbC5pc0VkaXRpbmcpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudENlbGwgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZnMuY2FuY2VsU2VsZWN0Q2VsbCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNsZWFyU2VsZWN0aW9ucyhleGNsdWRlSWRzPzogc3RyaW5nW10pIHtcclxuICAgICAgICB0aGlzLmRmcy5jbGVhclNlbGVjdGlvbnMoZXhjbHVkZUlkcyk7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZFJvdyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5jYW5jZWxTZWxlY3RDZWxsKCk7XHJcbiAgICAgICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgY2hlY2tSb3coaWQ6IGFueSwgZW1pdCA9IHRydWUpIHtcclxuICAgICAgICBpZiAodGhpcy5jYW5PcGVyYXRlQ2hlY2tib3goKSkge1xyXG4gICAgICAgICAgICBpZiAoZW1pdCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZnMuY2hlY2tSZWNvcmQoaWQpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja1Jvd3MoW2lkXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIOmSqemAieihjO+8jOS4jeinpuWPkemAieS4reS6i+S7tiAqL1xyXG4gICAgY2hlY2tSb3dzKGlkczogYW55W10sIGVtaXQgPSBmYWxzZSkge1xyXG4gICAgICAgIGlmIChpZHMgJiYgaWRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLmRmcy5zZXRDaGVja2VkUm93cyhpZHMsIHRydWUpO1xyXG4gICAgICAgICAgICB0aGlzLmRncy5zZXRDaGVja2VkUm93cy5uZXh0KHsgaWRzLCBjaGVja2VkOiB0cnVlIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0aW9uTW9kZSA9PT0gJ2RlZmF1bHQnKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRmcy51cGRhdGVQcm9wZXJ0eSgnc2VsZWN0aW9ucycsIHRoaXMuY2hlY2tlZHMpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyB0aGlzLmNkLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgaWYgKGVtaXQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tWYWx1ZXMgPSB0aGlzLmNoZWNrZWRzLm1hcChyID0+IHIuaWQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja1ZhbHVlc0NoYW5nZS5lbWl0KHRoaXMuY2hlY2tWYWx1ZXMpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja2VkQ2hhbmdlLmVtaXQodGhpcy5jaGVja2Vkcyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQWxsQ2hlY2tib3hTdGF0dXMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIOWPlua2iOmSqemAie+8jOS4jeinpuWPkemAieS4reS6i+S7tiAqL1xyXG4gICAgdW5DaGVja1Jvd3MoaWRzOiBhbnlbXSwgZW1pdCA9IGZhbHNlKSB7XHJcbiAgICAgICAgaWYgKGlkcyAmJiBpZHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGZzLnNldENoZWNrZWRSb3dzKGlkcywgZmFsc2UpO1xyXG4gICAgICAgICAgICB0aGlzLmRncy5zZXRDaGVja2VkUm93cy5uZXh0KHsgaWRzLCBjaGVja2VkOiBmYWxzZSB9KTtcclxuICAgICAgICAgICAgLy8gdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgIGlmIChlbWl0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrVmFsdWVzID0gdGhpcy5jaGVja2Vkcy5tYXAociA9PiByLmlkKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tWYWx1ZXNDaGFuZ2UuZW1pdCh0aGlzLmNoZWNrVmFsdWVzKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tlZENoYW5nZS5lbWl0KHRoaXMuY2hlY2tlZHMpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUFsbENoZWNrYm94U3RhdHVzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNoZWNrQWxsUm93cyhlbWl0ID0gdHJ1ZSkge1xyXG4gICAgICAgIGlmICh0aGlzLmNhbk9wZXJhdGVDaGVja2JveCgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGZzLmNoZWNrQWxsKCk7XHJcbiAgICAgICAgICAgIHRoaXMuZGdzLmNoZWNrQWxsLmVtaXQoKTtcclxuICAgICAgICAgICAgaWYgKGVtaXQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tBbGwuZW1pdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHVuQ2hlY2tSb3coaWQ6IGFueSwgZW1pdCA9IHRydWUpIHtcclxuICAgICAgICBpZiAodGhpcy5jYW5PcGVyYXRlQ2hlY2tib3goKSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50Q2VsbCAmJiB0aGlzLmN1cnJlbnRDZWxsLnJvd0lkID09IGlkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhbmNlbFNlbGVjdENlbGwoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGVtaXQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGZzLmNoZWNrUmVjb3JkKGlkLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVuQ2hlY2tSb3dzKFtpZF0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUFsbENoZWNrYm94U3RhdHVzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqIOa4heepuumSqemAieihjO+8jOm7mOiupOWPqua4heepuuW9k+WJjemhteeahOmSqemAiVxyXG4gICAgICogY2xlYXJBbGw6IOa4heepuuaJgOaciSDpu5jorqTkuLogZmFsc2U7IOWQpuWImeS7hea4heepuuW9k+WJjemhteeahOmSqemAieaVsOaNruOAglxyXG4gICAgICovXHJcbiAgICBjbGVhckNoZWNrZWRzKGNsZWFyQWxsID0gZmFsc2UsIGVtaXRVbkNoZWNrQWxsID0gdHJ1ZSkge1xyXG4gICAgICAgIHRoaXMuZGZzLmNsZWFyQ2hlY2tlZHMoY2xlYXJBbGwpO1xyXG4gICAgICAgIHRoaXMuY2hlY2tWYWx1ZXMgPSBbXTtcclxuICAgICAgICB0aGlzLmNhbmNlbFNlbGVjdENlbGwoKTtcclxuICAgICAgICBpZiAoZW1pdFVuQ2hlY2tBbGwpIHtcclxuICAgICAgICAgICAgdGhpcy5kZ3MudW5jaGVja0FsbC5lbWl0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNsZWFyQWxsKCkge1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRSb3cgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuY2hlY2tWYWx1ZXMgPSBbXTtcclxuICAgICAgICB0aGlzLmRmcy5jbGVhckFsbCgpO1xyXG4gICAgICAgIHRoaXMuZGdzLnVuY2hlY2tBbGwuZW1pdCgpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlQWxsQ2hlY2tib3hTdGF0dXMoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICAvLyNyZWdpb24gUmVzaXplIENvbHVtblxyXG5cclxuICAgIHByaXZhdGUgZ2V0UmVzaXplUHJveHlQb3NMZWZ0KGU6IE1vdXNlRXZlbnQpIHtcclxuICAgICAgICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldCBhcyBhbnk7XHJcbiAgICAgICAgY29uc3QgZGdSZWN0ID0gdGhpcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QodGhpcy5kZ0NvbnRhaW5lcik7XHJcbiAgICAgICAgY29uc3QgdGQgPSB0YXJnZXQucGFyZW50RWxlbWVudDtcclxuICAgICAgICBjb25zdCB0ZExlZnQgPSB0ZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0O1xyXG4gICAgICAgIGNvbnN0IGRlbHRhRWRnZSA9IHRkLm9mZnNldFdpZHRoIC0gKGUucGFnZVggLSB0ZExlZnQpO1xyXG4gICAgICAgIHRoaXMucmVzaXplQ29sdW1uSW5mby5wcm94eUxpbmVFZGdlID0gZGVsdGFFZGdlO1xyXG4gICAgICAgIHRoaXMucmVzaXplQ29sdW1uSW5mby5zdGFydFdpZHRoID0gdGQub2Zmc2V0V2lkdGg7XHJcbiAgICAgICAgdGhpcy5yZXNpemVDb2x1bW5JbmZvLnN0YXJ0WCA9IGUucGFnZVg7XHJcbiAgICAgICAgdGhpcy5yZXNpemVDb2x1bW5JbmZvLmxlZnQgPSB0ZExlZnQgLSBkZ1JlY3QubGVmdCAtIDEgKyBkZWx0YUVkZ2U7XHJcbiAgICAgICAgcmV0dXJuIGUucGFnZVggLSBkZ1JlY3QubGVmdCAtIDEgKyBkZWx0YUVkZ2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB0b2dnbGVSZXNpemVQcm94eShzaG93ID0gdHJ1ZSkge1xyXG4gICAgICAgIGxldCBkaXNwbGF5ID0gJ2Jsb2NrJztcclxuICAgICAgICBpZiAoIXNob3cpIHtcclxuICAgICAgICAgICAgZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5yZW5kZXIyLnNldFN0eWxlKHRoaXMucmVzaXplUHJveHlCZy5uYXRpdmVFbGVtZW50LCAnZGlzcGxheScsIGRpc3BsYXkpO1xyXG4gICAgICAgIHRoaXMucmVuZGVyMi5zZXRTdHlsZSh0aGlzLnJlc2l6ZVByb3h5Lm5hdGl2ZUVsZW1lbnQsICdkaXNwbGF5JywgZGlzcGxheSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25Db2x1bW5SZXNpemVCZWdpbihlOiBNb3VzZUV2ZW50KSB7XHJcbiAgICAgICAgaWYgKHRoaXMucmVzaXplUHJveHkpIHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXIyLnNldFN0eWxlKGRvY3VtZW50LmJvZHksICdjdXJzb3InLCAnZS1yZXNpemUnKTtcclxuICAgICAgICAgICAgY29uc3QgcHJveHkgPSB0aGlzLnJlc2l6ZVByb3h5Lm5hdGl2ZUVsZW1lbnQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHByb3h5UG9zTGVmdCA9IHRoaXMuZ2V0UmVzaXplUHJveHlQb3NMZWZ0KGUpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcjIuc2V0U3R5bGUocHJveHksICdsZWZ0JywgcHJveHlQb3NMZWZ0ICsgJ3B4Jyk7XHJcblxyXG4gICAgICAgICAgICBsZXQgdG9wID0gMDtcclxuICAgICAgICAgICAgaWYgKCh0aGlzLmVuYWJsZUZpbHRlclJvdyB8fCB0aGlzLmVuYWJsZVNtYXJ0RmlsdGVyKSAmJiB0aGlzLnNob3dGaWx0ZXJCYXIpIHtcclxuICAgICAgICAgICAgICAgIHRvcCArPSB0aGlzLmZpbHRlckJhckhlaWdodDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuc2hvd1Jvd0dyb3VwUGFuZWwpIHtcclxuICAgICAgICAgICAgICAgIHRvcCArPSB0aGlzLnJvd0dyb3VwUGFuZWxIZWlnaHQ7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyMi5zZXRTdHlsZShwcm94eSwgJ3RvcCcsIGAke3RvcH1weGApO1xyXG5cclxuICAgICAgICAgICAgaWYgKCF0aGlzLmF1dG9IZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyMi5zZXRTdHlsZShwcm94eSwgJ2hlaWdodCcsICh0aGlzLmhlaWdodCAtIHRoaXMucGFnZXJIZWlnaHQpICsgJ3B4Jyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgYm90dG9tSCA9IDA7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wYWdpbmF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYm90dG9tSCArPSB0aGlzLnBhZ2VySGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2hvd0Zvb3Rlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGJvdHRvbUggKz0gdGhpcy5mb290ZXJIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcjIuc2V0U3R5bGUocHJveHksICdoZWlnaHQnLCBgY2FsYygxMDAlIC0gJHtib3R0b21IfXB4KWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlUmVzaXplUHJveHkoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25Db2x1bW5SZXNpemUoZTogTW91c2VFdmVudCkge1xyXG4gICAgICAgIGNvbnN0IHByb3h5ID0gdGhpcy5yZXNpemVQcm94eS5uYXRpdmVFbGVtZW50O1xyXG4gICAgICAgIGNvbnN0IGRnUmVjdCA9IHRoaXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KHRoaXMuZGdDb250YWluZXIpO1xyXG4gICAgICAgIGNvbnN0IHByb3h5UG9zTGVmdCA9IGUucGFnZVggLSBkZ1JlY3QubGVmdCAtIDEgKyB0aGlzLnJlc2l6ZUNvbHVtbkluZm8ucHJveHlMaW5lRWRnZTtcclxuICAgICAgICBpZiAocHJveHlQb3NMZWZ0IC0gdGhpcy5yZXNpemVDb2x1bW5JbmZvLmxlZnQgPiAyMCkge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcjIuc2V0U3R5bGUocHJveHksICdsZWZ0JywgcHJveHlQb3NMZWZ0ICsgJ3B4Jyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXIyLnNldFN0eWxlKHByb3h5LCAnbGVmdCcsICh0aGlzLnJlc2l6ZUNvbHVtbkluZm8ubGVmdCArIDIwKSArICdweCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNvbHVtblJlc2l6ZUVuZChlOiBNb3VzZUV2ZW50LCBjb2w6IERhdGFDb2x1bW4pIHtcclxuICAgICAgICB0aGlzLnJlbmRlcjIucmVtb3ZlU3R5bGUoZG9jdW1lbnQuYm9keSwgJ2N1cnNvcicpO1xyXG4gICAgICAgIHRoaXMudG9nZ2xlUmVzaXplUHJveHkoZmFsc2UpO1xyXG4gICAgICAgIHRoaXMucmVzaXplQ29sdW1uSW5mby5wcm94eUxpbmVFZGdlID0gMDtcclxuXHJcbiAgICAgICAgbGV0IG5ld0NvbFdpZHRoID0gdGhpcy5yZXNpemVDb2x1bW5JbmZvLnN0YXJ0V2lkdGggKyBlLnBhZ2VYIC0gdGhpcy5yZXNpemVDb2x1bW5JbmZvLnN0YXJ0WDtcclxuXHJcbiAgICAgICAgaWYgKG5ld0NvbFdpZHRoIDwgMjApIHtcclxuICAgICAgICAgICAgbmV3Q29sV2lkdGggPSAyMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjb2wud2lkdGggPiBuZXdDb2xXaWR0aCkge1xyXG4gICAgICAgICAgICBjb25zdCB0ID0gY29sLndpZHRoIC0gbmV3Q29sV2lkdGg7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5maXRDb2x1bW5zICYmIHRoaXMuc2Nyb2xsSW5zdGFuY2UuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LnNjcm9sbExlZnQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1vdmVMZWZ0ID0gdGhpcy5zY3JvbGxJbnN0YW5jZS5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQuc2Nyb2xsTGVmdCAtIHQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbEluc3RhbmNlLnNjcm9sbFRvWChtb3ZlTGVmdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY29sLndpZHRoID0gbmV3Q29sV2lkdGg7XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5ub3dyYXAgJiYgdGhpcy5zaG93Rm9vdGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0Rm9vdGVySGVpZ2h0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy51c2VDb250cm9sUGFuZWwgJiYgdGhpcy5zZXR0aW5nU2VydmljZSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldHRpbmdTZXJ2aWNlLnNhdmVVc2VyQ29uZmlnKHRoaXMuaWQpLnN1YnNjcmliZSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRmcy5jb2x1bW5SZXNpemVFbmQoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGdzLmNvbHVtblJlc2l6ZWQuZW1pdCgpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZGZzLmNvbHVtblJlc2l6ZUVuZCgpO1xyXG4gICAgICAgIHRoaXMuZGdzLmNvbHVtblJlc2l6ZWQuZW1pdCgpO1xyXG5cclxuICAgICAgICB0aGlzLnVwZGF0ZUZpeGVkQ29sdW1uQ3NzRm9yRmFzdE1vZGUoY29sKTtcclxuICAgIH1cclxuXHJcbiAgICAvKiog6L+Y5Y6f5YiX5a69ICovXHJcbiAgICByZXN0aXR1dGVDb2x1bW5zU2l6ZSgpIHtcclxuICAgICAgICB0aGlzLmRmcy5yZXNpemVDb2x1bW5zKHRydWUpO1xyXG4gICAgICAgIHRoaXMuZGdzLmNvbHVtblJlc2l6ZWQuZW1pdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiDljZXlhYPmoLzlhoXlrrnoh6rpgILlupTliJflrr0gKi9cclxuICAgIHNpemVUb0NvbnRlbnQoY29sOiBEYXRhQ29sdW1uLCB0aDogRWxlbWVudFJlZikge1xyXG4gICAgICAgIGlmICghdGhpcy5BdXRvQ29sdW1uV2lkdGhVc2VEYmxjbGljaykge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBsb25nZXN0VGV4dCA9ICcnO1xyXG4gICAgICAgIGNvbnN0IGl0ZW1zID0gdGhpcy5kYXRhO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gaXRlbXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICAgICAgLy8gVEZTOiAzNTY5NjQgMjAyMDAyMDNcclxuICAgICAgICAgICAgbGV0IHZhbHVlID0gVXRpbHMuZ2V0VmFsdWUoY29sLmZpZWxkLCBpdGVtc1tpXSk7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZSB8fCAnJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsZXQgdGV4dCA9ICcnICsgdmFsdWU7XHJcbiAgICAgICAgICAgIGlmIChjb2wuZm9ybWF0dGVyICYmIHZhbHVlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHRleHQgPSB0aGlzLmNvbEZvcm1hdFNlci5mb3JtYXQodmFsdWUsIGl0ZW1zW2ldLCBjb2wuZm9ybWF0dGVyKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKFV0aWxzLmdldEJMZW4odGV4dCkgPiBVdGlscy5nZXRCTGVuKGxvbmdlc3RUZXh0KSkge1xyXG4gICAgICAgICAgICAgICAgbG9uZ2VzdFRleHQgPSB0ZXh0O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb25nVGV4dEFyZWEubmF0aXZlRWxlbWVudC5pbm5lckhUTUwgPSB0ZXh0O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdzEgPSB0aGlzLmxvbmdUZXh0QXJlYS5uYXRpdmVFbGVtZW50Lm9mZnNldFdpZHRoO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb25nVGV4dEFyZWEubmF0aXZlRWxlbWVudC5pbm5lckhUTUwgPSBsb25nZXN0VGV4dDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHcyID0gdGhpcy5sb25nVGV4dEFyZWEubmF0aXZlRWxlbWVudC5vZmZzZXRXaWR0aDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodzEgPiB3Mikge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvbmdlc3RUZXh0ID0gdGV4dDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5sb25nVGV4dEFyZWEubmF0aXZlRWxlbWVudC5pbm5lckhUTUwgPSBsb25nZXN0VGV4dDtcclxuICAgICAgICBjb25zdCBtYXhXaWR0aCA9IHRoaXMubG9uZ1RleHRBcmVhLm5hdGl2ZUVsZW1lbnQub2Zmc2V0V2lkdGggKyAyNjtcclxuXHJcbiAgICAgICAgdGhpcy5sb25nVGV4dEFyZWEubmF0aXZlRWxlbWVudC5pbm5lckhUTUwgPSB0aC5uYXRpdmVFbGVtZW50LmlubmVyVGV4dDtcclxuICAgICAgICBsZXQgdGhNaW5XaWR0aCA9IHRoaXMubG9uZ1RleHRBcmVhLm5hdGl2ZUVsZW1lbnQub2Zmc2V0V2lkdGggKyAyNjtcclxuXHJcbiAgICAgICAgaWYgKGNvbC5zb3J0YWJsZSkge1xyXG4gICAgICAgICAgICB0aE1pbldpZHRoICs9IDI0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29sLndpZHRoID0gKG1heFdpZHRoID4gdGhNaW5XaWR0aCA/IG1heFdpZHRoIDogdGhNaW5XaWR0aCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNvbEluZGV4ID0gdGhpcy5mbGF0Q29sdW1ucy5maW5kSW5kZXgoYyA9PiBjLmZpZWxkID09PSBjb2wuZmllbGQpO1xyXG4gICAgICAgIGlmIChjb2xJbmRleCA9PT0gdGhpcy5mbGF0Q29sdW1ucy5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgIGNvbC53aWR0aCArPSA2O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmRmcy5yZXNpemVDb2x1bW5zKCk7XHJcbiAgICAgICAgdGhpcy5kZ3MuY29sdW1uUmVzaXplZC5lbWl0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgLy8jcmVnaW9uIENoYW5nZXNcclxuICAgIGdldENoYW5nZXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGZzLmdldENoYW5nZXMoKTtcclxuICAgIH1cclxuXHJcbiAgICBhY2NlcHRDaGFuZ2VzKCkge1xyXG4gICAgICAgIHRoaXMuZGZzLmFjY2VwdENoYW5nZXMoKTtcclxuICAgIH1cclxuXHJcbiAgICByZWplY3RDaGFuZ2VzKCkge1xyXG4gICAgICAgIHRoaXMuZGZzLnJlamVjdENoYW5nZXMoKTtcclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIC8vI3JlZ2lvbiBDUlVEXHJcblxyXG4gICAgYXBwZW5kUm93KHJvdzogYW55KSB7XHJcbiAgICAgICAgdGhpcy5jYW5jZWxFZGl0KG51bGwpO1xyXG4gICAgICAgIHRoaXMuZGZzLmFwcGVuZFJvdyhyb3cpO1xyXG4gICAgICAgIHRoaXMuZGF0YUNoYW5nZS5lbWl0KHRoaXMuZGZzLmdldERhdGEoKSk7XHJcbiAgICAgICAgdGhpcy5yb3dBcHBlbmRlZC5lbWl0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlUm93KHJvd0lkLCBuZXdEYXRhOiB7IFtrZXk6IHN0cmluZ106IGFueSB9KSB7XHJcbiAgICAgICAgdGhpcy5kZnMudXBkYXRlUm93KHJvd0lkLCBuZXdEYXRhKTtcclxuICAgICAgICB0aGlzLmRhdGFDaGFuZ2UuZW1pdCh0aGlzLmRmcy5nZXREYXRhKCkpO1xyXG4gICAgICAgIHRoaXMucm93VXBkYXRlZC5lbWl0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVmcmVzaFJvdyhyb3dJZCkge1xyXG4gICAgICAgIGNvbnN0IHJvdyA9IHRoaXMuZGZzLmZpbmRSb3cocm93SWQpO1xyXG4gICAgICAgIGlmIChyb3cgJiYgcm93LmRhdGEpIHtcclxuICAgICAgICAgICAgdGhpcy5kZnMucm93VXBkYXRlJC5lbWl0KHJvdyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy53cml0ZUNvbnNvbGUoJ0NhbiBub3QgZm91bmQgcm93IGJ5IGlkLiBpZDogJyArIHJvd0lkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGRlbGV0ZVJvdyhyb3dJZD86IGFueSkge1xyXG4gICAgICAgIHRoaXMuY2FuY2VsRWRpdChyb3dJZCwgZmFsc2UpO1xyXG4gICAgICAgIGlmICghcm93SWQpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHJvd0lkID0gdGhpcy5zZWxlY3RWYWx1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihg5Yig6Zmk6KGM5pe25Li76ZSu5qCH6K+GSUQg5LiN6IO95Li656m644CCYCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgZGVsZXRlUm93ID0gdGhpcy5kZnMuZGVsZXRlUm93KHJvd0lkKTtcclxuICAgICAgICB0aGlzLmRhdGFDaGFuZ2UuZW1pdCh0aGlzLmRmcy5nZXREYXRhKCkpO1xyXG4gICAgICAgIHRoaXMuY3VycmVudENlbGwgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZGZzLnVwZGF0ZVByb3BlcnR5KCdjdXJyZW50Q2VsbCcsIG51bGwpO1xyXG4gICAgICAgIHRoaXMuY2QuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIHRoaXMucm93RGVsZXRlZC5lbWl0KGRlbGV0ZVJvdyk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFsaWRhdGVSb3coKSB7IH1cclxuXHJcbiAgICBpbnNlcnRSb3coKSB7IH1cclxuXHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICAvLyNyZWdpb24gU2Nyb2xsaW5nXHJcblxyXG4gICAgc2Nyb2xsVG9MZWZ0KCkge1xyXG4gICAgICAgIGlmICh0aGlzLnNjcm9sbEluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsSW5zdGFuY2Uuc2Nyb2xsVG9MZWZ0KDAsIDIwMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNjcm9sbFRvUmlnaHQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2Nyb2xsSW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgdGhpcy5zY3JvbGxJbnN0YW5jZS5zY3JvbGxUb1JpZ2h0KDAsIDIwMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNjcm9sbFRvVG9wKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnNjcm9sbEluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsSW5zdGFuY2Uuc2Nyb2xsVG9Ub3AoMCwgMTAwKTtcclxuICAgICAgICAgICAgdGhpcy5kZnMudXBkYXRlUHJvcGVydHkoJ3Njcm9sbEluZm8nLCB7IHk6IDAsIHg6IDAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNjcm9sbFRvQm90dG9tKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnNjcm9sbEluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsSW5zdGFuY2Uuc2Nyb2xsVG9Cb3R0b20oMCwgMTAwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgcHJpdmF0ZSBfc2V0Q29sdW1uUmVhZG9ubHkoY29sczogRGF0YUNvbHVtbltdLCBmaWVsZDogc3RyaW5nLCByZWFkb25seSA9IHRydWUpIHtcclxuICAgICAgICBpZiAoY29scyAmJiBjb2xzLmxlbmd0aCAmJiBmaWVsZCkge1xyXG4gICAgICAgICAgICBjb25zdCBjb2wgPSBjb2xzLmZpbmQobiA9PiBuLmZpZWxkID09PSBmaWVsZCk7XHJcbiAgICAgICAgICAgIGlmIChjb2wpIHtcclxuICAgICAgICAgICAgICAgIGNvbC5yZWFkb25seSA9IHJlYWRvbmx5O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldENvbHVtblJlYWRvbmx5KGZpZWxkOiBzdHJpbmcsIHJlYWRvbmx5ID0gdHJ1ZSkge1xyXG4gICAgICAgIHRoaXMuX3NldENvbHVtblJlYWRvbmx5KHRoaXMuY29sR3JvdXAubGVmdEZpeGVkLCBmaWVsZCwgcmVhZG9ubHkpO1xyXG4gICAgICAgIHRoaXMuX3NldENvbHVtblJlYWRvbmx5KHRoaXMuY29sR3JvdXAucmlnaHRGaXhlZCwgZmllbGQsIHJlYWRvbmx5KTtcclxuICAgICAgICB0aGlzLl9zZXRDb2x1bW5SZWFkb25seSh0aGlzLmNvbEdyb3VwLm5vcm1hbENvbHVtbnMsIGZpZWxkLCByZWFkb25seSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5piv5ZCm5Li65aSa6KGo5aS0XHJcbiAgICBpc011bHRpSGVhZGVyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbHVtbnMgJiYgdGhpcy5jb2x1bW5zLmxlbmd0aCA+IDEgJiYgQXJyYXkuaXNBcnJheSh0aGlzLmNvbHVtbnNbMV0pO1xyXG4gICAgfVxyXG5cclxuICAgIHRvZ2dsZVZpc2libGVDb2x1bW4oZmllbGRzOiBzdHJpbmdbXSwgdmlzaWJsZSA9IHRydWUpIHtcclxuICAgICAgICBpZiAoIXRoaXMuaXNNdWx0aUhlYWRlcigpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29sdW1ucy5mb3JFYWNoKChjb2xzOiBEYXRhQ29sdW1uW10pID0+IHtcclxuICAgICAgICAgICAgICAgIGZpZWxkcy5mb3JFYWNoKGZpZWxkID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb2wgPSBjb2xzLmZpbmQoYyA9PiBjLmZpZWxkID09PSBmaWVsZCB8fCBjLmlkID09PSBmaWVsZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2wudmlzaWJsZSA9IHZpc2libGU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIOWkmuihqOWktFxyXG4gICAgICAgICAgICBjb25zdCBhbGxDb2xzID0gZmxhdHRlbjxEYXRhQ29sdW1uPih0aGlzLmNvbHVtbnMpO1xyXG5cclxuICAgICAgICAgICAgYWxsQ29scy5mb3JFYWNoKHAgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHAub3JpZ2lhbmxDb2xTcGFuID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBwLm9yaWdpYW5sQ29sU3BhbiA9IHAuY29sc3BhbjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBmaWVsZHMuZm9yRWFjaChmaWVsZCA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBfY29sID0gYWxsQ29scy5maW5kKGNvbCA9PiBjb2wuZmllbGQgPT09IGZpZWxkIHx8IGNvbC5pZCA9PT0gZmllbGQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKF9jb2wpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9jb2wudmlzaWJsZSA9PT0gdmlzaWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBfY29sLnZpc2libGUgPSB2aXNpYmxlO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcmVudHMgPSBEYXRhZ3JpZENvbHVtbnNIZWxwZXIuZ2V0UGFyZW50Q29sdW1ucyhfY29sLCBhbGxDb2xzKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGlsZHMgPSBEYXRhZ3JpZENvbHVtbnNIZWxwZXIuZ2V0Q2hpbGRDb2x1bW5zKF9jb2wsIGFsbENvbHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkcy5mb3JFYWNoKGMgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjLnZpc2libGUgPSB2aXNpYmxlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh2aXNpYmxlICYmIGNoaWxkcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2NvbC5jb2xzcGFuID0gX2NvbC5vcmlnaWFubENvbFNwYW47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBfY29sc3BhbiA9IF9jb2wuY29sc3BhbiB8fCAxO1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudHMuZm9yRWFjaChwID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF2aXNpYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLmNvbHNwYW4gPSBwLmNvbHNwYW4gLSBfY29sc3BhbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IF9jaGlsZHMgPSBhbGxDb2xzLmZpbHRlcihuID0+IG4ucGFyZW50SWQgPT09IHAuaWQgJiYgbi52aXNpYmxlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAuY29sc3BhbiA9IF9jaGlsZHMucmVkdWNlKChyLCBjKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IHIgKyAoYy5jb2xzcGFuIHx8IDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHAudmlzaWJsZSA9ICEhcC5jb2xzcGFuO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q29sdW1uKGZpZWxkOiBzdHJpbmcpIHtcclxuICAgICAgICBjb25zdCBhbGxDb2xzID0gZmxhdHRlbjxEYXRhQ29sdW1uPih0aGlzLmNvbHVtbnMpO1xyXG4gICAgICAgIHJldHVybiBhbGxDb2xzLmZpbmQobiA9PiBuLmZpZWxkID09PSBmaWVsZCB8fCBuLmlkID09PSBmaWVsZCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2hvd0NvbHVtbihmaWVsZDogc3RyaW5nIHwgc3RyaW5nW10sIHJlbG9hZCA9IHRydWUpIHtcclxuICAgICAgICBpZiAodHlwZW9mIGZpZWxkID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZVZpc2libGVDb2x1bW4oW2ZpZWxkXSwgdHJ1ZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy50b2dnbGVWaXNpYmxlQ29sdW1uKGZpZWxkLCB0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb2x1bW5zQ2hhbmdlZChyZWxvYWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGhpZGVDb2x1bW4oZmllbGQ6IHN0cmluZyB8IHN0cmluZ1tdLCByZWxvYWQgPSB0cnVlKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBmaWVsZCA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgdGhpcy50b2dnbGVWaXNpYmxlQ29sdW1uKFtmaWVsZF0sIGZhbHNlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZVZpc2libGVDb2x1bW4oZmllbGQsIGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb2x1bW5zQ2hhbmdlZChyZWxvYWQpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZUNvbHVtbihmaWVsZDogc3RyaW5nLCBjb2x1bW5PYmplY3Q6IHsgW2tleTogc3RyaW5nXTogYW55IH0sIGRldGVjdENoYW5nZSA9IHRydWUpIHtcclxuICAgICAgICB0aGlzLmNvbHVtbnMuZm9yRWFjaCgoY29sczogRGF0YUNvbHVtbltdKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBjb2x1bW4gPSBjb2xzLmZpbmQoY29sID0+IGNvbC5maWVsZCA9PT0gZmllbGQpO1xyXG4gICAgICAgICAgICBpZiAoY29sdW1uKSB7XHJcbiAgICAgICAgICAgICAgICBjb2x1bW4gPSBPYmplY3QuYXNzaWduKGNvbHVtbiwgY29sdW1uT2JqZWN0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAoZGV0ZWN0Q2hhbmdlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29sdW1uc0NoYW5nZWQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0Q29sdW1uRm9ybWF0dGVyKGZpZWxkOiBzdHJpbmcsIGZvcm1hdHRlcjogYW55LCBkZXRlY3RDaGFuZ2UgPSB0cnVlKSB7XHJcbiAgICAgICAgdGhpcy5jb2x1bW5zLmZvckVhY2goKGNvbHM6IERhdGFDb2x1bW5bXSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjb2x1bW4gPSBjb2xzLmZpbmQoY29sID0+IGNvbC5maWVsZCA9PT0gZmllbGQpO1xyXG4gICAgICAgICAgICBpZiAoY29sdW1uKSB7XHJcbiAgICAgICAgICAgICAgICBjb2x1bW4uZm9ybWF0dGVyID0gZm9ybWF0dGVyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmIChkZXRlY3RDaGFuZ2UpIHtcclxuICAgICAgICAgICAgdGhpcy5jb2x1bW5zQ2hhbmdlZCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVDb2x1bW5Gb3JtYXR0ZXJPcHRpb25zKGZpZWxkOiBzdHJpbmcsIGZvcm1hdHRlck9wdGlvbnM6IGFueSwgZGV0ZWN0Q2hhbmdlID0gdHJ1ZSkge1xyXG4gICAgICAgIHRoaXMuY29sdW1ucy5mb3JFYWNoKChjb2xzOiBEYXRhQ29sdW1uW10pID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY29sdW1uID0gY29scy5maW5kKGNvbCA9PiBjb2wuZmllbGQgPT09IGZpZWxkKTtcclxuICAgICAgICAgICAgaWYgKGNvbHVtbiAmJiBjb2x1bW4uZm9ybWF0dGVyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb2xGb3JtYXR0ZXIgPSBjb2x1bW4uZm9ybWF0dGVyIGFzIGFueTtcclxuICAgICAgICAgICAgICAgIGNvbEZvcm1hdHRlci5vcHRpb25zID0gY29sRm9ybWF0dGVyLm9wdGlvbnMgfHwge307XHJcbiAgICAgICAgICAgICAgICBjb2xGb3JtYXR0ZXIub3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oY29sRm9ybWF0dGVyLm9wdGlvbnMsIGZvcm1hdHRlck9wdGlvbnMgfHwge30pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmIChkZXRlY3RDaGFuZ2UpIHtcclxuICAgICAgICAgICAgdGhpcy5jb2x1bW5zQ2hhbmdlZCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXRDb2x1bW5UaXRsZShmaWVsZDogc3RyaW5nLCB0aXRsZTogc3RyaW5nLCBkZXRlY3RDaGFuZ2UgPSB0cnVlKSB7XHJcbiAgICAgICAgdGhpcy5jb2x1bW5zLmZvckVhY2goKGNvbHM6IERhdGFDb2x1bW5bXSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjb2x1bW4gPSBjb2xzLmZpbmQoY29sID0+IGNvbC5maWVsZCA9PT0gZmllbGQpO1xyXG4gICAgICAgICAgICBpZiAoY29sdW1uKSB7XHJcbiAgICAgICAgICAgICAgICBjb2x1bW4udGl0bGUgPSB0aXRsZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAoZGV0ZWN0Q2hhbmdlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29sdW1uc0NoYW5nZWQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmjpLluo9cclxuICAgICAqIEBwYXJhbSBzb3J0TmFtZSDmjpLluo/lrZfmrrXvvIzlpoLvvJogJ25hbWUsYWdlJ1xyXG4gICAgICogQHBhcmFtIHNvcnRPcmRlciDmjpLluo/mlrnlvI/vvIzlpoLvvJonZGVzYywgYXNjJ1xyXG4gICAgICovXHJcbiAgICBzb3J0KHNvcnROYW1lPzogc3RyaW5nLCBzb3J0T3JkZXI/OiBzdHJpbmcpIHtcclxuICAgICAgICBpZiAoc29ydE5hbWUgPT09IG51bGwgfHwgc29ydE5hbWUgPT09ICcnIHx8IHNvcnRPcmRlciA9PT0gbnVsbCB8fCBzb3J0T3JkZXIgPT09ICcnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xlYXJTb3J0KCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHNvcnROYW1lICYmIHNvcnRPcmRlcikge1xyXG4gICAgICAgICAgICAgICAgLy8gdGhpcy51cGRhdGVTb3J0SW5mbyhzb3J0TmFtZSwgc29ydE9yZGVyKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc29ydE5hbWUgPSBzb3J0TmFtZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc29ydE9yZGVyID0gc29ydE9yZGVyO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZnMuc2V0U29ydEluZm8odGhpcy5zb3J0TmFtZSwgdGhpcy5zb3J0T3JkZXIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMucmVtb3RlU29ydCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZnMuY2xpZW50U29ydCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMub25Db2x1bW5Tb3J0ZWQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY2xlYXJTb3J0KCkge1xyXG4gICAgICAgIHRoaXMuc29ydE5hbWUgPSAnJztcclxuICAgICAgICB0aGlzLnNvcnRPcmRlciA9ICcnO1xyXG4gICAgICAgIHRoaXMuZGZzLnNldFNvcnRJbmZvKCcnLCAnJyk7XHJcbiAgICAgICAgaWYgKCF0aGlzLnJlbW90ZVNvcnQpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZGF0YSAmJiB0aGlzLmRhdGEubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRmcy5jbGVhclNvcnQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm9uQ29sdW1uU29ydGVkKCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25Db2x1bW5Tb3J0ZWQoKSB7XHJcbiAgICAgICAgbGV0IHBhcmFtcyA9IG51bGw7XHJcbiAgICAgICAgaWYgKHRoaXMuc29ydE5hbWUgJiYgdGhpcy5zb3J0T3JkZXIpIHtcclxuICAgICAgICAgICAgY29uc3Qgb3JkZXJzID0gdGhpcy5zb3J0T3JkZXIuc3BsaXQoJywnKTtcclxuICAgICAgICAgICAgcGFyYW1zID0gdGhpcy5zb3J0TmFtZS5zcGxpdCgnLCcpLnJlZHVjZSgociwgbiwgaSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcltuXSA9IG9yZGVyc1tpXSB8fCAnYXNjJztcclxuICAgICAgICAgICAgICAgIHJldHVybiByO1xyXG4gICAgICAgICAgICB9LCB7fSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMucmVtb3RlU29ydCkge1xyXG4gICAgICAgICAgICB0aGlzLmRmcy5jbGllbnRTb3J0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmNvbHVtblNvcnRlZC5lbWl0KHBhcmFtcyk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlU29ydEluZm8obmV3U29ydE5hbWUsIG5ld1NvcnRPcmRlcikge1xyXG4gICAgICAgIGNvbnN0IHNvcnROYW1lID0gdGhpcy5zb3J0TmFtZTtcclxuICAgICAgICBjb25zdCBzb3J0T3JkZXIgPSB0aGlzLnNvcnRPcmRlcjtcclxuICAgICAgICBsZXQgc29ydEZpZWxkcyA9IFtdO1xyXG4gICAgICAgIGxldCBzb3J0T3JkZXJzID0gW107XHJcbiAgICAgICAgaWYgKHNvcnROYW1lKSB7XHJcbiAgICAgICAgICAgIHNvcnRGaWVsZHMgPSBzb3J0TmFtZS5zcGxpdCgnLCcpO1xyXG4gICAgICAgICAgICBzb3J0T3JkZXJzID0gc29ydE9yZGVyLnNwbGl0KCcsJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBfc29ydEZpZWxkcyA9IG5ld1NvcnROYW1lLnNwbGl0KCcsJyk7XHJcbiAgICAgICAgY29uc3QgX3NvcnRPcmRlcnMgPSBuZXdTb3J0T3JkZXIuc3BsaXQoJywnKTtcclxuXHJcblxyXG4gICAgICAgIF9zb3J0RmllbGRzLmZvckVhY2goKG5GaWVsZCwgbkluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbE9yZGVyID0gX3NvcnRPcmRlcnNbbkluZGV4XSB8fCAnYXNjJztcclxuICAgICAgICAgICAgbGV0IG5ld09yZGVyID0gY29sT3JkZXI7XHJcbiAgICAgICAgICAgIGNvbnN0IGkgPSBzb3J0RmllbGRzLmZpbmRJbmRleChuID0+IG4gPT09IG5GaWVsZCk7XHJcbiAgICAgICAgICAgIGlmIChpID49IDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IF9vcmRlciA9IHNvcnRPcmRlcnNbaV0gPT09ICdhc2MnID8gJ2Rlc2MnIDogJ2FzYyc7XHJcbiAgICAgICAgICAgICAgICBuZXdPcmRlciA9IF9vcmRlcjtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm11bHRpU29ydCAmJiBuZXdPcmRlciA9PT0gJ2FzYycpIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXdPcmRlciA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgICAgICBzb3J0RmllbGRzLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICBzb3J0T3JkZXJzLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc29ydE9yZGVyc1tpXSA9IF9vcmRlcjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5tdWx0aVNvcnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBzb3J0RmllbGRzLnB1c2gobkZpZWxkKTtcclxuICAgICAgICAgICAgICAgICAgICBzb3J0T3JkZXJzLnB1c2goY29sT3JkZXIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBzb3J0RmllbGRzID0gW25GaWVsZF07XHJcbiAgICAgICAgICAgICAgICAgICAgc29ydE9yZGVycyA9IFtjb2xPcmRlcl07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5zb3J0TmFtZSA9IHNvcnRGaWVsZHMuam9pbignLCcpO1xyXG4gICAgICAgIHRoaXMuc29ydE9yZGVyID0gc29ydE9yZGVycy5qb2luKCcsJyk7XHJcbiAgICB9XHJcbiAgICAvKiog5YiX6K6+572uICovXHJcbiAgICBzaG93Q29udHJvbFBhbmVsKCRldmVudDogTW91c2VFdmVudCkge1xyXG4gICAgICAgICRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcclxuICAgICAgICBpZiAodGhpcy51c2VDb250cm9sUGFuZWwgJiYgdGhpcy5zZXR0aW5nU2VydmljZSkge1xyXG4gICAgICAgICAgICB0aGlzLmNoZWNrU2V0dGluZ0h0dHAoKTtcclxuICAgICAgICAgICAgdGhpcy5zZXR0aW5nU2VydmljZS5zaG93KHNlbGYpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjaGVja1NldHRpbmdIdHRwKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5zZXR0aW5nU2VydmljZS5odHRwUmVzdFNlcnZpY2UgfHwgIXRoaXMuc2V0dGluZ1NlcnZpY2UuaHR0cFJlc3RTZXJ2aWNlLmJlZlJlcG9zaXRvcnkpIHtcclxuICAgICAgICAgICAgY29uc3Qgc2V0dGluZ3NIdHRwID0gdGhpcy5pbmplY3QuZ2V0KEdSSURfU0VUVElOR1NfSFRUUCwgbnVsbCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ1NlcnZpY2UuaHR0cFJlc3RTZXJ2aWNlID0gc2V0dGluZ3NIdHRwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBkaXNhYmxlSGVhZGVyKGZsYWcgPSB0cnVlKSB7XHJcbiAgICAgICAgdGhpcy5kZ3MuZGlzYWJsZUhlYWRlci5lbWl0KGZsYWcpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiDojrflj5bnlKjmiLfkuKrmgKfljJborr7nva4gKi9cclxuICAgIHByaXZhdGUgdXNlclByb2ZpbGVTZXR0aW5nKHNldHRpbmdzKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHsgc29ydEluZm8sIHZpZXdDb2x1bW5zLCBncm91cEZpZWxkLCBjb2x1bW5Gb3JtYXQsIGV4cGFuZEdyb3VwUm93cyAgfSA9IHNldHRpbmdzO1xyXG4gICAgICAgIGxldCBfc29ydE5hbWUsIF9zb3J0T3JkZXI7XHJcbiAgICAgICAgaWYgKHNvcnRJbmZvKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgc29ydE5hbWUsIHNvcnRPcmRlciB9ID0gc29ydEluZm87XHJcbiAgICAgICAgICAgIF9zb3J0TmFtZSA9IHNvcnROYW1lO1xyXG4gICAgICAgICAgICBfc29ydE9yZGVyID0gc29ydE9yZGVyXHJcbiAgICAgICAgICAgIGlmIChzb3J0TmFtZSAmJiBzb3J0TmFtZS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc29ydE5hbWUgPSBzb3J0TmFtZS5qb2luKCcsJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc29ydE9yZGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zb3J0T3JkZXIgPSBzb3J0T3JkZXIuam9pbignLCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzWydfX3NvcnRJbmZvJ10gPSBzb3J0SW5mbztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh2aWV3Q29sdW1ucyAmJiB2aWV3Q29sdW1ucy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5jb2x1bW5zID0gdGhpcy5jb2x1bW5zLm1hcChjb2xzID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ1NlcnZpY2UudXBkYXRlQ29sdW1uRm9ybWF0KGNvbHMsIGNvbHVtbkZvcm1hdCwgdGhpcyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZXR0aW5nU2VydmljZS5uZXdWaXNpYmxlT3JkZXJDb2x1bW5zKGNvbHMsIHZpZXdDb2x1bW5zLCBjb2x1bW5Gb3JtYXQsIHRoaXMpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuYWRkQ29udHJvbENvbCgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jb2x1bW5zLmZvckVhY2goY29scyA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb2xzLmZvckVhY2goY29sID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX3NvcnROYW1lICYmIF9zb3J0TmFtZS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaSA9IF9zb3J0TmFtZS5pbmRleE9mKGNvbC5maWVsZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbC5vcmRlciA9IF9zb3J0T3JkZXJbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5ncm91cFJvd3MgJiYgKGdyb3VwRmllbGQgIT09IG51bGwgJiYgZ3JvdXBGaWVsZCAhPT0gdW5kZWZpbmVkKSkge1xyXG4gICAgICAgICAgICB0aGlzLmdyb3VwRmllbGQgPSBncm91cEZpZWxkO1xyXG4gICAgICAgICAgICB0aGlzLmV4cGFuZEdyb3VwUm93cyA9IGV4cGFuZEdyb3VwUm93cyA9PT0gdW5kZWZpbmVkID8gdGhpcy5leHBhbmRHcm91cFJvd3M6IGV4cGFuZEdyb3VwUm93cztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5piv5ZCm5Li65b2T5YmN5rS75Yqo55qE6KGo5qC8XHJcbiAgICBwcml2YXRlIGlzQWN0aXZlZCgpIHtcclxuICAgICAgICByZXR1cm4gRG9tSGFuZGxlci5oYXNDbGFzcyh0aGlzLmRnQ29udGFpbmVyLm5hdGl2ZUVsZW1lbnQsIHRoaXMuX2FjdGl2ZV9kYXRhZ3JpZF9jbHMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOa4heeQhuaXoOaViOeahERPTVxyXG4gICAgcHJpdmF0ZSBjbGVhbkRvbSgpIHtcclxuICAgICAgICAvLyDmuIXnkIYgVE9PTC1USVBcclxuICAgICAgICBjb25zdCB0aXBzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmRhdGFncmlkLWNlbGwtdG9vbHRpcCcpO1xyXG4gICAgICAgIGlmICh0aXBzICYmIHRpcHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRpcHMuZm9yRWFjaChuID0+IHtcclxuICAgICAgICAgICAgICAgIG4ucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjZWxsSXNSZWFkT25seShjb2w6IERhdGFDb2x1bW4sIHJvd0RhdGEpIHtcclxuICAgICAgICBsZXQgcmVhZE9ubHkgPSBmYWxzZTtcclxuICAgICAgICBpZiAodGhpcy5kaXNhYmxlUm93KSB7XHJcbiAgICAgICAgICAgIHJlYWRPbmx5ID0gdGhpcy5kaXNhYmxlUm93KHJvd0RhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFyZWFkT25seSkge1xyXG4gICAgICAgICAgICBpZiAoY29sLnJlYWRvbmx5ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY29sLnJlYWRvbmx5ID09PSAnYm9vbGVhbicpIHtcclxuICAgICAgICAgICAgICAgICAgICByZWFkT25seSA9IGNvbC5yZWFkb25seTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGNvbC5yZWFkb25seSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5ID0gY29sLnJlYWRvbmx5KHJvd0RhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZWFkT25seTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJpdmF0ZSBncm91cEZpZWxkQ2hhbmdlZCgpIHtcclxuICAgICAgICB0aGlzLmNvbHVtbnNDaGFuZ2VkKCk7XHJcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ1NlcnZpY2UpIHtcclxuICAgICAgICAgICAgdGhpcy5jaGVja1NldHRpbmdIdHRwKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ1NlcnZpY2Uuc2F2ZVVzZXJDb25maWcodGhpcy5pZCkuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZ3JvdXBGaWVsZENoYW5nZS5lbWl0KHsgbmV3R3JvdXBGaWVsZDogdGhpcy5ncm91cEZpZWxkLCBncmlkOiB0aGlzIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbW92ZUdyb3VwRmllbGQoZmllbGQ6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IGZpZWxkcyA9IHRoaXMuZ3JvdXBGaWVsZC5zcGxpdCgnLCcpO1xyXG4gICAgICAgIGNvbnN0IGRlbElkeCA9IGZpZWxkcy5pbmRleE9mKGZpZWxkKTtcclxuICAgICAgICBpZiAoZGVsSWR4ID4gLTEpIHtcclxuICAgICAgICAgICAgZmllbGRzLnNwbGljZShkZWxJZHgsIDEpLmpvaW4oJywnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5ncm91cEZpZWxkID0gZmllbGRzLmpvaW4oJywnKTtcclxuICAgICAgICB0aGlzLnRvZ2dsZVZpc2libGVDb2x1bW4oW2ZpZWxkXSwgdHJ1ZSk7XHJcbiAgICAgICAgdGhpcy5ncm91cEZpZWxkQ2hhbmdlZCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGNsZWFyQWxsR3JvdXBwaW5nRmllbGQoJGV2ZW50KSB7XHJcbiAgICAgICAgdGhpcy5zaG93TG9hZGluZygpO1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBmaWVsZHMgPSB0aGlzLmdyb3VwRmllbGQuc3BsaXQoJywnKTtcclxuICAgICAgICAgICAgdGhpcy5ncm91cEZpZWxkID0gJyc7XHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlVmlzaWJsZUNvbHVtbihmaWVsZHMsIHRydWUpO1xyXG4gICAgICAgICAgICB0aGlzLmdyb3VwRmllbGRDaGFuZ2VkKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2VMb2FkaW5nKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0R3JvdXBGaWVsZHMoZ3JvdXBGaWVsZHMpIHtcclxuICAgICAgICB0aGlzLmdyb3VwRmllbGQgPSBncm91cEZpZWxkcztcclxuICAgICAgICB0aGlzLmNvbHVtbnNDaGFuZ2VkKCk7XHJcbiAgICB9XHJcblxyXG4gICAgYWN0aXZlRGF0YUdyaWQoYWN0aXZlID0gdHJ1ZSkge1xyXG4gICAgICAgIGNvbnN0IGdyaWRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmYtZGF0YWdyaWQuZGF0YWdyaWQtYWN0aXZlJyk7XHJcbiAgICAgICAgaWYgKGdyaWRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBncmlkcy5mb3JFYWNoKG4gPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIyLnJlbW92ZUNsYXNzKG4sIHRoaXMuX2FjdGl2ZV9kYXRhZ3JpZF9jbHMpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGFjdGl2ZSkge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcjIuYWRkQ2xhc3ModGhpcy5kZ0NvbnRhaW5lci5uYXRpdmVFbGVtZW50LCB0aGlzLl9hY3RpdmVfZGF0YWdyaWRfY2xzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIG9uRGF0YWdyaWRDb250YWluZXJGb2N1cygkZXZlbnQpIHtcclxuICAgICAgICBpZiAoIXRoaXMuZGlzYWJsZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5hY3RpdmVEYXRhR3JpZCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJpdmF0ZSBzZXRTaGFkb3dDb2x1bW5Gb3JGYXN0TW9kZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5mYXN0KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpeGVkTGVmdCA9IHRoaXMuZmxhdENvbHVtbnMuZmlsdGVyKG4gPT4gbi5maXhlZCA9PT0gJ2xlZnQnKTtcclxuICAgICAgICAgICAgY29uc3QgZml4ZWRSaWdodCA9IHRoaXMuZmxhdENvbHVtbnMuZmlsdGVyKG4gPT4gbi5maXhlZCA9PT0gJ3JpZ2h0Jyk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZml4ZWRMZWZ0ICYmIGZpeGVkTGVmdC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGxldCBsZWZ0V2lkdGhUb3RhbCA9IDA7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zaG93Q2hlY2tib3gpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZWZ0V2lkdGhUb3RhbCArPSAzNjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNob3dMaW5lTnVtYmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdFdpZHRoVG90YWwgKz0gdGhpcy5saW5lTnVtYmVyV2lkdGg7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBmaXhlZExlZnQuZm9yRWFjaCgobiwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsZWZ0V2lkdGhUb3RhbCArPSBpbmRleCA/IGZpeGVkTGVmdFtpbmRleCAtIDFdLndpZHRoIDogMDtcclxuICAgICAgICAgICAgICAgICAgICBuLmxlZnQgPSBsZWZ0V2lkdGhUb3RhbDtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGZpeGVkTGVmdFtmaXhlZExlZnQubGVuZ3RoIC0gMV1bJ2xlZnRTaGFkb3dDb2wnXSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5kZnMuZ2V0Q29sdW1uKGZpeGVkTGVmdFtmaXhlZExlZnQubGVuZ3RoIC0gMV0uZmllbGQpWydsZWZ0U2hhZG93Q29sJ10gPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoZml4ZWRSaWdodCAmJiBmaXhlZFJpZ2h0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgZml4ZWRSaWdodFswXVsncmlnaHRTaGFkb3dDb2wnXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBsZXQgcmlnaHRXaWR0aFRvdGFsID0gZml4ZWRSaWdodC5yZWR1Y2UoKHIsIGMpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gciArIGMud2lkdGg7XHJcbiAgICAgICAgICAgICAgICB9LCAwKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmaXhlZFJpZ2h0LmZvckVhY2goKG4sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmlnaHRXaWR0aFRvdGFsIC09IG4ud2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgbi5yaWdodCA9IHJpZ2h0V2lkdGhUb3RhbDtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuZGZzLmdldENvbHVtbihmaXhlZFJpZ2h0WzBdLmZpZWxkKVsncmlnaHRTaGFkb3dDb2wnXSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5Y2V5YWD5a+56b2Q5pa55byP5qC35byP5Yqo5oCB55Sf5oiQXHJcbiAgICBwcml2YXRlIHNldENlbGxTdHlsZSgpIHtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmZsYXRDb2x1bW5zIHx8ICF0aGlzLmZsYXRDb2x1bW5zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBjc3NhcnIgPSBbXTtcclxuXHJcbiAgICAgICAgY29uc3QgIHZlcnRpY2FsQWxpZ24gPSAoY29sdW1uKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCB2YSA9ICdjZW50ZXInO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGNvbHVtbi52YWxpZ24pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ3RvcCc6XHJcbiAgICAgICAgICAgICAgICAgICAgdmEgPSAnZmxleC1zdGFydCc7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdib3R0b20nOlxyXG4gICAgICAgICAgICAgICAgICAgIHZhID0gJ2ZsZXgtZW5kJztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgdmEgPSAnY2VudGVyJztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdmE7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY29uc3QgaG9yaXpvbnRhbEFsaWduID0gKGNvbHVtbikgPT4ge1xyXG4gICAgICAgICAgICBsZXQgaGEgPSAnZmxleC1zdGFydCc7XHJcbiAgICAgICAgICAgIGlmIChjb2x1bW4uYWxpZ24gPT09ICdyaWdodCcpIHtcclxuICAgICAgICAgICAgICAgIGhhID0gJ2ZsZXgtZW5kJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChjb2x1bW4uYWxpZ24gPT09ICdjZW50ZXInKSB7XHJcbiAgICAgICAgICAgICAgICBoYSA9ICdjZW50ZXInO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBoYTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLnNldFNoYWRvd0NvbHVtbkZvckZhc3RNb2RlKCk7XHJcblxyXG4gICAgICAgIHRoaXMuZmxhdENvbHVtbnMuZm9yRWFjaChjb2wgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjc3MgPSBgJHt0aGlzLmN1c3RvbVN0eWxlS2V5KCl9IC5jZWxsLXRleHQtYWxpZ25fXyR7Y29sLmZpZWxkfSB7YWxpZ24taXRlbXM6ICR7dmVydGljYWxBbGlnbihjb2wpfSwganVzdGlmeS1jb250ZW50OiAke2hvcml6b250YWxBbGlnbihjb2wpfX1gO1xyXG4gICAgICAgICAgICBjc3NhcnIucHVzaChjc3MpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuZmFzdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvbC5maXhlZCA9PT0gJ2xlZnQnIHx8IGNvbC5maXhlZCA9PT0gJ3JpZ2h0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBmaXhlZCA9IGAke3RoaXMuY3VzdG9tU3R5bGVLZXkoKX0gLmYtZGF0YWdyaWQtZmFzdF9fZml4ZWQtJHtjb2wuZml4ZWR9W2ZpZWxkPVwiJHtjb2wuZmllbGR9XCJde2A7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbC5maXhlZCA9PT0gJ2xlZnQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpeGVkICs9IGBsZWZ0OiAke2NvbC5sZWZ0fXB4fWA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29sLmZpeGVkID09PSAncmlnaHQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpeGVkICs9IGByaWdodDogJHtjb2wucmlnaHR9cHh9YDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNzc2Fyci5wdXNoKGZpeGVkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmRncy5hcHBlbmRDc3NSdWxlcyhjc3NhcnIpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdXBkYXRlRml4ZWRDb2x1bW5Dc3NGb3JGYXN0TW9kZShjb2w6IERhdGFDb2x1bW4pIHtcclxuICAgICAgICBpZiAodGhpcy5mYXN0KSB7XHJcbiAgICAgICAgICAgIC8vIHVwZGF0ZSBjc3MuXHJcbiAgICAgICAgICAgIGNvbnN0IGNvbEluZGV4ID0gdGhpcy5mbGF0Q29sdW1ucy5maW5kSW5kZXgobiA9PiBuLmZpZWxkID09PSBjb2wuZmllbGQpO1xyXG4gICAgICAgICAgICBjb25zdCBuZXh0Q29sdW1uID0gdGhpcy5mbGF0Q29sdW1uc1tjb2xJbmRleCArIDFdO1xyXG4gICAgICAgICAgICB0aGlzLnNldFNoYWRvd0NvbHVtbkZvckZhc3RNb2RlKCk7XHJcbiAgICAgICAgICAgIGlmIChuZXh0Q29sdW1uICYmIG5leHRDb2x1bW4uZml4ZWQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJ1bGVOYW1lID0gIGAke3RoaXMuY3VzdG9tU3R5bGVLZXkoKX0gLmYtZGF0YWdyaWQtZmFzdF9fZml4ZWQtJHtuZXh0Q29sdW1uLmZpeGVkfVtmaWVsZD1cIiR7bmV4dENvbHVtbi5maWVsZH1cIl1gO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3R5bGVjc3MgPSBydWxlTmFtZSArICd7JyArIG5leHRDb2x1bW4uZml4ZWQgKyAnOicgKyBuZXh0Q29sdW1uW25leHRDb2x1bW4uZml4ZWRdICsgJ3B4fSc7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRncy5hcHBlbmRDc3NSdWxlcyhbc3R5bGVjc3NdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBleHBhbmRHcm91cFJvdyhncm91cFJvd0luZGV4OiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLmRncy50b2dnbGVHcm91cFJvdyQuZW1pdCh7IGV4cGFuZDogdHJ1ZSwgZ3JvdXBSb3dJbmRleCB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb2xsYXBzZUdyb3VwUm93KGdyb3VwUm93SW5kZXg6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuZGdzLnRvZ2dsZUdyb3VwUm93JC5lbWl0KHsgZXhwYW5kOiBmYWxzZSwgZ3JvdXBSb3dJbmRleCB9KTtcclxuICAgIH1cclxuICAgXHJcblxyXG4gICAgZXhwYW5kQWxsR3JvdXBSb3dzKCkge1xyXG4gICAgICAgIHRoaXMuZGdzLnRvZ2dsZUFsbEdyb3VwUm93cyQuZW1pdCh7IGV4cGFuZDogdHJ1ZSB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb2xsYXBzZUFsbEdyb3VwUm93cygpIHtcclxuICAgICAgICB0aGlzLmRncy50b2dnbGVBbGxHcm91cFJvd3MkLmVtaXQoeyBleHBhbmQ6IGZhbHNlIH0pO1xyXG4gICAgfVxyXG59XHJcbiJdfQ==