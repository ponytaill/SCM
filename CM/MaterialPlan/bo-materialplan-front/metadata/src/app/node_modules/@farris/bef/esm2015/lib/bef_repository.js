/**
 * @fileoverview added by tsickle
 * Generated from: lib/bef_repository.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/*
 * @Author: Witt
 * @Date: 2018-10-11 17:34:26
 * @Last Modified by: aalizzwell
 * @Last Modified time: 2019-09-11 17:23:15
 * @todo
 * 1、修改command-services中的DataService，调用新的API
 * 2、移除DeprecatedBefRepository，启用新API
 * 3、修改Repository抽象类，添加新API
 * 4、对path做处理，修改为数组
 */
import { Injectable, Injector } from '@angular/core';
import { MetadataUtil, AppContext } from '@farris/devkit';
import { NG_VARIABLE } from './decorators';
import { DeprecatedBefRepository } from './deprecated/deprecated_bef_repository';
import { BefEntityManager } from './bef_entity_manager';
import { BefVariableManager } from './bef_variable_manager';
import { BefDataService } from './bef_data_service';
import { BefProxyExtend } from './bef_proxy_extend';
import { BE_SERVER_URI_TOKEN } from './tokens';
/**
 * BEF实体仓储
 * \@description
 * 负责与后端的业务实体框架交互，管理业务实体数据 \
 * apiUri示例如下：api/scm/sd/v1.0/empservice，前后均不带斜杠
 * @abstract
 * @template T
 */
class BefRepository extends DeprecatedBefRepository {
    /**
     * @param {?} injector 依赖注入器
     */
    constructor(injector) {
        super();
        this.injector = injector;
        if (this.entityCollection) {
            // 初始化实体管理器
            this.entityManager = new BefEntityManager(this.entityCollection);
        }
        // 初始化变量管理器
        this.appContext = this.injector.get(AppContext);
        /** @type {?} */
        const ngVariables = MetadataUtil.getPropsMetadatasByName(this.constructor, NG_VARIABLE);
        this.variableManager = new BefVariableManager(this.appContext, ngVariables, this.injector);
        // 初始化DataService
        this.dataService = new BefDataService(this.injector, this);
        this.serverUri = injector.get(BE_SERVER_URI_TOKEN);
    }
    /**
     * \@member {BefProxy} proxy
     * \@description 每一个BefRepository都需要一个Bef代理，用来处理http请求
     * @param {?} value
     * @return {?}
     */
    set proxy(value) {
        this.befProxy = value;
        this.befProxy.setProxyExtend(new BefProxyExtend(this));
    }
    /**
     * @return {?}
     */
    get proxy() {
        return this.befProxy;
    }
    /**
     * 获取实体列表
     * \@description
     * 过滤条件的示例如下：（一般由筛选条件等组件生成，直接获取并传值即可）
     * ```json
     * [
     *   {
     *     "FilterField": "DomainID.DomainID_name",
     *     "Compare": 0,
     *     "Value": "人力资源部",
     *     "Relation": 1,
     *     "Expresstype": 0,
     *     "Lbracket": "(",
     *     "Rbracket": ")"
     *   }, {
     *     "FilterField": "BillDate",
     *     "Compare": 3,
     *     "Value": "2021-09-03",
     *     "Relation": 1,
     *     "Expresstype": 0
     *   }, {
     *     "FilterField": "BillDate",
     *     "Compare": 5,
     *     "Value": "2021-10-05",
     *     "Relation": 1,
     *     "Expresstype": 0
     *   }
     * ]
     * ```
     * 使用示例：
     * ```typescript
     * // 一般会以字符串的形式获取到过滤和排序条件，所以需要进行解析
     * const query$ = this.repository.getEntities(JSON.parse(filter), JSON.parse(sort), null, null);
     * ```
     * @param {?} filter 过滤条件
     * @param {?} sort 排序条件
     * @param {?} pageSize 分页大小
     * @param {?} pageIndex 页码
     * @return {?}
     */
    getEntities(filter, sort, pageSize, pageIndex) {
        return this.dataService.getList(filter, sort, pageSize, pageIndex);
    }
    /**
     * 获取实体列表
     * \@description
     * 与getEntities方法功能相近，用法相同 \
     * 区别是在发送请求时，本方法会将查询条件放到请求的body中，而getEntities方法会将查询条件扩展到请求的url上
     * @see {\@link getEntities}
     * @param {?=} filter 过滤条件
     * @param {?=} sorts 排序条件
     * @param {?=} pageSize 分页大小
     * @param {?=} pageIndex 页码
     * @return {?}
     */
    filter(filter = [], sorts = [], pageSize, pageIndex) {
        return this.dataService.filter(filter, sorts, pageSize, pageIndex);
    }
    // #endregion
    /**
     * 分页查询从表/从从表数据
     * \@todo 目前并未应用排序和过滤条件
     * \@description
     * 通用路径格式为：['id:主表主键值', '主表实体属性名', 'id:从表主键值', '从表实体属性名'] \
     * 通用路径的主键值前必须含有冒号，冒号之前的"id"则可以省略（因为通用路径除了指向从表，还可以指向从表关联等等，所以必须通过冒号来区别主键值和属性名） \
     * 通用路径示例：['id:Ted', 'accounts', 'id:10816', 'logs'] 指向accounts从表下的logs从从表 \
     * paths参数遵从通用路径的格式，并且指向一个从表（或者从从表） \
     * 使用示例：
     * ```typescript
     * // 将绑定路径下当前行的路径转换为Entity可识别的通用路径
     * const fullPaths = EntityPathConverter.toEntityPathArray(this.viewModel.bindingPath, this.bindingData);
     * const paths = fullPaths.slice(0, fullPaths.length - 1);
     * const bindingPaths = this.viewModel.bindingPath.split('/').filter(item => item);
     * const bindingData = this.viewModel.bindingData;
     * let nodeCode = bindingPaths[bindingPaths.length - 1];
     * nodeCode = nodeCode.substr(0, nodeCode.length - 1);
     * // 获取上级实体
     * const parentPaths = bindingPaths.slice(0, bindingPaths.length - 1);
     * const parentObject = bindingData.getValue(parentPaths) as BindingObject;
     * if (!parentObject) {
     *   throw new Error('上级实体不存在');
     * }
     * const configPath = `/${nodeCode}_${parentObject[parentObject.primaryKey]}`;
     * // 获取绑定路径对应的分页信息
     * const { pageIndex = 1, pageSize } = this.repository.entityCollection.getPaginationConfigByPath(configPath);
     * const request$ = this.repository.queryChild(paths, pageIndex, pageSize);
     * ```
     * @param {?} paths 通用路径
     * @param {?} pageIndex 页码
     * @param {?} pageSize 分页大小
     * @param {?=} filter 过滤条件
     * @param {?=} sort 排序
     * @return {?}
     */
    queryChild(paths, pageIndex, pageSize, filter, sort) {
        return this.dataService.queryChild(paths, pageIndex, pageSize, filter, sort);
    }
    /**
     * 获取主键为id的实体
     * \@description
     * 获取主表上对应主键的实体，调用该方法成功后实体仓库中仅包含这一个实体 \
     * 如果仅仅想要将对应id的实体同步为服务器上的值，请调用 {\@link updateEntityById} 方法
     * @param {?} id 主表实体主键
     * @return {?}
     */
    getEntityById(id) {
        return this.dataService.getById(id);
    }
    /**
     * 更新实体数据
     * \@description
     * 重新从服务器获取主表上对应主键的实体数据 \
     * 使用示例：
     * ```typescript
     * const rootDataId = this.bindingData.list.currentId;
     * return this.repository.updateEntityById(rootDataId);
     * ```
     * @param {?} id 主表实体主键
     * @return {?}
     */
    updateEntityById(id) {
        return this.dataService.updateById(id);
    }
    /**
     * 更新实体数据并加锁
     * \@description
     * 使用示例：
     * ```typescript
     * id = this.bindingData.list.currentId;  // 编辑当前行
     * const edit$ = this.repository.editEntityById(id);
     * ```
     * @param {?} id 主表实体主键
     * @return {?}
     */
    editEntityById(id) {
        return this.dataService.editById(id);
    }
    /**
     * 创建实体
     * \@description
     * 请求创建一个新的实体，并加载到实体仓库（加载后仓库中只会有这一个实体，适用于卡片） \
     * 使用示例：
     * ```typescript
     * // 在创建新实体后进入编辑状态
     * const create$ = this.repository.createEntity();
     * create$.pipe(
     *   tap(() => {
     *       EditStateUtil.setEditState(this.frameContext, lastModifiedId);
     *   })
     * );
     * ```
     * @param {?=} defaultValue 默认值，JSON对象
     * @return {?}
     */
    createEntity(defaultValue) {
        return this.dataService.create(defaultValue);
    }
    /**
     * 追加实体
     * \@description 请求创建一个新的实体，并追加到实体仓库（适用于列表）
     * @param {?=} defaultValue 默认值
     * @return {?}
     */
    appendEntity(defaultValue) {
        return this.dataService.append(defaultValue);
    }
    /**
     * 创建并插入新实体（向主表插入）
     * \@description
     * 关于插入位置，可选值：1或-1，1代表在当前行后，-1代表在当前行前
     * @param {?} position 插入位置
     * @param {?=} defaultValue 默认值
     * @return {?}
     */
    insert(position, defaultValue) {
        return this.dataService.insert(position, defaultValue);
    }
    /**
     * 创建子实体并插入到指定位置（向从表或从从表插入）
     * \@description
     * 关于父路径格式，从表形如："/1/edus"，从从表形如："/1/edus/12/grades" \
     * 父路径是由实体主键值和实体属性名成对拼接而成的字符串（用斜杠分隔），指向要插入的那张表 \
     * 父路径与实体通用路径是相似的，区别主要是格式上的不同，父路径是字符串而不是数组，主键值前面不需要加冒号，父路径必须指向从表而实体通用路径还可以指向实体的普通属性或者关联 \
     * 插入位置参考 {\@link insert} \
     * 使用示例：
     * ```typescript
     * // 我们可以通过bindingPath以及bindingData计算拼接出当前行所属从表的父路径
     * const append$ = this.repository.insertByPath(path, position);
     * ```
     * @param {?} path 父路径
     * @param {?} position 插入位置
     * @return {?}
     */
    insertByPath(path, position) {
        return this.dataService.insertByPath(path, position);
    }
    /**
     * 创建子实体并追加到末尾
     * \@description
     * 父路径格式参考 {\@link insertByPath}
     * @param {?} fpath 父路径
     * @return {?}
     */
    appendEntityByPath(fpath) {
        return this.dataService.appendByPath(fpath);
    }
    /**
     * 根据id删除实体
     * \@description
     * 如果ifSave传递为false，则会添加一个删除变更，等待以后保存
     * @param {?} id 主表实体主键
     * @param {?=} ifSave 是否保存，可选，默认为true
     * @return {?}
     */
    removeEntityById(id, ifSave) {
        return this.dataService.removeById(id, ifSave);
    }
    /**
     * 根据id删除实体并执行保存
     * @param {?} id 主表实体主键
     * @return {?}
     */
    removeEntityAndSaveById(id) {
        return this.dataService.removeAndSaveById(id);
    }
    /**
     * 根据id删除父路径下子表中的实体
     * \@description
     * 父路径格式参考 {\@link insertByPath}
     * @param {?} fpath 父路径
     * @param {?} id 实体主键
     * @return {?}
     */
    removeEntityByPath(fpath, id) {
        return this.dataService.removeByPath(fpath, id);
    }
    /**
     * 根据ids批量删除实体
     * @param {?} ids ids
     * @param {?=} ifSave 是否保存(默认为false)
     * @return {?}
     */
    batchRemove(ids, ifSave = false) {
        return this.dataService.batchRemove(ids, ifSave);
    }
    /**
     * 批量删除子级实体
     * \@description
     * ids中各个id之间以逗号分隔，父路径格式参考 {\@link insertByPath} \
     * 使用示例：
     * ```typescript
     * // ids字符串可以从表单变量UIState中获取，列表组件的勾选状态变化后会自动更新表单变量
     * const remove$ = this.repository.batchRemoveByPath(path, ids);
     * ```
     * @param {?} fPath 父路径
     * @param {?} ids 子级id集合
     * @return {?}
     */
    batchRemoveByPath(fPath, ids) {
        return this.dataService.batchRemoveByPath(fPath, ids);
    }
    /**
     * 保存主键为id的实体
     * \@description
     * 调用该方法会应用id对应实体上的变更 \
     * ```typescript
     * const id = this.bindingData.list.currentId as string;
     * const save$ = this.repository.saveEntityById(id);  // 向服务器提交变更并应用
     * ```
     * @param {?} id 主表实体主键
     * @return {?}
     */
    saveEntityById(id) {
        return this.dataService.applyChangesById(id);
    }
    /**
     * 批量保存
     * \@description
     * 应用所有变更，比如调用了 {\@link removeEntityById} 且未保存则可以通过此方法保存 \
     * 在列表服务中，我们可以通过调用该方法实现列表数据的批量保存
     * @return {?}
     */
    saveEntities() {
        return this.dataService.applyChanges();
    }
    /**
     * 取消实体变更
     * \@description 清空所有实体变更，不希望保存变更时调用此方法
     * @return {?}
     */
    cancelEntityChanges() {
        return this.dataService.cancelChanges();
    }
    /**
     * 批量新增从表/从从表数据
     * \@description
     * 后端接口只支持批量新增子表，批量新增主表目前不支持
     * @param {?} path 父路径，参考 {\@link insertByPath}
     * @param {?} defaultValues 默认实体数据数组
     * @return {?}
     */
    batchAppendByPath(path, defaultValues) {
        return this.dataService.batchAppendByPath(path, defaultValues);
    }
    /**
     * 批量新增主表数据
     * @param {?} defaultValues 默认实体数据数组
     * @return {?}
     */
    batchAppend(defaultValues) {
        return this.dataService.batchAppend(defaultValues);
    }
    /**
     * 清空Repositoy内的数据和变量
     * \@description 清空所有实体、变量，并清空BeSessionId
     * @return {?}
     */
    reset() {
        this.entityManager.reset();
        this.variableManager.reset();
        this.restService.sessionService.clearBeSessionId();
    }
    /**
     * 获取Injector（外部请勿使用）
     * \@internal
     * @return {?}
     */
    getInjector() {
        return this.injector;
    }
    /**
     * 清空vo变量变更
     * @param {?} changeDetail
     * @return {?}
     */
    clearAllVariableChanges(changeDetail) {
        this.variableManager.clearChangeDetail(changeDetail);
    }
}
BefRepository.decorators = [
    { type: Injectable }
];
/** @nocollapse */
BefRepository.ctorParameters = () => [
    { type: Injector }
];
if (false) {
    /**
     * @type {?}
     * @private
     */
    BefRepository.prototype.befProxy;
    /**
     * 实体管理器
     * \@internal
     * @type {?}
     */
    BefRepository.prototype.entityManager;
    /**
     * 变量管理器
     * \@internal
     * @type {?}
     */
    BefRepository.prototype.variableManager;
    /** @type {?} */
    BefRepository.prototype.appContext;
    /**
     * 取数服务
     * \@internal
     * @type {?}
     * @protected
     */
    BefRepository.prototype.dataService;
    /** @type {?} */
    BefRepository.prototype.serverUri;
    /**
     * @type {?}
     * @private
     */
    BefRepository.prototype.injector;
}
export { BefRepository };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmVmX3JlcG9zaXRvcnkuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL2JlZi8iLCJzb3VyY2VzIjpbImxpYi9iZWZfcmVwb3NpdG9yeS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBV0EsT0FBTyxFQUFFLFVBQVUsRUFBRSxRQUFRLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFHckQsT0FBTyxFQUFFLFlBQVksRUFBVSxVQUFVLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUVsRSxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sY0FBYyxDQUFDO0FBQzNDLE9BQU8sRUFBRSx1QkFBdUIsRUFBRSxNQUFNLHdDQUF3QyxDQUFDO0FBQ2pGLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBQ3hELE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBQzVELE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUVwRCxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUFDcEQsT0FBTyxFQUFFLG1CQUFtQixFQUFFLE1BQU0sVUFBVSxDQUFDOzs7Ozs7Ozs7QUFRL0MsTUFDZSxhQUFnQyxTQUFRLHVCQUEwQjs7OztJQXFDL0UsWUFBb0IsUUFBa0I7UUFDcEMsS0FBSyxFQUFFLENBQUM7UUFEVSxhQUFRLEdBQVIsUUFBUSxDQUFVO1FBR3BDLElBQUksSUFBSSxDQUFDLGdCQUFnQixFQUFFO1lBQ3pCLFdBQVc7WUFDWCxJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksZ0JBQWdCLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLENBQUM7U0FDbEU7UUFFRCxXQUFXO1FBQ1gsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBYSxVQUFVLENBQUMsQ0FBQzs7Y0FDdEQsV0FBVyxHQUFHLFlBQVksQ0FBQyx1QkFBdUIsQ0FBQyxJ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RUFBRSxDQUFDO0lBQzFDLENBQUM7Ozs7Ozs7OztJQVNNLGlCQUFpQixDQUFDLElBQVksRUFBRSxhQUF5QjtRQUM5RCxPQUFPLElBQUksQ0FBQyxXQUFXLENBQUMsaUJBQWlCLENBQUMsSUFBSSxFQUFFLGFBQWEsQ0FBQyxDQUFDO0lBQ2pFLENBQUM7Ozs7OztJQUtNLFdBQVcsQ0FBQyxhQUF5QjtRQUMxQyxPQUFPLElBQUksQ0FBQyxXQUFXLENBQUMsV0FBVyxDQUFDLGFBQWEsQ0FBQyxDQUFDO0lBQ3JELENBQUM7Ozs7OztJQUtNLEtBQUs7UUFDVixJQUFJLENBQUMsYUFBYSxDQUFDLEtBQUssRUFBRSxDQUFDO1FBQzNCLElBQUksQ0FBQyxlQUFlLENBQUMsS0FBSyxFQUFFLENBQUM7UUFDN0IsSUFBSSxDQUFDLFdBQVcsQ0FBQyxjQUFjLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztJQUNyRCxDQUFDOzs7Ozs7SUFNTSxXQUFXO1FBQ2hCLE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQztJQUN2QixDQUFDOzs7Ozs7SUFJTSx1QkFBdUIsQ0FBQyxZQUEwQjtRQUN2RCxJQUFJLENBQUMsZUFBZSxDQUFDLGlCQUFpQixDQUFDLFlBQVksQ0FBQyxDQUFDO0lBQ3ZELENBQUM7OztZQTVYRixVQUFVOzs7O1lBcEJVLFFBQVE7Ozs7Ozs7SUF1QjNCLGlDQUEyQjs7Ozs7O0lBZ0IzQixzQ0FBMEM7Ozs7OztJQU0xQyx3Q0FBMkM7O0lBRTNDLG1DQUE4Qjs7Ozs7OztJQUs5QixvQ0FBeUM7O0lBRXpDLGtDQUF5Qjs7Ozs7SUFJYixpQ0FBMEI7O0FBMFZ4QyxPQUFPLEVBQUUsYUFBYSxFQUFFLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxyXG4gKiBAQXV0aG9yOiBXaXR0XHJcbiAqIEBEYXRlOiAyMDE4LTEwLTExIDE3OjM0OjI2XHJcbiAqIEBMYXN0IE1vZGlmaWVkIGJ5OiBhYWxpenp3ZWxsXHJcbiAqIEBMYXN0IE1vZGlmaWVkIHRpbWU6IDIwMTktMDktMTEgMTc6MjM6MTVcclxuICogQHRvZG9cclxuICogMeOAgeS/ruaUuWNvbW1hbmQtc2VydmljZXPkuK3nmoREYXRhU2VydmljZe+8jOiwg+eUqOaWsOeahEFQSVxyXG4gKiAy44CB56e76ZmkRGVwcmVjYXRlZEJlZlJlcG9zaXRvcnnvvIzlkK/nlKjmlrBBUElcclxuICogM+OAgeS/ruaUuVJlcG9zaXRvcnnmir3osaHnsbvvvIzmt7vliqDmlrBBUElcclxuICogNOOAgeWvuXBhdGjlgZrlpITnkIbvvIzkv67mlLnkuLrmlbDnu4RcclxuICovXHJcbmltcG9ydCB7IEluamVjdGFibGUsIEluamVjdG9yIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICdyeGpzJztcclxuXHJcbmltcG9ydCB7IE1ldGFkYXRhVXRpbCwgRW50aXR5LCBBcHBDb250ZXh0IH0gZnJvbSAnQGZhcnJpcy9kZXZraXQnO1xyXG5cclxuaW1wb3J0IHsgTkdfVkFSSUFCTEUgfSBmcm9tICcuL2RlY29yYXRvcnMnO1xyXG5pbXBvcnQgeyBEZXByZWNhdGVkQmVmUmVwb3NpdG9yeSB9IGZyb20gJy4vZGVwcmVjYXRlZC9kZXByZWNhdGVkX2JlZl9yZXBvc2l0b3J5JztcclxuaW1wb3J0IHsgQmVmRW50aXR5TWFuYWdlciB9IGZyb20gJy4vYmVmX2VudGl0eV9tYW5hZ2VyJztcclxuaW1wb3J0IHsgQmVmVmFyaWFibGVNYW5hZ2VyIH0gZnJvbSAnLi9iZWZfdmFyaWFibGVfbWFuYWdlcic7XHJcbmltcG9ydCB7IEJlZkRhdGFTZXJ2aWNlIH0gZnJvbSAnLi9iZWZfZGF0YV9zZXJ2aWNlJztcclxuaW1wb3J0IHsgQmVmUHJveHkgfSBmcm9tICcuL2JlZl9wcm94eSc7XHJcbmltcG9ydCB7IEJlZlByb3h5RXh0ZW5kIH0gZnJvbSAnLi9iZWZfcHJveHlfZXh0ZW5kJztcclxuaW1wb3J0IHsgQkVfU0VSVkVSX1VSSV9UT0tFTiB9IGZyb20gJy4vdG9rZW5zJztcclxuaW1wb3J0IHsgQ2hhbmdlRGV0YWlsIH0gZnJvbSAnLi90eXBlcyc7XHJcbi8qKlxyXG4gKiBCRUblrp7kvZPku5PlgqhcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIOi0n+i0o+S4juWQjuerr+eahOS4muWKoeWunuS9k+ahhuaetuS6pOS6ku+8jOeuoeeQhuS4muWKoeWunuS9k+aVsOaNriBcXFxyXG4gKiBhcGlVcmnnpLrkvovlpoLkuIvvvJphcGkvc2NtL3NkL3YxLjAvZW1wc2VydmljZe+8jOWJjeWQjuWdh+S4jeW4puaWnOadoFxyXG4gKi9cclxuQEluamVjdGFibGUoKVxyXG5hYnN0cmFjdCBjbGFzcyBCZWZSZXBvc2l0b3J5PFQgZXh0ZW5kcyBFbnRpdHk+IGV4dGVuZHMgRGVwcmVjYXRlZEJlZlJlcG9zaXRvcnk8VD4ge1xyXG5cclxuICBwcml2YXRlIGJlZlByb3h5OiBCZWZQcm94eTtcclxuICAvKipcclxuICAgKiBAbWVtYmVyIHtCZWZQcm94eX0gcHJveHlcclxuICAgKiBAZGVzY3JpcHRpb24g5q+P5LiA5LiqQmVmUmVwb3NpdG9yeemDvemcgOimgeS4gOS4qkJlZuS7o+eQhu+8jOeUqOadpeWkhOeQhmh0dHDor7fmsYJcclxuICAgKi9cclxuICBwdWJsaWMgc2V0IHByb3h5KHZhbHVlKSB7XHJcbiAgICB0aGlzLmJlZlByb3h5ID0gdmFsdWU7XHJcbiAgICB0aGlzLmJlZlByb3h5LnNldFByb3h5RXh0ZW5kKG5ldyBCZWZQcm94eUV4dGVuZCh0aGlzKSk7XHJcbiAgfVxyXG4gIHB1YmxpYyBnZXQgcHJveHkoKTogQmVmUHJveHkge1xyXG4gICAgcmV0dXJuIHRoaXMuYmVmUHJveHk7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIOWunuS9k+euoeeQhuWZqFxyXG4gICAqIEBpbnRlcm5hbFxyXG4gICAqL1xyXG4gIHB1YmxpYyBlbnRpdHlNYW5hZ2VyOiBCZWZFbnRpdHlNYW5hZ2VyPFQ+O1xyXG5cclxuICAvKipcclxuICAgKiDlj5jph4/nrqHnkIblmahcclxuICAgKiBAaW50ZXJuYWxcclxuICAgKi9cclxuICBwdWJsaWMgdmFyaWFibGVNYW5hZ2VyOiBCZWZWYXJpYWJsZU1hbmFnZXI7XHJcblxyXG4gIHB1YmxpYyBhcHBDb250ZXh0OiBBcHBDb250ZXh0O1xyXG4gIC8qKlxyXG4gICAqIOWPluaVsOacjeWKoVxyXG4gICAqIEBpbnRlcm5hbFxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBkYXRhU2VydmljZTogQmVmRGF0YVNlcnZpY2U8VD47XHJcblxyXG4gIHB1YmxpYyBzZXJ2ZXJVcmk6IHN0cmluZztcclxuICAvKipcclxuICAgKiBAcGFyYW0gaW5qZWN0b3Ig5L6d6LWW5rOo5YWl5ZmoXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBpbmplY3RvcjogSW5qZWN0b3IpIHtcclxuICAgIHN1cGVyKCk7XHJcblxyXG4gICAgaWYgKHRoaXMuZW50aXR5Q29sbGVjdGlvbikge1xyXG4gICAgICAvLyDliJ3lp4vljJblrp7kvZPnrqHnkIblmahcclxuICAgICAgdGhpcy5lbnRpdHlNYW5hZ2VyID0gbmV3IEJlZkVudGl0eU1hbmFnZXIodGhpcy5lbnRpdHlDb2xsZWN0aW9uKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDliJ3lp4vljJblj5jph4/nrqHnkIblmahcclxuICAgIHRoaXMuYXBwQ29udGV4dCA9IHRoaXMuaW5qZWN0b3IuZ2V0PEFwcENvbnRleHQ+KEFwcENvbnRleHQpO1xyXG4gICAgY29uc3QgbmdWYXJpYWJsZXMgPSBNZXRhZGF0YVV0aWwuZ2V0UHJvcHNNZXRhZGF0YXNCeU5hbWUodGhpcy5jb25zdHJ1Y3RvciwgTkdfVkFSSUFCTEUpO1xyXG4gICAgdGhpcy52YXJpYWJsZU1hbmFnZXIgPSBuZXcgQmVmVmFyaWFibGVNYW5hZ2VyKHRoaXMuYXBwQ29udGV4dCwgbmdWYXJpYWJsZXMsIHRoaXMuaW5qZWN0b3IpO1xyXG5cclxuICAgIC8vIOWIneWni+WMlkRhdGFTZXJ2aWNlXHJcbiAgICB0aGlzLmRhdGFTZXJ2aWNlID0gbmV3IEJlZkRhdGFTZXJ2aWNlKHRoaXMuaW5qZWN0b3IsIHRoaXMpO1xyXG4gICAgdGhpcy5zZXJ2ZXJVcmkgPSBpbmplY3Rvci5nZXQ8c3RyaW5nPihCRV9TRVJWRVJfVVJJX1RPS0VOKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiOt+WPluWunuS9k+WIl+ihqFxyXG4gICAqIEBwYXJhbSBmaWx0ZXIg6L+H5ruk5p2h5Lu2XHJcbiAgICogQHBhcmFtIHNvcnQg5o6S5bqP5p2h5Lu2XHJcbiAgICogQHBhcmFtIHBhZ2VTaXplIOWIhumhteWkp+Wwj1xyXG4gICAqIEBwYXJhbSBwYWdlSW5kZXgg6aG156CBXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICog6L+H5ruk5p2h5Lu255qE56S65L6L5aaC5LiL77ya77yI5LiA6Iis55Sx562b6YCJ5p2h5Lu2562J57uE5Lu255Sf5oiQ77yM55u05o6l6I635Y+W5bm25Lyg5YC85Y2z5Y+v77yJXHJcbiAgICogYGBganNvblxyXG4gICAqIFtcclxuICAgKiAgIHtcclxuICAgKiAgICAgXCJGaWx0ZXJGaWVsZFwiOiBcIkRvbWFpbklELkRvbWFpbklEX25hbWVcIixcclxuICAgKiAgICAgXCJDb21wYXJlXCI6IDAsXHJcbiAgICogICAgIFwiVmFsdWVcIjogXCLkurrlipvotYTmupDpg6hcIixcclxuICAgKiAgICAgXCJSZWxhdGlvblwiOiAxLFxyXG4gICAqICAgICBcIkV4cHJlc3N0eXBlXCI6IDAsXHJcbiAgICogICAgIFwiTGJyYWNrZXRcIjogXCIoXCIsXHJcbiAgICogICAgIFwiUmJyYWNrZXRcIjogXCIpXCJcclxuICAgKiAgIH0sIHtcclxuICAgKiAgICAgXCJGaWx0ZXJGaWVsZFwiOiBcIkJpbGxEYXRlXCIsXHJcbiAgICogICAgIFwiQ29tcGFyZVwiOiAzLFxyXG4gICAqICAgICBcIlZhbHVlXCI6IFwiMjAyMS0wOS0wM1wiLFxyXG4gICAqICAgICBcIlJlbGF0aW9uXCI6IDEsXHJcbiAgICogICAgIFwiRXhwcmVzc3R5cGVcIjogMFxyXG4gICAqICAgfSwge1xyXG4gICAqICAgICBcIkZpbHRlckZpZWxkXCI6IFwiQmlsbERhdGVcIixcclxuICAgKiAgICAgXCJDb21wYXJlXCI6IDUsXHJcbiAgICogICAgIFwiVmFsdWVcIjogXCIyMDIxLTEwLTA1XCIsXHJcbiAgICogICAgIFwiUmVsYXRpb25cIjogMSxcclxuICAgKiAgICAgXCJFeHByZXNzdHlwZVwiOiAwXHJcbiAgICogICB9XHJcbiAgICogXVxyXG4gICAqIGBgYFxyXG4gICAqIOS9v+eUqOekuuS+i++8mlxyXG4gICAqIGBgYHR5cGVzY3JpcHRcclxuICAgKiAvLyDkuIDoiKzkvJrku6XlrZfnrKbkuLLnmoTlvaLlvI/ojrflj5bliLDov4fmu6TlkozmjpLluo/mnaHku7bvvIzmiYDku6XpnIDopoHov5vooYzop6PmnpBcclxuICAgKiBjb25zdCBxdWVyeSQgPSB0aGlzLnJlcG9zaXRvcnkuZ2V0RW50aXRpZXMoSlNPTi5wYXJzZShmaWx0ZXIpLCBKU09OLnBhcnNlKHNvcnQpLCBudWxsLCBudWxsKTtcclxuICAgKiBgYGBcclxuICAgKi9cclxuICBwdWJsaWMgZ2V0RW50aXRpZXMoZmlsdGVyOiBhbnlbXSwgc29ydDogYW55W10sIHBhZ2VTaXplOiBudW1iZXIgfCBudWxsLCBwYWdlSW5kZXg6IG51bWJlciB8IG51bGwpOiBPYnNlcnZhYmxlPFRbXT4ge1xyXG4gICAgcmV0dXJuIHRoaXMuZGF0YVNlcnZpY2UuZ2V0TGlzdChmaWx0ZXIsIHNvcnQsIHBhZ2VTaXplLCBwYWdlSW5kZXgpO1xyXG4gIH1cclxuICAvKipcclxuICAgKiDojrflj5blrp7kvZPliJfooahcclxuICAgKiBAcGFyYW0gZmlsdGVyIOi/h+a7pOadoeS7tlxyXG4gICAqIEBwYXJhbSBzb3J0cyDmjpLluo/mnaHku7ZcclxuICAgKiBAcGFyYW0gcGFnZVNpemUg5YiG6aG15aSn5bCPXHJcbiAgICogQHBhcmFtIHBhZ2VJbmRleCDpobXnoIFcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiDkuI5nZXRFbnRpdGllc+aWueazleWKn+iDveebuOi/ke+8jOeUqOazleebuOWQjCBcXFxyXG4gICAqIOWMuuWIq+aYr+WcqOWPkemAgeivt+axguaXtu+8jOacrOaWueazleS8muWwhuafpeivouadoeS7tuaUvuWIsOivt+axgueahGJvZHnkuK3vvIzogIxnZXRFbnRpdGllc+aWueazleS8muWwhuafpeivouadoeS7tuaJqeWxleWIsOivt+axgueahHVybOS4ilxyXG4gICAqIEBzZWUge0BsaW5rIGdldEVudGl0aWVzfVxyXG4gICAqL1xyXG4gIHB1YmxpYyBmaWx0ZXIoZmlsdGVyOiBhbnlbXSA9IFtdLCBzb3J0czogYW55W10gPSBbXSwgcGFnZVNpemU6IG51bWJlciB8IG51bGwsIHBhZ2VJbmRleDogbnVtYmVyIHwgbnVsbCk6IE9ic2VydmFibGU8VFtdPiB7XHJcbiAgICByZXR1cm4gdGhpcy5kYXRhU2VydmljZS5maWx0ZXIoZmlsdGVyLCBzb3J0cywgcGFnZVNpemUsIHBhZ2VJbmRleCk7XHJcbiAgfVxyXG4gIC8vICNlbmRyZWdpb25cclxuICAvKipcclxuICAgKiDliIbpobXmn6Xor6Lku47ooagv5LuO5LuO6KGo5pWw5o2uXHJcbiAgICogQHBhcmFtIHBhdGhzIOmAmueUqOi3r+W+hFxyXG4gICAqIEBwYXJhbSBwYWdlSW5kZXgg6aG156CBXHJcbiAgICogQHBhcmFtIHBhZ2VTaXplIOWIhumhteWkp+Wwj1xyXG4gICAqIEBwYXJhbSBmaWx0ZXIg6L+H5ruk5p2h5Lu2XHJcbiAgICogQHBhcmFtIHNvcnQg5o6S5bqPXHJcbiAgICogQHRvZG8g55uu5YmN5bm25pyq5bqU55So5o6S5bqP5ZKM6L+H5ruk5p2h5Lu2XHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICog6YCa55So6Lev5b6E5qC85byP5Li677yaWydpZDrkuLvooajkuLvplK7lgLwnLCAn5Li76KGo5a6e5L2T5bGe5oCn5ZCNJywgJ2lkOuS7juihqOS4u+mUruWAvCcsICfku47ooajlrp7kvZPlsZ7mgKflkI0nXSBcXFxyXG4gICAqIOmAmueUqOi3r+W+hOeahOS4u+mUruWAvOWJjeW/hemhu+WQq+acieWGkuWPt++8jOWGkuWPt+S5i+WJjeeahFwiaWRcIuWImeWPr+S7peecgeeVpe+8iOWboOS4uumAmueUqOi3r+W+hOmZpOS6huaMh+WQkeS7juihqO+8jOi/mOWPr+S7peaMh+WQkeS7juihqOWFs+iBlOetieetie+8jOaJgOS7peW/hemhu+mAmui/h+WGkuWPt+adpeWMuuWIq+S4u+mUruWAvOWSjOWxnuaAp+WQje+8iSBcXFxyXG4gICAqIOmAmueUqOi3r+W+hOekuuS+i++8mlsnaWQ6VGVkJywgJ2FjY291bnRzJywgJ2lkOjEwODE2JywgJ2xvZ3MnXSDmjIflkJFhY2NvdW50c+S7juihqOS4i+eahGxvZ3Pku47ku47ooaggXFxcclxuICAgKiBwYXRoc+WPguaVsOmBteS7jumAmueUqOi3r+W+hOeahOagvOW8j++8jOW5tuS4lOaMh+WQkeS4gOS4quS7juihqO+8iOaIluiAheS7juS7juihqO+8iSBcXFxyXG4gICAqIOS9v+eUqOekuuS+i++8mlxyXG4gICAqIGBgYHR5cGVzY3JpcHRcclxuICAgKiAvLyDlsIbnu5Hlrprot6/lvoTkuIvlvZPliY3ooYznmoTot6/lvoTovazmjaLkuLpFbnRpdHnlj6/or4bliKvnmoTpgJrnlKjot6/lvoRcclxuICAgKiBjb25zdCBmdWxsUGF0aHMgPSBFbnRpdHlQYXRoQ29udmVydGVyLnRvRW50aXR5UGF0aEFycmF5KHRoaXMudmlld01vZGVsLmJpbmRpbmdQYXRoLCB0aGlzLmJpbmRpbmdEYXRhKTtcclxuICAgKiBjb25zdCBwYXRocyA9IGZ1bGxQYXRocy5zbGljZSgwLCBmdWxsUGF0aHMubGVuZ3RoIC0gMSk7XHJcbiAgICogY29uc3QgYmluZGluZ1BhdGhzID0gdGhpcy52aWV3TW9kZWwuYmluZGluZ1BhdGguc3BsaXQoJy8nKS5maWx0ZXIoaXRlbSA9PiBpdGVtKTtcclxuICAgKiBjb25zdCBiaW5kaW5nRGF0YSA9IHRoaXMudmlld01vZGVsLmJpbmRpbmdEYXRhO1xyXG4gICAqIGxldCBub2RlQ29kZSA9IGJpbmRpbmdQYXRoc1tiaW5kaW5nUGF0aHMubGVuZ3RoIC0gMV07XHJcbiAgICogbm9kZUNvZGUgPSBub2RlQ29kZS5zdWJzdHIoMCwgbm9kZUNvZGUubGVuZ3RoIC0gMSk7XHJcbiAgICogLy8g6I635Y+W5LiK57qn5a6e5L2TXHJcbiAgICogY29uc3QgcGFyZW50UGF0aHMgPSBiaW5kaW5nUGF0aHMuc2xpY2UoMCwgYmluZGluZ1BhdGhzLmxlbmd0aCAtIDEpO1xyXG4gICAqIGNvbnN0IHBhcmVudE9iamVjdCA9IGJpbmRpbmdEYXRhLmdldFZhbHVlKHBhcmVudFBhdGhzKSBhcyBCaW5kaW5nT2JqZWN0O1xyXG4gICAqIGlmICghcGFyZW50T2JqZWN0KSB7XHJcbiAgICogICB0aHJvdyBuZXcgRXJyb3IoJ+S4iue6p+WunuS9k+S4jeWtmOWcqCcpO1xyXG4gICAqIH1cclxuICAgKiBjb25zdCBjb25maWdQYXRoID0gYC8ke25vZGVDb2RlfV8ke3BhcmVudE9iamVjdFtwYXJlbnRPYmplY3QucHJpbWFyeUtleV19YDtcclxuICAgKiAvLyDojrflj5bnu5Hlrprot6/lvoTlr7nlupTnmoTliIbpobXkv6Hmga9cclxuICAgKiBjb25zdCB7IHBhZ2VJbmRleCA9IDEsIHBhZ2VTaXplIH0gPSB0aGlzLnJlcG9zaXRvcnkuZW50aXR5Q29sbGVjdGlvbi5nZXRQYWdpbmF0aW9uQ29uZmlnQnlQYXRoKGNvbmZpZ1BhdGgpO1xyXG4gICAqIGNvbnN0IHJlcXVlc3QkID0gdGhpcy5yZXBvc2l0b3J5LnF1ZXJ5Q2hpbGQocGF0aHMsIHBhZ2VJbmRleCwgcGFnZVNpemUpO1xyXG4gICAqIGBgYFxyXG4gICAqL1xyXG4gIHB1YmxpYyBxdWVyeUNoaWxkKHBhdGhzOiBzdHJpbmdbXSwgcGFnZUluZGV4OiBudW1iZXIsIHBhZ2VTaXplOiBudW1iZXIsIGZpbHRlcj86IHN0cmluZywgc29ydD86IHN0cmluZykge1xyXG4gICAgcmV0dXJuIHRoaXMuZGF0YVNlcnZpY2UucXVlcnlDaGlsZChwYXRocywgcGFnZUluZGV4LCBwYWdlU2l6ZSwgZmlsdGVyLCBzb3J0KTtcclxuICB9XHJcbiAgLyoqXHJcbiAgKiDojrflj5bkuLvplK7kuLppZOeahOWunuS9k1xyXG4gICogQHBhcmFtIGlkIOS4u+ihqOWunuS9k+S4u+mUrlxyXG4gICogQGRlc2NyaXB0aW9uXHJcbiAgKiDojrflj5bkuLvooajkuIrlr7nlupTkuLvplK7nmoTlrp7kvZPvvIzosIPnlKjor6Xmlrnms5XmiJDlip/lkI7lrp7kvZPku5PlupPkuK3ku4XljIXlkKvov5nkuIDkuKrlrp7kvZMgXFxcclxuICAqIOWmguaenOS7heS7heaDs+imgeWwhuWvueW6lGlk55qE5a6e5L2T5ZCM5q2l5Li65pyN5Yqh5Zmo5LiK55qE5YC877yM6K+36LCD55SoIHtAbGluayB1cGRhdGVFbnRpdHlCeUlkfSDmlrnms5VcclxuICAqL1xyXG4gIHB1YmxpYyBnZXRFbnRpdHlCeUlkKGlkOiBzdHJpbmcpOiBPYnNlcnZhYmxlPFQ+IHtcclxuICAgIHJldHVybiB0aGlzLmRhdGFTZXJ2aWNlLmdldEJ5SWQoaWQpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5pu05paw5a6e5L2T5pWw5o2uXHJcbiAgICogQHBhcmFtIGlkIOS4u+ihqOWunuS9k+S4u+mUrlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIOmHjeaWsOS7juacjeWKoeWZqOiOt+WPluS4u+ihqOS4iuWvueW6lOS4u+mUrueahOWunuS9k+aVsOaNriBcXFxyXG4gICAqIOS9v+eUqOekuuS+i++8mlxyXG4gICAqIGBgYHR5cGVzY3JpcHRcclxuICAgKiBjb25zdCByb290RGF0YUlkID0gdGhpcy5iaW5kaW5nRGF0YS5saXN0LmN1cnJlbnRJZDtcclxuICAgKiByZXR1cm4gdGhpcy5yZXBvc2l0b3J5LnVwZGF0ZUVudGl0eUJ5SWQocm9vdERhdGFJZCk7XHJcbiAgICogYGBgXHJcbiAgICovXHJcbiAgcHVibGljIHVwZGF0ZUVudGl0eUJ5SWQoaWQ6IHN0cmluZyk6IE9ic2VydmFibGU8VD4ge1xyXG4gICAgcmV0dXJuIHRoaXMuZGF0YVNlcnZpY2UudXBkYXRlQnlJZChpZCk7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIOabtOaWsOWunuS9k+aVsOaNruW5tuWKoOmUgVxyXG4gICAqIEBwYXJhbSBpZCDkuLvooajlrp7kvZPkuLvplK5cclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiDkvb/nlKjnpLrkvovvvJpcclxuICAgKiBgYGB0eXBlc2NyaXB0XHJcbiAgICogaWQgPSB0aGlzLmJpbmRpbmdEYXRhLmxpc3QuY3VycmVudElkOyAgLy8g57yW6L6R5b2T5YmN6KGMXHJcbiAgICogY29uc3QgZWRpdCQgPSB0aGlzLnJlcG9zaXRvcnkuZWRpdEVudGl0eUJ5SWQoaWQpO1xyXG4gICAqIGBgYFxyXG4gICAqL1xyXG4gIHB1YmxpYyBlZGl0RW50aXR5QnlJZChpZDogc3RyaW5nKTogT2JzZXJ2YWJsZTxUPiB7XHJcbiAgICByZXR1cm4gdGhpcy5kYXRhU2VydmljZS5lZGl0QnlJZChpZCk7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICog5Yib5bu65a6e5L2TXHJcbiAgICogQHBhcmFtIGRlZmF1bHRWYWx1ZSDpu5jorqTlgLzvvIxKU09O5a+56LGhXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICog6K+35rGC5Yib5bu65LiA5Liq5paw55qE5a6e5L2T77yM5bm25Yqg6L295Yiw5a6e5L2T5LuT5bqT77yI5Yqg6L295ZCO5LuT5bqT5Lit5Y+q5Lya5pyJ6L+Z5LiA5Liq5a6e5L2T77yM6YCC55So5LqO5Y2h54mH77yJIFxcXHJcbiAgICog5L2/55So56S65L6L77yaXHJcbiAgICogYGBgdHlwZXNjcmlwdFxyXG4gICAqIC8vIOWcqOWIm+W7uuaWsOWunuS9k+WQjui/m+WFpee8lui+keeKtuaAgVxyXG4gICAqIGNvbnN0IGNyZWF0ZSQgPSB0aGlzLnJlcG9zaXRvcnkuY3JlYXRlRW50aXR5KCk7XHJcbiAgICogY3JlYXRlJC5waXBlKFxyXG4gICAqICAgdGFwKCgpID0+IHtcclxuICAgKiAgICAgICBFZGl0U3RhdGVVdGlsLnNldEVkaXRTdGF0ZSh0aGlzLmZyYW1lQ29udGV4dCwgbGFzdE1vZGlmaWVkSWQpO1xyXG4gICAqICAgfSlcclxuICAgKiApO1xyXG4gICAqIGBgYFxyXG4gICAqL1xyXG4gIHB1YmxpYyBjcmVhdGVFbnRpdHkoZGVmYXVsdFZhbHVlPzogYW55KTogT2JzZXJ2YWJsZTxUPiB7XHJcbiAgICByZXR1cm4gdGhpcy5kYXRhU2VydmljZS5jcmVhdGUoZGVmYXVsdFZhbHVlKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOi/veWKoOWunuS9k1xyXG4gICAqIEBwYXJhbSBkZWZhdWx0VmFsdWUg6buY6K6k5YC8XHJcbiAgICogQGRlc2NyaXB0aW9uIOivt+axguWIm+W7uuS4gOS4quaWsOeahOWunuS9k++8jOW5tui/veWKoOWIsOWunuS9k+S7k+W6k++8iOmAgueUqOS6juWIl+ihqO+8iVxyXG4gICAqL1xyXG4gIHB1YmxpYyBhcHBlbmRFbnRpdHkoZGVmYXVsdFZhbHVlPzogYW55KTogT2JzZXJ2YWJsZTxUPiB7XHJcbiAgICByZXR1cm4gdGhpcy5kYXRhU2VydmljZS5hcHBlbmQoZGVmYXVsdFZhbHVlKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWIm+W7uuW5tuaPkuWFpeaWsOWunuS9k++8iOWQkeS4u+ihqOaPkuWFpe+8iVxyXG4gICAqIEBwYXJhbSBwb3NpdGlvbiDmj5LlhaXkvY3nva5cclxuICAgKiBAcGFyYW0gZGVmYXVsdFZhbHVlIOm7mOiupOWAvFxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIOWFs+S6juaPkuWFpeS9jee9ru+8jOWPr+mAieWAvO+8mjHmiJYtMe+8jDHku6PooajlnKjlvZPliY3ooYzlkI7vvIwtMeS7o+ihqOWcqOW9k+WJjeihjOWJjVxyXG4gICAqL1xyXG4gIHB1YmxpYyBpbnNlcnQocG9zaXRpb246IDEgfCAtMSwgZGVmYXVsdFZhbHVlPzogYW55KTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgIHJldHVybiB0aGlzLmRhdGFTZXJ2aWNlLmluc2VydChwb3NpdGlvbiwgZGVmYXVsdFZhbHVlKTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICog5Yib5bu65a2Q5a6e5L2T5bm25o+S5YWl5Yiw5oyH5a6a5L2N572u77yI5ZCR5LuO6KGo5oiW5LuO5LuO6KGo5o+S5YWl77yJXHJcbiAgICogQHBhcmFtIHBhdGgg54i26Lev5b6EXHJcbiAgICogQHBhcmFtIHBvc2l0aW9uIOaPkuWFpeS9jee9rlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIOWFs+S6jueItui3r+W+hOagvOW8j++8jOS7juihqOW9ouWmgu+8mlwiLzEvZWR1c1wi77yM5LuO5LuO6KGo5b2i5aaC77yaXCIvMS9lZHVzLzEyL2dyYWRlc1wiIFxcXHJcbiAgICog54i26Lev5b6E5piv55Sx5a6e5L2T5Li76ZSu5YC85ZKM5a6e5L2T5bGe5oCn5ZCN5oiQ5a+55ou85o6l6ICM5oiQ55qE5a2X56ym5Liy77yI55So5pac5p2g5YiG6ZqU77yJ77yM5oyH5ZCR6KaB5o+S5YWl55qE6YKj5byg6KGoIFxcXHJcbiAgICog54i26Lev5b6E5LiO5a6e5L2T6YCa55So6Lev5b6E5piv55u45Ly855qE77yM5Yy65Yir5Li76KaB5piv5qC85byP5LiK55qE5LiN5ZCM77yM54i26Lev5b6E5piv5a2X56ym5Liy6ICM5LiN5piv5pWw57uE77yM5Li76ZSu5YC85YmN6Z2i5LiN6ZyA6KaB5Yqg5YaS5Y+377yM54i26Lev5b6E5b+F6aG75oyH5ZCR5LuO6KGo6ICM5a6e5L2T6YCa55So6Lev5b6E6L+Y5Y+v5Lul5oyH5ZCR5a6e5L2T55qE5pmu6YCa5bGe5oCn5oiW6ICF5YWz6IGUIFxcXHJcbiAgICog5o+S5YWl5L2N572u5Y+C6ICDIHtAbGluayBpbnNlcnR9IFxcXHJcbiAgICog5L2/55So56S65L6L77yaXHJcbiAgICogYGBgdHlwZXNjcmlwdFxyXG4gICAqIC8vIOaIkeS7rOWPr+S7pemAmui/h2JpbmRpbmdQYXRo5Lul5Y+KYmluZGluZ0RhdGHorqHnrpfmi7zmjqXlh7rlvZPliY3ooYzmiYDlsZ7ku47ooajnmoTniLbot6/lvoRcclxuICAgKiBjb25zdCBhcHBlbmQkID0gdGhpcy5yZXBvc2l0b3J5Lmluc2VydEJ5UGF0aChwYXRoLCBwb3NpdGlvbik7XHJcbiAgICogYGBgXHJcbiAgICovXHJcbiAgcHVibGljIGluc2VydEJ5UGF0aChwYXRoOiBzdHJpbmcsIHBvc2l0aW9uOiAxIHwgLTEpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgcmV0dXJuIHRoaXMuZGF0YVNlcnZpY2UuaW5zZXJ0QnlQYXRoKHBhdGgsIHBvc2l0aW9uKTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICog5Yib5bu65a2Q5a6e5L2T5bm26L+95Yqg5Yiw5pyr5bC+XHJcbiAgICogQHBhcmFtIGZwYXRoIOeItui3r+W+hFxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIOeItui3r+W+hOagvOW8j+WPguiAgyB7QGxpbmsgaW5zZXJ0QnlQYXRofVxyXG4gICAqL1xyXG4gIHB1YmxpYyBhcHBlbmRFbnRpdHlCeVBhdGgoZnBhdGg6IHN0cmluZyk6IE9ic2VydmFibGU8RW50aXR5PiB7XHJcbiAgICByZXR1cm4gdGhpcy5kYXRhU2VydmljZS5hcHBlbmRCeVBhdGgoZnBhdGgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5qC55o2uaWTliKDpmaTlrp7kvZNcclxuICAgKiBAcGFyYW0gaWQg5Li76KGo5a6e5L2T5Li76ZSuXHJcbiAgICogQHBhcmFtIGlmU2F2ZSDmmK/lkKbkv53lrZjvvIzlj6/pgInvvIzpu5jorqTkuLp0cnVlXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICog5aaC5p6caWZTYXZl5Lyg6YCS5Li6ZmFsc2XvvIzliJnkvJrmt7vliqDkuIDkuKrliKDpmaTlj5jmm7TvvIznrYnlvoXku6XlkI7kv53lrZhcclxuICAgKi9cclxuICBwdWJsaWMgcmVtb3ZlRW50aXR5QnlJZChpZDogc3RyaW5nLCBpZlNhdmU/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxib29sZWFuPiB7XHJcbiAgICByZXR1cm4gdGhpcy5kYXRhU2VydmljZS5yZW1vdmVCeUlkKGlkLCBpZlNhdmUpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5qC55o2uaWTliKDpmaTlrp7kvZPlubbmiafooYzkv53lrZhcclxuICAgKiBAcGFyYW0gaWQg5Li76KGo5a6e5L2T5Li76ZSuXHJcbiAgICovXHJcbiAgcHVibGljIHJlbW92ZUVudGl0eUFuZFNhdmVCeUlkKGlkOiBzdHJpbmcpOiBPYnNlcnZhYmxlPGJvb2xlYW4+IHtcclxuICAgIHJldHVybiB0aGlzLmRhdGFTZXJ2aWNlLnJlbW92ZUFuZFNhdmVCeUlkKGlkKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOagueaNrmlk5Yig6Zmk54i26Lev5b6E5LiL5a2Q6KGo5Lit55qE5a6e5L2TXHJcbiAgICogQHBhcmFtIGZwYXRoIOeItui3r+W+hFxyXG4gICAqIEBwYXJhbSBpZCDlrp7kvZPkuLvplK5cclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiDniLbot6/lvoTmoLzlvI/lj4LogIMge0BsaW5rIGluc2VydEJ5UGF0aH1cclxuICAgKi9cclxuICBwdWJsaWMgcmVtb3ZlRW50aXR5QnlQYXRoKGZwYXRoOiBzdHJpbmcsIGlkOiBzdHJpbmcpOiBPYnNlcnZhYmxlPGJvb2xlYW4+IHtcclxuICAgIHJldHVybiB0aGlzLmRhdGFTZXJ2aWNlLnJlbW92ZUJ5UGF0aChmcGF0aCwgaWQpO1xyXG4gIH1cclxuICAvKipcclxuICAgKiDmoLnmja5pZHPmibnph4/liKDpmaTlrp7kvZNcclxuICAgKiBAcGFyYW0gaWRzIGlkc1xyXG4gICAqIEBwYXJhbSBpZlNhdmUg5piv5ZCm5L+d5a2YKOm7mOiupOS4umZhbHNlKVxyXG4gICAqL1xyXG4gIHB1YmxpYyBiYXRjaFJlbW92ZShpZHM6IHN0cmluZ1tdLCBpZlNhdmU6IGJvb2xlYW4gPSBmYWxzZSk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICByZXR1cm4gdGhpcy5kYXRhU2VydmljZS5iYXRjaFJlbW92ZShpZHMsIGlmU2F2ZSk7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIOaJuemHj+WIoOmZpOWtkOe6p+WunuS9k1xyXG4gICAqIEBwYXJhbSBmUGF0aCDniLbot6/lvoRcclxuICAgKiBAcGFyYW0gaWRzIOWtkOe6p2lk6ZuG5ZCIXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogaWRz5Lit5ZCE5LiqaWTkuYvpl7Tku6XpgJflj7fliIbpmpTvvIzniLbot6/lvoTmoLzlvI/lj4LogIMge0BsaW5rIGluc2VydEJ5UGF0aH0gXFxcclxuICAgKiDkvb/nlKjnpLrkvovvvJpcclxuICAgKiBgYGB0eXBlc2NyaXB0XHJcbiAgICogLy8gaWRz5a2X56ym5Liy5Y+v5Lul5LuO6KGo5Y2V5Y+Y6YePVUlTdGF0ZeS4reiOt+WPlu+8jOWIl+ihqOe7hOS7tueahOWLvumAieeKtuaAgeWPmOWMluWQjuS8muiHquWKqOabtOaWsOihqOWNleWPmOmHj1xyXG4gICAqIGNvbnN0IHJlbW92ZSQgPSB0aGlzLnJlcG9zaXRvcnkuYmF0Y2hSZW1vdmVCeVBhdGgocGF0aCwgaWRzKTtcclxuICAgKiBgYGBcclxuICAgKi9cclxuICBwdWJsaWMgYmF0Y2hSZW1vdmVCeVBhdGgoZlBhdGg6IHN0cmluZywgaWRzOiBzdHJpbmcpOiBPYnNlcnZhYmxlPGJvb2xlYW4+IHtcclxuICAgIHJldHVybiB0aGlzLmRhdGFTZXJ2aWNlLmJhdGNoUmVtb3ZlQnlQYXRoKGZQYXRoLCBpZHMpO1xyXG4gIH1cclxuICAvKipcclxuICAgKiDkv53lrZjkuLvplK7kuLppZOeahOWunuS9k1xyXG4gICAqIEBwYXJhbSBpZCDkuLvooajlrp7kvZPkuLvplK5cclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiDosIPnlKjor6Xmlrnms5XkvJrlupTnlKhpZOWvueW6lOWunuS9k+S4iueahOWPmOabtCBcXFxyXG4gICAqIGBgYHR5cGVzY3JpcHRcclxuICAgKiBjb25zdCBpZCA9IHRoaXMuYmluZGluZ0RhdGEubGlzdC5jdXJyZW50SWQgYXMgc3RyaW5nO1xyXG4gICAqIGNvbnN0IHNhdmUkID0gdGhpcy5yZXBvc2l0b3J5LnNhdmVFbnRpdHlCeUlkKGlkKTsgIC8vIOWQkeacjeWKoeWZqOaPkOS6pOWPmOabtOW5tuW6lOeUqFxyXG4gICAqIGBgYFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzYXZlRW50aXR5QnlJZChpZDogc3RyaW5nKTogT2JzZXJ2YWJsZTxib29sZWFuPiB7XHJcbiAgICByZXR1cm4gdGhpcy5kYXRhU2VydmljZS5hcHBseUNoYW5nZXNCeUlkKGlkKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOaJuemHj+S/neWtmFxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIOW6lOeUqOaJgOacieWPmOabtO+8jOavlOWmguiwg+eUqOS6hiB7QGxpbmsgcmVtb3ZlRW50aXR5QnlJZH0g5LiU5pyq5L+d5a2Y5YiZ5Y+v5Lul6YCa6L+H5q2k5pa55rOV5L+d5a2YIFxcXHJcbiAgICog5Zyo5YiX6KGo5pyN5Yqh5Lit77yM5oiR5Lus5Y+v5Lul6YCa6L+H6LCD55So6K+l5pa55rOV5a6e546w5YiX6KGo5pWw5o2u55qE5om56YeP5L+d5a2YXHJcbiAgICovXHJcbiAgcHVibGljIHNhdmVFbnRpdGllcygpOiBPYnNlcnZhYmxlPGJvb2xlYW4+IHtcclxuICAgIHJldHVybiB0aGlzLmRhdGFTZXJ2aWNlLmFwcGx5Q2hhbmdlcygpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5Y+W5raI5a6e5L2T5Y+Y5pu0XHJcbiAgICogQGRlc2NyaXB0aW9uIOa4heepuuaJgOacieWunuS9k+WPmOabtO+8jOS4jeW4jOacm+S/neWtmOWPmOabtOaXtuiwg+eUqOatpOaWueazlVxyXG4gICAqL1xyXG4gIHB1YmxpYyBjYW5jZWxFbnRpdHlDaGFuZ2VzKCk6IE9ic2VydmFibGU8Ym9vbGVhbj4ge1xyXG4gICAgcmV0dXJuIHRoaXMuZGF0YVNlcnZpY2UuY2FuY2VsQ2hhbmdlcygpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5om56YeP5paw5aKe5LuO6KGoL+S7juS7juihqOaVsOaNrlxyXG4gICAqIEBwYXJhbSBwYXRoIOeItui3r+W+hO+8jOWPguiAgyB7QGxpbmsgaW5zZXJ0QnlQYXRofVxyXG4gICAqIEBwYXJhbSBkZWZhdWx0VmFsdWVzIOm7mOiupOWunuS9k+aVsOaNruaVsOe7hFxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIOWQjuerr+aOpeWPo+WPquaUr+aMgeaJuemHj+aWsOWinuWtkOihqO+8jOaJuemHj+aWsOWinuS4u+ihqOebruWJjeS4jeaUr+aMgVxyXG4gICAqL1xyXG4gIHB1YmxpYyBiYXRjaEFwcGVuZEJ5UGF0aChwYXRoOiBzdHJpbmcsIGRlZmF1bHRWYWx1ZXM6IEFycmF5PGFueT4pOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgcmV0dXJuIHRoaXMuZGF0YVNlcnZpY2UuYmF0Y2hBcHBlbmRCeVBhdGgocGF0aCwgZGVmYXVsdFZhbHVlcyk7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIOaJuemHj+aWsOWinuS4u+ihqOaVsOaNrlxyXG4gICAqIEBwYXJhbSBkZWZhdWx0VmFsdWVzIOm7mOiupOWunuS9k+aVsOaNruaVsOe7hFxyXG4gICAqL1xyXG4gIHB1YmxpYyBiYXRjaEFwcGVuZChkZWZhdWx0VmFsdWVzOiBBcnJheTxhbnk+KTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgIHJldHVybiB0aGlzLmRhdGFTZXJ2aWNlLmJhdGNoQXBwZW5kKGRlZmF1bHRWYWx1ZXMpO1xyXG4gIH1cclxuICAvKipcclxuICAgKiDmuIXnqbpSZXBvc2l0b3nlhoXnmoTmlbDmja7lkozlj5jph49cclxuICAgKiBAZGVzY3JpcHRpb24g5riF56m65omA5pyJ5a6e5L2T44CB5Y+Y6YeP77yM5bm25riF56m6QmVTZXNzaW9uSWRcclxuICAgKi9cclxuICBwdWJsaWMgcmVzZXQoKSB7XHJcbiAgICB0aGlzLmVudGl0eU1hbmFnZXIucmVzZXQoKTtcclxuICAgIHRoaXMudmFyaWFibGVNYW5hZ2VyLnJlc2V0KCk7XHJcbiAgICB0aGlzLnJlc3RTZXJ2aWNlLnNlc3Npb25TZXJ2aWNlLmNsZWFyQmVTZXNzaW9uSWQoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiOt+WPlkluamVjdG9y77yI5aSW6YOo6K+35Yu/5L2/55So77yJXHJcbiAgICogQGludGVybmFsXHJcbiAgICovXHJcbiAgcHVibGljIGdldEluamVjdG9yKCk6IEluamVjdG9yIHtcclxuICAgIHJldHVybiB0aGlzLmluamVjdG9yO1xyXG4gIH1cclxuICAvKipcclxuICAgKiDmuIXnqbp2b+WPmOmHj+WPmOabtFxyXG4gICAqL1xyXG4gIHB1YmxpYyBjbGVhckFsbFZhcmlhYmxlQ2hhbmdlcyhjaGFuZ2VEZXRhaWw6IENoYW5nZURldGFpbCkge1xyXG4gICAgdGhpcy52YXJpYWJsZU1hbmFnZXIuY2xlYXJDaGFuZ2VEZXRhaWwoY2hhbmdlRGV0YWlsKTtcclxuICB9XHJcblxyXG59XHJcblxyXG5leHBvcnQgeyBCZWZSZXBvc2l0b3J5IH07XHJcbiJdfQ==