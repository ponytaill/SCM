/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/*
 * @Author: 疯狂秀才(lucas huang)
 * @Date: 2018-11-23 11:23:12
 * @LastEditors: 疯狂秀才(Lucas Huang)
 * @LastEditTime: 2020-10-20 20:18:26
 * @Company: Inspur
 * @Version: v0.3.x
 */
import { Component, Input, ViewChild, EventEmitter, Injector, ComponentFactoryResolver, Output, ChangeDetectorRef, ViewEncapsulation, ViewContainerRef, forwardRef, ElementRef, NgZone, Renderer2, } from "@angular/core";
import { NG_VALUE_ACCESSOR } from "@angular/forms";
import { of, Subject } from "rxjs";
import { LocaleService } from "@farris/ui-locale";
import { MessagerService } from "@farris/ui-messager";
import { LoadingService } from "@farris/ui-loading";
import { DataTableComponent } from "@farris/ui-datatable";
import { TreeTableComponent } from "@farris/ui-treetable";
import { LayoutPanelComponent } from "@farris/ui-layout";
import { CommonUtils, DebugService, FarrisComponentInstanceService, OverLayHiddenService } from "@farris/ui-common";
import { ShortcutsService } from "@farris/ui-shortcuts";
import { InputGroupComponent } from "@farris/ui-input-group";
import { NotifyService } from "@farris/ui-notify";
import { FAVORITE_FIELD_NAME, INPUT_GROUP_ICON, LookupGridDisplayType, QuickSelectDefaultOptions, } from "./lookup-displaytype";
import { LookupComponent } from "./lookup.component";
import { lookupGridDefaults, displayInfoDefault, } from "./lookup-grid-options";
import { ServerSideToken } from "./http/ILookupHttpService";
import { LookupDefaultMapping } from "./lookup-defaut-mapping";
import { LookupUtils } from "./utils";
import { PersonalConfigService } from "./lookup-presonalConfig.service";
import { UtilService, TreeNodeHelper, FavoriteHelper, SelectionManager, DataTableEventManager, TreeTableEventManager, MultiSelectionManager, LookupHttpManager, LookupComponentManager, LookupDialogManager, onTextChanged, LookupSelectionService, } from "./services";
import { map } from "rxjs/operators";
import { EventManager } from "@angular/platform-browser";
import { cloneDeep } from "lodash-es";
/** @type {?} */
export const LOOKUPGRID_VALUE_ACCESSOR = {
    provide: NG_VALUE_ACCESSOR,
    useExisting: forwardRef((/**
     * @return {?}
     */
    () => LookupGridComponent)),
    multi: true,
};
export class LookupGridComponent extends LookupComponent {
    /**
     * @param {?} injector
     * @param {?} cfr
     * @param {?} el
     * @param {?} utils
     * @param {?} defaultMapping
     * @param {?} changeDetector
     * @param {?} shortcuts
     * @param {?} lookupUtils
     * @param {?} zone
     * @param {?} render2
     */
    constructor(injector, cfr, el, utils, defaultMapping, changeDetector, shortcuts, lookupUtils, zone, render2) {
        super(injector, el, changeDetector);
        this.injector = injector;
        this.cfr = cfr;
        this.el = el;
        this.utils = utils;
        this.defaultMapping = defaultMapping;
        this.changeDetector = changeDetector;
        this.shortcuts = shortcuts;
        this.lookupUtils = lookupUtils;
        this.zone = zone;
        this.render2 = render2;
        this.groupIcon = INPUT_GROUP_ICON;
        this._displayType = "";
        /**
         * 使用表单设计器中的显示类型。否则使用元数据设置的显示类型。 默认：false
         */
        this.customDisplayType = false;
        this.viewType = "text";
        /**
         * 启用清空按钮
         */
        this.enableClear = true;
        /**
         * 服务器端排序
         */
        this.remoteSort = true;
        /**
         * 树表显示全选复选框。 默认不显示
         */
        this.showCheckAll = false;
        /**
         * 是否启用多选
         */
        this.singleSelect = true;
        /**
         * 多选分隔符
         */
        this.multipleChoiceSeparator = ",";
        /**
         * BE REST RUI
         * - 此处设置后 uri 失效
         */
        this.beUri = "";
        /**
         * 显示过滤工具条
         */
        this.showFilterBar = true;
        /**
         * 是否启用分页
         */
        this.pagination = true;
        /**
         * 当前页索引，从 0开始
         */
        this.pageIndex = 1;
        /**
         * 每页记录数
         */
        this.pageSize = 20;
        /**
         * 可用分页记录数列表
         */
        this.pageList = [10, 20, 30, 50, 100];
        /**
         * 总记录数
         */
        this.total = 0;
        /** 可拖动列 */
        // @Input() resizableColumns = true;
        /**
         * 显示列信息, 默认为 []
         */
        this.columns = [];
        /**
         * 帮助查询是否为远端查询
         */
        this.remoteSearch = true;
        /**
         * 文本变化后，进行服务器端查询
         */
        this.searchOnServer = true;
        /**
         * 不进行服务器查询，有啥算啥
         */
        this.nosearch = false;
        /**
         * 启用任意输入后，值通过输入时触发
         */
        this.clearMappings = new EventEmitter();
        // 收藏列表
        this.favoriteItems = [];
        /**
         * 是否启用级联选择控制选项
         */
        this.enableCascade = false;
        /**
         * 级联控制默认值： enable, up, down, disable
         */
        this.cascadeStatus = "enable";
        this.placeholder = "";
        /**
         * 显示已选记录列表。 默认为 false 不显示
         */
        this.showSelected = false;
        /**
         * 应用收藏夹
         */
        this.useFavorite = false;
        /**
         * 收藏数据来自于： locale: 本地存储， remote: 服务器端存储
         */
        this.favoriteDataFrom = "remote";
        /**
         * 使用提示,快捷选择
         */
        this.useTip = false;
        /**
         * 记录窗口大小
         */
        this.isRecordSize = false;
        /**
         * 是否启用选中value值对应的行数据，默认 true
         */
        this.enableToSelect = true;
        this.enableFindText = false;
        /**
         * -1: 不展开； 0: 全部展开；>0: 展开到指定级数
         */
        this.expandLevel = -1;
        this.navTreeTableOptions = {};
        this.treeTableOptions = {};
        this.dataTableOptions = {};
        this.defaultTreeTableOptions = {
            maxLevel: 9,
            enableContextMenu: false,
            contextMenuItems: [],
        };
        /**
         * 树形帮助数据加载方式： default: 内置取数； loadall: 加载所有 layerload：分层加载
         */
        this.loadTreeDataType = "default";
        /**
         * 窗口打开后立即加载数据，默认为 true
         */
        this.loadDataWhenOpen = true;
        /**
         * 导航列表，树列表在帮助打开后选中的数据;
         * 设置后，`selectFirstInNav` 失效！
         */
        this.navSelectedIds = "";
        /**
         * 导航帮助，选中第1条数据，默认为 false;
         * 注意：当`navSelectedIds`不为空时，此属性失效。
         */
        this.selectFirstInNav = false;
        /**
         * 启用构造完整树过滤
         */
        this.enableFullTree = true;
        /**
         * 显示文本自定义函数
         */
        this.displayFormatter = undefined;
        /**
         * 显示文本字段集合，以 英文 逗号隔开
         */
        this.displayFields = "";
        this.displayTextSeparator = "_";
        /**
         * 帮助元数据ID，不为空时调用指定的URI
         * /api/runtime/bcc/v1.0/help/data/{helpId}
         */
        this.helpId = "";
        /**
         * 文本对齐方式； left | center | right; 默认 left
         */
        this.textAlign = "left";
        /**
         * 鼠标滑过输入框时显示输入框内的文本信息
         */
        this.enableTitle = true;
        this.useExtendInfo = false;
        this.extInfoFields = "";
        this.extendInfo = "";
        /**
         * IDE 设计器自定义格式化 2103
         */
        this.customFormatter = null;
        this.customNavFormatter = null;
        /**
         * 自定义确定事件
         */
        this.okHandler = null;
        /**
         * 自定义取消事件
         */
        this.cancelHandler = null;
        this.tagboxHeight = "auto";
        /**
         * 启用获取所有子级数据的功能
         */
        this.enableGetAllChildNodes = true;
        this.shortcutKey = {
            /**
             * 打开帮助窗口
             */
            open: "ArrowRight",
            /**
             * 确认选择数据
             */
            confirm: "Enter",
            /**
             * 搜索框焦点
             */
            searchFocus: "F3",
            /**
             * 选中上一条
             */
            moveUp: "ArrowUp",
            /**
             * 选中下一条
             */
            moveDown: "ArrowDown",
            /**
             * 展开节点
             */
            expand: "ArrowRight",
            /**
             * 折叠节点
             */
            collapse: "ArrowLeft",
            /**
             * 下一页
             */
            nextPager: "PageDown",
            /**
             * 上一页
             */
            prevPager: "PageUp",
        };
        /**
         * 快捷选择相关配置项，默认为 null, 即不启用此功能
         */
        this.quickSelect = null;
        this.selectedData = new EventEmitter();
        this.clear = new EventEmitter();
        this.search = new EventEmitter();
        // 帮助文本框中值变化事件
        this.valueChanged = new EventEmitter();
        this.loadSuccess = new EventEmitter();
        this.pagerChanged = new EventEmitter();
        this.expandTreeNode = new EventEmitter();
        this.textChanged = new EventEmitter();
        this.checkedChange = new EventEmitter();
        this.tagRemoved = new EventEmitter();
        /**
         * 内容中留白边距
         */
        this.containerMargin = { top: 0, bottom: 5, left: 10, right: 10 };
        this.containerStyle = {
            marginLeft: this.containerMargin.left + "px",
            marginRight: this.containerMargin.right + "px",
            marginTop: this.containerMargin.top + "px",
            marginBottom: this.containerMargin.bottom + "px",
        };
        this._gridOptions = lookupGridDefaults;
        // 导航帮助左则宽度
        this.leftPanelWidth = 320;
        // 导航帮助窗口最小宽度
        this.navLookupDialogMinWidth = 960;
        this.navigationFilter = null;
        this.subscriptions = [];
        this.isTextChange = false;
        this.isTabChanged = false;
        this.displayInfo = Object.assign({}, displayInfoDefault);
        this.tabChangeSubscription = null;
        // 暂存行点击数据  用于收藏
        this.personalConf = {};
        this.favoriteColumns = [];
        /**
         * 临时查询参数
         */
        this._searchState = null;
        this.allData = [];
        this.allColumnsTitle = "所有列";
        this.mustWriteSomething = "请输入关键字后查询。";
        this.mustChoosAdatarow = "请选择一条记录！";
        this.addFavoriteSuccess = "收藏成功。";
        this.delFavoriteSuccess = "移除收藏成功。";
        this.searching = false;
        /**
         * 临时存储查询结果集
         */
        this._searchResult = null;
        this.lookupinitializationSubject = new Subject();
        /**
         * 多选时，选中的数据
         */
        this.currentSelectedItems = of([]);
        /**
         * 已选数据列信息
         */
        this.selectedColumns = [];
        this.activeTab = "datalist";
        this.favHelper = null;
        this.ttEventMgr = null;
        this.multiSelMgr = null;
        this.httpMgr = null;
        this.lookupCmpMgr = null;
        this.dialogMgr = null;
        this.selectionMgr = null;
        this.dtEventMgr = null;
        this.lookupSelectionSer = null;
        this.controlId = "";
        this.savingFaoriteData = false;
        this.isReady = false;
        this.showTagboxClearButton = false;
        this.hasError = false;
        this.isGetAllChidlNodes = false;
        /**
         * 选中记录ID，自定义帮助取数时使用
         */
        this.selectedIds = [];
        this.lookupSearchInputEvent = null;
        this.farrisInstances = null;
        /**
         * 用户初始设置
         */
        this._userSettings = {};
        this._treeInfo_ = null;
        /**
         * dialog 内容区域高度。 弹窗总高度 - 头部高度 - 脚部高度 - （启用收藏 TAB头高度）
         */
        this.dialogContentHeight = 0;
        this.debugSer = null;
        this.createInstance();
        this.currentSelectedItems = this.lookupSelectionSer.selected$;
        this.eventManager = this.injector.get(EventManager);
        this.farrisInstances = this.injector.get(FarrisComponentInstanceService, null);
        this.overLayService = new OverLayHiddenService();
        this.debugSer = this.injector.get(DebugService, null);
        if (this.debugSer) {
            this.debugSer.useDebugMode();
        }
    }
    /**
     * @return {?}
     */
    get displayType() {
        return this._displayType;
    }
    /**
     * @param {?} val
     * @return {?}
     */
    set displayType(val) {
        if (val) {
            /** @type {?} */
            const types = Object.values(LookupGridDisplayType);
            /** @type {?} */
            const i = types.findIndex((/**
             * @param {?} n
             * @return {?}
             */
            (n) => n === val.toUpperCase()));
            if (i > -1) {
                /** @type {?} */
                const keys = Object.keys(LookupGridDisplayType);
                this._displayType = LookupGridDisplayType[keys[i]];
            }
        }
        else {
            this._displayType = val;
        }
    }
    /**
     * @return {?}
     */
    get gridOptions() {
        if (this.useFavorite &&
            this.columns &&
            this.columns.length > 0 &&
            !this.columns.find((/**
             * @param {?} item
             * @return {?}
             */
            (item) => item.field === FAVORITE_FIELD_NAME))) {
            this.columns.push({
                field: FAVORITE_FIELD_NAME,
                title: "",
                width: 40,
                align: "center",
                fixed: 'right',
                // fixedWidth: true,
                formatter: this.favHelper.favoriteColumnFormatter,
            });
        }
        this._gridOptions = Object.assign(this._gridOptions, {
            singleSelect: this.singleSelect,
            idField: this.idField,
            uri: this.uri,
            showFilterBar: this.showFilterBar,
            pagination: this.pagination,
            pageIndex: this.pageIndex,
            pageSize: this.pageSize,
            pageList: this.pageList,
            total: this.total,
            items: this.items,
            columns: this.columns,
            resizableColumns: true,
            fixedHeader: true,
            hover: true,
            treeInfo: this.treeInfo,
        });
        return this._gridOptions;
    }
    /**
     * @param {?} opts
     * @return {?}
     */
    set gridOptions(opts) {
        this._gridOptions = Object.assign({}, this._gridOptions, opts);
        this.selectedColumns = this.multiSelMgr.initSelectedColumns();
    }
    /**
     * @return {?}
     */
    get selections() {
        /** @type {?} */
        const selectItems = this.lookupSelectionSer.getSelections();
        if (this.singleSelect) {
            return selectItems[0];
        }
        else {
            return selectItems;
        }
    }
    /**
     * @return {?}
     */
    get usePersionalConf() {
        return this.useFavorite || this.useTip || this.isRecordSize;
    }
    /**
     * @return {?}
     */
    get displayTextList() {
        if (this.displayText) {
            return this.displayText.split(this.multipleChoiceSeparator);
        }
        return [];
    }
    /**
     * @return {?}
     */
    get userInitialConfig() {
        return this._userSettings;
    }
    /**
     * @param {?} msg
     * @param {?=} type
     * @return {?}
     */
    writeConsole(msg, type = 'warn') {
        if (this.debugSer) {
            this.debugSer[type](msg);
        }
    }
    /**
     * @private
     * @return {?}
     */
    cacheUserConfig() {
        this._userSettings._title = this.title;
        this.displayInfo.title = this.title;
        this._userSettings._columns = this.deepClone(this.columns || []);
        this._userSettings.getColumns = (/**
         * @return {?}
         */
        () => {
            return this._userSettings._columns;
        });
        this._userSettings.reset = (/**
         * @return {?}
         */
        () => {
            this.title = this._userSettings._title;
            this.displayInfo.title = this.title;
            this.columns = this._userSettings.getColumns();
        });
    }
    /**
     * @private
     * @param {?} obj
     * @return {?}
     */
    deepClone(obj) {
        if (obj === null) {
            return null;
        }
        /** @type {?} */
        const clone = Object.assign({}, obj);
        Object.keys(clone).forEach((/**
         * @param {?} key
         * @return {?}
         */
        (key) => (clone[key] =
            typeof obj[key] === "object"
                ? this.deepClone(obj[key])
                : obj[key])));
        if (Array.isArray(obj)) {
            clone.length = obj.length;
            return Array.from(clone);
        }
        return clone;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        super.ngOnInit();
        this.cacheUserConfig();
        if (!this.loadTreeDataType) {
            this.loadTreeDataType = "default";
        }
        this.checkGridOptions();
        this.displayInfo.title = this.title;
        /** 传递上下文 */
        if (this.http) {
            this.http.context = this.context;
        }
        this.allColumnsTitle = this.localService.getValue("lookup.allColumns");
        this.mustWriteSomething = this.localService.getValue("lookup.mustWriteSomething");
        this.mustChoosAdatarow = this.localService.getValue("lookup.mustChoosAdatarow");
        this.addFavoriteSuccess =
            this.localService.getValue("lookup.favoriteInfo.addFav") ||
                this.addFavoriteSuccess;
        this.delFavoriteSuccess =
            this.localService.getValue("lookup.favoriteInfo.cancelFav") ||
                this.delFavoriteSuccess;
        this.dialogMgr.onDialogCreated();
        this._treeInfo_ = this.treeInfo ? cloneDeep(this.treeInfo) : null;
        if (this.quickSelect) {
            this.quickSelect = Object.assign(QuickSelectDefaultOptions, this.quickSelect || {});
        }
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        super.ngOnDestroy();
        this.subscriptions.forEach((/**
         * @param {?} n
         * @return {?}
         */
        (n) => {
            if (n) {
                n.unsubscribe();
                n = null;
            }
        }));
        if (this.selectionMgr) {
            this.selectionMgr.destroy();
        }
        this.subscriptions = [];
        if (this.farrisInstances) {
            this.farrisInstances.destroy(this.el.nativeElement);
        }
        if (this.lookupSearchInputEvent) {
            this.lookupSearchInputEvent();
        }
        this.lookupUtils.destroy();
        this.overLayService.destory(this.el.nativeElement);
        this.overLayService = null;
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    ngOnChanges(changes) {
        if (changes.columns && !changes.columns.isFirstChange()) {
            this.cacheUserConfig();
        }
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        this.lookupSearchInputEvent = onTextChanged.bind(this)();
        // 初始化个性化配置
        if (this.usePersionalConf) {
            this.favHelper.initPersonalInfo();
        }
        if (this.useExtendInfo) {
            /** @type {?} */
            const jsonData = this.selectionMgr.getBindingData();
            this.updateExtendInfo(jsonData, false);
        }
        if (this.viewType === "text") {
            // this.shortcuts.add({
            //     key: 'F2',
            //     target: this.inputGroup.textbox.nativeElement,
            //     command: () => {
            //         this.showDialog();
            //     }
            // });
            this.render2.listen(this.inputGroup.textbox.nativeElement, "keydown.F2", this.showDialog.bind(this));
        }
        else {
            this.registerMouseEventForTagView();
            if (this.tagboxHeight) {
                /** @type {?} */
                const el = this.tagbox.nativeElement.querySelector(".multi-more");
                /** @type {?} */
                let tbh = this.tagboxHeight;
                if (tbh !== "auto") {
                    tbh += "px";
                    if (this.maxTagboxHeight) {
                        this.render2.setStyle(el, "maxHeight", `${this.maxTagboxHeight}px`);
                    }
                }
                this.render2.setStyle(el, "height", tbh);
            }
        }
        if (this.el && this.farrisInstances) {
            this.farrisInstances.add(this.el.nativeElement, this);
        }
    }
    /**
     * @private
     * @return {?}
     */
    createInstance() {
        this.http = this.injector.get(ServerSideToken, null);
        this.messagerService = this.injector.get(MessagerService);
        this.loadingService = this.injector.get(LoadingService);
        this.notifyService = this.injector.get(NotifyService, null);
        this.personalConfigService = this.injector.get(PersonalConfigService, null);
        this.lookupSelectionSer = new LookupSelectionService(this);
        this.utilService = new UtilService(this);
        this.localService = this.injector.get(LocaleService);
        this.treeNodeHelper = new TreeNodeHelper(this);
        this.favHelper = new FavoriteHelper(this);
        this.ttEventMgr = new TreeTableEventManager(this);
        this.multiSelMgr = new MultiSelectionManager(this);
        this.httpMgr = new LookupHttpManager(this);
        this.lookupCmpMgr = new LookupComponentManager(this);
        this.dialogMgr = new LookupDialogManager(this);
        this.selectionMgr = new SelectionManager(this);
        this.dtEventMgr = new DataTableEventManager(this);
    }
    /**
     * @return {?}
     */
    showDialog() {
        if (this.disabled || this.readonly) {
            return false;
        }
        this.selectionMgr.initDisplayValue();
        this.dictPickingSubscription = this.dictPicking({
            instance: this,
        }).subscribe((/**
         * @param {?} pr
         * @return {?}
         */
        (pr) => {
            this.dialogMgr.canOpenDialog(pr);
        }));
        return false;
    }
    /**
     * 判断是否为双列表帮助
     * @return {?}
     */
    isDoublleList() {
        return (this.displayType === LookupGridDisplayType.NavList ||
            this.displayType === LookupGridDisplayType.NavTreeList);
    }
    /**
     * 判断是否显示为树帮助
     * @return {?}
     */
    isTree() {
        return (this.displayType.toUpperCase() === LookupGridDisplayType.TreeList);
    }
    /**
     * @param {?} e
     * @return {?}
     */
    onResized(e) {
        this.resizeCmp(e.size);
        this.resized.emit(e.size);
    }
    /**
     * @param {?} pos
     * @return {?}
     */
    onResizing(pos) {
        this.resizing.emit(pos.size);
        this.resizeCmp(pos.size);
        if (this.isDoublleList() && this.leftComponentRef) {
            this.leftComponentRef.instance.resize({
                width: this.leftPanel.width,
                height: this.dialogMgr.getHeight(),
            });
        }
    }
    /**
     * @param {?} pos
     * @return {?}
     */
    onMaxDialog(pos) {
        this.resizeCmp(pos.size);
        if (this.leftPanel) {
            this.leftComponentRef.instance.resize({
                width: this.leftPanel.width,
                height: this.dialogMgr.getHeight(),
            });
        }
        this.dialogHeight = pos.size.height;
        this.dialogContentHeight = this.dialogMgr.resetDialogContentHeight();
        this.dialogMaxed.emit(pos.size);
    }
    /**
     * @param {?=} size
     * @return {?}
     */
    resizeCmp(size) {
        if (!this.componentRef || !this.componentRef.instance) {
            return;
        }
        if (!size) {
            size = this.dialog.size;
        }
        /** @type {?} */
        const _size = {
            width: size.width -
                this.containerMargin.left -
                this.containerMargin.right,
            height: this.dialogMgr.getHeight(),
        };
        if (this.useFavorite && this.favoritesComponentRef) {
            this.favoritesComponentRef.instance.resize(_size);
        }
        if (this.isRecordSize) {
            this.personalConf.size = this.dialog.size;
            this.personalConfigService.updatePersonalConfig({
                size: this.dialog.size,
            });
        }
        if (this.isDoublleList()) {
            _size.width = size.width - this.leftPanel.width - 27;
        }
        this.componentRef.instance.resize(_size);
    }
    /**
     * @private
     * @return {?}
     */
    checkGridOptions() {
        if (!this.gridOptions.idField) {
            this.writeConsole("未设置主键字段 idField");
        }
        if (!this.beforeSelectData) {
            this.beforeSelectData = (/**
             * @return {?}
             */
            () => {
                return of(true);
            });
        }
        /** @type {?} */
        const ctxMenuLanguages = this.localService.getValue("lookup.contextMenu");
        this.treeTableOptions = Object.assign({ language: ctxMenuLanguages }, this.defaultTreeTableOptions, this.treeTableOptions || {});
        // this.dataTableOptions = Object.assign({}, this.defaultTreeTableOptions, this.dataTableOptions);
        // this.navTreeTableOptions = Object.assign({}, this.defaultTreeTableOptions, this.navTreeTableOptions);
    }
    /**
     * @return {?}
     */
    getComponentType() {
        if (!this.displayType) {
            this.displayType = "LIST";
        }
        switch (this.displayType) {
            case LookupGridDisplayType.List:
            case LookupGridDisplayType.NavList:
            case LookupGridDisplayType.NavTreeList:
                return DataTableComponent;
            case LookupGridDisplayType.TreeList:
                return TreeTableComponent;
        }
    }
    /**
     * @param {?=} msg
     * @return {?}
     */
    showLoading(msg = "") {
        if (this.dialog && this.dialog.modalContent && !this.loading) {
            /** @type {?} */
            const opts = {
                container: this.dialog.modalContent,
                delay: 200,
            };
            if (msg) {
                opts["message"] = msg;
            }
            this.loading = this.loadingService.show(opts);
        }
        else {
            this.loading = this.loadingService.show();
        }
    }
    /**
     * @return {?}
     */
    closeLoading() {
        if (this.loading) {
            this.loading.close();
            this.loading = null;
        }
        this.loadingService.clearAll();
    }
    /**
     * @param {?} resdata
     * @return {?}
     */
    getSearchColumns(resdata) {
        /** @type {?} */
        const cols = resdata.columns || this.columns;
        if (resdata.searchFields) {
            return resdata.searchFields.map((/**
             * @param {?} sf
             * @return {?}
             */
            (sf) => {
                /** @type {?} */
                const c = cols.find((/**
                 * @param {?} col
                 * @return {?}
                 */
                (col) => col.field.toLowerCase() === sf.value.toLowerCase()));
                if (c) {
                    sf.label = c.title;
                }
                return sf;
            }));
        }
        else if (cols) {
            return cols
                .filter((/**
             * @param {?} c
             * @return {?}
             */
            (c) => c.searchField))
                .map((/**
             * @param {?} col
             * @return {?}
             */
            (col) => {
                return {
                    label: col.title,
                    value: col.field,
                };
            }));
        }
        return [];
    }
    /**
     * @private
     * @param {?} resData
     * @return {?}
     */
    initOptions(resData) {
        /** @type {?} */
        let obser = of(true);
        this.gridOptions.searchFields = this.getSearchColumns(resData);
        if (resData) {
            // 如果组件中未设置显示列，则使用服务器端返回的设置； 否则将使用组件中配置的展示列
            if ((!this.columns || !this.columns.length) &&
                resData.columns &&
                resData.columns.length) {
                this.columns = resData.columns;
            }
            this.setLookupTitleText(resData);
            if (this.isDoublleList() &&
                this.dialogWidth < this.navLookupDialogMinWidth &&
                !this.isRecordSize) {
                this.dialogWidth = this.navLookupDialogMinWidth;
                this.dialog.reSize({ width: this.dialogWidth });
            }
            if (!this.customDisplayType) {
                this.displayType =
                    resData.displayType || this.displayType || "LIST";
                this.changeDetector.detectChanges();
                this.lookupCmpMgr.createComponentWithServerData(resData);
            }
            if (this.isDoublleList() &&
                resData.navigation &&
                !this.leftComponentRef) {
                this.navigationOptions = resData.navigation;
                this.navigationOptions.hover = true;
                this.navigationOptions.searchFields = this.getSearchColumns(this.navigationOptions);
                // update columns formatter
                if (this.customNavFormatter) {
                    this.navigationOptions.columns.forEach((/**
                     * @param {?} col
                     * @return {?}
                     */
                    (col) => {
                        if (this.customNavFormatter[col.field]) {
                            col.formatter = this.customNavFormatter[col.field];
                        }
                    }));
                    this.navigationOptions["rowStyler"] =
                        this.customNavFormatter.rowStyler;
                    this.navigationOptions["cellStyler"] =
                        this.customNavFormatter.cellStyler;
                }
                // 20210926 树导航帮助中 左侧树支持分层加载
                if (this.displayType === LookupGridDisplayType.NavTreeList) {
                    /** @type {?} */
                    let _nav_treeinfo_loadtype = this.navigationOptions.treeInfo.loadDataType;
                    if (this.loadTreeDataType !== "default") {
                        _nav_treeinfo_loadtype =
                            this.loadTreeDataType === "loadall"
                                ? "all"
                                : "async";
                    }
                    this.navigationOptions.treeInfo.loadDataType =
                        _nav_treeinfo_loadtype;
                }
                obser = this.lookupCmpMgr.createLeftComponent(this.navigationOptions);
            }
        }
        else {
            this.lookupCmpMgr.createContent(this.gridOptions);
            this.lookupCmpMgr.createFavoriteComponent();
        }
        if (this.isTextChange) {
            this.componentRef.instance.searchData.value = this.displayText;
        }
        // update columns formatter
        if (this.customFormatter) {
            this.columns.forEach((/**
             * @param {?} col
             * @return {?}
             */
            (col) => {
                if (this.customFormatter[col.field]) {
                    col.formatter = this.customFormatter[col.field];
                }
            }));
            if (this.customFormatter.rowStyler) {
                this.componentRef.instance.rowStyler =
                    this.customFormatter.rowStyler;
            }
            if (this.customFormatter.cellStyler) {
                this.componentRef.instance.cellStyler =
                    this.customFormatter.cellStyler;
            }
        }
        this.changeDetector.detectChanges();
        return obser;
    }
    /**
     * 设置帮助窗口标题
     * @private
     * @param {?} resData
     * @return {?}
     */
    setLookupTitleText(resData) {
        if (resData.displayInfo) {
            this.displayInfo = resData.displayInfo;
        }
        // 如果自定义标题，将以此标题为准。否则加载服务器端返回的数据
        if (this.title && this.title !== "此处显示帮助标题") {
            this.displayInfo.title = this.title;
        }
        if (this.displayInfo && resData.title) {
            if (!this.displayInfo.title) {
                this.displayInfo.title = resData.title;
            }
        }
    }
    /**
     * @private
     * @return {?}
     */
    showGetAllChildrenCheckbox() {
        if (this.isTree() && this.treeInfo) {
            this.enableGetAllChildNodes =
                this.treeInfo.loadDataType !== "all" && this.treeInfo.layerType === "pathcode";
        }
        else {
            this.enableGetAllChildNodes = false;
        }
    }
    /**
     * @return {?}
     */
    initData() {
        /** @type {?} */
        const observer = {
            next: (/**
             * @param {?} data
             * @return {?}
             */
            (data) => {
                // 服务器端发生错误，返回NULL 时，直接关闭窗口
                if (data === null) {
                    this.isShow = false;
                    if (this.dialog) {
                        this.dialog.close();
                    }
                    return;
                }
                this.initOptions(data).subscribe((/**
                 * @return {?}
                 */
                () => {
                    this.selectedColumns =
                        this.multiSelMgr.initSelectedColumns();
                    this.favoriteColumns = this.favHelper.getFavoriteColumns();
                    if (this.usePersionalConf) {
                        if (!this.personalConfigService.getPersonalData()) {
                            this.personalConfigService.savePersonalConfig(this.personalConf);
                        }
                    }
                    if (!this.isTabChanged) {
                        this.lookupSelectionSer.loadSelections(data.selectedItems || []);
                    }
                    if (this.isDoublleList()) {
                        // 导航帮助时，设置左侧选中数据时，不加载主数据列表。
                        if (this.navSelectedIds || this.selectFirstInNav) {
                            this.loadDataWhenOpen = false;
                        }
                    }
                    if (data['activeTab'] && !this.isTabChanged) {
                        this.activeTab = 'datalist';
                    }
                    this.loadData(data);
                    if (this.isTree()) {
                        if (this.activeTab === "datalist") {
                            /** @type {?} */
                            const tt = (/** @type {?} */ (this.componentRef.instance));
                            if (tt.searchData.value && this.items && this.items.length) {
                                if (this.items[0].children && this.items[0].children.length) {
                                    tt.toggleExpand(this.items[0], true, false);
                                }
                            }
                        }
                        this.showGetAllChildrenCheckbox();
                    }
                    this.isTextChange = false;
                    this._searchResult = null; // 清空临时查询 结果
                    this.closeLoading();
                    // this.isReady$.next(true);
                    this.isReady = true;
                    this.changeDetector.detectChanges();
                    this.lookupinitializationSubject.next();
                }));
            }),
            error: (/**
             * @param {?} err
             * @return {?}
             */
            (err) => {
                // this.isReady$.next(true);
                this.closeLoading();
                this._searchResult = null; // 清空临时查询 结果
                this.isTextChange = false;
                this.hasError = true;
                this.changeDetector.detectChanges();
                if (typeof err === "string") {
                    this.messagerService.error(err);
                }
                else {
                    if (err) {
                        if (err.Message) {
                            this.messagerService.error(err.Message);
                        }
                        else {
                            if (err.error) {
                                this.messagerService.error(err.error.Message);
                            }
                            else {
                                this.messagerService.error("应用服务器错误,请联系系统管理员！");
                            }
                        }
                    }
                }
            }),
        };
        /** @type {?} */
        let p = {
            pageInfo: {
                pageSize: this.pageSize || 20,
                pageIndex: 1,
            },
        };
        /** @type {?} */
        let t = "all";
        if (this.isTextChange) {
            this._searchState = {
                field: "*",
                value: this.displayText
            };
            p = {
                search: this._searchState
            };
            t = 'search';
        }
        if (!this.isTabChanged && this.enableToSelect) {
            /** @type {?} */
            const vals = this.selectionMgr.getSelectedIds();
            if (vals && vals.length) {
                p["selectedInfo"] = {
                    selected: true,
                    selectedIds: vals,
                };
            }
            else {
                if (this["selectedIds"]) {
                    p["selectedInfo"] = {
                        selected: true,
                        selectedIds: this["selectedIds"],
                    };
                }
            }
        }
        this.showLoading();
        this.hasError = false;
        this.httpMgr.lookupRequest(p, t).pipe(map((/**
         * @param {?} restData
         * @return {?}
         */
        (restData) => {
            if (restData) {
                restData.selectedItems = restData["selectedData"] || [];
            }
            else {
                if (restData && typeof restData === "object") {
                    restData.selectedItems = [];
                }
            }
            return restData === null ? false : restData;
        }))).subscribe(observer);
    }
    /**
     * @param {?=} resData
     * @param {?=} rebindEvent
     * @return {?}
     */
    loadData(resData, rebindEvent = true) {
        if (this.activeTab === "datalist") {
            if (this.useFavorite && !this.isTree()) {
                this.favHelper.updateFavoritesStatus(resData.items);
            }
            switch (this.displayType) {
                case LookupGridDisplayType.NavList:
                case LookupGridDisplayType.NavTreeList:
                case LookupGridDisplayType.List:
                    this.loadDataTableData(resData);
                    if (rebindEvent) {
                        this.dtEventMgr.bindDataTableEvent();
                    }
                    break;
                case LookupGridDisplayType.TreeList:
                    this.loadTreeTableData(resData, rebindEvent);
                    break;
            }
        }
        else if (this.activeTab === "favorite") {
            this.loadFavData(resData);
        }
        // 选中数据
        this.selectionMgr.selectCurrentValue();
    }
    /**
     * @private
     * @param {?} result
     * @return {?}
     */
    loadFavData(result) {
        // 加载收藏数据
        if (this.useFavorite) {
            if (this.isTree()) {
                this.setTreeInfo(result);
                /** @type {?} */
                const treeNodes = this.favHelper.initFavoriteTreeData(result.items);
                /** @type {?} */
                const treeData = this.treeNodeHelper
                    .flatTreeNodes(treeNodes)
                    .map((/**
                 * @param {?} n
                 * @return {?}
                 */
                (n) => {
                    n.data["_addtional_"] = n["addtional"];
                    return n.data;
                }));
                this.lookupSelectionSer.initFavoriteItems(treeData);
                setTimeout((/**
                 * @return {?}
                 */
                () => {
                    this.favoritesComponentRef.instance.scrollToY(1);
                }));
            }
            else {
                this.lookupSelectionSer.initFavoriteItems(result.items);
            }
            this.favHelper.loadFavoritesData(result);
        }
    }
    /**
     * @param {?=} resData
     * @return {?}
     */
    loadDataTableData(resData) {
        if (resData) {
            if (this.gridOptions) {
                if (resData && resData.columns && resData.columns.length) {
                    if (!this.gridOptions.columns ||
                        !this.gridOptions.columns.length) {
                        this.columns = resData.columns;
                    }
                }
                this.items = resData.items;
                this.total = resData.total || resData.items.length;
                if (resData.searchFields) {
                    this.gridOptions.searchFields = this.getSearchColumns(resData);
                }
                if (resData.pageInfo) {
                    if (resData.pageInfo.pageList &&
                        (!this.pageList || !this.pageList.length)) {
                        this.pageList = resData.pageInfo.pageList;
                    }
                    this.pagination = resData.pageInfo.enablePager;
                    this.pageIndex = resData.pageInfo.pageIndex;
                    this.pageSize = resData.pageInfo.pageSize;
                }
                else {
                    this.pagination = false;
                }
            }
            else {
                this.gridOptions = (/** @type {?} */ (resData));
            }
        }
        this.updateDataTable(this.gridOptions);
    }
    /**
     * @private
     * @param {?} opts
     * @return {?}
     */
    updateDataTable(opts) {
        if (opts) {
            /** @type {?} */
            const dt = (/** @type {?} */ (this.componentRef.instance));
            if (!dt.columns || dt.columns.length === 0) {
                dt.columns = this.gridOptions.columns;
            }
            dt.allColumnsTitle = this.allColumnsTitle;
            dt.searchFields = opts.searchFields;
            dt.pagination = opts.pagination;
            dt.pageList = this.pageList;
            dt.remoteSort = this.remoteSort;
            if (this.loadDataWhenOpen) {
                dt.loadData({
                    pageSize: opts.pageSize,
                    pageIndex: this.gridOptions.pageIndex,
                    total: this.gridOptions.total,
                    data: this.gridOptions.items,
                });
                dt.cd.markForCheck();
            }
            this.loadSuccess.emit();
        }
    }
    /**
     * @private
     * @param {?} resData
     * @return {?}
     */
    setTreeInfo(resData) {
        if (!resData) {
            return;
        }
        /** @type {?} */
        let _treeInfo = null;
        if (resData.treeInfo) {
            /** @type {?} */
            const onlySelectLeaf = resData.treeInfo.onlySelectLeaf;
            /** @type {?} */
            let _osl = "no";
            if (onlySelectLeaf !== undefined) {
                _osl = onlySelectLeaf ? "yes" : "no";
            }
            _treeInfo = Object.assign({}, resData.treeInfo, { onlySelectLeaf: _osl });
        }
        if (this.gridOptions.treeInfo) {
            /** @type {?} */
            const treeInfo = this.gridOptions.treeInfo;
            if (treeInfo) {
                if (treeInfo.onlySelectLeaf === undefined ||
                    treeInfo.onlySelectLeaf === null) {
                    treeInfo.onlySelectLeaf = "no";
                }
                if (typeof treeInfo.onlySelectLeaf === "boolean") {
                    treeInfo.onlySelectLeaf = treeInfo.onlySelectLeaf ? "yes" : "no";
                }
                // 20210902
                if (this.loadTreeDataType === "default") {
                    treeInfo.loadDataType = _treeInfo.loadDataType;
                }
                else {
                    treeInfo.loadDataType =
                        this.loadTreeDataType === "loadall" ? "all" : "async";
                }
                if (treeInfo.onlySelectLeaf !== "default") {
                    _treeInfo = Object.assign(_treeInfo, treeInfo);
                }
            }
        }
        this.treeInfo = _treeInfo;
    }
    /**
     * @private
     * @param {?=} resData
     * @param {?=} rebindEvent
     * @return {?}
     */
    loadTreeTableData(resData, rebindEvent = true) {
        /** @type {?} */
        const items = resData ? resData.items : this.gridOptions.items;
        this.items = items;
        if (resData) {
            this.setTreeInfo(resData);
            /** @type {?} */
            const treeInfo = this.gridOptions.treeInfo;
            if (!treeInfo["treeDataIsInit"]) {
                if (treeInfo.layerType.toLowerCase() === "pathcode") {
                    this.items = this.lookupUtils.makeTree(this.items, treeInfo);
                }
                else {
                    this.items = this.lookupUtils.makeTreeWithParentID(this.items, "", `${treeInfo.dataField}.${treeInfo.parentField}`, this.idField);
                }
            }
        }
        if (this.componentRef.instance instanceof TreeTableComponent) {
            /** @type {?} */
            const tt = (/** @type {?} */ (this.componentRef.instance));
            if (this.treeInfo) {
                tt.loadDataType = this.treeInfo.loadDataType;
            }
            if (!this.columns || !this.columns.length) {
                tt.columns = resData.columns || [];
                this.gridOptions.columns = tt.columns;
            }
            /** @type {?} */
            const isLoadAllTreeData = (/**
             * @return {?}
             */
            () => {
                if (this.loadTreeDataType === "default") {
                    return tt.loadDataType === "all";
                }
                else {
                    return this.loadTreeDataType === "loadall";
                }
            });
            if (rebindEvent) {
                this.ttEventMgr.bindTreetableEvent();
            }
            /** @type {?} */
            const isLoadAll = isLoadAllTreeData();
            /** 完整树节点检查 By Lucas 20200302 */
            this.items = this.checkNodeCanBeSelect(this.items, isLoadAll);
            tt.keepSelect = true;
            if (this.useFavorite) {
                this.favHelper.updateFavoritesStatus(this.items);
            }
            if (this.loadDataWhenOpen) {
                tt.loadData(this.items);
            }
            tt.resize();
        }
    }
    /**
     * 在构完整树中，有部分节点因为条件被过滤，为显示完整树，
     * 这些节点在运行时是不允许被选中的, 返回新的节点数组
     * By Lucas 20200302
     * @param {?} nodes
     * @param {?=} isAllTreeData
     * @return {?}
     */
    checkNodeCanBeSelect(nodes, isAllTreeData = false) {
        if (nodes && nodes.length) {
            return nodes.map((/**
             * @param {?} node
             * @return {?}
             */
            (node) => {
                if (node.hasOwnProperty("addtional")) {
                    node.selectable = !node["addtional"];
                }
                if (node.children && node.children.length) {
                    this.checkNodeCanBeSelect(node.children, isAllTreeData);
                }
                else {
                    if (isAllTreeData && (!this._searchState || !this._searchState.value)) {
                        node.leaf = true;
                    }
                }
                return node;
            }));
        }
        return nodes;
    }
    /**
     * @param {?} val
     * @return {?}
     */
    onChanges(val) {
        if (!val) {
            this.onClear();
        }
        else {
            this.displayText = val;
            this.isTextChange = this.originalText !== this.displayText;
            if (this.nosearch) {
                this.setModelValue(val);
                this.clearMappings.emit({ instance: this, value: val, });
            }
            this.onModelTouched(val);
            this.valueChanged.emit(val);
            this.textChanged.emit(val);
        }
    }
    /**
     * @param {?=} emit
     * @return {?}
     */
    onClear(emit = true) {
        this.isTextChange = false;
        this.displayText = "";
        this.displayValue = "";
        this.originalText = "";
        this.extendInfo = "";
        this.setModelValue("");
        if (this.mappingFn) {
            this.mappingFn(null, this.mapFields);
        }
        else {
            if (this.mapFields) {
                /** @type {?} */
                const bindingData = this.selectionMgr.getBindingData();
                if (bindingData) {
                    this.defaultMapping.lookupFieldMap(null, this.mapFields, bindingData);
                }
            }
        }
        this.multiSelMgr.clear();
        if (emit) {
            this.clear.emit();
        }
    }
    /**
     * @param {?=} emit
     * @return {?}
     */
    clearValue(emit = true) {
        this.onClear(emit);
    }
    /**
     * @param {?=} rowData
     * @return {?}
     */
    selectItem(rowData) {
        /** @type {?} */
        let selectedRow = null;
        if (rowData) {
            selectedRow = rowData;
        }
        else {
            selectedRow = this.selections;
            if (!selectedRow) {
                selectedRow = null;
            }
            else {
                if (Array.isArray(selectedRow) && !selectedRow.length) {
                    selectedRow = null;
                }
            }
        }
        // 如果定义自定义处理确定事件，则由自定义事件处理后面的逻辑
        if (this.okHandler) {
            this.okHandler({ data: selectedRow, instance: this });
        }
        else {
            if (this.beforeSelectData) {
                /** @type {?} */
                const bsdResult = this.beforeSelectData({
                    instance: this,
                    data: selectedRow,
                });
                if (bsdResult && bsdResult.subscribe) {
                    bsdResult.subscribe((/**
                     * @param {?} e
                     * @return {?}
                     */
                    (e) => {
                        this._beforeSelectDataCallBack(e, selectedRow);
                    }));
                }
                else {
                    this.writeConsole('帮助数据选中前事件未返回值或返回类型非Observable, 请检查', 'error');
                }
            }
            else {
                this._beforeSelectDataCallBack(true, selectedRow);
            }
        }
    }
    /**
     * @private
     * @param {?} rows
     * @return {?}
     */
    getParentPathCode(rows) {
        /** @type {?} */
        const maxBy = (/**
         * @param {?} arr
         * @param {?} fn
         * @return {?}
         */
        (arr, fn) => Math.max(...arr.map(typeof fn === "function" ? fn : (/**
         * @param {?} val
         * @return {?}
         */
        (val) => val[fn]))));
        const { dataField, pathField, layerField } = this.treeInfo;
        /** @type {?} */
        const maxLayer = maxBy(rows, (/**
         * @param {?} x
         * @return {?}
         */
        (x) => x[dataField][layerField]));
        for (let i = 1; i <= maxLayer; i++) {
            /** @type {?} */
            const _rows = rows.filter((/**
             * @param {?} n
             * @return {?}
             */
            (n) => n[dataField][layerField] === i));
            if (_rows && _rows.length && _rows.length < rows.length) {
                _rows.forEach((/**
                 * @param {?} r
                 * @return {?}
                 */
                (r) => {
                    /** @type {?} */
                    const patchCode = r[dataField][pathField];
                    /** @type {?} */
                    const _rows2 = rows.filter((/**
                     * @param {?} n
                     * @return {?}
                     */
                    (n) => n[dataField][pathField] !== patchCode &&
                        n[dataField][pathField].indexOf(patchCode) === 0));
                    if (_rows2 && _rows2.length) {
                        rows = rows.filter((/**
                         * @param {?} n
                         * @return {?}
                         */
                        (n) => n[dataField][pathField] !== patchCode));
                    }
                }));
            }
        }
        return rows;
    }
    /**
     * @private
     * @param {?} e
     * @param {?} selectedRow
     * @return {?}
     */
    _beforeSelectDataCallBack(e, selectedRow) {
        /** @type {?} */
        let canSelect = e;
        /** @type {?} */
        let message = "";
        if (typeof e === "boolean") {
            canSelect = e;
        }
        else {
            if (typeof e === "object") {
                canSelect = e.canSelect;
                message = e.message;
            }
            else {
                canSelect = false;
            }
        }
        if (!selectedRow) {
            message = this.mustChoosAdatarow;
            canSelect = false;
        }
        if (canSelect) {
            /** @type {?} */
            let selectedRows$ = of(selectedRow);
            // 多选 树帮助 异步加载 分级码 开启同步选择 或包含下级
            if (!this.singleSelect && this.enableCascade && this.isTree()) {
                if (this.treeInfo.loadDataType !== "all" && this.treeInfo.layerType === "pathcode" && this.isGetAllChidlNodes) {
                    /** @type {?} */
                    let parentsIds = this.getParentPathCode(selectedRow);
                    if (parentsIds && parentsIds.length) {
                        parentsIds = parentsIds.map((/**
                         * @param {?} n
                         * @return {?}
                         */
                        (n) => n[this.treeInfo.dataField][this.treeInfo.pathField]));
                        this.showLoading();
                        selectedRows$ = this.httpMgr
                            .getData({ parentsIds }, "allChildren")
                            .pipe(map((/**
                         * @param {?} r
                         * @return {?}
                         */
                        (r) => {
                            /** @type {?} */
                            const items = r.items
                                ? r.items.map((/**
                                 * @param {?} d
                                 * @return {?}
                                 */
                                (d) => d.data))
                                : [];
                            /** @type {?} */
                            const allitems = [...selectedRow, ...items];
                            /** @type {?} */
                            let ids = allitems.map((/**
                             * @param {?} n
                             * @return {?}
                             */
                            (n) => n[this.idField]));
                            ids = Array.from(new Set(ids));
                            return ids.map((/**
                             * @param {?} n
                             * @return {?}
                             */
                            (n) => allitems.find((/**
                             * @param {?} a
                             * @return {?}
                             */
                            (a) => a[this.idField] === n))));
                        })));
                    }
                }
            }
            selectedRows$.subscribe((/**
             * @param {?} rows
             * @return {?}
             */
            (rows) => {
                this.closeLoading();
                this.updateControlValue(rows);
                if (!this.useTip || !rows) {
                    return;
                }
                if (this.useTip) {
                    this.personalConfigService.updateQueckSelected(rows, this.localService.localeId);
                }
            }));
        }
        else {
            if (message) {
                if (this.notifyService) {
                    this.notifyService.warning(message);
                }
                else {
                    this.messagerService.warning(message, "", true, (/**
                     * @return {?}
                     */
                    () => {
                        this.dialog.el.nativeElement.click();
                    }));
                }
            }
        }
    }
    /**
     * @private
     * @param {?} selectedRow
     * @return {?}
     */
    updateControlValue(selectedRow) {
        if (selectedRow) {
            this.setDisplayText(selectedRow);
            if (this.mappingFn) {
                this.mappingFn(selectedRow, this.mapFields, this.bindingData);
            }
            else {
                if (this.mapFields && this.bindingData) {
                    this.defaultMapping.lookupFieldMap(selectedRow, this.mapFields, this.bindingData);
                }
            }
            this.setModelValue(this.displayText);
            if (this["inDatagrid"] && selectedRow) {
                /** @type {?} */
                const selectItems = Array.isArray(selectedRow)
                    ? selectedRow
                    : [selectedRow];
                this.updateBindData(selectItems);
            }
            this.selectedData.emit(selectedRow);
            this.runDictPickedEvent(selectedRow);
            this.isTextChange = false;
        }
        else {
            if (document.activeElement) {
                ((/** @type {?} */ (document.activeElement))).blur();
            }
            this.messagerService.warning(this.mustChoosAdatarow);
        }
    }
    /**
     * @private
     * @param {?} selectedRow
     * @return {?}
     */
    updateBindData(selectedRow) {
        if (!this.mapFields) {
            return;
        }
        /** @type {?} */
        const helpFields = Object.keys(this.mapFields);
        if (this.ngControl &&
            this.ngControl.formDirective &&
            this.ngControl.formDirective.form &&
            this.ngControl.formDirective.form.bindingData) {
            /** @type {?} */
            const bindingData = this.ngControl.formDirective.form.bindingData;
            if (bindingData) {
                helpFields.forEach((/**
                 * @param {?} helpField
                 * @return {?}
                 */
                (helpField) => {
                    this.mapFields[helpField]
                        .split(",")
                        .forEach((/**
                     * @param {?} formField
                     * @return {?}
                     */
                    (formField) => {
                        /** @type {?} */
                        const val = selectedRow
                            .map((/**
                         * @param {?} r
                         * @return {?}
                         */
                        (r) => {
                            return this.utils.getValue(helpField, r);
                        }))
                            .join(this.multipleChoiceSeparator);
                        this.utils.setValue(bindingData, formField, val);
                    }));
                }));
            }
            // if (bindingData.setValue) {
            //     const bindingPath = this.ngControl.formDirective.form.bindingPath;
            //     let pathArr: string[] = [];
            //     if (bindingPath) {
            //         pathArr = bindingPath.split('/').filter(n => n !== '');
            //     }
            //     helpFields.forEach((helpField: any) => {
            //         this.mapFields[helpField].split(',').forEach((formField: any) => {
            //             const fieldPaths = pathArr.concat(formField.split('.'));
            //             const val = selectedRow.map(r => {
            //                 return this.utils.getValue(formField, r);
            //             }).join(this.multipleChoiceSeparator);
            //             bindingData.setValue(pathArr.concat(fieldPaths), val, true, true);
            //         });
            //     });
            // }
        }
        else {
            // if (this.bindingData) {
            //     helpFields.forEach((helpField: any) => {
            //         this.mapFields[helpField].split(',').forEach((formField: any) => {
            //             const val = selectedRow.map(r => {
            //                 return this.utils.getValue(formField, r);
            //             }).join(this.multipleChoiceSeparator);
            //             this.utils.setValue(this.bindingData, formField, val);
            //         });
            //     });
            // }
        }
    }
    /**
     * @private
     * @param {?=} isHelpData
     * @return {?}
     */
    getExtendInfoFields(isHelpData = true) {
        if (!this.extInfoFields) {
            this.writeConsole(`未设置扩展字段。`);
            return [];
        }
        /** @type {?} */
        const tipFieldArr = this.extInfoFields.split(",");
        if (isHelpData) {
            /** @type {?} */
            let extendInfoFields = [];
            extendInfoFields = tipFieldArr.map((/**
             * @param {?} tf
             * @return {?}
             */
            (tf) => {
                /** @type {?} */
                const mapKey = Object.keys(this.mapFields).find((/**
                 * @param {?} k
                 * @return {?}
                 */
                (k) => {
                    return this.mapFields[k] === tf;
                }));
                if (mapKey) {
                    return mapKey;
                }
                else {
                    this.writeConsole(`在帮助映射字段中未找到${tf}`);
                    return "";
                }
            }));
            return extendInfoFields;
        }
        return tipFieldArr;
    }
    /**
     * @return {?}
     */
    onUpdateExtendInfo() {
        /** @type {?} */
        const jsonData = this.selectionMgr.getBindingData();
        this.updateExtendInfo(jsonData, false);
    }
    // 选中帮助数据后，更新扩展信息
    /**
     * @private
     * @param {?} data
     * @param {?=} isHelpData
     * @return {?}
     */
    updateExtendInfo(data, isHelpData = true) {
        if (data) {
            if (this.extInfoFormatter) {
                if (Array.isArray(data)) {
                    /** @type {?} */
                    const tipString = data.map((/**
                     * @param {?} n
                     * @return {?}
                     */
                    (n) => {
                        return this.getExtendInfoText(n);
                    }));
                    this.extendInfo = tipString.join("，");
                }
                else {
                    this.extendInfo = this.getExtendInfoText(data);
                }
            }
            else {
                /** @type {?} */
                const extendInfoFields = this.getExtendInfoFields(isHelpData);
                if (extendInfoFields && extendInfoFields.length) {
                    if (Array.isArray(data)) {
                        /** @type {?} */
                        const tipString = data.map((/**
                         * @param {?} n
                         * @return {?}
                         */
                        (n) => {
                            return this.getExtendInfoText(n, extendInfoFields);
                        }));
                        this.extendInfo = tipString.join("，");
                    }
                    else {
                        this.extendInfo = this.getExtendInfoText(data, extendInfoFields);
                    }
                }
            }
        }
    }
    /**
     * @private
     * @param {?} itemData
     * @param {?=} fields
     * @return {?}
     */
    getExtendInfoText(itemData, fields = null) {
        if (typeof this.extInfoFormatter === "function") {
            return this.extInfoFormatter({
                bindingData: itemData,
                instance: this,
            });
        }
        else {
            /** @type {?} */
            const tipString = [];
            /** @type {?} */
            const tipValues = fields.map((/**
             * @param {?} t
             * @return {?}
             */
            (t) => {
                /** @type {?} */
                const tfv = this.utils.getValue(t, itemData);
                tipString.push(tfv);
                return { [t]: tfv };
            }));
            return tipString.join(" ");
        }
    }
    /**
     * @private
     * @param {?} rows
     * @return {?}
     */
    getDisplayText(rows) {
        /** @type {?} */
        const df = this.displayFields
            ? this.displayFields.split(",")
            : [this.textField];
        /** @type {?} */
        const txtArr = rows.map((/**
         * @param {?} r
         * @return {?}
         */
        (r) => {
            /** @type {?} */
            const t = [];
            df.forEach((/**
             * @param {?} n
             * @return {?}
             */
            (n) => {
                t.push(this.utils.getValue(n, r));
            }));
            return t.join(this.displayTextSeparator);
        }));
        if (this.gridOptions.singleSelect) {
            return txtArr.join("");
        }
        else {
            if (this.displayFields) {
                return txtArr.map((/**
                 * @param {?} t
                 * @return {?}
                 */
                (t) => "[" + t + "]")).join(",");
            }
            else {
                return txtArr.join(",");
            }
        }
    }
    /**
     * @private
     * @param {?} selectedRow
     * @return {?}
     */
    setDisplayText(selectedRow) {
        this.originalText = this.displayText;
        if (this.gridOptions.singleSelect) {
            if (this.displayFormatter) {
                this.displayText = this.utils.getValue(this.textField, selectedRow);
                if (!this.isTree()) {
                    this.displayText = this.displayFormatter(this.displayText, [selectedRow], {
                        lookup: this,
                        datatable: (/** @type {?} */ (this.componentRef
                            .instance)),
                    });
                }
                else {
                    /** @type {?} */
                    const tt = (/** @type {?} */ (this.componentRef.instance));
                    this.displayText = this.displayFormatter(this.displayText, [selectedRow], { lookup: this, tree: tt });
                }
            }
            else {
                this.displayText = this.getDisplayText([selectedRow]);
            }
            this.displayValue = selectedRow[this.valueField];
        }
        else {
            if (selectedRow.length) {
                if (this.displayFormatter) {
                    this.displayText = selectedRow
                        .map((/**
                     * @param {?} r
                     * @return {?}
                     */
                    (r) => {
                        return this.utils.getValue(this.textField, r);
                    }))
                        .join(this.multipleChoiceSeparator);
                    if (!this.isTree()) {
                        this.displayText = this.displayFormatter(this.displayText, selectedRow, {
                            lookup: this,
                            datatable: (/** @type {?} */ (this.componentRef
                                .instance)),
                        });
                    }
                    else {
                        /** @type {?} */
                        const tt = (/** @type {?} */ (this.componentRef
                            .instance));
                        this.displayText = this.displayFormatter(this.displayText, selectedRow, { lookup: this, tree: tt });
                    }
                }
                else {
                    this.displayText = this.getDisplayText(selectedRow);
                }
                this.displayValue = selectedRow
                    .map((/**
                 * @param {?} r
                 * @return {?}
                 */
                (r) => {
                    return this.utils.getValue(this.valueField, r);
                }))
                    .join(this.multipleChoiceSeparator);
            }
        }
        this.originalText = this.displayText;
    }
    /**
     * @param {?} rowData
     * @return {?}
     */
    runDictPickedEvent(rowData) {
        if (this.dictPicked) {
            if (this.okButton) {
                this.okButton.nativeElement.disabled = true;
            }
            this.dictPickedSubscription = this.dictPicked(rowData).subscribe((/**
             * @param {?} v
             * @return {?}
             */
            (v) => {
                if (this.okButton) {
                    this.okButton.nativeElement.disabled = false;
                }
                if (typeof v === "boolean") {
                    if (v) {
                        this.closeDialog(rowData);
                    }
                }
                else if (typeof v === "object" &&
                    v.closeDialog !== undefined &&
                    !v.closeDialog) {
                    if (v.message) {
                        this.messagerService.warning(v.message);
                    }
                    else {
                        this.closeDialog(rowData);
                    }
                }
                else {
                    this.closeDialog(rowData);
                }
            }));
        }
        else {
            this.closeDialog(rowData);
        }
    }
    /**
     * @private
     * @return {?}
     */
    focusToInput() {
        this.zone.runOutsideAngular((/**
         * @return {?}
         */
        () => {
            setTimeout((/**
             * @return {?}
             */
            () => {
                if (this.inputGroup && this.inputGroup.textbox) {
                    this.inputGroup.textbox.nativeElement.focus();
                }
            }));
        }));
    }
    /**
     * @param {?=} rowData
     * @return {?}
     */
    closeDialog(rowData = null) {
        this.isShow = false;
        if (this.dialog) {
            this.dialog.close();
        }
        if (rowData) {
            this.multiSelMgr.save(rowData);
        }
        this.focusToInput();
    }
    /**
     * @return {?}
     */
    cancelSelect() {
        this.closeDialog();
        this.isTextChange = false;
        if (!this.nosearch) {
            this.displayText = this.originalText;
            this.setModelValue(this.displayText);
        }
        if (this.cancelHandler) {
            this.cancelHandler(this);
        }
    }
    /**
     * @param {?} v
     * @return {?}
     */
    setModelValue(v) {
        if (this.onModelChange) {
            this.onModelChange(v);
            this.valueChanged.emit(v);
        }
    }
    // 数据列表，收藏， 已选数据 tab 页切换
    /**
     * @param {?} e
     * @return {?}
     */
    onTabChange(e) {
        this.activeTab = e.tabIndex;
        this.personalConf.tabIndex = this.activeTab;
        /** @type {?} */
        const _firstChange = this.isTabChanged;
        this.isTabChanged = true;
        this.personalConfigService.updatePersonalConfig({
            tabIndex: e.tabIndex,
        });
        if (this.activeTab === "datalist") {
            if (this.isDoublleList() && !this.leftComponentRef) {
                if (this.navigationOptions) {
                    this.lookupCmpMgr.createLeftComponent(this.navigationOptions);
                }
                else {
                    this.initData();
                    return;
                }
            }
            if ((!this.items || !this.items.length) && (!this._searchState || !this._searchState.value)) {
                this.initData();
            }
            else {
                if (!_firstChange) {
                    if (this.isTree()) {
                        this.loadTreeTableData();
                    }
                    else {
                        this.loadDataTableData();
                        this.dtEventMgr.bindDataTableEvent();
                    }
                }
                // this.selectionMgr.selectCurrentValue();
            }
            this.showGetAllChildrenCheckbox();
        }
        else {
            if (this.activeTab === "favorite") {
                if (this.isTree()) {
                    this.initData();
                }
                else {
                    if (!this.favoriteItems ||
                        !this.favoriteItems.length ||
                        this.favoriteItems.length !== this.favHelper.getFavoritIds().length) {
                        this.initData();
                    }
                    else if (!_firstChange) {
                        this.favHelper._loadFavoriteData(this.favoriteItems);
                        // this.selectionMgr.selectCurrentValue();
                    }
                    //  else {
                    //     this.selectionMgr.selectCurrentValue();
                    // }
                }
            }
        }
        this.changeDetector.detectChanges();
        setTimeout((/**
         * @return {?}
         */
        () => {
            this.resizeCmp();
            if (this.isTree()) {
                /** @type {?} */
                const y = this.componentRef.instance.state.scrollY;
                this.componentRef.instance.scrollToY(y, 0);
                if (this.enableCascade) {
                    this.ttEventMgr.cascadeValueChanged(this.cascadeStatus);
                }
            }
            this.selectionMgr.selectCurrentValue();
        }));
    }
    //#region  Tag View ----------------------------------------------------------------------
    /**
     * @private
     * @return {?}
     */
    registerMouseEventForTagView() {
        if (this.enableClear) {
            this.tagbox.nativeElement.addEventListener("mouseenter", this.onTagboxMouseEnter.bind(this));
            this.tagbox.nativeElement.addEventListener("mouseleave", this.onTagboxMouseLeave.bind(this));
        }
    }
    /**
     * @private
     * @param {?} event
     * @param {?=} isShow
     * @return {?}
     */
    toggleClearIcon(event, isShow = false) {
        /** @type {?} */
        const str = isShow ? "" : "none";
        /** @type {?} */
        const clearIcon = event.target.querySelector(".input-group-clear");
        if (clearIcon) {
            clearIcon.style.display = str;
        }
    }
    /**
     * @private
     * @param {?} event
     * @return {?}
     */
    onTagboxMouseEnter(event) {
        if (this.displayText && this.enableClear) {
            if (!this.readonly && !this.disabled) {
                this.showTagboxClearButton = true;
            }
        }
        if (this.showTagboxClearButton) {
            this.toggleClearIcon(event, true);
        }
    }
    /**
     * @private
     * @param {?} event
     * @return {?}
     */
    onTagboxMouseLeave(event) {
        this.toggleClearIcon(event);
    }
    /**
     * @param {?} $event
     * @param {?} txt
     * @return {?}
     */
    onRemoveSelectItem($event, txt) {
        $event.stopPropagation();
        /** @type {?} */
        const textArray = Array.from(this.displayTextList);
        /** @type {?} */
        const removedIndex = this.displayTextList.indexOf(txt);
        textArray.splice(removedIndex, 1);
        this.displayText = textArray.join(this.multipleChoiceSeparator);
        this.originalText = this.displayText;
        this.setModelValue(this.displayText);
        if (this.displayValue) {
            /** @type {?} */
            const vals = this.displayValue.split(this.multipleChoiceSeparator);
            vals.splice(removedIndex, 1);
            this.displayValue = vals.join(this.multipleChoiceSeparator);
        }
        if (this.mapFields) {
            this.updateOtherFieldDataWhenTagremoved(removedIndex);
        }
        this.tagRemoved.emit({ removedIndex, instance: this });
    }
    /**
     * @private
     * @param {?} removedIndex
     * @return {?}
     */
    updateOtherFieldDataWhenTagremoved(removedIndex) {
        /** @type {?} */
        const helpFields = Object.keys(this.mapFields);
        /** @type {?} */
        const textFieldIndex = helpFields.indexOf(this.textField);
        if (this.ngControl &&
            this.ngControl.formDirective &&
            this.ngControl.formDirective.form &&
            this.ngControl.formDirective.form.bindingData) {
            /** @type {?} */
            const bindingData = this.ngControl.formDirective.form.bindingData;
            if (bindingData.setValue) {
                /** @type {?} */
                const bindingPath = this.ngControl.formDirective.form.bindingPath;
                /** @type {?} */
                let pathArr = [];
                if (bindingPath) {
                    pathArr = bindingPath.split("/").filter((/**
                     * @param {?} n
                     * @return {?}
                     */
                    (n) => n !== ""));
                }
                helpFields.forEach((/**
                 * @param {?} helpField
                 * @return {?}
                 */
                (helpField) => {
                    this.mapFields[helpField]
                        .split(",")
                        .forEach((/**
                     * @param {?} formField
                     * @return {?}
                     */
                    (formField) => {
                        /** @type {?} */
                        const fieldPaths = pathArr.concat(formField.split("."));
                        /** @type {?} */
                        const val = bindingData.getValue(fieldPaths);
                        /** @type {?} */
                        const valArr = val.split(this.multipleChoiceSeparator);
                        valArr.splice(removedIndex, 1);
                        /** @type {?} */
                        const newVal = valArr.join(this.multipleChoiceSeparator);
                        bindingData.setValue(pathArr.concat(fieldPaths), newVal, true, true);
                    }));
                }));
            }
        }
        else {
            if (this.bindingData) {
                if (textFieldIndex > -1) {
                    helpFields.splice(textFieldIndex, 1);
                }
                helpFields.forEach((/**
                 * @param {?} helpField
                 * @return {?}
                 */
                (helpField) => {
                    this.mapFields[helpField]
                        .split(",")
                        .forEach((/**
                     * @param {?} formField
                     * @return {?}
                     */
                    (formField) => {
                        /** @type {?} */
                        const val = this.utils.getValue(formField, this.bindingData);
                        /** @type {?} */
                        const valArr = val.split(this.multipleChoiceSeparator);
                        valArr.splice(removedIndex, 1);
                        /** @type {?} */
                        const newVal = valArr.join(this.multipleChoiceSeparator);
                        this.utils.setValue(this.bindingData, formField, newVal);
                    }));
                }));
            }
        }
    }
    //#endregion
    /**
     * @param {?} $event
     * @return {?}
     */
    onAllChildNodesClick($event) {
        this.isGetAllChidlNodes = !this.isGetAllChidlNodes;
    }
}
LookupGridComponent.decorators = [
    { type: Component, args: [{
                selector: "farris-lookup-grid",
                template: "<!--\r\n * @Author: \u75AF\u72C2\u79C0\u624D(Lucas Huang)\r\n * @Date: 2019-06-16 13:44:59\r\n * @LastEditors: \u75AF\u72C2\u79C0\u624D(Lucas Huang)\r\n * @LastEditTime: 2019-11-18 08:47:32\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n -->\r\n\r\n <input-group #inputgroup\r\n    *ngIf=\"viewType === 'text'\"\r\n    [groupText]=\"groupIcon\"\r\n    [lookup-tip]= \"useTip\"\r\n    [(ngModel)]=\"displayText\"\r\n    [disabled]=\"disabled\"\r\n    [readonly]=\"readonly\"\r\n    [editable]=\"editable\"\r\n    [customCls]=\"'lookupbox'\"\r\n    [placeholder]=\"'lookup.placeholder' | locale: '\u8BF7\u9009\u62E9': placeholder\"\r\n    [enableClear]=\"enableClear\"\r\n    [useExtendInfo]=\"useExtendInfo\"\r\n    [extendInfo]=\"extendInfo\"\r\n    [maxLength]=\"maxLength\"\r\n    (updateExtendInfo)=\"onUpdateExtendInfo()\"\r\n    [textAlign]=\"textAlign\"\r\n    [value]=\"displayText\"\r\n    (valueChange)=\"onChanges($event)\"\r\n    (clickHandle)=\"showDialog()\"\r\n    (clear)=\"onClear()\"\r\n    [quick-select]=\"quickSelect\"\r\n></input-group>\r\n\r\n<!--Tag style-->\r\n<div #tagbox class=\"input-group\" [class.f-state-disabled]=\"disabled\" [class.f-state-readonly]=\"readonly\" *ngIf=\"viewType === 'tag'\" [attr.title]=\"displayText\">\r\n    <div class=\"form-control f-cmp-inputgroup--multi-wrapper multi-more\" style=\"height: auto; min-height: 24px;\">\r\n        <div class=\"multi--content\">\r\n            <span class=\"multi--item\" *ngFor=\"let txt of displayTextList; let index\" title=\"\" style=\"cursor: default;padding: 0 5px;\r\n            background: #ebf7fe;\r\n            border: 1px solid #cfedff;\r\n            position: relative;\r\n            padding-right: 20px;\r\n            margin-right: 3px;margin-top: 1px;height:18px\">\r\n                {{txt}}\r\n                <i class=\"f-icon f-icon-close\" *ngIf=\"!readonly && !disabled\" style=\"cursor: pointer;position:absolute; right: 2px\" (click)=\"onRemoveSelectItem($event, txt)\"></i>\r\n            </span>\r\n        </div>\r\n        <!-- <div class=\"multi--more\" *ngIf=\"selections && selections.length\">\r\n            <i class=\"f-icon multi--more-icon\"></i><span class=\"multi--more-text\">{{selections.length}}</span>\r\n        </div> -->\r\n    </div>\r\n    <div class=\"input-group-append\" style=\"position: relative;\" title=\"\" >\r\n        <span class=\"input-group-text input-group-clear\" style=\"display: none; padding: 0px 4px;position: absolute;right: 22px;height: 100%;\" (click)=\"onClear()\">\r\n            <i class=\"f-icon modal_close\"></i>\r\n        </span>\r\n        <span class=\"input-group-text\" (click)=\"showDialog()\">\r\n            <span class=\"f-icon f-icon-lookup\"></span>\r\n        </span>\r\n    </div>\r\n</div>\r\n\r\n\r\n<farris-dialog\r\n    #dialog\r\n    *ngIf=\"isShow\"\r\n    [draggable]=\"draggable\"\r\n    [resizable]=\"resizable\"\r\n    [title]=\"displayInfo.title\"\r\n    [beforeOpen]=\"beforeOpen\"\r\n    [beforeClose]=\"beforeClose\"\r\n    [(width)]=\"dialogWidth\"\r\n    [(height)]=\"dialogHeight\"\r\n    [showButtons]=\"showButtons\"\r\n    [showMaxButton]=\"showMaxButton\"\r\n    [showCloseButton]=\"true\"\r\n    [buttons]=\"buttonsRef || defaultButtonRef\"\r\n    [buttonAlign]=\"buttonAlign\"\r\n    [enableScroll]=\"false\"\r\n    [dialogHeaderHeight]=\"50\"\r\n    (maxed)=\"onMaxDialog($event)\"\r\n    (resized)=\"onResized($event)\"\r\n    (resizing)=\"onResizing($event)\"\r\n\r\n>\r\n\r\n\r\n    <div [ngStyle]=\"containerStyle\" style=\"height: 100%;\"> <!-- [style.height.px]=\"dialogContentHeight\" -->\r\n        <lookup-tabs (tabChange)=\"onTabChange($event)\" [enableFav]=\"useFavorite\" [activeTab]=\"activeTab\"\r\n            [enableSelected]=\"showSelected && !singleSelect\" [selectedTotal]=\"(currentSelectedItems | async)?.length\">\r\n            <div datalist class=\"d-flex f-utils-absolute-all \">   <!-- [style.height.px]=\"useFavorite ? dialogContentHeight - 40 : dialogContentHeight\"-->\r\n                <layout [direction]=\"'h'\" [fill]=\"true\" *ngIf=\"isDoublleList()\">\r\n                    <layout-panel #leftPanel [width]=\"leftPanelWidth\" region=\"west\" [minWidth]=\"10\" [showBorder]=\"false\" >\r\n                        <ng-container #leftContainer></ng-container>\r\n                    </layout-panel>\r\n                    <layout-panel region=\"center\" [showBorder]=\"false\">\r\n                        <ng-container #centerContainer></ng-container>\r\n                    </layout-panel>\r\n                </layout>\r\n                \r\n                <ng-container *ngIf=\"!isDoublleList()\" #contentContainer></ng-container>\r\n            </div>\r\n            <div favorites  class=\"d-flex f-utils-absolute-all \" *ngIf=\"useFavorite\" >  <!--[style.height.px]=\"dialogContentHeight - 40\" -->\r\n                <ng-container #favoritesContainer></ng-container>\r\n            </div>\r\n            <div selected class=\"d-flex f-utils-absolute-all \"  *ngIf=\"showSelected\" > <!--[style.height.px]=\"dialogContentHeight - 40\" -->\r\n                <farris-datatable #multiSelectDT\r\n                    [height]=\"gridOptions?.height\"\r\n                    [pagination]=\"false\" [fill]=\"true\"\r\n                    [columns]=\"selectedColumns\"\r\n                    [data]=\"currentSelectedItems | async\"\r\n                    [remoteSort]=\"false\"\r\n                    (cellClick)=\"multiSelMgr?.onSelectedTableCellClick($event)\"\r\n                >\r\n                </farris-datatable>\r\n            </div>\r\n        </lookup-tabs>\r\n\r\n    </div>\r\n</farris-dialog>\r\n\r\n<ng-template #defaultButtonRef>\r\n    \r\n    <div class=\"flex-fill\" style=\"text-align: left;\" *ngIf=\"isReady && enableCascade && displayType==='TREELIST' && singleSelect === false\">\r\n        <select class=\"form-control\" style=\"width: auto; display: inline-block\" (ngModelChange)=\"ttEventMgr?.cascadeValueChanged($event)\" [ngModel]=\"cascadeStatus\" name=\"cascadeStatus\">\r\n            <option value=\"enable\">{{ 'lookup.cascade.enable' | locale: '\u540C\u6B65\u9009\u62E9' }}</option>\r\n            <option value=\"up\">{{ 'lookup.cascade.up' | locale: '\u5305\u542B\u4E0A\u7EA7' }}</option>\r\n            <option value=\"down\">{{ 'lookup.cascade.down' | locale: '\u5305\u542B\u4E0B\u7EA7' }}</option>\r\n            <option value=\"disable\" >{{ 'lookup.cascade.disable' | locale: '\u4EC5\u9009\u62E9\u81EA\u8EAB' }}</option>\r\n        </select>\r\n\r\n\r\n        <div class=\"custom-control custom-checkbox custom-control-inline ml-3\" *ngIf=\"enableGetAllChildNodes\">\r\n            <input class=\"custom-control-input\" type=\"checkbox\" id=\"farris-lookup_get-all-child-nodes\">\r\n            <label class=\"custom-control-label btn-link\" for=\"farris-lookup_get-all-child-nodes\" style=\"padding-left: 18px;\"\r\n                (click)=\"onAllChildNodesClick($event)\">{{'lookup.getAllChilds'|locale: '\u83B7\u53D6\u6240\u6709\u5B50\u7EA7\u6570\u636E'}}</label>\r\n        </div>\r\n\r\n<!-- \r\n        <button class=\"btn btn-link\" style=\"display: inline-block;margin-left: 10px;padding-left: 0;\"\r\n            *ngIf=\"enableGetAllChildNodes\" (click)=\"onAllChildNodesClick($event)\">\r\n            <span class=\"f-icon f-icon-checkbox\"[class.f-icon-checkbox-checked]=\"isGetAllChidlNodes\"\r\n                style=\"margin-right: 5px; font-size: 14px;color: #0089FF;\"></span>{{'lookup.getAllChilds'|locale: '\u83B7\u53D6\u6240\u6709\u5B50\u7EA7\u6570\u636E'}}</button> -->\r\n\r\n    </div>\r\n\r\n    <button type=\"button\" class=\"btn btn-secondary btn-lg\" (click)=\"cancelSelect()\" [disabled]=\"!(isReady || hasError)\" >\r\n        {{ 'lookup.cancelText' | locale: '\u53D6\u6D88' }}\r\n    </button>\r\n    <button #okbtn type=\"button\" [disabled]=\"!isReady\"  class=\"btn btn-primary btn-lg\" (click)=\"selectItem()\" >\r\n        {{ 'lookup.okText' | locale: '\u786E\u5B9A' }}\r\n    </button>\r\n   \r\n    \r\n</ng-template>\r\n",
                providers: [
                    LOOKUPGRID_VALUE_ACCESSOR,
                    ShortcutsService,
                    LookupDefaultMapping,
                    LookupUtils,
                    PersonalConfigService,
                ],
                encapsulation: ViewEncapsulation.None,
                exportAs: "lookup",
                styles: [".input-group{flex-wrap:nowrap}.ng-dirty.ng-invalid>input-group>.lookupbox{border-color:#ff0303}.lookup-clear{cursor:pointer;background:#fff!important}.lookup-clear:hover{background:#e9ecef!important}.f-lookup-favorite{cursor:pointer;color:#ff9800}.f-lookup-unfavorite{cursor:pointer;color:#dd2438}.lookup-tip{position:absolute;min-width:200px;max-height:400px;padding:.25rem 0;z-index:7777;background:#fff;box-shadow:0 2px 8px 0 rgba(0,0,0,.15);border-radius:2px}.lookup-tip .lookup-tip-header{font-weight:700;padding:.25rem .475rem;border-radius:0}.lookup-tip ul{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;padding-left:0;margin-bottom:0}.lookup-tip ul li{position:relative;display:block;width:100%;margin-bottom:-1px;padding:.25rem .875rem;color:rgba(0,0,0,.85);background-color:#fff;cursor:pointer}.lookup-tip ul li:hover{background-color:#e6f7ff}.f-lookup_quick-panel{height:100%;z-index:10001;position:absolute;overflow:auto;background:#fff;margin-top:.25rem;box-shadow:0 2px 8px 0 #dedede;border-radius:3px}.f-lookup_quick-panel .list{margin:0 6px}.f-lookup_quick-panel .list-group-item{height:30px;padding:0 8px;line-height:30px;border:0;margin-bottom:0}.f-lookup_quick-panel .more{height:50px;text-align:center;line-height:50px}.f-lookup_quick-panel .norecord{height:100%;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;display:-webkit-box;display:flex;font-size:16px;color:#bec6db}"]
            }] }
];
/** @nocollapse */
LookupGridComponent.ctorParameters = () => [
    { type: Injector },
    { type: ComponentFactoryResolver },
    { type: ElementRef },
    { type: CommonUtils },
    { type: LookupDefaultMapping },
    { type: ChangeDetectorRef },
    { type: ShortcutsService },
    { type: LookupUtils },
    { type: NgZone },
    { type: Renderer2 }
];
LookupGridComponent.propDecorators = {
    customDisplayType: [{ type: Input }],
    viewType: [{ type: Input }],
    displayType: [{ type: Input }],
    enableClear: [{ type: Input }],
    remoteSort: [{ type: Input }],
    condition: [{ type: Input }],
    showCheckAll: [{ type: Input }],
    singleSelect: [{ type: Input }],
    multipleChoiceSeparator: [{ type: Input }],
    idField: [{ type: Input }],
    uri: [{ type: Input }],
    beUri: [{ type: Input }],
    showFilterBar: [{ type: Input }],
    pagination: [{ type: Input }],
    pageIndex: [{ type: Input }],
    pageSize: [{ type: Input }],
    pageList: [{ type: Input }],
    total: [{ type: Input }],
    columns: [{ type: Input }],
    remoteSearch: [{ type: Input }],
    searchOnServer: [{ type: Input }],
    nosearch: [{ type: Input }],
    clearMappings: [{ type: Output }],
    maxLength: [{ type: Input }],
    mappingFn: [{ type: Input }],
    items: [{ type: Input }],
    favoriteItems: [{ type: Input }],
    customData: [{ type: Input }],
    bindingData: [{ type: Input }],
    treeInfo: [{ type: Input }],
    enableCascade: [{ type: Input }],
    cascadeStatus: [{ type: Input }],
    placeholder: [{ type: Input }],
    showSelected: [{ type: Input }],
    useFavorite: [{ type: Input }],
    favoriteDataFrom: [{ type: Input }],
    useTip: [{ type: Input }],
    isRecordSize: [{ type: Input }],
    userId: [{ type: Input }],
    enableToSelect: [{ type: Input }],
    enableFindText: [{ type: Input }],
    expandLevel: [{ type: Input }],
    navTreeTableOptions: [{ type: Input }],
    treeTableOptions: [{ type: Input }],
    dataTableOptions: [{ type: Input }],
    loadTreeDataType: [{ type: Input }],
    loadDataWhenOpen: [{ type: Input }],
    navSelectedIds: [{ type: Input }],
    selectFirstInNav: [{ type: Input }],
    enableFullTree: [{ type: Input }],
    displayFormatter: [{ type: Input }],
    displayFields: [{ type: Input }],
    displayTextSeparator: [{ type: Input }],
    helpId: [{ type: Input }],
    textAlign: [{ type: Input }],
    enableTitle: [{ type: Input }],
    useExtendInfo: [{ type: Input }],
    extInfoFields: [{ type: Input }],
    extInfoFormatter: [{ type: Input }],
    extendInfo: [{ type: Input }],
    customFormatter: [{ type: Input }],
    customNavFormatter: [{ type: Input }],
    okHandler: [{ type: Input }],
    cancelHandler: [{ type: Input }],
    tagboxHeight: [{ type: Input }],
    maxTagboxHeight: [{ type: Input }],
    enableGetAllChildNodes: [{ type: Input }],
    shortcutKey: [{ type: Input }],
    quickSelect: [{ type: Input }],
    beforeSelectData: [{ type: Input }],
    selectedData: [{ type: Output }],
    clear: [{ type: Output }],
    search: [{ type: Output }],
    valueChanged: [{ type: Output }],
    loadSuccess: [{ type: Output }],
    pagerChanged: [{ type: Output }],
    expandTreeNode: [{ type: Output }],
    textChanged: [{ type: Output }],
    checkedChange: [{ type: Output }],
    tagRemoved: [{ type: Output }],
    gridOptions: [{ type: Input }],
    contentContainer: [{ type: ViewChild, args: ["contentContainer", { read: ViewContainerRef },] }],
    favoritesContainer: [{ type: ViewChild, args: ["favoritesContainer", { read: ViewContainerRef },] }],
    leftContainer: [{ type: ViewChild, args: ["leftContainer", { read: ViewContainerRef },] }],
    centerContainer: [{ type: ViewChild, args: ["centerContainer", { read: ViewContainerRef },] }],
    multiSelectDT: [{ type: ViewChild, args: ["multiSelectDT",] }],
    inputGroup: [{ type: ViewChild, args: ["inputgroup",] }],
    leftPanel: [{ type: ViewChild, args: ["leftPanel",] }],
    tagbox: [{ type: ViewChild, args: ["tagbox",] }],
    okButton: [{ type: ViewChild, args: ["okbtn",] }]
};
if (false) {
    /** @type {?} */
    LookupGridComponent.prototype.groupIcon;
    /** @type {?} */
    LookupGridComponent.prototype._displayType;
    /**
     * 使用表单设计器中的显示类型。否则使用元数据设置的显示类型。 默认：false
     * @type {?}
     */
    LookupGridComponent.prototype.customDisplayType;
    /** @type {?} */
    LookupGridComponent.prototype.viewType;
    /**
     * 启用清空按钮
     * @type {?}
     */
    LookupGridComponent.prototype.enableClear;
    /**
     * 服务器端排序
     * @type {?}
     */
    LookupGridComponent.prototype.remoteSort;
    /** @type {?} */
    LookupGridComponent.prototype.condition;
    /**
     * 树表显示全选复选框。 默认不显示
     * @type {?}
     */
    LookupGridComponent.prototype.showCheckAll;
    /**
     * 是否启用多选
     * @type {?}
     */
    LookupGridComponent.prototype.singleSelect;
    /**
     * 多选分隔符
     * @type {?}
     */
    LookupGridComponent.prototype.multipleChoiceSeparator;
    /**
     * 主键字段
     * @type {?}
     */
    LookupGridComponent.prototype.idField;
    /**
     * 可以为元数据ID、webapiURL
     * @type {?}
     */
    LookupGridComponent.prototype.uri;
    /**
     * BE REST RUI
     * - 此处设置后 uri 失效
     * @type {?}
     */
    LookupGridComponent.prototype.beUri;
    /**
     * 显示过滤工具条
     * @type {?}
     */
    LookupGridComponent.prototype.showFilterBar;
    /**
     * 是否启用分页
     * @type {?}
     */
    LookupGridComponent.prototype.pagination;
    /**
     * 当前页索引，从 0开始
     * @type {?}
     */
    LookupGridComponent.prototype.pageIndex;
    /**
     * 每页记录数
     * @type {?}
     */
    LookupGridComponent.prototype.pageSize;
    /**
     * 可用分页记录数列表
     * @type {?}
     */
    LookupGridComponent.prototype.pageList;
    /**
     * 总记录数
     * @type {?}
     */
    LookupGridComponent.prototype.total;
    /**
     * 显示列信息, 默认为 []
     * @type {?}
     */
    LookupGridComponent.prototype.columns;
    /**
     * 帮助查询是否为远端查询
     * @type {?}
     */
    LookupGridComponent.prototype.remoteSearch;
    /**
     * 文本变化后，进行服务器端查询
     * @type {?}
     */
    LookupGridComponent.prototype.searchOnServer;
    /**
     * 不进行服务器查询，有啥算啥
     * @type {?}
     */
    LookupGridComponent.prototype.nosearch;
    /**
     * 启用任意输入后，值通过输入时触发
     * @type {?}
     */
    LookupGridComponent.prototype.clearMappings;
    /**
     * 允许输入的字符最大长度。
     * 任意输入时，此属性有效
     * @type {?}
     */
    LookupGridComponent.prototype.maxLength;
    /** @type {?} */
    LookupGridComponent.prototype.mappingFn;
    /**
     * 数据列表
     * @type {?}
     */
    LookupGridComponent.prototype.items;
    /** @type {?} */
    LookupGridComponent.prototype.favoriteItems;
    /**
     * 自定义数据
     * @type {?}
     */
    LookupGridComponent.prototype.customData;
    /**
     * 绑定值所在的对象
     * @type {?}
     */
    LookupGridComponent.prototype.bindingData;
    /** @type {?} */
    LookupGridComponent.prototype.treeInfo;
    /**
     * 是否启用级联选择控制选项
     * @type {?}
     */
    LookupGridComponent.prototype.enableCascade;
    /**
     * 级联控制默认值： enable, up, down, disable
     * @type {?}
     */
    LookupGridComponent.prototype.cascadeStatus;
    /** @type {?} */
    LookupGridComponent.prototype.placeholder;
    /**
     * 显示已选记录列表。 默认为 false 不显示
     * @type {?}
     */
    LookupGridComponent.prototype.showSelected;
    /**
     * 应用收藏夹
     * @type {?}
     */
    LookupGridComponent.prototype.useFavorite;
    /**
     * 收藏数据来自于： locale: 本地存储， remote: 服务器端存储
     * @type {?}
     */
    LookupGridComponent.prototype.favoriteDataFrom;
    /**
     * 使用提示,快捷选择
     * @type {?}
     */
    LookupGridComponent.prototype.useTip;
    /**
     * 记录窗口大小
     * @type {?}
     */
    LookupGridComponent.prototype.isRecordSize;
    /**
     * 快速选择
     * @type {?}
     */
    LookupGridComponent.prototype.userId;
    /**
     * 是否启用选中value值对应的行数据，默认 true
     * @type {?}
     */
    LookupGridComponent.prototype.enableToSelect;
    /** @type {?} */
    LookupGridComponent.prototype.enableFindText;
    /**
     * -1: 不展开； 0: 全部展开；>0: 展开到指定级数
     * @type {?}
     */
    LookupGridComponent.prototype.expandLevel;
    /** @type {?} */
    LookupGridComponent.prototype.navTreeTableOptions;
    /** @type {?} */
    LookupGridComponent.prototype.treeTableOptions;
    /** @type {?} */
    LookupGridComponent.prototype.dataTableOptions;
    /** @type {?} */
    LookupGridComponent.prototype.defaultTreeTableOptions;
    /**
     * 树形帮助数据加载方式： default: 内置取数； loadall: 加载所有 layerload：分层加载
     * @type {?}
     */
    LookupGridComponent.prototype.loadTreeDataType;
    /**
     * 窗口打开后立即加载数据，默认为 true
     * @type {?}
     */
    LookupGridComponent.prototype.loadDataWhenOpen;
    /**
     * 导航列表，树列表在帮助打开后选中的数据;
     * 设置后，`selectFirstInNav` 失效！
     * @type {?}
     */
    LookupGridComponent.prototype.navSelectedIds;
    /**
     * 导航帮助，选中第1条数据，默认为 false;
     * 注意：当`navSelectedIds`不为空时，此属性失效。
     * @type {?}
     */
    LookupGridComponent.prototype.selectFirstInNav;
    /**
     * 启用构造完整树过滤
     * @type {?}
     */
    LookupGridComponent.prototype.enableFullTree;
    /**
     * 显示文本自定义函数
     * @type {?}
     */
    LookupGridComponent.prototype.displayFormatter;
    /**
     * 显示文本字段集合，以 英文 逗号隔开
     * @type {?}
     */
    LookupGridComponent.prototype.displayFields;
    /** @type {?} */
    LookupGridComponent.prototype.displayTextSeparator;
    /**
     * 帮助元数据ID，不为空时调用指定的URI
     * /api/runtime/bcc/v1.0/help/data/{helpId}
     * @type {?}
     */
    LookupGridComponent.prototype.helpId;
    /**
     * 文本对齐方式； left | center | right; 默认 left
     * @type {?}
     */
    LookupGridComponent.prototype.textAlign;
    /**
     * 鼠标滑过输入框时显示输入框内的文本信息
     * @type {?}
     */
    LookupGridComponent.prototype.enableTitle;
    /** @type {?} */
    LookupGridComponent.prototype.useExtendInfo;
    /** @type {?} */
    LookupGridComponent.prototype.extInfoFields;
    /** @type {?} */
    LookupGridComponent.prototype.extInfoFormatter;
    /** @type {?} */
    LookupGridComponent.prototype.extendInfo;
    /**
     * IDE 设计器自定义格式化 2103
     * @type {?}
     */
    LookupGridComponent.prototype.customFormatter;
    /** @type {?} */
    LookupGridComponent.prototype.customNavFormatter;
    /**
     * 自定义确定事件
     * @type {?}
     */
    LookupGridComponent.prototype.okHandler;
    /**
     * 自定义取消事件
     * @type {?}
     */
    LookupGridComponent.prototype.cancelHandler;
    /** @type {?} */
    LookupGridComponent.prototype.tagboxHeight;
    /** @type {?} */
    LookupGridComponent.prototype.maxTagboxHeight;
    /**
     * 启用获取所有子级数据的功能
     * @type {?}
     */
    LookupGridComponent.prototype.enableGetAllChildNodes;
    /** @type {?} */
    LookupGridComponent.prototype.shortcutKey;
    /**
     * 快捷选择相关配置项，默认为 null, 即不启用此功能
     * @type {?}
     */
    LookupGridComponent.prototype.quickSelect;
    /**
     * 数据选择后，值映射前触发
     * 返回 Observable
     *      canSelect: <boolean>  是否允许选择
     *      message: <string> 不允许选择时的提示信息
     * @type {?}
     */
    LookupGridComponent.prototype.beforeSelectData;
    /** @type {?} */
    LookupGridComponent.prototype.selectedData;
    /** @type {?} */
    LookupGridComponent.prototype.clear;
    /** @type {?} */
    LookupGridComponent.prototype.search;
    /** @type {?} */
    LookupGridComponent.prototype.valueChanged;
    /** @type {?} */
    LookupGridComponent.prototype.loadSuccess;
    /** @type {?} */
    LookupGridComponent.prototype.pagerChanged;
    /** @type {?} */
    LookupGridComponent.prototype.expandTreeNode;
    /** @type {?} */
    LookupGridComponent.prototype.textChanged;
    /** @type {?} */
    LookupGridComponent.prototype.checkedChange;
    /** @type {?} */
    LookupGridComponent.prototype.tagRemoved;
    /**
     * 内容中留白边距
     * @type {?}
     */
    LookupGridComponent.prototype.containerMargin;
    /** @type {?} */
    LookupGridComponent.prototype.containerStyle;
    /** @type {?} */
    LookupGridComponent.prototype._gridOptions;
    /** @type {?} */
    LookupGridComponent.prototype.contentContainer;
    /** @type {?} */
    LookupGridComponent.prototype.favoritesContainer;
    /** @type {?} */
    LookupGridComponent.prototype.leftContainer;
    /** @type {?} */
    LookupGridComponent.prototype.centerContainer;
    /** @type {?} */
    LookupGridComponent.prototype.multiSelectDT;
    /** @type {?} */
    LookupGridComponent.prototype.inputGroup;
    /** @type {?} */
    LookupGridComponent.prototype.leftPanel;
    /** @type {?} */
    LookupGridComponent.prototype.tagbox;
    /** @type {?} */
    LookupGridComponent.prototype.okButton;
    /** @type {?} */
    LookupGridComponent.prototype.componentRef;
    /** @type {?} */
    LookupGridComponent.prototype.leftComponentRef;
    /** @type {?} */
    LookupGridComponent.prototype.favoritesComponentRef;
    /** @type {?} */
    LookupGridComponent.prototype.http;
    /** @type {?} */
    LookupGridComponent.prototype.messagerService;
    /** @type {?} */
    LookupGridComponent.prototype.loadingService;
    /** @type {?} */
    LookupGridComponent.prototype.loading;
    /** @type {?} */
    LookupGridComponent.prototype.navigationOptions;
    /** @type {?} */
    LookupGridComponent.prototype.leftPanelWidth;
    /** @type {?} */
    LookupGridComponent.prototype.navLookupDialogMinWidth;
    /** @type {?} */
    LookupGridComponent.prototype.navigationFilter;
    /** @type {?} */
    LookupGridComponent.prototype.subscriptions;
    /** @type {?} */
    LookupGridComponent.prototype.dialogOpenedSubscription;
    /** @type {?} */
    LookupGridComponent.prototype.dialogClosedSubscription;
    /** @type {?} */
    LookupGridComponent.prototype.isTextChange;
    /** @type {?} */
    LookupGridComponent.prototype.isTabChanged;
    /** @type {?} */
    LookupGridComponent.prototype.displayInfo;
    /** @type {?} */
    LookupGridComponent.prototype.tabChangeSubscription;
    /** @type {?} */
    LookupGridComponent.prototype.personalConf;
    /** @type {?} */
    LookupGridComponent.prototype.favoriteColumns;
    /**
     * 临时查询参数
     * @type {?}
     */
    LookupGridComponent.prototype._searchState;
    /** @type {?} */
    LookupGridComponent.prototype.allData;
    /** @type {?} */
    LookupGridComponent.prototype.personalConfigService;
    /** @type {?} */
    LookupGridComponent.prototype.utilService;
    /** @type {?} */
    LookupGridComponent.prototype.treeNodeHelper;
    /** @type {?} */
    LookupGridComponent.prototype.localService;
    /** @type {?} */
    LookupGridComponent.prototype.notifyService;
    /** @type {?} */
    LookupGridComponent.prototype.allColumnsTitle;
    /** @type {?} */
    LookupGridComponent.prototype.mustWriteSomething;
    /** @type {?} */
    LookupGridComponent.prototype.mustChoosAdatarow;
    /** @type {?} */
    LookupGridComponent.prototype.addFavoriteSuccess;
    /** @type {?} */
    LookupGridComponent.prototype.delFavoriteSuccess;
    /** @type {?} */
    LookupGridComponent.prototype.searching;
    /**
     * 临时存储查询结果集
     * @type {?}
     */
    LookupGridComponent.prototype._searchResult;
    /** @type {?} */
    LookupGridComponent.prototype.lookupinitializationSubject;
    /**
     * 多选时，选中的数据
     * @type {?}
     */
    LookupGridComponent.prototype.currentSelectedItems;
    /**
     * 已选数据列信息
     * @type {?}
     */
    LookupGridComponent.prototype.selectedColumns;
    /** @type {?} */
    LookupGridComponent.prototype.activeTab;
    /** @type {?} */
    LookupGridComponent.prototype.favHelper;
    /** @type {?} */
    LookupGridComponent.prototype.ttEventMgr;
    /** @type {?} */
    LookupGridComponent.prototype.multiSelMgr;
    /** @type {?} */
    LookupGridComponent.prototype.httpMgr;
    /** @type {?} */
    LookupGridComponent.prototype.lookupCmpMgr;
    /** @type {?} */
    LookupGridComponent.prototype.dialogMgr;
    /** @type {?} */
    LookupGridComponent.prototype.selectionMgr;
    /** @type {?} */
    LookupGridComponent.prototype.dtEventMgr;
    /** @type {?} */
    LookupGridComponent.prototype.lookupSelectionSer;
    /** @type {?} */
    LookupGridComponent.prototype.controlId;
    /** @type {?} */
    LookupGridComponent.prototype.savingFaoriteData;
    /** @type {?} */
    LookupGridComponent.prototype.isReady;
    /** @type {?} */
    LookupGridComponent.prototype.showTagboxClearButton;
    /** @type {?} */
    LookupGridComponent.prototype.hasError;
    /** @type {?} */
    LookupGridComponent.prototype.isGetAllChidlNodes;
    /** @type {?} */
    LookupGridComponent.prototype.eventManager;
    /**
     * 选中记录ID，自定义帮助取数时使用
     * @type {?}
     */
    LookupGridComponent.prototype.selectedIds;
    /**
     * @type {?}
     * @private
     */
    LookupGridComponent.prototype.lookupSearchInputEvent;
    /**
     * @type {?}
     * @private
     */
    LookupGridComponent.prototype.farrisInstances;
    /**
     * 用户初始设置
     * @type {?}
     * @private
     */
    LookupGridComponent.prototype._userSettings;
    /** @type {?} */
    LookupGridComponent.prototype._treeInfo_;
    /**
     * dialog 内容区域高度。 弹窗总高度 - 头部高度 - 脚部高度 - （启用收藏 TAB头高度）
     * @type {?}
     */
    LookupGridComponent.prototype.dialogContentHeight;
    /** @type {?} */
    LookupGridComponent.prototype.overLayService;
    /**
     * @type {?}
     * @private
     */
    LookupGridComponent.prototype.debugSer;
    /** @type {?} */
    LookupGridComponent.prototype.injector;
    /** @type {?} */
    LookupGridComponent.prototype.cfr;
    /** @type {?} */
    LookupGridComponent.prototype.el;
    /** @type {?} */
    LookupGridComponent.prototype.utils;
    /**
     * @type {?}
     * @private
     */
    LookupGridComponent.prototype.defaultMapping;
    /** @type {?} */
    LookupGridComponent.prototype.changeDetector;
    /** @type {?} */
    LookupGridComponent.prototype.shortcuts;
    /** @type {?} */
    LookupGridComponent.prototype.lookupUtils;
    /**
     * @type {?}
     * @private
     */
    LookupGridComponent.prototype.zone;
    /**
     * @type {?}
     * @private
     */
    LookupGridComponent.prototype.render2;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9va3VwLWdyaWQuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy91aS1sb29rdXAvIiwic291cmNlcyI6WyJsaWIvbG9va3VwLWdyaWQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQVNBLE9BQU8sRUFDSCxTQUFTLEVBQ1QsS0FBSyxFQUNMLFNBQVMsRUFHVCxZQUFZLEVBRVosUUFBUSxFQUNSLHdCQUF3QixFQUN4QixNQUFNLEVBQ04saUJBQWlCLEVBQ2pCLGlCQUFpQixFQUVqQixnQkFBZ0IsRUFDaEIsVUFBVSxFQUdWLFVBQVUsRUFDVixNQUFNLEVBQ04sU0FBUyxHQUdaLE1BQU0sZUFBZSxDQUFDO0FBRXZCLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQ25ELE9BQU8sRUFBNEIsRUFBRSxFQUFFLE9BQU8sRUFBbUIsTUFBTSxNQUFNLENBQUM7QUFFOUUsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBRWxELE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUN0RCxPQUFPLEVBQUUsY0FBYyxFQUFvQixNQUFNLG9CQUFvQixDQUFDO0FBQ3RFLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBQzFELE9BQU8sRUFBRSxrQkFBa0IsRUFBWSxNQUFNLHNCQUFzQixDQUFDO0FBQ3BFLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ3pELE9BQU8sRUFBRSxXQUFXLEVBQUUsWUFBWSxFQUFFLDhCQUE4QixFQUFFLG9CQUFvQixFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFFcEgsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFDeEQsT0FBTyxFQUFFLG1CQUFtQixFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFDN0QsT0FBTyxFQUFFLGFBQWEsRUFB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RS9DLDhDQUFxQjs7SUFDckIsd0NBQXNFOztJQUV0RSx3Q0FBaUM7O0lBQ2pDLHlDQUF5Qzs7SUFDekMsMENBQTBDOztJQUMxQyxzQ0FBa0M7O0lBQ2xDLDJDQUE0Qzs7SUFDNUMsd0NBQXNDOztJQUN0QywyQ0FBc0M7O0lBQ3RDLHlDQUF5Qzs7SUFFekMsaURBQWtEOztJQUVsRCx3Q0FBZTs7SUFDZixnREFBMEI7O0lBQzFCLHNDQUFnQjs7SUFDaEIsb0RBQThCOztJQUM5Qix1Q0FBaUI7O0lBRWpCLGlEQUEyQjs7SUFDM0IsMkNBQTJCOzs7OztJQUUzQiwwQ0FBaUI7Ozs7O0lBQ2pCLHFEQUFzQzs7Ozs7SUFDdEMsOENBQStEOzs7Ozs7SUFFL0QsNENBQWdDOztJQU1oQyx5Q0FBa0I7Ozs7O0lBR2xCLGtEQUF3Qjs7SUFFeEIsNkNBQXFDOzs7OztJQUNyQyx1Q0FBc0M7O0lBRWxDLHVDQUF5Qjs7SUFDekIsa0NBQW9DOztJQUNwQyxpQ0FBcUI7O0lBQ3JCLG9DQUF5Qjs7Ozs7SUFDekIsNkNBQTRDOztJQUM1Qyw2Q0FBd0M7O0lBQ3hDLHdDQUFrQzs7SUFDbEMsMENBQStCOzs7OztJQUMvQixtQ0FBb0I7Ozs7O0lBQ3BCLHNDQUEwQiIsInNvdXJjZXNDb250ZW50IjpbIi8qXHJcbiAqIEBBdXRob3I6IOeWr+eLguengOaJjShsdWNhcyBodWFuZylcclxuICogQERhdGU6IDIwMTgtMTEtMjMgMTE6MjM6MTJcclxuICogQExhc3RFZGl0b3JzOiDnlq/ni4Lnp4DmiY0oTHVjYXMgSHVhbmcpXHJcbiAqIEBMYXN0RWRpdFRpbWU6IDIwMjAtMTAtMjAgMjA6MTg6MjZcclxuICogQENvbXBhbnk6IEluc3B1clxyXG4gKiBAVmVyc2lvbjogdjAuMy54XHJcbiAqL1xyXG5cclxuaW1wb3J0IHtcclxuICAgIENvbXBvbmVudCxcclxuICAgIElucHV0LFxyXG4gICAgVmlld0NoaWxkLFxyXG4gICAgT25DaGFuZ2VzLFxyXG4gICAgU2ltcGxlQ2hhbmdlcyxcclxuICAgIEV2ZW50RW1pdHRlcixcclxuICAgIE9uSW5pdCxcclxuICAgIEluamVjdG9yLFxyXG4gICAgQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLFxyXG4gICAgT3V0cHV0LFxyXG4gICAgQ2hhbmdlRGV0ZWN0b3JSZWYsXHJcbiAgICBWaWV3RW5jYXBzdWxhdGlvbixcclxuICAgIEFmdGVyVmlld0luaXQsXHJcbiAgICBWaWV3Q29udGFpbmVyUmVmLFxyXG4gICAgZm9yd2FyZFJlZixcclxuICAgIENvbXBvbmVudFJlZixcclxuICAgIFR5cGUsXHJcbiAgICBFbGVtZW50UmVmLFxyXG4gICAgTmdab25lLFxyXG4gICAgUmVuZGVyZXIyLFxyXG4gICAgT25EZXN0cm95LFxyXG4gICAgSG9zdExpc3RlbmVyLFxyXG59IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XHJcblxyXG5pbXBvcnQgeyBOR19WQUxVRV9BQ0NFU1NPUiB9IGZyb20gXCJAYW5ndWxhci9mb3Jtc1wiO1xyXG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBTdWJzY3JpcHRpb24sIG9mLCBTdWJqZWN0LCBCZWhhdmlvclN1YmplY3QgfSBmcm9tIFwicnhqc1wiO1xyXG5cclxuaW1wb3J0IHsgTG9jYWxlU2VydmljZSB9IGZyb20gXCJAZmFycmlzL3VpLWxvY2FsZVwiO1xyXG5pbXBvcnQgeyBJUmVzaXplRXZlbnQgfSBmcm9tIFwiQGZhcnJpcy91aS1kcmFnZ2FibGVcIjtcclxuaW1wb3J0IHsgTWVzc2FnZXJTZXJ2aWNlIH0gZnJvbSBcIkBmYXJyaXMvdWktbWVzc2FnZXJcIjtcclxuaW1wb3J0IHsgTG9hZGluZ1NlcnZpY2UsIExvYWRpbmdDb21wb25lbnQgfSBmcm9tIFwiQGZhcnJpcy91aS1sb2FkaW5nXCI7XHJcbmltcG9ydCB7IERhdGFUYWJsZUNvbXBvbmVudCB9IGZyb20gXCJAZmFycmlzL3VpLWRhdGF0YWJsZVwiO1xyXG5pbXBvcnQgeyBUcmVlVGFibGVDb21wb25lbnQsIFRyZWVOb2RlIH0gZnJvbSBcIkBmYXJyaXMvdWktdHJlZXRhYmxlXCI7XHJcbmltcG9ydCB7IExheW91dFBhbmVsQ29tcG9uZW50IH0gZnJvbSBcIkBmYXJyaXMvdWktbGF5b3V0XCI7XHJcbmltcG9ydCB7IENvbW1vblV0aWxzLCBEZWJ1Z1NlcnZpY2UsIEZhcnJpc0NvbXBvbmVudEluc3RhbmNlU2VydmljZSwgT3ZlckxheUhpZGRlblNlcnZpY2UgfSBmcm9tIFwiQGZhcnJpcy91aS1jb21tb25cIjtcclxuaW1wb3J0IHsgRW50aXR5RmlsdGVyIH0gZnJvbSBcIkBmYXJyaXMvdWktY29tbW9uL3R5cGVzXCI7XHJcbmltcG9ydCB7IFNob3J0Y3V0c1NlcnZpY2UgfSBmcm9tIFwiQGZhcnJpcy91aS1zaG9ydGN1dHNcIjtcclxuaW1wb3J0IHsgSW5wdXRHcm91cENvbXBvbmVudCB9IGZyb20gXCJAZmFycmlzL3VpLWlucHV0LWdyb3VwXCI7XHJcbmltcG9ydCB7IE5vdGlmeVNlcnZpY2UgfSBmcm9tIFwiQGZhcnJpcy91aS1ub3RpZnlcIjtcclxuXHJcbmltcG9ydCB7XHJcbiAgICBGQVZPUklURV9GSUVMRF9OQU1FLFxyXG4gICAgSU5QVVRfR1JPVVBfSUNPTixcclxuICAgIExvb2t1cEdyaWREaXNwbGF5VHlwZSxcclxuICAgIEV4dEluZm9Gb3JtYXR0ZXIsXHJcbiAgICBDdXN0b21EYXRhRm9ybWF0dGVyLFxyXG4gICAgUXVpY2tTZWxlY3RPcHRpb24sXHJcbiAgICBRdWlja1NlbGVjdERlZmF1bHRPcHRpb25zLFxyXG59IGZyb20gXCIuL2xvb2t1cC1kaXNwbGF5dHlwZVwiO1xyXG5pbXBvcnQgeyBMb29rdXBDb21wb25lbnQgfSBmcm9tIFwiLi9sb29rdXAuY29tcG9uZW50XCI7XHJcbmltcG9ydCB7XHJcbiAgICBMb29rdXBHcmlkT3B0aW9ucyxcclxuICAgIGxvb2t1cEdyaWREZWZhdWx0cyxcclxuICAgIExvb2t1cEdyaWRSZXN1bHQsXHJcbiAgICBOYXZpZ2F0aW9uT3B0aW9ucyxcclxuICAgIERpc3BsYXlJbmZvLFxyXG4gICAgZGlzcGxheUluZm9EZWZhdWx0LFxyXG4gICAgUGlja2luZ1Jlc3VsdCxcclxuICAgIFRyZWVJbmZvLFxyXG4gICAgTE9BRF9EQVRBX1RZUEUsXHJcbiAgICBPTkxZX1NFTEVDVF9MRUFGLFxyXG4gICAgUGVyc29uYWxDb25maWcsXHJcbn0gZnJvbSBcIi4vbG9va3VwLWdyaWQtb3B0aW9uc1wiO1xyXG5pbXBvcnQgeyBJTG9va3VwSHR0cFNlcnZpY2UsIFNlcnZlclNpZGVUb2tlbiB9IGZyb20gXCIuL2h0dHAvSUxvb2t1cEh0dHBTZXJ2aWNlXCI7XHJcbmltcG9ydCB7IE5hdmlnYXRpb25GaWx0ZXIgfSBmcm9tIFwiLi9odHRwL1JlbW90ZVBhcmFtc1wiO1xyXG5pbXBvcnQgeyBMb29rdXBMZWZ0Q29tcG9uZW50IH0gZnJvbSBcIi4vbG9va3VwLWxlZnQuY29tcG9uZW50XCI7XHJcbmltcG9ydCB7IExvb2t1cERlZmF1bHRNYXBwaW5nIH0gZnJvbSBcIi4vbG9va3VwLWRlZmF1dC1tYXBwaW5nXCI7XHJcbmltcG9ydCB7IExvb2t1cFV0aWxzIH0gZnJvbSBcIi4vdXRpbHNcIjtcclxuaW1wb3J0IHsgUGVyc29uYWxDb25maWdTZXJ2aWNlIH0gZnJvbSBcIi4vbG9va3VwLXByZXNvbmFsQ29uZmlnLnNlcnZpY2VcIjtcclxuaW1wb3J0IHtcclxuICAgIFV0aWxTZXJ2aWNlLFxyXG4gICAgVHJlZU5vZGVIZWxwZXIsXHJcbiAgICBGYXZvcml0ZUhlbHBlcixcclxuICAgIFNlbGVjdGlvbk1hbmFnZXIsXHJcbiAgICBEYXRhVGFibGVFdmVudE1hbmFnZXIsXHJcbiAgICBUcmVlVGFibGVFdmVudE1hbmFnZXIsXHJcbiAgICBNdWx0aVNlbGVjdGlvbk1hbmFnZXIsXHJcbiAgICBMb29rdXBIdHRwTWFuYWdlcixcclxuICAgIExvb2t1cENvbXBvbmVudE1hbmFnZXIsXHJcbiAgICBMb29rdXBEaWFsb2dNYW5hZ2VyLFxyXG4gICAgb25UZXh0Q2hhbmdlZCxcclxuICAgIExvb2t1cFNlbGVjdGlvblNlcnZpY2UsXHJcbn0gZnJvbSBcIi4vc2VydmljZXNcIjtcclxuaW1wb3J0IHsgY2F0Y2hFcnJvciwgbWFwLCBzd2l0Y2hNYXAgfSBmcm9tIFwicnhqcy9vcGVyYXRvcnNcIjtcclxuXHJcbmltcG9ydCB7IEV2ZW50TWFuYWdlciB9IGZyb20gXCJAYW5ndWxhci9wbGF0Zm9ybS1icm93c2VyXCI7XHJcbmltcG9ydCB7IGNsb25lRGVlcCB9IGZyb20gXCJsb2Rhc2gtZXNcIjtcclxuXHJcblxyXG5leHBvcnQgY29uc3QgTE9PS1VQR1JJRF9WQUxVRV9BQ0NFU1NPUjogYW55ID0ge1xyXG4gICAgcHJvdmlkZTogTkdfVkFMVUVfQUNDRVNTT1IsXHJcbiAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBMb29rdXBHcmlkQ29tcG9uZW50KSxcclxuICAgIG11bHRpOiB0cnVlLFxyXG59O1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgICBzZWxlY3RvcjogXCJmYXJyaXMtbG9va3VwLWdyaWRcIixcclxuICAgIHRlbXBsYXRlVXJsOiBcIi4vbG9va3VwLWdyaWQuY29tcG9uZW50Lmh0bWxcIixcclxuICAgIHN0eWxlVXJsczogW1wiLi9sb29rdXAtZ3JpZC5jb21wb25lbnQuc2Nzc1wiXSxcclxuICAgIHByb3ZpZGVyczogW1xyXG4gICAgICAgIExPT0tVUEdSSURfVkFMVUVfQUNDRVNTT1IsXHJcbiAgICAgICAgU2hvcnRjdXRzU2VydmljZSxcclxuICAgICAgICBMb29rdXBEZWZhdWx0TWFwcGluZyxcclxuICAgICAgICBMb29rdXBVdGlscyxcclxuICAgICAgICBQZXJzb25hbENvbmZpZ1NlcnZpY2UsXHJcbiAgICBdLFxyXG4gICAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZSxcclxuICAgIGV4cG9ydEFzOiBcImxvb2t1cFwiLFxyXG59KVxyXG5leHBvcnQgY2xhc3MgTG9va3VwR3JpZENvbXBvbmVudFxyXG4gICAgZXh0ZW5kcyBMb29rdXBDb21wb25lbnRcclxuICAgIGltcGxlbWVudHMgT25Jbml0LCBBZnRlclZpZXdJbml0LCBPbkNoYW5nZXMsIE9uRGVzdHJveVxyXG57XHJcbiAgICBncm91cEljb24gPSBJTlBVVF9HUk9VUF9JQ09OO1xyXG4gICAgX2Rpc3BsYXlUeXBlID0gXCJcIjtcclxuXHJcbiAgICAvKiog5L2/55So6KGo5Y2V6K6+6K6h5Zmo5Lit55qE5pi+56S657G75Z6L44CC5ZCm5YiZ5L2/55So5YWD5pWw5o2u6K6+572u55qE5pi+56S657G75Z6L44CCIOm7mOiupO+8mmZhbHNlICovXHJcbiAgICBASW5wdXQoKSBjdXN0b21EaXNwbGF5VHlwZSA9IGZhbHNlO1xyXG4gICAgQElucHV0KCkgdmlld1R5cGU6IFwidGV4dFwiIHwgXCJ0YWdcIiA9IFwidGV4dFwiO1xyXG4gICAgQElucHV0KClcclxuICAgIGdldCBkaXNwbGF5VHlwZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGlzcGxheVR5cGU7XHJcbiAgICB9XHJcbiAgICBzZXQgZGlzcGxheVR5cGUodmFsOiBzdHJpbmcpIHtcclxuICAgICAgICBpZiAodmFsKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHR5cGVzID0gT2JqZWN0LnZhbHVlcyhMb29rdXBHcmlkRGlzcGxheVR5cGUpO1xyXG4gICAgICAgICAgICBjb25zdCBpID0gdHlwZXMuZmluZEluZGV4KChuKSA9PiBuID09PSB2YWwudG9VcHBlckNhc2UoKSk7XHJcbiAgICAgICAgICAgIGlmIChpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhMb29rdXBHcmlkRGlzcGxheVR5cGUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZGlzcGxheVR5cGUgPSBMb29rdXBHcmlkRGlzcGxheVR5cGVba2V5c1tpXV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9kaXNwbGF5VHlwZSA9IHZhbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKiog5ZCv55So5riF56m65oyJ6ZKuICovXHJcbiAgICBASW5wdXQoKSBlbmFibGVDbGVhciA9IHRydWU7XHJcbiAgICAvKiog5pyN5Yqh5Zmo56uv5o6S5bqPICovXHJcbiAgICBASW5wdXQoKSByZW1vdGVTb3J0ID0gdHJ1ZTtcclxuXHJcbiAgICBASW5wdXQoKSBjb25kaXRpb246IEVudGl0eUZpbHRlcjtcclxuXHJcbiAgICAvKiog5qCR6KGo5pi+56S65YWo6YCJ5aSN6YCJ5qGG44CCIOm7mOiupOS4jeaYvuekuiAqL1xyXG4gICAgQElucHV0KCkgc2hvd0NoZWNrQWxsID0gZmFsc2U7XHJcblxyXG4gICAgLyoqIOaYr+WQpuWQr+eUqOWkmumAiSAqL1xyXG4gICAgQElucHV0KCkgc2luZ2xlU2VsZWN0ID0gdHJ1ZTtcclxuICAgIC8qKiDlpJrpgInliIbpmpTnrKYgKi9cclxuICAgIEBJbnB1dCgpIG11bHRpcGxlQ2hvaWNlU2VwYXJhdG9yID0gXCIsXCI7XHJcbiAgICAvKiog5Li76ZSu5a2X5q61ICovXHJcbiAgICBASW5wdXQoKSBpZEZpZWxkPzogc3RyaW5nO1xyXG4gICAgLyoqIOWPr+S7peS4uuWFg+aVsOaNrklE44CBd2ViYXBpVVJMICovXHJcbiAgICBASW5wdXQoKSB1cmk/OiBzdHJpbmc7XHJcbiAgICAvKipcclxuICAgICAqIEJFIFJFU1QgUlVJXHJcbiAgICAgKiAtIOatpOWkhOiuvue9ruWQjiB1cmkg5aSx5pWIXHJcbiAgICAgKi9cclxuICAgIEBJbnB1dCgpIGJlVXJpID0gXCJcIjtcclxuICAgIC8qKlxyXG4gICAgICog5pi+56S66L+H5ruk5bel5YW35p2hXHJcbiAgICAgKi9cclxuICAgIEBJbnB1dCgpIHNob3dGaWx0ZXJCYXIgPSB0cnVlO1xyXG4gICAgLyoqIOaYr+WQpuWQr+eUqOWIhumhtSAqL1xyXG4gICAgQElucHV0KCkgcGFnaW5hdGlvbiA9IHRydWU7XHJcbiAgICAvKiog5b2T5YmN6aG157Si5byV77yM5LuOIDDlvIDlp4sgKi9cclxuICAgIEBJbnB1dCgpIHBhZ2VJbmRleCA9IDE7XHJcbiAgICAvKiog5q+P6aG16K6w5b2V5pWwICovXHJcbiAgICBASW5wdXQoKSBwYWdlU2l6ZSA9IDIwO1xyXG4gICAgLyoqIOWPr+eUqOWIhumhteiusOW9leaVsOWIl+ihqCAqL1xyXG4gICAgQElucHV0KCkgcGFnZUxpc3QgPSBbMTAsIDIwLCAzMCwgNTAsIDEwMF07XHJcbiAgICAvKiog5oC76K6w5b2V5pWwICovXHJcbiAgICBASW5wdXQoKSB0b3RhbCA9IDA7XHJcbiAgICAvKiog5Y+v5ouW5Yqo5YiXICovXHJcbiAgICAvLyBASW5wdXQoKSByZXNpemFibGVDb2x1bW5zID0gdHJ1ZTtcclxuICAgIC8qKiDmmL7npLrliJfkv6Hmga8sIOm7mOiupOS4uiBbXSAqL1xyXG4gICAgQElucHV0KCkgY29sdW1uczogYW55W10gPSBbXTtcclxuXHJcbiAgICAvKiog5biu5Yqp5p+l6K+i5piv5ZCm5Li66L+c56uv5p+l6K+iICovXHJcbiAgICBASW5wdXQoKSByZW1vdGVTZWFyY2ggPSB0cnVlO1xyXG5cclxuICAgIC8qKiDmlofmnKzlj5jljJblkI7vvIzov5vooYzmnI3liqHlmajnq6/mn6Xor6IgKi9cclxuICAgIEBJbnB1dCgpIHNlYXJjaE9uU2VydmVyID0gdHJ1ZTtcclxuICAgIC8qKiDkuI3ov5vooYzmnI3liqHlmajmn6Xor6LvvIzmnInllaXnrpfllaUgKi9cclxuICAgIEBJbnB1dCgpIG5vc2VhcmNoID0gZmFsc2U7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlkK/nlKjku7vmhI/ovpPlhaXlkI7vvIzlgLzpgJrov4fovpPlhaXml7bop6blj5FcclxuICAgICAqL1xyXG4gICAgQE91dHB1dCgpIGNsZWFyTWFwcGluZ3MgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlhYHorrjovpPlhaXnmoTlrZfnrKbmnIDlpKfplb/luqbjgIJcclxuICAgICAqIOS7u+aEj+i+k+WFpeaXtu+8jOatpOWxnuaAp+acieaViFxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBtYXhMZW5ndGg7XHJcblxyXG4gICAgQElucHV0KCkgbWFwcGluZ0ZuOiAocm93RGF0YSwgbWFwRmllbGRzLCBiaW5kaW5nRGF0YT86IGFueSkgPT4gdm9pZDtcclxuICAgIC8qKiDmlbDmja7liJfooaggKi9cclxuICAgIEBJbnB1dCgpIGl0ZW1zOiBhbnk7XHJcbiAgICAvLyDmlLbol4/liJfooahcclxuICAgIEBJbnB1dCgpIGZhdm9yaXRlSXRlbXM6IGFueVtdID0gW107XHJcbiAgICAvKiog6Ieq5a6a5LmJ5pWw5o2uICovXHJcbiAgICBASW5wdXQoKSBjdXN0b21EYXRhOiBhbnk7XHJcblxyXG4gICAgLyoqIOe7keWumuWAvOaJgOWcqOeahOWvueixoSAqL1xyXG4gICAgQElucHV0KCkgYmluZGluZ0RhdGE6IHt9O1xyXG5cclxuICAgIEBJbnB1dCgpIHRyZWVJbmZvOiBUcmVlSW5mbztcclxuICAgIC8qKiDmmK/lkKblkK/nlKjnuqfogZTpgInmi6nmjqfliLbpgInpobkgKi9cclxuICAgIEBJbnB1dCgpIGVuYWJsZUNhc2NhZGUgPSBmYWxzZTtcclxuICAgIC8qKiDnuqfogZTmjqfliLbpu5jorqTlgLzvvJogZW5hYmxlLCB1cCwgZG93biwgZGlzYWJsZSAqL1xyXG4gICAgQElucHV0KCkgY2FzY2FkZVN0YXR1czogXCJlbmFibGVcIiB8IFwidXBcIiB8IFwiZG93blwiIHwgXCJkaXNhYmxlXCIgPSBcImVuYWJsZVwiO1xyXG5cclxuICAgIEBJbnB1dCgpIHBsYWNlaG9sZGVyID0gXCJcIjtcclxuXHJcbiAgICAvKiog5pi+56S65bey6YCJ6K6w5b2V5YiX6KGo44CCIOm7mOiupOS4uiBmYWxzZSDkuI3mmL7npLogKi9cclxuICAgIEBJbnB1dCgpIHNob3dTZWxlY3RlZCA9IGZhbHNlO1xyXG5cclxuICAgIC8qKiDlupTnlKjmlLbol4/lpLkgKi9cclxuICAgIEBJbnB1dCgpIHVzZUZhdm9yaXRlID0gZmFsc2U7XHJcbiAgICAvKiog5pS26JeP5pWw5o2u5p2l6Ieq5LqO77yaIGxvY2FsZTog5pys5Zyw5a2Y5YKo77yMIHJlbW90ZTog5pyN5Yqh5Zmo56uv5a2Y5YKoICovXHJcbiAgICBASW5wdXQoKSBmYXZvcml0ZURhdGFGcm9tOiBcImxvY2FsZVwiIHwgXCJyZW1vdGVcIiA9IFwicmVtb3RlXCI7XHJcbiAgICAvKiog5L2/55So5o+Q56S6LOW/q+aNt+mAieaLqSAqL1xyXG4gICAgQElucHV0KCkgdXNlVGlwID0gZmFsc2U7XHJcbiAgICAvKiog6K6w5b2V56qX5Y+j5aSn5bCPICovXHJcbiAgICBASW5wdXQoKSBpc1JlY29yZFNpemUgPSBmYWxzZTtcclxuXHJcbiAgICAvKiog5b+r6YCf6YCJ5oupICovXHJcbiAgICBASW5wdXQoKSB1c2VySWQ6IHN0cmluZztcclxuXHJcbiAgICAvKiog5piv5ZCm5ZCv55So6YCJ5LitdmFsdWXlgLzlr7nlupTnmoTooYzmlbDmja7vvIzpu5jorqQgdHJ1ZSAqL1xyXG4gICAgQElucHV0KCkgZW5hYmxlVG9TZWxlY3QgPSB0cnVlO1xyXG5cclxuICAgIEBJbnB1dCgpIGVuYWJsZUZpbmRUZXh0ID0gZmFsc2U7XHJcbiAgICAvKiogLTE6IOS4jeWxleW8gO+8myAwOiDlhajpg6jlsZXlvIDvvJs+MDog5bGV5byA5Yiw5oyH5a6a57qn5pWwICovXHJcbiAgICBASW5wdXQoKSBleHBhbmRMZXZlbCA9IC0xO1xyXG5cclxuICAgIEBJbnB1dCgpIG5hdlRyZWVUYWJsZU9wdGlvbnM6IGFueSA9IHt9O1xyXG4gICAgQElucHV0KCkgdHJlZVRhYmxlT3B0aW9uczogYW55ID0ge307XHJcbiAgICBASW5wdXQoKSBkYXRhVGFibGVPcHRpb25zOiBhbnkgPSB7fTtcclxuXHJcbiAgICBkZWZhdWx0VHJlZVRhYmxlT3B0aW9ucyA9IHtcclxuICAgICAgICBtYXhMZXZlbDogOSxcclxuICAgICAgICBlbmFibGVDb250ZXh0TWVudTogZmFsc2UsXHJcbiAgICAgICAgY29udGV4dE1lbnVJdGVtczogW10sXHJcbiAgICB9O1xyXG5cclxuICAgIC8qKiDmoJHlvaLluK7liqnmlbDmja7liqDovb3mlrnlvI/vvJogZGVmYXVsdDog5YaF572u5Y+W5pWw77ybIGxvYWRhbGw6IOWKoOi9veaJgOaciSBsYXllcmxvYWTvvJrliIblsYLliqDovb0gKi9cclxuICAgIEBJbnB1dCgpIGxvYWRUcmVlRGF0YVR5cGU6IFwiZGVmYXVsdFwiIHwgXCJsb2FkYWxsXCIgfCBcImxheWVybG9hZFwiID0gXCJkZWZhdWx0XCI7XHJcblxyXG4gICAgLyoqIOeql+WPo+aJk+W8gOWQjueri+WNs+WKoOi9veaVsOaNru+8jOm7mOiupOS4uiB0cnVlICovXHJcbiAgICBASW5wdXQoKSBsb2FkRGF0YVdoZW5PcGVuID0gdHJ1ZTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIOWvvOiIquWIl+ihqO+8jOagkeWIl+ihqOWcqOW4ruWKqeaJk+W8gOWQjumAieS4reeahOaVsOaNrjtcclxuICAgICAqIOiuvue9ruWQju+8jGBzZWxlY3RGaXJzdEluTmF2YCDlpLHmlYjvvIFcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgbmF2U2VsZWN0ZWRJZHMgPSBcIlwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICog5a+86Iiq5biu5Yqp77yM6YCJ5Lit56ysMeadoeaVsOaNru+8jOm7mOiupOS4uiBmYWxzZTtcclxuICAgICAqIOazqOaEj++8muW9k2BuYXZTZWxlY3RlZElkc2DkuI3kuLrnqbrml7bvvIzmraTlsZ7mgKflpLHmlYjjgIJcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgc2VsZWN0Rmlyc3RJbk5hdiA9IGZhbHNlO1xyXG5cclxuICAgIC8qKiDlkK/nlKjmnoTpgKDlrozmlbTmoJHov4fmu6QgKi9cclxuICAgIEBJbnB1dCgpIGVuYWJsZUZ1bGxUcmVlID0gdHJ1ZTtcclxuXHJcbiAgICAvKiog5pi+56S65paH5pys6Ieq5a6a5LmJ5Ye95pWwICovXHJcbiAgICBASW5wdXQoKSBkaXNwbGF5Rm9ybWF0dGVyOiAoXHJcbiAgICAgICAgdmFsdWU6IHN0cmluZyxcclxuICAgICAgICBkYXRhOiBhbnksXHJcbiAgICAgICAgaW5zdGFuY2U6IGFueVxyXG4gICAgKSA9PiBzdHJpbmcgPSB1bmRlZmluZWQ7XHJcbiAgICAvKiog5pi+56S65paH5pys5a2X5q616ZuG5ZCI77yM5LulIOiLseaWhyDpgJflj7fpmpTlvIAgKi9cclxuICAgIEBJbnB1dCgpIGRpc3BsYXlGaWVsZHMgPSBcIlwiO1xyXG4gICAgQElucHV0KCkgZGlzcGxheVRleHRTZXBhcmF0b3IgPSBcIl9cIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIOW4ruWKqeWFg+aVsOaNrklE77yM5LiN5Li656m65pe26LCD55So5oyH5a6a55qEVVJJXHJcbiAgICAgKiAvYXBpL3J1bnRpbWUvYmNjL3YxLjAvaGVscC9kYXRhL3toZWxwSWR9XHJcbiAgICAgKi9cclxuICAgIEBJbnB1dCgpIGhlbHBJZCA9IFwiXCI7XHJcbiAgICAvKiog5paH5pys5a+56b2Q5pa55byP77ybIGxlZnQgfCBjZW50ZXIgfCByaWdodDsg6buY6K6kIGxlZnQgKi9cclxuICAgIEBJbnB1dCgpIHRleHRBbGlnbiA9IFwibGVmdFwiO1xyXG5cclxuICAgIC8qKiDpvKDmoIfmu5Hov4fovpPlhaXmoYbml7bmmL7npLrovpPlhaXmoYblhoXnmoTmlofmnKzkv6Hmga8gKi9cclxuICAgIEBJbnB1dCgpIGVuYWJsZVRpdGxlID0gdHJ1ZTtcclxuICAgIEBJbnB1dCgpIHVzZUV4dGVuZEluZm8gPSBmYWxzZTtcclxuICAgIEBJbnB1dCgpIGV4dEluZm9GaWVsZHMgPSBcIlwiO1xyXG4gICAgQElucHV0KCkgZXh0SW5mb0Zvcm1hdHRlcjogRXh0SW5mb0Zvcm1hdHRlcjtcclxuICAgIEBJbnB1dCgpIGV4dGVuZEluZm8gPSBcIlwiO1xyXG4gICAgLyoqIElERSDorr7orqHlmajoh6rlrprkuYnmoLzlvI/ljJYgMjEwMyAqL1xyXG4gICAgQElucHV0KCkgY3VzdG9tRm9ybWF0dGVyOiBDdXN0b21EYXRhRm9ybWF0dGVyID0gbnVsbDtcclxuICAgIEBJbnB1dCgpIGN1c3RvbU5hdkZvcm1hdHRlcjogQ3VzdG9tRGF0YUZvcm1hdHRlciA9IG51bGw7XHJcblxyXG4gICAgLyoqIOiHquWumuS5ieehruWumuS6i+S7tiAqL1xyXG4gICAgQElucHV0KCkgb2tIYW5kbGVyID0gbnVsbDtcclxuICAgIC8qKiDoh6rlrprkuYnlj5bmtojkuovku7YgKi9cclxuICAgIEBJbnB1dCgpIGNhbmNlbEhhbmRsZXIgPSBudWxsO1xyXG5cclxuICAgIEBJbnB1dCgpIHRhZ2JveEhlaWdodCA9IFwiYXV0b1wiO1xyXG4gICAgQElucHV0KCkgbWF4VGFnYm94SGVpZ2h0O1xyXG5cclxuICAgIC8qKiDlkK/nlKjojrflj5bmiYDmnInlrZDnuqfmlbDmja7nmoTlip/og70gKi9cclxuICAgIEBJbnB1dCgpIGVuYWJsZUdldEFsbENoaWxkTm9kZXMgPSB0cnVlO1xyXG5cclxuICAgIEBJbnB1dCgpIHNob3J0Y3V0S2V5ID0ge1xyXG4gICAgICAgIC8qKiDmiZPlvIDluK7liqnnqpflj6MgKi9cclxuICAgICAgICBvcGVuOiBcIkFycm93UmlnaHRcIixcclxuICAgICAgICAvKiog56Gu6K6k6YCJ5oup5pWw5o2uICovXHJcbiAgICAgICAgY29uZmlybTogXCJFbnRlclwiLFxyXG4gICAgICAgIC8qKiDmkJzntKLmoYbnhKbngrkgKi9cclxuICAgICAgICBzZWFyY2hGb2N1czogXCJGM1wiLFxyXG4gICAgICAgIC8qKiDpgInkuK3kuIrkuIDmnaEgKi9cclxuICAgICAgICBtb3ZlVXA6IFwiQXJyb3dVcFwiLFxyXG4gICAgICAgIC8qKiDpgInkuK3kuIvkuIDmnaEgKi9cclxuICAgICAgICBtb3ZlRG93bjogXCJBcnJvd0Rvd25cIixcclxuICAgICAgICAvKiog5bGV5byA6IqC54K5ICovXHJcbiAgICAgICAgZXhwYW5kOiBcIkFycm93UmlnaHRcIixcclxuICAgICAgICAvKiog5oqY5Y+g6IqC54K5ICovXHJcbiAgICAgICAgY29sbGFwc2U6IFwiQXJyb3dMZWZ0XCIsXHJcbiAgICAgICAgLyoqIOS4i+S4gOmhtSAqL1xyXG4gICAgICAgIG5leHRQYWdlcjogXCJQYWdlRG93blwiLFxyXG4gICAgICAgIC8qKiDkuIrkuIDpobUgKi9cclxuICAgICAgICBwcmV2UGFnZXI6IFwiUGFnZVVwXCIsXHJcbiAgICB9O1xyXG4gICAgLyoqIOW/q+aNt+mAieaLqeebuOWFs+mFjee9rumhue+8jOm7mOiupOS4uiBudWxsLCDljbPkuI3lkK/nlKjmraTlip/og70gKi9cclxuICAgIEBJbnB1dCgpIHF1aWNrU2VsZWN0OiBRdWlja1NlbGVjdE9wdGlvbiA9IG51bGw7XHJcblxyXG4gICAgLyoqIOaVsOaNrumAieaLqeWQju+8jOWAvOaYoOWwhOWJjeinpuWPkVxyXG4gICAgICog6L+U5ZueIE9ic2VydmFibGVcclxuICAgICAqICAgICAgY2FuU2VsZWN0OiA8Ym9vbGVhbj4gIOaYr+WQpuWFgeiuuOmAieaLqVxyXG4gICAgICogICAgICBtZXNzYWdlOiA8c3RyaW5nPiDkuI3lhYHorrjpgInmi6nml7bnmoTmj5DnpLrkv6Hmga9cclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgYmVmb3JlU2VsZWN0RGF0YTogKHA6IHtcclxuICAgICAgICBpbnN0YW5jZTogYW55O1xyXG4gICAgICAgIGRhdGE6IGFueTtcclxuICAgIH0pID0+IE9ic2VydmFibGU8eyBjYW5TZWxlY3Q6IGJvb2xlYW47IG1lc3NhZ2U6IHN0cmluZyB9IHwgYm9vbGVhbj47XHJcblxyXG4gICAgQE91dHB1dCgpIHNlbGVjdGVkRGF0YSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIEBPdXRwdXQoKSBjbGVhciA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIEBPdXRwdXQoKSBzZWFyY2ggPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICAvLyDluK7liqnmlofmnKzmoYbkuK3lgLzlj5jljJbkuovku7ZcclxuICAgIEBPdXRwdXQoKSB2YWx1ZUNoYW5nZWQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICBAT3V0cHV0KCkgbG9hZFN1Y2Nlc3MgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgQE91dHB1dCgpIHBhZ2VyQ2hhbmdlZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgICBAT3V0cHV0KCkgZXhwYW5kVHJlZU5vZGUgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICBAT3V0cHV0KCkgdGV4dENoYW5nZWQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgQE91dHB1dCgpIGNoZWNrZWRDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPHtcclxuICAgICAgICBkYXRhOiBhbnk7XHJcbiAgICAgICAgaXNDaGVjazogYm9vbGVhbjtcclxuICAgIH0+KCk7XHJcblxyXG4gICAgQE91dHB1dCgpIHRhZ1JlbW92ZWQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgLyoqIOWGheWuueS4reeVmeeZvei+uei3nSAqL1xyXG4gICAgY29udGFpbmVyTWFyZ2luID0geyB0b3A6IDAsIGJvdHRvbTogNSwgbGVmdDogMTAsIHJpZ2h0OiAxMCB9O1xyXG5cclxuICAgIGNvbnRhaW5lclN0eWxlID0ge1xyXG4gICAgICAgIG1hcmdpbkxlZnQ6IHRoaXMuY29udGFpbmVyTWFyZ2luLmxlZnQgKyBcInB4XCIsXHJcbiAgICAgICAgbWFyZ2luUmlnaHQ6IHRoaXMuY29udGFpbmVyTWFyZ2luLnJpZ2h0ICsgXCJweFwiLFxyXG4gICAgICAgIG1hcmdpblRvcDogdGhpcy5jb250YWluZXJNYXJnaW4udG9wICsgXCJweFwiLFxyXG4gICAgICAgIG1hcmdpbkJvdHRvbTogdGhpcy5jb250YWluZXJNYXJnaW4uYm90dG9tICsgXCJweFwiLFxyXG4gICAgfTtcclxuXHJcbiAgICBfZ3JpZE9wdGlvbnM6IExvb2t1cEdyaWRPcHRpb25zID0gbG9va3VwR3JpZERlZmF1bHRzO1xyXG5cclxuICAgIGdldCBncmlkT3B0aW9ucygpIHtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIHRoaXMudXNlRmF2b3JpdGUgJiZcclxuICAgICAgICAgICAgdGhpcy5jb2x1bW5zICYmXHJcbiAgICAgICAgICAgIHRoaXMuY29sdW1ucy5sZW5ndGggPiAwICYmXHJcbiAgICAgICAgICAgICF0aGlzLmNvbHVtbnMuZmluZCgoaXRlbSkgPT4gaXRlbS5maWVsZCA9PT0gRkFWT1JJVEVfRklFTERfTkFNRSlcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgdGhpcy5jb2x1bW5zLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgZmllbGQ6IEZBVk9SSVRFX0ZJRUxEX05BTUUsXHJcbiAgICAgICAgICAgICAgICB0aXRsZTogXCJcIixcclxuICAgICAgICAgICAgICAgIHdpZHRoOiA0MCxcclxuICAgICAgICAgICAgICAgIGFsaWduOiBcImNlbnRlclwiLFxyXG4gICAgICAgICAgICAgICAgZml4ZWQ6ICdyaWdodCcsXHJcbiAgICAgICAgICAgICAgICAvLyBmaXhlZFdpZHRoOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgZm9ybWF0dGVyOiB0aGlzLmZhdkhlbHBlci5mYXZvcml0ZUNvbHVtbkZvcm1hdHRlcixcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2dyaWRPcHRpb25zID0gT2JqZWN0LmFzc2lnbih0aGlzLl9ncmlkT3B0aW9ucywge1xyXG4gICAgICAgICAgICBzaW5nbGVTZWxlY3Q6IHRoaXMuc2luZ2xlU2VsZWN0LFxyXG4gICAgICAgICAgICBpZEZpZWxkOiB0aGlzLmlkRmllbGQsXHJcbiAgICAgICAgICAgIHVyaTogdGhpcy51cmksXHJcbiAgICAgICAgICAgIHNob3dGaWx0ZXJCYXI6IHRoaXMuc2hvd0ZpbHRlckJhcixcclxuICAgICAgICAgICAgcGFnaW5hdGlvbjogdGhpcy5wYWdpbmF0aW9uLFxyXG4gICAgICAgICAgICBwYWdlSW5kZXg6IHRoaXMucGFnZUluZGV4LFxyXG4gICAgICAgICAgICBwYWdlU2l6ZTogdGhpcy5wYWdlU2l6ZSxcclxuICAgICAgICAgICAgcGFnZUxpc3Q6IHRoaXMucGFnZUxpc3QsXHJcbiAgICAgICAgICAgIHRvdGFsOiB0aGlzLnRvdGFsLFxyXG4gICAgICAgICAgICBpdGVtczogdGhpcy5pdGVtcyxcclxuICAgICAgICAgICAgY29sdW1uczogdGhpcy5jb2x1bW5zLFxyXG4gICAgICAgICAgICByZXNpemFibGVDb2x1bW5zOiB0cnVlLFxyXG4gICAgICAgICAgICBmaXhlZEhlYWRlcjogdHJ1ZSxcclxuICAgICAgICAgICAgaG92ZXI6IHRydWUsXHJcbiAgICAgICAgICAgIHRyZWVJbmZvOiB0aGlzLnRyZWVJbmZvLFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5fZ3JpZE9wdGlvbnM7XHJcbiAgICB9XHJcbiAgICBASW5wdXQoKSBzZXQgZ3JpZE9wdGlvbnMob3B0cykge1xyXG4gICAgICAgIHRoaXMuX2dyaWRPcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5fZ3JpZE9wdGlvbnMsIG9wdHMpO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRDb2x1bW5zID0gdGhpcy5tdWx0aVNlbE1nci5pbml0U2VsZWN0ZWRDb2x1bW5zKCk7XHJcbiAgICB9XHJcblxyXG4gICAgQFZpZXdDaGlsZChcImNvbnRlbnRDb250YWluZXJcIiwgeyByZWFkOiBWaWV3Q29udGFpbmVyUmVmIH0pXHJcbiAgICBjb250ZW50Q29udGFpbmVyOiBWaWV3Q29udGFpbmVyUmVmO1xyXG4gICAgQFZpZXdDaGlsZChcImZhdm9yaXRlc0NvbnRhaW5lclwiLCB7IHJlYWQ6IFZpZXdDb250YWluZXJSZWYgfSlcclxuICAgIGZhdm9yaXRlc0NvbnRhaW5lcjogVmlld0NvbnRhaW5lclJlZjtcclxuICAgIEBWaWV3Q2hpbGQoXCJsZWZ0Q29udGFpbmVyXCIsIHsgcmVhZDogVmlld0NvbnRhaW5lclJlZiB9KVxyXG4gICAgbGVmdENvbnRhaW5lcjogVmlld0NvbnRhaW5lclJlZjtcclxuICAgIEBWaWV3Q2hpbGQoXCJjZW50ZXJDb250YWluZXJcIiwgeyByZWFkOiBWaWV3Q29udGFpbmVyUmVmIH0pXHJcbiAgICBjZW50ZXJDb250YWluZXI6IFZpZXdDb250YWluZXJSZWY7XHJcbiAgICBAVmlld0NoaWxkKFwibXVsdGlTZWxlY3REVFwiKSBtdWx0aVNlbGVjdERUOiBEYXRhVGFibGVDb21wb25lbnQ7XHJcbiAgICBAVmlld0NoaWxkKFwiaW5wdXRncm91cFwiKSBpbnB1dEdyb3VwOiBJbnB1dEdyb3VwQ29tcG9uZW50O1xyXG4gICAgQFZpZXdDaGlsZChcImxlZnRQYW5lbFwiKSBsZWZ0UGFuZWw6IExheW91dFBhbmVsQ29tcG9uZW50O1xyXG4gICAgQFZpZXdDaGlsZChcInRhZ2JveFwiKSB0YWdib3g6IEVsZW1lbnRSZWY7XHJcblxyXG4gICAgQFZpZXdDaGlsZChcIm9rYnRuXCIpIG9rQnV0dG9uOiBFbGVtZW50UmVmO1xyXG5cclxuICAgIGNvbXBvbmVudFJlZjogQ29tcG9uZW50UmVmPGFueT47XHJcbiAgICBsZWZ0Q29tcG9uZW50UmVmOiBDb21wb25lbnRSZWY8TG9va3VwTGVmdENvbXBvbmVudD47XHJcbiAgICBmYXZvcml0ZXNDb21wb25lbnRSZWY6IENvbXBvbmVudFJlZjxhbnk+O1xyXG5cclxuICAgIHB1YmxpYyBodHRwOiBJTG9va3VwSHR0cFNlcnZpY2U7XHJcbiAgICBwdWJsaWMgbWVzc2FnZXJTZXJ2aWNlOiBNZXNzYWdlclNlcnZpY2U7XHJcbiAgICBwdWJsaWMgbG9hZGluZ1NlcnZpY2U6IExvYWRpbmdTZXJ2aWNlO1xyXG4gICAgbG9hZGluZzogTG9hZGluZ0NvbXBvbmVudDtcclxuICAgIC8vIGRhdGFGaWVsZE1hcHM6IGFueTtcclxuICAgIG5hdmlnYXRpb25PcHRpb25zOiBOYXZpZ2F0aW9uT3B0aW9ucztcclxuXHJcbiAgICAvLyDlr7zoiKrluK7liqnlt6bliJnlrr3luqZcclxuICAgIGxlZnRQYW5lbFdpZHRoID0gMzIwO1xyXG4gICAgLy8g5a+86Iiq5biu5Yqp56qX5Y+j5pyA5bCP5a695bqmXHJcbiAgICBuYXZMb29rdXBEaWFsb2dNaW5XaWR0aCA9IDk2MDtcclxuXHJcbiAgICBuYXZpZ2F0aW9uRmlsdGVyOiBOYXZpZ2F0aW9uRmlsdGVyID0gbnVsbDtcclxuXHJcbiAgICBzdWJzY3JpcHRpb25zOiBTdWJzY3JpcHRpb25bXSA9IFtdO1xyXG4gICAgZGlhbG9nT3BlbmVkU3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb247XHJcbiAgICBkaWFsb2dDbG9zZWRTdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbjtcclxuXHJcbiAgICBpc1RleHRDaGFuZ2UgPSBmYWxzZTtcclxuICAgIGlzVGFiQ2hhbmdlZCA9IGZhbHNlO1xyXG5cclxuICAgIGRpc3BsYXlJbmZvOiBEaXNwbGF5SW5mbyA9IE9iamVjdC5hc3NpZ24oe30sIGRpc3BsYXlJbmZvRGVmYXVsdCk7XHJcblxyXG4gICAgdGFiQ2hhbmdlU3Vic2NyaXB0aW9uID0gbnVsbDtcclxuICAgIC8vIOaaguWtmOihjOeCueWHu+aVsOaNriAg55So5LqO5pS26JePXHJcbiAgICBwZXJzb25hbENvbmY6IFBlcnNvbmFsQ29uZmlnID0ge307XHJcbiAgICBmYXZvcml0ZUNvbHVtbnM6IGFueVtdID0gW107XHJcbiAgICAvKiog5Li05pe25p+l6K+i5Y+C5pWwICovXHJcbiAgICBfc2VhcmNoU3RhdGUgPSBudWxsO1xyXG4gICAgYWxsRGF0YTogYW55ID0gW107XHJcbiAgICBnZXQgc2VsZWN0aW9ucygpIHtcclxuICAgICAgICBjb25zdCBzZWxlY3RJdGVtcyA9IHRoaXMubG9va3VwU2VsZWN0aW9uU2VyLmdldFNlbGVjdGlvbnMoKTtcclxuICAgICAgICBpZiAodGhpcy5zaW5nbGVTZWxlY3QpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGVjdEl0ZW1zWzBdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxlY3RJdGVtcztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXQgdXNlUGVyc2lvbmFsQ29uZigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy51c2VGYXZvcml0ZSB8fCB0aGlzLnVzZVRpcCB8fCB0aGlzLmlzUmVjb3JkU2l6ZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZGlzcGxheVRleHRMaXN0KCkge1xyXG4gICAgICAgIGlmICh0aGlzLmRpc3BsYXlUZXh0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRpc3BsYXlUZXh0LnNwbGl0KHRoaXMubXVsdGlwbGVDaG9pY2VTZXBhcmF0b3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHBlcnNvbmFsQ29uZmlnU2VydmljZTogUGVyc29uYWxDb25maWdTZXJ2aWNlO1xyXG4gICAgcHVibGljIHV0aWxTZXJ2aWNlOiBVdGlsU2VydmljZTtcclxuICAgIHB1YmxpYyB0cmVlTm9kZUhlbHBlcjogVHJlZU5vZGVIZWxwZXI7XHJcbiAgICBwdWJsaWMgbG9jYWxTZXJ2aWNlOiBMb2NhbGVTZXJ2aWNlO1xyXG4gICAgcHVibGljIG5vdGlmeVNlcnZpY2U6IE5vdGlmeVNlcnZpY2U7XHJcbiAgICBhbGxDb2x1bW5zVGl0bGUgPSBcIuaJgOacieWIl1wiO1xyXG4gICAgbXVzdFdyaXRlU29tZXRoaW5nID0gXCLor7fovpPlhaXlhbPplK7lrZflkI7mn6Xor6LjgIJcIjtcclxuICAgIG11c3RDaG9vc0FkYXRhcm93ID0gXCLor7fpgInmi6nkuIDmnaHorrDlvZXvvIFcIjtcclxuICAgIGFkZEZhdm9yaXRlU3VjY2VzcyA9IFwi5pS26JeP5oiQ5Yqf44CCXCI7XHJcbiAgICBkZWxGYXZvcml0ZVN1Y2Nlc3MgPSBcIuenu+mZpOaUtuiXj+aIkOWKn+OAglwiO1xyXG5cclxuICAgIHNlYXJjaGluZyA9IGZhbHNlO1xyXG4gICAgLyoqIOS4tOaXtuWtmOWCqOafpeivoue7k+aenOmbhiAqL1xyXG4gICAgX3NlYXJjaFJlc3VsdCA9IG51bGw7XHJcblxyXG4gICAgbG9va3VwaW5pdGlhbGl6YXRpb25TdWJqZWN0ID0gbmV3IFN1YmplY3QoKTtcclxuXHJcbiAgICAvKiog5aSa6YCJ5pe277yM6YCJ5Lit55qE5pWw5o2uICovXHJcbiAgICBjdXJyZW50U2VsZWN0ZWRJdGVtczogT2JzZXJ2YWJsZTxhbnk+ID0gb2YoW10pO1xyXG4gICAgLyoqIOW3sumAieaVsOaNruWIl+S/oeaBryAqL1xyXG4gICAgc2VsZWN0ZWRDb2x1bW5zID0gW107XHJcbiAgICBhY3RpdmVUYWI6IHN0cmluZyB8IFwiZGF0YWxpc3RcIiB8IFwiZmF2b3JpdGVcIiB8IFwic2VsZWN0ZWRcIiA9IFwiZGF0YWxpc3RcIjtcclxuXHJcbiAgICBmYXZIZWxwZXI6IEZhdm9yaXRlSGVscGVyID0gbnVsbDtcclxuICAgIHR0RXZlbnRNZ3I6IFRyZWVUYWJsZUV2ZW50TWFuYWdlciA9IG51bGw7XHJcbiAgICBtdWx0aVNlbE1ncjogTXVsdGlTZWxlY3Rpb25NYW5hZ2VyID0gbnVsbDtcclxuICAgIGh0dHBNZ3I6IExvb2t1cEh0dHBNYW5hZ2VyID0gbnVsbDtcclxuICAgIGxvb2t1cENtcE1ncjogTG9va3VwQ29tcG9uZW50TWFuYWdlciA9IG51bGw7XHJcbiAgICBkaWFsb2dNZ3I6IExvb2t1cERpYWxvZ01hbmFnZXIgPSBudWxsO1xyXG4gICAgc2VsZWN0aW9uTWdyOiBTZWxlY3Rpb25NYW5hZ2VyID0gbnVsbDtcclxuICAgIGR0RXZlbnRNZ3I6IERhdGFUYWJsZUV2ZW50TWFuYWdlciA9IG51bGw7XHJcblxyXG4gICAgbG9va3VwU2VsZWN0aW9uU2VyOiBMb29rdXBTZWxlY3Rpb25TZXJ2aWNlID0gbnVsbDtcclxuXHJcbiAgICBjb250cm9sSWQgPSBcIlwiO1xyXG4gICAgc2F2aW5nRmFvcml0ZURhdGEgPSBmYWxzZTtcclxuICAgIGlzUmVhZHkgPSBmYWxzZTtcclxuICAgIHNob3dUYWdib3hDbGVhckJ1dHRvbiA9IGZhbHNlO1xyXG4gICAgaGFzRXJyb3IgPSBmYWxzZTtcclxuXHJcbiAgICBpc0dldEFsbENoaWRsTm9kZXMgPSBmYWxzZTtcclxuICAgIGV2ZW50TWFuYWdlcjogRXZlbnRNYW5hZ2VyO1xyXG4gICAgLyoqIOmAieS4reiusOW9lUlE77yM6Ieq5a6a5LmJ5biu5Yqp5Y+W5pWw5pe25L2/55SoICovXHJcbiAgICBzZWxlY3RlZElkcyA9IFtdO1xyXG4gICAgcHJpdmF0ZSBsb29rdXBTZWFyY2hJbnB1dEV2ZW50ID0gbnVsbDtcclxuICAgIHByaXZhdGUgZmFycmlzSW5zdGFuY2VzOiBGYXJyaXNDb21wb25lbnRJbnN0YW5jZVNlcnZpY2UgPSBudWxsO1xyXG4gICAgLyoqIOeUqOaIt+WIneWni+iuvue9riAqL1xyXG4gICAgcHJpdmF0ZSBfdXNlclNldHRpbmdzOiBhbnkgPSB7fTtcclxuXHJcbiAgICBnZXQgdXNlckluaXRpYWxDb25maWcoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3VzZXJTZXR0aW5ncztcclxuICAgIH1cclxuXHJcbiAgICBfdHJlZUluZm9fID0gbnVsbDtcclxuXHJcbiAgICAvKiogZGlhbG9nIOWGheWuueWMuuWfn+mrmOW6puOAgiDlvLnnqpfmgLvpq5jluqYgLSDlpLTpg6jpq5jluqYgLSDohJrpg6jpq5jluqYgLSDvvIjlkK/nlKjmlLbol48gVEFC5aS06auY5bqm77yJICovXHJcbiAgICBkaWFsb2dDb250ZW50SGVpZ2h0ID0gMDtcclxuXHJcbiAgICBvdmVyTGF5U2VydmljZTogT3ZlckxheUhpZGRlblNlcnZpY2U7XHJcbiAgICBwcml2YXRlIGRlYnVnU2VyOiBEZWJ1Z1NlcnZpY2UgPSBudWxsO1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHVibGljIGluamVjdG9yOiBJbmplY3RvcixcclxuICAgICAgICBwdWJsaWMgY2ZyOiBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsXHJcbiAgICAgICAgcHVibGljIGVsOiBFbGVtZW50UmVmLFxyXG4gICAgICAgIHB1YmxpYyB1dGlsczogQ29tbW9uVXRpbHMsXHJcbiAgICAgICAgcHJpdmF0ZSBkZWZhdWx0TWFwcGluZzogTG9va3VwRGVmYXVsdE1hcHBpbmcsXHJcbiAgICAgICAgcHVibGljIGNoYW5nZURldGVjdG9yOiBDaGFuZ2VEZXRlY3RvclJlZixcclxuICAgICAgICBwdWJsaWMgc2hvcnRjdXRzOiBTaG9ydGN1dHNTZXJ2aWNlLFxyXG4gICAgICAgIHB1YmxpYyBsb29rdXBVdGlsczogTG9va3VwVXRpbHMsXHJcbiAgICAgICAgcHJpdmF0ZSB6b25lOiBOZ1pvbmUsXHJcbiAgICAgICAgcHJpdmF0ZSByZW5kZXIyOiBSZW5kZXJlcjJcclxuICAgICkge1xyXG4gICAgICAgIHN1cGVyKGluamVjdG9yLCBlbCwgY2hhbmdlRGV0ZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuY3JlYXRlSW5zdGFuY2UoKTtcclxuICAgICAgICB0aGlzLmN1cnJlbnRTZWxlY3RlZEl0ZW1zID0gdGhpcy5sb29rdXBTZWxlY3Rpb25TZXIuc2VsZWN0ZWQkO1xyXG4gICAgICAgIHRoaXMuZXZlbnRNYW5hZ2VyID0gdGhpcy5pbmplY3Rvci5nZXQoRXZlbnRNYW5hZ2VyKTtcclxuICAgICAgICB0aGlzLmZhcnJpc0luc3RhbmNlcyA9IHRoaXMuaW5qZWN0b3IuZ2V0KFxyXG4gICAgICAgICAgICBGYXJyaXNDb21wb25lbnRJbnN0YW5jZVNlcnZpY2UsXHJcbiAgICAgICAgICAgIG51bGxcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICB0aGlzLm92ZXJMYXlTZXJ2aWNlID0gbmV3IE92ZXJMYXlIaWRkZW5TZXJ2aWNlKCk7XHJcblxyXG4gICAgICAgIHRoaXMuZGVidWdTZXIgPSB0aGlzLmluamVjdG9yLmdldChEZWJ1Z1NlcnZpY2UsIG51bGwpO1xyXG4gICAgICAgIGlmICh0aGlzLmRlYnVnU2VyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVidWdTZXIudXNlRGVidWdNb2RlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHdyaXRlQ29uc29sZShtc2csIHR5cGU6ICdpbmZvJ3wnbG9nJ3wnd2Fybid8J2Vycm9yJyA9ICd3YXJuJykge1xyXG4gICAgICAgIGlmICh0aGlzLmRlYnVnU2VyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVidWdTZXJbdHlwZV0obXNnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjYWNoZVVzZXJDb25maWcoKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlclNldHRpbmdzLl90aXRsZSA9IHRoaXMudGl0bGU7XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5SW5mby50aXRsZSA9IHRoaXMudGl0bGU7XHJcbiAgICAgICAgdGhpcy5fdXNlclNldHRpbmdzLl9jb2x1bW5zID0gdGhpcy5kZWVwQ2xvbmUodGhpcy5jb2x1bW5zIHx8IFtdKTtcclxuICAgICAgICB0aGlzLl91c2VyU2V0dGluZ3MuZ2V0Q29sdW1ucyA9ICgpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3VzZXJTZXR0aW5ncy5fY29sdW1ucztcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLl91c2VyU2V0dGluZ3MucmVzZXQgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudGl0bGUgPSB0aGlzLl91c2VyU2V0dGluZ3MuX3RpdGxlO1xyXG4gICAgICAgICAgICB0aGlzLmRpc3BsYXlJbmZvLnRpdGxlID0gdGhpcy50aXRsZTtcclxuICAgICAgICAgICAgdGhpcy5jb2x1bW5zID0gdGhpcy5fdXNlclNldHRpbmdzLmdldENvbHVtbnMoKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZGVlcENsb25lKG9iaikge1xyXG4gICAgICAgIGlmIChvYmogPT09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGNsb25lID0gT2JqZWN0LmFzc2lnbih7fSwgb2JqKTtcclxuICAgICAgICBPYmplY3Qua2V5cyhjbG9uZSkuZm9yRWFjaChcclxuICAgICAgICAgICAgKGtleSkgPT5cclxuICAgICAgICAgICAgICAgIChjbG9uZVtrZXldID1cclxuICAgICAgICAgICAgICAgICAgICB0eXBlb2Ygb2JqW2tleV0gPT09IFwib2JqZWN0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLmRlZXBDbG9uZShvYmpba2V5XSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBvYmpba2V5XSlcclxuICAgICAgICApO1xyXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG9iaikpIHtcclxuICAgICAgICAgICAgY2xvbmUubGVuZ3RoID0gb2JqLmxlbmd0aDtcclxuICAgICAgICAgICAgcmV0dXJuIEFycmF5LmZyb20oY2xvbmUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY2xvbmU7XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkluaXQoKSB7XHJcbiAgICAgICAgc3VwZXIubmdPbkluaXQoKTtcclxuICAgICAgICB0aGlzLmNhY2hlVXNlckNvbmZpZygpO1xyXG4gICAgICAgIGlmICghdGhpcy5sb2FkVHJlZURhdGFUeXBlKSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9hZFRyZWVEYXRhVHlwZSA9IFwiZGVmYXVsdFwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jaGVja0dyaWRPcHRpb25zKCk7XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5SW5mby50aXRsZSA9IHRoaXMudGl0bGU7XHJcbiAgICAgICAgLyoqIOS8oOmAkuS4iuS4i+aWhyAqL1xyXG4gICAgICAgIGlmICh0aGlzLmh0dHApIHtcclxuICAgICAgICAgICAgdGhpcy5odHRwLmNvbnRleHQgPSB0aGlzLmNvbnRleHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmFsbENvbHVtbnNUaXRsZSA9IHRoaXMubG9jYWxTZXJ2aWNlLmdldFZhbHVlKFwibG9va3VwLmFsbENvbHVtbnNcIik7XHJcbiAgICAgICAgdGhpcy5tdXN0V3JpdGVTb21ldGhpbmcgPSB0aGlzLmxvY2FsU2VydmljZS5nZXRWYWx1ZShcclxuICAgICAgICAgICAgXCJsb29rdXAubXVzdFdyaXRlU29tZXRoaW5nXCJcclxuICAgICAgICApO1xyXG4gICAgICAgIHRoaXMubXVzdENob29zQWRhdGFyb3cgPSB0aGlzLmxvY2FsU2VydmljZS5nZXRWYWx1ZShcclxuICAgICAgICAgICAgXCJsb29rdXAubXVzdENob29zQWRhdGFyb3dcIlxyXG4gICAgICAgICk7XHJcbiAgICAgICAgdGhpcy5hZGRGYXZvcml0ZVN1Y2Nlc3MgPVxyXG4gICAgICAgICAgICB0aGlzLmxvY2FsU2VydmljZS5nZXRWYWx1ZShcImxvb2t1cC5mYXZvcml0ZUluZm8uYWRkRmF2XCIpIHx8XHJcbiAgICAgICAgICAgIHRoaXMuYWRkRmF2b3JpdGVTdWNjZXNzO1xyXG4gICAgICAgIHRoaXMuZGVsRmF2b3JpdGVTdWNjZXNzID1cclxuICAgICAgICAgICAgdGhpcy5sb2NhbFNlcnZpY2UuZ2V0VmFsdWUoXCJsb29rdXAuZmF2b3JpdGVJbmZvLmNhbmNlbEZhdlwiKSB8fFxyXG4gICAgICAgICAgICB0aGlzLmRlbEZhdm9yaXRlU3VjY2VzcztcclxuXHJcbiAgICAgICAgdGhpcy5kaWFsb2dNZ3Iub25EaWFsb2dDcmVhdGVkKCk7XHJcblxyXG4gICAgICAgIHRoaXMuX3RyZWVJbmZvXyA9IHRoaXMudHJlZUluZm8gPyBjbG9uZURlZXAodGhpcy50cmVlSW5mbykgOiBudWxsO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5xdWlja1NlbGVjdCkge1xyXG4gICAgICAgICAgICB0aGlzLnF1aWNrU2VsZWN0ID0gT2JqZWN0LmFzc2lnbihRdWlja1NlbGVjdERlZmF1bHRPcHRpb25zLCB0aGlzLnF1aWNrU2VsZWN0IHx8IHt9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG5nT25EZXN0cm95KCkge1xyXG4gICAgICAgIHN1cGVyLm5nT25EZXN0cm95KCk7XHJcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLmZvckVhY2goKG4pID0+IHtcclxuICAgICAgICAgICAgaWYgKG4pIHtcclxuICAgICAgICAgICAgICAgIG4udW5zdWJzY3JpYmUoKTtcclxuICAgICAgICAgICAgICAgIG4gPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGlvbk1ncikge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvbk1nci5kZXN0cm95KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMgPSBbXTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZmFycmlzSW5zdGFuY2VzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmFycmlzSW5zdGFuY2VzLmRlc3Ryb3kodGhpcy5lbC5uYXRpdmVFbGVtZW50KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmxvb2t1cFNlYXJjaElucHV0RXZlbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5sb29rdXBTZWFyY2hJbnB1dEV2ZW50KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubG9va3VwVXRpbHMuZGVzdHJveSgpO1xyXG5cclxuICAgICAgICB0aGlzLm92ZXJMYXlTZXJ2aWNlLmRlc3RvcnkodGhpcy5lbC5uYXRpdmVFbGVtZW50KTtcclxuICAgICAgICB0aGlzLm92ZXJMYXlTZXJ2aWNlID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XHJcbiAgICAgICAgaWYgKGNoYW5nZXMuY29sdW1ucyAmJiAhY2hhbmdlcy5jb2x1bW5zLmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmNhY2hlVXNlckNvbmZpZygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBuZ0FmdGVyVmlld0luaXQoKSB7XHJcbiAgICAgICAgdGhpcy5sb29rdXBTZWFyY2hJbnB1dEV2ZW50ID0gb25UZXh0Q2hhbmdlZC5iaW5kKHRoaXMpKCk7XHJcblxyXG4gICAgICAgIC8vIOWIneWni+WMluS4quaAp+WMlumFjee9rlxyXG4gICAgICAgIGlmICh0aGlzLnVzZVBlcnNpb25hbENvbmYpIHtcclxuICAgICAgICAgICAgdGhpcy5mYXZIZWxwZXIuaW5pdFBlcnNvbmFsSW5mbygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMudXNlRXh0ZW5kSW5mbykge1xyXG4gICAgICAgICAgICBjb25zdCBqc29uRGF0YSA9IHRoaXMuc2VsZWN0aW9uTWdyLmdldEJpbmRpbmdEYXRhKCk7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlRXh0ZW5kSW5mbyhqc29uRGF0YSwgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMudmlld1R5cGUgPT09IFwidGV4dFwiKSB7XHJcbiAgICAgICAgICAgIC8vIHRoaXMuc2hvcnRjdXRzLmFkZCh7XHJcbiAgICAgICAgICAgIC8vICAgICBrZXk6ICdGMicsXHJcbiAgICAgICAgICAgIC8vICAgICB0YXJnZXQ6IHRoaXMuaW5wdXRHcm91cC50ZXh0Ym94Lm5hdGl2ZUVsZW1lbnQsXHJcbiAgICAgICAgICAgIC8vICAgICBjb21tYW5kOiAoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgdGhpcy5zaG93RGlhbG9nKCk7XHJcbiAgICAgICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgICAgIC8vIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcjIubGlzdGVuKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5pbnB1dEdyb3VwLnRleHRib3gubmF0aXZlRWxlbWVudCxcclxuICAgICAgICAgICAgICAgIFwia2V5ZG93bi5GMlwiLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93RGlhbG9nLmJpbmQodGhpcylcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyTW91c2VFdmVudEZvclRhZ1ZpZXcoKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnRhZ2JveEhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZWwgPVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFnYm94Lm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tdWx0aS1tb3JlXCIpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHRiaCA9IHRoaXMudGFnYm94SGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgaWYgKHRiaCAhPT0gXCJhdXRvXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0YmggKz0gXCJweFwiO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tYXhUYWdib3hIZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIyLnNldFN0eWxlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm1heEhlaWdodFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYCR7dGhpcy5tYXhUYWdib3hIZWlnaHR9cHhgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyMi5zZXRTdHlsZShlbCwgXCJoZWlnaHRcIiwgdGJoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZWwgJiYgdGhpcy5mYXJyaXNJbnN0YW5jZXMpIHtcclxuICAgICAgICAgICAgdGhpcy5mYXJyaXNJbnN0YW5jZXMuYWRkKHRoaXMuZWwubmF0aXZlRWxlbWVudCwgdGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY3JlYXRlSW5zdGFuY2UoKSB7XHJcbiAgICAgICAgdGhpcy5odHRwID0gdGhpcy5pbmplY3Rvci5nZXQoU2VydmVyU2lkZVRva2VuLCBudWxsKTtcclxuICAgICAgICB0aGlzLm1lc3NhZ2VyU2VydmljZSA9IHRoaXMuaW5qZWN0b3IuZ2V0KE1lc3NhZ2VyU2VydmljZSk7XHJcbiAgICAgICAgdGhpcy5sb2FkaW5nU2VydmljZSA9IHRoaXMuaW5qZWN0b3IuZ2V0KExvYWRpbmdTZXJ2aWNlKTtcclxuICAgICAgICB0aGlzLm5vdGlmeVNlcnZpY2UgPSB0aGlzLmluamVjdG9yLmdldChOb3RpZnlTZXJ2aWNlLCBudWxsKTtcclxuXHJcbiAgICAgICAgdGhpcy5wZXJzb25hbENvbmZpZ1NlcnZpY2UgPSB0aGlzLmluamVjdG9yLmdldChcclxuICAgICAgICAgICAgUGVyc29uYWxDb25maWdTZXJ2aWNlLFxyXG4gICAgICAgICAgICBudWxsXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgdGhpcy5sb29rdXBTZWxlY3Rpb25TZXIgPSBuZXcgTG9va3VwU2VsZWN0aW9uU2VydmljZSh0aGlzKTtcclxuXHJcbiAgICAgICAgdGhpcy51dGlsU2VydmljZSA9IG5ldyBVdGlsU2VydmljZSh0aGlzKTtcclxuICAgICAgICB0aGlzLmxvY2FsU2VydmljZSA9IHRoaXMuaW5qZWN0b3IuZ2V0KExvY2FsZVNlcnZpY2UpO1xyXG4gICAgICAgIHRoaXMudHJlZU5vZGVIZWxwZXIgPSBuZXcgVHJlZU5vZGVIZWxwZXIodGhpcyk7XHJcblxyXG4gICAgICAgIHRoaXMuZmF2SGVscGVyID0gbmV3IEZhdm9yaXRlSGVscGVyKHRoaXMpO1xyXG4gICAgICAgIHRoaXMudHRFdmVudE1nciA9IG5ldyBUcmVlVGFibGVFdmVudE1hbmFnZXIodGhpcyk7XHJcbiAgICAgICAgdGhpcy5tdWx0aVNlbE1nciA9IG5ldyBNdWx0aVNlbGVjdGlvbk1hbmFnZXIodGhpcyk7XHJcbiAgICAgICAgdGhpcy5odHRwTWdyID0gbmV3IExvb2t1cEh0dHBNYW5hZ2VyKHRoaXMpO1xyXG4gICAgICAgIHRoaXMubG9va3VwQ21wTWdyID0gbmV3IExvb2t1cENvbXBvbmVudE1hbmFnZXIodGhpcyk7XHJcbiAgICAgICAgdGhpcy5kaWFsb2dNZ3IgPSBuZXcgTG9va3VwRGlhbG9nTWFuYWdlcih0aGlzKTtcclxuICAgICAgICB0aGlzLnNlbGVjdGlvbk1nciA9IG5ldyBTZWxlY3Rpb25NYW5hZ2VyKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuZHRFdmVudE1nciA9IG5ldyBEYXRhVGFibGVFdmVudE1hbmFnZXIodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgc2hvd0RpYWxvZygpOiBhbnkge1xyXG4gICAgICAgIGlmICh0aGlzLmRpc2FibGVkIHx8IHRoaXMucmVhZG9ubHkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25NZ3IuaW5pdERpc3BsYXlWYWx1ZSgpO1xyXG4gICAgICAgIHRoaXMuZGljdFBpY2tpbmdTdWJzY3JpcHRpb24gPSB0aGlzLmRpY3RQaWNraW5nKHtcclxuICAgICAgICAgICAgaW5zdGFuY2U6IHRoaXMsXHJcbiAgICAgICAgfSkuc3Vic2NyaWJlKChwcjogUGlja2luZ1Jlc3VsdCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmRpYWxvZ01nci5jYW5PcGVuRGlhbG9nKHByKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiDliKTmlq3mmK/lkKbkuLrlj4zliJfooajluK7liqkgKi9cclxuICAgIGlzRG91YmxsZUxpc3QoKSB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgdGhpcy5kaXNwbGF5VHlwZSA9PT0gTG9va3VwR3JpZERpc3BsYXlUeXBlLk5hdkxpc3QgfHxcclxuICAgICAgICAgICAgdGhpcy5kaXNwbGF5VHlwZSA9PT0gTG9va3VwR3JpZERpc3BsYXlUeXBlLk5hdlRyZWVMaXN0XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuICAgIC8qKiDliKTmlq3mmK/lkKbmmL7npLrkuLrmoJHluK7liqkgKi9cclxuICAgIGlzVHJlZSgpIHtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICB0aGlzLmRpc3BsYXlUeXBlLnRvVXBwZXJDYXNlKCkgPT09IExvb2t1cEdyaWREaXNwbGF5VHlwZS5UcmVlTGlzdFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgb25SZXNpemVkKGU6IGFueSkge1xyXG4gICAgICAgIHRoaXMucmVzaXplQ21wKGUuc2l6ZSk7XHJcbiAgICAgICAgdGhpcy5yZXNpemVkLmVtaXQoZS5zaXplKTtcclxuICAgIH1cclxuXHJcbiAgICBvblJlc2l6aW5nKHBvczogSVJlc2l6ZUV2ZW50KSB7XHJcbiAgICAgICAgdGhpcy5yZXNpemluZy5lbWl0KHBvcy5zaXplKTtcclxuICAgICAgICB0aGlzLnJlc2l6ZUNtcChwb3Muc2l6ZSk7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNEb3VibGxlTGlzdCgpICYmIHRoaXMubGVmdENvbXBvbmVudFJlZikge1xyXG4gICAgICAgICAgICB0aGlzLmxlZnRDb21wb25lbnRSZWYuaW5zdGFuY2UucmVzaXplKHtcclxuICAgICAgICAgICAgICAgIHdpZHRoOiB0aGlzLmxlZnRQYW5lbC53aWR0aCxcclxuICAgICAgICAgICAgICAgIGhlaWdodDogdGhpcy5kaWFsb2dNZ3IuZ2V0SGVpZ2h0KCksXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbk1heERpYWxvZyhwb3M6IElSZXNpemVFdmVudCkge1xyXG4gICAgICAgIHRoaXMucmVzaXplQ21wKHBvcy5zaXplKTtcclxuICAgICAgICBpZiAodGhpcy5sZWZ0UGFuZWwpIHtcclxuICAgICAgICAgICAgdGhpcy5sZWZ0Q29tcG9uZW50UmVmLmluc3RhbmNlLnJlc2l6ZSh7XHJcbiAgICAgICAgICAgICAgICB3aWR0aDogdGhpcy5sZWZ0UGFuZWwud2lkdGgsXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IHRoaXMuZGlhbG9nTWdyLmdldEhlaWdodCgpLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5kaWFsb2dIZWlnaHQgPSBwb3Muc2l6ZS5oZWlnaHQ7XHJcbiAgICAgICAgdGhpcy5kaWFsb2dDb250ZW50SGVpZ2h0ID0gdGhpcy5kaWFsb2dNZ3IucmVzZXREaWFsb2dDb250ZW50SGVpZ2h0KCk7XHJcbiAgICAgICAgdGhpcy5kaWFsb2dNYXhlZC5lbWl0KHBvcy5zaXplKTtcclxuICAgIH1cclxuXHJcbiAgICByZXNpemVDbXAoc2l6ZT86IGFueSkge1xyXG4gICAgICAgIGlmICghdGhpcy5jb21wb25lbnRSZWYgfHwgIXRoaXMuY29tcG9uZW50UmVmLmluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghc2l6ZSkge1xyXG4gICAgICAgICAgICBzaXplID0gdGhpcy5kaWFsb2cuc2l6ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgX3NpemUgPSB7XHJcbiAgICAgICAgICAgIHdpZHRoOlxyXG4gICAgICAgICAgICAgICAgc2l6ZS53aWR0aCAtXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lck1hcmdpbi5sZWZ0IC1cclxuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyTWFyZ2luLnJpZ2h0LFxyXG4gICAgICAgICAgICBoZWlnaHQ6IHRoaXMuZGlhbG9nTWdyLmdldEhlaWdodCgpLFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnVzZUZhdm9yaXRlICYmIHRoaXMuZmF2b3JpdGVzQ29tcG9uZW50UmVmKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmF2b3JpdGVzQ29tcG9uZW50UmVmLmluc3RhbmNlLnJlc2l6ZShfc2l6ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmlzUmVjb3JkU2l6ZSkge1xyXG4gICAgICAgICAgICB0aGlzLnBlcnNvbmFsQ29uZi5zaXplID0gdGhpcy5kaWFsb2cuc2l6ZTtcclxuICAgICAgICAgICAgdGhpcy5wZXJzb25hbENvbmZpZ1NlcnZpY2UudXBkYXRlUGVyc29uYWxDb25maWcoe1xyXG4gICAgICAgICAgICAgICAgc2l6ZTogdGhpcy5kaWFsb2cuc2l6ZSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmlzRG91YmxsZUxpc3QoKSkge1xyXG4gICAgICAgICAgICBfc2l6ZS53aWR0aCA9IHNpemUud2lkdGggLSB0aGlzLmxlZnRQYW5lbC53aWR0aCAtIDI3O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jb21wb25lbnRSZWYuaW5zdGFuY2UucmVzaXplKF9zaXplKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNoZWNrR3JpZE9wdGlvbnMoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmdyaWRPcHRpb25zLmlkRmllbGQpIHtcclxuICAgICAgICAgICAgdGhpcy53cml0ZUNvbnNvbGUoXCLmnKrorr7nva7kuLvplK7lrZfmrrUgaWRGaWVsZFwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5iZWZvcmVTZWxlY3REYXRhKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYmVmb3JlU2VsZWN0RGF0YSA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBvZih0cnVlKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGN0eE1lbnVMYW5ndWFnZXMgPVxyXG4gICAgICAgICAgICB0aGlzLmxvY2FsU2VydmljZS5nZXRWYWx1ZShcImxvb2t1cC5jb250ZXh0TWVudVwiKTtcclxuXHJcbiAgICAgICAgdGhpcy50cmVlVGFibGVPcHRpb25zID0gT2JqZWN0LmFzc2lnbihcclxuICAgICAgICAgICAgeyBsYW5ndWFnZTogY3R4TWVudUxhbmd1YWdlcyB9LFxyXG4gICAgICAgICAgICB0aGlzLmRlZmF1bHRUcmVlVGFibGVPcHRpb25zLFxyXG4gICAgICAgICAgICB0aGlzLnRyZWVUYWJsZU9wdGlvbnMgfHwge31cclxuICAgICAgICApO1xyXG4gICAgICAgIC8vIHRoaXMuZGF0YVRhYmxlT3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZGVmYXVsdFRyZWVUYWJsZU9wdGlvbnMsIHRoaXMuZGF0YVRhYmxlT3B0aW9ucyk7XHJcbiAgICAgICAgLy8gdGhpcy5uYXZUcmVlVGFibGVPcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5kZWZhdWx0VHJlZVRhYmxlT3B0aW9ucywgdGhpcy5uYXZUcmVlVGFibGVPcHRpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDb21wb25lbnRUeXBlKCk6IFR5cGU8YW55PiB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmRpc3BsYXlUeXBlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzcGxheVR5cGUgPSBcIkxJU1RcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgc3dpdGNoICh0aGlzLmRpc3BsYXlUeXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgTG9va3VwR3JpZERpc3BsYXlUeXBlLkxpc3Q6XHJcbiAgICAgICAgICAgIGNhc2UgTG9va3VwR3JpZERpc3BsYXlUeXBlLk5hdkxpc3Q6XHJcbiAgICAgICAgICAgIGNhc2UgTG9va3VwR3JpZERpc3BsYXlUeXBlLk5hdlRyZWVMaXN0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIERhdGFUYWJsZUNvbXBvbmVudDtcclxuICAgICAgICAgICAgY2FzZSBMb29rdXBHcmlkRGlzcGxheVR5cGUuVHJlZUxpc3Q6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gVHJlZVRhYmxlQ29tcG9uZW50O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzaG93TG9hZGluZyhtc2cgPSBcIlwiKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGlhbG9nICYmIHRoaXMuZGlhbG9nLm1vZGFsQ29udGVudCAmJiAhdGhpcy5sb2FkaW5nKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9wdHMgPSB7XHJcbiAgICAgICAgICAgICAgICBjb250YWluZXI6IHRoaXMuZGlhbG9nLm1vZGFsQ29udGVudCxcclxuICAgICAgICAgICAgICAgIGRlbGF5OiAyMDAsXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBpZiAobXNnKSB7XHJcbiAgICAgICAgICAgICAgICBvcHRzW1wibWVzc2FnZVwiXSA9IG1zZztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gdGhpcy5sb2FkaW5nU2VydmljZS5zaG93KG9wdHMpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IHRoaXMubG9hZGluZ1NlcnZpY2Uuc2hvdygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjbG9zZUxvYWRpbmcoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubG9hZGluZykge1xyXG4gICAgICAgICAgICB0aGlzLmxvYWRpbmcuY2xvc2UoKTtcclxuICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMubG9hZGluZ1NlcnZpY2UuY2xlYXJBbGwoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRTZWFyY2hDb2x1bW5zKHJlc2RhdGE6IGFueSkge1xyXG4gICAgICAgIGNvbnN0IGNvbHMgPSByZXNkYXRhLmNvbHVtbnMgfHwgdGhpcy5jb2x1bW5zO1xyXG4gICAgICAgIGlmIChyZXNkYXRhLnNlYXJjaEZpZWxkcykge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzZGF0YS5zZWFyY2hGaWVsZHMubWFwKChzZikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYyA9IGNvbHMuZmluZChcclxuICAgICAgICAgICAgICAgICAgICAoY29sKSA9PiBjb2wuZmllbGQudG9Mb3dlckNhc2UoKSA9PT0gc2YudmFsdWUudG9Mb3dlckNhc2UoKVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIGlmIChjKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2YubGFiZWwgPSBjLnRpdGxlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNmO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2UgaWYgKGNvbHMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbHNcclxuICAgICAgICAgICAgICAgIC5maWx0ZXIoKGMpID0+IGMuc2VhcmNoRmllbGQpXHJcbiAgICAgICAgICAgICAgICAubWFwKChjb2wpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogY29sLnRpdGxlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogY29sLmZpZWxkLFxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaW5pdE9wdGlvbnMocmVzRGF0YTogTG9va3VwR3JpZFJlc3VsdCkge1xyXG4gICAgICAgIGxldCBvYnNlciA9IG9mKHRydWUpO1xyXG4gICAgICAgIHRoaXMuZ3JpZE9wdGlvbnMuc2VhcmNoRmllbGRzID0gdGhpcy5nZXRTZWFyY2hDb2x1bW5zKHJlc0RhdGEpO1xyXG4gICAgICAgIGlmIChyZXNEYXRhKSB7XHJcbiAgICAgICAgICAgIC8vIOWmguaenOe7hOS7tuS4reacquiuvue9ruaYvuekuuWIl++8jOWImeS9v+eUqOacjeWKoeWZqOerr+i/lOWbnueahOiuvue9ru+8myDlkKbliJnlsIbkvb/nlKjnu4Tku7bkuK3phY3nva7nmoTlsZXnpLrliJdcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgKCF0aGlzLmNvbHVtbnMgfHwgIXRoaXMuY29sdW1ucy5sZW5ndGgpICYmXHJcbiAgICAgICAgICAgICAgICByZXNEYXRhLmNvbHVtbnMgJiZcclxuICAgICAgICAgICAgICAgIHJlc0RhdGEuY29sdW1ucy5sZW5ndGhcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbnMgPSByZXNEYXRhLmNvbHVtbnM7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2V0TG9va3VwVGl0bGVUZXh0KHJlc0RhdGEpO1xyXG5cclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5pc0RvdWJsbGVMaXN0KCkgJiZcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nV2lkdGggPCB0aGlzLm5hdkxvb2t1cERpYWxvZ01pbldpZHRoICYmXHJcbiAgICAgICAgICAgICAgICAhdGhpcy5pc1JlY29yZFNpemVcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZ1dpZHRoID0gdGhpcy5uYXZMb29rdXBEaWFsb2dNaW5XaWR0aDtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nLnJlU2l6ZSh7IHdpZHRoOiB0aGlzLmRpYWxvZ1dpZHRoIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuY3VzdG9tRGlzcGxheVR5cGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheVR5cGUgPVxyXG4gICAgICAgICAgICAgICAgICAgIHJlc0RhdGEuZGlzcGxheVR5cGUgfHwgdGhpcy5kaXNwbGF5VHlwZSB8fCBcIkxJU1RcIjtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3IuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb29rdXBDbXBNZ3IuY3JlYXRlQ29tcG9uZW50V2l0aFNlcnZlckRhdGEocmVzRGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgIHRoaXMuaXNEb3VibGxlTGlzdCgpICYmXHJcbiAgICAgICAgICAgICAgICByZXNEYXRhLm5hdmlnYXRpb24gJiZcclxuICAgICAgICAgICAgICAgICF0aGlzLmxlZnRDb21wb25lbnRSZWZcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5hdmlnYXRpb25PcHRpb25zID0gcmVzRGF0YS5uYXZpZ2F0aW9uO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5uYXZpZ2F0aW9uT3B0aW9ucy5ob3ZlciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5hdmlnYXRpb25PcHRpb25zLnNlYXJjaEZpZWxkcyA9IHRoaXMuZ2V0U2VhcmNoQ29sdW1ucyhcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5hdmlnYXRpb25PcHRpb25zXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlIGNvbHVtbnMgZm9ybWF0dGVyXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jdXN0b21OYXZGb3JtYXR0ZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5hdmlnYXRpb25PcHRpb25zLmNvbHVtbnMuZm9yRWFjaCgoY29sKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmN1c3RvbU5hdkZvcm1hdHRlcltjb2wuZmllbGRdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2wuZm9ybWF0dGVyID0gdGhpcy5jdXN0b21OYXZGb3JtYXR0ZXJbY29sLmZpZWxkXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5hdmlnYXRpb25PcHRpb25zW1wicm93U3R5bGVyXCJdID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXN0b21OYXZGb3JtYXR0ZXIucm93U3R5bGVyO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmF2aWdhdGlvbk9wdGlvbnNbXCJjZWxsU3R5bGVyXCJdID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXN0b21OYXZGb3JtYXR0ZXIuY2VsbFN0eWxlcjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIDIwMjEwOTI2IOagkeWvvOiIquW4ruWKqeS4rSDlt6bkvqfmoJHmlK/mjIHliIblsYLliqDovb1cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRpc3BsYXlUeXBlID09PSBMb29rdXBHcmlkRGlzcGxheVR5cGUuTmF2VHJlZUxpc3QpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgX25hdl90cmVlaW5mb19sb2FkdHlwZSA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmF2aWdhdGlvbk9wdGlvbnMudHJlZUluZm8ubG9hZERhdGFUeXBlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmxvYWRUcmVlRGF0YVR5cGUgIT09IFwiZGVmYXVsdFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9uYXZfdHJlZWluZm9fbG9hZHR5cGUgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkVHJlZURhdGFUeXBlID09PSBcImxvYWRhbGxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJhbGxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJhc3luY1wiO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5hdmlnYXRpb25PcHRpb25zLnRyZWVJbmZvLmxvYWREYXRhVHlwZSA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9uYXZfdHJlZWluZm9fbG9hZHR5cGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgb2JzZXIgPSB0aGlzLmxvb2t1cENtcE1nci5jcmVhdGVMZWZ0Q29tcG9uZW50KHRoaXMubmF2aWdhdGlvbk9wdGlvbnMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5sb29rdXBDbXBNZ3IuY3JlYXRlQ29udGVudCh0aGlzLmdyaWRPcHRpb25zKTtcclxuICAgICAgICAgICAgdGhpcy5sb29rdXBDbXBNZ3IuY3JlYXRlRmF2b3JpdGVDb21wb25lbnQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmlzVGV4dENoYW5nZSkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudFJlZi5pbnN0YW5jZS5zZWFyY2hEYXRhLnZhbHVlID0gdGhpcy5kaXNwbGF5VGV4dDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHVwZGF0ZSBjb2x1bW5zIGZvcm1hdHRlclxyXG4gICAgICAgIGlmICh0aGlzLmN1c3RvbUZvcm1hdHRlcikge1xyXG4gICAgICAgICAgICB0aGlzLmNvbHVtbnMuZm9yRWFjaCgoY29sKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jdXN0b21Gb3JtYXR0ZXJbY29sLmZpZWxkXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbC5mb3JtYXR0ZXIgPSB0aGlzLmN1c3RvbUZvcm1hdHRlcltjb2wuZmllbGRdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmN1c3RvbUZvcm1hdHRlci5yb3dTdHlsZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50UmVmLmluc3RhbmNlLnJvd1N0eWxlciA9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXN0b21Gb3JtYXR0ZXIucm93U3R5bGVyO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5jdXN0b21Gb3JtYXR0ZXIuY2VsbFN0eWxlcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnRSZWYuaW5zdGFuY2UuY2VsbFN0eWxlciA9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXN0b21Gb3JtYXR0ZXIuY2VsbFN0eWxlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jaGFuZ2VEZXRlY3Rvci5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgcmV0dXJuIG9ic2VyO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6K6+572u5biu5Yqp56qX5Y+j5qCH6aKYXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc2V0TG9va3VwVGl0bGVUZXh0KHJlc0RhdGE6IExvb2t1cEdyaWRSZXN1bHQpIHtcclxuICAgICAgICBpZiAocmVzRGF0YS5kaXNwbGF5SW5mbykge1xyXG4gICAgICAgICAgICB0aGlzLmRpc3BsYXlJbmZvID0gcmVzRGF0YS5kaXNwbGF5SW5mbztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIOWmguaenOiHquWumuS5ieagh+mimO+8jOWwhuS7peatpOagh+mimOS4uuWHhuOAguWQpuWImeWKoOi9veacjeWKoeWZqOerr+i/lOWbnueahOaVsOaNrlxyXG4gICAgICAgIGlmICh0aGlzLnRpdGxlICYmIHRoaXMudGl0bGUgIT09IFwi5q2k5aSE5pi+56S65biu5Yqp5qCH6aKYXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5kaXNwbGF5SW5mby50aXRsZSA9IHRoaXMudGl0bGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5kaXNwbGF5SW5mbyAmJiByZXNEYXRhLnRpdGxlKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5kaXNwbGF5SW5mby50aXRsZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5SW5mby50aXRsZSA9IHJlc0RhdGEudGl0bGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaG93R2V0QWxsQ2hpbGRyZW5DaGVja2JveCgpIHtcclxuICAgICAgICBpZiAodGhpcy5pc1RyZWUoKSAmJiB0aGlzLnRyZWVJbmZvKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZW5hYmxlR2V0QWxsQ2hpbGROb2RlcyA9XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRyZWVJbmZvLmxvYWREYXRhVHlwZSAhPT0gXCJhbGxcIiAmJiB0aGlzLnRyZWVJbmZvLmxheWVyVHlwZSA9PT0gXCJwYXRoY29kZVwiO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuZW5hYmxlR2V0QWxsQ2hpbGROb2RlcyA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpbml0RGF0YSgpIHtcclxuICAgICAgICBjb25zdCBvYnNlcnZlciA9IHtcclxuICAgICAgICAgICAgbmV4dDogKGRhdGE6IExvb2t1cEdyaWRSZXN1bHQpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIOacjeWKoeWZqOerr+WPkeeUn+mUmeivr++8jOi/lOWbnk5VTEwg5pe277yM55u05o6l5YWz6Zet56qX5Y+jXHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNTaG93ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZGlhbG9nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuaW5pdE9wdGlvbnMoZGF0YSkuc3Vic2NyaWJlKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkQ29sdW1ucyA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubXVsdGlTZWxNZ3IuaW5pdFNlbGVjdGVkQ29sdW1ucygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmF2b3JpdGVDb2x1bW5zID0gdGhpcy5mYXZIZWxwZXIuZ2V0RmF2b3JpdGVDb2x1bW5zKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnVzZVBlcnNpb25hbENvbmYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnBlcnNvbmFsQ29uZmlnU2VydmljZS5nZXRQZXJzb25hbERhdGEoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wZXJzb25hbENvbmZpZ1NlcnZpY2Uuc2F2ZVBlcnNvbmFsQ29uZmlnKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGVyc29uYWxDb25mXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc1RhYkNoYW5nZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb29rdXBTZWxlY3Rpb25TZXIubG9hZFNlbGVjdGlvbnMoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnNlbGVjdGVkSXRlbXMgfHwgW11cclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzRG91YmxsZUxpc3QoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDlr7zoiKrluK7liqnml7bvvIzorr7nva7lt6bkvqfpgInkuK3mlbDmja7ml7bvvIzkuI3liqDovb3kuLvmlbDmja7liJfooajjgIJcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubmF2U2VsZWN0ZWRJZHMgfHwgdGhpcy5zZWxlY3RGaXJzdEluTmF2KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWREYXRhV2hlbk9wZW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGFbJ2FjdGl2ZVRhYiddICYmICF0aGlzLmlzVGFiQ2hhbmdlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZVRhYiA9ICdkYXRhbGlzdCc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWREYXRhKGRhdGEpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc1RyZWUoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hY3RpdmVUYWIgPT09IFwiZGF0YWxpc3RcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdHQgPSB0aGlzLmNvbXBvbmVudFJlZi5pbnN0YW5jZSBhcyBUcmVlVGFibGVDb21wb25lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHQuc2VhcmNoRGF0YS52YWx1ZSAmJiB0aGlzLml0ZW1zICYmIHRoaXMuaXRlbXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXRlbXNbMF0uY2hpbGRyZW4gJiYgdGhpcy5pdGVtc1swXS5jaGlsZHJlbi5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHQudG9nZ2xlRXhwYW5kKHRoaXMuaXRlbXNbMF0sIHRydWUsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0dldEFsbENoaWxkcmVuQ2hlY2tib3goKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1RleHRDaGFuZ2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zZWFyY2hSZXN1bHQgPSBudWxsOyAvLyDmuIXnqbrkuLTml7bmn6Xor6Ig57uT5p6cXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZUxvYWRpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLmlzUmVhZHkkLm5leHQodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1JlYWR5ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZURldGVjdG9yLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvb2t1cGluaXRpYWxpemF0aW9uU3ViamVjdC5uZXh0KCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZXJyb3I6IChlcnI6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5pc1JlYWR5JC5uZXh0KHRydWUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZUxvYWRpbmcoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NlYXJjaFJlc3VsdCA9IG51bGw7IC8vIOa4heepuuS4tOaXtuafpeivoiDnu5PmnpxcclxuICAgICAgICAgICAgICAgIHRoaXMuaXNUZXh0Q2hhbmdlID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5oYXNFcnJvciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZURldGVjdG9yLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZXJyID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlclNlcnZpY2UuZXJyb3IoZXJyKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyLk1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXJTZXJ2aWNlLmVycm9yKGVyci5NZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIuZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VyU2VydmljZS5lcnJvcihlcnIuZXJyb3IuTWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXJTZXJ2aWNlLmVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIuW6lOeUqOacjeWKoeWZqOmUmeivryzor7fogZTns7vns7vnu5/nrqHnkIblkZjvvIFcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgbGV0IHA6IGFueSA9IHtcclxuICAgICAgICAgICAgcGFnZUluZm86IHtcclxuICAgICAgICAgICAgICAgIHBhZ2VTaXplOiB0aGlzLnBhZ2VTaXplIHx8IDIwLFxyXG4gICAgICAgICAgICAgICAgcGFnZUluZGV4OiAxLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgbGV0IHQ6IExPQURfREFUQV9UWVBFID0gXCJhbGxcIjtcclxuICAgICAgICBpZiAodGhpcy5pc1RleHRDaGFuZ2UpIHtcclxuICAgICAgICAgICAgdGhpcy5fc2VhcmNoU3RhdGUgPSB7IFxyXG4gICAgICAgICAgICAgICAgZmllbGQ6IFwiKlwiLFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMuZGlzcGxheVRleHRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBwID0ge1xyXG4gICAgICAgICAgICAgICAgc2VhcmNoOiB0aGlzLl9zZWFyY2hTdGF0ZVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdCA9ICdzZWFyY2gnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmlzVGFiQ2hhbmdlZCAmJiB0aGlzLmVuYWJsZVRvU2VsZWN0KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHMgPSB0aGlzLnNlbGVjdGlvbk1nci5nZXRTZWxlY3RlZElkcygpO1xyXG4gICAgICAgICAgICBpZiAodmFscyAmJiB2YWxzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgcFtcInNlbGVjdGVkSW5mb1wiXSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZElkczogdmFscyxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpc1tcInNlbGVjdGVkSWRzXCJdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcFtcInNlbGVjdGVkSW5mb1wiXSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkSWRzOiB0aGlzW1wic2VsZWN0ZWRJZHNcIl0sXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zaG93TG9hZGluZygpO1xyXG4gICAgICAgIHRoaXMuaGFzRXJyb3IgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmh0dHBNZ3IubG9va3VwUmVxdWVzdChwLCB0KS5waXBlKFxyXG4gICAgICAgICAgICBtYXAoKHJlc3REYXRhOiBMb29rdXBHcmlkUmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdERhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN0RGF0YS5zZWxlY3RlZEl0ZW1zID0gcmVzdERhdGFbXCJzZWxlY3RlZERhdGFcIl0gfHwgW107XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN0RGF0YSAmJiB0eXBlb2YgcmVzdERhdGEgPT09IFwib2JqZWN0XCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdERhdGEuc2VsZWN0ZWRJdGVtcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN0RGF0YSA9PT0gbnVsbCA/IGZhbHNlIDogcmVzdERhdGE7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKS5zdWJzY3JpYmUob2JzZXJ2ZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIGxvYWREYXRhKHJlc0RhdGE/OiBMb29rdXBHcmlkUmVzdWx0LCByZWJpbmRFdmVudCA9IHRydWUpIHtcclxuICAgICAgICBpZiAodGhpcy5hY3RpdmVUYWIgPT09IFwiZGF0YWxpc3RcIikge1xyXG4gICAgICAgICAgICBpZiAodGhpcy51c2VGYXZvcml0ZSAmJiAhdGhpcy5pc1RyZWUoKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5mYXZIZWxwZXIudXBkYXRlRmF2b3JpdGVzU3RhdHVzKHJlc0RhdGEuaXRlbXMpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBzd2l0Y2ggKHRoaXMuZGlzcGxheVR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgTG9va3VwR3JpZERpc3BsYXlUeXBlLk5hdkxpc3Q6XHJcbiAgICAgICAgICAgICAgICBjYXNlIExvb2t1cEdyaWREaXNwbGF5VHlwZS5OYXZUcmVlTGlzdDpcclxuICAgICAgICAgICAgICAgIGNhc2UgTG9va3VwR3JpZERpc3BsYXlUeXBlLkxpc3Q6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkRGF0YVRhYmxlRGF0YShyZXNEYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmViaW5kRXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kdEV2ZW50TWdyLmJpbmREYXRhVGFibGVFdmVudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgTG9va3VwR3JpZERpc3BsYXlUeXBlLlRyZWVMaXN0OlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZFRyZWVUYWJsZURhdGEocmVzRGF0YSwgcmViaW5kRXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmFjdGl2ZVRhYiA9PT0gXCJmYXZvcml0ZVwiKSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9hZEZhdkRhdGEocmVzRGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDpgInkuK3mlbDmja5cclxuICAgICAgICB0aGlzLnNlbGVjdGlvbk1nci5zZWxlY3RDdXJyZW50VmFsdWUoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGxvYWRGYXZEYXRhKHJlc3VsdDogTG9va3VwR3JpZFJlc3VsdCkge1xyXG4gICAgICAgIC8vIOWKoOi9veaUtuiXj+aVsOaNrlxyXG4gICAgICAgIGlmICh0aGlzLnVzZUZhdm9yaXRlKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzVHJlZSgpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFRyZWVJbmZvKHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0cmVlTm9kZXMgPSB0aGlzLmZhdkhlbHBlci5pbml0RmF2b3JpdGVUcmVlRGF0YShcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQuaXRlbXNcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0cmVlRGF0YSA9IHRoaXMudHJlZU5vZGVIZWxwZXJcclxuICAgICAgICAgICAgICAgICAgICAuZmxhdFRyZWVOb2Rlcyh0cmVlTm9kZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgLm1hcCgobikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuLmRhdGFbXCJfYWRkdGlvbmFsX1wiXSA9IG5bXCJhZGR0aW9uYWxcIl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLmRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvb2t1cFNlbGVjdGlvblNlci5pbml0RmF2b3JpdGVJdGVtcyh0cmVlRGF0YSk7XHJcblxyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mYXZvcml0ZXNDb21wb25lbnRSZWYuaW5zdGFuY2Uuc2Nyb2xsVG9ZKDEpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvb2t1cFNlbGVjdGlvblNlci5pbml0RmF2b3JpdGVJdGVtcyhyZXN1bHQuaXRlbXMpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmZhdkhlbHBlci5sb2FkRmF2b3JpdGVzRGF0YShyZXN1bHQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBsb2FkRGF0YVRhYmxlRGF0YShyZXNEYXRhPzogTG9va3VwR3JpZFJlc3VsdCkge1xyXG4gICAgICAgIGlmIChyZXNEYXRhKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmdyaWRPcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzRGF0YSAmJiByZXNEYXRhLmNvbHVtbnMgJiYgcmVzRGF0YS5jb2x1bW5zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgIXRoaXMuZ3JpZE9wdGlvbnMuY29sdW1ucyB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAhdGhpcy5ncmlkT3B0aW9ucy5jb2x1bW5zLmxlbmd0aFxyXG4gICAgICAgICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbnMgPSByZXNEYXRhLmNvbHVtbnM7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuaXRlbXMgPSByZXNEYXRhLml0ZW1zO1xyXG4gICAgICAgICAgICAgICAgdGhpcy50b3RhbCA9IHJlc0RhdGEudG90YWwgfHwgcmVzRGF0YS5pdGVtcy5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICBpZiAoIHJlc0RhdGEuc2VhcmNoRmllbGRzICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ3JpZE9wdGlvbnMuc2VhcmNoRmllbGRzID0gdGhpcy5nZXRTZWFyY2hDb2x1bW5zKHJlc0RhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHJlc0RhdGEucGFnZUluZm8pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc0RhdGEucGFnZUluZm8ucGFnZUxpc3QgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgKCF0aGlzLnBhZ2VMaXN0IHx8ICF0aGlzLnBhZ2VMaXN0Lmxlbmd0aClcclxuICAgICAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlTGlzdCA9IHJlc0RhdGEucGFnZUluZm8ucGFnZUxpc3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFnaW5hdGlvbiA9IHJlc0RhdGEucGFnZUluZm8uZW5hYmxlUGFnZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlSW5kZXggPSByZXNEYXRhLnBhZ2VJbmZvLnBhZ2VJbmRleDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhZ2VTaXplID0gcmVzRGF0YS5wYWdlSW5mby5wYWdlU2l6ZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdpbmF0aW9uID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdyaWRPcHRpb25zID0gcmVzRGF0YSBhcyBMb29rdXBHcmlkT3B0aW9ucztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy51cGRhdGVEYXRhVGFibGUodGhpcy5ncmlkT3B0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB1cGRhdGVEYXRhVGFibGUob3B0czogYW55KSB7XHJcbiAgICAgICAgaWYgKG9wdHMpIHtcclxuICAgICAgICAgICAgY29uc3QgZHQgPSB0aGlzLmNvbXBvbmVudFJlZi5pbnN0YW5jZSBhcyBEYXRhVGFibGVDb21wb25lbnQ7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWR0LmNvbHVtbnMgfHwgZHQuY29sdW1ucy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIGR0LmNvbHVtbnMgPSB0aGlzLmdyaWRPcHRpb25zLmNvbHVtbnM7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGR0LmFsbENvbHVtbnNUaXRsZSA9IHRoaXMuYWxsQ29sdW1uc1RpdGxlO1xyXG4gICAgICAgICAgICBkdC5zZWFyY2hGaWVsZHMgPSBvcHRzLnNlYXJjaEZpZWxkcztcclxuICAgICAgICAgICAgZHQucGFnaW5hdGlvbiA9IG9wdHMucGFnaW5hdGlvbjtcclxuICAgICAgICAgICAgZHQucGFnZUxpc3QgPSB0aGlzLnBhZ2VMaXN0O1xyXG4gICAgICAgICAgICBkdC5yZW1vdGVTb3J0ID0gdGhpcy5yZW1vdGVTb3J0O1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMubG9hZERhdGFXaGVuT3Blbikge1xyXG4gICAgICAgICAgICAgICAgZHQubG9hZERhdGEoe1xyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VTaXplOiBvcHRzLnBhZ2VTaXplLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VJbmRleDogdGhpcy5ncmlkT3B0aW9ucy5wYWdlSW5kZXgsXHJcbiAgICAgICAgICAgICAgICAgICAgdG90YWw6IHRoaXMuZ3JpZE9wdGlvbnMudG90YWwsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogdGhpcy5ncmlkT3B0aW9ucy5pdGVtcyxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgZHQuY2QubWFya0ZvckNoZWNrKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5sb2FkU3VjY2Vzcy5lbWl0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0VHJlZUluZm8ocmVzRGF0YSkge1xyXG4gICAgICAgIGlmICghcmVzRGF0YSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgX3RyZWVJbmZvID0gbnVsbDtcclxuICAgICAgICBpZiAocmVzRGF0YS50cmVlSW5mbykge1xyXG4gICAgICAgICAgICBjb25zdCBvbmx5U2VsZWN0TGVhZiA9IHJlc0RhdGEudHJlZUluZm8ub25seVNlbGVjdExlYWY7XHJcbiAgICAgICAgICAgIGxldCBfb3NsOiBPTkxZX1NFTEVDVF9MRUFGID0gXCJub1wiO1xyXG4gICAgICAgICAgICBpZiAob25seVNlbGVjdExlYWYgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgX29zbCA9IG9ubHlTZWxlY3RMZWFmID8gXCJ5ZXNcIiA6IFwibm9cIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfdHJlZUluZm8gPSB7IC4uLnJlc0RhdGEudHJlZUluZm8sIG9ubHlTZWxlY3RMZWFmOiBfb3NsIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5ncmlkT3B0aW9ucy50cmVlSW5mbykge1xyXG4gICAgICAgICAgICBjb25zdCB0cmVlSW5mbyA9IHRoaXMuZ3JpZE9wdGlvbnMudHJlZUluZm87XHJcbiAgICAgICAgICAgIGlmICh0cmVlSW5mbykge1xyXG4gICAgICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgICAgIHRyZWVJbmZvLm9ubHlTZWxlY3RMZWFmID09PSB1bmRlZmluZWQgfHxcclxuICAgICAgICAgICAgICAgICAgICB0cmVlSW5mby5vbmx5U2VsZWN0TGVhZiA9PT0gbnVsbFxyXG4gICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJlZUluZm8ub25seVNlbGVjdExlYWYgPSBcIm5vXCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0cmVlSW5mby5vbmx5U2VsZWN0TGVhZiA9PT0gXCJib29sZWFuXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0cmVlSW5mby5vbmx5U2VsZWN0TGVhZiA9IHRyZWVJbmZvLm9ubHlTZWxlY3RMZWFmID8gXCJ5ZXNcIiA6IFwibm9cIjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyAyMDIxMDkwMlxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubG9hZFRyZWVEYXRhVHlwZSA9PT0gXCJkZWZhdWx0XCIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0cmVlSW5mby5sb2FkRGF0YVR5cGUgPSBfdHJlZUluZm8ubG9hZERhdGFUeXBlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0cmVlSW5mby5sb2FkRGF0YVR5cGUgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRUcmVlRGF0YVR5cGUgPT09IFwibG9hZGFsbFwiID8gXCJhbGxcIiA6IFwiYXN5bmNcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodHJlZUluZm8ub25seVNlbGVjdExlYWYgIT09IFwiZGVmYXVsdFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RyZWVJbmZvID0gT2JqZWN0LmFzc2lnbihfdHJlZUluZm8sIHRyZWVJbmZvKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy50cmVlSW5mbyA9IF90cmVlSW5mbztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGxvYWRUcmVlVGFibGVEYXRhKHJlc0RhdGE/OiBMb29rdXBHcmlkUmVzdWx0LCByZWJpbmRFdmVudCA9IHRydWUpIHtcclxuICAgICAgICBjb25zdCBpdGVtcyA9IHJlc0RhdGEgPyByZXNEYXRhLml0ZW1zIDogdGhpcy5ncmlkT3B0aW9ucy5pdGVtcztcclxuICAgICAgICB0aGlzLml0ZW1zID0gaXRlbXM7XHJcblxyXG4gICAgICAgIGlmIChyZXNEYXRhKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0VHJlZUluZm8ocmVzRGF0YSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB0cmVlSW5mbyA9IHRoaXMuZ3JpZE9wdGlvbnMudHJlZUluZm87XHJcbiAgICAgICAgICAgIGlmICghdHJlZUluZm9bXCJ0cmVlRGF0YUlzSW5pdFwiXSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRyZWVJbmZvLmxheWVyVHlwZS50b0xvd2VyQ2FzZSgpID09PSBcInBhdGhjb2RlXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLml0ZW1zID0gdGhpcy5sb29rdXBVdGlscy5tYWtlVHJlZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pdGVtcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJlZUluZm9cclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLml0ZW1zID0gdGhpcy5sb29rdXBVdGlscy5tYWtlVHJlZVdpdGhQYXJlbnRJRChcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pdGVtcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgYCR7dHJlZUluZm8uZGF0YUZpZWxkfS4ke3RyZWVJbmZvLnBhcmVudEZpZWxkfWAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaWRGaWVsZFxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmNvbXBvbmVudFJlZi5pbnN0YW5jZSBpbnN0YW5jZW9mIFRyZWVUYWJsZUNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICBjb25zdCB0dCA9IHRoaXMuY29tcG9uZW50UmVmLmluc3RhbmNlIGFzIFRyZWVUYWJsZUNvbXBvbmVudDtcclxuICAgICAgICAgICAgaWYgKHRoaXMudHJlZUluZm8pIHtcclxuICAgICAgICAgICAgICAgIHR0LmxvYWREYXRhVHlwZSA9IHRoaXMudHJlZUluZm8ubG9hZERhdGFUeXBlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuY29sdW1ucyB8fCAhdGhpcy5jb2x1bW5zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdHQuY29sdW1ucyA9IHJlc0RhdGEuY29sdW1ucyB8fCBbXTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ3JpZE9wdGlvbnMuY29sdW1ucyA9IHR0LmNvbHVtbnM7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGlzTG9hZEFsbFRyZWVEYXRhID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubG9hZFRyZWVEYXRhVHlwZSA9PT0gXCJkZWZhdWx0XCIpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHQubG9hZERhdGFUeXBlID09PSBcImFsbFwiO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5sb2FkVHJlZURhdGFUeXBlID09PSBcImxvYWRhbGxcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGlmIChyZWJpbmRFdmVudCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50dEV2ZW50TWdyLmJpbmRUcmVldGFibGVFdmVudCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IGlzTG9hZEFsbCA9IGlzTG9hZEFsbFRyZWVEYXRhKCk7XHJcblxyXG4gICAgICAgICAgICAvKiog5a6M5pW05qCR6IqC54K55qOA5p+lIEJ5IEx1Y2FzIDIwMjAwMzAyICovXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLml0ZW1zID0gdGhpcy5jaGVja05vZGVDYW5CZVNlbGVjdCh0aGlzLml0ZW1zLCBpc0xvYWRBbGwpO1xyXG4gICAgICAgICAgICB0dC5rZWVwU2VsZWN0ID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnVzZUZhdm9yaXRlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZhdkhlbHBlci51cGRhdGVGYXZvcml0ZXNTdGF0dXModGhpcy5pdGVtcyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmxvYWREYXRhV2hlbk9wZW4pIHtcclxuICAgICAgICAgICAgICAgIHR0LmxvYWREYXRhKHRoaXMuaXRlbXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHR0LnJlc2l6ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWcqOaehOWujOaVtOagkeS4re+8jOaciemDqOWIhuiKgueCueWboOS4uuadoeS7tuiiq+i/h+a7pO+8jOS4uuaYvuekuuWujOaVtOagke+8jFxyXG4gICAgICog6L+Z5Lqb6IqC54K55Zyo6L+Q6KGM5pe25piv5LiN5YWB6K646KKr6YCJ5Lit55qELCDov5Tlm57mlrDnmoToioLngrnmlbDnu4RcclxuICAgICAqIEJ5IEx1Y2FzIDIwMjAwMzAyXHJcbiAgICAgKi9cclxuICAgIGNoZWNrTm9kZUNhbkJlU2VsZWN0KG5vZGVzLCBpc0FsbFRyZWVEYXRhID0gZmFsc2UpOiBUcmVlTm9kZVtdIHtcclxuICAgICAgICBpZiAobm9kZXMgJiYgbm9kZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBub2Rlcy5tYXAoKG5vZGU6IFRyZWVOb2RlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAobm9kZS5oYXNPd25Qcm9wZXJ0eShcImFkZHRpb25hbFwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5vZGUuc2VsZWN0YWJsZSA9ICFub2RlW1wiYWRkdGlvbmFsXCJdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChub2RlLmNoaWxkcmVuICYmIG5vZGUuY2hpbGRyZW4ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja05vZGVDYW5CZVNlbGVjdChub2RlLmNoaWxkcmVuLCBpc0FsbFRyZWVEYXRhKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzQWxsVHJlZURhdGEgJiYgKCF0aGlzLl9zZWFyY2hTdGF0ZSB8fCAhdGhpcy5fc2VhcmNoU3RhdGUudmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUubGVhZiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBub2RlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5vZGVzO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ2hhbmdlcyh2YWwpIHtcclxuICAgICAgICBpZiAoIXZhbCkge1xyXG4gICAgICAgICAgICB0aGlzLm9uQ2xlYXIoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmRpc3BsYXlUZXh0ID0gdmFsO1xyXG4gICAgICAgICAgICB0aGlzLmlzVGV4dENoYW5nZSA9IHRoaXMub3JpZ2luYWxUZXh0ICE9PSB0aGlzLmRpc3BsYXlUZXh0O1xyXG4gICAgICAgICAgICBpZiAodGhpcy5ub3NlYXJjaCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRNb2RlbFZhbHVlKHZhbCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyTWFwcGluZ3MuZW1pdCh7IGluc3RhbmNlOiB0aGlzLCB2YWx1ZTogdmFsLCB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5vbk1vZGVsVG91Y2hlZCh2YWwpO1xyXG4gICAgICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlZC5lbWl0KHZhbCk7XHJcbiAgICAgICAgICAgIHRoaXMudGV4dENoYW5nZWQuZW1pdCh2YWwpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbkNsZWFyKGVtaXQgPSB0cnVlKSB7XHJcbiAgICAgICAgdGhpcy5pc1RleHRDaGFuZ2UgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmRpc3BsYXlUZXh0ID0gXCJcIjtcclxuICAgICAgICB0aGlzLmRpc3BsYXlWYWx1ZSA9IFwiXCI7XHJcbiAgICAgICAgdGhpcy5vcmlnaW5hbFRleHQgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMuZXh0ZW5kSW5mbyA9IFwiXCI7XHJcbiAgICAgICAgdGhpcy5zZXRNb2RlbFZhbHVlKFwiXCIpO1xyXG4gICAgICAgIGlmICh0aGlzLm1hcHBpbmdGbikge1xyXG4gICAgICAgICAgICB0aGlzLm1hcHBpbmdGbihudWxsLCB0aGlzLm1hcEZpZWxkcyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMubWFwRmllbGRzKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBiaW5kaW5nRGF0YSA9IHRoaXMuc2VsZWN0aW9uTWdyLmdldEJpbmRpbmdEYXRhKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoYmluZGluZ0RhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlZmF1bHRNYXBwaW5nLmxvb2t1cEZpZWxkTWFwKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1hcEZpZWxkcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmluZGluZ0RhdGFcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubXVsdGlTZWxNZ3IuY2xlYXIoKTtcclxuICAgICAgICBpZiAoZW1pdCkge1xyXG4gICAgICAgICAgICB0aGlzLmNsZWFyLmVtaXQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY2xlYXJWYWx1ZShlbWl0ID0gdHJ1ZSkge1xyXG4gICAgICAgIHRoaXMub25DbGVhcihlbWl0KTtcclxuICAgIH1cclxuXHJcbiAgICBzZWxlY3RJdGVtKHJvd0RhdGE/OiBhbnkpIHtcclxuICAgICAgICBsZXQgc2VsZWN0ZWRSb3cgPSBudWxsO1xyXG4gICAgICAgIGlmIChyb3dEYXRhKSB7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkUm93ID0gcm93RGF0YTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzZWxlY3RlZFJvdyA9IHRoaXMuc2VsZWN0aW9ucztcclxuXHJcbiAgICAgICAgICAgIGlmICghc2VsZWN0ZWRSb3cpIHtcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkUm93ID0gbnVsbDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHNlbGVjdGVkUm93KSAmJiAhc2VsZWN0ZWRSb3cubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRSb3cgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDlpoLmnpzlrprkuYnoh6rlrprkuYnlpITnkIbnoa7lrprkuovku7bvvIzliJnnlLHoh6rlrprkuYnkuovku7blpITnkIblkI7pnaLnmoTpgLvovpFcclxuICAgICAgICBpZiAodGhpcy5va0hhbmRsZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5va0hhbmRsZXIoeyBkYXRhOiBzZWxlY3RlZFJvdywgaW5zdGFuY2U6IHRoaXMgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuYmVmb3JlU2VsZWN0RGF0YSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYnNkUmVzdWx0ID0gdGhpcy5iZWZvcmVTZWxlY3REYXRhKHtcclxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZTogdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiBzZWxlY3RlZFJvdyxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKGJzZFJlc3VsdCAmJiBic2RSZXN1bHQuc3Vic2NyaWJlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnNkUmVzdWx0LnN1YnNjcmliZSgoZTogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2JlZm9yZVNlbGVjdERhdGFDYWxsQmFjayhlLCBzZWxlY3RlZFJvdyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMud3JpdGVDb25zb2xlKCfluK7liqnmlbDmja7pgInkuK3liY3kuovku7bmnKrov5Tlm57lgLzmiJbov5Tlm57nsbvlnovpnZ5PYnNlcnZhYmxlLCDor7fmo4Dmn6UnLCAnZXJyb3InKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2JlZm9yZVNlbGVjdERhdGFDYWxsQmFjayh0cnVlLCBzZWxlY3RlZFJvdyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRQYXJlbnRQYXRoQ29kZShyb3dzKSB7XHJcbiAgICAgICAgY29uc3QgbWF4QnkgPSAoYXJyLCBmbikgPT5cclxuICAgICAgICAgICAgTWF0aC5tYXgoXHJcbiAgICAgICAgICAgICAgICAuLi5hcnIubWFwKHR5cGVvZiBmbiA9PT0gXCJmdW5jdGlvblwiID8gZm4gOiAodmFsKSA9PiB2YWxbZm5dKVxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICBjb25zdCB7IGRhdGFGaWVsZCwgcGF0aEZpZWxkLCBsYXllckZpZWxkIH0gPSB0aGlzLnRyZWVJbmZvO1xyXG4gICAgICAgIGNvbnN0IG1heExheWVyID0gbWF4Qnkocm93cywgKHgpID0+IHhbZGF0YUZpZWxkXVtsYXllckZpZWxkXSk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IG1heExheWVyOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgX3Jvd3MgPSByb3dzLmZpbHRlcigobikgPT4gbltkYXRhRmllbGRdW2xheWVyRmllbGRdID09PSBpKTtcclxuICAgICAgICAgICAgaWYgKF9yb3dzICYmIF9yb3dzLmxlbmd0aCAmJiBfcm93cy5sZW5ndGggPCByb3dzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgX3Jvd3MuZm9yRWFjaCgocikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhdGNoQ29kZSA9IHJbZGF0YUZpZWxkXVtwYXRoRmllbGRdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IF9yb3dzMiA9IHJvd3MuZmlsdGVyKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAobikgPT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5bZGF0YUZpZWxkXVtwYXRoRmllbGRdICE9PSBwYXRjaENvZGUgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5bZGF0YUZpZWxkXVtwYXRoRmllbGRdLmluZGV4T2YocGF0Y2hDb2RlKSA9PT0gMFxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9yb3dzMiAmJiBfcm93czIubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvd3MgPSByb3dzLmZpbHRlcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChuKSA9PiBuW2RhdGFGaWVsZF1bcGF0aEZpZWxkXSAhPT0gcGF0Y2hDb2RlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByb3dzO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2JlZm9yZVNlbGVjdERhdGFDYWxsQmFjayhlLCBzZWxlY3RlZFJvdykge1xyXG4gICAgICAgIGxldCBjYW5TZWxlY3QgPSBlO1xyXG4gICAgICAgIGxldCBtZXNzYWdlID0gXCJcIjtcclxuICAgICAgICBpZiAodHlwZW9mIGUgPT09IFwiYm9vbGVhblwiKSB7XHJcbiAgICAgICAgICAgIGNhblNlbGVjdCA9IGU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBlID09PSBcIm9iamVjdFwiKSB7XHJcbiAgICAgICAgICAgICAgICBjYW5TZWxlY3QgPSBlLmNhblNlbGVjdDtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBlLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjYW5TZWxlY3QgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFzZWxlY3RlZFJvdykge1xyXG4gICAgICAgICAgICBtZXNzYWdlID0gdGhpcy5tdXN0Q2hvb3NBZGF0YXJvdztcclxuICAgICAgICAgICAgY2FuU2VsZWN0ID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY2FuU2VsZWN0KSB7XHJcbiAgICAgICAgICAgIGxldCBzZWxlY3RlZFJvd3MkID0gb2Yoc2VsZWN0ZWRSb3cpO1xyXG4gICAgICAgICAgICAvLyDlpJrpgIkg5qCR5biu5YqpIOW8guatpeWKoOi9vSDliIbnuqfnoIEg5byA5ZCv5ZCM5q2l6YCJ5oupIOaIluWMheWQq+S4i+e6p1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuc2luZ2xlU2VsZWN0ICYmIHRoaXMuZW5hYmxlQ2FzY2FkZSAmJiB0aGlzLmlzVHJlZSgpICkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudHJlZUluZm8ubG9hZERhdGFUeXBlICE9PSBcImFsbFwiICYmIHRoaXMudHJlZUluZm8ubGF5ZXJUeXBlID09PSBcInBhdGhjb2RlXCIgJiYgdGhpcy5pc0dldEFsbENoaWRsTm9kZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcGFyZW50c0lkcyA9IHRoaXMuZ2V0UGFyZW50UGF0aENvZGUoc2VsZWN0ZWRSb3cpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJlbnRzSWRzICYmIHBhcmVudHNJZHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudHNJZHMgPSBwYXJlbnRzSWRzLm1hcChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChuKSA9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5bdGhpcy50cmVlSW5mby5kYXRhRmllbGRdW3RoaXMudHJlZUluZm8ucGF0aEZpZWxkXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkUm93cyQgPSB0aGlzLmh0dHBNZ3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5nZXREYXRhKHsgcGFyZW50c0lkcyB9LCBcImFsbENoaWxkcmVuXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGlwZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXAoKHI6IExvb2t1cEdyaWRSZXN1bHQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXRlbXMgPSByLml0ZW1zXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHIuaXRlbXMubWFwKChkKSA9PiBkLmRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbGxpdGVtcyA9IFsuLi5zZWxlY3RlZFJvdywgLi4uaXRlbXNdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaWRzID0gYWxsaXRlbXMubWFwKChuKSA9PiBuW3RoaXMuaWRGaWVsZF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHMgPSBBcnJheS5mcm9tKG5ldyBTZXQoaWRzKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpZHMubWFwKChuKSA9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsaXRlbXMuZmluZCgoYSkgPT4gYVt0aGlzLmlkRmllbGRdID09PSBuKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgc2VsZWN0ZWRSb3dzJC5zdWJzY3JpYmUoKHJvd3MpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VMb2FkaW5nKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xWYWx1ZShyb3dzKTtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy51c2VUaXAgfHwgIXJvd3MpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy51c2VUaXApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBlcnNvbmFsQ29uZmlnU2VydmljZS51cGRhdGVRdWVja1NlbGVjdGVkKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByb3dzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvY2FsU2VydmljZS5sb2NhbGVJZFxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChtZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5ub3RpZnlTZXJ2aWNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnlTZXJ2aWNlLndhcm5pbmcobWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXJTZXJ2aWNlLndhcm5pbmcobWVzc2FnZSwgXCJcIiwgdHJ1ZSwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZy5lbC5uYXRpdmVFbGVtZW50LmNsaWNrKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB1cGRhdGVDb250cm9sVmFsdWUoc2VsZWN0ZWRSb3cpIHtcclxuICAgICAgICBpZiAoc2VsZWN0ZWRSb3cpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXREaXNwbGF5VGV4dChzZWxlY3RlZFJvdyk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm1hcHBpbmdGbikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tYXBwaW5nRm4oc2VsZWN0ZWRSb3csIHRoaXMubWFwRmllbGRzLCB0aGlzLmJpbmRpbmdEYXRhKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm1hcEZpZWxkcyAmJiB0aGlzLmJpbmRpbmdEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWZhdWx0TWFwcGluZy5sb29rdXBGaWVsZE1hcChcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRSb3csXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWFwRmllbGRzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJpbmRpbmdEYXRhXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnNldE1vZGVsVmFsdWUodGhpcy5kaXNwbGF5VGV4dCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzW1wiaW5EYXRhZ3JpZFwiXSAmJiBzZWxlY3RlZFJvdykge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0SXRlbXMgPSBBcnJheS5pc0FycmF5KHNlbGVjdGVkUm93KVxyXG4gICAgICAgICAgICAgICAgICAgID8gc2VsZWN0ZWRSb3dcclxuICAgICAgICAgICAgICAgICAgICA6IFtzZWxlY3RlZFJvd107XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUJpbmREYXRhKHNlbGVjdEl0ZW1zKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0YS5lbWl0KHNlbGVjdGVkUm93KTtcclxuICAgICAgICAgICAgdGhpcy5ydW5EaWN0UGlja2VkRXZlbnQoc2VsZWN0ZWRSb3cpO1xyXG4gICAgICAgICAgICB0aGlzLmlzVGV4dENoYW5nZSA9IGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChkb2N1bWVudC5hY3RpdmVFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCBhcyBIVE1MQnV0dG9uRWxlbWVudCkuYmx1cigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZXJTZXJ2aWNlLndhcm5pbmcodGhpcy5tdXN0Q2hvb3NBZGF0YXJvdyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdXBkYXRlQmluZERhdGEoc2VsZWN0ZWRSb3cpIHtcclxuICAgICAgICBpZiAoIXRoaXMubWFwRmllbGRzKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGhlbHBGaWVsZHMgPSBPYmplY3Qua2V5cyh0aGlzLm1hcEZpZWxkcyk7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICB0aGlzLm5nQ29udHJvbCAmJlxyXG4gICAgICAgICAgICB0aGlzLm5nQ29udHJvbC5mb3JtRGlyZWN0aXZlICYmXHJcbiAgICAgICAgICAgIHRoaXMubmdDb250cm9sLmZvcm1EaXJlY3RpdmUuZm9ybSAmJlxyXG4gICAgICAgICAgICB0aGlzLm5nQ29udHJvbC5mb3JtRGlyZWN0aXZlLmZvcm0uYmluZGluZ0RhdGFcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgY29uc3QgYmluZGluZ0RhdGEgPSB0aGlzLm5nQ29udHJvbC5mb3JtRGlyZWN0aXZlLmZvcm0uYmluZGluZ0RhdGE7XHJcblxyXG4gICAgICAgICAgICBpZiAoYmluZGluZ0RhdGEpIHtcclxuICAgICAgICAgICAgICAgIGhlbHBGaWVsZHMuZm9yRWFjaCgoaGVscEZpZWxkOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1hcEZpZWxkc1toZWxwRmllbGRdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zcGxpdChcIixcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmZvckVhY2goKGZvcm1GaWVsZDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWwgPSBzZWxlY3RlZFJvd1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKHIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudXRpbHMuZ2V0VmFsdWUoaGVscEZpZWxkLCByKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qb2luKHRoaXMubXVsdGlwbGVDaG9pY2VTZXBhcmF0b3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51dGlscy5zZXRWYWx1ZShiaW5kaW5nRGF0YSwgZm9ybUZpZWxkLCB2YWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBpZiAoYmluZGluZ0RhdGEuc2V0VmFsdWUpIHtcclxuICAgICAgICAgICAgLy8gICAgIGNvbnN0IGJpbmRpbmdQYXRoID0gdGhpcy5uZ0NvbnRyb2wuZm9ybURpcmVjdGl2ZS5mb3JtLmJpbmRpbmdQYXRoO1xyXG4gICAgICAgICAgICAvLyAgICAgbGV0IHBhdGhBcnI6IHN0cmluZ1tdID0gW107XHJcbiAgICAgICAgICAgIC8vICAgICBpZiAoYmluZGluZ1BhdGgpIHtcclxuICAgICAgICAgICAgLy8gICAgICAgICBwYXRoQXJyID0gYmluZGluZ1BhdGguc3BsaXQoJy8nKS5maWx0ZXIobiA9PiBuICE9PSAnJyk7XHJcbiAgICAgICAgICAgIC8vICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyAgICAgaGVscEZpZWxkcy5mb3JFYWNoKChoZWxwRmllbGQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIHRoaXMubWFwRmllbGRzW2hlbHBGaWVsZF0uc3BsaXQoJywnKS5mb3JFYWNoKChmb3JtRmllbGQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICBjb25zdCBmaWVsZFBhdGhzID0gcGF0aEFyci5jb25jYXQoZm9ybUZpZWxkLnNwbGl0KCcuJykpO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICBjb25zdCB2YWwgPSBzZWxlY3RlZFJvdy5tYXAociA9PiB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy51dGlscy5nZXRWYWx1ZShmb3JtRmllbGQsIHIpO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICB9KS5qb2luKHRoaXMubXVsdGlwbGVDaG9pY2VTZXBhcmF0b3IpO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICBiaW5kaW5nRGF0YS5zZXRWYWx1ZShwYXRoQXJyLmNvbmNhdChmaWVsZFBhdGhzKSwgdmFsLCB0cnVlLCB0cnVlKTtcclxuICAgICAgICAgICAgLy8gICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gICAgIH0pO1xyXG4gICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gaWYgKHRoaXMuYmluZGluZ0RhdGEpIHtcclxuICAgICAgICAgICAgLy8gICAgIGhlbHBGaWVsZHMuZm9yRWFjaCgoaGVscEZpZWxkOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgLy8gICAgICAgICB0aGlzLm1hcEZpZWxkc1toZWxwRmllbGRdLnNwbGl0KCcsJykuZm9yRWFjaCgoZm9ybUZpZWxkOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgY29uc3QgdmFsID0gc2VsZWN0ZWRSb3cubWFwKHIgPT4ge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudXRpbHMuZ2V0VmFsdWUoZm9ybUZpZWxkLCByKTtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgfSkuam9pbih0aGlzLm11bHRpcGxlQ2hvaWNlU2VwYXJhdG9yKTtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgdGhpcy51dGlscy5zZXRWYWx1ZSh0aGlzLmJpbmRpbmdEYXRhLCBmb3JtRmllbGQsIHZhbCk7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vICAgICB9KTtcclxuICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldEV4dGVuZEluZm9GaWVsZHMoaXNIZWxwRGF0YSA9IHRydWUpIHtcclxuICAgICAgICBpZiAoIXRoaXMuZXh0SW5mb0ZpZWxkcykge1xyXG4gICAgICAgICAgICB0aGlzLndyaXRlQ29uc29sZShg5pyq6K6+572u5omp5bGV5a2X5q6144CCYCk7XHJcbiAgICAgICAgICAgIHJldHVybiBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdGlwRmllbGRBcnIgPSB0aGlzLmV4dEluZm9GaWVsZHMuc3BsaXQoXCIsXCIpO1xyXG5cclxuICAgICAgICBpZiAoaXNIZWxwRGF0YSkge1xyXG4gICAgICAgICAgICBsZXQgZXh0ZW5kSW5mb0ZpZWxkcyA9IFtdO1xyXG4gICAgICAgICAgICBleHRlbmRJbmZvRmllbGRzID0gdGlwRmllbGRBcnIubWFwKCh0ZikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWFwS2V5ID0gT2JqZWN0LmtleXModGhpcy5tYXBGaWVsZHMpLmZpbmQoKGspID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5tYXBGaWVsZHNba10gPT09IHRmO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG1hcEtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtYXBLZXk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMud3JpdGVDb25zb2xlKGDlnKjluK7liqnmmKDlsITlrZfmrrXkuK3mnKrmib7liLAke3RmfWApO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIGV4dGVuZEluZm9GaWVsZHM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGlwRmllbGRBcnI7XHJcbiAgICB9XHJcblxyXG4gICAgb25VcGRhdGVFeHRlbmRJbmZvKCkge1xyXG4gICAgICAgIGNvbnN0IGpzb25EYXRhID0gdGhpcy5zZWxlY3Rpb25NZ3IuZ2V0QmluZGluZ0RhdGEoKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZUV4dGVuZEluZm8oanNvbkRhdGEsIGZhbHNlKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDpgInkuK3luK7liqnmlbDmja7lkI7vvIzmm7TmlrDmianlsZXkv6Hmga9cclxuICAgIHByaXZhdGUgdXBkYXRlRXh0ZW5kSW5mbyhkYXRhOiBhbnksIGlzSGVscERhdGEgPSB0cnVlKSB7XHJcbiAgICAgICAgaWYgKGRhdGEpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZXh0SW5mb0Zvcm1hdHRlcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0aXBTdHJpbmcgPSBkYXRhLm1hcCgobikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRFeHRlbmRJbmZvVGV4dChuKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4dGVuZEluZm8gPSB0aXBTdHJpbmcuam9pbihcIu+8jFwiKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5leHRlbmRJbmZvID0gdGhpcy5nZXRFeHRlbmRJbmZvVGV4dChkYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGV4dGVuZEluZm9GaWVsZHMgPSB0aGlzLmdldEV4dGVuZEluZm9GaWVsZHMoaXNIZWxwRGF0YSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXh0ZW5kSW5mb0ZpZWxkcyAmJiBleHRlbmRJbmZvRmllbGRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpcFN0cmluZyA9IGRhdGEubWFwKChuKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRFeHRlbmRJbmZvVGV4dChuLCBleHRlbmRJbmZvRmllbGRzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXh0ZW5kSW5mbyA9IHRpcFN0cmluZy5qb2luKFwi77yMXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXh0ZW5kSW5mbyA9IHRoaXMuZ2V0RXh0ZW5kSW5mb1RleHQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0ZW5kSW5mb0ZpZWxkc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldEV4dGVuZEluZm9UZXh0KGl0ZW1EYXRhLCBmaWVsZHMgPSBudWxsKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmV4dEluZm9Gb3JtYXR0ZXIgPT09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5leHRJbmZvRm9ybWF0dGVyKHtcclxuICAgICAgICAgICAgICAgIGJpbmRpbmdEYXRhOiBpdGVtRGF0YSxcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlOiB0aGlzLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCB0aXBTdHJpbmcgPSBbXTtcclxuICAgICAgICAgICAgY29uc3QgdGlwVmFsdWVzID0gZmllbGRzLm1hcCgodCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGZ2ID0gdGhpcy51dGlscy5nZXRWYWx1ZSh0LCBpdGVtRGF0YSk7XHJcbiAgICAgICAgICAgICAgICB0aXBTdHJpbmcucHVzaCh0ZnYpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgW3RdOiB0ZnYgfTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aXBTdHJpbmcuam9pbihcIiBcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0RGlzcGxheVRleHQocm93czogYW55KSB7XHJcbiAgICAgICAgY29uc3QgZGYgPSB0aGlzLmRpc3BsYXlGaWVsZHNcclxuICAgICAgICAgICAgPyB0aGlzLmRpc3BsYXlGaWVsZHMuc3BsaXQoXCIsXCIpXHJcbiAgICAgICAgICAgIDogW3RoaXMudGV4dEZpZWxkXTtcclxuICAgICAgICBjb25zdCB0eHRBcnIgPSByb3dzLm1hcCgocikgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB0ID0gW107XHJcbiAgICAgICAgICAgIGRmLmZvckVhY2goKG4pID0+IHtcclxuICAgICAgICAgICAgICAgIHQucHVzaCh0aGlzLnV0aWxzLmdldFZhbHVlKG4sIHIpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0LmpvaW4odGhpcy5kaXNwbGF5VGV4dFNlcGFyYXRvcik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmdyaWRPcHRpb25zLnNpbmdsZVNlbGVjdCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHh0QXJyLmpvaW4oXCJcIik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZGlzcGxheUZpZWxkcykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHR4dEFyci5tYXAoKHQpID0+IFwiW1wiICsgdCArIFwiXVwiKS5qb2luKFwiLFwiKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0eHRBcnIuam9pbihcIixcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXREaXNwbGF5VGV4dChzZWxlY3RlZFJvdzogYW55KSB7XHJcbiAgICAgICAgdGhpcy5vcmlnaW5hbFRleHQgPSB0aGlzLmRpc3BsYXlUZXh0O1xyXG5cclxuICAgICAgICBpZiAodGhpcy5ncmlkT3B0aW9ucy5zaW5nbGVTZWxlY3QpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZGlzcGxheUZvcm1hdHRlcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5VGV4dCA9IHRoaXMudXRpbHMuZ2V0VmFsdWUoXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50ZXh0RmllbGQsXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRSb3dcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNUcmVlKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlUZXh0ID0gdGhpcy5kaXNwbGF5Rm9ybWF0dGVyKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlUZXh0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBbc2VsZWN0ZWRSb3ddLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb29rdXA6IHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhdGFibGU6IHRoaXMuY29tcG9uZW50UmVmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluc3RhbmNlIGFzIERhdGFUYWJsZUNvbXBvbmVudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHR0ID0gdGhpcy5jb21wb25lbnRSZWYuaW5zdGFuY2UgYXMgVHJlZVRhYmxlQ29tcG9uZW50O1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheVRleHQgPSB0aGlzLmRpc3BsYXlGb3JtYXR0ZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheVRleHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFtzZWxlY3RlZFJvd10sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgbG9va3VwOiB0aGlzLCB0cmVlOiB0dCB9XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheVRleHQgPSB0aGlzLmdldERpc3BsYXlUZXh0KFtzZWxlY3RlZFJvd10pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuZGlzcGxheVZhbHVlID0gc2VsZWN0ZWRSb3dbdGhpcy52YWx1ZUZpZWxkXTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWRSb3cubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5kaXNwbGF5Rm9ybWF0dGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5VGV4dCA9IHNlbGVjdGVkUm93XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKHIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnV0aWxzLmdldFZhbHVlKHRoaXMudGV4dEZpZWxkLCByKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmpvaW4odGhpcy5tdWx0aXBsZUNob2ljZVNlcGFyYXRvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzVHJlZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheVRleHQgPSB0aGlzLmRpc3BsYXlGb3JtYXR0ZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlUZXh0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRSb3csXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9va3VwOiB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGF0YWJsZTogdGhpcy5jb21wb25lbnRSZWZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluc3RhbmNlIGFzIERhdGFUYWJsZUNvbXBvbmVudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0dCA9IHRoaXMuY29tcG9uZW50UmVmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5zdGFuY2UgYXMgVHJlZVRhYmxlQ29tcG9uZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlUZXh0ID0gdGhpcy5kaXNwbGF5Rm9ybWF0dGVyKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5VGV4dCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkUm93LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBsb29rdXA6IHRoaXMsIHRyZWU6IHR0IH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheVRleHQgPSB0aGlzLmdldERpc3BsYXlUZXh0KHNlbGVjdGVkUm93KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlWYWx1ZSA9IHNlbGVjdGVkUm93XHJcbiAgICAgICAgICAgICAgICAgICAgLm1hcCgocikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy51dGlscy5nZXRWYWx1ZSh0aGlzLnZhbHVlRmllbGQsIHIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLmpvaW4odGhpcy5tdWx0aXBsZUNob2ljZVNlcGFyYXRvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vcmlnaW5hbFRleHQgPSB0aGlzLmRpc3BsYXlUZXh0O1xyXG4gICAgfVxyXG5cclxuICAgIHJ1bkRpY3RQaWNrZWRFdmVudChyb3dEYXRhOiBhbnkpIHtcclxuICAgICAgICBpZiAodGhpcy5kaWN0UGlja2VkKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9rQnV0dG9uKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9rQnV0dG9uLm5hdGl2ZUVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuZGljdFBpY2tlZFN1YnNjcmlwdGlvbiA9IHRoaXMuZGljdFBpY2tlZChyb3dEYXRhKS5zdWJzY3JpYmUoXHJcbiAgICAgICAgICAgICAgICAodjogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMub2tCdXR0b24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5va0J1dHRvbi5uYXRpdmVFbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdiA9PT0gXCJib29sZWFuXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VEaWFsb2cocm93RGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlb2YgdiA9PT0gXCJvYmplY3RcIiAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2LmNsb3NlRGlhbG9nICE9PSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgIXYuY2xvc2VEaWFsb2dcclxuICAgICAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYubWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlclNlcnZpY2Uud2FybmluZyh2Lm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZURpYWxvZyhyb3dEYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VEaWFsb2cocm93RGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2VEaWFsb2cocm93RGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZm9jdXNUb0lucHV0KCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuem9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaW5wdXRHcm91cCAmJiB0aGlzLmlucHV0R3JvdXAudGV4dGJveCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRHcm91cC50ZXh0Ym94Lm5hdGl2ZUVsZW1lbnQuZm9jdXMoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2VEaWFsb2cocm93RGF0YSA9IG51bGwpIHtcclxuICAgICAgICB0aGlzLmlzU2hvdyA9IGZhbHNlO1xyXG4gICAgICAgIGlmICh0aGlzLmRpYWxvZykge1xyXG4gICAgICAgICAgICB0aGlzLmRpYWxvZy5jbG9zZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHJvd0RhdGEpIHtcclxuICAgICAgICAgICAgdGhpcy5tdWx0aVNlbE1nci5zYXZlKHJvd0RhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5mb2N1c1RvSW5wdXQoKTtcclxuICAgIH1cclxuXHJcbiAgICBjYW5jZWxTZWxlY3QoKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZURpYWxvZygpO1xyXG4gICAgICAgIHRoaXMuaXNUZXh0Q2hhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKCF0aGlzLm5vc2VhcmNoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzcGxheVRleHQgPSB0aGlzLm9yaWdpbmFsVGV4dDtcclxuICAgICAgICAgICAgdGhpcy5zZXRNb2RlbFZhbHVlKHRoaXMuZGlzcGxheVRleHQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuY2FuY2VsSGFuZGxlcikge1xyXG4gICAgICAgICAgICB0aGlzLmNhbmNlbEhhbmRsZXIodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldE1vZGVsVmFsdWUodikge1xyXG4gICAgICAgIGlmICh0aGlzLm9uTW9kZWxDaGFuZ2UpIHtcclxuICAgICAgICAgICAgdGhpcy5vbk1vZGVsQ2hhbmdlKHYpO1xyXG4gICAgICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlZC5lbWl0KHYpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyDmlbDmja7liJfooajvvIzmlLbol4/vvIwg5bey6YCJ5pWw5o2uIHRhYiDpobXliIfmjaJcclxuICAgIG9uVGFiQ2hhbmdlKGU6IGFueSkge1xyXG4gICAgICAgIHRoaXMuYWN0aXZlVGFiID0gZS50YWJJbmRleDtcclxuICAgICAgICB0aGlzLnBlcnNvbmFsQ29uZi50YWJJbmRleCA9IHRoaXMuYWN0aXZlVGFiO1xyXG4gICAgICAgIGNvbnN0IF9maXJzdENoYW5nZSA9IHRoaXMuaXNUYWJDaGFuZ2VkO1xyXG4gICAgICAgIHRoaXMuaXNUYWJDaGFuZ2VkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnBlcnNvbmFsQ29uZmlnU2VydmljZS51cGRhdGVQZXJzb25hbENvbmZpZyh7XHJcbiAgICAgICAgICAgIHRhYkluZGV4OiBlLnRhYkluZGV4LFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5hY3RpdmVUYWIgPT09IFwiZGF0YWxpc3RcIikge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pc0RvdWJsbGVMaXN0KCkgJiYgIXRoaXMubGVmdENvbXBvbmVudFJlZikge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubmF2aWdhdGlvbk9wdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvb2t1cENtcE1nci5jcmVhdGVMZWZ0Q29tcG9uZW50KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5hdmlnYXRpb25PcHRpb25zXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0RGF0YSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCghdGhpcy5pdGVtcyB8fCAhdGhpcy5pdGVtcy5sZW5ndGgpICYmICghdGhpcy5fc2VhcmNoU3RhdGUgfHwgIXRoaXMuX3NlYXJjaFN0YXRlLnZhbHVlKSApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5pdERhdGEoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICghX2ZpcnN0Q2hhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNUcmVlKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkVHJlZVRhYmxlRGF0YSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZERhdGFUYWJsZURhdGEoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kdEV2ZW50TWdyLmJpbmREYXRhVGFibGVFdmVudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIHRoaXMuc2VsZWN0aW9uTWdyLnNlbGVjdEN1cnJlbnRWYWx1ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0dldEFsbENoaWxkcmVuQ2hlY2tib3goKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5hY3RpdmVUYWIgPT09IFwiZmF2b3JpdGVcIikge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNUcmVlKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXREYXRhKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgIXRoaXMuZmF2b3JpdGVJdGVtcyB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAhdGhpcy5mYXZvcml0ZUl0ZW1zLmxlbmd0aCB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZhdm9yaXRlSXRlbXMubGVuZ3RoICE9PSB0aGlzLmZhdkhlbHBlci5nZXRGYXZvcml0SWRzKCkubGVuZ3RoXHJcbiAgICAgICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdERhdGEoKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCFfZmlyc3RDaGFuZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mYXZIZWxwZXIuX2xvYWRGYXZvcml0ZURhdGEodGhpcy5mYXZvcml0ZUl0ZW1zKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5zZWxlY3Rpb25NZ3Iuc2VsZWN0Q3VycmVudFZhbHVlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgdGhpcy5zZWxlY3Rpb25NZ3Iuc2VsZWN0Q3VycmVudFZhbHVlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmNoYW5nZURldGVjdG9yLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5yZXNpemVDbXAoKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNUcmVlKCkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHkgPSB0aGlzLmNvbXBvbmVudFJlZi5pbnN0YW5jZS5zdGF0ZS5zY3JvbGxZO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnRSZWYuaW5zdGFuY2Uuc2Nyb2xsVG9ZKHksIDApO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZUNhc2NhZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnR0RXZlbnRNZ3IuY2FzY2FkZVZhbHVlQ2hhbmdlZCh0aGlzLmNhc2NhZGVTdGF0dXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uTWdyLnNlbGVjdEN1cnJlbnRWYWx1ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vI3JlZ2lvbiAgVGFnIFZpZXcgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgcHJpdmF0ZSByZWdpc3Rlck1vdXNlRXZlbnRGb3JUYWdWaWV3KCkge1xyXG4gICAgICAgIGlmICh0aGlzLmVuYWJsZUNsZWFyKSB7XHJcbiAgICAgICAgICAgIHRoaXMudGFnYm94Lm5hdGl2ZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAgICAgICAgIFwibW91c2VlbnRlclwiLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5vblRhZ2JveE1vdXNlRW50ZXIuYmluZCh0aGlzKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB0aGlzLnRhZ2JveC5uYXRpdmVFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgICAgICAgICBcIm1vdXNlbGVhdmVcIixcclxuICAgICAgICAgICAgICAgIHRoaXMub25UYWdib3hNb3VzZUxlYXZlLmJpbmQodGhpcylcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB0b2dnbGVDbGVhckljb24oZXZlbnQ6IGFueSwgaXNTaG93ID0gZmFsc2UpIHtcclxuICAgICAgICBjb25zdCBzdHIgPSBpc1Nob3cgPyBcIlwiIDogXCJub25lXCI7XHJcbiAgICAgICAgY29uc3QgY2xlYXJJY29uID0gZXZlbnQudGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXCIuaW5wdXQtZ3JvdXAtY2xlYXJcIik7XHJcbiAgICAgICAgaWYgKGNsZWFySWNvbikge1xyXG4gICAgICAgICAgICBjbGVhckljb24uc3R5bGUuZGlzcGxheSA9IHN0cjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBvblRhZ2JveE1vdXNlRW50ZXIoZXZlbnQpIHtcclxuICAgICAgICBpZiAodGhpcy5kaXNwbGF5VGV4dCAmJiB0aGlzLmVuYWJsZUNsZWFyKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5yZWFkb25seSAmJiAhdGhpcy5kaXNhYmxlZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93VGFnYm94Q2xlYXJCdXR0b24gPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnNob3dUYWdib3hDbGVhckJ1dHRvbikge1xyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUNsZWFySWNvbihldmVudCwgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25UYWdib3hNb3VzZUxlYXZlKGV2ZW50KSB7XHJcbiAgICAgICAgdGhpcy50b2dnbGVDbGVhckljb24oZXZlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uUmVtb3ZlU2VsZWN0SXRlbSgkZXZlbnQsIHR4dCkge1xyXG4gICAgICAgICRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICBjb25zdCB0ZXh0QXJyYXkgPSBBcnJheS5mcm9tKHRoaXMuZGlzcGxheVRleHRMaXN0KTtcclxuICAgICAgICBjb25zdCByZW1vdmVkSW5kZXggPSB0aGlzLmRpc3BsYXlUZXh0TGlzdC5pbmRleE9mKHR4dCk7XHJcbiAgICAgICAgdGV4dEFycmF5LnNwbGljZShyZW1vdmVkSW5kZXgsIDEpO1xyXG4gICAgICAgIHRoaXMuZGlzcGxheVRleHQgPSB0ZXh0QXJyYXkuam9pbih0aGlzLm11bHRpcGxlQ2hvaWNlU2VwYXJhdG9yKTtcclxuICAgICAgICB0aGlzLm9yaWdpbmFsVGV4dCA9IHRoaXMuZGlzcGxheVRleHQ7XHJcbiAgICAgICAgdGhpcy5zZXRNb2RlbFZhbHVlKHRoaXMuZGlzcGxheVRleHQpO1xyXG5cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZGlzcGxheVZhbHVlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHMgPSB0aGlzLmRpc3BsYXlWYWx1ZS5zcGxpdCh0aGlzLm11bHRpcGxlQ2hvaWNlU2VwYXJhdG9yKTtcclxuICAgICAgICAgICAgdmFscy5zcGxpY2UocmVtb3ZlZEluZGV4LCAxKTtcclxuICAgICAgICAgICAgdGhpcy5kaXNwbGF5VmFsdWUgPSB2YWxzLmpvaW4odGhpcy5tdWx0aXBsZUNob2ljZVNlcGFyYXRvcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5tYXBGaWVsZHMpIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVPdGhlckZpZWxkRGF0YVdoZW5UYWdyZW1vdmVkKHJlbW92ZWRJbmRleCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnRhZ1JlbW92ZWQuZW1pdCh7IHJlbW92ZWRJbmRleCwgaW5zdGFuY2U6IHRoaXMgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB1cGRhdGVPdGhlckZpZWxkRGF0YVdoZW5UYWdyZW1vdmVkKHJlbW92ZWRJbmRleCkge1xyXG4gICAgICAgIGNvbnN0IGhlbHBGaWVsZHMgPSBPYmplY3Qua2V5cyh0aGlzLm1hcEZpZWxkcyk7XHJcbiAgICAgICAgY29uc3QgdGV4dEZpZWxkSW5kZXggPSBoZWxwRmllbGRzLmluZGV4T2YodGhpcy50ZXh0RmllbGQpO1xyXG5cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIHRoaXMubmdDb250cm9sICYmXHJcbiAgICAgICAgICAgIHRoaXMubmdDb250cm9sLmZvcm1EaXJlY3RpdmUgJiZcclxuICAgICAgICAgICAgdGhpcy5uZ0NvbnRyb2wuZm9ybURpcmVjdGl2ZS5mb3JtICYmXHJcbiAgICAgICAgICAgIHRoaXMubmdDb250cm9sLmZvcm1EaXJlY3RpdmUuZm9ybS5iaW5kaW5nRGF0YVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICBjb25zdCBiaW5kaW5nRGF0YSA9IHRoaXMubmdDb250cm9sLmZvcm1EaXJlY3RpdmUuZm9ybS5iaW5kaW5nRGF0YTtcclxuICAgICAgICAgICAgaWYgKGJpbmRpbmdEYXRhLnNldFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBiaW5kaW5nUGF0aCA9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uZ0NvbnRyb2wuZm9ybURpcmVjdGl2ZS5mb3JtLmJpbmRpbmdQYXRoO1xyXG4gICAgICAgICAgICAgICAgbGV0IHBhdGhBcnI6IHN0cmluZ1tdID0gW107XHJcbiAgICAgICAgICAgICAgICBpZiAoYmluZGluZ1BhdGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBwYXRoQXJyID0gYmluZGluZ1BhdGguc3BsaXQoXCIvXCIpLmZpbHRlcigobikgPT4gbiAhPT0gXCJcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaGVscEZpZWxkcy5mb3JFYWNoKChoZWxwRmllbGQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWFwRmllbGRzW2hlbHBGaWVsZF1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNwbGl0KFwiLFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZm9yRWFjaCgoZm9ybUZpZWxkOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkUGF0aHMgPSBwYXRoQXJyLmNvbmNhdChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtRmllbGQuc3BsaXQoXCIuXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsID0gYmluZGluZ0RhdGEuZ2V0VmFsdWUoZmllbGRQYXRocyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWxBcnIgPSB2YWwuc3BsaXQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tdWx0aXBsZUNob2ljZVNlcGFyYXRvclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbEFyci5zcGxpY2UocmVtb3ZlZEluZGV4LCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1ZhbCA9IHZhbEFyci5qb2luKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubXVsdGlwbGVDaG9pY2VTZXBhcmF0b3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaW5kaW5nRGF0YS5zZXRWYWx1ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoQXJyLmNvbmNhdChmaWVsZFBhdGhzKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuYmluZGluZ0RhdGEpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0ZXh0RmllbGRJbmRleCA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVscEZpZWxkcy5zcGxpY2UodGV4dEZpZWxkSW5kZXgsIDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaGVscEZpZWxkcy5mb3JFYWNoKChoZWxwRmllbGQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWFwRmllbGRzW2hlbHBGaWVsZF1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNwbGl0KFwiLFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZm9yRWFjaCgoZm9ybUZpZWxkOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbCA9IHRoaXMudXRpbHMuZ2V0VmFsdWUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUZpZWxkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmluZGluZ0RhdGFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWxBcnIgPSB2YWwuc3BsaXQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tdWx0aXBsZUNob2ljZVNlcGFyYXRvclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbEFyci5zcGxpY2UocmVtb3ZlZEluZGV4LCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1ZhbCA9IHZhbEFyci5qb2luKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubXVsdGlwbGVDaG9pY2VTZXBhcmF0b3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnV0aWxzLnNldFZhbHVlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmluZGluZ0RhdGEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUZpZWxkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1ZhbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIG9uQWxsQ2hpbGROb2Rlc0NsaWNrKCRldmVudDogYW55KSB7XHJcbiAgICAgICAgdGhpcy5pc0dldEFsbENoaWRsTm9kZXMgPSAhdGhpcy5pc0dldEFsbENoaWRsTm9kZXM7XHJcbiAgICB9XHJcbn1cclxuIl19