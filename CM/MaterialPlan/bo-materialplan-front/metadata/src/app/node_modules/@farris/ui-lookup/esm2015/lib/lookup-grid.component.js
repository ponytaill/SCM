/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/*
 * @Author: 疯狂秀才(lucas huang)
 * @Date: 2018-11-23 11:23:12
 * @LastEditors: 疯狂秀才(Lucas Huang)
 * @LastEditTime: 2020-10-20 20:18:26
 * @Company: Inspur
 * @Version: v0.3.x
 */
import { Component, Input, ViewChild, EventEmitter, Injector, ComponentFactoryResolver, Output, ChangeDetectorRef, ViewEncapsulation, ViewContainerRef, forwardRef, ElementRef, NgZone, Renderer2, } from "@angular/core";
import { NG_VALUE_ACCESSOR } from "@angular/forms";
import { of, Subject } from "rxjs";
import { LocaleService } from "@farris/ui-locale";
import { MessagerService } from "@farris/ui-messager";
import { LoadingService } from "@farris/ui-loading";
import { DataTableComponent } from "@farris/ui-datatable";
import { TreeTableComponent } from "@farris/ui-treetable";
import { LayoutPanelComponent } from "@farris/ui-layout";
import { CommonUtils, DebugService, FarrisComponentInstanceService, OverLayHiddenService } from "@farris/ui-common";
import { ShortcutsService } from "@farris/ui-shortcuts";
import { InputGroupComponent } from "@farris/ui-input-group";
import { NotifyService } from "@farris/ui-notify";
import { FAVORITE_FIELD_NAME, INPUT_GROUP_ICON, LookupGridDisplayType, QuickSelectDefaultOptions, } from "./lookup-displaytype";
import { LookupComponent } from "./lookup.component";
import { lookupGridDefaults, displayInfoDefault, LookupLayout, } from "./lookup-grid-options";
import { ServerSideToken } from "./http/ILookupHttpService";
import { LookupDefaultMapping } from "./lookup-defaut-mapping";
import { LookupUtils } from "./utils";
import { PersonalConfigService } from "./lookup-presonalConfig.service";
import { UtilService, TreeNodeHelper, FavoriteHelper, SelectionManager, DataTableEventManager, TreeTableEventManager, MultiSelectionManager, LookupHttpManager, LookupComponentManager, LookupDialogManager, onTextChanged, LookupSelectionService, } from "./services";
import { map } from "rxjs/operators";
import { EventManager } from "@angular/platform-browser";
import { cloneDeep } from "lodash-es";
/** @type {?} */
export const LOOKUPGRID_VALUE_ACCESSOR = {
    provide: NG_VALUE_ACCESSOR,
    useExisting: forwardRef((/**
     * @return {?}
     */
    () => LookupGridComponent)),
    multi: true,
};
export class LookupGridComponent extends LookupComponent {
    /**
     * @param {?} injector
     * @param {?} cfr
     * @param {?} el
     * @param {?} utils
     * @param {?} defaultMapping
     * @param {?} changeDetector
     * @param {?} shortcuts
     * @param {?} lookupUtils
     * @param {?} zone
     * @param {?} render2
     */
    constructor(injector, cfr, el, utils, defaultMapping, changeDetector, shortcuts, lookupUtils, zone, render2) {
        super(injector, el, changeDetector);
        this.injector = injector;
        this.cfr = cfr;
        this.el = el;
        this.utils = utils;
        this.defaultMapping = defaultMapping;
        this.changeDetector = changeDetector;
        this.shortcuts = shortcuts;
        this.lookupUtils = lookupUtils;
        this.zone = zone;
        this.render2 = render2;
        this.groupIcon = INPUT_GROUP_ICON;
        this._displayType = "";
        /**
         * 使用表单设计器中的显示类型。否则使用元数据设置的显示类型。 默认：false
         */
        this.customDisplayType = false;
        this.viewType = "text";
        /**
         * 启用清空按钮
         */
        this.enableClear = true;
        /**
         * 服务器端排序
         */
        this.remoteSort = true;
        /**
         * 树表显示全选复选框。 默认不显示
         */
        this.showCheckAll = false;
        /**
         * 是否启用多选
         */
        this.singleSelect = true;
        /**
         * 多选分隔符
         */
        this.multipleChoiceSeparator = ",";
        /**
         * 可以为元数据ID、webapiURL
         */
        this.uri = '';
        /**
         * BE REST RUI
         * - 此处设置后 uri 失效
         */
        this.beUri = "";
        /**
         * 显示过滤工具条
         */
        this.showFilterBar = true;
        /**
         * 是否启用分页
         */
        this.pagination = true;
        /**
         * 当前页索引，从 0开始
         */
        this.pageIndex = 1;
        /**
         * 每页记录数
         */
        this.pageSize = 20;
        /**
         * 可用分页记录数列表
         */
        this.pageList = [10, 20, 30, 50, 100];
        /**
         * 总记录数
         */
        this.total = 0;
        /** 可拖动列 */
        // @Input() resizableColumns = true;
        /**
         * 显示列信息, 默认为 []
         */
        this.columns = [];
        /**
         * 帮助查询是否为远端查询
         */
        this.remoteSearch = true;
        /**
         * 文本变化后，进行服务器端查询
         */
        this.searchOnServer = true;
        /**
         * 不进行服务器查询，有啥算啥
         */
        this.nosearch = false;
        /**
         * 启用任意输入后，值通过输入时触发
         */
        this.clearMappings = new EventEmitter();
        // 收藏列表
        this.favoriteItems = [];
        /**
         * 是否启用级联选择控制选项
         */
        this.enableCascade = false;
        /**
         * 级联控制默认值： enable: 同步选择, up：包含上级, down：包含下级, disable：仅选择自身
         */
        this.cascadeStatus = "enable";
        /**
         * 分别级联选项的启用状态，默认全部启用
         */
        this.cascadeItems = {
            enable: true,
            up: true,
            down: true,
            disable: true
        };
        /**
         * 显示级联控制
         */
        this.showCascadeControl = true;
        this.placeholder = "";
        /**
         * 显示已选记录列表。 默认为 false 不显示
         */
        this.showSelected = false;
        /**
         * 应用收藏夹
         */
        this.useFavorite = false;
        /**
         * 收藏数据来自于： locale: 本地存储， remote: 服务器端存储
         */
        this.favoriteDataFrom = "remote";
        /**
         * 使用提示,快捷选择
         */
        this.useTip = false;
        /**
         * 记录窗口大小
         */
        this.isRecordSize = false;
        /**
         * 是否启用选中value值对应的行数据，默认 true
         */
        this.enableToSelect = true;
        this.enableFindText = false;
        /**
         * -1: 不展开； 0: 全部展开；>0: 展开到指定级数
         */
        this.expandLevel = -1;
        this.navTreeTableOptions = {};
        this.treeTableOptions = {};
        this.dataTableOptions = {};
        this.defaultTreeTableOptions = {
            maxLevel: 9,
            enableContextMenu: false,
            contextMenuItems: [],
        };
        /**
         * 树形帮助数据加载方式： default: 内置取数； loadall: 加载所有 layerload：分层加载
         */
        this.loadTreeDataType = "default";
        /**
         * 窗口打开后立即加载数据，默认为 true
         */
        this.loadDataWhenOpen = true;
        /**
         * 导航列表，树列表在帮助打开后选中的数据;
         * 设置后，`selectFirstInNav` 失效！
         */
        this.navSelectedIds = "";
        /**
         * 导航帮助，选中第1条数据，默认为 false;
         * 注意：当`navSelectedIds`不为空时，此属性失效。
         */
        this.selectFirstInNav = false;
        /**
         * 启用构造完整树过滤
         */
        this.enableFullTree = true;
        /**
         * 显示文本自定义函数
         */
        this.displayFormatter = undefined;
        /**
         * 显示文本字段集合，以 英文 逗号隔开
         */
        this.displayFields = "";
        this.displayTextSeparator = "_";
        /**
         * 帮助元数据ID，不为空时调用指定的URI
         * /api/runtime/bcc/v1.0/help/data/{helpId}
         */
        this.helpId = "";
        /**
         * 文本对齐方式； left | center | right; 默认 left
         */
        this.textAlign = "left";
        /**
         * 鼠标滑过输入框时显示输入框内的文本信息
         */
        this.enableTitle = true;
        this.useExtendInfo = false;
        this.extInfoFields = "";
        this.extendInfo = "";
        /**
         * IDE 设计器自定义格式化 2103
         */
        this.customFormatter = null;
        this.customNavFormatter = null;
        /**
         * 自定义确定事件
         */
        this.okHandler = null;
        /**
         * 自定义取消事件
         */
        this.cancelHandler = null;
        this.tagboxHeight = "auto";
        /**
         * 启用获取所有子级数据的功能
         */
        this.enableGetAllChildNodes = true;
        this.shortcutKey = {
            /**
             * 打开帮助窗口
             */
            open: "ArrowRight",
            /**
             * 确认选择数据
             */
            confirm: "Enter",
            /**
             * 搜索框焦点
             */
            searchFocus: "F3",
            /**
             * 选中上一条
             */
            moveUp: "ArrowUp",
            /**
             * 选中下一条
             */
            moveDown: "ArrowDown",
            /**
             * 展开节点
             */
            expand: "ArrowRight",
            /**
             * 折叠节点
             */
            collapse: "ArrowLeft",
            /**
             * 下一页
             */
            nextPager: "PageDown",
            /**
             * 上一页
             */
            prevPager: "PageUp",
        };
        /**
         * 快捷选择相关配置项，默认为 null, 即不启用此功能
         */
        this.quickSelect = null;
        /**
         * 树形帮助 是否使用树形结构数据。默认为 true, 当为 false 时，服务器端无须构造树形结构，按普通列表输出
         */
        this.treeToList = false;
        this.navTreeToList = false;
        /**
         * 带导航的帮助中，是否显示左侧导航部分。默认 true
         */
        this.showNavigation = true;
        this.layoutFormat = LookupLayout.default;
        this.selectedData = new EventEmitter();
        this.clear = new EventEmitter();
        this.search = new EventEmitter();
        // 帮助文本框中值变化事件
        this.valueChanged = new EventEmitter();
        this.loadSuccess = new EventEmitter();
        this.pagerChanged = new EventEmitter();
        this.expandTreeNode = new EventEmitter();
        this.textChanged = new EventEmitter();
        this.checkedChange = new EventEmitter();
        this.tagRemoved = new EventEmitter();
        /**
         * 内容中留白边距
         */
        this.containerMargin = { top: 0, bottom: 5, left: 14, right: 14 };
        this.containerStyle = {};
        this._gridOptions = lookupGridDefaults;
        // 导航帮助左则宽度
        this.leftPanelWidth = 320;
        // 导航帮助窗口最小宽度
        this.navLookupDialogMinWidth = 960;
        this.navigationFilter = null;
        this.subscriptions = [];
        this.isTextChange = false;
        this.isTabChanged = false;
        this.displayInfo = Object.assign({}, displayInfoDefault);
        this.tabChangeSubscription = null;
        // 暂存行点击数据  用于收藏
        this.personalConf = {};
        this.favoriteColumns = [];
        /**
         * 临时查询参数
         */
        this._searchState = null;
        this.allData = [];
        this.allColumnsTitle = "所有列";
        this.mustWriteSomething = "请输入关键字后查询。";
        this.mustChoosAdatarow = "请选择一条记录！";
        this.addFavoriteSuccess = "收藏成功。";
        this.delFavoriteSuccess = "移除收藏成功。";
        /**
         * 使用内置的查询方法, 默认 false
         */
        this.useInsideSearchHandler = false;
        this.searching = false;
        /**
         * 临时存储查询结果集
         */
        this._searchResult = null;
        this.lookupinitializationSubject = new Subject();
        /**
         * 多选时，选中的数据
         */
        this.currentSelectedItems = of([]);
        /**
         * 已选数据列信息
         */
        this.selectedColumns = [];
        this.activeTab = "datalist";
        this.favHelper = null;
        this.ttEventMgr = null;
        this.multiSelMgr = null;
        this.httpMgr = null;
        this.lookupCmpMgr = null;
        this.dialogMgr = null;
        this.selectionMgr = null;
        this.dtEventMgr = null;
        this.lookupSelectionSer = null;
        this.controlId = "";
        this.savingFaoriteData = false;
        this.isReady = false;
        this.showTagboxClearButton = false;
        this.hasError = false;
        this.isGetAllChidlNodes = false;
        /**
         * 选中记录ID，自定义帮助取数时使用
         */
        this.selectedIds = [];
        this.lookupSearchInputEvent = null;
        this.farrisInstances = null;
        /**
         * 用户初始设置
         */
        this._userSettings = {};
        this._treeInfo_ = null;
        /**
         * dialog 内容区域高度。 弹窗总高度 - 头部高度 - 脚部高度 - （启用收藏 TAB头高度）
         */
        this.dialogContentHeight = 0;
        /**
         * 左树右列表， 左树点击节点查询时是否包括下级节点的数据，默认 false
         */
        this.includeSubordinates = false;
        this.includeSubordinates$ = new Subject();
        this.includeSubordinates$$ = null;
        this.debugSer = null;
        this.createInstance();
        this.currentSelectedItems = this.lookupSelectionSer.selected$;
        this.eventManager = this.injector.get(EventManager);
        this.farrisInstances = this.injector.get(FarrisComponentInstanceService, null);
        this.overLayService = new OverLayHiddenService();
        this.debugSer = this.injector.get(DebugService, null);
        if (this.debugSer) {
            this.debugSer.useDebugMode();
        }
    }
    /**
     * @return {?}
     */
    get displayType() {
        return this._displayType;
    }
    /**
     * @param {?} val
     * @return {?}
     */
    set displayType(val) {
        if (val) {
            /** @type {?} */
            const types = Object.values(LookupGridDisplayType);
            /** @type {?} */
            const i = types.findIndex((/**
             * @param {?} n
             * @return {?}
             */
            (n) => n === val.toUpperCase()));
            if (i > -1) {
                /** @type {?} */
                const keys = Object.keys(LookupGridDisplayType);
                this._displayType = LookupGridDisplayType[keys[i]];
            }
        }
        else {
            this._displayType = val;
        }
    }
    /**
     * @return {?}
     */
    get gridOptions() {
        if (this.useFavorite &&
            this.columns &&
            this.columns.length > 0 &&
            !this.columns.find((/**
             * @param {?} item
             * @return {?}
             */
            (item) => item.field === FAVORITE_FIELD_NAME))) {
            this.columns.push({
                field: FAVORITE_FIELD_NAME,
                title: "",
                width: 40,
                align: "center",
                fixed: 'right',
                // fixedWidth: true,
                formatter: this.favHelper.favoriteColumnFormatter,
            });
        }
        this._gridOptions = Object.assign(this._gridOptions, {
            singleSelect: this.singleSelect,
            idField: this.idField,
            uri: this.uri,
            showFilterBar: this.showFilterBar,
            pagination: this.pagination,
            pageIndex: this.pageIndex,
            pageSize: this.pageSize,
            pageList: this.pageList,
            total: this.total,
            items: this.items,
            columns: this.columns,
            resizableColumns: true,
            fixedHeader: true,
            hover: true,
            treeInfo: this.treeInfo,
        });
        return this._gridOptions;
    }
    /**
     * @param {?} opts
     * @return {?}
     */
    set gridOptions(opts) {
        this._gridOptions = Object.assign({}, this._gridOptions, opts);
        this.selectedColumns = this.multiSelMgr.initSelectedColumns();
    }
    /**
     * @return {?}
     */
    get selections() {
        /** @type {?} */
        const selectItems = this.lookupSelectionSer.getSelections();
        if (this.singleSelect) {
            return selectItems[0];
        }
        else {
            return selectItems;
        }
    }
    /**
     * @return {?}
     */
    get usePersionalConf() {
        return this.useFavorite || this.useTip || this.isRecordSize;
    }
    /**
     * @return {?}
     */
    get displayTextList() {
        if (this.displayText) {
            return this.displayText.split(this.multipleChoiceSeparator);
        }
        return [];
    }
    /**
     * @return {?}
     */
    get userInitialConfig() {
        return this._userSettings;
    }
    /**
     * @param {?} msg
     * @param {?=} type
     * @return {?}
     */
    writeConsole(msg, type = 'warn') {
        if (this.debugSer) {
            this.debugSer[type](msg);
        }
    }
    /**
     * @private
     * @return {?}
     */
    cacheUserConfig() {
        this._userSettings._title = this.title;
        this.displayInfo.title = this.title;
        this._userSettings._columns = this.deepClone(this.columns || []);
        this._userSettings.getColumns = (/**
         * @return {?}
         */
        () => {
            return this._userSettings._columns;
        });
        this._userSettings.reset = (/**
         * @return {?}
         */
        () => {
            this.title = this._userSettings._title;
            this.displayInfo.title = this.title;
            this.columns = this._userSettings.getColumns();
        });
    }
    /**
     * @private
     * @param {?} obj
     * @return {?}
     */
    deepClone(obj) {
        if (obj === null) {
            return null;
        }
        /** @type {?} */
        const clone = Object.assign({}, obj);
        Object.keys(clone).forEach((/**
         * @param {?} key
         * @return {?}
         */
        (key) => (clone[key] =
            typeof obj[key] === "object"
                ? this.deepClone(obj[key])
                : obj[key])));
        if (Array.isArray(obj)) {
            clone.length = obj.length;
            return Array.from(clone);
        }
        return clone;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        super.ngOnInit();
        this.cacheUserConfig();
        if (!this.loadTreeDataType) {
            this.loadTreeDataType = "default";
        }
        this.checkGridOptions();
        this.displayInfo.title = this.title;
        /** 传递上下文 */
        if (this.http) {
            this.http.context = this.context;
        }
        this.allColumnsTitle = this.localService.getValue("lookup.allColumns");
        this.mustWriteSomething = this.localService.getValue("lookup.mustWriteSomething");
        this.mustChoosAdatarow = this.localService.getValue("lookup.mustChoosAdatarow");
        this.addFavoriteSuccess =
            this.localService.getValue("lookup.favoriteInfo.addFav") ||
                this.addFavoriteSuccess;
        this.delFavoriteSuccess =
            this.localService.getValue("lookup.favoriteInfo.cancelFav") ||
                this.delFavoriteSuccess;
        this.dialogMgr.onDialogCreated();
        this._treeInfo_ = this.treeInfo ? cloneDeep(this.treeInfo) : null;
        if (this.quickSelect) {
            this.quickSelect = Object.assign({}, QuickSelectDefaultOptions, this.quickSelect || {});
        }
        /** 内容中留白边距 */
        this.setContainerMargin();
    }
    /**
     * @private
     * @return {?}
     */
    setContainerMargin() {
        /** @type {?} */
        const mrn = this.layoutFormat === 'default' ? 14 : 24;
        this.containerMargin = { top: 0, bottom: 5, left: mrn, right: mrn };
        this.containerStyle = {
            marginLeft: this.containerMargin.left + "px",
            marginRight: this.containerMargin.right + "px",
            marginTop: this.containerMargin.top + "px",
            marginBottom: this.containerMargin.bottom + "px",
        };
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        super.ngOnDestroy();
        this.subscriptions.forEach((/**
         * @param {?} n
         * @return {?}
         */
        (n) => {
            if (n) {
                n.unsubscribe();
                n = null;
            }
        }));
        if (this.selectionMgr) {
            this.selectionMgr.destroy();
        }
        this.subscriptions = [];
        if (this.farrisInstances) {
            this.farrisInstances.destroy(this.el.nativeElement);
        }
        if (this.lookupSearchInputEvent) {
            this.lookupSearchInputEvent();
        }
        this.lookupUtils.destroy();
        this.overLayService.destory(this.el.nativeElement);
        this.overLayService = null;
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    ngOnChanges(changes) {
        if (changes.columns && !changes.columns.isFirstChange()) {
            this.cacheUserConfig();
        }
        if (changes.layoutFormat && !changes.layoutFormat.isFirstChange()) {
            this.setContainerMargin();
        }
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        if (!this.quickSelect || !this.quickSelect.enable) {
            this.lookupSearchInputEvent = onTextChanged.bind(this)();
        }
        // 初始化个性化配置
        if (this.usePersionalConf) {
            this.favHelper.initPersonalInfo();
        }
        if (this.useExtendInfo) {
            /** @type {?} */
            const jsonData = this.selectionMgr.getBindingData();
            this.updateExtendInfo(jsonData, false);
        }
        if (this.viewType === "text") {
            // this.shortcuts.add({
            //     key: 'F2',
            //     target: this.inputGroup.textbox.nativeElement,
            //     command: () => {
            //         this.showDialog();
            //     }
            // });
            this.render2.listen(this.inputGroup.textbox.nativeElement, "keydown.F2", this.showDialog.bind(this));
        }
        else {
            this.registerMouseEventForTagView();
            if (this.tagboxHeight) {
                /** @type {?} */
                const el = this.tagbox.nativeElement.querySelector(".multi-more");
                /** @type {?} */
                let tbh = this.tagboxHeight;
                if (tbh !== "auto") {
                    tbh += "px";
                    if (this.maxTagboxHeight) {
                        this.render2.setStyle(el, "maxHeight", `${this.maxTagboxHeight}px`);
                    }
                }
                this.render2.setStyle(el, "height", tbh);
            }
        }
        if (this.el && this.farrisInstances) {
            this.farrisInstances.add(this.el.nativeElement, this);
        }
    }
    /**
     * @private
     * @return {?}
     */
    createInstance() {
        this.http = this.injector.get(ServerSideToken, null);
        this.messagerService = this.injector.get(MessagerService);
        this.loadingService = this.injector.get(LoadingService);
        this.notifyService = this.injector.get(NotifyService, null);
        this.personalConfigService = this.injector.get(PersonalConfigService, null);
        this.lookupSelectionSer = new LookupSelectionService(this);
        this.utilService = new UtilService(this);
        this.localService = this.injector.get(LocaleService);
        this.treeNodeHelper = new TreeNodeHelper(this);
        this.favHelper = new FavoriteHelper(this);
        this.ttEventMgr = new TreeTableEventManager(this);
        this.multiSelMgr = new MultiSelectionManager(this);
        this.httpMgr = new LookupHttpManager(this);
        this.lookupCmpMgr = new LookupComponentManager(this);
        this.dialogMgr = new LookupDialogManager(this);
        this.selectionMgr = new SelectionManager(this);
        this.dtEventMgr = new DataTableEventManager(this);
    }
    /**
     * @return {?}
     */
    showDialog() {
        if (this.disabled || this.readonly) {
            return false;
        }
        this.selectionMgr.initDisplayValue();
        this.dictPickingSubscription = this.dictPicking({
            instance: this,
        }).subscribe((/**
         * @param {?} pr
         * @return {?}
         */
        (pr) => {
            this.dialogMgr.canOpenDialog(pr);
        }));
        return false;
    }
    /**
     * 判断是否为双列表帮助
     * @return {?}
     */
    isDoublleList() {
        return ((this.displayType === LookupGridDisplayType.NavList ||
            this.displayType === LookupGridDisplayType.NavTreeList ||
            this.displayType === LookupGridDisplayType.NavListTree) && this.showNavigation);
    }
    /**
     * 判断是否显示为树帮助
     * @return {?}
     */
    isTree() {
        /** @type {?} */
        const dtyp = this.displayType.toUpperCase();
        return (dtyp === LookupGridDisplayType.TreeList || dtyp === LookupGridDisplayType.NavListTree);
    }
    /**
     * @param {?} e
     * @return {?}
     */
    onResized(e) {
        this.resizeCmp(e.size);
        this.resized.emit(e.size);
    }
    /**
     * @param {?} pos
     * @return {?}
     */
    onResizing(pos) {
        this.resizing.emit(pos.size);
        this.resizeCmp(pos.size);
        if (this.isDoublleList() && this.leftComponentRef) {
            this.leftComponentRef.instance.resize({
                width: this.leftPanel.width,
                height: this.dialogMgr.getHeight(),
            });
        }
    }
    /**
     * @param {?} pos
     * @return {?}
     */
    onMaxDialog(pos) {
        this.resizeCmp(pos.size);
        if (this.leftPanel) {
            this.leftComponentRef.instance.resize({
                width: this.leftPanel.width,
                height: this.dialogMgr.getHeight(),
            });
        }
        // tfs 543132 
        // this.dialogHeight = pos.size.height;
        this.dialogContentHeight = this.dialogMgr.resetDialogContentHeight();
        this.dialogMaxed.emit(pos.size);
    }
    /**
     * @param {?=} size
     * @return {?}
     */
    resizeCmp(size) {
        if (!this.componentRef || !this.componentRef.instance) {
            return;
        }
        if (!size) {
            size = this.dialog.size;
        }
        /** @type {?} */
        const _size = {
            width: size.width -
                this.containerMargin.left -
                this.containerMargin.right,
            height: this.dialogMgr.getHeight(),
        };
        if (this.useFavorite && this.favoritesComponentRef) {
            this.favoritesComponentRef.instance.resize(_size);
        }
        if (this.isRecordSize) {
            this.personalConf.size = this.dialog.size;
            this.personalConfigService.updatePersonalConfig({
                size: this.dialog.size,
            });
        }
        if (this.isDoublleList()) {
            _size.width = size.width - this.leftPanel.width - (this.layoutFormat === 'default' ? 20 : 48) - 7;
            ;
        }
        this.componentRef.instance.resize(_size);
    }
    /**
     * @private
     * @return {?}
     */
    checkGridOptions() {
        if (!this.gridOptions.idField) {
            this.writeConsole("未设置主键字段 idField");
        }
        if (!this.beforeSelectData) {
            this.beforeSelectData = (/**
             * @return {?}
             */
            () => {
                return of(true);
            });
        }
        /** @type {?} */
        const ctxMenuLanguages = this.localService.getValue("lookup.contextMenu");
        this.treeTableOptions = Object.assign({ language: ctxMenuLanguages }, this.defaultTreeTableOptions, this.treeTableOptions || {});
        // this.dataTableOptions = Object.assign({}, this.defaultTreeTableOptions, this.dataTableOptions);
        // this.navTreeTableOptions = Object.assign({}, this.defaultTreeTableOptions, this.navTreeTableOptions);
    }
    /**
     * @return {?}
     */
    getComponentType() {
        if (!this.displayType) {
            this.displayType = "LIST";
        }
        switch (this.displayType) {
            case LookupGridDisplayType.List:
            case LookupGridDisplayType.NavList:
            case LookupGridDisplayType.NavTreeList:
                return DataTableComponent;
            case LookupGridDisplayType.TreeList:
            case LookupGridDisplayType.NavListTree:
                return TreeTableComponent;
        }
    }
    /**
     * @param {?=} msg
     * @return {?}
     */
    showLoading(msg = "") {
        if (this.dialog && this.dialog.modalContent && !this.loading) {
            /** @type {?} */
            const opts = {
                container: this.dialog.modalContent,
                delay: 200,
            };
            if (msg) {
                opts["message"] = msg;
            }
            this.loading = this.loadingService.show(opts);
        }
        else {
            this.loading = this.loadingService.show();
        }
    }
    /**
     * @return {?}
     */
    closeLoading() {
        if (this.loading) {
            this.loading.close();
            this.loading = null;
        }
        this.loadingService.clearAll();
    }
    /**
     * @param {?} resdata
     * @return {?}
     */
    getSearchColumns(resdata) {
        /** @type {?} */
        const cols = resdata.columns || this.columns;
        if (resdata.searchFields) {
            return resdata.searchFields.map((/**
             * @param {?} sf
             * @return {?}
             */
            (sf) => {
                /** @type {?} */
                const c = cols.find((/**
                 * @param {?} col
                 * @return {?}
                 */
                (col) => col.field.toLowerCase() === sf.value.toLowerCase()));
                if (c) {
                    sf.label = c.title;
                }
                return sf;
            }));
        }
        else if (cols) {
            return cols
                .filter((/**
             * @param {?} c
             * @return {?}
             */
            (c) => c.searchField))
                .map((/**
             * @param {?} col
             * @return {?}
             */
            (col) => {
                return {
                    label: col.title,
                    value: col.field,
                };
            }));
        }
        return [];
    }
    /**
     * @private
     * @param {?} resData
     * @return {?}
     */
    initOptions(resData) {
        /** @type {?} */
        let obser = of(true);
        this.gridOptions.searchFields = this.getSearchColumns(resData);
        if (resData) {
            // 如果组件中未设置显示列，则使用服务器端返回的设置； 否则将使用组件中配置的展示列
            if ((!this.columns || !this.columns.length) &&
                resData.columns &&
                resData.columns.length) {
                this.columns = resData.columns;
            }
            this.setLookupTitleText(resData);
            if (this.isDoublleList() &&
                this.dialogWidth < this.navLookupDialogMinWidth &&
                !this.isRecordSize) {
                this.dialogWidth = this.navLookupDialogMinWidth;
                this.dialog.reSize({ width: this.dialogWidth });
            }
            if (!this.customDisplayType) {
                // this.displayType = resData.displayType || this.displayType || 'LIST';
                // if (this.treeToList) {
                //     this.displayType = this.isDoublleList() ? ' NAVLIST ': 'LIST';
                // }
                this.changeDetector.detectChanges();
                this.lookupCmpMgr.createComponentWithServerData(resData);
            }
            if (this.isDoublleList() && resData.navigation && !this.leftComponentRef) {
                this.navigationOptions = resData.navigation;
                this.navigationOptions.hover = true;
                this.navigationOptions.searchFields = this.getSearchColumns(this.navigationOptions);
                // update columns formatter
                if (this.customNavFormatter) {
                    this.navigationOptions.columns.forEach((/**
                     * @param {?} col
                     * @return {?}
                     */
                    (col) => {
                        if (this.customNavFormatter[col.field]) {
                            col.formatter = this.customNavFormatter[col.field];
                        }
                    }));
                    this.navigationOptions["rowStyler"] =
                        this.customNavFormatter.rowStyler;
                    this.navigationOptions["cellStyler"] =
                        this.customNavFormatter.cellStyler;
                }
                // 20210926 树导航帮助中 左侧树支持分层加载
                if (this.displayType === LookupGridDisplayType.NavTreeList) {
                    /** @type {?} */
                    let _nav_treeinfo_loadtype = this.navigationOptions.treeInfo.loadDataType;
                    if (this.loadTreeDataType !== "default") {
                        _nav_treeinfo_loadtype =
                            this.loadTreeDataType === "loadall"
                                ? "all"
                                : "async";
                    }
                    this.navigationOptions.treeInfo.loadDataType =
                        _nav_treeinfo_loadtype;
                }
                obser = this.lookupCmpMgr.createLeftComponent(this.navigationOptions);
            }
        }
        else {
            this.lookupCmpMgr.createContent(this.gridOptions);
            this.lookupCmpMgr.createFavoriteComponent();
        }
        if (this.isTextChange) {
            this.componentRef.instance.searchData.value = this.displayText;
        }
        else {
            if (this._searchState && this._searchState.value) {
                this.componentRef.instance.searchData.value = this._searchState.value;
            }
        }
        // update columns formatter
        if (this.customFormatter) {
            this.columns.forEach((/**
             * @param {?} col
             * @return {?}
             */
            (col) => {
                if (this.customFormatter[col.field]) {
                    col.formatter = this.customFormatter[col.field];
                }
            }));
            if (this.customFormatter.rowStyler) {
                this.componentRef.instance.rowStyler = this.customFormatter.rowStyler;
            }
            if (this.customFormatter.cellStyler) {
                this.componentRef.instance.cellStyler = this.customFormatter.cellStyler;
            }
        }
        else {
            if (resData.customStyles) {
                const { row: rowStylers, cell: cellStylers } = resData.customStyles;
                /** @type {?} */
                const filterFn = (/**
                 * @param {?} n
                 * @param {?} data
                 * @return {?}
                 */
                (n, data) => {
                    /** @type {?} */
                    const d = this.utils.getValue(n.field, data);
                    if (typeof d === 'boolean') {
                        if (n.value == '0' || n.value == '1' || n.value == 'true' || n.value == 'false') {
                            return d === (n.value == '0' || n.value == 'false') ? false : true;
                        }
                        return d === !!n.value;
                    }
                    return d === n.value;
                });
                if (rowStylers) {
                    this.componentRef.instance.rowStyler = (/**
                     * @param {?} __0
                     * @return {?}
                     */
                    ({ data }) => {
                        /** @type {?} */
                        const styleItem = rowStylers.find((/**
                         * @param {?} n
                         * @return {?}
                         */
                        n => {
                            return filterFn(n, data);
                        }));
                        if (styleItem) {
                            return styleItem.styles;
                        }
                        return null;
                    });
                }
                if (cellStylers) {
                    this.componentRef.instance.cellStyler = (/**
                     * @param {?} e
                     * @param {?} field
                     * @return {?}
                     */
                    (e, field) => {
                        const { data } = e;
                        /** @type {?} */
                        const styleItem = cellStylers.filter((/**
                         * @param {?} n
                         * @return {?}
                         */
                        n => n.field === field)).find((/**
                         * @param {?} t
                         * @return {?}
                         */
                        t => {
                            return filterFn(t, data);
                        }));
                        if (styleItem) {
                            return styleItem.styles;
                        }
                        return null;
                    });
                }
            }
        }
        // this.changeDetector.detectChanges();
        return obser;
    }
    /**
     * 设置帮助窗口标题
     * @private
     * @param {?} resData
     * @return {?}
     */
    setLookupTitleText(resData) {
        if (resData.displayInfo) {
            this.displayInfo = resData.displayInfo;
        }
        // 如果自定义标题，将以此标题为准。否则加载服务器端返回的数据
        if (this.title && this.title !== "此处显示帮助标题") {
            this.displayInfo.title = this.title;
        }
        if (this.displayInfo && resData.title) {
            if (!this.displayInfo.title) {
                this.displayInfo.title = resData.title;
            }
        }
    }
    /**
     * @private
     * @return {?}
     */
    showGetAllChildrenCheckbox() {
        if (this.isTree() && this.treeInfo) {
            this.enableGetAllChildNodes =
                this.treeInfo.loadDataType !== "all" && this.treeInfo.layerType === "pathcode";
        }
        else {
            this.enableGetAllChildNodes = false;
        }
    }
    /**
     * @return {?}
     */
    initData() {
        /** @type {?} */
        const observer = {
            next: (/**
             * @param {?} data
             * @return {?}
             */
            (data) => {
                if (data === false) {
                    if (!this.columns || !this.columns.length) {
                        this.closeLoading();
                        this.closeDialog();
                        if (!this.messagerService.modals || !this.messagerService.modals.length) {
                            this.notifyService.error({ msg: this.localService.getValue('lookup.configError'), timeout: 3000 });
                        }
                        return;
                    }
                }
                // 服务器端发生错误，返回NULL 时，直接关闭窗口
                if (data === null) {
                    this.isShow = false;
                    if (this.dialog) {
                        this.dialog.close();
                    }
                    return;
                }
                this.initOptions(data).subscribe((/**
                 * @return {?}
                 */
                () => {
                    this.selectedColumns =
                        this.multiSelMgr.initSelectedColumns();
                    this.favoriteColumns = this.favHelper.getFavoriteColumns();
                    if (this.usePersionalConf) {
                        if (!this.personalConfigService.getPersonalData()) {
                            this.personalConfigService.savePersonalConfig(this.personalConf);
                        }
                    }
                    if (!this.isTabChanged) {
                        this.lookupSelectionSer.loadSelections(data.selectedItems || []);
                    }
                    if (this.isDoublleList()) {
                        // 导航帮助时，设置左侧选中数据时，不加载主数据列表。
                        if (this.navSelectedIds || this.selectFirstInNav) {
                            this.loadDataWhenOpen = false;
                        }
                    }
                    if (data['activeTab'] && !this.isTabChanged) {
                        this.activeTab = 'datalist';
                        if (this.personalConf && this.personalConf.tabIndex !== this.activeTab) {
                            this.personalConf.tabIndex = this.activeTab;
                        }
                    }
                    this.loadData(data);
                    if (this.isTree()) {
                        if (this.activeTab === "datalist") {
                            /** @type {?} */
                            const tt = (/** @type {?} */ (this.componentRef.instance));
                            if (tt.searchData.value && this.items && this.items.length) {
                                if (this.items[0].children && this.items[0].children.length) {
                                    tt.toggleExpand(this.items[0], true, false);
                                }
                            }
                        }
                        this.showGetAllChildrenCheckbox();
                    }
                    this.isTextChange = false;
                    this._searchResult = null; // 清空临时查询 结果
                    this.closeLoading();
                    // this.isReady$.next(true);
                    this.isReady = true;
                    this.changeDetector.detectChanges();
                    this.lookupinitializationSubject.next();
                }));
            }),
            error: (/**
             * @param {?} err
             * @return {?}
             */
            (err) => {
                // this.isReady$.next(true);
                this.closeLoading();
                this._searchResult = null; // 清空临时查询 结果
                this.isTextChange = false;
                this.hasError = true;
                this.changeDetector.detectChanges();
                if (typeof err === "string") {
                    this.messagerService.error(err);
                }
                else {
                    if (err) {
                        if (err.Message) {
                            this.messagerService.error(err.Message);
                        }
                        else {
                            if (err.error) {
                                this.messagerService.exception(err.error);
                            }
                            else {
                                this.messagerService.error("应用服务器错误,请联系系统管理员！");
                            }
                        }
                    }
                }
            }),
        };
        /** @type {?} */
        let p = {
            pageInfo: {
                pageSize: this.pageSize || 20,
                pageIndex: 1,
            },
        };
        /** @type {?} */
        let t = "all";
        if (this.isTextChange) {
            this._searchState = {
                field: "*",
                value: this.displayText
            };
        }
        if (this._searchState && this._searchState.value) {
            p['search'] = this._searchState;
            t = 'search';
        }
        if (!this.isTabChanged && this.enableToSelect) {
            /** @type {?} */
            const vals = this.selectionMgr.getSelectedIds();
            if (vals && vals.length) {
                p["selectedInfo"] = {
                    selected: true,
                    selectedIds: vals,
                };
            }
            else {
                if (this["selectedIds"]) {
                    p["selectedInfo"] = {
                        selected: true,
                        selectedIds: this["selectedIds"],
                    };
                }
            }
        }
        this.showLoading();
        this.hasError = false;
        this.httpMgr.lookupRequest(p, t).pipe(map((/**
         * @param {?} restData
         * @return {?}
         */
        (restData) => {
            if (restData) {
                restData.selectedItems = restData["selectedData"] || [];
            }
            else {
                if (restData && typeof restData === "object") {
                    restData.selectedItems = [];
                }
            }
            return restData === null ? false : restData;
        }))).subscribe(observer);
    }
    /**
     * @param {?=} resData
     * @param {?=} rebindEvent
     * @return {?}
     */
    loadData(resData, rebindEvent = true) {
        if (this.activeTab === "datalist") {
            if (this.useFavorite && !this.isTree()) {
                this.favHelper.updateFavoritesStatus(resData.items);
            }
            switch (this.displayType) {
                case LookupGridDisplayType.NavList:
                case LookupGridDisplayType.NavTreeList:
                case LookupGridDisplayType.List:
                    this.loadDataTableData(resData);
                    if (rebindEvent) {
                        this.dtEventMgr.bindDataTableEvent();
                    }
                    break;
                case LookupGridDisplayType.TreeList:
                case LookupGridDisplayType.NavListTree:
                    this.loadTreeTableData(resData, rebindEvent);
                    break;
            }
        }
        else if (this.activeTab === "favorite") {
            this.loadFavData(resData);
        }
        // 选中数据
        this.selectionMgr.selectCurrentValue();
    }
    /**
     * @private
     * @param {?} result
     * @return {?}
     */
    loadFavData(result) {
        // 加载收藏数据
        if (this.useFavorite) {
            if (this.isTree()) {
                this.setTreeInfo(result);
                /** @type {?} */
                const treeNodes = this.favHelper.initFavoriteTreeData(result.items);
                /** @type {?} */
                const treeData = this.treeNodeHelper
                    .flatTreeNodes(treeNodes)
                    .map((/**
                 * @param {?} n
                 * @return {?}
                 */
                (n) => {
                    n.data["_addtional_"] = n["addtional"];
                    return n.data;
                }));
                this.lookupSelectionSer.initFavoriteItems(treeData);
                setTimeout((/**
                 * @return {?}
                 */
                () => {
                    this.favoritesComponentRef.instance.scrollToY(1);
                }));
            }
            else {
                this.lookupSelectionSer.initFavoriteItems(result.items);
            }
            this.favHelper.loadFavoritesData(result);
        }
    }
    /**
     * @param {?=} resData
     * @return {?}
     */
    loadDataTableData(resData) {
        if (resData) {
            if (this.useFavorite && !this.isTree()) {
                this.favHelper.updateFavoritesStatus(resData.items);
            }
            if (this.gridOptions) {
                if (resData && resData.columns && resData.columns.length) {
                    if (!this.gridOptions.columns ||
                        !this.gridOptions.columns.length) {
                        this.columns = resData.columns;
                    }
                }
                this.items = resData.items;
                this.total = resData.total || resData.items.length;
                if (resData.searchFields) {
                    this.gridOptions.searchFields = this.getSearchColumns(resData);
                }
                if (resData.pageInfo) {
                    if (resData.pageInfo.pageList &&
                        (!this.pageList || !this.pageList.length)) {
                        this.pageList = resData.pageInfo.pageList;
                    }
                    this.pagination = resData.pageInfo.enablePager;
                    this.pageIndex = resData.pageInfo.pageIndex;
                    this.pageSize = resData.pageInfo.pageSize;
                }
                else {
                    this.pagination = false;
                }
            }
            else {
                this.gridOptions = (/** @type {?} */ (resData));
            }
        }
        this.updateDataTable(this.gridOptions);
    }
    /**
     * @private
     * @param {?} opts
     * @return {?}
     */
    updateDataTable(opts) {
        if (opts) {
            /** @type {?} */
            const dt = (/** @type {?} */ (this.componentRef.instance));
            if (!dt.columns || dt.columns.length === 0) {
                dt.columns = this.gridOptions.columns;
            }
            dt.allColumnsTitle = this.allColumnsTitle;
            dt.searchFields = opts.searchFields;
            dt.pagination = opts.pagination;
            dt.pageList = this.pageList;
            dt.remoteSort = this.remoteSort;
            if (this.loadDataWhenOpen) {
                dt.loadData({
                    pageSize: opts.pageSize,
                    pageIndex: this.gridOptions.pageIndex,
                    total: this.gridOptions.total,
                    data: this.gridOptions.items,
                });
                dt.cd.markForCheck();
            }
            this.loadSuccess.emit();
        }
    }
    /**
     * @private
     * @param {?} resData
     * @return {?}
     */
    setTreeInfo(resData) {
        if (!resData) {
            return;
        }
        /** @type {?} */
        let _treeInfo = null;
        if (resData.treeInfo) {
            /** @type {?} */
            const onlySelectLeaf = resData.treeInfo.onlySelectLeaf;
            /** @type {?} */
            let _osl = "no";
            if (onlySelectLeaf !== undefined) {
                _osl = onlySelectLeaf ? "yes" : "no";
            }
            _treeInfo = Object.assign({}, resData.treeInfo, { onlySelectLeaf: _osl });
        }
        if (this.gridOptions.treeInfo) {
            /** @type {?} */
            const treeInfo = this.gridOptions.treeInfo;
            if (treeInfo) {
                if (treeInfo.onlySelectLeaf === undefined ||
                    treeInfo.onlySelectLeaf === null) {
                    treeInfo.onlySelectLeaf = "no";
                }
                if (typeof treeInfo.onlySelectLeaf === "boolean") {
                    treeInfo.onlySelectLeaf = treeInfo.onlySelectLeaf ? "yes" : "no";
                }
                // 20210902
                if (this.loadTreeDataType === "default") {
                    treeInfo.loadDataType = _treeInfo.loadDataType;
                }
                else {
                    treeInfo.loadDataType =
                        this.loadTreeDataType === "loadall" ? "all" : "async";
                }
                if (treeInfo.onlySelectLeaf !== "default") {
                    _treeInfo = Object.assign(_treeInfo, treeInfo);
                }
            }
        }
        this.treeInfo = _treeInfo;
    }
    /**
     * @private
     * @param {?=} resData
     * @param {?=} rebindEvent
     * @return {?}
     */
    loadTreeTableData(resData, rebindEvent = true) {
        /** @type {?} */
        const items = resData ? resData.items : this.gridOptions.items;
        this.items = items;
        if (resData) {
            this.setTreeInfo(resData);
            /** @type {?} */
            const treeInfo = this.gridOptions.treeInfo;
            if (!treeInfo["treeDataIsInit"]) {
                if (treeInfo.layerType.toLowerCase() === "pathcode") {
                    this.items = this.lookupUtils.makeTree(this.items, treeInfo);
                }
                else {
                    this.items = this.lookupUtils.makeTreeWithParentID(this.items, "", treeInfo.dataField ? `${treeInfo.dataField}.${treeInfo.parentField}` : treeInfo.parentField, this.idField);
                }
            }
        }
        if (this.componentRef.instance instanceof TreeTableComponent) {
            /** @type {?} */
            const tt = (/** @type {?} */ (this.componentRef.instance));
            if (this.treeInfo) {
                tt.loadDataType = this.treeInfo.loadDataType;
            }
            if (!this.columns || !this.columns.length) {
                tt.columns = resData.columns || [];
                this.gridOptions.columns = tt.columns;
            }
            /** @type {?} */
            const isLoadAllTreeData = (/**
             * @return {?}
             */
            () => {
                if (this.loadTreeDataType === "default") {
                    return tt.loadDataType === "all";
                }
                else {
                    return this.loadTreeDataType === "loadall";
                }
            });
            if (rebindEvent) {
                this.ttEventMgr.bindTreetableEvent();
            }
            /** @type {?} */
            const isLoadAll = isLoadAllTreeData();
            /** 完整树节点检查 By Lucas 20200302 */
            this.items = this.checkNodeCanBeSelect(this.items, isLoadAll);
            tt.keepSelect = true;
            if (this.useFavorite) {
                this.favHelper.updateFavoritesStatus(this.items);
            }
            if (this.loadDataWhenOpen) {
                tt.loadData(this.items);
            }
            tt.resize();
        }
    }
    /**
     * 在构完整树中，有部分节点因为条件被过滤，为显示完整树，
     * 这些节点在运行时是不允许被选中的, 返回新的节点数组
     * By Lucas 20200302
     * @param {?} nodes
     * @param {?=} isAllTreeData
     * @return {?}
     */
    checkNodeCanBeSelect(nodes, isAllTreeData = false) {
        if (nodes && nodes.length) {
            return nodes.map((/**
             * @param {?} node
             * @return {?}
             */
            (node) => {
                if (node.hasOwnProperty("addtional")) {
                    node.selectable = !node["addtional"];
                }
                if (node.children && node.children.length) {
                    this.checkNodeCanBeSelect(node.children, isAllTreeData);
                }
                else {
                    if (isAllTreeData && (!this._searchState || !this._searchState.value)) {
                        node.leaf = true;
                    }
                }
                return node;
            }));
        }
        return nodes;
    }
    /**
     * @param {?} val
     * @return {?}
     */
    onChanges(val) {
        if (!val) {
            this.onClear();
        }
        else {
            this.displayText = val;
            this.isTextChange = this.originalText !== this.displayText;
            if (this.nosearch) {
                this.setModelValue(val);
                this.clearMappings.emit({ instance: this, value: val, });
            }
            this.onModelTouched(val);
            this.valueChanged.emit(val);
            this.textChanged.emit(val);
        }
    }
    /**
     * @param {?=} emit
     * @return {?}
     */
    onClear(emit = true) {
        this.isTextChange = false;
        this.displayText = "";
        this.displayValue = "";
        this.originalText = "";
        this.extendInfo = "";
        this.setModelValue("");
        if (this.mappingFn) {
            this.mappingFn(null, this.mapFields);
        }
        else {
            if (this.mapFields) {
                /** @type {?} */
                const bindingData = this.selectionMgr.getBindingData();
                if (bindingData) {
                    this.defaultMapping.lookupFieldMap(null, this.mapFields, bindingData);
                }
            }
        }
        this.multiSelMgr.clear();
        if (emit) {
            this.clear.emit();
        }
    }
    /**
     * @param {?=} emit
     * @return {?}
     */
    clearValue(emit = true) {
        this.onClear(emit);
    }
    /**
     * @param {?=} rowData
     * @return {?}
     */
    selectItem(rowData) {
        /** @type {?} */
        let selectedRow = null;
        if (rowData) {
            selectedRow = rowData;
        }
        else {
            selectedRow = this.selections;
            if (!selectedRow) {
                selectedRow = null;
            }
            else {
                if (Array.isArray(selectedRow) && !selectedRow.length) {
                    selectedRow = null;
                }
            }
        }
        this._searchState = {
            field: '*',
            value: ''
        };
        // 如果定义自定义处理确定事件，则由自定义事件处理后面的逻辑
        if (this.okHandler) {
            this.okHandler({ data: selectedRow, instance: this });
        }
        else {
            if (this.beforeSelectData) {
                /** @type {?} */
                const bsdResult = this.beforeSelectData({
                    instance: this,
                    data: selectedRow,
                });
                if (bsdResult && bsdResult.subscribe) {
                    bsdResult.subscribe((/**
                     * @param {?} e
                     * @return {?}
                     */
                    (e) => {
                        this._beforeSelectDataCallBack(e, selectedRow);
                    }));
                }
                else {
                    this.writeConsole('帮助数据选中前事件未返回值或返回类型非Observable, 请检查', 'error');
                }
            }
            else {
                this._beforeSelectDataCallBack(true, selectedRow);
            }
        }
    }
    /**
     * @param {?} data
     * @param {?=} treeInfo
     * @return {?}
     */
    getPathCode(data, treeInfo = null) {
        return this.lookupUtils.getPathCode(data, treeInfo || this.treeInfo);
    }
    /**
     * @param {?} data
     * @param {?=} treeInfo
     * @return {?}
     */
    getLayerData(data, treeInfo = null) {
        return this.lookupUtils.getLayerData(data, treeInfo || this.treeInfo);
    }
    /**
     * @private
     * @param {?} rows
     * @return {?}
     */
    getParentPathCode(rows) {
        /** @type {?} */
        const maxBy = (/**
         * @param {?} arr
         * @param {?} fn
         * @return {?}
         */
        (arr, fn) => Math.max(...arr.map(typeof fn === "function" ? fn : (/**
         * @param {?} val
         * @return {?}
         */
        (val) => val[fn]))));
        // const { dataField, pathField, layerField } = this.treeInfo;
        /** @type {?} */
        const maxLayer = maxBy(rows, (/**
         * @param {?} x
         * @return {?}
         */
        (x) => this.getLayerData(x)));
        for (let i = 1; i <= maxLayer; i++) {
            /** @type {?} */
            const _rows = rows.filter((/**
             * @param {?} n
             * @return {?}
             */
            (n) => this.getLayerData(n) === i));
            if (_rows && _rows.length && _rows.length < rows.length) {
                _rows.forEach((/**
                 * @param {?} r
                 * @return {?}
                 */
                (r) => {
                    /** @type {?} */
                    const patchCode = this.getPathCode(r);
                    /** @type {?} */
                    const _rows2 = rows.filter((/**
                     * @param {?} n
                     * @return {?}
                     */
                    (n) => {
                        /** @type {?} */
                        var _pc = this.getPathCode(n);
                        return _pc !== patchCode && _pc.indexOf(patchCode) === 0;
                    }));
                    if (_rows2 && _rows2.length) {
                        rows = rows.filter((/**
                         * @param {?} n
                         * @return {?}
                         */
                        (n) => this.getPathCode(n) !== patchCode));
                    }
                }));
            }
        }
        return rows;
    }
    /**
     * @private
     * @param {?} e
     * @param {?} selectedRow
     * @return {?}
     */
    _beforeSelectDataCallBack(e, selectedRow) {
        /** @type {?} */
        let canSelect = e;
        /** @type {?} */
        let message = "";
        if (typeof e === "boolean") {
            canSelect = e;
        }
        else {
            if (typeof e === "object") {
                canSelect = e.canSelect;
                message = e.message;
            }
            else {
                canSelect = false;
            }
        }
        if (!selectedRow) {
            message = this.mustChoosAdatarow;
            canSelect = false;
        }
        if (canSelect) {
            /** @type {?} */
            let selectedRows$ = of(selectedRow);
            // 多选 树帮助 异步加载 分级码 开启同步选择 或包含下级
            if (!this.singleSelect && this.enableCascade && this.isTree()) {
                if (this.treeInfo.loadDataType !== "all" && this.treeInfo.layerType === "pathcode" && this.isGetAllChidlNodes) {
                    /** @type {?} */
                    let parentsIds = this.getParentPathCode(selectedRow);
                    if (parentsIds && parentsIds.length) {
                        parentsIds = parentsIds.map((/**
                         * @param {?} n
                         * @return {?}
                         */
                        (n) => this.getPathCode(n)));
                        this.showLoading();
                        selectedRows$ = this.httpMgr
                            .getData({ parentsIds }, "allChildren")
                            .pipe(map((/**
                         * @param {?} r
                         * @return {?}
                         */
                        (r) => {
                            /** @type {?} */
                            const items = r.items
                                ? r.items.map((/**
                                 * @param {?} d
                                 * @return {?}
                                 */
                                (d) => d.data))
                                : [];
                            /** @type {?} */
                            const allitems = [...selectedRow, ...items];
                            /** @type {?} */
                            let ids = allitems.map((/**
                             * @param {?} n
                             * @return {?}
                             */
                            (n) => n[this.idField]));
                            ids = Array.from(new Set(ids));
                            return ids.map((/**
                             * @param {?} n
                             * @return {?}
                             */
                            (n) => allitems.find((/**
                             * @param {?} a
                             * @return {?}
                             */
                            (a) => a[this.idField] === n))));
                        })));
                    }
                }
            }
            selectedRows$.subscribe((/**
             * @param {?} rows
             * @return {?}
             */
            (rows) => {
                this.closeLoading();
                this.updateControlValue(rows);
                if (!this.useTip || !rows) {
                    return;
                }
                if (this.useTip) {
                    this.personalConfigService.updateQueckSelected(rows, this.localService.localeId);
                }
            }));
        }
        else {
            if (message) {
                if (this.notifyService) {
                    this.notifyService.warning(message);
                }
                else {
                    this.messagerService.warning(message, "", true, (/**
                     * @return {?}
                     */
                    () => {
                        this.dialog.el.nativeElement.click();
                    }));
                }
            }
        }
    }
    /**
     * @private
     * @param {?} selectedRow
     * @return {?}
     */
    updateControlValue(selectedRow) {
        if (selectedRow) {
            this.setDisplayText(selectedRow);
            if (this.mappingFn) {
                this.mappingFn(selectedRow, this.mapFields, this.bindingData);
            }
            else {
                if (this.mapFields && this.bindingData) {
                    this.defaultMapping.lookupFieldMap(selectedRow, this.mapFields, this.bindingData);
                }
            }
            this.setModelValue(this.displayText);
            if (this["inDatagrid"] && selectedRow) {
                /** @type {?} */
                const selectItems = Array.isArray(selectedRow)
                    ? selectedRow
                    : [selectedRow];
                this.updateBindData(selectItems);
            }
            this.selectedData.emit(selectedRow);
            this.runDictPickedEvent(selectedRow);
            this.isTextChange = false;
        }
        else {
            if (document.activeElement) {
                ((/** @type {?} */ (document.activeElement))).blur();
            }
            this.messagerService.warning(this.mustChoosAdatarow);
        }
    }
    /**
     * @private
     * @param {?} selectedRow
     * @return {?}
     */
    updateBindData(selectedRow) {
        if (!this.mapFields) {
            return;
        }
        /** @type {?} */
        const helpFields = Object.keys(this.mapFields);
        if (this.ngControl &&
            this.ngControl.formDirective &&
            this.ngControl.formDirective.form &&
            this.ngControl.formDirective.form.bindingData) {
            /** @type {?} */
            const bindingData = this.ngControl.formDirective.form.bindingData;
            if (bindingData) {
                helpFields.forEach((/**
                 * @param {?} helpField
                 * @return {?}
                 */
                (helpField) => {
                    this.mapFields[helpField]
                        .split(",")
                        .forEach((/**
                     * @param {?} formField
                     * @return {?}
                     */
                    (formField) => {
                        /** @type {?} */
                        const val = selectedRow
                            .map((/**
                         * @param {?} r
                         * @return {?}
                         */
                        (r) => {
                            return this.utils.getValue(helpField, r);
                        }))
                            .join(this.multipleChoiceSeparator);
                        this.utils.setValue(bindingData, formField, val);
                    }));
                }));
            }
            // if (bindingData.setValue) {
            //     const bindingPath = this.ngControl.formDirective.form.bindingPath;
            //     let pathArr: string[] = [];
            //     if (bindingPath) {
            //         pathArr = bindingPath.split('/').filter(n => n !== '');
            //     }
            //     helpFields.forEach((helpField: any) => {
            //         this.mapFields[helpField].split(',').forEach((formField: any) => {
            //             const fieldPaths = pathArr.concat(formField.split('.'));
            //             const val = selectedRow.map(r => {
            //                 return this.utils.getValue(formField, r);
            //             }).join(this.multipleChoiceSeparator);
            //             bindingData.setValue(pathArr.concat(fieldPaths), val, true, true);
            //         });
            //     });
            // }
        }
        else {
            // if (this.bindingData) {
            //     helpFields.forEach((helpField: any) => {
            //         this.mapFields[helpField].split(',').forEach((formField: any) => {
            //             const val = selectedRow.map(r => {
            //                 return this.utils.getValue(formField, r);
            //             }).join(this.multipleChoiceSeparator);
            //             this.utils.setValue(this.bindingData, formField, val);
            //         });
            //     });
            // }
        }
    }
    /**
     * @private
     * @param {?=} isHelpData
     * @return {?}
     */
    getExtendInfoFields(isHelpData = true) {
        if (!this.extInfoFields) {
            this.writeConsole(`未设置扩展字段。`);
            return [];
        }
        /** @type {?} */
        const tipFieldArr = this.extInfoFields.split(",");
        if (isHelpData) {
            /** @type {?} */
            let extendInfoFields = [];
            extendInfoFields = tipFieldArr.map((/**
             * @param {?} tf
             * @return {?}
             */
            (tf) => {
                /** @type {?} */
                const mapKey = Object.keys(this.mapFields).find((/**
                 * @param {?} k
                 * @return {?}
                 */
                (k) => {
                    return this.mapFields[k] === tf;
                }));
                if (mapKey) {
                    return mapKey;
                }
                else {
                    this.writeConsole(`在帮助映射字段中未找到${tf}`);
                    return "";
                }
            }));
            return extendInfoFields;
        }
        return tipFieldArr;
    }
    /**
     * @return {?}
     */
    onUpdateExtendInfo() {
        /** @type {?} */
        const jsonData = this.selectionMgr.getBindingData();
        this.updateExtendInfo(jsonData, false);
    }
    // 选中帮助数据后，更新扩展信息
    /**
     * @private
     * @param {?} data
     * @param {?=} isHelpData
     * @return {?}
     */
    updateExtendInfo(data, isHelpData = true) {
        if (data) {
            if (this.extInfoFormatter) {
                if (Array.isArray(data)) {
                    /** @type {?} */
                    const tipString = data.map((/**
                     * @param {?} n
                     * @return {?}
                     */
                    (n) => {
                        return this.getExtendInfoText(n);
                    }));
                    this.extendInfo = tipString.join("，");
                }
                else {
                    this.extendInfo = this.getExtendInfoText(data);
                }
            }
            else {
                /** @type {?} */
                const extendInfoFields = this.getExtendInfoFields(isHelpData);
                if (extendInfoFields && extendInfoFields.length) {
                    if (Array.isArray(data)) {
                        /** @type {?} */
                        const tipString = data.map((/**
                         * @param {?} n
                         * @return {?}
                         */
                        (n) => {
                            return this.getExtendInfoText(n, extendInfoFields);
                        }));
                        this.extendInfo = tipString.join("，");
                    }
                    else {
                        this.extendInfo = this.getExtendInfoText(data, extendInfoFields);
                    }
                }
            }
        }
    }
    /**
     * @private
     * @param {?} itemData
     * @param {?=} fields
     * @return {?}
     */
    getExtendInfoText(itemData, fields = null) {
        if (typeof this.extInfoFormatter === "function") {
            return this.extInfoFormatter({
                bindingData: itemData,
                instance: this,
            });
        }
        else {
            /** @type {?} */
            const tipString = [];
            /** @type {?} */
            const tipValues = fields.map((/**
             * @param {?} t
             * @return {?}
             */
            (t) => {
                /** @type {?} */
                const tfv = this.utils.getValue(t, itemData);
                tipString.push(tfv);
                return { [t]: tfv };
            }));
            return tipString.join(" ");
        }
    }
    /**
     * @private
     * @param {?} rows
     * @return {?}
     */
    getDisplayText(rows) {
        /** @type {?} */
        const df = this.displayFields
            ? this.displayFields.split(",")
            : [this.textField];
        /** @type {?} */
        const txtArr = rows.map((/**
         * @param {?} r
         * @return {?}
         */
        (r) => {
            /** @type {?} */
            const t = [];
            df.forEach((/**
             * @param {?} n
             * @return {?}
             */
            (n) => {
                t.push(this.utils.getValue(n, r));
            }));
            return t.join(this.displayTextSeparator);
        }));
        if (this.gridOptions.singleSelect) {
            return txtArr.join("");
        }
        else {
            if (this.displayFields) {
                return txtArr.map((/**
                 * @param {?} t
                 * @return {?}
                 */
                (t) => "[" + t + "]")).join(",");
            }
            else {
                return txtArr.join(",");
            }
        }
    }
    /**
     * @private
     * @param {?} selectedRow
     * @return {?}
     */
    setDisplayText(selectedRow) {
        this.originalText = this.displayText;
        if (this.gridOptions.singleSelect) {
            if (this.displayFormatter) {
                this.displayText = this.utils.getValue(this.textField, selectedRow);
                if (!this.isTree()) {
                    this.displayText = this.displayFormatter(this.displayText, [selectedRow], {
                        lookup: this,
                        datatable: (/** @type {?} */ (this.componentRef
                            .instance)),
                    });
                }
                else {
                    /** @type {?} */
                    const tt = (/** @type {?} */ (this.componentRef.instance));
                    this.displayText = this.displayFormatter(this.displayText, [selectedRow], { lookup: this, tree: tt });
                }
            }
            else {
                this.displayText = this.getDisplayText([selectedRow]);
            }
            this.displayValue = selectedRow[this.valueField || this.idField];
        }
        else {
            if (selectedRow.length) {
                if (this.displayFormatter) {
                    this.displayText = selectedRow
                        .map((/**
                     * @param {?} r
                     * @return {?}
                     */
                    (r) => {
                        return this.utils.getValue(this.textField, r);
                    }))
                        .join(this.multipleChoiceSeparator);
                    if (!this.isTree()) {
                        this.displayText = this.displayFormatter(this.displayText, selectedRow, {
                            lookup: this,
                            datatable: (/** @type {?} */ (this.componentRef
                                .instance)),
                        });
                    }
                    else {
                        /** @type {?} */
                        const tt = (/** @type {?} */ (this.componentRef
                            .instance));
                        this.displayText = this.displayFormatter(this.displayText, selectedRow, { lookup: this, tree: tt });
                    }
                }
                else {
                    this.displayText = this.getDisplayText(selectedRow);
                }
                this.displayValue = selectedRow
                    .map((/**
                 * @param {?} r
                 * @return {?}
                 */
                (r) => {
                    return this.utils.getValue(this.valueField || this.idField, r);
                }))
                    .join(this.multipleChoiceSeparator);
            }
        }
        this.originalText = this.displayText;
    }
    /**
     * @param {?} rowData
     * @return {?}
     */
    runDictPickedEvent(rowData) {
        if (this.dictPicked) {
            if (this.okButton) {
                this.okButton.nativeElement.disabled = true;
            }
            this.dictPickedSubscription = this.dictPicked(rowData).subscribe((/**
             * @param {?} v
             * @return {?}
             */
            (v) => {
                if (this.okButton) {
                    this.okButton.nativeElement.disabled = false;
                }
                if (typeof v === "boolean") {
                    if (v) {
                        this.closeDialog(rowData);
                    }
                }
                else if (typeof v === "object" &&
                    v.closeDialog !== undefined &&
                    !v.closeDialog) {
                    if (v.message) {
                        this.messagerService.warning(v.message);
                    }
                    else {
                        this.closeDialog(rowData);
                    }
                }
                else {
                    this.closeDialog(rowData);
                }
            }));
        }
        else {
            this.closeDialog(rowData);
        }
    }
    /**
     * @private
     * @return {?}
     */
    focusToInput() {
        this.zone.runOutsideAngular((/**
         * @return {?}
         */
        () => {
            setTimeout((/**
             * @return {?}
             */
            () => {
                if (this.inputGroup && this.inputGroup.textbox) {
                    this.inputGroup.textbox.nativeElement.focus();
                }
            }));
        }));
    }
    /**
     * @param {?=} rowData
     * @return {?}
     */
    closeDialog(rowData = null) {
        if (this.dialog) {
            this.dialog.close();
        }
        if (rowData) {
            this.multiSelMgr.save(rowData);
        }
        // this.isShow = false;
        this.focusToInput();
    }
    /**
     * @return {?}
     */
    cancelSelect() {
        this.closeDialog();
        this.isTextChange = false;
        if (!this.nosearch) {
            this.displayText = this.originalText;
            this.setModelValue(this.displayText);
        }
        if (this.cancelHandler) {
            this.cancelHandler(this);
        }
    }
    /**
     * @param {?} v
     * @return {?}
     */
    setModelValue(v) {
        if (this.onModelChange) {
            this.onModelChange(v);
            this.valueChanged.emit(v);
        }
    }
    // 数据列表，收藏， 已选数据 tab 页切换
    /**
     * @param {?} e
     * @return {?}
     */
    onTabChange(e) {
        this.activeTab = e.tabIndex;
        this.personalConf.tabIndex = this.activeTab;
        /** @type {?} */
        const _firstChange = this.isTabChanged;
        this.isTabChanged = true;
        this.personalConfigService.updatePersonalConfig({
            tabIndex: e.tabIndex,
        });
        if (this.activeTab === "datalist") {
            if (this.isDoublleList() && !this.leftComponentRef) {
                if (this.navigationOptions) {
                    this.lookupCmpMgr.createLeftComponent(this.navigationOptions);
                }
                else {
                    this.initData();
                    return;
                }
            }
            if (!this.items || !this.items.length) {
                this.initData();
            }
            else {
                if (!_firstChange) {
                    if (this.isTree()) {
                        this.loadTreeTableData();
                    }
                    else {
                        this.loadDataTableData();
                        this.dtEventMgr.bindDataTableEvent();
                    }
                }
                // this.selectionMgr.selectCurrentValue();
            }
            this.showGetAllChildrenCheckbox();
        }
        else {
            if (this.activeTab === "favorite") {
                if (this.isTree()) {
                    this.initData();
                }
                else {
                    if (!this.favoriteItems ||
                        !this.favoriteItems.length ||
                        this.favoriteItems.length !== this.favHelper.getFavoritIds().length) {
                        this.initData();
                    }
                    else if (!_firstChange) {
                        this.favHelper._loadFavoriteData(this.favoriteItems);
                        // this.selectionMgr.selectCurrentValue();
                    }
                    //  else {
                    //     this.selectionMgr.selectCurrentValue();
                    // }
                }
            }
        }
        this.changeDetector.detectChanges();
        setTimeout((/**
         * @return {?}
         */
        () => {
            this.resizeCmp();
            if (this.isTree()) {
                /** @type {?} */
                const y = this.componentRef.instance.state.scrollY;
                this.componentRef.instance.scrollToY(y, 0);
                if (this.enableCascade) {
                    this.ttEventMgr.cascadeValueChanged(this.cascadeStatus);
                }
            }
            this.selectionMgr.selectCurrentValue();
        }));
    }
    //#region  Tag View ----------------------------------------------------------------------
    /**
     * @private
     * @return {?}
     */
    registerMouseEventForTagView() {
        if (this.enableClear) {
            this.tagbox.nativeElement.addEventListener("mouseenter", this.onTagboxMouseEnter.bind(this));
            this.tagbox.nativeElement.addEventListener("mouseleave", this.onTagboxMouseLeave.bind(this));
        }
    }
    /**
     * @private
     * @param {?} event
     * @param {?=} isShow
     * @return {?}
     */
    toggleClearIcon(event, isShow = false) {
        /** @type {?} */
        const str = isShow ? "" : "none";
        /** @type {?} */
        const clearIcon = event.target.querySelector(".input-group-clear");
        if (clearIcon) {
            clearIcon.style.display = str;
        }
    }
    /**
     * @private
     * @param {?} event
     * @return {?}
     */
    onTagboxMouseEnter(event) {
        if (this.displayText && this.enableClear) {
            if (!this.readonly && !this.disabled) {
                this.showTagboxClearButton = true;
            }
        }
        if (this.showTagboxClearButton) {
            this.toggleClearIcon(event, true);
        }
    }
    /**
     * @private
     * @param {?} event
     * @return {?}
     */
    onTagboxMouseLeave(event) {
        this.toggleClearIcon(event);
    }
    /**
     * @param {?} $event
     * @param {?} txt
     * @return {?}
     */
    onRemoveSelectItem($event, txt) {
        $event.stopPropagation();
        /** @type {?} */
        const textArray = Array.from(this.displayTextList);
        /** @type {?} */
        const removedIndex = this.displayTextList.indexOf(txt);
        textArray.splice(removedIndex, 1);
        this.displayText = textArray.join(this.multipleChoiceSeparator);
        this.originalText = this.displayText;
        this.setModelValue(this.displayText);
        if (this.displayValue) {
            /** @type {?} */
            const vals = this.displayValue.split(this.multipleChoiceSeparator);
            vals.splice(removedIndex, 1);
            this.displayValue = vals.join(this.multipleChoiceSeparator);
        }
        if (this.mapFields) {
            this.updateOtherFieldDataWhenTagremoved(removedIndex);
        }
        this.tagRemoved.emit({ removedIndex, instance: this });
    }
    /**
     * @private
     * @param {?} removedIndex
     * @return {?}
     */
    updateOtherFieldDataWhenTagremoved(removedIndex) {
        /** @type {?} */
        const helpFields = Object.keys(this.mapFields);
        /** @type {?} */
        const textFieldIndex = helpFields.indexOf(this.textField);
        if (this.ngControl &&
            this.ngControl.formDirective &&
            this.ngControl.formDirective.form &&
            this.ngControl.formDirective.form.bindingData) {
            /** @type {?} */
            const bindingData = this.ngControl.formDirective.form.bindingData;
            if (bindingData.setValue) {
                /** @type {?} */
                const bindingPath = this.ngControl.formDirective.form.bindingPath;
                /** @type {?} */
                let pathArr = [];
                if (bindingPath) {
                    pathArr = bindingPath.split("/").filter((/**
                     * @param {?} n
                     * @return {?}
                     */
                    (n) => n !== ""));
                }
                helpFields.forEach((/**
                 * @param {?} helpField
                 * @return {?}
                 */
                (helpField) => {
                    this.mapFields[helpField]
                        .split(",")
                        .forEach((/**
                     * @param {?} formField
                     * @return {?}
                     */
                    (formField) => {
                        /** @type {?} */
                        const fieldPaths = pathArr.concat(formField.split("."));
                        /** @type {?} */
                        const val = bindingData.getValue(fieldPaths);
                        /** @type {?} */
                        const valArr = val.split(this.multipleChoiceSeparator);
                        valArr.splice(removedIndex, 1);
                        /** @type {?} */
                        const newVal = valArr.join(this.multipleChoiceSeparator);
                        bindingData.setValue(pathArr.concat(fieldPaths), newVal, true, true);
                    }));
                }));
            }
        }
        else {
            if (this.bindingData) {
                if (textFieldIndex > -1) {
                    helpFields.splice(textFieldIndex, 1);
                }
                helpFields.forEach((/**
                 * @param {?} helpField
                 * @return {?}
                 */
                (helpField) => {
                    this.mapFields[helpField]
                        .split(",")
                        .forEach((/**
                     * @param {?} formField
                     * @return {?}
                     */
                    (formField) => {
                        /** @type {?} */
                        const val = this.utils.getValue(formField, this.bindingData);
                        /** @type {?} */
                        const valArr = val.split(this.multipleChoiceSeparator);
                        valArr.splice(removedIndex, 1);
                        /** @type {?} */
                        const newVal = valArr.join(this.multipleChoiceSeparator);
                        this.utils.setValue(this.bindingData, formField, newVal);
                    }));
                }));
            }
        }
    }
    //#endregion
    /**
     * @param {?} $event
     * @return {?}
     */
    onAllChildNodesClick($event) {
        this.isGetAllChidlNodes = !this.isGetAllChidlNodes;
    }
    /**
     * @param {?} val
     * @return {?}
     */
    onIncludeSubordinatesChange(val) {
        this.includeSubordinates = val;
        this.includeSubordinates$.next(val);
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    onTagContainerClick($event) {
        $event.stopPropagation();
        if (this.tagInput) {
            this.tagInput.focus();
            this.tagInput.textbox.nativeElement.click();
        }
    }
    /**
     * @param {?} nodes
     * @return {?}
     */
    expandFirstNode(nodes) {
        if (nodes && nodes.length) {
            return nodes.map((/**
             * @param {?} node
             * @return {?}
             */
            (node) => {
                if (node.children && node.children.length) {
                    node.expanded = true;
                    this.expandFirstNode(node.children);
                }
                return node;
            }));
        }
        return nodes;
    }
    ;
    // 用于组织个性化数据key
    /**
     * @return {?}
     */
    getLookupBindingFields() {
        if (this.ngControl) {
            if (this.ngControl.name) {
                return this.ngControl.name;
            }
            else {
                if (this.mapFields && this.mapFields.length) {
                    return Object.keys(this.mapFields).map((/**
                     * @param {?} k
                     * @return {?}
                     */
                    k => {
                        return this.mapFields[k];
                    })).join('_');
                }
                else {
                    return this.textField;
                }
            }
        }
        else {
            return '';
        }
    }
}
LookupGridComponent.decorators = [
    { type: Component, args: [{
                selector: "farris-lookup-grid",
                template: "<!--\r\n * @Author: \u75AF\u72C2\u79C0\u624D(Lucas Huang)\r\n * @Date: 2019-06-16 13:44:59\r\n * @LastEditors: \u75AF\u72C2\u79C0\u624D(Lucas Huang)\r\n * @LastEditTime: 2019-11-18 08:47:32\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n -->\r\n\r\n <input-group #inputgroup\r\n    *ngIf=\"viewType === 'text'\"\r\n    [groupText]=\"groupIcon\"\r\n    [lookup-tip]= \"useTip\"\r\n    [(ngModel)]=\"displayText\"\r\n    [disabled]=\"disabled\"\r\n    [readonly]=\"readonly\"\r\n    [editable]=\"editable\"\r\n    [customCls]=\"'lookupbox'\"\r\n    [placeholder]=\"'lookup.placeholder' | locale: '\u8BF7\u9009\u62E9': placeholder\"\r\n    [enableClear]=\"enableClear\"\r\n    [useExtendInfo]=\"useExtendInfo\"\r\n    [extendInfo]=\"extendInfo\"\r\n    [maxLength]=\"maxLength\"\r\n    (updateExtendInfo)=\"onUpdateExtendInfo()\"\r\n    [textAlign]=\"textAlign\"\r\n    [value]=\"displayText\"\r\n    (valueChange)=\"onChanges($event)\"\r\n    (clickHandle)=\"showDialog()\"\r\n    (clear)=\"onClear()\"\r\n    [quick-select]=\"quickSelect\"\r\n></input-group>\r\n\r\n<!--Tag style-->\r\n<div #tagbox class=\"input-group\" [class.f-state-disabled]=\"disabled\" [class.f-state-readonly]=\"readonly\" *ngIf=\"viewType === 'tag'\" [attr.title]=\"displayText\">\r\n    <div class=\"form-control f-cmp-inputgroup--multi-wrapper multi-more\" style=\"height: auto; min-height: 24px;\">\r\n        <div class=\"multi--content d-flex flex-row\" style=\"width: 100%;flex-wrap: wrap;\" #tagContainer (click)=\"onTagContainerClick($event)\">\r\n            <span class=\"multi--item\" *ngFor=\"let txt of displayTextList; let index\" title=\"\" style=\"cursor: default;padding: 0 5px;\r\n            background: #ebf7fe;\r\n            border: 1px solid #cfedff;\r\n            position: relative;\r\n            padding-right: 20px;\r\n            margin-right: 3px;margin-top: 1px;height:18px; float: left;\">\r\n                {{txt}}\r\n                <i class=\"f-icon f-icon-close\" *ngIf=\"!readonly && !disabled\" style=\"cursor: pointer;position:absolute; right: 2px\" (click)=\"onRemoveSelectItem($event, txt)\"></i>\r\n            </span>\r\n\r\n            <span *ngIf=\"quickSelect && quickSelect.enable && !readonly && !disabled\" style=\"flex: 1;position: relative;min-width: 100px;height: 18px;margin: 0;padding: 0;float: left;overflow: hidden;\">\r\n                <!-- <input type=\"text\" style=\"border: 0;outline: none;width: 100px;\" #tagInput> -->\r\n                <input-group #tagInput style=\"position: absolute; top: 0px; height: 20px;align-items: center;display: flex;left: -8px; width: 100%\"\r\n                    [placeholder]=\"'lookup.placeholder' | locale: '\u8BF7\u9009\u62E9': placeholder\"\r\n                    [quick-select]=\"quickSelect\"  [enableClear]=\"false\" [noborder]=\"true\"\r\n                ></input-group>\r\n            </span>\r\n        </div>\r\n        <!-- <div class=\"multi--more\" *ngIf=\"selections && selections.length\">\r\n            <i class=\"f-icon multi--more-icon\"></i><span class=\"multi--more-text\">{{selections.length}}</span>\r\n        </div> -->\r\n    </div>\r\n    <div class=\"input-group-append\" style=\"position: relative;\" title=\"\" >\r\n        <span class=\"input-group-text input-group-clear\" style=\"display: none; padding: 0px 4px;position: absolute;right: 22px;height: 100%;\" (click)=\"onClear()\">\r\n            <i class=\"f-icon modal_close\"></i>\r\n        </span>\r\n        <span class=\"input-group-text\" (click)=\"showDialog()\">\r\n            <span class=\"f-icon f-icon-lookup\"></span>\r\n        </span>\r\n    </div>\r\n</div>\r\n\r\n\r\n<farris-dialog\r\n    #dialog\r\n    *ngIf=\"isShow\"\r\n    [draggable]=\"draggable\"\r\n    [resizable]=\"resizable\"\r\n    [title]=\"displayInfo.title\"\r\n    [beforeOpen]=\"beforeOpen\"\r\n    [beforeClose]=\"beforeClose\"\r\n    [(width)]=\"dialogWidth\"\r\n    [(height)]=\"dialogHeight\"\r\n    [showButtons]=\"showButtons\"\r\n    [showMaxButton]=\"showMaxButton\"\r\n    [showCloseButton]=\"true\"\r\n    [buttons]=\"buttonsRef || defaultButtonRef\"\r\n    [buttonAlign]=\"buttonAlign\"\r\n    [enableScroll]=\"false\"\r\n    [dialogHeaderHeight]=\"50\"\r\n    (maxed)=\"onMaxDialog($event)\"\r\n    (resized)=\"onResized($event)\"\r\n    (resizing)=\"onResizing($event)\"\r\n    [showHeader] = \"layoutFormat === 'default'\"\r\n    class=\"farris-lookup-dialog\"\r\n    [class.lookup-advanced]=\"layoutFormat === 'advanced'\"\r\n>\r\n\r\n\r\n    <div [ngStyle]=\"containerStyle\" style=\"height: 100%;\" >\r\n        <lookup-tabs (tabChange)=\"onTabChange($event)\" [enableFav]=\"useFavorite\" [activeTab]=\"activeTab\" \r\n            [visible]=\"isReady\" [dialogTitle]=\"displayInfo.title\" [layout]=\"layoutFormat\"\r\n            [enableSelected]=\"showSelected && !singleSelect\" [selectedTotal]=\"(currentSelectedItems | async)?.length\">\r\n            <div datalist class=\"d-flex f-utils-absolute-all \">   \r\n                <layout [direction]=\"'h'\" [fill]=\"true\" *ngIf=\"isDoublleList()\">\r\n                    <layout-panel #leftPanel [width]=\"leftPanelWidth\" region=\"west\" [minWidth]=\"10\" [showBorder]=\"false\" [overflow]=\"'hidden'\">\r\n                        <ng-container #leftContainer></ng-container>\r\n                    </layout-panel>\r\n                    <layout-panel region=\"center\" [showBorder]=\"false\" [overflow]=\"'hidden'\">\r\n                        <ng-container #centerContainer></ng-container>\r\n                    </layout-panel>\r\n                </layout>\r\n                \r\n                <ng-container *ngIf=\"!isDoublleList()\" #contentContainer></ng-container>\r\n            </div>\r\n            <div favorites  class=\"d-flex f-utils-all h-100\" *ngIf=\"useFavorite\"> \r\n                <ng-container #favoritesContainer></ng-container>\r\n            </div>\r\n            <div selected class=\"d-flex f-utils-all\" *ngIf=\"showSelected\" > \r\n                <farris-datatable #multiSelectDT\r\n                    [height]=\"gridOptions?.height\"\r\n                    [pagination]=\"false\" [fill]=\"true\"\r\n                    [columns]=\"selectedColumns\"\r\n                    [data]=\"currentSelectedItems | async\"\r\n                    [remoteSort]=\"false\"\r\n                    (cellClick)=\"multiSelMgr?.onSelectedTableCellClick($event)\"\r\n                >\r\n                </farris-datatable>\r\n            </div>\r\n        </lookup-tabs>\r\n\r\n    </div>\r\n</farris-dialog>\r\n\r\n<ng-template #defaultButtonRef>\r\n    \r\n    <div class=\"flex-fill\" style=\"text-align: left;\" *ngIf=\"isReady && enableCascade && displayType==='TREELIST' && singleSelect === false\">\r\n        <select *ngIf=\"showCascadeControl\" class=\"form-control\" style=\"width: auto; display: inline-block\" (ngModelChange)=\"ttEventMgr?.cascadeValueChanged($event)\" [ngModel]=\"cascadeStatus\" name=\"cascadeStatus\">\r\n            <option value=\"enable\" *ngIf=\"cascadeItems ? cascadeItems.enable : true\">{{ 'lookup.cascade.enable' | locale: '\u540C\u6B65\u9009\u62E9' }}</option>\r\n            <option value=\"up\" *ngIf=\"cascadeItems ? cascadeItems.up : true\">{{ 'lookup.cascade.up' | locale: '\u5305\u542B\u4E0A\u7EA7' }}</option>\r\n            <option value=\"down\" *ngIf=\"cascadeItems ? cascadeItems.down : true\">{{ 'lookup.cascade.down' | locale: '\u5305\u542B\u4E0B\u7EA7' }}</option>\r\n            <option value=\"disable\" *ngIf=\"cascadeItems ? cascadeItems.disable : true\">{{ 'lookup.cascade.disable' | locale: '\u4EC5\u9009\u62E9\u81EA\u8EAB' }}</option>\r\n        </select>\r\n\r\n        <div class=\"custom-control custom-checkbox custom-control-inline ml-3\" *ngIf=\"enableGetAllChildNodes\">\r\n            <input class=\"custom-control-input\" type=\"checkbox\" id=\"farris-lookup_get-all-child-nodes\">\r\n            <label class=\"custom-control-label btn-link\" for=\"farris-lookup_get-all-child-nodes\" style=\"padding-left: 18px;\"\r\n                (click)=\"onAllChildNodesClick($event)\">{{'lookup.getAllChilds'|locale: '\u83B7\u53D6\u6240\u6709\u5B50\u7EA7\u6570\u636E'}}</label>\r\n        </div>\r\n    </div>\r\n\r\n\r\n    <div class=\"flex-fill\" style=\"text-align: left;\" *ngIf=\"isReady && displayType==='NAVTREELIST' && activeTab === 'datalist' && showNavigation\">\r\n        <div class=\"custom-control custom-checkbox custom-control-inline\">\r\n            <input class=\"custom-control-input\" type=\"checkbox\" id=\"farris-lookup_get-all-child-nodes\" [ngModel]=\"includeSubordinates\" (ngModelChange)=\"onIncludeSubordinatesChange($event)\">\r\n            <label class=\"custom-control-label btn-link\" for=\"farris-lookup_get-all-child-nodes\" style=\"padding-left: 18px;\">{{ 'lookup.cascade.down' | locale: '\u5305\u542B\u4E0B\u7EA7' }}</label>\r\n        </div>\r\n    </div>\r\n\r\n\r\n    <button type=\"button\" class=\"btn btn-secondary btn-lg\" (click)=\"cancelSelect()\" [disabled]=\"!(isReady || hasError)\" >\r\n        {{ 'lookup.cancelText' | locale: '\u53D6\u6D88' }}\r\n    </button>\r\n    <button #okbtn type=\"button\" [disabled]=\"!isReady\"  class=\"btn btn-primary btn-lg\" (click)=\"selectItem()\" >\r\n        {{ 'lookup.okText' | locale: '\u786E\u5B9A' }}\r\n    </button>\r\n   \r\n    \r\n</ng-template>\r\n",
                providers: [
                    LOOKUPGRID_VALUE_ACCESSOR,
                    ShortcutsService,
                    LookupDefaultMapping,
                    LookupUtils,
                    PersonalConfigService,
                ],
                encapsulation: ViewEncapsulation.None,
                exportAs: "lookup",
                styles: [".input-group{flex-wrap:nowrap}.ng-dirty.ng-invalid>input-group>.lookupbox{border-color:#ff0303}.lookup-clear{cursor:pointer;background:#fff!important}.lookup-clear:hover{background:#e9ecef!important}.f-lookup-favorite{cursor:pointer;color:#ff9800}.f-lookup-unfavorite{cursor:pointer;color:#dd2438}.lookup-tip{position:absolute;min-width:200px;max-height:400px;padding:.25rem 0;z-index:7777;background:#fff;box-shadow:0 2px 8px 0 rgba(0,0,0,.15);border-radius:2px}.lookup-tip .lookup-tip-header{font-weight:700;padding:.25rem .475rem;border-radius:0}.lookup-tip ul{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;padding-left:0;margin-bottom:0}.lookup-tip ul li{position:relative;display:block;width:100%;margin-bottom:-1px;padding:.25rem .875rem;color:rgba(0,0,0,.85);background-color:#fff;cursor:pointer}.lookup-tip ul li:hover{background-color:#e6f7ff}.f-lookup_quick-panel{height:100%;z-index:10001;position:absolute;overflow:auto;background:#fff;margin-top:.25rem;box-shadow:0 2px 8px 0 #dedede;border-radius:3px}.f-lookup_quick-panel .list{margin:0 6px}.f-lookup_quick-panel .list-group-item{padding:0 8px;border:0;margin-bottom:0;word-break:break-all;min-height:30px}.f-lookup_quick-panel .more{height:50px;text-align:center;line-height:50px}.f-lookup_quick-panel .norecord{height:100%;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;display:-webkit-box;display:flex;font-size:16px;color:#bec6db}.lookup-advanced .lookup-tabs-content{border-top:0!important}.lookup-advanced .modal-footer{padding-bottom:20px}.lookup-advanced .farris-datatable-container,.lookup-advanced .farris-treetable{border:1px solid #e9ecf3;border-radius:8px;overflow:hidden}"]
            }] }
];
/** @nocollapse */
LookupGridComponent.ctorParameters = () => [
    { type: Injector },
    { type: ComponentFactoryResolver },
    { type: ElementRef },
    { type: CommonUtils },
    { type: LookupDefaultMapping },
    { type: ChangeDetectorRef },
    { type: ShortcutsService },
    { type: LookupUtils },
    { type: NgZone },
    { type: Renderer2 }
];
LookupGridComponent.propDecorators = {
    customDisplayType: [{ type: Input }],
    viewType: [{ type: Input }],
    displayType: [{ type: Input }],
    enableClear: [{ type: Input }],
    remoteSort: [{ type: Input }],
    condition: [{ type: Input }],
    showCheckAll: [{ type: Input }],
    singleSelect: [{ type: Input }],
    multipleChoiceSeparator: [{ type: Input }],
    idField: [{ type: Input }],
    uri: [{ type: Input }],
    beUri: [{ type: Input }],
    showFilterBar: [{ type: Input }],
    pagination: [{ type: Input }],
    pageIndex: [{ type: Input }],
    pageSize: [{ type: Input }],
    pageList: [{ type: Input }],
    total: [{ type: Input }],
    columns: [{ type: Input }],
    remoteSearch: [{ type: Input }],
    searchOnServer: [{ type: Input }],
    nosearch: [{ type: Input }],
    clearMappings: [{ type: Output }],
    maxLength: [{ type: Input }],
    mappingFn: [{ type: Input }],
    items: [{ type: Input }],
    favoriteItems: [{ type: Input }],
    customData: [{ type: Input }],
    bindingData: [{ type: Input }],
    treeInfo: [{ type: Input }],
    enableCascade: [{ type: Input }],
    cascadeStatus: [{ type: Input }],
    cascadeItems: [{ type: Input }],
    showCascadeControl: [{ type: Input }],
    placeholder: [{ type: Input }],
    showSelected: [{ type: Input }],
    useFavorite: [{ type: Input }],
    favoriteDataFrom: [{ type: Input }],
    useTip: [{ type: Input }],
    isRecordSize: [{ type: Input }],
    userId: [{ type: Input }],
    enableToSelect: [{ type: Input }],
    enableFindText: [{ type: Input }],
    expandLevel: [{ type: Input }],
    navTreeTableOptions: [{ type: Input }],
    treeTableOptions: [{ type: Input }],
    dataTableOptions: [{ type: Input }],
    loadTreeDataType: [{ type: Input }],
    loadDataWhenOpen: [{ type: Input }],
    navSelectedIds: [{ type: Input }],
    selectFirstInNav: [{ type: Input }],
    enableFullTree: [{ type: Input }],
    displayFormatter: [{ type: Input }],
    displayFields: [{ type: Input }],
    displayTextSeparator: [{ type: Input }],
    helpId: [{ type: Input }],
    textAlign: [{ type: Input }],
    enableTitle: [{ type: Input }],
    useExtendInfo: [{ type: Input }],
    extInfoFields: [{ type: Input }],
    extInfoFormatter: [{ type: Input }],
    extendInfo: [{ type: Input }],
    customFormatter: [{ type: Input }],
    customNavFormatter: [{ type: Input }],
    okHandler: [{ type: Input }],
    cancelHandler: [{ type: Input }],
    tagboxHeight: [{ type: Input }],
    maxTagboxHeight: [{ type: Input }],
    enableGetAllChildNodes: [{ type: Input }],
    shortcutKey: [{ type: Input }],
    quickSelect: [{ type: Input }],
    treeToList: [{ type: Input }],
    navTreeToList: [{ type: Input }],
    showNavigation: [{ type: Input }],
    beforeSelectData: [{ type: Input }],
    layoutFormat: [{ type: Input }],
    selectedData: [{ type: Output }],
    clear: [{ type: Output }],
    search: [{ type: Output }],
    valueChanged: [{ type: Output }],
    loadSuccess: [{ type: Output }],
    pagerChanged: [{ type: Output }],
    expandTreeNode: [{ type: Output }],
    textChanged: [{ type: Output }],
    checkedChange: [{ type: Output }],
    tagRemoved: [{ type: Output }],
    gridOptions: [{ type: Input }],
    contentContainer: [{ type: ViewChild, args: ["contentContainer", { read: ViewContainerRef },] }],
    favoritesContainer: [{ type: ViewChild, args: ["favoritesContainer", { read: ViewContainerRef },] }],
    leftContainer: [{ type: ViewChild, args: ["leftContainer", { read: ViewContainerRef },] }],
    centerContainer: [{ type: ViewChild, args: ["centerContainer", { read: ViewContainerRef },] }],
    multiSelectDT: [{ type: ViewChild, args: ["multiSelectDT",] }],
    inputGroup: [{ type: ViewChild, args: ["inputgroup",] }],
    leftPanel: [{ type: ViewChild, args: ["leftPanel",] }],
    tagbox: [{ type: ViewChild, args: ["tagbox",] }],
    okButton: [{ type: ViewChild, args: ["okbtn",] }],
    tagInput: [{ type: ViewChild, args: ["tagInput",] }]
};
if (false) {
    /** @type {?} */
    LookupGridComponent.prototype.groupIcon;
    /** @type {?} */
    LookupGridComponent.prototype._displayType;
    /**
     * 使用表单设计器中的显示类型。否则使用元数据设置的显示类型。 默认：false
     * @type {?}
     */
    LookupGridComponent.prototype.customDisplayType;
    /** @type {?} */
    LookupGridComponent.prototype.viewType;
    /**
     * 启用清空按钮
     * @type {?}
     */
    LookupGridComponent.prototype.enableClear;
    /**
     * 服务器端排序
     * @type {?}
     */
    LookupGridComponent.prototype.remoteSort;
    /** @type {?} */
    LookupGridComponent.prototype.condition;
    /**
     * 树表显示全选复选框。 默认不显示
     * @type {?}
     */
    LookupGridComponent.prototype.showCheckAll;
    /**
     * 是否启用多选
     * @type {?}
     */
    LookupGridComponent.prototype.singleSelect;
    /**
     * 多选分隔符
     * @type {?}
     */
    LookupGridComponent.prototype.multipleChoiceSeparator;
    /**
     * 主键字段
     * @type {?}
     */
    LookupGridComponent.prototype.idField;
    /**
     * 可以为元数据ID、webapiURL
     * @type {?}
     */
    LookupGridComponent.prototype.uri;
    /**
     * BE REST RUI
     * - 此处设置后 uri 失效
     * @type {?}
     */
    LookupGridComponent.prototype.beUri;
    /**
     * 显示过滤工具条
     * @type {?}
     */
    LookupGridComponent.prototype.showFilterBar;
    /**
     * 是否启用分页
     * @type {?}
     */
    LookupGridComponent.prototype.pagination;
    /**
     * 当前页索引，从 0开始
     * @type {?}
     */
    LookupGridComponent.prototype.pageIndex;
    /**
     * 每页记录数
     * @type {?}
     */
    LookupGridComponent.prototype.pageSize;
    /**
     * 可用分页记录数列表
     * @type {?}
     */
    LookupGridComponent.prototype.pageList;
    /**
     * 总记录数
     * @type {?}
     */
    LookupGridComponent.prototype.total;
    /**
     * 显示列信息, 默认为 []
     * @type {?}
     */
    LookupGridComponent.prototype.columns;
    /**
     * 帮助查询是否为远端查询
     * @type {?}
     */
    LookupGridComponent.prototype.remoteSearch;
    /**
     * 文本变化后，进行服务器端查询
     * @type {?}
     */
    LookupGridComponent.prototype.searchOnServer;
    /**
     * 不进行服务器查询，有啥算啥
     * @type {?}
     */
    LookupGridComponent.prototype.nosearch;
    /**
     * 启用任意输入后，值通过输入时触发
     * @type {?}
     */
    LookupGridComponent.prototype.clearMappings;
    /**
     * 允许输入的字符最大长度。
     * 任意输入时，此属性有效
     * @type {?}
     */
    LookupGridComponent.prototype.maxLength;
    /** @type {?} */
    LookupGridComponent.prototype.mappingFn;
    /**
     * 数据列表
     * @type {?}
     */
    LookupGridComponent.prototype.items;
    /** @type {?} */
    LookupGridComponent.prototype.favoriteItems;
    /**
     * 自定义数据
     * @type {?}
     */
    LookupGridComponent.prototype.customData;
    /**
     * 绑定值所在的对象
     * @type {?}
     */
    LookupGridComponent.prototype.bindingData;
    /** @type {?} */
    LookupGridComponent.prototype.treeInfo;
    /**
     * 是否启用级联选择控制选项
     * @type {?}
     */
    LookupGridComponent.prototype.enableCascade;
    /**
     * 级联控制默认值： enable: 同步选择, up：包含上级, down：包含下级, disable：仅选择自身
     * @type {?}
     */
    LookupGridComponent.prototype.cascadeStatus;
    /**
     * 分别级联选项的启用状态，默认全部启用
     * @type {?}
     */
    LookupGridComponent.prototype.cascadeItems;
    /**
     * 显示级联控制
     * @type {?}
     */
    LookupGridComponent.prototype.showCascadeControl;
    /** @type {?} */
    LookupGridComponent.prototype.placeholder;
    /**
     * 显示已选记录列表。 默认为 false 不显示
     * @type {?}
     */
    LookupGridComponent.prototype.showSelected;
    /**
     * 应用收藏夹
     * @type {?}
     */
    LookupGridComponent.prototype.useFavorite;
    /**
     * 收藏数据来自于： locale: 本地存储， remote: 服务器端存储
     * @type {?}
     */
    LookupGridComponent.prototype.favoriteDataFrom;
    /**
     * 使用提示,快捷选择
     * @type {?}
     */
    LookupGridComponent.prototype.useTip;
    /**
     * 记录窗口大小
     * @type {?}
     */
    LookupGridComponent.prototype.isRecordSize;
    /**
     * 快速选择
     * @type {?}
     */
    LookupGridComponent.prototype.userId;
    /**
     * 是否启用选中value值对应的行数据，默认 true
     * @type {?}
     */
    LookupGridComponent.prototype.enableToSelect;
    /** @type {?} */
    LookupGridComponent.prototype.enableFindText;
    /**
     * -1: 不展开； 0: 全部展开；>0: 展开到指定级数
     * @type {?}
     */
    LookupGridComponent.prototype.expandLevel;
    /** @type {?} */
    LookupGridComponent.prototype.navTreeTableOptions;
    /** @type {?} */
    LookupGridComponent.prototype.treeTableOptions;
    /** @type {?} */
    LookupGridComponent.prototype.dataTableOptions;
    /** @type {?} */
    LookupGridComponent.prototype.defaultTreeTableOptions;
    /**
     * 树形帮助数据加载方式： default: 内置取数； loadall: 加载所有 layerload：分层加载
     * @type {?}
     */
    LookupGridComponent.prototype.loadTreeDataType;
    /**
     * 窗口打开后立即加载数据，默认为 true
     * @type {?}
     */
    LookupGridComponent.prototype.loadDataWhenOpen;
    /**
     * 导航列表，树列表在帮助打开后选中的数据;
     * 设置后，`selectFirstInNav` 失效！
     * @type {?}
     */
    LookupGridComponent.prototype.navSelectedIds;
    /**
     * 导航帮助，选中第1条数据，默认为 false;
     * 注意：当`navSelectedIds`不为空时，此属性失效。
     * @type {?}
     */
    LookupGridComponent.prototype.selectFirstInNav;
    /**
     * 启用构造完整树过滤
     * @type {?}
     */
    LookupGridComponent.prototype.enableFullTree;
    /**
     * 显示文本自定义函数
     * @type {?}
     */
    LookupGridComponent.prototype.displayFormatter;
    /**
     * 显示文本字段集合，以 英文 逗号隔开
     * @type {?}
     */
    LookupGridComponent.prototype.displayFields;
    /** @type {?} */
    LookupGridComponent.prototype.displayTextSeparator;
    /**
     * 帮助元数据ID，不为空时调用指定的URI
     * /api/runtime/bcc/v1.0/help/data/{helpId}
     * @type {?}
     */
    LookupGridComponent.prototype.helpId;
    /**
     * 文本对齐方式； left | center | right; 默认 left
     * @type {?}
     */
    LookupGridComponent.prototype.textAlign;
    /**
     * 鼠标滑过输入框时显示输入框内的文本信息
     * @type {?}
     */
    LookupGridComponent.prototype.enableTitle;
    /** @type {?} */
    LookupGridComponent.prototype.useExtendInfo;
    /** @type {?} */
    LookupGridComponent.prototype.extInfoFields;
    /** @type {?} */
    LookupGridComponent.prototype.extInfoFormatter;
    /** @type {?} */
    LookupGridComponent.prototype.extendInfo;
    /**
     * IDE 设计器自定义格式化 2103
     * @type {?}
     */
    LookupGridComponent.prototype.customFormatter;
    /** @type {?} */
    LookupGridComponent.prototype.customNavFormatter;
    /**
     * 自定义确定事件
     * @type {?}
     */
    LookupGridComponent.prototype.okHandler;
    /**
     * 自定义取消事件
     * @type {?}
     */
    LookupGridComponent.prototype.cancelHandler;
    /** @type {?} */
    LookupGridComponent.prototype.tagboxHeight;
    /** @type {?} */
    LookupGridComponent.prototype.maxTagboxHeight;
    /**
     * 启用获取所有子级数据的功能
     * @type {?}
     */
    LookupGridComponent.prototype.enableGetAllChildNodes;
    /** @type {?} */
    LookupGridComponent.prototype.shortcutKey;
    /**
     * 快捷选择相关配置项，默认为 null, 即不启用此功能
     * @type {?}
     */
    LookupGridComponent.prototype.quickSelect;
    /**
     * 树形帮助 是否使用树形结构数据。默认为 true, 当为 false 时，服务器端无须构造树形结构，按普通列表输出
     * @type {?}
     */
    LookupGridComponent.prototype.treeToList;
    /** @type {?} */
    LookupGridComponent.prototype.navTreeToList;
    /**
     * 带导航的帮助中，是否显示左侧导航部分。默认 true
     * @type {?}
     */
    LookupGridComponent.prototype.showNavigation;
    /**
     * 数据选择后，值映射前触发
     * 返回 Observable
     *      canSelect: <boolean>  是否允许选择
     *      message: <string> 不允许选择时的提示信息
     * @type {?}
     */
    LookupGridComponent.prototype.beforeSelectData;
    /** @type {?} */
    LookupGridComponent.prototype.layoutFormat;
    /** @type {?} */
    LookupGridComponent.prototype.selectedData;
    /** @type {?} */
    LookupGridComponent.prototype.clear;
    /** @type {?} */
    LookupGridComponent.prototype.search;
    /** @type {?} */
    LookupGridComponent.prototype.valueChanged;
    /** @type {?} */
    LookupGridComponent.prototype.loadSuccess;
    /** @type {?} */
    LookupGridComponent.prototype.pagerChanged;
    /** @type {?} */
    LookupGridComponent.prototype.expandTreeNode;
    /** @type {?} */
    LookupGridComponent.prototype.textChanged;
    /** @type {?} */
    LookupGridComponent.prototype.checkedChange;
    /** @type {?} */
    LookupGridComponent.prototype.tagRemoved;
    /**
     * 内容中留白边距
     * @type {?}
     */
    LookupGridComponent.prototype.containerMargin;
    /** @type {?} */
    LookupGridComponent.prototype.containerStyle;
    /** @type {?} */
    LookupGridComponent.prototype._gridOptions;
    /** @type {?} */
    LookupGridComponent.prototype.contentContainer;
    /** @type {?} */
    LookupGridComponent.prototype.favoritesContainer;
    /** @type {?} */
    LookupGridComponent.prototype.leftContainer;
    /** @type {?} */
    LookupGridComponent.prototype.centerContainer;
    /** @type {?} */
    LookupGridComponent.prototype.multiSelectDT;
    /** @type {?} */
    LookupGridComponent.prototype.inputGroup;
    /** @type {?} */
    LookupGridComponent.prototype.leftPanel;
    /** @type {?} */
    LookupGridComponent.prototype.tagbox;
    /** @type {?} */
    LookupGridComponent.prototype.okButton;
    /** @type {?} */
    LookupGridComponent.prototype.tagInput;
    /** @type {?} */
    LookupGridComponent.prototype.componentRef;
    /** @type {?} */
    LookupGridComponent.prototype.leftComponentRef;
    /** @type {?} */
    LookupGridComponent.prototype.favoritesComponentRef;
    /** @type {?} */
    LookupGridComponent.prototype.http;
    /** @type {?} */
    LookupGridComponent.prototype.messagerService;
    /** @type {?} */
    LookupGridComponent.prototype.loadingService;
    /** @type {?} */
    LookupGridComponent.prototype.loading;
    /** @type {?} */
    LookupGridComponent.prototype.navigationOptions;
    /** @type {?} */
    LookupGridComponent.prototype.leftPanelWidth;
    /** @type {?} */
    LookupGridComponent.prototype.navLookupDialogMinWidth;
    /** @type {?} */
    LookupGridComponent.prototype.navigationFilter;
    /** @type {?} */
    LookupGridComponent.prototype.subscriptions;
    /** @type {?} */
    LookupGridComponent.prototype.dialogOpenedSubscription;
    /** @type {?} */
    LookupGridComponent.prototype.dialogClosedSubscription;
    /** @type {?} */
    LookupGridComponent.prototype.isTextChange;
    /** @type {?} */
    LookupGridComponent.prototype.isTabChanged;
    /** @type {?} */
    LookupGridComponent.prototype.displayInfo;
    /** @type {?} */
    LookupGridComponent.prototype.tabChangeSubscription;
    /** @type {?} */
    LookupGridComponent.prototype.personalConf;
    /** @type {?} */
    LookupGridComponent.prototype.favoriteColumns;
    /**
     * 临时查询参数
     * @type {?}
     */
    LookupGridComponent.prototype._searchState;
    /** @type {?} */
    LookupGridComponent.prototype.allData;
    /** @type {?} */
    LookupGridComponent.prototype.personalConfigService;
    /** @type {?} */
    LookupGridComponent.prototype.utilService;
    /** @type {?} */
    LookupGridComponent.prototype.treeNodeHelper;
    /** @type {?} */
    LookupGridComponent.prototype.localService;
    /** @type {?} */
    LookupGridComponent.prototype.notifyService;
    /** @type {?} */
    LookupGridComponent.prototype.allColumnsTitle;
    /** @type {?} */
    LookupGridComponent.prototype.mustWriteSomething;
    /** @type {?} */
    LookupGridComponent.prototype.mustChoosAdatarow;
    /** @type {?} */
    LookupGridComponent.prototype.addFavoriteSuccess;
    /** @type {?} */
    LookupGridComponent.prototype.delFavoriteSuccess;
    /**
     * 使用内置的查询方法, 默认 false
     * @type {?}
     */
    LookupGridComponent.prototype.useInsideSearchHandler;
    /** @type {?} */
    LookupGridComponent.prototype.searching;
    /**
     * 临时存储查询结果集
     * @type {?}
     */
    LookupGridComponent.prototype._searchResult;
    /** @type {?} */
    LookupGridComponent.prototype.lookupinitializationSubject;
    /**
     * 多选时，选中的数据
     * @type {?}
     */
    LookupGridComponent.prototype.currentSelectedItems;
    /**
     * 已选数据列信息
     * @type {?}
     */
    LookupGridComponent.prototype.selectedColumns;
    /** @type {?} */
    LookupGridComponent.prototype.activeTab;
    /** @type {?} */
    LookupGridComponent.prototype.favHelper;
    /** @type {?} */
    LookupGridComponent.prototype.ttEventMgr;
    /** @type {?} */
    LookupGridComponent.prototype.multiSelMgr;
    /** @type {?} */
    LookupGridComponent.prototype.httpMgr;
    /** @type {?} */
    LookupGridComponent.prototype.lookupCmpMgr;
    /** @type {?} */
    LookupGridComponent.prototype.dialogMgr;
    /** @type {?} */
    LookupGridComponent.prototype.selectionMgr;
    /** @type {?} */
    LookupGridComponent.prototype.dtEventMgr;
    /** @type {?} */
    LookupGridComponent.prototype.lookupSelectionSer;
    /** @type {?} */
    LookupGridComponent.prototype.controlId;
    /** @type {?} */
    LookupGridComponent.prototype.savingFaoriteData;
    /** @type {?} */
    LookupGridComponent.prototype.isReady;
    /** @type {?} */
    LookupGridComponent.prototype.showTagboxClearButton;
    /** @type {?} */
    LookupGridComponent.prototype.hasError;
    /** @type {?} */
    LookupGridComponent.prototype.isGetAllChidlNodes;
    /** @type {?} */
    LookupGridComponent.prototype.eventManager;
    /**
     * 选中记录ID，自定义帮助取数时使用
     * @type {?}
     */
    LookupGridComponent.prototype.selectedIds;
    /**
     * @type {?}
     * @private
     */
    LookupGridComponent.prototype.lookupSearchInputEvent;
    /**
     * @type {?}
     * @private
     */
    LookupGridComponent.prototype.farrisInstances;
    /**
     * 用户初始设置
     * @type {?}
     * @private
     */
    LookupGridComponent.prototype._userSettings;
    /** @type {?} */
    LookupGridComponent.prototype._treeInfo_;
    /**
     * dialog 内容区域高度。 弹窗总高度 - 头部高度 - 脚部高度 - （启用收藏 TAB头高度）
     * @type {?}
     */
    LookupGridComponent.prototype.dialogContentHeight;
    /**
     * 左树右列表， 左树点击节点查询时是否包括下级节点的数据，默认 false
     * @type {?}
     */
    LookupGridComponent.prototype.includeSubordinates;
    /** @type {?} */
    LookupGridComponent.prototype.includeSubordinates$;
    /** @type {?} */
    LookupGridComponent.prototype.includeSubordinates$$;
    /** @type {?} */
    LookupGridComponent.prototype.overLayService;
    /**
     * @type {?}
     * @private
     */
    LookupGridComponent.prototype.debugSer;
    /** @type {?} */
    LookupGridComponent.prototype.injector;
    /** @type {?} */
    LookupGridComponent.prototype.cfr;
    /** @type {?} */
    LookupGridComponent.prototype.el;
    /** @type {?} */
    LookupGridComponent.prototype.utils;
    /**
     * @type {?}
     * @private
     */
    LookupGridComponent.prototype.defaultMapping;
    /** @type {?} */
    LookupGridComponent.prototype.changeDetector;
    /** @type {?} */
    LookupGridComponent.prototype.shortcuts;
    /** @type {?} */
    LookupGridComponent.prototype.lookupUtils;
    /**
     * @type {?}
     * @private
     */
    LookupGridComponent.prototype.zone;
    /** @type {?} */
    LookupGridComponent.prototype.render2;
    /* Skipping unhandled member: ;*/
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9va3VwLWdyaWQuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy91aS1sb29rdXAvIiwic291cmNlcyI6WyJsaWIvbG9va3VwLWdyaWQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQVNBLE9BQU8sRUFBQyxTQUFTLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFDbkMsWUFBWSxFQUFRLFFBQVEsRUFBQyx3QkFBd0IsRUFDckQsTUFBTSxFQUFDLGlCQUFpQixFQUFDLGlCQUFpQixFQUFlLGdCQUFnQixFQUN6RSxVQUFVLEVBQW1CLFVBQVUsRUFBQyxNQUFNLEVBQUMsU0FBUyxHQUF5QixNQUFNLGVBQWUsQ0FBQztBQUV2RyxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUNuRCxPQUFPLEVBQTRCLEVBQUUsRUFBRSxPQUFPLEVBQW1CLE1BQU0sTUFBTSxDQUFDO0FBRTlFLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUVsRCxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDdEQsT0FBTyxFQUFFLGNBQWMsRUFBb0IsTUFBTSxvQkFBb0IsQ0FBQztBQUN0RSxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUMxRCxPQUFPLEVBQUUsa0JBQWtCLEVBQVksTUFBTSxzQkFBc0IsQ0FBQztBQUNwRSxPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUN6RCxPQUFPLEVBQUUsV0FBVyxFQUFFLFlBQVksRUFBRSw4QkFBOEIsRUFBRSxvQkFBb0IsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBRXBILE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBQ3hELE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBQzdELE9BQU8sRUFBRSxhQUFhLEVB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Ozs7SUFFL0QsNENBQWdDOztJQU1oQyx5Q0FBa0I7Ozs7O0lBR2xCLGtEQUF3Qjs7Ozs7SUFFeEIsa0RBQTRCOztJQUM1QixtREFBcUM7O0lBQ3JDLG9EQUEyQzs7SUFDM0MsNkNBQXFDOzs7OztJQUNyQyx1Q0FBc0M7O0lBR2xDLHVDQUF5Qjs7SUFDekIsa0NBQW9DOztJQUNwQyxpQ0FBcUI7O0lBQ3JCLG9DQUF5Qjs7Ozs7SUFDekIsNkNBQTRDOztJQUM1Qyw2Q0FBd0M7O0lBQ3hDLHdDQUFrQzs7SUFDbEMsMENBQStCOzs7OztJQUMvQixtQ0FBb0I7O0lBQ3BCLHNDQUF5QiIsInNvdXJjZXNDb250ZW50IjpbIi8qXHJcbiAqIEBBdXRob3I6IOeWr+eLguengOaJjShsdWNhcyBodWFuZylcclxuICogQERhdGU6IDIwMTgtMTEtMjMgMTE6MjM6MTJcclxuICogQExhc3RFZGl0b3JzOiDnlq/ni4Lnp4DmiY0oTHVjYXMgSHVhbmcpXHJcbiAqIEBMYXN0RWRpdFRpbWU6IDIwMjAtMTAtMjAgMjA6MTg6MjZcclxuICogQENvbXBhbnk6IEluc3B1clxyXG4gKiBAVmVyc2lvbjogdjAuMy54XHJcbiAqL1xyXG5cclxuaW1wb3J0IHtDb21wb25lbnQsIElucHV0LCBWaWV3Q2hpbGQsIE9uQ2hhbmdlcywgU2ltcGxlQ2hhbmdlcyxcclxuRXZlbnRFbWl0dGVyLE9uSW5pdCxJbmplY3RvcixDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsXHJcbk91dHB1dCxDaGFuZ2VEZXRlY3RvclJlZixWaWV3RW5jYXBzdWxhdGlvbixBZnRlclZpZXdJbml0LFZpZXdDb250YWluZXJSZWYsXHJcbmZvcndhcmRSZWYsQ29tcG9uZW50UmVmLFR5cGUsRWxlbWVudFJlZixOZ1pvbmUsUmVuZGVyZXIyLE9uRGVzdHJveSxIb3N0TGlzdGVuZXIsfSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xyXG5cclxuaW1wb3J0IHsgTkdfVkFMVUVfQUNDRVNTT1IgfSBmcm9tIFwiQGFuZ3VsYXIvZm9ybXNcIjtcclxuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgU3Vic2NyaXB0aW9uLCBvZiwgU3ViamVjdCwgQmVoYXZpb3JTdWJqZWN0IH0gZnJvbSBcInJ4anNcIjtcclxuXHJcbmltcG9ydCB7IExvY2FsZVNlcnZpY2UgfSBmcm9tIFwiQGZhcnJpcy91aS1sb2NhbGVcIjtcclxuaW1wb3J0IHsgSVJlc2l6ZUV2ZW50IH0gZnJvbSBcIkBmYXJyaXMvdWktZHJhZ2dhYmxlXCI7XHJcbmltcG9ydCB7IE1lc3NhZ2VyU2VydmljZSB9IGZyb20gXCJAZmFycmlzL3VpLW1lc3NhZ2VyXCI7XHJcbmltcG9ydCB7IExvYWRpbmdTZXJ2aWNlLCBMb2FkaW5nQ29tcG9uZW50IH0gZnJvbSBcIkBmYXJyaXMvdWktbG9hZGluZ1wiO1xyXG5pbXBvcnQgeyBEYXRhVGFibGVDb21wb25lbnQgfSBmcm9tIFwiQGZhcnJpcy91aS1kYXRhdGFibGVcIjtcclxuaW1wb3J0IHsgVHJlZVRhYmxlQ29tcG9uZW50LCBUcmVlTm9kZSB9IGZyb20gXCJAZmFycmlzL3VpLXRyZWV0YWJsZVwiO1xyXG5pbXBvcnQgeyBMYXlvdXRQYW5lbENvbXBvbmVudCB9IGZyb20gXCJAZmFycmlzL3VpLWxheW91dFwiO1xyXG5pbXBvcnQgeyBDb21tb25VdGlscywgRGVidWdTZXJ2aWNlLCBGYXJyaXNDb21wb25lbnRJbnN0YW5jZVNlcnZpY2UsIE92ZXJMYXlIaWRkZW5TZXJ2aWNlIH0gZnJvbSBcIkBmYXJyaXMvdWktY29tbW9uXCI7XHJcbmltcG9ydCB7IEVudGl0eUZpbHRlciB9IGZyb20gXCJAZmFycmlzL3VpLWNvbW1vbi90eXBlc1wiO1xyXG5pbXBvcnQgeyBTaG9ydGN1dHNTZXJ2aWNlIH0gZnJvbSBcIkBmYXJyaXMvdWktc2hvcnRjdXRzXCI7XHJcbmltcG9ydCB7IElucHV0R3JvdXBDb21wb25lbnQgfSBmcm9tIFwiQGZhcnJpcy91aS1pbnB1dC1ncm91cFwiO1xyXG5pbXBvcnQgeyBOb3RpZnlTZXJ2aWNlIH0gZnJvbSBcIkBmYXJyaXMvdWktbm90aWZ5XCI7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgRkFWT1JJVEVfRklFTERfTkFNRSxcclxuICAgIElOUFVUX0dST1VQX0lDT04sXHJcbiAgICBMb29rdXBHcmlkRGlzcGxheVR5cGUsXHJcbiAgICBFeHRJbmZvRm9ybWF0dGVyLFxyXG4gICAgQ3VzdG9tRGF0YUZvcm1hdHRlcixcclxuICAgIFF1aWNrU2VsZWN0T3B0aW9uLFxyXG4gICAgUXVpY2tTZWxlY3REZWZhdWx0T3B0aW9ucyxcclxufSBmcm9tIFwiLi9sb29rdXAtZGlzcGxheXR5cGVcIjtcclxuaW1wb3J0IHsgTG9va3VwQ29tcG9uZW50IH0gZnJvbSBcIi4vbG9va3VwLmNvbXBvbmVudFwiO1xyXG5pbXBvcnQge1xyXG4gICAgTG9va3VwR3JpZE9wdGlvbnMsXHJcbiAgICBsb29rdXBHcmlkRGVmYXVsdHMsXHJcbiAgICBMb29rdXBHcmlkUmVzdWx0LFxyXG4gICAgTmF2aWdhdGlvbk9wdGlvbnMsXHJcbiAgICBEaXNwbGF5SW5mbyxcclxuICAgIGRpc3BsYXlJbmZvRGVmYXVsdCxcclxuICAgIFBpY2tpbmdSZXN1bHQsXHJcbiAgICBUcmVlSW5mbyxcclxuICAgIExPQURfREFUQV9UWVBFLFxyXG4gICAgT05MWV9TRUxFQ1RfTEVBRixcclxuICAgIFBlcnNvbmFsQ29uZmlnLFxyXG4gICAgTG9va3VwTGF5b3V0LFxyXG59IGZyb20gXCIuL2xvb2t1cC1ncmlkLW9wdGlvbnNcIjtcclxuaW1wb3J0IHsgSUxvb2t1cEh0dHBTZXJ2aWNlLCBTZXJ2ZXJTaWRlVG9rZW4gfSBmcm9tIFwiLi9odHRwL0lMb29rdXBIdHRwU2VydmljZVwiO1xyXG5pbXBvcnQgeyBOYXZpZ2F0aW9uRmlsdGVyIH0gZnJvbSBcIi4vaHR0cC9SZW1vdGVQYXJhbXNcIjtcclxuaW1wb3J0IHsgTG9va3VwTGVmdENvbXBvbmVudCB9IGZyb20gXCIuL2xvb2t1cC1sZWZ0LmNvbXBvbmVudFwiO1xyXG5pbXBvcnQgeyBMb29rdXBEZWZhdWx0TWFwcGluZyB9IGZyb20gXCIuL2xvb2t1cC1kZWZhdXQtbWFwcGluZ1wiO1xyXG5pbXBvcnQgeyBMb29rdXBVdGlscyB9IGZyb20gXCIuL3V0aWxzXCI7XHJcbmltcG9ydCB7IFBlcnNvbmFsQ29uZmlnU2VydmljZSB9IGZyb20gXCIuL2xvb2t1cC1wcmVzb25hbENvbmZpZy5zZXJ2aWNlXCI7XHJcbmltcG9ydCB7XHJcbiAgICBVdGlsU2VydmljZSxcclxuICAgIFRyZWVOb2RlSGVscGVyLFxyXG4gICAgRmF2b3JpdGVIZWxwZXIsXHJcbiAgICBTZWxlY3Rpb25NYW5hZ2VyLFxyXG4gICAgRGF0YVRhYmxlRXZlbnRNYW5hZ2VyLFxyXG4gICAgVHJlZVRhYmxlRXZlbnRNYW5hZ2VyLFxyXG4gICAgTXVsdGlTZWxlY3Rpb25NYW5hZ2VyLFxyXG4gICAgTG9va3VwSHR0cE1hbmFnZXIsXHJcbiAgICBMb29rdXBDb21wb25lbnRNYW5hZ2VyLFxyXG4gICAgTG9va3VwRGlhbG9nTWFuYWdlcixcclxuICAgIG9uVGV4dENoYW5nZWQsXHJcbiAgICBMb29rdXBTZWxlY3Rpb25TZXJ2aWNlLFxyXG59IGZyb20gXCIuL3NlcnZpY2VzXCI7XHJcbmltcG9ydCB7IGNhdGNoRXJyb3IsIG1hcCwgc3dpdGNoTWFwIH0gZnJvbSBcInJ4anMvb3BlcmF0b3JzXCI7XHJcblxyXG5pbXBvcnQgeyBFdmVudE1hbmFnZXIgfSBmcm9tIFwiQGFuZ3VsYXIvcGxhdGZvcm0tYnJvd3NlclwiO1xyXG5pbXBvcnQgeyBjbG9uZURlZXAgfSBmcm9tIFwibG9kYXNoLWVzXCI7XHJcbmltcG9ydCB7IExvb2t1cFF1aWNrU2VsZWN0UGFuZWxDb21wb25lbnQgfSBmcm9tIFwiLi9xdWljay1zZWxlY3QvcXVpY2stc2VsZWN0LXBhbmVsLmNvbXBvbmVudFwiO1xyXG5pbXBvcnQgeyBMb29rdXBRdWlja1NlbGVjdERpcmVjdGl2ZSB9IGZyb20gXCIuL3F1aWNrLXNlbGVjdC9sb29rdXAtcXVpY2stc2VsZWN0LmRpcmVjdGl2ZVwiO1xyXG5cclxuXHJcbmV4cG9ydCBjb25zdCBMT09LVVBHUklEX1ZBTFVFX0FDQ0VTU09SOiBhbnkgPSB7XHJcbiAgICBwcm92aWRlOiBOR19WQUxVRV9BQ0NFU1NPUixcclxuICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IExvb2t1cEdyaWRDb21wb25lbnQpLFxyXG4gICAgbXVsdGk6IHRydWUsXHJcbn07XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiBcImZhcnJpcy1sb29rdXAtZ3JpZFwiLFxyXG4gICAgdGVtcGxhdGVVcmw6IFwiLi9sb29rdXAtZ3JpZC5jb21wb25lbnQuaHRtbFwiLFxyXG4gICAgc3R5bGVVcmxzOiBbXCIuL2xvb2t1cC1ncmlkLmNvbXBvbmVudC5zY3NzXCJdLFxyXG4gICAgcHJvdmlkZXJzOiBbXHJcbiAgICAgICAgTE9PS1VQR1JJRF9WQUxVRV9BQ0NFU1NPUixcclxuICAgICAgICBTaG9ydGN1dHNTZXJ2aWNlLFxyXG4gICAgICAgIExvb2t1cERlZmF1bHRNYXBwaW5nLFxyXG4gICAgICAgIExvb2t1cFV0aWxzLFxyXG4gICAgICAgIFBlcnNvbmFsQ29uZmlnU2VydmljZSxcclxuICAgIF0sXHJcbiAgICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lLFxyXG4gICAgZXhwb3J0QXM6IFwibG9va3VwXCJcclxufSlcclxuZXhwb3J0IGNsYXNzIExvb2t1cEdyaWRDb21wb25lbnRcclxuICAgIGV4dGVuZHMgTG9va3VwQ29tcG9uZW50XHJcbiAgICBpbXBsZW1lbnRzIE9uSW5pdCwgQWZ0ZXJWaWV3SW5pdCwgT25DaGFuZ2VzLCBPbkRlc3Ryb3lcclxue1xyXG4gICAgZ3JvdXBJY29uID0gSU5QVVRfR1JPVVBfSUNPTjtcclxuICAgIF9kaXNwbGF5VHlwZSA9IFwiXCI7XHJcblxyXG4gICAgLyoqIOS9v+eUqOihqOWNleiuvuiuoeWZqOS4reeahOaYvuekuuexu+Wei+OAguWQpuWImeS9v+eUqOWFg+aVsOaNruiuvue9rueahOaYvuekuuexu+Wei+OAgiDpu5jorqTvvJpmYWxzZSAqL1xyXG4gICAgQElucHV0KCkgY3VzdG9tRGlzcGxheVR5cGUgPSBmYWxzZTtcclxuICAgIEBJbnB1dCgpIHZpZXdUeXBlOiBcInRleHRcIiB8IFwidGFnXCIgPSBcInRleHRcIjtcclxuICAgIEBJbnB1dCgpXHJcbiAgICBnZXQgZGlzcGxheVR5cGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Rpc3BsYXlUeXBlO1xyXG4gICAgfVxyXG4gICAgc2V0IGRpc3BsYXlUeXBlKHZhbDogc3RyaW5nKSB7XHJcbiAgICAgICAgaWYgKHZhbCkge1xyXG4gICAgICAgICAgICBjb25zdCB0eXBlcyA9IE9iamVjdC52YWx1ZXMoTG9va3VwR3JpZERpc3BsYXlUeXBlKTtcclxuICAgICAgICAgICAgY29uc3QgaSA9IHR5cGVzLmZpbmRJbmRleCgobikgPT4gbiA9PT0gdmFsLnRvVXBwZXJDYXNlKCkpO1xyXG4gICAgICAgICAgICBpZiAoaSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoTG9va3VwR3JpZERpc3BsYXlUeXBlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2Rpc3BsYXlUeXBlID0gTG9va3VwR3JpZERpc3BsYXlUeXBlW2tleXNbaV1dO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fZGlzcGxheVR5cGUgPSB2YWw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqIOWQr+eUqOa4heepuuaMiemSriAqL1xyXG4gICAgQElucHV0KCkgZW5hYmxlQ2xlYXIgPSB0cnVlO1xyXG4gICAgLyoqIOacjeWKoeWZqOerr+aOkuW6jyAqL1xyXG4gICAgQElucHV0KCkgcmVtb3RlU29ydCA9IHRydWU7XHJcblxyXG4gICAgQElucHV0KCkgY29uZGl0aW9uOiBFbnRpdHlGaWx0ZXI7XHJcblxyXG4gICAgLyoqIOagkeihqOaYvuekuuWFqOmAieWkjemAieahhuOAgiDpu5jorqTkuI3mmL7npLogKi9cclxuICAgIEBJbnB1dCgpIHNob3dDaGVja0FsbCA9IGZhbHNlO1xyXG5cclxuICAgIC8qKiDmmK/lkKblkK/nlKjlpJrpgIkgKi9cclxuICAgIEBJbnB1dCgpIHNpbmdsZVNlbGVjdCA9IHRydWU7XHJcbiAgICAvKiog5aSa6YCJ5YiG6ZqU56ymICovXHJcbiAgICBASW5wdXQoKSBtdWx0aXBsZUNob2ljZVNlcGFyYXRvciA9IFwiLFwiO1xyXG4gICAgLyoqIOS4u+mUruWtl+autSAqL1xyXG4gICAgQElucHV0KCkgaWRGaWVsZD86IHN0cmluZztcclxuICAgIC8qKiDlj6/ku6XkuLrlhYPmlbDmja5JROOAgXdlYmFwaVVSTCAqL1xyXG4gICAgQElucHV0KCkgdXJpPzogc3RyaW5nID0gJyc7XHJcbiAgICAvKipcclxuICAgICAqIEJFIFJFU1QgUlVJXHJcbiAgICAgKiAtIOatpOWkhOiuvue9ruWQjiB1cmkg5aSx5pWIXHJcbiAgICAgKi9cclxuICAgIEBJbnB1dCgpIGJlVXJpID0gXCJcIjtcclxuICAgIC8qKlxyXG4gICAgICog5pi+56S66L+H5ruk5bel5YW35p2hXHJcbiAgICAgKi9cclxuICAgIEBJbnB1dCgpIHNob3dGaWx0ZXJCYXIgPSB0cnVlO1xyXG4gICAgLyoqIOaYr+WQpuWQr+eUqOWIhumhtSAqL1xyXG4gICAgQElucHV0KCkgcGFnaW5hdGlvbiA9IHRydWU7XHJcbiAgICAvKiog5b2T5YmN6aG157Si5byV77yM5LuOIDDlvIDlp4sgKi9cclxuICAgIEBJbnB1dCgpIHBhZ2VJbmRleCA9IDE7XHJcbiAgICAvKiog5q+P6aG16K6w5b2V5pWwICovXHJcbiAgICBASW5wdXQoKSBwYWdlU2l6ZSA9IDIwO1xyXG4gICAgLyoqIOWPr+eUqOWIhumhteiusOW9leaVsOWIl+ihqCAqL1xyXG4gICAgQElucHV0KCkgcGFnZUxpc3QgPSBbMTAsIDIwLCAzMCwgNTAsIDEwMF07XHJcbiAgICAvKiog5oC76K6w5b2V5pWwICovXHJcbiAgICBASW5wdXQoKSB0b3RhbCA9IDA7XHJcbiAgICAvKiog5Y+v5ouW5Yqo5YiXICovXHJcbiAgICAvLyBASW5wdXQoKSByZXNpemFibGVDb2x1bW5zID0gdHJ1ZTtcclxuICAgIC8qKiDmmL7npLrliJfkv6Hmga8sIOm7mOiupOS4uiBbXSAqL1xyXG4gICAgQElucHV0KCkgY29sdW1uczogYW55W10gPSBbXTtcclxuXHJcbiAgICAvKiog5biu5Yqp5p+l6K+i5piv5ZCm5Li66L+c56uv5p+l6K+iICovXHJcbiAgICBASW5wdXQoKSByZW1vdGVTZWFyY2ggPSB0cnVlO1xyXG5cclxuICAgIC8qKiDmlofmnKzlj5jljJblkI7vvIzov5vooYzmnI3liqHlmajnq6/mn6Xor6IgKi9cclxuICAgIEBJbnB1dCgpIHNlYXJjaE9uU2VydmVyID0gdHJ1ZTtcclxuICAgIC8qKiDkuI3ov5vooYzmnI3liqHlmajmn6Xor6LvvIzmnInllaXnrpfllaUgKi9cclxuICAgIEBJbnB1dCgpIG5vc2VhcmNoID0gZmFsc2U7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlkK/nlKjku7vmhI/ovpPlhaXlkI7vvIzlgLzpgJrov4fovpPlhaXml7bop6blj5FcclxuICAgICAqL1xyXG4gICAgQE91dHB1dCgpIGNsZWFyTWFwcGluZ3MgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlhYHorrjovpPlhaXnmoTlrZfnrKbmnIDlpKfplb/luqbjgIJcclxuICAgICAqIOS7u+aEj+i+k+WFpeaXtu+8jOatpOWxnuaAp+acieaViFxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBtYXhMZW5ndGg7XHJcblxyXG4gICAgQElucHV0KCkgbWFwcGluZ0ZuOiAocm93RGF0YSwgbWFwRmllbGRzLCBiaW5kaW5nRGF0YT86IGFueSkgPT4gdm9pZDtcclxuICAgIC8qKiDmlbDmja7liJfooaggKi9cclxuICAgIEBJbnB1dCgpIGl0ZW1zOiBhbnk7XHJcbiAgICAvLyDmlLbol4/liJfooahcclxuICAgIEBJbnB1dCgpIGZhdm9yaXRlSXRlbXM6IGFueVtdID0gW107XHJcbiAgICAvKiog6Ieq5a6a5LmJ5pWw5o2uICovXHJcbiAgICBASW5wdXQoKSBjdXN0b21EYXRhOiBhbnk7XHJcblxyXG4gICAgLyoqIOe7keWumuWAvOaJgOWcqOeahOWvueixoSAqL1xyXG4gICAgQElucHV0KCkgYmluZGluZ0RhdGE6IHt9O1xyXG5cclxuICAgIEBJbnB1dCgpIHRyZWVJbmZvOiBUcmVlSW5mbztcclxuICAgIC8qKiDmmK/lkKblkK/nlKjnuqfogZTpgInmi6nmjqfliLbpgInpobkgKi9cclxuICAgIEBJbnB1dCgpIGVuYWJsZUNhc2NhZGUgPSBmYWxzZTtcclxuICAgIC8qKiDnuqfogZTmjqfliLbpu5jorqTlgLzvvJogZW5hYmxlOiDlkIzmraXpgInmi6ksIHVw77ya5YyF5ZCr5LiK57qnLCBkb3du77ya5YyF5ZCr5LiL57qnLCBkaXNhYmxl77ya5LuF6YCJ5oup6Ieq6LqrICovXHJcbiAgICBASW5wdXQoKSBjYXNjYWRlU3RhdHVzOiBcImVuYWJsZVwiIHwgXCJ1cFwiIHwgXCJkb3duXCIgfCBcImRpc2FibGVcIiA9IFwiZW5hYmxlXCI7XHJcbiAgICAvKiog5YiG5Yir57qn6IGU6YCJ6aG555qE5ZCv55So54q25oCB77yM6buY6K6k5YWo6YOo5ZCv55SoICovXHJcbiAgICBASW5wdXQoKSBjYXNjYWRlSXRlbXMgPSB7XHJcbiAgICAgICAgZW5hYmxlOiB0cnVlLFxyXG4gICAgICAgIHVwOiB0cnVlLCBcclxuICAgICAgICBkb3duOiB0cnVlLFxyXG4gICAgICAgIGRpc2FibGU6IHRydWVcclxuICAgIH1cclxuICAgIC8qKiDmmL7npLrnuqfogZTmjqfliLYgKi9cclxuICAgIEBJbnB1dCgpIHNob3dDYXNjYWRlQ29udHJvbCA9IHRydWU7XHJcblxyXG4gICAgQElucHV0KCkgcGxhY2Vob2xkZXIgPSBcIlwiO1xyXG5cclxuICAgIC8qKiDmmL7npLrlt7LpgInorrDlvZXliJfooajjgIIg6buY6K6k5Li6IGZhbHNlIOS4jeaYvuekuiAqL1xyXG4gICAgQElucHV0KCkgc2hvd1NlbGVjdGVkID0gZmFsc2U7XHJcblxyXG4gICAgLyoqIOW6lOeUqOaUtuiXj+WkuSAqL1xyXG4gICAgQElucHV0KCkgdXNlRmF2b3JpdGUgPSBmYWxzZTtcclxuICAgIC8qKiDmlLbol4/mlbDmja7mnaXoh6rkuo7vvJogbG9jYWxlOiDmnKzlnLDlrZjlgqjvvIwgcmVtb3RlOiDmnI3liqHlmajnq6/lrZjlgqggKi9cclxuICAgIEBJbnB1dCgpIGZhdm9yaXRlRGF0YUZyb206IFwibG9jYWxlXCIgfCBcInJlbW90ZVwiID0gXCJyZW1vdGVcIjtcclxuICAgIC8qKiDkvb/nlKjmj5DnpLos5b+r5o236YCJ5oupICovXHJcbiAgICBASW5wdXQoKSB1c2VUaXAgPSBmYWxzZTtcclxuICAgIC8qKiDorrDlvZXnqpflj6PlpKflsI8gKi9cclxuICAgIEBJbnB1dCgpIGlzUmVjb3JkU2l6ZSA9IGZhbHNlO1xyXG5cclxuICAgIC8qKiDlv6vpgJ/pgInmi6kgKi9cclxuICAgIEBJbnB1dCgpIHVzZXJJZDogc3RyaW5nO1xyXG5cclxuICAgIC8qKiDmmK/lkKblkK/nlKjpgInkuK12YWx1ZeWAvOWvueW6lOeahOihjOaVsOaNru+8jOm7mOiupCB0cnVlICovXHJcbiAgICBASW5wdXQoKSBlbmFibGVUb1NlbGVjdCA9IHRydWU7XHJcblxyXG4gICAgQElucHV0KCkgZW5hYmxlRmluZFRleHQgPSBmYWxzZTtcclxuICAgIC8qKiAtMTog5LiN5bGV5byA77ybIDA6IOWFqOmDqOWxleW8gO+8mz4wOiDlsZXlvIDliLDmjIflrprnuqfmlbAgKi9cclxuICAgIEBJbnB1dCgpIGV4cGFuZExldmVsID0gLTE7XHJcblxyXG4gICAgQElucHV0KCkgbmF2VHJlZVRhYmxlT3B0aW9uczogYW55ID0ge307XHJcbiAgICBASW5wdXQoKSB0cmVlVGFibGVPcHRpb25zOiBhbnkgPSB7fTtcclxuICAgIEBJbnB1dCgpIGRhdGFUYWJsZU9wdGlvbnM6IGFueSA9IHt9O1xyXG5cclxuXHJcbiAgICBkZWZhdWx0VHJlZVRhYmxlT3B0aW9ucyA9IHtcclxuICAgICAgICBtYXhMZXZlbDogOSxcclxuICAgICAgICBlbmFibGVDb250ZXh0TWVudTogZmFsc2UsXHJcbiAgICAgICAgY29udGV4dE1lbnVJdGVtczogW10sXHJcbiAgICB9O1xyXG5cclxuICAgIC8qKiDmoJHlvaLluK7liqnmlbDmja7liqDovb3mlrnlvI/vvJogZGVmYXVsdDog5YaF572u5Y+W5pWw77ybIGxvYWRhbGw6IOWKoOi9veaJgOaciSBsYXllcmxvYWTvvJrliIblsYLliqDovb0gKi9cclxuICAgIEBJbnB1dCgpIGxvYWRUcmVlRGF0YVR5cGU6IFwiZGVmYXVsdFwiIHwgXCJsb2FkYWxsXCIgfCBcImxheWVybG9hZFwiID0gXCJkZWZhdWx0XCI7XHJcblxyXG4gICAgLyoqIOeql+WPo+aJk+W8gOWQjueri+WNs+WKoOi9veaVsOaNru+8jOm7mOiupOS4uiB0cnVlICovXHJcbiAgICBASW5wdXQoKSBsb2FkRGF0YVdoZW5PcGVuID0gdHJ1ZTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIOWvvOiIquWIl+ihqO+8jOagkeWIl+ihqOWcqOW4ruWKqeaJk+W8gOWQjumAieS4reeahOaVsOaNrjtcclxuICAgICAqIOiuvue9ruWQju+8jGBzZWxlY3RGaXJzdEluTmF2YCDlpLHmlYjvvIFcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgbmF2U2VsZWN0ZWRJZHMgPSBcIlwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICog5a+86Iiq5biu5Yqp77yM6YCJ5Lit56ysMeadoeaVsOaNru+8jOm7mOiupOS4uiBmYWxzZTtcclxuICAgICAqIOazqOaEj++8muW9k2BuYXZTZWxlY3RlZElkc2DkuI3kuLrnqbrml7bvvIzmraTlsZ7mgKflpLHmlYjjgIJcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgc2VsZWN0Rmlyc3RJbk5hdiA9IGZhbHNlO1xyXG5cclxuICAgIC8qKiDlkK/nlKjmnoTpgKDlrozmlbTmoJHov4fmu6QgKi9cclxuICAgIEBJbnB1dCgpIGVuYWJsZUZ1bGxUcmVlID0gdHJ1ZTtcclxuXHJcbiAgICAvKiog5pi+56S65paH5pys6Ieq5a6a5LmJ5Ye95pWwICovXHJcbiAgICBASW5wdXQoKSBkaXNwbGF5Rm9ybWF0dGVyOiAoXHJcbiAgICAgICAgdmFsdWU6IHN0cmluZyxcclxuICAgICAgICBkYXRhOiBhbnksXHJcbiAgICAgICAgaW5zdGFuY2U6IGFueVxyXG4gICAgKSA9PiBzdHJpbmcgPSB1bmRlZmluZWQ7XHJcbiAgICAvKiog5pi+56S65paH5pys5a2X5q616ZuG5ZCI77yM5LulIOiLseaWhyDpgJflj7fpmpTlvIAgKi9cclxuICAgIEBJbnB1dCgpIGRpc3BsYXlGaWVsZHMgPSBcIlwiO1xyXG4gICAgQElucHV0KCkgZGlzcGxheVRleHRTZXBhcmF0b3IgPSBcIl9cIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIOW4ruWKqeWFg+aVsOaNrklE77yM5LiN5Li656m65pe26LCD55So5oyH5a6a55qEVVJJXHJcbiAgICAgKiAvYXBpL3J1bnRpbWUvYmNjL3YxLjAvaGVscC9kYXRhL3toZWxwSWR9XHJcbiAgICAgKi9cclxuICAgIEBJbnB1dCgpIGhlbHBJZCA9IFwiXCI7XHJcbiAgICAvKiog5paH5pys5a+56b2Q5pa55byP77ybIGxlZnQgfCBjZW50ZXIgfCByaWdodDsg6buY6K6kIGxlZnQgKi9cclxuICAgIEBJbnB1dCgpIHRleHRBbGlnbiA9IFwibGVmdFwiO1xyXG5cclxuICAgIC8qKiDpvKDmoIfmu5Hov4fovpPlhaXmoYbml7bmmL7npLrovpPlhaXmoYblhoXnmoTmlofmnKzkv6Hmga8gKi9cclxuICAgIEBJbnB1dCgpIGVuYWJsZVRpdGxlID0gdHJ1ZTtcclxuICAgIEBJbnB1dCgpIHVzZUV4dGVuZEluZm8gPSBmYWxzZTtcclxuICAgIEBJbnB1dCgpIGV4dEluZm9GaWVsZHMgPSBcIlwiO1xyXG4gICAgQElucHV0KCkgZXh0SW5mb0Zvcm1hdHRlcjogRXh0SW5mb0Zvcm1hdHRlcjtcclxuICAgIEBJbnB1dCgpIGV4dGVuZEluZm8gPSBcIlwiO1xyXG4gICAgLyoqIElERSDorr7orqHlmajoh6rlrprkuYnmoLzlvI/ljJYgMjEwMyAqL1xyXG4gICAgQElucHV0KCkgY3VzdG9tRm9ybWF0dGVyOiBDdXN0b21EYXRhRm9ybWF0dGVyID0gbnVsbDtcclxuICAgIEBJbnB1dCgpIGN1c3RvbU5hdkZvcm1hdHRlcjogQ3VzdG9tRGF0YUZvcm1hdHRlciA9IG51bGw7XHJcblxyXG4gICAgLyoqIOiHquWumuS5ieehruWumuS6i+S7tiAqL1xyXG4gICAgQElucHV0KCkgb2tIYW5kbGVyID0gbnVsbDtcclxuICAgIC8qKiDoh6rlrprkuYnlj5bmtojkuovku7YgKi9cclxuICAgIEBJbnB1dCgpIGNhbmNlbEhhbmRsZXIgPSBudWxsO1xyXG5cclxuICAgIEBJbnB1dCgpIHRhZ2JveEhlaWdodCA9IFwiYXV0b1wiO1xyXG4gICAgQElucHV0KCkgbWF4VGFnYm94SGVpZ2h0O1xyXG5cclxuICAgIC8qKiDlkK/nlKjojrflj5bmiYDmnInlrZDnuqfmlbDmja7nmoTlip/og70gKi9cclxuICAgIEBJbnB1dCgpIGVuYWJsZUdldEFsbENoaWxkTm9kZXMgPSB0cnVlO1xyXG5cclxuICAgIEBJbnB1dCgpIHNob3J0Y3V0S2V5ID0ge1xyXG4gICAgICAgIC8qKiDmiZPlvIDluK7liqnnqpflj6MgKi9cclxuICAgICAgICBvcGVuOiBcIkFycm93UmlnaHRcIixcclxuICAgICAgICAvKiog56Gu6K6k6YCJ5oup5pWw5o2uICovXHJcbiAgICAgICAgY29uZmlybTogXCJFbnRlclwiLFxyXG4gICAgICAgIC8qKiDmkJzntKLmoYbnhKbngrkgKi9cclxuICAgICAgICBzZWFyY2hGb2N1czogXCJGM1wiLFxyXG4gICAgICAgIC8qKiDpgInkuK3kuIrkuIDmnaEgKi9cclxuICAgICAgICBtb3ZlVXA6IFwiQXJyb3dVcFwiLFxyXG4gICAgICAgIC8qKiDpgInkuK3kuIvkuIDmnaEgKi9cclxuICAgICAgICBtb3ZlRG93bjogXCJBcnJvd0Rvd25cIixcclxuICAgICAgICAvKiog5bGV5byA6IqC54K5ICovXHJcbiAgICAgICAgZXhwYW5kOiBcIkFycm93UmlnaHRcIixcclxuICAgICAgICAvKiog5oqY5Y+g6IqC54K5ICovXHJcbiAgICAgICAgY29sbGFwc2U6IFwiQXJyb3dMZWZ0XCIsXHJcbiAgICAgICAgLyoqIOS4i+S4gOmhtSAqL1xyXG4gICAgICAgIG5leHRQYWdlcjogXCJQYWdlRG93blwiLFxyXG4gICAgICAgIC8qKiDkuIrkuIDpobUgKi9cclxuICAgICAgICBwcmV2UGFnZXI6IFwiUGFnZVVwXCIsXHJcbiAgICB9O1xyXG4gICAgLyoqIOW/q+aNt+mAieaLqeebuOWFs+mFjee9rumhue+8jOm7mOiupOS4uiBudWxsLCDljbPkuI3lkK/nlKjmraTlip/og70gKi9cclxuICAgIEBJbnB1dCgpIHF1aWNrU2VsZWN0OiBRdWlja1NlbGVjdE9wdGlvbiA9IG51bGw7XHJcblxyXG4gICAgLyoqIOagkeW9ouW4ruWKqSDmmK/lkKbkvb/nlKjmoJHlvaLnu5PmnoTmlbDmja7jgILpu5jorqTkuLogdHJ1ZSwg5b2T5Li6IGZhbHNlIOaXtu+8jOacjeWKoeWZqOerr+aXoOmhu+aehOmAoOagkeW9oue7k+aehO+8jOaMieaZrumAmuWIl+ihqOi+k+WHuiAqL1xyXG4gICAgQElucHV0KCkgdHJlZVRvTGlzdCA9IGZhbHNlO1xyXG4gICAgQElucHV0KCkgbmF2VHJlZVRvTGlzdCA9IGZhbHNlO1xyXG5cclxuICAgIC8qKiDluKblr7zoiKrnmoTluK7liqnkuK3vvIzmmK/lkKbmmL7npLrlt6bkvqflr7zoiKrpg6jliIbjgILpu5jorqQgdHJ1ZSAqL1xyXG4gICAgQElucHV0KCkgc2hvd05hdmlnYXRpb24gPSB0cnVlO1xyXG5cclxuICAgIC8qKiDmlbDmja7pgInmi6nlkI7vvIzlgLzmmKDlsITliY3op6blj5FcclxuICAgICAqIOi/lOWbniBPYnNlcnZhYmxlXHJcbiAgICAgKiAgICAgIGNhblNlbGVjdDogPGJvb2xlYW4+ICDmmK/lkKblhYHorrjpgInmi6lcclxuICAgICAqICAgICAgbWVzc2FnZTogPHN0cmluZz4g5LiN5YWB6K646YCJ5oup5pe255qE5o+Q56S65L+h5oGvXHJcbiAgICAgKi9cclxuICAgIEBJbnB1dCgpIGJlZm9yZVNlbGVjdERhdGE6IChwOiB7XHJcbiAgICAgICAgaW5zdGFuY2U6IGFueTtcclxuICAgICAgICBkYXRhOiBhbnk7XHJcbiAgICB9KSA9PiBPYnNlcnZhYmxlPHsgY2FuU2VsZWN0OiBib29sZWFuOyBtZXNzYWdlOiBzdHJpbmcgfSB8IGJvb2xlYW4+O1xyXG5cclxuXHJcbiAgICBASW5wdXQoKSBsYXlvdXRGb3JtYXQ6IExvb2t1cExheW91dCA9IExvb2t1cExheW91dC5kZWZhdWx0O1xyXG5cclxuICAgIEBPdXRwdXQoKSBzZWxlY3RlZERhdGEgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICBAT3V0cHV0KCkgY2xlYXIgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICBAT3V0cHV0KCkgc2VhcmNoID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgLy8g5biu5Yqp5paH5pys5qGG5Lit5YC85Y+Y5YyW5LqL5Lu2XHJcbiAgICBAT3V0cHV0KCkgdmFsdWVDaGFuZ2VkID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgQE91dHB1dCgpIGxvYWRTdWNjZXNzID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICAgIEBPdXRwdXQoKSBwYWdlckNoYW5nZWQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgQE91dHB1dCgpIGV4cGFuZFRyZWVOb2RlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgQE91dHB1dCgpIHRleHRDaGFuZ2VkID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICAgIEBPdXRwdXQoKSBjaGVja2VkQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjx7XHJcbiAgICAgICAgZGF0YTogYW55O1xyXG4gICAgICAgIGlzQ2hlY2s6IGJvb2xlYW47XHJcbiAgICB9PigpO1xyXG5cclxuICAgIEBPdXRwdXQoKSB0YWdSZW1vdmVkID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICAgIC8qKiDlhoXlrrnkuK3nlZnnmb3ovrnot50gKi9cclxuICAgIGNvbnRhaW5lck1hcmdpbiA9IHsgdG9wOiAwLCBib3R0b206IDUsIGxlZnQ6ICAxNCwgcmlnaHQ6IDE0IH07XHJcbiAgICBjb250YWluZXJTdHlsZSA9IHtcclxuICAgIH07XHJcblxyXG4gICAgX2dyaWRPcHRpb25zOiBMb29rdXBHcmlkT3B0aW9ucyA9IGxvb2t1cEdyaWREZWZhdWx0cztcclxuXHJcbiAgICBnZXQgZ3JpZE9wdGlvbnMoKSB7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICB0aGlzLnVzZUZhdm9yaXRlICYmXHJcbiAgICAgICAgICAgIHRoaXMuY29sdW1ucyAmJlxyXG4gICAgICAgICAgICB0aGlzLmNvbHVtbnMubGVuZ3RoID4gMCAmJlxyXG4gICAgICAgICAgICAhdGhpcy5jb2x1bW5zLmZpbmQoKGl0ZW0pID0+IGl0ZW0uZmllbGQgPT09IEZBVk9SSVRFX0ZJRUxEX05BTUUpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29sdW1ucy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGZpZWxkOiBGQVZPUklURV9GSUVMRF9OQU1FLFxyXG4gICAgICAgICAgICAgICAgdGl0bGU6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogNDAsXHJcbiAgICAgICAgICAgICAgICBhbGlnbjogXCJjZW50ZXJcIixcclxuICAgICAgICAgICAgICAgIGZpeGVkOiAncmlnaHQnLFxyXG4gICAgICAgICAgICAgICAgLy8gZml4ZWRXaWR0aDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGZvcm1hdHRlcjogdGhpcy5mYXZIZWxwZXIuZmF2b3JpdGVDb2x1bW5Gb3JtYXR0ZXIsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9ncmlkT3B0aW9ucyA9IE9iamVjdC5hc3NpZ24odGhpcy5fZ3JpZE9wdGlvbnMsIHtcclxuICAgICAgICAgICAgc2luZ2xlU2VsZWN0OiB0aGlzLnNpbmdsZVNlbGVjdCxcclxuICAgICAgICAgICAgaWRGaWVsZDogdGhpcy5pZEZpZWxkLFxyXG4gICAgICAgICAgICB1cmk6IHRoaXMudXJpLFxyXG4gICAgICAgICAgICBzaG93RmlsdGVyQmFyOiB0aGlzLnNob3dGaWx0ZXJCYXIsXHJcbiAgICAgICAgICAgIHBhZ2luYXRpb246IHRoaXMucGFnaW5hdGlvbixcclxuICAgICAgICAgICAgcGFnZUluZGV4OiB0aGlzLnBhZ2VJbmRleCxcclxuICAgICAgICAgICAgcGFnZVNpemU6IHRoaXMucGFnZVNpemUsXHJcbiAgICAgICAgICAgIHBhZ2VMaXN0OiB0aGlzLnBhZ2VMaXN0LFxyXG4gICAgICAgICAgICB0b3RhbDogdGhpcy50b3RhbCxcclxuICAgICAgICAgICAgaXRlbXM6IHRoaXMuaXRlbXMsXHJcbiAgICAgICAgICAgIGNvbHVtbnM6IHRoaXMuY29sdW1ucyxcclxuICAgICAgICAgICAgcmVzaXphYmxlQ29sdW1uczogdHJ1ZSxcclxuICAgICAgICAgICAgZml4ZWRIZWFkZXI6IHRydWUsXHJcbiAgICAgICAgICAgIGhvdmVyOiB0cnVlLFxyXG4gICAgICAgICAgICB0cmVlSW5mbzogdGhpcy50cmVlSW5mbyxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dyaWRPcHRpb25zO1xyXG4gICAgfVxyXG4gICAgQElucHV0KCkgc2V0IGdyaWRPcHRpb25zKG9wdHMpIHtcclxuICAgICAgICB0aGlzLl9ncmlkT3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuX2dyaWRPcHRpb25zLCBvcHRzKTtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkQ29sdW1ucyA9IHRoaXMubXVsdGlTZWxNZ3IuaW5pdFNlbGVjdGVkQ29sdW1ucygpO1xyXG4gICAgfVxyXG5cclxuICAgIEBWaWV3Q2hpbGQoXCJjb250ZW50Q29udGFpbmVyXCIsIHsgcmVhZDogVmlld0NvbnRhaW5lclJlZiB9KVxyXG4gICAgY29udGVudENvbnRhaW5lcjogVmlld0NvbnRhaW5lclJlZjtcclxuICAgIEBWaWV3Q2hpbGQoXCJmYXZvcml0ZXNDb250YWluZXJcIiwgeyByZWFkOiBWaWV3Q29udGFpbmVyUmVmIH0pXHJcbiAgICBmYXZvcml0ZXNDb250YWluZXI6IFZpZXdDb250YWluZXJSZWY7XHJcbiAgICBAVmlld0NoaWxkKFwibGVmdENvbnRhaW5lclwiLCB7IHJlYWQ6IFZpZXdDb250YWluZXJSZWYgfSlcclxuICAgIGxlZnRDb250YWluZXI6IFZpZXdDb250YWluZXJSZWY7XHJcbiAgICBAVmlld0NoaWxkKFwiY2VudGVyQ29udGFpbmVyXCIsIHsgcmVhZDogVmlld0NvbnRhaW5lclJlZiB9KVxyXG4gICAgY2VudGVyQ29udGFpbmVyOiBWaWV3Q29udGFpbmVyUmVmO1xyXG4gICAgQFZpZXdDaGlsZChcIm11bHRpU2VsZWN0RFRcIikgbXVsdGlTZWxlY3REVDogRGF0YVRhYmxlQ29tcG9uZW50O1xyXG4gICAgQFZpZXdDaGlsZChcImlucHV0Z3JvdXBcIikgaW5wdXRHcm91cDogSW5wdXRHcm91cENvbXBvbmVudDtcclxuICAgIEBWaWV3Q2hpbGQoXCJsZWZ0UGFuZWxcIikgbGVmdFBhbmVsOiBMYXlvdXRQYW5lbENvbXBvbmVudDtcclxuICAgIEBWaWV3Q2hpbGQoXCJ0YWdib3hcIikgdGFnYm94OiBFbGVtZW50UmVmO1xyXG5cclxuICAgIEBWaWV3Q2hpbGQoXCJva2J0blwiKSBva0J1dHRvbjogRWxlbWVudFJlZjtcclxuICAgIEBWaWV3Q2hpbGQoXCJ0YWdJbnB1dFwiKSB0YWdJbnB1dDogSW5wdXRHcm91cENvbXBvbmVudDtcclxuXHJcbiAgICBjb21wb25lbnRSZWY6IENvbXBvbmVudFJlZjxhbnk+O1xyXG4gICAgbGVmdENvbXBvbmVudFJlZjogQ29tcG9uZW50UmVmPExvb2t1cExlZnRDb21wb25lbnQ+O1xyXG4gICAgZmF2b3JpdGVzQ29tcG9uZW50UmVmOiBDb21wb25lbnRSZWY8YW55PjtcclxuXHJcbiAgICBwdWJsaWMgaHR0cDogSUxvb2t1cEh0dHBTZXJ2aWNlO1xyXG4gICAgcHVibGljIG1lc3NhZ2VyU2VydmljZTogTWVzc2FnZXJTZXJ2aWNlO1xyXG4gICAgcHVibGljIGxvYWRpbmdTZXJ2aWNlOiBMb2FkaW5nU2VydmljZTtcclxuICAgIGxvYWRpbmc6IExvYWRpbmdDb21wb25lbnQ7XHJcbiAgICAvLyBkYXRhRmllbGRNYXBzOiBhbnk7XHJcbiAgICBuYXZpZ2F0aW9uT3B0aW9uczogTmF2aWdhdGlvbk9wdGlvbnM7XHJcblxyXG4gICAgLy8g5a+86Iiq5biu5Yqp5bem5YiZ5a695bqmXHJcbiAgICBsZWZ0UGFuZWxXaWR0aCA9IDMyMDtcclxuICAgIC8vIOWvvOiIquW4ruWKqeeql+WPo+acgOWwj+WuveW6plxyXG4gICAgbmF2TG9va3VwRGlhbG9nTWluV2lkdGggPSA5NjA7XHJcblxyXG4gICAgbmF2aWdhdGlvbkZpbHRlcjogTmF2aWdhdGlvbkZpbHRlciA9IG51bGw7XHJcblxyXG4gICAgc3Vic2NyaXB0aW9uczogU3Vic2NyaXB0aW9uW10gPSBbXTtcclxuICAgIGRpYWxvZ09wZW5lZFN1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uO1xyXG4gICAgZGlhbG9nQ2xvc2VkU3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb247XHJcblxyXG4gICAgaXNUZXh0Q2hhbmdlID0gZmFsc2U7XHJcbiAgICBpc1RhYkNoYW5nZWQgPSBmYWxzZTtcclxuXHJcbiAgICBkaXNwbGF5SW5mbzogRGlzcGxheUluZm8gPSBPYmplY3QuYXNzaWduKHt9LCBkaXNwbGF5SW5mb0RlZmF1bHQpO1xyXG5cclxuICAgIHRhYkNoYW5nZVN1YnNjcmlwdGlvbiA9IG51bGw7XHJcbiAgICAvLyDmmoLlrZjooYzngrnlh7vmlbDmja4gIOeUqOS6juaUtuiXj1xyXG4gICAgcGVyc29uYWxDb25mOiBQZXJzb25hbENvbmZpZyA9IHt9O1xyXG4gICAgZmF2b3JpdGVDb2x1bW5zOiBhbnlbXSA9IFtdO1xyXG4gICAgLyoqIOS4tOaXtuafpeivouWPguaVsCAqL1xyXG4gICAgX3NlYXJjaFN0YXRlID0gbnVsbDtcclxuICAgIGFsbERhdGE6IGFueSA9IFtdO1xyXG4gICAgZ2V0IHNlbGVjdGlvbnMoKSB7XHJcbiAgICAgICAgY29uc3Qgc2VsZWN0SXRlbXMgPSB0aGlzLmxvb2t1cFNlbGVjdGlvblNlci5nZXRTZWxlY3Rpb25zKCk7XHJcbiAgICAgICAgaWYgKHRoaXMuc2luZ2xlU2VsZWN0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxlY3RJdGVtc1swXTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gc2VsZWN0SXRlbXM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0IHVzZVBlcnNpb25hbENvbmYoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudXNlRmF2b3JpdGUgfHwgdGhpcy51c2VUaXAgfHwgdGhpcy5pc1JlY29yZFNpemU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGRpc3BsYXlUZXh0TGlzdCgpIHtcclxuICAgICAgICBpZiAodGhpcy5kaXNwbGF5VGV4dCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kaXNwbGF5VGV4dC5zcGxpdCh0aGlzLm11bHRpcGxlQ2hvaWNlU2VwYXJhdG9yKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBwZXJzb25hbENvbmZpZ1NlcnZpY2U6IFBlcnNvbmFsQ29uZmlnU2VydmljZTtcclxuICAgIHB1YmxpYyB1dGlsU2VydmljZTogVXRpbFNlcnZpY2U7XHJcbiAgICBwdWJsaWMgdHJlZU5vZGVIZWxwZXI6IFRyZWVOb2RlSGVscGVyO1xyXG4gICAgcHVibGljIGxvY2FsU2VydmljZTogTG9jYWxlU2VydmljZTtcclxuICAgIHB1YmxpYyBub3RpZnlTZXJ2aWNlOiBOb3RpZnlTZXJ2aWNlO1xyXG4gICAgYWxsQ29sdW1uc1RpdGxlID0gXCLmiYDmnInliJdcIjtcclxuICAgIG11c3RXcml0ZVNvbWV0aGluZyA9IFwi6K+36L6T5YWl5YWz6ZSu5a2X5ZCO5p+l6K+i44CCXCI7XHJcbiAgICBtdXN0Q2hvb3NBZGF0YXJvdyA9IFwi6K+36YCJ5oup5LiA5p2h6K6w5b2V77yBXCI7XHJcbiAgICBhZGRGYXZvcml0ZVN1Y2Nlc3MgPSBcIuaUtuiXj+aIkOWKn+OAglwiO1xyXG4gICAgZGVsRmF2b3JpdGVTdWNjZXNzID0gXCLnp7vpmaTmlLbol4/miJDlip/jgIJcIjtcclxuXHJcbiAgICAvKiog5L2/55So5YaF572u55qE5p+l6K+i5pa55rOVLCDpu5jorqQgZmFsc2UgKi9cclxuICAgIHVzZUluc2lkZVNlYXJjaEhhbmRsZXIgPSBmYWxzZTtcclxuICAgIHNlYXJjaGluZyA9IGZhbHNlO1xyXG4gICAgLyoqIOS4tOaXtuWtmOWCqOafpeivoue7k+aenOmbhiAqL1xyXG4gICAgX3NlYXJjaFJlc3VsdCA9IG51bGw7XHJcblxyXG4gICAgbG9va3VwaW5pdGlhbGl6YXRpb25TdWJqZWN0ID0gbmV3IFN1YmplY3QoKTtcclxuXHJcbiAgICAvKiog5aSa6YCJ5pe277yM6YCJ5Lit55qE5pWw5o2uICovXHJcbiAgICBjdXJyZW50U2VsZWN0ZWRJdGVtczogT2JzZXJ2YWJsZTxhbnk+ID0gb2YoW10pO1xyXG4gICAgLyoqIOW3sumAieaVsOaNruWIl+S/oeaBryAqL1xyXG4gICAgc2VsZWN0ZWRDb2x1bW5zID0gW107XHJcbiAgICBhY3RpdmVUYWI6IHN0cmluZyB8IFwiZGF0YWxpc3RcIiB8IFwiZmF2b3JpdGVcIiB8IFwic2VsZWN0ZWRcIiA9IFwiZGF0YWxpc3RcIjtcclxuXHJcbiAgICBmYXZIZWxwZXI6IEZhdm9yaXRlSGVscGVyID0gbnVsbDtcclxuICAgIHR0RXZlbnRNZ3I6IFRyZWVUYWJsZUV2ZW50TWFuYWdlciA9IG51bGw7XHJcbiAgICBtdWx0aVNlbE1ncjogTXVsdGlTZWxlY3Rpb25NYW5hZ2VyID0gbnVsbDtcclxuICAgIGh0dHBNZ3I6IExvb2t1cEh0dHBNYW5hZ2VyID0gbnVsbDtcclxuICAgIGxvb2t1cENtcE1ncjogTG9va3VwQ29tcG9uZW50TWFuYWdlciA9IG51bGw7XHJcbiAgICBkaWFsb2dNZ3I6IExvb2t1cERpYWxvZ01hbmFnZXIgPSBudWxsO1xyXG4gICAgc2VsZWN0aW9uTWdyOiBTZWxlY3Rpb25NYW5hZ2VyID0gbnVsbDtcclxuICAgIGR0RXZlbnRNZ3I6IERhdGFUYWJsZUV2ZW50TWFuYWdlciA9IG51bGw7XHJcblxyXG4gICAgbG9va3VwU2VsZWN0aW9uU2VyOiBMb29rdXBTZWxlY3Rpb25TZXJ2aWNlID0gbnVsbDtcclxuXHJcbiAgICBjb250cm9sSWQgPSBcIlwiO1xyXG4gICAgc2F2aW5nRmFvcml0ZURhdGEgPSBmYWxzZTtcclxuICAgIGlzUmVhZHkgPSBmYWxzZTtcclxuICAgIHNob3dUYWdib3hDbGVhckJ1dHRvbiA9IGZhbHNlO1xyXG4gICAgaGFzRXJyb3IgPSBmYWxzZTtcclxuXHJcbiAgICBpc0dldEFsbENoaWRsTm9kZXMgPSBmYWxzZTtcclxuICAgIGV2ZW50TWFuYWdlcjogRXZlbnRNYW5hZ2VyO1xyXG4gICAgLyoqIOmAieS4reiusOW9lUlE77yM6Ieq5a6a5LmJ5biu5Yqp5Y+W5pWw5pe25L2/55SoICovXHJcbiAgICBzZWxlY3RlZElkcyA9IFtdO1xyXG4gICAgcHJpdmF0ZSBsb29rdXBTZWFyY2hJbnB1dEV2ZW50ID0gbnVsbDtcclxuICAgIHByaXZhdGUgZmFycmlzSW5zdGFuY2VzOiBGYXJyaXNDb21wb25lbnRJbnN0YW5jZVNlcnZpY2UgPSBudWxsO1xyXG4gICAgLyoqIOeUqOaIt+WIneWni+iuvue9riAqL1xyXG4gICAgcHJpdmF0ZSBfdXNlclNldHRpbmdzOiBhbnkgPSB7fTtcclxuXHJcbiAgICBnZXQgdXNlckluaXRpYWxDb25maWcoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3VzZXJTZXR0aW5ncztcclxuICAgIH1cclxuXHJcbiAgICBfdHJlZUluZm9fID0gbnVsbDtcclxuXHJcbiAgICAvKiogZGlhbG9nIOWGheWuueWMuuWfn+mrmOW6puOAgiDlvLnnqpfmgLvpq5jluqYgLSDlpLTpg6jpq5jluqYgLSDohJrpg6jpq5jluqYgLSDvvIjlkK/nlKjmlLbol48gVEFC5aS06auY5bqm77yJICovXHJcbiAgICBkaWFsb2dDb250ZW50SGVpZ2h0ID0gMDtcclxuICAgIC8qKiDlt6bmoJHlj7PliJfooajvvIwg5bem5qCR54K55Ye76IqC54K55p+l6K+i5pe25piv5ZCm5YyF5ous5LiL57qn6IqC54K555qE5pWw5o2u77yM6buY6K6kIGZhbHNlICovXHJcbiAgICBpbmNsdWRlU3Vib3JkaW5hdGVzID0gZmFsc2U7XHJcbiAgICBpbmNsdWRlU3Vib3JkaW5hdGVzJCA9IG5ldyBTdWJqZWN0KCk7XHJcbiAgICBpbmNsdWRlU3Vib3JkaW5hdGVzJCQ6IFN1YnNjcmlwdGlvbiA9IG51bGw7XHJcbiAgICBvdmVyTGF5U2VydmljZTogT3ZlckxheUhpZGRlblNlcnZpY2U7XHJcbiAgICBwcml2YXRlIGRlYnVnU2VyOiBEZWJ1Z1NlcnZpY2UgPSBudWxsO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHB1YmxpYyBpbmplY3RvcjogSW5qZWN0b3IsXHJcbiAgICAgICAgcHVibGljIGNmcjogQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLFxyXG4gICAgICAgIHB1YmxpYyBlbDogRWxlbWVudFJlZixcclxuICAgICAgICBwdWJsaWMgdXRpbHM6IENvbW1vblV0aWxzLFxyXG4gICAgICAgIHByaXZhdGUgZGVmYXVsdE1hcHBpbmc6IExvb2t1cERlZmF1bHRNYXBwaW5nLFxyXG4gICAgICAgIHB1YmxpYyBjaGFuZ2VEZXRlY3RvcjogQ2hhbmdlRGV0ZWN0b3JSZWYsXHJcbiAgICAgICAgcHVibGljIHNob3J0Y3V0czogU2hvcnRjdXRzU2VydmljZSxcclxuICAgICAgICBwdWJsaWMgbG9va3VwVXRpbHM6IExvb2t1cFV0aWxzLFxyXG4gICAgICAgIHByaXZhdGUgem9uZTogTmdab25lLFxyXG4gICAgICAgIHB1YmxpYyByZW5kZXIyOiBSZW5kZXJlcjJcclxuICAgICkge1xyXG4gICAgICAgIHN1cGVyKGluamVjdG9yLCBlbCwgY2hhbmdlRGV0ZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuY3JlYXRlSW5zdGFuY2UoKTtcclxuICAgICAgICB0aGlzLmN1cnJlbnRTZWxlY3RlZEl0ZW1zID0gdGhpcy5sb29rdXBTZWxlY3Rpb25TZXIuc2VsZWN0ZWQkO1xyXG4gICAgICAgIHRoaXMuZXZlbnRNYW5hZ2VyID0gdGhpcy5pbmplY3Rvci5nZXQoRXZlbnRNYW5hZ2VyKTtcclxuICAgICAgICB0aGlzLmZhcnJpc0luc3RhbmNlcyA9IHRoaXMuaW5qZWN0b3IuZ2V0KFxyXG4gICAgICAgICAgICBGYXJyaXNDb21wb25lbnRJbnN0YW5jZVNlcnZpY2UsXHJcbiAgICAgICAgICAgIG51bGxcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICB0aGlzLm92ZXJMYXlTZXJ2aWNlID0gbmV3IE92ZXJMYXlIaWRkZW5TZXJ2aWNlKCk7XHJcblxyXG4gICAgICAgIHRoaXMuZGVidWdTZXIgPSB0aGlzLmluamVjdG9yLmdldChEZWJ1Z1NlcnZpY2UsIG51bGwpO1xyXG4gICAgICAgIGlmICh0aGlzLmRlYnVnU2VyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVidWdTZXIudXNlRGVidWdNb2RlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHdyaXRlQ29uc29sZShtc2csIHR5cGU6ICdpbmZvJ3wnbG9nJ3wnd2Fybid8J2Vycm9yJyA9ICd3YXJuJykge1xyXG4gICAgICAgIGlmICh0aGlzLmRlYnVnU2VyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVidWdTZXJbdHlwZV0obXNnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjYWNoZVVzZXJDb25maWcoKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlclNldHRpbmdzLl90aXRsZSA9IHRoaXMudGl0bGU7XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5SW5mby50aXRsZSA9IHRoaXMudGl0bGU7XHJcbiAgICAgICAgdGhpcy5fdXNlclNldHRpbmdzLl9jb2x1bW5zID0gdGhpcy5kZWVwQ2xvbmUodGhpcy5jb2x1bW5zIHx8IFtdKTtcclxuICAgICAgICB0aGlzLl91c2VyU2V0dGluZ3MuZ2V0Q29sdW1ucyA9ICgpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3VzZXJTZXR0aW5ncy5fY29sdW1ucztcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLl91c2VyU2V0dGluZ3MucmVzZXQgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudGl0bGUgPSB0aGlzLl91c2VyU2V0dGluZ3MuX3RpdGxlO1xyXG4gICAgICAgICAgICB0aGlzLmRpc3BsYXlJbmZvLnRpdGxlID0gdGhpcy50aXRsZTtcclxuICAgICAgICAgICAgdGhpcy5jb2x1bW5zID0gdGhpcy5fdXNlclNldHRpbmdzLmdldENvbHVtbnMoKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZGVlcENsb25lKG9iaikge1xyXG4gICAgICAgIGlmIChvYmogPT09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGNsb25lID0gT2JqZWN0LmFzc2lnbih7fSwgb2JqKTtcclxuICAgICAgICBPYmplY3Qua2V5cyhjbG9uZSkuZm9yRWFjaChcclxuICAgICAgICAgICAgKGtleSkgPT5cclxuICAgICAgICAgICAgICAgIChjbG9uZVtrZXldID1cclxuICAgICAgICAgICAgICAgICAgICB0eXBlb2Ygb2JqW2tleV0gPT09IFwib2JqZWN0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLmRlZXBDbG9uZShvYmpba2V5XSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBvYmpba2V5XSlcclxuICAgICAgICApO1xyXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG9iaikpIHtcclxuICAgICAgICAgICAgY2xvbmUubGVuZ3RoID0gb2JqLmxlbmd0aDtcclxuICAgICAgICAgICAgcmV0dXJuIEFycmF5LmZyb20oY2xvbmUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY2xvbmU7XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkluaXQoKSB7XHJcbiAgICAgICAgc3VwZXIubmdPbkluaXQoKTtcclxuICAgICAgICB0aGlzLmNhY2hlVXNlckNvbmZpZygpO1xyXG4gICAgICAgIGlmICghdGhpcy5sb2FkVHJlZURhdGFUeXBlKSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9hZFRyZWVEYXRhVHlwZSA9IFwiZGVmYXVsdFwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jaGVja0dyaWRPcHRpb25zKCk7XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5SW5mby50aXRsZSA9IHRoaXMudGl0bGU7XHJcbiAgICAgICAgLyoqIOS8oOmAkuS4iuS4i+aWhyAqL1xyXG4gICAgICAgIGlmICh0aGlzLmh0dHApIHtcclxuICAgICAgICAgICAgdGhpcy5odHRwLmNvbnRleHQgPSB0aGlzLmNvbnRleHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmFsbENvbHVtbnNUaXRsZSA9IHRoaXMubG9jYWxTZXJ2aWNlLmdldFZhbHVlKFwibG9va3VwLmFsbENvbHVtbnNcIik7XHJcbiAgICAgICAgdGhpcy5tdXN0V3JpdGVTb21ldGhpbmcgPSB0aGlzLmxvY2FsU2VydmljZS5nZXRWYWx1ZShcclxuICAgICAgICAgICAgXCJsb29rdXAubXVzdFdyaXRlU29tZXRoaW5nXCJcclxuICAgICAgICApO1xyXG4gICAgICAgIHRoaXMubXVzdENob29zQWRhdGFyb3cgPSB0aGlzLmxvY2FsU2VydmljZS5nZXRWYWx1ZShcclxuICAgICAgICAgICAgXCJsb29rdXAubXVzdENob29zQWRhdGFyb3dcIlxyXG4gICAgICAgICk7XHJcbiAgICAgICAgdGhpcy5hZGRGYXZvcml0ZVN1Y2Nlc3MgPVxyXG4gICAgICAgICAgICB0aGlzLmxvY2FsU2VydmljZS5nZXRWYWx1ZShcImxvb2t1cC5mYXZvcml0ZUluZm8uYWRkRmF2XCIpIHx8XHJcbiAgICAgICAgICAgIHRoaXMuYWRkRmF2b3JpdGVTdWNjZXNzO1xyXG4gICAgICAgIHRoaXMuZGVsRmF2b3JpdGVTdWNjZXNzID1cclxuICAgICAgICAgICAgdGhpcy5sb2NhbFNlcnZpY2UuZ2V0VmFsdWUoXCJsb29rdXAuZmF2b3JpdGVJbmZvLmNhbmNlbEZhdlwiKSB8fFxyXG4gICAgICAgICAgICB0aGlzLmRlbEZhdm9yaXRlU3VjY2VzcztcclxuXHJcbiAgICAgICAgdGhpcy5kaWFsb2dNZ3Iub25EaWFsb2dDcmVhdGVkKCk7XHJcblxyXG4gICAgICAgIHRoaXMuX3RyZWVJbmZvXyA9IHRoaXMudHJlZUluZm8gPyBjbG9uZURlZXAodGhpcy50cmVlSW5mbykgOiBudWxsO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5xdWlja1NlbGVjdCkge1xyXG4gICAgICAgICAgICB0aGlzLnF1aWNrU2VsZWN0ID0gT2JqZWN0LmFzc2lnbih7fSwgUXVpY2tTZWxlY3REZWZhdWx0T3B0aW9ucywgdGhpcy5xdWlja1NlbGVjdCB8fCB7fSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiog5YaF5a655Lit55WZ55m96L656LedICovXHJcbiAgICAgICAgdGhpcy5zZXRDb250YWluZXJNYXJnaW4oKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNldENvbnRhaW5lck1hcmdpbigpIHtcclxuICAgICAgICBjb25zdCBtcm4gPSB0aGlzLmxheW91dEZvcm1hdCA9PT0gJ2RlZmF1bHQnID8gMTQgOiAyNDtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lck1hcmdpbiA9IHsgdG9wOiAwLCBib3R0b206IDUsIGxlZnQ6IG1ybiwgcmlnaHQ6IG1ybiB9O1xyXG5cclxuICAgICAgICB0aGlzLmNvbnRhaW5lclN0eWxlID0ge1xyXG4gICAgICAgICAgICBtYXJnaW5MZWZ0OiB0aGlzLmNvbnRhaW5lck1hcmdpbi5sZWZ0ICsgXCJweFwiLFxyXG4gICAgICAgICAgICBtYXJnaW5SaWdodDogdGhpcy5jb250YWluZXJNYXJnaW4ucmlnaHQgKyBcInB4XCIsXHJcbiAgICAgICAgICAgIG1hcmdpblRvcDogdGhpcy5jb250YWluZXJNYXJnaW4udG9wICsgXCJweFwiLFxyXG4gICAgICAgICAgICBtYXJnaW5Cb3R0b206IHRoaXMuY29udGFpbmVyTWFyZ2luLmJvdHRvbSArIFwicHhcIixcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIG5nT25EZXN0cm95KCkge1xyXG4gICAgICAgIHN1cGVyLm5nT25EZXN0cm95KCk7XHJcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLmZvckVhY2goKG4pID0+IHtcclxuICAgICAgICAgICAgaWYgKG4pIHtcclxuICAgICAgICAgICAgICAgIG4udW5zdWJzY3JpYmUoKTtcclxuICAgICAgICAgICAgICAgIG4gPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGlvbk1ncikge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvbk1nci5kZXN0cm95KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMgPSBbXTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZmFycmlzSW5zdGFuY2VzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmFycmlzSW5zdGFuY2VzLmRlc3Ryb3kodGhpcy5lbC5uYXRpdmVFbGVtZW50KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmxvb2t1cFNlYXJjaElucHV0RXZlbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5sb29rdXBTZWFyY2hJbnB1dEV2ZW50KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubG9va3VwVXRpbHMuZGVzdHJveSgpO1xyXG5cclxuICAgICAgICB0aGlzLm92ZXJMYXlTZXJ2aWNlLmRlc3RvcnkodGhpcy5lbC5uYXRpdmVFbGVtZW50KTtcclxuICAgICAgICB0aGlzLm92ZXJMYXlTZXJ2aWNlID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XHJcbiAgICAgICAgaWYgKGNoYW5nZXMuY29sdW1ucyAmJiAhY2hhbmdlcy5jb2x1bW5zLmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmNhY2hlVXNlckNvbmZpZygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMubGF5b3V0Rm9ybWF0ICYmICFjaGFuZ2VzLmxheW91dEZvcm1hdC5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRDb250YWluZXJNYXJnaW4oKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbmdBZnRlclZpZXdJbml0KCkge1xyXG4gICAgICAgIGlmICghdGhpcy5xdWlja1NlbGVjdCB8fCAhdGhpcy5xdWlja1NlbGVjdC5lbmFibGUpIHtcclxuICAgICAgICAgICAgdGhpcy5sb29rdXBTZWFyY2hJbnB1dEV2ZW50ID0gb25UZXh0Q2hhbmdlZC5iaW5kKHRoaXMpKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDliJ3lp4vljJbkuKrmgKfljJbphY3nva5cclxuICAgICAgICBpZiAodGhpcy51c2VQZXJzaW9uYWxDb25mKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmF2SGVscGVyLmluaXRQZXJzb25hbEluZm8oKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnVzZUV4dGVuZEluZm8pIHtcclxuICAgICAgICAgICAgY29uc3QganNvbkRhdGEgPSB0aGlzLnNlbGVjdGlvbk1nci5nZXRCaW5kaW5nRGF0YSgpO1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUV4dGVuZEluZm8oanNvbkRhdGEsIGZhbHNlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnZpZXdUeXBlID09PSBcInRleHRcIikge1xyXG4gICAgICAgICAgICAvLyB0aGlzLnNob3J0Y3V0cy5hZGQoe1xyXG4gICAgICAgICAgICAvLyAgICAga2V5OiAnRjInLFxyXG4gICAgICAgICAgICAvLyAgICAgdGFyZ2V0OiB0aGlzLmlucHV0R3JvdXAudGV4dGJveC5uYXRpdmVFbGVtZW50LFxyXG4gICAgICAgICAgICAvLyAgICAgY29tbWFuZDogKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIHRoaXMuc2hvd0RpYWxvZygpO1xyXG4gICAgICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgICAgICAvLyB9KTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXIyLmxpc3RlbihcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRHcm91cC50ZXh0Ym94Lm5hdGl2ZUVsZW1lbnQsXHJcbiAgICAgICAgICAgICAgICBcImtleWRvd24uRjJcIixcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0RpYWxvZy5iaW5kKHRoaXMpXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5yZWdpc3Rlck1vdXNlRXZlbnRGb3JUYWdWaWV3KCk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy50YWdib3hIZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVsID1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhZ2JveC5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubXVsdGktbW9yZVwiKTtcclxuICAgICAgICAgICAgICAgIGxldCB0YmggPSB0aGlzLnRhZ2JveEhlaWdodDtcclxuICAgICAgICAgICAgICAgIGlmICh0YmggIT09IFwiYXV0b1wiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGJoICs9IFwicHhcIjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubWF4VGFnYm94SGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyMi5zZXRTdHlsZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJtYXhIZWlnaHRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAke3RoaXMubWF4VGFnYm94SGVpZ2h0fXB4YFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcjIuc2V0U3R5bGUoZWwsIFwiaGVpZ2h0XCIsIHRiaCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmVsICYmIHRoaXMuZmFycmlzSW5zdGFuY2VzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmFycmlzSW5zdGFuY2VzLmFkZCh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsIHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNyZWF0ZUluc3RhbmNlKCkge1xyXG4gICAgICAgIHRoaXMuaHR0cCA9IHRoaXMuaW5qZWN0b3IuZ2V0KFNlcnZlclNpZGVUb2tlbiwgbnVsbCk7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlclNlcnZpY2UgPSB0aGlzLmluamVjdG9yLmdldChNZXNzYWdlclNlcnZpY2UpO1xyXG4gICAgICAgIHRoaXMubG9hZGluZ1NlcnZpY2UgPSB0aGlzLmluamVjdG9yLmdldChMb2FkaW5nU2VydmljZSk7XHJcbiAgICAgICAgdGhpcy5ub3RpZnlTZXJ2aWNlID0gdGhpcy5pbmplY3Rvci5nZXQoTm90aWZ5U2VydmljZSwgbnVsbCk7XHJcblxyXG4gICAgICAgIHRoaXMucGVyc29uYWxDb25maWdTZXJ2aWNlID0gdGhpcy5pbmplY3Rvci5nZXQoXHJcbiAgICAgICAgICAgIFBlcnNvbmFsQ29uZmlnU2VydmljZSxcclxuICAgICAgICAgICAgbnVsbFxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHRoaXMubG9va3VwU2VsZWN0aW9uU2VyID0gbmV3IExvb2t1cFNlbGVjdGlvblNlcnZpY2UodGhpcyk7XHJcblxyXG4gICAgICAgIHRoaXMudXRpbFNlcnZpY2UgPSBuZXcgVXRpbFNlcnZpY2UodGhpcyk7XHJcbiAgICAgICAgdGhpcy5sb2NhbFNlcnZpY2UgPSB0aGlzLmluamVjdG9yLmdldChMb2NhbGVTZXJ2aWNlKTtcclxuICAgICAgICB0aGlzLnRyZWVOb2RlSGVscGVyID0gbmV3IFRyZWVOb2RlSGVscGVyKHRoaXMpO1xyXG5cclxuICAgICAgICB0aGlzLmZhdkhlbHBlciA9IG5ldyBGYXZvcml0ZUhlbHBlcih0aGlzKTtcclxuICAgICAgICB0aGlzLnR0RXZlbnRNZ3IgPSBuZXcgVHJlZVRhYmxlRXZlbnRNYW5hZ2VyKHRoaXMpO1xyXG4gICAgICAgIHRoaXMubXVsdGlTZWxNZ3IgPSBuZXcgTXVsdGlTZWxlY3Rpb25NYW5hZ2VyKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuaHR0cE1nciA9IG5ldyBMb29rdXBIdHRwTWFuYWdlcih0aGlzKTtcclxuICAgICAgICB0aGlzLmxvb2t1cENtcE1nciA9IG5ldyBMb29rdXBDb21wb25lbnRNYW5hZ2VyKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuZGlhbG9nTWdyID0gbmV3IExvb2t1cERpYWxvZ01hbmFnZXIodGhpcyk7XHJcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25NZ3IgPSBuZXcgU2VsZWN0aW9uTWFuYWdlcih0aGlzKTtcclxuICAgICAgICB0aGlzLmR0RXZlbnRNZ3IgPSBuZXcgRGF0YVRhYmxlRXZlbnRNYW5hZ2VyKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHNob3dEaWFsb2coKTogYW55IHtcclxuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCB8fCB0aGlzLnJlYWRvbmx5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc2VsZWN0aW9uTWdyLmluaXREaXNwbGF5VmFsdWUoKTtcclxuICAgICAgICB0aGlzLmRpY3RQaWNraW5nU3Vic2NyaXB0aW9uID0gdGhpcy5kaWN0UGlja2luZyh7XHJcbiAgICAgICAgICAgIGluc3RhbmNlOiB0aGlzLFxyXG4gICAgICAgIH0pLnN1YnNjcmliZSgocHI6IFBpY2tpbmdSZXN1bHQpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5kaWFsb2dNZ3IuY2FuT3BlbkRpYWxvZyhwcik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvKiog5Yik5pat5piv5ZCm5Li65Y+M5YiX6KGo5biu5YqpICovXHJcbiAgICBpc0RvdWJsbGVMaXN0KCkge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgKCB0aGlzLmRpc3BsYXlUeXBlID09PSBMb29rdXBHcmlkRGlzcGxheVR5cGUuTmF2TGlzdCB8fFxyXG4gICAgICAgICAgICB0aGlzLmRpc3BsYXlUeXBlID09PSBMb29rdXBHcmlkRGlzcGxheVR5cGUuTmF2VHJlZUxpc3QgfHxcclxuICAgICAgICAgICAgdGhpcy5kaXNwbGF5VHlwZSA9PT0gTG9va3VwR3JpZERpc3BsYXlUeXBlLk5hdkxpc3RUcmVlKSAmJiB0aGlzLnNob3dOYXZpZ2F0aW9uXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuICAgIC8qKiDliKTmlq3mmK/lkKbmmL7npLrkuLrmoJHluK7liqkgKi9cclxuICAgIGlzVHJlZSgpIHtcclxuICAgICAgICBjb25zdCBkdHlwID0gdGhpcy5kaXNwbGF5VHlwZS50b1VwcGVyQ2FzZSgpXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgZHR5cCA9PT0gTG9va3VwR3JpZERpc3BsYXlUeXBlLlRyZWVMaXN0IHx8IGR0eXAgPT09IExvb2t1cEdyaWREaXNwbGF5VHlwZS5OYXZMaXN0VHJlZVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgb25SZXNpemVkKGU6IGFueSkge1xyXG4gICAgICAgIHRoaXMucmVzaXplQ21wKGUuc2l6ZSk7XHJcbiAgICAgICAgdGhpcy5yZXNpemVkLmVtaXQoZS5zaXplKTtcclxuICAgIH1cclxuXHJcbiAgICBvblJlc2l6aW5nKHBvczogSVJlc2l6ZUV2ZW50KSB7XHJcbiAgICAgICAgdGhpcy5yZXNpemluZy5lbWl0KHBvcy5zaXplKTtcclxuICAgICAgICB0aGlzLnJlc2l6ZUNtcChwb3Muc2l6ZSk7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNEb3VibGxlTGlzdCgpICYmIHRoaXMubGVmdENvbXBvbmVudFJlZikge1xyXG4gICAgICAgICAgICB0aGlzLmxlZnRDb21wb25lbnRSZWYuaW5zdGFuY2UucmVzaXplKHtcclxuICAgICAgICAgICAgICAgIHdpZHRoOiB0aGlzLmxlZnRQYW5lbC53aWR0aCxcclxuICAgICAgICAgICAgICAgIGhlaWdodDogdGhpcy5kaWFsb2dNZ3IuZ2V0SGVpZ2h0KCksXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbk1heERpYWxvZyhwb3M6IElSZXNpemVFdmVudCkge1xyXG4gICAgICAgIHRoaXMucmVzaXplQ21wKHBvcy5zaXplKTtcclxuICAgICAgICBpZiAodGhpcy5sZWZ0UGFuZWwpIHtcclxuICAgICAgICAgICAgdGhpcy5sZWZ0Q29tcG9uZW50UmVmLmluc3RhbmNlLnJlc2l6ZSh7XHJcbiAgICAgICAgICAgICAgICB3aWR0aDogdGhpcy5sZWZ0UGFuZWwud2lkdGgsXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IHRoaXMuZGlhbG9nTWdyLmdldEhlaWdodCgpLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gdGZzIDU0MzEzMiBcclxuICAgICAgICAvLyB0aGlzLmRpYWxvZ0hlaWdodCA9IHBvcy5zaXplLmhlaWdodDtcclxuICAgICAgICB0aGlzLmRpYWxvZ0NvbnRlbnRIZWlnaHQgPSB0aGlzLmRpYWxvZ01nci5yZXNldERpYWxvZ0NvbnRlbnRIZWlnaHQoKTtcclxuICAgICAgICB0aGlzLmRpYWxvZ01heGVkLmVtaXQocG9zLnNpemUpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlc2l6ZUNtcChzaXplPzogYW55KSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmNvbXBvbmVudFJlZiB8fCAhdGhpcy5jb21wb25lbnRSZWYuaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFzaXplKSB7XHJcbiAgICAgICAgICAgIHNpemUgPSB0aGlzLmRpYWxvZy5zaXplO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBfc2l6ZSA9IHtcclxuICAgICAgICAgICAgd2lkdGg6XHJcbiAgICAgICAgICAgICAgICBzaXplLndpZHRoIC1cclxuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyTWFyZ2luLmxlZnQgLVxyXG4gICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXJNYXJnaW4ucmlnaHQsXHJcbiAgICAgICAgICAgIGhlaWdodDogdGhpcy5kaWFsb2dNZ3IuZ2V0SGVpZ2h0KCksXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMudXNlRmF2b3JpdGUgJiYgdGhpcy5mYXZvcml0ZXNDb21wb25lbnRSZWYpIHtcclxuICAgICAgICAgICAgdGhpcy5mYXZvcml0ZXNDb21wb25lbnRSZWYuaW5zdGFuY2UucmVzaXplKF9zaXplKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuaXNSZWNvcmRTaXplKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGVyc29uYWxDb25mLnNpemUgPSB0aGlzLmRpYWxvZy5zaXplO1xyXG4gICAgICAgICAgICB0aGlzLnBlcnNvbmFsQ29uZmlnU2VydmljZS51cGRhdGVQZXJzb25hbENvbmZpZyh7XHJcbiAgICAgICAgICAgICAgICBzaXplOiB0aGlzLmRpYWxvZy5zaXplLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuaXNEb3VibGxlTGlzdCgpKSB7XHJcbiAgICAgICAgICAgIF9zaXplLndpZHRoID0gc2l6ZS53aWR0aCAtIHRoaXMubGVmdFBhbmVsLndpZHRoIC0gKHRoaXMubGF5b3V0Rm9ybWF0ID09PSAnZGVmYXVsdCcgPyAyMCA6IDQ4KSAtIDc7O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jb21wb25lbnRSZWYuaW5zdGFuY2UucmVzaXplKF9zaXplKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNoZWNrR3JpZE9wdGlvbnMoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmdyaWRPcHRpb25zLmlkRmllbGQpIHtcclxuICAgICAgICAgICAgdGhpcy53cml0ZUNvbnNvbGUoXCLmnKrorr7nva7kuLvplK7lrZfmrrUgaWRGaWVsZFwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5iZWZvcmVTZWxlY3REYXRhKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYmVmb3JlU2VsZWN0RGF0YSA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBvZih0cnVlKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGN0eE1lbnVMYW5ndWFnZXMgPVxyXG4gICAgICAgICAgICB0aGlzLmxvY2FsU2VydmljZS5nZXRWYWx1ZShcImxvb2t1cC5jb250ZXh0TWVudVwiKTtcclxuXHJcbiAgICAgICAgdGhpcy50cmVlVGFibGVPcHRpb25zID0gT2JqZWN0LmFzc2lnbihcclxuICAgICAgICAgICAgeyBsYW5ndWFnZTogY3R4TWVudUxhbmd1YWdlcyB9LFxyXG4gICAgICAgICAgICB0aGlzLmRlZmF1bHRUcmVlVGFibGVPcHRpb25zLFxyXG4gICAgICAgICAgICB0aGlzLnRyZWVUYWJsZU9wdGlvbnMgfHwge31cclxuICAgICAgICApO1xyXG4gICAgICAgIC8vIHRoaXMuZGF0YVRhYmxlT3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZGVmYXVsdFRyZWVUYWJsZU9wdGlvbnMsIHRoaXMuZGF0YVRhYmxlT3B0aW9ucyk7XHJcbiAgICAgICAgLy8gdGhpcy5uYXZUcmVlVGFibGVPcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5kZWZhdWx0VHJlZVRhYmxlT3B0aW9ucywgdGhpcy5uYXZUcmVlVGFibGVPcHRpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDb21wb25lbnRUeXBlKCk6IFR5cGU8YW55PiB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmRpc3BsYXlUeXBlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzcGxheVR5cGUgPSBcIkxJU1RcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgc3dpdGNoICh0aGlzLmRpc3BsYXlUeXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgTG9va3VwR3JpZERpc3BsYXlUeXBlLkxpc3Q6XHJcbiAgICAgICAgICAgIGNhc2UgTG9va3VwR3JpZERpc3BsYXlUeXBlLk5hdkxpc3Q6XHJcbiAgICAgICAgICAgIGNhc2UgTG9va3VwR3JpZERpc3BsYXlUeXBlLk5hdlRyZWVMaXN0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIERhdGFUYWJsZUNvbXBvbmVudDtcclxuICAgICAgICAgICAgY2FzZSBMb29rdXBHcmlkRGlzcGxheVR5cGUuVHJlZUxpc3Q6XHJcbiAgICAgICAgICAgIGNhc2UgTG9va3VwR3JpZERpc3BsYXlUeXBlLk5hdkxpc3RUcmVlOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFRyZWVUYWJsZUNvbXBvbmVudDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2hvd0xvYWRpbmcobXNnID0gXCJcIikge1xyXG4gICAgICAgIGlmICh0aGlzLmRpYWxvZyAmJiB0aGlzLmRpYWxvZy5tb2RhbENvbnRlbnQgJiYgIXRoaXMubG9hZGluZykge1xyXG4gICAgICAgICAgICBjb25zdCBvcHRzID0ge1xyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyOiB0aGlzLmRpYWxvZy5tb2RhbENvbnRlbnQsXHJcbiAgICAgICAgICAgICAgICBkZWxheTogMjAwLFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgaWYgKG1zZykge1xyXG4gICAgICAgICAgICAgICAgb3B0c1tcIm1lc3NhZ2VcIl0gPSBtc2c7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IHRoaXMubG9hZGluZ1NlcnZpY2Uuc2hvdyhvcHRzKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSB0aGlzLmxvYWRpbmdTZXJ2aWNlLnNob3coKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2VMb2FkaW5nKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmxvYWRpbmcpIHtcclxuICAgICAgICAgICAgdGhpcy5sb2FkaW5nLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmxvYWRpbmdTZXJ2aWNlLmNsZWFyQWxsKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0U2VhcmNoQ29sdW1ucyhyZXNkYXRhOiBhbnkpIHtcclxuICAgICAgICBjb25zdCBjb2xzID0gcmVzZGF0YS5jb2x1bW5zIHx8IHRoaXMuY29sdW1ucztcclxuICAgICAgICBpZiAocmVzZGF0YS5zZWFyY2hGaWVsZHMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc2RhdGEuc2VhcmNoRmllbGRzLm1hcCgoc2YpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGMgPSBjb2xzLmZpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgKGNvbCkgPT4gY29sLmZpZWxkLnRvTG93ZXJDYXNlKCkgPT09IHNmLnZhbHVlLnRvTG93ZXJDYXNlKClcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBpZiAoYykge1xyXG4gICAgICAgICAgICAgICAgICAgIHNmLmxhYmVsID0gYy50aXRsZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBzZjtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjb2xzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb2xzXHJcbiAgICAgICAgICAgICAgICAuZmlsdGVyKChjKSA9PiBjLnNlYXJjaEZpZWxkKVxyXG4gICAgICAgICAgICAgICAgLm1hcCgoY29sKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGNvbC50aXRsZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGNvbC5maWVsZCxcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGluaXRPcHRpb25zKHJlc0RhdGE6IExvb2t1cEdyaWRSZXN1bHQpIHtcclxuICAgICAgICBsZXQgb2JzZXIgPSBvZih0cnVlKTtcclxuICAgICAgICB0aGlzLmdyaWRPcHRpb25zLnNlYXJjaEZpZWxkcyA9IHRoaXMuZ2V0U2VhcmNoQ29sdW1ucyhyZXNEYXRhKTtcclxuICAgICAgICBpZiAocmVzRGF0YSkge1xyXG4gICAgICAgICAgICAvLyDlpoLmnpznu4Tku7bkuK3mnKrorr7nva7mmL7npLrliJfvvIzliJnkvb/nlKjmnI3liqHlmajnq6/ov5Tlm57nmoTorr7nva7vvJsg5ZCm5YiZ5bCG5L2/55So57uE5Lu25Lit6YWN572u55qE5bGV56S65YiXXHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICghdGhpcy5jb2x1bW5zIHx8ICF0aGlzLmNvbHVtbnMubGVuZ3RoKSAmJlxyXG4gICAgICAgICAgICAgICAgcmVzRGF0YS5jb2x1bW5zICYmXHJcbiAgICAgICAgICAgICAgICByZXNEYXRhLmNvbHVtbnMubGVuZ3RoXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb2x1bW5zID0gcmVzRGF0YS5jb2x1bW5zO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNldExvb2t1cFRpdGxlVGV4dChyZXNEYXRhKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgIHRoaXMuaXNEb3VibGxlTGlzdCgpICYmXHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZ1dpZHRoIDwgdGhpcy5uYXZMb29rdXBEaWFsb2dNaW5XaWR0aCAmJlxyXG4gICAgICAgICAgICAgICAgIXRoaXMuaXNSZWNvcmRTaXplXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaWFsb2dXaWR0aCA9IHRoaXMubmF2TG9va3VwRGlhbG9nTWluV2lkdGg7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZy5yZVNpemUoeyB3aWR0aDogdGhpcy5kaWFsb2dXaWR0aCB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCF0aGlzLmN1c3RvbURpc3BsYXlUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLmRpc3BsYXlUeXBlID0gcmVzRGF0YS5kaXNwbGF5VHlwZSB8fCB0aGlzLmRpc3BsYXlUeXBlIHx8ICdMSVNUJztcclxuICAgICAgICAgICAgICAgIC8vIGlmICh0aGlzLnRyZWVUb0xpc3QpIHtcclxuICAgICAgICAgICAgICAgIC8vICAgICB0aGlzLmRpc3BsYXlUeXBlID0gdGhpcy5pc0RvdWJsbGVMaXN0KCkgPyAnIE5BVkxJU1QgJzogJ0xJU1QnO1xyXG4gICAgICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VEZXRlY3Rvci5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvb2t1cENtcE1nci5jcmVhdGVDb21wb25lbnRXaXRoU2VydmVyRGF0YShyZXNEYXRhKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCB0aGlzLmlzRG91YmxsZUxpc3QoKSAmJiByZXNEYXRhLm5hdmlnYXRpb24gJiYgIXRoaXMubGVmdENvbXBvbmVudFJlZikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5uYXZpZ2F0aW9uT3B0aW9ucyA9IHJlc0RhdGEubmF2aWdhdGlvbjtcclxuICAgICAgICAgICAgICAgIHRoaXMubmF2aWdhdGlvbk9wdGlvbnMuaG92ZXIgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5uYXZpZ2F0aW9uT3B0aW9ucy5zZWFyY2hGaWVsZHMgPSB0aGlzLmdldFNlYXJjaENvbHVtbnModGhpcy5uYXZpZ2F0aW9uT3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICAvLyB1cGRhdGUgY29sdW1ucyBmb3JtYXR0ZXJcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmN1c3RvbU5hdkZvcm1hdHRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmF2aWdhdGlvbk9wdGlvbnMuY29sdW1ucy5mb3JFYWNoKChjb2wpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY3VzdG9tTmF2Rm9ybWF0dGVyW2NvbC5maWVsZF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbC5mb3JtYXR0ZXIgPSB0aGlzLmN1c3RvbU5hdkZvcm1hdHRlcltjb2wuZmllbGRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmF2aWdhdGlvbk9wdGlvbnNbXCJyb3dTdHlsZXJcIl0gPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbU5hdkZvcm1hdHRlci5yb3dTdHlsZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uYXZpZ2F0aW9uT3B0aW9uc1tcImNlbGxTdHlsZXJcIl0gPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbU5hdkZvcm1hdHRlci5jZWxsU3R5bGVyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gMjAyMTA5MjYg5qCR5a+86Iiq5biu5Yqp5LitIOW3puS+p+agkeaUr+aMgeWIhuWxguWKoOi9vVxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGlzcGxheVR5cGUgPT09IExvb2t1cEdyaWREaXNwbGF5VHlwZS5OYXZUcmVlTGlzdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBfbmF2X3RyZWVpbmZvX2xvYWR0eXBlID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uYXZpZ2F0aW9uT3B0aW9ucy50cmVlSW5mby5sb2FkRGF0YVR5cGU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubG9hZFRyZWVEYXRhVHlwZSAhPT0gXCJkZWZhdWx0XCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX25hdl90cmVlaW5mb19sb2FkdHlwZSA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRUcmVlRGF0YVR5cGUgPT09IFwibG9hZGFsbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcImFsbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcImFzeW5jXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmF2aWdhdGlvbk9wdGlvbnMudHJlZUluZm8ubG9hZERhdGFUeXBlID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgX25hdl90cmVlaW5mb19sb2FkdHlwZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBvYnNlciA9IHRoaXMubG9va3VwQ21wTWdyLmNyZWF0ZUxlZnRDb21wb25lbnQodGhpcy5uYXZpZ2F0aW9uT3B0aW9ucyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmxvb2t1cENtcE1nci5jcmVhdGVDb250ZW50KHRoaXMuZ3JpZE9wdGlvbnMpO1xyXG4gICAgICAgICAgICB0aGlzLmxvb2t1cENtcE1nci5jcmVhdGVGYXZvcml0ZUNvbXBvbmVudCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaXNUZXh0Q2hhbmdlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50UmVmLmluc3RhbmNlLnNlYXJjaERhdGEudmFsdWUgPSB0aGlzLmRpc3BsYXlUZXh0O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9zZWFyY2hTdGF0ZSAmJiB0aGlzLl9zZWFyY2hTdGF0ZS52YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnRSZWYuaW5zdGFuY2Uuc2VhcmNoRGF0YS52YWx1ZSA9IHRoaXMuX3NlYXJjaFN0YXRlLnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyB1cGRhdGUgY29sdW1ucyBmb3JtYXR0ZXJcclxuICAgICAgICBpZiAodGhpcy5jdXN0b21Gb3JtYXR0ZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5jb2x1bW5zLmZvckVhY2goKGNvbCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY3VzdG9tRm9ybWF0dGVyW2NvbC5maWVsZF0pIHtcclxuICAgICAgICAgICAgICAgICAgICBjb2wuZm9ybWF0dGVyID0gdGhpcy5jdXN0b21Gb3JtYXR0ZXJbY29sLmZpZWxkXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5jdXN0b21Gb3JtYXR0ZXIucm93U3R5bGVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbXBvbmVudFJlZi5pbnN0YW5jZS5yb3dTdHlsZXIgPSB0aGlzLmN1c3RvbUZvcm1hdHRlci5yb3dTdHlsZXI7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmN1c3RvbUZvcm1hdHRlci5jZWxsU3R5bGVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbXBvbmVudFJlZi5pbnN0YW5jZS5jZWxsU3R5bGVyID0gdGhpcy5jdXN0b21Gb3JtYXR0ZXIuY2VsbFN0eWxlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChyZXNEYXRhLmN1c3RvbVN0eWxlcykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgeyByb3c6IHJvd1N0eWxlcnMsIGNlbGw6IGNlbGxTdHlsZXJzIH0gPSByZXNEYXRhLmN1c3RvbVN0eWxlcztcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBmaWx0ZXJGbiA9IChuLCBkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZCA9IHRoaXMudXRpbHMuZ2V0VmFsdWUobi5maWVsZCwgZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBkID09PSAnYm9vbGVhbicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4udmFsdWUgPT0gJzAnIHx8IG4udmFsdWUgPT0gJzEnIHx8IG4udmFsdWUgPT0gJ3RydWUnIHx8IG4udmFsdWUgPT0gJ2ZhbHNlJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQgPT09IChuLnZhbHVlID09ICcwJyB8fCBuLnZhbHVlID09ICdmYWxzZScpID8gZmFsc2UgOiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkID09PSAhIW4udmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkID09PSBuLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChyb3dTdHlsZXJzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnRSZWYuaW5zdGFuY2Uucm93U3R5bGVyID0gKHsgZGF0YSB9KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0eWxlSXRlbSA9IHJvd1N0eWxlcnMuZmluZChuID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmaWx0ZXJGbihuLCBkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdHlsZUl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzdHlsZUl0ZW0uc3R5bGVzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGNlbGxTdHlsZXJzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnRSZWYuaW5zdGFuY2UuY2VsbFN0eWxlciA9IChlLCBmaWVsZCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGRhdGEgfSA9IGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0eWxlSXRlbSA9IGNlbGxTdHlsZXJzLmZpbHRlcihuID0+IG4uZmllbGQgPT09IGZpZWxkKS5maW5kKHQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpbHRlckZuKHQsIGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdHlsZUl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzdHlsZUl0ZW0uc3R5bGVzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyB0aGlzLmNoYW5nZURldGVjdG9yLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICByZXR1cm4gb2JzZXI7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDorr7nva7luK7liqnnqpflj6PmoIfpophcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzZXRMb29rdXBUaXRsZVRleHQocmVzRGF0YTogTG9va3VwR3JpZFJlc3VsdCkge1xyXG4gICAgICAgIGlmIChyZXNEYXRhLmRpc3BsYXlJbmZvKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzcGxheUluZm8gPSByZXNEYXRhLmRpc3BsYXlJbmZvO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8g5aaC5p6c6Ieq5a6a5LmJ5qCH6aKY77yM5bCG5Lul5q2k5qCH6aKY5Li65YeG44CC5ZCm5YiZ5Yqg6L295pyN5Yqh5Zmo56uv6L+U5Zue55qE5pWw5o2uXHJcbiAgICAgICAgaWYgKHRoaXMudGl0bGUgJiYgdGhpcy50aXRsZSAhPT0gXCLmraTlpITmmL7npLrluK7liqnmoIfpophcIikge1xyXG4gICAgICAgICAgICB0aGlzLmRpc3BsYXlJbmZvLnRpdGxlID0gdGhpcy50aXRsZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmRpc3BsYXlJbmZvICYmIHJlc0RhdGEudGl0bGUpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmRpc3BsYXlJbmZvLnRpdGxlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlJbmZvLnRpdGxlID0gcmVzRGF0YS50aXRsZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNob3dHZXRBbGxDaGlsZHJlbkNoZWNrYm94KCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzVHJlZSgpICYmIHRoaXMudHJlZUluZm8pIHtcclxuICAgICAgICAgICAgdGhpcy5lbmFibGVHZXRBbGxDaGlsZE5vZGVzID1cclxuICAgICAgICAgICAgICAgIHRoaXMudHJlZUluZm8ubG9hZERhdGFUeXBlICE9PSBcImFsbFwiICYmIHRoaXMudHJlZUluZm8ubGF5ZXJUeXBlID09PSBcInBhdGhjb2RlXCI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5lbmFibGVHZXRBbGxDaGlsZE5vZGVzID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGluaXREYXRhKCkge1xyXG5cclxuICAgICAgICBjb25zdCBvYnNlcnZlciA9IHtcclxuICAgICAgICAgICAgbmV4dDogKGRhdGE6IExvb2t1cEdyaWRSZXN1bHQpID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YSA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY29sdW1ucyB8fCAhdGhpcy5jb2x1bW5zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlTG9hZGluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlRGlhbG9nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5tZXNzYWdlclNlcnZpY2UubW9kYWxzIHx8ICF0aGlzLm1lc3NhZ2VyU2VydmljZS5tb2RhbHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeVNlcnZpY2UuZXJyb3Ioe21zZzogdGhpcy5sb2NhbFNlcnZpY2UuZ2V0VmFsdWUoJ2xvb2t1cC5jb25maWdFcnJvcicpICwgdGltZW91dDogMzAwMH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8g5pyN5Yqh5Zmo56uv5Y+R55Sf6ZSZ6K+v77yM6L+U5ZueTlVMTCDml7bvvIznm7TmjqXlhbPpl63nqpflj6NcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1Nob3cgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5kaWFsb2cpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaWFsb2cuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5pbml0T3B0aW9ucyhkYXRhKS5zdWJzY3JpYmUoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRDb2x1bW5zID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tdWx0aVNlbE1nci5pbml0U2VsZWN0ZWRDb2x1bW5zKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mYXZvcml0ZUNvbHVtbnMgPSB0aGlzLmZhdkhlbHBlci5nZXRGYXZvcml0ZUNvbHVtbnMoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudXNlUGVyc2lvbmFsQ29uZikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMucGVyc29uYWxDb25maWdTZXJ2aWNlLmdldFBlcnNvbmFsRGF0YSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBlcnNvbmFsQ29uZmlnU2VydmljZS5zYXZlUGVyc29uYWxDb25maWcoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wZXJzb25hbENvbmZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzVGFiQ2hhbmdlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvb2t1cFNlbGVjdGlvblNlci5sb2FkU2VsZWN0aW9ucyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuc2VsZWN0ZWRJdGVtcyB8fCBbXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNEb3VibGxlTGlzdCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWvvOiIquW4ruWKqeaXtu+8jOiuvue9ruW3puS+p+mAieS4reaVsOaNruaXtu+8jOS4jeWKoOi9veS4u+aVsOaNruWIl+ihqOOAglxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5uYXZTZWxlY3RlZElkcyB8fCB0aGlzLnNlbGVjdEZpcnN0SW5OYXYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZERhdGFXaGVuT3BlbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YVsnYWN0aXZlVGFiJ10gJiYgIXRoaXMuaXNUYWJDaGFuZ2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlVGFiID0gJ2RhdGFsaXN0JztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBlcnNvbmFsQ29uZiAmJiB0aGlzLnBlcnNvbmFsQ29uZi50YWJJbmRleCAhPT0gdGhpcy5hY3RpdmVUYWIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGVyc29uYWxDb25mLnRhYkluZGV4ID0gdGhpcy5hY3RpdmVUYWI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWREYXRhKGRhdGEpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc1RyZWUoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hY3RpdmVUYWIgPT09IFwiZGF0YWxpc3RcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdHQgPSB0aGlzLmNvbXBvbmVudFJlZi5pbnN0YW5jZSBhcyBUcmVlVGFibGVDb21wb25lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHQuc2VhcmNoRGF0YS52YWx1ZSAmJiB0aGlzLml0ZW1zICYmIHRoaXMuaXRlbXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXRlbXNbMF0uY2hpbGRyZW4gJiYgdGhpcy5pdGVtc1swXS5jaGlsZHJlbi5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHQudG9nZ2xlRXhwYW5kKHRoaXMuaXRlbXNbMF0sIHRydWUsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0dldEFsbENoaWxkcmVuQ2hlY2tib3goKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1RleHRDaGFuZ2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zZWFyY2hSZXN1bHQgPSBudWxsOyAvLyDmuIXnqbrkuLTml7bmn6Xor6Ig57uT5p6cXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZUxvYWRpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLmlzUmVhZHkkLm5leHQodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1JlYWR5ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZURldGVjdG9yLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvb2t1cGluaXRpYWxpemF0aW9uU3ViamVjdC5uZXh0KCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZXJyb3I6IChlcnI6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5pc1JlYWR5JC5uZXh0KHRydWUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZUxvYWRpbmcoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NlYXJjaFJlc3VsdCA9IG51bGw7IC8vIOa4heepuuS4tOaXtuafpeivoiDnu5PmnpxcclxuICAgICAgICAgICAgICAgIHRoaXMuaXNUZXh0Q2hhbmdlID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5oYXNFcnJvciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZURldGVjdG9yLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZXJyID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlclNlcnZpY2UuZXJyb3IoZXJyKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyLk1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXJTZXJ2aWNlLmVycm9yKGVyci5NZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIuZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VyU2VydmljZS5leGNlcHRpb24oZXJyLmVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlclNlcnZpY2UuZXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwi5bqU55So5pyN5Yqh5Zmo6ZSZ6K+vLOivt+iBlOezu+ezu+e7n+euoeeQhuWRmO+8gVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBsZXQgcDogYW55ID0ge1xyXG4gICAgICAgICAgICBwYWdlSW5mbzoge1xyXG4gICAgICAgICAgICAgICAgcGFnZVNpemU6IHRoaXMucGFnZVNpemUgfHwgMjAsXHJcbiAgICAgICAgICAgICAgICBwYWdlSW5kZXg6IDEsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfTtcclxuICAgICAgICBsZXQgdDogTE9BRF9EQVRBX1RZUEUgPSBcImFsbFwiO1xyXG4gICAgICAgIGlmICh0aGlzLmlzVGV4dENoYW5nZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9zZWFyY2hTdGF0ZSA9IHsgXHJcbiAgICAgICAgICAgICAgICBmaWVsZDogXCIqXCIsXHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5kaXNwbGF5VGV4dFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5fc2VhcmNoU3RhdGUgJiYgdGhpcy5fc2VhcmNoU3RhdGUudmFsdWUpIHtcclxuICAgICAgICAgICAgcFsnc2VhcmNoJ10gPSB0aGlzLl9zZWFyY2hTdGF0ZTtcclxuICAgICAgICAgICAgdCA9ICdzZWFyY2gnO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIGlmICghdGhpcy5pc1RhYkNoYW5nZWQgJiYgdGhpcy5lbmFibGVUb1NlbGVjdCkge1xyXG4gICAgICAgICAgICBjb25zdCB2YWxzID0gdGhpcy5zZWxlY3Rpb25NZ3IuZ2V0U2VsZWN0ZWRJZHMoKTtcclxuICAgICAgICAgICAgaWYgKHZhbHMgJiYgdmFscy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHBbXCJzZWxlY3RlZEluZm9cIl0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRJZHM6IHZhbHMsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXNbXCJzZWxlY3RlZElkc1wiXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBbXCJzZWxlY3RlZEluZm9cIl0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZElkczogdGhpc1tcInNlbGVjdGVkSWRzXCJdLFxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc2hvd0xvYWRpbmcoKTtcclxuICAgICAgICB0aGlzLmhhc0Vycm9yID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHRoaXMuaHR0cE1nci5sb29rdXBSZXF1ZXN0KHAsIHQpLnBpcGUoXHJcbiAgICAgICAgICAgIG1hcCgocmVzdERhdGE6IExvb2t1cEdyaWRSZXN1bHQpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN0RGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3REYXRhLnNlbGVjdGVkSXRlbXMgPSByZXN0RGF0YVtcInNlbGVjdGVkRGF0YVwiXSB8fCBbXTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3REYXRhICYmIHR5cGVvZiByZXN0RGF0YSA9PT0gXCJvYmplY3RcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN0RGF0YS5zZWxlY3RlZEl0ZW1zID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3REYXRhID09PSBudWxsID8gZmFsc2UgOiByZXN0RGF0YTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICApLnN1YnNjcmliZShvYnNlcnZlcik7XHJcbiAgICB9XHJcblxyXG4gICAgbG9hZERhdGEocmVzRGF0YT86IExvb2t1cEdyaWRSZXN1bHQsIHJlYmluZEV2ZW50ID0gdHJ1ZSkge1xyXG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZVRhYiA9PT0gXCJkYXRhbGlzdFwiKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnVzZUZhdm9yaXRlICYmICF0aGlzLmlzVHJlZSgpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZhdkhlbHBlci51cGRhdGVGYXZvcml0ZXNTdGF0dXMocmVzRGF0YS5pdGVtcyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5kaXNwbGF5VHlwZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBMb29rdXBHcmlkRGlzcGxheVR5cGUuTmF2TGlzdDpcclxuICAgICAgICAgICAgICAgIGNhc2UgTG9va3VwR3JpZERpc3BsYXlUeXBlLk5hdlRyZWVMaXN0OlxyXG4gICAgICAgICAgICAgICAgY2FzZSBMb29rdXBHcmlkRGlzcGxheVR5cGUuTGlzdDpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWREYXRhVGFibGVEYXRhKHJlc0RhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZWJpbmRFdmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmR0RXZlbnRNZ3IuYmluZERhdGFUYWJsZUV2ZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBMb29rdXBHcmlkRGlzcGxheVR5cGUuVHJlZUxpc3Q6XHJcbiAgICAgICAgICAgICAgICBjYXNlIExvb2t1cEdyaWREaXNwbGF5VHlwZS5OYXZMaXN0VHJlZTpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRUcmVlVGFibGVEYXRhKHJlc0RhdGEsIHJlYmluZEV2ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5hY3RpdmVUYWIgPT09IFwiZmF2b3JpdGVcIikge1xyXG4gICAgICAgICAgICB0aGlzLmxvYWRGYXZEYXRhKHJlc0RhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8g6YCJ5Lit5pWw5o2uXHJcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25NZ3Iuc2VsZWN0Q3VycmVudFZhbHVlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBsb2FkRmF2RGF0YShyZXN1bHQ6IExvb2t1cEdyaWRSZXN1bHQpIHtcclxuICAgICAgICAvLyDliqDovb3mlLbol4/mlbDmja5cclxuICAgICAgICBpZiAodGhpcy51c2VGYXZvcml0ZSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pc1RyZWUoKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRUcmVlSW5mbyhyZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdHJlZU5vZGVzID0gdGhpcy5mYXZIZWxwZXIuaW5pdEZhdm9yaXRlVHJlZURhdGEoXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0Lml0ZW1zXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdHJlZURhdGEgPSB0aGlzLnRyZWVOb2RlSGVscGVyXHJcbiAgICAgICAgICAgICAgICAgICAgLmZsYXRUcmVlTm9kZXModHJlZU5vZGVzKVxyXG4gICAgICAgICAgICAgICAgICAgIC5tYXAoKG4pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbi5kYXRhW1wiX2FkZHRpb25hbF9cIl0gPSBuW1wiYWRkdGlvbmFsXCJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5kYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb29rdXBTZWxlY3Rpb25TZXIuaW5pdEZhdm9yaXRlSXRlbXModHJlZURhdGEpO1xyXG5cclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmF2b3JpdGVzQ29tcG9uZW50UmVmLmluc3RhbmNlLnNjcm9sbFRvWSgxKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb29rdXBTZWxlY3Rpb25TZXIuaW5pdEZhdm9yaXRlSXRlbXMocmVzdWx0Lml0ZW1zKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5mYXZIZWxwZXIubG9hZEZhdm9yaXRlc0RhdGEocmVzdWx0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbG9hZERhdGFUYWJsZURhdGEocmVzRGF0YT86IExvb2t1cEdyaWRSZXN1bHQpIHtcclxuICAgICAgICBpZiAocmVzRGF0YSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy51c2VGYXZvcml0ZSAmJiAhdGhpcy5pc1RyZWUoKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5mYXZIZWxwZXIudXBkYXRlRmF2b3JpdGVzU3RhdHVzKHJlc0RhdGEuaXRlbXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmdyaWRPcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzRGF0YSAmJiByZXNEYXRhLmNvbHVtbnMgJiYgcmVzRGF0YS5jb2x1bW5zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgIXRoaXMuZ3JpZE9wdGlvbnMuY29sdW1ucyB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAhdGhpcy5ncmlkT3B0aW9ucy5jb2x1bW5zLmxlbmd0aFxyXG4gICAgICAgICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbnMgPSByZXNEYXRhLmNvbHVtbnM7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuaXRlbXMgPSByZXNEYXRhLml0ZW1zO1xyXG4gICAgICAgICAgICAgICAgdGhpcy50b3RhbCA9IHJlc0RhdGEudG90YWwgfHwgcmVzRGF0YS5pdGVtcy5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICBpZiAoIHJlc0RhdGEuc2VhcmNoRmllbGRzICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ3JpZE9wdGlvbnMuc2VhcmNoRmllbGRzID0gdGhpcy5nZXRTZWFyY2hDb2x1bW5zKHJlc0RhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHJlc0RhdGEucGFnZUluZm8pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc0RhdGEucGFnZUluZm8ucGFnZUxpc3QgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgKCF0aGlzLnBhZ2VMaXN0IHx8ICF0aGlzLnBhZ2VMaXN0Lmxlbmd0aClcclxuICAgICAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlTGlzdCA9IHJlc0RhdGEucGFnZUluZm8ucGFnZUxpc3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFnaW5hdGlvbiA9IHJlc0RhdGEucGFnZUluZm8uZW5hYmxlUGFnZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlSW5kZXggPSByZXNEYXRhLnBhZ2VJbmZvLnBhZ2VJbmRleDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhZ2VTaXplID0gcmVzRGF0YS5wYWdlSW5mby5wYWdlU2l6ZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdpbmF0aW9uID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdyaWRPcHRpb25zID0gcmVzRGF0YSBhcyBMb29rdXBHcmlkT3B0aW9ucztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy51cGRhdGVEYXRhVGFibGUodGhpcy5ncmlkT3B0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB1cGRhdGVEYXRhVGFibGUob3B0czogYW55KSB7XHJcbiAgICAgICAgaWYgKG9wdHMpIHtcclxuICAgICAgICAgICAgY29uc3QgZHQgPSB0aGlzLmNvbXBvbmVudFJlZi5pbnN0YW5jZSBhcyBEYXRhVGFibGVDb21wb25lbnQ7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWR0LmNvbHVtbnMgfHwgZHQuY29sdW1ucy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIGR0LmNvbHVtbnMgPSB0aGlzLmdyaWRPcHRpb25zLmNvbHVtbnM7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGR0LmFsbENvbHVtbnNUaXRsZSA9IHRoaXMuYWxsQ29sdW1uc1RpdGxlO1xyXG4gICAgICAgICAgICBkdC5zZWFyY2hGaWVsZHMgPSBvcHRzLnNlYXJjaEZpZWxkcztcclxuICAgICAgICAgICAgZHQucGFnaW5hdGlvbiA9IG9wdHMucGFnaW5hdGlvbjtcclxuICAgICAgICAgICAgZHQucGFnZUxpc3QgPSB0aGlzLnBhZ2VMaXN0O1xyXG4gICAgICAgICAgICBkdC5yZW1vdGVTb3J0ID0gdGhpcy5yZW1vdGVTb3J0O1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMubG9hZERhdGFXaGVuT3Blbikge1xyXG4gICAgICAgICAgICAgICAgZHQubG9hZERhdGEoe1xyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VTaXplOiBvcHRzLnBhZ2VTaXplLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VJbmRleDogdGhpcy5ncmlkT3B0aW9ucy5wYWdlSW5kZXgsXHJcbiAgICAgICAgICAgICAgICAgICAgdG90YWw6IHRoaXMuZ3JpZE9wdGlvbnMudG90YWwsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogdGhpcy5ncmlkT3B0aW9ucy5pdGVtcyxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgZHQuY2QubWFya0ZvckNoZWNrKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5sb2FkU3VjY2Vzcy5lbWl0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0VHJlZUluZm8ocmVzRGF0YSkge1xyXG4gICAgICAgIGlmICghcmVzRGF0YSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgX3RyZWVJbmZvID0gbnVsbDtcclxuICAgICAgICBpZiAocmVzRGF0YS50cmVlSW5mbykge1xyXG4gICAgICAgICAgICBjb25zdCBvbmx5U2VsZWN0TGVhZiA9IHJlc0RhdGEudHJlZUluZm8ub25seVNlbGVjdExlYWY7XHJcbiAgICAgICAgICAgIGxldCBfb3NsOiBPTkxZX1NFTEVDVF9MRUFGID0gXCJub1wiO1xyXG4gICAgICAgICAgICBpZiAob25seVNlbGVjdExlYWYgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgX29zbCA9IG9ubHlTZWxlY3RMZWFmID8gXCJ5ZXNcIiA6IFwibm9cIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfdHJlZUluZm8gPSB7IC4uLnJlc0RhdGEudHJlZUluZm8sIG9ubHlTZWxlY3RMZWFmOiBfb3NsIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5ncmlkT3B0aW9ucy50cmVlSW5mbykge1xyXG4gICAgICAgICAgICBjb25zdCB0cmVlSW5mbyA9IHRoaXMuZ3JpZE9wdGlvbnMudHJlZUluZm87XHJcbiAgICAgICAgICAgIGlmICh0cmVlSW5mbykge1xyXG4gICAgICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgICAgIHRyZWVJbmZvLm9ubHlTZWxlY3RMZWFmID09PSB1bmRlZmluZWQgfHxcclxuICAgICAgICAgICAgICAgICAgICB0cmVlSW5mby5vbmx5U2VsZWN0TGVhZiA9PT0gbnVsbFxyXG4gICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJlZUluZm8ub25seVNlbGVjdExlYWYgPSBcIm5vXCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0cmVlSW5mby5vbmx5U2VsZWN0TGVhZiA9PT0gXCJib29sZWFuXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0cmVlSW5mby5vbmx5U2VsZWN0TGVhZiA9IHRyZWVJbmZvLm9ubHlTZWxlY3RMZWFmID8gXCJ5ZXNcIiA6IFwibm9cIjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyAyMDIxMDkwMlxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubG9hZFRyZWVEYXRhVHlwZSA9PT0gXCJkZWZhdWx0XCIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0cmVlSW5mby5sb2FkRGF0YVR5cGUgPSBfdHJlZUluZm8ubG9hZERhdGFUeXBlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0cmVlSW5mby5sb2FkRGF0YVR5cGUgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRUcmVlRGF0YVR5cGUgPT09IFwibG9hZGFsbFwiID8gXCJhbGxcIiA6IFwiYXN5bmNcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodHJlZUluZm8ub25seVNlbGVjdExlYWYgIT09IFwiZGVmYXVsdFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RyZWVJbmZvID0gT2JqZWN0LmFzc2lnbihfdHJlZUluZm8sIHRyZWVJbmZvKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy50cmVlSW5mbyA9IF90cmVlSW5mbztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGxvYWRUcmVlVGFibGVEYXRhKHJlc0RhdGE/OiBMb29rdXBHcmlkUmVzdWx0LCByZWJpbmRFdmVudCA9IHRydWUpIHtcclxuICAgICAgICBjb25zdCBpdGVtcyA9IHJlc0RhdGEgPyByZXNEYXRhLml0ZW1zIDogdGhpcy5ncmlkT3B0aW9ucy5pdGVtcztcclxuICAgICAgICB0aGlzLml0ZW1zID0gaXRlbXM7XHJcblxyXG4gICAgICAgIGlmIChyZXNEYXRhKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0VHJlZUluZm8ocmVzRGF0YSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB0cmVlSW5mbyA9IHRoaXMuZ3JpZE9wdGlvbnMudHJlZUluZm87XHJcbiAgICAgICAgICAgIGlmICghdHJlZUluZm9bXCJ0cmVlRGF0YUlzSW5pdFwiXSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRyZWVJbmZvLmxheWVyVHlwZS50b0xvd2VyQ2FzZSgpID09PSBcInBhdGhjb2RlXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLml0ZW1zID0gdGhpcy5sb29rdXBVdGlscy5tYWtlVHJlZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pdGVtcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJlZUluZm9cclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLml0ZW1zID0gdGhpcy5sb29rdXBVdGlscy5tYWtlVHJlZVdpdGhQYXJlbnRJRChcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pdGVtcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJlZUluZm8uZGF0YUZpZWxkID8gYCR7dHJlZUluZm8uZGF0YUZpZWxkfS4ke3RyZWVJbmZvLnBhcmVudEZpZWxkfWA6IHRyZWVJbmZvLnBhcmVudEZpZWxkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlkRmllbGRcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5jb21wb25lbnRSZWYuaW5zdGFuY2UgaW5zdGFuY2VvZiBUcmVlVGFibGVDb21wb25lbnQpIHtcclxuICAgICAgICAgICAgY29uc3QgdHQgPSB0aGlzLmNvbXBvbmVudFJlZi5pbnN0YW5jZSBhcyBUcmVlVGFibGVDb21wb25lbnQ7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnRyZWVJbmZvKSB7XHJcbiAgICAgICAgICAgICAgICB0dC5sb2FkRGF0YVR5cGUgPSB0aGlzLnRyZWVJbmZvLmxvYWREYXRhVHlwZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCF0aGlzLmNvbHVtbnMgfHwgIXRoaXMuY29sdW1ucy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHR0LmNvbHVtbnMgPSByZXNEYXRhLmNvbHVtbnMgfHwgW107XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdyaWRPcHRpb25zLmNvbHVtbnMgPSB0dC5jb2x1bW5zO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBpc0xvYWRBbGxUcmVlRGF0YSA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmxvYWRUcmVlRGF0YVR5cGUgPT09IFwiZGVmYXVsdFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHR0LmxvYWREYXRhVHlwZSA9PT0gXCJhbGxcIjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubG9hZFRyZWVEYXRhVHlwZSA9PT0gXCJsb2FkYWxsXCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBpZiAocmViaW5kRXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudHRFdmVudE1nci5iaW5kVHJlZXRhYmxlRXZlbnQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBpc0xvYWRBbGwgPSBpc0xvYWRBbGxUcmVlRGF0YSgpO1xyXG5cclxuICAgICAgICAgICAgLyoqIOWujOaVtOagkeiKgueCueajgOafpSBCeSBMdWNhcyAyMDIwMDMwMiAqL1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy5pdGVtcyA9IHRoaXMuY2hlY2tOb2RlQ2FuQmVTZWxlY3QodGhpcy5pdGVtcywgaXNMb2FkQWxsKTtcclxuICAgICAgICAgICAgdHQua2VlcFNlbGVjdCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy51c2VGYXZvcml0ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5mYXZIZWxwZXIudXBkYXRlRmF2b3JpdGVzU3RhdHVzKHRoaXMuaXRlbXMpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5sb2FkRGF0YVdoZW5PcGVuKSB7XHJcbiAgICAgICAgICAgICAgICB0dC5sb2FkRGF0YSh0aGlzLml0ZW1zKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0dC5yZXNpemUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlnKjmnoTlrozmlbTmoJHkuK3vvIzmnInpg6jliIboioLngrnlm6DkuLrmnaHku7booqvov4fmu6TvvIzkuLrmmL7npLrlrozmlbTmoJHvvIxcclxuICAgICAqIOi/meS6m+iKgueCueWcqOi/kOihjOaXtuaYr+S4jeWFgeiuuOiiq+mAieS4reeahCwg6L+U5Zue5paw55qE6IqC54K55pWw57uEXHJcbiAgICAgKiBCeSBMdWNhcyAyMDIwMDMwMlxyXG4gICAgICovXHJcbiAgICBjaGVja05vZGVDYW5CZVNlbGVjdChub2RlcywgaXNBbGxUcmVlRGF0YSA9IGZhbHNlKTogVHJlZU5vZGVbXSB7XHJcbiAgICAgICAgaWYgKG5vZGVzICYmIG5vZGVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbm9kZXMubWFwKChub2RlOiBUcmVlTm9kZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKG5vZGUuaGFzT3duUHJvcGVydHkoXCJhZGR0aW9uYWxcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICBub2RlLnNlbGVjdGFibGUgPSAhbm9kZVtcImFkZHRpb25hbFwiXTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobm9kZS5jaGlsZHJlbiAmJiBub2RlLmNoaWxkcmVuLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tOb2RlQ2FuQmVTZWxlY3Qobm9kZS5jaGlsZHJlbiwgaXNBbGxUcmVlRGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0FsbFRyZWVEYXRhICYmICghdGhpcy5fc2VhcmNoU3RhdGUgfHwgIXRoaXMuX3NlYXJjaFN0YXRlLnZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLmxlYWYgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBub2RlcztcclxuICAgIH1cclxuXHJcbiAgICBvbkNoYW5nZXModmFsKSB7XHJcbiAgICAgICAgaWYgKCF2YWwpIHtcclxuICAgICAgICAgICAgdGhpcy5vbkNsZWFyKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5kaXNwbGF5VGV4dCA9IHZhbDtcclxuICAgICAgICAgICAgdGhpcy5pc1RleHRDaGFuZ2UgPSB0aGlzLm9yaWdpbmFsVGV4dCAhPT0gdGhpcy5kaXNwbGF5VGV4dDtcclxuICAgICAgICAgICAgaWYgKHRoaXMubm9zZWFyY2gpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0TW9kZWxWYWx1ZSh2YWwpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhck1hcHBpbmdzLmVtaXQoeyBpbnN0YW5jZTogdGhpcywgdmFsdWU6IHZhbCwgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMub25Nb2RlbFRvdWNoZWQodmFsKTtcclxuICAgICAgICAgICAgdGhpcy52YWx1ZUNoYW5nZWQuZW1pdCh2YWwpO1xyXG4gICAgICAgICAgICB0aGlzLnRleHRDaGFuZ2VkLmVtaXQodmFsKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIG9uQ2xlYXIoZW1pdCA9IHRydWUpIHtcclxuICAgICAgICB0aGlzLmlzVGV4dENoYW5nZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuZGlzcGxheVRleHQgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMuZGlzcGxheVZhbHVlID0gXCJcIjtcclxuICAgICAgICB0aGlzLm9yaWdpbmFsVGV4dCA9IFwiXCI7XHJcbiAgICAgICAgdGhpcy5leHRlbmRJbmZvID0gXCJcIjtcclxuICAgICAgICB0aGlzLnNldE1vZGVsVmFsdWUoXCJcIik7XHJcbiAgICAgICAgaWYgKHRoaXMubWFwcGluZ0ZuKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWFwcGluZ0ZuKG51bGwsIHRoaXMubWFwRmllbGRzKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5tYXBGaWVsZHMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJpbmRpbmdEYXRhID0gdGhpcy5zZWxlY3Rpb25NZ3IuZ2V0QmluZGluZ0RhdGEoKTtcclxuICAgICAgICAgICAgICAgIGlmIChiaW5kaW5nRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVmYXVsdE1hcHBpbmcubG9va3VwRmllbGRNYXAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWFwRmllbGRzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBiaW5kaW5nRGF0YVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5tdWx0aVNlbE1nci5jbGVhcigpO1xyXG4gICAgICAgIGlmIChlbWl0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xlYXIuZW1pdCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjbGVhclZhbHVlKGVtaXQgPSB0cnVlKSB7XHJcbiAgICAgICAgdGhpcy5vbkNsZWFyKGVtaXQpO1xyXG4gICAgfVxyXG5cclxuICAgIHNlbGVjdEl0ZW0ocm93RGF0YT86IGFueSkge1xyXG4gICAgICAgIGxldCBzZWxlY3RlZFJvdyA9IG51bGw7XHJcbiAgICAgICAgaWYgKHJvd0RhdGEpIHtcclxuICAgICAgICAgICAgc2VsZWN0ZWRSb3cgPSByb3dEYXRhO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkUm93ID0gdGhpcy5zZWxlY3Rpb25zO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFzZWxlY3RlZFJvdykge1xyXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRSb3cgPSBudWxsO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoc2VsZWN0ZWRSb3cpICYmICFzZWxlY3RlZFJvdy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFJvdyA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX3NlYXJjaFN0YXRlID0geyBcclxuICAgICAgICAgICAgZmllbGQ6ICcqJyxcclxuICAgICAgICAgICAgdmFsdWU6ICcnXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDlpoLmnpzlrprkuYnoh6rlrprkuYnlpITnkIbnoa7lrprkuovku7bvvIzliJnnlLHoh6rlrprkuYnkuovku7blpITnkIblkI7pnaLnmoTpgLvovpFcclxuICAgICAgICBpZiAodGhpcy5va0hhbmRsZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5va0hhbmRsZXIoeyBkYXRhOiBzZWxlY3RlZFJvdywgaW5zdGFuY2U6IHRoaXMgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuYmVmb3JlU2VsZWN0RGF0YSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYnNkUmVzdWx0ID0gdGhpcy5iZWZvcmVTZWxlY3REYXRhKHtcclxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZTogdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiBzZWxlY3RlZFJvdyxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKGJzZFJlc3VsdCAmJiBic2RSZXN1bHQuc3Vic2NyaWJlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnNkUmVzdWx0LnN1YnNjcmliZSgoZTogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2JlZm9yZVNlbGVjdERhdGFDYWxsQmFjayhlLCBzZWxlY3RlZFJvdyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMud3JpdGVDb25zb2xlKCfluK7liqnmlbDmja7pgInkuK3liY3kuovku7bmnKrov5Tlm57lgLzmiJbov5Tlm57nsbvlnovpnZ5PYnNlcnZhYmxlLCDor7fmo4Dmn6UnLCAnZXJyb3InKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2JlZm9yZVNlbGVjdERhdGFDYWxsQmFjayh0cnVlLCBzZWxlY3RlZFJvdyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0UGF0aENvZGUoZGF0YSwgdHJlZUluZm8gPSBudWxsKSB7XHJcbiAgICAgICByZXR1cm4gdGhpcy5sb29rdXBVdGlscy5nZXRQYXRoQ29kZShkYXRhLCB0cmVlSW5mbyB8fCB0aGlzLnRyZWVJbmZvKTtcclxuICAgIH1cclxuICAgIGdldExheWVyRGF0YShkYXRhLCB0cmVlSW5mbyA9IG51bGwpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5sb29rdXBVdGlscy5nZXRMYXllckRhdGEoZGF0YSwgdHJlZUluZm8gfHwgdGhpcy50cmVlSW5mbyk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHByaXZhdGUgZ2V0UGFyZW50UGF0aENvZGUocm93cykge1xyXG4gICAgICAgIGNvbnN0IG1heEJ5ID0gKGFyciwgZm4pID0+XHJcbiAgICAgICAgICAgIE1hdGgubWF4KFxyXG4gICAgICAgICAgICAgICAgLi4uYXJyLm1hcCh0eXBlb2YgZm4gPT09IFwiZnVuY3Rpb25cIiA/IGZuIDogKHZhbCkgPT4gdmFsW2ZuXSlcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgLy8gY29uc3QgeyBkYXRhRmllbGQsIHBhdGhGaWVsZCwgbGF5ZXJGaWVsZCB9ID0gdGhpcy50cmVlSW5mbztcclxuICAgICAgICBjb25zdCBtYXhMYXllciA9IG1heEJ5KHJvd3MsICh4KSA9PiB0aGlzLmdldExheWVyRGF0YSh4KSk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IG1heExheWVyOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgX3Jvd3MgPSByb3dzLmZpbHRlcigobikgPT4gdGhpcy5nZXRMYXllckRhdGEobikgPT09IGkpO1xyXG4gICAgICAgICAgICBpZiAoX3Jvd3MgJiYgX3Jvd3MubGVuZ3RoICYmIF9yb3dzLmxlbmd0aCA8IHJvd3MubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBfcm93cy5mb3JFYWNoKChyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGF0Y2hDb2RlID0gdGhpcy5nZXRQYXRoQ29kZShyKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBfcm93czIgPSByb3dzLmZpbHRlcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgKG4pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfcGMgPSB0aGlzLmdldFBhdGhDb2RlKG4pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9wYyAhPT0gcGF0Y2hDb2RlICYmIF9wYy5pbmRleE9mKHBhdGNoQ29kZSkgPT09IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfcm93czIgJiYgX3Jvd3MyLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByb3dzID0gcm93cy5maWx0ZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAobikgPT4gdGhpcy5nZXRQYXRoQ29kZShuKSAhPT0gcGF0Y2hDb2RlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByb3dzO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2JlZm9yZVNlbGVjdERhdGFDYWxsQmFjayhlLCBzZWxlY3RlZFJvdykge1xyXG4gICAgICAgIGxldCBjYW5TZWxlY3QgPSBlO1xyXG4gICAgICAgIGxldCBtZXNzYWdlID0gXCJcIjtcclxuICAgICAgICBpZiAodHlwZW9mIGUgPT09IFwiYm9vbGVhblwiKSB7XHJcbiAgICAgICAgICAgIGNhblNlbGVjdCA9IGU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBlID09PSBcIm9iamVjdFwiKSB7XHJcbiAgICAgICAgICAgICAgICBjYW5TZWxlY3QgPSBlLmNhblNlbGVjdDtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBlLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjYW5TZWxlY3QgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFzZWxlY3RlZFJvdykge1xyXG4gICAgICAgICAgICBtZXNzYWdlID0gdGhpcy5tdXN0Q2hvb3NBZGF0YXJvdztcclxuICAgICAgICAgICAgY2FuU2VsZWN0ID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY2FuU2VsZWN0KSB7XHJcbiAgICAgICAgICAgIGxldCBzZWxlY3RlZFJvd3MkID0gb2Yoc2VsZWN0ZWRSb3cpO1xyXG4gICAgICAgICAgICAvLyDlpJrpgIkg5qCR5biu5YqpIOW8guatpeWKoOi9vSDliIbnuqfnoIEg5byA5ZCv5ZCM5q2l6YCJ5oupIOaIluWMheWQq+S4i+e6p1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuc2luZ2xlU2VsZWN0ICYmIHRoaXMuZW5hYmxlQ2FzY2FkZSAmJiB0aGlzLmlzVHJlZSgpICkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudHJlZUluZm8ubG9hZERhdGFUeXBlICE9PSBcImFsbFwiICYmIHRoaXMudHJlZUluZm8ubGF5ZXJUeXBlID09PSBcInBhdGhjb2RlXCIgJiYgdGhpcy5pc0dldEFsbENoaWRsTm9kZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcGFyZW50c0lkcyA9IHRoaXMuZ2V0UGFyZW50UGF0aENvZGUoc2VsZWN0ZWRSb3cpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJlbnRzSWRzICYmIHBhcmVudHNJZHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudHNJZHMgPSBwYXJlbnRzSWRzLm1hcChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChuKSA9PiB0aGlzLmdldFBhdGhDb2RlKG4pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRSb3dzJCA9IHRoaXMuaHR0cE1nclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmdldERhdGEoeyBwYXJlbnRzSWRzIH0sIFwiYWxsQ2hpbGRyZW5cIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5waXBlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcCgocjogTG9va3VwR3JpZFJlc3VsdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpdGVtcyA9IHIuaXRlbXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gci5pdGVtcy5tYXAoKGQpID0+IGQuZGF0YSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFsbGl0ZW1zID0gWy4uLnNlbGVjdGVkUm93LCAuLi5pdGVtc107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpZHMgPSBhbGxpdGVtcy5tYXAoKG4pID0+IG5bdGhpcy5pZEZpZWxkXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkcyA9IEFycmF5LmZyb20obmV3IFNldChpZHMpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlkcy5tYXAoKG4pID0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxpdGVtcy5maW5kKChhKSA9PiBhW3RoaXMuaWRGaWVsZF0gPT09IG4pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBzZWxlY3RlZFJvd3MkLnN1YnNjcmliZSgocm93cykgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZUxvYWRpbmcoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ29udHJvbFZhbHVlKHJvd3MpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnVzZVRpcCB8fCAhcm93cykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnVzZVRpcCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGVyc29uYWxDb25maWdTZXJ2aWNlLnVwZGF0ZVF1ZWNrU2VsZWN0ZWQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvd3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9jYWxTZXJ2aWNlLmxvY2FsZUlkXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm5vdGlmeVNlcnZpY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeVNlcnZpY2Uud2FybmluZyhtZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlclNlcnZpY2Uud2FybmluZyhtZXNzYWdlLCBcIlwiLCB0cnVlLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nLmVsLm5hdGl2ZUVsZW1lbnQuY2xpY2soKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZUNvbnRyb2xWYWx1ZShzZWxlY3RlZFJvdykge1xyXG4gICAgICAgIGlmIChzZWxlY3RlZFJvdykge1xyXG4gICAgICAgICAgICB0aGlzLnNldERpc3BsYXlUZXh0KHNlbGVjdGVkUm93KTtcclxuICAgICAgICAgICAgaWYgKHRoaXMubWFwcGluZ0ZuKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1hcHBpbmdGbihzZWxlY3RlZFJvdywgdGhpcy5tYXBGaWVsZHMsIHRoaXMuYmluZGluZ0RhdGEpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubWFwRmllbGRzICYmIHRoaXMuYmluZGluZ0RhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlZmF1bHRNYXBwaW5nLmxvb2t1cEZpZWxkTWFwKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFJvdyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXBGaWVsZHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmluZGluZ0RhdGFcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuc2V0TW9kZWxWYWx1ZSh0aGlzLmRpc3BsYXlUZXh0KTtcclxuICAgICAgICAgICAgaWYgKHRoaXNbXCJpbkRhdGFncmlkXCJdICYmIHNlbGVjdGVkUm93KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RJdGVtcyA9IEFycmF5LmlzQXJyYXkoc2VsZWN0ZWRSb3cpXHJcbiAgICAgICAgICAgICAgICAgICAgPyBzZWxlY3RlZFJvd1xyXG4gICAgICAgICAgICAgICAgICAgIDogW3NlbGVjdGVkUm93XTtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQmluZERhdGEoc2VsZWN0SXRlbXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRhLmVtaXQoc2VsZWN0ZWRSb3cpO1xyXG4gICAgICAgICAgICB0aGlzLnJ1bkRpY3RQaWNrZWRFdmVudChzZWxlY3RlZFJvdyk7XHJcbiAgICAgICAgICAgIHRoaXMuaXNUZXh0Q2hhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIChkb2N1bWVudC5hY3RpdmVFbGVtZW50IGFzIEhUTUxCdXR0b25FbGVtZW50KS5ibHVyKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5tZXNzYWdlclNlcnZpY2Uud2FybmluZyh0aGlzLm11c3RDaG9vc0FkYXRhcm93KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB1cGRhdGVCaW5kRGF0YShzZWxlY3RlZFJvdykge1xyXG4gICAgICAgIGlmICghdGhpcy5tYXBGaWVsZHMpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgaGVscEZpZWxkcyA9IE9iamVjdC5rZXlzKHRoaXMubWFwRmllbGRzKTtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIHRoaXMubmdDb250cm9sICYmXHJcbiAgICAgICAgICAgIHRoaXMubmdDb250cm9sLmZvcm1EaXJlY3RpdmUgJiZcclxuICAgICAgICAgICAgdGhpcy5uZ0NvbnRyb2wuZm9ybURpcmVjdGl2ZS5mb3JtICYmXHJcbiAgICAgICAgICAgIHRoaXMubmdDb250cm9sLmZvcm1EaXJlY3RpdmUuZm9ybS5iaW5kaW5nRGF0YVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICBjb25zdCBiaW5kaW5nRGF0YSA9IHRoaXMubmdDb250cm9sLmZvcm1EaXJlY3RpdmUuZm9ybS5iaW5kaW5nRGF0YTtcclxuXHJcbiAgICAgICAgICAgIGlmIChiaW5kaW5nRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgaGVscEZpZWxkcy5mb3JFYWNoKChoZWxwRmllbGQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWFwRmllbGRzW2hlbHBGaWVsZF1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNwbGl0KFwiLFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZm9yRWFjaCgoZm9ybUZpZWxkOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbCA9IHNlbGVjdGVkUm93XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgocikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy51dGlscy5nZXRWYWx1ZShoZWxwRmllbGQsIHIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmpvaW4odGhpcy5tdWx0aXBsZUNob2ljZVNlcGFyYXRvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnV0aWxzLnNldFZhbHVlKGJpbmRpbmdEYXRhLCBmb3JtRmllbGQsIHZhbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIGlmIChiaW5kaW5nRGF0YS5zZXRWYWx1ZSkge1xyXG4gICAgICAgICAgICAvLyAgICAgY29uc3QgYmluZGluZ1BhdGggPSB0aGlzLm5nQ29udHJvbC5mb3JtRGlyZWN0aXZlLmZvcm0uYmluZGluZ1BhdGg7XHJcbiAgICAgICAgICAgIC8vICAgICBsZXQgcGF0aEFycjogc3RyaW5nW10gPSBbXTtcclxuICAgICAgICAgICAgLy8gICAgIGlmIChiaW5kaW5nUGF0aCkge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIHBhdGhBcnIgPSBiaW5kaW5nUGF0aC5zcGxpdCgnLycpLmZpbHRlcihuID0+IG4gIT09ICcnKTtcclxuICAgICAgICAgICAgLy8gICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vICAgICBoZWxwRmllbGRzLmZvckVhY2goKGhlbHBGaWVsZDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgdGhpcy5tYXBGaWVsZHNbaGVscEZpZWxkXS5zcGxpdCgnLCcpLmZvckVhY2goKGZvcm1GaWVsZDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIGNvbnN0IGZpZWxkUGF0aHMgPSBwYXRoQXJyLmNvbmNhdChmb3JtRmllbGQuc3BsaXQoJy4nKSk7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIGNvbnN0IHZhbCA9IHNlbGVjdGVkUm93Lm1hcChyID0+IHtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnV0aWxzLmdldFZhbHVlKGZvcm1GaWVsZCwgcik7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIH0pLmpvaW4odGhpcy5tdWx0aXBsZUNob2ljZVNlcGFyYXRvcik7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIGJpbmRpbmdEYXRhLnNldFZhbHVlKHBhdGhBcnIuY29uY2F0KGZpZWxkUGF0aHMpLCB2YWwsIHRydWUsIHRydWUpO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvLyAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBpZiAodGhpcy5iaW5kaW5nRGF0YSkge1xyXG4gICAgICAgICAgICAvLyAgICAgaGVscEZpZWxkcy5mb3JFYWNoKChoZWxwRmllbGQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIHRoaXMubWFwRmllbGRzW2hlbHBGaWVsZF0uc3BsaXQoJywnKS5mb3JFYWNoKChmb3JtRmllbGQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICBjb25zdCB2YWwgPSBzZWxlY3RlZFJvdy5tYXAociA9PiB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy51dGlscy5nZXRWYWx1ZShmb3JtRmllbGQsIHIpO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICB9KS5qb2luKHRoaXMubXVsdGlwbGVDaG9pY2VTZXBhcmF0b3IpO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICB0aGlzLnV0aWxzLnNldFZhbHVlKHRoaXMuYmluZGluZ0RhdGEsIGZvcm1GaWVsZCwgdmFsKTtcclxuICAgICAgICAgICAgLy8gICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gICAgIH0pO1xyXG4gICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0RXh0ZW5kSW5mb0ZpZWxkcyhpc0hlbHBEYXRhID0gdHJ1ZSkge1xyXG4gICAgICAgIGlmICghdGhpcy5leHRJbmZvRmllbGRzKSB7XHJcbiAgICAgICAgICAgIHRoaXMud3JpdGVDb25zb2xlKGDmnKrorr7nva7mianlsZXlrZfmrrXjgIJgKTtcclxuICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB0aXBGaWVsZEFyciA9IHRoaXMuZXh0SW5mb0ZpZWxkcy5zcGxpdChcIixcIik7XHJcblxyXG4gICAgICAgIGlmIChpc0hlbHBEYXRhKSB7XHJcbiAgICAgICAgICAgIGxldCBleHRlbmRJbmZvRmllbGRzID0gW107XHJcbiAgICAgICAgICAgIGV4dGVuZEluZm9GaWVsZHMgPSB0aXBGaWVsZEFyci5tYXAoKHRmKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtYXBLZXkgPSBPYmplY3Qua2V5cyh0aGlzLm1hcEZpZWxkcykuZmluZCgoaykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm1hcEZpZWxkc1trXSA9PT0gdGY7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobWFwS2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hcEtleTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy53cml0ZUNvbnNvbGUoYOWcqOW4ruWKqeaYoOWwhOWtl+auteS4reacquaJvuWIsCR7dGZ9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gZXh0ZW5kSW5mb0ZpZWxkcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aXBGaWVsZEFycjtcclxuICAgIH1cclxuXHJcbiAgICBvblVwZGF0ZUV4dGVuZEluZm8oKSB7XHJcbiAgICAgICAgY29uc3QganNvbkRhdGEgPSB0aGlzLnNlbGVjdGlvbk1nci5nZXRCaW5kaW5nRGF0YSgpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlRXh0ZW5kSW5mbyhqc29uRGF0YSwgZmFsc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOmAieS4reW4ruWKqeaVsOaNruWQju+8jOabtOaWsOaJqeWxleS/oeaBr1xyXG4gICAgcHJpdmF0ZSB1cGRhdGVFeHRlbmRJbmZvKGRhdGE6IGFueSwgaXNIZWxwRGF0YSA9IHRydWUpIHtcclxuICAgICAgICBpZiAoZGF0YSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5leHRJbmZvRm9ybWF0dGVyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpcFN0cmluZyA9IGRhdGEubWFwKChuKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEV4dGVuZEluZm9UZXh0KG4pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXh0ZW5kSW5mbyA9IHRpcFN0cmluZy5qb2luKFwi77yMXCIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4dGVuZEluZm8gPSB0aGlzLmdldEV4dGVuZEluZm9UZXh0KGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZXh0ZW5kSW5mb0ZpZWxkcyA9IHRoaXMuZ2V0RXh0ZW5kSW5mb0ZpZWxkcyhpc0hlbHBEYXRhKTtcclxuICAgICAgICAgICAgICAgIGlmIChleHRlbmRJbmZvRmllbGRzICYmIGV4dGVuZEluZm9GaWVsZHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGlwU3RyaW5nID0gZGF0YS5tYXAoKG4pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEV4dGVuZEluZm9UZXh0KG4sIGV4dGVuZEluZm9GaWVsZHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5leHRlbmRJbmZvID0gdGlwU3RyaW5nLmpvaW4oXCLvvIxcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5leHRlbmRJbmZvID0gdGhpcy5nZXRFeHRlbmRJbmZvVGV4dChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRlbmRJbmZvRmllbGRzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0RXh0ZW5kSW5mb1RleHQoaXRlbURhdGEsIGZpZWxkcyA9IG51bGwpIHtcclxuICAgICAgICBpZiAodHlwZW9mIHRoaXMuZXh0SW5mb0Zvcm1hdHRlciA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmV4dEluZm9Gb3JtYXR0ZXIoe1xyXG4gICAgICAgICAgICAgICAgYmluZGluZ0RhdGE6IGl0ZW1EYXRhLFxyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2U6IHRoaXMsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRpcFN0cmluZyA9IFtdO1xyXG4gICAgICAgICAgICBjb25zdCB0aXBWYWx1ZXMgPSBmaWVsZHMubWFwKCh0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0ZnYgPSB0aGlzLnV0aWxzLmdldFZhbHVlKHQsIGl0ZW1EYXRhKTtcclxuICAgICAgICAgICAgICAgIHRpcFN0cmluZy5wdXNoKHRmdik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geyBbdF06IHRmdiB9O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHRpcFN0cmluZy5qb2luKFwiIFwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXREaXNwbGF5VGV4dChyb3dzOiBhbnkpIHtcclxuICAgICAgICBjb25zdCBkZiA9IHRoaXMuZGlzcGxheUZpZWxkc1xyXG4gICAgICAgICAgICA/IHRoaXMuZGlzcGxheUZpZWxkcy5zcGxpdChcIixcIilcclxuICAgICAgICAgICAgOiBbdGhpcy50ZXh0RmllbGRdO1xyXG4gICAgICAgIGNvbnN0IHR4dEFyciA9IHJvd3MubWFwKChyKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHQgPSBbXTtcclxuICAgICAgICAgICAgZGYuZm9yRWFjaCgobikgPT4ge1xyXG4gICAgICAgICAgICAgICAgdC5wdXNoKHRoaXMudXRpbHMuZ2V0VmFsdWUobiwgcikpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHQuam9pbih0aGlzLmRpc3BsYXlUZXh0U2VwYXJhdG9yKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZ3JpZE9wdGlvbnMuc2luZ2xlU2VsZWN0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0eHRBcnIuam9pbihcIlwiKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5kaXNwbGF5RmllbGRzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHh0QXJyLm1hcCgodCkgPT4gXCJbXCIgKyB0ICsgXCJdXCIpLmpvaW4oXCIsXCIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHR4dEFyci5qb2luKFwiLFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNldERpc3BsYXlUZXh0KHNlbGVjdGVkUm93OiBhbnkpIHtcclxuICAgICAgICB0aGlzLm9yaWdpbmFsVGV4dCA9IHRoaXMuZGlzcGxheVRleHQ7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmdyaWRPcHRpb25zLnNpbmdsZVNlbGVjdCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5kaXNwbGF5Rm9ybWF0dGVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlUZXh0ID0gdGhpcy51dGlscy5nZXRWYWx1ZShcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRleHRGaWVsZCxcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFJvd1xyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc1RyZWUoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheVRleHQgPSB0aGlzLmRpc3BsYXlGb3JtYXR0ZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheVRleHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFtzZWxlY3RlZFJvd10sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvb2t1cDogdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGF0YWJsZTogdGhpcy5jb21wb25lbnRSZWZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5zdGFuY2UgYXMgRGF0YVRhYmxlQ29tcG9uZW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHQgPSB0aGlzLmNvbXBvbmVudFJlZi5pbnN0YW5jZSBhcyBUcmVlVGFibGVDb21wb25lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5VGV4dCA9IHRoaXMuZGlzcGxheUZvcm1hdHRlcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5VGV4dCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgW3NlbGVjdGVkUm93XSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgeyBsb29rdXA6IHRoaXMsIHRyZWU6IHR0IH1cclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5VGV4dCA9IHRoaXMuZ2V0RGlzcGxheVRleHQoW3NlbGVjdGVkUm93XSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5kaXNwbGF5VmFsdWUgPSBzZWxlY3RlZFJvd1t0aGlzLnZhbHVlRmllbGQgfHwgdGhpcy5pZEZpZWxkXTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWRSb3cubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5kaXNwbGF5Rm9ybWF0dGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5VGV4dCA9IHNlbGVjdGVkUm93XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKHIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnV0aWxzLmdldFZhbHVlKHRoaXMudGV4dEZpZWxkLCByKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmpvaW4odGhpcy5tdWx0aXBsZUNob2ljZVNlcGFyYXRvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzVHJlZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheVRleHQgPSB0aGlzLmRpc3BsYXlGb3JtYXR0ZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlUZXh0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRSb3csXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9va3VwOiB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGF0YWJsZTogdGhpcy5jb21wb25lbnRSZWZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluc3RhbmNlIGFzIERhdGFUYWJsZUNvbXBvbmVudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0dCA9IHRoaXMuY29tcG9uZW50UmVmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5zdGFuY2UgYXMgVHJlZVRhYmxlQ29tcG9uZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlUZXh0ID0gdGhpcy5kaXNwbGF5Rm9ybWF0dGVyKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5VGV4dCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkUm93LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBsb29rdXA6IHRoaXMsIHRyZWU6IHR0IH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheVRleHQgPSB0aGlzLmdldERpc3BsYXlUZXh0KHNlbGVjdGVkUm93KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlWYWx1ZSA9IHNlbGVjdGVkUm93XHJcbiAgICAgICAgICAgICAgICAgICAgLm1hcCgocikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy51dGlscy5nZXRWYWx1ZSh0aGlzLnZhbHVlRmllbGQgfHwgdGhpcy5pZEZpZWxkLCByKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC5qb2luKHRoaXMubXVsdGlwbGVDaG9pY2VTZXBhcmF0b3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMub3JpZ2luYWxUZXh0ID0gdGhpcy5kaXNwbGF5VGV4dDtcclxuICAgIH1cclxuXHJcbiAgICBydW5EaWN0UGlja2VkRXZlbnQocm93RGF0YTogYW55KSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGljdFBpY2tlZCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5va0J1dHRvbikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5va0J1dHRvbi5uYXRpdmVFbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmRpY3RQaWNrZWRTdWJzY3JpcHRpb24gPSB0aGlzLmRpY3RQaWNrZWQocm93RGF0YSkuc3Vic2NyaWJlKFxyXG4gICAgICAgICAgICAgICAgKHY6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm9rQnV0dG9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub2tCdXR0b24ubmF0aXZlRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHYgPT09IFwiYm9vbGVhblwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlRGlhbG9nKHJvd0RhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZW9mIHYgPT09IFwib2JqZWN0XCIgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgdi5jbG9zZURpYWxvZyAhPT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICF2LmNsb3NlRGlhbG9nXHJcbiAgICAgICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2Lm1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXJTZXJ2aWNlLndhcm5pbmcodi5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VEaWFsb2cocm93RGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlRGlhbG9nKHJvd0RhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlRGlhbG9nKHJvd0RhdGEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGZvY3VzVG9JbnB1dCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnpvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlucHV0R3JvdXAgJiYgdGhpcy5pbnB1dEdyb3VwLnRleHRib3gpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmlucHV0R3JvdXAudGV4dGJveC5uYXRpdmVFbGVtZW50LmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlRGlhbG9nKHJvd0RhdGEgPSBudWxsKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGlhbG9nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlhbG9nLmNsb3NlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChyb3dEYXRhKSB7XHJcbiAgICAgICAgICAgIHRoaXMubXVsdGlTZWxNZ3Iuc2F2ZShyb3dEYXRhKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gdGhpcy5pc1Nob3cgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmZvY3VzVG9JbnB1dCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGNhbmNlbFNlbGVjdCgpIHtcclxuICAgICAgICB0aGlzLmNsb3NlRGlhbG9nKCk7XHJcbiAgICAgICAgdGhpcy5pc1RleHRDaGFuZ2UgPSBmYWxzZTtcclxuICAgICAgICBpZiAoIXRoaXMubm9zZWFyY2gpIHtcclxuICAgICAgICAgICAgdGhpcy5kaXNwbGF5VGV4dCA9IHRoaXMub3JpZ2luYWxUZXh0O1xyXG4gICAgICAgICAgICB0aGlzLnNldE1vZGVsVmFsdWUodGhpcy5kaXNwbGF5VGV4dCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5jYW5jZWxIYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FuY2VsSGFuZGxlcih0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0TW9kZWxWYWx1ZSh2KSB7XHJcbiAgICAgICAgaWYgKHRoaXMub25Nb2RlbENoYW5nZSkge1xyXG4gICAgICAgICAgICB0aGlzLm9uTW9kZWxDaGFuZ2Uodik7XHJcbiAgICAgICAgICAgIHRoaXMudmFsdWVDaGFuZ2VkLmVtaXQodik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIOaVsOaNruWIl+ihqO+8jOaUtuiXj++8jCDlt7LpgInmlbDmja4gdGFiIOmhteWIh+aNolxyXG4gICAgb25UYWJDaGFuZ2UoZTogYW55KSB7XHJcbiAgICAgICAgdGhpcy5hY3RpdmVUYWIgPSBlLnRhYkluZGV4O1xyXG4gICAgICAgIHRoaXMucGVyc29uYWxDb25mLnRhYkluZGV4ID0gdGhpcy5hY3RpdmVUYWI7XHJcbiAgICAgICAgY29uc3QgX2ZpcnN0Q2hhbmdlID0gdGhpcy5pc1RhYkNoYW5nZWQ7XHJcbiAgICAgICAgdGhpcy5pc1RhYkNoYW5nZWQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMucGVyc29uYWxDb25maWdTZXJ2aWNlLnVwZGF0ZVBlcnNvbmFsQ29uZmlnKHtcclxuICAgICAgICAgICAgdGFiSW5kZXg6IGUudGFiSW5kZXgsXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZVRhYiA9PT0gXCJkYXRhbGlzdFwiKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzRG91YmxsZUxpc3QoKSAmJiAhdGhpcy5sZWZ0Q29tcG9uZW50UmVmKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5uYXZpZ2F0aW9uT3B0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9va3VwQ21wTWdyLmNyZWF0ZUxlZnRDb21wb25lbnQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmF2aWdhdGlvbk9wdGlvbnNcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXREYXRhKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuaXRlbXMgfHwgIXRoaXMuaXRlbXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmluaXREYXRhKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIV9maXJzdENoYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzVHJlZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZFRyZWVUYWJsZURhdGEoKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWREYXRhVGFibGVEYXRhKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHRFdmVudE1nci5iaW5kRGF0YVRhYmxlRXZlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLnNlbGVjdGlvbk1nci5zZWxlY3RDdXJyZW50VmFsdWUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnNob3dHZXRBbGxDaGlsZHJlbkNoZWNrYm94KCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuYWN0aXZlVGFiID09PSBcImZhdm9yaXRlXCIpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzVHJlZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0RGF0YSgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICF0aGlzLmZhdm9yaXRlSXRlbXMgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgIXRoaXMuZmF2b3JpdGVJdGVtcy5sZW5ndGggfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mYXZvcml0ZUl0ZW1zLmxlbmd0aCAhPT0gdGhpcy5mYXZIZWxwZXIuZ2V0RmF2b3JpdElkcygpLmxlbmd0aFxyXG4gICAgICAgICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXREYXRhKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICghX2ZpcnN0Q2hhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmF2SGVscGVyLl9sb2FkRmF2b3JpdGVEYXRhKHRoaXMuZmF2b3JpdGVJdGVtcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuc2VsZWN0aW9uTWdyLnNlbGVjdEN1cnJlbnRWYWx1ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIHRoaXMuc2VsZWN0aW9uTWdyLnNlbGVjdEN1cnJlbnRWYWx1ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jaGFuZ2VEZXRlY3Rvci5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzaXplQ21wKCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzVHJlZSgpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB5ID0gdGhpcy5jb21wb25lbnRSZWYuaW5zdGFuY2Uuc3RhdGUuc2Nyb2xsWTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50UmVmLmluc3RhbmNlLnNjcm9sbFRvWSh5LCAwKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5lbmFibGVDYXNjYWRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50dEV2ZW50TWdyLmNhc2NhZGVWYWx1ZUNoYW5nZWQodGhpcy5jYXNjYWRlU3RhdHVzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvbk1nci5zZWxlY3RDdXJyZW50VmFsdWUoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyNyZWdpb24gIFRhZyBWaWV3IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIHByaXZhdGUgcmVnaXN0ZXJNb3VzZUV2ZW50Rm9yVGFnVmlldygpIHtcclxuICAgICAgICBpZiAodGhpcy5lbmFibGVDbGVhcikge1xyXG4gICAgICAgICAgICB0aGlzLnRhZ2JveC5uYXRpdmVFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgICAgICAgICBcIm1vdXNlZW50ZXJcIixcclxuICAgICAgICAgICAgICAgIHRoaXMub25UYWdib3hNb3VzZUVudGVyLmJpbmQodGhpcylcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgdGhpcy50YWdib3gubmF0aXZlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICAgICAgICAgXCJtb3VzZWxlYXZlXCIsXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uVGFnYm94TW91c2VMZWF2ZS5iaW5kKHRoaXMpXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdG9nZ2xlQ2xlYXJJY29uKGV2ZW50OiBhbnksIGlzU2hvdyA9IGZhbHNlKSB7XHJcbiAgICAgICAgY29uc3Qgc3RyID0gaXNTaG93ID8gXCJcIiA6IFwibm9uZVwiO1xyXG4gICAgICAgIGNvbnN0IGNsZWFySWNvbiA9IGV2ZW50LnRhcmdldC5xdWVyeVNlbGVjdG9yKFwiLmlucHV0LWdyb3VwLWNsZWFyXCIpO1xyXG4gICAgICAgIGlmIChjbGVhckljb24pIHtcclxuICAgICAgICAgICAgY2xlYXJJY29uLnN0eWxlLmRpc3BsYXkgPSBzdHI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25UYWdib3hNb3VzZUVudGVyKGV2ZW50KSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGlzcGxheVRleHQgJiYgdGhpcy5lbmFibGVDbGVhcikge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMucmVhZG9ubHkgJiYgIXRoaXMuZGlzYWJsZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd1RhZ2JveENsZWFyQnV0dG9uID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5zaG93VGFnYm94Q2xlYXJCdXR0b24pIHtcclxuICAgICAgICAgICAgdGhpcy50b2dnbGVDbGVhckljb24oZXZlbnQsIHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG9uVGFnYm94TW91c2VMZWF2ZShldmVudCkge1xyXG4gICAgICAgIHRoaXMudG9nZ2xlQ2xlYXJJY29uKGV2ZW50KTtcclxuICAgIH1cclxuXHJcbiAgICBvblJlbW92ZVNlbGVjdEl0ZW0oJGV2ZW50LCB0eHQpIHtcclxuICAgICAgICAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgY29uc3QgdGV4dEFycmF5ID0gQXJyYXkuZnJvbSh0aGlzLmRpc3BsYXlUZXh0TGlzdCk7XHJcbiAgICAgICAgY29uc3QgcmVtb3ZlZEluZGV4ID0gdGhpcy5kaXNwbGF5VGV4dExpc3QuaW5kZXhPZih0eHQpO1xyXG4gICAgICAgIHRleHRBcnJheS5zcGxpY2UocmVtb3ZlZEluZGV4LCAxKTtcclxuICAgICAgICB0aGlzLmRpc3BsYXlUZXh0ID0gdGV4dEFycmF5LmpvaW4odGhpcy5tdWx0aXBsZUNob2ljZVNlcGFyYXRvcik7XHJcbiAgICAgICAgdGhpcy5vcmlnaW5hbFRleHQgPSB0aGlzLmRpc3BsYXlUZXh0O1xyXG4gICAgICAgIHRoaXMuc2V0TW9kZWxWYWx1ZSh0aGlzLmRpc3BsYXlUZXh0KTtcclxuXHJcblxyXG4gICAgICAgIGlmICh0aGlzLmRpc3BsYXlWYWx1ZSkge1xyXG4gICAgICAgICAgICBjb25zdCB2YWxzID0gdGhpcy5kaXNwbGF5VmFsdWUuc3BsaXQodGhpcy5tdWx0aXBsZUNob2ljZVNlcGFyYXRvcik7XHJcbiAgICAgICAgICAgIHZhbHMuc3BsaWNlKHJlbW92ZWRJbmRleCwgMSk7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzcGxheVZhbHVlID0gdmFscy5qb2luKHRoaXMubXVsdGlwbGVDaG9pY2VTZXBhcmF0b3IpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMubWFwRmllbGRzKSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlT3RoZXJGaWVsZERhdGFXaGVuVGFncmVtb3ZlZChyZW1vdmVkSW5kZXgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy50YWdSZW1vdmVkLmVtaXQoeyByZW1vdmVkSW5kZXgsIGluc3RhbmNlOiB0aGlzIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdXBkYXRlT3RoZXJGaWVsZERhdGFXaGVuVGFncmVtb3ZlZChyZW1vdmVkSW5kZXgpIHtcclxuICAgICAgICBjb25zdCBoZWxwRmllbGRzID0gT2JqZWN0LmtleXModGhpcy5tYXBGaWVsZHMpO1xyXG4gICAgICAgIGNvbnN0IHRleHRGaWVsZEluZGV4ID0gaGVscEZpZWxkcy5pbmRleE9mKHRoaXMudGV4dEZpZWxkKTtcclxuXHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICB0aGlzLm5nQ29udHJvbCAmJlxyXG4gICAgICAgICAgICB0aGlzLm5nQ29udHJvbC5mb3JtRGlyZWN0aXZlICYmXHJcbiAgICAgICAgICAgIHRoaXMubmdDb250cm9sLmZvcm1EaXJlY3RpdmUuZm9ybSAmJlxyXG4gICAgICAgICAgICB0aGlzLm5nQ29udHJvbC5mb3JtRGlyZWN0aXZlLmZvcm0uYmluZGluZ0RhdGFcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgY29uc3QgYmluZGluZ0RhdGEgPSB0aGlzLm5nQ29udHJvbC5mb3JtRGlyZWN0aXZlLmZvcm0uYmluZGluZ0RhdGE7XHJcbiAgICAgICAgICAgIGlmIChiaW5kaW5nRGF0YS5zZXRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYmluZGluZ1BhdGggPVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmdDb250cm9sLmZvcm1EaXJlY3RpdmUuZm9ybS5iaW5kaW5nUGF0aDtcclxuICAgICAgICAgICAgICAgIGxldCBwYXRoQXJyOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgaWYgKGJpbmRpbmdQYXRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGF0aEFyciA9IGJpbmRpbmdQYXRoLnNwbGl0KFwiL1wiKS5maWx0ZXIoKG4pID0+IG4gIT09IFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGhlbHBGaWVsZHMuZm9yRWFjaCgoaGVscEZpZWxkOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1hcEZpZWxkc1toZWxwRmllbGRdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zcGxpdChcIixcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmZvckVhY2goKGZvcm1GaWVsZDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWVsZFBhdGhzID0gcGF0aEFyci5jb25jYXQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUZpZWxkLnNwbGl0KFwiLlwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbCA9IGJpbmRpbmdEYXRhLmdldFZhbHVlKGZpZWxkUGF0aHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsQXJyID0gdmFsLnNwbGl0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubXVsdGlwbGVDaG9pY2VTZXBhcmF0b3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxBcnIuc3BsaWNlKHJlbW92ZWRJbmRleCwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdWYWwgPSB2YWxBcnIuam9pbihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm11bHRpcGxlQ2hvaWNlU2VwYXJhdG9yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmluZGluZ0RhdGEuc2V0VmFsdWUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aEFyci5jb25jYXQoZmllbGRQYXRocyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VmFsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmJpbmRpbmdEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGV4dEZpZWxkSW5kZXggPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGhlbHBGaWVsZHMuc3BsaWNlKHRleHRGaWVsZEluZGV4LCAxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGhlbHBGaWVsZHMuZm9yRWFjaCgoaGVscEZpZWxkOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1hcEZpZWxkc1toZWxwRmllbGRdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zcGxpdChcIixcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmZvckVhY2goKGZvcm1GaWVsZDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWwgPSB0aGlzLnV0aWxzLmdldFZhbHVlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1GaWVsZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJpbmRpbmdEYXRhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsQXJyID0gdmFsLnNwbGl0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubXVsdGlwbGVDaG9pY2VTZXBhcmF0b3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxBcnIuc3BsaWNlKHJlbW92ZWRJbmRleCwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdWYWwgPSB2YWxBcnIuam9pbihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm11bHRpcGxlQ2hvaWNlU2VwYXJhdG9yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51dGlscy5zZXRWYWx1ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJpbmRpbmdEYXRhLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1GaWVsZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICBvbkFsbENoaWxkTm9kZXNDbGljaygkZXZlbnQ6IGFueSkge1xyXG4gICAgICAgIHRoaXMuaXNHZXRBbGxDaGlkbE5vZGVzID0gIXRoaXMuaXNHZXRBbGxDaGlkbE5vZGVzO1xyXG4gICAgfVxyXG5cclxuICAgIG9uSW5jbHVkZVN1Ym9yZGluYXRlc0NoYW5nZSh2YWwpIHtcclxuICAgICAgICB0aGlzLmluY2x1ZGVTdWJvcmRpbmF0ZXMgPSB2YWw7XHJcbiAgICAgICAgdGhpcy5pbmNsdWRlU3Vib3JkaW5hdGVzJC5uZXh0KHZhbCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25UYWdDb250YWluZXJDbGljaygkZXZlbnQ6IE1vdXNlRXZlbnQpIHtcclxuICAgICAgICAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgaWYgKHRoaXMudGFnSW5wdXQpIHtcclxuICAgICAgICAgICAgdGhpcy50YWdJbnB1dC5mb2N1cygpO1xyXG4gICAgICAgICAgICB0aGlzLnRhZ0lucHV0LnRleHRib3gubmF0aXZlRWxlbWVudC5jbGljaygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBleHBhbmRGaXJzdE5vZGUobm9kZXMpOiBUcmVlTm9kZVtdIHtcclxuICAgICAgICBpZiAobm9kZXMgJiYgbm9kZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBub2Rlcy5tYXAoKG5vZGU6IFRyZWVOb2RlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAobm9kZS5jaGlsZHJlbiAmJiBub2RlLmNoaWxkcmVuLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5vZGUuZXhwYW5kZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kRmlyc3ROb2RlKG5vZGUuY2hpbGRyZW4pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGU7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbm9kZXM7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIOeUqOS6jue7hOe7h+S4quaAp+WMluaVsOaNrmtleVxyXG4gICAgZ2V0TG9va3VwQmluZGluZ0ZpZWxkcygpIHtcclxuICAgICAgICBpZiAodGhpcy5uZ0NvbnRyb2wpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMubmdDb250cm9sLm5hbWUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm5nQ29udHJvbC5uYW1lO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubWFwRmllbGRzICYmIHRoaXMubWFwRmllbGRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLm1hcEZpZWxkcykubWFwKGsgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5tYXBGaWVsZHNba107XHJcbiAgICAgICAgICAgICAgICAgICAgfSkuam9pbignXycpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50ZXh0RmllbGQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiJdfQ==