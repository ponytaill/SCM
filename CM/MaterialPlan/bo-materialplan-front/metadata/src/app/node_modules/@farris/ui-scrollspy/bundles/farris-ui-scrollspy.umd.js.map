{"version":3,"file":"farris-ui-scrollspy.umd.js.map","sources":["ng://@farris/ui-scrollspy/lib/farris-scrollspy.service.ts","ng://@farris/ui-scrollspy/lib/utils.ts","ng://@farris/ui-scrollspy/lib/farris-scrollspy.component.ts","ng://@farris/ui-scrollspy/lib/farris-scrollspy.directive.ts","ng://@farris/ui-scrollspy/lib/scrollspy.module.ts"],"sourcesContent":["import { Injectable, OnDestroy, NgZone } from '@angular/core';\r\nimport { fromEvent, Subject, Observable, Subscription } from 'rxjs';\r\nimport { throttleTime, debounceTime } from 'rxjs/operators';\r\nimport { animationFrame } from 'rxjs/internal/scheduler/animationFrame';\r\n\r\ninterface ScrollElement {\r\n  element: HTMLElement,\r\n  id: string\r\n}\r\n\r\ninterface ScrollSpy {\r\n  elements: ScrollElement[];\r\n  currentSectionId: string;\r\n  subject: Subject<string>;\r\n  clickChange?: boolean //å¤æ­æ¯å¦æ¯ç¹å»å¯¼è´çé¡µé¢æ»å¨\r\n}\r\n\r\ninterface ScrollSpies {\r\n  [scrollSpyId: string]: ScrollSpy\r\n}\r\n\r\ninterface ScrollFollow {\r\n  element: HTMLElement,\r\n  id: string\r\n}\r\ninterface ScrollFollowSpipes {\r\n  [scrollFollowId: string]: ScrollFollow[]\r\n}\r\n\r\ninterface ScrollContents {\r\n  [scrollFollowId: string]: HTMLElement\r\n}\r\ninterface Offsets {\r\n  [scrollFollowId: string]: number\r\n}\r\n\r\ninterface ScrollChange {\r\n  [scrollFollowId: string]: Subject<any>\r\n}\r\n\r\ninterface CurrentId {\r\n  subject: Subject<string>;\r\n  idValue: string\r\n}\r\ninterface CurrentIdObj {\r\n  [groupId: string]: CurrentId\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class FarrisScrollSpyService implements OnDestroy {\r\n  // çå¬åºåå½åæ¶åçæ ·å¼\r\n  private scrollSpyPartActiveClsName = 'f-scrollspy-part-active';\r\n  private fixedTabContainerClsName = 'f-scrollspy-container-fixed';\r\n  private parentFixedTabContainerClsName='f-scrollspy-container-fixed-parent';\r\n  private scrollSubscription: Subscription;\r\n  /**è¢«çå¬æ»å¨çcontents */\r\n  scrollContents: ScrollContents = {};\r\n  /**è¢«çå¬æ»å¨çsections*/\r\n  scrollSpies: ScrollSpies = {};\r\n  /**çå¬æ»å¨çéç¹é¨å */\r\n  scrollFollowSpipes: ScrollFollowSpipes = {};\r\n  private scrollSpyListFollowTypeChanges = {};\r\n\r\n\r\n  /**æ»å¨çå¬åç§»è·ç¦» */\r\n  offsets: Offsets = {};\r\n  /**é»è®¤çå¬åç»åç§° */\r\n  defaultId: string = 'default';\r\n\r\n  // currentSectionId: Subject<any> = new Subject();\r\n\r\n  currentSectionIdObj: CurrentIdObj = {};\r\n  //è·åcurrentid\r\n  getCurrentSectionId(groupId: string) {\r\n    if (!groupId) {\r\n      groupId = this.defaultId;\r\n    }\r\n    return this.currentSectionIdObj[groupId].subject;\r\n    // return this.currentSectionId;\r\n  }\r\n  //æ»å¨ååæ¶æ¹åcurrentid\r\n  setCurrentSectionId(groupId: string, value: string) {\r\n    if (!groupId) {\r\n      groupId = this.defaultId;\r\n    }\r\n    this.currentSectionIdObj[groupId].subject.next(value);\r\n    //console.log(this.currentSectionIdObj);\r\n    // this.currentSectionId.next(value);\r\n  }\r\n  //è®¾ç½®ä¸ågroupç»çcurrentid\r\n  setCurrentSectionIdObj(groupId: string, value: string) {\r\n    if (!groupId) {\r\n      groupId = this.defaultId;\r\n    }\r\n    if (!this.currentSectionIdObj[groupId]) {\r\n      this.currentSectionIdObj[groupId] = {\r\n        subject: new Subject(),\r\n        idValue: value\r\n      } as CurrentId;\r\n    }\r\n    else {\r\n      this.currentSectionIdObj[groupId].idValue = value;\r\n    }\r\n    setTimeout(() => {\r\n      if(this.scrollFollowSpipes[groupId] && this.scrollFollowSpipes[groupId].length){\r\n        let item = this.scrollFollowSpipes[groupId].find(scrollFollowItem=>{\r\n          return scrollFollowItem['id'] == this.currentSectionIdObj[groupId].idValue;\r\n        })\r\n        if(item){\r\n          this.fScrollFollowClick(groupId,item);\r\n        }\r\n      }\r\n    }, 0);\r\n    // this.fScrollFollowClick(key,follow);\r\n  }\r\n\r\n\r\n  scrollChange: ScrollChange = {};\r\n\r\n\r\n  constructor(public ngzone: NgZone) { }\r\n\r\n  public ngOnDestroy(): void {\r\n    this.scrollSubscription.unsubscribe();\r\n  }\r\n\r\n  /**Observeré¨å ä¾æä»¤åå§åè°ç¨ */\r\n  // public getCurrentSection$(scrollSpyId: string = this.defaultId): Observable<string> {\r\n  //   if(scrollSpyId !== ''){\r\n  //     return this.scrollChange[scrollSpyId];\r\n  //   }\r\n  //   else{\r\n  //     return this.scrollChange[this.defaultId];\r\n  //   }\r\n  // }\r\n\r\n  public updateScrollGroup(scrollSpyId: string = this.defaultId) {\r\n    const groupId = scrollSpyId !== '' ? scrollSpyId : this.defaultId;\r\n    if (!this.scrollChange[groupId]) {\r\n      this.scrollChange[groupId] = new Subject();\r\n    }\r\n    return this.scrollChange[groupId];\r\n  }\r\n  /**contenté¨åæ»å¨äºä»¶çå¬ */\r\n  private subscribeScroll(key: string): void {\r\n    this.ngzone.runOutsideAngular(() => {\r\n      this.scrollSubscription = fromEvent(this.scrollContents[key], 'scroll')\r\n        .pipe(debounceTime(20, animationFrame))\r\n        .subscribe((): void => {\r\n          if (this.scrollSpies[key]) {\r\n            const { currentSectionId, elements, subject } = this.scrollSpies[key];\r\n            const scrollTop = this.scrollContents[key].scrollTop;\r\n            const topElementInView = elements.filter((el) => {\r\n              return el.element.offsetTop <= scrollTop + this.offsets[key]\r\n            }\r\n            );\r\n            if (!topElementInView || !topElementInView.length) {\r\n              return;\r\n            }\r\n            //æåºæç§è®¾ç½®Spyçé¡ºåºï¼åå®é¡ºåºæ¯ä¸è´ç {id}\r\n            let qlSpyItem=this.scrollFollowSpipes[key].find(spyItem=>{\r\n              let eqElItem=topElementInView.find(elItem=>{\r\n                return elItem.id==spyItem.id;\r\n              })\r\n              return eqElItem?true:false;\r\n            });\r\n            //console.log(topElementInView);\r\n            const topElementId: string = qlSpyItem?qlSpyItem.id:topElementInView[0].id;\r\n            //å¤æ­ ç¹å»æ¯å¦æ¯ç¹å»å¼èµ·çæ»å¨\r\n            if (this.scrollSpies[key].clickChange) {\r\n              this.scrollSpies[key].clickChange = false;\r\n              return;\r\n            }\r\n            else {\r\n              this.scrollSpies[key].clickChange = false;\r\n              if (topElementId !== currentSectionId) {\r\n                this.scrollSpies[key].currentSectionId = topElementId;\r\n                this.ngzone.run(() => {\r\n                  subject.next(topElementId);\r\n                })\r\n              }\r\n            }\r\n          }\r\n        })\r\n\r\n    });\r\n  }\r\n  /**tabé¨åç¹å»äºä»¶çå¬ */\r\n  private subscribeClick(key): void {\r\n    //Object.keys(this.scrollFollowSpipes).forEach((key:string):void=>{\r\n    if (this.scrollFollowSpipes[key] && this.scrollFollowSpipes[key].length) {\r\n      this.scrollFollowSpipes[key].forEach((follow) => {\r\n        fromEvent(follow.element, 'click')\r\n          .pipe(throttleTime(100))\r\n          .subscribe((event) => {\r\n            event.stopPropagation();\r\n            this.fScrollFollowClick(key, follow);\r\n            // if(this.scrollSpies[key]){\r\n\r\n            //   const { currentSectionId, elements, subject } = this.scrollSpies[key];\r\n            //   this.scrollSpies[key].clickChange = true;\r\n            //   if(follow.id !== currentSectionId){\r\n            //     const topElementInView = elements.find(el => el.id === follow.id);\r\n            //     if(!topElementInView) { return; }\r\n            //     this.scrollSpies[key].currentSectionId = follow.id;\r\n            //     //this.scrollContents[key].offsetTop\r\n            //     this.scrollContents[key].scrollTop = Math.round(topElementInView.element.offsetTop - this.offsets[key]);\r\n            //     subject.next(follow.id);\r\n            //   }\r\n\r\n            // }\r\n\r\n          })\r\n      })\r\n    }\r\n    //});\r\n  }\r\n\r\n  fScrollFollowClick(key, follow){\r\n    if(this.scrollSpies[key]){\r\n      const { currentSectionId, elements, subject } = this.scrollSpies[key];\r\n      this.scrollSpies[key].clickChange = true;\r\n      if (follow.id !== currentSectionId) {\r\n        const topElementInView = elements.find(el => el.id === follow.id);\r\n        if (!topElementInView) { return; }\r\n        this.scrollSpies[key].currentSectionId = follow.id;\r\n        //this.scrollContents[key].offsetTop\r\n        if (this.scrollContents[key]) {\r\n          // åå®¹å»ææ»å¨\r\n          this.scrollContents[key].scrollTop = Math.round(topElementInView.element.offsetTop - this.offsets[key]- parseInt(getComputedStyle(this.scrollContents[key]).paddingTop,10));\r\n        }\r\n        subject.next(follow.id);\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  /**æ·»å éè¦è¢«æ»å¨çå¬é¨å */\r\n  public addContentElement(element: HTMLElement, contentId = this.defaultId): void {\r\n    if (contentId !== '') {\r\n      this.scrollContents[contentId] = element;\r\n      this.subscribeScroll(contentId);\r\n    }\r\n    else {\r\n      this.scrollContents[this.defaultId] = element;\r\n      this.subscribeScroll(this.defaultId);\r\n    }\r\n    // å¤æ­æ¯æå¾æ¹åçç¶æ\r\n    this.updateContainerClsName(contentId);\r\n  }\r\n  /**ç§»é¤éè¦è¢«æ»å¨çå¬é¨ååç´  */\r\n  public removeContentElement(contentId = this.defaultId): void {\r\n    const removeId = contentId !== '' ? contentId : this.defaultId;\r\n    delete this.scrollSpies[removeId];\r\n  }\r\n  /**æ·»å æ»å¨çå¬tabé¨ååç´ */\r\n  public addFollowElement(element: HTMLElement, followId, followContentId = this.defaultId): void {\r\n    const groupId = followContentId !== '' ? followContentId : this.defaultId;\r\n\r\n    const follow = {\r\n      element: element,\r\n      id: followId\r\n    };\r\n    if (!this.scrollFollowSpipes[groupId]) {\r\n      this.scrollFollowSpipes[groupId] = []\r\n    }\r\n    //-------------------------æ­¤å¤æ²¡æå¤çéå¤ID\r\n    const follows = this.scrollFollowSpipes[groupId];\r\n    follows.push(follow);\r\n    this.scrollFollowSpipes[groupId] = follows;\r\n    this.subscribeClick(groupId);\r\n  }\r\n  /**ç§»é¤æ»å¨çå¬tabé¨ååç´  */\r\n  public removeFollowElement(followId, followContentId = this.defaultId): void {\r\n    const elements = this.scrollFollowSpipes[followContentId].filter(el => {\r\n      return el.id !== followId;\r\n    })\r\n    if (!elements.length) {\r\n      delete this.scrollFollowSpipes[followContentId];\r\n      return;\r\n    }\r\n    this.scrollFollowSpipes[followContentId] = elements;\r\n  }\r\n  /**æ·»å æ»å¨çå¬éç¹é¨ååç´  */\r\n  public addElement(element: HTMLElement, scrollId: string, scrollGroupId: string = this.defaultId): void {\r\n    if (!this.scrollSpies[scrollGroupId]) {\r\n      this.scrollSpies[scrollGroupId] = {\r\n        elements: [],\r\n        currentSectionId: '',\r\n        subject: new Subject(),\r\n      } as ScrollSpy;\r\n\r\n      this.scrollSpies[scrollGroupId].subject\r\n        .subscribe((currentSection: string): void => {\r\n          if (this.scrollChange[scrollGroupId]) {\r\n            this.scrollChange[scrollGroupId].next(currentSection);\r\n          }\r\n        });\r\n\r\n    }\r\n\r\n    if (this.hasElement(scrollId, scrollGroupId)) {\r\n      return;\r\n    }\r\n\r\n    const el: ScrollElement = {\r\n      element: element,\r\n      id: scrollId\r\n    }\r\n    // å å¥æ¶ï¼å¤æ­æ¯å¦æ¯å½å\r\n    this.updateScrollSpyActiveClsName(scrollGroupId,el);\r\n    const elements: any[] = this.scrollSpies[scrollGroupId].elements;\r\n    elements.push(el);\r\n    elements.sort((a, b): number => b.element.getBoundingClientRect().top - a.element.getBoundingClientRect().top);\r\n\r\n    this.scrollSpies[scrollGroupId].elements = elements;\r\n  }\r\n  /**ç§»é¤æ»å¨çå¬éç¹é¨ååç´  */\r\n  public removeElement(scrollId: string, scrollGroupId: string = this.defaultId): void {\r\n    const elements = this.scrollSpies[scrollGroupId].elements.filter((el): boolean => {\r\n      return el.id !== scrollId\r\n    }\r\n    );\r\n    if (!elements.length) {\r\n      delete this.scrollSpies[scrollGroupId];\r\n      return;\r\n    }\r\n    this.scrollSpies[scrollGroupId].elements = elements;\r\n  }\r\n  /**å¤æ­scrollGroupId æ¯å¦æidåä¸ºelementId çåç´  */\r\n  private hasElement(elementId: string, scrollGroupId: string): boolean {\r\n    return this.scrollSpies[scrollGroupId].elements.some((element): boolean => element.id === elementId);\r\n  }\r\n  /**è®¾ç½®offset */\r\n  public setOffset(offset: number = 0, contentId: string = this.defaultId): void {\r\n    if (contentId !== '') {\r\n      this.offsets[contentId] = offset;\r\n    }\r\n    else {\r\n      this.offsets[this.defaultId] = offset;\r\n    }\r\n  }\r\n  /*ScrollSpyç»ä»¶(éç¹åè¡¨åºåï¼åå§åé¢è®¾defaultId */\r\n  setGroupId(groupid) {\r\n    if (groupid) {\r\n      this.defaultId = groupid;\r\n    }\r\n  }\r\n\r\n  getGroupId() {\r\n    return this.defaultId;\r\n  }\r\n  /*æ¹å ScrollSpyç»ä»¶ï¼éç¹åè¡¨åºåï¼çæ¾ç¤ºç¶ææ¶ */\r\n  changeGroupIdFollowType(groupid, followTypeData) {\r\n    this.scrollSpyListFollowTypeChanges[groupid] = followTypeData;\r\n    this.updateContainerClsName(groupid);\r\n  }\r\n  private updateContainerClsName(groupid) {\r\n    // æ²¡æå¾æ´æ°åå\r\n    if (!this.scrollSpyListFollowTypeChanges.hasOwnProperty(groupid)) {\r\n      return;\r\n    }\r\n    // containerå¹¶ä¸å­å¨çæ¶å\r\n    if (!this.scrollContents.hasOwnProperty(groupid)) {\r\n      return;\r\n    }\r\n    let followTypeData = this.scrollSpyListFollowTypeChanges[groupid];\r\n    let containerEl = this.scrollContents[groupid];\r\n    // ContainerçElement \r\n    if (followTypeData['prev'] == 'fixedTab') {\r\n      //ç§»é¤class\r\n      containerEl.className = containerEl.className.replace(this.fixedTabContainerClsName, '');\r\n      containerEl.parentElement.classList.remove(this.parentFixedTabContainerClsName);\r\n    } else if (followTypeData['next'] == 'fixedTab') {\r\n      // å¢å class\r\n      containerEl.className += ' ' + this.fixedTabContainerClsName;\r\n      // ç»ç¶åç´ å¢å é«åº¦\r\n      containerEl.parentElement.classList.add(this.parentFixedTabContainerClsName);\r\n    }\r\n    this.scrollSpyListFollowTypeChanges[groupid] = null;\r\n  }\r\n\r\n  updateScrollSpiesActiveClsName(groupId,currentId) {\r\n    // è¿½å ãç§»é¤class\r\n    this.scrollSpies[groupId].elements.map((item: ScrollElement) => {\r\n      if (item.id == currentId) {\r\n        // æ¾å°å½å\r\n        if (item.element.className.indexOf(this.scrollSpyPartActiveClsName) < 0) {\r\n          item.element.className += ' ' + this.scrollSpyPartActiveClsName;\r\n        }\r\n      } else {\r\n        // å¶ä»\r\n        item.element.className = item.element.className.replace(this.scrollSpyPartActiveClsName, '');\r\n      }\r\n    });\r\n  }\r\n  /**\r\n   * å½è¿½å ScrollSpyåçæ¶åï¼å¤æ­æ¯å¦æ¯å·²ç»è®¾ç½®çå½å\r\n   * @param groupId \r\n   * @param scrollEl \r\n   */\r\n  private  updateScrollSpyActiveClsName(groupId,scrollEl:ScrollElement){\r\n    // å¦æå·²è®¾ç½®\r\n    if(this.currentSectionIdObj[groupId]){\r\n      if(this.currentSectionIdObj[groupId]['idValue']==scrollEl.id){\r\n        scrollEl.element.className+=' '+this.scrollSpyPartActiveClsName;\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n","export function getUuid () {\r\n    var s = [];\r\n    var hexDigits = \"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\r\n    for (var i = 0; i < 36; i++) {\r\n      s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);\r\n    }\r\n    s[14] = \"4\";\r\n    s[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1);\r\n    s[8] = s[13] = s[18] = s[23] = \"-\";\r\n    let uuid = s.join(\"\");\r\n    return uuid;\r\n}","import { Component, OnInit, Input, ElementRef, AfterViewInit, OnDestroy, Directive, TemplateRef, ContentChild, ViewChild, ChangeDetectorRef, ViewEncapsulation} from '@angular/core';\r\nimport { FarrisScrollSpyService } from './farris-scrollspy.service';\r\nimport { Subject } from 'rxjs';\r\nimport { getUuid } from './utils';\r\nimport {ComponentTemplateRef}from '@farris/ui-common';\r\n\r\n@Directive({\r\n    selector: '[scrollspyItem]'\r\n  })\r\n  export class ScrollspyItemTemplateDirective {\r\n    constructor(public template: TemplateRef<any>) {}\r\n  }\r\n\r\nexport interface scrollspyData {\r\n    \"id\": string,\r\n    \"title\": string,\r\n    \"visible\"?: boolean\r\n  }\r\n// æ»å¨çå¬åè¡¨ï¼æ¾ç¤ºæ¨¡å¼æ¹åï¼æåºäºä»¶ç»æ\r\ninterface SpyListFollowTypeChange{\r\n  prev:string,\r\n  next:string\r\n}\r\n\r\n@Component({\r\n  selector: 'farris-scrollspy',\r\n  templateUrl:'./farris-scrollspy.component.html',\r\n  styleUrls:[\r\n    './farris-scrollspy.component.scss'\r\n  ],\r\n  encapsulation: ViewEncapsulation.None\r\n})\r\nexport class ScrollspyComponent implements OnInit,AfterViewInit {\r\n    @Input() ctx=null;\r\n    // æ»å¨çå¬é¡¹æ¨¡æ¿\r\n    @Input() scrollspyItemComponentType: ComponentTemplateRef;\r\n    @ContentChild(ScrollspyItemTemplateDirective, {read: TemplateRef}) scrollspyTemplate: TemplateRef<any>;\r\n    /**æ»å¨æ°æ®åè¡¨ */\r\n    // @Input() scrollspyData:scrollspyData[];\r\n    /**å½åactiveé¨åid */\r\n    @Input() currentSectionId:string;\r\n    /**å½åæ»å¨æægroup */\r\n    @Input() scrollGroupId:string = getUuid();\r\n    /**å½åæ»å¨æ¾ç¤ºæ ·å¼ï¼é»è®¤ side å¯éåæ° tabãfixedTab */\r\n    private _followType='side';\r\n    // è®°å½ç¶ææ¹å\r\n    private _emitFollowType:SpyListFollowTypeChange=null;\r\n    @Input() \r\n    set fFollowType(value:string){\r\n      if(value!==this._followType){\r\n        this._emitFollowType={\r\n          prev:this._followType,\r\n          next:value\r\n        };\r\n        this.changeFollowType();\r\n        this._followType=value;\r\n      }\r\n    }    \r\n    get fFollowType():string{\r\n      return this._followType;\r\n    }\r\n\r\n    @Input() sidetabWidth:number = 145;\r\n\r\n    @ViewChild(\"scrollyspyList\") scrollyspyListEl;\r\n\r\n    _scrollspyData:scrollspyData[];\r\n\r\n    @Input()\r\n    set scrollspyData(value){\r\n      if(value){\r\n        this._scrollspyData = value.filter((item) =>{\r\n          if(item.hasOwnProperty('visible') && !item.visible){\r\n            return false\r\n          }\r\n          else{\r\n            return true;\r\n          }\r\n        });\r\n        if(this._scrollspyData && this._scrollspyData.length && !this.currentSectionId ){\r\n          this.currentSectionId = this._scrollspyData[0].id;\r\n        }\r\n        this.scrollSpy.setCurrentSectionIdObj(this.scrollGroupId, this.currentSectionId);\r\n      }\r\n    }\r\n    get scrollspyData(){\r\n      return this._scrollspyData;\r\n    }\r\n\r\n\r\n    constructor( private elementRef: ElementRef, private scrollSpy: FarrisScrollSpyService,private changeDetector: ChangeDetectorRef, ) { }\r\n\r\n    ngOnInit() {\r\n      // if(this.scrollspyData && this.scrollspyData.length && !this.currentSectionId ){\r\n      //   this.currentSectionId = this.scrollspyData[0].id;\r\n      // }\r\n      // this.scrollSpy.setCurrentSectionIdObj(this.scrollGroupId, this.currentSectionId);\r\n      // console.log(this.scrollGroupId);\r\n      this.scrollSpy.setGroupId(this.scrollGroupId);\r\n      this.changeFollowType();\r\n      // è·åå½åSectionçId\r\n      this.scrollSpy.getCurrentSectionId(this.scrollGroupId).subscribe((currentId)=>{\r\n        this.currentSectionId = currentId;\r\n        this.scrollSpy.updateScrollSpiesActiveClsName(this.scrollGroupId,currentId);\r\n      });\r\n\r\n      // è·åå¯¹åºContaineråºåï¼å¨æ»å¨æ¶çå½åSectionçåå\r\n      this.scrollSpy.updateScrollGroup(this.scrollGroupId).subscribe((currentSection: string): void => {\r\n\r\n          this.scrollSpy.setCurrentSectionId(this.scrollGroupId,currentSection);\r\n          \r\n        });\r\n    }\r\n    // æ¹åFollowTypeæ¶\r\n    changeFollowType(){\r\n      if(this.scrollGroupId&&this._emitFollowType){\r\n        this.scrollSpy.changeGroupIdFollowType(this.scrollGroupId,this._emitFollowType);\r\n        this._emitFollowType=null;\r\n      }\r\n    }\r\n    ngAfterViewInit(): void {\r\n        /**å½æ»å¨ä½ç½®ä¸ºsideæ¶ï¼è¯¥ç»ä»¶æè¿ç¶èç¹æ·»å relativeå®ä½ */\r\n        const parent = this.elementRef.nativeElement.parentElement;\r\n        if(!parent.style.position && parent.style.position !== 'relative' && this.fFollowType === 'side'){\r\n            parent.style.position = 'relative';\r\n        }\r\n        // if(this.scrollspyData && this.scrollspyData.length && this.currentSectionId){\r\n        //   if(this.currentSectionId !== this.scrollspyData[0].id){\r\n        //     console.log(222);\r\n        //     const element = this.scrollyspyListEl.nativeElement.querySelector(\"#scrollspy-\"+this.currentSectionId);\r\n        //     const follow = {\r\n        //       element: element,\r\n        //       id: this.currentSectionId\r\n        //     };\r\n        //     const groupId = this.scrollGroupId ? this.scrollGroupId: 'default';\r\n        //     this.scrollSpy.fScrollFollowClick(groupId,follow);\r\n        //   }\r\n        // }\r\n        \r\n    }\r\n\r\n}","import { Directive, Injectable, Input, EventEmitter, Output, ElementRef, OnInit, OnDestroy, AfterViewInit, ChangeDetectorRef, HostBinding } from '@angular/core';\r\nimport { FarrisScrollSpyService } from './farris-scrollspy.service';\r\n//éç¹é¨å\r\n@Directive({\r\n    selector: '[fScrollSpy]'\r\n})\r\nexport class FarrisScrollSpyDirective implements OnInit,AfterViewInit, OnDestroy {\r\n    @Input('fScrollSpy') scrollId: string;\r\n    @Input('fScrollGroup') scrollGroupId: string;\r\n  \r\n    constructor(\r\n      private elementRef: ElementRef,\r\n      private scrollSpy: FarrisScrollSpyService,\r\n    ) {}\r\n  \r\n    public ngOnInit(): void {\r\n      this.elementRef.nativeElement.className+=' f-scrollspy-part';\r\n      if(!this.scrollGroupId){\r\n        this.scrollGroupId = this.scrollSpy.getGroupId();\r\n      }\r\n      //this.scrollSpy.addElement(this.elementRef.nativeElement, this.scrollId,this.scrollGroupId);\r\n    }\r\n    ngAfterViewInit(){\r\n      this.scrollSpy.addElement(this.elementRef.nativeElement, this.scrollId,this.scrollGroupId);\r\n    }\r\n  \r\n    public ngOnDestroy(): void {\r\n      this.scrollSpy.removeElement(this.scrollId, this.scrollGroupId);\r\n    }\r\n  }\r\n//è·éç¹å»\r\n@Directive({\r\n    selector: '[fScrollFollowElement]'\r\n})\r\nexport class FscrollFollowElementDirective implements OnInit, OnDestroy {\r\n\r\n    //@Input() followId: string;\r\n    @Input('fScrollFollowElement') followId:string;\r\n    @Input('fScrollElement') followGroupId:string;\r\n    constructor(\r\n      private elementRef: ElementRef,\r\n      private scrollSpy: FarrisScrollSpyService,\r\n    ) {}\r\n  \r\n    public ngOnInit(): void {\r\n      if(!this.followGroupId){\r\n        this.followGroupId = this.scrollSpy.getGroupId();\r\n      }\r\n      this.scrollSpy.addFollowElement(this.elementRef.nativeElement, this.followId, this.followGroupId);\r\n    }\r\n\r\n    public ngOnDestroy(): void {\r\n      this.scrollSpy.removeFollowElement(this.followId, this.followGroupId);\r\n    }\r\n\r\n  }\r\n\r\n//çå¬æ»å¨é¨åcontent\r\n@Directive({\r\n    selector: '[fScrollSpyContainer]'\r\n})\r\nexport class FscrollSpyContainerDirective implements OnInit,AfterViewInit, OnDestroy {\r\n  \r\n  @Input() fOffset:number;\r\n  @Input('fScrollSpyContainer') fScrollGroupId:string;\r\n  @Output() fScrollChange = new EventEmitter;\r\n\r\n  @HostBinding(\"style.position\") position = \"relative\";\r\n\r\n    constructor( \r\n      private elementRef: ElementRef,\r\n      private scrollSpy: FarrisScrollSpyService,\r\n      private changeDetector: ChangeDetectorRef,\r\n    ) {}\r\n  \r\n    public ngOnInit(): void {\r\n      if(!this.fScrollGroupId){\r\n        this.fScrollGroupId = this.scrollSpy.getGroupId();\r\n      }\r\n      this.elementRef.nativeElement.className+=' f-scrollspy-container';\r\n      this.scrollSpy.addContentElement(this.elementRef.nativeElement, this.fScrollGroupId);\r\n      this.scrollSpy.setOffset(this.fOffset, this.fScrollGroupId);\r\n      this.scrollSpy.updateScrollGroup(this.fScrollGroupId).subscribe((currentSection: string): void => {\r\n        //console.log('111',currentSection);\r\n        // bugNum:465991\r\n        // console.log('section-group'+currentSection);\r\n          this.fScrollChange.emit(currentSection);\r\n\r\n          // this.scrollSpy.setCurrentSectionId(this.fScrollGroupId,currentSection);\r\n\r\n          // this.changeDetector.markForCheck();\r\n        });\r\n    }\r\n  \r\n    ngAfterViewInit(){\r\n      // this.scrollSpy.getCurrentSection$(this.fScrollGroupId)\r\n      // .subscribe((currentSection: string): void => {\r\n      //   this.fScrollChange.next(currentSection);\r\n      //   this.changeDetector.markForCheck();\r\n      // });\r\n\r\n    }\r\n    public ngOnDestroy(): void {\r\n      this.scrollSpy.removeContentElement(this.fScrollGroupId);\r\n    }\r\n\r\n  }","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FarrisScrollSpyDirective, FscrollFollowElementDirective, FscrollSpyContainerDirective } from './farris-scrollspy.directive';\r\nimport { ScrollspyComponent,ScrollspyItemTemplateDirective } from './farris-scrollspy.component';\r\nimport { LocaleModule } from '@farris/ui-locale';\r\nimport { FarrisScrollSpyService } from './farris-scrollspy.service';\r\nimport {FarrisCommonModule} from '@farris/ui-common';\r\n\r\n@NgModule({\r\n  declarations: [ScrollspyComponent,ScrollspyItemTemplateDirective,FarrisScrollSpyDirective,FscrollFollowElementDirective,FscrollSpyContainerDirective],\r\n  imports: [\r\n    CommonModule,\r\n    LocaleModule.forRoot(),\r\n    FarrisCommonModule\r\n  ],\r\n  providers:[\r\n    FarrisScrollSpyService\r\n  ],\r\n  exports: [ScrollspyComponent,ScrollspyItemTemplateDirective,FarrisScrollSpyDirective,FscrollFollowElementDirective,FscrollSpyContainerDirective]\r\n})\r\nexport class ScrollspyModule { }\r\n"],"names":["Subject","fromEvent","debounceTime","animationFrame","throttleTime","Injectable","NgZone","Directive","TemplateRef","Component","ViewEncapsulation","ElementRef","ChangeDetectorRef","Input","ContentChild","ViewChild","EventEmitter","Output","HostBinding","NgModule","CommonModule","LocaleModule","FarrisCommonModule"],"mappings":"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"}
