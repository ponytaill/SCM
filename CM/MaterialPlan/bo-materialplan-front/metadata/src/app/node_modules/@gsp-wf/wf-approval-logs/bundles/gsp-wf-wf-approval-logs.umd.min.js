!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@farris/ui-messager"),require("@farris/ui-modal"),require("@angular/core"),require("@angular/common"),require("@gsp-svc/file-viewer")):"function"==typeof define&&define.amd?define("@gsp-wf/wf-approval-logs",["exports","@farris/ui-messager","@farris/ui-modal","@angular/core","@angular/common","@gsp-svc/file-viewer"],t):t((e["gsp-wf"]=e["gsp-wf"]||{},e["gsp-wf"]["wf-approval-logs"]={}),e.uiMessager,e.uiModal,e.ng.core,e.ng.common,e.fileViewer)}(this,function(e,t,o,i,r,n){"use strict";var a={"zh-CHS":{"static":{approvalLogs:{title:"审批记录",approvalOpinion:"审批意见",startTime:"接收时间",endTime:"处理时间",processTime:"处理时长",todo:"待办理",done:"已办理",undo:"未分配",toAssign:"未指派",toRead:"待阅",processNotFound:"流程实例ID为空",workItemNotFound:"工作项ID为空",attachment:"附件",noResolvedUser:"未解析出用户",terminal:"来自",web:"电脑端",mobile:"移动端",submit:"已提交"},flowchart:{title:"查看流程",processNotFound:"流程实例ID为空"}}},en:{"static":{approvalLogs:{title:"Approval Logs",approvalOpinion:"Approval opinion",startTime:"StartTime",endTime:"EndTime",processTime:"ProcessTime",todo:"Todo",done:"Done",undo:"Undo",toAssign:"To assign",toRead:"To read",processNotFound:"process instance id is null",workItemNotFound:"work item id is null",attachment:"attachment",noResolvedUser:"No Resolved User",terminal:"From",web:"Web",mobile:"Mobile",submit:"Submit"},flowchart:{title:"Flow Chart",processNotFound:"process instance id is null"}}},"zh-CHT":{"static":{approvalLogs:{title:"審批記錄",approvalOpinion:"審批意見",startTime:"接收時間",endTime:"處理時間",processTime:"處理時長",todo:"待辦理",done:"已辦理",undo:"未分配",toAssign:"未指派",toRead:"待阅",processNotFound:"流程實例ID為空",workItemNotFound:"工作項ID為空",attachment:"附件",noResolvedUser:"未解析出用戶",terminal:"來自",web:"電腦端",mobile:"移動端",submit:"已提交"},flowchart:{title:"查看流程",processNotFound:"流程實例ID為空"}}}},s=(Object.defineProperty(p.prototype,"DataId",{set:function(e){e&&(this.dataId=e,this.getTaskLogs())},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"ProcInstId",{set:function(e){e&&(this.procInstId=e,this.getTaskLogs())},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"ActivityDefinitionId",{set:function(e){e&&this.getTaskLogs(e)},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"IfForecast",{set:function(e){e&&(this.ifForecast="true"==e,this.getTaskLogs())},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"Type",{set:function(e){"process"===e&&this.getTaskLogs()},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"processForecastPayload",{set:function(e){e&&(this.ifForecast=!0,this.getTaskLogs("",e))},enumerable:!0,configurable:!0}),p.prototype.ngOnInit=function(){},p.prototype.fill=function(){this.cls="d-flex flex-fill h-100 f-utils-absolute-all p-4"},p.prototype.getTaskLogs=function(t,o){var i=this;(this.dataId||this.procInstId||o)&&System["import"]("/platform/runtime/wf/webapp/mobiletaskcenter/taskComment.js?v=20211022").then(function(){i.dataId?i.logContainer=window.document.querySelector(".dataId"+i.dataId):i.logContainer=window.document.querySelector(".procInstId"+i.procInstId);var e={bizInstId:i.dataId,processInstanceId:i.procInstId,activityDefinitionId:t,container:i.logContainer,terminal:"web",typeId:"wf",ifForecast:i.ifForecast,showHeader:i.ShowHeader,showViewProcess:i.ShowViewProcess,isIncludeHistory:!1,wfForecastPayload:o};window.gspTaskCenterBizLog.ApprovalLogUtil.getWebLogsHtml(e).then(function(e){})})},p.decorators=[{type:i.Component,args:[{selector:"wf-approval-logs",template:"<div\r\n  [class]=\"dataId ? 'dataId' + dataId : 'procInstId' + procInstId\"\r\n  style=\"width: 100%; height: 100%; overflow: auto\"\r\n></div>\r\n",styles:[".approval-log-background{width:100%;background:#f9f9f9;padding:16px 14px;border-radius:4px}.log-activity-name{font-size:14px}.receive-time{font-size:12px;-webkit-columns:#565656;-moz-columns:#565656;columns:#565656;padding-left:40px;white-space:nowrap;color:#a1a1a1}.log-creator-name{font-size:14px;color:#4297fa;text-align:left}.log-action-name-do{font-size:12px;color:#fff;margin-left:40px;margin-right:16px;border-radius:10px;padding:2px 8px;background:#59a1ff;white-space:nowrap;float:right}.log-action-name-todo{font-size:12px;color:#fff;margin-left:40px;margin-right:16px;border-radius:10px;padding:2px 8px;background:#f59c24;white-space:nowrap;float:right}.log-action-name-undo{font-size:12px;color:#fff;margin-left:40px;margin-right:16px;border-radius:10px;padding:2px 8px;background:#5ac1c3;white-space:nowrap;float:right}.work-item-state-done{font-size:13px;border-radius:2px;padding:0 10px;background:#f6faff;margin-left:20px;color:#5f637a;border:1px solid #e6e6e6}.timeline-item{position:relative;padding:0 0 14px 10px;margin:0;font-size:14px;list-style:none}.timeline-item-tail{position:absolute;top:.75em;left:7px;height:100%;border-left:2px dashed #e8e8e8}.timeline-item-head-blue{position:absolute;width:16px;height:16px;background-color:#388fff;border:4px solid #bdd9ff;border-radius:100px;left:0;top:10px}.timeline-item-head-green{position:absolute;width:16px;height:16px;background-color:#5ac1c3;border:4px solid #7fffd4;border-radius:100px;left:0;top:10px}.timeline-item-head-yellow{position:absolute;width:16px;height:16px;background-color:#f59c24;border:4px solid #fbd7a7;border-radius:100px;left:0;top:10px}.timeline-item-content{position:relative;top:-6px;margin:0 0 0 18px}.user-avatar{height:30px;width:30px;border-radius:50%}li{list-style:none}.wf-docFile{flex-shrink:1;flex-grow:1;flex-basis:0;display:flex;flex-direction:row;align-items:flex-start;border-top:1px solid #f8f9fa;border-left:1px solid #f8f9fa}.wf-docFileIcon{width:20px;height:20px;line-height:20px;text-align:center;overflow:hidden;white-space:nowrap;padding:2px}.wf-docFileInfo{flex-shrink:1;flex-grow:1;flex-basis:0;padding:2px 6px 0 0;margin-left:0}.wf-docFileSize{font-size:11px;color:#888}.wf-doc-delete{margin:auto;font-size:18px;color:#f8f9fa}.attachment-delete:hover{color:#4297fa}.approval-log-message{font-size:14px;padding:10px 0 10px 40px}.approval-log-signature{padding-left:40px;display:flex;justify-content:flex-end}.approval-log-user-name{display:flex;align-items:center;justify-content:space-between;padding-top:14px}.log-attachment-array{padding-top:10px;padding-left:40px}.log-attachment-file-name{font-size:12px;color:#4297fa;float:left;cursor:pointer;margin-left:5px}"]}]}],p.ctorParameters=function(){return[]},p.propDecorators={cls:[{type:i.HostBinding,args:["class"]}],ShowHeader:[{type:i.Input}],ShowViewProcess:[{type:i.Input}],DataId:[{type:i.Input}],ProcInstId:[{type:i.Input}],ActivityDefinitionId:[{type:i.Input}],IfForecast:[{type:i.Input}],Type:[{type:i.Input}],processForecastPayload:[{type:i.Input}]},p);function p(){this.ifForecast=!1,this.cls="",this.ShowHeader=!1,this.ShowViewProcess=!1}var l=(d.prototype.showByProcInstId=function(e){if(e){var t={title:this.getI18nValue("static.approvalLogs.title"),width:550,height:520,showButtons:!1},o=this.resolver.resolveComponentFactory(s).create(this.injector);o.instance.ProcInstId=e,o.instance.ShowHeader=!1,o.instance.ShowViewProcess=!1,o.instance.fill(),this.dialog=this.modalService.show(o,t)}else this.msgService.warning(this.getI18nValue("static.approvalLogs.processNotFound"))},d.prototype.showByDataId=function(e){var t={title:this.getI18nValue("static.approvalLogs.title"),width:550,height:520,showButtons:!1},o=this.resolver.resolveComponentFactory(s).create(this.injector);o.instance.DataId=e,o.instance.ShowHeader=!1,o.instance.ShowViewProcess=!1,o.instance.fill(),this.dialog=this.modalService.show(o,t)},d.prototype.getI18nValue=function(e){if(!e)return"";var t=localStorage.getItem("languageCode"),o=t?a[t]:a["zh-CHS"];return-1===e.indexOf(".")?o[e]:e.split(".").reduce(function(e,t){return e?e[t]:null},o)},d.decorators=[{type:i.Injectable}],d.ctorParameters=function(){return[{type:t.MessagerService},{type:i.Injector},{type:i.ComponentFactoryResolver},{type:o.BsModalService}]},d);function d(e,t,o,i){var r=this;this.msgService=e,this.injector=t,this.resolver=o,this.modalService=i,window.addEventListener("message",function(e){-1<window.document.location.origin.search(e.origin)&&"TaskCloseLogDialog"==e.data&&r.dialog&&r.dialog.close()},!1)}var c=(f.prototype.transform=function(e,t){void 0===t&&(t="");var o=this.getI18nValue(e);return o||t},f.prototype.getI18nValue=function(e){if(!e)return"";var t=localStorage.getItem("languageCode"),o=t?a[t]:a["zh-CHS"];return-1===e.indexOf(".")?o[e]:e.split(".").reduce(function(e,t){return e?e[t]:null},o)},f.decorators=[{type:i.Pipe,args:[{name:"translate"}]}],f.ctorParameters=function(){return[]},f);function f(){}var g=(u.decorators=[{type:i.NgModule,args:[{declarations:[s,c],imports:[r.CommonModule,n.FileListModule],providers:[l],exports:[s],entryComponents:[s]}]}],u);function u(){}e.WfApprovalLogsService=l,e.WfApprovalLogsComponent=s,e.WfApprovalLogsModule=g,e.ɵa=c,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=gsp-wf-wf-approval-logs.umd.min.js.map