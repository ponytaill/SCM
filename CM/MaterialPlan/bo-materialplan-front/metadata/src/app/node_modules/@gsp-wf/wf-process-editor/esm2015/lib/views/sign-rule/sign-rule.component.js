/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, HostBinding, Output, EventEmitter, Input, ViewChild, TemplateRef } from '@angular/core';
import { FormBuilder } from '@angular/forms';
import { SignRuleEntity } from './entites/sign-rule.entity';
import { DialogComponent } from '@farris/ui-dialog';
import { ExprEditMode, ExpressionService } from '@gsp-svc/expression';
import { MessagerService } from '@farris/ui-messager';
import { ProcessDesignerUIState } from '../../app/process-designer.uistate';
import { DatagridComponent } from '@farris/ui-datagrid';
import { ProcessDeUtil } from '../../domain/process-de-util';
import { EditorTypes } from '@farris/ui-datagrid-editors';
import { of } from 'rxjs';
export class SignRuleComponent {
    /**
     * @param {?} formBuilder
     * @param {?} message
     * @param {?} exprService
     * @param {?} designerUIState
     */
    constructor(formBuilder, message, exprService, designerUIState) {
        this.formBuilder = formBuilder;
        this.message = message;
        this.exprService = exprService;
        this.designerUIState = designerUIState;
        this.cls = 'farris-main-area flex-column';
        this.closeModal = new EventEmitter();
        this.submitModal = new EventEmitter();
        this.editorParams = {};
        this.modalConfig = {
            title: '会签规则',
            width: 800,
            height: 520,
            showButtons: true
        };
        this.data = [];
        this.calculationMethods = [
            { text: '按数量', value: 'byNumber' },
            { text: '按比例(%)', value: 'byProportion' },
            { text: '自定义条件', value: 'null' },
        ];
        this.counterSignVariables = [];
        /**
         * **** 审批项帮助参数 ********************************************************
         */
        this.approvalCols = [{ title: '编号', field: 'value', width: 80 },
            { title: '名称', field: 'text', width: 90 }];
        this.approvalItems = [];
        /**
         * ********************************
         */
        this.columns = [
            { field: 'conclusionName', width: 25, title: '结论名称' },
            { field: 'conclusionValue', width: 25, title: '结论值' },
            { field: 'calculateType', width: 40, title: '计算方式',
                formatter: { type: 'enum', options: { valueField: 'value', textField: 'text', data: this.calculationMethods } },
                editor: { type: EditorTypes.COMBOLIST, options: { valueField: 'value', textField: 'text', data: this.calculationMethods, idField: 'value', panelHeight: 'auto' } }
            },
            { field: 'conditionValue', width: 25, title: '条件值',
                editor: { type: EditorTypes.NUMBERBOX, options: {} },
                formatter: { type: 'number', options: { precision: 0, min: 0 } }
            },
            { field: 'waitAllVotes', width: 35, title: '等待全员办结',
                editor: { type: EditorTypes.SWITCH, options: {} },
                formatter: { type: 'boolean', options: { trueText: '是', falseText: '否' } }
            },
            { field: 'completionCondition', width: 50, title: '自定义条件',
                editor: {
                    type: 'input-group',
                    options: {
                        groupText: '<i class="f-icon f-icon-lookup"></i>',
                        editable: false,
                        clickHandle: (/**
                         * @param {?} e
                         * @return {?}
                         */
                        (e) => {
                            e.formControl.setValue(e.instance.value ? e.instance.value : '');
                            this.editConditon(e);
                        }),
                        clear: (/**
                         * @param {?} e
                         * @return {?}
                         */
                        (e) => {
                            console.log('clear', e);
                        })
                    }
                }
            }
        ];
        /**
         * 结束编辑前事件
         */
        this.afterEdit = (/**
         * @param {?} rowIndex
         * @param {?} rowData
         * @param {?=} column
         * @return {?}
         */
        (rowIndex, rowData, column) => {
            this.preValue = JSON.parse(JSON.stringify(rowData));
            return of(true);
        });
    }
    /**
     * @param {?} rules
     * @return {?}
     */
    set value(rules) {
        if (rules && rules.length > 0) {
            for (const rule of rules) {
                /** @type {?} */
                const val = new SignRuleEntity();
                val.id = ProcessDeUtil.GenerateElementId();
                val.conclusionValue = rule.ConclusionValue;
                val.conclusionName = rule.ConclusionName;
                val.calculateType = rule.CalculateType ? rule.CalculateType : 'null';
                val.conditionValue = rule.ConditionValue ? rule.ConditionValue : 0;
                val.waitAllVotes = rule.WaitAllVotes ? rule.WaitAllVotes : false;
                val.completionCondition = rule.CompletionCondition ? rule.CompletionCondition._value : null;
                this.data.push(val);
            }
        }
        else { // 如果模型上没有会签规则，自动带入所有的审批选项
            this.deleteRow();
        }
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.counterSignVariables = this.designerUIState.counterSignVariables || [];
        this.approvalItems = this.designerUIState.approvalItems || [];
    }
    // 重置动作
    /**
     * @return {?}
     */
    deleteRow() {
        this.data = [];
        /** @type {?} */
        const ruleItems = this.designerUIState.approvalItems || [];
        if (ruleItems && ruleItems.length > 0) {
            for (const ruleItem of ruleItems) {
                /** @type {?} */
                const val = new SignRuleEntity();
                if (ruleItem.value === 'Pass') {
                    val.id = ProcessDeUtil.GenerateElementId();
                    val.conclusionValue = ruleItem.value;
                    val.conclusionName = ruleItem.text;
                    val.calculateType = 'byProportion';
                    val.conditionValue = '100';
                    val.waitAllVotes = true;
                }
                else if (ruleItem.value === 'Back') {
                    val.id = ProcessDeUtil.GenerateElementId();
                    val.conclusionValue = ruleItem.value;
                    val.conclusionName = ruleItem.text;
                    val.calculateType = 'byNumber';
                    val.conditionValue = '1';
                    val.waitAllVotes = true;
                }
                else {
                    val.id = ProcessDeUtil.GenerateElementId();
                    val.conclusionValue = ruleItem.value;
                    val.conclusionName = ruleItem.text;
                    val.calculateType = 'null';
                    val.conditionValue = '0';
                    val.waitAllVotes = true;
                }
                this.data.push(val);
            }
        }
    }
    /**
     * @return {?}
     */
    clickOK() {
        this.grid.endCellEdit();
        if (this.data.length === 0) {
            this.message.warning('完成策略为会签时，会签规则不允许为空，请了解！');
        }
        else {
            /** @type {?} */
            const object = { value: this.data, parameters: null };
            this.submitModal.emit(object);
        }
    }
    /**
     * @return {?}
     */
    clickCancel() {
        this.closeModal.emit();
    }
    /**
     * @param {?} e
     * @return {?}
     */
    editConditon(e) {
        if (this.counterSignVariables && this.counterSignVariables.length > 0) {
            for (const variable of this.counterSignVariables) {
                this.exprService.addContext(variable);
            }
        }
        this.exprService.setEditPattern(ExprEditMode.Advanced); // 表达式展现模式：默认高级版（会签规则需要上下文变量）
        this.exprService.addExpressionText(e.instance.value);
        this.exprService.buildExpression().then((/**
         * @param {?} cond
         * @return {?}
         */
        (cond) => {
            e.formControl.setValue(cond);
            e.instance.cd.detectChanges();
        }));
    }
    /**
     * 选中审批项
     * @return {?}
     */
    approvalSelect() {
        /** @type {?} */
        const selections = this.apvlItemsGrid.checkeds;
        if (selections && selections.length > 0) {
            for (const selection of selections) {
                /** @type {?} */
                const signRule = new SignRuleEntity();
                signRule.id = ProcessDeUtil.GenerateElementId();
                signRule.conclusionValue = selection.data.value;
                signRule.conclusionName = selection.data.text;
                this.data.push(signRule);
            }
            this.grid.loadData(this.data);
            this.apvlItemDialog.close();
        }
        else {
            this.message.info('请首先选中一条审批项！');
        }
    }
    /**
     * @param {?} e
     * @return {?}
     */
    endEdit(e) {
        this.curValue = e.rowData;
        // 自定义会签规则和预置会签规则互斥
        if (this.preValue.completionCondition !== this.curValue.completionCondition) {
            this.data[e.rowIndex].calculateType = 'null',
                this.data[e.rowIndex].conditionValue = '0';
            this.data[e.rowIndex].waitAllVotes = false;
        }
        else if (this.preValue.calculateType !== this.curValue.calculateType ||
            this.preValue.conditionValue !== this.curValue.conditionValue ||
            this.preValue.waitAllVotes !== this.curValue.waitAllVotes) {
            this.data[e.rowIndex].completionCondition = null;
        }
        if (e.column.field === 'conditionValue' && this.data[e.rowIndex].calculateType === 'byProportion'
            && Number.parseInt(e.value) > 100) {
            this.message.info('条件值最大值是100');
            this.data[e.rowIndex].conditionValue = '100';
        }
        else if (e.column.field === 'conditionValue' && Number.parseInt(e.value) < 0) {
            this.message.info('条件值最小值是0');
            this.data[e.rowIndex].conditionValue = '0';
        }
        else if ((e.column.field === 'calculateType' || e.column.field === 'conditionValue') && (this.data[e.rowIndex].calculateType === 'oneVote' ||
            this.data[e.rowIndex].calculateType === 'fullVote') && Number.parseInt(this.data[e.rowIndex].conditionValue) !== 0) {
            this.message.info('结论执行方式为全票或一票时不需要条件值');
            this.data[e.rowIndex].conditionValue = '0';
        }
        else if (e.column.field === 'calculateType' && this.data[e.rowIndex].calculateType === 'byProportion' &&
            Number.parseInt(this.data[e.rowIndex].conditionValue) > 100) {
            this.message.info('条件值最大值是100');
            this.data[e.rowIndex].conditionValue = '100';
        }
    }
}
SignRuleComponent.decorators = [
    { type: Component, args: [{
                selector: 'app-sign-rule',
                template: "<div class=\"f-page\">\r\n  <div class=\"f-page-header\">\r\n    <nav class=\"f-page-header-base\">\r\n      <div class=\"f-title\">\r\n        <span class=\"f-title-icon f-text-orna-bill\">\r\n          <i class=\"f-icon f-icon-page-title-administer\"></i>\r\n        </span>\r\n        <h4 class=\"f-title-text\">\u89C4\u5219\u5217\u8868</h4>\r\n      </div>\r\n      <div class=\"btn-toolbar btn-group-lg\">\r\n      </div>\r\n    </nav>\r\n  </div>\r\n  <div class=\"f-page-main f-utils-fill-flex-column h-100\">\r\n    <div class=\"f-utils-fill-flex-column farris-overflow-y-auto h-100\">\r\n      <farris-datagrid #grid [data]=\"data\" [columns]=\"columns\" [idField]=\"'id'\" [fit]=\"true\"\r\n        [fitColumns]=\"true\" [editable]=\"true\" [editMode]=\"'cell'\" [pagination]=\"false\" [showCheckbox]=\"false\"\r\n        [multiSelect]=\"false\" [afterEdit]='afterEdit' (endEdit)=\"endEdit($event)\">\r\n      </farris-datagrid>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<ng-template #iconSelectFooter>\r\n  <button type=\"button\" class=\"btn btn-primary btn-sm px-3 mx-2\" (click)=\"clickOK()\">\u786E\u5B9A</button>\r\n  <button type=\"button\" class=\"btn btn-secondary btn-sm px-3 mx-2\" (click)=\"deleteRow()\">\u91CD\u7F6E</button>\r\n  <button type=\"button\" class=\"btn btn-secondary btn-sm px-3 mx-2\" (click)=\"clickCancel()\">\u53D6\u6D88</button>\r\n</ng-template>\r\n\r\n<farris-dialog #approvalItemDialog [buttons]=\"buttonRef\" [width]=\"700\" [height]=\"520\" [title]=\"'\u5BA1\u6279\u9009\u9879'\">\r\n  <div class=\"f-utils-fill-flex-column farris-overflow-y-auto h-100 m-2\">\r\n      <farris-datagrid #approvalTable [columns]=\"approvalCols\" [data]=\"approvalItems\" [idField]=\"'value'\"\r\n        [fit]=\"true\" [fitColumns]=\"true\" [pagination]='false' [multiSelect]=\"true\"\r\n        [showCheckbox]=\"true\" [multiSelect]=\"true\" [checkOnSelect]=\"true\" [selectOnCheck]=\"true\">\r\n      </farris-datagrid>\r\n  </div>\r\n</farris-dialog>\r\n<ng-template #buttonRef>\r\n  <button class=\"btn btn-sm btn-primary px-3 mx-2\" (click)=\"approvalSelect()\">\u786E\u5B9A</button>\r\n  <button class=\"btn btn-secondary btn-sm px-3 mx-2\" (click)=\"approvalItemDialog.close()\">\u53D6\u6D88</button>\r\n</ng-template>\r\n",
                styles: [""]
            }] }
];
/** @nocollapse */
SignRuleComponent.ctorParameters = () => [
    { type: FormBuilder },
    { type: MessagerService },
    { type: ExpressionService },
    { type: ProcessDesignerUIState }
];
SignRuleComponent.propDecorators = {
    cls: [{ type: HostBinding, args: ['class',] }],
    closeModal: [{ type: Output }],
    submitModal: [{ type: Output }],
    value: [{ type: Input }],
    editorParams: [{ type: Input }],
    modalFooter: [{ type: ViewChild, args: ['iconSelectFooter',] }],
    apvlItemsGrid: [{ type: ViewChild, args: ['approvalTable',] }],
    apvlItemDialog: [{ type: ViewChild, args: ['approvalItemDialog',] }],
    grid: [{ type: ViewChild, args: ['grid',] }]
};
if (false) {
    /** @type {?} */
    SignRuleComponent.prototype.cls;
    /** @type {?} */
    SignRuleComponent.prototype.closeModal;
    /** @type {?} */
    SignRuleComponent.prototype.submitModal;
    /** @type {?} */
    SignRuleComponent.prototype.editorParams;
    /** @type {?} */
    SignRuleComponent.prototype.modalFooter;
    /** @type {?} */
    SignRuleComponent.prototype.apvlItemsGrid;
    /** @type {?} */
    SignRuleComponent.prototype.apvlItemDialog;
    /** @type {?} */
    SignRuleComponent.prototype.grid;
    /** @type {?} */
    SignRuleComponent.prototype.modalConfig;
    /** @type {?} */
    SignRuleComponent.prototype.data;
    /** @type {?} */
    SignRuleComponent.prototype.calculationMethods;
    /** @type {?} */
    SignRuleComponent.prototype.counterSignVariables;
    /**
     * **** 审批项帮助参数 ********************************************************
     * @type {?}
     */
    SignRuleComponent.prototype.approvalCols;
    /** @type {?} */
    SignRuleComponent.prototype.approvalItems;
    /**
     * ********************************
     * @type {?}
     */
    SignRuleComponent.prototype.columns;
    /** @type {?} */
    SignRuleComponent.prototype.preValue;
    /** @type {?} */
    SignRuleComponent.prototype.curValue;
    /**
     * 结束编辑前事件
     * @type {?}
     */
    SignRuleComponent.prototype.afterEdit;
    /**
     * @type {?}
     * @private
     */
    SignRuleComponent.prototype.formBuilder;
    /**
     * @type {?}
     * @private
     */
    SignRuleComponent.prototype.message;
    /**
     * @type {?}
     * @private
     */
    SignRuleComponent.prototype.exprService;
    /**
     * @type {?}
     * @private
     */
    SignRuleComponent.prototype.designerUIState;
}
export class SignRuleConverter {
    constructor() { }
    /**
     * @param {?} data
     * @return {?}
     */
    convertTo(data) {
        if (data && data.length > 0) {
            return '（已设置）';
        }
        else {
            return '（未设置）';
        }
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2lnbi1ydWxlLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Bnc3Atd2Yvd2YtcHJvY2Vzcy1lZGl0b3IvIiwic291cmNlcyI6WyJsaWIvdmlld3Mvc2lnbi1ydWxlL3NpZ24tcnVsZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsV0FBVyxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxXQUFXLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFcEgsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQzdDLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQztBQUM1RCxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDcEQsT0FBTyxFQUFFLFlBQVksRUFBRSxpQkFBaUIsRUFBYSxNQUFNLHFCQUFxQixDQUFDO0FBQ2pGLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUN0RCxPQUFPLEVBQUUsc0JBQXNCLEVBQUUsTUFBTSxvQ0FBb0MsQ0FBQztBQUM1RSxPQUFPLEVBQWMsaUJBQWlCLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUNwRSxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sOEJBQThCLENBQUM7QUFDN0QsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLDZCQUE2QixDQUFDO0FBQzFELE9BQU8sRUFBRSxFQUFFLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFPMUIsTUFBTSxPQUFPLGlCQUFpQjs7Ozs7OztJQWtGNUIsWUFDVSxXQUF3QixFQUN4QixPQUF3QixFQUN4QixXQUE4QixFQUM5QixlQUF1QztRQUh2QyxnQkFBVyxHQUFYLFdBQVcsQ0FBYTtRQUN4QixZQUFPLEdBQVAsT0FBTyxDQUFpQjtRQUN4QixnQkFBVyxHQUFYLFdBQVcsQ0FBbUI7UUFDOUIsb0JBQWUsR0FB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dCwgRXZlbnRFbWl0dGVyLCBJbnB1dCwgVmlld0NoaWxkLCBUZW1wbGF0ZVJlZiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBUeXBlQ29udmVydGVyIH0gZnJvbSAnQGZhcnJpcy91aS1wcm9wZXJ0eS1wYW5lbCc7XHJcbmltcG9ydCB7IEZvcm1CdWlsZGVyIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xyXG5pbXBvcnQgeyBTaWduUnVsZUVudGl0eSB9IGZyb20gJy4vZW50aXRlcy9zaWduLXJ1bGUuZW50aXR5JztcclxuaW1wb3J0IHsgRGlhbG9nQ29tcG9uZW50IH0gZnJvbSAnQGZhcnJpcy91aS1kaWFsb2cnO1xyXG5pbXBvcnQgeyBFeHByRWRpdE1vZGUsIEV4cHJlc3Npb25TZXJ2aWNlLCBWYXJFbnRpdHkgfSBmcm9tICdAZ3NwLXN2Yy9leHByZXNzaW9uJztcclxuaW1wb3J0IHsgTWVzc2FnZXJTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1tZXNzYWdlcic7XHJcbmltcG9ydCB7IFByb2Nlc3NEZXNpZ25lclVJU3RhdGUgfSBmcm9tICcuLi8uLi9hcHAvcHJvY2Vzcy1kZXNpZ25lci51aXN0YXRlJztcclxuaW1wb3J0IHsgRGF0YUNvbHVtbiwgRGF0YWdyaWRDb21wb25lbnQgfSBmcm9tICdAZmFycmlzL3VpLWRhdGFncmlkJztcclxuaW1wb3J0IHsgUHJvY2Vzc0RlVXRpbCB9IGZyb20gJy4uLy4uL2RvbWFpbi9wcm9jZXNzLWRlLXV0aWwnO1xyXG5pbXBvcnQgeyBFZGl0b3JUeXBlcyB9IGZyb20gJ0BmYXJyaXMvdWktZGF0YWdyaWQtZWRpdG9ycyc7XHJcbmltcG9ydCB7IG9mIH0gZnJvbSAncnhqcyc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ2FwcC1zaWduLXJ1bGUnLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi9zaWduLXJ1bGUuY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWycuL3NpZ24tcnVsZS5jb21wb25lbnQuY3NzJ11cclxufSlcclxuZXhwb3J0IGNsYXNzIFNpZ25SdWxlQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcclxuICBASG9zdEJpbmRpbmcoJ2NsYXNzJylcclxuICBjbHMgPSAnZmFycmlzLW1haW4tYXJlYSBmbGV4LWNvbHVtbic7XHJcbiAgQE91dHB1dCgpIGNsb3NlTW9kYWwgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuICBAT3V0cHV0KCkgc3VibWl0TW9kYWwgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuXHJcblxyXG4gIEBJbnB1dCgpXHJcbiAgc2V0IHZhbHVlKHJ1bGVzOiBhbnlbXSkge1xyXG4gICAgaWYgKHJ1bGVzICYmIHJ1bGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCBydWxlIG9mIHJ1bGVzKSB7XHJcbiAgICAgICAgY29uc3QgdmFsID0gbmV3IFNpZ25SdWxlRW50aXR5KCk7XHJcbiAgICAgICAgdmFsLmlkID0gUHJvY2Vzc0RlVXRpbC5HZW5lcmF0ZUVsZW1lbnRJZCgpO1xyXG4gICAgICAgIHZhbC5jb25jbHVzaW9uVmFsdWUgPSBydWxlLkNvbmNsdXNpb25WYWx1ZTtcclxuICAgICAgICB2YWwuY29uY2x1c2lvbk5hbWUgPSBydWxlLkNvbmNsdXNpb25OYW1lO1xyXG4gICAgICAgIHZhbC5jYWxjdWxhdGVUeXBlID0gcnVsZS5DYWxjdWxhdGVUeXBlID8gcnVsZS5DYWxjdWxhdGVUeXBlIDogJ251bGwnO1xyXG4gICAgICAgIHZhbC5jb25kaXRpb25WYWx1ZSA9IHJ1bGUuQ29uZGl0aW9uVmFsdWUgPyBydWxlLkNvbmRpdGlvblZhbHVlIDogMDtcclxuICAgICAgICB2YWwud2FpdEFsbFZvdGVzID0gcnVsZS5XYWl0QWxsVm90ZXMgPyBydWxlLldhaXRBbGxWb3RlcyA6IGZhbHNlO1xyXG4gICAgICAgIHZhbC5jb21wbGV0aW9uQ29uZGl0aW9uID0gcnVsZS5Db21wbGV0aW9uQ29uZGl0aW9uID8gcnVsZS5Db21wbGV0aW9uQ29uZGl0aW9uLl92YWx1ZSA6IG51bGw7XHJcbiAgICAgICAgdGhpcy5kYXRhLnB1c2godmFsKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHsgLy8g5aaC5p6c5qih5Z6L5LiK5rKh5pyJ5Lya562+6KeE5YiZ77yM6Ieq5Yqo5bim5YWl5omA5pyJ55qE5a6h5om56YCJ6aG5XHJcbiAgICAgIHRoaXMuZGVsZXRlUm93KCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIEBJbnB1dCgpIGVkaXRvclBhcmFtczogYW55ID0ge307XHJcbiAgQFZpZXdDaGlsZCgnaWNvblNlbGVjdEZvb3RlcicpIG1vZGFsRm9vdGVyOiBUZW1wbGF0ZVJlZjxhbnk+O1xyXG4gIEBWaWV3Q2hpbGQoJ2FwcHJvdmFsVGFibGUnKSBhcHZsSXRlbXNHcmlkOiBEYXRhZ3JpZENvbXBvbmVudDtcclxuICBAVmlld0NoaWxkKCdhcHByb3ZhbEl0ZW1EaWFsb2cnKSBhcHZsSXRlbURpYWxvZzogRGlhbG9nQ29tcG9uZW50O1xyXG4gIEBWaWV3Q2hpbGQoJ2dyaWQnKSBncmlkOiBEYXRhZ3JpZENvbXBvbmVudDtcclxuXHJcbiAgbW9kYWxDb25maWcgPSB7XHJcbiAgICB0aXRsZTogJ+S8muetvuinhOWImScsXHJcbiAgICB3aWR0aDogODAwLFxyXG4gICAgaGVpZ2h0OiA1MjAsXHJcbiAgICBzaG93QnV0dG9uczogdHJ1ZVxyXG4gIH07XHJcbiAgZGF0YTogU2lnblJ1bGVFbnRpdHlbXSA9IFtdO1xyXG4gIGNhbGN1bGF0aW9uTWV0aG9kczogYW55W10gPSBbXHJcbiAgICB7IHRleHQ6ICfmjInmlbDph48nLCB2YWx1ZTogJ2J5TnVtYmVyJyB9LFxyXG4gICAgeyB0ZXh0OiAn5oyJ5q+U5L6LKCUpJywgdmFsdWU6ICdieVByb3BvcnRpb24nIH0sXHJcbiAgICB7IHRleHQ6ICfoh6rlrprkuYnmnaHku7YnLCB2YWx1ZTogJ251bGwnIH0sXHJcbiAgXTtcclxuICBjb3VudGVyU2lnblZhcmlhYmxlczogVmFyRW50aXR5W10gPSBbXTtcclxuICAvKioqKioqKiDlrqHmibnpobnluK7liqnlj4LmlbAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG4gIGFwcHJvdmFsQ29scyA9IFt7IHRpdGxlOiAn57yW5Y+3JywgZmllbGQ6ICd2YWx1ZScsIHdpZHRoOiA4MCB9LFxyXG4gIHsgdGl0bGU6ICflkI3np7AnLCBmaWVsZDogJ3RleHQnLCB3aWR0aDogOTAgfV07XHJcbiAgYXBwcm92YWxJdGVtczogYW55W10gPSBbXTtcclxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcbiAgY29sdW1ucyA9IFtcclxuICAgIHsgZmllbGQ6ICdjb25jbHVzaW9uTmFtZScsIHdpZHRoOiAyNSwgdGl0bGU6ICfnu5PorrrlkI3np7AnIH0sXHJcbiAgICB7IGZpZWxkOiAnY29uY2x1c2lvblZhbHVlJywgd2lkdGg6IDI1LCB0aXRsZTogJ+e7k+iuuuWAvCcgfSxcclxuICAgIHsgZmllbGQ6ICdjYWxjdWxhdGVUeXBlJywgd2lkdGg6IDQwLCB0aXRsZTogJ+iuoeeul+aWueW8jycsXHJcbiAgICAgIGZvcm1hdHRlcjoge3R5cGU6ICdlbnVtJyxvcHRpb25zOiB7IHZhbHVlRmllbGQ6ICd2YWx1ZScsIHRleHRGaWVsZDogJ3RleHQnLCBkYXRhOiB0aGlzLmNhbGN1bGF0aW9uTWV0aG9kcyB9fSxcclxuICAgICAgZWRpdG9yOiB7dHlwZTogRWRpdG9yVHlwZXMuQ09NQk9MSVNULG9wdGlvbnM6IHsgdmFsdWVGaWVsZDogJ3ZhbHVlJywgdGV4dEZpZWxkOiAndGV4dCcsIGRhdGE6IHRoaXMuY2FsY3VsYXRpb25NZXRob2RzLCBpZEZpZWxkOiAndmFsdWUnLCBwYW5lbEhlaWdodDogJ2F1dG8nIH19XHJcbiAgICB9LFxyXG4gICAgeyBmaWVsZDogJ2NvbmRpdGlvblZhbHVlJywgd2lkdGg6IDI1LCB0aXRsZTogJ+adoeS7tuWAvCcsXHJcbiAgICAgIGVkaXRvcjogeyB0eXBlOiBFZGl0b3JUeXBlcy5OVU1CRVJCT1gsIG9wdGlvbnM6IHt9IH0sXHJcbiAgICAgIGZvcm1hdHRlcjp7dHlwZTogJ251bWJlcicsIG9wdGlvbnM6IHsgcHJlY2lzaW9uOiAwLCBtaW46IDAgfSB9XHJcbiAgICB9LFxyXG4gICAgeyBmaWVsZDogJ3dhaXRBbGxWb3RlcycsIHdpZHRoOiAzNSwgdGl0bGU6ICfnrYnlvoXlhajlkZjlip7nu5MnLFxyXG4gICAgICBlZGl0b3I6IHsgdHlwZTogRWRpdG9yVHlwZXMuU1dJVENILCBvcHRpb25zOiB7fSB9LFxyXG4gICAgICBmb3JtYXR0ZXI6IHsgdHlwZTogJ2Jvb2xlYW4nLCBvcHRpb25zOiB7IHRydWVUZXh0OiAn5pivJywgZmFsc2VUZXh0OiAn5ZCmJyB9fVxyXG4gICAgfSxcclxuICAgIHsgZmllbGQ6ICdjb21wbGV0aW9uQ29uZGl0aW9uJywgd2lkdGg6IDUwLCB0aXRsZTogJ+iHquWumuS5ieadoeS7ticsXHJcbiAgICAgIGVkaXRvcjoge1xyXG4gICAgICAgIHR5cGU6ICdpbnB1dC1ncm91cCcsXHJcbiAgICAgICAgb3B0aW9uczoge1xyXG4gICAgICAgICAgZ3JvdXBUZXh0OiAnPGkgY2xhc3M9XCJmLWljb24gZi1pY29uLWxvb2t1cFwiPjwvaT4nLFxyXG4gICAgICAgICAgZWRpdGFibGU6IGZhbHNlLFxyXG4gICAgICAgICAgY2xpY2tIYW5kbGU6IChlKSA9PiB7XHJcbiAgICAgICAgICAgIGUuZm9ybUNvbnRyb2wuc2V0VmFsdWUoZS5pbnN0YW5jZS52YWx1ZSA/IGUuaW5zdGFuY2UudmFsdWUgOiAnJyk7XHJcbiAgICAgICAgICAgIHRoaXMuZWRpdENvbmRpdG9uKGUpO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGNsZWFyOiAoZSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnY2xlYXInLCBlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICBdO1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHByaXZhdGUgZm9ybUJ1aWxkZXI6IEZvcm1CdWlsZGVyLFxyXG4gICAgcHJpdmF0ZSBtZXNzYWdlOiBNZXNzYWdlclNlcnZpY2UsXHJcbiAgICBwcml2YXRlIGV4cHJTZXJ2aWNlOiBFeHByZXNzaW9uU2VydmljZSxcclxuICAgIHByaXZhdGUgZGVzaWduZXJVSVN0YXRlOiBQcm9jZXNzRGVzaWduZXJVSVN0YXRlLFxyXG4gICkgeyB9XHJcblxyXG4gIG5nT25Jbml0KCkge1xyXG4gICAgdGhpcy5jb3VudGVyU2lnblZhcmlhYmxlcyA9IHRoaXMuZGVzaWduZXJVSVN0YXRlLmNvdW50ZXJTaWduVmFyaWFibGVzIHx8IFtdO1xyXG4gICAgdGhpcy5hcHByb3ZhbEl0ZW1zID0gdGhpcy5kZXNpZ25lclVJU3RhdGUuYXBwcm92YWxJdGVtcyB8fCBbXTtcclxuICB9XHJcbiAgLy8g6YeN572u5Yqo5L2cXHJcbiAgZGVsZXRlUm93KCkge1xyXG4gICAgdGhpcy5kYXRhID0gW107XHJcbiAgICBjb25zdCBydWxlSXRlbXMgPSB0aGlzLmRlc2lnbmVyVUlTdGF0ZS5hcHByb3ZhbEl0ZW1zIHx8IFtdO1xyXG4gICAgaWYgKHJ1bGVJdGVtcyAmJiBydWxlSXRlbXMubGVuZ3RoID4gMCkge1xyXG4gICAgICBmb3IgKGNvbnN0IHJ1bGVJdGVtIG9mIHJ1bGVJdGVtcykge1xyXG4gICAgICAgIGNvbnN0IHZhbCA9IG5ldyBTaWduUnVsZUVudGl0eSgpO1xyXG4gICAgICAgIGlmIChydWxlSXRlbS52YWx1ZSA9PT0gJ1Bhc3MnKSB7XHJcbiAgICAgICAgICB2YWwuaWQgPSBQcm9jZXNzRGVVdGlsLkdlbmVyYXRlRWxlbWVudElkKCk7XHJcbiAgICAgICAgICB2YWwuY29uY2x1c2lvblZhbHVlID0gcnVsZUl0ZW0udmFsdWU7XHJcbiAgICAgICAgICB2YWwuY29uY2x1c2lvbk5hbWUgPSBydWxlSXRlbS50ZXh0O1xyXG4gICAgICAgICAgdmFsLmNhbGN1bGF0ZVR5cGUgPSAnYnlQcm9wb3J0aW9uJztcclxuICAgICAgICAgIHZhbC5jb25kaXRpb25WYWx1ZSA9ICcxMDAnO1xyXG4gICAgICAgICAgdmFsLndhaXRBbGxWb3RlcyA9IHRydWU7XHJcbiAgICAgICAgfSBlbHNlIGlmIChydWxlSXRlbS52YWx1ZSA9PT0gJ0JhY2snKSB7XHJcbiAgICAgICAgICB2YWwuaWQgPSBQcm9jZXNzRGVVdGlsLkdlbmVyYXRlRWxlbWVudElkKCk7XHJcbiAgICAgICAgICB2YWwuY29uY2x1c2lvblZhbHVlID0gcnVsZUl0ZW0udmFsdWU7XHJcbiAgICAgICAgICB2YWwuY29uY2x1c2lvbk5hbWUgPSBydWxlSXRlbS50ZXh0O1xyXG4gICAgICAgICAgdmFsLmNhbGN1bGF0ZVR5cGUgPSAnYnlOdW1iZXInO1xyXG4gICAgICAgICAgdmFsLmNvbmRpdGlvblZhbHVlID0gJzEnO1xyXG4gICAgICAgICAgdmFsLndhaXRBbGxWb3RlcyA9IHRydWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHZhbC5pZCA9IFByb2Nlc3NEZVV0aWwuR2VuZXJhdGVFbGVtZW50SWQoKTtcclxuICAgICAgICAgIHZhbC5jb25jbHVzaW9uVmFsdWUgPSBydWxlSXRlbS52YWx1ZTtcclxuICAgICAgICAgIHZhbC5jb25jbHVzaW9uTmFtZSA9IHJ1bGVJdGVtLnRleHQ7XHJcbiAgICAgICAgICB2YWwuY2FsY3VsYXRlVHlwZSA9ICdudWxsJztcclxuICAgICAgICAgIHZhbC5jb25kaXRpb25WYWx1ZSA9ICcwJztcclxuICAgICAgICAgIHZhbC53YWl0QWxsVm90ZXMgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmRhdGEucHVzaCh2YWwpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjbGlja09LKCkge1xyXG4gICAgdGhpcy5ncmlkLmVuZENlbGxFZGl0KCk7XHJcbiAgICBpZiAodGhpcy5kYXRhLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICB0aGlzLm1lc3NhZ2Uud2FybmluZygn5a6M5oiQ562W55Wl5Li65Lya562+5pe277yM5Lya562+6KeE5YiZ5LiN5YWB6K645Li656m677yM6K+35LqG6Kej77yBJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zdCBvYmplY3QgPSB7IHZhbHVlOiB0aGlzLmRhdGEsIHBhcmFtZXRlcnM6IG51bGwgfTtcclxuICAgICAgdGhpcy5zdWJtaXRNb2RhbC5lbWl0KG9iamVjdCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjbGlja0NhbmNlbCgpIHtcclxuICAgIHRoaXMuY2xvc2VNb2RhbC5lbWl0KCk7XHJcbiAgfVxyXG5cclxuICBlZGl0Q29uZGl0b24oZTogYW55KSB7XHJcbiAgICBpZiAodGhpcy5jb3VudGVyU2lnblZhcmlhYmxlcyAmJiB0aGlzLmNvdW50ZXJTaWduVmFyaWFibGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCB2YXJpYWJsZSBvZiB0aGlzLmNvdW50ZXJTaWduVmFyaWFibGVzKSB7XHJcbiAgICAgICAgdGhpcy5leHByU2VydmljZS5hZGRDb250ZXh0KHZhcmlhYmxlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgdGhpcy5leHByU2VydmljZS5zZXRFZGl0UGF0dGVybihFeHByRWRpdE1vZGUuQWR2YW5jZWQpOyAvLyDooajovr7lvI/lsZXnjrDmqKHlvI/vvJrpu5jorqTpq5jnuqfniYjvvIjkvJrnrb7op4TliJnpnIDopoHkuIrkuIvmloflj5jph4/vvIlcclxuICAgIHRoaXMuZXhwclNlcnZpY2UuYWRkRXhwcmVzc2lvblRleHQoZS5pbnN0YW5jZS52YWx1ZSk7XHJcbiAgICB0aGlzLmV4cHJTZXJ2aWNlLmJ1aWxkRXhwcmVzc2lvbigpLnRoZW4oKGNvbmQ6IHN0cmluZykgPT4ge1xyXG4gICAgICBlLmZvcm1Db250cm9sLnNldFZhbHVlKGNvbmQpO1xyXG4gICAgICBlLmluc3RhbmNlLmNkLmRldGVjdENoYW5nZXMoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6YCJ5Lit5a6h5om56aG5XHJcbiAgICovXHJcbiAgYXBwcm92YWxTZWxlY3QoKSB7XHJcbiAgICBjb25zdCBzZWxlY3Rpb25zOiBhbnlbXSA9IHRoaXMuYXB2bEl0ZW1zR3JpZC5jaGVja2VkcztcclxuICAgIGlmIChzZWxlY3Rpb25zICYmIHNlbGVjdGlvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICBmb3IgKGNvbnN0IHNlbGVjdGlvbiBvZiBzZWxlY3Rpb25zKSB7XHJcbiAgICAgICAgY29uc3Qgc2lnblJ1bGUgPSBuZXcgU2lnblJ1bGVFbnRpdHkoKTtcclxuICAgICAgICBzaWduUnVsZS5pZCA9IFByb2Nlc3NEZVV0aWwuR2VuZXJhdGVFbGVtZW50SWQoKTtcclxuICAgICAgICBzaWduUnVsZS5jb25jbHVzaW9uVmFsdWUgPSBzZWxlY3Rpb24uZGF0YS52YWx1ZTtcclxuICAgICAgICBzaWduUnVsZS5jb25jbHVzaW9uTmFtZSA9IHNlbGVjdGlvbi5kYXRhLnRleHQ7XHJcbiAgICAgICAgdGhpcy5kYXRhLnB1c2goc2lnblJ1bGUpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuZ3JpZC5sb2FkRGF0YSh0aGlzLmRhdGEpO1xyXG4gICAgICB0aGlzLmFwdmxJdGVtRGlhbG9nLmNsb3NlKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLm1lc3NhZ2UuaW5mbygn6K+36aaW5YWI6YCJ5Lit5LiA5p2h5a6h5om56aG577yBJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbiAgcHJlVmFsdWU6IFNpZ25SdWxlRW50aXR5O1xyXG4gIGN1clZhbHVlOiBTaWduUnVsZUVudGl0eTtcclxuLyoqXHJcbiAqIOe7k+adn+e8lui+keWJjeS6i+S7tlxyXG4gKi9cclxuICBhZnRlckVkaXQgPSAocm93SW5kZXg6IG51bWJlciwgcm93RGF0YTogYW55LCBjb2x1bW4/OiBEYXRhQ29sdW1uKSA9PiB7XHJcbiAgICB0aGlzLnByZVZhbHVlID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyb3dEYXRhKSk7XHJcbiAgICByZXR1cm4gb2YodHJ1ZSk7XHJcbiAgfVxyXG5cclxuICBlbmRFZGl0KGU6IGFueSkge1xyXG4gICAgdGhpcy5jdXJWYWx1ZSA9IGUucm93RGF0YTtcclxuICAgIC8vIOiHquWumuS5ieS8muetvuinhOWImeWSjOmihOe9ruS8muetvuinhOWImeS6kuaWpVxyXG4gICAgaWYodGhpcy5wcmVWYWx1ZS5jb21wbGV0aW9uQ29uZGl0aW9uICE9PSB0aGlzLmN1clZhbHVlLmNvbXBsZXRpb25Db25kaXRpb24pIHtcclxuICAgICAgdGhpcy5kYXRhW2Uucm93SW5kZXhdLmNhbGN1bGF0ZVR5cGUgPSAnbnVsbCcsXHJcbiAgICAgIHRoaXMuZGF0YVtlLnJvd0luZGV4XS5jb25kaXRpb25WYWx1ZSA9ICcwJztcclxuICAgICAgdGhpcy5kYXRhW2Uucm93SW5kZXhdLndhaXRBbGxWb3RlcyA9IGZhbHNlO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLnByZVZhbHVlLmNhbGN1bGF0ZVR5cGUgIT09IHRoaXMuY3VyVmFsdWUuY2FsY3VsYXRlVHlwZSB8fFxyXG4gICAgICB0aGlzLnByZVZhbHVlLmNvbmRpdGlvblZhbHVlICE9PSB0aGlzLmN1clZhbHVlLmNvbmRpdGlvblZhbHVlIHx8XHJcbiAgICAgIHRoaXMucHJlVmFsdWUud2FpdEFsbFZvdGVzICE9PSB0aGlzLmN1clZhbHVlLndhaXRBbGxWb3Rlcykge1xyXG4gICAgICAgIHRoaXMuZGF0YVtlLnJvd0luZGV4XS5jb21wbGV0aW9uQ29uZGl0aW9uID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBpZihlLmNvbHVtbi5maWVsZCA9PT0gJ2NvbmRpdGlvblZhbHVlJyAmJiB0aGlzLmRhdGFbZS5yb3dJbmRleF0uY2FsY3VsYXRlVHlwZSA9PT0gJ2J5UHJvcG9ydGlvbidcclxuICAgICYmIE51bWJlci5wYXJzZUludChlLnZhbHVlKSA+IDEwMCkge1xyXG4gICAgICB0aGlzLm1lc3NhZ2UuaW5mbygn5p2h5Lu25YC85pyA5aSn5YC85pivMTAwJyk7XHJcbiAgICAgIHRoaXMuZGF0YVtlLnJvd0luZGV4XS5jb25kaXRpb25WYWx1ZSA9ICcxMDAnO1xyXG4gICAgfSBlbHNlIGlmIChlLmNvbHVtbi5maWVsZCA9PT0gJ2NvbmRpdGlvblZhbHVlJyAmJiBOdW1iZXIucGFyc2VJbnQoZS52YWx1ZSkgPCAwKSB7XHJcbiAgICAgIHRoaXMubWVzc2FnZS5pbmZvKCfmnaHku7blgLzmnIDlsI/lgLzmmK8wJyk7XHJcbiAgICAgIHRoaXMuZGF0YVtlLnJvd0luZGV4XS5jb25kaXRpb25WYWx1ZSA9ICcwJztcclxuICAgIH0gZWxzZSBpZiAoKGUuY29sdW1uLmZpZWxkID09PSAnY2FsY3VsYXRlVHlwZScgfHwgZS5jb2x1bW4uZmllbGQgPT09ICdjb25kaXRpb25WYWx1ZScpICYmICh0aGlzLmRhdGFbZS5yb3dJbmRleF0uY2FsY3VsYXRlVHlwZSA9PT0gJ29uZVZvdGUnIHx8XHJcbiAgICB0aGlzLmRhdGFbZS5yb3dJbmRleF0uY2FsY3VsYXRlVHlwZSA9PT0gJ2Z1bGxWb3RlJykgJiYgTnVtYmVyLnBhcnNlSW50KHRoaXMuZGF0YVtlLnJvd0luZGV4XS5jb25kaXRpb25WYWx1ZSkgIT09IDApIHtcclxuICAgICAgdGhpcy5tZXNzYWdlLmluZm8oJ+e7k+iuuuaJp+ihjOaWueW8j+S4uuWFqOelqOaIluS4gOelqOaXtuS4jemcgOimgeadoeS7tuWAvCcpO1xyXG4gICAgICB0aGlzLmRhdGFbZS5yb3dJbmRleF0uY29uZGl0aW9uVmFsdWUgPSAnMCc7XHJcbiAgICB9IGVsc2UgaWYgKGUuY29sdW1uLmZpZWxkID09PSAnY2FsY3VsYXRlVHlwZScgJiYgdGhpcy5kYXRhW2Uucm93SW5kZXhdLmNhbGN1bGF0ZVR5cGUgPT09ICdieVByb3BvcnRpb24nICYmXHJcbiAgICBOdW1iZXIucGFyc2VJbnQodGhpcy5kYXRhW2Uucm93SW5kZXhdLmNvbmRpdGlvblZhbHVlKSA+IDEwMCkge1xyXG4gICAgICB0aGlzLm1lc3NhZ2UuaW5mbygn5p2h5Lu25YC85pyA5aSn5YC85pivMTAwJyk7XHJcbiAgICAgIHRoaXMuZGF0YVtlLnJvd0luZGV4XS5jb25kaXRpb25WYWx1ZSA9ICcxMDAnO1xyXG4gICAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgU2lnblJ1bGVDb252ZXJ0ZXIgaW1wbGVtZW50cyBUeXBlQ29udmVydGVyIHtcclxuICBjb25zdHJ1Y3RvcigpIHsgfVxyXG5cclxuICBjb252ZXJ0VG8oZGF0YTogYW55W10pOiBzdHJpbmcge1xyXG4gICAgaWYgKGRhdGEgJiYgZGF0YS5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHJldHVybiAn77yI5bey6K6+572u77yJJztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiAn77yI5pyq6K6+572u77yJJztcclxuICAgIH1cclxuICB9XHJcbn1cclxuIl19