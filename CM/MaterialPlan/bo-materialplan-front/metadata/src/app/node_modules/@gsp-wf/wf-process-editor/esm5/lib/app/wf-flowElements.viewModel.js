/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Injectable, Injector, ComponentFactoryResolver } from '@angular/core';
import { ProcessDesignerUIState } from './process-designer.uistate';
import { ApprovalItemEntity } from '../views/approvel-items/entities/approval-item.entity';
import { ResourceKeys } from '../model/resourceKeys';
import { AssignPerformerConfigComponent, AssignConfigConverter } from '../views/assign-performer-config/assign-performer-config.component';
import { SignRuleComponent, SignRuleConverter } from '../views/sign-rule/sign-rule.component';
import { ApprovelItemsComponent, ApprovelItemsConverter } from '../views/approvel-items/approvel-items.component';
import { ExpressionEditorComponent, ExpressionEditorConverter } from '../views/expressionEditor/expression-editor.component';
import { ExecuteFormsComponent, ExecuteFormsConverter } from '../views/execute-forms/execute-forms.component';
import { JumpScopeComponent, JumpScopeConverter } from '../views/jump-scope/jump-scope.component';
import { VarEntity } from '@gsp-svc/expression';
import { BackwardRuleComponent, BackwardRuleConverter } from '../views/backward-rule/backward-rule.component';
import { MessagerService } from '@farris/ui-messager';
import { ActivityComponentComponent, ActivityComponentConverter } from '../views/activity-component/activity-component.component';
import { PerformerComponent, PerformerConverter } from '../views/performer/performer.component';
import { TitleExpressionComponent, TitleExpressionConverter } from '../views/title-expression/title-expression.component';
import { BsModalService } from '@farris/ui-modal';
import { OrganizationPotentialOwnerComponent, OrganizationPotentialOwnerConverter } from '../views/organization-potential-owner/organization-potential-owner.component';
import { CustomizeActionComponent, CustomizeActionConverter } from '../views/customize-action/customize-action.component';
import { TimeLimitControlComponent, TimeLimitControlConverter } from '../views/time-limit-control/time-limit-control.component';
import { AnonymousSetComponent, AnonymousSetConverter } from '../views/anonymous-set/anonymous-set.component';
import { VariableSettingComponent, VariableSettingConverter } from '../views/variable-setting/variable-setting.component';
import { MessageNoticeComponent, MessageNoticeConverter } from '../views/message-notice/message-notice.component';
import { ApprovalPivotComponent, ApprovalPivotConverter } from '../views/approval-pivot/approval-pivot.component';
import { UrgeHandleRuleComponent, UrgeHandleRuleConverter } from '../views/urge-handle-rule/urge-handle-rule.component';
import { ExtendPropertyComponent, ExtendPropertyConverter } from '../views/extend-property/extend-property.component';
var WFFlowElementsViewModel = /** @class */ (function () {
    function WFFlowElementsViewModel(uiState, message, injector, modalService, resolver) {
        this.uiState = uiState;
        this.message = message;
        this.injector = injector;
        this.modalService = modalService;
        this.resolver = resolver;
    }
    /**
     * 设置流程元素属性框
     * @param obj
     */
    /**
     * 设置流程元素属性框
     * @param {?} obj
     * @return {?}
     */
    WFFlowElementsViewModel.prototype.setFlowElementProperty = /**
     * 设置流程元素属性框
     * @param {?} obj
     * @return {?}
     */
    function (obj) {
        this.uiState.propertyData = obj.propertyData;
        this.uiState.propertyConfig = this.setFlowEleConfig(obj.propertyConfig);
    };
    /**
     * @private
     * @param {?} obj
     * @return {?}
     */
    WFFlowElementsViewModel.prototype.setFlowEleConfig = /**
     * @private
     * @param {?} obj
     * @return {?}
     */
    function (obj) {
        var _this = this;
        /** @type {?} */
        var propertyConfig = [];
        if (obj) {
            obj.forEach((/**
             * @param {?} element
             * @return {?}
             */
            function (element) {
                _this.setFlowEleEntity(element.properties);
                propertyConfig.push(element);
            }));
        }
        return propertyConfig;
    };
    /**
     * @private
     * @param {?} obj
     * @return {?}
     */
    WFFlowElementsViewModel.prototype.setFlowEleEntity = /**
     * @private
     * @param {?} obj
     * @return {?}
     */
    function (obj) {
        var _this = this;
        if (obj && obj.length > 0) {
            obj.forEach((/**
             * @param {?} item
             * @return {?}
             */
            function (item) {
                switch (item.propertyID) {
                    case ResourceKeys.ConditionExpression: // 条件表达式
                        item.editor = ExpressionEditorComponent;
                        item.converter = new ExpressionEditorConverter();
                        item.editorParams = {};
                        break;
                    case ResourceKeys.wf_ExecuteForms_PC: // 开始活动的表单构件
                        item.editor = ExecuteFormsComponent;
                        item.converter = new ExecuteFormsConverter();
                        item.editorParams = {
                            location: 'startActivity',
                            tab: 'web'
                        };
                        break;
                    case ResourceKeys.wf_ExecuteForms_Mobile: // 开始活动的表单构件
                        item.editor = ExecuteFormsComponent;
                        item.converter = new ExecuteFormsConverter();
                        item.editorParams = {
                            location: 'startActivity',
                            tab: 'mobile'
                        };
                        break;
                    case ResourceKeys.sendBackedTask: // 开始活动的发送驳回任务
                        item.iterator = _this.uiState.boolIterator;
                        break;
                    case ResourceKeys.SelectTargetAble: // 允许跳转
                        item.iterator = _this.uiState.boolIterator;
                        break;
                    case ResourceKeys.JumpScope: // 跳转规则
                        item.editor = JumpScopeComponent;
                        item.converter = new JumpScopeConverter();
                        break;
                    case ResourceKeys.Default: // 默认分支
                        item.iterator = _this.uiState.boolIterator;
                        break;
                    default:
                        item.editor = ExtendPropertyComponent;
                        item.converter = new ExtendPropertyConverter();
                        break;
                }
            }));
        }
    };
    /**
     * 设置审批活动节点的属性框
     * @param obj
     */
    /**
     * 设置审批活动节点的属性框
     * @param {?} obj
     * @return {?}
     */
    WFFlowElementsViewModel.prototype.setUserActivityProperty = /**
     * 设置审批活动节点的属性框
     * @param {?} obj
     * @return {?}
     */
    function (obj) {
        if (obj.propertyData.ApprovalItems) {
            this.buildApprovalItems(obj.propertyData.ApprovalItems);
            this.buildCounterSignVariables(obj.propertyData.ApprovalItems);
            this.buildSignRules(obj.propertyData.SignRule); // 设置会签规则的结论名称
        }
        this.uiState.propertyData = obj.propertyData;
        this.uiState.bizActivityId = obj.propertyData.BizActivityID;
        this.uiState.propertyConfig = this.setUserActConfig(obj.propertyConfig);
    };
    /**
     * @private
     * @param {?} obj
     * @return {?}
     */
    WFFlowElementsViewModel.prototype.setUserActConfig = /**
     * @private
     * @param {?} obj
     * @return {?}
     */
    function (obj) {
        var _this = this;
        /** @type {?} */
        var propertyConfig = [];
        if (obj) {
            obj.forEach((/**
             * @param {?} element
             * @return {?}
             */
            function (element) {
                _this.setUserActEntity(element.properties);
                propertyConfig.push(element);
            }));
        }
        return propertyConfig;
    };
    /**
     * @private
     * @param {?} obj
     * @return {?}
     */
    WFFlowElementsViewModel.prototype.setUserActEntity = /**
     * @private
     * @param {?} obj
     * @return {?}
     */
    function (obj) {
        var _this = this;
        if (obj && obj.length > 0) {
            obj.forEach((/**
             * @param {?} item
             * @return {?}
             */
            function (item) {
                switch (item.propertyID) {
                    case ResourceKeys.ParticipantSchemes: // 参与者
                        item.editor = PerformerComponent;
                        item.converter = new PerformerConverter();
                        break;
                    case ResourceKeys.wf_ExecuteForms_PC: // 表单定义
                        item.editor = ExecuteFormsComponent;
                        item.converter = new ExecuteFormsConverter();
                        item.editorParams = {
                            location: 'userActivity',
                            tab: 'web'
                        };
                        break;
                    case ResourceKeys.wf_ExecuteForms_Mobile: // 表单定义
                        item.editor = ExecuteFormsComponent;
                        item.converter = new ExecuteFormsConverter();
                        item.editorParams = {
                            location: 'userActivity',
                            tab: 'mobile'
                        };
                        break;
                    case ResourceKeys.AssignStrategy: // 分配策略
                        item.iterator = _this.uiState.assignIterator;
                        break;
                    case ResourceKeys.OperatorConfig: // 指派规则
                        item.editor = AssignPerformerConfigComponent;
                        item.converter = new AssignConfigConverter();
                        break;
                    case ResourceKeys.CompleteStrategy: // 完成策略
                        if (_this.uiState.propertyData.AssignStrategy === _this.uiState.assignIterator[2].key) {
                            item.iterator = _this.uiState.completeIterator4Claim; // 分配策略为领用时，完成策略只能是抢占模式
                        }
                        else {
                            item.iterator = _this.uiState.completeIterator;
                        }
                        break;
                    case ResourceKeys.SignRule: // 会签规则
                        item.editor = SignRuleComponent;
                        item.converter = new SignRuleConverter();
                        item.editorParams = {
                            variables: _this.uiState.counterSignVariables,
                            approvalItems: _this.uiState.approvalItems
                        };
                        break;
                    case ResourceKeys.ApprovalItems: // 审批项
                        item.editor = ApprovelItemsComponent;
                        item.converter = new ApprovelItemsConverter();
                        break;
                    case ResourceKeys.Retrievable: // 允许取回
                        item.iterator = _this.uiState.boolIterator;
                        break;
                    case ResourceKeys.AddSignFrontAble: // 允许征询
                        item.editor = OrganizationPotentialOwnerComponent;
                        item.converter = new OrganizationPotentialOwnerConverter();
                        break;
                    case ResourceKeys.AddSignBehindAble: // 允许加签
                        item.editor = OrganizationPotentialOwnerComponent;
                        item.converter = new OrganizationPotentialOwnerConverter();
                        break;
                    case ResourceKeys.NotifyAble: // 允许知会
                        item.editor = OrganizationPotentialOwnerComponent;
                        item.converter = new OrganizationPotentialOwnerConverter();
                        break;
                    case ResourceKeys.transferScope: // 移交范围
                        item.editor = OrganizationPotentialOwnerComponent;
                        item.converter = new OrganizationPotentialOwnerConverter();
                        break;
                    case ResourceKeys.SelectBranch: // 允许指定后续分支
                        item.iterator = _this.uiState.boolIterator;
                        break;
                    case ResourceKeys.SelectTargetAble: // 允许跳转
                        if (_this.uiState.propertyData.CompleteStrategy
                            && _this.uiState.propertyData.CompleteStrategy !== _this.uiState.completeIterator[0].key) {
                            item.iterator = _this.uiState.noJump4Sign;
                        }
                        else {
                            item.iterator = _this.uiState.boolIterator;
                        }
                        break;
                    case ResourceKeys.JumpScope: // 跳转规则
                        item.editor = JumpScopeComponent;
                        item.converter = new JumpScopeConverter();
                        break;
                    case ResourceKeys.BackWardRule: // 驳回规则
                        item.editor = BackwardRuleComponent;
                        item.converter = new BackwardRuleConverter();
                        item.editorParams = {
                            nodeType: 'UserActivity'
                        };
                        break;
                    case ResourceKeys.wf_TitleExpression:
                        item.editor = TitleExpressionComponent;
                        item.converter = new TitleExpressionConverter();
                        break;
                    case ResourceKeys.Tools: // 活动构件
                        item.editor = ActivityComponentComponent;
                        item.converter = new ActivityComponentConverter();
                        item.editorParams = {
                            location: 'activity'
                        };
                        break;
                    case ResourceKeys.wf_CustomizeAction: // 活动构件
                        item.editor = CustomizeActionComponent;
                        item.converter = new CustomizeActionConverter();
                        break;
                    case ResourceKeys.timeLimitControl: // 超时预警
                        item.editor = TimeLimitControlComponent;
                        item.converter = new TimeLimitControlConverter();
                        item.editorParams = {
                            location: 'activity'
                        };
                        break;
                    case ResourceKeys.anonymousSet: // 匿名设置
                        item.editor = AnonymousSetComponent;
                        item.converter = new AnonymousSetConverter();
                        break;
                    case ResourceKeys.variableSettings: // 变量设置
                        item.editor = VariableSettingComponent;
                        item.converter = new VariableSettingConverter();
                        break;
                    case ResourceKeys.messageNotice: // 消息通知
                        item.editor = MessageNoticeComponent;
                        item.converter = new MessageNoticeConverter();
                        item.editorParams = {
                            location: 'activity'
                        };
                        break;
                    case ResourceKeys.approvalPivotConfig: // 审批要点
                        item.editor = ApprovalPivotComponent;
                        item.converter = new ApprovalPivotConverter();
                        break;
                    case ResourceKeys.DisplayTerminal: // 显示终端
                        item.iterator = _this.uiState.displayTerminal;
                        break;
                    case ResourceKeys.urgeHandleRule: // 显示终端
                        item.editor = UrgeHandleRuleComponent;
                        item.converter = new UrgeHandleRuleConverter();
                        break;
                    default:
                        item.editor = ExtendPropertyComponent;
                        item.converter = new ExtendPropertyConverter();
                        break;
                }
            }));
        }
    };
    /**
     * 创建会签规则变量
     */
    /**
     * 创建会签规则变量
     * @param {?} conclusions
     * @return {?}
     */
    WFFlowElementsViewModel.prototype.buildCounterSignVariables = /**
     * 创建会签规则变量
     * @param {?} conclusions
     * @return {?}
     */
    function (conclusions) {
        var e_1, _a;
        this.uiState.counterSignVariables = [];
        this.uiState.counterSignVariables = this.uiState.counterSignVariables.concat([{
                key: 'nrOfInstances',
                name: '总任务数',
                description: '总任务数'
            }, {
                key: 'nrOfCompletedInstances',
                name: '已完成任务数',
                description: '已完成任务数'
            }
        ]);
        if (conclusions && conclusions.length > 0) {
            try {
                for (var conclusions_1 = tslib_1.__values(conclusions), conclusions_1_1 = conclusions_1.next(); !conclusions_1_1.done; conclusions_1_1 = conclusions_1.next()) {
                    var conclusion = conclusions_1_1.value;
                    /** @type {?} */
                    var variable = new VarEntity();
                    variable.key = "nrOf" + conclusion.Value;
                    variable.name = conclusion.Text + "_\u4EFB\u52A1\u6570";
                    variable.description = conclusion.Text + "_\u4EFB\u52A1\u6570";
                    this.uiState.counterSignVariables.push(variable);
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (conclusions_1_1 && !conclusions_1_1.done && (_a = conclusions_1.return)) _a.call(conclusions_1);
                }
                finally { if (e_1) throw e_1.error; }
            }
        }
    };
    /**
     * 创建自定义项
     * @param conclusions
     */
    /**
     * 创建自定义项
     * @param {?} conclusions
     * @return {?}
     */
    WFFlowElementsViewModel.prototype.buildApprovalItems = /**
     * 创建自定义项
     * @param {?} conclusions
     * @return {?}
     */
    function (conclusions) {
        var e_2, _a;
        this.uiState.approvalItems = [];
        if (conclusions && conclusions.length > 0) {
            try {
                for (var conclusions_2 = tslib_1.__values(conclusions), conclusions_2_1 = conclusions_2.next(); !conclusions_2_1.done; conclusions_2_1 = conclusions_2.next()) {
                    var item = conclusions_2_1.value;
                    /** @type {?} */
                    var conclusion = new ApprovalItemEntity();
                    conclusion.value = item.Value;
                    conclusion.text = item.Text;
                    conclusion.workFlowAction = item.WorkFlowAction;
                    conclusion.isDefault = item.IsDefault;
                    this.uiState.approvalItems.push(conclusion);
                }
            }
            catch (e_2_1) { e_2 = { error: e_2_1 }; }
            finally {
                try {
                    if (conclusions_2_1 && !conclusions_2_1.done && (_a = conclusions_2.return)) _a.call(conclusions_2);
                }
                finally { if (e_2) throw e_2.error; }
            }
        }
    };
    /**
     * 会签规则绑定审批项名称
     * @param signRules 会签规则
     */
    /**
     * 会签规则绑定审批项名称
     * @private
     * @param {?} signRules 会签规则
     * @return {?}
     */
    WFFlowElementsViewModel.prototype.buildSignRules = /**
     * 会签规则绑定审批项名称
     * @private
     * @param {?} signRules 会签规则
     * @return {?}
     */
    function (signRules) {
        var e_3, _a;
        if (signRules && signRules.length > 0) {
            var _loop_1 = function (signRule) {
                /** @type {?} */
                var approvalItem = this_1.uiState.approvalItems.find((/**
                 * @param {?} item
                 * @return {?}
                 */
                function (item) { return item.value === signRule.ConclusionValue; }));
                // if (!approvalItem) {
                //     this.message.info('审批项发生改变，请调整会签规则！');
                // }
                if (approvalItem) {
                    signRule.ConclusionName = approvalItem.text;
                }
            };
            var this_1 = this;
            try {
                for (var signRules_1 = tslib_1.__values(signRules), signRules_1_1 = signRules_1.next(); !signRules_1_1.done; signRules_1_1 = signRules_1.next()) {
                    var signRule = signRules_1_1.value;
                    _loop_1(signRule);
                }
            }
            catch (e_3_1) { e_3 = { error: e_3_1 }; }
            finally {
                try {
                    if (signRules_1_1 && !signRules_1_1.done && (_a = signRules_1.return)) _a.call(signRules_1);
                }
                finally { if (e_3) throw e_3.error; }
            }
        }
    };
    WFFlowElementsViewModel.decorators = [
        { type: Injectable }
    ];
    /** @nocollapse */
    WFFlowElementsViewModel.ctorParameters = function () { return [
        { type: ProcessDesignerUIState },
        { type: MessagerService },
        { type: Injector },
        { type: BsModalService },
        { type: ComponentFactoryResolver }
    ]; };
    return WFFlowElementsViewModel;
}());
export { WFFlowElementsViewModel };
if (false) {
    /**
     * @type {?}
     * @private
     */
    WFFlowElementsViewModel.prototype.uiState;
    /**
     * @type {?}
     * @private
     */
    WFFlowElementsViewModel.prototype.message;
    /**
     * @type {?}
     * @private
     */
    WFFlowElementsViewModel.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    WFFlowElementsViewModel.prototype.modalService;
    /**
     * @type {?}
     * @private
     */
    WFFlowElementsViewModel.prototype.resolver;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2YtZmxvd0VsZW1lbnRzLnZpZXdNb2RlbC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Bnc3Atd2Yvd2YtcHJvY2Vzcy1lZGl0b3IvIiwic291cmNlcyI6WyJsaWIvYXBwL3dmLWZsb3dFbGVtZW50cy52aWV3TW9kZWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFBRSx3QkFBd0IsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUMvRSxPQUFPLEVBQUUsc0JBQXNCLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQztBQUNwRSxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSx1REFBdUQsQ0FBQztBQUczRixPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFDckQsT0FBTyxFQUFFLDhCQUE4QixFQUFFLHFCQUFxQixFQUFFLE1BQU0sb0VBQW9FLENBQUM7QUFDM0ksT0FBTyxFQUFFLGlCQUFpQixFQUFFLGlCQUFpQixFQUFFLE1BQU0sd0NBQXdDLENBQUM7QUFDOUYsT0FBTyxFQUFFLHNCQUFzQixFQUFFLHNCQUFzQixFQUFFLE1BQU0sa0RBQWtELENBQUM7QUFDbEgsT0FBTyxFQUFFLHlCQUF5QixFQUFFLHlCQUF5QixFQUFFLE1BQU0sdURBQXVELENBQUM7QUFDN0gsT0FBTyxFQUFFLHFCQUFxQixFQUFFLHFCQUFxQixFQUFFLE1BQU0sZ0RBQWdELENBQUM7QUFDOUcsT0FBTyxFQUFFLGtCQUFrQixFQUFFLGtCQUFrQixFQUFFLE1BQU0sMENBQTBDLENBQUM7QUFDbEcsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ2hELE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxxQkFBcUIsRUFBRSxNQUFNLGdEQUFnRCxDQUFDO0FBQzlHLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUV0RCxPQUFPLEVBQUUsMEJBQTBCLEVBQUUsMEJBQTBCLEVBQUUsTUFB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QUF1QjtnQkFDdkIsNkNBQTZDO2dCQUM3QyxJQUFJO2dCQUNKLElBQUksWUFBWSxFQUFFO29CQUNoQixRQUFRLENBQUMsY0FBYyxHQUFHLFlBQVksQ0FBQyxJQUFJLENBQUM7aUJBQzdDOzs7O2dCQVBILEtBQXVCLElBQUEsY0FBQSxpQkFBQSxTQUFTLENBQUEsb0NBQUE7b0JBQTNCLElBQU0sUUFBUSxzQkFBQTs0QkFBUixRQUFRO2lCQVFsQjs7Ozs7Ozs7O1NBQ0Y7SUFDSCxDQUFDOztnQkEzVEYsVUFBVTs7OztnQkE3QkYsc0JBQXNCO2dCQWF0QixlQUFlO2dCQWRILFFBQVE7Z0JBbUJwQixjQUFjO2dCQW5CUSx3QkFBd0I7O0lBMlZ2RCw4QkFBQztDQUFBLEFBN1RELElBNlRDO1NBM1RZLHVCQUF1Qjs7Ozs7O0lBR2hDLDBDQUF1Qzs7Ozs7SUFDdkMsMENBQWdDOzs7OztJQUNoQywyQ0FBMEI7Ozs7O0lBQzFCLCtDQUFvQzs7Ozs7SUFDcEMsMkNBQTBDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSwgSW5qZWN0b3IsIENvbXBvbmVudEZhY3RvcnlSZXNvbHZlciB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBQcm9jZXNzRGVzaWduZXJVSVN0YXRlIH0gZnJvbSAnLi9wcm9jZXNzLWRlc2lnbmVyLnVpc3RhdGUnO1xyXG5pbXBvcnQgeyBBcHByb3ZhbEl0ZW1FbnRpdHkgfSBmcm9tICcuLi92aWV3cy9hcHByb3ZlbC1pdGVtcy9lbnRpdGllcy9hcHByb3ZhbC1pdGVtLmVudGl0eSc7XHJcbmltcG9ydCB7IFByb3BlcnR5RW50aXR5IH0gZnJvbSAnQGZhcnJpcy91aS1wcm9wZXJ0eS1wYW5lbCc7XHJcbmltcG9ydCB7IEVsZW1lbnRQcm9wZXJ0eUNvbmZpZywgS2V5TWFwIH0gZnJvbSAnQGZhcnJpcy91aS1wcm9wZXJ0eS1wYW5lbCc7XHJcbmltcG9ydCB7IFJlc291cmNlS2V5cyB9IGZyb20gJy4uL21vZGVsL3Jlc291cmNlS2V5cyc7XHJcbmltcG9ydCB7IEFzc2lnblBlcmZvcm1lckNvbmZpZ0NvbXBvbmVudCwgQXNzaWduQ29uZmlnQ29udmVydGVyIH0gZnJvbSAnLi4vdmlld3MvYXNzaWduLXBlcmZvcm1lci1jb25maWcvYXNzaWduLXBlcmZvcm1lci1jb25maWcuY29tcG9uZW50JztcclxuaW1wb3J0IHsgU2lnblJ1bGVDb21wb25lbnQsIFNpZ25SdWxlQ29udmVydGVyIH0gZnJvbSAnLi4vdmlld3Mvc2lnbi1ydWxlL3NpZ24tcnVsZS5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBBcHByb3ZlbEl0ZW1zQ29tcG9uZW50LCBBcHByb3ZlbEl0ZW1zQ29udmVydGVyIH0gZnJvbSAnLi4vdmlld3MvYXBwcm92ZWwtaXRlbXMvYXBwcm92ZWwtaXRlbXMuY29tcG9uZW50JztcclxuaW1wb3J0IHsgRXhwcmVzc2lvbkVkaXRvckNvbXBvbmVudCwgRXhwcmVzc2lvbkVkaXRvckNvbnZlcnRlciB9IGZyb20gJy4uL3ZpZXdzL2V4cHJlc3Npb25FZGl0b3IvZXhwcmVzc2lvbi1lZGl0b3IuY29tcG9uZW50JztcclxuaW1wb3J0IHsgRXhlY3V0ZUZvcm1zQ29tcG9uZW50LCBFeGVjdXRlRm9ybXNDb252ZXJ0ZXIgfSBmcm9tICcuLi92aWV3cy9leGVjdXRlLWZvcm1zL2V4ZWN1dGUtZm9ybXMuY29tcG9uZW50JztcclxuaW1wb3J0IHsgSnVtcFNjb3BlQ29tcG9uZW50LCBKdW1wU2NvcGVDb252ZXJ0ZXIgfSBmcm9tICcuLi92aWV3cy9qdW1wLXNjb3BlL2p1bXAtc2NvcGUuY29tcG9uZW50JztcclxuaW1wb3J0IHsgVmFyRW50aXR5IH0gZnJvbSAnQGdzcC1zdmMvZXhwcmVzc2lvbic7XHJcbmltcG9ydCB7IEJhY2t3YXJkUnVsZUNvbXBvbmVudCwgQmFja3dhcmRSdWxlQ29udmVydGVyIH0gZnJvbSAnLi4vdmlld3MvYmFja3dhcmQtcnVsZS9iYWNrd2FyZC1ydWxlLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IE1lc3NhZ2VyU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbWVzc2FnZXInO1xyXG5pbXBvcnQgeyBCYWNrV2FyZFJ1bGUgfSBmcm9tICcuLi92aWV3cy9iYWNrd2FyZC1ydWxlL2JhY2t3YXJkLXJ1bGUuZW50aXR5JztcclxuaW1wb3J0IHsgQWN0aXZpdHlDb21wb25lbnRDb21wb25lbnQsIEFjdGl2aXR5Q29tcG9uZW50Q29udmVydGVyIH0gZnJvbSAnLi4vdmlld3MvYWN0aXZpdHktY29tcG9uZW50L2FjdGl2aXR5LWNvbXBvbmVudC5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBQZXJmb3JtZXJDb21wb25lbnQsIFBlcmZvcm1lckNvbnZlcnRlciB9IGZyb20gJy4uL3ZpZXdzL3BlcmZvcm1lci9wZXJmb3JtZXIuY29tcG9uZW50JztcclxuaW1wb3J0IHsgVGl0bGVFeHByZXNzaW9uQ29tcG9uZW50LCBUaXRsZUV4cHJlc3Npb25Db252ZXJ0ZXIgfSBmcm9tICcuLi92aWV3cy90aXRsZS1leHByZXNzaW9uL3RpdGxlLWV4cHJlc3Npb24uY29tcG9uZW50JztcclxuaW1wb3J0IHsgQnNNb2RhbFNlcnZpY2UsIE1vZGFsT3B0aW9ucyB9IGZyb20gJ0BmYXJyaXMvdWktbW9kYWwnO1xyXG5pbXBvcnQgeyBPcmdhbml6YXRpb25Qb3RlbnRpYWxPd25lckNvbXBvbmVudCwgT3JnYW5pemF0aW9uUG90ZW50aWFsT3duZXJDb252ZXJ0ZXIgfSBmcm9tICcuLi92aWV3cy9vcmdhbml6YXRpb24tcG90ZW50aWFsLW93bmVyL29yZ2FuaXphdGlvbi1wb3RlbnRpYWwtb3duZXIuY29tcG9uZW50JztcclxuaW1wb3J0IHsgQ3VzdG9taXplQWN0aW9uQ29tcG9uZW50LCBDdXN0b21pemVBY3Rpb25Db252ZXJ0ZXIgfSBmcm9tICcuLi92aWV3cy9jdXN0b21pemUtYWN0aW9uL2N1c3RvbWl6ZS1hY3Rpb24uY29tcG9uZW50JztcclxuaW1wb3J0IHsgVGltZUxpbWl0Q29udHJvbENvbXBvbmVudCwgVGltZUxpbWl0Q29udHJvbENvbnZlcnRlciB9IGZyb20gJy4uL3ZpZXdzL3RpbWUtbGltaXQtY29udHJvbC90aW1lLWxpbWl0LWNvbnRyb2wuY29tcG9uZW50JztcclxuaW1wb3J0IHsgQW5vbnltb3VzU2V0Q29tcG9uZW50LCBBbm9ueW1vdXNTZXRDb252ZXJ0ZXIgfSBmcm9tICcuLi92aWV3cy9hbm9ueW1vdXMtc2V0L2Fub255bW91cy1zZXQuY29tcG9uZW50JztcclxuaW1wb3J0IHsgVmFyaWFibGVTZXR0aW5nQ29tcG9uZW50LCBWYXJpYWJsZVNldHRpbmdDb252ZXJ0ZXIgfSBmcm9tICcuLi92aWV3cy92YXJpYWJsZS1zZXR0aW5nL3ZhcmlhYmxlLXNldHRpbmcuY29tcG9uZW50JztcclxuaW1wb3J0IHsgTWVzc2FnZU5vdGljZUNvbXBvbmVudCwgTWVzc2FnZU5vdGljZUNvbnZlcnRlciB9IGZyb20gJy4uL3ZpZXdzL21lc3NhZ2Utbm90aWNlL21lc3NhZ2Utbm90aWNlLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IEFwcHJvdmFsUGl2b3RDb21wb25lbnQsIEFwcHJvdmFsUGl2b3RDb252ZXJ0ZXIgfSBmcm9tICcuLi92aWV3cy9hcHByb3ZhbC1waXZvdC9hcHByb3ZhbC1waXZvdC5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBVcmdlSGFuZGxlUnVsZUNvbXBvbmVudCwgVXJnZUhhbmRsZVJ1bGVDb252ZXJ0ZXIgfSBmcm9tICcuLi92aWV3cy91cmdlLWhhbmRsZS1ydWxlL3VyZ2UtaGFuZGxlLXJ1bGUuY29tcG9uZW50JztcclxuaW1wb3J0IHsgRXh0ZW5kUHJvcGVydHlDb21wb25lbnQsIEV4dGVuZFByb3BlcnR5Q29udmVydGVyIH0gZnJvbSAnLi4vdmlld3MvZXh0ZW5kLXByb3BlcnR5L2V4dGVuZC1wcm9wZXJ0eS5jb21wb25lbnQnO1xyXG5cclxuQEluamVjdGFibGUoKVxyXG5cclxuZXhwb3J0IGNsYXNzIFdGRmxvd0VsZW1lbnRzVmlld01vZGVsIHtcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBwcml2YXRlIHVpU3RhdGU6IFByb2Nlc3NEZXNpZ25lclVJU3RhdGUsXHJcbiAgICBwcml2YXRlIG1lc3NhZ2U6IE1lc3NhZ2VyU2VydmljZSxcclxuICAgIHByaXZhdGUgaW5qZWN0b3I6IEluamVjdG9yLFxyXG4gICAgcHJpdmF0ZSBtb2RhbFNlcnZpY2U6IEJzTW9kYWxTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSByZXNvbHZlcjogQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyXHJcbiAgKSB7XHJcblxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6K6+572u5rWB56iL5YWD57Sg5bGe5oCn5qGGXHJcbiAgICogQHBhcmFtIG9ialxyXG4gICAqL1xyXG4gIHNldEZsb3dFbGVtZW50UHJvcGVydHkob2JqOiBhbnkpIHtcclxuICAgIHRoaXMudWlTdGF0ZS5wcm9wZXJ0eURhdGEgPSBvYmoucHJvcGVydHlEYXRhO1xyXG4gICAgdGhpcy51aVN0YXRlLnByb3BlcnR5Q29uZmlnID0gdGhpcy5zZXRGbG93RWxlQ29uZmlnKG9iai5wcm9wZXJ0eUNvbmZpZyk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHNldEZsb3dFbGVDb25maWcob2JqOiBhbnlbXSk6IEVsZW1lbnRQcm9wZXJ0eUNvbmZpZ1tdIHtcclxuICAgIGNvbnN0IHByb3BlcnR5Q29uZmlnOiBFbGVtZW50UHJvcGVydHlDb25maWdbXSA9IFtdO1xyXG4gICAgaWYgKG9iaikge1xyXG4gICAgICBvYmouZm9yRWFjaCgoZWxlbWVudDogRWxlbWVudFByb3BlcnR5Q29uZmlnKSA9PiB7XHJcbiAgICAgICAgdGhpcy5zZXRGbG93RWxlRW50aXR5KGVsZW1lbnQucHJvcGVydGllcyk7XHJcbiAgICAgICAgcHJvcGVydHlDb25maWcucHVzaChlbGVtZW50KTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcHJvcGVydHlDb25maWc7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHNldEZsb3dFbGVFbnRpdHkob2JqOiBQcm9wZXJ0eUVudGl0eVtdKSB7XHJcbiAgICBpZiAob2JqICYmIG9iai5sZW5ndGggPiAwKSB7XHJcbiAgICAgIG9iai5mb3JFYWNoKChpdGVtOiBQcm9wZXJ0eUVudGl0eSkgPT4ge1xyXG4gICAgICAgIHN3aXRjaCAoaXRlbS5wcm9wZXJ0eUlEKSB7XHJcbiAgICAgICAgICBjYXNlIFJlc291cmNlS2V5cy5Db25kaXRpb25FeHByZXNzaW9uOiAgICAgICAgICAgICAgICAgIC8vIOadoeS7tuihqOi+vuW8j1xyXG4gICAgICAgICAgICBpdGVtLmVkaXRvciA9IEV4cHJlc3Npb25FZGl0b3JDb21wb25lbnQ7XHJcbiAgICAgICAgICAgIGl0ZW0uY29udmVydGVyID0gbmV3IEV4cHJlc3Npb25FZGl0b3JDb252ZXJ0ZXIoKTtcclxuICAgICAgICAgICAgaXRlbS5lZGl0b3JQYXJhbXMgPSB7fTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlIFJlc291cmNlS2V5cy53Zl9FeGVjdXRlRm9ybXNfUEM6ICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOW8gOWni+a0u+WKqOeahOihqOWNleaehOS7tlxyXG4gICAgICAgICAgICBpdGVtLmVkaXRvciA9IEV4ZWN1dGVGb3Jtc0NvbXBvbmVudDtcclxuICAgICAgICAgICAgaXRlbS5jb252ZXJ0ZXIgPSBuZXcgRXhlY3V0ZUZvcm1zQ29udmVydGVyKCk7XHJcbiAgICAgICAgICAgIGl0ZW0uZWRpdG9yUGFyYW1zID0ge1xyXG4gICAgICAgICAgICAgIGxvY2F0aW9uOiAnc3RhcnRBY3Rpdml0eScsXHJcbiAgICAgICAgICAgICAgdGFiOiAnd2ViJ1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgUmVzb3VyY2VLZXlzLndmX0V4ZWN1dGVGb3Jtc19Nb2JpbGU6ICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOW8gOWni+a0u+WKqOeahOihqOWNleaehOS7tlxyXG4gICAgICAgICAgICBpdGVtLmVkaXRvciA9IEV4ZWN1dGVGb3Jtc0NvbXBvbmVudDtcclxuICAgICAgICAgICAgaXRlbS5jb252ZXJ0ZXIgPSBuZXcgRXhlY3V0ZUZvcm1zQ29udmVydGVyKCk7XHJcbiAgICAgICAgICAgIGl0ZW0uZWRpdG9yUGFyYW1zID0ge1xyXG4gICAgICAgICAgICAgIGxvY2F0aW9uOiAnc3RhcnRBY3Rpdml0eScsXHJcbiAgICAgICAgICAgICAgdGFiOiAnbW9iaWxlJ1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgUmVzb3VyY2VLZXlzLnNlbmRCYWNrZWRUYXNrOiAgICAgICAgICAgICAgICAgICAgICAgICAvLyDlvIDlp4vmtLvliqjnmoTlj5HpgIHpqbPlm57ku7vliqFcclxuICAgICAgICAgICAgaXRlbS5pdGVyYXRvciA9IHRoaXMudWlTdGF0ZS5ib29sSXRlcmF0b3I7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgY2FzZSBSZXNvdXJjZUtleXMuU2VsZWN0VGFyZ2V0QWJsZTogLy8g5YWB6K646Lez6L2sXHJcbiAgICAgICAgICAgIGl0ZW0uaXRlcmF0b3IgPSB0aGlzLnVpU3RhdGUuYm9vbEl0ZXJhdG9yO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgUmVzb3VyY2VLZXlzLkp1bXBTY29wZTogLy8g6Lez6L2s6KeE5YiZXHJcbiAgICAgICAgICAgIGl0ZW0uZWRpdG9yID0gSnVtcFNjb3BlQ29tcG9uZW50O1xyXG4gICAgICAgICAgICBpdGVtLmNvbnZlcnRlciA9IG5ldyBKdW1wU2NvcGVDb252ZXJ0ZXIoKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlIFJlc291cmNlS2V5cy5EZWZhdWx0OiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOm7mOiupOWIhuaUr1xyXG4gICAgICAgICAgICBpdGVtLml0ZXJhdG9yID0gdGhpcy51aVN0YXRlLmJvb2xJdGVyYXRvcjtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICBpdGVtLmVkaXRvciA9IEV4dGVuZFByb3BlcnR5Q29tcG9uZW50O1xyXG4gICAgICAgICAgICBpdGVtLmNvbnZlcnRlciA9IG5ldyBFeHRlbmRQcm9wZXJ0eUNvbnZlcnRlcigpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6K6+572u5a6h5om55rS75Yqo6IqC54K555qE5bGe5oCn5qGGXHJcbiAgICogQHBhcmFtIG9ialxyXG4gICAqL1xyXG4gIHNldFVzZXJBY3Rpdml0eVByb3BlcnR5KG9iajogYW55KSB7XHJcbiAgICBpZiAob2JqLnByb3BlcnR5RGF0YS5BcHByb3ZhbEl0ZW1zKSB7XHJcbiAgICAgIHRoaXMuYnVpbGRBcHByb3ZhbEl0ZW1zKG9iai5wcm9wZXJ0eURhdGEuQXBwcm92YWxJdGVtcyk7XHJcbiAgICAgIHRoaXMuYnVpbGRDb3VudGVyU2lnblZhcmlhYmxlcyhvYmoucHJvcGVydHlEYXRhLkFwcHJvdmFsSXRlbXMpO1xyXG4gICAgICB0aGlzLmJ1aWxkU2lnblJ1bGVzKG9iai5wcm9wZXJ0eURhdGEuU2lnblJ1bGUpOyAvLyDorr7nva7kvJrnrb7op4TliJnnmoTnu5PorrrlkI3np7BcclxuICAgIH1cclxuICAgIHRoaXMudWlTdGF0ZS5wcm9wZXJ0eURhdGEgPSBvYmoucHJvcGVydHlEYXRhO1xyXG4gICAgdGhpcy51aVN0YXRlLmJpekFjdGl2aXR5SWQgPSBvYmoucHJvcGVydHlEYXRhLkJpekFjdGl2aXR5SUQ7XHJcbiAgICB0aGlzLnVpU3RhdGUucHJvcGVydHlDb25maWcgPSB0aGlzLnNldFVzZXJBY3RDb25maWcob2JqLnByb3BlcnR5Q29uZmlnKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc2V0VXNlckFjdENvbmZpZyhvYmo6IGFueVtdKTogRWxlbWVudFByb3BlcnR5Q29uZmlnW10ge1xyXG4gICAgY29uc3QgcHJvcGVydHlDb25maWc6IEVsZW1lbnRQcm9wZXJ0eUNvbmZpZ1tdID0gW107XHJcbiAgICBpZiAob2JqKSB7XHJcbiAgICAgIG9iai5mb3JFYWNoKChlbGVtZW50OiBFbGVtZW50UHJvcGVydHlDb25maWcpID0+IHtcclxuICAgICAgICB0aGlzLnNldFVzZXJBY3RFbnRpdHkoZWxlbWVudC5wcm9wZXJ0aWVzKTtcclxuICAgICAgICBwcm9wZXJ0eUNvbmZpZy5wdXNoKGVsZW1lbnQpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBwcm9wZXJ0eUNvbmZpZztcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc2V0VXNlckFjdEVudGl0eShvYmo6IFByb3BlcnR5RW50aXR5W10pIHtcclxuICAgIGlmIChvYmogJiYgb2JqLmxlbmd0aCA+IDApIHtcclxuICAgICAgb2JqLmZvckVhY2goKGl0ZW06IFByb3BlcnR5RW50aXR5KSA9PiB7XHJcbiAgICAgICAgc3dpdGNoIChpdGVtLnByb3BlcnR5SUQpIHtcclxuICAgICAgICAgIGNhc2UgUmVzb3VyY2VLZXlzLlBhcnRpY2lwYW50U2NoZW1lczogLy8g5Y+C5LiO6ICFXHJcbiAgICAgICAgICAgIGl0ZW0uZWRpdG9yID0gUGVyZm9ybWVyQ29tcG9uZW50O1xyXG4gICAgICAgICAgICBpdGVtLmNvbnZlcnRlciA9IG5ldyBQZXJmb3JtZXJDb252ZXJ0ZXIoKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlIFJlc291cmNlS2V5cy53Zl9FeGVjdXRlRm9ybXNfUEM6IC8vIOihqOWNleWumuS5iVxyXG4gICAgICAgICAgICBpdGVtLmVkaXRvciA9IEV4ZWN1dGVGb3Jtc0NvbXBvbmVudDtcclxuICAgICAgICAgICAgaXRlbS5jb252ZXJ0ZXIgPSBuZXcgRXhlY3V0ZUZvcm1zQ29udmVydGVyKCk7XHJcbiAgICAgICAgICAgIGl0ZW0uZWRpdG9yUGFyYW1zID0ge1xyXG4gICAgICAgICAgICAgIGxvY2F0aW9uOiAndXNlckFjdGl2aXR5JyxcclxuICAgICAgICAgICAgICB0YWI6ICd3ZWInXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgY2FzZSBSZXNvdXJjZUtleXMud2ZfRXhlY3V0ZUZvcm1zX01vYmlsZTogLy8g6KGo5Y2V5a6a5LmJXHJcbiAgICAgICAgICAgIGl0ZW0uZWRpdG9yID0gRXhlY3V0ZUZvcm1zQ29tcG9uZW50O1xyXG4gICAgICAgICAgICBpdGVtLmNvbnZlcnRlciA9IG5ldyBFeGVjdXRlRm9ybXNDb252ZXJ0ZXIoKTtcclxuICAgICAgICAgICAgaXRlbS5lZGl0b3JQYXJhbXMgPSB7XHJcbiAgICAgICAgICAgICAgbG9jYXRpb246ICd1c2VyQWN0aXZpdHknLFxyXG4gICAgICAgICAgICAgIHRhYjogJ21vYmlsZSdcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlIFJlc291cmNlS2V5cy5Bc3NpZ25TdHJhdGVneTogLy8g5YiG6YWN562W55WlXHJcbiAgICAgICAgICAgIGl0ZW0uaXRlcmF0b3IgPSB0aGlzLnVpU3RhdGUuYXNzaWduSXRlcmF0b3I7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgY2FzZSBSZXNvdXJjZUtleXMuT3BlcmF0b3JDb25maWc6IC8vIOaMh+a0vuinhOWImVxyXG4gICAgICAgICAgICBpdGVtLmVkaXRvciA9IEFzc2lnblBlcmZvcm1lckNvbmZpZ0NvbXBvbmVudDtcclxuICAgICAgICAgICAgaXRlbS5jb252ZXJ0ZXIgPSBuZXcgQXNzaWduQ29uZmlnQ29udmVydGVyKCk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgY2FzZSBSZXNvdXJjZUtleXMuQ29tcGxldGVTdHJhdGVneTogLy8g5a6M5oiQ562W55WlXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnVpU3RhdGUucHJvcGVydHlEYXRhLkFzc2lnblN0cmF0ZWd5ID09PSB0aGlzLnVpU3RhdGUuYXNzaWduSXRlcmF0b3JbMl0ua2V5KSB7XHJcbiAgICAgICAgICAgICAgaXRlbS5pdGVyYXRvciA9IHRoaXMudWlTdGF0ZS5jb21wbGV0ZUl0ZXJhdG9yNENsYWltOyAvLyDliIbphY3nrZbnlaXkuLrpoobnlKjml7bvvIzlrozmiJDnrZbnlaXlj6rog73mmK/miqLljaDmqKHlvI9cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBpdGVtLml0ZXJhdG9yID0gdGhpcy51aVN0YXRlLmNvbXBsZXRlSXRlcmF0b3I7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlIFJlc291cmNlS2V5cy5TaWduUnVsZTogLy8g5Lya562+6KeE5YiZXHJcbiAgICAgICAgICAgIGl0ZW0uZWRpdG9yID0gU2lnblJ1bGVDb21wb25lbnQ7XHJcbiAgICAgICAgICAgIGl0ZW0uY29udmVydGVyID0gbmV3IFNpZ25SdWxlQ29udmVydGVyKCk7XHJcbiAgICAgICAgICAgIGl0ZW0uZWRpdG9yUGFyYW1zID0ge1xyXG4gICAgICAgICAgICAgIHZhcmlhYmxlczogdGhpcy51aVN0YXRlLmNvdW50ZXJTaWduVmFyaWFibGVzLFxyXG4gICAgICAgICAgICAgIGFwcHJvdmFsSXRlbXM6IHRoaXMudWlTdGF0ZS5hcHByb3ZhbEl0ZW1zXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgY2FzZSBSZXNvdXJjZUtleXMuQXBwcm92YWxJdGVtczogLy8g5a6h5om56aG5XHJcbiAgICAgICAgICAgIGl0ZW0uZWRpdG9yID0gQXBwcm92ZWxJdGVtc0NvbXBvbmVudDtcclxuICAgICAgICAgICAgaXRlbS5jb252ZXJ0ZXIgPSBuZXcgQXBwcm92ZWxJdGVtc0NvbnZlcnRlcigpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgUmVzb3VyY2VLZXlzLlJldHJpZXZhYmxlOiAvLyDlhYHorrjlj5blm55cclxuICAgICAgICAgICAgaXRlbS5pdGVyYXRvciA9IHRoaXMudWlTdGF0ZS5ib29sSXRlcmF0b3I7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgY2FzZSBSZXNvdXJjZUtleXMuQWRkU2lnbkZyb250QWJsZTogLy8g5YWB6K645b6B6K+iXHJcbiAgICAgICAgICAgIGl0ZW0uZWRpdG9yID0gT3JnYW5pemF0aW9uUG90ZW50aWFsT3duZXJDb21wb25lbnQ7XHJcbiAgICAgICAgICAgIGl0ZW0uY29udmVydGVyID0gbmV3IE9yZ2FuaXphdGlvblBvdGVudGlhbE93bmVyQ29udmVydGVyKCk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgY2FzZSBSZXNvdXJjZUtleXMuQWRkU2lnbkJlaGluZEFibGU6IC8vIOWFgeiuuOWKoOetvlxyXG4gICAgICAgICAgICBpdGVtLmVkaXRvciA9IE9yZ2FuaXphdGlvblBvdGVudGlhbE93bmVyQ29tcG9uZW50O1xyXG4gICAgICAgICAgICBpdGVtLmNvbnZlcnRlciA9IG5ldyBPcmdhbml6YXRpb25Qb3RlbnRpYWxPd25lckNvbnZlcnRlcigpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgUmVzb3VyY2VLZXlzLk5vdGlmeUFibGU6IC8vIOWFgeiuuOefpeS8mlxyXG4gICAgICAgICAgICBpdGVtLmVkaXRvciA9IE9yZ2FuaXphdGlvblBvdGVudGlhbE93bmVyQ29tcG9uZW50O1xyXG4gICAgICAgICAgICBpdGVtLmNvbnZlcnRlciA9IG5ldyBPcmdhbml6YXRpb25Qb3RlbnRpYWxPd25lckNvbnZlcnRlcigpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgUmVzb3VyY2VLZXlzLnRyYW5zZmVyU2NvcGU6IC8vIOenu+S6pOiMg+WbtFxyXG4gICAgICAgICAgICBpdGVtLmVkaXRvciA9IE9yZ2FuaXphdGlvblBvdGVudGlhbE93bmVyQ29tcG9uZW50O1xyXG4gICAgICAgICAgICBpdGVtLmNvbnZlcnRlciA9IG5ldyBPcmdhbml6YXRpb25Qb3RlbnRpYWxPd25lckNvbnZlcnRlcigpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgUmVzb3VyY2VLZXlzLlNlbGVjdEJyYW5jaDogIC8vIOWFgeiuuOaMh+WumuWQjue7reWIhuaUr1xyXG4gICAgICAgICAgICBpdGVtLml0ZXJhdG9yID0gdGhpcy51aVN0YXRlLmJvb2xJdGVyYXRvcjtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlIFJlc291cmNlS2V5cy5TZWxlY3RUYXJnZXRBYmxlOiAvLyDlhYHorrjot7PovaxcclxuICAgICAgICAgICAgaWYgKHRoaXMudWlTdGF0ZS5wcm9wZXJ0eURhdGEuQ29tcGxldGVTdHJhdGVneVxyXG4gICAgICAgICAgICAgICYmIHRoaXMudWlTdGF0ZS5wcm9wZXJ0eURhdGEuQ29tcGxldGVTdHJhdGVneSAhPT0gdGhpcy51aVN0YXRlLmNvbXBsZXRlSXRlcmF0b3JbMF0ua2V5KSB7XHJcbiAgICAgICAgICAgICAgaXRlbS5pdGVyYXRvciA9IHRoaXMudWlTdGF0ZS5ub0p1bXA0U2lnbjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBpdGVtLml0ZXJhdG9yID0gdGhpcy51aVN0YXRlLmJvb2xJdGVyYXRvcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgUmVzb3VyY2VLZXlzLkp1bXBTY29wZTogLy8g6Lez6L2s6KeE5YiZXHJcbiAgICAgICAgICAgIGl0ZW0uZWRpdG9yID0gSnVtcFNjb3BlQ29tcG9uZW50O1xyXG4gICAgICAgICAgICBpdGVtLmNvbnZlcnRlciA9IG5ldyBKdW1wU2NvcGVDb252ZXJ0ZXIoKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlIFJlc291cmNlS2V5cy5CYWNrV2FyZFJ1bGU6IC8vIOmps+WbnuinhOWImVxyXG4gICAgICAgICAgICBpdGVtLmVkaXRvciA9IEJhY2t3YXJkUnVsZUNvbXBvbmVudDtcclxuICAgICAgICAgICAgaXRlbS5jb252ZXJ0ZXIgPSBuZXcgQmFja3dhcmRSdWxlQ29udmVydGVyKCk7XHJcbiAgICAgICAgICAgIGl0ZW0uZWRpdG9yUGFyYW1zID0ge1xyXG4gICAgICAgICAgICAgIG5vZGVUeXBlOiAnVXNlckFjdGl2aXR5J1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgUmVzb3VyY2VLZXlzLndmX1RpdGxlRXhwcmVzc2lvbjpcclxuICAgICAgICAgICAgaXRlbS5lZGl0b3IgPSBUaXRsZUV4cHJlc3Npb25Db21wb25lbnQ7XHJcbiAgICAgICAgICAgIGl0ZW0uY29udmVydGVyID0gbmV3IFRpdGxlRXhwcmVzc2lvbkNvbnZlcnRlcigpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgUmVzb3VyY2VLZXlzLlRvb2xzOiAvLyDmtLvliqjmnoTku7ZcclxuICAgICAgICAgICAgaXRlbS5lZGl0b3IgPSBBY3Rpdml0eUNvbXBvbmVudENvbXBvbmVudDtcclxuICAgICAgICAgICAgaXRlbS5jb252ZXJ0ZXIgPSBuZXcgQWN0aXZpdHlDb21wb25lbnRDb252ZXJ0ZXIoKTtcclxuICAgICAgICAgICAgaXRlbS5lZGl0b3JQYXJhbXMgPSB7XHJcbiAgICAgICAgICAgICAgbG9jYXRpb246ICdhY3Rpdml0eSdcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlIFJlc291cmNlS2V5cy53Zl9DdXN0b21pemVBY3Rpb246IC8vIOa0u+WKqOaehOS7tlxyXG4gICAgICAgICAgICBpdGVtLmVkaXRvciA9IEN1c3RvbWl6ZUFjdGlvbkNvbXBvbmVudDtcclxuICAgICAgICAgICAgaXRlbS5jb252ZXJ0ZXIgPSBuZXcgQ3VzdG9taXplQWN0aW9uQ29udmVydGVyKCk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgY2FzZSBSZXNvdXJjZUtleXMudGltZUxpbWl0Q29udHJvbDogLy8g6LaF5pe26aKE6K2mXHJcbiAgICAgICAgICAgIGl0ZW0uZWRpdG9yID0gVGltZUxpbWl0Q29udHJvbENvbXBvbmVudDtcclxuICAgICAgICAgICAgaXRlbS5jb252ZXJ0ZXIgPSBuZXcgVGltZUxpbWl0Q29udHJvbENvbnZlcnRlcigpO1xyXG4gICAgICAgICAgICBpdGVtLmVkaXRvclBhcmFtcyA9IHtcclxuICAgICAgICAgICAgICBsb2NhdGlvbjogJ2FjdGl2aXR5J1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgUmVzb3VyY2VLZXlzLmFub255bW91c1NldDogLy8g5Yy/5ZCN6K6+572uXHJcbiAgICAgICAgICAgIGl0ZW0uZWRpdG9yID0gQW5vbnltb3VzU2V0Q29tcG9uZW50O1xyXG4gICAgICAgICAgICBpdGVtLmNvbnZlcnRlciA9IG5ldyBBbm9ueW1vdXNTZXRDb252ZXJ0ZXIoKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlIFJlc291cmNlS2V5cy52YXJpYWJsZVNldHRpbmdzOiAvLyDlj5jph4/orr7nva5cclxuICAgICAgICAgICAgaXRlbS5lZGl0b3IgPSBWYXJpYWJsZVNldHRpbmdDb21wb25lbnQ7XHJcbiAgICAgICAgICAgIGl0ZW0uY29udmVydGVyID0gbmV3IFZhcmlhYmxlU2V0dGluZ0NvbnZlcnRlcigpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgUmVzb3VyY2VLZXlzLm1lc3NhZ2VOb3RpY2U6IC8vIOa2iOaBr+mAmuefpVxyXG4gICAgICAgICAgICBpdGVtLmVkaXRvciA9IE1lc3NhZ2VOb3RpY2VDb21wb25lbnQ7XHJcbiAgICAgICAgICAgIGl0ZW0uY29udmVydGVyID0gbmV3IE1lc3NhZ2VOb3RpY2VDb252ZXJ0ZXIoKTtcclxuICAgICAgICAgICAgaXRlbS5lZGl0b3JQYXJhbXMgPSB7XHJcbiAgICAgICAgICAgICAgbG9jYXRpb246ICdhY3Rpdml0eSdcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlIFJlc291cmNlS2V5cy5hcHByb3ZhbFBpdm90Q29uZmlnOiAvLyDlrqHmibnopoHngrlcclxuICAgICAgICAgICAgaXRlbS5lZGl0b3IgPSBBcHByb3ZhbFBpdm90Q29tcG9uZW50O1xyXG4gICAgICAgICAgICBpdGVtLmNvbnZlcnRlciA9IG5ldyBBcHByb3ZhbFBpdm90Q29udmVydGVyKCk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgY2FzZSBSZXNvdXJjZUtleXMuRGlzcGxheVRlcm1pbmFsOiAvLyDmmL7npLrnu4jnq69cclxuICAgICAgICAgICAgaXRlbS5pdGVyYXRvciA9IHRoaXMudWlTdGF0ZS5kaXNwbGF5VGVybWluYWw7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgY2FzZSBSZXNvdXJjZUtleXMudXJnZUhhbmRsZVJ1bGU6IC8vIOaYvuekuue7iOerr1xyXG4gICAgICAgICAgICBpdGVtLmVkaXRvciA9IFVyZ2VIYW5kbGVSdWxlQ29tcG9uZW50O1xyXG4gICAgICAgICAgICBpdGVtLmNvbnZlcnRlciA9IG5ldyBVcmdlSGFuZGxlUnVsZUNvbnZlcnRlcigpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIGl0ZW0uZWRpdG9yID0gRXh0ZW5kUHJvcGVydHlDb21wb25lbnQ7XHJcbiAgICAgICAgICAgIGl0ZW0uY29udmVydGVyID0gbmV3IEV4dGVuZFByb3BlcnR5Q29udmVydGVyKCk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDliJvlu7rkvJrnrb7op4TliJnlj5jph49cclxuICAgKi9cclxuICBidWlsZENvdW50ZXJTaWduVmFyaWFibGVzKGNvbmNsdXNpb25zOiBhbnlbXSkge1xyXG4gICAgdGhpcy51aVN0YXRlLmNvdW50ZXJTaWduVmFyaWFibGVzID0gW107XHJcbiAgICB0aGlzLnVpU3RhdGUuY291bnRlclNpZ25WYXJpYWJsZXMgPSB0aGlzLnVpU3RhdGUuY291bnRlclNpZ25WYXJpYWJsZXMuY29uY2F0KFt7XHJcbiAgICAgIGtleTogJ25yT2ZJbnN0YW5jZXMnLFxyXG4gICAgICBuYW1lOiAn5oC75Lu75Yqh5pWwJyxcclxuICAgICAgZGVzY3JpcHRpb246ICfmgLvku7vliqHmlbAnXHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogJ25yT2ZDb21wbGV0ZWRJbnN0YW5jZXMnLFxyXG4gICAgICBuYW1lOiAn5bey5a6M5oiQ5Lu75Yqh5pWwJyxcclxuICAgICAgZGVzY3JpcHRpb246ICflt7LlrozmiJDku7vliqHmlbAnXHJcbiAgICB9XHJcbiAgICBdKTtcclxuICAgIGlmIChjb25jbHVzaW9ucyAmJiBjb25jbHVzaW9ucy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGZvciAoY29uc3QgY29uY2x1c2lvbiBvZiBjb25jbHVzaW9ucykge1xyXG4gICAgICAgIGNvbnN0IHZhcmlhYmxlID0gbmV3IFZhckVudGl0eSgpO1xyXG4gICAgICAgIHZhcmlhYmxlLmtleSA9IGBuck9mJHtjb25jbHVzaW9uLlZhbHVlfWA7XHJcbiAgICAgICAgdmFyaWFibGUubmFtZSA9IGAke2NvbmNsdXNpb24uVGV4dH1f5Lu75Yqh5pWwYDtcclxuICAgICAgICB2YXJpYWJsZS5kZXNjcmlwdGlvbiA9IGAke2NvbmNsdXNpb24uVGV4dH1f5Lu75Yqh5pWwYDtcclxuICAgICAgICB0aGlzLnVpU3RhdGUuY291bnRlclNpZ25WYXJpYWJsZXMucHVzaCh2YXJpYWJsZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWIm+W7uuiHquWumuS5iemhuVxyXG4gICAqIEBwYXJhbSBjb25jbHVzaW9uc1xyXG4gICAqL1xyXG4gIGJ1aWxkQXBwcm92YWxJdGVtcyhjb25jbHVzaW9uczogYW55W10pIHtcclxuICAgIHRoaXMudWlTdGF0ZS5hcHByb3ZhbEl0ZW1zID0gW107XHJcbiAgICBpZiAoY29uY2x1c2lvbnMgJiYgY29uY2x1c2lvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgY29uY2x1c2lvbnMpIHtcclxuICAgICAgICBjb25zdCBjb25jbHVzaW9uID0gbmV3IEFwcHJvdmFsSXRlbUVudGl0eSgpO1xyXG4gICAgICAgIGNvbmNsdXNpb24udmFsdWUgPSBpdGVtLlZhbHVlO1xyXG4gICAgICAgIGNvbmNsdXNpb24udGV4dCA9IGl0ZW0uVGV4dDtcclxuICAgICAgICBjb25jbHVzaW9uLndvcmtGbG93QWN0aW9uID0gaXRlbS5Xb3JrRmxvd0FjdGlvbjtcclxuICAgICAgICBjb25jbHVzaW9uLmlzRGVmYXVsdCA9IGl0ZW0uSXNEZWZhdWx0O1xyXG4gICAgICAgIHRoaXMudWlTdGF0ZS5hcHByb3ZhbEl0ZW1zLnB1c2goY29uY2x1c2lvbik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOS8muetvuinhOWImee7keWumuWuoeaJuemhueWQjeensFxyXG4gICAqIEBwYXJhbSBzaWduUnVsZXMg5Lya562+6KeE5YiZXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBidWlsZFNpZ25SdWxlcyhzaWduUnVsZXM6IGFueVtdKSB7XHJcbiAgICBpZiAoc2lnblJ1bGVzICYmIHNpZ25SdWxlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGZvciAoY29uc3Qgc2lnblJ1bGUgb2Ygc2lnblJ1bGVzKSB7XHJcbiAgICAgICAgY29uc3QgYXBwcm92YWxJdGVtOiBBcHByb3ZhbEl0ZW1FbnRpdHkgPSB0aGlzLnVpU3RhdGUuYXBwcm92YWxJdGVtcy5maW5kKGl0ZW0gPT4gaXRlbS52YWx1ZSA9PT0gc2lnblJ1bGUuQ29uY2x1c2lvblZhbHVlKTtcclxuICAgICAgICAvLyBpZiAoIWFwcHJvdmFsSXRlbSkge1xyXG4gICAgICAgIC8vICAgICB0aGlzLm1lc3NhZ2UuaW5mbygn5a6h5om56aG55Y+R55Sf5pS55Y+Y77yM6K+36LCD5pW05Lya562+6KeE5YiZ77yBJyk7XHJcbiAgICAgICAgLy8gfVxyXG4gICAgICAgIGlmIChhcHByb3ZhbEl0ZW0pIHtcclxuICAgICAgICAgIHNpZ25SdWxlLkNvbmNsdXNpb25OYW1lID0gYXBwcm92YWxJdGVtLnRleHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxufVxyXG4iXX0=