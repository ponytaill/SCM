{"version":3,"file":"gsp-wf-ui-flowchart.js.map","sources":["ng://@gsp-wf/ui-flowchart/lib/services/i18n/en.ts","ng://@gsp-wf/ui-flowchart/lib/services/i18n/zh-cht.ts","ng://@gsp-wf/ui-flowchart/lib/services/i18n/zh-chs.ts","ng://@gsp-wf/ui-flowchart/lib/services/i18n/index.ts","ng://@gsp-wf/ui-flowchart/lib/services/ui-flowchart.service.ts","ng://@gsp-wf/ui-flowchart/lib/wf-flowchart.service.ts","ng://@gsp-wf/ui-flowchart/lib/task-flowchart/task-flowchart.component.ts","ng://@gsp-wf/ui-flowchart/lib/services/translate.pipe.ts","ng://@gsp-wf/ui-flowchart/lib/ui-flowchart.module.ts","ng://@gsp-wf/ui-flowchart/lib/entity/forecast-process-payload.ts"],"sourcesContent":["export const en = {\r\n    static: {\r\n        approvalLogs: {\r\n            title: 'Approval Logs',\r\n            approvalOpinion: 'Approval opinion',\r\n            startTime: 'StartTime',\r\n            endTime: 'EndTime',\r\n            todo: 'Todo',\r\n            done: 'Done',\r\n            toAssign: 'To Assign'\r\n        },\r\n        flowchart: {\r\n            title: 'Flow Chart',\r\n            processNotFound: 'process instance id is null',\r\n            flowChart: 'Flow Chart',\r\n            complete: 'Hide Calculated Route',\r\n            simulation: 'Show Calculated Route',\r\n            sequenceColor: 'Description Of Sequence Color',\r\n            completed: 'Completed',\r\n            calculate: 'Calculate Route',\r\n            default: 'Default',\r\n            suspend: 'Calculate Suspend',\r\n            noProcess: 'Process definition not found!',\r\n            list: 'Process List',\r\n            noDataId: 'form id is null',\r\n            noBizDefKey: 'process category id is null'\r\n        }\r\n    }\r\n};\r\n","export const zh_CHT = {\r\n    static: {\r\n        approvalLogs: {\r\n            title: 'å¯©æ¹è¨é',\r\n            approvalOpinion: 'å¯©æ¹æè¦',\r\n            startTime: 'æ¥æ¶æé',\r\n            endTime: 'èçæé',\r\n            todo: 'å¾è¾¦ç',\r\n            done: 'å·²è¾¦ç',\r\n            toAssign: 'æªææ´¾'\r\n        },\r\n        flowchart: {\r\n            title: 'æ¥çæµç¨',\r\n            processNotFound: 'æµç¨å¯¦ä¾IDçºç©º',\r\n            dataIdIsNull: 'å®æå§ç¢¼çºç©º',\r\n            flowChart: 'æµç¨å',\r\n            complete: 'é±èè¨ç®è·¯ç·',\r\n            simulation: 'é¡¯ç¤ºè¨ç®è·¯ç·',\r\n            sequenceColor: 'åæ¯ç·é¡è²èªªæ',\r\n            completed: 'å·²éè¡',\r\n            calculate: 'è¨ç®è·¯ç·',\r\n            default: 'é»èª',\r\n            suspend: 'è¨ç®ä¸­æ·',\r\n            noProcess: 'æªæ¾å°ç¬¦åæ¢ä»¶çæµç¨å®ç¾©ï¼',\r\n            list: 'æµç¨åè¡¨',\r\n            noDataId: 'å®æå§ç¢¼çºç©º',\r\n            noBizDefKey: 'æµç¨åé¡IDçºç©º'\r\n        }\r\n    }\r\n};\r\n","export const zh_CHS = {\r\n    static: {\r\n        approvalLogs: {\r\n            title: 'å®¡æ¹è®°å½',\r\n            approvalOpinion: 'å®¡æ¹æè§',\r\n            startTime: 'æ¥æ¶æ¶é´',\r\n            endTime: 'å¤çæ¶é´',\r\n            todo: 'å¾åç',\r\n            done: 'å·²åç',\r\n            toAssign: 'æªææ´¾'\r\n        },\r\n        flowchart: {\r\n            title: 'æ¥çæµç¨',\r\n            processNotFound: 'æµç¨å®ä¾IDä¸ºç©º',\r\n            dataIdIsNull: 'åæ®åç ä¸ºç©º',\r\n            flowChart: 'æµç¨å¾',\r\n            complete: 'éèè®¡ç®è·¯çº¿',\r\n            simulation: 'æ¾ç¤ºè®¡ç®è·¯çº¿',\r\n            sequenceColor: 'åæ¯çº¿é¢è²è¯´æ',\r\n            completed: 'å·²è¿è¡',\r\n            calculate: 'è®¡ç®è·¯çº¿',\r\n            default: 'é»è®¤',\r\n            suspend: 'è®¡ç®ä¸­æ­',\r\n            noProcess: 'æªæ¾å°ç¬¦åæ¡ä»¶çæµç¨å®ä¹ï¼',\r\n            list: 'æµç¨åè¡¨',\r\n            noDataId: 'åæ®åç ä¸ºç©º',\r\n            noBizDefKey: 'æµç¨åç±»IDä¸ºç©º'\r\n        }\r\n    }\r\n};\r\n","import { en } from './en';\r\nimport { zh_CHT } from './zh-cht';\r\nimport { zh_CHS } from './zh-chs';\r\n\r\nexport const translate = {\r\n    'zh-CHS': zh_CHS,\r\n    'en': en,\r\n    'zh-CHT': zh_CHT\r\n};\r\n","import { Injectable } from '@angular/core';\r\nimport { Observable, from, of } from 'rxjs';\r\nimport { HttpService } from '@ecp-caf/caf-common';\r\nimport { translate } from './i18n/index';\r\nimport { ForecastProcessPayload } from '../entity/forecast-process-payload';\r\nimport { map } from 'rxjs/operators';\r\n\r\n@Injectable()\r\nexport class UiFlowchartService {\r\n\r\n  constructor(private httpSvc: HttpService) { }\r\n\r\n  getForecastProcessListByPayload(payload: ForecastProcessPayload): Observable<any> {\r\n    const url = '/api/runtime/wf/v1.0/processInstances/startProcess-simulation';\r\n    return this.httpSvc.post(url, payload).pipe(\r\n      map((re: any) => re.procDefs)\r\n    );\r\n  }\r\n\r\n  getRuntimeProcInstsByDataId(dataId: string): Observable<any> {\r\n    if (dataId) {\r\n      const url = `/api/runtime/wf/v1.0/processInstances/runtimeProcInstList?dataId=${dataId}`;\r\n      return this.httpSvc.get(url);\r\n    } else {\r\n      return from(new Array());\r\n    }\r\n  }\r\n\r\n  getHistoricProcInstsByDataId(dataId: string): Observable<any> {\r\n    if (dataId) {\r\n      const url = `/api/runtime/wf/v1.0/processInstances/historicProcInstList?dataId=${dataId}`;\r\n      return this.httpSvc.get(url);\r\n    } else {\r\n      return from(new Array());\r\n    }\r\n  }\r\n\r\n  /**\r\n   * åºäºæµç¨å®ä¾IDè·åæµç¨å®ä¾\r\n   * @param procInstId æµç¨å®ä¾id\r\n   */\r\n  getProcInstanceById(procInstId: string): Observable<any> {\r\n    const url = `/api/runtime/wf/v1.0/processInstances/${procInstId}`;\r\n    return this.httpSvc.get(url);\r\n  }\r\n  /**\r\n   * åºäºæµç¨å®ä¾IDè·åbpmnModel\r\n   */\r\n  getBpmnModelbyProcInstId(procInstId: string): Observable<any> {\r\n    const url = `/api/runtime/wf/v1.0/processInstances/${procInstId}/bpmnModel`;\r\n    return this.httpSvc.get(url);\r\n  }\r\n\r\n  /**\r\n   * åºäºæµç¨å®ä¹IDè·åbpmnModel\r\n   */\r\n  getBpmnModelbyProcDefId(procDefId: string): Observable<any> {\r\n    const url = `/api/runtime/wf/v1.0/procDefs/${procDefId}/bpmnModel`;\r\n    return this.httpSvc.get(url);\r\n  }\r\n\r\n  getSubProcessInstance(superActInstId: string, superProcInstId: string): Observable<any> {\r\n    if (superActInstId) {\r\n      const url = `/api/runtime/wf/v1.0/processInstances/subProcInst?superActInstId=${superActInstId}&superProcInstId=${superProcInstId}`;\r\n      return this.httpSvc.get(url);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * è·åææåå«é¢è§£æçæµç¨å®ä¾ä¿¡æ¯\r\n   */\r\n  getForecastProcessByProcInstId(procInstId: string): Observable<any> {\r\n    const url = `/api/runtime/wf/v1.0/processInstances/${procInstId}/forecastProcess`;\r\n    return this.httpSvc.get(url);\r\n  }\r\n\r\n  /**\r\n   * è·åæµç¨é¢æµæ°æ®\r\n   */\r\n  getForecastProcessByPayload(payload: any) {\r\n    const url = '/api/runtime/wf/v1.0/processInstances/forecastProcess';\r\n    return this.httpSvc.post(url, payload);\r\n  }\r\n\r\n  getCompleteProcessInfoByProcInstId(procInstId: string): Observable<any> {\r\n    const url = `/api/runtime/wf/v1.0/processInstances/${procInstId}/flowChartInfo`;\r\n    return this.httpSvc.get(url);\r\n  }\r\n\r\n  /**\r\n   * åºäºæµç¨å®ä¾Idè·åæææ´»å¨å®ä¾\r\n   * @param procInstId procInstId\r\n   */\r\n  getAllActiInstsbyProcInstId(procInstId: string): Observable<any> {\r\n    const url = `/api/runtime/wf/v1.0/processInstances/${procInstId}/activityInstanceSlims`;\r\n    return this.httpSvc.get(url);\r\n  }\r\n\r\n  /**\r\n   * åºäºæµç¨å®ä¾IDè·åææçæµè½¬å®ä¾\r\n   * @param procInstId procInstId\r\n   */\r\n  getTransitionInstanceSlimsByProcInstId(procInstId: string): Observable<any> {\r\n    const url = `/api/runtime/wf/v1.0/processInstances/${procInstId}/transitionInstanceSlims`;\r\n    return this.httpSvc.get(url);\r\n  }\r\n\r\n  getFormInfoByProcInstId(procInstId: string): Observable<any> {\r\n    const url = `/api/runtime/wf/v1.0/processInstances/${procInstId}/formInfo`;\r\n    return this.httpSvc.get(url);\r\n  }\r\n\r\n  getFormInfoByActInstId(procInstId: string, actInstId: string): Observable<any> {\r\n    let url = `/api/runtime/wf/v1.0/processInstances/${procInstId}/formInfo`;\r\n    if (actInstId) {\r\n      url += `?actInstId=${actInstId}`;\r\n    }\r\n    return this.httpSvc.get(url);\r\n  }\r\n\r\n  /**\r\n   * è·åå®¡æ¹æ¥å¿ä¿¡æ¯\r\n   * @param ProcInstId ProcInstId\r\n   * æ°æ¹é çæ¥å£\r\n   */\r\n  getWorkItemLogs(procInstId: string, activityDefinitionId?: string): Observable<any> {\r\n    const logUrl = activityDefinitionId ?\r\n      `/api/runtime/wf/v1.0/processInstances/${procInstId}/logs?activityDefinitionId=${activityDefinitionId}` :\r\n      `/api/runtime/wf/v1.0/processInstances/${procInstId}/logs`;\r\n    return this.httpSvc.get(logUrl);\r\n  }\r\n\r\n  getI18nValue(name: string) {\r\n    if (!name) { return ''; }\r\n    const defaultLang = localStorage.getItem('languageCode');\r\n    const langData = defaultLang ? translate[defaultLang] : translate['zh-CHS'];\r\n    let resultVal = '';\r\n    if (name.indexOf('.') === -1) {\r\n      resultVal = langData[name];\r\n    } else {\r\n      resultVal = name.split('.').reduce((obj, key) => {\r\n        if (obj) {\r\n          return obj[key];\r\n        } else {\r\n          return null;\r\n        }\r\n      }, langData);\r\n    }\r\n    return resultVal;\r\n  }\r\n\r\n  getProcessInstanceById(processId: string): Observable<any> {\r\n    const url = `/api/runtime/wf/v1.0/processInstances/${processId}`;\r\n    return this.httpSvc.get(url);\r\n  }\r\n\r\n  getProcInstIdByDataId(dataId: string): Observable<any> {\r\n    const url = `/api/runtime/wf/v1.0/processInstances/procInstId?bizInstId=${dataId}`;\r\n    return this.httpSvc.get(url);\r\n  }\r\n\r\n  retryAifCreation(procInstId: string, actInstId: string, bizInstId: string) {\r\n    return this.httpSvc.post(\"/api/runtime/wf/v1.0/aifactivityinstance/retry\", actInstId);\r\n  }\r\n}\r\n","import { Injectable, Injector, ComponentFactoryResolver } from '@angular/core';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { ModalOptions, BsModalService } from '@farris/ui-modal';\r\nimport { UIFlowchartComponent } from './task-flowchart/task-flowchart.component';\r\nimport { translate } from './services/i18n/index';\r\nimport { UiFlowchartService } from './services/ui-flowchart.service';\r\nimport { AppOptions, FrameworkService } from '@gsp-sys/rtf-common';\r\nimport { of } from 'rxjs';\r\nimport { HttpService } from '@ecp-caf/caf-common';\r\nimport { ForecastProcessPayload } from './entity/forecast-process-payload';\r\n\r\n\r\n@Injectable()\r\nexport class WFFlowchartService {\r\n\r\n    private flowchartService: UiFlowchartService;\r\n    private frameworkService: FrameworkService;\r\n\r\n    constructor(\r\n        private msgService: MessagerService,\r\n        private injector: Injector,\r\n        private resolver: ComponentFactoryResolver,\r\n        private modalService: BsModalService,\r\n    ) {\r\n        this.flowchartService = this.injector.get(UiFlowchartService);\r\n        this.frameworkService = this.injector.get(FrameworkService);\r\n    }\r\n\r\n    viewProcess(payload: ForecastProcessPayload) {\r\n        if (!payload || !payload.dataId) {\r\n            this.msgService.warning(this.getI18nValue('static.flowchart.noDataId'));\r\n            return;\r\n        }\r\n        if (!payload || !payload.bizDefKey) {\r\n            this.msgService.warning(this.getI18nValue('static.flowchart.noBizDefKey'));\r\n            return;\r\n        }\r\n        const parameters = new Map<string, any>();\r\n        parameters.set('dataId', payload.dataId);\r\n        parameters.set('bizDefKey', payload.bizDefKey);\r\n        if (payload.startMode) {\r\n            parameters.set('startMode', payload.startMode);\r\n        }\r\n        if (payload.startUserId) {\r\n            parameters.set('startUserId', payload.startUserId);\r\n        }\r\n        parameters.set('withTitle', true);\r\n        const options: AppOptions = {\r\n            appType: 'menu',\r\n            funcId: 'WFViewFlowChart',\r\n            appId: '',\r\n            appEntrance: '',\r\n            tabId: payload.dataId,\r\n            isNewTab: true,\r\n            queryStringParams: parameters\r\n        };\r\n        this.frameworkService.openMenu(options);\r\n    }\r\n\r\n    /**\r\n     * æ¥çæµç¨ï¼tabé¡µä¸­æå¼ï¼\r\n     * @param procInstId æµç¨å®ä¾ID\r\n     */\r\n    viewFlowChart(procInstId: string) {\r\n        if (!procInstId) {\r\n            this.msgService.warning(this.getI18nValue('static.flowchart.processNotFound'));\r\n            return;\r\n        }\r\n        const parameters = new Map<string, any>();\r\n        parameters.set('processId', procInstId);\r\n        parameters.set('withTitle', true);\r\n        const options: AppOptions = {\r\n            appType: 'menu',\r\n            funcId: 'WFViewFlowChart',\r\n            appId: '',\r\n            appEntrance: '',\r\n            tabId: new Date().getTime().toString(),\r\n            isNewTab: true,\r\n            queryStringParams: parameters\r\n        };\r\n        this.frameworkService.openMenu(options);\r\n    }\r\n\r\n    viewFlowChartByDataId(dataId: string) {\r\n        if (!dataId) {\r\n            this.msgService.warning(this.getI18nValue('static.flowchart.dataIdIsNull'));\r\n            return;\r\n        }\r\n        const parameters = new Map<string, any>();\r\n        parameters.set('dataId', dataId);\r\n        parameters.set('withTitle', true);\r\n        const options: AppOptions = {\r\n            appType: 'menu',\r\n            funcId: 'WFViewFlowChart',\r\n            appId: '',\r\n            appEntrance: '',\r\n            tabId: new Date().getTime().toString(),\r\n            isNewTab: true,\r\n            queryStringParams: parameters\r\n        };\r\n        this.frameworkService.openMenu(options);\r\n    }\r\n\r\n    /**\r\n     * æ¥çæµç¨ï¼å¼¹æ¡ä¸­æå¼ï¼\r\n     * @param procInstId æµç¨å®ä¾ID\r\n     */\r\n    viewFlowChartByDialog(procInstId: string, mode?: string) {\r\n        if (!procInstId) {\r\n            this.msgService.warning(this.getI18nValue('static.flowchart.processNotFound'));\r\n            return;\r\n        }\r\n        let func;\r\n        if (UIFlowchartComponent.func) {\r\n            func = UIFlowchartComponent.func;\r\n        }\r\n        const modalConfig: ModalOptions = {\r\n            title: this.getI18nValue('static.flowchart.title'),\r\n            width: 1200,\r\n            height: 530,\r\n            showButtons: false,\r\n            beforeClose: (modalRef: any) => {\r\n                if (UIFlowchartComponent.func) {\r\n                    window.removeEventListener('message', UIFlowchartComponent.func, false);\r\n                }\r\n                if (func) {\r\n                    window.addEventListener('message', func, false);\r\n                    UIFlowchartComponent.func = func;\r\n                }\r\n                return of(true);\r\n            }\r\n        };\r\n        const compFactory = this.resolver.resolveComponentFactory(UIFlowchartComponent);\r\n        const inj = Injector.create({\r\n            providers: [\r\n                {\r\n                    provide: UiFlowchartService, useFactory: (httpSvc) => {\r\n                        return new UiFlowchartService(httpSvc);\r\n                    },\r\n                    deps: [\r\n                        HttpService\r\n                    ]\r\n                }], parent: this.injector\r\n        });\r\n        const compRef = compFactory.create(inj);\r\n        compRef.instance.ProcInstId = procInstId;\r\n        if (mode) {\r\n            compRef.instance.mode = mode;\r\n        }\r\n        compRef.instance.fill();\r\n        this.flowchartService.getProcessInstanceById(procInstId).subscribe(re => {\r\n            modalConfig.title = re.name + '-v' + re.version + '.0';\r\n            const dialog = this.modalService.show(compRef, modalConfig);\r\n        })\r\n    }\r\n\r\n    private getI18nValue(name: string) {\r\n        if (!name) { return ''; }\r\n        var defaultLang = localStorage.getItem('languageCode');\r\n        var langData = defaultLang ? translate[defaultLang] : translate['zh-CHS'];\r\n        let resultVal = '';\r\n        if (name.indexOf('.') === -1) {\r\n            resultVal = langData[name];\r\n        } else {\r\n            resultVal = name.split('.').reduce((obj, key) => {\r\n                if (obj) {\r\n                    return obj[key];\r\n                } else {\r\n                    return null;\r\n                }\r\n            }, langData);\r\n        }\r\n        return resultVal;\r\n    }\r\n}\r\n","import {\r\n  Component, OnInit, ViewChild, ElementRef, Input, Output,\r\n  EventEmitter, HostBinding, ChangeDetectorRef, Optional, Injector\r\n} from '@angular/core';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\nimport { forkJoin } from 'rxjs';\r\nimport { UiFlowchartService } from '../services/ui-flowchart.service';\r\nimport { WFFlowchartService } from '../wf-flowchart.service';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { AppOptions, FrameworkService } from '@gsp-sys/rtf-common';\r\n\r\n@Component({\r\n  selector: 'wf-flowchart',\r\n  templateUrl: './task-flowchart.component.html',\r\n  styleUrls: ['./task-flowchart.component.css']\r\n})\r\n\r\nexport class UIFlowchartComponent implements OnInit {\r\n\r\n  static func: any = null; // æ¶æ¯çå¬å¤çæ¹æ³\r\n  @HostBinding('class') cls = 'd-flex flex-fill h-100';\r\n  @ViewChild('iframe') iframe: ElementRef;\r\n  @Output() modalHide = new EventEmitter<boolean>();\r\n  procInstId: string;//æµç¨å®ä¾id\r\n  dataId: string;//è¡¨åid\r\n  actDefId: string;//èç¹å®ä¹id\r\n  ifForecast: string;//æ¯å¦é¢æµ\r\n  type: any; //type = 'process'æ¥çæµç¨æ¥å¿ï¼type = 'activity'ï¼æ¥çèç¹æ¥å¿\r\n  srcUrl: any;\r\n  content: string; // bpmnModel\r\n  actInstList: any[]; // æ´»å¨å®ä¾List\r\n  transInsList: any[];  // æµè½¬å®ä¾\r\n  processInstance: any;\r\n  fcHtml = window.document.location.origin + '/platform/runtime/wf/web/designer/flowchart.html';\r\n\r\n  @Input()\r\n  theme = 'viewFlowChart';\r\n\r\n  @Input()\r\n  processForecastPayload: any;\r\n\r\n  private _mode = 'complete';\r\n\r\n  @Input()\r\n  set mode(v: string) {\r\n    this._mode = v;\r\n    if (this._mode === 'simulation') {\r\n      this.ifForecast = 'true';\r\n      this.modeButton = this.service.getI18nValue('static.flowchart.complete');\r\n    } else if (this._mode === 'complete') {\r\n      this.modeButton = this.service.getI18nValue('static.flowchart.simulation');\r\n    }\r\n  }\r\n  get mode() {\r\n    return this._mode;\r\n  }\r\n\r\n  modeButton = this.service.getI18nValue('static.flowchart.simulation');\r\n  typeList = [{\r\n    value: 'complete', text: this.service.getI18nValue('static.flowchart.complete')\r\n  },\r\n  {\r\n    value: 'simulation', text: this.service.getI18nValue('static.flowchart.simulation')\r\n  }];\r\n  private message: MessagerService;\r\n  private frameworkSvc: FrameworkService;\r\n\r\n  @Input()\r\n  set ProcInstId(procInstId: string) {\r\n    if (procInstId) {\r\n      this.procInstId = procInstId;\r\n    }\r\n  }\r\n\r\n  @Input()\r\n  set DataId(dataId: string) {\r\n    if (dataId) {\r\n      this.dataId = dataId;\r\n    }\r\n  }\r\n\r\n  constructor(\r\n    private sanitizer: DomSanitizer,\r\n    private service: UiFlowchartService,\r\n    private changeDetector: ChangeDetectorRef,\r\n    private injector: Injector,\r\n    @Optional() private chartService: WFFlowchartService,\r\n  ) {\r\n    this.message = this.injector.get(MessagerService);\r\n    this.frameworkSvc = this.injector.get(FrameworkService);\r\n    this.srcUrl = this.sanitizer.bypassSecurityTrustResourceUrl(this.fcHtml);\r\n    if (UIFlowchartComponent.func) {\r\n      window.removeEventListener('message', UIFlowchartComponent.func, false);\r\n    }\r\n    this.addMessageListener();\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  private addMessageListener() {\r\n    window.addEventListener('message', this.eventHandler, false);\r\n    UIFlowchartComponent.func = this.eventHandler;\r\n  }\r\n\r\n  // çå¬äºä»¶å¤ç\r\n  eventHandler = (event) => {\r\n    const origin = event.origin;\r\n    const message = event.data;\r\n    if (this.fcHtml.search(origin) > -1) {\r\n      switch (message.action) {\r\n        case 'load':\r\n          this.viewFlowChart();\r\n          break;\r\n        case 'viewLogs':\r\n          this.viewLogs(message.data);\r\n          break;\r\n        case 'viewParent':\r\n          this.viewParent(message.data.superProcInstId);\r\n          break;\r\n        case 'viewChild':\r\n          this.viewChild(message.data.superActInstId, message.data.superProcInstId);\r\n          break;\r\n        case 'viewForm':\r\n          this.viewForm(message.data.procInstId, message.data.actInstId, message.data.bizInstId);\r\n          break;\r\n        case 'retryAifCreation':\r\n          this.retryAifCreation(message.data.procInstId, message.data.actInstId, message.data.bizInstId);\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    }\r\n  }\r\n\r\n  private viewFlowChart() {\r\n    if (this.theme === 'viewFlowChart') {\r\n      this.viewFlowChartByProcInstId();\r\n    } else {\r\n      this.processForecast();\r\n    }\r\n  }\r\n\r\n  private viewParent(superProcInstId: string) {\r\n    // this.procInstId = superProcInstId;\r\n    // this.viewFlowChartByProcInstId();\r\n  }\r\n\r\n  private viewChild(superActInstId: string, superProcInstId: string) {\r\n    this.service.getSubProcessInstance(superActInstId, superProcInstId)\r\n      .subscribe(re => {\r\n        if (this.chartService) {\r\n          this.chartService.viewFlowChartByDialog(re.id, this.mode);\r\n        } else {\r\n          throw Error('è¯·åçº§æ¥çæµç¨å¬å±åå®ç°èæ¥å­æµç¨å¾åè½');\r\n        }\r\n      });\r\n  }\r\n\r\n  modeSwitch() {\r\n    if (this.mode === 'complete') {\r\n      this.mode = 'simulation';\r\n      this.ifForecast = 'true';\r\n      this.modeButton = this.service.getI18nValue('static.flowchart.complete');\r\n      this.service.getForecastProcessByProcInstId(this.procInstId).subscribe(r => {\r\n        this.actInstList = r.activityInstanceSlims;\r\n        this.transInsList = r.transitionInstanceSlims;\r\n        this.postMessage('modeSwitch', {\r\n          mode: 'simulation',\r\n          actiInstList: r.activityInstanceSlims,\r\n          transInsList: r.transitionInstanceSlims\r\n        });\r\n      });\r\n    } else {\r\n      this.mode = 'complete';\r\n      this.ifForecast = 'false';\r\n      this.modeButton = this.service.getI18nValue('static.flowchart.simulation');\r\n      this.service.getCompleteProcessInfoByProcInstId(this.procInstId).subscribe(r => {\r\n        this.actInstList = r.activityInstanceSlims;\r\n        this.transInsList = r.transitionInstanceSlims;\r\n        this.postMessage('modeSwitch', {\r\n          mode: 'complete',\r\n          actiInstList: r.activityInstanceSlims,\r\n          transInsList: r.transitionInstanceSlims\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n  private viewLogs(data: any) {\r\n    this.type = data.type;\r\n    this.actDefId = data.actiDefId;\r\n  }\r\n\r\n  private viewFlowChartByProcInstId() {\r\n    this.content = '';\r\n    if (this.procInstId) {\r\n      if (this.mode === 'complete') {\r\n        forkJoin(\r\n          this.service.getProcInstanceById(this.procInstId),\r\n          this.service.getBpmnModelbyProcInstId(this.procInstId),\r\n          this.service.getCompleteProcessInfoByProcInstId(this.procInstId))\r\n          .subscribe((data: any[]) => {\r\n            this.processInstance = data[0];\r\n            this.content = JSON.stringify(data[1]);\r\n            this.actInstList = data[2].activityInstanceSlims;\r\n            this.transInsList = data[2].transitionInstanceSlims;\r\n            this.loadFlowChart();\r\n          });\r\n      } else {\r\n        forkJoin(\r\n          this.service.getProcInstanceById(this.procInstId),\r\n          this.service.getBpmnModelbyProcInstId(this.procInstId),\r\n          this.service.getForecastProcessByProcInstId(this.procInstId))\r\n          .subscribe((data: any[]) => {\r\n            this.processInstance = data[0];\r\n            this.content = JSON.stringify(data[1]);\r\n            this.actInstList = data[2].activityInstanceSlims;\r\n            this.transInsList = data[2].transitionInstanceSlims;\r\n            this.loadFlowChart();\r\n          });\r\n      }\r\n    }\r\n  }\r\n\r\n  private processForecast() {\r\n    this.content = '';\r\n    this.mode = 'simulation';\r\n    // this.ifForecast = true;\r\n    if (this.processForecastPayload.processDefinitionId && this.processForecastPayload.dataId) {\r\n      forkJoin(\r\n        this.service.getBpmnModelbyProcDefId(this.processForecastPayload.processDefinitionId),\r\n        this.service.getForecastProcessByPayload(this.processForecastPayload))\r\n        .subscribe((data: any[]) => {\r\n          this.content = JSON.stringify(data[0]);\r\n          this.actInstList = data[1].activityInstanceSlims;\r\n          this.transInsList = data[1].transitionInstanceSlims;\r\n          this.loadFlowChart();\r\n        });\r\n    }\r\n  }\r\n\r\n  private viewForm(procInstId: string, actInstId: string, bizInstId: string) {\r\n    if (procInstId) {\r\n      this.service.getFormInfoByActInstId(procInstId, actInstId).subscribe((re: any) => {\r\n        const formInfo = re;\r\n        if (!formInfo || !formInfo.appId) {\r\n          if (this.message) {\r\n            this.message.info('æ¾ä¸å°åæ®ï¼è¯·èç³»ç®¡çåæ¥çåå ï¼');\r\n          }\r\n          return;\r\n        }\r\n        const options: AppOptions = {\r\n          appType: 'menu',\r\n          funcId: formInfo.appId,\r\n          appId: '',\r\n          appEntrance: '',\r\n          tabId: bizInstId,\r\n          isNewTab: true\r\n        };\r\n        // ä¼ å·¥ä½æµä¸ä¸æåæ°\r\n        const parameters = new Map<string, any>();\r\n        parameters.set('procInstId', procInstId);\r\n        parameters.set('actInstId', actInstId);\r\n        formInfo.parameters.forEach((item: any) =>\r\n          parameters.set(item.code, item.value)\r\n        );\r\n        options.queryStringParams = parameters;\r\n        if (this.frameworkSvc) {\r\n          this.frameworkSvc.openMenu(options);\r\n        } else {\r\n          throw Error('æ¡æ¶æå¡ä¸å­å¨ï¼æ æ³èæ¥ï¼');\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  private retryAifCreation(procInstId: string, actInstId: string, bizInstId: string) {\r\n    if (procInstId) {\r\n      this.service.retryAifCreation(procInstId, actInstId, bizInstId).subscribe(\r\n        (re: any) => {\r\n          this.viewFlowChart();\r\n        },\r\n        (err) => {\r\n          setTimeout(() => {\r\n            //todo ç¡®å®å¼å¸¸ç»æ, ç®åéç¨å¼å®¹åå¼æ¹å¼\r\n            this.message.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));\r\n          }, 300);\r\n          throw err;\r\n        }\r\n      );\r\n    }\r\n  }\r\n\r\n  public loadFlowChart() {\r\n    if (this.content) {\r\n      this.postMessage('load', {\r\n        processInstance: this.processInstance,\r\n        content: this.content,\r\n        actiInstList: this.actInstList,\r\n        transInsList: this.transInsList,\r\n        mode: this.mode\r\n      });\r\n    }\r\n  }\r\n\r\n  postMessage(action: string, data: any) {\r\n    const message = { action, data };\r\n    this.iframe.nativeElement.contentWindow.postMessage(message, this.fcHtml);\r\n  }\r\n\r\n  fill() {\r\n    this.cls = 'd-flex flex-fill h-100 f-utils-absolute-all';\r\n  }\r\n\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { UiFlowchartService } from './ui-flowchart.service'\r\n\r\n@Pipe({ name: 'translate' })\r\nexport class TranslatePipe implements PipeTransform {\r\n\r\n    constructor(\r\n        private service: UiFlowchartService\r\n    ) { }\r\n\r\n    transform(name: any, defaultVal = ''): any {\r\n        const r = this.service.getI18nValue(name);\r\n        return r ? r : defaultVal;\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { UIFlowchartComponent } from './task-flowchart/task-flowchart.component';\r\nimport { CommonModule } from '@angular/common';\r\nimport { HttpService } from '@ecp-caf/caf-common';\r\nimport { UiFlowchartService } from './services/ui-flowchart.service';\r\nimport { WFFlowchartService } from './wf-flowchart.service';\r\nimport { MessagerModule } from '@farris/ui-messager';\r\nimport { FarrisDialogModule } from '@farris/ui-dialog';\r\nimport { TranslatePipe } from './services/translate.pipe';\r\nimport { LayoutModule } from '@farris/ui-layout';\r\nimport { FarrisSectionModule } from '@farris/ui-section';\r\nimport { WfApprovalLogsModule } from '@gsp-wf/wf-approval-logs';\r\nimport { ComboListModule } from '@farris/ui-combo-list';\r\nimport { ReactiveFormsModule, FormsModule } from '@angular/forms';\r\nimport { FDropdownDirectiveTypeModule } from '@farris/ui-dropdown';\r\nimport { DatagridModule } from '@farris/ui-datagrid';\r\nimport { NotifyModule } from '@farris/ui-notify';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    UIFlowchartComponent,\r\n    TranslatePipe],\r\n  imports: [\r\n    LayoutModule,\r\n    CommonModule,\r\n    FarrisDialogModule,\r\n    MessagerModule.forRoot({\r\n      width: 500\r\n    }),\r\n    FarrisSectionModule,\r\n    WfApprovalLogsModule,\r\n    ComboListModule,\r\n    ReactiveFormsModule,\r\n    FormsModule,\r\n    FDropdownDirectiveTypeModule,\r\n    DatagridModule,\r\n    NotifyModule\r\n  ],\r\n  exports: [UIFlowchartComponent],\r\n  providers: [\r\n    HttpService,\r\n    UiFlowchartService,\r\n    WFFlowchartService,\r\n  ],\r\n  entryComponents: [\r\n    UIFlowchartComponent\r\n  ]\r\n})\r\nexport class UiFlowchartModule { }\r\n","export class ForecastProcessPayload {\r\n\r\n    bizDefKey: string;\r\n\r\n    dataId: string;\r\n\r\n    startMode: string;\r\n\r\n    startUserId: string;\r\n}\r\n"],"names":[],"mappings":"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"}
