/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, ComponentFactoryResolver, Injector, Input, ViewChild, ElementRef, HostBinding, NgZone } from '@angular/core';
import { FormBuilder } from '@angular/forms';
import { ProcessDesignerUIState } from '../../../../app/process-designer.uistate';
import { ExpressionService, InjectedType, ExprEditMode } from '@gsp-svc/expression';
import { SessionService } from '@ecp-caf/caf-common';
import { BsModalService } from '@farris/ui-modal';
import { CommonComponentUiRTService } from '@gsp-cmp/ccmp-ui';
import { SelectMetadataRTComponent } from '@gsp-lcm/metadatart-selector';
import { DatagridComponent } from '@farris/ui-datagrid';
import { of, forkJoin } from 'rxjs';
import { EditorTypes } from '@farris/ui-datagrid-editors';
import { LookupGridComponent } from '@farris/ui-lookup';
import { ComponentPerformerService } from './component-performer.service';
import { ParameterFetchValueMode } from '@gsp-cmp/wscmp-models';
import { ComponentPerformer } from './component-performer.entity';
import { ProcessDeUtil } from '../../../../domain/process-de-util';
export class ComponentPerformerComponent {
    /**
     * @param {?} formBuilder
     * @param {?} designerState
     * @param {?} expr
     * @param {?} resolver
     * @param {?} injector
     * @param {?} sessionSrc
     * @param {?} modalService
     * @param {?} componentService
     * @param {?} ngZone
     * @param {?} service
     * @param {?} util
     */
    constructor(formBuilder, designerState, expr, resolver, injector, sessionSrc, modalService, componentService, ngZone, service, util) {
        this.formBuilder = formBuilder;
        this.designerState = designerState;
        this.expr = expr;
        this.resolver = resolver;
        this.injector = injector;
        this.sessionSrc = sessionSrc;
        this.modalService = modalService;
        this.componentService = componentService;
        this.ngZone = ngZone;
        this.service = service;
        this.util = util;
        this.cls = 'farris-main-area flex-column';
        this.showClearButton = false;
        this.columns = [
            { field: 'code', width: 60, title: '编号' },
            { field: 'name', width: 60, title: '名称' },
            { field: 'description', width: 60, title: '描述', showTips: true },
            {
                field: 'valueText', width: 100, title: '参数值',
                editor: {
                    type: 'input-group',
                    options: {
                        groupText: '<i class="f-icon f-icon-lookup"></i>',
                        editable: false,
                        clickHandle: (/**
                         * @param {?} e
                         * @return {?}
                         */
                        (e) => {
                            e.formControl.setValue(e.instance.value ? e.instance.value : '');
                            this.showExprHelp(e);
                        }),
                        clear: (/**
                         * @param {?} e
                         * @return {?}
                         */
                        (e) => {
                            // 清理valueText，也应该清理value
                            e.rowData.value = '';
                            for (const p of this.component.actualParameters) {
                                if (p.code === e.rowId) {
                                    p.value = '';
                                }
                            }
                        })
                    }
                }
            }
        ];
        this.helpInfo = {
            helpId: '',
            su: '',
            columns: [],
            displayType: 'List',
            items: [],
            pageInfo: {
                pageIndex: 1,
                pageList: [10, 20, 30, 50],
                pageSize: 20
            },
            search: { category: 'search' },
            title: '帮助',
            total: 100,
            fieldInfo: {
                idField: 'id',
                textField: 'name',
                valueField: 'id'
            }
        };
        this.beforeEdit = (/**
         * @param {?} param
         * @return {?}
         */
        (param) => {
            /** @type {?} */
            const rowData = (/** @type {?} */ (param.rowData));
            this.curParameter = rowData;
            switch (rowData.fetchValueMode) {
                case ParameterFetchValueMode.express:
                    param.column.editor = {
                        type: 'input-group',
                        options: {
                            groupText: '<i class="f-icon f-icon-lookup"></i>',
                            editable: false,
                            clickHandle: (/**
                             * @param {?} e
                             * @return {?}
                             */
                            (e) => {
                                e.formControl.setValue(e.instance.value ? e.instance.value : '');
                                this.showExprHelp(e);
                            }),
                            clear: (/**
                             * @param {?} e
                             * @return {?}
                             */
                            (e) => {
                                // 清理valueText，也应该清理value
                                e.rowData.value = '';
                                for (const p of this.component.actualParameters) {
                                    if (p.code === e.rowId) {
                                        p.value = '';
                                    }
                                }
                            })
                        }
                    };
                    break;
                case ParameterFetchValueMode.none:
                    param.column.editor = {
                        type: 'input-group',
                        options: {
                            groupText: '<i class="f-icon f-icon-lookup"></i>',
                            editable: false,
                            clickHandle: (/**
                             * @param {?} e
                             * @return {?}
                             */
                            (e) => {
                                e.formControl.setValue(e.instance.value ? e.instance.value : '');
                                this.showExprHelp(e);
                            }),
                            clear: (/**
                             * @param {?} e
                             * @return {?}
                             */
                            (e) => {
                                // 清理valueText，也应该清理value
                                e.rowData.value = '';
                                for (const p of this.component.actualParameters) {
                                    if (p.code === e.rowId) {
                                        p.value = '';
                                    }
                                }
                            })
                        }
                    };
                    break;
                case ParameterFetchValueMode.const:
                    param.column.editor = { type: EditorTypes.TEXTBOX, options: {} };
                    break;
                case ParameterFetchValueMode.enum:
                    param.column.editor = { type: EditorTypes.TEXTBOX, options: {} };
                    break;
                case ParameterFetchValueMode.help:
                    param.column.editor = {
                        type: 'input-group',
                        options: {
                            groupText: '<i class="f-icon f-icon-lookup"></i>',
                            editable: false,
                            clickHandle: (/**
                             * @param {?} e
                             * @return {?}
                             */
                            (e) => {
                                this.cell = e;
                                this.helpInfo.helpId = ((/** @type {?} */ (rowData.fetchValueSetting))).helpId;
                                this.helpInfo.su = ((/** @type {?} */ (rowData.fetchValueSetting))).serviceUnit;
                                this.helpInfo.pageInfo = {
                                    pageIndex: 1,
                                    pageList: [10, 20, 30, 50],
                                    pageSize: 20
                                };
                                this.helpInfo.search = { category: 'search' };
                                this.getHelpInfo();
                            }),
                            clear: (/**
                             * @param {?} e
                             * @return {?}
                             */
                            (e) => {
                                // 清理valueText，也应该清理value
                                e.rowData.value = '';
                                for (const p of this.component.actualParameters) {
                                    if (p.code === e.rowId) {
                                        p.value = '';
                                    }
                                }
                            })
                        }
                    };
                    break;
            }
            return of(true);
        });
        this.afterEdit = (/**
         * @param {?} rowIndex
         * @param {?} rowData
         * @param {?=} column
         * @return {?}
         */
        (rowIndex, rowData, column) => {
            return of(true);
        });
        this.dictPicked = (/**
         * @param {?} rowData
         * @return {?}
         */
        (rowData) => {
            if (this.cell) {
                this.cell.formControl.setValue(this.util.getValue(rowData, this.helpInfo.fieldInfo.textField));
                this.cell.instance.cd.detectChanges();
                this.cell.rowData.value = this.util.getValue(rowData, this.helpInfo.fieldInfo.valueField);
                for (const p of this.component.actualParameters) {
                    if (p.code === this.cell.rowId) {
                        p.value = this.util.getValue(rowData, this.helpInfo.fieldInfo.valueField);
                    }
                }
                return of(true);
            }
        });
    }
    /**
     * @param {?} cmp
     * @return {?}
     */
    set component(cmp) {
        if (cmp && cmp.methodCode) {
            this.service.getHelpMetaData(cmp.metadataId, '').subscribe((/**
             * @param {?} re
             * @return {?}
             */
            re => {
                /** @type {?} */
                const c = JSON.parse(re.content);
                /** @type {?} */
                const operation = c.operations.find((/**
                 * @param {?} o
                 * @return {?}
                 */
                o => o.code === cmp.methodCode));
                if (operation) {
                    cmp.actualParameters = cmp.actualParameters.map((/**
                     * @param {?} a
                     * @return {?}
                     */
                    a => {
                        /** @type {?} */
                        const p = operation.parameters.find((/**
                         * @param {?} i
                         * @return {?}
                         */
                        i => i.code === a.code));
                        if (p) {
                            return {
                                code: a.code,
                                name: p.name,
                                value: a.value,
                                valueText: a.valueText ? a.valueText : a.value,
                                description: p.description,
                                tag: a.tag,
                                fetchValueMode: p.fetchValueMode,
                                fetchValueSetting: p.fetchValueSetting
                            };
                        }
                        else {
                            throw new Error('当前构件方法参数不一致，请更新！');
                        }
                    }));
                    this.componentPerformer = cmp;
                }
                else {
                    throw new Error('当前构件已不存在此方法，请更新！');
                }
            }));
        }
        else {
            this.componentPerformer = new ComponentPerformer();
        }
    }
    /**
     * @return {?}
     */
    get component() {
        return this.componentPerformer;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        this.ngZone.runOutsideAngular((/**
         * @return {?}
         */
        () => {
            this.inputGroup.nativeElement.addEventListener('mouseenter', this.onMouseEnter.bind(this));
            this.inputGroup.nativeElement.addEventListener('mouseleave', this.onMouseLeave.bind(this));
        }));
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onMouseEnter(event) {
        this.showClearButton = true;
        if (this.showClearButton) {
            this.toggleClearIcon(event, true);
        }
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onMouseLeave(event) {
        this.showClearButton = false;
        this.toggleClearIcon(event, false);
    }
    /**
     * @private
     * @param {?} event
     * @param {?=} isShow
     * @return {?}
     */
    toggleClearIcon(event, isShow = false) {
        /** @type {?} */
        const str = isShow ? '' : 'none';
        /** @type {?} */
        const clearIcon = event.target.querySelector('.input-group-clear');
        if (clearIcon) {
            clearIcon.style.display = str;
        }
    }
    /**
     * @param {?} event
     * @return {?}
     */
    selectChanged(event) {
        this.curParameter = event.data;
    }
    /**
     * @param {?} e
     * @return {?}
     */
    endEdit(e) {
        // 文本框编辑同时修改value
        if (e.rowData.fetchValueMode === ParameterFetchValueMode.const || e.rowData.fetchValueMode === ParameterFetchValueMode.enum) {
            this.component.actualParameters[e.rowIndex].value = this.component.actualParameters[e.rowIndex].valueText;
        }
    }
    /**
     * @return {?}
     */
    clear() {
        this.componentPerformer.name = '';
        this.componentPerformer.metadataId = '';
        this.componentPerformer.methodCode = '';
        this.componentPerformer.methodName = '';
        this.componentPerformer.condition = '';
        this.componentPerformer.actualParameters = new Array();
    }
    /**
     * @return {?}
     */
    selectComponent() {
        /** @type {?} */
        const compFactory = this.resolver.resolveComponentFactory(SelectMetadataRTComponent);
        /** @type {?} */
        const compRef = compFactory.create(this.injector);
        compRef.instance.typeList = 'WebServiceComponent'; // 目前只能根据元数据类型过滤，后续添加标签过滤
        compRef.instance.selectedMetadata.subscribe((/**
         * @param {?} $event
         * @return {?}
         */
        ($event) => {
            try {
                /** @type {?} */
                const meta = $event.metadata;
                this.openComponentSelectorNew(meta.id, this.sessionSrc.getUserSessionId());
            }
            catch (_a) {
                console.log('$event', $event);
                throw new Error('获取解析构件出错' + $event);
            }
        }));
        /** @type {?} */
        const modalConfig = {
            title: '构件选择',
            width: 980,
            height: 548,
            showButtons: false
        };
        /** @type {?} */
        const dialog = this.modalService.show(compRef, modalConfig);
        compRef.instance.closeModalEmitter.subscribe((/**
         * @param {?} $event
         * @return {?}
         */
        $event => dialog.close()));
    }
    /**
     * @private
     * @param {?} metadataId
     * @param {?} sessionId
     * @return {?}
     */
    openComponentSelectorNew(metadataId, sessionId) {
        this.componentService.openSelector(metadataId, sessionId).subscribe((/**
         * @param {?} selectorResult
         * @return {?}
         */
        (selectorResult) => {
            selectorResult.confirmEvent.subscribe((/**
             * @param {?} result
             * @return {?}
             */
            (result) => {
                if (result) {
                    this.component.name = result.name;
                    this.component.metadataId = result.id;
                    this.component.methodCode = result.operations[0].code;
                    this.component.methodName = result.operations[0].name;
                    this.component.actualParameters = [];
                    if (result.operations[0].parameters && result.operations[0].parameters.length > 0) {
                        this.component.actualParameters = result.operations[0].parameters
                            .map((/**
                         * @param {?} p
                         * @return {?}
                         */
                        (p) => (/** @type {?} */ (({
                            code: p.code,
                            name: p.name,
                            value: '',
                            valueText: '',
                            description: p.description,
                            fetchValueMode: p.fetchValueMode,
                            fetchValueSetting: p.fetchValueSetting
                        })))));
                    }
                }
            }));
        }));
    }
    /**
     * @param {?} e
     * @return {?}
     */
    showExprHelp(e) {
        if (this.designerState.schemas.length > 0) {
            for (const schema of this.designerState.schemas) {
                this.expr.addSchema('Schema', schema);
            }
            if (this.designerState.schemas[0].entityTypes && this.designerState.schemas[0].entityTypes.length > 0) {
                /** @type {?} */
                const entityType = this.designerState.schemas[0].entityTypes[0];
                this.expr.addInjectedEntity(entityType.name, 'Schema', entityType.name, InjectedType.EntityType);
            }
        }
        /** @type {?} */
        const context = new Array();
        if (this.designerState.procInstContext.length > 0) {
            for (const variable of this.designerState.procInstContext) {
                context.push(variable);
            }
        }
        if (this.designerState.formalParameterContext.length > 0) {
            for (const variable of this.designerState.formalParameterContext) {
                if (!context.some((/**
                 * @param {?} c
                 * @return {?}
                 */
                c => c.key === variable.key))) {
                    context.push(variable);
                }
            }
        }
        if (this.designerState.participantContext.length > 0) {
            for (const variable of this.designerState.participantContext) {
                if (!context.some((/**
                 * @param {?} c
                 * @return {?}
                 */
                c => c.key === variable.key))) {
                    context.push(variable);
                }
            }
        }
        if (this.designerState.processVariableContext.length > 0) {
            for (const variable of this.designerState.processVariableContext) {
                if (!context.some((/**
                 * @param {?} c
                 * @return {?}
                 */
                c => c.key === variable.key))) {
                    context.push(variable);
                }
            }
        }
        if (context.length > 0) {
            for (const v of context) {
                this.expr.addContext(v);
            }
        }
        this.expr.setEditPattern(ExprEditMode.Advanced); // 默认打开高级表达式编辑器
        this.expr.addExpressionText(e.instance.value);
        this.expr.buildExpression().then((/**
         * @param {?} d
         * @return {?}
         */
        (d) => {
            if (d) {
                e.formControl.setValue(d);
                e.instance.cd.detectChanges();
                e.rowData.value = d;
                for (const p of this.component.actualParameters) {
                    if (p.code === e.rowId) {
                        p.value = d;
                    }
                }
            }
        }));
    }
    /**
     * @return {?}
     */
    getPerformers() {
        this.grid.endCellEdit();
        console.log(this.component);
        return this.component;
    }
    /**
     * @private
     * @return {?}
     */
    getHelpInfo() {
        forkJoin(this.service.getHelpMetaData(this.helpInfo.helpId, this.helpInfo.su), this.service.getLookUpData(this.helpInfo.helpId, this.helpInfo.su, this.helpInfo.pageInfo.pageIndex, this.helpInfo.pageInfo.pageSize, this.helpInfo.search)).subscribe((/**
         * @param {?} re
         * @return {?}
         */
        re => {
            if (re[0]) {
                /** @type {?} */
                const meta = re[0];
                /** @type {?} */
                const help = (/** @type {?} */ (JSON.parse(meta.content)));
                this.helpInfo.columns = help.dataSource.columns;
                this.helpInfo.displayType = help.displayType;
                this.helpInfo.fieldInfo = {
                    idField: help.idField,
                    valueField: help.valueField,
                    textField: help.textField
                };
            }
            else {
                throw new Error('帮助元数据不存在！');
            }
            if (re[1]) {
                /** @type {?} */
                const helpData = re[1];
                this.helpInfo.items = helpData.items;
                this.helpInfo.title = helpData.title;
                this.helpInfo.total = helpData.total;
                this.lookup.showDialog();
            }
            else {
                throw new Error('获取帮助数据源失败！');
            }
        }));
    }
    /**
     * @param {?} data
     * @return {?}
     */
    pagerChanged(data) {
        if (data) {
            this.helpInfo.pageInfo.pageIndex = data.pageIndex;
            this.helpInfo.pageInfo.pageSize = data.pageSize;
            this.service.getLookUpData(this.helpInfo.helpId, this.helpInfo.su, this.helpInfo.pageInfo.pageIndex, this.helpInfo.pageInfo.pageSize, this.helpInfo.search)
                .subscribe((/**
             * @param {?} re
             * @return {?}
             */
            re => {
                this.helpInfo.items = re.items;
                this.helpInfo.title = re.title;
                this.helpInfo.total = re.total;
                this.lookup.loadData(re);
            }));
        }
    }
    /**
     * @param {?} data
     * @return {?}
     */
    search(data) {
        console.log(data);
        this.helpInfo.search = { category: 'search' };
        if (data) {
            /** @type {?} */
            const searchInfo = {
                searchField: data.field || data.search.field,
                searchValue: data.value || data.search.value
            };
            this.helpInfo.search = Object.assign(this.helpInfo.search, searchInfo);
            this.service.getLookUpData(this.helpInfo.helpId, this.helpInfo.su, this.helpInfo.pageInfo.pageIndex, this.helpInfo.pageInfo.pageSize, this.helpInfo.search)
                .subscribe((/**
             * @param {?} re
             * @return {?}
             */
            re => {
                this.helpInfo.items = re.items;
                this.helpInfo.title = re.title;
                this.helpInfo.total = re.total;
                this.lookup.loadData(re);
            }));
        }
    }
}
ComponentPerformerComponent.decorators = [
    { type: Component, args: [{
                selector: 'app-component-performer',
                template: "\r\n    <div class=\"f-utils-fill-flex-column farris-overflow-y-auto h-100\">\r\n      <form class=\"farris-form farris-card-content-bg farris-card-section mx-2\">\r\n        <div class=\"d-flex flex-wrap flex-column mb-2 pr-4\">\r\n          <div class=\"farris-form-controls-inline farris-form-auto mb-2\">\r\n            <div class=\"farris-group-wrap mx-3\">\r\n              <div class=\"form-group\">\r\n                <label class=\"col-form-label\">\r\n                  <span class=\"farris-label-info text-danger\">*</span>\r\n                  <span class=\"farris-label-text\">\u6784\u4EF6\u540D\u79F0</span>\r\n                </label>\r\n                <div class=\"farris-input-wrap ml-2\">\r\n                  <input type=\"text\" class=\"k-textbox form-control\" name=\"name\"\r\n                    [(ngModel)]=\"component.name\" />\r\n                  <div class=\"farris-feedback valid-feedback\"></div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"farris-form-controls-inline farris-form-auto\">\r\n            <div class=\"farris-group-wrap mx-3\">\r\n              <div class=\"form-group\">\r\n                <label class=\"col-form-label\">\r\n                  <span class=\"farris-label-info text-danger\">*</span>\r\n                  <span class=\"farris-label-text\">\u6784\u4EF6\u9009\u62E9</span>\r\n                </label>\r\n                <div class=\"farris-input-wrap ml-2\">\r\n                  <div #inputGroup class=\"input-group\">\r\n                    <input type=\"text\" class=\"form-control\" [(ngModel)]=\"component.methodCode\" name=\"methodCode\" [readOnly]=\"true\" />\r\n                    <div class=\"input-group-append\">\r\n                      <span [style.display]=\"showClearButton ? '' : 'none'\" class=\"input-group-text input-group-clear\" (click)=\"clear()\">\r\n                        <i class=\"f-icon modal_close\"></i>\r\n                      </span>\r\n                      <span class=\"input-group-text\" (click)=\"selectComponent()\" style=\"background: #FFF;\">\r\n                        <i class=\"f-icon f-icon-lookup\"></i>\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"farris-feedback valid-feedback\"></div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </form>\r\n      <farris-tabs class=\"f-utils-fill\" #params [value]=\"'params'\" [contentFill]=\"true\">\r\n        <farris-tab title=\"\u53C2\u6570\u5217\u8868\" [id]=\"'params'\">\r\n          <ng-template #content>\r\n            <div class=\"f-utils-fill-flex-column h-100\">\r\n              <farris-datagrid #grid [data]=\"component.actualParameters\" [columns]=\"columns\" [idField]=\"'code'\" [fit]=\"true\"\r\n                [fitColumns]=\"true\" [editable]=\"true\" [editMode]=\"'cell'\" [pagination]=\"false\" [showCheckbox]=\"false\"\r\n                [multiSelect]=\"false\" [afterEdit]=\"afterEdit\" [beforeEdit]=\"beforeEdit\" \r\n                (selectChanged)=\"selectChanged($event)\" (endEdit)=\"endEdit($event)\"></farris-datagrid>\r\n            </div>\r\n          </ng-template>\r\n        </farris-tab>\r\n      </farris-tabs>\r\n    </div>\r\n\r\n<farris-lookup-grid style=\"display: none;\" [items]=\"helpInfo.items\" [columns]=\"helpInfo.columns\"  [resizable]=\"true\" [singleSelect]=\"true\" \r\n  [idField]=\"helpInfo.fieldInfo.idField\" [textField]=\"helpInfo.fieldInfo.textField\" [valueField]=\"helpInfo.fieldInfo.valueField\" \r\n  [pagination]=\"true\"  [pageIndex]=\"helpInfo.pageInfo.pageIndex\" [pageSize]=\"helpInfo.pageInfo.pageSize\" [pageList]=\"helpInfo.pageInfo.pageList\" \r\n  [total]=\"helpInfo.total\" [title]=\"helpInfo.title\" [displayType]=\"helpInfo.displayType\" [dictPicked]=\"dictPicked\" [remoteSearch]='false'\r\n  (pagerChanged)=\"pagerChanged($event)\" (search)=\"search($event)\">\r\n</farris-lookup-grid>",
                providers: [ComponentPerformerService],
                styles: [""]
            }] }
];
/** @nocollapse */
ComponentPerformerComponent.ctorParameters = () => [
    { type: FormBuilder },
    { type: ProcessDesignerUIState },
    { type: ExpressionService },
    { type: ComponentFactoryResolver },
    { type: Injector },
    { type: SessionService },
    { type: BsModalService },
    { type: CommonComponentUiRTService },
    { type: NgZone },
    { type: ComponentPerformerService },
    { type: ProcessDeUtil }
];
ComponentPerformerComponent.propDecorators = {
    cls: [{ type: HostBinding, args: ['class',] }],
    grid: [{ type: ViewChild, args: [DatagridComponent,] }],
    lookup: [{ type: ViewChild, args: [LookupGridComponent,] }],
    inputGroup: [{ type: ViewChild, args: ['inputGroup',] }],
    component: [{ type: Input }]
};
if (false) {
    /** @type {?} */
    ComponentPerformerComponent.prototype.cls;
    /**
     * @type {?}
     * @private
     */
    ComponentPerformerComponent.prototype.componentPerformer;
    /** @type {?} */
    ComponentPerformerComponent.prototype.grid;
    /** @type {?} */
    ComponentPerformerComponent.prototype.lookup;
    /** @type {?} */
    ComponentPerformerComponent.prototype.inputGroup;
    /** @type {?} */
    ComponentPerformerComponent.prototype.showClearButton;
    /** @type {?} */
    ComponentPerformerComponent.prototype.curParameter;
    /** @type {?} */
    ComponentPerformerComponent.prototype.columns;
    /** @type {?} */
    ComponentPerformerComponent.prototype.helpInfo;
    /** @type {?} */
    ComponentPerformerComponent.prototype.cell;
    /** @type {?} */
    ComponentPerformerComponent.prototype.beforeEdit;
    /** @type {?} */
    ComponentPerformerComponent.prototype.afterEdit;
    /** @type {?} */
    ComponentPerformerComponent.prototype.dictPicked;
    /**
     * @type {?}
     * @private
     */
    ComponentPerformerComponent.prototype.formBuilder;
    /**
     * @type {?}
     * @private
     */
    ComponentPerformerComponent.prototype.designerState;
    /**
     * @type {?}
     * @private
     */
    ComponentPerformerComponent.prototype.expr;
    /**
     * @type {?}
     * @private
     */
    ComponentPerformerComponent.prototype.resolver;
    /**
     * @type {?}
     * @private
     */
    ComponentPerformerComponent.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    ComponentPerformerComponent.prototype.sessionSrc;
    /**
     * @type {?}
     * @private
     */
    ComponentPerformerComponent.prototype.modalService;
    /**
     * @type {?}
     * @private
     */
    ComponentPerformerComponent.prototype.componentService;
    /**
     * @type {?}
     * @private
     */
    ComponentPerformerComponent.prototype.ngZone;
    /**
     * @type {?}
     * @private
     */
    ComponentPerformerComponent.prototype.service;
    /**
     * @type {?}
     * @private
     */
    ComponentPerformerComponent.prototype.util;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tcG9uZW50LXBlcmZvcm1lci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZ3NwLXdmL3dmLXByb2Nlc3MtZWRpdG9yLyIsInNvdXJjZXMiOlsibGliL3ZpZXdzL3BlcmZvcm1lci92aWV3cy9jb21wb25lbnQtcGVyZm9ybWVyL2NvbXBvbmVudC1wZXJmb3JtZXIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFVLHdCQUF3QixFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRSxXQUFXLEVBQWlCLE1BQU0sRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUN4SixPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDN0MsT0FBTyxFQUFFLHNCQUFzQixFQUFFLE1BQU0sMENBQTBDLENBQUM7QUFDbEYsT0FBTyxFQUFFLGlCQUFpQixFQUFFLFlBQVksRUFBRSxZQUFZLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUNwRixPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDckQsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBQ2xELE9BQU8sRUFBRSwwQkFBMEIsRUFBa0IsTUFBTSxrQkFBa0IsQ0FBQztBQUM5RSxPQUFPLEVBQUUseUJBQXlCLEVBQWdDLE1BQU0sOEJBQThCLENBQUM7QUFFdkcsT0FBTyxFQUFjLGlCQUFpQixFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDcEUsT0FBTyxFQUFFLEVBQUUsRUFBRSxRQUFRLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFFcEMsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLDZCQUE2QixDQUFDO0FBQzFELE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ3hELE9BQU8sRUFBRSx5QkFBeUIsRUFBRSxNQUFNLCtCQUErQixDQUFDO0FBQzFF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SUFvS0QsaURBWUM7Ozs7O0lBMVRDLGtEQUFnQzs7Ozs7SUFDaEMsb0RBQTZDOzs7OztJQUM3QywyQ0FBK0I7Ozs7O0lBQy9CLCtDQUEwQzs7Ozs7SUFDMUMsK0NBQTBCOzs7OztJQUMxQixpREFBa0M7Ozs7O0lBQ2xDLG1EQUFvQzs7Ozs7SUFDcEMsdURBQW9EOzs7OztJQUNwRCw2Q0FBc0I7Ozs7O0lBQ3RCLDhDQUEwQzs7Ozs7SUFDMUMsMkNBQTJCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIENvbXBvbmVudEZhY3RvcnlSZXNvbHZlciwgSW5qZWN0b3IsIElucHV0LCBWaWV3Q2hpbGQsIEVsZW1lbnRSZWYsIEhvc3RCaW5kaW5nLCBBZnRlclZpZXdJbml0LCBOZ1pvbmUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgRm9ybUJ1aWxkZXIgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XHJcbmltcG9ydCB7IFByb2Nlc3NEZXNpZ25lclVJU3RhdGUgfSBmcm9tICcuLi8uLi8uLi8uLi9hcHAvcHJvY2Vzcy1kZXNpZ25lci51aXN0YXRlJztcclxuaW1wb3J0IHsgRXhwcmVzc2lvblNlcnZpY2UsIEluamVjdGVkVHlwZSwgRXhwckVkaXRNb2RlIH0gZnJvbSAnQGdzcC1zdmMvZXhwcmVzc2lvbic7XHJcbmltcG9ydCB7IFNlc3Npb25TZXJ2aWNlIH0gZnJvbSAnQGVjcC1jYWYvY2FmLWNvbW1vbic7XHJcbmltcG9ydCB7IEJzTW9kYWxTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1tb2RhbCc7XHJcbmltcG9ydCB7IENvbW1vbkNvbXBvbmVudFVpUlRTZXJ2aWNlLCBTZWxlY3RvclJlc3VsdCB9IGZyb20gJ0Bnc3AtY21wL2NjbXAtdWknO1xyXG5pbXBvcnQgeyBTZWxlY3RNZXRhZGF0YVJUQ29tcG9uZW50LCBNZXRhZGF0YTRSZWZEdG8sIE1ldGFkYXRhRHRvIH0gZnJvbSAnQGdzcC1sY20vbWV0YWRhdGFydC1zZWxlY3Rvcic7XHJcbmltcG9ydCB7IEdzcENvbXBvbmVudCB9IGZyb20gJ0Bnc3AtY21wL2NvbW1vbi1jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBEYXRhQ29sdW1uLCBEYXRhZ3JpZENvbXBvbmVudCB9IGZyb20gJ0BmYXJyaXMvdWktZGF0YWdyaWQnO1xyXG5pbXBvcnQgeyBvZiwgZm9ya0pvaW4gfSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHsgUm93RWRpdFBhcmFtIH0gZnJvbSAnQGZhcnJpcy91aS1kYXRhZ3JpZC9saWIvdHlwZXMnO1xyXG5pbXBvcnQgeyBFZGl0b3JUeXBlcyB9IGZyb20gJ0BmYXJyaXMvdWktZGF0YWdyaWQtZWRpdG9ycyc7XHJcbmltcG9ydCB7IExvb2t1cEdyaWRDb21wb25lbnQgfSBmcm9tICdAZmFycmlzL3VpLWxvb2t1cCc7XHJcbmltcG9ydCB7IENvbXBvbmVudFBlcmZvcm1lclNlcnZpY2UgfSBmcm9tICcuL2NvbXBvbmVudC1wZXJmb3JtZXIuc2VydmljZSc7XHJcbmltcG9ydCB7IFdlYlNlcnZpY2VQYXJhbWV0ZXIsIFBhcmFtZXRlckZldGNoVmFsdWVNb2RlLCBIZWxwRmV0Y2hWYWx1ZVNldHRpbmcgfSBmcm9tICdAZ3NwLWNtcC93c2NtcC1tb2RlbHMnO1xyXG5pbXBvcnQgeyBDb21wb25lbnRQZXJmb3JtZXIsIEFjdHVhbFBhcmFtZXRlciB9IGZyb20gJy4vY29tcG9uZW50LXBlcmZvcm1lci5lbnRpdHknO1xyXG5pbXBvcnQgeyBQcm9jZXNzRGVVdGlsIH0gZnJvbSAnLi4vLi4vLi4vLi4vZG9tYWluL3Byb2Nlc3MtZGUtdXRpbCc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ2FwcC1jb21wb25lbnQtcGVyZm9ybWVyJyxcclxuICB0ZW1wbGF0ZVVybDogJy4vY29tcG9uZW50LXBlcmZvcm1lci5jb21wb25lbnQuaHRtbCcsXHJcbiAgc3R5bGVVcmxzOiBbJy4vY29tcG9uZW50LXBlcmZvcm1lci5jb21wb25lbnQuc2NzcyddLFxyXG4gIHByb3ZpZGVyczogW0NvbXBvbmVudFBlcmZvcm1lclNlcnZpY2VdXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBDb21wb25lbnRQZXJmb3JtZXJDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyVmlld0luaXQge1xyXG4gIEBIb3N0QmluZGluZygnY2xhc3MnKVxyXG4gIGNscyA9ICdmYXJyaXMtbWFpbi1hcmVhIGZsZXgtY29sdW1uJztcclxuXHJcbiAgcHJpdmF0ZSBjb21wb25lbnRQZXJmb3JtZXI6IENvbXBvbmVudFBlcmZvcm1lcjtcclxuICBAVmlld0NoaWxkKERhdGFncmlkQ29tcG9uZW50KSBncmlkOiBEYXRhZ3JpZENvbXBvbmVudDtcclxuICBAVmlld0NoaWxkKExvb2t1cEdyaWRDb21wb25lbnQpIGxvb2t1cDogTG9va3VwR3JpZENvbXBvbmVudDtcclxuXHJcbiAgQFZpZXdDaGlsZCgnaW5wdXRHcm91cCcpIGlucHV0R3JvdXA6IEVsZW1lbnRSZWY7XHJcbiAgc2hvd0NsZWFyQnV0dG9uID0gZmFsc2U7XHJcblxyXG5cclxuICBASW5wdXQoKVxyXG4gIHNldCBjb21wb25lbnQoY21wOiBDb21wb25lbnRQZXJmb3JtZXIpIHtcclxuICAgIGlmIChjbXAgJiYgY21wLm1ldGhvZENvZGUpIHtcclxuICAgICAgdGhpcy5zZXJ2aWNlLmdldEhlbHBNZXRhRGF0YShjbXAubWV0YWRhdGFJZCwgJycpLnN1YnNjcmliZShyZSA9PiB7XHJcbiAgICAgICAgY29uc3QgYyA9IEpTT04ucGFyc2UocmUuY29udGVudCk7XHJcbiAgICAgICAgY29uc3Qgb3BlcmF0aW9uID0gYy5vcGVyYXRpb25zLmZpbmQobyA9PiBvLmNvZGUgPT09IGNtcC5tZXRob2RDb2RlKTtcclxuICAgICAgICBpZiAob3BlcmF0aW9uKSB7XHJcbiAgICAgICAgICBjbXAuYWN0dWFsUGFyYW1ldGVycyA9IGNtcC5hY3R1YWxQYXJhbWV0ZXJzLm1hcChhID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcCA9IG9wZXJhdGlvbi5wYXJhbWV0ZXJzLmZpbmQoaSA9PiBpLmNvZGUgPT09IGEuY29kZSk7XHJcbiAgICAgICAgICAgIGlmIChwKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGNvZGU6IGEuY29kZSxcclxuICAgICAgICAgICAgICAgIG5hbWU6IHAubmFtZSxcclxuICAgICAgICAgICAgICAgIHZhbHVlOiBhLnZhbHVlLFxyXG4gICAgICAgICAgICAgICAgdmFsdWVUZXh0OiBhLnZhbHVlVGV4dCA/IGEudmFsdWVUZXh0IDogYS52YWx1ZSxcclxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBwLmRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgICAgICAgdGFnOiBhLnRhZyxcclxuICAgICAgICAgICAgICAgIGZldGNoVmFsdWVNb2RlOiBwLmZldGNoVmFsdWVNb2RlLFxyXG4gICAgICAgICAgICAgICAgZmV0Y2hWYWx1ZVNldHRpbmc6IHAuZmV0Y2hWYWx1ZVNldHRpbmdcclxuICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcign5b2T5YmN5p6E5Lu25pa55rOV5Y+C5pWw5LiN5LiA6Ie077yM6K+35pu05paw77yBJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgdGhpcy5jb21wb25lbnRQZXJmb3JtZXIgPSBjbXA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcign5b2T5YmN5p6E5Lu25bey5LiN5a2Y5Zyo5q2k5pa55rOV77yM6K+35pu05paw77yBJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuY29tcG9uZW50UGVyZm9ybWVyID0gbmV3IENvbXBvbmVudFBlcmZvcm1lcigpO1xyXG4gICAgfVxyXG4gIH1cclxuICBnZXQgY29tcG9uZW50KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuY29tcG9uZW50UGVyZm9ybWVyO1xyXG4gIH1cclxuXHJcbiAgY3VyUGFyYW1ldGVyOiBBY3R1YWxQYXJhbWV0ZXI7XHJcbiAgY29sdW1ucyA9IFtcclxuICAgIHsgZmllbGQ6ICdjb2RlJywgd2lkdGg6IDYwLCB0aXRsZTogJ+e8luWPtycgfSxcclxuICAgIHsgZmllbGQ6ICduYW1lJywgd2lkdGg6IDYwLCB0aXRsZTogJ+WQjeensCcgfSxcclxuICAgIHsgZmllbGQ6ICdkZXNjcmlwdGlvbicsIHdpZHRoOiA2MCwgdGl0bGU6ICfmj4/ov7AnLCBzaG93VGlwczogdHJ1ZSB9LFxyXG4gICAge1xyXG4gICAgICBmaWVsZDogJ3ZhbHVlVGV4dCcsIHdpZHRoOiAxMDAsIHRpdGxlOiAn5Y+C5pWw5YC8JyxcclxuICAgICAgZWRpdG9yOiB7XHJcbiAgICAgICAgdHlwZTogJ2lucHV0LWdyb3VwJyxcclxuICAgICAgICBvcHRpb25zOiB7XHJcbiAgICAgICAgICBncm91cFRleHQ6ICc8aSBjbGFzcz1cImYtaWNvbiBmLWljb24tbG9va3VwXCI+PC9pPicsXHJcbiAgICAgICAgICBlZGl0YWJsZTogZmFsc2UsXHJcbiAgICAgICAgICBjbGlja0hhbmRsZTogKGUpID0+IHtcclxuICAgICAgICAgICAgZS5mb3JtQ29udHJvbC5zZXRWYWx1ZShlLmluc3RhbmNlLnZhbHVlID8gZS5pbnN0YW5jZS52YWx1ZSA6ICcnKTtcclxuICAgICAgICAgICAgdGhpcy5zaG93RXhwckhlbHAoZSk7XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgY2xlYXI6IChlKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIOa4heeQhnZhbHVlVGV4dO+8jOS5n+W6lOivpea4heeQhnZhbHVlXHJcbiAgICAgICAgICAgIGUucm93RGF0YS52YWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHAgb2YgdGhpcy5jb21wb25lbnQuYWN0dWFsUGFyYW1ldGVycykge1xyXG4gICAgICAgICAgICAgIGlmIChwLmNvZGUgPT09IGUucm93SWQpIHtcclxuICAgICAgICAgICAgICAgIHAudmFsdWUgPSAnJztcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICBdO1xyXG4gIGhlbHBJbmZvID0ge1xyXG4gICAgaGVscElkOiAnJyxcclxuICAgIHN1OiAnJyxcclxuICAgIGNvbHVtbnM6IFtdLFxyXG4gICAgZGlzcGxheVR5cGU6ICdMaXN0JyxcclxuICAgIGl0ZW1zOiBbXSxcclxuICAgIHBhZ2VJbmZvOiB7XHJcbiAgICAgIHBhZ2VJbmRleDogMSxcclxuICAgICAgcGFnZUxpc3Q6IFsxMCwgMjAsIDMwLCA1MF0sXHJcbiAgICAgIHBhZ2VTaXplOiAyMFxyXG4gICAgfSxcclxuICAgIHNlYXJjaDogeyBjYXRlZ29yeTogJ3NlYXJjaCd9LFxyXG4gICAgdGl0bGU6ICfluK7liqknLFxyXG4gICAgdG90YWw6IDEwMCxcclxuICAgIGZpZWxkSW5mbzoge1xyXG4gICAgICBpZEZpZWxkOiAnaWQnLFxyXG4gICAgICB0ZXh0RmllbGQ6ICduYW1lJyxcclxuICAgICAgdmFsdWVGaWVsZDogJ2lkJ1xyXG4gICAgfVxyXG4gIH07XHJcbiAgY2VsbDogYW55O1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgcHJpdmF0ZSBmb3JtQnVpbGRlcjogRm9ybUJ1aWxkZXIsXHJcbiAgICBwcml2YXRlIGRlc2lnbmVyU3RhdGU6IFByb2Nlc3NEZXNpZ25lclVJU3RhdGUsXHJcbiAgICBwcml2YXRlIGV4cHI6IEV4cHJlc3Npb25TZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSByZXNvbHZlcjogQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLFxyXG4gICAgcHJpdmF0ZSBpbmplY3RvcjogSW5qZWN0b3IsXHJcbiAgICBwcml2YXRlIHNlc3Npb25TcmM6IFNlc3Npb25TZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBtb2RhbFNlcnZpY2U6IEJzTW9kYWxTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBjb21wb25lbnRTZXJ2aWNlOiBDb21tb25Db21wb25lbnRVaVJUU2VydmljZSxcclxuICAgIHByaXZhdGUgbmdab25lOiBOZ1pvbmUsXHJcbiAgICBwcml2YXRlIHNlcnZpY2U6IENvbXBvbmVudFBlcmZvcm1lclNlcnZpY2UsXHJcbiAgICBwcml2YXRlIHV0aWw6IFByb2Nlc3NEZVV0aWxcclxuICApIHsgfVxyXG5cclxuICBuZ09uSW5pdCgpIHtcclxuICB9XHJcbiAgbmdBZnRlclZpZXdJbml0KCk6IHZvaWQge1xyXG4gICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xyXG4gICAgICB0aGlzLmlucHV0R3JvdXAubmF0aXZlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICdtb3VzZWVudGVyJyxcclxuICAgICAgICB0aGlzLm9uTW91c2VFbnRlci5iaW5kKHRoaXMpXHJcbiAgICAgICk7XHJcbiAgICAgIHRoaXMuaW5wdXRHcm91cC5uYXRpdmVFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgJ21vdXNlbGVhdmUnLFxyXG4gICAgICAgIHRoaXMub25Nb3VzZUxlYXZlLmJpbmQodGhpcylcclxuICAgICAgKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgb25Nb3VzZUVudGVyKGV2ZW50KSB7XHJcbiAgICB0aGlzLnNob3dDbGVhckJ1dHRvbiA9IHRydWU7XHJcbiAgICBpZiAodGhpcy5zaG93Q2xlYXJCdXR0b24pIHtcclxuICAgICAgdGhpcy50b2dnbGVDbGVhckljb24oZXZlbnQsIHRydWUpO1xyXG4gICAgfVxyXG4gIH1cclxuICBvbk1vdXNlTGVhdmUoZXZlbnQpIHtcclxuICAgIHRoaXMuc2hvd0NsZWFyQnV0dG9uID0gZmFsc2U7XHJcbiAgICB0aGlzLnRvZ2dsZUNsZWFySWNvbihldmVudCwgZmFsc2UpO1xyXG4gIH1cclxuICBwcml2YXRlIHRvZ2dsZUNsZWFySWNvbihldmVudDogYW55LCBpc1Nob3cgPSBmYWxzZSkge1xyXG4gICAgY29uc3Qgc3RyID0gaXNTaG93ID8gJycgOiAnbm9uZSc7XHJcbiAgICBjb25zdCBjbGVhckljb24gPSBldmVudC50YXJnZXQucXVlcnlTZWxlY3RvcignLmlucHV0LWdyb3VwLWNsZWFyJyk7XHJcbiAgICBpZiAoY2xlYXJJY29uKSB7XHJcbiAgICAgIGNsZWFySWNvbi5zdHlsZS5kaXNwbGF5ID0gc3RyO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2VsZWN0Q2hhbmdlZChldmVudCkge1xyXG4gICAgdGhpcy5jdXJQYXJhbWV0ZXIgPSBldmVudC5kYXRhO1xyXG4gIH1cclxuICBiZWZvcmVFZGl0ID0gKHBhcmFtOiBSb3dFZGl0UGFyYW0pID0+IHtcclxuICAgIGNvbnN0IHJvd0RhdGEgPSBwYXJhbS5yb3dEYXRhIGFzIGFueTtcclxuICAgIHRoaXMuY3VyUGFyYW1ldGVyID0gcm93RGF0YTtcclxuICAgIHN3aXRjaCAocm93RGF0YS5mZXRjaFZhbHVlTW9kZSkge1xyXG4gICAgICBjYXNlIFBhcmFtZXRlckZldGNoVmFsdWVNb2RlLmV4cHJlc3M6XHJcbiAgICAgICAgcGFyYW0uY29sdW1uLmVkaXRvciA9IHtcclxuICAgICAgICAgIHR5cGU6ICdpbnB1dC1ncm91cCcsXHJcbiAgICAgICAgICBvcHRpb25zOiB7XHJcbiAgICAgICAgICAgIGdyb3VwVGV4dDogJzxpIGNsYXNzPVwiZi1pY29uIGYtaWNvbi1sb29rdXBcIj48L2k+JyxcclxuICAgICAgICAgICAgZWRpdGFibGU6IGZhbHNlLFxyXG4gICAgICAgICAgICBjbGlja0hhbmRsZTogKGUpID0+IHtcclxuICAgICAgICAgICAgICBlLmZvcm1Db250cm9sLnNldFZhbHVlKGUuaW5zdGFuY2UudmFsdWUgPyBlLmluc3RhbmNlLnZhbHVlIDogJycpO1xyXG4gICAgICAgICAgICAgIHRoaXMuc2hvd0V4cHJIZWxwKGUpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjbGVhcjogKGUpID0+IHtcclxuICAgICAgICAgICAgICAvLyDmuIXnkIZ2YWx1ZVRleHTvvIzkuZ/lupTor6XmuIXnkIZ2YWx1ZVxyXG4gICAgICAgICAgICAgIGUucm93RGF0YS52YWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICAgIGZvciAoY29uc3QgcCBvZiB0aGlzLmNvbXBvbmVudC5hY3R1YWxQYXJhbWV0ZXJzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocC5jb2RlID09PSBlLnJvd0lkKSB7XHJcbiAgICAgICAgICAgICAgICAgIHAudmFsdWUgPSAnJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFBhcmFtZXRlckZldGNoVmFsdWVNb2RlLm5vbmU6XHJcbiAgICAgICAgcGFyYW0uY29sdW1uLmVkaXRvciA9IHtcclxuICAgICAgICAgIHR5cGU6ICdpbnB1dC1ncm91cCcsXHJcbiAgICAgICAgICBvcHRpb25zOiB7XHJcbiAgICAgICAgICAgIGdyb3VwVGV4dDogJzxpIGNsYXNzPVwiZi1pY29uIGYtaWNvbi1sb29rdXBcIj48L2k+JyxcclxuICAgICAgICAgICAgZWRpdGFibGU6IGZhbHNlLFxyXG4gICAgICAgICAgICBjbGlja0hhbmRsZTogKGUpID0+IHtcclxuICAgICAgICAgICAgICBlLmZvcm1Db250cm9sLnNldFZhbHVlKGUuaW5zdGFuY2UudmFsdWUgPyBlLmluc3RhbmNlLnZhbHVlIDogJycpO1xyXG4gICAgICAgICAgICAgIHRoaXMuc2hvd0V4cHJIZWxwKGUpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjbGVhcjogKGUpID0+IHtcclxuICAgICAgICAgICAgICAvLyDmuIXnkIZ2YWx1ZVRleHTvvIzkuZ/lupTor6XmuIXnkIZ2YWx1ZVxyXG4gICAgICAgICAgICAgIGUucm93RGF0YS52YWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICAgIGZvciAoY29uc3QgcCBvZiB0aGlzLmNvbXBvbmVudC5hY3R1YWxQYXJhbWV0ZXJzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocC5jb2RlID09PSBlLnJvd0lkKSB7XHJcbiAgICAgICAgICAgICAgICAgIHAudmFsdWUgPSAnJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFBhcmFtZXRlckZldGNoVmFsdWVNb2RlLmNvbnN0OlxyXG4gICAgICAgIHBhcmFtLmNvbHVtbi5lZGl0b3IgPSB7IHR5cGU6IEVkaXRvclR5cGVzLlRFWFRCT1gsIG9wdGlvbnM6IHt9IH07XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgUGFyYW1ldGVyRmV0Y2hWYWx1ZU1vZGUuZW51bTpcclxuICAgICAgICBwYXJhbS5jb2x1bW4uZWRpdG9yID0geyB0eXBlOiBFZGl0b3JUeXBlcy5URVhUQk9YLCBvcHRpb25zOiB7fSB9O1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFBhcmFtZXRlckZldGNoVmFsdWVNb2RlLmhlbHA6XHJcbiAgICAgICAgcGFyYW0uY29sdW1uLmVkaXRvciA9IHtcclxuICAgICAgICAgIHR5cGU6ICdpbnB1dC1ncm91cCcsXHJcbiAgICAgICAgICBvcHRpb25zOiB7XHJcbiAgICAgICAgICAgIGdyb3VwVGV4dDogJzxpIGNsYXNzPVwiZi1pY29uIGYtaWNvbi1sb29rdXBcIj48L2k+JyxcclxuICAgICAgICAgICAgZWRpdGFibGU6IGZhbHNlLFxyXG4gICAgICAgICAgICBjbGlja0hhbmRsZTogKGUpID0+IHtcclxuICAgICAgICAgICAgICB0aGlzLmNlbGwgPSBlO1xyXG4gICAgICAgICAgICAgIHRoaXMuaGVscEluZm8uaGVscElkID0gKHJvd0RhdGEuZmV0Y2hWYWx1ZVNldHRpbmcgYXMgSGVscEZldGNoVmFsdWVTZXR0aW5nKS5oZWxwSWQ7XHJcbiAgICAgICAgICAgICAgdGhpcy5oZWxwSW5mby5zdSA9IChyb3dEYXRhLmZldGNoVmFsdWVTZXR0aW5nIGFzIEhlbHBGZXRjaFZhbHVlU2V0dGluZykuc2VydmljZVVuaXQ7XHJcbiAgICAgICAgICAgICAgdGhpcy5oZWxwSW5mby5wYWdlSW5mbyA9IHtcclxuICAgICAgICAgICAgICAgIHBhZ2VJbmRleDogMSxcclxuICAgICAgICAgICAgICAgIHBhZ2VMaXN0OiBbMTAsIDIwLCAzMCwgNTBdLFxyXG4gICAgICAgICAgICAgICAgcGFnZVNpemU6IDIwXHJcbiAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICB0aGlzLmhlbHBJbmZvLnNlYXJjaCA9IHsgY2F0ZWdvcnk6ICdzZWFyY2gnIH07XHJcbiAgICAgICAgICAgICAgdGhpcy5nZXRIZWxwSW5mbygpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjbGVhcjogKGUpID0+IHtcclxuICAgICAgICAgICAgICAvLyDmuIXnkIZ2YWx1ZVRleHTvvIzkuZ/lupTor6XmuIXnkIZ2YWx1ZVxyXG4gICAgICAgICAgICAgIGUucm93RGF0YS52YWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICAgIGZvciAoY29uc3QgcCBvZiB0aGlzLmNvbXBvbmVudC5hY3R1YWxQYXJhbWV0ZXJzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocC5jb2RlID09PSBlLnJvd0lkKSB7XHJcbiAgICAgICAgICAgICAgICAgIHAudmFsdWUgPSAnJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG9mKHRydWUpO1xyXG4gIH1cclxuICBhZnRlckVkaXQgPSAocm93SW5kZXg6IG51bWJlciwgcm93RGF0YTogYW55LCBjb2x1bW4/OiBEYXRhQ29sdW1uKSA9PiB7XHJcbiAgICByZXR1cm4gb2YodHJ1ZSk7XHJcbiAgfVxyXG5cclxuICBlbmRFZGl0KGU6IGFueSkge1xyXG4gICAgLy8g5paH5pys5qGG57yW6L6R5ZCM5pe25L+u5pS5dmFsdWVcclxuICAgIGlmIChlLnJvd0RhdGEuZmV0Y2hWYWx1ZU1vZGUgPT09IFBhcmFtZXRlckZldGNoVmFsdWVNb2RlLmNvbnN0IHx8IGUucm93RGF0YS5mZXRjaFZhbHVlTW9kZSA9PT0gUGFyYW1ldGVyRmV0Y2hWYWx1ZU1vZGUuZW51bSkge1xyXG4gICAgICB0aGlzLmNvbXBvbmVudC5hY3R1YWxQYXJhbWV0ZXJzW2Uucm93SW5kZXhdLnZhbHVlID0gdGhpcy5jb21wb25lbnQuYWN0dWFsUGFyYW1ldGVyc1tlLnJvd0luZGV4XS52YWx1ZVRleHQ7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjbGVhcigpIHtcclxuICAgIHRoaXMuY29tcG9uZW50UGVyZm9ybWVyLm5hbWUgPSAnJztcclxuICAgIHRoaXMuY29tcG9uZW50UGVyZm9ybWVyLm1ldGFkYXRhSWQgPSAnJztcclxuICAgIHRoaXMuY29tcG9uZW50UGVyZm9ybWVyLm1ldGhvZENvZGUgPSAnJztcclxuICAgIHRoaXMuY29tcG9uZW50UGVyZm9ybWVyLm1ldGhvZE5hbWUgPSAnJztcclxuICAgIHRoaXMuY29tcG9uZW50UGVyZm9ybWVyLmNvbmRpdGlvbiA9ICcnO1xyXG4gICAgdGhpcy5jb21wb25lbnRQZXJmb3JtZXIuYWN0dWFsUGFyYW1ldGVycyA9IG5ldyBBcnJheSgpO1xyXG4gIH1cclxuXHJcbiAgc2VsZWN0Q29tcG9uZW50KCkge1xyXG4gICAgY29uc3QgY29tcEZhY3RvcnkgPSB0aGlzLnJlc29sdmVyLnJlc29sdmVDb21wb25lbnRGYWN0b3J5KFNlbGVjdE1ldGFkYXRhUlRDb21wb25lbnQpO1xyXG4gICAgY29uc3QgY29tcFJlZiA9IGNvbXBGYWN0b3J5LmNyZWF0ZSh0aGlzLmluamVjdG9yKTtcclxuICAgIGNvbXBSZWYuaW5zdGFuY2UudHlwZUxpc3QgPSAnV2ViU2VydmljZUNvbXBvbmVudCc7IC8vIOebruWJjeWPquiDveagueaNruWFg+aVsOaNruexu+Wei+i/h+a7pO+8jOWQjue7rea3u+WKoOagh+etvui/h+a7pFxyXG4gICAgY29tcFJlZi5pbnN0YW5jZS5zZWxlY3RlZE1ldGFkYXRhLnN1YnNjcmliZSgoJGV2ZW50OiBNZXRhZGF0YTRSZWZEdG8pID0+IHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBtZXRhOiBNZXRhZGF0YUR0byA9ICRldmVudC5tZXRhZGF0YTtcclxuICAgICAgICB0aGlzLm9wZW5Db21wb25lbnRTZWxlY3Rvck5ldyhtZXRhLmlkLCB0aGlzLnNlc3Npb25TcmMuZ2V0VXNlclNlc3Npb25JZCgpKTtcclxuICAgICAgfSBjYXRjaCB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJyRldmVudCcsICRldmVudCk7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfojrflj5bop6PmnpDmnoTku7blh7rplJknICsgJGV2ZW50KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgbW9kYWxDb25maWcgPSB7XHJcbiAgICAgIHRpdGxlOiAn5p6E5Lu26YCJ5oupJyxcclxuICAgICAgd2lkdGg6IDk4MCxcclxuICAgICAgaGVpZ2h0OiA1NDgsXHJcbiAgICAgIHNob3dCdXR0b25zOiBmYWxzZVxyXG4gICAgfTtcclxuICAgIGNvbnN0IGRpYWxvZyA9IHRoaXMubW9kYWxTZXJ2aWNlLnNob3coY29tcFJlZiwgbW9kYWxDb25maWcpO1xyXG4gICAgY29tcFJlZi5pbnN0YW5jZS5jbG9zZU1vZGFsRW1pdHRlci5zdWJzY3JpYmUoJGV2ZW50ID0+IGRpYWxvZy5jbG9zZSgpKTtcclxuICB9XHJcbiAgcHJpdmF0ZSBvcGVuQ29tcG9uZW50U2VsZWN0b3JOZXcobWV0YWRhdGFJZDogc3RyaW5nLCBzZXNzaW9uSWQ6IHN0cmluZykge1xyXG4gICAgdGhpcy5jb21wb25lbnRTZXJ2aWNlLm9wZW5TZWxlY3RvcihtZXRhZGF0YUlkLCBzZXNzaW9uSWQpLnN1YnNjcmliZShcclxuICAgICAgKHNlbGVjdG9yUmVzdWx0OiBTZWxlY3RvclJlc3VsdCkgPT4ge1xyXG4gICAgICAgIHNlbGVjdG9yUmVzdWx0LmNvbmZpcm1FdmVudC5zdWJzY3JpYmUoXHJcbiAgICAgICAgICAocmVzdWx0OiBHc3BDb21wb25lbnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50Lm5hbWUgPSByZXN1bHQubmFtZTtcclxuICAgICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5tZXRhZGF0YUlkID0gcmVzdWx0LmlkO1xyXG4gICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50Lm1ldGhvZENvZGUgPSByZXN1bHQub3BlcmF0aW9uc1swXS5jb2RlO1xyXG4gICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50Lm1ldGhvZE5hbWUgPSByZXN1bHQub3BlcmF0aW9uc1swXS5uYW1lO1xyXG4gICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LmFjdHVhbFBhcmFtZXRlcnMgPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgaWYgKHJlc3VsdC5vcGVyYXRpb25zWzBdLnBhcmFtZXRlcnMgJiYgcmVzdWx0Lm9wZXJhdGlvbnNbMF0ucGFyYW1ldGVycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5hY3R1YWxQYXJhbWV0ZXJzID0gcmVzdWx0Lm9wZXJhdGlvbnNbMF0ucGFyYW1ldGVyc1xyXG4gICAgICAgICAgICAgICAgICAubWFwKChwOiBXZWJTZXJ2aWNlUGFyYW1ldGVyKSA9PiAoXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgY29kZTogcC5jb2RlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgbmFtZTogcC5uYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgdmFsdWVUZXh0OiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBwLmRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgZmV0Y2hWYWx1ZU1vZGU6IHAuZmV0Y2hWYWx1ZU1vZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICBmZXRjaFZhbHVlU2V0dGluZzogcC5mZXRjaFZhbHVlU2V0dGluZ1xyXG4gICAgICAgICAgICAgICAgICAgIH0pIGFzIGFueSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG4gIHNob3dFeHBySGVscChlOiBhbnkpIHtcclxuICAgIGlmICh0aGlzLmRlc2lnbmVyU3RhdGUuc2NoZW1hcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGZvciAoY29uc3Qgc2NoZW1hIG9mIHRoaXMuZGVzaWduZXJTdGF0ZS5zY2hlbWFzKSB7XHJcbiAgICAgICAgdGhpcy5leHByLmFkZFNjaGVtYSgnU2NoZW1hJywgc2NoZW1hKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5kZXNpZ25lclN0YXRlLnNjaGVtYXNbMF0uZW50aXR5VHlwZXMgJiYgdGhpcy5kZXNpZ25lclN0YXRlLnNjaGVtYXNbMF0uZW50aXR5VHlwZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGNvbnN0IGVudGl0eVR5cGUgPSB0aGlzLmRlc2lnbmVyU3RhdGUuc2NoZW1hc1swXS5lbnRpdHlUeXBlc1swXTtcclxuICAgICAgICB0aGlzLmV4cHIuYWRkSW5qZWN0ZWRFbnRpdHkoZW50aXR5VHlwZS5uYW1lLCAnU2NoZW1hJyxcclxuICAgICAgICAgIGVudGl0eVR5cGUubmFtZSwgSW5qZWN0ZWRUeXBlLkVudGl0eVR5cGUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zdCBjb250ZXh0ID0gbmV3IEFycmF5KCk7XHJcbiAgICBpZiAodGhpcy5kZXNpZ25lclN0YXRlLnByb2NJbnN0Q29udGV4dC5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGZvciAoY29uc3QgdmFyaWFibGUgb2YgdGhpcy5kZXNpZ25lclN0YXRlLnByb2NJbnN0Q29udGV4dCkge1xyXG4gICAgICAgIGNvbnRleHQucHVzaCh2YXJpYWJsZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmICh0aGlzLmRlc2lnbmVyU3RhdGUuZm9ybWFsUGFyYW1ldGVyQ29udGV4dC5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGZvciAoY29uc3QgdmFyaWFibGUgb2YgdGhpcy5kZXNpZ25lclN0YXRlLmZvcm1hbFBhcmFtZXRlckNvbnRleHQpIHtcclxuICAgICAgICBpZiAoIWNvbnRleHQuc29tZShjID0+IGMua2V5ID09PSB2YXJpYWJsZS5rZXkpKSB7XHJcbiAgICAgICAgICBjb250ZXh0LnB1c2godmFyaWFibGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuZGVzaWduZXJTdGF0ZS5wYXJ0aWNpcGFudENvbnRleHQubGVuZ3RoID4gMCkge1xyXG4gICAgICBmb3IgKGNvbnN0IHZhcmlhYmxlIG9mIHRoaXMuZGVzaWduZXJTdGF0ZS5wYXJ0aWNpcGFudENvbnRleHQpIHtcclxuICAgICAgICBpZiAoIWNvbnRleHQuc29tZShjID0+IGMua2V5ID09PSB2YXJpYWJsZS5rZXkpKSB7XHJcbiAgICAgICAgICBjb250ZXh0LnB1c2godmFyaWFibGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuZGVzaWduZXJTdGF0ZS5wcm9jZXNzVmFyaWFibGVDb250ZXh0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCB2YXJpYWJsZSBvZiB0aGlzLmRlc2lnbmVyU3RhdGUucHJvY2Vzc1ZhcmlhYmxlQ29udGV4dCkge1xyXG4gICAgICAgIGlmICghY29udGV4dC5zb21lKGMgPT4gYy5rZXkgPT09IHZhcmlhYmxlLmtleSkpIHtcclxuICAgICAgICAgIGNvbnRleHQucHVzaCh2YXJpYWJsZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoY29udGV4dC5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGZvciAoY29uc3QgdiBvZiBjb250ZXh0KSB7XHJcbiAgICAgICAgdGhpcy5leHByLmFkZENvbnRleHQodik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMuZXhwci5zZXRFZGl0UGF0dGVybihFeHByRWRpdE1vZGUuQWR2YW5jZWQpOyAvLyDpu5jorqTmiZPlvIDpq5jnuqfooajovr7lvI/nvJbovpHlmahcclxuICAgIHRoaXMuZXhwci5hZGRFeHByZXNzaW9uVGV4dChlLmluc3RhbmNlLnZhbHVlKTtcclxuICAgIHRoaXMuZXhwci5idWlsZEV4cHJlc3Npb24oKS50aGVuKChkOiBzdHJpbmcpID0+IHtcclxuICAgICAgaWYgKGQpIHtcclxuICAgICAgICBlLmZvcm1Db250cm9sLnNldFZhbHVlKGQpO1xyXG4gICAgICAgIGUuaW5zdGFuY2UuY2QuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIGUucm93RGF0YS52YWx1ZSA9IGQ7XHJcbiAgICAgICAgZm9yIChjb25zdCBwIG9mIHRoaXMuY29tcG9uZW50LmFjdHVhbFBhcmFtZXRlcnMpIHtcclxuICAgICAgICAgIGlmIChwLmNvZGUgPT09IGUucm93SWQpIHtcclxuICAgICAgICAgICAgcC52YWx1ZSA9IGQ7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGdldFBlcmZvcm1lcnMoKSB7XHJcbiAgICB0aGlzLmdyaWQuZW5kQ2VsbEVkaXQoKTtcclxuICAgIGNvbnNvbGUubG9nKHRoaXMuY29tcG9uZW50KTtcclxuICAgIHJldHVybiB0aGlzLmNvbXBvbmVudDtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0SGVscEluZm8oKSB7XHJcbiAgICBmb3JrSm9pbih0aGlzLnNlcnZpY2UuZ2V0SGVscE1ldGFEYXRhKHRoaXMuaGVscEluZm8uaGVscElkLCB0aGlzLmhlbHBJbmZvLnN1KSxcclxuICAgICAgdGhpcy5zZXJ2aWNlLmdldExvb2tVcERhdGEodGhpcy5oZWxwSW5mby5oZWxwSWQsIHRoaXMuaGVscEluZm8uc3UsXHJcbiAgICAgICAgdGhpcy5oZWxwSW5mby5wYWdlSW5mby5wYWdlSW5kZXgsIHRoaXMuaGVscEluZm8ucGFnZUluZm8ucGFnZVNpemUsIHRoaXMuaGVscEluZm8uc2VhcmNoKSkuc3Vic2NyaWJlKHJlID0+IHtcclxuICAgICAgICBpZiAocmVbMF0pIHtcclxuICAgICAgICAgIGNvbnN0IG1ldGEgPSByZVswXTtcclxuICAgICAgICAgIGNvbnN0IGhlbHAgPSBKU09OLnBhcnNlKG1ldGEuY29udGVudCkgYXMgYW55O1xyXG4gICAgICAgICAgdGhpcy5oZWxwSW5mby5jb2x1bW5zID0gaGVscC5kYXRhU291cmNlLmNvbHVtbnM7XHJcbiAgICAgICAgICB0aGlzLmhlbHBJbmZvLmRpc3BsYXlUeXBlID0gaGVscC5kaXNwbGF5VHlwZTtcclxuICAgICAgICAgIHRoaXMuaGVscEluZm8uZmllbGRJbmZvID0ge1xyXG4gICAgICAgICAgICBpZEZpZWxkOiBoZWxwLmlkRmllbGQsXHJcbiAgICAgICAgICAgIHZhbHVlRmllbGQ6IGhlbHAudmFsdWVGaWVsZCxcclxuICAgICAgICAgICAgdGV4dEZpZWxkOiBoZWxwLnRleHRGaWVsZFxyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfluK7liqnlhYPmlbDmja7kuI3lrZjlnKjvvIEnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJlWzFdKSB7XHJcbiAgICAgICAgICBjb25zdCBoZWxwRGF0YSA9IHJlWzFdO1xyXG4gICAgICAgICAgdGhpcy5oZWxwSW5mby5pdGVtcyA9IGhlbHBEYXRhLml0ZW1zO1xyXG4gICAgICAgICAgdGhpcy5oZWxwSW5mby50aXRsZSA9IGhlbHBEYXRhLnRpdGxlO1xyXG4gICAgICAgICAgdGhpcy5oZWxwSW5mby50b3RhbCA9IGhlbHBEYXRhLnRvdGFsO1xyXG4gICAgICAgICAgdGhpcy5sb29rdXAuc2hvd0RpYWxvZygpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+iOt+WPluW4ruWKqeaVsOaNrua6kOWksei0pe+8gScpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBkaWN0UGlja2VkID0gKHJvd0RhdGEpID0+IHtcclxuICAgIGlmICh0aGlzLmNlbGwpIHtcclxuICAgICAgdGhpcy5jZWxsLmZvcm1Db250cm9sLnNldFZhbHVlKHRoaXMudXRpbC5nZXRWYWx1ZShyb3dEYXRhLCB0aGlzLmhlbHBJbmZvLmZpZWxkSW5mby50ZXh0RmllbGQpKTtcclxuICAgICAgdGhpcy5jZWxsLmluc3RhbmNlLmNkLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgdGhpcy5jZWxsLnJvd0RhdGEudmFsdWUgPSB0aGlzLnV0aWwuZ2V0VmFsdWUocm93RGF0YSwgdGhpcy5oZWxwSW5mby5maWVsZEluZm8udmFsdWVGaWVsZCk7XHJcbiAgICAgIGZvciAoY29uc3QgcCBvZiB0aGlzLmNvbXBvbmVudC5hY3R1YWxQYXJhbWV0ZXJzKSB7XHJcbiAgICAgICAgaWYgKHAuY29kZSA9PT0gdGhpcy5jZWxsLnJvd0lkKSB7XHJcbiAgICAgICAgICBwLnZhbHVlID0gdGhpcy51dGlsLmdldFZhbHVlKHJvd0RhdGEsIHRoaXMuaGVscEluZm8uZmllbGRJbmZvLnZhbHVlRmllbGQpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gb2YodHJ1ZSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHBhZ2VyQ2hhbmdlZChkYXRhOiBhbnkpIHtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgIHRoaXMuaGVscEluZm8ucGFnZUluZm8ucGFnZUluZGV4ID0gZGF0YS5wYWdlSW5kZXg7XHJcbiAgICAgIHRoaXMuaGVscEluZm8ucGFnZUluZm8ucGFnZVNpemUgPSBkYXRhLnBhZ2VTaXplO1xyXG4gICAgICB0aGlzLnNlcnZpY2UuZ2V0TG9va1VwRGF0YSh0aGlzLmhlbHBJbmZvLmhlbHBJZCwgdGhpcy5oZWxwSW5mby5zdSxcclxuICAgICAgICB0aGlzLmhlbHBJbmZvLnBhZ2VJbmZvLnBhZ2VJbmRleCwgdGhpcy5oZWxwSW5mby5wYWdlSW5mby5wYWdlU2l6ZSwgdGhpcy5oZWxwSW5mby5zZWFyY2gpXHJcbiAgICAgICAgLnN1YnNjcmliZShyZSA9PiB7XHJcbiAgICAgICAgICB0aGlzLmhlbHBJbmZvLml0ZW1zID0gcmUuaXRlbXM7XHJcbiAgICAgICAgICB0aGlzLmhlbHBJbmZvLnRpdGxlID0gcmUudGl0bGU7XHJcbiAgICAgICAgICB0aGlzLmhlbHBJbmZvLnRvdGFsID0gcmUudG90YWw7XHJcbiAgICAgICAgICB0aGlzLmxvb2t1cC5sb2FkRGF0YShyZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHNlYXJjaChkYXRhKSB7XHJcbiAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgIHRoaXMuaGVscEluZm8uc2VhcmNoID0geyBjYXRlZ29yeTogJ3NlYXJjaCcgfTtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgIGNvbnN0IHNlYXJjaEluZm8gPSB7XHJcbiAgICAgICAgc2VhcmNoRmllbGQ6IGRhdGEuZmllbGQgfHwgZGF0YS5zZWFyY2guZmllbGQsXHJcbiAgICAgICAgc2VhcmNoVmFsdWU6IGRhdGEudmFsdWUgfHwgZGF0YS5zZWFyY2gudmFsdWVcclxuICAgICAgfTtcclxuICAgICAgdGhpcy5oZWxwSW5mby5zZWFyY2ggPSBPYmplY3QuYXNzaWduKHRoaXMuaGVscEluZm8uc2VhcmNoLCBzZWFyY2hJbmZvKTtcclxuICAgICAgdGhpcy5zZXJ2aWNlLmdldExvb2tVcERhdGEodGhpcy5oZWxwSW5mby5oZWxwSWQsIHRoaXMuaGVscEluZm8uc3UsXHJcbiAgICAgICAgdGhpcy5oZWxwSW5mby5wYWdlSW5mby5wYWdlSW5kZXgsIHRoaXMuaGVscEluZm8ucGFnZUluZm8ucGFnZVNpemUsIHRoaXMuaGVscEluZm8uc2VhcmNoKVxyXG4gICAgICAgIC5zdWJzY3JpYmUocmUgPT4ge1xyXG4gICAgICAgICAgdGhpcy5oZWxwSW5mby5pdGVtcyA9IHJlLml0ZW1zO1xyXG4gICAgICAgICAgdGhpcy5oZWxwSW5mby50aXRsZSA9IHJlLnRpdGxlO1xyXG4gICAgICAgICAgdGhpcy5oZWxwSW5mby50b3RhbCA9IHJlLnRvdGFsO1xyXG4gICAgICAgICAgdGhpcy5sb29rdXAubG9hZERhdGEocmUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iXX0=