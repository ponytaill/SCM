/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, ViewChild, forwardRef, Output, EventEmitter, TemplateRef } from '@angular/core';
import { DialogComponent } from '@farris/ui-dialog';
import { NG_VALUE_ACCESSOR } from '@angular/forms';
import { FDropdownDirective } from '@farris/ui-dropdown';
import { UploadDialogService } from '@gsp-svc/formdoc-upload';
import { MessagerService } from '@farris/ui-messager';
import { FileUploadEntity, GspDocMetadata, GspDocUploadEntity } from '../../entity/attachment';
import { SignHereComponent } from '@gsp-wf/wf-sign';
import { AvatarComponent } from '@farris/ui-avatar';
import { DownloadService } from '@gsp-svc/file-load';
import { TaskService } from '../../service/task.service';
import { CommonComment } from '../../entity/comment';
import { forkJoin, of } from 'rxjs';
import { HttpService } from '@ecp-caf/caf-common';
import { DatagridComponent } from '@farris/ui-datagrid';
import { I18nService } from '../../service/i18n/i18n.service';
import { EditorTypes } from '@farris/ui-datagrid-editors';
import { LoadingService } from '@farris/ui-loading';
import { ConfigCode } from '../../entity/task-center-config';
import { NotifyService } from '@farris/ui-notify';
export class TaskCommentComponent {
    /**
     * @param {?} taskService
     * @param {?} httpSvc
     * @param {?} uploadDialog
     * @param {?} messageService
     * @param {?} i18nService
     * @param {?} loadingService
     * @param {?} notify
     */
    constructor(taskService, httpSvc, uploadDialog, messageService, i18nService, loadingService, notify) {
        this.taskService = taskService;
        this.httpSvc = httpSvc;
        this.uploadDialog = uploadDialog;
        this.messageService = messageService;
        this.i18nService = i18nService;
        this.loadingService = loadingService;
        this.notify = notify;
        this.showAttachment = true; //是否显示附件上传，组件控制
        //是否显示附件上传，组件控制
        this.showSign = true; //是否显示签名，组件控制（不同动作可能会不显示）
        //是否显示签名，组件控制（不同动作可能会不显示）
        this.showCommonComment = true; //是否显示常用意见
        this.placeholder = '';
        this.textAreaHeight = 120; //文字框的高度
        this.attachment = new EventEmitter(); //附件
        //附件
        this.signature = new EventEmitter(); //上传签名之后，发送签名id
        //常用意见删除
        this._value = '';
        this.attachmentList = [];
        this.ifShowAttachment = false; //任务中心配置，是否显示附件上传
        //任务中心配置，是否显示附件上传
        this.ifShowSign = false; //任务中心配置，是否显示手写签名
        //临时保存上传的图片
        this.downloadService = new DownloadService();
        this.ifUseSign = false; //是否使用手写
        //是否使用手写
        this.ifUseImg = true; //是否使用上传图片
        //是否使用上传图片
        this.ifEnableSign = true; //是否默认启用签名
        //是否默认启用签名
        this.ifUploadImg = false; //是否上传过图片
        //是否上传过图片
        this.ifCanEditSign = true; //是否允许编辑签名
        //原始的签名id
        this.commentList = [];
        this.originCommentList = [];
        this.commentColumns = [];
        this.onModelChange = (obj) => { };
        this.onModelTouched = (obj) => { };
        /**
         * 系统预置的不允许编辑删除
         * @param data data.rowData为实体数据
         * @return
         */
        this.beforeEdit = (data) => {
            if (data.rowData.userId == '*') {
                return of(false);
            }
            return of(true);
        };
    }
    //文字框的高度
    /**
     * @param {?} configList
     * @return {?}
     */
    set TaskCenterConfig(configList) {
        /** @type {?} */
        const attachment = configList.find(a => a.configCode == ConfigCode.If_Show_Attachment);
        /** @type {?} */
        const sign = configList.find(a => a.configCode == ConfigCode.If_Show_Signature);
        /** @type {?} */
        const enableSign = configList.find(a => a.configCode == ConfigCode.If_Use_Sign_By_Default);
        /** @type {?} */
        const editSign = configList.find(a => a.configCode === ConfigCode.If_Can_Edit_Signature);
        if (((/** @type {?} */ (window))).gspframeworkService.common) {
            this.curUserId = ((/** @type {?} */ (window))).gspframeworkService.common.userInfos.get().userId;
        }
        else {
            this.curUserId = ((/** @type {?} */ (window))).parent.gspframeworkService.common.userInfos.get().userId;
        }
        attachment && attachment.currentValue === 'true' && (this.ifShowAttachment = true);
        sign && sign.currentValue === 'true' && (this.ifShowSign = true);
        enableSign && enableSign.currentValue === 'false' && (this.ifEnableSign = false);
        editSign && editSign.currentValue === 'false' && (this.ifCanEditSign = false);
        if (this.ifShowSign && this.ifEnableSign) {
            this.getUserSign(this.curUserId);
        }
    }
    /**
     * @param {?} v
     * @return {?}
     */
    set value(v) {
        if (this._value !== v) {
            this._value = v;
            this.onModelChange(v);
        }
    }
    /**
     * @return {?}
     */
    get value() {
        return this._value;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.commentColumns = [{
                field: 'message',
                width: 100,
                title: this.i18nService.getValue('comment.static.content'),
                editor: { type: EditorTypes.TEXTBOX, options: {} },
            }, {
                field: 'userId',
                width: 20,
                title: this.i18nService.getValue('comment.static.type'),
                template: this.commentTypeCell
            }, {
                field: 'operate',
                width: 20,
                title: this.i18nService.getValue('comment.static.operate'),
                template: this.commentOperateCell
            }];
        // 获取常用意见列表
        this.loadComments();
    }
    /**
     * @return {?}
     */
    onEditComment() {
        this.dropDownEl.close();
        this.commentDialog.show();
    }
    /**
     * @return {?}
     */
    loadComments() {
        this.taskService.getCommentList().subscribe((data) => {
            this.commentList = data;
            this.originCommentList = [...data];
        });
    }
    /**
     * ControlValueAccessor必须实现的方法
     * @param {?} value
     * @return {?}
     */
    writeValue(value) {
        if (value !== this.value) {
            this.value = value;
        }
    }
    /**
     * @param {?} fn
     * @return {?}
     */
    registerOnChange(fn) {
        this.onModelChange = fn;
    }
    /**
     * @param {?} fn
     * @return {?}
     */
    registerOnTouched(fn) {
        this.onModelTouched = fn;
    }
    /**
     * 选择一条常用意见后事件
     * @param {?} data
     * @return {?}
     */
    buttonClick(data) {
        this.dropDownEl.close();
        this.value = data;
    }
    /**
     * 上传附件
     * @return {?}
     */
    uploadAttachment() {
        /** @type {?} */
        let isRepeat = false;
        this.uploadDialog.uploadFile(this.processInstanceId, 'wf_attachment').then(re => {
            for (let i of ((/** @type {?} */ (re)))) {
                isRepeat = false;
                for (let attach of this.attachmentList) {
                    if (attach.fileName === i.fileName) {
                        this.messageService.info('包含重复文件' + i.fileName);
                        isRepeat = true;
                        break;
                    }
                }
                if (!isRepeat) {
                    this.attachmentList.push(i);
                }
            }
            this.attachment.emit(this.attachmentList);
            //执行上传附件
            /** @type {?} */
            let files = new FileUploadEntity();
            files.rootId = "wf_attachment";
            files.metadataIdList = [];
            this.attachmentList.forEach(a => {
                files.metadataIdList.push(a.metadataId);
            });
            files.metadataIdList.length && this.taskService.uploadAttachment(files).subscribe(() => { });
        });
    }
    /**
     * 删除附件
     * @param {?} attachment
     * @return {?}
     */
    attachmentDelete(attachment) {
        /** @type {?} */
        var gspDocDeleteEntity = {
            rootId: "wf_attachment",
            metadataId: attachment.metadataId,
            mode: "Formal"
        };
        /** @type {?} */
        let index = this.attachmentList.indexOf(attachment);
        if (index > -1) {
            this.attachmentList.splice(index, 1);
        }
        this.attachment.emit(this.attachmentList);
        this.taskService.deleteAttachment(gspDocDeleteEntity).subscribe(() => { });
    }
    /**
     * 获取不同格式附件的缩略图
     * @param {?} attachmentInfo
     * @return {?}
     */
    imageUrl(attachmentInfo) {
        /** @type {?} */
        const url = '/platform/runtime/wf/webapp/mobiletaskcenter/assets/accessory/';
        return url + this.taskService.createItem(attachmentInfo) + '.svg';
    }
    /**
     * 展示手写签名dialog
     * @return {?}
     */
    showSignDialog() {
        this.signDialog.show();
        if (!this.ifEnableSign) {
            this.getUserSign(this.curUserId);
        }
    }
    /**
     * 点击删除签名
     * @return {?}
     */
    clickToDeleteImage() {
        this.signatureImage = '';
        this.signature.emit(null);
        /** @type {?} */
        const load = this.loadingService.show();
        this.taskService.addTaskCenterConfig(ConfigCode.If_Use_Sign_By_Default, 'false').subscribe(re => {
            load.close();
        }, () => {
            load.close();
        });
    }
    /**
     * @return {?}
     */
    clickToUseSign() {
        this.ifUseImg = false;
        this.ifUseSign = true;
        /** @type {?} */
        const canvas = this.signaturePad.canvasDiv.nativeElement.querySelector('canvas');
        canvas.height = 252;
        canvas.width = 665;
    }
    /**
     * @return {?}
     */
    clickToUploadImg() {
        this.farrisAvatar.onClick();
    }
    /**
     * @return {?}
     */
    clickToConfirm() {
        /** @type {?} */
        let image;
        if (this.signaturePad && this.signaturePad.isDraw) { //如果签过名
            image = this.signaturePad.confirm();
        }
        else if (this.ifUploadImg) { //如果上传过图片
            image = this.tmpSignatureImage;
        }
        if (image) {
            this.uploadSignatureImg(image);
        }
        else {
            if (this.tmpSignatureImage) {
                this.signatureImage = this.tmpSignatureImage;
                this.signature.emit(this.originSignId);
                if (!this.ifEnableSign) {
                    /** @type {?} */
                    const load = this.loadingService.show();
                    this.taskService.addTaskCenterConfig(ConfigCode.If_Use_Sign_By_Default, 'true').subscribe(re => {
                        load.close();
                    }, () => {
                        load.close();
                    });
                }
            }
            this.signDialog.close();
        }
    }
    /**
     * @return {?}
     */
    clickToReset() {
        this.ifUseSign = false;
        this.ifUseImg = true;
        this.signatureImage = '';
        this.tmpSignatureImage = '';
        this.signature.emit('');
    }
    /**
     * @return {?}
     */
    clickToCancel() {
        this.signDialog.close();
    }
    /**
     * 上传图片后事件
     * event.base64 是图片信息,event.name是带后缀的图片名，event.type如image/jpeg
     * @param {?} event
     * @return {?}
     */
    imgChange(event) {
        this.ifUseImg = true;
        this.ifUseSign = false;
        this.ifUploadImg = true;
        /** @type {?} */
        const image = event.base64;
        this.tmpSignatureImage = image;
        this.signatureImage = image;
    }
    /**
     * @private
     * @param {?} image
     * @return {?}
     */
    uploadSignatureImg(image) {
        /** @type {?} */
        var uploadSignature = new GspDocUploadEntity();
        uploadSignature.fileContent = image.split(',')[1];
        uploadSignature.filePath = this.curUserId;
        uploadSignature.mode = "Formal";
        uploadSignature.metadata = new GspDocMetadata();
        uploadSignature.metadata.id = this.taskService.createNM();
        uploadSignature.metadata.fileName = this.taskService.createNM() + ".png";
        uploadSignature.metadata.rootId = "taskcentersignature";
        uploadSignature.metadata.docType = "png";
        /** @type {?} */
        const load = this.loadingService.show();
        this.taskService.uploadSignature(uploadSignature).subscribe(signId => {
            load.close();
            this.originSignId = signId;
            this.signature.emit(signId);
            this.signatureImage = image;
            this.signDialog.close();
        }, error => {
            load.close();
            this.messageService.error('上传签名失败');
        });
    }
    /**
     * 获取用户的最近一次签名
     * @private
     * @param {?} userId
     * @return {?}
     */
    getUserSign(userId) {
        /** @type {?} */
        const load = this.loadingService.show();
        this.taskService.getUserSign(userId).subscribe(result => {
            load.close();
            if (result && result.length) {
                /** @type {?} */
                var sign;
                if (result.length == 1) {
                    sign = result[0];
                }
                else {
                    /** @type {?} */
                    const list = result.filter(a => a && a.lastModifiedTime);
                    sign = list.reduce(function (a, b) {
                        return a.lastModifiedTime > b.lastModifiedTime ? a : b;
                    });
                }
                this.signature.emit(sign.id);
                this.signatureImage = this.downloadService.getDownloadUrl(sign.id, 'taskcentersignature');
                this.tmpSignatureImage = this.signatureImage;
            }
        }, error => {
            console.error(error);
            load.close();
        });
    }
    /**
     * 新增一条常用意见
     * @return {?}
     */
    add() {
        /** @type {?} */
        const newEntity = CommonComment.newEntity();
        newEntity.sortOrder = this.commentList.length + 1;
        this.commentList = this.commentList.concat(newEntity);
    }
    /**
     * 删除一条意见 data.rowData
     * @param {?} data
     * @return {?}
     */
    clickToDeleteComment(data) {
        if (data.rowData.userId !== '*') {
            this.commentList = this.commentList.filter(c => c.id != data.rowData.id);
            this.dataGrid.loadData(this.commentList);
        }
    }
    /**
     * 常用意见保存
     * @return {?}
     */
    save() {
        this.dataGrid.endCellEdit();
        this.httpSave().subscribe(r => {
            this.loadComments();
            this.commentDialog.close();
        });
    }
    /**
     * 调用接口执行新增删除、修改
     * @private
     * @return {?}
     */
    httpSave() {
        /** @type {?} */
        const url = `/api/runtime/wf/v1.0/commonComments`;
        /** @type {?} */
        const originCommentIds = this.originCommentList.filter(o => o.userId !== '*').map(d => d.id);
        //删除的
        /** @type {?} */
        const deleteIds = originCommentIds.filter(id => this.commentList.findIndex(c => c.id === id) < 0);
        return forkJoin(deleteIds.map(id => this.httpSvc.delete(url + `/${id}`, null))
            .concat(this.commentList.map(add => this.httpSvc.post(url, add))));
    }
    /**
     * web端打开附件预览
     * @param {?} metadataId
     * @return {?}
     */
    attachmentPreview(metadataId) {
        /** @type {?} */
        const options = {
            appType: "app",
            funcId: "",
            tabName: "文档在线预览",
            appId: "6ccb476b-f2ba-df8f-6f47-d37d100c56e2",
            appEntrance: "docviewertab",
            tabId: new Date().getTime(),
            entityParams: {
                metadataIdList: [metadataId],
                rootId: "wf_attachment",
                metadataId: null,
                viewOptions: {
                    showHeader: true,
                    showPaging: true,
                    showThumbnails: true,
                    showDownload: true,
                    showSearch: true,
                    showZoom: true,
                    showPrint: true,
                    showSecondaryToolBar: true,
                },
            },
        };
        ((/** @type {?} */ (window))).gspframeworkService.rtf.func.openMenu(options);
    }
}
TaskCommentComponent.decorators = [
    { type: Component, args: [{
                selector: 'wf-comment',
                template: "<div\r\n  class=\"fa-approve-comment fa-approve-common-gutter\"\r\n  style=\"margin-bottom: 20px\"\r\n>\r\n  <!-- \u8F93\u5165\u6846 -->\r\n  <div class=\"fa-approve-comment--content\">\r\n    <textarea\r\n      class=\"form-control content-textarea\"\r\n      style=\"font-size: 13px\"\r\n      [(ngModel)]=\"value\"\r\n      [attr.placeholder]=\"placeholder\"\r\n      [style.height.px]=\"textAreaHeight\"\r\n    ></textarea>\r\n  </div>\r\n  <!-- \u8F93\u5165\u6846\u4E0B\u65B9\u4E00\u6392\u6309\u94AE -->\r\n  <div class=\"fa-approve-comment--footer\">\r\n    <div\r\n      *ngIf=\"showAttachment || showSign || showCommonComment\"\r\n      class=\"approve-comment--text-btns\"\r\n    >\r\n      <!-- \u5E38\u7528\u610F\u89C1 -->\r\n      <div *ngIf=\"showCommonComment\" class=\"text-btns-item\">\r\n        <span class=\"f-icon f-icon-message\"></span>\r\n        <div fDropdown #dropdownEl=\"fDropdown\">\r\n          <span fDropdownToggle>\r\n            {{ \"comment.static.inputLabel\" | translate }}\r\n          </span>\r\n          <div class=\"dropdown-menu\" fDropdownMenu>\r\n            <li\r\n              class=\"dropdown-item\"\r\n              *ngFor=\"let comment of commentList\"\r\n              (click)=\"buttonClick(comment.message)\"\r\n            >\r\n              <span>{{ comment.message }}</span>\r\n            </li>\r\n            <div class=\"dropdown-divider\"></div>\r\n            <!-- \u610F\u89C1\u7BA1\u7406 -->\r\n            <div class=\"dropdown-item\" (click)=\"onEditComment()\">\r\n              <span class=\"f-icon f-icon-home-setup\"></span>\r\n              <span>{{ \"comment.static.manage\" | translate }}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!-- \u4E0A\u4F20\u9644\u4EF6 -->\r\n      <div\r\n        class=\"text-btns-item\"\r\n        *ngIf=\"ifShowAttachment && showAttachment\"\r\n        (click)=\"uploadAttachment()\"\r\n        title=\"{{ 'comment.attachment.tips' | translate }}\"\r\n      >\r\n        <span class=\"f-icon f-icon-attachment\"></span>\r\n        <span class=\"text-btns-item--text\">\r\n          {{ \"comment.static.attachmentUpload\" | translate }}\r\n        </span>\r\n      </div>\r\n      <!-- \u624B\u5199\u7B7E\u540D -->\r\n      <div\r\n        class=\"text-btns-item\"\r\n        *ngIf=\"showSign && ifShowSign && ifCanEditSign\"\r\n        title=\"{{ 'comment.signature.tips' | translate }}\"\r\n        (click)=\"showSignDialog()\"\r\n      >\r\n        <span class=\"f-icon f-icon-edit\"></span>\r\n        <span>{{ \"comment.signature.title\" | translate }}</span>\r\n      </div>\r\n      <!-- \u624B\u5199\u7B7E\u540D\u9884\u89C8 -->\r\n      <div\r\n        *ngIf=\"showSign && ifShowSign && signatureImage\"\r\n        class=\"signatureImage\"\r\n      >\r\n        <img [src]=\"signatureImage\" style=\"width: 70px; height: 26px\" />\r\n        <div *ngIf=\"ifCanEditSign\"\r\n          class=\"attachment-delete\"\r\n          (click)=\"clickToDeleteImage()\"\r\n          title=\"{{ 'comment.signature.disable' | translate }}\"\r\n        >\r\n          <span class=\"f-icon f-icon-x\"></span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- \u9644\u4EF6\u9884\u89C8 -->\r\n    <div *ngIf=\"attachmentList.length > 0\">\r\n      <li *ngFor=\"let attachment of attachmentList\">\r\n        <div class=\"wf-docFile\">\r\n          <div><img class=\"wf-docFileIcon\" [src]=\"imageUrl(attachment)\" /></div>\r\n          <div class=\"wf-docFileInfo\">\r\n            <div class=\"attachment-list\">\r\n              <a>{{ attachment.fileName }}</a>\r\n            </div>\r\n            <div\r\n              class=\"attachment-delete\"\r\n              (click)=\"attachmentDelete(attachment)\"\r\n            >\r\n              <span class=\"f-icon f-icon-close-outline\"></span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </li>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- \u5E38\u7528\u610F\u89C1\u7EF4\u62A4 -->\r\n<farris-dialog\r\n  #commentDialog\r\n  [buttons]=\"formButtonRef\"\r\n  [width]=\"740\"\r\n  [height]=\"440\"\r\n  [title]=\"'comment.static.title' | translate\"\r\n>\r\n  <div class=\"task-center-comment-datagrid-div\">\r\n    <farris-datagrid\r\n      #dataGrid\r\n      [data]=\"commentList\"\r\n      [columns]=\"commentColumns\"\r\n      [editable]=\"true\"\r\n      [fit]=\"true\"\r\n      [editMode]=\"'cell'\"\r\n      [pagination]=\"false\"\r\n      [fitColumns]=\"true\"\r\n      [clickToEdit]=\"true\"\r\n      [beforeEdit]=\"beforeEdit\"\r\n    >\r\n    </farris-datagrid>\r\n  </div>\r\n  <div class=\"task-comment-add task-comment-add-common\" (click)=\"add()\">\r\n    <span class=\"f-icon f-icon-plus mr-1\"></span>\r\n    <span>{{ \"comment.static.clickToAdd\" | translate }}</span>\r\n  </div>\r\n</farris-dialog>\r\n\r\n<!-- \u5E38\u7528\u610F\u89C1\u7EF4\u62A4\u6309\u94AE -->\r\n<ng-template #formButtonRef>\r\n  <button class=\"btn btn-primary mr-2\" (click)=\"save()\">\r\n    {{ \"comment.static.confirm\" | translate }}\r\n  </button>\r\n  <button class=\"btn btn-secondary\" (click)=\"commentDialog.close()\">\r\n    {{ \"comment.static.cancel\" | translate }}\r\n  </button>\r\n</ng-template>\r\n\r\n<!-- \u7B7E\u540D\u5F39\u6846 -->\r\n<farris-dialog\r\n  #signDialog\r\n  [buttons]=\"signButtons\"\r\n  [width]=\"710\"\r\n  [height]=\"420\"\r\n  [title]=\"'comment.signature.dialogTitle' | translate\"\r\n  [resizable]=\"false\"\r\n  [showMaxButton]=\"false\"\r\n>\r\n  <wf-sign-here\r\n    #wfSignHere\r\n    [title]=\"''\"\r\n    [ngStyle]=\"!ifUseSign ? { display: 'none' } : null\"\r\n  ></wf-sign-here>\r\n  <div *ngIf=\"ifUseImg && tmpSignatureImage\" class=\"signature-img-default\">\r\n    <img [src]=\"tmpSignatureImage\" style=\"height: 252px\" />\r\n  </div>\r\n  <div *ngIf=\"ifUseImg && !tmpSignatureImage\" class=\"signature-img-div\">\r\n    <div class=\"signature-img-main\">\r\n      <div style=\"margin-bottom: 28px\">\r\n        <img\r\n          src=\"/platform/runtime/common/web/@gsp-wf/wf-task-handler/assets/img/signIcon.svg?v=20210623\"\r\n        />\r\n      </div>\r\n      <div class=\"signature-img-text\">\r\n        <span>{{ \"comment.signature.note1\" | translate }}</span>\r\n        <span class=\"signature-text-action\" (click)=\"clickToUseSign()\">{{\r\n          \"comment.signature.sign\" | translate\r\n        }}</span>\r\n        <span>{{ \"comment.signature.note2\" | translate }}</span>\r\n        <span class=\"signature-text-action\" (click)=\"clickToUploadImg()\">{{\r\n          \"comment.signature.upload\" | translate\r\n        }}</span>\r\n        <span>{{ \"comment.signature.note3\" | translate }}</span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</farris-dialog>\r\n\r\n<!-- \u624B\u5199\u7B7E\u540D\u6309\u94AE -->\r\n<ng-template #signButtons>\r\n  <button class=\"btn btn-primary mr-2\" (click)=\"clickToConfirm()\">\r\n    {{ \"comment.signature.ok\" | translate }}\r\n  </button>\r\n  <button class=\"btn btn-secondary mr-2\" (click)=\"clickToReset()\">\r\n    {{ \"comment.signature.reset\" | translate }}\r\n  </button>\r\n  <button class=\"btn btn-secondary\" (click)=\"clickToCancel()\">\r\n    {{ \"comment.static.cancel\" | translate }}\r\n  </button>\r\n</ng-template>\r\n\r\n<!-- \u4F7F\u7528\u5934\u50CF\u7EC4\u4EF6\u505A\u56FE\u7247\u4E0A\u4F20 -->\r\n<farris-avatar\r\n  #farrisAvatar\r\n  (imgChange)=\"imgChange($event)\"\r\n  style=\"display: none\"\r\n></farris-avatar>\r\n\r\n<!-- \u5E38\u7528\u610F\u89C1\u7C7B\u522B -->\r\n<ng-template #commentTypeCell let-ctx>\r\n  <div>\r\n    <span\r\n      *ngIf=\"ctx.rowData.userId === '*'\"\r\n      class=\"task-comment-type task-comment-type-blue\"\r\n      >{{ \"comment.static.public\" | translate }}</span\r\n    >\r\n    <span\r\n      *ngIf=\"ctx.rowData.userId !== '*'\"\r\n      class=\"task-comment-type task-comment-type-yellow\"\r\n      >{{ \"comment.static.private\" | translate }}</span\r\n    >\r\n  </div>\r\n</ng-template>\r\n\r\n<!-- \u5E38\u7528\u610F\u89C1\u64CD\u4F5C -->\r\n<ng-template #commentOperateCell let-ctx>\r\n  <div\r\n    *ngIf=\"ctx.rowData.userId !== '*'\"\r\n    class=\"btn-link\"\r\n    style=\"padding: 5px 0\"\r\n    (click)=\"clickToDeleteComment(ctx)\"\r\n  >\r\n    {{ \"comment.static.delete\" | translate }}\r\n  </div>\r\n</ng-template>\r\n",
                providers: [{
                        provide: NG_VALUE_ACCESSOR,
                        useExisting: forwardRef(() => TaskCommentComponent),
                        multi: true
                    },],
                styles: [":host ::ng-deep .dropdown .btn{padding:0}:host ::ng-deep .dropdown .btn-secondary{box-shadow:none}:host ::ng-deep .dropdown .btn-secondary:focus{box-shadow:none}:host ::ng-deep .dropdown .btn-secondary:hover{color:#388fff}.task-center-comment-datagrid-div{display:flex;flex-grow:0;overflow:hidden;height:295px;padding:0 24px}.task-comment-type{padding:2px 6px;border-radius:4px;font-size:12px}.task-comment-type-blue{background:#eef5ff;border:0 solid #aed1ff;color:#5ea4ff}.task-comment-type-yellow{background:#fef5ec;border:0 solid #fad0a1;color:#f5a144}.task-comment-add{display:flex;justify-content:center;align-items:center;margin:0 24px;cursor:pointer;overflow:hidden;font-size:12px;text-align:center;padding:6px;border-radius:4px}.task-comment-add-common{color:#a8adb8;background:#f4f6fc;border:1px dashed #d2d7e2}.task-comment-add:hover{background:rgba(238,245,255,.8);border:1px solid rgba(82,157,255,.4)}.signatureImage:hover .attachment-delete{display:block}.fa-approval-operate-list{display:flex;flex-direction:row;align-items:center}.fa-approval-operate-list .approval-operate--label{position:relative;margin-right:8px;padding:3px 16px;border:1px solid rgba(0,0,0,.15);border-radius:2px;overflow:hidden;cursor:pointer;margin-bottom:0;color:#595959}.fa-approval-operate-list .approval-operate--label .label-title{font-size:14px;line-height:20px;white-space:nowrap}.fa-approval-operate-list .approval-operate--label .label-tip{position:absolute;display:block;right:0;bottom:0;width:14px;height:14px;border:7px solid #dadada;border-top:7px solid transparent;border-left:7px solid transparent}.fa-approval-operate-list .approval-operate--label .label-icon{position:absolute;display:block;right:-3px;bottom:-2px;font-size:12px;color:#fff}.fa-approval-operate-list .approval-operate--label .label-icon::before{content:\"\\e118\"}.fa-approval-operate-list .approval-operate--radio{display:none}.fa-approval-operate-list .approval-operate--radio:checked~.approval-operate--label{color:#388fff;border-color:#388fff;background:rgba(23,145,255,.05)}.fa-approval-operate-list .approval-operate--radio:checked~.approval-operate--label .label-tip{border-right-color:#388fff;border-bottom-color:#388fff}.fa-dropdown-button{border-color:#f7f7f7;font-size:12px;color:#667580;background:#f7f7f7}.fa-btn-like-dropdown{display:flex;align-items:center}.fa-btn-like-dropdown .like-dropdown--text{margin:0 4px 0 0}.fa-btn-like-dropdown .like-dropdown--icon{color:rgba(0,0,0,.25)}.fa-approve-common-gutter{margin:0 0 12px}.fa-approve-comment .approve-comment--title{display:inline-block;color:#667580;border-radius:4px 4px 0 0;height:26px;padding:0 9px;position:relative;background:#f7f7f7;cursor:pointer}.fa-approve-comment .approve-comment--title:after{content:\"\";height:100%;position:absolute;right:-10px;top:0;bottom:0;border-right:5px solid transparent;border-left:5px solid #f7f7f7;border-bottom:13px solid #f7f7f7;border-top:13px solid transparent}.fa-approve-comment .approve-comment--title .fa-btn-like-dropdown{font-size:12px;padding:2px 0}.fa-approve-comment .fa-approve-comment--content .content-textarea{border-color:#dcdcdc;border-radius:0 0 2px 2px}.fa-approve-comment .fa-approve-comment--footer{font-size:13px;color:#667580;background:#f7f7f7;align-items:center;padding:5px 0}.fa-approve-comment .approve-comment--text-btns{display:flex;flex-direction:row;padding:0 5px}.fa-approve-comment .approve-comment--text-btns .text-btns-item{display:flex;flex-direction:row;align-items:center;font-size:12px;line-height:18px;color:#667580;margin-right:20px;cursor:pointer}.fa-approve-comment .approve-comment--text-btns .text-btns-item:hover{color:#388fff}.fa-approve-comment .approve-comment--text-btns .text-btns-item .f-icon{margin-right:4px}.fa-approveal-links::after{content:\".\";display:block;height:0;clear:both;visibility:hidden}.fa-approveal-links .approveal-links--link{font-size:14px;position:relative;padding:0 16px 0 0;display:flex;align-items:center;float:left}.fa-approveal-links .approveal-links--link .link-text{color:rgba(0,0,0,.65);margin:0 8px 0 0}.fa-approveal-links .approveal-links--link+.approveal-links--link{padding-left:16px}.fa-approveal-links .approveal-links--link+.approveal-links--link::before{content:\"\";position:absolute;width:1px;height:80%;left:0;top:10%;background:#dbdbdb}.fa-btn-group-lg .btn{padding-top:6px;padding-bottom:6px;min-width:100px;text-align:center}.fa-approve-record{padding:0 0 16px;position:relative}.fa-approve-record .fa-approve-record--timeline{position:absolute;width:34px;top:0;bottom:0;z-index:100}.fa-approve-record .fa-approve-record--timeline::after{content:\"\";position:absolute;width:1px;height:100%;overflow:hidden;left:50%;top:0;z-index:101;border-left:1px dashed #dcdcdc}.fa-approve-record .fa-approve-record--timeline .fa-approve-star{position:relative;z-index:103;margin:20px auto}.fa-approve-record.fa-state-running .fa-approve-record--timeline::after{top:20px}.fa-approve-record:last-child .fa-approve-record--timeline::after{height:20px}.fa-approve-record .fa-approve-record--content{margin:0 0 0 34px;padding:16px 14px;background:#f9f9f9;border-radius:2px}.fa-approve-record .fa-approve-record--content .approve-record--header{margin:0 0 12px;display:flex;align-items:center}.fa-approve-record .fa-approve-record--content .approve-record--header .header--title{margin-bottom:0;color:rgba(0,0,0,.85)}.fa-approve-record .fa-approve-record--content .approve-record--header>*{margin:0 19px 0 0}.fa-approve-record .approve-record--list-item{display:flex;flex-direction:row}.fa-approve-record .approve-record--list-item+.approve-record--list-item{padding-top:8px}.fa-approve-record .approve-record--list-item .list-item--auxiliary{width:30px;margin:0 10px 0 0}.fa-approve-record .approve-record--list-item .list-item--main{flex-grow:1;flex-shrink:1;flex-basis:auto;padding:6px 0 0;background:#f9f9f9}.fa-approve-record .approve-record--list-item .list-item--content{padding:20px 0 0}.fa-approve-record .approve-record--list-item .list-item--content .list-item--info{font-size:12px;margin-bottom:0}.fa-approve-record .approve-record--list-item .list-item--content .list-item--info .info-label{color:rgba(0,0,0,.65)}.fa-approve-record .approve-record--list-item .list-item--content .list-item--info .info-text{color:rgba(0,0,0,.85)}.fa-approve-record .approve-record--list-item .list-item--header{display:flex;align-items:center}.fa-approve-record .approve-record--list-item .list-item--header>*{margin:0 16px 0 0}.fa-approve-record .approve-record--list-item .list-item--header .list-item--info{margin-bottom:0;font-size:12px}.fa-approve-record .approve-record--list-item .list-item--header .list-item--info .info-label{color:rgba(0,0,0,.35)}.fa-approve-record .approve-record--list-item .list-item--header .list-item--info .info-text{color:rgba(0,0,0,.65)}.fa-approve-record .approve-record--list-item .list-item--name{color:#4297fa}.fa-approve-record .approve-record--avatar{width:30px;height:30px;border-radius:15px}.fa-approve-round-bg{margin:4px auto 0;width:30px;height:30px;background:#59a1ff;border-radius:18px;line-height:30px;text-align:center;white-space:nowrap;font-size:12px;overflow:hidden}.fa-approve-round-bg-text{color:#fff}.fa-approve-star{width:14px;height:14px;display:block;background:rgba(56,143,255,.4);border-radius:7px;position:relative}.fa-approve-star::after{content:\"\";width:8px;height:8px;position:absolute;top:50%;left:50%;margin:-4px 0 0 -4px;border-radius:4px;background:#388fff}.fa-approve-star.bg-warning{background:rgba(245,156,36,.4)!important}.fa-approve-star.bg-warning::after{background:#f59c24}.fa-approve-badge{padding-top:4px;padding-bottom:4px;border-radius:10px}.fa-approve-badge-light{font-size:13px;line-height:20px;padding:0 8px;color:#5f637a;border:1px solid #e6e6e6;background:#f6faff}.fa-approve-link-border{cursor:pointer;display:inline-block;border:1px solid #60a5ff;border-radius:13px;font-size:12px;line-height:16px;color:#388fff;padding:3px 10px;background:#ebf5ff}.fa-approve-link-border:hover{background:#2881ff;color:#fff}.fm-toolbar{flex-direction:row;display:flex}.wf-docFile{flex-shrink:1;flex-grow:1;flex-basis:0;display:flex;flex-direction:row;align-items:flex-start;border-top:1px solid #f8f9fa;border-left:1px solid #f8f9fa}.wf-docFileIcon{margin:0 0 0 4px;width:20px;height:20px;line-height:20px;text-align:center;overflow:hidden;white-space:nowrap;padding:2px}.wf-docFileInfo{flex-shrink:1;flex-grow:1;flex-basis:0;padding:2px 6px 0 9px;margin-left:0}.wf-docFileInfo:hover .attachment-delete{display:block}.wf-docFileSize{font-size:11px;color:#888}.wf-doc-delete{margin:auto;font-size:18px;color:#f8f9fa}li{list-style:none}.attachment-delete{float:right;cursor:pointer;display:none;text-align:right;padding-right:10px}.attachment-delete:hover{color:#4297fa}.attachment-list{float:left;font-size:12px}.signature-img-div{display:flex;justify-content:center;align-items:center;height:100%;background:#fafcfd;border:1px solid #d8dfed;border-radius:8px;margin:0 10px}.signature-img-main{display:flex;flex-direction:column;justify-content:center;align-items:center}.signature-img-text{font-size:13px;color:rgba(106,111,121,.85)}.signature-text-action{color:#529efe;padding:0 2px;cursor:pointer}.signature-img-default{display:flex;justify-content:center;align-items:center;height:inherit}"]
            }] }
];
/** @nocollapse */
TaskCommentComponent.ctorParameters = () => [
    { type: TaskService },
    { type: HttpService },
    { type: UploadDialogService },
    { type: MessagerService },
    { type: I18nService },
    { type: LoadingService },
    { type: NotifyService }
];
TaskCommentComponent.propDecorators = {
    showAttachment: [{ type: Input }],
    showSign: [{ type: Input }],
    showCommonComment: [{ type: Input }],
    comment: [{ type: Input }],
    placeholder: [{ type: Input }],
    processInstanceId: [{ type: Input }],
    textAreaHeight: [{ type: Input }],
    TaskCenterConfig: [{ type: Input }],
    attachment: [{ type: Output }],
    signature: [{ type: Output }],
    commentDialog: [{ type: ViewChild, args: ['commentDialog',] }],
    signDialog: [{ type: ViewChild, args: ['signDialog',] }],
    dropDownEl: [{ type: ViewChild, args: ['dropdownEl',] }],
    signaturePad: [{ type: ViewChild, args: ['wfSignHere',] }],
    farrisAvatar: [{ type: ViewChild, args: ['farrisAvatar',] }],
    dataGrid: [{ type: ViewChild, args: ['dataGrid',] }],
    commentTypeCell: [{ type: ViewChild, args: ['commentTypeCell',] }],
    commentOperateCell: [{ type: ViewChild, args: ['commentOperateCell',] }]
};
if (false) {
    /** @type {?} */
    TaskCommentComponent.prototype.showAttachment;
    /** @type {?} */
    TaskCommentComponent.prototype.showSign;
    /** @type {?} */
    TaskCommentComponent.prototype.showCommonComment;
    /** @type {?} */
    TaskCommentComponent.prototype.comment;
    /** @type {?} */
    TaskCommentComponent.prototype.placeholder;
    /** @type {?} */
    TaskCommentComponent.prototype.processInstanceId;
    /** @type {?} */
    TaskCommentComponent.prototype.textAreaHeight;
    /** @type {?} */
    TaskCommentComponent.prototype.attachment;
    /** @type {?} */
    TaskCommentComponent.prototype.signature;
    /** @type {?} */
    TaskCommentComponent.prototype.commentDialog;
    /** @type {?} */
    TaskCommentComponent.prototype.signDialog;
    /** @type {?} */
    TaskCommentComponent.prototype.dropDownEl;
    /** @type {?} */
    TaskCommentComponent.prototype.signaturePad;
    /** @type {?} */
    TaskCommentComponent.prototype.farrisAvatar;
    /** @type {?} */
    TaskCommentComponent.prototype.dataGrid;
    /** @type {?} */
    TaskCommentComponent.prototype.commentTypeCell;
    /** @type {?} */
    TaskCommentComponent.prototype.commentOperateCell;
    /**
     * @type {?}
     * @private
     */
    TaskCommentComponent.prototype._value;
    /** @type {?} */
    TaskCommentComponent.prototype.attachmentList;
    /** @type {?} */
    TaskCommentComponent.prototype.ifShowAttachment;
    /** @type {?} */
    TaskCommentComponent.prototype.ifShowSign;
    /** @type {?} */
    TaskCommentComponent.prototype.curUserId;
    /** @type {?} */
    TaskCommentComponent.prototype.signatureImage;
    /** @type {?} */
    TaskCommentComponent.prototype.tmpSignatureImage;
    /** @type {?} */
    TaskCommentComponent.prototype.downloadService;
    /** @type {?} */
    TaskCommentComponent.prototype.ifUseSign;
    /** @type {?} */
    TaskCommentComponent.prototype.ifUseImg;
    /** @type {?} */
    TaskCommentComponent.prototype.ifEnableSign;
    /** @type {?} */
    TaskCommentComponent.prototype.ifUploadImg;
    /** @type {?} */
    TaskCommentComponent.prototype.ifCanEditSign;
    /** @type {?} */
    TaskCommentComponent.prototype.originSignId;
    /** @type {?} */
    TaskCommentComponent.prototype.commentList;
    /** @type {?} */
    TaskCommentComponent.prototype.originCommentList;
    /** @type {?} */
    TaskCommentComponent.prototype.commentColumns;
    /** @type {?} */
    TaskCommentComponent.prototype.onModelChange;
    /** @type {?} */
    TaskCommentComponent.prototype.onModelTouched;
    /**
     * 系统预置的不允许编辑删除
     * \@param data data.rowData为实体数据
     * \@return
     * @type {?}
     */
    TaskCommentComponent.prototype.beforeEdit;
    /**
     * @type {?}
     * @private
     */
    TaskCommentComponent.prototype.taskService;
    /**
     * @type {?}
     * @private
     */
    TaskCommentComponent.prototype.httpSvc;
    /**
     * @type {?}
     * @private
     */
    TaskCommentComponent.prototype.uploadDialog;
    /**
     * @type {?}
     * @private
     */
    TaskCommentComponent.prototype.messageService;
    /**
     * @type {?}
     * @private
     */
    TaskCommentComponent.prototype.i18nService;
    /**
     * @type {?}
     * @private
     */
    TaskCommentComponent.prototype.loadingService;
    /**
     * @type {?}
     * @private
     */
    TaskCommentComponent.prototype.notify;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFzay1jb21tZW50LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Bnc3Atd2Yvd2YtdGFzay1oYW5kbGVyLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvdGFzay1jb21tZW50L3Rhc2stY29tbWVudC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsS0FBSyxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFBRSxXQUFXLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDbkgsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ3BELE9BQU8sRUFBd0IsaUJBQWlCLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUN6RSxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUN6RCxPQUFPLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSx5QkFBeUIsQ0FBQztBQUM5RCxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDdEQsT0FBTyxFQUFvQixnQkFBZ0IsRUFBRSxjQUFjLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSx5QkFBeUIsQ0FBQztBQUNqSCxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUNwRCxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDcEQsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBQ3JELE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQztBQUN6RCxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFDckQsT0FBTyxFQUFFLFFBQVEsRUFBYyxFQUFFLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDaEQsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ2xELE9BQU8s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eEQsNENBQXlEOztJQUN6RCw0Q0FBeUQ7O0lBQ3pELHdDQUFtRDs7SUFDbkQsK0NBQWdFOztJQUNoRSxrREFBc0U7Ozs7O0lBRXRFLHNDQUFvQjs7SUFDcEIsOENBQTJCOztJQUMzQixnREFBa0M7O0lBQ2xDLDBDQUE0Qjs7SUFDNUIseUNBQWtCOztJQUNsQiw4Q0FBdUI7O0lBQ3ZCLGlEQUEwQjs7SUFDMUIsK0NBQXdDOztJQUN4Qyx5Q0FBMkI7O0lBQzNCLHdDQUF5Qjs7SUFDekIsNENBQTZCOztJQUM3QiwyQ0FBNkI7O0lBQzdCLDZDQUE4Qjs7SUFDOUIsNENBQXFCOztJQUVyQiwyQ0FBa0M7O0lBQ2xDLGlEQUF3Qzs7SUFFeEMsOENBQWtDOztJQWFsQyw2Q0FBa0M7O0lBQ2xDLDhDQUFtQzs7Ozs7OztJQXlWbkMsMENBS0M7Ozs7O0lBM1ZDLDJDQUFnQzs7Ozs7SUFDaEMsdUNBQTRCOzs7OztJQUM1Qiw0Q0FBeUM7Ozs7O0lBQ3pDLDhDQUF1Qzs7Ozs7SUFDdkMsMkNBQWdDOzs7OztJQUNoQyw4Q0FBc0M7Ozs7O0lBQ3RDLHNDQUE2QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBJbnB1dCwgVmlld0NoaWxkLCBmb3J3YXJkUmVmLCBPdXRwdXQsIEV2ZW50RW1pdHRlciwgVGVtcGxhdGVSZWYgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgRGlhbG9nQ29tcG9uZW50IH0gZnJvbSAnQGZhcnJpcy91aS1kaWFsb2cnO1xyXG5pbXBvcnQgeyBDb250cm9sVmFsdWVBY2Nlc3NvciwgTkdfVkFMVUVfQUNDRVNTT1IgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XHJcbmltcG9ydCB7IEZEcm9wZG93bkRpcmVjdGl2ZSB9IGZyb20gJ0BmYXJyaXMvdWktZHJvcGRvd24nO1xyXG5pbXBvcnQgeyBVcGxvYWREaWFsb2dTZXJ2aWNlIH0gZnJvbSAnQGdzcC1zdmMvZm9ybWRvYy11cGxvYWQnO1xyXG5pbXBvcnQgeyBNZXNzYWdlclNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLW1lc3NhZ2VyJztcclxuaW1wb3J0IHsgRmlsZURlbGV0ZUVudGl0eSwgRmlsZVVwbG9hZEVudGl0eSwgR3NwRG9jTWV0YWRhdGEsIEdzcERvY1VwbG9hZEVudGl0eSB9IGZyb20gJy4uLy4uL2VudGl0eS9hdHRhY2htZW50JztcclxuaW1wb3J0IHsgU2lnbkhlcmVDb21wb25lbnQgfSBmcm9tICdAZ3NwLXdmL3dmLXNpZ24nO1xyXG5pbXBvcnQgeyBBdmF0YXJDb21wb25lbnQgfSBmcm9tICdAZmFycmlzL3VpLWF2YXRhcic7XHJcbmltcG9ydCB7IERvd25sb2FkU2VydmljZSB9IGZyb20gJ0Bnc3Atc3ZjL2ZpbGUtbG9hZCc7XHJcbmltcG9ydCB7IFRhc2tTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZS90YXNrLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBDb21tb25Db21tZW50IH0gZnJvbSAnLi4vLi4vZW50aXR5L2NvbW1lbnQnO1xyXG5pbXBvcnQgeyBmb3JrSm9pbiwgT2JzZXJ2YWJsZSwgb2YgfSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHsgSHR0cFNlcnZpY2UgfSBmcm9tICdAZWNwLWNhZi9jYWYtY29tbW9uJztcclxuaW1wb3J0IHsgRGF0YUNvbHVtbiwgRGF0YWdyaWRDb21wb25lbnQgfSBmcm9tICdAZmFycmlzL3VpLWRhdGFncmlkJztcclxuaW1wb3J0IHsgSTE4blNlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlL2kxOG4vaTE4bi5zZXJ2aWNlJztcclxuaW1wb3J0IHsgRWRpdG9yVHlwZXMgfSBmcm9tICdAZmFycmlzL3VpLWRhdGFncmlkLWVkaXRvcnMnO1xyXG5pbXBvcnQgeyBMb2FkaW5nU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbG9hZGluZyc7XHJcbmltcG9ydCB7IENvbmZpZ0NvZGUsIFRhc2tDZW50ZXJDb25maWcgfSBmcm9tICcuLi8uLi9lbnRpdHkvdGFzay1jZW50ZXItY29uZmlnJztcclxuaW1wb3J0IHsgTm90aWZ5U2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbm90aWZ5JztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnd2YtY29tbWVudCcsXHJcbiAgdGVtcGxhdGVVcmw6ICcuL3Rhc2stY29tbWVudC5jb21wb25lbnQuaHRtbCcsXHJcbiAgc3R5bGVVcmxzOiBbJy4vdGFzay1jb21tZW50LmNvbXBvbmVudC5zY3NzJ10sXHJcbiAgcHJvdmlkZXJzOiBbe1xyXG4gICAgcHJvdmlkZTogTkdfVkFMVUVfQUNDRVNTT1IsXHJcbiAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBUYXNrQ29tbWVudENvbXBvbmVudCksXHJcbiAgICBtdWx0aTogdHJ1ZVxyXG4gIH0sXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgVGFza0NvbW1lbnRDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIENvbnRyb2xWYWx1ZUFjY2Vzc29yIHtcclxuXHJcbiAgQElucHV0KCkgc2hvd0F0dGFjaG1lbnQ6IGJvb2xlYW4gPSB0cnVlOy8v5piv5ZCm5pi+56S66ZmE5Lu25LiK5Lyg77yM57uE5Lu25o6n5Yi2XHJcbiAgQElucHV0KCkgc2hvd1NpZ246IGJvb2xlYW4gPSB0cnVlOy8v5piv5ZCm5pi+56S6562+5ZCN77yM57uE5Lu25o6n5Yi277yI5LiN5ZCM5Yqo5L2c5Y+v6IO95Lya5LiN5pi+56S677yJXHJcbiAgQElucHV0KCkgc2hvd0NvbW1vbkNvbW1lbnQgPSB0cnVlOy8v5piv5ZCm5pi+56S65bi455So5oSP6KeBXHJcbiAgQElucHV0KCkgY29tbWVudDogc3RyaW5nO1xyXG4gIEBJbnB1dCgpIHBsYWNlaG9sZGVyID0gJyc7XHJcbiAgQElucHV0KCkgcHJvY2Vzc0luc3RhbmNlSWQ6IHN0cmluZztcclxuICBASW5wdXQoKSB0ZXh0QXJlYUhlaWdodDogbnVtYmVyID0gMTIwOy8v5paH5a2X5qGG55qE6auY5bqmXHJcblxyXG4gIEBJbnB1dCgpXHJcbiAgc2V0IFRhc2tDZW50ZXJDb25maWcoY29uZmlnTGlzdDogVGFza0NlbnRlckNvbmZpZ1tdKSB7XHJcbiAgICBjb25zdCBhdHRhY2htZW50ID0gY29uZmlnTGlzdC5maW5kKGEgPT4gYS5jb25maWdDb2RlID09IENvbmZpZ0NvZGUuSWZfU2hvd19BdHRhY2htZW50KTtcclxuICAgIGNvbnN0IHNpZ24gPSBjb25maWdMaXN0LmZpbmQoYSA9PiBhLmNvbmZpZ0NvZGUgPT0gQ29uZmlnQ29kZS5JZl9TaG93X1NpZ25hdHVyZSk7XHJcbiAgICBjb25zdCBlbmFibGVTaWduID0gY29uZmlnTGlzdC5maW5kKGEgPT4gYS5jb25maWdDb2RlID09IENvbmZpZ0NvZGUuSWZfVXNlX1NpZ25fQnlfRGVmYXVsdCk7XHJcbiAgICBjb25zdCBlZGl0U2lnbiA9IGNvbmZpZ0xpc3QuZmluZChhID0+IGEuY29uZmlnQ29kZSA9PT0gQ29uZmlnQ29kZS5JZl9DYW5fRWRpdF9TaWduYXR1cmUpO1xyXG4gICAgaWYgKCh3aW5kb3cgYXMgYW55KS5nc3BmcmFtZXdvcmtTZXJ2aWNlLmNvbW1vbikge1xyXG4gICAgICB0aGlzLmN1clVzZXJJZCA9ICh3aW5kb3cgYXMgYW55KS5nc3BmcmFtZXdvcmtTZXJ2aWNlLmNvbW1vbi51c2VySW5mb3MuZ2V0KCkudXNlcklkO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5jdXJVc2VySWQgPSAod2luZG93IGFzIGFueSkucGFyZW50LmdzcGZyYW1ld29ya1NlcnZpY2UuY29tbW9uLnVzZXJJbmZvcy5nZXQoKS51c2VySWQ7XHJcbiAgICB9XHJcbiAgICBhdHRhY2htZW50ICYmIGF0dGFjaG1lbnQuY3VycmVudFZhbHVlID09PSAndHJ1ZScgJiYgKHRoaXMuaWZTaG93QXR0YWNobWVudCA9IHRydWUpO1xyXG4gICAgc2lnbiAmJiBzaWduLmN1cnJlbnRWYWx1ZSA9PT0gJ3RydWUnICYmICh0aGlzLmlmU2hvd1NpZ24gPSB0cnVlKTtcclxuICAgIGVuYWJsZVNpZ24gJiYgZW5hYmxlU2lnbi5jdXJyZW50VmFsdWUgPT09ICdmYWxzZScgJiYgKHRoaXMuaWZFbmFibGVTaWduID0gZmFsc2UpO1xyXG4gICAgZWRpdFNpZ24gJiYgZWRpdFNpZ24uY3VycmVudFZhbHVlID09PSAnZmFsc2UnICYmICh0aGlzLmlmQ2FuRWRpdFNpZ24gPSBmYWxzZSk7XHJcbiAgICBpZiAodGhpcy5pZlNob3dTaWduICYmIHRoaXMuaWZFbmFibGVTaWduKSB7XHJcbiAgICAgIHRoaXMuZ2V0VXNlclNpZ24odGhpcy5jdXJVc2VySWQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgQE91dHB1dCgpIGF0dGFjaG1lbnQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7Ly/pmYTku7ZcclxuICBAT3V0cHV0KCkgc2lnbmF0dXJlID0gbmV3IEV2ZW50RW1pdHRlcigpOy8v5LiK5Lyg562+5ZCN5LmL5ZCO77yM5Y+R6YCB562+5ZCNaWRcclxuICBAVmlld0NoaWxkKCdjb21tZW50RGlhbG9nJykgY29tbWVudERpYWxvZzogRGlhbG9nQ29tcG9uZW50Oy8v5bi455So5oSP6KeB566h55CGXHJcbiAgQFZpZXdDaGlsZCgnc2lnbkRpYWxvZycpIHNpZ25EaWFsb2c6IERpYWxvZ0NvbXBvbmVudDsvL+aJi+WGmeetvuWQjeW8ueahhlxyXG4gIEBWaWV3Q2hpbGQoJ2Ryb3Bkb3duRWwnKSBkcm9wRG93bkVsOiBGRHJvcGRvd25EaXJlY3RpdmU7Ly/op6PlhrPpgInmi6nmhI/op4HlkI7vvIzkuIvmi4noj5zljZXml6Dms5XmlLbmipjnmoTpl67pophcclxuICBAVmlld0NoaWxkKCd3ZlNpZ25IZXJlJykgc2lnbmF0dXJlUGFkOiBTaWduSGVyZUNvbXBvbmVudDsvL+aJi+WGmeetvuWQjee7hOS7tlxyXG4gIEBWaWV3Q2hpbGQoJ2ZhcnJpc0F2YXRhcicpIGZhcnJpc0F2YXRhcjogQXZhdGFyQ29tcG9uZW50Oy8v5aS05YOP57uE5Lu277yM55So5L2c562+5ZCN5Zu+54mH5LiK5LygXHJcbiAgQFZpZXdDaGlsZCgnZGF0YUdyaWQnKSBkYXRhR3JpZDogRGF0YWdyaWRDb21wb25lbnQ7XHJcbiAgQFZpZXdDaGlsZCgnY29tbWVudFR5cGVDZWxsJykgY29tbWVudFR5cGVDZWxsOiBUZW1wbGF0ZVJlZjxhbnk+Oy8v5bi455So5oSP6KeB57G75Yir5qih5p2/XHJcbiAgQFZpZXdDaGlsZCgnY29tbWVudE9wZXJhdGVDZWxsJykgY29tbWVudE9wZXJhdGVDZWxsOiBUZW1wbGF0ZVJlZjxhbnk+Oy8v5bi455So5oSP6KeB5Yig6ZmkXHJcblxyXG4gIHByaXZhdGUgX3ZhbHVlID0gJyc7XHJcbiAgYXR0YWNobWVudExpc3Q6IGFueVtdID0gW107XHJcbiAgaWZTaG93QXR0YWNobWVudDogYm9vbGVhbiA9IGZhbHNlOy8v5Lu75Yqh5Lit5b+D6YWN572u77yM5piv5ZCm5pi+56S66ZmE5Lu25LiK5LygXHJcbiAgaWZTaG93U2lnbjogYm9vbGVhbiA9IGZhbHNlOy8v5Lu75Yqh5Lit5b+D6YWN572u77yM5piv5ZCm5pi+56S65omL5YaZ562+5ZCNXHJcbiAgY3VyVXNlcklkOiBzdHJpbmc7Ly/lvZPliY3nlKjmiLdpZFxyXG4gIHNpZ25hdHVyZUltYWdlOiBzdHJpbmc7Ly/nrb7lkI3lm77niYfnmoRiYXNlNjTlgLxcclxuICB0bXBTaWduYXR1cmVJbWFnZTogc3RyaW5nOy8v5Li05pe25L+d5a2Y5LiK5Lyg55qE5Zu+54mHXHJcbiAgZG93bmxvYWRTZXJ2aWNlID0gbmV3IERvd25sb2FkU2VydmljZSgpO1xyXG4gIGlmVXNlU2lnbjogYm9vbGVhbiA9IGZhbHNlOy8v5piv5ZCm5L2/55So5omL5YaZXHJcbiAgaWZVc2VJbWc6IGJvb2xlYW4gPSB0cnVlOy8v5piv5ZCm5L2/55So5LiK5Lyg5Zu+54mHXHJcbiAgaWZFbmFibGVTaWduOiBib29sZWFuID0gdHJ1ZTsvL+aYr+WQpum7mOiupOWQr+eUqOetvuWQjVxyXG4gIGlmVXBsb2FkSW1nOiBib29sZWFuID0gZmFsc2U7Ly/mmK/lkKbkuIrkvKDov4flm77niYdcclxuICBpZkNhbkVkaXRTaWduOiBib29sZWFuID0gdHJ1ZTsvL+aYr+WQpuWFgeiuuOe8lui+keetvuWQjVxyXG4gIG9yaWdpblNpZ25JZDogc3RyaW5nOy8v5Y6f5aeL55qE562+5ZCNaWRcclxuXHJcbiAgY29tbWVudExpc3Q6IENvbW1vbkNvbW1lbnRbXSA9IFtdO1xyXG4gIG9yaWdpbkNvbW1lbnRMaXN0OiBDb21tb25Db21tZW50W10gPSBbXTtcclxuXHJcbiAgY29tbWVudENvbHVtbnM6IERhdGFDb2x1bW5bXSA9IFtdO1xyXG5cclxuICBzZXQgdmFsdWUodikge1xyXG4gICAgaWYgKHRoaXMuX3ZhbHVlICE9PSB2KSB7XHJcbiAgICAgIHRoaXMuX3ZhbHVlID0gdjtcclxuICAgICAgdGhpcy5vbk1vZGVsQ2hhbmdlKHYpO1xyXG4gICAgfVxyXG5cclxuICB9XHJcbiAgZ2V0IHZhbHVlKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3ZhbHVlO1xyXG4gIH1cclxuXHJcbiAgb25Nb2RlbENoYW5nZSA9IChvYmo6IGFueSkgPT4geyB9O1xyXG4gIG9uTW9kZWxUb3VjaGVkID0gKG9iajogYW55KSA9PiB7IH07XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgcHJpdmF0ZSB0YXNrU2VydmljZTogVGFza1NlcnZpY2UsXHJcbiAgICBwcml2YXRlIGh0dHBTdmM6IEh0dHBTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSB1cGxvYWREaWFsb2c6IFVwbG9hZERpYWxvZ1NlcnZpY2UsXHJcbiAgICBwcml2YXRlIG1lc3NhZ2VTZXJ2aWNlOiBNZXNzYWdlclNlcnZpY2UsXHJcbiAgICBwcml2YXRlIGkxOG5TZXJ2aWNlOiBJMThuU2VydmljZSxcclxuICAgIHByaXZhdGUgbG9hZGluZ1NlcnZpY2U6IExvYWRpbmdTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBub3RpZnk6IE5vdGlmeVNlcnZpY2UsXHJcbiAgKSB7XHJcblxyXG4gIH1cclxuXHJcbiAgbmdPbkluaXQoKSB7XHJcbiAgICB0aGlzLmNvbW1lbnRDb2x1bW5zID0gW3tcclxuICAgICAgZmllbGQ6ICdtZXNzYWdlJyxcclxuICAgICAgd2lkdGg6IDEwMCxcclxuICAgICAgdGl0bGU6IHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ2NvbW1lbnQuc3RhdGljLmNvbnRlbnQnKSxcclxuICAgICAgZWRpdG9yOiB7IHR5cGU6IEVkaXRvclR5cGVzLlRFWFRCT1gsIG9wdGlvbnM6IHt9IH0sXHJcbiAgICB9LCB7XHJcbiAgICAgIGZpZWxkOiAndXNlcklkJyxcclxuICAgICAgd2lkdGg6IDIwLFxyXG4gICAgICB0aXRsZTogdGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgnY29tbWVudC5zdGF0aWMudHlwZScpLFxyXG4gICAgICB0ZW1wbGF0ZTogdGhpcy5jb21tZW50VHlwZUNlbGxcclxuICAgIH0sIHtcclxuICAgICAgZmllbGQ6ICdvcGVyYXRlJyxcclxuICAgICAgd2lkdGg6IDIwLFxyXG4gICAgICB0aXRsZTogdGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgnY29tbWVudC5zdGF0aWMub3BlcmF0ZScpLFxyXG4gICAgICB0ZW1wbGF0ZTogdGhpcy5jb21tZW50T3BlcmF0ZUNlbGxcclxuICAgIH1dO1xyXG4gICAgLy8g6I635Y+W5bi455So5oSP6KeB5YiX6KGoXHJcbiAgICB0aGlzLmxvYWRDb21tZW50cygpO1xyXG4gIH1cclxuXHJcbiAgb25FZGl0Q29tbWVudCgpIHtcclxuICAgIHRoaXMuZHJvcERvd25FbC5jbG9zZSgpO1xyXG4gICAgdGhpcy5jb21tZW50RGlhbG9nLnNob3coKTtcclxuICB9XHJcblxyXG4gIGxvYWRDb21tZW50cygpIHtcclxuICAgIHRoaXMudGFza1NlcnZpY2UuZ2V0Q29tbWVudExpc3QoKS5zdWJzY3JpYmUoKGRhdGE6IGFueVtdKSA9PiB7XHJcbiAgICAgIHRoaXMuY29tbWVudExpc3QgPSBkYXRhO1xyXG4gICAgICB0aGlzLm9yaWdpbkNvbW1lbnRMaXN0ID0gWy4uLmRhdGFdO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDb250cm9sVmFsdWVBY2Nlc3NvcuW/hemhu+WunueOsOeahOaWueazlVxyXG4gICAqL1xyXG4gIHdyaXRlVmFsdWUodmFsdWU6IHN0cmluZykge1xyXG4gICAgaWYgKHZhbHVlICE9PSB0aGlzLnZhbHVlKSB7XHJcbiAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlZ2lzdGVyT25DaGFuZ2UoZm4pIHtcclxuICAgIHRoaXMub25Nb2RlbENoYW5nZSA9IGZuO1xyXG4gIH1cclxuXHJcbiAgcmVnaXN0ZXJPblRvdWNoZWQoZm4pIHtcclxuICAgIHRoaXMub25Nb2RlbFRvdWNoZWQgPSBmbjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOmAieaLqeS4gOadoeW4uOeUqOaEj+ingeWQjuS6i+S7tlxyXG4gICAqL1xyXG4gIGJ1dHRvbkNsaWNrKGRhdGE6IGFueSkge1xyXG4gICAgdGhpcy5kcm9wRG93bkVsLmNsb3NlKCk7XHJcbiAgICB0aGlzLnZhbHVlID0gZGF0YTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOS4iuS8oOmZhOS7tlxyXG4gICAqL1xyXG4gIHVwbG9hZEF0dGFjaG1lbnQoKSB7XHJcbiAgICBsZXQgaXNSZXBlYXQgPSBmYWxzZTtcclxuICAgIHRoaXMudXBsb2FkRGlhbG9nLnVwbG9hZEZpbGUodGhpcy5wcm9jZXNzSW5zdGFuY2VJZCwgJ3dmX2F0dGFjaG1lbnQnKS50aGVuKHJlID0+IHtcclxuICAgICAgZm9yIChsZXQgaSBvZiAocmUgYXMgYW55W10pKSB7XHJcbiAgICAgICAgaXNSZXBlYXQgPSBmYWxzZTtcclxuICAgICAgICBmb3IgKGxldCBhdHRhY2ggb2YgdGhpcy5hdHRhY2htZW50TGlzdCkge1xyXG4gICAgICAgICAgaWYgKGF0dGFjaC5maWxlTmFtZSA9PT0gaS5maWxlTmFtZSkge1xyXG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2VTZXJ2aWNlLmluZm8oJ+WMheWQq+mHjeWkjeaWh+S7ticgKyBpLmZpbGVOYW1lKTtcclxuICAgICAgICAgICAgaXNSZXBlYXQgPSB0cnVlO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFpc1JlcGVhdCkge1xyXG4gICAgICAgICAgdGhpcy5hdHRhY2htZW50TGlzdC5wdXNoKGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICB0aGlzLmF0dGFjaG1lbnQuZW1pdCh0aGlzLmF0dGFjaG1lbnRMaXN0KTtcclxuICAgICAgLy/miafooYzkuIrkvKDpmYTku7ZcclxuICAgICAgbGV0IGZpbGVzID0gbmV3IEZpbGVVcGxvYWRFbnRpdHkoKTtcclxuICAgICAgZmlsZXMucm9vdElkID0gXCJ3Zl9hdHRhY2htZW50XCI7XHJcbiAgICAgIGZpbGVzLm1ldGFkYXRhSWRMaXN0ID0gW107XHJcbiAgICAgIHRoaXMuYXR0YWNobWVudExpc3QuZm9yRWFjaChhID0+IHtcclxuICAgICAgICBmaWxlcy5tZXRhZGF0YUlkTGlzdC5wdXNoKGEubWV0YWRhdGFJZCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIGZpbGVzLm1ldGFkYXRhSWRMaXN0Lmxlbmd0aCAmJiB0aGlzLnRhc2tTZXJ2aWNlLnVwbG9hZEF0dGFjaG1lbnQoZmlsZXMpLnN1YnNjcmliZSgoKSA9PiB7IH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDliKDpmaTpmYTku7ZcclxuICAgKi9cclxuICBhdHRhY2htZW50RGVsZXRlKGF0dGFjaG1lbnQpIHtcclxuICAgIHZhciBnc3BEb2NEZWxldGVFbnRpdHk6IEZpbGVEZWxldGVFbnRpdHkgPSB7XHJcbiAgICAgIHJvb3RJZDogXCJ3Zl9hdHRhY2htZW50XCIsXHJcbiAgICAgIG1ldGFkYXRhSWQ6IGF0dGFjaG1lbnQubWV0YWRhdGFJZCxcclxuICAgICAgbW9kZTogXCJGb3JtYWxcIlxyXG4gICAgfVxyXG4gICAgbGV0IGluZGV4ID0gdGhpcy5hdHRhY2htZW50TGlzdC5pbmRleE9mKGF0dGFjaG1lbnQpO1xyXG4gICAgaWYgKGluZGV4ID4gLTEpIHtcclxuICAgICAgdGhpcy5hdHRhY2htZW50TGlzdC5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5hdHRhY2htZW50LmVtaXQodGhpcy5hdHRhY2htZW50TGlzdCk7XHJcbiAgICB0aGlzLnRhc2tTZXJ2aWNlLmRlbGV0ZUF0dGFjaG1lbnQoZ3NwRG9jRGVsZXRlRW50aXR5KS5zdWJzY3JpYmUoKCkgPT4geyB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiOt+WPluS4jeWQjOagvOW8j+mZhOS7tueahOe8qeeVpeWbvlxyXG4gICAqL1xyXG4gIGltYWdlVXJsKGF0dGFjaG1lbnRJbmZvKSB7XHJcbiAgICBjb25zdCB1cmwgPSAnL3BsYXRmb3JtL3J1bnRpbWUvd2Yvd2ViYXBwL21vYmlsZXRhc2tjZW50ZXIvYXNzZXRzL2FjY2Vzc29yeS8nO1xyXG4gICAgcmV0dXJuIHVybCArIHRoaXMudGFza1NlcnZpY2UuY3JlYXRlSXRlbShhdHRhY2htZW50SW5mbykgKyAnLnN2Zyc7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDlsZXnpLrmiYvlhpnnrb7lkI1kaWFsb2dcclxuICAgKi9cclxuICBzaG93U2lnbkRpYWxvZygpIHtcclxuICAgIHRoaXMuc2lnbkRpYWxvZy5zaG93KCk7XHJcbiAgICBpZiAoIXRoaXMuaWZFbmFibGVTaWduKSB7XHJcbiAgICAgIHRoaXMuZ2V0VXNlclNpZ24odGhpcy5jdXJVc2VySWQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAqIOeCueWHu+WIoOmZpOetvuWQjVxyXG4gKi9cclxuICBjbGlja1RvRGVsZXRlSW1hZ2UoKSB7XHJcbiAgICB0aGlzLnNpZ25hdHVyZUltYWdlID0gJyc7XHJcbiAgICB0aGlzLnNpZ25hdHVyZS5lbWl0KG51bGwpO1xyXG4gICAgY29uc3QgbG9hZCA9IHRoaXMubG9hZGluZ1NlcnZpY2Uuc2hvdygpO1xyXG4gICAgdGhpcy50YXNrU2VydmljZS5hZGRUYXNrQ2VudGVyQ29uZmlnKENvbmZpZ0NvZGUuSWZfVXNlX1NpZ25fQnlfRGVmYXVsdCwgJ2ZhbHNlJykuc3Vic2NyaWJlKHJlID0+IHtcclxuICAgICAgbG9hZC5jbG9zZSgpO1xyXG4gICAgfSwgKCkgPT4ge1xyXG4gICAgICBsb2FkLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgY2xpY2tUb1VzZVNpZ24oKSB7XHJcbiAgICB0aGlzLmlmVXNlSW1nID0gZmFsc2U7XHJcbiAgICB0aGlzLmlmVXNlU2lnbiA9IHRydWU7XHJcbiAgICBjb25zdCBjYW52YXM6IGFueSA9IHRoaXMuc2lnbmF0dXJlUGFkLmNhbnZhc0Rpdi5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ2NhbnZhcycpO1xyXG4gICAgY2FudmFzLmhlaWdodCA9IDI1MjtcclxuICAgIGNhbnZhcy53aWR0aCA9IDY2NTtcclxuICB9XHJcblxyXG4gIGNsaWNrVG9VcGxvYWRJbWcoKSB7XHJcbiAgICB0aGlzLmZhcnJpc0F2YXRhci5vbkNsaWNrKCk7XHJcbiAgfVxyXG5cclxuICBjbGlja1RvQ29uZmlybSgpIHtcclxuICAgIGxldCBpbWFnZTogYW55O1xyXG4gICAgaWYgKHRoaXMuc2lnbmF0dXJlUGFkICYmIHRoaXMuc2lnbmF0dXJlUGFkLmlzRHJhdykgey8v5aaC5p6c562+6L+H5ZCNXHJcbiAgICAgIGltYWdlID0gdGhpcy5zaWduYXR1cmVQYWQuY29uZmlybSgpO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmlmVXBsb2FkSW1nKSB7Ly/lpoLmnpzkuIrkvKDov4flm77niYdcclxuICAgICAgaW1hZ2UgPSB0aGlzLnRtcFNpZ25hdHVyZUltYWdlO1xyXG4gICAgfVxyXG4gICAgaWYgKGltYWdlKSB7XHJcbiAgICAgIHRoaXMudXBsb2FkU2lnbmF0dXJlSW1nKGltYWdlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmICh0aGlzLnRtcFNpZ25hdHVyZUltYWdlKSB7XHJcbiAgICAgICAgdGhpcy5zaWduYXR1cmVJbWFnZSA9IHRoaXMudG1wU2lnbmF0dXJlSW1hZ2U7XHJcbiAgICAgICAgdGhpcy5zaWduYXR1cmUuZW1pdCh0aGlzLm9yaWdpblNpZ25JZCk7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlmRW5hYmxlU2lnbikge1xyXG4gICAgICAgICAgY29uc3QgbG9hZCA9IHRoaXMubG9hZGluZ1NlcnZpY2Uuc2hvdygpO1xyXG4gICAgICAgICAgdGhpcy50YXNrU2VydmljZS5hZGRUYXNrQ2VudGVyQ29uZmlnKENvbmZpZ0NvZGUuSWZfVXNlX1NpZ25fQnlfRGVmYXVsdCwgJ3RydWUnKS5zdWJzY3JpYmUocmUgPT4ge1xyXG4gICAgICAgICAgICBsb2FkLmNsb3NlKCk7XHJcbiAgICAgICAgICB9LCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGxvYWQuY2xvc2UoKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuc2lnbkRpYWxvZy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY2xpY2tUb1Jlc2V0KCkge1xyXG4gICAgdGhpcy5pZlVzZVNpZ24gPSBmYWxzZTtcclxuICAgIHRoaXMuaWZVc2VJbWcgPSB0cnVlO1xyXG4gICAgdGhpcy5zaWduYXR1cmVJbWFnZSA9ICcnO1xyXG4gICAgdGhpcy50bXBTaWduYXR1cmVJbWFnZSA9ICcnO1xyXG4gICAgdGhpcy5zaWduYXR1cmUuZW1pdCgnJyk7XHJcbiAgfVxyXG5cclxuICBjbGlja1RvQ2FuY2VsKCkge1xyXG4gICAgdGhpcy5zaWduRGlhbG9nLmNsb3NlKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDkuIrkvKDlm77niYflkI7kuovku7ZcclxuICAgKiBldmVudC5iYXNlNjQg5piv5Zu+54mH5L+h5oGvLGV2ZW50Lm5hbWXmmK/luKblkI7nvIDnmoTlm77niYflkI3vvIxldmVudC50eXBl5aaCaW1hZ2UvanBlZ1xyXG4gICAqL1xyXG4gIGltZ0NoYW5nZShldmVudDogYW55KSB7XHJcbiAgICB0aGlzLmlmVXNlSW1nID0gdHJ1ZTtcclxuICAgIHRoaXMuaWZVc2VTaWduID0gZmFsc2U7XHJcbiAgICB0aGlzLmlmVXBsb2FkSW1nID0gdHJ1ZTtcclxuICAgIGNvbnN0IGltYWdlID0gZXZlbnQuYmFzZTY0O1xyXG4gICAgdGhpcy50bXBTaWduYXR1cmVJbWFnZSA9IGltYWdlO1xyXG4gICAgdGhpcy5zaWduYXR1cmVJbWFnZSA9IGltYWdlO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSB1cGxvYWRTaWduYXR1cmVJbWcoaW1hZ2U6IGFueSkge1xyXG4gICAgdmFyIHVwbG9hZFNpZ25hdHVyZSA9IG5ldyBHc3BEb2NVcGxvYWRFbnRpdHkoKTtcclxuICAgIHVwbG9hZFNpZ25hdHVyZS5maWxlQ29udGVudCA9IGltYWdlLnNwbGl0KCcsJylbMV07XHJcbiAgICB1cGxvYWRTaWduYXR1cmUuZmlsZVBhdGggPSB0aGlzLmN1clVzZXJJZDtcclxuICAgIHVwbG9hZFNpZ25hdHVyZS5tb2RlID0gXCJGb3JtYWxcIjtcclxuICAgIHVwbG9hZFNpZ25hdHVyZS5tZXRhZGF0YSA9IG5ldyBHc3BEb2NNZXRhZGF0YSgpO1xyXG4gICAgdXBsb2FkU2lnbmF0dXJlLm1ldGFkYXRhLmlkID0gdGhpcy50YXNrU2VydmljZS5jcmVhdGVOTSgpO1xyXG4gICAgdXBsb2FkU2lnbmF0dXJlLm1ldGFkYXRhLmZpbGVOYW1lID0gdGhpcy50YXNrU2VydmljZS5jcmVhdGVOTSgpICsgXCIucG5nXCI7XHJcbiAgICB1cGxvYWRTaWduYXR1cmUubWV0YWRhdGEucm9vdElkID0gXCJ0YXNrY2VudGVyc2lnbmF0dXJlXCI7XHJcbiAgICB1cGxvYWRTaWduYXR1cmUubWV0YWRhdGEuZG9jVHlwZSA9IFwicG5nXCI7XHJcbiAgICBjb25zdCBsb2FkID0gdGhpcy5sb2FkaW5nU2VydmljZS5zaG93KCk7XHJcbiAgICB0aGlzLnRhc2tTZXJ2aWNlLnVwbG9hZFNpZ25hdHVyZSh1cGxvYWRTaWduYXR1cmUpLnN1YnNjcmliZShzaWduSWQgPT4ge1xyXG4gICAgICBsb2FkLmNsb3NlKCk7XHJcbiAgICAgIHRoaXMub3JpZ2luU2lnbklkID0gc2lnbklkO1xyXG4gICAgICB0aGlzLnNpZ25hdHVyZS5lbWl0KHNpZ25JZCk7XHJcbiAgICAgIHRoaXMuc2lnbmF0dXJlSW1hZ2UgPSBpbWFnZTtcclxuICAgICAgdGhpcy5zaWduRGlhbG9nLmNsb3NlKCk7XHJcbiAgICB9LCBlcnJvciA9PiB7XHJcbiAgICAgIGxvYWQuY2xvc2UoKTtcclxuICAgICAgdGhpcy5tZXNzYWdlU2VydmljZS5lcnJvcign5LiK5Lyg562+5ZCN5aSx6LSlJyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICog6I635Y+W55So5oi355qE5pyA6L+R5LiA5qyh562+5ZCNXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBnZXRVc2VyU2lnbih1c2VySWQ6IHN0cmluZykge1xyXG4gICAgY29uc3QgbG9hZCA9IHRoaXMubG9hZGluZ1NlcnZpY2Uuc2hvdygpO1xyXG4gICAgdGhpcy50YXNrU2VydmljZS5nZXRVc2VyU2lnbih1c2VySWQpLnN1YnNjcmliZShyZXN1bHQgPT4ge1xyXG4gICAgICBsb2FkLmNsb3NlKCk7XHJcbiAgICAgIGlmIChyZXN1bHQgJiYgcmVzdWx0Lmxlbmd0aCkge1xyXG4gICAgICAgIHZhciBzaWduO1xyXG4gICAgICAgIGlmIChyZXN1bHQubGVuZ3RoID09IDEpIHtcclxuICAgICAgICAgIHNpZ24gPSByZXN1bHRbMF07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGNvbnN0IGxpc3QgPSByZXN1bHQuZmlsdGVyKGEgPT4gYSAmJiBhLmxhc3RNb2RpZmllZFRpbWUpO1xyXG4gICAgICAgICAgc2lnbiA9IGxpc3QucmVkdWNlKGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhLmxhc3RNb2RpZmllZFRpbWUgPiBiLmxhc3RNb2RpZmllZFRpbWUgPyBhIDogYjtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2lnbmF0dXJlLmVtaXQoc2lnbi5pZCk7XHJcbiAgICAgICAgdGhpcy5zaWduYXR1cmVJbWFnZSA9IHRoaXMuZG93bmxvYWRTZXJ2aWNlLmdldERvd25sb2FkVXJsKHNpZ24uaWQsICd0YXNrY2VudGVyc2lnbmF0dXJlJyk7XHJcbiAgICAgICAgdGhpcy50bXBTaWduYXR1cmVJbWFnZSA9IHRoaXMuc2lnbmF0dXJlSW1hZ2U7XHJcbiAgICAgIH1cclxuICAgIH0sIGVycm9yID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICAgIGxvYWQuY2xvc2UoKTtcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmlrDlop7kuIDmnaHluLjnlKjmhI/op4FcclxuICAgKi9cclxuICBhZGQoKSB7XHJcbiAgICBjb25zdCBuZXdFbnRpdHkgPSBDb21tb25Db21tZW50Lm5ld0VudGl0eSgpO1xyXG4gICAgbmV3RW50aXR5LnNvcnRPcmRlciA9IHRoaXMuY29tbWVudExpc3QubGVuZ3RoICsgMTtcclxuICAgIHRoaXMuY29tbWVudExpc3QgPSB0aGlzLmNvbW1lbnRMaXN0LmNvbmNhdChuZXdFbnRpdHkpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5Yig6Zmk5LiA5p2h5oSP6KeBIGRhdGEucm93RGF0YVxyXG4gICAqL1xyXG4gIGNsaWNrVG9EZWxldGVDb21tZW50KGRhdGE6IGFueSkge1xyXG4gICAgaWYgKGRhdGEucm93RGF0YS51c2VySWQgIT09ICcqJykge1xyXG4gICAgICB0aGlzLmNvbW1lbnRMaXN0ID0gdGhpcy5jb21tZW50TGlzdC5maWx0ZXIoYyA9PiBjLmlkICE9IGRhdGEucm93RGF0YS5pZClcclxuICAgICAgdGhpcy5kYXRhR3JpZC5sb2FkRGF0YSh0aGlzLmNvbW1lbnRMaXN0KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOW4uOeUqOaEj+ingeS/neWtmFxyXG4gICAqL1xyXG4gIHNhdmUoKSB7XHJcbiAgICB0aGlzLmRhdGFHcmlkLmVuZENlbGxFZGl0KCk7XHJcbiAgICB0aGlzLmh0dHBTYXZlKCkuc3Vic2NyaWJlKHIgPT4ge1xyXG4gICAgICB0aGlzLmxvYWRDb21tZW50cygpO1xyXG4gICAgICB0aGlzLmNvbW1lbnREaWFsb2cuY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6LCD55So5o6l5Y+j5omn6KGM5paw5aKe5Yig6Zmk44CB5L+u5pS5XHJcbiAgICovXHJcbiAgcHJpdmF0ZSBodHRwU2F2ZSgpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgY29uc3QgdXJsID0gYC9hcGkvcnVudGltZS93Zi92MS4wL2NvbW1vbkNvbW1lbnRzYDtcclxuICAgIGNvbnN0IG9yaWdpbkNvbW1lbnRJZHMgPSB0aGlzLm9yaWdpbkNvbW1lbnRMaXN0LmZpbHRlcihvID0+IG8udXNlcklkICE9PSAnKicpLm1hcChkID0+IGQuaWQpO1xyXG4gICAgLy/liKDpmaTnmoRcclxuICAgIGNvbnN0IGRlbGV0ZUlkcyA9IG9yaWdpbkNvbW1lbnRJZHMuZmlsdGVyKGlkID0+IHRoaXMuY29tbWVudExpc3QuZmluZEluZGV4KGMgPT4gYy5pZCA9PT0gaWQpIDwgMCk7XHJcblxyXG4gICAgcmV0dXJuIGZvcmtKb2luKGRlbGV0ZUlkcy5tYXAoaWQgPT4gdGhpcy5odHRwU3ZjLmRlbGV0ZSh1cmwgKyBgLyR7aWR9YCwgbnVsbCkpXHJcbiAgICAgIC5jb25jYXQodGhpcy5jb21tZW50TGlzdC5tYXAoYWRkID0+IHRoaXMuaHR0cFN2Yy5wb3N0KHVybCwgYWRkKSkpKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gKiB3ZWLnq6/miZPlvIDpmYTku7bpooTop4hcclxuICovXHJcbiAgYXR0YWNobWVudFByZXZpZXcobWV0YWRhdGFJZCkge1xyXG4gICAgY29uc3Qgb3B0aW9ucyA9IHtcclxuICAgICAgYXBwVHlwZTogXCJhcHBcIixcclxuICAgICAgZnVuY0lkOiBcIlwiLFxyXG4gICAgICB0YWJOYW1lOiBcIuaWh+aho+WcqOe6v+mihOiniFwiLFxyXG4gICAgICBhcHBJZDogXCI2Y2NiNDc2Yi1mMmJhLWRmOGYtNmY0Ny1kMzdkMTAwYzU2ZTJcIixcclxuICAgICAgYXBwRW50cmFuY2U6IFwiZG9jdmlld2VydGFiXCIsXHJcbiAgICAgIHRhYklkOiBuZXcgRGF0ZSgpLmdldFRpbWUoKSxcclxuICAgICAgZW50aXR5UGFyYW1zOiB7XHJcbiAgICAgICAgbWV0YWRhdGFJZExpc3Q6IFttZXRhZGF0YUlkXSxcclxuICAgICAgICByb290SWQ6IFwid2ZfYXR0YWNobWVudFwiLFxyXG4gICAgICAgIG1ldGFkYXRhSWQ6IG51bGwsXHJcbiAgICAgICAgdmlld09wdGlvbnM6IHtcclxuICAgICAgICAgIHNob3dIZWFkZXI6IHRydWUsXHJcbiAgICAgICAgICBzaG93UGFnaW5nOiB0cnVlLFxyXG4gICAgICAgICAgc2hvd1RodW1ibmFpbHM6IHRydWUsXHJcbiAgICAgICAgICBzaG93RG93bmxvYWQ6IHRydWUsXHJcbiAgICAgICAgICBzaG93U2VhcmNoOiB0cnVlLFxyXG4gICAgICAgICAgc2hvd1pvb206IHRydWUsXHJcbiAgICAgICAgICBzaG93UHJpbnQ6IHRydWUsXHJcbiAgICAgICAgICBzaG93U2Vjb25kYXJ5VG9vbEJhcjogdHJ1ZSxcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgfTtcclxuICAgICh3aW5kb3cgYXMgYW55KS5nc3BmcmFtZXdvcmtTZXJ2aWNlLnJ0Zi5mdW5jLm9wZW5NZW51KG9wdGlvbnMpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog57O757uf6aKE572u55qE5LiN5YWB6K6457yW6L6R5Yig6ZmkXHJcbiAgICogQHBhcmFtIGRhdGEgZGF0YS5yb3dEYXRh5Li65a6e5L2T5pWw5o2uXHJcbiAgICogQHJldHVybnNcclxuICAgKi9cclxuICBiZWZvcmVFZGl0ID0gKGRhdGE6IGFueSkgPT4ge1xyXG4gICAgaWYgKGRhdGEucm93RGF0YS51c2VySWQgPT0gJyonKSB7XHJcbiAgICAgIHJldHVybiBvZihmYWxzZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb2YodHJ1ZSk7XHJcbiAgfVxyXG59XHJcbiJdfQ==