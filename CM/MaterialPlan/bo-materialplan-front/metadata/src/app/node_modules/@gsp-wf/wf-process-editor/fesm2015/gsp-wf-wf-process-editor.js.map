{"version":3,"file":"gsp-wf-wf-process-editor.js.map","sources":["ng://@gsp-wf/wf-process-editor/lib/wf-process-editor.service.ts","ng://@gsp-wf/wf-process-editor/lib/model/process-time.ts","ng://@gsp-wf/wf-process-editor/lib/domain/entities/flowform-info.ts","ng://@gsp-wf/wf-process-editor/lib/app/process-designer.uistate.ts","ng://@gsp-wf/wf-process-editor/lib/model/resourceKeys.ts","ng://@gsp-wf/wf-process-editor/lib/domain/process-de-util.ts","ng://@gsp-wf/wf-process-editor/lib/domain/process-designer.dataservice.ts","ng://@gsp-wf/wf-process-editor/lib/model/process-clrtypeId.ts","ng://@gsp-wf/wf-process-editor/lib/views/entryForm/entry-form-editor.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/activity-component/activity-component.uistate.ts","ng://@gsp-wf/wf-process-editor/lib/domain/entities/biz-component.entity.ts","ng://@gsp-wf/wf-process-editor/lib/views/activity-component/activity-component.repository.ts","ng://@gsp-wf/wf-process-editor/lib/views/activity-component/activity-component.viewmodel.ts","ng://@gsp-wf/wf-process-editor/lib/domain/entities/actual-parameter.ts","ng://@gsp-wf/wf-process-editor/lib/views/activity-component/activity-component.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/execute-forms/execute-forms.uistate.ts","ng://@gsp-wf/wf-process-editor/lib/views/execute-forms/execute-forms.viewmodel.ts","ng://@gsp-wf/wf-process-editor/lib/views/execute-forms/execute-forms.repository.ts","ng://@gsp-wf/wf-process-editor/lib/views/execute-forms/entities/execute-form.entity.ts","ng://@gsp-wf/wf-process-editor/lib/views/execute-forms/add-execute-form/form-format.service.ts","ng://@gsp-wf/wf-process-editor/lib/views/execute-forms/entities/execute-form.ts","ng://@gsp-wf/wf-process-editor/lib/views/execute-forms/add-execute-form/add-execute-form.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/execute-forms/entities/form-format.ts","ng://@gsp-wf/wf-process-editor/lib/views/execute-forms/entities/form-format-config.ts","ng://@gsp-wf/wf-process-editor/lib/views/execute-forms/entities/form-method-config.ts","ng://@gsp-wf/wf-process-editor/lib/views/execute-forms/parameter-setting/parameter-setting.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/execute-forms/form-operation-config/form-operation-config.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/execute-forms/form-format-config/form-format-config.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/execute-forms/form-config-container/form-config-container.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/execute-forms/execute-forms.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/title-expression/title-expression.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/customize-action/entities/customize-action.entity.ts","ng://@gsp-wf/wf-process-editor/lib/views/customize-action/views/customize-action-list/customize-action-list.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/customize-action/customize-action.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/process-variables/process-variable.entity.ts","ng://@gsp-wf/wf-process-editor/lib/views/variable-setting/views/constant-edit/constant-edit.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/variable-setting/views/component-edit/component-edit-lookup.service.ts","ng://@gsp-wf/wf-process-editor/lib/views/variable-setting/views/component-edit/component-edit.service.ts","ng://@gsp-wf/wf-process-editor/lib/views/variable-setting/views/component-edit/component.entity.ts","ng://@gsp-wf/wf-process-editor/lib/views/variable-setting/views/component-edit/component-edit.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/process-variables/process-variables.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/time-limit-control/time-limit-control.entity.ts","ng://@gsp-wf/wf-process-editor/lib/views/time-limit-control/send-message-operation/send-message-operation.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/time-limit-control/auto-handle-operation/auto-handle-operation.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/time-limit-control/time-limit-control.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/message-notice/message-notice.ts","ng://@gsp-wf/wf-process-editor/lib/views/message-notice/message-notice-edit/message-notice-edit.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/message-notice/message-notice.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/extend-property/extend-property.component.ts","ng://@gsp-wf/wf-process-editor/lib/app/bpmn-process.viewmodel.ts","ng://@gsp-wf/wf-process-editor/lib/views/approvel-items/entities/approval-item.entity.ts","ng://@gsp-wf/wf-process-editor/lib/views/organization-potential-owner/actionOrganizationScope.ts","ng://@gsp-wf/wf-process-editor/lib/views/assign-performer-config/assign-performer-config.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/sign-rule/entites/sign-rule.entity.ts","ng://@gsp-wf/wf-process-editor/lib/views/sign-rule/sign-rule.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/approvel-items/approvel-items.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/expressionEditor/expression-editor.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/jump-scope/jump-scope.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/backward-rule/backward-rule.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/performer/performer.uistate.ts","ng://@gsp-wf/wf-process-editor/lib/views/performer/performer.repository.ts","ng://@gsp-wf/wf-process-editor/lib/views/performer/performer.viewmodel.ts","ng://@gsp-wf/wf-process-editor/lib/views/performer/entities/performer.entity.ts","ng://@gsp-wf/wf-process-editor/lib/views/performer/entities/user-performer.entity.ts","ng://@gsp-wf/wf-process-editor/lib/views/performer/performer-config.service.ts","ng://@gsp-wf/wf-process-editor/lib/views/performer/views/user-performer/user-performer.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/performer/entities/position-performer.entity.ts","ng://@gsp-wf/wf-process-editor/lib/views/performer/views/position-performer/position-performer.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/performer/views/component-performer/component-performer.service.ts","ng://@gsp-wf/wf-process-editor/lib/views/performer/views/component-performer/component-performer.entity.ts","ng://@gsp-wf/wf-process-editor/lib/views/performer/views/component-performer/component-performer.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/performer/views/reporting-line/reporting-line-data.entity.ts","ng://@gsp-wf/wf-process-editor/lib/views/performer/views/reporting-line/service/wf-report-def-help.service.ts","ng://@gsp-wf/wf-process-editor/lib/views/performer/views/reporting-line/service/wf-report-def-help.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/performer/views/reporting-line/reporting-line.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/performer/views/matrix-performer/entitis/matrix-def-info.entity.ts","ng://@gsp-wf/wf-process-editor/lib/views/performer/views/matrix-performer/entitis/matrix-data-info.entity.ts","ng://@gsp-wf/wf-process-editor/lib/views/performer/views/matrix-performer/enum-list/enum-list.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/performer/views/matrix-performer/matrix-performer.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/performer/views/performer-edit/performer-edit.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/performer/views/performer-options/performer-options.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/performer/performer.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/organization-potential-owner/organization-potential-owner.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/anonymous-set/anonymous-set.entity.ts","ng://@gsp-wf/wf-process-editor/lib/views/anonymous-set/anonymous-set.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/variable-setting/variable-setting.ts","ng://@gsp-wf/wf-process-editor/lib/views/variable-setting/variable-setting.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/approval-pivot/approval-pivot-config.ts","ng://@gsp-wf/wf-process-editor/lib/views/approval-pivot/approval-pivot.ts","ng://@gsp-wf/wf-process-editor/lib/views/approval-pivot/approval-pivot.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/urge-handle-rule/urge-handle-rule.ts","ng://@gsp-wf/wf-process-editor/lib/views/urge-handle-rule/urge-handle-rule.component.ts","ng://@gsp-wf/wf-process-editor/lib/app/wf-flowElements.viewModel.ts","ng://@gsp-wf/wf-process-editor/lib/views/save-as-edit/save-as-edit.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/call-activity-sub-process/BillSourceType.ts","ng://@gsp-wf/wf-process-editor/lib/views/call-activity-sub-process/SubProcessType.ts","ng://@gsp-wf/wf-process-editor/lib/views/call-activity-sub-process/call-activity-sub-process.entity.ts","ng://@gsp-wf/wf-process-editor/lib/aif-process-list-help/entity/BifMonitorConstant.ts","ng://@gsp-wf/wf-process-editor/lib/aif-process-list-help/entity/BifMetadataType.ts","ng://@gsp-wf/wf-process-editor/lib/aif-process-list-help/entity/AbstractShowEntity.ts","ng://@gsp-wf/wf-process-editor/lib/aif-process-list-help/entity/RtShowEntity.ts","ng://@gsp-wf/wf-process-editor/lib/aif-process-list-help/entity/RtShowEntitiesWithCustomization.ts","ng://@gsp-wf/wf-process-editor/lib/aif-process-list-help/entity/RtBillProcessListResult.ts","ng://@gsp-wf/wf-process-editor/lib/aif-process-list-help/services/process-list-help.service.ts","ng://@gsp-wf/wf-process-editor/lib/aif-process-list-help/entity/ProcessFilterConditionArgs.ts","ng://@gsp-wf/wf-process-editor/lib/aif-process-list-help/entity/OrderByDirection.ts","ng://@gsp-wf/wf-process-editor/lib/aif-ui-common/pipe/aif-ui-common-locale.pipe.ts","ng://@gsp-wf/wf-process-editor/lib/aif-process-list-help/components/process-list-help/process-list-help.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/call-activity-sub-process2/call-activity-sub-process2.component.ts","ng://@gsp-wf/wf-process-editor/lib/app/sub-process.viewmodel.ts","ng://@gsp-wf/wf-process-editor/lib/app/auto-activity.adapter.ts","ng://@gsp-wf/wf-process-editor/lib/views/event-definition/event-definition.entity.ts","ng://@gsp-wf/wf-process-editor/lib/views/event-definition/event-definition.component.ts","ng://@gsp-wf/wf-process-editor/lib/app/catch-event.adapter.ts","ng://@gsp-wf/wf-process-editor/lib/app/message-activity.adapter.ts","ng://@gsp-wf/wf-process-editor/lib/domain/entities/audit-processDef-info.ts","ng://@gsp-wf/wf-process-editor/lib/model/process-info.ts","ng://@gsp-wf/wf-process-editor/lib/app/notify-activity.adapter.ts","ng://@gsp-wf/wf-process-editor/lib/aif-process-list-help/AifCreationBillProcessConverter.ts","ng://@gsp-wf/wf-process-editor/lib/app/aif-creation-bill-activity.adapter.ts","ng://@gsp-wf/wf-process-editor/lib/app/process-designer.viewmodel.ts","ng://@gsp-wf/wf-process-editor/lib/model/rt-process-info.ts","ng://@gsp-wf/wf-process-editor/lib/views/note/note.component.ts","ng://@gsp-wf/wf-process-editor/lib/wf-process-editor.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/jump-scope/jump-scope.pipe.ts","ng://@gsp-wf/wf-process-editor/lib/views/performer/views/user-performer/users-name.pipe.ts","ng://@gsp-wf/wf-process-editor/lib/index.ts","ng://@gsp-wf/wf-process-editor/lib/views/call-activity-sub-process/call-activity-sub-process.component.ts","ng://@gsp-wf/wf-process-editor/lib/aif-process-list-help/entity/VOTemplateType.ts","ng://@gsp-wf/wf-process-editor/lib/aif-process-list-help/utils/common-model-type-helper.ts","ng://@gsp-wf/wf-process-editor/lib/aif-process-list-help/components/proc-help-query-solution/proc-help-query-solution.component.ts","ng://@gsp-wf/wf-process-editor/lib/aif-ui-common/aif-ui-common.module.ts","ng://@gsp-wf/wf-process-editor/lib/aif-process-list-help/i18n/lang.resource.ts","ng://@gsp-wf/wf-process-editor/lib/aif-process-list-help/process-list-help.module.ts","ng://@gsp-wf/wf-process-editor/lib/wf-process-editor.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class WfProcessEditorService {\r\n\r\n  constructor() { }\r\n}\r\n","export enum ProcessTime {\r\n    dt = 'dt',\r\n    rt = 'rt'\r\n}\r\n","import { FlowFormEntity } from './flowform.entity';\r\nimport { FormalParameterEntity } from './formal-parameter.entity';\r\nimport { BizComponentEntity } from './biz-component.entity';\r\nimport { ExcuteFormEntity } from './excute-form.entity';\r\n\r\nexport class FlowFormInfo {\r\n    flowForm: FlowFormEntity;\r\n    formalParameters: Array<FormalParameterEntity>;\r\n    bizComponents: Array<BizComponentEntity>;\r\n    excuteForms: Array<ExcuteFormEntity>;\r\n    bizActivities: Array<any>;\r\n    customizeActions: Array<any>;\r\n}\r\n","import {Injectable, Injector} from '@angular/core';\r\nimport {KeyMap} from '@farris/ui-property-panel';\r\nimport {FlowFormInfo} from '../domain/entities/flowform-info';\r\nimport {VarEntity} from '@gsp-svc/expression';\r\nimport {GSPCommonModel} from '@gsp-bef/gsp-cm-metadata';\r\nimport {HttpService} from '@ecp-caf/caf-common';\r\nimport {forkJoin, Observable} from 'rxjs';\r\n\r\n@Injectable()\r\n\r\nexport class ProcessDesignerUIState {\r\n\r\n  constructor(private http: HttpService) {\r\n  }\r\n\r\n  // å¥å£åæ®Info\r\n  flowFormInfo: FlowFormInfo = new FlowFormInfo();\r\n\r\n  // Modelä¸ä¸æ\r\n  content = '';\r\n\r\n  // å±æ§æ¡\r\n  propertyConfig: any[] = [];\r\n  propertyData: any = {};\r\n\r\n  // è®¾è®¡å¨å°å\r\n  POST_MESSAGE_TARGET = window.document.location.origin + '/platform/runtime/wf/web/designer/index.html';\r\n\r\n  BE: GSPCommonModel;\r\n  schemas: any[] = [];\r\n\r\n  // å®¡æ¹æ´»å¨å±æ§\r\n  counterSignVariables: any[] = [];\r\n  approvalItems: any[] = [];\r\n\r\n  // æµç¨çå®¡æ¹æ´»å¨èç¹ä¿¡æ¯\r\n  userActList = [];\r\n  // æµç¨åæ¬ç»æåå®¡æ¹æ´»å¨èç¹çä¿¡æ¯\r\n  allActList = [];\r\n  // è®°å½å½åéä¸­ç¨æ·æ´»å¨èç¹çbizActivityId\r\n  bizActivityId: string;\r\n\r\n  // æµç¨ç®¡çåä¿¡æ¯\r\n  isAdministratorConfig = false;\r\n  administrator: any;\r\n  organizations: any[] = new Array();\r\n\r\n\r\n  // å®¡æ¹æ´»å¨å±æ§æä¸¾===========================================================================================\r\n  public assignIterator: KeyMap[] = [{key: 'ALL', value: 'ææ'},\r\n    {key: 'ASSIGN', value: 'ææ´¾'},\r\n    {key: 'CLAIM', value: 'é¢ç¨'}];\r\n  public completeIterator: KeyMap[] = [{key: 'Preempt', value: 'æ¢å æ¨¡å¼'},\r\n    {key: 'Parallel', value: 'å¹¶è¡ä¼ç­¾'},\r\n    {key: 'Sequential', value: 'ä¸²è¡ä¼ç­¾'}];\r\n  public completeIterator4Claim: KeyMap[] = [{key: 'Preempt', value: 'æ¢å æ¨¡å¼'}];\r\n  public boolIterator: KeyMap[] = [{key: true, value: 'æ¯'},\r\n    {key: false, value: 'å¦'}];\r\n  // ä¼ç­¾ä¸åè®¸è·³è½¬\r\n  public noJump4Sign: KeyMap[] = [{key: false, value: 'å¦'}];\r\n  // =================================================================================================\r\n\r\n  // æµç¨å®ä¾ä¸ä¸æ-----------------------------------------------\r\n  procInstContext: VarEntity[] = [\r\n    {key: 'dataId', name: 'åæ®åç ', description: 'åæ®åç '},\r\n    {key: 'procInstId', name: 'æµç¨å®ä¾ID', description: 'æµç¨å®ä¾ID'},\r\n    {key: 'bizDefKey', name: 'å¥å£åæ®ID', description: 'å¥å£åæ®ID'},\r\n    {key: 'processDefinitionKey', name: 'æµç¨å®ä¹KEY', description: 'æµç¨å®ä¹KEY'},\r\n    {key: 'procInstCreator', name: 'æµç¨åèµ·äºº', description: 'æµç¨åèµ·äºº'},\r\n    {key: 'procInstDescription', name: 'æµç¨æè¦', description: 'æµç¨æè¦'},\r\n    {key: 'comment', name: 'å®¡æ¹æè§', description: 'å®¡æ¹æè§'}\r\n  ];\r\n\r\n  // å¬åä¸ä¸æ--------------------------------------------------\r\n  urgeContext: VarEntity[] = [\r\n    {key: 'dataId', name: 'åæ®åç ', description: 'åæ®åç '},\r\n    {key: 'procInstId', name: 'æµç¨å®ä¾ID', description: 'æµç¨å®ä¾ID'},\r\n    {key: 'bizDefKey', name: 'å¥å£åæ®ID', description: 'å¥å£åæ®ID'},\r\n    {key: 'processDefinitionKey', name: 'æµç¨å®ä¹KEY', description: 'æµç¨å®ä¹KEY'},\r\n    {key: 'procInstCreator', name: 'æµç¨åèµ·äºº', description: 'æµç¨åèµ·äºº'},\r\n    {key: 'procInstDescription', name: 'æµç¨æè¦', description: 'æµç¨æè¦'},\r\n    {key: 'comment', name: 'å®¡æ¹æè§', description: 'å®¡æ¹æè§'},\r\n    {key: 'bizDefName', name: 'æµç¨åç±»åç§°', description: 'æµç¨åç±»åç§°'},\r\n    {key: 'curLoginUsername', name: 'å½åç»å½äººåç§°', description: 'å½åç»å½äººåç§°'},\r\n    {key: 'procInstCreatorName', name: 'æµç¨åèµ·äººåç§°', description: 'æµç¨åèµ·äººåç§°'}\r\n  ];\r\n  /**\r\n   * æµç¨åæ°ä¸ä¸æ\r\n   */\r\n  formalParameterContext: VarEntity[] = [];\r\n\r\n  /**\r\n   * åä¸èä¸ä¸æ\r\n   */\r\n  participantContext: VarEntity[] = [\r\n    {\r\n      key: 'procInstCreator',\r\n      name: 'æµç¨åèµ·äºº',\r\n      description: 'æµç¨åèµ·äºº'\r\n    }, {\r\n      key: 'currentUser',\r\n      name: 'å½åæ§è¡äºº',\r\n      description: 'å½åæ§è¡äºº'\r\n    }, {\r\n      key: 'preActExecutors',\r\n      name: 'ä¸ä¸ä¸ªæ´»å¨çæ§è¡äºº',\r\n      description: 'ä¸ä¸ä¸ªæ´»å¨çæ§è¡äºº'\r\n    }];\r\n\r\n  /**\r\n   * æ´»å¨æä»¶åæ°ä¸ä¸æ\r\n   */\r\n  activityComponentContext: VarEntity[] = [\r\n    {\r\n      key: 'conclusionType',\r\n      name: 'ç»è®ºç±»å',\r\n      description: 'å®¡æ¹é¡¹æµè½¬æ¹åï¼1æ­£åï¼2ååï¼3ç»æ­¢'\r\n    }, {\r\n      key: 'conclusionValue',\r\n      name: 'ç»è®ºå¼',\r\n      description: 'å®¡æ¹é¡¹ç¼å·ï¼ä¾å¦ï¼\"Pass\"ã\"Back\"ã\"Refuse\"'\r\n    }];\r\n  processVariableContext: VarEntity[] = new Array();\r\n\r\n  private processVariables = new Array();\r\n\r\n  set ProcessVariables(variables: any[]) {\r\n    this.processVariables = variables;\r\n    this.setProcessVariableContext();\r\n  }\r\n\r\n  get ProcessVariables() {\r\n    return this.processVariables;\r\n  }\r\n\r\n  /**\r\n   * æ±æ¥çº§æ¬¡\r\n   */\r\n  dimensions = [\r\n    {value: 'directSuperior', text: 'ç´æ¥ä¸çº§'},\r\n    {value: 'higherSuperior', text: 'é´æ¥ä¸çº§'}\r\n  ];\r\n\r\n  /**\r\n   * å¯å¨æ¹å¼\r\n   */\r\n  startModeIterator: KeyMap[] = [\r\n    {key: 'DIRECT', value: 'ç´æ¥'},\r\n    {key: 'EXTERNAL_PROCESS', value: 'å¤é¨æµç¨'},\r\n    {key: 'SUB_PROCESS', value: 'å­æµç¨'}\r\n  ];\r\n\r\n  /**\r\n   * æ¾ç¤ºç»ç«¯\r\n   */\r\n  displayTerminal: KeyMap[] = [\r\n    {key: \"ALL\", value: 'çµèç«¯åç§»å¨ç«¯'},\r\n    {key: \"WEB\", value: 'çµèç«¯'},\r\n    {key: \"APP\", value: 'ç§»å¨ç«¯'}\r\n  ];\r\n\r\n  /**\r\n   * æ¶æ¯æ¸ éåè¡¨\r\n   */\r\n  messageChannels = new Array();\r\n\r\n  orgTypeCollection: { value, text }[] = [];\r\n\r\n  variableContextName(key: string) {\r\n    return this.participantContext.find(i => i.key === key).name;\r\n  }\r\n\r\n  ranksName(value: string) {\r\n    return this.dimensions.find(i => i.value === value).text;\r\n  }\r\n\r\n  getMessageChannels() {\r\n    const url = '/api/runtime/sys/v1.0/messageplatform/channel/getenabledchannels';\r\n    this.http.get(url).subscribe((re: any) => {\r\n      this.messageChannels = re;\r\n    });\r\n  }\r\n\r\n  getAdministratorInfo() {\r\n    this.getCurrentUser().subscribe(user => {\r\n      const userId = user.userId;\r\n      forkJoin(this.getAdministratorConfig(), this.getAdministrator(userId)).subscribe(re => {\r\n        this.isAdministratorConfig = re[0].currentValue === 'true' ? true : false;\r\n        this.administrator = re[1];\r\n        if (this.isAdministratorConfig && this.administrator && this.administrator.enable) {\r\n          forkJoin(this.administrator.administratorAuthorities.map(a => {\r\n            if (a.includeSubordinate) {\r\n              return this.getSysOrgWithAllSubsById(a.organization);\r\n            } else {\r\n              return this.getSysOrgById(a.organization);\r\n            }\r\n          })).subscribe((r: any[]) => {\r\n            if (r && r.length > 0) {\r\n              this.organizations = new Array();\r\n              for (const orgs of r) {\r\n                if (orgs && orgs.length > 0) {\r\n                  for (const o of orgs) {\r\n                    if (!this.organizations.some(org => org.id === o.id)) {\r\n                      this.organizations.push(o);\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          });\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  private getCurrentUser(): Observable<any> {\r\n    const url = '/api/runtime/sys/v1.0/userinfos?infoType=user';\r\n    return this.http.get(url);\r\n  }\r\n\r\n  private getAdministrator(userId: string): Observable<any> {\r\n    const url = `/api/runtime/wf/v1.0/processAdministrator/${userId}`;\r\n    return this.http.get(url);\r\n  }\r\n\r\n  private getAdministratorConfig(): Observable<any> {\r\n    const url = `/api/runtime/wf/v1.0/generalConfig/Is_EnableAdministrator`;\r\n    return this.http.get(url);\r\n  }\r\n\r\n  private getSysOrgById(orgId: string): Observable<any> {\r\n    const url = `/api/runtime/sys/v1.0/sysOrgs/${orgId}`;\r\n    return this.http.get(url);\r\n  }\r\n\r\n  private getSysOrgWithAllSubsById(orgId: string): Observable<any> {\r\n    const url = `/api/runtime/sys/v1.0/sysOrgs?param=` + encodeURIComponent(`{\"parentId\":\"${orgId}\",\"withAllSub\":true}`);\r\n    return this.http.get(url);\r\n  }\r\n\r\n  private getCurUserInfo(userId: string): Observable<any> {\r\n    const url = `/api/runtime/sys/v1.0/users/${userId}`;\r\n    return this.http.get(url);\r\n  }\r\n\r\n  private setProcessVariableContext() {\r\n    this.processVariableContext = new Array();\r\n    if (this.ProcessVariables && this.ProcessVariables.length > 0) {\r\n      for (const v of this.ProcessVariables) {\r\n        const varEntity = {\r\n          key: v.name,\r\n          name: v.documentation,\r\n          description: v.description\r\n        };\r\n        this.processVariableContext.push(varEntity);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * è·åæ¡æ¶çé¡¶çº§window\r\n   * è¿è¡è·¨åå°è£\r\n   */\r\n  private getTopWindow(): Window {\r\n    let curWin: Window = window.self;\r\n    try {\r\n        while (curWin.location.origin === curWin.parent.location.origin) {\r\n            if (curWin !== curWin.parent && !(curWin as any).isRTFTopWin) {\r\n                curWin = curWin.parent;\r\n            } else {\r\n                break;\r\n            }\r\n        }\r\n    } catch (e) { }\r\n    return curWin;\r\n  }\r\n\r\n  // --------------------------0-------------------------\r\n\r\n  // uiStateåå§\r\n  initUIState() {\r\n    this.propertyConfig = [];\r\n    this.propertyData = null;\r\n    this.content = '';\r\n    this.schemas = [];\r\n  }\r\n\r\n  /**\r\n   * è·åææå®¡æ¹èç¹ä¿¡æ¯\r\n   * @param data\r\n   */\r\n  getUserActList(data: any[]) {\r\n    this.userActList = [];\r\n    if (data && data.length > 0) {\r\n      for (const userAct of data) {\r\n        const userActInfo = {\r\n          Id: userAct.Id,\r\n          Name: userAct.Name\r\n        };\r\n        this.userActList.push(userActInfo);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * è·åææç»æèç¹ä¿¡æ¯\r\n   * @param data\r\n   */\r\n     getEndEventList(data: any[]) {\r\n      this.allActList = [];\r\n      if (data && data.length > 0) {\r\n        for (const endEvent of data) {\r\n          const endEventInfo = {\r\n            Id: endEvent.Id,\r\n            Name: endEvent.Name\r\n          };\r\n          // åç»æèç¹å­å°\r\n          this.allActList.push(endEventInfo);\r\n        }\r\n      }\r\n      // å­å¥å®¡æ¹æ´»å¨èç¹\r\n      this.allActList = this.allActList.concat(this.userActList);\r\n    }\r\n}\r\n\r\n\r\n","export enum ResourceKeys {\r\n    // ååºå¨ä½\r\n    new = 'new',                                    // æ°å»ºæµç¨\r\n    open = 'open',                                  // æå¼æµç¨\r\n    updateProperty = 'updateProperty',              // æ´æ°å±æ§\r\n    refresh = 'refresh',                            // å·æ°å±æ§æ¡\r\n    loadBizActivity = 'loadBizActivity',            // åºäºæµç¨åç±»å è½½ä¸å¡æ´»å¨\r\n\r\n    // æ¥åæ¶æ¯\r\n    wf_initProperty = 'initProperty',               // åå§å±æ§æ¡\r\n    wf_save = 'save',                               // ä¿å­æµç¨\r\n    wf_saveAs = 'saveAs',                           // å¦å­ä¸º\r\n    wf_sync = 'wf_sync',                            // åæ­¥æµç¨\r\n    wf_note = 'wf_note',                            // è®°å½åæ´\r\n    wf_deploy = 'release',                          // åå¸æµç¨\r\n    wf_closeDesigner = 'closeDesigner',             // å³é­æµç¨è®¾è®¡å¨\r\n    getActivities = 'getActivities',                // è·åæ´»å¨èç¹\r\n    getEndEvents = 'getEndEvents',                  //  è·åç»æèç¹\r\n    wf_showTip = 'showTip',\r\n    /**\r\n     * å±æ§åç§°\r\n     */\r\n    EntryForm = 'EntryForm',                        // æµç¨åç±»\r\n    ConditionExpression = 'ConditionExpression',    // æ¡ä»¶è¡¨è¾¾å¼\r\n    ParticipantSchemes = 'ParticipantSchemes',      // åä¸è\r\n    ApprovalItems = 'ApprovalItems',                // å®¡æ¹é¡¹\r\n    AssignStrategy = 'AssignStrategy',              // åéç­ç¥\r\n    OperatorConfig = 'OperatorConfig',              // åéç­ç¥éç½®\r\n    CompleteStrategy = 'CompleteStrategy',          // å®æç­ç¥\r\n    SignRule = 'SignRule',                          // ä¼ç­¾è§å\r\n    Retrievable = 'Retrievable',                    // åè®¸åå\r\n    AddSignFrontAble = 'AddSignFrontAble',          // åè®¸å¾è¯¢\r\n    AddSignBehindAble = 'AddSignBehindAble',        // åè®¸å ç­¾\r\n    NotifyAble = 'NotifyAble',                      // åè®¸ç¥ä¼\r\n    DisplayTerminal = 'DisplayTerminal',            // æ¾ç¤ºç»ç«¯\r\n    ExecuteForms = 'ExecuteForms',\r\n    sendBackedTask = 'sendBackedTask',\r\n    SelectTargetAble = 'SelectTargetAble',          // åè®¸è°æ´\r\n    JumpScope = 'JumpScope',                        // è·³è½¬è§å\r\n    BackWardRule = 'BackWardRule',                  // é©³åè§å\r\n    Tools = 'Tools',\r\n    SelectBranch = 'SelectBranch',\r\n    Default = 'Default',                            // é»è®¤åæ¯\r\n    allowPreAssign = 'allowPreAssign',\r\n    startMode = 'startMode',\r\n    transferScope = 'transferScope',                // ç§»äº¤èå´\r\n    eventDefinitions = 'EventDefinitions',\r\n    urgeHandleRule = 'urgeHandleRule',\r\n\r\n    // å­æµç¨\r\n    callActivitySubProcess = 'callActivitySubProcess',\r\n\r\n    wf_Component = 'wf_Component',\r\n    wf_ExecuteForms = 'wf_ExecuteForms',\r\n    wf_ExecuteForms_PC = 'wf_ExecuteForms_PC',\r\n    wf_ExecuteForms_Mobile = 'wf_ExecuteForms_Mobile',\r\n    wf_TitleExpression = 'wf_TitleExpression',\r\n    wf_CustomizeAction = 'wf_CustomizeAction',\r\n    timeLimitControl = 'timeLimitControl',\r\n    anonymousSet = 'anonymousSet',\r\n    processVariables = 'processVariables',\r\n    variableSettings = 'variableSettings',\r\n    messageNotice = 'messageNotice',\r\n    approvalPivotConfig = 'approvalPivotConfig',\r\n    // state\r\n    complete = 'complete',\r\n    // åæ®æµç¼å·\r\n    aifProcessCode = 'aifProcessCode',\r\n    // isRelied\r\n    isRelied = 'isRelied',\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\n@Injectable()\r\n\r\nexport class ProcessDeUtil {\r\n\r\n    private static generatedId: number = parseInt(Date.now().toString());\r\n    private static keys = '0123456789ABCDEFGHJKLMNPQRSTUVWXYZ';\r\n    private static exponent = 34;\r\n\r\n    public funcId: string;\r\n    constructor() { }\r\n\r\n    static GenerateElementId(): string {\r\n        ++(this.generatedId);\r\n\r\n        return '_' + this.Decimal2String(this.generatedId);\r\n    }\r\n\r\n    private static Decimal2String(a: number) {\r\n        let c: number;\r\n        let b = '';\r\n        do {\r\n            c = a % this.exponent, b = this.keys[c] + b, a = (a - c) / this.exponent;\r\n        }\r\n        while (a > 0);\r\n        return b;\r\n    }\r\n    /**\r\n     * åå»ºåç \r\n     */\r\n    static createNM() {\r\n        function S4() {\r\n            return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\r\n        }\r\n        return (S4() + S4() + '-' + S4() + '-' + S4() + '-' + S4() + '-' + S4() + S4() + S4());\r\n        // return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\r\n        //     const r = Math.random() * 16 | 0, v = c === 'x' ? r : (r & 0x3 | 0x8);\r\n        //     return v.toString(16);\r\n        // });\r\n    }\r\n\r\n    getProcessDesignerRouter() {\r\n        const url = 'processList';\r\n        return url;\r\n    }\r\n    // è·åæµç¨åç±»webapi\r\n    getFlowFormWebApi() {\r\n        return '/api/runtime/wf/v1.0/flowForm';\r\n    }\r\n    // è·ååæ°åè¡¨webapi\r\n    getFormalParametersWebApi() {\r\n        return '/api/runtime/wf/v1.0/formalParameter';\r\n    }\r\n    // è·åè¿è¡æ¶åæ°æ®webapi\r\n    getMetaDataRUWebApi() {\r\n        return '/api/runtime/lcm/v1.0/rt-metadatas/';\r\n    }\r\n    // è·åæµç¨æä»¶webapi\r\n    getBizComponentsWebApi() {\r\n        return '/api/runtime/wf/v1.0/bizComponent';\r\n    }\r\n    // åºäºæµç¨åç±»è·åè¡¨åå®ä¹\r\n    getExcuteFormsWebApi() {\r\n        return '/api/runtime/wf/v1.0/excuteForm';\r\n    }\r\n    // è·åè®¾è®¡æ¶æµç¨å®ä¹WebAPi\r\n    getProcessDefinitionWebApi() {\r\n        return '/api/runtime/wf/v1.0/dtProcDefs';\r\n    }\r\n\r\n    // å¤æ­æ¯å¦åè®¸å é¤æµç¨å®ä¹çapi\r\n    getCheckExistActiveProcDefApi() {\r\n        return '/api/runtime/wf/v1.0/procDefs/checkExistActiveProcDef';\r\n    }\r\n    /**\r\n     * è·åä¸å¡æ´»å¨webApi\r\n     */\r\n    getBizActivityWebApi(ffId: string) {\r\n        return `/api/runtime/wf/v1.0/bizActivity?flowFormKey=${ffId}`;\r\n    }\r\n\r\n    getProcDefKeyWebApi() {\r\n        return '/api/runtime/wf/v1.0/procDefs/processDefinitionKeys';\r\n    }\r\n    // /**\r\n    //  * ä¸å¡æ´»å¨æä»¶webApi\r\n    //  */\r\n    // getBizActCptWebApi() {\r\n    //     return '/api/runtime/wf/v1.0/BizActivities/GetComponents';\r\n    // }\r\n    /**\r\n     * åå¸æµç¨api\r\n     */\r\n    deployWebApi() {\r\n        return '/api/runtime/wf/v1.0/procDefs/deploy';\r\n    }\r\n    /**\r\n     * ä¿å­æµç¨api\r\n     */\r\n    saveWebApi() {\r\n        return '/api/runtime/wf/v1.0/DTProcessDefinitions/SaveBpmnModel';\r\n    }\r\n    /**\r\n     * è·åå®¡æ¹å¨ä½webapi\r\n     */\r\n    getApprovalActionWebApi() {\r\n        return '/api/runtime/wf/v1.0/approvalAction';\r\n    }\r\n\r\n    /**\r\n     * è·åè¿è¡æ¶æµç¨å®ä¹WebAPi\r\n     */\r\n    getRTProcessDefinitionWebApi() {\r\n        return '/api/runtime/wf/v1.0/procDefs';\r\n    }\r\n\r\n    getValue(data: any, code: string): string {\r\n        if (!code) {\r\n            return '';\r\n        }\r\n        let resultVal = '';\r\n        if (code.indexOf('.') === -1) {\r\n            resultVal = data[code];\r\n        } else {\r\n            resultVal = code.split('.').reduce((obj, key) => {\r\n                if (obj) {\r\n                    return obj[key];\r\n                } else {\r\n                    return null;\r\n                }\r\n            }, data);\r\n        }\r\n        return resultVal;\r\n    }\r\n    /**\r\n     * è½¬æ¢\r\n     * @param jsonObj Object\r\n     */\r\n    toUpperCase(jsonObj: Object): any {\r\n        if (typeof (jsonObj) === 'object') {\r\n            for (const key of Object.keys(jsonObj)) {\r\n                jsonObj[key.substring(0, 1).toUpperCase() + key.substring(1)] = jsonObj[key];\r\n                delete (jsonObj[key]);\r\n            }\r\n        }\r\n        return jsonObj;\r\n    }\r\n    toLowCase(jsonObj: Object): any {\r\n        if (typeof (jsonObj) === 'object') {\r\n            for (const key of Object.keys(jsonObj)) {\r\n                if ((key.substring(0, 1).toLowerCase() + key.substring(1)) !== key) {\r\n                    jsonObj[key.substring(0, 1).toLowerCase() + key.substring(1)] = jsonObj[key];\r\n                    delete (jsonObj[key]);\r\n                }\r\n            }\r\n        }\r\n        return jsonObj;\r\n    }\r\n}\r\n","import { Injectable, Injector } from '@angular/core';\r\nimport { HttpService } from '@ecp-caf/caf-common';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { map, mergeMap } from 'rxjs/operators';\r\nimport { forkJoin } from 'rxjs/observable/forkJoin';\r\nimport { of } from 'rxjs/observable/of';\r\nimport { ProcessDeUtil } from './process-de-util';\r\nimport { AuditProcessDefInfo } from './entities/audit-processDef-info';\r\nimport { ProcessInfo } from '../model/process-info';\r\nimport { RTProcessInfo } from '../model/rt-process-info';\r\n\r\n@Injectable()\r\nexport class ProcessDesignerDataService {\r\n    constructor(\r\n        private http: HttpService,\r\n        private util: ProcessDeUtil) { }\r\n\r\n    // åºäºæµç¨åç±»IDè·åæµç¨åç±»ä¿¡æ¯\r\n    GetFlowFormbyId(id: string): Observable<any> {\r\n        if (id) {\r\n            let url = this.util.getFlowFormWebApi();\r\n            url += `/${id}`;\r\n            return this.http.get(url);\r\n        }\r\n    }\r\n    // åºäºæµç¨åç±»è·ååæ°åè¡¨\r\n    getParametersbyFlowFormKey(id: string): Observable<any> {\r\n        if (id) {\r\n            let url = this.util.getFormalParametersWebApi();\r\n            url += `?flowFormKey=${id}`;\r\n            return this.http.get(url);\r\n        }\r\n    }\r\n    // åºäºæµç¨åç±»è·åæµç¨æä»¶\r\n    getComponentsbyFlowformkey(id: string): Observable<any> {\r\n        if (id) {\r\n            let url = this.util.getBizComponentsWebApi();\r\n            url += `/query?param=` + encodeURIComponent(`{\"flowFormKey\":\"${id}\"}`);\r\n            return this.http.get(url);\r\n        }\r\n    }\r\n    // åºäºæµç¨åç±»è·åè¡¨åå®ä¹\r\n    getExecuteFormbyFlowFormKey(id: string): Observable<any> {\r\n        if (id) {\r\n            let url = this.util.getExcuteFormsWebApi();\r\n            url += `?flowFormKey=${id}`;\r\n            return this.http.get(url);\r\n        }\r\n    }\r\n    /**\r\n     * åºäºæµç¨åç±»Idè·åä¸å¡æ´»å¨\r\n     * @param ffId æµç¨åç±»id\r\n     */\r\n    getBizActivities(ffId: string) {\r\n        if (ffId) {\r\n            const url = this.util.getBizActivityWebApi(ffId);\r\n            return this.http.get(url);\r\n                // .pipe(\r\n                //     map((re: any) => re),\r\n                //     mergeMap((activities: any[]) => {\r\n                //         if (activities && activities.length > 0) {\r\n                //             return forkJoin(activities.map(activity => {\r\n                //                 return forkJoin(this.getBizActivityComponents(ffId, activity.id),\r\n                //                     this.getBizActivityActions(activity.id))\r\n                //                     .pipe(\r\n                //                         map((re: any[]) => {\r\n                //                             activity.components = re[0];\r\n                //                             activity.actions = re[1];\r\n                //                             return activity;\r\n                //                         }));\r\n                //             }));\r\n                //         } else {\r\n                //             return of([]);\r\n                //         }\r\n                //     })\r\n                // );\r\n        }\r\n    }\r\n\r\n    /**\r\n     * åºäºæµç¨åç±»IDè·åèªå®ä¹å¨ä½\r\n     * @param formId æµç¨åç±»ID\r\n     */\r\n    getCustomizeActions(formId: string): Observable<any> {\r\n        if (formId) {\r\n            const url = `/api/runtime/wf/v1.0/customizeAction?flowFormKey=${formId}`;\r\n            return this.http.get(url);\r\n        }\r\n    }\r\n    /**\r\n     * åºäºä¸å¡æ´»å¨idè·åä¸å¡æ´»å¨æä»¶\r\n     * @param id ä¸å¡æ´»å¨id\r\n     */\r\n    private getBizActivityComponents(flowFormId: string, id: string) {\r\n        if (id) {\r\n            let url = this.util.getBizComponentsWebApi();\r\n            url += `/query?param=` + encodeURIComponent(`{\"flowFormKey\":\"${flowFormId}\",\"owner\":\"${id}\",\"ownerType\":\"Activity\"}`);\r\n            return this.http.get(url);\r\n        }\r\n    }\r\n    private getBizActivityActions(id: string) {\r\n        if (id) {\r\n            let url = this.util.getApprovalActionWebApi();\r\n            url += `?bizActivityId=${id}`;\r\n\r\n            return this.http.get(url);\r\n        }\r\n    }\r\n    // åºäºIDè·åBE\r\n    getBusinessEntitybyId(id: string): Observable<any> {\r\n        if (id) {\r\n            // let url = this.util.getMetaDataRUWebApi();\r\n            // url += id;\r\n            // const url = `/api/runtime/lcm/v1.0/bef/handledBeMeta?beId=${id}`;\r\n            const url = `/api/runtime/lcm/v1.0/bef/expression?beId=${id}`;\r\n            return this.http.get(url);\r\n        }\r\n    }\r\n    /**\r\n     * åºäºæµç¨å®ä¹Keyè·åä¸ä¸æ\r\n     * @param key æµç¨å®ä¹key\r\n     */\r\n    getProcContentbyKey(key: string): Observable<any> {\r\n        if (key) {\r\n            let url = this.util.getProcessDefinitionWebApi();\r\n            url += `/bpmnModel?procDefKey=${key}`;\r\n            return this.http.get(url);\r\n        }\r\n    }\r\n    /**\r\n     * åºäºæµç¨å®ä¹Keyè·åä¸ä¸æ\r\n     * @param key æµç¨å®ä¹Id\r\n     */\r\n    getRTProcContentbyId(id: string): Observable<any> {\r\n        if (id) {\r\n            let url = this.util.getRTProcessDefinitionWebApi();\r\n            url += `/${id}/bpmnModel`;\r\n            return this.http.get(url);\r\n        }\r\n    }\r\n    /**\r\n     * ä¿å­æµç¨\r\n     * @param content\r\n     */\r\n    saveProcess(content: string, processInfo: ProcessInfo, state: number): Observable<any> {\r\n        if (content) {\r\n            const postData = {\r\n                organization: processInfo.procOrg ? processInfo.procOrg.orgId : '',\r\n                organizationName: processInfo.procOrg ? processInfo.procOrg.orgName : '',\r\n                accessLevel: processInfo.accessLevel,\r\n                procContent: content,\r\n                state\r\n            };\r\n            const url = this.util.getProcessDefinitionWebApi();\r\n            return this.http.post(url, JSON.stringify(postData));\r\n        }\r\n    }\r\n\r\n    auditProcessDef(info: AuditProcessDefInfo) {\r\n        const url = '/api/runtime/wf/v1.0/dtProcDefs/auditProcessDef';\r\n        this.http.post(url, info).subscribe(re => { });\r\n    }\r\n\r\n    /**\r\n     * åå¸æµç¨\r\n     * @param content\r\n     */\r\n    deployProcess(content: string): Observable<any> {\r\n        if (content) {\r\n            const postData = {\r\n                procDefContent: content\r\n            };\r\n            const url = this.util.deployWebApi();\r\n            return this.http.post(url, JSON.stringify(postData));\r\n        }\r\n    }\r\n\r\n    saveRTProcess(content: string, procDefId: string): Observable<any> {\r\n        if (content) {\r\n            const postData = {\r\n                procDefContent: content\r\n            };\r\n            let url = this.util.getRTProcessDefinitionWebApi();\r\n            url += `/${procDefId}/adjust`;\r\n            return this.http.post(url, JSON.stringify(postData));\r\n        }\r\n    }\r\n\r\n    syncDtProcess(content: string, rtProcessInfo: RTProcessInfo): Observable<any> {\r\n        if (content) {\r\n            const postData = {\r\n                organization: rtProcessInfo.procOrg ? rtProcessInfo.procOrg.orgId : '',\r\n                organizationName: rtProcessInfo.procOrg ? rtProcessInfo.procOrg.orgName : '',\r\n                accessLevel: rtProcessInfo.accessLevel || 'public',\r\n                procContent: content,\r\n                state: 0\r\n            };\r\n            const url = '/api/runtime/wf/v1.0/dtProcDefs';\r\n            return this.http.post(url, JSON.stringify(postData));\r\n        }\r\n    }\r\n}\r\n","export enum ProcessClrTypeID {\r\n    /**\r\n     * æµç¨typeId\r\n     */\r\n    process = 'bpmn.Process',\r\n    /**\r\n     * å¼å§æ´»å¨typeId\r\n     */\r\n    startActivity = 'wf.StartActivity',\r\n    /**\r\n     * æ´»å¨èç¹typeId\r\n     */\r\n    userActivity = 'wf.UserActivity',\r\n    /**\r\n     * äººå·¥æä½typeId\r\n     */\r\n    operationActivity = 'wf.OperationActivity',\r\n    /**\r\n     * ç»ææ´»å¨typeId\r\n     */\r\n    endEvent = 'bpmn.EndEvent',\r\n    /**\r\n     * æµè½¬çº¿typeId\r\n     */\r\n    sequenceFlow = 'bpmn.SequenceFlow',\r\n    /**\r\n     * æä»ç½å³typeId\r\n     */\r\n    exclusiveGateway = 'bpmn.ExclusiveGateway',\r\n    /**\r\n     * å¹¶è¡ç½å³typeId\r\n     */\r\n    parallelGateway = 'bpmn.ParallelGateway',\r\n\r\n    /**\r\n     * å­æµç¨\r\n     */\r\n    subProcess = 'wf.CallActivitySubProcess',\r\n\r\n    /**\r\n     * æå¡æ´»å¨\r\n     */\r\n    autoActivity = 'wf.AutoActivity',\r\n\r\n    /**\r\n     * ä¿¡å·æè·\r\n     */\r\n    catchEvent = 'wf.IntermediateCatchEventImpl',\r\n\r\n    /**\r\n     * æ¶æ¯\r\n     */\r\n    messageActivity = 'wf.MessageActivity',\r\n\r\n    /**\r\n     * ç¥ä¼æ´»å¨\r\n     */\r\n    notifyActivity = \"wf.NotifyActivity\",\r\n\r\n    /**\r\n     * çåæ´»å¨\r\n     */\r\n    aifCreationBillActivity = \"wf.AifCreationBillActivity\",\r\n}\r\n","import { Component, OnInit, Output, Input, ViewChild, EventEmitter, TemplateRef, AfterViewInit } from '@angular/core';\r\nimport { DataTableComponent } from '@farris/ui-datatable';\r\nimport { TypeConverter } from '@farris/ui-property-panel';\r\nimport { HttpService } from '@ecp-caf/caf-common';\r\nimport { DatagridComponent } from '@farris/ui-datagrid';\r\nimport { MessagerService } from '@farris/ui-messager';\r\n\r\n@Component({\r\n  selector: 'app-entry-form-editor',\r\n  templateUrl: './entry-form-editor.component.html',\r\n  styleUrls: ['./entry-form-editor.component.css']\r\n})\r\nexport class EntryFormEditorComponent implements OnInit, AfterViewInit {\r\n\r\n  @Output() closeModal = new EventEmitter<any>();\r\n  @Output() submitModal = new EventEmitter<any>();\r\n\r\n  @Input()\r\n  set value(data: any) {\r\n    if (data) {\r\n      this.flowFormId = data.id;\r\n    }\r\n  }\r\n\r\n  @ViewChild('iconSelectFooter') modalFooter: TemplateRef<any>;\r\n\r\n  @ViewChild('grid') grid: DatagridComponent;\r\n\r\n  @Input() editorParams: any = {};\r\n\r\n  private flowFormId: string;\r\n  modalConfig = {\r\n    title: 'æµç¨åç±»',\r\n    width: 540,\r\n    height: 520,\r\n    showButtons: true\r\n  };\r\n\r\n  columns = [\r\n    { title: 'ç¼å·', field: 'code', width: 100, sortable: true },\r\n    { title: 'åç§°', field: 'name', width: 100, sortable: true },\r\n    { title: 'ç±»å', field: 'base', width: 60, formatter: { type: 'boolean', options: { trueText: 'åºç¡', falseText: 'æ©å±' } }}\r\n  ];\r\n\r\n  data = [];\r\n\r\n  constructor(\r\n    private http: HttpService,\r\n    private message: MessagerService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.getBaseAndExtendFlowForm();\r\n  }\r\n  ngAfterViewInit() {\r\n  }\r\n\r\n  clickOK() {\r\n    if (!this.grid.selectedRow) {\r\n      this.message.info('å°æªéæ©æµç¨åç±»');\r\n      return;\r\n    }\r\n    const object = { value: this.grid.selectedRow.data, parameters: null };\r\n    this.submitModal.emit(object);\r\n  }\r\n\r\n  clickCancel() {\r\n    this.closeModal.emit();\r\n  }\r\n\r\n  private getBaseAndExtendFlowForm() {\r\n    if (this.flowFormId) {\r\n      const url = `/api/runtime/wf/v1.0/flowForm/${this.flowFormId}/baseAndExtend`;\r\n      this.http.get(url).subscribe((re: any) => {\r\n        if (re && re.length > 0) {\r\n          this.data = re;\r\n          setTimeout(() => {\r\n            this.grid.selectRow(this.flowFormId, true);\r\n          }, 0);\r\n        } else {\r\n          this.message.info('æµç¨åç±»å·²ç»ä¸å­å¨');\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n}\r\nexport class FlowFormConverter implements TypeConverter {\r\n  constructor() { }\r\n\r\n  convertTo(data): string {\r\n    if (data) {\r\n      return data.name;\r\n    }\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n","import { Injectable } from '@angular/core';\r\nimport { BizComponentEntity } from '../../domain/entities/biz-component.entity';\r\nimport { ActualParameter } from '../../domain/entities/actual-parameter';\r\n\r\n@Injectable()\r\n\r\nexport class ActivityComponentUIState {\r\n    /**\r\n     * æä»¶åè¡¨\r\n     */\r\n    components: BizComponentEntity[] = [];\r\n    /**\r\n     * éä¸­æä»¶\r\n     */\r\n    curComponent: BizComponentEntity;\r\n    /**\r\n     * æµç¨åç±»ç»å®çæææ´»å¨æä»¶\r\n     */\r\n    allComponents: BizComponentEntity[] = [];\r\n    /**\r\n     * æä»¶æ§è¡æ¶æºæ°æ®ç»å®\r\n     */\r\n    public executionCollection = [\r\n        // { text: 'æµç¨åå»º', value: 'PROCESSINSTANCE_CREATED' },\r\n        { text: 'æµç¨å¯å¨', value: 'PROCESSINSTANCE_STARTED' },\r\n        { text: 'æµç¨æèµ·', value: 'PROCESSINSTANCE_SUSPENDED' },\r\n        { text: 'æµç¨æ¢å¤', value: 'PROCESSINSTANCE_RESUMED' },\r\n        { text: 'æµç¨å®æ', value: 'PROCESSINSTANCE_COMPLETED' },\r\n        { text: 'æµç¨ç»æ­¢', value: 'PROCESSINSTANCE_ABORTED' },\r\n        // { text: 'æµç¨é¢è­¦', value: 'PROCESSINSTANCE_ALARM' },\r\n        // { text: 'æµç¨è¶æ¶', value: 'PROCESSINSTANCE_TIMEOUT' },\r\n        // { text: 'æµç¨å é¤', value: 'PROCESSINSTANCE_DELETED' },\r\n        { text: 'æµç¨åæ¶', value: 'PROCESSINSTANCE_CANCELED' },\r\n        { text: 'æµç¨å¤æ´»', value: 'PROCESSINSTANCE_REACTIVATED' },\r\n        { text: 'æµç¨é©³å', value: 'PROCESSINSTANCE_ROLLBACK' },\r\n        { text: 'éæ°æäº¤', value: 'PROCESSINSTANCE_RESUBMIT' },\r\n        { text: 'ç¯èåçäººåæ´', value: 'ACTIVITY_AND_PARTICIPANT_UPDATED' },\r\n        { text: 'ç®¡çåç»æ­¢', value: 'PROCESSINSTANCE_ABORTED_BY_ADMIN' },\r\n        { text: 'æµç¨å¯å¨å', value: 'PROCESSINSTANCE_BEFORE_START' },\r\n        { text: 'ä»»å¡å®æå', value: 'WORKITEM_BEFORE_COMPLETE' },\r\n        { text: 'ä»»å¡å®æå', value: 'WORKITEM_AFTER_COMPLETE' },\r\n        { text: 'è·åæ°æ®', value: 'LOADDATA' }\r\n    ];\r\n    activityCollection = [\r\n        // { text: 'æ´»å¨åå»º', value: 'ACTIVITY_CREATED' },\r\n        { text: 'æ´»å¨å¯å¨', value: 'ACTIVITY_STARTED' },\r\n        // { text: 'æ´»å¨æèµ·', value: 'ACTIVITY_SUSPENDED' },\r\n        // { text: 'æ´»å¨æ¢å¤', value: 'ACTIVITY_RESUMED' },\r\n        { text: 'æ´»å¨å®æ', value: 'ACTIVITY_COMPLETED' },\r\n        { text: 'æ´»å¨ç»æ­¢', value: 'ACTIVITY_ABORTED' },\r\n        { text: 'å·¥ä½é¡¹åå»º', value: 'WORKITEM_CREATED' },\r\n        { text: 'å·¥ä½é¡¹å®æ', value: 'WORKITEM_COMPLETED' },\r\n        { text: 'å·¥ä½é¡¹æèµ·', value: 'WORKITEM_SUSPENDED' },\r\n        { text: 'å·¥ä½é¡¹æ¢å¤', value: 'WORKITEM_RESUMED' },\r\n        { text: 'å·¥ä½é¡¹ç»æ­¢', value: 'WORKITEM_ABORTED' },\r\n        { text: 'å·¥ä½é¡¹åå', value: 'WORKITEM_RETRIEVED' },\r\n        { text: 'å·¥ä½é¡¹é¢ç¨', value: 'WORKITEM_CLAIMED' },\r\n        { text: 'å·¥ä½é¡¹åé¢ç¨', value: 'WORKITEM_UNCLAIMED' },\r\n        { text: 'ä»»å¡åéå', value: 'ACTIVITY_ASSIGNMENT' }\r\n    ];\r\n}\r\n","import { ActualParameter } from './actual-parameter';\r\nimport { ProcessDeUtil } from '../process-de-util';\r\n\r\nexport class BizComponentEntity {\r\n    constructor(name?: string, metadataid?: string, method?: string) {\r\n        this.id = ProcessDeUtil.GenerateElementId();\r\n        this.name = name;\r\n        this.metadataId = metadataid;\r\n        this.methodCode = method;\r\n        this.isForCompensation = false;\r\n    }\r\n    id: string;\r\n    name: string;\r\n    flowFormKey?: string;\r\n    bizActivityId?: string;\r\n    componentLocation?: ComponentLocation;\r\n    executionTime: string;\r\n    metadataId: string;\r\n    methodCode: string;\r\n    methodName?: string;\r\n    actualParameters: Array<ActualParameter>;\r\n    owner: string;\r\n    ownerType: OwnerType;\r\n    isForCompensation?: boolean;\r\n    condition?: string;\r\n}\r\nexport enum ComponentLocation {\r\n    Process = 0,\r\n    Activity = 1\r\n}\r\nexport enum OwnerType {\r\n    Process = 'Process',\r\n    Activity = 'Activity',\r\n    Schema = 'Schema'\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { ActivityComponentUIState } from './activity-component.uistate';\r\nimport { HttpService } from '@ecp-caf/caf-common';\r\nimport { map } from 'rxjs/operators';\r\nimport { BizComponentEntity, ComponentLocation, OwnerType } from '../../domain/entities/biz-component.entity';\r\nimport { GspComponent } from '@gsp-cmp/common-component';\r\nimport { ActualParameter } from '../../domain/entities/actual-parameter';\r\nimport { Parameter } from '@ecp-caf/common-structure';\r\nimport { ProcessDesignerUIState } from '../../app/process-designer.uistate';\r\nimport { Subject } from 'rxjs';\r\nimport { ProcessDeUtil } from '../../domain/process-de-util';\r\n@Injectable()\r\n\r\nexport class ActivityComponentRepository {\r\n    private defaultProcessComponentIds = ['5863c8a8-e0a7-4137-a8b2-4c05e42b3b73', 'be781ba1-a88b-4bb8-9c88-2e2a27a9226e'];\r\n\r\n    subject: Subject<BizComponentEntity> = new Subject<BizComponentEntity>();\r\n    constructor(\r\n        private uistate: ActivityComponentUIState,\r\n        private util: ProcessDeUtil,\r\n        private http: HttpService,\r\n        private designerState: ProcessDesignerUIState\r\n    ) { }\r\n\r\n    loadComponents(flowFormId: string, bizActId: string) {\r\n        let url = this.util.getBizComponentsWebApi();\r\n        if (bizActId) {\r\n            url += `/query?param=` + encodeURIComponent(`{\"flowFormKey\":\"${flowFormId}\",\"owner\":\"${bizActId}\",\"ownerType\":\"Activity\"}`);\r\n        } else {\r\n            this.uistate.allComponents = [];\r\n            return;\r\n        }\r\n        this.http.get(url).subscribe((data: any) => {\r\n            this.uistate.allComponents = data.filter((c: BizComponentEntity) => c.ownerType === OwnerType.Activity);\r\n        });\r\n    }\r\n    removeComponent(id: string) {\r\n        if (id) {\r\n            const index = this.uistate.components.findIndex(c => c.id === id);\r\n            if (index > -1) {\r\n                this.uistate.components.splice(index, 1);\r\n\r\n                if (this.uistate.components.length > 0) {\r\n                    this.subject.next(this.uistate.components[0]);\r\n                } else {\r\n                    this.uistate.curComponent = null;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    addComponent(cpt: GspComponent) {\r\n        if (cpt) {\r\n            const component = new BizComponentEntity(cpt.name, cpt.id, cpt.operations[0].code);\r\n            component.id = ProcessDeUtil.GenerateElementId();\r\n            component.actualParameters = this.bindParas(cpt);\r\n\r\n            this.uistate.components.push(component);\r\n\r\n            this.subject.next(component);\r\n        }\r\n    }\r\n    private bindParas(component: GspComponent): ActualParameter[] {\r\n        let parameters = [];\r\n\r\n        if (component.operations[0].parameters && component.operations[0].parameters.length > 0) {\r\n            if (this.defaultProcessComponentIds.indexOf(component.id) > -1) {\r\n                parameters = this.assignParameterValue(component.operations[0].parameters);\r\n            } else {\r\n                parameters = component.operations[0].parameters.map(p => ({ code: p.code, name: p.name, value: '' }));\r\n            }\r\n        }\r\n        return parameters;\r\n    }\r\n    private assignParameterValue(params: Parameter[]): ActualParameter[] {\r\n        return params.map(p => {\r\n            if (p.code.indexOf('beId') > -1) {\r\n                const v = this.designerState.formalParameterContext.filter(c => c.key.indexOf('metadataId') > -1)[0].key;\r\n                return { code: p.code, name: p.name, value: `{\"expr\":\"DefaultFunction.GetContextParameter(\\\\\"${v}\\\\\")\"}` };\r\n            } else if (p.code.indexOf('nodeId') > -1) {\r\n                const v = this.designerState.formalParameterContext.filter(c => c.key.indexOf('schemaId') > -1)[0].key;\r\n                return { code: p.code, name: p.name, value: `{\"expr\":\"DefaultFunction.GetContextParameter(\\\\\"${v}\\\\\")\"}` };\r\n            } else if (p.code.indexOf('dataId') > -1) {\r\n                return { code: p.code, name: p.name, value: `{\"expr\":\"DefaultFunction.GetContextParameter(\\\\\"dataId\\\\\")\"}` };\r\n            } else if (p.code.indexOf('procInstId') > -1) {\r\n                return { code: p.code, name: p.name, value: `{\"expr\":\"DefaultFunction.GetContextParameter(\\\\\"procInstId\\\\\")\"}` };\r\n            } else {\r\n                return { code: p.code, name: p.name, value: '' };\r\n            }\r\n        });\r\n    }\r\n\r\n    swapArray(arr: Array<any>, i1: number, i2: number): Array<any> {\r\n        arr[i1] = arr.splice(i2, 1, arr[i1])[0];\r\n        return arr;\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { ActivityComponentUIState } from './activity-component.uistate';\r\nimport { ActivityComponentRepository } from './activity-component.repository';\r\nimport { BizComponentEntity } from '../../domain/entities/biz-component.entity';\r\nimport { GspComponent } from '@gsp-cmp/common-component';\r\nimport { MessagerService } from '@farris/ui-messager';\r\n\r\n@Injectable()\r\n\r\nexport class ActivityComponentViewModel {\r\n    constructor(\r\n        private uistate: ActivityComponentUIState,\r\n        private repository: ActivityComponentRepository,\r\n        private messager: MessagerService\r\n    ) { }\r\n\r\n    deleteRow() {\r\n        if (this.uistate.curComponent) {\r\n            if (this.uistate.curComponent.executionTime === 'LOADDATA') {\r\n                this.messager.info('åæ°æä»¶ä¸åè®¸å é¤ï¼è¯·äºè§£ï¼');\r\n            } else {\r\n                this.repository.removeComponent(this.uistate.curComponent.id);\r\n            }\r\n        } else {\r\n            return;\r\n        }\r\n    }\r\n    componentSelect(cpt: GspComponent) {\r\n        if (cpt) {\r\n            this.repository.addComponent(cpt);\r\n        }\r\n    }\r\n\r\n    loadComponents(flowFormId: string, bizActId: string) {\r\n        this.repository.loadComponents(flowFormId, bizActId);\r\n    }\r\n}\r\n","export class ActualParameter {\r\n    constructor(code?: string, name?: string, value?: string) {\r\n        this.code = code;\r\n        this.name = name;\r\n        this.value = value;\r\n    }\r\n    code: string;\r\n    name: string;\r\n    value: string;\r\n    // IsVisible: boolean;\r\n}\r\n","import { Component, OnInit, HostBinding, Output, EventEmitter, TemplateRef, Input, ViewChild, ComponentFactoryResolver, Injector, AfterViewInit } from '@angular/core';\r\nimport { TypeConverter } from '@farris/ui-property-panel';\r\nimport { ActivityComponentRepository } from './activity-component.repository';\r\nimport { ActivityComponentUIState } from './activity-component.uistate';\r\nimport { ActivityComponentViewModel } from './activity-component.viewmodel';\r\nimport { FormBuilder } from '@angular/forms';\r\nimport { BizComponentEntity } from '../../domain/entities/biz-component.entity';\r\nimport { ActualParameter } from '../../domain/entities/actual-parameter';\r\nimport { ProcessDesignerUIState } from '../../app/process-designer.uistate';\r\n\r\nimport { ExprEditMode, ExpressionService, InjectedType, VarEntity } from '@gsp-svc/expression';\r\nimport { SelectMetadataRTComponent, Metadata4RefDto, MetadataDto } from '@gsp-lcm/metadatart-selector';\r\nimport { SessionService } from '@ecp-caf/caf-common';\r\nimport { BsModalService } from '@farris/ui-modal';\r\nimport { SelectorResult, CommonComponentUiRTService } from '@gsp-cmp/ccmp-ui';\r\nimport { GspComponent } from '@gsp-cmp/common-component';\r\nimport { DataColumn, DatagridComponent } from '@farris/ui-datagrid';\r\nimport { of } from 'rxjs';\r\nimport { EditorTypes } from '@farris/ui-datagrid-editors';\r\nimport { MessagerService } from '@farris/ui-messager';\r\n\r\n@Component({\r\n  selector: 'app-activity-component',\r\n  templateUrl: './activity-component.component.html',\r\n  styleUrls: ['./activity-component.component.scss'],\r\n  providers: [ActivityComponentRepository, ActivityComponentUIState, ActivityComponentViewModel]\r\n})\r\nexport class ActivityComponentComponent implements OnInit, AfterViewInit {\r\n  @HostBinding('class')\r\n  cls = 'farris-main-area flex-column';\r\n  @Output() closeModal = new EventEmitter<any>();\r\n  @Output() submitModal = new EventEmitter<any>();\r\n\r\n  @Input() editorParams: any = {};\r\n  @ViewChild('iconSelectFooter') modalFooter: TemplateRef<any>;\r\n  modalConfig = {\r\n    title: 'æä»¶',\r\n    width: 1000,\r\n    height: 530,\r\n    showButtons: true\r\n  };\r\n  @Input()\r\n  set value(cpts: any[]) {\r\n    if (cpts && cpts.length > 0) {\r\n      for (const cpt of cpts) {\r\n        const bizComponent = new BizComponentEntity(cpt.Name || cpt.name, cpt.MetadataId || cpt.metadataId, cpt.MethodCode || cpt.methodCode);\r\n        bizComponent.executionTime = cpt.Time || cpt.executionTime,\r\n        bizComponent.id = cpt.Id || cpt.id;\r\n        bizComponent.isForCompensation = cpt.isForCompensation;\r\n        bizComponent.actualParameters = [];\r\n        if ((cpt.ActualParameters && cpt.ActualParameters.length > 0) || (cpt.actualParameters && cpt.actualParameters.length > 0)) {\r\n          const actualParameters = cpt.ActualParameters || cpt.actualParameters;\r\n          for (const para of actualParameters) {\r\n            const actualParameter = new ActualParameter(para.Name || para.code, para.Name || para.name, para.Value || para.value );\r\n\r\n            bizComponent.actualParameters.push(actualParameter);\r\n          }\r\n        }\r\n        this.uistate.components.push(bizComponent);\r\n      }\r\n    }\r\n  }\r\n\r\n  @ViewChild('cmplist') cmplist: DatagridComponent;\r\n  @ViewChild('paramlist') paramlist: DatagridComponent;\r\n\r\n\r\n  location: 'activity' | 'process' | 'autoActivity';\r\n  columns = [];\r\n  paramColumns = [];\r\n  constructor(\r\n    public uistate: ActivityComponentUIState,\r\n    public viewModel: ActivityComponentViewModel,\r\n    private formBuilder: FormBuilder,\r\n    private designerState: ProcessDesignerUIState,\r\n    private expr: ExpressionService,\r\n    private resolver: ComponentFactoryResolver,\r\n    private injector: Injector,\r\n    private sessionSrc: SessionService,\r\n    private modalService: BsModalService,\r\n    private componentService: CommonComponentUiRTService,\r\n    private repository: ActivityComponentRepository,\r\n    private message: MessagerService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.location = this.editorParams.location;\r\n    if (this.location === 'activity') {\r\n      this.uistate.executionCollection = this.uistate.activityCollection;\r\n      this.columns = [\r\n        {\r\n          field: 'name', width: 100, title: 'æä»¶åç§°'\r\n        },\r\n        { field: 'metadataId', width: 100, title: 'æä»¶ID' },\r\n        { field: 'methodCode', width: 100, title: 'æä»¶æ¹æ³' },\r\n        {\r\n          field: 'executionTime', width: 100, title: 'æ§è¡æ¶æº',\r\n          editor: {\r\n            type: EditorTypes.COMBOLIST,\r\n            options: { data: this.uistate.executionCollection, valueField: 'value', textField: 'text', idField: 'value', panelHeight: 'auto' }\r\n          },\r\n          formatter: (v, d, i) => {\r\n            if (v) {\r\n              return this.uistate.executionCollection.find(item => item.value === v).text;\r\n            } else {\r\n              return '';\r\n            }\r\n          },\r\n          validators: [\r\n            { type: 'required', messager: 'å¿å¡«' }\r\n          ]\r\n        },\r\n        {\r\n          field: 'isForCompensation', width: 50, title: 'è¡¥å¿æä½',\r\n          editor: { type: EditorTypes.SWITCH, options: {} },\r\n          formatter: { type: 'boolean', options: { trueText: 'æ¯', falseText: 'å¦' } }\r\n        }\r\n      ];\r\n    } else if (this.location === 'autoActivity') {\r\n      this.columns = [\r\n        {\r\n          field: 'name', width: 100, title: 'æä»¶åç§°'\r\n        },\r\n        { field: 'metadataId', width: 100, title: 'æä»¶ID' },\r\n        { field: 'methodCode', width: 100, title: 'æä»¶æ¹æ³' },\r\n        {\r\n          field: 'isForCompensation', width: 50, title: 'è¡¥å¿æä½',\r\n          editor: { type: EditorTypes.SWITCH, options: {} },\r\n          formatter: { type: 'boolean', options: { trueText: 'æ¯', falseText: 'å¦' } }\r\n        }\r\n      ];\r\n    } else {\r\n      this.columns = [\r\n        {\r\n          field: 'name', width: 100, title: 'æä»¶åç§°'\r\n        },\r\n        { field: 'metadataId', width: 100, title: 'æä»¶ID' },\r\n        { field: 'methodCode', width: 100, title: 'æä»¶æ¹æ³' },\r\n        {\r\n          field: 'executionTime', width: 100, title: 'æ§è¡æ¶æº',\r\n          editor: {\r\n            type: EditorTypes.COMBOLIST,\r\n            options: { data: this.uistate.executionCollection, valueField: 'value', textField: 'text', idField: 'value', panelHeight: 'auto' }\r\n          },\r\n          formatter: (v, d, i) => {\r\n            if (v) {\r\n              return this.uistate.executionCollection.find(item => item.value === v).text;\r\n            } else {\r\n              return '';\r\n            }\r\n          },\r\n          validators: [\r\n            { type: 'required', messager: 'å¿å¡«' }\r\n          ]\r\n        }\r\n      ];\r\n    }\r\n    if (this.uistate.components && this.uistate.components.length > 0) {\r\n      this.cmplist.selectRow(this.uistate.components[0].id, true);\r\n    }\r\n\r\n    this.paramColumns = [\r\n      { field: 'code', width: 50, title: 'ç¼å·' },\r\n      { field: 'name', width: 50, title: 'åç§°' },\r\n      {\r\n        field: 'value', width: 100, title: 'åæ°å¼',\r\n        editor: {\r\n          type: 'input-group',\r\n          options: {\r\n            groupText: '<i class=\"f-icon f-icon-lookup\"></i>',\r\n            editable: false,\r\n            clickHandle: (e) => {\r\n              e.formControl.setValue(e.instance.value ? e.instance.value : '');\r\n              this.showExprHelp(e);\r\n            },\r\n            clear: (e) => {\r\n              console.log('clear', e);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    ];\r\n    // éä¸­å½åè¡\r\n    this.repository.subject.subscribe(cmp => {\r\n      this.cmplist.loadData(this.uistate.components);\r\n      if (cmp) {\r\n        this.cmplist.selectRow(cmp.id, true);\r\n      } else {\r\n        this.uistate.curComponent = null;\r\n      }\r\n    });\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    if (this.uistate.components && this.uistate.components.length > 0) {\r\n      this.cmplist.selectRow(this.uistate.components[0].id, true);\r\n    }\r\n  }\r\n\r\n  deleteRow() {\r\n    this.closeCellEdit();\r\n\r\n    this.viewModel.deleteRow();\r\n  }\r\n\r\n  moveUp() {\r\n    if (!this.uistate.curComponent) {\r\n      this.message.info('å°æªéä¸­æä»¶ï¼');\r\n      return;\r\n    }\r\n    const curCmpId: string = this.uistate.curComponent.id;\r\n    const i = this.uistate.components.findIndex(c => c.id === curCmpId);\r\n    if (i === 0) {\r\n      return;\r\n    }\r\n    this.repository.swapArray(this.uistate.components, i, i - 1);\r\n\r\n    this.cmplist.loadData(this.uistate.components);\r\n    this.cmplist.selectRow(curCmpId, true);\r\n  }\r\n\r\n  moveDown() {\r\n    if (!this.uistate.curComponent) {\r\n      this.message.info('å°æªéä¸­æä»¶ï¼');\r\n      return;\r\n    }\r\n    const curCmpId: string = this.uistate.curComponent.id;\r\n    const i = this.uistate.components.findIndex(c => c.id === curCmpId);\r\n    if (i === this.uistate.components.length - 1) {\r\n      return;\r\n    }\r\n    this.repository.swapArray(this.uistate.components, i, i + 1);\r\n\r\n    this.cmplist.loadData(this.uistate.components);\r\n    this.cmplist.selectRow(curCmpId, true);\r\n  }\r\n\r\n  clickOK() {\r\n    this.closeCellEdit();\r\n\r\n    if (this.validator()) {\r\n      const object = { value: this.uistate.components, parameters: null };\r\n      this.submitModal.emit(object);\r\n    }\r\n  }\r\n\r\n  clickCancel() {\r\n    this.closeModal.emit();\r\n  }\r\n  componentSelect() {\r\n    const compFactory = this.resolver.resolveComponentFactory(SelectMetadataRTComponent);\r\n    const compRef = compFactory.create(this.injector);\r\n    compRef.instance.typeList = 'WebServiceComponent'; // ç®ååªè½æ ¹æ®åæ°æ®ç±»åè¿æ»¤ï¼åç»­æ·»å æ ç­¾è¿æ»¤\r\n    compRef.instance.selectedMetadata.subscribe(($event: Metadata4RefDto) => {\r\n      try {\r\n        const meta: MetadataDto = $event.metadata;\r\n        this.openComponentSelectorNew(meta.id, this.sessionSrc.getUserSessionId());\r\n      } catch {\r\n        console.log('$event', $event);\r\n        throw new Error('è·åè§£ææä»¶åºé' + $event);\r\n      }\r\n    });\r\n\r\n    const modalConfig = {\r\n      title: 'æä»¶éæ©',\r\n      width: 980,\r\n      height: 548,\r\n      showButtons: false\r\n    };\r\n    const dialog = this.modalService.show(compRef, modalConfig);\r\n    compRef.instance.closeModalEmitter.subscribe($event => dialog.close());\r\n  }\r\n  /**\r\n   * åæ°æä»¶å¸®å©new\r\n   */\r\n  openComponentSelectorNew(metadataId: string, sessionId: string) {\r\n    this.componentService.openSelector(metadataId, sessionId).subscribe(\r\n      (selectorResult: SelectorResult) => {\r\n        selectorResult.confirmEvent.subscribe(\r\n          (result: GspComponent) => {\r\n            this.viewModel.componentSelect(result);\r\n          });\r\n      });\r\n  }\r\n  showExprHelp(e: any) {\r\n    if (this.designerState.schemas.length > 0) {\r\n      for (const schema of this.designerState.schemas) {\r\n        this.expr.addSchema('Schema', schema);\r\n      }\r\n      if (this.designerState.schemas[0].entityTypes && this.designerState.schemas[0].entityTypes.length > 0) {\r\n        const entityType = this.designerState.schemas[0].entityTypes[0];\r\n        this.expr.addInjectedEntity(entityType.name, 'Schema',\r\n          entityType.name, InjectedType.EntityType);\r\n      }\r\n    }\r\n    const context = new Array<VarEntity>();\r\n    if (this.designerState.procInstContext.length > 0) {\r\n      for (const variable of this.designerState.procInstContext) {\r\n        context.push(variable);\r\n      }\r\n    }\r\n    if (this.designerState.formalParameterContext.length > 0) {\r\n      for (const variable of this.designerState.formalParameterContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (this.designerState.participantContext.length > 0) {\r\n      for (const variable of this.designerState.participantContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (this.location === 'activity') {\r\n      for (const variable of this.designerState.activityComponentContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (this.designerState.processVariableContext.length > 0) {\r\n      for (const variable of this.designerState.processVariableContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (context.length > 0) {\r\n      for (const v of context) {\r\n        this.expr.addContext(v);\r\n      }\r\n    }\r\n    this.expr.setEditPattern(ExprEditMode.Advanced); // é»è®¤æå¼é«çº§è¡¨è¾¾å¼ç¼è¾å¨\r\n    this.expr.addExpressionText(e.instance.value);\r\n    this.expr.buildExpression().then((expressioninfo: string) => {\r\n      e.formControl.setValue(expressioninfo);\r\n      e.instance.cd.detectChanges();\r\n    });\r\n  }\r\n  selectionChange(data: any) {\r\n    this.uistate.curComponent = data.data;\r\n  }\r\n  paramAfterEdit = (rowIndex: number, rowData: any, column?: DataColumn) => {\r\n    return of(true);\r\n  }\r\n\r\n  private closeCellEdit() {\r\n    this.cmplist.endCellEdit();\r\n    if (this.paramlist) {\r\n      this.paramlist.endCellEdit();\r\n    }\r\n  }\r\n\r\n  private validator(): boolean {\r\n    for (const c of this.uistate.components) {\r\n      if (!c.executionTime && this.location !== 'autoActivity') {\r\n        this.message.warning('æä»¶æ§è¡æ¶æºä¸åè®¸ä¸ºç©ºï¼');\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n}\r\n\r\nexport class ActivityComponentConverter implements TypeConverter {\r\n  constructor() { }\r\n\r\n  convertTo(data: any[]): string {\r\n    if (data && data.length > 0) {\r\n      return 'ï¼å·²è®¾ç½®ï¼';\r\n    } else {\r\n      return 'ï¼æªè®¾ç½®ï¼';\r\n    }\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\n@Injectable()\r\n\r\nexport class ExecuteFormsUIState {\r\n    public formTypeCollection = [\r\n        { text: 'æµç¨åµè¡¨å', value: '0' },\r\n        { text: 'è¡¨ååµæµç¨', value: '1' },\r\n    ];\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\n@Injectable()\r\n\r\nexport class ExecuteFormsViewModel {\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\n@Injectable()\r\n\r\nexport class ExecuteFormsRepository {\r\n\r\n}\r\n","\r\nexport class ExecuteFormModel {\r\n    Id: string;\r\n    Name: string;\r\n    ComponentId: string;\r\n    FormType: string;\r\n    TerminalType: TerminalType;\r\n    ActualParameters: ActualParameter[];\r\n    formFormatId: string;\r\n    formatConfigId: string;\r\n}\r\nexport class ActualParameter {\r\n    Name: string;\r\n    Value: string;\r\n    ValueText?: string;\r\n    Tag?: string;\r\n}\r\nexport enum TerminalType {\r\n    PC = 'PC',\r\n    MOBILE = 'MOBILE',\r\n    ALL = 'ALL'\r\n}\r\n","import { ILookupHttpService, RemoteParams, LookupGridResult } from '@farris/ui-lookup';\r\nimport { Injectable } from '@angular/core';\r\nimport { HttpService } from '@ecp-caf/caf-common';\r\nimport { Observable, of } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\n\r\n@Injectable()\r\nexport class FormFormatService implements ILookupHttpService {\r\n    constructor(\r\n        private http: HttpService,\r\n    ) {\r\n    }\r\n    getData(url: string, params?: RemoteParams): Observable<LookupGridResult> {\r\n        const customData = params.customData;\r\n        const index = params.pageIndex || 1;\r\n        const size = params.pageSize || 20;\r\n        const searchValue = JSON.parse(params.searchValue);\r\n        const terminal = customData.tab === 'web' ? 'PC' : 'Mobile';\r\n        let query = '?param=';\r\n        let filter = `{\"terminal\":\"${terminal}\"`;\r\n        if (searchValue.searchValue) {\r\n            if (searchValue.searchField === '*') {\r\n                filter += `,\"allColumns\":\"${searchValue.searchValue}\"`;\r\n            } else {\r\n                filter += `,\"${searchValue.searchField}\":\"${searchValue.searchValue}\"`;\r\n            }\r\n        }\r\n        filter += '}';\r\n        filter = encodeURIComponent(filter);\r\n        query += (filter + `&pageNum=${index}&pageSize=${size}`);\r\n        url += query;\r\n        return this.http.get(url).pipe(\r\n            map((re: any) => ({\r\n                items: re.content,\r\n                total: re.totalElements,\r\n                pageInfo: {\r\n                    pageIndex: re.pageable.pageNumber + 1,\r\n                    pageSize: re.pageable.pageSize,\r\n                    pageList: [20, 40, 60, 80, 100],\r\n                    enablePager: true\r\n                }\r\n            }))\r\n        );\r\n    }\r\n}\r\n\r\n","export class ExecuteForm { \r\n    id: string;\r\n    code: string;\r\n    name: string;\r\n    appId: string;\r\n    flowFormKey: string;\r\n    formFormatId: string;\r\n    formType: string;\r\n    isDefault: boolean;\r\n    terminal: string;\r\n    actualParameters: Array<FormalParameter>;\r\n    sysInit: number;\r\n    remarks: string;\r\n}\r\n\r\nexport class FormalParameter {\r\n    code: string;\r\n    name: string;\r\n    value: string;\r\n}\r\n","import { Component, OnInit, Injector, ComponentFactoryResolver, ViewChild, TemplateRef } from '@angular/core';\r\nimport { BsModalService } from '@farris/ui-modal';\r\nimport { ProcessDesignerUIState } from '../../../app/process-designer.uistate';\r\nimport { HttpService, SessionService } from '@ecp-caf/caf-common';\r\nimport { RtfAppHelpComponent } from '@gsp-sys/rtf-ui';\r\nimport { RtfApp } from '@gsp-sys/rtf-ui/lib/rtf-app-help/entities/rtf-app';\r\nimport { of, Observable, Subject, from, forkJoin } from 'rxjs';\r\nimport { PickedResult, ServerSideToken, LookupGridComponent } from '@farris/ui-lookup';\r\nimport { FormFormatService } from './form-format.service';\r\nimport { ExecuteFormModel, TerminalType, ActualParameter } from '../entities/execute-form.entity';\r\nimport { DatagridComponent } from '@farris/ui-datagrid';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { ExecuteForm } from '../entities/execute-form';\r\nimport { ProcessDeUtil } from '../../../domain/process-de-util';\r\nimport { map } from 'rxjs/operators';\r\n\r\n@Component({\r\n  selector: 'lib-add-execute-form',\r\n  templateUrl: './add-execute-form.component.html',\r\n  styleUrls: ['./add-execute-form.component.scss'],\r\n  providers: [{ provide: ServerSideToken, useClass: FormFormatService }]\r\n})\r\nexport class AddExecuteFormComponent implements OnInit {\r\n\r\n  @ViewChild('iconSelectFooter') modalFooter: TemplateRef<any>;\r\n  @ViewChild(RtfAppHelpComponent) public appHelper: RtfAppHelpComponent;\r\n  @ViewChild('lookup') public lookUp: LookupGridComponent;\r\n  @ViewChild('grid') private grid: DatagridComponent;\r\n\r\n  submit = new Subject<ExecuteFormModel>();\r\n  cancel = new Subject();\r\n\r\n  tab: 'web' | 'mobile';\r\n\r\n  forms = new Array<ExecuteForm>();\r\n\r\n  // private formTypeCollection = [\r\n  //   { text: 'æµç¨åµè¡¨å', value: '0' },\r\n  //   { text: 'è¡¨ååµæµç¨', value: '1' },\r\n  // ];\r\n\r\n  columns = [\r\n    { field: 'code', width: 100, title: 'ç¼å·' },\r\n    {\r\n      field: 'name', width: 100, title: 'åç§°',\r\n    },\r\n    {\r\n      field: 'tag', width: 80, title: 'åæ®ç±»å',\r\n      formatter: (v, d, i) => {\r\n        if (d.appId) {\r\n          return 'åè½èå';\r\n        } else if (d.formFormatId) {\r\n          return 'è¡¨åæ ¼å¼';\r\n        }\r\n      }\r\n    }\r\n    // {\r\n    //   field: 'formType', width: 80, title: 'èæ¥ç±»å',\r\n    //   formatter: {\r\n    //     type: 'enum',\r\n    //     options: { valueField: 'value', textField: 'text', data: this.formTypeCollection }\r\n    //   },\r\n    // },\r\n  ];\r\n\r\n  // è¡¨åæ ¼å¼æ¾ç¤ºå\r\n  cols = [\r\n    {\r\n      field: 'code', width: 100, title: 'åæ®æ ¼å¼ç¼å·', searchField: 'code'\r\n    }, {\r\n      field: 'name', width: 100, title: 'åæ®æ ¼å¼åç§°', searchField: 'name'\r\n    }\r\n  ];\r\n\r\n  dataUri = '/api/runtime/wf/v1.0/formFormat/page';\r\n  constructor(\r\n    private state: ProcessDesignerUIState,\r\n    private http: HttpService,\r\n    private session: SessionService,\r\n    private message: MessagerService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.getAllExecuteForms();\r\n  }\r\n\r\n  clickOK() {\r\n    if (this.grid.selectedRow) {\r\n      const form: ExecuteForm = this.grid.selectedRow.data;\r\n      const model = new ExecuteFormModel();\r\n      model.Id = ProcessDeUtil.GenerateElementId();\r\n      model.Name = form.name;\r\n      model.ComponentId = form.appId;\r\n      model.FormType = form.formType;\r\n      model.formFormatId = form.formFormatId;\r\n      model.TerminalType = this.tab === 'web' ? TerminalType.PC : TerminalType.MOBILE;\r\n      model.ActualParameters = form.actualParameters.map(p => {\r\n        const a = new ActualParameter();\r\n        a.Name = p.code;\r\n        a.Value = p.value;\r\n        return a;\r\n      });\r\n      this.submit.next(model);\r\n    } else {\r\n      this.message.info('å°æªéæ©è¡¨åå®ä¹ï¼');\r\n    }\r\n  }\r\n\r\n  clickCancel() {\r\n    this.cancel.next();\r\n  }\r\n\r\n  selectOtherFormFormat() {\r\n    this.lookUp.showDialog();\r\n  }\r\n\r\n  dictPicking = (arg) => {\r\n    return of({\r\n      showDialog: true, data: {\r\n        tab: this.tab\r\n      }\r\n    });\r\n  }\r\n\r\n  dictPicked = (data: any): Observable<PickedResult> => {\r\n    const model = new ExecuteFormModel();\r\n    model.Id = ProcessDeUtil.GenerateElementId();\r\n    model.Name = data.name;\r\n    model.ComponentId = null;\r\n    model.FormType = '0';\r\n    model.formFormatId = data.id;\r\n    model.TerminalType = this.tab === 'web' ? TerminalType.PC : TerminalType.MOBILE;\r\n    model.ActualParameters = data.urlParameters.map(p => {\r\n      const a = new ActualParameter();\r\n      a.Name = p.code;\r\n      a.Value = p.value;\r\n      return a;\r\n    });\r\n    this.submit.next(model);\r\n    return of({ closeDialog: true });\r\n  }\r\n\r\n  selectOtherFunc() {\r\n    this.appHelper.showHelp(this.session.getUserSessionId());\r\n  }\r\n\r\n  funcSelected(apps: RtfApp[]) {\r\n    if (apps && apps.length > 0) {\r\n      const model = new ExecuteFormModel();\r\n      model.Id = ProcessDeUtil.GenerateElementId();\r\n      model.Name = apps[0].Name;\r\n      model.ComponentId = apps[0].Id;\r\n      model.FormType = '0';\r\n      model.formFormatId = null;\r\n      model.TerminalType = this.tab === 'web' ? TerminalType.PC : TerminalType.MOBILE;\r\n      model.ActualParameters = [];\r\n      if (apps[0].InvokingConfig['entityParams']) {\r\n        const paras = JSON.parse(apps[0].InvokingConfig['entityParams']);\r\n        model.ActualParameters = paras.map(p => ({\r\n          Name: p.name,\r\n          Value: ''\r\n        }));\r\n      }\r\n      setTimeout(() => {\r\n        this.submit.next(model);\r\n      }, 0);\r\n    }\r\n  }\r\n\r\n  private getAllExecuteForms() {\r\n    forkJoin(this.getExecuteForms(), this.getFormFormats()).subscribe(re => {\r\n      if (re[0]) {\r\n        this.forms = re[0];\r\n      }\r\n      if (re[1] && re[1].length > 0) {\r\n        const formFormats = re[1];\r\n        for (const format of formFormats) {\r\n          if (this.forms.findIndex(f => f.formFormatId && f.formFormatId === format.id) === -1) {\r\n            const executeForm = new ExecuteForm();\r\n            executeForm.id = ProcessDeUtil.createNM();\r\n            executeForm.flowFormKey = this.state.flowFormInfo.flowForm.id;\r\n            executeForm.appId = null;\r\n            executeForm.code = format.code;\r\n            executeForm.name = format.name;\r\n            executeForm.actualParameters = [];\r\n            executeForm.isDefault = false;\r\n            executeForm.formType = '0';\r\n            executeForm.terminal = 'web';\r\n            executeForm.formFormatId = format.id;\r\n            executeForm.sysInit = 0;\r\n            executeForm.remarks = '';\r\n            if (format.urlParameters && format.urlParameters.length > 0) {\r\n              const actPList = format.urlParameters.map(p => ({\r\n                code: p.code,\r\n                name: p.name,\r\n                value: p.value\r\n              }));\r\n              executeForm.actualParameters = actPList;\r\n            }\r\n            this.forms.push(executeForm);\r\n          }\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  private getExecuteForms(): Observable<any> {\r\n    if (this.state.flowFormInfo.flowForm.id && this.tab) {\r\n      const url = `/api/runtime/wf/v1.0/excuteForm?flowFormKey=${this.state.flowFormInfo.flowForm.id}`;\r\n      return this.http.get(url).pipe(\r\n        map((re: any) => {\r\n          if (this.tab === 'web') {\r\n            return re.filter(f => f.terminal.indexOf('web') > -1);\r\n          } else if (this.tab === 'mobile') {\r\n            return re.filter(f => f.terminal.indexOf('app') > -1);\r\n          }\r\n        })\r\n      );\r\n    } else {\r\n      return from(new Array());\r\n    }\r\n  }\r\n\r\n  private getFormFormats(): Observable<any>  {\r\n    if (this.state.flowFormInfo.flowForm.businessObjectId && this.tab) {\r\n      const terminal = this.tab === 'web' ? 'PC' : 'Mobile';\r\n      let url = `/api/runtime/wf/v1.0/formFormat/query?param=`;\r\n      let param = `{\"bizCategory\":\"${this.state.flowFormInfo.flowForm.businessObjectId}\",\"terminal\":\"${terminal}\"}`;\r\n      param = encodeURIComponent(param);\r\n      url += param;\r\n      return this.http.get(url);\r\n    } else {\r\n      return from(new Array());\r\n    }\r\n  }\r\n\r\n}\r\n","export class FormFormat {\r\n    id: string;\r\n    code: string;\r\n    name: string;\r\n    bizCategory: string;\r\n    formUrl: string;\r\n    urlType: string;\r\n    formatType: string;\r\n    status: number;\r\n    urlParameters: Array<FormatParameter>;\r\n    formButtons: Array<FormButton>;\r\n    formFields: Array<FormFieldData>;\r\n}\r\n\r\nexport class FormFieldData {\r\n    data: FormField;\r\n    expanded: boolean;\r\n    leaf: boolean;\r\n    children: Array<FormFieldData>;\r\n}\r\n\r\nexport class FormatParameter {\r\n    code: string;\r\n    name: string;\r\n    value: string;\r\n}\r\n\r\nexport class FormButton {\r\n    id: string;\r\n    buttonId: string;\r\n    buttonName: string;\r\n    buttonState: string;\r\n    description: string;\r\n    sortOrder: number;\r\n    formFormatId: string;\r\n}\r\n\r\nexport class FormField {\r\n    id: string;\r\n    fieldId: string;\r\n    fieldName: string;\r\n    fieldState: string;\r\n    description: string;\r\n    sortOrder: number;\r\n    formFormatId: string;\r\n}\r\n","import { ProcessDeUtil } from '../../../domain/process-de-util';\r\nimport { FormMethodConfig } from './form-method-config';\r\n\r\nexport class FormFormatConfig {\r\n    constructor() {\r\n        this.id = ProcessDeUtil.createNM();\r\n        this.formMethodConfigs = new Array();\r\n    }\r\n    id: string;\r\n    code: string;\r\n    name: string;\r\n    formFormatId: string;\r\n    description: string;\r\n    formButtonConfigs: Array<FormButtonConfig>;\r\n    formFieldConfigs: Array<FormFieldConfig>;\r\n    formMethodConfigs: Array<FormMethodConfig>;\r\n}\r\n\r\nexport class FormButtonConfig {\r\n    buttonId: string;\r\n    buttonState: string;\r\n}\r\n\r\nexport class FormFieldConfig {\r\n    fieldId: string;\r\n    fieldState: string;\r\n}\r\n","import { ProcessDeUtil } from '../../../domain/process-de-util';\r\n\r\nexport const workFlowActions: any[] = [\r\n    { text: 'æ­£å', value: 'Forward' },\r\n    { text: 'åå', value: 'Backward' },\r\n    { text: 'ç»æ­¢', value: 'Abort' }\r\n];\r\nexport const executionTime = [\r\n    { text: 'æµè½¬å', value: 'Pre' },\r\n    { text: 'æµè½¬å', value: 'Post' }\r\n];\r\n\r\nexport class FormMethodConfig {\r\n    constructor() {\r\n        this.id = ProcessDeUtil.createNM();\r\n        this.workFlowAction = workFlowActions[0].value;\r\n        this.executionTime = executionTime[0].value;\r\n        this.sortOrder = 1;\r\n    }\r\n    id: string;\r\n    formFormatConfigId: string;\r\n    workFlowAction: string;\r\n    method: string;\r\n    executionTime: string;\r\n    sortOrder: number;\r\n    methodParameters: Array<any>;\r\n}\r\n\r\n\r\n","import { Component, OnInit, ViewChild, TemplateRef } from '@angular/core';\r\nimport { ExpressionService, InjectedType } from '@gsp-svc/expression';\r\nimport { ProcessDesignerUIState } from '../../../app/process-designer.uistate';\r\nimport { Subject } from 'rxjs';\r\nimport { DatagridComponent } from '@farris/ui-datagrid';\r\n\r\n@Component({\r\n  selector: 'lib-parameter-setting',\r\n  templateUrl: './parameter-setting.component.html',\r\n  styleUrls: ['./parameter-setting.component.scss']\r\n})\r\nexport class ParameterSettingComponent implements OnInit {\r\n\r\n  @ViewChild('iconSelectFooter') modalFooter: TemplateRef<any>;\r\n  @ViewChild('grid') grid: DatagridComponent;\r\n\r\n  idField: 'Name' | 'code' = 'Name';\r\n\r\n  private _mode: 'bpmn' | 'usual' = 'bpmn';\r\n  set mode(m: 'bpmn' | 'usual') {\r\n    this._mode = m;\r\n    if (m === 'bpmn') {\r\n      this.idField = 'Name';\r\n      this.cols = [\r\n        { field: 'Name', width: 50, title: 'ç¼å·' },\r\n        {\r\n          field: 'Value', width: 100, title: 'åæ°å¼',\r\n          editor: {\r\n            type: 'input-group',\r\n            options: {\r\n              groupText: '<i class=\"f-icon f-icon-lookup\"></i>',\r\n              editable: false,\r\n              clickHandle: (e) => {\r\n                e.formControl.setValue(e.instance.value ? e.instance.value : '');\r\n                this.showExprHelp(e);\r\n              },\r\n              clear: (e) => {\r\n                console.log('clear', e);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      ];\r\n    } else {\r\n      this.idField = 'code';\r\n      this.cols = [\r\n        { field: 'code', width: 50, title: 'ç¼å·' },\r\n        { field: 'name', width: 50, title: 'åç§°' },\r\n        {\r\n          field: 'value', width: 100, title: 'åæ°å¼',\r\n          editor: {\r\n            type: 'input-group',\r\n            options: {\r\n              groupText: '<i class=\"f-icon f-icon-lookup\"></i>',\r\n              editable: false,\r\n              clickHandle: (e) => {\r\n                e.formControl.setValue(e.instance.value ? e.instance.value : '');\r\n                this.showExprHelp(e);\r\n              },\r\n              clear: (e) => {\r\n                console.log('clear', e);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      ];\r\n    }\r\n  }\r\n\r\n  get mode() {\r\n    return this._mode;\r\n  }\r\n  submit = new Subject<any>();\r\n  cancel = new Subject();\r\n  formTypeCollection = [\r\n    { text: 'æµç¨åµè¡¨å', value: '0' },\r\n    { text: 'è¡¨ååµæµç¨', value: '1' },\r\n  ];\r\n\r\n  cols = new Array();\r\n\r\n  parameters = new Array();\r\n\r\n  formType = this.formTypeCollection[0].value;\r\n\r\n  showFormType = false;\r\n\r\n  constructor(\r\n    private expr: ExpressionService,\r\n    private designerState: ProcessDesignerUIState) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  showExprHelp(e: any) {\r\n    if (this.designerState.schemas.length > 0) {\r\n      for (const schema of this.designerState.schemas) {\r\n        this.expr.addSchema('Schema', schema);\r\n      }\r\n      if (this.designerState.schemas[0].entityTypes && this.designerState.schemas[0].entityTypes.length > 0) {\r\n        const entityType = this.designerState.schemas[0].entityTypes[0];\r\n        this.expr.addInjectedEntity(entityType.name, 'Schema',\r\n          entityType.name, InjectedType.EntityType);\r\n      }\r\n    }\r\n    const context = new Array();\r\n    if (this.designerState.procInstContext.length > 0) {\r\n      for (const variable of this.designerState.procInstContext) {\r\n        context.push(variable);\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (this.designerState.formalParameterContext.length > 0) {\r\n      for (const variable of this.designerState.formalParameterContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (this.designerState.participantContext.length > 0) {\r\n      for (const variable of this.designerState.participantContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (this.designerState.processVariableContext.length > 0) {\r\n      for (const variable of this.designerState.processVariableContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (context.length > 0) {\r\n      for (const v of context) {\r\n        this.expr.addContext(v);\r\n      }\r\n    }\r\n\r\n    this.expr.addExpressionText(e.instance.value);\r\n\r\n    this.expr.buildExpression().then((d: string) => { // ç¼è¾å¨è¿åå¼\r\n      if (d) {\r\n        e.formControl.setValue(d);\r\n        e.instance.cd.detectChanges();\r\n      }\r\n    });\r\n  }\r\n\r\n  clickOK() {\r\n    this.grid.endCellEdit();\r\n    this.submit.next({ parameters: this.parameters, formType: this.formType });\r\n  }\r\n\r\n  clickCancel() {\r\n    this.cancel.next();\r\n  }\r\n\r\n}\r\n","import { Component, OnInit, Input, ViewChild, TemplateRef, ComponentFactoryResolver, Injector } from '@angular/core';\r\nimport { EditorTypes } from '@farris/ui-datagrid-editors';\r\nimport { workFlowActions, executionTime, FormMethodConfig } from '../entities/form-method-config';\r\nimport { HttpService } from '@ecp-caf/caf-common';\r\nimport { FormMethod } from '../entities/form-method';\r\nimport { DialogComponent } from '@farris/ui-dialog';\r\nimport { DatagridComponent } from '@farris/ui-datagrid';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { BsModalService } from '@farris/ui-modal';\r\nimport { ParameterSettingComponent } from '../parameter-setting/parameter-setting.component';\r\n\r\n@Component({\r\n  selector: 'lib-form-operation-config',\r\n  templateUrl: './form-operation-config.component.html',\r\n  styleUrls: ['./form-operation-config.component.scss']\r\n})\r\nexport class FormOperationConfigComponent implements OnInit {\r\n  private _fromFormatId: string;\r\n  @Input()\r\n  set formFormatId(v: string) {\r\n    this._fromFormatId = v;\r\n    if (this._fromFormatId) {\r\n      this.getFormMethods();\r\n    }\r\n  }\r\n  get formFormatId() {\r\n    return this._fromFormatId;\r\n  }\r\n\r\n  @Input() formFormatConfigId: string;\r\n  @Input() operations = new Array<FormMethodConfig>();\r\n\r\n  @ViewChild('methodsDialog') methodsDialog: DialogComponent;\r\n  @ViewChild('grid') grid: DatagridComponent;\r\n  @ViewChild('methodGrid') methodGrid: DatagridComponent;\r\n  @ViewChild('cell') cell: TemplateRef<any>;\r\n\r\n  cols = new Array();\r\n\r\n  methodCols = [\r\n    { field: 'method', width: 100, title: 'æ¹æ³æ è¯', showTips: true },\r\n    { field: 'methodName', width: 80, title: 'æ¹æ³åç§°', showTips: true },\r\n    { field: 'description', width: 120, title: 'æè¿°', showTips: true }\r\n  ];\r\n  e: any;\r\n\r\n  formMethods = new Array<FormMethod>();\r\n  state: 'add' | 'edit' = 'add';\r\n\r\n  constructor(\r\n    private http: HttpService,\r\n    private message: MessagerService,\r\n    private resolver: ComponentFactoryResolver,\r\n    private injector: Injector,\r\n    private modalService: BsModalService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.cols = [\r\n    {\r\n      field: 'workFlowAction', width: 80, title: 'æµè½¬æ¹å',\r\n      formatter: {\r\n        type: 'enum',\r\n        options: { valueField: 'value', textField: 'text', data: workFlowActions }\r\n      },\r\n      editor: {\r\n        type: EditorTypes.COMBOLIST,\r\n        options: { valueField: 'value', textField: 'text', data: workFlowActions, idField: 'value', panelHeight: 'auto', enableClear: false }\r\n      },\r\n      validators: [\r\n        { type: 'required', messager: 'å¿å¡«' }\r\n      ]\r\n    }, {\r\n      field: 'method', width: 100, title: 'è¡¨åæä½',\r\n      editor: {\r\n        type: 'input-group',\r\n        options: {\r\n          groupText: '<i class=\"f-icon f-icon-lookup\"></i>',\r\n          editable: false,\r\n          clickHandle: (e) => {\r\n            e.formControl.setValue(e.instance.value ? e.instance.value : '');\r\n            this.e = e;\r\n            this.methodsDialog.show();\r\n            this.state = 'edit';\r\n          },\r\n          clear: (e) => {\r\n            console.log('clear', e);\r\n          }\r\n        }\r\n      },\r\n      formatter: (v, d, i) => {\r\n        if (v) {\r\n          const m = this.formMethods.find(item => item.method === v);\r\n          if (m) {\r\n            return m.methodName;\r\n          } else {\r\n            return '';\r\n          }\r\n        } else {\r\n          return '';\r\n        }\r\n      },\r\n      validators: [\r\n        { type: 'required', messager: 'å¿å¡«' }\r\n      ]\r\n    },\r\n    {\r\n      field: 'executionTime', width: 80, title: 'æ§è¡æ¶æº',\r\n      formatter: {\r\n        type: 'enum',\r\n        options: { valueField: 'value', textField: 'text', data: executionTime }\r\n      },\r\n      editor: {\r\n        type: EditorTypes.COMBOLIST,\r\n        options: { valueField: 'value', textField: 'text', data: executionTime, idField: 'value', panelHeight: 'auto', enableClear: false }\r\n      },\r\n      validators: [\r\n        { type: 'required', messager: 'å¿å¡«' }\r\n      ]\r\n    },\r\n    {\r\n      field: 'sortOrder', width: 60, title: 'æ§è¡é¡ºåº',\r\n      editor: {\r\n        type: EditorTypes.NUMBERBOX, options: {\r\n        }\r\n      },\r\n      formatter: { type: 'number', options: { precision: 0 } },\r\n      validators: [\r\n        { type: 'required', messager: 'å¿å¡«' }\r\n      ]\r\n    },\r\n    {\r\n      field: 'methodParameters', width: 80, title: 'åæ°',\r\n      template: this.cell,\r\n      halign: 'center', align: 'center'\r\n    }\r\n  ];\r\n  }\r\n\r\n  add() {\r\n    this.methodsDialog.show();\r\n    this.state = 'add';\r\n  }\r\n\r\n  delete() {\r\n    if (this.grid.selectedRow) {\r\n      this.operations = this.operations.filter(o => o.id !== this.grid.selectedRow.id);\r\n    } else {\r\n      this.message.info('å°æªéä¸­è¡¨åæä½éç½®ï¼');\r\n    }\r\n  }\r\n\r\n  editParam(ctx: any) {\r\n    const compFactory = this.resolver.resolveComponentFactory(ParameterSettingComponent);\r\n    const compRef = compFactory.create(this.injector);\r\n    compRef.instance.mode = 'usual';\r\n    compRef.instance.showFormType = false;\r\n    if (ctx.rowData.methodParameters) {\r\n      compRef.instance.parameters = [...ctx.rowData.methodParameters.map(p => Object.assign({}, p))];\r\n    } else {\r\n      compRef.instance.parameters = new Array();\r\n    }\r\n\r\n    const modalConfig = {\r\n      title: 'åæ°è®¾ç½®',\r\n      width: 620,\r\n      height: 400,\r\n      showButtons: true,\r\n      buttons: compRef.instance.modalFooter\r\n    };\r\n    const dialog = this.modalService.show(compRef, modalConfig);\r\n\r\n    compRef.instance.submit.subscribe(re => {\r\n      for (const o of this.operations) {\r\n        if (o.id === ctx.rowData.id) {\r\n          o.methodParameters = re.parameters;\r\n        }\r\n      }\r\n      dialog.close();\r\n    });\r\n    compRef.instance.cancel.subscribe(re => {\r\n      dialog.close();\r\n    });\r\n  }\r\n\r\n  methodSelected() {\r\n    if (this.methodGrid.selectedRow) {\r\n      const data = this.methodGrid.selectedRow.data;\r\n      if (this.state === 'edit') {\r\n        if (this.e) {\r\n          this.e.formControl.setValue(data.method);\r\n          this.e.instance.cd.detectChanges();\r\n          for (const o of this.operations) {\r\n            if (o.id === data.id) {\r\n              o.method = data.method;\r\n              o.sortOrder = data.sortOrder;\r\n              o.methodParameters = data.methodParameters;\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        const operation = new FormMethodConfig();\r\n        operation.formFormatConfigId = this.formFormatConfigId;\r\n        operation.method = data.method;\r\n        operation.sortOrder = data.sortOrder;\r\n        operation.methodParameters = data.methodParameters;\r\n        this.operations = this.operations.concat([operation]);\r\n      }\r\n      this.methodsDialog.close();\r\n    } else {\r\n      this.message.info('å°æªéä¸­è¡¨åæä½ï¼');\r\n    }\r\n  }\r\n\r\n  validator(): boolean {\r\n    this.grid.endCellEdit();\r\n    for (const o of this.operations) {\r\n      if (!o.method) {\r\n        this.message.info('å°æªéæ©è¡¨åæä½ï¼');\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  private getFormMethods() {\r\n    if (this.formFormatId) {\r\n      const url = `/api/runtime/wf/v1.0/formOperation?formFormatId=${this.formFormatId}`;\r\n      this.http.get(url).subscribe((re: any) => {\r\n        if (re) {\r\n          this.formMethods = re;\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n}\r\n","import { Component, OnInit, TemplateRef, ViewChild, HostBinding, Input } from '@angular/core';\r\nimport { HttpService } from '@ecp-caf/caf-common';\r\nimport { IFormFormatConfigComponent } from \"@gsp-wf/biz-process-api\";\r\nimport { Observable, of, forkJoin, Subject } from 'rxjs';\r\nimport { FormFormat, FormFieldData, FormField } from '../entities/form-format';\r\nimport { FormFormatConfig, FormButtonConfig, FormFieldConfig } from '../entities/form-format-config';\r\nimport { DatagridComponent } from '@farris/ui-datagrid';\r\nimport { ProcessDeUtil } from '../../../domain/process-de-util';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { NotifyService } from '@farris/ui-notify';\r\nimport { PickedResult, ServerSideToken, LookupGridComponent } from '@farris/ui-lookup';\r\nimport { switchMap, catchError } from 'rxjs/operators';\r\nimport { FormOperationConfigComponent } from '../form-operation-config/form-operation-config.component';\r\nimport { TreeTableComponent } from '@farris/ui-treetable';\r\n\r\n@Component({\r\n  selector: 'lib-form-format-config',\r\n  templateUrl: './form-format-config.component.html',\r\n  styleUrls: ['./form-format-config.component.scss']\r\n})\r\nexport class FormFormatConfigComponent implements OnInit, IFormFormatConfigComponent {\r\n\r\n  @ViewChild('btnEnable') btnEnable: TemplateRef<any>;\r\n  @ViewChild('btnDisabled') btnDisabled: TemplateRef<any>;\r\n  @ViewChild('btnHidden') btnHidden: TemplateRef<any>;\r\n  @ViewChild('fieldEditable') fieldEditable: TemplateRef<any>;\r\n  @ViewChild('fieldReadonly') fieldReadonly: TemplateRef<any>;\r\n  @ViewChild('fieldHidden') fieldHidden: TemplateRef<any>;\r\n  @ViewChild('fieldRequired') fieldRequired: TemplateRef<any>;\r\n\r\n  @ViewChild('btnGrid') btnGrid: DatagridComponent;\r\n  @ViewChild('fieldTree') fieldTree: TreeTableComponent;\r\n  @ViewChild(FormOperationConfigComponent) operationConfig: FormOperationConfigComponent;\r\n\r\n  config: FormFormatConfig = new FormFormatConfig();\r\n  formFormat: FormFormat = new FormFormat();\r\n\r\n  state: 'new' | 'edit' = 'edit';\r\n\r\n  @Input() showMethodTab = true;\r\n\r\n  private _formFormatId: string;\r\n  set formFormatId(v: string) {\r\n    this._formFormatId = v;\r\n    this.config.formFormatId = v;\r\n  }\r\n\r\n  get formFormatId() {\r\n    return this._formFormatId;\r\n  }\r\n\r\n  private _formatConfigId: string;\r\n  set formatConfigId(v: string) {\r\n    this._formatConfigId = v;\r\n    if (!v) {\r\n      this.state = 'new';\r\n    }\r\n  }\r\n  get formatConfigId() {\r\n    return this._formatConfigId;\r\n  }\r\n\r\n  buttonCols = [];\r\n  buttonConfigs = new Array();\r\n\r\n  fieldCols = [];\r\n  fieldConfigs = new Array();\r\n\r\n  formatFieldList: Array<FormField> = new Array();\r\n\r\n  constructor(\r\n    private http: HttpService,\r\n    private message: MessagerService,\r\n    private notify: NotifyService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.buttonCols = [\r\n      { field: 'buttonName', width: 100, title: 'æé®åç§°' },\r\n      // { field: 'buttonId', width: 100, title: 'æé®æ è¯' },\r\n      {\r\n        title: 'æ¯å¦å¯ç¨',\r\n        field: 'enable',\r\n        width: 80,\r\n        template: this.btnEnable,\r\n        align: 'center',\r\n        hAlign: 'center'\r\n      },\r\n      {\r\n        title: 'æ¯å¦ç¦ç¨',\r\n        field: 'disabled',\r\n        width: 80,\r\n        template: this.btnDisabled,\r\n        align: 'center',\r\n        hAlign: 'center'\r\n      },\r\n      {\r\n        title: 'æ¯å¦éè',\r\n        field: 'hidden',\r\n        width: 80,\r\n        template: this.btnHidden,\r\n        align: 'center',\r\n        hAlign: 'center'\r\n      }];\r\n    this.fieldCols = [\r\n      { field: 'fieldName', width: 100, title: 'å­æ®µåç§°' },\r\n      // { field: 'fieldId', width: 100, title: 'å­æ®µæ è¯' },\r\n      {\r\n        title: 'æ¯å¦å¯å',\r\n        field: 'editable',\r\n        width: 80,\r\n        template: this.fieldEditable,\r\n        align: 'center',\r\n        hAlign: 'center'\r\n      },\r\n      {\r\n        title: 'æ¯å¦åªè¯»',\r\n        field: 'readonly',\r\n        width: 80,\r\n        template: this.fieldReadonly,\r\n        align: 'center',\r\n        hAlign: 'center'\r\n      },\r\n      {\r\n        title: 'æ¯å¦éè',\r\n        field: 'hidden',\r\n        width: 80,\r\n        template: this.fieldHidden,\r\n        align: 'center',\r\n        hAlign: 'center'\r\n      },\r\n      {\r\n        title: 'æ¯å¦å¿å¡«',\r\n        field: 'required',\r\n        width: 80,\r\n        template: this.fieldRequired,\r\n        align: 'center',\r\n        hAlign: 'center'\r\n      }];\r\n    this.getConfig();\r\n  }\r\n\r\n  submit(): Observable<any> {\r\n    if (this.validator()) {\r\n      this.setBtnAndFieldConfigs();\r\n      if (this.state === 'new' &&\r\n        this.config.formButtonConfigs.length === 0 &&\r\n        this.config.formFieldConfigs.length === 0 &&\r\n        this.operationConfig.operations.length === 0\r\n      ) {\r\n        return of({ result: true, configId: null });\r\n      } else {\r\n        return this.saveConfig(this.config).pipe(\r\n          switchMap(re => {\r\n            return of({ result: true, configId: this.config.id });\r\n          }),\r\n          catchError(re => {\r\n            this.message.error('ä¿å­éç½®å¤±è´¥ï¼è¯·èç³»ç®¡çåæ¥çåå ï¼');\r\n            return of({ result: false, configId: this.config.id });\r\n          })\r\n        );\r\n      }\r\n    } else {\r\n      return of({ result: false, configId: null });\r\n    }\r\n  }\r\n\r\n  btnConfigChange(bool: boolean, field: string, id: string) {\r\n    if (bool) {\r\n      for (const b of this.buttonConfigs) {\r\n        if (b.id === id) {\r\n          switch (field) {\r\n            case 'enable':\r\n              b.enable = bool;\r\n              b.disabled = false;\r\n              b.hidden = false;\r\n              break;\r\n            case 'disabled':\r\n              b.disabled = bool;\r\n              b.enable = false;\r\n              b.hidden = false;\r\n              break;\r\n            case 'hidden':\r\n              b.hidden = bool;\r\n              b.disabled = false;\r\n              b.enable = false;\r\n              break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  btnBatchOperate(operation: string) {\r\n    const checkeds = this.btnGrid.checkedRows;\r\n    if (checkeds && checkeds.length > 0) {\r\n      for (const c of checkeds) {\r\n        this.btnConfigChange(true, operation, c.id);\r\n      }\r\n    }\r\n  }\r\n\r\n  btnBatchReset() {\r\n    const checkeds = this.btnGrid.checkedRows;\r\n    if (checkeds && checkeds.length > 0) {\r\n      for (const c of checkeds) {\r\n        const button = this.formFormat.formButtons.find(b => b.id === c.id);\r\n        for (const b of this.buttonConfigs) {\r\n          if (b.id === c.id) {\r\n            b.enable = button.buttonState === 'Enable' ? true : false;\r\n            b.disabled = button.buttonState === 'Disabled' ? true : false;\r\n            b.hidden = button.buttonState === 'Hidden' ? true : false;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  fieldConfigChange(bool: boolean, field: string, id: string) {\r\n    if (bool) {\r\n      this.fieldSwitchChange(this.fieldConfigs, field, id);\r\n    }\r\n  }\r\n  private fieldSwitchChange(fieldConfigs: Array<any>, field: string, id: string) {\r\n    if (fieldConfigs.length > 0) {\r\n      for (const f of fieldConfigs) {\r\n        if (f.data.id === id) {\r\n          switch (field) {\r\n            case 'editable':\r\n              f.data.editable = true;\r\n              f.data.readonly = false;\r\n              f.data.hidden = false;\r\n              f.data.required = false;\r\n              break;\r\n            case 'readonly':\r\n              f.data.editable = false;\r\n              f.data.readonly = true;\r\n              f.data.hidden = false;\r\n              f.data.required = false;\r\n              break;\r\n            case 'hidden':\r\n              f.data.editable = false;\r\n              f.data.readonly = false;\r\n              f.data.hidden = true;\r\n              f.data.required = false;\r\n              break;\r\n            case 'required':\r\n              f.data.editable = false;\r\n              f.data.readonly = false;\r\n              f.data.hidden = false;\r\n              f.data.required = true;\r\n              break;\r\n          }\r\n          return;\r\n        } else {\r\n          if (f.children && f.children.length > 0) {\r\n            this.fieldSwitchChange(f.children, field, id);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  fieldBatchOperate(operation: string) {\r\n    const checkeds = this.fieldTree.checkeds;\r\n    if (checkeds && checkeds.length > 0) {\r\n      for (const c of checkeds) {\r\n        this.fieldConfigChange(true, operation, c.data.id);\r\n      }\r\n    }\r\n  }\r\n\r\n  fieldBatchReset() {\r\n    const checkeds = this.fieldTree.checkeds;\r\n    if (checkeds && checkeds.length > 0) {\r\n      for (const c of checkeds) {\r\n        const field = this.formatFieldList.find(f => f.id === c.data.id);\r\n        this.resetFieldConfig(this.fieldConfigs, c.data.id, field);\r\n      }\r\n    }\r\n  }\r\n  resetFieldConfig(fieldConfigs: Array<any>, id: string, field: FormField) {\r\n    if (fieldConfigs.length > 0) {\r\n      for (const f of fieldConfigs) {\r\n        if (f.leaf === true && f.data.id === id) {\r\n          f.data.editable = field.fieldState === 'Editable' ? true : false;\r\n          f.data.readonly = field.fieldState === 'Readonly' ? true : false;\r\n          f.data.hidden = field.fieldState === 'Hidden' ? true : false;\r\n          f.data.required = field.fieldState === 'Required' ? true : false;\r\n          return;\r\n        } else {\r\n          if (f.children && f.children.length > 0) {\r\n            this.resetFieldConfig(f.children, id, field);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  private validator(): boolean {\r\n    return this.operationConfig.validator();\r\n  }\r\n\r\n\r\n  private setBtnAndFieldConfigs() {\r\n    this.config.formButtonConfigs = new Array<FormButtonConfig>();\r\n    for (const btn of this.buttonConfigs) {\r\n      const button = this.formFormat.formButtons.find(b => b.buttonId === btn.buttonId);\r\n      const btnConfig = new FormButtonConfig();\r\n      btnConfig.buttonId = btn.buttonId;\r\n      if (btn.enable) {\r\n        btnConfig.buttonState = 'Enable';\r\n      } else if (btn.disabled) {\r\n        btnConfig.buttonState = 'Disabled';\r\n      } else if (btn.hidden) {\r\n        btnConfig.buttonState = 'Hidden';\r\n      } else {\r\n        continue;\r\n      }\r\n      if (!button.buttonState && btnConfig.buttonState) {\r\n        this.config.formButtonConfigs.push(btnConfig);\r\n      }\r\n      if (button.buttonState && button.buttonState !== btnConfig.buttonState) {\r\n        this.config.formButtonConfigs.push(btnConfig);\r\n      }\r\n    }\r\n    this.config.formFieldConfigs = new Array<FormFieldConfig>();\r\n    this.getFieldConfigs(this.fieldConfigs);\r\n\r\n    this.config.formMethodConfigs = this.operationConfig.operations || new Array();\r\n  }\r\n\r\n  private getFieldConfigs(fieldConfigs: Array<any>) {\r\n    if (fieldConfigs && fieldConfigs.length > 0) {\r\n      for (const f of fieldConfigs) {\r\n        if (f.children && f.children.length > 0) {\r\n          this.getFieldConfigs(f.children);\r\n        }\r\n        if (f.leaf === false) {\r\n          continue;\r\n        }\r\n        const field = this.formatFieldList.find(fd => fd.fieldId === f.data.fieldId);\r\n        const fieldConfig = new FormFieldConfig();\r\n        fieldConfig.fieldId = f.data.fieldId;\r\n        if (f.data.editable) {\r\n          fieldConfig.fieldState = 'Editable';\r\n        } else if (f.data.readonly) {\r\n          fieldConfig.fieldState = 'Readonly';\r\n        } else if (f.data.hidden) {\r\n          fieldConfig.fieldState = 'Hidden';\r\n        } else if (f.data.required) {\r\n          fieldConfig.fieldState = 'Required';\r\n        } else {\r\n          continue;\r\n        }\r\n\r\n        if (!field.fieldState && fieldConfig.fieldState) {\r\n          this.config.formFieldConfigs.push(fieldConfig);\r\n        }\r\n\r\n        if (field.fieldState && field.fieldState !== fieldConfig.fieldState) {\r\n          this.config.formFieldConfigs.push(fieldConfig);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  private getConfig() {\r\n    if (this.formFormatId) {\r\n      forkJoin(this.getFormFormat(), this.getFormFormatConfig()).subscribe((re: any[]) => {\r\n        const formFormat = re[0] as FormFormat;\r\n        if (formFormat) {\r\n          this.formFormat = this.convertFormFormat(formFormat);\r\n        }\r\n        const config = re[1] as FormFormatConfig;\r\n        if (config) {\r\n          this.config = config;\r\n        }\r\n        if (this.formFormat.formButtons) {\r\n          this.buttonConfigs = this.formFormat.formButtons.map(b => Object.assign({}, b, {\r\n            enable: b.buttonState === 'Enable' ? true : false,\r\n            disabled: b.buttonState === 'Disabled' ? true : false,\r\n            hidden: b.buttonState === 'Hidden' ? true : false\r\n          }));\r\n          let btnConfigs = new Array<FormButtonConfig>();\r\n          if (config && config.formButtonConfigs) {\r\n            btnConfigs = config.formButtonConfigs;\r\n          }\r\n          for (const b of btnConfigs) {\r\n            for (const btn of this.buttonConfigs) {\r\n              if (btn.buttonId === b.buttonId) {\r\n                switch (b.buttonState) {\r\n                  case 'Enable':\r\n                    btn.enable = true;\r\n                    btn.disabled = false;\r\n                    btn.hidden = false;\r\n                    break;\r\n                  case 'Disabled':\r\n                    btn.enable = false;\r\n                    btn.disabled = true;\r\n                    btn.hidden = false;\r\n                    break;\r\n                  case 'Hidden':\r\n                    btn.enable = false;\r\n                    btn.disabled = false;\r\n                    btn.hidden = true;\r\n                    break;\r\n                }\r\n                break;\r\n              }\r\n            }\r\n          }\r\n        }\r\n        if (this.formFormat.formFields) {\r\n          this.fieldConfigs = [...this.formFormat.formFields];\r\n          this.orgFieldConfigs(this.fieldConfigs);\r\n          let configs = new Array<FormFieldConfig>();\r\n          if (config && config.formFieldConfigs) {\r\n            configs = config.formFieldConfigs;\r\n          }\r\n          for (const f of configs) {\r\n            this.setFieldConfig(this.fieldConfigs, f);\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  private orgFieldConfigs(formFields: Array<FormFieldData>) {\r\n    if (formFields.length > 0) {\r\n      for (const d of formFields) {\r\n        d.data = Object.assign({}, d.data, {\r\n          editable: d.data.fieldState === 'Editable' ? true : false,\r\n          readonly: d.data.fieldState === 'Readonly' ? true : false,\r\n          hidden: d.data.fieldState === 'Hidden' ? true : false,\r\n          required: d.data.fieldState === 'Required' ? true : false\r\n        });\r\n        if (d.children && d.children) {\r\n          this.orgFieldConfigs(d.children);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  private setFieldConfig(fieldConfigs: Array<any>, config: FormFieldConfig) {\r\n    if (fieldConfigs.length > 0) {\r\n      for (const f of fieldConfigs) {\r\n        if (f.data.fieldId === config.fieldId) {\r\n          switch (config.fieldState) {\r\n            case 'Editable':\r\n              f.data.editable = true;\r\n              f.data.readonly = false;\r\n              f.data.hidden = false;\r\n              f.data.required = false;\r\n              break;\r\n            case 'Readonly':\r\n              f.data.editable = false;\r\n              f.data.readonly = true;\r\n              f.data.hidden = false;\r\n              f.data.required = false;\r\n              break;\r\n            case 'Hidden':\r\n              f.data.editable = false;\r\n              f.data.readonly = false;\r\n              f.data.hidden = true;\r\n              f.data.required = false;\r\n              break;\r\n            case 'Required':\r\n              f.data.editable = false;\r\n              f.data.readonly = false;\r\n              f.data.hidden = false;\r\n              f.data.required = true;\r\n              break;\r\n          }\r\n          return;\r\n        } else {\r\n          if (f.children && f.children.length > 0) {\r\n            this.setFieldConfig(f.children, config);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  private saveConfig(config: FormFormatConfig): Observable<any> {\r\n    const url = '/api/runtime/wf/v1.0/formFormatConfig';\r\n    return this.http.post(url, config);\r\n  }\r\n\r\n  private getFormFormat(): Observable<any> {\r\n    if (this.formFormatId) {\r\n      let url = `/api/runtime/wf/v1.0/formFormat/${this.formFormatId}`;\r\n      url = encodeURI(url);\r\n      return this.http.get(url);\r\n    } else {\r\n      return of(null);\r\n    }\r\n  }\r\n\r\n  private getFormFormatConfig(): Observable<any> {\r\n    if (this.formatConfigId) {\r\n      let url = `/api/runtime/wf/v1.0/formFormatConfig/${this.formatConfigId}`;\r\n      url = encodeURI(url);\r\n      return this.http.get(url);\r\n    } else {\r\n      return of(null);\r\n    }\r\n  }\r\n\r\n  private convertFormFormat(formFormat: FormFormat): FormFormat {\r\n    if (!formFormat.status) {\r\n      formFormat.status = 0;\r\n    }\r\n    this.convertformFields(formFormat.formFields);\r\n    this.getFormatFieldList(formFormat.formFields, this.formatFieldList);\r\n    return formFormat;\r\n  }\r\n\r\n  private convertformFields(formFields: Array<FormFieldData>) {\r\n    if (formFields.length > 0) {\r\n      for (const d of formFields) {\r\n        if (typeof(d.leaf) !== 'boolean' && (d.leaf == null || d.leaf === undefined)) {\r\n          d.leaf = true;\r\n        }\r\n        if (d.children && d.children) {\r\n          this.orgFieldConfigs(d.children);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  private getFormatFieldList(formFields: Array<FormFieldData>, array: Array<FormField>) {\r\n    if (formFields.length > 0) {\r\n      for (const d of formFields) {\r\n        array.push(d.data);\r\n        if (d.children && d.children) {\r\n          this.getFormatFieldList(d.children, array);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  private getFormatField(formFields: Array<FormFieldData>, fieldId: string): FormFieldData {\r\n    for (const f of formFields) {\r\n      if (f.data.fieldId === fieldId) {\r\n        return f;\r\n      }\r\n      if (f.children && f.children.length > 0) {\r\n        return this.getFormatField(f.children, fieldId);\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n}\r\n","import { Component, OnInit, ViewChild, ViewContainerRef, Injector, ComponentFactoryResolver, ComponentRef, TemplateRef, Input, SimpleChanges, OnChanges } from '@angular/core';\r\nimport { IFormFormatConfigComponent } from '@gsp-wf/biz-process-api';\r\nimport { FormFormatConfigComponent } from '../form-format-config/form-format-config.component';\r\nimport { HttpService } from '@ecp-caf/caf-common';\r\nimport { Observable, Subject } from 'rxjs';\r\nimport { FormFormatType } from '../entities/form-format-type';\r\n\r\ndeclare var System: any;\r\n\r\n@Component({\r\n  selector: 'lib-form-config-container',\r\n  templateUrl: './form-config-container.component.html',\r\n  styleUrls: ['./form-config-container.component.css']\r\n})\r\nexport class FormConfigContainerComponent implements OnInit, OnChanges {\r\n\r\n  private componentRef: ComponentRef<any>;\r\n  @ViewChild('container', { read: ViewContainerRef }) container: ViewContainerRef;\r\n  @ViewChild('iconSelectFooter') modalFooter: TemplateRef<any>;\r\n\r\n  @Input()\r\n  formFormatId: string;\r\n  @Input()\r\n  formatConfigId: string;\r\n\r\n  @Input() showMethodTab = true;\r\n  constructor(\r\n    private injector: Injector,\r\n    private cfr: ComponentFactoryResolver,\r\n    private http: HttpService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    // this.showComponentRef();\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    if (changes['formFormatId'] && changes['formFormatId'].currentValue) {\r\n      this.showComponentRef();\r\n    } else { // åè½èåæ¶\r\n      this.componentRef = this.createWFComponentRef();\r\n      this.componentRef.instance.formFormatId = null;\r\n      this.componentRef.instance.formatConfigId = null;\r\n      this.componentRef.instance.showMethodTab = this.showMethodTab;\r\n      this.container.clear();\r\n      this.container.insert(this.componentRef.hostView);\r\n    }\r\n  }\r\n\r\n  submit(): Observable<any> {\r\n    return this.componentRef.instance.submit();\r\n  }\r\n\r\n  private showComponentRef() {\r\n    this.componentRef = this.createWFComponentRef();\r\n    this.componentRef.instance.formFormatId = this.formFormatId;\r\n    this.componentRef.instance.formatConfigId = this.formatConfigId;\r\n    this.componentRef.instance.showMethodTab = this.showMethodTab;\r\n    this.container.clear();\r\n    this.container.insert(this.componentRef.hostView);\r\n    // if (this.formFormatId) {\r\n      // this.getFormFormatType().subscribe((re: FormFormatType) => {\r\n        // if (re.code === 'wf') {\r\n\r\n        // } else {\r\n        //   System.import(re.customImpl)\r\n        //     .then((moduleFactorys: any) => {\r\n        //       const moduleFactory: any = Object.values(moduleFactorys)[0];\r\n        //       const moduleRef = moduleFactory.create(this.injector);\r\n        //       this.componentRef = moduleRef.instance.createCustomComponentRef(this.injector);\r\n        //       this.componentRef.instance.formFormatId = this.formFormatId;\r\n        //       this.componentRef.instance.formatConfigId = this.formatConfigId;\r\n        //       this.componentRef.instance.showMethodTab = this.showMethodTab;\r\n        //       this.container.clear();\r\n        //       this.container.insert(this.componentRef.hostView);\r\n        //     });\r\n        // }\r\n      // });\r\n    // }\r\n  }\r\n\r\n  private createWFComponentRef(): ComponentRef<IFormFormatConfigComponent> {\r\n    const cmpF = this.cfr.resolveComponentFactory(FormFormatConfigComponent);\r\n    const cmpR = cmpF.create(this.injector);\r\n    return cmpR;\r\n  }\r\n\r\n  private getFormFormatType(): Observable<any> {\r\n    if (this.formFormatId) {\r\n      const url = `/api/runtime/wf/v1.0/formFormatType/formFormat?formFormat=${this.formFormatId}`;\r\n      return this.http.get(url);\r\n    }\r\n  }\r\n\r\n}\r\n","import { Component, OnInit, HostBinding, Output, EventEmitter, Input, ViewChild, TemplateRef, ElementRef, ComponentFactoryResolver, Injector, AfterViewInit, AfterContentInit } from '@angular/core';\r\nimport { TypeConverter } from '@farris/ui-property-panel';\r\nimport { of } from 'rxjs/observable/of';\r\nimport { FormBuilder } from '@angular/forms';\r\nimport { ExecuteFormsUIState } from './execute-forms.uistate';\r\nimport { ExecuteFormsViewModel } from './execute-forms.viewmodel';\r\nimport { ExecuteFormsRepository } from './execute-forms.repository';\r\nimport { ExecuteFormModel, TerminalType, ActualParameter } from './entities/execute-form.entity';\r\nimport { BsModalService } from '@farris/ui-modal';\r\nimport { AddExecuteFormComponent } from './add-execute-form/add-execute-form.component';\r\nimport { FormConfigContainerComponent } from './form-config-container/form-config-container.component';\r\nimport { ParameterSettingComponent } from './parameter-setting/parameter-setting.component';\r\nimport { Observable, Subject, forkJoin } from 'rxjs';\r\nimport { switchMap } from 'rxjs/operators';\r\n\r\n@Component({\r\n  selector: 'app-execute-forms',\r\n  templateUrl: './execute-forms.component.html',\r\n  styleUrls: ['./execute-forms.component.css'],\r\n  providers: [ExecuteFormsUIState, ExecuteFormsViewModel, ExecuteFormsRepository]\r\n})\r\nexport class ExecuteFormsComponent implements OnInit, AfterViewInit {\r\n  modalConfig = {\r\n    title: 'è¡¨åå®ä¹',\r\n    width: 794,\r\n    height: 505,\r\n    showButtons: true\r\n  };\r\n\r\n  @HostBinding('class')\r\n  cls = 'farris-main-area flex-column';\r\n  @HostBinding('style.background') style = '#FFF';\r\n  @Output() closeModal = new EventEmitter<any>();\r\n  @Output() submitModal = new EventEmitter<any>();\r\n\r\n  @Input()\r\n  set value(item: ExecuteFormModel) {\r\n    if (item) {\r\n      const paramArray = new Array<ActualParameter>();\r\n      item.ActualParameters.forEach(a => {\r\n        const para = new ActualParameter();\r\n        para.Name = a.Name;\r\n        para.Value = a.Value;\r\n        paramArray.push(para);\r\n      });\r\n      this.form.ActualParameters = paramArray;\r\n      this.form.Id = item.Id;\r\n      this.form.Name = item.Name;\r\n      this.form.ComponentId = item.ComponentId;\r\n      this.form.formFormatId = item.formFormatId;\r\n      this.form.formatConfigId = item.formatConfigId;\r\n      this.form.FormType = item.FormType;\r\n      this.form.TerminalType = item.TerminalType;\r\n    }\r\n  }\r\n  @Input() editorParams: any = {};\r\n  @ViewChild('iconSelectFooter') modalFooter: TemplateRef<any>;\r\n  @ViewChild('configContainer') configContainer: FormConfigContainerComponent;\r\n\r\n  @ViewChild('configSection', { read: ElementRef }) configSection: ElementRef<any>;\r\n\r\n  form: ExecuteFormModel;\r\n\r\n  tab: 'web' | 'mobile' = 'web';\r\n\r\n  groupIcon = '<i class=\"f-icon f-icon-lookup\"></i>';\r\n\r\n  cols = [];\r\n\r\n  location: 'userActivity' | 'process' | 'startActivity';\r\n\r\n  showMethodTab = true;\r\n\r\n  // *******************************************************\r\n  constructor(\r\n    private formBuilder: FormBuilder,\r\n    public uistate: ExecuteFormsUIState,\r\n    public viewmodel: ExecuteFormsViewModel,\r\n    private resolver: ComponentFactoryResolver,\r\n    private injector: Injector,\r\n    private modalService: BsModalService\r\n  ) {\r\n    this.form = new ExecuteFormModel();\r\n  }\r\n  ngAfterViewInit(): void {\r\n    // this.editCSS();\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.location = this.editorParams.location;\r\n    this.tab = this.editorParams.tab;\r\n    if (this.location === 'userActivity') {\r\n      this.showMethodTab = true;\r\n    } else {\r\n      this.showMethodTab = false;\r\n    }\r\n  }\r\n  clickOK() {\r\n    let data = new ExecuteFormModel();\r\n    this.getForm().subscribe((re: any) => {\r\n      if (!re.result) {\r\n        return;\r\n      }\r\n      data = re.form;\r\n      const object = { value: data, parameters: null };\r\n      this.submitModal.emit(object);\r\n    });\r\n  }\r\n\r\n  clickCancel() {\r\n    this.closeModal.emit();\r\n  }\r\n  // tabChange(data) {\r\n  //   this.tab = data.nextId;\r\n  // }\r\n\r\n  // editCSS() {\r\n  //   this.configSection.nativeElement.querySelector('div.f-section-header').classList.add('mb-0');\r\n  // }\r\n\r\n  private getForm(): Observable<any> {\r\n    if (this.form.ComponentId) {\r\n      return of({ result: true, form: this.form });\r\n    } else if (this.form.formFormatId) {\r\n      return this.configContainer.submit().pipe(\r\n        switchMap((re: any) => {\r\n          if (re.result) {\r\n            this.form.formatConfigId = re.configId;\r\n            return of({ result: true, form: this.form });\r\n          } else {\r\n            return of({ result: false, form: this.form });\r\n          }\r\n        })\r\n      );\r\n    } else {\r\n      return of({ result: true, form: null });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * åæ°è®¾ç½®\r\n   */\r\n  parametersSet() {\r\n    const compFactory = this.resolver.resolveComponentFactory(ParameterSettingComponent);\r\n    const compRef = compFactory.create(this.injector);\r\n    compRef.instance.mode = 'bpmn';\r\n    if (this.tab === 'web') {\r\n      if (this.form.ComponentId) {\r\n        compRef.instance.showFormType = true;\r\n        compRef.instance.formType = this.form.FormType;\r\n      }\r\n      compRef.instance.parameters = [...this.form.ActualParameters.map(p => Object.assign({}, p))];\r\n    } else {\r\n      compRef.instance.parameters = [...this.form.ActualParameters.map(p => Object.assign({}, p))];\r\n    }\r\n\r\n    const modalConfig = {\r\n      title: 'åæ°è®¾ç½®',\r\n      width: 620,\r\n      height: 400,\r\n      showButtons: true,\r\n      buttons: compRef.instance.modalFooter\r\n    };\r\n    const dialog = this.modalService.show(compRef, modalConfig);\r\n\r\n    compRef.instance.submit.subscribe(re => {\r\n      if (this.tab === 'web') {\r\n        this.form.ActualParameters = re.parameters;\r\n        this.form.FormType = re.formType;\r\n      } else {\r\n        this.form.ActualParameters = re.parameters;\r\n      }\r\n      dialog.close();\r\n    });\r\n    compRef.instance.cancel.subscribe(re => {\r\n      dialog.close();\r\n    });\r\n  }\r\n  /**\r\n   * éæ©è¡¨åå®ä¹\r\n   */\r\n  selectExecuteForm() {\r\n    const compFactory = this.resolver.resolveComponentFactory(AddExecuteFormComponent);\r\n    const compRef = compFactory.create(this.injector);\r\n    compRef.instance.tab = this.tab;\r\n\r\n    const modalConfig = {\r\n      title: 'è¡¨åå®ä¹åè¡¨',\r\n      width: 650,\r\n      height: 400,\r\n      showButtons: true,\r\n      buttons: compRef.instance.modalFooter\r\n    };\r\n    const dialog = this.modalService.show(compRef, modalConfig);\r\n    compRef.instance.submit.subscribe((re: ExecuteFormModel) => {\r\n      this.form = re;\r\n      dialog.close();\r\n    });\r\n    compRef.instance.cancel.subscribe(re => {\r\n      dialog.close();\r\n    });\r\n  }\r\n  clear() {\r\n    this.form = new ExecuteFormModel();\r\n  }\r\n}\r\nexport class ExecuteFormsConverter implements TypeConverter {\r\n  constructor() { }\r\n\r\n  convertTo(data): string {\r\n    if (data) {\r\n      return data.Name;\r\n    } else {\r\n      return 'ï¼æªè®¾ç½®ï¼';\r\n    }\r\n  }\r\n}\r\n","import { Component, OnInit, Output, EventEmitter, Input, ViewChild, TemplateRef } from '@angular/core';\r\nimport { TypeConverter } from '@farris/ui-property-panel';\r\nimport { ExpressionService, InjectedType, ExpressioneditorComponent } from '@gsp-svc/expression';\r\nimport { ProcessDesignerUIState } from '../../app/process-designer.uistate';\r\n\r\n@Component({\r\n  selector: 'app-title-expression',\r\n  templateUrl: './title-expression.component.html',\r\n  styleUrls: ['./title-expression.component.scss']\r\n})\r\nexport class TitleExpressionComponent implements OnInit {\r\n\r\n  @Output() closeModal = new EventEmitter<any>();\r\n  @Output() submitModal = new EventEmitter<any>();\r\n\r\n  @Input() value: string;\r\n\r\n  @ViewChild('iconSelectFooter') modalFooter: TemplateRef<any>;\r\n\r\n  @Input() editorParams: any = {};\r\n\r\n  @ViewChild(ExpressioneditorComponent) editor: ExpressioneditorComponent;\r\n\r\n  contextEntities = [];\r\n\r\n  schema: any = {};\r\n  injectName = '';\r\n\r\n  modalConfig = {\r\n    title: 'ä»»å¡æè¿°',\r\n    width: 1140,\r\n    height: 520,\r\n    showButtons: true\r\n  };\r\n\r\n  constructor(\r\n    private expr: ExpressionService,\r\n    public designerState: ProcessDesignerUIState\r\n  ) { \r\n    if (this.designerState.schemas[0]) {\r\n      this.schema = this.designerState.schemas[0];\r\n      if (this.designerState.schemas[0].entityTypes && this.designerState.schemas[0].entityTypes.length > 0) {\r\n        this.injectName = this.designerState.schemas[0].entityTypes[0].name;\r\n      }\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n    // this.contextEntities = this.contextEntities.concat(this.designerState.procInstContext)\r\n    //   .concat(this.designerState.formalParameterContext)\r\n    //   .concat(this.designerState.participantContext)\r\n    //   .concat(this.designerState.processVariableContext);\r\n    this.contextEntities = new Array();\r\n    if (this.designerState.procInstContext.length > 0) {\r\n      for (const variable of this.designerState.procInstContext) {\r\n        this.contextEntities = this.contextEntities.concat([variable]);\r\n      }\r\n    }\r\n    if (this.designerState.formalParameterContext.length > 0) {\r\n      for (const variable of this.designerState.formalParameterContext) {\r\n        if (!this.contextEntities.some(c => c.key === variable.key)) {\r\n          this.contextEntities = this.contextEntities.concat([variable]);\r\n        }\r\n      }\r\n    }\r\n    if (this.designerState.participantContext.length > 0) {\r\n      for (const variable of this.designerState.participantContext) {\r\n        if (!this.contextEntities.some(c => c.key === variable.key)) {\r\n          this.contextEntities = this.contextEntities.concat([variable]);\r\n        }\r\n      }\r\n    }\r\n    if (this.designerState.processVariableContext.length > 0) {\r\n      for (const variable of this.designerState.processVariableContext) {\r\n        if (!this.contextEntities.some(c => c.key === variable.key)) {\r\n          this.contextEntities = this.contextEntities.concat([variable]);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  clickOK() {\r\n    this.value = this.convertToValue(this.editor.getExpr());\r\n    const object = { value: this.value, parameters: null };\r\n    this.submitModal.emit(object);\r\n  }\r\n\r\n  clickCancel() {\r\n    this.closeModal.emit();\r\n  }\r\n\r\n  private convertToValue(val: string): string {\r\n    if (val) {\r\n      if (val.substring(9, val.length - 2)) {\r\n        return val;\r\n      } else {\r\n        return '';\r\n      }\r\n    } else {\r\n      return '';\r\n    }\r\n  }\r\n\r\n}\r\nexport class TitleExpressionConverter implements TypeConverter {\r\n  constructor() { }\r\n\r\n  convertTo(data: any): string {\r\n    if (data) {\r\n      return data;\r\n    } else {\r\n      return 'ï¼æªè®¾ç½®ï¼';\r\n    }\r\n  }\r\n}\r\n","import { ActualParameter } from '../../execute-forms/entities/execute-form.entity';\r\n\r\nexport class CustomizeAciton {\r\n    id: string;\r\n    code: string;\r\n    name: string;\r\n    terminalType: string;\r\n    // enable: boolean;\r\n    actualParameters: ActualParameter[];\r\n    constructor(id?: string, code?: string, name?: string) {\r\n        this.id = id;\r\n        this.code = code;\r\n        this.name = name;\r\n    }\r\n}\r\n","import { Component, OnInit, ViewChild, TemplateRef, Output, EventEmitter } from '@angular/core';\r\nimport { ProcessDesignerUIState } from '../../../../app/process-designer.uistate';\r\nimport { DatagridComponent } from '@farris/ui-datagrid';\r\nimport { CustomizeAciton } from '../../entities/customize-action.entity';\r\nimport { ActualParameter } from '../../../execute-forms/entities/execute-form.entity';\r\n\r\n@Component({\r\n  selector: 'app-customize-action-list',\r\n  templateUrl: './customize-action-list.component.html',\r\n  styleUrls: ['./customize-action-list.component.scss']\r\n})\r\nexport class CustomizeActionListComponent implements OnInit {\r\n\r\n  @ViewChild('grid') grid: DatagridComponent;\r\n  @ViewChild('footer') footer: TemplateRef<any>;\r\n\r\n  @Output() submit = new EventEmitter<any[]>();\r\n  @Output() cancel = new EventEmitter<any>();\r\n\r\n  customActionList: any[];\r\n\r\n  private terminalList = [\r\n    { value: 'app', text: 'ç§»å¨' },\r\n    { value: 'web', text: 'web' },\r\n    { value: 'web,app', text: 'web,ç§»å¨' }\r\n  ];\r\n\r\n  cols = [\r\n    { field: 'code', width: 100, title: 'ç¼å·' },\r\n    { field: 'name', width: 100, title: 'åç§°' },\r\n    {\r\n      field: 'terminal', width: 100, title: 'éç¨ç»ç«¯',\r\n      formatter: {\r\n        type: 'enum',\r\n        options: { valueField: 'value', textField: 'text', data: this.terminalList }\r\n      }, },\r\n    {\r\n      field: 'isAll', width: 100, title: 'æ¯å¦é»è®¤',\r\n      formatter: { type: 'boolean', options: { trueText: 'æ¯', falseText: 'å¦' } }  }\r\n  ];\r\n  constructor(private designerUIState: ProcessDesignerUIState) {\r\n    this.customActionList = this.designerUIState.flowFormInfo.customizeActions || [];\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n  clickOK() {\r\n    const selections = [];\r\n    const checkeds: any[] = this.grid.checkeds;\r\n    if (checkeds && checkeds.length > 0) {\r\n      checkeds.forEach(action => {\r\n        const item = new CustomizeAciton(action.data.id, action.data.code, action.data.name);\r\n        item.terminalType = action.data.terminal;\r\n        // item.enable = true;\r\n        item.actualParameters = [];\r\n        if (action.data.actualParameters && action.data.actualParameters.length > 0) {\r\n          for (const p of action.data.actualParameters) {\r\n            const param = {\r\n              Name: p.code,\r\n              Value: p.value,\r\n              ValueText: p.name,\r\n              Tag: 'expression'\r\n            } as ActualParameter;\r\n            item.actualParameters.push(param);\r\n          }\r\n        }\r\n        selections.push(item);\r\n      });\r\n    }\r\n    this.submit.emit(selections);\r\n  }\r\n  clickCancel() {\r\n    this.cancel.emit(true);\r\n  }\r\n}\r\n","import { Component, OnInit, HostBinding, Output, EventEmitter, Input, ViewChild, TemplateRef, ComponentFactoryResolver, Injector, AfterViewInit } from '@angular/core';\r\nimport { CustomizeAciton } from './entities/customize-action.entity';\r\nimport { DatagridComponent } from '@farris/ui-datagrid';\r\nimport { EditorTypes } from '@farris/ui-datagrid-editors';\r\nimport { ProcessDesignerUIState } from '../../app/process-designer.uistate';\r\nimport { ExpressionService, InjectedType } from '@gsp-svc/expression';\r\nimport { BsModalService, ModalOptions } from '@farris/ui-modal';\r\nimport { CustomizeActionListComponent } from './views/customize-action-list/customize-action-list.component';\r\nimport { TypeConverter } from '@farris/ui-property-panel';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { ActualParameter } from '../execute-forms/entities/execute-form.entity';\r\n\r\n@Component({\r\n  selector: 'app-customize-action',\r\n  templateUrl: './customize-action.component.html',\r\n  styleUrls: ['./customize-action.component.scss']\r\n})\r\nexport class CustomizeActionComponent implements OnInit, AfterViewInit {\r\n  @HostBinding('class')\r\n  cls = 'farris-main-area flex-column';\r\n  @Output() closeModal = new EventEmitter<any>();\r\n  @Output() submitModal = new EventEmitter<any>();\r\n\r\n  @Input() editorParams: any = {};\r\n  @ViewChild('iconSelectFooter') modalFooter: TemplateRef<any>;\r\n  modalConfig = {\r\n    title: 'èªå®ä¹å¨ä½',\r\n    width: 800,\r\n    height: 520,\r\n    showButtons: true\r\n  };\r\n  @Input() set value(data: any[]) {\r\n    if (data && data.length > 0) {\r\n      for (const d of data) {\r\n        const action = new CustomizeAciton(d.id, d.code, d.name);\r\n        action.terminalType = d.terminalType;\r\n        action.actualParameters = [];\r\n        if (d.actualParameters && d.actualParameters.length > 0) {\r\n          for (const a of d.actualParameters) {\r\n            const p = new ActualParameter();\r\n            p.Name = a.Name;\r\n            p.Value = a.Value;\r\n            p.ValueText = a.ValueText;\r\n            p.Tag = a.Tag;\r\n            action.actualParameters.push(p);\r\n          }\r\n        }\r\n        this.actions.push(action);\r\n      }\r\n    }\r\n  }\r\n\r\n  @ViewChild('actionlist') actionlist: DatagridComponent;\r\n  @ViewChild('paramlist') paramlist: DatagridComponent;\r\n\r\n  private terminalList = [\r\n    { value: 'app', text: 'ç§»å¨' },\r\n    { value: 'web', text: 'web' },\r\n    { value: 'web,app', text: 'web,ç§»å¨' }\r\n  ];\r\n  actions: CustomizeAciton[] = [];\r\n  curAction: CustomizeAciton;\r\n  columns = [\r\n    { field: 'code', width: 100, title: 'ç¼å·' },\r\n    { field: 'name', width: 100, title: 'åç§°' },\r\n    {\r\n      field: 'terminalType', width: 100, title: 'éç¨ç»ç«¯',\r\n      formatter: {\r\n        type: 'enum',\r\n        options: { valueField: 'value', textField: 'text', data: this.terminalList }\r\n      },\r\n    },\r\n    // {\r\n    //   field: 'enable', width: 100, title: 'æ¯å¦å¯ç¨',\r\n    //   editor: { type: EditorTypes.SWITCH, options: {} },\r\n    //   formatter: { type: 'boolean', options: { trueText: 'æ¯', falseText: 'å¦' } }\r\n    // }\r\n  ];\r\n  paramColumns = [\r\n    { field: 'Name', width: 50, title: 'ç¼å·' },\r\n    { field: 'ValueText', width: 50, title: 'åç§°' },\r\n    {\r\n      field: 'Value', width: 100, title: 'åæ°å¼',\r\n      editor: {\r\n        type: 'input-group',\r\n        options: {\r\n          groupText: '<i class=\"f-icon f-icon-lookup\"></i>',\r\n          editable: false,\r\n          clickHandle: (e) => {\r\n            e.formControl.setValue(e.instance.value ? e.instance.value : '');\r\n            this.showExprHelp(e);\r\n          },\r\n          clear: (e) => {\r\n            console.log('clear', e);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  ];\r\n  constructor(\r\n    private designerState: ProcessDesignerUIState,\r\n    private expr: ExpressionService,\r\n    private resolver: ComponentFactoryResolver,\r\n    private injector: Injector,\r\n    private modalService: BsModalService,\r\n    private message: MessagerService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n\r\n  }\r\n  ngAfterViewInit() {\r\n    this.loadData();\r\n    // this.actionlist.loadData(this.actions);\r\n    // if (this.actions && this.actions.length > 0) {\r\n    //   this.actionlist.selectRow(this.actions[0].id, true);\r\n    // }\r\n  }\r\n  addActions() {\r\n    const compFactory = this.resolver.resolveComponentFactory(CustomizeActionListComponent);\r\n    const compRef = compFactory.create(this.injector);\r\n    const modalConfig: ModalOptions = {\r\n      title: 'èªå®ä¹å¨ä½éæ©',\r\n      width: 800,\r\n      height: 520,\r\n      showButtons: true,\r\n      buttons: compRef.instance.footer\r\n    };\r\n    const dialog = this.modalService.show(compRef, modalConfig);\r\n    compRef.instance.submit.subscribe((data: CustomizeAciton[]) => {\r\n      if (data && data.length > 0) {\r\n        for (const a of data) {\r\n          const index = this.actions.findIndex(act => act.code === a.code);\r\n          if (index > -1) {\r\n            this.actions.splice(index, 1);\r\n          }\r\n          this.actions.push(a);\r\n        }\r\n        this.loadData();\r\n      }\r\n      dialog.close();\r\n    });\r\n    compRef.instance.cancel.subscribe($event => dialog.close());\r\n  }\r\n  delete() {\r\n    this.actionlist.endCellEdit();\r\n    if (this.actionlist.selectedRow && this.actionlist.selectedRow.data) {\r\n      const i = this.actions.findIndex(d => d.code === this.actionlist.selectedRow.data.code);\r\n      this.actions.splice(i, 1);\r\n      this.loadData();\r\n      // this.actionlist.loadData(this.actions);\r\n      // if (this.actions && this.actions.length > 0) {\r\n      //   this.actionlist.selectRow(this.actions[0].id, true);\r\n      // } else {\r\n      //   this.curAction = null;\r\n      // }\r\n    } else {\r\n      this.message.info('è¯·é¦åéä¸­ä¸æ¡éé¡¹ï¼');\r\n    }\r\n  }\r\n\r\n  clickOK() {\r\n    this.actionlist.endCellEdit();\r\n    this.paramlist && this.paramlist.endCellEdit();\r\n\r\n    const object = { value: this.actions, parameters: null };\r\n    this.submitModal.emit(object);\r\n  }\r\n\r\n  clickCancel() {\r\n    this.closeModal.emit();\r\n  }\r\n  loadData() {\r\n    this.actionlist.loadData(this.actions);\r\n    if (this.actions.length > 0 && (!this.actionlist.selectedRow || !this.actionlist.selectedRow.data)) {\r\n      this.actionlist.selectRow(this.actions[0].id, true);\r\n    } else {\r\n      this.curAction = null;\r\n    }\r\n  }\r\n\r\n  selectChanged(data: any) {\r\n    this.curAction = data.data;\r\n  }\r\n\r\n  showExprHelp(e: any) {\r\n    if (this.designerState.schemas.length > 0) {\r\n      for (const schema of this.designerState.schemas) {\r\n        this.expr.addSchema('Schema', schema);\r\n      }\r\n      if (this.designerState.schemas[0].entityTypes && this.designerState.schemas[0].entityTypes.length > 0) {\r\n        const entityType = this.designerState.schemas[0].entityTypes[0];\r\n        this.expr.addInjectedEntity(entityType.name, 'Schema',\r\n          entityType.name, InjectedType.EntityType);\r\n      }\r\n    }\r\n    const context = new Array();\r\n    if (this.designerState.procInstContext.length > 0) {\r\n      for (const variable of this.designerState.procInstContext) {\r\n        context.push(variable);\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (this.designerState.formalParameterContext.length > 0) {\r\n      for (const variable of this.designerState.formalParameterContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (this.designerState.participantContext.length > 0) {\r\n      for (const variable of this.designerState.participantContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (this.designerState.processVariableContext.length > 0) {\r\n      for (const variable of this.designerState.processVariableContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (context.length > 0) {\r\n      for (const v of context) {\r\n        this.expr.addContext(v);\r\n      }\r\n    }\r\n    // if (e.instance.value) {\r\n    this.expr.addExpressionText(e.instance.value);\r\n    // }\r\n    this.expr.buildExpression().then((expressioninfo: string) => {\r\n      e.formControl.setValue(expressioninfo);\r\n      e.instance.cd.detectChanges();\r\n    });\r\n  }\r\n}\r\n\r\nexport class CustomizeActionConverter implements TypeConverter {\r\n  constructor() { }\r\n\r\n  convertTo(data: any[]): string {\r\n    if (data && data.length > 0) {\r\n      return 'ï¼å·²è®¾ç½®ï¼';\r\n    } else {\r\n      return 'ï¼æªè®¾ç½®ï¼';\r\n    }\r\n  }\r\n}\r\n","import { ProcessDeUtil } from '../../domain/process-de-util';\r\n\r\nexport class ProcessVariable {\r\n    id: string;\r\n    name: string;\r\n    documentation: string;\r\n    basicType: string;\r\n    tag: string;\r\n    value: string;\r\n    valueText: string;\r\n    description: string;\r\n    component: any;\r\n\r\n    constructor() {\r\n        this.id = ProcessDeUtil.GenerateElementId();\r\n        this.basicType = 'String';\r\n    }\r\n}\r\n","import { Component, OnInit, TemplateRef, ViewChild, Input, Output, EventEmitter } from '@angular/core';\r\nimport { VariableSetting } from '../../variable-setting';\r\n\r\n@Component({\r\n  selector: 'lib-constant-edit',\r\n  templateUrl: './constant-edit.component.html',\r\n  styleUrls: ['./constant-edit.component.scss']\r\n})\r\nexport class ConstantEditComponent implements OnInit {\r\n\r\n  @ViewChild('footer') footer: TemplateRef<any>;\r\n\r\n  @Output() closeEmitter = new EventEmitter<any>();\r\n  @Output() submitEmitter = new EventEmitter<string>();\r\n  @Input()\r\n  value: string;\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  clickOK() {\r\n    this.submitEmitter.emit(this.value);\r\n  }\r\n\r\n  clickCancel() {\r\n    this.closeEmitter.emit();\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { ILookupHttpService, LookupGridResult, RemoteParams } from '@farris/ui-lookup';\r\nimport { HttpService } from '@ecp-caf/caf-common';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { map } from 'rxjs/operators';\r\n\r\n@Injectable()\r\nexport class ComponentEditLookUpService implements ILookupHttpService {\r\n    constructor(\r\n        private http: HttpService,\r\n    ) {\r\n    }\r\n\r\n    getData(url: string, params?: RemoteParams): Observable<any> {\r\n        const customData = params.customData;\r\n        const index = params.pageIndex || 1;\r\n        const size = params.pageSize || 20;\r\n        const searchValue = params.searchValue;\r\n        if (customData.helpId) {\r\n            let query = `?helpId=${customData.helpId}&pageIndex=${index}&pageSize=${size}`;\r\n            if (searchValue) {\r\n                query += `&searchValue=${searchValue}`;\r\n            }\r\n            url += query;\r\n            return this.http.get(url);\r\n        }\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpService } from '@ecp-caf/caf-common';\r\nimport { Observable } from 'rxjs/Observable';\r\n\r\n@Injectable()\r\nexport class ComponentEditService {\r\n    constructor(\r\n        private http: HttpService,\r\n    ) {\r\n    }\r\n\r\n    getHelpMetaData(helpId: string, su: string): Observable<any> {\r\n        const url = `/api/runtime/lcm/v1.0/rt-metadatas/${helpId}`;\r\n        return this.http.get(url);\r\n    }\r\n}\r\n","import { ProcessDeUtil } from '../../../../domain/process-de-util';\r\nexport class ComponentEntity {\r\n    Id: string;\r\n    Name: string;\r\n    MetadataId: string;\r\n    ComponentType: string;\r\n    MethodCode: string;\r\n    Execution: string;\r\n    AsyncCallBackType: string;\r\n    Time: string;\r\n    isForCompensation: boolean;\r\n    ActualParameters: Array<ActualParameter>;\r\n    constructor() {\r\n        this.Id = ProcessDeUtil.GenerateElementId();\r\n        this.ActualParameters = new Array();\r\n    }\r\n}\r\nexport class ActualParameter {\r\n    Name: string;\r\n    Value: string;\r\n    ValueText?: string;\r\n    Tag?: string;\r\n    fetchValueMode?: any;\r\n    fetchValueSetting?: any;\r\n}\r\n","import { Component, OnInit, ComponentFactoryResolver, Injector, Input, ViewChild, ElementRef, HostBinding, AfterViewInit, NgZone, TemplateRef, EventEmitter, Output } from '@angular/core';\r\nimport { FormGroup, FormBuilder } from '@angular/forms';\r\nimport { ProcessDesignerUIState } from '../../../../app/process-designer.uistate';\r\nimport { ExpressionService, InjectedType } from '@gsp-svc/expression';\r\nimport { SessionService } from '@ecp-caf/caf-common';\r\nimport { BsModalService } from '@farris/ui-modal';\r\nimport { CommonComponentUiRTService, SelectorResult } from '@gsp-cmp/ccmp-ui';\r\nimport { SelectMetadataRTComponent, Metadata4RefDto, MetadataDto } from '@gsp-lcm/metadatart-selector';\r\nimport { GspComponent } from '@gsp-cmp/common-component';\r\nimport { DataColumn, DatagridComponent } from '@farris/ui-datagrid';\r\nimport { of, forkJoin, Observable } from 'rxjs';\r\nimport { RowEditParam } from '@farris/ui-datagrid/lib/types';\r\nimport { EditorTypes } from '@farris/ui-datagrid-editors';\r\nimport { LookupGridComponent, LookupGridResult, ServerSideToken } from '@farris/ui-lookup';\r\nimport { WebServiceParameter, ParameterFetchValueMode, HelpFetchValueSetting } from '@gsp-cmp/wscmp-models';\r\nimport { ComponentEditLookUpService } from './component-edit-lookup.service';\r\nimport { ComponentEditService } from './component-edit.service';\r\nimport { ComponentEntity, ActualParameter } from './component.entity';\r\nimport { ProcessDeUtil } from '../../../../domain/process-de-util';\r\nimport { MessagerService } from '@farris/ui-messager';\r\n\r\n@Component({\r\n  selector: 'lib-component-edit',\r\n  templateUrl: './component-edit.component.html',\r\n  styleUrls: ['./component-edit.component.scss'],\r\n  providers: [\r\n    ComponentEditService,\r\n    { provide: ServerSideToken, useClass: ComponentEditLookUpService }\r\n  ]\r\n})\r\nexport class ComponentEditComponent implements OnInit, AfterViewInit {\r\n  @HostBinding('class')\r\n  cls = 'farris-main-area flex-column';\r\n\r\n  @ViewChild(DatagridComponent) grid: DatagridComponent;\r\n  @ViewChild(LookupGridComponent) lookup: LookupGridComponent;\r\n\r\n  @ViewChild('footer') footer: TemplateRef<any>;\r\n\r\n  @Output() closeEmitter = new EventEmitter<any>();\r\n  @Output() submitEmitter = new EventEmitter<any>();\r\n\r\n  @ViewChild('inputGroup') inputGroup: ElementRef;\r\n  showClearButton = false;\r\n\r\n  private _component: any = new ComponentEntity();\r\n  @Input()\r\n  set component(cmp: ComponentEntity) {\r\n    if (cmp && cmp.MethodCode) {\r\n      this.service.getHelpMetaData(cmp.MetadataId, '').subscribe(re => {\r\n        const c = JSON.parse(re.content);\r\n        const operation = c.operations.find(o => o.code === cmp.MethodCode);\r\n        if (operation) {\r\n          cmp.ActualParameters = cmp.ActualParameters.map(a => {\r\n            const p = operation.parameters.find(i => i.code === a.Name);\r\n            if (p) {\r\n              return {\r\n                ...a,\r\n                fetchValueMode: p.fetchValueMode,\r\n                fetchValueSetting: p.fetchValueSetting\r\n              };\r\n            } else {\r\n              throw new Error('å½åæä»¶æ¹æ³åæ°ä¸ä¸è´ï¼è¯·æ´æ°ï¼');\r\n            }\r\n          });\r\n          this._component = cmp;\r\n        } else {\r\n          throw new Error('å½åæä»¶å·²ä¸å­å¨æ­¤æ¹æ³ï¼è¯·æ´æ°ï¼');\r\n        }\r\n      });\r\n    } else {\r\n      this._component = new ComponentEntity();\r\n    }\r\n  }\r\n  get component() {\r\n    return this._component;\r\n  }\r\n\r\n  curParameter: ActualParameter;\r\n  columns = [\r\n    { field: 'Name', width: 100, title: 'åæ°å' },\r\n    {\r\n      field: 'Value', width: 100, title: 'åæ°å¼',\r\n      editor: {\r\n        type: 'input-group',\r\n        options: {\r\n          groupText: '<i class=\"f-icon f-icon-lookup\"></i>',\r\n          editable: false,\r\n          clickHandle: (e) => {\r\n            e.formControl.setValue(e.instance.value ? e.instance.value : '');\r\n            this.showExprHelp(e);\r\n          },\r\n          clear: (e) => {\r\n            console.log('clear', e);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  ];\r\n\r\n  helpFields: { idField: string, valueField: string; textField: string } = {\r\n    idField: '',\r\n    valueField: '',\r\n    textField: ''\r\n  };\r\n  dataUri = '/api/runtime/wf/v1.0/dtProcDefs/getHelpData';\r\n  helpId;\r\n  su: string;\r\n  helpCols = [];\r\n  displayType = 'List';\r\n  title = '';\r\n  value: any;\r\n\r\n  cell: any;\r\n  constructor(\r\n    private formBuilder: FormBuilder,\r\n    private designerState: ProcessDesignerUIState,\r\n    private expr: ExpressionService,\r\n    private resolver: ComponentFactoryResolver,\r\n    private injector: Injector,\r\n    private sessionSrc: SessionService,\r\n    private modalService: BsModalService,\r\n    private componentService: CommonComponentUiRTService,\r\n    private ngZone: NgZone,\r\n    private service: ComponentEditService,\r\n    private util: ProcessDeUtil,\r\n    private message: MessagerService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n  ngAfterViewInit(): void {\r\n    this.ngZone.runOutsideAngular(() => {\r\n      this.inputGroup.nativeElement.addEventListener(\r\n        'mouseenter',\r\n        this.onMouseEnter.bind(this)\r\n      );\r\n      this.inputGroup.nativeElement.addEventListener(\r\n        'mouseleave',\r\n        this.onMouseLeave.bind(this)\r\n      );\r\n    });\r\n  }\r\n\r\n  onMouseEnter(event) {\r\n    this.showClearButton = true;\r\n    if (this.showClearButton) {\r\n      this.toggleClearIcon(event, true);\r\n    }\r\n  }\r\n  onMouseLeave(event) {\r\n    this.showClearButton = false;\r\n    this.toggleClearIcon(event, false);\r\n  }\r\n\r\n  private toggleClearIcon(event: any, isShow = false) {\r\n    const str = isShow ? '' : 'none';\r\n    const clearIcon = event.target.querySelector('.input-group-clear');\r\n    if (clearIcon) {\r\n      clearIcon.style.display = str;\r\n    }\r\n  }\r\n\r\n\r\n  clickOK() {\r\n    this.grid.endCellEdit();\r\n    if (this.validator()) {\r\n      this.submitEmitter.emit(this.component);\r\n    } else {\r\n      this.message.info('å°æªéæ©æä»¶æ¹æ³!');\r\n    }\r\n  }\r\n\r\n  clickCancel() {\r\n    this.closeEmitter.emit();\r\n  }\r\n\r\n  private validator() {\r\n    if (!this.component.MethodCode || !this.component.MetadataId) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n  beforeEdit = (param: RowEditParam) => {\r\n    const rowData = param.rowData as any;\r\n    switch (rowData.fetchValueMode) {\r\n      case ParameterFetchValueMode.express:\r\n        param.column.editor = {\r\n          type: 'input-group',\r\n          options: {\r\n            groupText: '<i class=\"f-icon f-icon-lookup\"></i>',\r\n            editable: false,\r\n            clickHandle: (e) => {\r\n              e.formControl.setValue(e.instance.value ? e.instance.value : '');\r\n              this.showExprHelp(e);\r\n            },\r\n            clear: (e) => {\r\n              console.log('clear', e);\r\n            }\r\n          }\r\n        };\r\n        break;\r\n      case ParameterFetchValueMode.none:\r\n        param.column.editor = {\r\n          type: 'input-group',\r\n          options: {\r\n            groupText: '<i class=\"f-icon f-icon-lookup\"></i>',\r\n            editable: false,\r\n            clickHandle: (e) => {\r\n              e.formControl.setValue(e.instance.value ? e.instance.value : '');\r\n              this.showExprHelp(e);\r\n            },\r\n            clear: (e) => {\r\n              console.log('clear', e);\r\n            }\r\n          }\r\n        };\r\n        break;\r\n      case ParameterFetchValueMode.const:\r\n        param.column.editor = { type: EditorTypes.TEXTBOX, options: {} };\r\n        break;\r\n      case ParameterFetchValueMode.enum:\r\n        param.column.editor = { type: EditorTypes.TEXTBOX, options: {} };\r\n        break;\r\n      case ParameterFetchValueMode.help:\r\n        param.column.editor = {\r\n          type: 'input-group',\r\n          options: {\r\n            groupText: '<i class=\"f-icon f-icon-lookup\"></i>',\r\n            editable: false,\r\n            clickHandle: (e) => {\r\n              this.cell = e;\r\n              this.helpId = (rowData.fetchValueSetting as HelpFetchValueSetting).helpId;\r\n              this.su = (rowData.fetchValueSetting as HelpFetchValueSetting).serviceUnit;\r\n              this.getHelpInfo().subscribe(re => {\r\n                console.log(re);\r\n                const meta = re;\r\n                const help = JSON.parse(meta.content) as any;\r\n                this.helpCols = help.dataSource.columns;\r\n                this.displayType = help.displayType;\r\n                this.helpFields = {\r\n                  idField: help.idField,\r\n                  valueField: help.valueField,\r\n                  textField: help.textField\r\n                };\r\n                this.lookup.onClear();\r\n                this.lookup.showDialog();\r\n              }, err => {\r\n                  this.message.error('å¸®å©åæ°æ®ä¸å­å¨ï¼è¯·èç³»ç³»ç»ç®¡çåæ¥çåå ï¼');\r\n              });\r\n            },\r\n            clear: (e) => {\r\n              console.log('clear', e);\r\n            }\r\n          }\r\n        };\r\n        break;\r\n    }\r\n    return of(true);\r\n  }\r\n  afterEdit = (rowIndex: number, rowData: any, column?: DataColumn) => {\r\n    return of(true);\r\n  }\r\n\r\n  clear() {\r\n    this.component = new ComponentEntity();\r\n  }\r\n  selectComponent() {\r\n    const compFactory = this.resolver.resolveComponentFactory(SelectMetadataRTComponent);\r\n    const compRef = compFactory.create(this.injector);\r\n    compRef.instance.typeList = 'WebServiceComponent'; // ç®ååªè½æ ¹æ®åæ°æ®ç±»åè¿æ»¤ï¼åç»­æ·»å æ ç­¾è¿æ»¤\r\n    compRef.instance.selectedMetadata.subscribe(($event: Metadata4RefDto) => {\r\n      try {\r\n        const meta: MetadataDto = $event.metadata;\r\n        this.openComponentSelectorNew(meta.id, this.sessionSrc.getUserSessionId());\r\n      } catch {\r\n        console.log('$event', $event);\r\n        throw new Error('è·åè§£ææä»¶åºé' + $event);\r\n      }\r\n    });\r\n\r\n    const modalConfig = {\r\n      title: 'æä»¶éæ©',\r\n      width: 980,\r\n      height: 548,\r\n      showButtons: false\r\n    };\r\n    const dialog = this.modalService.show(compRef, modalConfig);\r\n    compRef.instance.closeModalEmitter.subscribe($event => dialog.close());\r\n  }\r\n  private openComponentSelectorNew(metadataId: string, sessionId: string) {\r\n    this.componentService.openSelector(metadataId, sessionId).subscribe(\r\n      (selectorResult: SelectorResult) => {\r\n        selectorResult.confirmEvent.subscribe(\r\n          (result: GspComponent) => {\r\n            if (result) {\r\n              this.component.Name = result.name;\r\n              this.component.MetadataId = result.id;\r\n              this.component.MethodCode = result.operations[0].code;\r\n              // this.component.methodName = result.operations[0].name;\r\n              this.component.ActualParameters = [];\r\n\r\n              if (result.operations[0].parameters && result.operations[0].parameters.length > 0) {\r\n                this.component.ActualParameters = result.operations[0].parameters\r\n                  .map((p: WebServiceParameter) => (\r\n                    {\r\n                      Name: p.code, Value: '', Tag: p.fetchValueMode.indexOf('express,none') > -1 ? 'expression' : 'constant',\r\n                      fetchValueMode: p.fetchValueMode,\r\n                      fetchValueSetting: p.fetchValueSetting\r\n                    }));\r\n              }\r\n            }\r\n          });\r\n      });\r\n  }\r\n  showExprHelp(e: any) {\r\n    if (this.designerState.schemas.length > 0) {\r\n      for (const schema of this.designerState.schemas) {\r\n        this.expr.addSchema('Schema', schema);\r\n      }\r\n      if (this.designerState.schemas[0].entityTypes && this.designerState.schemas[0].entityTypes.length > 0) {\r\n        const entityType = this.designerState.schemas[0].entityTypes[0];\r\n        this.expr.addInjectedEntity(entityType.name, 'Schema',\r\n          entityType.name, InjectedType.EntityType);\r\n      }\r\n    }\r\n    const context = new Array();\r\n    if (this.designerState.procInstContext.length > 0) {\r\n      for (const variable of this.designerState.procInstContext) {\r\n        context.push(variable);\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (this.designerState.formalParameterContext.length > 0) {\r\n      for (const variable of this.designerState.formalParameterContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (this.designerState.participantContext.length > 0) {\r\n      for (const variable of this.designerState.participantContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (this.designerState.processVariableContext.length > 0) {\r\n      for (const variable of this.designerState.processVariableContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (context.length > 0) {\r\n      for (const v of context) {\r\n        this.expr.addContext(v);\r\n      }\r\n    }\r\n    this.expr.addExpressionText(e.instance.value);\r\n    this.expr.buildExpression().then((d: string) => {\r\n        e.formControl.setValue(d);\r\n        e.instance.cd.detectChanges();\r\n    });\r\n  }\r\n\r\n  private getHelpInfo(): Observable<any> {\r\n    return this.service.getHelpMetaData(this.helpId, this.su);\r\n  }\r\n\r\n  dictPicking = () => {\r\n    return of({\r\n      showDialog: true, data: {\r\n        helpId: this.helpId\r\n      }\r\n    });\r\n  }\r\n  dictPicked = (rowData) => {\r\n    if (this.cell) {\r\n      console.log(rowData);\r\n      this.cell.formControl.setValue(this.util.getValue(rowData, this.helpFields.valueField));\r\n      this.cell.instance.cd.detectChanges();\r\n      return of(true);\r\n    }\r\n  }\r\n}\r\n","import { Component, OnInit, HostBinding, EventEmitter, Output, Input, ViewChild, TemplateRef, Injector, ComponentFactoryResolver } from '@angular/core';\r\nimport { TypeConverter } from '@farris/ui-property-panel';\r\nimport { ProcessVariable } from './process-variable.entity';\r\nimport { EditorTypes } from '@farris/ui-datagrid-editors';\r\nimport { DatagridComponent } from '@farris/ui-datagrid';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { BsModalService } from '@farris/ui-modal';\r\nimport { ConstantEditComponent } from '../variable-setting/views/constant-edit/constant-edit.component';\r\nimport { ProcessDesignerUIState } from '../../app/process-designer.uistate';\r\nimport { ExprEditMode, ExpressionService, InjectedType } from '@gsp-svc/expression';\r\nimport { ComponentEditComponent } from '../variable-setting/views/component-edit/component-edit.component';\r\nimport { RowEditParam, DataColumn } from '@farris/ui-datagrid/lib/types';\r\nimport { of } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'lib-process-variables',\r\n  templateUrl: './process-variables.component.html',\r\n  styleUrls: ['./process-variables.component.scss']\r\n})\r\nexport class ProcessVariablesComponent implements OnInit {\r\n  @HostBinding('class')\r\n  cls = 'farris-main-area flex-column';\r\n\r\n  @Input() variableSetting = false;\r\n  @Output() closeModal = new EventEmitter<any>();\r\n  @Output() submitModal = new EventEmitter<any>();\r\n  @Output() variableSetEmitter = new EventEmitter<any>();\r\n\r\n  @Input() value: Array<ProcessVariable> = new Array();\r\n  @Input() editorParams: any = {};\r\n  @ViewChild('iconSelectFooter') modalFooter: TemplateRef<any>;\r\n  @ViewChild('grid') grid: DatagridComponent;\r\n\r\n  private basicTypes = [\r\n    { value: 'String', text: 'å­ç¬¦' },\r\n    { value: 'Integer', text: 'æ´å½¢' },\r\n    { value: 'Decimal', text: 'å°æ°' },\r\n    { value: 'Boolean', text: 'å¸å°' },\r\n    // { value: 'DateTime', text: 'æ¥æ' }\r\n  ];\r\n\r\n  private tags = [\r\n    { value: 'constant', text: 'å¸¸é' },\r\n    { value: 'expression', text: 'è¡¨è¾¾å¼' },\r\n    { value: 'component', text: 'æä»¶' }\r\n  ];\r\n\r\n  columns = [\r\n    {\r\n      field: 'name', width: 80, title: 'åéç¼å·', sortable: true,\r\n      editor: { type: EditorTypes.TEXTBOX, options: {} },\r\n      validators: [\r\n        { type: 'required', messager: 'å¿å¡«' }\r\n      ]\r\n    },\r\n    {\r\n      field: 'documentation', width: 80, title: 'åéåç§°', sortable: true,\r\n      editor: { type: EditorTypes.TEXTBOX, options: {} },\r\n      validators: [\r\n        { type: 'required', messager: 'å¿å¡«' }\r\n      ]\r\n    },\r\n    {\r\n      field: 'basicType', width: 60, title: 'åéç±»å', sortable: true,\r\n      formatter: {\r\n        type: 'enum',\r\n        options: { valueField: 'value', textField: 'text', data: this.basicTypes }\r\n      },\r\n      editor: {\r\n        type: EditorTypes.COMBOLIST,\r\n        options: { valueField: 'value', textField: 'text', data: this.basicTypes, idField: 'value', panelHeight: 'auto', showClear: false }\r\n      },\r\n      validators: [\r\n        { type: 'required', messager: 'å¿å¡«' }\r\n      ]\r\n    }, {\r\n      field: 'description', width: 100, title: 'æè¿°', showTips: true,\r\n      editor: { type: EditorTypes.TEXTBOX, options: {} },\r\n    }, {\r\n      field: 'tag', width: 60, title: 'åå§å¼ç±»å', sortable: true,\r\n      formatter: {\r\n        type: 'enum',\r\n        options: { valueField: 'value', textField: 'text', data: this.tags }\r\n      },\r\n      editor: {\r\n        type: EditorTypes.COMBOLIST,\r\n        options: {\r\n          valueField: 'value', textField: 'text', data: this.tags, idField: 'value', panelHeight: 'auto',\r\n          selectChange: (e) => {\r\n            this.value = this.value.map(v => {\r\n              if (v.id === e.rowId) {\r\n                v.value = null;\r\n                v.valueText = null;\r\n                if (v.component) {\r\n                  v.component = null;\r\n                }\r\n                return v;\r\n              } else {\r\n                return v;\r\n              }\r\n            });\r\n          },\r\n          clear: (e) => {\r\n            this.value = this.value.map(v => {\r\n              if (v.id === e.rowId) {\r\n                v.value = null;\r\n                v.valueText = null;\r\n                if (v.component) {\r\n                  v.component = null;\r\n                }\r\n                return v;\r\n              } else {\r\n                return v;\r\n              }\r\n            });\r\n          }\r\n        }\r\n      }\r\n    }, {\r\n      field: 'valueText', width: 120, title: 'åå§å¼', showTips: true,\r\n      editor: { type: EditorTypes.TEXTBOX, options: {} }\r\n    }\r\n  ];\r\n\r\n  modalConfig = {\r\n    title: 'æµç¨åé',\r\n    width: 1070,\r\n    height: 510,\r\n    showButtons: true\r\n  };\r\n\r\n  constructor(\r\n    private message: MessagerService,\r\n    private resolver: ComponentFactoryResolver,\r\n    private injector: Injector,\r\n    private modalService: BsModalService,\r\n    private uistate: ProcessDesignerUIState,\r\n    private expr: ExpressionService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    if (this.variableSetting) {\r\n      this.columns = this.columns.filter(c => c.field !== 'tag'\r\n        && c.field !== 'valueText' && c.field !== 'description'\r\n      );\r\n    }\r\n  }\r\n\r\n  add() {\r\n    const variable = new ProcessVariable();\r\n    this.value = this.value.concat([variable]);\r\n  }\r\n\r\n  delete() {\r\n    this.grid.endCellEdit();\r\n    const selected = this.grid.selectedRow;\r\n    if (!selected) {\r\n      this.message.info('å°æªéä¸­æµç¨åéï¼');\r\n      return;\r\n    }\r\n    this.value = this.value.filter(v => v.id !== selected.data.id);\r\n  }\r\n\r\n  clickOK() {\r\n    if (this.variableSetting) {\r\n      const selecteds = this.grid.checkeds;\r\n      if (selecteds.length > 0) {\r\n        this.variableSetEmitter.emit(selecteds);\r\n      } else {\r\n        this.message.info('å°æªéä¸­æµç¨åéï¼');\r\n      }\r\n    } else {\r\n      this.grid.endCellEdit();\r\n      if (this.validator()) {\r\n        const object = { value: this.value, parameters: null };\r\n        this.submitModal.emit(object);\r\n      }\r\n    }\r\n  }\r\n\r\n  clickCancel() {\r\n    this.closeModal.emit();\r\n  }\r\n  beforeEdit = (param: RowEditParam) => {\r\n    const rowData = param.rowData as any;\r\n    const column = param.column;\r\n    if (column.field === 'valueText') {\r\n      if (!(rowData as ProcessVariable).tag) {\r\n        return of(false);\r\n      }\r\n      if ((rowData as ProcessVariable).tag === this.tags[0].value) {\r\n        param.column.editor = { type: EditorTypes.TEXTBOX, options: {} };\r\n      } else {\r\n        param.column.editor = {\r\n          type: 'input-group',\r\n          options: {\r\n            groupText: '<i class=\"f-icon f-icon-lookup\"></i>',\r\n            editable: false,\r\n            showClear: false,\r\n            clickHandle: (e) => {\r\n              e.formControl.setValue(e.instance.value ? e.instance.value : '');\r\n              this.valueEdit(e);\r\n            },\r\n            clear: (e) => {\r\n              console.log('clear', e);\r\n            }\r\n          }\r\n        };\r\n      }\r\n    }\r\n    return of(true);\r\n  }\r\n\r\n  endEdit(data: any) {\r\n    if (data.column.field === 'valueText' && data.rowData.tag === this.tags[0].value) {\r\n      data.rowData.value = data.rowData.valueText;\r\n    }\r\n  }\r\n  valueEdit(e: any) {\r\n    const rowdata: ProcessVariable = e.rowData;\r\n    switch (rowdata.tag) {\r\n      case this.tags[0].value:\r\n        this.editConstant(e);\r\n        break;\r\n      case this.tags[1].value:\r\n        this.editExpression(e);\r\n        break;\r\n      case this.tags[2].value:\r\n        this.editComponent(e);\r\n        break;\r\n    }\r\n  }\r\n  private editConstant(e: any) {\r\n    const data: ProcessVariable = e.rowData;\r\n    let dialog: any;\r\n    const compFactory = this.resolver.resolveComponentFactory(ConstantEditComponent);\r\n    const compRef = compFactory.create(this.injector);\r\n    compRef.instance.value = data.value;\r\n    compRef.instance.submitEmitter.subscribe((re: string) => {\r\n      e.formControl.setValue(re);\r\n      e.instance.cd.detectChanges();\r\n      data.value = re;\r\n      dialog.close();\r\n    });\r\n    compRef.instance.closeEmitter.subscribe(re => {\r\n      dialog.close();\r\n    });\r\n    const modalConfig = {\r\n      title: 'å¸¸é',\r\n      width: 340,\r\n      height: 280,\r\n      showButtons: true,\r\n      buttons: compRef.instance.footer\r\n    };\r\n    dialog = this.modalService.show(compRef, modalConfig);\r\n  }\r\n\r\n  private editExpression(e: any) {\r\n    const data: ProcessVariable = e.rowData;\r\n    if (this.uistate.schemas.length > 0) {\r\n      for (const schema of this.uistate.schemas) {\r\n        this.expr.addSchema('Schema', schema);\r\n      }\r\n      if (this.uistate.schemas[0].entityTypes && this.uistate.schemas[0].entityTypes.length > 0) {\r\n        const entityType = this.uistate.schemas[0].entityTypes[0];\r\n        this.expr.addInjectedEntity(entityType.name, 'Schema',\r\n          entityType.name, InjectedType.EntityType);\r\n      }\r\n    }\r\n    const context = new Array();\r\n    if (this.uistate.procInstContext.length > 0) {\r\n      for (const variable of this.uistate.procInstContext) {\r\n        context.push(variable);\r\n      }\r\n    }\r\n    if (this.uistate.formalParameterContext.length > 0) {\r\n      for (const variable of this.uistate.formalParameterContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (this.uistate.participantContext.length > 0) {\r\n      for (const variable of this.uistate.participantContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (this.uistate.processVariableContext.length > 0) {\r\n      for (const variable of this.uistate.processVariableContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (context.length > 0) {\r\n      for (const v of context) {\r\n        this.expr.addContext(v);\r\n      }\r\n    }\r\n    this.expr.setEditPattern(ExprEditMode.Advanced); // è¡¨è¾¾å¼å±ç°æ¨¡å¼ï¼é»è®¤é«çº§ç\r\n    this.expr.addExpressionText(data.value);\r\n    this.expr.buildExpression().then((re: string) => {\r\n      e.formControl.setValue(re);\r\n      e.instance.cd.detectChanges();\r\n      data.value = re;\r\n    });\r\n  }\r\n\r\n  private editComponent(e: any) {\r\n    const data: ProcessVariable = e.rowData;\r\n    let dialog: any;\r\n    const compFactory = this.resolver.resolveComponentFactory(ComponentEditComponent);\r\n    const compRef = compFactory.create(this.injector);\r\n    compRef.instance.component = data.component;\r\n    compRef.instance.submitEmitter.subscribe((re: any) => {\r\n      e.formControl.setValue(re.Name + '-' + re.MethodCode);\r\n      e.instance.cd.detectChanges();\r\n      data.value = re.Id;\r\n      data.component = re;\r\n      dialog.close();\r\n    });\r\n    compRef.instance.closeEmitter.subscribe(re => {\r\n      dialog.close();\r\n    });\r\n    const modalConfig = {\r\n      title: 'æä»¶',\r\n      width: 800,\r\n      height: 515,\r\n      showButtons: true,\r\n      buttons: compRef.instance.footer\r\n    };\r\n    dialog = this.modalService.show(compRef, modalConfig);\r\n  }\r\n\r\n  private validator() {\r\n    for (const item of this.value) {\r\n      if (!item.name) {\r\n        this.message.warning('åéç¼å·ä¸åè®¸ä¸ºç©ºï¼');\r\n        return false;\r\n      }\r\n      if (!item.documentation) {\r\n        this.message.warning('åéåç§°ä¸åè®¸ä¸ºç©ºï¼');\r\n        return false;\r\n      }\r\n      if (!this.IsMatchVariableNameRules(item.name)) {\r\n        this.message.warning('åéç¼å·åªè½åå«å­æ¯ãæ°å­åä¸åçº¿ï¼ä¸ä¸è½ä»¥æ°å­å¼å¤´ï¼');\r\n        return false;\r\n      }\r\n    }\r\n    if (this.value.length > 1) {\r\n      for (let i = 0; i < this.value.length; i++) {\r\n        const code1 = this.value[i].name;\r\n        for (let j = i + 1; j < this.value.length; j++) {\r\n          const code2 = this.value[j].name;\r\n\r\n          if (code1 === code2) {\r\n            this.message.warning(`æµç¨åéç¼å·ä¸åè®¸éå¤ï¼`);\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n  private IsMatchVariableNameRules(str: string) {\r\n    const Regx = /^[a-zA-Z_][a-zA-Z_0-9]{0,}/;\r\n    if (Regx.test(str)) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n}\r\n\r\nexport class ProcessVariablesConverter implements TypeConverter {\r\n  constructor() { }\r\n\r\n  convertTo(data: any[]): string {\r\n    if (data && data.length > 0) {\r\n      return 'ï¼å·²è®¾ç½®ï¼';\r\n    } else {\r\n      return 'ï¼æªè®¾ç½®ï¼';\r\n    }\r\n  }\r\n}\r\n","import { ProcessDeUtil } from '../../domain/process-de-util';\r\n\r\nexport class TimeLimitInfo {\r\n    tag: string;\r\n\r\n    /**\r\n     * æ¯å¦å¯ç¨\r\n     */\r\n    enable: boolean;\r\n\r\n    /**\r\n     * éå®æ¶é¿\r\n     */\r\n    dueTime: string;\r\n\r\n    /**\r\n     * æ¶é´åä½\r\n     */\r\n    timeUnit: string;\r\n\r\n    expireOperations: Array<ExpireOperation>;\r\n\r\n    constructor() {\r\n        this.tag = 'constant';\r\n        this.enable = false;\r\n        this.timeUnit = 'day';\r\n        this.expireOperations = new Array();\r\n    }\r\n}\r\n\r\nexport class ExpireOperation {\r\n    id: string;\r\n    /**\r\n     * æéæ§å¶ç±»å\r\n     */\r\n    durationType: string;\r\n\r\n    /**\r\n     * ä»»å¡æé\r\n     */\r\n    timeDuration: number;\r\n\r\n    /**\r\n     * æ¶é´åä½\r\n     */\r\n    timeUnit: string;\r\n\r\n    /**\r\n     * æä½ç±»ååç§°\r\n     */\r\n    operationTypeName: string;\r\n\r\n    constructor() {\r\n        this.id = ProcessDeUtil.GenerateElementId();\r\n        this.durationType = 'BeforeDuration';\r\n        this.timeDuration = 0;\r\n        this.timeUnit = 'day';\r\n        // é»è®¤æä½ç±»åæ¯åéé¢è­¦æ¶æ¯\r\n        this.operationTypeName = 'SendMessageExpireOperation';\r\n    }\r\n}\r\n\r\n/**\r\n * åéé¢è­¦ä¿¡æ¯æ¹å¼\r\n */\r\nexport class SendMessage extends ExpireOperation{\r\n    /**\r\n     * é¢è­¦ä¿¡æ¯åå®¹\r\n     */\r\n    message: string;\r\n\r\n    /**\r\n     * åéé¢è­¦ä¿¡æ¯ç±»å\r\n     */\r\n    sendType: string;\r\n\r\n    /**\r\n     * é¢è­¦ä¿¡æ¯ä¸»é¢\r\n     */\r\n    subject: string;\r\n\r\n    /**\r\n     * æ¶æ¯æ¥æ¶äºº\r\n     * ç¨æ·IDs\r\n     */\r\n    receiver?: string;\r\n\r\n    /**\r\n     * æ¶æ¯æ¥æ¶äººæ¾ç¤º\r\n     */\r\n    receiverText?: string;\r\n\r\n    /**\r\n     * å¯ç¨å¾ªç¯é¢è­¦\r\n     */\r\n    cycleEnable: boolean;\r\n\r\n    /**\r\n     * å¾ªç¯é¢è­¦æ¶é´é´é\r\n     */\r\n    cycleTime: string;\r\n\r\n    /**\r\n     * å¾ªç¯é¢è­¦æ¶é´é´éåä½\r\n     */\r\n    cycleTimeUnit: string;\r\n\r\n    constructor(location) {\r\n      super();\r\n      this.cycleEnable = false;\r\n      this.cycleTimeUnit = 'day';\r\n      this.receiver = location === 'activity' ? 'workItemParticipant' : 'procInstCreator';\r\n      this.receiverText = location === 'activity' ? 'å½åèç¹åçäºº' : 'æµç¨åèµ·äºº';\r\n      this.subject = 'è¶æ¶é¢è­¦';\r\n      this.message = location === 'activity' ? 'æ¨æä¸æ¡å¾åæ¶æ¯å³å°è¶æ¶ã' : 'æ¨æä¸æ¡æ¶æ¯å³å°è¶æ¶';\r\n    }\r\n}\r\n\r\nexport class AutoHandle extends ExpireOperation {\r\n  /**\r\n   * åçç±»åï¼éè¿é©³åå¦å³ç­ç­\r\n   */\r\n  autoHandleType: string;\r\n\r\n  /**\r\n   * åçæè§\r\n   */\r\n  message: string;\r\n\r\n  constructor(type: string) {\r\n    super();\r\n    this.autoHandleType = type;\r\n    this.message = 'åæ';\r\n  }\r\n}\r\n","import { Component, OnInit, Injector, ViewChild, TemplateRef, Input, Output, EventEmitter } from '@angular/core';\r\nimport {ExpireOperation, SendMessage} from '../time-limit-control.entity';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { ProcessDesignerUIState } from '../../../app/process-designer.uistate';\r\n\r\n@Component({\r\n  selector: 'lib-send-message-operation',\r\n  templateUrl: './send-message-operation.component.html',\r\n  styleUrls: ['./send-message-operation.component.scss']\r\n})\r\nexport class SendMessageOperationComponent implements OnInit {\r\n\r\n  @ViewChild('footer') footer: TemplateRef<any>;\r\n  @Input()\r\n  set value(info: SendMessage) {\r\n    this.operation = Object.assign({}, info);\r\n    if (this.operation.sendType === undefined) {\r\n      const sendMessage = new SendMessage(this.location);\r\n      this.operation.cycleEnable = sendMessage.cycleEnable;\r\n      this.operation.cycleTimeUnit = sendMessage.cycleTimeUnit;\r\n      this.operation.receiver = sendMessage.receiver;\r\n      this.operation.subject = sendMessage.subject;\r\n      this.operation.message = sendMessage.message;\r\n    }\r\n    if (this.operation.receiver && this.operation.receiver.length > 0) {\r\n      let array = this.operation.receiver.split(',');\r\n      if (array.indexOf('workItemParticipant') > -1) {\r\n        this.receiverVari = 'workItemParticipant';\r\n        this.activityReceiverVar += 'workItemParticipant,';\r\n      }\r\n      if (array.indexOf('procInstCreator') > -1) {\r\n        this.receiverVari = 'procInstCreator';\r\n        this.activityReceiverVar += 'procInstCreator,';\r\n      }\r\n      if (array.indexOf('preActExecutors') > -1){\r\n        this.activityReceiverVar += 'preActExecutors,';\r\n      }\r\n      if(this.activityReceiverVar.length > 0){\r\n        this.activityReceiverVar = this.activityReceiverVar.substring(0,this.activityReceiverVar.length-1);\r\n      }\r\n      if (array.length > 0) {\r\n        array = array.filter(a => a !== 'procInstCreator');\r\n        this.bindingData.id = '';\r\n        for (const r of array) {\r\n          this.bindingData.id += r + ',';\r\n        }\r\n        if (this.bindingData.id) {\r\n          this.bindingData.id = this.bindingData.id.substring(0, this.bindingData.id.length - 1);\r\n        }\r\n      }\r\n    }\r\n    if (this.operation.receiverText && this.operation.receiverText.length > 0) {\r\n      let array = this.operation.receiverText.split(',');\r\n      if (array.length > 0) {\r\n        array = array.filter(a => a !== 'æµç¨åèµ·äºº');\r\n        this.bindingData.name = '';\r\n        for (const r of array) {\r\n          this.bindingData.name += r + ',';\r\n        }\r\n        if (this.bindingData.name) {\r\n          this.bindingData.name = this.bindingData.name.substring(0, this.bindingData.name.length - 1);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  get value() {\r\n    return this.operation;\r\n  }\r\n\r\n  // operation: ExpireOperation = new ExpireOperation();\r\n  operation: SendMessage = new SendMessage('activity');\r\n  @Output() closeEmitter = new EventEmitter<any>();\r\n  @Output() submitEmitter = new EventEmitter<ExpireOperation>();\r\n\r\n  typeGroup = this.uistate.messageChannels.map(m => ({ value: m.code, name: m.name }));\r\n\r\n  receiverVariables = [\r\n    { value: 'procInstCreator', name: 'æµç¨åèµ·äºº' }\r\n  ];\r\n  activityReceiverVariables = [\r\n    { value: 'workItemParticipant', name: 'å½åèç¹åçäºº' },\r\n    { value: 'procInstCreator', name: 'æµç¨åèµ·äºº' },\r\n    { value: 'preActExecutors', name: 'ä¸ä¸èç¹åçäºº' }\r\n  ];\r\n\r\n  placeholder = '';\r\n  placeholder2 = '';\r\n\r\n  parser = (val: string | number) => {\r\n    // console.log(val);\r\n    return Number(val);\r\n  }\r\n\r\n  timeUnitCollection = [\r\n    { value: 'day', text: 'å¤©' },\r\n    { value: 'hour', text: 'æ¶' },\r\n    { value: 'minute', text: 'å' }\r\n  ];\r\n\r\n  location: 'activity' | 'process' = 'activity';\r\n\r\n  receiverVari: string;\r\n\r\n  activityReceiverVar: string = '';\r\n\r\n  bindingData: { id?, name?} = {};\r\n\r\n  constructor(\r\n    private injector: Injector,\r\n    private message: MessagerService,\r\n    private uistate: ProcessDesignerUIState\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  clickOK() {\r\n    this.operation.cycleTime += '';\r\n    if (this.location === 'process') {\r\n      this.setReceiver();\r\n    }\r\n    if(this.location === 'activity') {\r\n      this.setActivityReceiver()\r\n    }\r\n    if (this.validator()) {\r\n      this.submitEmitter.emit(this.operation);\r\n    }\r\n  }\r\n\r\n  clickCancel() {\r\n    this.closeEmitter.emit();\r\n  }\r\n\r\n  clear() {\r\n    this.bindingData = {};\r\n  }\r\n\r\n  private setReceiver() {\r\n    let receiver = '';\r\n    let receiverText = '';\r\n    if (this.receiverVari) {\r\n      receiver += this.receiverVari + ',';\r\n      const array = this.receiverVari.split(',');\r\n      if (array.length > 0) {\r\n        for (const a of array) {\r\n          const t = this.receiverVariables.find(v => v.value === a).name;\r\n          receiverText += t + ',';\r\n        }\r\n      }\r\n    }\r\n    if (this.bindingData.id) {\r\n      receiver += this.bindingData.id + ',';\r\n      receiverText += this.bindingData.name + ',';\r\n    }\r\n    if (receiver) {\r\n      receiver = receiver.substring(0, receiver.length - 1);\r\n    }\r\n    if (receiverText) {\r\n      receiverText = receiverText.substring(0, receiverText.length - 1);\r\n    }\r\n    this.operation.receiver = receiver;\r\n    this.operation.receiverText = receiverText;\r\n  }\r\n\r\n  setActivityReceiver(){\r\n    let receiver = '';\r\n    if (this.activityReceiverVar) {\r\n      receiver += this.activityReceiverVar + ',';\r\n    }\r\n    if (receiver) {\r\n      receiver = receiver.substring(0, receiver.length - 1);\r\n    }\r\n    this.operation.receiver = receiver;\r\n  }\r\n  private validator(): boolean {\r\n    if (!this.operation.sendType) {\r\n      this.message.info('åéæ¹å¼ä¸åè®¸ä¸ºç©ºï¼');\r\n      return false;\r\n    }\r\n    if (!this.operation.subject) {\r\n      this.message.info('æ¶æ¯ä¸»é¢ä¸åè®¸ä¸ºç©ºï¼');\r\n      return false;\r\n    }\r\n    if (!this.operation.message) {\r\n      this.message.info('æ¶æ¯åå®¹ä¸åè®¸ä¸ºç©ºï¼');\r\n      return false;\r\n    }\r\n    if (!this.operation.receiver) {\r\n      this.message.info('æ¥æ¶äººä¸åè®¸ä¸ºç©ºï¼');\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n}\r\n","import { Component, EventEmitter, Input, OnInit, Output, TemplateRef, ViewChild } from '@angular/core';\r\nimport { AutoHandle, ExpireOperation } from \"../time-limit-control.entity\";\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { ProcessDesignerUIState } from '../../../app/process-designer.uistate';\r\n\r\n@Component({\r\n  selector: 'lib-auto-handle-operation',\r\n  templateUrl: './auto-handle-operation.component.html',\r\n  styleUrls: ['./auto-handle-operation.component.css']\r\n})\r\nexport class AutoHandleOperationComponent implements OnInit {\r\n\r\n  @ViewChild('footer') footer: TemplateRef<any>;\r\n  @Input()\r\n  set value(info: AutoHandle) {\r\n    this.operation = Object.assign({}, info);\r\n    if (this.operation.autoHandleType === undefined) {\r\n      const autoHandle = new AutoHandle(this.autoHandleType[0].value);\r\n      this.operation.autoHandleType = autoHandle.autoHandleType;\r\n      this.operation.message = autoHandle.message;\r\n    }\r\n  }\r\n\r\n  get value() {\r\n    return this.operation;\r\n  }\r\n\r\n  placeholder = '';\r\n  operation: AutoHandle = new AutoHandle('Pass');\r\n  @Output() submitEmitter = new EventEmitter<ExpireOperation>();\r\n  @Output() closeEmitter = new EventEmitter<any>();\r\n\r\n  autoHandleType = [\r\n    // { value: 'autoPass', text: 'èªå¨éè¿' },\r\n    // { value: 'autoBack', text: 'èªå¨é©³å' }\r\n  ];\r\n\r\n  constructor(\r\n    private message: MessagerService,\r\n    public uiState: ProcessDesignerUIState,\r\n  ) {\r\n    for(const item of this.uiState.propertyData.ApprovalItems) {\r\n      this.autoHandleType.push({value: item.Value,text: item.Text});\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  clickOK() {\r\n    if (this.validator()) {\r\n      this.submitEmitter.emit(this.operation);\r\n    }\r\n  }\r\n\r\n  clickCancel() {\r\n    this.closeEmitter.emit();\r\n  }\r\n\r\n  private validator(): boolean {\r\n    if (!this.operation.message) {\r\n      this.message.info('èªå¨åçæè§ä¸åè®¸ä¸ºç©ºï¼');\r\n      return false;\r\n    }\r\n    if (!this.operation.autoHandleType) {\r\n      this.message.info('èªå¨åçä¸åè®¸ä¸ºç©ºï¼');\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n}\r\n","import { Component, OnInit, HostBinding, Output, EventEmitter, Input, ViewChild, TemplateRef, Injector, ComponentFactoryResolver } from '@angular/core';\r\nimport { TypeConverter } from '@farris/ui-property-panel';\r\nimport { BsModalService } from '@farris/ui-modal';\r\nimport { SendMessageOperationComponent } from './send-message-operation/send-message-operation.component';\r\nimport { AutoHandleOperationComponent } from \"./auto-handle-operation/auto-handle-operation.component\";\r\nimport {TimeLimitInfo, ExpireOperation, SendMessage, AutoHandle} from './time-limit-control.entity';\r\nimport { EditorTypes } from '@farris/ui-datagrid-editors';\r\nimport { DatagridComponent } from '@farris/ui-datagrid';\r\nimport { MessagerService } from '@farris/ui-messager';\r\n\r\n@Component({\r\n  selector: 'lib-time-limit-control',\r\n  templateUrl: './time-limit-control.component.html',\r\n  styleUrls: ['./time-limit-control.component.scss']\r\n})\r\nexport class TimeLimitControlComponent implements OnInit {\r\n  @HostBinding('class')\r\n  cls = 'farris-main-area flex-column';\r\n\r\n  @Output() closeModal = new EventEmitter<any>();\r\n  @Output() submitModal = new EventEmitter<any>();\r\n\r\n\r\n  @Input() set value(v: TimeLimitInfo) {\r\n    if (v) {\r\n      this.timeLimitInfo = v;\r\n    } else {\r\n      this.timeLimitInfo = new TimeLimitInfo();\r\n    }\r\n    // å¼å®¹åå²æ°æ®ä¸­çæä½ç±»å\r\n    for (const operation of this.timeLimitInfo.expireOperations) {\r\n      if (operation.operationTypeName === undefined) {\r\n        operation.operationTypeName = 'SendMessageExpireOperation';\r\n      }\r\n    }\r\n  }\r\n  @Input() editorParams: any = {};\r\n  @ViewChild('iconSelectFooter') modalFooter: TemplateRef<any>;\r\n  @ViewChild('cell') cell: TemplateRef<any>;\r\n  @ViewChild('grid') grid: DatagridComponent;\r\n\r\n  modalConfig = {\r\n    title: 'è¶æ¶æä½',\r\n    width: 580,\r\n    height: 460,\r\n    showButtons: true\r\n  };\r\n\r\n  timeLimitInfo: TimeLimitInfo = new TimeLimitInfo();\r\n\r\n  tagCollection = [\r\n    { value: 'constant', text: 'åºå®å¼' },\r\n    { value: 'scope', text: 'æ¶é´èå´' }\r\n  ];\r\n\r\n  timeUnitCollection = [\r\n    { value: 'day', text: 'å¤©' },\r\n    { value: 'hour', text: 'æ¶' },\r\n    { value: 'minute', text: 'å' }\r\n  ];\r\n\r\n  durationTypeCollection = [\r\n    { value: 'BeforeDuration', text: 'å°æä¹å' },\r\n    { value: 'OnDuration', text: 'å°ææ¶' },\r\n    { value: 'AfterDuration', text: 'å°æä¹å' }\r\n  ];\r\n\r\n  activityOperationTypeName = [\r\n    { value : 'SendMessageExpireOperation', text: 'è¶æ¶é¢è­¦'},\r\n    { value : 'AutoHandleExpireOperation', text : 'èªå¨åç' }\r\n  ];\r\n\r\n  processOperationTypeName = [\r\n    { value : 'SendMessageExpireOperation', text: 'è¶æ¶é¢è­¦'}\r\n  ];\r\n\r\n  operationTypeName = [];\r\n\r\n  timeScopeCollection = [\r\n    {value:'curDay',name:'å½å¤©'}\r\n  ]\r\n  timeScopeValue = this.timeScopeCollection[0].value\r\n  cols = [];\r\n\r\n  location: 'activity' | 'process' = 'activity';\r\n\r\n  parser = (val: string | number) => {\r\n    // console.log(val);\r\n    return Number(val);\r\n  }\r\n\r\n  durationTypeChange = (data) => {\r\n    if (data && data.value && data.value.value === this.durationTypeCollection[1].value) {\r\n      const operation = this.timeLimitInfo.expireOperations.find(e => e.id === data.rowData.id);\r\n      operation.timeDuration = 0;\r\n    }\r\n  }\r\n  constructor(\r\n    private resolver: ComponentFactoryResolver,\r\n    private injector: Injector,\r\n    private modalService: BsModalService,\r\n    private message: MessagerService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.location = this.editorParams.location;\r\n    if (this.location === 'activity') {\r\n      this.operationTypeName = this.activityOperationTypeName;\r\n    } else {\r\n      this.operationTypeName = this.processOperationTypeName;\r\n    }\r\n    this.cols = [\r\n      {\r\n        field: 'durationType', width: 80, title: 'æéç±»å',\r\n        formatter: {\r\n          type: 'enum',\r\n          options: { valueField: 'value', textField: 'text', data: this.durationTypeCollection }\r\n        },\r\n        editor: {\r\n          type: EditorTypes.COMBOLIST,\r\n          options: {\r\n            valueField: 'value', textField: 'text', data: this.durationTypeCollection, idField: 'value', panelHeight: 'auto',\r\n            valueChange: this.durationTypeChange, showClear: false\r\n          }\r\n        },\r\n        validators: [\r\n          { type: 'required', messager: 'å¿å¡«' }\r\n        ]\r\n      },\r\n      {\r\n        field: 'timeDuration', width: 60, title: 'æ¶é¿',\r\n        editor: {\r\n          type: EditorTypes.NUMBERBOX, options: { min: 0},\r\n        },\r\n        validators: [\r\n          { type: 'required', messager: 'å¿å¡«' }\r\n        ]\r\n      },\r\n      {\r\n        field: 'timeUnit', width: 60, title: 'åä½',\r\n        formatter: {\r\n          type: 'enum',\r\n          options: { valueField: 'value', textField: 'text', data: this.timeUnitCollection }\r\n        },\r\n        editor: {\r\n          type: EditorTypes.COMBOLIST,\r\n          options: { valueField: 'value', textField: 'text', data: this.timeUnitCollection, idField: 'value', panelHeight: 'auto' }\r\n        },\r\n        validators: [\r\n          { type: 'required', messager: 'å¿å¡«' }\r\n        ]\r\n      },\r\n      {\r\n        field: 'operationTypeName', width: 100, title: 'æä½ç±»ååç§°',\r\n        formatter: {\r\n          type: 'enum',\r\n          options: { valueField: 'value', textField: 'text', data: this.operationTypeName }\r\n        },\r\n        editor: {\r\n          type: EditorTypes.COMBOLIST,\r\n          options: { valueField: 'value', textField: 'text', data: this.operationTypeName, idField: 'value', panelHeight: 'auto' }\r\n        },\r\n        validators: [\r\n          { type: 'required', messager: 'å¿å¡«' }\r\n        ]\r\n      },\r\n      {\r\n        field: 'sendType', width: 80, title: 'æä½', template: this.cell,\r\n        validators: [\r\n          { type: 'required', messager: 'å¿å¡«' }\r\n        ]\r\n      }\r\n    ];\r\n  }\r\n\r\n  // beforeEdit = (param: RowEditParam) => {\r\n  //   const rowData = param.rowData as any;\r\n  //   if(rowData.durationType === 'OnDuration'){\r\n  //     if(param.column.field === 'timeUnit'){\r\n  //       rowData.timeUnit = 'day'\r\n  //       param.column.editor = {};\r\n  //     } else if(param.column.field === 'timeDuration'){\r\n  //       rowData.timeDuration = 0;\r\n  //       param.column.editor = {};\r\n  //     } else {\r\n  //       const fieldValue = this.cols.find(col => col.field === param.column.field);\r\n  //       param.column.editor = fieldValue.editor;\r\n  //     }\r\n  //   }\r\n  //   return of(true);\r\n  // }\r\n\r\n  clickOK() {\r\n    this.grid.endCellEdit();\r\n    this.timeLimitInfo.dueTime += '';\r\n    if (this.validator()) {\r\n      const object = { value: this.timeLimitInfo, parameters: null };\r\n      this.submitModal.emit(object);\r\n    }\r\n  }\r\n\r\n  clickCancel() {\r\n    this.closeModal.emit();\r\n  }\r\n\r\n  private validator(): boolean {\r\n    if (this.timeLimitInfo.expireOperations\r\n      && this.timeLimitInfo.expireOperations.length > 0) {\r\n      for (const e of this.timeLimitInfo.expireOperations) {\r\n        if (e.operationTypeName === 'SendMessageExpireOperation') {\r\n          const a = <SendMessage>e;\r\n          if (!a.sendType) {\r\n            this.message.info('è¯·è®¾ç½®è¶æ¶æä½ï¼');\r\n            return false;\r\n          }\r\n        }\r\n        if (e.operationTypeName === 'AutoHandleExpireOperation') {\r\n          const a = <AutoHandle>e;\r\n          if (!a.autoHandleType) {\r\n            this.message.info('è¯·è®¾ç½®èªå¨åçç±»åï¼');\r\n            return false;\r\n          }\r\n          if (!a.message) {\r\n            this.message.info('è¯·è®¾ç½®èªå¨åçæè§ï¼');\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  add() {\r\n    let operation = new ExpireOperation();\r\n    this.timeLimitInfo.expireOperations.push(operation);\r\n    this.grid.loadData(this.timeLimitInfo.expireOperations);\r\n    this.grid.selectRow(operation.id);\r\n  }\r\n\r\n  remove() {\r\n    this.grid.endCellEdit();\r\n    const curItem = this.grid.selectedRow;\r\n    if (!curItem) {\r\n      this.message.info('å°æªéä¸­é¢è­¦æä½ï¼');\r\n      return;\r\n    }\r\n    const i = this.timeLimitInfo.expireOperations.findIndex(a => a.id === curItem.data.id);\r\n    if (i > -1) {\r\n      this.timeLimitInfo.expireOperations.splice(i, 1);\r\n      this.grid.loadData(this.timeLimitInfo.expireOperations);\r\n    }\r\n  }\r\n\r\n  editOperation(ctx: any){\r\n    this.grid.endCellEdit();\r\n    if (ctx.rowData.operationTypeName === 'SendMessageExpireOperation'){\r\n      this.sendMassageOperation(ctx);\r\n    }\r\n    if (ctx.rowData.operationTypeName === 'AutoHandleExpireOperation'){\r\n      this.message.confirm(\"ä¸ä¸èç¹æ¯ç±å½ååçäººææ´¾çè¯ï¼å½åèç¹ä¸æ¯æä»»å¡èªå¨åç\").subscribe(re => re === true ? this.autoHandleOperation(ctx) : null);\r\n    }\r\n  }\r\n  sendMassageOperation(ctx: any) {\r\n    let dialog: any;\r\n    const compFactory = this.resolver.resolveComponentFactory(SendMessageOperationComponent);\r\n    const compRef = compFactory.create(this.injector);\r\n    compRef.instance.location = this.location;\r\n    compRef.instance.value = Object.assign({}, ctx.rowData);\r\n    compRef.instance.submitEmitter.subscribe((re: ExpireOperation) => {\r\n      let operation = this.timeLimitInfo.expireOperations.find(o => o.id === re.id);\r\n      operation = Object.assign(operation, re);\r\n      dialog.close();\r\n    });\r\n    compRef.instance.closeEmitter.subscribe((re: any) => {\r\n      dialog.close();\r\n    });\r\n    const modalConfig = {\r\n      title: 'é¢è­¦æ¶æ¯',\r\n      width: 500,\r\n      height: this.location === 'activity' ? 390 : 460,\r\n      buttons: compRef.instance.footer,\r\n      showButtons: true\r\n    };\r\n    dialog = this.modalService.show(compRef, modalConfig);\r\n  }\r\n\r\n  autoHandleOperation(ctx: any) {\r\n    let dialog: any;\r\n    const compFactory = this.resolver.resolveComponentFactory(AutoHandleOperationComponent);\r\n    const compRef = compFactory.create(this.injector);\r\n    compRef.instance.value = Object.assign({}, ctx.rowData);\r\n    compRef.instance.submitEmitter.subscribe((re: ExpireOperation) => {\r\n      let operation = this.timeLimitInfo.expireOperations.find(o => o.id === re.id);\r\n      operation = Object.assign(operation, re);\r\n      dialog.close();\r\n    });\r\n    compRef.instance.closeEmitter.subscribe((re: any) => {\r\n      dialog.close();\r\n    });\r\n    const modalConfig = {\r\n      title: 'èªå¨åç',\r\n      width: 500,\r\n      height: this.location === 'activity' ? 390 : 460,\r\n      buttons: compRef.instance.footer,\r\n      showButtons: true\r\n    };\r\n    dialog = this.modalService.show(compRef, modalConfig);\r\n  }\r\n\r\n  tagSelectChange(data){\r\n    if(data.data.value === 'constant'){\r\n      this.timeLimitInfo.timeUnit = \"day\";\r\n    }else if(data.data.value === 'scope'){\r\n      this.timeLimitInfo.timeUnit = '';\r\n      this.timeLimitInfo.dueTime = this.timeScopeValue;\r\n    }\r\n  }\r\n  changeTimeScope(data){\r\n    this.timeScopeValue = data;\r\n    this.timeLimitInfo.dueTime = this.timeScopeValue;\r\n  }\r\n}\r\n\r\nexport class TimeLimitControlConverter implements TypeConverter {\r\n  constructor() { }\r\n\r\n  convertTo(data: any): string {\r\n    if (data && data.enable) {\r\n      return 'ï¼å·²è®¾ç½®ï¼';\r\n    } else {\r\n      return 'ï¼æªè®¾ç½®ï¼';\r\n    }\r\n  }\r\n}\r\n","import { ProcessDeUtil } from '../../domain/process-de-util';\r\n\r\nexport class MessageNotice {\r\n    id: string;\r\n    /**\r\n     * æ¶æ¯åå®¹\r\n     */\r\n    content: string;\r\n\r\n    /**\r\n     * æ¶æ¯åéæ¶æº\r\n     */\r\n    sendTime: string;\r\n\r\n    /**\r\n     * æ¶æ¯åéæ¹å¼\r\n     */\r\n    sendType: string;\r\n\r\n    /**\r\n     * æ¶æ¯ä¸»é¢\r\n     */\r\n    subject: string;\r\n\r\n    /**\r\n     * æ¶æ¯æ¥æ¶äºº\r\n     */\r\n    receiver: string;\r\n\r\n    /**\r\n     * æ¶æ¯æ¥æ¶äººæ¾ç¤º\r\n     */\r\n    receiverText: string;\r\n\r\n    constructor() {\r\n        this.id = ProcessDeUtil.GenerateElementId();\r\n        this.subject = 'æ¶æ¯éç¥';\r\n        // this.sendType = 'email';\r\n        this.content = '{\"expr\":\"\\'æ¨æä¸æ¡æ¶æ¯éç¥ã\\'\",\"sexpr\":\"\"}';\r\n    }\r\n}\r\nexport const processSendTime = [\r\n    { value: 'PROCESSINSTANCE_COMPLETED', text: 'æµç¨å®æ' },\r\n    { value: 'PROCESSINSTANCE_ABORTED', text: 'æµç¨ç»æ­¢' },\r\n    { value: 'PROCESSINSTANCE_ROLLBACK', text: 'æµç¨é©³å' }\r\n];\r\n\r\nexport const activitySendTime = [\r\n    { value: 'WORKITEM_CREATED', text: 'ä»»å¡åå»º' },\r\n    { value: 'ACTIVITY_COMPLETED', text: 'æ´»å¨å®æ' },\r\n    { value: 'ACTIVITY_ABORTED', text: 'æ´»å¨ç»æ­¢' },\r\n];\r\n\r\nexport const sendTypes = [\r\n    { value: 'email', name: 'é®ä»¶' },\r\n    { value: 'sms', name: 'ç­ä¿¡' },\r\n    { value: 'cloudplus', name: 'äº+' }\r\n];\r\n\r\n","import { Component, OnInit, Input, ViewChild, TemplateRef, Output, EventEmitter } from '@angular/core';\r\nimport { MessageNotice, activitySendTime, sendTypes, processSendTime } from '../message-notice';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { ProcessDesignerUIState } from '../../../app/process-designer.uistate';\r\nimport { ExpressionService, InjectedType} from \"@gsp-svc/expression\";\r\n\r\n@Component({\r\n  selector: 'lib-message-notice-edit',\r\n  templateUrl: './message-notice-edit.component.html',\r\n  styleUrls: ['./message-notice-edit.component.scss']\r\n})\r\nexport class MessageNoticeEditComponent implements OnInit {\r\n\r\n  groupIcon2 = '<i class=\"f-icon f-icon-lookup\"></i>';\r\n  exprAble = false;\r\n  @ViewChild('footer') footer: TemplateRef<any>;\r\n\r\n  @Output() closeEmitter = new EventEmitter<any>();\r\n  @Output() submitEmitter = new EventEmitter<MessageNotice>();\r\n\r\n  private _location: 'activity' | 'process' | 'messageActivity' = 'activity';\r\n  @Input()\r\n  set location(l: 'activity' | 'process' | 'messageActivity') {\r\n    this._location = l;\r\n    if (this.location !== 'activity') {\r\n      this.receiverVariables = [{ value: 'procInstCreator', name: 'æµç¨åèµ·äºº' }];\r\n    }\r\n  }\r\n\r\n  get location() {\r\n    return this._location;\r\n  }\r\n\r\n  messageNotice = new MessageNotice();\r\n  @Input()\r\n  set value(m: MessageNotice) {\r\n    this.messageNotice = Object.assign({}, m) ;\r\n    if (this.messageNotice.receiver && this.messageNotice.receiver.length > 0) {\r\n      let array = this.messageNotice.receiver.split(',');\r\n      if (array.indexOf('workItemParticipant') > -1) {\r\n        this.receiverVari = 'workItemParticipant';\r\n      } else if (array.indexOf('procInstCreator') > -1) {\r\n        this.receiverVari = 'procInstCreator';\r\n      }\r\n      if (array.length > 0) {\r\n        array = array.filter(a => (a !== 'workItemParticipant' && a !== 'procInstCreator'));\r\n        this.bindingData.id = '';\r\n        for (const r of array) {\r\n          this.bindingData.id += r + ',';\r\n        }\r\n        if (this.bindingData.id) {\r\n          this.bindingData.id = this.bindingData.id.substring(0, this.bindingData.id.length - 1);\r\n        }\r\n      }\r\n    }\r\n    if (this.messageNotice.receiverText && this.messageNotice.receiverText.length > 0) {\r\n      let array = this.messageNotice.receiverText.split(',');\r\n      if (array.length > 0) {\r\n        array = array.filter(a => (a !== 'ä»»å¡åçäºº' && a !== 'æµç¨åèµ·äºº'));\r\n        this.bindingData.name = '';\r\n        for (const r of array) {\r\n          this.bindingData.name += r + ',';\r\n        }\r\n        if (this.bindingData.name) {\r\n          this.bindingData.name = this.bindingData.name.substring(0, this.bindingData.name.length - 1);\r\n        }\r\n      }\r\n    }\r\n    this.exprAble = this.messageNotice.subject.charAt(0) === '{';\r\n  }\r\n\r\n  get value() {\r\n    return this.messageNotice;\r\n  }\r\n\r\n  typeGroup = this.uistate.messageChannels.map(m => ({ value: m.code, name: m.name }));\r\n\r\n  receiverVariables = [\r\n    { value: 'workItemParticipant', name: 'ä»»å¡åçäºº' }\r\n  ];\r\n\r\n  sendTimes = [];\r\n\r\n  receiverVari: string;\r\n\r\n  bindingData: { id?, name?} = {};\r\n  constructor(\r\n    private message: MessagerService,\r\n    private uistate: ProcessDesignerUIState,\r\n    private expr: ExpressionService,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    if (this.location === 'activity') {\r\n      this.sendTimes = activitySendTime;\r\n    } else {\r\n      this.sendTimes = processSendTime;\r\n    }\r\n  }\r\n\r\n  clickOK() {\r\n    this.setReceiver();\r\n    if (this.validator()) {\r\n      this.submitEmitter.emit(this.messageNotice);\r\n    }\r\n  }\r\n  clickCancel() {\r\n    this.closeEmitter.emit();\r\n  }\r\n\r\n  sendTimeChange(data: any) {\r\n    if (data.data.value === activitySendTime[0].value) {\r\n      this.receiverVari = 'workItemParticipant';\r\n      this.clear();\r\n    }\r\n  }\r\n  usersSelect(data) {\r\n    console.log(data);\r\n  }\r\n  changeValue(data) {\r\n    console.log(data);\r\n  }\r\n  clear() {\r\n    this.bindingData = {};\r\n  }\r\n  private setReceiver() {\r\n    let receiver = '';\r\n    let receiverText = '';\r\n    if (this.receiverVari) {\r\n      receiver += this.receiverVari + ',';\r\n      const array = this.receiverVari.split(',');\r\n      if (array.length > 0) {\r\n        for (const a of array) {\r\n          const t = this.receiverVariables.find(v => v.value === a).name;\r\n          receiverText += t + ',';\r\n        }\r\n      }\r\n    }\r\n    if (this.bindingData.id) {\r\n      receiver += this.bindingData.id + ',';\r\n      receiverText += this.bindingData.name + ',';\r\n    }\r\n    if (receiver) {\r\n      receiver = receiver.substring(0, receiver.length - 1);\r\n    }\r\n    if (receiverText) {\r\n      receiverText = receiverText.substring(0, receiverText.length - 1);\r\n    }\r\n    this.messageNotice.receiver = receiver;\r\n    this.messageNotice.receiverText = receiverText;\r\n  }\r\n  private validator(): boolean {\r\n    if (!this.messageNotice.sendType) {\r\n      this.message.info('åéæ¹å¼ä¸åè®¸ä¸ºç©ºï¼');\r\n      return false;\r\n    }\r\n    if (this.location !== 'messageActivity' && !this.messageNotice.sendTime) {\r\n      this.message.info('åéæ¶æºä¸åè®¸ä¸ºç©ºï¼');\r\n      return false;\r\n    }\r\n    if (!this.messageNotice.subject) {\r\n      this.message.info('æ¶æ¯ä¸»é¢ä¸åè®¸ä¸ºç©ºï¼');\r\n      return false;\r\n    }\r\n    if (!this.messageNotice.content) {\r\n      this.message.info('æ¶æ¯åå®¹ä¸åè®¸ä¸ºç©ºï¼');\r\n      return false;\r\n    }\r\n    if (!this.messageNotice.receiver) {\r\n      this.message.info('æ¥æ¶äººä¸åè®¸ä¸ºç©ºï¼');\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  titleExpr(data: any){\r\n    this.showTitleHelp(data);\r\n  }\r\n  contentExpr(data: any){\r\n    this.showContentHelp(data);\r\n  }\r\n\r\n  showContentHelp(data: string){\r\n    this.showExpr();\r\n    if (this.messageNotice.content && this.messageNotice.content.length > 0) {\r\n      this.expr.addExpressionText(this.messageNotice.content);\r\n    } else {\r\n      this.expr.addExpressionText('');\r\n    }\r\n    this.expr.buildExpression().then((expressionInfo: string) => {\r\n      this.messageNotice.content = expressionInfo;\r\n    });\r\n  }\r\n\r\n  showTitleHelp(data: string) {\r\n    if(this.messageNotice.subject && this.messageNotice.subject.charAt(0) !== '{'){\r\n      this.messageNotice.subject = '';\r\n    }\r\n    this.showExpr();\r\n    if (this.messageNotice.subject && this.messageNotice.subject.length > 0) {\r\n      this.expr.addExpressionText(this.messageNotice.subject);\r\n    } else {\r\n      this.expr.addExpressionText('');\r\n    }\r\n    this.expr.buildExpression().then((expressionInfo: string) => {\r\n      this.messageNotice.subject = expressionInfo;\r\n    });\r\n  }\r\n  showExpr(){\r\n    if (this.uistate.schemas.length > 0) {\r\n      for (const schema of this.uistate.schemas) {\r\n        // this.expr.addCommonObject(co);\r\n        this.expr.addSchema('Schema', schema);\r\n      }\r\n      if (this.uistate.schemas[0].entityTypes && this.uistate.schemas[0].entityTypes.length > 0) {\r\n        const entityType = this.uistate.schemas[0].entityTypes[0];\r\n        this.expr.addInjectedEntity(entityType.name, 'Schema',\r\n          entityType.name, InjectedType.EntityType);\r\n      }\r\n    }\r\n    const context = new Array();\r\n    if (this.uistate.procInstContext.length > 0) {\r\n      for (const variable of this.uistate.procInstContext) {\r\n        context.push(variable);\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (this.uistate.processVariableContext.length > 0) {\r\n      for (const variable of this.uistate.processVariableContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (context.length > 0) {\r\n      for (const v of context) {\r\n        this.expr.addContext(v);\r\n      }\r\n    }\r\n  }\r\n  tranExpr(){\r\n    this.messageNotice.subject = '';\r\n  }\r\n}\r\n","import { Component, OnInit, HostBinding, EventEmitter, Output, Input, ViewChild, TemplateRef, ComponentFactoryResolver, Injector } from '@angular/core';\r\nimport { TypeConverter } from '@farris/ui-property-panel';\r\nimport { activitySendTime, MessageNotice, sendTypes, processSendTime } from './message-notice';\r\nimport { BsModalService } from '@farris/ui-modal';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { MessageNoticeEditComponent } from './message-notice-edit/message-notice-edit.component';\r\nimport { DatagridComponent } from '@farris/ui-datagrid';\r\nimport { ProcessDeUtil } from '../../domain/process-de-util';\r\nimport { ProcessDesignerUIState } from '../../app/process-designer.uistate';\r\n\r\n@Component({\r\n  selector: 'lib-message-notice',\r\n  templateUrl: './message-notice.component.html',\r\n  styleUrls: ['./message-notice.component.scss']\r\n})\r\nexport class MessageNoticeComponent implements OnInit {\r\n  @HostBinding('class')\r\n  cls = 'farris-main-area flex-column';\r\n\r\n  @Output() closeModal = new EventEmitter<any>();\r\n  @Output() submitModal = new EventEmitter<any>();\r\n\r\n  @Input()\r\n  set value(notices: any[]) {\r\n    if (notices && notices.length > 0) {\r\n      this.messageNotices = notices.map(n => ({\r\n        id: ProcessDeUtil.GenerateElementId(),\r\n        content: n.content,\r\n        sendTime: n.sendTime,\r\n        sendType: n.sendType,\r\n        subject: n.subject,\r\n        receiver: n.receiver,\r\n        receiverText: n.receiverText\r\n      }));\r\n    }\r\n  }\r\n  @Input() editorParams: any = {};\r\n  @ViewChild('iconSelectFooter') modalFooter: TemplateRef<any>;\r\n  @ViewChild('grid') grid: DatagridComponent;\r\n\r\n  modalConfig = {\r\n    title: 'æ¶æ¯éç¥',\r\n    width: 800,\r\n    height: 515,\r\n    showButtons: true\r\n  };\r\n\r\n  messageNotices: Array<MessageNotice> = new Array();\r\n  columns = [];\r\n\r\n  location: 'activity' | 'process' | 'messageActivity' = 'activity';\r\n\r\n  constructor(\r\n    private resolver: ComponentFactoryResolver,\r\n    private injector: Injector,\r\n    private modalService: BsModalService,\r\n    private message: MessagerService,\r\n    private uistate: ProcessDesignerUIState\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.location = this.editorParams.location;\r\n    this.columns = [\r\n      {\r\n        field: 'subject', width: 100, title: 'æ¶æ¯ä¸»é¢',\r\n      }, {\r\n        field: 'content', width: 150, title: 'æ¶æ¯åå®¹', showTips: true,\r\n      }, {\r\n        field: 'sendTime', width: 100, title: 'åéæ¶æº',\r\n        formatter: {\r\n          type: 'enum',\r\n          options: { valueField: 'value', textField: 'text', data: this.location === 'process' ? processSendTime : activitySendTime }\r\n        },\r\n      }, {\r\n        field: 'sendType', width: 100, title: 'åéæ¹å¼',\r\n        formatter: {\r\n          type: 'enum',\r\n          options: { valueField: 'value', textField: 'name', data: this.uistate.messageChannels.map(m => ({ value: m.code, name: m.name })) }\r\n        },\r\n      }, {\r\n        field: 'receiverText', width: 120, title: 'æ¶æ¯æ¥æ¶äºº', showTips: true\r\n      }];\r\n    if (this.location === 'messageActivity') {\r\n      this.columns = this.columns.filter(c => c.field !== 'sendTime');\r\n    }\r\n  }\r\n\r\n  add() {\r\n    let dialog: any;\r\n    const compFactory = this.resolver.resolveComponentFactory(MessageNoticeEditComponent);\r\n    const compRef = compFactory.create(this.injector);\r\n    compRef.instance.location = this.location;\r\n    const messageNotice = new MessageNotice();\r\n    if (this.location === 'activity') {\r\n      messageNotice.sendTime = 'WORKITEM_CREATED';\r\n      messageNotice.receiver = 'workItemParticipant';\r\n      messageNotice.receiverText = 'ä»»å¡åçäºº';\r\n    } else if (this.location === 'process') {\r\n      messageNotice.sendTime = 'PROCESSINSTANCE_COMPLETED';\r\n      messageNotice.receiver = 'procInstCreator';\r\n      messageNotice.receiverText = 'æµç¨åèµ·äºº';\r\n    } else if (this.location === 'messageActivity') {\r\n      messageNotice.receiver = 'procInstCreator';\r\n      messageNotice.receiverText = 'æµç¨åèµ·äºº';\r\n    }\r\n    compRef.instance.value = messageNotice;\r\n    compRef.instance.submitEmitter.subscribe((re: MessageNotice) => {\r\n      this.messageNotices = this.messageNotices.concat([re]);\r\n      dialog.close();\r\n    });\r\n    compRef.instance.closeEmitter.subscribe(re => {\r\n      dialog.close();\r\n    });\r\n    const modalConfig = {\r\n      title: 'æ¶æ¯éç¥',\r\n      width: 490,\r\n      height: this.location === 'messageActivity' ? 450 : 490,\r\n      showButtons: true,\r\n      buttons: compRef.instance.footer\r\n    };\r\n    dialog = this.modalService.show(compRef, modalConfig);\r\n  }\r\n  edit() {\r\n    if (!this.grid.selectedRow) {\r\n      this.message.info('å°æªéä¸­æ¶æ¯éç¥ï¼');\r\n      return;\r\n    }\r\n    let dialog: any;\r\n    const compFactory = this.resolver.resolveComponentFactory(MessageNoticeEditComponent);\r\n    const compRef = compFactory.create(this.injector);\r\n    compRef.instance.location = this.location;\r\n    compRef.instance.value = this.grid.selectedRow.data;\r\n    compRef.instance.submitEmitter.subscribe((re: MessageNotice) => {\r\n      this.messageNotices = this.messageNotices.map(m => {\r\n        if (m.id === re.id) {\r\n          return re;\r\n        }\r\n        return m;\r\n      });\r\n      dialog.close();\r\n    });\r\n    compRef.instance.closeEmitter.subscribe(re => {\r\n      dialog.close();\r\n    });\r\n    const modalConfig = {\r\n      title: 'æ¶æ¯éç¥',\r\n      width: 490,\r\n      height: this.location === 'messageActivity' ? 450 : 490,\r\n      showButtons: true,\r\n      buttons: compRef.instance.footer\r\n    };\r\n    dialog = this.modalService.show(compRef, modalConfig);\r\n  }\r\n  delete() {\r\n    const selected = this.grid.selectedRow;\r\n    if (!selected) {\r\n      this.message.info('å°æªéä¸­æ¶æ¯éç¥ï¼');\r\n      return;\r\n    }\r\n    this.messageNotices = this.messageNotices.filter(m => m.id !== selected.id);\r\n  }\r\n  clickOK() {\r\n    const object = { value: this.messageNotices, parameters: null };\r\n    this.submitModal.emit(object);\r\n  }\r\n  clickCancel() {\r\n    this.closeModal.emit();\r\n  }\r\n}\r\n\r\nexport class MessageNoticeConverter implements TypeConverter {\r\n  constructor() { }\r\n\r\n  convertTo(data: any[]): string {\r\n    if (data && data.length > 0) {\r\n      return 'ï¼å·²è®¾ç½®ï¼';\r\n    } else {\r\n      return 'ï¼æªè®¾ç½®ï¼';\r\n    }\r\n  }\r\n}\r\n","import { Component, Input, OnInit, Output, ViewChild, TemplateRef, EventEmitter } from '@angular/core';\r\nimport { TypeConverter } from '@farris/ui-property-panel';\r\nimport { ProcessDesignerUIState } from '../../app/process-designer.uistate';\r\nimport { ProcExtendProperty } from './extend-property';\r\n\r\n@Component({\r\n  selector: 'lib-extend-property',\r\n  templateUrl: './extend-property.component.html',\r\n  styleUrls: ['./extend-property.component.css']\r\n})\r\nexport class ExtendPropertyComponent implements OnInit {\r\n\r\n  @Output() closeModal = new EventEmitter<any>();\r\n  @Output() submitModal = new EventEmitter<any>();\r\n  @ViewChild('iconSelectFooter') modalFooter: TemplateRef<any>;\r\n\r\n  @Input()\r\n  set value(property: any[]) {\r\n    if (property && property.length > 0) {\r\n      this.procExtendProperty = property.map(p => ({\r\n        id: p.id,\r\n        code: p.code,\r\n        parentId: p.parentId,\r\n        sortOrder: p.sortOrder,\r\n        propertyNote: p.propertyNote,\r\n        propertyTitle: p.propertyTitle,\r\n        propertyLocation: p.propertyLocation,\r\n        propertyType: p.propertyType,\r\n        enumValue: p.enumValue,\r\n        bizDefKey: p.bizDefKey,\r\n        bizCategoryId: p.bizCategoryId,\r\n        startMode: p.startMode,\r\n        value: p.value,\r\n      }));\r\n    }\r\n  }\r\n  modalConfig = {\r\n    title: 'æ©å±å±æ§',\r\n    width: 430,\r\n    height: 370,\r\n    showButtons: true\r\n  };\r\n  procExtendProperty: Array<ProcExtendProperty> = new Array();\r\n  booleanlist = [\r\n    { key: 'æ¯', value: 'true' },\r\n    { key: 'å¦', value: 'false' }\r\n  ];\r\n  extendPropertyList = {\r\n    key: '',\r\n    value: ''\r\n  };\r\n  constructor(private uiState: ProcessDesignerUIState) {\r\n  }\r\n\r\n  setProperty(obj: any) {\r\n    this.uiState.propertyData = obj.propertyData;\r\n    this.uiState.propertyConfig = obj.propertyConfig;\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  clickOK() {\r\n    const value = this.procExtendProperty;\r\n    const object = { value, parameters: null };\r\n    this.submitModal.emit(object);\r\n  }\r\n\r\n  cancel() {\r\n    this.closeModal.emit();\r\n  }\r\n}\r\nexport class ExtendPropertyConverter implements TypeConverter {\r\n\r\n  constructor() { }\r\n\r\n  convertTo(data: any[]): string {\r\n    if (data && data instanceof Array && data.some(item => item.value)) {\r\n      return 'ï¼å·²è®¾ç½®ï¼';\r\n    }\r\n    return 'ï¼æªè®¾ç½®ï¼';\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { ProcessDesignerUIState } from './process-designer.uistate';\r\nimport { PropertyEntity, ElementPropertyConfig } from '@farris/ui-property-panel';\r\nimport { ResourceKeys } from '../model/resourceKeys';\r\nimport { EntryFormEditorComponent, FlowFormConverter } from '../views/entryForm/entry-form-editor.component';\r\nimport {\r\n  ActivityComponentComponent,\r\n  ActivityComponentConverter\r\n} from '../views/activity-component/activity-component.component';\r\nimport { ExecuteFormsComponent, ExecuteFormsConverter } from '../views/execute-forms/execute-forms.component';\r\nimport { TitleExpressionComponent, TitleExpressionConverter } from '../views/title-expression/title-expression.component';\r\nimport { CustomizeActionComponent, CustomizeActionConverter } from '../views/customize-action/customize-action.component';\r\nimport {\r\n  ProcessVariablesComponent,\r\n  ProcessVariablesConverter\r\n} from '../views/process-variables/process-variables.component';\r\nimport {\r\n  TimeLimitControlComponent,\r\n  TimeLimitControlConverter\r\n} from '../views/time-limit-control/time-limit-control.component';\r\nimport { MessageNoticeComponent, MessageNoticeConverter } from '../views/message-notice/message-notice.component';\r\nimport { ExtendPropertyComponent, ExtendPropertyConverter } from '../views/extend-property/extend-property.component';\r\n\r\n@Injectable()\r\n\r\nexport class BpmnProcessViewModel {\r\n  constructor(private uiState: ProcessDesignerUIState) {\r\n\r\n  }\r\n\r\n  setProcessProperty(obj: any) {\r\n    // if (obj.propertyData.EntryForm) {\r\n    //     obj.propertyData.EntryForm = this.uiState.flowFormInfo.flowForm;\r\n    // }\r\n    this.uiState.propertyData = obj.propertyData;\r\n    this.uiState.ProcessVariables = this.uiState.propertyData[ResourceKeys.processVariables];\r\n    this.uiState.propertyConfig = this.setProcessConfig(obj.propertyConfig);\r\n  }\r\n\r\n  setProcessConfig(obj: any[]): ElementPropertyConfig[] {\r\n    const propertyConfig: ElementPropertyConfig[] = [];\r\n    if (obj) {\r\n      obj.forEach((element: ElementPropertyConfig) => {\r\n        this.setProcessEntity(element.properties);\r\n        propertyConfig.push(element);\r\n      });\r\n    }\r\n    return propertyConfig;\r\n  }\r\n\r\n  private setProcessEntity(obj: PropertyEntity[]) {\r\n    if (obj.length > 0) {\r\n      obj.forEach((item: PropertyEntity) => {\r\n        switch (item.propertyID) {\r\n          case ResourceKeys.EntryForm: // æµç¨åç±»\r\n            item.editor = EntryFormEditorComponent;\r\n            item.converter = new FlowFormConverter();\r\n            // item.editorParams = {\r\n            //     flowForms: [this.uiState.flowFormInfo.flowForm]\r\n            // };\r\n            break;\r\n          case ResourceKeys.wf_Component:\r\n            item.editor = ActivityComponentComponent;\r\n            item.converter = new ActivityComponentConverter();\r\n            item.editorParams = {\r\n              location: 'process'\r\n            };\r\n            break;\r\n          case ResourceKeys.wf_ExecuteForms_PC:\r\n            item.editor = ExecuteFormsComponent;\r\n            item.converter = new ExecuteFormsConverter();\r\n            item.editorParams = {\r\n              location: 'process',\r\n              tab: 'web'\r\n            };\r\n            break;\r\n          case ResourceKeys.wf_ExecuteForms_Mobile:\r\n            item.editor = ExecuteFormsComponent;\r\n            item.converter = new ExecuteFormsConverter();\r\n            item.editorParams = {\r\n              location: 'process',\r\n              tab: 'mobile'\r\n            };\r\n            break;\r\n          case ResourceKeys.wf_TitleExpression:\r\n            item.editor = TitleExpressionComponent;\r\n            item.converter = new TitleExpressionConverter();\r\n            break;\r\n          case ResourceKeys.allowPreAssign:\r\n            item.iterator = this.uiState.boolIterator;\r\n            break;\r\n          case ResourceKeys.startMode:\r\n            item.iterator = this.uiState.startModeIterator;\r\n            break;\r\n          case ResourceKeys.DisplayTerminal:\r\n            item.iterator = this.uiState.displayTerminal;\r\n            break;\r\n          case ResourceKeys.wf_CustomizeAction:\r\n            item.editor = CustomizeActionComponent;\r\n            item.converter = new CustomizeActionConverter();\r\n            break;\r\n          case ResourceKeys.processVariables:\r\n            item.editor = ProcessVariablesComponent;\r\n            item.converter = new ProcessVariablesConverter();\r\n            break;\r\n          case ResourceKeys.timeLimitControl:\r\n            item.editor = TimeLimitControlComponent;\r\n            item.converter = new TimeLimitControlConverter();\r\n            item.editorParams = {\r\n              location: 'process'\r\n            };\r\n            break;\r\n          case ResourceKeys.messageNotice:\r\n            item.editor = MessageNoticeComponent;\r\n            item.converter = new MessageNoticeConverter();\r\n            item.editorParams = {\r\n              location: 'process'\r\n            };\r\n            break;\r\n          default:\r\n            item.editor = ExtendPropertyComponent;\r\n            item.converter = new ExtendPropertyConverter();\r\n            break;\r\n        }\r\n      });\r\n    }\r\n  }\r\n}\r\n","export class ApprovalItemEntity {\r\n    value: string;\r\n    text: string;\r\n    workFlowAction: string;\r\n    isDefault = false;\r\n    commentNecessary = false;\r\n    certification = false;\r\n    attachmentNecessary = false;\r\n\r\n    constructor(value?: string, text?: string, wfAction?: string) {\r\n        this.value = value;\r\n        this.text = text;\r\n        this.workFlowAction = wfAction;\r\n    }\r\n}\r\n","export class ActionOrganizationScope {\r\n    enable: boolean;\r\n    action: ActionScope;\r\n    scope: OrganizationPotentialOwner;\r\n}\r\nexport class OrganizationPotentialOwner {\r\n    /**\r\n     * ä½ç¨åï¼AssignUser, Transfer, AddSignFront, AddSignBehind\r\n     */\r\n    actionScope: ActionScope;\r\n    /**\r\n     * é¨é¨ï¼DEPARTMENTï¼åä½ï¼UNIT\r\n     */\r\n    organizationLevel: OrganizationLevel;\r\n    /**\r\n     * ç»ç»Idï¼currentDepartment, currentUnit\r\n     */\r\n    organizationId: string;\r\n    /**\r\n     * ç»ç»ç¼å·\r\n     */\r\n    organizationCode: string;\r\n    /**\r\n     * ç»ç»åç§°\r\n     */\r\n    organizationName: string;\r\n    /**\r\n     * åå«ä¸çº§\r\n     */\r\n    includeChildren: boolean;\r\n    /**\r\n     * éåç¶çº§\r\n     */\r\n    parentsUntil: boolean;\r\n    /**\r\n     * variable åéå¼\r\n     * expression è¡¨è¾¾å¼å¼\r\n     * constant å¸¸éå¼\r\n     */\r\n    tag: string;\r\n}\r\nexport enum ActionScope {\r\n    /**\r\n     * ææ´¾\r\n     */\r\n    AssignUser = 'AssignUser',\r\n    /**\r\n     * ç§»äº¤\r\n     */\r\n    Transfer = 'Transfer',\r\n    /**\r\n     * å¾è¯¢\r\n     */\r\n    AddSignFront = 'AddSignFront',\r\n    /**\r\n     * å ç­¾\r\n     */\r\n    AddSignBehind = 'AddSignBehind',\r\n    /**\r\n     * ç¥ä¼\r\n     */\r\n    Notify = \"Notify\",\r\n}\r\nexport enum OrganizationLevel {\r\n    /**\r\n     * é¨é¨\r\n     */\r\n    DEPARTMENT = 'DEPARTMENT',\r\n    /**\r\n     * åä½\r\n     */\r\n    UNIT = 'UNIT',\r\n}\r\n","import { Component, OnInit, Output, Input, ViewChild, EventEmitter, TemplateRef, HostBinding } from '@angular/core';\r\nimport { TypeConverter } from '@farris/ui-property-panel';\r\nimport { FormGroup, FormControl } from '@angular/forms';\r\nimport { AssignPerformerConfig } from './assign-performer-config.entity';\r\nimport { OrganizationPotentialOwner, ActionScope, OrganizationLevel } from '../organization-potential-owner/actionOrganizationScope';\r\n\r\n@Component({\r\n  selector: 'app-assign-performer-config',\r\n  templateUrl: './assign-performer-config.component.html',\r\n  styleUrls: ['./assign-performer-config.component.css']\r\n})\r\nexport class AssignPerformerConfigComponent implements OnInit {\r\n  @HostBinding('class')\r\n  cls = 'farris-main-area flex-column';\r\n  @Output() closeModal = new EventEmitter<any>();\r\n  @Output() submitModal = new EventEmitter<any>();\r\n  assingPerformerConfigForm: FormGroup;\r\n  private config: AssignPerformerConfig;\r\n\r\n  @Input()\r\n  set value(v: AssignPerformerConfig) {\r\n    this.assingPerformerConfigForm = new FormGroup({\r\n      multiSelect: new FormControl(v.multiSelect),\r\n      necessary: new FormControl(v.necessary)\r\n    });\r\n    this.operator = v.operator || 'currentUser';\r\n    this.allowGlobalAssign = v.allowGlobalAssign || false;\r\n    if (v.assignScope) {\r\n      this.organizationLevel = v.assignScope.organizationLevel;\r\n      this.includeChildren = v.assignScope.includeChildren;\r\n    }\r\n  }\r\n\r\n  @ViewChild('iconSelectFooter') modalFooter: TemplateRef<any>;\r\n\r\n  allowGlobalAssign = false;\r\n\r\n  operatorCollection = [\r\n    { text: 'å½ååçäºº', value: 'currentUser' },\r\n    { text: 'æµç¨åèµ·äºº', value: 'procInstCreator' }];\r\n  operator = 'currentUser';\r\n\r\n  organizationLevelCollection = [\r\n    { value: 'GLOBAL', text: 'å¨å', orgId: 'global' },\r\n    { value: 'UNIT', text: 'æ¬åä½', orgId: 'currentUnit' },\r\n    { value: 'DEPARTMENT', text: 'æ¬é¨é¨', orgId: 'currentDepartment' }];\r\n  organizationLevel = this.organizationLevelCollection[0].value;\r\n  includeChildren = false;\r\n\r\n  modalConfig = {\r\n    title: 'ææ´¾è§å',\r\n    width: 450,\r\n    height: 470,\r\n    showButtons: true\r\n  };\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  clickOK() {\r\n    this.config = {\r\n      operator: this.operator,\r\n      multiSelect: this.assingPerformerConfigForm.get('multiSelect').value,\r\n      necessary: this.assingPerformerConfigForm.get('necessary').value,\r\n      allowGlobalAssign: this.allowGlobalAssign\r\n    };\r\n    if (this.allowGlobalAssign && this.organizationLevel !== this.organizationLevelCollection[0].value) {\r\n      const potential = new OrganizationPotentialOwner();\r\n      potential.actionScope = ActionScope.AssignUser;\r\n      potential.organizationLevel = this.organizationLevel as OrganizationLevel;\r\n      potential.organizationId = this.organizationLevelCollection.find(o => o.value === this.organizationLevel).orgId;\r\n      potential.organizationName = this.organizationLevelCollection.find(o => o.value === this.organizationLevel).text;\r\n      potential.includeChildren = this.includeChildren;\r\n      potential.tag = 'variable';\r\n      this.config.assignScope = potential;\r\n    }\r\n    const object = { value: this.config, parameters: null };\r\n    this.submitModal.emit(object);\r\n  }\r\n\r\n  clickCancel() {\r\n    this.closeModal.emit();\r\n  }\r\n\r\n  valueChange(event: any) {\r\n    switch (event.value) {\r\n      case this.organizationLevelCollection[0].value:\r\n        this.includeChildren = false;\r\n        break;\r\n      case this.organizationLevelCollection[1].value:\r\n        this.includeChildren = true;\r\n        break;\r\n      case this.organizationLevelCollection[2].value:\r\n        this.includeChildren = false;\r\n        break;\r\n    }\r\n  }\r\n}\r\nexport class AssignConfigConverter implements TypeConverter {\r\n  constructor() { }\r\n\r\n  convertTo(data): string {\r\n    return 'ï¼å·²è®¾ç½®ï¼';\r\n  }\r\n}\r\n","export class SignRuleEntity {\r\n    id: string;\r\n    conclusionValue: string;\r\n    conclusionName: string;\r\n    calculateType?: string; // è®¡ç®æ¹å¼\r\n    conditionValue?: string; // æ»¡è¶³æææ¡ä»¶å¼\r\n    waitAllVotes?: boolean; // æ¯å¦ç­å¾ææéç¥¨\r\n    completionCondition: string;\r\n}\r\n","import { Component, OnInit, HostBinding, Output, EventEmitter, Input, ViewChild, TemplateRef } from '@angular/core';\r\nimport { TypeConverter } from '@farris/ui-property-panel';\r\nimport { FormBuilder } from '@angular/forms';\r\nimport { SignRuleEntity } from './entites/sign-rule.entity';\r\nimport { DialogComponent } from '@farris/ui-dialog';\r\nimport { ExprEditMode, ExpressionService, VarEntity } from '@gsp-svc/expression';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { ProcessDesignerUIState } from '../../app/process-designer.uistate';\r\nimport { DataColumn, DatagridComponent } from '@farris/ui-datagrid';\r\nimport { ProcessDeUtil } from '../../domain/process-de-util';\r\nimport { EditorTypes } from '@farris/ui-datagrid-editors';\r\nimport { of } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'app-sign-rule',\r\n  templateUrl: './sign-rule.component.html',\r\n  styleUrls: ['./sign-rule.component.css']\r\n})\r\nexport class SignRuleComponent implements OnInit {\r\n  @HostBinding('class')\r\n  cls = 'farris-main-area flex-column';\r\n  @Output() closeModal = new EventEmitter<any>();\r\n  @Output() submitModal = new EventEmitter<any>();\r\n\r\n\r\n  @Input()\r\n  set value(rules: any[]) {\r\n    if (rules && rules.length > 0) {\r\n      for (const rule of rules) {\r\n        const val = new SignRuleEntity();\r\n        val.id = ProcessDeUtil.GenerateElementId();\r\n        val.conclusionValue = rule.ConclusionValue;\r\n        val.conclusionName = rule.ConclusionName;\r\n        val.calculateType = rule.CalculateType ? rule.CalculateType : 'null';\r\n        val.conditionValue = rule.ConditionValue ? rule.ConditionValue : 0;\r\n        val.waitAllVotes = rule.WaitAllVotes ? rule.WaitAllVotes : false;\r\n        val.completionCondition = rule.CompletionCondition ? rule.CompletionCondition._value : null;\r\n        this.data.push(val);\r\n      }\r\n    } else { // å¦ææ¨¡åä¸æ²¡æä¼ç­¾è§åï¼èªå¨å¸¦å¥ææçå®¡æ¹éé¡¹\r\n      this.deleteRow();\r\n    }\r\n  }\r\n  @Input() editorParams: any = {};\r\n  @ViewChild('iconSelectFooter') modalFooter: TemplateRef<any>;\r\n  @ViewChild('approvalTable') apvlItemsGrid: DatagridComponent;\r\n  @ViewChild('approvalItemDialog') apvlItemDialog: DialogComponent;\r\n  @ViewChild('grid') grid: DatagridComponent;\r\n\r\n  modalConfig = {\r\n    title: 'ä¼ç­¾è§å',\r\n    width: 800,\r\n    height: 520,\r\n    showButtons: true\r\n  };\r\n  data: SignRuleEntity[] = [];\r\n  calculationMethods: any[] = [\r\n    { text: 'ææ°é', value: 'byNumber' },\r\n    { text: 'ææ¯ä¾(%)', value: 'byProportion' },\r\n    { text: 'èªå®ä¹æ¡ä»¶', value: 'null' },\r\n  ];\r\n  counterSignVariables: VarEntity[] = [];\r\n  /******* å®¡æ¹é¡¹å¸®å©åæ° *********************************************************/\r\n  approvalCols = [{ title: 'ç¼å·', field: 'value', width: 80 },\r\n  { title: 'åç§°', field: 'text', width: 90 }];\r\n  approvalItems: any[] = [];\r\n/*********************************** */\r\n  columns = [\r\n    { field: 'conclusionName', width: 25, title: 'ç»è®ºåç§°' },\r\n    { field: 'conclusionValue', width: 25, title: 'ç»è®ºå¼' },\r\n    { field: 'calculateType', width: 40, title: 'è®¡ç®æ¹å¼',\r\n      formatter: {type: 'enum',options: { valueField: 'value', textField: 'text', data: this.calculationMethods }},\r\n      editor: {type: EditorTypes.COMBOLIST,options: { valueField: 'value', textField: 'text', data: this.calculationMethods, idField: 'value', panelHeight: 'auto' }}\r\n    },\r\n    { field: 'conditionValue', width: 25, title: 'æ¡ä»¶å¼',\r\n      editor: { type: EditorTypes.NUMBERBOX, options: {} },\r\n      formatter:{type: 'number', options: { precision: 0, min: 0 } }\r\n    },\r\n    { field: 'waitAllVotes', width: 35, title: 'ç­å¾å¨ååç»',\r\n      editor: { type: EditorTypes.SWITCH, options: {} },\r\n      formatter: { type: 'boolean', options: { trueText: 'æ¯', falseText: 'å¦' }}\r\n    },\r\n    { field: 'completionCondition', width: 50, title: 'èªå®ä¹æ¡ä»¶',\r\n      editor: {\r\n        type: 'input-group',\r\n        options: {\r\n          groupText: '<i class=\"f-icon f-icon-lookup\"></i>',\r\n          editable: false,\r\n          clickHandle: (e) => {\r\n            e.formControl.setValue(e.instance.value ? e.instance.value : '');\r\n            this.editConditon(e);\r\n          },\r\n          clear: (e) => {\r\n            console.log('clear', e);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  ];\r\n\r\n  constructor(\r\n    private formBuilder: FormBuilder,\r\n    private message: MessagerService,\r\n    private exprService: ExpressionService,\r\n    private designerUIState: ProcessDesignerUIState,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.counterSignVariables = this.designerUIState.counterSignVariables || [];\r\n    this.approvalItems = this.designerUIState.approvalItems || [];\r\n  }\r\n  // éç½®å¨ä½\r\n  deleteRow() {\r\n    this.data = [];\r\n    const ruleItems = this.designerUIState.approvalItems || [];\r\n    if (ruleItems && ruleItems.length > 0) {\r\n      for (const ruleItem of ruleItems) {\r\n        const val = new SignRuleEntity();\r\n        if (ruleItem.value === 'Pass') {\r\n          val.id = ProcessDeUtil.GenerateElementId();\r\n          val.conclusionValue = ruleItem.value;\r\n          val.conclusionName = ruleItem.text;\r\n          val.calculateType = 'byProportion';\r\n          val.conditionValue = '100';\r\n          val.waitAllVotes = true;\r\n        } else if (ruleItem.value === 'Back') {\r\n          val.id = ProcessDeUtil.GenerateElementId();\r\n          val.conclusionValue = ruleItem.value;\r\n          val.conclusionName = ruleItem.text;\r\n          val.calculateType = 'byNumber';\r\n          val.conditionValue = '1';\r\n          val.waitAllVotes = true;\r\n        } else {\r\n          val.id = ProcessDeUtil.GenerateElementId();\r\n          val.conclusionValue = ruleItem.value;\r\n          val.conclusionName = ruleItem.text;\r\n          val.calculateType = 'null';\r\n          val.conditionValue = '0';\r\n          val.waitAllVotes = true;\r\n        }\r\n        this.data.push(val);\r\n      }\r\n    }\r\n  }\r\n\r\n  clickOK() {\r\n    this.grid.endCellEdit();\r\n    if (this.data.length === 0) {\r\n      this.message.warning('å®æç­ç¥ä¸ºä¼ç­¾æ¶ï¼ä¼ç­¾è§åä¸åè®¸ä¸ºç©ºï¼è¯·äºè§£ï¼');\r\n    } else {\r\n      const object = { value: this.data, parameters: null };\r\n      this.submitModal.emit(object);\r\n    }\r\n  }\r\n\r\n  clickCancel() {\r\n    this.closeModal.emit();\r\n  }\r\n\r\n  editConditon(e: any) {\r\n    if (this.counterSignVariables && this.counterSignVariables.length > 0) {\r\n      for (const variable of this.counterSignVariables) {\r\n        this.exprService.addContext(variable);\r\n      }\r\n    }\r\n    this.exprService.setEditPattern(ExprEditMode.Advanced); // è¡¨è¾¾å¼å±ç°æ¨¡å¼ï¼é»è®¤é«çº§çï¼ä¼ç­¾è§åéè¦ä¸ä¸æåéï¼\r\n    this.exprService.addExpressionText(e.instance.value);\r\n    this.exprService.buildExpression().then((cond: string) => {\r\n      e.formControl.setValue(cond);\r\n      e.instance.cd.detectChanges();\r\n    });\r\n  }\r\n\r\n  /**\r\n   * éä¸­å®¡æ¹é¡¹\r\n   */\r\n  approvalSelect() {\r\n    const selections: any[] = this.apvlItemsGrid.checkeds;\r\n    if (selections && selections.length > 0) {\r\n      for (const selection of selections) {\r\n        const signRule = new SignRuleEntity();\r\n        signRule.id = ProcessDeUtil.GenerateElementId();\r\n        signRule.conclusionValue = selection.data.value;\r\n        signRule.conclusionName = selection.data.text;\r\n        this.data.push(signRule);\r\n      }\r\n      this.grid.loadData(this.data);\r\n      this.apvlItemDialog.close();\r\n    } else {\r\n      this.message.info('è¯·é¦åéä¸­ä¸æ¡å®¡æ¹é¡¹ï¼');\r\n    }\r\n  }\r\n\r\n\r\n  preValue: SignRuleEntity;\r\n  curValue: SignRuleEntity;\r\n/**\r\n * ç»æç¼è¾åäºä»¶\r\n */\r\n  afterEdit = (rowIndex: number, rowData: any, column?: DataColumn) => {\r\n    this.preValue = JSON.parse(JSON.stringify(rowData));\r\n    return of(true);\r\n  }\r\n\r\n  endEdit(e: any) {\r\n    this.curValue = e.rowData;\r\n    // èªå®ä¹ä¼ç­¾è§ååé¢ç½®ä¼ç­¾è§åäºæ¥\r\n    if(this.preValue.completionCondition !== this.curValue.completionCondition) {\r\n      this.data[e.rowIndex].calculateType = 'null',\r\n      this.data[e.rowIndex].conditionValue = '0';\r\n      this.data[e.rowIndex].waitAllVotes = false;\r\n    } else if (this.preValue.calculateType !== this.curValue.calculateType ||\r\n      this.preValue.conditionValue !== this.curValue.conditionValue ||\r\n      this.preValue.waitAllVotes !== this.curValue.waitAllVotes) {\r\n        this.data[e.rowIndex].completionCondition = null;\r\n    }\r\n\r\n    if(e.column.field === 'conditionValue' && this.data[e.rowIndex].calculateType === 'byProportion'\r\n    && Number.parseInt(e.value) > 100) {\r\n      this.message.info('æ¡ä»¶å¼æå¤§å¼æ¯100');\r\n      this.data[e.rowIndex].conditionValue = '100';\r\n    } else if (e.column.field === 'conditionValue' && Number.parseInt(e.value) < 0) {\r\n      this.message.info('æ¡ä»¶å¼æå°å¼æ¯0');\r\n      this.data[e.rowIndex].conditionValue = '0';\r\n    } else if ((e.column.field === 'calculateType' || e.column.field === 'conditionValue') && (this.data[e.rowIndex].calculateType === 'oneVote' ||\r\n    this.data[e.rowIndex].calculateType === 'fullVote') && Number.parseInt(this.data[e.rowIndex].conditionValue) !== 0) {\r\n      this.message.info('ç»è®ºæ§è¡æ¹å¼ä¸ºå¨ç¥¨æä¸ç¥¨æ¶ä¸éè¦æ¡ä»¶å¼');\r\n      this.data[e.rowIndex].conditionValue = '0';\r\n    } else if (e.column.field === 'calculateType' && this.data[e.rowIndex].calculateType === 'byProportion' &&\r\n    Number.parseInt(this.data[e.rowIndex].conditionValue) > 100) {\r\n      this.message.info('æ¡ä»¶å¼æå¤§å¼æ¯100');\r\n      this.data[e.rowIndex].conditionValue = '100';\r\n      }\r\n  }\r\n}\r\n\r\nexport class SignRuleConverter implements TypeConverter {\r\n  constructor() { }\r\n\r\n  convertTo(data: any[]): string {\r\n    if (data && data.length > 0) {\r\n      return 'ï¼å·²è®¾ç½®ï¼';\r\n    } else {\r\n      return 'ï¼æªè®¾ç½®ï¼';\r\n    }\r\n  }\r\n}\r\n","import { Component, OnInit, HostBinding, Output, EventEmitter, Input, ViewChild, TemplateRef } from '@angular/core';\r\nimport { TypeConverter } from '@farris/ui-property-panel';\r\nimport { FormBuilder, FormGroup } from '@angular/forms';\r\nimport { DataTableComponent } from '@farris/ui-datatable';\r\nimport { DialogComponent } from '@farris/ui-dialog';\r\nimport { ApprovalItemEntity } from './entities/approval-item.entity';\r\nimport { HttpService } from '@ecp-caf/caf-common';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { map } from 'rxjs/operators';\r\nimport { ProcessDesignerUIState } from '../../app/process-designer.uistate';\r\nimport { EditorTypes } from '@farris/ui-datagrid-editors';\r\nimport { DatagridComponent } from '@farris/ui-datagrid';\r\nimport { ProcessDeUtil } from '../../domain/process-de-util';\r\n\r\n@Component({\r\n  selector: 'app-approvel-items',\r\n  templateUrl: './approvel-items.component.html',\r\n  styleUrls: ['./approvel-items.component.css']\r\n})\r\nexport class ApprovelItemsComponent implements OnInit {\r\n  @HostBinding('class')\r\n  cls = 'farris-main-area flex-column';\r\n\r\n  @Output() closeModal = new EventEmitter<any>();\r\n  @Output() submitModal = new EventEmitter<any>();\r\n\r\n  @Input()\r\n  set value(items: any[]) {\r\n    if (items && items.length > 0) {\r\n      for (const item of items) {\r\n        const approval = new ApprovalItemEntity();\r\n        approval.value = item.Value;\r\n        approval.text = item.Text;\r\n        approval.workFlowAction = item.WorkFlowAction;\r\n        approval.isDefault = item.IsDefault;\r\n\r\n        if (item.commentNecessary === null || item.commentNecessary === undefined) {\r\n          approval.commentNecessary = (item.Value === 'Back' ? true : false);\r\n        } else {\r\n          approval.commentNecessary = item.commentNecessary;\r\n        }\r\n\r\n        approval.certification = item.certification ? item.certification : false;\r\n        approval.attachmentNecessary = item.attachmentNecessary ? item.attachmentNecessary : false;\r\n        this.data.push(approval);\r\n      }\r\n    }\r\n  }\r\n\r\n  @ViewChild('iconSelectFooter') modalFooter: TemplateRef<any>;\r\n  @ViewChild('actionsTable') actionsTable: DatagridComponent;\r\n  @ViewChild('actionsDialog') actionsDialog: DialogComponent;\r\n  @ViewChild('grid') grid: DatagridComponent;\r\n\r\n  modalConfig = {\r\n    title: 'å®¡æ¹éé¡¹',\r\n    width: 880,\r\n    height: 515,\r\n    showButtons: true\r\n  };\r\n\r\n  workFlowActions: any[] = [\r\n    { text: 'æ­£å', value: 'Forward' },\r\n    { text: 'åå', value: 'Backward' },\r\n    { text: 'ç»æ­¢', value: 'Abort' }];\r\n\r\n  columns = [\r\n    {\r\n      field: 'value', width: 80, title: 'ç¼å·',\r\n    },\r\n    { field: 'text', width: 80, title: 'åç§°' },\r\n    {\r\n      field: 'workFlowAction', width: 80, title: 'æµè½¬æ¹å',\r\n      formatter: {\r\n        type: 'enum',\r\n        options: { valueField: 'value', textField: 'text', data: this.workFlowActions}\r\n      },\r\n      editor: {\r\n        type: EditorTypes.COMBOLIST,\r\n        options: { valueField: 'value', textField: 'text', data: this.workFlowActions, idField: 'value', panelHeight: 'auto' }\r\n      },\r\n      validators: [\r\n        { type: 'required', messager: 'å¿å¡«' }\r\n      ]\r\n    },\r\n    {\r\n      field: 'isDefault', width: 60, title: 'é»è®¤',\r\n      editor: {\r\n        type: EditorTypes.SWITCH,\r\n        options: {}\r\n      },\r\n      formatter: { type: 'boolean', options: { trueText: 'æ¯', falseText: 'å¦' } },\r\n      validators: [\r\n        { type: 'required', messager: 'å¿å¡«' }\r\n      ]\r\n    },\r\n    {\r\n      field: 'commentNecessary', width: 60, title: 'æè§å¿å¡«',\r\n      editor: {\r\n        type: EditorTypes.SWITCH,\r\n        options: {}\r\n      },\r\n      formatter: { type: 'boolean', options: { trueText: 'æ¯', falseText: 'å¦' } },\r\n      validators: [\r\n        { type: 'required', messager: 'å¿å¡«' }\r\n      ]\r\n    },\r\n    {\r\n      field: 'attachmentNecessary', width: 60, title: 'éä»¶ä¸ä¼ ',\r\n      editor: {\r\n        type: EditorTypes.SWITCH,\r\n        options: {}\r\n      },\r\n      formatter: { type: 'boolean', options: { trueText: 'æ¯', falseText: 'å¦' } },\r\n      validators: [\r\n        { type: 'required', messager: 'å¿å¡«' }\r\n      ]\r\n    },\r\n    {\r\n      field: 'certification', width: 60, title: 'æ°å­ç­¾å',\r\n      editor: {\r\n        type: EditorTypes.SWITCH,\r\n        options: {}\r\n      },\r\n      formatter: { type: 'boolean', options: { trueText: 'æ¯', falseText: 'å¦' } },\r\n      validators: [\r\n        { type: 'required', messager: 'å¿å¡«' }\r\n      ]\r\n    }\r\n  ];\r\n\r\n  data: ApprovalItemEntity[] = [];\r\n\r\n  // å®¡æ¹å¨ä½\r\n  actions: any[];\r\n  actionsCols = [\r\n    { title: 'ç¼å·', field: 'code', width: 80 },\r\n    { title: 'åç§°', field: 'name', width: 90 }];\r\n\r\n  constructor(\r\n    private formBuilder: FormBuilder,\r\n    private message: MessagerService,\r\n    private util: ProcessDeUtil,\r\n    private http: HttpService,\r\n    private uiState: ProcessDesignerUIState\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.getActionsList();\r\n  }\r\n\r\n  clickOK() {\r\n    this.grid.endCellEdit();\r\n    if (this.validator()) {\r\n      const object = { value: this.data, parameters: null };\r\n      this.submitModal.emit(object);\r\n    }\r\n  }\r\n\r\n  clickCancel() {\r\n    this.closeModal.emit();\r\n  }\r\n\r\n  private validator(): boolean {\r\n    if (this.data.findIndex(d => !d.workFlowAction) > -1) {\r\n      this.message.warning('å®¡æ¹é¡¹æµè½¬æ¹åä¸åè®¸ä¸ºç©ºï¼è¯·ä¿®æ¹ï¼');\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  selectChanged(data: any) { }\r\n\r\n  deleteRow() {\r\n    this.grid.endCellEdit();\r\n    if (this.grid.selectedRow && this.grid.selectedRow.data) {\r\n      const i = this.data.findIndex(d => d.value === this.grid.selectedRow.data.value);\r\n      this.data.splice(i, 1);\r\n      this.grid.loadData(this.data);\r\n    } else {\r\n      this.message.info('è¯·é¦åéä¸­ä¸æ¡éé¡¹ï¼');\r\n    }\r\n  }\r\n\r\n  private getActionsList() {\r\n    let url = this.util.getApprovalActionWebApi() + '?';\r\n    if (this.uiState.bizActivityId) {\r\n      url += `bizActivityId=${this.uiState.bizActivityId}`;\r\n    } else {\r\n      url += `bizActivityId=`;\r\n    }\r\n\r\n    this.http.get(url).subscribe((data: any) => {\r\n        data = data.filter(a => this.actionValidate(a));\r\n        this.actions = data;\r\n      });\r\n  }\r\n\r\n  actionsSelect() {\r\n    const selections: any[] = this.actionsTable.checkeds;\r\n    if (selections && selections.length > 0) {\r\n      selections.forEach(action => {\r\n        const item = new ApprovalItemEntity(action.data.code, action.data.name, action.data.workFlowAction);\r\n        const index = this.data.findIndex(act => act.value === action.data.code);\r\n        if (index > -1) {\r\n          this.data.splice(index, 1);\r\n        }\r\n        this.data.push(item);\r\n      });\r\n      this.grid.loadData(this.data);\r\n    }\r\n    this.actionsDialog.close();\r\n  }\r\n\r\n  private actionValidate(action: any) {\r\n    const arr = ['ViewBizLog', 'ViewFlowChart', 'AssignUser', 'Claim', 'Unclaim', 'Retrieve', 'Resubmit', 'Obsolete', 'Transfer', 'AddSignFront', 'ViewExecuteForm'];\r\n    return arr.indexOf(action.code.trim()) === -1;\r\n  }\r\n}\r\n\r\nexport class ApprovelItemsConverter implements TypeConverter {\r\n  constructor() { }\r\n\r\n  convertTo(data: any[]): string {\r\n    if (data && data.length > 0) {\r\n      return 'ï¼å·²è®¾ç½®ï¼';\r\n    } else {\r\n      return 'ï¼æªè®¾ç½®ï¼';\r\n    }\r\n  }\r\n}\r\n","import { Component, OnInit, Output, Input, EventEmitter, ViewChild, TemplateRef } from '@angular/core';\r\nimport { ExpressionService, ExpressioneditorComponent, ComputeRuleEditorComponent, ExprEditMode } from '@gsp-svc/expression';\r\nimport { ProcessDesignerUIState } from '../../app/process-designer.uistate';\r\nimport { TypeConverter } from '@farris/ui-property-panel';\r\n\r\n@Component({\r\n  selector: 'app-expression-editor',\r\n  templateUrl: './expression-editor.component.html',\r\n  styleUrls: ['./expression-editor.component.css'],\r\n})\r\nexport class ExpressionEditorComponent implements OnInit {\r\n  @Output() closeModal = new EventEmitter<any>();\r\n  @Output() submitModal = new EventEmitter<any>();\r\n\r\n  @Input() value: string;\r\n\r\n  @ViewChild('iconSelectFooter') modalFooter: TemplateRef<any>;\r\n\r\n  @Input() editorParams: any = {};\r\n\r\n  @ViewChild(ExpressioneditorComponent) editor: ExpressioneditorComponent;\r\n  @ViewChild('compute') compute: ComputeRuleEditorComponent;\r\n\r\n  contextEntities = [];\r\n\r\n  schema: any = {};\r\n  injectName = '';\r\n  modalConfig = {\r\n    title: 'æ¡ä»¶ç¼è¾',\r\n    width: 1140,\r\n    height: 520,\r\n    showButtons: true\r\n  };\r\n\r\n  constructor(\r\n    private expr: ExpressionService,\r\n    public designerState: ProcessDesignerUIState\r\n  ) {\r\n    if (this.designerState.schemas[0]) {\r\n      this.schema = this.designerState.schemas[0];\r\n      if (this.designerState.schemas[0].entityTypes && this.designerState.schemas[0].entityTypes.length > 0) {\r\n        this.injectName = this.designerState.schemas[0].entityTypes[0].name;\r\n      }\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.contextEntities = new Array();\r\n    if (this.designerState.procInstContext.length > 0) {\r\n      for (const variable of this.designerState.procInstContext) {\r\n        this.contextEntities = this.contextEntities.concat([variable]);\r\n      }\r\n    }\r\n    if (this.designerState.formalParameterContext.length > 0) {\r\n      for (const variable of this.designerState.formalParameterContext) {\r\n        if (!this.contextEntities.some(c => c.key === variable.key)) {\r\n          this.contextEntities = this.contextEntities.concat([variable]);\r\n        }\r\n      }\r\n    }\r\n    if (this.designerState.participantContext.length > 0) {\r\n      for (const variable of this.designerState.participantContext) {\r\n        if (!this.contextEntities.some(c => c.key === variable.key)) {\r\n          this.contextEntities = this.contextEntities.concat([variable]);\r\n        }\r\n      }\r\n    }\r\n    if (this.designerState.activityComponentContext.length > 0) {\r\n      for (const variable of this.designerState.activityComponentContext) {\r\n        if (!this.contextEntities.some(c => c.key === variable.key)) {\r\n          this.contextEntities = this.contextEntities.concat([variable]);\r\n        }\r\n      }\r\n    }\r\n    if (this.designerState.processVariableContext.length > 0) {\r\n      for (const variable of this.designerState.processVariableContext) {\r\n        if (!this.contextEntities.some(c => c.key === variable.key)) {\r\n          this.contextEntities = this.contextEntities.concat([variable]);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  clickOK() {\r\n    const result = this.compute.getExpr();\r\n    this.value = this.convertToValue(result.text);\r\n    const object = { value: this.value, parameters: null };\r\n    this.submitModal.emit(object);\r\n  }\r\n\r\n  /**\r\n   * åæ¢è¡¨è¾¾å¼ç±»åï¼ç®æè¡¨è¾¾å¼<--->é«çº§è¡¨è¾¾å¼ï¼\r\n   */\r\n  changeType() {\r\n    this.compute.changeType();\r\n  }\r\n\r\n  clickCancel() {\r\n    this.closeModal.emit();\r\n  }\r\n\r\n  private convertToValue(val: string): string {\r\n    if (val) {\r\n      if (val.substring(9, val.length - 2)) {\r\n        return val;\r\n      } else {\r\n        return '';\r\n      }\r\n    } else {\r\n      return '';\r\n    }\r\n  }\r\n}\r\nexport class ExpressionEditorConverter implements TypeConverter {\r\n  constructor() { }\r\n\r\n  convertTo(data: any): string {\r\n    if (data) {\r\n      return data;\r\n    } else {\r\n      return 'ï¼æªè®¾ç½®ï¼';\r\n    }\r\n  }\r\n}\r\n","import { Component, OnInit, HostBinding, Output, EventEmitter, Input, ViewChild, TemplateRef } from '@angular/core';\r\nimport { TypeConverter } from '@farris/ui-property-panel';\r\nimport { ProcessDesignerUIState } from '../../app/process-designer.uistate';\r\nimport { DialogComponent } from '@farris/ui-dialog';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { DatagridComponent } from '@farris/ui-datagrid';\r\nimport { LookupGridComponent, PickedResult } from '@farris/ui-lookup';\r\nimport { Observable, of } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'app-jump-scope',\r\n  templateUrl: './jump-scope.component.html',\r\n  styleUrls: ['./jump-scope.component.css']\r\n})\r\nexport class JumpScopeComponent implements OnInit {\r\n  @HostBinding('class')\r\n  cls = 'farris-main-area flex-column';\r\n\r\n  @Output() closeModal = new EventEmitter<any>();\r\n  @Output() submitModal = new EventEmitter<any>();\r\n\r\n  @Input()\r\n  set value(data: any) {\r\n    if (data) {\r\n      this.category = data.Category;\r\n      this.defaultType = data.DefaultType;\r\n      // åå°DefaultActivityçèç¹Idï¼éååºNameç»å®å°radiogroupä¸å»ï¼defaultactyï¼\r\n      const acty: string = data.DefaultActivity;\r\n      if (acty != null) {\r\n        for (const act of this.uistate.allActList) {\r\n          if (act.Id === acty) {\r\n            this.defaultacty = act.Name;\r\n          }\r\n        }\r\n      }\r\n      // åå°DestinationActivitiesçèç¹Idï¼éååºIdåNameç»å®å°radiogroupä¸å»ï¼actisï¼\r\n      const strs: string[] = data.DestinationActivities;\r\n      if (strs && strs.length > 0) {\r\n        for (const str of strs) {\r\n          const name = this.uistate.userActList.filter(act => act.Id === str)[0].Name;\r\n          // const acti = { Id: str, Name: name };\r\n          this.actis.push(name);\r\n        }\r\n      }\r\n    } else {\r\n      this.category = 'OutConnectNode';\r\n      this.defaultType = 'FirstNode';\r\n    }\r\n  }\r\n\r\n  @ViewChild('iconSelectFooter') modalFooter: TemplateRef<any>;\r\n  modalConfig = {\r\n    title: 'ç®æ èç¹éé¡¹',\r\n    width: 520,\r\n    height: 460,\r\n    showButtons: true\r\n  };\r\n  // æ´»å¨èç¹è¡¨ä¿¡æ¯============================================\r\n  @ViewChild('allActisTable') allActisTable: DatagridComponent;\r\n  @ViewChild('allActisDialog') allActisDialog: DialogComponent;\r\n  @ViewChild('actTable') actTable: DatagridComponent;\r\n  @ViewChild('lookup') lookup: LookupGridComponent;\r\n\r\n  cols = [\r\n    { title: 'åç§°', field: 'Name', width: 60, searchField: 'Name' },\r\n    { title: 'ID', field: 'Id', width: 90, searchField: 'Id' }];\r\n  // ==========================================================\r\n  actis = [];\r\n  fullActis = [];\r\n  defaultacty = '';\r\n  categoryListItems = [\r\n    { value: 'OutConnectNode', name: 'æµç¨å¾è¿çº¿èç¹'},\r\n    { value: 'Global', name: 'æµç¨åææèç¹'},\r\n    { value: 'AfterNodes', name: 'ææåç»§èç¹'},\r\n    { value: 'SpecifiedSet', name: 'æµç¨å¾è¿çº¿èç¹+éå èç¹' }];\r\n  category = '';\r\n  defaultType = '';\r\n  defaultTypeListItems = [\r\n    { value: 'FirstNode', name: 'æ¡ä»¶ä¸ºtrueçè¿çº¿èç¹ï¼å½æå¤æ¡æ¶é»è®¤éä¸­é¦æ¡'},\r\n    { value: 'NullNode', name: 'é»è®¤ä¸ºç©ºï¼æ¯æ¬¡é½æå¨éæ©'},\r\n    { value: 'SpecifyNode', name: 'æå®é»è®¤èç¹' }];\r\n  defaultActivity = '';\r\n  pageInfo = {\r\n    pageIndex: 1,\r\n    pageList: [10, 20, 30, 50],\r\n    pageSize: 20\r\n  };\r\n  outConnectNode: true;\r\n  total: number;\r\n  constructor(\r\n    public uistate: ProcessDesignerUIState,\r\n    private message: MessagerService) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  clickOK() {\r\n    if (this.validator()) {\r\n      let value;\r\n      const list = [];\r\n      // éæ°æå¼è®¾ç½®çé¢ï¼æ²¡æè¿è¡èç¹éç½®çæåµï¼DefaultActivityï¼\r\n      if ( this.defaultActivity === '' && this.defaultacty !== '') {\r\n        for (const defAct of this.uistate.allActList) {\r\n          if (defAct.Name === this.defaultacty) {\r\n            this.defaultActivity = defAct.Id;\r\n          }\r\n        }\r\n      }\r\n      // éæ°æå¼è®¾ç½®çé¢ï¼æ²¡æè¿è¡èç¹éç½®çæåµï¼DestinationActivitiesï¼\r\n      if (this.fullActis.length === 0 && this.actis.length > 0) {\r\n        for (const act of this.actis) {\r\n          for (const allAct of this.uistate.userActList) {\r\n            if (act === allAct.Name) {\r\n              list.push(allAct.Id);\r\n            }\r\n          }\r\n        }\r\n      } else if (this.category === 'SpecifiedSet' && this.fullActis && this.fullActis.length > 0) {\r\n        // éå èç¹çidä¼ ç»æ¨¡åä¸çDestinationActivities\r\n        this.fullActis.forEach(act => list.push(act.Id));\r\n      }\r\n      value = {\r\n        Category: this.category,\r\n        DefaultType: this.defaultType,\r\n        DefaultActivity: this.defaultActivity,\r\n        DestinationActivities: list,\r\n      };\r\n      const object = { value, parameters: null };\r\n      this.submitModal.emit(object);\r\n    }\r\n  }\r\n\r\n  clickCancel() {\r\n    this.closeModal.emit();\r\n  }\r\n\r\n  private validator(): boolean {\r\n    if (!this.category) {\r\n      this.message.warning('å°æªè®¾ç½®ç®æ èç¹éé¡¹ï¼è¯·äºè§£ï¼');\r\n      return false;\r\n    }\r\n    // if (this.category === 'SpecifiedSet' && Object.prototype.isPrototypeOf(this.actis)) {\r\n    //   this.message.info('å°æªéæ©éå èç¹ï¼è¯·äºè§£ï¼');\r\n    //   return false;\r\n    // }\r\n    if (this.defaultType === 'SpecifyNode' && this.defaultacty === '') {\r\n      this.message.warning('å°æªæå®é»è®¤èç¹ï¼è¯·äºè§£ï¼');\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  actisSelect = (rowData): Observable<PickedResult> => {\r\n    // éå èç¹çå¸®å©åäºä»¶ï¼æéä¸­çæ°æ®èµç»fullActisï¼æ­¤å¤å¤ççç®çæ¯ä¸ºäºæ¾ç¤ºNameåæ¶åIdå¼ï¼\r\n    // console.log(rowData);\r\n    this.fullActis = rowData;\r\n    return of({\r\n      closeDialog: true\r\n    });\r\n  }\r\n\r\n  defaultActivitySelect = (rowData): Observable<PickedResult> => {\r\n    // é»è®¤èç¹çå¸®å©åäºä»¶ï¼æéä¸­çidèµç»defaultActivityï¼æ­¤å¤å¤ççç®çæ¯ä¸ºäºæ¾ç¤ºNameåæ¶åIdå¼ï¼\r\n    this.defaultActivity = rowData.Id;\r\n    return of({\r\n      closeDialog: true\r\n    });\r\n  }\r\n\r\n  deleteRow() {\r\n    if (this.actTable.selectedRow && this.actTable.selectedRow.data) {\r\n      const i = this.actis.findIndex(d => d.id === this.actTable.selectedRow.data.id);\r\n      this.actis.splice(i, 1);\r\n      this.actTable.loadData(this.actis);\r\n    } else {\r\n      this.message.info('è¯·é¦åéä¸­ä¸æ¡éé¡¹ï¼');\r\n    }\r\n  }\r\n}\r\nexport class JumpScopeConverter implements TypeConverter {\r\n  constructor() { }\r\n\r\n  convertTo(data: any): string {\r\n    if (data) {\r\n      return 'ï¼å·²è®¾ç½®ï¼';\r\n    }\r\n    return 'ï¼æªè®¾ç½®ï¼';\r\n  }\r\n}\r\n\r\n","import { Component, OnInit, HostBinding, Output, EventEmitter, Input, ViewChild, TemplateRef, AfterViewInit } from '@angular/core';\r\nimport { TypeConverter } from '@farris/ui-property-panel';\r\nimport { ProcessDesignerUIState } from '../../app/process-designer.uistate';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { Observable, of } from 'rxjs';\r\nimport { PickedResult, LookupGridComponent } from '@farris/ui-lookup';\r\nimport { THROW_IF_NOT_FOUND } from '@angular/core/src/di/injector';\r\n\r\n@Component({\r\n  selector: 'procDesigner-backward-rule',\r\n  templateUrl: './backward-rule.component.html',\r\n  styleUrls: ['./backward-rule.component.scss']\r\n})\r\nexport class BackwardRuleComponent implements OnInit, AfterViewInit {\r\n  @HostBinding('class')\r\n  cls = 'farris-main-area flex-column';\r\n  @Input() editorParams: any = {};\r\n  @Input()\r\n  set value(data: any) {\r\n    if (data) {\r\n      this.selectAbleChecked = data.SelectTargetAble;\r\n      this.waitReturnChecked = data.WaitReturn;\r\n      this.dynamicBackWardRuleAbleChecked = data.DynamicBackWardRuleAble;\r\n      if (!data.TargetRef) {\r\n        this.targetRef = 'Empty';\r\n      } else {\r\n        this.targetRef = data.TargetRef;\r\n      }\r\n      const act = this.listItems.find(item => item.Id === this.targetRef);\r\n      if (act) {\r\n        this.displayText = act.Name;\r\n      } else {\r\n        this.displayText = '';\r\n        setTimeout(() => {\r\n          this.message.warning('é©³åæ´»å¨èç¹å·²ä¸å­å¨ï¼è¯·éæ°ç¼è¾');\r\n        }, 500);\r\n      }\r\n    }\r\n  }\r\n  @Input() nodeType: 'UserActivity' | 'CallActivitySubProcess' = 'UserActivity';\r\n\r\n  @Output() closeModal = new EventEmitter<any>();\r\n  @Output() submitModal = new EventEmitter<any>();\r\n\r\n  @ViewChild('iconSelectFooter') modalFooter: TemplateRef<any>;\r\n  @ViewChild('hlp') hlp: LookupGridComponent;\r\n  modalConfig = {\r\n    title: 'é©³åè§å',\r\n    width: 430,\r\n    height: 370,\r\n    showButtons: true\r\n  };\r\n  displayText: string;\r\n  listItems = [\r\n    { Id: 'InitialActityId', Name: 'å¼å§èç¹' },\r\n    { Id: 'PrecursorActivityId', Name: 'åç½®èç¹' },\r\n    { Id: 'Empty', Name: 'ç©º' }\r\n  ];\r\n\r\n  items = [];\r\n\r\n  columns = [\r\n    { title: 'åç§°', field: 'Name', width: 100, searchField: 'Name' },\r\n    { title: 'æ è¯', field: 'Id', width: 100, searchField: 'Id' },\r\n  ];\r\n  selectAbleChecked = false;\r\n  waitReturnChecked = false;\r\n  dynamicBackWardRuleAbleChecked = false;\r\n  targetRef = this.listItems[0].Id;\r\n\r\n  pageInfo = {\r\n    pageIndex: 1,\r\n    pageList: [10, 20, 30, 50],\r\n    pageSize: 20\r\n  };\r\n\r\n  total: number;\r\n\r\n  constructor(\r\n    private uiState: ProcessDesignerUIState,\r\n    private message: MessagerService\r\n  ) {\r\n    this.listItems = this.listItems.concat(this.uiState.userActList);\r\n    this.items = this.listItems;\r\n    this.total = this.listItems.length;\r\n    }\r\n\r\n  ngOnInit() {\r\n    this.nodeType = this.editorParams.nodeType;\r\n    if (this.nodeType !== 'UserActivity') {\r\n      this.listItems = this.listItems.filter(i => i.Id !== 'Empty');\r\n      this.items = this.listItems;\r\n      this.total = this.listItems.length;\r\n    }\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n  }\r\n\r\n  selectAbleClick() {\r\n    if (this.uiState.propertyData.ClrTypeID === 'wf.UserActivity'\r\n      && this.uiState.propertyData.CompleteStrategy !== this.uiState.completeIterator[0].key\r\n      && this.selectAbleChecked === true) {\r\n      this.message.info('ä¼ç­¾ç­ç¥ä¸ï¼ä¸åè®¸âå¨æéæ©é©³åçº§æ¬¡â!', () => {\r\n        this.selectAbleChecked = false;\r\n      });\r\n    }\r\n  }\r\n  waitReturnClick() {\r\n    this.waitReturnChecked = !this.waitReturnChecked;\r\n  }\r\n  dynamicBackWardRuleAbleClick() {\r\n    this.dynamicBackWardRuleAbleChecked = !this.dynamicBackWardRuleAbleChecked;\r\n  }\r\n  dictPicked = (arg: any): Observable<PickedResult> => {\r\n    this.targetRef = arg.Id;\r\n    this.displayText = arg.Name;\r\n    return of({ closeDialog: true });\r\n  }\r\n  clickOK() {\r\n    const backWardRule = {\r\n      TargetRef: this.getTargetRef(),\r\n      SelectTargetAble: this.selectAbleChecked,\r\n      WaitReturn: this.waitReturnChecked,\r\n      DynamicBackWardRuleAble: this.dynamicBackWardRuleAbleChecked,\r\n    };\r\n    const object = { value: backWardRule, parameters: null };\r\n    this.submitModal.emit(object);\r\n  }\r\n\r\n  clickCancel() {\r\n    this.closeModal.emit();\r\n  }\r\n\r\n  pagerChanged(arg: any) {\r\n    this.pageInfo.pageIndex = arg.pageIndex;\r\n    this.pageInfo.pageSize = arg.pageSize;\r\n    const search = {\r\n      field: arg.searchValue.searchField,\r\n      value: arg.searchValue.searchValue\r\n    };\r\n    this.load(search);\r\n  }\r\n\r\n  pageSizeChange(arg: any) {\r\n    console.log(arg);\r\n    this.pageInfo.pageIndex = arg.pageIndex;\r\n    this.pageInfo.pageSize = arg.pageSize;\r\n    const search = {\r\n      field: arg.searchValue.searchField,\r\n      value: arg.searchValue.searchValue\r\n    };\r\n    this.load(search);\r\n  }\r\n  search(arg: any) {\r\n    this.pageInfo.pageIndex = arg.pageInfo.pageIndex;\r\n    this.pageInfo.pageSize = arg.pageInfo.pageSize;\r\n    const search = arg.search;\r\n\r\n    this.load(search);\r\n  }\r\n\r\n  load(search?: { field: string, value: string}) {\r\n    const start = (this.pageInfo.pageIndex - 1) * this.pageInfo.pageSize;\r\n    const end = start + this.pageInfo.pageSize;\r\n    let items = [];\r\n    if (search) {\r\n      if (search.field === '*') {\r\n        items = this.listItems.filter(i => i.Name.indexOf(search.value) > -1 || i.Id.indexOf(search.value) > -1);\r\n      } else {\r\n        items = this.listItems.filter(f => f[search.field].indexOf(search.value) > -1);\r\n      }\r\n    } else {\r\n      items = this.listItems;\r\n    }\r\n    this.total = items.length;\r\n    this.items = items; // .slice(start, end);\r\n    this.hlp.componentRef.instance.loadData({\r\n      // total: this.total,\r\n      // pageSize: this.pageInfo.pageSize,\r\n      // pageIndex: this.pageInfo.pageIndex,\r\n      data: this.items\r\n    });\r\n  }\r\n  private getTargetRef() {\r\n    if (this.targetRef === 'Empty') {\r\n      return '';\r\n    } else {\r\n      return this.targetRef;\r\n    }\r\n  }\r\n}\r\nexport class BackwardRuleConverter implements TypeConverter {\r\n  constructor() { }\r\n\r\n  convertTo(data: any): string {\r\n    if (data) {\r\n      return 'ï¼å·²è®¾ç½®ï¼';\r\n    }\r\n    return 'ï¼æªè®¾ç½®ï¼';\r\n  }\r\n}\r\n\r\n","import { Injectable } from '@angular/core';\r\nimport { PerformerEntity } from './entities/performer.entity';\r\nimport { BizComponentEntity } from '../../domain/entities/biz-component.entity';\r\nimport { ReportingLineDataEntity } from './views/reporting-line/reporting-line-data.entity';\r\nimport { PerformerInfo } from './entities/performer-info.entity';\r\nimport { PerformerDescription } from './entities/performer-description';\r\n\r\n@Injectable()\r\nexport class PerformerUIState {\r\n    performersList: PerformerDescription[] = [];\r\n    curPerformer: any;\r\n    typeCollection = [\r\n        { text: 'ç¨æ·', value: 'wf.UserParticipant' },\r\n        { text: 'å²ä½', value: 'wf.PositionParticipant' },\r\n        { text: 'æä»¶åä¸è', value: 'wf.ComponentParticipant' },\r\n        { text: 'æ±æ¥å³ç³»', value: 'wf.ReportingLineParticipant'},\r\n        { text: 'ç©éµ', value: 'wf.MatrixParticipant'}\r\n    ];\r\n\r\n    performerInfo: PerformerInfo = { performers: [], components: [], reportingLines: [], matrixParticipants: [], options: null };\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\n@Injectable()\r\nexport class PerformerRepository {\r\n\r\n}\r\n","import { Injectable, Injector, ComponentFactoryResolver } from '@angular/core';\r\nimport { PerformerEditComponent } from './views/performer-edit/performer-edit.component';\r\nimport { BsModalService } from '@farris/ui-modal';\r\n\r\n@Injectable()\r\nexport class PerformerViewModel {\r\n    constructor(\r\n        private resolver: ComponentFactoryResolver,\r\n        private injector: Injector,\r\n        private modalService: BsModalService\r\n    ) { }\r\n}\r\n","import { ProcessDeUtil } from '../../../domain/process-de-util';\r\n\r\nexport class PerformerEntity {\r\n    constructor(id?: string, name?: string, type?: string) {\r\n        this.id = '_' + ProcessDeUtil.GenerateElementId();\r\n        this.performerId = id;\r\n        this.performerName = name;\r\n        this.type = type;\r\n    }\r\n    id: string;\r\n    performerId: string;\r\n    performerName: string;\r\n    type: string;\r\n    orgId?: string;\r\n    orgName?: string;\r\n    orgType?: string;\r\n    condition?: string;\r\n    tag?: string;\r\n}\r\n","import { PerformerEntity } from './performer.entity';\r\n\r\nexport class UserPerformerEntity extends PerformerEntity {\r\n  userType: string; // åºå®ç¨æ·è¿æ¯åéåä¸è\r\n  constructor(id?: string, name?: string, type?: string) {\r\n    super(id,name,type);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs/observable';\r\nimport { map } from 'rxjs/operators';\r\nimport { ReplaySubject } from 'rxjs/ReplaySubject';\r\n\r\n@Injectable()\r\nexport class PerformerConfigService {\r\n    private lookupConfig = new ReplaySubject<any>();\r\n    constructor(private http: HttpClient) {\r\n        this.http.get('/platform/runtime/wf/web/wf-proc-designer/assets/config/performerlookupconfig.json').subscribe((data) => {\r\n            this.lookupConfig.next(data);\r\n        });\r\n    }\r\n\r\n    getLookupConfig(): Observable<any> {\r\n        return this.lookupConfig.asObservable();\r\n    }\r\n}\r\n","import { Component, OnInit, HostBinding, ViewChild, Injector, NgZone, AfterViewInit, ElementRef } from '@angular/core';\r\nimport { SysFarrisLookupComponent } from '@gsp-sys/sysmgr-ui';\r\nimport { ProcessDesignerUIState } from '../../../../app/process-designer.uistate';\r\nimport { ExprEditMode, ExpressionService, InjectedType } from '@gsp-svc/expression';\r\nimport { UserPerformerEntity } from '../../entities/user-performer.entity';\r\nimport { PerformerConfigService } from '../../performer-config.service';\r\nimport { HttpService } from '@ecp-caf/caf-common';\r\nimport {MessagerService} from \"@farris/ui-messager\";\r\n\r\ndeclare var System: any;\r\n@Component({\r\n  selector: 'app-user-performer',\r\n  templateUrl: './user-performer.component.html',\r\n  styleUrls: ['./user-performer.component.scss']\r\n})\r\nexport class UserPerformerComponent implements OnInit, AfterViewInit {\r\n  @HostBinding('class')\r\n  cls = 'd-flex flex-fill h-100';\r\n\r\n  @ViewChild(SysFarrisLookupComponent) userHelp: SysFarrisLookupComponent;\r\n\r\n  @ViewChild('inputGroup') inputGroup: ElementRef;\r\n  showClearButton = false;\r\n\r\n  bindingData: { id?, name?} = {};\r\n\r\n  userTypeCollection = [\r\n    { text: 'åºå®ç¨æ·', value: 'user' },\r\n    { text: 'åéåä¸è', value: 'variable' }\r\n  ];\r\n  userType = this.userTypeCollection[0].value;\r\n  variableOrgTypes = [\r\n    { name: 'ç³»ç»ç¨æ·', value: 'Sys' },\r\n    { name: 'è¡æ¿äººå', value: 'Administrative_organization' }\r\n  ];\r\n  curOrgType = this.variableOrgTypes[0].value;\r\n  hasAdminOrg = false;\r\n  userTypeButtonNeedShow = false; // ç¨æ·ç±»ååéæé®æ¯å¦éè¦æ¾ç¤º\r\n\r\n  condition: string;\r\n  users: UserPerformerEntity[] = [];\r\n  constructor(\r\n    private designerUIState: ProcessDesignerUIState,\r\n    private expr: ExpressionService,\r\n    private injector: Injector,\r\n    private lookupConfig: PerformerConfigService,\r\n    private ngZone: NgZone,\r\n    private http?: HttpService,\r\n    private message?: MessagerService,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    let url = '/api/runtime/wf/v1.0/reportingOrgType/hasAdminOrg';\r\n    this.http.get(url).subscribe((data: any) => {\r\n      this.hasAdminOrg = data;\r\n    });\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    this.ngZone.runOutsideAngular(() => {\r\n      this.inputGroup.nativeElement.addEventListener(\r\n        'mouseenter',\r\n        this.onMouseEnter.bind(this)\r\n      );\r\n      this.inputGroup.nativeElement.addEventListener(\r\n        'mouseleave',\r\n        this.onMouseLeave.bind(this)\r\n      );\r\n    });\r\n  }\r\n\r\n  onMouseEnter(event) {\r\n    this.showClearButton = true;\r\n    if (this.showClearButton) {\r\n      this.toggleClearIcon(event, true);\r\n    }\r\n  }\r\n  onMouseLeave(event) {\r\n    this.showClearButton = false;\r\n    this.toggleClearIcon(event, false);\r\n  }\r\n  private toggleClearIcon(event: any, isShow = false) {\r\n    const str = isShow ? '' : 'none';\r\n    const clearIcon = event.target.querySelector('.input-group-clear');\r\n    if (clearIcon) {\r\n      clearIcon.style.display = str;\r\n    }\r\n  }\r\n  userTypeChange(data) {\r\n    // åæ¢ç±»åæ¶ï¼æ¸ç©ºusers\r\n    this.users = [];\r\n    // åæ¢ç±»åæ¶ï¼äººåç±»åèªå¨åæ¢æç³»ç»ç¨æ·\r\n    this.orgTypeChange('Sys');\r\n    // æè¡æ¿å¸®å©å¹¶ä¸åæ¢å°åéåä¸èææ¾ç¤º\r\n    this.userTypeButtonNeedShow = this.hasAdminOrg && data.data.value === 'variable';\r\n  }\r\n  clear(data: any) {\r\n    this.bindingData = {};\r\n    this.users = [];\r\n    this.variableOrgTypes = [\r\n      { name: 'ç³»ç»ç¨æ·', value: 'Sys' },\r\n      { name: 'è¡æ¿äººå', value: 'Administrative_organization' }\r\n    ];\r\n  }\r\n  selectUsers(data: any) {\r\n    // åºå®ç¨æ·\r\n    if (this.userType === this.userTypeCollection[0].value) {\r\n      this.lookupConfig.getLookupConfig().subscribe(re => {\r\n        // é¡¹ç®éç½®äºèªå·±çå¸®å©æ¶\r\n        if (re.user && re.user.impl) {\r\n          System.import(re.user.impl)\r\n            .then((moduleFactorys: any) => {\r\n              const moduleFactory: any = Object.values(moduleFactorys)[0];\r\n              const moduleRef = moduleFactory.create(this.injector);\r\n              moduleRef.instance.showHelp().subscribe(data => {\r\n                if (data && data.length > 0) {\r\n                  this.users = data.map(u => {\r\n                    const user = new UserPerformerEntity(u.id, u.name, 'wf.UserParticipant');\r\n                    user.orgId = u.orgId;\r\n                    user.orgName = u.orgName;\r\n                    user.userType = this.userTypeCollection[0].value;\r\n                    return user;\r\n                  });\r\n                }\r\n              });\r\n            });\r\n        } else { // å è½½é»è®¤å¸®å©\r\n          this.userHelp.showHelp();\r\n        }\r\n      });\r\n    } else {\r\n      this.showExprHelp();\r\n    }\r\n  }\r\n  editConditon() {\r\n    if (this.designerUIState.schemas.length > 0) {\r\n      for (const schema of this.designerUIState.schemas) {\r\n        this.expr.addSchema('Schema', schema);\r\n      }\r\n      if (this.designerUIState.schemas[0].entityTypes && this.designerUIState.schemas[0].entityTypes.length > 0) {\r\n        const entityType = this.designerUIState.schemas[0].entityTypes[0];\r\n        this.expr.addInjectedEntity(entityType.name, 'Schema',\r\n          entityType.name, InjectedType.EntityType);\r\n      }\r\n    }\r\n    const context = new Array();\r\n    if (this.designerUIState.procInstContext.length > 0) {\r\n      for (const variable of this.designerUIState.procInstContext) {\r\n        context.push(variable);\r\n      }\r\n    }\r\n    if (this.designerUIState.formalParameterContext.length > 0) {\r\n      for (const variable of this.designerUIState.formalParameterContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (this.designerUIState.participantContext.length > 0) {\r\n      for (const variable of this.designerUIState.participantContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (this.designerUIState.processVariableContext.length > 0) {\r\n      for (const variable of this.designerUIState.processVariableContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (this.designerUIState.activityComponentContext.length > 0) {\r\n      for (const variable of this.designerUIState.activityComponentContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (context.length > 0) {\r\n      for (const v of context) {\r\n        this.expr.addContext(v);\r\n      }\r\n    }\r\n    this.expr.setEditPattern(ExprEditMode.Conditional); // è¡¨è¾¾å¼å±ç°æ¨¡å¼ï¼é»è®¤ç®æç\r\n    this.expr.addExpressionText(this.condition);\r\n    this.expr.buildExpression().then((expressioninfo: string) => {\r\n      this.condition = expressioninfo;\r\n    });\r\n  }\r\n  usersSelect(data: any[]) {\r\n    this.users = data.map(u => {\r\n      const user = new UserPerformerEntity(u.id, u.name, 'wf.UserParticipant');\r\n      user.orgId = u.sysOrgId;\r\n      user.orgName = u.sysOrgName;\r\n      user.userType = this.userTypeCollection[0].value;\r\n\r\n      return user;\r\n    });\r\n  }\r\n  showExprHelp() {\r\n    if (this.designerUIState.schemas.length > 0) {\r\n      for (const schema of this.designerUIState.schemas) {\r\n        this.expr.addSchema('Schema', schema);\r\n      }\r\n      if (this.designerUIState.schemas[0].entityTypes && this.designerUIState.schemas[0].entityTypes.length > 0) {\r\n        const entityType = this.designerUIState.schemas[0].entityTypes[0];\r\n        this.expr.addInjectedEntity(entityType.name, 'Schema',\r\n          entityType.name, InjectedType.EntityType);\r\n      }\r\n    }\r\n    const context = new Array();\r\n    if (this.designerUIState.participantContext.length > 0) {\r\n      for (const variable of this.designerUIState.participantContext) {\r\n        context.push(variable);\r\n      }\r\n    }\r\n    if (this.designerUIState.processVariableContext.length > 0) {\r\n      for (const variable of this.designerUIState.processVariableContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (context.length > 0) {\r\n      for (const v of context) {\r\n        this.expr.addContext(v);\r\n      }\r\n    }\r\n    if (this.users.length > 0) {\r\n      this.expr.addExpressionText(this.users[0].performerId);\r\n    } else {\r\n      this.expr.addExpressionText('');\r\n    }\r\n    this.expr.buildExpression().then((expressioninfo: string) => {\r\n      const user = new UserPerformerEntity(expressioninfo, '', 'wf.UserParticipant');\r\n      user.tag = 'expression';\r\n      user.performerName = this.variableParticipantName(expressioninfo);\r\n      user.userType = this.userTypeCollection[1].value;\r\n      if(this.variableParticipantName(expressioninfo) === ''){\r\n        this.message.error('è¡æ¿äººåç±»åä¸è½ä½¿ç¨ä¸ä¸æåé');\r\n        this.users = [];\r\n      }else{\r\n        this.users = [user];\r\n      }\r\n      if(user.performerId.indexOf(\"GetContextParameter\") >= 0){ // æ ¹æ®è¡¨è¾¾å¼ä¸­çå½æ°åå¤æ­æ¯å¦ä½¿ç¨çæ¯ä¸ä¸æåé\r\n        this.variableOrgTypes = [\r\n          { name: 'ç³»ç»ç¨æ·', value: 'Sys' }\r\n        ];\r\n      } else {\r\n        this.variableOrgTypes = [\r\n          { name: 'ç³»ç»ç¨æ·', value: 'Sys' },\r\n          { name: 'è¡æ¿äººå', value: 'Administrative_organization' }\r\n        ];\r\n      }\r\n    });\r\n  }\r\n  getPerformers() {\r\n    this.users.map(user => {\r\n      if (user.orgId === undefined) {\r\n        user.orgType = this.curOrgType;\r\n        return user;\r\n      }\r\n    });\r\n    if (this.condition) {\r\n      this.users = this.users.map(user => {\r\n        user.condition = this.condition;\r\n        return user;\r\n      });\r\n    }\r\n    return this.users;\r\n  }\r\n  private variableParticipantName(expr: string): string {\r\n    for (const c of this.designerUIState.participantContext) {\r\n      if (expr.indexOf(c.key) > -1) {\r\n        if(this.curOrgType !== 'Sys'){ // è¡æ¿äººåç±»åä¸åè®¸ä½¿ç¨ä¸ä¸æåé\r\n          return '';\r\n        }\r\n        return c.name;\r\n      }\r\n    }\r\n    for (const c of this.designerUIState.processVariableContext) {\r\n      if (expr.indexOf(c.key) > -1) {\r\n        return c.name;\r\n      }\r\n    }\r\n    return 'ä¸å¡å­æ®µ';\r\n  }\r\n  orgTypeChange(data: any) {\r\n    if (data === 'Sys') {\r\n      this.curOrgType = this.variableOrgTypes[0].value;\r\n    } else {\r\n        this.curOrgType = this.variableOrgTypes[1].value;\r\n    }\r\n  }\r\n}\r\n","import { PerformerEntity } from './performer.entity';\r\n\r\nexport class PositionPerformerEntity extends PerformerEntity {\r\n    positionType: string;\r\n    constructor() {\r\n        super();\r\n    }\r\n}\r\n","import { Component, OnInit, HostBinding, ViewChild, ElementRef, NgZone, AfterViewInit } from '@angular/core';\r\nimport { HttpService } from '@ecp-caf/caf-common';\r\nimport { SysFarrisLookupComponent } from '@gsp-sys/sysmgr-ui';\r\nimport { ProcessDesignerUIState } from '../../../../app/process-designer.uistate';\r\nimport { ExprEditMode, ExpressionService, InjectedType } from '@gsp-svc/expression';\r\nimport { PositionPerformerEntity } from '../../entities/position-performer.entity';\r\n\r\n@Component({\r\n  selector: 'app-position-performer',\r\n  templateUrl: './position-performer.component.html',\r\n  styleUrls: ['./position-performer.component.scss']\r\n})\r\nexport class PositionPerformerComponent implements OnInit, AfterViewInit {\r\n  @HostBinding('class')\r\n  cls = 'd-flex flex-fill h-100';\r\n  @ViewChild(SysFarrisLookupComponent) posiHelp: SysFarrisLookupComponent;\r\n\r\n  @ViewChild('inputGroup') inputGroup: ElementRef;\r\n  showClearButton = false;\r\n\r\n  groupIcon = '<i class=\"f-icon f-icon-lookup\"></i>';\r\n\r\n  positionTypes = [\r\n    { value: '0', text: 'ç»ç»å²' },\r\n    { value: '1', text: 'éç¨å²' }\r\n  ];\r\n\r\n  condition: string;\r\n\r\n  filter = { };\r\n  position: PositionPerformerEntity = new PositionPerformerEntity();\r\n  constructor(\r\n    private http: HttpService,\r\n    public designerUIState: ProcessDesignerUIState,\r\n    private expr: ExpressionService,\r\n    private ngZone: NgZone,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    this.ngZone.runOutsideAngular(() => {\r\n      this.inputGroup.nativeElement.addEventListener(\r\n        'mouseenter',\r\n        this.onMouseEnter.bind(this)\r\n      );\r\n      this.inputGroup.nativeElement.addEventListener(\r\n        'mouseleave',\r\n        this.onMouseLeave.bind(this)\r\n      );\r\n    });\r\n  }\r\n\r\n  onMouseEnter(event) {\r\n    this.showClearButton = true;\r\n    if (this.showClearButton) {\r\n      this.toggleClearIcon(event, true);\r\n    }\r\n  }\r\n  onMouseLeave(event) {\r\n    this.showClearButton = false;\r\n    this.toggleClearIcon(event, false);\r\n  }\r\n  private toggleClearIcon(event: any, isShow = false) {\r\n    const str = isShow ? '' : 'none';\r\n    const clearIcon = event.target.querySelector('.input-group-clear');\r\n    if (clearIcon) {\r\n      clearIcon.style.display = str;\r\n    }\r\n  }\r\n\r\n  clear() {\r\n    this.position.performerId = null;\r\n    this.position.performerName = null;\r\n  }\r\n\r\n  positionTypeChange(data) {\r\n    if (data.value === '0') {\r\n      this.filter = { positionType: 0 };\r\n    } else {\r\n      this.filter = { positionType: 1 };\r\n    }\r\n    this.clear();\r\n    this.position.orgType = null;\r\n    this.position.orgId = null;\r\n  }\r\n\r\n  selectOrganition() {\r\n    if (this.position.positionType === '1') {\r\n      if (this.designerUIState.schemas.length > 0) {\r\n        for (const schema of this.designerUIState.schemas) {\r\n          this.expr.addSchema('Schema', schema);\r\n        }\r\n        if (this.designerUIState.schemas[0].entityTypes && this.designerUIState.schemas[0].entityTypes.length > 0) {\r\n          const entityType = this.designerUIState.schemas[0].entityTypes[0];\r\n          this.expr.addInjectedEntity(entityType.name, 'Schema',\r\n            entityType.name, InjectedType.EntityType);\r\n        }\r\n      }\r\n      this.expr.addExpressionText(this.position.orgId);\r\n      this.expr.buildExpression().then((expr: string) => {\r\n        this.position.orgId = expr;\r\n      });\r\n    }\r\n  }\r\n  selectPosition() {\r\n    this.posiHelp.showHelp();\r\n  }\r\n  editCondition() {\r\n    if (this.designerUIState.schemas.length > 0) {\r\n      for (const schema of this.designerUIState.schemas) {\r\n        this.expr.addSchema('Schema', schema);\r\n      }\r\n      if (this.designerUIState.schemas[0].entityTypes && this.designerUIState.schemas[0].entityTypes.length > 0) {\r\n        const entityType = this.designerUIState.schemas[0].entityTypes[0];\r\n        this.expr.addInjectedEntity(entityType.name, 'Schema',\r\n          entityType.name, InjectedType.EntityType);\r\n      }\r\n    }\r\n    const context = new Array();\r\n    if (this.designerUIState.procInstContext.length > 0) {\r\n      for (const variable of this.designerUIState.procInstContext) {\r\n        context.push(variable);\r\n      }\r\n    }\r\n    if (this.designerUIState.formalParameterContext.length > 0) {\r\n      for (const variable of this.designerUIState.formalParameterContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (this.designerUIState.participantContext.length > 0) {\r\n      for (const variable of this.designerUIState.participantContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (this.designerUIState.processVariableContext.length > 0) {\r\n      for (const variable of this.designerUIState.processVariableContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (this.designerUIState.activityComponentContext.length > 0) {\r\n      for (const variable of this.designerUIState.activityComponentContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (context.length > 0) {\r\n      for (const v of context) {\r\n        this.expr.addContext(v);\r\n      }\r\n    }\r\n    this.expr.setEditPattern(ExprEditMode.Conditional); // è¡¨è¾¾å¼å±ç°æ¨¡å¼ï¼é»è®¤ç®æç\r\n    this.expr.addExpressionText(this.position.condition);\r\n    this.expr.buildExpression().then((expressioninfo: string) => {\r\n      this.position.condition = expressioninfo;\r\n    });\r\n  }\r\n\r\n  orgTypeChange(re: any) {\r\n    this.position.orgType = re.data.value;\r\n  }\r\n  clearOrgType() {\r\n    this.position.orgType = null;\r\n  }\r\n  positionsSelect(data) {\r\n    if (data) {\r\n      this.position.performerId = data.id;\r\n      this.position.performerName = data.name;\r\n      this.position.type = 'wf.PositionParticipant';\r\n      if (!this.position.positionType) {\r\n        this.position.positionType = data.posType + '';\r\n        this.filter = {\r\n          positionType: data.posType\r\n        };\r\n      }\r\n    }\r\n  }\r\n  getPerformers() {\r\n    return this.position;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpService } from '@ecp-caf/caf-common';\r\nimport { Observable } from 'rxjs';\r\n\r\n@Injectable()\r\nexport class ComponentPerformerService {\r\n    constructor(private http: HttpService) {\r\n\r\n    }\r\n    getLookUpData(helpId: string, su: string, pageIndex: number, pageSiza: number, search?: any): Observable<any> {\r\n        let url = `/api/runtime/wf/v1.0/dtProcDefs/getHelpData?helpId=${helpId}&pageIndex=${pageIndex}&pageSize=${pageSiza}`;\r\n        if (search) {\r\n            url += `&searchValue=${JSON.stringify(search)}`;\r\n        }\r\n        return this.http.get(url);\r\n    }\r\n    getHelpMetaData(helpId: string, su: string): Observable<any> {\r\n        const url = `/api/runtime/lcm/v1.0/rt-metadatas/${helpId}`;\r\n        return this.http.get(url);\r\n    }\r\n}\r\n","import { ProcessDeUtil } from '../../../../domain/process-de-util';\r\n\r\nexport class ComponentPerformer {\r\n    constructor() {\r\n        this.id = ProcessDeUtil.GenerateElementId();\r\n    }\r\n    id: string;\r\n    name: string;\r\n    metadataId: string;\r\n    methodCode: string;\r\n    methodName: string;\r\n    actualParameters: Array<ActualParameter>;\r\n    condition: string;\r\n}\r\n\r\nexport class ActualParameter {\r\n    code: string;\r\n    value: string;\r\n    valueText: string;\r\n    tag: string;\r\n    fetchValueMode?: any;\r\n    fetchValueSetting?: any;\r\n}\r\n","import { Component, OnInit, ComponentFactoryResolver, Injector, Input, ViewChild, ElementRef, HostBinding, AfterViewInit, NgZone } from '@angular/core';\r\nimport { FormBuilder } from '@angular/forms';\r\nimport { ProcessDesignerUIState } from '../../../../app/process-designer.uistate';\r\nimport { ExpressionService, InjectedType, ExprEditMode } from '@gsp-svc/expression';\r\nimport { SessionService } from '@ecp-caf/caf-common';\r\nimport { BsModalService } from '@farris/ui-modal';\r\nimport { CommonComponentUiRTService, SelectorResult } from '@gsp-cmp/ccmp-ui';\r\nimport { SelectMetadataRTComponent, Metadata4RefDto, MetadataDto } from '@gsp-lcm/metadatart-selector';\r\nimport { GspComponent } from '@gsp-cmp/common-component';\r\nimport { DataColumn, DatagridComponent } from '@farris/ui-datagrid';\r\nimport { of, forkJoin } from 'rxjs';\r\nimport { RowEditParam } from '@farris/ui-datagrid/lib/types';\r\nimport { EditorTypes } from '@farris/ui-datagrid-editors';\r\nimport { LookupGridComponent } from '@farris/ui-lookup';\r\nimport { ComponentPerformerService } from './component-performer.service';\r\nimport { WebServiceParameter, ParameterFetchValueMode, HelpFetchValueSetting } from '@gsp-cmp/wscmp-models';\r\nimport { ComponentPerformer, ActualParameter } from './component-performer.entity';\r\nimport { ProcessDeUtil } from '../../../../domain/process-de-util';\r\n\r\n@Component({\r\n  selector: 'app-component-performer',\r\n  templateUrl: './component-performer.component.html',\r\n  styleUrls: ['./component-performer.component.scss'],\r\n  providers: [ComponentPerformerService]\r\n})\r\nexport class ComponentPerformerComponent implements OnInit, AfterViewInit {\r\n  @HostBinding('class')\r\n  cls = 'farris-main-area flex-column';\r\n\r\n  private componentPerformer: ComponentPerformer;\r\n  @ViewChild(DatagridComponent) grid: DatagridComponent;\r\n  @ViewChild(LookupGridComponent) lookup: LookupGridComponent;\r\n\r\n  @ViewChild('inputGroup') inputGroup: ElementRef;\r\n  showClearButton = false;\r\n\r\n\r\n  @Input()\r\n  set component(cmp: ComponentPerformer) {\r\n    if (cmp && cmp.methodCode) {\r\n      this.service.getHelpMetaData(cmp.metadataId, '').subscribe(re => {\r\n        const c = JSON.parse(re.content);\r\n        const operation = c.operations.find(o => o.code === cmp.methodCode);\r\n        if (operation) {\r\n          cmp.actualParameters = cmp.actualParameters.map(a => {\r\n            const p = operation.parameters.find(i => i.code === a.code);\r\n            if (p) {\r\n              return {\r\n                code: a.code,\r\n                name: p.name,\r\n                value: a.value,\r\n                valueText: a.valueText ? a.valueText : a.value,\r\n                description: p.description,\r\n                tag: a.tag,\r\n                fetchValueMode: p.fetchValueMode,\r\n                fetchValueSetting: p.fetchValueSetting\r\n              };\r\n            } else {\r\n              throw new Error('å½åæä»¶æ¹æ³åæ°ä¸ä¸è´ï¼è¯·æ´æ°ï¼');\r\n            }\r\n          });\r\n          this.componentPerformer = cmp;\r\n        } else {\r\n          throw new Error('å½åæä»¶å·²ä¸å­å¨æ­¤æ¹æ³ï¼è¯·æ´æ°ï¼');\r\n        }\r\n      });\r\n    } else {\r\n      this.componentPerformer = new ComponentPerformer();\r\n    }\r\n  }\r\n  get component() {\r\n    return this.componentPerformer;\r\n  }\r\n\r\n  curParameter: ActualParameter;\r\n  columns = [\r\n    { field: 'code', width: 60, title: 'ç¼å·' },\r\n    { field: 'name', width: 60, title: 'åç§°' },\r\n    { field: 'description', width: 60, title: 'æè¿°', showTips: true },\r\n    {\r\n      field: 'valueText', width: 100, title: 'åæ°å¼',\r\n      editor: {\r\n        type: 'input-group',\r\n        options: {\r\n          groupText: '<i class=\"f-icon f-icon-lookup\"></i>',\r\n          editable: false,\r\n          clickHandle: (e) => {\r\n            e.formControl.setValue(e.instance.value ? e.instance.value : '');\r\n            this.showExprHelp(e);\r\n          },\r\n          clear: (e) => {\r\n            // æ¸çvalueTextï¼ä¹åºè¯¥æ¸çvalue\r\n            e.rowData.value = '';\r\n            for (const p of this.component.actualParameters) {\r\n              if (p.code === e.rowId) {\r\n                p.value = '';\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  ];\r\n  helpInfo = {\r\n    helpId: '',\r\n    su: '',\r\n    columns: [],\r\n    displayType: 'List',\r\n    items: [],\r\n    pageInfo: {\r\n      pageIndex: 1,\r\n      pageList: [10, 20, 30, 50],\r\n      pageSize: 20\r\n    },\r\n    search: { category: 'search'},\r\n    title: 'å¸®å©',\r\n    total: 100,\r\n    fieldInfo: {\r\n      idField: 'id',\r\n      textField: 'name',\r\n      valueField: 'id'\r\n    }\r\n  };\r\n  cell: any;\r\n  constructor(\r\n    private formBuilder: FormBuilder,\r\n    private designerState: ProcessDesignerUIState,\r\n    private expr: ExpressionService,\r\n    private resolver: ComponentFactoryResolver,\r\n    private injector: Injector,\r\n    private sessionSrc: SessionService,\r\n    private modalService: BsModalService,\r\n    private componentService: CommonComponentUiRTService,\r\n    private ngZone: NgZone,\r\n    private service: ComponentPerformerService,\r\n    private util: ProcessDeUtil\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n  ngAfterViewInit(): void {\r\n    this.ngZone.runOutsideAngular(() => {\r\n      this.inputGroup.nativeElement.addEventListener(\r\n        'mouseenter',\r\n        this.onMouseEnter.bind(this)\r\n      );\r\n      this.inputGroup.nativeElement.addEventListener(\r\n        'mouseleave',\r\n        this.onMouseLeave.bind(this)\r\n      );\r\n    });\r\n  }\r\n\r\n  onMouseEnter(event) {\r\n    this.showClearButton = true;\r\n    if (this.showClearButton) {\r\n      this.toggleClearIcon(event, true);\r\n    }\r\n  }\r\n  onMouseLeave(event) {\r\n    this.showClearButton = false;\r\n    this.toggleClearIcon(event, false);\r\n  }\r\n  private toggleClearIcon(event: any, isShow = false) {\r\n    const str = isShow ? '' : 'none';\r\n    const clearIcon = event.target.querySelector('.input-group-clear');\r\n    if (clearIcon) {\r\n      clearIcon.style.display = str;\r\n    }\r\n  }\r\n\r\n  selectChanged(event) {\r\n    this.curParameter = event.data;\r\n  }\r\n  beforeEdit = (param: RowEditParam) => {\r\n    const rowData = param.rowData as any;\r\n    this.curParameter = rowData;\r\n    switch (rowData.fetchValueMode) {\r\n      case ParameterFetchValueMode.express:\r\n        param.column.editor = {\r\n          type: 'input-group',\r\n          options: {\r\n            groupText: '<i class=\"f-icon f-icon-lookup\"></i>',\r\n            editable: false,\r\n            clickHandle: (e) => {\r\n              e.formControl.setValue(e.instance.value ? e.instance.value : '');\r\n              this.showExprHelp(e);\r\n            },\r\n            clear: (e) => {\r\n              // æ¸çvalueTextï¼ä¹åºè¯¥æ¸çvalue\r\n              e.rowData.value = '';\r\n              for (const p of this.component.actualParameters) {\r\n                if (p.code === e.rowId) {\r\n                  p.value = '';\r\n                }\r\n              }\r\n            }\r\n          }\r\n        };\r\n        break;\r\n      case ParameterFetchValueMode.none:\r\n        param.column.editor = {\r\n          type: 'input-group',\r\n          options: {\r\n            groupText: '<i class=\"f-icon f-icon-lookup\"></i>',\r\n            editable: false,\r\n            clickHandle: (e) => {\r\n              e.formControl.setValue(e.instance.value ? e.instance.value : '');\r\n              this.showExprHelp(e);\r\n            },\r\n            clear: (e) => {\r\n              // æ¸çvalueTextï¼ä¹åºè¯¥æ¸çvalue\r\n              e.rowData.value = '';\r\n              for (const p of this.component.actualParameters) {\r\n                if (p.code === e.rowId) {\r\n                  p.value = '';\r\n                }\r\n              }\r\n            }\r\n          }\r\n        };\r\n        break;\r\n      case ParameterFetchValueMode.const:\r\n        param.column.editor = { type: EditorTypes.TEXTBOX, options: {} };\r\n        break;\r\n      case ParameterFetchValueMode.enum:\r\n        param.column.editor = { type: EditorTypes.TEXTBOX, options: {} };\r\n        break;\r\n      case ParameterFetchValueMode.help:\r\n        param.column.editor = {\r\n          type: 'input-group',\r\n          options: {\r\n            groupText: '<i class=\"f-icon f-icon-lookup\"></i>',\r\n            editable: false,\r\n            clickHandle: (e) => {\r\n              this.cell = e;\r\n              this.helpInfo.helpId = (rowData.fetchValueSetting as HelpFetchValueSetting).helpId;\r\n              this.helpInfo.su = (rowData.fetchValueSetting as HelpFetchValueSetting).serviceUnit;\r\n              this.helpInfo.pageInfo = {\r\n                pageIndex: 1,\r\n                pageList: [10, 20, 30, 50],\r\n                pageSize: 20\r\n              };\r\n              this.helpInfo.search = { category: 'search' };\r\n              this.getHelpInfo();\r\n            },\r\n            clear: (e) => {\r\n              // æ¸çvalueTextï¼ä¹åºè¯¥æ¸çvalue\r\n              e.rowData.value = '';\r\n              for (const p of this.component.actualParameters) {\r\n                if (p.code === e.rowId) {\r\n                  p.value = '';\r\n                }\r\n              }\r\n            }\r\n          }\r\n        };\r\n        break;\r\n    }\r\n    return of(true);\r\n  }\r\n  afterEdit = (rowIndex: number, rowData: any, column?: DataColumn) => {\r\n    return of(true);\r\n  }\r\n\r\n  endEdit(e: any) {\r\n    // ææ¬æ¡ç¼è¾åæ¶ä¿®æ¹value\r\n    if (e.rowData.fetchValueMode === ParameterFetchValueMode.const || e.rowData.fetchValueMode === ParameterFetchValueMode.enum) {\r\n      this.component.actualParameters[e.rowIndex].value = this.component.actualParameters[e.rowIndex].valueText;\r\n    }\r\n  }\r\n\r\n  clear() {\r\n    this.componentPerformer.name = '';\r\n    this.componentPerformer.metadataId = '';\r\n    this.componentPerformer.methodCode = '';\r\n    this.componentPerformer.methodName = '';\r\n    this.componentPerformer.condition = '';\r\n    this.componentPerformer.actualParameters = new Array();\r\n  }\r\n\r\n  selectComponent() {\r\n    const compFactory = this.resolver.resolveComponentFactory(SelectMetadataRTComponent);\r\n    const compRef = compFactory.create(this.injector);\r\n    compRef.instance.typeList = 'WebServiceComponent'; // ç®ååªè½æ ¹æ®åæ°æ®ç±»åè¿æ»¤ï¼åç»­æ·»å æ ç­¾è¿æ»¤\r\n    compRef.instance.selectedMetadata.subscribe(($event: Metadata4RefDto) => {\r\n      try {\r\n        const meta: MetadataDto = $event.metadata;\r\n        this.openComponentSelectorNew(meta.id, this.sessionSrc.getUserSessionId());\r\n      } catch {\r\n        console.log('$event', $event);\r\n        throw new Error('è·åè§£ææä»¶åºé' + $event);\r\n      }\r\n    });\r\n\r\n    const modalConfig = {\r\n      title: 'æä»¶éæ©',\r\n      width: 980,\r\n      height: 548,\r\n      showButtons: false\r\n    };\r\n    const dialog = this.modalService.show(compRef, modalConfig);\r\n    compRef.instance.closeModalEmitter.subscribe($event => dialog.close());\r\n  }\r\n  private openComponentSelectorNew(metadataId: string, sessionId: string) {\r\n    this.componentService.openSelector(metadataId, sessionId).subscribe(\r\n      (selectorResult: SelectorResult) => {\r\n        selectorResult.confirmEvent.subscribe(\r\n          (result: GspComponent) => {\r\n            if (result) {\r\n              this.component.name = result.name;\r\n              this.component.metadataId = result.id;\r\n              this.component.methodCode = result.operations[0].code;\r\n              this.component.methodName = result.operations[0].name;\r\n              this.component.actualParameters = [];\r\n\r\n              if (result.operations[0].parameters && result.operations[0].parameters.length > 0) {\r\n                this.component.actualParameters = result.operations[0].parameters\r\n                  .map((p: WebServiceParameter) => (\r\n                    {\r\n                      code: p.code,\r\n                      name: p.name,\r\n                      value: '',\r\n                      valueText: '',\r\n                      description: p.description,\r\n                      fetchValueMode: p.fetchValueMode,\r\n                      fetchValueSetting: p.fetchValueSetting\r\n                    }) as any);\r\n              }\r\n            }\r\n          });\r\n      });\r\n  }\r\n  showExprHelp(e: any) {\r\n    if (this.designerState.schemas.length > 0) {\r\n      for (const schema of this.designerState.schemas) {\r\n        this.expr.addSchema('Schema', schema);\r\n      }\r\n      if (this.designerState.schemas[0].entityTypes && this.designerState.schemas[0].entityTypes.length > 0) {\r\n        const entityType = this.designerState.schemas[0].entityTypes[0];\r\n        this.expr.addInjectedEntity(entityType.name, 'Schema',\r\n          entityType.name, InjectedType.EntityType);\r\n      }\r\n    }\r\n    const context = new Array();\r\n    if (this.designerState.procInstContext.length > 0) {\r\n      for (const variable of this.designerState.procInstContext) {\r\n        context.push(variable);\r\n      }\r\n    }\r\n    if (this.designerState.formalParameterContext.length > 0) {\r\n      for (const variable of this.designerState.formalParameterContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (this.designerState.participantContext.length > 0) {\r\n      for (const variable of this.designerState.participantContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (this.designerState.processVariableContext.length > 0) {\r\n      for (const variable of this.designerState.processVariableContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (context.length > 0) {\r\n      for (const v of context) {\r\n        this.expr.addContext(v);\r\n      }\r\n    }\r\n    this.expr.setEditPattern(ExprEditMode.Advanced); // é»è®¤æå¼é«çº§è¡¨è¾¾å¼ç¼è¾å¨\r\n    this.expr.addExpressionText(e.instance.value);\r\n    this.expr.buildExpression().then((d: string) => {\r\n      if (d) {\r\n        e.formControl.setValue(d);\r\n        e.instance.cd.detectChanges();\r\n        e.rowData.value = d;\r\n        for (const p of this.component.actualParameters) {\r\n          if (p.code === e.rowId) {\r\n            p.value = d;\r\n          }\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  getPerformers() {\r\n    this.grid.endCellEdit();\r\n    console.log(this.component);\r\n    return this.component;\r\n  }\r\n\r\n  private getHelpInfo() {\r\n    forkJoin(this.service.getHelpMetaData(this.helpInfo.helpId, this.helpInfo.su),\r\n      this.service.getLookUpData(this.helpInfo.helpId, this.helpInfo.su,\r\n        this.helpInfo.pageInfo.pageIndex, this.helpInfo.pageInfo.pageSize, this.helpInfo.search)).subscribe(re => {\r\n        if (re[0]) {\r\n          const meta = re[0];\r\n          const help = JSON.parse(meta.content) as any;\r\n          this.helpInfo.columns = help.dataSource.columns;\r\n          this.helpInfo.displayType = help.displayType;\r\n          this.helpInfo.fieldInfo = {\r\n            idField: help.idField,\r\n            valueField: help.valueField,\r\n            textField: help.textField\r\n          };\r\n        } else {\r\n          throw new Error('å¸®å©åæ°æ®ä¸å­å¨ï¼');\r\n        }\r\n        if (re[1]) {\r\n          const helpData = re[1];\r\n          this.helpInfo.items = helpData.items;\r\n          this.helpInfo.title = helpData.title;\r\n          this.helpInfo.total = helpData.total;\r\n          this.lookup.showDialog();\r\n        } else {\r\n          throw new Error('è·åå¸®å©æ°æ®æºå¤±è´¥ï¼');\r\n        }\r\n      });\r\n  }\r\n\r\n  dictPicked = (rowData) => {\r\n    if (this.cell) {\r\n      this.cell.formControl.setValue(this.util.getValue(rowData, this.helpInfo.fieldInfo.textField));\r\n      this.cell.instance.cd.detectChanges();\r\n      this.cell.rowData.value = this.util.getValue(rowData, this.helpInfo.fieldInfo.valueField);\r\n      for (const p of this.component.actualParameters) {\r\n        if (p.code === this.cell.rowId) {\r\n          p.value = this.util.getValue(rowData, this.helpInfo.fieldInfo.valueField);\r\n        }\r\n      }\r\n      return of(true);\r\n    }\r\n  }\r\n  pagerChanged(data: any) {\r\n    if (data) {\r\n      this.helpInfo.pageInfo.pageIndex = data.pageIndex;\r\n      this.helpInfo.pageInfo.pageSize = data.pageSize;\r\n      this.service.getLookUpData(this.helpInfo.helpId, this.helpInfo.su,\r\n        this.helpInfo.pageInfo.pageIndex, this.helpInfo.pageInfo.pageSize, this.helpInfo.search)\r\n        .subscribe(re => {\r\n          this.helpInfo.items = re.items;\r\n          this.helpInfo.title = re.title;\r\n          this.helpInfo.total = re.total;\r\n          this.lookup.loadData(re);\r\n        });\r\n    }\r\n  }\r\n  search(data) {\r\n    console.log(data);\r\n    this.helpInfo.search = { category: 'search' };\r\n    if (data) {\r\n      const searchInfo = {\r\n        searchField: data.field || data.search.field,\r\n        searchValue: data.value || data.search.value\r\n      };\r\n      this.helpInfo.search = Object.assign(this.helpInfo.search, searchInfo);\r\n      this.service.getLookUpData(this.helpInfo.helpId, this.helpInfo.su,\r\n        this.helpInfo.pageInfo.pageIndex, this.helpInfo.pageInfo.pageSize, this.helpInfo.search)\r\n        .subscribe(re => {\r\n          this.helpInfo.items = re.items;\r\n          this.helpInfo.title = re.title;\r\n          this.helpInfo.total = re.total;\r\n          this.lookup.loadData(re);\r\n        });\r\n    }\r\n  }\r\n}\r\n","import { ProcessDeUtil } from '../../../../domain/process-de-util';\r\nimport {PerformerEntity} from \"../../entities/performer.entity\";\r\nexport enum ReportingRank {\r\n    DirectSuperior = 'DirectSuperior',\r\n    HigherSuperior = 'HigherSuperior'\r\n}\r\nexport class ReportingLineDataEntity extends PerformerEntity {\r\n  constructor(id?: string, name?: string, type?: string) {\r\n    super(id,name,type);\r\n  }\r\n  reportingLineDefId: string;\r\n  reportingLineDefName: string;\r\n  refOrgId: string;\r\n  refOrgName: string;\r\n  refUserId: string;\r\n  refEmployeeId: string;\r\n  dimension: string;\r\n  condition: string;\r\n  reportingReferObject: string;\r\n}\r\n\r\n","import { ILookupHttpService, RemoteParams, LookupGridResult } from '@farris/ui-lookup';\r\nimport { Injectable } from '@angular/core';\r\nimport { HttpService } from '@ecp-caf/caf-common';\r\nimport { Observable, of } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\n\r\n@Injectable()\r\nexport class WfReportDefHelpService implements ILookupHttpService {\r\n\r\n  constructor(\r\n    private http: HttpService\r\n  ) {\r\n  }\r\n\r\n  getData(url: string, params?: RemoteParams): Observable<LookupGridResult> {\r\n    const customData = params.customData;\r\n    const index = params.pageIndex || 1;\r\n    const size = params.pageSize || 20;\r\n    const searchValue = JSON.parse(params.searchValue);\r\n    if (searchValue.searchValue || customData.filter) {\r\n      let query = '{';\r\n      if (searchValue.searchValue) {\r\n        if (searchValue.searchField === '*') {\r\n          query += `\"codeOrNameLike\":\"${searchValue.searchValue}\",`;\r\n        } else {\r\n          query += `\"${searchValue.searchField}\":\"${searchValue.searchValue}\",`;\r\n        }\r\n      }\r\n      if (customData.filter) {\r\n        const keys = Object.keys(customData.filter);\r\n        if (keys && keys.length > 0) {\r\n          for (const key of keys) {\r\n            if (customData.filter[key]) {\r\n              query += `\"${key}\":\"${customData.filter[key]}\",`;\r\n            }\r\n          }\r\n        }\r\n      }\r\n      if (query.substr(query.length - 1, 1) === ',') {\r\n        query = query.substring(0, query.length - 1);\r\n      }\r\n      query += '}';\r\n      query = encodeURIComponent(query);\r\n      query += `&pageIndex=${index}&pageSize=${size}`;\r\n      url += '?pageFilter=' + query;\r\n    } else {\r\n      url += `?pageIndex=${index}&pageSize=${size}`;\r\n    }\r\n    return this.http.get(url).pipe(\r\n      map((re: any) => ({\r\n        items: re.content,\r\n        total: re.totalElements,\r\n        pageInfo: {\r\n          pageIndex: re.pageable.pageNumber + 1,\r\n          pageSize: re.pageable.pageSize,\r\n          pageList: [20, 40, 60, 80, 100],\r\n          enablePager: true\r\n        }\r\n      }))\r\n    );\r\n  }\r\n}\r\n","import { Component, OnInit, Input, Output, EventEmitter, ViewChild } from '@angular/core';\r\nimport { Observable, of } from 'rxjs';\r\nimport { PickedResult, LookupGridComponent, ServerSideToken } from '@farris/ui-lookup';\r\nimport { WfReportDefHelpService } from './wf-report-def-help.service';\r\n\r\n\r\n@Component({\r\n  selector: 'app-wf-report-def-help',\r\n  template: `\r\n    <farris-lookup-grid #lookup\r\n      [disabled]=\"disabled\"\r\n      [editable]=\"false\"\r\n      [bindingData]=\"bindingData\"\r\n      [(ngModel)]=\"displayTxt\"\r\n      [columns]=\"columns\"\r\n      [singleSelect]=\"singleSelect\"\r\n      [title]=\"title\"\r\n      [displayType]=\"'List'\"\r\n      [uri]=\"dataUri\"\r\n      [idField]=\"'id'\"\r\n      [pageIndex]=\"pageIndex\"\r\n      [pageSize]=\"pageSize\"\r\n      [pagination]=\"pagination\"\r\n      [valueField]=\"'id'\"\r\n      [textField]=\"'name'\"\r\n      (clear)=\"afterClear($event)\"\r\n      [dialogWidth]=\"width\"\r\n      [dictPicking]=\"beforeOpen\"\r\n      [dictPicked]=\"dictPicked\">\r\n    </farris-lookup-grid>\r\n  `,\r\n  styles: [],\r\n  providers: [{ provide: ServerSideToken, useClass: WfReportDefHelpService }]\r\n})\r\nexport class WfReportDefHelpComponent implements OnInit {\r\n  /** æ é¢ */\r\n  @Input() title: string;\r\n  /** å®½åº¦ */\r\n  @Input() width = 550;\r\n  /** åæ°æº */\r\n  @Input() sourceType: 'matrixField';\r\n  /** åªè¯» */\r\n  @Input() disabled = false;\r\n  /** æ¯å¦åé */\r\n  @Input() singleSelect = true;\r\n  /** æ¯å¦åé¡µï¼é»è®¤true */\r\n  @Input() pagination = true;\r\n  /** é¦æ¬¡å è½½ç¬¬å é¡µï¼é»è®¤1 */\r\n  @Input() pageIndex = 1;\r\n  /** æ¯é¡µå è½½æ°ï¼é»è®¤20 */\r\n  @Input() pageSize = 20;\r\n  /** ç»å®å°å¸®å©ä¸çæ°æ®ï¼åå§æ¾ç¤ºå¼ç¨ */\r\n  @Input() displayTxt: string;\r\n  /** å­å¨å¸®å©éæ©çå¯¹è±¡ */\r\n  @Input() bindingData: { id: string, name: string };\r\n  /** è¿æ»¤æ¡ä»¶ */\r\n  @Input() filter: any = {};\r\n\r\n  // @Input() beforeClose: (selectData: any) => Observable<PickedResult>;\r\n  /** å¸®å©éæ©åäºä»¶ */\r\n  @Output() afterConfirm: EventEmitter<any> = new EventEmitter<any>();\r\n  @Output() dialogClosed: EventEmitter<any> = new EventEmitter<any>();\r\n  @Output() clear: EventEmitter<any> = new EventEmitter<any>();\r\n  dataUri: string;\r\n  columns: any[] = [];\r\n\r\n  @ViewChild('lookup') public lookUp: LookupGridComponent;\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n    this.columns = [\r\n      { title: 'ç¼å·', field: 'code', width: '80', searchField: 'code', },\r\n      { title: 'åç§°', field: 'name', width: '100', searchField: 'name', }\r\n    ];\r\n    // this.dataUri = this.uiState.dataUri;\r\n    this.dataUri = '/api/runtime/wf/v1.0/reportingLineDefinitions/query';\r\n    // å¿é¡»è¦æï¼å¦ååå§éä¸­ä¸èµ·ä½ç¨\r\n    this.lookUp.mapFields = { id: 'id', name: 'name' };\r\n  }\r\n\r\n  afterClear(arg: any) {\r\n    this.clear.next(arg);\r\n  }\r\n\r\n  /** å¸®å©åäºä»¶,å¼ºè¡ä¼ éè¿æ»¤æ¡ä»¶ */\r\n  beforeOpen = (arg) => {\r\n    // æè¿æ»¤æ°æ®åå½åçæ°æ®ä¼ éå°serviceå±\r\n    return of({\r\n      showDialog: true, data: {\r\n        filter: this.filter\r\n      }\r\n    });\r\n  }\r\n  dictPicked = (arg: any): Observable<PickedResult> => {\r\n    this.afterConfirm.next(arg);\r\n    return of({ closeDialog: true });\r\n  }\r\n\r\n\r\n  /** æå¨æ¾ç¤ºå¸®å© */\r\n  public showHelp() {\r\n    this.lookUp.showDialog();\r\n  }\r\n}\r\n","import { Component, OnInit, ViewChild, HostBinding, ElementRef, NgZone, Input } from '@angular/core';\r\nimport { HttpService } from '@ecp-caf/caf-common';\r\nimport { ReportingLineDefinitionEntity } from './reporting-line-definition.entity';\r\nimport { ReportingLineDataEntity } from './reporting-line-data.entity';\r\nimport { reportingLineDimensionEntity } from './reporting-line-dimension.entity';\r\nimport { of } from 'rxjs';\r\nimport { ProcessDesignerUIState } from '../../../../app/process-designer.uistate';\r\nimport { ExprEditMode, ExpressionService, InjectedType } from '@gsp-svc/expression';\r\nimport { LookupGridComponent } from '@farris/ui-lookup';\r\nimport { SysFarrisTreeHelpComponent } from \"@gsp-sys/sysmgr-ui\";\r\nimport { PerformerEntity } from \"../../entities/performer.entity\";\r\nimport { WfReportDefHelpComponent } from \"./service/wf-report-def-help.component\";\r\ndeclare var System: any;\r\n\r\n@Component({\r\n  selector: 'app-reporting-line',\r\n  templateUrl: './reporting-line.component.html',\r\n  styleUrls: ['./reporting-line.component.scss']\r\n})\r\nexport class ReportingLineComponent implements OnInit {\r\n  @HostBinding('class')\r\n  cls = 'd-flex flex-fill h-100';\r\n  treeFilter = '';\r\n  display: string = 'none';\r\n  typeReadOnly = false;\r\n  groupIcon2 = '<i class=\"f-icon f-icon-lookup\"></i>';\r\n  defName = '';\r\n\r\n  /**\r\n   * æ±æ¥å³ç³»æ°æ®\r\n   */\r\n  reportingLineDataEntity: ReportingLineDataEntity = new ReportingLineDataEntity();\r\n\r\n  /**\r\n   * æ±æ¥å³ç³»å®ä¹åè¡¨\r\n   */\r\n  reportingLineDefinitionList: ReportingLineDefinitionEntity[] = [];\r\n  reportingLineDefinition: any;\r\n\r\n  reportingLineDimension: reportingLineDimensionEntity[] = [];\r\n  @ViewChild(WfReportDefHelpComponent) reportingLineDefHelp: WfReportDefHelpComponent;\r\n\r\n  @Input()\r\n  set setReportingLineDataEntity(dataEntity: ReportingLineDataEntity) {\r\n    this.defName = dataEntity.reportingLineDefName;\r\n    this.reportingLineDataEntity = dataEntity;\r\n    const defUrl = '/api/runtime/wf/v1.0/reportingLineDefinitions/' + dataEntity.reportingLineDefId;\r\n    this.http.get(defUrl).subscribe((re: any) => {\r\n      this.reportingLineDefinition = re;\r\n      this.designerUIState.dimensions = [\r\n        { value: 'higherSuperior', text: 'é´æ¥ä¸çº§' }\r\n      ];\r\n      // å¼å®¹åå²æ°æ®\r\n      if (JSON.parse(this.reportingLineDefinition.dimensions)[0].code !== 'directSuperior') {\r\n        const di = {\r\n          value: 'directSuperior',\r\n          text: 'ç´æ¥ä¸çº§'\r\n        };\r\n        this.designerUIState.dimensions.push(di);\r\n      }\r\n      for (const dimension of JSON.parse(this.reportingLineDefinition.dimensions)) {\r\n        const di = {\r\n          value: dimension.code,\r\n          text: dimension.name\r\n        };\r\n        this.designerUIState.dimensions.push(di);\r\n      }\r\n    });\r\n    this.users = [dataEntity];\r\n    if (dataEntity.refUserId) {\r\n      this.users[0].performerName = this.variableParticipantName(dataEntity.refUserId);\r\n      this.curReportingRefer = this.reportingReferObjects[1].value;\r\n      this.display = 'block';\r\n    } else if (dataEntity.refEmployeeId) {\r\n      this.users[0].performerName = dataEntity.refEmployeeId;\r\n      this.curReportingRefer = this.reportingReferObjects[2].value;\r\n      this.display = 'block';\r\n    } else {\r\n      this.curReportingRefer = this.reportingReferObjects[0].value;\r\n    }\r\n    if (dataEntity.reportingLineDefId) {\r\n      this.typeReadOnly = true;\r\n    }\r\n  }\r\n\r\n  @ViewChild(LookupGridComponent) lookup: LookupGridComponent;\r\n  @ViewChild(SysFarrisTreeHelpComponent) orgHelp: SysFarrisTreeHelpComponent;\r\n  @ViewChild('inputGroup') inputGroup: ElementRef;\r\n  @ViewChild('inputGroup1') inputGroup1: ElementRef;\r\n  showClearButton = false;\r\n  condition: string;\r\n  items: ReportingLineDefinitionEntity[] = [];\r\n  users: PerformerEntity[] = [];\r\n  departments: PerformerEntity[] = [];\r\n  pageIndex = 1;\r\n  pageSize = 20;\r\n  pageList = [10, 20, 30, 50, 100];\r\n  total = 0;\r\n\r\n  /**\r\n   * æ±æ¥ç±»åæ¾ç¤ºå\r\n   */\r\n  columns = [\r\n    { title: 'ç¼å·', field: 'code', width: 100 },\r\n    { title: 'åç§°', field: 'name', width: 100 }\r\n  ];\r\n\r\n  /**\r\n   *  åä¸èåè¡¨æ±æ¥å³ç³»æ¾ç¤ºå­æ®µ\r\n   */\r\n  reportingReferObjects = [\r\n    { name: 'ç»ç»', value: 'dept' },\r\n    { name: 'ç³»ç»ç¨æ·', value: 'sysUser' },\r\n    { name: 'åå·¥', value: 'employee' }\r\n  ];\r\n  curReportingRefer = this.reportingReferObjects[0].value;\r\n\r\n\r\n  constructor(\r\n    private http: HttpService,\r\n    public designerUIState: ProcessDesignerUIState,\r\n    private expr: ExpressionService,\r\n    private ngZone: NgZone,\r\n  ) {\r\n    this.getReportingLineType();\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  /**\r\n   * è·åæ±æ¥å³ç³»ç±»å\r\n   */\r\n  getReportingLineType() {\r\n    const url = '/api/runtime/wf/v1.0/reportingLineDefinitions';\r\n    this.http.get(url).subscribe((re: any) => {\r\n      this.reportingLineDefinitionList = re;\r\n      this.items = this.reportingLineDefinitionList.slice(0, this.pageSize);\r\n      this.total = this.reportingLineDefinitionList.length;\r\n    });\r\n  }\r\n\r\n  onclear() {\r\n    this.reportingLineDataEntity = new ReportingLineDataEntity();\r\n  }\r\n\r\n  // åç§ç±»åæ¹å\r\n  referObjectChange(data: any) {\r\n    if (data === 'dept') {\r\n      this.display = 'none';\r\n      this.curReportingRefer = this.reportingReferObjects[0].value;\r\n      this.reportingLineDataEntity.refUserId = null;\r\n      this.reportingLineDataEntity.refEmployeeId = null;\r\n    } else if (data === 'sysUser') {\r\n      this.display = 'block';\r\n      this.curReportingRefer = this.reportingReferObjects[1].value;\r\n      this.reportingLineDataEntity.refOrgId = null;\r\n      this.reportingLineDataEntity.refOrgName = null;\r\n      this.reportingLineDataEntity.refEmployeeId = null;\r\n    } else { // åå·¥çæåµ\r\n      this.display = 'block';\r\n      this.curReportingRefer = this.reportingReferObjects[2].value;\r\n      this.reportingLineDataEntity.refOrgId = null;\r\n      this.reportingLineDataEntity.refOrgName = null;\r\n      this.reportingLineDataEntity.refUserId = null;\r\n    }\r\n    // åç§å¯¹è±¡åæ¢æ¶ï¼æ¸ç©ºuserådepartment\r\n    this.users = [];\r\n    this.departments = [];\r\n  }\r\n\r\n  /**\r\n   * åç§ç¨æ·æ¹å\r\n   */\r\n  referUserChange(data: any) {\r\n    console.log(data);\r\n  }\r\n\r\n  /**\r\n   * ç»´åº¦æ¹å\r\n   */\r\n  reportingDimensionChange(data: any) {\r\n  }\r\n\r\n  /**\r\n   * ç»ç»å¸®å©éå®å\r\n   */\r\n  orgSelected(org: any) { // ç»ç»å¸®å©éå®å\r\n    this.reportingLineDataEntity.refOrgId = org.id;\r\n    this.reportingLineDataEntity.refOrgName = org.name;\r\n  }\r\n\r\n  /**\r\n   * ç¼è¾æ¡ä»¶\r\n   */\r\n  editCondition() {\r\n    if (this.designerUIState.schemas.length > 0) {\r\n      for (const schema of this.designerUIState.schemas) {\r\n        this.expr.addSchema('Schema', schema);\r\n      }\r\n      if (this.designerUIState.schemas[0].entityTypes && this.designerUIState.schemas[0].entityTypes.length > 0) {\r\n        const entityType = this.designerUIState.schemas[0].entityTypes[0];\r\n        this.expr.addInjectedEntity(entityType.name, 'Schema',\r\n          entityType.name, InjectedType.EntityType);\r\n      }\r\n    }\r\n    const context = new Array();\r\n    if (this.designerUIState.procInstContext.length > 0) {\r\n      for (const variable of this.designerUIState.procInstContext) {\r\n        context.push(variable);\r\n      }\r\n    }\r\n    if (this.designerUIState.formalParameterContext.length > 0) {\r\n      for (const variable of this.designerUIState.formalParameterContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (this.designerUIState.participantContext.length > 0) {\r\n      for (const variable of this.designerUIState.participantContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (this.designerUIState.processVariableContext.length > 0) {\r\n      for (const variable of this.designerUIState.processVariableContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (this.designerUIState.activityComponentContext.length > 0) {\r\n      for (const variable of this.designerUIState.activityComponentContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (context.length > 0) {\r\n      for (const v of context) {\r\n        this.expr.addContext(v);\r\n      }\r\n    }\r\n    this.expr.setEditPattern(ExprEditMode.Conditional); // è¡¨è¾¾å¼å±ç°æ¨¡å¼ï¼é»è®¤ç®æç\r\n    this.expr.addExpressionText(this.reportingLineDataEntity.condition); // this.reportingLineDataEntity.condition\r\n    this.expr.buildExpression().then((expressioninfo: string) => {\r\n      this.reportingLineDataEntity.condition = expressioninfo;\r\n    });\r\n  }\r\n\r\n  getReportingTypes(value?: string) {\r\n    const start = (this.pageIndex - 1) * this.pageSize;\r\n    const end = start + this.pageSize;\r\n    let items = [];\r\n    if (value) {\r\n      items = this.reportingLineDefinitionList.filter(f => f.name.indexOf(value) > -1 || f.code.indexOf(value) > -1);\r\n    } else {\r\n      items = this.reportingLineDefinitionList;\r\n    }\r\n    this.total = items.length;\r\n    this.items = items.slice(start, end);\r\n    this.lookup.componentRef.instance.loadData({\r\n      total: this.total,\r\n      pageSize: this.pageSize,\r\n      pageIndex: this.pageIndex,\r\n      data: this.items\r\n    });\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    this.ngZone.runOutsideAngular(() => {\r\n      this.inputGroup.nativeElement.addEventListener(\r\n        'mouseenter',\r\n        this.onMouseEnter.bind(this)\r\n      );\r\n      this.inputGroup.nativeElement.addEventListener(\r\n        'mouseleave',\r\n        this.onMouseLeave.bind(this)\r\n      );\r\n      this.inputGroup1.nativeElement.addEventListener(\r\n        'mouseenter',\r\n        this.onMouseEnter.bind(this)\r\n      );\r\n      this.inputGroup1.nativeElement.addEventListener(\r\n        'mouseleave',\r\n        this.onMouseLeave.bind(this)\r\n      );\r\n    });\r\n  }\r\n  onMouseEnter(event) {\r\n    this.showClearButton = true;\r\n    if (this.showClearButton) {\r\n      this.toggleClearIcon(event, true);\r\n    }\r\n  }\r\n  onMouseLeave(event) {\r\n    this.showClearButton = false;\r\n    this.toggleClearIcon(event, false);\r\n  }\r\n  private toggleClearIcon(event: any, isShow = false) {\r\n    const str = isShow ? '' : 'none';\r\n    const clearIcon = event.target.querySelector('.input-group-clear');\r\n    if (clearIcon) {\r\n      clearIcon.style.display = str;\r\n    }\r\n  }\r\n\r\n  clear(data: any) {\r\n    this.reportingLineDataEntity.refOrgId = '';\r\n    this.reportingLineDataEntity.refOrgName = '';\r\n  }\r\n  clearUser() {\r\n    this.users = [];\r\n    this.reportingLineDataEntity.refUserId = '';\r\n    this.reportingLineDataEntity.refEmployeeId = '';\r\n  }\r\n  clearOrg() {\r\n    this.departments = [];\r\n    this.reportingLineDataEntity.refOrgId = '';\r\n  }\r\n\r\n  selectOrg(data: string) {\r\n    this.showExprHelp(data);\r\n  }\r\n\r\n  selectUsers(data: string) {\r\n    this.showExprHelp(data);\r\n  }\r\n  showExprHelp(data: string) {\r\n    this.expr.setEditPattern(ExprEditMode.Advanced); // è¡¨è¾¾å¼å±ç°æ¨¡å¼ï¼é»è®¤é«çº§\r\n    if (this.designerUIState.schemas.length > 0) {\r\n      for (const schema of this.designerUIState.schemas) {\r\n        this.expr.addSchema('Schema', schema);\r\n      }\r\n      if (this.designerUIState.schemas[0].entityTypes && this.designerUIState.schemas[0].entityTypes.length > 0) {\r\n        const entityType = this.designerUIState.schemas[0].entityTypes[0];\r\n        this.expr.addInjectedEntity(entityType.name, 'Schema',\r\n          entityType.name, InjectedType.EntityType);\r\n      }\r\n    }\r\n    const context = new Array();\r\n    if (this.designerUIState.participantContext.length > 0) {\r\n      for (const variable of this.designerUIState.participantContext) {\r\n        context.push(variable);\r\n      }\r\n    }\r\n    if (this.designerUIState.processVariableContext.length > 0) {\r\n      for (const variable of this.designerUIState.processVariableContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (context.length > 0) {\r\n      for (const v of context) {\r\n        this.expr.addContext(v);\r\n      }\r\n    }\r\n    if (data === 'sysUser') {\r\n      if (this.reportingLineDataEntity.refUserId && this.reportingLineDataEntity.refUserId.length > 0) {\r\n        this.expr.addExpressionText(this.reportingLineDataEntity.refUserId);\r\n      } else {\r\n        this.expr.addExpressionText('');\r\n      }\r\n    } else if (data === 'org') {\r\n      if (this.reportingLineDataEntity.refOrgId && this.reportingLineDataEntity.refOrgId.length > 0) {\r\n        this.expr.addExpressionText(this.reportingLineDataEntity.refOrgId);\r\n      } else {\r\n        this.expr.addExpressionText('');\r\n      }\r\n    } else { // åå·¥åå¶ä»æ±æ¥å¯¹è±¡ç±»å\r\n      if (this.reportingLineDataEntity.refEmployeeId && this.reportingLineDataEntity.refEmployeeId.length > 0) {\r\n        this.expr.addExpressionText(this.reportingLineDataEntity.refEmployeeId);\r\n      } else {\r\n        this.expr.addExpressionText('');\r\n      }\r\n    }\r\n    this.expr.buildExpression().then((expressionInfo: string) => {\r\n      if (data === 'sysUser') {\r\n        const user = new PerformerEntity(expressionInfo, '', 'wf.ReportingLineParticipant'); // wf.UserParticipant\r\n        user.tag = 'expression';\r\n        user.performerName = this.variableParticipantName(expressionInfo);\r\n        this.reportingLineDataEntity.refUserId = user.performerId;\r\n        this.reportingLineDataEntity.tag = user.tag;\r\n        this.reportingLineDataEntity.performerName = user.performerName;\r\n        this.users = [this.reportingLineDataEntity];\r\n      } else if (data === 'org') {\r\n        const dept = new PerformerEntity(expressionInfo, '', 'wf.ReportingLineParticipant');\r\n        dept.tag = 'expression';\r\n        this.reportingLineDataEntity.refOrgName = expressionInfo;\r\n        this.reportingLineDataEntity.refOrgId = expressionInfo;\r\n        this.departments = [this.reportingLineDataEntity];\r\n      } else {\r\n        const employee = new PerformerEntity(expressionInfo, '', 'wf.ReportingLineParticipant');\r\n        employee.performerName = expressionInfo;\r\n        employee.tag = 'expression';\r\n        this.reportingLineDataEntity.refEmployeeId = expressionInfo;\r\n        this.reportingLineDataEntity.performerName = employee.performerName;\r\n        this.users = [this.reportingLineDataEntity];\r\n      }\r\n    });\r\n  }\r\n  private variableParticipantName(expr: string): string {\r\n    for (const c of this.designerUIState.participantContext) {\r\n      if (expr.indexOf(c.key) > -1) {\r\n        return c.name;\r\n      }\r\n    }\r\n    for (const c of this.designerUIState.processVariableContext) {\r\n      if (expr.indexOf(c.key) > -1) {\r\n        return c.name;\r\n      }\r\n    }\r\n    return 'ä¸å¡å­æ®µ';\r\n  }\r\n\r\n  defChanged() {\r\n    System.import('/platform/runtime/wf/web/wf-reporting-data/reportingLineDefHelp.js?v=20210903').then(() => {\r\n      (window as any).gspWfReportingLineDef.ReportingLineDefHelpUtil.getReportingLineHelp().then(data => {\r\n        this.defSelected(data);\r\n      });\r\n    });\r\n  }\r\n\r\n  defSelected(data) {\r\n    this.defName = data.name;\r\n    this.reportingLineDataEntity.reportingLineDefId = data.id;\r\n    this.reportingLineDataEntity.reportingLineDefName = data.name;\r\n\r\n    this.reportingLineDimension = JSON.parse(data.dimensions);\r\n    this.designerUIState.dimensions = [\r\n      { value: 'higherSuperior', text: 'é´æ¥ä¸çº§' }\r\n    ];\r\n    // å¼å®¹åå²æ°æ®\r\n    if (this.reportingLineDimension[0].code !== 'directSuperior') {\r\n      const di = {\r\n        value: 'directSuperior',\r\n        text: 'ç´æ¥ä¸çº§'\r\n      }\r\n      this.designerUIState.dimensions.push(di);\r\n    }\r\n    for (const dimension of this.reportingLineDimension) {\r\n      const di = {\r\n        value: dimension.code,\r\n        text: dimension.name\r\n      };\r\n      this.designerUIState.dimensions.push(di);\r\n    }\r\n    // å®ä¹åæ¢åï¼é»è®¤æ¯åç§ç»ç»\r\n    this.curReportingRefer = this.reportingReferObjects[0].value;\r\n    return of(true);\r\n  }\r\n\r\n  getPerformers() {\r\n    this.reportingLineDataEntity.type = 'wf.ReportingLineParticipant';\r\n    this.reportingLineDataEntity.reportingReferObject = this.curReportingRefer;\r\n    return this.reportingLineDataEntity;\r\n  }\r\n}\r\n","import { MatrixFieldInfoEntity } from \"./matrix-field-info.entity\";\r\n\r\nexport class MatrixDefInfoEntity {\r\n  id: string;\r\n  code: string;\r\n  name: string;\r\n  conditionField: MatrixFieldInfoEntity[];\r\n  dataField: MatrixFieldInfoEntity[];\r\n}\r\n","import { PerformerEntity } from \"../../../entities/performer.entity\";\r\n\r\nexport class MatrixDataInfoEntity extends PerformerEntity {\r\n\r\n  constructor(id?: string, name?: string, type?: string) {\r\n    super(id,name,type);\r\n  }\r\n\r\n  id: string; // ç¨äºåç«¯åå¯ä¸æ è¯\r\n  matrixDefId: string; // ç¨äºå­å¨å­æ®µid\r\n  matrixDefName: string;\r\n  conditionField1: string;\r\n  conditionFieldText1: string;\r\n  conditionField2: string;\r\n  conditionFieldText2: string;\r\n  conditionField3: string;\r\n  conditionFieldText3: string;\r\n  dataFieldAlias: string;\r\n  condition: string;\r\n}\r\n","import { Component, OnInit, HostBinding, ViewChild, TemplateRef, Injector } from '@angular/core';\r\nimport { DatagridComponent } from '@farris/ui-datagrid';\r\nimport { Subject } from 'rxjs/Subject';\r\nimport { MessagerService } from '@farris/ui-messager';\r\n\r\n@Component({\r\n  selector: 'app-enum-list',\r\n  templateUrl: './enum-list.component.html',\r\n  styleUrls: ['./enum-list.component.scss']\r\n})\r\nexport class EnumListComponent implements OnInit {\r\n\r\n  @HostBinding('class')\r\n  cls = 'farris-main-area flex-column';\r\n\r\n  columns = [\r\n    { field: 'key', width: 100, title: 'é®' },\r\n    { field: 'value', width: 100, title: 'å¼'}];\r\n  @ViewChild('dg') dg: DatagridComponent;\r\n  @ViewChild('buttons') btnRef: TemplateRef<any>;\r\n\r\n  confirm = new Subject<any>();\r\n  closeModalEmitter = new Subject<any>();\r\n\r\n  /**\r\n   * æ¾ç¤ºå¼\r\n   */\r\n  data = new Array();\r\n\r\n  selectedIds = new Array();\r\n\r\n  constructor(\r\n    private messageService: MessagerService,\r\n    private injector: Injector\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n\r\n  }\r\n\r\n  /**\r\n   * å è½½æ¾ç¤ºæ°æ®\r\n   */\r\n  load(enumValues) {\r\n    this.data = [...enumValues];\r\n  }\r\n\r\n  /**\r\n   * ç¡®è®¤\r\n   */\r\n  onConfirm(): void {\r\n    if (this.selectedIds.length === 0 ) {\r\n      this.messageService.warning('å°æªéä¸­æä¸¾å¼');\r\n    }\r\n    const enumValues = this.data.filter(d => this.selectedIds.findIndex(id => id === d.key) > -1);\r\n    this.confirm.next(enumValues);\r\n    this.closeModalEmitter.next();\r\n  }\r\n\r\n  /**\r\n   * åæ¶\r\n   */\r\n  cancel(): void {\r\n    this.closeModalEmitter.next();\r\n  }\r\n\r\n}\r\n","import { Component, ComponentFactoryResolver, HostBinding, Injector, Input, OnInit, ViewChild } from '@angular/core';\r\nimport { MatrixDefInfoEntity } from './entitis/matrix-def-info.entity';\r\nimport { MatrixDataInfoEntity } from './entitis/matrix-data-info.entity';\r\nimport { HttpService } from '@ecp-caf/caf-common';\r\nimport { Observable, of } from 'rxjs';\r\nimport { ExprEditMode, ExpressionService, InjectedType } from '@gsp-svc/expression';\r\nimport { ProcessDesignerUIState } from '../../../../app/process-designer.uistate';\r\nimport { LookupGridComponent, PickedResult, ServerSideToken } from '@farris/ui-lookup';\r\nimport { BsModalService } from '@farris/ui-modal';\r\nimport { EnumListComponent } from './enum-list/enum-list.component';\r\nimport { MatrixFieldInfoEntity } from './entitis/matrix-field-info.entity';\r\nimport { LookupDataService } from '@farris/lookup-config';\r\nimport { PerformerEntity } from '../../entities/performer.entity';\r\n\r\n@Component({\r\n  selector: 'app-matrix-performer',\r\n  templateUrl: './matrix-performer.component.html',\r\n  styleUrls: ['./matrix-performer.component.scss'],\r\n  providers: [\r\n    { provide: ServerSideToken, useClass: LookupDataService }\r\n  ]\r\n})\r\nexport class MatrixPerformerComponent implements OnInit {\r\n  @HostBinding('class')\r\n  cls = 'd-flex flex-fill h-100';\r\n  display: string = 'none';\r\n  typeReadOnly = false;\r\n  items: MatrixDefInfoEntity[] = [];\r\n  pageIndex = 1;\r\n  pageSize = 20;\r\n  pageList = [10, 20, 30, 50, 100];\r\n  total = 0;\r\n  groupIcon2 = '<i class=\"f-icon f-icon-lookup\"></i>';\r\n\r\n  // å¸®å©ç¸å³\r\n  index: number;\r\n  fieldId = '';\r\n  value: any;\r\n  helpId;\r\n  /**\r\n   * ç©éµå®ä¹æ¾ç¤ºå\r\n   */\r\n  columns = [\r\n    { title: 'ç¼å·', field: 'code', width: 100 },\r\n    { title: 'åç§°', field: 'name', width: 100 }\r\n  ];\r\n  users: PerformerEntity[] = [];\r\n\r\n  dataFieldAndValues = []; // { text: 'é¨é¨', value: 'department' },\r\n  curDataFieldValue = '';\r\n\r\n  matrixDefEntityList: MatrixDefInfoEntity[] = [];\r\n  curMatrixDefEntity: MatrixDefInfoEntity = new MatrixDefInfoEntity();\r\n  curMatrixDataEntity: MatrixDataInfoEntity = new MatrixDataInfoEntity();\r\n\r\n  conditionFields: MatrixFieldInfoEntity[] = [];\r\n  exprGroup = [\r\n    { name: 'å¸®å©', value: 'help' }\r\n  ];\r\n  /**\r\n   * æ¡ä»¶å­æ®µæ¯å¦å¯ç¨è¡¨è¾¾å¼\r\n   */\r\n  condition1: string;\r\n  condition1ExprAble = true;\r\n  condition2: string;\r\n  condition2ExprAble = true;\r\n  condition3: string;\r\n  condition3ExprAble = true;\r\n  /**\r\n   * ç¼è¾å¨é¡µé¢æ¾ç¤ºæå­ï¼é²èæµæ·è´é®é¢ï¼å¯¹äºæ¡ä»¶å­æ®µçå¼åæ¾ç¤ºæå­é½ä¸è¦å¨å½åå®ä½ä¸­è¿è¡ä¿®æ¹åªæç¹å»ç¡®å®æ¶ï¼æå°å¶ä¿å­è³å½åå®ä½å¹¶è¿åï¼\r\n   */\r\n  condition1Text = '';\r\n  condition1Value = '';\r\n  condition2Text = '';\r\n  condition2Value = '';\r\n  condition3Text = '';\r\n  condition3Value = '';\r\n\r\n  @Input()\r\n  set setMatrixDataEntity(dataEntity: MatrixDataInfoEntity) {\r\n    this.curMatrixDataEntity = dataEntity;\r\n    const url = '/api/runtime/wf/v1.0/matrixDefinition/' + dataEntity.matrixDefId;\r\n    this.http.get(url).subscribe((re: any) => {\r\n      this.curMatrixDefEntity = re;\r\n      this.setFields();\r\n      this.curDataFieldValue = dataEntity.dataFieldAlias;\r\n    })\r\n    if (dataEntity.matrixDefId) {\r\n      this.typeReadOnly = true;\r\n    }\r\n\r\n    if (!this.curMatrixDataEntity.conditionField1) {\r\n      this.condition1 = 'expr';\r\n      this.condition1ExprAble = true;\r\n    } else if (this.curMatrixDataEntity.conditionField1.charAt(0) === '{') {\r\n      this.condition1 = 'expr';\r\n      this.condition1ExprAble = true;\r\n    } else {\r\n      this.condition1 = 'help';\r\n      this.condition1ExprAble = false;\r\n    }\r\n\r\n    if (!this.curMatrixDataEntity.conditionField2) {\r\n      this.condition2 = 'expr';\r\n      this.condition2ExprAble = true;\r\n    } else if (this.curMatrixDataEntity.conditionField2.charAt(0) === '{') {\r\n      this.condition2 = 'expr';\r\n      this.condition2ExprAble = true;\r\n    } else {\r\n      this.condition2 = 'help';\r\n      this.condition2ExprAble = false;\r\n    }\r\n\r\n    if (!this.curMatrixDataEntity.conditionField3) {\r\n      this.condition3 = 'expr';\r\n      this.condition3ExprAble = true;\r\n    } else if (this.curMatrixDataEntity.conditionField3.charAt(0) === '{') {\r\n      this.condition3 = 'expr';\r\n      this.condition3ExprAble = true;\r\n    } else {\r\n      this.condition3 = 'help';\r\n      this.condition3ExprAble = false;\r\n    }\r\n\r\n    this.condition1Text = this.curMatrixDataEntity.conditionFieldText1 ? this.curMatrixDataEntity.conditionFieldText1 : '';\r\n    this.condition1Value = this.curMatrixDataEntity.conditionField1 ? this.curMatrixDataEntity.conditionField1 : '';\r\n    this.condition2Text = this.curMatrixDataEntity.conditionFieldText2 ? this.curMatrixDataEntity.conditionFieldText2 : '';\r\n    this.condition2Value = this.curMatrixDataEntity.conditionField2 ? this.curMatrixDataEntity.conditionField2 : '';\r\n    this.condition3Text = this.curMatrixDataEntity.conditionFieldText3 ? this.curMatrixDataEntity.conditionFieldText3 : '';\r\n    this.condition3Value = this.curMatrixDataEntity.conditionField3 ? this.curMatrixDataEntity.conditionField3 : '';\r\n  }\r\n\r\n\r\n  @ViewChild('lookup') public lookUp: LookupGridComponent;\r\n\r\n  constructor(\r\n    private http: HttpService,\r\n    public designerUIState: ProcessDesignerUIState,\r\n    private expr: ExpressionService,\r\n    private modalService: BsModalService,\r\n    private resolver: ComponentFactoryResolver,\r\n    private injector: Injector,\r\n  ) {\r\n    this.getMatrixLineType();\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  /**\r\n   * è·åç©éµå®ä¹\r\n   */\r\n  getMatrixLineType() {\r\n    const url = '/api/runtime/wf/v1.0/matrixDefinition';\r\n    this.http.get(url).subscribe((re: any) => {\r\n      this.matrixDefEntityList = re;\r\n      this.items = this.matrixDefEntityList.slice(0, this.pageSize);\r\n      this.total = this.matrixDefEntityList.length;\r\n    });\r\n  }\r\n\r\n  private setFields() {\r\n    this.conditionFields = [];\r\n    this.dataFieldAndValues = [];\r\n    // åå¯¹æ¡ä»¶å­æ®µæç§æåºå·è¿è¡æåº\r\n    this.curMatrixDefEntity.conditionField.sort((a, b) => {\r\n      return a.sortOrder - b.sortOrder;\r\n    });\r\n    // å°æåºåçæ¡ä»¶æ¾å¥æ¡ä»¶å­æ®µæ°ç»ä¸­\r\n    for (const condition of this.curMatrixDefEntity.conditionField) {\r\n      this.conditionFields.push(condition);\r\n    }\r\n    // åå¯¹æ°æ®å­æ®µæç§æåºå·è¿è¡æåº\r\n    this.curMatrixDefEntity.dataField.sort((a, b) => {\r\n      return a.sortOrder - b.sortOrder;\r\n    });\r\n    // å¡«åæ°æ®å­æ®µçä¸æåè¡¨\r\n    for (const data of this.curMatrixDefEntity.dataField) {\r\n      const temp = {\r\n        text: data.alias,\r\n        value: data.alias\r\n      };\r\n      this.dataFieldAndValues.push(temp);\r\n    }\r\n  }\r\n\r\n  dictPicked = (rowData) => { // éå®ç©éµå®ä¹åæ§è¡\r\n    // åå°å½åç»å®çæ°æ®æ¸ç©º\r\n    this.curMatrixDataEntity = new MatrixDataInfoEntity();\r\n    this.curDataFieldValue = '';\r\n    this.curMatrixDefEntity = rowData;\r\n    this.curMatrixDataEntity.matrixDefId = rowData.id;\r\n    this.curMatrixDataEntity.matrixDefName = rowData.name;\r\n    this.setFields();\r\n    return of(true);\r\n  }\r\n\r\n  onClear() {\r\n    this.curMatrixDataEntity = new MatrixDataInfoEntity();\r\n  }\r\n\r\n  /**\r\n   * ç¼è¾æ¡ä»¶\r\n   */\r\n  editCondition() {\r\n    if (this.designerUIState.schemas.length > 0) {\r\n      for (const schema of this.designerUIState.schemas) {\r\n        this.expr.addSchema('Schema', schema);\r\n      }\r\n      if (this.designerUIState.schemas[0].entityTypes && this.designerUIState.schemas[0].entityTypes.length > 0) {\r\n        const entityType = this.designerUIState.schemas[0].entityTypes[0];\r\n        this.expr.addInjectedEntity(entityType.name, 'Schema',\r\n          entityType.name, InjectedType.EntityType);\r\n      }\r\n    }\r\n    const context = new Array();\r\n    if (this.designerUIState.procInstContext.length > 0) {\r\n      for (const variable of this.designerUIState.procInstContext) {\r\n        context.push(variable);\r\n      }\r\n    }\r\n    if (this.designerUIState.formalParameterContext.length > 0) {\r\n      for (const variable of this.designerUIState.formalParameterContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (this.designerUIState.participantContext.length > 0) {\r\n      for (const variable of this.designerUIState.participantContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (this.designerUIState.processVariableContext.length > 0) {\r\n      for (const variable of this.designerUIState.processVariableContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (context.length > 0) {\r\n      for (const v of context) {\r\n        this.expr.addContext(v);\r\n      }\r\n    }\r\n    this.expr.setEditPattern(ExprEditMode.Conditional); // è¡¨è¾¾å¼å±ç°æ¨¡å¼ï¼é»è®¤ç®æç\r\n    this.expr.addExpressionText(this.curMatrixDataEntity.condition); // this.reportingLineDataEntity.condition\r\n    this.expr.buildExpression().then((expressioninfo: string) => {\r\n      this.curMatrixDataEntity.condition = expressioninfo;\r\n    });\r\n  }\r\n\r\n  onHelpSearch(data, index, id) { // æå¼å¸®å©\r\n    this.index = index;\r\n    this.fieldId = id;\r\n    this.helpId = this.curMatrixDefEntity.conditionField[this.index].smartHelp;\r\n    this.lookUp.onClear();\r\n    this.lookUp.showDialog();\r\n  }\r\n\r\n  openEnumValue(index, id) {\r\n    this.index = index;\r\n    this.fieldId = id;\r\n    this.showEnumList(JSON.parse(this.curMatrixDefEntity.conditionField[this.index].enumList));\r\n  }\r\n\r\n  private showEnumList(enumList: any[]) {\r\n    const compFactory = this.resolver.resolveComponentFactory(EnumListComponent);\r\n    const compRef = compFactory.create(this.injector);\r\n    const modalConfig = {\r\n      title: 'æä¸¾éæ©',\r\n      width: 650,\r\n      height: 450,\r\n      showButtons: true,\r\n      buttons: compRef.instance.btnRef,\r\n    };\r\n    if (enumList && enumList.length > 0) {\r\n      compRef.instance.load(enumList);\r\n    }\r\n    compRef.instance.confirm.subscribe((re: any[]) => { // ç¹å»ç¡®å®\r\n      if (this.index === 0) {\r\n        this.condition1Text = re[0].value;\r\n        this.condition1Value = re[0].value;\r\n      } else if (this.index === 1) {\r\n        this.condition2Text = re[0].value;\r\n        this.condition2Value = re[0].value;\r\n      } else if (this.index === 2) {\r\n        this.condition3Text = re[0].value;\r\n        this.condition3Value = re[0].value;\r\n      }\r\n    });\r\n    const dialog = this.modalService.show(compRef, modalConfig);\r\n    compRef.instance.closeModalEmitter.subscribe(() => {\r\n      dialog.close();\r\n    });\r\n  }\r\n\r\n  dataFieldChange(data) {\r\n    this.curMatrixDataEntity.dataFieldAlias = data.data.value;\r\n  }\r\n\r\n  selectedDataHandler(data) {\r\n    if (this.index === 0) {\r\n      this.condition1Text = data.name;\r\n      this.condition1Value = data.id;\r\n    } else if (this.index === 1) {\r\n      this.condition2Text = data.name;\r\n      this.condition2Value = data.id;\r\n    } else if (this.index === 2) {\r\n      this.condition3Text = data.name;\r\n      this.condition3Value = data.id;\r\n    }\r\n  }\r\n\r\n  getPerformers() {\r\n    this.curMatrixDataEntity.type = 'wf.MatrixParticipant';\r\n    this.curMatrixDataEntity.conditionFieldText1 = this.condition1Text;\r\n    this.curMatrixDataEntity.conditionField1 = this.condition1Text === '' ? '' : this.condition1Value;\r\n    this.curMatrixDataEntity.conditionFieldText2 = this.condition2Text;\r\n    this.curMatrixDataEntity.conditionField2 = this.condition2Text === '' ? '' : this.condition2Value;\r\n    this.curMatrixDataEntity.conditionFieldText3 = this.condition3Text;\r\n    this.curMatrixDataEntity.conditionField3 = this.condition3Text === '' ? '' : this.condition3Value;\r\n    return this.curMatrixDataEntity;\r\n  }\r\n\r\n  dictHelpPicked = (data: any): Observable<PickedResult> => {\r\n    this.value = null;\r\n    return of({ closeDialog: true });\r\n  }\r\n\r\n  /**\r\n   * æå¼è¡¨è¾¾å¼ç¼è¾å¨\r\n   * @param data ç¼è¾ç¬¬å ä¸ªæ¡ä»¶å­æ®µï¼å¼ä¸ºï¼condition1ï¼condition2ï¼condition3ï¼\r\n   */\r\n  showExprHelp(data: string) {\r\n    if (this.designerUIState.schemas.length > 0) {\r\n      for (const schema of this.designerUIState.schemas) {\r\n        // this.expr.addCommonObject(co);\r\n        this.expr.addSchema('Schema', schema);\r\n      }\r\n      if (this.designerUIState.schemas[0].entityTypes && this.designerUIState.schemas[0].entityTypes.length > 0) {\r\n        const entityType = this.designerUIState.schemas[0].entityTypes[0];\r\n        this.expr.addInjectedEntity(entityType.name, 'Schema',\r\n          entityType.name, InjectedType.EntityType);\r\n      }\r\n    }\r\n    const context = new Array();\r\n    if (this.designerUIState.participantContext.length > 0) {\r\n      for (const variable of this.designerUIState.participantContext) {\r\n        context.push(variable);\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (this.designerUIState.processVariableContext.length > 0) {\r\n      for (const variable of this.designerUIState.processVariableContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (context.length > 0) {\r\n      for (const v of context) {\r\n        this.expr.addContext(v);\r\n      }\r\n    }\r\n    if (data === 'condition1') {\r\n      if (this.curMatrixDataEntity.conditionField1) {\r\n        this.expr.addExpressionText(this.curMatrixDataEntity.conditionField1);\r\n      } else {\r\n        this.expr.addExpressionText('');\r\n      }\r\n    } else if (data === 'condition2') {\r\n      if (this.curMatrixDataEntity.conditionField2) {\r\n        this.expr.addExpressionText(this.curMatrixDataEntity.conditionField2);\r\n      } else {\r\n        this.expr.addExpressionText('');\r\n      }\r\n    } else if (data === 'condition3') {\r\n      if (this.curMatrixDataEntity.conditionField3) {\r\n        this.expr.addExpressionText(this.curMatrixDataEntity.conditionField3);\r\n      } else {\r\n        this.expr.addExpressionText('');\r\n      }\r\n    }\r\n    this.expr.buildExpression().then((expressionInfo: string) => {\r\n      if (data === 'condition1') {\r\n        this.condition1Text = expressionInfo;\r\n        this.condition1Value = expressionInfo;\r\n      } else if (data === 'condition2') {\r\n        this.condition2Text = expressionInfo;\r\n        this.condition2Value = expressionInfo;\r\n      } else {\r\n        this.condition3Text = expressionInfo;\r\n        this.condition3Value = expressionInfo;\r\n      }\r\n    });\r\n  }\r\n  condition1Expr(data) {\r\n    this.showExprHelp(data);\r\n  }\r\n  condition1ExprClick() {\r\n    this.condition1ExprAble = !this.condition1ExprAble;\r\n    this.condition1Text = '';\r\n    this.condition1Value = '';\r\n  }\r\n  condition2Expr(data) {\r\n    this.showExprHelp(data);\r\n  }\r\n  condition2ExprClick() {\r\n    this.condition2ExprAble = !this.condition2ExprAble;\r\n    this.condition2Text = '';\r\n    this.condition2Value = '';\r\n  }\r\n  condition3Expr(data) {\r\n    this.showExprHelp(data);\r\n  }\r\n  condition3ExprClick() {\r\n    this.condition3ExprAble = !this.condition3ExprAble;\r\n    this.condition3Text = '';\r\n    this.condition3Value = '';\r\n  }\r\n}\r\n","import {Component, OnInit, HostBinding, ViewChild, Input, AfterViewInit} from '@angular/core';\r\nimport { FormGroup, FormControl } from '@angular/forms';\r\nimport { UserPerformerComponent } from '../user-performer/user-performer.component';\r\nimport { PositionPerformerComponent } from '../position-performer/position-performer.component';\r\nimport { ComponentPerformerComponent } from '../component-performer/component-performer.component';\r\nimport { BizComponentEntity } from '../../../../domain/entities/biz-component.entity';\r\nimport { ReportingLineComponent } from '../reporting-line/reporting-line.component';\r\nimport { MatrixPerformerComponent } from '../matrix-performer/matrix-performer.component';\r\nimport {HttpService} from \"@ecp-caf/caf-common\";\r\n\r\n@Component({\r\n  selector: 'app-performer-edit',\r\n  templateUrl: './performer-edit.component.html',\r\n  styleUrls: ['./performer-edit.component.scss']\r\n})\r\nexport class PerformerEditComponent implements OnInit, AfterViewInit {\r\n  @HostBinding('class')\r\n  cls = 'farris-main-area flex-column';\r\n  component: BizComponentEntity;\r\n  performer: { type: string, value: any };\r\n\r\n  tab = 'user';\r\n  @Input() display = true;\r\n\r\n  @ViewChild(UserPerformerComponent) usersCmp: UserPerformerComponent;\r\n  @ViewChild(PositionPerformerComponent) posiCmp: PositionPerformerComponent;\r\n  @ViewChild(ComponentPerformerComponent) cmpCmp: ComponentPerformerComponent;\r\n  @ViewChild(ReportingLineComponent) reportingLineCmp: ReportingLineComponent;\r\n  @ViewChild(MatrixPerformerComponent) matrixCmp: MatrixPerformerComponent;\r\n\r\n\r\n\r\n  constructor(private http?: HttpService) {\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    if (this.performer) {\r\n      switch (this.performer.type) {\r\n        case 'wf.UserParticipant':\r\n          this.tab = 'user';\r\n          this.usersCmp.users = [];\r\n          this.usersCmp.users.push(this.performer.value);\r\n          // èèå°å¼å®¹åå²æ°æ®ï¼ææ¶ä¸ä½¿ç¨ç¨æ·åä¸èå®ä½ç±»ä¸­çuserTypeå±æ§\r\n          if(this.performer.value.performerId && this.performer.value.performerId.charAt(0) === '{'){\r\n            let url = '/api/runtime/wf/v1.0/reportingOrgType/hasAdminOrg';\r\n            this.http.get(url).subscribe((data: any) => {\r\n              this.usersCmp.userTypeButtonNeedShow = data;\r\n              this.usersCmp.userType = 'variable';\r\n              this.usersCmp.curOrgType = this.performer.value.orgType === 'Sys' ? 'Sys' : 'Administrative_organization';\r\n              this.usersCmp.condition = this.performer.value.condition;\r\n              // æ ¹æ®è¡¨è¾¾å¼ä¸­çå½æ°åå¤æ­æ¯å¦ä½¿ç¨çæ¯ä¸ä¸æåé\r\n              const isContextVariable = this.performer.value.performerId.indexOf(\"GetContextParameter\") >= 0;\r\n              this.usersCmp.variableOrgTypes = isContextVariable ? [\r\n                { name: 'ç³»ç»ç¨æ·', value: 'Sys' }\r\n                ] : [\r\n                { name: 'ç³»ç»ç¨æ·', value: 'Sys' },\r\n                { name: 'è¡æ¿äººå', value: 'Administrative_organization' }\r\n              ];\r\n            })\r\n          }else{\r\n            this.usersCmp.userType = 'user';\r\n            this.usersCmp.condition = this.performer.value.condition;\r\n          }\r\n          break;\r\n        case 'wf.PositionParticipant':\r\n          this.tab = 'position';\r\n          this.posiCmp.position = Object.assign({}, this.performer.value);\r\n          if (this.posiCmp.position.positionType === '0') {\r\n            this.posiCmp.filter = { positionType: 0 };\r\n          } else {\r\n            this.posiCmp.filter = { positionType: 1 };\r\n          }\r\n          break;\r\n        case 'wf.ReportingLineParticipant':\r\n          this.tab = 'report';\r\n          this.reportingLineCmp.setReportingLineDataEntity = this.performer.value;\r\n          break;\r\n        case 'wf.ComponentParticipant':\r\n          this.tab = 'component';\r\n          this.cmpCmp.component = this.performer.value;\r\n          break;\r\n        case 'wf.MatrixParticipant':\r\n          this.tab = 'matrix';\r\n          this.cmpCmp.component = this.performer.value;\r\n          this.matrixCmp.setMatrixDataEntity = this.performer.value;\r\n      }\r\n    }\r\n  }\r\n  getPerformers() {\r\n    const users = this.usersCmp.getPerformers();\r\n    const position = this.posiCmp.getPerformers();\r\n    const component = this.cmpCmp.getPerformers();\r\n    const reportingLine = this.reportingLineCmp.getPerformers();\r\n    const matrix = this.matrixCmp.getPerformers();\r\n\r\n    // let performers = [];\r\n    let positionPerformers = []; // åªåå«å²ä½åä¸è\r\n    let userPerformers = []; // ç¨æ·åä¸è\r\n\r\n    if (users && users.length > 0) {\r\n      userPerformers = userPerformers.concat(users);\r\n    }\r\n    if (position && position.performerId) {\r\n      positionPerformers.push(position);\r\n    }\r\n    return { userPerformers, positionPerformers, component, reportingLine, matrix};\r\n  }\r\n}\r\n","import { Component, OnInit, HostBinding, Input, NgZone, AfterViewInit, ViewChild, ElementRef } from '@angular/core';\r\nimport { PerformerOptions } from '../../entities/performer-options';\r\nimport { ProcessDesignerUIState } from '../../../../app/process-designer.uistate';\r\nimport { ExpressionService, InjectedType } from '@gsp-svc/expression';\r\nimport { MessagerService } from '@farris/ui-messager';\r\n\r\n@Component({\r\n  selector: 'app-performer-options',\r\n  templateUrl: './performer-options.component.html',\r\n  styleUrls: ['./performer-options.component.scss']\r\n})\r\nexport class PerformerOptionsComponent implements OnInit, AfterViewInit {\r\n  @HostBinding('class')\r\n  cls = 'farris-main-area flex-column';\r\n\r\n  @Input()\r\n  set options(options: PerformerOptions) {\r\n    if (options) {\r\n      this.exclusionPerformers = options.ExclusionPerformers;\r\n      this.noPerformerStrategy = options.NoPerformerStrategy;\r\n      this.historicFirst = options.HistoricFirst;\r\n      this.automaticPerformers = options.automaticPerformers;\r\n    }\r\n  }\r\n\r\n  @Input()\r\n  set exclusionPerformers(e: string | Array<string>) {\r\n    if (e) {\r\n      if (typeof e === 'string') {\r\n        this.excludeProcInstCreator = e.indexOf('procInstCreator') > -1;\r\n        this.excludePreActExecutors = e.indexOf('preActExecutors') > -1;\r\n      } else {\r\n        this.excludeProcInstCreator = e.findIndex(i => i === 'procInstCreator') > -1;\r\n        this.excludePreActExecutors = e.findIndex(i => i === 'preActExecutors') > -1;\r\n        this.excludeAllPassExecutors = e.findIndex(i => i === 'allPassExecutors') > -1;\r\n\r\n        this.excludeExprPerformer = e.find(i => i.indexOf('expr') > -1);\r\n      }\r\n    }\r\n  }\r\n\r\n  set automaticPerformers(e: Array<string>) {\r\n    if (e && e.length > 0) {\r\n      this.autoProcInstCreator = e.findIndex(i => i === 'procInstCreator') > -1;\r\n      this.autoPreActExecutors = e.findIndex(i => i === 'preActExecutors') > -1;\r\n      this.autoAllPassExecutors = e.findIndex(i => i === 'allPassExecutors') > -1;\r\n    }\r\n\r\n  }\r\n\r\n  @ViewChild('inputGroup') inputGroup: ElementRef;\r\n  showClearButton = false;\r\n\r\n  historicFirst = false;\r\n\r\n  excludeExprPerformer: string;\r\n\r\n\r\n  excludeProcInstCreator = false;\r\n  excludePreActExecutors = false;\r\n  excludeAllPassExecutors = false;\r\n\r\n  autoProcInstCreator = false;\r\n  autoPreActExecutors = false;\r\n  autoAllPassExecutors = false;\r\n\r\n  noPerformerStrategyList = [\r\n    { text: 'åä¸æµè½¬', value: 'leave' },\r\n    { text: 'å¼å¸¸æç¤º', value: 'throwException' }];\r\n\r\n  exclusionPerformersOptions = [\r\n    { value: 'procInstCreator', name: 'æµç¨åèµ·äºº' },\r\n    { value: 'preActExecutors', name: 'ä¸ä¸èç¹åçäºº' },\r\n    { value: 'allPassExecutors', name: 'ææå·²åçäººå' }\r\n  ];\r\n\r\n  noPerformerStrategy: string = this.noPerformerStrategyList[0].value;\r\n\r\n  constructor(\r\n    private ngZone: NgZone,\r\n    private designerState: ProcessDesignerUIState,\r\n    private expr: ExpressionService,\r\n    private message: MessagerService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    this.ngZone.runOutsideAngular(() => {\r\n      this.inputGroup.nativeElement.addEventListener(\r\n        'mouseenter',\r\n        this.onMouseEnter.bind(this)\r\n      );\r\n      this.inputGroup.nativeElement.addEventListener(\r\n        'mouseleave',\r\n        this.onMouseLeave.bind(this)\r\n      );\r\n    });\r\n  }\r\n\r\n  onMouseEnter(event) {\r\n    this.showClearButton = true;\r\n    if (this.showClearButton) {\r\n      this.toggleClearIcon(event, true);\r\n    }\r\n  }\r\n  onMouseLeave(event) {\r\n    this.showClearButton = false;\r\n    this.toggleClearIcon(event, false);\r\n  }\r\n  private toggleClearIcon(event: any, isShow = false) {\r\n    const str = isShow ? '' : 'none';\r\n    const clearIcon = event.target.querySelector('.input-group-clear');\r\n    if (clearIcon) {\r\n      clearIcon.style.display = str;\r\n    }\r\n  }\r\n\r\n  excludeProcInstCreatorClick(event: any) {\r\n    // this.excludeProcInstCreator = !this.excludeProcInstCreator;\r\n    if (this.excludeProcInstCreator && this.autoProcInstCreator) {\r\n      this.autoProcInstCreator = false;\r\n    }\r\n  }\r\n\r\n  excludePreActExecutorsClick(event: any) {\r\n    // this.excludePreActExecutors = !this.excludePreActExecutors;\r\n    if (this.autoAllPassExecutors === true && this.excludePreActExecutors === true) {\r\n      this.message.info('ææå·²åçäººåå·²è®¾ç½®èªå¨å®¡æ¹ï¼ä¸ä¸ªèç¹å·²åçäººåé»è®¤ä¸åè®¸æé¤ï¼', () => {\r\n        this.excludePreActExecutors = false;\r\n      });\r\n      return;\r\n    }\r\n    if (this.excludePreActExecutors && this.autoPreActExecutors) {\r\n      this.autoPreActExecutors = false;\r\n    }\r\n  }\r\n\r\n  excludeAllPassExecutorsClick(event: any) {\r\n    // this.excludeAllPassExecutors = !this.excludeAllPassExecutors;\r\n    if (this.excludeAllPassExecutors) {\r\n      if (this.autoPreActExecutors) {\r\n        this.autoPreActExecutors = false;\r\n      }\r\n      if (this.autoAllPassExecutors) {\r\n        this.autoAllPassExecutors = false;\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  autoProcInstCreatorClick(event: any) {\r\n    // if (this.designerState.propertyData.CompleteStrategy !== this.designerState.completeIterator[0].key\r\n    //   && this.autoProcInstCreator === true ) {\r\n    //   this.message.info('ãå®æç­ç¥ãä¸ºãä¼ç­¾ãæ¶ï¼ä¸åè®¸è®¾ç½®èªå¨å®¡æ¹ï¼è¯·äºè§£ï¼', () => {\r\n    //     this.autoProcInstCreator = false;\r\n    //   });\r\n    //   return;\r\n    // }\r\n    if (this.designerState.propertyData.AssignStrategy === this.designerState.assignIterator[2].key\r\n      && this.autoProcInstCreator === true ) {\r\n      this.message.info('ãåéç­ç¥ãä¸ºãé¢ç¨ãæ¶ï¼ä¸åè®¸è®¾ç½®èªå¨å®¡æ¹ï¼è¯·äºè§£ï¼', () => {\r\n        this.autoProcInstCreator = false;\r\n      });\r\n      return;\r\n    }\r\n    // this.autoProcInstCreator = !this.autoProcInstCreator;\r\n    if (this.autoProcInstCreator && this.excludeProcInstCreator) {\r\n      this.excludeProcInstCreator = false;\r\n    }\r\n  }\r\n\r\n  autoPreActExecutorsClick(event: any) {\r\n    // if (this.designerState.propertyData.CompleteStrategy !== this.designerState.completeIterator[0].key\r\n    //   && this.autoPreActExecutors === true) {\r\n    //   this.message.info('ãå®æç­ç¥ãä¸ºãä¼ç­¾ãæ¶ï¼ä¸åè®¸è®¾ç½®èªå¨å®¡æ¹ï¼è¯·äºè§£ï¼', () => {\r\n    //     this.autoPreActExecutors = false;\r\n    //   });\r\n    //   return;\r\n    // }\r\n    if (this.designerState.propertyData.AssignStrategy === this.designerState.assignIterator[2].key\r\n      && this.autoPreActExecutors === true) {\r\n      this.message.info('ãåéç­ç¥ãä¸ºãé¢ç¨ãæ¶ï¼ä¸åè®¸è®¾ç½®èªå¨å®¡æ¹ï¼è¯·äºè§£ï¼', () => {\r\n        this.autoPreActExecutors = false;\r\n      });\r\n      return;\r\n    }\r\n    if (this.excludeAllPassExecutors === true && this.autoPreActExecutors === true) {\r\n      this.message.info('ææå·²åçäººåå·²è®¾ç½®ä¸åè®¸å®¡æ¹ï¼æä»¥ä¸ä¸ªèç¹å·²åçäººåé»è®¤ä¸åè®¸èªå¨å®¡æ¹ï¼', () => {\r\n        this.autoPreActExecutors = false;\r\n      });\r\n      return;\r\n    }\r\n    // this.autoPreActExecutors = !this.autoPreActExecutors;\r\n    if (this.autoPreActExecutors && this.excludePreActExecutors) {\r\n      this.excludePreActExecutors = false;\r\n    }\r\n  }\r\n\r\n  autoAllPassExecutorsClick(event: any) {\r\n    // if (this.designerState.propertyData.CompleteStrategy !== this.designerState.completeIterator[0].key\r\n    //   && this.autoAllPassExecutors === true) {\r\n    //   this.message.info('ãå®æç­ç¥ãä¸ºãä¼ç­¾ãæ¶ï¼ä¸åè®¸è®¾ç½®èªå¨å®¡æ¹ï¼è¯·äºè§£ï¼', () => {\r\n    //     this.autoAllPassExecutors = false;\r\n    //   });\r\n    //   return;\r\n    // }\r\n    if (this.designerState.propertyData.AssignStrategy === this.designerState.assignIterator[2].key\r\n      && this.autoAllPassExecutors === true) {\r\n      this.message.info('ãåéç­ç¥ãä¸ºãé¢ç¨ãæ¶ï¼ä¸åè®¸è®¾ç½®èªå¨å®¡æ¹ï¼è¯·äºè§£ï¼', () => {\r\n        this.autoAllPassExecutors = false;\r\n      });\r\n      return;\r\n    }\r\n    // this.autoAllPassExecutors = !this.autoAllPassExecutors;\r\n    if (this.autoAllPassExecutors) {\r\n      if (this.excludeAllPassExecutors) {\r\n        this.excludeAllPassExecutors = false;\r\n      }\r\n      if (this.excludePreActExecutors) {\r\n        this.excludePreActExecutors = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  getPerformerOptions(): PerformerOptions {\r\n    return {\r\n      ExclusionPerformers: this.getExclusionPerformers(),\r\n      NoPerformerStrategy: this.noPerformerStrategy,\r\n      HistoricFirst: this.historicFirst,\r\n      automaticPerformers: this.getAutoPerformers()\r\n    };\r\n  }\r\n  private getExclusionPerformers(): string[] {\r\n    const exclusionPerf: Array<string> = [];\r\n    if (this.excludeProcInstCreator) {\r\n      exclusionPerf.push('procInstCreator');\r\n    }\r\n    if (this.excludePreActExecutors) {\r\n      exclusionPerf.push('preActExecutors');\r\n    }\r\n    if (this.excludeAllPassExecutors) {\r\n      exclusionPerf.push('allPassExecutors');\r\n    }\r\n    if (this.excludeExprPerformer) {\r\n      exclusionPerf.push(this.excludeExprPerformer);\r\n    }\r\n\r\n    return exclusionPerf;\r\n  }\r\n\r\n  private getAutoPerformers(): Array<string> {\r\n    const autoPerf: Array<string> = new Array();\r\n    if (this.autoProcInstCreator) {\r\n      autoPerf.push('procInstCreator');\r\n    }\r\n    if (this.autoPreActExecutors) {\r\n      autoPerf.push('preActExecutors');\r\n    }\r\n    if (this.autoAllPassExecutors) {\r\n      autoPerf.push('allPassExecutors');\r\n    }\r\n\r\n    return autoPerf;\r\n  }\r\n\r\n  openExprEditor() {\r\n    if (this.designerState.schemas.length > 0) {\r\n      for (const schema of this.designerState.schemas) {\r\n        this.expr.addSchema('Schema', schema);\r\n      }\r\n      if (this.designerState.schemas[0].entityTypes && this.designerState.schemas[0].entityTypes.length > 0) {\r\n        const entityType = this.designerState.schemas[0].entityTypes[0];\r\n        this.expr.addInjectedEntity(entityType.name, 'Schema',\r\n          entityType.name, InjectedType.EntityType);\r\n      }\r\n    }\r\n    const context = new Array();\r\n    if (this.designerState.procInstContext.length > 0) {\r\n      for (const variable of this.designerState.procInstContext) {\r\n        context.push(variable);\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (this.designerState.formalParameterContext.length > 0) {\r\n      for (const variable of this.designerState.formalParameterContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (this.designerState.participantContext.length > 0) {\r\n      for (const variable of this.designerState.participantContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (this.designerState.processVariableContext.length > 0) {\r\n      for (const variable of this.designerState.processVariableContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (context.length > 0) {\r\n      for (const v of context) {\r\n        this.expr.addContext(v);\r\n      }\r\n    }\r\n    // if (this.excludeExprPerformer) {\r\n    this.expr.addExpressionText(this.excludeExprPerformer);\r\n    // }\r\n    this.expr.buildExpression().then((d: string) => {\r\n      this.excludeExprPerformer = d;\r\n    });\r\n  }\r\n\r\n  clear() {\r\n    this.excludeExprPerformer = '';\r\n  }\r\n\r\n}\r\n","import { Component, OnInit, HostBinding, Output, EventEmitter, Input, ViewChild, TemplateRef, ComponentFactoryResolver, Injector, ComponentRef } from '@angular/core';\r\nimport { TypeConverter } from '@farris/ui-property-panel';\r\nimport { PerformerUIState } from './performer.uistate';\r\nimport { PerformerRepository } from './performer.repository';\r\nimport { PerformerViewModel } from './performer.viewmodel';\r\nimport { FormBuilder } from '@angular/forms';\r\nimport { BsModalService, BsModalRef } from '@farris/ui-modal';\r\nimport { PerformerEditComponent } from './views/performer-edit/performer-edit.component';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { PerformerOptionsComponent } from './views/performer-options/performer-options.component';\r\nimport { DialogComponent } from '@farris/ui-dialog';\r\nimport { PerformerEntity } from './entities/performer.entity';\r\nimport { ProcessDesignerUIState } from '../../app/process-designer.uistate';\r\nimport { ExpressionService, InjectedType, ExprEditMode } from '@gsp-svc/expression';\r\nimport { ReportingLineDataEntity } from './views/reporting-line/reporting-line-data.entity';\r\nimport { PerformerInfo } from './entities/performer-info.entity';\r\nimport { DataColumn, DatagridComponent } from '@farris/ui-datagrid';\r\nimport { Observable, of} from 'rxjs';\r\nimport { PositionPerformerEntity } from './entities/position-performer.entity';\r\nimport { HttpService } from '@ecp-caf/caf-common';\r\nimport { ComponentPerformer } from './views/component-performer/component-performer.entity';\r\nimport {MatrixDataInfoEntity} from './views/matrix-performer/entitis/matrix-data-info.entity';\r\n\r\n@Component({\r\n  selector: 'app-performer',\r\n  templateUrl: './performer.component.html',\r\n  styleUrls: ['./performer.component.scss'],\r\n  providers: [PerformerViewModel, PerformerRepository, PerformerUIState]\r\n})\r\nexport class PerformerComponent implements OnInit {\r\n  @HostBinding('class')\r\n  cls = 'farris-main-area flex-column';\r\n\r\n  display = true; // æ§å¶ç©éµåä¸èæ¯å¦æ¾ç¤º\r\n\r\n  @ViewChild('iconSelectFooter') modalFooter: TemplateRef<any>;\r\n  @ViewChild('editFooter') editFooter: TemplateRef<any>;\r\n  @ViewChild(PerformerOptionsComponent) options: PerformerOptionsComponent;\r\n  @ViewChild('participantOptions') optionsDialog: DialogComponent;\r\n  @ViewChild(DatagridComponent) grid: DatagridComponent;\r\n\r\n  @Output() closeModal = new EventEmitter<any>();\r\n  @Output() submitModal = new EventEmitter<any>();\r\n\r\n  @Input()\r\n  set value(partInfo: PerformerInfo) {\r\n    if (partInfo.performers && partInfo.performers.length > 0) {\r\n      this.uistate.performerInfo.performers = partInfo.performers;\r\n      this.uistate.performersList = this.uistate.performersList.concat(partInfo.performers as any[]);\r\n      this.uistate.performersList.map(performer => performer.description = this.performerDescription(performer as any));\r\n    }\r\n    if (partInfo.components && partInfo.components.length > 0) {\r\n      this.uistate.performerInfo.components = partInfo.components;\r\n      partInfo.components.forEach(cmp => {\r\n        this.uistate.performersList.push({\r\n          id: cmp.id,\r\n          type: 'wf.ComponentParticipant',\r\n          performerName: cmp.name,\r\n          description: this.componentDescription(cmp),\r\n          condition: cmp.condition\r\n        });\r\n      });\r\n    }\r\n    if (partInfo.reportingLines && partInfo.reportingLines.length > 0) {\r\n      this.uistate.performerInfo.reportingLines = partInfo.reportingLines;\r\n      partInfo.reportingLines.forEach(r => {\r\n        this.uistate.performersList.push({\r\n          id: r.id,\r\n          type: 'wf.ReportingLineParticipant',\r\n          performerName: r.reportingLineDefName + '-' + r.dimension,\r\n          description: this.reportingLineDescription(r),\r\n          condition: r.condition\r\n        });\r\n      });\r\n    }\r\n    if (partInfo.matrixParticipants && partInfo.matrixParticipants.length > 0) {\r\n      this.uistate.performerInfo.matrixParticipants = partInfo.matrixParticipants;\r\n      partInfo.matrixParticipants.forEach(r => {\r\n        this.uistate.performersList.push({\r\n          id: r.id,\r\n          type: 'wf.MatrixParticipant',\r\n          performerName: r.matrixDefName + '-' + r.dataFieldAlias,\r\n          description: this.matrixDescription(r),\r\n          condition: r.condition\r\n        });\r\n      });\r\n    }\r\n    if (partInfo.options) {\r\n      this.uistate.performerInfo.options = partInfo.options;\r\n    }\r\n  }\r\n\r\n  @Input() editorParams = {};\r\n\r\n  editDialog: BsModalRef;\r\n  compRef: ComponentRef<PerformerEditComponent>;\r\n  isClose = true;\r\n\r\n  modalConfig = {\r\n    title: 'åä¸è',\r\n    width: 800,\r\n    height: 515,\r\n    showButtons: true\r\n  };\r\n  columns = [\r\n    {\r\n      field: 'type', width: 50, title: 'ç±»å',\r\n      formatter: {\r\n        type: 'enum',\r\n        options: { valueField: 'value', textField: 'text', data: this.uistate.typeCollection }\r\n      }\r\n     },\r\n    { field: 'performerName', width: 50, title: 'åç§°' },\r\n    { field: 'description', width: 100, title: 'æè¿°', showTips: true },\r\n    {\r\n      field: 'condition', width: 60, title: 'å¯ç¨æ¡ä»¶', showTips: true,\r\n      editor: {\r\n        type: 'input-group',\r\n        options: {\r\n          groupText: '<i class=\"f-icon f-icon-lookup\"></i>',\r\n          editable: false,\r\n          clickHandle: (e) => {\r\n            e.formControl.setValue(e.instance.value ? e.instance.value : '');\r\n            this.editConditon(e);\r\n          },\r\n          clear: (e) => {\r\n            if (e.rowData.type === 'wf.ComponentParticipant') {\r\n              const i = this.uistate.performerInfo.components.findIndex(item => item.id === e.rowData.id);\r\n              this.uistate.performerInfo.components[i].condition = '';\r\n            } else if (e.rowData.type === 'wf.ReportingLineParticipant') {\r\n              const i = this.uistate.performerInfo.reportingLines.findIndex(item => item.id === e.rowData.id);\r\n              this.uistate.performerInfo.reportingLines[i].condition = '';\r\n            } else if (e.rowData.type === 'wf.MatrixParticipant') {\r\n              const i = this.uistate.performerInfo.matrixParticipants.findIndex(item => item.id === e.rowData.id);\r\n              this.uistate.performerInfo.matrixParticipants[i].condition = '';\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  ];\r\n\r\n  curPerformer: any;\r\n  editState = 'new'; // ç¼è¾ç¶æï¼ç¨äºåºåæ¯æ°å¢è¿æ¯ç¼è¾  new | edit\r\n\r\n  constructor(\r\n    public viewModel: PerformerViewModel,\r\n    public uistate: PerformerUIState,\r\n    private formBuilder: FormBuilder,\r\n    private resolver: ComponentFactoryResolver,\r\n    private injector: Injector,\r\n    private modalService: BsModalService,\r\n    private message: MessagerService,\r\n    private designerUIState: ProcessDesignerUIState,\r\n    private expr: ExpressionService,\r\n    private http: HttpService,\r\n  ) {\r\n    this.GetOrganizationType();\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.getMatrixConfig().subscribe(re => {\r\n      if (re && re.currentValue === 'false') {\r\n        this.display = false;\r\n      }\r\n    });\r\n  }\r\n  add() {\r\n    this.editState = 'new';\r\n    const compFactory = this.resolver.resolveComponentFactory(PerformerEditComponent);\r\n    this.compRef = compFactory.create(this.injector);\r\n    this.compRef.instance.display = this.display;\r\n\r\n    const modalConfig = {\r\n      title: 'åä¸èéæ©',\r\n      width: 800,\r\n      height: 515,\r\n      buttons: this.editFooter,\r\n      showButtons: true\r\n    };\r\n    this.editDialog = this.modalService.show(this.compRef, modalConfig);\r\n  }\r\n  edit() {\r\n    this.editState = 'edit'\r\n    if (this.uistate.curPerformer) {\r\n      const modalConfig = {\r\n        title: 'åä¸èéæ©',\r\n        width: 800,\r\n        height: 515,\r\n        buttons: this.editFooter,\r\n        showButtons: true\r\n      };\r\n      const compFactory = this.resolver.resolveComponentFactory(PerformerEditComponent);\r\n      this.compRef = compFactory.create(this.injector);\r\n      switch (this.uistate.curPerformer.type) {\r\n        case 'wf.PositionParticipant':\r\n          this.compRef.instance.performer = {\r\n            type: 'wf.PositionParticipant',\r\n            value: this.uistate.performerInfo.performers.find(p => p.id === this.uistate.curPerformer.id)\r\n          };\r\n          break;\r\n        case 'wf.UserParticipant':\r\n          this.compRef.instance.performer = {\r\n            type: 'wf.UserParticipant',\r\n            value: this.uistate.performerInfo.performers.find(p => p.id === this.uistate.curPerformer.id)\r\n          }\r\n          break;\r\n        case 'wf.ReportingLineParticipant':\r\n          const reportingLine = this.uistate.performerInfo.reportingLines.find(r => {\r\n            return r.id === this.uistate.curPerformer.id;\r\n          })\r\n          this.compRef.instance.performer = {\r\n            type: 'wf.ReportingLineParticipant',\r\n            value: reportingLine\r\n          };\r\n          const url = '/api/runtime/wf/v1.0/reportingLineDefinitions/' + reportingLine.reportingLineDefId;\r\n          this.http.get(url).subscribe((res: any) => {\r\n            if (!res) {\r\n              this.message.error('è¯¥æ¡æ±æ¥å³ç³»æ°æ®çå®ä¹å·²å é¤ï¼è¯¥æ¡æ°æ®å°å é¤')\r\n              this.remove();\r\n            } else {\r\n              this.editDialog = this.modalService.show(this.compRef, modalConfig);\r\n            }\r\n          });\r\n          break;\r\n        case 'wf.MatrixParticipant':\r\n          const matrix = this.uistate.performerInfo.matrixParticipants.find(r => {\r\n            return r.id === this.uistate.curPerformer.id;\r\n          })\r\n          this.compRef.instance.performer = {\r\n            type: 'wf.MatrixParticipant',\r\n            value: matrix\r\n          };\r\n          const urlMatrix = '/api/runtime/wf/v1.0/matrixDefinition/' + matrix.matrixDefId;\r\n          this.http.get(urlMatrix).subscribe((res: any) => {\r\n            if (!res) {\r\n              this.message.error('è¯¥æ¡ç©éµæ°æ®çå®ä¹å·²å é¤ï¼è¯¥æ¡æ°æ®å°å é¤')\r\n              this.remove();\r\n            } else {\r\n              this.editDialog = this.modalService.show(this.compRef, modalConfig);\r\n            }\r\n          });\r\n          break;\r\n        case 'wf.ComponentParticipant':\r\n          this.compRef.instance.performer = {\r\n            type: 'wf.ComponentParticipant',\r\n            value: this.uistate.performerInfo.components.find(c => {\r\n              return c.id === this.uistate.curPerformer.id;\r\n            })\r\n          };\r\n          break;\r\n      }\r\n      if(this.uistate.curPerformer.type !== 'wf.ReportingLineParticipant' &&\r\n        this.uistate.curPerformer.type !== 'wf.MatrixParticipant'){ // æ±æ¥å³ç³»åç©éµåç¬å¤ç\r\n        this.editDialog = this.modalService.show(this.compRef, modalConfig);\r\n      }\r\n    }\r\n  }\r\n  remove() {\r\n    if (this.grid.selectedRow) {\r\n      this.grid.endCellEdit();\r\n      if (this.grid.selectedRow.data.type === 'wf.ComponentParticipant') {\r\n        const i = this.uistate.performerInfo.components.findIndex(item => item.id === this.grid.selectedRow.data.id);\r\n        this.uistate.performerInfo.components.splice(i, 1);\r\n      } else if (this.grid.selectedRow.data.type === 'wf.ReportingLineParticipant') {\r\n        const i = this.uistate.performerInfo.reportingLines.findIndex(item => item.id === this.grid.selectedRow.data.id);\r\n        this.uistate.performerInfo.reportingLines.splice(i, 1);\r\n      } else if (this.grid.selectedRow.data.type === 'wf.MatrixParticipant') {\r\n        const i = this.uistate.performerInfo.matrixParticipants.findIndex(item => item.id === this.grid.selectedRow.data.id);\r\n        this.uistate.performerInfo.matrixParticipants.splice(i, 1);\r\n      } else {\r\n        const i = this.uistate.performerInfo.performers.findIndex(item => item.id === this.grid.selectedRow.data.id);\r\n        this.uistate.performerInfo.performers.splice(i, 1);\r\n      }\r\n      const index = this.uistate.performersList.findIndex(p => p.id === this.grid.selectedRow.data.id);\r\n      this.uistate.performersList.splice(index, 1);\r\n\r\n      this.grid.loadData(this.uistate.performersList);\r\n    } else {\r\n      this.message.info('è¯·åéä¸­ä¸æ¡åä¸èä¿¡æ¯ï¼');\r\n    }\r\n  }\r\n  clear() {\r\n    this.uistate.performerInfo.performers = [];\r\n    this.uistate.performerInfo.components = [];\r\n    this.uistate.performerInfo.reportingLines = [];\r\n    this.uistate.performerInfo.matrixParticipants = [];\r\n    this.uistate.performersList = [];\r\n    this.grid.loadData(this.uistate.performersList);\r\n  }\r\n  clickOK() {\r\n    this.grid.endCellEdit();\r\n    const object = {\r\n      value: this.uistate.performerInfo, parameters: null\r\n    };\r\n    this.submitModal.emit(object);\r\n  }\r\n  clickCancel() {\r\n    this.closeModal.emit();\r\n  }\r\n  editOK() {\r\n    if (this.compRef) {\r\n      const re = this.compRef.instance.getPerformers();\r\n      if (re.userPerformers && re.userPerformers.length > 0) {\r\n        re.userPerformers.forEach(p => {\r\n          const i = this.uistate.performerInfo.performers.findIndex(a => (a.id === p.id || a.performerId === p.performerId));\r\n          if (i > -1) {\r\n            const id = this.uistate.performerInfo.performers[i].id;\r\n            this.uistate.performerInfo.performers[i] = p;\r\n            const index = this.uistate.performersList.findIndex(a => a.id === id);\r\n            this.uistate.performersList[index] = p;\r\n          } else {\r\n            if (this.editState === 'edit') {\r\n              this.remove();\r\n            }\r\n            this.uistate.performerInfo.performers.push(p);\r\n            this.uistate.performersList = this.uistate.performersList.concat([p]);\r\n          }\r\n        });\r\n        this.uistate.performersList\r\n          .filter(p => p.type === this.uistate.typeCollection[0].value || p.type === this.uistate.typeCollection[1].value )\r\n          .map(performer => performer.description =\r\n            this.performerDescription(performer as any));\r\n      }\r\n      if (re.positionPerformers && re.positionPerformers.length > 0) {\r\n        re.positionPerformers.forEach(p => {\r\n\r\n          // (1)idä¸è´ï¼ä¸ºç¼è¾å²ä½ï¼ï¼2ï¼performidä¸è´ï¼æ°å¢çç¨æ·ï¼å²ä½å·²å­å¨\r\n          const i = this.uistate.performerInfo.performers.findIndex(a => (a.id === p.id || a.performerId === p.performerId));\r\n          if (i > -1) {\r\n            const id = this.uistate.performerInfo.performers[i].id;\r\n            this.uistate.performerInfo.performers[i] = p;\r\n            const index = this.uistate.performersList.findIndex(a => a.id === id);\r\n            this.uistate.performersList[index] = p;\r\n          } else {\r\n            this.uistate.performerInfo.performers.push(p);\r\n            this.uistate.performersList = this.uistate.performersList.concat([p]);\r\n          }\r\n        });\r\n        this.uistate.performersList\r\n          .filter(p => p.type === this.uistate.typeCollection[0].value || p.type === this.uistate.typeCollection[1].value )\r\n          .map(performer => performer.description =\r\n            this.performerDescription(performer as any));\r\n      }\r\n      if (re.component && re.component.metadataId && re.component.methodCode) {\r\n        const i = this.uistate.performerInfo.components.findIndex(a => a.id === re.component.id);\r\n        if (i > -1) {\r\n          this.uistate.performerInfo.components[i] = re.component;\r\n          const index = this.uistate.performersList.findIndex(a => a.id === re.component.id);\r\n          this.uistate.performersList[index] = {\r\n            id: re.component.id,\r\n            type: 'wf.ComponentParticipant',\r\n            performerName: re.component.name,\r\n            description: this.componentDescription(re.component),\r\n            condition: re.component.condition\r\n          };\r\n        } else {\r\n          this.uistate.performerInfo.components.push(re.component);\r\n          this.uistate.performersList.push({\r\n            id: re.component.id,\r\n            type: 'wf.ComponentParticipant',\r\n            performerName: re.component.name,\r\n            description: this.componentDescription(re.component),\r\n            condition: ''\r\n          });\r\n        }\r\n      }\r\n      if (re.reportingLine && re.reportingLine.reportingLineDefId && re.reportingLine.dimension) {\r\n        if(re.reportingLine.reportingReferObject === 'dept' && !re.reportingLine.refOrgId){\r\n          this.isClose = false;\r\n          this.message.info('âé¨é¨âæ±æ¥å³ç³»ç±»åä¸ï¼åç§äººæå¨é¨é¨ä¸è½ä¸ºç©º');\r\n        } else if (re.reportingLine.reportingReferObject !== 'dept' && !re.reportingLine.refUserId && !re.reportingLine.refEmployeeId) { // ç¨æ·åå¶ä»äººåæ±æ¥å¯¹è±¡ç±»åï¼åç§ç¨æ·ååç§åå·¥ä¸è½å¨é¨ä¸ºç©º\r\n          this.isClose = false;\r\n          this.message.info('âç¨æ·âæ±æ¥å³ç³»ç±»åä¸ï¼åç§äººä¸è½ä¸ºç©º');\r\n        } else {\r\n          this.isClose = true;\r\n          this.addReportingLineData(re);\r\n        }\r\n      }\r\n      if (re.matrix && re.matrix.matrixDefId) {\r\n        if(!re.matrix.conditionField1 && !re.matrix.conditionField2 && !re.matrix.conditionField3){\r\n          this.isClose = false;\r\n          this.message.info('æ¡ä»¶å­æ®µè³å°è¦å­å¨ä¸ä¸ª');\r\n        } else if(!re.matrix.dataFieldAlias){\r\n          this.isClose = false;\r\n          this.message.info('æ°æ®å­æ®µä¸è½ä¸ºç©º');\r\n        } else {\r\n          this.isClose = true;\r\n          this.addMatrixData(re);\r\n        }\r\n      }\r\n      this.grid.loadData(this.uistate.performersList);\r\n    }\r\n    if (this.editDialog && this.isClose) {\r\n      this.editDialog.close();\r\n    }\r\n  }\r\n  private addReportingLineData(re: any){\r\n    const i = this.uistate.performerInfo.reportingLines.findIndex(a => a.id === re.reportingLine.id);\r\n    if (i > -1) {\r\n      this.uistate.performerInfo.reportingLines[i] = re.reportingLine;\r\n      const index = this.uistate.performersList.findIndex(a => a.id === re.reportingLine.id);\r\n      this.uistate.performersList[index] = {\r\n        id: re.reportingLine.id,\r\n        type: 'wf.ReportingLineParticipant',\r\n        performerName: re.reportingLine.reportingLineDefName + '-' + re.reportingLine.dimension,\r\n        description: this.reportingLineDescription(re.reportingLine),\r\n        condition: re.reportingLine.condition\r\n      };\r\n    } else {\r\n      for(const reportingLineData of this.uistate.performerInfo.reportingLines){\r\n        if(reportingLineData.reportingLineDefId === re.reportingLine.definitionId &&\r\n          reportingLineData.dimension === re.reportingLine.dimension &&\r\n          reportingLineData.refUserId === re.reportingLine.referUserId &&\r\n          reportingLineData.refEmployeeId === re.reportingLine.refEmployeeId &&\r\n          reportingLineData.refOrgId === re.reportingLine.referDeptId\r\n        ){\r\n          this.message.error('è¯¥æ±æ¥å³ç³»å·²ç»è¿è¡è¿éç½®');\r\n          return;\r\n        }\r\n      }\r\n      this.uistate.performerInfo.reportingLines.push(re.reportingLine);\r\n      this.uistate.performersList.push({\r\n        id: re.reportingLine.id,\r\n        type: 'wf.ReportingLineParticipant',\r\n        performerName: re.reportingLine.reportingLineDefName + '-' + re.reportingLine.dimension,\r\n        description: this.reportingLineDescription(re.reportingLine),\r\n        condition: re.reportingLine.condition\r\n      });\r\n    }\r\n  }\r\n  private addMatrixData(re: any){\r\n    const i = this.uistate.performerInfo.matrixParticipants.findIndex(a => a.id === re.matrix.id);\r\n    if (i > -1) {\r\n      this.uistate.performerInfo.matrixParticipants[i] = re.matrix;\r\n      const index = this.uistate.performersList.findIndex(a => a.id === re.matrix.id);\r\n      this.uistate.performersList[index] = {\r\n        id: re.matrix.id,\r\n        type: 'wf.MatrixParticipant',\r\n        performerName: re.matrix.matrixDefName + '-' + re.matrix.dataFieldAlias,\r\n        description: this.matrixDescription(re.matrix),\r\n        condition: re.matrix.condition\r\n      };\r\n    } else {\r\n      for(const matrixData of this.uistate.performerInfo.matrixParticipants){\r\n        if(matrixData.matrixDefId === re.matrix.matrixDefId &&\r\n          matrixData.conditionField1 === re.matrix.conditionField1 &&\r\n          matrixData.conditionField2 === re.matrix.conditionField2 &&\r\n          matrixData.conditionField3 === re.matrix.conditionField3 &&\r\n          matrixData.dataFieldAlias === re.matrix.dataFieldAlias\r\n        ){\r\n          this.message.error('è¯¥ç©éµå·²ç»è¿è¡è¿éç½®');\r\n          return;\r\n        }\r\n      }\r\n      this.uistate.performerInfo.matrixParticipants.push(re.matrix);\r\n      this.uistate.performersList.push({\r\n        id: re.matrix.id,\r\n        type: 'wf.MatrixParticipant',\r\n        performerName: re.matrix.matrixDefName + '-' + re.matrix.dataFieldAlias,\r\n        description: this.matrixDescription(re.matrix),\r\n        condition: re.matrix.condition\r\n      });\r\n    }\r\n  }\r\n  editCancel() {\r\n    if (this.editDialog) {\r\n      this.editDialog.close();\r\n    }\r\n  }\r\n  participantOptionsSet() {\r\n    this.uistate.performerInfo.options = this.options.getPerformerOptions();\r\n    this.optionsDialog.close();\r\n  }\r\n\r\n  private performerDescription(performer: PerformerEntity) {\r\n    if (performer.type === 'wf.UserParticipant') {\r\n      if (performer.tag === 'expression') {\r\n        return performer.performerId;\r\n      } else {\r\n        if (performer.orgName) {\r\n          return `é¨é¨ï¼${performer.orgName}`;\r\n        } else {\r\n          return '';\r\n        }\r\n      }\r\n    } else if (performer.type === 'wf.PositionParticipant') {\r\n      if ((performer as PositionPerformerEntity).positionType === '1') {\r\n        if (performer.orgId) {\r\n          return `å²ä½ç±»åï¼éç¨å²ä½ï¼é¨é¨ï¼${performer.orgId}`;\r\n        } else {\r\n          return `å²ä½ç±»åï¼éç¨å²ä½`;\r\n        }\r\n      } else if ((performer as PositionPerformerEntity).positionType === '0') {\r\n        return 'å²ä½ç±»åï¼ç»ç»å²ä½';\r\n      }\r\n    }\r\n  }\r\n  private componentDescription(component: ComponentPerformer) {\r\n    let des = `æä»¶ï¼${component.name},åæ°ï¼{`;\r\n    if (component.actualParameters && component.actualParameters.length > 0) {\r\n      component.actualParameters.forEach(p => {\r\n        des += `${p.code}ï¼${p.value}ï¼`;\r\n      });\r\n      des = des.substring(0, des.length - 1);\r\n    }\r\n    des += '}';\r\n    return des;\r\n  }\r\n  private reportingLineDescription(reportingLine: ReportingLineDataEntity) {\r\n    let description = '';\r\n    if(reportingLine.refUserId){\r\n      description += `åç§äººï¼${reportingLine.refUserId}`;\r\n    }\r\n    if(reportingLine.refEmployeeId){\r\n      description += `åç§äººï¼${reportingLine.refEmployeeId}`;\r\n    }\r\n    if(reportingLine.refOrgId){\r\n      if(reportingLine.refUserId){\r\n        description += `ï¼`;\r\n      }\r\n      if(reportingLine.refEmployeeId){\r\n        description += `ï¼`;\r\n      }\r\n      description += `åç§ç»ç»ï¼${reportingLine.refOrgId}`;\r\n    }\r\n    return description;\r\n  }\r\n  private matrixDescription(matrix: MatrixDataInfoEntity) {\r\n    let description = '';\r\n    if(matrix.conditionField1){\r\n      description += `æ¡ä»¶1ï¼${matrix.conditionFieldText1}ï¼`;\r\n    }\r\n    if(matrix.conditionField2){\r\n      description += `æ¡ä»¶2ï¼${matrix.conditionFieldText2}ï¼`;\r\n    }\r\n    if(matrix.conditionField3){\r\n      description += `æ¡ä»¶3ï¼${matrix.conditionFieldText3}ï¼`;\r\n    }\r\n    if(matrix.dataFieldAlias){\r\n      description += `æ°æ®ï¼${matrix.dataFieldAlias}ï¼`;\r\n    }\r\n    return description.slice(0, description.length - 1);\r\n  }\r\n\r\n  editConditon(e: any) {\r\n    if (this.designerUIState.schemas.length > 0) {\r\n      for (const schema of this.designerUIState.schemas) {\r\n        this.expr.addSchema('Schema', schema);\r\n      }\r\n      if (this.designerUIState.schemas[0].entityTypes && this.designerUIState.schemas[0].entityTypes.length > 0) {\r\n        const entityType = this.designerUIState.schemas[0].entityTypes[0];\r\n        this.expr.addInjectedEntity(entityType.name, 'Schema',\r\n          entityType.name, InjectedType.EntityType);\r\n      }\r\n    }\r\n    const context = new Array();\r\n    if (this.designerUIState.procInstContext.length > 0) {\r\n      for (const variable of this.designerUIState.procInstContext) {\r\n        context.push(variable);\r\n      }\r\n    }\r\n    if (this.designerUIState.formalParameterContext.length > 0) {\r\n      for (const variable of this.designerUIState.formalParameterContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (this.designerUIState.participantContext.length > 0) {\r\n      for (const variable of this.designerUIState.participantContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (this.designerUIState.processVariableContext.length > 0) {\r\n      for (const variable of this.designerUIState.processVariableContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (this.designerUIState.activityComponentContext.length > 0) {\r\n      for (const variable of this.designerUIState.activityComponentContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (context.length > 0) {\r\n      for (const v of context) {\r\n        this.expr.addContext(v);\r\n      }\r\n    }\r\n    this.expr.addExpressionText(e.instance.value);\r\n    this.expr.setEditPattern(ExprEditMode.Conditional); // é»è®¤æå¼ç®æè¡¨è¾¾å¼ç¼è¾å¨\r\n    this.expr.buildExpression().then((cond: string) => {\r\n      if (this.grid.selectedRow.data.type === 'wf.ComponentParticipant') {\r\n        this.uistate.performerInfo.components.find(c => c.id === this.grid.selectedRow.data.id).condition = cond;\r\n      } else if (this.grid.selectedRow.data.type === 'wf.ReportingLineParticipant') {\r\n        this.uistate.performerInfo.reportingLines.find(c => c.id === this.grid.selectedRow.data.id).condition = cond;\r\n      } else if (this.grid.selectedRow.data.type === 'wf.MatrixParticipant'){\r\n        this.uistate.performerInfo.matrixParticipants.find(c => c.id === this.grid.selectedRow.data.id).condition = cond;\r\n      } else {\r\n        this.uistate.performerInfo.performers.find(p => p.id === this.grid.selectedRow.data.id).condition = cond;\r\n      }\r\n      e.formControl.setValue(cond);\r\n      e.instance.cd.detectChanges();\r\n    });\r\n  }\r\n\r\n  afterEdit = (rowIndex: number, rowData: any, column?: DataColumn) => {\r\n    return of(true);\r\n  }\r\n\r\n  selectChanged(data: any) {\r\n    this.uistate.curPerformer = data.data;\r\n  }\r\n\r\n  private GetOrganizationType() {\r\n    const url = '/api/runtime/sys/v1.0/authfields/globalauthfields';\r\n    this.http.get(url)\r\n      .subscribe((data: any) => this.designerUIState.orgTypeCollection = data.map(d => ({ value: d.id, text: d.name })));\r\n  }\r\n\r\n  private getMatrixConfig(): Observable<any> {\r\n    const url = `/api/runtime/wf/v1.0/generalConfig/Is_EnableMatrix`;\r\n    return this.http.get(url);\r\n  }\r\n}\r\nexport class PerformerConverter implements TypeConverter {\r\n  constructor() { }\r\n\r\n  convertTo(data: any): string {\r\n    if ((data.performers && data.performers.length > 0)\r\n      || (data.components && data.components.length > 0)\r\n      || (data.reportingLines && data.reportingLines.length > 0)\r\n      || (data.matrixParticipants && data.matrixParticipants.length > 0)\r\n    ) {\r\n      return 'ï¼å·²è®¾ç½®ï¼';\r\n    } else {\r\n      return 'ï¼æªè®¾ç½®ï¼';\r\n    }\r\n  }\r\n}\r\n","import { Component, OnInit, HostBinding, Output, EventEmitter, Input, ViewChild, TemplateRef } from '@angular/core';\r\nimport { TypeConverter } from '@farris/ui-property-panel';\r\nimport { ActionOrganizationScope, ActionScope, OrganizationPotentialOwner, OrganizationLevel } from './actionOrganizationScope';\r\n\r\n@Component({\r\n  selector: 'app-organization-potential-owner',\r\n  templateUrl: './organization-potential-owner.component.html',\r\n  styleUrls: ['./organization-potential-owner.component.scss']\r\n})\r\nexport class OrganizationPotentialOwnerComponent implements OnInit {\r\n  @HostBinding('class')\r\n  cls = 'farris-main-area flex-column';\r\n\r\n  @Output() closeModal = new EventEmitter<any>();\r\n  @Output() submitModal = new EventEmitter<any>();\r\n\r\n  @Input()\r\n  set value(v: ActionOrganizationScope) {\r\n    this.action = v.action;\r\n    if (this.action === this.actionCollection[2].value) {\r\n      if (v.enable === null || v.enable === undefined) {\r\n        this.enable = true;\r\n      } else {\r\n        this.enable = v.enable;\r\n      }\r\n    } else {\r\n      this.enable = v.enable;\r\n    }\r\n    if (v.scope) {\r\n      this.organizationLevel = v.scope.organizationLevel;\r\n      this.includeChildren = v.scope.includeChildren;\r\n    }\r\n  }\r\n\r\n  @ViewChild('iconSelectFooter') modalFooter: TemplateRef<any>;\r\n  modalConfig = {\r\n    title: 'éé¡¹è®¾ç½®',\r\n    width: 425,\r\n    height: 360,\r\n    showButtons: true\r\n  };\r\n  organizationLevelCollection = [{\r\n    value: 'GLOBAL',\r\n    text: 'å¨å',\r\n    orgId: 'global',\r\n  }, {\r\n    value: 'UNIT',\r\n    text: 'æ¬åä½',\r\n    orgId: 'currentUnit'\r\n  }, {\r\n    value: 'DEPARTMENT',\r\n    text: 'æ¬é¨é¨',\r\n    orgId: 'currentDepartment'\r\n    }];\r\n  actionCollection = [{\r\n      value: ActionScope.AddSignBehind, name: 'å ç­¾'\r\n  }, {\r\n      value: ActionScope.AddSignFront, name: 'å¾è¯¢'\r\n  }, {\r\n      value: ActionScope.Transfer, name: 'ç§»äº¤'\r\n  }, {\r\n    value: ActionScope.Notify, name: 'ç¥ä¼'\r\n}];\r\n  enable = false;\r\n  organizationLevel = this.organizationLevelCollection[0].value;\r\n  action = this.actionCollection[0].value;\r\n  includeChildren = false;\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  clickOK() {\r\n    const scope = new ActionOrganizationScope();\r\n    scope.enable = this.enable;\r\n    scope.action = this.action;\r\n    if (scope.enable && this.organizationLevel !== this.organizationLevelCollection[0].value) {\r\n      const potential = new OrganizationPotentialOwner();\r\n      potential.actionScope = this.action;\r\n      potential.organizationLevel = this.organizationLevel as OrganizationLevel;\r\n      potential.organizationId = this.organizationLevelCollection.find(o => o.value === this.organizationLevel).orgId;\r\n      potential.organizationName = this.organizationLevelCollection.find(o => o.value === this.organizationLevel).text;\r\n      potential.includeChildren = this.includeChildren;\r\n      potential.tag = 'variable';\r\n      scope.scope = potential;\r\n    }\r\n    const object = { value: scope, parameters: null };\r\n    this.submitModal.emit(object);\r\n  }\r\n  clickCancel() {\r\n    this.closeModal.emit();\r\n  }\r\n  valueChange(event: any) {\r\n    switch (event.value) {\r\n      case this.organizationLevelCollection[0].value:\r\n        this.includeChildren = false;\r\n        break;\r\n      case this.organizationLevelCollection[1].value:\r\n        this.includeChildren = true;\r\n        break;\r\n      case this.organizationLevelCollection[2].value:\r\n        this.includeChildren = false;\r\n        break;\r\n    }\r\n  }\r\n  actionName = () => {\r\n    return this.actionCollection.find(a => a.value === this.action).name;\r\n  }\r\n}\r\nexport class OrganizationPotentialOwnerConverter implements TypeConverter {\r\n  constructor() { }\r\n\r\n  convertTo(data: ActionOrganizationScope): string {\r\n    if (data.action === ActionScope.Transfer && (data.enable === null || data.enable === undefined)) {\r\n      return 'ï¼å·²è®¾ç½®ï¼';\r\n    } else {\r\n      if (data.enable) {\r\n          return 'ï¼å·²è®¾ç½®ï¼';\r\n      } else {\r\n        return 'ï¼æªè®¾ç½®ï¼';\r\n      }\r\n    }\r\n  }\r\n}\r\n","export class AnonymousSet { \r\n    isAnonymity = false;\r\n    anonymous = 'å®¡æ¹äºº';\r\n}\r\n","import { Component, OnInit, HostBinding, EventEmitter, Output, Input, ViewChild, TemplateRef, Inject, Injector } from '@angular/core';\r\nimport { TypeConverter } from '@farris/ui-property-panel';\r\nimport { AnonymousSet } from './anonymous-set.entity';\r\n\r\n@Component({\r\n  selector: 'lib-anonymous-set',\r\n  templateUrl: './anonymous-set.component.html',\r\n  styleUrls: ['./anonymous-set.component.scss']\r\n})\r\nexport class AnonymousSetComponent implements OnInit {\r\n  @HostBinding('class')\r\n  cls = 'farris-main-area flex-column';\r\n\r\n  @Output() closeModal = new EventEmitter<any>();\r\n  @Output() submitModal = new EventEmitter<any>();\r\n\r\n  @Input() set value(data: AnonymousSet) {\r\n    this.anonymousSet.isAnonymity = data.isAnonymity || false;\r\n    this.anonymousSet.anonymous = data.anonymous || 'å®¡æ¹äºº';\r\n  }\r\n\r\n  @ViewChild('iconSelectFooter') modalFooter: TemplateRef<any>;\r\n\r\n  anonymousSet: AnonymousSet = new AnonymousSet();\r\n  modalConfig = {\r\n    title: 'å¿åéé¡¹',\r\n    width: 450,\r\n    height: 360,\r\n    showButtons: true\r\n  };\r\n  constructor(\r\n    private injector: Injector\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n  clickOK() {\r\n    const object = { value: this.anonymousSet, parameters: null };\r\n    this.submitModal.emit(object);\r\n  }\r\n\r\n  clickCancel() {\r\n    this.closeModal.emit();\r\n  }\r\n}\r\n\r\nexport class AnonymousSetConverter implements TypeConverter {\r\n  constructor() { }\r\n\r\n  convertTo(data: any): string {\r\n    if (data && data.isAnonymity) {\r\n      return 'ï¼å·²è®¾ç½®ï¼';\r\n    } else {\r\n      return 'ï¼æªè®¾ç½®ï¼';\r\n    }\r\n  }\r\n}\r\n","export class VariableSetting {\r\n    /**\r\n     * åéId\r\n     */\r\n    // variableId: string;\r\n    /**\r\n     * åéç¼å·\r\n     */\r\n    variableCode: string;\r\n    /**\r\n     * åéåç§°\r\n     */\r\n    variableName: string;\r\n    /**\r\n     * èªå®ä¹æ ç­¾ï¼èµå¼æ¹å¼\r\n     * expression è¯­ä¹åè¡¨è¾¾å¼\r\n     * constant å¸¸é\r\n     * component æä»¶\r\n     */\r\n    tag: string;\r\n\r\n    /**\r\n     * åéæ§è¡æ¶æº\r\n     * ACTIVITY_STARTED æ´»å¨å¼å§\r\n     * ACTIVITY_COMPLETED æ´»å¨å®æ\r\n     */\r\n    executionTime: string;\r\n\r\n    /**\r\n     * åéå¼\r\n     */\r\n    value: string;\r\n\r\n    valueText: string;\r\n\r\n    /**\r\n     * æä»¶\r\n     */\r\n    component: any;\r\n}\r\n","import { Component, OnInit, HostBinding, Output, EventEmitter, Input, ViewChild, TemplateRef, Injector, ComponentFactoryResolver } from '@angular/core';\r\nimport { DatagridComponent } from '@farris/ui-datagrid';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { TypeConverter } from '@farris/ui-property-panel';\r\nimport { BsModalService } from '@farris/ui-modal';\r\nimport { ProcessVariablesComponent } from '../process-variables/process-variables.component';\r\nimport { ProcessDesignerUIState } from '../../app/process-designer.uistate';\r\nimport { VariableSetting } from './variable-setting';\r\nimport { EditorTypes } from '@farris/ui-datagrid-editors';\r\nimport { ExprEditMode, ExpressionService, InjectedType } from '@gsp-svc/expression';\r\nimport { ComponentEditComponent } from './views/component-edit/component-edit.component';\r\nimport { RowEditParam } from '@farris/ui-datagrid/lib/types';\r\nimport { of } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'lib-variable-setting',\r\n  templateUrl: './variable-setting.component.html',\r\n  styleUrls: ['./variable-setting.component.scss']\r\n})\r\nexport class VariableSettingComponent implements OnInit {\r\n  @HostBinding('class')\r\n  cls = 'farris-main-area flex-column';\r\n  @Output() closeModal = new EventEmitter<any>();\r\n  @Output() submitModal = new EventEmitter<any>();\r\n\r\n  @Input() value: Array<VariableSetting> = new Array();\r\n  @Input() editorParams: any = {};\r\n  @ViewChild('iconSelectFooter') modalFooter: TemplateRef<any>;\r\n  @ViewChild('grid') grid: DatagridComponent;\r\n  @ViewChild('cell') cell: TemplateRef<any>;\r\n\r\n  columns = [];\r\n\r\n  private tags = [\r\n    { value: 'constant', text: 'å¸¸é' },\r\n    { value: 'expression', text: 'è¡¨è¾¾å¼' },\r\n    { value: 'component', text: 'æä»¶' }\r\n  ];\r\n\r\n  private opportunities = [\r\n    { value: 'ACTIVITY_STARTED', text: 'æ´»å¨å¼å§' },\r\n    { value: 'ACTIVITY_COMPLETED', text: 'æ´»å¨ç»æ' }\r\n  ];\r\n\r\n  modalConfig = {\r\n    title: 'åéè®¾ç½®',\r\n    width: 780,\r\n    height: 460,\r\n    showButtons: true\r\n  };\r\n\r\n  constructor(\r\n    private resolver: ComponentFactoryResolver,\r\n    private injector: Injector,\r\n    private modalService: BsModalService,\r\n    private message: MessagerService,\r\n    private uistate: ProcessDesignerUIState,\r\n    private expr: ExpressionService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.columns = [\r\n      {\r\n        field: 'variableCode', width: 90, title: 'åéç¼å·', sortable: true,\r\n        validators: [\r\n          { type: 'required', messager: 'å¿å¡«' }\r\n        ]\r\n      },\r\n      {\r\n        field: 'variableName', width: 90, title: 'åéåç§°', sortable: true,\r\n        validators: [\r\n          { type: 'required', messager: 'å¿å¡«' }\r\n        ]\r\n      }, {\r\n        field: 'tag', width: 60, title: 'å¼ç±»å', sortable: true,\r\n        formatter: {\r\n          type: 'enum',\r\n          options: { valueField: 'value', textField: 'text', data: this.tags }\r\n        },\r\n        editor: {\r\n          type: EditorTypes.COMBOLIST,\r\n          options: {\r\n            valueField: 'value', textField: 'text', data: this.tags, idField: 'value', panelHeight: 'auto', showClear: false,\r\n            selectChange: (e) => {\r\n              this.value = this.value.map(v => {\r\n                if (v.variableCode === e.rowId) {\r\n                  v.value = null;\r\n                  v.valueText = null;\r\n                  if (v.component) {\r\n                    v.component = null;\r\n                  }\r\n                  return v;\r\n                } else {\r\n                  return v;\r\n                }\r\n              });\r\n            }\r\n          }\r\n        },\r\n        validators: [\r\n          { type: 'required', messager: 'å¿å¡«' }\r\n        ]\r\n      }, {\r\n        field: 'executionTime', width: 80, title: 'æ§è¡æ¶æº', sortable: true,\r\n        formatter: {\r\n          type: 'enum',\r\n          options: { valueField: 'value', textField: 'text', data: this.opportunities }\r\n        },\r\n        editor: {\r\n          type: EditorTypes.COMBOLIST,\r\n          options: {\r\n            valueField: 'value', textField: 'text', data: this.opportunities, idField: 'value', panelHeight: 'auto', showClear: false,\r\n          }\r\n        },\r\n        validators: [\r\n          { type: 'required', messager: 'å¿å¡«' }\r\n        ],\r\n      },\r\n      {\r\n        field: 'valueText', width: 150, title: 'åéå¼', showTips: true,\r\n        editor: { type: EditorTypes.TEXTBOX, options: {} },\r\n        validators: [\r\n          { type: 'required', messager: 'å¿å¡«' }\r\n        ]\r\n      }\r\n    ];\r\n  }\r\n\r\n  add() {\r\n    let dialog: any;\r\n    const compFactory = this.resolver.resolveComponentFactory(ProcessVariablesComponent);\r\n    const compRef = compFactory.create(this.injector);\r\n    compRef.instance.variableSetting = true;\r\n    compRef.instance.value = this.uistate.ProcessVariables;\r\n    compRef.instance.variableSetEmitter.subscribe((re: any[]) => {\r\n      for (const v of re) {\r\n        const variableSet = new VariableSetting();\r\n        variableSet.variableCode = v.data.name;\r\n        variableSet.variableName = v.data.documentation;\r\n        variableSet.tag = v.data.tag || this.tags[0].value;\r\n        variableSet.executionTime = v.data.executionTime || this.opportunities[0].value;\r\n        if (this.value.findIndex(i => i.variableCode === variableSet.variableCode) === -1) {\r\n          this.value = this.value.concat([variableSet]);\r\n        }\r\n      }\r\n      dialog.close();\r\n    });\r\n    compRef.instance.closeModal.subscribe(re => {\r\n      dialog.close();\r\n    });\r\n    const modalConfig = {\r\n      title: 'æµç¨åé',\r\n      width: 660,\r\n      height: 460,\r\n      showButtons: true,\r\n      buttons: compRef.instance.modalFooter\r\n    };\r\n    dialog = this.modalService.show(compRef, modalConfig);\r\n  }\r\n\r\n  delete() {\r\n    this.grid.endCellEdit();\r\n    const selected = this.grid.selectedRow;\r\n    if (!selected) {\r\n      this.message.info('å°æªéä¸­åéï¼');\r\n      return;\r\n    }\r\n    this.value = this.value.filter(v => v.variableCode !== selected.data.variableCode);\r\n  }\r\n\r\n  clickOK() {\r\n    this.grid.endCellEdit();\r\n    if (this.validator()) {\r\n      const object = { value: this.value, parameters: null };\r\n      this.submitModal.emit(object);\r\n    }\r\n  }\r\n\r\n  clickCancel() {\r\n    this.closeModal.emit();\r\n  }\r\n\r\n  validator() {\r\n    for (const item of this.value) {\r\n      if (!item.value) {\r\n        this.message.warning('åéå¼ä¸åè®¸ä¸ºç©ºï¼');\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n  beforeEdit = (param: RowEditParam) => {\r\n    const rowData = param.rowData as any;\r\n    const column = param.column;\r\n    if (column.field === 'valueText') {\r\n      if ((rowData as VariableSetting).tag === this.tags[0].value) {\r\n        param.column.editor = { type: EditorTypes.TEXTBOX, options: {} };\r\n      } else {\r\n        param.column.editor = {\r\n          type: 'input-group',\r\n          options: {\r\n            groupText: '<i class=\"f-icon f-icon-lookup\"></i>',\r\n            editable: false,\r\n            showClear: false,\r\n            clickHandle: (e) => {\r\n              e.formControl.setValue(e.instance.value ? e.instance.value : '');\r\n              this.valueEdit(e);\r\n            },\r\n            clear: (e) => {\r\n              console.log('clear', e);\r\n            }\r\n          }\r\n        };\r\n      }\r\n    }\r\n    return of(true);\r\n  }\r\n\r\n  endEdit(data: any) {\r\n    if (data.column.field === 'valueText' && data.rowData.tag === this.tags[0].value) {\r\n      data.rowData.value = data.rowData.valueText;\r\n    }\r\n  }\r\n\r\n  valueEdit(e: any) {\r\n    const rowdata: VariableSetting = e.rowData;\r\n    switch (rowdata.tag) {\r\n      case this.tags[1].value:\r\n        this.editExpression(e);\r\n        break;\r\n      case this.tags[2].value:\r\n        this.editComponent(e);\r\n        break;\r\n    }\r\n  }\r\n\r\n  private editExpression(e: any) {\r\n    const data: VariableSetting = e.rowData;\r\n    if (this.uistate.schemas.length > 0) {\r\n      for (const schema of this.uistate.schemas) {\r\n        this.expr.addSchema('Schema', schema);\r\n      }\r\n      if (this.uistate.schemas[0].entityTypes && this.uistate.schemas[0].entityTypes.length > 0) {\r\n        const entityType = this.uistate.schemas[0].entityTypes[0];\r\n        this.expr.addInjectedEntity(entityType.name, 'Schema',\r\n          entityType.name, InjectedType.EntityType);\r\n      }\r\n    }\r\n    const context = new Array();\r\n    if (this.uistate.procInstContext.length > 0) {\r\n      for (const variable of this.uistate.procInstContext) {\r\n        context.push(variable);\r\n      }\r\n    }\r\n    if (this.uistate.formalParameterContext.length > 0) {\r\n      for (const variable of this.uistate.formalParameterContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (this.uistate.participantContext.length > 0) {\r\n      for (const variable of this.uistate.participantContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (this.uistate.processVariableContext.length > 0) {\r\n      for (const variable of this.uistate.processVariableContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (context.length > 0) {\r\n      for (const v of context) {\r\n        this.expr.addContext(v);\r\n      }\r\n    }\r\n    this.expr.setEditPattern(ExprEditMode.Advanced); // è¡¨è¾¾å¼å±ç°æ¨¡å¼ï¼é»è®¤é«çº§ç\r\n    this.expr.addExpressionText(data.value);\r\n    this.expr.buildExpression().then((re: string) => {\r\n      e.formControl.setValue(re);\r\n      e.instance.cd.detectChanges();\r\n      data.value = re;\r\n    });\r\n  }\r\n\r\n  private editComponent(e: any) {\r\n    const data: VariableSetting = e.rowData;\r\n    let dialog: any;\r\n    const compFactory = this.resolver.resolveComponentFactory(ComponentEditComponent);\r\n    const compRef = compFactory.create(this.injector);\r\n    compRef.instance.component = data.component;\r\n    compRef.instance.submitEmitter.subscribe((re: any) => {\r\n      e.formControl.setValue(re.Name + '-' + re.MethodCode);\r\n      e.instance.cd.detectChanges();\r\n      data.value = re.Id;\r\n      data.component = re;\r\n      dialog.close();\r\n    });\r\n    compRef.instance.closeEmitter.subscribe(re => {\r\n      dialog.close();\r\n    });\r\n    const modalConfig = {\r\n      title: 'æä»¶',\r\n      width: 800,\r\n      height: 515,\r\n      showButtons: true,\r\n      buttons: compRef.instance.footer\r\n    };\r\n    dialog = this.modalService.show(compRef, modalConfig);\r\n  }\r\n}\r\n\r\nexport class VariableSettingConverter implements TypeConverter {\r\n  constructor() { }\r\n\r\n  convertTo(data: any[]): string {\r\n    if (data && data.length > 0) {\r\n      return 'ï¼å·²è®¾ç½®ï¼';\r\n    } else {\r\n      return 'ï¼æªè®¾ç½®ï¼';\r\n    }\r\n  }\r\n}\r\n","import { ApprovalPivot } from './approval-pivot';\r\n\r\nexport class ApprovalPivotConfig {\r\n    constructor() {\r\n        this.enable = false;\r\n        this.title = 'å®¡æ¹è¦ç¹';\r\n        this.approvalPivots = new Array();\r\n    }\r\n    title: string;\r\n    enable: boolean;\r\n    approvalPivots: Array<ApprovalPivot>;\r\n}\r\n","import { ProcessDeUtil } from '../../domain/process-de-util';\r\n\r\nexport class ApprovalPivot {\r\n    constructor() {\r\n        this.id = ProcessDeUtil.GenerateElementId();\r\n        this.type = 'REMIND';\r\n    }\r\n    id: string;\r\n    type: string;\r\n    condition: string;\r\n    title: string;\r\n    description: string;\r\n}\r\n","import { Component, OnInit, ViewChild, TemplateRef, HostBinding, Output, EventEmitter, Input } from '@angular/core';\r\nimport { TypeConverter } from '@farris/ui-property-panel';\r\nimport { DatagridComponent } from '@farris/ui-datagrid';\r\nimport { ApprovalPivotConfig } from './approval-pivot-config';\r\nimport { EditorTypes } from '@farris/ui-datagrid-editors';\r\nimport { ProcessDesignerUIState } from '../../app/process-designer.uistate';\r\nimport { ExpressionService, InjectedType, ExprEditMode } from '@gsp-svc/expression';\r\nimport { ApprovalPivot } from './approval-pivot';\r\nimport { MessagerService } from '@farris/ui-messager';\r\n\r\n@Component({\r\n  selector: 'lib-approval-pivot',\r\n  templateUrl: './approval-pivot.component.html',\r\n  styleUrls: ['./approval-pivot.component.scss']\r\n})\r\nexport class ApprovalPivotComponent implements OnInit {\r\n  @HostBinding('class')\r\n  cls = 'farris-main-area flex-column';\r\n\r\n  @Output() closeModal = new EventEmitter<any>();\r\n  @Output() submitModal = new EventEmitter<any>();\r\n\r\n  @ViewChild('iconSelectFooter') modalFooter: TemplateRef<any>;\r\n  @ViewChild('grid') grid: DatagridComponent;\r\n\r\n  @Input()\r\n  set value(data: any) {\r\n    if (data) {\r\n      this.config.enable = data.enable;\r\n      this.config.title = data.title;\r\n      if (data.approvalPivots && data.approvalPivots.length > 0) {\r\n        for (const a of data.approvalPivots) {\r\n          const approvalPivot = new ApprovalPivot();\r\n          approvalPivot.type = a.type;\r\n          approvalPivot.title = a.title;\r\n          approvalPivot.description = a.description;\r\n          if (a.condition) {\r\n            if (typeof (a.condition) === 'string') {\r\n              approvalPivot.condition = a.condition;\r\n            } else {\r\n              approvalPivot.condition = a.condition._value;\r\n            }\r\n          }\r\n\r\n\r\n          this.config.approvalPivots = this.config.approvalPivots.concat([approvalPivot]);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  config = new ApprovalPivotConfig();\r\n\r\n  typeList = [\r\n    { value: 'REMIND', text: 'æå­æç¤º' }];\r\n\r\n  columns = [\r\n    {\r\n      field: 'type', width: 80, title: 'ç±»å',\r\n      formatter: {\r\n        type: 'enum',\r\n        options: { valueField: 'value', textField: 'text', data: this.typeList }\r\n      },\r\n      editor: {\r\n        type: EditorTypes.COMBOLIST,\r\n        options: { valueField: 'value', textField: 'text', data: this.typeList, idField: 'value', panelHeight: 'auto', enableClear: false }\r\n      },\r\n      validators: [\r\n        { type: 'required', messager: 'å¿å¡«' }\r\n      ]\r\n    },\r\n    {\r\n      field: 'condition', width: 120, title: 'æ¡ä»¶', showTips: true,\r\n      editor: {\r\n        type: 'input-group',\r\n        options: {\r\n          groupText: '<i class=\"f-icon f-icon-lookup\"></i>',\r\n          editable: false,\r\n          clickHandle: (e) => {\r\n            e.formControl.setValue(e.instance.value ? e.instance.value : '');\r\n            this.editConditon(e);\r\n          },\r\n          clear: (e) => {\r\n            console.log('clear', e);\r\n          }\r\n        }\r\n      }\r\n    },\r\n    {\r\n      field: 'title', width: 80, title: 'æ¾ç¤ºåç§°',\r\n      editor: { type: EditorTypes.TEXTBOX, options: {} }\r\n    }, {\r\n      field: 'description', width: 100, title: 'è¯¦ç»è¯´æ', showTips: true,\r\n      editor: { type: EditorTypes.TEXTBOX, options: {} }\r\n    }\r\n  ];\r\n\r\n  modalConfig = {\r\n    title: 'å®¡æ¹è¦ç¹',\r\n    width: 800,\r\n    height: 480,\r\n    showButtons: true\r\n  };\r\n\r\n\r\n  constructor(\r\n    private designerUIState: ProcessDesignerUIState,\r\n    private expr: ExpressionService,\r\n    private message: MessagerService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  add() {\r\n    const approvalPivot = new ApprovalPivot();\r\n    this.config.approvalPivots = this.config.approvalPivots.concat([approvalPivot]);\r\n  }\r\n\r\n  delete() {\r\n    const selectedRow = this.grid.selectedRow;\r\n    if (!selectedRow) {\r\n      this.message.info('å°æªéä¸­å®¡æ¹è¦ç¹ï¼');\r\n      return;\r\n    }\r\n    this.config.approvalPivots = this.config.approvalPivots.filter(a => a.id !== selectedRow.id);\r\n  }\r\n\r\n  clickOK() {\r\n    if (!this.config.title && this.config.enable) {\r\n      this.message.info('å°æªå¡«åæ¾ç¤ºæ é¢ï¼');\r\n      return;\r\n    }\r\n    this.grid.endCellEdit();\r\n    if (this.validator()) {\r\n      const object = { value: this.config, parameters: null };\r\n      this.submitModal.emit(object);\r\n    }\r\n  }\r\n\r\n  clickCancel() {\r\n    this.closeModal.emit();\r\n  }\r\n\r\n  private validator() {\r\n    return true;\r\n  }\r\n\r\n\r\n  editConditon(e: any) {\r\n    if (this.designerUIState.schemas.length > 0) {\r\n      for (const schema of this.designerUIState.schemas) {\r\n        this.expr.addSchema('Schema', schema);\r\n      }\r\n      if (this.designerUIState.schemas[0].entityTypes && this.designerUIState.schemas[0].entityTypes.length > 0) {\r\n        const entityType = this.designerUIState.schemas[0].entityTypes[0];\r\n        this.expr.addInjectedEntity(entityType.name, 'Schema',\r\n          entityType.name, InjectedType.EntityType);\r\n      }\r\n    }\r\n\r\n    const context = new Array();\r\n    if (this.designerUIState.procInstContext.length > 0) {\r\n      for (const variable of this.designerUIState.procInstContext) {\r\n        context.push(variable);\r\n      }\r\n    }\r\n    if (this.designerUIState.formalParameterContext.length > 0) {\r\n      for (const variable of this.designerUIState.formalParameterContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (this.designerUIState.participantContext.length > 0) {\r\n      for (const variable of this.designerUIState.participantContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (this.designerUIState.processVariableContext.length > 0) {\r\n      for (const variable of this.designerUIState.processVariableContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (this.designerUIState.activityComponentContext.length > 0) {\r\n      for (const variable of this.designerUIState.activityComponentContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (context.length > 0) {\r\n      for (const v of context) {\r\n        this.expr.addContext(v);\r\n      }\r\n    }\r\n\r\n    this.expr.addExpressionText(e.instance.value);\r\n    this.expr.setEditPattern(ExprEditMode.Conditional);\r\n    this.expr.buildExpression().then((cond: string) => {\r\n      e.formControl.setValue(cond);\r\n      e.instance.cd.detectChanges();\r\n    });\r\n  }\r\n}\r\n\r\nexport class ApprovalPivotConverter implements TypeConverter {\r\n  constructor() { }\r\n\r\n  convertTo(data: any): string {\r\n    if (data && data.enable) {\r\n      return 'ï¼å·²è®¾ç½®ï¼';\r\n    } else {\r\n      return 'ï¼æªè®¾ç½®ï¼';\r\n    }\r\n  }\r\n}\r\n","export class UrgeHandleRule {\r\n  constructor() {\r\n    this.urgeHandleAble = false;\r\n    this.earlyTime = 0;\r\n    this.intervalTime = 0;\r\n    this.urgeMessageSubject = \"{\\\"expr\\\":\\\"'å¬åå®¡æ¹ï¼' + DefaultFunction.GetContextParameter(\\\\\\\"bizDefName\\\\\\\")\\\",\\\"sexpr\\\":\\\"\\\"}\";\r\n    this.urgeMessageContent = \"{\\\"expr\\\":\\\"'è¯·æ¨å°½å¿«å®¡æ¹' + DefaultFunction.GetContextParameter(\\\\\\\"procInstCreatorName\\\\\\\") + 'ç' + DefaultFunction.GetContextParameter(\\\\\\\"bizDefName\\\\\\\") + 'ã'\\\",\\\"sexpr\\\":\\\"\\\"}\";\r\n    this.addReminder = false;\r\n    this.subjectEditable = true;\r\n    this.contentEditable = true;\r\n  }\r\n\r\n  urgeHandleAble: boolean;\r\n  sendType: string;\r\n  earlyTime: number;\r\n  intervalTime: number;\r\n  urgeMessageSubject: string;\r\n  urgeMessageContent: string;\r\n  // æ¯å¦æ·»å å¬åäººä¿¡æ¯\r\n  addReminder: boolean;\r\n  subjectEditable: boolean;\r\n  contentEditable: boolean;\r\n}\r\n","import { Component, OnInit, Output, EventEmitter, ViewChild, TemplateRef, Input } from '@angular/core';\r\nimport { TypeConverter } from '@farris/ui-property-panel';\r\nimport { UrgeHandleRule } from './urge-handle-rule';\r\nimport { ProcessDesignerUIState } from '../../app/process-designer.uistate';\r\nimport {ExpressionService, InjectedType} from '@gsp-svc/expression';\r\nimport { MessagerService } from '@farris/ui-messager';\r\n\r\n@Component({\r\n  selector: 'lib-urge-handle-rule',\r\n  templateUrl: './urge-handle-rule.component.html',\r\n  styleUrls: ['./urge-handle-rule.component.scss']\r\n})\r\nexport class UrgeHandleRuleComponent implements OnInit {\r\n\r\n  groupIcon2 = '<i class=\"f-icon f-icon-lookup\"></i>';\r\n  @Output() closeModal = new EventEmitter<any>();\r\n  @Output() submitModal = new EventEmitter<any>();\r\n\r\n  @ViewChild('iconSelectFooter') modalFooter: TemplateRef<any>;\r\n\r\n  @Input()\r\n  set value(data: any) {\r\n    if (!data) {\r\n      this.urgeHandleRule.urgeHandleAble = true;\r\n      this.urgeHandleRule.sendType = 'cloudplus,inmail';\r\n    } else {\r\n      this.urgeHandleRule = data;\r\n    }\r\n  }\r\n\r\n  urgeHandleRule: UrgeHandleRule = new UrgeHandleRule();\r\n\r\n\r\n  typeGroup = this.designerUIState.messageChannels.map(m => ({ value: m.code, name: m.name }));\r\n\r\n  modalConfig = {\r\n    title: 'å¬å',\r\n    width: 500,\r\n    height: 445,\r\n    showButtons: true\r\n  };\r\n\r\n  constructor(\r\n    private designerUIState: ProcessDesignerUIState,\r\n    private expr: ExpressionService,\r\n    private message: MessagerService) {}\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  clickOK() {\r\n    if (this.validator()) {\r\n      const object = { value: this.urgeHandleRule, parameters: null };\r\n      this.submitModal.emit(object);\r\n    }\r\n  }\r\n\r\n  clickCancel() {\r\n    this.closeModal.emit();\r\n  }\r\n\r\n  private validator() {\r\n    if (!this.urgeHandleRule.urgeHandleAble) {\r\n      return true;\r\n    }\r\n    if (!this.urgeHandleRule.sendType) {\r\n      this.message.info('å°æªéæ©åéæ¹å¼ï¼');\r\n      return false;\r\n    }\r\n    if (!this.urgeHandleRule.urgeMessageSubject) {\r\n      this.message.info('å°æªéç½®æ¶æ¯ä¸»é¢ï¼');\r\n      return false;\r\n    }\r\n    if (!this.urgeHandleRule.urgeMessageContent) {\r\n      this.message.info('å°æªéæ©æ¶æ¯åå®¹ï¼');\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  parser = (val: string | number) => {\r\n    return Number(val);\r\n  }\r\n\r\n  titleExpr(data: any){\r\n    this.showTitleHelp(data);\r\n  }\r\n\r\n  contentExpr(data: any){\r\n    this.showContentHelp(data);\r\n  }\r\n\r\n  showTitleHelp(data: string) {\r\n    this.showExpr();\r\n    if (this.urgeHandleRule.urgeMessageSubject && this.urgeHandleRule.urgeMessageSubject.length > 0) {\r\n      this.expr.addExpressionText(this.urgeHandleRule.urgeMessageSubject);\r\n    } else {\r\n      this.expr.addExpressionText('');\r\n    }\r\n    this.expr.buildExpression().then((expressionInfo: string) => {\r\n      this.urgeHandleRule.urgeMessageSubject = expressionInfo;\r\n    });\r\n  }\r\n\r\n  showContentHelp(data: string){\r\n    this.showExpr();\r\n    if (this.urgeHandleRule.urgeMessageContent && this.urgeHandleRule.urgeMessageContent.length > 0) {\r\n      this.expr.addExpressionText(this.urgeHandleRule.urgeMessageContent);\r\n    } else {\r\n      this.expr.addExpressionText('');\r\n    }\r\n    this.expr.buildExpression().then((expressionInfo: string) => {\r\n      this.urgeHandleRule.urgeMessageContent = expressionInfo;\r\n    });\r\n  }\r\n\r\n  showExpr(){\r\n    if (this.designerUIState.schemas.length > 0) {\r\n      for (const schema of this.designerUIState.schemas) {\r\n        // this.expr.addCommonObject(co);\r\n        this.expr.addSchema('Schema', schema);\r\n      }\r\n      if (this.designerUIState.schemas[0].entityTypes && this.designerUIState.schemas[0].entityTypes.length > 0) {\r\n        const entityType = this.designerUIState.schemas[0].entityTypes[0];\r\n        this.expr.addInjectedEntity(entityType.name, 'Schema',\r\n          entityType.name, InjectedType.EntityType);\r\n      }\r\n    }\r\n    const context = new Array();\r\n    if (this.designerUIState.urgeContext.length > 0) {\r\n      for (const variable of this.designerUIState.urgeContext) {\r\n        context.push(variable);\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (this.designerUIState.processVariableContext.length > 0) {\r\n      for (const variable of this.designerUIState.processVariableContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (context.length > 0) {\r\n      for (const v of context) {\r\n        this.expr.addContext(v);\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport class UrgeHandleRuleConverter implements TypeConverter {\r\n  constructor() { }\r\n\r\n  convertTo(data: any): string {\r\n    if (!data) {\r\n      return 'ï¼å·²è®¾ç½®ï¼';\r\n    } else if (data.urgeHandleAble) {\r\n      return 'ï¼å·²è®¾ç½®ï¼';\r\n    } else {\r\n      return 'ï¼æªè®¾ç½®ï¼';\r\n    }\r\n  }\r\n}\r\n","import { Injectable, Injector, ComponentFactoryResolver } from '@angular/core';\r\nimport { ProcessDesignerUIState } from './process-designer.uistate';\r\nimport { ApprovalItemEntity } from '../views/approvel-items/entities/approval-item.entity';\r\nimport { PropertyEntity } from '@farris/ui-property-panel';\r\nimport { ElementPropertyConfig, KeyMap } from '@farris/ui-property-panel';\r\nimport { ResourceKeys } from '../model/resourceKeys';\r\nimport { AssignPerformerConfigComponent, AssignConfigConverter } from '../views/assign-performer-config/assign-performer-config.component';\r\nimport { SignRuleComponent, SignRuleConverter } from '../views/sign-rule/sign-rule.component';\r\nimport { ApprovelItemsComponent, ApprovelItemsConverter } from '../views/approvel-items/approvel-items.component';\r\nimport { ExpressionEditorComponent, ExpressionEditorConverter } from '../views/expressionEditor/expression-editor.component';\r\nimport { ExecuteFormsComponent, ExecuteFormsConverter } from '../views/execute-forms/execute-forms.component';\r\nimport { JumpScopeComponent, JumpScopeConverter } from '../views/jump-scope/jump-scope.component';\r\nimport { VarEntity } from '@gsp-svc/expression';\r\nimport { BackwardRuleComponent, BackwardRuleConverter } from '../views/backward-rule/backward-rule.component';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { BackWardRule } from '../views/backward-rule/backward-rule.entity';\r\nimport { ActivityComponentComponent, ActivityComponentConverter } from '../views/activity-component/activity-component.component';\r\nimport { PerformerComponent, PerformerConverter } from '../views/performer/performer.component';\r\nimport { TitleExpressionComponent, TitleExpressionConverter } from '../views/title-expression/title-expression.component';\r\nimport { BsModalService, ModalOptions } from '@farris/ui-modal';\r\nimport { OrganizationPotentialOwnerComponent, OrganizationPotentialOwnerConverter } from '../views/organization-potential-owner/organization-potential-owner.component';\r\nimport { CustomizeActionComponent, CustomizeActionConverter } from '../views/customize-action/customize-action.component';\r\nimport { TimeLimitControlComponent, TimeLimitControlConverter } from '../views/time-limit-control/time-limit-control.component';\r\nimport { AnonymousSetComponent, AnonymousSetConverter } from '../views/anonymous-set/anonymous-set.component';\r\nimport { VariableSettingComponent, VariableSettingConverter } from '../views/variable-setting/variable-setting.component';\r\nimport { MessageNoticeComponent, MessageNoticeConverter } from '../views/message-notice/message-notice.component';\r\nimport { ApprovalPivotComponent, ApprovalPivotConverter } from '../views/approval-pivot/approval-pivot.component';\r\nimport { UrgeHandleRuleComponent, UrgeHandleRuleConverter } from '../views/urge-handle-rule/urge-handle-rule.component';\r\nimport { ExtendPropertyComponent, ExtendPropertyConverter } from '../views/extend-property/extend-property.component';\r\n\r\n@Injectable()\r\n\r\nexport class WFFlowElementsViewModel {\r\n\r\n  constructor(\r\n    private uiState: ProcessDesignerUIState,\r\n    private message: MessagerService,\r\n    private injector: Injector,\r\n    private modalService: BsModalService,\r\n    private resolver: ComponentFactoryResolver\r\n  ) {\r\n\r\n  }\r\n\r\n  /**\r\n   * è®¾ç½®æµç¨åç´ å±æ§æ¡\r\n   * @param obj\r\n   */\r\n  setFlowElementProperty(obj: any) {\r\n    this.uiState.propertyData = obj.propertyData;\r\n    this.uiState.propertyConfig = this.setFlowEleConfig(obj.propertyConfig);\r\n  }\r\n\r\n  private setFlowEleConfig(obj: any[]): ElementPropertyConfig[] {\r\n    const propertyConfig: ElementPropertyConfig[] = [];\r\n    if (obj) {\r\n      obj.forEach((element: ElementPropertyConfig) => {\r\n        this.setFlowEleEntity(element.properties);\r\n        propertyConfig.push(element);\r\n      });\r\n    }\r\n    return propertyConfig;\r\n  }\r\n\r\n  private setFlowEleEntity(obj: PropertyEntity[]) {\r\n    if (obj && obj.length > 0) {\r\n      obj.forEach((item: PropertyEntity) => {\r\n        switch (item.propertyID) {\r\n          case ResourceKeys.ConditionExpression:                  // æ¡ä»¶è¡¨è¾¾å¼\r\n            item.editor = ExpressionEditorComponent;\r\n            item.converter = new ExpressionEditorConverter();\r\n            item.editorParams = {};\r\n            break;\r\n          case ResourceKeys.wf_ExecuteForms_PC:                         // å¼å§æ´»å¨çè¡¨åæä»¶\r\n            item.editor = ExecuteFormsComponent;\r\n            item.converter = new ExecuteFormsConverter();\r\n            item.editorParams = {\r\n              location: 'startActivity',\r\n              tab: 'web'\r\n            };\r\n            break;\r\n          case ResourceKeys.wf_ExecuteForms_Mobile:                         // å¼å§æ´»å¨çè¡¨åæä»¶\r\n            item.editor = ExecuteFormsComponent;\r\n            item.converter = new ExecuteFormsConverter();\r\n            item.editorParams = {\r\n              location: 'startActivity',\r\n              tab: 'mobile'\r\n            };\r\n            break;\r\n          case ResourceKeys.sendBackedTask:                         // å¼å§æ´»å¨çåéé©³åä»»å¡\r\n            item.iterator = this.uiState.boolIterator;\r\n            break;\r\n          case ResourceKeys.SelectTargetAble: // åè®¸è·³è½¬\r\n            item.iterator = this.uiState.boolIterator;\r\n            break;\r\n          case ResourceKeys.JumpScope: // è·³è½¬è§å\r\n            item.editor = JumpScopeComponent;\r\n            item.converter = new JumpScopeConverter();\r\n            break;\r\n          case ResourceKeys.Default:                              // é»è®¤åæ¯\r\n            item.iterator = this.uiState.boolIterator;\r\n            break;\r\n          default:\r\n            item.editor = ExtendPropertyComponent;\r\n            item.converter = new ExtendPropertyConverter();\r\n            break;\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * è®¾ç½®å®¡æ¹æ´»å¨èç¹çå±æ§æ¡\r\n   * @param obj\r\n   */\r\n  setUserActivityProperty(obj: any) {\r\n    if (obj.propertyData.ApprovalItems) {\r\n      this.buildApprovalItems(obj.propertyData.ApprovalItems);\r\n      this.buildCounterSignVariables(obj.propertyData.ApprovalItems);\r\n      this.buildSignRules(obj.propertyData.SignRule); // è®¾ç½®ä¼ç­¾è§åçç»è®ºåç§°\r\n    }\r\n    this.uiState.propertyData = obj.propertyData;\r\n    this.uiState.bizActivityId = obj.propertyData.BizActivityID;\r\n    this.uiState.propertyConfig = this.setUserActConfig(obj.propertyConfig);\r\n  }\r\n\r\n  private setUserActConfig(obj: any[]): ElementPropertyConfig[] {\r\n    const propertyConfig: ElementPropertyConfig[] = [];\r\n    if (obj) {\r\n      obj.forEach((element: ElementPropertyConfig) => {\r\n        this.setUserActEntity(element.properties);\r\n        propertyConfig.push(element);\r\n      });\r\n    }\r\n    return propertyConfig;\r\n  }\r\n\r\n  private setUserActEntity(obj: PropertyEntity[]) {\r\n    if (obj && obj.length > 0) {\r\n      obj.forEach((item: PropertyEntity) => {\r\n        switch (item.propertyID) {\r\n          case ResourceKeys.ParticipantSchemes: // åä¸è\r\n            item.editor = PerformerComponent;\r\n            item.converter = new PerformerConverter();\r\n            break;\r\n          case ResourceKeys.wf_ExecuteForms_PC: // è¡¨åå®ä¹\r\n            item.editor = ExecuteFormsComponent;\r\n            item.converter = new ExecuteFormsConverter();\r\n            item.editorParams = {\r\n              location: 'userActivity',\r\n              tab: 'web'\r\n            };\r\n            break;\r\n          case ResourceKeys.wf_ExecuteForms_Mobile: // è¡¨åå®ä¹\r\n            item.editor = ExecuteFormsComponent;\r\n            item.converter = new ExecuteFormsConverter();\r\n            item.editorParams = {\r\n              location: 'userActivity',\r\n              tab: 'mobile'\r\n            };\r\n            break;\r\n          case ResourceKeys.AssignStrategy: // åéç­ç¥\r\n            item.iterator = this.uiState.assignIterator;\r\n            break;\r\n          case ResourceKeys.OperatorConfig: // ææ´¾è§å\r\n            item.editor = AssignPerformerConfigComponent;\r\n            item.converter = new AssignConfigConverter();\r\n            break;\r\n          case ResourceKeys.CompleteStrategy: // å®æç­ç¥\r\n            if (this.uiState.propertyData.AssignStrategy === this.uiState.assignIterator[2].key) {\r\n              item.iterator = this.uiState.completeIterator4Claim; // åéç­ç¥ä¸ºé¢ç¨æ¶ï¼å®æç­ç¥åªè½æ¯æ¢å æ¨¡å¼\r\n            } else {\r\n              item.iterator = this.uiState.completeIterator;\r\n            }\r\n            break;\r\n          case ResourceKeys.SignRule: // ä¼ç­¾è§å\r\n            item.editor = SignRuleComponent;\r\n            item.converter = new SignRuleConverter();\r\n            item.editorParams = {\r\n              variables: this.uiState.counterSignVariables,\r\n              approvalItems: this.uiState.approvalItems\r\n            };\r\n            break;\r\n          case ResourceKeys.ApprovalItems: // å®¡æ¹é¡¹\r\n            item.editor = ApprovelItemsComponent;\r\n            item.converter = new ApprovelItemsConverter();\r\n            break;\r\n          case ResourceKeys.Retrievable: // åè®¸åå\r\n            item.iterator = this.uiState.boolIterator;\r\n            break;\r\n          case ResourceKeys.AddSignFrontAble: // åè®¸å¾è¯¢\r\n            item.editor = OrganizationPotentialOwnerComponent;\r\n            item.converter = new OrganizationPotentialOwnerConverter();\r\n            break;\r\n          case ResourceKeys.AddSignBehindAble: // åè®¸å ç­¾\r\n            item.editor = OrganizationPotentialOwnerComponent;\r\n            item.converter = new OrganizationPotentialOwnerConverter();\r\n            break;\r\n          case ResourceKeys.NotifyAble: // åè®¸ç¥ä¼\r\n            item.editor = OrganizationPotentialOwnerComponent;\r\n            item.converter = new OrganizationPotentialOwnerConverter();\r\n            break;\r\n          case ResourceKeys.transferScope: // ç§»äº¤èå´\r\n            item.editor = OrganizationPotentialOwnerComponent;\r\n            item.converter = new OrganizationPotentialOwnerConverter();\r\n            break;\r\n          case ResourceKeys.SelectBranch:  // åè®¸æå®åç»­åæ¯\r\n            item.iterator = this.uiState.boolIterator;\r\n            break;\r\n          case ResourceKeys.SelectTargetAble: // åè®¸è·³è½¬\r\n            if (this.uiState.propertyData.CompleteStrategy\r\n              && this.uiState.propertyData.CompleteStrategy !== this.uiState.completeIterator[0].key) {\r\n              item.iterator = this.uiState.noJump4Sign;\r\n            } else {\r\n              item.iterator = this.uiState.boolIterator;\r\n            }\r\n            break;\r\n          case ResourceKeys.JumpScope: // è·³è½¬è§å\r\n            item.editor = JumpScopeComponent;\r\n            item.converter = new JumpScopeConverter();\r\n            break;\r\n          case ResourceKeys.BackWardRule: // é©³åè§å\r\n            item.editor = BackwardRuleComponent;\r\n            item.converter = new BackwardRuleConverter();\r\n            item.editorParams = {\r\n              nodeType: 'UserActivity'\r\n            };\r\n            break;\r\n          case ResourceKeys.wf_TitleExpression:\r\n            item.editor = TitleExpressionComponent;\r\n            item.converter = new TitleExpressionConverter();\r\n            break;\r\n          case ResourceKeys.Tools: // æ´»å¨æä»¶\r\n            item.editor = ActivityComponentComponent;\r\n            item.converter = new ActivityComponentConverter();\r\n            item.editorParams = {\r\n              location: 'activity'\r\n            };\r\n            break;\r\n          case ResourceKeys.wf_CustomizeAction: // æ´»å¨æä»¶\r\n            item.editor = CustomizeActionComponent;\r\n            item.converter = new CustomizeActionConverter();\r\n            break;\r\n          case ResourceKeys.timeLimitControl: // è¶æ¶é¢è­¦\r\n            item.editor = TimeLimitControlComponent;\r\n            item.converter = new TimeLimitControlConverter();\r\n            item.editorParams = {\r\n              location: 'activity'\r\n            };\r\n            break;\r\n          case ResourceKeys.anonymousSet: // å¿åè®¾ç½®\r\n            item.editor = AnonymousSetComponent;\r\n            item.converter = new AnonymousSetConverter();\r\n            break;\r\n          case ResourceKeys.variableSettings: // åéè®¾ç½®\r\n            item.editor = VariableSettingComponent;\r\n            item.converter = new VariableSettingConverter();\r\n            break;\r\n          case ResourceKeys.messageNotice: // æ¶æ¯éç¥\r\n            item.editor = MessageNoticeComponent;\r\n            item.converter = new MessageNoticeConverter();\r\n            item.editorParams = {\r\n              location: 'activity'\r\n            };\r\n            break;\r\n          case ResourceKeys.approvalPivotConfig: // å®¡æ¹è¦ç¹\r\n            item.editor = ApprovalPivotComponent;\r\n            item.converter = new ApprovalPivotConverter();\r\n            break;\r\n          case ResourceKeys.DisplayTerminal: // æ¾ç¤ºç»ç«¯\r\n            item.iterator = this.uiState.displayTerminal;\r\n            break;\r\n          case ResourceKeys.urgeHandleRule: // æ¾ç¤ºç»ç«¯\r\n            item.editor = UrgeHandleRuleComponent;\r\n            item.converter = new UrgeHandleRuleConverter();\r\n            break;\r\n          default:\r\n            item.editor = ExtendPropertyComponent;\r\n            item.converter = new ExtendPropertyConverter();\r\n            break;\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * åå»ºä¼ç­¾è§ååé\r\n   */\r\n  buildCounterSignVariables(conclusions: any[]) {\r\n    this.uiState.counterSignVariables = [];\r\n    this.uiState.counterSignVariables = this.uiState.counterSignVariables.concat([{\r\n      key: 'nrOfInstances',\r\n      name: 'æ»ä»»å¡æ°',\r\n      description: 'æ»ä»»å¡æ°'\r\n    }, {\r\n      key: 'nrOfCompletedInstances',\r\n      name: 'å·²å®æä»»å¡æ°',\r\n      description: 'å·²å®æä»»å¡æ°'\r\n    }\r\n    ]);\r\n    if (conclusions && conclusions.length > 0) {\r\n      for (const conclusion of conclusions) {\r\n        const variable = new VarEntity();\r\n        variable.key = `nrOf${conclusion.Value}`;\r\n        variable.name = `${conclusion.Text}_ä»»å¡æ°`;\r\n        variable.description = `${conclusion.Text}_ä»»å¡æ°`;\r\n        this.uiState.counterSignVariables.push(variable);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * åå»ºèªå®ä¹é¡¹\r\n   * @param conclusions\r\n   */\r\n  buildApprovalItems(conclusions: any[]) {\r\n    this.uiState.approvalItems = [];\r\n    if (conclusions && conclusions.length > 0) {\r\n      for (const item of conclusions) {\r\n        const conclusion = new ApprovalItemEntity();\r\n        conclusion.value = item.Value;\r\n        conclusion.text = item.Text;\r\n        conclusion.workFlowAction = item.WorkFlowAction;\r\n        conclusion.isDefault = item.IsDefault;\r\n        this.uiState.approvalItems.push(conclusion);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ä¼ç­¾è§åç»å®å®¡æ¹é¡¹åç§°\r\n   * @param signRules ä¼ç­¾è§å\r\n   */\r\n  private buildSignRules(signRules: any[]) {\r\n    if (signRules && signRules.length > 0) {\r\n      for (const signRule of signRules) {\r\n        const approvalItem: ApprovalItemEntity = this.uiState.approvalItems.find(item => item.value === signRule.ConclusionValue);\r\n        // if (!approvalItem) {\r\n        //     this.message.info('å®¡æ¹é¡¹åçæ¹åï¼è¯·è°æ´ä¼ç­¾è§åï¼');\r\n        // }\r\n        if (approvalItem) {\r\n          signRule.ConclusionName = approvalItem.text;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n","import { Component, OnInit, Input, Output, EventEmitter, ViewChild, TemplateRef } from '@angular/core';\r\nimport { TreeTableComponent } from '@farris/ui-treetable';\r\nimport { of } from 'rxjs';\r\nimport { LookupGridComponent } from '@farris/ui-lookup';\r\n\r\n@Component({\r\n  selector: 'app-save-as-edit',\r\n  templateUrl: './save-as-edit.component.html',\r\n  styleUrls: ['./save-as-edit.component.scss']\r\n})\r\nexport class SaveAsEditComponent implements OnInit {\r\n\r\n  @ViewChild('buttonRef') btnRef: TemplateRef<any>;\r\n\r\n  @Input()\r\n  procName: string;\r\n  @Input()\r\n  procKey: string;\r\n\r\n  @ViewChild('lookup') public lookUp: LookupGridComponent;\r\n\r\n  @Output() submit = new EventEmitter<any>();\r\n  @Output() cancel = new EventEmitter<any>();\r\n\r\n  accessLevel = 'public';\r\n  organization;\r\n  organizationName;\r\n\r\n  isAdministratorConfig = false;\r\n\r\n  private _organizations: any[];\r\n  set organizations(data: any[]) {\r\n    this._organizations = data;\r\n    if (this._organizations && this._organizations.length > 0) {\r\n      this.items = this.makeTreeByParent(this._organizations, 'parentId', 'id');\r\n    } else {\r\n      this.items = new Array();\r\n    }\r\n  }\r\n  get organizations() {\r\n    return this._organizations;\r\n  }\r\n  items = new Array();\r\n\r\n  accessLevelCollection = [\r\n    { value: 'public', text: 'å¬æ'},\r\n    { value: 'private', text: 'ç§æ' }\r\n  ];\r\n\r\n  columns = [\r\n    { title: 'ç¼å·', field: 'code', width: '100', searchField: 'code' },\r\n    { title: 'åç§°', field: 'name', width: '100', searchField: 'name' },\r\n  ];\r\n\r\n\r\n  constructor() {}\r\n\r\n  ngOnInit() {\r\n  }\r\n  saveAsOK() {\r\n    if (this.validator()) {\r\n      this.submit.next({\r\n        procName: this.procName,\r\n        accessLevel: this.accessLevel,\r\n        organization: this.organization,\r\n        organizationName: this.organizationName\r\n      });\r\n    }\r\n  }\r\n  saveAsCancel() {\r\n    this.cancel.emit();\r\n  }\r\n\r\n  validator() {\r\n    return true;\r\n  }\r\n\r\n  search(data: any) {\r\n    const tt = this.lookUp.componentRef.instance as TreeTableComponent;\r\n    tt.searchHandle.search(data.field, data.value, 'client');\r\n    // if (data.field === '*') {\r\n    //   this.organizations = this.organizations.filter(o => o.code.indexOf(data.value) > -1 || o.name.indexOf(data.value) > -1);\r\n    // } else {\r\n    //   this.organizations = this.organizations.filter(o => o[data.field].indexOf(data.value) > -1);\r\n    // }\r\n  }\r\n\r\n  dictPicked = (data: any) => {\r\n    this.organizationName = data.name;\r\n    this.organization = data.id;\r\n    return of(true);\r\n  }\r\n\r\n  /** æç§parentç æé æ  */\r\n  private makeTreeByParent(datas: any[], parentField: string, keyField: string): any[] {\r\n    // ä¸ç´ç²ç©ºï¼æèæ²æä¸ç´ç\r\n    const pathLayerOnes = datas.filter(x => {\r\n      if (!x[parentField]) {\r\n        return true;\r\n      }\r\n      const p = datas.find(parent => parent[keyField] === x[parentField]);\r\n      if (!p) {\r\n        return true;\r\n      }\r\n    });\r\n    const treedata = [];\r\n    pathLayerOnes.forEach(x => {\r\n      const entity: any = {};\r\n      entity.data = x;\r\n      entity.children = [];\r\n      treedata.push(entity);\r\n      // this.root = x['id'];\r\n    });\r\n    treedata.forEach(item => {\r\n      this.findChildrenByParent(item, datas, parentField, keyField);\r\n    }\r\n    );\r\n    return treedata;\r\n  }\r\n\r\n  /** æ¾å°å­èç¹ */\r\n  private findChildrenByParent(parent: any, datas: any[], parentField: string, keyField: string) {\r\n    const childList = datas.filter(childitem => {\r\n      if (childitem[parentField] === parent.data[keyField]) {\r\n        return true;\r\n      }\r\n    });\r\n    if (childList && childList.length > 0) {\r\n      childList.forEach(child => {\r\n        const childEntity: any = {};\r\n        childEntity.data = child;\r\n        childEntity.children = [];\r\n        parent.children.push(childEntity);\r\n        this.findChildrenByParent(childEntity, datas, parentField, keyField);\r\n      });\r\n    }\r\n  }\r\n}\r\n","export enum BillSourceType {\r\n    InheritParent = 'SameWithParent',\r\n    VariablesExpression = 'VariablesExpression',\r\n    AutoCreation = 'AutoGenerateDownBill',\r\n}","export enum SubProcessType {\r\n    Dynamic = \"Dynamic\",\r\n    Specified = \"Specified\",\r\n}","import { BillSourceType } from \"./BillSourceType\";\r\nimport { SubProcessType } from \"./SubProcessType\";\r\n\r\nexport class CallActivitySubProcess {\r\n    calledBizDefKey: string;\r\n    calledBizDefName: string;\r\n    calledElement: string;\r\n    calledElementName: string;\r\n    bizDataId: string;\r\n    inheritVariables: boolean;\r\n    inheritBizDataId: boolean;\r\n    useAutoCreationData: boolean;\r\n    aifProcessCode: string;\r\n    aifProcessName: string;\r\n    subProcessType: SubProcessType = SubProcessType.Specified;\r\n    billSourceType: BillSourceType = BillSourceType.InheritParent;\r\n}\r\n","export class BifMonitorConstant {\r\n    static readonly bifMonitorAppId: string = \"BillIntegrationFrameworkRT\";\r\n    static readonly bifManagerAppEntrance: string = \"bif-manager\";\r\n    \r\n    static readonly bifDiagnostorFuncId: string = \"BifDiagnostor\";\r\n    static readonly bifManagerFuncId: string = \"BifManager\";\r\n}\r\n\r\n","export enum BifMetadataType {\r\n    BifCreationProcess = \"BifCreationProcess\",\r\n    BifWritebackProcess = \"BifWritebackProcess\",\r\n}","import { JsonConvertableImpl, BpmnModelJsonHelper } from '@edp-bif/common-api';\r\nimport { BifMetadataType } from './BifMetadataType';\r\nimport { IShowEntity } from './IShowEntity';\r\n\r\nexport abstract class AbstractShowEntity extends JsonConvertableImpl implements IShowEntity {\r\n    id: string;\r\n    code: string;\r\n    name: string;\r\n    upBillVoName: string;\r\n    downBillVoName: string;\r\n    bifMetadataType: BifMetadataType;\r\n    lastModifiedTime: Date;\r\n    parentId: string;\r\n    sysInit: boolean = false;\r\n    originId: string;\r\n    rootId: string;\r\n\r\n    protected ResetBeforeLoadFrom(): void {\r\n        super.ResetBeforeLoadFrom();\r\n\r\n        this.id = null;\r\n        this.code = null;\r\n        this.name = null;\r\n        this.upBillVoName = null;\r\n        this.downBillVoName = null;\r\n        this.parentId = null;\r\n        this.bifMetadataType = null;\r\n        this.lastModifiedTime = null;\r\n        this.sysInit = false;\r\n        this.originId = null;\r\n        this.rootId = null;\r\n    }\r\n\r\n    public ConvertToJsonObject(): {} {\r\n        let obj = super.ConvertToJsonObject();\r\n\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"id\", this.id);\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"code\", this.code);\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"name\", this.name);\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"upBillVoName\", this.upBillVoName);\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"downBillVoName\", this.downBillVoName);\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"parentId\", this.parentId);\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"bifMetadataType\", this.bifMetadataType);\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"lastModifiedTime\", this.lastModifiedTime);\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"sysInit\", this.sysInit);\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"originId\", this.originId);\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"rootId\", this.rootId);\r\n\r\n        return obj;\r\n    }\r\n\r\n    public LoadFromJsonObject(obj: {}): void {\r\n        super.LoadFromJsonObject(obj);\r\n\r\n        this.id = BpmnModelJsonHelper.GetAttributeValueAsString(obj, \"id\");\r\n        this.code = BpmnModelJsonHelper.GetAttributeValueAsString(obj, \"code\");\r\n        this.name = BpmnModelJsonHelper.GetAttributeValueAsString(obj, \"name\");\r\n        this.upBillVoName = BpmnModelJsonHelper.GetAttributeValueAsString(obj, \"upBillVoName\");\r\n        this.downBillVoName = BpmnModelJsonHelper.GetAttributeValueAsString(obj, \"downBillVoName\");\r\n        this.parentId = BpmnModelJsonHelper.GetAttributeValueAsString(obj, \"parentId\");\r\n        this.bifMetadataType = BifMetadataType[BpmnModelJsonHelper.GetAttributeValueAsString(obj, \"bifMetadataType\")];\r\n        this.lastModifiedTime = BpmnModelJsonHelper.GetAttributeValueAsDateTime(obj, \"lastModifiedTime\");\r\n        this.sysInit = BpmnModelJsonHelper.GetAttributeValueAsBoolean(obj, \"sysInit\");\r\n        this.originId = BpmnModelJsonHelper.GetAttributeValueAsString(obj, \"originId\");\r\n        this.rootId = BpmnModelJsonHelper.GetAttributeValueAsString(obj, \"rootId\");\r\n    }\r\n}","import { BpmnModelJsonHelper } from '@edp-bif/common-api';\r\nimport { IRtShowEntity } from './IRtShowEntity';\r\nimport { AbstractShowEntity } from './AbstractShowEntity';\r\n\r\nexport class RtShowEntity extends AbstractShowEntity implements IRtShowEntity {\r\n    isEnabled: boolean;\r\n\r\n    protected ResetBeforeLoadFrom(): void {\r\n        super.ResetBeforeLoadFrom();\r\n\r\n        this.isEnabled = false;\r\n    }\r\n\r\n    public ConvertToJsonObject(): {} {\r\n        let obj = super.ConvertToJsonObject();\r\n\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"isEnabled\", this.isEnabled);\r\n\r\n        return obj;\r\n    }\r\n\r\n    public LoadFromJsonObject(obj: {}): void {\r\n        super.LoadFromJsonObject(obj);\r\n\r\n        this.isEnabled = BpmnModelJsonHelper.GetAttributeValueAsBoolean(obj, \"isEnabled\");\r\n    }\r\n}","import { BpmnModelJsonHelper } from '@edp-bif/common-api';\r\nimport { RtShowEntity } from './RtShowEntity';\r\n\r\nexport class RtShowEntitiesWithCustomization extends RtShowEntity {\r\n    isEnabled: boolean;\r\n    customizationEntities: Array<RtShowEntitiesWithCustomization> = new Array();\r\n\r\n    protected ResetBeforeLoadFrom(): void {\r\n        super.ResetBeforeLoadFrom();\r\n\r\n        this.isEnabled = false;\r\n        this.customizationEntities.length = 0;\r\n    }\r\n\r\n    public ConvertToJsonObject(): {} {\r\n        let obj = super.ConvertToJsonObject();\r\n\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"isEnabled\", this.isEnabled);\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"customizationEntities\", this.customizationEntities);\r\n\r\n        return obj;\r\n    }\r\n\r\n    public LoadFromJsonObject(obj: {}): void {\r\n        super.LoadFromJsonObject(obj);\r\n\r\n        this.isEnabled = BpmnModelJsonHelper.GetAttributeValueAsBoolean(obj, \"isEnabled\");\r\n        this.customizationEntities = BpmnModelJsonHelper.GetAttributeValueAsList(obj, \"customizationEntities\", RtShowEntitiesWithCustomization);\r\n    }\r\n\r\n    protected getTClass() {\r\n        return RtShowEntitiesWithCustomization;\r\n    }\r\n}","import { JsonConvertableImpl, BpmnModelJsonHelper } from '@edp-bif/common-api';\r\nimport { RtShowEntitiesWithCustomization } from './RtShowEntitiesWithCustomization';\r\n\r\nexport class RtBillProcessListResult extends JsonConvertableImpl {\r\n    totalCount: number;\r\n    pageCount: number;\r\n    pageIndex: number;\r\n    pageSize: number;\r\n\r\n    entities: Array<RtShowEntitiesWithCustomization> = new Array();\r\n\r\n    protected ResetBeforeLoadFrom(): void {\r\n        super.ResetBeforeLoadFrom();\r\n\r\n        this.totalCount = 0;\r\n        this.pageCount = 0;\r\n        this.pageIndex = 0;\r\n        this.pageSize = 0;\r\n        this.entities.length = 0;\r\n    }\r\n\r\n    public ConvertToJsonObject(): {} {\r\n        let obj = super.ConvertToJsonObject();\r\n\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"totalCount\", this.totalCount);\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"pageCount\", this.pageCount);\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"pageIndex\", this.pageIndex);\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"pageSize\", this.pageSize);\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"entities\", this.entities);\r\n\r\n        return obj;\r\n    }\r\n\r\n    public LoadFromJsonObject(obj: {}): void {\r\n        super.LoadFromJsonObject(obj);\r\n\r\n        this.totalCount = BpmnModelJsonHelper.GetAttributeValueAsNumber(obj, \"totalCount\");\r\n        this.pageCount = BpmnModelJsonHelper.GetAttributeValueAsNumber(obj, \"pageCount\");\r\n        this.pageIndex = BpmnModelJsonHelper.GetAttributeValueAsNumber(obj, \"pageIndex\");\r\n        this.pageSize = BpmnModelJsonHelper.GetAttributeValueAsNumber(obj, \"pageSize\");\r\n        this.entities = BpmnModelJsonHelper.GetAttributeValueAsList(obj, \"entities\", RtShowEntitiesWithCustomization);\r\n    }\r\n}","import { Injectable } from '@angular/core';\r\nimport { HttpService } from '@ecp-caf/caf-common';\r\nimport { Observable } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\nimport { AppOptions, FrameworkService, AppService } from '@gsp-sys/rtf-common';\r\nimport { IRtShowEntity } from '../entity/IRtShowEntity';\r\nimport { BifMonitorConstant } from '../entity/BifMonitorConstant';\r\nimport { ProcessFilterConditionArgs } from '../entity/ProcessFilterConditionArgs';\r\nimport { RtBillProcessListResult } from '../entity/RtBillProcessListResult';\r\nimport { RtShowEntity } from '../entity/RtShowEntity';\r\n\r\n@Injectable()\r\nexport class ProcessListHelpService {\r\n    private readonly baseUrl = \"/api/runtime/aif/v1.0/rtbillprocess\";\r\n\r\n    constructor(\r\n        private appService: AppService,\r\n        private frameworkService: FrameworkService,\r\n        private httpService: HttpService,\r\n    ) {\r\n    }\r\n\r\n    public openBifManagerApp(entity: IRtShowEntity) {\r\n        const map = new Map();\r\n        map.set(\"id\", entity.id);\r\n        map.set(\"type\", entity.bifMetadataType);\r\n        map.set(\"srcFuncId\", BifMonitorConstant.bifDiagnostorFuncId);\r\n        const opt: AppOptions = {\r\n            funcId: BifMonitorConstant.bifManagerFuncId,\r\n            appId: BifMonitorConstant.bifMonitorAppId,\r\n            appEntrance: BifMonitorConstant.bifManagerAppEntrance,\r\n            appType: \"menu\",\r\n            entityParams: {},\r\n            queryStringParams: map,\r\n            tabId: entity.id,\r\n            tabName: entity.name\r\n        };\r\n        this.frameworkService.openMenu(opt);\r\n    }\r\n\r\n    public getDatagridData(args: ProcessFilterConditionArgs): Observable<RtBillProcessListResult> {\r\n        const body = args.ConvertToJson();\r\n        let data$: Observable<any> = null;\r\n        //æä¸å¡ç§ç±»åæ°æ¶ä¸åé¡µ\r\n        if (args.bizType != null) {\r\n            data$ = this.httpService.post(`${this.baseUrl}/getpatch`, body);\r\n            return data$.pipe(\r\n                map(\r\n                    (res: any) => {\r\n                        const listRes = new RtBillProcessListResult();\r\n                        listRes.entities = res.map(elt => {\r\n                            const e = new RtShowEntity();\r\n                            e.LoadFromJsonObject(elt);\r\n                            return e;\r\n                        });\r\n                        return listRes;\r\n                    }\r\n                )\r\n            );\r\n        } else {\r\n            data$ = this.httpService.post(`${this.baseUrl}/getpagedpatch`, body);\r\n            return data$.pipe(\r\n                map(\r\n                    (res: any) => {\r\n                        const listRes = new RtBillProcessListResult();\r\n                        listRes.LoadFromJsonObject(res);\r\n                        return listRes;\r\n                    }\r\n                )\r\n            );\r\n        }\r\n    }\r\n}","import { BpmnModelJsonHelper, JsonConvertableImpl, TextValue } from '@edp-bif/common-api';\r\n\r\nexport class ProcessFilterConditionArgs extends JsonConvertableImpl {\r\n    name: TextValue;\r\n    upBillVoId: TextValue;\r\n    downBillVoId: TextValue;\r\n    isEnabled: TextValue;\r\n    billProcessType: TextValue;\r\n    sysInit: TextValue;\r\n    bizType: TextValue;\r\n    orderByCode: TextValue;\r\n    orderByName: TextValue;\r\n    OrderByLastModifiedTime: TextValue;\r\n    pageSize: number;\r\n    pageIndex: number;\r\n\r\n    protected ResetBeforeLoadFrom(): void {\r\n        super.ResetBeforeLoadFrom();\r\n\r\n        this.name = null;\r\n        this.upBillVoId = null;\r\n        this.downBillVoId = null;\r\n        this.isEnabled = null;\r\n        this.billProcessType = null;\r\n        this.sysInit = null;\r\n        this.bizType = null;\r\n        this.orderByCode = null;\r\n        this.orderByName = null;\r\n        this.OrderByLastModifiedTime = null;\r\n        this.pageSize = 0;\r\n        this.pageIndex = 0;\r\n    }\r\n\r\n    public ConvertToJsonObject(): {} {\r\n        let obj = super.ConvertToJsonObject();\r\n\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"name\", this.name);\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"upBillVoId\", this.upBillVoId);\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"downBillVoId\", this.downBillVoId);\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"isEnabled\", this.isEnabled);\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"billProcessType\", this.billProcessType);\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"sysInit\", this.sysInit);\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"bizType\", this.bizType);\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"orderByCode\", this.orderByCode);\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"orderByName\", this.orderByName);\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"OrderByLastModifiedTime\", this.OrderByLastModifiedTime);\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"pageSize\", this.pageSize);\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"pageIndex\", this.pageIndex);\r\n\r\n        return obj;\r\n    }\r\n\r\n    public LoadFromJsonObject(obj: {}): void {\r\n        super.LoadFromJsonObject(obj);\r\n\r\n        this.name = BpmnModelJsonHelper.GetAttributeValueAsJsonSerializable(obj, \"name\", TextValue);\r\n        this.upBillVoId = BpmnModelJsonHelper.GetAttributeValueAsJsonSerializable(obj, \"upBillVoId\", TextValue);\r\n        this.downBillVoId = BpmnModelJsonHelper.GetAttributeValueAsJsonSerializable(obj, \"downBillVoId\", TextValue);\r\n        this.isEnabled = BpmnModelJsonHelper.GetAttributeValueAsJsonSerializable(obj, \"isEnabled\", TextValue);\r\n        this.billProcessType = BpmnModelJsonHelper.GetAttributeValueAsJsonSerializable(obj, \"billProcessType\", TextValue);\r\n        this.sysInit = BpmnModelJsonHelper.GetAttributeValueAsJsonSerializable(obj, \"sysInit\", TextValue);\r\n        this.bizType = BpmnModelJsonHelper.GetAttributeValueAsJsonSerializable(obj, \"bizType\", TextValue);\r\n        this.orderByCode = BpmnModelJsonHelper.GetAttributeValueAsJsonSerializable(obj, \"orderByCode\", TextValue);\r\n        this.orderByName = BpmnModelJsonHelper.GetAttributeValueAsJsonSerializable(obj, \"orderByName\", TextValue);\r\n        this.OrderByLastModifiedTime = BpmnModelJsonHelper.GetAttributeValueAsJsonSerializable(obj, \"OrderByLastModifiedTime\", TextValue);\r\n        this.pageSize = BpmnModelJsonHelper.GetAttributeValueAsNumber(obj, \"pageSize\");\r\n        this.pageIndex = BpmnModelJsonHelper.GetAttributeValueAsNumber(obj, \"pageIndex\");\r\n    }\r\n}\r\n","export enum OrderByDirection {\r\n    Asc = \"Asc\",\r\n    Desc = \"Desc\",\r\n}","import { Pipe, PipeTransform, Inject, LOCALE_ID, InjectionToken } from '@angular/core';\r\n\r\nexport const BIF_LANG_RESOURCES = new InjectionToken(\"BIF_LANG_RESOURCES\");\r\n\r\n@Pipe({ name: 'aifLocale' })\r\nexport class AifLocalePipe implements PipeTransform {\r\n    private readonly defaultLang: string = \"zh-CHS\";\r\n    private langCode: string;\r\n    private lang: {};\r\n    private resources;\r\n    constructor(\r\n        @Inject(LOCALE_ID) localeId: string,\r\n        @Inject(BIF_LANG_RESOURCES) resources: any,\r\n    ) {\r\n        this.langCode = localeId || this.defaultLang;\r\n        this.resources = resources || {};\r\n        this.lang = resources[this.langCode] || resources[this.defaultLang] || {};\r\n    }\r\n    transform(name: string): any {\r\n        return this.lang[name] || name;\r\n    }\r\n\r\n    instant(name: string): any {\r\n        return this.transform(name);\r\n    }\r\n}\r\n\r\n","import { Component, OnInit, ViewChild, TemplateRef, EventEmitter, Inject, LOCALE_ID, Output, Input } from '@angular/core';\r\nimport { FarrisSectionComponent } from '@farris/ui-section';\r\nimport { ProcessListHelpService } from '../../services/process-list-help.service';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { NotifyService } from '@farris/ui-notify';\r\nimport { BsModalService, BsModalRef } from '@farris/ui-modal';\r\nimport { FrameworkService } from '@gsp-sys/rtf-common';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\nimport { LoadingService } from '@farris/ui-loading';\r\nimport { Observable, of } from 'rxjs';\r\nimport { switchMap, catchError } from 'rxjs/operators';\r\nimport { IRtProcQueryParam } from '../../entity/IProcQueryParam';\r\nimport { BifMetadataType } from '../../entity/BifMetadataType';\r\nimport { ProcessFilterConditionArgs } from '../../entity/ProcessFilterConditionArgs';\r\nimport { TextValue } from '@edp-bif/common-api';\r\nimport { OrderByDirection } from '../../entity/OrderByDirection';\r\nimport { DatagridComponent } from '@farris/ui-datagrid';\r\nimport { RtBillProcessListResult } from '../../entity/RtBillProcessListResult';\r\nimport { AifLocalePipe } from '../../../aif-ui-common/pipe/aif-ui-common-locale.pipe';\r\n\r\n@Component({\r\n  selector: 'app-process-list-help',\r\n  templateUrl: './process-list-help.component.html',\r\n  styleUrls: ['./process-list-help.component.css']\r\n})\r\nexport class ProcessListHelpComponent implements OnInit {\r\n  @Output() closeModal = new EventEmitter<any>();\r\n  @Output() submitModal = new EventEmitter<any>();\r\n\r\n  @Input()\r\n  set value(data: any) {\r\n    if (data) {\r\n      this.processCode = data;\r\n    }\r\n  }\r\n\r\n  @Input() editorParams: {\r\n    bizTypeId?: string\r\n  } = {};\r\n\r\n  private processCode: string;\r\n  modalConfig = {\r\n    title: 'çåæµç¨éæ©',\r\n    width: 1250,\r\n    height: 500,\r\n    showButtons: true\r\n  };\r\n\r\n  procEmitter = new EventEmitter<any>();\r\n  queryParam: IRtProcQueryParam;\r\n\r\n  @ViewChild(\"tt\")\r\n  tt: DatagridComponent;\r\n  ttIdField: string = \"id\";\r\n  ttData: any[] = [];\r\n  ttColumns: any[] = [];\r\n  cascadeCheck = false;\r\n  cascadeDown = false;\r\n  cascadeUp = false;\r\n\r\n  @ViewChild('nameCellTemp')\r\n  nameCellTemp: TemplateRef<any>;\r\n\r\n  @ViewChild('iconSelectFooter')\r\n  modalFooter: TemplateRef<any>;\r\n\r\n  modalRef: BsModalRef;\r\n\r\n  readonly defaultPageSize: number = 30;\r\n  pageList = [this.defaultPageSize, 50, 100, 200, 500];\r\n\r\n  constructor(\r\n    private procHelpService: ProcessListHelpService,\r\n    private messager: MessagerService,\r\n    private notify: NotifyService,\r\n    private modalService: BsModalService,\r\n    private frameworkService: FrameworkService,\r\n    private router: Router,\r\n    private activatedRoute: ActivatedRoute,\r\n    private loading: LoadingService,\r\n    @Inject(LOCALE_ID) localeId: string,\r\n    private localePipe: AifLocalePipe,\r\n  ) {\r\n    this.queryParam = this.createDefaultQueryParam();\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.configTtColumns();\r\n    if (this.editorParams && this.editorParams.bizTypeId) {\r\n      this.queryParam.filterArgs.bizType = new TextValue();\r\n      this.queryParam.filterArgs.bizType.value = this.editorParams.bizTypeId;\r\n      this.queryParam.filterArgs.bizType.hasValue = true;\r\n    }\r\n    this.loadItems(this.queryParam.filterArgs).subscribe(() => {\r\n      setTimeout(() => {\r\n        if (this.ttData && this.ttData.length > 0) {\r\n          const proc = this.processCode != null ? this.ttData.find((it) => it.code == this.processCode) : this.ttData[0];\r\n          proc && this.tt.selectRow(proc.id);\r\n        }\r\n      }, 300);\r\n    });\r\n  }\r\n\r\n  clickOk(evt?) {\r\n    if (this.tt.selectedRow == null) {\r\n      this.notify.warning(this.localePipe.transform(\"pleaseSelectOneItemOnly\"));\r\n      return;\r\n    }\r\n    this.procEmitter.emit(this.tt.selectedRow.data);\r\n    const object = { value: this.tt.selectedRow.data.code, parameters: null };\r\n    this.submitModal.emit(object);\r\n    this.modalRef && this.modalRef.close();\r\n  }\r\n\r\n  clickCancel(evt?) {\r\n    this.procEmitter.complete();\r\n    this.closeModal.emit();\r\n    this.modalRef && this.modalRef.close();\r\n  }\r\n\r\n  onSearch(param: any) {\r\n    this.queryParam = param;\r\n    console.log(this.queryParam);\r\n    this.loadItems(this.queryParam.filterArgs).subscribe(\r\n      () => {\r\n        this.tt.clearCheckeds();\r\n        this.tt.clearSelections();\r\n      }\r\n    );\r\n  }\r\n\r\n  clickNameCell(ctx) {\r\n    this.procHelpService.openBifManagerApp(ctx.rowData);\r\n  }\r\n\r\n  /**\r\n * åæåºåäºä»¶\r\n */\r\n  beforeSortColumn = (field: string, order: string) => {\r\n    let cols: string[] = field.split(\",\");\r\n    let orders: string[] = order.split(\",\");\r\n\r\n    //éç½®æåºæ¡ä»¶\r\n    this.queryParam.filterArgs.orderByCode = null;\r\n    this.queryParam.filterArgs.orderByName = null;\r\n    this.queryParam.filterArgs.OrderByLastModifiedTime = null;\r\n    //ä¾æ¬¡æ·»å æåºæ¡ä»¶\r\n    for (let i = 0; i < cols.length; i++) {\r\n      let orderBy = null;\r\n      if (orders[i] == \"asc\") {\r\n        orderBy = new TextValue();\r\n        orderBy.hasValue = true;\r\n        orderBy.value = OrderByDirection.Asc;\r\n      } else if (orders[i] == \"desc\") {\r\n        orderBy = new TextValue();\r\n        orderBy.hasValue = true;\r\n        orderBy.value = OrderByDirection.Desc;\r\n      }\r\n\r\n      if (cols[i] == \"code\") {\r\n        this.queryParam.filterArgs.orderByCode = orderBy;\r\n      } else if (cols[i] == \"name\") {\r\n        this.queryParam.filterArgs.orderByName = orderBy;\r\n      } else if (cols[i] == \"lastModifiedTime\") {\r\n        this.queryParam.filterArgs.OrderByLastModifiedTime = orderBy;\r\n      }\r\n    }\r\n\r\n    return this.loadItems(this.queryParam.filterArgs);\r\n  };\r\n\r\n  /**\r\n   * åæåºåäºä»¶\r\n   */\r\n  columnSorted(val) {\r\n    console.log(val);\r\n  }\r\n\r\n  onPageSizeChanged($event: { pageIndex: number, pageSize: number }) {\r\n    console.log('PageSize Changed:', $event);\r\n    let checkedIds = this.tt.checkeds.map(r => r.data.id);\r\n\r\n    this.queryParam.filterArgs.pageSize = $event.pageSize;\r\n    this.loadItems(this.queryParam.filterArgs).subscribe(\r\n      () => {\r\n        setTimeout(() => {\r\n          this.tt.checkRows(checkedIds);\r\n        }, 0);\r\n      }\r\n    );\r\n  }\r\n\r\n  onPageChanged($event: { pageIndex: number, pageSize: number }) {\r\n    console.log('PageNumber Changed:', $event);\r\n    let checkedIds = this.tt.checkeds.map(r => r.data.id);\r\n\r\n    this.queryParam.filterArgs.pageIndex = $event.pageIndex - 1;\r\n    this.queryParam.filterArgs.pageSize = $event.pageSize;\r\n    this.loadItems(this.queryParam.filterArgs).subscribe(\r\n      () => {\r\n        setTimeout(() => {\r\n          this.tt.checkRows(checkedIds);\r\n        }, 0);\r\n      }\r\n    );\r\n  }\r\n\r\n  pageChangeHandler($event) {\r\n    console.log($event);\r\n  }\r\n\r\n  pageSizeChangeHandler($event) {\r\n    console.log($event);\r\n  }\r\n\r\n  private loadItems(args: ProcessFilterConditionArgs): Observable<any> {\r\n    const loadingComp = this.loading.show({ message: this.localePipe.transform(\"loading\") });\r\n    return this.procHelpService.getDatagridData(args).pipe(\r\n      switchMap(\r\n        (listRes: RtBillProcessListResult) => {\r\n          this.ttData = [...listRes.entities];\r\n          //æ´æ°åé¡µä¿¡æ¯\r\n          this.tt.setPageIndex(listRes.pageIndex + 1);\r\n          this.tt.total = listRes.totalCount;\r\n          this.tt.pageSize = listRes.pageSize;\r\n          // this.page.setCurrentPage(this.paginationId, listRes.pageIndex + 1);\r\n          // this.page.setItemsPerPage(this.paginationId, listRes.pageSize);\r\n          // this.page.setTotalItems(this.paginationId, listRes.totalCount);\r\n\r\n          loadingComp.close();\r\n          return of(listRes);\r\n        }\r\n      ),\r\n      catchError(\r\n        (err) => {\r\n          loadingComp.close();\r\n          setTimeout(() => {\r\n            //todo ç¡®å®å¼å¸¸ç»æ, ç®åéç¨å¼å®¹åå¼æ¹å¼\r\n            this.messager.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));\r\n          }, 300);\r\n          throw err;\r\n        }\r\n      )\r\n    );\r\n  }\r\n\r\n  private configTtColumns() {\r\n    this.ttColumns = [\r\n      // {\r\n      //   field: \"isEnabled\", title: this.localePipe.transform(\"enabledState\"), width: 100, sortable: false,\r\n      //   formatter: (value: boolean, rowData, rowIndex) => {\r\n      //     if (value == true) {\r\n      //       return this.localePipe.transform(\"enabled\");\r\n      //     } else if (value == false) {\r\n      //       return this.localePipe.transform(\"disabled\");\r\n      //     } else {\r\n      //       return \"-\";\r\n      //     }\r\n      //   }\r\n      // },\r\n      { field: \"code\", title: this.localePipe.transform(\"code\"), width: 120, sortable: true },\r\n      {\r\n        field: \"name\", title: this.localePipe.transform(\"name\"), width: 250, sortable: true,\r\n        template: this.nameCellTemp,\r\n      },\r\n      { field: \"upBillVoName\", title: this.localePipe.transform(\"upBill\"), width: 120, sortable: true },\r\n      { field: \"downBillVoName\", title: this.localePipe.transform(\"downBill\"), width: 120, sortable: true },\r\n      // {\r\n      //   field: \"bifMetadataType\", title: this.localePipe.transform(\"processType\"), width: 120, sortable: false,\r\n      //   formatter: (value: BifMetadataType, rowData, rowIndex) => {\r\n      //     if (value == BifMetadataType.BifCreationProcess) {\r\n      //       return this.localePipe.transform(\"creation\");\r\n      //     } else if (value == BifMetadataType.BifWritebackProcess) {\r\n      //       return this.localePipe.transform(\"writeback\");\r\n      //     } else {\r\n      //       return \"-\";\r\n      //     }\r\n      //   }\r\n      // },\r\n      // {\r\n      //   field: \"sysInit\", title: this.localePipe.transform(\"sysInit\"), width: 80, sortable: false,\r\n      //   formatter: (value: boolean, rowData, rowIndex) => {\r\n      //     if (value == true) {\r\n      //       return this.localePipe.transform(\"yes\");\r\n      //     } else if (value == false) {\r\n      //       return this.localePipe.transform(\"no\");\r\n      //     } else {\r\n      //       return \"-\";\r\n      //     }\r\n      //   }\r\n      // },\r\n      // {\r\n      //   field: null, title: this.localePipe.transform(\"isExtendProcess\"), width: 80, sortable: false,\r\n      //   formatter: (value: boolean, rowData, rowIndex) => {\r\n      //     if (rowData.parentId == null) {\r\n      //       return this.localePipe.transform(\"no\");\r\n      //     } else {\r\n      //       return this.localePipe.transform(\"yes\");\r\n      //     }\r\n      //   }\r\n      // },\r\n      // { field: \"businessType\", title: this.translateService.instant(\"businessType\"), width: 120 },\r\n      // { field: \"creator\", title: this.translateService.instant(\"creator\"), width: 120 },\r\n      // { field: \"createdTime\", title: this.translateService.instant(\"createdTime\"), width: 120 },\r\n      // { field: \"lastModifier\", title: this.translateService.instant(\"lastModifier\"), width: 120 },\r\n      // {\r\n      //   field: \"lastModifiedTime\", title: this.localePipe.transform(\"lastModifiedTime\"), width: 120, sortable: true,\r\n      //   formatter: {\r\n      //     type: 'datetime',\r\n      //     options: {\r\n      //       format: 'YYYY-MM-DD HH:mm:ss'\r\n      //     }\r\n      //   },\r\n      // },\r\n    ];\r\n  }\r\n\r\n  private createDefaultQueryParam() {\r\n    const queryParam = {\r\n      filterArgs: new ProcessFilterConditionArgs(),\r\n      filterArgsExt: {}\r\n    };\r\n\r\n    queryParam.filterArgs.pageSize = this.defaultPageSize;\r\n    queryParam.filterArgs.pageIndex = 0;\r\n    queryParam.filterArgs.OrderByLastModifiedTime = new TextValue();\r\n    queryParam.filterArgs.OrderByLastModifiedTime.value = OrderByDirection.Desc;\r\n    queryParam.filterArgs.OrderByLastModifiedTime.hasValue = true;\r\n    queryParam.filterArgs.billProcessType = new TextValue();\r\n    queryParam.filterArgs.billProcessType.value = BifMetadataType.BifCreationProcess;\r\n    queryParam.filterArgs.billProcessType.hasValue = true;\r\n    queryParam.filterArgs.isEnabled = new TextValue();\r\n    queryParam.filterArgs.isEnabled.value = \"true\";\r\n    queryParam.filterArgs.isEnabled.hasValue = true;\r\n\r\n\r\n    return queryParam;\r\n  }\r\n}\r\n","import { Component, OnInit, HostBinding, Input, Output, EventEmitter, ViewChild, TemplateRef, ComponentFactoryResolver, Injector } from '@angular/core';\r\nimport { TypeConverter } from '@farris/ui-property-panel';\r\nimport { CallActivitySubProcess } from '../call-activity-sub-process/call-activity-sub-process.entity';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { ProcessDeUtil } from '../../domain/process-de-util';\r\nimport { HttpService } from '@ecp-caf/caf-common';\r\nimport { Observable } from 'rxjs';\r\nimport { ProcessDesignerUIState } from '../../app/process-designer.uistate';\r\nimport { ExpressionService, InjectedType } from '@gsp-svc/expression';\r\nimport { ComboListComponent } from '@farris/ui-combo-list';\r\nimport { FarrisRadioGroupComponent } from '@farris/ui-forms';\r\nimport { IRtShowEntity } from '../../aif-process-list-help/entity/IRtShowEntity';\r\nimport { ProcessListHelpComponent } from '../../aif-process-list-help/components/process-list-help/process-list-help.component';\r\nimport { NotifyService } from '@farris/ui-notify';\r\nimport { BsModalService } from '@farris/ui-modal';\r\nimport { SubProcessType } from '../call-activity-sub-process/SubProcessType';\r\nimport { BillSourceType } from '../call-activity-sub-process/BillSourceType';\r\n\r\n@Component({\r\n  selector: 'lib-call-activity-sub-process2',\r\n  templateUrl: './call-activity-sub-process2.component.html',\r\n})\r\nexport class CallActivitySubProcess2Component implements OnInit {\r\n  @HostBinding('class')\r\n  cls = 'farris-main-area flex-column';\r\n\r\n  @Input() editorParams: {\r\n    bizTypeId?: string\r\n  } = {};\r\n\r\n  @Input() set value(v: CallActivitySubProcess) {\r\n    if (v) {\r\n      this.callActivitySubProcess = v;\r\n      // ä¸ºå­æµç¨ç±»åèµå¼\r\n      if (this.callActivitySubProcess.calledElement == null || this.callActivitySubProcess.calledElement == \"\") {\r\n        if (this.callActivitySubProcess.calledBizDefKey == null || this.callActivitySubProcess.calledBizDefKey == \"\") {\r\n          this.callActivitySubProcess.subProcessType = SubProcessType.Specified;\r\n        } else {\r\n          this.callActivitySubProcess.subProcessType = SubProcessType.Dynamic;\r\n        }\r\n      } else {\r\n        this.callActivitySubProcess.subProcessType = SubProcessType.Specified;\r\n      }\r\n      // ä¸ºåæ®æ¥æºç±»åèµå¼\r\n      if (this.callActivitySubProcess.inheritBizDataId === true) {\r\n        this.callActivitySubProcess.billSourceType = BillSourceType.InheritParent;\r\n      } else if (this.callActivitySubProcess.inheritBizDataId === false && this.callActivitySubProcess.useAutoCreationData === false) {\r\n        this.callActivitySubProcess.billSourceType = BillSourceType.VariablesExpression;\r\n      } else if (this.callActivitySubProcess.inheritBizDataId === false && this.callActivitySubProcess.useAutoCreationData === true) {\r\n        this.callActivitySubProcess.billSourceType = BillSourceType.AutoCreation;\r\n      }\r\n      this.getProcessDefKey(this.callActivitySubProcess.calledElement);\r\n      this.getFlowForm(this.callActivitySubProcess.calledBizDefKey);\r\n      this.getAifProcessName(this.callActivitySubProcess.aifProcessCode);\r\n    }\r\n  }\r\n  @Output() closeModal = new EventEmitter<any>();\r\n  @Output() submitModal = new EventEmitter<any>();\r\n\r\n  @ViewChild('iconSelectFooter') modalFooter: TemplateRef<any>;\r\n  modalConfig = {\r\n    title: 'å­æµç¨è®¾ç½®',\r\n    width: 480,\r\n    height: 400,\r\n    showButtons: true\r\n  };\r\n\r\n  callActivitySubProcess: CallActivitySubProcess = new CallActivitySubProcess();\r\n\r\n  groupIcon = '<i class=\"f-icon f-icon-lookup\"></i>';\r\n\r\n  readonly subProcessType = SubProcessType;\r\n  readonly billSourceType = BillSourceType;\r\n  // @ViewChild(\"comboProcessType\")\r\n  // comboProcessType: ComboListComponent;\r\n  // comboProcessTypeIdField = \"value\";\r\n  // comboProcessTypeValueField = \"value\";\r\n  // comboProcessTypeTextField = \"text\";\r\n  // comboProcessTypeData = [\r\n  //   { value: \"Specified\", text: \"æå®å­æµç¨\" },\r\n  //   { value: \"Dynamic\", text: \"å¨æå­æµç¨\" },\r\n  // ];\r\n\r\n  // @ViewChild(\"comboBillSource\")\r\n  // comboBillSource: ComboListComponent;\r\n  // comboBillSourceIdField = \"value\";\r\n  // comboBillSourceValueField = \"value\";\r\n  // comboBillSourceTextField = \"text\";\r\n  // comboBillSourceData = [\r\n  //   { value: BillSourceType.InheritParent, text: 'ä¸ç¶æµç¨ç¸å' },\r\n  //   { value: BillSourceType.AutoCreation, text: 'èªå¨çæä¸æ¸¸åæ®' },\r\n  //   { value: BillSourceType.VariablesExpression, text: 'åéè¡¨è¾¾å¼' },\r\n  // ];\r\n\r\n  @ViewChild(\"radioGroupProcessType\")\r\n  radioGroupProcessType: FarrisRadioGroupComponent;\r\n  radioGroupProcessTypeData = [\r\n    { value: \"Specified\", name: \"æå®å­æµç¨\" },\r\n    { value: \"Dynamic\", name: \"å¨æå­æµç¨\" },\r\n  ];\r\n\r\n  @ViewChild(\"radioGroupBillSource\")\r\n  radioGroupBillSource: FarrisRadioGroupComponent;\r\n  radioGroupBillSourceData = [\r\n    { value: BillSourceType.InheritParent, name: 'ä¸ç¶æµç¨ç¸å' },\r\n    { value: BillSourceType.AutoCreation, name: 'èªå¨çæä¸æ¸¸åæ®' },\r\n    { value: BillSourceType.VariablesExpression, name: 'åéè¡¨è¾¾å¼' },\r\n  ];\r\n\r\n  constructor(\r\n    private notify: NotifyService,\r\n    private modalService: BsModalService,\r\n    private message: MessagerService,\r\n    private util: ProcessDeUtil,\r\n    private http: HttpService,\r\n    private designerState: ProcessDesignerUIState,\r\n    private expr: ExpressionService,\r\n    private cfr: ComponentFactoryResolver,\r\n    private inj: Injector,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n\r\n  clickOK() {\r\n    if (this.validator()) {\r\n      const object = { value: this.callActivitySubProcess, parameters: null };\r\n      this.submitModal.emit(object);\r\n    }\r\n  }\r\n\r\n  clickCancel() {\r\n    this.closeModal.emit();\r\n  }\r\n\r\n  processConfirm(args: any) {\r\n    if (args) {\r\n      this.callActivitySubProcess.calledElement = args.id;\r\n      this.callActivitySubProcess.calledElementName = args.name;\r\n    }\r\n  }\r\n\r\n  processTypeChange(val) {\r\n    console.log(val);\r\n    if (val == SubProcessType.Specified) {\r\n      this.callActivitySubProcess.calledBizDefKey = null;\r\n      this.callActivitySubProcess.calledBizDefName = null;\r\n    } else if (val == SubProcessType.Dynamic) {\r\n      this.callActivitySubProcess.calledElement = null;\r\n      this.callActivitySubProcess.calledElementName = null;\r\n    }\r\n  }\r\n\r\n  billSourceChange(val) {\r\n    console.log(val);\r\n    if (val == BillSourceType.InheritParent) {\r\n      this.callActivitySubProcess.inheritBizDataId = true;\r\n      this.callActivitySubProcess.useAutoCreationData = false;\r\n    } else if (val == BillSourceType.AutoCreation) {\r\n      this.callActivitySubProcess.inheritBizDataId = false;\r\n      this.callActivitySubProcess.useAutoCreationData = true;\r\n    } else if (val == BillSourceType.VariablesExpression) {\r\n      this.callActivitySubProcess.inheritBizDataId = false;\r\n      this.callActivitySubProcess.useAutoCreationData = false;\r\n    }\r\n  }\r\n\r\n  selectProcess() {\r\n    this.openProcHelp().subscribe(\r\n      (rte: IRtShowEntity) => {\r\n        if (rte == null) {\r\n          this.notify.warning(\"è¯·éä¸­ä¸æ¡çåæµç¨\");\r\n          return;\r\n        }\r\n        this.callActivitySubProcess.aifProcessCode = rte.code;\r\n        this.callActivitySubProcess.aifProcessName = rte.name;\r\n      }\r\n    );\r\n  }\r\n\r\n  clearProcess() {\r\n    this.callActivitySubProcess.aifProcessCode = null;\r\n    this.callActivitySubProcess.aifProcessName = null;\r\n  }\r\n\r\n  openProcHelp() {\r\n    const cmpF = this.cfr.resolveComponentFactory(ProcessListHelpComponent);\r\n    const cmpR = cmpF.create(this.inj, []);\r\n    cmpR.instance.editorParams = this.editorParams;\r\n    const modalRef = this.modalService.show(cmpR, {\r\n      title: \"çåæµç¨\",\r\n      width: 1250,\r\n      height: 500,\r\n      resizable: true,\r\n      buttons: [\r\n        {\r\n          text: \"ç¡®å®\",\r\n          cls: \"btn btn-primary\",\r\n          handle: (evt) => {\r\n            cmpR.instance.clickOk(evt);\r\n            modalRef.close();\r\n          }\r\n        },\r\n        {\r\n          text: \"åæ¶\",\r\n          cls: \"btn btn-secondary\",\r\n          handle: (evt) => {\r\n            cmpR.instance.clickCancel(evt);\r\n            modalRef.close();\r\n          }\r\n        }\r\n      ],\r\n      closed: () => {\r\n        modalRef.dialog.destroy();\r\n      }\r\n    });\r\n    cmpR.instance.modalRef = modalRef;\r\n\r\n    return cmpR.instance.procEmitter.asObservable();\r\n  }\r\n\r\n  clearProcessDef(args: any) {\r\n    this.callActivitySubProcess.calledElement = '';\r\n    this.callActivitySubProcess.calledElementName = '';\r\n  }\r\n\r\n  flowFormConfirm(args: any) {\r\n    if (args) {\r\n      this.callActivitySubProcess.calledBizDefKey = args.id;\r\n      this.callActivitySubProcess.calledBizDefName = args.name;\r\n    }\r\n  }\r\n  clearFlowForm(args: any) {\r\n    this.callActivitySubProcess.calledBizDefKey = '';\r\n    this.callActivitySubProcess.calledBizDefName = '';\r\n  }\r\n\r\n  setBizDataId() {\r\n    this.showExprHelp();\r\n  }\r\n\r\n  private showExprHelp() {\r\n    if (this.designerState.schemas.length > 0) {\r\n      for (const schema of this.designerState.schemas) {\r\n        this.expr.addSchema('Schema', schema);\r\n      }\r\n      if (this.designerState.schemas[0].entityTypes && this.designerState.schemas[0].entityTypes.length > 0) {\r\n        const entityType = this.designerState.schemas[0].entityTypes[0];\r\n        this.expr.addInjectedEntity(entityType.name, 'Schema',\r\n          entityType.name, InjectedType.EntityType);\r\n      }\r\n    }\r\n    const context = new Array();\r\n    if (this.designerState.procInstContext.length > 0) {\r\n      for (const variable of this.designerState.procInstContext) {\r\n        context.push(variable);\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (this.designerState.formalParameterContext.length > 0) {\r\n      for (const variable of this.designerState.formalParameterContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (this.designerState.participantContext.length > 0) {\r\n      for (const variable of this.designerState.participantContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (this.designerState.processVariableContext.length > 0) {\r\n      for (const variable of this.designerState.processVariableContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (context.length > 0) {\r\n      for (const v of context) {\r\n        this.expr.addContext(v);\r\n      }\r\n    }\r\n    this.expr.addExpressionText(this.callActivitySubProcess.bizDataId);\r\n    this.expr.buildExpression().then((expressioninfo: string) => {\r\n      this.callActivitySubProcess.bizDataId = expressioninfo;\r\n    });\r\n  }\r\n\r\n  valueChange(bool: boolean) {\r\n    if (bool) {\r\n      this.callActivitySubProcess.bizDataId = null;\r\n    }\r\n  }\r\n\r\n  private validator(): boolean {\r\n    if (!this.callActivitySubProcess.inheritBizDataId && !this.callActivitySubProcess.useAutoCreationData && !this.callActivitySubProcess.bizDataId) {\r\n      this.message.warning('å½å­æµç¨ä¸ç¶æµç¨åæ®ä¸ä¸è´æ¶ï¼è¯·è®¾ç½®å­æµç¨åæ®åç ï¼');\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  private getProcessDefKey(key: string) {\r\n    let url = this.util.getProcDefKeyWebApi();\r\n    if (key) {\r\n      url += `/${key}`;\r\n      this.http.get(url).subscribe((re: any) => {\r\n        this.callActivitySubProcess.calledElementName = re.name;\r\n      });\r\n    }\r\n  }\r\n  private getFlowForm(id: string) {\r\n    let url = this.util.getFlowFormWebApi();\r\n    if (id) {\r\n      url += `/${id}`;\r\n      this.http.get(url).subscribe((re: any) => {\r\n        this.callActivitySubProcess.calledBizDefName = re.name;\r\n      });\r\n    }\r\n  }\r\n\r\n  getAifProcessName(code: string) {\r\n    if (code != null && code != \"\") {\r\n      this.http.request(\"GET\", `/api/runtime/aif/v1.0/rtbillcreationprocess/getname/${code}`, { responseType: 'text' }).subscribe(\r\n        (res: any) => {\r\n          this.callActivitySubProcess.aifProcessName = res;\r\n        },\r\n        (err) => {\r\n          setTimeout(() => {\r\n            //todo ç¡®å®å¼å¸¸ç»æ, ç®åéç¨å¼å®¹åå¼æ¹å¼\r\n            this.message.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));\r\n          }, 300);\r\n          throw err;\r\n        });\r\n    }\r\n  }\r\n}\r\n\r\n\r\nexport class CallActivitySubProcess2Converter implements TypeConverter {\r\n  constructor() { }\r\n\r\n  convertTo(data: any): string {\r\n    if (data && (data.calledBizDefKey || data.calledElement)) {\r\n      return 'ï¼å·²è®¾ç½®ï¼';\r\n    }\r\n    return 'ï¼æªè®¾ç½®ï¼';\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { ProcessDesignerUIState } from './process-designer.uistate';\r\nimport { ElementPropertyConfig, PropertyEntity } from '@farris/ui-property-panel';\r\nimport { ResourceKeys } from '../model/resourceKeys';\r\nimport { CallActivitySubProcessComponent, CallActivitySubProcessConverter } from '../views/call-activity-sub-process/call-activity-sub-process.component';\r\nimport { BackwardRuleComponent, BackwardRuleConverter } from '../views/backward-rule/backward-rule.component';\r\nimport { VariableSettingComponent, VariableSettingConverter } from '../views/variable-setting/variable-setting.component';\r\nimport { CallActivitySubProcess2Component, CallActivitySubProcess2Converter } from '../views/call-activity-sub-process2/call-activity-sub-process2.component';\r\n\r\n@Injectable()\r\n\r\nexport class SubProcessViewModel {\r\n    constructor(private uiState: ProcessDesignerUIState) {\r\n\r\n    }\r\n    setProperty(obj: any) {\r\n        this.uiState.propertyData = obj.propertyData;\r\n        this.uiState.propertyConfig = this.setConfig(obj.propertyConfig);\r\n    }\r\n\r\n    private setConfig(obj: any[]): ElementPropertyConfig[] {\r\n        const propertyConfig: ElementPropertyConfig[] = [];\r\n        if (obj) {\r\n            obj.forEach((element: ElementPropertyConfig) => {\r\n                this.setEntity(element.properties);\r\n                propertyConfig.push(element);\r\n            });\r\n        }\r\n        return propertyConfig;\r\n    }\r\n    private setEntity(obj: PropertyEntity[]) {\r\n        if (obj && obj.length > 0) {\r\n            obj.forEach((item: PropertyEntity) => {\r\n                switch (item.propertyID) {\r\n                    case ResourceKeys.callActivitySubProcess: // åä¸è\r\n                        // item.editor = CallActivitySubProcessComponent;\r\n                        // item.converter = new CallActivitySubProcessConverter();\r\n                        item.editor = CallActivitySubProcess2Component;\r\n                        item.converter = new CallActivitySubProcess2Converter();\r\n                        item.editorParams = {\r\n                            bizTypeId: this.uiState.flowFormInfo.flowForm.businessObjectId,\r\n                        };\r\n                        break;\r\n                    case ResourceKeys.BackWardRule:\r\n                        item.editor = BackwardRuleComponent;\r\n                        item.converter = new BackwardRuleConverter();\r\n                        item.editorParams = {\r\n                            nodeType: 'CallActivitySubProcess'\r\n                        };\r\n                        break;\r\n                    case ResourceKeys.variableSettings: // åéè®¾ç½®\r\n                        item.editor = VariableSettingComponent;\r\n                        item.converter = new VariableSettingConverter();\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { ProcessDesignerUIState } from './process-designer.uistate';\r\nimport { ElementPropertyConfig, PropertyEntity } from '@farris/ui-property-panel';\r\nimport { ResourceKeys } from '../model/resourceKeys';\r\nimport { ActivityComponentComponent, ActivityComponentConverter } from '../views/activity-component/activity-component.component';\r\nimport { VariableSettingComponent, VariableSettingConverter } from '../views/variable-setting/variable-setting.component';\r\n\r\n@Injectable()\r\n\r\nexport class AutoActivityAdapter {\r\n    constructor(private uiState: ProcessDesignerUIState) {\r\n\r\n    }\r\n    setProperty(obj: any) {\r\n        this.uiState.propertyData = obj.propertyData;\r\n        this.uiState.propertyConfig = this.setConfig(obj.propertyConfig);\r\n    }\r\n\r\n    private setConfig(obj: any[]): ElementPropertyConfig[] {\r\n        const propertyConfig: ElementPropertyConfig[] = [];\r\n        if (obj) {\r\n            obj.forEach((element: ElementPropertyConfig) => {\r\n                this.setEntity(element.properties);\r\n                propertyConfig.push(element);\r\n            });\r\n        }\r\n        return propertyConfig;\r\n    }\r\n    private setEntity(obj: PropertyEntity[]) {\r\n        if (obj && obj.length > 0) {\r\n            obj.forEach((item: PropertyEntity) => {\r\n                switch (item.propertyID) {\r\n                    case ResourceKeys.Tools: // åä¸è\r\n                        item.editor = ActivityComponentComponent;\r\n                        item.converter = new ActivityComponentConverter();\r\n                        item.editorParams = {\r\n                            location: 'autoActivity'\r\n                        };\r\n                        break;\r\n                    case ResourceKeys.variableSettings: // åéè®¾ç½®\r\n                        item.editor = VariableSettingComponent;\r\n                        item.converter = new VariableSettingConverter();\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n","\r\nexport class EventDefinition {\r\n    Id: string;\r\n    name: string;\r\n    triggerAction = 'Pass';\r\n    Async = false;\r\n    SignalRef: string;\r\n    constructor() { }\r\n}\r\n","import { Component, OnInit, HostBinding, Output, EventEmitter, Input, ViewChild, TemplateRef, Injector } from '@angular/core';\r\nimport { DatagridComponent } from '@farris/ui-datagrid';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { ProcessDeUtil } from '../../domain/process-de-util';\r\nimport { EventDefinition } from './event-definition.entity';\r\nimport { EditorTypes } from '@farris/ui-datagrid-editors';\r\nimport { TypeConverter } from '@farris/ui-property-panel';\r\n\r\n@Component({\r\n  selector: 'lib-event-definition',\r\n  templateUrl: './event-definition.component.html',\r\n  styleUrls: ['./event-definition.component.scss']\r\n})\r\nexport class EventDefinitionComponent implements OnInit {\r\n  @HostBinding('class')\r\n  cls = 'farris-main-area flex-column';\r\n\r\n  @Output() closeModal = new EventEmitter<any>();\r\n  @Output() submitModal = new EventEmitter<any>();\r\n\r\n  @Input()\r\n  set value(items: any[]) {\r\n    if (items && items.length > 0) {\r\n      for (const item of items) {\r\n        const event = new EventDefinition();\r\n        event.Id = item.Id;\r\n        event.name = item.name;\r\n        event.triggerAction = item.triggerAction;\r\n        event.Async = item.Async;\r\n        event.SignalRef = item.SignalRef;\r\n        this.data.push(event);\r\n      }\r\n    }\r\n  }\r\n  @ViewChild('iconSelectFooter') modalFooter: TemplateRef<any>;\r\n  @ViewChild('grid') grid: DatagridComponent;\r\n\r\n  modalConfig = {\r\n    title: 'ä¿¡å·å®ä¹',\r\n    width: 560,\r\n    height: 420,\r\n    showButtons: true\r\n  };\r\n\r\n  triggerActionCollection: any[] = [\r\n    { text: 'æ­£å', value: 'Pass' },\r\n    { text: 'åå', value: 'Back' },\r\n    { text: 'ç»æ­¢', value: 'Abort' }];\r\n\r\n  columns = new Array();\r\n  data = new Array<EventDefinition>();\r\n\r\n  constructor(\r\n    private message: MessagerService,\r\n    private util: ProcessDeUtil,\r\n    private injector: Injector\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.columns = [{\r\n      field: 'SignalRef', width: 100, title: 'ä¿¡å·ç¼å·',\r\n      editor: { type: EditorTypes.TEXTBOX, options: {} },\r\n      validators: [\r\n        { type: 'required', messager: 'å¿å¡«' }\r\n      ]\r\n    },\r\n    {\r\n      field: 'name', width: 100, title: 'ä¿¡å·åç§°',\r\n      editor: { type: EditorTypes.TEXTBOX, options: {} },\r\n      validators: [\r\n        { type: 'required', messager: 'å¿å¡«' }\r\n      ]\r\n    },\r\n    {\r\n      field: 'triggerAction', width: 100, title: 'æµè½¬æ¹å',\r\n      formatter: {\r\n        type: 'enum',\r\n        options: { valueField: 'value', textField: 'text', data: this.triggerActionCollection }\r\n      },\r\n      editor: {\r\n        type: EditorTypes.COMBOLIST,\r\n        options: { valueField: 'value', textField: 'text', data: this.triggerActionCollection, idField: 'value', panelHeight: 'auto', showClear: false }\r\n      },\r\n      validators: [\r\n        { type: 'required', messager: 'å¿å¡«' }\r\n      ]\r\n    }];\r\n  }\r\n  add() {\r\n    const event = new EventDefinition();\r\n    event.Id = ProcessDeUtil.GenerateElementId();\r\n    this.data.push(event);\r\n    this.grid.loadData(this.data);\r\n  }\r\n  delete() {\r\n    this.grid.endCellEdit();\r\n    if (this.grid.selectedRow && this.grid.selectedRow.data) {\r\n      const i = this.data.findIndex(d => d.Id === this.grid.selectedRow.data.Id);\r\n      this.data.splice(i, 1);\r\n      this.grid.loadData(this.data);\r\n    } else {\r\n      this.message.info('å°æªéä¸­ä¸æ¡è§¦åäºä»¶ï¼');\r\n    }\r\n  }\r\n\r\n  clickOK() {\r\n    this.grid.endCellEdit();\r\n    if (this.validator()) {\r\n      const object = { value: this.data, parameters: null };\r\n      this.submitModal.emit(object);\r\n    }\r\n\r\n  }\r\n\r\n  clickCancel() {\r\n    this.closeModal.emit();\r\n  }\r\n\r\n  private validator(): boolean {\r\n    if (this.data.length === 0) {\r\n      this.message.info('è³å°éè¦ä¸ä¸ªä¿¡å·å®ä¹ï¼è¯·äºè§£ï¼');\r\n      return false;\r\n    } else {\r\n      for (const d of this.data) {\r\n        if (!d.SignalRef) {\r\n          this.message.info('ä¿¡å·ç¼å·ä¸åè®¸ä¸ºç©ºï¼');\r\n          return false;\r\n        } else if (!d.name) {\r\n          this.message.info('ä¿¡å·åç§°ä¸åè®¸ä¸ºç©ºï¼');\r\n          return false;\r\n        }\r\n      }\r\n      if (this.data.length > 1) {\r\n        for (let i = 0; i < this.data.length; i++) {\r\n          const code1 = this.data[i].SignalRef;\r\n          for (let j = i + 1; j < this.data.length; j++) {\r\n            const code2 = this.data[j].SignalRef;\r\n\r\n            if (code1 === code2) {\r\n              this.message.warning(`ä¿¡å·ç¼å·ä¸åè®¸éå¤ï¼`);\r\n              return false;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n}\r\n\r\nexport class EventDefinitionConverter implements TypeConverter {\r\n  constructor() { }\r\n\r\n  convertTo(data: any[]): string {\r\n    if (data && data.length > 0) {\r\n      return 'ï¼å·²è®¾ç½®ï¼';\r\n    } else {\r\n      return 'ï¼æªè®¾ç½®ï¼';\r\n    }\r\n  }\r\n}\r\n","import { ProcessDesignerUIState } from './process-designer.uistate';\r\nimport { Injectable, Injector } from '@angular/core';\r\nimport { ElementPropertyConfig, PropertyEntity } from '@farris/ui-property-panel';\r\nimport { ResourceKeys } from '../model/resourceKeys';\r\nimport { BackwardRuleComponent, BackwardRuleConverter } from '../views/backward-rule/backward-rule.component';\r\nimport { EventDefinitionComponent, EventDefinitionConverter } from '../views/event-definition/event-definition.component';\r\nimport { VariableSettingComponent, VariableSettingConverter } from '../views/variable-setting/variable-setting.component';\r\n\r\n@Injectable()\r\n\r\nexport class CatchEventAdapter {\r\n    constructor(\r\n        private uiState: ProcessDesignerUIState,\r\n        private injector: Injector\r\n    ) { }\r\n    setProperty(obj: any) {\r\n        this.uiState.propertyData = obj.propertyData;\r\n        this.uiState.propertyConfig = this.setConfig(obj.propertyConfig);\r\n    }\r\n\r\n    private setConfig(obj: any[]): ElementPropertyConfig[] {\r\n        const propertyConfig: ElementPropertyConfig[] = [];\r\n        if (obj) {\r\n            obj.forEach((element: ElementPropertyConfig) => {\r\n                this.setEntity(element.properties);\r\n                propertyConfig.push(element);\r\n            });\r\n        }\r\n        return propertyConfig;\r\n    }\r\n    private setEntity(obj: PropertyEntity[]) {\r\n        if (obj && obj.length > 0) {\r\n            obj.forEach((item: PropertyEntity) => {\r\n                switch (item.propertyID) {\r\n                    case ResourceKeys.BackWardRule:\r\n                        item.editor = BackwardRuleComponent;\r\n                        item.converter = new BackwardRuleConverter();\r\n                        item.editorParams = {\r\n                            nodeType: 'CallActivitySubProcess'\r\n                        };\r\n                        break;\r\n                    case ResourceKeys.eventDefinitions:\r\n                        item.editor = EventDefinitionComponent;\r\n                        item.converter = new EventDefinitionConverter();\r\n                        break;\r\n                    case ResourceKeys.variableSettings: // åéè®¾ç½®\r\n                        item.editor = VariableSettingComponent;\r\n                        item.converter = new VariableSettingConverter();\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { ProcessDesignerUIState } from './process-designer.uistate';\r\nimport { ElementPropertyConfig, PropertyEntity } from '@farris/ui-property-panel';\r\nimport { ResourceKeys } from '../model/resourceKeys';\r\nimport { MessageNoticeComponent, MessageNoticeConverter } from '../views/message-notice/message-notice.component';\r\nimport { VariableSettingComponent, VariableSettingConverter } from '../views/variable-setting/variable-setting.component';\r\n\r\n@Injectable()\r\n\r\nexport class MessageActivityAdapter {\r\n    constructor(private uiState: ProcessDesignerUIState) {\r\n\r\n    }\r\n    setProperty(obj: any) {\r\n        this.uiState.propertyData = obj.propertyData;\r\n        this.uiState.propertyConfig = this.setConfig(obj.propertyConfig);\r\n    }\r\n\r\n    private setConfig(obj: any[]): ElementPropertyConfig[] {\r\n        const propertyConfig: ElementPropertyConfig[] = [];\r\n        if (obj) {\r\n            obj.forEach((element: ElementPropertyConfig) => {\r\n                this.setEntity(element.properties);\r\n                propertyConfig.push(element);\r\n            });\r\n        }\r\n        return propertyConfig;\r\n    }\r\n    private setEntity(obj: PropertyEntity[]) {\r\n        if (obj && obj.length > 0) {\r\n            obj.forEach((item: PropertyEntity) => {\r\n                switch (item.propertyID) {\r\n                    case ResourceKeys.messageNotice: // åä¸è\r\n                        item.editor = MessageNoticeComponent;\r\n                        item.converter = new MessageNoticeConverter();\r\n                        item.editorParams = {\r\n                            location: 'messageActivity'\r\n                        };\r\n                        break;\r\n                    case ResourceKeys.variableSettings: // åéè®¾ç½®\r\n                        item.editor = VariableSettingComponent;\r\n                        item.converter = new VariableSettingConverter();\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n","export class AuditProcessDefInfo {\r\n    auditId: AuditEvent;\r\n    success: boolean;\r\n    processDefKey: string;\r\n}\r\n\r\nexport enum AuditEvent {\r\n    WF_ProcessDef_SaveDT = 'WF_ProcessDef_SaveDT',\r\n    WF_ProcessDef_SaveRT = 'WF_ProcessDef_SaveRT',\r\n    WF_ProcessDef_Deploy = 'WF_ProcessDef_Deploy',\r\n    WF_ProcessDef_Import = 'WF_ProcessDef_Import',\r\n    WF_ProcessDef_Export = 'WF_ProcessDef_Export',\r\n    WF_ProcessDef_SyncDT = 'WF_ProcessDef_SyncDT'\r\n}\r\n","export class ProcessInfo {\r\n    /**\r\n     * ä¸å¡æ´»å¨ID\r\n     */\r\n    bizObjId: string;\r\n    /**\r\n     * Key\r\n     */\r\n    processKey: string;\r\n    /**\r\n     * æµç¨åç§°\r\n     */\r\n    processName: string;\r\n    /**\r\n     * æµç¨ç¼å·\r\n     */\r\n    processCode: string;\r\n    /**\r\n     * æµç¨åç±»ID\r\n     */\r\n    flowFormId: string;\r\n    /**\r\n     * æµç¨åç±»åç§°\r\n     */\r\n    flowFormName: string;\r\n    /**\r\n     * æµç¨ç±»å\r\n     */\r\n    startMode?: string;\r\n    /**\r\n     * æµç¨ç»ç»\r\n     */\r\n    procOrg?: ProcessOrganization;\r\n    /**\r\n     * è®¿é®çº§å«\r\n     */\r\n    accessLevel?: string;\r\n}\r\n\r\n\r\nexport class ProcessOrganization {\r\n    orgName: string;\r\n    orgId: string;\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { ProcessDesignerUIState } from './process-designer.uistate';\r\nimport { ElementPropertyConfig, PropertyEntity } from '@farris/ui-property-panel';\r\nimport { ResourceKeys } from '../model/resourceKeys';\r\nimport { MessageNoticeComponent, MessageNoticeConverter } from '../views/message-notice/message-notice.component';\r\nimport { PerformerComponent, PerformerConverter } from '../views/performer/performer.component';\r\nimport { ExecuteFormsComponent, ExecuteFormsConverter } from '../views/execute-forms/execute-forms.component';\r\nimport { ExtendPropertyComponent, ExtendPropertyConverter } from '../views/extend-property/extend-property.component';\r\n\r\n@Injectable()\r\nexport class NotifyActivityAdapter {\r\n    constructor(private uiState: ProcessDesignerUIState) {\r\n\r\n    }\r\n    setProperty(obj: any) {\r\n        this.uiState.propertyData = obj.propertyData;\r\n        this.uiState.propertyConfig = this.setConfig(obj.propertyConfig);\r\n    }\r\n\r\n    private setConfig(obj: any[]): ElementPropertyConfig[] {\r\n        const propertyConfig: ElementPropertyConfig[] = [];\r\n        if (obj) {\r\n            obj.forEach((element: ElementPropertyConfig) => {\r\n                this.setEntity(element.properties);\r\n                propertyConfig.push(element);\r\n            });\r\n        }\r\n        return propertyConfig;\r\n    }\r\n    private setEntity(obj: PropertyEntity[]) {\r\n        if (obj && obj.length > 0) {\r\n            obj.forEach((item: PropertyEntity) => {\r\n                switch (item.propertyID) {\r\n                    case ResourceKeys.ParticipantSchemes: // åä¸è\r\n                        item.editor = PerformerComponent;\r\n                        item.converter = new PerformerConverter();\r\n                        break;\r\n                    case ResourceKeys.wf_ExecuteForms_PC: // è¡¨åå®ä¹\r\n                        item.editor = ExecuteFormsComponent;\r\n                        item.converter = new ExecuteFormsConverter();\r\n                        item.editorParams = {\r\n                            location: 'notifyActivity',\r\n                            tab: 'web'\r\n                        };\r\n                        break;\r\n                    case ResourceKeys.wf_ExecuteForms_Mobile: // è¡¨åå®ä¹\r\n                        item.editor = ExecuteFormsComponent;\r\n                        item.converter = new ExecuteFormsConverter();\r\n                        item.editorParams = {\r\n                            location: 'notifyActivity',\r\n                            tab: 'mobile'\r\n                        };\r\n                        break;\r\n                    case ResourceKeys.messageNotice: // æ¶æ¯éç¥\r\n                        item.editor = MessageNoticeComponent;\r\n                        item.converter = new MessageNoticeConverter();\r\n                        item.editorParams = {\r\n                            location: 'activity'\r\n                        };\r\n                        break;\r\n                    default:\r\n                        item.editor = ExtendPropertyComponent;\r\n                        item.converter = new ExtendPropertyConverter();\r\n                        break;\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n","import { TypeConverter } from \"@farris/ui-property-panel\";\r\n\r\nexport class AifCreationBillProcessConverter implements TypeConverter {\r\n    constructor() { }\r\n\r\n    convertTo(data): string {\r\n        if (data) {\r\n            return data.name || data.code || 'ï¼å·²è®¾ç½®ï¼';\r\n        } else {\r\n            return 'ï¼æªè®¾ç½®ï¼';\r\n        }\r\n    }\r\n}","import { Injectable } from '@angular/core';\r\nimport { ProcessDesignerUIState } from './process-designer.uistate';\r\nimport { ElementPropertyConfig, PropertyEntity } from '@farris/ui-property-panel';\r\nimport { ResourceKeys } from '../model/resourceKeys';\r\nimport { ProcessListHelpComponent } from '../aif-process-list-help/components/process-list-help/process-list-help.component';\r\nimport { AifCreationBillProcessConverter } from '../aif-process-list-help/AifCreationBillProcessConverter';\r\n\r\n@Injectable()\r\nexport class AifCreationBillActivityAdapter {\r\n    constructor(private uiState: ProcessDesignerUIState) {\r\n\r\n    }\r\n    setProperty(obj: any) {\r\n        this.uiState.propertyData = obj.propertyData;\r\n        this.uiState.propertyConfig = this.setConfig(obj.propertyConfig);\r\n    }\r\n\r\n    private setConfig(obj: any[]): ElementPropertyConfig[] {\r\n        const propertyConfig: ElementPropertyConfig[] = [];\r\n        if (obj) {\r\n            obj.forEach((element: ElementPropertyConfig) => {\r\n                this.setEntity(element.properties);\r\n                propertyConfig.push(element);\r\n            });\r\n        }\r\n        return propertyConfig;\r\n    }\r\n    private setEntity(obj: PropertyEntity[]) {\r\n        if (obj && obj.length > 0) {\r\n            obj.forEach((item: PropertyEntity) => {\r\n                switch (item.propertyID) {\r\n                    case ResourceKeys.aifProcessCode: // åæ®æµç¼å·\r\n                        item.editor = ProcessListHelpComponent;\r\n                        item.converter = new AifCreationBillProcessConverter();\r\n                        item.editorParams = {\r\n                            bizTypeId: this.uiState.flowFormInfo.flowForm.businessObjectId\r\n                        };\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n","import { Injectable, Injector, ComponentFactoryResolver } from '@angular/core';\r\nimport { ProcessDesignerUIState } from './process-designer.uistate';\r\nimport { ProcessDesignerDataService } from '../domain/process-designer.dataservice';\r\nimport { forkJoin } from 'rxjs/observable/forkJoin';\r\nimport { Observable } from 'rxjs/observable';\r\nimport { ProcessClrTypeID } from '../model/process-clrtypeId';\r\nimport { BpmnProcessViewModel } from './bpmn-process.viewmodel';\r\nimport { WFFlowElementsViewModel } from './wf-flowElements.viewModel';\r\nimport { NotifyService, NotifyOptions } from '@farris/ui-notify';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { map, switchMap } from 'rxjs/operators';\r\nimport { FlowFormInfo } from '../domain/entities/flowform-info';\r\nimport { of, Subject, from } from 'rxjs';\r\nimport { BsModalService } from '@farris/ui-modal';\r\nimport { SaveAsEditComponent } from '../views/save-as-edit/save-as-edit.component';\r\nimport { ProcessDeUtil } from '../domain/process-de-util';\r\nimport { HttpErrorResponse } from '@angular/common/http';\r\nimport { SubProcessViewModel } from './sub-process.viewmodel';\r\nimport { AutoActivityAdapter } from './auto-activity.adapter';\r\nimport { CatchEventAdapter } from './catch-event.adapter';\r\nimport { MessageActivityAdapter } from './message-activity.adapter';\r\nimport { AuditEvent, AuditProcessDefInfo } from '../domain/entities/audit-processDef-info';\r\nimport { RTProcessInfo } from '../model/rt-process-info';\r\nimport { HttpService } from '@ecp-caf/caf-common';\r\nimport { ProcessInfo } from '../model/process-info';\r\nimport { NotifyActivityAdapter } from './notify-activity.adapter';\r\nimport { FlowFormEntity } from '../domain/entities/flowform.entity';\r\nimport { AifCreationBillActivityAdapter } from './aif-creation-bill-activity.adapter';\r\n\r\n\r\n@Injectable()\r\n\r\nexport class ProcessDesignerViewModel {\r\n\r\n    constructor(\r\n        public uiState: ProcessDesignerUIState,\r\n        private service: ProcessDesignerDataService,\r\n        private util: ProcessDeUtil,\r\n        private notify: NotifyService,\r\n        private message: MessagerService,\r\n        private process: BpmnProcessViewModel,\r\n        private activity: WFFlowElementsViewModel,\r\n        private subProcess: SubProcessViewModel,\r\n        private autoActAdapter: AutoActivityAdapter,\r\n        private catchEventAdapter: CatchEventAdapter,\r\n        private messageActAdapter: MessageActivityAdapter,\r\n        private notifyActAdapter: NotifyActivityAdapter,\r\n        private creationActAdapter: AifCreationBillActivityAdapter,\r\n        private modalService: BsModalService,\r\n        private injector: Injector,\r\n        private resolver: ComponentFactoryResolver,\r\n        private http: HttpService\r\n    ) { }\r\n\r\n    // åå§å è½½æµç¨å±æ§\r\n    initProcessProperty(obj: any) {\r\n        const pptData = obj.propertyData;\r\n        const ffId = pptData.EntryForm;\r\n        if (ffId) {\r\n            pptData.EntryForm = this.uiState.flowFormInfo.flowForm;\r\n            this.uiState.propertyConfig = this.process.setProcessConfig(obj.propertyConfig);\r\n            this.uiState.propertyData = pptData;\r\n        } else {\r\n            this.uiState.propertyConfig = this.process.setProcessConfig(obj.propertyConfig);\r\n            this.uiState.propertyData = pptData;\r\n        }\r\n    }\r\n    setProperty(obj: any) {\r\n        // æ´æ°å±æ§æ¡æ°æ®ä¸éç½®\r\n        const propertyData = obj.propertyData;\r\n        switch (propertyData.ClrTypeID) {\r\n            case ProcessClrTypeID.process:\r\n                this.process.setProcessProperty(obj);\r\n                break;\r\n            case ProcessClrTypeID.userActivity:\r\n                this.activity.setUserActivityProperty(obj);\r\n                break;\r\n            case ProcessClrTypeID.subProcess:\r\n                this.subProcess.setProperty(obj);\r\n                break;\r\n            case ProcessClrTypeID.autoActivity:\r\n                this.autoActAdapter.setProperty(obj);\r\n                break;\r\n            case ProcessClrTypeID.catchEvent:\r\n                this.catchEventAdapter.setProperty(obj);\r\n                break;\r\n            case ProcessClrTypeID.operationActivity:\r\n                this.activity.setUserActivityProperty(obj);\r\n                break;\r\n            case ProcessClrTypeID.messageActivity:\r\n                this.messageActAdapter.setProperty(obj);\r\n                break;\r\n            case ProcessClrTypeID.notifyActivity:\r\n                this.notifyActAdapter.setProperty(obj);\r\n                break;\r\n                case ProcessClrTypeID.aifCreationBillActivity:\r\n                    this.creationActAdapter.setProperty(obj);\r\n                    break;\r\n            default:\r\n                this.activity.setFlowElementProperty(obj);\r\n                break;\r\n        }\r\n    }\r\n    public updateSchemas() {\r\n        this.uiState.schemas = [];\r\n        if (this.uiState.flowFormInfo.formalParameters && this.uiState.flowFormInfo.formalParameters.length > 0) {\r\n            const schemaParams = this.uiState.flowFormInfo.formalParameters.filter(p => p.dataType === 'CDTSchema' && p.schemaMetadataId);\r\n            forkJoin(schemaParams.map(para => {\r\n                return this.service.getBusinessEntitybyId(para.schemaMetadataId);\r\n            })).subscribe(data => {\r\n                if (data && data.length > 0) {\r\n                    data.forEach((d: any) => {\r\n                        this.uiState.schemas.push(d);\r\n                    });\r\n                }\r\n            }, err => {\r\n                this.uiState.schemas = [];\r\n            });\r\n        } else {\r\n            this.uiState.schemas = [];\r\n        }\r\n    }\r\n\r\n    public getFlowFormInfoById(formId: string): Observable<FlowFormInfo> {\r\n        const $flowform = new Subject<FlowFormInfo>();\r\n        if (formId) {\r\n            forkJoin(this.service.GetFlowFormbyId(formId),\r\n                this.service.getParametersbyFlowFormKey(formId).pipe(\r\n                    map((params: any[]) => {\r\n                        this.setFormParamCxt(params);\r\n                        return params;\r\n                    })\r\n                ),\r\n                this.service.getComponentsbyFlowformkey(formId),\r\n                this.service.getExecuteFormbyFlowFormKey(formId),\r\n                this.service.getBizActivities(formId),\r\n                this.service.getCustomizeActions(formId)\r\n            ).subscribe((re: any[]) => {\r\n                const flowform = new FlowFormInfo();\r\n                flowform.flowForm = re[0];\r\n                flowform.formalParameters = re[1];\r\n                flowform.bizComponents = re[2].filter(cmp => cmp.ownerType !== 'Activity');\r\n                flowform.excuteForms = re[3];\r\n                flowform.bizActivities = re[4];\r\n                flowform.customizeActions = re[5];\r\n                this.uiState.flowFormInfo = flowform;\r\n                // this.updateCOs();\r\n                this.updateSchemas();\r\n                $flowform.next(flowform);\r\n            });\r\n        }\r\n        return $flowform.asObservable();\r\n    }\r\n\r\n    public getFormFormatsByBizCategory(): Observable<any> {\r\n        if (this.uiState.flowFormInfo.flowForm.businessObjectId) {\r\n            let url = `/api/runtime/wf/v1.0/formFormat/query?param=`;\r\n            let param = `{\"bizCategory\":\"${this.uiState.flowFormInfo.flowForm.businessObjectId}\"}`;\r\n            param = encodeURIComponent(param);\r\n            url += param;\r\n            return this.http.get(url);\r\n        } else {\r\n            return from(new Array());\r\n        }\r\n    }\r\n    /**\r\n     * ä¿å­æµç¨\r\n     * @param content æµç¨ä¸ä¸æ\r\n     */\r\n    saveProcess(content: string, processInfo: ProcessInfo, state: number): Observable<any> {\r\n        return this.service.saveProcess(content, processInfo, state);\r\n    }\r\n    /**\r\n     * åå¸æµç¨\r\n     * @param content æµç¨ä¸ä¸æ\r\n     */\r\n    deployProcess(content: string): Observable<any> {\r\n        return this.service.deployProcess(content);\r\n    }\r\n\r\n    auditProcessDef(auditId: AuditEvent, success: boolean, key: string) {\r\n        const info = new AuditProcessDefInfo();\r\n        info.auditId = auditId;\r\n        info.success = success;\r\n        info.processDefKey = key;\r\n\r\n        this.service.auditProcessDef(info);\r\n    }\r\n\r\n    /**\r\n     * ä¿å­è¿è¡æ¶æµç¨\r\n     * @param content æµç¨ä¸ä¸æ\r\n     */\r\n    saveRTProcess(content: string, procDefId: string): Observable<any> {\r\n        return this.service.saveRTProcess(content, procDefId);\r\n    }\r\n\r\n    saveAsProcess(process: any, processInfo: ProcessInfo) {\r\n        const compFactory = this.resolver.resolveComponentFactory(SaveAsEditComponent);\r\n        const compRef = compFactory.create(this.injector);\r\n        compRef.instance.procKey = process.DefaultProcess.Key;\r\n        compRef.instance.procName = process.DefaultProcess.Name + '_å¯æ¬';\r\n        compRef.instance.isAdministratorConfig = this.uiState.isAdministratorConfig;\r\n        compRef.instance.organizations = this.uiState.organizations;\r\n        compRef.instance.accessLevel = processInfo.accessLevel;\r\n        compRef.instance.organization = processInfo.procOrg.orgId;\r\n        compRef.instance.organizationName = processInfo.procOrg.orgName;\r\n        const modalOptions = {\r\n            title: 'å¦å­ä¸º',\r\n            width: 450, height: 400,\r\n            buttons: compRef.instance.btnRef,\r\n            showButtons: true\r\n        };\r\n        const dlg = this.modalService.show(compRef, modalOptions);\r\n        compRef.instance.submit.subscribe((re: any) => {\r\n            process.DefaultProcess.Name = re.procName;\r\n            const procInfo = new ProcessInfo();\r\n            procInfo.accessLevel = re.accessLevel;\r\n            procInfo.procOrg = {\r\n                orgId: re.organization,\r\n                orgName: re.organizationName\r\n            };\r\n            this.saveProcess(JSON.stringify(process), procInfo, 1).subscribe(r => {\r\n                this.notify.success({\r\n                    title: 'ç³»ç»æç¤º', msg: 'å¦å­ä¸ºæå', timeout: 3000\r\n                } as NotifyOptions);\r\n            }, err => {\r\n                this.notify.error({\r\n                    title: 'ç³»ç»æç¤º', msg: 'å¦å­ä¸ºå¤±è´¥ï¼è¯·æ£æ¥æµç¨æ¯å¦æ­£ç¡®ï¼', timeout: 3000\r\n                } as NotifyOptions);\r\n            });\r\n            dlg.close();\r\n        });\r\n        compRef.instance.cancel.subscribe(r => {\r\n            dlg.close();\r\n        });\r\n    }\r\n\r\n    /**\r\n     * åæ­¥è®¾è®¡å¨æ¶æµç¨å®ä¹\r\n     */\r\n    syncDtProcess(content: string, rtProcessInfo: RTProcessInfo) {\r\n        if (content) {\r\n            const process = JSON.parse(content);\r\n            this.message.question('æ¯å¦å°å½åçæ¬æµç¨å®ä¹åæ­¥å°è®¾è®¡æ¶æµç¨å®ä¹åï¼', () => {\r\n                this.service.syncDtProcess(content, rtProcessInfo).subscribe((data) => {\r\n                    this.notify.success({\r\n                        title: 'ç³»ç»æç¤º', msg: 'åæ­¥æå', timeout: 3000\r\n                    } as NotifyOptions);\r\n                    this.auditProcessDef(AuditEvent.WF_ProcessDef_SyncDT, true, process.DefaultProcess.Key);\r\n                },\r\n                    (error: HttpErrorResponse) => {\r\n                        this.notify.error({\r\n                            title: 'ç³»ç»æç¤º', msg: 'åæ­¥å¤±è´¥ï¼è¯·èç³»ç®¡çåæ¥çåå ï¼', timeout: 3000\r\n                        } as NotifyOptions);\r\n                        this.auditProcessDef(AuditEvent.WF_ProcessDef_SyncDT, false, process.DefaultProcess.Key);\r\n                    });\r\n            });\r\n        }\r\n    }\r\n\r\n    beforeCompleteStrategyChange(data: any, processInfo: RTProcessInfo): Observable<boolean> {\r\n        const url = `/api/runtime/wf/v1.0/processInstances/runtimeActivityInstances?procDefId=${processInfo.rtProcDefId}&activityDefinitionId=${data.Id}`;\r\n        return this.http.get(url).pipe(\r\n            switchMap((re: any) => {\r\n                if (re && re.length > 0) {\r\n                    this.message.info('å½åèç¹å­å¨è¿è¡ä¸­çæ´»å¨å®ä¾ï¼ä¸åè®¸è°æ´å®æç­ç¥ï¼è¯·äºè§£ï¼');\r\n                    return of(false);\r\n                } else {\r\n                    return of(true);\r\n                }\r\n            })\r\n        );\r\n    }\r\n\r\n    public getProcessCategory(procCategoryId: string): Observable<FlowFormEntity> {\r\n        return this.service.GetFlowFormbyId(procCategoryId);\r\n    }\r\n\r\n    private setFormParamCxt(params: any[]) {\r\n        this.uiState.formalParameterContext = [];\r\n        if (params && params.length > 0) {\r\n            params.forEach(param => {\r\n                if (param.dataType === 'CDTSchema') {\r\n                    const formalParameterContext = [{\r\n                        key: `schemaId_${param.code}`,\r\n                        name: `schemaId_${param.name}`,\r\n                        description: `schemaId_${param.name}`\r\n                    }, {\r\n                        key: `metadataId_${param.code}`,\r\n                        name: `metadataId_${param.name}`,\r\n                        description: `metadataId_${param.name}`\r\n                    }];\r\n                    this.uiState.formalParameterContext = this.uiState.formalParameterContext.concat(formalParameterContext);\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n","import { ProcessOrganization } from './process-info';\r\n\r\nexport class RTProcessInfo {\r\n    rtProcDefId: string;\r\n    flowFormId: string;\r\n    /**\r\n     * æµç¨ç»ç»\r\n     */\r\n    procOrg?: ProcessOrganization;\r\n    /**\r\n     * è®¿é®çº§å«\r\n     */\r\n    accessLevel?: string;\r\n}\r\n","import { Component, OnInit, ViewChild, TemplateRef } from '@angular/core';\r\nimport { Subject } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'lib-note',\r\n  templateUrl: './note.component.html',\r\n  styleUrls: ['./note.component.scss']\r\n})\r\nexport class NoteComponent implements OnInit {\r\n\r\n  @ViewChild('footer') footer: TemplateRef<any>;\r\n\r\n  record: string;\r\n\r\n  submit = new Subject<string>();\r\n  cancel = new Subject<any>();\r\n\r\n  placeholder = 'è¯·è¾å¥æµç¨åæ´è®°å½';\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n\r\n  clickOK() {\r\n    this.submit.next(this.record);\r\n  }\r\n\r\n  clickCancel() {\r\n    this.cancel.next();\r\n  }\r\n\r\n}\r\n","import { Component, OnInit, Input, ViewChild, ElementRef, Injector, ComponentFactoryResolver, HostBinding, Output, EventEmitter } from '@angular/core';\r\nimport { ProcessTime } from './model/process-time';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\nimport { ProcessDesignerUIState } from './app/process-designer.uistate';\r\nimport { ResourceKeys } from './model/resourceKeys';\r\nimport { FlowFormInfo } from './domain/entities/flowform-info';\r\nimport { ProcessDesignerViewModel } from './app/process-designer.viewmodel';\r\nimport { BizComponentEntity } from './domain/entities/biz-component.entity';\r\nimport { ExecuteFormModel, TerminalType } from './views/execute-forms/entities/execute-form.entity';\r\nimport { ExcuteFormEntity } from './domain/entities/excute-form.entity';\r\nimport { ModalOptions, BsModalService } from '@farris/ui-modal';\r\nimport { BackWardRule } from './views/backward-rule/backward-rule.entity';\r\nimport { ProcessDesignerDataService } from './domain/process-designer.dataservice';\r\nimport { LoadingService } from '@farris/ui-loading';\r\nimport { NotifyService, NotifyOptions } from '@farris/ui-notify';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { WFFlowElementsViewModel } from './app/wf-flowElements.viewModel';\r\nimport { PostMessageData } from './model/postMessageData';\r\nimport { HttpErrorResponse } from '@angular/common/http';\r\nimport { PropertyPanelComponent } from '@farris/ui-property-panel';\r\nimport { SignRuleComponent } from './views/sign-rule/sign-rule.component';\r\nimport { ProcessInfo } from './model/process-info';\r\nimport { RTProcessInfo } from './model/rt-process-info';\r\nimport { Observable, of, forkJoin } from 'rxjs';\r\nimport { AuditEvent } from './domain/entities/audit-processDef-info';\r\nimport { NoteComponent } from './views/note/note.component';\r\nimport { ProcessDeUtil } from './domain/process-de-util';\r\nimport { FlowFormEntity } from './domain/entities/flowform.entity';\r\n\r\n\r\n@Component({\r\n  selector: 'wf-process-editor',\r\n  template: `\r\n  <div class=\"f-utils-flex-column h-100 m-2\">\r\n    <div class=\"flex-auto d-flex flex-fill flex-row\" style=\"position:relative; overflow: hidden\">\r\n      <div class=\"flex-grow-1\">\r\n        <div *ngIf=\"src\" class=\"h-100\">\r\n          <iframe #iframe class=\"bpmn-designer\" [src]=\"src\" frameborder=\"0\">\r\n          </iframe>\r\n        </div>\r\n      </div>\r\n      <div>\r\n        <app-property-panel #propertyPanel [(propertyConfig)]=\"uiState.propertyConfig\" [(propertyData)]=\"uiState.propertyData\"\r\n          width=\"235\" showCloseBtn=\"false\"></app-property-panel>\r\n      </div>\r\n    </div>\r\n  </div>`,\r\n  styles: [`\r\n    .bpmn-designer {\r\n      height: 100%;\r\n      min-height: 400px;\r\n      width: 100%;\r\n    }`\r\n  ]\r\n})\r\n\r\nexport class WfProcessEditorComponent implements OnInit {\r\n\r\n  /**\r\n   * æ¶æ¯çå¬å¤çæ¹æ³\r\n   */\r\n  private static func = null;\r\n\r\n  src: any;\r\n\r\n  private flag = true;\r\n\r\n  @HostBinding('class')\r\n  cls = 'farris-main-area flex-column';\r\n\r\n  private _time: ProcessTime;\r\n  @Input()\r\n  set time(t: ProcessTime) {\r\n    this._time = t;\r\n  }\r\n  get time(): ProcessTime {\r\n    return this._time;\r\n  }\r\n\r\n  @Input()\r\n  processInfo: ProcessInfo;\r\n\r\n  @Input()\r\n  rtProcessInfo: RTProcessInfo;\r\n\r\n  @Input()\r\n  action: 'view' | 'edit' = 'edit';\r\n\r\n  @Input()\r\n  mode: 'general' | 'simplify' = 'general';\r\n\r\n  @Output() close = new EventEmitter<any>();\r\n\r\n  @ViewChild('propertyPanel')\r\n  propertyPanel: PropertyPanelComponent;\r\n\r\n  @ViewChild('iframe')\r\n  iframe: ElementRef;\r\n\r\n  constructor(\r\n    private sanitizer: DomSanitizer,\r\n    public uiState: ProcessDesignerUIState,\r\n    private viewModel: ProcessDesignerViewModel,\r\n    private service: ProcessDesignerDataService,\r\n    private loadService: LoadingService,\r\n    private notify: NotifyService,\r\n    private message: MessagerService,\r\n    private activity: WFFlowElementsViewModel,\r\n    private injector: Injector,\r\n    private modalService: BsModalService,\r\n    private resolver: ComponentFactoryResolver,\r\n  ) {\r\n    // å¦æå­å¨æ¶æ¯çå¬ï¼åå æ\r\n    if (WfProcessEditorComponent.func) {\r\n      window.removeEventListener('message', WfProcessEditorComponent.func, false);\r\n    }\r\n    this.addMessageListener();\r\n    this.uiState.getAdministratorInfo();\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.getSrc();\r\n    this.uiState.initUIState();\r\n    this.showLoading();\r\n    this.updateProperty();\r\n    // è·åæ¶æ¯åè¡¨\r\n    this.uiState.getMessageChannels();\r\n  }\r\n\r\n  private getSrc() {\r\n    let processCategoryId: string;\r\n    if (this._time === ProcessTime.rt) {\r\n      processCategoryId = this.rtProcessInfo.flowFormId;\r\n    } else {\r\n      processCategoryId = this.processInfo.flowFormId;\r\n    }\r\n    this.viewModel.getProcessCategory(processCategoryId).subscribe((procCategory: FlowFormEntity) => {\r\n      this.src = '/platform/runtime/wf/web/designer/index.html';\r\n      if (this._time === ProcessTime.rt) {\r\n        this.src = this.src + '?time=rt';\r\n      } else {\r\n        this.src = this.src + `?time=dt`;\r\n        if(procCategory){\r\n          this.src = this.src + `&bizCategoryId=${procCategory.businessObjectId}`;\r\n        }\r\n      }\r\n      if (this.action === 'view') {\r\n        this.src = this.src + '&action=view';\r\n      } else {\r\n        this.src = this.src + '&action=edit';\r\n      }\r\n      if (this.mode === 'general') {\r\n        this.src = this.src + '&mode=general';\r\n      } else {\r\n        this.src = this.src + '&mode=simplify';\r\n      }\r\n      this.src = this.sanitizer.bypassSecurityTrustResourceUrl(this.src);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * æ·»å äºä»¶çå¬\r\n   */\r\n  private addMessageListener() {\r\n    window.addEventListener('message', this.eventHandler, false);\r\n    WfProcessEditorComponent.func = this.eventHandler;\r\n  }\r\n\r\n  /**\r\n   * çå¬äºä»¶å¤ç\r\n   */\r\n  eventHandler = (event) => {\r\n    const postData = event.data as PostMessageData;\r\n    if (this.uiState.POST_MESSAGE_TARGET.search(event.origin) > -1) {\r\n      switch (postData.action) {\r\n        case ResourceKeys.wf_initProperty:\r\n          if (this.flag) {\r\n            this.flag = false;\r\n            this.closeLoading();\r\n          }\r\n          this.viewModel.initProcessProperty(postData.data);\r\n          break;\r\n        case ResourceKeys.wf_save:\r\n          this.uiState.content = postData.data;\r\n          this.showLoading();\r\n          this.save();\r\n          break;\r\n        case ResourceKeys.wf_deploy:\r\n          this.uiState.content = postData.data;\r\n          this.showLoading();\r\n          this.viewModel.deployProcess(this.uiState.content).subscribe((data) => {\r\n            this.closeLoading();\r\n            this.viewModel.saveProcess(this.uiState.content, this.processInfo, 0).subscribe((r) => { });\r\n            this.notify.success({\r\n              title: 'ç³»ç»æç¤º', msg: 'åå¸æå', timeout: 3000\r\n            } as NotifyOptions);\r\n            const process = JSON.parse(this.uiState.content);\r\n            this.viewModel.auditProcessDef(AuditEvent.WF_ProcessDef_Deploy, true, process.DefaultProcess.Key);\r\n          },\r\n            (error: HttpErrorResponse) => {\r\n              this.closeLoading();\r\n              this.notify.error({\r\n                title: 'ç³»ç»æç¤º', msg: 'åå¸å¤±è´¥ï¼è¯·æ£æ¥æµç¨æ¯å¦æ­£ç¡®ï¼', timeout: 3000\r\n              } as NotifyOptions);\r\n              const process = JSON.parse(this.uiState.content);\r\n              this.viewModel.auditProcessDef(AuditEvent.WF_ProcessDef_Deploy, false, process.DefaultProcess.Key);\r\n            });\r\n          break;\r\n        case ResourceKeys.wf_saveAs:\r\n          const prcoess = postData.data;\r\n          this.viewModel.saveAsProcess(prcoess, this.processInfo);\r\n          break;\r\n        case ResourceKeys.wf_sync:\r\n          const content = postData.data;\r\n          this.viewModel.syncDtProcess(content, this.rtProcessInfo);\r\n          break;\r\n        case ResourceKeys.wf_note:\r\n          this.note(postData.data);\r\n          break;\r\n        case ResourceKeys.wf_closeDesigner:\r\n          this.close.emit();\r\n          break;\r\n        case ResourceKeys.getActivities: // è·åæ´»å¨èç¹ä¿¡æ¯\r\n          this.uiState.getUserActList(postData.data);\r\n          break;\r\n        case ResourceKeys.getEndEvents: // è·åææç»æèç¹ä¿¡æ¯\r\n          this.uiState.getEndEventList(postData.data);\r\n          break;\r\n        case 'loaded':\r\n          this.openProcContent();\r\n          break;\r\n        case ResourceKeys.wf_showTip:\r\n          this.showTip(postData.data);\r\n          break;\r\n        default:\r\n          this.viewModel.setProperty(postData.data);\r\n          break;\r\n      }\r\n    }\r\n  }\r\n\r\n  private updateProperty(): boolean {\r\n    this.propertyPanel.propertyChanged.subscribe((data: any) => {\r\n      this.updateChangeProperty(data);\r\n    });\r\n    this.propertyPanel.submitModal.subscribe((data: any) => {\r\n      this.updateChangeProperty(data.changeObject);\r\n    });\r\n\r\n    return false; // é²æ­¢åæ³¡\r\n  }\r\n\r\n  /**\r\n   * æ´æ°å±æ§\r\n   */\r\n  private updateChangeProperty(data): any {\r\n    data.Id = this.uiState.propertyData.Id;\r\n    switch (data.propertyID) {\r\n      case ResourceKeys.EntryForm:\r\n        this.bindEntryFormInfo(data);\r\n        break;\r\n      case ResourceKeys.ApprovalItems:\r\n        this.sendMessage(ResourceKeys.updateProperty, JSON.stringify(data));\r\n        this.activity.buildCounterSignVariables(data.propertyValue);\r\n        break;\r\n      case ResourceKeys.CompleteStrategy:\r\n        this.beforeCompleteStrategyChange(data).subscribe(b => {\r\n          if (b) {\r\n            this.sendMessage(ResourceKeys.updateProperty, JSON.stringify(data));\r\n            this.completeStrategyChanged(data.propertyValue);\r\n          } else { // å·æ°å±æ§æ¡\r\n            this.sendMessage(ResourceKeys.refresh, JSON.stringify(data));\r\n          }\r\n        });\r\n        break;\r\n      case ResourceKeys.SignRule:\r\n        this.sendMessage(ResourceKeys.updateProperty, JSON.stringify(data));\r\n        break;\r\n      default:\r\n        this.sendMessage(ResourceKeys.updateProperty, JSON.stringify(data));\r\n        break;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ç»å®æµç¨åç±»çåæ°åè¡¨ï¼æµç¨æä»¶ï¼è¡¨åèµå¼\r\n   * @param data\r\n   */\r\n  private bindEntryFormInfo(data) {\r\n    const flowformId: string = data.propertyValue.id;\r\n    if (flowformId) {\r\n      this.viewModel.getFlowFormInfoById(flowformId).subscribe((info: FlowFormInfo) => {\r\n        data.flowForm = info.flowForm;\r\n        data.formalParameters = info.formalParameters;\r\n        data.processBizComponnets = info.bizComponents;\r\n        data.executeForms = [];\r\n        info.excuteForms.forEach(form => {\r\n          if (form.isDefault) {\r\n            const executeForms = this.ConvertExecuteForm(form);\r\n            data.executeForms = data.executeForms.concat(executeForms); // æµç¨ç»å®é»è®¤åæ®\r\n          }\r\n        });\r\n        data.customizeActions = info.customizeActions.filter(a => a.isAll === true).map(a => ({\r\n          id: a.id, code: a.code, name: a.name, terminalType: a.terminal,\r\n          actualParameters: a.actualParameters.map(p => ({\r\n            Name: p.code, Value: p.value, ValueText: p.name, Tag: 'expression'\r\n          }))\r\n        }));\r\n        this.sendMessage(ResourceKeys.loadBizActivity, info.bizActivities || []);\r\n        this.sendMessage(ResourceKeys.updateProperty, JSON.stringify(data));\r\n      });\r\n    }\r\n  }\r\n\r\n  private note(record: string) {\r\n    const compFactory = this.resolver.resolveComponentFactory(NoteComponent);\r\n    const compRef = compFactory.create(this.injector);\r\n\r\n    compRef.instance.record = record;\r\n\r\n    const modalConfig: ModalOptions = {\r\n      title: 'æµç¨åæ´è®°å½',\r\n      width: 800,\r\n      height: 520,\r\n      showButtons: true,\r\n      buttons: compRef.instance.footer\r\n    };\r\n    const dialog = this.modalService.show(compRef, modalConfig);\r\n    compRef.instance.cancel.subscribe($event => dialog.close());\r\n    compRef.instance.submit.subscribe((data: string) => {\r\n      this.sendMessage(ResourceKeys.wf_note, data);\r\n      dialog.close();\r\n    });\r\n  }\r\n\r\n  private openProcContent() {\r\n    if (this.time === ProcessTime.dt) {\r\n      if (this.processInfo) {\r\n        if (this.processInfo.processKey === ResourceKeys.new && this.processInfo.flowFormId) {\r\n          this.openNewProcess(this.processInfo.flowFormId);\r\n        } else {\r\n          // TODOï¼é¦åè·åæµç¨åç±»ä¿¡æ¯ï¼ç¡®ä¿æµç¨åç±»åæµç¨æä»¶è·åå°ï¼ä¼ç¨å¾®å½±åè®¾è®¡å¨æå¼éåº¦ï¼\r\n          this.viewModel.getFlowFormInfoById(this.processInfo.flowFormId).subscribe((info: FlowFormInfo) => {\r\n            this.sendMessage(ResourceKeys.loadBizActivity, info.bizActivities || []);\r\n            this.getProcContent(this.processInfo.processKey).subscribe(re => {\r\n              this.uiState.content = this.checkModelContent(JSON.stringify(re));\r\n              this.sendMessage(ResourceKeys.open, {\r\n                content: this.uiState.content\r\n              });\r\n            });\r\n          });\r\n        }\r\n      } else {\r\n        throw new Error('ä¸å­å¨è®¾è®¡æ¶æµç¨ä¿¡æ¯ï¼è¯·åèµå¼ï¼');\r\n      }\r\n    } else if (this.time === ProcessTime.rt) {\r\n      if (this.rtProcessInfo) {\r\n        this.viewModel.getFlowFormInfoById(this.rtProcessInfo.flowFormId).subscribe((info: FlowFormInfo) => {\r\n          this.sendMessage(ResourceKeys.loadBizActivity, info.bizActivities || []);\r\n          this.getProcContent(this.rtProcessInfo.rtProcDefId).subscribe(re => {\r\n            this.uiState.content = this.checkModelContent(JSON.stringify(re));\r\n            this.sendMessage(ResourceKeys.open, {\r\n              content: this.uiState.content\r\n            });\r\n          });\r\n        });\r\n      } else {\r\n        throw new Error('ä¸å­å¨è¿è¡æ¶æµç¨ä¿¡æ¯ï¼è¯·åèµå¼ï¼');\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * æ°å¢æµç¨ï¼åºäºæµç¨åç±»è·ååæ°åè¡¨ï¼æä»¶åè¡¨å\r\n   * @param ffId æµç¨åç±»ID\r\n   */\r\n  private openNewProcess(ffId: string) {\r\n    this.viewModel.getFlowFormInfoById(ffId)\r\n      .subscribe((info: FlowFormInfo) => {\r\n        const processBizComponnets: BizComponentEntity[] = info.bizComponents;\r\n        const customizeActions = info.customizeActions.filter(a => a.isAll === true).map(a => ({\r\n          id: a.id, code: a.code, name: a.name, terminalType: a.terminal,\r\n          actualParameters: a.actualParameters.map(p => ({\r\n            Name: p.code, Value: p.value, ValueText: p.name, Tag: 'expression'\r\n          }))\r\n        }));\r\n        let executeForms: ExecuteFormModel[] = [];\r\n        info.excuteForms.forEach(form => {\r\n          if (form.isDefault) {\r\n            const forms = this.ConvertExecuteForm(form);\r\n            executeForms = executeForms.concat(forms); // æµç¨ç»å®é»è®¤åæ®\r\n          }\r\n        });\r\n        // å¦æä¸å­å¨è¡¨åå®ä¹ï¼éè¦å»è¡¨åæ ¼å¼åè¡¨åä¸ä¸\r\n        if (executeForms.length === 0\r\n          || executeForms.findIndex(e => e.TerminalType === TerminalType.PC) === -1\r\n          || executeForms.findIndex(e => e.TerminalType === TerminalType.MOBILE) === -1) {\r\n          this.viewModel.getFormFormatsByBizCategory().subscribe((formFormats: any[]) => {\r\n            if (formFormats && formFormats.length > 0) {\r\n              if (executeForms.findIndex(e => e.TerminalType === TerminalType.PC) === -1) {\r\n                const formFormat = formFormats.filter(f => f.terminal === 'PC' && f.status === 0)[0];\r\n                if (formFormat) {\r\n                  executeForms.push(this.formFormat2ExecuteForm(formFormat));\r\n                }\r\n              }\r\n              if (executeForms.findIndex(e => e.TerminalType === TerminalType.MOBILE) === -1) {\r\n                const formFormat = formFormats.filter(f => f.terminal === 'Mobile' && f.status === 0)[0];\r\n                if (formFormat) {\r\n                  executeForms.push(this.formFormat2ExecuteForm(formFormat));\r\n                }\r\n              }\r\n            }\r\n            this.sendMessage(ResourceKeys.loadBizActivity, info.bizActivities || []);\r\n            this.sendMessage(ResourceKeys.new, {\r\n              name: this.processInfo.processName,\r\n              bizObjId: this.processInfo.bizObjId,\r\n              ffId,\r\n              ffName: this.processInfo.flowFormName,\r\n              startMode: this.processInfo.startMode,\r\n              formalParameters: info.formalParameters,\r\n              processBizComponnets,\r\n              executeForms,\r\n              customizeActions,\r\n              processDescription: info.flowForm.processDescription\r\n            });\r\n          });\r\n        } else {\r\n          this.sendMessage(ResourceKeys.loadBizActivity, info.bizActivities || []);\r\n          this.sendMessage(ResourceKeys.new, {\r\n            name: this.processInfo.processName,\r\n            bizObjId: this.processInfo.bizObjId,\r\n            ffId,\r\n            ffName: this.processInfo.flowFormName,\r\n            startMode: this.processInfo.startMode,\r\n            formalParameters: info.formalParameters,\r\n            processBizComponnets,\r\n            executeForms,\r\n            customizeActions,\r\n            processDescription: info.flowForm.processDescription\r\n          });\r\n        }\r\n      });\r\n  }\r\n\r\n  // åå­é¡µé¢åéæ¶æ¯\r\n  private sendMessage(action: string, data: any): void {\r\n    const iframeWindow = this.iframe.nativeElement.contentWindow;\r\n    const message = this.wrapMessage(action, data);\r\n    iframeWindow.postMessage(message, this.uiState.POST_MESSAGE_TARGET);\r\n  }\r\n\r\n  // åè£æ¶æ¯åå®¹\r\n  private wrapMessage(action: string, data: any) {\r\n    return {\r\n      action,\r\n      data\r\n    };\r\n  }\r\n\r\n  private showTip(data: any) {\r\n    if (data.type === 'message') {\r\n      switch (data.level) {\r\n        case 'warning':\r\n          this.message.warning(data.message);\r\n          break;\r\n        case 'error':\r\n          this.message.error(data.message);\r\n          break;\r\n        default:\r\n          this.message.info(data.message);\r\n          break;\r\n      }\r\n    } else if (data.type === 'notify') {\r\n      switch (data.level) {\r\n        case 'warning':\r\n          this.notify.warning(data.message);\r\n          break;\r\n        case 'error':\r\n          this.notify.error(data.message);\r\n          break;\r\n        default:\r\n          this.notify.info(data.message);\r\n          break;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * è·åæµç¨ä¸ä¸æ\r\n   * @param id æµç¨å®ä¹IDï¼è®¾è®¡æ¶ä½¿ç¨æµç¨å®ä¹Keyï¼è¿è¡æ¶ä½¿ç¨æµç¨å®ä¹IDï¼\r\n   */\r\n  getProcContent(id: string): Observable<any> {\r\n    if (id) {\r\n      if (this.time === ProcessTime.dt) {\r\n        return this.service.getProcContentbyKey(id);\r\n      } else if (this.time === ProcessTime.rt) {\r\n        return this.service.getRTProcContentbyId(id);\r\n      } else {\r\n        throw new Error('è®¾è®¡å¨è¿è¡æ¶æºéè¯¯ï¼');\r\n      }\r\n    }\r\n  }\r\n\r\n  private save() {\r\n    const process = JSON.parse(this.uiState.content);\r\n    // this.uiState.content = this.checkModelContent(this.uiState.content);\r\n    this.saveHttp().subscribe((data) => {\r\n      this.closeLoading();\r\n      this.notify.success({\r\n        title: 'ç³»ç»æç¤º', msg: 'ä¿å­æå', timeout: 3000\r\n      } as NotifyOptions);\r\n      if (this.time === ProcessTime.dt) {\r\n        this.viewModel.auditProcessDef(AuditEvent.WF_ProcessDef_SaveDT, true, process.DefaultProcess.Key);\r\n      } else if (this.time === ProcessTime.rt) {\r\n        this.viewModel.auditProcessDef(AuditEvent.WF_ProcessDef_SaveRT, true, process.DefaultProcess.Key);\r\n      }\r\n    },\r\n      (error: HttpErrorResponse) => {\r\n        this.closeLoading();\r\n        this.notify.error({\r\n          title: 'ç³»ç»æç¤º', msg: 'ä¿å­å¤±è´¥ï¼è¯·æ£æ¥æµç¨æ¯å¦æ­£ç¡®ï¼', timeout: 3000\r\n        } as NotifyOptions);\r\n        if (this.time === ProcessTime.dt) {\r\n          this.viewModel.auditProcessDef(AuditEvent.WF_ProcessDef_SaveDT, false, process.DefaultProcess.Key);\r\n        } else if (this.time === ProcessTime.rt) {\r\n          this.viewModel.auditProcessDef(AuditEvent.WF_ProcessDef_SaveRT, false, process.DefaultProcess.Key);\r\n        }\r\n      });\r\n  }\r\n\r\n  /**\r\n   * ä¿å­æµç¨å®ä¹ï¼è®¾è®¡æ¶+è¿è¡æ¶ï¼\r\n   */\r\n  private saveHttp(): Observable<any> {\r\n    if (this.uiState.content) {\r\n      if (this.time === ProcessTime.dt) {\r\n        return this.viewModel.saveProcess(this.uiState.content, this.processInfo, 1);\r\n      } else if (this.time === ProcessTime.rt) {\r\n        return this.viewModel.saveRTProcess(this.uiState.content, this.rtProcessInfo.rtProcDefId);\r\n      } else {\r\n        throw new Error('è®¾è®¡å¨è¿è¡æ¶æºéè¯¯ï¼');\r\n      }\r\n    }\r\n  }\r\n\r\n  showLoading() {\r\n    this.loadService.show({ container: 'body', message: '', type: 1 });\r\n  }\r\n  closeLoading() {\r\n    this.loadService.close();\r\n  }\r\n\r\n  private ConvertExecuteForm(form: ExcuteFormEntity): ExecuteFormModel[] {\r\n    const executeForms = new Array();\r\n    if (form.terminal === 'web,app') {\r\n      const webForm = new ExecuteFormModel();\r\n      webForm.ComponentId = form.appId;\r\n      webForm.formFormatId = form.formFormatId;\r\n      webForm.FormType = form.formType;\r\n      webForm.Name = form.name;\r\n      webForm.TerminalType = TerminalType.PC;\r\n      if (form.actualParameters && form.actualParameters.length > 0) {\r\n        webForm.ActualParameters = form.actualParameters.map(p => ({\r\n          Name: p.code,\r\n          Value: p.value\r\n        }));\r\n      }\r\n      executeForms.push(webForm);\r\n      const appForm = new ExecuteFormModel();\r\n      appForm.ComponentId = form.appId;\r\n      appForm.formFormatId = form.formFormatId;\r\n      appForm.FormType = form.formType;\r\n      appForm.Name = form.name;\r\n      appForm.TerminalType = TerminalType.MOBILE;\r\n      if (form.actualParameters && form.actualParameters.length > 0) {\r\n        appForm.ActualParameters = form.actualParameters.map(p => ({\r\n          Name: p.code,\r\n          Value: p.value\r\n        }));\r\n      }\r\n      executeForms.push(appForm);\r\n    } else {\r\n      const executeForm = new ExecuteFormModel();\r\n      executeForm.ComponentId = form.appId;\r\n      executeForm.formFormatId = form.formFormatId;\r\n      executeForm.FormType = form.formType;\r\n      executeForm.Name = form.name;\r\n      switch (form.terminal) {\r\n        case 'web':\r\n          executeForm.TerminalType = TerminalType.PC;\r\n          break;\r\n        case 'app':\r\n          executeForm.TerminalType = TerminalType.MOBILE;\r\n          break;\r\n      }\r\n      if (form.actualParameters && form.actualParameters.length > 0) {\r\n        executeForm.ActualParameters = form.actualParameters.map(p => ({\r\n          Name: p.code,\r\n          Value: p.value\r\n        }));\r\n      }\r\n      executeForms.push(executeForm);\r\n    }\r\n    return executeForms;\r\n  }\r\n  private formFormat2ExecuteForm(formformat): ExecuteFormModel {\r\n    const form = new ExecuteFormModel();\r\n    form.Id = ProcessDeUtil.GenerateElementId();\r\n    form.ComponentId = null;\r\n    form.formFormatId = formformat.id;\r\n    form.FormType = '0';\r\n    form.Name = formformat.name;\r\n    switch (formformat.terminal) {\r\n      case 'PC':\r\n        form.TerminalType = TerminalType.PC;\r\n        break;\r\n      case 'Mobile':\r\n        form.TerminalType = TerminalType.MOBILE;\r\n        break;\r\n    }\r\n    if (formformat.urlParameters && formformat.urlParameters.length > 0) {\r\n      form.ActualParameters = formformat.urlParameters.map(p => ({\r\n        Name: p.code,\r\n        Value: p.value\r\n      }));\r\n    }\r\n    return form;\r\n  }\r\n\r\n  private completeStrategyChanged(strategy: string) {\r\n\r\n    if (strategy !== this.uiState.completeIterator[0].key) {\r\n\r\n      // åä¸èå­å¨èªå¨å®¡æ¹çæåµä¸ï¼ä¸åè®¸ä¿®æ¹å®æç­ç¥ä¸ºä¼ç­¾è§å\r\n      // if (this.uiState.propertyData.ParticipantSchemes\r\n      //   && this.uiState.propertyData.ParticipantSchemes.options\r\n      //   && this.uiState.propertyData.ParticipantSchemes.options.automaticPerformers\r\n      //   && this.uiState.propertyData.ParticipantSchemes.options.automaticPerformers.length > 0) {\r\n      //   return;\r\n      // } else {\r\n        // ä¼ç­¾è§åä¸å­å¨ï¼å³ç±æ¢å æ¨¡å¼ï¼åä¸ºä¼ç­¾æ¶\r\n        if (!this.uiState.propertyData.SignRule) {\r\n          // ä¼ç­¾æ¯èªå¨å¼¹åºä¼ç­¾è§åç¼è¾\r\n          const compFactory = this.resolver.resolveComponentFactory(SignRuleComponent);\r\n          const compRef = compFactory.create(this.injector);\r\n\r\n          compRef.instance.value = [];\r\n          // compRef.instance.counterSignVariables = this.uiState.counterSignVariables || [];\r\n          // compRef.instance.approvalItems = this.uiState.approvalItems || [];\r\n\r\n          const modalConfig: ModalOptions = Object.assign(compRef.instance.modalConfig,\r\n            { buttons: compRef.instance.modalFooter });\r\n          const dialog = this.modalService.show(compRef, modalConfig);\r\n          compRef.instance.closeModal.subscribe($event => dialog.close());\r\n          compRef.instance.submitModal.subscribe((data: any) => {\r\n            this.updateChangeProperty({\r\n              categoryId: 'performerProperty',\r\n              propertyID: ResourceKeys.SignRule,\r\n              propertyValue: data.value\r\n            });\r\n            dialog.close();\r\n          });\r\n        }\r\n        // ä¼ç­¾è§åä¸ï¼é©³åè§åçº¦æ\r\n        if ((this.uiState.propertyData.BackWardRule as BackWardRule).SelectTargetAble === true) {\r\n          setTimeout(() => {\r\n            this.message.warning('ä¼ç­¾ç­ç¥ä¸,âé©³åè§åâä¸åè®¸âå¨æéæ©é©³åçº§æ¬¡âï¼è¯·ä¿®æ¹ï¼');\r\n          }, 500);\r\n        }\r\n      // }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * å®æç­ç¥è°æ´æ ¡éª\r\n   */\r\n  private beforeCompleteStrategyChange(data: any): Observable<boolean> {\r\n    if (this.time === ProcessTime.rt) {\r\n      return this.viewModel.beforeCompleteStrategyChange(data, this.rtProcessInfo);\r\n    } else {\r\n      return of(true);\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * ä¿å­ï¼åå¸ï¼å¦å­ï¼åæ­¥æä½æ¶\r\n   * æ ¡éªæ¨¡åçæµç¨åç±»IDä¸åè¡¨å­å¨æ¯å¦ä¸è´ï¼ä¸ä¸è´æ¶ï¼ä»¥åè¡¨ä¸ºå\r\n   */\r\n  private checkModelContent(content: string): string {\r\n    const process = JSON.parse(content);\r\n    const modelBizDefKey = process.DefaultProcess.extensionElements.find(e => e.ClrTypeID === 'wf.ProcessHeader').BizDefKey;\r\n    if (this.time === ProcessTime.dt) {\r\n      if (modelBizDefKey === this.processInfo.flowFormId) {\r\n        return content;\r\n      } else {\r\n        process.DefaultProcess.extensionElements.find(e => e.ClrTypeID === 'wf.ProcessHeader').BizDefKey = this.processInfo.flowFormId;\r\n        process.DefaultProcess.extensionElements.find(e => e.ClrTypeID === 'wf.ProcessHeader').BizDefName = this.uiState.flowFormInfo.flowForm.name;\r\n        return JSON.stringify(process);\r\n      }\r\n    } else if (this.time === ProcessTime.rt) {\r\n      if (modelBizDefKey === this.rtProcessInfo.flowFormId) {\r\n        return content;\r\n      } else {\r\n        process.DefaultProcess.extensionElements.find(e => e.ClrTypeID === 'wf.ProcessHeader').BizDefKey = this.rtProcessInfo.flowFormId;\r\n        process.DefaultProcess.extensionElements.find(e => e.ClrTypeID === 'wf.ProcessHeader').BizDefName = this.uiState.flowFormInfo.flowForm.name;\r\n        return JSON.stringify(process);\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({name: 'jumpScopePipe'})\r\nexport class JumpScopePipe implements PipeTransform {\r\n    transform(value: any[], nodeId: string): any[] {\r\n        return value.filter(item => item.Id !== nodeId);\r\n    }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { PerformerEntity } from '../../entities/performer.entity';\r\n\r\n@Pipe({ name: 'usersName' })\r\nexport class UsersNamePipe implements PipeTransform {\r\n    constructor() { }\r\n    transform(users: PerformerEntity[], defaultVal = ''): string {\r\n        let r = '';\r\n        users.forEach(u => {\r\n            r += u.performerName + 'ï¼';\r\n        });\r\n        if (r) {\r\n            r = r.substring(0, r.length - 1);\r\n        }\r\n        return r ? r : defaultVal;\r\n    }\r\n}\r\n","import { Provider } from '@angular/core';\r\nimport { ProcessDesignerUIState } from './app/process-designer.uistate';\r\nimport { ProcessDesignerViewModel } from './app/process-designer.viewmodel';\r\nimport { ProcessDesignerDataService } from './domain/process-designer.dataservice';\r\nimport { BpmnProcessViewModel } from './app/bpmn-process.viewmodel';\r\nimport { WFFlowElementsViewModel } from './app/wf-flowElements.viewModel';\r\nimport { SubProcessViewModel } from './app/sub-process.viewmodel';\r\nimport { AutoActivityAdapter } from './app/auto-activity.adapter';\r\nimport { CatchEventAdapter } from './app/catch-event.adapter';\r\nimport { MessageActivityAdapter } from './app/message-activity.adapter';\r\nimport { NotifyActivityAdapter } from './app/notify-activity.adapter';\r\nimport { AifCreationBillActivityAdapter } from './app/aif-creation-bill-activity.adapter';\r\n\r\nconst PROCESS_DESIGNER_APP_PROVIDERS: Provider[] = [\r\n    ProcessDesignerUIState,\r\n    ProcessDesignerViewModel,\r\n    BpmnProcessViewModel,\r\n    WFFlowElementsViewModel,\r\n    SubProcessViewModel,\r\n    AutoActivityAdapter,\r\n    CatchEventAdapter,\r\n    MessageActivityAdapter,\r\n    NotifyActivityAdapter,\r\n    AifCreationBillActivityAdapter,\r\n];\r\nexport {\r\n    ProcessDesignerUIState,\r\n    ProcessDesignerViewModel,\r\n    BpmnProcessViewModel,\r\n    WFFlowElementsViewModel,\r\n    SubProcessViewModel,\r\n    AutoActivityAdapter,\r\n    CatchEventAdapter,\r\n    MessageActivityAdapter,\r\n    NotifyActivityAdapter,\r\n    AifCreationBillActivityAdapter,\r\n    PROCESS_DESIGNER_APP_PROVIDERS,\r\n};\r\nconst PROCESS_DESIGNER_DOMAIN_PROVIDERS: Provider[] = [\r\n    ProcessDesignerDataService\r\n];\r\nexport {\r\n    ProcessDesignerDataService,\r\n    PROCESS_DESIGNER_DOMAIN_PROVIDERS\r\n};\r\nconst PROCESS_DESIGNER_PART_PROVIDERS: Provider[] = [\r\n];\r\nexport {\r\n    PROCESS_DESIGNER_PART_PROVIDERS\r\n};\r\n","import { Component, OnInit, HostBinding, Input, Output, EventEmitter, ViewChild, TemplateRef } from '@angular/core';\r\nimport { TypeConverter } from '@farris/ui-property-panel';\r\nimport { CallActivitySubProcess } from './call-activity-sub-process.entity';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { ProcessDeUtil } from '../../domain/process-de-util';\r\nimport { HttpService } from '@ecp-caf/caf-common';\r\nimport { Observable } from 'rxjs';\r\nimport { ProcessDesignerUIState } from '../../app/process-designer.uistate';\r\nimport { ExpressionService, InjectedType } from '@gsp-svc/expression';\r\n\r\n@Component({\r\n  selector: 'lib-call-activity-sub-process',\r\n  templateUrl: './call-activity-sub-process.component.html',\r\n  styleUrls: ['./call-activity-sub-process.component.scss']\r\n})\r\nexport class CallActivitySubProcessComponent implements OnInit {\r\n  @HostBinding('class')\r\n  cls = 'farris-main-area flex-column';\r\n\r\n  @Input() set value(v: CallActivitySubProcess) {\r\n    if (v) {\r\n      this.callActivitySubProcess = v;\r\n      this.getProcessDefKey(this.callActivitySubProcess.calledElement);\r\n      this.getFlowForm(this.callActivitySubProcess.calledBizDefKey);\r\n    }\r\n  }\r\n  @Output() closeModal = new EventEmitter<any>();\r\n  @Output() submitModal = new EventEmitter<any>();\r\n\r\n  @ViewChild('iconSelectFooter') modalFooter: TemplateRef<any>;\r\n  modalConfig = {\r\n    title: 'å­æµç¨éé¡¹',\r\n    width: 480,\r\n    height: 360,\r\n    showButtons: true\r\n  };\r\n\r\n  callActivitySubProcess: CallActivitySubProcess = new CallActivitySubProcess();\r\n\r\n  groupIcon = '<i class=\"f-icon f-icon-lookup\"></i>';\r\n  constructor(\r\n    private message: MessagerService,\r\n    private util: ProcessDeUtil,\r\n    private http: HttpService,\r\n    private designerState: ProcessDesignerUIState,\r\n    private expr: ExpressionService,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n\r\n  clickOK() {\r\n    if (this.validator()) {\r\n      const object = { value: this.callActivitySubProcess, parameters: null };\r\n      this.submitModal.emit(object);\r\n    }\r\n  }\r\n\r\n  clickCancel() {\r\n    this.closeModal.emit();\r\n  }\r\n\r\n  processConfirm(args: any) {\r\n    if (args) {\r\n      this.callActivitySubProcess.calledElement = args.id;\r\n      this.callActivitySubProcess.calledElementName = args.name;\r\n    }\r\n  }\r\n  clearProcessDef(args: any) {\r\n    this.callActivitySubProcess.calledElement = '';\r\n    this.callActivitySubProcess.calledElementName = '';\r\n  }\r\n\r\n  flowFormConfirm(args: any) {\r\n    if (args) {\r\n      this.callActivitySubProcess.calledBizDefKey = args.id;\r\n      this.callActivitySubProcess.calledBizDefName = args.name;\r\n    }\r\n  }\r\n  clearFlowForm(args: any) {\r\n    this.callActivitySubProcess.calledBizDefKey = '';\r\n    this.callActivitySubProcess.calledBizDefName = '';\r\n  }\r\n\r\n  setBizDataId() {\r\n    this.showExprHelp();\r\n  }\r\n\r\n  private showExprHelp() {\r\n    if (this.designerState.schemas.length > 0) {\r\n      for (const schema of this.designerState.schemas) {\r\n        this.expr.addSchema('Schema', schema);\r\n      }\r\n      if (this.designerState.schemas[0].entityTypes && this.designerState.schemas[0].entityTypes.length > 0) {\r\n        const entityType = this.designerState.schemas[0].entityTypes[0];\r\n        this.expr.addInjectedEntity(entityType.name, 'Schema',\r\n          entityType.name, InjectedType.EntityType);\r\n      }\r\n    }\r\n    const context = new Array();\r\n    if (this.designerState.procInstContext.length > 0) {\r\n      for (const variable of this.designerState.procInstContext) {\r\n        context.push(variable);\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (this.designerState.formalParameterContext.length > 0) {\r\n      for (const variable of this.designerState.formalParameterContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (this.designerState.participantContext.length > 0) {\r\n      for (const variable of this.designerState.participantContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (this.designerState.processVariableContext.length > 0) {\r\n      for (const variable of this.designerState.processVariableContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (context.length > 0) {\r\n      for (const v of context) {\r\n        this.expr.addContext(v);\r\n      }\r\n    }\r\n    this.expr.addExpressionText(this.callActivitySubProcess.bizDataId);\r\n    this.expr.buildExpression().then((expressioninfo: string) => {\r\n      this.callActivitySubProcess.bizDataId = expressioninfo;\r\n    });\r\n  }\r\n\r\n  valueChange(bool: boolean) {\r\n    if (bool) {\r\n      this.callActivitySubProcess.bizDataId = null;\r\n    }\r\n  }\r\n\r\n  private validator(): boolean {\r\n    if (!this.callActivitySubProcess.inheritBizDataId && !this.callActivitySubProcess.bizDataId) {\r\n      this.message.warning('å½å­æµç¨ä¸ç¶æµç¨åæ®ä¸ä¸è´æ¶ï¼è¯·è®¾ç½®å­æµç¨åæ®åç ï¼');\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  private getProcessDefKey(key: string){\r\n    let url = this.util.getProcDefKeyWebApi();\r\n    if (key) {\r\n      url += `/${key}`;\r\n      this.http.get(url).subscribe((re: any) => {\r\n        this.callActivitySubProcess.calledElementName = re.name;\r\n      });\r\n    }\r\n  }\r\n  private getFlowForm(id: string) {\r\n    let url = this.util.getFlowFormWebApi();\r\n    if (id) {\r\n      url += `/${id}`;\r\n      this.http.get(url).subscribe((re: any) => {\r\n        this.callActivitySubProcess.calledBizDefName = re.name;\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\n\r\nexport class CallActivitySubProcessConverter implements TypeConverter {\r\n  constructor() { }\r\n\r\n  convertTo(data: any): string {\r\n    if (data && (data.calledBizDefKey || data.calledElement)) {\r\n      return 'ï¼å·²è®¾ç½®ï¼';\r\n    }\r\n    return 'ï¼æªè®¾ç½®ï¼';\r\n  }\r\n}\r\n","export enum VOTemplateType {\r\n    /**æ¥èªäºBEçVO */\r\n    FromBE,\r\n    /**æ¥èªäºVOçVOï¼å³VOä»£ç */\r\n    FromVO,\r\n    /**æ²¡ææ¥æºçVOï¼å³èæVO */\r\n    FromNone,\r\n}","import { GSPBusinessEntity } from '@gsp-bef/gsp-be-metadata';\r\nimport { GSPViewModel } from '@gsp-bef/gsp-vo-metadata';\r\nimport { CommonModelUtil } from '@gsp-bef/gsp-cm-metadata';\r\nimport { VOTemplateType } from '../entity/VOTemplateType';\r\n\r\nexport class CommonModelTypeHelper {\r\n    public static getCommonModelType(cm: GSPBusinessEntity | GSPViewModel): string {\r\n        let type = CommonModelUtil.GetGeneratedConfigID(cm as any);\r\n        type = \"com.\" + type;\r\n        return type;\r\n    }\r\n\r\n    /**\r\n     * å¤æ­VOæ¥æºäºBEè¿æ¯VOæèå®å¨èæ\r\n     * @param gspViewModel\r\n     */\r\n    public static judgeVoTemplateType(gspViewModel: GSPViewModel): VOTemplateType {\r\n        if (gspViewModel.IsVirtual === true) {\r\n            if (gspViewModel.TemplateVoInfo && gspViewModel.TemplateVoInfo.TemplateVoId != null) {\r\n                return VOTemplateType.FromVO;\r\n            } else {\r\n                return VOTemplateType.FromNone\r\n            }\r\n        } else {\r\n            return VOTemplateType.FromBE;\r\n        }\r\n    }\r\n}\r\n","import { Component, OnInit, Output, EventEmitter, ViewChild, Input, Injector, ComponentFactoryResolver, Inject, LOCALE_ID } from '@angular/core';\r\nimport { ComboListComponent } from '@farris/ui-combo-list';\r\nimport { ProcessListHelpService } from '../../services/process-list-help.service';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { NotifyService } from '@farris/ui-notify';\r\nimport { GSPMetadataRTService, SelectMetadataRTComponent, Metadata4RefDto } from '@gsp-lcm/metadatart-selector';\r\nimport { BsModalService } from '@farris/ui-modal';\r\nimport { GSPViewModel } from '@gsp-bef/gsp-vo-metadata';\r\nimport { IRtProcQueryParam } from '../../entity/IProcQueryParam';\r\nimport { TextValue } from '@edp-bif/common-api';\r\nimport { BifMetadataType } from '../../entity/BifMetadataType';\r\nimport { CommonModelTypeHelper } from '../../utils/common-model-type-helper';\r\nimport { VOTemplateType } from '../../entity/VOTemplateType';\r\nimport { AifLocalePipe } from '../../../aif-ui-common/pipe/aif-ui-common-locale.pipe';\r\n\r\n@Component({\r\n  selector: 'app-proc-help-query-solution',\r\n  templateUrl: './proc-help-query-solution.component.html',\r\n  styleUrls: ['./proc-help-query-solution.component.css'],\r\n})\r\nexport class ProcHelpQuerySolutionComponent implements OnInit {\r\n  readonly groupIcon = '<i class=\"f-icon f-icon-lookup\"></i>';\r\n\r\n  @Input(\"queryParam\")\r\n  queryParam: IRtProcQueryParam;\r\n  @Output(\"queryParamChange\")\r\n  queryParamChange = new EventEmitter<IRtProcQueryParam>();\r\n\r\n  @Output(\"onSearch\")\r\n  onSearchEmitter = new EventEmitter();\r\n\r\n  //æµç¨ç±»åéç½®\r\n  @ViewChild(\"comboProcessType\")\r\n  comboProcessType: ComboListComponent;\r\n  comboProcessTypeIdField = \"value\";\r\n  comboProcessTypeValueField = \"value\";\r\n  comboProcessTypeTextField = \"text\";\r\n  comboProcessTypeData = [\r\n    { value: \"\", text: this.localePipe.transform(\"all\") },\r\n    { value: BifMetadataType.BifCreationProcess, text: this.localePipe.transform(\"creation\") },\r\n    { value: BifMetadataType.BifWritebackProcess, text: this.localePipe.transform(\"writeback\") },\r\n  ];\r\n\r\n  //å¯ç¨ç¶æéç½®\r\n  @ViewChild(\"comboEnabledState\")\r\n  comboEnabledState: ComboListComponent;\r\n  comboEnabledStateIdField = \"value\";\r\n  comboEnabledStateValueField = \"value\";\r\n  comboEnabledStateTextField = \"text\";\r\n  comboEnabledStateData = [\r\n    { value: \"\", text: this.localePipe.transform(\"all\") },\r\n    { value: \"true\", text: this.localePipe.transform(\"enabled\") },\r\n    { value: \"false\", text: this.localePipe.transform(\"disabled\") },\r\n  ];\r\n\r\n  //ç³»ç»é¢ç½®éç½®\r\n  @ViewChild(\"comboSysInit\")\r\n  comboSysInit: ComboListComponent;\r\n  comboSysInitIdField = \"value\";\r\n  comboSysInitValueField = \"value\";\r\n  comboSysInitTextField = \"text\";\r\n  comboSysInitData = [\r\n    { value: \"\", text: this.localePipe.transform(\"all\") },\r\n    { value: \"true\", text: this.localePipe.transform(\"yes\") },\r\n    { value: \"false\", text: this.localePipe.transform(\"no\") },\r\n  ];\r\n\r\n  constructor(\r\n    private procHelpService: ProcessListHelpService,\r\n    private messager: MessagerService,\r\n    private notify: NotifyService,\r\n    private metadataService: GSPMetadataRTService,\r\n    private modalService: BsModalService,\r\n    private injector: Injector,\r\n    private resolver: ComponentFactoryResolver,\r\n    private localePipe: AifLocalePipe,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  processNameChange(name: string) {\r\n    this.queryParam.filterArgs.name = new TextValue();\r\n    this.queryParam.filterArgs.name.hasValue = true;\r\n    this.queryParam.filterArgs.name.value = name;\r\n    this.queryParam.filterArgsExt.name = name;\r\n  }\r\n\r\n  processTypeChange({ selections }) {\r\n    const item = selections[0];\r\n    this.queryParam.filterArgs.billProcessType = new TextValue();\r\n    if (item != null) {\r\n      if (item.value != \"\") {\r\n        this.queryParam.filterArgs.billProcessType.hasValue = true;\r\n      }\r\n      this.queryParam.filterArgs.billProcessType.value = item.value;\r\n    }\r\n  }\r\n\r\n  enabledStateChange({ selections }) {\r\n    const item = selections[0];\r\n    this.queryParam.filterArgs.isEnabled = new TextValue();\r\n    if (item != null) {\r\n      if (item.value != \"\") {\r\n        this.queryParam.filterArgs.isEnabled.hasValue = true;\r\n      }\r\n      this.queryParam.filterArgs.isEnabled.value = String(item.value);\r\n    }\r\n  }\r\n\r\n  sysInitChange({ selections }) {\r\n    const item = selections[0];\r\n    this.queryParam.filterArgs.sysInit = new TextValue();\r\n    if (item != null) {\r\n      if (item.value != \"\") {\r\n        this.queryParam.filterArgs.sysInit.hasValue = true;\r\n      }\r\n      this.queryParam.filterArgs.sysInit.value = String(item.value);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * æå¼ä¸æ¸¸åæ®VOéæ©å¨\r\n   */\r\n  selectUpBill() {\r\n    const compFactory = this.resolver.resolveComponentFactory(SelectMetadataRTComponent);\r\n    const compRef = compFactory.create(this.injector);\r\n    compRef.instance.typeList = \"GSPViewModel\";\r\n\r\n    compRef.instance.selectedMetadata.subscribe(\r\n      (metadata4RefDto: Metadata4RefDto) => {\r\n        this.clearUpBill();\r\n        let upVODto = metadata4RefDto.metadata;\r\n        let upVO: GSPViewModel = JSON.parse(upVODto.content);\r\n\r\n        switch (CommonModelTypeHelper.judgeVoTemplateType(upVO)) {\r\n          //éä»£çVO\r\n          case VOTemplateType.FromBE:\r\n            {\r\n              this.queryParam.filterArgs.upBillVoId = new TextValue();\r\n              this.queryParam.filterArgs.upBillVoId.hasValue = true;\r\n              this.queryParam.filterArgs.upBillVoId.value = upVO.ID;\r\n              this.queryParam.filterArgsExt.upBillVoName = upVO.MainObject.Name;\r\n            }\r\n            break;\r\n          default:\r\n            this.notify.error(this.localePipe.transform(\"pleaseSelectNonVirtualVO\"));\r\n            break;\r\n        };\r\n      },\r\n      (err) => {\r\n        console.error(err);\r\n        //todo ç¡®å®å¼å¸¸ç»æ, ç®åéç¨å¼å®¹åå¼æ¹å¼\r\n        this.messager.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));\r\n        this.clearUpBill();\r\n      }\r\n    );\r\n\r\n    const modalConfig = {\r\n      title: this.localePipe.transform(\"billSelector\"),\r\n      width: 930,\r\n      height: 573,\r\n      showButtons: false\r\n    };\r\n    const dialog = this.modalService.show(compRef, modalConfig);\r\n    compRef.instance.closeModalEmitter.subscribe($event => dialog.close());\r\n  }\r\n\r\n  /**\r\n   * æå¼ä¸æ¸¸åæ®VOéæ©å¨\r\n   */\r\n  selectDownBill() {\r\n    const compFactory = this.resolver.resolveComponentFactory(SelectMetadataRTComponent);\r\n    const compRef = compFactory.create(this.injector);\r\n    compRef.instance.typeList = \"GSPViewModel\";\r\n\r\n    compRef.instance.selectedMetadata.subscribe(\r\n      (metadata4RefDto: Metadata4RefDto) => {\r\n        this.clearDownBill();\r\n        let downVODto = metadata4RefDto.metadata;\r\n        let downVO: GSPViewModel = JSON.parse(downVODto.content);\r\n\r\n        switch (CommonModelTypeHelper.judgeVoTemplateType(downVO)) {\r\n          //éä»£çVO\r\n          case VOTemplateType.FromBE:\r\n            {\r\n              this.queryParam.filterArgs.downBillVoId = new TextValue();\r\n              this.queryParam.filterArgs.downBillVoId.hasValue = true;\r\n              this.queryParam.filterArgs.downBillVoId.value = downVO.ID;\r\n              this.queryParam.filterArgsExt.downBillVoName = downVO.MainObject.Name;\r\n            }\r\n            break;\r\n          default:\r\n            this.notify.error(this.localePipe.transform(\"pleaseSelectNonVirtualVO\"));\r\n            break;\r\n        };\r\n      },\r\n      (err) => {\r\n        console.error(err);\r\n        //todo ç¡®å®å¼å¸¸ç»æ, ç®åéç¨å¼å®¹åå¼æ¹å¼\r\n        this.messager.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));\r\n        this.clearUpBill();\r\n      }\r\n    );\r\n\r\n    const modalConfig = {\r\n      title: this.localePipe.transform(\"billSelector\"),\r\n      width: 930,\r\n      height: 573,\r\n      showButtons: false\r\n    };\r\n    const dialog = this.modalService.show(compRef, modalConfig);\r\n    compRef.instance.closeModalEmitter.subscribe($event => dialog.close());\r\n  }\r\n\r\n  /**\r\n   * æ¸é¤æµç¨åç§°\r\n   */\r\n  clearProcessName() {\r\n    delete this.queryParam.filterArgs.name;\r\n    this.queryParam.filterArgsExt.name = null;\r\n  }\r\n\r\n  /**\r\n   * æ¸é¤éä¸­çæµç¨ç±»å\r\n   */\r\n  clearProcessType() {\r\n    delete this.queryParam.filterArgs.billProcessType;\r\n  }\r\n\r\n  /**\r\n   * æ¸é¤éä¸­çä¸æ¸¸åæ®ä¿¡æ¯\r\n   */\r\n  clearUpBill() {\r\n    delete this.queryParam.filterArgs.upBillVoId;\r\n    this.queryParam.filterArgsExt.upBillVoName = null;\r\n  }\r\n\r\n  /**\r\n   * æ¸é¤éä¸­çä¸æ¸¸åæ®ä¿¡æ¯\r\n   */\r\n  clearDownBill() {\r\n    delete this.queryParam.filterArgs.downBillVoId;\r\n    this.queryParam.filterArgsExt.downBillVoName = null;\r\n  }\r\n\r\n  /**\r\n   * æ¸é¤éä¸­çå¯ç¨ç¶æ\r\n   */\r\n  clearIsEnabled() {\r\n    delete this.queryParam.filterArgs.isEnabled;\r\n  }\r\n\r\n  /**\r\n   * æ¸é¤éä¸­çåå¸ç¶æ\r\n   */\r\n  clearIsPublished() {\r\n    // delete this.queryParam.filterArgs.isPublished;\r\n  }\r\n\r\n  /**\r\n   * æ¸é¤éä¸­çåå¸ç¶æ\r\n   */\r\n  clearSysInit() {\r\n    delete this.queryParam.filterArgs.sysInit;\r\n  }\r\n\r\n  /**\r\n   * ç¹å»ç­éæé®\r\n   */\r\n  clickBtnFilter() {\r\n    this.queryParam.filterArgs.pageIndex = 0;\r\n    this.onSearchEmitter.emit(this.queryParam);\r\n  }\r\n\r\n  /**\r\n   * ç¹å»æ¸ç©ºæé®\r\n   */\r\n  clickBtnClear() {\r\n    //éç½®ä¸ææ¡\r\n    this.comboProcessType.onClear();\r\n    this.comboProcessTypeData = this.comboProcessTypeData.map(item => ({ ...item }));\r\n\r\n    this.comboEnabledState.onClear();\r\n    this.comboEnabledStateData = this.comboEnabledStateData.map(item => ({ ...item }));\r\n\r\n    this.comboSysInit.onClear();\r\n    this.comboSysInitData = this.comboSysInitData.map(item => ({ ...item }));\r\n\r\n    // this.comboPublishedState.onClear();\r\n    // this.comboPublishedStateData = this.comboPublishedStateData.map(item => ({ ...item }));\r\n\r\n    //éç½®æ¥è¯¢åæ°\r\n    // const queryParam = {\r\n    //   filterArgs: new ProcessFilterConditionArgs(),\r\n    //   filterArgsExt: {}\r\n    // };\r\n    // queryParam.filterArgs.LoadFromJsonObject(this.queryParam.filterArgs.ConvertToJsonObject());\r\n    const queryParam = this.queryParam;\r\n    queryParam.filterArgsExt = {};\r\n\r\n    queryParam.filterArgs.isEnabled = null;\r\n    queryParam.filterArgs.billProcessType = null;\r\n    queryParam.filterArgs.upBillVoId = null;\r\n    queryParam.filterArgs.downBillVoId = null;\r\n    queryParam.filterArgs.sysInit = null;\r\n\r\n    // queryParam.filterArgs.pageSize = this.queryParam.filterArgs.pageSize;\r\n    // queryParam.filterArgs.pageIndex = this.queryParam.filterArgs.pageIndex;\r\n    // queryParam.filterArgs.orderByCode = this.queryParam.filterArgs.orderByCode;\r\n    // queryParam.filterArgs.orderByName = this.queryParam.filterArgs.orderByName;\r\n    // queryParam.filterArgs.OrderByLastModifiedTime = this.queryParam.filterArgs.OrderByLastModifiedTime;\r\n\r\n    this.queryParam = queryParam;\r\n  }\r\n}\r\n","import { NgModule } from \"@angular/core\";\r\nimport { AifLocalePipe } from \"./pipe/aif-ui-common-locale.pipe\";\r\n\r\n@NgModule({\r\n    declarations: [\r\n        AifLocalePipe\r\n    ],\r\n    exports: [\r\n        AifLocalePipe\r\n    ]\r\n})\r\nexport class AifUiCommonModule { }","export const BILL_TRACKER_LANG_RESOURCES = {\r\n    \"zh-CHS\": {\r\n        \"code\": \"ç¼å·\",\r\n        \"name\": \"åç§°\",\r\n        \"lastModifiedTime\": \"æåä¿®æ¹æ¶é´\",\r\n        \"upBill\": \"ä¸æ¸¸åæ®\",\r\n        \"downBill\": \"ä¸æ¸¸åæ®\",\r\n        \"processName\": \"æµç¨åç§°\",\r\n        \"processType\": \"æµç¨ç±»å\",\r\n        \"creation\": \"çå\",\r\n        \"writeback\": \"åå\",\r\n        \"enabledState\": \"å¯ç¨ç¶æ\",\r\n        \"sysInit\": \"ç³»ç»é¢ç½®\",\r\n        \"filter\": \"ç­é\",\r\n        \"all\": \"å¨é¨\",\r\n        \"enabled\": \"å·²å¯ç¨\",\r\n        \"disabled\": \"å·²ç¦ç¨\",\r\n        \"yes\": \"æ¯\",\r\n        \"no\": \"å¦\",\r\n        \"billSelector\": \"åæ®éæ©\",\r\n        \"querySolution\": \"ç­éæ¹æ¡\",\r\n        \"collapse\": \"æ¶èµ·\",\r\n        \"expand\": \"å±å¼\",\r\n        \"loading\": \"å è½½ä¸­\",\r\n        \"pleaseSelectNonVirtualVO\": \"è¯·éæ©éèæVO\",\r\n        \"pleaseSelectOneItemOnly\": \"è¯·éä¸­ä¸æ¡æ°æ®\",\r\n        \"isExtendProcess\": \"æ©å±æµç¨\",\r\n    },\r\n    \"en\": {\r\n        \"code\": \"Code\",\r\n        \"name\": \"Name\",\r\n        \"lastModifiedTime\": \"Last Modified Time\",\r\n        \"upBill\": \"Upstream Bill\",\r\n        \"downBill\": \"Downstream Bill\",\r\n        \"processName\": \"Process Name\",\r\n        \"processType\": \"Process Type\",\r\n        \"creation\": \"Creation\",\r\n        \"writeback\": \"Writeback\",\r\n        \"enabledState\": \"Enabled State\",\r\n        \"sysInit\": \"System Init\",\r\n        \"filter\": \"Filter\",\r\n        \"all\": \"All\",\r\n        \"enabled\": \"Enabled\",\r\n        \"disabled\": \"Disabled\",\r\n        \"yes\": \"Yes\",\r\n        \"no\": \"No\",\r\n        \"billSelector\": \"Bill Selector\",\r\n        \"querySolution\": \"Query Solution\",\r\n        \"collapse\": \"Collapse\",\r\n        \"expand\": \"Expand\",\r\n        \"loading\": \"Loading...\",\r\n        \"pleaseSelectNonVirtualVO\": \"Please select non-virtual VO\",\r\n        \"pleaseSelectOneItemOnly\": \"Please select only one item\",\r\n        \"isExtendProcess\": \"Extend Process\",\r\n    },\r\n    \"zh-CHT\": {\r\n        \"code\": \"ç·¨è\",\r\n        \"name\": \"åç¨±\",\r\n        \"lastModifiedTime\": \"æå¾ä¿®æ¹æé\",\r\n        \"upBill\": \"ä¸éå®æ\",\r\n        \"downBill\": \"ä¸éå®æ\",\r\n        \"processName\": \"æµç¨åç¨±\",\r\n        \"processType\": \"æµç¨é¡å\",\r\n        \"creation\": \"çå®\",\r\n        \"writeback\": \"åå¯«\",\r\n        \"enabledState\": \"åç¨çæ\",\r\n        \"sysInit\": \"ç³»çµ±é ç½®\",\r\n        \"filter\": \"ç¯©é¸\",\r\n        \"all\": \"å¨é¨\",\r\n        \"enabled\": \"å·²åç¨\",\r\n        \"disabled\": \"å·²ç¦ç¨\",\r\n        \"yes\": \"æ¯\",\r\n        \"no\": \"å¦\",\r\n        \"billSelector\": \"å®æé¸æ\",\r\n        \"querySolution\": \"ç¯©é¸æ¹æ¡\",\r\n        \"collapse\": \"æ¶èµ·\",\r\n        \"expand\": \"å±é\",\r\n        \"loading\": \"å è¼ä¸­\",\r\n        \"pleaseSelectNonVirtualVO\": \"è«é¸æéèæ¬VO\",\r\n        \"pleaseSelectOneItemOnly\": \"è«é¸ä¸­å£¹æ¢æ¸æ\",\r\n        \"isExtendProcess\": \"æ´å±æµç¨\",\r\n    }\r\n};","import { NgModule, LOCALE_ID } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { HttpClientModule } from '@angular/common/http';\r\n\r\nimport { CacheService, SessionService, HttpService } from '@ecp-caf/caf-common';\r\nimport { FrmEventBus, FuncsService, AppService, FrameworkService } from '@gsp-sys/rtf-common';\r\nimport { BusinessObjectRtService } from '@gsp-lcm/bo-rt-service';\r\nimport { MetadataRTSelectModule, GSPMetadataRTServiceModule, GSPMetadataRTService } from '@gsp-lcm/metadatart-selector';\r\nimport { FResponseToolbarModule } from '@farris/ui-response-toolbar';\r\nimport { ListFilterModule } from '@farris/ui-list-filter';\r\nimport { AngularDraggableModule } from '@farris/ui-draggable';\r\nimport { FarrisCommonModule } from '@farris/ui-common';\r\nimport { FarrisFormsModule } from '@farris/ui-forms';\r\nimport { FarrisSectionModule } from '@farris/ui-section';\r\nimport { DatagridEditorsModule, EditorProviders } from '@farris/ui-datagrid-editors';\r\nimport { DatagridModule } from '@farris/ui-datagrid';\r\nimport { ComboListModule } from '@farris/ui-combo-list';\r\nimport { InputGroupModule } from '@farris/ui-input-group';\r\nimport { FarrisDialogModule } from '@farris/ui-dialog';\r\nimport { SwitchModule } from '@farris/ui-switch';\r\nimport { FarrisTabsModule } from '@farris/ui-tabs';\r\nimport { LookupModule } from '@farris/ui-lookup';\r\nimport { LoadingModule, LoadingService } from '@farris/ui-loading';\r\nimport { NotifyModule } from '@farris/ui-notify';\r\nimport { MessagerModule } from '@farris/ui-messager';\r\nimport { ModalModule } from '@farris/ui-modal';\r\n\r\nimport { ProcessListHelpComponent } from './components/process-list-help/process-list-help.component';\r\nimport { ProcHelpQuerySolutionComponent } from './components/proc-help-query-solution/proc-help-query-solution.component';\r\nimport { ProcessListHelpService } from './services/process-list-help.service';\r\nimport { AifUiCommonModule } from '../aif-ui-common/aif-ui-common.module';\r\nimport { AifLocalePipe, BIF_LANG_RESOURCES } from '../aif-ui-common/pipe/aif-ui-common-locale.pipe';\r\nimport { BILL_TRACKER_LANG_RESOURCES } from './i18n/lang.resource';\r\n\r\n@NgModule({\r\n    imports: [\r\n        CommonModule,\r\n        HttpClientModule,\r\n        MetadataRTSelectModule,\r\n        GSPMetadataRTServiceModule.forRoot(\"\"),\r\n        FResponseToolbarModule,\r\n        ListFilterModule,\r\n        AngularDraggableModule,\r\n        FarrisCommonModule.forRoot(),\r\n        FarrisFormsModule,\r\n        FarrisSectionModule,\r\n        DatagridEditorsModule,\r\n        DatagridModule.forRoot([\r\n            ...EditorProviders\r\n        ]),\r\n        ComboListModule,\r\n        InputGroupModule,\r\n        FarrisDialogModule,\r\n        SwitchModule,\r\n        FarrisTabsModule,\r\n        LookupModule,\r\n        LoadingModule.forRoot({\r\n            message: 'Loading...'\r\n        }),\r\n        NotifyModule.forRoot(),\r\n        MessagerModule.forRoot({\r\n            width: 550,\r\n            height: 450\r\n        }),\r\n        ModalModule.forRoot(),\r\n        AifUiCommonModule,\r\n    ],\r\n    providers: [\r\n        CacheService,\r\n        SessionService,\r\n        HttpService,\r\n        FrmEventBus,\r\n        FuncsService,\r\n        LoadingService,\r\n        AppService,\r\n        FrameworkService,\r\n        { provide: LOCALE_ID, useValue: localStorage.getItem('languageCode') || 'zh-CHS' },\r\n        GSPMetadataRTService,\r\n        BusinessObjectRtService,\r\n        ProcessListHelpService,\r\n        { provide: BIF_LANG_RESOURCES, useValue: BILL_TRACKER_LANG_RESOURCES },\r\n        AifLocalePipe,\r\n    ],\r\n    declarations: [\r\n        ProcessListHelpComponent,\r\n        ProcHelpQuerySolutionComponent,\r\n    ],\r\n    entryComponents: [\r\n        ProcessListHelpComponent,\r\n        ProcHelpQuerySolutionComponent,\r\n    ]\r\n})\r\nexport class ProcessListHelpModule {\r\n\r\n}","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { ReactiveFormsModule, FormsModule } from '@angular/forms';\r\nimport { HttpClientModule } from '@angular/common/http';\r\n\r\nimport { WfProcessEditorComponent } from './wf-process-editor.component';\r\nimport { PerformerConfigService } from './views/performer/performer-config.service';\r\nimport { EntryFormEditorComponent } from './views/entryForm/entry-form-editor.component';\r\nimport { ExpressionEditorComponent } from './views/expressionEditor/expression-editor.component';\r\nimport { AssignPerformerConfigComponent } from './views/assign-performer-config/assign-performer-config.component';\r\nimport { SignRuleComponent } from './views/sign-rule/sign-rule.component';\r\nimport { ApprovelItemsComponent } from './views/approvel-items/approvel-items.component';\r\nimport { ExecuteFormsComponent } from './views/execute-forms/execute-forms.component';\r\nimport { JumpScopeComponent } from './views/jump-scope/jump-scope.component';\r\nimport { BackwardRuleComponent } from './views/backward-rule/backward-rule.component';\r\nimport { ActivityComponentComponent } from './views/activity-component/activity-component.component';\r\nimport { PerformerComponent } from './views/performer/performer.component';\r\nimport { PerformerEditComponent } from './views/performer/views/performer-edit/performer-edit.component';\r\nimport { UserPerformerComponent } from './views/performer/views/user-performer/user-performer.component';\r\nimport { ComponentPerformerComponent } from './views/performer/views/component-performer/component-performer.component';\r\nimport { PositionPerformerComponent } from './views/performer/views/position-performer/position-performer.component';\r\nimport { PerformerOptionsComponent } from './views/performer/views/performer-options/performer-options.component';\r\nimport { ReportingLineComponent } from './views/performer/views/reporting-line/reporting-line.component';\r\nimport { TitleExpressionComponent } from './views/title-expression/title-expression.component';\r\nimport { SaveAsEditComponent } from './views/save-as-edit/save-as-edit.component';\r\nimport { OrganizationPotentialOwnerComponent } from './views/organization-potential-owner/organization-potential-owner.component';\r\nimport { CustomizeActionComponent } from './views/customize-action/customize-action.component';\r\nimport { CustomizeActionListComponent } from './views/customize-action/views/customize-action-list/customize-action-list.component';\r\nimport { JumpScopePipe } from './views/jump-scope/jump-scope.pipe';\r\nimport { UsersNamePipe } from './views/performer/views/user-performer/users-name.pipe';\r\nimport { PROCESS_DESIGNER_APP_PROVIDERS, PROCESS_DESIGNER_DOMAIN_PROVIDERS, PROCESS_DESIGNER_PART_PROVIDERS } from './index';\r\n\r\nimport { SessionService, HttpService } from '@ecp-caf/caf-common';\r\nimport { ExpressionService, ExpressionModule } from '@gsp-svc/expression';\r\nimport { CommonComponentUiRTService, CommonComponentUiModule } from '@gsp-cmp/ccmp-ui';\r\nimport { SelectMetadataRTComponent, GSPMetadataRTServiceModule, MetadataRTSelectModule } from '@gsp-lcm/metadatart-selector';\r\nimport { SysManagerUIModule } from '@gsp-sys/sysmgr-ui';\r\nimport { RtfAppHelpModule } from '@gsp-sys/rtf-ui';\r\n\r\nimport { TreeTableModule } from '@farris/ui-treetable';\r\nimport { PropertyPanelModule } from '@farris/ui-property-panel';\r\nimport { DataTableModule } from '@farris/ui-datatable';\r\nimport { LayoutModule } from '@farris/ui-layout';\r\nimport { NotifyModule } from '@farris/ui-notify';\r\nimport { FarrisDialogModule } from '@farris/ui-dialog';\r\nimport { SplitterModule } from '@farris/ui-splitter';\r\nimport { InputGroupModule } from '@farris/ui-input-group';\r\nimport { LookupModule } from '@farris/ui-lookup';\r\nimport { FlexLayoutModule } from '@farris/ui-flex-layout';\r\nimport { FarrisPanelModule } from '@farris/ui-panel';\r\nimport { FarrisResponsiveModule } from '@farris/ui-responsive';\r\nimport { FarrisTabsModule } from '@farris/ui-tabs';\r\nimport { LoadingModule } from '@farris/ui-loading';\r\nimport { MessagerModule } from '@farris/ui-messager';\r\nimport { ModalModule } from '@farris/ui-modal';\r\nimport { PopoverModule } from '@farris/ui-popover';\r\nimport { PaginationModule } from '@farris/ui-pagination';\r\nimport { FarrisDropdownModule } from '@farris/ui-dropdown';\r\nimport { DatagridEditorsModule, EditorProviders } from '@farris/ui-datagrid-editors';\r\nimport { DatagridModule } from '@farris/ui-datagrid';\r\nimport { ComboListModule } from '@farris/ui-combo-list';\r\nimport { FarrisFormsModule } from '@farris/ui-forms';\r\nimport { SwitchModule } from '@farris/ui-switch';\r\nimport { WizardModule } from '@farris/ui-wizard';\r\nimport { FarrisSectionModule } from '@farris/ui-section';\r\nimport { PerfectScrollbarModule } from '@farris/ui-perfect-scrollbar';\r\nimport { ProcessDeUtil } from './domain/process-de-util';\r\nimport { CallActivitySubProcessComponent } from './views/call-activity-sub-process/call-activity-sub-process.component';\r\nimport { WfBizprocessLookupModule } from '@gsp-wf/wf-bizprocess-lookup';\r\nimport { TimeLimitControlComponent } from './views/time-limit-control/time-limit-control.component';\r\nimport { SendMessageOperationComponent } from './views/time-limit-control/send-message-operation/send-message-operation.component';\r\nimport { NumberSpinnerModule } from '@farris/ui-number-spinner';\r\nimport { EventDefinitionComponent } from './views/event-definition/event-definition.component';\r\nimport { AnonymousSetComponent } from './views/anonymous-set/anonymous-set.component';\r\nimport { ProcessVariablesComponent } from './views/process-variables/process-variables.component';\r\nimport { VariableSettingComponent } from './views/variable-setting/variable-setting.component';\r\nimport { ConstantEditComponent } from './views/variable-setting/views/constant-edit/constant-edit.component';\r\nimport { ComponentEditComponent } from './views/variable-setting/views/component-edit/component-edit.component';\r\nimport { MessageNoticeComponent } from './views/message-notice/message-notice.component';\r\nimport { MessageNoticeEditComponent } from './views/message-notice/message-notice-edit/message-notice-edit.component';\r\nimport { AddExecuteFormComponent } from './views/execute-forms/add-execute-form/add-execute-form.component';\r\nimport { FormFormatConfigComponent } from './views/execute-forms/form-format-config/form-format-config.component';\r\nimport { FormConfigContainerComponent } from './views/execute-forms/form-config-container/form-config-container.component';\r\nimport { FarrisButtonModule } from '@farris/ui-button';\r\nimport { ParameterSettingComponent } from './views/execute-forms/parameter-setting/parameter-setting.component';\r\nimport { FormOperationConfigComponent } from './views/execute-forms/form-operation-config/form-operation-config.component';\r\nimport { NoteComponent } from './views/note/note.component';\r\nimport { ApprovalPivotComponent } from './views/approval-pivot/approval-pivot.component';\r\nimport { WfReportDefHelpComponent } from './views/performer/views/reporting-line/service/wf-report-def-help.component';\r\nimport { WfReportDefHelpService } from './views/performer/views/reporting-line/service/wf-report-def-help.service';\r\nimport { UrgeHandleRuleComponent } from './views/urge-handle-rule/urge-handle-rule.component';\r\n\r\nimport { MatrixPerformerComponent } from './views/performer/views/matrix-performer/matrix-performer.component';\r\nimport { EnumListComponent } from './views/performer/views/matrix-performer/enum-list/enum-list.component';\r\nimport { AutoHandleOperationComponent } from './views/time-limit-control/auto-handle-operation/auto-handle-operation.component';\r\nimport { ProcessListHelpModule } from './aif-process-list-help/process-list-help.module';\r\nimport { ProcessListHelpComponent } from './aif-process-list-help/components/process-list-help/process-list-help.component';\r\nimport { ExtendPropertyComponent } from './views/extend-property/extend-property.component';\r\nimport { CallActivitySubProcess2Component } from './views/call-activity-sub-process2/call-activity-sub-process2.component';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    WfProcessEditorComponent,\r\n    EntryFormEditorComponent,\r\n    ExpressionEditorComponent,\r\n    AssignPerformerConfigComponent,\r\n    SignRuleComponent,\r\n    ApprovelItemsComponent,\r\n    ExecuteFormsComponent,\r\n    JumpScopeComponent,\r\n    BackwardRuleComponent,\r\n    JumpScopePipe,\r\n    ActivityComponentComponent,\r\n    PerformerComponent,\r\n    PerformerEditComponent,\r\n    UserPerformerComponent,\r\n    ComponentPerformerComponent,\r\n    PositionPerformerComponent,\r\n    PerformerOptionsComponent,\r\n    UsersNamePipe,\r\n    ReportingLineComponent,\r\n    TitleExpressionComponent,\r\n    SaveAsEditComponent,\r\n    OrganizationPotentialOwnerComponent,\r\n    CustomizeActionComponent,\r\n    CustomizeActionListComponent,\r\n    CallActivitySubProcessComponent,\r\n    TimeLimitControlComponent,\r\n    SendMessageOperationComponent,\r\n    EventDefinitionComponent,\r\n    AnonymousSetComponent,\r\n    ProcessVariablesComponent,\r\n    VariableSettingComponent,\r\n    ConstantEditComponent,\r\n    ComponentEditComponent,\r\n    MessageNoticeComponent,\r\n    MessageNoticeEditComponent,\r\n    AddExecuteFormComponent,\r\n    FormFormatConfigComponent,\r\n    FormConfigContainerComponent,\r\n    ParameterSettingComponent,\r\n    FormOperationConfigComponent,\r\n    NoteComponent,\r\n    ApprovalPivotComponent,\r\n    WfReportDefHelpComponent,\r\n    UrgeHandleRuleComponent,\r\n    NoteComponent,\r\n    MatrixPerformerComponent,\r\n    EnumListComponent,\r\n    AutoHandleOperationComponent,\r\n    ExtendPropertyComponent,\r\n    CallActivitySubProcess2Component,\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    ReactiveFormsModule,\r\n    FormsModule,\r\n    HttpClientModule,\r\n    SysManagerUIModule,\r\n    RtfAppHelpModule,\r\n    CommonComponentUiModule,\r\n    GSPMetadataRTServiceModule.forRoot(''),\r\n    MetadataRTSelectModule,\r\n    TreeTableModule,\r\n    DataTableModule,\r\n    LayoutModule,\r\n    NotifyModule,\r\n    FarrisDialogModule,\r\n    SplitterModule,\r\n    InputGroupModule,\r\n    LookupModule,\r\n    FlexLayoutModule,\r\n    FarrisPanelModule,\r\n    FarrisResponsiveModule,\r\n    ExpressionModule,\r\n    PropertyPanelModule,\r\n    FarrisTabsModule,\r\n    LoadingModule.forRoot({\r\n      message: 'å è½½ä¸­...'\r\n    }),\r\n    MessagerModule.forRoot({\r\n      width: 500\r\n    }),\r\n    ModalModule,\r\n    PopoverModule,\r\n    PaginationModule,\r\n    FarrisDropdownModule,\r\n    DatagridEditorsModule,\r\n    DatagridModule.forRoot([\r\n      ...EditorProviders\r\n    ]),\r\n    ComboListModule,\r\n    WizardModule,\r\n    FarrisFormsModule,\r\n    SwitchModule,\r\n    WfBizprocessLookupModule,\r\n    NumberSpinnerModule,\r\n    PerfectScrollbarModule,\r\n    FarrisSectionModule,\r\n    FarrisButtonModule,\r\n    ProcessListHelpModule,\r\n  ],\r\n  providers: [\r\n    SessionService,\r\n    HttpService,\r\n    ExpressionService,\r\n    CommonComponentUiRTService,\r\n    PROCESS_DESIGNER_APP_PROVIDERS,\r\n    PROCESS_DESIGNER_DOMAIN_PROVIDERS,\r\n    PROCESS_DESIGNER_PART_PROVIDERS,\r\n    PerformerConfigService,\r\n    ProcessDeUtil,\r\n    WfReportDefHelpService\r\n  ],\r\n  exports: [WfProcessEditorComponent],\r\n  entryComponents: [\r\n    EntryFormEditorComponent,\r\n    ExpressionEditorComponent,\r\n    AssignPerformerConfigComponent,\r\n    SignRuleComponent,\r\n    ApprovelItemsComponent,\r\n    ExecuteFormsComponent,\r\n    JumpScopeComponent,\r\n    BackwardRuleComponent,\r\n    ActivityComponentComponent,\r\n    SelectMetadataRTComponent,\r\n    PerformerComponent,\r\n    PerformerEditComponent,\r\n    UserPerformerComponent,\r\n    ComponentPerformerComponent,\r\n    PositionPerformerComponent,\r\n    PerformerOptionsComponent,\r\n    ReportingLineComponent,\r\n    TitleExpressionComponent,\r\n    SaveAsEditComponent,\r\n    OrganizationPotentialOwnerComponent,\r\n    CustomizeActionComponent,\r\n    CustomizeActionListComponent,\r\n    CallActivitySubProcessComponent,\r\n    TimeLimitControlComponent,\r\n    SendMessageOperationComponent,\r\n    EventDefinitionComponent,\r\n    AnonymousSetComponent,\r\n    ProcessVariablesComponent,\r\n    VariableSettingComponent,\r\n    ConstantEditComponent,\r\n    ComponentEditComponent,\r\n    MessageNoticeComponent,\r\n    MessageNoticeEditComponent,\r\n    AddExecuteFormComponent,\r\n    FormFormatConfigComponent,\r\n    FormConfigContainerComponent,\r\n    ParameterSettingComponent,\r\n    FormOperationConfigComponent,\r\n    NoteComponent,\r\n    ApprovalPivotComponent,\r\n    UrgeHandleRuleComponent,\r\n    NoteComponent,\r\n    MatrixPerformerComponent,\r\n    EnumListComponent,\r\n    AutoHandleOperationComponent,\r\n    ProcessListHelpComponent,\r\n    ExtendPropertyComponent,\r\n    CallActivitySubProcess2Component,\r\n  ],\r\n})\r\nexport class WfProcessEditorModule { }\r\n"],"names":["ActualParameter","of","Subject","map","forkJoin"],"mappings":"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"}
