/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, Input, ViewChild, forwardRef, Output, EventEmitter, TemplateRef } from '@angular/core';
import { DialogComponent } from '@farris/ui-dialog';
import { NG_VALUE_ACCESSOR } from '@angular/forms';
import { FDropdownDirective } from '@farris/ui-dropdown';
import { UploadDialogService } from '@gsp-svc/formdoc-upload';
import { MessagerService } from '@farris/ui-messager';
import { FileUploadEntity, GspDocMetadata, GspDocUploadEntity } from '../../entity/attachment';
import { SignHereComponent } from '@gsp-wf/wf-sign';
import { AvatarComponent } from '@farris/ui-avatar';
import { DownloadService } from '@gsp-svc/file-load';
import { TaskService } from '../../service/task.service';
import { CommonComment } from '../../entity/comment';
import { forkJoin, of } from 'rxjs';
import { HttpService } from '@ecp-caf/caf-common';
import { DatagridComponent } from '@farris/ui-datagrid';
import { I18nService } from '../../service/i18n/i18n.service';
import { EditorTypes } from '@farris/ui-datagrid-editors';
import { LoadingService } from '@farris/ui-loading';
import { ConfigCode } from '../../entity/task-center-config';
import { NotifyService } from '@farris/ui-notify';
var TaskCommentComponent = /** @class */ (function () {
    function TaskCommentComponent(taskService, httpSvc, uploadDialog, messageService, i18nService, loadingService, notify) {
        this.taskService = taskService;
        this.httpSvc = httpSvc;
        this.uploadDialog = uploadDialog;
        this.messageService = messageService;
        this.i18nService = i18nService;
        this.loadingService = loadingService;
        this.notify = notify;
        this.showAttachment = true; //是否显示附件上传，组件控制
        //是否显示附件上传，组件控制
        this.showSign = true; //是否显示签名，组件控制（不同动作可能会不显示）
        //是否显示签名，组件控制（不同动作可能会不显示）
        this.showCommonComment = true; //是否显示常用意见
        this.placeholder = '';
        this.textAreaHeight = 120; //文字框的高度
        this.attachment = new EventEmitter(); //附件
        //附件
        this.signature = new EventEmitter(); //上传签名之后，发送签名id
        //常用意见删除
        this._value = '';
        this.attachmentList = [];
        this.ifShowAttachment = false; //任务中心配置，是否显示附件上传
        //任务中心配置，是否显示附件上传
        this.ifShowSign = false; //任务中心配置，是否显示手写签名
        //临时保存上传的图片
        this.downloadService = new DownloadService();
        this.ifUseSign = false; //是否使用手写
        //是否使用手写
        this.ifUseImg = true; //是否使用上传图片
        //是否使用上传图片
        this.ifEnableSign = true; //是否默认启用签名
        //是否默认启用签名
        this.ifUploadImg = false; //是否上传过图片
        //是否上传过图片
        this.ifCanEditSign = true; //是否允许编辑签名
        //原始的签名id
        this.commentList = [];
        this.originCommentList = [];
        this.commentColumns = [];
        this.onModelChange = function (obj) { };
        this.onModelTouched = function (obj) { };
        /**
         * 系统预置的不允许编辑删除
         * @param data data.rowData为实体数据
         * @return
         */
        this.beforeEdit = function (data) {
            if (data.rowData.userId == '*') {
                return of(false);
            }
            return of(true);
        };
    }
    Object.defineProperty(TaskCommentComponent.prototype, "TaskCenterConfig", {
        set: 
        //文字框的高度
        /**
         * @param {?} configList
         * @return {?}
         */
        function (configList) {
            /** @type {?} */
            var attachment = configList.find(function (a) { return a.configCode == ConfigCode.If_Show_Attachment; });
            /** @type {?} */
            var sign = configList.find(function (a) { return a.configCode == ConfigCode.If_Show_Signature; });
            /** @type {?} */
            var enableSign = configList.find(function (a) { return a.configCode == ConfigCode.If_Use_Sign_By_Default; });
            /** @type {?} */
            var editSign = configList.find(function (a) { return a.configCode === ConfigCode.If_Can_Edit_Signature; });
            if (((/** @type {?} */ (window))).gspframeworkService.common) {
                this.curUserId = ((/** @type {?} */ (window))).gspframeworkService.common.userInfos.get().userId;
            }
            else {
                this.curUserId = ((/** @type {?} */ (window))).parent.gspframeworkService.common.userInfos.get().userId;
            }
            attachment && attachment.currentValue === 'true' && (this.ifShowAttachment = true);
            sign && sign.currentValue === 'true' && (this.ifShowSign = true);
            enableSign && enableSign.currentValue === 'false' && (this.ifEnableSign = false);
            editSign && editSign.currentValue === 'false' && (this.ifCanEditSign = false);
            if (this.ifShowSign && this.ifEnableSign) {
                this.getUserSign(this.curUserId);
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TaskCommentComponent.prototype, "value", {
        get: /**
         * @return {?}
         */
        function () {
            return this._value;
        },
        set: /**
         * @param {?} v
         * @return {?}
         */
        function (v) {
            if (this._value !== v) {
                this._value = v;
                this.onModelChange(v);
            }
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    TaskCommentComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.commentColumns = [{
                field: 'message',
                width: 100,
                title: this.i18nService.getValue('comment.static.content'),
                editor: { type: EditorTypes.TEXTBOX, options: {} },
            }, {
                field: 'userId',
                width: 20,
                title: this.i18nService.getValue('comment.static.type'),
                template: this.commentTypeCell
            }, {
                field: 'operate',
                width: 20,
                title: this.i18nService.getValue('comment.static.operate'),
                template: this.commentOperateCell
            }];
        // 获取常用意见列表
        this.loadComments();
    };
    /**
     * @return {?}
     */
    TaskCommentComponent.prototype.onEditComment = /**
     * @return {?}
     */
    function () {
        this.dropDownEl.close();
        this.commentDialog.show();
    };
    /**
     * @return {?}
     */
    TaskCommentComponent.prototype.loadComments = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.taskService.getCommentList().subscribe(function (data) {
            _this.commentList = data;
            _this.originCommentList = tslib_1.__spread(data);
        });
    };
    /**
     * ControlValueAccessor必须实现的方法
     */
    /**
     * ControlValueAccessor必须实现的方法
     * @param {?} value
     * @return {?}
     */
    TaskCommentComponent.prototype.writeValue = /**
     * ControlValueAccessor必须实现的方法
     * @param {?} value
     * @return {?}
     */
    function (value) {
        if (value !== this.value) {
            this.value = value;
        }
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    TaskCommentComponent.prototype.registerOnChange = /**
     * @param {?} fn
     * @return {?}
     */
    function (fn) {
        this.onModelChange = fn;
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    TaskCommentComponent.prototype.registerOnTouched = /**
     * @param {?} fn
     * @return {?}
     */
    function (fn) {
        this.onModelTouched = fn;
    };
    /**
     * 选择一条常用意见后事件
     */
    /**
     * 选择一条常用意见后事件
     * @param {?} data
     * @return {?}
     */
    TaskCommentComponent.prototype.buttonClick = /**
     * 选择一条常用意见后事件
     * @param {?} data
     * @return {?}
     */
    function (data) {
        this.dropDownEl.close();
        this.value = data;
    };
    /**
     * 上传附件
     */
    /**
     * 上传附件
     * @return {?}
     */
    TaskCommentComponent.prototype.uploadAttachment = /**
     * 上传附件
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var isRepeat = false;
        this.uploadDialog.uploadFile(this.processInstanceId, 'wf_attachment').then(function (re) {
            var e_1, _a, e_2, _b;
            try {
                for (var _c = tslib_1.__values(((/** @type {?} */ (re)))), _d = _c.next(); !_d.done; _d = _c.next()) {
                    var i = _d.value;
                    isRepeat = false;
                    try {
                        for (var _e = tslib_1.__values(_this.attachmentList), _f = _e.next(); !_f.done; _f = _e.next()) {
                            var attach = _f.value;
                            if (attach.fileName === i.fileName) {
                                _this.messageService.info('包含重复文件' + i.fileName);
                                isRepeat = true;
                                break;
                            }
                        }
                    }
                    catch (e_2_1) { e_2 = { error: e_2_1 }; }
                    finally {
                        try {
                            if (_f && !_f.done && (_b = _e.return)) _b.call(_e);
                        }
                        finally { if (e_2) throw e_2.error; }
                    }
                    if (!isRepeat) {
                        _this.attachmentList.push(i);
                    }
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (_d && !_d.done && (_a = _c.return)) _a.call(_c);
                }
                finally { if (e_1) throw e_1.error; }
            }
            _this.attachment.emit(_this.attachmentList);
            //执行上传附件
            /** @type {?} */
            var files = new FileUploadEntity();
            files.rootId = "wf_attachment";
            files.metadataIdList = [];
            _this.attachmentList.forEach(function (a) {
                files.metadataIdList.push(a.metadataId);
            });
            files.metadataIdList.length && _this.taskService.uploadAttachment(files).subscribe(function () { });
        });
    };
    /**
     * 删除附件
     */
    /**
     * 删除附件
     * @param {?} attachment
     * @return {?}
     */
    TaskCommentComponent.prototype.attachmentDelete = /**
     * 删除附件
     * @param {?} attachment
     * @return {?}
     */
    function (attachment) {
        /** @type {?} */
        var gspDocDeleteEntity = {
            rootId: "wf_attachment",
            metadataId: attachment.metadataId,
            mode: "Formal"
        };
        /** @type {?} */
        var index = this.attachmentList.indexOf(attachment);
        if (index > -1) {
            this.attachmentList.splice(index, 1);
        }
        this.attachment.emit(this.attachmentList);
        this.taskService.deleteAttachment(gspDocDeleteEntity).subscribe(function () { });
    };
    /**
     * 获取不同格式附件的缩略图
     */
    /**
     * 获取不同格式附件的缩略图
     * @param {?} attachmentInfo
     * @return {?}
     */
    TaskCommentComponent.prototype.imageUrl = /**
     * 获取不同格式附件的缩略图
     * @param {?} attachmentInfo
     * @return {?}
     */
    function (attachmentInfo) {
        /** @type {?} */
        var url = '/platform/runtime/wf/webapp/mobiletaskcenter/assets/accessory/';
        return url + this.taskService.createItem(attachmentInfo) + '.svg';
    };
    /**
     * 展示手写签名dialog
     */
    /**
     * 展示手写签名dialog
     * @return {?}
     */
    TaskCommentComponent.prototype.showSignDialog = /**
     * 展示手写签名dialog
     * @return {?}
     */
    function () {
        this.signDialog.show();
        if (!this.ifEnableSign) {
            this.getUserSign(this.curUserId);
        }
    };
    /**
   * 点击删除签名
   */
    /**
     * 点击删除签名
     * @return {?}
     */
    TaskCommentComponent.prototype.clickToDeleteImage = /**
     * 点击删除签名
     * @return {?}
     */
    function () {
        this.signatureImage = '';
        this.signature.emit(null);
        /** @type {?} */
        var load = this.loadingService.show();
        this.taskService.addTaskCenterConfig(ConfigCode.If_Use_Sign_By_Default, 'false').subscribe(function (re) {
            load.close();
        }, function () {
            load.close();
        });
    };
    /**
     * @return {?}
     */
    TaskCommentComponent.prototype.clickToUseSign = /**
     * @return {?}
     */
    function () {
        this.ifUseImg = false;
        this.ifUseSign = true;
        /** @type {?} */
        var canvas = this.signaturePad.canvasDiv.nativeElement.querySelector('canvas');
        canvas.height = 252;
        canvas.width = 665;
    };
    /**
     * @return {?}
     */
    TaskCommentComponent.prototype.clickToUploadImg = /**
     * @return {?}
     */
    function () {
        this.farrisAvatar.onClick();
    };
    /**
     * @return {?}
     */
    TaskCommentComponent.prototype.clickToConfirm = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var image;
        if (this.signaturePad && this.signaturePad.isDraw) { //如果签过名
            image = this.signaturePad.confirm();
        }
        else if (this.ifUploadImg) { //如果上传过图片
            image = this.tmpSignatureImage;
        }
        if (image) {
            this.uploadSignatureImg(image);
        }
        else {
            if (this.tmpSignatureImage) {
                this.signatureImage = this.tmpSignatureImage;
                this.signature.emit(this.originSignId);
                if (!this.ifEnableSign) {
                    /** @type {?} */
                    var load_1 = this.loadingService.show();
                    this.taskService.addTaskCenterConfig(ConfigCode.If_Use_Sign_By_Default, 'true').subscribe(function (re) {
                        load_1.close();
                    }, function () {
                        load_1.close();
                    });
                }
            }
            this.signDialog.close();
        }
    };
    /**
     * @return {?}
     */
    TaskCommentComponent.prototype.clickToReset = /**
     * @return {?}
     */
    function () {
        this.ifUseSign = false;
        this.ifUseImg = true;
        this.signatureImage = '';
        this.tmpSignatureImage = '';
        this.signature.emit('');
    };
    /**
     * @return {?}
     */
    TaskCommentComponent.prototype.clickToCancel = /**
     * @return {?}
     */
    function () {
        this.signDialog.close();
    };
    /**
     * 上传图片后事件
     * event.base64 是图片信息,event.name是带后缀的图片名，event.type如image/jpeg
     */
    /**
     * 上传图片后事件
     * event.base64 是图片信息,event.name是带后缀的图片名，event.type如image/jpeg
     * @param {?} event
     * @return {?}
     */
    TaskCommentComponent.prototype.imgChange = /**
     * 上传图片后事件
     * event.base64 是图片信息,event.name是带后缀的图片名，event.type如image/jpeg
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.ifUseImg = true;
        this.ifUseSign = false;
        this.ifUploadImg = true;
        /** @type {?} */
        var image = event.base64;
        this.tmpSignatureImage = image;
        this.signatureImage = image;
    };
    /**
     * @private
     * @param {?} image
     * @return {?}
     */
    TaskCommentComponent.prototype.uploadSignatureImg = /**
     * @private
     * @param {?} image
     * @return {?}
     */
    function (image) {
        var _this = this;
        /** @type {?} */
        var uploadSignature = new GspDocUploadEntity();
        uploadSignature.fileContent = image.split(',')[1];
        uploadSignature.filePath = this.curUserId;
        uploadSignature.mode = "Formal";
        uploadSignature.metadata = new GspDocMetadata();
        uploadSignature.metadata.id = this.taskService.createNM();
        uploadSignature.metadata.fileName = this.taskService.createNM() + ".png";
        uploadSignature.metadata.rootId = "taskcentersignature";
        uploadSignature.metadata.docType = "png";
        /** @type {?} */
        var load = this.loadingService.show();
        this.taskService.uploadSignature(uploadSignature).subscribe(function (signId) {
            load.close();
            _this.originSignId = signId;
            _this.signature.emit(signId);
            _this.signatureImage = image;
            _this.signDialog.close();
        }, function (error) {
            load.close();
            _this.messageService.error('上传签名失败');
        });
    };
    /**
     * 获取用户的最近一次签名
     */
    /**
     * 获取用户的最近一次签名
     * @private
     * @param {?} userId
     * @return {?}
     */
    TaskCommentComponent.prototype.getUserSign = /**
     * 获取用户的最近一次签名
     * @private
     * @param {?} userId
     * @return {?}
     */
    function (userId) {
        var _this = this;
        /** @type {?} */
        var load = this.loadingService.show();
        this.taskService.getUserSign(userId).subscribe(function (result) {
            load.close();
            if (result && result.length) {
                /** @type {?} */
                var sign;
                if (result.length == 1) {
                    sign = result[0];
                }
                else {
                    /** @type {?} */
                    var list = result.filter(function (a) { return a && a.lastModifiedTime; });
                    sign = list.reduce(function (a, b) {
                        return a.lastModifiedTime > b.lastModifiedTime ? a : b;
                    });
                }
                _this.signature.emit(sign.id);
                _this.signatureImage = _this.downloadService.getDownloadUrl(sign.id, 'taskcentersignature');
                _this.tmpSignatureImage = _this.signatureImage;
            }
        }, function (error) {
            console.error(error);
            load.close();
        });
    };
    /**
     * 新增一条常用意见
     */
    /**
     * 新增一条常用意见
     * @return {?}
     */
    TaskCommentComponent.prototype.add = /**
     * 新增一条常用意见
     * @return {?}
     */
    function () {
        /** @type {?} */
        var newEntity = CommonComment.newEntity();
        newEntity.sortOrder = this.commentList.length + 1;
        this.commentList = this.commentList.concat(newEntity);
    };
    /**
     * 删除一条意见 data.rowData
     */
    /**
     * 删除一条意见 data.rowData
     * @param {?} data
     * @return {?}
     */
    TaskCommentComponent.prototype.clickToDeleteComment = /**
     * 删除一条意见 data.rowData
     * @param {?} data
     * @return {?}
     */
    function (data) {
        if (data.rowData.userId !== '*') {
            this.commentList = this.commentList.filter(function (c) { return c.id != data.rowData.id; });
            this.dataGrid.loadData(this.commentList);
        }
    };
    /**
     * 常用意见保存
     */
    /**
     * 常用意见保存
     * @return {?}
     */
    TaskCommentComponent.prototype.save = /**
     * 常用意见保存
     * @return {?}
     */
    function () {
        var _this = this;
        this.dataGrid.endCellEdit();
        this.httpSave().subscribe(function (r) {
            _this.loadComments();
            _this.commentDialog.close();
        });
    };
    /**
     * 调用接口执行新增删除、修改
     */
    /**
     * 调用接口执行新增删除、修改
     * @private
     * @return {?}
     */
    TaskCommentComponent.prototype.httpSave = /**
     * 调用接口执行新增删除、修改
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/commonComments";
        /** @type {?} */
        var originCommentIds = this.originCommentList.filter(function (o) { return o.userId !== '*'; }).map(function (d) { return d.id; });
        //删除的
        /** @type {?} */
        var deleteIds = originCommentIds.filter(function (id) { return _this.commentList.findIndex(function (c) { return c.id === id; }) < 0; });
        return forkJoin(deleteIds.map(function (id) { return _this.httpSvc.delete(url + ("/" + id), null); })
            .concat(this.commentList.map(function (add) { return _this.httpSvc.post(url, add); })));
    };
    /**
   * web端打开附件预览
   */
    /**
     * web端打开附件预览
     * @param {?} metadataId
     * @return {?}
     */
    TaskCommentComponent.prototype.attachmentPreview = /**
     * web端打开附件预览
     * @param {?} metadataId
     * @return {?}
     */
    function (metadataId) {
        /** @type {?} */
        var options = {
            appType: "app",
            funcId: "",
            tabName: "文档在线预览",
            appId: "6ccb476b-f2ba-df8f-6f47-d37d100c56e2",
            appEntrance: "docviewertab",
            tabId: new Date().getTime(),
            entityParams: {
                metadataIdList: [metadataId],
                rootId: "wf_attachment",
                metadataId: null,
                viewOptions: {
                    showHeader: true,
                    showPaging: true,
                    showThumbnails: true,
                    showDownload: true,
                    showSearch: true,
                    showZoom: true,
                    showPrint: true,
                    showSecondaryToolBar: true,
                },
            },
        };
        ((/** @type {?} */ (window))).gspframeworkService.rtf.func.openMenu(options);
    };
    TaskCommentComponent.decorators = [
        { type: Component, args: [{
                    selector: 'wf-comment',
                    template: "<div\r\n  class=\"fa-approve-comment fa-approve-common-gutter\"\r\n  style=\"margin-bottom: 20px\"\r\n>\r\n  <!-- \u8F93\u5165\u6846 -->\r\n  <div class=\"fa-approve-comment--content\">\r\n    <textarea\r\n      class=\"form-control content-textarea\"\r\n      style=\"font-size: 13px\"\r\n      [(ngModel)]=\"value\"\r\n      [attr.placeholder]=\"placeholder\"\r\n      [style.height.px]=\"textAreaHeight\"\r\n    ></textarea>\r\n  </div>\r\n  <!-- \u8F93\u5165\u6846\u4E0B\u65B9\u4E00\u6392\u6309\u94AE -->\r\n  <div class=\"fa-approve-comment--footer\">\r\n    <div\r\n      *ngIf=\"showAttachment || showSign || showCommonComment\"\r\n      class=\"approve-comment--text-btns\"\r\n    >\r\n      <!-- \u5E38\u7528\u610F\u89C1 -->\r\n      <div *ngIf=\"showCommonComment\" class=\"text-btns-item\">\r\n        <span class=\"f-icon f-icon-message\"></span>\r\n        <div fDropdown #dropdownEl=\"fDropdown\">\r\n          <span fDropdownToggle>\r\n            {{ \"comment.static.inputLabel\" | translate }}\r\n          </span>\r\n          <div class=\"dropdown-menu\" fDropdownMenu>\r\n            <li\r\n              class=\"dropdown-item\"\r\n              *ngFor=\"let comment of commentList\"\r\n              (click)=\"buttonClick(comment.message)\"\r\n            >\r\n              <span>{{ comment.message }}</span>\r\n            </li>\r\n            <div class=\"dropdown-divider\"></div>\r\n            <!-- \u610F\u89C1\u7BA1\u7406 -->\r\n            <div class=\"dropdown-item\" (click)=\"onEditComment()\">\r\n              <span class=\"f-icon f-icon-home-setup\"></span>\r\n              <span>{{ \"comment.static.manage\" | translate }}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!-- \u4E0A\u4F20\u9644\u4EF6 -->\r\n      <div\r\n        class=\"text-btns-item\"\r\n        *ngIf=\"ifShowAttachment && showAttachment\"\r\n        (click)=\"uploadAttachment()\"\r\n        title=\"{{ 'comment.attachment.tips' | translate }}\"\r\n      >\r\n        <span class=\"f-icon f-icon-attachment\"></span>\r\n        <span class=\"text-btns-item--text\">\r\n          {{ \"comment.static.attachmentUpload\" | translate }}\r\n        </span>\r\n      </div>\r\n      <!-- \u624B\u5199\u7B7E\u540D -->\r\n      <div\r\n        class=\"text-btns-item\"\r\n        *ngIf=\"showSign && ifShowSign && ifCanEditSign\"\r\n        title=\"{{ 'comment.signature.tips' | translate }}\"\r\n        (click)=\"showSignDialog()\"\r\n      >\r\n        <span class=\"f-icon f-icon-edit\"></span>\r\n        <span>{{ \"comment.signature.title\" | translate }}</span>\r\n      </div>\r\n      <!-- \u624B\u5199\u7B7E\u540D\u9884\u89C8 -->\r\n      <div\r\n        *ngIf=\"showSign && ifShowSign && signatureImage\"\r\n        class=\"signatureImage\"\r\n      >\r\n        <img [src]=\"signatureImage\" style=\"width: 70px; height: 26px\" />\r\n        <div *ngIf=\"ifCanEditSign\"\r\n          class=\"attachment-delete\"\r\n          (click)=\"clickToDeleteImage()\"\r\n          title=\"{{ 'comment.signature.disable' | translate }}\"\r\n        >\r\n          <span class=\"f-icon f-icon-x\"></span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- \u9644\u4EF6\u9884\u89C8 -->\r\n    <div *ngIf=\"attachmentList.length > 0\">\r\n      <li *ngFor=\"let attachment of attachmentList\">\r\n        <div class=\"wf-docFile\">\r\n          <div><img class=\"wf-docFileIcon\" [src]=\"imageUrl(attachment)\" /></div>\r\n          <div class=\"wf-docFileInfo\">\r\n            <div class=\"attachment-list\">\r\n              <a>{{ attachment.fileName }}</a>\r\n            </div>\r\n            <div\r\n              class=\"attachment-delete\"\r\n              (click)=\"attachmentDelete(attachment)\"\r\n            >\r\n              <span class=\"f-icon f-icon-close-outline\"></span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </li>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- \u5E38\u7528\u610F\u89C1\u7EF4\u62A4 -->\r\n<farris-dialog\r\n  #commentDialog\r\n  [buttons]=\"formButtonRef\"\r\n  [width]=\"740\"\r\n  [height]=\"440\"\r\n  [title]=\"'comment.static.title' | translate\"\r\n>\r\n  <div class=\"task-center-comment-datagrid-div\">\r\n    <farris-datagrid\r\n      #dataGrid\r\n      [data]=\"commentList\"\r\n      [columns]=\"commentColumns\"\r\n      [editable]=\"true\"\r\n      [fit]=\"true\"\r\n      [editMode]=\"'cell'\"\r\n      [pagination]=\"false\"\r\n      [fitColumns]=\"true\"\r\n      [clickToEdit]=\"true\"\r\n      [beforeEdit]=\"beforeEdit\"\r\n    >\r\n    </farris-datagrid>\r\n  </div>\r\n  <div class=\"task-comment-add task-comment-add-common\" (click)=\"add()\">\r\n    <span class=\"f-icon f-icon-plus mr-1\"></span>\r\n    <span>{{ \"comment.static.clickToAdd\" | translate }}</span>\r\n  </div>\r\n</farris-dialog>\r\n\r\n<!-- \u5E38\u7528\u610F\u89C1\u7EF4\u62A4\u6309\u94AE -->\r\n<ng-template #formButtonRef>\r\n  <button class=\"btn btn-primary mr-2\" (click)=\"save()\">\r\n    {{ \"comment.static.confirm\" | translate }}\r\n  </button>\r\n  <button class=\"btn btn-secondary\" (click)=\"commentDialog.close()\">\r\n    {{ \"comment.static.cancel\" | translate }}\r\n  </button>\r\n</ng-template>\r\n\r\n<!-- \u7B7E\u540D\u5F39\u6846 -->\r\n<farris-dialog\r\n  #signDialog\r\n  [buttons]=\"signButtons\"\r\n  [width]=\"710\"\r\n  [height]=\"420\"\r\n  [title]=\"'comment.signature.dialogTitle' | translate\"\r\n  [resizable]=\"false\"\r\n  [showMaxButton]=\"false\"\r\n>\r\n  <wf-sign-here\r\n    #wfSignHere\r\n    [title]=\"''\"\r\n    [ngStyle]=\"!ifUseSign ? { display: 'none' } : null\"\r\n  ></wf-sign-here>\r\n  <div *ngIf=\"ifUseImg && tmpSignatureImage\" class=\"signature-img-default\">\r\n    <img [src]=\"tmpSignatureImage\" style=\"height: 252px\" />\r\n  </div>\r\n  <div *ngIf=\"ifUseImg && !tmpSignatureImage\" class=\"signature-img-div\">\r\n    <div class=\"signature-img-main\">\r\n      <div style=\"margin-bottom: 28px\">\r\n        <img\r\n          src=\"/platform/runtime/common/web/@gsp-wf/wf-task-handler/assets/img/signIcon.svg?v=20210623\"\r\n        />\r\n      </div>\r\n      <div class=\"signature-img-text\">\r\n        <span>{{ \"comment.signature.note1\" | translate }}</span>\r\n        <span class=\"signature-text-action\" (click)=\"clickToUseSign()\">{{\r\n          \"comment.signature.sign\" | translate\r\n        }}</span>\r\n        <span>{{ \"comment.signature.note2\" | translate }}</span>\r\n        <span class=\"signature-text-action\" (click)=\"clickToUploadImg()\">{{\r\n          \"comment.signature.upload\" | translate\r\n        }}</span>\r\n        <span>{{ \"comment.signature.note3\" | translate }}</span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</farris-dialog>\r\n\r\n<!-- \u624B\u5199\u7B7E\u540D\u6309\u94AE -->\r\n<ng-template #signButtons>\r\n  <button class=\"btn btn-primary mr-2\" (click)=\"clickToConfirm()\">\r\n    {{ \"comment.signature.ok\" | translate }}\r\n  </button>\r\n  <button class=\"btn btn-secondary mr-2\" (click)=\"clickToReset()\">\r\n    {{ \"comment.signature.reset\" | translate }}\r\n  </button>\r\n  <button class=\"btn btn-secondary\" (click)=\"clickToCancel()\">\r\n    {{ \"comment.static.cancel\" | translate }}\r\n  </button>\r\n</ng-template>\r\n\r\n<!-- \u4F7F\u7528\u5934\u50CF\u7EC4\u4EF6\u505A\u56FE\u7247\u4E0A\u4F20 -->\r\n<farris-avatar\r\n  #farrisAvatar\r\n  (imgChange)=\"imgChange($event)\"\r\n  style=\"display: none\"\r\n></farris-avatar>\r\n\r\n<!-- \u5E38\u7528\u610F\u89C1\u7C7B\u522B -->\r\n<ng-template #commentTypeCell let-ctx>\r\n  <div>\r\n    <span\r\n      *ngIf=\"ctx.rowData.userId === '*'\"\r\n      class=\"task-comment-type task-comment-type-blue\"\r\n      >{{ \"comment.static.public\" | translate }}</span\r\n    >\r\n    <span\r\n      *ngIf=\"ctx.rowData.userId !== '*'\"\r\n      class=\"task-comment-type task-comment-type-yellow\"\r\n      >{{ \"comment.static.private\" | translate }}</span\r\n    >\r\n  </div>\r\n</ng-template>\r\n\r\n<!-- \u5E38\u7528\u610F\u89C1\u64CD\u4F5C -->\r\n<ng-template #commentOperateCell let-ctx>\r\n  <div\r\n    *ngIf=\"ctx.rowData.userId !== '*'\"\r\n    class=\"btn-link\"\r\n    style=\"padding: 5px 0\"\r\n    (click)=\"clickToDeleteComment(ctx)\"\r\n  >\r\n    {{ \"comment.static.delete\" | translate }}\r\n  </div>\r\n</ng-template>\r\n",
                    providers: [{
                            provide: NG_VALUE_ACCESSOR,
                            useExisting: forwardRef(function () { return TaskCommentComponent; }),
                            multi: true
                        },],
                    styles: [":host ::ng-deep .dropdown .btn{padding:0}:host ::ng-deep .dropdown .btn-secondary{box-shadow:none}:host ::ng-deep .dropdown .btn-secondary:focus{box-shadow:none}:host ::ng-deep .dropdown .btn-secondary:hover{color:#388fff}.task-center-comment-datagrid-div{display:flex;flex-grow:0;overflow:hidden;height:295px;padding:0 24px}.task-comment-type{padding:2px 6px;border-radius:4px;font-size:12px}.task-comment-type-blue{background:#eef5ff;border:0 solid #aed1ff;color:#5ea4ff}.task-comment-type-yellow{background:#fef5ec;border:0 solid #fad0a1;color:#f5a144}.task-comment-add{display:flex;justify-content:center;align-items:center;margin:0 24px;cursor:pointer;overflow:hidden;font-size:12px;text-align:center;padding:6px;border-radius:4px}.task-comment-add-common{color:#a8adb8;background:#f4f6fc;border:1px dashed #d2d7e2}.task-comment-add:hover{background:rgba(238,245,255,.8);border:1px solid rgba(82,157,255,.4)}.signatureImage:hover .attachment-delete{display:block}.fa-approval-operate-list{display:flex;flex-direction:row;align-items:center}.fa-approval-operate-list .approval-operate--label{position:relative;margin-right:8px;padding:3px 16px;border:1px solid rgba(0,0,0,.15);border-radius:2px;overflow:hidden;cursor:pointer;margin-bottom:0;color:#595959}.fa-approval-operate-list .approval-operate--label .label-title{font-size:14px;line-height:20px;white-space:nowrap}.fa-approval-operate-list .approval-operate--label .label-tip{position:absolute;display:block;right:0;bottom:0;width:14px;height:14px;border:7px solid #dadada;border-top:7px solid transparent;border-left:7px solid transparent}.fa-approval-operate-list .approval-operate--label .label-icon{position:absolute;display:block;right:-3px;bottom:-2px;font-size:12px;color:#fff}.fa-approval-operate-list .approval-operate--label .label-icon::before{content:\"\\e118\"}.fa-approval-operate-list .approval-operate--radio{display:none}.fa-approval-operate-list .approval-operate--radio:checked~.approval-operate--label{color:#388fff;border-color:#388fff;background:rgba(23,145,255,.05)}.fa-approval-operate-list .approval-operate--radio:checked~.approval-operate--label .label-tip{border-right-color:#388fff;border-bottom-color:#388fff}.fa-dropdown-button{border-color:#f7f7f7;font-size:12px;color:#667580;background:#f7f7f7}.fa-btn-like-dropdown{display:flex;align-items:center}.fa-btn-like-dropdown .like-dropdown--text{margin:0 4px 0 0}.fa-btn-like-dropdown .like-dropdown--icon{color:rgba(0,0,0,.25)}.fa-approve-common-gutter{margin:0 0 12px}.fa-approve-comment .approve-comment--title{display:inline-block;color:#667580;border-radius:4px 4px 0 0;height:26px;padding:0 9px;position:relative;background:#f7f7f7;cursor:pointer}.fa-approve-comment .approve-comment--title:after{content:\"\";height:100%;position:absolute;right:-10px;top:0;bottom:0;border-right:5px solid transparent;border-left:5px solid #f7f7f7;border-bottom:13px solid #f7f7f7;border-top:13px solid transparent}.fa-approve-comment .approve-comment--title .fa-btn-like-dropdown{font-size:12px;padding:2px 0}.fa-approve-comment .fa-approve-comment--content .content-textarea{border-color:#dcdcdc;border-radius:0 0 2px 2px}.fa-approve-comment .fa-approve-comment--footer{font-size:13px;color:#667580;background:#f7f7f7;align-items:center;padding:5px 0}.fa-approve-comment .approve-comment--text-btns{display:flex;flex-direction:row;padding:0 5px}.fa-approve-comment .approve-comment--text-btns .text-btns-item{display:flex;flex-direction:row;align-items:center;font-size:12px;line-height:18px;color:#667580;margin-right:20px;cursor:pointer}.fa-approve-comment .approve-comment--text-btns .text-btns-item:hover{color:#388fff}.fa-approve-comment .approve-comment--text-btns .text-btns-item .f-icon{margin-right:4px}.fa-approveal-links::after{content:\".\";display:block;height:0;clear:both;visibility:hidden}.fa-approveal-links .approveal-links--link{font-size:14px;position:relative;padding:0 16px 0 0;display:flex;align-items:center;float:left}.fa-approveal-links .approveal-links--link .link-text{color:rgba(0,0,0,.65);margin:0 8px 0 0}.fa-approveal-links .approveal-links--link+.approveal-links--link{padding-left:16px}.fa-approveal-links .approveal-links--link+.approveal-links--link::before{content:\"\";position:absolute;width:1px;height:80%;left:0;top:10%;background:#dbdbdb}.fa-btn-group-lg .btn{padding-top:6px;padding-bottom:6px;min-width:100px;text-align:center}.fa-approve-record{padding:0 0 16px;position:relative}.fa-approve-record .fa-approve-record--timeline{position:absolute;width:34px;top:0;bottom:0;z-index:100}.fa-approve-record .fa-approve-record--timeline::after{content:\"\";position:absolute;width:1px;height:100%;overflow:hidden;left:50%;top:0;z-index:101;border-left:1px dashed #dcdcdc}.fa-approve-record .fa-approve-record--timeline .fa-approve-star{position:relative;z-index:103;margin:20px auto}.fa-approve-record.fa-state-running .fa-approve-record--timeline::after{top:20px}.fa-approve-record:last-child .fa-approve-record--timeline::after{height:20px}.fa-approve-record .fa-approve-record--content{margin:0 0 0 34px;padding:16px 14px;background:#f9f9f9;border-radius:2px}.fa-approve-record .fa-approve-record--content .approve-record--header{margin:0 0 12px;display:flex;align-items:center}.fa-approve-record .fa-approve-record--content .approve-record--header .header--title{margin-bottom:0;color:rgba(0,0,0,.85)}.fa-approve-record .fa-approve-record--content .approve-record--header>*{margin:0 19px 0 0}.fa-approve-record .approve-record--list-item{display:flex;flex-direction:row}.fa-approve-record .approve-record--list-item+.approve-record--list-item{padding-top:8px}.fa-approve-record .approve-record--list-item .list-item--auxiliary{width:30px;margin:0 10px 0 0}.fa-approve-record .approve-record--list-item .list-item--main{flex-grow:1;flex-shrink:1;flex-basis:auto;padding:6px 0 0;background:#f9f9f9}.fa-approve-record .approve-record--list-item .list-item--content{padding:20px 0 0}.fa-approve-record .approve-record--list-item .list-item--content .list-item--info{font-size:12px;margin-bottom:0}.fa-approve-record .approve-record--list-item .list-item--content .list-item--info .info-label{color:rgba(0,0,0,.65)}.fa-approve-record .approve-record--list-item .list-item--content .list-item--info .info-text{color:rgba(0,0,0,.85)}.fa-approve-record .approve-record--list-item .list-item--header{display:flex;align-items:center}.fa-approve-record .approve-record--list-item .list-item--header>*{margin:0 16px 0 0}.fa-approve-record .approve-record--list-item .list-item--header .list-item--info{margin-bottom:0;font-size:12px}.fa-approve-record .approve-record--list-item .list-item--header .list-item--info .info-label{color:rgba(0,0,0,.35)}.fa-approve-record .approve-record--list-item .list-item--header .list-item--info .info-text{color:rgba(0,0,0,.65)}.fa-approve-record .approve-record--list-item .list-item--name{color:#4297fa}.fa-approve-record .approve-record--avatar{width:30px;height:30px;border-radius:15px}.fa-approve-round-bg{margin:4px auto 0;width:30px;height:30px;background:#59a1ff;border-radius:18px;line-height:30px;text-align:center;white-space:nowrap;font-size:12px;overflow:hidden}.fa-approve-round-bg-text{color:#fff}.fa-approve-star{width:14px;height:14px;display:block;background:rgba(56,143,255,.4);border-radius:7px;position:relative}.fa-approve-star::after{content:\"\";width:8px;height:8px;position:absolute;top:50%;left:50%;margin:-4px 0 0 -4px;border-radius:4px;background:#388fff}.fa-approve-star.bg-warning{background:rgba(245,156,36,.4)!important}.fa-approve-star.bg-warning::after{background:#f59c24}.fa-approve-badge{padding-top:4px;padding-bottom:4px;border-radius:10px}.fa-approve-badge-light{font-size:13px;line-height:20px;padding:0 8px;color:#5f637a;border:1px solid #e6e6e6;background:#f6faff}.fa-approve-link-border{cursor:pointer;display:inline-block;border:1px solid #60a5ff;border-radius:13px;font-size:12px;line-height:16px;color:#388fff;padding:3px 10px;background:#ebf5ff}.fa-approve-link-border:hover{background:#2881ff;color:#fff}.fm-toolbar{flex-direction:row;display:flex}.wf-docFile{flex-shrink:1;flex-grow:1;flex-basis:0;display:flex;flex-direction:row;align-items:flex-start;border-top:1px solid #f8f9fa;border-left:1px solid #f8f9fa}.wf-docFileIcon{margin:0 0 0 4px;width:20px;height:20px;line-height:20px;text-align:center;overflow:hidden;white-space:nowrap;padding:2px}.wf-docFileInfo{flex-shrink:1;flex-grow:1;flex-basis:0;padding:2px 6px 0 9px;margin-left:0}.wf-docFileInfo:hover .attachment-delete{display:block}.wf-docFileSize{font-size:11px;color:#888}.wf-doc-delete{margin:auto;font-size:18px;color:#f8f9fa}li{list-style:none}.attachment-delete{float:right;cursor:pointer;display:none;text-align:right;padding-right:10px}.attachment-delete:hover{color:#4297fa}.attachment-list{float:left;font-size:12px}.signature-img-div{display:flex;justify-content:center;align-items:center;height:100%;background:#fafcfd;border:1px solid #d8dfed;border-radius:8px;margin:0 10px}.signature-img-main{display:flex;flex-direction:column;justify-content:center;align-items:center}.signature-img-text{font-size:13px;color:rgba(106,111,121,.85)}.signature-text-action{color:#529efe;padding:0 2px;cursor:pointer}.signature-img-default{display:flex;justify-content:center;align-items:center;height:inherit}"]
                }] }
    ];
    /** @nocollapse */
    TaskCommentComponent.ctorParameters = function () { return [
        { type: TaskService },
        { type: HttpService },
        { type: UploadDialogService },
        { type: MessagerService },
        { type: I18nService },
        { type: LoadingService },
        { type: NotifyService }
    ]; };
    TaskCommentComponent.propDecorators = {
        showAttachment: [{ type: Input }],
        showSign: [{ type: Input }],
        showCommonComment: [{ type: Input }],
        comment: [{ type: Input }],
        placeholder: [{ type: Input }],
        processInstanceId: [{ type: Input }],
        textAreaHeight: [{ type: Input }],
        TaskCenterConfig: [{ type: Input }],
        attachment: [{ type: Output }],
        signature: [{ type: Output }],
        commentDialog: [{ type: ViewChild, args: ['commentDialog',] }],
        signDialog: [{ type: ViewChild, args: ['signDialog',] }],
        dropDownEl: [{ type: ViewChild, args: ['dropdownEl',] }],
        signaturePad: [{ type: ViewChild, args: ['wfSignHere',] }],
        farrisAvatar: [{ type: ViewChild, args: ['farrisAvatar',] }],
        dataGrid: [{ type: ViewChild, args: ['dataGrid',] }],
        commentTypeCell: [{ type: ViewChild, args: ['commentTypeCell',] }],
        commentOperateCell: [{ type: ViewChild, args: ['commentOperateCell',] }]
    };
    return TaskCommentComponent;
}());
export { TaskCommentComponent };
if (false) {
    /** @type {?} */
    TaskCommentComponent.prototype.showAttachment;
    /** @type {?} */
    TaskCommentComponent.prototype.showSign;
    /** @type {?} */
    TaskCommentComponent.prototype.showCommonComment;
    /** @type {?} */
    TaskCommentComponent.prototype.comment;
    /** @type {?} */
    TaskCommentComponent.prototype.placeholder;
    /** @type {?} */
    TaskCommentComponent.prototype.processInstanceId;
    /** @type {?} */
    TaskCommentComponent.prototype.textAreaHeight;
    /** @type {?} */
    TaskCommentComponent.prototype.attachment;
    /** @type {?} */
    TaskCommentComponent.prototype.signature;
    /** @type {?} */
    TaskCommentComponent.prototype.commentDialog;
    /** @type {?} */
    TaskCommentComponent.prototype.signDialog;
    /** @type {?} */
    TaskCommentComponent.prototype.dropDownEl;
    /** @type {?} */
    TaskCommentComponent.prototype.signaturePad;
    /** @type {?} */
    TaskCommentComponent.prototype.farrisAvatar;
    /** @type {?} */
    TaskCommentComponent.prototype.dataGrid;
    /** @type {?} */
    TaskCommentComponent.prototype.commentTypeCell;
    /** @type {?} */
    TaskCommentComponent.prototype.commentOperateCell;
    /**
     * @type {?}
     * @private
     */
    TaskCommentComponent.prototype._value;
    /** @type {?} */
    TaskCommentComponent.prototype.attachmentList;
    /** @type {?} */
    TaskCommentComponent.prototype.ifShowAttachment;
    /** @type {?} */
    TaskCommentComponent.prototype.ifShowSign;
    /** @type {?} */
    TaskCommentComponent.prototype.curUserId;
    /** @type {?} */
    TaskCommentComponent.prototype.signatureImage;
    /** @type {?} */
    TaskCommentComponent.prototype.tmpSignatureImage;
    /** @type {?} */
    TaskCommentComponent.prototype.downloadService;
    /** @type {?} */
    TaskCommentComponent.prototype.ifUseSign;
    /** @type {?} */
    TaskCommentComponent.prototype.ifUseImg;
    /** @type {?} */
    TaskCommentComponent.prototype.ifEnableSign;
    /** @type {?} */
    TaskCommentComponent.prototype.ifUploadImg;
    /** @type {?} */
    TaskCommentComponent.prototype.ifCanEditSign;
    /** @type {?} */
    TaskCommentComponent.prototype.originSignId;
    /** @type {?} */
    TaskCommentComponent.prototype.commentList;
    /** @type {?} */
    TaskCommentComponent.prototype.originCommentList;
    /** @type {?} */
    TaskCommentComponent.prototype.commentColumns;
    /** @type {?} */
    TaskCommentComponent.prototype.onModelChange;
    /** @type {?} */
    TaskCommentComponent.prototype.onModelTouched;
    /**
     * 系统预置的不允许编辑删除
     * \@param data data.rowData为实体数据
     * \@return
     * @type {?}
     */
    TaskCommentComponent.prototype.beforeEdit;
    /**
     * @type {?}
     * @private
     */
    TaskCommentComponent.prototype.taskService;
    /**
     * @type {?}
     * @private
     */
    TaskCommentComponent.prototype.httpSvc;
    /**
     * @type {?}
     * @private
     */
    TaskCommentComponent.prototype.uploadDialog;
    /**
     * @type {?}
     * @private
     */
    TaskCommentComponent.prototype.messageService;
    /**
     * @type {?}
     * @private
     */
    TaskCommentComponent.prototype.i18nService;
    /**
     * @type {?}
     * @private
     */
    TaskCommentComponent.prototype.loadingService;
    /**
     * @type {?}
     * @private
     */
    TaskCommentComponent.prototype.notify;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFzay1jb21tZW50LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Bnc3Atd2Yvd2YtdGFzay1oYW5kbGVyLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvdGFzay1jb21tZW50L3Rhc2stY29tbWVudC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFVLEtBQUssRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsV0FBVyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ25ILE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUNwRCxPQUFPLEVBQXdCLGlCQUFpQixFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDekUsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDekQsT0FBTyxFQUFFLG1CQUFtQixFQUFFLE1BQU0seUJBQXlCLENBQUM7QUFDOUQsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ3RELE9BQU8sRUFBb0IsZ0JBQWdCLEVBQUUsY0FBYyxFQUFFLGtCQUFrQixFQUFFLE1BQU0seUJBQXlCLENBQUM7QUFDakgsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDcEQsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ3BELE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUNyRCxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sNEJBQTRCLENBQUM7QUFDekQsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBQ3JELE9BQU8sRUFBRSxRQUFRLEVBQWMsRUFBRSxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQ2hELE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUNsRCxPQUFP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OztJQUNsQyxpREFBd0M7O0lBRXhDLDhDQUFrQzs7SUFhbEMsNkNBQWtDOztJQUNsQyw4Q0FBbUM7Ozs7Ozs7SUF5Vm5DLDBDQUtDOzs7OztJQTNWQywyQ0FBZ0M7Ozs7O0lBQ2hDLHVDQUE0Qjs7Ozs7SUFDNUIsNENBQXlDOzs7OztJQUN6Qyw4Q0FBdUM7Ozs7O0lBQ3ZDLDJDQUFnQzs7Ozs7SUFDaEMsOENBQXNDOzs7OztJQUN0QyxzQ0FBNkIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCwgSW5wdXQsIFZpZXdDaGlsZCwgZm9yd2FyZFJlZiwgT3V0cHV0LCBFdmVudEVtaXR0ZXIsIFRlbXBsYXRlUmVmIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IERpYWxvZ0NvbXBvbmVudCB9IGZyb20gJ0BmYXJyaXMvdWktZGlhbG9nJztcclxuaW1wb3J0IHsgQ29udHJvbFZhbHVlQWNjZXNzb3IsIE5HX1ZBTFVFX0FDQ0VTU09SIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xyXG5pbXBvcnQgeyBGRHJvcGRvd25EaXJlY3RpdmUgfSBmcm9tICdAZmFycmlzL3VpLWRyb3Bkb3duJztcclxuaW1wb3J0IHsgVXBsb2FkRGlhbG9nU2VydmljZSB9IGZyb20gJ0Bnc3Atc3ZjL2Zvcm1kb2MtdXBsb2FkJztcclxuaW1wb3J0IHsgTWVzc2FnZXJTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1tZXNzYWdlcic7XHJcbmltcG9ydCB7IEZpbGVEZWxldGVFbnRpdHksIEZpbGVVcGxvYWRFbnRpdHksIEdzcERvY01ldGFkYXRhLCBHc3BEb2NVcGxvYWRFbnRpdHkgfSBmcm9tICcuLi8uLi9lbnRpdHkvYXR0YWNobWVudCc7XHJcbmltcG9ydCB7IFNpZ25IZXJlQ29tcG9uZW50IH0gZnJvbSAnQGdzcC13Zi93Zi1zaWduJztcclxuaW1wb3J0IHsgQXZhdGFyQ29tcG9uZW50IH0gZnJvbSAnQGZhcnJpcy91aS1hdmF0YXInO1xyXG5pbXBvcnQgeyBEb3dubG9hZFNlcnZpY2UgfSBmcm9tICdAZ3NwLXN2Yy9maWxlLWxvYWQnO1xyXG5pbXBvcnQgeyBUYXNrU2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2UvdGFzay5zZXJ2aWNlJztcclxuaW1wb3J0IHsgQ29tbW9uQ29tbWVudCB9IGZyb20gJy4uLy4uL2VudGl0eS9jb21tZW50JztcclxuaW1wb3J0IHsgZm9ya0pvaW4sIE9ic2VydmFibGUsIG9mIH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IEh0dHBTZXJ2aWNlIH0gZnJvbSAnQGVjcC1jYWYvY2FmLWNvbW1vbic7XHJcbmltcG9ydCB7IERhdGFDb2x1bW4sIERhdGFncmlkQ29tcG9uZW50IH0gZnJvbSAnQGZhcnJpcy91aS1kYXRhZ3JpZCc7XHJcbmltcG9ydCB7IEkxOG5TZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZS9pMThuL2kxOG4uc2VydmljZSc7XHJcbmltcG9ydCB7IEVkaXRvclR5cGVzIH0gZnJvbSAnQGZhcnJpcy91aS1kYXRhZ3JpZC1lZGl0b3JzJztcclxuaW1wb3J0IHsgTG9hZGluZ1NlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLWxvYWRpbmcnO1xyXG5pbXBvcnQgeyBDb25maWdDb2RlLCBUYXNrQ2VudGVyQ29uZmlnIH0gZnJvbSAnLi4vLi4vZW50aXR5L3Rhc2stY2VudGVyLWNvbmZpZyc7XHJcbmltcG9ydCB7IE5vdGlmeVNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLW5vdGlmeSc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ3dmLWNvbW1lbnQnLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi90YXNrLWNvbW1lbnQuY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWycuL3Rhc2stY29tbWVudC5jb21wb25lbnQuc2NzcyddLFxyXG4gIHByb3ZpZGVyczogW3tcclxuICAgIHByb3ZpZGU6IE5HX1ZBTFVFX0FDQ0VTU09SLFxyXG4gICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gVGFza0NvbW1lbnRDb21wb25lbnQpLFxyXG4gICAgbXVsdGk6IHRydWVcclxuICB9LF1cclxufSlcclxuZXhwb3J0IGNsYXNzIFRhc2tDb21tZW50Q29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBDb250cm9sVmFsdWVBY2Nlc3NvciB7XHJcblxyXG4gIEBJbnB1dCgpIHNob3dBdHRhY2htZW50OiBib29sZWFuID0gdHJ1ZTsvL+aYr+WQpuaYvuekuumZhOS7tuS4iuS8oO+8jOe7hOS7tuaOp+WItlxyXG4gIEBJbnB1dCgpIHNob3dTaWduOiBib29sZWFuID0gdHJ1ZTsvL+aYr+WQpuaYvuekuuetvuWQje+8jOe7hOS7tuaOp+WItu+8iOS4jeWQjOWKqOS9nOWPr+iDveS8muS4jeaYvuekuu+8iVxyXG4gIEBJbnB1dCgpIHNob3dDb21tb25Db21tZW50ID0gdHJ1ZTsvL+aYr+WQpuaYvuekuuW4uOeUqOaEj+ingVxyXG4gIEBJbnB1dCgpIGNvbW1lbnQ6IHN0cmluZztcclxuICBASW5wdXQoKSBwbGFjZWhvbGRlciA9ICcnO1xyXG4gIEBJbnB1dCgpIHByb2Nlc3NJbnN0YW5jZUlkOiBzdHJpbmc7XHJcbiAgQElucHV0KCkgdGV4dEFyZWFIZWlnaHQ6IG51bWJlciA9IDEyMDsvL+aWh+Wtl+ahhueahOmrmOW6plxyXG5cclxuICBASW5wdXQoKVxyXG4gIHNldCBUYXNrQ2VudGVyQ29uZmlnKGNvbmZpZ0xpc3Q6IFRhc2tDZW50ZXJDb25maWdbXSkge1xyXG4gICAgY29uc3QgYXR0YWNobWVudCA9IGNvbmZpZ0xpc3QuZmluZChhID0+IGEuY29uZmlnQ29kZSA9PSBDb25maWdDb2RlLklmX1Nob3dfQXR0YWNobWVudCk7XHJcbiAgICBjb25zdCBzaWduID0gY29uZmlnTGlzdC5maW5kKGEgPT4gYS5jb25maWdDb2RlID09IENvbmZpZ0NvZGUuSWZfU2hvd19TaWduYXR1cmUpO1xyXG4gICAgY29uc3QgZW5hYmxlU2lnbiA9IGNvbmZpZ0xpc3QuZmluZChhID0+IGEuY29uZmlnQ29kZSA9PSBDb25maWdDb2RlLklmX1VzZV9TaWduX0J5X0RlZmF1bHQpO1xyXG4gICAgY29uc3QgZWRpdFNpZ24gPSBjb25maWdMaXN0LmZpbmQoYSA9PiBhLmNvbmZpZ0NvZGUgPT09IENvbmZpZ0NvZGUuSWZfQ2FuX0VkaXRfU2lnbmF0dXJlKTtcclxuICAgIGlmICgod2luZG93IGFzIGFueSkuZ3NwZnJhbWV3b3JrU2VydmljZS5jb21tb24pIHtcclxuICAgICAgdGhpcy5jdXJVc2VySWQgPSAod2luZG93IGFzIGFueSkuZ3NwZnJhbWV3b3JrU2VydmljZS5jb21tb24udXNlckluZm9zLmdldCgpLnVzZXJJZDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuY3VyVXNlcklkID0gKHdpbmRvdyBhcyBhbnkpLnBhcmVudC5nc3BmcmFtZXdvcmtTZXJ2aWNlLmNvbW1vbi51c2VySW5mb3MuZ2V0KCkudXNlcklkO1xyXG4gICAgfVxyXG4gICAgYXR0YWNobWVudCAmJiBhdHRhY2htZW50LmN1cnJlbnRWYWx1ZSA9PT0gJ3RydWUnICYmICh0aGlzLmlmU2hvd0F0dGFjaG1lbnQgPSB0cnVlKTtcclxuICAgIHNpZ24gJiYgc2lnbi5jdXJyZW50VmFsdWUgPT09ICd0cnVlJyAmJiAodGhpcy5pZlNob3dTaWduID0gdHJ1ZSk7XHJcbiAgICBlbmFibGVTaWduICYmIGVuYWJsZVNpZ24uY3VycmVudFZhbHVlID09PSAnZmFsc2UnICYmICh0aGlzLmlmRW5hYmxlU2lnbiA9IGZhbHNlKTtcclxuICAgIGVkaXRTaWduICYmIGVkaXRTaWduLmN1cnJlbnRWYWx1ZSA9PT0gJ2ZhbHNlJyAmJiAodGhpcy5pZkNhbkVkaXRTaWduID0gZmFsc2UpO1xyXG4gICAgaWYgKHRoaXMuaWZTaG93U2lnbiAmJiB0aGlzLmlmRW5hYmxlU2lnbikge1xyXG4gICAgICB0aGlzLmdldFVzZXJTaWduKHRoaXMuY3VyVXNlcklkKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIEBPdXRwdXQoKSBhdHRhY2htZW50ID0gbmV3IEV2ZW50RW1pdHRlcigpOy8v6ZmE5Lu2XHJcbiAgQE91dHB1dCgpIHNpZ25hdHVyZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTsvL+S4iuS8oOetvuWQjeS5i+WQju+8jOWPkemAgeetvuWQjWlkXHJcbiAgQFZpZXdDaGlsZCgnY29tbWVudERpYWxvZycpIGNvbW1lbnREaWFsb2c6IERpYWxvZ0NvbXBvbmVudDsvL+W4uOeUqOaEj+ingeeuoeeQhlxyXG4gIEBWaWV3Q2hpbGQoJ3NpZ25EaWFsb2cnKSBzaWduRGlhbG9nOiBEaWFsb2dDb21wb25lbnQ7Ly/miYvlhpnnrb7lkI3lvLnmoYZcclxuICBAVmlld0NoaWxkKCdkcm9wZG93bkVsJykgZHJvcERvd25FbDogRkRyb3Bkb3duRGlyZWN0aXZlOy8v6Kej5Yaz6YCJ5oup5oSP6KeB5ZCO77yM5LiL5ouJ6I+c5Y2V5peg5rOV5pS25oqY55qE6Zeu6aKYXHJcbiAgQFZpZXdDaGlsZCgnd2ZTaWduSGVyZScpIHNpZ25hdHVyZVBhZDogU2lnbkhlcmVDb21wb25lbnQ7Ly/miYvlhpnnrb7lkI3nu4Tku7ZcclxuICBAVmlld0NoaWxkKCdmYXJyaXNBdmF0YXInKSBmYXJyaXNBdmF0YXI6IEF2YXRhckNvbXBvbmVudDsvL+WktOWDj+e7hOS7tu+8jOeUqOS9nOetvuWQjeWbvueJh+S4iuS8oFxyXG4gIEBWaWV3Q2hpbGQoJ2RhdGFHcmlkJykgZGF0YUdyaWQ6IERhdGFncmlkQ29tcG9uZW50O1xyXG4gIEBWaWV3Q2hpbGQoJ2NvbW1lbnRUeXBlQ2VsbCcpIGNvbW1lbnRUeXBlQ2VsbDogVGVtcGxhdGVSZWY8YW55PjsvL+W4uOeUqOaEj+ingeexu+WIq+aooeadv1xyXG4gIEBWaWV3Q2hpbGQoJ2NvbW1lbnRPcGVyYXRlQ2VsbCcpIGNvbW1lbnRPcGVyYXRlQ2VsbDogVGVtcGxhdGVSZWY8YW55PjsvL+W4uOeUqOaEj+ingeWIoOmZpFxyXG5cclxuICBwcml2YXRlIF92YWx1ZSA9ICcnO1xyXG4gIGF0dGFjaG1lbnRMaXN0OiBhbnlbXSA9IFtdO1xyXG4gIGlmU2hvd0F0dGFjaG1lbnQ6IGJvb2xlYW4gPSBmYWxzZTsvL+S7u+WKoeS4reW/g+mFjee9ru+8jOaYr+WQpuaYvuekuumZhOS7tuS4iuS8oFxyXG4gIGlmU2hvd1NpZ246IGJvb2xlYW4gPSBmYWxzZTsvL+S7u+WKoeS4reW/g+mFjee9ru+8jOaYr+WQpuaYvuekuuaJi+WGmeetvuWQjVxyXG4gIGN1clVzZXJJZDogc3RyaW5nOy8v5b2T5YmN55So5oi3aWRcclxuICBzaWduYXR1cmVJbWFnZTogc3RyaW5nOy8v562+5ZCN5Zu+54mH55qEYmFzZTY05YC8XHJcbiAgdG1wU2lnbmF0dXJlSW1hZ2U6IHN0cmluZzsvL+S4tOaXtuS/neWtmOS4iuS8oOeahOWbvueJh1xyXG4gIGRvd25sb2FkU2VydmljZSA9IG5ldyBEb3dubG9hZFNlcnZpY2UoKTtcclxuICBpZlVzZVNpZ246IGJvb2xlYW4gPSBmYWxzZTsvL+aYr+WQpuS9v+eUqOaJi+WGmVxyXG4gIGlmVXNlSW1nOiBib29sZWFuID0gdHJ1ZTsvL+aYr+WQpuS9v+eUqOS4iuS8oOWbvueJh1xyXG4gIGlmRW5hYmxlU2lnbjogYm9vbGVhbiA9IHRydWU7Ly/mmK/lkKbpu5jorqTlkK/nlKjnrb7lkI1cclxuICBpZlVwbG9hZEltZzogYm9vbGVhbiA9IGZhbHNlOy8v5piv5ZCm5LiK5Lyg6L+H5Zu+54mHXHJcbiAgaWZDYW5FZGl0U2lnbjogYm9vbGVhbiA9IHRydWU7Ly/mmK/lkKblhYHorrjnvJbovpHnrb7lkI1cclxuICBvcmlnaW5TaWduSWQ6IHN0cmluZzsvL+WOn+Wni+eahOetvuWQjWlkXHJcblxyXG4gIGNvbW1lbnRMaXN0OiBDb21tb25Db21tZW50W10gPSBbXTtcclxuICBvcmlnaW5Db21tZW50TGlzdDogQ29tbW9uQ29tbWVudFtdID0gW107XHJcblxyXG4gIGNvbW1lbnRDb2x1bW5zOiBEYXRhQ29sdW1uW10gPSBbXTtcclxuXHJcbiAgc2V0IHZhbHVlKHYpIHtcclxuICAgIGlmICh0aGlzLl92YWx1ZSAhPT0gdikge1xyXG4gICAgICB0aGlzLl92YWx1ZSA9IHY7XHJcbiAgICAgIHRoaXMub25Nb2RlbENoYW5nZSh2KTtcclxuICAgIH1cclxuXHJcbiAgfVxyXG4gIGdldCB2YWx1ZSgpIHtcclxuICAgIHJldHVybiB0aGlzLl92YWx1ZTtcclxuICB9XHJcblxyXG4gIG9uTW9kZWxDaGFuZ2UgPSAob2JqOiBhbnkpID0+IHsgfTtcclxuICBvbk1vZGVsVG91Y2hlZCA9IChvYmo6IGFueSkgPT4geyB9O1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHByaXZhdGUgdGFza1NlcnZpY2U6IFRhc2tTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBodHRwU3ZjOiBIdHRwU2VydmljZSxcclxuICAgIHByaXZhdGUgdXBsb2FkRGlhbG9nOiBVcGxvYWREaWFsb2dTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBtZXNzYWdlU2VydmljZTogTWVzc2FnZXJTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBpMThuU2VydmljZTogSTE4blNlcnZpY2UsXHJcbiAgICBwcml2YXRlIGxvYWRpbmdTZXJ2aWNlOiBMb2FkaW5nU2VydmljZSxcclxuICAgIHByaXZhdGUgbm90aWZ5OiBOb3RpZnlTZXJ2aWNlLFxyXG4gICkge1xyXG5cclxuICB9XHJcblxyXG4gIG5nT25Jbml0KCkge1xyXG4gICAgdGhpcy5jb21tZW50Q29sdW1ucyA9IFt7XHJcbiAgICAgIGZpZWxkOiAnbWVzc2FnZScsXHJcbiAgICAgIHdpZHRoOiAxMDAsXHJcbiAgICAgIHRpdGxlOiB0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCdjb21tZW50LnN0YXRpYy5jb250ZW50JyksXHJcbiAgICAgIGVkaXRvcjogeyB0eXBlOiBFZGl0b3JUeXBlcy5URVhUQk9YLCBvcHRpb25zOiB7fSB9LFxyXG4gICAgfSwge1xyXG4gICAgICBmaWVsZDogJ3VzZXJJZCcsXHJcbiAgICAgIHdpZHRoOiAyMCxcclxuICAgICAgdGl0bGU6IHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ2NvbW1lbnQuc3RhdGljLnR5cGUnKSxcclxuICAgICAgdGVtcGxhdGU6IHRoaXMuY29tbWVudFR5cGVDZWxsXHJcbiAgICB9LCB7XHJcbiAgICAgIGZpZWxkOiAnb3BlcmF0ZScsXHJcbiAgICAgIHdpZHRoOiAyMCxcclxuICAgICAgdGl0bGU6IHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ2NvbW1lbnQuc3RhdGljLm9wZXJhdGUnKSxcclxuICAgICAgdGVtcGxhdGU6IHRoaXMuY29tbWVudE9wZXJhdGVDZWxsXHJcbiAgICB9XTtcclxuICAgIC8vIOiOt+WPluW4uOeUqOaEj+ingeWIl+ihqFxyXG4gICAgdGhpcy5sb2FkQ29tbWVudHMoKTtcclxuICB9XHJcblxyXG4gIG9uRWRpdENvbW1lbnQoKSB7XHJcbiAgICB0aGlzLmRyb3BEb3duRWwuY2xvc2UoKTtcclxuICAgIHRoaXMuY29tbWVudERpYWxvZy5zaG93KCk7XHJcbiAgfVxyXG5cclxuICBsb2FkQ29tbWVudHMoKSB7XHJcbiAgICB0aGlzLnRhc2tTZXJ2aWNlLmdldENvbW1lbnRMaXN0KCkuc3Vic2NyaWJlKChkYXRhOiBhbnlbXSkgPT4ge1xyXG4gICAgICB0aGlzLmNvbW1lbnRMaXN0ID0gZGF0YTtcclxuICAgICAgdGhpcy5vcmlnaW5Db21tZW50TGlzdCA9IFsuLi5kYXRhXTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ29udHJvbFZhbHVlQWNjZXNzb3Llv4Xpobvlrp7njrDnmoTmlrnms5VcclxuICAgKi9cclxuICB3cml0ZVZhbHVlKHZhbHVlOiBzdHJpbmcpIHtcclxuICAgIGlmICh2YWx1ZSAhPT0gdGhpcy52YWx1ZSkge1xyXG4gICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZWdpc3Rlck9uQ2hhbmdlKGZuKSB7XHJcbiAgICB0aGlzLm9uTW9kZWxDaGFuZ2UgPSBmbjtcclxuICB9XHJcblxyXG4gIHJlZ2lzdGVyT25Ub3VjaGVkKGZuKSB7XHJcbiAgICB0aGlzLm9uTW9kZWxUb3VjaGVkID0gZm47XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDpgInmi6nkuIDmnaHluLjnlKjmhI/op4HlkI7kuovku7ZcclxuICAgKi9cclxuICBidXR0b25DbGljayhkYXRhOiBhbnkpIHtcclxuICAgIHRoaXMuZHJvcERvd25FbC5jbG9zZSgpO1xyXG4gICAgdGhpcy52YWx1ZSA9IGRhdGE7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDkuIrkvKDpmYTku7ZcclxuICAgKi9cclxuICB1cGxvYWRBdHRhY2htZW50KCkge1xyXG4gICAgbGV0IGlzUmVwZWF0ID0gZmFsc2U7XHJcbiAgICB0aGlzLnVwbG9hZERpYWxvZy51cGxvYWRGaWxlKHRoaXMucHJvY2Vzc0luc3RhbmNlSWQsICd3Zl9hdHRhY2htZW50JykudGhlbihyZSA9PiB7XHJcbiAgICAgIGZvciAobGV0IGkgb2YgKHJlIGFzIGFueVtdKSkge1xyXG4gICAgICAgIGlzUmVwZWF0ID0gZmFsc2U7XHJcbiAgICAgICAgZm9yIChsZXQgYXR0YWNoIG9mIHRoaXMuYXR0YWNobWVudExpc3QpIHtcclxuICAgICAgICAgIGlmIChhdHRhY2guZmlsZU5hbWUgPT09IGkuZmlsZU5hbWUpIHtcclxuICAgICAgICAgICAgdGhpcy5tZXNzYWdlU2VydmljZS5pbmZvKCfljIXlkKvph43lpI3mlofku7YnICsgaS5maWxlTmFtZSk7XHJcbiAgICAgICAgICAgIGlzUmVwZWF0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghaXNSZXBlYXQpIHtcclxuICAgICAgICAgIHRoaXMuYXR0YWNobWVudExpc3QucHVzaChpKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5hdHRhY2htZW50LmVtaXQodGhpcy5hdHRhY2htZW50TGlzdCk7XHJcbiAgICAgIC8v5omn6KGM5LiK5Lyg6ZmE5Lu2XHJcbiAgICAgIGxldCBmaWxlcyA9IG5ldyBGaWxlVXBsb2FkRW50aXR5KCk7XHJcbiAgICAgIGZpbGVzLnJvb3RJZCA9IFwid2ZfYXR0YWNobWVudFwiO1xyXG4gICAgICBmaWxlcy5tZXRhZGF0YUlkTGlzdCA9IFtdO1xyXG4gICAgICB0aGlzLmF0dGFjaG1lbnRMaXN0LmZvckVhY2goYSA9PiB7XHJcbiAgICAgICAgZmlsZXMubWV0YWRhdGFJZExpc3QucHVzaChhLm1ldGFkYXRhSWQpO1xyXG4gICAgICB9KVxyXG4gICAgICBmaWxlcy5tZXRhZGF0YUlkTGlzdC5sZW5ndGggJiYgdGhpcy50YXNrU2VydmljZS51cGxvYWRBdHRhY2htZW50KGZpbGVzKS5zdWJzY3JpYmUoKCkgPT4geyB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5Yig6Zmk6ZmE5Lu2XHJcbiAgICovXHJcbiAgYXR0YWNobWVudERlbGV0ZShhdHRhY2htZW50KSB7XHJcbiAgICB2YXIgZ3NwRG9jRGVsZXRlRW50aXR5OiBGaWxlRGVsZXRlRW50aXR5ID0ge1xyXG4gICAgICByb290SWQ6IFwid2ZfYXR0YWNobWVudFwiLFxyXG4gICAgICBtZXRhZGF0YUlkOiBhdHRhY2htZW50Lm1ldGFkYXRhSWQsXHJcbiAgICAgIG1vZGU6IFwiRm9ybWFsXCJcclxuICAgIH1cclxuICAgIGxldCBpbmRleCA9IHRoaXMuYXR0YWNobWVudExpc3QuaW5kZXhPZihhdHRhY2htZW50KTtcclxuICAgIGlmIChpbmRleCA+IC0xKSB7XHJcbiAgICAgIHRoaXMuYXR0YWNobWVudExpc3Quc3BsaWNlKGluZGV4LCAxKTtcclxuICAgIH1cclxuICAgIHRoaXMuYXR0YWNobWVudC5lbWl0KHRoaXMuYXR0YWNobWVudExpc3QpO1xyXG4gICAgdGhpcy50YXNrU2VydmljZS5kZWxldGVBdHRhY2htZW50KGdzcERvY0RlbGV0ZUVudGl0eSkuc3Vic2NyaWJlKCgpID0+IHsgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5bkuI3lkIzmoLzlvI/pmYTku7bnmoTnvKnnlaXlm75cclxuICAgKi9cclxuICBpbWFnZVVybChhdHRhY2htZW50SW5mbykge1xyXG4gICAgY29uc3QgdXJsID0gJy9wbGF0Zm9ybS9ydW50aW1lL3dmL3dlYmFwcC9tb2JpbGV0YXNrY2VudGVyL2Fzc2V0cy9hY2Nlc3NvcnkvJztcclxuICAgIHJldHVybiB1cmwgKyB0aGlzLnRhc2tTZXJ2aWNlLmNyZWF0ZUl0ZW0oYXR0YWNobWVudEluZm8pICsgJy5zdmcnO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5bGV56S65omL5YaZ562+5ZCNZGlhbG9nXHJcbiAgICovXHJcbiAgc2hvd1NpZ25EaWFsb2coKSB7XHJcbiAgICB0aGlzLnNpZ25EaWFsb2cuc2hvdygpO1xyXG4gICAgaWYgKCF0aGlzLmlmRW5hYmxlU2lnbikge1xyXG4gICAgICB0aGlzLmdldFVzZXJTaWduKHRoaXMuY3VyVXNlcklkKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gKiDngrnlh7vliKDpmaTnrb7lkI1cclxuICovXHJcbiAgY2xpY2tUb0RlbGV0ZUltYWdlKCkge1xyXG4gICAgdGhpcy5zaWduYXR1cmVJbWFnZSA9ICcnO1xyXG4gICAgdGhpcy5zaWduYXR1cmUuZW1pdChudWxsKTtcclxuICAgIGNvbnN0IGxvYWQgPSB0aGlzLmxvYWRpbmdTZXJ2aWNlLnNob3coKTtcclxuICAgIHRoaXMudGFza1NlcnZpY2UuYWRkVGFza0NlbnRlckNvbmZpZyhDb25maWdDb2RlLklmX1VzZV9TaWduX0J5X0RlZmF1bHQsICdmYWxzZScpLnN1YnNjcmliZShyZSA9PiB7XHJcbiAgICAgIGxvYWQuY2xvc2UoKTtcclxuICAgIH0sICgpID0+IHtcclxuICAgICAgbG9hZC5jbG9zZSgpO1xyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGNsaWNrVG9Vc2VTaWduKCkge1xyXG4gICAgdGhpcy5pZlVzZUltZyA9IGZhbHNlO1xyXG4gICAgdGhpcy5pZlVzZVNpZ24gPSB0cnVlO1xyXG4gICAgY29uc3QgY2FudmFzOiBhbnkgPSB0aGlzLnNpZ25hdHVyZVBhZC5jYW52YXNEaXYubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCdjYW52YXMnKTtcclxuICAgIGNhbnZhcy5oZWlnaHQgPSAyNTI7XHJcbiAgICBjYW52YXMud2lkdGggPSA2NjU7XHJcbiAgfVxyXG5cclxuICBjbGlja1RvVXBsb2FkSW1nKCkge1xyXG4gICAgdGhpcy5mYXJyaXNBdmF0YXIub25DbGljaygpO1xyXG4gIH1cclxuXHJcbiAgY2xpY2tUb0NvbmZpcm0oKSB7XHJcbiAgICBsZXQgaW1hZ2U6IGFueTtcclxuICAgIGlmICh0aGlzLnNpZ25hdHVyZVBhZCAmJiB0aGlzLnNpZ25hdHVyZVBhZC5pc0RyYXcpIHsvL+WmguaenOetvui/h+WQjVxyXG4gICAgICBpbWFnZSA9IHRoaXMuc2lnbmF0dXJlUGFkLmNvbmZpcm0oKTtcclxuICAgIH0gZWxzZSBpZiAodGhpcy5pZlVwbG9hZEltZykgey8v5aaC5p6c5LiK5Lyg6L+H5Zu+54mHXHJcbiAgICAgIGltYWdlID0gdGhpcy50bXBTaWduYXR1cmVJbWFnZTtcclxuICAgIH1cclxuICAgIGlmIChpbWFnZSkge1xyXG4gICAgICB0aGlzLnVwbG9hZFNpZ25hdHVyZUltZyhpbWFnZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAodGhpcy50bXBTaWduYXR1cmVJbWFnZSkge1xyXG4gICAgICAgIHRoaXMuc2lnbmF0dXJlSW1hZ2UgPSB0aGlzLnRtcFNpZ25hdHVyZUltYWdlO1xyXG4gICAgICAgIHRoaXMuc2lnbmF0dXJlLmVtaXQodGhpcy5vcmlnaW5TaWduSWQpO1xyXG4gICAgICAgIGlmICghdGhpcy5pZkVuYWJsZVNpZ24pIHtcclxuICAgICAgICAgIGNvbnN0IGxvYWQgPSB0aGlzLmxvYWRpbmdTZXJ2aWNlLnNob3coKTtcclxuICAgICAgICAgIHRoaXMudGFza1NlcnZpY2UuYWRkVGFza0NlbnRlckNvbmZpZyhDb25maWdDb2RlLklmX1VzZV9TaWduX0J5X0RlZmF1bHQsICd0cnVlJykuc3Vic2NyaWJlKHJlID0+IHtcclxuICAgICAgICAgICAgbG9hZC5jbG9zZSgpO1xyXG4gICAgICAgICAgfSwgKCkgPT4ge1xyXG4gICAgICAgICAgICBsb2FkLmNsb3NlKCk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICB0aGlzLnNpZ25EaWFsb2cuY2xvc2UoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNsaWNrVG9SZXNldCgpIHtcclxuICAgIHRoaXMuaWZVc2VTaWduID0gZmFsc2U7XHJcbiAgICB0aGlzLmlmVXNlSW1nID0gdHJ1ZTtcclxuICAgIHRoaXMuc2lnbmF0dXJlSW1hZ2UgPSAnJztcclxuICAgIHRoaXMudG1wU2lnbmF0dXJlSW1hZ2UgPSAnJztcclxuICAgIHRoaXMuc2lnbmF0dXJlLmVtaXQoJycpO1xyXG4gIH1cclxuXHJcbiAgY2xpY2tUb0NhbmNlbCgpIHtcclxuICAgIHRoaXMuc2lnbkRpYWxvZy5jbG9zZSgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5LiK5Lyg5Zu+54mH5ZCO5LqL5Lu2XHJcbiAgICogZXZlbnQuYmFzZTY0IOaYr+WbvueJh+S/oeaBryxldmVudC5uYW1l5piv5bim5ZCO57yA55qE5Zu+54mH5ZCN77yMZXZlbnQudHlwZeWmgmltYWdlL2pwZWdcclxuICAgKi9cclxuICBpbWdDaGFuZ2UoZXZlbnQ6IGFueSkge1xyXG4gICAgdGhpcy5pZlVzZUltZyA9IHRydWU7XHJcbiAgICB0aGlzLmlmVXNlU2lnbiA9IGZhbHNlO1xyXG4gICAgdGhpcy5pZlVwbG9hZEltZyA9IHRydWU7XHJcbiAgICBjb25zdCBpbWFnZSA9IGV2ZW50LmJhc2U2NDtcclxuICAgIHRoaXMudG1wU2lnbmF0dXJlSW1hZ2UgPSBpbWFnZTtcclxuICAgIHRoaXMuc2lnbmF0dXJlSW1hZ2UgPSBpbWFnZTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgdXBsb2FkU2lnbmF0dXJlSW1nKGltYWdlOiBhbnkpIHtcclxuICAgIHZhciB1cGxvYWRTaWduYXR1cmUgPSBuZXcgR3NwRG9jVXBsb2FkRW50aXR5KCk7XHJcbiAgICB1cGxvYWRTaWduYXR1cmUuZmlsZUNvbnRlbnQgPSBpbWFnZS5zcGxpdCgnLCcpWzFdO1xyXG4gICAgdXBsb2FkU2lnbmF0dXJlLmZpbGVQYXRoID0gdGhpcy5jdXJVc2VySWQ7XHJcbiAgICB1cGxvYWRTaWduYXR1cmUubW9kZSA9IFwiRm9ybWFsXCI7XHJcbiAgICB1cGxvYWRTaWduYXR1cmUubWV0YWRhdGEgPSBuZXcgR3NwRG9jTWV0YWRhdGEoKTtcclxuICAgIHVwbG9hZFNpZ25hdHVyZS5tZXRhZGF0YS5pZCA9IHRoaXMudGFza1NlcnZpY2UuY3JlYXRlTk0oKTtcclxuICAgIHVwbG9hZFNpZ25hdHVyZS5tZXRhZGF0YS5maWxlTmFtZSA9IHRoaXMudGFza1NlcnZpY2UuY3JlYXRlTk0oKSArIFwiLnBuZ1wiO1xyXG4gICAgdXBsb2FkU2lnbmF0dXJlLm1ldGFkYXRhLnJvb3RJZCA9IFwidGFza2NlbnRlcnNpZ25hdHVyZVwiO1xyXG4gICAgdXBsb2FkU2lnbmF0dXJlLm1ldGFkYXRhLmRvY1R5cGUgPSBcInBuZ1wiO1xyXG4gICAgY29uc3QgbG9hZCA9IHRoaXMubG9hZGluZ1NlcnZpY2Uuc2hvdygpO1xyXG4gICAgdGhpcy50YXNrU2VydmljZS51cGxvYWRTaWduYXR1cmUodXBsb2FkU2lnbmF0dXJlKS5zdWJzY3JpYmUoc2lnbklkID0+IHtcclxuICAgICAgbG9hZC5jbG9zZSgpO1xyXG4gICAgICB0aGlzLm9yaWdpblNpZ25JZCA9IHNpZ25JZDtcclxuICAgICAgdGhpcy5zaWduYXR1cmUuZW1pdChzaWduSWQpO1xyXG4gICAgICB0aGlzLnNpZ25hdHVyZUltYWdlID0gaW1hZ2U7XHJcbiAgICAgIHRoaXMuc2lnbkRpYWxvZy5jbG9zZSgpO1xyXG4gICAgfSwgZXJyb3IgPT4ge1xyXG4gICAgICBsb2FkLmNsb3NlKCk7XHJcbiAgICAgIHRoaXMubWVzc2FnZVNlcnZpY2UuZXJyb3IoJ+S4iuS8oOetvuWQjeWksei0pScpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIOiOt+WPlueUqOaIt+eahOacgOi/keS4gOasoeetvuWQjVxyXG4gICAqL1xyXG4gIHByaXZhdGUgZ2V0VXNlclNpZ24odXNlcklkOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IGxvYWQgPSB0aGlzLmxvYWRpbmdTZXJ2aWNlLnNob3coKTtcclxuICAgIHRoaXMudGFza1NlcnZpY2UuZ2V0VXNlclNpZ24odXNlcklkKS5zdWJzY3JpYmUocmVzdWx0ID0+IHtcclxuICAgICAgbG9hZC5jbG9zZSgpO1xyXG4gICAgICBpZiAocmVzdWx0ICYmIHJlc3VsdC5sZW5ndGgpIHtcclxuICAgICAgICB2YXIgc2lnbjtcclxuICAgICAgICBpZiAocmVzdWx0Lmxlbmd0aCA9PSAxKSB7XHJcbiAgICAgICAgICBzaWduID0gcmVzdWx0WzBdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBjb25zdCBsaXN0ID0gcmVzdWx0LmZpbHRlcihhID0+IGEgJiYgYS5sYXN0TW9kaWZpZWRUaW1lKTtcclxuICAgICAgICAgIHNpZ24gPSBsaXN0LnJlZHVjZShmdW5jdGlvbiAoYSwgYikge1xyXG4gICAgICAgICAgICByZXR1cm4gYS5sYXN0TW9kaWZpZWRUaW1lID4gYi5sYXN0TW9kaWZpZWRUaW1lID8gYSA6IGI7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNpZ25hdHVyZS5lbWl0KHNpZ24uaWQpO1xyXG4gICAgICAgIHRoaXMuc2lnbmF0dXJlSW1hZ2UgPSB0aGlzLmRvd25sb2FkU2VydmljZS5nZXREb3dubG9hZFVybChzaWduLmlkLCAndGFza2NlbnRlcnNpZ25hdHVyZScpO1xyXG4gICAgICAgIHRoaXMudG1wU2lnbmF0dXJlSW1hZ2UgPSB0aGlzLnNpZ25hdHVyZUltYWdlO1xyXG4gICAgICB9XHJcbiAgICB9LCBlcnJvciA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgICBsb2FkLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5paw5aKe5LiA5p2h5bi455So5oSP6KeBXHJcbiAgICovXHJcbiAgYWRkKCkge1xyXG4gICAgY29uc3QgbmV3RW50aXR5ID0gQ29tbW9uQ29tbWVudC5uZXdFbnRpdHkoKTtcclxuICAgIG5ld0VudGl0eS5zb3J0T3JkZXIgPSB0aGlzLmNvbW1lbnRMaXN0Lmxlbmd0aCArIDE7XHJcbiAgICB0aGlzLmNvbW1lbnRMaXN0ID0gdGhpcy5jb21tZW50TGlzdC5jb25jYXQobmV3RW50aXR5KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWIoOmZpOS4gOadoeaEj+ingSBkYXRhLnJvd0RhdGFcclxuICAgKi9cclxuICBjbGlja1RvRGVsZXRlQ29tbWVudChkYXRhOiBhbnkpIHtcclxuICAgIGlmIChkYXRhLnJvd0RhdGEudXNlcklkICE9PSAnKicpIHtcclxuICAgICAgdGhpcy5jb21tZW50TGlzdCA9IHRoaXMuY29tbWVudExpc3QuZmlsdGVyKGMgPT4gYy5pZCAhPSBkYXRhLnJvd0RhdGEuaWQpXHJcbiAgICAgIHRoaXMuZGF0YUdyaWQubG9hZERhdGEodGhpcy5jb21tZW50TGlzdCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDluLjnlKjmhI/op4Hkv53lrZhcclxuICAgKi9cclxuICBzYXZlKCkge1xyXG4gICAgdGhpcy5kYXRhR3JpZC5lbmRDZWxsRWRpdCgpO1xyXG4gICAgdGhpcy5odHRwU2F2ZSgpLnN1YnNjcmliZShyID0+IHtcclxuICAgICAgdGhpcy5sb2FkQ29tbWVudHMoKTtcclxuICAgICAgdGhpcy5jb21tZW50RGlhbG9nLmNsb3NlKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiwg+eUqOaOpeWPo+aJp+ihjOaWsOWinuWIoOmZpOOAgeS/ruaUuVxyXG4gICAqL1xyXG4gIHByaXZhdGUgaHR0cFNhdmUoKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgIGNvbnN0IHVybCA9IGAvYXBpL3J1bnRpbWUvd2YvdjEuMC9jb21tb25Db21tZW50c2A7XHJcbiAgICBjb25zdCBvcmlnaW5Db21tZW50SWRzID0gdGhpcy5vcmlnaW5Db21tZW50TGlzdC5maWx0ZXIobyA9PiBvLnVzZXJJZCAhPT0gJyonKS5tYXAoZCA9PiBkLmlkKTtcclxuICAgIC8v5Yig6Zmk55qEXHJcbiAgICBjb25zdCBkZWxldGVJZHMgPSBvcmlnaW5Db21tZW50SWRzLmZpbHRlcihpZCA9PiB0aGlzLmNvbW1lbnRMaXN0LmZpbmRJbmRleChjID0+IGMuaWQgPT09IGlkKSA8IDApO1xyXG5cclxuICAgIHJldHVybiBmb3JrSm9pbihkZWxldGVJZHMubWFwKGlkID0+IHRoaXMuaHR0cFN2Yy5kZWxldGUodXJsICsgYC8ke2lkfWAsIG51bGwpKVxyXG4gICAgICAuY29uY2F0KHRoaXMuY29tbWVudExpc3QubWFwKGFkZCA9PiB0aGlzLmh0dHBTdmMucG9zdCh1cmwsIGFkZCkpKSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICogd2Vi56uv5omT5byA6ZmE5Lu26aKE6KeIXHJcbiAqL1xyXG4gIGF0dGFjaG1lbnRQcmV2aWV3KG1ldGFkYXRhSWQpIHtcclxuICAgIGNvbnN0IG9wdGlvbnMgPSB7XHJcbiAgICAgIGFwcFR5cGU6IFwiYXBwXCIsXHJcbiAgICAgIGZ1bmNJZDogXCJcIixcclxuICAgICAgdGFiTmFtZTogXCLmlofmoaPlnKjnur/pooTop4hcIixcclxuICAgICAgYXBwSWQ6IFwiNmNjYjQ3NmItZjJiYS1kZjhmLTZmNDctZDM3ZDEwMGM1NmUyXCIsXHJcbiAgICAgIGFwcEVudHJhbmNlOiBcImRvY3ZpZXdlcnRhYlwiLFxyXG4gICAgICB0YWJJZDogbmV3IERhdGUoKS5nZXRUaW1lKCksXHJcbiAgICAgIGVudGl0eVBhcmFtczoge1xyXG4gICAgICAgIG1ldGFkYXRhSWRMaXN0OiBbbWV0YWRhdGFJZF0sXHJcbiAgICAgICAgcm9vdElkOiBcIndmX2F0dGFjaG1lbnRcIixcclxuICAgICAgICBtZXRhZGF0YUlkOiBudWxsLFxyXG4gICAgICAgIHZpZXdPcHRpb25zOiB7XHJcbiAgICAgICAgICBzaG93SGVhZGVyOiB0cnVlLFxyXG4gICAgICAgICAgc2hvd1BhZ2luZzogdHJ1ZSxcclxuICAgICAgICAgIHNob3dUaHVtYm5haWxzOiB0cnVlLFxyXG4gICAgICAgICAgc2hvd0Rvd25sb2FkOiB0cnVlLFxyXG4gICAgICAgICAgc2hvd1NlYXJjaDogdHJ1ZSxcclxuICAgICAgICAgIHNob3dab29tOiB0cnVlLFxyXG4gICAgICAgICAgc2hvd1ByaW50OiB0cnVlLFxyXG4gICAgICAgICAgc2hvd1NlY29uZGFyeVRvb2xCYXI6IHRydWUsXHJcbiAgICAgICAgfSxcclxuICAgICAgfSxcclxuICAgIH07XHJcbiAgICAod2luZG93IGFzIGFueSkuZ3NwZnJhbWV3b3JrU2VydmljZS5ydGYuZnVuYy5vcGVuTWVudShvcHRpb25zKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOezu+e7n+mihOe9rueahOS4jeWFgeiuuOe8lui+keWIoOmZpFxyXG4gICAqIEBwYXJhbSBkYXRhIGRhdGEucm93RGF0YeS4uuWunuS9k+aVsOaNrlxyXG4gICAqIEByZXR1cm5zXHJcbiAgICovXHJcbiAgYmVmb3JlRWRpdCA9IChkYXRhOiBhbnkpID0+IHtcclxuICAgIGlmIChkYXRhLnJvd0RhdGEudXNlcklkID09ICcqJykge1xyXG4gICAgICByZXR1cm4gb2YoZmFsc2UpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG9mKHRydWUpO1xyXG4gIH1cclxufVxyXG4iXX0=