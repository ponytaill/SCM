/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Injectable } from '@angular/core';
import { ProcessDesignerUIState } from './process-designer.uistate';
import { ResourceKeys } from '../model/resourceKeys';
import { EntryFormEditorComponent, FlowFormConverter } from '../views/entryForm/entry-form-editor.component';
import { ActivityComponentComponent, ActivityComponentConverter } from '../views/activity-component/activity-component.component';
import { ExecuteFormsComponent, ExecuteFormsConverter } from '../views/execute-forms/execute-forms.component';
import { TitleExpressionComponent, TitleExpressionConverter } from '../views/title-expression/title-expression.component';
import { CustomizeActionComponent, CustomizeActionConverter } from '../views/customize-action/customize-action.component';
import { ProcessVariablesComponent, ProcessVariablesConverter } from '../views/process-variables/process-variables.component';
import { TimeLimitControlComponent, TimeLimitControlConverter } from '../views/time-limit-control/time-limit-control.component';
import { MessageNoticeComponent, MessageNoticeConverter } from '../views/message-notice/message-notice.component';
import { ExtendPropertyComponent, ExtendPropertyConverter } from '../views/extend-property/extend-property.component';
var BpmnProcessViewModel = /** @class */ (function () {
    function BpmnProcessViewModel(uiState) {
        this.uiState = uiState;
    }
    /**
     * @param {?} obj
     * @return {?}
     */
    BpmnProcessViewModel.prototype.setProcessProperty = /**
     * @param {?} obj
     * @return {?}
     */
    function (obj) {
        // if (obj.propertyData.EntryForm) {
        //     obj.propertyData.EntryForm = this.uiState.flowFormInfo.flowForm;
        // }
        this.uiState.propertyData = obj.propertyData;
        this.uiState.ProcessVariables = this.uiState.propertyData[ResourceKeys.processVariables];
        this.uiState.propertyConfig = this.setProcessConfig(obj.propertyConfig);
    };
    /**
     * @param {?} obj
     * @return {?}
     */
    BpmnProcessViewModel.prototype.setProcessConfig = /**
     * @param {?} obj
     * @return {?}
     */
    function (obj) {
        var _this = this;
        /** @type {?} */
        var propertyConfig = [];
        if (obj) {
            obj.forEach((/**
             * @param {?} element
             * @return {?}
             */
            function (element) {
                _this.setProcessEntity(element.properties);
                propertyConfig.push(element);
            }));
        }
        return propertyConfig;
    };
    /**
     * @private
     * @param {?} obj
     * @return {?}
     */
    BpmnProcessViewModel.prototype.setProcessEntity = /**
     * @private
     * @param {?} obj
     * @return {?}
     */
    function (obj) {
        var _this = this;
        if (obj.length > 0) {
            obj.forEach((/**
             * @param {?} item
             * @return {?}
             */
            function (item) {
                switch (item.propertyID) {
                    case ResourceKeys.EntryForm: // 流程分类
                        item.editor = EntryFormEditorComponent;
                        item.converter = new FlowFormConverter();
                        // item.editorParams = {
                        //     flowForms: [this.uiState.flowFormInfo.flowForm]
                        // };
                        break;
                    case ResourceKeys.wf_Component:
                        item.editor = ActivityComponentComponent;
                        item.converter = new ActivityComponentConverter();
                        item.editorParams = {
                            location: 'process'
                        };
                        break;
                    case ResourceKeys.wf_ExecuteForms_PC:
                        item.editor = ExecuteFormsComponent;
                        item.converter = new ExecuteFormsConverter();
                        item.editorParams = {
                            location: 'process',
                            tab: 'web'
                        };
                        break;
                    case ResourceKeys.wf_ExecuteForms_Mobile:
                        item.editor = ExecuteFormsComponent;
                        item.converter = new ExecuteFormsConverter();
                        item.editorParams = {
                            location: 'process',
                            tab: 'mobile'
                        };
                        break;
                    case ResourceKeys.wf_TitleExpression:
                        item.editor = TitleExpressionComponent;
                        item.converter = new TitleExpressionConverter();
                        break;
                    case ResourceKeys.allowPreAssign:
                        item.iterator = _this.uiState.boolIterator;
                        break;
                    case ResourceKeys.startMode:
                        item.iterator = _this.uiState.startModeIterator;
                        break;
                    case ResourceKeys.DisplayTerminal:
                        item.iterator = _this.uiState.displayTerminal;
                        break;
                    case ResourceKeys.wf_CustomizeAction:
                        item.editor = CustomizeActionComponent;
                        item.converter = new CustomizeActionConverter();
                        break;
                    case ResourceKeys.processVariables:
                        item.editor = ProcessVariablesComponent;
                        item.converter = new ProcessVariablesConverter();
                        break;
                    case ResourceKeys.timeLimitControl:
                        item.editor = TimeLimitControlComponent;
                        item.converter = new TimeLimitControlConverter();
                        item.editorParams = {
                            location: 'process'
                        };
                        break;
                    case ResourceKeys.messageNotice:
                        item.editor = MessageNoticeComponent;
                        item.converter = new MessageNoticeConverter();
                        item.editorParams = {
                            location: 'process'
                        };
                        break;
                    default:
                        item.editor = ExtendPropertyComponent;
                        item.converter = new ExtendPropertyConverter();
                        break;
                }
            }));
        }
    };
    BpmnProcessViewModel.decorators = [
        { type: Injectable }
    ];
    /** @nocollapse */
    BpmnProcessViewModel.ctorParameters = function () { return [
        { type: ProcessDesignerUIState }
    ]; };
    return BpmnProcessViewModel;
}());
export { BpmnProcessViewModel };
if (false) {
    /**
     * @type {?}
     * @private
     */
    BpmnProcessViewModel.prototype.uiState;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnBtbi1wcm9jZXNzLnZpZXdtb2RlbC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Bnc3Atd2Yvd2YtcHJvY2Vzcy1lZGl0b3IvIiwic291cmNlcyI6WyJsaWIvYXBwL2JwbW4tcHJvY2Vzcy52aWV3bW9kZWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDM0MsT0FBTyxFQUFFLHNCQUFzQixFQUFFLE1BQU0sNEJBQTRCLENBQUM7QUFFcEUsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBQ3JELE9BQU8sRUFBRSx3QkFBd0IsRUFBRSxpQkFBaUIsRUFBRSxNQUFNLGdEQUFnRCxDQUFDO0FBQzdHLE9BQU8sRUFDTCwwQkFBMEIsRUFDMUIsMEJBQTBCLEVBQzNCLE1BQU0sMERBQTBELENBQUM7QUFDbEUsT0FBTyxFQUFFLHFCQUFxQixFQUFFLHFCQUFxQixFQUFFLE1BQU0sZ0RBQWdELENBQUM7QUFDOUcsT0FBTyxFQUFFLHdCQUF3QixFQUFFLHdCQUF3QixFQUFFLE1BQU0sc0RBQXNELENBQUM7QUFDMUgsT0FBTyxFQUFFLHdCQUF3QixFQUFFLHdCQUF3QixFQUFFLE1BQU0sc0RBQXNELENBQUM7QUFDMUgsT0FBTyxFQUNMLHlCQUF5QixFQUN6Qix5QkFBeUIsRUFDMUIsTUFBTSx3REFBd0QsQ0FBQztBQUNoRSxPQUFPLEVBQ0wseUJBQXlCLEVBQ3pCLHlCQUF5QixFQUMxQixNQUFNLDBEQUEwRCxDQUFDO0FBQ2xFLE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxzQkFBc0IsRUFBRSxNQUFNLGtEQUFrRCxDQUFDO0FBQ2xILE9BQU8sRUFBRSx1QkFBdUIsRUFBRSx1QkFBdUIsRUFBRSxNQUFNLG9EQUFvRCxDQUFDO0FBRXRIO0lBR0UsOEJBQW9CLE9BQStCO1FBQS9CLFlBQU8sR0FBUCxPQUFPLENBQXdCO0lBRW5ELENBQUM7Ozs7O0lBRUQsaURBQWtCOzs7O0lB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U0FDSjtJQUNILENBQUM7O2dCQXZHRixVQUFVOzs7O2dCQXRCRixzQkFBc0I7O0lBOEgvQiwyQkFBQztDQUFBLEFBeEdELElBd0dDO1NBdEdZLG9CQUFvQjs7Ozs7O0lBQ25CLHVDQUF1QyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgUHJvY2Vzc0Rlc2lnbmVyVUlTdGF0ZSB9IGZyb20gJy4vcHJvY2Vzcy1kZXNpZ25lci51aXN0YXRlJztcclxuaW1wb3J0IHsgUHJvcGVydHlFbnRpdHksIEVsZW1lbnRQcm9wZXJ0eUNvbmZpZyB9IGZyb20gJ0BmYXJyaXMvdWktcHJvcGVydHktcGFuZWwnO1xyXG5pbXBvcnQgeyBSZXNvdXJjZUtleXMgfSBmcm9tICcuLi9tb2RlbC9yZXNvdXJjZUtleXMnO1xyXG5pbXBvcnQgeyBFbnRyeUZvcm1FZGl0b3JDb21wb25lbnQsIEZsb3dGb3JtQ29udmVydGVyIH0gZnJvbSAnLi4vdmlld3MvZW50cnlGb3JtL2VudHJ5LWZvcm0tZWRpdG9yLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7XHJcbiAgQWN0aXZpdHlDb21wb25lbnRDb21wb25lbnQsXHJcbiAgQWN0aXZpdHlDb21wb25lbnRDb252ZXJ0ZXJcclxufSBmcm9tICcuLi92aWV3cy9hY3Rpdml0eS1jb21wb25lbnQvYWN0aXZpdHktY29tcG9uZW50LmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IEV4ZWN1dGVGb3Jtc0NvbXBvbmVudCwgRXhlY3V0ZUZvcm1zQ29udmVydGVyIH0gZnJvbSAnLi4vdmlld3MvZXhlY3V0ZS1mb3Jtcy9leGVjdXRlLWZvcm1zLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IFRpdGxlRXhwcmVzc2lvbkNvbXBvbmVudCwgVGl0bGVFeHByZXNzaW9uQ29udmVydGVyIH0gZnJvbSAnLi4vdmlld3MvdGl0bGUtZXhwcmVzc2lvbi90aXRsZS1leHByZXNzaW9uLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IEN1c3RvbWl6ZUFjdGlvbkNvbXBvbmVudCwgQ3VzdG9taXplQWN0aW9uQ29udmVydGVyIH0gZnJvbSAnLi4vdmlld3MvY3VzdG9taXplLWFjdGlvbi9jdXN0b21pemUtYWN0aW9uLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7XHJcbiAgUHJvY2Vzc1ZhcmlhYmxlc0NvbXBvbmVudCxcclxuICBQcm9jZXNzVmFyaWFibGVzQ29udmVydGVyXHJcbn0gZnJvbSAnLi4vdmlld3MvcHJvY2Vzcy12YXJpYWJsZXMvcHJvY2Vzcy12YXJpYWJsZXMuY29tcG9uZW50JztcclxuaW1wb3J0IHtcclxuICBUaW1lTGltaXRDb250cm9sQ29tcG9uZW50LFxyXG4gIFRpbWVMaW1pdENvbnRyb2xDb252ZXJ0ZXJcclxufSBmcm9tICcuLi92aWV3cy90aW1lLWxpbWl0LWNvbnRyb2wvdGltZS1saW1pdC1jb250cm9sLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IE1lc3NhZ2VOb3RpY2VDb21wb25lbnQsIE1lc3NhZ2VOb3RpY2VDb252ZXJ0ZXIgfSBmcm9tICcuLi92aWV3cy9tZXNzYWdlLW5vdGljZS9tZXNzYWdlLW5vdGljZS5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBFeHRlbmRQcm9wZXJ0eUNvbXBvbmVudCwgRXh0ZW5kUHJvcGVydHlDb252ZXJ0ZXIgfSBmcm9tICcuLi92aWV3cy9leHRlbmQtcHJvcGVydHkvZXh0ZW5kLXByb3BlcnR5LmNvbXBvbmVudCc7XHJcblxyXG5ASW5qZWN0YWJsZSgpXHJcblxyXG5leHBvcnQgY2xhc3MgQnBtblByb2Nlc3NWaWV3TW9kZWwge1xyXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgdWlTdGF0ZTogUHJvY2Vzc0Rlc2lnbmVyVUlTdGF0ZSkge1xyXG5cclxuICB9XHJcblxyXG4gIHNldFByb2Nlc3NQcm9wZXJ0eShvYmo6IGFueSkge1xyXG4gICAgLy8gaWYgKG9iai5wcm9wZXJ0eURhdGEuRW50cnlGb3JtKSB7XHJcbiAgICAvLyAgICAgb2JqLnByb3BlcnR5RGF0YS5FbnRyeUZvcm0gPSB0aGlzLnVpU3RhdGUuZmxvd0Zvcm1JbmZvLmZsb3dGb3JtO1xyXG4gICAgLy8gfVxyXG4gICAgdGhpcy51aVN0YXRlLnByb3BlcnR5RGF0YSA9IG9iai5wcm9wZXJ0eURhdGE7XHJcbiAgICB0aGlzLnVpU3RhdGUuUHJvY2Vzc1ZhcmlhYmxlcyA9IHRoaXMudWlTdGF0ZS5wcm9wZXJ0eURhdGFbUmVzb3VyY2VLZXlzLnByb2Nlc3NWYXJpYWJsZXNdO1xyXG4gICAgdGhpcy51aVN0YXRlLnByb3BlcnR5Q29uZmlnID0gdGhpcy5zZXRQcm9jZXNzQ29uZmlnKG9iai5wcm9wZXJ0eUNvbmZpZyk7XHJcbiAgfVxyXG5cclxuICBzZXRQcm9jZXNzQ29uZmlnKG9iajogYW55W10pOiBFbGVtZW50UHJvcGVydHlDb25maWdbXSB7XHJcbiAgICBjb25zdCBwcm9wZXJ0eUNvbmZpZzogRWxlbWVudFByb3BlcnR5Q29uZmlnW10gPSBbXTtcclxuICAgIGlmIChvYmopIHtcclxuICAgICAgb2JqLmZvckVhY2goKGVsZW1lbnQ6IEVsZW1lbnRQcm9wZXJ0eUNvbmZpZykgPT4ge1xyXG4gICAgICAgIHRoaXMuc2V0UHJvY2Vzc0VudGl0eShlbGVtZW50LnByb3BlcnRpZXMpO1xyXG4gICAgICAgIHByb3BlcnR5Q29uZmlnLnB1c2goZWxlbWVudCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHByb3BlcnR5Q29uZmlnO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzZXRQcm9jZXNzRW50aXR5KG9iajogUHJvcGVydHlFbnRpdHlbXSkge1xyXG4gICAgaWYgKG9iai5sZW5ndGggPiAwKSB7XHJcbiAgICAgIG9iai5mb3JFYWNoKChpdGVtOiBQcm9wZXJ0eUVudGl0eSkgPT4ge1xyXG4gICAgICAgIHN3aXRjaCAoaXRlbS5wcm9wZXJ0eUlEKSB7XHJcbiAgICAgICAgICBjYXNlIFJlc291cmNlS2V5cy5FbnRyeUZvcm06IC8vIOa1geeoi+WIhuexu1xyXG4gICAgICAgICAgICBpdGVtLmVkaXRvciA9IEVudHJ5Rm9ybUVkaXRvckNvbXBvbmVudDtcclxuICAgICAgICAgICAgaXRlbS5jb252ZXJ0ZXIgPSBuZXcgRmxvd0Zvcm1Db252ZXJ0ZXIoKTtcclxuICAgICAgICAgICAgLy8gaXRlbS5lZGl0b3JQYXJhbXMgPSB7XHJcbiAgICAgICAgICAgIC8vICAgICBmbG93Rm9ybXM6IFt0aGlzLnVpU3RhdGUuZmxvd0Zvcm1JbmZvLmZsb3dGb3JtXVxyXG4gICAgICAgICAgICAvLyB9O1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgUmVzb3VyY2VLZXlzLndmX0NvbXBvbmVudDpcclxuICAgICAgICAgICAgaXRlbS5lZGl0b3IgPSBBY3Rpdml0eUNvbXBvbmVudENvbXBvbmVudDtcclxuICAgICAgICAgICAgaXRlbS5jb252ZXJ0ZXIgPSBuZXcgQWN0aXZpdHlDb21wb25lbnRDb252ZXJ0ZXIoKTtcclxuICAgICAgICAgICAgaXRlbS5lZGl0b3JQYXJhbXMgPSB7XHJcbiAgICAgICAgICAgICAgbG9jYXRpb246ICdwcm9jZXNzJ1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgUmVzb3VyY2VLZXlzLndmX0V4ZWN1dGVGb3Jtc19QQzpcclxuICAgICAgICAgICAgaXRlbS5lZGl0b3IgPSBFeGVjdXRlRm9ybXNDb21wb25lbnQ7XHJcbiAgICAgICAgICAgIGl0ZW0uY29udmVydGVyID0gbmV3IEV4ZWN1dGVGb3Jtc0NvbnZlcnRlcigpO1xyXG4gICAgICAgICAgICBpdGVtLmVkaXRvclBhcmFtcyA9IHtcclxuICAgICAgICAgICAgICBsb2NhdGlvbjogJ3Byb2Nlc3MnLFxyXG4gICAgICAgICAgICAgIHRhYjogJ3dlYidcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlIFJlc291cmNlS2V5cy53Zl9FeGVjdXRlRm9ybXNfTW9iaWxlOlxyXG4gICAgICAgICAgICBpdGVtLmVkaXRvciA9IEV4ZWN1dGVGb3Jtc0NvbXBvbmVudDtcclxuICAgICAgICAgICAgaXRlbS5jb252ZXJ0ZXIgPSBuZXcgRXhlY3V0ZUZvcm1zQ29udmVydGVyKCk7XHJcbiAgICAgICAgICAgIGl0ZW0uZWRpdG9yUGFyYW1zID0ge1xyXG4gICAgICAgICAgICAgIGxvY2F0aW9uOiAncHJvY2VzcycsXHJcbiAgICAgICAgICAgICAgdGFiOiAnbW9iaWxlJ1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgUmVzb3VyY2VLZXlzLndmX1RpdGxlRXhwcmVzc2lvbjpcclxuICAgICAgICAgICAgaXRlbS5lZGl0b3IgPSBUaXRsZUV4cHJlc3Npb25Db21wb25lbnQ7XHJcbiAgICAgICAgICAgIGl0ZW0uY29udmVydGVyID0gbmV3IFRpdGxlRXhwcmVzc2lvbkNvbnZlcnRlcigpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgUmVzb3VyY2VLZXlzLmFsbG93UHJlQXNzaWduOlxyXG4gICAgICAgICAgICBpdGVtLml0ZXJhdG9yID0gdGhpcy51aVN0YXRlLmJvb2xJdGVyYXRvcjtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlIFJlc291cmNlS2V5cy5zdGFydE1vZGU6XHJcbiAgICAgICAgICAgIGl0ZW0uaXRlcmF0b3IgPSB0aGlzLnVpU3RhdGUuc3RhcnRNb2RlSXRlcmF0b3I7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgY2FzZSBSZXNvdXJjZUtleXMuRGlzcGxheVRlcm1pbmFsOlxyXG4gICAgICAgICAgICBpdGVtLml0ZXJhdG9yID0gdGhpcy51aVN0YXRlLmRpc3BsYXlUZXJtaW5hbDtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlIFJlc291cmNlS2V5cy53Zl9DdXN0b21pemVBY3Rpb246XHJcbiAgICAgICAgICAgIGl0ZW0uZWRpdG9yID0gQ3VzdG9taXplQWN0aW9uQ29tcG9uZW50O1xyXG4gICAgICAgICAgICBpdGVtLmNvbnZlcnRlciA9IG5ldyBDdXN0b21pemVBY3Rpb25Db252ZXJ0ZXIoKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlIFJlc291cmNlS2V5cy5wcm9jZXNzVmFyaWFibGVzOlxyXG4gICAgICAgICAgICBpdGVtLmVkaXRvciA9IFByb2Nlc3NWYXJpYWJsZXNDb21wb25lbnQ7XHJcbiAgICAgICAgICAgIGl0ZW0uY29udmVydGVyID0gbmV3IFByb2Nlc3NWYXJpYWJsZXNDb252ZXJ0ZXIoKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlIFJlc291cmNlS2V5cy50aW1lTGltaXRDb250cm9sOlxyXG4gICAgICAgICAgICBpdGVtLmVkaXRvciA9IFRpbWVMaW1pdENvbnRyb2xDb21wb25lbnQ7XHJcbiAgICAgICAgICAgIGl0ZW0uY29udmVydGVyID0gbmV3IFRpbWVMaW1pdENvbnRyb2xDb252ZXJ0ZXIoKTtcclxuICAgICAgICAgICAgaXRlbS5lZGl0b3JQYXJhbXMgPSB7XHJcbiAgICAgICAgICAgICAgbG9jYXRpb246ICdwcm9jZXNzJ1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgUmVzb3VyY2VLZXlzLm1lc3NhZ2VOb3RpY2U6XHJcbiAgICAgICAgICAgIGl0ZW0uZWRpdG9yID0gTWVzc2FnZU5vdGljZUNvbXBvbmVudDtcclxuICAgICAgICAgICAgaXRlbS5jb252ZXJ0ZXIgPSBuZXcgTWVzc2FnZU5vdGljZUNvbnZlcnRlcigpO1xyXG4gICAgICAgICAgICBpdGVtLmVkaXRvclBhcmFtcyA9IHtcclxuICAgICAgICAgICAgICBsb2NhdGlvbjogJ3Byb2Nlc3MnXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgaXRlbS5lZGl0b3IgPSBFeHRlbmRQcm9wZXJ0eUNvbXBvbmVudDtcclxuICAgICAgICAgICAgaXRlbS5jb252ZXJ0ZXIgPSBuZXcgRXh0ZW5kUHJvcGVydHlDb252ZXJ0ZXIoKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIl19