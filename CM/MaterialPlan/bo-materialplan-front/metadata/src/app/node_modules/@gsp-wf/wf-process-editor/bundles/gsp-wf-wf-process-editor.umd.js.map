{"version":3,"file":"gsp-wf-wf-process-editor.umd.js.map","sources":["ng://@gsp-wf/wf-process-editor/lib/wf-process-editor.service.ts","ng://@gsp-wf/wf-process-editor/lib/model/process-time.ts","node_modules/tslib/tslib.es6.js","ng://@gsp-wf/wf-process-editor/lib/domain/entities/flowform-info.ts","ng://@gsp-wf/wf-process-editor/lib/app/process-designer.uistate.ts","ng://@gsp-wf/wf-process-editor/lib/model/resourceKeys.ts","ng://@gsp-wf/wf-process-editor/lib/domain/process-de-util.ts","ng://@gsp-wf/wf-process-editor/lib/domain/process-designer.dataservice.ts","ng://@gsp-wf/wf-process-editor/lib/model/process-clrtypeId.ts","ng://@gsp-wf/wf-process-editor/lib/views/entryForm/entry-form-editor.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/activity-component/activity-component.uistate.ts","ng://@gsp-wf/wf-process-editor/lib/domain/entities/biz-component.entity.ts","ng://@gsp-wf/wf-process-editor/lib/views/activity-component/activity-component.repository.ts","ng://@gsp-wf/wf-process-editor/lib/views/activity-component/activity-component.viewmodel.ts","ng://@gsp-wf/wf-process-editor/lib/domain/entities/actual-parameter.ts","ng://@gsp-wf/wf-process-editor/lib/views/activity-component/activity-component.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/execute-forms/execute-forms.uistate.ts","ng://@gsp-wf/wf-process-editor/lib/views/execute-forms/execute-forms.viewmodel.ts","ng://@gsp-wf/wf-process-editor/lib/views/execute-forms/execute-forms.repository.ts","ng://@gsp-wf/wf-process-editor/lib/views/execute-forms/entities/execute-form.entity.ts","ng://@gsp-wf/wf-process-editor/lib/views/execute-forms/add-execute-form/form-format.service.ts","ng://@gsp-wf/wf-process-editor/lib/views/execute-forms/entities/execute-form.ts","ng://@gsp-wf/wf-process-editor/lib/views/execute-forms/add-execute-form/add-execute-form.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/execute-forms/parameter-setting/parameter-setting.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/execute-forms/execute-forms.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/title-expression/title-expression.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/customize-action/entities/customize-action.entity.ts","ng://@gsp-wf/wf-process-editor/lib/views/customize-action/views/customize-action-list/customize-action-list.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/customize-action/customize-action.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/process-variables/process-variable.entity.ts","ng://@gsp-wf/wf-process-editor/lib/views/variable-setting/views/constant-edit/constant-edit.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/variable-setting/views/component-edit/component-edit-lookup.service.ts","ng://@gsp-wf/wf-process-editor/lib/views/variable-setting/views/component-edit/component-edit.service.ts","ng://@gsp-wf/wf-process-editor/lib/views/variable-setting/views/component-edit/component.entity.ts","ng://@gsp-wf/wf-process-editor/lib/views/variable-setting/views/component-edit/component-edit.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/process-variables/process-variables.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/time-limit-control/time-limit-control.entity.ts","ng://@gsp-wf/wf-process-editor/lib/views/time-limit-control/send-message-operation/send-message-operation.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/time-limit-control/auto-handle-operation/auto-handle-operation.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/time-limit-control/time-limit-control.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/message-notice/message-notice.ts","ng://@gsp-wf/wf-process-editor/lib/views/message-notice/message-notice-edit/message-notice-edit.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/message-notice/message-notice.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/extend-property/extend-property.component.ts","ng://@gsp-wf/wf-process-editor/lib/app/bpmn-process.viewmodel.ts","ng://@gsp-wf/wf-process-editor/lib/views/approvel-items/entities/approval-item.entity.ts","ng://@gsp-wf/wf-process-editor/lib/views/organization-potential-owner/actionOrganizationScope.ts","ng://@gsp-wf/wf-process-editor/lib/views/assign-performer-config/assign-performer-config.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/sign-rule/entites/sign-rule.entity.ts","ng://@gsp-wf/wf-process-editor/lib/views/sign-rule/sign-rule.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/approvel-items/approvel-items.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/expressionEditor/expression-editor.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/jump-scope/jump-scope.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/backward-rule/backward-rule.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/performer/performer.uistate.ts","ng://@gsp-wf/wf-process-editor/lib/views/performer/performer.repository.ts","ng://@gsp-wf/wf-process-editor/lib/views/performer/performer.viewmodel.ts","ng://@gsp-wf/wf-process-editor/lib/views/performer/entities/performer.entity.ts","ng://@gsp-wf/wf-process-editor/lib/views/performer/entities/user-performer.entity.ts","ng://@gsp-wf/wf-process-editor/lib/views/performer/performer-config.service.ts","ng://@gsp-wf/wf-process-editor/lib/views/performer/views/user-performer/user-performer.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/performer/entities/position-performer.entity.ts","ng://@gsp-wf/wf-process-editor/lib/views/performer/views/position-performer/position-performer.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/performer/views/component-performer/component-performer.service.ts","ng://@gsp-wf/wf-process-editor/lib/views/performer/views/component-performer/component-performer.entity.ts","ng://@gsp-wf/wf-process-editor/lib/views/performer/views/component-performer/component-performer.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/performer/views/reporting-line/reporting-line-data.entity.ts","ng://@gsp-wf/wf-process-editor/lib/views/performer/views/reporting-line/service/wf-report-def-help.service.ts","ng://@gsp-wf/wf-process-editor/lib/views/performer/views/reporting-line/service/wf-report-def-help.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/performer/views/reporting-line/reporting-line.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/performer/views/matrix-performer/entitis/matrix-def-info.entity.ts","ng://@gsp-wf/wf-process-editor/lib/views/performer/views/matrix-performer/entitis/matrix-data-info.entity.ts","ng://@gsp-wf/wf-process-editor/lib/views/performer/views/matrix-performer/enum-list/enum-list.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/performer/views/matrix-performer/matrix-performer.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/performer/views/performer-edit/performer-edit.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/performer/views/performer-options/performer-options.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/performer/performer.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/organization-potential-owner/organization-potential-owner.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/anonymous-set/anonymous-set.entity.ts","ng://@gsp-wf/wf-process-editor/lib/views/anonymous-set/anonymous-set.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/variable-setting/variable-setting.ts","ng://@gsp-wf/wf-process-editor/lib/views/variable-setting/variable-setting.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/approval-pivot/approval-pivot-config.ts","ng://@gsp-wf/wf-process-editor/lib/views/approval-pivot/approval-pivot.ts","ng://@gsp-wf/wf-process-editor/lib/views/approval-pivot/approval-pivot.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/urge-handle-rule/urge-handle-rule.ts","ng://@gsp-wf/wf-process-editor/lib/views/urge-handle-rule/urge-handle-rule.component.ts","ng://@gsp-wf/wf-process-editor/lib/app/wf-flowElements.viewModel.ts","ng://@gsp-wf/wf-process-editor/lib/views/save-as-edit/save-as-edit.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/call-activity-sub-process/BillSourceType.ts","ng://@gsp-wf/wf-process-editor/lib/views/call-activity-sub-process/SubProcessType.ts","ng://@gsp-wf/wf-process-editor/lib/views/call-activity-sub-process/call-activity-sub-process.entity.ts","ng://@gsp-wf/wf-process-editor/lib/aif-process-list-help/entity/BifMonitorConstant.ts","ng://@gsp-wf/wf-process-editor/lib/aif-process-list-help/entity/BifMetadataType.ts","ng://@gsp-wf/wf-process-editor/lib/aif-process-list-help/entity/AbstractShowEntity.ts","ng://@gsp-wf/wf-process-editor/lib/aif-process-list-help/entity/RtShowEntity.ts","ng://@gsp-wf/wf-process-editor/lib/aif-process-list-help/entity/RtShowEntitiesWithCustomization.ts","ng://@gsp-wf/wf-process-editor/lib/aif-process-list-help/entity/RtBillProcessListResult.ts","ng://@gsp-wf/wf-process-editor/lib/aif-process-list-help/services/process-list-help.service.ts","ng://@gsp-wf/wf-process-editor/lib/aif-process-list-help/entity/ProcessFilterConditionArgs.ts","ng://@gsp-wf/wf-process-editor/lib/aif-process-list-help/entity/OrderByDirection.ts","ng://@gsp-wf/wf-process-editor/lib/aif-ui-common/pipe/aif-ui-common-locale.pipe.ts","ng://@gsp-wf/wf-process-editor/lib/aif-process-list-help/components/process-list-help/process-list-help.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/call-activity-sub-process2/call-activity-sub-process2.component.ts","ng://@gsp-wf/wf-process-editor/lib/app/sub-process.viewmodel.ts","ng://@gsp-wf/wf-process-editor/lib/app/auto-activity.adapter.ts","ng://@gsp-wf/wf-process-editor/lib/views/event-definition/event-definition.entity.ts","ng://@gsp-wf/wf-process-editor/lib/views/event-definition/event-definition.component.ts","ng://@gsp-wf/wf-process-editor/lib/app/catch-event.adapter.ts","ng://@gsp-wf/wf-process-editor/lib/app/message-activity.adapter.ts","ng://@gsp-wf/wf-process-editor/lib/domain/entities/audit-processDef-info.ts","ng://@gsp-wf/wf-process-editor/lib/model/process-info.ts","ng://@gsp-wf/wf-process-editor/lib/app/notify-activity.adapter.ts","ng://@gsp-wf/wf-process-editor/lib/aif-process-list-help/AifCreationBillProcessConverter.ts","ng://@gsp-wf/wf-process-editor/lib/app/aif-creation-bill-activity.adapter.ts","ng://@gsp-wf/wf-process-editor/lib/app/process-designer.viewmodel.ts","ng://@gsp-wf/wf-process-editor/lib/views/note/note.component.ts","ng://@gsp-wf/wf-process-editor/lib/wf-process-editor.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/jump-scope/jump-scope.pipe.ts","ng://@gsp-wf/wf-process-editor/lib/views/performer/views/user-performer/users-name.pipe.ts","ng://@gsp-wf/wf-process-editor/lib/index.ts","ng://@gsp-wf/wf-process-editor/lib/views/call-activity-sub-process/call-activity-sub-process.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/execute-forms/entities/form-format.ts","ng://@gsp-wf/wf-process-editor/lib/views/execute-forms/entities/form-format-config.ts","ng://@gsp-wf/wf-process-editor/lib/views/execute-forms/entities/form-method-config.ts","ng://@gsp-wf/wf-process-editor/lib/views/execute-forms/form-operation-config/form-operation-config.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/execute-forms/form-format-config/form-format-config.component.ts","ng://@gsp-wf/wf-process-editor/lib/views/execute-forms/form-config-container/form-config-container.component.ts","ng://@gsp-wf/wf-process-editor/lib/aif-process-list-help/entity/VOTemplateType.ts","ng://@gsp-wf/wf-process-editor/lib/aif-process-list-help/utils/common-model-type-helper.ts","ng://@gsp-wf/wf-process-editor/lib/aif-process-list-help/components/proc-help-query-solution/proc-help-query-solution.component.ts","ng://@gsp-wf/wf-process-editor/lib/aif-ui-common/aif-ui-common.module.ts","ng://@gsp-wf/wf-process-editor/lib/aif-process-list-help/i18n/lang.resource.ts","ng://@gsp-wf/wf-process-editor/lib/aif-process-list-help/process-list-help.module.ts","ng://@gsp-wf/wf-process-editor/lib/wf-process-editor.module.ts","ng://@gsp-wf/wf-process-editor/lib/model/rt-process-info.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class WfProcessEditorService {\r\n\r\n  constructor() { }\r\n}\r\n","export enum ProcessTime {\r\n    dt = 'dt',\r\n    rt = 'rt'\r\n}\r\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n","import { FlowFormEntity } from './flowform.entity';\r\nimport { FormalParameterEntity } from './formal-parameter.entity';\r\nimport { BizComponentEntity } from './biz-component.entity';\r\nimport { ExcuteFormEntity } from './excute-form.entity';\r\n\r\nexport class FlowFormInfo {\r\n    flowForm: FlowFormEntity;\r\n    formalParameters: Array<FormalParameterEntity>;\r\n    bizComponents: Array<BizComponentEntity>;\r\n    excuteForms: Array<ExcuteFormEntity>;\r\n    bizActivities: Array<any>;\r\n    customizeActions: Array<any>;\r\n}\r\n","import {Injectable, Injector} from '@angular/core';\r\nimport {KeyMap} from '@farris/ui-property-panel';\r\nimport {FlowFormInfo} from '../domain/entities/flowform-info';\r\nimport {VarEntity} from '@gsp-svc/expression';\r\nimport {GSPCommonModel} from '@gsp-bef/gsp-cm-metadata';\r\nimport {HttpService} from '@ecp-caf/caf-common';\r\nimport {forkJoin, Observable} from 'rxjs';\r\n\r\n@Injectable()\r\n\r\nexport class ProcessDesignerUIState {\r\n\r\n  constructor(private http: HttpService) {\r\n  }\r\n\r\n  // å¥å£åæ®Info\r\n  flowFormInfo: FlowFormInfo = new FlowFormInfo();\r\n\r\n  // Modelä¸ä¸æ\r\n  content = '';\r\n\r\n  // å±æ§æ¡\r\n  propertyConfig: any[] = [];\r\n  propertyData: any = {};\r\n\r\n  // è®¾è®¡å¨å°å\r\n  POST_MESSAGE_TARGET = window.document.location.origin + '/platform/runtime/wf/web/designer/index.html';\r\n\r\n  BE: GSPCommonModel;\r\n  schemas: any[] = [];\r\n\r\n  // å®¡æ¹æ´»å¨å±æ§\r\n  counterSignVariables: any[] = [];\r\n  approvalItems: any[] = [];\r\n\r\n  // æµç¨çå®¡æ¹æ´»å¨èç¹ä¿¡æ¯\r\n  userActList = [];\r\n  // æµç¨åæ¬ç»æåå®¡æ¹æ´»å¨èç¹çä¿¡æ¯\r\n  allActList = [];\r\n  // è®°å½å½åéä¸­ç¨æ·æ´»å¨èç¹çbizActivityId\r\n  bizActivityId: string;\r\n\r\n  // æµç¨ç®¡çåä¿¡æ¯\r\n  isAdministratorConfig = false;\r\n  administrator: any;\r\n  organizations: any[] = new Array();\r\n\r\n\r\n  // å®¡æ¹æ´»å¨å±æ§æä¸¾===========================================================================================\r\n  public assignIterator: KeyMap[] = [{key: 'ALL', value: 'ææ'},\r\n    {key: 'ASSIGN', value: 'ææ´¾'},\r\n    {key: 'CLAIM', value: 'é¢ç¨'}];\r\n  public completeIterator: KeyMap[] = [{key: 'Preempt', value: 'æ¢å æ¨¡å¼'},\r\n    {key: 'Parallel', value: 'å¹¶è¡ä¼ç­¾'},\r\n    {key: 'Sequential', value: 'ä¸²è¡ä¼ç­¾'}];\r\n  public completeIterator4Claim: KeyMap[] = [{key: 'Preempt', value: 'æ¢å æ¨¡å¼'}];\r\n  public boolIterator: KeyMap[] = [{key: true, value: 'æ¯'},\r\n    {key: false, value: 'å¦'}];\r\n  // ä¼ç­¾ä¸åè®¸è·³è½¬\r\n  public noJump4Sign: KeyMap[] = [{key: false, value: 'å¦'}];\r\n  // =================================================================================================\r\n\r\n  // æµç¨å®ä¾ä¸ä¸æ-----------------------------------------------\r\n  procInstContext: VarEntity[] = [\r\n    {key: 'dataId', name: 'åæ®åç ', description: 'åæ®åç '},\r\n    {key: 'procInstId', name: 'æµç¨å®ä¾ID', description: 'æµç¨å®ä¾ID'},\r\n    {key: 'bizDefKey', name: 'å¥å£åæ®ID', description: 'å¥å£åæ®ID'},\r\n    {key: 'processDefinitionKey', name: 'æµç¨å®ä¹KEY', description: 'æµç¨å®ä¹KEY'},\r\n    {key: 'procInstCreator', name: 'æµç¨åèµ·äºº', description: 'æµç¨åèµ·äºº'},\r\n    {key: 'procInstDescription', name: 'æµç¨æè¦', description: 'æµç¨æè¦'},\r\n    {key: 'comment', name: 'å®¡æ¹æè§', description: 'å®¡æ¹æè§'}\r\n  ];\r\n\r\n  // å¬åä¸ä¸æ--------------------------------------------------\r\n  urgeContext: VarEntity[] = [\r\n    {key: 'dataId', name: 'åæ®åç ', description: 'åæ®åç '},\r\n    {key: 'procInstId', name: 'æµç¨å®ä¾ID', description: 'æµç¨å®ä¾ID'},\r\n    {key: 'bizDefKey', name: 'å¥å£åæ®ID', description: 'å¥å£åæ®ID'},\r\n    {key: 'processDefinitionKey', name: 'æµç¨å®ä¹KEY', description: 'æµç¨å®ä¹KEY'},\r\n    {key: 'procInstCreator', name: 'æµç¨åèµ·äºº', description: 'æµç¨åèµ·äºº'},\r\n    {key: 'procInstDescription', name: 'æµç¨æè¦', description: 'æµç¨æè¦'},\r\n    {key: 'comment', name: 'å®¡æ¹æè§', description: 'å®¡æ¹æè§'},\r\n    {key: 'bizDefName', name: 'æµç¨åç±»åç§°', description: 'æµç¨åç±»åç§°'},\r\n    {key: 'curLoginUsername', name: 'å½åç»å½äººåç§°', description: 'å½åç»å½äººåç§°'},\r\n    {key: 'procInstCreatorName', name: 'æµç¨åèµ·äººåç§°', description: 'æµç¨åèµ·äººåç§°'}\r\n  ];\r\n  /**\r\n   * æµç¨åæ°ä¸ä¸æ\r\n   */\r\n  formalParameterContext: VarEntity[] = [];\r\n\r\n  /**\r\n   * åä¸èä¸ä¸æ\r\n   */\r\n  participantContext: VarEntity[] = [\r\n    {\r\n      key: 'procInstCreator',\r\n      name: 'æµç¨åèµ·äºº',\r\n      description: 'æµç¨åèµ·äºº'\r\n    }, {\r\n      key: 'currentUser',\r\n      name: 'å½åæ§è¡äºº',\r\n      description: 'å½åæ§è¡äºº'\r\n    }, {\r\n      key: 'preActExecutors',\r\n      name: 'ä¸ä¸ä¸ªæ´»å¨çæ§è¡äºº',\r\n      description: 'ä¸ä¸ä¸ªæ´»å¨çæ§è¡äºº'\r\n    }];\r\n\r\n  /**\r\n   * æ´»å¨æä»¶åæ°ä¸ä¸æ\r\n   */\r\n  activityComponentContext: VarEntity[] = [\r\n    {\r\n      key: 'conclusionType',\r\n      name: 'ç»è®ºç±»å',\r\n      description: 'å®¡æ¹é¡¹æµè½¬æ¹åï¼1æ­£åï¼2ååï¼3ç»æ­¢'\r\n    }, {\r\n      key: 'conclusionValue',\r\n      name: 'ç»è®ºå¼',\r\n      description: 'å®¡æ¹é¡¹ç¼å·ï¼ä¾å¦ï¼\"Pass\"ã\"Back\"ã\"Refuse\"'\r\n    }];\r\n  processVariableContext: VarEntity[] = new Array();\r\n\r\n  private processVariables = new Array();\r\n\r\n  set ProcessVariables(variables: any[]) {\r\n    this.processVariables = variables;\r\n    this.setProcessVariableContext();\r\n  }\r\n\r\n  get ProcessVariables() {\r\n    return this.processVariables;\r\n  }\r\n\r\n  /**\r\n   * æ±æ¥çº§æ¬¡\r\n   */\r\n  dimensions = [\r\n    {value: 'directSuperior', text: 'ç´æ¥ä¸çº§'},\r\n    {value: 'higherSuperior', text: 'é´æ¥ä¸çº§'}\r\n  ];\r\n\r\n  /**\r\n   * å¯å¨æ¹å¼\r\n   */\r\n  startModeIterator: KeyMap[] = [\r\n    {key: 'DIRECT', value: 'ç´æ¥'},\r\n    {key: 'EXTERNAL_PROCESS', value: 'å¤é¨æµç¨'},\r\n    {key: 'SUB_PROCESS', value: 'å­æµç¨'}\r\n  ];\r\n\r\n  /**\r\n   * æ¾ç¤ºç»ç«¯\r\n   */\r\n  displayTerminal: KeyMap[] = [\r\n    {key: \"ALL\", value: 'çµèç«¯åç§»å¨ç«¯'},\r\n    {key: \"WEB\", value: 'çµèç«¯'},\r\n    {key: \"APP\", value: 'ç§»å¨ç«¯'}\r\n  ];\r\n\r\n  /**\r\n   * æ¶æ¯æ¸ éåè¡¨\r\n   */\r\n  messageChannels = new Array();\r\n\r\n  orgTypeCollection: { value, text }[] = [];\r\n\r\n  variableContextName(key: string) {\r\n    return this.participantContext.find(i => i.key === key).name;\r\n  }\r\n\r\n  ranksName(value: string) {\r\n    return this.dimensions.find(i => i.value === value).text;\r\n  }\r\n\r\n  getMessageChannels() {\r\n    const url = '/api/runtime/sys/v1.0/messageplatform/channel/getenabledchannels';\r\n    this.http.get(url).subscribe((re: any) => {\r\n      this.messageChannels = re;\r\n    });\r\n  }\r\n\r\n  getAdministratorInfo() {\r\n    this.getCurrentUser().subscribe(user => {\r\n      const userId = user.userId;\r\n      forkJoin(this.getAdministratorConfig(), this.getAdministrator(userId)).subscribe(re => {\r\n        this.isAdministratorConfig = re[0].currentValue === 'true' ? true : false;\r\n        this.administrator = re[1];\r\n        if (this.isAdministratorConfig && this.administrator && this.administrator.enable) {\r\n          forkJoin(this.administrator.administratorAuthorities.map(a => {\r\n            if (a.includeSubordinate) {\r\n              return this.getSysOrgWithAllSubsById(a.organization);\r\n            } else {\r\n              return this.getSysOrgById(a.organization);\r\n            }\r\n          })).subscribe((r: any[]) => {\r\n            if (r && r.length > 0) {\r\n              this.organizations = new Array();\r\n              for (const orgs of r) {\r\n                if (orgs && orgs.length > 0) {\r\n                  for (const o of orgs) {\r\n                    if (!this.organizations.some(org => org.id === o.id)) {\r\n                      this.organizations.push(o);\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          });\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  private getCurrentUser(): Observable<any> {\r\n    const url = '/api/runtime/sys/v1.0/userinfos?infoType=user';\r\n    return this.http.get(url);\r\n  }\r\n\r\n  private getAdministrator(userId: string): Observable<any> {\r\n    const url = `/api/runtime/wf/v1.0/processAdministrator/${userId}`;\r\n    return this.http.get(url);\r\n  }\r\n\r\n  private getAdministratorConfig(): Observable<any> {\r\n    const url = `/api/runtime/wf/v1.0/generalConfig/Is_EnableAdministrator`;\r\n    return this.http.get(url);\r\n  }\r\n\r\n  private getSysOrgById(orgId: string): Observable<any> {\r\n    const url = `/api/runtime/sys/v1.0/sysOrgs/${orgId}`;\r\n    return this.http.get(url);\r\n  }\r\n\r\n  private getSysOrgWithAllSubsById(orgId: string): Observable<any> {\r\n    const url = `/api/runtime/sys/v1.0/sysOrgs?param=` + encodeURIComponent(`{\"parentId\":\"${orgId}\",\"withAllSub\":true}`);\r\n    return this.http.get(url);\r\n  }\r\n\r\n  private getCurUserInfo(userId: string): Observable<any> {\r\n    const url = `/api/runtime/sys/v1.0/users/${userId}`;\r\n    return this.http.get(url);\r\n  }\r\n\r\n  private setProcessVariableContext() {\r\n    this.processVariableContext = new Array();\r\n    if (this.ProcessVariables && this.ProcessVariables.length > 0) {\r\n      for (const v of this.ProcessVariables) {\r\n        const varEntity = {\r\n          key: v.name,\r\n          name: v.documentation,\r\n          description: v.description\r\n        };\r\n        this.processVariableContext.push(varEntity);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * è·åæ¡æ¶çé¡¶çº§window\r\n   * è¿è¡è·¨åå°è£\r\n   */\r\n  private getTopWindow(): Window {\r\n    let curWin: Window = window.self;\r\n    try {\r\n        while (curWin.location.origin === curWin.parent.location.origin) {\r\n            if (curWin !== curWin.parent && !(curWin as any).isRTFTopWin) {\r\n                curWin = curWin.parent;\r\n            } else {\r\n                break;\r\n            }\r\n        }\r\n    } catch (e) { }\r\n    return curWin;\r\n  }\r\n\r\n  // --------------------------0-------------------------\r\n\r\n  // uiStateåå§\r\n  initUIState() {\r\n    this.propertyConfig = [];\r\n    this.propertyData = null;\r\n    this.content = '';\r\n    this.schemas = [];\r\n  }\r\n\r\n  /**\r\n   * è·åææå®¡æ¹èç¹ä¿¡æ¯\r\n   * @param data\r\n   */\r\n  getUserActList(data: any[]) {\r\n    this.userActList = [];\r\n    if (data && data.length > 0) {\r\n      for (const userAct of data) {\r\n        const userActInfo = {\r\n          Id: userAct.Id,\r\n          Name: userAct.Name\r\n        };\r\n        this.userActList.push(userActInfo);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * è·åææç»æèç¹ä¿¡æ¯\r\n   * @param data\r\n   */\r\n     getEndEventList(data: any[]) {\r\n      this.allActList = [];\r\n      if (data && data.length > 0) {\r\n        for (const endEvent of data) {\r\n          const endEventInfo = {\r\n            Id: endEvent.Id,\r\n            Name: endEvent.Name\r\n          };\r\n          // åç»æèç¹å­å°\r\n          this.allActList.push(endEventInfo);\r\n        }\r\n      }\r\n      // å­å¥å®¡æ¹æ´»å¨èç¹\r\n      this.allActList = this.allActList.concat(this.userActList);\r\n    }\r\n}\r\n\r\n\r\n","export enum ResourceKeys {\r\n    // ååºå¨ä½\r\n    new = 'new',                                    // æ°å»ºæµç¨\r\n    open = 'open',                                  // æå¼æµç¨\r\n    updateProperty = 'updateProperty',              // æ´æ°å±æ§\r\n    refresh = 'refresh',                            // å·æ°å±æ§æ¡\r\n    loadBizActivity = 'loadBizActivity',            // åºäºæµç¨åç±»å è½½ä¸å¡æ´»å¨\r\n\r\n    // æ¥åæ¶æ¯\r\n    wf_initProperty = 'initProperty',               // åå§å±æ§æ¡\r\n    wf_save = 'save',                               // ä¿å­æµç¨\r\n    wf_saveAs = 'saveAs',                           // å¦å­ä¸º\r\n    wf_sync = 'wf_sync',                            // åæ­¥æµç¨\r\n    wf_note = 'wf_note',                            // è®°å½åæ´\r\n    wf_deploy = 'release',                          // åå¸æµç¨\r\n    wf_closeDesigner = 'closeDesigner',             // å³é­æµç¨è®¾è®¡å¨\r\n    getActivities = 'getActivities',                // è·åæ´»å¨èç¹\r\n    getEndEvents = 'getEndEvents',                  //  è·åç»æèç¹\r\n    wf_showTip = 'showTip',\r\n    /**\r\n     * å±æ§åç§°\r\n     */\r\n    EntryForm = 'EntryForm',                        // æµç¨åç±»\r\n    ConditionExpression = 'ConditionExpression',    // æ¡ä»¶è¡¨è¾¾å¼\r\n    ParticipantSchemes = 'ParticipantSchemes',      // åä¸è\r\n    ApprovalItems = 'ApprovalItems',                // å®¡æ¹é¡¹\r\n    AssignStrategy = 'AssignStrategy',              // åéç­ç¥\r\n    OperatorConfig = 'OperatorConfig',              // åéç­ç¥éç½®\r\n    CompleteStrategy = 'CompleteStrategy',          // å®æç­ç¥\r\n    SignRule = 'SignRule',                          // ä¼ç­¾è§å\r\n    Retrievable = 'Retrievable',                    // åè®¸åå\r\n    AddSignFrontAble = 'AddSignFrontAble',          // åè®¸å¾è¯¢\r\n    AddSignBehindAble = 'AddSignBehindAble',        // åè®¸å ç­¾\r\n    NotifyAble = 'NotifyAble',                      // åè®¸ç¥ä¼\r\n    DisplayTerminal = 'DisplayTerminal',            // æ¾ç¤ºç»ç«¯\r\n    ExecuteForms = 'ExecuteForms',\r\n    sendBackedTask = 'sendBackedTask',\r\n    SelectTargetAble = 'SelectTargetAble',          // åè®¸è°æ´\r\n    JumpScope = 'JumpScope',                        // è·³è½¬è§å\r\n    BackWardRule = 'BackWardRule',                  // é©³åè§å\r\n    Tools = 'Tools',\r\n    SelectBranch = 'SelectBranch',\r\n    Default = 'Default',                            // é»è®¤åæ¯\r\n    allowPreAssign = 'allowPreAssign',\r\n    startMode = 'startMode',\r\n    transferScope = 'transferScope',                // ç§»äº¤èå´\r\n    eventDefinitions = 'EventDefinitions',\r\n    urgeHandleRule = 'urgeHandleRule',\r\n\r\n    // å­æµç¨\r\n    callActivitySubProcess = 'callActivitySubProcess',\r\n\r\n    wf_Component = 'wf_Component',\r\n    wf_ExecuteForms = 'wf_ExecuteForms',\r\n    wf_ExecuteForms_PC = 'wf_ExecuteForms_PC',\r\n    wf_ExecuteForms_Mobile = 'wf_ExecuteForms_Mobile',\r\n    wf_TitleExpression = 'wf_TitleExpression',\r\n    wf_CustomizeAction = 'wf_CustomizeAction',\r\n    timeLimitControl = 'timeLimitControl',\r\n    anonymousSet = 'anonymousSet',\r\n    processVariables = 'processVariables',\r\n    variableSettings = 'variableSettings',\r\n    messageNotice = 'messageNotice',\r\n    approvalPivotConfig = 'approvalPivotConfig',\r\n    // state\r\n    complete = 'complete',\r\n    // åæ®æµç¼å·\r\n    aifProcessCode = 'aifProcessCode',\r\n    // isRelied\r\n    isRelied = 'isRelied',\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\n@Injectable()\r\n\r\nexport class ProcessDeUtil {\r\n\r\n    private static generatedId: number = parseInt(Date.now().toString());\r\n    private static keys = '0123456789ABCDEFGHJKLMNPQRSTUVWXYZ';\r\n    private static exponent = 34;\r\n\r\n    public funcId: string;\r\n    constructor() { }\r\n\r\n    static GenerateElementId(): string {\r\n        ++(this.generatedId);\r\n\r\n        return '_' + this.Decimal2String(this.generatedId);\r\n    }\r\n\r\n    private static Decimal2String(a: number) {\r\n        let c: number;\r\n        let b = '';\r\n        do {\r\n            c = a % this.exponent, b = this.keys[c] + b, a = (a - c) / this.exponent;\r\n        }\r\n        while (a > 0);\r\n        return b;\r\n    }\r\n    /**\r\n     * åå»ºåç \r\n     */\r\n    static createNM() {\r\n        function S4() {\r\n            return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\r\n        }\r\n        return (S4() + S4() + '-' + S4() + '-' + S4() + '-' + S4() + '-' + S4() + S4() + S4());\r\n        // return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\r\n        //     const r = Math.random() * 16 | 0, v = c === 'x' ? r : (r & 0x3 | 0x8);\r\n        //     return v.toString(16);\r\n        // });\r\n    }\r\n\r\n    getProcessDesignerRouter() {\r\n        const url = 'processList';\r\n        return url;\r\n    }\r\n    // è·åæµç¨åç±»webapi\r\n    getFlowFormWebApi() {\r\n        return '/api/runtime/wf/v1.0/flowForm';\r\n    }\r\n    // è·ååæ°åè¡¨webapi\r\n    getFormalParametersWebApi() {\r\n        return '/api/runtime/wf/v1.0/formalParameter';\r\n    }\r\n    // è·åè¿è¡æ¶åæ°æ®webapi\r\n    getMetaDataRUWebApi() {\r\n        return '/api/runtime/lcm/v1.0/rt-metadatas/';\r\n    }\r\n    // è·åæµç¨æä»¶webapi\r\n    getBizComponentsWebApi() {\r\n        return '/api/runtime/wf/v1.0/bizComponent';\r\n    }\r\n    // åºäºæµç¨åç±»è·åè¡¨åå®ä¹\r\n    getExcuteFormsWebApi() {\r\n        return '/api/runtime/wf/v1.0/excuteForm';\r\n    }\r\n    // è·åè®¾è®¡æ¶æµç¨å®ä¹WebAPi\r\n    getProcessDefinitionWebApi() {\r\n        return '/api/runtime/wf/v1.0/dtProcDefs';\r\n    }\r\n\r\n    // å¤æ­æ¯å¦åè®¸å é¤æµç¨å®ä¹çapi\r\n    getCheckExistActiveProcDefApi() {\r\n        return '/api/runtime/wf/v1.0/procDefs/checkExistActiveProcDef';\r\n    }\r\n    /**\r\n     * è·åä¸å¡æ´»å¨webApi\r\n     */\r\n    getBizActivityWebApi(ffId: string) {\r\n        return `/api/runtime/wf/v1.0/bizActivity?flowFormKey=${ffId}`;\r\n    }\r\n\r\n    getProcDefKeyWebApi() {\r\n        return '/api/runtime/wf/v1.0/procDefs/processDefinitionKeys';\r\n    }\r\n    // /**\r\n    //  * ä¸å¡æ´»å¨æä»¶webApi\r\n    //  */\r\n    // getBizActCptWebApi() {\r\n    //     return '/api/runtime/wf/v1.0/BizActivities/GetComponents';\r\n    // }\r\n    /**\r\n     * åå¸æµç¨api\r\n     */\r\n    deployWebApi() {\r\n        return '/api/runtime/wf/v1.0/procDefs/deploy';\r\n    }\r\n    /**\r\n     * ä¿å­æµç¨api\r\n     */\r\n    saveWebApi() {\r\n        return '/api/runtime/wf/v1.0/DTProcessDefinitions/SaveBpmnModel';\r\n    }\r\n    /**\r\n     * è·åå®¡æ¹å¨ä½webapi\r\n     */\r\n    getApprovalActionWebApi() {\r\n        return '/api/runtime/wf/v1.0/approvalAction';\r\n    }\r\n\r\n    /**\r\n     * è·åè¿è¡æ¶æµç¨å®ä¹WebAPi\r\n     */\r\n    getRTProcessDefinitionWebApi() {\r\n        return '/api/runtime/wf/v1.0/procDefs';\r\n    }\r\n\r\n    getValue(data: any, code: string): string {\r\n        if (!code) {\r\n            return '';\r\n        }\r\n        let resultVal = '';\r\n        if (code.indexOf('.') === -1) {\r\n            resultVal = data[code];\r\n        } else {\r\n            resultVal = code.split('.').reduce((obj, key) => {\r\n                if (obj) {\r\n                    return obj[key];\r\n                } else {\r\n                    return null;\r\n                }\r\n            }, data);\r\n        }\r\n        return resultVal;\r\n    }\r\n    /**\r\n     * è½¬æ¢\r\n     * @param jsonObj Object\r\n     */\r\n    toUpperCase(jsonObj: Object): any {\r\n        if (typeof (jsonObj) === 'object') {\r\n            for (const key of Object.keys(jsonObj)) {\r\n                jsonObj[key.substring(0, 1).toUpperCase() + key.substring(1)] = jsonObj[key];\r\n                delete (jsonObj[key]);\r\n            }\r\n        }\r\n        return jsonObj;\r\n    }\r\n    toLowCase(jsonObj: Object): any {\r\n        if (typeof (jsonObj) === 'object') {\r\n            for (const key of Object.keys(jsonObj)) {\r\n                if ((key.substring(0, 1).toLowerCase() + key.substring(1)) !== key) {\r\n                    jsonObj[key.substring(0, 1).toLowerCase() + key.substring(1)] = jsonObj[key];\r\n                    delete (jsonObj[key]);\r\n                }\r\n            }\r\n        }\r\n        return jsonObj;\r\n    }\r\n}\r\n","import { Injectable, Injector } from '@angular/core';\r\nimport { HttpService } from '@ecp-caf/caf-common';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { map, mergeMap } from 'rxjs/operators';\r\nimport { forkJoin } from 'rxjs/observable/forkJoin';\r\nimport { of } from 'rxjs/observable/of';\r\nimport { ProcessDeUtil } from './process-de-util';\r\nimport { AuditProcessDefInfo } from './entities/audit-processDef-info';\r\nimport { ProcessInfo } from '../model/process-info';\r\nimport { RTProcessInfo } from '../model/rt-process-info';\r\n\r\n@Injectable()\r\nexport class ProcessDesignerDataService {\r\n    constructor(\r\n        private http: HttpService,\r\n        private util: ProcessDeUtil) { }\r\n\r\n    // åºäºæµç¨åç±»IDè·åæµç¨åç±»ä¿¡æ¯\r\n    GetFlowFormbyId(id: string): Observable<any> {\r\n        if (id) {\r\n            let url = this.util.getFlowFormWebApi();\r\n            url += `/${id}`;\r\n            return this.http.get(url);\r\n        }\r\n    }\r\n    // åºäºæµç¨åç±»è·ååæ°åè¡¨\r\n    getParametersbyFlowFormKey(id: string): Observable<any> {\r\n        if (id) {\r\n            let url = this.util.getFormalParametersWebApi();\r\n            url += `?flowFormKey=${id}`;\r\n            return this.http.get(url);\r\n        }\r\n    }\r\n    // åºäºæµç¨åç±»è·åæµç¨æä»¶\r\n    getComponentsbyFlowformkey(id: string): Observable<any> {\r\n        if (id) {\r\n            let url = this.util.getBizComponentsWebApi();\r\n            url += `/query?param=` + encodeURIComponent(`{\"flowFormKey\":\"${id}\"}`);\r\n            return this.http.get(url);\r\n        }\r\n    }\r\n    // åºäºæµç¨åç±»è·åè¡¨åå®ä¹\r\n    getExecuteFormbyFlowFormKey(id: string): Observable<any> {\r\n        if (id) {\r\n            let url = this.util.getExcuteFormsWebApi();\r\n            url += `?flowFormKey=${id}`;\r\n            return this.http.get(url);\r\n        }\r\n    }\r\n    /**\r\n     * åºäºæµç¨åç±»Idè·åä¸å¡æ´»å¨\r\n     * @param ffId æµç¨åç±»id\r\n     */\r\n    getBizActivities(ffId: string) {\r\n        if (ffId) {\r\n            const url = this.util.getBizActivityWebApi(ffId);\r\n            return this.http.get(url);\r\n                // .pipe(\r\n                //     map((re: any) => re),\r\n                //     mergeMap((activities: any[]) => {\r\n                //         if (activities && activities.length > 0) {\r\n                //             return forkJoin(activities.map(activity => {\r\n                //                 return forkJoin(this.getBizActivityComponents(ffId, activity.id),\r\n                //                     this.getBizActivityActions(activity.id))\r\n                //                     .pipe(\r\n                //                         map((re: any[]) => {\r\n                //                             activity.components = re[0];\r\n                //                             activity.actions = re[1];\r\n                //                             return activity;\r\n                //                         }));\r\n                //             }));\r\n                //         } else {\r\n                //             return of([]);\r\n                //         }\r\n                //     })\r\n                // );\r\n        }\r\n    }\r\n\r\n    /**\r\n     * åºäºæµç¨åç±»IDè·åèªå®ä¹å¨ä½\r\n     * @param formId æµç¨åç±»ID\r\n     */\r\n    getCustomizeActions(formId: string): Observable<any> {\r\n        if (formId) {\r\n            const url = `/api/runtime/wf/v1.0/customizeAction?flowFormKey=${formId}`;\r\n            return this.http.get(url);\r\n        }\r\n    }\r\n    /**\r\n     * åºäºä¸å¡æ´»å¨idè·åä¸å¡æ´»å¨æä»¶\r\n     * @param id ä¸å¡æ´»å¨id\r\n     */\r\n    private getBizActivityComponents(flowFormId: string, id: string) {\r\n        if (id) {\r\n            let url = this.util.getBizComponentsWebApi();\r\n            url += `/query?param=` + encodeURIComponent(`{\"flowFormKey\":\"${flowFormId}\",\"owner\":\"${id}\",\"ownerType\":\"Activity\"}`);\r\n            return this.http.get(url);\r\n        }\r\n    }\r\n    private getBizActivityActions(id: string) {\r\n        if (id) {\r\n            let url = this.util.getApprovalActionWebApi();\r\n            url += `?bizActivityId=${id}`;\r\n\r\n            return this.http.get(url);\r\n        }\r\n    }\r\n    // åºäºIDè·åBE\r\n    getBusinessEntitybyId(id: string): Observable<any> {\r\n        if (id) {\r\n            // let url = this.util.getMetaDataRUWebApi();\r\n            // url += id;\r\n            // const url = `/api/runtime/lcm/v1.0/bef/handledBeMeta?beId=${id}`;\r\n            const url = `/api/runtime/lcm/v1.0/bef/expression?beId=${id}`;\r\n            return this.http.get(url);\r\n        }\r\n    }\r\n    /**\r\n     * åºäºæµç¨å®ä¹Keyè·åä¸ä¸æ\r\n     * @param key æµç¨å®ä¹key\r\n     */\r\n    getProcContentbyKey(key: string): Observable<any> {\r\n        if (key) {\r\n            let url = this.util.getProcessDefinitionWebApi();\r\n            url += `/bpmnModel?procDefKey=${key}`;\r\n            return this.http.get(url);\r\n        }\r\n    }\r\n    /**\r\n     * åºäºæµç¨å®ä¹Keyè·åä¸ä¸æ\r\n     * @param key æµç¨å®ä¹Id\r\n     */\r\n    getRTProcContentbyId(id: string): Observable<any> {\r\n        if (id) {\r\n            let url = this.util.getRTProcessDefinitionWebApi();\r\n            url += `/${id}/bpmnModel`;\r\n            return this.http.get(url);\r\n        }\r\n    }\r\n    /**\r\n     * ä¿å­æµç¨\r\n     * @param content\r\n     */\r\n    saveProcess(content: string, processInfo: ProcessInfo, state: number): Observable<any> {\r\n        if (content) {\r\n            const postData = {\r\n                organization: processInfo.procOrg ? processInfo.procOrg.orgId : '',\r\n                organizationName: processInfo.procOrg ? processInfo.procOrg.orgName : '',\r\n                accessLevel: processInfo.accessLevel,\r\n                procContent: content,\r\n                state\r\n            };\r\n            const url = this.util.getProcessDefinitionWebApi();\r\n            return this.http.post(url, JSON.stringify(postData));\r\n        }\r\n    }\r\n\r\n    auditProcessDef(info: AuditProcessDefInfo) {\r\n        const url = '/api/runtime/wf/v1.0/dtProcDefs/auditProcessDef';\r\n        this.http.post(url, info).subscribe(re => { });\r\n    }\r\n\r\n    /**\r\n     * åå¸æµç¨\r\n     * @param content\r\n     */\r\n    deployProcess(content: string): Observable<any> {\r\n        if (content) {\r\n            const postData = {\r\n                procDefContent: content\r\n            };\r\n            const url = this.util.deployWebApi();\r\n            return this.http.post(url, JSON.stringify(postData));\r\n        }\r\n    }\r\n\r\n    saveRTProcess(content: string, procDefId: string): Observable<any> {\r\n        if (content) {\r\n            const postData = {\r\n                procDefContent: content\r\n            };\r\n            let url = this.util.getRTProcessDefinitionWebApi();\r\n            url += `/${procDefId}/adjust`;\r\n            return this.http.post(url, JSON.stringify(postData));\r\n        }\r\n    }\r\n\r\n    syncDtProcess(content: string, rtProcessInfo: RTProcessInfo): Observable<any> {\r\n        if (content) {\r\n            const postData = {\r\n                organization: rtProcessInfo.procOrg ? rtProcessInfo.procOrg.orgId : '',\r\n                organizationName: rtProcessInfo.procOrg ? rtProcessInfo.procOrg.orgName : '',\r\n                accessLevel: rtProcessInfo.accessLevel || 'public',\r\n                procContent: content,\r\n                state: 0\r\n            };\r\n            const url = '/api/runtime/wf/v1.0/dtProcDefs';\r\n            return this.http.post(url, JSON.stringify(postData));\r\n        }\r\n    }\r\n}\r\n","export enum ProcessClrTypeID {\r\n    /**\r\n     * æµç¨typeId\r\n     */\r\n    process = 'bpmn.Process',\r\n    /**\r\n     * å¼å§æ´»å¨typeId\r\n     */\r\n    startActivity = 'wf.StartActivity',\r\n    /**\r\n     * æ´»å¨èç¹typeId\r\n     */\r\n    userActivity = 'wf.UserActivity',\r\n    /**\r\n     * äººå·¥æä½typeId\r\n     */\r\n    operationActivity = 'wf.OperationActivity',\r\n    /**\r\n     * ç»ææ´»å¨typeId\r\n     */\r\n    endEvent = 'bpmn.EndEvent',\r\n    /**\r\n     * æµè½¬çº¿typeId\r\n     */\r\n    sequenceFlow = 'bpmn.SequenceFlow',\r\n    /**\r\n     * æä»ç½å³typeId\r\n     */\r\n    exclusiveGateway = 'bpmn.ExclusiveGateway',\r\n    /**\r\n     * å¹¶è¡ç½å³typeId\r\n     */\r\n    parallelGateway = 'bpmn.ParallelGateway',\r\n\r\n    /**\r\n     * å­æµç¨\r\n     */\r\n    subProcess = 'wf.CallActivitySubProcess',\r\n\r\n    /**\r\n     * æå¡æ´»å¨\r\n     */\r\n    autoActivity = 'wf.AutoActivity',\r\n\r\n    /**\r\n     * ä¿¡å·æè·\r\n     */\r\n    catchEvent = 'wf.IntermediateCatchEventImpl',\r\n\r\n    /**\r\n     * æ¶æ¯\r\n     */\r\n    messageActivity = 'wf.MessageActivity',\r\n\r\n    /**\r\n     * ç¥ä¼æ´»å¨\r\n     */\r\n    notifyActivity = \"wf.NotifyActivity\",\r\n\r\n    /**\r\n     * çåæ´»å¨\r\n     */\r\n    aifCreationBillActivity = \"wf.AifCreationBillActivity\",\r\n}\r\n","import { Component, OnInit, Output, Input, ViewChild, EventEmitter, TemplateRef, AfterViewInit } from '@angular/core';\r\nimport { DataTableComponent } from '@farris/ui-datatable';\r\nimport { TypeConverter } from '@farris/ui-property-panel';\r\nimport { HttpService } from '@ecp-caf/caf-common';\r\nimport { DatagridComponent } from '@farris/ui-datagrid';\r\nimport { MessagerService } from '@farris/ui-messager';\r\n\r\n@Component({\r\n  selector: 'app-entry-form-editor',\r\n  templateUrl: './entry-form-editor.component.html',\r\n  styleUrls: ['./entry-form-editor.component.css']\r\n})\r\nexport class EntryFormEditorComponent implements OnInit, AfterViewInit {\r\n\r\n  @Output() closeModal = new EventEmitter<any>();\r\n  @Output() submitModal = new EventEmitter<any>();\r\n\r\n  @Input()\r\n  set value(data: any) {\r\n    if (data) {\r\n      this.flowFormId = data.id;\r\n    }\r\n  }\r\n\r\n  @ViewChild('iconSelectFooter') modalFooter: TemplateRef<any>;\r\n\r\n  @ViewChild('grid') grid: DatagridComponent;\r\n\r\n  @Input() editorParams: any = {};\r\n\r\n  private flowFormId: string;\r\n  modalConfig = {\r\n    title: 'æµç¨åç±»',\r\n    width: 540,\r\n    height: 520,\r\n    showButtons: true\r\n  };\r\n\r\n  columns = [\r\n    { title: 'ç¼å·', field: 'code', width: 100, sortable: true },\r\n    { title: 'åç§°', field: 'name', width: 100, sortable: true },\r\n    { title: 'ç±»å', field: 'base', width: 60, formatter: { type: 'boolean', options: { trueText: 'åºç¡', falseText: 'æ©å±' } }}\r\n  ];\r\n\r\n  data = [];\r\n\r\n  constructor(\r\n    private http: HttpService,\r\n    private message: MessagerService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.getBaseAndExtendFlowForm();\r\n  }\r\n  ngAfterViewInit() {\r\n  }\r\n\r\n  clickOK() {\r\n    if (!this.grid.selectedRow) {\r\n      this.message.info('å°æªéæ©æµç¨åç±»');\r\n      return;\r\n    }\r\n    const object = { value: this.grid.selectedRow.data, parameters: null };\r\n    this.submitModal.emit(object);\r\n  }\r\n\r\n  clickCancel() {\r\n    this.closeModal.emit();\r\n  }\r\n\r\n  private getBaseAndExtendFlowForm() {\r\n    if (this.flowFormId) {\r\n      const url = `/api/runtime/wf/v1.0/flowForm/${this.flowFormId}/baseAndExtend`;\r\n      this.http.get(url).subscribe((re: any) => {\r\n        if (re && re.length > 0) {\r\n          this.data = re;\r\n          setTimeout(() => {\r\n            this.grid.selectRow(this.flowFormId, true);\r\n          }, 0);\r\n        } else {\r\n          this.message.info('æµç¨åç±»å·²ç»ä¸å­å¨');\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n}\r\nexport class FlowFormConverter implements TypeConverter {\r\n  constructor() { }\r\n\r\n  convertTo(data): string {\r\n    if (data) {\r\n      return data.name;\r\n    }\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n","import { Injectable } from '@angular/core';\r\nimport { BizComponentEntity } from '../../domain/entities/biz-component.entity';\r\nimport { ActualParameter } from '../../domain/entities/actual-parameter';\r\n\r\n@Injectable()\r\n\r\nexport class ActivityComponentUIState {\r\n    /**\r\n     * æä»¶åè¡¨\r\n     */\r\n    components: BizComponentEntity[] = [];\r\n    /**\r\n     * éä¸­æä»¶\r\n     */\r\n    curComponent: BizComponentEntity;\r\n    /**\r\n     * æµç¨åç±»ç»å®çæææ´»å¨æä»¶\r\n     */\r\n    allComponents: BizComponentEntity[] = [];\r\n    /**\r\n     * æä»¶æ§è¡æ¶æºæ°æ®ç»å®\r\n     */\r\n    public executionCollection = [\r\n        // { text: 'æµç¨åå»º', value: 'PROCESSINSTANCE_CREATED' },\r\n        { text: 'æµç¨å¯å¨', value: 'PROCESSINSTANCE_STARTED' },\r\n        { text: 'æµç¨æèµ·', value: 'PROCESSINSTANCE_SUSPENDED' },\r\n        { text: 'æµç¨æ¢å¤', value: 'PROCESSINSTANCE_RESUMED' },\r\n        { text: 'æµç¨å®æ', value: 'PROCESSINSTANCE_COMPLETED' },\r\n        { text: 'æµç¨ç»æ­¢', value: 'PROCESSINSTANCE_ABORTED' },\r\n        // { text: 'æµç¨é¢è­¦', value: 'PROCESSINSTANCE_ALARM' },\r\n        // { text: 'æµç¨è¶æ¶', value: 'PROCESSINSTANCE_TIMEOUT' },\r\n        // { text: 'æµç¨å é¤', value: 'PROCESSINSTANCE_DELETED' },\r\n        { text: 'æµç¨åæ¶', value: 'PROCESSINSTANCE_CANCELED' },\r\n        { text: 'æµç¨å¤æ´»', value: 'PROCESSINSTANCE_REACTIVATED' },\r\n        { text: 'æµç¨é©³å', value: 'PROCESSINSTANCE_ROLLBACK' },\r\n        { text: 'éæ°æäº¤', value: 'PROCESSINSTANCE_RESUBMIT' },\r\n        { text: 'ç¯èåçäººåæ´', value: 'ACTIVITY_AND_PARTICIPANT_UPDATED' },\r\n        { text: 'ç®¡çåç»æ­¢', value: 'PROCESSINSTANCE_ABORTED_BY_ADMIN' },\r\n        { text: 'æµç¨å¯å¨å', value: 'PROCESSINSTANCE_BEFORE_START' },\r\n        { text: 'ä»»å¡å®æå', value: 'WORKITEM_BEFORE_COMPLETE' },\r\n        { text: 'ä»»å¡å®æå', value: 'WORKITEM_AFTER_COMPLETE' },\r\n        { text: 'è·åæ°æ®', value: 'LOADDATA' }\r\n    ];\r\n    activityCollection = [\r\n        // { text: 'æ´»å¨åå»º', value: 'ACTIVITY_CREATED' },\r\n        { text: 'æ´»å¨å¯å¨', value: 'ACTIVITY_STARTED' },\r\n        // { text: 'æ´»å¨æèµ·', value: 'ACTIVITY_SUSPENDED' },\r\n        // { text: 'æ´»å¨æ¢å¤', value: 'ACTIVITY_RESUMED' },\r\n        { text: 'æ´»å¨å®æ', value: 'ACTIVITY_COMPLETED' },\r\n        { text: 'æ´»å¨ç»æ­¢', value: 'ACTIVITY_ABORTED' },\r\n        { text: 'å·¥ä½é¡¹åå»º', value: 'WORKITEM_CREATED' },\r\n        { text: 'å·¥ä½é¡¹å®æ', value: 'WORKITEM_COMPLETED' },\r\n        { text: 'å·¥ä½é¡¹æèµ·', value: 'WORKITEM_SUSPENDED' },\r\n        { text: 'å·¥ä½é¡¹æ¢å¤', value: 'WORKITEM_RESUMED' },\r\n        { text: 'å·¥ä½é¡¹ç»æ­¢', value: 'WORKITEM_ABORTED' },\r\n        { text: 'å·¥ä½é¡¹åå', value: 'WORKITEM_RETRIEVED' },\r\n        { text: 'å·¥ä½é¡¹é¢ç¨', value: 'WORKITEM_CLAIMED' },\r\n        { text: 'å·¥ä½é¡¹åé¢ç¨', value: 'WORKITEM_UNCLAIMED' },\r\n        { text: 'ä»»å¡åéå', value: 'ACTIVITY_ASSIGNMENT' }\r\n    ];\r\n}\r\n","import { ActualParameter } from './actual-parameter';\r\nimport { ProcessDeUtil } from '../process-de-util';\r\n\r\nexport class BizComponentEntity {\r\n    constructor(name?: string, metadataid?: string, method?: string) {\r\n        this.id = ProcessDeUtil.GenerateElementId();\r\n        this.name = name;\r\n        this.metadataId = metadataid;\r\n        this.methodCode = method;\r\n        this.isForCompensation = false;\r\n    }\r\n    id: string;\r\n    name: string;\r\n    flowFormKey?: string;\r\n    bizActivityId?: string;\r\n    componentLocation?: ComponentLocation;\r\n    executionTime: string;\r\n    metadataId: string;\r\n    methodCode: string;\r\n    methodName?: string;\r\n    actualParameters: Array<ActualParameter>;\r\n    owner: string;\r\n    ownerType: OwnerType;\r\n    isForCompensation?: boolean;\r\n    condition?: string;\r\n}\r\nexport enum ComponentLocation {\r\n    Process = 0,\r\n    Activity = 1\r\n}\r\nexport enum OwnerType {\r\n    Process = 'Process',\r\n    Activity = 'Activity',\r\n    Schema = 'Schema'\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { ActivityComponentUIState } from './activity-component.uistate';\r\nimport { HttpService } from '@ecp-caf/caf-common';\r\nimport { map } from 'rxjs/operators';\r\nimport { BizComponentEntity, ComponentLocation, OwnerType } from '../../domain/entities/biz-component.entity';\r\nimport { GspComponent } from '@gsp-cmp/common-component';\r\nimport { ActualParameter } from '../../domain/entities/actual-parameter';\r\nimport { Parameter } from '@ecp-caf/common-structure';\r\nimport { ProcessDesignerUIState } from '../../app/process-designer.uistate';\r\nimport { Subject } from 'rxjs';\r\nimport { ProcessDeUtil } from '../../domain/process-de-util';\r\n@Injectable()\r\n\r\nexport class ActivityComponentRepository {\r\n    private defaultProcessComponentIds = ['5863c8a8-e0a7-4137-a8b2-4c05e42b3b73', 'be781ba1-a88b-4bb8-9c88-2e2a27a9226e'];\r\n\r\n    subject: Subject<BizComponentEntity> = new Subject<BizComponentEntity>();\r\n    constructor(\r\n        private uistate: ActivityComponentUIState,\r\n        private util: ProcessDeUtil,\r\n        private http: HttpService,\r\n        private designerState: ProcessDesignerUIState\r\n    ) { }\r\n\r\n    loadComponents(flowFormId: string, bizActId: string) {\r\n        let url = this.util.getBizComponentsWebApi();\r\n        if (bizActId) {\r\n            url += `/query?param=` + encodeURIComponent(`{\"flowFormKey\":\"${flowFormId}\",\"owner\":\"${bizActId}\",\"ownerType\":\"Activity\"}`);\r\n        } else {\r\n            this.uistate.allComponents = [];\r\n            return;\r\n        }\r\n        this.http.get(url).subscribe((data: any) => {\r\n            this.uistate.allComponents = data.filter((c: BizComponentEntity) => c.ownerType === OwnerType.Activity);\r\n        });\r\n    }\r\n    removeComponent(id: string) {\r\n        if (id) {\r\n            const index = this.uistate.components.findIndex(c => c.id === id);\r\n            if (index > -1) {\r\n                this.uistate.components.splice(index, 1);\r\n\r\n                if (this.uistate.components.length > 0) {\r\n                    this.subject.next(this.uistate.components[0]);\r\n                } else {\r\n                    this.uistate.curComponent = null;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    addComponent(cpt: GspComponent) {\r\n        if (cpt) {\r\n            const component = new BizComponentEntity(cpt.name, cpt.id, cpt.operations[0].code);\r\n            component.id = ProcessDeUtil.GenerateElementId();\r\n            component.actualParameters = this.bindParas(cpt);\r\n\r\n            this.uistate.components.push(component);\r\n\r\n            this.subject.next(component);\r\n        }\r\n    }\r\n    private bindParas(component: GspComponent): ActualParameter[] {\r\n        let parameters = [];\r\n\r\n        if (component.operations[0].parameters && component.operations[0].parameters.length > 0) {\r\n            if (this.defaultProcessComponentIds.indexOf(component.id) > -1) {\r\n                parameters = this.assignParameterValue(component.operations[0].parameters);\r\n            } else {\r\n                parameters = component.operations[0].parameters.map(p => ({ code: p.code, name: p.name, value: '' }));\r\n            }\r\n        }\r\n        return parameters;\r\n    }\r\n    private assignParameterValue(params: Parameter[]): ActualParameter[] {\r\n        return params.map(p => {\r\n            if (p.code.indexOf('beId') > -1) {\r\n                const v = this.designerState.formalParameterContext.filter(c => c.key.indexOf('metadataId') > -1)[0].key;\r\n                return { code: p.code, name: p.name, value: `{\"expr\":\"DefaultFunction.GetContextParameter(\\\\\"${v}\\\\\")\"}` };\r\n            } else if (p.code.indexOf('nodeId') > -1) {\r\n                const v = this.designerState.formalParameterContext.filter(c => c.key.indexOf('schemaId') > -1)[0].key;\r\n                return { code: p.code, name: p.name, value: `{\"expr\":\"DefaultFunction.GetContextParameter(\\\\\"${v}\\\\\")\"}` };\r\n            } else if (p.code.indexOf('dataId') > -1) {\r\n                return { code: p.code, name: p.name, value: `{\"expr\":\"DefaultFunction.GetContextParameter(\\\\\"dataId\\\\\")\"}` };\r\n            } else if (p.code.indexOf('procInstId') > -1) {\r\n                return { code: p.code, name: p.name, value: `{\"expr\":\"DefaultFunction.GetContextParameter(\\\\\"procInstId\\\\\")\"}` };\r\n            } else {\r\n                return { code: p.code, name: p.name, value: '' };\r\n            }\r\n        });\r\n    }\r\n\r\n    swapArray(arr: Array<any>, i1: number, i2: number): Array<any> {\r\n        arr[i1] = arr.splice(i2, 1, arr[i1])[0];\r\n        return arr;\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { ActivityComponentUIState } from './activity-component.uistate';\r\nimport { ActivityComponentRepository } from './activity-component.repository';\r\nimport { BizComponentEntity } from '../../domain/entities/biz-component.entity';\r\nimport { GspComponent } from '@gsp-cmp/common-component';\r\nimport { MessagerService } from '@farris/ui-messager';\r\n\r\n@Injectable()\r\n\r\nexport class ActivityComponentViewModel {\r\n    constructor(\r\n        private uistate: ActivityComponentUIState,\r\n        private repository: ActivityComponentRepository,\r\n        private messager: MessagerService\r\n    ) { }\r\n\r\n    deleteRow() {\r\n        if (this.uistate.curComponent) {\r\n            if (this.uistate.curComponent.executionTime === 'LOADDATA') {\r\n                this.messager.info('åæ°æä»¶ä¸åè®¸å é¤ï¼è¯·äºè§£ï¼');\r\n            } else {\r\n                this.repository.removeComponent(this.uistate.curComponent.id);\r\n            }\r\n        } else {\r\n            return;\r\n        }\r\n    }\r\n    componentSelect(cpt: GspComponent) {\r\n        if (cpt) {\r\n            this.repository.addComponent(cpt);\r\n        }\r\n    }\r\n\r\n    loadComponents(flowFormId: string, bizActId: string) {\r\n        this.repository.loadComponents(flowFormId, bizActId);\r\n    }\r\n}\r\n","export class ActualParameter {\r\n    constructor(code?: string, name?: string, value?: string) {\r\n        this.code = code;\r\n        this.name = name;\r\n        this.value = value;\r\n    }\r\n    code: string;\r\n    name: string;\r\n    value: string;\r\n    // IsVisible: boolean;\r\n}\r\n","import { Component, OnInit, HostBinding, Output, EventEmitter, TemplateRef, Input, ViewChild, ComponentFactoryResolver, Injector, AfterViewInit } from '@angular/core';\r\nimport { TypeConverter } from '@farris/ui-property-panel';\r\nimport { ActivityComponentRepository } from './activity-component.repository';\r\nimport { ActivityComponentUIState } from './activity-component.uistate';\r\nimport { ActivityComponentViewModel } from './activity-component.viewmodel';\r\nimport { FormBuilder } from '@angular/forms';\r\nimport { BizComponentEntity } from '../../domain/entities/biz-component.entity';\r\nimport { ActualParameter } from '../../domain/entities/actual-parameter';\r\nimport { ProcessDesignerUIState } from '../../app/process-designer.uistate';\r\n\r\nimport { ExprEditMode, ExpressionService, InjectedType, VarEntity } from '@gsp-svc/expression';\r\nimport { SelectMetadataRTComponent, Metadata4RefDto, MetadataDto } from '@gsp-lcm/metadatart-selector';\r\nimport { SessionService } from '@ecp-caf/caf-common';\r\nimport { BsModalService } from '@farris/ui-modal';\r\nimport { SelectorResult, CommonComponentUiRTService } from '@gsp-cmp/ccmp-ui';\r\nimport { GspComponent } from '@gsp-cmp/common-component';\r\nimport { DataColumn, DatagridComponent } from '@farris/ui-datagrid';\r\nimport { of } from 'rxjs';\r\nimport { EditorTypes } from '@farris/ui-datagrid-editors';\r\nimport { MessagerService } from '@farris/ui-messager';\r\n\r\n@Component({\r\n  selector: 'app-activity-component',\r\n  templateUrl: './activity-component.component.html',\r\n  styleUrls: ['./activity-component.component.scss'],\r\n  providers: [ActivityComponentRepository, ActivityComponentUIState, ActivityComponentViewModel]\r\n})\r\nexport class ActivityComponentComponent implements OnInit, AfterViewInit {\r\n  @HostBinding('class')\r\n  cls = 'farris-main-area flex-column';\r\n  @Output() closeModal = new EventEmitter<any>();\r\n  @Output() submitModal = new EventEmitter<any>();\r\n\r\n  @Input() editorParams: any = {};\r\n  @ViewChild('iconSelectFooter') modalFooter: TemplateRef<any>;\r\n  modalConfig = {\r\n    title: 'æä»¶',\r\n    width: 1000,\r\n    height: 530,\r\n    showButtons: true\r\n  };\r\n  @Input()\r\n  set value(cpts: any[]) {\r\n    if (cpts && cpts.length > 0) {\r\n      for (const cpt of cpts) {\r\n        const bizComponent = new BizComponentEntity(cpt.Name || cpt.name, cpt.MetadataId || cpt.metadataId, cpt.MethodCode || cpt.methodCode);\r\n        bizComponent.executionTime = cpt.Time || cpt.executionTime,\r\n        bizComponent.id = cpt.Id || cpt.id;\r\n        bizComponent.isForCompensation = cpt.isForCompensation;\r\n        bizComponent.actualParameters = [];\r\n        if ((cpt.ActualParameters && cpt.ActualParameters.length > 0) || (cpt.actualParameters && cpt.actualParameters.length > 0)) {\r\n          const actualParameters = cpt.ActualParameters || cpt.actualParameters;\r\n          for (const para of actualParameters) {\r\n            const actualParameter = new ActualParameter(para.Name || para.code, para.Name || para.name, para.Value || para.value );\r\n\r\n            bizComponent.actualParameters.push(actualParameter);\r\n          }\r\n        }\r\n        this.uistate.components.push(bizComponent);\r\n      }\r\n    }\r\n  }\r\n\r\n  @ViewChild('cmplist') cmplist: DatagridComponent;\r\n  @ViewChild('paramlist') paramlist: DatagridComponent;\r\n\r\n\r\n  location: 'activity' | 'process' | 'autoActivity';\r\n  columns = [];\r\n  paramColumns = [];\r\n  constructor(\r\n    public uistate: ActivityComponentUIState,\r\n    public viewModel: ActivityComponentViewModel,\r\n    private formBuilder: FormBuilder,\r\n    private designerState: ProcessDesignerUIState,\r\n    private expr: ExpressionService,\r\n    private resolver: ComponentFactoryResolver,\r\n    private injector: Injector,\r\n    private sessionSrc: SessionService,\r\n    private modalService: BsModalService,\r\n    private componentService: CommonComponentUiRTService,\r\n    private repository: ActivityComponentRepository,\r\n    private message: MessagerService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.location = this.editorParams.location;\r\n    if (this.location === 'activity') {\r\n      this.uistate.executionCollection = this.uistate.activityCollection;\r\n      this.columns = [\r\n        {\r\n          field: 'name', width: 100, title: 'æä»¶åç§°'\r\n        },\r\n        { field: 'metadataId', width: 100, title: 'æä»¶ID' },\r\n        { field: 'methodCode', width: 100, title: 'æä»¶æ¹æ³' },\r\n        {\r\n          field: 'executionTime', width: 100, title: 'æ§è¡æ¶æº',\r\n          editor: {\r\n            type: EditorTypes.COMBOLIST,\r\n            options: { data: this.uistate.executionCollection, valueField: 'value', textField: 'text', idField: 'value', panelHeight: 'auto' }\r\n          },\r\n          formatter: (v, d, i) => {\r\n            if (v) {\r\n              return this.uistate.executionCollection.find(item => item.value === v).text;\r\n            } else {\r\n              return '';\r\n            }\r\n          },\r\n          validators: [\r\n            { type: 'required', messager: 'å¿å¡«' }\r\n          ]\r\n        },\r\n        {\r\n          field: 'isForCompensation', width: 50, title: 'è¡¥å¿æä½',\r\n          editor: { type: EditorTypes.SWITCH, options: {} },\r\n          formatter: { type: 'boolean', options: { trueText: 'æ¯', falseText: 'å¦' } }\r\n        }\r\n      ];\r\n    } else if (this.location === 'autoActivity') {\r\n      this.columns = [\r\n        {\r\n          field: 'name', width: 100, title: 'æä»¶åç§°'\r\n        },\r\n        { field: 'metadataId', width: 100, title: 'æä»¶ID' },\r\n        { field: 'methodCode', width: 100, title: 'æä»¶æ¹æ³' },\r\n        {\r\n          field: 'isForCompensation', width: 50, title: 'è¡¥å¿æä½',\r\n          editor: { type: EditorTypes.SWITCH, options: {} },\r\n          formatter: { type: 'boolean', options: { trueText: 'æ¯', falseText: 'å¦' } }\r\n        }\r\n      ];\r\n    } else {\r\n      this.columns = [\r\n        {\r\n          field: 'name', width: 100, title: 'æä»¶åç§°'\r\n        },\r\n        { field: 'metadataId', width: 100, title: 'æä»¶ID' },\r\n        { field: 'methodCode', width: 100, title: 'æä»¶æ¹æ³' },\r\n        {\r\n          field: 'executionTime', width: 100, title: 'æ§è¡æ¶æº',\r\n          editor: {\r\n            type: EditorTypes.COMBOLIST,\r\n            options: { data: this.uistate.executionCollection, valueField: 'value', textField: 'text', idField: 'value', panelHeight: 'auto' }\r\n          },\r\n          formatter: (v, d, i) => {\r\n            if (v) {\r\n              return this.uistate.executionCollection.find(item => item.value === v).text;\r\n            } else {\r\n              return '';\r\n            }\r\n          },\r\n          validators: [\r\n            { type: 'required', messager: 'å¿å¡«' }\r\n          ]\r\n        }\r\n      ];\r\n    }\r\n    if (this.uistate.components && this.uistate.components.length > 0) {\r\n      this.cmplist.selectRow(this.uistate.components[0].id, true);\r\n    }\r\n\r\n    this.paramColumns = [\r\n      { field: 'code', width: 50, title: 'ç¼å·' },\r\n      { field: 'name', width: 50, title: 'åç§°' },\r\n      {\r\n        field: 'value', width: 100, title: 'åæ°å¼',\r\n        editor: {\r\n          type: 'input-group',\r\n          options: {\r\n            groupText: '<i class=\"f-icon f-icon-lookup\"></i>',\r\n            editable: false,\r\n            clickHandle: (e) => {\r\n              e.formControl.setValue(e.instance.value ? e.instance.value : '');\r\n              this.showExprHelp(e);\r\n            },\r\n            clear: (e) => {\r\n              console.log('clear', e);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    ];\r\n    // éä¸­å½åè¡\r\n    this.repository.subject.subscribe(cmp => {\r\n      this.cmplist.loadData(this.uistate.components);\r\n      if (cmp) {\r\n        this.cmplist.selectRow(cmp.id, true);\r\n      } else {\r\n        this.uistate.curComponent = null;\r\n      }\r\n    });\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    if (this.uistate.components && this.uistate.components.length > 0) {\r\n      this.cmplist.selectRow(this.uistate.components[0].id, true);\r\n    }\r\n  }\r\n\r\n  deleteRow() {\r\n    this.closeCellEdit();\r\n\r\n    this.viewModel.deleteRow();\r\n  }\r\n\r\n  moveUp() {\r\n    if (!this.uistate.curComponent) {\r\n      this.message.info('å°æªéä¸­æä»¶ï¼');\r\n      return;\r\n    }\r\n    const curCmpId: string = this.uistate.curComponent.id;\r\n    const i = this.uistate.components.findIndex(c => c.id === curCmpId);\r\n    if (i === 0) {\r\n      return;\r\n    }\r\n    this.repository.swapArray(this.uistate.components, i, i - 1);\r\n\r\n    this.cmplist.loadData(this.uistate.components);\r\n    this.cmplist.selectRow(curCmpId, true);\r\n  }\r\n\r\n  moveDown() {\r\n    if (!this.uistate.curComponent) {\r\n      this.message.info('å°æªéä¸­æä»¶ï¼');\r\n      return;\r\n    }\r\n    const curCmpId: string = this.uistate.curComponent.id;\r\n    const i = this.uistate.components.findIndex(c => c.id === curCmpId);\r\n    if (i === this.uistate.components.length - 1) {\r\n      return;\r\n    }\r\n    this.repository.swapArray(this.uistate.components, i, i + 1);\r\n\r\n    this.cmplist.loadData(this.uistate.components);\r\n    this.cmplist.selectRow(curCmpId, true);\r\n  }\r\n\r\n  clickOK() {\r\n    this.closeCellEdit();\r\n\r\n    if (this.validator()) {\r\n      const object = { value: this.uistate.components, parameters: null };\r\n      this.submitModal.emit(object);\r\n    }\r\n  }\r\n\r\n  clickCancel() {\r\n    this.closeModal.emit();\r\n  }\r\n  componentSelect() {\r\n    const compFactory = this.resolver.resolveComponentFactory(SelectMetadataRTComponent);\r\n    const compRef = compFactory.create(this.injector);\r\n    compRef.instance.typeList = 'WebServiceComponent'; // ç®ååªè½æ ¹æ®åæ°æ®ç±»åè¿æ»¤ï¼åç»­æ·»å æ ç­¾è¿æ»¤\r\n    compRef.instance.selectedMetadata.subscribe(($event: Metadata4RefDto) => {\r\n      try {\r\n        const meta: MetadataDto = $event.metadata;\r\n        this.openComponentSelectorNew(meta.id, this.sessionSrc.getUserSessionId());\r\n      } catch {\r\n        console.log('$event', $event);\r\n        throw new Error('è·åè§£ææä»¶åºé' + $event);\r\n      }\r\n    });\r\n\r\n    const modalConfig = {\r\n      title: 'æä»¶éæ©',\r\n      width: 980,\r\n      height: 548,\r\n      showButtons: false\r\n    };\r\n    const dialog = this.modalService.show(compRef, modalConfig);\r\n    compRef.instance.closeModalEmitter.subscribe($event => dialog.close());\r\n  }\r\n  /**\r\n   * åæ°æä»¶å¸®å©new\r\n   */\r\n  openComponentSelectorNew(metadataId: string, sessionId: string) {\r\n    this.componentService.openSelector(metadataId, sessionId).subscribe(\r\n      (selectorResult: SelectorResult) => {\r\n        selectorResult.confirmEvent.subscribe(\r\n          (result: GspComponent) => {\r\n            this.viewModel.componentSelect(result);\r\n          });\r\n      });\r\n  }\r\n  showExprHelp(e: any) {\r\n    if (this.designerState.schemas.length > 0) {\r\n      for (const schema of this.designerState.schemas) {\r\n        this.expr.addSchema('Schema', schema);\r\n      }\r\n      if (this.designerState.schemas[0].entityTypes && this.designerState.schemas[0].entityTypes.length > 0) {\r\n        const entityType = this.designerState.schemas[0].entityTypes[0];\r\n        this.expr.addInjectedEntity(entityType.name, 'Schema',\r\n          entityType.name, InjectedType.EntityType);\r\n      }\r\n    }\r\n    const context = new Array<VarEntity>();\r\n    if (this.designerState.procInstContext.length > 0) {\r\n      for (const variable of this.designerState.procInstContext) {\r\n        context.push(variable);\r\n      }\r\n    }\r\n    if (this.designerState.formalParameterContext.length > 0) {\r\n      for (const variable of this.designerState.formalParameterContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (this.designerState.participantContext.length > 0) {\r\n      for (const variable of this.designerState.participantContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (this.location === 'activity') {\r\n      for (const variable of this.designerState.activityComponentContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (this.designerState.processVariableContext.length > 0) {\r\n      for (const variable of this.designerState.processVariableContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (context.length > 0) {\r\n      for (const v of context) {\r\n        this.expr.addContext(v);\r\n      }\r\n    }\r\n    this.expr.setEditPattern(ExprEditMode.Advanced); // é»è®¤æå¼é«çº§è¡¨è¾¾å¼ç¼è¾å¨\r\n    this.expr.addExpressionText(e.instance.value);\r\n    this.expr.buildExpression().then((expressioninfo: string) => {\r\n      e.formControl.setValue(expressioninfo);\r\n      e.instance.cd.detectChanges();\r\n    });\r\n  }\r\n  selectionChange(data: any) {\r\n    this.uistate.curComponent = data.data;\r\n  }\r\n  paramAfterEdit = (rowIndex: number, rowData: any, column?: DataColumn) => {\r\n    return of(true);\r\n  }\r\n\r\n  private closeCellEdit() {\r\n    this.cmplist.endCellEdit();\r\n    if (this.paramlist) {\r\n      this.paramlist.endCellEdit();\r\n    }\r\n  }\r\n\r\n  private validator(): boolean {\r\n    for (const c of this.uistate.components) {\r\n      if (!c.executionTime && this.location !== 'autoActivity') {\r\n        this.message.warning('æä»¶æ§è¡æ¶æºä¸åè®¸ä¸ºç©ºï¼');\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n}\r\n\r\nexport class ActivityComponentConverter implements TypeConverter {\r\n  constructor() { }\r\n\r\n  convertTo(data: any[]): string {\r\n    if (data && data.length > 0) {\r\n      return 'ï¼å·²è®¾ç½®ï¼';\r\n    } else {\r\n      return 'ï¼æªè®¾ç½®ï¼';\r\n    }\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\n@Injectable()\r\n\r\nexport class ExecuteFormsUIState {\r\n    public formTypeCollection = [\r\n        { text: 'æµç¨åµè¡¨å', value: '0' },\r\n        { text: 'è¡¨ååµæµç¨', value: '1' },\r\n    ];\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\n@Injectable()\r\n\r\nexport class ExecuteFormsViewModel {\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\n@Injectable()\r\n\r\nexport class ExecuteFormsRepository {\r\n\r\n}\r\n","\r\nexport class ExecuteFormModel {\r\n    Id: string;\r\n    Name: string;\r\n    ComponentId: string;\r\n    FormType: string;\r\n    TerminalType: TerminalType;\r\n    ActualParameters: ActualParameter[];\r\n    formFormatId: string;\r\n    formatConfigId: string;\r\n}\r\nexport class ActualParameter {\r\n    Name: string;\r\n    Value: string;\r\n    ValueText?: string;\r\n    Tag?: string;\r\n}\r\nexport enum TerminalType {\r\n    PC = 'PC',\r\n    MOBILE = 'MOBILE',\r\n    ALL = 'ALL'\r\n}\r\n","import { ILookupHttpService, RemoteParams, LookupGridResult } from '@farris/ui-lookup';\r\nimport { Injectable } from '@angular/core';\r\nimport { HttpService } from '@ecp-caf/caf-common';\r\nimport { Observable, of } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\n\r\n@Injectable()\r\nexport class FormFormatService implements ILookupHttpService {\r\n    constructor(\r\n        private http: HttpService,\r\n    ) {\r\n    }\r\n    getData(url: string, params?: RemoteParams): Observable<LookupGridResult> {\r\n        const customData = params.customData;\r\n        const index = params.pageIndex || 1;\r\n        const size = params.pageSize || 20;\r\n        const searchValue = JSON.parse(params.searchValue);\r\n        const terminal = customData.tab === 'web' ? 'PC' : 'Mobile';\r\n        let query = '?param=';\r\n        let filter = `{\"terminal\":\"${terminal}\"`;\r\n        if (searchValue.searchValue) {\r\n            if (searchValue.searchField === '*') {\r\n                filter += `,\"allColumns\":\"${searchValue.searchValue}\"`;\r\n            } else {\r\n                filter += `,\"${searchValue.searchField}\":\"${searchValue.searchValue}\"`;\r\n            }\r\n        }\r\n        filter += '}';\r\n        filter = encodeURIComponent(filter);\r\n        query += (filter + `&pageNum=${index}&pageSize=${size}`);\r\n        url += query;\r\n        return this.http.get(url).pipe(\r\n            map((re: any) => ({\r\n                items: re.content,\r\n                total: re.totalElements,\r\n                pageInfo: {\r\n                    pageIndex: re.pageable.pageNumber + 1,\r\n                    pageSize: re.pageable.pageSize,\r\n                    pageList: [20, 40, 60, 80, 100],\r\n                    enablePager: true\r\n                }\r\n            }))\r\n        );\r\n    }\r\n}\r\n\r\n","export class ExecuteForm { \r\n    id: string;\r\n    code: string;\r\n    name: string;\r\n    appId: string;\r\n    flowFormKey: string;\r\n    formFormatId: string;\r\n    formType: string;\r\n    isDefault: boolean;\r\n    terminal: string;\r\n    actualParameters: Array<FormalParameter>;\r\n    sysInit: number;\r\n    remarks: string;\r\n}\r\n\r\nexport class FormalParameter {\r\n    code: string;\r\n    name: string;\r\n    value: string;\r\n}\r\n","import { Component, OnInit, Injector, ComponentFactoryResolver, ViewChild, TemplateRef } from '@angular/core';\r\nimport { BsModalService } from '@farris/ui-modal';\r\nimport { ProcessDesignerUIState } from '../../../app/process-designer.uistate';\r\nimport { HttpService, SessionService } from '@ecp-caf/caf-common';\r\nimport { RtfAppHelpComponent } from '@gsp-sys/rtf-ui';\r\nimport { RtfApp } from '@gsp-sys/rtf-ui/lib/rtf-app-help/entities/rtf-app';\r\nimport { of, Observable, Subject, from, forkJoin } from 'rxjs';\r\nimport { PickedResult, ServerSideToken, LookupGridComponent } from '@farris/ui-lookup';\r\nimport { FormFormatService } from './form-format.service';\r\nimport { ExecuteFormModel, TerminalType, ActualParameter } from '../entities/execute-form.entity';\r\nimport { DatagridComponent } from '@farris/ui-datagrid';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { ExecuteForm } from '../entities/execute-form';\r\nimport { ProcessDeUtil } from '../../../domain/process-de-util';\r\nimport { map } from 'rxjs/operators';\r\n\r\n@Component({\r\n  selector: 'lib-add-execute-form',\r\n  templateUrl: './add-execute-form.component.html',\r\n  styleUrls: ['./add-execute-form.component.scss'],\r\n  providers: [{ provide: ServerSideToken, useClass: FormFormatService }]\r\n})\r\nexport class AddExecuteFormComponent implements OnInit {\r\n\r\n  @ViewChild('iconSelectFooter') modalFooter: TemplateRef<any>;\r\n  @ViewChild(RtfAppHelpComponent) public appHelper: RtfAppHelpComponent;\r\n  @ViewChild('lookup') public lookUp: LookupGridComponent;\r\n  @ViewChild('grid') private grid: DatagridComponent;\r\n\r\n  submit = new Subject<ExecuteFormModel>();\r\n  cancel = new Subject();\r\n\r\n  tab: 'web' | 'mobile';\r\n\r\n  forms = new Array<ExecuteForm>();\r\n\r\n  // private formTypeCollection = [\r\n  //   { text: 'æµç¨åµè¡¨å', value: '0' },\r\n  //   { text: 'è¡¨ååµæµç¨', value: '1' },\r\n  // ];\r\n\r\n  columns = [\r\n    { field: 'code', width: 100, title: 'ç¼å·' },\r\n    {\r\n      field: 'name', width: 100, title: 'åç§°',\r\n    },\r\n    {\r\n      field: 'tag', width: 80, title: 'åæ®ç±»å',\r\n      formatter: (v, d, i) => {\r\n        if (d.appId) {\r\n          return 'åè½èå';\r\n        } else if (d.formFormatId) {\r\n          return 'è¡¨åæ ¼å¼';\r\n        }\r\n      }\r\n    }\r\n    // {\r\n    //   field: 'formType', width: 80, title: 'èæ¥ç±»å',\r\n    //   formatter: {\r\n    //     type: 'enum',\r\n    //     options: { valueField: 'value', textField: 'text', data: this.formTypeCollection }\r\n    //   },\r\n    // },\r\n  ];\r\n\r\n  // è¡¨åæ ¼å¼æ¾ç¤ºå\r\n  cols = [\r\n    {\r\n      field: 'code', width: 100, title: 'åæ®æ ¼å¼ç¼å·', searchField: 'code'\r\n    }, {\r\n      field: 'name', width: 100, title: 'åæ®æ ¼å¼åç§°', searchField: 'name'\r\n    }\r\n  ];\r\n\r\n  dataUri = '/api/runtime/wf/v1.0/formFormat/page';\r\n  constructor(\r\n    private state: ProcessDesignerUIState,\r\n    private http: HttpService,\r\n    private session: SessionService,\r\n    private message: MessagerService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.getAllExecuteForms();\r\n  }\r\n\r\n  clickOK() {\r\n    if (this.grid.selectedRow) {\r\n      const form: ExecuteForm = this.grid.selectedRow.data;\r\n      const model = new ExecuteFormModel();\r\n      model.Id = ProcessDeUtil.GenerateElementId();\r\n      model.Name = form.name;\r\n      model.ComponentId = form.appId;\r\n      model.FormType = form.formType;\r\n      model.formFormatId = form.formFormatId;\r\n      model.TerminalType = this.tab === 'web' ? TerminalType.PC : TerminalType.MOBILE;\r\n      model.ActualParameters = form.actualParameters.map(p => {\r\n        const a = new ActualParameter();\r\n        a.Name = p.code;\r\n        a.Value = p.value;\r\n        return a;\r\n      });\r\n      this.submit.next(model);\r\n    } else {\r\n      this.message.info('å°æªéæ©è¡¨åå®ä¹ï¼');\r\n    }\r\n  }\r\n\r\n  clickCancel() {\r\n    this.cancel.next();\r\n  }\r\n\r\n  selectOtherFormFormat() {\r\n    this.lookUp.showDialog();\r\n  }\r\n\r\n  dictPicking = (arg) => {\r\n    return of({\r\n      showDialog: true, data: {\r\n        tab: this.tab\r\n      }\r\n    });\r\n  }\r\n\r\n  dictPicked = (data: any): Observable<PickedResult> => {\r\n    const model = new ExecuteFormModel();\r\n    model.Id = ProcessDeUtil.GenerateElementId();\r\n    model.Name = data.name;\r\n    model.ComponentId = null;\r\n    model.FormType = '0';\r\n    model.formFormatId = data.id;\r\n    model.TerminalType = this.tab === 'web' ? TerminalType.PC : TerminalType.MOBILE;\r\n    model.ActualParameters = data.urlParameters.map(p => {\r\n      const a = new ActualParameter();\r\n      a.Name = p.code;\r\n      a.Value = p.value;\r\n      return a;\r\n    });\r\n    this.submit.next(model);\r\n    return of({ closeDialog: true });\r\n  }\r\n\r\n  selectOtherFunc() {\r\n    this.appHelper.showHelp(this.session.getUserSessionId());\r\n  }\r\n\r\n  funcSelected(apps: RtfApp[]) {\r\n    if (apps && apps.length > 0) {\r\n      const model = new ExecuteFormModel();\r\n      model.Id = ProcessDeUtil.GenerateElementId();\r\n      model.Name = apps[0].Name;\r\n      model.ComponentId = apps[0].Id;\r\n      model.FormType = '0';\r\n      model.formFormatId = null;\r\n      model.TerminalType = this.tab === 'web' ? TerminalType.PC : TerminalType.MOBILE;\r\n      model.ActualParameters = [];\r\n      if (apps[0].InvokingConfig['entityParams']) {\r\n        const paras = JSON.parse(apps[0].InvokingConfig['entityParams']);\r\n        model.ActualParameters = paras.map(p => ({\r\n          Name: p.name,\r\n          Value: ''\r\n        }));\r\n      }\r\n      setTimeout(() => {\r\n        this.submit.next(model);\r\n      }, 0);\r\n    }\r\n  }\r\n\r\n  private getAllExecuteForms() {\r\n    forkJoin(this.getExecuteForms(), this.getFormFormats()).subscribe(re => {\r\n      if (re[0]) {\r\n        this.forms = re[0];\r\n      }\r\n      if (re[1] && re[1].length > 0) {\r\n        const formFormats = re[1];\r\n        for (const format of formFormats) {\r\n          if (this.forms.findIndex(f => f.formFormatId && f.formFormatId === format.id) === -1) {\r\n            const executeForm = new ExecuteForm();\r\n            executeForm.id = ProcessDeUtil.createNM();\r\n            executeForm.flowFormKey = this.state.flowFormInfo.flowForm.id;\r\n            executeForm.appId = null;\r\n            executeForm.code = format.code;\r\n            executeForm.name = format.name;\r\n            executeForm.actualParameters = [];\r\n            executeForm.isDefault = false;\r\n            executeForm.formType = '0';\r\n            executeForm.terminal = 'web';\r\n            executeForm.formFormatId = format.id;\r\n            executeForm.sysInit = 0;\r\n            executeForm.remarks = '';\r\n            if (format.urlParameters && format.urlParameters.length > 0) {\r\n              const actPList = format.urlParameters.map(p => ({\r\n                code: p.code,\r\n                name: p.name,\r\n                value: p.value\r\n              }));\r\n              executeForm.actualParameters = actPList;\r\n            }\r\n            this.forms.push(executeForm);\r\n          }\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  private getExecuteForms(): Observable<any> {\r\n    if (this.state.flowFormInfo.flowForm.id && this.tab) {\r\n      const url = `/api/runtime/wf/v1.0/excuteForm?flowFormKey=${this.state.flowFormInfo.flowForm.id}`;\r\n      return this.http.get(url).pipe(\r\n        map((re: any) => {\r\n          if (this.tab === 'web') {\r\n            return re.filter(f => f.terminal.indexOf('web') > -1);\r\n          } else if (this.tab === 'mobile') {\r\n            return re.filter(f => f.terminal.indexOf('app') > -1);\r\n          }\r\n        })\r\n      );\r\n    } else {\r\n      return from(new Array());\r\n    }\r\n  }\r\n\r\n  private getFormFormats(): Observable<any>  {\r\n    if (this.state.flowFormInfo.flowForm.businessObjectId && this.tab) {\r\n      const terminal = this.tab === 'web' ? 'PC' : 'Mobile';\r\n      let url = `/api/runtime/wf/v1.0/formFormat/query?param=`;\r\n      let param = `{\"bizCategory\":\"${this.state.flowFormInfo.flowForm.businessObjectId}\",\"terminal\":\"${terminal}\"}`;\r\n      param = encodeURIComponent(param);\r\n      url += param;\r\n      return this.http.get(url);\r\n    } else {\r\n      return from(new Array());\r\n    }\r\n  }\r\n\r\n}\r\n","import { Component, OnInit, ViewChild, TemplateRef } from '@angular/core';\r\nimport { ExpressionService, InjectedType } from '@gsp-svc/expression';\r\nimport { ProcessDesignerUIState } from '../../../app/process-designer.uistate';\r\nimport { Subject } from 'rxjs';\r\nimport { DatagridComponent } from '@farris/ui-datagrid';\r\n\r\n@Component({\r\n  selector: 'lib-parameter-setting',\r\n  templateUrl: './parameter-setting.component.html',\r\n  styleUrls: ['./parameter-setting.component.scss']\r\n})\r\nexport class ParameterSettingComponent implements OnInit {\r\n\r\n  @ViewChild('iconSelectFooter') modalFooter: TemplateRef<any>;\r\n  @ViewChild('grid') grid: DatagridComponent;\r\n\r\n  idField: 'Name' | 'code' = 'Name';\r\n\r\n  private _mode: 'bpmn' | 'usual' = 'bpmn';\r\n  set mode(m: 'bpmn' | 'usual') {\r\n    this._mode = m;\r\n    if (m === 'bpmn') {\r\n      this.idField = 'Name';\r\n      this.cols = [\r\n        { field: 'Name', width: 50, title: 'ç¼å·' },\r\n        {\r\n          field: 'Value', width: 100, title: 'åæ°å¼',\r\n          editor: {\r\n            type: 'input-group',\r\n            options: {\r\n              groupText: '<i class=\"f-icon f-icon-lookup\"></i>',\r\n              editable: false,\r\n              clickHandle: (e) => {\r\n                e.formControl.setValue(e.instance.value ? e.instance.value : '');\r\n                this.showExprHelp(e);\r\n              },\r\n              clear: (e) => {\r\n                console.log('clear', e);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      ];\r\n    } else {\r\n      this.idField = 'code';\r\n      this.cols = [\r\n        { field: 'code', width: 50, title: 'ç¼å·' },\r\n        { field: 'name', width: 50, title: 'åç§°' },\r\n        {\r\n          field: 'value', width: 100, title: 'åæ°å¼',\r\n          editor: {\r\n            type: 'input-group',\r\n            options: {\r\n              groupText: '<i class=\"f-icon f-icon-lookup\"></i>',\r\n              editable: false,\r\n              clickHandle: (e) => {\r\n                e.formControl.setValue(e.instance.value ? e.instance.value : '');\r\n                this.showExprHelp(e);\r\n              },\r\n              clear: (e) => {\r\n                console.log('clear', e);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      ];\r\n    }\r\n  }\r\n\r\n  get mode() {\r\n    return this._mode;\r\n  }\r\n  submit = new Subject<any>();\r\n  cancel = new Subject();\r\n  formTypeCollection = [\r\n    { text: 'æµç¨åµè¡¨å', value: '0' },\r\n    { text: 'è¡¨ååµæµç¨', value: '1' },\r\n  ];\r\n\r\n  cols = new Array();\r\n\r\n  parameters = new Array();\r\n\r\n  formType = this.formTypeCollection[0].value;\r\n\r\n  showFormType = false;\r\n\r\n  constructor(\r\n    private expr: ExpressionService,\r\n    private designerState: ProcessDesignerUIState) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  showExprHelp(e: any) {\r\n    if (this.designerState.schemas.length > 0) {\r\n      for (const schema of this.designerState.schemas) {\r\n        this.expr.addSchema('Schema', schema);\r\n      }\r\n      if (this.designerState.schemas[0].entityTypes && this.designerState.schemas[0].entityTypes.length > 0) {\r\n        const entityType = this.designerState.schemas[0].entityTypes[0];\r\n        this.expr.addInjectedEntity(entityType.name, 'Schema',\r\n          entityType.name, InjectedType.EntityType);\r\n      }\r\n    }\r\n    const context = new Array();\r\n    if (this.designerState.procInstContext.length > 0) {\r\n      for (const variable of this.designerState.procInstContext) {\r\n        context.push(variable);\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (this.designerState.formalParameterContext.length > 0) {\r\n      for (const variable of this.designerState.formalParameterContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (this.designerState.participantContext.length > 0) {\r\n      for (const variable of this.designerState.participantContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (this.designerState.processVariableContext.length > 0) {\r\n      for (const variable of this.designerState.processVariableContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (context.length > 0) {\r\n      for (const v of context) {\r\n        this.expr.addContext(v);\r\n      }\r\n    }\r\n\r\n    this.expr.addExpressionText(e.instance.value);\r\n\r\n    this.expr.buildExpression().then((d: string) => { // ç¼è¾å¨è¿åå¼\r\n      if (d) {\r\n        e.formControl.setValue(d);\r\n        e.instance.cd.detectChanges();\r\n      }\r\n    });\r\n  }\r\n\r\n  clickOK() {\r\n    this.grid.endCellEdit();\r\n    this.submit.next({ parameters: this.parameters, formType: this.formType });\r\n  }\r\n\r\n  clickCancel() {\r\n    this.cancel.next();\r\n  }\r\n\r\n}\r\n","import { Component, OnInit, HostBinding, Output, EventEmitter, Input, ViewChild, TemplateRef, ElementRef, ComponentFactoryResolver, Injector, AfterViewInit, AfterContentInit } from '@angular/core';\r\nimport { TypeConverter } from '@farris/ui-property-panel';\r\nimport { of } from 'rxjs/observable/of';\r\nimport { FormBuilder } from '@angular/forms';\r\nimport { ExecuteFormsUIState } from './execute-forms.uistate';\r\nimport { ExecuteFormsViewModel } from './execute-forms.viewmodel';\r\nimport { ExecuteFormsRepository } from './execute-forms.repository';\r\nimport { ExecuteFormModel, TerminalType, ActualParameter } from './entities/execute-form.entity';\r\nimport { BsModalService } from '@farris/ui-modal';\r\nimport { AddExecuteFormComponent } from './add-execute-form/add-execute-form.component';\r\nimport { FormConfigContainerComponent } from './form-config-container/form-config-container.component';\r\nimport { ParameterSettingComponent } from './parameter-setting/parameter-setting.component';\r\nimport { Observable, Subject, forkJoin } from 'rxjs';\r\nimport { switchMap } from 'rxjs/operators';\r\n\r\n@Component({\r\n  selector: 'app-execute-forms',\r\n  templateUrl: './execute-forms.component.html',\r\n  styleUrls: ['./execute-forms.component.css'],\r\n  providers: [ExecuteFormsUIState, ExecuteFormsViewModel, ExecuteFormsRepository]\r\n})\r\nexport class ExecuteFormsComponent implements OnInit, AfterViewInit {\r\n  modalConfig = {\r\n    title: 'è¡¨åå®ä¹',\r\n    width: 794,\r\n    height: 505,\r\n    showButtons: true\r\n  };\r\n\r\n  @HostBinding('class')\r\n  cls = 'farris-main-area flex-column';\r\n  @HostBinding('style.background') style = '#FFF';\r\n  @Output() closeModal = new EventEmitter<any>();\r\n  @Output() submitModal = new EventEmitter<any>();\r\n\r\n  @Input()\r\n  set value(item: ExecuteFormModel) {\r\n    if (item) {\r\n      const paramArray = new Array<ActualParameter>();\r\n      item.ActualParameters.forEach(a => {\r\n        const para = new ActualParameter();\r\n        para.Name = a.Name;\r\n        para.Value = a.Value;\r\n        paramArray.push(para);\r\n      });\r\n      this.form.ActualParameters = paramArray;\r\n      this.form.Id = item.Id;\r\n      this.form.Name = item.Name;\r\n      this.form.ComponentId = item.ComponentId;\r\n      this.form.formFormatId = item.formFormatId;\r\n      this.form.formatConfigId = item.formatConfigId;\r\n      this.form.FormType = item.FormType;\r\n      this.form.TerminalType = item.TerminalType;\r\n    }\r\n  }\r\n  @Input() editorParams: any = {};\r\n  @ViewChild('iconSelectFooter') modalFooter: TemplateRef<any>;\r\n  @ViewChild('configContainer') configContainer: FormConfigContainerComponent;\r\n\r\n  @ViewChild('configSection', { read: ElementRef }) configSection: ElementRef<any>;\r\n\r\n  form: ExecuteFormModel;\r\n\r\n  tab: 'web' | 'mobile' = 'web';\r\n\r\n  groupIcon = '<i class=\"f-icon f-icon-lookup\"></i>';\r\n\r\n  cols = [];\r\n\r\n  location: 'userActivity' | 'process' | 'startActivity';\r\n\r\n  showMethodTab = true;\r\n\r\n  // *******************************************************\r\n  constructor(\r\n    private formBuilder: FormBuilder,\r\n    public uistate: ExecuteFormsUIState,\r\n    public viewmodel: ExecuteFormsViewModel,\r\n    private resolver: ComponentFactoryResolver,\r\n    private injector: Injector,\r\n    private modalService: BsModalService\r\n  ) {\r\n    this.form = new ExecuteFormModel();\r\n  }\r\n  ngAfterViewInit(): void {\r\n    // this.editCSS();\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.location = this.editorParams.location;\r\n    this.tab = this.editorParams.tab;\r\n    if (this.location === 'userActivity') {\r\n      this.showMethodTab = true;\r\n    } else {\r\n      this.showMethodTab = false;\r\n    }\r\n  }\r\n  clickOK() {\r\n    let data = new ExecuteFormModel();\r\n    this.getForm().subscribe((re: any) => {\r\n      if (!re.result) {\r\n        return;\r\n      }\r\n      data = re.form;\r\n      const object = { value: data, parameters: null };\r\n      this.submitModal.emit(object);\r\n    });\r\n  }\r\n\r\n  clickCancel() {\r\n    this.closeModal.emit();\r\n  }\r\n  // tabChange(data) {\r\n  //   this.tab = data.nextId;\r\n  // }\r\n\r\n  // editCSS() {\r\n  //   this.configSection.nativeElement.querySelector('div.f-section-header').classList.add('mb-0');\r\n  // }\r\n\r\n  private getForm(): Observable<any> {\r\n    if (this.form.ComponentId) {\r\n      return of({ result: true, form: this.form });\r\n    } else if (this.form.formFormatId) {\r\n      return this.configContainer.submit().pipe(\r\n        switchMap((re: any) => {\r\n          if (re.result) {\r\n            this.form.formatConfigId = re.configId;\r\n            return of({ result: true, form: this.form });\r\n          } else {\r\n            return of({ result: false, form: this.form });\r\n          }\r\n        })\r\n      );\r\n    } else {\r\n      return of({ result: true, form: null });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * åæ°è®¾ç½®\r\n   */\r\n  parametersSet() {\r\n    const compFactory = this.resolver.resolveComponentFactory(ParameterSettingComponent);\r\n    const compRef = compFactory.create(this.injector);\r\n    compRef.instance.mode = 'bpmn';\r\n    if (this.tab === 'web') {\r\n      if (this.form.ComponentId) {\r\n        compRef.instance.showFormType = true;\r\n        compRef.instance.formType = this.form.FormType;\r\n      }\r\n      compRef.instance.parameters = [...this.form.ActualParameters.map(p => Object.assign({}, p))];\r\n    } else {\r\n      compRef.instance.parameters = [...this.form.ActualParameters.map(p => Object.assign({}, p))];\r\n    }\r\n\r\n    const modalConfig = {\r\n      title: 'åæ°è®¾ç½®',\r\n      width: 620,\r\n      height: 400,\r\n      showButtons: true,\r\n      buttons: compRef.instance.modalFooter\r\n    };\r\n    const dialog = this.modalService.show(compRef, modalConfig);\r\n\r\n    compRef.instance.submit.subscribe(re => {\r\n      if (this.tab === 'web') {\r\n        this.form.ActualParameters = re.parameters;\r\n        this.form.FormType = re.formType;\r\n      } else {\r\n        this.form.ActualParameters = re.parameters;\r\n      }\r\n      dialog.close();\r\n    });\r\n    compRef.instance.cancel.subscribe(re => {\r\n      dialog.close();\r\n    });\r\n  }\r\n  /**\r\n   * éæ©è¡¨åå®ä¹\r\n   */\r\n  selectExecuteForm() {\r\n    const compFactory = this.resolver.resolveComponentFactory(AddExecuteFormComponent);\r\n    const compRef = compFactory.create(this.injector);\r\n    compRef.instance.tab = this.tab;\r\n\r\n    const modalConfig = {\r\n      title: 'è¡¨åå®ä¹åè¡¨',\r\n      width: 650,\r\n      height: 400,\r\n      showButtons: true,\r\n      buttons: compRef.instance.modalFooter\r\n    };\r\n    const dialog = this.modalService.show(compRef, modalConfig);\r\n    compRef.instance.submit.subscribe((re: ExecuteFormModel) => {\r\n      this.form = re;\r\n      dialog.close();\r\n    });\r\n    compRef.instance.cancel.subscribe(re => {\r\n      dialog.close();\r\n    });\r\n  }\r\n  clear() {\r\n    this.form = new ExecuteFormModel();\r\n  }\r\n}\r\nexport class ExecuteFormsConverter implements TypeConverter {\r\n  constructor() { }\r\n\r\n  convertTo(data): string {\r\n    if (data) {\r\n      return data.Name;\r\n    } else {\r\n      return 'ï¼æªè®¾ç½®ï¼';\r\n    }\r\n  }\r\n}\r\n","import { Component, OnInit, Output, EventEmitter, Input, ViewChild, TemplateRef } from '@angular/core';\r\nimport { TypeConverter } from '@farris/ui-property-panel';\r\nimport { ExpressionService, InjectedType, ExpressioneditorComponent } from '@gsp-svc/expression';\r\nimport { ProcessDesignerUIState } from '../../app/process-designer.uistate';\r\n\r\n@Component({\r\n  selector: 'app-title-expression',\r\n  templateUrl: './title-expression.component.html',\r\n  styleUrls: ['./title-expression.component.scss']\r\n})\r\nexport class TitleExpressionComponent implements OnInit {\r\n\r\n  @Output() closeModal = new EventEmitter<any>();\r\n  @Output() submitModal = new EventEmitter<any>();\r\n\r\n  @Input() value: string;\r\n\r\n  @ViewChild('iconSelectFooter') modalFooter: TemplateRef<any>;\r\n\r\n  @Input() editorParams: any = {};\r\n\r\n  @ViewChild(ExpressioneditorComponent) editor: ExpressioneditorComponent;\r\n\r\n  contextEntities = [];\r\n\r\n  schema: any = {};\r\n  injectName = '';\r\n\r\n  modalConfig = {\r\n    title: 'ä»»å¡æè¿°',\r\n    width: 1140,\r\n    height: 520,\r\n    showButtons: true\r\n  };\r\n\r\n  constructor(\r\n    private expr: ExpressionService,\r\n    public designerState: ProcessDesignerUIState\r\n  ) { \r\n    if (this.designerState.schemas[0]) {\r\n      this.schema = this.designerState.schemas[0];\r\n      if (this.designerState.schemas[0].entityTypes && this.designerState.schemas[0].entityTypes.length > 0) {\r\n        this.injectName = this.designerState.schemas[0].entityTypes[0].name;\r\n      }\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n    // this.contextEntities = this.contextEntities.concat(this.designerState.procInstContext)\r\n    //   .concat(this.designerState.formalParameterContext)\r\n    //   .concat(this.designerState.participantContext)\r\n    //   .concat(this.designerState.processVariableContext);\r\n    this.contextEntities = new Array();\r\n    if (this.designerState.procInstContext.length > 0) {\r\n      for (const variable of this.designerState.procInstContext) {\r\n        this.contextEntities = this.contextEntities.concat([variable]);\r\n      }\r\n    }\r\n    if (this.designerState.formalParameterContext.length > 0) {\r\n      for (const variable of this.designerState.formalParameterContext) {\r\n        if (!this.contextEntities.some(c => c.key === variable.key)) {\r\n          this.contextEntities = this.contextEntities.concat([variable]);\r\n        }\r\n      }\r\n    }\r\n    if (this.designerState.participantContext.length > 0) {\r\n      for (const variable of this.designerState.participantContext) {\r\n        if (!this.contextEntities.some(c => c.key === variable.key)) {\r\n          this.contextEntities = this.contextEntities.concat([variable]);\r\n        }\r\n      }\r\n    }\r\n    if (this.designerState.processVariableContext.length > 0) {\r\n      for (const variable of this.designerState.processVariableContext) {\r\n        if (!this.contextEntities.some(c => c.key === variable.key)) {\r\n          this.contextEntities = this.contextEntities.concat([variable]);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  clickOK() {\r\n    this.value = this.convertToValue(this.editor.getExpr());\r\n    const object = { value: this.value, parameters: null };\r\n    this.submitModal.emit(object);\r\n  }\r\n\r\n  clickCancel() {\r\n    this.closeModal.emit();\r\n  }\r\n\r\n  private convertToValue(val: string): string {\r\n    if (val) {\r\n      if (val.substring(9, val.length - 2)) {\r\n        return val;\r\n      } else {\r\n        return '';\r\n      }\r\n    } else {\r\n      return '';\r\n    }\r\n  }\r\n\r\n}\r\nexport class TitleExpressionConverter implements TypeConverter {\r\n  constructor() { }\r\n\r\n  convertTo(data: any): string {\r\n    if (data) {\r\n      return data;\r\n    } else {\r\n      return 'ï¼æªè®¾ç½®ï¼';\r\n    }\r\n  }\r\n}\r\n","import { ActualParameter } from '../../execute-forms/entities/execute-form.entity';\r\n\r\nexport class CustomizeAciton {\r\n    id: string;\r\n    code: string;\r\n    name: string;\r\n    terminalType: string;\r\n    // enable: boolean;\r\n    actualParameters: ActualParameter[];\r\n    constructor(id?: string, code?: string, name?: string) {\r\n        this.id = id;\r\n        this.code = code;\r\n        this.name = name;\r\n    }\r\n}\r\n","import { Component, OnInit, ViewChild, TemplateRef, Output, EventEmitter } from '@angular/core';\r\nimport { ProcessDesignerUIState } from '../../../../app/process-designer.uistate';\r\nimport { DatagridComponent } from '@farris/ui-datagrid';\r\nimport { CustomizeAciton } from '../../entities/customize-action.entity';\r\nimport { ActualParameter } from '../../../execute-forms/entities/execute-form.entity';\r\n\r\n@Component({\r\n  selector: 'app-customize-action-list',\r\n  templateUrl: './customize-action-list.component.html',\r\n  styleUrls: ['./customize-action-list.component.scss']\r\n})\r\nexport class CustomizeActionListComponent implements OnInit {\r\n\r\n  @ViewChild('grid') grid: DatagridComponent;\r\n  @ViewChild('footer') footer: TemplateRef<any>;\r\n\r\n  @Output() submit = new EventEmitter<any[]>();\r\n  @Output() cancel = new EventEmitter<any>();\r\n\r\n  customActionList: any[];\r\n\r\n  private terminalList = [\r\n    { value: 'app', text: 'ç§»å¨' },\r\n    { value: 'web', text: 'web' },\r\n    { value: 'web,app', text: 'web,ç§»å¨' }\r\n  ];\r\n\r\n  cols = [\r\n    { field: 'code', width: 100, title: 'ç¼å·' },\r\n    { field: 'name', width: 100, title: 'åç§°' },\r\n    {\r\n      field: 'terminal', width: 100, title: 'éç¨ç»ç«¯',\r\n      formatter: {\r\n        type: 'enum',\r\n        options: { valueField: 'value', textField: 'text', data: this.terminalList }\r\n      }, },\r\n    {\r\n      field: 'isAll', width: 100, title: 'æ¯å¦é»è®¤',\r\n      formatter: { type: 'boolean', options: { trueText: 'æ¯', falseText: 'å¦' } }  }\r\n  ];\r\n  constructor(private designerUIState: ProcessDesignerUIState) {\r\n    this.customActionList = this.designerUIState.flowFormInfo.customizeActions || [];\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n  clickOK() {\r\n    const selections = [];\r\n    const checkeds: any[] = this.grid.checkeds;\r\n    if (checkeds && checkeds.length > 0) {\r\n      checkeds.forEach(action => {\r\n        const item = new CustomizeAciton(action.data.id, action.data.code, action.data.name);\r\n        item.terminalType = action.data.terminal;\r\n        // item.enable = true;\r\n        item.actualParameters = [];\r\n        if (action.data.actualParameters && action.data.actualParameters.length > 0) {\r\n          for (const p of action.data.actualParameters) {\r\n            const param = {\r\n              Name: p.code,\r\n              Value: p.value,\r\n              ValueText: p.name,\r\n              Tag: 'expression'\r\n            } as ActualParameter;\r\n            item.actualParameters.push(param);\r\n          }\r\n        }\r\n        selections.push(item);\r\n      });\r\n    }\r\n    this.submit.emit(selections);\r\n  }\r\n  clickCancel() {\r\n    this.cancel.emit(true);\r\n  }\r\n}\r\n","import { Component, OnInit, HostBinding, Output, EventEmitter, Input, ViewChild, TemplateRef, ComponentFactoryResolver, Injector, AfterViewInit } from '@angular/core';\r\nimport { CustomizeAciton } from './entities/customize-action.entity';\r\nimport { DatagridComponent } from '@farris/ui-datagrid';\r\nimport { EditorTypes } from '@farris/ui-datagrid-editors';\r\nimport { ProcessDesignerUIState } from '../../app/process-designer.uistate';\r\nimport { ExpressionService, InjectedType } from '@gsp-svc/expression';\r\nimport { BsModalService, ModalOptions } from '@farris/ui-modal';\r\nimport { CustomizeActionListComponent } from './views/customize-action-list/customize-action-list.component';\r\nimport { TypeConverter } from '@farris/ui-property-panel';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { ActualParameter } from '../execute-forms/entities/execute-form.entity';\r\n\r\n@Component({\r\n  selector: 'app-customize-action',\r\n  templateUrl: './customize-action.component.html',\r\n  styleUrls: ['./customize-action.component.scss']\r\n})\r\nexport class CustomizeActionComponent implements OnInit, AfterViewInit {\r\n  @HostBinding('class')\r\n  cls = 'farris-main-area flex-column';\r\n  @Output() closeModal = new EventEmitter<any>();\r\n  @Output() submitModal = new EventEmitter<any>();\r\n\r\n  @Input() editorParams: any = {};\r\n  @ViewChild('iconSelectFooter') modalFooter: TemplateRef<any>;\r\n  modalConfig = {\r\n    title: 'èªå®ä¹å¨ä½',\r\n    width: 800,\r\n    height: 520,\r\n    showButtons: true\r\n  };\r\n  @Input() set value(data: any[]) {\r\n    if (data && data.length > 0) {\r\n      for (const d of data) {\r\n        const action = new CustomizeAciton(d.id, d.code, d.name);\r\n        action.terminalType = d.terminalType;\r\n        action.actualParameters = [];\r\n        if (d.actualParameters && d.actualParameters.length > 0) {\r\n          for (const a of d.actualParameters) {\r\n            const p = new ActualParameter();\r\n            p.Name = a.Name;\r\n            p.Value = a.Value;\r\n            p.ValueText = a.ValueText;\r\n            p.Tag = a.Tag;\r\n            action.actualParameters.push(p);\r\n          }\r\n        }\r\n        this.actions.push(action);\r\n      }\r\n    }\r\n  }\r\n\r\n  @ViewChild('actionlist') actionlist: DatagridComponent;\r\n  @ViewChild('paramlist') paramlist: DatagridComponent;\r\n\r\n  private terminalList = [\r\n    { value: 'app', text: 'ç§»å¨' },\r\n    { value: 'web', text: 'web' },\r\n    { value: 'web,app', text: 'web,ç§»å¨' }\r\n  ];\r\n  actions: CustomizeAciton[] = [];\r\n  curAction: CustomizeAciton;\r\n  columns = [\r\n    { field: 'code', width: 100, title: 'ç¼å·' },\r\n    { field: 'name', width: 100, title: 'åç§°' },\r\n    {\r\n      field: 'terminalType', width: 100, title: 'éç¨ç»ç«¯',\r\n      formatter: {\r\n        type: 'enum',\r\n        options: { valueField: 'value', textField: 'text', data: this.terminalList }\r\n      },\r\n    },\r\n    // {\r\n    //   field: 'enable', width: 100, title: 'æ¯å¦å¯ç¨',\r\n    //   editor: { type: EditorTypes.SWITCH, options: {} },\r\n    //   formatter: { type: 'boolean', options: { trueText: 'æ¯', falseText: 'å¦' } }\r\n    // }\r\n  ];\r\n  paramColumns = [\r\n    { field: 'Name', width: 50, title: 'ç¼å·' },\r\n    { field: 'ValueText', width: 50, title: 'åç§°' },\r\n    {\r\n      field: 'Value', width: 100, title: 'åæ°å¼',\r\n      editor: {\r\n        type: 'input-group',\r\n        options: {\r\n          groupText: '<i class=\"f-icon f-icon-lookup\"></i>',\r\n          editable: false,\r\n          clickHandle: (e) => {\r\n            e.formControl.setValue(e.instance.value ? e.instance.value : '');\r\n            this.showExprHelp(e);\r\n          },\r\n          clear: (e) => {\r\n            console.log('clear', e);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  ];\r\n  constructor(\r\n    private designerState: ProcessDesignerUIState,\r\n    private expr: ExpressionService,\r\n    private resolver: ComponentFactoryResolver,\r\n    private injector: Injector,\r\n    private modalService: BsModalService,\r\n    private message: MessagerService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n\r\n  }\r\n  ngAfterViewInit() {\r\n    this.loadData();\r\n    // this.actionlist.loadData(this.actions);\r\n    // if (this.actions && this.actions.length > 0) {\r\n    //   this.actionlist.selectRow(this.actions[0].id, true);\r\n    // }\r\n  }\r\n  addActions() {\r\n    const compFactory = this.resolver.resolveComponentFactory(CustomizeActionListComponent);\r\n    const compRef = compFactory.create(this.injector);\r\n    const modalConfig: ModalOptions = {\r\n      title: 'èªå®ä¹å¨ä½éæ©',\r\n      width: 800,\r\n      height: 520,\r\n      showButtons: true,\r\n      buttons: compRef.instance.footer\r\n    };\r\n    const dialog = this.modalService.show(compRef, modalConfig);\r\n    compRef.instance.submit.subscribe((data: CustomizeAciton[]) => {\r\n      if (data && data.length > 0) {\r\n        for (const a of data) {\r\n          const index = this.actions.findIndex(act => act.code === a.code);\r\n          if (index > -1) {\r\n            this.actions.splice(index, 1);\r\n          }\r\n          this.actions.push(a);\r\n        }\r\n        this.loadData();\r\n      }\r\n      dialog.close();\r\n    });\r\n    compRef.instance.cancel.subscribe($event => dialog.close());\r\n  }\r\n  delete() {\r\n    this.actionlist.endCellEdit();\r\n    if (this.actionlist.selectedRow && this.actionlist.selectedRow.data) {\r\n      const i = this.actions.findIndex(d => d.code === this.actionlist.selectedRow.data.code);\r\n      this.actions.splice(i, 1);\r\n      this.loadData();\r\n      // this.actionlist.loadData(this.actions);\r\n      // if (this.actions && this.actions.length > 0) {\r\n      //   this.actionlist.selectRow(this.actions[0].id, true);\r\n      // } else {\r\n      //   this.curAction = null;\r\n      // }\r\n    } else {\r\n      this.message.info('è¯·é¦åéä¸­ä¸æ¡éé¡¹ï¼');\r\n    }\r\n  }\r\n\r\n  clickOK() {\r\n    this.actionlist.endCellEdit();\r\n    this.paramlist && this.paramlist.endCellEdit();\r\n\r\n    const object = { value: this.actions, parameters: null };\r\n    this.submitModal.emit(object);\r\n  }\r\n\r\n  clickCancel() {\r\n    this.closeModal.emit();\r\n  }\r\n  loadData() {\r\n    this.actionlist.loadData(this.actions);\r\n    if (this.actions.length > 0 && (!this.actionlist.selectedRow || !this.actionlist.selectedRow.data)) {\r\n      this.actionlist.selectRow(this.actions[0].id, true);\r\n    } else {\r\n      this.curAction = null;\r\n    }\r\n  }\r\n\r\n  selectChanged(data: any) {\r\n    this.curAction = data.data;\r\n  }\r\n\r\n  showExprHelp(e: any) {\r\n    if (this.designerState.schemas.length > 0) {\r\n      for (const schema of this.designerState.schemas) {\r\n        this.expr.addSchema('Schema', schema);\r\n      }\r\n      if (this.designerState.schemas[0].entityTypes && this.designerState.schemas[0].entityTypes.length > 0) {\r\n        const entityType = this.designerState.schemas[0].entityTypes[0];\r\n        this.expr.addInjectedEntity(entityType.name, 'Schema',\r\n          entityType.name, InjectedType.EntityType);\r\n      }\r\n    }\r\n    const context = new Array();\r\n    if (this.designerState.procInstContext.length > 0) {\r\n      for (const variable of this.designerState.procInstContext) {\r\n        context.push(variable);\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (this.designerState.formalParameterContext.length > 0) {\r\n      for (const variable of this.designerState.formalParameterContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (this.designerState.participantContext.length > 0) {\r\n      for (const variable of this.designerState.participantContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (this.designerState.processVariableContext.length > 0) {\r\n      for (const variable of this.designerState.processVariableContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (context.length > 0) {\r\n      for (const v of context) {\r\n        this.expr.addContext(v);\r\n      }\r\n    }\r\n    // if (e.instance.value) {\r\n    this.expr.addExpressionText(e.instance.value);\r\n    // }\r\n    this.expr.buildExpression().then((expressioninfo: string) => {\r\n      e.formControl.setValue(expressioninfo);\r\n      e.instance.cd.detectChanges();\r\n    });\r\n  }\r\n}\r\n\r\nexport class CustomizeActionConverter implements TypeConverter {\r\n  constructor() { }\r\n\r\n  convertTo(data: any[]): string {\r\n    if (data && data.length > 0) {\r\n      return 'ï¼å·²è®¾ç½®ï¼';\r\n    } else {\r\n      return 'ï¼æªè®¾ç½®ï¼';\r\n    }\r\n  }\r\n}\r\n","import { ProcessDeUtil } from '../../domain/process-de-util';\r\n\r\nexport class ProcessVariable {\r\n    id: string;\r\n    name: string;\r\n    documentation: string;\r\n    basicType: string;\r\n    tag: string;\r\n    value: string;\r\n    valueText: string;\r\n    description: string;\r\n    component: any;\r\n\r\n    constructor() {\r\n        this.id = ProcessDeUtil.GenerateElementId();\r\n        this.basicType = 'String';\r\n    }\r\n}\r\n","import { Component, OnInit, TemplateRef, ViewChild, Input, Output, EventEmitter } from '@angular/core';\r\nimport { VariableSetting } from '../../variable-setting';\r\n\r\n@Component({\r\n  selector: 'lib-constant-edit',\r\n  templateUrl: './constant-edit.component.html',\r\n  styleUrls: ['./constant-edit.component.scss']\r\n})\r\nexport class ConstantEditComponent implements OnInit {\r\n\r\n  @ViewChild('footer') footer: TemplateRef<any>;\r\n\r\n  @Output() closeEmitter = new EventEmitter<any>();\r\n  @Output() submitEmitter = new EventEmitter<string>();\r\n  @Input()\r\n  value: string;\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  clickOK() {\r\n    this.submitEmitter.emit(this.value);\r\n  }\r\n\r\n  clickCancel() {\r\n    this.closeEmitter.emit();\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { ILookupHttpService, LookupGridResult, RemoteParams } from '@farris/ui-lookup';\r\nimport { HttpService } from '@ecp-caf/caf-common';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { map } from 'rxjs/operators';\r\n\r\n@Injectable()\r\nexport class ComponentEditLookUpService implements ILookupHttpService {\r\n    constructor(\r\n        private http: HttpService,\r\n    ) {\r\n    }\r\n\r\n    getData(url: string, params?: RemoteParams): Observable<any> {\r\n        const customData = params.customData;\r\n        const index = params.pageIndex || 1;\r\n        const size = params.pageSize || 20;\r\n        const searchValue = params.searchValue;\r\n        if (customData.helpId) {\r\n            let query = `?helpId=${customData.helpId}&pageIndex=${index}&pageSize=${size}`;\r\n            if (searchValue) {\r\n                query += `&searchValue=${searchValue}`;\r\n            }\r\n            url += query;\r\n            return this.http.get(url);\r\n        }\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpService } from '@ecp-caf/caf-common';\r\nimport { Observable } from 'rxjs/Observable';\r\n\r\n@Injectable()\r\nexport class ComponentEditService {\r\n    constructor(\r\n        private http: HttpService,\r\n    ) {\r\n    }\r\n\r\n    getHelpMetaData(helpId: string, su: string): Observable<any> {\r\n        const url = `/api/runtime/lcm/v1.0/rt-metadatas/${helpId}`;\r\n        return this.http.get(url);\r\n    }\r\n}\r\n","import { ProcessDeUtil } from '../../../../domain/process-de-util';\r\nexport class ComponentEntity {\r\n    Id: string;\r\n    Name: string;\r\n    MetadataId: string;\r\n    ComponentType: string;\r\n    MethodCode: string;\r\n    Execution: string;\r\n    AsyncCallBackType: string;\r\n    Time: string;\r\n    isForCompensation: boolean;\r\n    ActualParameters: Array<ActualParameter>;\r\n    constructor() {\r\n        this.Id = ProcessDeUtil.GenerateElementId();\r\n        this.ActualParameters = new Array();\r\n    }\r\n}\r\nexport class ActualParameter {\r\n    Name: string;\r\n    Value: string;\r\n    ValueText?: string;\r\n    Tag?: string;\r\n    fetchValueMode?: any;\r\n    fetchValueSetting?: any;\r\n}\r\n","import { Component, OnInit, ComponentFactoryResolver, Injector, Input, ViewChild, ElementRef, HostBinding, AfterViewInit, NgZone, TemplateRef, EventEmitter, Output } from '@angular/core';\r\nimport { FormGroup, FormBuilder } from '@angular/forms';\r\nimport { ProcessDesignerUIState } from '../../../../app/process-designer.uistate';\r\nimport { ExpressionService, InjectedType } from '@gsp-svc/expression';\r\nimport { SessionService } from '@ecp-caf/caf-common';\r\nimport { BsModalService } from '@farris/ui-modal';\r\nimport { CommonComponentUiRTService, SelectorResult } from '@gsp-cmp/ccmp-ui';\r\nimport { SelectMetadataRTComponent, Metadata4RefDto, MetadataDto } from '@gsp-lcm/metadatart-selector';\r\nimport { GspComponent } from '@gsp-cmp/common-component';\r\nimport { DataColumn, DatagridComponent } from '@farris/ui-datagrid';\r\nimport { of, forkJoin, Observable } from 'rxjs';\r\nimport { RowEditParam } from '@farris/ui-datagrid/lib/types';\r\nimport { EditorTypes } from '@farris/ui-datagrid-editors';\r\nimport { LookupGridComponent, LookupGridResult, ServerSideToken } from '@farris/ui-lookup';\r\nimport { WebServiceParameter, ParameterFetchValueMode, HelpFetchValueSetting } from '@gsp-cmp/wscmp-models';\r\nimport { ComponentEditLookUpService } from './component-edit-lookup.service';\r\nimport { ComponentEditService } from './component-edit.service';\r\nimport { ComponentEntity, ActualParameter } from './component.entity';\r\nimport { ProcessDeUtil } from '../../../../domain/process-de-util';\r\nimport { MessagerService } from '@farris/ui-messager';\r\n\r\n@Component({\r\n  selector: 'lib-component-edit',\r\n  templateUrl: './component-edit.component.html',\r\n  styleUrls: ['./component-edit.component.scss'],\r\n  providers: [\r\n    ComponentEditService,\r\n    { provide: ServerSideToken, useClass: ComponentEditLookUpService }\r\n  ]\r\n})\r\nexport class ComponentEditComponent implements OnInit, AfterViewInit {\r\n  @HostBinding('class')\r\n  cls = 'farris-main-area flex-column';\r\n\r\n  @ViewChild(DatagridComponent) grid: DatagridComponent;\r\n  @ViewChild(LookupGridComponent) lookup: LookupGridComponent;\r\n\r\n  @ViewChild('footer') footer: TemplateRef<any>;\r\n\r\n  @Output() closeEmitter = new EventEmitter<any>();\r\n  @Output() submitEmitter = new EventEmitter<any>();\r\n\r\n  @ViewChild('inputGroup') inputGroup: ElementRef;\r\n  showClearButton = false;\r\n\r\n  private _component: any = new ComponentEntity();\r\n  @Input()\r\n  set component(cmp: ComponentEntity) {\r\n    if (cmp && cmp.MethodCode) {\r\n      this.service.getHelpMetaData(cmp.MetadataId, '').subscribe(re => {\r\n        const c = JSON.parse(re.content);\r\n        const operation = c.operations.find(o => o.code === cmp.MethodCode);\r\n        if (operation) {\r\n          cmp.ActualParameters = cmp.ActualParameters.map(a => {\r\n            const p = operation.parameters.find(i => i.code === a.Name);\r\n            if (p) {\r\n              return {\r\n                ...a,\r\n                fetchValueMode: p.fetchValueMode,\r\n                fetchValueSetting: p.fetchValueSetting\r\n              };\r\n            } else {\r\n              throw new Error('å½åæä»¶æ¹æ³åæ°ä¸ä¸è´ï¼è¯·æ´æ°ï¼');\r\n            }\r\n          });\r\n          this._component = cmp;\r\n        } else {\r\n          throw new Error('å½åæä»¶å·²ä¸å­å¨æ­¤æ¹æ³ï¼è¯·æ´æ°ï¼');\r\n        }\r\n      });\r\n    } else {\r\n      this._component = new ComponentEntity();\r\n    }\r\n  }\r\n  get component() {\r\n    return this._component;\r\n  }\r\n\r\n  curParameter: ActualParameter;\r\n  columns = [\r\n    { field: 'Name', width: 100, title: 'åæ°å' },\r\n    {\r\n      field: 'Value', width: 100, title: 'åæ°å¼',\r\n      editor: {\r\n        type: 'input-group',\r\n        options: {\r\n          groupText: '<i class=\"f-icon f-icon-lookup\"></i>',\r\n          editable: false,\r\n          clickHandle: (e) => {\r\n            e.formControl.setValue(e.instance.value ? e.instance.value : '');\r\n            this.showExprHelp(e);\r\n          },\r\n          clear: (e) => {\r\n            console.log('clear', e);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  ];\r\n\r\n  helpFields: { idField: string, valueField: string; textField: string } = {\r\n    idField: '',\r\n    valueField: '',\r\n    textField: ''\r\n  };\r\n  dataUri = '/api/runtime/wf/v1.0/dtProcDefs/getHelpData';\r\n  helpId;\r\n  su: string;\r\n  helpCols = [];\r\n  displayType = 'List';\r\n  title = '';\r\n  value: any;\r\n\r\n  cell: any;\r\n  constructor(\r\n    private formBuilder: FormBuilder,\r\n    private designerState: ProcessDesignerUIState,\r\n    private expr: ExpressionService,\r\n    private resolver: ComponentFactoryResolver,\r\n    private injector: Injector,\r\n    private sessionSrc: SessionService,\r\n    private modalService: BsModalService,\r\n    private componentService: CommonComponentUiRTService,\r\n    private ngZone: NgZone,\r\n    private service: ComponentEditService,\r\n    private util: ProcessDeUtil,\r\n    private message: MessagerService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n  ngAfterViewInit(): void {\r\n    this.ngZone.runOutsideAngular(() => {\r\n      this.inputGroup.nativeElement.addEventListener(\r\n        'mouseenter',\r\n        this.onMouseEnter.bind(this)\r\n      );\r\n      this.inputGroup.nativeElement.addEventListener(\r\n        'mouseleave',\r\n        this.onMouseLeave.bind(this)\r\n      );\r\n    });\r\n  }\r\n\r\n  onMouseEnter(event) {\r\n    this.showClearButton = true;\r\n    if (this.showClearButton) {\r\n      this.toggleClearIcon(event, true);\r\n    }\r\n  }\r\n  onMouseLeave(event) {\r\n    this.showClearButton = false;\r\n    this.toggleClearIcon(event, false);\r\n  }\r\n\r\n  private toggleClearIcon(event: any, isShow = false) {\r\n    const str = isShow ? '' : 'none';\r\n    const clearIcon = event.target.querySelector('.input-group-clear');\r\n    if (clearIcon) {\r\n      clearIcon.style.display = str;\r\n    }\r\n  }\r\n\r\n\r\n  clickOK() {\r\n    this.grid.endCellEdit();\r\n    if (this.validator()) {\r\n      this.submitEmitter.emit(this.component);\r\n    } else {\r\n      this.message.info('å°æªéæ©æä»¶æ¹æ³!');\r\n    }\r\n  }\r\n\r\n  clickCancel() {\r\n    this.closeEmitter.emit();\r\n  }\r\n\r\n  private validator() {\r\n    if (!this.component.MethodCode || !this.component.MetadataId) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n  beforeEdit = (param: RowEditParam) => {\r\n    const rowData = param.rowData as any;\r\n    switch (rowData.fetchValueMode) {\r\n      case ParameterFetchValueMode.express:\r\n        param.column.editor = {\r\n          type: 'input-group',\r\n          options: {\r\n            groupText: '<i class=\"f-icon f-icon-lookup\"></i>',\r\n            editable: false,\r\n            clickHandle: (e) => {\r\n              e.formControl.setValue(e.instance.value ? e.instance.value : '');\r\n              this.showExprHelp(e);\r\n            },\r\n            clear: (e) => {\r\n              console.log('clear', e);\r\n            }\r\n          }\r\n        };\r\n        break;\r\n      case ParameterFetchValueMode.none:\r\n        param.column.editor = {\r\n          type: 'input-group',\r\n          options: {\r\n            groupText: '<i class=\"f-icon f-icon-lookup\"></i>',\r\n            editable: false,\r\n            clickHandle: (e) => {\r\n              e.formControl.setValue(e.instance.value ? e.instance.value : '');\r\n              this.showExprHelp(e);\r\n            },\r\n            clear: (e) => {\r\n              console.log('clear', e);\r\n            }\r\n          }\r\n        };\r\n        break;\r\n      case ParameterFetchValueMode.const:\r\n        param.column.editor = { type: EditorTypes.TEXTBOX, options: {} };\r\n        break;\r\n      case ParameterFetchValueMode.enum:\r\n        param.column.editor = { type: EditorTypes.TEXTBOX, options: {} };\r\n        break;\r\n      case ParameterFetchValueMode.help:\r\n        param.column.editor = {\r\n          type: 'input-group',\r\n          options: {\r\n            groupText: '<i class=\"f-icon f-icon-lookup\"></i>',\r\n            editable: false,\r\n            clickHandle: (e) => {\r\n              this.cell = e;\r\n              this.helpId = (rowData.fetchValueSetting as HelpFetchValueSetting).helpId;\r\n              this.su = (rowData.fetchValueSetting as HelpFetchValueSetting).serviceUnit;\r\n              this.getHelpInfo().subscribe(re => {\r\n                console.log(re);\r\n                const meta = re;\r\n                const help = JSON.parse(meta.content) as any;\r\n                this.helpCols = help.dataSource.columns;\r\n                this.displayType = help.displayType;\r\n                this.helpFields = {\r\n                  idField: help.idField,\r\n                  valueField: help.valueField,\r\n                  textField: help.textField\r\n                };\r\n                this.lookup.onClear();\r\n                this.lookup.showDialog();\r\n              }, err => {\r\n                  this.message.error('å¸®å©åæ°æ®ä¸å­å¨ï¼è¯·èç³»ç³»ç»ç®¡çåæ¥çåå ï¼');\r\n              });\r\n            },\r\n            clear: (e) => {\r\n              console.log('clear', e);\r\n            }\r\n          }\r\n        };\r\n        break;\r\n    }\r\n    return of(true);\r\n  }\r\n  afterEdit = (rowIndex: number, rowData: any, column?: DataColumn) => {\r\n    return of(true);\r\n  }\r\n\r\n  clear() {\r\n    this.component = new ComponentEntity();\r\n  }\r\n  selectComponent() {\r\n    const compFactory = this.resolver.resolveComponentFactory(SelectMetadataRTComponent);\r\n    const compRef = compFactory.create(this.injector);\r\n    compRef.instance.typeList = 'WebServiceComponent'; // ç®ååªè½æ ¹æ®åæ°æ®ç±»åè¿æ»¤ï¼åç»­æ·»å æ ç­¾è¿æ»¤\r\n    compRef.instance.selectedMetadata.subscribe(($event: Metadata4RefDto) => {\r\n      try {\r\n        const meta: MetadataDto = $event.metadata;\r\n        this.openComponentSelectorNew(meta.id, this.sessionSrc.getUserSessionId());\r\n      } catch {\r\n        console.log('$event', $event);\r\n        throw new Error('è·åè§£ææä»¶åºé' + $event);\r\n      }\r\n    });\r\n\r\n    const modalConfig = {\r\n      title: 'æä»¶éæ©',\r\n      width: 980,\r\n      height: 548,\r\n      showButtons: false\r\n    };\r\n    const dialog = this.modalService.show(compRef, modalConfig);\r\n    compRef.instance.closeModalEmitter.subscribe($event => dialog.close());\r\n  }\r\n  private openComponentSelectorNew(metadataId: string, sessionId: string) {\r\n    this.componentService.openSelector(metadataId, sessionId).subscribe(\r\n      (selectorResult: SelectorResult) => {\r\n        selectorResult.confirmEvent.subscribe(\r\n          (result: GspComponent) => {\r\n            if (result) {\r\n              this.component.Name = result.name;\r\n              this.component.MetadataId = result.id;\r\n              this.component.MethodCode = result.operations[0].code;\r\n              // this.component.methodName = result.operations[0].name;\r\n              this.component.ActualParameters = [];\r\n\r\n              if (result.operations[0].parameters && result.operations[0].parameters.length > 0) {\r\n                this.component.ActualParameters = result.operations[0].parameters\r\n                  .map((p: WebServiceParameter) => (\r\n                    {\r\n                      Name: p.code, Value: '', Tag: p.fetchValueMode.indexOf('express,none') > -1 ? 'expression' : 'constant',\r\n                      fetchValueMode: p.fetchValueMode,\r\n                      fetchValueSetting: p.fetchValueSetting\r\n                    }));\r\n              }\r\n            }\r\n          });\r\n      });\r\n  }\r\n  showExprHelp(e: any) {\r\n    if (this.designerState.schemas.length > 0) {\r\n      for (const schema of this.designerState.schemas) {\r\n        this.expr.addSchema('Schema', schema);\r\n      }\r\n      if (this.designerState.schemas[0].entityTypes && this.designerState.schemas[0].entityTypes.length > 0) {\r\n        const entityType = this.designerState.schemas[0].entityTypes[0];\r\n        this.expr.addInjectedEntity(entityType.name, 'Schema',\r\n          entityType.name, InjectedType.EntityType);\r\n      }\r\n    }\r\n    const context = new Array();\r\n    if (this.designerState.procInstContext.length > 0) {\r\n      for (const variable of this.designerState.procInstContext) {\r\n        context.push(variable);\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (this.designerState.formalParameterContext.length > 0) {\r\n      for (const variable of this.designerState.formalParameterContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (this.designerState.participantContext.length > 0) {\r\n      for (const variable of this.designerState.participantContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (this.designerState.processVariableContext.length > 0) {\r\n      for (const variable of this.designerState.processVariableContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (context.length > 0) {\r\n      for (const v of context) {\r\n        this.expr.addContext(v);\r\n      }\r\n    }\r\n    this.expr.addExpressionText(e.instance.value);\r\n    this.expr.buildExpression().then((d: string) => {\r\n        e.formControl.setValue(d);\r\n        e.instance.cd.detectChanges();\r\n    });\r\n  }\r\n\r\n  private getHelpInfo(): Observable<any> {\r\n    return this.service.getHelpMetaData(this.helpId, this.su);\r\n  }\r\n\r\n  dictPicking = () => {\r\n    return of({\r\n      showDialog: true, data: {\r\n        helpId: this.helpId\r\n      }\r\n    });\r\n  }\r\n  dictPicked = (rowData) => {\r\n    if (this.cell) {\r\n      console.log(rowData);\r\n      this.cell.formControl.setValue(this.util.getValue(rowData, this.helpFields.valueField));\r\n      this.cell.instance.cd.detectChanges();\r\n      return of(true);\r\n    }\r\n  }\r\n}\r\n","import { Component, OnInit, HostBinding, EventEmitter, Output, Input, ViewChild, TemplateRef, Injector, ComponentFactoryResolver } from '@angular/core';\r\nimport { TypeConverter } from '@farris/ui-property-panel';\r\nimport { ProcessVariable } from './process-variable.entity';\r\nimport { EditorTypes } from '@farris/ui-datagrid-editors';\r\nimport { DatagridComponent } from '@farris/ui-datagrid';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { BsModalService } from '@farris/ui-modal';\r\nimport { ConstantEditComponent } from '../variable-setting/views/constant-edit/constant-edit.component';\r\nimport { ProcessDesignerUIState } from '../../app/process-designer.uistate';\r\nimport { ExprEditMode, ExpressionService, InjectedType } from '@gsp-svc/expression';\r\nimport { ComponentEditComponent } from '../variable-setting/views/component-edit/component-edit.component';\r\nimport { RowEditParam, DataColumn } from '@farris/ui-datagrid/lib/types';\r\nimport { of } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'lib-process-variables',\r\n  templateUrl: './process-variables.component.html',\r\n  styleUrls: ['./process-variables.component.scss']\r\n})\r\nexport class ProcessVariablesComponent implements OnInit {\r\n  @HostBinding('class')\r\n  cls = 'farris-main-area flex-column';\r\n\r\n  @Input() variableSetting = false;\r\n  @Output() closeModal = new EventEmitter<any>();\r\n  @Output() submitModal = new EventEmitter<any>();\r\n  @Output() variableSetEmitter = new EventEmitter<any>();\r\n\r\n  @Input() value: Array<ProcessVariable> = new Array();\r\n  @Input() editorParams: any = {};\r\n  @ViewChild('iconSelectFooter') modalFooter: TemplateRef<any>;\r\n  @ViewChild('grid') grid: DatagridComponent;\r\n\r\n  private basicTypes = [\r\n    { value: 'String', text: 'å­ç¬¦' },\r\n    { value: 'Integer', text: 'æ´å½¢' },\r\n    { value: 'Decimal', text: 'å°æ°' },\r\n    { value: 'Boolean', text: 'å¸å°' },\r\n    // { value: 'DateTime', text: 'æ¥æ' }\r\n  ];\r\n\r\n  private tags = [\r\n    { value: 'constant', text: 'å¸¸é' },\r\n    { value: 'expression', text: 'è¡¨è¾¾å¼' },\r\n    { value: 'component', text: 'æä»¶' }\r\n  ];\r\n\r\n  columns = [\r\n    {\r\n      field: 'name', width: 80, title: 'åéç¼å·', sortable: true,\r\n      editor: { type: EditorTypes.TEXTBOX, options: {} },\r\n      validators: [\r\n        { type: 'required', messager: 'å¿å¡«' }\r\n      ]\r\n    },\r\n    {\r\n      field: 'documentation', width: 80, title: 'åéåç§°', sortable: true,\r\n      editor: { type: EditorTypes.TEXTBOX, options: {} },\r\n      validators: [\r\n        { type: 'required', messager: 'å¿å¡«' }\r\n      ]\r\n    },\r\n    {\r\n      field: 'basicType', width: 60, title: 'åéç±»å', sortable: true,\r\n      formatter: {\r\n        type: 'enum',\r\n        options: { valueField: 'value', textField: 'text', data: this.basicTypes }\r\n      },\r\n      editor: {\r\n        type: EditorTypes.COMBOLIST,\r\n        options: { valueField: 'value', textField: 'text', data: this.basicTypes, idField: 'value', panelHeight: 'auto', showClear: false }\r\n      },\r\n      validators: [\r\n        { type: 'required', messager: 'å¿å¡«' }\r\n      ]\r\n    }, {\r\n      field: 'description', width: 100, title: 'æè¿°', showTips: true,\r\n      editor: { type: EditorTypes.TEXTBOX, options: {} },\r\n    }, {\r\n      field: 'tag', width: 60, title: 'åå§å¼ç±»å', sortable: true,\r\n      formatter: {\r\n        type: 'enum',\r\n        options: { valueField: 'value', textField: 'text', data: this.tags }\r\n      },\r\n      editor: {\r\n        type: EditorTypes.COMBOLIST,\r\n        options: {\r\n          valueField: 'value', textField: 'text', data: this.tags, idField: 'value', panelHeight: 'auto',\r\n          selectChange: (e) => {\r\n            this.value = this.value.map(v => {\r\n              if (v.id === e.rowId) {\r\n                v.value = null;\r\n                v.valueText = null;\r\n                if (v.component) {\r\n                  v.component = null;\r\n                }\r\n                return v;\r\n              } else {\r\n                return v;\r\n              }\r\n            });\r\n          },\r\n          clear: (e) => {\r\n            this.value = this.value.map(v => {\r\n              if (v.id === e.rowId) {\r\n                v.value = null;\r\n                v.valueText = null;\r\n                if (v.component) {\r\n                  v.component = null;\r\n                }\r\n                return v;\r\n              } else {\r\n                return v;\r\n              }\r\n            });\r\n          }\r\n        }\r\n      }\r\n    }, {\r\n      field: 'valueText', width: 120, title: 'åå§å¼', showTips: true,\r\n      editor: { type: EditorTypes.TEXTBOX, options: {} }\r\n    }\r\n  ];\r\n\r\n  modalConfig = {\r\n    title: 'æµç¨åé',\r\n    width: 1070,\r\n    height: 510,\r\n    showButtons: true\r\n  };\r\n\r\n  constructor(\r\n    private message: MessagerService,\r\n    private resolver: ComponentFactoryResolver,\r\n    private injector: Injector,\r\n    private modalService: BsModalService,\r\n    private uistate: ProcessDesignerUIState,\r\n    private expr: ExpressionService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    if (this.variableSetting) {\r\n      this.columns = this.columns.filter(c => c.field !== 'tag'\r\n        && c.field !== 'valueText' && c.field !== 'description'\r\n      );\r\n    }\r\n  }\r\n\r\n  add() {\r\n    const variable = new ProcessVariable();\r\n    this.value = this.value.concat([variable]);\r\n  }\r\n\r\n  delete() {\r\n    this.grid.endCellEdit();\r\n    const selected = this.grid.selectedRow;\r\n    if (!selected) {\r\n      this.message.info('å°æªéä¸­æµç¨åéï¼');\r\n      return;\r\n    }\r\n    this.value = this.value.filter(v => v.id !== selected.data.id);\r\n  }\r\n\r\n  clickOK() {\r\n    if (this.variableSetting) {\r\n      const selecteds = this.grid.checkeds;\r\n      if (selecteds.length > 0) {\r\n        this.variableSetEmitter.emit(selecteds);\r\n      } else {\r\n        this.message.info('å°æªéä¸­æµç¨åéï¼');\r\n      }\r\n    } else {\r\n      this.grid.endCellEdit();\r\n      if (this.validator()) {\r\n        const object = { value: this.value, parameters: null };\r\n        this.submitModal.emit(object);\r\n      }\r\n    }\r\n  }\r\n\r\n  clickCancel() {\r\n    this.closeModal.emit();\r\n  }\r\n  beforeEdit = (param: RowEditParam) => {\r\n    const rowData = param.rowData as any;\r\n    const column = param.column;\r\n    if (column.field === 'valueText') {\r\n      if (!(rowData as ProcessVariable).tag) {\r\n        return of(false);\r\n      }\r\n      if ((rowData as ProcessVariable).tag === this.tags[0].value) {\r\n        param.column.editor = { type: EditorTypes.TEXTBOX, options: {} };\r\n      } else {\r\n        param.column.editor = {\r\n          type: 'input-group',\r\n          options: {\r\n            groupText: '<i class=\"f-icon f-icon-lookup\"></i>',\r\n            editable: false,\r\n            showClear: false,\r\n            clickHandle: (e) => {\r\n              e.formControl.setValue(e.instance.value ? e.instance.value : '');\r\n              this.valueEdit(e);\r\n            },\r\n            clear: (e) => {\r\n              console.log('clear', e);\r\n            }\r\n          }\r\n        };\r\n      }\r\n    }\r\n    return of(true);\r\n  }\r\n\r\n  endEdit(data: any) {\r\n    if (data.column.field === 'valueText' && data.rowData.tag === this.tags[0].value) {\r\n      data.rowData.value = data.rowData.valueText;\r\n    }\r\n  }\r\n  valueEdit(e: any) {\r\n    const rowdata: ProcessVariable = e.rowData;\r\n    switch (rowdata.tag) {\r\n      case this.tags[0].value:\r\n        this.editConstant(e);\r\n        break;\r\n      case this.tags[1].value:\r\n        this.editExpression(e);\r\n        break;\r\n      case this.tags[2].value:\r\n        this.editComponent(e);\r\n        break;\r\n    }\r\n  }\r\n  private editConstant(e: any) {\r\n    const data: ProcessVariable = e.rowData;\r\n    let dialog: any;\r\n    const compFactory = this.resolver.resolveComponentFactory(ConstantEditComponent);\r\n    const compRef = compFactory.create(this.injector);\r\n    compRef.instance.value = data.value;\r\n    compRef.instance.submitEmitter.subscribe((re: string) => {\r\n      e.formControl.setValue(re);\r\n      e.instance.cd.detectChanges();\r\n      data.value = re;\r\n      dialog.close();\r\n    });\r\n    compRef.instance.closeEmitter.subscribe(re => {\r\n      dialog.close();\r\n    });\r\n    const modalConfig = {\r\n      title: 'å¸¸é',\r\n      width: 340,\r\n      height: 280,\r\n      showButtons: true,\r\n      buttons: compRef.instance.footer\r\n    };\r\n    dialog = this.modalService.show(compRef, modalConfig);\r\n  }\r\n\r\n  private editExpression(e: any) {\r\n    const data: ProcessVariable = e.rowData;\r\n    if (this.uistate.schemas.length > 0) {\r\n      for (const schema of this.uistate.schemas) {\r\n        this.expr.addSchema('Schema', schema);\r\n      }\r\n      if (this.uistate.schemas[0].entityTypes && this.uistate.schemas[0].entityTypes.length > 0) {\r\n        const entityType = this.uistate.schemas[0].entityTypes[0];\r\n        this.expr.addInjectedEntity(entityType.name, 'Schema',\r\n          entityType.name, InjectedType.EntityType);\r\n      }\r\n    }\r\n    const context = new Array();\r\n    if (this.uistate.procInstContext.length > 0) {\r\n      for (const variable of this.uistate.procInstContext) {\r\n        context.push(variable);\r\n      }\r\n    }\r\n    if (this.uistate.formalParameterContext.length > 0) {\r\n      for (const variable of this.uistate.formalParameterContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (this.uistate.participantContext.length > 0) {\r\n      for (const variable of this.uistate.participantContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (this.uistate.processVariableContext.length > 0) {\r\n      for (const variable of this.uistate.processVariableContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (context.length > 0) {\r\n      for (const v of context) {\r\n        this.expr.addContext(v);\r\n      }\r\n    }\r\n    this.expr.setEditPattern(ExprEditMode.Advanced); // è¡¨è¾¾å¼å±ç°æ¨¡å¼ï¼é»è®¤é«çº§ç\r\n    this.expr.addExpressionText(data.value);\r\n    this.expr.buildExpression().then((re: string) => {\r\n      e.formControl.setValue(re);\r\n      e.instance.cd.detectChanges();\r\n      data.value = re;\r\n    });\r\n  }\r\n\r\n  private editComponent(e: any) {\r\n    const data: ProcessVariable = e.rowData;\r\n    let dialog: any;\r\n    const compFactory = this.resolver.resolveComponentFactory(ComponentEditComponent);\r\n    const compRef = compFactory.create(this.injector);\r\n    compRef.instance.component = data.component;\r\n    compRef.instance.submitEmitter.subscribe((re: any) => {\r\n      e.formControl.setValue(re.Name + '-' + re.MethodCode);\r\n      e.instance.cd.detectChanges();\r\n      data.value = re.Id;\r\n      data.component = re;\r\n      dialog.close();\r\n    });\r\n    compRef.instance.closeEmitter.subscribe(re => {\r\n      dialog.close();\r\n    });\r\n    const modalConfig = {\r\n      title: 'æä»¶',\r\n      width: 800,\r\n      height: 515,\r\n      showButtons: true,\r\n      buttons: compRef.instance.footer\r\n    };\r\n    dialog = this.modalService.show(compRef, modalConfig);\r\n  }\r\n\r\n  private validator() {\r\n    for (const item of this.value) {\r\n      if (!item.name) {\r\n        this.message.warning('åéç¼å·ä¸åè®¸ä¸ºç©ºï¼');\r\n        return false;\r\n      }\r\n      if (!item.documentation) {\r\n        this.message.warning('åéåç§°ä¸åè®¸ä¸ºç©ºï¼');\r\n        return false;\r\n      }\r\n      if (!this.IsMatchVariableNameRules(item.name)) {\r\n        this.message.warning('åéç¼å·åªè½åå«å­æ¯ãæ°å­åä¸åçº¿ï¼ä¸ä¸è½ä»¥æ°å­å¼å¤´ï¼');\r\n        return false;\r\n      }\r\n    }\r\n    if (this.value.length > 1) {\r\n      for (let i = 0; i < this.value.length; i++) {\r\n        const code1 = this.value[i].name;\r\n        for (let j = i + 1; j < this.value.length; j++) {\r\n          const code2 = this.value[j].name;\r\n\r\n          if (code1 === code2) {\r\n            this.message.warning(`æµç¨åéç¼å·ä¸åè®¸éå¤ï¼`);\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n  private IsMatchVariableNameRules(str: string) {\r\n    const Regx = /^[a-zA-Z_][a-zA-Z_0-9]{0,}/;\r\n    if (Regx.test(str)) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n}\r\n\r\nexport class ProcessVariablesConverter implements TypeConverter {\r\n  constructor() { }\r\n\r\n  convertTo(data: any[]): string {\r\n    if (data && data.length > 0) {\r\n      return 'ï¼å·²è®¾ç½®ï¼';\r\n    } else {\r\n      return 'ï¼æªè®¾ç½®ï¼';\r\n    }\r\n  }\r\n}\r\n","import { ProcessDeUtil } from '../../domain/process-de-util';\r\n\r\nexport class TimeLimitInfo {\r\n    tag: string;\r\n\r\n    /**\r\n     * æ¯å¦å¯ç¨\r\n     */\r\n    enable: boolean;\r\n\r\n    /**\r\n     * éå®æ¶é¿\r\n     */\r\n    dueTime: string;\r\n\r\n    /**\r\n     * æ¶é´åä½\r\n     */\r\n    timeUnit: string;\r\n\r\n    expireOperations: Array<ExpireOperation>;\r\n\r\n    constructor() {\r\n        this.tag = 'constant';\r\n        this.enable = false;\r\n        this.timeUnit = 'day';\r\n        this.expireOperations = new Array();\r\n    }\r\n}\r\n\r\nexport class ExpireOperation {\r\n    id: string;\r\n    /**\r\n     * æéæ§å¶ç±»å\r\n     */\r\n    durationType: string;\r\n\r\n    /**\r\n     * ä»»å¡æé\r\n     */\r\n    timeDuration: number;\r\n\r\n    /**\r\n     * æ¶é´åä½\r\n     */\r\n    timeUnit: string;\r\n\r\n    /**\r\n     * æä½ç±»ååç§°\r\n     */\r\n    operationTypeName: string;\r\n\r\n    constructor() {\r\n        this.id = ProcessDeUtil.GenerateElementId();\r\n        this.durationType = 'BeforeDuration';\r\n        this.timeDuration = 0;\r\n        this.timeUnit = 'day';\r\n        // é»è®¤æä½ç±»åæ¯åéé¢è­¦æ¶æ¯\r\n        this.operationTypeName = 'SendMessageExpireOperation';\r\n    }\r\n}\r\n\r\n/**\r\n * åéé¢è­¦ä¿¡æ¯æ¹å¼\r\n */\r\nexport class SendMessage extends ExpireOperation{\r\n    /**\r\n     * é¢è­¦ä¿¡æ¯åå®¹\r\n     */\r\n    message: string;\r\n\r\n    /**\r\n     * åéé¢è­¦ä¿¡æ¯ç±»å\r\n     */\r\n    sendType: string;\r\n\r\n    /**\r\n     * é¢è­¦ä¿¡æ¯ä¸»é¢\r\n     */\r\n    subject: string;\r\n\r\n    /**\r\n     * æ¶æ¯æ¥æ¶äºº\r\n     * ç¨æ·IDs\r\n     */\r\n    receiver?: string;\r\n\r\n    /**\r\n     * æ¶æ¯æ¥æ¶äººæ¾ç¤º\r\n     */\r\n    receiverText?: string;\r\n\r\n    /**\r\n     * å¯ç¨å¾ªç¯é¢è­¦\r\n     */\r\n    cycleEnable: boolean;\r\n\r\n    /**\r\n     * å¾ªç¯é¢è­¦æ¶é´é´é\r\n     */\r\n    cycleTime: string;\r\n\r\n    /**\r\n     * å¾ªç¯é¢è­¦æ¶é´é´éåä½\r\n     */\r\n    cycleTimeUnit: string;\r\n\r\n    constructor(location) {\r\n      super();\r\n      this.cycleEnable = false;\r\n      this.cycleTimeUnit = 'day';\r\n      this.receiver = location === 'activity' ? 'workItemParticipant' : 'procInstCreator';\r\n      this.receiverText = location === 'activity' ? 'å½åèç¹åçäºº' : 'æµç¨åèµ·äºº';\r\n      this.subject = 'è¶æ¶é¢è­¦';\r\n      this.message = location === 'activity' ? 'æ¨æä¸æ¡å¾åæ¶æ¯å³å°è¶æ¶ã' : 'æ¨æä¸æ¡æ¶æ¯å³å°è¶æ¶';\r\n    }\r\n}\r\n\r\nexport class AutoHandle extends ExpireOperation {\r\n  /**\r\n   * åçç±»åï¼éè¿é©³åå¦å³ç­ç­\r\n   */\r\n  autoHandleType: string;\r\n\r\n  /**\r\n   * åçæè§\r\n   */\r\n  message: string;\r\n\r\n  constructor(type: string) {\r\n    super();\r\n    this.autoHandleType = type;\r\n    this.message = 'åæ';\r\n  }\r\n}\r\n","import { Component, OnInit, Injector, ViewChild, TemplateRef, Input, Output, EventEmitter } from '@angular/core';\r\nimport {ExpireOperation, SendMessage} from '../time-limit-control.entity';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { ProcessDesignerUIState } from '../../../app/process-designer.uistate';\r\n\r\n@Component({\r\n  selector: 'lib-send-message-operation',\r\n  templateUrl: './send-message-operation.component.html',\r\n  styleUrls: ['./send-message-operation.component.scss']\r\n})\r\nexport class SendMessageOperationComponent implements OnInit {\r\n\r\n  @ViewChild('footer') footer: TemplateRef<any>;\r\n  @Input()\r\n  set value(info: SendMessage) {\r\n    this.operation = Object.assign({}, info);\r\n    if (this.operation.sendType === undefined) {\r\n      const sendMessage = new SendMessage(this.location);\r\n      this.operation.cycleEnable = sendMessage.cycleEnable;\r\n      this.operation.cycleTimeUnit = sendMessage.cycleTimeUnit;\r\n      this.operation.receiver = sendMessage.receiver;\r\n      this.operation.subject = sendMessage.subject;\r\n      this.operation.message = sendMessage.message;\r\n    }\r\n    if (this.operation.receiver && this.operation.receiver.length > 0) {\r\n      let array = this.operation.receiver.split(',');\r\n      if (array.indexOf('workItemParticipant') > -1) {\r\n        this.receiverVari = 'workItemParticipant';\r\n        this.activityReceiverVar += 'workItemParticipant,';\r\n      }\r\n      if (array.indexOf('procInstCreator') > -1) {\r\n        this.receiverVari = 'procInstCreator';\r\n        this.activityReceiverVar += 'procInstCreator,';\r\n      }\r\n      if (array.indexOf('preActExecutors') > -1){\r\n        this.activityReceiverVar += 'preActExecutors,';\r\n      }\r\n      if(this.activityReceiverVar.length > 0){\r\n        this.activityReceiverVar = this.activityReceiverVar.substring(0,this.activityReceiverVar.length-1);\r\n      }\r\n      if (array.length > 0) {\r\n        array = array.filter(a => a !== 'procInstCreator');\r\n        this.bindingData.id = '';\r\n        for (const r of array) {\r\n          this.bindingData.id += r + ',';\r\n        }\r\n        if (this.bindingData.id) {\r\n          this.bindingData.id = this.bindingData.id.substring(0, this.bindingData.id.length - 1);\r\n        }\r\n      }\r\n    }\r\n    if (this.operation.receiverText && this.operation.receiverText.length > 0) {\r\n      let array = this.operation.receiverText.split(',');\r\n      if (array.length > 0) {\r\n        array = array.filter(a => a !== 'æµç¨åèµ·äºº');\r\n        this.bindingData.name = '';\r\n        for (const r of array) {\r\n          this.bindingData.name += r + ',';\r\n        }\r\n        if (this.bindingData.name) {\r\n          this.bindingData.name = this.bindingData.name.substring(0, this.bindingData.name.length - 1);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  get value() {\r\n    return this.operation;\r\n  }\r\n\r\n  // operation: ExpireOperation = new ExpireOperation();\r\n  operation: SendMessage = new SendMessage('activity');\r\n  @Output() closeEmitter = new EventEmitter<any>();\r\n  @Output() submitEmitter = new EventEmitter<ExpireOperation>();\r\n\r\n  typeGroup = this.uistate.messageChannels.map(m => ({ value: m.code, name: m.name }));\r\n\r\n  receiverVariables = [\r\n    { value: 'procInstCreator', name: 'æµç¨åèµ·äºº' }\r\n  ];\r\n  activityReceiverVariables = [\r\n    { value: 'workItemParticipant', name: 'å½åèç¹åçäºº' },\r\n    { value: 'procInstCreator', name: 'æµç¨åèµ·äºº' },\r\n    { value: 'preActExecutors', name: 'ä¸ä¸èç¹åçäºº' }\r\n  ];\r\n\r\n  placeholder = '';\r\n  placeholder2 = '';\r\n\r\n  parser = (val: string | number) => {\r\n    // console.log(val);\r\n    return Number(val);\r\n  }\r\n\r\n  timeUnitCollection = [\r\n    { value: 'day', text: 'å¤©' },\r\n    { value: 'hour', text: 'æ¶' },\r\n    { value: 'minute', text: 'å' }\r\n  ];\r\n\r\n  location: 'activity' | 'process' = 'activity';\r\n\r\n  receiverVari: string;\r\n\r\n  activityReceiverVar: string = '';\r\n\r\n  bindingData: { id?, name?} = {};\r\n\r\n  constructor(\r\n    private injector: Injector,\r\n    private message: MessagerService,\r\n    private uistate: ProcessDesignerUIState\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  clickOK() {\r\n    this.operation.cycleTime += '';\r\n    if (this.location === 'process') {\r\n      this.setReceiver();\r\n    }\r\n    if(this.location === 'activity') {\r\n      this.setActivityReceiver()\r\n    }\r\n    if (this.validator()) {\r\n      this.submitEmitter.emit(this.operation);\r\n    }\r\n  }\r\n\r\n  clickCancel() {\r\n    this.closeEmitter.emit();\r\n  }\r\n\r\n  clear() {\r\n    this.bindingData = {};\r\n  }\r\n\r\n  private setReceiver() {\r\n    let receiver = '';\r\n    let receiverText = '';\r\n    if (this.receiverVari) {\r\n      receiver += this.receiverVari + ',';\r\n      const array = this.receiverVari.split(',');\r\n      if (array.length > 0) {\r\n        for (const a of array) {\r\n          const t = this.receiverVariables.find(v => v.value === a).name;\r\n          receiverText += t + ',';\r\n        }\r\n      }\r\n    }\r\n    if (this.bindingData.id) {\r\n      receiver += this.bindingData.id + ',';\r\n      receiverText += this.bindingData.name + ',';\r\n    }\r\n    if (receiver) {\r\n      receiver = receiver.substring(0, receiver.length - 1);\r\n    }\r\n    if (receiverText) {\r\n      receiverText = receiverText.substring(0, receiverText.length - 1);\r\n    }\r\n    this.operation.receiver = receiver;\r\n    this.operation.receiverText = receiverText;\r\n  }\r\n\r\n  setActivityReceiver(){\r\n    let receiver = '';\r\n    if (this.activityReceiverVar) {\r\n      receiver += this.activityReceiverVar + ',';\r\n    }\r\n    if (receiver) {\r\n      receiver = receiver.substring(0, receiver.length - 1);\r\n    }\r\n    this.operation.receiver = receiver;\r\n  }\r\n  private validator(): boolean {\r\n    if (!this.operation.sendType) {\r\n      this.message.info('åéæ¹å¼ä¸åè®¸ä¸ºç©ºï¼');\r\n      return false;\r\n    }\r\n    if (!this.operation.subject) {\r\n      this.message.info('æ¶æ¯ä¸»é¢ä¸åè®¸ä¸ºç©ºï¼');\r\n      return false;\r\n    }\r\n    if (!this.operation.message) {\r\n      this.message.info('æ¶æ¯åå®¹ä¸åè®¸ä¸ºç©ºï¼');\r\n      return false;\r\n    }\r\n    if (!this.operation.receiver) {\r\n      this.message.info('æ¥æ¶äººä¸åè®¸ä¸ºç©ºï¼');\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n}\r\n","import { Component, EventEmitter, Input, OnInit, Output, TemplateRef, ViewChild } from '@angular/core';\r\nimport { AutoHandle, ExpireOperation } from \"../time-limit-control.entity\";\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { ProcessDesignerUIState } from '../../../app/process-designer.uistate';\r\n\r\n@Component({\r\n  selector: 'lib-auto-handle-operation',\r\n  templateUrl: './auto-handle-operation.component.html',\r\n  styleUrls: ['./auto-handle-operation.component.css']\r\n})\r\nexport class AutoHandleOperationComponent implements OnInit {\r\n\r\n  @ViewChild('footer') footer: TemplateRef<any>;\r\n  @Input()\r\n  set value(info: AutoHandle) {\r\n    this.operation = Object.assign({}, info);\r\n    if (this.operation.autoHandleType === undefined) {\r\n      const autoHandle = new AutoHandle(this.autoHandleType[0].value);\r\n      this.operation.autoHandleType = autoHandle.autoHandleType;\r\n      this.operation.message = autoHandle.message;\r\n    }\r\n  }\r\n\r\n  get value() {\r\n    return this.operation;\r\n  }\r\n\r\n  placeholder = '';\r\n  operation: AutoHandle = new AutoHandle('Pass');\r\n  @Output() submitEmitter = new EventEmitter<ExpireOperation>();\r\n  @Output() closeEmitter = new EventEmitter<any>();\r\n\r\n  autoHandleType = [\r\n    // { value: 'autoPass', text: 'èªå¨éè¿' },\r\n    // { value: 'autoBack', text: 'èªå¨é©³å' }\r\n  ];\r\n\r\n  constructor(\r\n    private message: MessagerService,\r\n    public uiState: ProcessDesignerUIState,\r\n  ) {\r\n    for(const item of this.uiState.propertyData.ApprovalItems) {\r\n      this.autoHandleType.push({value: item.Value,text: item.Text});\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  clickOK() {\r\n    if (this.validator()) {\r\n      this.submitEmitter.emit(this.operation);\r\n    }\r\n  }\r\n\r\n  clickCancel() {\r\n    this.closeEmitter.emit();\r\n  }\r\n\r\n  private validator(): boolean {\r\n    if (!this.operation.message) {\r\n      this.message.info('èªå¨åçæè§ä¸åè®¸ä¸ºç©ºï¼');\r\n      return false;\r\n    }\r\n    if (!this.operation.autoHandleType) {\r\n      this.message.info('èªå¨åçä¸åè®¸ä¸ºç©ºï¼');\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n}\r\n","import { Component, OnInit, HostBinding, Output, EventEmitter, Input, ViewChild, TemplateRef, Injector, ComponentFactoryResolver } from '@angular/core';\r\nimport { TypeConverter } from '@farris/ui-property-panel';\r\nimport { BsModalService } from '@farris/ui-modal';\r\nimport { SendMessageOperationComponent } from './send-message-operation/send-message-operation.component';\r\nimport { AutoHandleOperationComponent } from \"./auto-handle-operation/auto-handle-operation.component\";\r\nimport {TimeLimitInfo, ExpireOperation, SendMessage, AutoHandle} from './time-limit-control.entity';\r\nimport { EditorTypes } from '@farris/ui-datagrid-editors';\r\nimport { DatagridComponent } from '@farris/ui-datagrid';\r\nimport { MessagerService } from '@farris/ui-messager';\r\n\r\n@Component({\r\n  selector: 'lib-time-limit-control',\r\n  templateUrl: './time-limit-control.component.html',\r\n  styleUrls: ['./time-limit-control.component.scss']\r\n})\r\nexport class TimeLimitControlComponent implements OnInit {\r\n  @HostBinding('class')\r\n  cls = 'farris-main-area flex-column';\r\n\r\n  @Output() closeModal = new EventEmitter<any>();\r\n  @Output() submitModal = new EventEmitter<any>();\r\n\r\n\r\n  @Input() set value(v: TimeLimitInfo) {\r\n    if (v) {\r\n      this.timeLimitInfo = v;\r\n    } else {\r\n      this.timeLimitInfo = new TimeLimitInfo();\r\n    }\r\n    // å¼å®¹åå²æ°æ®ä¸­çæä½ç±»å\r\n    for (const operation of this.timeLimitInfo.expireOperations) {\r\n      if (operation.operationTypeName === undefined) {\r\n        operation.operationTypeName = 'SendMessageExpireOperation';\r\n      }\r\n    }\r\n  }\r\n  @Input() editorParams: any = {};\r\n  @ViewChild('iconSelectFooter') modalFooter: TemplateRef<any>;\r\n  @ViewChild('cell') cell: TemplateRef<any>;\r\n  @ViewChild('grid') grid: DatagridComponent;\r\n\r\n  modalConfig = {\r\n    title: 'è¶æ¶æä½',\r\n    width: 580,\r\n    height: 460,\r\n    showButtons: true\r\n  };\r\n\r\n  timeLimitInfo: TimeLimitInfo = new TimeLimitInfo();\r\n\r\n  tagCollection = [\r\n    { value: 'constant', text: 'åºå®å¼' },\r\n    { value: 'scope', text: 'æ¶é´èå´' }\r\n  ];\r\n\r\n  timeUnitCollection = [\r\n    { value: 'day', text: 'å¤©' },\r\n    { value: 'hour', text: 'æ¶' },\r\n    { value: 'minute', text: 'å' }\r\n  ];\r\n\r\n  durationTypeCollection = [\r\n    { value: 'BeforeDuration', text: 'å°æä¹å' },\r\n    { value: 'OnDuration', text: 'å°ææ¶' },\r\n    { value: 'AfterDuration', text: 'å°æä¹å' }\r\n  ];\r\n\r\n  activityOperationTypeName = [\r\n    { value : 'SendMessageExpireOperation', text: 'è¶æ¶é¢è­¦'},\r\n    { value : 'AutoHandleExpireOperation', text : 'èªå¨åç' }\r\n  ];\r\n\r\n  processOperationTypeName = [\r\n    { value : 'SendMessageExpireOperation', text: 'è¶æ¶é¢è­¦'}\r\n  ];\r\n\r\n  operationTypeName = [];\r\n\r\n  timeScopeCollection = [\r\n    {value:'curDay',name:'å½å¤©'}\r\n  ]\r\n  timeScopeValue = this.timeScopeCollection[0].value\r\n  cols = [];\r\n\r\n  location: 'activity' | 'process' = 'activity';\r\n\r\n  parser = (val: string | number) => {\r\n    // console.log(val);\r\n    return Number(val);\r\n  }\r\n\r\n  durationTypeChange = (data) => {\r\n    if (data && data.value && data.value.value === this.durationTypeCollection[1].value) {\r\n      const operation = this.timeLimitInfo.expireOperations.find(e => e.id === data.rowData.id);\r\n      operation.timeDuration = 0;\r\n    }\r\n  }\r\n  constructor(\r\n    private resolver: ComponentFactoryResolver,\r\n    private injector: Injector,\r\n    private modalService: BsModalService,\r\n    private message: MessagerService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.location = this.editorParams.location;\r\n    if (this.location === 'activity') {\r\n      this.operationTypeName = this.activityOperationTypeName;\r\n    } else {\r\n      this.operationTypeName = this.processOperationTypeName;\r\n    }\r\n    this.cols = [\r\n      {\r\n        field: 'durationType', width: 80, title: 'æéç±»å',\r\n        formatter: {\r\n          type: 'enum',\r\n          options: { valueField: 'value', textField: 'text', data: this.durationTypeCollection }\r\n        },\r\n        editor: {\r\n          type: EditorTypes.COMBOLIST,\r\n          options: {\r\n            valueField: 'value', textField: 'text', data: this.durationTypeCollection, idField: 'value', panelHeight: 'auto',\r\n            valueChange: this.durationTypeChange, showClear: false\r\n          }\r\n        },\r\n        validators: [\r\n          { type: 'required', messager: 'å¿å¡«' }\r\n        ]\r\n      },\r\n      {\r\n        field: 'timeDuration', width: 60, title: 'æ¶é¿',\r\n        editor: {\r\n          type: EditorTypes.NUMBERBOX, options: { min: 0},\r\n        },\r\n        validators: [\r\n          { type: 'required', messager: 'å¿å¡«' }\r\n        ]\r\n      },\r\n      {\r\n        field: 'timeUnit', width: 60, title: 'åä½',\r\n        formatter: {\r\n          type: 'enum',\r\n          options: { valueField: 'value', textField: 'text', data: this.timeUnitCollection }\r\n        },\r\n        editor: {\r\n          type: EditorTypes.COMBOLIST,\r\n          options: { valueField: 'value', textField: 'text', data: this.timeUnitCollection, idField: 'value', panelHeight: 'auto' }\r\n        },\r\n        validators: [\r\n          { type: 'required', messager: 'å¿å¡«' }\r\n        ]\r\n      },\r\n      {\r\n        field: 'operationTypeName', width: 100, title: 'æä½ç±»ååç§°',\r\n        formatter: {\r\n          type: 'enum',\r\n          options: { valueField: 'value', textField: 'text', data: this.operationTypeName }\r\n        },\r\n        editor: {\r\n          type: EditorTypes.COMBOLIST,\r\n          options: { valueField: 'value', textField: 'text', data: this.operationTypeName, idField: 'value', panelHeight: 'auto' }\r\n        },\r\n        validators: [\r\n          { type: 'required', messager: 'å¿å¡«' }\r\n        ]\r\n      },\r\n      {\r\n        field: 'sendType', width: 80, title: 'æä½', template: this.cell,\r\n        validators: [\r\n          { type: 'required', messager: 'å¿å¡«' }\r\n        ]\r\n      }\r\n    ];\r\n  }\r\n\r\n  // beforeEdit = (param: RowEditParam) => {\r\n  //   const rowData = param.rowData as any;\r\n  //   if(rowData.durationType === 'OnDuration'){\r\n  //     if(param.column.field === 'timeUnit'){\r\n  //       rowData.timeUnit = 'day'\r\n  //       param.column.editor = {};\r\n  //     } else if(param.column.field === 'timeDuration'){\r\n  //       rowData.timeDuration = 0;\r\n  //       param.column.editor = {};\r\n  //     } else {\r\n  //       const fieldValue = this.cols.find(col => col.field === param.column.field);\r\n  //       param.column.editor = fieldValue.editor;\r\n  //     }\r\n  //   }\r\n  //   return of(true);\r\n  // }\r\n\r\n  clickOK() {\r\n    this.grid.endCellEdit();\r\n    this.timeLimitInfo.dueTime += '';\r\n    if (this.validator()) {\r\n      const object = { value: this.timeLimitInfo, parameters: null };\r\n      this.submitModal.emit(object);\r\n    }\r\n  }\r\n\r\n  clickCancel() {\r\n    this.closeModal.emit();\r\n  }\r\n\r\n  private validator(): boolean {\r\n    if (this.timeLimitInfo.expireOperations\r\n      && this.timeLimitInfo.expireOperations.length > 0) {\r\n      for (const e of this.timeLimitInfo.expireOperations) {\r\n        if (e.operationTypeName === 'SendMessageExpireOperation') {\r\n          const a = <SendMessage>e;\r\n          if (!a.sendType) {\r\n            this.message.info('è¯·è®¾ç½®è¶æ¶æä½ï¼');\r\n            return false;\r\n          }\r\n        }\r\n        if (e.operationTypeName === 'AutoHandleExpireOperation') {\r\n          const a = <AutoHandle>e;\r\n          if (!a.autoHandleType) {\r\n            this.message.info('è¯·è®¾ç½®èªå¨åçç±»åï¼');\r\n            return false;\r\n          }\r\n          if (!a.message) {\r\n            this.message.info('è¯·è®¾ç½®èªå¨åçæè§ï¼');\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  add() {\r\n    let operation = new ExpireOperation();\r\n    this.timeLimitInfo.expireOperations.push(operation);\r\n    this.grid.loadData(this.timeLimitInfo.expireOperations);\r\n    this.grid.selectRow(operation.id);\r\n  }\r\n\r\n  remove() {\r\n    this.grid.endCellEdit();\r\n    const curItem = this.grid.selectedRow;\r\n    if (!curItem) {\r\n      this.message.info('å°æªéä¸­é¢è­¦æä½ï¼');\r\n      return;\r\n    }\r\n    const i = this.timeLimitInfo.expireOperations.findIndex(a => a.id === curItem.data.id);\r\n    if (i > -1) {\r\n      this.timeLimitInfo.expireOperations.splice(i, 1);\r\n      this.grid.loadData(this.timeLimitInfo.expireOperations);\r\n    }\r\n  }\r\n\r\n  editOperation(ctx: any){\r\n    this.grid.endCellEdit();\r\n    if (ctx.rowData.operationTypeName === 'SendMessageExpireOperation'){\r\n      this.sendMassageOperation(ctx);\r\n    }\r\n    if (ctx.rowData.operationTypeName === 'AutoHandleExpireOperation'){\r\n      this.message.confirm(\"ä¸ä¸èç¹æ¯ç±å½ååçäººææ´¾çè¯ï¼å½åèç¹ä¸æ¯æä»»å¡èªå¨åç\").subscribe(re => re === true ? this.autoHandleOperation(ctx) : null);\r\n    }\r\n  }\r\n  sendMassageOperation(ctx: any) {\r\n    let dialog: any;\r\n    const compFactory = this.resolver.resolveComponentFactory(SendMessageOperationComponent);\r\n    const compRef = compFactory.create(this.injector);\r\n    compRef.instance.location = this.location;\r\n    compRef.instance.value = Object.assign({}, ctx.rowData);\r\n    compRef.instance.submitEmitter.subscribe((re: ExpireOperation) => {\r\n      let operation = this.timeLimitInfo.expireOperations.find(o => o.id === re.id);\r\n      operation = Object.assign(operation, re);\r\n      dialog.close();\r\n    });\r\n    compRef.instance.closeEmitter.subscribe((re: any) => {\r\n      dialog.close();\r\n    });\r\n    const modalConfig = {\r\n      title: 'é¢è­¦æ¶æ¯',\r\n      width: 500,\r\n      height: this.location === 'activity' ? 390 : 460,\r\n      buttons: compRef.instance.footer,\r\n      showButtons: true\r\n    };\r\n    dialog = this.modalService.show(compRef, modalConfig);\r\n  }\r\n\r\n  autoHandleOperation(ctx: any) {\r\n    let dialog: any;\r\n    const compFactory = this.resolver.resolveComponentFactory(AutoHandleOperationComponent);\r\n    const compRef = compFactory.create(this.injector);\r\n    compRef.instance.value = Object.assign({}, ctx.rowData);\r\n    compRef.instance.submitEmitter.subscribe((re: ExpireOperation) => {\r\n      let operation = this.timeLimitInfo.expireOperations.find(o => o.id === re.id);\r\n      operation = Object.assign(operation, re);\r\n      dialog.close();\r\n    });\r\n    compRef.instance.closeEmitter.subscribe((re: any) => {\r\n      dialog.close();\r\n    });\r\n    const modalConfig = {\r\n      title: 'èªå¨åç',\r\n      width: 500,\r\n      height: this.location === 'activity' ? 390 : 460,\r\n      buttons: compRef.instance.footer,\r\n      showButtons: true\r\n    };\r\n    dialog = this.modalService.show(compRef, modalConfig);\r\n  }\r\n\r\n  tagSelectChange(data){\r\n    if(data.data.value === 'constant'){\r\n      this.timeLimitInfo.timeUnit = \"day\";\r\n    }else if(data.data.value === 'scope'){\r\n      this.timeLimitInfo.timeUnit = '';\r\n      this.timeLimitInfo.dueTime = this.timeScopeValue;\r\n    }\r\n  }\r\n  changeTimeScope(data){\r\n    this.timeScopeValue = data;\r\n    this.timeLimitInfo.dueTime = this.timeScopeValue;\r\n  }\r\n}\r\n\r\nexport class TimeLimitControlConverter implements TypeConverter {\r\n  constructor() { }\r\n\r\n  convertTo(data: any): string {\r\n    if (data && data.enable) {\r\n      return 'ï¼å·²è®¾ç½®ï¼';\r\n    } else {\r\n      return 'ï¼æªè®¾ç½®ï¼';\r\n    }\r\n  }\r\n}\r\n","import { ProcessDeUtil } from '../../domain/process-de-util';\r\n\r\nexport class MessageNotice {\r\n    id: string;\r\n    /**\r\n     * æ¶æ¯åå®¹\r\n     */\r\n    content: string;\r\n\r\n    /**\r\n     * æ¶æ¯åéæ¶æº\r\n     */\r\n    sendTime: string;\r\n\r\n    /**\r\n     * æ¶æ¯åéæ¹å¼\r\n     */\r\n    sendType: string;\r\n\r\n    /**\r\n     * æ¶æ¯ä¸»é¢\r\n     */\r\n    subject: string;\r\n\r\n    /**\r\n     * æ¶æ¯æ¥æ¶äºº\r\n     */\r\n    receiver: string;\r\n\r\n    /**\r\n     * æ¶æ¯æ¥æ¶äººæ¾ç¤º\r\n     */\r\n    receiverText: string;\r\n\r\n    constructor() {\r\n        this.id = ProcessDeUtil.GenerateElementId();\r\n        this.subject = 'æ¶æ¯éç¥';\r\n        // this.sendType = 'email';\r\n        this.content = '{\"expr\":\"\\'æ¨æä¸æ¡æ¶æ¯éç¥ã\\'\",\"sexpr\":\"\"}';\r\n    }\r\n}\r\nexport const processSendTime = [\r\n    { value: 'PROCESSINSTANCE_COMPLETED', text: 'æµç¨å®æ' },\r\n    { value: 'PROCESSINSTANCE_ABORTED', text: 'æµç¨ç»æ­¢' },\r\n    { value: 'PROCESSINSTANCE_ROLLBACK', text: 'æµç¨é©³å' }\r\n];\r\n\r\nexport const activitySendTime = [\r\n    { value: 'WORKITEM_CREATED', text: 'ä»»å¡åå»º' },\r\n    { value: 'ACTIVITY_COMPLETED', text: 'æ´»å¨å®æ' },\r\n    { value: 'ACTIVITY_ABORTED', text: 'æ´»å¨ç»æ­¢' },\r\n];\r\n\r\nexport const sendTypes = [\r\n    { value: 'email', name: 'é®ä»¶' },\r\n    { value: 'sms', name: 'ç­ä¿¡' },\r\n    { value: 'cloudplus', name: 'äº+' }\r\n];\r\n\r\n","import { Component, OnInit, Input, ViewChild, TemplateRef, Output, EventEmitter } from '@angular/core';\r\nimport { MessageNotice, activitySendTime, sendTypes, processSendTime } from '../message-notice';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { ProcessDesignerUIState } from '../../../app/process-designer.uistate';\r\nimport { ExpressionService, InjectedType} from \"@gsp-svc/expression\";\r\n\r\n@Component({\r\n  selector: 'lib-message-notice-edit',\r\n  templateUrl: './message-notice-edit.component.html',\r\n  styleUrls: ['./message-notice-edit.component.scss']\r\n})\r\nexport class MessageNoticeEditComponent implements OnInit {\r\n\r\n  groupIcon2 = '<i class=\"f-icon f-icon-lookup\"></i>';\r\n  exprAble = false;\r\n  @ViewChild('footer') footer: TemplateRef<any>;\r\n\r\n  @Output() closeEmitter = new EventEmitter<any>();\r\n  @Output() submitEmitter = new EventEmitter<MessageNotice>();\r\n\r\n  private _location: 'activity' | 'process' | 'messageActivity' = 'activity';\r\n  @Input()\r\n  set location(l: 'activity' | 'process' | 'messageActivity') {\r\n    this._location = l;\r\n    if (this.location !== 'activity') {\r\n      this.receiverVariables = [{ value: 'procInstCreator', name: 'æµç¨åèµ·äºº' }];\r\n    }\r\n  }\r\n\r\n  get location() {\r\n    return this._location;\r\n  }\r\n\r\n  messageNotice = new MessageNotice();\r\n  @Input()\r\n  set value(m: MessageNotice) {\r\n    this.messageNotice = Object.assign({}, m) ;\r\n    if (this.messageNotice.receiver && this.messageNotice.receiver.length > 0) {\r\n      let array = this.messageNotice.receiver.split(',');\r\n      if (array.indexOf('workItemParticipant') > -1) {\r\n        this.receiverVari = 'workItemParticipant';\r\n      } else if (array.indexOf('procInstCreator') > -1) {\r\n        this.receiverVari = 'procInstCreator';\r\n      }\r\n      if (array.length > 0) {\r\n        array = array.filter(a => (a !== 'workItemParticipant' && a !== 'procInstCreator'));\r\n        this.bindingData.id = '';\r\n        for (const r of array) {\r\n          this.bindingData.id += r + ',';\r\n        }\r\n        if (this.bindingData.id) {\r\n          this.bindingData.id = this.bindingData.id.substring(0, this.bindingData.id.length - 1);\r\n        }\r\n      }\r\n    }\r\n    if (this.messageNotice.receiverText && this.messageNotice.receiverText.length > 0) {\r\n      let array = this.messageNotice.receiverText.split(',');\r\n      if (array.length > 0) {\r\n        array = array.filter(a => (a !== 'ä»»å¡åçäºº' && a !== 'æµç¨åèµ·äºº'));\r\n        this.bindingData.name = '';\r\n        for (const r of array) {\r\n          this.bindingData.name += r + ',';\r\n        }\r\n        if (this.bindingData.name) {\r\n          this.bindingData.name = this.bindingData.name.substring(0, this.bindingData.name.length - 1);\r\n        }\r\n      }\r\n    }\r\n    this.exprAble = this.messageNotice.subject.charAt(0) === '{';\r\n  }\r\n\r\n  get value() {\r\n    return this.messageNotice;\r\n  }\r\n\r\n  typeGroup = this.uistate.messageChannels.map(m => ({ value: m.code, name: m.name }));\r\n\r\n  receiverVariables = [\r\n    { value: 'workItemParticipant', name: 'ä»»å¡åçäºº' }\r\n  ];\r\n\r\n  sendTimes = [];\r\n\r\n  receiverVari: string;\r\n\r\n  bindingData: { id?, name?} = {};\r\n  constructor(\r\n    private message: MessagerService,\r\n    private uistate: ProcessDesignerUIState,\r\n    private expr: ExpressionService,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    if (this.location === 'activity') {\r\n      this.sendTimes = activitySendTime;\r\n    } else {\r\n      this.sendTimes = processSendTime;\r\n    }\r\n  }\r\n\r\n  clickOK() {\r\n    this.setReceiver();\r\n    if (this.validator()) {\r\n      this.submitEmitter.emit(this.messageNotice);\r\n    }\r\n  }\r\n  clickCancel() {\r\n    this.closeEmitter.emit();\r\n  }\r\n\r\n  sendTimeChange(data: any) {\r\n    if (data.data.value === activitySendTime[0].value) {\r\n      this.receiverVari = 'workItemParticipant';\r\n      this.clear();\r\n    }\r\n  }\r\n  usersSelect(data) {\r\n    console.log(data);\r\n  }\r\n  changeValue(data) {\r\n    console.log(data);\r\n  }\r\n  clear() {\r\n    this.bindingData = {};\r\n  }\r\n  private setReceiver() {\r\n    let receiver = '';\r\n    let receiverText = '';\r\n    if (this.receiverVari) {\r\n      receiver += this.receiverVari + ',';\r\n      const array = this.receiverVari.split(',');\r\n      if (array.length > 0) {\r\n        for (const a of array) {\r\n          const t = this.receiverVariables.find(v => v.value === a).name;\r\n          receiverText += t + ',';\r\n        }\r\n      }\r\n    }\r\n    if (this.bindingData.id) {\r\n      receiver += this.bindingData.id + ',';\r\n      receiverText += this.bindingData.name + ',';\r\n    }\r\n    if (receiver) {\r\n      receiver = receiver.substring(0, receiver.length - 1);\r\n    }\r\n    if (receiverText) {\r\n      receiverText = receiverText.substring(0, receiverText.length - 1);\r\n    }\r\n    this.messageNotice.receiver = receiver;\r\n    this.messageNotice.receiverText = receiverText;\r\n  }\r\n  private validator(): boolean {\r\n    if (!this.messageNotice.sendType) {\r\n      this.message.info('åéæ¹å¼ä¸åè®¸ä¸ºç©ºï¼');\r\n      return false;\r\n    }\r\n    if (this.location !== 'messageActivity' && !this.messageNotice.sendTime) {\r\n      this.message.info('åéæ¶æºä¸åè®¸ä¸ºç©ºï¼');\r\n      return false;\r\n    }\r\n    if (!this.messageNotice.subject) {\r\n      this.message.info('æ¶æ¯ä¸»é¢ä¸åè®¸ä¸ºç©ºï¼');\r\n      return false;\r\n    }\r\n    if (!this.messageNotice.content) {\r\n      this.message.info('æ¶æ¯åå®¹ä¸åè®¸ä¸ºç©ºï¼');\r\n      return false;\r\n    }\r\n    if (!this.messageNotice.receiver) {\r\n      this.message.info('æ¥æ¶äººä¸åè®¸ä¸ºç©ºï¼');\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  titleExpr(data: any){\r\n    this.showTitleHelp(data);\r\n  }\r\n  contentExpr(data: any){\r\n    this.showContentHelp(data);\r\n  }\r\n\r\n  showContentHelp(data: string){\r\n    this.showExpr();\r\n    if (this.messageNotice.content && this.messageNotice.content.length > 0) {\r\n      this.expr.addExpressionText(this.messageNotice.content);\r\n    } else {\r\n      this.expr.addExpressionText('');\r\n    }\r\n    this.expr.buildExpression().then((expressionInfo: string) => {\r\n      this.messageNotice.content = expressionInfo;\r\n    });\r\n  }\r\n\r\n  showTitleHelp(data: string) {\r\n    if(this.messageNotice.subject && this.messageNotice.subject.charAt(0) !== '{'){\r\n      this.messageNotice.subject = '';\r\n    }\r\n    this.showExpr();\r\n    if (this.messageNotice.subject && this.messageNotice.subject.length > 0) {\r\n      this.expr.addExpressionText(this.messageNotice.subject);\r\n    } else {\r\n      this.expr.addExpressionText('');\r\n    }\r\n    this.expr.buildExpression().then((expressionInfo: string) => {\r\n      this.messageNotice.subject = expressionInfo;\r\n    });\r\n  }\r\n  showExpr(){\r\n    if (this.uistate.schemas.length > 0) {\r\n      for (const schema of this.uistate.schemas) {\r\n        // this.expr.addCommonObject(co);\r\n        this.expr.addSchema('Schema', schema);\r\n      }\r\n      if (this.uistate.schemas[0].entityTypes && this.uistate.schemas[0].entityTypes.length > 0) {\r\n        const entityType = this.uistate.schemas[0].entityTypes[0];\r\n        this.expr.addInjectedEntity(entityType.name, 'Schema',\r\n          entityType.name, InjectedType.EntityType);\r\n      }\r\n    }\r\n    const context = new Array();\r\n    if (this.uistate.procInstContext.length > 0) {\r\n      for (const variable of this.uistate.procInstContext) {\r\n        context.push(variable);\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (this.uistate.processVariableContext.length > 0) {\r\n      for (const variable of this.uistate.processVariableContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (context.length > 0) {\r\n      for (const v of context) {\r\n        this.expr.addContext(v);\r\n      }\r\n    }\r\n  }\r\n  tranExpr(){\r\n    this.messageNotice.subject = '';\r\n  }\r\n}\r\n","import { Component, OnInit, HostBinding, EventEmitter, Output, Input, ViewChild, TemplateRef, ComponentFactoryResolver, Injector } from '@angular/core';\r\nimport { TypeConverter } from '@farris/ui-property-panel';\r\nimport { activitySendTime, MessageNotice, sendTypes, processSendTime } from './message-notice';\r\nimport { BsModalService } from '@farris/ui-modal';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { MessageNoticeEditComponent } from './message-notice-edit/message-notice-edit.component';\r\nimport { DatagridComponent } from '@farris/ui-datagrid';\r\nimport { ProcessDeUtil } from '../../domain/process-de-util';\r\nimport { ProcessDesignerUIState } from '../../app/process-designer.uistate';\r\n\r\n@Component({\r\n  selector: 'lib-message-notice',\r\n  templateUrl: './message-notice.component.html',\r\n  styleUrls: ['./message-notice.component.scss']\r\n})\r\nexport class MessageNoticeComponent implements OnInit {\r\n  @HostBinding('class')\r\n  cls = 'farris-main-area flex-column';\r\n\r\n  @Output() closeModal = new EventEmitter<any>();\r\n  @Output() submitModal = new EventEmitter<any>();\r\n\r\n  @Input()\r\n  set value(notices: any[]) {\r\n    if (notices && notices.length > 0) {\r\n      this.messageNotices = notices.map(n => ({\r\n        id: ProcessDeUtil.GenerateElementId(),\r\n        content: n.content,\r\n        sendTime: n.sendTime,\r\n        sendType: n.sendType,\r\n        subject: n.subject,\r\n        receiver: n.receiver,\r\n        receiverText: n.receiverText\r\n      }));\r\n    }\r\n  }\r\n  @Input() editorParams: any = {};\r\n  @ViewChild('iconSelectFooter') modalFooter: TemplateRef<any>;\r\n  @ViewChild('grid') grid: DatagridComponent;\r\n\r\n  modalConfig = {\r\n    title: 'æ¶æ¯éç¥',\r\n    width: 800,\r\n    height: 515,\r\n    showButtons: true\r\n  };\r\n\r\n  messageNotices: Array<MessageNotice> = new Array();\r\n  columns = [];\r\n\r\n  location: 'activity' | 'process' | 'messageActivity' = 'activity';\r\n\r\n  constructor(\r\n    private resolver: ComponentFactoryResolver,\r\n    private injector: Injector,\r\n    private modalService: BsModalService,\r\n    private message: MessagerService,\r\n    private uistate: ProcessDesignerUIState\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.location = this.editorParams.location;\r\n    this.columns = [\r\n      {\r\n        field: 'subject', width: 100, title: 'æ¶æ¯ä¸»é¢',\r\n      }, {\r\n        field: 'content', width: 150, title: 'æ¶æ¯åå®¹', showTips: true,\r\n      }, {\r\n        field: 'sendTime', width: 100, title: 'åéæ¶æº',\r\n        formatter: {\r\n          type: 'enum',\r\n          options: { valueField: 'value', textField: 'text', data: this.location === 'process' ? processSendTime : activitySendTime }\r\n        },\r\n      }, {\r\n        field: 'sendType', width: 100, title: 'åéæ¹å¼',\r\n        formatter: {\r\n          type: 'enum',\r\n          options: { valueField: 'value', textField: 'name', data: this.uistate.messageChannels.map(m => ({ value: m.code, name: m.name })) }\r\n        },\r\n      }, {\r\n        field: 'receiverText', width: 120, title: 'æ¶æ¯æ¥æ¶äºº', showTips: true\r\n      }];\r\n    if (this.location === 'messageActivity') {\r\n      this.columns = this.columns.filter(c => c.field !== 'sendTime');\r\n    }\r\n  }\r\n\r\n  add() {\r\n    let dialog: any;\r\n    const compFactory = this.resolver.resolveComponentFactory(MessageNoticeEditComponent);\r\n    const compRef = compFactory.create(this.injector);\r\n    compRef.instance.location = this.location;\r\n    const messageNotice = new MessageNotice();\r\n    if (this.location === 'activity') {\r\n      messageNotice.sendTime = 'WORKITEM_CREATED';\r\n      messageNotice.receiver = 'workItemParticipant';\r\n      messageNotice.receiverText = 'ä»»å¡åçäºº';\r\n    } else if (this.location === 'process') {\r\n      messageNotice.sendTime = 'PROCESSINSTANCE_COMPLETED';\r\n      messageNotice.receiver = 'procInstCreator';\r\n      messageNotice.receiverText = 'æµç¨åèµ·äºº';\r\n    } else if (this.location === 'messageActivity') {\r\n      messageNotice.receiver = 'procInstCreator';\r\n      messageNotice.receiverText = 'æµç¨åèµ·äºº';\r\n    }\r\n    compRef.instance.value = messageNotice;\r\n    compRef.instance.submitEmitter.subscribe((re: MessageNotice) => {\r\n      this.messageNotices = this.messageNotices.concat([re]);\r\n      dialog.close();\r\n    });\r\n    compRef.instance.closeEmitter.subscribe(re => {\r\n      dialog.close();\r\n    });\r\n    const modalConfig = {\r\n      title: 'æ¶æ¯éç¥',\r\n      width: 490,\r\n      height: this.location === 'messageActivity' ? 450 : 490,\r\n      showButtons: true,\r\n      buttons: compRef.instance.footer\r\n    };\r\n    dialog = this.modalService.show(compRef, modalConfig);\r\n  }\r\n  edit() {\r\n    if (!this.grid.selectedRow) {\r\n      this.message.info('å°æªéä¸­æ¶æ¯éç¥ï¼');\r\n      return;\r\n    }\r\n    let dialog: any;\r\n    const compFactory = this.resolver.resolveComponentFactory(MessageNoticeEditComponent);\r\n    const compRef = compFactory.create(this.injector);\r\n    compRef.instance.location = this.location;\r\n    compRef.instance.value = this.grid.selectedRow.data;\r\n    compRef.instance.submitEmitter.subscribe((re: MessageNotice) => {\r\n      this.messageNotices = this.messageNotices.map(m => {\r\n        if (m.id === re.id) {\r\n          return re;\r\n        }\r\n        return m;\r\n      });\r\n      dialog.close();\r\n    });\r\n    compRef.instance.closeEmitter.subscribe(re => {\r\n      dialog.close();\r\n    });\r\n    const modalConfig = {\r\n      title: 'æ¶æ¯éç¥',\r\n      width: 490,\r\n      height: this.location === 'messageActivity' ? 450 : 490,\r\n      showButtons: true,\r\n      buttons: compRef.instance.footer\r\n    };\r\n    dialog = this.modalService.show(compRef, modalConfig);\r\n  }\r\n  delete() {\r\n    const selected = this.grid.selectedRow;\r\n    if (!selected) {\r\n      this.message.info('å°æªéä¸­æ¶æ¯éç¥ï¼');\r\n      return;\r\n    }\r\n    this.messageNotices = this.messageNotices.filter(m => m.id !== selected.id);\r\n  }\r\n  clickOK() {\r\n    const object = { value: this.messageNotices, parameters: null };\r\n    this.submitModal.emit(object);\r\n  }\r\n  clickCancel() {\r\n    this.closeModal.emit();\r\n  }\r\n}\r\n\r\nexport class MessageNoticeConverter implements TypeConverter {\r\n  constructor() { }\r\n\r\n  convertTo(data: any[]): string {\r\n    if (data && data.length > 0) {\r\n      return 'ï¼å·²è®¾ç½®ï¼';\r\n    } else {\r\n      return 'ï¼æªè®¾ç½®ï¼';\r\n    }\r\n  }\r\n}\r\n","import { Component, Input, OnInit, Output, ViewChild, TemplateRef, EventEmitter } from '@angular/core';\r\nimport { TypeConverter } from '@farris/ui-property-panel';\r\nimport { ProcessDesignerUIState } from '../../app/process-designer.uistate';\r\nimport { ProcExtendProperty } from './extend-property';\r\n\r\n@Component({\r\n  selector: 'lib-extend-property',\r\n  templateUrl: './extend-property.component.html',\r\n  styleUrls: ['./extend-property.component.css']\r\n})\r\nexport class ExtendPropertyComponent implements OnInit {\r\n\r\n  @Output() closeModal = new EventEmitter<any>();\r\n  @Output() submitModal = new EventEmitter<any>();\r\n  @ViewChild('iconSelectFooter') modalFooter: TemplateRef<any>;\r\n\r\n  @Input()\r\n  set value(property: any[]) {\r\n    if (property && property.length > 0) {\r\n      this.procExtendProperty = property.map(p => ({\r\n        id: p.id,\r\n        code: p.code,\r\n        parentId: p.parentId,\r\n        sortOrder: p.sortOrder,\r\n        propertyNote: p.propertyNote,\r\n        propertyTitle: p.propertyTitle,\r\n        propertyLocation: p.propertyLocation,\r\n        propertyType: p.propertyType,\r\n        enumValue: p.enumValue,\r\n        bizDefKey: p.bizDefKey,\r\n        bizCategoryId: p.bizCategoryId,\r\n        startMode: p.startMode,\r\n        value: p.value,\r\n      }));\r\n    }\r\n  }\r\n  modalConfig = {\r\n    title: 'æ©å±å±æ§',\r\n    width: 430,\r\n    height: 370,\r\n    showButtons: true\r\n  };\r\n  procExtendProperty: Array<ProcExtendProperty> = new Array();\r\n  booleanlist = [\r\n    { key: 'æ¯', value: 'true' },\r\n    { key: 'å¦', value: 'false' }\r\n  ];\r\n  extendPropertyList = {\r\n    key: '',\r\n    value: ''\r\n  };\r\n  constructor(private uiState: ProcessDesignerUIState) {\r\n  }\r\n\r\n  setProperty(obj: any) {\r\n    this.uiState.propertyData = obj.propertyData;\r\n    this.uiState.propertyConfig = obj.propertyConfig;\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  clickOK() {\r\n    const value = this.procExtendProperty;\r\n    const object = { value, parameters: null };\r\n    this.submitModal.emit(object);\r\n  }\r\n\r\n  cancel() {\r\n    this.closeModal.emit();\r\n  }\r\n}\r\nexport class ExtendPropertyConverter implements TypeConverter {\r\n\r\n  constructor() { }\r\n\r\n  convertTo(data: any[]): string {\r\n    if (data && data instanceof Array && data.some(item => item.value)) {\r\n      return 'ï¼å·²è®¾ç½®ï¼';\r\n    }\r\n    return 'ï¼æªè®¾ç½®ï¼';\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { ProcessDesignerUIState } from './process-designer.uistate';\r\nimport { PropertyEntity, ElementPropertyConfig } from '@farris/ui-property-panel';\r\nimport { ResourceKeys } from '../model/resourceKeys';\r\nimport { EntryFormEditorComponent, FlowFormConverter } from '../views/entryForm/entry-form-editor.component';\r\nimport {\r\n  ActivityComponentComponent,\r\n  ActivityComponentConverter\r\n} from '../views/activity-component/activity-component.component';\r\nimport { ExecuteFormsComponent, ExecuteFormsConverter } from '../views/execute-forms/execute-forms.component';\r\nimport { TitleExpressionComponent, TitleExpressionConverter } from '../views/title-expression/title-expression.component';\r\nimport { CustomizeActionComponent, CustomizeActionConverter } from '../views/customize-action/customize-action.component';\r\nimport {\r\n  ProcessVariablesComponent,\r\n  ProcessVariablesConverter\r\n} from '../views/process-variables/process-variables.component';\r\nimport {\r\n  TimeLimitControlComponent,\r\n  TimeLimitControlConverter\r\n} from '../views/time-limit-control/time-limit-control.component';\r\nimport { MessageNoticeComponent, MessageNoticeConverter } from '../views/message-notice/message-notice.component';\r\nimport { ExtendPropertyComponent, ExtendPropertyConverter } from '../views/extend-property/extend-property.component';\r\n\r\n@Injectable()\r\n\r\nexport class BpmnProcessViewModel {\r\n  constructor(private uiState: ProcessDesignerUIState) {\r\n\r\n  }\r\n\r\n  setProcessProperty(obj: any) {\r\n    // if (obj.propertyData.EntryForm) {\r\n    //     obj.propertyData.EntryForm = this.uiState.flowFormInfo.flowForm;\r\n    // }\r\n    this.uiState.propertyData = obj.propertyData;\r\n    this.uiState.ProcessVariables = this.uiState.propertyData[ResourceKeys.processVariables];\r\n    this.uiState.propertyConfig = this.setProcessConfig(obj.propertyConfig);\r\n  }\r\n\r\n  setProcessConfig(obj: any[]): ElementPropertyConfig[] {\r\n    const propertyConfig: ElementPropertyConfig[] = [];\r\n    if (obj) {\r\n      obj.forEach((element: ElementPropertyConfig) => {\r\n        this.setProcessEntity(element.properties);\r\n        propertyConfig.push(element);\r\n      });\r\n    }\r\n    return propertyConfig;\r\n  }\r\n\r\n  private setProcessEntity(obj: PropertyEntity[]) {\r\n    if (obj.length > 0) {\r\n      obj.forEach((item: PropertyEntity) => {\r\n        switch (item.propertyID) {\r\n          case ResourceKeys.EntryForm: // æµç¨åç±»\r\n            item.editor = EntryFormEditorComponent;\r\n            item.converter = new FlowFormConverter();\r\n            // item.editorParams = {\r\n            //     flowForms: [this.uiState.flowFormInfo.flowForm]\r\n            // };\r\n            break;\r\n          case ResourceKeys.wf_Component:\r\n            item.editor = ActivityComponentComponent;\r\n            item.converter = new ActivityComponentConverter();\r\n            item.editorParams = {\r\n              location: 'process'\r\n            };\r\n            break;\r\n          case ResourceKeys.wf_ExecuteForms_PC:\r\n            item.editor = ExecuteFormsComponent;\r\n            item.converter = new ExecuteFormsConverter();\r\n            item.editorParams = {\r\n              location: 'process',\r\n              tab: 'web'\r\n            };\r\n            break;\r\n          case ResourceKeys.wf_ExecuteForms_Mobile:\r\n            item.editor = ExecuteFormsComponent;\r\n            item.converter = new ExecuteFormsConverter();\r\n            item.editorParams = {\r\n              location: 'process',\r\n              tab: 'mobile'\r\n            };\r\n            break;\r\n          case ResourceKeys.wf_TitleExpression:\r\n            item.editor = TitleExpressionComponent;\r\n            item.converter = new TitleExpressionConverter();\r\n            break;\r\n          case ResourceKeys.allowPreAssign:\r\n            item.iterator = this.uiState.boolIterator;\r\n            break;\r\n          case ResourceKeys.startMode:\r\n            item.iterator = this.uiState.startModeIterator;\r\n            break;\r\n          case ResourceKeys.DisplayTerminal:\r\n            item.iterator = this.uiState.displayTerminal;\r\n            break;\r\n          case ResourceKeys.wf_CustomizeAction:\r\n            item.editor = CustomizeActionComponent;\r\n            item.converter = new CustomizeActionConverter();\r\n            break;\r\n          case ResourceKeys.processVariables:\r\n            item.editor = ProcessVariablesComponent;\r\n            item.converter = new ProcessVariablesConverter();\r\n            break;\r\n          case ResourceKeys.timeLimitControl:\r\n            item.editor = TimeLimitControlComponent;\r\n            item.converter = new TimeLimitControlConverter();\r\n            item.editorParams = {\r\n              location: 'process'\r\n            };\r\n            break;\r\n          case ResourceKeys.messageNotice:\r\n            item.editor = MessageNoticeComponent;\r\n            item.converter = new MessageNoticeConverter();\r\n            item.editorParams = {\r\n              location: 'process'\r\n            };\r\n            break;\r\n          default:\r\n            item.editor = ExtendPropertyComponent;\r\n            item.converter = new ExtendPropertyConverter();\r\n            break;\r\n        }\r\n      });\r\n    }\r\n  }\r\n}\r\n","export class ApprovalItemEntity {\r\n    value: string;\r\n    text: string;\r\n    workFlowAction: string;\r\n    isDefault = false;\r\n    commentNecessary = false;\r\n    certification = false;\r\n    attachmentNecessary = false;\r\n\r\n    constructor(value?: string, text?: string, wfAction?: string) {\r\n        this.value = value;\r\n        this.text = text;\r\n        this.workFlowAction = wfAction;\r\n    }\r\n}\r\n","export class ActionOrganizationScope {\r\n    enable: boolean;\r\n    action: ActionScope;\r\n    scope: OrganizationPotentialOwner;\r\n}\r\nexport class OrganizationPotentialOwner {\r\n    /**\r\n     * ä½ç¨åï¼AssignUser, Transfer, AddSignFront, AddSignBehind\r\n     */\r\n    actionScope: ActionScope;\r\n    /**\r\n     * é¨é¨ï¼DEPARTMENTï¼åä½ï¼UNIT\r\n     */\r\n    organizationLevel: OrganizationLevel;\r\n    /**\r\n     * ç»ç»Idï¼currentDepartment, currentUnit\r\n     */\r\n    organizationId: string;\r\n    /**\r\n     * ç»ç»ç¼å·\r\n     */\r\n    organizationCode: string;\r\n    /**\r\n     * ç»ç»åç§°\r\n     */\r\n    organizationName: string;\r\n    /**\r\n     * åå«ä¸çº§\r\n     */\r\n    includeChildren: boolean;\r\n    /**\r\n     * éåç¶çº§\r\n     */\r\n    parentsUntil: boolean;\r\n    /**\r\n     * variable åéå¼\r\n     * expression è¡¨è¾¾å¼å¼\r\n     * constant å¸¸éå¼\r\n     */\r\n    tag: string;\r\n}\r\nexport enum ActionScope {\r\n    /**\r\n     * ææ´¾\r\n     */\r\n    AssignUser = 'AssignUser',\r\n    /**\r\n     * ç§»äº¤\r\n     */\r\n    Transfer = 'Transfer',\r\n    /**\r\n     * å¾è¯¢\r\n     */\r\n    AddSignFront = 'AddSignFront',\r\n    /**\r\n     * å ç­¾\r\n     */\r\n    AddSignBehind = 'AddSignBehind',\r\n    /**\r\n     * ç¥ä¼\r\n     */\r\n    Notify = \"Notify\",\r\n}\r\nexport enum OrganizationLevel {\r\n    /**\r\n     * é¨é¨\r\n     */\r\n    DEPARTMENT = 'DEPARTMENT',\r\n    /**\r\n     * åä½\r\n     */\r\n    UNIT = 'UNIT',\r\n}\r\n","import { Component, OnInit, Output, Input, ViewChild, EventEmitter, TemplateRef, HostBinding } from '@angular/core';\r\nimport { TypeConverter } from '@farris/ui-property-panel';\r\nimport { FormGroup, FormControl } from '@angular/forms';\r\nimport { AssignPerformerConfig } from './assign-performer-config.entity';\r\nimport { OrganizationPotentialOwner, ActionScope, OrganizationLevel } from '../organization-potential-owner/actionOrganizationScope';\r\n\r\n@Component({\r\n  selector: 'app-assign-performer-config',\r\n  templateUrl: './assign-performer-config.component.html',\r\n  styleUrls: ['./assign-performer-config.component.css']\r\n})\r\nexport class AssignPerformerConfigComponent implements OnInit {\r\n  @HostBinding('class')\r\n  cls = 'farris-main-area flex-column';\r\n  @Output() closeModal = new EventEmitter<any>();\r\n  @Output() submitModal = new EventEmitter<any>();\r\n  assingPerformerConfigForm: FormGroup;\r\n  private config: AssignPerformerConfig;\r\n\r\n  @Input()\r\n  set value(v: AssignPerformerConfig) {\r\n    this.assingPerformerConfigForm = new FormGroup({\r\n      multiSelect: new FormControl(v.multiSelect),\r\n      necessary: new FormControl(v.necessary)\r\n    });\r\n    this.operator = v.operator || 'currentUser';\r\n    this.allowGlobalAssign = v.allowGlobalAssign || false;\r\n    if (v.assignScope) {\r\n      this.organizationLevel = v.assignScope.organizationLevel;\r\n      this.includeChildren = v.assignScope.includeChildren;\r\n    }\r\n  }\r\n\r\n  @ViewChild('iconSelectFooter') modalFooter: TemplateRef<any>;\r\n\r\n  allowGlobalAssign = false;\r\n\r\n  operatorCollection = [\r\n    { text: 'å½ååçäºº', value: 'currentUser' },\r\n    { text: 'æµç¨åèµ·äºº', value: 'procInstCreator' }];\r\n  operator = 'currentUser';\r\n\r\n  organizationLevelCollection = [\r\n    { value: 'GLOBAL', text: 'å¨å', orgId: 'global' },\r\n    { value: 'UNIT', text: 'æ¬åä½', orgId: 'currentUnit' },\r\n    { value: 'DEPARTMENT', text: 'æ¬é¨é¨', orgId: 'currentDepartment' }];\r\n  organizationLevel = this.organizationLevelCollection[0].value;\r\n  includeChildren = false;\r\n\r\n  modalConfig = {\r\n    title: 'ææ´¾è§å',\r\n    width: 450,\r\n    height: 470,\r\n    showButtons: true\r\n  };\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  clickOK() {\r\n    this.config = {\r\n      operator: this.operator,\r\n      multiSelect: this.assingPerformerConfigForm.get('multiSelect').value,\r\n      necessary: this.assingPerformerConfigForm.get('necessary').value,\r\n      allowGlobalAssign: this.allowGlobalAssign\r\n    };\r\n    if (this.allowGlobalAssign && this.organizationLevel !== this.organizationLevelCollection[0].value) {\r\n      const potential = new OrganizationPotentialOwner();\r\n      potential.actionScope = ActionScope.AssignUser;\r\n      potential.organizationLevel = this.organizationLevel as OrganizationLevel;\r\n      potential.organizationId = this.organizationLevelCollection.find(o => o.value === this.organizationLevel).orgId;\r\n      potential.organizationName = this.organizationLevelCollection.find(o => o.value === this.organizationLevel).text;\r\n      potential.includeChildren = this.includeChildren;\r\n      potential.tag = 'variable';\r\n      this.config.assignScope = potential;\r\n    }\r\n    const object = { value: this.config, parameters: null };\r\n    this.submitModal.emit(object);\r\n  }\r\n\r\n  clickCancel() {\r\n    this.closeModal.emit();\r\n  }\r\n\r\n  valueChange(event: any) {\r\n    switch (event.value) {\r\n      case this.organizationLevelCollection[0].value:\r\n        this.includeChildren = false;\r\n        break;\r\n      case this.organizationLevelCollection[1].value:\r\n        this.includeChildren = true;\r\n        break;\r\n      case this.organizationLevelCollection[2].value:\r\n        this.includeChildren = false;\r\n        break;\r\n    }\r\n  }\r\n}\r\nexport class AssignConfigConverter implements TypeConverter {\r\n  constructor() { }\r\n\r\n  convertTo(data): string {\r\n    return 'ï¼å·²è®¾ç½®ï¼';\r\n  }\r\n}\r\n","export class SignRuleEntity {\r\n    id: string;\r\n    conclusionValue: string;\r\n    conclusionName: string;\r\n    calculateType?: string; // è®¡ç®æ¹å¼\r\n    conditionValue?: string; // æ»¡è¶³æææ¡ä»¶å¼\r\n    waitAllVotes?: boolean; // æ¯å¦ç­å¾ææéç¥¨\r\n    completionCondition: string;\r\n}\r\n","import { Component, OnInit, HostBinding, Output, EventEmitter, Input, ViewChild, TemplateRef } from '@angular/core';\r\nimport { TypeConverter } from '@farris/ui-property-panel';\r\nimport { FormBuilder } from '@angular/forms';\r\nimport { SignRuleEntity } from './entites/sign-rule.entity';\r\nimport { DialogComponent } from '@farris/ui-dialog';\r\nimport { ExprEditMode, ExpressionService, VarEntity } from '@gsp-svc/expression';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { ProcessDesignerUIState } from '../../app/process-designer.uistate';\r\nimport { DataColumn, DatagridComponent } from '@farris/ui-datagrid';\r\nimport { ProcessDeUtil } from '../../domain/process-de-util';\r\nimport { EditorTypes } from '@farris/ui-datagrid-editors';\r\nimport { of } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'app-sign-rule',\r\n  templateUrl: './sign-rule.component.html',\r\n  styleUrls: ['./sign-rule.component.css']\r\n})\r\nexport class SignRuleComponent implements OnInit {\r\n  @HostBinding('class')\r\n  cls = 'farris-main-area flex-column';\r\n  @Output() closeModal = new EventEmitter<any>();\r\n  @Output() submitModal = new EventEmitter<any>();\r\n\r\n\r\n  @Input()\r\n  set value(rules: any[]) {\r\n    if (rules && rules.length > 0) {\r\n      for (const rule of rules) {\r\n        const val = new SignRuleEntity();\r\n        val.id = ProcessDeUtil.GenerateElementId();\r\n        val.conclusionValue = rule.ConclusionValue;\r\n        val.conclusionName = rule.ConclusionName;\r\n        val.calculateType = rule.CalculateType ? rule.CalculateType : 'null';\r\n        val.conditionValue = rule.ConditionValue ? rule.ConditionValue : 0;\r\n        val.waitAllVotes = rule.WaitAllVotes ? rule.WaitAllVotes : false;\r\n        val.completionCondition = rule.CompletionCondition ? rule.CompletionCondition._value : null;\r\n        this.data.push(val);\r\n      }\r\n    } else { // å¦ææ¨¡åä¸æ²¡æä¼ç­¾è§åï¼èªå¨å¸¦å¥ææçå®¡æ¹éé¡¹\r\n      this.deleteRow();\r\n    }\r\n  }\r\n  @Input() editorParams: any = {};\r\n  @ViewChild('iconSelectFooter') modalFooter: TemplateRef<any>;\r\n  @ViewChild('approvalTable') apvlItemsGrid: DatagridComponent;\r\n  @ViewChild('approvalItemDialog') apvlItemDialog: DialogComponent;\r\n  @ViewChild('grid') grid: DatagridComponent;\r\n\r\n  modalConfig = {\r\n    title: 'ä¼ç­¾è§å',\r\n    width: 800,\r\n    height: 520,\r\n    showButtons: true\r\n  };\r\n  data: SignRuleEntity[] = [];\r\n  calculationMethods: any[] = [\r\n    { text: 'ææ°é', value: 'byNumber' },\r\n    { text: 'ææ¯ä¾(%)', value: 'byProportion' },\r\n    { text: 'èªå®ä¹æ¡ä»¶', value: 'null' },\r\n  ];\r\n  counterSignVariables: VarEntity[] = [];\r\n  /******* å®¡æ¹é¡¹å¸®å©åæ° *********************************************************/\r\n  approvalCols = [{ title: 'ç¼å·', field: 'value', width: 80 },\r\n  { title: 'åç§°', field: 'text', width: 90 }];\r\n  approvalItems: any[] = [];\r\n/*********************************** */\r\n  columns = [\r\n    { field: 'conclusionName', width: 25, title: 'ç»è®ºåç§°' },\r\n    { field: 'conclusionValue', width: 25, title: 'ç»è®ºå¼' },\r\n    { field: 'calculateType', width: 40, title: 'è®¡ç®æ¹å¼',\r\n      formatter: {type: 'enum',options: { valueField: 'value', textField: 'text', data: this.calculationMethods }},\r\n      editor: {type: EditorTypes.COMBOLIST,options: { valueField: 'value', textField: 'text', data: this.calculationMethods, idField: 'value', panelHeight: 'auto' }}\r\n    },\r\n    { field: 'conditionValue', width: 25, title: 'æ¡ä»¶å¼',\r\n      editor: { type: EditorTypes.NUMBERBOX, options: {} },\r\n      formatter:{type: 'number', options: { precision: 0, min: 0 } }\r\n    },\r\n    { field: 'waitAllVotes', width: 35, title: 'ç­å¾å¨ååç»',\r\n      editor: { type: EditorTypes.SWITCH, options: {} },\r\n      formatter: { type: 'boolean', options: { trueText: 'æ¯', falseText: 'å¦' }}\r\n    },\r\n    { field: 'completionCondition', width: 50, title: 'èªå®ä¹æ¡ä»¶',\r\n      editor: {\r\n        type: 'input-group',\r\n        options: {\r\n          groupText: '<i class=\"f-icon f-icon-lookup\"></i>',\r\n          editable: false,\r\n          clickHandle: (e) => {\r\n            e.formControl.setValue(e.instance.value ? e.instance.value : '');\r\n            this.editConditon(e);\r\n          },\r\n          clear: (e) => {\r\n            console.log('clear', e);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  ];\r\n\r\n  constructor(\r\n    private formBuilder: FormBuilder,\r\n    private message: MessagerService,\r\n    private exprService: ExpressionService,\r\n    private designerUIState: ProcessDesignerUIState,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.counterSignVariables = this.designerUIState.counterSignVariables || [];\r\n    this.approvalItems = this.designerUIState.approvalItems || [];\r\n  }\r\n  // éç½®å¨ä½\r\n  deleteRow() {\r\n    this.data = [];\r\n    const ruleItems = this.designerUIState.approvalItems || [];\r\n    if (ruleItems && ruleItems.length > 0) {\r\n      for (const ruleItem of ruleItems) {\r\n        const val = new SignRuleEntity();\r\n        if (ruleItem.value === 'Pass') {\r\n          val.id = ProcessDeUtil.GenerateElementId();\r\n          val.conclusionValue = ruleItem.value;\r\n          val.conclusionName = ruleItem.text;\r\n          val.calculateType = 'byProportion';\r\n          val.conditionValue = '100';\r\n          val.waitAllVotes = true;\r\n        } else if (ruleItem.value === 'Back') {\r\n          val.id = ProcessDeUtil.GenerateElementId();\r\n          val.conclusionValue = ruleItem.value;\r\n          val.conclusionName = ruleItem.text;\r\n          val.calculateType = 'byNumber';\r\n          val.conditionValue = '1';\r\n          val.waitAllVotes = true;\r\n        } else {\r\n          val.id = ProcessDeUtil.GenerateElementId();\r\n          val.conclusionValue = ruleItem.value;\r\n          val.conclusionName = ruleItem.text;\r\n          val.calculateType = 'null';\r\n          val.conditionValue = '0';\r\n          val.waitAllVotes = true;\r\n        }\r\n        this.data.push(val);\r\n      }\r\n    }\r\n  }\r\n\r\n  clickOK() {\r\n    this.grid.endCellEdit();\r\n    if (this.data.length === 0) {\r\n      this.message.warning('å®æç­ç¥ä¸ºä¼ç­¾æ¶ï¼ä¼ç­¾è§åä¸åè®¸ä¸ºç©ºï¼è¯·äºè§£ï¼');\r\n    } else {\r\n      const object = { value: this.data, parameters: null };\r\n      this.submitModal.emit(object);\r\n    }\r\n  }\r\n\r\n  clickCancel() {\r\n    this.closeModal.emit();\r\n  }\r\n\r\n  editConditon(e: any) {\r\n    if (this.counterSignVariables && this.counterSignVariables.length > 0) {\r\n      for (const variable of this.counterSignVariables) {\r\n        this.exprService.addContext(variable);\r\n      }\r\n    }\r\n    this.exprService.setEditPattern(ExprEditMode.Advanced); // è¡¨è¾¾å¼å±ç°æ¨¡å¼ï¼é»è®¤é«çº§çï¼ä¼ç­¾è§åéè¦ä¸ä¸æåéï¼\r\n    this.exprService.addExpressionText(e.instance.value);\r\n    this.exprService.buildExpression().then((cond: string) => {\r\n      e.formControl.setValue(cond);\r\n      e.instance.cd.detectChanges();\r\n    });\r\n  }\r\n\r\n  /**\r\n   * éä¸­å®¡æ¹é¡¹\r\n   */\r\n  approvalSelect() {\r\n    const selections: any[] = this.apvlItemsGrid.checkeds;\r\n    if (selections && selections.length > 0) {\r\n      for (const selection of selections) {\r\n        const signRule = new SignRuleEntity();\r\n        signRule.id = ProcessDeUtil.GenerateElementId();\r\n        signRule.conclusionValue = selection.data.value;\r\n        signRule.conclusionName = selection.data.text;\r\n        this.data.push(signRule);\r\n      }\r\n      this.grid.loadData(this.data);\r\n      this.apvlItemDialog.close();\r\n    } else {\r\n      this.message.info('è¯·é¦åéä¸­ä¸æ¡å®¡æ¹é¡¹ï¼');\r\n    }\r\n  }\r\n\r\n\r\n  preValue: SignRuleEntity;\r\n  curValue: SignRuleEntity;\r\n/**\r\n * ç»æç¼è¾åäºä»¶\r\n */\r\n  afterEdit = (rowIndex: number, rowData: any, column?: DataColumn) => {\r\n    this.preValue = JSON.parse(JSON.stringify(rowData));\r\n    return of(true);\r\n  }\r\n\r\n  endEdit(e: any) {\r\n    this.curValue = e.rowData;\r\n    // èªå®ä¹ä¼ç­¾è§ååé¢ç½®ä¼ç­¾è§åäºæ¥\r\n    if(this.preValue.completionCondition !== this.curValue.completionCondition) {\r\n      this.data[e.rowIndex].calculateType = 'null',\r\n      this.data[e.rowIndex].conditionValue = '0';\r\n      this.data[e.rowIndex].waitAllVotes = false;\r\n    } else if (this.preValue.calculateType !== this.curValue.calculateType ||\r\n      this.preValue.conditionValue !== this.curValue.conditionValue ||\r\n      this.preValue.waitAllVotes !== this.curValue.waitAllVotes) {\r\n        this.data[e.rowIndex].completionCondition = null;\r\n    }\r\n\r\n    if(e.column.field === 'conditionValue' && this.data[e.rowIndex].calculateType === 'byProportion'\r\n    && Number.parseInt(e.value) > 100) {\r\n      this.message.info('æ¡ä»¶å¼æå¤§å¼æ¯100');\r\n      this.data[e.rowIndex].conditionValue = '100';\r\n    } else if (e.column.field === 'conditionValue' && Number.parseInt(e.value) < 0) {\r\n      this.message.info('æ¡ä»¶å¼æå°å¼æ¯0');\r\n      this.data[e.rowIndex].conditionValue = '0';\r\n    } else if ((e.column.field === 'calculateType' || e.column.field === 'conditionValue') && (this.data[e.rowIndex].calculateType === 'oneVote' ||\r\n    this.data[e.rowIndex].calculateType === 'fullVote') && Number.parseInt(this.data[e.rowIndex].conditionValue) !== 0) {\r\n      this.message.info('ç»è®ºæ§è¡æ¹å¼ä¸ºå¨ç¥¨æä¸ç¥¨æ¶ä¸éè¦æ¡ä»¶å¼');\r\n      this.data[e.rowIndex].conditionValue = '0';\r\n    } else if (e.column.field === 'calculateType' && this.data[e.rowIndex].calculateType === 'byProportion' &&\r\n    Number.parseInt(this.data[e.rowIndex].conditionValue) > 100) {\r\n      this.message.info('æ¡ä»¶å¼æå¤§å¼æ¯100');\r\n      this.data[e.rowIndex].conditionValue = '100';\r\n      }\r\n  }\r\n}\r\n\r\nexport class SignRuleConverter implements TypeConverter {\r\n  constructor() { }\r\n\r\n  convertTo(data: any[]): string {\r\n    if (data && data.length > 0) {\r\n      return 'ï¼å·²è®¾ç½®ï¼';\r\n    } else {\r\n      return 'ï¼æªè®¾ç½®ï¼';\r\n    }\r\n  }\r\n}\r\n","import { Component, OnInit, HostBinding, Output, EventEmitter, Input, ViewChild, TemplateRef } from '@angular/core';\r\nimport { TypeConverter } from '@farris/ui-property-panel';\r\nimport { FormBuilder, FormGroup } from '@angular/forms';\r\nimport { DataTableComponent } from '@farris/ui-datatable';\r\nimport { DialogComponent } from '@farris/ui-dialog';\r\nimport { ApprovalItemEntity } from './entities/approval-item.entity';\r\nimport { HttpService } from '@ecp-caf/caf-common';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { map } from 'rxjs/operators';\r\nimport { ProcessDesignerUIState } from '../../app/process-designer.uistate';\r\nimport { EditorTypes } from '@farris/ui-datagrid-editors';\r\nimport { DatagridComponent } from '@farris/ui-datagrid';\r\nimport { ProcessDeUtil } from '../../domain/process-de-util';\r\n\r\n@Component({\r\n  selector: 'app-approvel-items',\r\n  templateUrl: './approvel-items.component.html',\r\n  styleUrls: ['./approvel-items.component.css']\r\n})\r\nexport class ApprovelItemsComponent implements OnInit {\r\n  @HostBinding('class')\r\n  cls = 'farris-main-area flex-column';\r\n\r\n  @Output() closeModal = new EventEmitter<any>();\r\n  @Output() submitModal = new EventEmitter<any>();\r\n\r\n  @Input()\r\n  set value(items: any[]) {\r\n    if (items && items.length > 0) {\r\n      for (const item of items) {\r\n        const approval = new ApprovalItemEntity();\r\n        approval.value = item.Value;\r\n        approval.text = item.Text;\r\n        approval.workFlowAction = item.WorkFlowAction;\r\n        approval.isDefault = item.IsDefault;\r\n\r\n        if (item.commentNecessary === null || item.commentNecessary === undefined) {\r\n          approval.commentNecessary = (item.Value === 'Back' ? true : false);\r\n        } else {\r\n          approval.commentNecessary = item.commentNecessary;\r\n        }\r\n\r\n        approval.certification = item.certification ? item.certification : false;\r\n        approval.attachmentNecessary = item.attachmentNecessary ? item.attachmentNecessary : false;\r\n        this.data.push(approval);\r\n      }\r\n    }\r\n  }\r\n\r\n  @ViewChild('iconSelectFooter') modalFooter: TemplateRef<any>;\r\n  @ViewChild('actionsTable') actionsTable: DatagridComponent;\r\n  @ViewChild('actionsDialog') actionsDialog: DialogComponent;\r\n  @ViewChild('grid') grid: DatagridComponent;\r\n\r\n  modalConfig = {\r\n    title: 'å®¡æ¹éé¡¹',\r\n    width: 880,\r\n    height: 515,\r\n    showButtons: true\r\n  };\r\n\r\n  workFlowActions: any[] = [\r\n    { text: 'æ­£å', value: 'Forward' },\r\n    { text: 'åå', value: 'Backward' },\r\n    { text: 'ç»æ­¢', value: 'Abort' }];\r\n\r\n  columns = [\r\n    {\r\n      field: 'value', width: 80, title: 'ç¼å·',\r\n    },\r\n    { field: 'text', width: 80, title: 'åç§°' },\r\n    {\r\n      field: 'workFlowAction', width: 80, title: 'æµè½¬æ¹å',\r\n      formatter: {\r\n        type: 'enum',\r\n        options: { valueField: 'value', textField: 'text', data: this.workFlowActions}\r\n      },\r\n      editor: {\r\n        type: EditorTypes.COMBOLIST,\r\n        options: { valueField: 'value', textField: 'text', data: this.workFlowActions, idField: 'value', panelHeight: 'auto' }\r\n      },\r\n      validators: [\r\n        { type: 'required', messager: 'å¿å¡«' }\r\n      ]\r\n    },\r\n    {\r\n      field: 'isDefault', width: 60, title: 'é»è®¤',\r\n      editor: {\r\n        type: EditorTypes.SWITCH,\r\n        options: {}\r\n      },\r\n      formatter: { type: 'boolean', options: { trueText: 'æ¯', falseText: 'å¦' } },\r\n      validators: [\r\n        { type: 'required', messager: 'å¿å¡«' }\r\n      ]\r\n    },\r\n    {\r\n      field: 'commentNecessary', width: 60, title: 'æè§å¿å¡«',\r\n      editor: {\r\n        type: EditorTypes.SWITCH,\r\n        options: {}\r\n      },\r\n      formatter: { type: 'boolean', options: { trueText: 'æ¯', falseText: 'å¦' } },\r\n      validators: [\r\n        { type: 'required', messager: 'å¿å¡«' }\r\n      ]\r\n    },\r\n    {\r\n      field: 'attachmentNecessary', width: 60, title: 'éä»¶ä¸ä¼ ',\r\n      editor: {\r\n        type: EditorTypes.SWITCH,\r\n        options: {}\r\n      },\r\n      formatter: { type: 'boolean', options: { trueText: 'æ¯', falseText: 'å¦' } },\r\n      validators: [\r\n        { type: 'required', messager: 'å¿å¡«' }\r\n      ]\r\n    },\r\n    {\r\n      field: 'certification', width: 60, title: 'æ°å­ç­¾å',\r\n      editor: {\r\n        type: EditorTypes.SWITCH,\r\n        options: {}\r\n      },\r\n      formatter: { type: 'boolean', options: { trueText: 'æ¯', falseText: 'å¦' } },\r\n      validators: [\r\n        { type: 'required', messager: 'å¿å¡«' }\r\n      ]\r\n    }\r\n  ];\r\n\r\n  data: ApprovalItemEntity[] = [];\r\n\r\n  // å®¡æ¹å¨ä½\r\n  actions: any[];\r\n  actionsCols = [\r\n    { title: 'ç¼å·', field: 'code', width: 80 },\r\n    { title: 'åç§°', field: 'name', width: 90 }];\r\n\r\n  constructor(\r\n    private formBuilder: FormBuilder,\r\n    private message: MessagerService,\r\n    private util: ProcessDeUtil,\r\n    private http: HttpService,\r\n    private uiState: ProcessDesignerUIState\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.getActionsList();\r\n  }\r\n\r\n  clickOK() {\r\n    this.grid.endCellEdit();\r\n    if (this.validator()) {\r\n      const object = { value: this.data, parameters: null };\r\n      this.submitModal.emit(object);\r\n    }\r\n  }\r\n\r\n  clickCancel() {\r\n    this.closeModal.emit();\r\n  }\r\n\r\n  private validator(): boolean {\r\n    if (this.data.findIndex(d => !d.workFlowAction) > -1) {\r\n      this.message.warning('å®¡æ¹é¡¹æµè½¬æ¹åä¸åè®¸ä¸ºç©ºï¼è¯·ä¿®æ¹ï¼');\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  selectChanged(data: any) { }\r\n\r\n  deleteRow() {\r\n    this.grid.endCellEdit();\r\n    if (this.grid.selectedRow && this.grid.selectedRow.data) {\r\n      const i = this.data.findIndex(d => d.value === this.grid.selectedRow.data.value);\r\n      this.data.splice(i, 1);\r\n      this.grid.loadData(this.data);\r\n    } else {\r\n      this.message.info('è¯·é¦åéä¸­ä¸æ¡éé¡¹ï¼');\r\n    }\r\n  }\r\n\r\n  private getActionsList() {\r\n    let url = this.util.getApprovalActionWebApi() + '?';\r\n    if (this.uiState.bizActivityId) {\r\n      url += `bizActivityId=${this.uiState.bizActivityId}`;\r\n    } else {\r\n      url += `bizActivityId=`;\r\n    }\r\n\r\n    this.http.get(url).subscribe((data: any) => {\r\n        data = data.filter(a => this.actionValidate(a));\r\n        this.actions = data;\r\n      });\r\n  }\r\n\r\n  actionsSelect() {\r\n    const selections: any[] = this.actionsTable.checkeds;\r\n    if (selections && selections.length > 0) {\r\n      selections.forEach(action => {\r\n        const item = new ApprovalItemEntity(action.data.code, action.data.name, action.data.workFlowAction);\r\n        const index = this.data.findIndex(act => act.value === action.data.code);\r\n        if (index > -1) {\r\n          this.data.splice(index, 1);\r\n        }\r\n        this.data.push(item);\r\n      });\r\n      this.grid.loadData(this.data);\r\n    }\r\n    this.actionsDialog.close();\r\n  }\r\n\r\n  private actionValidate(action: any) {\r\n    const arr = ['ViewBizLog', 'ViewFlowChart', 'AssignUser', 'Claim', 'Unclaim', 'Retrieve', 'Resubmit', 'Obsolete', 'Transfer', 'AddSignFront', 'ViewExecuteForm'];\r\n    return arr.indexOf(action.code.trim()) === -1;\r\n  }\r\n}\r\n\r\nexport class ApprovelItemsConverter implements TypeConverter {\r\n  constructor() { }\r\n\r\n  convertTo(data: any[]): string {\r\n    if (data && data.length > 0) {\r\n      return 'ï¼å·²è®¾ç½®ï¼';\r\n    } else {\r\n      return 'ï¼æªè®¾ç½®ï¼';\r\n    }\r\n  }\r\n}\r\n","import { Component, OnInit, Output, Input, EventEmitter, ViewChild, TemplateRef } from '@angular/core';\r\nimport { ExpressionService, ExpressioneditorComponent, ComputeRuleEditorComponent, ExprEditMode } from '@gsp-svc/expression';\r\nimport { ProcessDesignerUIState } from '../../app/process-designer.uistate';\r\nimport { TypeConverter } from '@farris/ui-property-panel';\r\n\r\n@Component({\r\n  selector: 'app-expression-editor',\r\n  templateUrl: './expression-editor.component.html',\r\n  styleUrls: ['./expression-editor.component.css'],\r\n})\r\nexport class ExpressionEditorComponent implements OnInit {\r\n  @Output() closeModal = new EventEmitter<any>();\r\n  @Output() submitModal = new EventEmitter<any>();\r\n\r\n  @Input() value: string;\r\n\r\n  @ViewChild('iconSelectFooter') modalFooter: TemplateRef<any>;\r\n\r\n  @Input() editorParams: any = {};\r\n\r\n  @ViewChild(ExpressioneditorComponent) editor: ExpressioneditorComponent;\r\n  @ViewChild('compute') compute: ComputeRuleEditorComponent;\r\n\r\n  contextEntities = [];\r\n\r\n  schema: any = {};\r\n  injectName = '';\r\n  modalConfig = {\r\n    title: 'æ¡ä»¶ç¼è¾',\r\n    width: 1140,\r\n    height: 520,\r\n    showButtons: true\r\n  };\r\n\r\n  constructor(\r\n    private expr: ExpressionService,\r\n    public designerState: ProcessDesignerUIState\r\n  ) {\r\n    if (this.designerState.schemas[0]) {\r\n      this.schema = this.designerState.schemas[0];\r\n      if (this.designerState.schemas[0].entityTypes && this.designerState.schemas[0].entityTypes.length > 0) {\r\n        this.injectName = this.designerState.schemas[0].entityTypes[0].name;\r\n      }\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.contextEntities = new Array();\r\n    if (this.designerState.procInstContext.length > 0) {\r\n      for (const variable of this.designerState.procInstContext) {\r\n        this.contextEntities = this.contextEntities.concat([variable]);\r\n      }\r\n    }\r\n    if (this.designerState.formalParameterContext.length > 0) {\r\n      for (const variable of this.designerState.formalParameterContext) {\r\n        if (!this.contextEntities.some(c => c.key === variable.key)) {\r\n          this.contextEntities = this.contextEntities.concat([variable]);\r\n        }\r\n      }\r\n    }\r\n    if (this.designerState.participantContext.length > 0) {\r\n      for (const variable of this.designerState.participantContext) {\r\n        if (!this.contextEntities.some(c => c.key === variable.key)) {\r\n          this.contextEntities = this.contextEntities.concat([variable]);\r\n        }\r\n      }\r\n    }\r\n    if (this.designerState.activityComponentContext.length > 0) {\r\n      for (const variable of this.designerState.activityComponentContext) {\r\n        if (!this.contextEntities.some(c => c.key === variable.key)) {\r\n          this.contextEntities = this.contextEntities.concat([variable]);\r\n        }\r\n      }\r\n    }\r\n    if (this.designerState.processVariableContext.length > 0) {\r\n      for (const variable of this.designerState.processVariableContext) {\r\n        if (!this.contextEntities.some(c => c.key === variable.key)) {\r\n          this.contextEntities = this.contextEntities.concat([variable]);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  clickOK() {\r\n    const result = this.compute.getExpr();\r\n    this.value = this.convertToValue(result.text);\r\n    const object = { value: this.value, parameters: null };\r\n    this.submitModal.emit(object);\r\n  }\r\n\r\n  /**\r\n   * åæ¢è¡¨è¾¾å¼ç±»åï¼ç®æè¡¨è¾¾å¼<--->é«çº§è¡¨è¾¾å¼ï¼\r\n   */\r\n  changeType() {\r\n    this.compute.changeType();\r\n  }\r\n\r\n  clickCancel() {\r\n    this.closeModal.emit();\r\n  }\r\n\r\n  private convertToValue(val: string): string {\r\n    if (val) {\r\n      if (val.substring(9, val.length - 2)) {\r\n        return val;\r\n      } else {\r\n        return '';\r\n      }\r\n    } else {\r\n      return '';\r\n    }\r\n  }\r\n}\r\nexport class ExpressionEditorConverter implements TypeConverter {\r\n  constructor() { }\r\n\r\n  convertTo(data: any): string {\r\n    if (data) {\r\n      return data;\r\n    } else {\r\n      return 'ï¼æªè®¾ç½®ï¼';\r\n    }\r\n  }\r\n}\r\n","import { Component, OnInit, HostBinding, Output, EventEmitter, Input, ViewChild, TemplateRef } from '@angular/core';\r\nimport { TypeConverter } from '@farris/ui-property-panel';\r\nimport { ProcessDesignerUIState } from '../../app/process-designer.uistate';\r\nimport { DialogComponent } from '@farris/ui-dialog';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { DatagridComponent } from '@farris/ui-datagrid';\r\nimport { LookupGridComponent, PickedResult } from '@farris/ui-lookup';\r\nimport { Observable, of } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'app-jump-scope',\r\n  templateUrl: './jump-scope.component.html',\r\n  styleUrls: ['./jump-scope.component.css']\r\n})\r\nexport class JumpScopeComponent implements OnInit {\r\n  @HostBinding('class')\r\n  cls = 'farris-main-area flex-column';\r\n\r\n  @Output() closeModal = new EventEmitter<any>();\r\n  @Output() submitModal = new EventEmitter<any>();\r\n\r\n  @Input()\r\n  set value(data: any) {\r\n    if (data) {\r\n      this.category = data.Category;\r\n      this.defaultType = data.DefaultType;\r\n      // åå°DefaultActivityçèç¹Idï¼éååºNameç»å®å°radiogroupä¸å»ï¼defaultactyï¼\r\n      const acty: string = data.DefaultActivity;\r\n      if (acty != null) {\r\n        for (const act of this.uistate.allActList) {\r\n          if (act.Id === acty) {\r\n            this.defaultacty = act.Name;\r\n          }\r\n        }\r\n      }\r\n      // åå°DestinationActivitiesçèç¹Idï¼éååºIdåNameç»å®å°radiogroupä¸å»ï¼actisï¼\r\n      const strs: string[] = data.DestinationActivities;\r\n      if (strs && strs.length > 0) {\r\n        for (const str of strs) {\r\n          const name = this.uistate.userActList.filter(act => act.Id === str)[0].Name;\r\n          // const acti = { Id: str, Name: name };\r\n          this.actis.push(name);\r\n        }\r\n      }\r\n    } else {\r\n      this.category = 'OutConnectNode';\r\n      this.defaultType = 'FirstNode';\r\n    }\r\n  }\r\n\r\n  @ViewChild('iconSelectFooter') modalFooter: TemplateRef<any>;\r\n  modalConfig = {\r\n    title: 'ç®æ èç¹éé¡¹',\r\n    width: 520,\r\n    height: 460,\r\n    showButtons: true\r\n  };\r\n  // æ´»å¨èç¹è¡¨ä¿¡æ¯============================================\r\n  @ViewChild('allActisTable') allActisTable: DatagridComponent;\r\n  @ViewChild('allActisDialog') allActisDialog: DialogComponent;\r\n  @ViewChild('actTable') actTable: DatagridComponent;\r\n  @ViewChild('lookup') lookup: LookupGridComponent;\r\n\r\n  cols = [\r\n    { title: 'åç§°', field: 'Name', width: 60, searchField: 'Name' },\r\n    { title: 'ID', field: 'Id', width: 90, searchField: 'Id' }];\r\n  // ==========================================================\r\n  actis = [];\r\n  fullActis = [];\r\n  defaultacty = '';\r\n  categoryListItems = [\r\n    { value: 'OutConnectNode', name: 'æµç¨å¾è¿çº¿èç¹'},\r\n    { value: 'Global', name: 'æµç¨åææèç¹'},\r\n    { value: 'AfterNodes', name: 'ææåç»§èç¹'},\r\n    { value: 'SpecifiedSet', name: 'æµç¨å¾è¿çº¿èç¹+éå èç¹' }];\r\n  category = '';\r\n  defaultType = '';\r\n  defaultTypeListItems = [\r\n    { value: 'FirstNode', name: 'æ¡ä»¶ä¸ºtrueçè¿çº¿èç¹ï¼å½æå¤æ¡æ¶é»è®¤éä¸­é¦æ¡'},\r\n    { value: 'NullNode', name: 'é»è®¤ä¸ºç©ºï¼æ¯æ¬¡é½æå¨éæ©'},\r\n    { value: 'SpecifyNode', name: 'æå®é»è®¤èç¹' }];\r\n  defaultActivity = '';\r\n  pageInfo = {\r\n    pageIndex: 1,\r\n    pageList: [10, 20, 30, 50],\r\n    pageSize: 20\r\n  };\r\n  outConnectNode: true;\r\n  total: number;\r\n  constructor(\r\n    public uistate: ProcessDesignerUIState,\r\n    private message: MessagerService) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  clickOK() {\r\n    if (this.validator()) {\r\n      let value;\r\n      const list = [];\r\n      // éæ°æå¼è®¾ç½®çé¢ï¼æ²¡æè¿è¡èç¹éç½®çæåµï¼DefaultActivityï¼\r\n      if ( this.defaultActivity === '' && this.defaultacty !== '') {\r\n        for (const defAct of this.uistate.allActList) {\r\n          if (defAct.Name === this.defaultacty) {\r\n            this.defaultActivity = defAct.Id;\r\n          }\r\n        }\r\n      }\r\n      // éæ°æå¼è®¾ç½®çé¢ï¼æ²¡æè¿è¡èç¹éç½®çæåµï¼DestinationActivitiesï¼\r\n      if (this.fullActis.length === 0 && this.actis.length > 0) {\r\n        for (const act of this.actis) {\r\n          for (const allAct of this.uistate.userActList) {\r\n            if (act === allAct.Name) {\r\n              list.push(allAct.Id);\r\n            }\r\n          }\r\n        }\r\n      } else if (this.category === 'SpecifiedSet' && this.fullActis && this.fullActis.length > 0) {\r\n        // éå èç¹çidä¼ ç»æ¨¡åä¸çDestinationActivities\r\n        this.fullActis.forEach(act => list.push(act.Id));\r\n      }\r\n      value = {\r\n        Category: this.category,\r\n        DefaultType: this.defaultType,\r\n        DefaultActivity: this.defaultActivity,\r\n        DestinationActivities: list,\r\n      };\r\n      const object = { value, parameters: null };\r\n      this.submitModal.emit(object);\r\n    }\r\n  }\r\n\r\n  clickCancel() {\r\n    this.closeModal.emit();\r\n  }\r\n\r\n  private validator(): boolean {\r\n    if (!this.category) {\r\n      this.message.warning('å°æªè®¾ç½®ç®æ èç¹éé¡¹ï¼è¯·äºè§£ï¼');\r\n      return false;\r\n    }\r\n    // if (this.category === 'SpecifiedSet' && Object.prototype.isPrototypeOf(this.actis)) {\r\n    //   this.message.info('å°æªéæ©éå èç¹ï¼è¯·äºè§£ï¼');\r\n    //   return false;\r\n    // }\r\n    if (this.defaultType === 'SpecifyNode' && this.defaultacty === '') {\r\n      this.message.warning('å°æªæå®é»è®¤èç¹ï¼è¯·äºè§£ï¼');\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  actisSelect = (rowData): Observable<PickedResult> => {\r\n    // éå èç¹çå¸®å©åäºä»¶ï¼æéä¸­çæ°æ®èµç»fullActisï¼æ­¤å¤å¤ççç®çæ¯ä¸ºäºæ¾ç¤ºNameåæ¶åIdå¼ï¼\r\n    // console.log(rowData);\r\n    this.fullActis = rowData;\r\n    return of({\r\n      closeDialog: true\r\n    });\r\n  }\r\n\r\n  defaultActivitySelect = (rowData): Observable<PickedResult> => {\r\n    // é»è®¤èç¹çå¸®å©åäºä»¶ï¼æéä¸­çidèµç»defaultActivityï¼æ­¤å¤å¤ççç®çæ¯ä¸ºäºæ¾ç¤ºNameåæ¶åIdå¼ï¼\r\n    this.defaultActivity = rowData.Id;\r\n    return of({\r\n      closeDialog: true\r\n    });\r\n  }\r\n\r\n  deleteRow() {\r\n    if (this.actTable.selectedRow && this.actTable.selectedRow.data) {\r\n      const i = this.actis.findIndex(d => d.id === this.actTable.selectedRow.data.id);\r\n      this.actis.splice(i, 1);\r\n      this.actTable.loadData(this.actis);\r\n    } else {\r\n      this.message.info('è¯·é¦åéä¸­ä¸æ¡éé¡¹ï¼');\r\n    }\r\n  }\r\n}\r\nexport class JumpScopeConverter implements TypeConverter {\r\n  constructor() { }\r\n\r\n  convertTo(data: any): string {\r\n    if (data) {\r\n      return 'ï¼å·²è®¾ç½®ï¼';\r\n    }\r\n    return 'ï¼æªè®¾ç½®ï¼';\r\n  }\r\n}\r\n\r\n","import { Component, OnInit, HostBinding, Output, EventEmitter, Input, ViewChild, TemplateRef, AfterViewInit } from '@angular/core';\r\nimport { TypeConverter } from '@farris/ui-property-panel';\r\nimport { ProcessDesignerUIState } from '../../app/process-designer.uistate';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { Observable, of } from 'rxjs';\r\nimport { PickedResult, LookupGridComponent } from '@farris/ui-lookup';\r\nimport { THROW_IF_NOT_FOUND } from '@angular/core/src/di/injector';\r\n\r\n@Component({\r\n  selector: 'procDesigner-backward-rule',\r\n  templateUrl: './backward-rule.component.html',\r\n  styleUrls: ['./backward-rule.component.scss']\r\n})\r\nexport class BackwardRuleComponent implements OnInit, AfterViewInit {\r\n  @HostBinding('class')\r\n  cls = 'farris-main-area flex-column';\r\n  @Input() editorParams: any = {};\r\n  @Input()\r\n  set value(data: any) {\r\n    if (data) {\r\n      this.selectAbleChecked = data.SelectTargetAble;\r\n      this.waitReturnChecked = data.WaitReturn;\r\n      this.dynamicBackWardRuleAbleChecked = data.DynamicBackWardRuleAble;\r\n      if (!data.TargetRef) {\r\n        this.targetRef = 'Empty';\r\n      } else {\r\n        this.targetRef = data.TargetRef;\r\n      }\r\n      const act = this.listItems.find(item => item.Id === this.targetRef);\r\n      if (act) {\r\n        this.displayText = act.Name;\r\n      } else {\r\n        this.displayText = '';\r\n        setTimeout(() => {\r\n          this.message.warning('é©³åæ´»å¨èç¹å·²ä¸å­å¨ï¼è¯·éæ°ç¼è¾');\r\n        }, 500);\r\n      }\r\n    }\r\n  }\r\n  @Input() nodeType: 'UserActivity' | 'CallActivitySubProcess' = 'UserActivity';\r\n\r\n  @Output() closeModal = new EventEmitter<any>();\r\n  @Output() submitModal = new EventEmitter<any>();\r\n\r\n  @ViewChild('iconSelectFooter') modalFooter: TemplateRef<any>;\r\n  @ViewChild('hlp') hlp: LookupGridComponent;\r\n  modalConfig = {\r\n    title: 'é©³åè§å',\r\n    width: 430,\r\n    height: 370,\r\n    showButtons: true\r\n  };\r\n  displayText: string;\r\n  listItems = [\r\n    { Id: 'InitialActityId', Name: 'å¼å§èç¹' },\r\n    { Id: 'PrecursorActivityId', Name: 'åç½®èç¹' },\r\n    { Id: 'Empty', Name: 'ç©º' }\r\n  ];\r\n\r\n  items = [];\r\n\r\n  columns = [\r\n    { title: 'åç§°', field: 'Name', width: 100, searchField: 'Name' },\r\n    { title: 'æ è¯', field: 'Id', width: 100, searchField: 'Id' },\r\n  ];\r\n  selectAbleChecked = false;\r\n  waitReturnChecked = false;\r\n  dynamicBackWardRuleAbleChecked = false;\r\n  targetRef = this.listItems[0].Id;\r\n\r\n  pageInfo = {\r\n    pageIndex: 1,\r\n    pageList: [10, 20, 30, 50],\r\n    pageSize: 20\r\n  };\r\n\r\n  total: number;\r\n\r\n  constructor(\r\n    private uiState: ProcessDesignerUIState,\r\n    private message: MessagerService\r\n  ) {\r\n    this.listItems = this.listItems.concat(this.uiState.userActList);\r\n    this.items = this.listItems;\r\n    this.total = this.listItems.length;\r\n    }\r\n\r\n  ngOnInit() {\r\n    this.nodeType = this.editorParams.nodeType;\r\n    if (this.nodeType !== 'UserActivity') {\r\n      this.listItems = this.listItems.filter(i => i.Id !== 'Empty');\r\n      this.items = this.listItems;\r\n      this.total = this.listItems.length;\r\n    }\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n  }\r\n\r\n  selectAbleClick() {\r\n    if (this.uiState.propertyData.ClrTypeID === 'wf.UserActivity'\r\n      && this.uiState.propertyData.CompleteStrategy !== this.uiState.completeIterator[0].key\r\n      && this.selectAbleChecked === true) {\r\n      this.message.info('ä¼ç­¾ç­ç¥ä¸ï¼ä¸åè®¸âå¨æéæ©é©³åçº§æ¬¡â!', () => {\r\n        this.selectAbleChecked = false;\r\n      });\r\n    }\r\n  }\r\n  waitReturnClick() {\r\n    this.waitReturnChecked = !this.waitReturnChecked;\r\n  }\r\n  dynamicBackWardRuleAbleClick() {\r\n    this.dynamicBackWardRuleAbleChecked = !this.dynamicBackWardRuleAbleChecked;\r\n  }\r\n  dictPicked = (arg: any): Observable<PickedResult> => {\r\n    this.targetRef = arg.Id;\r\n    this.displayText = arg.Name;\r\n    return of({ closeDialog: true });\r\n  }\r\n  clickOK() {\r\n    const backWardRule = {\r\n      TargetRef: this.getTargetRef(),\r\n      SelectTargetAble: this.selectAbleChecked,\r\n      WaitReturn: this.waitReturnChecked,\r\n      DynamicBackWardRuleAble: this.dynamicBackWardRuleAbleChecked,\r\n    };\r\n    const object = { value: backWardRule, parameters: null };\r\n    this.submitModal.emit(object);\r\n  }\r\n\r\n  clickCancel() {\r\n    this.closeModal.emit();\r\n  }\r\n\r\n  pagerChanged(arg: any) {\r\n    this.pageInfo.pageIndex = arg.pageIndex;\r\n    this.pageInfo.pageSize = arg.pageSize;\r\n    const search = {\r\n      field: arg.searchValue.searchField,\r\n      value: arg.searchValue.searchValue\r\n    };\r\n    this.load(search);\r\n  }\r\n\r\n  pageSizeChange(arg: any) {\r\n    console.log(arg);\r\n    this.pageInfo.pageIndex = arg.pageIndex;\r\n    this.pageInfo.pageSize = arg.pageSize;\r\n    const search = {\r\n      field: arg.searchValue.searchField,\r\n      value: arg.searchValue.searchValue\r\n    };\r\n    this.load(search);\r\n  }\r\n  search(arg: any) {\r\n    this.pageInfo.pageIndex = arg.pageInfo.pageIndex;\r\n    this.pageInfo.pageSize = arg.pageInfo.pageSize;\r\n    const search = arg.search;\r\n\r\n    this.load(search);\r\n  }\r\n\r\n  load(search?: { field: string, value: string}) {\r\n    const start = (this.pageInfo.pageIndex - 1) * this.pageInfo.pageSize;\r\n    const end = start + this.pageInfo.pageSize;\r\n    let items = [];\r\n    if (search) {\r\n      if (search.field === '*') {\r\n        items = this.listItems.filter(i => i.Name.indexOf(search.value) > -1 || i.Id.indexOf(search.value) > -1);\r\n      } else {\r\n        items = this.listItems.filter(f => f[search.field].indexOf(search.value) > -1);\r\n      }\r\n    } else {\r\n      items = this.listItems;\r\n    }\r\n    this.total = items.length;\r\n    this.items = items; // .slice(start, end);\r\n    this.hlp.componentRef.instance.loadData({\r\n      // total: this.total,\r\n      // pageSize: this.pageInfo.pageSize,\r\n      // pageIndex: this.pageInfo.pageIndex,\r\n      data: this.items\r\n    });\r\n  }\r\n  private getTargetRef() {\r\n    if (this.targetRef === 'Empty') {\r\n      return '';\r\n    } else {\r\n      return this.targetRef;\r\n    }\r\n  }\r\n}\r\nexport class BackwardRuleConverter implements TypeConverter {\r\n  constructor() { }\r\n\r\n  convertTo(data: any): string {\r\n    if (data) {\r\n      return 'ï¼å·²è®¾ç½®ï¼';\r\n    }\r\n    return 'ï¼æªè®¾ç½®ï¼';\r\n  }\r\n}\r\n\r\n","import { Injectable } from '@angular/core';\r\nimport { PerformerEntity } from './entities/performer.entity';\r\nimport { BizComponentEntity } from '../../domain/entities/biz-component.entity';\r\nimport { ReportingLineDataEntity } from './views/reporting-line/reporting-line-data.entity';\r\nimport { PerformerInfo } from './entities/performer-info.entity';\r\nimport { PerformerDescription } from './entities/performer-description';\r\n\r\n@Injectable()\r\nexport class PerformerUIState {\r\n    performersList: PerformerDescription[] = [];\r\n    curPerformer: any;\r\n    typeCollection = [\r\n        { text: 'ç¨æ·', value: 'wf.UserParticipant' },\r\n        { text: 'å²ä½', value: 'wf.PositionParticipant' },\r\n        { text: 'æä»¶åä¸è', value: 'wf.ComponentParticipant' },\r\n        { text: 'æ±æ¥å³ç³»', value: 'wf.ReportingLineParticipant'},\r\n        { text: 'ç©éµ', value: 'wf.MatrixParticipant'}\r\n    ];\r\n\r\n    performerInfo: PerformerInfo = { performers: [], components: [], reportingLines: [], matrixParticipants: [], options: null };\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\n@Injectable()\r\nexport class PerformerRepository {\r\n\r\n}\r\n","import { Injectable, Injector, ComponentFactoryResolver } from '@angular/core';\r\nimport { PerformerEditComponent } from './views/performer-edit/performer-edit.component';\r\nimport { BsModalService } from '@farris/ui-modal';\r\n\r\n@Injectable()\r\nexport class PerformerViewModel {\r\n    constructor(\r\n        private resolver: ComponentFactoryResolver,\r\n        private injector: Injector,\r\n        private modalService: BsModalService\r\n    ) { }\r\n}\r\n","import { ProcessDeUtil } from '../../../domain/process-de-util';\r\n\r\nexport class PerformerEntity {\r\n    constructor(id?: string, name?: string, type?: string) {\r\n        this.id = '_' + ProcessDeUtil.GenerateElementId();\r\n        this.performerId = id;\r\n        this.performerName = name;\r\n        this.type = type;\r\n    }\r\n    id: string;\r\n    performerId: string;\r\n    performerName: string;\r\n    type: string;\r\n    orgId?: string;\r\n    orgName?: string;\r\n    orgType?: string;\r\n    condition?: string;\r\n    tag?: string;\r\n}\r\n","import { PerformerEntity } from './performer.entity';\r\n\r\nexport class UserPerformerEntity extends PerformerEntity {\r\n  userType: string; // åºå®ç¨æ·è¿æ¯åéåä¸è\r\n  constructor(id?: string, name?: string, type?: string) {\r\n    super(id,name,type);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs/observable';\r\nimport { map } from 'rxjs/operators';\r\nimport { ReplaySubject } from 'rxjs/ReplaySubject';\r\n\r\n@Injectable()\r\nexport class PerformerConfigService {\r\n    private lookupConfig = new ReplaySubject<any>();\r\n    constructor(private http: HttpClient) {\r\n        this.http.get('/platform/runtime/wf/web/wf-proc-designer/assets/config/performerlookupconfig.json').subscribe((data) => {\r\n            this.lookupConfig.next(data);\r\n        });\r\n    }\r\n\r\n    getLookupConfig(): Observable<any> {\r\n        return this.lookupConfig.asObservable();\r\n    }\r\n}\r\n","import { Component, OnInit, HostBinding, ViewChild, Injector, NgZone, AfterViewInit, ElementRef } from '@angular/core';\r\nimport { SysFarrisLookupComponent } from '@gsp-sys/sysmgr-ui';\r\nimport { ProcessDesignerUIState } from '../../../../app/process-designer.uistate';\r\nimport { ExprEditMode, ExpressionService, InjectedType } from '@gsp-svc/expression';\r\nimport { UserPerformerEntity } from '../../entities/user-performer.entity';\r\nimport { PerformerConfigService } from '../../performer-config.service';\r\nimport { HttpService } from '@ecp-caf/caf-common';\r\nimport {MessagerService} from \"@farris/ui-messager\";\r\n\r\ndeclare var System: any;\r\n@Component({\r\n  selector: 'app-user-performer',\r\n  templateUrl: './user-performer.component.html',\r\n  styleUrls: ['./user-performer.component.scss']\r\n})\r\nexport class UserPerformerComponent implements OnInit, AfterViewInit {\r\n  @HostBinding('class')\r\n  cls = 'd-flex flex-fill h-100';\r\n\r\n  @ViewChild(SysFarrisLookupComponent) userHelp: SysFarrisLookupComponent;\r\n\r\n  @ViewChild('inputGroup') inputGroup: ElementRef;\r\n  showClearButton = false;\r\n\r\n  bindingData: { id?, name?} = {};\r\n\r\n  userTypeCollection = [\r\n    { text: 'åºå®ç¨æ·', value: 'user' },\r\n    { text: 'åéåä¸è', value: 'variable' }\r\n  ];\r\n  userType = this.userTypeCollection[0].value;\r\n  variableOrgTypes = [\r\n    { name: 'ç³»ç»ç¨æ·', value: 'Sys' },\r\n    { name: 'è¡æ¿äººå', value: 'Administrative_organization' }\r\n  ];\r\n  curOrgType = this.variableOrgTypes[0].value;\r\n  hasAdminOrg = false;\r\n  userTypeButtonNeedShow = false; // ç¨æ·ç±»ååéæé®æ¯å¦éè¦æ¾ç¤º\r\n\r\n  condition: string;\r\n  users: UserPerformerEntity[] = [];\r\n  constructor(\r\n    private designerUIState: ProcessDesignerUIState,\r\n    private expr: ExpressionService,\r\n    private injector: Injector,\r\n    private lookupConfig: PerformerConfigService,\r\n    private ngZone: NgZone,\r\n    private http?: HttpService,\r\n    private message?: MessagerService,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    let url = '/api/runtime/wf/v1.0/reportingOrgType/hasAdminOrg';\r\n    this.http.get(url).subscribe((data: any) => {\r\n      this.hasAdminOrg = data;\r\n    });\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    this.ngZone.runOutsideAngular(() => {\r\n      this.inputGroup.nativeElement.addEventListener(\r\n        'mouseenter',\r\n        this.onMouseEnter.bind(this)\r\n      );\r\n      this.inputGroup.nativeElement.addEventListener(\r\n        'mouseleave',\r\n        this.onMouseLeave.bind(this)\r\n      );\r\n    });\r\n  }\r\n\r\n  onMouseEnter(event) {\r\n    this.showClearButton = true;\r\n    if (this.showClearButton) {\r\n      this.toggleClearIcon(event, true);\r\n    }\r\n  }\r\n  onMouseLeave(event) {\r\n    this.showClearButton = false;\r\n    this.toggleClearIcon(event, false);\r\n  }\r\n  private toggleClearIcon(event: any, isShow = false) {\r\n    const str = isShow ? '' : 'none';\r\n    const clearIcon = event.target.querySelector('.input-group-clear');\r\n    if (clearIcon) {\r\n      clearIcon.style.display = str;\r\n    }\r\n  }\r\n  userTypeChange(data) {\r\n    // åæ¢ç±»åæ¶ï¼æ¸ç©ºusers\r\n    this.users = [];\r\n    // åæ¢ç±»åæ¶ï¼äººåç±»åèªå¨åæ¢æç³»ç»ç¨æ·\r\n    this.orgTypeChange('Sys');\r\n    // æè¡æ¿å¸®å©å¹¶ä¸åæ¢å°åéåä¸èææ¾ç¤º\r\n    this.userTypeButtonNeedShow = this.hasAdminOrg && data.data.value === 'variable';\r\n  }\r\n  clear(data: any) {\r\n    this.bindingData = {};\r\n    this.users = [];\r\n    this.variableOrgTypes = [\r\n      { name: 'ç³»ç»ç¨æ·', value: 'Sys' },\r\n      { name: 'è¡æ¿äººå', value: 'Administrative_organization' }\r\n    ];\r\n  }\r\n  selectUsers(data: any) {\r\n    // åºå®ç¨æ·\r\n    if (this.userType === this.userTypeCollection[0].value) {\r\n      this.lookupConfig.getLookupConfig().subscribe(re => {\r\n        // é¡¹ç®éç½®äºèªå·±çå¸®å©æ¶\r\n        if (re.user && re.user.impl) {\r\n          System.import(re.user.impl)\r\n            .then((moduleFactorys: any) => {\r\n              const moduleFactory: any = Object.values(moduleFactorys)[0];\r\n              const moduleRef = moduleFactory.create(this.injector);\r\n              moduleRef.instance.showHelp().subscribe(data => {\r\n                if (data && data.length > 0) {\r\n                  this.users = data.map(u => {\r\n                    const user = new UserPerformerEntity(u.id, u.name, 'wf.UserParticipant');\r\n                    user.orgId = u.orgId;\r\n                    user.orgName = u.orgName;\r\n                    user.userType = this.userTypeCollection[0].value;\r\n                    return user;\r\n                  });\r\n                }\r\n              });\r\n            });\r\n        } else { // å è½½é»è®¤å¸®å©\r\n          this.userHelp.showHelp();\r\n        }\r\n      });\r\n    } else {\r\n      this.showExprHelp();\r\n    }\r\n  }\r\n  editConditon() {\r\n    if (this.designerUIState.schemas.length > 0) {\r\n      for (const schema of this.designerUIState.schemas) {\r\n        this.expr.addSchema('Schema', schema);\r\n      }\r\n      if (this.designerUIState.schemas[0].entityTypes && this.designerUIState.schemas[0].entityTypes.length > 0) {\r\n        const entityType = this.designerUIState.schemas[0].entityTypes[0];\r\n        this.expr.addInjectedEntity(entityType.name, 'Schema',\r\n          entityType.name, InjectedType.EntityType);\r\n      }\r\n    }\r\n    const context = new Array();\r\n    if (this.designerUIState.procInstContext.length > 0) {\r\n      for (const variable of this.designerUIState.procInstContext) {\r\n        context.push(variable);\r\n      }\r\n    }\r\n    if (this.designerUIState.formalParameterContext.length > 0) {\r\n      for (const variable of this.designerUIState.formalParameterContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (this.designerUIState.participantContext.length > 0) {\r\n      for (const variable of this.designerUIState.participantContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (this.designerUIState.processVariableContext.length > 0) {\r\n      for (const variable of this.designerUIState.processVariableContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (this.designerUIState.activityComponentContext.length > 0) {\r\n      for (const variable of this.designerUIState.activityComponentContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (context.length > 0) {\r\n      for (const v of context) {\r\n        this.expr.addContext(v);\r\n      }\r\n    }\r\n    this.expr.setEditPattern(ExprEditMode.Conditional); // è¡¨è¾¾å¼å±ç°æ¨¡å¼ï¼é»è®¤ç®æç\r\n    this.expr.addExpressionText(this.condition);\r\n    this.expr.buildExpression().then((expressioninfo: string) => {\r\n      this.condition = expressioninfo;\r\n    });\r\n  }\r\n  usersSelect(data: any[]) {\r\n    this.users = data.map(u => {\r\n      const user = new UserPerformerEntity(u.id, u.name, 'wf.UserParticipant');\r\n      user.orgId = u.sysOrgId;\r\n      user.orgName = u.sysOrgName;\r\n      user.userType = this.userTypeCollection[0].value;\r\n\r\n      return user;\r\n    });\r\n  }\r\n  showExprHelp() {\r\n    if (this.designerUIState.schemas.length > 0) {\r\n      for (const schema of this.designerUIState.schemas) {\r\n        this.expr.addSchema('Schema', schema);\r\n      }\r\n      if (this.designerUIState.schemas[0].entityTypes && this.designerUIState.schemas[0].entityTypes.length > 0) {\r\n        const entityType = this.designerUIState.schemas[0].entityTypes[0];\r\n        this.expr.addInjectedEntity(entityType.name, 'Schema',\r\n          entityType.name, InjectedType.EntityType);\r\n      }\r\n    }\r\n    const context = new Array();\r\n    if (this.designerUIState.participantContext.length > 0) {\r\n      for (const variable of this.designerUIState.participantContext) {\r\n        context.push(variable);\r\n      }\r\n    }\r\n    if (this.designerUIState.processVariableContext.length > 0) {\r\n      for (const variable of this.designerUIState.processVariableContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (context.length > 0) {\r\n      for (const v of context) {\r\n        this.expr.addContext(v);\r\n      }\r\n    }\r\n    if (this.users.length > 0) {\r\n      this.expr.addExpressionText(this.users[0].performerId);\r\n    } else {\r\n      this.expr.addExpressionText('');\r\n    }\r\n    this.expr.buildExpression().then((expressioninfo: string) => {\r\n      const user = new UserPerformerEntity(expressioninfo, '', 'wf.UserParticipant');\r\n      user.tag = 'expression';\r\n      user.performerName = this.variableParticipantName(expressioninfo);\r\n      user.userType = this.userTypeCollection[1].value;\r\n      if(this.variableParticipantName(expressioninfo) === ''){\r\n        this.message.error('è¡æ¿äººåç±»åä¸è½ä½¿ç¨ä¸ä¸æåé');\r\n        this.users = [];\r\n      }else{\r\n        this.users = [user];\r\n      }\r\n      if(user.performerId.indexOf(\"GetContextParameter\") >= 0){ // æ ¹æ®è¡¨è¾¾å¼ä¸­çå½æ°åå¤æ­æ¯å¦ä½¿ç¨çæ¯ä¸ä¸æåé\r\n        this.variableOrgTypes = [\r\n          { name: 'ç³»ç»ç¨æ·', value: 'Sys' }\r\n        ];\r\n      } else {\r\n        this.variableOrgTypes = [\r\n          { name: 'ç³»ç»ç¨æ·', value: 'Sys' },\r\n          { name: 'è¡æ¿äººå', value: 'Administrative_organization' }\r\n        ];\r\n      }\r\n    });\r\n  }\r\n  getPerformers() {\r\n    this.users.map(user => {\r\n      if (user.orgId === undefined) {\r\n        user.orgType = this.curOrgType;\r\n        return user;\r\n      }\r\n    });\r\n    if (this.condition) {\r\n      this.users = this.users.map(user => {\r\n        user.condition = this.condition;\r\n        return user;\r\n      });\r\n    }\r\n    return this.users;\r\n  }\r\n  private variableParticipantName(expr: string): string {\r\n    for (const c of this.designerUIState.participantContext) {\r\n      if (expr.indexOf(c.key) > -1) {\r\n        if(this.curOrgType !== 'Sys'){ // è¡æ¿äººåç±»åä¸åè®¸ä½¿ç¨ä¸ä¸æåé\r\n          return '';\r\n        }\r\n        return c.name;\r\n      }\r\n    }\r\n    for (const c of this.designerUIState.processVariableContext) {\r\n      if (expr.indexOf(c.key) > -1) {\r\n        return c.name;\r\n      }\r\n    }\r\n    return 'ä¸å¡å­æ®µ';\r\n  }\r\n  orgTypeChange(data: any) {\r\n    if (data === 'Sys') {\r\n      this.curOrgType = this.variableOrgTypes[0].value;\r\n    } else {\r\n        this.curOrgType = this.variableOrgTypes[1].value;\r\n    }\r\n  }\r\n}\r\n","import { PerformerEntity } from './performer.entity';\r\n\r\nexport class PositionPerformerEntity extends PerformerEntity {\r\n    positionType: string;\r\n    constructor() {\r\n        super();\r\n    }\r\n}\r\n","import { Component, OnInit, HostBinding, ViewChild, ElementRef, NgZone, AfterViewInit } from '@angular/core';\r\nimport { HttpService } from '@ecp-caf/caf-common';\r\nimport { SysFarrisLookupComponent } from '@gsp-sys/sysmgr-ui';\r\nimport { ProcessDesignerUIState } from '../../../../app/process-designer.uistate';\r\nimport { ExprEditMode, ExpressionService, InjectedType } from '@gsp-svc/expression';\r\nimport { PositionPerformerEntity } from '../../entities/position-performer.entity';\r\n\r\n@Component({\r\n  selector: 'app-position-performer',\r\n  templateUrl: './position-performer.component.html',\r\n  styleUrls: ['./position-performer.component.scss']\r\n})\r\nexport class PositionPerformerComponent implements OnInit, AfterViewInit {\r\n  @HostBinding('class')\r\n  cls = 'd-flex flex-fill h-100';\r\n  @ViewChild(SysFarrisLookupComponent) posiHelp: SysFarrisLookupComponent;\r\n\r\n  @ViewChild('inputGroup') inputGroup: ElementRef;\r\n  showClearButton = false;\r\n\r\n  groupIcon = '<i class=\"f-icon f-icon-lookup\"></i>';\r\n\r\n  positionTypes = [\r\n    { value: '0', text: 'ç»ç»å²' },\r\n    { value: '1', text: 'éç¨å²' }\r\n  ];\r\n\r\n  condition: string;\r\n\r\n  filter = { };\r\n  position: PositionPerformerEntity = new PositionPerformerEntity();\r\n  constructor(\r\n    private http: HttpService,\r\n    public designerUIState: ProcessDesignerUIState,\r\n    private expr: ExpressionService,\r\n    private ngZone: NgZone,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    this.ngZone.runOutsideAngular(() => {\r\n      this.inputGroup.nativeElement.addEventListener(\r\n        'mouseenter',\r\n        this.onMouseEnter.bind(this)\r\n      );\r\n      this.inputGroup.nativeElement.addEventListener(\r\n        'mouseleave',\r\n        this.onMouseLeave.bind(this)\r\n      );\r\n    });\r\n  }\r\n\r\n  onMouseEnter(event) {\r\n    this.showClearButton = true;\r\n    if (this.showClearButton) {\r\n      this.toggleClearIcon(event, true);\r\n    }\r\n  }\r\n  onMouseLeave(event) {\r\n    this.showClearButton = false;\r\n    this.toggleClearIcon(event, false);\r\n  }\r\n  private toggleClearIcon(event: any, isShow = false) {\r\n    const str = isShow ? '' : 'none';\r\n    const clearIcon = event.target.querySelector('.input-group-clear');\r\n    if (clearIcon) {\r\n      clearIcon.style.display = str;\r\n    }\r\n  }\r\n\r\n  clear() {\r\n    this.position.performerId = null;\r\n    this.position.performerName = null;\r\n  }\r\n\r\n  positionTypeChange(data) {\r\n    if (data.value === '0') {\r\n      this.filter = { positionType: 0 };\r\n    } else {\r\n      this.filter = { positionType: 1 };\r\n    }\r\n    this.clear();\r\n    this.position.orgType = null;\r\n    this.position.orgId = null;\r\n  }\r\n\r\n  selectOrganition() {\r\n    if (this.position.positionType === '1') {\r\n      if (this.designerUIState.schemas.length > 0) {\r\n        for (const schema of this.designerUIState.schemas) {\r\n          this.expr.addSchema('Schema', schema);\r\n        }\r\n        if (this.designerUIState.schemas[0].entityTypes && this.designerUIState.schemas[0].entityTypes.length > 0) {\r\n          const entityType = this.designerUIState.schemas[0].entityTypes[0];\r\n          this.expr.addInjectedEntity(entityType.name, 'Schema',\r\n            entityType.name, InjectedType.EntityType);\r\n        }\r\n      }\r\n      this.expr.addExpressionText(this.position.orgId);\r\n      this.expr.buildExpression().then((expr: string) => {\r\n        this.position.orgId = expr;\r\n      });\r\n    }\r\n  }\r\n  selectPosition() {\r\n    this.posiHelp.showHelp();\r\n  }\r\n  editCondition() {\r\n    if (this.designerUIState.schemas.length > 0) {\r\n      for (const schema of this.designerUIState.schemas) {\r\n        this.expr.addSchema('Schema', schema);\r\n      }\r\n      if (this.designerUIState.schemas[0].entityTypes && this.designerUIState.schemas[0].entityTypes.length > 0) {\r\n        const entityType = this.designerUIState.schemas[0].entityTypes[0];\r\n        this.expr.addInjectedEntity(entityType.name, 'Schema',\r\n          entityType.name, InjectedType.EntityType);\r\n      }\r\n    }\r\n    const context = new Array();\r\n    if (this.designerUIState.procInstContext.length > 0) {\r\n      for (const variable of this.designerUIState.procInstContext) {\r\n        context.push(variable);\r\n      }\r\n    }\r\n    if (this.designerUIState.formalParameterContext.length > 0) {\r\n      for (const variable of this.designerUIState.formalParameterContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (this.designerUIState.participantContext.length > 0) {\r\n      for (const variable of this.designerUIState.participantContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (this.designerUIState.processVariableContext.length > 0) {\r\n      for (const variable of this.designerUIState.processVariableContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (this.designerUIState.activityComponentContext.length > 0) {\r\n      for (const variable of this.designerUIState.activityComponentContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (context.length > 0) {\r\n      for (const v of context) {\r\n        this.expr.addContext(v);\r\n      }\r\n    }\r\n    this.expr.setEditPattern(ExprEditMode.Conditional); // è¡¨è¾¾å¼å±ç°æ¨¡å¼ï¼é»è®¤ç®æç\r\n    this.expr.addExpressionText(this.position.condition);\r\n    this.expr.buildExpression().then((expressioninfo: string) => {\r\n      this.position.condition = expressioninfo;\r\n    });\r\n  }\r\n\r\n  orgTypeChange(re: any) {\r\n    this.position.orgType = re.data.value;\r\n  }\r\n  clearOrgType() {\r\n    this.position.orgType = null;\r\n  }\r\n  positionsSelect(data) {\r\n    if (data) {\r\n      this.position.performerId = data.id;\r\n      this.position.performerName = data.name;\r\n      this.position.type = 'wf.PositionParticipant';\r\n      if (!this.position.positionType) {\r\n        this.position.positionType = data.posType + '';\r\n        this.filter = {\r\n          positionType: data.posType\r\n        };\r\n      }\r\n    }\r\n  }\r\n  getPerformers() {\r\n    return this.position;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpService } from '@ecp-caf/caf-common';\r\nimport { Observable } from 'rxjs';\r\n\r\n@Injectable()\r\nexport class ComponentPerformerService {\r\n    constructor(private http: HttpService) {\r\n\r\n    }\r\n    getLookUpData(helpId: string, su: string, pageIndex: number, pageSiza: number, search?: any): Observable<any> {\r\n        let url = `/api/runtime/wf/v1.0/dtProcDefs/getHelpData?helpId=${helpId}&pageIndex=${pageIndex}&pageSize=${pageSiza}`;\r\n        if (search) {\r\n            url += `&searchValue=${JSON.stringify(search)}`;\r\n        }\r\n        return this.http.get(url);\r\n    }\r\n    getHelpMetaData(helpId: string, su: string): Observable<any> {\r\n        const url = `/api/runtime/lcm/v1.0/rt-metadatas/${helpId}`;\r\n        return this.http.get(url);\r\n    }\r\n}\r\n","import { ProcessDeUtil } from '../../../../domain/process-de-util';\r\n\r\nexport class ComponentPerformer {\r\n    constructor() {\r\n        this.id = ProcessDeUtil.GenerateElementId();\r\n    }\r\n    id: string;\r\n    name: string;\r\n    metadataId: string;\r\n    methodCode: string;\r\n    methodName: string;\r\n    actualParameters: Array<ActualParameter>;\r\n    condition: string;\r\n}\r\n\r\nexport class ActualParameter {\r\n    code: string;\r\n    value: string;\r\n    valueText: string;\r\n    tag: string;\r\n    fetchValueMode?: any;\r\n    fetchValueSetting?: any;\r\n}\r\n","import { Component, OnInit, ComponentFactoryResolver, Injector, Input, ViewChild, ElementRef, HostBinding, AfterViewInit, NgZone } from '@angular/core';\r\nimport { FormBuilder } from '@angular/forms';\r\nimport { ProcessDesignerUIState } from '../../../../app/process-designer.uistate';\r\nimport { ExpressionService, InjectedType, ExprEditMode } from '@gsp-svc/expression';\r\nimport { SessionService } from '@ecp-caf/caf-common';\r\nimport { BsModalService } from '@farris/ui-modal';\r\nimport { CommonComponentUiRTService, SelectorResult } from '@gsp-cmp/ccmp-ui';\r\nimport { SelectMetadataRTComponent, Metadata4RefDto, MetadataDto } from '@gsp-lcm/metadatart-selector';\r\nimport { GspComponent } from '@gsp-cmp/common-component';\r\nimport { DataColumn, DatagridComponent } from '@farris/ui-datagrid';\r\nimport { of, forkJoin } from 'rxjs';\r\nimport { RowEditParam } from '@farris/ui-datagrid/lib/types';\r\nimport { EditorTypes } from '@farris/ui-datagrid-editors';\r\nimport { LookupGridComponent } from '@farris/ui-lookup';\r\nimport { ComponentPerformerService } from './component-performer.service';\r\nimport { WebServiceParameter, ParameterFetchValueMode, HelpFetchValueSetting } from '@gsp-cmp/wscmp-models';\r\nimport { ComponentPerformer, ActualParameter } from './component-performer.entity';\r\nimport { ProcessDeUtil } from '../../../../domain/process-de-util';\r\n\r\n@Component({\r\n  selector: 'app-component-performer',\r\n  templateUrl: './component-performer.component.html',\r\n  styleUrls: ['./component-performer.component.scss'],\r\n  providers: [ComponentPerformerService]\r\n})\r\nexport class ComponentPerformerComponent implements OnInit, AfterViewInit {\r\n  @HostBinding('class')\r\n  cls = 'farris-main-area flex-column';\r\n\r\n  private componentPerformer: ComponentPerformer;\r\n  @ViewChild(DatagridComponent) grid: DatagridComponent;\r\n  @ViewChild(LookupGridComponent) lookup: LookupGridComponent;\r\n\r\n  @ViewChild('inputGroup') inputGroup: ElementRef;\r\n  showClearButton = false;\r\n\r\n\r\n  @Input()\r\n  set component(cmp: ComponentPerformer) {\r\n    if (cmp && cmp.methodCode) {\r\n      this.service.getHelpMetaData(cmp.metadataId, '').subscribe(re => {\r\n        const c = JSON.parse(re.content);\r\n        const operation = c.operations.find(o => o.code === cmp.methodCode);\r\n        if (operation) {\r\n          cmp.actualParameters = cmp.actualParameters.map(a => {\r\n            const p = operation.parameters.find(i => i.code === a.code);\r\n            if (p) {\r\n              return {\r\n                code: a.code,\r\n                name: p.name,\r\n                value: a.value,\r\n                valueText: a.valueText ? a.valueText : a.value,\r\n                description: p.description,\r\n                tag: a.tag,\r\n                fetchValueMode: p.fetchValueMode,\r\n                fetchValueSetting: p.fetchValueSetting\r\n              };\r\n            } else {\r\n              throw new Error('å½åæä»¶æ¹æ³åæ°ä¸ä¸è´ï¼è¯·æ´æ°ï¼');\r\n            }\r\n          });\r\n          this.componentPerformer = cmp;\r\n        } else {\r\n          throw new Error('å½åæä»¶å·²ä¸å­å¨æ­¤æ¹æ³ï¼è¯·æ´æ°ï¼');\r\n        }\r\n      });\r\n    } else {\r\n      this.componentPerformer = new ComponentPerformer();\r\n    }\r\n  }\r\n  get component() {\r\n    return this.componentPerformer;\r\n  }\r\n\r\n  curParameter: ActualParameter;\r\n  columns = [\r\n    { field: 'code', width: 60, title: 'ç¼å·' },\r\n    { field: 'name', width: 60, title: 'åç§°' },\r\n    { field: 'description', width: 60, title: 'æè¿°', showTips: true },\r\n    {\r\n      field: 'valueText', width: 100, title: 'åæ°å¼',\r\n      editor: {\r\n        type: 'input-group',\r\n        options: {\r\n          groupText: '<i class=\"f-icon f-icon-lookup\"></i>',\r\n          editable: false,\r\n          clickHandle: (e) => {\r\n            e.formControl.setValue(e.instance.value ? e.instance.value : '');\r\n            this.showExprHelp(e);\r\n          },\r\n          clear: (e) => {\r\n            // æ¸çvalueTextï¼ä¹åºè¯¥æ¸çvalue\r\n            e.rowData.value = '';\r\n            for (const p of this.component.actualParameters) {\r\n              if (p.code === e.rowId) {\r\n                p.value = '';\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  ];\r\n  helpInfo = {\r\n    helpId: '',\r\n    su: '',\r\n    columns: [],\r\n    displayType: 'List',\r\n    items: [],\r\n    pageInfo: {\r\n      pageIndex: 1,\r\n      pageList: [10, 20, 30, 50],\r\n      pageSize: 20\r\n    },\r\n    search: { category: 'search'},\r\n    title: 'å¸®å©',\r\n    total: 100,\r\n    fieldInfo: {\r\n      idField: 'id',\r\n      textField: 'name',\r\n      valueField: 'id'\r\n    }\r\n  };\r\n  cell: any;\r\n  constructor(\r\n    private formBuilder: FormBuilder,\r\n    private designerState: ProcessDesignerUIState,\r\n    private expr: ExpressionService,\r\n    private resolver: ComponentFactoryResolver,\r\n    private injector: Injector,\r\n    private sessionSrc: SessionService,\r\n    private modalService: BsModalService,\r\n    private componentService: CommonComponentUiRTService,\r\n    private ngZone: NgZone,\r\n    private service: ComponentPerformerService,\r\n    private util: ProcessDeUtil\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n  ngAfterViewInit(): void {\r\n    this.ngZone.runOutsideAngular(() => {\r\n      this.inputGroup.nativeElement.addEventListener(\r\n        'mouseenter',\r\n        this.onMouseEnter.bind(this)\r\n      );\r\n      this.inputGroup.nativeElement.addEventListener(\r\n        'mouseleave',\r\n        this.onMouseLeave.bind(this)\r\n      );\r\n    });\r\n  }\r\n\r\n  onMouseEnter(event) {\r\n    this.showClearButton = true;\r\n    if (this.showClearButton) {\r\n      this.toggleClearIcon(event, true);\r\n    }\r\n  }\r\n  onMouseLeave(event) {\r\n    this.showClearButton = false;\r\n    this.toggleClearIcon(event, false);\r\n  }\r\n  private toggleClearIcon(event: any, isShow = false) {\r\n    const str = isShow ? '' : 'none';\r\n    const clearIcon = event.target.querySelector('.input-group-clear');\r\n    if (clearIcon) {\r\n      clearIcon.style.display = str;\r\n    }\r\n  }\r\n\r\n  selectChanged(event) {\r\n    this.curParameter = event.data;\r\n  }\r\n  beforeEdit = (param: RowEditParam) => {\r\n    const rowData = param.rowData as any;\r\n    this.curParameter = rowData;\r\n    switch (rowData.fetchValueMode) {\r\n      case ParameterFetchValueMode.express:\r\n        param.column.editor = {\r\n          type: 'input-group',\r\n          options: {\r\n            groupText: '<i class=\"f-icon f-icon-lookup\"></i>',\r\n            editable: false,\r\n            clickHandle: (e) => {\r\n              e.formControl.setValue(e.instance.value ? e.instance.value : '');\r\n              this.showExprHelp(e);\r\n            },\r\n            clear: (e) => {\r\n              // æ¸çvalueTextï¼ä¹åºè¯¥æ¸çvalue\r\n              e.rowData.value = '';\r\n              for (const p of this.component.actualParameters) {\r\n                if (p.code === e.rowId) {\r\n                  p.value = '';\r\n                }\r\n              }\r\n            }\r\n          }\r\n        };\r\n        break;\r\n      case ParameterFetchValueMode.none:\r\n        param.column.editor = {\r\n          type: 'input-group',\r\n          options: {\r\n            groupText: '<i class=\"f-icon f-icon-lookup\"></i>',\r\n            editable: false,\r\n            clickHandle: (e) => {\r\n              e.formControl.setValue(e.instance.value ? e.instance.value : '');\r\n              this.showExprHelp(e);\r\n            },\r\n            clear: (e) => {\r\n              // æ¸çvalueTextï¼ä¹åºè¯¥æ¸çvalue\r\n              e.rowData.value = '';\r\n              for (const p of this.component.actualParameters) {\r\n                if (p.code === e.rowId) {\r\n                  p.value = '';\r\n                }\r\n              }\r\n            }\r\n          }\r\n        };\r\n        break;\r\n      case ParameterFetchValueMode.const:\r\n        param.column.editor = { type: EditorTypes.TEXTBOX, options: {} };\r\n        break;\r\n      case ParameterFetchValueMode.enum:\r\n        param.column.editor = { type: EditorTypes.TEXTBOX, options: {} };\r\n        break;\r\n      case ParameterFetchValueMode.help:\r\n        param.column.editor = {\r\n          type: 'input-group',\r\n          options: {\r\n            groupText: '<i class=\"f-icon f-icon-lookup\"></i>',\r\n            editable: false,\r\n            clickHandle: (e) => {\r\n              this.cell = e;\r\n              this.helpInfo.helpId = (rowData.fetchValueSetting as HelpFetchValueSetting).helpId;\r\n              this.helpInfo.su = (rowData.fetchValueSetting as HelpFetchValueSetting).serviceUnit;\r\n              this.helpInfo.pageInfo = {\r\n                pageIndex: 1,\r\n                pageList: [10, 20, 30, 50],\r\n                pageSize: 20\r\n              };\r\n              this.helpInfo.search = { category: 'search' };\r\n              this.getHelpInfo();\r\n            },\r\n            clear: (e) => {\r\n              // æ¸çvalueTextï¼ä¹åºè¯¥æ¸çvalue\r\n              e.rowData.value = '';\r\n              for (const p of this.component.actualParameters) {\r\n                if (p.code === e.rowId) {\r\n                  p.value = '';\r\n                }\r\n              }\r\n            }\r\n          }\r\n        };\r\n        break;\r\n    }\r\n    return of(true);\r\n  }\r\n  afterEdit = (rowIndex: number, rowData: any, column?: DataColumn) => {\r\n    return of(true);\r\n  }\r\n\r\n  endEdit(e: any) {\r\n    // ææ¬æ¡ç¼è¾åæ¶ä¿®æ¹value\r\n    if (e.rowData.fetchValueMode === ParameterFetchValueMode.const || e.rowData.fetchValueMode === ParameterFetchValueMode.enum) {\r\n      this.component.actualParameters[e.rowIndex].value = this.component.actualParameters[e.rowIndex].valueText;\r\n    }\r\n  }\r\n\r\n  clear() {\r\n    this.componentPerformer.name = '';\r\n    this.componentPerformer.metadataId = '';\r\n    this.componentPerformer.methodCode = '';\r\n    this.componentPerformer.methodName = '';\r\n    this.componentPerformer.condition = '';\r\n    this.componentPerformer.actualParameters = new Array();\r\n  }\r\n\r\n  selectComponent() {\r\n    const compFactory = this.resolver.resolveComponentFactory(SelectMetadataRTComponent);\r\n    const compRef = compFactory.create(this.injector);\r\n    compRef.instance.typeList = 'WebServiceComponent'; // ç®ååªè½æ ¹æ®åæ°æ®ç±»åè¿æ»¤ï¼åç»­æ·»å æ ç­¾è¿æ»¤\r\n    compRef.instance.selectedMetadata.subscribe(($event: Metadata4RefDto) => {\r\n      try {\r\n        const meta: MetadataDto = $event.metadata;\r\n        this.openComponentSelectorNew(meta.id, this.sessionSrc.getUserSessionId());\r\n      } catch {\r\n        console.log('$event', $event);\r\n        throw new Error('è·åè§£ææä»¶åºé' + $event);\r\n      }\r\n    });\r\n\r\n    const modalConfig = {\r\n      title: 'æä»¶éæ©',\r\n      width: 980,\r\n      height: 548,\r\n      showButtons: false\r\n    };\r\n    const dialog = this.modalService.show(compRef, modalConfig);\r\n    compRef.instance.closeModalEmitter.subscribe($event => dialog.close());\r\n  }\r\n  private openComponentSelectorNew(metadataId: string, sessionId: string) {\r\n    this.componentService.openSelector(metadataId, sessionId).subscribe(\r\n      (selectorResult: SelectorResult) => {\r\n        selectorResult.confirmEvent.subscribe(\r\n          (result: GspComponent) => {\r\n            if (result) {\r\n              this.component.name = result.name;\r\n              this.component.metadataId = result.id;\r\n              this.component.methodCode = result.operations[0].code;\r\n              this.component.methodName = result.operations[0].name;\r\n              this.component.actualParameters = [];\r\n\r\n              if (result.operations[0].parameters && result.operations[0].parameters.length > 0) {\r\n                this.component.actualParameters = result.operations[0].parameters\r\n                  .map((p: WebServiceParameter) => (\r\n                    {\r\n                      code: p.code,\r\n                      name: p.name,\r\n                      value: '',\r\n                      valueText: '',\r\n                      description: p.description,\r\n                      fetchValueMode: p.fetchValueMode,\r\n                      fetchValueSetting: p.fetchValueSetting\r\n                    }) as any);\r\n              }\r\n            }\r\n          });\r\n      });\r\n  }\r\n  showExprHelp(e: any) {\r\n    if (this.designerState.schemas.length > 0) {\r\n      for (const schema of this.designerState.schemas) {\r\n        this.expr.addSchema('Schema', schema);\r\n      }\r\n      if (this.designerState.schemas[0].entityTypes && this.designerState.schemas[0].entityTypes.length > 0) {\r\n        const entityType = this.designerState.schemas[0].entityTypes[0];\r\n        this.expr.addInjectedEntity(entityType.name, 'Schema',\r\n          entityType.name, InjectedType.EntityType);\r\n      }\r\n    }\r\n    const context = new Array();\r\n    if (this.designerState.procInstContext.length > 0) {\r\n      for (const variable of this.designerState.procInstContext) {\r\n        context.push(variable);\r\n      }\r\n    }\r\n    if (this.designerState.formalParameterContext.length > 0) {\r\n      for (const variable of this.designerState.formalParameterContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (this.designerState.participantContext.length > 0) {\r\n      for (const variable of this.designerState.participantContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (this.designerState.processVariableContext.length > 0) {\r\n      for (const variable of this.designerState.processVariableContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (context.length > 0) {\r\n      for (const v of context) {\r\n        this.expr.addContext(v);\r\n      }\r\n    }\r\n    this.expr.setEditPattern(ExprEditMode.Advanced); // é»è®¤æå¼é«çº§è¡¨è¾¾å¼ç¼è¾å¨\r\n    this.expr.addExpressionText(e.instance.value);\r\n    this.expr.buildExpression().then((d: string) => {\r\n      if (d) {\r\n        e.formControl.setValue(d);\r\n        e.instance.cd.detectChanges();\r\n        e.rowData.value = d;\r\n        for (const p of this.component.actualParameters) {\r\n          if (p.code === e.rowId) {\r\n            p.value = d;\r\n          }\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  getPerformers() {\r\n    this.grid.endCellEdit();\r\n    console.log(this.component);\r\n    return this.component;\r\n  }\r\n\r\n  private getHelpInfo() {\r\n    forkJoin(this.service.getHelpMetaData(this.helpInfo.helpId, this.helpInfo.su),\r\n      this.service.getLookUpData(this.helpInfo.helpId, this.helpInfo.su,\r\n        this.helpInfo.pageInfo.pageIndex, this.helpInfo.pageInfo.pageSize, this.helpInfo.search)).subscribe(re => {\r\n        if (re[0]) {\r\n          const meta = re[0];\r\n          const help = JSON.parse(meta.content) as any;\r\n          this.helpInfo.columns = help.dataSource.columns;\r\n          this.helpInfo.displayType = help.displayType;\r\n          this.helpInfo.fieldInfo = {\r\n            idField: help.idField,\r\n            valueField: help.valueField,\r\n            textField: help.textField\r\n          };\r\n        } else {\r\n          throw new Error('å¸®å©åæ°æ®ä¸å­å¨ï¼');\r\n        }\r\n        if (re[1]) {\r\n          const helpData = re[1];\r\n          this.helpInfo.items = helpData.items;\r\n          this.helpInfo.title = helpData.title;\r\n          this.helpInfo.total = helpData.total;\r\n          this.lookup.showDialog();\r\n        } else {\r\n          throw new Error('è·åå¸®å©æ°æ®æºå¤±è´¥ï¼');\r\n        }\r\n      });\r\n  }\r\n\r\n  dictPicked = (rowData) => {\r\n    if (this.cell) {\r\n      this.cell.formControl.setValue(this.util.getValue(rowData, this.helpInfo.fieldInfo.textField));\r\n      this.cell.instance.cd.detectChanges();\r\n      this.cell.rowData.value = this.util.getValue(rowData, this.helpInfo.fieldInfo.valueField);\r\n      for (const p of this.component.actualParameters) {\r\n        if (p.code === this.cell.rowId) {\r\n          p.value = this.util.getValue(rowData, this.helpInfo.fieldInfo.valueField);\r\n        }\r\n      }\r\n      return of(true);\r\n    }\r\n  }\r\n  pagerChanged(data: any) {\r\n    if (data) {\r\n      this.helpInfo.pageInfo.pageIndex = data.pageIndex;\r\n      this.helpInfo.pageInfo.pageSize = data.pageSize;\r\n      this.service.getLookUpData(this.helpInfo.helpId, this.helpInfo.su,\r\n        this.helpInfo.pageInfo.pageIndex, this.helpInfo.pageInfo.pageSize, this.helpInfo.search)\r\n        .subscribe(re => {\r\n          this.helpInfo.items = re.items;\r\n          this.helpInfo.title = re.title;\r\n          this.helpInfo.total = re.total;\r\n          this.lookup.loadData(re);\r\n        });\r\n    }\r\n  }\r\n  search(data) {\r\n    console.log(data);\r\n    this.helpInfo.search = { category: 'search' };\r\n    if (data) {\r\n      const searchInfo = {\r\n        searchField: data.field || data.search.field,\r\n        searchValue: data.value || data.search.value\r\n      };\r\n      this.helpInfo.search = Object.assign(this.helpInfo.search, searchInfo);\r\n      this.service.getLookUpData(this.helpInfo.helpId, this.helpInfo.su,\r\n        this.helpInfo.pageInfo.pageIndex, this.helpInfo.pageInfo.pageSize, this.helpInfo.search)\r\n        .subscribe(re => {\r\n          this.helpInfo.items = re.items;\r\n          this.helpInfo.title = re.title;\r\n          this.helpInfo.total = re.total;\r\n          this.lookup.loadData(re);\r\n        });\r\n    }\r\n  }\r\n}\r\n","import { ProcessDeUtil } from '../../../../domain/process-de-util';\r\nimport {PerformerEntity} from \"../../entities/performer.entity\";\r\nexport enum ReportingRank {\r\n    DirectSuperior = 'DirectSuperior',\r\n    HigherSuperior = 'HigherSuperior'\r\n}\r\nexport class ReportingLineDataEntity extends PerformerEntity {\r\n  constructor(id?: string, name?: string, type?: string) {\r\n    super(id,name,type);\r\n  }\r\n  reportingLineDefId: string;\r\n  reportingLineDefName: string;\r\n  refOrgId: string;\r\n  refOrgName: string;\r\n  refUserId: string;\r\n  refEmployeeId: string;\r\n  dimension: string;\r\n  condition: string;\r\n  reportingReferObject: string;\r\n}\r\n\r\n","import { ILookupHttpService, RemoteParams, LookupGridResult } from '@farris/ui-lookup';\r\nimport { Injectable } from '@angular/core';\r\nimport { HttpService } from '@ecp-caf/caf-common';\r\nimport { Observable, of } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\n\r\n@Injectable()\r\nexport class WfReportDefHelpService implements ILookupHttpService {\r\n\r\n  constructor(\r\n    private http: HttpService\r\n  ) {\r\n  }\r\n\r\n  getData(url: string, params?: RemoteParams): Observable<LookupGridResult> {\r\n    const customData = params.customData;\r\n    const index = params.pageIndex || 1;\r\n    const size = params.pageSize || 20;\r\n    const searchValue = JSON.parse(params.searchValue);\r\n    if (searchValue.searchValue || customData.filter) {\r\n      let query = '{';\r\n      if (searchValue.searchValue) {\r\n        if (searchValue.searchField === '*') {\r\n          query += `\"codeOrNameLike\":\"${searchValue.searchValue}\",`;\r\n        } else {\r\n          query += `\"${searchValue.searchField}\":\"${searchValue.searchValue}\",`;\r\n        }\r\n      }\r\n      if (customData.filter) {\r\n        const keys = Object.keys(customData.filter);\r\n        if (keys && keys.length > 0) {\r\n          for (const key of keys) {\r\n            if (customData.filter[key]) {\r\n              query += `\"${key}\":\"${customData.filter[key]}\",`;\r\n            }\r\n          }\r\n        }\r\n      }\r\n      if (query.substr(query.length - 1, 1) === ',') {\r\n        query = query.substring(0, query.length - 1);\r\n      }\r\n      query += '}';\r\n      query = encodeURIComponent(query);\r\n      query += `&pageIndex=${index}&pageSize=${size}`;\r\n      url += '?pageFilter=' + query;\r\n    } else {\r\n      url += `?pageIndex=${index}&pageSize=${size}`;\r\n    }\r\n    return this.http.get(url).pipe(\r\n      map((re: any) => ({\r\n        items: re.content,\r\n        total: re.totalElements,\r\n        pageInfo: {\r\n          pageIndex: re.pageable.pageNumber + 1,\r\n          pageSize: re.pageable.pageSize,\r\n          pageList: [20, 40, 60, 80, 100],\r\n          enablePager: true\r\n        }\r\n      }))\r\n    );\r\n  }\r\n}\r\n","import { Component, OnInit, Input, Output, EventEmitter, ViewChild } from '@angular/core';\r\nimport { Observable, of } from 'rxjs';\r\nimport { PickedResult, LookupGridComponent, ServerSideToken } from '@farris/ui-lookup';\r\nimport { WfReportDefHelpService } from './wf-report-def-help.service';\r\n\r\n\r\n@Component({\r\n  selector: 'app-wf-report-def-help',\r\n  template: `\r\n    <farris-lookup-grid #lookup\r\n      [disabled]=\"disabled\"\r\n      [editable]=\"false\"\r\n      [bindingData]=\"bindingData\"\r\n      [(ngModel)]=\"displayTxt\"\r\n      [columns]=\"columns\"\r\n      [singleSelect]=\"singleSelect\"\r\n      [title]=\"title\"\r\n      [displayType]=\"'List'\"\r\n      [uri]=\"dataUri\"\r\n      [idField]=\"'id'\"\r\n      [pageIndex]=\"pageIndex\"\r\n      [pageSize]=\"pageSize\"\r\n      [pagination]=\"pagination\"\r\n      [valueField]=\"'id'\"\r\n      [textField]=\"'name'\"\r\n      (clear)=\"afterClear($event)\"\r\n      [dialogWidth]=\"width\"\r\n      [dictPicking]=\"beforeOpen\"\r\n      [dictPicked]=\"dictPicked\">\r\n    </farris-lookup-grid>\r\n  `,\r\n  styles: [],\r\n  providers: [{ provide: ServerSideToken, useClass: WfReportDefHelpService }]\r\n})\r\nexport class WfReportDefHelpComponent implements OnInit {\r\n  /** æ é¢ */\r\n  @Input() title: string;\r\n  /** å®½åº¦ */\r\n  @Input() width = 550;\r\n  /** åæ°æº */\r\n  @Input() sourceType: 'matrixField';\r\n  /** åªè¯» */\r\n  @Input() disabled = false;\r\n  /** æ¯å¦åé */\r\n  @Input() singleSelect = true;\r\n  /** æ¯å¦åé¡µï¼é»è®¤true */\r\n  @Input() pagination = true;\r\n  /** é¦æ¬¡å è½½ç¬¬å é¡µï¼é»è®¤1 */\r\n  @Input() pageIndex = 1;\r\n  /** æ¯é¡µå è½½æ°ï¼é»è®¤20 */\r\n  @Input() pageSize = 20;\r\n  /** ç»å®å°å¸®å©ä¸çæ°æ®ï¼åå§æ¾ç¤ºå¼ç¨ */\r\n  @Input() displayTxt: string;\r\n  /** å­å¨å¸®å©éæ©çå¯¹è±¡ */\r\n  @Input() bindingData: { id: string, name: string };\r\n  /** è¿æ»¤æ¡ä»¶ */\r\n  @Input() filter: any = {};\r\n\r\n  // @Input() beforeClose: (selectData: any) => Observable<PickedResult>;\r\n  /** å¸®å©éæ©åäºä»¶ */\r\n  @Output() afterConfirm: EventEmitter<any> = new EventEmitter<any>();\r\n  @Output() dialogClosed: EventEmitter<any> = new EventEmitter<any>();\r\n  @Output() clear: EventEmitter<any> = new EventEmitter<any>();\r\n  dataUri: string;\r\n  columns: any[] = [];\r\n\r\n  @ViewChild('lookup') public lookUp: LookupGridComponent;\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n    this.columns = [\r\n      { title: 'ç¼å·', field: 'code', width: '80', searchField: 'code', },\r\n      { title: 'åç§°', field: 'name', width: '100', searchField: 'name', }\r\n    ];\r\n    // this.dataUri = this.uiState.dataUri;\r\n    this.dataUri = '/api/runtime/wf/v1.0/reportingLineDefinitions/query';\r\n    // å¿é¡»è¦æï¼å¦ååå§éä¸­ä¸èµ·ä½ç¨\r\n    this.lookUp.mapFields = { id: 'id', name: 'name' };\r\n  }\r\n\r\n  afterClear(arg: any) {\r\n    this.clear.next(arg);\r\n  }\r\n\r\n  /** å¸®å©åäºä»¶,å¼ºè¡ä¼ éè¿æ»¤æ¡ä»¶ */\r\n  beforeOpen = (arg) => {\r\n    // æè¿æ»¤æ°æ®åå½åçæ°æ®ä¼ éå°serviceå±\r\n    return of({\r\n      showDialog: true, data: {\r\n        filter: this.filter\r\n      }\r\n    });\r\n  }\r\n  dictPicked = (arg: any): Observable<PickedResult> => {\r\n    this.afterConfirm.next(arg);\r\n    return of({ closeDialog: true });\r\n  }\r\n\r\n\r\n  /** æå¨æ¾ç¤ºå¸®å© */\r\n  public showHelp() {\r\n    this.lookUp.showDialog();\r\n  }\r\n}\r\n","import { Component, OnInit, ViewChild, HostBinding, ElementRef, NgZone, Input } from '@angular/core';\r\nimport { HttpService } from '@ecp-caf/caf-common';\r\nimport { ReportingLineDefinitionEntity } from './reporting-line-definition.entity';\r\nimport { ReportingLineDataEntity } from './reporting-line-data.entity';\r\nimport { reportingLineDimensionEntity } from './reporting-line-dimension.entity';\r\nimport { of } from 'rxjs';\r\nimport { ProcessDesignerUIState } from '../../../../app/process-designer.uistate';\r\nimport { ExprEditMode, ExpressionService, InjectedType } from '@gsp-svc/expression';\r\nimport { LookupGridComponent } from '@farris/ui-lookup';\r\nimport { SysFarrisTreeHelpComponent } from \"@gsp-sys/sysmgr-ui\";\r\nimport { PerformerEntity } from \"../../entities/performer.entity\";\r\nimport { WfReportDefHelpComponent } from \"./service/wf-report-def-help.component\";\r\ndeclare var System: any;\r\n\r\n@Component({\r\n  selector: 'app-reporting-line',\r\n  templateUrl: './reporting-line.component.html',\r\n  styleUrls: ['./reporting-line.component.scss']\r\n})\r\nexport class ReportingLineComponent implements OnInit {\r\n  @HostBinding('class')\r\n  cls = 'd-flex flex-fill h-100';\r\n  treeFilter = '';\r\n  display: string = 'none';\r\n  typeReadOnly = false;\r\n  groupIcon2 = '<i class=\"f-icon f-icon-lookup\"></i>';\r\n  defName = '';\r\n\r\n  /**\r\n   * æ±æ¥å³ç³»æ°æ®\r\n   */\r\n  reportingLineDataEntity: ReportingLineDataEntity = new ReportingLineDataEntity();\r\n\r\n  /**\r\n   * æ±æ¥å³ç³»å®ä¹åè¡¨\r\n   */\r\n  reportingLineDefinitionList: ReportingLineDefinitionEntity[] = [];\r\n  reportingLineDefinition: any;\r\n\r\n  reportingLineDimension: reportingLineDimensionEntity[] = [];\r\n  @ViewChild(WfReportDefHelpComponent) reportingLineDefHelp: WfReportDefHelpComponent;\r\n\r\n  @Input()\r\n  set setReportingLineDataEntity(dataEntity: ReportingLineDataEntity) {\r\n    this.defName = dataEntity.reportingLineDefName;\r\n    this.reportingLineDataEntity = dataEntity;\r\n    const defUrl = '/api/runtime/wf/v1.0/reportingLineDefinitions/' + dataEntity.reportingLineDefId;\r\n    this.http.get(defUrl).subscribe((re: any) => {\r\n      this.reportingLineDefinition = re;\r\n      this.designerUIState.dimensions = [\r\n        { value: 'higherSuperior', text: 'é´æ¥ä¸çº§' }\r\n      ];\r\n      // å¼å®¹åå²æ°æ®\r\n      if (JSON.parse(this.reportingLineDefinition.dimensions)[0].code !== 'directSuperior') {\r\n        const di = {\r\n          value: 'directSuperior',\r\n          text: 'ç´æ¥ä¸çº§'\r\n        };\r\n        this.designerUIState.dimensions.push(di);\r\n      }\r\n      for (const dimension of JSON.parse(this.reportingLineDefinition.dimensions)) {\r\n        const di = {\r\n          value: dimension.code,\r\n          text: dimension.name\r\n        };\r\n        this.designerUIState.dimensions.push(di);\r\n      }\r\n    });\r\n    this.users = [dataEntity];\r\n    if (dataEntity.refUserId) {\r\n      this.users[0].performerName = this.variableParticipantName(dataEntity.refUserId);\r\n      this.curReportingRefer = this.reportingReferObjects[1].value;\r\n      this.display = 'block';\r\n    } else if (dataEntity.refEmployeeId) {\r\n      this.users[0].performerName = dataEntity.refEmployeeId;\r\n      this.curReportingRefer = this.reportingReferObjects[2].value;\r\n      this.display = 'block';\r\n    } else {\r\n      this.curReportingRefer = this.reportingReferObjects[0].value;\r\n    }\r\n    if (dataEntity.reportingLineDefId) {\r\n      this.typeReadOnly = true;\r\n    }\r\n  }\r\n\r\n  @ViewChild(LookupGridComponent) lookup: LookupGridComponent;\r\n  @ViewChild(SysFarrisTreeHelpComponent) orgHelp: SysFarrisTreeHelpComponent;\r\n  @ViewChild('inputGroup') inputGroup: ElementRef;\r\n  @ViewChild('inputGroup1') inputGroup1: ElementRef;\r\n  showClearButton = false;\r\n  condition: string;\r\n  items: ReportingLineDefinitionEntity[] = [];\r\n  users: PerformerEntity[] = [];\r\n  departments: PerformerEntity[] = [];\r\n  pageIndex = 1;\r\n  pageSize = 20;\r\n  pageList = [10, 20, 30, 50, 100];\r\n  total = 0;\r\n\r\n  /**\r\n   * æ±æ¥ç±»åæ¾ç¤ºå\r\n   */\r\n  columns = [\r\n    { title: 'ç¼å·', field: 'code', width: 100 },\r\n    { title: 'åç§°', field: 'name', width: 100 }\r\n  ];\r\n\r\n  /**\r\n   *  åä¸èåè¡¨æ±æ¥å³ç³»æ¾ç¤ºå­æ®µ\r\n   */\r\n  reportingReferObjects = [\r\n    { name: 'ç»ç»', value: 'dept' },\r\n    { name: 'ç³»ç»ç¨æ·', value: 'sysUser' },\r\n    { name: 'åå·¥', value: 'employee' }\r\n  ];\r\n  curReportingRefer = this.reportingReferObjects[0].value;\r\n\r\n\r\n  constructor(\r\n    private http: HttpService,\r\n    public designerUIState: ProcessDesignerUIState,\r\n    private expr: ExpressionService,\r\n    private ngZone: NgZone,\r\n  ) {\r\n    this.getReportingLineType();\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  /**\r\n   * è·åæ±æ¥å³ç³»ç±»å\r\n   */\r\n  getReportingLineType() {\r\n    const url = '/api/runtime/wf/v1.0/reportingLineDefinitions';\r\n    this.http.get(url).subscribe((re: any) => {\r\n      this.reportingLineDefinitionList = re;\r\n      this.items = this.reportingLineDefinitionList.slice(0, this.pageSize);\r\n      this.total = this.reportingLineDefinitionList.length;\r\n    });\r\n  }\r\n\r\n  onclear() {\r\n    this.reportingLineDataEntity = new ReportingLineDataEntity();\r\n  }\r\n\r\n  // åç§ç±»åæ¹å\r\n  referObjectChange(data: any) {\r\n    if (data === 'dept') {\r\n      this.display = 'none';\r\n      this.curReportingRefer = this.reportingReferObjects[0].value;\r\n      this.reportingLineDataEntity.refUserId = null;\r\n      this.reportingLineDataEntity.refEmployeeId = null;\r\n    } else if (data === 'sysUser') {\r\n      this.display = 'block';\r\n      this.curReportingRefer = this.reportingReferObjects[1].value;\r\n      this.reportingLineDataEntity.refOrgId = null;\r\n      this.reportingLineDataEntity.refOrgName = null;\r\n      this.reportingLineDataEntity.refEmployeeId = null;\r\n    } else { // åå·¥çæåµ\r\n      this.display = 'block';\r\n      this.curReportingRefer = this.reportingReferObjects[2].value;\r\n      this.reportingLineDataEntity.refOrgId = null;\r\n      this.reportingLineDataEntity.refOrgName = null;\r\n      this.reportingLineDataEntity.refUserId = null;\r\n    }\r\n    // åç§å¯¹è±¡åæ¢æ¶ï¼æ¸ç©ºuserådepartment\r\n    this.users = [];\r\n    this.departments = [];\r\n  }\r\n\r\n  /**\r\n   * åç§ç¨æ·æ¹å\r\n   */\r\n  referUserChange(data: any) {\r\n    console.log(data);\r\n  }\r\n\r\n  /**\r\n   * ç»´åº¦æ¹å\r\n   */\r\n  reportingDimensionChange(data: any) {\r\n  }\r\n\r\n  /**\r\n   * ç»ç»å¸®å©éå®å\r\n   */\r\n  orgSelected(org: any) { // ç»ç»å¸®å©éå®å\r\n    this.reportingLineDataEntity.refOrgId = org.id;\r\n    this.reportingLineDataEntity.refOrgName = org.name;\r\n  }\r\n\r\n  /**\r\n   * ç¼è¾æ¡ä»¶\r\n   */\r\n  editCondition() {\r\n    if (this.designerUIState.schemas.length > 0) {\r\n      for (const schema of this.designerUIState.schemas) {\r\n        this.expr.addSchema('Schema', schema);\r\n      }\r\n      if (this.designerUIState.schemas[0].entityTypes && this.designerUIState.schemas[0].entityTypes.length > 0) {\r\n        const entityType = this.designerUIState.schemas[0].entityTypes[0];\r\n        this.expr.addInjectedEntity(entityType.name, 'Schema',\r\n          entityType.name, InjectedType.EntityType);\r\n      }\r\n    }\r\n    const context = new Array();\r\n    if (this.designerUIState.procInstContext.length > 0) {\r\n      for (const variable of this.designerUIState.procInstContext) {\r\n        context.push(variable);\r\n      }\r\n    }\r\n    if (this.designerUIState.formalParameterContext.length > 0) {\r\n      for (const variable of this.designerUIState.formalParameterContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (this.designerUIState.participantContext.length > 0) {\r\n      for (const variable of this.designerUIState.participantContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (this.designerUIState.processVariableContext.length > 0) {\r\n      for (const variable of this.designerUIState.processVariableContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (this.designerUIState.activityComponentContext.length > 0) {\r\n      for (const variable of this.designerUIState.activityComponentContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (context.length > 0) {\r\n      for (const v of context) {\r\n        this.expr.addContext(v);\r\n      }\r\n    }\r\n    this.expr.setEditPattern(ExprEditMode.Conditional); // è¡¨è¾¾å¼å±ç°æ¨¡å¼ï¼é»è®¤ç®æç\r\n    this.expr.addExpressionText(this.reportingLineDataEntity.condition); // this.reportingLineDataEntity.condition\r\n    this.expr.buildExpression().then((expressioninfo: string) => {\r\n      this.reportingLineDataEntity.condition = expressioninfo;\r\n    });\r\n  }\r\n\r\n  getReportingTypes(value?: string) {\r\n    const start = (this.pageIndex - 1) * this.pageSize;\r\n    const end = start + this.pageSize;\r\n    let items = [];\r\n    if (value) {\r\n      items = this.reportingLineDefinitionList.filter(f => f.name.indexOf(value) > -1 || f.code.indexOf(value) > -1);\r\n    } else {\r\n      items = this.reportingLineDefinitionList;\r\n    }\r\n    this.total = items.length;\r\n    this.items = items.slice(start, end);\r\n    this.lookup.componentRef.instance.loadData({\r\n      total: this.total,\r\n      pageSize: this.pageSize,\r\n      pageIndex: this.pageIndex,\r\n      data: this.items\r\n    });\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    this.ngZone.runOutsideAngular(() => {\r\n      this.inputGroup.nativeElement.addEventListener(\r\n        'mouseenter',\r\n        this.onMouseEnter.bind(this)\r\n      );\r\n      this.inputGroup.nativeElement.addEventListener(\r\n        'mouseleave',\r\n        this.onMouseLeave.bind(this)\r\n      );\r\n      this.inputGroup1.nativeElement.addEventListener(\r\n        'mouseenter',\r\n        this.onMouseEnter.bind(this)\r\n      );\r\n      this.inputGroup1.nativeElement.addEventListener(\r\n        'mouseleave',\r\n        this.onMouseLeave.bind(this)\r\n      );\r\n    });\r\n  }\r\n  onMouseEnter(event) {\r\n    this.showClearButton = true;\r\n    if (this.showClearButton) {\r\n      this.toggleClearIcon(event, true);\r\n    }\r\n  }\r\n  onMouseLeave(event) {\r\n    this.showClearButton = false;\r\n    this.toggleClearIcon(event, false);\r\n  }\r\n  private toggleClearIcon(event: any, isShow = false) {\r\n    const str = isShow ? '' : 'none';\r\n    const clearIcon = event.target.querySelector('.input-group-clear');\r\n    if (clearIcon) {\r\n      clearIcon.style.display = str;\r\n    }\r\n  }\r\n\r\n  clear(data: any) {\r\n    this.reportingLineDataEntity.refOrgId = '';\r\n    this.reportingLineDataEntity.refOrgName = '';\r\n  }\r\n  clearUser() {\r\n    this.users = [];\r\n    this.reportingLineDataEntity.refUserId = '';\r\n    this.reportingLineDataEntity.refEmployeeId = '';\r\n  }\r\n  clearOrg() {\r\n    this.departments = [];\r\n    this.reportingLineDataEntity.refOrgId = '';\r\n  }\r\n\r\n  selectOrg(data: string) {\r\n    this.showExprHelp(data);\r\n  }\r\n\r\n  selectUsers(data: string) {\r\n    this.showExprHelp(data);\r\n  }\r\n  showExprHelp(data: string) {\r\n    this.expr.setEditPattern(ExprEditMode.Advanced); // è¡¨è¾¾å¼å±ç°æ¨¡å¼ï¼é»è®¤é«çº§\r\n    if (this.designerUIState.schemas.length > 0) {\r\n      for (const schema of this.designerUIState.schemas) {\r\n        this.expr.addSchema('Schema', schema);\r\n      }\r\n      if (this.designerUIState.schemas[0].entityTypes && this.designerUIState.schemas[0].entityTypes.length > 0) {\r\n        const entityType = this.designerUIState.schemas[0].entityTypes[0];\r\n        this.expr.addInjectedEntity(entityType.name, 'Schema',\r\n          entityType.name, InjectedType.EntityType);\r\n      }\r\n    }\r\n    const context = new Array();\r\n    if (this.designerUIState.participantContext.length > 0) {\r\n      for (const variable of this.designerUIState.participantContext) {\r\n        context.push(variable);\r\n      }\r\n    }\r\n    if (this.designerUIState.processVariableContext.length > 0) {\r\n      for (const variable of this.designerUIState.processVariableContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (context.length > 0) {\r\n      for (const v of context) {\r\n        this.expr.addContext(v);\r\n      }\r\n    }\r\n    if (data === 'sysUser') {\r\n      if (this.reportingLineDataEntity.refUserId && this.reportingLineDataEntity.refUserId.length > 0) {\r\n        this.expr.addExpressionText(this.reportingLineDataEntity.refUserId);\r\n      } else {\r\n        this.expr.addExpressionText('');\r\n      }\r\n    } else if (data === 'org') {\r\n      if (this.reportingLineDataEntity.refOrgId && this.reportingLineDataEntity.refOrgId.length > 0) {\r\n        this.expr.addExpressionText(this.reportingLineDataEntity.refOrgId);\r\n      } else {\r\n        this.expr.addExpressionText('');\r\n      }\r\n    } else { // åå·¥åå¶ä»æ±æ¥å¯¹è±¡ç±»å\r\n      if (this.reportingLineDataEntity.refEmployeeId && this.reportingLineDataEntity.refEmployeeId.length > 0) {\r\n        this.expr.addExpressionText(this.reportingLineDataEntity.refEmployeeId);\r\n      } else {\r\n        this.expr.addExpressionText('');\r\n      }\r\n    }\r\n    this.expr.buildExpression().then((expressionInfo: string) => {\r\n      if (data === 'sysUser') {\r\n        const user = new PerformerEntity(expressionInfo, '', 'wf.ReportingLineParticipant'); // wf.UserParticipant\r\n        user.tag = 'expression';\r\n        user.performerName = this.variableParticipantName(expressionInfo);\r\n        this.reportingLineDataEntity.refUserId = user.performerId;\r\n        this.reportingLineDataEntity.tag = user.tag;\r\n        this.reportingLineDataEntity.performerName = user.performerName;\r\n        this.users = [this.reportingLineDataEntity];\r\n      } else if (data === 'org') {\r\n        const dept = new PerformerEntity(expressionInfo, '', 'wf.ReportingLineParticipant');\r\n        dept.tag = 'expression';\r\n        this.reportingLineDataEntity.refOrgName = expressionInfo;\r\n        this.reportingLineDataEntity.refOrgId = expressionInfo;\r\n        this.departments = [this.reportingLineDataEntity];\r\n      } else {\r\n        const employee = new PerformerEntity(expressionInfo, '', 'wf.ReportingLineParticipant');\r\n        employee.performerName = expressionInfo;\r\n        employee.tag = 'expression';\r\n        this.reportingLineDataEntity.refEmployeeId = expressionInfo;\r\n        this.reportingLineDataEntity.performerName = employee.performerName;\r\n        this.users = [this.reportingLineDataEntity];\r\n      }\r\n    });\r\n  }\r\n  private variableParticipantName(expr: string): string {\r\n    for (const c of this.designerUIState.participantContext) {\r\n      if (expr.indexOf(c.key) > -1) {\r\n        return c.name;\r\n      }\r\n    }\r\n    for (const c of this.designerUIState.processVariableContext) {\r\n      if (expr.indexOf(c.key) > -1) {\r\n        return c.name;\r\n      }\r\n    }\r\n    return 'ä¸å¡å­æ®µ';\r\n  }\r\n\r\n  defChanged() {\r\n    System.import('/platform/runtime/wf/web/wf-reporting-data/reportingLineDefHelp.js?v=20210903').then(() => {\r\n      (window as any).gspWfReportingLineDef.ReportingLineDefHelpUtil.getReportingLineHelp().then(data => {\r\n        this.defSelected(data);\r\n      });\r\n    });\r\n  }\r\n\r\n  defSelected(data) {\r\n    this.defName = data.name;\r\n    this.reportingLineDataEntity.reportingLineDefId = data.id;\r\n    this.reportingLineDataEntity.reportingLineDefName = data.name;\r\n\r\n    this.reportingLineDimension = JSON.parse(data.dimensions);\r\n    this.designerUIState.dimensions = [\r\n      { value: 'higherSuperior', text: 'é´æ¥ä¸çº§' }\r\n    ];\r\n    // å¼å®¹åå²æ°æ®\r\n    if (this.reportingLineDimension[0].code !== 'directSuperior') {\r\n      const di = {\r\n        value: 'directSuperior',\r\n        text: 'ç´æ¥ä¸çº§'\r\n      }\r\n      this.designerUIState.dimensions.push(di);\r\n    }\r\n    for (const dimension of this.reportingLineDimension) {\r\n      const di = {\r\n        value: dimension.code,\r\n        text: dimension.name\r\n      };\r\n      this.designerUIState.dimensions.push(di);\r\n    }\r\n    // å®ä¹åæ¢åï¼é»è®¤æ¯åç§ç»ç»\r\n    this.curReportingRefer = this.reportingReferObjects[0].value;\r\n    return of(true);\r\n  }\r\n\r\n  getPerformers() {\r\n    this.reportingLineDataEntity.type = 'wf.ReportingLineParticipant';\r\n    this.reportingLineDataEntity.reportingReferObject = this.curReportingRefer;\r\n    return this.reportingLineDataEntity;\r\n  }\r\n}\r\n","import { MatrixFieldInfoEntity } from \"./matrix-field-info.entity\";\r\n\r\nexport class MatrixDefInfoEntity {\r\n  id: string;\r\n  code: string;\r\n  name: string;\r\n  conditionField: MatrixFieldInfoEntity[];\r\n  dataField: MatrixFieldInfoEntity[];\r\n}\r\n","import { PerformerEntity } from \"../../../entities/performer.entity\";\r\n\r\nexport class MatrixDataInfoEntity extends PerformerEntity {\r\n\r\n  constructor(id?: string, name?: string, type?: string) {\r\n    super(id,name,type);\r\n  }\r\n\r\n  id: string; // ç¨äºåç«¯åå¯ä¸æ è¯\r\n  matrixDefId: string; // ç¨äºå­å¨å­æ®µid\r\n  matrixDefName: string;\r\n  conditionField1: string;\r\n  conditionFieldText1: string;\r\n  conditionField2: string;\r\n  conditionFieldText2: string;\r\n  conditionField3: string;\r\n  conditionFieldText3: string;\r\n  dataFieldAlias: string;\r\n  condition: string;\r\n}\r\n","import { Component, OnInit, HostBinding, ViewChild, TemplateRef, Injector } from '@angular/core';\r\nimport { DatagridComponent } from '@farris/ui-datagrid';\r\nimport { Subject } from 'rxjs/Subject';\r\nimport { MessagerService } from '@farris/ui-messager';\r\n\r\n@Component({\r\n  selector: 'app-enum-list',\r\n  templateUrl: './enum-list.component.html',\r\n  styleUrls: ['./enum-list.component.scss']\r\n})\r\nexport class EnumListComponent implements OnInit {\r\n\r\n  @HostBinding('class')\r\n  cls = 'farris-main-area flex-column';\r\n\r\n  columns = [\r\n    { field: 'key', width: 100, title: 'é®' },\r\n    { field: 'value', width: 100, title: 'å¼'}];\r\n  @ViewChild('dg') dg: DatagridComponent;\r\n  @ViewChild('buttons') btnRef: TemplateRef<any>;\r\n\r\n  confirm = new Subject<any>();\r\n  closeModalEmitter = new Subject<any>();\r\n\r\n  /**\r\n   * æ¾ç¤ºå¼\r\n   */\r\n  data = new Array();\r\n\r\n  selectedIds = new Array();\r\n\r\n  constructor(\r\n    private messageService: MessagerService,\r\n    private injector: Injector\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n\r\n  }\r\n\r\n  /**\r\n   * å è½½æ¾ç¤ºæ°æ®\r\n   */\r\n  load(enumValues) {\r\n    this.data = [...enumValues];\r\n  }\r\n\r\n  /**\r\n   * ç¡®è®¤\r\n   */\r\n  onConfirm(): void {\r\n    if (this.selectedIds.length === 0 ) {\r\n      this.messageService.warning('å°æªéä¸­æä¸¾å¼');\r\n    }\r\n    const enumValues = this.data.filter(d => this.selectedIds.findIndex(id => id === d.key) > -1);\r\n    this.confirm.next(enumValues);\r\n    this.closeModalEmitter.next();\r\n  }\r\n\r\n  /**\r\n   * åæ¶\r\n   */\r\n  cancel(): void {\r\n    this.closeModalEmitter.next();\r\n  }\r\n\r\n}\r\n","import { Component, ComponentFactoryResolver, HostBinding, Injector, Input, OnInit, ViewChild } from '@angular/core';\r\nimport { MatrixDefInfoEntity } from './entitis/matrix-def-info.entity';\r\nimport { MatrixDataInfoEntity } from './entitis/matrix-data-info.entity';\r\nimport { HttpService } from '@ecp-caf/caf-common';\r\nimport { Observable, of } from 'rxjs';\r\nimport { ExprEditMode, ExpressionService, InjectedType } from '@gsp-svc/expression';\r\nimport { ProcessDesignerUIState } from '../../../../app/process-designer.uistate';\r\nimport { LookupGridComponent, PickedResult, ServerSideToken } from '@farris/ui-lookup';\r\nimport { BsModalService } from '@farris/ui-modal';\r\nimport { EnumListComponent } from './enum-list/enum-list.component';\r\nimport { MatrixFieldInfoEntity } from './entitis/matrix-field-info.entity';\r\nimport { LookupDataService } from '@farris/lookup-config';\r\nimport { PerformerEntity } from '../../entities/performer.entity';\r\n\r\n@Component({\r\n  selector: 'app-matrix-performer',\r\n  templateUrl: './matrix-performer.component.html',\r\n  styleUrls: ['./matrix-performer.component.scss'],\r\n  providers: [\r\n    { provide: ServerSideToken, useClass: LookupDataService }\r\n  ]\r\n})\r\nexport class MatrixPerformerComponent implements OnInit {\r\n  @HostBinding('class')\r\n  cls = 'd-flex flex-fill h-100';\r\n  display: string = 'none';\r\n  typeReadOnly = false;\r\n  items: MatrixDefInfoEntity[] = [];\r\n  pageIndex = 1;\r\n  pageSize = 20;\r\n  pageList = [10, 20, 30, 50, 100];\r\n  total = 0;\r\n  groupIcon2 = '<i class=\"f-icon f-icon-lookup\"></i>';\r\n\r\n  // å¸®å©ç¸å³\r\n  index: number;\r\n  fieldId = '';\r\n  value: any;\r\n  helpId;\r\n  /**\r\n   * ç©éµå®ä¹æ¾ç¤ºå\r\n   */\r\n  columns = [\r\n    { title: 'ç¼å·', field: 'code', width: 100 },\r\n    { title: 'åç§°', field: 'name', width: 100 }\r\n  ];\r\n  users: PerformerEntity[] = [];\r\n\r\n  dataFieldAndValues = []; // { text: 'é¨é¨', value: 'department' },\r\n  curDataFieldValue = '';\r\n\r\n  matrixDefEntityList: MatrixDefInfoEntity[] = [];\r\n  curMatrixDefEntity: MatrixDefInfoEntity = new MatrixDefInfoEntity();\r\n  curMatrixDataEntity: MatrixDataInfoEntity = new MatrixDataInfoEntity();\r\n\r\n  conditionFields: MatrixFieldInfoEntity[] = [];\r\n  exprGroup = [\r\n    { name: 'å¸®å©', value: 'help' }\r\n  ];\r\n  /**\r\n   * æ¡ä»¶å­æ®µæ¯å¦å¯ç¨è¡¨è¾¾å¼\r\n   */\r\n  condition1: string;\r\n  condition1ExprAble = true;\r\n  condition2: string;\r\n  condition2ExprAble = true;\r\n  condition3: string;\r\n  condition3ExprAble = true;\r\n  /**\r\n   * ç¼è¾å¨é¡µé¢æ¾ç¤ºæå­ï¼é²èæµæ·è´é®é¢ï¼å¯¹äºæ¡ä»¶å­æ®µçå¼åæ¾ç¤ºæå­é½ä¸è¦å¨å½åå®ä½ä¸­è¿è¡ä¿®æ¹åªæç¹å»ç¡®å®æ¶ï¼æå°å¶ä¿å­è³å½åå®ä½å¹¶è¿åï¼\r\n   */\r\n  condition1Text = '';\r\n  condition1Value = '';\r\n  condition2Text = '';\r\n  condition2Value = '';\r\n  condition3Text = '';\r\n  condition3Value = '';\r\n\r\n  @Input()\r\n  set setMatrixDataEntity(dataEntity: MatrixDataInfoEntity) {\r\n    this.curMatrixDataEntity = dataEntity;\r\n    const url = '/api/runtime/wf/v1.0/matrixDefinition/' + dataEntity.matrixDefId;\r\n    this.http.get(url).subscribe((re: any) => {\r\n      this.curMatrixDefEntity = re;\r\n      this.setFields();\r\n      this.curDataFieldValue = dataEntity.dataFieldAlias;\r\n    })\r\n    if (dataEntity.matrixDefId) {\r\n      this.typeReadOnly = true;\r\n    }\r\n\r\n    if (!this.curMatrixDataEntity.conditionField1) {\r\n      this.condition1 = 'expr';\r\n      this.condition1ExprAble = true;\r\n    } else if (this.curMatrixDataEntity.conditionField1.charAt(0) === '{') {\r\n      this.condition1 = 'expr';\r\n      this.condition1ExprAble = true;\r\n    } else {\r\n      this.condition1 = 'help';\r\n      this.condition1ExprAble = false;\r\n    }\r\n\r\n    if (!this.curMatrixDataEntity.conditionField2) {\r\n      this.condition2 = 'expr';\r\n      this.condition2ExprAble = true;\r\n    } else if (this.curMatrixDataEntity.conditionField2.charAt(0) === '{') {\r\n      this.condition2 = 'expr';\r\n      this.condition2ExprAble = true;\r\n    } else {\r\n      this.condition2 = 'help';\r\n      this.condition2ExprAble = false;\r\n    }\r\n\r\n    if (!this.curMatrixDataEntity.conditionField3) {\r\n      this.condition3 = 'expr';\r\n      this.condition3ExprAble = true;\r\n    } else if (this.curMatrixDataEntity.conditionField3.charAt(0) === '{') {\r\n      this.condition3 = 'expr';\r\n      this.condition3ExprAble = true;\r\n    } else {\r\n      this.condition3 = 'help';\r\n      this.condition3ExprAble = false;\r\n    }\r\n\r\n    this.condition1Text = this.curMatrixDataEntity.conditionFieldText1 ? this.curMatrixDataEntity.conditionFieldText1 : '';\r\n    this.condition1Value = this.curMatrixDataEntity.conditionField1 ? this.curMatrixDataEntity.conditionField1 : '';\r\n    this.condition2Text = this.curMatrixDataEntity.conditionFieldText2 ? this.curMatrixDataEntity.conditionFieldText2 : '';\r\n    this.condition2Value = this.curMatrixDataEntity.conditionField2 ? this.curMatrixDataEntity.conditionField2 : '';\r\n    this.condition3Text = this.curMatrixDataEntity.conditionFieldText3 ? this.curMatrixDataEntity.conditionFieldText3 : '';\r\n    this.condition3Value = this.curMatrixDataEntity.conditionField3 ? this.curMatrixDataEntity.conditionField3 : '';\r\n  }\r\n\r\n\r\n  @ViewChild('lookup') public lookUp: LookupGridComponent;\r\n\r\n  constructor(\r\n    private http: HttpService,\r\n    public designerUIState: ProcessDesignerUIState,\r\n    private expr: ExpressionService,\r\n    private modalService: BsModalService,\r\n    private resolver: ComponentFactoryResolver,\r\n    private injector: Injector,\r\n  ) {\r\n    this.getMatrixLineType();\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  /**\r\n   * è·åç©éµå®ä¹\r\n   */\r\n  getMatrixLineType() {\r\n    const url = '/api/runtime/wf/v1.0/matrixDefinition';\r\n    this.http.get(url).subscribe((re: any) => {\r\n      this.matrixDefEntityList = re;\r\n      this.items = this.matrixDefEntityList.slice(0, this.pageSize);\r\n      this.total = this.matrixDefEntityList.length;\r\n    });\r\n  }\r\n\r\n  private setFields() {\r\n    this.conditionFields = [];\r\n    this.dataFieldAndValues = [];\r\n    // åå¯¹æ¡ä»¶å­æ®µæç§æåºå·è¿è¡æåº\r\n    this.curMatrixDefEntity.conditionField.sort((a, b) => {\r\n      return a.sortOrder - b.sortOrder;\r\n    });\r\n    // å°æåºåçæ¡ä»¶æ¾å¥æ¡ä»¶å­æ®µæ°ç»ä¸­\r\n    for (const condition of this.curMatrixDefEntity.conditionField) {\r\n      this.conditionFields.push(condition);\r\n    }\r\n    // åå¯¹æ°æ®å­æ®µæç§æåºå·è¿è¡æåº\r\n    this.curMatrixDefEntity.dataField.sort((a, b) => {\r\n      return a.sortOrder - b.sortOrder;\r\n    });\r\n    // å¡«åæ°æ®å­æ®µçä¸æåè¡¨\r\n    for (const data of this.curMatrixDefEntity.dataField) {\r\n      const temp = {\r\n        text: data.alias,\r\n        value: data.alias\r\n      };\r\n      this.dataFieldAndValues.push(temp);\r\n    }\r\n  }\r\n\r\n  dictPicked = (rowData) => { // éå®ç©éµå®ä¹åæ§è¡\r\n    // åå°å½åç»å®çæ°æ®æ¸ç©º\r\n    this.curMatrixDataEntity = new MatrixDataInfoEntity();\r\n    this.curDataFieldValue = '';\r\n    this.curMatrixDefEntity = rowData;\r\n    this.curMatrixDataEntity.matrixDefId = rowData.id;\r\n    this.curMatrixDataEntity.matrixDefName = rowData.name;\r\n    this.setFields();\r\n    return of(true);\r\n  }\r\n\r\n  onClear() {\r\n    this.curMatrixDataEntity = new MatrixDataInfoEntity();\r\n  }\r\n\r\n  /**\r\n   * ç¼è¾æ¡ä»¶\r\n   */\r\n  editCondition() {\r\n    if (this.designerUIState.schemas.length > 0) {\r\n      for (const schema of this.designerUIState.schemas) {\r\n        this.expr.addSchema('Schema', schema);\r\n      }\r\n      if (this.designerUIState.schemas[0].entityTypes && this.designerUIState.schemas[0].entityTypes.length > 0) {\r\n        const entityType = this.designerUIState.schemas[0].entityTypes[0];\r\n        this.expr.addInjectedEntity(entityType.name, 'Schema',\r\n          entityType.name, InjectedType.EntityType);\r\n      }\r\n    }\r\n    const context = new Array();\r\n    if (this.designerUIState.procInstContext.length > 0) {\r\n      for (const variable of this.designerUIState.procInstContext) {\r\n        context.push(variable);\r\n      }\r\n    }\r\n    if (this.designerUIState.formalParameterContext.length > 0) {\r\n      for (const variable of this.designerUIState.formalParameterContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (this.designerUIState.participantContext.length > 0) {\r\n      for (const variable of this.designerUIState.participantContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (this.designerUIState.processVariableContext.length > 0) {\r\n      for (const variable of this.designerUIState.processVariableContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (context.length > 0) {\r\n      for (const v of context) {\r\n        this.expr.addContext(v);\r\n      }\r\n    }\r\n    this.expr.setEditPattern(ExprEditMode.Conditional); // è¡¨è¾¾å¼å±ç°æ¨¡å¼ï¼é»è®¤ç®æç\r\n    this.expr.addExpressionText(this.curMatrixDataEntity.condition); // this.reportingLineDataEntity.condition\r\n    this.expr.buildExpression().then((expressioninfo: string) => {\r\n      this.curMatrixDataEntity.condition = expressioninfo;\r\n    });\r\n  }\r\n\r\n  onHelpSearch(data, index, id) { // æå¼å¸®å©\r\n    this.index = index;\r\n    this.fieldId = id;\r\n    this.helpId = this.curMatrixDefEntity.conditionField[this.index].smartHelp;\r\n    this.lookUp.onClear();\r\n    this.lookUp.showDialog();\r\n  }\r\n\r\n  openEnumValue(index, id) {\r\n    this.index = index;\r\n    this.fieldId = id;\r\n    this.showEnumList(JSON.parse(this.curMatrixDefEntity.conditionField[this.index].enumList));\r\n  }\r\n\r\n  private showEnumList(enumList: any[]) {\r\n    const compFactory = this.resolver.resolveComponentFactory(EnumListComponent);\r\n    const compRef = compFactory.create(this.injector);\r\n    const modalConfig = {\r\n      title: 'æä¸¾éæ©',\r\n      width: 650,\r\n      height: 450,\r\n      showButtons: true,\r\n      buttons: compRef.instance.btnRef,\r\n    };\r\n    if (enumList && enumList.length > 0) {\r\n      compRef.instance.load(enumList);\r\n    }\r\n    compRef.instance.confirm.subscribe((re: any[]) => { // ç¹å»ç¡®å®\r\n      if (this.index === 0) {\r\n        this.condition1Text = re[0].value;\r\n        this.condition1Value = re[0].value;\r\n      } else if (this.index === 1) {\r\n        this.condition2Text = re[0].value;\r\n        this.condition2Value = re[0].value;\r\n      } else if (this.index === 2) {\r\n        this.condition3Text = re[0].value;\r\n        this.condition3Value = re[0].value;\r\n      }\r\n    });\r\n    const dialog = this.modalService.show(compRef, modalConfig);\r\n    compRef.instance.closeModalEmitter.subscribe(() => {\r\n      dialog.close();\r\n    });\r\n  }\r\n\r\n  dataFieldChange(data) {\r\n    this.curMatrixDataEntity.dataFieldAlias = data.data.value;\r\n  }\r\n\r\n  selectedDataHandler(data) {\r\n    if (this.index === 0) {\r\n      this.condition1Text = data.name;\r\n      this.condition1Value = data.id;\r\n    } else if (this.index === 1) {\r\n      this.condition2Text = data.name;\r\n      this.condition2Value = data.id;\r\n    } else if (this.index === 2) {\r\n      this.condition3Text = data.name;\r\n      this.condition3Value = data.id;\r\n    }\r\n  }\r\n\r\n  getPerformers() {\r\n    this.curMatrixDataEntity.type = 'wf.MatrixParticipant';\r\n    this.curMatrixDataEntity.conditionFieldText1 = this.condition1Text;\r\n    this.curMatrixDataEntity.conditionField1 = this.condition1Text === '' ? '' : this.condition1Value;\r\n    this.curMatrixDataEntity.conditionFieldText2 = this.condition2Text;\r\n    this.curMatrixDataEntity.conditionField2 = this.condition2Text === '' ? '' : this.condition2Value;\r\n    this.curMatrixDataEntity.conditionFieldText3 = this.condition3Text;\r\n    this.curMatrixDataEntity.conditionField3 = this.condition3Text === '' ? '' : this.condition3Value;\r\n    return this.curMatrixDataEntity;\r\n  }\r\n\r\n  dictHelpPicked = (data: any): Observable<PickedResult> => {\r\n    this.value = null;\r\n    return of({ closeDialog: true });\r\n  }\r\n\r\n  /**\r\n   * æå¼è¡¨è¾¾å¼ç¼è¾å¨\r\n   * @param data ç¼è¾ç¬¬å ä¸ªæ¡ä»¶å­æ®µï¼å¼ä¸ºï¼condition1ï¼condition2ï¼condition3ï¼\r\n   */\r\n  showExprHelp(data: string) {\r\n    if (this.designerUIState.schemas.length > 0) {\r\n      for (const schema of this.designerUIState.schemas) {\r\n        // this.expr.addCommonObject(co);\r\n        this.expr.addSchema('Schema', schema);\r\n      }\r\n      if (this.designerUIState.schemas[0].entityTypes && this.designerUIState.schemas[0].entityTypes.length > 0) {\r\n        const entityType = this.designerUIState.schemas[0].entityTypes[0];\r\n        this.expr.addInjectedEntity(entityType.name, 'Schema',\r\n          entityType.name, InjectedType.EntityType);\r\n      }\r\n    }\r\n    const context = new Array();\r\n    if (this.designerUIState.participantContext.length > 0) {\r\n      for (const variable of this.designerUIState.participantContext) {\r\n        context.push(variable);\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (this.designerUIState.processVariableContext.length > 0) {\r\n      for (const variable of this.designerUIState.processVariableContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (context.length > 0) {\r\n      for (const v of context) {\r\n        this.expr.addContext(v);\r\n      }\r\n    }\r\n    if (data === 'condition1') {\r\n      if (this.curMatrixDataEntity.conditionField1) {\r\n        this.expr.addExpressionText(this.curMatrixDataEntity.conditionField1);\r\n      } else {\r\n        this.expr.addExpressionText('');\r\n      }\r\n    } else if (data === 'condition2') {\r\n      if (this.curMatrixDataEntity.conditionField2) {\r\n        this.expr.addExpressionText(this.curMatrixDataEntity.conditionField2);\r\n      } else {\r\n        this.expr.addExpressionText('');\r\n      }\r\n    } else if (data === 'condition3') {\r\n      if (this.curMatrixDataEntity.conditionField3) {\r\n        this.expr.addExpressionText(this.curMatrixDataEntity.conditionField3);\r\n      } else {\r\n        this.expr.addExpressionText('');\r\n      }\r\n    }\r\n    this.expr.buildExpression().then((expressionInfo: string) => {\r\n      if (data === 'condition1') {\r\n        this.condition1Text = expressionInfo;\r\n        this.condition1Value = expressionInfo;\r\n      } else if (data === 'condition2') {\r\n        this.condition2Text = expressionInfo;\r\n        this.condition2Value = expressionInfo;\r\n      } else {\r\n        this.condition3Text = expressionInfo;\r\n        this.condition3Value = expressionInfo;\r\n      }\r\n    });\r\n  }\r\n  condition1Expr(data) {\r\n    this.showExprHelp(data);\r\n  }\r\n  condition1ExprClick() {\r\n    this.condition1ExprAble = !this.condition1ExprAble;\r\n    this.condition1Text = '';\r\n    this.condition1Value = '';\r\n  }\r\n  condition2Expr(data) {\r\n    this.showExprHelp(data);\r\n  }\r\n  condition2ExprClick() {\r\n    this.condition2ExprAble = !this.condition2ExprAble;\r\n    this.condition2Text = '';\r\n    this.condition2Value = '';\r\n  }\r\n  condition3Expr(data) {\r\n    this.showExprHelp(data);\r\n  }\r\n  condition3ExprClick() {\r\n    this.condition3ExprAble = !this.condition3ExprAble;\r\n    this.condition3Text = '';\r\n    this.condition3Value = '';\r\n  }\r\n}\r\n","import {Component, OnInit, HostBinding, ViewChild, Input, AfterViewInit} from '@angular/core';\r\nimport { FormGroup, FormControl } from '@angular/forms';\r\nimport { UserPerformerComponent } from '../user-performer/user-performer.component';\r\nimport { PositionPerformerComponent } from '../position-performer/position-performer.component';\r\nimport { ComponentPerformerComponent } from '../component-performer/component-performer.component';\r\nimport { BizComponentEntity } from '../../../../domain/entities/biz-component.entity';\r\nimport { ReportingLineComponent } from '../reporting-line/reporting-line.component';\r\nimport { MatrixPerformerComponent } from '../matrix-performer/matrix-performer.component';\r\nimport {HttpService} from \"@ecp-caf/caf-common\";\r\n\r\n@Component({\r\n  selector: 'app-performer-edit',\r\n  templateUrl: './performer-edit.component.html',\r\n  styleUrls: ['./performer-edit.component.scss']\r\n})\r\nexport class PerformerEditComponent implements OnInit, AfterViewInit {\r\n  @HostBinding('class')\r\n  cls = 'farris-main-area flex-column';\r\n  component: BizComponentEntity;\r\n  performer: { type: string, value: any };\r\n\r\n  tab = 'user';\r\n  @Input() display = true;\r\n\r\n  @ViewChild(UserPerformerComponent) usersCmp: UserPerformerComponent;\r\n  @ViewChild(PositionPerformerComponent) posiCmp: PositionPerformerComponent;\r\n  @ViewChild(ComponentPerformerComponent) cmpCmp: ComponentPerformerComponent;\r\n  @ViewChild(ReportingLineComponent) reportingLineCmp: ReportingLineComponent;\r\n  @ViewChild(MatrixPerformerComponent) matrixCmp: MatrixPerformerComponent;\r\n\r\n\r\n\r\n  constructor(private http?: HttpService) {\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    if (this.performer) {\r\n      switch (this.performer.type) {\r\n        case 'wf.UserParticipant':\r\n          this.tab = 'user';\r\n          this.usersCmp.users = [];\r\n          this.usersCmp.users.push(this.performer.value);\r\n          // èèå°å¼å®¹åå²æ°æ®ï¼ææ¶ä¸ä½¿ç¨ç¨æ·åä¸èå®ä½ç±»ä¸­çuserTypeå±æ§\r\n          if(this.performer.value.performerId && this.performer.value.performerId.charAt(0) === '{'){\r\n            let url = '/api/runtime/wf/v1.0/reportingOrgType/hasAdminOrg';\r\n            this.http.get(url).subscribe((data: any) => {\r\n              this.usersCmp.userTypeButtonNeedShow = data;\r\n              this.usersCmp.userType = 'variable';\r\n              this.usersCmp.curOrgType = this.performer.value.orgType === 'Sys' ? 'Sys' : 'Administrative_organization';\r\n              this.usersCmp.condition = this.performer.value.condition;\r\n              // æ ¹æ®è¡¨è¾¾å¼ä¸­çå½æ°åå¤æ­æ¯å¦ä½¿ç¨çæ¯ä¸ä¸æåé\r\n              const isContextVariable = this.performer.value.performerId.indexOf(\"GetContextParameter\") >= 0;\r\n              this.usersCmp.variableOrgTypes = isContextVariable ? [\r\n                { name: 'ç³»ç»ç¨æ·', value: 'Sys' }\r\n                ] : [\r\n                { name: 'ç³»ç»ç¨æ·', value: 'Sys' },\r\n                { name: 'è¡æ¿äººå', value: 'Administrative_organization' }\r\n              ];\r\n            })\r\n          }else{\r\n            this.usersCmp.userType = 'user';\r\n            this.usersCmp.condition = this.performer.value.condition;\r\n          }\r\n          break;\r\n        case 'wf.PositionParticipant':\r\n          this.tab = 'position';\r\n          this.posiCmp.position = Object.assign({}, this.performer.value);\r\n          if (this.posiCmp.position.positionType === '0') {\r\n            this.posiCmp.filter = { positionType: 0 };\r\n          } else {\r\n            this.posiCmp.filter = { positionType: 1 };\r\n          }\r\n          break;\r\n        case 'wf.ReportingLineParticipant':\r\n          this.tab = 'report';\r\n          this.reportingLineCmp.setReportingLineDataEntity = this.performer.value;\r\n          break;\r\n        case 'wf.ComponentParticipant':\r\n          this.tab = 'component';\r\n          this.cmpCmp.component = this.performer.value;\r\n          break;\r\n        case 'wf.MatrixParticipant':\r\n          this.tab = 'matrix';\r\n          this.cmpCmp.component = this.performer.value;\r\n          this.matrixCmp.setMatrixDataEntity = this.performer.value;\r\n      }\r\n    }\r\n  }\r\n  getPerformers() {\r\n    const users = this.usersCmp.getPerformers();\r\n    const position = this.posiCmp.getPerformers();\r\n    const component = this.cmpCmp.getPerformers();\r\n    const reportingLine = this.reportingLineCmp.getPerformers();\r\n    const matrix = this.matrixCmp.getPerformers();\r\n\r\n    // let performers = [];\r\n    let positionPerformers = []; // åªåå«å²ä½åä¸è\r\n    let userPerformers = []; // ç¨æ·åä¸è\r\n\r\n    if (users && users.length > 0) {\r\n      userPerformers = userPerformers.concat(users);\r\n    }\r\n    if (position && position.performerId) {\r\n      positionPerformers.push(position);\r\n    }\r\n    return { userPerformers, positionPerformers, component, reportingLine, matrix};\r\n  }\r\n}\r\n","import { Component, OnInit, HostBinding, Input, NgZone, AfterViewInit, ViewChild, ElementRef } from '@angular/core';\r\nimport { PerformerOptions } from '../../entities/performer-options';\r\nimport { ProcessDesignerUIState } from '../../../../app/process-designer.uistate';\r\nimport { ExpressionService, InjectedType } from '@gsp-svc/expression';\r\nimport { MessagerService } from '@farris/ui-messager';\r\n\r\n@Component({\r\n  selector: 'app-performer-options',\r\n  templateUrl: './performer-options.component.html',\r\n  styleUrls: ['./performer-options.component.scss']\r\n})\r\nexport class PerformerOptionsComponent implements OnInit, AfterViewInit {\r\n  @HostBinding('class')\r\n  cls = 'farris-main-area flex-column';\r\n\r\n  @Input()\r\n  set options(options: PerformerOptions) {\r\n    if (options) {\r\n      this.exclusionPerformers = options.ExclusionPerformers;\r\n      this.noPerformerStrategy = options.NoPerformerStrategy;\r\n      this.historicFirst = options.HistoricFirst;\r\n      this.automaticPerformers = options.automaticPerformers;\r\n    }\r\n  }\r\n\r\n  @Input()\r\n  set exclusionPerformers(e: string | Array<string>) {\r\n    if (e) {\r\n      if (typeof e === 'string') {\r\n        this.excludeProcInstCreator = e.indexOf('procInstCreator') > -1;\r\n        this.excludePreActExecutors = e.indexOf('preActExecutors') > -1;\r\n      } else {\r\n        this.excludeProcInstCreator = e.findIndex(i => i === 'procInstCreator') > -1;\r\n        this.excludePreActExecutors = e.findIndex(i => i === 'preActExecutors') > -1;\r\n        this.excludeAllPassExecutors = e.findIndex(i => i === 'allPassExecutors') > -1;\r\n\r\n        this.excludeExprPerformer = e.find(i => i.indexOf('expr') > -1);\r\n      }\r\n    }\r\n  }\r\n\r\n  set automaticPerformers(e: Array<string>) {\r\n    if (e && e.length > 0) {\r\n      this.autoProcInstCreator = e.findIndex(i => i === 'procInstCreator') > -1;\r\n      this.autoPreActExecutors = e.findIndex(i => i === 'preActExecutors') > -1;\r\n      this.autoAllPassExecutors = e.findIndex(i => i === 'allPassExecutors') > -1;\r\n    }\r\n\r\n  }\r\n\r\n  @ViewChild('inputGroup') inputGroup: ElementRef;\r\n  showClearButton = false;\r\n\r\n  historicFirst = false;\r\n\r\n  excludeExprPerformer: string;\r\n\r\n\r\n  excludeProcInstCreator = false;\r\n  excludePreActExecutors = false;\r\n  excludeAllPassExecutors = false;\r\n\r\n  autoProcInstCreator = false;\r\n  autoPreActExecutors = false;\r\n  autoAllPassExecutors = false;\r\n\r\n  noPerformerStrategyList = [\r\n    { text: 'åä¸æµè½¬', value: 'leave' },\r\n    { text: 'å¼å¸¸æç¤º', value: 'throwException' }];\r\n\r\n  exclusionPerformersOptions = [\r\n    { value: 'procInstCreator', name: 'æµç¨åèµ·äºº' },\r\n    { value: 'preActExecutors', name: 'ä¸ä¸èç¹åçäºº' },\r\n    { value: 'allPassExecutors', name: 'ææå·²åçäººå' }\r\n  ];\r\n\r\n  noPerformerStrategy: string = this.noPerformerStrategyList[0].value;\r\n\r\n  constructor(\r\n    private ngZone: NgZone,\r\n    private designerState: ProcessDesignerUIState,\r\n    private expr: ExpressionService,\r\n    private message: MessagerService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    this.ngZone.runOutsideAngular(() => {\r\n      this.inputGroup.nativeElement.addEventListener(\r\n        'mouseenter',\r\n        this.onMouseEnter.bind(this)\r\n      );\r\n      this.inputGroup.nativeElement.addEventListener(\r\n        'mouseleave',\r\n        this.onMouseLeave.bind(this)\r\n      );\r\n    });\r\n  }\r\n\r\n  onMouseEnter(event) {\r\n    this.showClearButton = true;\r\n    if (this.showClearButton) {\r\n      this.toggleClearIcon(event, true);\r\n    }\r\n  }\r\n  onMouseLeave(event) {\r\n    this.showClearButton = false;\r\n    this.toggleClearIcon(event, false);\r\n  }\r\n  private toggleClearIcon(event: any, isShow = false) {\r\n    const str = isShow ? '' : 'none';\r\n    const clearIcon = event.target.querySelector('.input-group-clear');\r\n    if (clearIcon) {\r\n      clearIcon.style.display = str;\r\n    }\r\n  }\r\n\r\n  excludeProcInstCreatorClick(event: any) {\r\n    // this.excludeProcInstCreator = !this.excludeProcInstCreator;\r\n    if (this.excludeProcInstCreator && this.autoProcInstCreator) {\r\n      this.autoProcInstCreator = false;\r\n    }\r\n  }\r\n\r\n  excludePreActExecutorsClick(event: any) {\r\n    // this.excludePreActExecutors = !this.excludePreActExecutors;\r\n    if (this.autoAllPassExecutors === true && this.excludePreActExecutors === true) {\r\n      this.message.info('ææå·²åçäººåå·²è®¾ç½®èªå¨å®¡æ¹ï¼ä¸ä¸ªèç¹å·²åçäººåé»è®¤ä¸åè®¸æé¤ï¼', () => {\r\n        this.excludePreActExecutors = false;\r\n      });\r\n      return;\r\n    }\r\n    if (this.excludePreActExecutors && this.autoPreActExecutors) {\r\n      this.autoPreActExecutors = false;\r\n    }\r\n  }\r\n\r\n  excludeAllPassExecutorsClick(event: any) {\r\n    // this.excludeAllPassExecutors = !this.excludeAllPassExecutors;\r\n    if (this.excludeAllPassExecutors) {\r\n      if (this.autoPreActExecutors) {\r\n        this.autoPreActExecutors = false;\r\n      }\r\n      if (this.autoAllPassExecutors) {\r\n        this.autoAllPassExecutors = false;\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  autoProcInstCreatorClick(event: any) {\r\n    // if (this.designerState.propertyData.CompleteStrategy !== this.designerState.completeIterator[0].key\r\n    //   && this.autoProcInstCreator === true ) {\r\n    //   this.message.info('ãå®æç­ç¥ãä¸ºãä¼ç­¾ãæ¶ï¼ä¸åè®¸è®¾ç½®èªå¨å®¡æ¹ï¼è¯·äºè§£ï¼', () => {\r\n    //     this.autoProcInstCreator = false;\r\n    //   });\r\n    //   return;\r\n    // }\r\n    if (this.designerState.propertyData.AssignStrategy === this.designerState.assignIterator[2].key\r\n      && this.autoProcInstCreator === true ) {\r\n      this.message.info('ãåéç­ç¥ãä¸ºãé¢ç¨ãæ¶ï¼ä¸åè®¸è®¾ç½®èªå¨å®¡æ¹ï¼è¯·äºè§£ï¼', () => {\r\n        this.autoProcInstCreator = false;\r\n      });\r\n      return;\r\n    }\r\n    // this.autoProcInstCreator = !this.autoProcInstCreator;\r\n    if (this.autoProcInstCreator && this.excludeProcInstCreator) {\r\n      this.excludeProcInstCreator = false;\r\n    }\r\n  }\r\n\r\n  autoPreActExecutorsClick(event: any) {\r\n    // if (this.designerState.propertyData.CompleteStrategy !== this.designerState.completeIterator[0].key\r\n    //   && this.autoPreActExecutors === true) {\r\n    //   this.message.info('ãå®æç­ç¥ãä¸ºãä¼ç­¾ãæ¶ï¼ä¸åè®¸è®¾ç½®èªå¨å®¡æ¹ï¼è¯·äºè§£ï¼', () => {\r\n    //     this.autoPreActExecutors = false;\r\n    //   });\r\n    //   return;\r\n    // }\r\n    if (this.designerState.propertyData.AssignStrategy === this.designerState.assignIterator[2].key\r\n      && this.autoPreActExecutors === true) {\r\n      this.message.info('ãåéç­ç¥ãä¸ºãé¢ç¨ãæ¶ï¼ä¸åè®¸è®¾ç½®èªå¨å®¡æ¹ï¼è¯·äºè§£ï¼', () => {\r\n        this.autoPreActExecutors = false;\r\n      });\r\n      return;\r\n    }\r\n    if (this.excludeAllPassExecutors === true && this.autoPreActExecutors === true) {\r\n      this.message.info('ææå·²åçäººåå·²è®¾ç½®ä¸åè®¸å®¡æ¹ï¼æä»¥ä¸ä¸ªèç¹å·²åçäººåé»è®¤ä¸åè®¸èªå¨å®¡æ¹ï¼', () => {\r\n        this.autoPreActExecutors = false;\r\n      });\r\n      return;\r\n    }\r\n    // this.autoPreActExecutors = !this.autoPreActExecutors;\r\n    if (this.autoPreActExecutors && this.excludePreActExecutors) {\r\n      this.excludePreActExecutors = false;\r\n    }\r\n  }\r\n\r\n  autoAllPassExecutorsClick(event: any) {\r\n    // if (this.designerState.propertyData.CompleteStrategy !== this.designerState.completeIterator[0].key\r\n    //   && this.autoAllPassExecutors === true) {\r\n    //   this.message.info('ãå®æç­ç¥ãä¸ºãä¼ç­¾ãæ¶ï¼ä¸åè®¸è®¾ç½®èªå¨å®¡æ¹ï¼è¯·äºè§£ï¼', () => {\r\n    //     this.autoAllPassExecutors = false;\r\n    //   });\r\n    //   return;\r\n    // }\r\n    if (this.designerState.propertyData.AssignStrategy === this.designerState.assignIterator[2].key\r\n      && this.autoAllPassExecutors === true) {\r\n      this.message.info('ãåéç­ç¥ãä¸ºãé¢ç¨ãæ¶ï¼ä¸åè®¸è®¾ç½®èªå¨å®¡æ¹ï¼è¯·äºè§£ï¼', () => {\r\n        this.autoAllPassExecutors = false;\r\n      });\r\n      return;\r\n    }\r\n    // this.autoAllPassExecutors = !this.autoAllPassExecutors;\r\n    if (this.autoAllPassExecutors) {\r\n      if (this.excludeAllPassExecutors) {\r\n        this.excludeAllPassExecutors = false;\r\n      }\r\n      if (this.excludePreActExecutors) {\r\n        this.excludePreActExecutors = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  getPerformerOptions(): PerformerOptions {\r\n    return {\r\n      ExclusionPerformers: this.getExclusionPerformers(),\r\n      NoPerformerStrategy: this.noPerformerStrategy,\r\n      HistoricFirst: this.historicFirst,\r\n      automaticPerformers: this.getAutoPerformers()\r\n    };\r\n  }\r\n  private getExclusionPerformers(): string[] {\r\n    const exclusionPerf: Array<string> = [];\r\n    if (this.excludeProcInstCreator) {\r\n      exclusionPerf.push('procInstCreator');\r\n    }\r\n    if (this.excludePreActExecutors) {\r\n      exclusionPerf.push('preActExecutors');\r\n    }\r\n    if (this.excludeAllPassExecutors) {\r\n      exclusionPerf.push('allPassExecutors');\r\n    }\r\n    if (this.excludeExprPerformer) {\r\n      exclusionPerf.push(this.excludeExprPerformer);\r\n    }\r\n\r\n    return exclusionPerf;\r\n  }\r\n\r\n  private getAutoPerformers(): Array<string> {\r\n    const autoPerf: Array<string> = new Array();\r\n    if (this.autoProcInstCreator) {\r\n      autoPerf.push('procInstCreator');\r\n    }\r\n    if (this.autoPreActExecutors) {\r\n      autoPerf.push('preActExecutors');\r\n    }\r\n    if (this.autoAllPassExecutors) {\r\n      autoPerf.push('allPassExecutors');\r\n    }\r\n\r\n    return autoPerf;\r\n  }\r\n\r\n  openExprEditor() {\r\n    if (this.designerState.schemas.length > 0) {\r\n      for (const schema of this.designerState.schemas) {\r\n        this.expr.addSchema('Schema', schema);\r\n      }\r\n      if (this.designerState.schemas[0].entityTypes && this.designerState.schemas[0].entityTypes.length > 0) {\r\n        const entityType = this.designerState.schemas[0].entityTypes[0];\r\n        this.expr.addInjectedEntity(entityType.name, 'Schema',\r\n          entityType.name, InjectedType.EntityType);\r\n      }\r\n    }\r\n    const context = new Array();\r\n    if (this.designerState.procInstContext.length > 0) {\r\n      for (const variable of this.designerState.procInstContext) {\r\n        context.push(variable);\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (this.designerState.formalParameterContext.length > 0) {\r\n      for (const variable of this.designerState.formalParameterContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (this.designerState.participantContext.length > 0) {\r\n      for (const variable of this.designerState.participantContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (this.designerState.processVariableContext.length > 0) {\r\n      for (const variable of this.designerState.processVariableContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (context.length > 0) {\r\n      for (const v of context) {\r\n        this.expr.addContext(v);\r\n      }\r\n    }\r\n    // if (this.excludeExprPerformer) {\r\n    this.expr.addExpressionText(this.excludeExprPerformer);\r\n    // }\r\n    this.expr.buildExpression().then((d: string) => {\r\n      this.excludeExprPerformer = d;\r\n    });\r\n  }\r\n\r\n  clear() {\r\n    this.excludeExprPerformer = '';\r\n  }\r\n\r\n}\r\n","import { Component, OnInit, HostBinding, Output, EventEmitter, Input, ViewChild, TemplateRef, ComponentFactoryResolver, Injector, ComponentRef } from '@angular/core';\r\nimport { TypeConverter } from '@farris/ui-property-panel';\r\nimport { PerformerUIState } from './performer.uistate';\r\nimport { PerformerRepository } from './performer.repository';\r\nimport { PerformerViewModel } from './performer.viewmodel';\r\nimport { FormBuilder } from '@angular/forms';\r\nimport { BsModalService, BsModalRef } from '@farris/ui-modal';\r\nimport { PerformerEditComponent } from './views/performer-edit/performer-edit.component';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { PerformerOptionsComponent } from './views/performer-options/performer-options.component';\r\nimport { DialogComponent } from '@farris/ui-dialog';\r\nimport { PerformerEntity } from './entities/performer.entity';\r\nimport { ProcessDesignerUIState } from '../../app/process-designer.uistate';\r\nimport { ExpressionService, InjectedType, ExprEditMode } from '@gsp-svc/expression';\r\nimport { ReportingLineDataEntity } from './views/reporting-line/reporting-line-data.entity';\r\nimport { PerformerInfo } from './entities/performer-info.entity';\r\nimport { DataColumn, DatagridComponent } from '@farris/ui-datagrid';\r\nimport { Observable, of} from 'rxjs';\r\nimport { PositionPerformerEntity } from './entities/position-performer.entity';\r\nimport { HttpService } from '@ecp-caf/caf-common';\r\nimport { ComponentPerformer } from './views/component-performer/component-performer.entity';\r\nimport {MatrixDataInfoEntity} from './views/matrix-performer/entitis/matrix-data-info.entity';\r\n\r\n@Component({\r\n  selector: 'app-performer',\r\n  templateUrl: './performer.component.html',\r\n  styleUrls: ['./performer.component.scss'],\r\n  providers: [PerformerViewModel, PerformerRepository, PerformerUIState]\r\n})\r\nexport class PerformerComponent implements OnInit {\r\n  @HostBinding('class')\r\n  cls = 'farris-main-area flex-column';\r\n\r\n  display = true; // æ§å¶ç©éµåä¸èæ¯å¦æ¾ç¤º\r\n\r\n  @ViewChild('iconSelectFooter') modalFooter: TemplateRef<any>;\r\n  @ViewChild('editFooter') editFooter: TemplateRef<any>;\r\n  @ViewChild(PerformerOptionsComponent) options: PerformerOptionsComponent;\r\n  @ViewChild('participantOptions') optionsDialog: DialogComponent;\r\n  @ViewChild(DatagridComponent) grid: DatagridComponent;\r\n\r\n  @Output() closeModal = new EventEmitter<any>();\r\n  @Output() submitModal = new EventEmitter<any>();\r\n\r\n  @Input()\r\n  set value(partInfo: PerformerInfo) {\r\n    if (partInfo.performers && partInfo.performers.length > 0) {\r\n      this.uistate.performerInfo.performers = partInfo.performers;\r\n      this.uistate.performersList = this.uistate.performersList.concat(partInfo.performers as any[]);\r\n      this.uistate.performersList.map(performer => performer.description = this.performerDescription(performer as any));\r\n    }\r\n    if (partInfo.components && partInfo.components.length > 0) {\r\n      this.uistate.performerInfo.components = partInfo.components;\r\n      partInfo.components.forEach(cmp => {\r\n        this.uistate.performersList.push({\r\n          id: cmp.id,\r\n          type: 'wf.ComponentParticipant',\r\n          performerName: cmp.name,\r\n          description: this.componentDescription(cmp),\r\n          condition: cmp.condition\r\n        });\r\n      });\r\n    }\r\n    if (partInfo.reportingLines && partInfo.reportingLines.length > 0) {\r\n      this.uistate.performerInfo.reportingLines = partInfo.reportingLines;\r\n      partInfo.reportingLines.forEach(r => {\r\n        this.uistate.performersList.push({\r\n          id: r.id,\r\n          type: 'wf.ReportingLineParticipant',\r\n          performerName: r.reportingLineDefName + '-' + r.dimension,\r\n          description: this.reportingLineDescription(r),\r\n          condition: r.condition\r\n        });\r\n      });\r\n    }\r\n    if (partInfo.matrixParticipants && partInfo.matrixParticipants.length > 0) {\r\n      this.uistate.performerInfo.matrixParticipants = partInfo.matrixParticipants;\r\n      partInfo.matrixParticipants.forEach(r => {\r\n        this.uistate.performersList.push({\r\n          id: r.id,\r\n          type: 'wf.MatrixParticipant',\r\n          performerName: r.matrixDefName + '-' + r.dataFieldAlias,\r\n          description: this.matrixDescription(r),\r\n          condition: r.condition\r\n        });\r\n      });\r\n    }\r\n    if (partInfo.options) {\r\n      this.uistate.performerInfo.options = partInfo.options;\r\n    }\r\n  }\r\n\r\n  @Input() editorParams = {};\r\n\r\n  editDialog: BsModalRef;\r\n  compRef: ComponentRef<PerformerEditComponent>;\r\n  isClose = true;\r\n\r\n  modalConfig = {\r\n    title: 'åä¸è',\r\n    width: 800,\r\n    height: 515,\r\n    showButtons: true\r\n  };\r\n  columns = [\r\n    {\r\n      field: 'type', width: 50, title: 'ç±»å',\r\n      formatter: {\r\n        type: 'enum',\r\n        options: { valueField: 'value', textField: 'text', data: this.uistate.typeCollection }\r\n      }\r\n     },\r\n    { field: 'performerName', width: 50, title: 'åç§°' },\r\n    { field: 'description', width: 100, title: 'æè¿°', showTips: true },\r\n    {\r\n      field: 'condition', width: 60, title: 'å¯ç¨æ¡ä»¶', showTips: true,\r\n      editor: {\r\n        type: 'input-group',\r\n        options: {\r\n          groupText: '<i class=\"f-icon f-icon-lookup\"></i>',\r\n          editable: false,\r\n          clickHandle: (e) => {\r\n            e.formControl.setValue(e.instance.value ? e.instance.value : '');\r\n            this.editConditon(e);\r\n          },\r\n          clear: (e) => {\r\n            if (e.rowData.type === 'wf.ComponentParticipant') {\r\n              const i = this.uistate.performerInfo.components.findIndex(item => item.id === e.rowData.id);\r\n              this.uistate.performerInfo.components[i].condition = '';\r\n            } else if (e.rowData.type === 'wf.ReportingLineParticipant') {\r\n              const i = this.uistate.performerInfo.reportingLines.findIndex(item => item.id === e.rowData.id);\r\n              this.uistate.performerInfo.reportingLines[i].condition = '';\r\n            } else if (e.rowData.type === 'wf.MatrixParticipant') {\r\n              const i = this.uistate.performerInfo.matrixParticipants.findIndex(item => item.id === e.rowData.id);\r\n              this.uistate.performerInfo.matrixParticipants[i].condition = '';\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  ];\r\n\r\n  curPerformer: any;\r\n  editState = 'new'; // ç¼è¾ç¶æï¼ç¨äºåºåæ¯æ°å¢è¿æ¯ç¼è¾  new | edit\r\n\r\n  constructor(\r\n    public viewModel: PerformerViewModel,\r\n    public uistate: PerformerUIState,\r\n    private formBuilder: FormBuilder,\r\n    private resolver: ComponentFactoryResolver,\r\n    private injector: Injector,\r\n    private modalService: BsModalService,\r\n    private message: MessagerService,\r\n    private designerUIState: ProcessDesignerUIState,\r\n    private expr: ExpressionService,\r\n    private http: HttpService,\r\n  ) {\r\n    this.GetOrganizationType();\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.getMatrixConfig().subscribe(re => {\r\n      if (re && re.currentValue === 'false') {\r\n        this.display = false;\r\n      }\r\n    });\r\n  }\r\n  add() {\r\n    this.editState = 'new';\r\n    const compFactory = this.resolver.resolveComponentFactory(PerformerEditComponent);\r\n    this.compRef = compFactory.create(this.injector);\r\n    this.compRef.instance.display = this.display;\r\n\r\n    const modalConfig = {\r\n      title: 'åä¸èéæ©',\r\n      width: 800,\r\n      height: 515,\r\n      buttons: this.editFooter,\r\n      showButtons: true\r\n    };\r\n    this.editDialog = this.modalService.show(this.compRef, modalConfig);\r\n  }\r\n  edit() {\r\n    this.editState = 'edit'\r\n    if (this.uistate.curPerformer) {\r\n      const modalConfig = {\r\n        title: 'åä¸èéæ©',\r\n        width: 800,\r\n        height: 515,\r\n        buttons: this.editFooter,\r\n        showButtons: true\r\n      };\r\n      const compFactory = this.resolver.resolveComponentFactory(PerformerEditComponent);\r\n      this.compRef = compFactory.create(this.injector);\r\n      switch (this.uistate.curPerformer.type) {\r\n        case 'wf.PositionParticipant':\r\n          this.compRef.instance.performer = {\r\n            type: 'wf.PositionParticipant',\r\n            value: this.uistate.performerInfo.performers.find(p => p.id === this.uistate.curPerformer.id)\r\n          };\r\n          break;\r\n        case 'wf.UserParticipant':\r\n          this.compRef.instance.performer = {\r\n            type: 'wf.UserParticipant',\r\n            value: this.uistate.performerInfo.performers.find(p => p.id === this.uistate.curPerformer.id)\r\n          }\r\n          break;\r\n        case 'wf.ReportingLineParticipant':\r\n          const reportingLine = this.uistate.performerInfo.reportingLines.find(r => {\r\n            return r.id === this.uistate.curPerformer.id;\r\n          })\r\n          this.compRef.instance.performer = {\r\n            type: 'wf.ReportingLineParticipant',\r\n            value: reportingLine\r\n          };\r\n          const url = '/api/runtime/wf/v1.0/reportingLineDefinitions/' + reportingLine.reportingLineDefId;\r\n          this.http.get(url).subscribe((res: any) => {\r\n            if (!res) {\r\n              this.message.error('è¯¥æ¡æ±æ¥å³ç³»æ°æ®çå®ä¹å·²å é¤ï¼è¯¥æ¡æ°æ®å°å é¤')\r\n              this.remove();\r\n            } else {\r\n              this.editDialog = this.modalService.show(this.compRef, modalConfig);\r\n            }\r\n          });\r\n          break;\r\n        case 'wf.MatrixParticipant':\r\n          const matrix = this.uistate.performerInfo.matrixParticipants.find(r => {\r\n            return r.id === this.uistate.curPerformer.id;\r\n          })\r\n          this.compRef.instance.performer = {\r\n            type: 'wf.MatrixParticipant',\r\n            value: matrix\r\n          };\r\n          const urlMatrix = '/api/runtime/wf/v1.0/matrixDefinition/' + matrix.matrixDefId;\r\n          this.http.get(urlMatrix).subscribe((res: any) => {\r\n            if (!res) {\r\n              this.message.error('è¯¥æ¡ç©éµæ°æ®çå®ä¹å·²å é¤ï¼è¯¥æ¡æ°æ®å°å é¤')\r\n              this.remove();\r\n            } else {\r\n              this.editDialog = this.modalService.show(this.compRef, modalConfig);\r\n            }\r\n          });\r\n          break;\r\n        case 'wf.ComponentParticipant':\r\n          this.compRef.instance.performer = {\r\n            type: 'wf.ComponentParticipant',\r\n            value: this.uistate.performerInfo.components.find(c => {\r\n              return c.id === this.uistate.curPerformer.id;\r\n            })\r\n          };\r\n          break;\r\n      }\r\n      if(this.uistate.curPerformer.type !== 'wf.ReportingLineParticipant' &&\r\n        this.uistate.curPerformer.type !== 'wf.MatrixParticipant'){ // æ±æ¥å³ç³»åç©éµåç¬å¤ç\r\n        this.editDialog = this.modalService.show(this.compRef, modalConfig);\r\n      }\r\n    }\r\n  }\r\n  remove() {\r\n    if (this.grid.selectedRow) {\r\n      this.grid.endCellEdit();\r\n      if (this.grid.selectedRow.data.type === 'wf.ComponentParticipant') {\r\n        const i = this.uistate.performerInfo.components.findIndex(item => item.id === this.grid.selectedRow.data.id);\r\n        this.uistate.performerInfo.components.splice(i, 1);\r\n      } else if (this.grid.selectedRow.data.type === 'wf.ReportingLineParticipant') {\r\n        const i = this.uistate.performerInfo.reportingLines.findIndex(item => item.id === this.grid.selectedRow.data.id);\r\n        this.uistate.performerInfo.reportingLines.splice(i, 1);\r\n      } else if (this.grid.selectedRow.data.type === 'wf.MatrixParticipant') {\r\n        const i = this.uistate.performerInfo.matrixParticipants.findIndex(item => item.id === this.grid.selectedRow.data.id);\r\n        this.uistate.performerInfo.matrixParticipants.splice(i, 1);\r\n      } else {\r\n        const i = this.uistate.performerInfo.performers.findIndex(item => item.id === this.grid.selectedRow.data.id);\r\n        this.uistate.performerInfo.performers.splice(i, 1);\r\n      }\r\n      const index = this.uistate.performersList.findIndex(p => p.id === this.grid.selectedRow.data.id);\r\n      this.uistate.performersList.splice(index, 1);\r\n\r\n      this.grid.loadData(this.uistate.performersList);\r\n    } else {\r\n      this.message.info('è¯·åéä¸­ä¸æ¡åä¸èä¿¡æ¯ï¼');\r\n    }\r\n  }\r\n  clear() {\r\n    this.uistate.performerInfo.performers = [];\r\n    this.uistate.performerInfo.components = [];\r\n    this.uistate.performerInfo.reportingLines = [];\r\n    this.uistate.performerInfo.matrixParticipants = [];\r\n    this.uistate.performersList = [];\r\n    this.grid.loadData(this.uistate.performersList);\r\n  }\r\n  clickOK() {\r\n    this.grid.endCellEdit();\r\n    const object = {\r\n      value: this.uistate.performerInfo, parameters: null\r\n    };\r\n    this.submitModal.emit(object);\r\n  }\r\n  clickCancel() {\r\n    this.closeModal.emit();\r\n  }\r\n  editOK() {\r\n    if (this.compRef) {\r\n      const re = this.compRef.instance.getPerformers();\r\n      if (re.userPerformers && re.userPerformers.length > 0) {\r\n        re.userPerformers.forEach(p => {\r\n          const i = this.uistate.performerInfo.performers.findIndex(a => (a.id === p.id || a.performerId === p.performerId));\r\n          if (i > -1) {\r\n            const id = this.uistate.performerInfo.performers[i].id;\r\n            this.uistate.performerInfo.performers[i] = p;\r\n            const index = this.uistate.performersList.findIndex(a => a.id === id);\r\n            this.uistate.performersList[index] = p;\r\n          } else {\r\n            if (this.editState === 'edit') {\r\n              this.remove();\r\n            }\r\n            this.uistate.performerInfo.performers.push(p);\r\n            this.uistate.performersList = this.uistate.performersList.concat([p]);\r\n          }\r\n        });\r\n        this.uistate.performersList\r\n          .filter(p => p.type === this.uistate.typeCollection[0].value || p.type === this.uistate.typeCollection[1].value )\r\n          .map(performer => performer.description =\r\n            this.performerDescription(performer as any));\r\n      }\r\n      if (re.positionPerformers && re.positionPerformers.length > 0) {\r\n        re.positionPerformers.forEach(p => {\r\n\r\n          // (1)idä¸è´ï¼ä¸ºç¼è¾å²ä½ï¼ï¼2ï¼performidä¸è´ï¼æ°å¢çç¨æ·ï¼å²ä½å·²å­å¨\r\n          const i = this.uistate.performerInfo.performers.findIndex(a => (a.id === p.id || a.performerId === p.performerId));\r\n          if (i > -1) {\r\n            const id = this.uistate.performerInfo.performers[i].id;\r\n            this.uistate.performerInfo.performers[i] = p;\r\n            const index = this.uistate.performersList.findIndex(a => a.id === id);\r\n            this.uistate.performersList[index] = p;\r\n          } else {\r\n            this.uistate.performerInfo.performers.push(p);\r\n            this.uistate.performersList = this.uistate.performersList.concat([p]);\r\n          }\r\n        });\r\n        this.uistate.performersList\r\n          .filter(p => p.type === this.uistate.typeCollection[0].value || p.type === this.uistate.typeCollection[1].value )\r\n          .map(performer => performer.description =\r\n            this.performerDescription(performer as any));\r\n      }\r\n      if (re.component && re.component.metadataId && re.component.methodCode) {\r\n        const i = this.uistate.performerInfo.components.findIndex(a => a.id === re.component.id);\r\n        if (i > -1) {\r\n          this.uistate.performerInfo.components[i] = re.component;\r\n          const index = this.uistate.performersList.findIndex(a => a.id === re.component.id);\r\n          this.uistate.performersList[index] = {\r\n            id: re.component.id,\r\n            type: 'wf.ComponentParticipant',\r\n            performerName: re.component.name,\r\n            description: this.componentDescription(re.component),\r\n            condition: re.component.condition\r\n          };\r\n        } else {\r\n          this.uistate.performerInfo.components.push(re.component);\r\n          this.uistate.performersList.push({\r\n            id: re.component.id,\r\n            type: 'wf.ComponentParticipant',\r\n            performerName: re.component.name,\r\n            description: this.componentDescription(re.component),\r\n            condition: ''\r\n          });\r\n        }\r\n      }\r\n      if (re.reportingLine && re.reportingLine.reportingLineDefId && re.reportingLine.dimension) {\r\n        if(re.reportingLine.reportingReferObject === 'dept' && !re.reportingLine.refOrgId){\r\n          this.isClose = false;\r\n          this.message.info('âé¨é¨âæ±æ¥å³ç³»ç±»åä¸ï¼åç§äººæå¨é¨é¨ä¸è½ä¸ºç©º');\r\n        } else if (re.reportingLine.reportingReferObject !== 'dept' && !re.reportingLine.refUserId && !re.reportingLine.refEmployeeId) { // ç¨æ·åå¶ä»äººåæ±æ¥å¯¹è±¡ç±»åï¼åç§ç¨æ·ååç§åå·¥ä¸è½å¨é¨ä¸ºç©º\r\n          this.isClose = false;\r\n          this.message.info('âç¨æ·âæ±æ¥å³ç³»ç±»åä¸ï¼åç§äººä¸è½ä¸ºç©º');\r\n        } else {\r\n          this.isClose = true;\r\n          this.addReportingLineData(re);\r\n        }\r\n      }\r\n      if (re.matrix && re.matrix.matrixDefId) {\r\n        if(!re.matrix.conditionField1 && !re.matrix.conditionField2 && !re.matrix.conditionField3){\r\n          this.isClose = false;\r\n          this.message.info('æ¡ä»¶å­æ®µè³å°è¦å­å¨ä¸ä¸ª');\r\n        } else if(!re.matrix.dataFieldAlias){\r\n          this.isClose = false;\r\n          this.message.info('æ°æ®å­æ®µä¸è½ä¸ºç©º');\r\n        } else {\r\n          this.isClose = true;\r\n          this.addMatrixData(re);\r\n        }\r\n      }\r\n      this.grid.loadData(this.uistate.performersList);\r\n    }\r\n    if (this.editDialog && this.isClose) {\r\n      this.editDialog.close();\r\n    }\r\n  }\r\n  private addReportingLineData(re: any){\r\n    const i = this.uistate.performerInfo.reportingLines.findIndex(a => a.id === re.reportingLine.id);\r\n    if (i > -1) {\r\n      this.uistate.performerInfo.reportingLines[i] = re.reportingLine;\r\n      const index = this.uistate.performersList.findIndex(a => a.id === re.reportingLine.id);\r\n      this.uistate.performersList[index] = {\r\n        id: re.reportingLine.id,\r\n        type: 'wf.ReportingLineParticipant',\r\n        performerName: re.reportingLine.reportingLineDefName + '-' + re.reportingLine.dimension,\r\n        description: this.reportingLineDescription(re.reportingLine),\r\n        condition: re.reportingLine.condition\r\n      };\r\n    } else {\r\n      for(const reportingLineData of this.uistate.performerInfo.reportingLines){\r\n        if(reportingLineData.reportingLineDefId === re.reportingLine.definitionId &&\r\n          reportingLineData.dimension === re.reportingLine.dimension &&\r\n          reportingLineData.refUserId === re.reportingLine.referUserId &&\r\n          reportingLineData.refEmployeeId === re.reportingLine.refEmployeeId &&\r\n          reportingLineData.refOrgId === re.reportingLine.referDeptId\r\n        ){\r\n          this.message.error('è¯¥æ±æ¥å³ç³»å·²ç»è¿è¡è¿éç½®');\r\n          return;\r\n        }\r\n      }\r\n      this.uistate.performerInfo.reportingLines.push(re.reportingLine);\r\n      this.uistate.performersList.push({\r\n        id: re.reportingLine.id,\r\n        type: 'wf.ReportingLineParticipant',\r\n        performerName: re.reportingLine.reportingLineDefName + '-' + re.reportingLine.dimension,\r\n        description: this.reportingLineDescription(re.reportingLine),\r\n        condition: re.reportingLine.condition\r\n      });\r\n    }\r\n  }\r\n  private addMatrixData(re: any){\r\n    const i = this.uistate.performerInfo.matrixParticipants.findIndex(a => a.id === re.matrix.id);\r\n    if (i > -1) {\r\n      this.uistate.performerInfo.matrixParticipants[i] = re.matrix;\r\n      const index = this.uistate.performersList.findIndex(a => a.id === re.matrix.id);\r\n      this.uistate.performersList[index] = {\r\n        id: re.matrix.id,\r\n        type: 'wf.MatrixParticipant',\r\n        performerName: re.matrix.matrixDefName + '-' + re.matrix.dataFieldAlias,\r\n        description: this.matrixDescription(re.matrix),\r\n        condition: re.matrix.condition\r\n      };\r\n    } else {\r\n      for(const matrixData of this.uistate.performerInfo.matrixParticipants){\r\n        if(matrixData.matrixDefId === re.matrix.matrixDefId &&\r\n          matrixData.conditionField1 === re.matrix.conditionField1 &&\r\n          matrixData.conditionField2 === re.matrix.conditionField2 &&\r\n          matrixData.conditionField3 === re.matrix.conditionField3 &&\r\n          matrixData.dataFieldAlias === re.matrix.dataFieldAlias\r\n        ){\r\n          this.message.error('è¯¥ç©éµå·²ç»è¿è¡è¿éç½®');\r\n          return;\r\n        }\r\n      }\r\n      this.uistate.performerInfo.matrixParticipants.push(re.matrix);\r\n      this.uistate.performersList.push({\r\n        id: re.matrix.id,\r\n        type: 'wf.MatrixParticipant',\r\n        performerName: re.matrix.matrixDefName + '-' + re.matrix.dataFieldAlias,\r\n        description: this.matrixDescription(re.matrix),\r\n        condition: re.matrix.condition\r\n      });\r\n    }\r\n  }\r\n  editCancel() {\r\n    if (this.editDialog) {\r\n      this.editDialog.close();\r\n    }\r\n  }\r\n  participantOptionsSet() {\r\n    this.uistate.performerInfo.options = this.options.getPerformerOptions();\r\n    this.optionsDialog.close();\r\n  }\r\n\r\n  private performerDescription(performer: PerformerEntity) {\r\n    if (performer.type === 'wf.UserParticipant') {\r\n      if (performer.tag === 'expression') {\r\n        return performer.performerId;\r\n      } else {\r\n        if (performer.orgName) {\r\n          return `é¨é¨ï¼${performer.orgName}`;\r\n        } else {\r\n          return '';\r\n        }\r\n      }\r\n    } else if (performer.type === 'wf.PositionParticipant') {\r\n      if ((performer as PositionPerformerEntity).positionType === '1') {\r\n        if (performer.orgId) {\r\n          return `å²ä½ç±»åï¼éç¨å²ä½ï¼é¨é¨ï¼${performer.orgId}`;\r\n        } else {\r\n          return `å²ä½ç±»åï¼éç¨å²ä½`;\r\n        }\r\n      } else if ((performer as PositionPerformerEntity).positionType === '0') {\r\n        return 'å²ä½ç±»åï¼ç»ç»å²ä½';\r\n      }\r\n    }\r\n  }\r\n  private componentDescription(component: ComponentPerformer) {\r\n    let des = `æä»¶ï¼${component.name},åæ°ï¼{`;\r\n    if (component.actualParameters && component.actualParameters.length > 0) {\r\n      component.actualParameters.forEach(p => {\r\n        des += `${p.code}ï¼${p.value}ï¼`;\r\n      });\r\n      des = des.substring(0, des.length - 1);\r\n    }\r\n    des += '}';\r\n    return des;\r\n  }\r\n  private reportingLineDescription(reportingLine: ReportingLineDataEntity) {\r\n    let description = '';\r\n    if(reportingLine.refUserId){\r\n      description += `åç§äººï¼${reportingLine.refUserId}`;\r\n    }\r\n    if(reportingLine.refEmployeeId){\r\n      description += `åç§äººï¼${reportingLine.refEmployeeId}`;\r\n    }\r\n    if(reportingLine.refOrgId){\r\n      if(reportingLine.refUserId){\r\n        description += `ï¼`;\r\n      }\r\n      if(reportingLine.refEmployeeId){\r\n        description += `ï¼`;\r\n      }\r\n      description += `åç§ç»ç»ï¼${reportingLine.refOrgId}`;\r\n    }\r\n    return description;\r\n  }\r\n  private matrixDescription(matrix: MatrixDataInfoEntity) {\r\n    let description = '';\r\n    if(matrix.conditionField1){\r\n      description += `æ¡ä»¶1ï¼${matrix.conditionFieldText1}ï¼`;\r\n    }\r\n    if(matrix.conditionField2){\r\n      description += `æ¡ä»¶2ï¼${matrix.conditionFieldText2}ï¼`;\r\n    }\r\n    if(matrix.conditionField3){\r\n      description += `æ¡ä»¶3ï¼${matrix.conditionFieldText3}ï¼`;\r\n    }\r\n    if(matrix.dataFieldAlias){\r\n      description += `æ°æ®ï¼${matrix.dataFieldAlias}ï¼`;\r\n    }\r\n    return description.slice(0, description.length - 1);\r\n  }\r\n\r\n  editConditon(e: any) {\r\n    if (this.designerUIState.schemas.length > 0) {\r\n      for (const schema of this.designerUIState.schemas) {\r\n        this.expr.addSchema('Schema', schema);\r\n      }\r\n      if (this.designerUIState.schemas[0].entityTypes && this.designerUIState.schemas[0].entityTypes.length > 0) {\r\n        const entityType = this.designerUIState.schemas[0].entityTypes[0];\r\n        this.expr.addInjectedEntity(entityType.name, 'Schema',\r\n          entityType.name, InjectedType.EntityType);\r\n      }\r\n    }\r\n    const context = new Array();\r\n    if (this.designerUIState.procInstContext.length > 0) {\r\n      for (const variable of this.designerUIState.procInstContext) {\r\n        context.push(variable);\r\n      }\r\n    }\r\n    if (this.designerUIState.formalParameterContext.length > 0) {\r\n      for (const variable of this.designerUIState.formalParameterContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (this.designerUIState.participantContext.length > 0) {\r\n      for (const variable of this.designerUIState.participantContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (this.designerUIState.processVariableContext.length > 0) {\r\n      for (const variable of this.designerUIState.processVariableContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (this.designerUIState.activityComponentContext.length > 0) {\r\n      for (const variable of this.designerUIState.activityComponentContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (context.length > 0) {\r\n      for (const v of context) {\r\n        this.expr.addContext(v);\r\n      }\r\n    }\r\n    this.expr.addExpressionText(e.instance.value);\r\n    this.expr.setEditPattern(ExprEditMode.Conditional); // é»è®¤æå¼ç®æè¡¨è¾¾å¼ç¼è¾å¨\r\n    this.expr.buildExpression().then((cond: string) => {\r\n      if (this.grid.selectedRow.data.type === 'wf.ComponentParticipant') {\r\n        this.uistate.performerInfo.components.find(c => c.id === this.grid.selectedRow.data.id).condition = cond;\r\n      } else if (this.grid.selectedRow.data.type === 'wf.ReportingLineParticipant') {\r\n        this.uistate.performerInfo.reportingLines.find(c => c.id === this.grid.selectedRow.data.id).condition = cond;\r\n      } else if (this.grid.selectedRow.data.type === 'wf.MatrixParticipant'){\r\n        this.uistate.performerInfo.matrixParticipants.find(c => c.id === this.grid.selectedRow.data.id).condition = cond;\r\n      } else {\r\n        this.uistate.performerInfo.performers.find(p => p.id === this.grid.selectedRow.data.id).condition = cond;\r\n      }\r\n      e.formControl.setValue(cond);\r\n      e.instance.cd.detectChanges();\r\n    });\r\n  }\r\n\r\n  afterEdit = (rowIndex: number, rowData: any, column?: DataColumn) => {\r\n    return of(true);\r\n  }\r\n\r\n  selectChanged(data: any) {\r\n    this.uistate.curPerformer = data.data;\r\n  }\r\n\r\n  private GetOrganizationType() {\r\n    const url = '/api/runtime/sys/v1.0/authfields/globalauthfields';\r\n    this.http.get(url)\r\n      .subscribe((data: any) => this.designerUIState.orgTypeCollection = data.map(d => ({ value: d.id, text: d.name })));\r\n  }\r\n\r\n  private getMatrixConfig(): Observable<any> {\r\n    const url = `/api/runtime/wf/v1.0/generalConfig/Is_EnableMatrix`;\r\n    return this.http.get(url);\r\n  }\r\n}\r\nexport class PerformerConverter implements TypeConverter {\r\n  constructor() { }\r\n\r\n  convertTo(data: any): string {\r\n    if ((data.performers && data.performers.length > 0)\r\n      || (data.components && data.components.length > 0)\r\n      || (data.reportingLines && data.reportingLines.length > 0)\r\n      || (data.matrixParticipants && data.matrixParticipants.length > 0)\r\n    ) {\r\n      return 'ï¼å·²è®¾ç½®ï¼';\r\n    } else {\r\n      return 'ï¼æªè®¾ç½®ï¼';\r\n    }\r\n  }\r\n}\r\n","import { Component, OnInit, HostBinding, Output, EventEmitter, Input, ViewChild, TemplateRef } from '@angular/core';\r\nimport { TypeConverter } from '@farris/ui-property-panel';\r\nimport { ActionOrganizationScope, ActionScope, OrganizationPotentialOwner, OrganizationLevel } from './actionOrganizationScope';\r\n\r\n@Component({\r\n  selector: 'app-organization-potential-owner',\r\n  templateUrl: './organization-potential-owner.component.html',\r\n  styleUrls: ['./organization-potential-owner.component.scss']\r\n})\r\nexport class OrganizationPotentialOwnerComponent implements OnInit {\r\n  @HostBinding('class')\r\n  cls = 'farris-main-area flex-column';\r\n\r\n  @Output() closeModal = new EventEmitter<any>();\r\n  @Output() submitModal = new EventEmitter<any>();\r\n\r\n  @Input()\r\n  set value(v: ActionOrganizationScope) {\r\n    this.action = v.action;\r\n    if (this.action === this.actionCollection[2].value) {\r\n      if (v.enable === null || v.enable === undefined) {\r\n        this.enable = true;\r\n      } else {\r\n        this.enable = v.enable;\r\n      }\r\n    } else {\r\n      this.enable = v.enable;\r\n    }\r\n    if (v.scope) {\r\n      this.organizationLevel = v.scope.organizationLevel;\r\n      this.includeChildren = v.scope.includeChildren;\r\n    }\r\n  }\r\n\r\n  @ViewChild('iconSelectFooter') modalFooter: TemplateRef<any>;\r\n  modalConfig = {\r\n    title: 'éé¡¹è®¾ç½®',\r\n    width: 425,\r\n    height: 360,\r\n    showButtons: true\r\n  };\r\n  organizationLevelCollection = [{\r\n    value: 'GLOBAL',\r\n    text: 'å¨å',\r\n    orgId: 'global',\r\n  }, {\r\n    value: 'UNIT',\r\n    text: 'æ¬åä½',\r\n    orgId: 'currentUnit'\r\n  }, {\r\n    value: 'DEPARTMENT',\r\n    text: 'æ¬é¨é¨',\r\n    orgId: 'currentDepartment'\r\n    }];\r\n  actionCollection = [{\r\n      value: ActionScope.AddSignBehind, name: 'å ç­¾'\r\n  }, {\r\n      value: ActionScope.AddSignFront, name: 'å¾è¯¢'\r\n  }, {\r\n      value: ActionScope.Transfer, name: 'ç§»äº¤'\r\n  }, {\r\n    value: ActionScope.Notify, name: 'ç¥ä¼'\r\n}];\r\n  enable = false;\r\n  organizationLevel = this.organizationLevelCollection[0].value;\r\n  action = this.actionCollection[0].value;\r\n  includeChildren = false;\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  clickOK() {\r\n    const scope = new ActionOrganizationScope();\r\n    scope.enable = this.enable;\r\n    scope.action = this.action;\r\n    if (scope.enable && this.organizationLevel !== this.organizationLevelCollection[0].value) {\r\n      const potential = new OrganizationPotentialOwner();\r\n      potential.actionScope = this.action;\r\n      potential.organizationLevel = this.organizationLevel as OrganizationLevel;\r\n      potential.organizationId = this.organizationLevelCollection.find(o => o.value === this.organizationLevel).orgId;\r\n      potential.organizationName = this.organizationLevelCollection.find(o => o.value === this.organizationLevel).text;\r\n      potential.includeChildren = this.includeChildren;\r\n      potential.tag = 'variable';\r\n      scope.scope = potential;\r\n    }\r\n    const object = { value: scope, parameters: null };\r\n    this.submitModal.emit(object);\r\n  }\r\n  clickCancel() {\r\n    this.closeModal.emit();\r\n  }\r\n  valueChange(event: any) {\r\n    switch (event.value) {\r\n      case this.organizationLevelCollection[0].value:\r\n        this.includeChildren = false;\r\n        break;\r\n      case this.organizationLevelCollection[1].value:\r\n        this.includeChildren = true;\r\n        break;\r\n      case this.organizationLevelCollection[2].value:\r\n        this.includeChildren = false;\r\n        break;\r\n    }\r\n  }\r\n  actionName = () => {\r\n    return this.actionCollection.find(a => a.value === this.action).name;\r\n  }\r\n}\r\nexport class OrganizationPotentialOwnerConverter implements TypeConverter {\r\n  constructor() { }\r\n\r\n  convertTo(data: ActionOrganizationScope): string {\r\n    if (data.action === ActionScope.Transfer && (data.enable === null || data.enable === undefined)) {\r\n      return 'ï¼å·²è®¾ç½®ï¼';\r\n    } else {\r\n      if (data.enable) {\r\n          return 'ï¼å·²è®¾ç½®ï¼';\r\n      } else {\r\n        return 'ï¼æªè®¾ç½®ï¼';\r\n      }\r\n    }\r\n  }\r\n}\r\n","export class AnonymousSet { \r\n    isAnonymity = false;\r\n    anonymous = 'å®¡æ¹äºº';\r\n}\r\n","import { Component, OnInit, HostBinding, EventEmitter, Output, Input, ViewChild, TemplateRef, Inject, Injector } from '@angular/core';\r\nimport { TypeConverter } from '@farris/ui-property-panel';\r\nimport { AnonymousSet } from './anonymous-set.entity';\r\n\r\n@Component({\r\n  selector: 'lib-anonymous-set',\r\n  templateUrl: './anonymous-set.component.html',\r\n  styleUrls: ['./anonymous-set.component.scss']\r\n})\r\nexport class AnonymousSetComponent implements OnInit {\r\n  @HostBinding('class')\r\n  cls = 'farris-main-area flex-column';\r\n\r\n  @Output() closeModal = new EventEmitter<any>();\r\n  @Output() submitModal = new EventEmitter<any>();\r\n\r\n  @Input() set value(data: AnonymousSet) {\r\n    this.anonymousSet.isAnonymity = data.isAnonymity || false;\r\n    this.anonymousSet.anonymous = data.anonymous || 'å®¡æ¹äºº';\r\n  }\r\n\r\n  @ViewChild('iconSelectFooter') modalFooter: TemplateRef<any>;\r\n\r\n  anonymousSet: AnonymousSet = new AnonymousSet();\r\n  modalConfig = {\r\n    title: 'å¿åéé¡¹',\r\n    width: 450,\r\n    height: 360,\r\n    showButtons: true\r\n  };\r\n  constructor(\r\n    private injector: Injector\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n  clickOK() {\r\n    const object = { value: this.anonymousSet, parameters: null };\r\n    this.submitModal.emit(object);\r\n  }\r\n\r\n  clickCancel() {\r\n    this.closeModal.emit();\r\n  }\r\n}\r\n\r\nexport class AnonymousSetConverter implements TypeConverter {\r\n  constructor() { }\r\n\r\n  convertTo(data: any): string {\r\n    if (data && data.isAnonymity) {\r\n      return 'ï¼å·²è®¾ç½®ï¼';\r\n    } else {\r\n      return 'ï¼æªè®¾ç½®ï¼';\r\n    }\r\n  }\r\n}\r\n","export class VariableSetting {\r\n    /**\r\n     * åéId\r\n     */\r\n    // variableId: string;\r\n    /**\r\n     * åéç¼å·\r\n     */\r\n    variableCode: string;\r\n    /**\r\n     * åéåç§°\r\n     */\r\n    variableName: string;\r\n    /**\r\n     * èªå®ä¹æ ç­¾ï¼èµå¼æ¹å¼\r\n     * expression è¯­ä¹åè¡¨è¾¾å¼\r\n     * constant å¸¸é\r\n     * component æä»¶\r\n     */\r\n    tag: string;\r\n\r\n    /**\r\n     * åéæ§è¡æ¶æº\r\n     * ACTIVITY_STARTED æ´»å¨å¼å§\r\n     * ACTIVITY_COMPLETED æ´»å¨å®æ\r\n     */\r\n    executionTime: string;\r\n\r\n    /**\r\n     * åéå¼\r\n     */\r\n    value: string;\r\n\r\n    valueText: string;\r\n\r\n    /**\r\n     * æä»¶\r\n     */\r\n    component: any;\r\n}\r\n","import { Component, OnInit, HostBinding, Output, EventEmitter, Input, ViewChild, TemplateRef, Injector, ComponentFactoryResolver } from '@angular/core';\r\nimport { DatagridComponent } from '@farris/ui-datagrid';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { TypeConverter } from '@farris/ui-property-panel';\r\nimport { BsModalService } from '@farris/ui-modal';\r\nimport { ProcessVariablesComponent } from '../process-variables/process-variables.component';\r\nimport { ProcessDesignerUIState } from '../../app/process-designer.uistate';\r\nimport { VariableSetting } from './variable-setting';\r\nimport { EditorTypes } from '@farris/ui-datagrid-editors';\r\nimport { ExprEditMode, ExpressionService, InjectedType } from '@gsp-svc/expression';\r\nimport { ComponentEditComponent } from './views/component-edit/component-edit.component';\r\nimport { RowEditParam } from '@farris/ui-datagrid/lib/types';\r\nimport { of } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'lib-variable-setting',\r\n  templateUrl: './variable-setting.component.html',\r\n  styleUrls: ['./variable-setting.component.scss']\r\n})\r\nexport class VariableSettingComponent implements OnInit {\r\n  @HostBinding('class')\r\n  cls = 'farris-main-area flex-column';\r\n  @Output() closeModal = new EventEmitter<any>();\r\n  @Output() submitModal = new EventEmitter<any>();\r\n\r\n  @Input() value: Array<VariableSetting> = new Array();\r\n  @Input() editorParams: any = {};\r\n  @ViewChild('iconSelectFooter') modalFooter: TemplateRef<any>;\r\n  @ViewChild('grid') grid: DatagridComponent;\r\n  @ViewChild('cell') cell: TemplateRef<any>;\r\n\r\n  columns = [];\r\n\r\n  private tags = [\r\n    { value: 'constant', text: 'å¸¸é' },\r\n    { value: 'expression', text: 'è¡¨è¾¾å¼' },\r\n    { value: 'component', text: 'æä»¶' }\r\n  ];\r\n\r\n  private opportunities = [\r\n    { value: 'ACTIVITY_STARTED', text: 'æ´»å¨å¼å§' },\r\n    { value: 'ACTIVITY_COMPLETED', text: 'æ´»å¨ç»æ' }\r\n  ];\r\n\r\n  modalConfig = {\r\n    title: 'åéè®¾ç½®',\r\n    width: 780,\r\n    height: 460,\r\n    showButtons: true\r\n  };\r\n\r\n  constructor(\r\n    private resolver: ComponentFactoryResolver,\r\n    private injector: Injector,\r\n    private modalService: BsModalService,\r\n    private message: MessagerService,\r\n    private uistate: ProcessDesignerUIState,\r\n    private expr: ExpressionService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.columns = [\r\n      {\r\n        field: 'variableCode', width: 90, title: 'åéç¼å·', sortable: true,\r\n        validators: [\r\n          { type: 'required', messager: 'å¿å¡«' }\r\n        ]\r\n      },\r\n      {\r\n        field: 'variableName', width: 90, title: 'åéåç§°', sortable: true,\r\n        validators: [\r\n          { type: 'required', messager: 'å¿å¡«' }\r\n        ]\r\n      }, {\r\n        field: 'tag', width: 60, title: 'å¼ç±»å', sortable: true,\r\n        formatter: {\r\n          type: 'enum',\r\n          options: { valueField: 'value', textField: 'text', data: this.tags }\r\n        },\r\n        editor: {\r\n          type: EditorTypes.COMBOLIST,\r\n          options: {\r\n            valueField: 'value', textField: 'text', data: this.tags, idField: 'value', panelHeight: 'auto', showClear: false,\r\n            selectChange: (e) => {\r\n              this.value = this.value.map(v => {\r\n                if (v.variableCode === e.rowId) {\r\n                  v.value = null;\r\n                  v.valueText = null;\r\n                  if (v.component) {\r\n                    v.component = null;\r\n                  }\r\n                  return v;\r\n                } else {\r\n                  return v;\r\n                }\r\n              });\r\n            }\r\n          }\r\n        },\r\n        validators: [\r\n          { type: 'required', messager: 'å¿å¡«' }\r\n        ]\r\n      }, {\r\n        field: 'executionTime', width: 80, title: 'æ§è¡æ¶æº', sortable: true,\r\n        formatter: {\r\n          type: 'enum',\r\n          options: { valueField: 'value', textField: 'text', data: this.opportunities }\r\n        },\r\n        editor: {\r\n          type: EditorTypes.COMBOLIST,\r\n          options: {\r\n            valueField: 'value', textField: 'text', data: this.opportunities, idField: 'value', panelHeight: 'auto', showClear: false,\r\n          }\r\n        },\r\n        validators: [\r\n          { type: 'required', messager: 'å¿å¡«' }\r\n        ],\r\n      },\r\n      {\r\n        field: 'valueText', width: 150, title: 'åéå¼', showTips: true,\r\n        editor: { type: EditorTypes.TEXTBOX, options: {} },\r\n        validators: [\r\n          { type: 'required', messager: 'å¿å¡«' }\r\n        ]\r\n      }\r\n    ];\r\n  }\r\n\r\n  add() {\r\n    let dialog: any;\r\n    const compFactory = this.resolver.resolveComponentFactory(ProcessVariablesComponent);\r\n    const compRef = compFactory.create(this.injector);\r\n    compRef.instance.variableSetting = true;\r\n    compRef.instance.value = this.uistate.ProcessVariables;\r\n    compRef.instance.variableSetEmitter.subscribe((re: any[]) => {\r\n      for (const v of re) {\r\n        const variableSet = new VariableSetting();\r\n        variableSet.variableCode = v.data.name;\r\n        variableSet.variableName = v.data.documentation;\r\n        variableSet.tag = v.data.tag || this.tags[0].value;\r\n        variableSet.executionTime = v.data.executionTime || this.opportunities[0].value;\r\n        if (this.value.findIndex(i => i.variableCode === variableSet.variableCode) === -1) {\r\n          this.value = this.value.concat([variableSet]);\r\n        }\r\n      }\r\n      dialog.close();\r\n    });\r\n    compRef.instance.closeModal.subscribe(re => {\r\n      dialog.close();\r\n    });\r\n    const modalConfig = {\r\n      title: 'æµç¨åé',\r\n      width: 660,\r\n      height: 460,\r\n      showButtons: true,\r\n      buttons: compRef.instance.modalFooter\r\n    };\r\n    dialog = this.modalService.show(compRef, modalConfig);\r\n  }\r\n\r\n  delete() {\r\n    this.grid.endCellEdit();\r\n    const selected = this.grid.selectedRow;\r\n    if (!selected) {\r\n      this.message.info('å°æªéä¸­åéï¼');\r\n      return;\r\n    }\r\n    this.value = this.value.filter(v => v.variableCode !== selected.data.variableCode);\r\n  }\r\n\r\n  clickOK() {\r\n    this.grid.endCellEdit();\r\n    if (this.validator()) {\r\n      const object = { value: this.value, parameters: null };\r\n      this.submitModal.emit(object);\r\n    }\r\n  }\r\n\r\n  clickCancel() {\r\n    this.closeModal.emit();\r\n  }\r\n\r\n  validator() {\r\n    for (const item of this.value) {\r\n      if (!item.value) {\r\n        this.message.warning('åéå¼ä¸åè®¸ä¸ºç©ºï¼');\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n  beforeEdit = (param: RowEditParam) => {\r\n    const rowData = param.rowData as any;\r\n    const column = param.column;\r\n    if (column.field === 'valueText') {\r\n      if ((rowData as VariableSetting).tag === this.tags[0].value) {\r\n        param.column.editor = { type: EditorTypes.TEXTBOX, options: {} };\r\n      } else {\r\n        param.column.editor = {\r\n          type: 'input-group',\r\n          options: {\r\n            groupText: '<i class=\"f-icon f-icon-lookup\"></i>',\r\n            editable: false,\r\n            showClear: false,\r\n            clickHandle: (e) => {\r\n              e.formControl.setValue(e.instance.value ? e.instance.value : '');\r\n              this.valueEdit(e);\r\n            },\r\n            clear: (e) => {\r\n              console.log('clear', e);\r\n            }\r\n          }\r\n        };\r\n      }\r\n    }\r\n    return of(true);\r\n  }\r\n\r\n  endEdit(data: any) {\r\n    if (data.column.field === 'valueText' && data.rowData.tag === this.tags[0].value) {\r\n      data.rowData.value = data.rowData.valueText;\r\n    }\r\n  }\r\n\r\n  valueEdit(e: any) {\r\n    const rowdata: VariableSetting = e.rowData;\r\n    switch (rowdata.tag) {\r\n      case this.tags[1].value:\r\n        this.editExpression(e);\r\n        break;\r\n      case this.tags[2].value:\r\n        this.editComponent(e);\r\n        break;\r\n    }\r\n  }\r\n\r\n  private editExpression(e: any) {\r\n    const data: VariableSetting = e.rowData;\r\n    if (this.uistate.schemas.length > 0) {\r\n      for (const schema of this.uistate.schemas) {\r\n        this.expr.addSchema('Schema', schema);\r\n      }\r\n      if (this.uistate.schemas[0].entityTypes && this.uistate.schemas[0].entityTypes.length > 0) {\r\n        const entityType = this.uistate.schemas[0].entityTypes[0];\r\n        this.expr.addInjectedEntity(entityType.name, 'Schema',\r\n          entityType.name, InjectedType.EntityType);\r\n      }\r\n    }\r\n    const context = new Array();\r\n    if (this.uistate.procInstContext.length > 0) {\r\n      for (const variable of this.uistate.procInstContext) {\r\n        context.push(variable);\r\n      }\r\n    }\r\n    if (this.uistate.formalParameterContext.length > 0) {\r\n      for (const variable of this.uistate.formalParameterContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (this.uistate.participantContext.length > 0) {\r\n      for (const variable of this.uistate.participantContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (this.uistate.processVariableContext.length > 0) {\r\n      for (const variable of this.uistate.processVariableContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (context.length > 0) {\r\n      for (const v of context) {\r\n        this.expr.addContext(v);\r\n      }\r\n    }\r\n    this.expr.setEditPattern(ExprEditMode.Advanced); // è¡¨è¾¾å¼å±ç°æ¨¡å¼ï¼é»è®¤é«çº§ç\r\n    this.expr.addExpressionText(data.value);\r\n    this.expr.buildExpression().then((re: string) => {\r\n      e.formControl.setValue(re);\r\n      e.instance.cd.detectChanges();\r\n      data.value = re;\r\n    });\r\n  }\r\n\r\n  private editComponent(e: any) {\r\n    const data: VariableSetting = e.rowData;\r\n    let dialog: any;\r\n    const compFactory = this.resolver.resolveComponentFactory(ComponentEditComponent);\r\n    const compRef = compFactory.create(this.injector);\r\n    compRef.instance.component = data.component;\r\n    compRef.instance.submitEmitter.subscribe((re: any) => {\r\n      e.formControl.setValue(re.Name + '-' + re.MethodCode);\r\n      e.instance.cd.detectChanges();\r\n      data.value = re.Id;\r\n      data.component = re;\r\n      dialog.close();\r\n    });\r\n    compRef.instance.closeEmitter.subscribe(re => {\r\n      dialog.close();\r\n    });\r\n    const modalConfig = {\r\n      title: 'æä»¶',\r\n      width: 800,\r\n      height: 515,\r\n      showButtons: true,\r\n      buttons: compRef.instance.footer\r\n    };\r\n    dialog = this.modalService.show(compRef, modalConfig);\r\n  }\r\n}\r\n\r\nexport class VariableSettingConverter implements TypeConverter {\r\n  constructor() { }\r\n\r\n  convertTo(data: any[]): string {\r\n    if (data && data.length > 0) {\r\n      return 'ï¼å·²è®¾ç½®ï¼';\r\n    } else {\r\n      return 'ï¼æªè®¾ç½®ï¼';\r\n    }\r\n  }\r\n}\r\n","import { ApprovalPivot } from './approval-pivot';\r\n\r\nexport class ApprovalPivotConfig {\r\n    constructor() {\r\n        this.enable = false;\r\n        this.title = 'å®¡æ¹è¦ç¹';\r\n        this.approvalPivots = new Array();\r\n    }\r\n    title: string;\r\n    enable: boolean;\r\n    approvalPivots: Array<ApprovalPivot>;\r\n}\r\n","import { ProcessDeUtil } from '../../domain/process-de-util';\r\n\r\nexport class ApprovalPivot {\r\n    constructor() {\r\n        this.id = ProcessDeUtil.GenerateElementId();\r\n        this.type = 'REMIND';\r\n    }\r\n    id: string;\r\n    type: string;\r\n    condition: string;\r\n    title: string;\r\n    description: string;\r\n}\r\n","import { Component, OnInit, ViewChild, TemplateRef, HostBinding, Output, EventEmitter, Input } from '@angular/core';\r\nimport { TypeConverter } from '@farris/ui-property-panel';\r\nimport { DatagridComponent } from '@farris/ui-datagrid';\r\nimport { ApprovalPivotConfig } from './approval-pivot-config';\r\nimport { EditorTypes } from '@farris/ui-datagrid-editors';\r\nimport { ProcessDesignerUIState } from '../../app/process-designer.uistate';\r\nimport { ExpressionService, InjectedType, ExprEditMode } from '@gsp-svc/expression';\r\nimport { ApprovalPivot } from './approval-pivot';\r\nimport { MessagerService } from '@farris/ui-messager';\r\n\r\n@Component({\r\n  selector: 'lib-approval-pivot',\r\n  templateUrl: './approval-pivot.component.html',\r\n  styleUrls: ['./approval-pivot.component.scss']\r\n})\r\nexport class ApprovalPivotComponent implements OnInit {\r\n  @HostBinding('class')\r\n  cls = 'farris-main-area flex-column';\r\n\r\n  @Output() closeModal = new EventEmitter<any>();\r\n  @Output() submitModal = new EventEmitter<any>();\r\n\r\n  @ViewChild('iconSelectFooter') modalFooter: TemplateRef<any>;\r\n  @ViewChild('grid') grid: DatagridComponent;\r\n\r\n  @Input()\r\n  set value(data: any) {\r\n    if (data) {\r\n      this.config.enable = data.enable;\r\n      this.config.title = data.title;\r\n      if (data.approvalPivots && data.approvalPivots.length > 0) {\r\n        for (const a of data.approvalPivots) {\r\n          const approvalPivot = new ApprovalPivot();\r\n          approvalPivot.type = a.type;\r\n          approvalPivot.title = a.title;\r\n          approvalPivot.description = a.description;\r\n          if (a.condition) {\r\n            if (typeof (a.condition) === 'string') {\r\n              approvalPivot.condition = a.condition;\r\n            } else {\r\n              approvalPivot.condition = a.condition._value;\r\n            }\r\n          }\r\n\r\n\r\n          this.config.approvalPivots = this.config.approvalPivots.concat([approvalPivot]);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  config = new ApprovalPivotConfig();\r\n\r\n  typeList = [\r\n    { value: 'REMIND', text: 'æå­æç¤º' }];\r\n\r\n  columns = [\r\n    {\r\n      field: 'type', width: 80, title: 'ç±»å',\r\n      formatter: {\r\n        type: 'enum',\r\n        options: { valueField: 'value', textField: 'text', data: this.typeList }\r\n      },\r\n      editor: {\r\n        type: EditorTypes.COMBOLIST,\r\n        options: { valueField: 'value', textField: 'text', data: this.typeList, idField: 'value', panelHeight: 'auto', enableClear: false }\r\n      },\r\n      validators: [\r\n        { type: 'required', messager: 'å¿å¡«' }\r\n      ]\r\n    },\r\n    {\r\n      field: 'condition', width: 120, title: 'æ¡ä»¶', showTips: true,\r\n      editor: {\r\n        type: 'input-group',\r\n        options: {\r\n          groupText: '<i class=\"f-icon f-icon-lookup\"></i>',\r\n          editable: false,\r\n          clickHandle: (e) => {\r\n            e.formControl.setValue(e.instance.value ? e.instance.value : '');\r\n            this.editConditon(e);\r\n          },\r\n          clear: (e) => {\r\n            console.log('clear', e);\r\n          }\r\n        }\r\n      }\r\n    },\r\n    {\r\n      field: 'title', width: 80, title: 'æ¾ç¤ºåç§°',\r\n      editor: { type: EditorTypes.TEXTBOX, options: {} }\r\n    }, {\r\n      field: 'description', width: 100, title: 'è¯¦ç»è¯´æ', showTips: true,\r\n      editor: { type: EditorTypes.TEXTBOX, options: {} }\r\n    }\r\n  ];\r\n\r\n  modalConfig = {\r\n    title: 'å®¡æ¹è¦ç¹',\r\n    width: 800,\r\n    height: 480,\r\n    showButtons: true\r\n  };\r\n\r\n\r\n  constructor(\r\n    private designerUIState: ProcessDesignerUIState,\r\n    private expr: ExpressionService,\r\n    private message: MessagerService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  add() {\r\n    const approvalPivot = new ApprovalPivot();\r\n    this.config.approvalPivots = this.config.approvalPivots.concat([approvalPivot]);\r\n  }\r\n\r\n  delete() {\r\n    const selectedRow = this.grid.selectedRow;\r\n    if (!selectedRow) {\r\n      this.message.info('å°æªéä¸­å®¡æ¹è¦ç¹ï¼');\r\n      return;\r\n    }\r\n    this.config.approvalPivots = this.config.approvalPivots.filter(a => a.id !== selectedRow.id);\r\n  }\r\n\r\n  clickOK() {\r\n    if (!this.config.title && this.config.enable) {\r\n      this.message.info('å°æªå¡«åæ¾ç¤ºæ é¢ï¼');\r\n      return;\r\n    }\r\n    this.grid.endCellEdit();\r\n    if (this.validator()) {\r\n      const object = { value: this.config, parameters: null };\r\n      this.submitModal.emit(object);\r\n    }\r\n  }\r\n\r\n  clickCancel() {\r\n    this.closeModal.emit();\r\n  }\r\n\r\n  private validator() {\r\n    return true;\r\n  }\r\n\r\n\r\n  editConditon(e: any) {\r\n    if (this.designerUIState.schemas.length > 0) {\r\n      for (const schema of this.designerUIState.schemas) {\r\n        this.expr.addSchema('Schema', schema);\r\n      }\r\n      if (this.designerUIState.schemas[0].entityTypes && this.designerUIState.schemas[0].entityTypes.length > 0) {\r\n        const entityType = this.designerUIState.schemas[0].entityTypes[0];\r\n        this.expr.addInjectedEntity(entityType.name, 'Schema',\r\n          entityType.name, InjectedType.EntityType);\r\n      }\r\n    }\r\n\r\n    const context = new Array();\r\n    if (this.designerUIState.procInstContext.length > 0) {\r\n      for (const variable of this.designerUIState.procInstContext) {\r\n        context.push(variable);\r\n      }\r\n    }\r\n    if (this.designerUIState.formalParameterContext.length > 0) {\r\n      for (const variable of this.designerUIState.formalParameterContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (this.designerUIState.participantContext.length > 0) {\r\n      for (const variable of this.designerUIState.participantContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (this.designerUIState.processVariableContext.length > 0) {\r\n      for (const variable of this.designerUIState.processVariableContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (this.designerUIState.activityComponentContext.length > 0) {\r\n      for (const variable of this.designerUIState.activityComponentContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n      }\r\n    }\r\n    if (context.length > 0) {\r\n      for (const v of context) {\r\n        this.expr.addContext(v);\r\n      }\r\n    }\r\n\r\n    this.expr.addExpressionText(e.instance.value);\r\n    this.expr.setEditPattern(ExprEditMode.Conditional);\r\n    this.expr.buildExpression().then((cond: string) => {\r\n      e.formControl.setValue(cond);\r\n      e.instance.cd.detectChanges();\r\n    });\r\n  }\r\n}\r\n\r\nexport class ApprovalPivotConverter implements TypeConverter {\r\n  constructor() { }\r\n\r\n  convertTo(data: any): string {\r\n    if (data && data.enable) {\r\n      return 'ï¼å·²è®¾ç½®ï¼';\r\n    } else {\r\n      return 'ï¼æªè®¾ç½®ï¼';\r\n    }\r\n  }\r\n}\r\n","export class UrgeHandleRule {\r\n  constructor() {\r\n    this.urgeHandleAble = false;\r\n    this.earlyTime = 0;\r\n    this.intervalTime = 0;\r\n    this.urgeMessageSubject = \"{\\\"expr\\\":\\\"'å¬åå®¡æ¹ï¼' + DefaultFunction.GetContextParameter(\\\\\\\"bizDefName\\\\\\\")\\\",\\\"sexpr\\\":\\\"\\\"}\";\r\n    this.urgeMessageContent = \"{\\\"expr\\\":\\\"'è¯·æ¨å°½å¿«å®¡æ¹' + DefaultFunction.GetContextParameter(\\\\\\\"procInstCreatorName\\\\\\\") + 'ç' + DefaultFunction.GetContextParameter(\\\\\\\"bizDefName\\\\\\\") + 'ã'\\\",\\\"sexpr\\\":\\\"\\\"}\";\r\n    this.addReminder = false;\r\n    this.subjectEditable = true;\r\n    this.contentEditable = true;\r\n  }\r\n\r\n  urgeHandleAble: boolean;\r\n  sendType: string;\r\n  earlyTime: number;\r\n  intervalTime: number;\r\n  urgeMessageSubject: string;\r\n  urgeMessageContent: string;\r\n  // æ¯å¦æ·»å å¬åäººä¿¡æ¯\r\n  addReminder: boolean;\r\n  subjectEditable: boolean;\r\n  contentEditable: boolean;\r\n}\r\n","import { Component, OnInit, Output, EventEmitter, ViewChild, TemplateRef, Input } from '@angular/core';\r\nimport { TypeConverter } from '@farris/ui-property-panel';\r\nimport { UrgeHandleRule } from './urge-handle-rule';\r\nimport { ProcessDesignerUIState } from '../../app/process-designer.uistate';\r\nimport {ExpressionService, InjectedType} from '@gsp-svc/expression';\r\nimport { MessagerService } from '@farris/ui-messager';\r\n\r\n@Component({\r\n  selector: 'lib-urge-handle-rule',\r\n  templateUrl: './urge-handle-rule.component.html',\r\n  styleUrls: ['./urge-handle-rule.component.scss']\r\n})\r\nexport class UrgeHandleRuleComponent implements OnInit {\r\n\r\n  groupIcon2 = '<i class=\"f-icon f-icon-lookup\"></i>';\r\n  @Output() closeModal = new EventEmitter<any>();\r\n  @Output() submitModal = new EventEmitter<any>();\r\n\r\n  @ViewChild('iconSelectFooter') modalFooter: TemplateRef<any>;\r\n\r\n  @Input()\r\n  set value(data: any) {\r\n    if (!data) {\r\n      this.urgeHandleRule.urgeHandleAble = true;\r\n      this.urgeHandleRule.sendType = 'cloudplus,inmail';\r\n    } else {\r\n      this.urgeHandleRule = data;\r\n    }\r\n  }\r\n\r\n  urgeHandleRule: UrgeHandleRule = new UrgeHandleRule();\r\n\r\n\r\n  typeGroup = this.designerUIState.messageChannels.map(m => ({ value: m.code, name: m.name }));\r\n\r\n  modalConfig = {\r\n    title: 'å¬å',\r\n    width: 500,\r\n    height: 445,\r\n    showButtons: true\r\n  };\r\n\r\n  constructor(\r\n    private designerUIState: ProcessDesignerUIState,\r\n    private expr: ExpressionService,\r\n    private message: MessagerService) {}\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  clickOK() {\r\n    if (this.validator()) {\r\n      const object = { value: this.urgeHandleRule, parameters: null };\r\n      this.submitModal.emit(object);\r\n    }\r\n  }\r\n\r\n  clickCancel() {\r\n    this.closeModal.emit();\r\n  }\r\n\r\n  private validator() {\r\n    if (!this.urgeHandleRule.urgeHandleAble) {\r\n      return true;\r\n    }\r\n    if (!this.urgeHandleRule.sendType) {\r\n      this.message.info('å°æªéæ©åéæ¹å¼ï¼');\r\n      return false;\r\n    }\r\n    if (!this.urgeHandleRule.urgeMessageSubject) {\r\n      this.message.info('å°æªéç½®æ¶æ¯ä¸»é¢ï¼');\r\n      return false;\r\n    }\r\n    if (!this.urgeHandleRule.urgeMessageContent) {\r\n      this.message.info('å°æªéæ©æ¶æ¯åå®¹ï¼');\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  parser = (val: string | number) => {\r\n    return Number(val);\r\n  }\r\n\r\n  titleExpr(data: any){\r\n    this.showTitleHelp(data);\r\n  }\r\n\r\n  contentExpr(data: any){\r\n    this.showContentHelp(data);\r\n  }\r\n\r\n  showTitleHelp(data: string) {\r\n    this.showExpr();\r\n    if (this.urgeHandleRule.urgeMessageSubject && this.urgeHandleRule.urgeMessageSubject.length > 0) {\r\n      this.expr.addExpressionText(this.urgeHandleRule.urgeMessageSubject);\r\n    } else {\r\n      this.expr.addExpressionText('');\r\n    }\r\n    this.expr.buildExpression().then((expressionInfo: string) => {\r\n      this.urgeHandleRule.urgeMessageSubject = expressionInfo;\r\n    });\r\n  }\r\n\r\n  showContentHelp(data: string){\r\n    this.showExpr();\r\n    if (this.urgeHandleRule.urgeMessageContent && this.urgeHandleRule.urgeMessageContent.length > 0) {\r\n      this.expr.addExpressionText(this.urgeHandleRule.urgeMessageContent);\r\n    } else {\r\n      this.expr.addExpressionText('');\r\n    }\r\n    this.expr.buildExpression().then((expressionInfo: string) => {\r\n      this.urgeHandleRule.urgeMessageContent = expressionInfo;\r\n    });\r\n  }\r\n\r\n  showExpr(){\r\n    if (this.designerUIState.schemas.length > 0) {\r\n      for (const schema of this.designerUIState.schemas) {\r\n        // this.expr.addCommonObject(co);\r\n        this.expr.addSchema('Schema', schema);\r\n      }\r\n      if (this.designerUIState.schemas[0].entityTypes && this.designerUIState.schemas[0].entityTypes.length > 0) {\r\n        const entityType = this.designerUIState.schemas[0].entityTypes[0];\r\n        this.expr.addInjectedEntity(entityType.name, 'Schema',\r\n          entityType.name, InjectedType.EntityType);\r\n      }\r\n    }\r\n    const context = new Array();\r\n    if (this.designerUIState.urgeContext.length > 0) {\r\n      for (const variable of this.designerUIState.urgeContext) {\r\n        context.push(variable);\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (this.designerUIState.processVariableContext.length > 0) {\r\n      for (const variable of this.designerUIState.processVariableContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (context.length > 0) {\r\n      for (const v of context) {\r\n        this.expr.addContext(v);\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport class UrgeHandleRuleConverter implements TypeConverter {\r\n  constructor() { }\r\n\r\n  convertTo(data: any): string {\r\n    if (!data) {\r\n      return 'ï¼å·²è®¾ç½®ï¼';\r\n    } else if (data.urgeHandleAble) {\r\n      return 'ï¼å·²è®¾ç½®ï¼';\r\n    } else {\r\n      return 'ï¼æªè®¾ç½®ï¼';\r\n    }\r\n  }\r\n}\r\n","import { Injectable, Injector, ComponentFactoryResolver } from '@angular/core';\r\nimport { ProcessDesignerUIState } from './process-designer.uistate';\r\nimport { ApprovalItemEntity } from '../views/approvel-items/entities/approval-item.entity';\r\nimport { PropertyEntity } from '@farris/ui-property-panel';\r\nimport { ElementPropertyConfig, KeyMap } from '@farris/ui-property-panel';\r\nimport { ResourceKeys } from '../model/resourceKeys';\r\nimport { AssignPerformerConfigComponent, AssignConfigConverter } from '../views/assign-performer-config/assign-performer-config.component';\r\nimport { SignRuleComponent, SignRuleConverter } from '../views/sign-rule/sign-rule.component';\r\nimport { ApprovelItemsComponent, ApprovelItemsConverter } from '../views/approvel-items/approvel-items.component';\r\nimport { ExpressionEditorComponent, ExpressionEditorConverter } from '../views/expressionEditor/expression-editor.component';\r\nimport { ExecuteFormsComponent, ExecuteFormsConverter } from '../views/execute-forms/execute-forms.component';\r\nimport { JumpScopeComponent, JumpScopeConverter } from '../views/jump-scope/jump-scope.component';\r\nimport { VarEntity } from '@gsp-svc/expression';\r\nimport { BackwardRuleComponent, BackwardRuleConverter } from '../views/backward-rule/backward-rule.component';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { BackWardRule } from '../views/backward-rule/backward-rule.entity';\r\nimport { ActivityComponentComponent, ActivityComponentConverter } from '../views/activity-component/activity-component.component';\r\nimport { PerformerComponent, PerformerConverter } from '../views/performer/performer.component';\r\nimport { TitleExpressionComponent, TitleExpressionConverter } from '../views/title-expression/title-expression.component';\r\nimport { BsModalService, ModalOptions } from '@farris/ui-modal';\r\nimport { OrganizationPotentialOwnerComponent, OrganizationPotentialOwnerConverter } from '../views/organization-potential-owner/organization-potential-owner.component';\r\nimport { CustomizeActionComponent, CustomizeActionConverter } from '../views/customize-action/customize-action.component';\r\nimport { TimeLimitControlComponent, TimeLimitControlConverter } from '../views/time-limit-control/time-limit-control.component';\r\nimport { AnonymousSetComponent, AnonymousSetConverter } from '../views/anonymous-set/anonymous-set.component';\r\nimport { VariableSettingComponent, VariableSettingConverter } from '../views/variable-setting/variable-setting.component';\r\nimport { MessageNoticeComponent, MessageNoticeConverter } from '../views/message-notice/message-notice.component';\r\nimport { ApprovalPivotComponent, ApprovalPivotConverter } from '../views/approval-pivot/approval-pivot.component';\r\nimport { UrgeHandleRuleComponent, UrgeHandleRuleConverter } from '../views/urge-handle-rule/urge-handle-rule.component';\r\nimport { ExtendPropertyComponent, ExtendPropertyConverter } from '../views/extend-property/extend-property.component';\r\n\r\n@Injectable()\r\n\r\nexport class WFFlowElementsViewModel {\r\n\r\n  constructor(\r\n    private uiState: ProcessDesignerUIState,\r\n    private message: MessagerService,\r\n    private injector: Injector,\r\n    private modalService: BsModalService,\r\n    private resolver: ComponentFactoryResolver\r\n  ) {\r\n\r\n  }\r\n\r\n  /**\r\n   * è®¾ç½®æµç¨åç´ å±æ§æ¡\r\n   * @param obj\r\n   */\r\n  setFlowElementProperty(obj: any) {\r\n    this.uiState.propertyData = obj.propertyData;\r\n    this.uiState.propertyConfig = this.setFlowEleConfig(obj.propertyConfig);\r\n  }\r\n\r\n  private setFlowEleConfig(obj: any[]): ElementPropertyConfig[] {\r\n    const propertyConfig: ElementPropertyConfig[] = [];\r\n    if (obj) {\r\n      obj.forEach((element: ElementPropertyConfig) => {\r\n        this.setFlowEleEntity(element.properties);\r\n        propertyConfig.push(element);\r\n      });\r\n    }\r\n    return propertyConfig;\r\n  }\r\n\r\n  private setFlowEleEntity(obj: PropertyEntity[]) {\r\n    if (obj && obj.length > 0) {\r\n      obj.forEach((item: PropertyEntity) => {\r\n        switch (item.propertyID) {\r\n          case ResourceKeys.ConditionExpression:                  // æ¡ä»¶è¡¨è¾¾å¼\r\n            item.editor = ExpressionEditorComponent;\r\n            item.converter = new ExpressionEditorConverter();\r\n            item.editorParams = {};\r\n            break;\r\n          case ResourceKeys.wf_ExecuteForms_PC:                         // å¼å§æ´»å¨çè¡¨åæä»¶\r\n            item.editor = ExecuteFormsComponent;\r\n            item.converter = new ExecuteFormsConverter();\r\n            item.editorParams = {\r\n              location: 'startActivity',\r\n              tab: 'web'\r\n            };\r\n            break;\r\n          case ResourceKeys.wf_ExecuteForms_Mobile:                         // å¼å§æ´»å¨çè¡¨åæä»¶\r\n            item.editor = ExecuteFormsComponent;\r\n            item.converter = new ExecuteFormsConverter();\r\n            item.editorParams = {\r\n              location: 'startActivity',\r\n              tab: 'mobile'\r\n            };\r\n            break;\r\n          case ResourceKeys.sendBackedTask:                         // å¼å§æ´»å¨çåéé©³åä»»å¡\r\n            item.iterator = this.uiState.boolIterator;\r\n            break;\r\n          case ResourceKeys.SelectTargetAble: // åè®¸è·³è½¬\r\n            item.iterator = this.uiState.boolIterator;\r\n            break;\r\n          case ResourceKeys.JumpScope: // è·³è½¬è§å\r\n            item.editor = JumpScopeComponent;\r\n            item.converter = new JumpScopeConverter();\r\n            break;\r\n          case ResourceKeys.Default:                              // é»è®¤åæ¯\r\n            item.iterator = this.uiState.boolIterator;\r\n            break;\r\n          default:\r\n            item.editor = ExtendPropertyComponent;\r\n            item.converter = new ExtendPropertyConverter();\r\n            break;\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * è®¾ç½®å®¡æ¹æ´»å¨èç¹çå±æ§æ¡\r\n   * @param obj\r\n   */\r\n  setUserActivityProperty(obj: any) {\r\n    if (obj.propertyData.ApprovalItems) {\r\n      this.buildApprovalItems(obj.propertyData.ApprovalItems);\r\n      this.buildCounterSignVariables(obj.propertyData.ApprovalItems);\r\n      this.buildSignRules(obj.propertyData.SignRule); // è®¾ç½®ä¼ç­¾è§åçç»è®ºåç§°\r\n    }\r\n    this.uiState.propertyData = obj.propertyData;\r\n    this.uiState.bizActivityId = obj.propertyData.BizActivityID;\r\n    this.uiState.propertyConfig = this.setUserActConfig(obj.propertyConfig);\r\n  }\r\n\r\n  private setUserActConfig(obj: any[]): ElementPropertyConfig[] {\r\n    const propertyConfig: ElementPropertyConfig[] = [];\r\n    if (obj) {\r\n      obj.forEach((element: ElementPropertyConfig) => {\r\n        this.setUserActEntity(element.properties);\r\n        propertyConfig.push(element);\r\n      });\r\n    }\r\n    return propertyConfig;\r\n  }\r\n\r\n  private setUserActEntity(obj: PropertyEntity[]) {\r\n    if (obj && obj.length > 0) {\r\n      obj.forEach((item: PropertyEntity) => {\r\n        switch (item.propertyID) {\r\n          case ResourceKeys.ParticipantSchemes: // åä¸è\r\n            item.editor = PerformerComponent;\r\n            item.converter = new PerformerConverter();\r\n            break;\r\n          case ResourceKeys.wf_ExecuteForms_PC: // è¡¨åå®ä¹\r\n            item.editor = ExecuteFormsComponent;\r\n            item.converter = new ExecuteFormsConverter();\r\n            item.editorParams = {\r\n              location: 'userActivity',\r\n              tab: 'web'\r\n            };\r\n            break;\r\n          case ResourceKeys.wf_ExecuteForms_Mobile: // è¡¨åå®ä¹\r\n            item.editor = ExecuteFormsComponent;\r\n            item.converter = new ExecuteFormsConverter();\r\n            item.editorParams = {\r\n              location: 'userActivity',\r\n              tab: 'mobile'\r\n            };\r\n            break;\r\n          case ResourceKeys.AssignStrategy: // åéç­ç¥\r\n            item.iterator = this.uiState.assignIterator;\r\n            break;\r\n          case ResourceKeys.OperatorConfig: // ææ´¾è§å\r\n            item.editor = AssignPerformerConfigComponent;\r\n            item.converter = new AssignConfigConverter();\r\n            break;\r\n          case ResourceKeys.CompleteStrategy: // å®æç­ç¥\r\n            if (this.uiState.propertyData.AssignStrategy === this.uiState.assignIterator[2].key) {\r\n              item.iterator = this.uiState.completeIterator4Claim; // åéç­ç¥ä¸ºé¢ç¨æ¶ï¼å®æç­ç¥åªè½æ¯æ¢å æ¨¡å¼\r\n            } else {\r\n              item.iterator = this.uiState.completeIterator;\r\n            }\r\n            break;\r\n          case ResourceKeys.SignRule: // ä¼ç­¾è§å\r\n            item.editor = SignRuleComponent;\r\n            item.converter = new SignRuleConverter();\r\n            item.editorParams = {\r\n              variables: this.uiState.counterSignVariables,\r\n              approvalItems: this.uiState.approvalItems\r\n            };\r\n            break;\r\n          case ResourceKeys.ApprovalItems: // å®¡æ¹é¡¹\r\n            item.editor = ApprovelItemsComponent;\r\n            item.converter = new ApprovelItemsConverter();\r\n            break;\r\n          case ResourceKeys.Retrievable: // åè®¸åå\r\n            item.iterator = this.uiState.boolIterator;\r\n            break;\r\n          case ResourceKeys.AddSignFrontAble: // åè®¸å¾è¯¢\r\n            item.editor = OrganizationPotentialOwnerComponent;\r\n            item.converter = new OrganizationPotentialOwnerConverter();\r\n            break;\r\n          case ResourceKeys.AddSignBehindAble: // åè®¸å ç­¾\r\n            item.editor = OrganizationPotentialOwnerComponent;\r\n            item.converter = new OrganizationPotentialOwnerConverter();\r\n            break;\r\n          case ResourceKeys.NotifyAble: // åè®¸ç¥ä¼\r\n            item.editor = OrganizationPotentialOwnerComponent;\r\n            item.converter = new OrganizationPotentialOwnerConverter();\r\n            break;\r\n          case ResourceKeys.transferScope: // ç§»äº¤èå´\r\n            item.editor = OrganizationPotentialOwnerComponent;\r\n            item.converter = new OrganizationPotentialOwnerConverter();\r\n            break;\r\n          case ResourceKeys.SelectBranch:  // åè®¸æå®åç»­åæ¯\r\n            item.iterator = this.uiState.boolIterator;\r\n            break;\r\n          case ResourceKeys.SelectTargetAble: // åè®¸è·³è½¬\r\n            if (this.uiState.propertyData.CompleteStrategy\r\n              && this.uiState.propertyData.CompleteStrategy !== this.uiState.completeIterator[0].key) {\r\n              item.iterator = this.uiState.noJump4Sign;\r\n            } else {\r\n              item.iterator = this.uiState.boolIterator;\r\n            }\r\n            break;\r\n          case ResourceKeys.JumpScope: // è·³è½¬è§å\r\n            item.editor = JumpScopeComponent;\r\n            item.converter = new JumpScopeConverter();\r\n            break;\r\n          case ResourceKeys.BackWardRule: // é©³åè§å\r\n            item.editor = BackwardRuleComponent;\r\n            item.converter = new BackwardRuleConverter();\r\n            item.editorParams = {\r\n              nodeType: 'UserActivity'\r\n            };\r\n            break;\r\n          case ResourceKeys.wf_TitleExpression:\r\n            item.editor = TitleExpressionComponent;\r\n            item.converter = new TitleExpressionConverter();\r\n            break;\r\n          case ResourceKeys.Tools: // æ´»å¨æä»¶\r\n            item.editor = ActivityComponentComponent;\r\n            item.converter = new ActivityComponentConverter();\r\n            item.editorParams = {\r\n              location: 'activity'\r\n            };\r\n            break;\r\n          case ResourceKeys.wf_CustomizeAction: // æ´»å¨æä»¶\r\n            item.editor = CustomizeActionComponent;\r\n            item.converter = new CustomizeActionConverter();\r\n            break;\r\n          case ResourceKeys.timeLimitControl: // è¶æ¶é¢è­¦\r\n            item.editor = TimeLimitControlComponent;\r\n            item.converter = new TimeLimitControlConverter();\r\n            item.editorParams = {\r\n              location: 'activity'\r\n            };\r\n            break;\r\n          case ResourceKeys.anonymousSet: // å¿åè®¾ç½®\r\n            item.editor = AnonymousSetComponent;\r\n            item.converter = new AnonymousSetConverter();\r\n            break;\r\n          case ResourceKeys.variableSettings: // åéè®¾ç½®\r\n            item.editor = VariableSettingComponent;\r\n            item.converter = new VariableSettingConverter();\r\n            break;\r\n          case ResourceKeys.messageNotice: // æ¶æ¯éç¥\r\n            item.editor = MessageNoticeComponent;\r\n            item.converter = new MessageNoticeConverter();\r\n            item.editorParams = {\r\n              location: 'activity'\r\n            };\r\n            break;\r\n          case ResourceKeys.approvalPivotConfig: // å®¡æ¹è¦ç¹\r\n            item.editor = ApprovalPivotComponent;\r\n            item.converter = new ApprovalPivotConverter();\r\n            break;\r\n          case ResourceKeys.DisplayTerminal: // æ¾ç¤ºç»ç«¯\r\n            item.iterator = this.uiState.displayTerminal;\r\n            break;\r\n          case ResourceKeys.urgeHandleRule: // æ¾ç¤ºç»ç«¯\r\n            item.editor = UrgeHandleRuleComponent;\r\n            item.converter = new UrgeHandleRuleConverter();\r\n            break;\r\n          default:\r\n            item.editor = ExtendPropertyComponent;\r\n            item.converter = new ExtendPropertyConverter();\r\n            break;\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * åå»ºä¼ç­¾è§ååé\r\n   */\r\n  buildCounterSignVariables(conclusions: any[]) {\r\n    this.uiState.counterSignVariables = [];\r\n    this.uiState.counterSignVariables = this.uiState.counterSignVariables.concat([{\r\n      key: 'nrOfInstances',\r\n      name: 'æ»ä»»å¡æ°',\r\n      description: 'æ»ä»»å¡æ°'\r\n    }, {\r\n      key: 'nrOfCompletedInstances',\r\n      name: 'å·²å®æä»»å¡æ°',\r\n      description: 'å·²å®æä»»å¡æ°'\r\n    }\r\n    ]);\r\n    if (conclusions && conclusions.length > 0) {\r\n      for (const conclusion of conclusions) {\r\n        const variable = new VarEntity();\r\n        variable.key = `nrOf${conclusion.Value}`;\r\n        variable.name = `${conclusion.Text}_ä»»å¡æ°`;\r\n        variable.description = `${conclusion.Text}_ä»»å¡æ°`;\r\n        this.uiState.counterSignVariables.push(variable);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * åå»ºèªå®ä¹é¡¹\r\n   * @param conclusions\r\n   */\r\n  buildApprovalItems(conclusions: any[]) {\r\n    this.uiState.approvalItems = [];\r\n    if (conclusions && conclusions.length > 0) {\r\n      for (const item of conclusions) {\r\n        const conclusion = new ApprovalItemEntity();\r\n        conclusion.value = item.Value;\r\n        conclusion.text = item.Text;\r\n        conclusion.workFlowAction = item.WorkFlowAction;\r\n        conclusion.isDefault = item.IsDefault;\r\n        this.uiState.approvalItems.push(conclusion);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ä¼ç­¾è§åç»å®å®¡æ¹é¡¹åç§°\r\n   * @param signRules ä¼ç­¾è§å\r\n   */\r\n  private buildSignRules(signRules: any[]) {\r\n    if (signRules && signRules.length > 0) {\r\n      for (const signRule of signRules) {\r\n        const approvalItem: ApprovalItemEntity = this.uiState.approvalItems.find(item => item.value === signRule.ConclusionValue);\r\n        // if (!approvalItem) {\r\n        //     this.message.info('å®¡æ¹é¡¹åçæ¹åï¼è¯·è°æ´ä¼ç­¾è§åï¼');\r\n        // }\r\n        if (approvalItem) {\r\n          signRule.ConclusionName = approvalItem.text;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n","import { Component, OnInit, Input, Output, EventEmitter, ViewChild, TemplateRef } from '@angular/core';\r\nimport { TreeTableComponent } from '@farris/ui-treetable';\r\nimport { of } from 'rxjs';\r\nimport { LookupGridComponent } from '@farris/ui-lookup';\r\n\r\n@Component({\r\n  selector: 'app-save-as-edit',\r\n  templateUrl: './save-as-edit.component.html',\r\n  styleUrls: ['./save-as-edit.component.scss']\r\n})\r\nexport class SaveAsEditComponent implements OnInit {\r\n\r\n  @ViewChild('buttonRef') btnRef: TemplateRef<any>;\r\n\r\n  @Input()\r\n  procName: string;\r\n  @Input()\r\n  procKey: string;\r\n\r\n  @ViewChild('lookup') public lookUp: LookupGridComponent;\r\n\r\n  @Output() submit = new EventEmitter<any>();\r\n  @Output() cancel = new EventEmitter<any>();\r\n\r\n  accessLevel = 'public';\r\n  organization;\r\n  organizationName;\r\n\r\n  isAdministratorConfig = false;\r\n\r\n  private _organizations: any[];\r\n  set organizations(data: any[]) {\r\n    this._organizations = data;\r\n    if (this._organizations && this._organizations.length > 0) {\r\n      this.items = this.makeTreeByParent(this._organizations, 'parentId', 'id');\r\n    } else {\r\n      this.items = new Array();\r\n    }\r\n  }\r\n  get organizations() {\r\n    return this._organizations;\r\n  }\r\n  items = new Array();\r\n\r\n  accessLevelCollection = [\r\n    { value: 'public', text: 'å¬æ'},\r\n    { value: 'private', text: 'ç§æ' }\r\n  ];\r\n\r\n  columns = [\r\n    { title: 'ç¼å·', field: 'code', width: '100', searchField: 'code' },\r\n    { title: 'åç§°', field: 'name', width: '100', searchField: 'name' },\r\n  ];\r\n\r\n\r\n  constructor() {}\r\n\r\n  ngOnInit() {\r\n  }\r\n  saveAsOK() {\r\n    if (this.validator()) {\r\n      this.submit.next({\r\n        procName: this.procName,\r\n        accessLevel: this.accessLevel,\r\n        organization: this.organization,\r\n        organizationName: this.organizationName\r\n      });\r\n    }\r\n  }\r\n  saveAsCancel() {\r\n    this.cancel.emit();\r\n  }\r\n\r\n  validator() {\r\n    return true;\r\n  }\r\n\r\n  search(data: any) {\r\n    const tt = this.lookUp.componentRef.instance as TreeTableComponent;\r\n    tt.searchHandle.search(data.field, data.value, 'client');\r\n    // if (data.field === '*') {\r\n    //   this.organizations = this.organizations.filter(o => o.code.indexOf(data.value) > -1 || o.name.indexOf(data.value) > -1);\r\n    // } else {\r\n    //   this.organizations = this.organizations.filter(o => o[data.field].indexOf(data.value) > -1);\r\n    // }\r\n  }\r\n\r\n  dictPicked = (data: any) => {\r\n    this.organizationName = data.name;\r\n    this.organization = data.id;\r\n    return of(true);\r\n  }\r\n\r\n  /** æç§parentç æé æ  */\r\n  private makeTreeByParent(datas: any[], parentField: string, keyField: string): any[] {\r\n    // ä¸ç´ç²ç©ºï¼æèæ²æä¸ç´ç\r\n    const pathLayerOnes = datas.filter(x => {\r\n      if (!x[parentField]) {\r\n        return true;\r\n      }\r\n      const p = datas.find(parent => parent[keyField] === x[parentField]);\r\n      if (!p) {\r\n        return true;\r\n      }\r\n    });\r\n    const treedata = [];\r\n    pathLayerOnes.forEach(x => {\r\n      const entity: any = {};\r\n      entity.data = x;\r\n      entity.children = [];\r\n      treedata.push(entity);\r\n      // this.root = x['id'];\r\n    });\r\n    treedata.forEach(item => {\r\n      this.findChildrenByParent(item, datas, parentField, keyField);\r\n    }\r\n    );\r\n    return treedata;\r\n  }\r\n\r\n  /** æ¾å°å­èç¹ */\r\n  private findChildrenByParent(parent: any, datas: any[], parentField: string, keyField: string) {\r\n    const childList = datas.filter(childitem => {\r\n      if (childitem[parentField] === parent.data[keyField]) {\r\n        return true;\r\n      }\r\n    });\r\n    if (childList && childList.length > 0) {\r\n      childList.forEach(child => {\r\n        const childEntity: any = {};\r\n        childEntity.data = child;\r\n        childEntity.children = [];\r\n        parent.children.push(childEntity);\r\n        this.findChildrenByParent(childEntity, datas, parentField, keyField);\r\n      });\r\n    }\r\n  }\r\n}\r\n","export enum BillSourceType {\r\n    InheritParent = 'SameWithParent',\r\n    VariablesExpression = 'VariablesExpression',\r\n    AutoCreation = 'AutoGenerateDownBill',\r\n}","export enum SubProcessType {\r\n    Dynamic = \"Dynamic\",\r\n    Specified = \"Specified\",\r\n}","import { BillSourceType } from \"./BillSourceType\";\r\nimport { SubProcessType } from \"./SubProcessType\";\r\n\r\nexport class CallActivitySubProcess {\r\n    calledBizDefKey: string;\r\n    calledBizDefName: string;\r\n    calledElement: string;\r\n    calledElementName: string;\r\n    bizDataId: string;\r\n    inheritVariables: boolean;\r\n    inheritBizDataId: boolean;\r\n    useAutoCreationData: boolean;\r\n    aifProcessCode: string;\r\n    aifProcessName: string;\r\n    subProcessType: SubProcessType = SubProcessType.Specified;\r\n    billSourceType: BillSourceType = BillSourceType.InheritParent;\r\n}\r\n","export class BifMonitorConstant {\r\n    static readonly bifMonitorAppId: string = \"BillIntegrationFrameworkRT\";\r\n    static readonly bifManagerAppEntrance: string = \"bif-manager\";\r\n    \r\n    static readonly bifDiagnostorFuncId: string = \"BifDiagnostor\";\r\n    static readonly bifManagerFuncId: string = \"BifManager\";\r\n}\r\n\r\n","export enum BifMetadataType {\r\n    BifCreationProcess = \"BifCreationProcess\",\r\n    BifWritebackProcess = \"BifWritebackProcess\",\r\n}","import { JsonConvertableImpl, BpmnModelJsonHelper } from '@edp-bif/common-api';\r\nimport { BifMetadataType } from './BifMetadataType';\r\nimport { IShowEntity } from './IShowEntity';\r\n\r\nexport abstract class AbstractShowEntity extends JsonConvertableImpl implements IShowEntity {\r\n    id: string;\r\n    code: string;\r\n    name: string;\r\n    upBillVoName: string;\r\n    downBillVoName: string;\r\n    bifMetadataType: BifMetadataType;\r\n    lastModifiedTime: Date;\r\n    parentId: string;\r\n    sysInit: boolean = false;\r\n    originId: string;\r\n    rootId: string;\r\n\r\n    protected ResetBeforeLoadFrom(): void {\r\n        super.ResetBeforeLoadFrom();\r\n\r\n        this.id = null;\r\n        this.code = null;\r\n        this.name = null;\r\n        this.upBillVoName = null;\r\n        this.downBillVoName = null;\r\n        this.parentId = null;\r\n        this.bifMetadataType = null;\r\n        this.lastModifiedTime = null;\r\n        this.sysInit = false;\r\n        this.originId = null;\r\n        this.rootId = null;\r\n    }\r\n\r\n    public ConvertToJsonObject(): {} {\r\n        let obj = super.ConvertToJsonObject();\r\n\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"id\", this.id);\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"code\", this.code);\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"name\", this.name);\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"upBillVoName\", this.upBillVoName);\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"downBillVoName\", this.downBillVoName);\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"parentId\", this.parentId);\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"bifMetadataType\", this.bifMetadataType);\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"lastModifiedTime\", this.lastModifiedTime);\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"sysInit\", this.sysInit);\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"originId\", this.originId);\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"rootId\", this.rootId);\r\n\r\n        return obj;\r\n    }\r\n\r\n    public LoadFromJsonObject(obj: {}): void {\r\n        super.LoadFromJsonObject(obj);\r\n\r\n        this.id = BpmnModelJsonHelper.GetAttributeValueAsString(obj, \"id\");\r\n        this.code = BpmnModelJsonHelper.GetAttributeValueAsString(obj, \"code\");\r\n        this.name = BpmnModelJsonHelper.GetAttributeValueAsString(obj, \"name\");\r\n        this.upBillVoName = BpmnModelJsonHelper.GetAttributeValueAsString(obj, \"upBillVoName\");\r\n        this.downBillVoName = BpmnModelJsonHelper.GetAttributeValueAsString(obj, \"downBillVoName\");\r\n        this.parentId = BpmnModelJsonHelper.GetAttributeValueAsString(obj, \"parentId\");\r\n        this.bifMetadataType = BifMetadataType[BpmnModelJsonHelper.GetAttributeValueAsString(obj, \"bifMetadataType\")];\r\n        this.lastModifiedTime = BpmnModelJsonHelper.GetAttributeValueAsDateTime(obj, \"lastModifiedTime\");\r\n        this.sysInit = BpmnModelJsonHelper.GetAttributeValueAsBoolean(obj, \"sysInit\");\r\n        this.originId = BpmnModelJsonHelper.GetAttributeValueAsString(obj, \"originId\");\r\n        this.rootId = BpmnModelJsonHelper.GetAttributeValueAsString(obj, \"rootId\");\r\n    }\r\n}","import { BpmnModelJsonHelper } from '@edp-bif/common-api';\r\nimport { IRtShowEntity } from './IRtShowEntity';\r\nimport { AbstractShowEntity } from './AbstractShowEntity';\r\n\r\nexport class RtShowEntity extends AbstractShowEntity implements IRtShowEntity {\r\n    isEnabled: boolean;\r\n\r\n    protected ResetBeforeLoadFrom(): void {\r\n        super.ResetBeforeLoadFrom();\r\n\r\n        this.isEnabled = false;\r\n    }\r\n\r\n    public ConvertToJsonObject(): {} {\r\n        let obj = super.ConvertToJsonObject();\r\n\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"isEnabled\", this.isEnabled);\r\n\r\n        return obj;\r\n    }\r\n\r\n    public LoadFromJsonObject(obj: {}): void {\r\n        super.LoadFromJsonObject(obj);\r\n\r\n        this.isEnabled = BpmnModelJsonHelper.GetAttributeValueAsBoolean(obj, \"isEnabled\");\r\n    }\r\n}","import { BpmnModelJsonHelper } from '@edp-bif/common-api';\r\nimport { RtShowEntity } from './RtShowEntity';\r\n\r\nexport class RtShowEntitiesWithCustomization extends RtShowEntity {\r\n    isEnabled: boolean;\r\n    customizationEntities: Array<RtShowEntitiesWithCustomization> = new Array();\r\n\r\n    protected ResetBeforeLoadFrom(): void {\r\n        super.ResetBeforeLoadFrom();\r\n\r\n        this.isEnabled = false;\r\n        this.customizationEntities.length = 0;\r\n    }\r\n\r\n    public ConvertToJsonObject(): {} {\r\n        let obj = super.ConvertToJsonObject();\r\n\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"isEnabled\", this.isEnabled);\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"customizationEntities\", this.customizationEntities);\r\n\r\n        return obj;\r\n    }\r\n\r\n    public LoadFromJsonObject(obj: {}): void {\r\n        super.LoadFromJsonObject(obj);\r\n\r\n        this.isEnabled = BpmnModelJsonHelper.GetAttributeValueAsBoolean(obj, \"isEnabled\");\r\n        this.customizationEntities = BpmnModelJsonHelper.GetAttributeValueAsList(obj, \"customizationEntities\", RtShowEntitiesWithCustomization);\r\n    }\r\n\r\n    protected getTClass() {\r\n        return RtShowEntitiesWithCustomization;\r\n    }\r\n}","import { JsonConvertableImpl, BpmnModelJsonHelper } from '@edp-bif/common-api';\r\nimport { RtShowEntitiesWithCustomization } from './RtShowEntitiesWithCustomization';\r\n\r\nexport class RtBillProcessListResult extends JsonConvertableImpl {\r\n    totalCount: number;\r\n    pageCount: number;\r\n    pageIndex: number;\r\n    pageSize: number;\r\n\r\n    entities: Array<RtShowEntitiesWithCustomization> = new Array();\r\n\r\n    protected ResetBeforeLoadFrom(): void {\r\n        super.ResetBeforeLoadFrom();\r\n\r\n        this.totalCount = 0;\r\n        this.pageCount = 0;\r\n        this.pageIndex = 0;\r\n        this.pageSize = 0;\r\n        this.entities.length = 0;\r\n    }\r\n\r\n    public ConvertToJsonObject(): {} {\r\n        let obj = super.ConvertToJsonObject();\r\n\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"totalCount\", this.totalCount);\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"pageCount\", this.pageCount);\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"pageIndex\", this.pageIndex);\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"pageSize\", this.pageSize);\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"entities\", this.entities);\r\n\r\n        return obj;\r\n    }\r\n\r\n    public LoadFromJsonObject(obj: {}): void {\r\n        super.LoadFromJsonObject(obj);\r\n\r\n        this.totalCount = BpmnModelJsonHelper.GetAttributeValueAsNumber(obj, \"totalCount\");\r\n        this.pageCount = BpmnModelJsonHelper.GetAttributeValueAsNumber(obj, \"pageCount\");\r\n        this.pageIndex = BpmnModelJsonHelper.GetAttributeValueAsNumber(obj, \"pageIndex\");\r\n        this.pageSize = BpmnModelJsonHelper.GetAttributeValueAsNumber(obj, \"pageSize\");\r\n        this.entities = BpmnModelJsonHelper.GetAttributeValueAsList(obj, \"entities\", RtShowEntitiesWithCustomization);\r\n    }\r\n}","import { Injectable } from '@angular/core';\r\nimport { HttpService } from '@ecp-caf/caf-common';\r\nimport { Observable } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\nimport { AppOptions, FrameworkService, AppService } from '@gsp-sys/rtf-common';\r\nimport { IRtShowEntity } from '../entity/IRtShowEntity';\r\nimport { BifMonitorConstant } from '../entity/BifMonitorConstant';\r\nimport { ProcessFilterConditionArgs } from '../entity/ProcessFilterConditionArgs';\r\nimport { RtBillProcessListResult } from '../entity/RtBillProcessListResult';\r\nimport { RtShowEntity } from '../entity/RtShowEntity';\r\n\r\n@Injectable()\r\nexport class ProcessListHelpService {\r\n    private readonly baseUrl = \"/api/runtime/aif/v1.0/rtbillprocess\";\r\n\r\n    constructor(\r\n        private appService: AppService,\r\n        private frameworkService: FrameworkService,\r\n        private httpService: HttpService,\r\n    ) {\r\n    }\r\n\r\n    public openBifManagerApp(entity: IRtShowEntity) {\r\n        const map = new Map();\r\n        map.set(\"id\", entity.id);\r\n        map.set(\"type\", entity.bifMetadataType);\r\n        map.set(\"srcFuncId\", BifMonitorConstant.bifDiagnostorFuncId);\r\n        const opt: AppOptions = {\r\n            funcId: BifMonitorConstant.bifManagerFuncId,\r\n            appId: BifMonitorConstant.bifMonitorAppId,\r\n            appEntrance: BifMonitorConstant.bifManagerAppEntrance,\r\n            appType: \"menu\",\r\n            entityParams: {},\r\n            queryStringParams: map,\r\n            tabId: entity.id,\r\n            tabName: entity.name\r\n        };\r\n        this.frameworkService.openMenu(opt);\r\n    }\r\n\r\n    public getDatagridData(args: ProcessFilterConditionArgs): Observable<RtBillProcessListResult> {\r\n        const body = args.ConvertToJson();\r\n        let data$: Observable<any> = null;\r\n        //æä¸å¡ç§ç±»åæ°æ¶ä¸åé¡µ\r\n        if (args.bizType != null) {\r\n            data$ = this.httpService.post(`${this.baseUrl}/getpatch`, body);\r\n            return data$.pipe(\r\n                map(\r\n                    (res: any) => {\r\n                        const listRes = new RtBillProcessListResult();\r\n                        listRes.entities = res.map(elt => {\r\n                            const e = new RtShowEntity();\r\n                            e.LoadFromJsonObject(elt);\r\n                            return e;\r\n                        });\r\n                        return listRes;\r\n                    }\r\n                )\r\n            );\r\n        } else {\r\n            data$ = this.httpService.post(`${this.baseUrl}/getpagedpatch`, body);\r\n            return data$.pipe(\r\n                map(\r\n                    (res: any) => {\r\n                        const listRes = new RtBillProcessListResult();\r\n                        listRes.LoadFromJsonObject(res);\r\n                        return listRes;\r\n                    }\r\n                )\r\n            );\r\n        }\r\n    }\r\n}","import { BpmnModelJsonHelper, JsonConvertableImpl, TextValue } from '@edp-bif/common-api';\r\n\r\nexport class ProcessFilterConditionArgs extends JsonConvertableImpl {\r\n    name: TextValue;\r\n    upBillVoId: TextValue;\r\n    downBillVoId: TextValue;\r\n    isEnabled: TextValue;\r\n    billProcessType: TextValue;\r\n    sysInit: TextValue;\r\n    bizType: TextValue;\r\n    orderByCode: TextValue;\r\n    orderByName: TextValue;\r\n    OrderByLastModifiedTime: TextValue;\r\n    pageSize: number;\r\n    pageIndex: number;\r\n\r\n    protected ResetBeforeLoadFrom(): void {\r\n        super.ResetBeforeLoadFrom();\r\n\r\n        this.name = null;\r\n        this.upBillVoId = null;\r\n        this.downBillVoId = null;\r\n        this.isEnabled = null;\r\n        this.billProcessType = null;\r\n        this.sysInit = null;\r\n        this.bizType = null;\r\n        this.orderByCode = null;\r\n        this.orderByName = null;\r\n        this.OrderByLastModifiedTime = null;\r\n        this.pageSize = 0;\r\n        this.pageIndex = 0;\r\n    }\r\n\r\n    public ConvertToJsonObject(): {} {\r\n        let obj = super.ConvertToJsonObject();\r\n\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"name\", this.name);\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"upBillVoId\", this.upBillVoId);\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"downBillVoId\", this.downBillVoId);\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"isEnabled\", this.isEnabled);\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"billProcessType\", this.billProcessType);\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"sysInit\", this.sysInit);\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"bizType\", this.bizType);\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"orderByCode\", this.orderByCode);\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"orderByName\", this.orderByName);\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"OrderByLastModifiedTime\", this.OrderByLastModifiedTime);\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"pageSize\", this.pageSize);\r\n        BpmnModelJsonHelper.SetAttributeValue(obj, \"pageIndex\", this.pageIndex);\r\n\r\n        return obj;\r\n    }\r\n\r\n    public LoadFromJsonObject(obj: {}): void {\r\n        super.LoadFromJsonObject(obj);\r\n\r\n        this.name = BpmnModelJsonHelper.GetAttributeValueAsJsonSerializable(obj, \"name\", TextValue);\r\n        this.upBillVoId = BpmnModelJsonHelper.GetAttributeValueAsJsonSerializable(obj, \"upBillVoId\", TextValue);\r\n        this.downBillVoId = BpmnModelJsonHelper.GetAttributeValueAsJsonSerializable(obj, \"downBillVoId\", TextValue);\r\n        this.isEnabled = BpmnModelJsonHelper.GetAttributeValueAsJsonSerializable(obj, \"isEnabled\", TextValue);\r\n        this.billProcessType = BpmnModelJsonHelper.GetAttributeValueAsJsonSerializable(obj, \"billProcessType\", TextValue);\r\n        this.sysInit = BpmnModelJsonHelper.GetAttributeValueAsJsonSerializable(obj, \"sysInit\", TextValue);\r\n        this.bizType = BpmnModelJsonHelper.GetAttributeValueAsJsonSerializable(obj, \"bizType\", TextValue);\r\n        this.orderByCode = BpmnModelJsonHelper.GetAttributeValueAsJsonSerializable(obj, \"orderByCode\", TextValue);\r\n        this.orderByName = BpmnModelJsonHelper.GetAttributeValueAsJsonSerializable(obj, \"orderByName\", TextValue);\r\n        this.OrderByLastModifiedTime = BpmnModelJsonHelper.GetAttributeValueAsJsonSerializable(obj, \"OrderByLastModifiedTime\", TextValue);\r\n        this.pageSize = BpmnModelJsonHelper.GetAttributeValueAsNumber(obj, \"pageSize\");\r\n        this.pageIndex = BpmnModelJsonHelper.GetAttributeValueAsNumber(obj, \"pageIndex\");\r\n    }\r\n}\r\n","export enum OrderByDirection {\r\n    Asc = \"Asc\",\r\n    Desc = \"Desc\",\r\n}","import { Pipe, PipeTransform, Inject, LOCALE_ID, InjectionToken } from '@angular/core';\r\n\r\nexport const BIF_LANG_RESOURCES = new InjectionToken(\"BIF_LANG_RESOURCES\");\r\n\r\n@Pipe({ name: 'aifLocale' })\r\nexport class AifLocalePipe implements PipeTransform {\r\n    private readonly defaultLang: string = \"zh-CHS\";\r\n    private langCode: string;\r\n    private lang: {};\r\n    private resources;\r\n    constructor(\r\n        @Inject(LOCALE_ID) localeId: string,\r\n        @Inject(BIF_LANG_RESOURCES) resources: any,\r\n    ) {\r\n        this.langCode = localeId || this.defaultLang;\r\n        this.resources = resources || {};\r\n        this.lang = resources[this.langCode] || resources[this.defaultLang] || {};\r\n    }\r\n    transform(name: string): any {\r\n        return this.lang[name] || name;\r\n    }\r\n\r\n    instant(name: string): any {\r\n        return this.transform(name);\r\n    }\r\n}\r\n\r\n","import { Component, OnInit, ViewChild, TemplateRef, EventEmitter, Inject, LOCALE_ID, Output, Input } from '@angular/core';\r\nimport { FarrisSectionComponent } from '@farris/ui-section';\r\nimport { ProcessListHelpService } from '../../services/process-list-help.service';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { NotifyService } from '@farris/ui-notify';\r\nimport { BsModalService, BsModalRef } from '@farris/ui-modal';\r\nimport { FrameworkService } from '@gsp-sys/rtf-common';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\nimport { LoadingService } from '@farris/ui-loading';\r\nimport { Observable, of } from 'rxjs';\r\nimport { switchMap, catchError } from 'rxjs/operators';\r\nimport { IRtProcQueryParam } from '../../entity/IProcQueryParam';\r\nimport { BifMetadataType } from '../../entity/BifMetadataType';\r\nimport { ProcessFilterConditionArgs } from '../../entity/ProcessFilterConditionArgs';\r\nimport { TextValue } from '@edp-bif/common-api';\r\nimport { OrderByDirection } from '../../entity/OrderByDirection';\r\nimport { DatagridComponent } from '@farris/ui-datagrid';\r\nimport { RtBillProcessListResult } from '../../entity/RtBillProcessListResult';\r\nimport { AifLocalePipe } from '../../../aif-ui-common/pipe/aif-ui-common-locale.pipe';\r\n\r\n@Component({\r\n  selector: 'app-process-list-help',\r\n  templateUrl: './process-list-help.component.html',\r\n  styleUrls: ['./process-list-help.component.css']\r\n})\r\nexport class ProcessListHelpComponent implements OnInit {\r\n  @Output() closeModal = new EventEmitter<any>();\r\n  @Output() submitModal = new EventEmitter<any>();\r\n\r\n  @Input()\r\n  set value(data: any) {\r\n    if (data) {\r\n      this.processCode = data;\r\n    }\r\n  }\r\n\r\n  @Input() editorParams: {\r\n    bizTypeId?: string\r\n  } = {};\r\n\r\n  private processCode: string;\r\n  modalConfig = {\r\n    title: 'çåæµç¨éæ©',\r\n    width: 1250,\r\n    height: 500,\r\n    showButtons: true\r\n  };\r\n\r\n  procEmitter = new EventEmitter<any>();\r\n  queryParam: IRtProcQueryParam;\r\n\r\n  @ViewChild(\"tt\")\r\n  tt: DatagridComponent;\r\n  ttIdField: string = \"id\";\r\n  ttData: any[] = [];\r\n  ttColumns: any[] = [];\r\n  cascadeCheck = false;\r\n  cascadeDown = false;\r\n  cascadeUp = false;\r\n\r\n  @ViewChild('nameCellTemp')\r\n  nameCellTemp: TemplateRef<any>;\r\n\r\n  @ViewChild('iconSelectFooter')\r\n  modalFooter: TemplateRef<any>;\r\n\r\n  modalRef: BsModalRef;\r\n\r\n  readonly defaultPageSize: number = 30;\r\n  pageList = [this.defaultPageSize, 50, 100, 200, 500];\r\n\r\n  constructor(\r\n    private procHelpService: ProcessListHelpService,\r\n    private messager: MessagerService,\r\n    private notify: NotifyService,\r\n    private modalService: BsModalService,\r\n    private frameworkService: FrameworkService,\r\n    private router: Router,\r\n    private activatedRoute: ActivatedRoute,\r\n    private loading: LoadingService,\r\n    @Inject(LOCALE_ID) localeId: string,\r\n    private localePipe: AifLocalePipe,\r\n  ) {\r\n    this.queryParam = this.createDefaultQueryParam();\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.configTtColumns();\r\n    if (this.editorParams && this.editorParams.bizTypeId) {\r\n      this.queryParam.filterArgs.bizType = new TextValue();\r\n      this.queryParam.filterArgs.bizType.value = this.editorParams.bizTypeId;\r\n      this.queryParam.filterArgs.bizType.hasValue = true;\r\n    }\r\n    this.loadItems(this.queryParam.filterArgs).subscribe(() => {\r\n      setTimeout(() => {\r\n        if (this.ttData && this.ttData.length > 0) {\r\n          const proc = this.processCode != null ? this.ttData.find((it) => it.code == this.processCode) : this.ttData[0];\r\n          proc && this.tt.selectRow(proc.id);\r\n        }\r\n      }, 300);\r\n    });\r\n  }\r\n\r\n  clickOk(evt?) {\r\n    if (this.tt.selectedRow == null) {\r\n      this.notify.warning(this.localePipe.transform(\"pleaseSelectOneItemOnly\"));\r\n      return;\r\n    }\r\n    this.procEmitter.emit(this.tt.selectedRow.data);\r\n    const object = { value: this.tt.selectedRow.data.code, parameters: null };\r\n    this.submitModal.emit(object);\r\n    this.modalRef && this.modalRef.close();\r\n  }\r\n\r\n  clickCancel(evt?) {\r\n    this.procEmitter.complete();\r\n    this.closeModal.emit();\r\n    this.modalRef && this.modalRef.close();\r\n  }\r\n\r\n  onSearch(param: any) {\r\n    this.queryParam = param;\r\n    console.log(this.queryParam);\r\n    this.loadItems(this.queryParam.filterArgs).subscribe(\r\n      () => {\r\n        this.tt.clearCheckeds();\r\n        this.tt.clearSelections();\r\n      }\r\n    );\r\n  }\r\n\r\n  clickNameCell(ctx) {\r\n    this.procHelpService.openBifManagerApp(ctx.rowData);\r\n  }\r\n\r\n  /**\r\n * åæåºåäºä»¶\r\n */\r\n  beforeSortColumn = (field: string, order: string) => {\r\n    let cols: string[] = field.split(\",\");\r\n    let orders: string[] = order.split(\",\");\r\n\r\n    //éç½®æåºæ¡ä»¶\r\n    this.queryParam.filterArgs.orderByCode = null;\r\n    this.queryParam.filterArgs.orderByName = null;\r\n    this.queryParam.filterArgs.OrderByLastModifiedTime = null;\r\n    //ä¾æ¬¡æ·»å æåºæ¡ä»¶\r\n    for (let i = 0; i < cols.length; i++) {\r\n      let orderBy = null;\r\n      if (orders[i] == \"asc\") {\r\n        orderBy = new TextValue();\r\n        orderBy.hasValue = true;\r\n        orderBy.value = OrderByDirection.Asc;\r\n      } else if (orders[i] == \"desc\") {\r\n        orderBy = new TextValue();\r\n        orderBy.hasValue = true;\r\n        orderBy.value = OrderByDirection.Desc;\r\n      }\r\n\r\n      if (cols[i] == \"code\") {\r\n        this.queryParam.filterArgs.orderByCode = orderBy;\r\n      } else if (cols[i] == \"name\") {\r\n        this.queryParam.filterArgs.orderByName = orderBy;\r\n      } else if (cols[i] == \"lastModifiedTime\") {\r\n        this.queryParam.filterArgs.OrderByLastModifiedTime = orderBy;\r\n      }\r\n    }\r\n\r\n    return this.loadItems(this.queryParam.filterArgs);\r\n  };\r\n\r\n  /**\r\n   * åæåºåäºä»¶\r\n   */\r\n  columnSorted(val) {\r\n    console.log(val);\r\n  }\r\n\r\n  onPageSizeChanged($event: { pageIndex: number, pageSize: number }) {\r\n    console.log('PageSize Changed:', $event);\r\n    let checkedIds = this.tt.checkeds.map(r => r.data.id);\r\n\r\n    this.queryParam.filterArgs.pageSize = $event.pageSize;\r\n    this.loadItems(this.queryParam.filterArgs).subscribe(\r\n      () => {\r\n        setTimeout(() => {\r\n          this.tt.checkRows(checkedIds);\r\n        }, 0);\r\n      }\r\n    );\r\n  }\r\n\r\n  onPageChanged($event: { pageIndex: number, pageSize: number }) {\r\n    console.log('PageNumber Changed:', $event);\r\n    let checkedIds = this.tt.checkeds.map(r => r.data.id);\r\n\r\n    this.queryParam.filterArgs.pageIndex = $event.pageIndex - 1;\r\n    this.queryParam.filterArgs.pageSize = $event.pageSize;\r\n    this.loadItems(this.queryParam.filterArgs).subscribe(\r\n      () => {\r\n        setTimeout(() => {\r\n          this.tt.checkRows(checkedIds);\r\n        }, 0);\r\n      }\r\n    );\r\n  }\r\n\r\n  pageChangeHandler($event) {\r\n    console.log($event);\r\n  }\r\n\r\n  pageSizeChangeHandler($event) {\r\n    console.log($event);\r\n  }\r\n\r\n  private loadItems(args: ProcessFilterConditionArgs): Observable<any> {\r\n    const loadingComp = this.loading.show({ message: this.localePipe.transform(\"loading\") });\r\n    return this.procHelpService.getDatagridData(args).pipe(\r\n      switchMap(\r\n        (listRes: RtBillProcessListResult) => {\r\n          this.ttData = [...listRes.entities];\r\n          //æ´æ°åé¡µä¿¡æ¯\r\n          this.tt.setPageIndex(listRes.pageIndex + 1);\r\n          this.tt.total = listRes.totalCount;\r\n          this.tt.pageSize = listRes.pageSize;\r\n          // this.page.setCurrentPage(this.paginationId, listRes.pageIndex + 1);\r\n          // this.page.setItemsPerPage(this.paginationId, listRes.pageSize);\r\n          // this.page.setTotalItems(this.paginationId, listRes.totalCount);\r\n\r\n          loadingComp.close();\r\n          return of(listRes);\r\n        }\r\n      ),\r\n      catchError(\r\n        (err) => {\r\n          loadingComp.close();\r\n          setTimeout(() => {\r\n            //todo ç¡®å®å¼å¸¸ç»æ, ç®åéç¨å¼å®¹åå¼æ¹å¼\r\n            this.messager.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));\r\n          }, 300);\r\n          throw err;\r\n        }\r\n      )\r\n    );\r\n  }\r\n\r\n  private configTtColumns() {\r\n    this.ttColumns = [\r\n      // {\r\n      //   field: \"isEnabled\", title: this.localePipe.transform(\"enabledState\"), width: 100, sortable: false,\r\n      //   formatter: (value: boolean, rowData, rowIndex) => {\r\n      //     if (value == true) {\r\n      //       return this.localePipe.transform(\"enabled\");\r\n      //     } else if (value == false) {\r\n      //       return this.localePipe.transform(\"disabled\");\r\n      //     } else {\r\n      //       return \"-\";\r\n      //     }\r\n      //   }\r\n      // },\r\n      { field: \"code\", title: this.localePipe.transform(\"code\"), width: 120, sortable: true },\r\n      {\r\n        field: \"name\", title: this.localePipe.transform(\"name\"), width: 250, sortable: true,\r\n        template: this.nameCellTemp,\r\n      },\r\n      { field: \"upBillVoName\", title: this.localePipe.transform(\"upBill\"), width: 120, sortable: true },\r\n      { field: \"downBillVoName\", title: this.localePipe.transform(\"downBill\"), width: 120, sortable: true },\r\n      // {\r\n      //   field: \"bifMetadataType\", title: this.localePipe.transform(\"processType\"), width: 120, sortable: false,\r\n      //   formatter: (value: BifMetadataType, rowData, rowIndex) => {\r\n      //     if (value == BifMetadataType.BifCreationProcess) {\r\n      //       return this.localePipe.transform(\"creation\");\r\n      //     } else if (value == BifMetadataType.BifWritebackProcess) {\r\n      //       return this.localePipe.transform(\"writeback\");\r\n      //     } else {\r\n      //       return \"-\";\r\n      //     }\r\n      //   }\r\n      // },\r\n      // {\r\n      //   field: \"sysInit\", title: this.localePipe.transform(\"sysInit\"), width: 80, sortable: false,\r\n      //   formatter: (value: boolean, rowData, rowIndex) => {\r\n      //     if (value == true) {\r\n      //       return this.localePipe.transform(\"yes\");\r\n      //     } else if (value == false) {\r\n      //       return this.localePipe.transform(\"no\");\r\n      //     } else {\r\n      //       return \"-\";\r\n      //     }\r\n      //   }\r\n      // },\r\n      // {\r\n      //   field: null, title: this.localePipe.transform(\"isExtendProcess\"), width: 80, sortable: false,\r\n      //   formatter: (value: boolean, rowData, rowIndex) => {\r\n      //     if (rowData.parentId == null) {\r\n      //       return this.localePipe.transform(\"no\");\r\n      //     } else {\r\n      //       return this.localePipe.transform(\"yes\");\r\n      //     }\r\n      //   }\r\n      // },\r\n      // { field: \"businessType\", title: this.translateService.instant(\"businessType\"), width: 120 },\r\n      // { field: \"creator\", title: this.translateService.instant(\"creator\"), width: 120 },\r\n      // { field: \"createdTime\", title: this.translateService.instant(\"createdTime\"), width: 120 },\r\n      // { field: \"lastModifier\", title: this.translateService.instant(\"lastModifier\"), width: 120 },\r\n      // {\r\n      //   field: \"lastModifiedTime\", title: this.localePipe.transform(\"lastModifiedTime\"), width: 120, sortable: true,\r\n      //   formatter: {\r\n      //     type: 'datetime',\r\n      //     options: {\r\n      //       format: 'YYYY-MM-DD HH:mm:ss'\r\n      //     }\r\n      //   },\r\n      // },\r\n    ];\r\n  }\r\n\r\n  private createDefaultQueryParam() {\r\n    const queryParam = {\r\n      filterArgs: new ProcessFilterConditionArgs(),\r\n      filterArgsExt: {}\r\n    };\r\n\r\n    queryParam.filterArgs.pageSize = this.defaultPageSize;\r\n    queryParam.filterArgs.pageIndex = 0;\r\n    queryParam.filterArgs.OrderByLastModifiedTime = new TextValue();\r\n    queryParam.filterArgs.OrderByLastModifiedTime.value = OrderByDirection.Desc;\r\n    queryParam.filterArgs.OrderByLastModifiedTime.hasValue = true;\r\n    queryParam.filterArgs.billProcessType = new TextValue();\r\n    queryParam.filterArgs.billProcessType.value = BifMetadataType.BifCreationProcess;\r\n    queryParam.filterArgs.billProcessType.hasValue = true;\r\n    queryParam.filterArgs.isEnabled = new TextValue();\r\n    queryParam.filterArgs.isEnabled.value = \"true\";\r\n    queryParam.filterArgs.isEnabled.hasValue = true;\r\n\r\n\r\n    return queryParam;\r\n  }\r\n}\r\n","import { Component, OnInit, HostBinding, Input, Output, EventEmitter, ViewChild, TemplateRef, ComponentFactoryResolver, Injector } from '@angular/core';\r\nimport { TypeConverter } from '@farris/ui-property-panel';\r\nimport { CallActivitySubProcess } from '../call-activity-sub-process/call-activity-sub-process.entity';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { ProcessDeUtil } from '../../domain/process-de-util';\r\nimport { HttpService } from '@ecp-caf/caf-common';\r\nimport { Observable } from 'rxjs';\r\nimport { ProcessDesignerUIState } from '../../app/process-designer.uistate';\r\nimport { ExpressionService, InjectedType } from '@gsp-svc/expression';\r\nimport { ComboListComponent } from '@farris/ui-combo-list';\r\nimport { FarrisRadioGroupComponent } from '@farris/ui-forms';\r\nimport { IRtShowEntity } from '../../aif-process-list-help/entity/IRtShowEntity';\r\nimport { ProcessListHelpComponent } from '../../aif-process-list-help/components/process-list-help/process-list-help.component';\r\nimport { NotifyService } from '@farris/ui-notify';\r\nimport { BsModalService } from '@farris/ui-modal';\r\nimport { SubProcessType } from '../call-activity-sub-process/SubProcessType';\r\nimport { BillSourceType } from '../call-activity-sub-process/BillSourceType';\r\n\r\n@Component({\r\n  selector: 'lib-call-activity-sub-process2',\r\n  templateUrl: './call-activity-sub-process2.component.html',\r\n})\r\nexport class CallActivitySubProcess2Component implements OnInit {\r\n  @HostBinding('class')\r\n  cls = 'farris-main-area flex-column';\r\n\r\n  @Input() editorParams: {\r\n    bizTypeId?: string\r\n  } = {};\r\n\r\n  @Input() set value(v: CallActivitySubProcess) {\r\n    if (v) {\r\n      this.callActivitySubProcess = v;\r\n      // ä¸ºå­æµç¨ç±»åèµå¼\r\n      if (this.callActivitySubProcess.calledElement == null || this.callActivitySubProcess.calledElement == \"\") {\r\n        if (this.callActivitySubProcess.calledBizDefKey == null || this.callActivitySubProcess.calledBizDefKey == \"\") {\r\n          this.callActivitySubProcess.subProcessType = SubProcessType.Specified;\r\n        } else {\r\n          this.callActivitySubProcess.subProcessType = SubProcessType.Dynamic;\r\n        }\r\n      } else {\r\n        this.callActivitySubProcess.subProcessType = SubProcessType.Specified;\r\n      }\r\n      // ä¸ºåæ®æ¥æºç±»åèµå¼\r\n      if (this.callActivitySubProcess.inheritBizDataId === true) {\r\n        this.callActivitySubProcess.billSourceType = BillSourceType.InheritParent;\r\n      } else if (this.callActivitySubProcess.inheritBizDataId === false && this.callActivitySubProcess.useAutoCreationData === false) {\r\n        this.callActivitySubProcess.billSourceType = BillSourceType.VariablesExpression;\r\n      } else if (this.callActivitySubProcess.inheritBizDataId === false && this.callActivitySubProcess.useAutoCreationData === true) {\r\n        this.callActivitySubProcess.billSourceType = BillSourceType.AutoCreation;\r\n      }\r\n      this.getProcessDefKey(this.callActivitySubProcess.calledElement);\r\n      this.getFlowForm(this.callActivitySubProcess.calledBizDefKey);\r\n      this.getAifProcessName(this.callActivitySubProcess.aifProcessCode);\r\n    }\r\n  }\r\n  @Output() closeModal = new EventEmitter<any>();\r\n  @Output() submitModal = new EventEmitter<any>();\r\n\r\n  @ViewChild('iconSelectFooter') modalFooter: TemplateRef<any>;\r\n  modalConfig = {\r\n    title: 'å­æµç¨è®¾ç½®',\r\n    width: 480,\r\n    height: 400,\r\n    showButtons: true\r\n  };\r\n\r\n  callActivitySubProcess: CallActivitySubProcess = new CallActivitySubProcess();\r\n\r\n  groupIcon = '<i class=\"f-icon f-icon-lookup\"></i>';\r\n\r\n  readonly subProcessType = SubProcessType;\r\n  readonly billSourceType = BillSourceType;\r\n  // @ViewChild(\"comboProcessType\")\r\n  // comboProcessType: ComboListComponent;\r\n  // comboProcessTypeIdField = \"value\";\r\n  // comboProcessTypeValueField = \"value\";\r\n  // comboProcessTypeTextField = \"text\";\r\n  // comboProcessTypeData = [\r\n  //   { value: \"Specified\", text: \"æå®å­æµç¨\" },\r\n  //   { value: \"Dynamic\", text: \"å¨æå­æµç¨\" },\r\n  // ];\r\n\r\n  // @ViewChild(\"comboBillSource\")\r\n  // comboBillSource: ComboListComponent;\r\n  // comboBillSourceIdField = \"value\";\r\n  // comboBillSourceValueField = \"value\";\r\n  // comboBillSourceTextField = \"text\";\r\n  // comboBillSourceData = [\r\n  //   { value: BillSourceType.InheritParent, text: 'ä¸ç¶æµç¨ç¸å' },\r\n  //   { value: BillSourceType.AutoCreation, text: 'èªå¨çæä¸æ¸¸åæ®' },\r\n  //   { value: BillSourceType.VariablesExpression, text: 'åéè¡¨è¾¾å¼' },\r\n  // ];\r\n\r\n  @ViewChild(\"radioGroupProcessType\")\r\n  radioGroupProcessType: FarrisRadioGroupComponent;\r\n  radioGroupProcessTypeData = [\r\n    { value: \"Specified\", name: \"æå®å­æµç¨\" },\r\n    { value: \"Dynamic\", name: \"å¨æå­æµç¨\" },\r\n  ];\r\n\r\n  @ViewChild(\"radioGroupBillSource\")\r\n  radioGroupBillSource: FarrisRadioGroupComponent;\r\n  radioGroupBillSourceData = [\r\n    { value: BillSourceType.InheritParent, name: 'ä¸ç¶æµç¨ç¸å' },\r\n    { value: BillSourceType.AutoCreation, name: 'èªå¨çæä¸æ¸¸åæ®' },\r\n    { value: BillSourceType.VariablesExpression, name: 'åéè¡¨è¾¾å¼' },\r\n  ];\r\n\r\n  constructor(\r\n    private notify: NotifyService,\r\n    private modalService: BsModalService,\r\n    private message: MessagerService,\r\n    private util: ProcessDeUtil,\r\n    private http: HttpService,\r\n    private designerState: ProcessDesignerUIState,\r\n    private expr: ExpressionService,\r\n    private cfr: ComponentFactoryResolver,\r\n    private inj: Injector,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n\r\n  clickOK() {\r\n    if (this.validator()) {\r\n      const object = { value: this.callActivitySubProcess, parameters: null };\r\n      this.submitModal.emit(object);\r\n    }\r\n  }\r\n\r\n  clickCancel() {\r\n    this.closeModal.emit();\r\n  }\r\n\r\n  processConfirm(args: any) {\r\n    if (args) {\r\n      this.callActivitySubProcess.calledElement = args.id;\r\n      this.callActivitySubProcess.calledElementName = args.name;\r\n    }\r\n  }\r\n\r\n  processTypeChange(val) {\r\n    console.log(val);\r\n    if (val == SubProcessType.Specified) {\r\n      this.callActivitySubProcess.calledBizDefKey = null;\r\n      this.callActivitySubProcess.calledBizDefName = null;\r\n    } else if (val == SubProcessType.Dynamic) {\r\n      this.callActivitySubProcess.calledElement = null;\r\n      this.callActivitySubProcess.calledElementName = null;\r\n    }\r\n  }\r\n\r\n  billSourceChange(val) {\r\n    console.log(val);\r\n    if (val == BillSourceType.InheritParent) {\r\n      this.callActivitySubProcess.inheritBizDataId = true;\r\n      this.callActivitySubProcess.useAutoCreationData = false;\r\n    } else if (val == BillSourceType.AutoCreation) {\r\n      this.callActivitySubProcess.inheritBizDataId = false;\r\n      this.callActivitySubProcess.useAutoCreationData = true;\r\n    } else if (val == BillSourceType.VariablesExpression) {\r\n      this.callActivitySubProcess.inheritBizDataId = false;\r\n      this.callActivitySubProcess.useAutoCreationData = false;\r\n    }\r\n  }\r\n\r\n  selectProcess() {\r\n    this.openProcHelp().subscribe(\r\n      (rte: IRtShowEntity) => {\r\n        if (rte == null) {\r\n          this.notify.warning(\"è¯·éä¸­ä¸æ¡çåæµç¨\");\r\n          return;\r\n        }\r\n        this.callActivitySubProcess.aifProcessCode = rte.code;\r\n        this.callActivitySubProcess.aifProcessName = rte.name;\r\n      }\r\n    );\r\n  }\r\n\r\n  clearProcess() {\r\n    this.callActivitySubProcess.aifProcessCode = null;\r\n    this.callActivitySubProcess.aifProcessName = null;\r\n  }\r\n\r\n  openProcHelp() {\r\n    const cmpF = this.cfr.resolveComponentFactory(ProcessListHelpComponent);\r\n    const cmpR = cmpF.create(this.inj, []);\r\n    cmpR.instance.editorParams = this.editorParams;\r\n    const modalRef = this.modalService.show(cmpR, {\r\n      title: \"çåæµç¨\",\r\n      width: 1250,\r\n      height: 500,\r\n      resizable: true,\r\n      buttons: [\r\n        {\r\n          text: \"ç¡®å®\",\r\n          cls: \"btn btn-primary\",\r\n          handle: (evt) => {\r\n            cmpR.instance.clickOk(evt);\r\n            modalRef.close();\r\n          }\r\n        },\r\n        {\r\n          text: \"åæ¶\",\r\n          cls: \"btn btn-secondary\",\r\n          handle: (evt) => {\r\n            cmpR.instance.clickCancel(evt);\r\n            modalRef.close();\r\n          }\r\n        }\r\n      ],\r\n      closed: () => {\r\n        modalRef.dialog.destroy();\r\n      }\r\n    });\r\n    cmpR.instance.modalRef = modalRef;\r\n\r\n    return cmpR.instance.procEmitter.asObservable();\r\n  }\r\n\r\n  clearProcessDef(args: any) {\r\n    this.callActivitySubProcess.calledElement = '';\r\n    this.callActivitySubProcess.calledElementName = '';\r\n  }\r\n\r\n  flowFormConfirm(args: any) {\r\n    if (args) {\r\n      this.callActivitySubProcess.calledBizDefKey = args.id;\r\n      this.callActivitySubProcess.calledBizDefName = args.name;\r\n    }\r\n  }\r\n  clearFlowForm(args: any) {\r\n    this.callActivitySubProcess.calledBizDefKey = '';\r\n    this.callActivitySubProcess.calledBizDefName = '';\r\n  }\r\n\r\n  setBizDataId() {\r\n    this.showExprHelp();\r\n  }\r\n\r\n  private showExprHelp() {\r\n    if (this.designerState.schemas.length > 0) {\r\n      for (const schema of this.designerState.schemas) {\r\n        this.expr.addSchema('Schema', schema);\r\n      }\r\n      if (this.designerState.schemas[0].entityTypes && this.designerState.schemas[0].entityTypes.length > 0) {\r\n        const entityType = this.designerState.schemas[0].entityTypes[0];\r\n        this.expr.addInjectedEntity(entityType.name, 'Schema',\r\n          entityType.name, InjectedType.EntityType);\r\n      }\r\n    }\r\n    const context = new Array();\r\n    if (this.designerState.procInstContext.length > 0) {\r\n      for (const variable of this.designerState.procInstContext) {\r\n        context.push(variable);\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (this.designerState.formalParameterContext.length > 0) {\r\n      for (const variable of this.designerState.formalParameterContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (this.designerState.participantContext.length > 0) {\r\n      for (const variable of this.designerState.participantContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (this.designerState.processVariableContext.length > 0) {\r\n      for (const variable of this.designerState.processVariableContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (context.length > 0) {\r\n      for (const v of context) {\r\n        this.expr.addContext(v);\r\n      }\r\n    }\r\n    this.expr.addExpressionText(this.callActivitySubProcess.bizDataId);\r\n    this.expr.buildExpression().then((expressioninfo: string) => {\r\n      this.callActivitySubProcess.bizDataId = expressioninfo;\r\n    });\r\n  }\r\n\r\n  valueChange(bool: boolean) {\r\n    if (bool) {\r\n      this.callActivitySubProcess.bizDataId = null;\r\n    }\r\n  }\r\n\r\n  private validator(): boolean {\r\n    if (!this.callActivitySubProcess.inheritBizDataId && !this.callActivitySubProcess.useAutoCreationData && !this.callActivitySubProcess.bizDataId) {\r\n      this.message.warning('å½å­æµç¨ä¸ç¶æµç¨åæ®ä¸ä¸è´æ¶ï¼è¯·è®¾ç½®å­æµç¨åæ®åç ï¼');\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  private getProcessDefKey(key: string) {\r\n    let url = this.util.getProcDefKeyWebApi();\r\n    if (key) {\r\n      url += `/${key}`;\r\n      this.http.get(url).subscribe((re: any) => {\r\n        this.callActivitySubProcess.calledElementName = re.name;\r\n      });\r\n    }\r\n  }\r\n  private getFlowForm(id: string) {\r\n    let url = this.util.getFlowFormWebApi();\r\n    if (id) {\r\n      url += `/${id}`;\r\n      this.http.get(url).subscribe((re: any) => {\r\n        this.callActivitySubProcess.calledBizDefName = re.name;\r\n      });\r\n    }\r\n  }\r\n\r\n  getAifProcessName(code: string) {\r\n    if (code != null && code != \"\") {\r\n      this.http.request(\"GET\", `/api/runtime/aif/v1.0/rtbillcreationprocess/getname/${code}`, { responseType: 'text' }).subscribe(\r\n        (res: any) => {\r\n          this.callActivitySubProcess.aifProcessName = res;\r\n        },\r\n        (err) => {\r\n          setTimeout(() => {\r\n            //todo ç¡®å®å¼å¸¸ç»æ, ç®åéç¨å¼å®¹åå¼æ¹å¼\r\n            this.message.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));\r\n          }, 300);\r\n          throw err;\r\n        });\r\n    }\r\n  }\r\n}\r\n\r\n\r\nexport class CallActivitySubProcess2Converter implements TypeConverter {\r\n  constructor() { }\r\n\r\n  convertTo(data: any): string {\r\n    if (data && (data.calledBizDefKey || data.calledElement)) {\r\n      return 'ï¼å·²è®¾ç½®ï¼';\r\n    }\r\n    return 'ï¼æªè®¾ç½®ï¼';\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { ProcessDesignerUIState } from './process-designer.uistate';\r\nimport { ElementPropertyConfig, PropertyEntity } from '@farris/ui-property-panel';\r\nimport { ResourceKeys } from '../model/resourceKeys';\r\nimport { CallActivitySubProcessComponent, CallActivitySubProcessConverter } from '../views/call-activity-sub-process/call-activity-sub-process.component';\r\nimport { BackwardRuleComponent, BackwardRuleConverter } from '../views/backward-rule/backward-rule.component';\r\nimport { VariableSettingComponent, VariableSettingConverter } from '../views/variable-setting/variable-setting.component';\r\nimport { CallActivitySubProcess2Component, CallActivitySubProcess2Converter } from '../views/call-activity-sub-process2/call-activity-sub-process2.component';\r\n\r\n@Injectable()\r\n\r\nexport class SubProcessViewModel {\r\n    constructor(private uiState: ProcessDesignerUIState) {\r\n\r\n    }\r\n    setProperty(obj: any) {\r\n        this.uiState.propertyData = obj.propertyData;\r\n        this.uiState.propertyConfig = this.setConfig(obj.propertyConfig);\r\n    }\r\n\r\n    private setConfig(obj: any[]): ElementPropertyConfig[] {\r\n        const propertyConfig: ElementPropertyConfig[] = [];\r\n        if (obj) {\r\n            obj.forEach((element: ElementPropertyConfig) => {\r\n                this.setEntity(element.properties);\r\n                propertyConfig.push(element);\r\n            });\r\n        }\r\n        return propertyConfig;\r\n    }\r\n    private setEntity(obj: PropertyEntity[]) {\r\n        if (obj && obj.length > 0) {\r\n            obj.forEach((item: PropertyEntity) => {\r\n                switch (item.propertyID) {\r\n                    case ResourceKeys.callActivitySubProcess: // åä¸è\r\n                        // item.editor = CallActivitySubProcessComponent;\r\n                        // item.converter = new CallActivitySubProcessConverter();\r\n                        item.editor = CallActivitySubProcess2Component;\r\n                        item.converter = new CallActivitySubProcess2Converter();\r\n                        item.editorParams = {\r\n                            bizTypeId: this.uiState.flowFormInfo.flowForm.businessObjectId,\r\n                        };\r\n                        break;\r\n                    case ResourceKeys.BackWardRule:\r\n                        item.editor = BackwardRuleComponent;\r\n                        item.converter = new BackwardRuleConverter();\r\n                        item.editorParams = {\r\n                            nodeType: 'CallActivitySubProcess'\r\n                        };\r\n                        break;\r\n                    case ResourceKeys.variableSettings: // åéè®¾ç½®\r\n                        item.editor = VariableSettingComponent;\r\n                        item.converter = new VariableSettingConverter();\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { ProcessDesignerUIState } from './process-designer.uistate';\r\nimport { ElementPropertyConfig, PropertyEntity } from '@farris/ui-property-panel';\r\nimport { ResourceKeys } from '../model/resourceKeys';\r\nimport { ActivityComponentComponent, ActivityComponentConverter } from '../views/activity-component/activity-component.component';\r\nimport { VariableSettingComponent, VariableSettingConverter } from '../views/variable-setting/variable-setting.component';\r\n\r\n@Injectable()\r\n\r\nexport class AutoActivityAdapter {\r\n    constructor(private uiState: ProcessDesignerUIState) {\r\n\r\n    }\r\n    setProperty(obj: any) {\r\n        this.uiState.propertyData = obj.propertyData;\r\n        this.uiState.propertyConfig = this.setConfig(obj.propertyConfig);\r\n    }\r\n\r\n    private setConfig(obj: any[]): ElementPropertyConfig[] {\r\n        const propertyConfig: ElementPropertyConfig[] = [];\r\n        if (obj) {\r\n            obj.forEach((element: ElementPropertyConfig) => {\r\n                this.setEntity(element.properties);\r\n                propertyConfig.push(element);\r\n            });\r\n        }\r\n        return propertyConfig;\r\n    }\r\n    private setEntity(obj: PropertyEntity[]) {\r\n        if (obj && obj.length > 0) {\r\n            obj.forEach((item: PropertyEntity) => {\r\n                switch (item.propertyID) {\r\n                    case ResourceKeys.Tools: // åä¸è\r\n                        item.editor = ActivityComponentComponent;\r\n                        item.converter = new ActivityComponentConverter();\r\n                        item.editorParams = {\r\n                            location: 'autoActivity'\r\n                        };\r\n                        break;\r\n                    case ResourceKeys.variableSettings: // åéè®¾ç½®\r\n                        item.editor = VariableSettingComponent;\r\n                        item.converter = new VariableSettingConverter();\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n","\r\nexport class EventDefinition {\r\n    Id: string;\r\n    name: string;\r\n    triggerAction = 'Pass';\r\n    Async = false;\r\n    SignalRef: string;\r\n    constructor() { }\r\n}\r\n","import { Component, OnInit, HostBinding, Output, EventEmitter, Input, ViewChild, TemplateRef, Injector } from '@angular/core';\r\nimport { DatagridComponent } from '@farris/ui-datagrid';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { ProcessDeUtil } from '../../domain/process-de-util';\r\nimport { EventDefinition } from './event-definition.entity';\r\nimport { EditorTypes } from '@farris/ui-datagrid-editors';\r\nimport { TypeConverter } from '@farris/ui-property-panel';\r\n\r\n@Component({\r\n  selector: 'lib-event-definition',\r\n  templateUrl: './event-definition.component.html',\r\n  styleUrls: ['./event-definition.component.scss']\r\n})\r\nexport class EventDefinitionComponent implements OnInit {\r\n  @HostBinding('class')\r\n  cls = 'farris-main-area flex-column';\r\n\r\n  @Output() closeModal = new EventEmitter<any>();\r\n  @Output() submitModal = new EventEmitter<any>();\r\n\r\n  @Input()\r\n  set value(items: any[]) {\r\n    if (items && items.length > 0) {\r\n      for (const item of items) {\r\n        const event = new EventDefinition();\r\n        event.Id = item.Id;\r\n        event.name = item.name;\r\n        event.triggerAction = item.triggerAction;\r\n        event.Async = item.Async;\r\n        event.SignalRef = item.SignalRef;\r\n        this.data.push(event);\r\n      }\r\n    }\r\n  }\r\n  @ViewChild('iconSelectFooter') modalFooter: TemplateRef<any>;\r\n  @ViewChild('grid') grid: DatagridComponent;\r\n\r\n  modalConfig = {\r\n    title: 'ä¿¡å·å®ä¹',\r\n    width: 560,\r\n    height: 420,\r\n    showButtons: true\r\n  };\r\n\r\n  triggerActionCollection: any[] = [\r\n    { text: 'æ­£å', value: 'Pass' },\r\n    { text: 'åå', value: 'Back' },\r\n    { text: 'ç»æ­¢', value: 'Abort' }];\r\n\r\n  columns = new Array();\r\n  data = new Array<EventDefinition>();\r\n\r\n  constructor(\r\n    private message: MessagerService,\r\n    private util: ProcessDeUtil,\r\n    private injector: Injector\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.columns = [{\r\n      field: 'SignalRef', width: 100, title: 'ä¿¡å·ç¼å·',\r\n      editor: { type: EditorTypes.TEXTBOX, options: {} },\r\n      validators: [\r\n        { type: 'required', messager: 'å¿å¡«' }\r\n      ]\r\n    },\r\n    {\r\n      field: 'name', width: 100, title: 'ä¿¡å·åç§°',\r\n      editor: { type: EditorTypes.TEXTBOX, options: {} },\r\n      validators: [\r\n        { type: 'required', messager: 'å¿å¡«' }\r\n      ]\r\n    },\r\n    {\r\n      field: 'triggerAction', width: 100, title: 'æµè½¬æ¹å',\r\n      formatter: {\r\n        type: 'enum',\r\n        options: { valueField: 'value', textField: 'text', data: this.triggerActionCollection }\r\n      },\r\n      editor: {\r\n        type: EditorTypes.COMBOLIST,\r\n        options: { valueField: 'value', textField: 'text', data: this.triggerActionCollection, idField: 'value', panelHeight: 'auto', showClear: false }\r\n      },\r\n      validators: [\r\n        { type: 'required', messager: 'å¿å¡«' }\r\n      ]\r\n    }];\r\n  }\r\n  add() {\r\n    const event = new EventDefinition();\r\n    event.Id = ProcessDeUtil.GenerateElementId();\r\n    this.data.push(event);\r\n    this.grid.loadData(this.data);\r\n  }\r\n  delete() {\r\n    this.grid.endCellEdit();\r\n    if (this.grid.selectedRow && this.grid.selectedRow.data) {\r\n      const i = this.data.findIndex(d => d.Id === this.grid.selectedRow.data.Id);\r\n      this.data.splice(i, 1);\r\n      this.grid.loadData(this.data);\r\n    } else {\r\n      this.message.info('å°æªéä¸­ä¸æ¡è§¦åäºä»¶ï¼');\r\n    }\r\n  }\r\n\r\n  clickOK() {\r\n    this.grid.endCellEdit();\r\n    if (this.validator()) {\r\n      const object = { value: this.data, parameters: null };\r\n      this.submitModal.emit(object);\r\n    }\r\n\r\n  }\r\n\r\n  clickCancel() {\r\n    this.closeModal.emit();\r\n  }\r\n\r\n  private validator(): boolean {\r\n    if (this.data.length === 0) {\r\n      this.message.info('è³å°éè¦ä¸ä¸ªä¿¡å·å®ä¹ï¼è¯·äºè§£ï¼');\r\n      return false;\r\n    } else {\r\n      for (const d of this.data) {\r\n        if (!d.SignalRef) {\r\n          this.message.info('ä¿¡å·ç¼å·ä¸åè®¸ä¸ºç©ºï¼');\r\n          return false;\r\n        } else if (!d.name) {\r\n          this.message.info('ä¿¡å·åç§°ä¸åè®¸ä¸ºç©ºï¼');\r\n          return false;\r\n        }\r\n      }\r\n      if (this.data.length > 1) {\r\n        for (let i = 0; i < this.data.length; i++) {\r\n          const code1 = this.data[i].SignalRef;\r\n          for (let j = i + 1; j < this.data.length; j++) {\r\n            const code2 = this.data[j].SignalRef;\r\n\r\n            if (code1 === code2) {\r\n              this.message.warning(`ä¿¡å·ç¼å·ä¸åè®¸éå¤ï¼`);\r\n              return false;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n}\r\n\r\nexport class EventDefinitionConverter implements TypeConverter {\r\n  constructor() { }\r\n\r\n  convertTo(data: any[]): string {\r\n    if (data && data.length > 0) {\r\n      return 'ï¼å·²è®¾ç½®ï¼';\r\n    } else {\r\n      return 'ï¼æªè®¾ç½®ï¼';\r\n    }\r\n  }\r\n}\r\n","import { ProcessDesignerUIState } from './process-designer.uistate';\r\nimport { Injectable, Injector } from '@angular/core';\r\nimport { ElementPropertyConfig, PropertyEntity } from '@farris/ui-property-panel';\r\nimport { ResourceKeys } from '../model/resourceKeys';\r\nimport { BackwardRuleComponent, BackwardRuleConverter } from '../views/backward-rule/backward-rule.component';\r\nimport { EventDefinitionComponent, EventDefinitionConverter } from '../views/event-definition/event-definition.component';\r\nimport { VariableSettingComponent, VariableSettingConverter } from '../views/variable-setting/variable-setting.component';\r\n\r\n@Injectable()\r\n\r\nexport class CatchEventAdapter {\r\n    constructor(\r\n        private uiState: ProcessDesignerUIState,\r\n        private injector: Injector\r\n    ) { }\r\n    setProperty(obj: any) {\r\n        this.uiState.propertyData = obj.propertyData;\r\n        this.uiState.propertyConfig = this.setConfig(obj.propertyConfig);\r\n    }\r\n\r\n    private setConfig(obj: any[]): ElementPropertyConfig[] {\r\n        const propertyConfig: ElementPropertyConfig[] = [];\r\n        if (obj) {\r\n            obj.forEach((element: ElementPropertyConfig) => {\r\n                this.setEntity(element.properties);\r\n                propertyConfig.push(element);\r\n            });\r\n        }\r\n        return propertyConfig;\r\n    }\r\n    private setEntity(obj: PropertyEntity[]) {\r\n        if (obj && obj.length > 0) {\r\n            obj.forEach((item: PropertyEntity) => {\r\n                switch (item.propertyID) {\r\n                    case ResourceKeys.BackWardRule:\r\n                        item.editor = BackwardRuleComponent;\r\n                        item.converter = new BackwardRuleConverter();\r\n                        item.editorParams = {\r\n                            nodeType: 'CallActivitySubProcess'\r\n                        };\r\n                        break;\r\n                    case ResourceKeys.eventDefinitions:\r\n                        item.editor = EventDefinitionComponent;\r\n                        item.converter = new EventDefinitionConverter();\r\n                        break;\r\n                    case ResourceKeys.variableSettings: // åéè®¾ç½®\r\n                        item.editor = VariableSettingComponent;\r\n                        item.converter = new VariableSettingConverter();\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { ProcessDesignerUIState } from './process-designer.uistate';\r\nimport { ElementPropertyConfig, PropertyEntity } from '@farris/ui-property-panel';\r\nimport { ResourceKeys } from '../model/resourceKeys';\r\nimport { MessageNoticeComponent, MessageNoticeConverter } from '../views/message-notice/message-notice.component';\r\nimport { VariableSettingComponent, VariableSettingConverter } from '../views/variable-setting/variable-setting.component';\r\n\r\n@Injectable()\r\n\r\nexport class MessageActivityAdapter {\r\n    constructor(private uiState: ProcessDesignerUIState) {\r\n\r\n    }\r\n    setProperty(obj: any) {\r\n        this.uiState.propertyData = obj.propertyData;\r\n        this.uiState.propertyConfig = this.setConfig(obj.propertyConfig);\r\n    }\r\n\r\n    private setConfig(obj: any[]): ElementPropertyConfig[] {\r\n        const propertyConfig: ElementPropertyConfig[] = [];\r\n        if (obj) {\r\n            obj.forEach((element: ElementPropertyConfig) => {\r\n                this.setEntity(element.properties);\r\n                propertyConfig.push(element);\r\n            });\r\n        }\r\n        return propertyConfig;\r\n    }\r\n    private setEntity(obj: PropertyEntity[]) {\r\n        if (obj && obj.length > 0) {\r\n            obj.forEach((item: PropertyEntity) => {\r\n                switch (item.propertyID) {\r\n                    case ResourceKeys.messageNotice: // åä¸è\r\n                        item.editor = MessageNoticeComponent;\r\n                        item.converter = new MessageNoticeConverter();\r\n                        item.editorParams = {\r\n                            location: 'messageActivity'\r\n                        };\r\n                        break;\r\n                    case ResourceKeys.variableSettings: // åéè®¾ç½®\r\n                        item.editor = VariableSettingComponent;\r\n                        item.converter = new VariableSettingConverter();\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n","export class AuditProcessDefInfo {\r\n    auditId: AuditEvent;\r\n    success: boolean;\r\n    processDefKey: string;\r\n}\r\n\r\nexport enum AuditEvent {\r\n    WF_ProcessDef_SaveDT = 'WF_ProcessDef_SaveDT',\r\n    WF_ProcessDef_SaveRT = 'WF_ProcessDef_SaveRT',\r\n    WF_ProcessDef_Deploy = 'WF_ProcessDef_Deploy',\r\n    WF_ProcessDef_Import = 'WF_ProcessDef_Import',\r\n    WF_ProcessDef_Export = 'WF_ProcessDef_Export',\r\n    WF_ProcessDef_SyncDT = 'WF_ProcessDef_SyncDT'\r\n}\r\n","export class ProcessInfo {\r\n    /**\r\n     * ä¸å¡æ´»å¨ID\r\n     */\r\n    bizObjId: string;\r\n    /**\r\n     * Key\r\n     */\r\n    processKey: string;\r\n    /**\r\n     * æµç¨åç§°\r\n     */\r\n    processName: string;\r\n    /**\r\n     * æµç¨ç¼å·\r\n     */\r\n    processCode: string;\r\n    /**\r\n     * æµç¨åç±»ID\r\n     */\r\n    flowFormId: string;\r\n    /**\r\n     * æµç¨åç±»åç§°\r\n     */\r\n    flowFormName: string;\r\n    /**\r\n     * æµç¨ç±»å\r\n     */\r\n    startMode?: string;\r\n    /**\r\n     * æµç¨ç»ç»\r\n     */\r\n    procOrg?: ProcessOrganization;\r\n    /**\r\n     * è®¿é®çº§å«\r\n     */\r\n    accessLevel?: string;\r\n}\r\n\r\n\r\nexport class ProcessOrganization {\r\n    orgName: string;\r\n    orgId: string;\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { ProcessDesignerUIState } from './process-designer.uistate';\r\nimport { ElementPropertyConfig, PropertyEntity } from '@farris/ui-property-panel';\r\nimport { ResourceKeys } from '../model/resourceKeys';\r\nimport { MessageNoticeComponent, MessageNoticeConverter } from '../views/message-notice/message-notice.component';\r\nimport { PerformerComponent, PerformerConverter } from '../views/performer/performer.component';\r\nimport { ExecuteFormsComponent, ExecuteFormsConverter } from '../views/execute-forms/execute-forms.component';\r\nimport { ExtendPropertyComponent, ExtendPropertyConverter } from '../views/extend-property/extend-property.component';\r\n\r\n@Injectable()\r\nexport class NotifyActivityAdapter {\r\n    constructor(private uiState: ProcessDesignerUIState) {\r\n\r\n    }\r\n    setProperty(obj: any) {\r\n        this.uiState.propertyData = obj.propertyData;\r\n        this.uiState.propertyConfig = this.setConfig(obj.propertyConfig);\r\n    }\r\n\r\n    private setConfig(obj: any[]): ElementPropertyConfig[] {\r\n        const propertyConfig: ElementPropertyConfig[] = [];\r\n        if (obj) {\r\n            obj.forEach((element: ElementPropertyConfig) => {\r\n                this.setEntity(element.properties);\r\n                propertyConfig.push(element);\r\n            });\r\n        }\r\n        return propertyConfig;\r\n    }\r\n    private setEntity(obj: PropertyEntity[]) {\r\n        if (obj && obj.length > 0) {\r\n            obj.forEach((item: PropertyEntity) => {\r\n                switch (item.propertyID) {\r\n                    case ResourceKeys.ParticipantSchemes: // åä¸è\r\n                        item.editor = PerformerComponent;\r\n                        item.converter = new PerformerConverter();\r\n                        break;\r\n                    case ResourceKeys.wf_ExecuteForms_PC: // è¡¨åå®ä¹\r\n                        item.editor = ExecuteFormsComponent;\r\n                        item.converter = new ExecuteFormsConverter();\r\n                        item.editorParams = {\r\n                            location: 'notifyActivity',\r\n                            tab: 'web'\r\n                        };\r\n                        break;\r\n                    case ResourceKeys.wf_ExecuteForms_Mobile: // è¡¨åå®ä¹\r\n                        item.editor = ExecuteFormsComponent;\r\n                        item.converter = new ExecuteFormsConverter();\r\n                        item.editorParams = {\r\n                            location: 'notifyActivity',\r\n                            tab: 'mobile'\r\n                        };\r\n                        break;\r\n                    case ResourceKeys.messageNotice: // æ¶æ¯éç¥\r\n                        item.editor = MessageNoticeComponent;\r\n                        item.converter = new MessageNoticeConverter();\r\n                        item.editorParams = {\r\n                            location: 'activity'\r\n                        };\r\n                        break;\r\n                    default:\r\n                        item.editor = ExtendPropertyComponent;\r\n                        item.converter = new ExtendPropertyConverter();\r\n                        break;\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n","import { TypeConverter } from \"@farris/ui-property-panel\";\r\n\r\nexport class AifCreationBillProcessConverter implements TypeConverter {\r\n    constructor() { }\r\n\r\n    convertTo(data): string {\r\n        if (data) {\r\n            return data.name || data.code || 'ï¼å·²è®¾ç½®ï¼';\r\n        } else {\r\n            return 'ï¼æªè®¾ç½®ï¼';\r\n        }\r\n    }\r\n}","import { Injectable } from '@angular/core';\r\nimport { ProcessDesignerUIState } from './process-designer.uistate';\r\nimport { ElementPropertyConfig, PropertyEntity } from '@farris/ui-property-panel';\r\nimport { ResourceKeys } from '../model/resourceKeys';\r\nimport { ProcessListHelpComponent } from '../aif-process-list-help/components/process-list-help/process-list-help.component';\r\nimport { AifCreationBillProcessConverter } from '../aif-process-list-help/AifCreationBillProcessConverter';\r\n\r\n@Injectable()\r\nexport class AifCreationBillActivityAdapter {\r\n    constructor(private uiState: ProcessDesignerUIState) {\r\n\r\n    }\r\n    setProperty(obj: any) {\r\n        this.uiState.propertyData = obj.propertyData;\r\n        this.uiState.propertyConfig = this.setConfig(obj.propertyConfig);\r\n    }\r\n\r\n    private setConfig(obj: any[]): ElementPropertyConfig[] {\r\n        const propertyConfig: ElementPropertyConfig[] = [];\r\n        if (obj) {\r\n            obj.forEach((element: ElementPropertyConfig) => {\r\n                this.setEntity(element.properties);\r\n                propertyConfig.push(element);\r\n            });\r\n        }\r\n        return propertyConfig;\r\n    }\r\n    private setEntity(obj: PropertyEntity[]) {\r\n        if (obj && obj.length > 0) {\r\n            obj.forEach((item: PropertyEntity) => {\r\n                switch (item.propertyID) {\r\n                    case ResourceKeys.aifProcessCode: // åæ®æµç¼å·\r\n                        item.editor = ProcessListHelpComponent;\r\n                        item.converter = new AifCreationBillProcessConverter();\r\n                        item.editorParams = {\r\n                            bizTypeId: this.uiState.flowFormInfo.flowForm.businessObjectId\r\n                        };\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n","import { Injectable, Injector, ComponentFactoryResolver } from '@angular/core';\r\nimport { ProcessDesignerUIState } from './process-designer.uistate';\r\nimport { ProcessDesignerDataService } from '../domain/process-designer.dataservice';\r\nimport { forkJoin } from 'rxjs/observable/forkJoin';\r\nimport { Observable } from 'rxjs/observable';\r\nimport { ProcessClrTypeID } from '../model/process-clrtypeId';\r\nimport { BpmnProcessViewModel } from './bpmn-process.viewmodel';\r\nimport { WFFlowElementsViewModel } from './wf-flowElements.viewModel';\r\nimport { NotifyService, NotifyOptions } from '@farris/ui-notify';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { map, switchMap } from 'rxjs/operators';\r\nimport { FlowFormInfo } from '../domain/entities/flowform-info';\r\nimport { of, Subject, from } from 'rxjs';\r\nimport { BsModalService } from '@farris/ui-modal';\r\nimport { SaveAsEditComponent } from '../views/save-as-edit/save-as-edit.component';\r\nimport { ProcessDeUtil } from '../domain/process-de-util';\r\nimport { HttpErrorResponse } from '@angular/common/http';\r\nimport { SubProcessViewModel } from './sub-process.viewmodel';\r\nimport { AutoActivityAdapter } from './auto-activity.adapter';\r\nimport { CatchEventAdapter } from './catch-event.adapter';\r\nimport { MessageActivityAdapter } from './message-activity.adapter';\r\nimport { AuditEvent, AuditProcessDefInfo } from '../domain/entities/audit-processDef-info';\r\nimport { RTProcessInfo } from '../model/rt-process-info';\r\nimport { HttpService } from '@ecp-caf/caf-common';\r\nimport { ProcessInfo } from '../model/process-info';\r\nimport { NotifyActivityAdapter } from './notify-activity.adapter';\r\nimport { FlowFormEntity } from '../domain/entities/flowform.entity';\r\nimport { AifCreationBillActivityAdapter } from './aif-creation-bill-activity.adapter';\r\n\r\n\r\n@Injectable()\r\n\r\nexport class ProcessDesignerViewModel {\r\n\r\n    constructor(\r\n        public uiState: ProcessDesignerUIState,\r\n        private service: ProcessDesignerDataService,\r\n        private util: ProcessDeUtil,\r\n        private notify: NotifyService,\r\n        private message: MessagerService,\r\n        private process: BpmnProcessViewModel,\r\n        private activity: WFFlowElementsViewModel,\r\n        private subProcess: SubProcessViewModel,\r\n        private autoActAdapter: AutoActivityAdapter,\r\n        private catchEventAdapter: CatchEventAdapter,\r\n        private messageActAdapter: MessageActivityAdapter,\r\n        private notifyActAdapter: NotifyActivityAdapter,\r\n        private creationActAdapter: AifCreationBillActivityAdapter,\r\n        private modalService: BsModalService,\r\n        private injector: Injector,\r\n        private resolver: ComponentFactoryResolver,\r\n        private http: HttpService\r\n    ) { }\r\n\r\n    // åå§å è½½æµç¨å±æ§\r\n    initProcessProperty(obj: any) {\r\n        const pptData = obj.propertyData;\r\n        const ffId = pptData.EntryForm;\r\n        if (ffId) {\r\n            pptData.EntryForm = this.uiState.flowFormInfo.flowForm;\r\n            this.uiState.propertyConfig = this.process.setProcessConfig(obj.propertyConfig);\r\n            this.uiState.propertyData = pptData;\r\n        } else {\r\n            this.uiState.propertyConfig = this.process.setProcessConfig(obj.propertyConfig);\r\n            this.uiState.propertyData = pptData;\r\n        }\r\n    }\r\n    setProperty(obj: any) {\r\n        // æ´æ°å±æ§æ¡æ°æ®ä¸éç½®\r\n        const propertyData = obj.propertyData;\r\n        switch (propertyData.ClrTypeID) {\r\n            case ProcessClrTypeID.process:\r\n                this.process.setProcessProperty(obj);\r\n                break;\r\n            case ProcessClrTypeID.userActivity:\r\n                this.activity.setUserActivityProperty(obj);\r\n                break;\r\n            case ProcessClrTypeID.subProcess:\r\n                this.subProcess.setProperty(obj);\r\n                break;\r\n            case ProcessClrTypeID.autoActivity:\r\n                this.autoActAdapter.setProperty(obj);\r\n                break;\r\n            case ProcessClrTypeID.catchEvent:\r\n                this.catchEventAdapter.setProperty(obj);\r\n                break;\r\n            case ProcessClrTypeID.operationActivity:\r\n                this.activity.setUserActivityProperty(obj);\r\n                break;\r\n            case ProcessClrTypeID.messageActivity:\r\n                this.messageActAdapter.setProperty(obj);\r\n                break;\r\n            case ProcessClrTypeID.notifyActivity:\r\n                this.notifyActAdapter.setProperty(obj);\r\n                break;\r\n                case ProcessClrTypeID.aifCreationBillActivity:\r\n                    this.creationActAdapter.setProperty(obj);\r\n                    break;\r\n            default:\r\n                this.activity.setFlowElementProperty(obj);\r\n                break;\r\n        }\r\n    }\r\n    public updateSchemas() {\r\n        this.uiState.schemas = [];\r\n        if (this.uiState.flowFormInfo.formalParameters && this.uiState.flowFormInfo.formalParameters.length > 0) {\r\n            const schemaParams = this.uiState.flowFormInfo.formalParameters.filter(p => p.dataType === 'CDTSchema' && p.schemaMetadataId);\r\n            forkJoin(schemaParams.map(para => {\r\n                return this.service.getBusinessEntitybyId(para.schemaMetadataId);\r\n            })).subscribe(data => {\r\n                if (data && data.length > 0) {\r\n                    data.forEach((d: any) => {\r\n                        this.uiState.schemas.push(d);\r\n                    });\r\n                }\r\n            }, err => {\r\n                this.uiState.schemas = [];\r\n            });\r\n        } else {\r\n            this.uiState.schemas = [];\r\n        }\r\n    }\r\n\r\n    public getFlowFormInfoById(formId: string): Observable<FlowFormInfo> {\r\n        const $flowform = new Subject<FlowFormInfo>();\r\n        if (formId) {\r\n            forkJoin(this.service.GetFlowFormbyId(formId),\r\n                this.service.getParametersbyFlowFormKey(formId).pipe(\r\n                    map((params: any[]) => {\r\n                        this.setFormParamCxt(params);\r\n                        return params;\r\n                    })\r\n                ),\r\n                this.service.getComponentsbyFlowformkey(formId),\r\n                this.service.getExecuteFormbyFlowFormKey(formId),\r\n                this.service.getBizActivities(formId),\r\n                this.service.getCustomizeActions(formId)\r\n            ).subscribe((re: any[]) => {\r\n                const flowform = new FlowFormInfo();\r\n                flowform.flowForm = re[0];\r\n                flowform.formalParameters = re[1];\r\n                flowform.bizComponents = re[2].filter(cmp => cmp.ownerType !== 'Activity');\r\n                flowform.excuteForms = re[3];\r\n                flowform.bizActivities = re[4];\r\n                flowform.customizeActions = re[5];\r\n                this.uiState.flowFormInfo = flowform;\r\n                // this.updateCOs();\r\n                this.updateSchemas();\r\n                $flowform.next(flowform);\r\n            });\r\n        }\r\n        return $flowform.asObservable();\r\n    }\r\n\r\n    public getFormFormatsByBizCategory(): Observable<any> {\r\n        if (this.uiState.flowFormInfo.flowForm.businessObjectId) {\r\n            let url = `/api/runtime/wf/v1.0/formFormat/query?param=`;\r\n            let param = `{\"bizCategory\":\"${this.uiState.flowFormInfo.flowForm.businessObjectId}\"}`;\r\n            param = encodeURIComponent(param);\r\n            url += param;\r\n            return this.http.get(url);\r\n        } else {\r\n            return from(new Array());\r\n        }\r\n    }\r\n    /**\r\n     * ä¿å­æµç¨\r\n     * @param content æµç¨ä¸ä¸æ\r\n     */\r\n    saveProcess(content: string, processInfo: ProcessInfo, state: number): Observable<any> {\r\n        return this.service.saveProcess(content, processInfo, state);\r\n    }\r\n    /**\r\n     * åå¸æµç¨\r\n     * @param content æµç¨ä¸ä¸æ\r\n     */\r\n    deployProcess(content: string): Observable<any> {\r\n        return this.service.deployProcess(content);\r\n    }\r\n\r\n    auditProcessDef(auditId: AuditEvent, success: boolean, key: string) {\r\n        const info = new AuditProcessDefInfo();\r\n        info.auditId = auditId;\r\n        info.success = success;\r\n        info.processDefKey = key;\r\n\r\n        this.service.auditProcessDef(info);\r\n    }\r\n\r\n    /**\r\n     * ä¿å­è¿è¡æ¶æµç¨\r\n     * @param content æµç¨ä¸ä¸æ\r\n     */\r\n    saveRTProcess(content: string, procDefId: string): Observable<any> {\r\n        return this.service.saveRTProcess(content, procDefId);\r\n    }\r\n\r\n    saveAsProcess(process: any, processInfo: ProcessInfo) {\r\n        const compFactory = this.resolver.resolveComponentFactory(SaveAsEditComponent);\r\n        const compRef = compFactory.create(this.injector);\r\n        compRef.instance.procKey = process.DefaultProcess.Key;\r\n        compRef.instance.procName = process.DefaultProcess.Name + '_å¯æ¬';\r\n        compRef.instance.isAdministratorConfig = this.uiState.isAdministratorConfig;\r\n        compRef.instance.organizations = this.uiState.organizations;\r\n        compRef.instance.accessLevel = processInfo.accessLevel;\r\n        compRef.instance.organization = processInfo.procOrg.orgId;\r\n        compRef.instance.organizationName = processInfo.procOrg.orgName;\r\n        const modalOptions = {\r\n            title: 'å¦å­ä¸º',\r\n            width: 450, height: 400,\r\n            buttons: compRef.instance.btnRef,\r\n            showButtons: true\r\n        };\r\n        const dlg = this.modalService.show(compRef, modalOptions);\r\n        compRef.instance.submit.subscribe((re: any) => {\r\n            process.DefaultProcess.Name = re.procName;\r\n            const procInfo = new ProcessInfo();\r\n            procInfo.accessLevel = re.accessLevel;\r\n            procInfo.procOrg = {\r\n                orgId: re.organization,\r\n                orgName: re.organizationName\r\n            };\r\n            this.saveProcess(JSON.stringify(process), procInfo, 1).subscribe(r => {\r\n                this.notify.success({\r\n                    title: 'ç³»ç»æç¤º', msg: 'å¦å­ä¸ºæå', timeout: 3000\r\n                } as NotifyOptions);\r\n            }, err => {\r\n                this.notify.error({\r\n                    title: 'ç³»ç»æç¤º', msg: 'å¦å­ä¸ºå¤±è´¥ï¼è¯·æ£æ¥æµç¨æ¯å¦æ­£ç¡®ï¼', timeout: 3000\r\n                } as NotifyOptions);\r\n            });\r\n            dlg.close();\r\n        });\r\n        compRef.instance.cancel.subscribe(r => {\r\n            dlg.close();\r\n        });\r\n    }\r\n\r\n    /**\r\n     * åæ­¥è®¾è®¡å¨æ¶æµç¨å®ä¹\r\n     */\r\n    syncDtProcess(content: string, rtProcessInfo: RTProcessInfo) {\r\n        if (content) {\r\n            const process = JSON.parse(content);\r\n            this.message.question('æ¯å¦å°å½åçæ¬æµç¨å®ä¹åæ­¥å°è®¾è®¡æ¶æµç¨å®ä¹åï¼', () => {\r\n                this.service.syncDtProcess(content, rtProcessInfo).subscribe((data) => {\r\n                    this.notify.success({\r\n                        title: 'ç³»ç»æç¤º', msg: 'åæ­¥æå', timeout: 3000\r\n                    } as NotifyOptions);\r\n                    this.auditProcessDef(AuditEvent.WF_ProcessDef_SyncDT, true, process.DefaultProcess.Key);\r\n                },\r\n                    (error: HttpErrorResponse) => {\r\n                        this.notify.error({\r\n                            title: 'ç³»ç»æç¤º', msg: 'åæ­¥å¤±è´¥ï¼è¯·èç³»ç®¡çåæ¥çåå ï¼', timeout: 3000\r\n                        } as NotifyOptions);\r\n                        this.auditProcessDef(AuditEvent.WF_ProcessDef_SyncDT, false, process.DefaultProcess.Key);\r\n                    });\r\n            });\r\n        }\r\n    }\r\n\r\n    beforeCompleteStrategyChange(data: any, processInfo: RTProcessInfo): Observable<boolean> {\r\n        const url = `/api/runtime/wf/v1.0/processInstances/runtimeActivityInstances?procDefId=${processInfo.rtProcDefId}&activityDefinitionId=${data.Id}`;\r\n        return this.http.get(url).pipe(\r\n            switchMap((re: any) => {\r\n                if (re && re.length > 0) {\r\n                    this.message.info('å½åèç¹å­å¨è¿è¡ä¸­çæ´»å¨å®ä¾ï¼ä¸åè®¸è°æ´å®æç­ç¥ï¼è¯·äºè§£ï¼');\r\n                    return of(false);\r\n                } else {\r\n                    return of(true);\r\n                }\r\n            })\r\n        );\r\n    }\r\n\r\n    public getProcessCategory(procCategoryId: string): Observable<FlowFormEntity> {\r\n        return this.service.GetFlowFormbyId(procCategoryId);\r\n    }\r\n\r\n    private setFormParamCxt(params: any[]) {\r\n        this.uiState.formalParameterContext = [];\r\n        if (params && params.length > 0) {\r\n            params.forEach(param => {\r\n                if (param.dataType === 'CDTSchema') {\r\n                    const formalParameterContext = [{\r\n                        key: `schemaId_${param.code}`,\r\n                        name: `schemaId_${param.name}`,\r\n                        description: `schemaId_${param.name}`\r\n                    }, {\r\n                        key: `metadataId_${param.code}`,\r\n                        name: `metadataId_${param.name}`,\r\n                        description: `metadataId_${param.name}`\r\n                    }];\r\n                    this.uiState.formalParameterContext = this.uiState.formalParameterContext.concat(formalParameterContext);\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n","import { Component, OnInit, ViewChild, TemplateRef } from '@angular/core';\r\nimport { Subject } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'lib-note',\r\n  templateUrl: './note.component.html',\r\n  styleUrls: ['./note.component.scss']\r\n})\r\nexport class NoteComponent implements OnInit {\r\n\r\n  @ViewChild('footer') footer: TemplateRef<any>;\r\n\r\n  record: string;\r\n\r\n  submit = new Subject<string>();\r\n  cancel = new Subject<any>();\r\n\r\n  placeholder = 'è¯·è¾å¥æµç¨åæ´è®°å½';\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n\r\n  clickOK() {\r\n    this.submit.next(this.record);\r\n  }\r\n\r\n  clickCancel() {\r\n    this.cancel.next();\r\n  }\r\n\r\n}\r\n","import { Component, OnInit, Input, ViewChild, ElementRef, Injector, ComponentFactoryResolver, HostBinding, Output, EventEmitter } from '@angular/core';\r\nimport { ProcessTime } from './model/process-time';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\nimport { ProcessDesignerUIState } from './app/process-designer.uistate';\r\nimport { ResourceKeys } from './model/resourceKeys';\r\nimport { FlowFormInfo } from './domain/entities/flowform-info';\r\nimport { ProcessDesignerViewModel } from './app/process-designer.viewmodel';\r\nimport { BizComponentEntity } from './domain/entities/biz-component.entity';\r\nimport { ExecuteFormModel, TerminalType } from './views/execute-forms/entities/execute-form.entity';\r\nimport { ExcuteFormEntity } from './domain/entities/excute-form.entity';\r\nimport { ModalOptions, BsModalService } from '@farris/ui-modal';\r\nimport { BackWardRule } from './views/backward-rule/backward-rule.entity';\r\nimport { ProcessDesignerDataService } from './domain/process-designer.dataservice';\r\nimport { LoadingService } from '@farris/ui-loading';\r\nimport { NotifyService, NotifyOptions } from '@farris/ui-notify';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { WFFlowElementsViewModel } from './app/wf-flowElements.viewModel';\r\nimport { PostMessageData } from './model/postMessageData';\r\nimport { HttpErrorResponse } from '@angular/common/http';\r\nimport { PropertyPanelComponent } from '@farris/ui-property-panel';\r\nimport { SignRuleComponent } from './views/sign-rule/sign-rule.component';\r\nimport { ProcessInfo } from './model/process-info';\r\nimport { RTProcessInfo } from './model/rt-process-info';\r\nimport { Observable, of, forkJoin } from 'rxjs';\r\nimport { AuditEvent } from './domain/entities/audit-processDef-info';\r\nimport { NoteComponent } from './views/note/note.component';\r\nimport { ProcessDeUtil } from './domain/process-de-util';\r\nimport { FlowFormEntity } from './domain/entities/flowform.entity';\r\n\r\n\r\n@Component({\r\n  selector: 'wf-process-editor',\r\n  template: `\r\n  <div class=\"f-utils-flex-column h-100 m-2\">\r\n    <div class=\"flex-auto d-flex flex-fill flex-row\" style=\"position:relative; overflow: hidden\">\r\n      <div class=\"flex-grow-1\">\r\n        <div *ngIf=\"src\" class=\"h-100\">\r\n          <iframe #iframe class=\"bpmn-designer\" [src]=\"src\" frameborder=\"0\">\r\n          </iframe>\r\n        </div>\r\n      </div>\r\n      <div>\r\n        <app-property-panel #propertyPanel [(propertyConfig)]=\"uiState.propertyConfig\" [(propertyData)]=\"uiState.propertyData\"\r\n          width=\"235\" showCloseBtn=\"false\"></app-property-panel>\r\n      </div>\r\n    </div>\r\n  </div>`,\r\n  styles: [`\r\n    .bpmn-designer {\r\n      height: 100%;\r\n      min-height: 400px;\r\n      width: 100%;\r\n    }`\r\n  ]\r\n})\r\n\r\nexport class WfProcessEditorComponent implements OnInit {\r\n\r\n  /**\r\n   * æ¶æ¯çå¬å¤çæ¹æ³\r\n   */\r\n  private static func = null;\r\n\r\n  src: any;\r\n\r\n  private flag = true;\r\n\r\n  @HostBinding('class')\r\n  cls = 'farris-main-area flex-column';\r\n\r\n  private _time: ProcessTime;\r\n  @Input()\r\n  set time(t: ProcessTime) {\r\n    this._time = t;\r\n  }\r\n  get time(): ProcessTime {\r\n    return this._time;\r\n  }\r\n\r\n  @Input()\r\n  processInfo: ProcessInfo;\r\n\r\n  @Input()\r\n  rtProcessInfo: RTProcessInfo;\r\n\r\n  @Input()\r\n  action: 'view' | 'edit' = 'edit';\r\n\r\n  @Input()\r\n  mode: 'general' | 'simplify' = 'general';\r\n\r\n  @Output() close = new EventEmitter<any>();\r\n\r\n  @ViewChild('propertyPanel')\r\n  propertyPanel: PropertyPanelComponent;\r\n\r\n  @ViewChild('iframe')\r\n  iframe: ElementRef;\r\n\r\n  constructor(\r\n    private sanitizer: DomSanitizer,\r\n    public uiState: ProcessDesignerUIState,\r\n    private viewModel: ProcessDesignerViewModel,\r\n    private service: ProcessDesignerDataService,\r\n    private loadService: LoadingService,\r\n    private notify: NotifyService,\r\n    private message: MessagerService,\r\n    private activity: WFFlowElementsViewModel,\r\n    private injector: Injector,\r\n    private modalService: BsModalService,\r\n    private resolver: ComponentFactoryResolver,\r\n  ) {\r\n    // å¦æå­å¨æ¶æ¯çå¬ï¼åå æ\r\n    if (WfProcessEditorComponent.func) {\r\n      window.removeEventListener('message', WfProcessEditorComponent.func, false);\r\n    }\r\n    this.addMessageListener();\r\n    this.uiState.getAdministratorInfo();\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.getSrc();\r\n    this.uiState.initUIState();\r\n    this.showLoading();\r\n    this.updateProperty();\r\n    // è·åæ¶æ¯åè¡¨\r\n    this.uiState.getMessageChannels();\r\n  }\r\n\r\n  private getSrc() {\r\n    let processCategoryId: string;\r\n    if (this._time === ProcessTime.rt) {\r\n      processCategoryId = this.rtProcessInfo.flowFormId;\r\n    } else {\r\n      processCategoryId = this.processInfo.flowFormId;\r\n    }\r\n    this.viewModel.getProcessCategory(processCategoryId).subscribe((procCategory: FlowFormEntity) => {\r\n      this.src = '/platform/runtime/wf/web/designer/index.html';\r\n      if (this._time === ProcessTime.rt) {\r\n        this.src = this.src + '?time=rt';\r\n      } else {\r\n        this.src = this.src + `?time=dt`;\r\n        if(procCategory){\r\n          this.src = this.src + `&bizCategoryId=${procCategory.businessObjectId}`;\r\n        }\r\n      }\r\n      if (this.action === 'view') {\r\n        this.src = this.src + '&action=view';\r\n      } else {\r\n        this.src = this.src + '&action=edit';\r\n      }\r\n      if (this.mode === 'general') {\r\n        this.src = this.src + '&mode=general';\r\n      } else {\r\n        this.src = this.src + '&mode=simplify';\r\n      }\r\n      this.src = this.sanitizer.bypassSecurityTrustResourceUrl(this.src);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * æ·»å äºä»¶çå¬\r\n   */\r\n  private addMessageListener() {\r\n    window.addEventListener('message', this.eventHandler, false);\r\n    WfProcessEditorComponent.func = this.eventHandler;\r\n  }\r\n\r\n  /**\r\n   * çå¬äºä»¶å¤ç\r\n   */\r\n  eventHandler = (event) => {\r\n    const postData = event.data as PostMessageData;\r\n    if (this.uiState.POST_MESSAGE_TARGET.search(event.origin) > -1) {\r\n      switch (postData.action) {\r\n        case ResourceKeys.wf_initProperty:\r\n          if (this.flag) {\r\n            this.flag = false;\r\n            this.closeLoading();\r\n          }\r\n          this.viewModel.initProcessProperty(postData.data);\r\n          break;\r\n        case ResourceKeys.wf_save:\r\n          this.uiState.content = postData.data;\r\n          this.showLoading();\r\n          this.save();\r\n          break;\r\n        case ResourceKeys.wf_deploy:\r\n          this.uiState.content = postData.data;\r\n          this.showLoading();\r\n          this.viewModel.deployProcess(this.uiState.content).subscribe((data) => {\r\n            this.closeLoading();\r\n            this.viewModel.saveProcess(this.uiState.content, this.processInfo, 0).subscribe((r) => { });\r\n            this.notify.success({\r\n              title: 'ç³»ç»æç¤º', msg: 'åå¸æå', timeout: 3000\r\n            } as NotifyOptions);\r\n            const process = JSON.parse(this.uiState.content);\r\n            this.viewModel.auditProcessDef(AuditEvent.WF_ProcessDef_Deploy, true, process.DefaultProcess.Key);\r\n          },\r\n            (error: HttpErrorResponse) => {\r\n              this.closeLoading();\r\n              this.notify.error({\r\n                title: 'ç³»ç»æç¤º', msg: 'åå¸å¤±è´¥ï¼è¯·æ£æ¥æµç¨æ¯å¦æ­£ç¡®ï¼', timeout: 3000\r\n              } as NotifyOptions);\r\n              const process = JSON.parse(this.uiState.content);\r\n              this.viewModel.auditProcessDef(AuditEvent.WF_ProcessDef_Deploy, false, process.DefaultProcess.Key);\r\n            });\r\n          break;\r\n        case ResourceKeys.wf_saveAs:\r\n          const prcoess = postData.data;\r\n          this.viewModel.saveAsProcess(prcoess, this.processInfo);\r\n          break;\r\n        case ResourceKeys.wf_sync:\r\n          const content = postData.data;\r\n          this.viewModel.syncDtProcess(content, this.rtProcessInfo);\r\n          break;\r\n        case ResourceKeys.wf_note:\r\n          this.note(postData.data);\r\n          break;\r\n        case ResourceKeys.wf_closeDesigner:\r\n          this.close.emit();\r\n          break;\r\n        case ResourceKeys.getActivities: // è·åæ´»å¨èç¹ä¿¡æ¯\r\n          this.uiState.getUserActList(postData.data);\r\n          break;\r\n        case ResourceKeys.getEndEvents: // è·åææç»æèç¹ä¿¡æ¯\r\n          this.uiState.getEndEventList(postData.data);\r\n          break;\r\n        case 'loaded':\r\n          this.openProcContent();\r\n          break;\r\n        case ResourceKeys.wf_showTip:\r\n          this.showTip(postData.data);\r\n          break;\r\n        default:\r\n          this.viewModel.setProperty(postData.data);\r\n          break;\r\n      }\r\n    }\r\n  }\r\n\r\n  private updateProperty(): boolean {\r\n    this.propertyPanel.propertyChanged.subscribe((data: any) => {\r\n      this.updateChangeProperty(data);\r\n    });\r\n    this.propertyPanel.submitModal.subscribe((data: any) => {\r\n      this.updateChangeProperty(data.changeObject);\r\n    });\r\n\r\n    return false; // é²æ­¢åæ³¡\r\n  }\r\n\r\n  /**\r\n   * æ´æ°å±æ§\r\n   */\r\n  private updateChangeProperty(data): any {\r\n    data.Id = this.uiState.propertyData.Id;\r\n    switch (data.propertyID) {\r\n      case ResourceKeys.EntryForm:\r\n        this.bindEntryFormInfo(data);\r\n        break;\r\n      case ResourceKeys.ApprovalItems:\r\n        this.sendMessage(ResourceKeys.updateProperty, JSON.stringify(data));\r\n        this.activity.buildCounterSignVariables(data.propertyValue);\r\n        break;\r\n      case ResourceKeys.CompleteStrategy:\r\n        this.beforeCompleteStrategyChange(data).subscribe(b => {\r\n          if (b) {\r\n            this.sendMessage(ResourceKeys.updateProperty, JSON.stringify(data));\r\n            this.completeStrategyChanged(data.propertyValue);\r\n          } else { // å·æ°å±æ§æ¡\r\n            this.sendMessage(ResourceKeys.refresh, JSON.stringify(data));\r\n          }\r\n        });\r\n        break;\r\n      case ResourceKeys.SignRule:\r\n        this.sendMessage(ResourceKeys.updateProperty, JSON.stringify(data));\r\n        break;\r\n      default:\r\n        this.sendMessage(ResourceKeys.updateProperty, JSON.stringify(data));\r\n        break;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ç»å®æµç¨åç±»çåæ°åè¡¨ï¼æµç¨æä»¶ï¼è¡¨åèµå¼\r\n   * @param data\r\n   */\r\n  private bindEntryFormInfo(data) {\r\n    const flowformId: string = data.propertyValue.id;\r\n    if (flowformId) {\r\n      this.viewModel.getFlowFormInfoById(flowformId).subscribe((info: FlowFormInfo) => {\r\n        data.flowForm = info.flowForm;\r\n        data.formalParameters = info.formalParameters;\r\n        data.processBizComponnets = info.bizComponents;\r\n        data.executeForms = [];\r\n        info.excuteForms.forEach(form => {\r\n          if (form.isDefault) {\r\n            const executeForms = this.ConvertExecuteForm(form);\r\n            data.executeForms = data.executeForms.concat(executeForms); // æµç¨ç»å®é»è®¤åæ®\r\n          }\r\n        });\r\n        data.customizeActions = info.customizeActions.filter(a => a.isAll === true).map(a => ({\r\n          id: a.id, code: a.code, name: a.name, terminalType: a.terminal,\r\n          actualParameters: a.actualParameters.map(p => ({\r\n            Name: p.code, Value: p.value, ValueText: p.name, Tag: 'expression'\r\n          }))\r\n        }));\r\n        this.sendMessage(ResourceKeys.loadBizActivity, info.bizActivities || []);\r\n        this.sendMessage(ResourceKeys.updateProperty, JSON.stringify(data));\r\n      });\r\n    }\r\n  }\r\n\r\n  private note(record: string) {\r\n    const compFactory = this.resolver.resolveComponentFactory(NoteComponent);\r\n    const compRef = compFactory.create(this.injector);\r\n\r\n    compRef.instance.record = record;\r\n\r\n    const modalConfig: ModalOptions = {\r\n      title: 'æµç¨åæ´è®°å½',\r\n      width: 800,\r\n      height: 520,\r\n      showButtons: true,\r\n      buttons: compRef.instance.footer\r\n    };\r\n    const dialog = this.modalService.show(compRef, modalConfig);\r\n    compRef.instance.cancel.subscribe($event => dialog.close());\r\n    compRef.instance.submit.subscribe((data: string) => {\r\n      this.sendMessage(ResourceKeys.wf_note, data);\r\n      dialog.close();\r\n    });\r\n  }\r\n\r\n  private openProcContent() {\r\n    if (this.time === ProcessTime.dt) {\r\n      if (this.processInfo) {\r\n        if (this.processInfo.processKey === ResourceKeys.new && this.processInfo.flowFormId) {\r\n          this.openNewProcess(this.processInfo.flowFormId);\r\n        } else {\r\n          // TODOï¼é¦åè·åæµç¨åç±»ä¿¡æ¯ï¼ç¡®ä¿æµç¨åç±»åæµç¨æä»¶è·åå°ï¼ä¼ç¨å¾®å½±åè®¾è®¡å¨æå¼éåº¦ï¼\r\n          this.viewModel.getFlowFormInfoById(this.processInfo.flowFormId).subscribe((info: FlowFormInfo) => {\r\n            this.sendMessage(ResourceKeys.loadBizActivity, info.bizActivities || []);\r\n            this.getProcContent(this.processInfo.processKey).subscribe(re => {\r\n              this.uiState.content = this.checkModelContent(JSON.stringify(re));\r\n              this.sendMessage(ResourceKeys.open, {\r\n                content: this.uiState.content\r\n              });\r\n            });\r\n          });\r\n        }\r\n      } else {\r\n        throw new Error('ä¸å­å¨è®¾è®¡æ¶æµç¨ä¿¡æ¯ï¼è¯·åèµå¼ï¼');\r\n      }\r\n    } else if (this.time === ProcessTime.rt) {\r\n      if (this.rtProcessInfo) {\r\n        this.viewModel.getFlowFormInfoById(this.rtProcessInfo.flowFormId).subscribe((info: FlowFormInfo) => {\r\n          this.sendMessage(ResourceKeys.loadBizActivity, info.bizActivities || []);\r\n          this.getProcContent(this.rtProcessInfo.rtProcDefId).subscribe(re => {\r\n            this.uiState.content = this.checkModelContent(JSON.stringify(re));\r\n            this.sendMessage(ResourceKeys.open, {\r\n              content: this.uiState.content\r\n            });\r\n          });\r\n        });\r\n      } else {\r\n        throw new Error('ä¸å­å¨è¿è¡æ¶æµç¨ä¿¡æ¯ï¼è¯·åèµå¼ï¼');\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * æ°å¢æµç¨ï¼åºäºæµç¨åç±»è·ååæ°åè¡¨ï¼æä»¶åè¡¨å\r\n   * @param ffId æµç¨åç±»ID\r\n   */\r\n  private openNewProcess(ffId: string) {\r\n    this.viewModel.getFlowFormInfoById(ffId)\r\n      .subscribe((info: FlowFormInfo) => {\r\n        const processBizComponnets: BizComponentEntity[] = info.bizComponents;\r\n        const customizeActions = info.customizeActions.filter(a => a.isAll === true).map(a => ({\r\n          id: a.id, code: a.code, name: a.name, terminalType: a.terminal,\r\n          actualParameters: a.actualParameters.map(p => ({\r\n            Name: p.code, Value: p.value, ValueText: p.name, Tag: 'expression'\r\n          }))\r\n        }));\r\n        let executeForms: ExecuteFormModel[] = [];\r\n        info.excuteForms.forEach(form => {\r\n          if (form.isDefault) {\r\n            const forms = this.ConvertExecuteForm(form);\r\n            executeForms = executeForms.concat(forms); // æµç¨ç»å®é»è®¤åæ®\r\n          }\r\n        });\r\n        // å¦æä¸å­å¨è¡¨åå®ä¹ï¼éè¦å»è¡¨åæ ¼å¼åè¡¨åä¸ä¸\r\n        if (executeForms.length === 0\r\n          || executeForms.findIndex(e => e.TerminalType === TerminalType.PC) === -1\r\n          || executeForms.findIndex(e => e.TerminalType === TerminalType.MOBILE) === -1) {\r\n          this.viewModel.getFormFormatsByBizCategory().subscribe((formFormats: any[]) => {\r\n            if (formFormats && formFormats.length > 0) {\r\n              if (executeForms.findIndex(e => e.TerminalType === TerminalType.PC) === -1) {\r\n                const formFormat = formFormats.filter(f => f.terminal === 'PC' && f.status === 0)[0];\r\n                if (formFormat) {\r\n                  executeForms.push(this.formFormat2ExecuteForm(formFormat));\r\n                }\r\n              }\r\n              if (executeForms.findIndex(e => e.TerminalType === TerminalType.MOBILE) === -1) {\r\n                const formFormat = formFormats.filter(f => f.terminal === 'Mobile' && f.status === 0)[0];\r\n                if (formFormat) {\r\n                  executeForms.push(this.formFormat2ExecuteForm(formFormat));\r\n                }\r\n              }\r\n            }\r\n            this.sendMessage(ResourceKeys.loadBizActivity, info.bizActivities || []);\r\n            this.sendMessage(ResourceKeys.new, {\r\n              name: this.processInfo.processName,\r\n              bizObjId: this.processInfo.bizObjId,\r\n              ffId,\r\n              ffName: this.processInfo.flowFormName,\r\n              startMode: this.processInfo.startMode,\r\n              formalParameters: info.formalParameters,\r\n              processBizComponnets,\r\n              executeForms,\r\n              customizeActions,\r\n              processDescription: info.flowForm.processDescription\r\n            });\r\n          });\r\n        } else {\r\n          this.sendMessage(ResourceKeys.loadBizActivity, info.bizActivities || []);\r\n          this.sendMessage(ResourceKeys.new, {\r\n            name: this.processInfo.processName,\r\n            bizObjId: this.processInfo.bizObjId,\r\n            ffId,\r\n            ffName: this.processInfo.flowFormName,\r\n            startMode: this.processInfo.startMode,\r\n            formalParameters: info.formalParameters,\r\n            processBizComponnets,\r\n            executeForms,\r\n            customizeActions,\r\n            processDescription: info.flowForm.processDescription\r\n          });\r\n        }\r\n      });\r\n  }\r\n\r\n  // åå­é¡µé¢åéæ¶æ¯\r\n  private sendMessage(action: string, data: any): void {\r\n    const iframeWindow = this.iframe.nativeElement.contentWindow;\r\n    const message = this.wrapMessage(action, data);\r\n    iframeWindow.postMessage(message, this.uiState.POST_MESSAGE_TARGET);\r\n  }\r\n\r\n  // åè£æ¶æ¯åå®¹\r\n  private wrapMessage(action: string, data: any) {\r\n    return {\r\n      action,\r\n      data\r\n    };\r\n  }\r\n\r\n  private showTip(data: any) {\r\n    if (data.type === 'message') {\r\n      switch (data.level) {\r\n        case 'warning':\r\n          this.message.warning(data.message);\r\n          break;\r\n        case 'error':\r\n          this.message.error(data.message);\r\n          break;\r\n        default:\r\n          this.message.info(data.message);\r\n          break;\r\n      }\r\n    } else if (data.type === 'notify') {\r\n      switch (data.level) {\r\n        case 'warning':\r\n          this.notify.warning(data.message);\r\n          break;\r\n        case 'error':\r\n          this.notify.error(data.message);\r\n          break;\r\n        default:\r\n          this.notify.info(data.message);\r\n          break;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * è·åæµç¨ä¸ä¸æ\r\n   * @param id æµç¨å®ä¹IDï¼è®¾è®¡æ¶ä½¿ç¨æµç¨å®ä¹Keyï¼è¿è¡æ¶ä½¿ç¨æµç¨å®ä¹IDï¼\r\n   */\r\n  getProcContent(id: string): Observable<any> {\r\n    if (id) {\r\n      if (this.time === ProcessTime.dt) {\r\n        return this.service.getProcContentbyKey(id);\r\n      } else if (this.time === ProcessTime.rt) {\r\n        return this.service.getRTProcContentbyId(id);\r\n      } else {\r\n        throw new Error('è®¾è®¡å¨è¿è¡æ¶æºéè¯¯ï¼');\r\n      }\r\n    }\r\n  }\r\n\r\n  private save() {\r\n    const process = JSON.parse(this.uiState.content);\r\n    // this.uiState.content = this.checkModelContent(this.uiState.content);\r\n    this.saveHttp().subscribe((data) => {\r\n      this.closeLoading();\r\n      this.notify.success({\r\n        title: 'ç³»ç»æç¤º', msg: 'ä¿å­æå', timeout: 3000\r\n      } as NotifyOptions);\r\n      if (this.time === ProcessTime.dt) {\r\n        this.viewModel.auditProcessDef(AuditEvent.WF_ProcessDef_SaveDT, true, process.DefaultProcess.Key);\r\n      } else if (this.time === ProcessTime.rt) {\r\n        this.viewModel.auditProcessDef(AuditEvent.WF_ProcessDef_SaveRT, true, process.DefaultProcess.Key);\r\n      }\r\n    },\r\n      (error: HttpErrorResponse) => {\r\n        this.closeLoading();\r\n        this.notify.error({\r\n          title: 'ç³»ç»æç¤º', msg: 'ä¿å­å¤±è´¥ï¼è¯·æ£æ¥æµç¨æ¯å¦æ­£ç¡®ï¼', timeout: 3000\r\n        } as NotifyOptions);\r\n        if (this.time === ProcessTime.dt) {\r\n          this.viewModel.auditProcessDef(AuditEvent.WF_ProcessDef_SaveDT, false, process.DefaultProcess.Key);\r\n        } else if (this.time === ProcessTime.rt) {\r\n          this.viewModel.auditProcessDef(AuditEvent.WF_ProcessDef_SaveRT, false, process.DefaultProcess.Key);\r\n        }\r\n      });\r\n  }\r\n\r\n  /**\r\n   * ä¿å­æµç¨å®ä¹ï¼è®¾è®¡æ¶+è¿è¡æ¶ï¼\r\n   */\r\n  private saveHttp(): Observable<any> {\r\n    if (this.uiState.content) {\r\n      if (this.time === ProcessTime.dt) {\r\n        return this.viewModel.saveProcess(this.uiState.content, this.processInfo, 1);\r\n      } else if (this.time === ProcessTime.rt) {\r\n        return this.viewModel.saveRTProcess(this.uiState.content, this.rtProcessInfo.rtProcDefId);\r\n      } else {\r\n        throw new Error('è®¾è®¡å¨è¿è¡æ¶æºéè¯¯ï¼');\r\n      }\r\n    }\r\n  }\r\n\r\n  showLoading() {\r\n    this.loadService.show({ container: 'body', message: '', type: 1 });\r\n  }\r\n  closeLoading() {\r\n    this.loadService.close();\r\n  }\r\n\r\n  private ConvertExecuteForm(form: ExcuteFormEntity): ExecuteFormModel[] {\r\n    const executeForms = new Array();\r\n    if (form.terminal === 'web,app') {\r\n      const webForm = new ExecuteFormModel();\r\n      webForm.ComponentId = form.appId;\r\n      webForm.formFormatId = form.formFormatId;\r\n      webForm.FormType = form.formType;\r\n      webForm.Name = form.name;\r\n      webForm.TerminalType = TerminalType.PC;\r\n      if (form.actualParameters && form.actualParameters.length > 0) {\r\n        webForm.ActualParameters = form.actualParameters.map(p => ({\r\n          Name: p.code,\r\n          Value: p.value\r\n        }));\r\n      }\r\n      executeForms.push(webForm);\r\n      const appForm = new ExecuteFormModel();\r\n      appForm.ComponentId = form.appId;\r\n      appForm.formFormatId = form.formFormatId;\r\n      appForm.FormType = form.formType;\r\n      appForm.Name = form.name;\r\n      appForm.TerminalType = TerminalType.MOBILE;\r\n      if (form.actualParameters && form.actualParameters.length > 0) {\r\n        appForm.ActualParameters = form.actualParameters.map(p => ({\r\n          Name: p.code,\r\n          Value: p.value\r\n        }));\r\n      }\r\n      executeForms.push(appForm);\r\n    } else {\r\n      const executeForm = new ExecuteFormModel();\r\n      executeForm.ComponentId = form.appId;\r\n      executeForm.formFormatId = form.formFormatId;\r\n      executeForm.FormType = form.formType;\r\n      executeForm.Name = form.name;\r\n      switch (form.terminal) {\r\n        case 'web':\r\n          executeForm.TerminalType = TerminalType.PC;\r\n          break;\r\n        case 'app':\r\n          executeForm.TerminalType = TerminalType.MOBILE;\r\n          break;\r\n      }\r\n      if (form.actualParameters && form.actualParameters.length > 0) {\r\n        executeForm.ActualParameters = form.actualParameters.map(p => ({\r\n          Name: p.code,\r\n          Value: p.value\r\n        }));\r\n      }\r\n      executeForms.push(executeForm);\r\n    }\r\n    return executeForms;\r\n  }\r\n  private formFormat2ExecuteForm(formformat): ExecuteFormModel {\r\n    const form = new ExecuteFormModel();\r\n    form.Id = ProcessDeUtil.GenerateElementId();\r\n    form.ComponentId = null;\r\n    form.formFormatId = formformat.id;\r\n    form.FormType = '0';\r\n    form.Name = formformat.name;\r\n    switch (formformat.terminal) {\r\n      case 'PC':\r\n        form.TerminalType = TerminalType.PC;\r\n        break;\r\n      case 'Mobile':\r\n        form.TerminalType = TerminalType.MOBILE;\r\n        break;\r\n    }\r\n    if (formformat.urlParameters && formformat.urlParameters.length > 0) {\r\n      form.ActualParameters = formformat.urlParameters.map(p => ({\r\n        Name: p.code,\r\n        Value: p.value\r\n      }));\r\n    }\r\n    return form;\r\n  }\r\n\r\n  private completeStrategyChanged(strategy: string) {\r\n\r\n    if (strategy !== this.uiState.completeIterator[0].key) {\r\n\r\n      // åä¸èå­å¨èªå¨å®¡æ¹çæåµä¸ï¼ä¸åè®¸ä¿®æ¹å®æç­ç¥ä¸ºä¼ç­¾è§å\r\n      // if (this.uiState.propertyData.ParticipantSchemes\r\n      //   && this.uiState.propertyData.ParticipantSchemes.options\r\n      //   && this.uiState.propertyData.ParticipantSchemes.options.automaticPerformers\r\n      //   && this.uiState.propertyData.ParticipantSchemes.options.automaticPerformers.length > 0) {\r\n      //   return;\r\n      // } else {\r\n        // ä¼ç­¾è§åä¸å­å¨ï¼å³ç±æ¢å æ¨¡å¼ï¼åä¸ºä¼ç­¾æ¶\r\n        if (!this.uiState.propertyData.SignRule) {\r\n          // ä¼ç­¾æ¯èªå¨å¼¹åºä¼ç­¾è§åç¼è¾\r\n          const compFactory = this.resolver.resolveComponentFactory(SignRuleComponent);\r\n          const compRef = compFactory.create(this.injector);\r\n\r\n          compRef.instance.value = [];\r\n          // compRef.instance.counterSignVariables = this.uiState.counterSignVariables || [];\r\n          // compRef.instance.approvalItems = this.uiState.approvalItems || [];\r\n\r\n          const modalConfig: ModalOptions = Object.assign(compRef.instance.modalConfig,\r\n            { buttons: compRef.instance.modalFooter });\r\n          const dialog = this.modalService.show(compRef, modalConfig);\r\n          compRef.instance.closeModal.subscribe($event => dialog.close());\r\n          compRef.instance.submitModal.subscribe((data: any) => {\r\n            this.updateChangeProperty({\r\n              categoryId: 'performerProperty',\r\n              propertyID: ResourceKeys.SignRule,\r\n              propertyValue: data.value\r\n            });\r\n            dialog.close();\r\n          });\r\n        }\r\n        // ä¼ç­¾è§åä¸ï¼é©³åè§åçº¦æ\r\n        if ((this.uiState.propertyData.BackWardRule as BackWardRule).SelectTargetAble === true) {\r\n          setTimeout(() => {\r\n            this.message.warning('ä¼ç­¾ç­ç¥ä¸,âé©³åè§åâä¸åè®¸âå¨æéæ©é©³åçº§æ¬¡âï¼è¯·ä¿®æ¹ï¼');\r\n          }, 500);\r\n        }\r\n      // }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * å®æç­ç¥è°æ´æ ¡éª\r\n   */\r\n  private beforeCompleteStrategyChange(data: any): Observable<boolean> {\r\n    if (this.time === ProcessTime.rt) {\r\n      return this.viewModel.beforeCompleteStrategyChange(data, this.rtProcessInfo);\r\n    } else {\r\n      return of(true);\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * ä¿å­ï¼åå¸ï¼å¦å­ï¼åæ­¥æä½æ¶\r\n   * æ ¡éªæ¨¡åçæµç¨åç±»IDä¸åè¡¨å­å¨æ¯å¦ä¸è´ï¼ä¸ä¸è´æ¶ï¼ä»¥åè¡¨ä¸ºå\r\n   */\r\n  private checkModelContent(content: string): string {\r\n    const process = JSON.parse(content);\r\n    const modelBizDefKey = process.DefaultProcess.extensionElements.find(e => e.ClrTypeID === 'wf.ProcessHeader').BizDefKey;\r\n    if (this.time === ProcessTime.dt) {\r\n      if (modelBizDefKey === this.processInfo.flowFormId) {\r\n        return content;\r\n      } else {\r\n        process.DefaultProcess.extensionElements.find(e => e.ClrTypeID === 'wf.ProcessHeader').BizDefKey = this.processInfo.flowFormId;\r\n        process.DefaultProcess.extensionElements.find(e => e.ClrTypeID === 'wf.ProcessHeader').BizDefName = this.uiState.flowFormInfo.flowForm.name;\r\n        return JSON.stringify(process);\r\n      }\r\n    } else if (this.time === ProcessTime.rt) {\r\n      if (modelBizDefKey === this.rtProcessInfo.flowFormId) {\r\n        return content;\r\n      } else {\r\n        process.DefaultProcess.extensionElements.find(e => e.ClrTypeID === 'wf.ProcessHeader').BizDefKey = this.rtProcessInfo.flowFormId;\r\n        process.DefaultProcess.extensionElements.find(e => e.ClrTypeID === 'wf.ProcessHeader').BizDefName = this.uiState.flowFormInfo.flowForm.name;\r\n        return JSON.stringify(process);\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({name: 'jumpScopePipe'})\r\nexport class JumpScopePipe implements PipeTransform {\r\n    transform(value: any[], nodeId: string): any[] {\r\n        return value.filter(item => item.Id !== nodeId);\r\n    }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { PerformerEntity } from '../../entities/performer.entity';\r\n\r\n@Pipe({ name: 'usersName' })\r\nexport class UsersNamePipe implements PipeTransform {\r\n    constructor() { }\r\n    transform(users: PerformerEntity[], defaultVal = ''): string {\r\n        let r = '';\r\n        users.forEach(u => {\r\n            r += u.performerName + 'ï¼';\r\n        });\r\n        if (r) {\r\n            r = r.substring(0, r.length - 1);\r\n        }\r\n        return r ? r : defaultVal;\r\n    }\r\n}\r\n","import { Provider } from '@angular/core';\r\nimport { ProcessDesignerUIState } from './app/process-designer.uistate';\r\nimport { ProcessDesignerViewModel } from './app/process-designer.viewmodel';\r\nimport { ProcessDesignerDataService } from './domain/process-designer.dataservice';\r\nimport { BpmnProcessViewModel } from './app/bpmn-process.viewmodel';\r\nimport { WFFlowElementsViewModel } from './app/wf-flowElements.viewModel';\r\nimport { SubProcessViewModel } from './app/sub-process.viewmodel';\r\nimport { AutoActivityAdapter } from './app/auto-activity.adapter';\r\nimport { CatchEventAdapter } from './app/catch-event.adapter';\r\nimport { MessageActivityAdapter } from './app/message-activity.adapter';\r\nimport { NotifyActivityAdapter } from './app/notify-activity.adapter';\r\nimport { AifCreationBillActivityAdapter } from './app/aif-creation-bill-activity.adapter';\r\n\r\nconst PROCESS_DESIGNER_APP_PROVIDERS: Provider[] = [\r\n    ProcessDesignerUIState,\r\n    ProcessDesignerViewModel,\r\n    BpmnProcessViewModel,\r\n    WFFlowElementsViewModel,\r\n    SubProcessViewModel,\r\n    AutoActivityAdapter,\r\n    CatchEventAdapter,\r\n    MessageActivityAdapter,\r\n    NotifyActivityAdapter,\r\n    AifCreationBillActivityAdapter,\r\n];\r\nexport {\r\n    ProcessDesignerUIState,\r\n    ProcessDesignerViewModel,\r\n    BpmnProcessViewModel,\r\n    WFFlowElementsViewModel,\r\n    SubProcessViewModel,\r\n    AutoActivityAdapter,\r\n    CatchEventAdapter,\r\n    MessageActivityAdapter,\r\n    NotifyActivityAdapter,\r\n    AifCreationBillActivityAdapter,\r\n    PROCESS_DESIGNER_APP_PROVIDERS,\r\n};\r\nconst PROCESS_DESIGNER_DOMAIN_PROVIDERS: Provider[] = [\r\n    ProcessDesignerDataService\r\n];\r\nexport {\r\n    ProcessDesignerDataService,\r\n    PROCESS_DESIGNER_DOMAIN_PROVIDERS\r\n};\r\nconst PROCESS_DESIGNER_PART_PROVIDERS: Provider[] = [\r\n];\r\nexport {\r\n    PROCESS_DESIGNER_PART_PROVIDERS\r\n};\r\n","import { Component, OnInit, HostBinding, Input, Output, EventEmitter, ViewChild, TemplateRef } from '@angular/core';\r\nimport { TypeConverter } from '@farris/ui-property-panel';\r\nimport { CallActivitySubProcess } from './call-activity-sub-process.entity';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { ProcessDeUtil } from '../../domain/process-de-util';\r\nimport { HttpService } from '@ecp-caf/caf-common';\r\nimport { Observable } from 'rxjs';\r\nimport { ProcessDesignerUIState } from '../../app/process-designer.uistate';\r\nimport { ExpressionService, InjectedType } from '@gsp-svc/expression';\r\n\r\n@Component({\r\n  selector: 'lib-call-activity-sub-process',\r\n  templateUrl: './call-activity-sub-process.component.html',\r\n  styleUrls: ['./call-activity-sub-process.component.scss']\r\n})\r\nexport class CallActivitySubProcessComponent implements OnInit {\r\n  @HostBinding('class')\r\n  cls = 'farris-main-area flex-column';\r\n\r\n  @Input() set value(v: CallActivitySubProcess) {\r\n    if (v) {\r\n      this.callActivitySubProcess = v;\r\n      this.getProcessDefKey(this.callActivitySubProcess.calledElement);\r\n      this.getFlowForm(this.callActivitySubProcess.calledBizDefKey);\r\n    }\r\n  }\r\n  @Output() closeModal = new EventEmitter<any>();\r\n  @Output() submitModal = new EventEmitter<any>();\r\n\r\n  @ViewChild('iconSelectFooter') modalFooter: TemplateRef<any>;\r\n  modalConfig = {\r\n    title: 'å­æµç¨éé¡¹',\r\n    width: 480,\r\n    height: 360,\r\n    showButtons: true\r\n  };\r\n\r\n  callActivitySubProcess: CallActivitySubProcess = new CallActivitySubProcess();\r\n\r\n  groupIcon = '<i class=\"f-icon f-icon-lookup\"></i>';\r\n  constructor(\r\n    private message: MessagerService,\r\n    private util: ProcessDeUtil,\r\n    private http: HttpService,\r\n    private designerState: ProcessDesignerUIState,\r\n    private expr: ExpressionService,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n\r\n  clickOK() {\r\n    if (this.validator()) {\r\n      const object = { value: this.callActivitySubProcess, parameters: null };\r\n      this.submitModal.emit(object);\r\n    }\r\n  }\r\n\r\n  clickCancel() {\r\n    this.closeModal.emit();\r\n  }\r\n\r\n  processConfirm(args: any) {\r\n    if (args) {\r\n      this.callActivitySubProcess.calledElement = args.id;\r\n      this.callActivitySubProcess.calledElementName = args.name;\r\n    }\r\n  }\r\n  clearProcessDef(args: any) {\r\n    this.callActivitySubProcess.calledElement = '';\r\n    this.callActivitySubProcess.calledElementName = '';\r\n  }\r\n\r\n  flowFormConfirm(args: any) {\r\n    if (args) {\r\n      this.callActivitySubProcess.calledBizDefKey = args.id;\r\n      this.callActivitySubProcess.calledBizDefName = args.name;\r\n    }\r\n  }\r\n  clearFlowForm(args: any) {\r\n    this.callActivitySubProcess.calledBizDefKey = '';\r\n    this.callActivitySubProcess.calledBizDefName = '';\r\n  }\r\n\r\n  setBizDataId() {\r\n    this.showExprHelp();\r\n  }\r\n\r\n  private showExprHelp() {\r\n    if (this.designerState.schemas.length > 0) {\r\n      for (const schema of this.designerState.schemas) {\r\n        this.expr.addSchema('Schema', schema);\r\n      }\r\n      if (this.designerState.schemas[0].entityTypes && this.designerState.schemas[0].entityTypes.length > 0) {\r\n        const entityType = this.designerState.schemas[0].entityTypes[0];\r\n        this.expr.addInjectedEntity(entityType.name, 'Schema',\r\n          entityType.name, InjectedType.EntityType);\r\n      }\r\n    }\r\n    const context = new Array();\r\n    if (this.designerState.procInstContext.length > 0) {\r\n      for (const variable of this.designerState.procInstContext) {\r\n        context.push(variable);\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (this.designerState.formalParameterContext.length > 0) {\r\n      for (const variable of this.designerState.formalParameterContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (this.designerState.participantContext.length > 0) {\r\n      for (const variable of this.designerState.participantContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (this.designerState.processVariableContext.length > 0) {\r\n      for (const variable of this.designerState.processVariableContext) {\r\n        if (!context.some(c => c.key === variable.key)) {\r\n          context.push(variable);\r\n        }\r\n        // this.expr.addContext(variable);\r\n      }\r\n    }\r\n    if (context.length > 0) {\r\n      for (const v of context) {\r\n        this.expr.addContext(v);\r\n      }\r\n    }\r\n    this.expr.addExpressionText(this.callActivitySubProcess.bizDataId);\r\n    this.expr.buildExpression().then((expressioninfo: string) => {\r\n      this.callActivitySubProcess.bizDataId = expressioninfo;\r\n    });\r\n  }\r\n\r\n  valueChange(bool: boolean) {\r\n    if (bool) {\r\n      this.callActivitySubProcess.bizDataId = null;\r\n    }\r\n  }\r\n\r\n  private validator(): boolean {\r\n    if (!this.callActivitySubProcess.inheritBizDataId && !this.callActivitySubProcess.bizDataId) {\r\n      this.message.warning('å½å­æµç¨ä¸ç¶æµç¨åæ®ä¸ä¸è´æ¶ï¼è¯·è®¾ç½®å­æµç¨åæ®åç ï¼');\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  private getProcessDefKey(key: string){\r\n    let url = this.util.getProcDefKeyWebApi();\r\n    if (key) {\r\n      url += `/${key}`;\r\n      this.http.get(url).subscribe((re: any) => {\r\n        this.callActivitySubProcess.calledElementName = re.name;\r\n      });\r\n    }\r\n  }\r\n  private getFlowForm(id: string) {\r\n    let url = this.util.getFlowFormWebApi();\r\n    if (id) {\r\n      url += `/${id}`;\r\n      this.http.get(url).subscribe((re: any) => {\r\n        this.callActivitySubProcess.calledBizDefName = re.name;\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\n\r\nexport class CallActivitySubProcessConverter implements TypeConverter {\r\n  constructor() { }\r\n\r\n  convertTo(data: any): string {\r\n    if (data && (data.calledBizDefKey || data.calledElement)) {\r\n      return 'ï¼å·²è®¾ç½®ï¼';\r\n    }\r\n    return 'ï¼æªè®¾ç½®ï¼';\r\n  }\r\n}\r\n","export class FormFormat {\r\n    id: string;\r\n    code: string;\r\n    name: string;\r\n    bizCategory: string;\r\n    formUrl: string;\r\n    urlType: string;\r\n    formatType: string;\r\n    status: number;\r\n    urlParameters: Array<FormatParameter>;\r\n    formButtons: Array<FormButton>;\r\n    formFields: Array<FormFieldData>;\r\n}\r\n\r\nexport class FormFieldData {\r\n    data: FormField;\r\n    expanded: boolean;\r\n    leaf: boolean;\r\n    children: Array<FormFieldData>;\r\n}\r\n\r\nexport class FormatParameter {\r\n    code: string;\r\n    name: string;\r\n    value: string;\r\n}\r\n\r\nexport class FormButton {\r\n    id: string;\r\n    buttonId: string;\r\n    buttonName: string;\r\n    buttonState: string;\r\n    description: string;\r\n    sortOrder: number;\r\n    formFormatId: string;\r\n}\r\n\r\nexport class FormField {\r\n    id: string;\r\n    fieldId: string;\r\n    fieldName: string;\r\n    fieldState: string;\r\n    description: string;\r\n    sortOrder: number;\r\n    formFormatId: string;\r\n}\r\n","import { ProcessDeUtil } from '../../../domain/process-de-util';\r\nimport { FormMethodConfig } from './form-method-config';\r\n\r\nexport class FormFormatConfig {\r\n    constructor() {\r\n        this.id = ProcessDeUtil.createNM();\r\n        this.formMethodConfigs = new Array();\r\n    }\r\n    id: string;\r\n    code: string;\r\n    name: string;\r\n    formFormatId: string;\r\n    description: string;\r\n    formButtonConfigs: Array<FormButtonConfig>;\r\n    formFieldConfigs: Array<FormFieldConfig>;\r\n    formMethodConfigs: Array<FormMethodConfig>;\r\n}\r\n\r\nexport class FormButtonConfig {\r\n    buttonId: string;\r\n    buttonState: string;\r\n}\r\n\r\nexport class FormFieldConfig {\r\n    fieldId: string;\r\n    fieldState: string;\r\n}\r\n","import { ProcessDeUtil } from '../../../domain/process-de-util';\r\n\r\nexport const workFlowActions: any[] = [\r\n    { text: 'æ­£å', value: 'Forward' },\r\n    { text: 'åå', value: 'Backward' },\r\n    { text: 'ç»æ­¢', value: 'Abort' }\r\n];\r\nexport const executionTime = [\r\n    { text: 'æµè½¬å', value: 'Pre' },\r\n    { text: 'æµè½¬å', value: 'Post' }\r\n];\r\n\r\nexport class FormMethodConfig {\r\n    constructor() {\r\n        this.id = ProcessDeUtil.createNM();\r\n        this.workFlowAction = workFlowActions[0].value;\r\n        this.executionTime = executionTime[0].value;\r\n        this.sortOrder = 1;\r\n    }\r\n    id: string;\r\n    formFormatConfigId: string;\r\n    workFlowAction: string;\r\n    method: string;\r\n    executionTime: string;\r\n    sortOrder: number;\r\n    methodParameters: Array<any>;\r\n}\r\n\r\n\r\n","import { Component, OnInit, Input, ViewChild, TemplateRef, ComponentFactoryResolver, Injector } from '@angular/core';\r\nimport { EditorTypes } from '@farris/ui-datagrid-editors';\r\nimport { workFlowActions, executionTime, FormMethodConfig } from '../entities/form-method-config';\r\nimport { HttpService } from '@ecp-caf/caf-common';\r\nimport { FormMethod } from '../entities/form-method';\r\nimport { DialogComponent } from '@farris/ui-dialog';\r\nimport { DatagridComponent } from '@farris/ui-datagrid';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { BsModalService } from '@farris/ui-modal';\r\nimport { ParameterSettingComponent } from '../parameter-setting/parameter-setting.component';\r\n\r\n@Component({\r\n  selector: 'lib-form-operation-config',\r\n  templateUrl: './form-operation-config.component.html',\r\n  styleUrls: ['./form-operation-config.component.scss']\r\n})\r\nexport class FormOperationConfigComponent implements OnInit {\r\n  private _fromFormatId: string;\r\n  @Input()\r\n  set formFormatId(v: string) {\r\n    this._fromFormatId = v;\r\n    if (this._fromFormatId) {\r\n      this.getFormMethods();\r\n    }\r\n  }\r\n  get formFormatId() {\r\n    return this._fromFormatId;\r\n  }\r\n\r\n  @Input() formFormatConfigId: string;\r\n  @Input() operations = new Array<FormMethodConfig>();\r\n\r\n  @ViewChild('methodsDialog') methodsDialog: DialogComponent;\r\n  @ViewChild('grid') grid: DatagridComponent;\r\n  @ViewChild('methodGrid') methodGrid: DatagridComponent;\r\n  @ViewChild('cell') cell: TemplateRef<any>;\r\n\r\n  cols = new Array();\r\n\r\n  methodCols = [\r\n    { field: 'method', width: 100, title: 'æ¹æ³æ è¯', showTips: true },\r\n    { field: 'methodName', width: 80, title: 'æ¹æ³åç§°', showTips: true },\r\n    { field: 'description', width: 120, title: 'æè¿°', showTips: true }\r\n  ];\r\n  e: any;\r\n\r\n  formMethods = new Array<FormMethod>();\r\n  state: 'add' | 'edit' = 'add';\r\n\r\n  constructor(\r\n    private http: HttpService,\r\n    private message: MessagerService,\r\n    private resolver: ComponentFactoryResolver,\r\n    private injector: Injector,\r\n    private modalService: BsModalService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.cols = [\r\n    {\r\n      field: 'workFlowAction', width: 80, title: 'æµè½¬æ¹å',\r\n      formatter: {\r\n        type: 'enum',\r\n        options: { valueField: 'value', textField: 'text', data: workFlowActions }\r\n      },\r\n      editor: {\r\n        type: EditorTypes.COMBOLIST,\r\n        options: { valueField: 'value', textField: 'text', data: workFlowActions, idField: 'value', panelHeight: 'auto', enableClear: false }\r\n      },\r\n      validators: [\r\n        { type: 'required', messager: 'å¿å¡«' }\r\n      ]\r\n    }, {\r\n      field: 'method', width: 100, title: 'è¡¨åæä½',\r\n      editor: {\r\n        type: 'input-group',\r\n        options: {\r\n          groupText: '<i class=\"f-icon f-icon-lookup\"></i>',\r\n          editable: false,\r\n          clickHandle: (e) => {\r\n            e.formControl.setValue(e.instance.value ? e.instance.value : '');\r\n            this.e = e;\r\n            this.methodsDialog.show();\r\n            this.state = 'edit';\r\n          },\r\n          clear: (e) => {\r\n            console.log('clear', e);\r\n          }\r\n        }\r\n      },\r\n      formatter: (v, d, i) => {\r\n        if (v) {\r\n          const m = this.formMethods.find(item => item.method === v);\r\n          if (m) {\r\n            return m.methodName;\r\n          } else {\r\n            return '';\r\n          }\r\n        } else {\r\n          return '';\r\n        }\r\n      },\r\n      validators: [\r\n        { type: 'required', messager: 'å¿å¡«' }\r\n      ]\r\n    },\r\n    {\r\n      field: 'executionTime', width: 80, title: 'æ§è¡æ¶æº',\r\n      formatter: {\r\n        type: 'enum',\r\n        options: { valueField: 'value', textField: 'text', data: executionTime }\r\n      },\r\n      editor: {\r\n        type: EditorTypes.COMBOLIST,\r\n        options: { valueField: 'value', textField: 'text', data: executionTime, idField: 'value', panelHeight: 'auto', enableClear: false }\r\n      },\r\n      validators: [\r\n        { type: 'required', messager: 'å¿å¡«' }\r\n      ]\r\n    },\r\n    {\r\n      field: 'sortOrder', width: 60, title: 'æ§è¡é¡ºåº',\r\n      editor: {\r\n        type: EditorTypes.NUMBERBOX, options: {\r\n        }\r\n      },\r\n      formatter: { type: 'number', options: { precision: 0 } },\r\n      validators: [\r\n        { type: 'required', messager: 'å¿å¡«' }\r\n      ]\r\n    },\r\n    {\r\n      field: 'methodParameters', width: 80, title: 'åæ°',\r\n      template: this.cell,\r\n      halign: 'center', align: 'center'\r\n    }\r\n  ];\r\n  }\r\n\r\n  add() {\r\n    this.methodsDialog.show();\r\n    this.state = 'add';\r\n  }\r\n\r\n  delete() {\r\n    if (this.grid.selectedRow) {\r\n      this.operations = this.operations.filter(o => o.id !== this.grid.selectedRow.id);\r\n    } else {\r\n      this.message.info('å°æªéä¸­è¡¨åæä½éç½®ï¼');\r\n    }\r\n  }\r\n\r\n  editParam(ctx: any) {\r\n    const compFactory = this.resolver.resolveComponentFactory(ParameterSettingComponent);\r\n    const compRef = compFactory.create(this.injector);\r\n    compRef.instance.mode = 'usual';\r\n    compRef.instance.showFormType = false;\r\n    if (ctx.rowData.methodParameters) {\r\n      compRef.instance.parameters = [...ctx.rowData.methodParameters.map(p => Object.assign({}, p))];\r\n    } else {\r\n      compRef.instance.parameters = new Array();\r\n    }\r\n\r\n    const modalConfig = {\r\n      title: 'åæ°è®¾ç½®',\r\n      width: 620,\r\n      height: 400,\r\n      showButtons: true,\r\n      buttons: compRef.instance.modalFooter\r\n    };\r\n    const dialog = this.modalService.show(compRef, modalConfig);\r\n\r\n    compRef.instance.submit.subscribe(re => {\r\n      for (const o of this.operations) {\r\n        if (o.id === ctx.rowData.id) {\r\n          o.methodParameters = re.parameters;\r\n        }\r\n      }\r\n      dialog.close();\r\n    });\r\n    compRef.instance.cancel.subscribe(re => {\r\n      dialog.close();\r\n    });\r\n  }\r\n\r\n  methodSelected() {\r\n    if (this.methodGrid.selectedRow) {\r\n      const data = this.methodGrid.selectedRow.data;\r\n      if (this.state === 'edit') {\r\n        if (this.e) {\r\n          this.e.formControl.setValue(data.method);\r\n          this.e.instance.cd.detectChanges();\r\n          for (const o of this.operations) {\r\n            if (o.id === data.id) {\r\n              o.method = data.method;\r\n              o.sortOrder = data.sortOrder;\r\n              o.methodParameters = data.methodParameters;\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        const operation = new FormMethodConfig();\r\n        operation.formFormatConfigId = this.formFormatConfigId;\r\n        operation.method = data.method;\r\n        operation.sortOrder = data.sortOrder;\r\n        operation.methodParameters = data.methodParameters;\r\n        this.operations = this.operations.concat([operation]);\r\n      }\r\n      this.methodsDialog.close();\r\n    } else {\r\n      this.message.info('å°æªéä¸­è¡¨åæä½ï¼');\r\n    }\r\n  }\r\n\r\n  validator(): boolean {\r\n    this.grid.endCellEdit();\r\n    for (const o of this.operations) {\r\n      if (!o.method) {\r\n        this.message.info('å°æªéæ©è¡¨åæä½ï¼');\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  private getFormMethods() {\r\n    if (this.formFormatId) {\r\n      const url = `/api/runtime/wf/v1.0/formOperation?formFormatId=${this.formFormatId}`;\r\n      this.http.get(url).subscribe((re: any) => {\r\n        if (re) {\r\n          this.formMethods = re;\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n}\r\n","import { Component, OnInit, TemplateRef, ViewChild, HostBinding, Input } from '@angular/core';\r\nimport { HttpService } from '@ecp-caf/caf-common';\r\nimport { IFormFormatConfigComponent } from \"@gsp-wf/biz-process-api\";\r\nimport { Observable, of, forkJoin, Subject } from 'rxjs';\r\nimport { FormFormat, FormFieldData, FormField } from '../entities/form-format';\r\nimport { FormFormatConfig, FormButtonConfig, FormFieldConfig } from '../entities/form-format-config';\r\nimport { DatagridComponent } from '@farris/ui-datagrid';\r\nimport { ProcessDeUtil } from '../../../domain/process-de-util';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { NotifyService } from '@farris/ui-notify';\r\nimport { PickedResult, ServerSideToken, LookupGridComponent } from '@farris/ui-lookup';\r\nimport { switchMap, catchError } from 'rxjs/operators';\r\nimport { FormOperationConfigComponent } from '../form-operation-config/form-operation-config.component';\r\nimport { TreeTableComponent } from '@farris/ui-treetable';\r\n\r\n@Component({\r\n  selector: 'lib-form-format-config',\r\n  templateUrl: './form-format-config.component.html',\r\n  styleUrls: ['./form-format-config.component.scss']\r\n})\r\nexport class FormFormatConfigComponent implements OnInit, IFormFormatConfigComponent {\r\n\r\n  @ViewChild('btnEnable') btnEnable: TemplateRef<any>;\r\n  @ViewChild('btnDisabled') btnDisabled: TemplateRef<any>;\r\n  @ViewChild('btnHidden') btnHidden: TemplateRef<any>;\r\n  @ViewChild('fieldEditable') fieldEditable: TemplateRef<any>;\r\n  @ViewChild('fieldReadonly') fieldReadonly: TemplateRef<any>;\r\n  @ViewChild('fieldHidden') fieldHidden: TemplateRef<any>;\r\n  @ViewChild('fieldRequired') fieldRequired: TemplateRef<any>;\r\n\r\n  @ViewChild('btnGrid') btnGrid: DatagridComponent;\r\n  @ViewChild('fieldTree') fieldTree: TreeTableComponent;\r\n  @ViewChild(FormOperationConfigComponent) operationConfig: FormOperationConfigComponent;\r\n\r\n  config: FormFormatConfig = new FormFormatConfig();\r\n  formFormat: FormFormat = new FormFormat();\r\n\r\n  state: 'new' | 'edit' = 'edit';\r\n\r\n  @Input() showMethodTab = true;\r\n\r\n  private _formFormatId: string;\r\n  set formFormatId(v: string) {\r\n    this._formFormatId = v;\r\n    this.config.formFormatId = v;\r\n  }\r\n\r\n  get formFormatId() {\r\n    return this._formFormatId;\r\n  }\r\n\r\n  private _formatConfigId: string;\r\n  set formatConfigId(v: string) {\r\n    this._formatConfigId = v;\r\n    if (!v) {\r\n      this.state = 'new';\r\n    }\r\n  }\r\n  get formatConfigId() {\r\n    return this._formatConfigId;\r\n  }\r\n\r\n  buttonCols = [];\r\n  buttonConfigs = new Array();\r\n\r\n  fieldCols = [];\r\n  fieldConfigs = new Array();\r\n\r\n  formatFieldList: Array<FormField> = new Array();\r\n\r\n  constructor(\r\n    private http: HttpService,\r\n    private message: MessagerService,\r\n    private notify: NotifyService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.buttonCols = [\r\n      { field: 'buttonName', width: 100, title: 'æé®åç§°' },\r\n      // { field: 'buttonId', width: 100, title: 'æé®æ è¯' },\r\n      {\r\n        title: 'æ¯å¦å¯ç¨',\r\n        field: 'enable',\r\n        width: 80,\r\n        template: this.btnEnable,\r\n        align: 'center',\r\n        hAlign: 'center'\r\n      },\r\n      {\r\n        title: 'æ¯å¦ç¦ç¨',\r\n        field: 'disabled',\r\n        width: 80,\r\n        template: this.btnDisabled,\r\n        align: 'center',\r\n        hAlign: 'center'\r\n      },\r\n      {\r\n        title: 'æ¯å¦éè',\r\n        field: 'hidden',\r\n        width: 80,\r\n        template: this.btnHidden,\r\n        align: 'center',\r\n        hAlign: 'center'\r\n      }];\r\n    this.fieldCols = [\r\n      { field: 'fieldName', width: 100, title: 'å­æ®µåç§°' },\r\n      // { field: 'fieldId', width: 100, title: 'å­æ®µæ è¯' },\r\n      {\r\n        title: 'æ¯å¦å¯å',\r\n        field: 'editable',\r\n        width: 80,\r\n        template: this.fieldEditable,\r\n        align: 'center',\r\n        hAlign: 'center'\r\n      },\r\n      {\r\n        title: 'æ¯å¦åªè¯»',\r\n        field: 'readonly',\r\n        width: 80,\r\n        template: this.fieldReadonly,\r\n        align: 'center',\r\n        hAlign: 'center'\r\n      },\r\n      {\r\n        title: 'æ¯å¦éè',\r\n        field: 'hidden',\r\n        width: 80,\r\n        template: this.fieldHidden,\r\n        align: 'center',\r\n        hAlign: 'center'\r\n      },\r\n      {\r\n        title: 'æ¯å¦å¿å¡«',\r\n        field: 'required',\r\n        width: 80,\r\n        template: this.fieldRequired,\r\n        align: 'center',\r\n        hAlign: 'center'\r\n      }];\r\n    this.getConfig();\r\n  }\r\n\r\n  submit(): Observable<any> {\r\n    if (this.validator()) {\r\n      this.setBtnAndFieldConfigs();\r\n      if (this.state === 'new' &&\r\n        this.config.formButtonConfigs.length === 0 &&\r\n        this.config.formFieldConfigs.length === 0 &&\r\n        this.operationConfig.operations.length === 0\r\n      ) {\r\n        return of({ result: true, configId: null });\r\n      } else {\r\n        return this.saveConfig(this.config).pipe(\r\n          switchMap(re => {\r\n            return of({ result: true, configId: this.config.id });\r\n          }),\r\n          catchError(re => {\r\n            this.message.error('ä¿å­éç½®å¤±è´¥ï¼è¯·èç³»ç®¡çåæ¥çåå ï¼');\r\n            return of({ result: false, configId: this.config.id });\r\n          })\r\n        );\r\n      }\r\n    } else {\r\n      return of({ result: false, configId: null });\r\n    }\r\n  }\r\n\r\n  btnConfigChange(bool: boolean, field: string, id: string) {\r\n    if (bool) {\r\n      for (const b of this.buttonConfigs) {\r\n        if (b.id === id) {\r\n          switch (field) {\r\n            case 'enable':\r\n              b.enable = bool;\r\n              b.disabled = false;\r\n              b.hidden = false;\r\n              break;\r\n            case 'disabled':\r\n              b.disabled = bool;\r\n              b.enable = false;\r\n              b.hidden = false;\r\n              break;\r\n            case 'hidden':\r\n              b.hidden = bool;\r\n              b.disabled = false;\r\n              b.enable = false;\r\n              break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  btnBatchOperate(operation: string) {\r\n    const checkeds = this.btnGrid.checkedRows;\r\n    if (checkeds && checkeds.length > 0) {\r\n      for (const c of checkeds) {\r\n        this.btnConfigChange(true, operation, c.id);\r\n      }\r\n    }\r\n  }\r\n\r\n  btnBatchReset() {\r\n    const checkeds = this.btnGrid.checkedRows;\r\n    if (checkeds && checkeds.length > 0) {\r\n      for (const c of checkeds) {\r\n        const button = this.formFormat.formButtons.find(b => b.id === c.id);\r\n        for (const b of this.buttonConfigs) {\r\n          if (b.id === c.id) {\r\n            b.enable = button.buttonState === 'Enable' ? true : false;\r\n            b.disabled = button.buttonState === 'Disabled' ? true : false;\r\n            b.hidden = button.buttonState === 'Hidden' ? true : false;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  fieldConfigChange(bool: boolean, field: string, id: string) {\r\n    if (bool) {\r\n      this.fieldSwitchChange(this.fieldConfigs, field, id);\r\n    }\r\n  }\r\n  private fieldSwitchChange(fieldConfigs: Array<any>, field: string, id: string) {\r\n    if (fieldConfigs.length > 0) {\r\n      for (const f of fieldConfigs) {\r\n        if (f.data.id === id) {\r\n          switch (field) {\r\n            case 'editable':\r\n              f.data.editable = true;\r\n              f.data.readonly = false;\r\n              f.data.hidden = false;\r\n              f.data.required = false;\r\n              break;\r\n            case 'readonly':\r\n              f.data.editable = false;\r\n              f.data.readonly = true;\r\n              f.data.hidden = false;\r\n              f.data.required = false;\r\n              break;\r\n            case 'hidden':\r\n              f.data.editable = false;\r\n              f.data.readonly = false;\r\n              f.data.hidden = true;\r\n              f.data.required = false;\r\n              break;\r\n            case 'required':\r\n              f.data.editable = false;\r\n              f.data.readonly = false;\r\n              f.data.hidden = false;\r\n              f.data.required = true;\r\n              break;\r\n          }\r\n          return;\r\n        } else {\r\n          if (f.children && f.children.length > 0) {\r\n            this.fieldSwitchChange(f.children, field, id);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  fieldBatchOperate(operation: string) {\r\n    const checkeds = this.fieldTree.checkeds;\r\n    if (checkeds && checkeds.length > 0) {\r\n      for (const c of checkeds) {\r\n        this.fieldConfigChange(true, operation, c.data.id);\r\n      }\r\n    }\r\n  }\r\n\r\n  fieldBatchReset() {\r\n    const checkeds = this.fieldTree.checkeds;\r\n    if (checkeds && checkeds.length > 0) {\r\n      for (const c of checkeds) {\r\n        const field = this.formatFieldList.find(f => f.id === c.data.id);\r\n        this.resetFieldConfig(this.fieldConfigs, c.data.id, field);\r\n      }\r\n    }\r\n  }\r\n  resetFieldConfig(fieldConfigs: Array<any>, id: string, field: FormField) {\r\n    if (fieldConfigs.length > 0) {\r\n      for (const f of fieldConfigs) {\r\n        if (f.leaf === true && f.data.id === id) {\r\n          f.data.editable = field.fieldState === 'Editable' ? true : false;\r\n          f.data.readonly = field.fieldState === 'Readonly' ? true : false;\r\n          f.data.hidden = field.fieldState === 'Hidden' ? true : false;\r\n          f.data.required = field.fieldState === 'Required' ? true : false;\r\n          return;\r\n        } else {\r\n          if (f.children && f.children.length > 0) {\r\n            this.resetFieldConfig(f.children, id, field);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  private validator(): boolean {\r\n    return this.operationConfig.validator();\r\n  }\r\n\r\n\r\n  private setBtnAndFieldConfigs() {\r\n    this.config.formButtonConfigs = new Array<FormButtonConfig>();\r\n    for (const btn of this.buttonConfigs) {\r\n      const button = this.formFormat.formButtons.find(b => b.buttonId === btn.buttonId);\r\n      const btnConfig = new FormButtonConfig();\r\n      btnConfig.buttonId = btn.buttonId;\r\n      if (btn.enable) {\r\n        btnConfig.buttonState = 'Enable';\r\n      } else if (btn.disabled) {\r\n        btnConfig.buttonState = 'Disabled';\r\n      } else if (btn.hidden) {\r\n        btnConfig.buttonState = 'Hidden';\r\n      } else {\r\n        continue;\r\n      }\r\n      if (!button.buttonState && btnConfig.buttonState) {\r\n        this.config.formButtonConfigs.push(btnConfig);\r\n      }\r\n      if (button.buttonState && button.buttonState !== btnConfig.buttonState) {\r\n        this.config.formButtonConfigs.push(btnConfig);\r\n      }\r\n    }\r\n    this.config.formFieldConfigs = new Array<FormFieldConfig>();\r\n    this.getFieldConfigs(this.fieldConfigs);\r\n\r\n    this.config.formMethodConfigs = this.operationConfig.operations || new Array();\r\n  }\r\n\r\n  private getFieldConfigs(fieldConfigs: Array<any>) {\r\n    if (fieldConfigs && fieldConfigs.length > 0) {\r\n      for (const f of fieldConfigs) {\r\n        if (f.children && f.children.length > 0) {\r\n          this.getFieldConfigs(f.children);\r\n        }\r\n        if (f.leaf === false) {\r\n          continue;\r\n        }\r\n        const field = this.formatFieldList.find(fd => fd.fieldId === f.data.fieldId);\r\n        const fieldConfig = new FormFieldConfig();\r\n        fieldConfig.fieldId = f.data.fieldId;\r\n        if (f.data.editable) {\r\n          fieldConfig.fieldState = 'Editable';\r\n        } else if (f.data.readonly) {\r\n          fieldConfig.fieldState = 'Readonly';\r\n        } else if (f.data.hidden) {\r\n          fieldConfig.fieldState = 'Hidden';\r\n        } else if (f.data.required) {\r\n          fieldConfig.fieldState = 'Required';\r\n        } else {\r\n          continue;\r\n        }\r\n\r\n        if (!field.fieldState && fieldConfig.fieldState) {\r\n          this.config.formFieldConfigs.push(fieldConfig);\r\n        }\r\n\r\n        if (field.fieldState && field.fieldState !== fieldConfig.fieldState) {\r\n          this.config.formFieldConfigs.push(fieldConfig);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  private getConfig() {\r\n    if (this.formFormatId) {\r\n      forkJoin(this.getFormFormat(), this.getFormFormatConfig()).subscribe((re: any[]) => {\r\n        const formFormat = re[0] as FormFormat;\r\n        if (formFormat) {\r\n          this.formFormat = this.convertFormFormat(formFormat);\r\n        }\r\n        const config = re[1] as FormFormatConfig;\r\n        if (config) {\r\n          this.config = config;\r\n        }\r\n        if (this.formFormat.formButtons) {\r\n          this.buttonConfigs = this.formFormat.formButtons.map(b => Object.assign({}, b, {\r\n            enable: b.buttonState === 'Enable' ? true : false,\r\n            disabled: b.buttonState === 'Disabled' ? true : false,\r\n            hidden: b.buttonState === 'Hidden' ? true : false\r\n          }));\r\n          let btnConfigs = new Array<FormButtonConfig>();\r\n          if (config && config.formButtonConfigs) {\r\n            btnConfigs = config.formButtonConfigs;\r\n          }\r\n          for (const b of btnConfigs) {\r\n            for (const btn of this.buttonConfigs) {\r\n              if (btn.buttonId === b.buttonId) {\r\n                switch (b.buttonState) {\r\n                  case 'Enable':\r\n                    btn.enable = true;\r\n                    btn.disabled = false;\r\n                    btn.hidden = false;\r\n                    break;\r\n                  case 'Disabled':\r\n                    btn.enable = false;\r\n                    btn.disabled = true;\r\n                    btn.hidden = false;\r\n                    break;\r\n                  case 'Hidden':\r\n                    btn.enable = false;\r\n                    btn.disabled = false;\r\n                    btn.hidden = true;\r\n                    break;\r\n                }\r\n                break;\r\n              }\r\n            }\r\n          }\r\n        }\r\n        if (this.formFormat.formFields) {\r\n          this.fieldConfigs = [...this.formFormat.formFields];\r\n          this.orgFieldConfigs(this.fieldConfigs);\r\n          let configs = new Array<FormFieldConfig>();\r\n          if (config && config.formFieldConfigs) {\r\n            configs = config.formFieldConfigs;\r\n          }\r\n          for (const f of configs) {\r\n            this.setFieldConfig(this.fieldConfigs, f);\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  private orgFieldConfigs(formFields: Array<FormFieldData>) {\r\n    if (formFields.length > 0) {\r\n      for (const d of formFields) {\r\n        d.data = Object.assign({}, d.data, {\r\n          editable: d.data.fieldState === 'Editable' ? true : false,\r\n          readonly: d.data.fieldState === 'Readonly' ? true : false,\r\n          hidden: d.data.fieldState === 'Hidden' ? true : false,\r\n          required: d.data.fieldState === 'Required' ? true : false\r\n        });\r\n        if (d.children && d.children) {\r\n          this.orgFieldConfigs(d.children);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  private setFieldConfig(fieldConfigs: Array<any>, config: FormFieldConfig) {\r\n    if (fieldConfigs.length > 0) {\r\n      for (const f of fieldConfigs) {\r\n        if (f.data.fieldId === config.fieldId) {\r\n          switch (config.fieldState) {\r\n            case 'Editable':\r\n              f.data.editable = true;\r\n              f.data.readonly = false;\r\n              f.data.hidden = false;\r\n              f.data.required = false;\r\n              break;\r\n            case 'Readonly':\r\n              f.data.editable = false;\r\n              f.data.readonly = true;\r\n              f.data.hidden = false;\r\n              f.data.required = false;\r\n              break;\r\n            case 'Hidden':\r\n              f.data.editable = false;\r\n              f.data.readonly = false;\r\n              f.data.hidden = true;\r\n              f.data.required = false;\r\n              break;\r\n            case 'Required':\r\n              f.data.editable = false;\r\n              f.data.readonly = false;\r\n              f.data.hidden = false;\r\n              f.data.required = true;\r\n              break;\r\n          }\r\n          return;\r\n        } else {\r\n          if (f.children && f.children.length > 0) {\r\n            this.setFieldConfig(f.children, config);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  private saveConfig(config: FormFormatConfig): Observable<any> {\r\n    const url = '/api/runtime/wf/v1.0/formFormatConfig';\r\n    return this.http.post(url, config);\r\n  }\r\n\r\n  private getFormFormat(): Observable<any> {\r\n    if (this.formFormatId) {\r\n      let url = `/api/runtime/wf/v1.0/formFormat/${this.formFormatId}`;\r\n      url = encodeURI(url);\r\n      return this.http.get(url);\r\n    } else {\r\n      return of(null);\r\n    }\r\n  }\r\n\r\n  private getFormFormatConfig(): Observable<any> {\r\n    if (this.formatConfigId) {\r\n      let url = `/api/runtime/wf/v1.0/formFormatConfig/${this.formatConfigId}`;\r\n      url = encodeURI(url);\r\n      return this.http.get(url);\r\n    } else {\r\n      return of(null);\r\n    }\r\n  }\r\n\r\n  private convertFormFormat(formFormat: FormFormat): FormFormat {\r\n    if (!formFormat.status) {\r\n      formFormat.status = 0;\r\n    }\r\n    this.convertformFields(formFormat.formFields);\r\n    this.getFormatFieldList(formFormat.formFields, this.formatFieldList);\r\n    return formFormat;\r\n  }\r\n\r\n  private convertformFields(formFields: Array<FormFieldData>) {\r\n    if (formFields.length > 0) {\r\n      for (const d of formFields) {\r\n        if (typeof(d.leaf) !== 'boolean' && (d.leaf == null || d.leaf === undefined)) {\r\n          d.leaf = true;\r\n        }\r\n        if (d.children && d.children) {\r\n          this.orgFieldConfigs(d.children);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  private getFormatFieldList(formFields: Array<FormFieldData>, array: Array<FormField>) {\r\n    if (formFields.length > 0) {\r\n      for (const d of formFields) {\r\n        array.push(d.data);\r\n        if (d.children && d.children) {\r\n          this.getFormatFieldList(d.children, array);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  private getFormatField(formFields: Array<FormFieldData>, fieldId: string): FormFieldData {\r\n    for (const f of formFields) {\r\n      if (f.data.fieldId === fieldId) {\r\n        return f;\r\n      }\r\n      if (f.children && f.children.length > 0) {\r\n        return this.getFormatField(f.children, fieldId);\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n}\r\n","import { Component, OnInit, ViewChild, ViewContainerRef, Injector, ComponentFactoryResolver, ComponentRef, TemplateRef, Input, SimpleChanges, OnChanges } from '@angular/core';\r\nimport { IFormFormatConfigComponent } from '@gsp-wf/biz-process-api';\r\nimport { FormFormatConfigComponent } from '../form-format-config/form-format-config.component';\r\nimport { HttpService } from '@ecp-caf/caf-common';\r\nimport { Observable, Subject } from 'rxjs';\r\nimport { FormFormatType } from '../entities/form-format-type';\r\n\r\ndeclare var System: any;\r\n\r\n@Component({\r\n  selector: 'lib-form-config-container',\r\n  templateUrl: './form-config-container.component.html',\r\n  styleUrls: ['./form-config-container.component.css']\r\n})\r\nexport class FormConfigContainerComponent implements OnInit, OnChanges {\r\n\r\n  private componentRef: ComponentRef<any>;\r\n  @ViewChild('container', { read: ViewContainerRef }) container: ViewContainerRef;\r\n  @ViewChild('iconSelectFooter') modalFooter: TemplateRef<any>;\r\n\r\n  @Input()\r\n  formFormatId: string;\r\n  @Input()\r\n  formatConfigId: string;\r\n\r\n  @Input() showMethodTab = true;\r\n  constructor(\r\n    private injector: Injector,\r\n    private cfr: ComponentFactoryResolver,\r\n    private http: HttpService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    // this.showComponentRef();\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    if (changes['formFormatId'] && changes['formFormatId'].currentValue) {\r\n      this.showComponentRef();\r\n    } else { // åè½èåæ¶\r\n      this.componentRef = this.createWFComponentRef();\r\n      this.componentRef.instance.formFormatId = null;\r\n      this.componentRef.instance.formatConfigId = null;\r\n      this.componentRef.instance.showMethodTab = this.showMethodTab;\r\n      this.container.clear();\r\n      this.container.insert(this.componentRef.hostView);\r\n    }\r\n  }\r\n\r\n  submit(): Observable<any> {\r\n    return this.componentRef.instance.submit();\r\n  }\r\n\r\n  private showComponentRef() {\r\n    this.componentRef = this.createWFComponentRef();\r\n    this.componentRef.instance.formFormatId = this.formFormatId;\r\n    this.componentRef.instance.formatConfigId = this.formatConfigId;\r\n    this.componentRef.instance.showMethodTab = this.showMethodTab;\r\n    this.container.clear();\r\n    this.container.insert(this.componentRef.hostView);\r\n    // if (this.formFormatId) {\r\n      // this.getFormFormatType().subscribe((re: FormFormatType) => {\r\n        // if (re.code === 'wf') {\r\n\r\n        // } else {\r\n        //   System.import(re.customImpl)\r\n        //     .then((moduleFactorys: any) => {\r\n        //       const moduleFactory: any = Object.values(moduleFactorys)[0];\r\n        //       const moduleRef = moduleFactory.create(this.injector);\r\n        //       this.componentRef = moduleRef.instance.createCustomComponentRef(this.injector);\r\n        //       this.componentRef.instance.formFormatId = this.formFormatId;\r\n        //       this.componentRef.instance.formatConfigId = this.formatConfigId;\r\n        //       this.componentRef.instance.showMethodTab = this.showMethodTab;\r\n        //       this.container.clear();\r\n        //       this.container.insert(this.componentRef.hostView);\r\n        //     });\r\n        // }\r\n      // });\r\n    // }\r\n  }\r\n\r\n  private createWFComponentRef(): ComponentRef<IFormFormatConfigComponent> {\r\n    const cmpF = this.cfr.resolveComponentFactory(FormFormatConfigComponent);\r\n    const cmpR = cmpF.create(this.injector);\r\n    return cmpR;\r\n  }\r\n\r\n  private getFormFormatType(): Observable<any> {\r\n    if (this.formFormatId) {\r\n      const url = `/api/runtime/wf/v1.0/formFormatType/formFormat?formFormat=${this.formFormatId}`;\r\n      return this.http.get(url);\r\n    }\r\n  }\r\n\r\n}\r\n","export enum VOTemplateType {\r\n    /**æ¥èªäºBEçVO */\r\n    FromBE,\r\n    /**æ¥èªäºVOçVOï¼å³VOä»£ç */\r\n    FromVO,\r\n    /**æ²¡ææ¥æºçVOï¼å³èæVO */\r\n    FromNone,\r\n}","import { GSPBusinessEntity } from '@gsp-bef/gsp-be-metadata';\r\nimport { GSPViewModel } from '@gsp-bef/gsp-vo-metadata';\r\nimport { CommonModelUtil } from '@gsp-bef/gsp-cm-metadata';\r\nimport { VOTemplateType } from '../entity/VOTemplateType';\r\n\r\nexport class CommonModelTypeHelper {\r\n    public static getCommonModelType(cm: GSPBusinessEntity | GSPViewModel): string {\r\n        let type = CommonModelUtil.GetGeneratedConfigID(cm as any);\r\n        type = \"com.\" + type;\r\n        return type;\r\n    }\r\n\r\n    /**\r\n     * å¤æ­VOæ¥æºäºBEè¿æ¯VOæèå®å¨èæ\r\n     * @param gspViewModel\r\n     */\r\n    public static judgeVoTemplateType(gspViewModel: GSPViewModel): VOTemplateType {\r\n        if (gspViewModel.IsVirtual === true) {\r\n            if (gspViewModel.TemplateVoInfo && gspViewModel.TemplateVoInfo.TemplateVoId != null) {\r\n                return VOTemplateType.FromVO;\r\n            } else {\r\n                return VOTemplateType.FromNone\r\n            }\r\n        } else {\r\n            return VOTemplateType.FromBE;\r\n        }\r\n    }\r\n}\r\n","import { Component, OnInit, Output, EventEmitter, ViewChild, Input, Injector, ComponentFactoryResolver, Inject, LOCALE_ID } from '@angular/core';\r\nimport { ComboListComponent } from '@farris/ui-combo-list';\r\nimport { ProcessListHelpService } from '../../services/process-list-help.service';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { NotifyService } from '@farris/ui-notify';\r\nimport { GSPMetadataRTService, SelectMetadataRTComponent, Metadata4RefDto } from '@gsp-lcm/metadatart-selector';\r\nimport { BsModalService } from '@farris/ui-modal';\r\nimport { GSPViewModel } from '@gsp-bef/gsp-vo-metadata';\r\nimport { IRtProcQueryParam } from '../../entity/IProcQueryParam';\r\nimport { TextValue } from '@edp-bif/common-api';\r\nimport { BifMetadataType } from '../../entity/BifMetadataType';\r\nimport { CommonModelTypeHelper } from '../../utils/common-model-type-helper';\r\nimport { VOTemplateType } from '../../entity/VOTemplateType';\r\nimport { AifLocalePipe } from '../../../aif-ui-common/pipe/aif-ui-common-locale.pipe';\r\n\r\n@Component({\r\n  selector: 'app-proc-help-query-solution',\r\n  templateUrl: './proc-help-query-solution.component.html',\r\n  styleUrls: ['./proc-help-query-solution.component.css'],\r\n})\r\nexport class ProcHelpQuerySolutionComponent implements OnInit {\r\n  readonly groupIcon = '<i class=\"f-icon f-icon-lookup\"></i>';\r\n\r\n  @Input(\"queryParam\")\r\n  queryParam: IRtProcQueryParam;\r\n  @Output(\"queryParamChange\")\r\n  queryParamChange = new EventEmitter<IRtProcQueryParam>();\r\n\r\n  @Output(\"onSearch\")\r\n  onSearchEmitter = new EventEmitter();\r\n\r\n  //æµç¨ç±»åéç½®\r\n  @ViewChild(\"comboProcessType\")\r\n  comboProcessType: ComboListComponent;\r\n  comboProcessTypeIdField = \"value\";\r\n  comboProcessTypeValueField = \"value\";\r\n  comboProcessTypeTextField = \"text\";\r\n  comboProcessTypeData = [\r\n    { value: \"\", text: this.localePipe.transform(\"all\") },\r\n    { value: BifMetadataType.BifCreationProcess, text: this.localePipe.transform(\"creation\") },\r\n    { value: BifMetadataType.BifWritebackProcess, text: this.localePipe.transform(\"writeback\") },\r\n  ];\r\n\r\n  //å¯ç¨ç¶æéç½®\r\n  @ViewChild(\"comboEnabledState\")\r\n  comboEnabledState: ComboListComponent;\r\n  comboEnabledStateIdField = \"value\";\r\n  comboEnabledStateValueField = \"value\";\r\n  comboEnabledStateTextField = \"text\";\r\n  comboEnabledStateData = [\r\n    { value: \"\", text: this.localePipe.transform(\"all\") },\r\n    { value: \"true\", text: this.localePipe.transform(\"enabled\") },\r\n    { value: \"false\", text: this.localePipe.transform(\"disabled\") },\r\n  ];\r\n\r\n  //ç³»ç»é¢ç½®éç½®\r\n  @ViewChild(\"comboSysInit\")\r\n  comboSysInit: ComboListComponent;\r\n  comboSysInitIdField = \"value\";\r\n  comboSysInitValueField = \"value\";\r\n  comboSysInitTextField = \"text\";\r\n  comboSysInitData = [\r\n    { value: \"\", text: this.localePipe.transform(\"all\") },\r\n    { value: \"true\", text: this.localePipe.transform(\"yes\") },\r\n    { value: \"false\", text: this.localePipe.transform(\"no\") },\r\n  ];\r\n\r\n  constructor(\r\n    private procHelpService: ProcessListHelpService,\r\n    private messager: MessagerService,\r\n    private notify: NotifyService,\r\n    private metadataService: GSPMetadataRTService,\r\n    private modalService: BsModalService,\r\n    private injector: Injector,\r\n    private resolver: ComponentFactoryResolver,\r\n    private localePipe: AifLocalePipe,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  processNameChange(name: string) {\r\n    this.queryParam.filterArgs.name = new TextValue();\r\n    this.queryParam.filterArgs.name.hasValue = true;\r\n    this.queryParam.filterArgs.name.value = name;\r\n    this.queryParam.filterArgsExt.name = name;\r\n  }\r\n\r\n  processTypeChange({ selections }) {\r\n    const item = selections[0];\r\n    this.queryParam.filterArgs.billProcessType = new TextValue();\r\n    if (item != null) {\r\n      if (item.value != \"\") {\r\n        this.queryParam.filterArgs.billProcessType.hasValue = true;\r\n      }\r\n      this.queryParam.filterArgs.billProcessType.value = item.value;\r\n    }\r\n  }\r\n\r\n  enabledStateChange({ selections }) {\r\n    const item = selections[0];\r\n    this.queryParam.filterArgs.isEnabled = new TextValue();\r\n    if (item != null) {\r\n      if (item.value != \"\") {\r\n        this.queryParam.filterArgs.isEnabled.hasValue = true;\r\n      }\r\n      this.queryParam.filterArgs.isEnabled.value = String(item.value);\r\n    }\r\n  }\r\n\r\n  sysInitChange({ selections }) {\r\n    const item = selections[0];\r\n    this.queryParam.filterArgs.sysInit = new TextValue();\r\n    if (item != null) {\r\n      if (item.value != \"\") {\r\n        this.queryParam.filterArgs.sysInit.hasValue = true;\r\n      }\r\n      this.queryParam.filterArgs.sysInit.value = String(item.value);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * æå¼ä¸æ¸¸åæ®VOéæ©å¨\r\n   */\r\n  selectUpBill() {\r\n    const compFactory = this.resolver.resolveComponentFactory(SelectMetadataRTComponent);\r\n    const compRef = compFactory.create(this.injector);\r\n    compRef.instance.typeList = \"GSPViewModel\";\r\n\r\n    compRef.instance.selectedMetadata.subscribe(\r\n      (metadata4RefDto: Metadata4RefDto) => {\r\n        this.clearUpBill();\r\n        let upVODto = metadata4RefDto.metadata;\r\n        let upVO: GSPViewModel = JSON.parse(upVODto.content);\r\n\r\n        switch (CommonModelTypeHelper.judgeVoTemplateType(upVO)) {\r\n          //éä»£çVO\r\n          case VOTemplateType.FromBE:\r\n            {\r\n              this.queryParam.filterArgs.upBillVoId = new TextValue();\r\n              this.queryParam.filterArgs.upBillVoId.hasValue = true;\r\n              this.queryParam.filterArgs.upBillVoId.value = upVO.ID;\r\n              this.queryParam.filterArgsExt.upBillVoName = upVO.MainObject.Name;\r\n            }\r\n            break;\r\n          default:\r\n            this.notify.error(this.localePipe.transform(\"pleaseSelectNonVirtualVO\"));\r\n            break;\r\n        };\r\n      },\r\n      (err) => {\r\n        console.error(err);\r\n        //todo ç¡®å®å¼å¸¸ç»æ, ç®åéç¨å¼å®¹åå¼æ¹å¼\r\n        this.messager.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));\r\n        this.clearUpBill();\r\n      }\r\n    );\r\n\r\n    const modalConfig = {\r\n      title: this.localePipe.transform(\"billSelector\"),\r\n      width: 930,\r\n      height: 573,\r\n      showButtons: false\r\n    };\r\n    const dialog = this.modalService.show(compRef, modalConfig);\r\n    compRef.instance.closeModalEmitter.subscribe($event => dialog.close());\r\n  }\r\n\r\n  /**\r\n   * æå¼ä¸æ¸¸åæ®VOéæ©å¨\r\n   */\r\n  selectDownBill() {\r\n    const compFactory = this.resolver.resolveComponentFactory(SelectMetadataRTComponent);\r\n    const compRef = compFactory.create(this.injector);\r\n    compRef.instance.typeList = \"GSPViewModel\";\r\n\r\n    compRef.instance.selectedMetadata.subscribe(\r\n      (metadata4RefDto: Metadata4RefDto) => {\r\n        this.clearDownBill();\r\n        let downVODto = metadata4RefDto.metadata;\r\n        let downVO: GSPViewModel = JSON.parse(downVODto.content);\r\n\r\n        switch (CommonModelTypeHelper.judgeVoTemplateType(downVO)) {\r\n          //éä»£çVO\r\n          case VOTemplateType.FromBE:\r\n            {\r\n              this.queryParam.filterArgs.downBillVoId = new TextValue();\r\n              this.queryParam.filterArgs.downBillVoId.hasValue = true;\r\n              this.queryParam.filterArgs.downBillVoId.value = downVO.ID;\r\n              this.queryParam.filterArgsExt.downBillVoName = downVO.MainObject.Name;\r\n            }\r\n            break;\r\n          default:\r\n            this.notify.error(this.localePipe.transform(\"pleaseSelectNonVirtualVO\"));\r\n            break;\r\n        };\r\n      },\r\n      (err) => {\r\n        console.error(err);\r\n        //todo ç¡®å®å¼å¸¸ç»æ, ç®åéç¨å¼å®¹åå¼æ¹å¼\r\n        this.messager.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));\r\n        this.clearUpBill();\r\n      }\r\n    );\r\n\r\n    const modalConfig = {\r\n      title: this.localePipe.transform(\"billSelector\"),\r\n      width: 930,\r\n      height: 573,\r\n      showButtons: false\r\n    };\r\n    const dialog = this.modalService.show(compRef, modalConfig);\r\n    compRef.instance.closeModalEmitter.subscribe($event => dialog.close());\r\n  }\r\n\r\n  /**\r\n   * æ¸é¤æµç¨åç§°\r\n   */\r\n  clearProcessName() {\r\n    delete this.queryParam.filterArgs.name;\r\n    this.queryParam.filterArgsExt.name = null;\r\n  }\r\n\r\n  /**\r\n   * æ¸é¤éä¸­çæµç¨ç±»å\r\n   */\r\n  clearProcessType() {\r\n    delete this.queryParam.filterArgs.billProcessType;\r\n  }\r\n\r\n  /**\r\n   * æ¸é¤éä¸­çä¸æ¸¸åæ®ä¿¡æ¯\r\n   */\r\n  clearUpBill() {\r\n    delete this.queryParam.filterArgs.upBillVoId;\r\n    this.queryParam.filterArgsExt.upBillVoName = null;\r\n  }\r\n\r\n  /**\r\n   * æ¸é¤éä¸­çä¸æ¸¸åæ®ä¿¡æ¯\r\n   */\r\n  clearDownBill() {\r\n    delete this.queryParam.filterArgs.downBillVoId;\r\n    this.queryParam.filterArgsExt.downBillVoName = null;\r\n  }\r\n\r\n  /**\r\n   * æ¸é¤éä¸­çå¯ç¨ç¶æ\r\n   */\r\n  clearIsEnabled() {\r\n    delete this.queryParam.filterArgs.isEnabled;\r\n  }\r\n\r\n  /**\r\n   * æ¸é¤éä¸­çåå¸ç¶æ\r\n   */\r\n  clearIsPublished() {\r\n    // delete this.queryParam.filterArgs.isPublished;\r\n  }\r\n\r\n  /**\r\n   * æ¸é¤éä¸­çåå¸ç¶æ\r\n   */\r\n  clearSysInit() {\r\n    delete this.queryParam.filterArgs.sysInit;\r\n  }\r\n\r\n  /**\r\n   * ç¹å»ç­éæé®\r\n   */\r\n  clickBtnFilter() {\r\n    this.queryParam.filterArgs.pageIndex = 0;\r\n    this.onSearchEmitter.emit(this.queryParam);\r\n  }\r\n\r\n  /**\r\n   * ç¹å»æ¸ç©ºæé®\r\n   */\r\n  clickBtnClear() {\r\n    //éç½®ä¸ææ¡\r\n    this.comboProcessType.onClear();\r\n    this.comboProcessTypeData = this.comboProcessTypeData.map(item => ({ ...item }));\r\n\r\n    this.comboEnabledState.onClear();\r\n    this.comboEnabledStateData = this.comboEnabledStateData.map(item => ({ ...item }));\r\n\r\n    this.comboSysInit.onClear();\r\n    this.comboSysInitData = this.comboSysInitData.map(item => ({ ...item }));\r\n\r\n    // this.comboPublishedState.onClear();\r\n    // this.comboPublishedStateData = this.comboPublishedStateData.map(item => ({ ...item }));\r\n\r\n    //éç½®æ¥è¯¢åæ°\r\n    // const queryParam = {\r\n    //   filterArgs: new ProcessFilterConditionArgs(),\r\n    //   filterArgsExt: {}\r\n    // };\r\n    // queryParam.filterArgs.LoadFromJsonObject(this.queryParam.filterArgs.ConvertToJsonObject());\r\n    const queryParam = this.queryParam;\r\n    queryParam.filterArgsExt = {};\r\n\r\n    queryParam.filterArgs.isEnabled = null;\r\n    queryParam.filterArgs.billProcessType = null;\r\n    queryParam.filterArgs.upBillVoId = null;\r\n    queryParam.filterArgs.downBillVoId = null;\r\n    queryParam.filterArgs.sysInit = null;\r\n\r\n    // queryParam.filterArgs.pageSize = this.queryParam.filterArgs.pageSize;\r\n    // queryParam.filterArgs.pageIndex = this.queryParam.filterArgs.pageIndex;\r\n    // queryParam.filterArgs.orderByCode = this.queryParam.filterArgs.orderByCode;\r\n    // queryParam.filterArgs.orderByName = this.queryParam.filterArgs.orderByName;\r\n    // queryParam.filterArgs.OrderByLastModifiedTime = this.queryParam.filterArgs.OrderByLastModifiedTime;\r\n\r\n    this.queryParam = queryParam;\r\n  }\r\n}\r\n","import { NgModule } from \"@angular/core\";\r\nimport { AifLocalePipe } from \"./pipe/aif-ui-common-locale.pipe\";\r\n\r\n@NgModule({\r\n    declarations: [\r\n        AifLocalePipe\r\n    ],\r\n    exports: [\r\n        AifLocalePipe\r\n    ]\r\n})\r\nexport class AifUiCommonModule { }","export const BILL_TRACKER_LANG_RESOURCES = {\r\n    \"zh-CHS\": {\r\n        \"code\": \"ç¼å·\",\r\n        \"name\": \"åç§°\",\r\n        \"lastModifiedTime\": \"æåä¿®æ¹æ¶é´\",\r\n        \"upBill\": \"ä¸æ¸¸åæ®\",\r\n        \"downBill\": \"ä¸æ¸¸åæ®\",\r\n        \"processName\": \"æµç¨åç§°\",\r\n        \"processType\": \"æµç¨ç±»å\",\r\n        \"creation\": \"çå\",\r\n        \"writeback\": \"åå\",\r\n        \"enabledState\": \"å¯ç¨ç¶æ\",\r\n        \"sysInit\": \"ç³»ç»é¢ç½®\",\r\n        \"filter\": \"ç­é\",\r\n        \"all\": \"å¨é¨\",\r\n        \"enabled\": \"å·²å¯ç¨\",\r\n        \"disabled\": \"å·²ç¦ç¨\",\r\n        \"yes\": \"æ¯\",\r\n        \"no\": \"å¦\",\r\n        \"billSelector\": \"åæ®éæ©\",\r\n        \"querySolution\": \"ç­éæ¹æ¡\",\r\n        \"collapse\": \"æ¶èµ·\",\r\n        \"expand\": \"å±å¼\",\r\n        \"loading\": \"å è½½ä¸­\",\r\n        \"pleaseSelectNonVirtualVO\": \"è¯·éæ©éèæVO\",\r\n        \"pleaseSelectOneItemOnly\": \"è¯·éä¸­ä¸æ¡æ°æ®\",\r\n        \"isExtendProcess\": \"æ©å±æµç¨\",\r\n    },\r\n    \"en\": {\r\n        \"code\": \"Code\",\r\n        \"name\": \"Name\",\r\n        \"lastModifiedTime\": \"Last Modified Time\",\r\n        \"upBill\": \"Upstream Bill\",\r\n        \"downBill\": \"Downstream Bill\",\r\n        \"processName\": \"Process Name\",\r\n        \"processType\": \"Process Type\",\r\n        \"creation\": \"Creation\",\r\n        \"writeback\": \"Writeback\",\r\n        \"enabledState\": \"Enabled State\",\r\n        \"sysInit\": \"System Init\",\r\n        \"filter\": \"Filter\",\r\n        \"all\": \"All\",\r\n        \"enabled\": \"Enabled\",\r\n        \"disabled\": \"Disabled\",\r\n        \"yes\": \"Yes\",\r\n        \"no\": \"No\",\r\n        \"billSelector\": \"Bill Selector\",\r\n        \"querySolution\": \"Query Solution\",\r\n        \"collapse\": \"Collapse\",\r\n        \"expand\": \"Expand\",\r\n        \"loading\": \"Loading...\",\r\n        \"pleaseSelectNonVirtualVO\": \"Please select non-virtual VO\",\r\n        \"pleaseSelectOneItemOnly\": \"Please select only one item\",\r\n        \"isExtendProcess\": \"Extend Process\",\r\n    },\r\n    \"zh-CHT\": {\r\n        \"code\": \"ç·¨è\",\r\n        \"name\": \"åç¨±\",\r\n        \"lastModifiedTime\": \"æå¾ä¿®æ¹æé\",\r\n        \"upBill\": \"ä¸éå®æ\",\r\n        \"downBill\": \"ä¸éå®æ\",\r\n        \"processName\": \"æµç¨åç¨±\",\r\n        \"processType\": \"æµç¨é¡å\",\r\n        \"creation\": \"çå®\",\r\n        \"writeback\": \"åå¯«\",\r\n        \"enabledState\": \"åç¨çæ\",\r\n        \"sysInit\": \"ç³»çµ±é ç½®\",\r\n        \"filter\": \"ç¯©é¸\",\r\n        \"all\": \"å¨é¨\",\r\n        \"enabled\": \"å·²åç¨\",\r\n        \"disabled\": \"å·²ç¦ç¨\",\r\n        \"yes\": \"æ¯\",\r\n        \"no\": \"å¦\",\r\n        \"billSelector\": \"å®æé¸æ\",\r\n        \"querySolution\": \"ç¯©é¸æ¹æ¡\",\r\n        \"collapse\": \"æ¶èµ·\",\r\n        \"expand\": \"å±é\",\r\n        \"loading\": \"å è¼ä¸­\",\r\n        \"pleaseSelectNonVirtualVO\": \"è«é¸æéèæ¬VO\",\r\n        \"pleaseSelectOneItemOnly\": \"è«é¸ä¸­å£¹æ¢æ¸æ\",\r\n        \"isExtendProcess\": \"æ´å±æµç¨\",\r\n    }\r\n};","import { NgModule, LOCALE_ID } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { HttpClientModule } from '@angular/common/http';\r\n\r\nimport { CacheService, SessionService, HttpService } from '@ecp-caf/caf-common';\r\nimport { FrmEventBus, FuncsService, AppService, FrameworkService } from '@gsp-sys/rtf-common';\r\nimport { BusinessObjectRtService } from '@gsp-lcm/bo-rt-service';\r\nimport { MetadataRTSelectModule, GSPMetadataRTServiceModule, GSPMetadataRTService } from '@gsp-lcm/metadatart-selector';\r\nimport { FResponseToolbarModule } from '@farris/ui-response-toolbar';\r\nimport { ListFilterModule } from '@farris/ui-list-filter';\r\nimport { AngularDraggableModule } from '@farris/ui-draggable';\r\nimport { FarrisCommonModule } from '@farris/ui-common';\r\nimport { FarrisFormsModule } from '@farris/ui-forms';\r\nimport { FarrisSectionModule } from '@farris/ui-section';\r\nimport { DatagridEditorsModule, EditorProviders } from '@farris/ui-datagrid-editors';\r\nimport { DatagridModule } from '@farris/ui-datagrid';\r\nimport { ComboListModule } from '@farris/ui-combo-list';\r\nimport { InputGroupModule } from '@farris/ui-input-group';\r\nimport { FarrisDialogModule } from '@farris/ui-dialog';\r\nimport { SwitchModule } from '@farris/ui-switch';\r\nimport { FarrisTabsModule } from '@farris/ui-tabs';\r\nimport { LookupModule } from '@farris/ui-lookup';\r\nimport { LoadingModule, LoadingService } from '@farris/ui-loading';\r\nimport { NotifyModule } from '@farris/ui-notify';\r\nimport { MessagerModule } from '@farris/ui-messager';\r\nimport { ModalModule } from '@farris/ui-modal';\r\n\r\nimport { ProcessListHelpComponent } from './components/process-list-help/process-list-help.component';\r\nimport { ProcHelpQuerySolutionComponent } from './components/proc-help-query-solution/proc-help-query-solution.component';\r\nimport { ProcessListHelpService } from './services/process-list-help.service';\r\nimport { AifUiCommonModule } from '../aif-ui-common/aif-ui-common.module';\r\nimport { AifLocalePipe, BIF_LANG_RESOURCES } from '../aif-ui-common/pipe/aif-ui-common-locale.pipe';\r\nimport { BILL_TRACKER_LANG_RESOURCES } from './i18n/lang.resource';\r\n\r\n@NgModule({\r\n    imports: [\r\n        CommonModule,\r\n        HttpClientModule,\r\n        MetadataRTSelectModule,\r\n        GSPMetadataRTServiceModule.forRoot(\"\"),\r\n        FResponseToolbarModule,\r\n        ListFilterModule,\r\n        AngularDraggableModule,\r\n        FarrisCommonModule.forRoot(),\r\n        FarrisFormsModule,\r\n        FarrisSectionModule,\r\n        DatagridEditorsModule,\r\n        DatagridModule.forRoot([\r\n            ...EditorProviders\r\n        ]),\r\n        ComboListModule,\r\n        InputGroupModule,\r\n        FarrisDialogModule,\r\n        SwitchModule,\r\n        FarrisTabsModule,\r\n        LookupModule,\r\n        LoadingModule.forRoot({\r\n            message: 'Loading...'\r\n        }),\r\n        NotifyModule.forRoot(),\r\n        MessagerModule.forRoot({\r\n            width: 550,\r\n            height: 450\r\n        }),\r\n        ModalModule.forRoot(),\r\n        AifUiCommonModule,\r\n    ],\r\n    providers: [\r\n        CacheService,\r\n        SessionService,\r\n        HttpService,\r\n        FrmEventBus,\r\n        FuncsService,\r\n        LoadingService,\r\n        AppService,\r\n        FrameworkService,\r\n        { provide: LOCALE_ID, useValue: localStorage.getItem('languageCode') || 'zh-CHS' },\r\n        GSPMetadataRTService,\r\n        BusinessObjectRtService,\r\n        ProcessListHelpService,\r\n        { provide: BIF_LANG_RESOURCES, useValue: BILL_TRACKER_LANG_RESOURCES },\r\n        AifLocalePipe,\r\n    ],\r\n    declarations: [\r\n        ProcessListHelpComponent,\r\n        ProcHelpQuerySolutionComponent,\r\n    ],\r\n    entryComponents: [\r\n        ProcessListHelpComponent,\r\n        ProcHelpQuerySolutionComponent,\r\n    ]\r\n})\r\nexport class ProcessListHelpModule {\r\n\r\n}","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { ReactiveFormsModule, FormsModule } from '@angular/forms';\r\nimport { HttpClientModule } from '@angular/common/http';\r\n\r\nimport { WfProcessEditorComponent } from './wf-process-editor.component';\r\nimport { PerformerConfigService } from './views/performer/performer-config.service';\r\nimport { EntryFormEditorComponent } from './views/entryForm/entry-form-editor.component';\r\nimport { ExpressionEditorComponent } from './views/expressionEditor/expression-editor.component';\r\nimport { AssignPerformerConfigComponent } from './views/assign-performer-config/assign-performer-config.component';\r\nimport { SignRuleComponent } from './views/sign-rule/sign-rule.component';\r\nimport { ApprovelItemsComponent } from './views/approvel-items/approvel-items.component';\r\nimport { ExecuteFormsComponent } from './views/execute-forms/execute-forms.component';\r\nimport { JumpScopeComponent } from './views/jump-scope/jump-scope.component';\r\nimport { BackwardRuleComponent } from './views/backward-rule/backward-rule.component';\r\nimport { ActivityComponentComponent } from './views/activity-component/activity-component.component';\r\nimport { PerformerComponent } from './views/performer/performer.component';\r\nimport { PerformerEditComponent } from './views/performer/views/performer-edit/performer-edit.component';\r\nimport { UserPerformerComponent } from './views/performer/views/user-performer/user-performer.component';\r\nimport { ComponentPerformerComponent } from './views/performer/views/component-performer/component-performer.component';\r\nimport { PositionPerformerComponent } from './views/performer/views/position-performer/position-performer.component';\r\nimport { PerformerOptionsComponent } from './views/performer/views/performer-options/performer-options.component';\r\nimport { ReportingLineComponent } from './views/performer/views/reporting-line/reporting-line.component';\r\nimport { TitleExpressionComponent } from './views/title-expression/title-expression.component';\r\nimport { SaveAsEditComponent } from './views/save-as-edit/save-as-edit.component';\r\nimport { OrganizationPotentialOwnerComponent } from './views/organization-potential-owner/organization-potential-owner.component';\r\nimport { CustomizeActionComponent } from './views/customize-action/customize-action.component';\r\nimport { CustomizeActionListComponent } from './views/customize-action/views/customize-action-list/customize-action-list.component';\r\nimport { JumpScopePipe } from './views/jump-scope/jump-scope.pipe';\r\nimport { UsersNamePipe } from './views/performer/views/user-performer/users-name.pipe';\r\nimport { PROCESS_DESIGNER_APP_PROVIDERS, PROCESS_DESIGNER_DOMAIN_PROVIDERS, PROCESS_DESIGNER_PART_PROVIDERS } from './index';\r\n\r\nimport { SessionService, HttpService } from '@ecp-caf/caf-common';\r\nimport { ExpressionService, ExpressionModule } from '@gsp-svc/expression';\r\nimport { CommonComponentUiRTService, CommonComponentUiModule } from '@gsp-cmp/ccmp-ui';\r\nimport { SelectMetadataRTComponent, GSPMetadataRTServiceModule, MetadataRTSelectModule } from '@gsp-lcm/metadatart-selector';\r\nimport { SysManagerUIModule } from '@gsp-sys/sysmgr-ui';\r\nimport { RtfAppHelpModule } from '@gsp-sys/rtf-ui';\r\n\r\nimport { TreeTableModule } from '@farris/ui-treetable';\r\nimport { PropertyPanelModule } from '@farris/ui-property-panel';\r\nimport { DataTableModule } from '@farris/ui-datatable';\r\nimport { LayoutModule } from '@farris/ui-layout';\r\nimport { NotifyModule } from '@farris/ui-notify';\r\nimport { FarrisDialogModule } from '@farris/ui-dialog';\r\nimport { SplitterModule } from '@farris/ui-splitter';\r\nimport { InputGroupModule } from '@farris/ui-input-group';\r\nimport { LookupModule } from '@farris/ui-lookup';\r\nimport { FlexLayoutModule } from '@farris/ui-flex-layout';\r\nimport { FarrisPanelModule } from '@farris/ui-panel';\r\nimport { FarrisResponsiveModule } from '@farris/ui-responsive';\r\nimport { FarrisTabsModule } from '@farris/ui-tabs';\r\nimport { LoadingModule } from '@farris/ui-loading';\r\nimport { MessagerModule } from '@farris/ui-messager';\r\nimport { ModalModule } from '@farris/ui-modal';\r\nimport { PopoverModule } from '@farris/ui-popover';\r\nimport { PaginationModule } from '@farris/ui-pagination';\r\nimport { FarrisDropdownModule } from '@farris/ui-dropdown';\r\nimport { DatagridEditorsModule, EditorProviders } from '@farris/ui-datagrid-editors';\r\nimport { DatagridModule } from '@farris/ui-datagrid';\r\nimport { ComboListModule } from '@farris/ui-combo-list';\r\nimport { FarrisFormsModule } from '@farris/ui-forms';\r\nimport { SwitchModule } from '@farris/ui-switch';\r\nimport { WizardModule } from '@farris/ui-wizard';\r\nimport { FarrisSectionModule } from '@farris/ui-section';\r\nimport { PerfectScrollbarModule } from '@farris/ui-perfect-scrollbar';\r\nimport { ProcessDeUtil } from './domain/process-de-util';\r\nimport { CallActivitySubProcessComponent } from './views/call-activity-sub-process/call-activity-sub-process.component';\r\nimport { WfBizprocessLookupModule } from '@gsp-wf/wf-bizprocess-lookup';\r\nimport { TimeLimitControlComponent } from './views/time-limit-control/time-limit-control.component';\r\nimport { SendMessageOperationComponent } from './views/time-limit-control/send-message-operation/send-message-operation.component';\r\nimport { NumberSpinnerModule } from '@farris/ui-number-spinner';\r\nimport { EventDefinitionComponent } from './views/event-definition/event-definition.component';\r\nimport { AnonymousSetComponent } from './views/anonymous-set/anonymous-set.component';\r\nimport { ProcessVariablesComponent } from './views/process-variables/process-variables.component';\r\nimport { VariableSettingComponent } from './views/variable-setting/variable-setting.component';\r\nimport { ConstantEditComponent } from './views/variable-setting/views/constant-edit/constant-edit.component';\r\nimport { ComponentEditComponent } from './views/variable-setting/views/component-edit/component-edit.component';\r\nimport { MessageNoticeComponent } from './views/message-notice/message-notice.component';\r\nimport { MessageNoticeEditComponent } from './views/message-notice/message-notice-edit/message-notice-edit.component';\r\nimport { AddExecuteFormComponent } from './views/execute-forms/add-execute-form/add-execute-form.component';\r\nimport { FormFormatConfigComponent } from './views/execute-forms/form-format-config/form-format-config.component';\r\nimport { FormConfigContainerComponent } from './views/execute-forms/form-config-container/form-config-container.component';\r\nimport { FarrisButtonModule } from '@farris/ui-button';\r\nimport { ParameterSettingComponent } from './views/execute-forms/parameter-setting/parameter-setting.component';\r\nimport { FormOperationConfigComponent } from './views/execute-forms/form-operation-config/form-operation-config.component';\r\nimport { NoteComponent } from './views/note/note.component';\r\nimport { ApprovalPivotComponent } from './views/approval-pivot/approval-pivot.component';\r\nimport { WfReportDefHelpComponent } from './views/performer/views/reporting-line/service/wf-report-def-help.component';\r\nimport { WfReportDefHelpService } from './views/performer/views/reporting-line/service/wf-report-def-help.service';\r\nimport { UrgeHandleRuleComponent } from './views/urge-handle-rule/urge-handle-rule.component';\r\n\r\nimport { MatrixPerformerComponent } from './views/performer/views/matrix-performer/matrix-performer.component';\r\nimport { EnumListComponent } from './views/performer/views/matrix-performer/enum-list/enum-list.component';\r\nimport { AutoHandleOperationComponent } from './views/time-limit-control/auto-handle-operation/auto-handle-operation.component';\r\nimport { ProcessListHelpModule } from './aif-process-list-help/process-list-help.module';\r\nimport { ProcessListHelpComponent } from './aif-process-list-help/components/process-list-help/process-list-help.component';\r\nimport { ExtendPropertyComponent } from './views/extend-property/extend-property.component';\r\nimport { CallActivitySubProcess2Component } from './views/call-activity-sub-process2/call-activity-sub-process2.component';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    WfProcessEditorComponent,\r\n    EntryFormEditorComponent,\r\n    ExpressionEditorComponent,\r\n    AssignPerformerConfigComponent,\r\n    SignRuleComponent,\r\n    ApprovelItemsComponent,\r\n    ExecuteFormsComponent,\r\n    JumpScopeComponent,\r\n    BackwardRuleComponent,\r\n    JumpScopePipe,\r\n    ActivityComponentComponent,\r\n    PerformerComponent,\r\n    PerformerEditComponent,\r\n    UserPerformerComponent,\r\n    ComponentPerformerComponent,\r\n    PositionPerformerComponent,\r\n    PerformerOptionsComponent,\r\n    UsersNamePipe,\r\n    ReportingLineComponent,\r\n    TitleExpressionComponent,\r\n    SaveAsEditComponent,\r\n    OrganizationPotentialOwnerComponent,\r\n    CustomizeActionComponent,\r\n    CustomizeActionListComponent,\r\n    CallActivitySubProcessComponent,\r\n    TimeLimitControlComponent,\r\n    SendMessageOperationComponent,\r\n    EventDefinitionComponent,\r\n    AnonymousSetComponent,\r\n    ProcessVariablesComponent,\r\n    VariableSettingComponent,\r\n    ConstantEditComponent,\r\n    ComponentEditComponent,\r\n    MessageNoticeComponent,\r\n    MessageNoticeEditComponent,\r\n    AddExecuteFormComponent,\r\n    FormFormatConfigComponent,\r\n    FormConfigContainerComponent,\r\n    ParameterSettingComponent,\r\n    FormOperationConfigComponent,\r\n    NoteComponent,\r\n    ApprovalPivotComponent,\r\n    WfReportDefHelpComponent,\r\n    UrgeHandleRuleComponent,\r\n    NoteComponent,\r\n    MatrixPerformerComponent,\r\n    EnumListComponent,\r\n    AutoHandleOperationComponent,\r\n    ExtendPropertyComponent,\r\n    CallActivitySubProcess2Component,\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    ReactiveFormsModule,\r\n    FormsModule,\r\n    HttpClientModule,\r\n    SysManagerUIModule,\r\n    RtfAppHelpModule,\r\n    CommonComponentUiModule,\r\n    GSPMetadataRTServiceModule.forRoot(''),\r\n    MetadataRTSelectModule,\r\n    TreeTableModule,\r\n    DataTableModule,\r\n    LayoutModule,\r\n    NotifyModule,\r\n    FarrisDialogModule,\r\n    SplitterModule,\r\n    InputGroupModule,\r\n    LookupModule,\r\n    FlexLayoutModule,\r\n    FarrisPanelModule,\r\n    FarrisResponsiveModule,\r\n    ExpressionModule,\r\n    PropertyPanelModule,\r\n    FarrisTabsModule,\r\n    LoadingModule.forRoot({\r\n      message: 'å è½½ä¸­...'\r\n    }),\r\n    MessagerModule.forRoot({\r\n      width: 500\r\n    }),\r\n    ModalModule,\r\n    PopoverModule,\r\n    PaginationModule,\r\n    FarrisDropdownModule,\r\n    DatagridEditorsModule,\r\n    DatagridModule.forRoot([\r\n      ...EditorProviders\r\n    ]),\r\n    ComboListModule,\r\n    WizardModule,\r\n    FarrisFormsModule,\r\n    SwitchModule,\r\n    WfBizprocessLookupModule,\r\n    NumberSpinnerModule,\r\n    PerfectScrollbarModule,\r\n    FarrisSectionModule,\r\n    FarrisButtonModule,\r\n    ProcessListHelpModule,\r\n  ],\r\n  providers: [\r\n    SessionService,\r\n    HttpService,\r\n    ExpressionService,\r\n    CommonComponentUiRTService,\r\n    PROCESS_DESIGNER_APP_PROVIDERS,\r\n    PROCESS_DESIGNER_DOMAIN_PROVIDERS,\r\n    PROCESS_DESIGNER_PART_PROVIDERS,\r\n    PerformerConfigService,\r\n    ProcessDeUtil,\r\n    WfReportDefHelpService\r\n  ],\r\n  exports: [WfProcessEditorComponent],\r\n  entryComponents: [\r\n    EntryFormEditorComponent,\r\n    ExpressionEditorComponent,\r\n    AssignPerformerConfigComponent,\r\n    SignRuleComponent,\r\n    ApprovelItemsComponent,\r\n    ExecuteFormsComponent,\r\n    JumpScopeComponent,\r\n    BackwardRuleComponent,\r\n    ActivityComponentComponent,\r\n    SelectMetadataRTComponent,\r\n    PerformerComponent,\r\n    PerformerEditComponent,\r\n    UserPerformerComponent,\r\n    ComponentPerformerComponent,\r\n    PositionPerformerComponent,\r\n    PerformerOptionsComponent,\r\n    ReportingLineComponent,\r\n    TitleExpressionComponent,\r\n    SaveAsEditComponent,\r\n    OrganizationPotentialOwnerComponent,\r\n    CustomizeActionComponent,\r\n    CustomizeActionListComponent,\r\n    CallActivitySubProcessComponent,\r\n    TimeLimitControlComponent,\r\n    SendMessageOperationComponent,\r\n    EventDefinitionComponent,\r\n    AnonymousSetComponent,\r\n    ProcessVariablesComponent,\r\n    VariableSettingComponent,\r\n    ConstantEditComponent,\r\n    ComponentEditComponent,\r\n    MessageNoticeComponent,\r\n    MessageNoticeEditComponent,\r\n    AddExecuteFormComponent,\r\n    FormFormatConfigComponent,\r\n    FormConfigContainerComponent,\r\n    ParameterSettingComponent,\r\n    FormOperationConfigComponent,\r\n    NoteComponent,\r\n    ApprovalPivotComponent,\r\n    UrgeHandleRuleComponent,\r\n    NoteComponent,\r\n    MatrixPerformerComponent,\r\n    EnumListComponent,\r\n    AutoHandleOperationComponent,\r\n    ProcessListHelpComponent,\r\n    ExtendPropertyComponent,\r\n    CallActivitySubProcess2Component,\r\n  ],\r\n})\r\nexport class WfProcessEditorModule { }\r\n","import { ProcessOrganization } from './process-info';\r\n\r\nexport class RTProcessInfo {\r\n    rtProcDefId: string;\r\n    flowFormId: string;\r\n    /**\r\n     * æµç¨ç»ç»\r\n     */\r\n    procOrg?: ProcessOrganization;\r\n    /**\r\n     * è®¿é®çº§å«\r\n     */\r\n    accessLevel?: string;\r\n}\r\n"],"names":["Injectable","http","forkJoin","tslib_1.__values","HttpService","EventEmitter","Component","MessagerService","Output","Input","ViewChild","Subject","of","EditorTypes","SelectMetadataRTComponent","InjectedType","ExprEditMode","FormBuilder","ExpressionService","ComponentFactoryResolver","Injector","SessionService","BsModalService","CommonComponentUiRTService","HostBinding","map","ActualParameter","from","ServerSideToken","RtfAppHelpComponent","switchMap","ElementRef","ExpressioneditorComponent","ParameterFetchValueMode","NgZone","DatagridComponent","LookupGridComponent","tslib_1.__extends","FormGroup","FormControl","ReplaySubject","HttpClient","lookupConfig","SysFarrisLookupComponent","SysFarrisTreeHelpComponent","LookupDataService","VarEntity","BpmnModelJsonHelper","JsonConvertableImpl","AppService","FrameworkService","TextValue","InjectionToken","Pipe","Inject","LOCALE_ID","router","catchError","NotifyService","Router","ActivatedRoute","LoadingService","forms","DomSanitizer","ViewContainerRef","CommonModelUtil","GSPMetadataRTService","NgModule","CommonModule","HttpClientModule","MetadataRTSelectModule","GSPMetadataRTServiceModule","FResponseToolbarModule","ListFilterModule","AngularDraggableModule","FarrisCommonModule","FarrisFormsModule","FarrisSectionModule","DatagridEditorsModule","DatagridModule","EditorProviders","ComboListModule","InputGroupModule","FarrisDialogModule","SwitchModule","FarrisTabsModule","LookupModule","LoadingModule","NotifyModule","MessagerModule","ModalModule","CacheService","FrmEventBus","FuncsService","BusinessObjectRtService","ReactiveFormsModule","FormsModule","SysManagerUIModule","RtfAppHelpModule","CommonComponentUiModule","TreeTableModule","DataTableModule","LayoutModule","SplitterModule","FlexLayoutModule","FarrisPanelModule","FarrisResponsiveModule","ExpressionModule","PropertyPanelModule","PopoverModule","PaginationModule","FarrisDropdownModule","WizardModule","WfBizprocessLookupModule","NumberSpinnerModule","PerfectScrollbarModule","FarrisButtonModule"],"mappings":"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"}
