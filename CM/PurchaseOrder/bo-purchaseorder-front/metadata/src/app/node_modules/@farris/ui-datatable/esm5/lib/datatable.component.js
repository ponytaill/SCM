/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { InputGroupComponent } from '@farris/ui-input-group';
import { ChangeDetectorRef } from '@angular/core';
/*
 * @Author: 疯狂秀才(Lucas Huang)
 * @Date: 2019-07-10 11:44:49
 * @LastEditors: 疯狂秀才(Lucas Huang)
 * @LastEditTime: 2019-11-05 11:44:18
 * @QQ: 1055818239
 * @Version: v0.0.1
 */
import { Component, ViewChild, ElementRef, Input, ContentChild, TemplateRef, QueryList, ContentChildren, Output, EventEmitter, ViewEncapsulation, NgZone } from '@angular/core';
import { of, fromEvent } from 'rxjs';
import { PerfectScrollbarComponent } from '@farris/ui-perfect-scrollbar';
import { PaginationControlsComponent } from '@farris/ui-pagination';
import { IdService } from '@farris/ui-common';
import { deepCopy } from './datatable-column';
import { ColumnDirective } from './datatable-column.component';
import { DataTableService } from './datatable.service';
import { DataTableHeaderComponent } from './table/datatable-header.component';
import { delay } from 'rxjs/operators';
var DataTableComponent = /** @class */ (function () {
    function DataTableComponent(dataService, idService, el, cd, ngZone) {
        var _this = this;
        this.dataService = dataService;
        this.idService = idService;
        this.el = el;
        this.cd = cd;
        this.ngZone = ngZone;
        this.searchButtonText = '<i class="f-icon f-icon-search"></i>';
        this.keydownEnterEdit = false;
        this.allColumnsTitle = '所有列';
        // 数据表高度
        // 是否填充
        this.fill = false;
        // 默认分页
        this.pagination = true;
        this.pagerOnServer = true;
        this.pageSize = 10;
        this.pageIndex = 1;
        this.showPageInfo = true;
        this.showPageNumber = true;
        this.showPageList = true;
        this.pagerViewMode = 'default';
        /**
         * 显示表头
         */
        this.showHeader = true;
        this._pageList = [10, 20, 30, 50, 100];
        this.total = 0;
        // 可筛选
        this.showFilterBar = false;
        // table  数据
        this._data = [];
        this.remote = 'client';
        /**
         * 启用远端排序
         */
        this.remoteSort = true;
        /**
         * 允许多列排序
         */
        this.multiSort = false;
        // 多选  单选
        this.singleSelect = true;
        this.idField = 'id';
        // 显示鼠标悬停高亮
        this.hover = true;
        // 分页事件
        this.pageChanged = new EventEmitter();
        this.pageSizeChanged = new EventEmitter();
        this.search = new EventEmitter();
        this.columnSorted = new EventEmitter();
        this.rowDblClick = new EventEmitter();
        this.selectedRow = new EventEmitter();
        // 兼容
        this.selectRows = new EventEmitter();
        this.unSelectRow = new EventEmitter();
        this.cellClick = new EventEmitter();
        this.clearSearchValue = new EventEmitter();
        this.checkAll = new EventEmitter();
        this.sortChange = new EventEmitter();
        // 是否可拖拽  默认可以
        this.resizableColumns = true;
        /**
         * 针对同一条记录，单选时，多次单击后不取消选中。
         */
        this.keepSelect = true;
        // 是否有行模板
        this.hasRowTepml = false;
        // 设置拖拽停止器
        this.moveable = false;
        this.searchData = { field: '*', value: '' };
        // 事件订阅存储  便于销毁
        this.subscription = [];
        // 原数据
        this.filter = '';
        this.maxSize = 7;
        this.directionLinks = true;
        this.autoHide = false;
        this.responsive = true;
        this.paginationOptions = {
            id: 'Farris-DataTable-Pagination',
            itemsPerPage: this.pageSize,
            currentPage: this.pageIndex,
            pageList: this.pageList,
            totalItems: this.total,
            remote: this.pagerOnServer
        };
        this.labels = {
            previousLabel: ' ',
            nextLabel: ' ',
            screenReaderPaginationLabel: 'Pagination',
            screenReaderPageLabel: 'page',
            screenReaderCurrentLabel: "You're on page"
        };
        this._currentRowIndex = -1;
        this._currentRow = undefined;
        this.isCheckAll = (/**
         * @return {?}
         */
        function () {
            if (!_this.selections || !_this.selections.length) {
                return false;
            }
            if (!_this.data || !_this.data.length) {
                return false;
            }
            /** @type {?} */
            var total = 0;
            _this.selections.forEach((/**
             * @param {?} n
             * @return {?}
             */
            function (n) {
                if (_this.data.find((/**
                 * @param {?} d
                 * @return {?}
                 */
                function (d) { return d[_this.idField] === n[_this.idField]; }))) {
                    total += 1;
                }
            }));
            return _this.data.length === total;
        });
        this.scrollWidth = 0;
        this.mouseEnterOnPager = null;
        this.mouseLeaveOnPager = null;
        this.mouseWheelOnPager = null;
        this.pgScrollLeft = 0;
        this.trackByRows = (/**
         * @param {?} index
         * @param {?} row
         * @return {?}
         */
        function (index, row) {
            return row[_this.idField];
        });
        this.dataService.selectedRow.subscribe((/**
         * @param {?} e
         * @return {?}
         */
        function (e) {
            if (_this.singleSelect) {
                _this._currentRowIndex = e.rowIndex;
                _this._currentRow = e.rowData;
            }
            else {
                if (_this.selections) {
                    _this.dtHeader.isCheckAll = _this.isCheckAll();
                }
            }
        }));
        this.dataService.unSelectedRow.subscribe((/**
         * @param {?} e
         * @return {?}
         */
        function (e) {
            if (_this.singleSelect) {
                _this._currentRow = undefined;
                _this._currentRowIndex = -1;
            }
            else {
                _this.dtHeader.isCheckAll = false;
            }
        }));
    }
    Object.defineProperty(DataTableComponent.prototype, "pageList", {
        get: /**
         * @return {?}
         */
        function () {
            return this._pageList;
        },
        set: /**
         * @param {?} val
         * @return {?}
         */
        function (val) {
            this._pageList = val;
            if (this.pager) {
                this.pager.setPageList(val);
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DataTableComponent.prototype, "data", {
        get: /**
         * @return {?}
         */
        function () {
            return this._data;
        },
        set: /**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            this._data = data;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DataTableComponent.prototype, "selections", {
        get: /**
         * @return {?}
         */
        function () {
            return this.dtBody.selections;
        },
        set: /**
         * @param {?} v
         * @return {?}
         */
        function (v) {
            this.dtBody.selections = v ? v : {};
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DataTableComponent.prototype, "currentRowIndex", {
        get: /**
         * @return {?}
         */
        function () {
            return this._currentRowIndex;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DataTableComponent.prototype, "currentRow", {
        get: /**
         * @return {?}
         */
        function () {
            return this._currentRow;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    DataTableComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        setTimeout((/**
         * @return {?}
         */
        function () {
            _this.setBodyHeight();
            _this.ps = _this.perfectScrollbar.directiveRef.ps();
        }));
        if (!this.id) {
            this.id = "datatable_" + this.idService.generate();
        }
        this.paginationOptions.id = this.paginationOptions.id + this.id;
        this.copyData = deepCopy(this.data);
        if (!this.beforeSortColumn) {
            this.beforeSortColumn = (/**
             * @return {?}
             */
            function () { return of(true); });
        }
    };
    /**
     * @private
     * @return {?}
     */
    DataTableComponent.prototype.setBodyHeight = /**
     * @private
     * @return {?}
     */
    function () {
        this.tableHeight = this.height;
        if (this.showFilterBar) {
            this.tableHeight = this.height - 46;
        }
        if (this.showHeader) {
            this.scorllableBodyHeight = this.tableHeight - this.tableHeader.nativeElement.clientHeight;
        }
        if (this.pagination) {
            this.scorllableBodyHeight = this.scorllableBodyHeight - 50;
        }
        if (this.tablePager) {
            this.scrollWidth = this.tablePager.nativeElement.scrollWidth;
        }
        this.pgScrollLeft = 0;
        if (this.cd && !this.cd['destroyed']) {
            this.cd.detectChanges();
        }
    };
    /**
     * @return {?}
     */
    DataTableComponent.prototype.onClearSearchValue = /**
     * @return {?}
     */
    function () {
        this.searchData.value = '';
        this.cd.detectChanges();
        this.clearSearchValue.emit();
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    DataTableComponent.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        if (changes.height && !changes.height.isFirstChange()) {
            this.setBodyHeight();
        }
        if (changes.total && !changes.total.isFirstChange()) {
            this.paginationOptions.totalItems = changes.total.currentValue;
        }
        if (changes.pageSize) {
            this.paginationOptions.itemsPerPage = changes.pageSize.currentValue;
        }
        if (changes.pageIndex && !changes.pageIndex.isFirstChange()) {
            this.paginationOptions.currentPage = changes.pageIndex.currentValue;
        }
        if (changes.data && !changes.data.isFirstChange()) {
            /** @type {?} */
            var rows = changes.data.currentValue;
            this.updateCheckboxState(rows);
            this.paginationOptions = tslib_1.__assign({}, this.paginationOptions);
            this.dataService.loadSuccess.next(changes.data.currentValue);
        }
    };
    /**
     * @return {?}
     */
    DataTableComponent.prototype.ngAfterContentInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        // 支持列组件写入
        if (!this.columns) {
            if (this.columnsRef && this.columnsRef.length) {
                this.columns = this.columnsRef.map((/**
                 * @param {?} col
                 * @return {?}
                 */
                function (col) {
                    return {
                        width: col.width,
                        title: col.title,
                        field: col.field,
                        align: col.align,
                        fixed: col.fixed,
                        className: col.className,
                        multipleFilter: col.multipleFilter,
                        filter: col.filter,
                        media: col.media,
                        sortable: col.sortable,
                        edit: col.edit
                    };
                }));
            }
        }
        if (this.tablePager) {
            this.tablePager.nativeElement.addEventListener('mouseenter', this.mouseEnterOnPager = (/**
             * @return {?}
             */
            function () {
                _this.pgScrollbar.nativeElement.style.display = "block";
            }));
            this.tablePager.nativeElement.addEventListener('mouseleave', this.mouseLeaveOnPager = (/**
             * @return {?}
             */
            function () {
                _this.pgScrollbar.nativeElement.style.display = "none";
            }));
            this.tablePager.nativeElement.addEventListener('wheel', this.mouseWheelOnPager = (/**
             * @param {?} e
             * @return {?}
             */
            function (e) {
                /** @type {?} */
                var box = _this.tablePager.nativeElement;
                /** @type {?} */
                var sw = _this.scrollWidth;
                /** @type {?} */
                var ow = box.offsetWidth;
                if (sw > ow) {
                    /** @type {?} */
                    var right = sw - ow;
                    /** @type {?} */
                    var sl = Math.abs(_this.pgScrollLeft);
                    if (sl < right && e.deltaY > 0) {
                        e.preventDefault();
                        // this.pgScrollLeft = -(sl + 50);
                        _this.pgScrollbar.nativeElement.scrollLeft = sl + 50;
                    }
                    if (sl > 0 && e.deltaY < 0) {
                        e.preventDefault();
                        // this.pgScrollLeft = -(sl - 50);
                        _this.pgScrollbar.nativeElement.scrollLeft = sl - 50;
                    }
                }
            }));
        }
        if (this.pgScrollbar) {
            fromEvent(this.pgScrollbar.nativeElement, 'scroll').pipe(delay(50)).subscribe((/**
             * @param {?} e
             * @return {?}
             */
            function (e) {
                // console.log(e)
                _this.pgScrollLeft = -e.target.scrollLeft;
            }));
        }
    };
    /**
     * @return {?}
     */
    DataTableComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this.subscription.forEach((/**
         * @param {?} sub
         * @return {?}
         */
        function (sub) {
            sub.unsubscribe();
        }));
        this.subscription = [];
        this.pager = null;
        if (this.tablePager && this.tablePager.nativeElement) {
            this.tablePager.nativeElement.removeEventListener('mouseenter', this.mouseEnterOnPager);
            this.tablePager.nativeElement.removeEventListener('mouseleave', this.mouseLeaveOnPager);
            this.tablePager.nativeElement.removeEventListener('wheel', this.mouseWheelOnPager);
        }
    };
    /**
     * @return {?}
     */
    DataTableComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        // 获取表格容器  即表格
        this.datatableContainer = this.el.nativeElement.querySelector('.farris-datatable');
        // this.headerTr = this.tableHeader.nativeElement.querySelectorAll('tr');
    };
    /**
     * @param {?} rows
     * @return {?}
     */
    DataTableComponent.prototype.updateCheckboxState = /**
     * @param {?} rows
     * @return {?}
     */
    function (rows) {
        var _this = this;
        /** @type {?} */
        var updateCheckAllStatus = (/**
         * @param {?} f
         * @return {?}
         */
        function (f) {
            if (_this.showHeader && _this.dtHeader) {
                _this.dtHeader.isCheckAll = f;
            }
        });
        if (rows && rows.length) {
            if (this.selections) {
                /** @type {?} */
                var keys = Object.keys(this.dtBody._selections);
                if (keys.length) {
                    /** @type {?} */
                    var count_1 = 0;
                    /** @type {?} */
                    var ids_1 = rows.map((/**
                     * @param {?} row
                     * @return {?}
                     */
                    function (row) {
                        return row[_this.idField].toString();
                    }));
                    keys.forEach((/**
                     * @param {?} id
                     * @return {?}
                     */
                    function (id) {
                        if (ids_1.indexOf(id) > -1) {
                            count_1++;
                        }
                    }));
                    updateCheckAllStatus(ids_1.length === count_1);
                }
                else {
                    updateCheckAllStatus(false);
                }
            }
            else {
                updateCheckAllStatus(false);
            }
        }
        else {
            updateCheckAllStatus(false);
        }
    };
    /**
     * 获取表格容器的位置  距离左边视口和上边视口的距离  如果页面有滚动条  需要加上滚动条滚动的数值
     */
    /**
     * 获取表格容器的位置  距离左边视口和上边视口的距离  如果页面有滚动条  需要加上滚动条滚动的数值
     * @return {?}
     */
    DataTableComponent.prototype.getContainerOffset = /**
     * 获取表格容器的位置  距离左边视口和上边视口的距离  如果页面有滚动条  需要加上滚动条滚动的数值
     * @return {?}
     */
    function () {
        /** @type {?} */
        var rect = this.datatableContainer.getBoundingClientRect();
        return {
            left: rect.left + document.body.scrollLeft,
            top: rect.top + document.body.scrollTop,
            right: rect.right,
            bottom: rect.bottom,
        };
    };
    /**
     *  鼠标按下  开始记录拖拽线的位置  拖拽线到达当前鼠标位置
     * @param e 鼠标对象
     */
    /**
     *  鼠标按下  开始记录拖拽线的位置  拖拽线到达当前鼠标位置
     * @param {?} e 鼠标对象
     * @return {?}
     */
    DataTableComponent.prototype.beginDrag = /**
     *  鼠标按下  开始记录拖拽线的位置  拖拽线到达当前鼠标位置
     * @param {?} e 鼠标对象
     * @return {?}
     */
    function (e) {
        this.dragLineX = e.pageX;
        event.preventDefault();
    };
    /**
     * 鼠标移动 移动拖拽线位置变动
     * @param e 鼠标对象
     */
    /**
     * 鼠标移动 移动拖拽线位置变动
     * @param {?} e 鼠标对象
     * @return {?}
     */
    DataTableComponent.prototype.moveDrag = /**
     * 鼠标移动 移动拖拽线位置变动
     * @param {?} e 鼠标对象
     * @return {?}
     */
    function (e) {
        // 获取表格的左边距离
        /** @type {?} */
        var containerLeft = this.getContainerOffset().left;
        // 设置拖拽线的高度  即获取表头+表内容+表尾的高度  此表格结构包含了分页  因此要去掉分页的高度
        if (this.tablePager) {
            this.dragLine.nativeElement.style.height = this.datatableContainer.offsetHeight -
                this.tablePager.nativeElement.offsetHeight + 'px';
        }
        else {
            // const headerHeight = this.el.nativeElement.querySelector('.farris-table-header');
            // const bodyHeight = this.el.nativeElement.querySelector('.ps-content');
            this.dragLine.nativeElement.style.height = this.datatableContainer.offsetHeight + 'px';
        }
        // 设置拖拽线的高度 拖拽线相对于表格relative定位是absolute，因此是0
        this.dragLine.nativeElement.style.top = 0 + 'px';
        // 鼠标移动时，拖拽线相对于表格的位置
        this.dragLine.nativeElement.style.left = (e.pageX - containerLeft) + 'px';
        // 鼠标移动  设置拖拽线总是可见
        this.dragLine.nativeElement.style.display = 'block';
    };
    // 重新计算表格宽度
    /**
     * 鼠标抬起 重新计算单元格宽度
     * 鼠标对象
     */
    // 重新计算表格宽度
    /**
     * 鼠标抬起 重新计算单元格宽度
     * 鼠标对象
     * @param {?} e
     * @param {?} column
     * @return {?}
     */
    DataTableComponent.prototype.stopDrag = 
    // 重新计算表格宽度
    /**
     * 鼠标抬起 重新计算单元格宽度
     * 鼠标对象
     * @param {?} e
     * @param {?} column
     * @return {?}
     */
    function (e, column) {
        this.resizeColumn(e, column);
    };
    /**
     * @param {?} e
     * @param {?} column
     * @return {?}
     */
    DataTableComponent.prototype.resizeColumn = /**
     * @param {?} e
     * @param {?} column
     * @return {?}
     */
    function (e, column) {
        if (this.isCheckBox(column, 'dt-checkbox-cell')) {
            this.dragLine.nativeElement.style.display = 'none';
            return;
        }
        // 偏移量
        /** @type {?} */
        var delta = e.pageX - this.dragLineX;
        // 拖拽前列宽
        /** @type {?} */
        var columnWidth = column.offsetWidth;
        // 拖拽后列宽
        /** @type {?} */
        var newColumnWidth = columnWidth + delta;
        // 最小宽度
        /** @type {?} */
        var minWidth = column.style.minWidth || 30;
        // 新宽度大于或等于最小宽度时
        newColumnWidth = newColumnWidth > minWidth ? newColumnWidth : minWidth;
        // 重新设置宽度
        /** @type {?} */
        var colIndex = -1;
        /** @type {?} */
        var othersCol = [];
        /** @type {?} */
        var cols = this.tableHeader.nativeElement.querySelectorAll('th');
        // 父节点宽度
        /** @type {?} */
        var parentWidth = column.parentElement.offsetWidth;
        // 判断是不是有checkbox
        /** @type {?} */
        var firstElement = column.parentElement.firstElementChild;
        /** @type {?} */
        var checkBoxWidth = this.isCheckBox(firstElement, 'dt-checkbox-cell') ? firstElement.offsetWidth : 0;
        // 其他列宽度
        /** @type {?} */
        var othersWidth = parentWidth - columnWidth - checkBoxWidth;
        /** @type {?} */
        var newOthersWidth = parentWidth - newColumnWidth - checkBoxWidth;
        for (var i = 0; i < cols.length; i++) {
            if (cols[i] === column) {
                colIndex = i;
            }
            else {
                if (this.isCheckBox(cols[i], 'dt-checkbox-cell')) {
                    continue;
                }
                /** @type {?} */
                var rate = cols[i].offsetWidth / othersWidth;
                if (rate > 1) {
                    // console.log(cols[i]);
                }
                /** @type {?} */
                var colWidth = newOthersWidth * rate;
                if (newOthersWidth * rate > 15) {
                    colWidth = newOthersWidth * rate;
                }
                else {
                    colWidth = 15;
                    othersWidth = othersWidth - colWidth;
                    newOthersWidth = newOthersWidth - colWidth;
                    newColumnWidth = newColumnWidth - 15 + newOthersWidth * rate;
                }
                othersCol.push({ colIndex: i, colWidth: colWidth });
            }
        }
        this.resizeColGroup(this.dtHeader.el.nativeElement, colIndex, newColumnWidth, othersCol);
        this.resizeColGroup(this.dtBody.el.nativeElement, colIndex, newColumnWidth, othersCol);
        // 计算宽度完毕  设置拖拽线隐藏
        this.dragLine.nativeElement.style.display = 'none';
    };
    /**
     * @param {?} elements
     * @param {?} cName
     * @return {?}
     */
    DataTableComponent.prototype.isCheckBox = /**
     * @param {?} elements
     * @param {?} cName
     * @return {?}
     */
    function (elements, cName) {
        return !!elements.className.match(new RegExp('(\\s|^)' + cName + '(\\s|$)'));
    };
    /**
     * @param {?} table
     * @param {?} resizeColumnIndex
     * @param {?} newColumnWidth
     * @param {?} othersColumn
     * @return {?}
     */
    DataTableComponent.prototype.resizeColGroup = /**
     * @param {?} table
     * @param {?} resizeColumnIndex
     * @param {?} newColumnWidth
     * @param {?} othersColumn
     * @return {?}
     */
    function (table, resizeColumnIndex, newColumnWidth, othersColumn) {
        if (table) {
            // 此处要视不同的表格结构来确定 本组件中  header和body结构相同
            /** @type {?} */
            var colGroup = table.childNodes[0].children[0].nodeName === 'COLGROUP' ?
                table.childNodes[0].children[0] : null;
            if (colGroup) {
                /** @type {?} */
                var col = colGroup.children[resizeColumnIndex];
                col.style.width = newColumnWidth + 'px';
                for (var i = 0; i < othersColumn.length; i++) {
                    /** @type {?} */
                    var otherCol = colGroup.children[othersColumn[i].colIndex];
                    if (otherCol && othersColumn[i].colWidth) {
                        otherCol.style.width = othersColumn[i].colWidth + 'px';
                    }
                }
            }
            else {
                throw new Error('Scrollable tables require a colgroup to support resizable columns');
            }
        }
    };
    /**
     * @param {?} e
     * @return {?}
     */
    DataTableComponent.prototype.onScrollX = /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        // 横向滚动 非固定表头滚动
        /** @type {?} */
        var x = e.srcElement.scrollLeft;
        this.tableHeader.nativeElement.scrollTo(x, 0);
    };
    /**
     * 滚动条纵向滚动
     */
    /**
     * 滚动条纵向滚动
     * @param {?} e
     * @return {?}
     */
    DataTableComponent.prototype.onScrollY = /**
     * 滚动条纵向滚动
     * @param {?} e
     * @return {?}
     */
    function (e) {
        if (!this.hasFixed) {
            return;
        }
        /** @type {?} */
        var y = e.srcElement.scrollTop;
        this.dtLeftFixed.nativeElement.style.top = -y + 'px';
        this.dtRightFixed.nativeElement.style.top = -y + 'px';
    };
    /**
     * @param {?} page
     * @return {?}
     */
    DataTableComponent.prototype.onPageChange = /**
     * @param {?} page
     * @return {?}
     */
    function (page) {
        if (this.pageIndex !== page.pageIndex) {
            this.pageIndex = page.pageIndex;
            this.paginationOptions.currentPage = page.pageIndex;
            this.pageChanged.emit({ pageInfo: page, search: this.searchData, sortName: this.sortName, sortOrder: this.sortOrder });
        }
    };
    /**
     * @param {?} pageSize
     * @return {?}
     */
    DataTableComponent.prototype.onPageSizeChange = /**
     * @param {?} pageSize
     * @return {?}
     */
    function (pageSize) {
        var _this = this;
        if (this.pageSize !== pageSize && this.total) {
            this.paginationOptions.itemsPerPage = pageSize;
            this.pageSize = pageSize;
            /** @type {?} */
            var total = this.total;
            /** @type {?} */
            var pageLength = Math.floor(total / pageSize);
            if (total % pageSize > 0) {
                pageLength += 1;
            }
            if (pageLength && this.pageIndex > pageLength) {
                this.pageIndex = pageLength;
                this.paginationOptions.currentPage = this.pageIndex;
            }
            this.pageSizeChanged.emit({
                pageInfo: { pageIndex: this.pageIndex, pageSize: pageSize },
                search: this.searchData, sortName: this.sortName, sortOrder: this.sortOrder
            });
            setTimeout((/**
             * @return {?}
             */
            function () {
                if (_this.tablePager) {
                    _this.scrollWidth = _this.tablePager.nativeElement.scrollWidth;
                }
                _this.pgScrollLeft = 0;
            }));
        }
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    DataTableComponent.prototype.onSearch = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        if ($event.originalEvent) {
            $event.originalEvent.stopPropagation();
        }
        this.search.emit(this.searchData);
    };
    /**
     * @param {?} state
     * @return {?}
     */
    DataTableComponent.prototype.onCheckAll = /**
     * @param {?} state
     * @return {?}
     */
    function (state) {
        this.dataService.selectedAll.next(state);
        this.checkAll.emit(state);
    };
    /**
     * @param {?} e
     * @return {?}
     */
    DataTableComponent.prototype.onSelectedRow = /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        this.selectedRow.emit({ data: e.rowData, index: e.rowIndex });
        // 兼容
        this.selectRows.emit({ data: e.rowData, index: e.rowIndex });
    };
    // tslint:disable-next-line:no-shadowed-variable
    // tslint:disable-next-line:no-shadowed-variable
    /**
     * @param {?} size
     * @return {?}
     */
    DataTableComponent.prototype.resize = 
    // tslint:disable-next-line:no-shadowed-variable
    /**
     * @param {?} size
     * @return {?}
     */
    function (size) {
        this.width = size.width;
        this.height = size.height;
        this.setBodyHeight();
    };
    /**
     * @param {?} e
     * @return {?}
     */
    DataTableComponent.prototype.loadData = /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        this.data = e.data;
        if (this.pagination) {
            var _a = tslib_1.__assign({}, e), _b = _a.total, total = _b === void 0 ? 0 : _b, _c = _a.pageSize, pageSize = _c === void 0 ? 20 : _c, _d = _a.pageIndex, pageIndex = _d === void 0 ? 1 : _d;
            this.paginationOptions.totalItems = total;
            this.paginationOptions.itemsPerPage = pageSize;
            this.paginationOptions.currentPage = pageIndex;
            this.paginationOptions.pageList = this.pageList;
            this.paginationOptions = tslib_1.__assign({}, this.paginationOptions);
            this.total = total;
            this.pageSize = pageSize;
            this.pageIndex = pageIndex;
        }
        this.cd.detectChanges();
        this.updateCheckboxState(this.data);
    };
    /*
     */
    /*
         */
    /**
     * @param {?} e
     * @return {?}
     */
    DataTableComponent.prototype.onCellClick = /*
         */
    /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        this.cellClick.emit(e);
    };
    /* 添加行 */
    /* 添加行 */
    /**
     * @param {?} dataItem
     * @return {?}
     */
    DataTableComponent.prototype.addRows = /* 添加行 */
    /**
     * @param {?} dataItem
     * @return {?}
     */
    function (dataItem) {
        this.data = this.data.concat(dataItem);
    };
    /* 删除行 */
    /* 删除行 */
    /**
     * @return {?}
     */
    DataTableComponent.prototype.removeRows = /* 删除行 */
    /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var SELECTIONS = this.selections;
        if (this.singleSelect) {
            for (var i = 0; i < this.data.length; i++) {
                if (this.data[i] === SELECTIONS) {
                    this.data.splice(i, 1);
                }
            }
        }
        else {
            for (var i = 0; i < SELECTIONS.length; i++) {
                for (var j = 0; j < this.data.length; j++) {
                    if (SELECTIONS[i][this.idField] === this.data[j][this.idField]) {
                        this.data.splice(j, 1);
                    }
                }
            }
        }
    };
    /**
     * @param {?} rid
     * @param {?=} emit
     * @return {?}
     */
    DataTableComponent.prototype.checkRow = /**
     * @param {?} rid
     * @param {?=} emit
     * @return {?}
     */
    function (rid, emit) {
        var _this = this;
        if (emit === void 0) { emit = false; }
        var _a, _b;
        /** @type {?} */
        var rowIndex = -1;
        /** @type {?} */
        var rowData = this.data.find((/**
         * @param {?} n
         * @param {?} i
         * @return {?}
         */
        function (n, i) {
            if (n[_this.idField] == rid) {
                rowIndex = i;
                return true;
            }
        }));
        if (!rowData) {
            return;
        }
        if (!this.selections) {
            this.selections = (_a = {}, _a[rid] = rowData, _a);
        }
        else {
            this.selections = tslib_1.__assign((_b = {}, _b[rid] = rowData, _b), this.selections.reduce((/**
             * @param {?} r
             * @param {?} n
             * @return {?}
             */
            function (r, n) {
                r[n[_this.idField]] = n;
                return r;
            }), {}));
        }
        this.dataService.selectedRow.next({
            rowIndex: rowIndex,
            rowData: rowData
        });
        if (emit) {
            /** @type {?} */
            var p = { data: rowData, index: rowIndex };
            this.selectedRow.emit(p);
            // 兼容
            this.selectRows.emit(p);
        }
    };
    /**
     * @param {?} rid
     * @param {?=} emit
     * @return {?}
     */
    DataTableComponent.prototype.unCheckRow = /**
     * @param {?} rid
     * @param {?=} emit
     * @return {?}
     */
    function (rid, emit) {
        var _this = this;
        if (emit === void 0) { emit = false; }
        /** @type {?} */
        var rowIndex = -1;
        /** @type {?} */
        var rowData = this.data.find((/**
         * @param {?} n
         * @param {?} i
         * @return {?}
         */
        function (n, i) {
            if (n[_this.idField] == rid) {
                rowIndex = i;
                return true;
            }
        }));
        if (this.selections) {
            this.selections = this.selections.filter((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return n[_this.idField] != rid; })).reduce((/**
             * @param {?} r
             * @param {?} n
             * @return {?}
             */
            function (r, n) {
                r[n[_this.idField]] = n;
                return r;
            }), {});
            this.dataService.unSelectedRow.next({
                rowIndex: rowIndex,
                rowData: rowData
            });
            if (emit) {
                this.unSelectRow.emit({ data: rowData, index: rowIndex });
            }
        }
    };
    /**
     * @return {?}
     */
    DataTableComponent.prototype.clearSelections = /**
     * @return {?}
     */
    function () {
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    DataTableComponent.prototype.onKeydownEvent = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        var _this = this;
        if (!$event || !this.singleSelect || !this.data || !this.data.length) {
            return;
        }
        if (!['ArrowDown', 'ArrowUp'].includes($event.code)) {
            return;
        }
        /** @type {?} */
        var newIdx;
        if ($event.code === 'ArrowDown') {
            newIdx = this._currentRowIndex + 1;
            if (newIdx >= this.data.length) {
                newIdx = 0;
            }
        }
        else if ($event.code === 'ArrowUp') {
            if (this._currentRowIndex !== -1) {
                newIdx = this._currentRowIndex - 1;
            }
        }
        if (newIdx >= 0) {
            this.dtBody.selectedRow($event, newIdx, this.data[newIdx]);
        }
        setTimeout((/**
         * @return {?}
         */
        function () {
            // scroll intoView
            /** @type {?} */
            var trDoms = _this.dtBody.el.nativeElement.querySelectorAll('.ui-table-tbody tr');
            if (trDoms && trDoms[_this._currentRowIndex]) {
                trDoms[_this._currentRowIndex].scrollIntoView({ block: 'nearest' });
            }
        }));
    };
    DataTableComponent.decorators = [
        { type: Component, args: [{
                    selector: 'farrisui-datatable,farris-datatable',
                    template: "<div class=\"filter-row\" [style.width]=\"width + 'px'\" *ngIf=\"showFilterBar\">\r\n    <form style=\"display: flex; width: 100%;\">\r\n        <div class=\"search-fields\">\r\n            <select class=\"custom-select\" [(ngModel)]=\"searchData.field\" name=\"field\">\r\n                <option value=\"*\">{{allColumnsTitle}}</option>\r\n                <option *ngFor=\"let col of searchFields\" value=\"{{col.value}}\">{{ col.label }}</option>\r\n            </select>\r\n        </div>\r\n        <div class=\"search-text flex-fill\">\r\n            <input-group [groupText]=\"searchButtonText\" name=\"searchValue\" (clear)=\"onClearSearchValue()\" #inputgroup\r\n                [(ngModel)]=\"searchData.value\" (clickHandle)=\"onSearch($event)\" (enterHandle)=\"onSearch($event)\"\r\n                (keydownHandle)=\"onKeydownEvent($event)\"></input-group>\r\n        </div>\r\n    </form>\r\n</div>\r\n<div [ngStyle]=\"{'height': tableHeight +'px', 'width': width +'px' }\" class=\"farris-datatable-container\">\r\n    <div class=\"farris-datatable\">\r\n        <div #tableHeader class=\"farris-table-header\" [style.display]=\"showHeader? '': 'none'\">\r\n            <datatable-header #dtHeader [size]=\"size\" [columns]=\"columns\" [singleSelect]=\"singleSelect\" [data]=\"data\"\r\n                (loadData)=\"loadData\" (checkedAll)=\"onCheckAll($event)\">\r\n                <ng-content select=\"data-columns\"></ng-content>\r\n            </datatable-header>\r\n        </div>\r\n        <div #scorllableBody class=\"farris-table-scorllable-body\" [style.height]=\"scorllableBodyHeight + 'px'\">\r\n            <perfect-scrollbar #perfectScrollbar [config]=\"{}\" (psScrollX)=\"onScrollX($event)\" (psScrollY)=\"onScrollY($event)\">\r\n                <ng-container [style.display]=\"data && data.length ? 'block': 'none'\">\r\n                    <datatable-body #dtBody [rows]=\"pagination ? (data | paginate: paginationOptions) : data\" [size]=\"size\" [columns]=\"columns\" [striped]=\"striped\"\r\n                        [bordered]=\"bordered\" [rowClassName]=\"rowClassName\" [cellClassName]=\"cellClassName\" (cellClick)=\"onCellClick($event)\">\r\n                    </datatable-body>\r\n                </ng-container>\r\n                <!-- <ng-container *ngIf=\"!(data && data.length)\">\r\n                    <h1 style=\"text-align:center;color:#ccc; margin-top: 50px;\"></h1>\r\n                </ng-container> -->\r\n            </perfect-scrollbar>\r\n        </div>\r\n        <div class=\"farris-table-header\" *ngIf=\"footer\">\r\n            <ng-template [ngTemplateOutlet]=\"footer\">\r\n            </ng-template>\r\n        </div>\r\n        <div *ngIf=\"pagination\" #tablePager class=\"farris-table-pager\" >\r\n            <pagination-controls #pager [id]=\"paginationOptions.id\" [maxSize]=\"maxSize\" [directionLinks]=\"directionLinks\"\r\n                [autoHide]=\"autoHide\" [responsive]=\"responsive\" [previousLabel]=\"labels.previousLabel\" [nextLabel]=\"labels.nextLabel\"\r\n                [screenReaderPaginationLabel]=\"labels.screenReaderPaginationLabel\" [screenReaderPageLabel]=\"labels.screenReaderPageLabel\"\r\n                [screenReaderCurrentLabel]=\"labels.screenReaderCurrentLabel\" (pageChange)=\"onPageChange($event)\"\r\n                (pageSizeChange)=\"onPageSizeChange($event)\" [viewMode]=\"pagerViewMode\" [showGoToFirst]=\"true\" [showGoToLast]=\"true\"\r\n                [showPageInfo]=\"showPageInfo\" [showPageNumber]=\"showPageNumber\" [showPageList]=\"showPageList\" style=\"position: relative;\"\r\n                [style.left.px]=\"pgScrollLeft\">\r\n            </pagination-controls>\r\n            <div #pgScrollbar style=\"width: 100%;position: absolute;height: 8px;overflow-x: auto;z-index: 1111;\">\r\n                <div style=\"height: 1px;visibility: hidden;\" [style.width.px]=\"scrollWidth\"></div>\r\n            </div>\r\n        </div>\r\n        <div #dragLine *ngIf=\"resizableColumns\" class=\"column-resizer-helper\"></div>\r\n    </div>\r\n</div>",
                    encapsulation: ViewEncapsulation.None,
                    providers: [
                        DataTableService
                    ],
                    styles: [".farris-ui-datatable{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:100%;font-size:13px}.farris-ui-datatable table{border-collapse:collapse;width:100%;table-layout:fixed}.farris-ui-datatable .farris-table-footer,.farris-ui-datatable .farris-table-header{position:relative;min-height:34px}.farris-ui-datatable .farris-table-footer thead>tr>th,.farris-ui-datatable .farris-table-header thead>tr>th{padding:.571em .857em;border:1px solid #c8c8c8;font-weight:700;color:#333;background-color:#fff;border-top:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.farris-ui-datatable .farris-table-footer thead>tr>th .tt-checkbox,.farris-ui-datatable .farris-table-header thead>tr>th .tt-checkbox{margin-right:0;vertical-align:top;min-height:1rem}.farris-ui-datatable .farris-table-footer thead>tr>th:first-child,.farris-ui-datatable .farris-table-header thead>tr>th:first-child{border-left:0}.farris-ui-datatable .farris-table-footer thead>tr>th:last-child,.farris-ui-datatable .farris-table-header thead>tr>th:last-child{border-right:0}.farris-ui-datatable .farris-table-footer .checkbox-cell,.farris-ui-datatable .farris-table-header .checkbox-cell{width:40px}.farris-ui-datatable .farris-table-scorllable-body{overflow:hidden}.farris-ui-datatable .farris-table-scorllable-body .ui-table-tbody tr>td{background:inherit;border:1px solid #c8c8c8;padding:6px 10px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.farris-ui-datatable .farris-table-scorllable-body .ui-table-tbody .tt-checkbox{margin-right:0;vertical-align:top}.farris-ui-datatable .farris-table-scorllable-body .ui-table-tbody .checkbox-cell{width:40px}.farris-ui-datatable .farris-table-scorllable-body .row-hight-light{background-color:#b7d7ff;color:#000}.farris-ui-datatable .farris-table-scorllable-body .ui-table-tbody tr:not(.row-hight-light):hover{cursor:pointer;background-color:#e7f2ff}.farris-ui-datatable .farris-table-scorllable-body .ui-table-tbody>tr:first-child>td{border-top:0}.farris-ui-datatable .farris-table-scorllable-body table>.ui-table-tbody>tr>td:last-child{border-right:0}.farris-ui-datatable .farris-table-scorllable-body table>.ui-table-tbody>tr>td:first-child{border-left:0}.farris-ui-datatable .farris-table-pager{background-color:#f3f3f3;height:50px;min-height:50px;width:100%;border-top:1px solid #c8c8c8}.filter-row{display:-webkit-box;display:flex;margin:10px 0}.filter-row .search-fields{min-width:140px}.filter-row .search-text{-webkit-box-flex:1;flex:1;margin-left:10px}.filter-row .search-text .btn-outline-secondary{border-color:#ced4da}.filter-row .search-text .btn-outline-secondary:active,.filter-row .search-text .btn-outline-secondary:focus{box-shadow:none}.filter-row .form-control:focus{border-color:#ced4da;box-shadow:none}.filter-row .custom-select:focus{box-shadow:none}.farris-datatable{position:relative}.resizable-column{background-clip:padding-box;position:relative}.column-resizer{display:block;position:absolute!important;top:0;right:0;margin:0;width:.5em;height:100%;padding:0;cursor:col-resize;border:1px solid transparent}.column-resizer-helper{width:1px;position:absolute;z-index:10;display:none;background-color:#6c757d;opacity:.6}.farris-table-fixed-body,.farris-table-fixed-header{position:absolute;top:0;left:0;overflow:hidden;box-shadow:2px 0 6px -2px rgba(0,0,0,.2)}.farris-table-fixed-right-body,.farris-table-fixed-right-header{position:absolute;top:0;right:0;overflow:hidden;box-shadow:-2px 0 6px -2px rgba(0,0,0,.2)}.td-hidden{visibility:hidden}@media (min-width:576px){.td-sm-hidden{visibility:hidden!important}.td-sm-visible{visibility:visible!important}}@media (min-width:768px){.td-md-hidden{visibility:hidden!important}.td-md-visible{visibility:visible!important}}@media (min-width:992px){.td-lg-hidden{visibility:hidden!important}.td-lg-visible{visibility:visible!important}}@media (min-width:1200px){.td-xl-hidden{visibility:hidden!important}.td-xl-visible{visibility:visible!important}}"]
                }] }
    ];
    /** @nocollapse */
    DataTableComponent.ctorParameters = function () { return [
        { type: DataTableService },
        { type: IdService },
        { type: ElementRef },
        { type: ChangeDetectorRef },
        { type: NgZone }
    ]; };
    DataTableComponent.propDecorators = {
        keydownEnterEdit: [{ type: Input }],
        id: [{ type: Input }],
        size: [{ type: Input }],
        allColumnsTitle: [{ type: Input }],
        width: [{ type: Input }],
        height: [{ type: Input }],
        fill: [{ type: Input }],
        pagination: [{ type: Input }],
        pagerOnServer: [{ type: Input }],
        pageSize: [{ type: Input }],
        pageIndex: [{ type: Input }],
        showPageInfo: [{ type: Input }],
        showPageNumber: [{ type: Input }],
        showPageList: [{ type: Input }],
        pagerViewMode: [{ type: Input }],
        showHeader: [{ type: Input }],
        pageList: [{ type: Input }],
        total: [{ type: Input }],
        columns: [{ type: Input }],
        searchFields: [{ type: Input }],
        showFilterBar: [{ type: Input }],
        data: [{ type: Input }],
        remote: [{ type: Input }],
        remoteSort: [{ type: Input }],
        sortName: [{ type: Input }],
        sortOrder: [{ type: Input }],
        multiSort: [{ type: Input }],
        beforeSortColumn: [{ type: Input }],
        singleSelect: [{ type: Input }],
        idField: [{ type: Input }],
        hover: [{ type: Input }],
        striped: [{ type: Input }],
        bordered: [{ type: Input }],
        rowClassName: [{ type: Input }],
        cellClassName: [{ type: Input }],
        rowStyler: [{ type: Input }],
        cellStyler: [{ type: Input }],
        selections: [{ type: Input }],
        scorllableBody: [{ type: ViewChild, args: ['scorllableBody',] }],
        tableHeader: [{ type: ViewChild, args: ['tableHeader',] }],
        tablePager: [{ type: ViewChild, args: ['tablePager',] }],
        dtHeader: [{ type: ViewChild, args: ['dtHeader',] }],
        dtBody: [{ type: ViewChild, args: ['dtBody',] }],
        dtLeftBody: [{ type: ViewChild, args: ['dtLeftBody',] }],
        dtRightBody: [{ type: ViewChild, args: ['dtRightBody',] }],
        dtLeftFixed: [{ type: ViewChild, args: ['dtLeftFixed',] }],
        dtRightFixed: [{ type: ViewChild, args: ['dtRightFixed',] }],
        pager: [{ type: ViewChild, args: ['pager',] }],
        inputGroup: [{ type: ViewChild, args: ['inputgroup',] }],
        pgScrollbar: [{ type: ViewChild, args: ['pgScrollbar',] }],
        pageChanged: [{ type: Output }],
        pageSizeChanged: [{ type: Output }],
        search: [{ type: Output }],
        columnSorted: [{ type: Output }],
        rowDblClick: [{ type: Output }],
        selectedRow: [{ type: Output }],
        selectRows: [{ type: Output }],
        unSelectRow: [{ type: Output }],
        cellClick: [{ type: Output }],
        clearSearchValue: [{ type: Output }],
        checkAll: [{ type: Output }],
        sortChange: [{ type: Output }],
        columnsRef: [{ type: ContentChildren, args: [ColumnDirective,] }],
        footer: [{ type: ContentChild, args: ['footer',] }],
        dragLine: [{ type: ViewChild, args: ['dragLine',] }],
        resizableColumns: [{ type: Input }],
        keepSelect: [{ type: Input }],
        perfectScrollbar: [{ type: ViewChild, args: ['perfectScrollbar',] }]
    };
    return DataTableComponent;
}());
export { DataTableComponent };
if (false) {
    /** @type {?} */
    DataTableComponent.prototype.searchButtonText;
    /** @type {?} */
    DataTableComponent.prototype.keydownEnterEdit;
    /** @type {?} */
    DataTableComponent.prototype.id;
    /** @type {?} */
    DataTableComponent.prototype.size;
    /** @type {?} */
    DataTableComponent.prototype.allColumnsTitle;
    /** @type {?} */
    DataTableComponent.prototype.width;
    /** @type {?} */
    DataTableComponent.prototype.height;
    /** @type {?} */
    DataTableComponent.prototype.tableHeight;
    /** @type {?} */
    DataTableComponent.prototype.fill;
    /** @type {?} */
    DataTableComponent.prototype.pagination;
    /** @type {?} */
    DataTableComponent.prototype.pagerOnServer;
    /** @type {?} */
    DataTableComponent.prototype.pageSize;
    /** @type {?} */
    DataTableComponent.prototype.pageIndex;
    /** @type {?} */
    DataTableComponent.prototype.showPageInfo;
    /** @type {?} */
    DataTableComponent.prototype.showPageNumber;
    /** @type {?} */
    DataTableComponent.prototype.showPageList;
    /** @type {?} */
    DataTableComponent.prototype.pagerViewMode;
    /**
     * 显示表头
     * @type {?}
     */
    DataTableComponent.prototype.showHeader;
    /**
     * @type {?}
     * @private
     */
    DataTableComponent.prototype._pageList;
    /** @type {?} */
    DataTableComponent.prototype.total;
    /** @type {?} */
    DataTableComponent.prototype.columns;
    /** @type {?} */
    DataTableComponent.prototype.searchFields;
    /** @type {?} */
    DataTableComponent.prototype.showFilterBar;
    /** @type {?} */
    DataTableComponent.prototype._data;
    /** @type {?} */
    DataTableComponent.prototype.copyData;
    /** @type {?} */
    DataTableComponent.prototype.remote;
    /**
     * 启用远端排序
     * @type {?}
     */
    DataTableComponent.prototype.remoteSort;
    /**
     * 排序字段
     * @type {?}
     */
    DataTableComponent.prototype.sortName;
    /**
     * 排序方式 asc | desc
     * @type {?}
     */
    DataTableComponent.prototype.sortOrder;
    /**
     * 允许多列排序
     * @type {?}
     */
    DataTableComponent.prototype.multiSort;
    /** @type {?} */
    DataTableComponent.prototype.beforeSortColumn;
    /** @type {?} */
    DataTableComponent.prototype.singleSelect;
    /** @type {?} */
    DataTableComponent.prototype.idField;
    /** @type {?} */
    DataTableComponent.prototype.hover;
    /** @type {?} */
    DataTableComponent.prototype.striped;
    /** @type {?} */
    DataTableComponent.prototype.bordered;
    /** @type {?} */
    DataTableComponent.prototype.rowClassName;
    /** @type {?} */
    DataTableComponent.prototype.cellClassName;
    /** @type {?} */
    DataTableComponent.prototype.rowStyler;
    /** @type {?} */
    DataTableComponent.prototype.cellStyler;
    /** @type {?} */
    DataTableComponent.prototype.scorllableBody;
    /** @type {?} */
    DataTableComponent.prototype.tableHeader;
    /** @type {?} */
    DataTableComponent.prototype.tablePager;
    /** @type {?} */
    DataTableComponent.prototype.dtHeader;
    /** @type {?} */
    DataTableComponent.prototype.dtBody;
    /** @type {?} */
    DataTableComponent.prototype.dtLeftBody;
    /** @type {?} */
    DataTableComponent.prototype.dtRightBody;
    /** @type {?} */
    DataTableComponent.prototype.dtLeftFixed;
    /** @type {?} */
    DataTableComponent.prototype.dtRightFixed;
    /** @type {?} */
    DataTableComponent.prototype.pager;
    /** @type {?} */
    DataTableComponent.prototype.inputGroup;
    /** @type {?} */
    DataTableComponent.prototype.pgScrollbar;
    /** @type {?} */
    DataTableComponent.prototype.pageChanged;
    /** @type {?} */
    DataTableComponent.prototype.pageSizeChanged;
    /** @type {?} */
    DataTableComponent.prototype.search;
    /** @type {?} */
    DataTableComponent.prototype.columnSorted;
    /** @type {?} */
    DataTableComponent.prototype.rowDblClick;
    /** @type {?} */
    DataTableComponent.prototype.selectedRow;
    /** @type {?} */
    DataTableComponent.prototype.selectRows;
    /** @type {?} */
    DataTableComponent.prototype.unSelectRow;
    /** @type {?} */
    DataTableComponent.prototype.cellClick;
    /** @type {?} */
    DataTableComponent.prototype.clearSearchValue;
    /** @type {?} */
    DataTableComponent.prototype.checkAll;
    /** @type {?} */
    DataTableComponent.prototype.sortChange;
    /** @type {?} */
    DataTableComponent.prototype.columnsRef;
    /** @type {?} */
    DataTableComponent.prototype.footer;
    /** @type {?} */
    DataTableComponent.prototype.dragLine;
    /** @type {?} */
    DataTableComponent.prototype.resizableColumns;
    /**
     * 针对同一条记录，单选时，多次单击后不取消选中。
     * @type {?}
     */
    DataTableComponent.prototype.keepSelect;
    /** @type {?} */
    DataTableComponent.prototype.hasRowTepml;
    /** @type {?} */
    DataTableComponent.prototype.datatableContainer;
    /** @type {?} */
    DataTableComponent.prototype.dragLineX;
    /** @type {?} */
    DataTableComponent.prototype.moveable;
    /** @type {?} */
    DataTableComponent.prototype.currentColumn;
    /** @type {?} */
    DataTableComponent.prototype.hasFixed;
    /** @type {?} */
    DataTableComponent.prototype.fixedLeftWidth;
    /** @type {?} */
    DataTableComponent.prototype.fixedRightWidth;
    /** @type {?} */
    DataTableComponent.prototype.searchData;
    /** @type {?} */
    DataTableComponent.prototype.subscription;
    /** @type {?} */
    DataTableComponent.prototype.headerTr;
    /** @type {?} */
    DataTableComponent.prototype.leftFixedHeaderTr;
    /** @type {?} */
    DataTableComponent.prototype.rightFixedHeaderTr;
    /** @type {?} */
    DataTableComponent.prototype.filter;
    /** @type {?} */
    DataTableComponent.prototype.maxSize;
    /** @type {?} */
    DataTableComponent.prototype.directionLinks;
    /** @type {?} */
    DataTableComponent.prototype.autoHide;
    /** @type {?} */
    DataTableComponent.prototype.responsive;
    /** @type {?} */
    DataTableComponent.prototype.paginationOptions;
    /** @type {?} */
    DataTableComponent.prototype.labels;
    /**
     * @type {?}
     * @private
     */
    DataTableComponent.prototype._currentRowIndex;
    /**
     * @type {?}
     * @private
     */
    DataTableComponent.prototype._currentRow;
    /** @type {?} */
    DataTableComponent.prototype.perfectScrollbar;
    /**
     * @type {?}
     * @private
     */
    DataTableComponent.prototype.isCheckAll;
    /** @type {?} */
    DataTableComponent.prototype.scorllableBodyHeight;
    /** @type {?} */
    DataTableComponent.prototype.scrollWidth;
    /** @type {?} */
    DataTableComponent.prototype.mouseEnterOnPager;
    /** @type {?} */
    DataTableComponent.prototype.mouseLeaveOnPager;
    /** @type {?} */
    DataTableComponent.prototype.mouseWheelOnPager;
    /**
     * @type {?}
     * @private
     */
    DataTableComponent.prototype.ps;
    /** @type {?} */
    DataTableComponent.prototype.pgScrollLeft;
    /** @type {?} */
    DataTableComponent.prototype.trackByRows;
    /**
     * @type {?}
     * @private
     */
    DataTableComponent.prototype.dataService;
    /**
     * @type {?}
     * @private
     */
    DataTableComponent.prototype.idService;
    /**
     * @type {?}
     * @private
     */
    DataTableComponent.prototype.el;
    /** @type {?} */
    DataTableComponent.prototype.cd;
    /**
     * @type {?}
     * @private
     */
    DataTableComponent.prototype.ngZone;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0YXRhYmxlLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvdWktZGF0YXRhYmxlLyIsInNvdXJjZXMiOlsibGliL2RhdGF0YWJsZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUM3RCxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxlQUFlLENBQUM7Ozs7Ozs7OztBQVVsRCxPQUFPLEVBQ0gsU0FBUyxFQUFVLFNBQVMsRUFBRSxVQUFVLEVBQWEsS0FBSyxFQUFpQixZQUFZLEVBQUUsV0FBVyxFQUNwRyxTQUFTLEVBQW1DLGVBQWUsRUFBRSxNQUFNLEVBQUUsWUFBWSxFQUFFLGlCQUFpQixFQUFxQixNQUFNLEVBQ2xJLE1BQU0sZUFBZSxDQUFDO0FBRXZCLE9BQU8sRUFBNEIsRUFBRSxFQUFFLFNBQVMsRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUUvRCxPQUFPLEVBQUUseUJBQXlCLEVBQUUsTUFBTSw4QkFBOEIsQ0FBQztBQUN6RSxPQUFPLEVBQXNCLDJCQUEyQixFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFDeEYsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBRzlDLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUM5QyxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sOEJBQThCLENBQUM7QUFDL0QsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDdkQsT0FBTyxFQUFFLHdCQUF3QixFQUFFLE1BQU0sb0NBQW9DLENBQUM7QUFDOUUsT0FBTyxFQUFFLEtBQUssRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBS3ZDO0lBbU9JLDRCQUFvQixXQUE2QixFQUFVLFNBQW9CLEVBQVUsRUFBYyxFQUM1RixFQUFxQixFQUFVLE1BQWM7UUFEeEQsaUJBc0JDO1FBdEJt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Q0FBeUI7O0lBQ3pCLCtDQU9FOztJQUNGLG9DQU1FOzs7OztJQUVGLDhDQUE4Qjs7Ozs7SUFLOUIseUNBQWdDOztJQUtoQyw4Q0FBMkU7Ozs7O0lBRTNFLHdDQWlCQzs7SUFFRCxrREFBNkI7O0lBQzdCLHlDQUFnQjs7SUFFaEIsK0NBQXlCOztJQUN6QiwrQ0FBeUI7O0lBQ3pCLCtDQUF5Qjs7Ozs7SUEwQnpCLGdDQUE2Qjs7SUFDN0IsMENBQWlCOztJQW1EakIseUNBRUM7Ozs7O0lBOUVXLHlDQUFxQzs7Ozs7SUFBRSx1Q0FBNEI7Ozs7O0lBQUUsZ0NBQXNCOztJQUNuRyxnQ0FBNEI7Ozs7O0lBQUUsb0NBQXNCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5wdXRHcm91cENvbXBvbmVudCB9IGZyb20gJ0BmYXJyaXMvdWktaW5wdXQtZ3JvdXAnO1xyXG5pbXBvcnQgeyBDaGFuZ2VEZXRlY3RvclJlZiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG4vKlxyXG4gKiBAQXV0aG9yOiDnlq/ni4Lnp4DmiY0oTHVjYXMgSHVhbmcpXHJcbiAqIEBEYXRlOiAyMDE5LTA3LTEwIDExOjQ0OjQ5XHJcbiAqIEBMYXN0RWRpdG9yczog55av54uC56eA5omNKEx1Y2FzIEh1YW5nKVxyXG4gKiBATGFzdEVkaXRUaW1lOiAyMDE5LTExLTA1IDExOjQ0OjE4XHJcbiAqIEBRUTogMTA1NTgxODIzOVxyXG4gKiBAVmVyc2lvbjogdjAuMC4xXHJcbiAqL1xyXG5cclxuaW1wb3J0IHtcclxuICAgIENvbXBvbmVudCwgT25Jbml0LCBWaWV3Q2hpbGQsIEVsZW1lbnRSZWYsIE9uQ2hhbmdlcywgSW5wdXQsIFNpbXBsZUNoYW5nZXMsIENvbnRlbnRDaGlsZCwgVGVtcGxhdGVSZWYsXHJcbiAgICBRdWVyeUxpc3QsIEFmdGVyQ29udGVudEluaXQsIEFmdGVyVmlld0luaXQsIENvbnRlbnRDaGlsZHJlbiwgT3V0cHV0LCBFdmVudEVtaXR0ZXIsIFZpZXdFbmNhcHN1bGF0aW9uLCBPbkRlc3Ryb3ksIEluamVjdCwgTmdab25lXHJcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcblxyXG5pbXBvcnQgeyBTdWJzY3JpcHRpb24sIE9ic2VydmFibGUsIG9mLCBmcm9tRXZlbnQgfSBmcm9tICdyeGpzJztcclxuaW1wb3J0IFBlcmZlY3RTY3JvbGxiYXIgZnJvbSAncGVyZmVjdC1zY3JvbGxiYXInO1xyXG5pbXBvcnQgeyBQZXJmZWN0U2Nyb2xsYmFyQ29tcG9uZW50IH0gZnJvbSAnQGZhcnJpcy91aS1wZXJmZWN0LXNjcm9sbGJhcic7XHJcbmltcG9ydCB7IFBhZ2luYXRpb25JbnN0YW5jZSwgUGFnaW5hdGlvbkNvbnRyb2xzQ29tcG9uZW50IH0gZnJvbSAnQGZhcnJpcy91aS1wYWdpbmF0aW9uJztcclxuaW1wb3J0IHsgSWRTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1jb21tb24nO1xyXG5pbXBvcnQgeyBEYXRhQ29sdW1uIH0gZnJvbSAnQGZhcnJpcy91aS1jb21tb24vY29sdW1uJztcclxuXHJcbmltcG9ydCB7IGRlZXBDb3B5IH0gZnJvbSAnLi9kYXRhdGFibGUtY29sdW1uJztcclxuaW1wb3J0IHsgQ29sdW1uRGlyZWN0aXZlIH0gZnJvbSAnLi9kYXRhdGFibGUtY29sdW1uLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IERhdGFUYWJsZVNlcnZpY2UgfSBmcm9tICcuL2RhdGF0YWJsZS5zZXJ2aWNlJztcclxuaW1wb3J0IHsgRGF0YVRhYmxlSGVhZGVyQ29tcG9uZW50IH0gZnJvbSAnLi90YWJsZS9kYXRhdGFibGUtaGVhZGVyLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IGRlbGF5IH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xyXG5cclxuXHJcblxyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgICBzZWxlY3RvcjogJ2ZhcnJpc3VpLWRhdGF0YWJsZSxmYXJyaXMtZGF0YXRhYmxlJyxcclxuICAgIHRlbXBsYXRlVXJsOiAnLi9kYXRhdGFibGUuY29tcG9uZW50Lmh0bWwnLFxyXG4gICAgc3R5bGVVcmxzOiBbJy4vZGF0YXRhYmxlLnNjc3MnXSxcclxuICAgIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmUsXHJcbiAgICBwcm92aWRlcnM6IFtcclxuICAgICAgICBEYXRhVGFibGVTZXJ2aWNlXHJcbiAgICBdXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBEYXRhVGFibGVDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uQ2hhbmdlcywgT25EZXN0cm95LCBBZnRlckNvbnRlbnRJbml0LCBBZnRlclZpZXdJbml0IHtcclxuICAgIHNlYXJjaEJ1dHRvblRleHQgPSAnPGkgY2xhc3M9XCJmLWljb24gZi1pY29uLXNlYXJjaFwiPjwvaT4nO1xyXG4gICAgQElucHV0KCkga2V5ZG93bkVudGVyRWRpdCA9IGZhbHNlO1xyXG4gICAgQElucHV0KCkgaWQ6IHN0cmluZztcclxuICAgIEBJbnB1dCgpIHNpemU6IHN0cmluZztcclxuICAgIEBJbnB1dCgpIGFsbENvbHVtbnNUaXRsZSA9ICfmiYDmnInliJcnO1xyXG4gICAgLy8gdGFibGUg5bC65a+4XHJcbiAgICBASW5wdXQoKSB3aWR0aDtcclxuICAgIC8vIOe7hOS7tue6p+mrmOW6puWMheaLrOi/h+a7pOadoemrmOW6plxyXG4gICAgQElucHV0KCkgaGVpZ2h0O1xyXG5cclxuICAgIHRhYmxlSGVpZ2h0OiBudW1iZXI7IC8vIOaVsOaNruihqOmrmOW6plxyXG4gICAgLy8g5piv5ZCm5aGr5YWFXHJcbiAgICBASW5wdXQoKSBmaWxsID0gZmFsc2U7XHJcbiAgICAvLyDpu5jorqTliIbpobVcclxuICAgIEBJbnB1dCgpIHBhZ2luYXRpb24gPSB0cnVlO1xyXG4gICAgQElucHV0KCkgcGFnZXJPblNlcnZlciA9IHRydWU7XHJcbiAgICBASW5wdXQoKSBwYWdlU2l6ZSA9IDEwO1xyXG4gICAgQElucHV0KCkgcGFnZUluZGV4ID0gMTtcclxuICAgIEBJbnB1dCgpIHNob3dQYWdlSW5mbyA9IHRydWU7XHJcbiAgICBASW5wdXQoKSBzaG93UGFnZU51bWJlciA9IHRydWU7XHJcbiAgICBASW5wdXQoKSBzaG93UGFnZUxpc3QgPSB0cnVlO1xyXG4gICAgQElucHV0KCkgcGFnZXJWaWV3TW9kZSA9ICdkZWZhdWx0JztcclxuICAgIC8qKiDmmL7npLrooajlpLQgKi9cclxuICAgIEBJbnB1dCgpIHNob3dIZWFkZXIgPSB0cnVlO1xyXG5cclxuICAgIHByaXZhdGUgX3BhZ2VMaXN0ID0gWzEwLCAyMCwgMzAsIDUwLCAxMDBdO1xyXG5cclxuICAgIGdldCBwYWdlTGlzdCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcGFnZUxpc3Q7XHJcbiAgICB9XHJcbiAgICBASW5wdXQoKSBzZXQgcGFnZUxpc3QodmFsKSB7XHJcbiAgICAgICAgdGhpcy5fcGFnZUxpc3QgPSB2YWw7XHJcbiAgICAgICAgaWYgKHRoaXMucGFnZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5wYWdlci5zZXRQYWdlTGlzdCh2YWwpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBASW5wdXQoKSB0b3RhbCA9IDA7XHJcbiAgICAvLyDliJcg5pWw5o2uXHJcbiAgICBASW5wdXQoKSBjb2x1bW5zOiBEYXRhQ29sdW1uW107XHJcbiAgICBASW5wdXQoKSBzZWFyY2hGaWVsZHM6IHsgbGFiZWw6IHN0cmluZywgdmFsdWU6IHN0cmluZyB9W107XHJcbiAgICAvLyDlj6/nrZvpgIlcclxuICAgIEBJbnB1dCgpIHNob3dGaWx0ZXJCYXIgPSBmYWxzZTtcclxuICAgIC8vIHRhYmxlICDmlbDmja5cclxuICAgIF9kYXRhID0gW107XHJcbiAgICBASW5wdXQoKVxyXG4gICAgZ2V0IGRhdGEoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RhdGE7XHJcbiAgICB9XHJcbiAgICBzZXQgZGF0YShkYXRhOiBBcnJheTxhbnk+KSB7XHJcbiAgICAgICAgdGhpcy5fZGF0YSA9IGRhdGE7XHJcbiAgICB9XHJcbiAgICAvLyDmt7Hmi7fotJ1kYXRhIOaVsOaNrlxyXG4gICAgY29weURhdGE6IGFueTtcclxuXHJcbiAgICBASW5wdXQoKSByZW1vdGUgPSAnY2xpZW50JztcclxuXHJcbiAgICAvKiog5ZCv55So6L+c56uv5o6S5bqPICovXHJcbiAgICBASW5wdXQoKSByZW1vdGVTb3J0ID0gdHJ1ZTtcclxuICAgIC8qKiDmjpLluo/lrZfmrrUgKi9cclxuICAgIEBJbnB1dCgpIHNvcnROYW1lOiBzdHJpbmc7XHJcbiAgICAvKiog5o6S5bqP5pa55byPIGFzYyB8IGRlc2MgKi9cclxuICAgIEBJbnB1dCgpIHNvcnRPcmRlcjogc3RyaW5nO1xyXG4gICAgLyoqIOWFgeiuuOWkmuWIl+aOkuW6jyAqL1xyXG4gICAgQElucHV0KCkgbXVsdGlTb3J0ID0gZmFsc2U7XHJcbiAgICBASW5wdXQoKSBiZWZvcmVTb3J0Q29sdW1uOiAoZmllbGQ6IHN0cmluZywgb3JkZXI6IHN0cmluZykgPT4gT2JzZXJ2YWJsZTxib29sZWFuPjtcclxuXHJcbiAgICAvLyDlpJrpgIkgIOWNlemAiVxyXG4gICAgQElucHV0KCkgc2luZ2xlU2VsZWN0ID0gdHJ1ZTtcclxuICAgIEBJbnB1dCgpIGlkRmllbGQgPSAnaWQnO1xyXG4gICAgLy8g5pi+56S66byg5qCH5oKs5YGc6auY5LquXHJcbiAgICBASW5wdXQoKSBob3ZlciA9IHRydWU7XHJcbiAgICAvLyDmlpHpqaznur9cclxuICAgIEBJbnB1dCgpIHN0cmlwZWQ6IGJvb2xlYW47XHJcbiAgICAvLyDovrnmoYZcclxuICAgIEBJbnB1dCgpIGJvcmRlcmVkOiBib29sZWFuO1xyXG4gICAgLy8g5pSv5oyB5re75Yqg6KGMIOWNleWFg+agvCDnsbvmoLflvI9cclxuICAgIEBJbnB1dCgpIHJvd0NsYXNzTmFtZTogKHJvdzogYW55LCBpbmRleDogbnVtYmVyKSA9PiBzdHJpbmc7XHJcbiAgICBASW5wdXQoKSBjZWxsQ2xhc3NOYW1lOiAodmFsdWU6IGFueSwgY29sOiBhbnkpID0+IHN0cmluZztcclxuXHJcbiAgICBASW5wdXQoKSByb3dTdHlsZXI6IChhcmdzOiBhbnkpID0+IGFueTtcclxuICAgIEBJbnB1dCgpIGNlbGxTdHlsZXI6ICh2YWw6IGFueSkgPT4gYW55O1xyXG5cclxuICAgIEBJbnB1dCgpXHJcbiAgICBzZXQgc2VsZWN0aW9ucyh2KSB7XHJcbiAgICAgICAgdGhpcy5kdEJvZHkuc2VsZWN0aW9ucyA9IHYgPyB2IDoge307XHJcbiAgICB9XHJcbiAgICBnZXQgc2VsZWN0aW9ucygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kdEJvZHkuc2VsZWN0aW9ucztcclxuICAgIH1cclxuICAgIC8vIOa7muWKqOadoeW8leeUqFxyXG4gICAgQFZpZXdDaGlsZCgnc2NvcmxsYWJsZUJvZHknKSBzY29ybGxhYmxlQm9keTogRWxlbWVudFJlZjtcclxuICAgIEBWaWV3Q2hpbGQoJ3RhYmxlSGVhZGVyJykgdGFibGVIZWFkZXI6IEVsZW1lbnRSZWY7XHJcbiAgICBAVmlld0NoaWxkKCd0YWJsZVBhZ2VyJykgdGFibGVQYWdlcjogRWxlbWVudFJlZjtcclxuICAgIEBWaWV3Q2hpbGQoJ2R0SGVhZGVyJykgZHRIZWFkZXI6IERhdGFUYWJsZUhlYWRlckNvbXBvbmVudDtcclxuICAgIEBWaWV3Q2hpbGQoJ2R0Qm9keScpIGR0Qm9keTogYW55O1xyXG4gICAgQFZpZXdDaGlsZCgnZHRMZWZ0Qm9keScpIGR0TGVmdEJvZHk6IGFueTtcclxuICAgIEBWaWV3Q2hpbGQoJ2R0UmlnaHRCb2R5JykgZHRSaWdodEJvZHk6IGFueTtcclxuICAgIEBWaWV3Q2hpbGQoJ2R0TGVmdEZpeGVkJykgZHRMZWZ0Rml4ZWQ6IEVsZW1lbnRSZWY7XHJcbiAgICBAVmlld0NoaWxkKCdkdFJpZ2h0Rml4ZWQnKSBkdFJpZ2h0Rml4ZWQ6IEVsZW1lbnRSZWY7XHJcbiAgICBAVmlld0NoaWxkKCdwYWdlcicpIHBhZ2VyOiBQYWdpbmF0aW9uQ29udHJvbHNDb21wb25lbnQ7XHJcbiAgICBAVmlld0NoaWxkKCdpbnB1dGdyb3VwJykgaW5wdXRHcm91cDogSW5wdXRHcm91cENvbXBvbmVudDtcclxuXHJcbiAgICBAVmlld0NoaWxkKCdwZ1Njcm9sbGJhcicpIHBnU2Nyb2xsYmFyOiBFbGVtZW50UmVmO1xyXG5cclxuICAgIC8vIOWIhumhteS6i+S7tlxyXG4gICAgQE91dHB1dCgpIHBhZ2VDaGFuZ2VkID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgQE91dHB1dCgpIHBhZ2VTaXplQ2hhbmdlZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIEBPdXRwdXQoKSBzZWFyY2ggPSBuZXcgRXZlbnRFbWl0dGVyPHsgZmllbGQ6IHN0cmluZywgdmFsdWU6IHN0cmluZyB9PigpO1xyXG4gICAgQE91dHB1dCgpIGNvbHVtblNvcnRlZCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG4gICAgQE91dHB1dCgpIHJvd0RibENsaWNrID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcbiAgICBAT3V0cHV0KCkgc2VsZWN0ZWRSb3cgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuICAgIC8vIOWFvOWuuVxyXG4gICAgQE91dHB1dCgpIHNlbGVjdFJvd3MgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuICAgIEBPdXRwdXQoKSB1blNlbGVjdFJvdyA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG4gICAgQE91dHB1dCgpIGNlbGxDbGljayA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG4gICAgQE91dHB1dCgpIGNsZWFyU2VhcmNoVmFsdWUgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICBAT3V0cHV0KCkgY2hlY2tBbGwgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuXHJcblxyXG4gICAgQE91dHB1dCgpIHNvcnRDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgQENvbnRlbnRDaGlsZHJlbihDb2x1bW5EaXJlY3RpdmUpIGNvbHVtbnNSZWY6IFF1ZXJ5TGlzdDxDb2x1bW5EaXJlY3RpdmU+O1xyXG4gICAgLy8g6KGo5bC+XHJcbiAgICBAQ29udGVudENoaWxkKCdmb290ZXInKSBmb290ZXI6IFRlbXBsYXRlUmVmPGFueT47XHJcbiAgICAvLyDooajmoLzlj6/mi5bmi73lrr3luqbns7vliJdcclxuICAgIC8vIOaLluaLvee6v1xyXG4gICAgQFZpZXdDaGlsZCgnZHJhZ0xpbmUnKSBkcmFnTGluZTogRWxlbWVudFJlZjtcclxuICAgIC8vIOaYr+WQpuWPr+aLluaLvSAg6buY6K6k5Y+v5LulXHJcbiAgICBASW5wdXQoKSByZXNpemFibGVDb2x1bW5zID0gdHJ1ZTtcclxuXHJcbiAgICAvKiog6ZKI5a+55ZCM5LiA5p2h6K6w5b2V77yM5Y2V6YCJ5pe277yM5aSa5qyh5Y2V5Ye75ZCO5LiN5Y+W5raI6YCJ5Lit44CCICovXHJcbiAgICBASW5wdXQoKSBrZWVwU2VsZWN0ID0gdHJ1ZTtcclxuXHJcbiAgICAvLyDmmK/lkKbmnInooYzmqKHmnb9cclxuICAgIGhhc1Jvd1RlcG1sID0gZmFsc2U7XHJcbiAgICAvLyDnlKjmiLfojrflj5booajlpLQr6KGo5qC85YaF5a6555qE6auY5bqmICDlrr3luqYgIOetiVxyXG4gICAgZGF0YXRhYmxlQ29udGFpbmVyOiBIVE1MRGl2RWxlbWVudDtcclxuICAgIC8vIOaLluaLvee6v+WIneWni+WMluS9jee9rlxyXG4gICAgZHJhZ0xpbmVYOiBudW1iZXI7XHJcbiAgICAvLyDorr7nva7mi5bmi73lgZzmraLlmahcclxuICAgIG1vdmVhYmxlID0gZmFsc2U7XHJcbiAgICAvL1xyXG4gICAgY3VycmVudENvbHVtbjogYW55O1xyXG4gICAgLy8g6K6+572u5bem5Zu65a6a5YiXXHJcbiAgICBoYXNGaXhlZDogYm9vbGVhbjtcclxuICAgIGZpeGVkTGVmdFdpZHRoOiBzdHJpbmc7XHJcbiAgICAvLyDorr7nva7lj7Plm7rlrprliJdcclxuICAgIGZpeGVkUmlnaHRXaWR0aDogc3RyaW5nO1xyXG4gICAgc2VhcmNoRGF0YSA9IHsgZmllbGQ6ICcqJywgdmFsdWU6ICcnIH07XHJcbiAgICAvLyDkuovku7borqLpmIXlrZjlgqggIOS+v+S6jumUgOavgVxyXG4gICAgc3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb25bXSA9IFtdO1xyXG4gICAgLy8g5Zu65a6a5YiX5pe2ICDlkIzkuIDooYznmoR0ciBob3ZlcuS6i+S7tlxyXG4gICAgaGVhZGVyVHI6IGFueTtcclxuICAgIGxlZnRGaXhlZEhlYWRlclRyOiBhbnk7XHJcbiAgICByaWdodEZpeGVkSGVhZGVyVHI6IGFueTtcclxuXHJcbiAgICAvLyDljp/mlbDmja5cclxuICAgIHB1YmxpYyBmaWx0ZXIgPSAnJztcclxuICAgIHB1YmxpYyBtYXhTaXplID0gNztcclxuICAgIHB1YmxpYyBkaXJlY3Rpb25MaW5rcyA9IHRydWU7XHJcbiAgICBwdWJsaWMgYXV0b0hpZGUgPSBmYWxzZTtcclxuICAgIHB1YmxpYyByZXNwb25zaXZlID0gdHJ1ZTtcclxuICAgIHB1YmxpYyBwYWdpbmF0aW9uT3B0aW9uczogUGFnaW5hdGlvbkluc3RhbmNlID0ge1xyXG4gICAgICAgIGlkOiAnRmFycmlzLURhdGFUYWJsZS1QYWdpbmF0aW9uJyxcclxuICAgICAgICBpdGVtc1BlclBhZ2U6IHRoaXMucGFnZVNpemUsXHJcbiAgICAgICAgY3VycmVudFBhZ2U6IHRoaXMucGFnZUluZGV4LFxyXG4gICAgICAgIHBhZ2VMaXN0OiB0aGlzLnBhZ2VMaXN0LFxyXG4gICAgICAgIHRvdGFsSXRlbXM6IHRoaXMudG90YWwsXHJcbiAgICAgICAgcmVtb3RlOiB0aGlzLnBhZ2VyT25TZXJ2ZXJcclxuICAgIH07XHJcbiAgICBwdWJsaWMgbGFiZWxzOiBhbnkgPSB7XHJcbiAgICAgICAgcHJldmlvdXNMYWJlbDogJyAnLFxyXG4gICAgICAgIG5leHRMYWJlbDogJyAnLFxyXG4gICAgICAgIHNjcmVlblJlYWRlclBhZ2luYXRpb25MYWJlbDogJ1BhZ2luYXRpb24nLFxyXG4gICAgICAgIHNjcmVlblJlYWRlclBhZ2VMYWJlbDogJ3BhZ2UnLFxyXG4gICAgICAgIHNjcmVlblJlYWRlckN1cnJlbnRMYWJlbDogYFlvdSdyZSBvbiBwYWdlYFxyXG4gICAgfTtcclxuXHJcbiAgICBwcml2YXRlIF9jdXJyZW50Um93SW5kZXggPSAtMTtcclxuICAgIGdldCBjdXJyZW50Um93SW5kZXgoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY3VycmVudFJvd0luZGV4O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2N1cnJlbnRSb3cgPSB1bmRlZmluZWQ7XHJcbiAgICBnZXQgY3VycmVudFJvdygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY3VycmVudFJvdztcclxuICAgIH1cclxuXHJcbiAgICBAVmlld0NoaWxkKCdwZXJmZWN0U2Nyb2xsYmFyJykgcGVyZmVjdFNjcm9sbGJhcjogUGVyZmVjdFNjcm9sbGJhckNvbXBvbmVudDtcclxuXHJcbiAgICBwcml2YXRlIGlzQ2hlY2tBbGwgPSAoKSA9PiB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnNlbGVjdGlvbnMgfHwgIXRoaXMuc2VsZWN0aW9ucy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmRhdGEgfHwgIXRoaXMuZGF0YS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHRvdGFsID0gMDtcclxuICAgICAgICB0aGlzLnNlbGVjdGlvbnMuZm9yRWFjaChuID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZGF0YS5maW5kKGQgPT4gZFt0aGlzLmlkRmllbGRdID09PSBuW3RoaXMuaWRGaWVsZF0pKSB7XHJcbiAgICAgICAgICAgICAgICB0b3RhbCArPSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEubGVuZ3RoID09PSB0b3RhbDtcclxuICAgIH1cclxuXHJcbiAgICBzY29ybGxhYmxlQm9keUhlaWdodDogbnVtYmVyO1xyXG4gICAgc2Nyb2xsV2lkdGggPSAwO1xyXG5cclxuICAgIG1vdXNlRW50ZXJPblBhZ2VyID0gbnVsbDtcclxuICAgIG1vdXNlTGVhdmVPblBhZ2VyID0gbnVsbDtcclxuICAgIG1vdXNlV2hlZWxPblBhZ2VyID0gbnVsbDtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGRhdGFTZXJ2aWNlOiBEYXRhVGFibGVTZXJ2aWNlLCBwcml2YXRlIGlkU2VydmljZTogSWRTZXJ2aWNlLCBwcml2YXRlIGVsOiBFbGVtZW50UmVmLFxyXG4gICAgICAgIHB1YmxpYyBjZDogQ2hhbmdlRGV0ZWN0b3JSZWYsIHByaXZhdGUgbmdab25lOiBOZ1pvbmUpIHtcclxuXHJcbiAgICAgICAgdGhpcy5kYXRhU2VydmljZS5zZWxlY3RlZFJvdy5zdWJzY3JpYmUoKGU6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zaW5nbGVTZWxlY3QpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRSb3dJbmRleCA9IGUucm93SW5kZXg7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jdXJyZW50Um93ID0gZS5yb3dEYXRhO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZHRIZWFkZXIuaXNDaGVja0FsbCA9IHRoaXMuaXNDaGVja0FsbCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuZGF0YVNlcnZpY2UudW5TZWxlY3RlZFJvdy5zdWJzY3JpYmUoKGU6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zaW5nbGVTZWxlY3QpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRSb3cgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jdXJyZW50Um93SW5kZXggPSAtMTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZHRIZWFkZXIuaXNDaGVja0FsbCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBwczogUGVyZmVjdFNjcm9sbGJhcjtcclxuICAgIHBnU2Nyb2xsTGVmdCA9IDA7XHJcbiAgICBuZ09uSW5pdCgpIHtcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zZXRCb2R5SGVpZ2h0KCk7XHJcbiAgICAgICAgICAgIHRoaXMucHMgPSB0aGlzLnBlcmZlY3RTY3JvbGxiYXIuZGlyZWN0aXZlUmVmLnBzKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5pZCkge1xyXG4gICAgICAgICAgICB0aGlzLmlkID0gYGRhdGF0YWJsZV8ke3RoaXMuaWRTZXJ2aWNlLmdlbmVyYXRlKCl9YDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMucGFnaW5hdGlvbk9wdGlvbnMuaWQgPSB0aGlzLnBhZ2luYXRpb25PcHRpb25zLmlkICsgdGhpcy5pZDtcclxuXHJcbiAgICAgICAgdGhpcy5jb3B5RGF0YSA9IGRlZXBDb3B5KHRoaXMuZGF0YSk7XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5iZWZvcmVTb3J0Q29sdW1uKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYmVmb3JlU29ydENvbHVtbiA9ICgpID0+IG9mKHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNldEJvZHlIZWlnaHQoKSB7XHJcbiAgICAgICAgdGhpcy50YWJsZUhlaWdodCA9IHRoaXMuaGVpZ2h0O1xyXG4gICAgICAgIGlmICh0aGlzLnNob3dGaWx0ZXJCYXIpIHtcclxuICAgICAgICAgICAgdGhpcy50YWJsZUhlaWdodCA9IHRoaXMuaGVpZ2h0IC0gNDY7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5zaG93SGVhZGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2NvcmxsYWJsZUJvZHlIZWlnaHQgPSB0aGlzLnRhYmxlSGVpZ2h0IC0gdGhpcy50YWJsZUhlYWRlci5uYXRpdmVFbGVtZW50LmNsaWVudEhlaWdodDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnBhZ2luYXRpb24pIHtcclxuICAgICAgICAgICAgdGhpcy5zY29ybGxhYmxlQm9keUhlaWdodCA9IHRoaXMuc2NvcmxsYWJsZUJvZHlIZWlnaHQgLSA1MDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnRhYmxlUGFnZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5zY3JvbGxXaWR0aCA9IHRoaXMudGFibGVQYWdlci5uYXRpdmVFbGVtZW50LnNjcm9sbFdpZHRoO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5wZ1Njcm9sbExlZnQgPSAwO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5jZCAmJiAhdGhpcy5jZFsnZGVzdHJveWVkJ10pIHtcclxuICAgICAgICAgICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uQ2xlYXJTZWFyY2hWYWx1ZSgpIHtcclxuICAgICAgICB0aGlzLnNlYXJjaERhdGEudmFsdWUgPSAnJztcclxuICAgICAgICB0aGlzLmNkLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICB0aGlzLmNsZWFyU2VhcmNoVmFsdWUuZW1pdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHRyYWNrQnlSb3dzID0gKGluZGV4OiBudW1iZXIsIHJvdzogYW55KSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHJvd1t0aGlzLmlkRmllbGRdO1xyXG4gICAgfVxyXG5cclxuICAgIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpIHtcclxuICAgICAgICBpZiAoY2hhbmdlcy5oZWlnaHQgJiYgIWNoYW5nZXMuaGVpZ2h0LmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldEJvZHlIZWlnaHQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjaGFuZ2VzLnRvdGFsICYmICFjaGFuZ2VzLnRvdGFsLmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnBhZ2luYXRpb25PcHRpb25zLnRvdGFsSXRlbXMgPSBjaGFuZ2VzLnRvdGFsLmN1cnJlbnRWYWx1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjaGFuZ2VzLnBhZ2VTaXplKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGFnaW5hdGlvbk9wdGlvbnMuaXRlbXNQZXJQYWdlID0gY2hhbmdlcy5wYWdlU2l6ZS5jdXJyZW50VmFsdWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY2hhbmdlcy5wYWdlSW5kZXggJiYgIWNoYW5nZXMucGFnZUluZGV4LmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnBhZ2luYXRpb25PcHRpb25zLmN1cnJlbnRQYWdlID0gY2hhbmdlcy5wYWdlSW5kZXguY3VycmVudFZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMuZGF0YSAmJiAhY2hhbmdlcy5kYXRhLmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICBjb25zdCByb3dzID0gY2hhbmdlcy5kYXRhLmN1cnJlbnRWYWx1ZTtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVDaGVja2JveFN0YXRlKHJvd3MpO1xyXG4gICAgICAgICAgICB0aGlzLnBhZ2luYXRpb25PcHRpb25zID0geyAuLi50aGlzLnBhZ2luYXRpb25PcHRpb25zIH07XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YVNlcnZpY2UubG9hZFN1Y2Nlc3MubmV4dChjaGFuZ2VzLmRhdGEuY3VycmVudFZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbmdBZnRlckNvbnRlbnRJbml0KCkge1xyXG4gICAgICAgIC8vIOaUr+aMgeWIl+e7hOS7tuWGmeWFpVxyXG4gICAgICAgIGlmICghdGhpcy5jb2x1bW5zKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbHVtbnNSZWYgJiYgdGhpcy5jb2x1bW5zUmVmLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb2x1bW5zID0gdGhpcy5jb2x1bW5zUmVmLm1hcChjb2wgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBjb2wud2lkdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBjb2wudGl0bGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkOiBjb2wuZmllbGQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsaWduOiBjb2wuYWxpZ24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpeGVkOiBjb2wuZml4ZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogY29sLmNsYXNzTmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbXVsdGlwbGVGaWx0ZXI6IGNvbC5tdWx0aXBsZUZpbHRlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVyOiBjb2wuZmlsdGVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZWRpYTogY29sLm1lZGlhLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzb3J0YWJsZTogY29sLnNvcnRhYmxlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0OiBjb2wuZWRpdFxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMudGFibGVQYWdlcikge1xyXG4gICAgICAgICAgICB0aGlzLnRhYmxlUGFnZXIubmF0aXZlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgdGhpcy5tb3VzZUVudGVyT25QYWdlciA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGdTY3JvbGxiYXIubmF0aXZlRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMudGFibGVQYWdlci5uYXRpdmVFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCB0aGlzLm1vdXNlTGVhdmVPblBhZ2VyID0oKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBnU2Nyb2xsYmFyLm5hdGl2ZUVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMudGFibGVQYWdlci5uYXRpdmVFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3doZWVsJywgdGhpcy5tb3VzZVdoZWVsT25QYWdlciA9IChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBib3ggPSB0aGlzLnRhYmxlUGFnZXIubmF0aXZlRWxlbWVudDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHN3ID0gdGhpcy5zY3JvbGxXaWR0aDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG93ID0gYm94Lm9mZnNldFdpZHRoO1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKHN3ID4gb3cpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByaWdodCA9IHN3IC0gb3c7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2wgPSBNYXRoLmFicyh0aGlzLnBnU2Nyb2xsTGVmdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNsIDwgcmlnaHQgJiYgZS5kZWx0YVkgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5wZ1Njcm9sbExlZnQgPSAtKHNsICsgNTApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBnU2Nyb2xsYmFyLm5hdGl2ZUVsZW1lbnQuc2Nyb2xsTGVmdCA9IHNsICsgNTA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzbCA+IDAgJiYgZS5kZWx0YVkgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5wZ1Njcm9sbExlZnQgPSAtKHNsIC0gNTApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBnU2Nyb2xsYmFyLm5hdGl2ZUVsZW1lbnQuc2Nyb2xsTGVmdCA9IHNsIC0gNTA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMucGdTY3JvbGxiYXIpIHtcclxuICAgICAgICAgICAgZnJvbUV2ZW50KHRoaXMucGdTY3JvbGxiYXIubmF0aXZlRWxlbWVudCwgJ3Njcm9sbCcpLnBpcGUoXHJcbiAgICAgICAgICAgICAgICBkZWxheSg1MClcclxuICAgICAgICAgICAgKS5zdWJzY3JpYmUoKGU6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZSlcclxuICAgICAgICAgICAgICAgIHRoaXMucGdTY3JvbGxMZWZ0ID0gLWUudGFyZ2V0LnNjcm9sbExlZnQ7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG5nT25EZXN0cm95KCkge1xyXG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uLmZvckVhY2goc3ViID0+IHtcclxuICAgICAgICAgICAgc3ViLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb24gPSBbXTtcclxuXHJcbiAgICAgICAgdGhpcy5wYWdlciA9IG51bGw7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnRhYmxlUGFnZXIgJiYgdGhpcy50YWJsZVBhZ2VyLm5hdGl2ZUVsZW1lbnQpIHtcclxuICAgICAgICAgICAgdGhpcy50YWJsZVBhZ2VyLm5hdGl2ZUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIHRoaXMubW91c2VFbnRlck9uUGFnZXIpO1xyXG4gICAgICAgICAgICB0aGlzLnRhYmxlUGFnZXIubmF0aXZlRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgdGhpcy5tb3VzZUxlYXZlT25QYWdlcik7XHJcbiAgICAgICAgICAgIHRoaXMudGFibGVQYWdlci5uYXRpdmVFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3doZWVsJywgdGhpcy5tb3VzZVdoZWVsT25QYWdlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgbmdBZnRlclZpZXdJbml0KCkge1xyXG4gICAgICAgIC8vIOiOt+WPluihqOagvOWuueWZqCAg5Y2z6KGo5qC8XHJcbiAgICAgICAgdGhpcy5kYXRhdGFibGVDb250YWluZXIgPSB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcignLmZhcnJpcy1kYXRhdGFibGUnKTtcclxuICAgICAgICAvLyB0aGlzLmhlYWRlclRyID0gdGhpcy50YWJsZUhlYWRlci5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RyJyk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlQ2hlY2tib3hTdGF0ZShyb3dzOiBhbnlbXSkge1xyXG5cclxuICAgICAgICBjb25zdCB1cGRhdGVDaGVja0FsbFN0YXR1cyA9IChmKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNob3dIZWFkZXIgJiYgdGhpcy5kdEhlYWRlcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kdEhlYWRlci5pc0NoZWNrQWxsID0gZjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGlmIChyb3dzICYmIHJvd3MubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyh0aGlzLmR0Qm9keS5fc2VsZWN0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoa2V5cy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgY291bnQgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkcyA9IHJvd3MubWFwKChyb3c6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcm93W3RoaXMuaWRGaWVsZF0udG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBrZXlzLmZvckVhY2goaWQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaWRzLmluZGV4T2YoaWQpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlQ2hlY2tBbGxTdGF0dXMoaWRzLmxlbmd0aCA9PT0gY291bnQpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVDaGVja0FsbFN0YXR1cyhmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVDaGVja0FsbFN0YXR1cyhmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB1cGRhdGVDaGVja0FsbFN0YXR1cyhmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPluihqOagvOWuueWZqOeahOS9jee9riAg6Led56a75bem6L656KeG5Y+j5ZKM5LiK6L656KeG5Y+j55qE6Led56a7ICDlpoLmnpzpobXpnaLmnInmu5rliqjmnaEgIOmcgOimgeWKoOS4iua7muWKqOadoea7muWKqOeahOaVsOWAvFxyXG4gICAgICovXHJcbiAgICBnZXRDb250YWluZXJPZmZzZXQoKSB7XHJcbiAgICAgICAgY29uc3QgcmVjdCA9IHRoaXMuZGF0YXRhYmxlQ29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGxlZnQ6IHJlY3QubGVmdCArIGRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdCxcclxuICAgICAgICAgICAgdG9wOiByZWN0LnRvcCArIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wLFxyXG4gICAgICAgICAgICByaWdodDogcmVjdC5yaWdodCxcclxuICAgICAgICAgICAgYm90dG9tOiByZWN0LmJvdHRvbSxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiAg6byg5qCH5oyJ5LiLICDlvIDlp4vorrDlvZXmi5bmi73nur/nmoTkvY3nva4gIOaLluaLvee6v+WIsOi+vuW9k+WJjem8oOagh+S9jee9rlxyXG4gICAgICogQHBhcmFtIGUg6byg5qCH5a+56LGhXHJcbiAgICAgKi9cclxuICAgIGJlZ2luRHJhZyhlKSB7XHJcbiAgICAgICAgdGhpcy5kcmFnTGluZVggPSBlLnBhZ2VYO1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOm8oOagh+enu+WKqCDnp7vliqjmi5bmi73nur/kvY3nva7lj5jliqhcclxuICAgICAqIEBwYXJhbSBlIOm8oOagh+WvueixoVxyXG4gICAgICovXHJcbiAgICBtb3ZlRHJhZyhlKSB7XHJcbiAgICAgICAgLy8g6I635Y+W6KGo5qC855qE5bem6L656Led56a7XHJcbiAgICAgICAgY29uc3QgY29udGFpbmVyTGVmdCA9IHRoaXMuZ2V0Q29udGFpbmVyT2Zmc2V0KCkubGVmdDtcclxuICAgICAgICAvLyDorr7nva7mi5bmi73nur/nmoTpq5jluqYgIOWNs+iOt+WPluihqOWktCvooajlhoXlrrkr6KGo5bC+55qE6auY5bqmICDmraTooajmoLznu5PmnoTljIXlkKvkuobliIbpobUgIOWboOatpOimgeWOu+aOieWIhumhteeahOmrmOW6plxyXG4gICAgICAgIGlmICh0aGlzLnRhYmxlUGFnZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5kcmFnTGluZS5uYXRpdmVFbGVtZW50LnN0eWxlLmhlaWdodCA9IHRoaXMuZGF0YXRhYmxlQ29udGFpbmVyLm9mZnNldEhlaWdodCAtXHJcbiAgICAgICAgICAgICAgICB0aGlzLnRhYmxlUGFnZXIubmF0aXZlRWxlbWVudC5vZmZzZXRIZWlnaHQgKyAncHgnO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIGNvbnN0IGhlYWRlckhlaWdodCA9IHRoaXMuZWwubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZmFycmlzLXRhYmxlLWhlYWRlcicpO1xyXG4gICAgICAgICAgICAvLyBjb25zdCBib2R5SGVpZ2h0ID0gdGhpcy5lbC5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcy1jb250ZW50Jyk7XHJcbiAgICAgICAgICAgIHRoaXMuZHJhZ0xpbmUubmF0aXZlRWxlbWVudC5zdHlsZS5oZWlnaHQgPSB0aGlzLmRhdGF0YWJsZUNvbnRhaW5lci5vZmZzZXRIZWlnaHQgKyAncHgnO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDorr7nva7mi5bmi73nur/nmoTpq5jluqYg5ouW5ou957q/55u45a+55LqO6KGo5qC8cmVsYXRpdmXlrprkvY3mmK9hYnNvbHV0Ze+8jOWboOatpOaYrzBcclxuICAgICAgICB0aGlzLmRyYWdMaW5lLm5hdGl2ZUVsZW1lbnQuc3R5bGUudG9wID0gMCArICdweCc7XHJcbiAgICAgICAgLy8g6byg5qCH56e75Yqo5pe277yM5ouW5ou957q/55u45a+55LqO6KGo5qC855qE5L2N572uXHJcbiAgICAgICAgdGhpcy5kcmFnTGluZS5uYXRpdmVFbGVtZW50LnN0eWxlLmxlZnQgPSAoZS5wYWdlWCAtIGNvbnRhaW5lckxlZnQpICsgJ3B4JztcclxuICAgICAgICAvLyDpvKDmoIfnp7vliqggIOiuvue9ruaLluaLvee6v+aAu+aYr+WPr+ingVxyXG4gICAgICAgIHRoaXMuZHJhZ0xpbmUubmF0aXZlRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICAgIH1cclxuICAgIC8vIOmHjeaWsOiuoeeul+ihqOagvOWuveW6plxyXG4gICAgLyoqXHJcbiAgICAgKiDpvKDmoIfmiqzotbcg6YeN5paw6K6h566X5Y2V5YWD5qC85a695bqmXHJcbiAgICAgKiDpvKDmoIflr7nosaFcclxuICAgICAqL1xyXG4gICAgc3RvcERyYWcoZSwgY29sdW1uKSB7XHJcbiAgICAgICAgdGhpcy5yZXNpemVDb2x1bW4oZSwgY29sdW1uKTtcclxuICAgIH1cclxuICAgIHJlc2l6ZUNvbHVtbihlLCBjb2x1bW4pIHtcclxuICAgICAgICBpZiAodGhpcy5pc0NoZWNrQm94KGNvbHVtbiwgJ2R0LWNoZWNrYm94LWNlbGwnKSkge1xyXG4gICAgICAgICAgICB0aGlzLmRyYWdMaW5lLm5hdGl2ZUVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDlgY/np7vph49cclxuICAgICAgICBjb25zdCBkZWx0YSA9IGUucGFnZVggLSB0aGlzLmRyYWdMaW5lWDtcclxuICAgICAgICAvLyDmi5bmi73liY3liJflrr1cclxuICAgICAgICBjb25zdCBjb2x1bW5XaWR0aCA9IGNvbHVtbi5vZmZzZXRXaWR0aDtcclxuICAgICAgICAvLyDmi5bmi73lkI7liJflrr1cclxuICAgICAgICBsZXQgbmV3Q29sdW1uV2lkdGggPSBjb2x1bW5XaWR0aCArIGRlbHRhO1xyXG4gICAgICAgIC8vIOacgOWwj+WuveW6plxyXG4gICAgICAgIGNvbnN0IG1pbldpZHRoID0gY29sdW1uLnN0eWxlLm1pbldpZHRoIHx8IDMwO1xyXG4gICAgICAgIC8vIOaWsOWuveW6puWkp+S6juaIluetieS6juacgOWwj+WuveW6puaXtlxyXG4gICAgICAgIG5ld0NvbHVtbldpZHRoID0gbmV3Q29sdW1uV2lkdGggPiBtaW5XaWR0aCA/IG5ld0NvbHVtbldpZHRoIDogbWluV2lkdGg7XHJcbiAgICAgICAgLy8g6YeN5paw6K6+572u5a695bqmXHJcbiAgICAgICAgbGV0IGNvbEluZGV4ID0gLTE7XHJcbiAgICAgICAgY29uc3Qgb3RoZXJzQ29sID0gW107XHJcbiAgICAgICAgY29uc3QgY29scyA9IHRoaXMudGFibGVIZWFkZXIubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCd0aCcpO1xyXG5cclxuICAgICAgICAvLyDniLboioLngrnlrr3luqZcclxuICAgICAgICBjb25zdCBwYXJlbnRXaWR0aCA9IGNvbHVtbi5wYXJlbnRFbGVtZW50Lm9mZnNldFdpZHRoO1xyXG4gICAgICAgIC8vIOWIpOaWreaYr+S4jeaYr+aciWNoZWNrYm94XHJcbiAgICAgICAgY29uc3QgZmlyc3RFbGVtZW50ID0gY29sdW1uLnBhcmVudEVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQ7XHJcbiAgICAgICAgY29uc3QgY2hlY2tCb3hXaWR0aCA9IHRoaXMuaXNDaGVja0JveChmaXJzdEVsZW1lbnQsICdkdC1jaGVja2JveC1jZWxsJykgPyBmaXJzdEVsZW1lbnQub2Zmc2V0V2lkdGggOiAwO1xyXG4gICAgICAgIC8vIOWFtuS7luWIl+WuveW6plxyXG4gICAgICAgIGxldCBvdGhlcnNXaWR0aCA9IHBhcmVudFdpZHRoIC0gY29sdW1uV2lkdGggLSBjaGVja0JveFdpZHRoO1xyXG4gICAgICAgIGxldCBuZXdPdGhlcnNXaWR0aCA9IHBhcmVudFdpZHRoIC0gbmV3Q29sdW1uV2lkdGggLSBjaGVja0JveFdpZHRoO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29scy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoY29sc1tpXSA9PT0gY29sdW1uKSB7XHJcbiAgICAgICAgICAgICAgICBjb2xJbmRleCA9IGk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0NoZWNrQm94KGNvbHNbaV0sICdkdC1jaGVja2JveC1jZWxsJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnN0IHJhdGUgPSBjb2xzW2ldLm9mZnNldFdpZHRoIC8gb3RoZXJzV2lkdGg7XHJcbiAgICAgICAgICAgICAgICBpZiAocmF0ZSA+IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhjb2xzW2ldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGxldCBjb2xXaWR0aCA9IG5ld090aGVyc1dpZHRoICogcmF0ZTtcclxuICAgICAgICAgICAgICAgIGlmIChuZXdPdGhlcnNXaWR0aCAqIHJhdGUgPiAxNSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbFdpZHRoID0gbmV3T3RoZXJzV2lkdGggKiByYXRlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb2xXaWR0aCA9IDE1O1xyXG4gICAgICAgICAgICAgICAgICAgIG90aGVyc1dpZHRoID0gb3RoZXJzV2lkdGggLSBjb2xXaWR0aDtcclxuICAgICAgICAgICAgICAgICAgICBuZXdPdGhlcnNXaWR0aCA9IG5ld090aGVyc1dpZHRoIC0gY29sV2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3Q29sdW1uV2lkdGggPSBuZXdDb2x1bW5XaWR0aCAtIDE1ICsgbmV3T3RoZXJzV2lkdGggKiByYXRlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgb3RoZXJzQ29sLnB1c2goeyBjb2xJbmRleDogaSwgY29sV2lkdGggfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5yZXNpemVDb2xHcm91cCh0aGlzLmR0SGVhZGVyLmVsLm5hdGl2ZUVsZW1lbnQsIGNvbEluZGV4LCBuZXdDb2x1bW5XaWR0aCwgb3RoZXJzQ29sKTtcclxuICAgICAgICB0aGlzLnJlc2l6ZUNvbEdyb3VwKHRoaXMuZHRCb2R5LmVsLm5hdGl2ZUVsZW1lbnQsIGNvbEluZGV4LCBuZXdDb2x1bW5XaWR0aCwgb3RoZXJzQ29sKTtcclxuICAgICAgICAvLyDorqHnrpflrr3luqblrozmr5UgIOiuvue9ruaLluaLvee6v+makOiXj1xyXG4gICAgICAgIHRoaXMuZHJhZ0xpbmUubmF0aXZlRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgfVxyXG4gICAgaXNDaGVja0JveChlbGVtZW50cywgY05hbWUpIHtcclxuICAgICAgICByZXR1cm4gISFlbGVtZW50cy5jbGFzc05hbWUubWF0Y2gobmV3IFJlZ0V4cCgnKFxcXFxzfF4pJyArIGNOYW1lICsgJyhcXFxcc3wkKScpKTtcclxuICAgIH1cclxuICAgIHJlc2l6ZUNvbEdyb3VwKHRhYmxlLCByZXNpemVDb2x1bW5JbmRleCwgbmV3Q29sdW1uV2lkdGgsIG90aGVyc0NvbHVtbikge1xyXG4gICAgICAgIGlmICh0YWJsZSkge1xyXG4gICAgICAgICAgICAvLyDmraTlpITopoHop4bkuI3lkIznmoTooajmoLznu5PmnoTmnaXnoa7lrpog5pys57uE5Lu25LitICBoZWFkZXLlkoxib2R557uT5p6E55u45ZCMXHJcbiAgICAgICAgICAgIGNvbnN0IGNvbEdyb3VwID0gdGFibGUuY2hpbGROb2Rlc1swXS5jaGlsZHJlblswXS5ub2RlTmFtZSA9PT0gJ0NPTEdST1VQJyA/XHJcbiAgICAgICAgICAgICAgICB0YWJsZS5jaGlsZE5vZGVzWzBdLmNoaWxkcmVuWzBdIDogbnVsbDtcclxuICAgICAgICAgICAgaWYgKGNvbEdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb2wgPSBjb2xHcm91cC5jaGlsZHJlbltyZXNpemVDb2x1bW5JbmRleF07XHJcbiAgICAgICAgICAgICAgICBjb2wuc3R5bGUud2lkdGggPSBuZXdDb2x1bW5XaWR0aCArICdweCc7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG90aGVyc0NvbHVtbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG90aGVyQ29sID0gY29sR3JvdXAuY2hpbGRyZW5bb3RoZXJzQ29sdW1uW2ldLmNvbEluZGV4XTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob3RoZXJDb2wgJiYgb3RoZXJzQ29sdW1uW2ldLmNvbFdpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG90aGVyQ29sLnN0eWxlLndpZHRoID0gb3RoZXJzQ29sdW1uW2ldLmNvbFdpZHRoICsgJ3B4JztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Njcm9sbGFibGUgdGFibGVzIHJlcXVpcmUgYSBjb2xncm91cCB0byBzdXBwb3J0IHJlc2l6YWJsZSBjb2x1bW5zJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBvblNjcm9sbFgoZTogYW55KSB7XHJcbiAgICAgICAgLy8g5qiq5ZCR5rua5YqoIOmdnuWbuuWumuihqOWktOa7muWKqFxyXG4gICAgICAgIGNvbnN0IHggPSBlLnNyY0VsZW1lbnQuc2Nyb2xsTGVmdDtcclxuICAgICAgICB0aGlzLnRhYmxlSGVhZGVyLm5hdGl2ZUVsZW1lbnQuc2Nyb2xsVG8oeCwgMCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOa7muWKqOadoee6teWQkea7muWKqFxyXG4gICAgICovXHJcbiAgICBvblNjcm9sbFkoZTogYW55KSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmhhc0ZpeGVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgeSA9IGUuc3JjRWxlbWVudC5zY3JvbGxUb3A7XHJcbiAgICAgICAgdGhpcy5kdExlZnRGaXhlZC5uYXRpdmVFbGVtZW50LnN0eWxlLnRvcCA9IC15ICsgJ3B4JztcclxuICAgICAgICB0aGlzLmR0UmlnaHRGaXhlZC5uYXRpdmVFbGVtZW50LnN0eWxlLnRvcCA9IC15ICsgJ3B4JztcclxuXHJcbiAgICB9XHJcblxyXG4gICAgb25QYWdlQ2hhbmdlKHBhZ2U6IHsgcGFnZUluZGV4OiBudW1iZXIsIHBhZ2VTaXplOiBudW1iZXIgfSkge1xyXG4gICAgICAgIGlmICh0aGlzLnBhZ2VJbmRleCAhPT0gcGFnZS5wYWdlSW5kZXgpIHtcclxuICAgICAgICAgICAgdGhpcy5wYWdlSW5kZXggPSBwYWdlLnBhZ2VJbmRleDtcclxuICAgICAgICAgICAgdGhpcy5wYWdpbmF0aW9uT3B0aW9ucy5jdXJyZW50UGFnZSA9IHBhZ2UucGFnZUluZGV4O1xyXG4gICAgICAgICAgICB0aGlzLnBhZ2VDaGFuZ2VkLmVtaXQoeyBwYWdlSW5mbzogcGFnZSwgc2VhcmNoOiB0aGlzLnNlYXJjaERhdGEsIHNvcnROYW1lOiB0aGlzLnNvcnROYW1lLCBzb3J0T3JkZXI6IHRoaXMuc29ydE9yZGVyIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvblBhZ2VTaXplQ2hhbmdlKHBhZ2VTaXplOiBudW1iZXIpIHtcclxuICAgICAgICBpZiAodGhpcy5wYWdlU2l6ZSAhPT0gcGFnZVNpemUgJiYgdGhpcy50b3RhbCkge1xyXG4gICAgICAgICAgICB0aGlzLnBhZ2luYXRpb25PcHRpb25zLml0ZW1zUGVyUGFnZSA9IHBhZ2VTaXplO1xyXG4gICAgICAgICAgICB0aGlzLnBhZ2VTaXplID0gcGFnZVNpemU7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB0b3RhbCA9IHRoaXMudG90YWw7XHJcbiAgICAgICAgICAgIGxldCBwYWdlTGVuZ3RoID0gTWF0aC5mbG9vcih0b3RhbCAvIHBhZ2VTaXplKTtcclxuICAgICAgICAgICAgaWYgKHRvdGFsICUgcGFnZVNpemUgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBwYWdlTGVuZ3RoICs9IDE7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChwYWdlTGVuZ3RoICYmIHRoaXMucGFnZUluZGV4ID4gcGFnZUxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wYWdlSW5kZXggPSBwYWdlTGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wYWdpbmF0aW9uT3B0aW9ucy5jdXJyZW50UGFnZSA9IHRoaXMucGFnZUluZGV4O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnBhZ2VTaXplQ2hhbmdlZC5lbWl0KHtcclxuICAgICAgICAgICAgICAgIHBhZ2VJbmZvOiB7IHBhZ2VJbmRleDogdGhpcy5wYWdlSW5kZXgsIHBhZ2VTaXplIH0sXHJcbiAgICAgICAgICAgICAgICBzZWFyY2g6IHRoaXMuc2VhcmNoRGF0YSwgc29ydE5hbWU6IHRoaXMuc29ydE5hbWUsIHNvcnRPcmRlcjogdGhpcy5zb3J0T3JkZXJcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnRhYmxlUGFnZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbFdpZHRoID0gdGhpcy50YWJsZVBhZ2VyLm5hdGl2ZUVsZW1lbnQuc2Nyb2xsV2lkdGg7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB0aGlzLnBnU2Nyb2xsTGVmdCA9IDA7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uU2VhcmNoKCRldmVudCkge1xyXG4gICAgICAgIGlmICgkZXZlbnQub3JpZ2luYWxFdmVudCkge1xyXG4gICAgICAgICAgICAkZXZlbnQub3JpZ2luYWxFdmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZWFyY2guZW1pdCh0aGlzLnNlYXJjaERhdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ2hlY2tBbGwoc3RhdGU6IGJvb2xlYW4pIHtcclxuICAgICAgICB0aGlzLmRhdGFTZXJ2aWNlLnNlbGVjdGVkQWxsLm5leHQoc3RhdGUpO1xyXG4gICAgICAgIHRoaXMuY2hlY2tBbGwuZW1pdChzdGF0ZSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIG9uU2VsZWN0ZWRSb3coZTogYW55KSB7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZFJvdy5lbWl0KHsgZGF0YTogZS5yb3dEYXRhLCBpbmRleDogZS5yb3dJbmRleCB9KTtcclxuICAgICAgICAvLyDlhbzlrrlcclxuICAgICAgICB0aGlzLnNlbGVjdFJvd3MuZW1pdCh7IGRhdGE6IGUucm93RGF0YSwgaW5kZXg6IGUucm93SW5kZXggfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLXNoYWRvd2VkLXZhcmlhYmxlXHJcbiAgICByZXNpemUoc2l6ZTogeyB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciB9KSB7XHJcbiAgICAgICAgdGhpcy53aWR0aCA9IHNpemUud2lkdGg7XHJcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBzaXplLmhlaWdodDtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRCb2R5SGVpZ2h0KCk7ICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIGxvYWREYXRhKGU6IHsgcGFnZVNpemU6IG51bWJlciwgdG90YWw6IG51bWJlciwgZGF0YTogYW55LCBwYWdlSW5kZXg6IG51bWJlciB9KSB7XHJcbiAgICAgICAgdGhpcy5kYXRhID0gZS5kYXRhO1xyXG4gICAgICAgIGlmICh0aGlzLnBhZ2luYXRpb24pIHtcclxuICAgICAgICAgICAgY29uc3QgeyB0b3RhbCA9IDAsIHBhZ2VTaXplID0gMjAsIHBhZ2VJbmRleCA9IDEgfSA9IHsgLi4uZSB9O1xyXG4gICAgICAgICAgICB0aGlzLnBhZ2luYXRpb25PcHRpb25zLnRvdGFsSXRlbXMgPSB0b3RhbDtcclxuICAgICAgICAgICAgdGhpcy5wYWdpbmF0aW9uT3B0aW9ucy5pdGVtc1BlclBhZ2UgPSBwYWdlU2l6ZTtcclxuICAgICAgICAgICAgdGhpcy5wYWdpbmF0aW9uT3B0aW9ucy5jdXJyZW50UGFnZSA9IHBhZ2VJbmRleDtcclxuICAgICAgICAgICAgdGhpcy5wYWdpbmF0aW9uT3B0aW9ucy5wYWdlTGlzdCA9IHRoaXMucGFnZUxpc3Q7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnBhZ2luYXRpb25PcHRpb25zID0gey4uLnRoaXMucGFnaW5hdGlvbk9wdGlvbnN9O1xyXG4gICAgICAgICAgICB0aGlzLnRvdGFsID0gdG90YWw7XHJcbiAgICAgICAgICAgIHRoaXMucGFnZVNpemUgPSBwYWdlU2l6ZTtcclxuICAgICAgICAgICAgdGhpcy5wYWdlSW5kZXggPSBwYWdlSW5kZXg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY2QuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlQ2hlY2tib3hTdGF0ZSh0aGlzLmRhdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qXHJcbiAgICAgKi9cclxuICAgIG9uQ2VsbENsaWNrKGUpIHtcclxuICAgICAgICB0aGlzLmNlbGxDbGljay5lbWl0KGUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qIOa3u+WKoOihjCAqL1xyXG4gICAgYWRkUm93cyhkYXRhSXRlbSkge1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IHRoaXMuZGF0YS5jb25jYXQoZGF0YUl0ZW0pO1xyXG4gICAgfVxyXG4gICAgLyog5Yig6Zmk6KGMICovXHJcbiAgICByZW1vdmVSb3dzKCkge1xyXG4gICAgICAgIGNvbnN0IFNFTEVDVElPTlMgPSB0aGlzLnNlbGVjdGlvbnM7XHJcbiAgICAgICAgaWYgKHRoaXMuc2luZ2xlU2VsZWN0KSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5kYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5kYXRhW2ldID09PSBTRUxFQ1RJT05TKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgU0VMRUNUSU9OUy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmRhdGEubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoU0VMRUNUSU9OU1tpXVt0aGlzLmlkRmllbGRdID09PSB0aGlzLmRhdGFbal1bdGhpcy5pZEZpZWxkXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGEuc3BsaWNlKGosIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjaGVja1JvdyhyaWQ6IGFueSwgZW1pdCA9IGZhbHNlKSB7XHJcbiAgICAgICAgbGV0IHJvd0luZGV4ID0gLTE7XHJcbiAgICAgICAgY29uc3Qgcm93RGF0YSA9IHRoaXMuZGF0YS5maW5kKChuLCBpKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChuW3RoaXMuaWRGaWVsZF0gPT0gcmlkKSB7XHJcbiAgICAgICAgICAgICAgICByb3dJbmRleCA9IGk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgaWYgKCFyb3dEYXRhKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5zZWxlY3Rpb25zKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9ucyA9IHsgW3JpZF06IHJvd0RhdGEgfTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvbnMgPSB7XHJcbiAgICAgICAgICAgICAgICBbcmlkXTogcm93RGF0YSwgLi4udGhpcy5zZWxlY3Rpb25zLnJlZHVjZSgociwgbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJbblt0aGlzLmlkRmllbGRdXSA9IG47XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHI7XHJcbiAgICAgICAgICAgICAgICB9LCB7fSlcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZGF0YVNlcnZpY2Uuc2VsZWN0ZWRSb3cubmV4dCh7XHJcbiAgICAgICAgICAgIHJvd0luZGV4LFxyXG4gICAgICAgICAgICByb3dEYXRhXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmIChlbWl0KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHAgPSB7IGRhdGE6IHJvd0RhdGEsIGluZGV4OiByb3dJbmRleCB9O1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93LmVtaXQocCk7XHJcbiAgICAgICAgICAgIC8vIOWFvOWuuVxyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdFJvd3MuZW1pdChwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdW5DaGVja1JvdyhyaWQ6IGFueSwgZW1pdCA9IGZhbHNlKSB7XHJcbiAgICAgICAgbGV0IHJvd0luZGV4ID0gLTE7XHJcbiAgICAgICAgY29uc3Qgcm93RGF0YSA9IHRoaXMuZGF0YS5maW5kKChuLCBpKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChuW3RoaXMuaWRGaWVsZF0gPT0gcmlkKSB7XHJcbiAgICAgICAgICAgICAgICByb3dJbmRleCA9IGk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGlvbnMpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25zID0gdGhpcy5zZWxlY3Rpb25zLmZpbHRlcihuID0+IG5bdGhpcy5pZEZpZWxkXSAhPSByaWQpLnJlZHVjZSgociwgbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgcltuW3RoaXMuaWRGaWVsZF1dID0gbjtcclxuICAgICAgICAgICAgICAgIHJldHVybiByO1xyXG4gICAgICAgICAgICB9LCB7fSk7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YVNlcnZpY2UudW5TZWxlY3RlZFJvdy5uZXh0KHtcclxuICAgICAgICAgICAgICAgIHJvd0luZGV4LFxyXG4gICAgICAgICAgICAgICAgcm93RGF0YVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKGVtaXQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudW5TZWxlY3RSb3cuZW1pdCh7IGRhdGE6IHJvd0RhdGEsIGluZGV4OiByb3dJbmRleCB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjbGVhclNlbGVjdGlvbnMoKSB7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIG9uS2V5ZG93bkV2ZW50KCRldmVudCkge1xyXG4gICAgICAgIGlmICghJGV2ZW50IHx8ICF0aGlzLnNpbmdsZVNlbGVjdCB8fCAhdGhpcy5kYXRhIHx8ICF0aGlzLmRhdGEubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghWydBcnJvd0Rvd24nLCAnQXJyb3dVcCddLmluY2x1ZGVzKCRldmVudC5jb2RlKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgbGV0IG5ld0lkeDtcclxuICAgICAgICBpZiAoJGV2ZW50LmNvZGUgPT09ICdBcnJvd0Rvd24nKSB7XHJcbiAgICAgICAgICAgIG5ld0lkeCA9IHRoaXMuX2N1cnJlbnRSb3dJbmRleCArIDE7XHJcbiAgICAgICAgICAgIGlmIChuZXdJZHggPj0gdGhpcy5kYXRhLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgbmV3SWR4ID0gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoJGV2ZW50LmNvZGUgPT09ICdBcnJvd1VwJykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fY3VycmVudFJvd0luZGV4ICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgbmV3SWR4ID0gdGhpcy5fY3VycmVudFJvd0luZGV4IC0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKG5ld0lkeCA+PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZHRCb2R5LnNlbGVjdGVkUm93KCRldmVudCwgbmV3SWR4LCB0aGlzLmRhdGFbbmV3SWR4XSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgLy8gc2Nyb2xsIGludG9WaWV3XHJcbiAgICAgICAgICAgIGNvbnN0IHRyRG9tcyA9IHRoaXMuZHRCb2R5LmVsLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnVpLXRhYmxlLXRib2R5IHRyJyk7XHJcbiAgICAgICAgICAgIGlmICh0ckRvbXMgJiYgdHJEb21zW3RoaXMuX2N1cnJlbnRSb3dJbmRleF0pIHtcclxuICAgICAgICAgICAgICAgIHRyRG9tc1t0aGlzLl9jdXJyZW50Um93SW5kZXhdLnNjcm9sbEludG9WaWV3KHsgYmxvY2s6ICduZWFyZXN0JyB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG4iXX0=