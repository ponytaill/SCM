/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, ViewChild, ElementRef, Renderer2, ChangeDetectorRef, HostBinding, Output, EventEmitter, NgZone } from "@angular/core";
import { ResponseToolbarDropDown, ResponseToolbarItem, ResponseToolbarGroup } from "../model/response-toolbar.model";
import { FResizedDirective } from "../resized/f-resized.directive";
import { Subject, Observable } from "rxjs";
import { debounceTime } from "rxjs/operators";
import { LocaleService } from "@farris/ui-locale";
import ResizeObserver from "resize-observer-polyfill";
var ResponseToolbarComponent = /** @class */ (function () {
    function ResponseToolbarComponent(el, render, cd, localeService) {
        this.render = render;
        this.cd = cd;
        this.localeService = localeService;
        this.frtCls = true;
        this.prCls = true;
        // 传递点击事件
        this.rtClickEvent = new EventEmitter();
        // 辅助计算宽度数据
        this.auxiliaryDatas = [];
        // 控制父元素滚动的样式
        //  private _dpState = false;
        //
        this.ro = null;
        // 记录容器宽度
        this.containerWidthRecord = 0;
        // 记录变化
        this.needResponseChanges = 0;
        this.referEl = null;
        this.dpState = [false];
        // 用来内部记录
        this._auxiliary = -1;
        this.resizeGroups = [];
        // 记录格式化后的数据
        this.toolbarDatas = [];
        this.distanceThreshold = 20;
        this.isUpdateTBView = false;
        this._stateDatas = new Subject();
        this._btnVisibleDatas = new Subject();
        this.clickThrottleTime = 350;
        this.clickItems = new Subject();
        this.rtSize = "";
        /*强制方向，默认为空值，可以有top、bottom，朝上、朝下。
             * 使用场景：工具栏内部的下拉，需要朝上或者需要朝下展开，统一控制
             */
        this.popDirection = "";
        // right按钮靠右 left按钮靠左
        this.btnAlign = "right";
        this.ngZone = null;
        this._selfEl = el.nativeElement;
        if (el.nativeElement.parentElement) {
            this.referEl = el.nativeElement.parentElement;
        }
    }
    Object.defineProperty(ResponseToolbarComponent.prototype, "groups", {
        // 内部记录格式化后的初始数据-------------------------暂时不用
        // _toolbarDatas: Array<ResponseToolbarItem | ResponseToolbarDropDown> = [];
        set: 
        // 内部记录格式化后的初始数据-------------------------暂时不用
        // _toolbarDatas: Array<ResponseToolbarItem | ResponseToolbarDropDown> = [];
        /**
         * @param {?} values
         * @return {?}
         */
        function (values) {
            var _this = this;
            if (values) {
                this.resizeGroups = [];
                values.forEach((/**
                 * @param {?} group
                 * @return {?}
                 */
                function (group) {
                    _this.resizeGroups.push(new ResponseToolbarGroup(group.id, group.name));
                    // 还没有计算预置排序
                }));
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ResponseToolbarComponent.prototype, "datas", {
        set: /**
         * @param {?} values
         * @return {?}
         */
        function (values) {
            if (values) {
                this.toolbarDatas = this._formatData(values);
                this.needResponseChanges++;
                // 处理分组数据
                this._reOrganizeResizeGroups();
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ResponseToolbarComponent.prototype, "btnState", {
        // 按钮的禁用状态
        set: 
        // 按钮的禁用状态
        /**
         * @param {?} values
         * @return {?}
         */
        function (values) {
            this._stateDatas = values;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ResponseToolbarComponent.prototype, "btnVisible", {
        // 按钮的查看状态
        set: 
        // 按钮的查看状态
        /**
         * @param {?} values
         * @return {?}
         */
        function (values) {
            this._btnVisibleDatas = values;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ResponseToolbarComponent.prototype, "buttonSize", {
        get: /**
         * @return {?}
         */
        function () {
            return this.rtSize;
        },
        /*尺寸：有sm,lg,空值，默认是空值 */
        set: /*尺寸：有sm,lg,空值，默认是空值 */
        /**
         * @param {?} btnSize
         * @return {?}
         */
        function (btnSize) {
            if (btnSize != this.rtSize) {
                this.rtSize &&
                    this.render.removeClass(this._selfEl, "f-response-toolbar-" + this.rtSize);
                this.rtSize = btnSize;
                this.rtSize &&
                    this.render.addClass(this._selfEl, "f-response-toolbar-" + this.rtSize);
            }
        },
        enumerable: true,
        configurable: true
    });
    // 因为旧模板带有这个方法
    // 因为旧模板带有这个方法
    /**
     * @return {?}
     */
    ResponseToolbarComponent.prototype.ngAfterViewInit = 
    // 因为旧模板带有这个方法
    /**
     * @return {?}
     */
    function () { };
    // 因为旧模板带有这个方法
    // 因为旧模板带有这个方法
    /**
     * @return {?}
     */
    ResponseToolbarComponent.prototype.ngDoCheck = 
    // 因为旧模板带有这个方法
    /**
     * @return {?}
     */
    function () { };
    /**
     * @return {?}
     */
    ResponseToolbarComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        // 去掉overflow之后
        this.render.addClass(this.auxiliaryContainerEl.nativeElement, "response-toolbar-hidden-element");
        // 按钮的禁用状态
        this._stateDatas.subscribe((/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            _this.changeState(data);
        }));
        // 按钮的可见状态
        this._btnVisibleDatas.subscribe((/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            _this.changeVisible(data);
        }));
        this.observerElement();
        //处理表单加载后的按钮变化
        this.ngZone.runOutsideAngular((/**
         * @return {?}
         */
        function () {
            /** @type {?} */
            var selfObj = _this;
            setTimeout((/**
             * @return {?}
             */
            function () {
                selfObj.responseResize();
            }), 0);
        }));
        // 拦截点击事件只传递第一次点击事件的处理操作交给parent来处理
        this.clickSubscription = this.clickItems
            .pipe(debounceTime(this.clickThrottleTime))
            .subscribe((/**
         * @param {?} eventDatas
         * @return {?}
         */
        function (eventDatas) {
            _this.rtClickEvent.emit(eventDatas);
        }));
        if (this.popDirection === 'default') {
            this.popDirection = '';
        }
    };
    /**
     * @return {?}
     */
    ResponseToolbarComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        if (this.ro) {
            this.ro.unobserve(this.resizedContainerEl.nativeElement);
            this.ro = null;
        }
        if (this.clickSubscription) {
            this.clickSubscription.unsubscribe();
        }
    };
    /**
     * @return {?}
     */
    ResponseToolbarComponent.prototype.ngAfterViewChecked = /**
     * @return {?}
     */
    function () {
        if (this.needResponseChanges > 0) {
            this.needResponseChanges--;
            this.responseResize();
        }
        else if (this.auxiliaryDatas.length > 0) {
            this._calculate(true, this.auxiliaryContainerEl.nativeElement.offsetWidth);
        }
    };
    // 因为旧模板带有这个方法
    // 因为旧模板带有这个方法
    /**
     * @param {?} event
     * @return {?}
     */
    ResponseToolbarComponent.prototype.onResize = 
    // 因为旧模板带有这个方法
    /**
     * @param {?} event
     * @return {?}
     */
    function (event) { };
    /**
     * 兼容旧模板旧方法
     * 在不存在ngZone的情况下，创建ngZone,然后绑定事件
     */
    /**
     * 兼容旧模板旧方法
     * 在不存在ngZone的情况下，创建ngZone,然后绑定事件
     * @private
     * @return {?}
     */
    ResponseToolbarComponent.prototype.observerElement = /**
     * 兼容旧模板旧方法
     * 在不存在ngZone的情况下，创建ngZone,然后绑定事件
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (!this.ngZone) {
            /** @type {?} */
            var moduleInjector = this.cd["_view"].root.ngModule.injector;
            this.ngZone = moduleInjector.get(NgZone, null);
        }
        this.ngZone.runOutsideAngular((/**
         * @return {?}
         */
        function () {
            _this.ro = new ResizeObserver((/**
             * @param {?} entries
             * @param {?} observer
             * @return {?}
             */
            function (entries, observer) {
                /** @type {?} */
                var tempWidth = entries[0].contentRect.width;
                if (Math.abs(tempWidth - _this.containerWidthRecord) >
                    _this.distanceThreshold) {
                    _this.responseResize();
                    _this.containerWidthRecord = tempWidth;
                }
            }));
            _this.ro.observe(_this.resizedContainerEl.nativeElement);
        }));
    };
    /**
     * 强制转换方向
     * @param selfDefinePL
     * @param defaultPL
     */
    /**
     * 强制转换方向
     * @param {?} selfDefinePL
     * @param {?} defaultPL
     * @return {?}
     */
    ResponseToolbarComponent.prototype.getPlacement = /**
     * 强制转换方向
     * @param {?} selfDefinePL
     * @param {?} defaultPL
     * @return {?}
     */
    function (selfDefinePL, defaultPL) {
        /** @type {?} */
        var oldDirection = selfDefinePL ? selfDefinePL : defaultPL;
        if (!this.popDirection) {
            return oldDirection;
        }
        /** @type {?} */
        var plRelation = { bottom: "top", top: "bottom" };
        oldDirection = oldDirection == "left" ? "left-bottom" : oldDirection;
        oldDirection = oldDirection == "right" ? "right-bottom" : oldDirection;
        /** @type {?} */
        var newDirection = oldDirection.replace(plRelation[this.popDirection], this.popDirection);
        return newDirection;
    };
    /**
     * 调用此方法的场景
     * 1、界面拖拽自动触发
     * 2、显示调用
     */
    /**
     * 调用此方法的场景
     * 1、界面拖拽自动触发
     * 2、显示调用
     * @return {?}
     */
    ResponseToolbarComponent.prototype.responseResize = /**
     * 调用此方法的场景
     * 1、界面拖拽自动触发
     * 2、显示调用
     * @return {?}
     */
    function () {
        /** @type {?} */
        var _distance = this._getDistance();
        if (_distance > 0) {
            // 如果分组都已经处理完,再出现滚动条不管
            /** @type {?} */
            var _tempIndex = this._getFirstUnResponsedIndex();
            if (_tempIndex < 0) {
                return;
            }
            // 所有第一层下拉都収折
            this.dpState = [false];
            var _loop_1 = function (k) {
                /** @type {?} */
                var _tempGroup = this_1.resizeGroups[k];
                this_1._auxiliary = k;
                if (_tempGroup.isResponsing()) {
                    this_1._calculate();
                }
                else {
                    // 如果还未开始处理响应式
                    /** @type {?} */
                    var _tempDP_1 = new ResponseToolbarDropDown({
                        text: _tempGroup.name,
                        id: _tempGroup.id,
                        placement: this_1.popDirection
                            ? this_1.popDirection + "-left"
                            : "bottom-left",
                        width: _tempGroup.getWidth()
                    });
                    // 已经处理过宽度
                    if (_tempDP_1.getWidth()) {
                        this_1.auxiliaryDatas = [_tempDP_1];
                        this_1._calculate(true, _tempDP_1.getWidth());
                    }
                    else {
                        // 更新辅助数据
                        /** @type {?} */
                        var auxiliaryIndex = this_1.auxiliaryDatas.findIndex((/**
                         * @param {?} item
                         * @return {?}
                         */
                        function (item) {
                            return item.id == _tempDP_1.id;
                        }));
                        if (auxiliaryIndex == -1) {
                            this_1.auxiliaryDatas.push(_tempDP_1);
                        }
                        if (this_1.cd && !((/** @type {?} */ (this_1.cd))).destroyed) {
                            this_1.cd.detectChanges();
                        }
                    }
                }
            };
            var this_1 = this;
            for (var k = _tempIndex; k < this.resizeGroups.length; k++) {
                _loop_1(k);
            }
        }
        else {
            // 寻找最后一个处理响应式的元素
            /** @type {?} */
            var _tempIndex = this._getLastResponseIndex();
            if (_tempIndex < 0) {
                return;
            }
            // 临时存储数据
            /** @type {?} */
            var _tempToolbarDatas = [].concat(this.toolbarDatas);
            // 如果已经开始处理响应式
            for (var k = _tempIndex; k >= 0; k--) {
                /** @type {?} */
                var result = this._restitute(_tempToolbarDatas, k);
                _tempToolbarDatas = [].concat(result["data"]);
                if (!result["continueTo"]) {
                    break;
                }
            }
            // 更新数据
            this.toolbarDatas = [].concat(_tempToolbarDatas);
            // 所有第一层下拉都収折
            this.dpState = [false];
            if (this.cd && !((/** @type {?} */ (this.cd))).destroyed) {
                this.cd.detectChanges();
            }
        }
    };
    // 下拉的展开收起状态
    // 下拉的展开收起状态
    /**
     * @param {?} state
     * @param {?} id
     * @return {?}
     */
    ResponseToolbarComponent.prototype.dpSectionState = 
    // 下拉的展开收起状态
    /**
     * @param {?} state
     * @param {?} id
     * @return {?}
     */
    function (state, id) {
        if (state) {
            // 展开状态下
            /** @type {?} */
            var dropdowns = this.resizedContentEl.nativeElement.querySelectorAll("[fDropdown]");
            if (dropdowns && dropdowns.length > 1) {
                for (var k = 0; k < dropdowns.length; k++) {
                    if (dropdowns[k].className.indexOf("show") &&
                        dropdowns[k].id != id) {
                        // dropdowns[k].dispatchEvent(new Event('selfClose'));
                        this.compatibleDispatchEvent(dropdowns[k], "selfClose");
                    }
                }
            }
        }
    };
    /**
     * @private
     * @param {?} eventEl
     * @param {?} eventName
     * @return {?}
     */
    ResponseToolbarComponent.prototype.compatibleDispatchEvent = /**
     * @private
     * @param {?} eventEl
     * @param {?} eventName
     * @return {?}
     */
    function (eventEl, eventName) {
        /** @type {?} */
        var event;
        if (typeof Event === "function") {
            event = new Event(eventName);
        }
        else {
            event = document.createEvent("Event");
            event.initEvent(eventName, false, false);
        }
        eventEl.dispatchEvent(event);
    };
    // 修改启用禁用状态
    // 修改启用禁用状态
    /**
     * @param {?} values
     * @return {?}
     */
    ResponseToolbarComponent.prototype.changeState = 
    // 修改启用禁用状态
    /**
     * @param {?} values
     * @return {?}
     */
    function (values) {
        var _this = this;
        /** @type {?} */
        var idArray = Object.keys(values);
        idArray.forEach((/**
         * @param {?} id
         * @return {?}
         */
        function (id) {
            /** @type {?} */
            var state = values[id];
            /** @type {?} */
            var item = _this._findItemByID(id, _this.toolbarDatas);
            if (item) {
                item["disabled"] = state;
            }
        }));
        if (this.cd && !((/** @type {?} */ (this.cd))).destroyed) {
            this.cd.detectChanges();
        }
    };
    /**
     * 修改显示状态
     * 如果是下拉按钮
     *   判断下面的子是否都隐藏
     * @param values
     */
    /**
     * 修改显示状态
     * 如果是下拉按钮
     *   判断下面的子是否都隐藏
     * @param {?} values
     * @return {?}
     */
    ResponseToolbarComponent.prototype.changeVisible = /**
     * 修改显示状态
     * 如果是下拉按钮
     *   判断下面的子是否都隐藏
     * @param {?} values
     * @return {?}
     */
    function (values) {
        var _this = this;
        /** @type {?} */
        var idArray = Object.keys(values);
        idArray.forEach((/**
         * @param {?} id
         * @return {?}
         */
        function (id) {
            /** @type {?} */
            var visible = values[id];
            /** @type {?} */
            var item = _this._findItemByID(id, _this.toolbarDatas);
            if (item) {
                item["visible"] = visible;
            }
        }));
        // 遍历循环,更新数据
        this.toolbarDatas.forEach((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            // 如果是下拉
            if (item["isDP"]) {
                _this._checkDropdownVisible(values, item);
            }
        }));
        this.needResponseChanges++;
        // 更新
        //this.cd.markForCheck();
        if (this.cd && !((/** @type {?} */ (this.cd))).destroyed) {
            this.cd.detectChanges();
        }
    };
    /**
     * 如果是下拉按钮
     *   判断下面的子是否都隐藏
     *       A. 如果子都隐藏，那么整个下拉都被隐藏；
     *       B. 如果存在子没有隐藏，而且下拉没有被预置隐藏，下拉按钮显示
     * @param outsideVisibleArrays 从组件外传入的可见状态对象
     * @param dropdownItem 下拉元素
     */
    /**
     * 如果是下拉按钮
     *   判断下面的子是否都隐藏
     *       A. 如果子都隐藏，那么整个下拉都被隐藏；
     *       B. 如果存在子没有隐藏，而且下拉没有被预置隐藏，下拉按钮显示
     * @private
     * @param {?} outsideVisibleArrays 从组件外传入的可见状态对象
     * @param {?} dropdownItem 下拉元素
     * @return {?}
     */
    ResponseToolbarComponent.prototype._checkDropdownVisible = /**
     * 如果是下拉按钮
     *   判断下面的子是否都隐藏
     *       A. 如果子都隐藏，那么整个下拉都被隐藏；
     *       B. 如果存在子没有隐藏，而且下拉没有被预置隐藏，下拉按钮显示
     * @private
     * @param {?} outsideVisibleArrays 从组件外传入的可见状态对象
     * @param {?} dropdownItem 下拉元素
     * @return {?}
     */
    function (outsideVisibleArrays, dropdownItem) {
        var _this = this;
        //如果没有被强制设置状态
        if (!outsideVisibleArrays.hasOwnProperty(dropdownItem["id"])) {
            // 下拉元素不可见，判断是否有可见子元素
            if (!dropdownItem["visible"] &&
                this._hasVisibleItem(dropdownItem["children"], true)) {
                dropdownItem["visible"] = true;
            }
            // 下拉元素是可见，判断是否有子元素都不可见
            if (dropdownItem["visible"] &&
                !this._hasVisibleItem(dropdownItem["children"], true)) {
                dropdownItem["visible"] = false;
            }
        }
        dropdownItem.children.forEach((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            if (item["isDP"]) {
                _this._checkDropdownVisible(outsideVisibleArrays, item);
            }
        }));
    };
    /**
     * 在待检查数据中心，检查是否存在该可见状态的数据。
     * 如果有返回true,否则返回false
     * @param datas 待检查数据
     * @param visible 可见状态
     */
    /**
     * 在待检查数据中心，检查是否存在该可见状态的数据。
     * 如果有返回true,否则返回false
     * @private
     * @param {?} datas 待检查数据
     * @param {?} visible 可见状态
     * @return {?}
     */
    ResponseToolbarComponent.prototype._hasVisibleItem = /**
     * 在待检查数据中心，检查是否存在该可见状态的数据。
     * 如果有返回true,否则返回false
     * @private
     * @param {?} datas 待检查数据
     * @param {?} visible 可见状态
     * @return {?}
     */
    function (datas, visible) {
        /** @type {?} */
        var findIndex = datas.findIndex((/**
         * @param {?} childItem
         * @return {?}
         */
        function (childItem) {
            if (childItem["visible"] == visible) {
                return true;
            }
            return false;
        }));
        if (findIndex > -1) {
            return true;
        }
        return false;
    };
    /**
     * 捕获点击
     * @param ev
     */
    /**
     * 捕获点击
     * @param {?} ev
     * @param {?=} ddRef
     * @return {?}
     */
    ResponseToolbarComponent.prototype.clickItem = /**
     * 捕获点击
     * @param {?} ev
     * @param {?=} ddRef
     * @return {?}
     */
    function (ev, ddRef) {
        ev.stopPropagation();
        // 如果是分离的下拉按钮
        if (this.elhasSpecialCls(ev.target, "dropdown-toggle-split")) {
            ev.stopImmediatePropagation();
        }
        // 判断是否点击到需要处理事件的元素上,按钮、下拉按钮
        /** @type {?} */
        var clickEvEl = this.findBtnOrTogglerItemFromClick(ev.target);
        if (clickEvEl) {
            /** @type {?} */
            var tempID = clickEvEl["id"];
            // 修改模板，id调整到下拉整体上
            if (!tempID &&
                this.elhasSpecialCls(clickEvEl["parentNode"], "f-rt-dropdown")) {
                tempID = clickEvEl["parentNode"].id;
            }
            if (tempID) {
                /** @type {?} */
                var tempItem = this._findItemByID(tempID, this.toolbarDatas);
                // 如果元素禁用
                if (tempItem["disabled"]) {
                    // 禁止向上传递
                    ev.stopImmediatePropagation();
                }
                else {
                    this.clickItems.next({
                        id: tempID,
                        text: tempItem["text"],
                        hidden: tempItem["hidden"]
                    });
                    if (ddRef) {
                        ddRef.close();
                    }
                }
            }
        }
        else {
            ev.stopImmediatePropagation();
        }
    };
    /**
     * @private
     * @param {?} clickTarget
     * @return {?}
     */
    ResponseToolbarComponent.prototype.findBtnOrTogglerItemFromClick = /**
     * @private
     * @param {?} clickTarget
     * @return {?}
     */
    function (clickTarget) {
        // 父级标签是否是body,是着停止返回集合,反之继续
        if (this.elhasSpecialCls(clickTarget)) {
            return clickTarget;
        }
        else if (clickTarget.parentNode["className"] && clickTarget.parentNode["className"].indexOf("f-response-content") < 0) {
            /** @type {?} */
            var parentN = clickTarget.parentNode;
            if (this.elhasSpecialCls(parentN)) {
                return parentN;
            }
            else {
                return this.findBtnOrTogglerItemFromClick(parentN);
            }
        }
        // 返回集合,结束
        return null;
    };
    /**
     * @private
     * @param {?} el
     * @param {?=} clsName
     * @return {?}
     */
    ResponseToolbarComponent.prototype.elhasSpecialCls = /**
     * @private
     * @param {?} el
     * @param {?=} clsName
     * @return {?}
     */
    function (el, clsName) {
        if (clsName === void 0) { clsName = ""; }
        if (el) {
            /** @type {?} */
            var classNameList = el.classList;
            /** @type {?} */
            var findCls = false;
            for (var k = 0; k < classNameList.length; k++) {
                if (clsName) {
                    if (classNameList[k] == clsName) {
                        findCls = true;
                        break;
                    }
                }
                else {
                    if (classNameList[k] == "f-rt-btn" ||
                        classNameList[k] == "f-rt-toggle") {
                        findCls = true;
                        break;
                    }
                }
            }
            return findCls;
        }
        return false;
    };
    /**
     * 根据传递的数据重新组建分组
     * ToDo 暂时没有更复杂的分组，否则需要记录分组
     */
    /**
     * 根据传递的数据重新组建分组
     * ToDo 暂时没有更复杂的分组，否则需要记录分组
     * @private
     * @return {?}
     */
    ResponseToolbarComponent.prototype._reOrganizeResizeGroups = /**
     * 根据传递的数据重新组建分组
     * ToDo 暂时没有更复杂的分组，否则需要记录分组
     * @private
     * @return {?}
     */
    function () {
        // 处理分组数据
        //  if (this.resizeGroups.length === 0) {
        /** @type {?} */
        var moreText = "更多";
        if (this.localeService) {
            moreText = this.localeService.getValue("responseToolbar.more");
        }
        /** @type {?} */
        var defaultResizeGroup = new ResponseToolbarGroup("toolbar-group-1", moreText);
        for (var i = this.toolbarDatas.length - 1; i >= 0; i--) {
            defaultResizeGroup.setPreset(this.toolbarDatas[i]["id"]);
        }
        this.resizeGroups = [].concat(defaultResizeGroup);
        // this.cd.markForCheck();
        if (this.cd && !((/** @type {?} */ (this.cd))).destroyed) {
            this.cd.detectChanges();
        }
    };
    /**
     * 内容与容器的差值
     */
    /**
     * 内容与容器的差值
     * @private
     * @return {?}
     */
    ResponseToolbarComponent.prototype._getDistance = /**
     * 内容与容器的差值
     * @private
     * @return {?}
     */
    function () {
        return (this.resizedContentEl.nativeElement.offsetWidth -
            this.resizedContainerEl.nativeElement.offsetWidth);
    };
    /**
     * 根据返回结果判断是否继续
     * @param groupIndex
     */
    /**
     * 根据返回结果判断是否继续
     * @private
     * @param {?} originalData
     * @param {?} groupIndex
     * @return {?}
     */
    ResponseToolbarComponent.prototype._restitute = /**
     * 根据返回结果判断是否继续
     * @private
     * @param {?} originalData
     * @param {?} groupIndex
     * @return {?}
     */
    function (originalData, groupIndex) {
        /** @type {?} */
        var tempGroup = this.resizeGroups[groupIndex];
        // 滚动条和内容的距离
        /** @type {?} */
        var tempDistance = this._getDistance();
        // 计算最后一个下拉的宽度
        /** @type {?} */
        var tempGroupData = originalData[this._findIndexByID(originalData, tempGroup.id)];
        // 找到还原的位置
        /** @type {?} */
        var tempPresetIndex = [].concat(tempGroup.responsedIndex);
        // 排除原下拉子元素被计算
        for (var j = tempPresetIndex.length - 1; j >= 0; j--) {
            if (tempDistance >= 0) {
                break;
            }
            // 从下拉中移除
            /** @type {?} */
            var tempChildData = tempGroupData.children[0];
            /** @type {?} */
            var specialDistance = j === 0 ? tempGroupData.getWidth() : 0;
            tempDistance =
                tempDistance +
                    (tempChildData.getWidth() ? tempChildData.getWidth() : 0) -
                    specialDistance;
            if (tempDistance >= 0) {
                break;
            }
            else {
                // 更新下拉
                tempGroupData.removeChild();
                // 插入到原位置
                originalData.splice(tempPresetIndex[j], 0, tempChildData);
                // 更新位置
                tempGroup.removeResponsed(j);
                if (j === 0) {
                    originalData.splice(this._findIndexByID(originalData, tempGroup.id), 1);
                }
            }
        }
        return {
            continueTo: tempDistance > 0 ? true : false,
            data: originalData
        };
    };
    /**
     * 开始计算
     * @param datas
     */
    /**
     * 开始计算
     * @private
     * @param {?=} auxiliary
     * @param {?=} tGroupWidth
     * @return {?}
     */
    ResponseToolbarComponent.prototype._calculate = /**
     * 开始计算
     * @private
     * @param {?=} auxiliary
     * @param {?=} tGroupWidth
     * @return {?}
     */
    function (auxiliary, tGroupWidth) {
        if (auxiliary === void 0) { auxiliary = false; }
        if (tGroupWidth === void 0) { tGroupWidth = 0; }
        if (this._auxiliary < 0) {
            return;
        }
        // 记录需要修改的下拉
        /** @type {?} */
        var tempDP;
        // 滚动条和内容的距离
        /** @type {?} */
        var tempDistance = this._getDistance() + tGroupWidth;
        // 临时存储数据
        /** @type {?} */
        var tempToolbarDatas = [].concat(this.toolbarDatas);
        /** @type {?} */
        var tempGroup = this.resizeGroups[this._auxiliary];
        if (auxiliary) {
            tempDP = this.auxiliaryDatas.pop();
            tempDP.setWidth(tGroupWidth);
            tempGroup.setWidth(tGroupWidth);
        }
        else {
            tempDP =
                tempToolbarDatas[this._findIndexByID(tempToolbarDatas, tempGroup.id)];
        }
        // 当前剩余隐藏
        for (var j = tempGroup.responsedIndex.length; j < tempGroup.presetId.length; j++) {
            if (tempDistance <= 0) {
                break;
            }
            // 计算在当前数据中的位置，根据这个位置可以找宽度
            /** @type {?} */
            var tempOldIndex = (/** @type {?} */ (this._findIndexByID(this.toolbarDatas, tempGroup.presetId[j])));
            /** @type {?} */
            var tempNewIndex = (/** @type {?} */ (this._findIndexByID(tempToolbarDatas, tempGroup.presetId[j])));
            // 计算按钮宽度
            /** @type {?} */
            var tempWidth = (/** @type {?} */ (this.toolbarDatas[tempOldIndex].getWidth()));
            if (tempWidth === 0) {
                // 按钮宽度未曾被计算过
                tempWidth = this._getWidthFromElementsById(tempGroup.presetId[j]);
                tempToolbarDatas[tempNewIndex].setWidth(tempWidth);
            }
            else if (tempWidth === false) {
                // 按钮被隐藏
                tempWidth = 0;
            }
            tempDP.addChild(tempToolbarDatas[tempNewIndex]);
            // 移除
            tempToolbarDatas.splice(tempNewIndex, 1);
            // 保存位置用于还原
            tempGroup.setResponsed(tempNewIndex);
            tempDistance = tempDistance - tempWidth;
        }
        if (auxiliary && tempDP.hasChild()) {
            // 插入
            tempToolbarDatas.push(tempDP);
        }
        this._auxiliary = -1;
        this.toolbarDatas = [].concat(tempToolbarDatas);
        if (this.cd && !((/** @type {?} */ (this.cd))).destroyed) {
            this.cd.detectChanges();
        }
    };
    /**
     * 根据id找到实际显示元素的宽度
     * @param findId
     */
    /**
     * 根据id找到实际显示元素的宽度
     * @private
     * @param {?} findId
     * @return {?}
     */
    ResponseToolbarComponent.prototype._getWidthFromElementsById = /**
     * 根据id找到实际显示元素的宽度
     * @private
     * @param {?} findId
     * @return {?}
     */
    function (findId) {
        /** @type {?} */
        var parentEl = this.resizedContentEl.nativeElement;
        /** @type {?} */
        var childLen = parentEl.children.length;
        /** @type {?} */
        var result = 0;
        for (var k = 0; k < childLen; k++) {
            if (parentEl.children[k].id === findId) {
                result = parentEl.children[k].offsetWidth;
                break;
            }
        }
        return result;
    };
    /**
     * 格式化数据
     */
    /**
     * 格式化数据
     * @private
     * @param {?} datas
     * @param {?=} idPrefix
     * @return {?}
     */
    ResponseToolbarComponent.prototype._formatData = /**
     * 格式化数据
     * @private
     * @param {?} datas
     * @param {?=} idPrefix
     * @return {?}
     */
    function (datas, idPrefix) {
        var _this = this;
        if (idPrefix === void 0) { idPrefix = "response"; }
        /** @type {?} */
        var result = [];
        datas.forEach((/**
         * @param {?} item
         * @param {?} index
         * @return {?}
         */
        function (item, index) {
            if (item.isDP) {
                // 如果是下拉
                if (item.hasOwnProperty("children") &&
                    item["children"].length) {
                    /** @type {?} */
                    var children = [].concat(item["children"]);
                    item.children = [];
                    /** @type {?} */
                    var dpItem = new ResponseToolbarDropDown(Object.assign({ id: idPrefix + "_" + index }, item));
                    result.push(dpItem);
                    dpItem.children = _this._formatData(children, idPrefix + "_" + index);
                }
                else {
                    result.push(new ResponseToolbarDropDown(Object.assign({ id: idPrefix + "_" + index }, item)));
                }
            }
            else {
                // 非下拉
                result.push(new ResponseToolbarItem(Object.assign({ id: idPrefix + "_" + index }, item)));
            }
        }));
        return result;
    };
    /**
     * 找到第一个未处理完响应式的元素
     */
    /**
     * 找到第一个未处理完响应式的元素
     * @private
     * @return {?}
     */
    ResponseToolbarComponent.prototype._getFirstUnResponsedIndex = /**
     * 找到第一个未处理完响应式的元素
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var tempUnResponsedIndex = this.resizeGroups.findIndex((/**
         * @param {?} group
         * @return {?}
         */
        function (group) {
            if (group.isResponsed()) {
                return false;
            }
            return true;
        }));
        return tempUnResponsedIndex;
    };
    /**
     * 寻找最后一个处理响应式的元素
     */
    /**
     * 寻找最后一个处理响应式的元素
     * @private
     * @return {?}
     */
    ResponseToolbarComponent.prototype._getLastResponseIndex = /**
     * 寻找最后一个处理响应式的元素
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var tempResponsingIndex = this.resizeGroups.findIndex((/**
         * @param {?} group
         * @return {?}
         */
        function (group) {
            if (!group.isResponsing()) {
                return true;
            }
            return false;
        }));
        // 所有组元素都已处理完响应式
        if (tempResponsingIndex === -1) {
            return this.resizeGroups.length - 1;
        }
        // 所有组元素都未开始处理响应式
        return tempResponsingIndex > 1 ? tempResponsingIndex - 1 : -1;
    };
    /**
     * 找到group形成的下拉，在数据中的位置
     */
    /**
     * 找到group形成的下拉，在数据中的位置
     * @private
     * @param {?} datas
     * @param {?} id
     * @return {?}
     */
    ResponseToolbarComponent.prototype._findIndexByID = /**
     * 找到group形成的下拉，在数据中的位置
     * @private
     * @param {?} datas
     * @param {?} id
     * @return {?}
     */
    function (datas, id) {
        /** @type {?} */
        var result = datas.findIndex((/**
         * @param {?} item
         * @param {?} index
         * @return {?}
         */
        function (item, index) {
            if (item["id"] === id) {
                return true;
            }
            return false;
        }));
        return result;
    };
    /**
     * 根据ID寻找Item
     */
    /**
     * 根据ID寻找Item
     * @private
     * @param {?} id
     * @param {?} data
     * @return {?}
     */
    ResponseToolbarComponent.prototype._findItemByID = /**
     * 根据ID寻找Item
     * @private
     * @param {?} id
     * @param {?} data
     * @return {?}
     */
    function (id, data) {
        var _this = this;
        /** @type {?} */
        var tempResult = null;
        /** @type {?} */
        var tempIndex = data.findIndex((/**
         * @param {?} item
         * @param {?} index
         * @return {?}
         */
        function (item, index) {
            if (item["id"] === id) {
                tempResult = item;
                return true;
            }
            // 如果是下拉，层级下拉
            if (item["isDP"]) {
                /** @type {?} */
                var tempItem = _this._findItemByID(id, item["children"]);
                if (tempItem) {
                    tempResult = tempItem;
                    return true;
                }
            }
            return false;
        }));
        return tempResult;
    };
    ResponseToolbarComponent.decorators = [
        { type: Component, args: [{
                    selector: "f-response-toolbar",
                    template: "<!-- <div class=\"border bg-primary\" style=\"height:40px;position: relative;\"> -->\r\n<div #auxiliaryContainer class=\"response-toolbar-hidden-element\">\r\n    <ng-container *ngFor=\"let dataItem of auxiliaryDatas\">\r\n        <div class=\"btn-group\" *ngIf=\"dataItem.visible&&dataItem.isDP\" id=\"{{ dataItem.id }}\">\r\n            <button type=\"button\" class=\"btn dropdown-toggle dropdown-toggle-split  f-rt-toggle\"\r\n                [class.f-btn-ml]=\"btnAlign=='right'\" [class.f-btn-mr]=\"btnAlign=='left'\" [ngClass]=\"dataItem.class\" [class.btn-icontext]=\"dataItem.icon&&dataItem.icon.trim()\">\r\n             <i class=\"f-icon\" [ngClass]=\"dataItem.icon&&dataItem.icon.trim()\" *ngIf=\"dataItem.icon&&dataItem.icon.trim()\"></i>{{ dataItem.text }}\r\n            </button>\r\n        </div>\r\n        <button type=\"button\" class=\"btn f-rt-btn\" [class.f-btn-ml]=\"btnAlign=='right'\"\r\n            [class.f-btn-mr]=\"btnAlign=='left'\" [ngClass]=\"dataItem.class\" id=\"{{ dataItem.id }}\"\r\n            *ngIf=\"dataItem.visible&&!dataItem.isDP\" [class.btn-icontext]=\"dataItem.icon&&dataItem.icon.trim()\">\r\n            <i class=\"f-icon\" [ngClass]=\"dataItem.icon&&dataItem.icon.trim()\" *ngIf=\"dataItem.icon&&dataItem.icon.trim()\"></i>{{ dataItem.text }}\r\n        </button>\r\n    </ng-container>\r\n</div>\r\n<div fResized #resizedContainer (resizedEvent)=\"onResize($event)\" class=\"d-flex flex-nowrap\"\r\n    [ngClass]=\"{'justify-content-end':btnAlign=='right','justify-content-start':btnAlign=='left'}\">\r\n    <div class=\"d-inline-block f-response-content\" style=\"white-space: nowrap;\" #resizedContent\r\n        (click)=\"clickItem($event, null)\">\r\n        <ng-container *ngFor=\"let dataItem of toolbarDatas\">\r\n            <ng-container *ngIf=\"dataItem.visible && dataItem.isDP\">\r\n                <ng-container *ngTemplateOutlet=\"\r\n                        dropdownTmpl;\r\n                        context: { $implicit: dataItem }\r\n                    \"></ng-container>\r\n            </ng-container>\r\n            <ng-container *ngIf=\"dataItem.visible && !dataItem.isDP&&dataItem.tipsEnable\">\r\n                <button type=\"button\" class=\"btn f-rt-btn\"\r\n                    [class.f-btn-ml]=\"btnAlign=='right'\" [class.f-btn-mr]=\"btnAlign=='left'\" id=\"{{ dataItem.id }}\"\r\n                    [ngClass]=\"dataItem.class\" [class.disabled]=\"dataItem.disabled\" [class.btn-icontext]=\"dataItem.icon&&dataItem.icon.trim()\"\r\n                    [farrisTooltip]=\"dataItem.tipsEnable\" [content]=\"dataItem.tipsText\">\r\n                    <i class=\"f-icon\" [ngClass]=\"dataItem.icon&&dataItem.icon.trim()\" *ngIf=\"dataItem.icon&&dataItem.icon.trim()\"></i>{{ dataItem.text }}\r\n                </button>\r\n            </ng-container>\r\n            <ng-container *ngIf=\"dataItem.visible && !dataItem.isDP&&!dataItem.tipsEnable\">\r\n                <button type=\"button\" class=\"btn f-rt-btn\"\r\n                    [class.f-btn-ml]=\"btnAlign=='right'\" [class.f-btn-mr]=\"btnAlign=='left'\" id=\"{{ dataItem.id }}\"\r\n                    [ngClass]=\"dataItem.class\" [class.disabled]=\"dataItem.disabled\"  [class.btn-icontext]=\"dataItem.icon&&dataItem.icon.trim()\">\r\n                    <i class=\"f-icon\" [ngClass]=\"dataItem.icon&&dataItem.icon.trim()\" *ngIf=\"dataItem.icon&&dataItem.icon.trim()\"></i>{{ dataItem.text }}\r\n                </button>\r\n            </ng-container>\r\n        </ng-container>\r\n    </div>\r\n</div>\r\n<!-- </div> -->\r\n\r\n<!--\u7B2C\u4E00\u5C42\u4E0B\u62C9-->\r\n<ng-template #dropdownTmpl let-data>\r\n    <div class=\"btn-group f-rt-dropdown\" id=\"{{ data.id }}\" fDropdown  #dd=\"fDropdown\"\r\n        [placement]=\"getPlacement(data['placement'],'bottom')\" (dpChangeEvent)=\"dpSectionState($event,data.id)\"\r\n        [rectifyReference]=\"referEl\" [forceState]=\"dpState\" [autoRectify]=\"true\" [class.f-btn-ml]=\"btnAlign=='right'\"\r\n        [class.f-btn-mr]=\"btnAlign=='left'\" [ngClass]=\"data['dropdownCls']\">\r\n        <!--\u542F\u7528\u4E0B\u62C9\u5206\u5F00\u6309\u94AE-->\r\n        <ng-container *ngIf=\"data.split\">\r\n            <ng-container *ngIf=\"data.tipsEnable\">\r\n                <button type=\"button\" class=\"btn f-rt-btn\" [ngClass]=\"data.class\" [class.disabled]=\"data.disabled\"\r\n                    [farrisTooltip]=\"data.tipsEnable\" [content]=\"data.tipsText\" [class.btn-icontext]=\"data.icon&&data.icon.trim()\">\r\n                    <i class=\"f-icon\" [ngClass]=\"data.icon&&data.icon.trim()\" *ngIf=\"data.icon&&data.icon.trim()\"></i>{{ data.text }}\r\n                </button>\r\n            </ng-container>\r\n            <ng-container *ngIf=\"!data.tipsEnable\">\r\n                <button type=\"button\" class=\"btn f-rt-btn\" [ngClass]=\"data.class\" [class.disabled]=\"data.disabled\" [class.btn-icontext]=\"data.icon&&data.icon.trim()\">\r\n                    <i class=\"f-icon\" [ngClass]=\"data.icon&&data.icon.trim()\" *ngIf=\"data.icon&&data.icon.trim()\"></i>{{ data.text }}\r\n                </button>\r\n            </ng-container>\r\n            <button class=\"btn dropdown-toggle dropdown-toggle-split\" [ngClass]=\"data.class\" fDropdownToggle></button>\r\n        </ng-container>\r\n        <!--\u4E0D\u542F\u7528\u4E0B\u62C9\u5206\u5F00\u6309\u94AE-->\r\n        <ng-container *ngIf=\"!data.split&&data.tipsEnable\">\r\n            <button type=\"button\" fDropdownToggle class=\"btn f-rt-toggle\" [farrisTooltip]=\"data.tipsEnable\"\r\n                [content]=\"data.tipsText\" [ngClass]=\"data.class + ' dropdown-toggle'\" [dpDisabled]=\"data.disabled\" [class.btn-icontext]=\"data.icon&&data.icon.trim()\">\r\n                <i class=\"f-icon\" [ngClass]=\"data.icon&&data.icon.trim()\" *ngIf=\"data.icon&&data.icon.trim()\"></i>{{ data.text }}\r\n            </button>\r\n        </ng-container>\r\n        <ng-container *ngIf=\"!data.split&&!data.tipsEnable\">\r\n            <button type=\"button\" fDropdownToggle class=\"btn f-rt-toggle\" [ngClass]=\"data.class + ' dropdown-toggle'\"\r\n                [dpDisabled]=\"data.disabled\"  [class.btn-icontext]=\"data.icon&&data.icon.trim()\">\r\n                <i class=\"f-icon\" [ngClass]=\"data.icon&&data.icon.trim()\" *ngIf=\"data.icon&&data.icon.trim()\"></i>{{ data.text }}\r\n            </button>\r\n        </ng-container>\r\n        <ul class=\"dropdown-menu\" fDropdownMenu [ngClass]=\"data.menuCls\" id=\"{{ data.id }}_menu\">\r\n            <ng-container *ngFor=\"let item of data.children\">\r\n                <ng-container *ngIf=\"item.visible && item.isDP\">\r\n                    <ng-container *ngTemplateOutlet=\"\r\n                            dropdownSubTmpl;\r\n                            context: { $implicit: item, ddRef: dd }\r\n                        \"></ng-container>\r\n                </ng-container>\r\n                <ng-container *ngIf=\"item.visible&&!item.isDP&&item.tipsEnable\">\r\n                    <li class=\"dropdown-item  f-rt-btn\" id=\"{{ item.id }}\" [class.disabled]=\"item.disabled\"\r\n                        [farrisTooltip]=\"item.tipsEnable\" [content]=\"item.tipsText\"  (click)=\"clickItem($event, dd)\">\r\n                        {{ item.text }}\r\n                    </li>\r\n                </ng-container>\r\n                <ng-container *ngIf=\"item.visible&&!item.isDP&&!item.tipsEnable\">\r\n                    <li class=\"dropdown-item  f-rt-btn\" id=\"{{ item.id }}\" [class.disabled]=\"item.disabled\"  (click)=\"clickItem($event, dd)\">\r\n                        {{ item.text }}\r\n                    </li>\r\n                </ng-container>\r\n            </ng-container>\r\n        </ul>\r\n    </div>\r\n</ng-template>\r\n<!--\u7B2C\u4E8C\u5C42\u4E0B\u62C9-->\r\n<ng-template #dropdownSubTmpl let-subData let-dd=\"ddRef\">\r\n    <li class=\"dropdown-submenu f-rt-dropdown\" fDropdown [isSubDP]=\"true\" (click)=\"clickItem($event, dd)\"\r\n        [placement]=\"getPlacement(subData['placement'],'right')\" [autoRectify]=\"true\" [rectifyReference]=\"referEl\"\r\n        [ngClass]=\"subData['dropdownCls']\" id=\"{{ subData.id }}\">\r\n        <ng-container *ngIf=\"subData.split\">\r\n            <ng-container *ngIf=\"subData.tipsEnable\">\r\n                <span class=\"dropdown-item f-rt-btn\" [class.disabled]=\"subData['disabled']\" [ngClass]=\"subData['class']\"\r\n                    [farrisTooltip]=\"subData.tipsEnable\" [content]=\"subData.tipsText\">{{ subData.text }}</span>\r\n                <span class=\"dropdown-toggle dropdown-toggle-split f-rt-toggle\" fDropdownToggle></span>\r\n            </ng-container>\r\n            <ng-container *ngIf=\"!subData.tipsEnable\">\r\n                <span class=\"dropdown-item f-rt-btn\" [class.disabled]=\"subData['disabled']\"\r\n                    [ngClass]=\"subData['class']\">{{ subData.text }}</span>\r\n                <span class=\"dropdown-toggle dropdown-toggle-split f-rt-toggle\" fDropdownToggle></span>\r\n            </ng-container>\r\n        </ng-container>\r\n        <ng-container *ngIf=\"!subData.split\">\r\n            <ng-container *ngIf=\"subData.tipsEnable\">\r\n                <span class=\"dropdown-item  dropdown-toggle f-rt-toggle\" [dpDisabled]=\"subData['disabled']\"\r\n                    [farrisTooltip]=\"subData.tipsEnable\" [content]=\"subData.tipsText\" [ngClass]=\"subData['class']\"\r\n                    fDropdownToggle>{{ subData.text }}</span>\r\n            </ng-container>\r\n            <ng-container *ngIf=\"!subData.tipsEnable\">\r\n                <span class=\"dropdown-item  dropdown-toggle f-rt-toggle\" [dpDisabled]=\"subData['disabled']\"\r\n                    [ngClass]=\"subData['class']\" fDropdownToggle>{{ subData.text }}</span>\r\n            </ng-container>\r\n\r\n        </ng-container>\r\n\r\n        <ul class=\"dropdown-menu\" fDropdownMenu [ngClass]=\"subData.menuCls\" id=\"{{ subData.id }}_submenu\">\r\n            <ng-container *ngFor=\"let subItem of subData.children\">\r\n                <ng-container *ngIf=\"subItem.visible && subItem.isDP\">\r\n                    <ng-container *ngTemplateOutlet=\"\r\n                            dropdownSubTmpl;\r\n                            context: { $implicit: subItem, ddRef: dd }\r\n                        \"></ng-container>\r\n                </ng-container>\r\n                <ng-container *ngIf=\"subItem.visible && !subItem.isDP\">\r\n                    <ng-container *ngIf=\"subItem.tipsEnable\">\r\n                        <li [farrisTooltip]=\"subItem.tipsEnable\" [content]=\"subItem.tipsText\"  (click)=\"clickItem($event, dd)\"\r\n                            class=\"dropdown-item f-rt-btn\" id=\"{{ subItem.id }}\" [class.disabled]=\"subItem.disabled\">\r\n                            {{ subItem.text }}\r\n                        </li>\r\n                    </ng-container>\r\n                    <ng-container *ngIf=\"!subItem.tipsEnable\">\r\n                        <li class=\"dropdown-item f-rt-btn\" id=\"{{ subItem.id }}\" [class.disabled]=\"subItem.disabled\"  (click)=\"clickItem($event, dd)\">\r\n                            {{ subItem.text }}\r\n                        </li>\r\n                    </ng-container>\r\n                </ng-container>\r\n            </ng-container>\r\n        </ul>\r\n    </li>\r\n</ng-template>",
                    styles: [":host .response-toolbar-hidden-element{position:fixed;z-index:200;visibility:hidden;top:-87px}"]
                }] }
    ];
    /** @nocollapse */
    ResponseToolbarComponent.ctorParameters = function () { return [
        { type: ElementRef },
        { type: Renderer2 },
        { type: ChangeDetectorRef },
        { type: LocaleService }
    ]; };
    ResponseToolbarComponent.propDecorators = {
        frtCls: [{ type: HostBinding, args: ["class.f-response-toolbar",] }],
        prCls: [{ type: HostBinding, args: ["class.position-relative",] }],
        resizedContainerEl: [{ type: ViewChild, args: ["resizedContainer",] }],
        auxiliaryContainerEl: [{ type: ViewChild, args: ["auxiliaryContainer",] }],
        resizedContentEl: [{ type: ViewChild, args: ["resizedContent",] }],
        resizedContainerDirective: [{ type: ViewChild, args: ["resizedContainer", { read: FResizedDirective },] }],
        rtClickEvent: [{ type: Output }],
        groups: [{ type: Input }],
        datas: [{ type: Input }],
        btnState: [{ type: Input }],
        btnVisible: [{ type: Input }],
        clickThrottleTime: [{ type: Input }],
        buttonSize: [{ type: Input }],
        popDirection: [{ type: Input }],
        btnAlign: [{ type: Input }]
    };
    return ResponseToolbarComponent;
}());
export { ResponseToolbarComponent };
if (false) {
    /** @type {?} */
    ResponseToolbarComponent.prototype.frtCls;
    /** @type {?} */
    ResponseToolbarComponent.prototype.prCls;
    /** @type {?} */
    ResponseToolbarComponent.prototype.resizedContainerEl;
    /** @type {?} */
    ResponseToolbarComponent.prototype.auxiliaryContainerEl;
    /** @type {?} */
    ResponseToolbarComponent.prototype.resizedContentEl;
    /** @type {?} */
    ResponseToolbarComponent.prototype.resizedContainerDirective;
    /** @type {?} */
    ResponseToolbarComponent.prototype.rtClickEvent;
    /** @type {?} */
    ResponseToolbarComponent.prototype.auxiliaryDatas;
    /**
     * @type {?}
     * @private
     */
    ResponseToolbarComponent.prototype.ro;
    /**
     * @type {?}
     * @private
     */
    ResponseToolbarComponent.prototype.containerWidthRecord;
    /**
     * @type {?}
     * @private
     */
    ResponseToolbarComponent.prototype.needResponseChanges;
    /** @type {?} */
    ResponseToolbarComponent.prototype.referEl;
    /** @type {?} */
    ResponseToolbarComponent.prototype.dpState;
    /**
     * @type {?}
     * @private
     */
    ResponseToolbarComponent.prototype._auxiliary;
    /**
     * @type {?}
     * @private
     */
    ResponseToolbarComponent.prototype._selfEl;
    /** @type {?} */
    ResponseToolbarComponent.prototype.resizeGroups;
    /** @type {?} */
    ResponseToolbarComponent.prototype.toolbarDatas;
    /**
     * @type {?}
     * @private
     */
    ResponseToolbarComponent.prototype.distanceThreshold;
    /**
     * @type {?}
     * @private
     */
    ResponseToolbarComponent.prototype.isUpdateTBView;
    /** @type {?} */
    ResponseToolbarComponent.prototype._stateDatas;
    /** @type {?} */
    ResponseToolbarComponent.prototype._btnVisibleDatas;
    /** @type {?} */
    ResponseToolbarComponent.prototype.clickThrottleTime;
    /**
     * @type {?}
     * @private
     */
    ResponseToolbarComponent.prototype.clickItems;
    /**
     * @type {?}
     * @private
     */
    ResponseToolbarComponent.prototype.clickSubscription;
    /**
     * @type {?}
     * @private
     */
    ResponseToolbarComponent.prototype.rtSize;
    /** @type {?} */
    ResponseToolbarComponent.prototype.popDirection;
    /** @type {?} */
    ResponseToolbarComponent.prototype.btnAlign;
    /**
     * @type {?}
     * @private
     */
    ResponseToolbarComponent.prototype.ngZone;
    /**
     * @type {?}
     * @private
     */
    ResponseToolbarComponent.prototype.render;
    /**
     * @type {?}
     * @private
     */
    ResponseToolbarComponent.prototype.cd;
    /** @type {?} */
    ResponseToolbarComponent.prototype.localeService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVzcG9uc2UtdG9vbGJhci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL3VpLXJlc3BvbnNlLXRvb2xiYXIvIiwic291cmNlcyI6WyJsaWIvY29tcG9uZW50L3Jlc3BvbnNlLXRvb2xiYXIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQ0gsU0FBUyxFQUVULEtBQUssRUFDTCxTQUFTLEVBQ1QsVUFBVSxFQUNWLFNBQVMsRUFLVCxpQkFBaUIsRUFDakIsV0FBVyxFQUNYLE1BQU0sRUFDTixZQUFZLEVBQ1osTUFBTSxFQUdULE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFDSCx1QkFBdUIsRUFDdkIsbUJBQW1CLEVBQ25CLG9CQUFvQixFQUV2QixNQUFNLGlDQUFpQyxDQUFDO0FBQ3pDLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLGdDQUFnQyxDQUFDO0FBQ25FLE9BQU8sRUFBRSxPQUFPLEVBQUUsVUFBVSxFQUFpQyxNQUFNLE1BQU0sQ0FBQztBQUMxRSxPQUFPLEVBQWdCLFlBQVksRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQzVELE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUNsRCxPQUFPLGNBQWMsTUFBTSwwQkFBMEIsQ0FBQztBQUV0RDtJQStHSSxrQ0FDSSxFQUFjLEVBQ04sTUFBaUIsRUFDakIsRUFBcUIsRUFDdEIsYUFBNEI7UUFGM0IsV0FBTSxHQUFOLE1BQU0sQ0FBVztRQUNqQixPQUFFLEdBQUYsRUFBRSxDQUFtQjtRQUN0QixrQkFBYSxHQUFiLGFBQWEsQ0FBZTtRQTNHRSxXQUFNLEdBQUcsSUFBSSxDQUFDO1FBQ2YsVUFBSyxHQUFHLElBQUksQ0FBQzs7UUFZckQsaUJBQVksR0FBNEMsSUFBSSxZQUFZLEVBRXJFLENBQUM7O1FBRUosbUJBQWMsR0FBbUMsRUFBRSxDQUFDOzs7O1FBSTVDLE9BQUUsR0FBMEIsSUFBSSxDQUFDOztRQUVq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Qzs7SUFFN0MsZ0RBR0k7O0lBRUosa0RBQW9EOzs7OztJQUlwRCxzQ0FBeUM7Ozs7O0lBRXpDLHdEQUFpQzs7Ozs7SUFFakMsdURBQWdDOztJQUNoQywyQ0FBZTs7SUFDZiwyQ0FBa0I7Ozs7O0lBRWxCLDhDQUF3Qjs7Ozs7SUFDeEIsMkNBQTZCOztJQUM3QixnREFBK0M7O0lBRS9DLGdEQUF3RTs7Ozs7SUFleEUscURBQStCOzs7OztJQUMvQixrREFBK0I7O0lBVy9CLCtDQUFvRDs7SUFNcEQsb0RBQXlEOztJQU16RCxxREFBaUM7Ozs7O0lBQ2pDLDhDQUF3Qzs7Ozs7SUFDeEMscURBQXdDOzs7OztJQUN4QywwQ0FBb0I7O0lBd0JwQixnREFBMkI7O0lBRTNCLDRDQUE0Qjs7Ozs7SUFDNUIsMENBQXNCOzs7OztJQUdsQiwwQ0FBeUI7Ozs7O0lBQ3pCLHNDQUE2Qjs7SUFDN0IsaURBQW1DIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcclxuICAgIENvbXBvbmVudCxcclxuICAgIE9uSW5pdCxcclxuICAgIElucHV0LFxyXG4gICAgVmlld0NoaWxkLFxyXG4gICAgRWxlbWVudFJlZixcclxuICAgIFJlbmRlcmVyMixcclxuICAgIEFmdGVyVmlld0luaXQsXHJcbiAgICBEb0NoZWNrLFxyXG4gICAgQWZ0ZXJWaWV3Q2hlY2tlZCxcclxuICAgIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LFxyXG4gICAgQ2hhbmdlRGV0ZWN0b3JSZWYsXHJcbiAgICBIb3N0QmluZGluZyxcclxuICAgIE91dHB1dCxcclxuICAgIEV2ZW50RW1pdHRlcixcclxuICAgIE5nWm9uZSxcclxuICAgIE9uRGVzdHJveSxcclxuICAgIFZpZXdSZWZcclxufSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xyXG5pbXBvcnQge1xyXG4gICAgUmVzcG9uc2VUb29sYmFyRHJvcERvd24sXHJcbiAgICBSZXNwb25zZVRvb2xiYXJJdGVtLFxyXG4gICAgUmVzcG9uc2VUb29sYmFyR3JvdXAsXHJcbiAgICBSZXNwb25zZVRvb2xiYXJDbGlja0V2ZW50XHJcbn0gZnJvbSBcIi4uL21vZGVsL3Jlc3BvbnNlLXRvb2xiYXIubW9kZWxcIjtcclxuaW1wb3J0IHsgRlJlc2l6ZWREaXJlY3RpdmUgfSBmcm9tIFwiLi4vcmVzaXplZC9mLXJlc2l6ZWQuZGlyZWN0aXZlXCI7XHJcbmltcG9ydCB7IFN1YmplY3QsIE9ic2VydmFibGUsIFN1YnNjcmlwdGlvbiwgQmVoYXZpb3JTdWJqZWN0IH0gZnJvbSBcInJ4anNcIjtcclxuaW1wb3J0IHsgdGhyb3R0bGVUaW1lLCBkZWJvdW5jZVRpbWUgfSBmcm9tIFwicnhqcy9vcGVyYXRvcnNcIjtcclxuaW1wb3J0IHsgTG9jYWxlU2VydmljZSB9IGZyb20gXCJAZmFycmlzL3VpLWxvY2FsZVwiO1xyXG5pbXBvcnQgUmVzaXplT2JzZXJ2ZXIgZnJvbSBcInJlc2l6ZS1vYnNlcnZlci1wb2x5ZmlsbFwiO1xyXG5pbXBvcnQgeyBGRHJvcGRvd25EaXJlY3RpdmUgfSBmcm9tIFwiQGZhcnJpcy91aS1kcm9wZG93blwiO1xyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiBcImYtcmVzcG9uc2UtdG9vbGJhclwiLFxyXG4gICAgdGVtcGxhdGVVcmw6IFwiLi9yZXNwb25zZS10b29sYmFyLmNvbXBvbmVudC5odG1sXCIsXHJcbiAgICBzdHlsZVVybHM6IFtcIi4vcmVzcG9uc2UtdG9vbGJhci5jb21wb25lbnQuY3NzXCJdLFxyXG4gICAgLy8gY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2hcclxufSlcclxuZXhwb3J0IGNsYXNzIFJlc3BvbnNlVG9vbGJhckNvbXBvbmVudFxyXG4gICAgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyVmlld0luaXQsIERvQ2hlY2ssIEFmdGVyVmlld0NoZWNrZWQsIE9uRGVzdHJveSB7XHJcbiAgICBASG9zdEJpbmRpbmcoXCJjbGFzcy5mLXJlc3BvbnNlLXRvb2xiYXJcIikgZnJ0Q2xzID0gdHJ1ZTtcclxuICAgIEBIb3N0QmluZGluZyhcImNsYXNzLnBvc2l0aW9uLXJlbGF0aXZlXCIpIHByQ2xzID0gdHJ1ZTtcclxuICAgIC8vIOWTjeW6lOW8j+WuueWZqFxyXG4gICAgQFZpZXdDaGlsZChcInJlc2l6ZWRDb250YWluZXJcIikgcmVzaXplZENvbnRhaW5lckVsO1xyXG4gICAgLy8g6L6F5Yqp6K6h566X5a655ZmoXHJcbiAgICBAVmlld0NoaWxkKFwiYXV4aWxpYXJ5Q29udGFpbmVyXCIpIGF1eGlsaWFyeUNvbnRhaW5lckVsO1xyXG4gICAgLy8g5ZON5bqU5byP5YaF5a655a655ZmoXHJcbiAgICBAVmlld0NoaWxkKFwicmVzaXplZENvbnRlbnRcIikgcmVzaXplZENvbnRlbnRFbDtcclxuICAgIC8vXHJcbiAgICBAVmlld0NoaWxkKFwicmVzaXplZENvbnRhaW5lclwiLCB7IHJlYWQ6IEZSZXNpemVkRGlyZWN0aXZlIH0pXHJcbiAgICByZXNpemVkQ29udGFpbmVyRGlyZWN0aXZlOiBGUmVzaXplZERpcmVjdGl2ZTtcclxuICAgIC8vIOS8oOmAkueCueWHu+S6i+S7tlxyXG4gICAgQE91dHB1dCgpXHJcbiAgICBydENsaWNrRXZlbnQ6IEV2ZW50RW1pdHRlcjxSZXNwb25zZVRvb2xiYXJDbGlja0V2ZW50PiA9IG5ldyBFdmVudEVtaXR0ZXI8XHJcbiAgICAgICAgUmVzcG9uc2VUb29sYmFyQ2xpY2tFdmVudFxyXG4gICAgPigpO1xyXG4gICAgLy8g6L6F5Yqp6K6h566X5a695bqm5pWw5o2uXHJcbiAgICBhdXhpbGlhcnlEYXRhczogQXJyYXk8UmVzcG9uc2VUb29sYmFyRHJvcERvd24+ID0gW107XHJcbiAgICAvLyDmjqfliLbniLblhYPntKDmu5rliqjnmoTmoLflvI9cclxuICAgIC8vICBwcml2YXRlIF9kcFN0YXRlID0gZmFsc2U7XHJcbiAgICAvL1xyXG4gICAgcHJpdmF0ZSBybzogUmVzaXplT2JzZXJ2ZXIgfCBudWxsID0gbnVsbDtcclxuICAgIC8vIOiusOW9leWuueWZqOWuveW6plxyXG4gICAgcHJpdmF0ZSBjb250YWluZXJXaWR0aFJlY29yZCA9IDA7XHJcbiAgICAvLyDorrDlvZXlj5jljJZcclxuICAgIHByaXZhdGUgbmVlZFJlc3BvbnNlQ2hhbmdlcyA9IDA7XHJcbiAgICByZWZlckVsID0gbnVsbDtcclxuICAgIGRwU3RhdGUgPSBbZmFsc2VdO1xyXG4gICAgLy8g55So5p2l5YaF6YOo6K6w5b2VXHJcbiAgICBwcml2YXRlIF9hdXhpbGlhcnkgPSAtMTtcclxuICAgIHByaXZhdGUgX3NlbGZFbDogSFRNTEVsZW1lbnQ7XHJcbiAgICByZXNpemVHcm91cHM6IEFycmF5PFJlc3BvbnNlVG9vbGJhckdyb3VwPiA9IFtdO1xyXG4gICAgLy8g6K6w5b2V5qC85byP5YyW5ZCO55qE5pWw5o2uXHJcbiAgICB0b29sYmFyRGF0YXM6IEFycmF5PFJlc3BvbnNlVG9vbGJhckl0ZW0gfCBSZXNwb25zZVRvb2xiYXJEcm9wRG93bj4gPSBbXTtcclxuICAgIC8vIOWGhemDqOiusOW9leagvOW8j+WMluWQjueahOWIneWni+aVsOaNri0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS3mmoLml7bkuI3nlKhcclxuICAgIC8vIF90b29sYmFyRGF0YXM6IEFycmF5PFJlc3BvbnNlVG9vbGJhckl0ZW0gfCBSZXNwb25zZVRvb2xiYXJEcm9wRG93bj4gPSBbXTtcclxuICAgIEBJbnB1dCgpXHJcbiAgICBzZXQgZ3JvdXBzKHZhbHVlczogQXJyYXk8UmVzcG9uc2VUb29sYmFyR3JvdXA+KSB7XHJcbiAgICAgICAgaWYgKHZhbHVlcykge1xyXG4gICAgICAgICAgICB0aGlzLnJlc2l6ZUdyb3VwcyA9IFtdO1xyXG4gICAgICAgICAgICB2YWx1ZXMuZm9yRWFjaChncm91cCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc2l6ZUdyb3Vwcy5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBSZXNwb25zZVRvb2xiYXJHcm91cChncm91cC5pZCwgZ3JvdXAubmFtZSlcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAvLyDov5jmsqHmnInorqHnrpfpooTnva7mjpLluo9cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBkaXN0YW5jZVRocmVzaG9sZCA9IDIwO1xyXG4gICAgcHJpdmF0ZSBpc1VwZGF0ZVRCVmlldyA9IGZhbHNlO1xyXG5cclxuICAgIEBJbnB1dCgpXHJcbiAgICBzZXQgZGF0YXModmFsdWVzOiBBcnJheTxSZXNwb25zZVRvb2xiYXJJdGVtIHwgUmVzcG9uc2VUb29sYmFyRHJvcERvd24+KSB7XHJcbiAgICAgICAgaWYgKHZhbHVlcykge1xyXG4gICAgICAgICAgICB0aGlzLnRvb2xiYXJEYXRhcyA9IHRoaXMuX2Zvcm1hdERhdGEodmFsdWVzKTtcclxuICAgICAgICAgICAgdGhpcy5uZWVkUmVzcG9uc2VDaGFuZ2VzKys7XHJcbiAgICAgICAgICAgIC8vIOWkhOeQhuWIhue7hOaVsOaNrlxyXG4gICAgICAgICAgICB0aGlzLl9yZU9yZ2FuaXplUmVzaXplR3JvdXBzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgX3N0YXRlRGF0YXM6IE9ic2VydmFibGU8QXJyYXk8YW55Pj4gPSBuZXcgU3ViamVjdCgpO1xyXG4gICAgLy8g5oyJ6ZKu55qE56aB55So54q25oCBXHJcbiAgICBASW5wdXQoKVxyXG4gICAgc2V0IGJ0blN0YXRlKHZhbHVlczogT2JzZXJ2YWJsZTxBcnJheTxhbnk+Pikge1xyXG4gICAgICAgIHRoaXMuX3N0YXRlRGF0YXMgPSB2YWx1ZXM7XHJcbiAgICB9XHJcbiAgICBfYnRuVmlzaWJsZURhdGFzOiBPYnNlcnZhYmxlPEFycmF5PGFueT4+ID0gbmV3IFN1YmplY3QoKTtcclxuICAgIC8vIOaMiemSrueahOafpeeci+eKtuaAgVxyXG4gICAgQElucHV0KClcclxuICAgIHNldCBidG5WaXNpYmxlKHZhbHVlczogT2JzZXJ2YWJsZTxBcnJheTxhbnk+Pikge1xyXG4gICAgICAgIHRoaXMuX2J0blZpc2libGVEYXRhcyA9IHZhbHVlcztcclxuICAgIH1cclxuICAgIEBJbnB1dCgpIGNsaWNrVGhyb3R0bGVUaW1lID0gMzUwO1xyXG4gICAgcHJpdmF0ZSBjbGlja0l0ZW1zID0gbmV3IFN1YmplY3Q8YW55PigpO1xyXG4gICAgcHJpdmF0ZSBjbGlja1N1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uO1xyXG4gICAgcHJpdmF0ZSBydFNpemUgPSBcIlwiO1xyXG4gICAgLyrlsLrlr7jvvJrmnIlzbSxsZyznqbrlgLzvvIzpu5jorqTmmK/nqbrlgLwgKi9cclxuICAgIEBJbnB1dCgpXHJcbiAgICBzZXQgYnV0dG9uU2l6ZShidG5TaXplOiBzdHJpbmcpIHtcclxuICAgICAgICBpZiAoYnRuU2l6ZSAhPSB0aGlzLnJ0U2l6ZSkge1xyXG4gICAgICAgICAgICB0aGlzLnJ0U2l6ZSAmJlxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIucmVtb3ZlQ2xhc3MoXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2VsZkVsLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiZi1yZXNwb25zZS10b29sYmFyLVwiICsgdGhpcy5ydFNpemVcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHRoaXMucnRTaXplID0gYnRuU2l6ZTtcclxuICAgICAgICAgICAgdGhpcy5ydFNpemUgJiZcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyLmFkZENsYXNzKFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3NlbGZFbCxcclxuICAgICAgICAgICAgICAgICAgICBcImYtcmVzcG9uc2UtdG9vbGJhci1cIiArIHRoaXMucnRTaXplXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldCBidXR0b25TaXplKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucnRTaXplO1xyXG4gICAgfVxyXG4gICAgLyrlvLrliLbmlrnlkJHvvIzpu5jorqTkuLrnqbrlgLzvvIzlj6/ku6XmnIl0b3DjgIFib3R0b23vvIzmnJ3kuIrjgIHmnJ3kuIvjgIJcclxuICAgICAqIOS9v+eUqOWcuuaZr++8muW3peWFt+agj+WGhemDqOeahOS4i+aLie+8jOmcgOimgeacneS4iuaIluiAhemcgOimgeacneS4i+WxleW8gO+8jOe7n+S4gOaOp+WItlxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBwb3BEaXJlY3Rpb24gPSBcIlwiO1xyXG4gICAgLy8gcmlnaHTmjInpkq7pnaDlj7MgbGVmdOaMiemSrumdoOW3plxyXG4gICAgQElucHV0KCkgYnRuQWxpZ24gPSBcInJpZ2h0XCI7XHJcbiAgICBwcml2YXRlIG5nWm9uZSA9IG51bGw7XHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBlbDogRWxlbWVudFJlZixcclxuICAgICAgICBwcml2YXRlIHJlbmRlcjogUmVuZGVyZXIyLFxyXG4gICAgICAgIHByaXZhdGUgY2Q6IENoYW5nZURldGVjdG9yUmVmLFxyXG4gICAgICAgIHB1YmxpYyBsb2NhbGVTZXJ2aWNlOiBMb2NhbGVTZXJ2aWNlXHJcbiAgICApIC8vIHByaXZhdGUgbmdab25lOiBOZ1pvbmVcclxuICAgIHtcclxuICAgICAgICB0aGlzLl9zZWxmRWwgPSBlbC5uYXRpdmVFbGVtZW50O1xyXG4gICAgICAgIGlmIChlbC5uYXRpdmVFbGVtZW50LnBhcmVudEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5yZWZlckVsID0gZWwubmF0aXZlRWxlbWVudC5wYXJlbnRFbGVtZW50O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIOWboOS4uuaXp+aooeadv+W4puaciei/meS4quaWueazlVxyXG4gICAgbmdBZnRlclZpZXdJbml0KCkge31cclxuICAgIC8vIOWboOS4uuaXp+aooeadv+W4puaciei/meS4quaWueazlVxyXG4gICAgbmdEb0NoZWNrKCkge31cclxuICAgIG5nT25Jbml0KCkge1xyXG4gICAgICAgIC8vIOWOu+aOiW92ZXJmbG935LmL5ZCOXHJcbiAgICAgICAgdGhpcy5yZW5kZXIuYWRkQ2xhc3MoXHJcbiAgICAgICAgICAgIHRoaXMuYXV4aWxpYXJ5Q29udGFpbmVyRWwubmF0aXZlRWxlbWVudCxcclxuICAgICAgICAgICAgXCJyZXNwb25zZS10b29sYmFyLWhpZGRlbi1lbGVtZW50XCJcclxuICAgICAgICApO1xyXG4gICAgICAgIC8vIOaMiemSrueahOemgeeUqOeKtuaAgVxyXG4gICAgICAgIHRoaXMuX3N0YXRlRGF0YXMuc3Vic2NyaWJlKGRhdGEgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNoYW5nZVN0YXRlKGRhdGEpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIOaMiemSrueahOWPr+ingeeKtuaAgVxyXG4gICAgICAgIHRoaXMuX2J0blZpc2libGVEYXRhcy5zdWJzY3JpYmUoZGF0YSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlVmlzaWJsZShkYXRhKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLm9ic2VydmVyRWxlbWVudCgpO1xyXG4gICAgICAgIC8v5aSE55CG6KGo5Y2V5Yqg6L295ZCO55qE5oyJ6ZKu5Y+Y5YyWXHJcbiAgICAgICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgc2VsZk9iaj10aGlzO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpPT57XHJcbiAgICAgICAgICAgICAgICBzZWxmT2JqLnJlc3BvbnNlUmVzaXplKCk7XHJcbiAgICAgICAgICAgIH0sMCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8g5oum5oiq54K55Ye75LqL5Lu25Y+q5Lyg6YCS56ys5LiA5qyh54K55Ye75LqL5Lu255qE5aSE55CG5pON5L2c5Lqk57uZcGFyZW505p2l5aSE55CGXHJcbiAgICAgICAgdGhpcy5jbGlja1N1YnNjcmlwdGlvbiA9IHRoaXMuY2xpY2tJdGVtc1xyXG4gICAgICAgICAgICAucGlwZShkZWJvdW5jZVRpbWUodGhpcy5jbGlja1Rocm90dGxlVGltZSkpXHJcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKGV2ZW50RGF0YXM6IFJlc3BvbnNlVG9vbGJhckNsaWNrRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMucnRDbGlja0V2ZW50LmVtaXQoZXZlbnREYXRhcyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICh0aGlzLnBvcERpcmVjdGlvbiA9PT0gJ2RlZmF1bHQnKSB7XHJcbiAgICAgICAgICAgIHRoaXMucG9wRGlyZWN0aW9uID0gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgbmdPbkRlc3Ryb3koKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucm8pIHtcclxuICAgICAgICAgICAgdGhpcy5yby51bm9ic2VydmUodGhpcy5yZXNpemVkQ29udGFpbmVyRWwubmF0aXZlRWxlbWVudCk7XHJcbiAgICAgICAgICAgIHRoaXMucm8gPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5jbGlja1N1YnNjcmlwdGlvbikge1xyXG4gICAgICAgICAgICB0aGlzLmNsaWNrU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG5nQWZ0ZXJWaWV3Q2hlY2tlZCgpIHtcclxuICAgICAgICBpZiAodGhpcy5uZWVkUmVzcG9uc2VDaGFuZ2VzID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5uZWVkUmVzcG9uc2VDaGFuZ2VzLS07XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc3BvbnNlUmVzaXplKCk7XHJcbiAgICAgICAgfWVsc2UgaWYgKHRoaXMuYXV4aWxpYXJ5RGF0YXMubGVuZ3RoPjApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NhbGN1bGF0ZShcclxuICAgICAgICAgICAgICAgICAgICB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXV4aWxpYXJ5Q29udGFpbmVyRWwubmF0aXZlRWxlbWVudC5vZmZzZXRXaWR0aFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8g5Zug5Li65pen5qih5p2/5bim5pyJ6L+Z5Liq5pa55rOVXHJcbiAgICBvblJlc2l6ZShldmVudCkge31cclxuICAgIC8qKlxyXG4gICAgICog5YW85a655pen5qih5p2/5pen5pa55rOVXHJcbiAgICAgKiDlnKjkuI3lrZjlnKhuZ1pvbmXnmoTmg4XlhrXkuIvvvIzliJvlu7puZ1pvbmUs54S25ZCO57uR5a6a5LqL5Lu2XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgb2JzZXJ2ZXJFbGVtZW50KCkge1xyXG4gICAgICAgIGlmICghdGhpcy5uZ1pvbmUpIHtcclxuICAgICAgICAgICAgY29uc3QgbW9kdWxlSW5qZWN0b3IgPSB0aGlzLmNkW1wiX3ZpZXdcIl0ucm9vdC5uZ01vZHVsZS5pbmplY3RvcjtcclxuICAgICAgICAgICAgdGhpcy5uZ1pvbmUgPSBtb2R1bGVJbmplY3Rvci5nZXQ8Tmdab25lPihOZ1pvbmUsIG51bGwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJvID0gbmV3IFJlc2l6ZU9ic2VydmVyKChlbnRyaWVzLCBvYnNlcnZlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGVtcFdpZHRoID0gZW50cmllc1swXS5jb250ZW50UmVjdC53aWR0aDtcclxuICAgICAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICAgICBNYXRoLmFicyh0ZW1wV2lkdGggLSB0aGlzLmNvbnRhaW5lcldpZHRoUmVjb3JkKSA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzdGFuY2VUaHJlc2hvbGRcclxuICAgICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVzcG9uc2VSZXNpemUoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lcldpZHRoUmVjb3JkID0gdGVtcFdpZHRoO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5yby5vYnNlcnZlKHRoaXMucmVzaXplZENvbnRhaW5lckVsLm5hdGl2ZUVsZW1lbnQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlvLrliLbovazmjaLmlrnlkJFcclxuICAgICAqIEBwYXJhbSBzZWxmRGVmaW5lUExcclxuICAgICAqIEBwYXJhbSBkZWZhdWx0UExcclxuICAgICAqL1xyXG4gICAgZ2V0UGxhY2VtZW50KHNlbGZEZWZpbmVQTDogc3RyaW5nLCBkZWZhdWx0UEw6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgbGV0IG9sZERpcmVjdGlvbiA9IHNlbGZEZWZpbmVQTCA/IHNlbGZEZWZpbmVQTCA6IGRlZmF1bHRQTDtcclxuICAgICAgICBpZiAoIXRoaXMucG9wRGlyZWN0aW9uKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBvbGREaXJlY3Rpb247XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBwbFJlbGF0aW9uID0geyBib3R0b206IFwidG9wXCIsIHRvcDogXCJib3R0b21cIiB9O1xyXG4gICAgICAgIG9sZERpcmVjdGlvbiA9IG9sZERpcmVjdGlvbiA9PSBcImxlZnRcIiA/IFwibGVmdC1ib3R0b21cIiA6IG9sZERpcmVjdGlvbjtcclxuICAgICAgICBvbGREaXJlY3Rpb24gPSBvbGREaXJlY3Rpb24gPT0gXCJyaWdodFwiID8gXCJyaWdodC1ib3R0b21cIiA6IG9sZERpcmVjdGlvbjtcclxuICAgICAgICBsZXQgbmV3RGlyZWN0aW9uID0gb2xkRGlyZWN0aW9uLnJlcGxhY2UoXHJcbiAgICAgICAgICAgIHBsUmVsYXRpb25bdGhpcy5wb3BEaXJlY3Rpb25dLFxyXG4gICAgICAgICAgICB0aGlzLnBvcERpcmVjdGlvblxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIG5ld0RpcmVjdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiwg+eUqOatpOaWueazleeahOWcuuaZr1xyXG4gICAgICogMeOAgeeVjOmdouaLluaLveiHquWKqOinpuWPkVxyXG4gICAgICogMuOAgeaYvuekuuiwg+eUqFxyXG4gICAgICovXHJcbiAgICByZXNwb25zZVJlc2l6ZSgpIHtcclxuICAgICAgICBjb25zdCBfZGlzdGFuY2UgPSB0aGlzLl9nZXREaXN0YW5jZSgpO1xyXG4gICAgICAgIGlmIChfZGlzdGFuY2UgPiAwKSB7XHJcbiAgICAgICAgICAgIC8vIOWmguaenOWIhue7hOmDveW3sue7j+WkhOeQhuWujCzlho3lh7rnjrDmu5rliqjmnaHkuI3nrqFcclxuICAgICAgICAgICAgY29uc3QgX3RlbXBJbmRleCA9IHRoaXMuX2dldEZpcnN0VW5SZXNwb25zZWRJbmRleCgpO1xyXG4gICAgICAgICAgICBpZiAoX3RlbXBJbmRleCA8IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyDmiYDmnInnrKzkuIDlsYLkuIvmi4npg73lj47miphcclxuICAgICAgICAgICAgdGhpcy5kcFN0YXRlID0gW2ZhbHNlXTtcclxuICAgICAgICAgICAgZm9yIChsZXQgayA9IF90ZW1wSW5kZXg7IGsgPCB0aGlzLnJlc2l6ZUdyb3Vwcy5sZW5ndGg7IGsrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgX3RlbXBHcm91cCA9IHRoaXMucmVzaXplR3JvdXBzW2tdO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fYXV4aWxpYXJ5ID0gaztcclxuICAgICAgICAgICAgICAgIGlmIChfdGVtcEdyb3VwLmlzUmVzcG9uc2luZygpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2FsY3VsYXRlKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIOWmguaenOi/mOacquW8gOWni+WkhOeQhuWTjeW6lOW8j1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IF90ZW1wRFAgPSBuZXcgUmVzcG9uc2VUb29sYmFyRHJvcERvd24oe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBfdGVtcEdyb3VwLm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBfdGVtcEdyb3VwLmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ6IHRoaXMucG9wRGlyZWN0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMucG9wRGlyZWN0aW9uICsgXCItbGVmdFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiYm90dG9tLWxlZnRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IF90ZW1wR3JvdXAuZ2V0V2lkdGgoKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIOW3sue7j+WkhOeQhui/h+WuveW6plxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfdGVtcERQLmdldFdpZHRoKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hdXhpbGlhcnlEYXRhcyA9IFtfdGVtcERQXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2FsY3VsYXRlKHRydWUsIF90ZW1wRFAuZ2V0V2lkdGgoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5pu05paw6L6F5Yqp5pWw5o2uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhdXhpbGlhcnlJbmRleD10aGlzLmF1eGlsaWFyeURhdGFzLmZpbmRJbmRleCgoaXRlbSk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmlkPT1fdGVtcERQLmlkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihhdXhpbGlhcnlJbmRleD09LTEpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hdXhpbGlhcnlEYXRhcy5wdXNoKF90ZW1wRFApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuY2QmJiEodGhpcy5jZCBhcyBWaWV3UmVmKS5kZXN0cm95ZWQpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyDlr7vmib7mnIDlkI7kuIDkuKrlpITnkIblk43lupTlvI/nmoTlhYPntKBcclxuICAgICAgICAgICAgY29uc3QgX3RlbXBJbmRleCA9IHRoaXMuX2dldExhc3RSZXNwb25zZUluZGV4KCk7XHJcbiAgICAgICAgICAgIGlmIChfdGVtcEluZGV4IDwgMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIOS4tOaXtuWtmOWCqOaVsOaNrlxyXG4gICAgICAgICAgICBsZXQgX3RlbXBUb29sYmFyRGF0YXMgPSBbXS5jb25jYXQodGhpcy50b29sYmFyRGF0YXMpO1xyXG4gICAgICAgICAgICAvLyDlpoLmnpzlt7Lnu4/lvIDlp4vlpITnkIblk43lupTlvI9cclxuICAgICAgICAgICAgZm9yIChsZXQgayA9IF90ZW1wSW5kZXg7IGsgPj0gMDsgay0tKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9yZXN0aXR1dGUoX3RlbXBUb29sYmFyRGF0YXMsIGspO1xyXG4gICAgICAgICAgICAgICAgX3RlbXBUb29sYmFyRGF0YXMgPSBbXS5jb25jYXQocmVzdWx0W1wiZGF0YVwiXSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdFtcImNvbnRpbnVlVG9cIl0pIHtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyDmm7TmlrDmlbDmja5cclxuICAgICAgICAgICAgdGhpcy50b29sYmFyRGF0YXMgPSBbXS5jb25jYXQoX3RlbXBUb29sYmFyRGF0YXMpO1xyXG4gICAgICAgICAgICAvLyDmiYDmnInnrKzkuIDlsYLkuIvmi4npg73lj47miphcclxuICAgICAgICAgICAgdGhpcy5kcFN0YXRlID0gW2ZhbHNlXTtcclxuICAgICAgICAgICAgaWYodGhpcy5jZCYmISh0aGlzLmNkIGFzIFZpZXdSZWYpLmRlc3Ryb3llZCl7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNkLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIOS4i+aLieeahOWxleW8gOaUtui1t+eKtuaAgVxyXG4gICAgZHBTZWN0aW9uU3RhdGUoc3RhdGU6IGJvb2xlYW4sIGlkKSB7XHJcbiAgICAgICAgaWYgKHN0YXRlKSB7XHJcbiAgICAgICAgICAgIC8vIOWxleW8gOeKtuaAgeS4i1xyXG4gICAgICAgICAgICBsZXQgZHJvcGRvd25zID0gdGhpcy5yZXNpemVkQ29udGVudEVsLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcclxuICAgICAgICAgICAgICAgIFwiW2ZEcm9wZG93bl1cIlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBpZiAoZHJvcGRvd25zICYmIGRyb3Bkb3ducy5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGRyb3Bkb3ducy5sZW5ndGg7IGsrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHJvcGRvd25zW2tdLmNsYXNzTmFtZS5pbmRleE9mKFwic2hvd1wiKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkcm9wZG93bnNba10uaWQgIT0gaWRcclxuICAgICAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZHJvcGRvd25zW2tdLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdzZWxmQ2xvc2UnKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcGF0aWJsZURpc3BhdGNoRXZlbnQoZHJvcGRvd25zW2tdLCBcInNlbGZDbG9zZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGNvbXBhdGlibGVEaXNwYXRjaEV2ZW50KGV2ZW50RWwsIGV2ZW50TmFtZSkge1xyXG4gICAgICAgIHZhciBldmVudDtcclxuICAgICAgICBpZiAodHlwZW9mIEV2ZW50ID09PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICAgICAgZXZlbnQgPSBuZXcgRXZlbnQoZXZlbnROYW1lKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBldmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiRXZlbnRcIik7XHJcbiAgICAgICAgICAgIGV2ZW50LmluaXRFdmVudChldmVudE5hbWUsIGZhbHNlLCBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGV2ZW50RWwuZGlzcGF0Y2hFdmVudChldmVudCk7XHJcbiAgICB9XHJcbiAgICAvLyDkv67mlLnlkK/nlKjnpoHnlKjnirbmgIFcclxuICAgIGNoYW5nZVN0YXRlKHZhbHVlcykge1xyXG4gICAgICAgIGNvbnN0IGlkQXJyYXkgPSBPYmplY3Qua2V5cyh2YWx1ZXMpO1xyXG4gICAgICAgIGlkQXJyYXkuZm9yRWFjaChpZCA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHN0YXRlID0gdmFsdWVzW2lkXTtcclxuICAgICAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMuX2ZpbmRJdGVtQnlJRChpZCwgdGhpcy50b29sYmFyRGF0YXMpO1xyXG4gICAgICAgICAgICBpZihpdGVtKXtcclxuICAgICAgICAgICAgICAgICBpdGVtW1wiZGlzYWJsZWRcIl0gPSBzdGF0ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmKHRoaXMuY2QmJiEodGhpcy5jZCBhcyBWaWV3UmVmKS5kZXN0cm95ZWQpe1xyXG4gICAgICAgICAgICB0aGlzLmNkLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOS/ruaUueaYvuekuueKtuaAgVxyXG4gICAgICog5aaC5p6c5piv5LiL5ouJ5oyJ6ZKuXHJcbiAgICAgKiAgIOWIpOaWreS4i+mdoueahOWtkOaYr+WQpumDvemakOiXj1xyXG4gICAgICogQHBhcmFtIHZhbHVlc1xyXG4gICAgICovXHJcbiAgICBjaGFuZ2VWaXNpYmxlKHZhbHVlcykge1xyXG4gICAgICAgIGNvbnN0IGlkQXJyYXkgPSBPYmplY3Qua2V5cyh2YWx1ZXMpO1xyXG4gICAgICAgIGlkQXJyYXkuZm9yRWFjaChpZCA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZpc2libGUgPSB2YWx1ZXNbaWRdO1xyXG4gICAgICAgICAgICBjb25zdCBpdGVtID0gdGhpcy5fZmluZEl0ZW1CeUlEKGlkLCB0aGlzLnRvb2xiYXJEYXRhcyk7XHJcbiAgICAgICAgICAgIGlmKGl0ZW0pe1xyXG4gICAgICAgICAgICAgICAgaXRlbVtcInZpc2libGVcIl0gPSB2aXNpYmxlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8g6YGN5Y6G5b6q546vLOabtOaWsOaVsOaNrlxyXG4gICAgICAgIHRoaXMudG9vbGJhckRhdGFzLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIC8vIOWmguaenOaYr+S4i+aLiVxyXG4gICAgICAgICAgICBpZiAoaXRlbVtcImlzRFBcIl0pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NoZWNrRHJvcGRvd25WaXNpYmxlKHZhbHVlcywgaXRlbSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLm5lZWRSZXNwb25zZUNoYW5nZXMrKztcclxuICAgICAgICAvLyDmm7TmlrBcclxuICAgICAgIC8vdGhpcy5jZC5tYXJrRm9yQ2hlY2soKTtcclxuICAgICAgIGlmKHRoaXMuY2QmJiEodGhpcy5jZCBhcyBWaWV3UmVmKS5kZXN0cm95ZWQpe1xyXG4gICAgICAgIHRoaXMuY2QuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5aaC5p6c5piv5LiL5ouJ5oyJ6ZKuXHJcbiAgICAgKiAgIOWIpOaWreS4i+mdoueahOWtkOaYr+WQpumDvemakOiXj1xyXG4gICAgICogICAgICAgQS4g5aaC5p6c5a2Q6YO96ZqQ6JeP77yM6YKj5LmI5pW05Liq5LiL5ouJ6YO96KKr6ZqQ6JeP77ybXHJcbiAgICAgKiAgICAgICBCLiDlpoLmnpzlrZjlnKjlrZDmsqHmnInpmpDol4/vvIzogIzkuJTkuIvmi4nmsqHmnInooqvpooTnva7pmpDol4/vvIzkuIvmi4nmjInpkq7mmL7npLpcclxuICAgICAqIEBwYXJhbSBvdXRzaWRlVmlzaWJsZUFycmF5cyDku47nu4Tku7blpJbkvKDlhaXnmoTlj6/op4HnirbmgIHlr7nosaFcclxuICAgICAqIEBwYXJhbSBkcm9wZG93bkl0ZW0g5LiL5ouJ5YWD57SgXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgX2NoZWNrRHJvcGRvd25WaXNpYmxlKG91dHNpZGVWaXNpYmxlQXJyYXlzLCBkcm9wZG93bkl0ZW0pOiB2b2lkIHtcclxuICAgICAgICAvL+WmguaenOayoeacieiiq+W8uuWItuiuvue9rueKtuaAgVxyXG4gICAgICAgIGlmICghb3V0c2lkZVZpc2libGVBcnJheXMuaGFzT3duUHJvcGVydHkoZHJvcGRvd25JdGVtW1wiaWRcIl0pKSB7XHJcbiAgICAgICAgICAgIC8vIOS4i+aLieWFg+e0oOS4jeWPr+inge+8jOWIpOaWreaYr+WQpuacieWPr+ingeWtkOWFg+e0oFxyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAhZHJvcGRvd25JdGVtW1widmlzaWJsZVwiXSAmJlxyXG4gICAgICAgICAgICAgICAgdGhpcy5faGFzVmlzaWJsZUl0ZW0oZHJvcGRvd25JdGVtW1wiY2hpbGRyZW5cIl0sIHRydWUpXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgZHJvcGRvd25JdGVtW1widmlzaWJsZVwiXSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8g5LiL5ouJ5YWD57Sg5piv5Y+v6KeB77yM5Yik5pat5piv5ZCm5pyJ5a2Q5YWD57Sg6YO95LiN5Y+v6KeBXHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgIGRyb3Bkb3duSXRlbVtcInZpc2libGVcIl0gJiZcclxuICAgICAgICAgICAgICAgICF0aGlzLl9oYXNWaXNpYmxlSXRlbShkcm9wZG93bkl0ZW1bXCJjaGlsZHJlblwiXSwgdHJ1ZSlcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICBkcm9wZG93bkl0ZW1bXCJ2aXNpYmxlXCJdID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZHJvcGRvd25JdGVtLmNoaWxkcmVuLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChpdGVtW1wiaXNEUFwiXSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY2hlY2tEcm9wZG93blZpc2libGUob3V0c2lkZVZpc2libGVBcnJheXMsIGl0ZW0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWcqOW+heajgOafpeaVsOaNruS4reW/g++8jOajgOafpeaYr+WQpuWtmOWcqOivpeWPr+ingeeKtuaAgeeahOaVsOaNruOAglxyXG4gICAgICog5aaC5p6c5pyJ6L+U5ZuedHJ1ZSzlkKbliJnov5Tlm55mYWxzZVxyXG4gICAgICogQHBhcmFtIGRhdGFzIOW+heajgOafpeaVsOaNrlxyXG4gICAgICogQHBhcmFtIHZpc2libGUg5Y+v6KeB54q25oCBXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgX2hhc1Zpc2libGVJdGVtKGRhdGFzLCB2aXNpYmxlKTogYm9vbGVhbiB7XHJcbiAgICAgICAgY29uc3QgZmluZEluZGV4ID0gZGF0YXMuZmluZEluZGV4KGNoaWxkSXRlbSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChjaGlsZEl0ZW1bXCJ2aXNpYmxlXCJdID09IHZpc2libGUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAoZmluZEluZGV4ID4gLTEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOaNleiOt+eCueWHu1xyXG4gICAgICogQHBhcmFtIGV2XHJcbiAgICAgKi9cclxuICAgIGNsaWNrSXRlbShldjogTW91c2VFdmVudCwgZGRSZWY/OiBGRHJvcGRvd25EaXJlY3RpdmUpIHtcclxuICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAvLyDlpoLmnpzmmK/liIbnprvnmoTkuIvmi4nmjInpkq5cclxuICAgICAgICBpZiAodGhpcy5lbGhhc1NwZWNpYWxDbHMoZXYudGFyZ2V0LCBcImRyb3Bkb3duLXRvZ2dsZS1zcGxpdFwiKSkge1xyXG4gICAgICAgICAgICBldi5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g5Yik5pat5piv5ZCm54K55Ye75Yiw6ZyA6KaB5aSE55CG5LqL5Lu255qE5YWD57Sg5LiKLOaMiemSruOAgeS4i+aLieaMiemSrlxyXG4gICAgICAgIHZhciBjbGlja0V2RWwgPSB0aGlzLmZpbmRCdG5PclRvZ2dsZXJJdGVtRnJvbUNsaWNrKGV2LnRhcmdldCk7XHJcbiAgICAgICAgaWYgKGNsaWNrRXZFbCkge1xyXG4gICAgICAgICAgICBsZXQgdGVtcElEID0gY2xpY2tFdkVsW1wiaWRcIl07XHJcbiAgICAgICAgICAgIC8vIOS/ruaUueaooeadv++8jGlk6LCD5pW05Yiw5LiL5ouJ5pW05L2T5LiKXHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICF0ZW1wSUQgJiZcclxuICAgICAgICAgICAgICAgIHRoaXMuZWxoYXNTcGVjaWFsQ2xzKGNsaWNrRXZFbFtcInBhcmVudE5vZGVcIl0sIFwiZi1ydC1kcm9wZG93blwiKVxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgIHRlbXBJRCA9IGNsaWNrRXZFbFtcInBhcmVudE5vZGVcIl0uaWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRlbXBJRCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGVtcEl0ZW0gPSB0aGlzLl9maW5kSXRlbUJ5SUQodGVtcElELCB0aGlzLnRvb2xiYXJEYXRhcyk7XHJcbiAgICAgICAgICAgICAgICAvLyDlpoLmnpzlhYPntKDnpoHnlKhcclxuICAgICAgICAgICAgICAgIGlmICh0ZW1wSXRlbVtcImRpc2FibGVkXCJdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g56aB5q2i5ZCR5LiK5Lyg6YCSXHJcbiAgICAgICAgICAgICAgICAgICAgZXYuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsaWNrSXRlbXMubmV4dCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiB0ZW1wSUQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHRlbXBJdGVtW1widGV4dFwiXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGlkZGVuOiB0ZW1wSXRlbVtcImhpZGRlblwiXVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGRSZWYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGRSZWYuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBldi5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGZpbmRCdG5PclRvZ2dsZXJJdGVtRnJvbUNsaWNrKGNsaWNrVGFyZ2V0KSB7XHJcbiAgICAgICAgLy8g54i257qn5qCH562+5piv5ZCm5pivYm9keSzmmK/nnYDlgZzmraLov5Tlm57pm4blkIgs5Y+N5LmL57un57utXHJcbiAgICAgICAgaWYgKHRoaXMuZWxoYXNTcGVjaWFsQ2xzKGNsaWNrVGFyZ2V0KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gY2xpY2tUYXJnZXQ7XHJcbiAgICAgICAgfSBlbHNlIGlmIChcclxuICAgICAgICAgICAgY2xpY2tUYXJnZXQucGFyZW50Tm9kZVtcImNsYXNzTmFtZVwiXSYmY2xpY2tUYXJnZXQucGFyZW50Tm9kZVtcImNsYXNzTmFtZVwiXS5pbmRleE9mKFwiZi1yZXNwb25zZS1jb250ZW50XCIpIDwgMFxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICB2YXIgcGFyZW50TiA9IGNsaWNrVGFyZ2V0LnBhcmVudE5vZGU7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmVsaGFzU3BlY2lhbENscyhwYXJlbnROKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcmVudE47XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5maW5kQnRuT3JUb2dnbGVySXRlbUZyb21DbGljayhwYXJlbnROKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDov5Tlm57pm4blkIgs57uT5p2fXHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGVsaGFzU3BlY2lhbENscyhlbCwgY2xzTmFtZSA9IFwiXCIpIHtcclxuICAgICAgICBpZiAoZWwpIHtcclxuICAgICAgICAgICAgdmFyIGNsYXNzTmFtZUxpc3QgPSBlbC5jbGFzc0xpc3Q7XHJcbiAgICAgICAgICAgIHZhciBmaW5kQ2xzID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgY2xhc3NOYW1lTGlzdC5sZW5ndGg7IGsrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNsc05hbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2xhc3NOYW1lTGlzdFtrXSA9PSBjbHNOYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbmRDbHMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lTGlzdFtrXSA9PSBcImYtcnQtYnRuXCIgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lTGlzdFtrXSA9PSBcImYtcnQtdG9nZ2xlXCJcclxuICAgICAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmluZENscyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZmluZENscztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDmoLnmja7kvKDpgJLnmoTmlbDmja7ph43mlrDnu4Tlu7rliIbnu4RcclxuICAgICAqIFRvRG8g5pqC5pe25rKh5pyJ5pu05aSN5p2C55qE5YiG57uE77yM5ZCm5YiZ6ZyA6KaB6K6w5b2V5YiG57uEXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgX3JlT3JnYW5pemVSZXNpemVHcm91cHMoKSB7XHJcbiAgICAgICAgLy8g5aSE55CG5YiG57uE5pWw5o2uXHJcbiAgICAgICAgLy8gIGlmICh0aGlzLnJlc2l6ZUdyb3Vwcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICBsZXQgbW9yZVRleHQgPSBcIuabtOWkmlwiO1xyXG4gICAgICAgIGlmICh0aGlzLmxvY2FsZVNlcnZpY2UpIHtcclxuICAgICAgICAgICAgbW9yZVRleHQgPSB0aGlzLmxvY2FsZVNlcnZpY2UuZ2V0VmFsdWUoXCJyZXNwb25zZVRvb2xiYXIubW9yZVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgZGVmYXVsdFJlc2l6ZUdyb3VwID0gbmV3IFJlc3BvbnNlVG9vbGJhckdyb3VwKFxyXG4gICAgICAgICAgICBcInRvb2xiYXItZ3JvdXAtMVwiLFxyXG4gICAgICAgICAgICBtb3JlVGV4dFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMudG9vbGJhckRhdGFzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgIGRlZmF1bHRSZXNpemVHcm91cC5zZXRQcmVzZXQodGhpcy50b29sYmFyRGF0YXNbaV1bXCJpZFwiXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucmVzaXplR3JvdXBzID0gW10uY29uY2F0KGRlZmF1bHRSZXNpemVHcm91cCk7XHJcbiAgICAgICAvLyB0aGlzLmNkLm1hcmtGb3JDaGVjaygpO1xyXG4gICAgICAgaWYodGhpcy5jZCYmISh0aGlzLmNkIGFzIFZpZXdSZWYpLmRlc3Ryb3llZCl7XHJcbiAgICAgICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWGheWuueS4juWuueWZqOeahOW3ruWAvFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIF9nZXREaXN0YW5jZSgpIHtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICB0aGlzLnJlc2l6ZWRDb250ZW50RWwubmF0aXZlRWxlbWVudC5vZmZzZXRXaWR0aCAtXHJcbiAgICAgICAgICAgIHRoaXMucmVzaXplZENvbnRhaW5lckVsLm5hdGl2ZUVsZW1lbnQub2Zmc2V0V2lkdGhcclxuICAgICAgICApO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDmoLnmja7ov5Tlm57nu5PmnpzliKTmlq3mmK/lkKbnu6fnu61cclxuICAgICAqIEBwYXJhbSBncm91cEluZGV4XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgX3Jlc3RpdHV0ZShvcmlnaW5hbERhdGEsIGdyb3VwSW5kZXgpIHtcclxuICAgICAgICBjb25zdCB0ZW1wR3JvdXAgPSB0aGlzLnJlc2l6ZUdyb3Vwc1tncm91cEluZGV4XTtcclxuICAgICAgICAvLyDmu5rliqjmnaHlkozlhoXlrrnnmoTot53nprtcclxuICAgICAgICBsZXQgdGVtcERpc3RhbmNlID0gdGhpcy5fZ2V0RGlzdGFuY2UoKTtcclxuICAgICAgICAvLyDorqHnrpfmnIDlkI7kuIDkuKrkuIvmi4nnmoTlrr3luqZcclxuICAgICAgICBjb25zdCB0ZW1wR3JvdXBEYXRhID1cclxuICAgICAgICAgICAgb3JpZ2luYWxEYXRhW3RoaXMuX2ZpbmRJbmRleEJ5SUQob3JpZ2luYWxEYXRhLCB0ZW1wR3JvdXAuaWQpXTtcclxuICAgICAgICAvLyDmib7liLDov5jljp/nmoTkvY3nva5cclxuICAgICAgICBjb25zdCB0ZW1wUHJlc2V0SW5kZXggPSBbXS5jb25jYXQodGVtcEdyb3VwLnJlc3BvbnNlZEluZGV4KTtcclxuICAgICAgICAvLyDmjpLpmaTljp/kuIvmi4nlrZDlhYPntKDooqvorqHnrpdcclxuICAgICAgICBmb3IgKGxldCBqID0gdGVtcFByZXNldEluZGV4Lmxlbmd0aCAtIDE7IGogPj0gMDsgai0tKSB7XHJcbiAgICAgICAgICAgIGlmICh0ZW1wRGlzdGFuY2UgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8g5LuO5LiL5ouJ5Lit56e76ZmkXHJcbiAgICAgICAgICAgIGNvbnN0IHRlbXBDaGlsZERhdGEgPSB0ZW1wR3JvdXBEYXRhLmNoaWxkcmVuWzBdO1xyXG4gICAgICAgICAgICBjb25zdCBzcGVjaWFsRGlzdGFuY2UgPSBqID09PSAwID8gdGVtcEdyb3VwRGF0YS5nZXRXaWR0aCgpIDogMDtcclxuXHJcbiAgICAgICAgICAgIHRlbXBEaXN0YW5jZSA9XHJcbiAgICAgICAgICAgICAgICB0ZW1wRGlzdGFuY2UgK1xyXG4gICAgICAgICAgICAgICAgKHRlbXBDaGlsZERhdGEuZ2V0V2lkdGgoKSA/IHRlbXBDaGlsZERhdGEuZ2V0V2lkdGgoKSA6IDApIC1cclxuICAgICAgICAgICAgICAgIHNwZWNpYWxEaXN0YW5jZTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0ZW1wRGlzdGFuY2UgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyDmm7TmlrDkuIvmi4lcclxuICAgICAgICAgICAgICAgIHRlbXBHcm91cERhdGEucmVtb3ZlQ2hpbGQoKTtcclxuICAgICAgICAgICAgICAgIC8vIOaPkuWFpeWIsOWOn+S9jee9rlxyXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxEYXRhLnNwbGljZSh0ZW1wUHJlc2V0SW5kZXhbal0sIDAsIHRlbXBDaGlsZERhdGEpO1xyXG4gICAgICAgICAgICAgICAgLy8g5pu05paw5L2N572uXHJcbiAgICAgICAgICAgICAgICB0ZW1wR3JvdXAucmVtb3ZlUmVzcG9uc2VkKGopO1xyXG4gICAgICAgICAgICAgICAgaWYgKGogPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbERhdGEuc3BsaWNlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9maW5kSW5kZXhCeUlEKG9yaWdpbmFsRGF0YSwgdGVtcEdyb3VwLmlkKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgMVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgY29udGludWVUbzogdGVtcERpc3RhbmNlID4gMCA/IHRydWUgOiBmYWxzZSxcclxuICAgICAgICAgICAgZGF0YTogb3JpZ2luYWxEYXRhXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOW8gOWni+iuoeeul1xyXG4gICAgICogQHBhcmFtIGRhdGFzXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgX2NhbGN1bGF0ZShhdXhpbGlhcnk6IGJvb2xlYW4gPSBmYWxzZSwgdEdyb3VwV2lkdGg6IG51bWJlciA9IDApIHtcclxuICAgICAgICBpZiAodGhpcy5fYXV4aWxpYXJ5IDwgMCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOiusOW9lemcgOimgeS/ruaUueeahOS4i+aLiVxyXG4gICAgICAgIGxldCB0ZW1wRFA7XHJcbiAgICAgICAgLy8g5rua5Yqo5p2h5ZKM5YaF5a6555qE6Led56a7XHJcbiAgICAgICAgbGV0IHRlbXBEaXN0YW5jZSA9IHRoaXMuX2dldERpc3RhbmNlKCkgKyB0R3JvdXBXaWR0aDtcclxuICAgICAgICAvLyDkuLTml7blrZjlgqjmlbDmja5cclxuICAgICAgICBjb25zdCB0ZW1wVG9vbGJhckRhdGFzID0gW10uY29uY2F0KHRoaXMudG9vbGJhckRhdGFzKTtcclxuICAgICAgICBjb25zdCB0ZW1wR3JvdXAgPSB0aGlzLnJlc2l6ZUdyb3Vwc1t0aGlzLl9hdXhpbGlhcnldO1xyXG4gICAgICAgIGlmIChhdXhpbGlhcnkpIHtcclxuICAgICAgICAgICAgdGVtcERQID0gdGhpcy5hdXhpbGlhcnlEYXRhcy5wb3AoKTtcclxuICAgICAgICAgICAgdGVtcERQLnNldFdpZHRoKHRHcm91cFdpZHRoKTtcclxuICAgICAgICAgICAgdGVtcEdyb3VwLnNldFdpZHRoKHRHcm91cFdpZHRoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0ZW1wRFAgPVxyXG4gICAgICAgICAgICAgICAgdGVtcFRvb2xiYXJEYXRhc1tcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9maW5kSW5kZXhCeUlEKHRlbXBUb29sYmFyRGF0YXMsIHRlbXBHcm91cC5pZClcclxuICAgICAgICAgICAgICAgIF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOW9k+WJjeWJqeS9memakOiXj1xyXG4gICAgICAgIGZvciAoXHJcbiAgICAgICAgICAgIGxldCBqID0gdGVtcEdyb3VwLnJlc3BvbnNlZEluZGV4Lmxlbmd0aDtcclxuICAgICAgICAgICAgaiA8IHRlbXBHcm91cC5wcmVzZXRJZC5sZW5ndGg7XHJcbiAgICAgICAgICAgIGorK1xyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICBpZiAodGVtcERpc3RhbmNlIDw9IDApIHtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyDorqHnrpflnKjlvZPliY3mlbDmja7kuK3nmoTkvY3nva7vvIzmoLnmja7ov5nkuKrkvY3nva7lj6/ku6Xmib7lrr3luqZcclxuICAgICAgICAgICAgY29uc3QgdGVtcE9sZEluZGV4ID0gdGhpcy5fZmluZEluZGV4QnlJRChcclxuICAgICAgICAgICAgICAgIHRoaXMudG9vbGJhckRhdGFzLFxyXG4gICAgICAgICAgICAgICAgdGVtcEdyb3VwLnByZXNldElkW2pdXHJcbiAgICAgICAgICAgICkgYXMgYW55O1xyXG4gICAgICAgICAgICBjb25zdCB0ZW1wTmV3SW5kZXggPSB0aGlzLl9maW5kSW5kZXhCeUlEKFxyXG4gICAgICAgICAgICAgICAgdGVtcFRvb2xiYXJEYXRhcyxcclxuICAgICAgICAgICAgICAgIHRlbXBHcm91cC5wcmVzZXRJZFtqXVxyXG4gICAgICAgICAgICApIGFzIGFueTtcclxuXHJcbiAgICAgICAgICAgIC8vIOiuoeeul+aMiemSruWuveW6plxyXG4gICAgICAgICAgICBsZXQgdGVtcFdpZHRoID0gdGhpcy50b29sYmFyRGF0YXNbdGVtcE9sZEluZGV4XS5nZXRXaWR0aCgpIGFzIGFueTtcclxuICAgICAgICAgICAgaWYgKHRlbXBXaWR0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgLy8g5oyJ6ZKu5a695bqm5pyq5pu+6KKr6K6h566X6L+HXHJcbiAgICAgICAgICAgICAgICB0ZW1wV2lkdGggPSB0aGlzLl9nZXRXaWR0aEZyb21FbGVtZW50c0J5SWQoXHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcEdyb3VwLnByZXNldElkW2pdXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgdGVtcFRvb2xiYXJEYXRhc1t0ZW1wTmV3SW5kZXhdLnNldFdpZHRoKHRlbXBXaWR0aCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGVtcFdpZHRoID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgLy8g5oyJ6ZKu6KKr6ZqQ6JePXHJcbiAgICAgICAgICAgICAgICB0ZW1wV2lkdGggPSAwO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0ZW1wRFAuYWRkQ2hpbGQodGVtcFRvb2xiYXJEYXRhc1t0ZW1wTmV3SW5kZXhdKTtcclxuICAgICAgICAgICAgLy8g56e76ZmkXHJcbiAgICAgICAgICAgIHRlbXBUb29sYmFyRGF0YXMuc3BsaWNlKHRlbXBOZXdJbmRleCwgMSk7XHJcbiAgICAgICAgICAgIC8vIOS/neWtmOS9jee9rueUqOS6jui/mOWOn1xyXG4gICAgICAgICAgICB0ZW1wR3JvdXAuc2V0UmVzcG9uc2VkKHRlbXBOZXdJbmRleCk7XHJcbiAgICAgICAgICAgIHRlbXBEaXN0YW5jZSA9IHRlbXBEaXN0YW5jZSAtIHRlbXBXaWR0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGF1eGlsaWFyeSAmJiB0ZW1wRFAuaGFzQ2hpbGQoKSkge1xyXG4gICAgICAgICAgICAvLyDmj5LlhaVcclxuICAgICAgICAgICAgdGVtcFRvb2xiYXJEYXRhcy5wdXNoKHRlbXBEUCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2F1eGlsaWFyeSA9IC0xO1xyXG4gICAgICAgIHRoaXMudG9vbGJhckRhdGFzID0gW10uY29uY2F0KHRlbXBUb29sYmFyRGF0YXMpO1xyXG4gICAgICAgIGlmKHRoaXMuY2QmJiEodGhpcy5jZCBhcyBWaWV3UmVmKS5kZXN0cm95ZWQpe1xyXG4gICAgICAgICAgICB0aGlzLmNkLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmoLnmja5pZOaJvuWIsOWunumZheaYvuekuuWFg+e0oOeahOWuveW6plxyXG4gICAgICogQHBhcmFtIGZpbmRJZFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIF9nZXRXaWR0aEZyb21FbGVtZW50c0J5SWQoZmluZElkKTogbnVtYmVyIHtcclxuICAgICAgICBjb25zdCBwYXJlbnRFbCA9IHRoaXMucmVzaXplZENvbnRlbnRFbC5uYXRpdmVFbGVtZW50O1xyXG4gICAgICAgIGNvbnN0IGNoaWxkTGVuID0gcGFyZW50RWwuY2hpbGRyZW4ubGVuZ3RoO1xyXG4gICAgICAgIGxldCByZXN1bHQgPSAwO1xyXG4gICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgY2hpbGRMZW47IGsrKykge1xyXG4gICAgICAgICAgICBpZiAocGFyZW50RWwuY2hpbGRyZW5ba10uaWQgPT09IGZpbmRJZCkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gcGFyZW50RWwuY2hpbGRyZW5ba10ub2Zmc2V0V2lkdGg7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDmoLzlvI/ljJbmlbDmja5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBfZm9ybWF0RGF0YShkYXRhcywgaWRQcmVmaXg6IHN0cmluZyA9IFwicmVzcG9uc2VcIikge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xyXG4gICAgICAgIGRhdGFzLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChpdGVtLmlzRFApIHtcclxuICAgICAgICAgICAgICAgIC8vIOWmguaenOaYr+S4i+aLiVxyXG4gICAgICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uaGFzT3duUHJvcGVydHkoXCJjaGlsZHJlblwiKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1bXCJjaGlsZHJlblwiXS5sZW5ndGhcclxuICAgICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkcmVuID0gW10uY29uY2F0KGl0ZW1bXCJjaGlsZHJlblwiXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5jaGlsZHJlbiA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRwSXRlbSA9IG5ldyBSZXNwb25zZVRvb2xiYXJEcm9wRG93bihcclxuICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih7IGlkOiBpZFByZWZpeCArIFwiX1wiICsgaW5kZXggfSwgaXRlbSlcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGRwSXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZHBJdGVtLmNoaWxkcmVuID0gdGhpcy5fZm9ybWF0RGF0YShcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkUHJlZml4ICsgXCJfXCIgKyBpbmRleFxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgUmVzcG9uc2VUb29sYmFyRHJvcERvd24oXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHsgaWQ6IGlkUHJlZml4ICsgXCJfXCIgKyBpbmRleCB9LCBpdGVtKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIOmdnuS4i+aLiVxyXG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IFJlc3BvbnNlVG9vbGJhckl0ZW0oXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oeyBpZDogaWRQcmVmaXggKyBcIl9cIiArIGluZGV4IH0sIGl0ZW0pXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDmib7liLDnrKzkuIDkuKrmnKrlpITnkIblrozlk43lupTlvI/nmoTlhYPntKBcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBfZ2V0Rmlyc3RVblJlc3BvbnNlZEluZGV4KCkge1xyXG4gICAgICAgIGNvbnN0IHRlbXBVblJlc3BvbnNlZEluZGV4ID0gdGhpcy5yZXNpemVHcm91cHMuZmluZEluZGV4KGdyb3VwID0+IHtcclxuICAgICAgICAgICAgaWYgKGdyb3VwLmlzUmVzcG9uc2VkKCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdGVtcFVuUmVzcG9uc2VkSW5kZXg7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWvu+aJvuacgOWQjuS4gOS4quWkhOeQhuWTjeW6lOW8j+eahOWFg+e0oFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIF9nZXRMYXN0UmVzcG9uc2VJbmRleCgpIHtcclxuICAgICAgICBjb25zdCB0ZW1wUmVzcG9uc2luZ0luZGV4ID0gdGhpcy5yZXNpemVHcm91cHMuZmluZEluZGV4KGdyb3VwID0+IHtcclxuICAgICAgICAgICAgaWYgKCFncm91cC5pc1Jlc3BvbnNpbmcoKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIOaJgOaciee7hOWFg+e0oOmDveW3suWkhOeQhuWujOWTjeW6lOW8j1xyXG4gICAgICAgIGlmICh0ZW1wUmVzcG9uc2luZ0luZGV4ID09PSAtMSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZXNpemVHcm91cHMubGVuZ3RoIC0gMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g5omA5pyJ57uE5YWD57Sg6YO95pyq5byA5aeL5aSE55CG5ZON5bqU5byPXHJcbiAgICAgICAgcmV0dXJuIHRlbXBSZXNwb25zaW5nSW5kZXggPiAxID8gdGVtcFJlc3BvbnNpbmdJbmRleCAtIDEgOiAtMTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5om+5YiwZ3JvdXDlvaLmiJDnmoTkuIvmi4nvvIzlnKjmlbDmja7kuK3nmoTkvY3nva5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBfZmluZEluZGV4QnlJRChcclxuICAgICAgICBkYXRhczogQXJyYXk8UmVzcG9uc2VUb29sYmFySXRlbSB8IFJlc3BvbnNlVG9vbGJhckRyb3BEb3duPixcclxuICAgICAgICBpZDogc3RyaW5nXHJcbiAgICApOiBhbnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGRhdGFzLmZpbmRJbmRleCgoaXRlbSwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgaWYgKGl0ZW1bXCJpZFwiXSA9PT0gaWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDmoLnmja5JROWvu+aJvkl0ZW1cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBfZmluZEl0ZW1CeUlEKFxyXG4gICAgICAgIGlkOiBzdHJpbmcsXHJcbiAgICAgICAgZGF0YTogQXJyYXk8UmVzcG9uc2VUb29sYmFyRHJvcERvd24gfCBSZXNwb25zZVRvb2xiYXJJdGVtPlxyXG4gICAgKTogUmVzcG9uc2VUb29sYmFyRHJvcERvd24gfCBSZXNwb25zZVRvb2xiYXJJdGVtIHtcclxuICAgICAgICBsZXQgdGVtcFJlc3VsdCA9IG51bGw7XHJcbiAgICAgICAgY29uc3QgdGVtcEluZGV4ID0gZGF0YS5maW5kSW5kZXgoKGl0ZW0sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChpdGVtW1wiaWRcIl0gPT09IGlkKSB7XHJcbiAgICAgICAgICAgICAgICB0ZW1wUmVzdWx0ID0gaXRlbTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIOWmguaenOaYr+S4i+aLie+8jOWxgue6p+S4i+aLiVxyXG4gICAgICAgICAgICBpZiAoaXRlbVtcImlzRFBcIl0pIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRlbXBJdGVtID0gdGhpcy5fZmluZEl0ZW1CeUlEKGlkLCBpdGVtW1wiY2hpbGRyZW5cIl0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRlbXBJdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcFJlc3VsdCA9IHRlbXBJdGVtO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdGVtcFJlc3VsdDtcclxuICAgIH1cclxufVxyXG4iXX0=