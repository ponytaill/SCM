/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
/*
 * @Author: 疯狂秀才(lucas huang)
 * @Date: 2018-11-23 11:23:12
 * @LastEditors: 疯狂秀才(Lucas Huang)
 * @LastEditTime: 2020-10-20 20:18:26
 * @Company: Inspur
 * @Version: v0.3.x
 */
import { Component, Input, ViewChild, EventEmitter, Injector, ComponentFactoryResolver, Output, ChangeDetectorRef, ViewEncapsulation, ViewContainerRef, forwardRef, ElementRef, NgZone, Renderer2, } from "@angular/core";
import { NG_VALUE_ACCESSOR } from "@angular/forms";
import { of, Subject } from "rxjs";
import { LocaleService } from "@farris/ui-locale";
import { MessagerService } from "@farris/ui-messager";
import { LoadingService } from "@farris/ui-loading";
import { DataTableComponent } from "@farris/ui-datatable";
import { TreeTableComponent } from "@farris/ui-treetable";
import { LayoutPanelComponent } from "@farris/ui-layout";
import { CommonUtils, DebugService, FarrisComponentInstanceService, OverLayHiddenService } from "@farris/ui-common";
import { ShortcutsService } from "@farris/ui-shortcuts";
import { InputGroupComponent } from "@farris/ui-input-group";
import { NotifyService } from "@farris/ui-notify";
import { FAVORITE_FIELD_NAME, INPUT_GROUP_ICON, LookupGridDisplayType, QuickSelectDefaultOptions, } from "./lookup-displaytype";
import { LookupComponent } from "./lookup.component";
import { lookupGridDefaults, displayInfoDefault, } from "./lookup-grid-options";
import { ServerSideToken } from "./http/ILookupHttpService";
import { LookupDefaultMapping } from "./lookup-defaut-mapping";
import { LookupUtils } from "./utils";
import { PersonalConfigService } from "./lookup-presonalConfig.service";
import { UtilService, TreeNodeHelper, FavoriteHelper, SelectionManager, DataTableEventManager, TreeTableEventManager, MultiSelectionManager, LookupHttpManager, LookupComponentManager, LookupDialogManager, onTextChanged, LookupSelectionService, } from "./services";
import { map } from "rxjs/operators";
import { EventManager } from "@angular/platform-browser";
import { cloneDeep } from "lodash-es";
/** @type {?} */
export var LOOKUPGRID_VALUE_ACCESSOR = {
    provide: NG_VALUE_ACCESSOR,
    useExisting: forwardRef((/**
     * @return {?}
     */
    function () { return LookupGridComponent; })),
    multi: true,
};
var LookupGridComponent = /** @class */ (function (_super) {
    tslib_1.__extends(LookupGridComponent, _super);
    function LookupGridComponent(injector, cfr, el, utils, defaultMapping, changeDetector, shortcuts, lookupUtils, zone, render2) {
        var _this = _super.call(this, injector, el, changeDetector) || this;
        _this.injector = injector;
        _this.cfr = cfr;
        _this.el = el;
        _this.utils = utils;
        _this.defaultMapping = defaultMapping;
        _this.changeDetector = changeDetector;
        _this.shortcuts = shortcuts;
        _this.lookupUtils = lookupUtils;
        _this.zone = zone;
        _this.render2 = render2;
        _this.groupIcon = INPUT_GROUP_ICON;
        _this._displayType = "";
        /**
         * 使用表单设计器中的显示类型。否则使用元数据设置的显示类型。 默认：false
         */
        _this.customDisplayType = false;
        _this.viewType = "text";
        /**
         * 启用清空按钮
         */
        _this.enableClear = true;
        /**
         * 服务器端排序
         */
        _this.remoteSort = true;
        /**
         * 树表显示全选复选框。 默认不显示
         */
        _this.showCheckAll = false;
        /**
         * 是否启用多选
         */
        _this.singleSelect = true;
        /**
         * 多选分隔符
         */
        _this.multipleChoiceSeparator = ",";
        /**
         * BE REST RUI
         * - 此处设置后 uri 失效
         */
        _this.beUri = "";
        /**
         * 显示过滤工具条
         */
        _this.showFilterBar = true;
        /**
         * 是否启用分页
         */
        _this.pagination = true;
        /**
         * 当前页索引，从 0开始
         */
        _this.pageIndex = 1;
        /**
         * 每页记录数
         */
        _this.pageSize = 20;
        /**
         * 可用分页记录数列表
         */
        _this.pageList = [10, 20, 30, 50, 100];
        /**
         * 总记录数
         */
        _this.total = 0;
        /** 可拖动列 */
        // @Input() resizableColumns = true;
        /**
         * 显示列信息, 默认为 []
         */
        _this.columns = [];
        /**
         * 帮助查询是否为远端查询
         */
        _this.remoteSearch = true;
        /**
         * 文本变化后，进行服务器端查询
         */
        _this.searchOnServer = true;
        /**
         * 不进行服务器查询，有啥算啥
         */
        _this.nosearch = false;
        /**
         * 启用任意输入后，值通过输入时触发
         */
        _this.clearMappings = new EventEmitter();
        // 收藏列表
        _this.favoriteItems = [];
        /**
         * 是否启用级联选择控制选项
         */
        _this.enableCascade = false;
        /**
         * 级联控制默认值： enable, up, down, disable
         */
        _this.cascadeStatus = "enable";
        _this.placeholder = "";
        /**
         * 显示已选记录列表。 默认为 false 不显示
         */
        _this.showSelected = false;
        /**
         * 应用收藏夹
         */
        _this.useFavorite = false;
        /**
         * 收藏数据来自于： locale: 本地存储， remote: 服务器端存储
         */
        _this.favoriteDataFrom = "remote";
        /**
         * 使用提示,快捷选择
         */
        _this.useTip = false;
        /**
         * 记录窗口大小
         */
        _this.isRecordSize = false;
        /**
         * 是否启用选中value值对应的行数据，默认 true
         */
        _this.enableToSelect = true;
        _this.enableFindText = false;
        /**
         * -1: 不展开； 0: 全部展开；>0: 展开到指定级数
         */
        _this.expandLevel = -1;
        _this.navTreeTableOptions = {};
        _this.treeTableOptions = {};
        _this.dataTableOptions = {};
        _this.defaultTreeTableOptions = {
            maxLevel: 9,
            enableContextMenu: false,
            contextMenuItems: [],
        };
        /**
         * 树形帮助数据加载方式： default: 内置取数； loadall: 加载所有 layerload：分层加载
         */
        _this.loadTreeDataType = "default";
        /**
         * 窗口打开后立即加载数据，默认为 true
         */
        _this.loadDataWhenOpen = true;
        /**
         * 导航列表，树列表在帮助打开后选中的数据;
         * 设置后，`selectFirstInNav` 失效！
         */
        _this.navSelectedIds = "";
        /**
         * 导航帮助，选中第1条数据，默认为 false;
         * 注意：当`navSelectedIds`不为空时，此属性失效。
         */
        _this.selectFirstInNav = false;
        /**
         * 启用构造完整树过滤
         */
        _this.enableFullTree = true;
        /**
         * 显示文本自定义函数
         */
        _this.displayFormatter = undefined;
        /**
         * 显示文本字段集合，以 英文 逗号隔开
         */
        _this.displayFields = "";
        _this.displayTextSeparator = "_";
        /**
         * 帮助元数据ID，不为空时调用指定的URI
         * /api/runtime/bcc/v1.0/help/data/{helpId}
         */
        _this.helpId = "";
        /**
         * 文本对齐方式； left | center | right; 默认 left
         */
        _this.textAlign = "left";
        /**
         * 鼠标滑过输入框时显示输入框内的文本信息
         */
        _this.enableTitle = true;
        _this.useExtendInfo = false;
        _this.extInfoFields = "";
        _this.extendInfo = "";
        /**
         * IDE 设计器自定义格式化 2103
         */
        _this.customFormatter = null;
        _this.customNavFormatter = null;
        /**
         * 自定义确定事件
         */
        _this.okHandler = null;
        /**
         * 自定义取消事件
         */
        _this.cancelHandler = null;
        _this.tagboxHeight = "auto";
        /**
         * 启用获取所有子级数据的功能
         */
        _this.enableGetAllChildNodes = true;
        _this.shortcutKey = {
            /**
             * 打开帮助窗口
             */
            open: "ArrowRight",
            /**
             * 确认选择数据
             */
            confirm: "Enter",
            /**
             * 搜索框焦点
             */
            searchFocus: "F3",
            /**
             * 选中上一条
             */
            moveUp: "ArrowUp",
            /**
             * 选中下一条
             */
            moveDown: "ArrowDown",
            /**
             * 展开节点
             */
            expand: "ArrowRight",
            /**
             * 折叠节点
             */
            collapse: "ArrowLeft",
            /**
             * 下一页
             */
            nextPager: "PageDown",
            /**
             * 上一页
             */
            prevPager: "PageUp",
        };
        /**
         * 快捷选择相关配置项，默认为 null, 即不启用此功能
         */
        _this.quickSelect = null;
        _this.selectedData = new EventEmitter();
        _this.clear = new EventEmitter();
        _this.search = new EventEmitter();
        // 帮助文本框中值变化事件
        _this.valueChanged = new EventEmitter();
        _this.loadSuccess = new EventEmitter();
        _this.pagerChanged = new EventEmitter();
        _this.expandTreeNode = new EventEmitter();
        _this.textChanged = new EventEmitter();
        _this.checkedChange = new EventEmitter();
        _this.tagRemoved = new EventEmitter();
        /**
         * 内容中留白边距
         */
        _this.containerMargin = { top: 0, bottom: 5, left: 10, right: 10 };
        _this.containerStyle = {
            marginLeft: _this.containerMargin.left + "px",
            marginRight: _this.containerMargin.right + "px",
            marginTop: _this.containerMargin.top + "px",
            marginBottom: _this.containerMargin.bottom + "px",
        };
        _this._gridOptions = lookupGridDefaults;
        // 导航帮助左则宽度
        _this.leftPanelWidth = 320;
        // 导航帮助窗口最小宽度
        _this.navLookupDialogMinWidth = 960;
        _this.navigationFilter = null;
        _this.subscriptions = [];
        _this.isTextChange = false;
        _this.isTabChanged = false;
        _this.displayInfo = Object.assign({}, displayInfoDefault);
        _this.tabChangeSubscription = null;
        // 暂存行点击数据  用于收藏
        _this.personalConf = {};
        _this.favoriteColumns = [];
        /**
         * 临时查询参数
         */
        _this._searchState = null;
        _this.allData = [];
        _this.allColumnsTitle = "所有列";
        _this.mustWriteSomething = "请输入关键字后查询。";
        _this.mustChoosAdatarow = "请选择一条记录！";
        _this.addFavoriteSuccess = "收藏成功。";
        _this.delFavoriteSuccess = "移除收藏成功。";
        _this.searching = false;
        /**
         * 临时存储查询结果集
         */
        _this._searchResult = null;
        _this.lookupinitializationSubject = new Subject();
        /**
         * 多选时，选中的数据
         */
        _this.currentSelectedItems = of([]);
        /**
         * 已选数据列信息
         */
        _this.selectedColumns = [];
        _this.activeTab = "datalist";
        _this.favHelper = null;
        _this.ttEventMgr = null;
        _this.multiSelMgr = null;
        _this.httpMgr = null;
        _this.lookupCmpMgr = null;
        _this.dialogMgr = null;
        _this.selectionMgr = null;
        _this.dtEventMgr = null;
        _this.lookupSelectionSer = null;
        _this.controlId = "";
        _this.savingFaoriteData = false;
        _this.isReady = false;
        _this.showTagboxClearButton = false;
        _this.hasError = false;
        _this.isGetAllChidlNodes = false;
        /**
         * 选中记录ID，自定义帮助取数时使用
         */
        _this.selectedIds = [];
        _this.lookupSearchInputEvent = null;
        _this.farrisInstances = null;
        /**
         * 用户初始设置
         */
        _this._userSettings = {};
        _this._treeInfo_ = null;
        /**
         * dialog 内容区域高度。 弹窗总高度 - 头部高度 - 脚部高度 - （启用收藏 TAB头高度）
         */
        _this.dialogContentHeight = 0;
        _this.debugSer = null;
        _this.createInstance();
        _this.currentSelectedItems = _this.lookupSelectionSer.selected$;
        _this.eventManager = _this.injector.get(EventManager);
        _this.farrisInstances = _this.injector.get(FarrisComponentInstanceService, null);
        _this.overLayService = new OverLayHiddenService();
        _this.debugSer = _this.injector.get(DebugService, null);
        if (_this.debugSer) {
            _this.debugSer.useDebugMode();
        }
        return _this;
    }
    Object.defineProperty(LookupGridComponent.prototype, "displayType", {
        get: /**
         * @return {?}
         */
        function () {
            return this._displayType;
        },
        set: /**
         * @param {?} val
         * @return {?}
         */
        function (val) {
            if (val) {
                /** @type {?} */
                var types = Object.values(LookupGridDisplayType);
                /** @type {?} */
                var i = types.findIndex((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) { return n === val.toUpperCase(); }));
                if (i > -1) {
                    /** @type {?} */
                    var keys = Object.keys(LookupGridDisplayType);
                    this._displayType = LookupGridDisplayType[keys[i]];
                }
            }
            else {
                this._displayType = val;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LookupGridComponent.prototype, "gridOptions", {
        get: /**
         * @return {?}
         */
        function () {
            if (this.useFavorite &&
                this.columns &&
                this.columns.length > 0 &&
                !this.columns.find((/**
                 * @param {?} item
                 * @return {?}
                 */
                function (item) { return item.field === FAVORITE_FIELD_NAME; }))) {
                this.columns.push({
                    field: FAVORITE_FIELD_NAME,
                    title: "",
                    width: 40,
                    align: "center",
                    fixed: 'right',
                    // fixedWidth: true,
                    formatter: this.favHelper.favoriteColumnFormatter,
                });
            }
            this._gridOptions = Object.assign(this._gridOptions, {
                singleSelect: this.singleSelect,
                idField: this.idField,
                uri: this.uri,
                showFilterBar: this.showFilterBar,
                pagination: this.pagination,
                pageIndex: this.pageIndex,
                pageSize: this.pageSize,
                pageList: this.pageList,
                total: this.total,
                items: this.items,
                columns: this.columns,
                resizableColumns: true,
                fixedHeader: true,
                hover: true,
                treeInfo: this.treeInfo,
            });
            return this._gridOptions;
        },
        set: /**
         * @param {?} opts
         * @return {?}
         */
        function (opts) {
            this._gridOptions = Object.assign({}, this._gridOptions, opts);
            this.selectedColumns = this.multiSelMgr.initSelectedColumns();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LookupGridComponent.prototype, "selections", {
        get: /**
         * @return {?}
         */
        function () {
            /** @type {?} */
            var selectItems = this.lookupSelectionSer.getSelections();
            if (this.singleSelect) {
                return selectItems[0];
            }
            else {
                return selectItems;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LookupGridComponent.prototype, "usePersionalConf", {
        get: /**
         * @return {?}
         */
        function () {
            return this.useFavorite || this.useTip || this.isRecordSize;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LookupGridComponent.prototype, "displayTextList", {
        get: /**
         * @return {?}
         */
        function () {
            if (this.displayText) {
                return this.displayText.split(this.multipleChoiceSeparator);
            }
            return [];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LookupGridComponent.prototype, "userInitialConfig", {
        get: /**
         * @return {?}
         */
        function () {
            return this._userSettings;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} msg
     * @param {?=} type
     * @return {?}
     */
    LookupGridComponent.prototype.writeConsole = /**
     * @param {?} msg
     * @param {?=} type
     * @return {?}
     */
    function (msg, type) {
        if (type === void 0) { type = 'warn'; }
        if (this.debugSer) {
            this.debugSer[type](msg);
        }
    };
    /**
     * @private
     * @return {?}
     */
    LookupGridComponent.prototype.cacheUserConfig = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        this._userSettings._title = this.title;
        this.displayInfo.title = this.title;
        this._userSettings._columns = this.deepClone(this.columns || []);
        this._userSettings.getColumns = (/**
         * @return {?}
         */
        function () {
            return _this._userSettings._columns;
        });
        this._userSettings.reset = (/**
         * @return {?}
         */
        function () {
            _this.title = _this._userSettings._title;
            _this.displayInfo.title = _this.title;
            _this.columns = _this._userSettings.getColumns();
        });
    };
    /**
     * @private
     * @param {?} obj
     * @return {?}
     */
    LookupGridComponent.prototype.deepClone = /**
     * @private
     * @param {?} obj
     * @return {?}
     */
    function (obj) {
        var _this = this;
        if (obj === null) {
            return null;
        }
        /** @type {?} */
        var clone = Object.assign({}, obj);
        Object.keys(clone).forEach((/**
         * @param {?} key
         * @return {?}
         */
        function (key) {
            return (clone[key] =
                typeof obj[key] === "object"
                    ? _this.deepClone(obj[key])
                    : obj[key]);
        }));
        if (Array.isArray(obj)) {
            clone.length = obj.length;
            return Array.from(clone);
        }
        return clone;
    };
    /**
     * @return {?}
     */
    LookupGridComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        _super.prototype.ngOnInit.call(this);
        this.cacheUserConfig();
        if (!this.loadTreeDataType) {
            this.loadTreeDataType = "default";
        }
        this.checkGridOptions();
        this.displayInfo.title = this.title;
        /** 传递上下文 */
        if (this.http) {
            this.http.context = this.context;
        }
        this.allColumnsTitle = this.localService.getValue("lookup.allColumns");
        this.mustWriteSomething = this.localService.getValue("lookup.mustWriteSomething");
        this.mustChoosAdatarow = this.localService.getValue("lookup.mustChoosAdatarow");
        this.addFavoriteSuccess =
            this.localService.getValue("lookup.favoriteInfo.addFav") ||
                this.addFavoriteSuccess;
        this.delFavoriteSuccess =
            this.localService.getValue("lookup.favoriteInfo.cancelFav") ||
                this.delFavoriteSuccess;
        this.dialogMgr.onDialogCreated();
        this._treeInfo_ = this.treeInfo ? cloneDeep(this.treeInfo) : null;
        if (this.quickSelect) {
            this.quickSelect = Object.assign(QuickSelectDefaultOptions, this.quickSelect || {});
        }
    };
    /**
     * @return {?}
     */
    LookupGridComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        _super.prototype.ngOnDestroy.call(this);
        this.subscriptions.forEach((/**
         * @param {?} n
         * @return {?}
         */
        function (n) {
            if (n) {
                n.unsubscribe();
                n = null;
            }
        }));
        if (this.selectionMgr) {
            this.selectionMgr.destroy();
        }
        this.subscriptions = [];
        if (this.farrisInstances) {
            this.farrisInstances.destroy(this.el.nativeElement);
        }
        if (this.lookupSearchInputEvent) {
            this.lookupSearchInputEvent();
        }
        this.lookupUtils.destroy();
        this.overLayService.destory(this.el.nativeElement);
        this.overLayService = null;
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    LookupGridComponent.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        if (changes.columns && !changes.columns.isFirstChange()) {
            this.cacheUserConfig();
        }
    };
    /**
     * @return {?}
     */
    LookupGridComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        this.lookupSearchInputEvent = onTextChanged.bind(this)();
        // 初始化个性化配置
        if (this.usePersionalConf) {
            this.favHelper.initPersonalInfo();
        }
        if (this.useExtendInfo) {
            /** @type {?} */
            var jsonData = this.selectionMgr.getBindingData();
            this.updateExtendInfo(jsonData, false);
        }
        if (this.viewType === "text") {
            // this.shortcuts.add({
            //     key: 'F2',
            //     target: this.inputGroup.textbox.nativeElement,
            //     command: () => {
            //         this.showDialog();
            //     }
            // });
            this.render2.listen(this.inputGroup.textbox.nativeElement, "keydown.F2", this.showDialog.bind(this));
        }
        else {
            this.registerMouseEventForTagView();
            if (this.tagboxHeight) {
                /** @type {?} */
                var el = this.tagbox.nativeElement.querySelector(".multi-more");
                /** @type {?} */
                var tbh = this.tagboxHeight;
                if (tbh !== "auto") {
                    tbh += "px";
                    if (this.maxTagboxHeight) {
                        this.render2.setStyle(el, "maxHeight", this.maxTagboxHeight + "px");
                    }
                }
                this.render2.setStyle(el, "height", tbh);
            }
        }
        if (this.el && this.farrisInstances) {
            this.farrisInstances.add(this.el.nativeElement, this);
        }
    };
    /**
     * @private
     * @return {?}
     */
    LookupGridComponent.prototype.createInstance = /**
     * @private
     * @return {?}
     */
    function () {
        this.http = this.injector.get(ServerSideToken, null);
        this.messagerService = this.injector.get(MessagerService);
        this.loadingService = this.injector.get(LoadingService);
        this.notifyService = this.injector.get(NotifyService, null);
        this.personalConfigService = this.injector.get(PersonalConfigService, null);
        this.lookupSelectionSer = new LookupSelectionService(this);
        this.utilService = new UtilService(this);
        this.localService = this.injector.get(LocaleService);
        this.treeNodeHelper = new TreeNodeHelper(this);
        this.favHelper = new FavoriteHelper(this);
        this.ttEventMgr = new TreeTableEventManager(this);
        this.multiSelMgr = new MultiSelectionManager(this);
        this.httpMgr = new LookupHttpManager(this);
        this.lookupCmpMgr = new LookupComponentManager(this);
        this.dialogMgr = new LookupDialogManager(this);
        this.selectionMgr = new SelectionManager(this);
        this.dtEventMgr = new DataTableEventManager(this);
    };
    /**
     * @return {?}
     */
    LookupGridComponent.prototype.showDialog = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.disabled || this.readonly) {
            return false;
        }
        this.selectionMgr.initDisplayValue();
        this.dictPickingSubscription = this.dictPicking({
            instance: this,
        }).subscribe((/**
         * @param {?} pr
         * @return {?}
         */
        function (pr) {
            _this.dialogMgr.canOpenDialog(pr);
        }));
        return false;
    };
    /** 判断是否为双列表帮助 */
    /**
     * 判断是否为双列表帮助
     * @return {?}
     */
    LookupGridComponent.prototype.isDoublleList = /**
     * 判断是否为双列表帮助
     * @return {?}
     */
    function () {
        return (this.displayType === LookupGridDisplayType.NavList ||
            this.displayType === LookupGridDisplayType.NavTreeList);
    };
    /** 判断是否显示为树帮助 */
    /**
     * 判断是否显示为树帮助
     * @return {?}
     */
    LookupGridComponent.prototype.isTree = /**
     * 判断是否显示为树帮助
     * @return {?}
     */
    function () {
        return (this.displayType.toUpperCase() === LookupGridDisplayType.TreeList);
    };
    /**
     * @param {?} e
     * @return {?}
     */
    LookupGridComponent.prototype.onResized = /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        this.resizeCmp(e.size);
        this.resized.emit(e.size);
    };
    /**
     * @param {?} pos
     * @return {?}
     */
    LookupGridComponent.prototype.onResizing = /**
     * @param {?} pos
     * @return {?}
     */
    function (pos) {
        this.resizing.emit(pos.size);
        this.resizeCmp(pos.size);
        if (this.isDoublleList() && this.leftComponentRef) {
            this.leftComponentRef.instance.resize({
                width: this.leftPanel.width,
                height: this.dialogMgr.getHeight(),
            });
        }
    };
    /**
     * @param {?} pos
     * @return {?}
     */
    LookupGridComponent.prototype.onMaxDialog = /**
     * @param {?} pos
     * @return {?}
     */
    function (pos) {
        this.resizeCmp(pos.size);
        if (this.leftPanel) {
            this.leftComponentRef.instance.resize({
                width: this.leftPanel.width,
                height: this.dialogMgr.getHeight(),
            });
        }
        this.dialogHeight = pos.size.height;
        this.dialogContentHeight = this.dialogMgr.resetDialogContentHeight();
        this.dialogMaxed.emit(pos.size);
    };
    /**
     * @param {?=} size
     * @return {?}
     */
    LookupGridComponent.prototype.resizeCmp = /**
     * @param {?=} size
     * @return {?}
     */
    function (size) {
        if (!this.componentRef || !this.componentRef.instance) {
            return;
        }
        if (!size) {
            size = this.dialog.size;
        }
        /** @type {?} */
        var _size = {
            width: size.width -
                this.containerMargin.left -
                this.containerMargin.right,
            height: this.dialogMgr.getHeight(),
        };
        if (this.useFavorite && this.favoritesComponentRef) {
            this.favoritesComponentRef.instance.resize(_size);
        }
        if (this.isRecordSize) {
            this.personalConf.size = this.dialog.size;
            this.personalConfigService.updatePersonalConfig({
                size: this.dialog.size,
            });
        }
        if (this.isDoublleList()) {
            _size.width = size.width - this.leftPanel.width - 27;
        }
        this.componentRef.instance.resize(_size);
    };
    /**
     * @private
     * @return {?}
     */
    LookupGridComponent.prototype.checkGridOptions = /**
     * @private
     * @return {?}
     */
    function () {
        if (!this.gridOptions.idField) {
            this.writeConsole("未设置主键字段 idField");
        }
        if (!this.beforeSelectData) {
            this.beforeSelectData = (/**
             * @return {?}
             */
            function () {
                return of(true);
            });
        }
        /** @type {?} */
        var ctxMenuLanguages = this.localService.getValue("lookup.contextMenu");
        this.treeTableOptions = Object.assign({ language: ctxMenuLanguages }, this.defaultTreeTableOptions, this.treeTableOptions || {});
        // this.dataTableOptions = Object.assign({}, this.defaultTreeTableOptions, this.dataTableOptions);
        // this.navTreeTableOptions = Object.assign({}, this.defaultTreeTableOptions, this.navTreeTableOptions);
    };
    /**
     * @return {?}
     */
    LookupGridComponent.prototype.getComponentType = /**
     * @return {?}
     */
    function () {
        if (!this.displayType) {
            this.displayType = "LIST";
        }
        switch (this.displayType) {
            case LookupGridDisplayType.List:
            case LookupGridDisplayType.NavList:
            case LookupGridDisplayType.NavTreeList:
                return DataTableComponent;
            case LookupGridDisplayType.TreeList:
                return TreeTableComponent;
        }
    };
    /**
     * @param {?=} msg
     * @return {?}
     */
    LookupGridComponent.prototype.showLoading = /**
     * @param {?=} msg
     * @return {?}
     */
    function (msg) {
        if (msg === void 0) { msg = ""; }
        if (this.dialog && this.dialog.modalContent && !this.loading) {
            /** @type {?} */
            var opts = {
                container: this.dialog.modalContent,
                delay: 200,
            };
            if (msg) {
                opts["message"] = msg;
            }
            this.loading = this.loadingService.show(opts);
        }
        else {
            this.loading = this.loadingService.show();
        }
    };
    /**
     * @return {?}
     */
    LookupGridComponent.prototype.closeLoading = /**
     * @return {?}
     */
    function () {
        if (this.loading) {
            this.loading.close();
            this.loading = null;
        }
        this.loadingService.clearAll();
    };
    /**
     * @param {?} resdata
     * @return {?}
     */
    LookupGridComponent.prototype.getSearchColumns = /**
     * @param {?} resdata
     * @return {?}
     */
    function (resdata) {
        /** @type {?} */
        var cols = resdata.columns || this.columns;
        if (resdata.searchFields) {
            return resdata.searchFields.map((/**
             * @param {?} sf
             * @return {?}
             */
            function (sf) {
                /** @type {?} */
                var c = cols.find((/**
                 * @param {?} col
                 * @return {?}
                 */
                function (col) { return col.field.toLowerCase() === sf.value.toLowerCase(); }));
                if (c) {
                    sf.label = c.title;
                }
                return sf;
            }));
        }
        else if (cols) {
            return cols
                .filter((/**
             * @param {?} c
             * @return {?}
             */
            function (c) { return c.searchField; }))
                .map((/**
             * @param {?} col
             * @return {?}
             */
            function (col) {
                return {
                    label: col.title,
                    value: col.field,
                };
            }));
        }
        return [];
    };
    /**
     * @private
     * @param {?} resData
     * @return {?}
     */
    LookupGridComponent.prototype.initOptions = /**
     * @private
     * @param {?} resData
     * @return {?}
     */
    function (resData) {
        var _this = this;
        /** @type {?} */
        var obser = of(true);
        this.gridOptions.searchFields = this.getSearchColumns(resData);
        if (resData) {
            // 如果组件中未设置显示列，则使用服务器端返回的设置； 否则将使用组件中配置的展示列
            if ((!this.columns || !this.columns.length) &&
                resData.columns &&
                resData.columns.length) {
                this.columns = resData.columns;
            }
            this.setLookupTitleText(resData);
            if (this.isDoublleList() &&
                this.dialogWidth < this.navLookupDialogMinWidth &&
                !this.isRecordSize) {
                this.dialogWidth = this.navLookupDialogMinWidth;
                this.dialog.reSize({ width: this.dialogWidth });
            }
            if (!this.customDisplayType) {
                this.displayType =
                    resData.displayType || this.displayType || "LIST";
                this.changeDetector.detectChanges();
                this.lookupCmpMgr.createComponentWithServerData(resData);
            }
            if (this.isDoublleList() &&
                resData.navigation &&
                !this.leftComponentRef) {
                this.navigationOptions = resData.navigation;
                this.navigationOptions.hover = true;
                this.navigationOptions.searchFields = this.getSearchColumns(this.navigationOptions);
                // update columns formatter
                if (this.customNavFormatter) {
                    this.navigationOptions.columns.forEach((/**
                     * @param {?} col
                     * @return {?}
                     */
                    function (col) {
                        if (_this.customNavFormatter[col.field]) {
                            col.formatter = _this.customNavFormatter[col.field];
                        }
                    }));
                    this.navigationOptions["rowStyler"] =
                        this.customNavFormatter.rowStyler;
                    this.navigationOptions["cellStyler"] =
                        this.customNavFormatter.cellStyler;
                }
                // 20210926 树导航帮助中 左侧树支持分层加载
                if (this.displayType === LookupGridDisplayType.NavTreeList) {
                    /** @type {?} */
                    var _nav_treeinfo_loadtype = this.navigationOptions.treeInfo.loadDataType;
                    if (this.loadTreeDataType !== "default") {
                        _nav_treeinfo_loadtype =
                            this.loadTreeDataType === "loadall"
                                ? "all"
                                : "async";
                    }
                    this.navigationOptions.treeInfo.loadDataType =
                        _nav_treeinfo_loadtype;
                }
                obser = this.lookupCmpMgr.createLeftComponent(this.navigationOptions);
            }
        }
        else {
            this.lookupCmpMgr.createContent(this.gridOptions);
            this.lookupCmpMgr.createFavoriteComponent();
        }
        if (this.isTextChange) {
            this.componentRef.instance.searchData.value = this.displayText;
        }
        // update columns formatter
        if (this.customFormatter) {
            this.columns.forEach((/**
             * @param {?} col
             * @return {?}
             */
            function (col) {
                if (_this.customFormatter[col.field]) {
                    col.formatter = _this.customFormatter[col.field];
                }
            }));
            if (this.customFormatter.rowStyler) {
                this.componentRef.instance.rowStyler =
                    this.customFormatter.rowStyler;
            }
            if (this.customFormatter.cellStyler) {
                this.componentRef.instance.cellStyler =
                    this.customFormatter.cellStyler;
            }
        }
        this.changeDetector.detectChanges();
        return obser;
    };
    /**
     * 设置帮助窗口标题
     */
    /**
     * 设置帮助窗口标题
     * @private
     * @param {?} resData
     * @return {?}
     */
    LookupGridComponent.prototype.setLookupTitleText = /**
     * 设置帮助窗口标题
     * @private
     * @param {?} resData
     * @return {?}
     */
    function (resData) {
        if (resData.displayInfo) {
            this.displayInfo = resData.displayInfo;
        }
        // 如果自定义标题，将以此标题为准。否则加载服务器端返回的数据
        if (this.title && this.title !== "此处显示帮助标题") {
            this.displayInfo.title = this.title;
        }
        if (this.displayInfo && resData.title) {
            if (!this.displayInfo.title) {
                this.displayInfo.title = resData.title;
            }
        }
    };
    /**
     * @private
     * @return {?}
     */
    LookupGridComponent.prototype.showGetAllChildrenCheckbox = /**
     * @private
     * @return {?}
     */
    function () {
        if (this.isTree() && this.treeInfo) {
            this.enableGetAllChildNodes =
                this.treeInfo.loadDataType !== "all" && this.treeInfo.layerType === "pathcode";
        }
        else {
            this.enableGetAllChildNodes = false;
        }
    };
    /**
     * @return {?}
     */
    LookupGridComponent.prototype.initData = /**
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var observer = {
            next: (/**
             * @param {?} data
             * @return {?}
             */
            function (data) {
                // 服务器端发生错误，返回NULL 时，直接关闭窗口
                if (data === null) {
                    _this.isShow = false;
                    if (_this.dialog) {
                        _this.dialog.close();
                    }
                    return;
                }
                _this.initOptions(data).subscribe((/**
                 * @return {?}
                 */
                function () {
                    _this.selectedColumns =
                        _this.multiSelMgr.initSelectedColumns();
                    _this.favoriteColumns = _this.favHelper.getFavoriteColumns();
                    if (_this.usePersionalConf) {
                        if (!_this.personalConfigService.getPersonalData()) {
                            _this.personalConfigService.savePersonalConfig(_this.personalConf);
                        }
                    }
                    if (!_this.isTabChanged) {
                        _this.lookupSelectionSer.loadSelections(data.selectedItems || []);
                    }
                    if (_this.isDoublleList()) {
                        // 导航帮助时，设置左侧选中数据时，不加载主数据列表。
                        if (_this.navSelectedIds || _this.selectFirstInNav) {
                            _this.loadDataWhenOpen = false;
                        }
                    }
                    if (data['activeTab'] && !_this.isTabChanged) {
                        _this.activeTab = 'datalist';
                    }
                    _this.loadData(data);
                    if (_this.isTree()) {
                        if (_this.activeTab === "datalist") {
                            /** @type {?} */
                            var tt = (/** @type {?} */ (_this.componentRef.instance));
                            if (tt.searchData.value && _this.items && _this.items.length) {
                                if (_this.items[0].children && _this.items[0].children.length) {
                                    tt.toggleExpand(_this.items[0], true, false);
                                }
                            }
                        }
                        _this.showGetAllChildrenCheckbox();
                    }
                    _this.isTextChange = false;
                    _this._searchResult = null; // 清空临时查询 结果
                    _this.closeLoading();
                    // this.isReady$.next(true);
                    _this.isReady = true;
                    _this.changeDetector.detectChanges();
                    _this.lookupinitializationSubject.next();
                }));
            }),
            error: (/**
             * @param {?} err
             * @return {?}
             */
            function (err) {
                // this.isReady$.next(true);
                _this.closeLoading();
                _this._searchResult = null; // 清空临时查询 结果
                _this.isTextChange = false;
                _this.hasError = true;
                _this.changeDetector.detectChanges();
                if (typeof err === "string") {
                    _this.messagerService.error(err);
                }
                else {
                    if (err) {
                        if (err.Message) {
                            _this.messagerService.error(err.Message);
                        }
                        else {
                            if (err.error) {
                                _this.messagerService.error(err.error.Message);
                            }
                            else {
                                _this.messagerService.error("应用服务器错误,请联系系统管理员！");
                            }
                        }
                    }
                }
            }),
        };
        /** @type {?} */
        var p = {
            pageInfo: {
                pageSize: this.pageSize || 20,
                pageIndex: 1,
            },
        };
        /** @type {?} */
        var t = "all";
        if (this.isTextChange) {
            this._searchState = {
                field: "*",
                value: this.displayText
            };
            p = {
                search: this._searchState
            };
            t = 'search';
        }
        if (!this.isTabChanged && this.enableToSelect) {
            /** @type {?} */
            var vals = this.selectionMgr.getSelectedIds();
            if (vals && vals.length) {
                p["selectedInfo"] = {
                    selected: true,
                    selectedIds: vals,
                };
            }
            else {
                if (this["selectedIds"]) {
                    p["selectedInfo"] = {
                        selected: true,
                        selectedIds: this["selectedIds"],
                    };
                }
            }
        }
        this.showLoading();
        this.hasError = false;
        this.httpMgr.lookupRequest(p, t).pipe(map((/**
         * @param {?} restData
         * @return {?}
         */
        function (restData) {
            if (restData) {
                restData.selectedItems = restData["selectedData"] || [];
            }
            else {
                if (restData && typeof restData === "object") {
                    restData.selectedItems = [];
                }
            }
            return restData === null ? false : restData;
        }))).subscribe(observer);
    };
    /**
     * @param {?=} resData
     * @param {?=} rebindEvent
     * @return {?}
     */
    LookupGridComponent.prototype.loadData = /**
     * @param {?=} resData
     * @param {?=} rebindEvent
     * @return {?}
     */
    function (resData, rebindEvent) {
        if (rebindEvent === void 0) { rebindEvent = true; }
        if (this.activeTab === "datalist") {
            if (this.useFavorite && !this.isTree()) {
                this.favHelper.updateFavoritesStatus(resData.items);
            }
            switch (this.displayType) {
                case LookupGridDisplayType.NavList:
                case LookupGridDisplayType.NavTreeList:
                case LookupGridDisplayType.List:
                    this.loadDataTableData(resData);
                    if (rebindEvent) {
                        this.dtEventMgr.bindDataTableEvent();
                    }
                    break;
                case LookupGridDisplayType.TreeList:
                    this.loadTreeTableData(resData, rebindEvent);
                    break;
            }
        }
        else if (this.activeTab === "favorite") {
            this.loadFavData(resData);
        }
        // 选中数据
        this.selectionMgr.selectCurrentValue();
    };
    /**
     * @private
     * @param {?} result
     * @return {?}
     */
    LookupGridComponent.prototype.loadFavData = /**
     * @private
     * @param {?} result
     * @return {?}
     */
    function (result) {
        var _this = this;
        // 加载收藏数据
        if (this.useFavorite) {
            if (this.isTree()) {
                this.setTreeInfo(result);
                /** @type {?} */
                var treeNodes = this.favHelper.initFavoriteTreeData(result.items);
                /** @type {?} */
                var treeData = this.treeNodeHelper
                    .flatTreeNodes(treeNodes)
                    .map((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) {
                    n.data["_addtional_"] = n["addtional"];
                    return n.data;
                }));
                this.lookupSelectionSer.initFavoriteItems(treeData);
                setTimeout((/**
                 * @return {?}
                 */
                function () {
                    _this.favoritesComponentRef.instance.scrollToY(1);
                }));
            }
            else {
                this.lookupSelectionSer.initFavoriteItems(result.items);
            }
            this.favHelper.loadFavoritesData(result);
        }
    };
    /**
     * @param {?=} resData
     * @return {?}
     */
    LookupGridComponent.prototype.loadDataTableData = /**
     * @param {?=} resData
     * @return {?}
     */
    function (resData) {
        if (resData) {
            if (this.gridOptions) {
                if (resData && resData.columns && resData.columns.length) {
                    if (!this.gridOptions.columns ||
                        !this.gridOptions.columns.length) {
                        this.columns = resData.columns;
                    }
                }
                this.items = resData.items;
                this.total = resData.total || resData.items.length;
                if (resData.searchFields) {
                    this.gridOptions.searchFields = this.getSearchColumns(resData);
                }
                if (resData.pageInfo) {
                    if (resData.pageInfo.pageList &&
                        (!this.pageList || !this.pageList.length)) {
                        this.pageList = resData.pageInfo.pageList;
                    }
                    this.pagination = resData.pageInfo.enablePager;
                    this.pageIndex = resData.pageInfo.pageIndex;
                    this.pageSize = resData.pageInfo.pageSize;
                }
                else {
                    this.pagination = false;
                }
            }
            else {
                this.gridOptions = (/** @type {?} */ (resData));
            }
        }
        this.updateDataTable(this.gridOptions);
    };
    /**
     * @private
     * @param {?} opts
     * @return {?}
     */
    LookupGridComponent.prototype.updateDataTable = /**
     * @private
     * @param {?} opts
     * @return {?}
     */
    function (opts) {
        if (opts) {
            /** @type {?} */
            var dt = (/** @type {?} */ (this.componentRef.instance));
            if (!dt.columns || dt.columns.length === 0) {
                dt.columns = this.gridOptions.columns;
            }
            dt.allColumnsTitle = this.allColumnsTitle;
            dt.searchFields = opts.searchFields;
            dt.pagination = opts.pagination;
            dt.pageList = this.pageList;
            dt.remoteSort = this.remoteSort;
            if (this.loadDataWhenOpen) {
                dt.loadData({
                    pageSize: opts.pageSize,
                    pageIndex: this.gridOptions.pageIndex,
                    total: this.gridOptions.total,
                    data: this.gridOptions.items,
                });
                dt.cd.markForCheck();
            }
            this.loadSuccess.emit();
        }
    };
    /**
     * @private
     * @param {?} resData
     * @return {?}
     */
    LookupGridComponent.prototype.setTreeInfo = /**
     * @private
     * @param {?} resData
     * @return {?}
     */
    function (resData) {
        if (!resData) {
            return;
        }
        /** @type {?} */
        var _treeInfo = null;
        if (resData.treeInfo) {
            /** @type {?} */
            var onlySelectLeaf = resData.treeInfo.onlySelectLeaf;
            /** @type {?} */
            var _osl = "no";
            if (onlySelectLeaf !== undefined) {
                _osl = onlySelectLeaf ? "yes" : "no";
            }
            _treeInfo = tslib_1.__assign({}, resData.treeInfo, { onlySelectLeaf: _osl });
        }
        if (this.gridOptions.treeInfo) {
            /** @type {?} */
            var treeInfo = this.gridOptions.treeInfo;
            if (treeInfo) {
                if (treeInfo.onlySelectLeaf === undefined ||
                    treeInfo.onlySelectLeaf === null) {
                    treeInfo.onlySelectLeaf = "no";
                }
                if (typeof treeInfo.onlySelectLeaf === "boolean") {
                    treeInfo.onlySelectLeaf = treeInfo.onlySelectLeaf ? "yes" : "no";
                }
                // 20210902
                if (this.loadTreeDataType === "default") {
                    treeInfo.loadDataType = _treeInfo.loadDataType;
                }
                else {
                    treeInfo.loadDataType =
                        this.loadTreeDataType === "loadall" ? "all" : "async";
                }
                if (treeInfo.onlySelectLeaf !== "default") {
                    _treeInfo = Object.assign(_treeInfo, treeInfo);
                }
            }
        }
        this.treeInfo = _treeInfo;
    };
    /**
     * @private
     * @param {?=} resData
     * @param {?=} rebindEvent
     * @return {?}
     */
    LookupGridComponent.prototype.loadTreeTableData = /**
     * @private
     * @param {?=} resData
     * @param {?=} rebindEvent
     * @return {?}
     */
    function (resData, rebindEvent) {
        var _this = this;
        if (rebindEvent === void 0) { rebindEvent = true; }
        /** @type {?} */
        var items = resData ? resData.items : this.gridOptions.items;
        this.items = items;
        if (resData) {
            this.setTreeInfo(resData);
            /** @type {?} */
            var treeInfo = this.gridOptions.treeInfo;
            if (!treeInfo["treeDataIsInit"]) {
                if (treeInfo.layerType.toLowerCase() === "pathcode") {
                    this.items = this.lookupUtils.makeTree(this.items, treeInfo);
                }
                else {
                    this.items = this.lookupUtils.makeTreeWithParentID(this.items, "", treeInfo.dataField + "." + treeInfo.parentField, this.idField);
                }
            }
        }
        if (this.componentRef.instance instanceof TreeTableComponent) {
            /** @type {?} */
            var tt_1 = (/** @type {?} */ (this.componentRef.instance));
            if (this.treeInfo) {
                tt_1.loadDataType = this.treeInfo.loadDataType;
            }
            if (!this.columns || !this.columns.length) {
                tt_1.columns = resData.columns || [];
                this.gridOptions.columns = tt_1.columns;
            }
            /** @type {?} */
            var isLoadAllTreeData = (/**
             * @return {?}
             */
            function () {
                if (_this.loadTreeDataType === "default") {
                    return tt_1.loadDataType === "all";
                }
                else {
                    return _this.loadTreeDataType === "loadall";
                }
            });
            if (rebindEvent) {
                this.ttEventMgr.bindTreetableEvent();
            }
            /** @type {?} */
            var isLoadAll = isLoadAllTreeData();
            /** 完整树节点检查 By Lucas 20200302 */
            this.items = this.checkNodeCanBeSelect(this.items, isLoadAll);
            tt_1.keepSelect = true;
            if (this.useFavorite) {
                this.favHelper.updateFavoritesStatus(this.items);
            }
            if (this.loadDataWhenOpen) {
                tt_1.loadData(this.items);
            }
            tt_1.resize();
        }
    };
    /**
     * 在构完整树中，有部分节点因为条件被过滤，为显示完整树，
     * 这些节点在运行时是不允许被选中的, 返回新的节点数组
     * By Lucas 20200302
     */
    /**
     * 在构完整树中，有部分节点因为条件被过滤，为显示完整树，
     * 这些节点在运行时是不允许被选中的, 返回新的节点数组
     * By Lucas 20200302
     * @param {?} nodes
     * @param {?=} isAllTreeData
     * @return {?}
     */
    LookupGridComponent.prototype.checkNodeCanBeSelect = /**
     * 在构完整树中，有部分节点因为条件被过滤，为显示完整树，
     * 这些节点在运行时是不允许被选中的, 返回新的节点数组
     * By Lucas 20200302
     * @param {?} nodes
     * @param {?=} isAllTreeData
     * @return {?}
     */
    function (nodes, isAllTreeData) {
        var _this = this;
        if (isAllTreeData === void 0) { isAllTreeData = false; }
        if (nodes && nodes.length) {
            return nodes.map((/**
             * @param {?} node
             * @return {?}
             */
            function (node) {
                if (node.hasOwnProperty("addtional")) {
                    node.selectable = !node["addtional"];
                }
                if (node.children && node.children.length) {
                    _this.checkNodeCanBeSelect(node.children, isAllTreeData);
                }
                else {
                    if (isAllTreeData && (!_this._searchState || !_this._searchState.value)) {
                        node.leaf = true;
                    }
                }
                return node;
            }));
        }
        return nodes;
    };
    /**
     * @param {?} val
     * @return {?}
     */
    LookupGridComponent.prototype.onChanges = /**
     * @param {?} val
     * @return {?}
     */
    function (val) {
        if (!val) {
            this.onClear();
        }
        else {
            this.displayText = val;
            this.isTextChange = this.originalText !== this.displayText;
            if (this.nosearch) {
                this.setModelValue(val);
                this.clearMappings.emit({ instance: this, value: val, });
            }
            this.onModelTouched(val);
            this.valueChanged.emit(val);
            this.textChanged.emit(val);
        }
    };
    /**
     * @param {?=} emit
     * @return {?}
     */
    LookupGridComponent.prototype.onClear = /**
     * @param {?=} emit
     * @return {?}
     */
    function (emit) {
        if (emit === void 0) { emit = true; }
        this.isTextChange = false;
        this.displayText = "";
        this.displayValue = "";
        this.originalText = "";
        this.extendInfo = "";
        this.setModelValue("");
        if (this.mappingFn) {
            this.mappingFn(null, this.mapFields);
        }
        else {
            if (this.mapFields) {
                /** @type {?} */
                var bindingData = this.selectionMgr.getBindingData();
                if (bindingData) {
                    this.defaultMapping.lookupFieldMap(null, this.mapFields, bindingData);
                }
            }
        }
        this.multiSelMgr.clear();
        if (emit) {
            this.clear.emit();
        }
    };
    /**
     * @param {?=} emit
     * @return {?}
     */
    LookupGridComponent.prototype.clearValue = /**
     * @param {?=} emit
     * @return {?}
     */
    function (emit) {
        if (emit === void 0) { emit = true; }
        this.onClear(emit);
    };
    /**
     * @param {?=} rowData
     * @return {?}
     */
    LookupGridComponent.prototype.selectItem = /**
     * @param {?=} rowData
     * @return {?}
     */
    function (rowData) {
        var _this = this;
        /** @type {?} */
        var selectedRow = null;
        if (rowData) {
            selectedRow = rowData;
        }
        else {
            selectedRow = this.selections;
            if (!selectedRow) {
                selectedRow = null;
            }
            else {
                if (Array.isArray(selectedRow) && !selectedRow.length) {
                    selectedRow = null;
                }
            }
        }
        // 如果定义自定义处理确定事件，则由自定义事件处理后面的逻辑
        if (this.okHandler) {
            this.okHandler({ data: selectedRow, instance: this });
        }
        else {
            if (this.beforeSelectData) {
                /** @type {?} */
                var bsdResult = this.beforeSelectData({
                    instance: this,
                    data: selectedRow,
                });
                if (bsdResult && bsdResult.subscribe) {
                    bsdResult.subscribe((/**
                     * @param {?} e
                     * @return {?}
                     */
                    function (e) {
                        _this._beforeSelectDataCallBack(e, selectedRow);
                    }));
                }
                else {
                    this.writeConsole('帮助数据选中前事件未返回值或返回类型非Observable, 请检查', 'error');
                }
            }
            else {
                this._beforeSelectDataCallBack(true, selectedRow);
            }
        }
    };
    /**
     * @private
     * @param {?} rows
     * @return {?}
     */
    LookupGridComponent.prototype.getParentPathCode = /**
     * @private
     * @param {?} rows
     * @return {?}
     */
    function (rows) {
        /** @type {?} */
        var maxBy = (/**
         * @param {?} arr
         * @param {?} fn
         * @return {?}
         */
        function (arr, fn) {
            return Math.max.apply(Math, tslib_1.__spread(arr.map(typeof fn === "function" ? fn : (/**
             * @param {?} val
             * @return {?}
             */
            function (val) { return val[fn]; }))));
        });
        var _a = this.treeInfo, dataField = _a.dataField, pathField = _a.pathField, layerField = _a.layerField;
        /** @type {?} */
        var maxLayer = maxBy(rows, (/**
         * @param {?} x
         * @return {?}
         */
        function (x) { return x[dataField][layerField]; }));
        var _loop_1 = function (i) {
            /** @type {?} */
            var _rows = rows.filter((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return n[dataField][layerField] === i; }));
            if (_rows && _rows.length && _rows.length < rows.length) {
                _rows.forEach((/**
                 * @param {?} r
                 * @return {?}
                 */
                function (r) {
                    /** @type {?} */
                    var patchCode = r[dataField][pathField];
                    /** @type {?} */
                    var _rows2 = rows.filter((/**
                     * @param {?} n
                     * @return {?}
                     */
                    function (n) {
                        return n[dataField][pathField] !== patchCode &&
                            n[dataField][pathField].indexOf(patchCode) === 0;
                    }));
                    if (_rows2 && _rows2.length) {
                        rows = rows.filter((/**
                         * @param {?} n
                         * @return {?}
                         */
                        function (n) { return n[dataField][pathField] !== patchCode; }));
                    }
                }));
            }
        };
        for (var i = 1; i <= maxLayer; i++) {
            _loop_1(i);
        }
        return rows;
    };
    /**
     * @private
     * @param {?} e
     * @param {?} selectedRow
     * @return {?}
     */
    LookupGridComponent.prototype._beforeSelectDataCallBack = /**
     * @private
     * @param {?} e
     * @param {?} selectedRow
     * @return {?}
     */
    function (e, selectedRow) {
        var _this = this;
        /** @type {?} */
        var canSelect = e;
        /** @type {?} */
        var message = "";
        if (typeof e === "boolean") {
            canSelect = e;
        }
        else {
            if (typeof e === "object") {
                canSelect = e.canSelect;
                message = e.message;
            }
            else {
                canSelect = false;
            }
        }
        if (!selectedRow) {
            message = this.mustChoosAdatarow;
            canSelect = false;
        }
        if (canSelect) {
            /** @type {?} */
            var selectedRows$ = of(selectedRow);
            // 多选 树帮助 异步加载 分级码 开启同步选择 或包含下级
            if (!this.singleSelect && this.enableCascade && this.isTree()) {
                if (this.treeInfo.loadDataType !== "all" && this.treeInfo.layerType === "pathcode" && this.isGetAllChidlNodes) {
                    /** @type {?} */
                    var parentsIds = this.getParentPathCode(selectedRow);
                    if (parentsIds && parentsIds.length) {
                        parentsIds = parentsIds.map((/**
                         * @param {?} n
                         * @return {?}
                         */
                        function (n) {
                            return n[_this.treeInfo.dataField][_this.treeInfo.pathField];
                        }));
                        this.showLoading();
                        selectedRows$ = this.httpMgr
                            .getData({ parentsIds: parentsIds }, "allChildren")
                            .pipe(map((/**
                         * @param {?} r
                         * @return {?}
                         */
                        function (r) {
                            /** @type {?} */
                            var items = r.items
                                ? r.items.map((/**
                                 * @param {?} d
                                 * @return {?}
                                 */
                                function (d) { return d.data; }))
                                : [];
                            /** @type {?} */
                            var allitems = tslib_1.__spread(selectedRow, items);
                            /** @type {?} */
                            var ids = allitems.map((/**
                             * @param {?} n
                             * @return {?}
                             */
                            function (n) { return n[_this.idField]; }));
                            ids = Array.from(new Set(ids));
                            return ids.map((/**
                             * @param {?} n
                             * @return {?}
                             */
                            function (n) {
                                return allitems.find((/**
                                 * @param {?} a
                                 * @return {?}
                                 */
                                function (a) { return a[_this.idField] === n; }));
                            }));
                        })));
                    }
                }
            }
            selectedRows$.subscribe((/**
             * @param {?} rows
             * @return {?}
             */
            function (rows) {
                _this.closeLoading();
                _this.updateControlValue(rows);
                if (!_this.useTip || !rows) {
                    return;
                }
                if (_this.useTip) {
                    _this.personalConfigService.updateQueckSelected(rows, _this.localService.localeId);
                }
            }));
        }
        else {
            if (message) {
                if (this.notifyService) {
                    this.notifyService.warning(message);
                }
                else {
                    this.messagerService.warning(message, "", true, (/**
                     * @return {?}
                     */
                    function () {
                        _this.dialog.el.nativeElement.click();
                    }));
                }
            }
        }
    };
    /**
     * @private
     * @param {?} selectedRow
     * @return {?}
     */
    LookupGridComponent.prototype.updateControlValue = /**
     * @private
     * @param {?} selectedRow
     * @return {?}
     */
    function (selectedRow) {
        if (selectedRow) {
            this.setDisplayText(selectedRow);
            if (this.mappingFn) {
                this.mappingFn(selectedRow, this.mapFields, this.bindingData);
            }
            else {
                if (this.mapFields && this.bindingData) {
                    this.defaultMapping.lookupFieldMap(selectedRow, this.mapFields, this.bindingData);
                }
            }
            this.setModelValue(this.displayText);
            if (this["inDatagrid"] && selectedRow) {
                /** @type {?} */
                var selectItems = Array.isArray(selectedRow)
                    ? selectedRow
                    : [selectedRow];
                this.updateBindData(selectItems);
            }
            this.selectedData.emit(selectedRow);
            this.runDictPickedEvent(selectedRow);
            this.isTextChange = false;
        }
        else {
            if (document.activeElement) {
                ((/** @type {?} */ (document.activeElement))).blur();
            }
            this.messagerService.warning(this.mustChoosAdatarow);
        }
    };
    /**
     * @private
     * @param {?} selectedRow
     * @return {?}
     */
    LookupGridComponent.prototype.updateBindData = /**
     * @private
     * @param {?} selectedRow
     * @return {?}
     */
    function (selectedRow) {
        var _this = this;
        if (!this.mapFields) {
            return;
        }
        /** @type {?} */
        var helpFields = Object.keys(this.mapFields);
        if (this.ngControl &&
            this.ngControl.formDirective &&
            this.ngControl.formDirective.form &&
            this.ngControl.formDirective.form.bindingData) {
            /** @type {?} */
            var bindingData_1 = this.ngControl.formDirective.form.bindingData;
            if (bindingData_1) {
                helpFields.forEach((/**
                 * @param {?} helpField
                 * @return {?}
                 */
                function (helpField) {
                    _this.mapFields[helpField]
                        .split(",")
                        .forEach((/**
                     * @param {?} formField
                     * @return {?}
                     */
                    function (formField) {
                        /** @type {?} */
                        var val = selectedRow
                            .map((/**
                         * @param {?} r
                         * @return {?}
                         */
                        function (r) {
                            return _this.utils.getValue(helpField, r);
                        }))
                            .join(_this.multipleChoiceSeparator);
                        _this.utils.setValue(bindingData_1, formField, val);
                    }));
                }));
            }
            // if (bindingData.setValue) {
            //     const bindingPath = this.ngControl.formDirective.form.bindingPath;
            //     let pathArr: string[] = [];
            //     if (bindingPath) {
            //         pathArr = bindingPath.split('/').filter(n => n !== '');
            //     }
            //     helpFields.forEach((helpField: any) => {
            //         this.mapFields[helpField].split(',').forEach((formField: any) => {
            //             const fieldPaths = pathArr.concat(formField.split('.'));
            //             const val = selectedRow.map(r => {
            //                 return this.utils.getValue(formField, r);
            //             }).join(this.multipleChoiceSeparator);
            //             bindingData.setValue(pathArr.concat(fieldPaths), val, true, true);
            //         });
            //     });
            // }
        }
        else {
            // if (this.bindingData) {
            //     helpFields.forEach((helpField: any) => {
            //         this.mapFields[helpField].split(',').forEach((formField: any) => {
            //             const val = selectedRow.map(r => {
            //                 return this.utils.getValue(formField, r);
            //             }).join(this.multipleChoiceSeparator);
            //             this.utils.setValue(this.bindingData, formField, val);
            //         });
            //     });
            // }
        }
    };
    /**
     * @private
     * @param {?=} isHelpData
     * @return {?}
     */
    LookupGridComponent.prototype.getExtendInfoFields = /**
     * @private
     * @param {?=} isHelpData
     * @return {?}
     */
    function (isHelpData) {
        var _this = this;
        if (isHelpData === void 0) { isHelpData = true; }
        if (!this.extInfoFields) {
            this.writeConsole("\u672A\u8BBE\u7F6E\u6269\u5C55\u5B57\u6BB5\u3002");
            return [];
        }
        /** @type {?} */
        var tipFieldArr = this.extInfoFields.split(",");
        if (isHelpData) {
            /** @type {?} */
            var extendInfoFields = [];
            extendInfoFields = tipFieldArr.map((/**
             * @param {?} tf
             * @return {?}
             */
            function (tf) {
                /** @type {?} */
                var mapKey = Object.keys(_this.mapFields).find((/**
                 * @param {?} k
                 * @return {?}
                 */
                function (k) {
                    return _this.mapFields[k] === tf;
                }));
                if (mapKey) {
                    return mapKey;
                }
                else {
                    _this.writeConsole("\u5728\u5E2E\u52A9\u6620\u5C04\u5B57\u6BB5\u4E2D\u672A\u627E\u5230" + tf);
                    return "";
                }
            }));
            return extendInfoFields;
        }
        return tipFieldArr;
    };
    /**
     * @return {?}
     */
    LookupGridComponent.prototype.onUpdateExtendInfo = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var jsonData = this.selectionMgr.getBindingData();
        this.updateExtendInfo(jsonData, false);
    };
    // 选中帮助数据后，更新扩展信息
    // 选中帮助数据后，更新扩展信息
    /**
     * @private
     * @param {?} data
     * @param {?=} isHelpData
     * @return {?}
     */
    LookupGridComponent.prototype.updateExtendInfo = 
    // 选中帮助数据后，更新扩展信息
    /**
     * @private
     * @param {?} data
     * @param {?=} isHelpData
     * @return {?}
     */
    function (data, isHelpData) {
        var _this = this;
        if (isHelpData === void 0) { isHelpData = true; }
        if (data) {
            if (this.extInfoFormatter) {
                if (Array.isArray(data)) {
                    /** @type {?} */
                    var tipString = data.map((/**
                     * @param {?} n
                     * @return {?}
                     */
                    function (n) {
                        return _this.getExtendInfoText(n);
                    }));
                    this.extendInfo = tipString.join("，");
                }
                else {
                    this.extendInfo = this.getExtendInfoText(data);
                }
            }
            else {
                /** @type {?} */
                var extendInfoFields_1 = this.getExtendInfoFields(isHelpData);
                if (extendInfoFields_1 && extendInfoFields_1.length) {
                    if (Array.isArray(data)) {
                        /** @type {?} */
                        var tipString = data.map((/**
                         * @param {?} n
                         * @return {?}
                         */
                        function (n) {
                            return _this.getExtendInfoText(n, extendInfoFields_1);
                        }));
                        this.extendInfo = tipString.join("，");
                    }
                    else {
                        this.extendInfo = this.getExtendInfoText(data, extendInfoFields_1);
                    }
                }
            }
        }
    };
    /**
     * @private
     * @param {?} itemData
     * @param {?=} fields
     * @return {?}
     */
    LookupGridComponent.prototype.getExtendInfoText = /**
     * @private
     * @param {?} itemData
     * @param {?=} fields
     * @return {?}
     */
    function (itemData, fields) {
        var _this = this;
        if (fields === void 0) { fields = null; }
        if (typeof this.extInfoFormatter === "function") {
            return this.extInfoFormatter({
                bindingData: itemData,
                instance: this,
            });
        }
        else {
            /** @type {?} */
            var tipString_1 = [];
            /** @type {?} */
            var tipValues = fields.map((/**
             * @param {?} t
             * @return {?}
             */
            function (t) {
                var _a;
                /** @type {?} */
                var tfv = _this.utils.getValue(t, itemData);
                tipString_1.push(tfv);
                return _a = {}, _a[t] = tfv, _a;
            }));
            return tipString_1.join(" ");
        }
    };
    /**
     * @private
     * @param {?} rows
     * @return {?}
     */
    LookupGridComponent.prototype.getDisplayText = /**
     * @private
     * @param {?} rows
     * @return {?}
     */
    function (rows) {
        var _this = this;
        /** @type {?} */
        var df = this.displayFields
            ? this.displayFields.split(",")
            : [this.textField];
        /** @type {?} */
        var txtArr = rows.map((/**
         * @param {?} r
         * @return {?}
         */
        function (r) {
            /** @type {?} */
            var t = [];
            df.forEach((/**
             * @param {?} n
             * @return {?}
             */
            function (n) {
                t.push(_this.utils.getValue(n, r));
            }));
            return t.join(_this.displayTextSeparator);
        }));
        if (this.gridOptions.singleSelect) {
            return txtArr.join("");
        }
        else {
            if (this.displayFields) {
                return txtArr.map((/**
                 * @param {?} t
                 * @return {?}
                 */
                function (t) { return "[" + t + "]"; })).join(",");
            }
            else {
                return txtArr.join(",");
            }
        }
    };
    /**
     * @private
     * @param {?} selectedRow
     * @return {?}
     */
    LookupGridComponent.prototype.setDisplayText = /**
     * @private
     * @param {?} selectedRow
     * @return {?}
     */
    function (selectedRow) {
        var _this = this;
        this.originalText = this.displayText;
        if (this.gridOptions.singleSelect) {
            if (this.displayFormatter) {
                this.displayText = this.utils.getValue(this.textField, selectedRow);
                if (!this.isTree()) {
                    this.displayText = this.displayFormatter(this.displayText, [selectedRow], {
                        lookup: this,
                        datatable: (/** @type {?} */ (this.componentRef
                            .instance)),
                    });
                }
                else {
                    /** @type {?} */
                    var tt = (/** @type {?} */ (this.componentRef.instance));
                    this.displayText = this.displayFormatter(this.displayText, [selectedRow], { lookup: this, tree: tt });
                }
            }
            else {
                this.displayText = this.getDisplayText([selectedRow]);
            }
            this.displayValue = selectedRow[this.valueField];
        }
        else {
            if (selectedRow.length) {
                if (this.displayFormatter) {
                    this.displayText = selectedRow
                        .map((/**
                     * @param {?} r
                     * @return {?}
                     */
                    function (r) {
                        return _this.utils.getValue(_this.textField, r);
                    }))
                        .join(this.multipleChoiceSeparator);
                    if (!this.isTree()) {
                        this.displayText = this.displayFormatter(this.displayText, selectedRow, {
                            lookup: this,
                            datatable: (/** @type {?} */ (this.componentRef
                                .instance)),
                        });
                    }
                    else {
                        /** @type {?} */
                        var tt = (/** @type {?} */ (this.componentRef
                            .instance));
                        this.displayText = this.displayFormatter(this.displayText, selectedRow, { lookup: this, tree: tt });
                    }
                }
                else {
                    this.displayText = this.getDisplayText(selectedRow);
                }
                this.displayValue = selectedRow
                    .map((/**
                 * @param {?} r
                 * @return {?}
                 */
                function (r) {
                    return _this.utils.getValue(_this.valueField, r);
                }))
                    .join(this.multipleChoiceSeparator);
            }
        }
        this.originalText = this.displayText;
    };
    /**
     * @param {?} rowData
     * @return {?}
     */
    LookupGridComponent.prototype.runDictPickedEvent = /**
     * @param {?} rowData
     * @return {?}
     */
    function (rowData) {
        var _this = this;
        if (this.dictPicked) {
            if (this.okButton) {
                this.okButton.nativeElement.disabled = true;
            }
            this.dictPickedSubscription = this.dictPicked(rowData).subscribe((/**
             * @param {?} v
             * @return {?}
             */
            function (v) {
                if (_this.okButton) {
                    _this.okButton.nativeElement.disabled = false;
                }
                if (typeof v === "boolean") {
                    if (v) {
                        _this.closeDialog(rowData);
                    }
                }
                else if (typeof v === "object" &&
                    v.closeDialog !== undefined &&
                    !v.closeDialog) {
                    if (v.message) {
                        _this.messagerService.warning(v.message);
                    }
                    else {
                        _this.closeDialog(rowData);
                    }
                }
                else {
                    _this.closeDialog(rowData);
                }
            }));
        }
        else {
            this.closeDialog(rowData);
        }
    };
    /**
     * @private
     * @return {?}
     */
    LookupGridComponent.prototype.focusToInput = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        this.zone.runOutsideAngular((/**
         * @return {?}
         */
        function () {
            setTimeout((/**
             * @return {?}
             */
            function () {
                if (_this.inputGroup && _this.inputGroup.textbox) {
                    _this.inputGroup.textbox.nativeElement.focus();
                }
            }));
        }));
    };
    /**
     * @param {?=} rowData
     * @return {?}
     */
    LookupGridComponent.prototype.closeDialog = /**
     * @param {?=} rowData
     * @return {?}
     */
    function (rowData) {
        if (rowData === void 0) { rowData = null; }
        this.isShow = false;
        if (this.dialog) {
            this.dialog.close();
        }
        if (rowData) {
            this.multiSelMgr.save(rowData);
        }
        this.focusToInput();
    };
    /**
     * @return {?}
     */
    LookupGridComponent.prototype.cancelSelect = /**
     * @return {?}
     */
    function () {
        this.closeDialog();
        this.isTextChange = false;
        if (!this.nosearch) {
            this.displayText = this.originalText;
            this.setModelValue(this.displayText);
        }
        if (this.cancelHandler) {
            this.cancelHandler(this);
        }
    };
    /**
     * @param {?} v
     * @return {?}
     */
    LookupGridComponent.prototype.setModelValue = /**
     * @param {?} v
     * @return {?}
     */
    function (v) {
        if (this.onModelChange) {
            this.onModelChange(v);
            this.valueChanged.emit(v);
        }
    };
    // 数据列表，收藏， 已选数据 tab 页切换
    // 数据列表，收藏， 已选数据 tab 页切换
    /**
     * @param {?} e
     * @return {?}
     */
    LookupGridComponent.prototype.onTabChange = 
    // 数据列表，收藏， 已选数据 tab 页切换
    /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        var _this = this;
        this.activeTab = e.tabIndex;
        this.personalConf.tabIndex = this.activeTab;
        /** @type {?} */
        var _firstChange = this.isTabChanged;
        this.isTabChanged = true;
        this.personalConfigService.updatePersonalConfig({
            tabIndex: e.tabIndex,
        });
        if (this.activeTab === "datalist") {
            if (this.isDoublleList() && !this.leftComponentRef) {
                if (this.navigationOptions) {
                    this.lookupCmpMgr.createLeftComponent(this.navigationOptions);
                }
                else {
                    this.initData();
                    return;
                }
            }
            if ((!this.items || !this.items.length) && (!this._searchState || !this._searchState.value)) {
                this.initData();
            }
            else {
                if (!_firstChange) {
                    if (this.isTree()) {
                        this.loadTreeTableData();
                    }
                    else {
                        this.loadDataTableData();
                        this.dtEventMgr.bindDataTableEvent();
                    }
                }
                // this.selectionMgr.selectCurrentValue();
            }
            this.showGetAllChildrenCheckbox();
        }
        else {
            if (this.activeTab === "favorite") {
                if (this.isTree()) {
                    this.initData();
                }
                else {
                    if (!this.favoriteItems ||
                        !this.favoriteItems.length ||
                        this.favoriteItems.length !== this.favHelper.getFavoritIds().length) {
                        this.initData();
                    }
                    else if (!_firstChange) {
                        this.favHelper._loadFavoriteData(this.favoriteItems);
                        // this.selectionMgr.selectCurrentValue();
                    }
                    //  else {
                    //     this.selectionMgr.selectCurrentValue();
                    // }
                }
            }
        }
        this.changeDetector.detectChanges();
        setTimeout((/**
         * @return {?}
         */
        function () {
            _this.resizeCmp();
            if (_this.isTree()) {
                /** @type {?} */
                var y = _this.componentRef.instance.state.scrollY;
                _this.componentRef.instance.scrollToY(y, 0);
                if (_this.enableCascade) {
                    _this.ttEventMgr.cascadeValueChanged(_this.cascadeStatus);
                }
            }
            _this.selectionMgr.selectCurrentValue();
        }));
    };
    //#region  Tag View ----------------------------------------------------------------------
    //#region  Tag View ----------------------------------------------------------------------
    /**
     * @private
     * @return {?}
     */
    LookupGridComponent.prototype.registerMouseEventForTagView = 
    //#region  Tag View ----------------------------------------------------------------------
    /**
     * @private
     * @return {?}
     */
    function () {
        if (this.enableClear) {
            this.tagbox.nativeElement.addEventListener("mouseenter", this.onTagboxMouseEnter.bind(this));
            this.tagbox.nativeElement.addEventListener("mouseleave", this.onTagboxMouseLeave.bind(this));
        }
    };
    /**
     * @private
     * @param {?} event
     * @param {?=} isShow
     * @return {?}
     */
    LookupGridComponent.prototype.toggleClearIcon = /**
     * @private
     * @param {?} event
     * @param {?=} isShow
     * @return {?}
     */
    function (event, isShow) {
        if (isShow === void 0) { isShow = false; }
        /** @type {?} */
        var str = isShow ? "" : "none";
        /** @type {?} */
        var clearIcon = event.target.querySelector(".input-group-clear");
        if (clearIcon) {
            clearIcon.style.display = str;
        }
    };
    /**
     * @private
     * @param {?} event
     * @return {?}
     */
    LookupGridComponent.prototype.onTagboxMouseEnter = /**
     * @private
     * @param {?} event
     * @return {?}
     */
    function (event) {
        if (this.displayText && this.enableClear) {
            if (!this.readonly && !this.disabled) {
                this.showTagboxClearButton = true;
            }
        }
        if (this.showTagboxClearButton) {
            this.toggleClearIcon(event, true);
        }
    };
    /**
     * @private
     * @param {?} event
     * @return {?}
     */
    LookupGridComponent.prototype.onTagboxMouseLeave = /**
     * @private
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.toggleClearIcon(event);
    };
    /**
     * @param {?} $event
     * @param {?} txt
     * @return {?}
     */
    LookupGridComponent.prototype.onRemoveSelectItem = /**
     * @param {?} $event
     * @param {?} txt
     * @return {?}
     */
    function ($event, txt) {
        $event.stopPropagation();
        /** @type {?} */
        var textArray = Array.from(this.displayTextList);
        /** @type {?} */
        var removedIndex = this.displayTextList.indexOf(txt);
        textArray.splice(removedIndex, 1);
        this.displayText = textArray.join(this.multipleChoiceSeparator);
        this.originalText = this.displayText;
        this.setModelValue(this.displayText);
        if (this.displayValue) {
            /** @type {?} */
            var vals = this.displayValue.split(this.multipleChoiceSeparator);
            vals.splice(removedIndex, 1);
            this.displayValue = vals.join(this.multipleChoiceSeparator);
        }
        if (this.mapFields) {
            this.updateOtherFieldDataWhenTagremoved(removedIndex);
        }
        this.tagRemoved.emit({ removedIndex: removedIndex, instance: this });
    };
    /**
     * @private
     * @param {?} removedIndex
     * @return {?}
     */
    LookupGridComponent.prototype.updateOtherFieldDataWhenTagremoved = /**
     * @private
     * @param {?} removedIndex
     * @return {?}
     */
    function (removedIndex) {
        var _this = this;
        /** @type {?} */
        var helpFields = Object.keys(this.mapFields);
        /** @type {?} */
        var textFieldIndex = helpFields.indexOf(this.textField);
        if (this.ngControl &&
            this.ngControl.formDirective &&
            this.ngControl.formDirective.form &&
            this.ngControl.formDirective.form.bindingData) {
            /** @type {?} */
            var bindingData_2 = this.ngControl.formDirective.form.bindingData;
            if (bindingData_2.setValue) {
                /** @type {?} */
                var bindingPath = this.ngControl.formDirective.form.bindingPath;
                /** @type {?} */
                var pathArr_1 = [];
                if (bindingPath) {
                    pathArr_1 = bindingPath.split("/").filter((/**
                     * @param {?} n
                     * @return {?}
                     */
                    function (n) { return n !== ""; }));
                }
                helpFields.forEach((/**
                 * @param {?} helpField
                 * @return {?}
                 */
                function (helpField) {
                    _this.mapFields[helpField]
                        .split(",")
                        .forEach((/**
                     * @param {?} formField
                     * @return {?}
                     */
                    function (formField) {
                        /** @type {?} */
                        var fieldPaths = pathArr_1.concat(formField.split("."));
                        /** @type {?} */
                        var val = bindingData_2.getValue(fieldPaths);
                        /** @type {?} */
                        var valArr = val.split(_this.multipleChoiceSeparator);
                        valArr.splice(removedIndex, 1);
                        /** @type {?} */
                        var newVal = valArr.join(_this.multipleChoiceSeparator);
                        bindingData_2.setValue(pathArr_1.concat(fieldPaths), newVal, true, true);
                    }));
                }));
            }
        }
        else {
            if (this.bindingData) {
                if (textFieldIndex > -1) {
                    helpFields.splice(textFieldIndex, 1);
                }
                helpFields.forEach((/**
                 * @param {?} helpField
                 * @return {?}
                 */
                function (helpField) {
                    _this.mapFields[helpField]
                        .split(",")
                        .forEach((/**
                     * @param {?} formField
                     * @return {?}
                     */
                    function (formField) {
                        /** @type {?} */
                        var val = _this.utils.getValue(formField, _this.bindingData);
                        /** @type {?} */
                        var valArr = val.split(_this.multipleChoiceSeparator);
                        valArr.splice(removedIndex, 1);
                        /** @type {?} */
                        var newVal = valArr.join(_this.multipleChoiceSeparator);
                        _this.utils.setValue(_this.bindingData, formField, newVal);
                    }));
                }));
            }
        }
    };
    //#endregion
    //#endregion
    /**
     * @param {?} $event
     * @return {?}
     */
    LookupGridComponent.prototype.onAllChildNodesClick = 
    //#endregion
    /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        this.isGetAllChidlNodes = !this.isGetAllChidlNodes;
    };
    LookupGridComponent.decorators = [
        { type: Component, args: [{
                    selector: "farris-lookup-grid",
                    template: "<!--\r\n * @Author: \u75AF\u72C2\u79C0\u624D(Lucas Huang)\r\n * @Date: 2019-06-16 13:44:59\r\n * @LastEditors: \u75AF\u72C2\u79C0\u624D(Lucas Huang)\r\n * @LastEditTime: 2019-11-18 08:47:32\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n -->\r\n\r\n <input-group #inputgroup\r\n    *ngIf=\"viewType === 'text'\"\r\n    [groupText]=\"groupIcon\"\r\n    [lookup-tip]= \"useTip\"\r\n    [(ngModel)]=\"displayText\"\r\n    [disabled]=\"disabled\"\r\n    [readonly]=\"readonly\"\r\n    [editable]=\"editable\"\r\n    [customCls]=\"'lookupbox'\"\r\n    [placeholder]=\"'lookup.placeholder' | locale: '\u8BF7\u9009\u62E9': placeholder\"\r\n    [enableClear]=\"enableClear\"\r\n    [useExtendInfo]=\"useExtendInfo\"\r\n    [extendInfo]=\"extendInfo\"\r\n    [maxLength]=\"maxLength\"\r\n    (updateExtendInfo)=\"onUpdateExtendInfo()\"\r\n    [textAlign]=\"textAlign\"\r\n    [value]=\"displayText\"\r\n    (valueChange)=\"onChanges($event)\"\r\n    (clickHandle)=\"showDialog()\"\r\n    (clear)=\"onClear()\"\r\n    [quick-select]=\"quickSelect\"\r\n></input-group>\r\n\r\n<!--Tag style-->\r\n<div #tagbox class=\"input-group\" [class.f-state-disabled]=\"disabled\" [class.f-state-readonly]=\"readonly\" *ngIf=\"viewType === 'tag'\" [attr.title]=\"displayText\">\r\n    <div class=\"form-control f-cmp-inputgroup--multi-wrapper multi-more\" style=\"height: auto; min-height: 24px;\">\r\n        <div class=\"multi--content\">\r\n            <span class=\"multi--item\" *ngFor=\"let txt of displayTextList; let index\" title=\"\" style=\"cursor: default;padding: 0 5px;\r\n            background: #ebf7fe;\r\n            border: 1px solid #cfedff;\r\n            position: relative;\r\n            padding-right: 20px;\r\n            margin-right: 3px;margin-top: 1px;height:18px\">\r\n                {{txt}}\r\n                <i class=\"f-icon f-icon-close\" *ngIf=\"!readonly && !disabled\" style=\"cursor: pointer;position:absolute; right: 2px\" (click)=\"onRemoveSelectItem($event, txt)\"></i>\r\n            </span>\r\n        </div>\r\n        <!-- <div class=\"multi--more\" *ngIf=\"selections && selections.length\">\r\n            <i class=\"f-icon multi--more-icon\"></i><span class=\"multi--more-text\">{{selections.length}}</span>\r\n        </div> -->\r\n    </div>\r\n    <div class=\"input-group-append\" style=\"position: relative;\" title=\"\" >\r\n        <span class=\"input-group-text input-group-clear\" style=\"display: none; padding: 0px 4px;position: absolute;right: 22px;height: 100%;\" (click)=\"onClear()\">\r\n            <i class=\"f-icon modal_close\"></i>\r\n        </span>\r\n        <span class=\"input-group-text\" (click)=\"showDialog()\">\r\n            <span class=\"f-icon f-icon-lookup\"></span>\r\n        </span>\r\n    </div>\r\n</div>\r\n\r\n\r\n<farris-dialog\r\n    #dialog\r\n    *ngIf=\"isShow\"\r\n    [draggable]=\"draggable\"\r\n    [resizable]=\"resizable\"\r\n    [title]=\"displayInfo.title\"\r\n    [beforeOpen]=\"beforeOpen\"\r\n    [beforeClose]=\"beforeClose\"\r\n    [(width)]=\"dialogWidth\"\r\n    [(height)]=\"dialogHeight\"\r\n    [showButtons]=\"showButtons\"\r\n    [showMaxButton]=\"showMaxButton\"\r\n    [showCloseButton]=\"true\"\r\n    [buttons]=\"buttonsRef || defaultButtonRef\"\r\n    [buttonAlign]=\"buttonAlign\"\r\n    [enableScroll]=\"false\"\r\n    [dialogHeaderHeight]=\"50\"\r\n    (maxed)=\"onMaxDialog($event)\"\r\n    (resized)=\"onResized($event)\"\r\n    (resizing)=\"onResizing($event)\"\r\n\r\n>\r\n\r\n\r\n    <div [ngStyle]=\"containerStyle\" style=\"height: 100%;\"> <!-- [style.height.px]=\"dialogContentHeight\" -->\r\n        <lookup-tabs (tabChange)=\"onTabChange($event)\" [enableFav]=\"useFavorite\" [activeTab]=\"activeTab\"\r\n            [enableSelected]=\"showSelected && !singleSelect\" [selectedTotal]=\"(currentSelectedItems | async)?.length\">\r\n            <div datalist class=\"d-flex f-utils-absolute-all \">   <!-- [style.height.px]=\"useFavorite ? dialogContentHeight - 40 : dialogContentHeight\"-->\r\n                <layout [direction]=\"'h'\" [fill]=\"true\" *ngIf=\"isDoublleList()\">\r\n                    <layout-panel #leftPanel [width]=\"leftPanelWidth\" region=\"west\" [minWidth]=\"10\" [showBorder]=\"false\" >\r\n                        <ng-container #leftContainer></ng-container>\r\n                    </layout-panel>\r\n                    <layout-panel region=\"center\" [showBorder]=\"false\">\r\n                        <ng-container #centerContainer></ng-container>\r\n                    </layout-panel>\r\n                </layout>\r\n                \r\n                <ng-container *ngIf=\"!isDoublleList()\" #contentContainer></ng-container>\r\n            </div>\r\n            <div favorites  class=\"d-flex f-utils-absolute-all \" *ngIf=\"useFavorite\" >  <!--[style.height.px]=\"dialogContentHeight - 40\" -->\r\n                <ng-container #favoritesContainer></ng-container>\r\n            </div>\r\n            <div selected class=\"d-flex f-utils-absolute-all \"  *ngIf=\"showSelected\" > <!--[style.height.px]=\"dialogContentHeight - 40\" -->\r\n                <farris-datatable #multiSelectDT\r\n                    [height]=\"gridOptions?.height\"\r\n                    [pagination]=\"false\" [fill]=\"true\"\r\n                    [columns]=\"selectedColumns\"\r\n                    [data]=\"currentSelectedItems | async\"\r\n                    [remoteSort]=\"false\"\r\n                    (cellClick)=\"multiSelMgr?.onSelectedTableCellClick($event)\"\r\n                >\r\n                </farris-datatable>\r\n            </div>\r\n        </lookup-tabs>\r\n\r\n    </div>\r\n</farris-dialog>\r\n\r\n<ng-template #defaultButtonRef>\r\n    \r\n    <div class=\"flex-fill\" style=\"text-align: left;\" *ngIf=\"isReady && enableCascade && displayType==='TREELIST' && singleSelect === false\">\r\n        <select class=\"form-control\" style=\"width: auto; display: inline-block\" (ngModelChange)=\"ttEventMgr?.cascadeValueChanged($event)\" [ngModel]=\"cascadeStatus\" name=\"cascadeStatus\">\r\n            <option value=\"enable\">{{ 'lookup.cascade.enable' | locale: '\u540C\u6B65\u9009\u62E9' }}</option>\r\n            <option value=\"up\">{{ 'lookup.cascade.up' | locale: '\u5305\u542B\u4E0A\u7EA7' }}</option>\r\n            <option value=\"down\">{{ 'lookup.cascade.down' | locale: '\u5305\u542B\u4E0B\u7EA7' }}</option>\r\n            <option value=\"disable\" >{{ 'lookup.cascade.disable' | locale: '\u4EC5\u9009\u62E9\u81EA\u8EAB' }}</option>\r\n        </select>\r\n\r\n\r\n        <div class=\"custom-control custom-checkbox custom-control-inline ml-3\" *ngIf=\"enableGetAllChildNodes\">\r\n            <input class=\"custom-control-input\" type=\"checkbox\" id=\"farris-lookup_get-all-child-nodes\">\r\n            <label class=\"custom-control-label btn-link\" for=\"farris-lookup_get-all-child-nodes\" style=\"padding-left: 18px;\"\r\n                (click)=\"onAllChildNodesClick($event)\">{{'lookup.getAllChilds'|locale: '\u83B7\u53D6\u6240\u6709\u5B50\u7EA7\u6570\u636E'}}</label>\r\n        </div>\r\n\r\n<!-- \r\n        <button class=\"btn btn-link\" style=\"display: inline-block;margin-left: 10px;padding-left: 0;\"\r\n            *ngIf=\"enableGetAllChildNodes\" (click)=\"onAllChildNodesClick($event)\">\r\n            <span class=\"f-icon f-icon-checkbox\"[class.f-icon-checkbox-checked]=\"isGetAllChidlNodes\"\r\n                style=\"margin-right: 5px; font-size: 14px;color: #0089FF;\"></span>{{'lookup.getAllChilds'|locale: '\u83B7\u53D6\u6240\u6709\u5B50\u7EA7\u6570\u636E'}}</button> -->\r\n\r\n    </div>\r\n\r\n    <button type=\"button\" class=\"btn btn-secondary btn-lg\" (click)=\"cancelSelect()\" [disabled]=\"!(isReady || hasError)\" >\r\n        {{ 'lookup.cancelText' | locale: '\u53D6\u6D88' }}\r\n    </button>\r\n    <button #okbtn type=\"button\" [disabled]=\"!isReady\"  class=\"btn btn-primary btn-lg\" (click)=\"selectItem()\" >\r\n        {{ 'lookup.okText' | locale: '\u786E\u5B9A' }}\r\n    </button>\r\n   \r\n    \r\n</ng-template>\r\n",
                    providers: [
                        LOOKUPGRID_VALUE_ACCESSOR,
                        ShortcutsService,
                        LookupDefaultMapping,
                        LookupUtils,
                        PersonalConfigService,
                    ],
                    encapsulation: ViewEncapsulation.None,
                    exportAs: "lookup",
                    styles: [".input-group{flex-wrap:nowrap}.ng-dirty.ng-invalid>input-group>.lookupbox{border-color:#ff0303}.lookup-clear{cursor:pointer;background:#fff!important}.lookup-clear:hover{background:#e9ecef!important}.f-lookup-favorite{cursor:pointer;color:#ff9800}.f-lookup-unfavorite{cursor:pointer;color:#dd2438}.lookup-tip{position:absolute;min-width:200px;max-height:400px;padding:.25rem 0;z-index:7777;background:#fff;box-shadow:0 2px 8px 0 rgba(0,0,0,.15);border-radius:2px}.lookup-tip .lookup-tip-header{font-weight:700;padding:.25rem .475rem;border-radius:0}.lookup-tip ul{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;padding-left:0;margin-bottom:0}.lookup-tip ul li{position:relative;display:block;width:100%;margin-bottom:-1px;padding:.25rem .875rem;color:rgba(0,0,0,.85);background-color:#fff;cursor:pointer}.lookup-tip ul li:hover{background-color:#e6f7ff}.f-lookup_quick-panel{height:100%;z-index:10001;position:absolute;overflow:auto;background:#fff;margin-top:.25rem;box-shadow:0 2px 8px 0 #dedede;border-radius:3px}.f-lookup_quick-panel .list{margin:0 6px}.f-lookup_quick-panel .list-group-item{height:30px;padding:0 8px;line-height:30px;border:0;margin-bottom:0}.f-lookup_quick-panel .more{height:50px;text-align:center;line-height:50px}.f-lookup_quick-panel .norecord{height:100%;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;display:-webkit-box;display:flex;font-size:16px;color:#bec6db}"]
                }] }
    ];
    /** @nocollapse */
    LookupGridComponent.ctorParameters = function () { return [
        { type: Injector },
        { type: ComponentFactoryResolver },
        { type: ElementRef },
        { type: CommonUtils },
        { type: LookupDefaultMapping },
        { type: ChangeDetectorRef },
        { type: ShortcutsService },
        { type: LookupUtils },
        { type: NgZone },
        { type: Renderer2 }
    ]; };
    LookupGridComponent.propDecorators = {
        customDisplayType: [{ type: Input }],
        viewType: [{ type: Input }],
        displayType: [{ type: Input }],
        enableClear: [{ type: Input }],
        remoteSort: [{ type: Input }],
        condition: [{ type: Input }],
        showCheckAll: [{ type: Input }],
        singleSelect: [{ type: Input }],
        multipleChoiceSeparator: [{ type: Input }],
        idField: [{ type: Input }],
        uri: [{ type: Input }],
        beUri: [{ type: Input }],
        showFilterBar: [{ type: Input }],
        pagination: [{ type: Input }],
        pageIndex: [{ type: Input }],
        pageSize: [{ type: Input }],
        pageList: [{ type: Input }],
        total: [{ type: Input }],
        columns: [{ type: Input }],
        remoteSearch: [{ type: Input }],
        searchOnServer: [{ type: Input }],
        nosearch: [{ type: Input }],
        clearMappings: [{ type: Output }],
        maxLength: [{ type: Input }],
        mappingFn: [{ type: Input }],
        items: [{ type: Input }],
        favoriteItems: [{ type: Input }],
        customData: [{ type: Input }],
        bindingData: [{ type: Input }],
        treeInfo: [{ type: Input }],
        enableCascade: [{ type: Input }],
        cascadeStatus: [{ type: Input }],
        placeholder: [{ type: Input }],
        showSelected: [{ type: Input }],
        useFavorite: [{ type: Input }],
        favoriteDataFrom: [{ type: Input }],
        useTip: [{ type: Input }],
        isRecordSize: [{ type: Input }],
        userId: [{ type: Input }],
        enableToSelect: [{ type: Input }],
        enableFindText: [{ type: Input }],
        expandLevel: [{ type: Input }],
        navTreeTableOptions: [{ type: Input }],
        treeTableOptions: [{ type: Input }],
        dataTableOptions: [{ type: Input }],
        loadTreeDataType: [{ type: Input }],
        loadDataWhenOpen: [{ type: Input }],
        navSelectedIds: [{ type: Input }],
        selectFirstInNav: [{ type: Input }],
        enableFullTree: [{ type: Input }],
        displayFormatter: [{ type: Input }],
        displayFields: [{ type: Input }],
        displayTextSeparator: [{ type: Input }],
        helpId: [{ type: Input }],
        textAlign: [{ type: Input }],
        enableTitle: [{ type: Input }],
        useExtendInfo: [{ type: Input }],
        extInfoFields: [{ type: Input }],
        extInfoFormatter: [{ type: Input }],
        extendInfo: [{ type: Input }],
        customFormatter: [{ type: Input }],
        customNavFormatter: [{ type: Input }],
        okHandler: [{ type: Input }],
        cancelHandler: [{ type: Input }],
        tagboxHeight: [{ type: Input }],
        maxTagboxHeight: [{ type: Input }],
        enableGetAllChildNodes: [{ type: Input }],
        shortcutKey: [{ type: Input }],
        quickSelect: [{ type: Input }],
        beforeSelectData: [{ type: Input }],
        selectedData: [{ type: Output }],
        clear: [{ type: Output }],
        search: [{ type: Output }],
        valueChanged: [{ type: Output }],
        loadSuccess: [{ type: Output }],
        pagerChanged: [{ type: Output }],
        expandTreeNode: [{ type: Output }],
        textChanged: [{ type: Output }],
        checkedChange: [{ type: Output }],
        tagRemoved: [{ type: Output }],
        gridOptions: [{ type: Input }],
        contentContainer: [{ type: ViewChild, args: ["contentContainer", { read: ViewContainerRef },] }],
        favoritesContainer: [{ type: ViewChild, args: ["favoritesContainer", { read: ViewContainerRef },] }],
        leftContainer: [{ type: ViewChild, args: ["leftContainer", { read: ViewContainerRef },] }],
        centerContainer: [{ type: ViewChild, args: ["centerContainer", { read: ViewContainerRef },] }],
        multiSelectDT: [{ type: ViewChild, args: ["multiSelectDT",] }],
        inputGroup: [{ type: ViewChild, args: ["inputgroup",] }],
        leftPanel: [{ type: ViewChild, args: ["leftPanel",] }],
        tagbox: [{ type: ViewChild, args: ["tagbox",] }],
        okButton: [{ type: ViewChild, args: ["okbtn",] }]
    };
    return LookupGridComponent;
}(LookupComponent));
export { LookupGridComponent };
if (false) {
    /** @type {?} */
    LookupGridComponent.prototype.groupIcon;
    /** @type {?} */
    LookupGridComponent.prototype._displayType;
    /**
     * 使用表单设计器中的显示类型。否则使用元数据设置的显示类型。 默认：false
     * @type {?}
     */
    LookupGridComponent.prototype.customDisplayType;
    /** @type {?} */
    LookupGridComponent.prototype.viewType;
    /**
     * 启用清空按钮
     * @type {?}
     */
    LookupGridComponent.prototype.enableClear;
    /**
     * 服务器端排序
     * @type {?}
     */
    LookupGridComponent.prototype.remoteSort;
    /** @type {?} */
    LookupGridComponent.prototype.condition;
    /**
     * 树表显示全选复选框。 默认不显示
     * @type {?}
     */
    LookupGridComponent.prototype.showCheckAll;
    /**
     * 是否启用多选
     * @type {?}
     */
    LookupGridComponent.prototype.singleSelect;
    /**
     * 多选分隔符
     * @type {?}
     */
    LookupGridComponent.prototype.multipleChoiceSeparator;
    /**
     * 主键字段
     * @type {?}
     */
    LookupGridComponent.prototype.idField;
    /**
     * 可以为元数据ID、webapiURL
     * @type {?}
     */
    LookupGridComponent.prototype.uri;
    /**
     * BE REST RUI
     * - 此处设置后 uri 失效
     * @type {?}
     */
    LookupGridComponent.prototype.beUri;
    /**
     * 显示过滤工具条
     * @type {?}
     */
    LookupGridComponent.prototype.showFilterBar;
    /**
     * 是否启用分页
     * @type {?}
     */
    LookupGridComponent.prototype.pagination;
    /**
     * 当前页索引，从 0开始
     * @type {?}
     */
    LookupGridComponent.prototype.pageIndex;
    /**
     * 每页记录数
     * @type {?}
     */
    LookupGridComponent.prototype.pageSize;
    /**
     * 可用分页记录数列表
     * @type {?}
     */
    LookupGridComponent.prototype.pageList;
    /**
     * 总记录数
     * @type {?}
     */
    LookupGridComponent.prototype.total;
    /**
     * 显示列信息, 默认为 []
     * @type {?}
     */
    LookupGridComponent.prototype.columns;
    /**
     * 帮助查询是否为远端查询
     * @type {?}
     */
    LookupGridComponent.prototype.remoteSearch;
    /**
     * 文本变化后，进行服务器端查询
     * @type {?}
     */
    LookupGridComponent.prototype.searchOnServer;
    /**
     * 不进行服务器查询，有啥算啥
     * @type {?}
     */
    LookupGridComponent.prototype.nosearch;
    /**
     * 启用任意输入后，值通过输入时触发
     * @type {?}
     */
    LookupGridComponent.prototype.clearMappings;
    /**
     * 允许输入的字符最大长度。
     * 任意输入时，此属性有效
     * @type {?}
     */
    LookupGridComponent.prototype.maxLength;
    /** @type {?} */
    LookupGridComponent.prototype.mappingFn;
    /**
     * 数据列表
     * @type {?}
     */
    LookupGridComponent.prototype.items;
    /** @type {?} */
    LookupGridComponent.prototype.favoriteItems;
    /**
     * 自定义数据
     * @type {?}
     */
    LookupGridComponent.prototype.customData;
    /**
     * 绑定值所在的对象
     * @type {?}
     */
    LookupGridComponent.prototype.bindingData;
    /** @type {?} */
    LookupGridComponent.prototype.treeInfo;
    /**
     * 是否启用级联选择控制选项
     * @type {?}
     */
    LookupGridComponent.prototype.enableCascade;
    /**
     * 级联控制默认值： enable, up, down, disable
     * @type {?}
     */
    LookupGridComponent.prototype.cascadeStatus;
    /** @type {?} */
    LookupGridComponent.prototype.placeholder;
    /**
     * 显示已选记录列表。 默认为 false 不显示
     * @type {?}
     */
    LookupGridComponent.prototype.showSelected;
    /**
     * 应用收藏夹
     * @type {?}
     */
    LookupGridComponent.prototype.useFavorite;
    /**
     * 收藏数据来自于： locale: 本地存储， remote: 服务器端存储
     * @type {?}
     */
    LookupGridComponent.prototype.favoriteDataFrom;
    /**
     * 使用提示,快捷选择
     * @type {?}
     */
    LookupGridComponent.prototype.useTip;
    /**
     * 记录窗口大小
     * @type {?}
     */
    LookupGridComponent.prototype.isRecordSize;
    /**
     * 快速选择
     * @type {?}
     */
    LookupGridComponent.prototype.userId;
    /**
     * 是否启用选中value值对应的行数据，默认 true
     * @type {?}
     */
    LookupGridComponent.prototype.enableToSelect;
    /** @type {?} */
    LookupGridComponent.prototype.enableFindText;
    /**
     * -1: 不展开； 0: 全部展开；>0: 展开到指定级数
     * @type {?}
     */
    LookupGridComponent.prototype.expandLevel;
    /** @type {?} */
    LookupGridComponent.prototype.navTreeTableOptions;
    /** @type {?} */
    LookupGridComponent.prototype.treeTableOptions;
    /** @type {?} */
    LookupGridComponent.prototype.dataTableOptions;
    /** @type {?} */
    LookupGridComponent.prototype.defaultTreeTableOptions;
    /**
     * 树形帮助数据加载方式： default: 内置取数； loadall: 加载所有 layerload：分层加载
     * @type {?}
     */
    LookupGridComponent.prototype.loadTreeDataType;
    /**
     * 窗口打开后立即加载数据，默认为 true
     * @type {?}
     */
    LookupGridComponent.prototype.loadDataWhenOpen;
    /**
     * 导航列表，树列表在帮助打开后选中的数据;
     * 设置后，`selectFirstInNav` 失效！
     * @type {?}
     */
    LookupGridComponent.prototype.navSelectedIds;
    /**
     * 导航帮助，选中第1条数据，默认为 false;
     * 注意：当`navSelectedIds`不为空时，此属性失效。
     * @type {?}
     */
    LookupGridComponent.prototype.selectFirstInNav;
    /**
     * 启用构造完整树过滤
     * @type {?}
     */
    LookupGridComponent.prototype.enableFullTree;
    /**
     * 显示文本自定义函数
     * @type {?}
     */
    LookupGridComponent.prototype.displayFormatter;
    /**
     * 显示文本字段集合，以 英文 逗号隔开
     * @type {?}
     */
    LookupGridComponent.prototype.displayFields;
    /** @type {?} */
    LookupGridComponent.prototype.displayTextSeparator;
    /**
     * 帮助元数据ID，不为空时调用指定的URI
     * /api/runtime/bcc/v1.0/help/data/{helpId}
     * @type {?}
     */
    LookupGridComponent.prototype.helpId;
    /**
     * 文本对齐方式； left | center | right; 默认 left
     * @type {?}
     */
    LookupGridComponent.prototype.textAlign;
    /**
     * 鼠标滑过输入框时显示输入框内的文本信息
     * @type {?}
     */
    LookupGridComponent.prototype.enableTitle;
    /** @type {?} */
    LookupGridComponent.prototype.useExtendInfo;
    /** @type {?} */
    LookupGridComponent.prototype.extInfoFields;
    /** @type {?} */
    LookupGridComponent.prototype.extInfoFormatter;
    /** @type {?} */
    LookupGridComponent.prototype.extendInfo;
    /**
     * IDE 设计器自定义格式化 2103
     * @type {?}
     */
    LookupGridComponent.prototype.customFormatter;
    /** @type {?} */
    LookupGridComponent.prototype.customNavFormatter;
    /**
     * 自定义确定事件
     * @type {?}
     */
    LookupGridComponent.prototype.okHandler;
    /**
     * 自定义取消事件
     * @type {?}
     */
    LookupGridComponent.prototype.cancelHandler;
    /** @type {?} */
    LookupGridComponent.prototype.tagboxHeight;
    /** @type {?} */
    LookupGridComponent.prototype.maxTagboxHeight;
    /**
     * 启用获取所有子级数据的功能
     * @type {?}
     */
    LookupGridComponent.prototype.enableGetAllChildNodes;
    /** @type {?} */
    LookupGridComponent.prototype.shortcutKey;
    /**
     * 快捷选择相关配置项，默认为 null, 即不启用此功能
     * @type {?}
     */
    LookupGridComponent.prototype.quickSelect;
    /**
     * 数据选择后，值映射前触发
     * 返回 Observable
     *      canSelect: <boolean>  是否允许选择
     *      message: <string> 不允许选择时的提示信息
     * @type {?}
     */
    LookupGridComponent.prototype.beforeSelectData;
    /** @type {?} */
    LookupGridComponent.prototype.selectedData;
    /** @type {?} */
    LookupGridComponent.prototype.clear;
    /** @type {?} */
    LookupGridComponent.prototype.search;
    /** @type {?} */
    LookupGridComponent.prototype.valueChanged;
    /** @type {?} */
    LookupGridComponent.prototype.loadSuccess;
    /** @type {?} */
    LookupGridComponent.prototype.pagerChanged;
    /** @type {?} */
    LookupGridComponent.prototype.expandTreeNode;
    /** @type {?} */
    LookupGridComponent.prototype.textChanged;
    /** @type {?} */
    LookupGridComponent.prototype.checkedChange;
    /** @type {?} */
    LookupGridComponent.prototype.tagRemoved;
    /**
     * 内容中留白边距
     * @type {?}
     */
    LookupGridComponent.prototype.containerMargin;
    /** @type {?} */
    LookupGridComponent.prototype.containerStyle;
    /** @type {?} */
    LookupGridComponent.prototype._gridOptions;
    /** @type {?} */
    LookupGridComponent.prototype.contentContainer;
    /** @type {?} */
    LookupGridComponent.prototype.favoritesContainer;
    /** @type {?} */
    LookupGridComponent.prototype.leftContainer;
    /** @type {?} */
    LookupGridComponent.prototype.centerContainer;
    /** @type {?} */
    LookupGridComponent.prototype.multiSelectDT;
    /** @type {?} */
    LookupGridComponent.prototype.inputGroup;
    /** @type {?} */
    LookupGridComponent.prototype.leftPanel;
    /** @type {?} */
    LookupGridComponent.prototype.tagbox;
    /** @type {?} */
    LookupGridComponent.prototype.okButton;
    /** @type {?} */
    LookupGridComponent.prototype.componentRef;
    /** @type {?} */
    LookupGridComponent.prototype.leftComponentRef;
    /** @type {?} */
    LookupGridComponent.prototype.favoritesComponentRef;
    /** @type {?} */
    LookupGridComponent.prototype.http;
    /** @type {?} */
    LookupGridComponent.prototype.messagerService;
    /** @type {?} */
    LookupGridComponent.prototype.loadingService;
    /** @type {?} */
    LookupGridComponent.prototype.loading;
    /** @type {?} */
    LookupGridComponent.prototype.navigationOptions;
    /** @type {?} */
    LookupGridComponent.prototype.leftPanelWidth;
    /** @type {?} */
    LookupGridComponent.prototype.navLookupDialogMinWidth;
    /** @type {?} */
    LookupGridComponent.prototype.navigationFilter;
    /** @type {?} */
    LookupGridComponent.prototype.subscriptions;
    /** @type {?} */
    LookupGridComponent.prototype.dialogOpenedSubscription;
    /** @type {?} */
    LookupGridComponent.prototype.dialogClosedSubscription;
    /** @type {?} */
    LookupGridComponent.prototype.isTextChange;
    /** @type {?} */
    LookupGridComponent.prototype.isTabChanged;
    /** @type {?} */
    LookupGridComponent.prototype.displayInfo;
    /** @type {?} */
    LookupGridComponent.prototype.tabChangeSubscription;
    /** @type {?} */
    LookupGridComponent.prototype.personalConf;
    /** @type {?} */
    LookupGridComponent.prototype.favoriteColumns;
    /**
     * 临时查询参数
     * @type {?}
     */
    LookupGridComponent.prototype._searchState;
    /** @type {?} */
    LookupGridComponent.prototype.allData;
    /** @type {?} */
    LookupGridComponent.prototype.personalConfigService;
    /** @type {?} */
    LookupGridComponent.prototype.utilService;
    /** @type {?} */
    LookupGridComponent.prototype.treeNodeHelper;
    /** @type {?} */
    LookupGridComponent.prototype.localService;
    /** @type {?} */
    LookupGridComponent.prototype.notifyService;
    /** @type {?} */
    LookupGridComponent.prototype.allColumnsTitle;
    /** @type {?} */
    LookupGridComponent.prototype.mustWriteSomething;
    /** @type {?} */
    LookupGridComponent.prototype.mustChoosAdatarow;
    /** @type {?} */
    LookupGridComponent.prototype.addFavoriteSuccess;
    /** @type {?} */
    LookupGridComponent.prototype.delFavoriteSuccess;
    /** @type {?} */
    LookupGridComponent.prototype.searching;
    /**
     * 临时存储查询结果集
     * @type {?}
     */
    LookupGridComponent.prototype._searchResult;
    /** @type {?} */
    LookupGridComponent.prototype.lookupinitializationSubject;
    /**
     * 多选时，选中的数据
     * @type {?}
     */
    LookupGridComponent.prototype.currentSelectedItems;
    /**
     * 已选数据列信息
     * @type {?}
     */
    LookupGridComponent.prototype.selectedColumns;
    /** @type {?} */
    LookupGridComponent.prototype.activeTab;
    /** @type {?} */
    LookupGridComponent.prototype.favHelper;
    /** @type {?} */
    LookupGridComponent.prototype.ttEventMgr;
    /** @type {?} */
    LookupGridComponent.prototype.multiSelMgr;
    /** @type {?} */
    LookupGridComponent.prototype.httpMgr;
    /** @type {?} */
    LookupGridComponent.prototype.lookupCmpMgr;
    /** @type {?} */
    LookupGridComponent.prototype.dialogMgr;
    /** @type {?} */
    LookupGridComponent.prototype.selectionMgr;
    /** @type {?} */
    LookupGridComponent.prototype.dtEventMgr;
    /** @type {?} */
    LookupGridComponent.prototype.lookupSelectionSer;
    /** @type {?} */
    LookupGridComponent.prototype.controlId;
    /** @type {?} */
    LookupGridComponent.prototype.savingFaoriteData;
    /** @type {?} */
    LookupGridComponent.prototype.isReady;
    /** @type {?} */
    LookupGridComponent.prototype.showTagboxClearButton;
    /** @type {?} */
    LookupGridComponent.prototype.hasError;
    /** @type {?} */
    LookupGridComponent.prototype.isGetAllChidlNodes;
    /** @type {?} */
    LookupGridComponent.prototype.eventManager;
    /**
     * 选中记录ID，自定义帮助取数时使用
     * @type {?}
     */
    LookupGridComponent.prototype.selectedIds;
    /**
     * @type {?}
     * @private
     */
    LookupGridComponent.prototype.lookupSearchInputEvent;
    /**
     * @type {?}
     * @private
     */
    LookupGridComponent.prototype.farrisInstances;
    /**
     * 用户初始设置
     * @type {?}
     * @private
     */
    LookupGridComponent.prototype._userSettings;
    /** @type {?} */
    LookupGridComponent.prototype._treeInfo_;
    /**
     * dialog 内容区域高度。 弹窗总高度 - 头部高度 - 脚部高度 - （启用收藏 TAB头高度）
     * @type {?}
     */
    LookupGridComponent.prototype.dialogContentHeight;
    /** @type {?} */
    LookupGridComponent.prototype.overLayService;
    /**
     * @type {?}
     * @private
     */
    LookupGridComponent.prototype.debugSer;
    /** @type {?} */
    LookupGridComponent.prototype.injector;
    /** @type {?} */
    LookupGridComponent.prototype.cfr;
    /** @type {?} */
    LookupGridComponent.prototype.el;
    /** @type {?} */
    LookupGridComponent.prototype.utils;
    /**
     * @type {?}
     * @private
     */
    LookupGridComponent.prototype.defaultMapping;
    /** @type {?} */
    LookupGridComponent.prototype.changeDetector;
    /** @type {?} */
    LookupGridComponent.prototype.shortcuts;
    /** @type {?} */
    LookupGridComponent.prototype.lookupUtils;
    /**
     * @type {?}
     * @private
     */
    LookupGridComponent.prototype.zone;
    /**
     * @type {?}
     * @private
     */
    LookupGridComponent.prototype.render2;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9va3VwLWdyaWQuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy91aS1sb29rdXAvIiwic291cmNlcyI6WyJsaWIvbG9va3VwLWdyaWQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFTQSxPQUFPLEVBQ0gsU0FBUyxFQUNULEtBQUssRUFDTCxTQUFTLEVBR1QsWUFBWSxFQUVaLFFBQVEsRUFDUix3QkFBd0IsRUFDeEIsTUFBTSxFQUNOLGlCQUFpQixFQUNqQixpQkFBaUIsRUFFakIsZ0JBQWdCLEVBQ2hCLFVBQVUsRUFHVixVQUFVLEVBQ1YsTUFBTSxFQUNOLFNBQVMsR0FHWixNQUFNLGVBQWUsQ0FBQztBQUV2QixPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUNuRCxPQUFPLEVBQTRCLEVBQUUsRUFBRSxPQUFPLEVBQW1CLE1BQU0sTUFBTSxDQUFDO0FBRTlFLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUVsRCxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDdEQsT0FBTyxFQUFFLGNBQWMsRUFBb0IsTUFBTSxvQkFBb0IsQ0FBQztBQUN0RSxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUMxRCxPQUFPLEVBQUUsa0JBQWtCLEVBQVksTUFBTSxzQkFBc0IsQ0FBQztBQUNwRSxPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUN6RCxPQUFPLEVBQUUsV0FBVyxFQUFFLFlBQVksRUFBRSw4QkFBOEIsRUFBRSxvQkFBb0IsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBRXBILE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBQ3hELE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBQzdELE9BQU8sRUFBRSxhQUFhLEVB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O0lBRzVDLG1EQUErQzs7Ozs7SUFFL0MsOENBQXFCOztJQUNyQix3Q0FBc0U7O0lBRXRFLHdDQUFpQzs7SUFDakMseUNBQXlDOztJQUN6QywwQ0FBMEM7O0lBQzFDLHNDQUFrQzs7SUFDbEMsMkNBQTRDOztJQUM1Qyx3Q0FBc0M7O0lBQ3RDLDJDQUFzQzs7SUFDdEMseUNBQXlDOztJQUV6QyxpREFBa0Q7O0lBRWxELHdDQUFlOztJQUNmLGdEQUEwQjs7SUFDMUIsc0NBQWdCOztJQUNoQixvREFBOEI7O0lBQzlCLHVDQUFpQjs7SUFFakIsaURBQTJCOztJQUMzQiwyQ0FBMkI7Ozs7O0lBRTNCLDBDQUFpQjs7Ozs7SUFDakIscURBQXNDOzs7OztJQUN0Qyw4Q0FBK0Q7Ozs7OztJQUUvRCw0Q0FBZ0M7O0lBTWhDLHlDQUFrQjs7Ozs7SUFHbEIsa0RBQXdCOztJQUV4Qiw2Q0FBcUM7Ozs7O0lBQ3JDLHVDQUFzQzs7SUFFbEMsdUNBQXlCOztJQUN6QixrQ0FBb0M7O0lBQ3BDLGlDQUFxQjs7SUFDckIsb0NBQXlCOzs7OztJQUN6Qiw2Q0FBNEM7O0lBQzVDLDZDQUF3Qzs7SUFDeEMsd0NBQWtDOztJQUNsQywwQ0FBK0I7Ozs7O0lBQy9CLG1DQUFvQjs7Ozs7SUFDcEIsc0NBQTBCIiwic291cmNlc0NvbnRlbnQiOlsiLypcclxuICogQEF1dGhvcjog55av54uC56eA5omNKGx1Y2FzIGh1YW5nKVxyXG4gKiBARGF0ZTogMjAxOC0xMS0yMyAxMToyMzoxMlxyXG4gKiBATGFzdEVkaXRvcnM6IOeWr+eLguengOaJjShMdWNhcyBIdWFuZylcclxuICogQExhc3RFZGl0VGltZTogMjAyMC0xMC0yMCAyMDoxODoyNlxyXG4gKiBAQ29tcGFueTogSW5zcHVyXHJcbiAqIEBWZXJzaW9uOiB2MC4zLnhcclxuICovXHJcblxyXG5pbXBvcnQge1xyXG4gICAgQ29tcG9uZW50LFxyXG4gICAgSW5wdXQsXHJcbiAgICBWaWV3Q2hpbGQsXHJcbiAgICBPbkNoYW5nZXMsXHJcbiAgICBTaW1wbGVDaGFuZ2VzLFxyXG4gICAgRXZlbnRFbWl0dGVyLFxyXG4gICAgT25Jbml0LFxyXG4gICAgSW5qZWN0b3IsXHJcbiAgICBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsXHJcbiAgICBPdXRwdXQsXHJcbiAgICBDaGFuZ2VEZXRlY3RvclJlZixcclxuICAgIFZpZXdFbmNhcHN1bGF0aW9uLFxyXG4gICAgQWZ0ZXJWaWV3SW5pdCxcclxuICAgIFZpZXdDb250YWluZXJSZWYsXHJcbiAgICBmb3J3YXJkUmVmLFxyXG4gICAgQ29tcG9uZW50UmVmLFxyXG4gICAgVHlwZSxcclxuICAgIEVsZW1lbnRSZWYsXHJcbiAgICBOZ1pvbmUsXHJcbiAgICBSZW5kZXJlcjIsXHJcbiAgICBPbkRlc3Ryb3ksXHJcbiAgICBIb3N0TGlzdGVuZXIsXHJcbn0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcclxuXHJcbmltcG9ydCB7IE5HX1ZBTFVFX0FDQ0VTU09SIH0gZnJvbSBcIkBhbmd1bGFyL2Zvcm1zXCI7XHJcbmltcG9ydCB7IE9ic2VydmFibGUsIFN1YnNjcmlwdGlvbiwgb2YsIFN1YmplY3QsIEJlaGF2aW9yU3ViamVjdCB9IGZyb20gXCJyeGpzXCI7XHJcblxyXG5pbXBvcnQgeyBMb2NhbGVTZXJ2aWNlIH0gZnJvbSBcIkBmYXJyaXMvdWktbG9jYWxlXCI7XHJcbmltcG9ydCB7IElSZXNpemVFdmVudCB9IGZyb20gXCJAZmFycmlzL3VpLWRyYWdnYWJsZVwiO1xyXG5pbXBvcnQgeyBNZXNzYWdlclNlcnZpY2UgfSBmcm9tIFwiQGZhcnJpcy91aS1tZXNzYWdlclwiO1xyXG5pbXBvcnQgeyBMb2FkaW5nU2VydmljZSwgTG9hZGluZ0NvbXBvbmVudCB9IGZyb20gXCJAZmFycmlzL3VpLWxvYWRpbmdcIjtcclxuaW1wb3J0IHsgRGF0YVRhYmxlQ29tcG9uZW50IH0gZnJvbSBcIkBmYXJyaXMvdWktZGF0YXRhYmxlXCI7XHJcbmltcG9ydCB7IFRyZWVUYWJsZUNvbXBvbmVudCwgVHJlZU5vZGUgfSBmcm9tIFwiQGZhcnJpcy91aS10cmVldGFibGVcIjtcclxuaW1wb3J0IHsgTGF5b3V0UGFuZWxDb21wb25lbnQgfSBmcm9tIFwiQGZhcnJpcy91aS1sYXlvdXRcIjtcclxuaW1wb3J0IHsgQ29tbW9uVXRpbHMsIERlYnVnU2VydmljZSwgRmFycmlzQ29tcG9uZW50SW5zdGFuY2VTZXJ2aWNlLCBPdmVyTGF5SGlkZGVuU2VydmljZSB9IGZyb20gXCJAZmFycmlzL3VpLWNvbW1vblwiO1xyXG5pbXBvcnQgeyBFbnRpdHlGaWx0ZXIgfSBmcm9tIFwiQGZhcnJpcy91aS1jb21tb24vdHlwZXNcIjtcclxuaW1wb3J0IHsgU2hvcnRjdXRzU2VydmljZSB9IGZyb20gXCJAZmFycmlzL3VpLXNob3J0Y3V0c1wiO1xyXG5pbXBvcnQgeyBJbnB1dEdyb3VwQ29tcG9uZW50IH0gZnJvbSBcIkBmYXJyaXMvdWktaW5wdXQtZ3JvdXBcIjtcclxuaW1wb3J0IHsgTm90aWZ5U2VydmljZSB9IGZyb20gXCJAZmFycmlzL3VpLW5vdGlmeVwiO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIEZBVk9SSVRFX0ZJRUxEX05BTUUsXHJcbiAgICBJTlBVVF9HUk9VUF9JQ09OLFxyXG4gICAgTG9va3VwR3JpZERpc3BsYXlUeXBlLFxyXG4gICAgRXh0SW5mb0Zvcm1hdHRlcixcclxuICAgIEN1c3RvbURhdGFGb3JtYXR0ZXIsXHJcbiAgICBRdWlja1NlbGVjdE9wdGlvbixcclxuICAgIFF1aWNrU2VsZWN0RGVmYXVsdE9wdGlvbnMsXHJcbn0gZnJvbSBcIi4vbG9va3VwLWRpc3BsYXl0eXBlXCI7XHJcbmltcG9ydCB7IExvb2t1cENvbXBvbmVudCB9IGZyb20gXCIuL2xvb2t1cC5jb21wb25lbnRcIjtcclxuaW1wb3J0IHtcclxuICAgIExvb2t1cEdyaWRPcHRpb25zLFxyXG4gICAgbG9va3VwR3JpZERlZmF1bHRzLFxyXG4gICAgTG9va3VwR3JpZFJlc3VsdCxcclxuICAgIE5hdmlnYXRpb25PcHRpb25zLFxyXG4gICAgRGlzcGxheUluZm8sXHJcbiAgICBkaXNwbGF5SW5mb0RlZmF1bHQsXHJcbiAgICBQaWNraW5nUmVzdWx0LFxyXG4gICAgVHJlZUluZm8sXHJcbiAgICBMT0FEX0RBVEFfVFlQRSxcclxuICAgIE9OTFlfU0VMRUNUX0xFQUYsXHJcbiAgICBQZXJzb25hbENvbmZpZyxcclxufSBmcm9tIFwiLi9sb29rdXAtZ3JpZC1vcHRpb25zXCI7XHJcbmltcG9ydCB7IElMb29rdXBIdHRwU2VydmljZSwgU2VydmVyU2lkZVRva2VuIH0gZnJvbSBcIi4vaHR0cC9JTG9va3VwSHR0cFNlcnZpY2VcIjtcclxuaW1wb3J0IHsgTmF2aWdhdGlvbkZpbHRlciB9IGZyb20gXCIuL2h0dHAvUmVtb3RlUGFyYW1zXCI7XHJcbmltcG9ydCB7IExvb2t1cExlZnRDb21wb25lbnQgfSBmcm9tIFwiLi9sb29rdXAtbGVmdC5jb21wb25lbnRcIjtcclxuaW1wb3J0IHsgTG9va3VwRGVmYXVsdE1hcHBpbmcgfSBmcm9tIFwiLi9sb29rdXAtZGVmYXV0LW1hcHBpbmdcIjtcclxuaW1wb3J0IHsgTG9va3VwVXRpbHMgfSBmcm9tIFwiLi91dGlsc1wiO1xyXG5pbXBvcnQgeyBQZXJzb25hbENvbmZpZ1NlcnZpY2UgfSBmcm9tIFwiLi9sb29rdXAtcHJlc29uYWxDb25maWcuc2VydmljZVwiO1xyXG5pbXBvcnQge1xyXG4gICAgVXRpbFNlcnZpY2UsXHJcbiAgICBUcmVlTm9kZUhlbHBlcixcclxuICAgIEZhdm9yaXRlSGVscGVyLFxyXG4gICAgU2VsZWN0aW9uTWFuYWdlcixcclxuICAgIERhdGFUYWJsZUV2ZW50TWFuYWdlcixcclxuICAgIFRyZWVUYWJsZUV2ZW50TWFuYWdlcixcclxuICAgIE11bHRpU2VsZWN0aW9uTWFuYWdlcixcclxuICAgIExvb2t1cEh0dHBNYW5hZ2VyLFxyXG4gICAgTG9va3VwQ29tcG9uZW50TWFuYWdlcixcclxuICAgIExvb2t1cERpYWxvZ01hbmFnZXIsXHJcbiAgICBvblRleHRDaGFuZ2VkLFxyXG4gICAgTG9va3VwU2VsZWN0aW9uU2VydmljZSxcclxufSBmcm9tIFwiLi9zZXJ2aWNlc1wiO1xyXG5pbXBvcnQgeyBjYXRjaEVycm9yLCBtYXAsIHN3aXRjaE1hcCB9IGZyb20gXCJyeGpzL29wZXJhdG9yc1wiO1xyXG5cclxuaW1wb3J0IHsgRXZlbnRNYW5hZ2VyIH0gZnJvbSBcIkBhbmd1bGFyL3BsYXRmb3JtLWJyb3dzZXJcIjtcclxuaW1wb3J0IHsgY2xvbmVEZWVwIH0gZnJvbSBcImxvZGFzaC1lc1wiO1xyXG5cclxuXHJcbmV4cG9ydCBjb25zdCBMT09LVVBHUklEX1ZBTFVFX0FDQ0VTU09SOiBhbnkgPSB7XHJcbiAgICBwcm92aWRlOiBOR19WQUxVRV9BQ0NFU1NPUixcclxuICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IExvb2t1cEdyaWRDb21wb25lbnQpLFxyXG4gICAgbXVsdGk6IHRydWUsXHJcbn07XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiBcImZhcnJpcy1sb29rdXAtZ3JpZFwiLFxyXG4gICAgdGVtcGxhdGVVcmw6IFwiLi9sb29rdXAtZ3JpZC5jb21wb25lbnQuaHRtbFwiLFxyXG4gICAgc3R5bGVVcmxzOiBbXCIuL2xvb2t1cC1ncmlkLmNvbXBvbmVudC5zY3NzXCJdLFxyXG4gICAgcHJvdmlkZXJzOiBbXHJcbiAgICAgICAgTE9PS1VQR1JJRF9WQUxVRV9BQ0NFU1NPUixcclxuICAgICAgICBTaG9ydGN1dHNTZXJ2aWNlLFxyXG4gICAgICAgIExvb2t1cERlZmF1bHRNYXBwaW5nLFxyXG4gICAgICAgIExvb2t1cFV0aWxzLFxyXG4gICAgICAgIFBlcnNvbmFsQ29uZmlnU2VydmljZSxcclxuICAgIF0sXHJcbiAgICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lLFxyXG4gICAgZXhwb3J0QXM6IFwibG9va3VwXCIsXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBMb29rdXBHcmlkQ29tcG9uZW50XHJcbiAgICBleHRlbmRzIExvb2t1cENvbXBvbmVudFxyXG4gICAgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyVmlld0luaXQsIE9uQ2hhbmdlcywgT25EZXN0cm95XHJcbntcclxuICAgIGdyb3VwSWNvbiA9IElOUFVUX0dST1VQX0lDT047XHJcbiAgICBfZGlzcGxheVR5cGUgPSBcIlwiO1xyXG5cclxuICAgIC8qKiDkvb/nlKjooajljZXorr7orqHlmajkuK3nmoTmmL7npLrnsbvlnovjgILlkKbliJnkvb/nlKjlhYPmlbDmja7orr7nva7nmoTmmL7npLrnsbvlnovjgIIg6buY6K6k77yaZmFsc2UgKi9cclxuICAgIEBJbnB1dCgpIGN1c3RvbURpc3BsYXlUeXBlID0gZmFsc2U7XHJcbiAgICBASW5wdXQoKSB2aWV3VHlwZTogXCJ0ZXh0XCIgfCBcInRhZ1wiID0gXCJ0ZXh0XCI7XHJcbiAgICBASW5wdXQoKVxyXG4gICAgZ2V0IGRpc3BsYXlUeXBlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kaXNwbGF5VHlwZTtcclxuICAgIH1cclxuICAgIHNldCBkaXNwbGF5VHlwZSh2YWw6IHN0cmluZykge1xyXG4gICAgICAgIGlmICh2YWwpIHtcclxuICAgICAgICAgICAgY29uc3QgdHlwZXMgPSBPYmplY3QudmFsdWVzKExvb2t1cEdyaWREaXNwbGF5VHlwZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGkgPSB0eXBlcy5maW5kSW5kZXgoKG4pID0+IG4gPT09IHZhbC50b1VwcGVyQ2FzZSgpKTtcclxuICAgICAgICAgICAgaWYgKGkgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKExvb2t1cEdyaWREaXNwbGF5VHlwZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9kaXNwbGF5VHlwZSA9IExvb2t1cEdyaWREaXNwbGF5VHlwZVtrZXlzW2ldXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2Rpc3BsYXlUeXBlID0gdmFsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKiDlkK/nlKjmuIXnqbrmjInpkq4gKi9cclxuICAgIEBJbnB1dCgpIGVuYWJsZUNsZWFyID0gdHJ1ZTtcclxuICAgIC8qKiDmnI3liqHlmajnq6/mjpLluo8gKi9cclxuICAgIEBJbnB1dCgpIHJlbW90ZVNvcnQgPSB0cnVlO1xyXG5cclxuICAgIEBJbnB1dCgpIGNvbmRpdGlvbjogRW50aXR5RmlsdGVyO1xyXG5cclxuICAgIC8qKiDmoJHooajmmL7npLrlhajpgInlpI3pgInmoYbjgIIg6buY6K6k5LiN5pi+56S6ICovXHJcbiAgICBASW5wdXQoKSBzaG93Q2hlY2tBbGwgPSBmYWxzZTtcclxuXHJcbiAgICAvKiog5piv5ZCm5ZCv55So5aSa6YCJICovXHJcbiAgICBASW5wdXQoKSBzaW5nbGVTZWxlY3QgPSB0cnVlO1xyXG4gICAgLyoqIOWkmumAieWIhumalOespiAqL1xyXG4gICAgQElucHV0KCkgbXVsdGlwbGVDaG9pY2VTZXBhcmF0b3IgPSBcIixcIjtcclxuICAgIC8qKiDkuLvplK7lrZfmrrUgKi9cclxuICAgIEBJbnB1dCgpIGlkRmllbGQ/OiBzdHJpbmc7XHJcbiAgICAvKiog5Y+v5Lul5Li65YWD5pWw5o2uSUTjgIF3ZWJhcGlVUkwgKi9cclxuICAgIEBJbnB1dCgpIHVyaT86IHN0cmluZztcclxuICAgIC8qKlxyXG4gICAgICogQkUgUkVTVCBSVUlcclxuICAgICAqIC0g5q2k5aSE6K6+572u5ZCOIHVyaSDlpLHmlYhcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgYmVVcmkgPSBcIlwiO1xyXG4gICAgLyoqXHJcbiAgICAgKiDmmL7npLrov4fmu6Tlt6XlhbfmnaFcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgc2hvd0ZpbHRlckJhciA9IHRydWU7XHJcbiAgICAvKiog5piv5ZCm5ZCv55So5YiG6aG1ICovXHJcbiAgICBASW5wdXQoKSBwYWdpbmF0aW9uID0gdHJ1ZTtcclxuICAgIC8qKiDlvZPliY3pobXntKLlvJXvvIzku44gMOW8gOWniyAqL1xyXG4gICAgQElucHV0KCkgcGFnZUluZGV4ID0gMTtcclxuICAgIC8qKiDmr4/pobXorrDlvZXmlbAgKi9cclxuICAgIEBJbnB1dCgpIHBhZ2VTaXplID0gMjA7XHJcbiAgICAvKiog5Y+v55So5YiG6aG16K6w5b2V5pWw5YiX6KGoICovXHJcbiAgICBASW5wdXQoKSBwYWdlTGlzdCA9IFsxMCwgMjAsIDMwLCA1MCwgMTAwXTtcclxuICAgIC8qKiDmgLvorrDlvZXmlbAgKi9cclxuICAgIEBJbnB1dCgpIHRvdGFsID0gMDtcclxuICAgIC8qKiDlj6/mi5bliqjliJcgKi9cclxuICAgIC8vIEBJbnB1dCgpIHJlc2l6YWJsZUNvbHVtbnMgPSB0cnVlO1xyXG4gICAgLyoqIOaYvuekuuWIl+S/oeaBrywg6buY6K6k5Li6IFtdICovXHJcbiAgICBASW5wdXQoKSBjb2x1bW5zOiBhbnlbXSA9IFtdO1xyXG5cclxuICAgIC8qKiDluK7liqnmn6Xor6LmmK/lkKbkuLrov5znq6/mn6Xor6IgKi9cclxuICAgIEBJbnB1dCgpIHJlbW90ZVNlYXJjaCA9IHRydWU7XHJcblxyXG4gICAgLyoqIOaWh+acrOWPmOWMluWQju+8jOi/m+ihjOacjeWKoeWZqOerr+afpeivoiAqL1xyXG4gICAgQElucHV0KCkgc2VhcmNoT25TZXJ2ZXIgPSB0cnVlO1xyXG4gICAgLyoqIOS4jei/m+ihjOacjeWKoeWZqOafpeivou+8jOacieWVpeeul+WVpSAqL1xyXG4gICAgQElucHV0KCkgbm9zZWFyY2ggPSBmYWxzZTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIOWQr+eUqOS7u+aEj+i+k+WFpeWQju+8jOWAvOmAmui/h+i+k+WFpeaXtuinpuWPkVxyXG4gICAgICovXHJcbiAgICBAT3V0cHV0KCkgY2xlYXJNYXBwaW5ncyA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIOWFgeiuuOi+k+WFpeeahOWtl+espuacgOWkp+mVv+W6puOAglxyXG4gICAgICog5Lu75oSP6L6T5YWl5pe277yM5q2k5bGe5oCn5pyJ5pWIXHJcbiAgICAgKi9cclxuICAgIEBJbnB1dCgpIG1heExlbmd0aDtcclxuXHJcbiAgICBASW5wdXQoKSBtYXBwaW5nRm46IChyb3dEYXRhLCBtYXBGaWVsZHMsIGJpbmRpbmdEYXRhPzogYW55KSA9PiB2b2lkO1xyXG4gICAgLyoqIOaVsOaNruWIl+ihqCAqL1xyXG4gICAgQElucHV0KCkgaXRlbXM6IGFueTtcclxuICAgIC8vIOaUtuiXj+WIl+ihqFxyXG4gICAgQElucHV0KCkgZmF2b3JpdGVJdGVtczogYW55W10gPSBbXTtcclxuICAgIC8qKiDoh6rlrprkuYnmlbDmja4gKi9cclxuICAgIEBJbnB1dCgpIGN1c3RvbURhdGE6IGFueTtcclxuXHJcbiAgICAvKiog57uR5a6a5YC85omA5Zyo55qE5a+56LGhICovXHJcbiAgICBASW5wdXQoKSBiaW5kaW5nRGF0YToge307XHJcblxyXG4gICAgQElucHV0KCkgdHJlZUluZm86IFRyZWVJbmZvO1xyXG4gICAgLyoqIOaYr+WQpuWQr+eUqOe6p+iBlOmAieaLqeaOp+WItumAiemhuSAqL1xyXG4gICAgQElucHV0KCkgZW5hYmxlQ2FzY2FkZSA9IGZhbHNlO1xyXG4gICAgLyoqIOe6p+iBlOaOp+WItum7mOiupOWAvO+8miBlbmFibGUsIHVwLCBkb3duLCBkaXNhYmxlICovXHJcbiAgICBASW5wdXQoKSBjYXNjYWRlU3RhdHVzOiBcImVuYWJsZVwiIHwgXCJ1cFwiIHwgXCJkb3duXCIgfCBcImRpc2FibGVcIiA9IFwiZW5hYmxlXCI7XHJcblxyXG4gICAgQElucHV0KCkgcGxhY2Vob2xkZXIgPSBcIlwiO1xyXG5cclxuICAgIC8qKiDmmL7npLrlt7LpgInorrDlvZXliJfooajjgIIg6buY6K6k5Li6IGZhbHNlIOS4jeaYvuekuiAqL1xyXG4gICAgQElucHV0KCkgc2hvd1NlbGVjdGVkID0gZmFsc2U7XHJcblxyXG4gICAgLyoqIOW6lOeUqOaUtuiXj+WkuSAqL1xyXG4gICAgQElucHV0KCkgdXNlRmF2b3JpdGUgPSBmYWxzZTtcclxuICAgIC8qKiDmlLbol4/mlbDmja7mnaXoh6rkuo7vvJogbG9jYWxlOiDmnKzlnLDlrZjlgqjvvIwgcmVtb3RlOiDmnI3liqHlmajnq6/lrZjlgqggKi9cclxuICAgIEBJbnB1dCgpIGZhdm9yaXRlRGF0YUZyb206IFwibG9jYWxlXCIgfCBcInJlbW90ZVwiID0gXCJyZW1vdGVcIjtcclxuICAgIC8qKiDkvb/nlKjmj5DnpLos5b+r5o236YCJ5oupICovXHJcbiAgICBASW5wdXQoKSB1c2VUaXAgPSBmYWxzZTtcclxuICAgIC8qKiDorrDlvZXnqpflj6PlpKflsI8gKi9cclxuICAgIEBJbnB1dCgpIGlzUmVjb3JkU2l6ZSA9IGZhbHNlO1xyXG5cclxuICAgIC8qKiDlv6vpgJ/pgInmi6kgKi9cclxuICAgIEBJbnB1dCgpIHVzZXJJZDogc3RyaW5nO1xyXG5cclxuICAgIC8qKiDmmK/lkKblkK/nlKjpgInkuK12YWx1ZeWAvOWvueW6lOeahOihjOaVsOaNru+8jOm7mOiupCB0cnVlICovXHJcbiAgICBASW5wdXQoKSBlbmFibGVUb1NlbGVjdCA9IHRydWU7XHJcblxyXG4gICAgQElucHV0KCkgZW5hYmxlRmluZFRleHQgPSBmYWxzZTtcclxuICAgIC8qKiAtMTog5LiN5bGV5byA77ybIDA6IOWFqOmDqOWxleW8gO+8mz4wOiDlsZXlvIDliLDmjIflrprnuqfmlbAgKi9cclxuICAgIEBJbnB1dCgpIGV4cGFuZExldmVsID0gLTE7XHJcblxyXG4gICAgQElucHV0KCkgbmF2VHJlZVRhYmxlT3B0aW9uczogYW55ID0ge307XHJcbiAgICBASW5wdXQoKSB0cmVlVGFibGVPcHRpb25zOiBhbnkgPSB7fTtcclxuICAgIEBJbnB1dCgpIGRhdGFUYWJsZU9wdGlvbnM6IGFueSA9IHt9O1xyXG5cclxuICAgIGRlZmF1bHRUcmVlVGFibGVPcHRpb25zID0ge1xyXG4gICAgICAgIG1heExldmVsOiA5LFxyXG4gICAgICAgIGVuYWJsZUNvbnRleHRNZW51OiBmYWxzZSxcclxuICAgICAgICBjb250ZXh0TWVudUl0ZW1zOiBbXSxcclxuICAgIH07XHJcblxyXG4gICAgLyoqIOagkeW9ouW4ruWKqeaVsOaNruWKoOi9veaWueW8j++8miBkZWZhdWx0OiDlhoXnva7lj5bmlbDvvJsgbG9hZGFsbDog5Yqg6L295omA5pyJIGxheWVybG9hZO+8muWIhuWxguWKoOi9vSAqL1xyXG4gICAgQElucHV0KCkgbG9hZFRyZWVEYXRhVHlwZTogXCJkZWZhdWx0XCIgfCBcImxvYWRhbGxcIiB8IFwibGF5ZXJsb2FkXCIgPSBcImRlZmF1bHRcIjtcclxuXHJcbiAgICAvKiog56qX5Y+j5omT5byA5ZCO56uL5Y2z5Yqg6L295pWw5o2u77yM6buY6K6k5Li6IHRydWUgKi9cclxuICAgIEBJbnB1dCgpIGxvYWREYXRhV2hlbk9wZW4gPSB0cnVlO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICog5a+86Iiq5YiX6KGo77yM5qCR5YiX6KGo5Zyo5biu5Yqp5omT5byA5ZCO6YCJ5Lit55qE5pWw5o2uO1xyXG4gICAgICog6K6+572u5ZCO77yMYHNlbGVjdEZpcnN0SW5OYXZgIOWkseaViO+8gVxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBuYXZTZWxlY3RlZElkcyA9IFwiXCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlr7zoiKrluK7liqnvvIzpgInkuK3nrKwx5p2h5pWw5o2u77yM6buY6K6k5Li6IGZhbHNlO1xyXG4gICAgICog5rOo5oSP77ya5b2TYG5hdlNlbGVjdGVkSWRzYOS4jeS4uuepuuaXtu+8jOatpOWxnuaAp+WkseaViOOAglxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBzZWxlY3RGaXJzdEluTmF2ID0gZmFsc2U7XHJcblxyXG4gICAgLyoqIOWQr+eUqOaehOmAoOWujOaVtOagkei/h+a7pCAqL1xyXG4gICAgQElucHV0KCkgZW5hYmxlRnVsbFRyZWUgPSB0cnVlO1xyXG5cclxuICAgIC8qKiDmmL7npLrmlofmnKzoh6rlrprkuYnlh73mlbAgKi9cclxuICAgIEBJbnB1dCgpIGRpc3BsYXlGb3JtYXR0ZXI6IChcclxuICAgICAgICB2YWx1ZTogc3RyaW5nLFxyXG4gICAgICAgIGRhdGE6IGFueSxcclxuICAgICAgICBpbnN0YW5jZTogYW55XHJcbiAgICApID0+IHN0cmluZyA9IHVuZGVmaW5lZDtcclxuICAgIC8qKiDmmL7npLrmlofmnKzlrZfmrrXpm4blkIjvvIzku6Ug6Iux5paHIOmAl+WPt+malOW8gCAqL1xyXG4gICAgQElucHV0KCkgZGlzcGxheUZpZWxkcyA9IFwiXCI7XHJcbiAgICBASW5wdXQoKSBkaXNwbGF5VGV4dFNlcGFyYXRvciA9IFwiX1wiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICog5biu5Yqp5YWD5pWw5o2uSUTvvIzkuI3kuLrnqbrml7bosIPnlKjmjIflrprnmoRVUklcclxuICAgICAqIC9hcGkvcnVudGltZS9iY2MvdjEuMC9oZWxwL2RhdGEve2hlbHBJZH1cclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgaGVscElkID0gXCJcIjtcclxuICAgIC8qKiDmlofmnKzlr7npvZDmlrnlvI/vvJsgbGVmdCB8IGNlbnRlciB8IHJpZ2h0OyDpu5jorqQgbGVmdCAqL1xyXG4gICAgQElucHV0KCkgdGV4dEFsaWduID0gXCJsZWZ0XCI7XHJcblxyXG4gICAgLyoqIOm8oOagh+a7kei/h+i+k+WFpeahhuaXtuaYvuekuui+k+WFpeahhuWGheeahOaWh+acrOS/oeaBryAqL1xyXG4gICAgQElucHV0KCkgZW5hYmxlVGl0bGUgPSB0cnVlO1xyXG4gICAgQElucHV0KCkgdXNlRXh0ZW5kSW5mbyA9IGZhbHNlO1xyXG4gICAgQElucHV0KCkgZXh0SW5mb0ZpZWxkcyA9IFwiXCI7XHJcbiAgICBASW5wdXQoKSBleHRJbmZvRm9ybWF0dGVyOiBFeHRJbmZvRm9ybWF0dGVyO1xyXG4gICAgQElucHV0KCkgZXh0ZW5kSW5mbyA9IFwiXCI7XHJcbiAgICAvKiogSURFIOiuvuiuoeWZqOiHquWumuS5ieagvOW8j+WMliAyMTAzICovXHJcbiAgICBASW5wdXQoKSBjdXN0b21Gb3JtYXR0ZXI6IEN1c3RvbURhdGFGb3JtYXR0ZXIgPSBudWxsO1xyXG4gICAgQElucHV0KCkgY3VzdG9tTmF2Rm9ybWF0dGVyOiBDdXN0b21EYXRhRm9ybWF0dGVyID0gbnVsbDtcclxuXHJcbiAgICAvKiog6Ieq5a6a5LmJ56Gu5a6a5LqL5Lu2ICovXHJcbiAgICBASW5wdXQoKSBva0hhbmRsZXIgPSBudWxsO1xyXG4gICAgLyoqIOiHquWumuS5ieWPlua2iOS6i+S7tiAqL1xyXG4gICAgQElucHV0KCkgY2FuY2VsSGFuZGxlciA9IG51bGw7XHJcblxyXG4gICAgQElucHV0KCkgdGFnYm94SGVpZ2h0ID0gXCJhdXRvXCI7XHJcbiAgICBASW5wdXQoKSBtYXhUYWdib3hIZWlnaHQ7XHJcblxyXG4gICAgLyoqIOWQr+eUqOiOt+WPluaJgOacieWtkOe6p+aVsOaNrueahOWKn+iDvSAqL1xyXG4gICAgQElucHV0KCkgZW5hYmxlR2V0QWxsQ2hpbGROb2RlcyA9IHRydWU7XHJcblxyXG4gICAgQElucHV0KCkgc2hvcnRjdXRLZXkgPSB7XHJcbiAgICAgICAgLyoqIOaJk+W8gOW4ruWKqeeql+WPoyAqL1xyXG4gICAgICAgIG9wZW46IFwiQXJyb3dSaWdodFwiLFxyXG4gICAgICAgIC8qKiDnoa7orqTpgInmi6nmlbDmja4gKi9cclxuICAgICAgICBjb25maXJtOiBcIkVudGVyXCIsXHJcbiAgICAgICAgLyoqIOaQnOe0ouahhueEpueCuSAqL1xyXG4gICAgICAgIHNlYXJjaEZvY3VzOiBcIkYzXCIsXHJcbiAgICAgICAgLyoqIOmAieS4reS4iuS4gOadoSAqL1xyXG4gICAgICAgIG1vdmVVcDogXCJBcnJvd1VwXCIsXHJcbiAgICAgICAgLyoqIOmAieS4reS4i+S4gOadoSAqL1xyXG4gICAgICAgIG1vdmVEb3duOiBcIkFycm93RG93blwiLFxyXG4gICAgICAgIC8qKiDlsZXlvIDoioLngrkgKi9cclxuICAgICAgICBleHBhbmQ6IFwiQXJyb3dSaWdodFwiLFxyXG4gICAgICAgIC8qKiDmipjlj6DoioLngrkgKi9cclxuICAgICAgICBjb2xsYXBzZTogXCJBcnJvd0xlZnRcIixcclxuICAgICAgICAvKiog5LiL5LiA6aG1ICovXHJcbiAgICAgICAgbmV4dFBhZ2VyOiBcIlBhZ2VEb3duXCIsXHJcbiAgICAgICAgLyoqIOS4iuS4gOmhtSAqL1xyXG4gICAgICAgIHByZXZQYWdlcjogXCJQYWdlVXBcIixcclxuICAgIH07XHJcbiAgICAvKiog5b+r5o236YCJ5oup55u45YWz6YWN572u6aG577yM6buY6K6k5Li6IG51bGwsIOWNs+S4jeWQr+eUqOatpOWKn+iDvSAqL1xyXG4gICAgQElucHV0KCkgcXVpY2tTZWxlY3Q6IFF1aWNrU2VsZWN0T3B0aW9uID0gbnVsbDtcclxuXHJcbiAgICAvKiog5pWw5o2u6YCJ5oup5ZCO77yM5YC85pig5bCE5YmN6Kem5Y+RXHJcbiAgICAgKiDov5Tlm54gT2JzZXJ2YWJsZVxyXG4gICAgICogICAgICBjYW5TZWxlY3Q6IDxib29sZWFuPiAg5piv5ZCm5YWB6K646YCJ5oupXHJcbiAgICAgKiAgICAgIG1lc3NhZ2U6IDxzdHJpbmc+IOS4jeWFgeiuuOmAieaLqeaXtueahOaPkOekuuS/oeaBr1xyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBiZWZvcmVTZWxlY3REYXRhOiAocDoge1xyXG4gICAgICAgIGluc3RhbmNlOiBhbnk7XHJcbiAgICAgICAgZGF0YTogYW55O1xyXG4gICAgfSkgPT4gT2JzZXJ2YWJsZTx7IGNhblNlbGVjdDogYm9vbGVhbjsgbWVzc2FnZTogc3RyaW5nIH0gfCBib29sZWFuPjtcclxuXHJcbiAgICBAT3V0cHV0KCkgc2VsZWN0ZWREYXRhID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgQE91dHB1dCgpIGNsZWFyID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgQE91dHB1dCgpIHNlYXJjaCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIC8vIOW4ruWKqeaWh+acrOahhuS4reWAvOWPmOWMluS6i+S7tlxyXG4gICAgQE91dHB1dCgpIHZhbHVlQ2hhbmdlZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIEBPdXRwdXQoKSBsb2FkU3VjY2VzcyA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgICBAT3V0cHV0KCkgcGFnZXJDaGFuZ2VkID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICAgIEBPdXRwdXQoKSBleHBhbmRUcmVlTm9kZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIEBPdXRwdXQoKSB0ZXh0Q2hhbmdlZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgICBAT3V0cHV0KCkgY2hlY2tlZENoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8e1xyXG4gICAgICAgIGRhdGE6IGFueTtcclxuICAgICAgICBpc0NoZWNrOiBib29sZWFuO1xyXG4gICAgfT4oKTtcclxuXHJcbiAgICBAT3V0cHV0KCkgdGFnUmVtb3ZlZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgICAvKiog5YaF5a655Lit55WZ55m96L656LedICovXHJcbiAgICBjb250YWluZXJNYXJnaW4gPSB7IHRvcDogMCwgYm90dG9tOiA1LCBsZWZ0OiAxMCwgcmlnaHQ6IDEwIH07XHJcblxyXG4gICAgY29udGFpbmVyU3R5bGUgPSB7XHJcbiAgICAgICAgbWFyZ2luTGVmdDogdGhpcy5jb250YWluZXJNYXJnaW4ubGVmdCArIFwicHhcIixcclxuICAgICAgICBtYXJnaW5SaWdodDogdGhpcy5jb250YWluZXJNYXJnaW4ucmlnaHQgKyBcInB4XCIsXHJcbiAgICAgICAgbWFyZ2luVG9wOiB0aGlzLmNvbnRhaW5lck1hcmdpbi50b3AgKyBcInB4XCIsXHJcbiAgICAgICAgbWFyZ2luQm90dG9tOiB0aGlzLmNvbnRhaW5lck1hcmdpbi5ib3R0b20gKyBcInB4XCIsXHJcbiAgICB9O1xyXG5cclxuICAgIF9ncmlkT3B0aW9uczogTG9va3VwR3JpZE9wdGlvbnMgPSBsb29rdXBHcmlkRGVmYXVsdHM7XHJcblxyXG4gICAgZ2V0IGdyaWRPcHRpb25zKCkge1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgdGhpcy51c2VGYXZvcml0ZSAmJlxyXG4gICAgICAgICAgICB0aGlzLmNvbHVtbnMgJiZcclxuICAgICAgICAgICAgdGhpcy5jb2x1bW5zLmxlbmd0aCA+IDAgJiZcclxuICAgICAgICAgICAgIXRoaXMuY29sdW1ucy5maW5kKChpdGVtKSA9PiBpdGVtLmZpZWxkID09PSBGQVZPUklURV9GSUVMRF9OQU1FKVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbHVtbnMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBmaWVsZDogRkFWT1JJVEVfRklFTERfTkFNRSxcclxuICAgICAgICAgICAgICAgIHRpdGxlOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDQwLFxyXG4gICAgICAgICAgICAgICAgYWxpZ246IFwiY2VudGVyXCIsXHJcbiAgICAgICAgICAgICAgICBmaXhlZDogJ3JpZ2h0JyxcclxuICAgICAgICAgICAgICAgIC8vIGZpeGVkV2lkdGg6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZXI6IHRoaXMuZmF2SGVscGVyLmZhdm9yaXRlQ29sdW1uRm9ybWF0dGVyLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fZ3JpZE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHRoaXMuX2dyaWRPcHRpb25zLCB7XHJcbiAgICAgICAgICAgIHNpbmdsZVNlbGVjdDogdGhpcy5zaW5nbGVTZWxlY3QsXHJcbiAgICAgICAgICAgIGlkRmllbGQ6IHRoaXMuaWRGaWVsZCxcclxuICAgICAgICAgICAgdXJpOiB0aGlzLnVyaSxcclxuICAgICAgICAgICAgc2hvd0ZpbHRlckJhcjogdGhpcy5zaG93RmlsdGVyQmFyLFxyXG4gICAgICAgICAgICBwYWdpbmF0aW9uOiB0aGlzLnBhZ2luYXRpb24sXHJcbiAgICAgICAgICAgIHBhZ2VJbmRleDogdGhpcy5wYWdlSW5kZXgsXHJcbiAgICAgICAgICAgIHBhZ2VTaXplOiB0aGlzLnBhZ2VTaXplLFxyXG4gICAgICAgICAgICBwYWdlTGlzdDogdGhpcy5wYWdlTGlzdCxcclxuICAgICAgICAgICAgdG90YWw6IHRoaXMudG90YWwsXHJcbiAgICAgICAgICAgIGl0ZW1zOiB0aGlzLml0ZW1zLFxyXG4gICAgICAgICAgICBjb2x1bW5zOiB0aGlzLmNvbHVtbnMsXHJcbiAgICAgICAgICAgIHJlc2l6YWJsZUNvbHVtbnM6IHRydWUsXHJcbiAgICAgICAgICAgIGZpeGVkSGVhZGVyOiB0cnVlLFxyXG4gICAgICAgICAgICBob3ZlcjogdHJ1ZSxcclxuICAgICAgICAgICAgdHJlZUluZm86IHRoaXMudHJlZUluZm8sXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLl9ncmlkT3B0aW9ucztcclxuICAgIH1cclxuICAgIEBJbnB1dCgpIHNldCBncmlkT3B0aW9ucyhvcHRzKSB7XHJcbiAgICAgICAgdGhpcy5fZ3JpZE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLl9ncmlkT3B0aW9ucywgb3B0cyk7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZENvbHVtbnMgPSB0aGlzLm11bHRpU2VsTWdyLmluaXRTZWxlY3RlZENvbHVtbnMoKTtcclxuICAgIH1cclxuXHJcbiAgICBAVmlld0NoaWxkKFwiY29udGVudENvbnRhaW5lclwiLCB7IHJlYWQ6IFZpZXdDb250YWluZXJSZWYgfSlcclxuICAgIGNvbnRlbnRDb250YWluZXI6IFZpZXdDb250YWluZXJSZWY7XHJcbiAgICBAVmlld0NoaWxkKFwiZmF2b3JpdGVzQ29udGFpbmVyXCIsIHsgcmVhZDogVmlld0NvbnRhaW5lclJlZiB9KVxyXG4gICAgZmF2b3JpdGVzQ29udGFpbmVyOiBWaWV3Q29udGFpbmVyUmVmO1xyXG4gICAgQFZpZXdDaGlsZChcImxlZnRDb250YWluZXJcIiwgeyByZWFkOiBWaWV3Q29udGFpbmVyUmVmIH0pXHJcbiAgICBsZWZ0Q29udGFpbmVyOiBWaWV3Q29udGFpbmVyUmVmO1xyXG4gICAgQFZpZXdDaGlsZChcImNlbnRlckNvbnRhaW5lclwiLCB7IHJlYWQ6IFZpZXdDb250YWluZXJSZWYgfSlcclxuICAgIGNlbnRlckNvbnRhaW5lcjogVmlld0NvbnRhaW5lclJlZjtcclxuICAgIEBWaWV3Q2hpbGQoXCJtdWx0aVNlbGVjdERUXCIpIG11bHRpU2VsZWN0RFQ6IERhdGFUYWJsZUNvbXBvbmVudDtcclxuICAgIEBWaWV3Q2hpbGQoXCJpbnB1dGdyb3VwXCIpIGlucHV0R3JvdXA6IElucHV0R3JvdXBDb21wb25lbnQ7XHJcbiAgICBAVmlld0NoaWxkKFwibGVmdFBhbmVsXCIpIGxlZnRQYW5lbDogTGF5b3V0UGFuZWxDb21wb25lbnQ7XHJcbiAgICBAVmlld0NoaWxkKFwidGFnYm94XCIpIHRhZ2JveDogRWxlbWVudFJlZjtcclxuXHJcbiAgICBAVmlld0NoaWxkKFwib2tidG5cIikgb2tCdXR0b246IEVsZW1lbnRSZWY7XHJcblxyXG4gICAgY29tcG9uZW50UmVmOiBDb21wb25lbnRSZWY8YW55PjtcclxuICAgIGxlZnRDb21wb25lbnRSZWY6IENvbXBvbmVudFJlZjxMb29rdXBMZWZ0Q29tcG9uZW50PjtcclxuICAgIGZhdm9yaXRlc0NvbXBvbmVudFJlZjogQ29tcG9uZW50UmVmPGFueT47XHJcblxyXG4gICAgcHVibGljIGh0dHA6IElMb29rdXBIdHRwU2VydmljZTtcclxuICAgIHB1YmxpYyBtZXNzYWdlclNlcnZpY2U6IE1lc3NhZ2VyU2VydmljZTtcclxuICAgIHB1YmxpYyBsb2FkaW5nU2VydmljZTogTG9hZGluZ1NlcnZpY2U7XHJcbiAgICBsb2FkaW5nOiBMb2FkaW5nQ29tcG9uZW50O1xyXG4gICAgLy8gZGF0YUZpZWxkTWFwczogYW55O1xyXG4gICAgbmF2aWdhdGlvbk9wdGlvbnM6IE5hdmlnYXRpb25PcHRpb25zO1xyXG5cclxuICAgIC8vIOWvvOiIquW4ruWKqeW3puWImeWuveW6plxyXG4gICAgbGVmdFBhbmVsV2lkdGggPSAzMjA7XHJcbiAgICAvLyDlr7zoiKrluK7liqnnqpflj6PmnIDlsI/lrr3luqZcclxuICAgIG5hdkxvb2t1cERpYWxvZ01pbldpZHRoID0gOTYwO1xyXG5cclxuICAgIG5hdmlnYXRpb25GaWx0ZXI6IE5hdmlnYXRpb25GaWx0ZXIgPSBudWxsO1xyXG5cclxuICAgIHN1YnNjcmlwdGlvbnM6IFN1YnNjcmlwdGlvbltdID0gW107XHJcbiAgICBkaWFsb2dPcGVuZWRTdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbjtcclxuICAgIGRpYWxvZ0Nsb3NlZFN1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uO1xyXG5cclxuICAgIGlzVGV4dENoYW5nZSA9IGZhbHNlO1xyXG4gICAgaXNUYWJDaGFuZ2VkID0gZmFsc2U7XHJcblxyXG4gICAgZGlzcGxheUluZm86IERpc3BsYXlJbmZvID0gT2JqZWN0LmFzc2lnbih7fSwgZGlzcGxheUluZm9EZWZhdWx0KTtcclxuXHJcbiAgICB0YWJDaGFuZ2VTdWJzY3JpcHRpb24gPSBudWxsO1xyXG4gICAgLy8g5pqC5a2Y6KGM54K55Ye75pWw5o2uICDnlKjkuo7mlLbol49cclxuICAgIHBlcnNvbmFsQ29uZjogUGVyc29uYWxDb25maWcgPSB7fTtcclxuICAgIGZhdm9yaXRlQ29sdW1uczogYW55W10gPSBbXTtcclxuICAgIC8qKiDkuLTml7bmn6Xor6Llj4LmlbAgKi9cclxuICAgIF9zZWFyY2hTdGF0ZSA9IG51bGw7XHJcbiAgICBhbGxEYXRhOiBhbnkgPSBbXTtcclxuICAgIGdldCBzZWxlY3Rpb25zKCkge1xyXG4gICAgICAgIGNvbnN0IHNlbGVjdEl0ZW1zID0gdGhpcy5sb29rdXBTZWxlY3Rpb25TZXIuZ2V0U2VsZWN0aW9ucygpO1xyXG4gICAgICAgIGlmICh0aGlzLnNpbmdsZVNlbGVjdCkge1xyXG4gICAgICAgICAgICByZXR1cm4gc2VsZWN0SXRlbXNbMF07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGVjdEl0ZW1zO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldCB1c2VQZXJzaW9uYWxDb25mKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnVzZUZhdm9yaXRlIHx8IHRoaXMudXNlVGlwIHx8IHRoaXMuaXNSZWNvcmRTaXplO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBkaXNwbGF5VGV4dExpc3QoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGlzcGxheVRleHQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGlzcGxheVRleHQuc3BsaXQodGhpcy5tdWx0aXBsZUNob2ljZVNlcGFyYXRvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcGVyc29uYWxDb25maWdTZXJ2aWNlOiBQZXJzb25hbENvbmZpZ1NlcnZpY2U7XHJcbiAgICBwdWJsaWMgdXRpbFNlcnZpY2U6IFV0aWxTZXJ2aWNlO1xyXG4gICAgcHVibGljIHRyZWVOb2RlSGVscGVyOiBUcmVlTm9kZUhlbHBlcjtcclxuICAgIHB1YmxpYyBsb2NhbFNlcnZpY2U6IExvY2FsZVNlcnZpY2U7XHJcbiAgICBwdWJsaWMgbm90aWZ5U2VydmljZTogTm90aWZ5U2VydmljZTtcclxuICAgIGFsbENvbHVtbnNUaXRsZSA9IFwi5omA5pyJ5YiXXCI7XHJcbiAgICBtdXN0V3JpdGVTb21ldGhpbmcgPSBcIuivt+i+k+WFpeWFs+mUruWtl+WQjuafpeivouOAglwiO1xyXG4gICAgbXVzdENob29zQWRhdGFyb3cgPSBcIuivt+mAieaLqeS4gOadoeiusOW9le+8gVwiO1xyXG4gICAgYWRkRmF2b3JpdGVTdWNjZXNzID0gXCLmlLbol4/miJDlip/jgIJcIjtcclxuICAgIGRlbEZhdm9yaXRlU3VjY2VzcyA9IFwi56e76Zmk5pS26JeP5oiQ5Yqf44CCXCI7XHJcblxyXG4gICAgc2VhcmNoaW5nID0gZmFsc2U7XHJcbiAgICAvKiog5Li05pe25a2Y5YKo5p+l6K+i57uT5p6c6ZuGICovXHJcbiAgICBfc2VhcmNoUmVzdWx0ID0gbnVsbDtcclxuXHJcbiAgICBsb29rdXBpbml0aWFsaXphdGlvblN1YmplY3QgPSBuZXcgU3ViamVjdCgpO1xyXG5cclxuICAgIC8qKiDlpJrpgInml7bvvIzpgInkuK3nmoTmlbDmja4gKi9cclxuICAgIGN1cnJlbnRTZWxlY3RlZEl0ZW1zOiBPYnNlcnZhYmxlPGFueT4gPSBvZihbXSk7XHJcbiAgICAvKiog5bey6YCJ5pWw5o2u5YiX5L+h5oGvICovXHJcbiAgICBzZWxlY3RlZENvbHVtbnMgPSBbXTtcclxuICAgIGFjdGl2ZVRhYjogc3RyaW5nIHwgXCJkYXRhbGlzdFwiIHwgXCJmYXZvcml0ZVwiIHwgXCJzZWxlY3RlZFwiID0gXCJkYXRhbGlzdFwiO1xyXG5cclxuICAgIGZhdkhlbHBlcjogRmF2b3JpdGVIZWxwZXIgPSBudWxsO1xyXG4gICAgdHRFdmVudE1ncjogVHJlZVRhYmxlRXZlbnRNYW5hZ2VyID0gbnVsbDtcclxuICAgIG11bHRpU2VsTWdyOiBNdWx0aVNlbGVjdGlvbk1hbmFnZXIgPSBudWxsO1xyXG4gICAgaHR0cE1ncjogTG9va3VwSHR0cE1hbmFnZXIgPSBudWxsO1xyXG4gICAgbG9va3VwQ21wTWdyOiBMb29rdXBDb21wb25lbnRNYW5hZ2VyID0gbnVsbDtcclxuICAgIGRpYWxvZ01ncjogTG9va3VwRGlhbG9nTWFuYWdlciA9IG51bGw7XHJcbiAgICBzZWxlY3Rpb25NZ3I6IFNlbGVjdGlvbk1hbmFnZXIgPSBudWxsO1xyXG4gICAgZHRFdmVudE1ncjogRGF0YVRhYmxlRXZlbnRNYW5hZ2VyID0gbnVsbDtcclxuXHJcbiAgICBsb29rdXBTZWxlY3Rpb25TZXI6IExvb2t1cFNlbGVjdGlvblNlcnZpY2UgPSBudWxsO1xyXG5cclxuICAgIGNvbnRyb2xJZCA9IFwiXCI7XHJcbiAgICBzYXZpbmdGYW9yaXRlRGF0YSA9IGZhbHNlO1xyXG4gICAgaXNSZWFkeSA9IGZhbHNlO1xyXG4gICAgc2hvd1RhZ2JveENsZWFyQnV0dG9uID0gZmFsc2U7XHJcbiAgICBoYXNFcnJvciA9IGZhbHNlO1xyXG5cclxuICAgIGlzR2V0QWxsQ2hpZGxOb2RlcyA9IGZhbHNlO1xyXG4gICAgZXZlbnRNYW5hZ2VyOiBFdmVudE1hbmFnZXI7XHJcbiAgICAvKiog6YCJ5Lit6K6w5b2VSUTvvIzoh6rlrprkuYnluK7liqnlj5bmlbDml7bkvb/nlKggKi9cclxuICAgIHNlbGVjdGVkSWRzID0gW107XHJcbiAgICBwcml2YXRlIGxvb2t1cFNlYXJjaElucHV0RXZlbnQgPSBudWxsO1xyXG4gICAgcHJpdmF0ZSBmYXJyaXNJbnN0YW5jZXM6IEZhcnJpc0NvbXBvbmVudEluc3RhbmNlU2VydmljZSA9IG51bGw7XHJcbiAgICAvKiog55So5oi35Yid5aeL6K6+572uICovXHJcbiAgICBwcml2YXRlIF91c2VyU2V0dGluZ3M6IGFueSA9IHt9O1xyXG5cclxuICAgIGdldCB1c2VySW5pdGlhbENvbmZpZygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdXNlclNldHRpbmdzO1xyXG4gICAgfVxyXG5cclxuICAgIF90cmVlSW5mb18gPSBudWxsO1xyXG5cclxuICAgIC8qKiBkaWFsb2cg5YaF5a655Yy65Z+f6auY5bqm44CCIOW8ueeql+aAu+mrmOW6piAtIOWktOmDqOmrmOW6piAtIOiEmumDqOmrmOW6piAtIO+8iOWQr+eUqOaUtuiXjyBUQULlpLTpq5jluqbvvIkgKi9cclxuICAgIGRpYWxvZ0NvbnRlbnRIZWlnaHQgPSAwO1xyXG5cclxuICAgIG92ZXJMYXlTZXJ2aWNlOiBPdmVyTGF5SGlkZGVuU2VydmljZTtcclxuICAgIHByaXZhdGUgZGVidWdTZXI6IERlYnVnU2VydmljZSA9IG51bGw7XHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwdWJsaWMgaW5qZWN0b3I6IEluamVjdG9yLFxyXG4gICAgICAgIHB1YmxpYyBjZnI6IENvbXBvbmVudEZhY3RvcnlSZXNvbHZlcixcclxuICAgICAgICBwdWJsaWMgZWw6IEVsZW1lbnRSZWYsXHJcbiAgICAgICAgcHVibGljIHV0aWxzOiBDb21tb25VdGlscyxcclxuICAgICAgICBwcml2YXRlIGRlZmF1bHRNYXBwaW5nOiBMb29rdXBEZWZhdWx0TWFwcGluZyxcclxuICAgICAgICBwdWJsaWMgY2hhbmdlRGV0ZWN0b3I6IENoYW5nZURldGVjdG9yUmVmLFxyXG4gICAgICAgIHB1YmxpYyBzaG9ydGN1dHM6IFNob3J0Y3V0c1NlcnZpY2UsXHJcbiAgICAgICAgcHVibGljIGxvb2t1cFV0aWxzOiBMb29rdXBVdGlscyxcclxuICAgICAgICBwcml2YXRlIHpvbmU6IE5nWm9uZSxcclxuICAgICAgICBwcml2YXRlIHJlbmRlcjI6IFJlbmRlcmVyMlxyXG4gICAgKSB7XHJcbiAgICAgICAgc3VwZXIoaW5qZWN0b3IsIGVsLCBjaGFuZ2VEZXRlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVJbnN0YW5jZSgpO1xyXG4gICAgICAgIHRoaXMuY3VycmVudFNlbGVjdGVkSXRlbXMgPSB0aGlzLmxvb2t1cFNlbGVjdGlvblNlci5zZWxlY3RlZCQ7XHJcbiAgICAgICAgdGhpcy5ldmVudE1hbmFnZXIgPSB0aGlzLmluamVjdG9yLmdldChFdmVudE1hbmFnZXIpO1xyXG4gICAgICAgIHRoaXMuZmFycmlzSW5zdGFuY2VzID0gdGhpcy5pbmplY3Rvci5nZXQoXHJcbiAgICAgICAgICAgIEZhcnJpc0NvbXBvbmVudEluc3RhbmNlU2VydmljZSxcclxuICAgICAgICAgICAgbnVsbFxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHRoaXMub3ZlckxheVNlcnZpY2UgPSBuZXcgT3ZlckxheUhpZGRlblNlcnZpY2UoKTtcclxuXHJcbiAgICAgICAgdGhpcy5kZWJ1Z1NlciA9IHRoaXMuaW5qZWN0b3IuZ2V0KERlYnVnU2VydmljZSwgbnVsbCk7XHJcbiAgICAgICAgaWYgKHRoaXMuZGVidWdTZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5kZWJ1Z1Nlci51c2VEZWJ1Z01vZGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgd3JpdGVDb25zb2xlKG1zZywgdHlwZTogJ2luZm8nfCdsb2cnfCd3YXJuJ3wnZXJyb3InID0gJ3dhcm4nKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGVidWdTZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5kZWJ1Z1Nlclt0eXBlXShtc2cpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNhY2hlVXNlckNvbmZpZygpIHtcclxuICAgICAgICB0aGlzLl91c2VyU2V0dGluZ3MuX3RpdGxlID0gdGhpcy50aXRsZTtcclxuICAgICAgICB0aGlzLmRpc3BsYXlJbmZvLnRpdGxlID0gdGhpcy50aXRsZTtcclxuICAgICAgICB0aGlzLl91c2VyU2V0dGluZ3MuX2NvbHVtbnMgPSB0aGlzLmRlZXBDbG9uZSh0aGlzLmNvbHVtbnMgfHwgW10pO1xyXG4gICAgICAgIHRoaXMuX3VzZXJTZXR0aW5ncy5nZXRDb2x1bW5zID0gKCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdXNlclNldHRpbmdzLl9jb2x1bW5zO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuX3VzZXJTZXR0aW5ncy5yZXNldCA9ICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy50aXRsZSA9IHRoaXMuX3VzZXJTZXR0aW5ncy5fdGl0bGU7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzcGxheUluZm8udGl0bGUgPSB0aGlzLnRpdGxlO1xyXG4gICAgICAgICAgICB0aGlzLmNvbHVtbnMgPSB0aGlzLl91c2VyU2V0dGluZ3MuZ2V0Q29sdW1ucygpO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBkZWVwQ2xvbmUob2JqKSB7XHJcbiAgICAgICAgaWYgKG9iaiA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgY2xvbmUgPSBPYmplY3QuYXNzaWduKHt9LCBvYmopO1xyXG4gICAgICAgIE9iamVjdC5rZXlzKGNsb25lKS5mb3JFYWNoKFxyXG4gICAgICAgICAgICAoa2V5KSA9PlxyXG4gICAgICAgICAgICAgICAgKGNsb25lW2tleV0gPVxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGVvZiBvYmpba2V5XSA9PT0gXCJvYmplY3RcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMuZGVlcENsb25lKG9ialtrZXldKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG9ialtrZXldKVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkob2JqKSkge1xyXG4gICAgICAgICAgICBjbG9uZS5sZW5ndGggPSBvYmoubGVuZ3RoO1xyXG4gICAgICAgICAgICByZXR1cm4gQXJyYXkuZnJvbShjbG9uZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjbG9uZTtcclxuICAgIH1cclxuXHJcbiAgICBuZ09uSW5pdCgpIHtcclxuICAgICAgICBzdXBlci5uZ09uSW5pdCgpO1xyXG4gICAgICAgIHRoaXMuY2FjaGVVc2VyQ29uZmlnKCk7XHJcbiAgICAgICAgaWYgKCF0aGlzLmxvYWRUcmVlRGF0YVR5cGUpIHtcclxuICAgICAgICAgICAgdGhpcy5sb2FkVHJlZURhdGFUeXBlID0gXCJkZWZhdWx0XCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmNoZWNrR3JpZE9wdGlvbnMoKTtcclxuICAgICAgICB0aGlzLmRpc3BsYXlJbmZvLnRpdGxlID0gdGhpcy50aXRsZTtcclxuICAgICAgICAvKiog5Lyg6YCS5LiK5LiL5paHICovXHJcbiAgICAgICAgaWYgKHRoaXMuaHR0cCkge1xyXG4gICAgICAgICAgICB0aGlzLmh0dHAuY29udGV4dCA9IHRoaXMuY29udGV4dDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuYWxsQ29sdW1uc1RpdGxlID0gdGhpcy5sb2NhbFNlcnZpY2UuZ2V0VmFsdWUoXCJsb29rdXAuYWxsQ29sdW1uc1wiKTtcclxuICAgICAgICB0aGlzLm11c3RXcml0ZVNvbWV0aGluZyA9IHRoaXMubG9jYWxTZXJ2aWNlLmdldFZhbHVlKFxyXG4gICAgICAgICAgICBcImxvb2t1cC5tdXN0V3JpdGVTb21ldGhpbmdcIlxyXG4gICAgICAgICk7XHJcbiAgICAgICAgdGhpcy5tdXN0Q2hvb3NBZGF0YXJvdyA9IHRoaXMubG9jYWxTZXJ2aWNlLmdldFZhbHVlKFxyXG4gICAgICAgICAgICBcImxvb2t1cC5tdXN0Q2hvb3NBZGF0YXJvd1wiXHJcbiAgICAgICAgKTtcclxuICAgICAgICB0aGlzLmFkZEZhdm9yaXRlU3VjY2VzcyA9XHJcbiAgICAgICAgICAgIHRoaXMubG9jYWxTZXJ2aWNlLmdldFZhbHVlKFwibG9va3VwLmZhdm9yaXRlSW5mby5hZGRGYXZcIikgfHxcclxuICAgICAgICAgICAgdGhpcy5hZGRGYXZvcml0ZVN1Y2Nlc3M7XHJcbiAgICAgICAgdGhpcy5kZWxGYXZvcml0ZVN1Y2Nlc3MgPVxyXG4gICAgICAgICAgICB0aGlzLmxvY2FsU2VydmljZS5nZXRWYWx1ZShcImxvb2t1cC5mYXZvcml0ZUluZm8uY2FuY2VsRmF2XCIpIHx8XHJcbiAgICAgICAgICAgIHRoaXMuZGVsRmF2b3JpdGVTdWNjZXNzO1xyXG5cclxuICAgICAgICB0aGlzLmRpYWxvZ01nci5vbkRpYWxvZ0NyZWF0ZWQoKTtcclxuXHJcbiAgICAgICAgdGhpcy5fdHJlZUluZm9fID0gdGhpcy50cmVlSW5mbyA/IGNsb25lRGVlcCh0aGlzLnRyZWVJbmZvKSA6IG51bGw7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnF1aWNrU2VsZWN0KSB7XHJcbiAgICAgICAgICAgIHRoaXMucXVpY2tTZWxlY3QgPSBPYmplY3QuYXNzaWduKFF1aWNrU2VsZWN0RGVmYXVsdE9wdGlvbnMsIHRoaXMucXVpY2tTZWxlY3QgfHwge30pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkRlc3Ryb3koKSB7XHJcbiAgICAgICAgc3VwZXIubmdPbkRlc3Ryb3koKTtcclxuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMuZm9yRWFjaCgobikgPT4ge1xyXG4gICAgICAgICAgICBpZiAobikge1xyXG4gICAgICAgICAgICAgICAgbi51bnN1YnNjcmliZSgpO1xyXG4gICAgICAgICAgICAgICAgbiA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0aW9uTWdyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uTWdyLmRlc3Ryb3koKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucyA9IFtdO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5mYXJyaXNJbnN0YW5jZXMpIHtcclxuICAgICAgICAgICAgdGhpcy5mYXJyaXNJbnN0YW5jZXMuZGVzdHJveSh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMubG9va3VwU2VhcmNoSW5wdXRFdmVudCkge1xyXG4gICAgICAgICAgICB0aGlzLmxvb2t1cFNlYXJjaElucHV0RXZlbnQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5sb29rdXBVdGlscy5kZXN0cm95KCk7XHJcblxyXG4gICAgICAgIHRoaXMub3ZlckxheVNlcnZpY2UuZGVzdG9yeSh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMub3ZlckxheVNlcnZpY2UgPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpIHtcclxuICAgICAgICBpZiAoY2hhbmdlcy5jb2x1bW5zICYmICFjaGFuZ2VzLmNvbHVtbnMuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FjaGVVc2VyQ29uZmlnKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcclxuICAgICAgICB0aGlzLmxvb2t1cFNlYXJjaElucHV0RXZlbnQgPSBvblRleHRDaGFuZ2VkLmJpbmQodGhpcykoKTtcclxuXHJcbiAgICAgICAgLy8g5Yid5aeL5YyW5Liq5oCn5YyW6YWN572uXHJcbiAgICAgICAgaWYgKHRoaXMudXNlUGVyc2lvbmFsQ29uZikge1xyXG4gICAgICAgICAgICB0aGlzLmZhdkhlbHBlci5pbml0UGVyc29uYWxJbmZvKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy51c2VFeHRlbmRJbmZvKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGpzb25EYXRhID0gdGhpcy5zZWxlY3Rpb25NZ3IuZ2V0QmluZGluZ0RhdGEoKTtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVFeHRlbmRJbmZvKGpzb25EYXRhLCBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy52aWV3VHlwZSA9PT0gXCJ0ZXh0XCIpIHtcclxuICAgICAgICAgICAgLy8gdGhpcy5zaG9ydGN1dHMuYWRkKHtcclxuICAgICAgICAgICAgLy8gICAgIGtleTogJ0YyJyxcclxuICAgICAgICAgICAgLy8gICAgIHRhcmdldDogdGhpcy5pbnB1dEdyb3VwLnRleHRib3gubmF0aXZlRWxlbWVudCxcclxuICAgICAgICAgICAgLy8gICAgIGNvbW1hbmQ6ICgpID0+IHtcclxuICAgICAgICAgICAgLy8gICAgICAgICB0aGlzLnNob3dEaWFsb2coKTtcclxuICAgICAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAgICAgLy8gfSk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyMi5saXN0ZW4oXHJcbiAgICAgICAgICAgICAgICB0aGlzLmlucHV0R3JvdXAudGV4dGJveC5uYXRpdmVFbGVtZW50LFxyXG4gICAgICAgICAgICAgICAgXCJrZXlkb3duLkYyXCIsXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dEaWFsb2cuYmluZCh0aGlzKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJNb3VzZUV2ZW50Rm9yVGFnVmlldygpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMudGFnYm94SGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlbCA9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YWdib3gubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm11bHRpLW1vcmVcIik7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGJoID0gdGhpcy50YWdib3hIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICBpZiAodGJoICE9PSBcImF1dG9cIikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRiaCArPSBcInB4XCI7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1heFRhZ2JveEhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcjIuc2V0U3R5bGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibWF4SGVpZ2h0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgJHt0aGlzLm1heFRhZ2JveEhlaWdodH1weGBcclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIyLnNldFN0eWxlKGVsLCBcImhlaWdodFwiLCB0YmgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5lbCAmJiB0aGlzLmZhcnJpc0luc3RhbmNlcykge1xyXG4gICAgICAgICAgICB0aGlzLmZhcnJpc0luc3RhbmNlcy5hZGQodGhpcy5lbC5uYXRpdmVFbGVtZW50LCB0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhdGVJbnN0YW5jZSgpIHtcclxuICAgICAgICB0aGlzLmh0dHAgPSB0aGlzLmluamVjdG9yLmdldChTZXJ2ZXJTaWRlVG9rZW4sIG51bGwpO1xyXG4gICAgICAgIHRoaXMubWVzc2FnZXJTZXJ2aWNlID0gdGhpcy5pbmplY3Rvci5nZXQoTWVzc2FnZXJTZXJ2aWNlKTtcclxuICAgICAgICB0aGlzLmxvYWRpbmdTZXJ2aWNlID0gdGhpcy5pbmplY3Rvci5nZXQoTG9hZGluZ1NlcnZpY2UpO1xyXG4gICAgICAgIHRoaXMubm90aWZ5U2VydmljZSA9IHRoaXMuaW5qZWN0b3IuZ2V0KE5vdGlmeVNlcnZpY2UsIG51bGwpO1xyXG5cclxuICAgICAgICB0aGlzLnBlcnNvbmFsQ29uZmlnU2VydmljZSA9IHRoaXMuaW5qZWN0b3IuZ2V0KFxyXG4gICAgICAgICAgICBQZXJzb25hbENvbmZpZ1NlcnZpY2UsXHJcbiAgICAgICAgICAgIG51bGxcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICB0aGlzLmxvb2t1cFNlbGVjdGlvblNlciA9IG5ldyBMb29rdXBTZWxlY3Rpb25TZXJ2aWNlKHRoaXMpO1xyXG5cclxuICAgICAgICB0aGlzLnV0aWxTZXJ2aWNlID0gbmV3IFV0aWxTZXJ2aWNlKHRoaXMpO1xyXG4gICAgICAgIHRoaXMubG9jYWxTZXJ2aWNlID0gdGhpcy5pbmplY3Rvci5nZXQoTG9jYWxlU2VydmljZSk7XHJcbiAgICAgICAgdGhpcy50cmVlTm9kZUhlbHBlciA9IG5ldyBUcmVlTm9kZUhlbHBlcih0aGlzKTtcclxuXHJcbiAgICAgICAgdGhpcy5mYXZIZWxwZXIgPSBuZXcgRmF2b3JpdGVIZWxwZXIodGhpcyk7XHJcbiAgICAgICAgdGhpcy50dEV2ZW50TWdyID0gbmV3IFRyZWVUYWJsZUV2ZW50TWFuYWdlcih0aGlzKTtcclxuICAgICAgICB0aGlzLm11bHRpU2VsTWdyID0gbmV3IE11bHRpU2VsZWN0aW9uTWFuYWdlcih0aGlzKTtcclxuICAgICAgICB0aGlzLmh0dHBNZ3IgPSBuZXcgTG9va3VwSHR0cE1hbmFnZXIodGhpcyk7XHJcbiAgICAgICAgdGhpcy5sb29rdXBDbXBNZ3IgPSBuZXcgTG9va3VwQ29tcG9uZW50TWFuYWdlcih0aGlzKTtcclxuICAgICAgICB0aGlzLmRpYWxvZ01nciA9IG5ldyBMb29rdXBEaWFsb2dNYW5hZ2VyKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0aW9uTWdyID0gbmV3IFNlbGVjdGlvbk1hbmFnZXIodGhpcyk7XHJcbiAgICAgICAgdGhpcy5kdEV2ZW50TWdyID0gbmV3IERhdGFUYWJsZUV2ZW50TWFuYWdlcih0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBzaG93RGlhbG9nKCk6IGFueSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGlzYWJsZWQgfHwgdGhpcy5yZWFkb25seSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNlbGVjdGlvbk1nci5pbml0RGlzcGxheVZhbHVlKCk7XHJcbiAgICAgICAgdGhpcy5kaWN0UGlja2luZ1N1YnNjcmlwdGlvbiA9IHRoaXMuZGljdFBpY2tpbmcoe1xyXG4gICAgICAgICAgICBpbnN0YW5jZTogdGhpcyxcclxuICAgICAgICB9KS5zdWJzY3JpYmUoKHByOiBQaWNraW5nUmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlhbG9nTWdyLmNhbk9wZW5EaWFsb2cocHIpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIOWIpOaWreaYr+WQpuS4uuWPjOWIl+ihqOW4ruWKqSAqL1xyXG4gICAgaXNEb3VibGxlTGlzdCgpIHtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICB0aGlzLmRpc3BsYXlUeXBlID09PSBMb29rdXBHcmlkRGlzcGxheVR5cGUuTmF2TGlzdCB8fFxyXG4gICAgICAgICAgICB0aGlzLmRpc3BsYXlUeXBlID09PSBMb29rdXBHcmlkRGlzcGxheVR5cGUuTmF2VHJlZUxpc3RcclxuICAgICAgICApO1xyXG4gICAgfVxyXG4gICAgLyoqIOWIpOaWreaYr+WQpuaYvuekuuS4uuagkeW4ruWKqSAqL1xyXG4gICAgaXNUcmVlKCkge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIHRoaXMuZGlzcGxheVR5cGUudG9VcHBlckNhc2UoKSA9PT0gTG9va3VwR3JpZERpc3BsYXlUeXBlLlRyZWVMaXN0XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBvblJlc2l6ZWQoZTogYW55KSB7XHJcbiAgICAgICAgdGhpcy5yZXNpemVDbXAoZS5zaXplKTtcclxuICAgICAgICB0aGlzLnJlc2l6ZWQuZW1pdChlLnNpemUpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uUmVzaXppbmcocG9zOiBJUmVzaXplRXZlbnQpIHtcclxuICAgICAgICB0aGlzLnJlc2l6aW5nLmVtaXQocG9zLnNpemUpO1xyXG4gICAgICAgIHRoaXMucmVzaXplQ21wKHBvcy5zaXplKTtcclxuICAgICAgICBpZiAodGhpcy5pc0RvdWJsbGVMaXN0KCkgJiYgdGhpcy5sZWZ0Q29tcG9uZW50UmVmKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGVmdENvbXBvbmVudFJlZi5pbnN0YW5jZS5yZXNpemUoe1xyXG4gICAgICAgICAgICAgICAgd2lkdGg6IHRoaXMubGVmdFBhbmVsLndpZHRoLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiB0aGlzLmRpYWxvZ01nci5nZXRIZWlnaHQoKSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uTWF4RGlhbG9nKHBvczogSVJlc2l6ZUV2ZW50KSB7XHJcbiAgICAgICAgdGhpcy5yZXNpemVDbXAocG9zLnNpemUpO1xyXG4gICAgICAgIGlmICh0aGlzLmxlZnRQYW5lbCkge1xyXG4gICAgICAgICAgICB0aGlzLmxlZnRDb21wb25lbnRSZWYuaW5zdGFuY2UucmVzaXplKHtcclxuICAgICAgICAgICAgICAgIHdpZHRoOiB0aGlzLmxlZnRQYW5lbC53aWR0aCxcclxuICAgICAgICAgICAgICAgIGhlaWdodDogdGhpcy5kaWFsb2dNZ3IuZ2V0SGVpZ2h0KCksXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmRpYWxvZ0hlaWdodCA9IHBvcy5zaXplLmhlaWdodDtcclxuICAgICAgICB0aGlzLmRpYWxvZ0NvbnRlbnRIZWlnaHQgPSB0aGlzLmRpYWxvZ01nci5yZXNldERpYWxvZ0NvbnRlbnRIZWlnaHQoKTtcclxuICAgICAgICB0aGlzLmRpYWxvZ01heGVkLmVtaXQocG9zLnNpemUpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlc2l6ZUNtcChzaXplPzogYW55KSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmNvbXBvbmVudFJlZiB8fCAhdGhpcy5jb21wb25lbnRSZWYuaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFzaXplKSB7XHJcbiAgICAgICAgICAgIHNpemUgPSB0aGlzLmRpYWxvZy5zaXplO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBfc2l6ZSA9IHtcclxuICAgICAgICAgICAgd2lkdGg6XHJcbiAgICAgICAgICAgICAgICBzaXplLndpZHRoIC1cclxuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyTWFyZ2luLmxlZnQgLVxyXG4gICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXJNYXJnaW4ucmlnaHQsXHJcbiAgICAgICAgICAgIGhlaWdodDogdGhpcy5kaWFsb2dNZ3IuZ2V0SGVpZ2h0KCksXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMudXNlRmF2b3JpdGUgJiYgdGhpcy5mYXZvcml0ZXNDb21wb25lbnRSZWYpIHtcclxuICAgICAgICAgICAgdGhpcy5mYXZvcml0ZXNDb21wb25lbnRSZWYuaW5zdGFuY2UucmVzaXplKF9zaXplKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuaXNSZWNvcmRTaXplKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGVyc29uYWxDb25mLnNpemUgPSB0aGlzLmRpYWxvZy5zaXplO1xyXG4gICAgICAgICAgICB0aGlzLnBlcnNvbmFsQ29uZmlnU2VydmljZS51cGRhdGVQZXJzb25hbENvbmZpZyh7XHJcbiAgICAgICAgICAgICAgICBzaXplOiB0aGlzLmRpYWxvZy5zaXplLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuaXNEb3VibGxlTGlzdCgpKSB7XHJcbiAgICAgICAgICAgIF9zaXplLndpZHRoID0gc2l6ZS53aWR0aCAtIHRoaXMubGVmdFBhbmVsLndpZHRoIC0gMjc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmNvbXBvbmVudFJlZi5pbnN0YW5jZS5yZXNpemUoX3NpemUpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY2hlY2tHcmlkT3B0aW9ucygpIHtcclxuICAgICAgICBpZiAoIXRoaXMuZ3JpZE9wdGlvbnMuaWRGaWVsZCkge1xyXG4gICAgICAgICAgICB0aGlzLndyaXRlQ29uc29sZShcIuacquiuvue9ruS4u+mUruWtl+autSBpZEZpZWxkXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmJlZm9yZVNlbGVjdERhdGEpIHtcclxuICAgICAgICAgICAgdGhpcy5iZWZvcmVTZWxlY3REYXRhID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9mKHRydWUpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgY3R4TWVudUxhbmd1YWdlcyA9XHJcbiAgICAgICAgICAgIHRoaXMubG9jYWxTZXJ2aWNlLmdldFZhbHVlKFwibG9va3VwLmNvbnRleHRNZW51XCIpO1xyXG5cclxuICAgICAgICB0aGlzLnRyZWVUYWJsZU9wdGlvbnMgPSBPYmplY3QuYXNzaWduKFxyXG4gICAgICAgICAgICB7IGxhbmd1YWdlOiBjdHhNZW51TGFuZ3VhZ2VzIH0sXHJcbiAgICAgICAgICAgIHRoaXMuZGVmYXVsdFRyZWVUYWJsZU9wdGlvbnMsXHJcbiAgICAgICAgICAgIHRoaXMudHJlZVRhYmxlT3B0aW9ucyB8fCB7fVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgLy8gdGhpcy5kYXRhVGFibGVPcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5kZWZhdWx0VHJlZVRhYmxlT3B0aW9ucywgdGhpcy5kYXRhVGFibGVPcHRpb25zKTtcclxuICAgICAgICAvLyB0aGlzLm5hdlRyZWVUYWJsZU9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmRlZmF1bHRUcmVlVGFibGVPcHRpb25zLCB0aGlzLm5hdlRyZWVUYWJsZU9wdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldENvbXBvbmVudFR5cGUoKTogVHlwZTxhbnk+IHtcclxuICAgICAgICBpZiAoIXRoaXMuZGlzcGxheVR5cGUpIHtcclxuICAgICAgICAgICAgdGhpcy5kaXNwbGF5VHlwZSA9IFwiTElTVFwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzd2l0Y2ggKHRoaXMuZGlzcGxheVR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSBMb29rdXBHcmlkRGlzcGxheVR5cGUuTGlzdDpcclxuICAgICAgICAgICAgY2FzZSBMb29rdXBHcmlkRGlzcGxheVR5cGUuTmF2TGlzdDpcclxuICAgICAgICAgICAgY2FzZSBMb29rdXBHcmlkRGlzcGxheVR5cGUuTmF2VHJlZUxpc3Q6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gRGF0YVRhYmxlQ29tcG9uZW50O1xyXG4gICAgICAgICAgICBjYXNlIExvb2t1cEdyaWREaXNwbGF5VHlwZS5UcmVlTGlzdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBUcmVlVGFibGVDb21wb25lbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNob3dMb2FkaW5nKG1zZyA9IFwiXCIpIHtcclxuICAgICAgICBpZiAodGhpcy5kaWFsb2cgJiYgdGhpcy5kaWFsb2cubW9kYWxDb250ZW50ICYmICF0aGlzLmxvYWRpbmcpIHtcclxuICAgICAgICAgICAgY29uc3Qgb3B0cyA9IHtcclxuICAgICAgICAgICAgICAgIGNvbnRhaW5lcjogdGhpcy5kaWFsb2cubW9kYWxDb250ZW50LFxyXG4gICAgICAgICAgICAgICAgZGVsYXk6IDIwMCxcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGlmIChtc2cpIHtcclxuICAgICAgICAgICAgICAgIG9wdHNbXCJtZXNzYWdlXCJdID0gbXNnO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSB0aGlzLmxvYWRpbmdTZXJ2aWNlLnNob3cob3B0cyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gdGhpcy5sb2FkaW5nU2VydmljZS5zaG93KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlTG9hZGluZygpIHtcclxuICAgICAgICBpZiAodGhpcy5sb2FkaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9hZGluZy5jbG9zZSgpO1xyXG4gICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5sb2FkaW5nU2VydmljZS5jbGVhckFsbCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFNlYXJjaENvbHVtbnMocmVzZGF0YTogYW55KSB7XHJcbiAgICAgICAgY29uc3QgY29scyA9IHJlc2RhdGEuY29sdW1ucyB8fCB0aGlzLmNvbHVtbnM7XHJcbiAgICAgICAgaWYgKHJlc2RhdGEuc2VhcmNoRmllbGRzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXNkYXRhLnNlYXJjaEZpZWxkcy5tYXAoKHNmKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjID0gY29scy5maW5kKFxyXG4gICAgICAgICAgICAgICAgICAgIChjb2wpID0+IGNvbC5maWVsZC50b0xvd2VyQ2FzZSgpID09PSBzZi52YWx1ZS50b0xvd2VyQ2FzZSgpXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgaWYgKGMpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZi5sYWJlbCA9IGMudGl0bGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2Y7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoY29scykge1xyXG4gICAgICAgICAgICByZXR1cm4gY29sc1xyXG4gICAgICAgICAgICAgICAgLmZpbHRlcigoYykgPT4gYy5zZWFyY2hGaWVsZClcclxuICAgICAgICAgICAgICAgIC5tYXAoKGNvbCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBjb2wudGl0bGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBjb2wuZmllbGQsXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpbml0T3B0aW9ucyhyZXNEYXRhOiBMb29rdXBHcmlkUmVzdWx0KSB7XHJcbiAgICAgICAgbGV0IG9ic2VyID0gb2YodHJ1ZSk7XHJcbiAgICAgICAgdGhpcy5ncmlkT3B0aW9ucy5zZWFyY2hGaWVsZHMgPSB0aGlzLmdldFNlYXJjaENvbHVtbnMocmVzRGF0YSk7XHJcbiAgICAgICAgaWYgKHJlc0RhdGEpIHtcclxuICAgICAgICAgICAgLy8g5aaC5p6c57uE5Lu25Lit5pyq6K6+572u5pi+56S65YiX77yM5YiZ5L2/55So5pyN5Yqh5Zmo56uv6L+U5Zue55qE6K6+572u77ybIOWQpuWImeWwhuS9v+eUqOe7hOS7tuS4remFjee9rueahOWxleekuuWIl1xyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAoIXRoaXMuY29sdW1ucyB8fCAhdGhpcy5jb2x1bW5zLmxlbmd0aCkgJiZcclxuICAgICAgICAgICAgICAgIHJlc0RhdGEuY29sdW1ucyAmJlxyXG4gICAgICAgICAgICAgICAgcmVzRGF0YS5jb2x1bW5zLmxlbmd0aFxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29sdW1ucyA9IHJlc0RhdGEuY29sdW1ucztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5zZXRMb29rdXBUaXRsZVRleHQocmVzRGF0YSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICB0aGlzLmlzRG91YmxsZUxpc3QoKSAmJlxyXG4gICAgICAgICAgICAgICAgdGhpcy5kaWFsb2dXaWR0aCA8IHRoaXMubmF2TG9va3VwRGlhbG9nTWluV2lkdGggJiZcclxuICAgICAgICAgICAgICAgICF0aGlzLmlzUmVjb3JkU2l6ZVxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nV2lkdGggPSB0aGlzLm5hdkxvb2t1cERpYWxvZ01pbldpZHRoO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaWFsb2cucmVTaXplKHsgd2lkdGg6IHRoaXMuZGlhbG9nV2lkdGggfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5jdXN0b21EaXNwbGF5VHlwZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5VHlwZSA9XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzRGF0YS5kaXNwbGF5VHlwZSB8fCB0aGlzLmRpc3BsYXlUeXBlIHx8IFwiTElTVFwiO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VEZXRlY3Rvci5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvb2t1cENtcE1nci5jcmVhdGVDb21wb25lbnRXaXRoU2VydmVyRGF0YShyZXNEYXRhKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5pc0RvdWJsbGVMaXN0KCkgJiZcclxuICAgICAgICAgICAgICAgIHJlc0RhdGEubmF2aWdhdGlvbiAmJlxyXG4gICAgICAgICAgICAgICAgIXRoaXMubGVmdENvbXBvbmVudFJlZlxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubmF2aWdhdGlvbk9wdGlvbnMgPSByZXNEYXRhLm5hdmlnYXRpb247XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5hdmlnYXRpb25PcHRpb25zLmhvdmVyID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMubmF2aWdhdGlvbk9wdGlvbnMuc2VhcmNoRmllbGRzID0gdGhpcy5nZXRTZWFyY2hDb2x1bW5zKFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmF2aWdhdGlvbk9wdGlvbnNcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAvLyB1cGRhdGUgY29sdW1ucyBmb3JtYXR0ZXJcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmN1c3RvbU5hdkZvcm1hdHRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmF2aWdhdGlvbk9wdGlvbnMuY29sdW1ucy5mb3JFYWNoKChjb2wpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY3VzdG9tTmF2Rm9ybWF0dGVyW2NvbC5maWVsZF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbC5mb3JtYXR0ZXIgPSB0aGlzLmN1c3RvbU5hdkZvcm1hdHRlcltjb2wuZmllbGRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmF2aWdhdGlvbk9wdGlvbnNbXCJyb3dTdHlsZXJcIl0gPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbU5hdkZvcm1hdHRlci5yb3dTdHlsZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uYXZpZ2F0aW9uT3B0aW9uc1tcImNlbGxTdHlsZXJcIl0gPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbU5hdkZvcm1hdHRlci5jZWxsU3R5bGVyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gMjAyMTA5MjYg5qCR5a+86Iiq5biu5Yqp5LitIOW3puS+p+agkeaUr+aMgeWIhuWxguWKoOi9vVxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGlzcGxheVR5cGUgPT09IExvb2t1cEdyaWREaXNwbGF5VHlwZS5OYXZUcmVlTGlzdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBfbmF2X3RyZWVpbmZvX2xvYWR0eXBlID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uYXZpZ2F0aW9uT3B0aW9ucy50cmVlSW5mby5sb2FkRGF0YVR5cGU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubG9hZFRyZWVEYXRhVHlwZSAhPT0gXCJkZWZhdWx0XCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX25hdl90cmVlaW5mb19sb2FkdHlwZSA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRUcmVlRGF0YVR5cGUgPT09IFwibG9hZGFsbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcImFsbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcImFzeW5jXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmF2aWdhdGlvbk9wdGlvbnMudHJlZUluZm8ubG9hZERhdGFUeXBlID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgX25hdl90cmVlaW5mb19sb2FkdHlwZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBvYnNlciA9IHRoaXMubG9va3VwQ21wTWdyLmNyZWF0ZUxlZnRDb21wb25lbnQodGhpcy5uYXZpZ2F0aW9uT3B0aW9ucyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmxvb2t1cENtcE1nci5jcmVhdGVDb250ZW50KHRoaXMuZ3JpZE9wdGlvbnMpO1xyXG4gICAgICAgICAgICB0aGlzLmxvb2t1cENtcE1nci5jcmVhdGVGYXZvcml0ZUNvbXBvbmVudCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaXNUZXh0Q2hhbmdlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50UmVmLmluc3RhbmNlLnNlYXJjaERhdGEudmFsdWUgPSB0aGlzLmRpc3BsYXlUZXh0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gdXBkYXRlIGNvbHVtbnMgZm9ybWF0dGVyXHJcbiAgICAgICAgaWYgKHRoaXMuY3VzdG9tRm9ybWF0dGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29sdW1ucy5mb3JFYWNoKChjb2wpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmN1c3RvbUZvcm1hdHRlcltjb2wuZmllbGRdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sLmZvcm1hdHRlciA9IHRoaXMuY3VzdG9tRm9ybWF0dGVyW2NvbC5maWVsZF07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuY3VzdG9tRm9ybWF0dGVyLnJvd1N0eWxlcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnRSZWYuaW5zdGFuY2Uucm93U3R5bGVyID1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbUZvcm1hdHRlci5yb3dTdHlsZXI7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmN1c3RvbUZvcm1hdHRlci5jZWxsU3R5bGVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbXBvbmVudFJlZi5pbnN0YW5jZS5jZWxsU3R5bGVyID1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbUZvcm1hdHRlci5jZWxsU3R5bGVyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmNoYW5nZURldGVjdG9yLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICByZXR1cm4gb2JzZXI7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDorr7nva7luK7liqnnqpflj6PmoIfpophcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzZXRMb29rdXBUaXRsZVRleHQocmVzRGF0YTogTG9va3VwR3JpZFJlc3VsdCkge1xyXG4gICAgICAgIGlmIChyZXNEYXRhLmRpc3BsYXlJbmZvKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzcGxheUluZm8gPSByZXNEYXRhLmRpc3BsYXlJbmZvO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8g5aaC5p6c6Ieq5a6a5LmJ5qCH6aKY77yM5bCG5Lul5q2k5qCH6aKY5Li65YeG44CC5ZCm5YiZ5Yqg6L295pyN5Yqh5Zmo56uv6L+U5Zue55qE5pWw5o2uXHJcbiAgICAgICAgaWYgKHRoaXMudGl0bGUgJiYgdGhpcy50aXRsZSAhPT0gXCLmraTlpITmmL7npLrluK7liqnmoIfpophcIikge1xyXG4gICAgICAgICAgICB0aGlzLmRpc3BsYXlJbmZvLnRpdGxlID0gdGhpcy50aXRsZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmRpc3BsYXlJbmZvICYmIHJlc0RhdGEudGl0bGUpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmRpc3BsYXlJbmZvLnRpdGxlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlJbmZvLnRpdGxlID0gcmVzRGF0YS50aXRsZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNob3dHZXRBbGxDaGlsZHJlbkNoZWNrYm94KCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzVHJlZSgpICYmIHRoaXMudHJlZUluZm8pIHtcclxuICAgICAgICAgICAgdGhpcy5lbmFibGVHZXRBbGxDaGlsZE5vZGVzID1cclxuICAgICAgICAgICAgICAgIHRoaXMudHJlZUluZm8ubG9hZERhdGFUeXBlICE9PSBcImFsbFwiICYmIHRoaXMudHJlZUluZm8ubGF5ZXJUeXBlID09PSBcInBhdGhjb2RlXCI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5lbmFibGVHZXRBbGxDaGlsZE5vZGVzID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGluaXREYXRhKCkge1xyXG4gICAgICAgIGNvbnN0IG9ic2VydmVyID0ge1xyXG4gICAgICAgICAgICBuZXh0OiAoZGF0YTogTG9va3VwR3JpZFJlc3VsdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8g5pyN5Yqh5Zmo56uv5Y+R55Sf6ZSZ6K+v77yM6L+U5ZueTlVMTCDml7bvvIznm7TmjqXlhbPpl63nqpflj6NcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1Nob3cgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5kaWFsb2cpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaWFsb2cuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5pbml0T3B0aW9ucyhkYXRhKS5zdWJzY3JpYmUoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRDb2x1bW5zID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tdWx0aVNlbE1nci5pbml0U2VsZWN0ZWRDb2x1bW5zKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mYXZvcml0ZUNvbHVtbnMgPSB0aGlzLmZhdkhlbHBlci5nZXRGYXZvcml0ZUNvbHVtbnMoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudXNlUGVyc2lvbmFsQ29uZikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMucGVyc29uYWxDb25maWdTZXJ2aWNlLmdldFBlcnNvbmFsRGF0YSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBlcnNvbmFsQ29uZmlnU2VydmljZS5zYXZlUGVyc29uYWxDb25maWcoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wZXJzb25hbENvbmZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzVGFiQ2hhbmdlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvb2t1cFNlbGVjdGlvblNlci5sb2FkU2VsZWN0aW9ucyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuc2VsZWN0ZWRJdGVtcyB8fCBbXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNEb3VibGxlTGlzdCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWvvOiIquW4ruWKqeaXtu+8jOiuvue9ruW3puS+p+mAieS4reaVsOaNruaXtu+8jOS4jeWKoOi9veS4u+aVsOaNruWIl+ihqOOAglxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5uYXZTZWxlY3RlZElkcyB8fCB0aGlzLnNlbGVjdEZpcnN0SW5OYXYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZERhdGFXaGVuT3BlbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YVsnYWN0aXZlVGFiJ10gJiYgIXRoaXMuaXNUYWJDaGFuZ2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlVGFiID0gJ2RhdGFsaXN0JztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZERhdGEoZGF0YSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzVHJlZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZVRhYiA9PT0gXCJkYXRhbGlzdFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0dCA9IHRoaXMuY29tcG9uZW50UmVmLmluc3RhbmNlIGFzIFRyZWVUYWJsZUNvbXBvbmVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0dC5zZWFyY2hEYXRhLnZhbHVlICYmIHRoaXMuaXRlbXMgJiYgdGhpcy5pdGVtcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pdGVtc1swXS5jaGlsZHJlbiAmJiB0aGlzLml0ZW1zWzBdLmNoaWxkcmVuLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0dC50b2dnbGVFeHBhbmQodGhpcy5pdGVtc1swXSwgdHJ1ZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93R2V0QWxsQ2hpbGRyZW5DaGVja2JveCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzVGV4dENoYW5nZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3NlYXJjaFJlc3VsdCA9IG51bGw7IC8vIOa4heepuuS4tOaXtuafpeivoiDnu5PmnpxcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlTG9hZGluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuaXNSZWFkeSQubmV4dCh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzUmVhZHkgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3IuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9va3VwaW5pdGlhbGl6YXRpb25TdWJqZWN0Lm5leHQoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlcnJvcjogKGVycjogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLmlzUmVhZHkkLm5leHQodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlTG9hZGluZygpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2VhcmNoUmVzdWx0ID0gbnVsbDsgLy8g5riF56m65Li05pe25p+l6K+iIOe7k+aenFxyXG4gICAgICAgICAgICAgICAgdGhpcy5pc1RleHRDaGFuZ2UgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmhhc0Vycm9yID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3IuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBlcnIgPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VyU2VydmljZS5lcnJvcihlcnIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIuTWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlclNlcnZpY2UuZXJyb3IoZXJyLk1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVyci5lcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXJTZXJ2aWNlLmVycm9yKGVyci5lcnJvci5NZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlclNlcnZpY2UuZXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwi5bqU55So5pyN5Yqh5Zmo6ZSZ6K+vLOivt+iBlOezu+ezu+e7n+euoeeQhuWRmO+8gVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBsZXQgcDogYW55ID0ge1xyXG4gICAgICAgICAgICBwYWdlSW5mbzoge1xyXG4gICAgICAgICAgICAgICAgcGFnZVNpemU6IHRoaXMucGFnZVNpemUgfHwgMjAsXHJcbiAgICAgICAgICAgICAgICBwYWdlSW5kZXg6IDEsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfTtcclxuICAgICAgICBsZXQgdDogTE9BRF9EQVRBX1RZUEUgPSBcImFsbFwiO1xyXG4gICAgICAgIGlmICh0aGlzLmlzVGV4dENoYW5nZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9zZWFyY2hTdGF0ZSA9IHsgXHJcbiAgICAgICAgICAgICAgICBmaWVsZDogXCIqXCIsXHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5kaXNwbGF5VGV4dFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHAgPSB7XHJcbiAgICAgICAgICAgICAgICBzZWFyY2g6IHRoaXMuX3NlYXJjaFN0YXRlXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0ID0gJ3NlYXJjaCc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMuaXNUYWJDaGFuZ2VkICYmIHRoaXMuZW5hYmxlVG9TZWxlY3QpIHtcclxuICAgICAgICAgICAgY29uc3QgdmFscyA9IHRoaXMuc2VsZWN0aW9uTWdyLmdldFNlbGVjdGVkSWRzKCk7XHJcbiAgICAgICAgICAgIGlmICh2YWxzICYmIHZhbHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBwW1wic2VsZWN0ZWRJbmZvXCJdID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkSWRzOiB2YWxzLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzW1wic2VsZWN0ZWRJZHNcIl0pIHtcclxuICAgICAgICAgICAgICAgICAgICBwW1wic2VsZWN0ZWRJbmZvXCJdID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRJZHM6IHRoaXNbXCJzZWxlY3RlZElkc1wiXSxcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNob3dMb2FkaW5nKCk7XHJcbiAgICAgICAgdGhpcy5oYXNFcnJvciA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuaHR0cE1nci5sb29rdXBSZXF1ZXN0KHAsIHQpLnBpcGUoXHJcbiAgICAgICAgICAgIG1hcCgocmVzdERhdGE6IExvb2t1cEdyaWRSZXN1bHQpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN0RGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3REYXRhLnNlbGVjdGVkSXRlbXMgPSByZXN0RGF0YVtcInNlbGVjdGVkRGF0YVwiXSB8fCBbXTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3REYXRhICYmIHR5cGVvZiByZXN0RGF0YSA9PT0gXCJvYmplY3RcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN0RGF0YS5zZWxlY3RlZEl0ZW1zID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3REYXRhID09PSBudWxsID8gZmFsc2UgOiByZXN0RGF0YTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICApLnN1YnNjcmliZShvYnNlcnZlcik7XHJcbiAgICB9XHJcblxyXG4gICAgbG9hZERhdGEocmVzRGF0YT86IExvb2t1cEdyaWRSZXN1bHQsIHJlYmluZEV2ZW50ID0gdHJ1ZSkge1xyXG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZVRhYiA9PT0gXCJkYXRhbGlzdFwiKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnVzZUZhdm9yaXRlICYmICF0aGlzLmlzVHJlZSgpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZhdkhlbHBlci51cGRhdGVGYXZvcml0ZXNTdGF0dXMocmVzRGF0YS5pdGVtcyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5kaXNwbGF5VHlwZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBMb29rdXBHcmlkRGlzcGxheVR5cGUuTmF2TGlzdDpcclxuICAgICAgICAgICAgICAgIGNhc2UgTG9va3VwR3JpZERpc3BsYXlUeXBlLk5hdlRyZWVMaXN0OlxyXG4gICAgICAgICAgICAgICAgY2FzZSBMb29rdXBHcmlkRGlzcGxheVR5cGUuTGlzdDpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWREYXRhVGFibGVEYXRhKHJlc0RhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZWJpbmRFdmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmR0RXZlbnRNZ3IuYmluZERhdGFUYWJsZUV2ZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBMb29rdXBHcmlkRGlzcGxheVR5cGUuVHJlZUxpc3Q6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkVHJlZVRhYmxlRGF0YShyZXNEYXRhLCByZWJpbmRFdmVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuYWN0aXZlVGFiID09PSBcImZhdm9yaXRlXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5sb2FkRmF2RGF0YShyZXNEYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIOmAieS4reaVsOaNrlxyXG4gICAgICAgIHRoaXMuc2VsZWN0aW9uTWdyLnNlbGVjdEN1cnJlbnRWYWx1ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgbG9hZEZhdkRhdGEocmVzdWx0OiBMb29rdXBHcmlkUmVzdWx0KSB7XHJcbiAgICAgICAgLy8g5Yqg6L295pS26JeP5pWw5o2uXHJcbiAgICAgICAgaWYgKHRoaXMudXNlRmF2b3JpdGUpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNUcmVlKCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0VHJlZUluZm8ocmVzdWx0KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRyZWVOb2RlcyA9IHRoaXMuZmF2SGVscGVyLmluaXRGYXZvcml0ZVRyZWVEYXRhKFxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5pdGVtc1xyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRyZWVEYXRhID0gdGhpcy50cmVlTm9kZUhlbHBlclxyXG4gICAgICAgICAgICAgICAgICAgIC5mbGF0VHJlZU5vZGVzKHRyZWVOb2RlcylcclxuICAgICAgICAgICAgICAgICAgICAubWFwKChuKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG4uZGF0YVtcIl9hZGR0aW9uYWxfXCJdID0gbltcImFkZHRpb25hbFwiXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4uZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9va3VwU2VsZWN0aW9uU2VyLmluaXRGYXZvcml0ZUl0ZW1zKHRyZWVEYXRhKTtcclxuXHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZhdm9yaXRlc0NvbXBvbmVudFJlZi5pbnN0YW5jZS5zY3JvbGxUb1koMSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9va3VwU2VsZWN0aW9uU2VyLmluaXRGYXZvcml0ZUl0ZW1zKHJlc3VsdC5pdGVtcyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuZmF2SGVscGVyLmxvYWRGYXZvcml0ZXNEYXRhKHJlc3VsdCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGxvYWREYXRhVGFibGVEYXRhKHJlc0RhdGE/OiBMb29rdXBHcmlkUmVzdWx0KSB7XHJcbiAgICAgICAgaWYgKHJlc0RhdGEpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZ3JpZE9wdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXNEYXRhICYmIHJlc0RhdGEuY29sdW1ucyAmJiByZXNEYXRhLmNvbHVtbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAhdGhpcy5ncmlkT3B0aW9ucy5jb2x1bW5zIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICF0aGlzLmdyaWRPcHRpb25zLmNvbHVtbnMubGVuZ3RoXHJcbiAgICAgICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29sdW1ucyA9IHJlc0RhdGEuY29sdW1ucztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5pdGVtcyA9IHJlc0RhdGEuaXRlbXM7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzRGF0YS50b3RhbCB8fCByZXNEYXRhLml0ZW1zLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIGlmICggcmVzRGF0YS5zZWFyY2hGaWVsZHMgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ncmlkT3B0aW9ucy5zZWFyY2hGaWVsZHMgPSB0aGlzLmdldFNlYXJjaENvbHVtbnMocmVzRGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzRGF0YS5wYWdlSW5mbykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzRGF0YS5wYWdlSW5mby5wYWdlTGlzdCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoIXRoaXMucGFnZUxpc3QgfHwgIXRoaXMucGFnZUxpc3QubGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhZ2VMaXN0ID0gcmVzRGF0YS5wYWdlSW5mby5wYWdlTGlzdDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdpbmF0aW9uID0gcmVzRGF0YS5wYWdlSW5mby5lbmFibGVQYWdlcjtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhZ2VJbmRleCA9IHJlc0RhdGEucGFnZUluZm8ucGFnZUluZGV4O1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFnZVNpemUgPSByZXNEYXRhLnBhZ2VJbmZvLnBhZ2VTaXplO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhZ2luYXRpb24gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ3JpZE9wdGlvbnMgPSByZXNEYXRhIGFzIExvb2t1cEdyaWRPcHRpb25zO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnVwZGF0ZURhdGFUYWJsZSh0aGlzLmdyaWRPcHRpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZURhdGFUYWJsZShvcHRzOiBhbnkpIHtcclxuICAgICAgICBpZiAob3B0cykge1xyXG4gICAgICAgICAgICBjb25zdCBkdCA9IHRoaXMuY29tcG9uZW50UmVmLmluc3RhbmNlIGFzIERhdGFUYWJsZUNvbXBvbmVudDtcclxuXHJcbiAgICAgICAgICAgIGlmICghZHQuY29sdW1ucyB8fCBkdC5jb2x1bW5zLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgZHQuY29sdW1ucyA9IHRoaXMuZ3JpZE9wdGlvbnMuY29sdW1ucztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZHQuYWxsQ29sdW1uc1RpdGxlID0gdGhpcy5hbGxDb2x1bW5zVGl0bGU7XHJcbiAgICAgICAgICAgIGR0LnNlYXJjaEZpZWxkcyA9IG9wdHMuc2VhcmNoRmllbGRzO1xyXG4gICAgICAgICAgICBkdC5wYWdpbmF0aW9uID0gb3B0cy5wYWdpbmF0aW9uO1xyXG4gICAgICAgICAgICBkdC5wYWdlTGlzdCA9IHRoaXMucGFnZUxpc3Q7XHJcbiAgICAgICAgICAgIGR0LnJlbW90ZVNvcnQgPSB0aGlzLnJlbW90ZVNvcnQ7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5sb2FkRGF0YVdoZW5PcGVuKSB7XHJcbiAgICAgICAgICAgICAgICBkdC5sb2FkRGF0YSh7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZVNpemU6IG9wdHMucGFnZVNpemUsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZUluZGV4OiB0aGlzLmdyaWRPcHRpb25zLnBhZ2VJbmRleCxcclxuICAgICAgICAgICAgICAgICAgICB0b3RhbDogdGhpcy5ncmlkT3B0aW9ucy50b3RhbCxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB0aGlzLmdyaWRPcHRpb25zLml0ZW1zLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBkdC5jZC5tYXJrRm9yQ2hlY2soKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmxvYWRTdWNjZXNzLmVtaXQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXRUcmVlSW5mbyhyZXNEYXRhKSB7XHJcbiAgICAgICAgaWYgKCFyZXNEYXRhKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBfdHJlZUluZm8gPSBudWxsO1xyXG4gICAgICAgIGlmIChyZXNEYXRhLnRyZWVJbmZvKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9ubHlTZWxlY3RMZWFmID0gcmVzRGF0YS50cmVlSW5mby5vbmx5U2VsZWN0TGVhZjtcclxuICAgICAgICAgICAgbGV0IF9vc2w6IE9OTFlfU0VMRUNUX0xFQUYgPSBcIm5vXCI7XHJcbiAgICAgICAgICAgIGlmIChvbmx5U2VsZWN0TGVhZiAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBfb3NsID0gb25seVNlbGVjdExlYWYgPyBcInllc1wiIDogXCJub1wiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF90cmVlSW5mbyA9IHsgLi4ucmVzRGF0YS50cmVlSW5mbywgb25seVNlbGVjdExlYWY6IF9vc2wgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmdyaWRPcHRpb25zLnRyZWVJbmZvKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRyZWVJbmZvID0gdGhpcy5ncmlkT3B0aW9ucy50cmVlSW5mbztcclxuICAgICAgICAgICAgaWYgKHRyZWVJbmZvKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgdHJlZUluZm8ub25seVNlbGVjdExlYWYgPT09IHVuZGVmaW5lZCB8fFxyXG4gICAgICAgICAgICAgICAgICAgIHRyZWVJbmZvLm9ubHlTZWxlY3RMZWFmID09PSBudWxsXHJcbiAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgICB0cmVlSW5mby5vbmx5U2VsZWN0TGVhZiA9IFwibm9cIjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRyZWVJbmZvLm9ubHlTZWxlY3RMZWFmID09PSBcImJvb2xlYW5cIikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyZWVJbmZvLm9ubHlTZWxlY3RMZWFmID0gdHJlZUluZm8ub25seVNlbGVjdExlYWYgPyBcInllc1wiIDogXCJub1wiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIDIwMjEwOTAyXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5sb2FkVHJlZURhdGFUeXBlID09PSBcImRlZmF1bHRcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyZWVJbmZvLmxvYWREYXRhVHlwZSA9IF90cmVlSW5mby5sb2FkRGF0YVR5cGU7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyZWVJbmZvLmxvYWREYXRhVHlwZSA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZFRyZWVEYXRhVHlwZSA9PT0gXCJsb2FkYWxsXCIgPyBcImFsbFwiIDogXCJhc3luY1wiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0cmVlSW5mby5vbmx5U2VsZWN0TGVhZiAhPT0gXCJkZWZhdWx0XCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBfdHJlZUluZm8gPSBPYmplY3QuYXNzaWduKF90cmVlSW5mbywgdHJlZUluZm8pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnRyZWVJbmZvID0gX3RyZWVJbmZvO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgbG9hZFRyZWVUYWJsZURhdGEocmVzRGF0YT86IExvb2t1cEdyaWRSZXN1bHQsIHJlYmluZEV2ZW50ID0gdHJ1ZSkge1xyXG4gICAgICAgIGNvbnN0IGl0ZW1zID0gcmVzRGF0YSA/IHJlc0RhdGEuaXRlbXMgOiB0aGlzLmdyaWRPcHRpb25zLml0ZW1zO1xyXG4gICAgICAgIHRoaXMuaXRlbXMgPSBpdGVtcztcclxuXHJcbiAgICAgICAgaWYgKHJlc0RhdGEpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRUcmVlSW5mbyhyZXNEYXRhKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHRyZWVJbmZvID0gdGhpcy5ncmlkT3B0aW9ucy50cmVlSW5mbztcclxuICAgICAgICAgICAgaWYgKCF0cmVlSW5mb1tcInRyZWVEYXRhSXNJbml0XCJdKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHJlZUluZm8ubGF5ZXJUeXBlLnRvTG93ZXJDYXNlKCkgPT09IFwicGF0aGNvZGVcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXRlbXMgPSB0aGlzLmxvb2t1cFV0aWxzLm1ha2VUcmVlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLml0ZW1zLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmVlSW5mb1xyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXRlbXMgPSB0aGlzLmxvb2t1cFV0aWxzLm1ha2VUcmVlV2l0aFBhcmVudElEKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLml0ZW1zLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIlwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBgJHt0cmVlSW5mby5kYXRhRmllbGR9LiR7dHJlZUluZm8ucGFyZW50RmllbGR9YCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pZEZpZWxkXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuY29tcG9uZW50UmVmLmluc3RhbmNlIGluc3RhbmNlb2YgVHJlZVRhYmxlQ29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHR0ID0gdGhpcy5jb21wb25lbnRSZWYuaW5zdGFuY2UgYXMgVHJlZVRhYmxlQ29tcG9uZW50O1xyXG4gICAgICAgICAgICBpZiAodGhpcy50cmVlSW5mbykge1xyXG4gICAgICAgICAgICAgICAgdHQubG9hZERhdGFUeXBlID0gdGhpcy50cmVlSW5mby5sb2FkRGF0YVR5cGU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5jb2x1bW5zIHx8ICF0aGlzLmNvbHVtbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB0dC5jb2x1bW5zID0gcmVzRGF0YS5jb2x1bW5zIHx8IFtdO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ncmlkT3B0aW9ucy5jb2x1bW5zID0gdHQuY29sdW1ucztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgaXNMb2FkQWxsVHJlZURhdGEgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5sb2FkVHJlZURhdGFUeXBlID09PSBcImRlZmF1bHRcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0dC5sb2FkRGF0YVR5cGUgPT09IFwiYWxsXCI7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmxvYWRUcmVlRGF0YVR5cGUgPT09IFwibG9hZGFsbFwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgaWYgKHJlYmluZEV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnR0RXZlbnRNZ3IuYmluZFRyZWV0YWJsZUV2ZW50KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgaXNMb2FkQWxsID0gaXNMb2FkQWxsVHJlZURhdGEoKTtcclxuXHJcbiAgICAgICAgICAgIC8qKiDlrozmlbTmoJHoioLngrnmo4Dmn6UgQnkgTHVjYXMgMjAyMDAzMDIgKi9cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRoaXMuaXRlbXMgPSB0aGlzLmNoZWNrTm9kZUNhbkJlU2VsZWN0KHRoaXMuaXRlbXMsIGlzTG9hZEFsbCk7XHJcbiAgICAgICAgICAgIHR0LmtlZXBTZWxlY3QgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMudXNlRmF2b3JpdGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmF2SGVscGVyLnVwZGF0ZUZhdm9yaXRlc1N0YXR1cyh0aGlzLml0ZW1zKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMubG9hZERhdGFXaGVuT3Blbikge1xyXG4gICAgICAgICAgICAgICAgdHQubG9hZERhdGEodGhpcy5pdGVtcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdHQucmVzaXplKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5Zyo5p6E5a6M5pW05qCR5Lit77yM5pyJ6YOo5YiG6IqC54K55Zug5Li65p2h5Lu26KKr6L+H5ruk77yM5Li65pi+56S65a6M5pW05qCR77yMXHJcbiAgICAgKiDov5nkupvoioLngrnlnKjov5DooYzml7bmmK/kuI3lhYHorrjooqvpgInkuK3nmoQsIOi/lOWbnuaWsOeahOiKgueCueaVsOe7hFxyXG4gICAgICogQnkgTHVjYXMgMjAyMDAzMDJcclxuICAgICAqL1xyXG4gICAgY2hlY2tOb2RlQ2FuQmVTZWxlY3Qobm9kZXMsIGlzQWxsVHJlZURhdGEgPSBmYWxzZSk6IFRyZWVOb2RlW10ge1xyXG4gICAgICAgIGlmIChub2RlcyAmJiBub2Rlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5vZGVzLm1hcCgobm9kZTogVHJlZU5vZGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChub2RlLmhhc093blByb3BlcnR5KFwiYWRkdGlvbmFsXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5zZWxlY3RhYmxlID0gIW5vZGVbXCJhZGR0aW9uYWxcIl07XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG5vZGUuY2hpbGRyZW4gJiYgbm9kZS5jaGlsZHJlbi5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrTm9kZUNhbkJlU2VsZWN0KG5vZGUuY2hpbGRyZW4sIGlzQWxsVHJlZURhdGEpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNBbGxUcmVlRGF0YSAmJiAoIXRoaXMuX3NlYXJjaFN0YXRlIHx8ICF0aGlzLl9zZWFyY2hTdGF0ZS52YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5sZWFmID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGU7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbm9kZXM7XHJcbiAgICB9XHJcblxyXG4gICAgb25DaGFuZ2VzKHZhbCkge1xyXG4gICAgICAgIGlmICghdmFsKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25DbGVhcigpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzcGxheVRleHQgPSB2YWw7XHJcbiAgICAgICAgICAgIHRoaXMuaXNUZXh0Q2hhbmdlID0gdGhpcy5vcmlnaW5hbFRleHQgIT09IHRoaXMuZGlzcGxheVRleHQ7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm5vc2VhcmNoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldE1vZGVsVmFsdWUodmFsKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJNYXBwaW5ncy5lbWl0KHsgaW5zdGFuY2U6IHRoaXMsIHZhbHVlOiB2YWwsIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLm9uTW9kZWxUb3VjaGVkKHZhbCk7XHJcbiAgICAgICAgICAgIHRoaXMudmFsdWVDaGFuZ2VkLmVtaXQodmFsKTtcclxuICAgICAgICAgICAgdGhpcy50ZXh0Q2hhbmdlZC5lbWl0KHZhbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uQ2xlYXIoZW1pdCA9IHRydWUpIHtcclxuICAgICAgICB0aGlzLmlzVGV4dENoYW5nZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuZGlzcGxheVRleHQgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMuZGlzcGxheVZhbHVlID0gXCJcIjtcclxuICAgICAgICB0aGlzLm9yaWdpbmFsVGV4dCA9IFwiXCI7XHJcbiAgICAgICAgdGhpcy5leHRlbmRJbmZvID0gXCJcIjtcclxuICAgICAgICB0aGlzLnNldE1vZGVsVmFsdWUoXCJcIik7XHJcbiAgICAgICAgaWYgKHRoaXMubWFwcGluZ0ZuKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWFwcGluZ0ZuKG51bGwsIHRoaXMubWFwRmllbGRzKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5tYXBGaWVsZHMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJpbmRpbmdEYXRhID0gdGhpcy5zZWxlY3Rpb25NZ3IuZ2V0QmluZGluZ0RhdGEoKTtcclxuICAgICAgICAgICAgICAgIGlmIChiaW5kaW5nRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVmYXVsdE1hcHBpbmcubG9va3VwRmllbGRNYXAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWFwRmllbGRzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBiaW5kaW5nRGF0YVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5tdWx0aVNlbE1nci5jbGVhcigpO1xyXG4gICAgICAgIGlmIChlbWl0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xlYXIuZW1pdCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjbGVhclZhbHVlKGVtaXQgPSB0cnVlKSB7XHJcbiAgICAgICAgdGhpcy5vbkNsZWFyKGVtaXQpO1xyXG4gICAgfVxyXG5cclxuICAgIHNlbGVjdEl0ZW0ocm93RGF0YT86IGFueSkge1xyXG4gICAgICAgIGxldCBzZWxlY3RlZFJvdyA9IG51bGw7XHJcbiAgICAgICAgaWYgKHJvd0RhdGEpIHtcclxuICAgICAgICAgICAgc2VsZWN0ZWRSb3cgPSByb3dEYXRhO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkUm93ID0gdGhpcy5zZWxlY3Rpb25zO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFzZWxlY3RlZFJvdykge1xyXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRSb3cgPSBudWxsO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoc2VsZWN0ZWRSb3cpICYmICFzZWxlY3RlZFJvdy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFJvdyA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIOWmguaenOWumuS5ieiHquWumuS5ieWkhOeQhuehruWumuS6i+S7tu+8jOWImeeUseiHquWumuS5ieS6i+S7tuWkhOeQhuWQjumdoueahOmAu+i+kVxyXG4gICAgICAgIGlmICh0aGlzLm9rSGFuZGxlcikge1xyXG4gICAgICAgICAgICB0aGlzLm9rSGFuZGxlcih7IGRhdGE6IHNlbGVjdGVkUm93LCBpbnN0YW5jZTogdGhpcyB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5iZWZvcmVTZWxlY3REYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBic2RSZXN1bHQgPSB0aGlzLmJlZm9yZVNlbGVjdERhdGEoe1xyXG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlOiB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHNlbGVjdGVkUm93LFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoYnNkUmVzdWx0ICYmIGJzZFJlc3VsdC5zdWJzY3JpYmUpIHtcclxuICAgICAgICAgICAgICAgICAgICBic2RSZXN1bHQuc3Vic2NyaWJlKChlOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fYmVmb3JlU2VsZWN0RGF0YUNhbGxCYWNrKGUsIHNlbGVjdGVkUm93KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy53cml0ZUNvbnNvbGUoJ+W4ruWKqeaVsOaNrumAieS4reWJjeS6i+S7tuacqui/lOWbnuWAvOaIlui/lOWbnuexu+Wei+mdnk9ic2VydmFibGUsIOivt+ajgOafpScsICdlcnJvcicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fYmVmb3JlU2VsZWN0RGF0YUNhbGxCYWNrKHRydWUsIHNlbGVjdGVkUm93KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldFBhcmVudFBhdGhDb2RlKHJvd3MpIHtcclxuICAgICAgICBjb25zdCBtYXhCeSA9IChhcnIsIGZuKSA9PlxyXG4gICAgICAgICAgICBNYXRoLm1heChcclxuICAgICAgICAgICAgICAgIC4uLmFyci5tYXAodHlwZW9mIGZuID09PSBcImZ1bmN0aW9uXCIgPyBmbiA6ICh2YWwpID0+IHZhbFtmbl0pXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgIGNvbnN0IHsgZGF0YUZpZWxkLCBwYXRoRmllbGQsIGxheWVyRmllbGQgfSA9IHRoaXMudHJlZUluZm87XHJcbiAgICAgICAgY29uc3QgbWF4TGF5ZXIgPSBtYXhCeShyb3dzLCAoeCkgPT4geFtkYXRhRmllbGRdW2xheWVyRmllbGRdKTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gbWF4TGF5ZXI7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBfcm93cyA9IHJvd3MuZmlsdGVyKChuKSA9PiBuW2RhdGFGaWVsZF1bbGF5ZXJGaWVsZF0gPT09IGkpO1xyXG4gICAgICAgICAgICBpZiAoX3Jvd3MgJiYgX3Jvd3MubGVuZ3RoICYmIF9yb3dzLmxlbmd0aCA8IHJvd3MubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBfcm93cy5mb3JFYWNoKChyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGF0Y2hDb2RlID0gcltkYXRhRmllbGRdW3BhdGhGaWVsZF07XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgX3Jvd3MyID0gcm93cy5maWx0ZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChuKSA9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbltkYXRhRmllbGRdW3BhdGhGaWVsZF0gIT09IHBhdGNoQ29kZSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbltkYXRhRmllbGRdW3BhdGhGaWVsZF0uaW5kZXhPZihwYXRjaENvZGUpID09PSAwXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX3Jvd3MyICYmIF9yb3dzMi5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcm93cyA9IHJvd3MuZmlsdGVyKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKG4pID0+IG5bZGF0YUZpZWxkXVtwYXRoRmllbGRdICE9PSBwYXRjaENvZGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJvd3M7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfYmVmb3JlU2VsZWN0RGF0YUNhbGxCYWNrKGUsIHNlbGVjdGVkUm93KSB7XHJcbiAgICAgICAgbGV0IGNhblNlbGVjdCA9IGU7XHJcbiAgICAgICAgbGV0IG1lc3NhZ2UgPSBcIlwiO1xyXG4gICAgICAgIGlmICh0eXBlb2YgZSA9PT0gXCJib29sZWFuXCIpIHtcclxuICAgICAgICAgICAgY2FuU2VsZWN0ID0gZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGUgPT09IFwib2JqZWN0XCIpIHtcclxuICAgICAgICAgICAgICAgIGNhblNlbGVjdCA9IGUuY2FuU2VsZWN0O1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGUubWVzc2FnZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNhblNlbGVjdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXNlbGVjdGVkUm93KSB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2UgPSB0aGlzLm11c3RDaG9vc0FkYXRhcm93O1xyXG4gICAgICAgICAgICBjYW5TZWxlY3QgPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjYW5TZWxlY3QpIHtcclxuICAgICAgICAgICAgbGV0IHNlbGVjdGVkUm93cyQgPSBvZihzZWxlY3RlZFJvdyk7XHJcbiAgICAgICAgICAgIC8vIOWkmumAiSDmoJHluK7liqkg5byC5q2l5Yqg6L29IOWIhue6p+eggSDlvIDlkK/lkIzmraXpgInmi6kg5oiW5YyF5ZCr5LiL57qnXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5zaW5nbGVTZWxlY3QgJiYgdGhpcy5lbmFibGVDYXNjYWRlICYmIHRoaXMuaXNUcmVlKCkgKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50cmVlSW5mby5sb2FkRGF0YVR5cGUgIT09IFwiYWxsXCIgJiYgdGhpcy50cmVlSW5mby5sYXllclR5cGUgPT09IFwicGF0aGNvZGVcIiAmJiB0aGlzLmlzR2V0QWxsQ2hpZGxOb2Rlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBwYXJlbnRzSWRzID0gdGhpcy5nZXRQYXJlbnRQYXRoQ29kZShzZWxlY3RlZFJvdyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmVudHNJZHMgJiYgcGFyZW50c0lkcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50c0lkcyA9IHBhcmVudHNJZHMubWFwKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKG4pID0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgblt0aGlzLnRyZWVJbmZvLmRhdGFGaWVsZF1bdGhpcy50cmVlSW5mby5wYXRoRmllbGRdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRSb3dzJCA9IHRoaXMuaHR0cE1nclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmdldERhdGEoeyBwYXJlbnRzSWRzIH0sIFwiYWxsQ2hpbGRyZW5cIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5waXBlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcCgocjogTG9va3VwR3JpZFJlc3VsdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpdGVtcyA9IHIuaXRlbXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gci5pdGVtcy5tYXAoKGQpID0+IGQuZGF0YSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFsbGl0ZW1zID0gWy4uLnNlbGVjdGVkUm93LCAuLi5pdGVtc107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpZHMgPSBhbGxpdGVtcy5tYXAoKG4pID0+IG5bdGhpcy5pZEZpZWxkXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkcyA9IEFycmF5LmZyb20obmV3IFNldChpZHMpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlkcy5tYXAoKG4pID0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxpdGVtcy5maW5kKChhKSA9PiBhW3RoaXMuaWRGaWVsZF0gPT09IG4pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBzZWxlY3RlZFJvd3MkLnN1YnNjcmliZSgocm93cykgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZUxvYWRpbmcoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ29udHJvbFZhbHVlKHJvd3MpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnVzZVRpcCB8fCAhcm93cykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnVzZVRpcCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGVyc29uYWxDb25maWdTZXJ2aWNlLnVwZGF0ZVF1ZWNrU2VsZWN0ZWQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvd3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9jYWxTZXJ2aWNlLmxvY2FsZUlkXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm5vdGlmeVNlcnZpY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeVNlcnZpY2Uud2FybmluZyhtZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlclNlcnZpY2Uud2FybmluZyhtZXNzYWdlLCBcIlwiLCB0cnVlLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nLmVsLm5hdGl2ZUVsZW1lbnQuY2xpY2soKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZUNvbnRyb2xWYWx1ZShzZWxlY3RlZFJvdykge1xyXG4gICAgICAgIGlmIChzZWxlY3RlZFJvdykge1xyXG4gICAgICAgICAgICB0aGlzLnNldERpc3BsYXlUZXh0KHNlbGVjdGVkUm93KTtcclxuICAgICAgICAgICAgaWYgKHRoaXMubWFwcGluZ0ZuKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1hcHBpbmdGbihzZWxlY3RlZFJvdywgdGhpcy5tYXBGaWVsZHMsIHRoaXMuYmluZGluZ0RhdGEpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubWFwRmllbGRzICYmIHRoaXMuYmluZGluZ0RhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlZmF1bHRNYXBwaW5nLmxvb2t1cEZpZWxkTWFwKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFJvdyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXBGaWVsZHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmluZGluZ0RhdGFcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuc2V0TW9kZWxWYWx1ZSh0aGlzLmRpc3BsYXlUZXh0KTtcclxuICAgICAgICAgICAgaWYgKHRoaXNbXCJpbkRhdGFncmlkXCJdICYmIHNlbGVjdGVkUm93KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RJdGVtcyA9IEFycmF5LmlzQXJyYXkoc2VsZWN0ZWRSb3cpXHJcbiAgICAgICAgICAgICAgICAgICAgPyBzZWxlY3RlZFJvd1xyXG4gICAgICAgICAgICAgICAgICAgIDogW3NlbGVjdGVkUm93XTtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQmluZERhdGEoc2VsZWN0SXRlbXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRhLmVtaXQoc2VsZWN0ZWRSb3cpO1xyXG4gICAgICAgICAgICB0aGlzLnJ1bkRpY3RQaWNrZWRFdmVudChzZWxlY3RlZFJvdyk7XHJcbiAgICAgICAgICAgIHRoaXMuaXNUZXh0Q2hhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIChkb2N1bWVudC5hY3RpdmVFbGVtZW50IGFzIEhUTUxCdXR0b25FbGVtZW50KS5ibHVyKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5tZXNzYWdlclNlcnZpY2Uud2FybmluZyh0aGlzLm11c3RDaG9vc0FkYXRhcm93KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB1cGRhdGVCaW5kRGF0YShzZWxlY3RlZFJvdykge1xyXG4gICAgICAgIGlmICghdGhpcy5tYXBGaWVsZHMpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgaGVscEZpZWxkcyA9IE9iamVjdC5rZXlzKHRoaXMubWFwRmllbGRzKTtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIHRoaXMubmdDb250cm9sICYmXHJcbiAgICAgICAgICAgIHRoaXMubmdDb250cm9sLmZvcm1EaXJlY3RpdmUgJiZcclxuICAgICAgICAgICAgdGhpcy5uZ0NvbnRyb2wuZm9ybURpcmVjdGl2ZS5mb3JtICYmXHJcbiAgICAgICAgICAgIHRoaXMubmdDb250cm9sLmZvcm1EaXJlY3RpdmUuZm9ybS5iaW5kaW5nRGF0YVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICBjb25zdCBiaW5kaW5nRGF0YSA9IHRoaXMubmdDb250cm9sLmZvcm1EaXJlY3RpdmUuZm9ybS5iaW5kaW5nRGF0YTtcclxuXHJcbiAgICAgICAgICAgIGlmIChiaW5kaW5nRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgaGVscEZpZWxkcy5mb3JFYWNoKChoZWxwRmllbGQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWFwRmllbGRzW2hlbHBGaWVsZF1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNwbGl0KFwiLFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZm9yRWFjaCgoZm9ybUZpZWxkOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbCA9IHNlbGVjdGVkUm93XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgocikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy51dGlscy5nZXRWYWx1ZShoZWxwRmllbGQsIHIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmpvaW4odGhpcy5tdWx0aXBsZUNob2ljZVNlcGFyYXRvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnV0aWxzLnNldFZhbHVlKGJpbmRpbmdEYXRhLCBmb3JtRmllbGQsIHZhbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIGlmIChiaW5kaW5nRGF0YS5zZXRWYWx1ZSkge1xyXG4gICAgICAgICAgICAvLyAgICAgY29uc3QgYmluZGluZ1BhdGggPSB0aGlzLm5nQ29udHJvbC5mb3JtRGlyZWN0aXZlLmZvcm0uYmluZGluZ1BhdGg7XHJcbiAgICAgICAgICAgIC8vICAgICBsZXQgcGF0aEFycjogc3RyaW5nW10gPSBbXTtcclxuICAgICAgICAgICAgLy8gICAgIGlmIChiaW5kaW5nUGF0aCkge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIHBhdGhBcnIgPSBiaW5kaW5nUGF0aC5zcGxpdCgnLycpLmZpbHRlcihuID0+IG4gIT09ICcnKTtcclxuICAgICAgICAgICAgLy8gICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vICAgICBoZWxwRmllbGRzLmZvckVhY2goKGhlbHBGaWVsZDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgdGhpcy5tYXBGaWVsZHNbaGVscEZpZWxkXS5zcGxpdCgnLCcpLmZvckVhY2goKGZvcm1GaWVsZDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIGNvbnN0IGZpZWxkUGF0aHMgPSBwYXRoQXJyLmNvbmNhdChmb3JtRmllbGQuc3BsaXQoJy4nKSk7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIGNvbnN0IHZhbCA9IHNlbGVjdGVkUm93Lm1hcChyID0+IHtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnV0aWxzLmdldFZhbHVlKGZvcm1GaWVsZCwgcik7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIH0pLmpvaW4odGhpcy5tdWx0aXBsZUNob2ljZVNlcGFyYXRvcik7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIGJpbmRpbmdEYXRhLnNldFZhbHVlKHBhdGhBcnIuY29uY2F0KGZpZWxkUGF0aHMpLCB2YWwsIHRydWUsIHRydWUpO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvLyAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBpZiAodGhpcy5iaW5kaW5nRGF0YSkge1xyXG4gICAgICAgICAgICAvLyAgICAgaGVscEZpZWxkcy5mb3JFYWNoKChoZWxwRmllbGQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIHRoaXMubWFwRmllbGRzW2hlbHBGaWVsZF0uc3BsaXQoJywnKS5mb3JFYWNoKChmb3JtRmllbGQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICBjb25zdCB2YWwgPSBzZWxlY3RlZFJvdy5tYXAociA9PiB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy51dGlscy5nZXRWYWx1ZShmb3JtRmllbGQsIHIpO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICB9KS5qb2luKHRoaXMubXVsdGlwbGVDaG9pY2VTZXBhcmF0b3IpO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICB0aGlzLnV0aWxzLnNldFZhbHVlKHRoaXMuYmluZGluZ0RhdGEsIGZvcm1GaWVsZCwgdmFsKTtcclxuICAgICAgICAgICAgLy8gICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gICAgIH0pO1xyXG4gICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0RXh0ZW5kSW5mb0ZpZWxkcyhpc0hlbHBEYXRhID0gdHJ1ZSkge1xyXG4gICAgICAgIGlmICghdGhpcy5leHRJbmZvRmllbGRzKSB7XHJcbiAgICAgICAgICAgIHRoaXMud3JpdGVDb25zb2xlKGDmnKrorr7nva7mianlsZXlrZfmrrXjgIJgKTtcclxuICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB0aXBGaWVsZEFyciA9IHRoaXMuZXh0SW5mb0ZpZWxkcy5zcGxpdChcIixcIik7XHJcblxyXG4gICAgICAgIGlmIChpc0hlbHBEYXRhKSB7XHJcbiAgICAgICAgICAgIGxldCBleHRlbmRJbmZvRmllbGRzID0gW107XHJcbiAgICAgICAgICAgIGV4dGVuZEluZm9GaWVsZHMgPSB0aXBGaWVsZEFyci5tYXAoKHRmKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtYXBLZXkgPSBPYmplY3Qua2V5cyh0aGlzLm1hcEZpZWxkcykuZmluZCgoaykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm1hcEZpZWxkc1trXSA9PT0gdGY7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobWFwS2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hcEtleTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy53cml0ZUNvbnNvbGUoYOWcqOW4ruWKqeaYoOWwhOWtl+auteS4reacquaJvuWIsCR7dGZ9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gZXh0ZW5kSW5mb0ZpZWxkcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aXBGaWVsZEFycjtcclxuICAgIH1cclxuXHJcbiAgICBvblVwZGF0ZUV4dGVuZEluZm8oKSB7XHJcbiAgICAgICAgY29uc3QganNvbkRhdGEgPSB0aGlzLnNlbGVjdGlvbk1nci5nZXRCaW5kaW5nRGF0YSgpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlRXh0ZW5kSW5mbyhqc29uRGF0YSwgZmFsc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOmAieS4reW4ruWKqeaVsOaNruWQju+8jOabtOaWsOaJqeWxleS/oeaBr1xyXG4gICAgcHJpdmF0ZSB1cGRhdGVFeHRlbmRJbmZvKGRhdGE6IGFueSwgaXNIZWxwRGF0YSA9IHRydWUpIHtcclxuICAgICAgICBpZiAoZGF0YSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5leHRJbmZvRm9ybWF0dGVyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpcFN0cmluZyA9IGRhdGEubWFwKChuKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEV4dGVuZEluZm9UZXh0KG4pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXh0ZW5kSW5mbyA9IHRpcFN0cmluZy5qb2luKFwi77yMXCIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4dGVuZEluZm8gPSB0aGlzLmdldEV4dGVuZEluZm9UZXh0KGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZXh0ZW5kSW5mb0ZpZWxkcyA9IHRoaXMuZ2V0RXh0ZW5kSW5mb0ZpZWxkcyhpc0hlbHBEYXRhKTtcclxuICAgICAgICAgICAgICAgIGlmIChleHRlbmRJbmZvRmllbGRzICYmIGV4dGVuZEluZm9GaWVsZHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGlwU3RyaW5nID0gZGF0YS5tYXAoKG4pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEV4dGVuZEluZm9UZXh0KG4sIGV4dGVuZEluZm9GaWVsZHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5leHRlbmRJbmZvID0gdGlwU3RyaW5nLmpvaW4oXCLvvIxcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5leHRlbmRJbmZvID0gdGhpcy5nZXRFeHRlbmRJbmZvVGV4dChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRlbmRJbmZvRmllbGRzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0RXh0ZW5kSW5mb1RleHQoaXRlbURhdGEsIGZpZWxkcyA9IG51bGwpIHtcclxuICAgICAgICBpZiAodHlwZW9mIHRoaXMuZXh0SW5mb0Zvcm1hdHRlciA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmV4dEluZm9Gb3JtYXR0ZXIoe1xyXG4gICAgICAgICAgICAgICAgYmluZGluZ0RhdGE6IGl0ZW1EYXRhLFxyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2U6IHRoaXMsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRpcFN0cmluZyA9IFtdO1xyXG4gICAgICAgICAgICBjb25zdCB0aXBWYWx1ZXMgPSBmaWVsZHMubWFwKCh0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0ZnYgPSB0aGlzLnV0aWxzLmdldFZhbHVlKHQsIGl0ZW1EYXRhKTtcclxuICAgICAgICAgICAgICAgIHRpcFN0cmluZy5wdXNoKHRmdik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geyBbdF06IHRmdiB9O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHRpcFN0cmluZy5qb2luKFwiIFwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXREaXNwbGF5VGV4dChyb3dzOiBhbnkpIHtcclxuICAgICAgICBjb25zdCBkZiA9IHRoaXMuZGlzcGxheUZpZWxkc1xyXG4gICAgICAgICAgICA/IHRoaXMuZGlzcGxheUZpZWxkcy5zcGxpdChcIixcIilcclxuICAgICAgICAgICAgOiBbdGhpcy50ZXh0RmllbGRdO1xyXG4gICAgICAgIGNvbnN0IHR4dEFyciA9IHJvd3MubWFwKChyKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHQgPSBbXTtcclxuICAgICAgICAgICAgZGYuZm9yRWFjaCgobikgPT4ge1xyXG4gICAgICAgICAgICAgICAgdC5wdXNoKHRoaXMudXRpbHMuZ2V0VmFsdWUobiwgcikpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHQuam9pbih0aGlzLmRpc3BsYXlUZXh0U2VwYXJhdG9yKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZ3JpZE9wdGlvbnMuc2luZ2xlU2VsZWN0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0eHRBcnIuam9pbihcIlwiKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5kaXNwbGF5RmllbGRzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHh0QXJyLm1hcCgodCkgPT4gXCJbXCIgKyB0ICsgXCJdXCIpLmpvaW4oXCIsXCIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHR4dEFyci5qb2luKFwiLFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNldERpc3BsYXlUZXh0KHNlbGVjdGVkUm93OiBhbnkpIHtcclxuICAgICAgICB0aGlzLm9yaWdpbmFsVGV4dCA9IHRoaXMuZGlzcGxheVRleHQ7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmdyaWRPcHRpb25zLnNpbmdsZVNlbGVjdCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5kaXNwbGF5Rm9ybWF0dGVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlUZXh0ID0gdGhpcy51dGlscy5nZXRWYWx1ZShcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRleHRGaWVsZCxcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFJvd1xyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc1RyZWUoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheVRleHQgPSB0aGlzLmRpc3BsYXlGb3JtYXR0ZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheVRleHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFtzZWxlY3RlZFJvd10sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvb2t1cDogdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGF0YWJsZTogdGhpcy5jb21wb25lbnRSZWZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5zdGFuY2UgYXMgRGF0YVRhYmxlQ29tcG9uZW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHQgPSB0aGlzLmNvbXBvbmVudFJlZi5pbnN0YW5jZSBhcyBUcmVlVGFibGVDb21wb25lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5VGV4dCA9IHRoaXMuZGlzcGxheUZvcm1hdHRlcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5VGV4dCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgW3NlbGVjdGVkUm93XSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgeyBsb29rdXA6IHRoaXMsIHRyZWU6IHR0IH1cclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5VGV4dCA9IHRoaXMuZ2V0RGlzcGxheVRleHQoW3NlbGVjdGVkUm93XSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5kaXNwbGF5VmFsdWUgPSBzZWxlY3RlZFJvd1t0aGlzLnZhbHVlRmllbGRdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChzZWxlY3RlZFJvdy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRpc3BsYXlGb3JtYXR0ZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlUZXh0ID0gc2VsZWN0ZWRSb3dcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgocikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudXRpbHMuZ2V0VmFsdWUodGhpcy50ZXh0RmllbGQsIHIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuam9pbih0aGlzLm11bHRpcGxlQ2hvaWNlU2VwYXJhdG9yKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNUcmVlKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5VGV4dCA9IHRoaXMuZGlzcGxheUZvcm1hdHRlcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheVRleHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFJvdyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb29rdXA6IHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YXRhYmxlOiB0aGlzLmNvbXBvbmVudFJlZlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5zdGFuY2UgYXMgRGF0YVRhYmxlQ29tcG9uZW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHR0ID0gdGhpcy5jb21wb25lbnRSZWZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbnN0YW5jZSBhcyBUcmVlVGFibGVDb21wb25lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheVRleHQgPSB0aGlzLmRpc3BsYXlGb3JtYXR0ZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlUZXh0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRSb3csXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGxvb2t1cDogdGhpcywgdHJlZTogdHQgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5VGV4dCA9IHRoaXMuZ2V0RGlzcGxheVRleHQoc2VsZWN0ZWRSb3cpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheVZhbHVlID0gc2VsZWN0ZWRSb3dcclxuICAgICAgICAgICAgICAgICAgICAubWFwKChyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnV0aWxzLmdldFZhbHVlKHRoaXMudmFsdWVGaWVsZCwgcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAuam9pbih0aGlzLm11bHRpcGxlQ2hvaWNlU2VwYXJhdG9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm9yaWdpbmFsVGV4dCA9IHRoaXMuZGlzcGxheVRleHQ7XHJcbiAgICB9XHJcblxyXG4gICAgcnVuRGljdFBpY2tlZEV2ZW50KHJvd0RhdGE6IGFueSkge1xyXG4gICAgICAgIGlmICh0aGlzLmRpY3RQaWNrZWQpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMub2tCdXR0b24pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMub2tCdXR0b24ubmF0aXZlRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5kaWN0UGlja2VkU3Vic2NyaXB0aW9uID0gdGhpcy5kaWN0UGlja2VkKHJvd0RhdGEpLnN1YnNjcmliZShcclxuICAgICAgICAgICAgICAgICh2OiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5va0J1dHRvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9rQnV0dG9uLm5hdGl2ZUVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2ID09PSBcImJvb2xlYW5cIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZURpYWxvZyhyb3dEYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVvZiB2ID09PSBcIm9iamVjdFwiICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHYuY2xvc2VEaWFsb2cgIT09IHVuZGVmaW5lZCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAhdi5jbG9zZURpYWxvZ1xyXG4gICAgICAgICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodi5tZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VyU2VydmljZS53YXJuaW5nKHYubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlRGlhbG9nKHJvd0RhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZURpYWxvZyhyb3dEYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZURpYWxvZyhyb3dEYXRhKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBmb2N1c1RvSW5wdXQoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy56b25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pbnB1dEdyb3VwICYmIHRoaXMuaW5wdXRHcm91cC50ZXh0Ym94KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnB1dEdyb3VwLnRleHRib3gubmF0aXZlRWxlbWVudC5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZURpYWxvZyhyb3dEYXRhID0gbnVsbCkge1xyXG4gICAgICAgIHRoaXMuaXNTaG93ID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHRoaXMuZGlhbG9nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlhbG9nLmNsb3NlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAocm93RGF0YSkge1xyXG4gICAgICAgICAgICB0aGlzLm11bHRpU2VsTWdyLnNhdmUocm93RGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmZvY3VzVG9JbnB1dCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGNhbmNlbFNlbGVjdCgpIHtcclxuICAgICAgICB0aGlzLmNsb3NlRGlhbG9nKCk7XHJcbiAgICAgICAgdGhpcy5pc1RleHRDaGFuZ2UgPSBmYWxzZTtcclxuICAgICAgICBpZiAoIXRoaXMubm9zZWFyY2gpIHtcclxuICAgICAgICAgICAgdGhpcy5kaXNwbGF5VGV4dCA9IHRoaXMub3JpZ2luYWxUZXh0O1xyXG4gICAgICAgICAgICB0aGlzLnNldE1vZGVsVmFsdWUodGhpcy5kaXNwbGF5VGV4dCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5jYW5jZWxIYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FuY2VsSGFuZGxlcih0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0TW9kZWxWYWx1ZSh2KSB7XHJcbiAgICAgICAgaWYgKHRoaXMub25Nb2RlbENoYW5nZSkge1xyXG4gICAgICAgICAgICB0aGlzLm9uTW9kZWxDaGFuZ2Uodik7XHJcbiAgICAgICAgICAgIHRoaXMudmFsdWVDaGFuZ2VkLmVtaXQodik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIOaVsOaNruWIl+ihqO+8jOaUtuiXj++8jCDlt7LpgInmlbDmja4gdGFiIOmhteWIh+aNolxyXG4gICAgb25UYWJDaGFuZ2UoZTogYW55KSB7XHJcbiAgICAgICAgdGhpcy5hY3RpdmVUYWIgPSBlLnRhYkluZGV4O1xyXG4gICAgICAgIHRoaXMucGVyc29uYWxDb25mLnRhYkluZGV4ID0gdGhpcy5hY3RpdmVUYWI7XHJcbiAgICAgICAgY29uc3QgX2ZpcnN0Q2hhbmdlID0gdGhpcy5pc1RhYkNoYW5nZWQ7XHJcbiAgICAgICAgdGhpcy5pc1RhYkNoYW5nZWQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMucGVyc29uYWxDb25maWdTZXJ2aWNlLnVwZGF0ZVBlcnNvbmFsQ29uZmlnKHtcclxuICAgICAgICAgICAgdGFiSW5kZXg6IGUudGFiSW5kZXgsXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZVRhYiA9PT0gXCJkYXRhbGlzdFwiKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzRG91YmxsZUxpc3QoKSAmJiAhdGhpcy5sZWZ0Q29tcG9uZW50UmVmKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5uYXZpZ2F0aW9uT3B0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9va3VwQ21wTWdyLmNyZWF0ZUxlZnRDb21wb25lbnQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmF2aWdhdGlvbk9wdGlvbnNcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXREYXRhKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoKCF0aGlzLml0ZW1zIHx8ICF0aGlzLml0ZW1zLmxlbmd0aCkgJiYgKCF0aGlzLl9zZWFyY2hTdGF0ZSB8fCAhdGhpcy5fc2VhcmNoU3RhdGUudmFsdWUpICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pbml0RGF0YSgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFfZmlyc3RDaGFuZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc1RyZWUoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRUcmVlVGFibGVEYXRhKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkRGF0YVRhYmxlRGF0YSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmR0RXZlbnRNZ3IuYmluZERhdGFUYWJsZUV2ZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5zZWxlY3Rpb25NZ3Iuc2VsZWN0Q3VycmVudFZhbHVlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zaG93R2V0QWxsQ2hpbGRyZW5DaGVja2JveCgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZVRhYiA9PT0gXCJmYXZvcml0ZVwiKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc1RyZWUoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdERhdGEoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAhdGhpcy5mYXZvcml0ZUl0ZW1zIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICF0aGlzLmZhdm9yaXRlSXRlbXMubGVuZ3RoIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmF2b3JpdGVJdGVtcy5sZW5ndGggIT09IHRoaXMuZmF2SGVscGVyLmdldEZhdm9yaXRJZHMoKS5sZW5ndGhcclxuICAgICAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0RGF0YSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIV9maXJzdENoYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZhdkhlbHBlci5fbG9hZEZhdm9yaXRlRGF0YSh0aGlzLmZhdm9yaXRlSXRlbXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLnNlbGVjdGlvbk1nci5zZWxlY3RDdXJyZW50VmFsdWUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICB0aGlzLnNlbGVjdGlvbk1nci5zZWxlY3RDdXJyZW50VmFsdWUoKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3IuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlc2l6ZUNtcCgpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pc1RyZWUoKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgeSA9IHRoaXMuY29tcG9uZW50UmVmLmluc3RhbmNlLnN0YXRlLnNjcm9sbFk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbXBvbmVudFJlZi5pbnN0YW5jZS5zY3JvbGxUb1koeSwgMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlQ2FzY2FkZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHRFdmVudE1nci5jYXNjYWRlVmFsdWVDaGFuZ2VkKHRoaXMuY2FzY2FkZVN0YXR1cyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25NZ3Iuc2VsZWN0Q3VycmVudFZhbHVlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8jcmVnaW9uICBUYWcgVmlldyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICBwcml2YXRlIHJlZ2lzdGVyTW91c2VFdmVudEZvclRhZ1ZpZXcoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZW5hYmxlQ2xlYXIpIHtcclxuICAgICAgICAgICAgdGhpcy50YWdib3gubmF0aXZlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICAgICAgICAgXCJtb3VzZWVudGVyXCIsXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uVGFnYm94TW91c2VFbnRlci5iaW5kKHRoaXMpXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHRoaXMudGFnYm94Lm5hdGl2ZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAgICAgICAgIFwibW91c2VsZWF2ZVwiLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5vblRhZ2JveE1vdXNlTGVhdmUuYmluZCh0aGlzKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHRvZ2dsZUNsZWFySWNvbihldmVudDogYW55LCBpc1Nob3cgPSBmYWxzZSkge1xyXG4gICAgICAgIGNvbnN0IHN0ciA9IGlzU2hvdyA/IFwiXCIgOiBcIm5vbmVcIjtcclxuICAgICAgICBjb25zdCBjbGVhckljb24gPSBldmVudC50YXJnZXQucXVlcnlTZWxlY3RvcihcIi5pbnB1dC1ncm91cC1jbGVhclwiKTtcclxuICAgICAgICBpZiAoY2xlYXJJY29uKSB7XHJcbiAgICAgICAgICAgIGNsZWFySWNvbi5zdHlsZS5kaXNwbGF5ID0gc3RyO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG9uVGFnYm94TW91c2VFbnRlcihldmVudCkge1xyXG4gICAgICAgIGlmICh0aGlzLmRpc3BsYXlUZXh0ICYmIHRoaXMuZW5hYmxlQ2xlYXIpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLnJlYWRvbmx5ICYmICF0aGlzLmRpc2FibGVkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dUYWdib3hDbGVhckJ1dHRvbiA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuc2hvd1RhZ2JveENsZWFyQnV0dG9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlQ2xlYXJJY29uKGV2ZW50LCB0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBvblRhZ2JveE1vdXNlTGVhdmUoZXZlbnQpIHtcclxuICAgICAgICB0aGlzLnRvZ2dsZUNsZWFySWNvbihldmVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25SZW1vdmVTZWxlY3RJdGVtKCRldmVudCwgdHh0KSB7XHJcbiAgICAgICAgJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIGNvbnN0IHRleHRBcnJheSA9IEFycmF5LmZyb20odGhpcy5kaXNwbGF5VGV4dExpc3QpO1xyXG4gICAgICAgIGNvbnN0IHJlbW92ZWRJbmRleCA9IHRoaXMuZGlzcGxheVRleHRMaXN0LmluZGV4T2YodHh0KTtcclxuICAgICAgICB0ZXh0QXJyYXkuc3BsaWNlKHJlbW92ZWRJbmRleCwgMSk7XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5VGV4dCA9IHRleHRBcnJheS5qb2luKHRoaXMubXVsdGlwbGVDaG9pY2VTZXBhcmF0b3IpO1xyXG4gICAgICAgIHRoaXMub3JpZ2luYWxUZXh0ID0gdGhpcy5kaXNwbGF5VGV4dDtcclxuICAgICAgICB0aGlzLnNldE1vZGVsVmFsdWUodGhpcy5kaXNwbGF5VGV4dCk7XHJcblxyXG5cclxuICAgICAgICBpZiAodGhpcy5kaXNwbGF5VmFsdWUpIHtcclxuICAgICAgICAgICAgY29uc3QgdmFscyA9IHRoaXMuZGlzcGxheVZhbHVlLnNwbGl0KHRoaXMubXVsdGlwbGVDaG9pY2VTZXBhcmF0b3IpO1xyXG4gICAgICAgICAgICB2YWxzLnNwbGljZShyZW1vdmVkSW5kZXgsIDEpO1xyXG4gICAgICAgICAgICB0aGlzLmRpc3BsYXlWYWx1ZSA9IHZhbHMuam9pbih0aGlzLm11bHRpcGxlQ2hvaWNlU2VwYXJhdG9yKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLm1hcEZpZWxkcykge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZU90aGVyRmllbGREYXRhV2hlblRhZ3JlbW92ZWQocmVtb3ZlZEluZGV4KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMudGFnUmVtb3ZlZC5lbWl0KHsgcmVtb3ZlZEluZGV4LCBpbnN0YW5jZTogdGhpcyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZU90aGVyRmllbGREYXRhV2hlblRhZ3JlbW92ZWQocmVtb3ZlZEluZGV4KSB7XHJcbiAgICAgICAgY29uc3QgaGVscEZpZWxkcyA9IE9iamVjdC5rZXlzKHRoaXMubWFwRmllbGRzKTtcclxuICAgICAgICBjb25zdCB0ZXh0RmllbGRJbmRleCA9IGhlbHBGaWVsZHMuaW5kZXhPZih0aGlzLnRleHRGaWVsZCk7XHJcblxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgdGhpcy5uZ0NvbnRyb2wgJiZcclxuICAgICAgICAgICAgdGhpcy5uZ0NvbnRyb2wuZm9ybURpcmVjdGl2ZSAmJlxyXG4gICAgICAgICAgICB0aGlzLm5nQ29udHJvbC5mb3JtRGlyZWN0aXZlLmZvcm0gJiZcclxuICAgICAgICAgICAgdGhpcy5uZ0NvbnRyb2wuZm9ybURpcmVjdGl2ZS5mb3JtLmJpbmRpbmdEYXRhXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJpbmRpbmdEYXRhID0gdGhpcy5uZ0NvbnRyb2wuZm9ybURpcmVjdGl2ZS5mb3JtLmJpbmRpbmdEYXRhO1xyXG4gICAgICAgICAgICBpZiAoYmluZGluZ0RhdGEuc2V0VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJpbmRpbmdQYXRoID1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5nQ29udHJvbC5mb3JtRGlyZWN0aXZlLmZvcm0uYmluZGluZ1BhdGg7XHJcbiAgICAgICAgICAgICAgICBsZXQgcGF0aEFycjogc3RyaW5nW10gPSBbXTtcclxuICAgICAgICAgICAgICAgIGlmIChiaW5kaW5nUGF0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhdGhBcnIgPSBiaW5kaW5nUGF0aC5zcGxpdChcIi9cIikuZmlsdGVyKChuKSA9PiBuICE9PSBcIlwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBoZWxwRmllbGRzLmZvckVhY2goKGhlbHBGaWVsZDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXBGaWVsZHNbaGVscEZpZWxkXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc3BsaXQoXCIsXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5mb3JFYWNoKChmb3JtRmllbGQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmllbGRQYXRocyA9IHBhdGhBcnIuY29uY2F0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1GaWVsZC5zcGxpdChcIi5cIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWwgPSBiaW5kaW5nRGF0YS5nZXRWYWx1ZShmaWVsZFBhdGhzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbEFyciA9IHZhbC5zcGxpdChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm11bHRpcGxlQ2hvaWNlU2VwYXJhdG9yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsQXJyLnNwbGljZShyZW1vdmVkSW5kZXgsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3VmFsID0gdmFsQXJyLmpvaW4oXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tdWx0aXBsZUNob2ljZVNlcGFyYXRvclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpbmRpbmdEYXRhLnNldFZhbHVlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGhBcnIuY29uY2F0KGZpZWxkUGF0aHMpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1ZhbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5iaW5kaW5nRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRleHRGaWVsZEluZGV4ID4gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICBoZWxwRmllbGRzLnNwbGljZSh0ZXh0RmllbGRJbmRleCwgMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBoZWxwRmllbGRzLmZvckVhY2goKGhlbHBGaWVsZDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXBGaWVsZHNbaGVscEZpZWxkXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc3BsaXQoXCIsXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5mb3JFYWNoKChmb3JtRmllbGQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsID0gdGhpcy51dGlscy5nZXRWYWx1ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtRmllbGQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5iaW5kaW5nRGF0YVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbEFyciA9IHZhbC5zcGxpdChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm11bHRpcGxlQ2hvaWNlU2VwYXJhdG9yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsQXJyLnNwbGljZShyZW1vdmVkSW5kZXgsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3VmFsID0gdmFsQXJyLmpvaW4oXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tdWx0aXBsZUNob2ljZVNlcGFyYXRvclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXRpbHMuc2V0VmFsdWUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5iaW5kaW5nRGF0YSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtRmllbGQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VmFsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgb25BbGxDaGlsZE5vZGVzQ2xpY2soJGV2ZW50OiBhbnkpIHtcclxuICAgICAgICB0aGlzLmlzR2V0QWxsQ2hpZGxOb2RlcyA9ICF0aGlzLmlzR2V0QWxsQ2hpZGxOb2RlcztcclxuICAgIH1cclxufVxyXG4iXX0=