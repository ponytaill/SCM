{"version":3,"file":"farris-ui-view-change.umd.js.map","sources":["ng://@farris/ui-view-change/lib/view-change.service.ts","ng://@farris/ui-view-change/lib/view-change.component.ts","ng://@farris/ui-view-change/lib/view-change.directive.ts","ng://@farris/ui-view-change/lib/view-change.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { Subject, BehaviorSubject } from 'rxjs';\r\n\r\ninterface ViewItems {\r\n  items: Array<string>;\r\n}\r\ninterface viewContainer {\r\n  [viewGroupIdId: string]: ViewItems;\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ViewChangeService {\r\n  /**é»è®¤è§å¾åæ¢åç»åç§° */\r\n  private readonly defaultId:string = 'default';\r\n  //å½åæ¾ç¤ºè§å¾\r\n  currentViewType:any = {};\r\n\r\n  /**contents */\r\n  viewContainers:viewContainer = {};\r\n\r\n  changeCurrentViewId: BehaviorSubject<any> = new BehaviorSubject<any>(null);\r\n\r\n  constructor() { }\r\n\r\n  addViewItem(itemId:string, viewContainerId = this.defaultId){\r\n    if(this.viewContainers[viewContainerId]){\r\n      if (this.hasElement(itemId, viewContainerId)) {\r\n        return;\r\n      }\r\n      else{\r\n        this.viewContainers[viewContainerId].items.push(itemId);\r\n      }\r\n    }\r\n    else{\r\n      this.viewContainers[viewContainerId] = {\r\n        items: []\r\n      } as ViewItems;\r\n      this.viewContainers[viewContainerId].items.push(itemId);\r\n    }\r\n  }\r\n\r\n  removeViewItem(itemId, viewContainerId = this.defaultId){\r\n    delete this.viewContainers[viewContainerId];\r\n    if(this.viewContainers && this.viewContainers[viewContainerId]){\r\n      const items = this.viewContainers[viewContainerId].items.filter(el=>{\r\n        return el !== itemId;\r\n      })\r\n      if (!items.length) {\r\n        delete this.viewContainers[viewContainerId];\r\n        return;\r\n      }\r\n      this.viewContainers[viewContainerId].items = items;\r\n    }\r\n  }\r\n\r\n  /**å­å¨currentpageid */\r\n  updateCurrentViewId(type:string, viewContainerId = this.defaultId){\r\n    this.currentViewType[viewContainerId] = type ;\r\n    let changeView={};\r\n    changeView[viewContainerId]=type;\r\n    this.changeCurrentViewId.next(changeView);\r\n  }\r\n  getChangeCurrentViewId(){\r\n    return this.changeCurrentViewId;\r\n  }\r\n  private hasElement(itemId: string, groupId: string): boolean {\r\n    return this.viewContainers[groupId].items.some((item): boolean => item === itemId);\r\n  }\r\n}\r\n","import { Component, OnInit, Input, Output, EventEmitter, ElementRef, ViewChild, Renderer2, AfterViewInit, ViewEncapsulation } from '@angular/core';\r\nimport { ViewChangeService } from './view-change.service';\r\n\r\n@Component({\r\n  selector: 'farris-view-change',\r\n  templateUrl: './view-change.component.html',\r\n  styleUrls: ['./view-change.component.scss'],\r\n  encapsulation: ViewEncapsulation.None\r\n  // providers:[ ViewChangeService ]\r\n})\r\nexport class ViewChangeComponent implements OnInit ,AfterViewInit{\r\n\r\n  @Input() toolbarData;\r\n  @Input() viewType: string = 'tile';\r\n  @Input() defaultType: string;\r\n  @Input() viewGroupId:string = 'default';\r\n  activeTypeItem;\r\n\r\n  @Output() toolTypeChange = new EventEmitter();\r\n\r\n  @ViewChild('typelist') typelist: ElementRef;\r\n\r\n  constructor(private _renderer: Renderer2,\r\n    private viewChangeService: ViewChangeService) { }\r\n\r\n  ngOnInit() {\r\n    if (this.toolbarData && this.toolbarData.length) {\r\n      if (this.defaultType) {\r\n        let item = this.toolbarData.find((bar) => {\r\n          return bar['type'] === this.defaultType;\r\n        })\r\n        this.activeTypeItem = item;\r\n        this.toolTypeChange.emit(this.activeTypeItem);\r\n      }\r\n      else {\r\n        this.activeTypeItem = this.toolbarData[0];\r\n        this.toolTypeChange.emit(this.activeTypeItem);\r\n      }\r\n\r\n      \r\n    }\r\n  }\r\n  ngAfterViewInit(): void {\r\n    if(!this.viewChangeService){\r\n      this.viewChangeService = new ViewChangeService();\r\n    }\r\n    this.viewChangeService.updateCurrentViewId(this.activeTypeItem['type'],this.viewGroupId);\r\n  }\r\n\r\n  listItemClick(item) {\r\n    if (item.disable || this.activeTypeItem['type'] === item['type']) {\r\n      return;\r\n    }\r\n    this.activeTypeItem = item;\r\n    if(!this.viewChangeService){\r\n      this.viewChangeService = new ViewChangeService();\r\n    }\r\n    this.viewChangeService.updateCurrentViewId(this.activeTypeItem['type'],this.viewGroupId);\r\n    this.toolTypeChange.emit(item);\r\n    if (this.typelist) {\r\n      this._renderer.setStyle(\r\n        this.typelist.nativeElement,\r\n        'display',\r\n        'none'\r\n      );\r\n    }\r\n  }\r\n\r\n  dropdownMouseEnter() {\r\n    this._renderer.setStyle(\r\n      this.typelist.nativeElement,\r\n      'display',\r\n      'block'\r\n    );\r\n  }\r\n  dropdownMouseLeave() {\r\n    this._renderer.setStyle(\r\n      this.typelist.nativeElement,\r\n      'display',\r\n      'none'\r\n    );\r\n  }\r\n\r\n}\r\n","import { style } from '@angular/animations';\r\nimport { Directive, Injectable, Input, EventEmitter, Output, ElementRef, OnInit, OnDestroy, ChangeDetectorRef, HostBinding, Renderer2, RendererStyleFlags2 } from '@angular/core';\r\nimport { ViewChangeService } from './view-change.service';\r\n//è§å¾åºå\r\n@Directive({\r\n    selector: '[fViewItem]'\r\n})\r\nexport class FarrisViewItemDirective implements OnInit, OnDestroy {\r\n\r\n    @Input('fViewItem') viewItemType: string;\r\n    @Input('fViewGroupId') fViewGroupId: string = 'default';\r\n  \r\n    constructor(\r\n      private elementRef: ElementRef,\r\n      private viewChangeService: ViewChangeService,\r\n      private render : Renderer2\r\n    ) {\r\n        \r\n    }\r\n  \r\n    public ngOnInit(): void {\r\n        this.viewChangeService.addViewItem(this.viewItemType, this.fViewGroupId);\r\n        this.viewChangeService.getChangeCurrentViewId().subscribe((currentViewType: any): void => {\r\n            if(!currentViewType) return;\r\n            if(!currentViewType[this.fViewGroupId]){\r\n                return;\r\n            }\r\n            else if(currentViewType[this.fViewGroupId] == this.viewItemType){\r\n                // this.render.setStyle(this.elementRef.nativeElement,'display','');\r\n                this.render.removeClass(this.elementRef.nativeElement, 'f-viewchange-view-none');\r\n            }\r\n            else{\r\n                // this.render.setStyle(this.elementRef.nativeElement,'display','none',0);\r\n                this.render.addClass(this.elementRef.nativeElement, 'f-viewchange-view-none');\r\n            }\r\n        });\r\n    }\r\n  \r\n    public ngOnDestroy(): void {\r\n        this.viewChangeService.removeViewItem(this.viewItemType, this.fViewGroupId);\r\n    }\r\n  }","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { ViewChangeComponent } from './view-change.component';\r\nimport { FarrisViewItemDirective } from './view-change.directive';\r\n\r\n@NgModule({\r\n  declarations: [ViewChangeComponent,FarrisViewItemDirective],\r\n  imports: [\r\n    CommonModule\r\n  ],\r\n  exports: [ViewChangeComponent,FarrisViewItemDirective]\r\n})\r\nexport class ViewChangeModule { }\r\n"],"names":["BehaviorSubject","Injectable","EventEmitter","Component","ViewEncapsulation","Renderer2","Input","Output","ViewChild","Directive","ElementRef","NgModule","CommonModule"],"mappings":"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"}
