/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, TemplateRef, ElementRef, ViewChild, ViewContainerRef, ViewEncapsulation, Renderer2 } from '@angular/core';
var TooltipComponent = /** @class */ (function () {
    function TooltipComponent(el, render) {
        this.el = el;
        this.render = render;
        this.contentIsString = true;
        this._tipWidth = '';
        this._tipCls = '';
        /* 位置 */
        this.placement = 'top';
        this.rectifyPlacement = 'top';
        this.rectifyGutter = 20;
        /* 位置样式 */
        this.positionStyle = {};
    }
    Object.defineProperty(TooltipComponent.prototype, "content", {
        get: /**
         * @return {?}
         */
        function () {
            return this.nfContent;
        },
        /* 普通文本内容 */
        set: /* 普通文本内容 */
        /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (value instanceof TemplateRef) {
                this.contentIsString = false;
                this.contentViewf.createEmbeddedView(value);
            }
            else {
                this.contentIsString = true;
                this.nfContent = value;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TooltipComponent.prototype, "tipWidth", {
        get: /**
         * @return {?}
         */
        function () {
            return this._tipWidth;
        },
        /**因为表单生成没有排除factory,不能使用模板 */
        set: /**
         * 因为表单生成没有排除factory,不能使用模板
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (value != this._tipWidth) {
                if (value) {
                    this.render.setStyle(this.innerNode.nativeElement, 'width', value);
                    this.render.setStyle(this.innerNode.nativeElement, 'max-width', 'none');
                }
                else {
                    this.render.removeStyle(this.innerNode.nativeElement, 'width');
                    this.render.removeStyle(this.innerNode.nativeElement, 'max-width');
                }
                this._tipWidth = value;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TooltipComponent.prototype, "tipCls", {
        get: /**
         * @return {?}
         */
        function () {
            return this._tipCls;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (value != this._tipCls) {
                //移除旧样式
                this._tipCls && this.render.removeClass(this.el.nativeElement, this._tipCls);
                //追加新样式
                value && this.render.addClass(this.el.nativeElement, value);
                this._tipCls = value;
            }
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    TooltipComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
    };
    /**
     * @return {?}
     */
    TooltipComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        if (this.hostBoundingClientRect) {
            this.judgeWidth();
            this.autoRectifyDirection();
            this.calculatePosition(this.hostBoundingClientRect);
        }
    };
    /**
     * 规则判断默认样式下出现滚动条，尺寸从默认变成大号
     */
    /**
     * 规则判断默认样式下出现滚动条，尺寸从默认变成大号
     * @return {?}
     */
    TooltipComponent.prototype.judgeWidth = /**
     * 规则判断默认样式下出现滚动条，尺寸从默认变成大号
     * @return {?}
     */
    function () {
        if (this.innerNode.nativeElement.scrollHeight > this.innerNode.nativeElement.clientHeight) {
            this.render.addClass(this.innerNode.nativeElement, 'tooltip-inner-lg');
        }
    };
    // 自动纠正方向
    // 自动纠正方向
    /**
     * @private
     * @return {?}
     */
    TooltipComponent.prototype.autoRectifyDirection = 
    // 自动纠正方向
    /**
     * @private
     * @return {?}
     */
    function () {
        // 标记默认值
        this.rectifyPlacement = this.placement;
        // 整个提示位置
        /** @type {?} */
        var tooltipSize = this.tooltipNode.nativeElement.getBoundingClientRect();
        /** @type {?} */
        var arrowSize = this.arrowNode.nativeElement.getBoundingClientRect();
        /*不考虑，提示框太大的情况,只考虑一次转换位置，
        太复杂的场景，实际项目中不会出现，简化处理此问题
        if(this.referenceBoundingRect.width>tooltipSize){
        }*/
        switch (this.placement) {
            case 'top':
            case 'top-left':
            case 'top-right':
                if (Math.abs(this.hostBoundingClientRect.top - this.referenceBoundingRect.top) < tooltipSize.height + arrowSize.height) {
                    // 高度放不开，转向
                    this.rectifyPlacement = this.rectifyPlacement.replace('top', 'bottom');
                }
                break;
            case 'bottom':
            case 'bottom-left':
            case 'bottom-right':
                if (Math.abs(this.hostBoundingClientRect.bottom - this.referenceBoundingRect.bottom) < tooltipSize.height + arrowSize.height) {
                    // 高度放不开，转向
                    this.rectifyPlacement = this.rectifyPlacement.replace('bottom', 'top');
                }
                break;
            case 'right':
            case 'right-top':
            case 'right-bottom':
                if (Math.abs(this.hostBoundingClientRect.right - this.referenceBoundingRect.right) < tooltipSize.width + arrowSize.width) {
                    // 宽度放不开，转向
                    this.rectifyPlacement = this.rectifyPlacement.replace('right', 'left');
                }
                break;
            case 'left':
            case 'left-top':
            case 'left-bottom':
                if (Math.abs(this.hostBoundingClientRect.left - this.referenceBoundingRect.left) < tooltipSize.width + arrowSize.width) {
                    // 宽度放不开，转向
                    this.rectifyPlacement = this.rectifyPlacement.replace('left', 'right');
                }
                break;
        }
        if (this.rectifyPlacement != this.placement) {
            this.tooltipNode.nativeElement.classList.remove('bs-tooltip-' + this.offsetDirection(this.placement));
            this.tooltipNode.nativeElement.classList.add('bs-tooltip-' + this.offsetDirection(this.rectifyPlacement));
        }
    };
    /**
     * 判断是否超出边界
     */
    /**
     * 判断是否超出边界
     * @private
     * @param {?} rect
     * @param {?} value
     * @return {?}
     */
    TooltipComponent.prototype.isOverBounding = /**
     * 判断是否超出边界
     * @private
     * @param {?} rect
     * @param {?} value
     * @return {?}
     */
    function (rect, value) {
        /** @type {?} */
        var isOver = false;
        /** @type {?} */
        var newValue = 0;
        switch (rect) {
            case 'left':
                if (value <= this.referenceBoundingRect.left) {
                    isOver = true;
                    newValue = this.referenceBoundingRect.left + this.rectifyGutter;
                }
                break;
            case 'right':
                if (value >= this.referenceBoundingRect.right) {
                    isOver = true;
                    newValue = this.referenceBoundingRect.right - this.rectifyGutter;
                }
                break;
            case 'top':
                if (value <= this.referenceBoundingRect.top) {
                    isOver = true;
                    newValue = this.referenceBoundingRect.top + this.rectifyGutter;
                }
                break;
            case 'bottom':
                if (value >= this.referenceBoundingRect.bottom) {
                    isOver = true;
                    newValue = this.referenceBoundingRect.bottom - this.rectifyGutter;
                }
                break;
        }
        return { isOver: isOver, newValue: newValue };
    };
    /**
     * @private
     * @param {?} datas
     * @param {?=} specialEl
     * @return {?}
     */
    TooltipComponent.prototype.containsEl = /**
     * @private
     * @param {?} datas
     * @param {?=} specialEl
     * @return {?}
     */
    function (datas, specialEl) {
        if (specialEl === void 0) { specialEl = ''; }
        if (!specialEl) {
            specialEl = this.rectifyPlacement;
        }
        for (var i = 0; i < datas.length; i++) {
            if (datas[i] == specialEl)
                return true;
        }
        return false;
    };
    /* 计算tooltip最新位置 */
    /* 计算tooltip最新位置 */
    /**
     * @param {?} hostPosition
     * @return {?}
     */
    TooltipComponent.prototype.calculatePosition = /* 计算tooltip最新位置 */
    /**
     * @param {?} hostPosition
     * @return {?}
     */
    function (hostPosition) {
        /** @type {?} */
        var top = 0;
        /** @type {?} */
        var left = 0;
        /** @type {?} */
        var right = 0;
        /** @type {?} */
        var bottom = 0;
        // 整个提示位置
        /** @type {?} */
        var tooltipSize = this.tooltipNode.nativeElement.getBoundingClientRect();
        /** @type {?} */
        var arrowSize = this.arrowNode.nativeElement.getBoundingClientRect();
        switch (this.rectifyPlacement) {
            case 'top':
                top = hostPosition.top - tooltipSize.height - 2;
                left = hostPosition.left + (hostPosition.width - tooltipSize.width) / 2;
                right = left + tooltipSize.width;
                break;
            case 'left':
                top = hostPosition.top + (hostPosition.height - tooltipSize.height) / 2;
                left = hostPosition.left - tooltipSize.width - 2;
                break;
            case 'right':
                top = hostPosition.top + (hostPosition.height - tooltipSize.height) / 2;
                left = hostPosition.right + 2;
                break;
            case 'bottom':
                top = hostPosition.bottom + arrowSize.height + 2;
                left = hostPosition.left + (hostPosition.width - tooltipSize.width) / 2;
                right = left + tooltipSize.width;
                break;
            case 'top-left':
                top = hostPosition.top - tooltipSize.height - 2;
                left = hostPosition.left;
                right = left + tooltipSize.width;
                break;
            case 'top-right':
                top = hostPosition.top - tooltipSize.height - 2;
                left = hostPosition.right - tooltipSize.width;
                right = hostPosition.right;
                break;
            case 'right-top':
                top = hostPosition.top;
                left = hostPosition.right + 2;
                this.arrowNode.nativeElement.style.top = '10%';
                break;
            case 'right-bottom':
                top = hostPosition.bottom - tooltipSize.height;
                left = hostPosition.right + 2;
                this.arrowNode.nativeElement.style.bottom = '10%';
                break;
            case 'bottom-left':
                top = hostPosition.bottom + arrowSize.height + 2;
                left = hostPosition.left;
                right = left + tooltipSize.width;
                break;
            case 'bottom-right':
                top = hostPosition.bottom + arrowSize.height + 2;
                left = hostPosition.right - tooltipSize.width;
                right = hostPosition.right;
                break;
            case 'left-top':
                top = hostPosition.top;
                left = hostPosition.left - tooltipSize.width - 2;
                this.arrowNode.nativeElement.style.top = '10%';
                break;
            case 'left-bottom':
                top = hostPosition.bottom - tooltipSize.height;
                left = hostPosition.left - tooltipSize.width - 2;
                this.arrowNode.nativeElement.style.bottom = '10%';
        }
        /** @type {?} */
        var overResult;
        /** @type {?} */
        var arrowLeft = 0;
        /** @type {?} */
        var arrowTop = 0;
        switch (this.rectifyPlacement) {
            case 'top':
            case 'top-left':
            case 'top-right':
            case 'bottom':
            case 'bottom-left':
            case 'bottom-right':
                overResult = this.isOverBounding('left', left);
                if (overResult.isOver) {
                    left = overResult.newValue;
                }
                else {
                    overResult = this.isOverBounding('right', right);
                    if (overResult.isOver) {
                        left = overResult.newValue - tooltipSize.width;
                    }
                }
                arrowLeft = left - hostPosition.left - hostPosition.width * 0.5 + arrowSize.width * 0.5;
                if (this.rectifyPlacement.indexOf('-left') > 0) {
                    arrowLeft += hostPosition.width * 0.4;
                }
                else if (this.rectifyPlacement.indexOf('-right') > 0) {
                    arrowLeft -= hostPosition.width * 0.4;
                }
                this.arrowNode.nativeElement.style.left = Math.abs(arrowLeft) + 'px';
                break;
            default:
                overResult = this.isOverBounding('top', top);
                if (overResult.isOver) {
                    top = overResult.newValue;
                }
                else {
                    overResult = this.isOverBounding('bottom', bottom);
                    if (overResult.isOver) {
                        top = overResult.newValue - tooltipSize.height;
                    }
                }
                arrowTop = top - hostPosition.top - hostPosition.height * 0.5 + arrowSize.height * 0.5;
                ;
                if (this.rectifyPlacement.indexOf('-top') > 0) {
                    arrowTop += hostPosition.height * 0.4;
                }
                else if (this.rectifyPlacement.indexOf('-bottom') > 0) {
                    arrowTop -= hostPosition.height * 0.4;
                }
                this.arrowNode.nativeElement.style.top = Math.abs(arrowTop) + 'px';
        }
        this.tooltipNode.nativeElement.style.top = top + 'px';
        this.tooltipNode.nativeElement.style.left = left + 'px';
    };
    /*
    *12个位置名解析
    * 因表单生成没有排除factory,而且使用了[class],只能在此处变更
    */
    /*
        *12个位置名解析
        * 因表单生成没有排除factory,而且使用了[class],只能在此处变更
        */
    /**
     * @param {?=} tplacement
     * @return {?}
     */
    TooltipComponent.prototype.offsetDirection = /*
        *12个位置名解析
        * 因表单生成没有排除factory,而且使用了[class],只能在此处变更
        */
    /**
     * @param {?=} tplacement
     * @return {?}
     */
    function (tplacement) {
        if (tplacement === void 0) { tplacement = ''; }
        if (!tplacement) {
            tplacement = this.placement;
        }
        if (tplacement.indexOf('-') !== -1) {
            /** @type {?} */
            var index = tplacement.indexOf('-');
            return tplacement.substring(0, index);
        }
        return tplacement;
    };
    TooltipComponent.decorators = [
        { type: Component, args: [{
                    selector: 'farris-tooltip',
                    template: "<div #tooltipEle [class]=\"('bs-tooltip-'+offsetDirection())+' tooltip show'\">\r\n    <div #arrowEle class=\"arrow\"></div>\r\n    <div #innerEle class=\"tooltip-inner\">\r\n        <div #contentViewf class=\"tooltip-tmpl\">\r\n            <div *ngIf=\"contentIsString\" class=\"tooltip-text\" [innerHtml]=\"nfContent|tooltipHtml\"></div>\r\n            <ng-container *ngIf=\"!contentIsString\"> {{nfContent}}</ng-container>\r\n        </div>       \r\n    </div>\r\n</div>",
                    encapsulation: ViewEncapsulation.None,
                    styles: [".bs-tooltip-bottom .arrow,.bs-tooltip-top .arrow{left:50%}.bs-tooltip-left .arrow,.bs-tooltip-right .arrow{top:25%}"]
                }] }
    ];
    /** @nocollapse */
    TooltipComponent.ctorParameters = function () { return [
        { type: ElementRef },
        { type: Renderer2 }
    ]; };
    TooltipComponent.propDecorators = {
        contentViewf: [{ type: ViewChild, args: ['contentViewf', { read: ViewContainerRef },] }],
        tooltipNode: [{ type: ViewChild, args: ['tooltipEle', { read: ElementRef },] }],
        arrowNode: [{ type: ViewChild, args: ['arrowEle', { read: ElementRef },] }],
        innerNode: [{ type: ViewChild, args: ['innerEle', { read: ElementRef },] }],
        content: [{ type: Input }],
        tipWidth: [{ type: Input }],
        tipCls: [{ type: Input }],
        placement: [{ type: Input }]
    };
    return TooltipComponent;
}());
export { TooltipComponent };
if (false) {
    /** @type {?} */
    TooltipComponent.prototype.contentViewf;
    /** @type {?} */
    TooltipComponent.prototype.tooltipNode;
    /** @type {?} */
    TooltipComponent.prototype.arrowNode;
    /** @type {?} */
    TooltipComponent.prototype.innerNode;
    /** @type {?} */
    TooltipComponent.prototype.contentIsString;
    /**
     * @type {?}
     * @private
     */
    TooltipComponent.prototype._tipWidth;
    /**
     * @type {?}
     * @private
     */
    TooltipComponent.prototype._tipCls;
    /** @type {?} */
    TooltipComponent.prototype.placement;
    /**
     * @type {?}
     * @private
     */
    TooltipComponent.prototype.rectifyPlacement;
    /** @type {?} */
    TooltipComponent.prototype.hostBoundingClientRect;
    /** @type {?} */
    TooltipComponent.prototype.referenceBoundingRect;
    /**
     * @type {?}
     * @private
     */
    TooltipComponent.prototype.rectifyGutter;
    /** @type {?} */
    TooltipComponent.prototype.nfContent;
    /** @type {?} */
    TooltipComponent.prototype.positionStyle;
    /** @type {?} */
    TooltipComponent.prototype.el;
    /**
     * @type {?}
     * @private
     */
    TooltipComponent.prototype.render;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidG9vbHRpcC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL3VpLXRvb2x0aXAvIiwic291cmNlcyI6WyJsaWIvdG9vbHRpcC1jb21wb25lbnQvdG9vbHRpcC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFDSCxTQUFTLEVBQUUsS0FBSyxFQUFFLFdBQVcsRUFBRSxVQUFVLEVBQ3pDLFNBQVMsRUFBRSxnQkFBZ0IsRUFBZSxpQkFBaUIsRUFBaUIsU0FBUyxFQUN4RixNQUFNLGVBQWUsQ0FBQztBQUV2QjtJQTRFSSwwQkFDVyxFQUFjLEVBQ2IsTUFBaUI7UUFEbEIsT0FBRSxHQUFGLEVBQUUsQ0FBWTtRQUNiLFdBQU0sR0FBTixNQUFNLENBQVc7UUEvRDdCLG9CQUFlLEdBQUcsSUFBSSxDQUFDO1FBZWYsY0FBUyxHQUFHLEVBQUUsQ0FBQztRQWtCZixZQUFPLEdBQUcsRUFBRSxDQUFDOztRQWVaLGNBQVMsR0FBRyxLQUFLLENBQUM7UUFDbkIscUJBQWdCLEdBQUcsS0FBSyxDQUFDO1FBS3pCLGtCQUFhLEdBQUcsRUFBRSxDQUFDOztRQUszQixrQkFBYSxHQUFHLEVBQUUsQ0FBQztJQU1uQixDQUFDO0lBL0RELHNCQUNJLHFDQUFPOzs7O1FBU1g7WUFDSSxPQUFPLElBQUksQ0FBQyxTQUFTLENBQUM7UUFDMUIsQ0FBQztRQWJELFlBQVk7Ozs7OztRQUNaLFVBQ1ksS0FBZ0M7WUFDeEMsSUFBSSxLQUFLLFlBQVksV0FBVyxFQUFFO2dCQUM5QixJQUFJLENBQUMsZUFBZSxHQUFHLEtBQUssQ0FBQztnQkFDN0IsSUFBSSxDQUFDLFlBQVksQ0FBQyxrQkFBa0IsQ0FBQyxLQUFLLENBQUMsQ0FBQzthQUMvQztpQkFBTTtnQkFDSCxJQUFJLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQztnQkFDNUIsSUFBSSxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUM7YUFDMUI7UUFDTCxDQUFDOzs7T0FBQTtJQU1E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QUFxQjs7SUFlckIscUNBQTJCOzs7OztJQUMzQiw0Q0FBaUM7O0lBRWpDLGtEQUE0Qjs7SUFFNUIsaURBQTJCOzs7OztJQUMzQix5Q0FBMkI7O0lBRTNCLHFDQUFxQzs7SUFHckMseUNBQW1COztJQUdmLDhCQUFxQjs7Ozs7SUFDckIsa0NBQXlCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcclxuICAgIENvbXBvbmVudCwgSW5wdXQsIFRlbXBsYXRlUmVmLCBFbGVtZW50UmVmLCBPbkluaXQsXHJcbiAgICBWaWV3Q2hpbGQsIFZpZXdDb250YWluZXJSZWYsIEhvc3RCaW5kaW5nLCBWaWV3RW5jYXBzdWxhdGlvbiwgU2ltcGxlQ2hhbmdlcywgUmVuZGVyZXIyLCBOZ1pvbmVcclxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgQWZ0ZXJWaWV3SW5pdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiAnZmFycmlzLXRvb2x0aXAnLFxyXG4gICAgdGVtcGxhdGVVcmw6ICcuL3Rvb2x0aXAuY29tcG9uZW50Lmh0bWwnLFxyXG4gICAgc3R5bGVVcmxzOiBbJy4vdG9vbHRpcC5jb21wb25lbnQuc2NzcyddLFxyXG4gICAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZVxyXG59KVxyXG5cclxuZXhwb3J0IGNsYXNzIFRvb2x0aXBDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyVmlld0luaXQge1xyXG5cclxuICAgIEBWaWV3Q2hpbGQoJ2NvbnRlbnRWaWV3ZicsIHsgcmVhZDogVmlld0NvbnRhaW5lclJlZiB9KSBjb250ZW50Vmlld2Y6IFZpZXdDb250YWluZXJSZWY7XHJcblxyXG4gICAgQFZpZXdDaGlsZCgndG9vbHRpcEVsZScsIHsgcmVhZDogRWxlbWVudFJlZiB9KSB0b29sdGlwTm9kZTogRWxlbWVudFJlZjtcclxuICAgIEBWaWV3Q2hpbGQoJ2Fycm93RWxlJywgeyByZWFkOiBFbGVtZW50UmVmIH0pIGFycm93Tm9kZTogRWxlbWVudFJlZjtcclxuICAgIEBWaWV3Q2hpbGQoJ2lubmVyRWxlJywgeyByZWFkOiBFbGVtZW50UmVmIH0pIGlubmVyTm9kZTogRWxlbWVudFJlZjtcclxuXHJcbiAgICBjb250ZW50SXNTdHJpbmcgPSB0cnVlO1xyXG4gICAgLyog5pmu6YCa5paH5pys5YaF5a65ICovXHJcbiAgICBASW5wdXQoKVxyXG4gICAgc2V0IGNvbnRlbnQodmFsdWU6IHN0cmluZyB8IFRlbXBsYXRlUmVmPGFueT4pIHtcclxuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBUZW1wbGF0ZVJlZikge1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRJc1N0cmluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRWaWV3Zi5jcmVhdGVFbWJlZGRlZFZpZXcodmFsdWUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGVudElzU3RyaW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5uZkNvbnRlbnQgPSB2YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXQgY29udGVudCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5uZkNvbnRlbnQ7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIF90aXBXaWR0aCA9ICcnO1xyXG4gICAgLyoq5Zug5Li66KGo5Y2V55Sf5oiQ5rKh5pyJ5o6S6ZmkZmFjdG9yeSzkuI3og73kvb/nlKjmqKHmnb8gKi9cclxuICAgIEBJbnB1dCgpXHJcbiAgICBzZXQgdGlwV2lkdGgodmFsdWUpIHtcclxuICAgICAgICBpZiAodmFsdWUgIT0gdGhpcy5fdGlwV2lkdGgpIHtcclxuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlci5zZXRTdHlsZSh0aGlzLmlubmVyTm9kZS5uYXRpdmVFbGVtZW50LCAnd2lkdGgnLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlci5zZXRTdHlsZSh0aGlzLmlubmVyTm9kZS5uYXRpdmVFbGVtZW50LCAnbWF4LXdpZHRoJywgJ25vbmUnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyLnJlbW92ZVN0eWxlKHRoaXMuaW5uZXJOb2RlLm5hdGl2ZUVsZW1lbnQsICd3aWR0aCcpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIucmVtb3ZlU3R5bGUodGhpcy5pbm5lck5vZGUubmF0aXZlRWxlbWVudCwgJ21heC13aWR0aCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX3RpcFdpZHRoID0gdmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0IHRpcFdpZHRoKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl90aXBXaWR0aDtcclxuICAgIH1cclxuICAgIHByaXZhdGUgX3RpcENscyA9ICcnO1xyXG4gICAgQElucHV0KClcclxuICAgIHNldCB0aXBDbHModmFsdWUpIHtcclxuICAgICAgICBpZiAodmFsdWUgIT0gdGhpcy5fdGlwQ2xzKSB7XHJcbiAgICAgICAgICAgIC8v56e76Zmk5pen5qC35byPXHJcbiAgICAgICAgICAgIHRoaXMuX3RpcENscyAmJiB0aGlzLnJlbmRlci5yZW1vdmVDbGFzcyh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsIHRoaXMuX3RpcENscyk7XHJcbiAgICAgICAgICAgIC8v6L+95Yqg5paw5qC35byPXHJcbiAgICAgICAgICAgIHZhbHVlICYmIHRoaXMucmVuZGVyLmFkZENsYXNzKHRoaXMuZWwubmF0aXZlRWxlbWVudCwgdmFsdWUpO1xyXG4gICAgICAgICAgICB0aGlzLl90aXBDbHMgPSB2YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXQgdGlwQ2xzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl90aXBDbHM7XHJcbiAgICB9XHJcbiAgICAvKiDkvY3nva4gKi9cclxuICAgIEBJbnB1dCgpIHBsYWNlbWVudCA9ICd0b3AnO1xyXG4gICAgcHJpdmF0ZSByZWN0aWZ5UGxhY2VtZW50ID0gJ3RvcCc7XHJcbiAgICAvLyDnrq3lpLTkvY3nva7lj4LnhadcclxuICAgIGhvc3RCb3VuZGluZ0NsaWVudFJlY3Q6IGFueTtcclxuICAgIC8vIOi+ueeVjOS9jee9ruWPgueFp1xyXG4gICAgcmVmZXJlbmNlQm91bmRpbmdSZWN0OiBhbnk7XHJcbiAgICBwcml2YXRlIHJlY3RpZnlHdXR0ZXIgPSAyMDtcclxuXHJcbiAgICBuZkNvbnRlbnQ6IHN0cmluZyB8IFRlbXBsYXRlUmVmPGFueT47XHJcblxyXG4gICAgLyog5L2N572u5qC35byPICovXHJcbiAgICBwb3NpdGlvblN0eWxlID0ge307XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHVibGljIGVsOiBFbGVtZW50UmVmLFxyXG4gICAgICAgIHByaXZhdGUgcmVuZGVyOiBSZW5kZXJlcjJcclxuICAgICkge1xyXG4gICAgfVxyXG5cclxuICAgIG5nT25Jbml0KCkge1xyXG4gICAgfVxyXG4gICAgbmdBZnRlclZpZXdJbml0KCkge1xyXG4gICAgICAgIGlmICh0aGlzLmhvc3RCb3VuZGluZ0NsaWVudFJlY3QpIHtcclxuICAgICAgICAgICAgdGhpcy5qdWRnZVdpZHRoKCk7XHJcbiAgICAgICAgICAgIHRoaXMuYXV0b1JlY3RpZnlEaXJlY3Rpb24oKTtcclxuICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVQb3NpdGlvbih0aGlzLmhvc3RCb3VuZGluZ0NsaWVudFJlY3QpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog6KeE5YiZ5Yik5pat6buY6K6k5qC35byP5LiL5Ye6546w5rua5Yqo5p2h77yM5bC65a+45LuO6buY6K6k5Y+Y5oiQ5aSn5Y+3XHJcbiAgICAgKi9cclxuICAgIGp1ZGdlV2lkdGgoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaW5uZXJOb2RlLm5hdGl2ZUVsZW1lbnQuc2Nyb2xsSGVpZ2h0ID4gdGhpcy5pbm5lck5vZGUubmF0aXZlRWxlbWVudC5jbGllbnRIZWlnaHQpIHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXIuYWRkQ2xhc3ModGhpcy5pbm5lck5vZGUubmF0aXZlRWxlbWVudCwgJ3Rvb2x0aXAtaW5uZXItbGcnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyDoh6rliqjnuqDmraPmlrnlkJFcclxuICAgIHByaXZhdGUgYXV0b1JlY3RpZnlEaXJlY3Rpb24oKSB7XHJcbiAgICAgICAgLy8g5qCH6K6w6buY6K6k5YC8XHJcbiAgICAgICAgdGhpcy5yZWN0aWZ5UGxhY2VtZW50ID0gdGhpcy5wbGFjZW1lbnQ7XHJcbiAgICAgICAgLy8g5pW05Liq5o+Q56S65L2N572uXHJcbiAgICAgICAgY29uc3QgdG9vbHRpcFNpemUgPSB0aGlzLnRvb2x0aXBOb2RlLm5hdGl2ZUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgY29uc3QgYXJyb3dTaXplID0gdGhpcy5hcnJvd05vZGUubmF0aXZlRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAvKuS4jeiAg+iZke+8jOaPkOekuuahhuWkquWkp+eahOaDheWGtSzlj6rogIPomZHkuIDmrKHovazmjaLkvY3nva7vvIxcclxuICAgICAgICDlpKrlpI3mnYLnmoTlnLrmma/vvIzlrp7pmYXpobnnm67kuK3kuI3kvJrlh7rnjrDvvIznroDljJblpITnkIbmraTpl67pophcclxuICAgICAgICBpZih0aGlzLnJlZmVyZW5jZUJvdW5kaW5nUmVjdC53aWR0aD50b29sdGlwU2l6ZSl7XHJcbiAgICAgICAgfSovXHJcbiAgICAgICAgc3dpdGNoICh0aGlzLnBsYWNlbWVudCkge1xyXG4gICAgICAgICAgICBjYXNlICd0b3AnOlxyXG4gICAgICAgICAgICBjYXNlICd0b3AtbGVmdCc6XHJcbiAgICAgICAgICAgIGNhc2UgJ3RvcC1yaWdodCc6XHJcbiAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnModGhpcy5ob3N0Qm91bmRpbmdDbGllbnRSZWN0LnRvcCAtIHRoaXMucmVmZXJlbmNlQm91bmRpbmdSZWN0LnRvcCkgPCB0b29sdGlwU2l6ZS5oZWlnaHQgKyBhcnJvd1NpemUuaGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g6auY5bqm5pS+5LiN5byA77yM6L2s5ZCRXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWN0aWZ5UGxhY2VtZW50ID0gdGhpcy5yZWN0aWZ5UGxhY2VtZW50LnJlcGxhY2UoJ3RvcCcsICdib3R0b20nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdib3R0b20nOlxyXG4gICAgICAgICAgICBjYXNlICdib3R0b20tbGVmdCc6XHJcbiAgICAgICAgICAgIGNhc2UgJ2JvdHRvbS1yaWdodCc6XHJcbiAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnModGhpcy5ob3N0Qm91bmRpbmdDbGllbnRSZWN0LmJvdHRvbSAtIHRoaXMucmVmZXJlbmNlQm91bmRpbmdSZWN0LmJvdHRvbSkgPCB0b29sdGlwU2l6ZS5oZWlnaHQgKyBhcnJvd1NpemUuaGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g6auY5bqm5pS+5LiN5byA77yM6L2s5ZCRXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWN0aWZ5UGxhY2VtZW50ID0gdGhpcy5yZWN0aWZ5UGxhY2VtZW50LnJlcGxhY2UoJ2JvdHRvbScsICd0b3AnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdyaWdodCc6XHJcbiAgICAgICAgICAgIGNhc2UgJ3JpZ2h0LXRvcCc6XHJcbiAgICAgICAgICAgIGNhc2UgJ3JpZ2h0LWJvdHRvbSc6XHJcbiAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnModGhpcy5ob3N0Qm91bmRpbmdDbGllbnRSZWN0LnJpZ2h0IC0gdGhpcy5yZWZlcmVuY2VCb3VuZGluZ1JlY3QucmlnaHQpIDwgdG9vbHRpcFNpemUud2lkdGggKyBhcnJvd1NpemUud2lkdGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyDlrr3luqbmlL7kuI3lvIDvvIzovazlkJFcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlY3RpZnlQbGFjZW1lbnQgPSB0aGlzLnJlY3RpZnlQbGFjZW1lbnQucmVwbGFjZSgncmlnaHQnLCAnbGVmdCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2xlZnQnOlxyXG4gICAgICAgICAgICBjYXNlICdsZWZ0LXRvcCc6XHJcbiAgICAgICAgICAgIGNhc2UgJ2xlZnQtYm90dG9tJzpcclxuICAgICAgICAgICAgICAgIGlmIChNYXRoLmFicyh0aGlzLmhvc3RCb3VuZGluZ0NsaWVudFJlY3QubGVmdCAtIHRoaXMucmVmZXJlbmNlQm91bmRpbmdSZWN0LmxlZnQpIDwgdG9vbHRpcFNpemUud2lkdGggKyBhcnJvd1NpemUud2lkdGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyDlrr3luqbmlL7kuI3lvIDvvIzovazlkJFcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlY3RpZnlQbGFjZW1lbnQgPSB0aGlzLnJlY3RpZnlQbGFjZW1lbnQucmVwbGFjZSgnbGVmdCcsICdyaWdodCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5yZWN0aWZ5UGxhY2VtZW50ICE9IHRoaXMucGxhY2VtZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMudG9vbHRpcE5vZGUubmF0aXZlRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdicy10b29sdGlwLScgKyB0aGlzLm9mZnNldERpcmVjdGlvbih0aGlzLnBsYWNlbWVudCkpO1xyXG4gICAgICAgICAgICB0aGlzLnRvb2x0aXBOb2RlLm5hdGl2ZUVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnYnMtdG9vbHRpcC0nICsgdGhpcy5vZmZzZXREaXJlY3Rpb24odGhpcy5yZWN0aWZ5UGxhY2VtZW50KSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDliKTmlq3mmK/lkKbotoXlh7rovrnnlYxcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBpc092ZXJCb3VuZGluZyhyZWN0LCB2YWx1ZSkge1xyXG4gICAgICAgIGxldCBpc092ZXIgPSBmYWxzZTtcclxuICAgICAgICBsZXQgbmV3VmFsdWUgPSAwO1xyXG4gICAgICAgIHN3aXRjaCAocmVjdCkge1xyXG4gICAgICAgICAgICBjYXNlICdsZWZ0JzpcclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA8PSB0aGlzLnJlZmVyZW5jZUJvdW5kaW5nUmVjdC5sZWZ0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXNPdmVyID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZSA9IHRoaXMucmVmZXJlbmNlQm91bmRpbmdSZWN0LmxlZnQgKyB0aGlzLnJlY3RpZnlHdXR0ZXI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAncmlnaHQnOlxyXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID49IHRoaXMucmVmZXJlbmNlQm91bmRpbmdSZWN0LnJpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXNPdmVyID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZSA9IHRoaXMucmVmZXJlbmNlQm91bmRpbmdSZWN0LnJpZ2h0IC0gdGhpcy5yZWN0aWZ5R3V0dGVyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3RvcCc6XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPD0gdGhpcy5yZWZlcmVuY2VCb3VuZGluZ1JlY3QudG9wKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXNPdmVyID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZSA9IHRoaXMucmVmZXJlbmNlQm91bmRpbmdSZWN0LnRvcCArIHRoaXMucmVjdGlmeUd1dHRlcjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdib3R0b20nOlxyXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID49IHRoaXMucmVmZXJlbmNlQm91bmRpbmdSZWN0LmJvdHRvbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlzT3ZlciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWUgPSB0aGlzLnJlZmVyZW5jZUJvdW5kaW5nUmVjdC5ib3R0b20gLSB0aGlzLnJlY3RpZnlHdXR0ZXI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHsgaXNPdmVyLCBuZXdWYWx1ZSB9O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY29udGFpbnNFbChkYXRhcywgc3BlY2lhbEVsID0gJycpIHtcclxuICAgICAgICBpZiAoIXNwZWNpYWxFbCkge1xyXG4gICAgICAgICAgICBzcGVjaWFsRWwgPSB0aGlzLnJlY3RpZnlQbGFjZW1lbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGRhdGFzW2ldID09IHNwZWNpYWxFbClcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyog6K6h566XdG9vbHRpcOacgOaWsOS9jee9riAqL1xyXG4gICAgY2FsY3VsYXRlUG9zaXRpb24oaG9zdFBvc2l0aW9uOiBhbnkpIHtcclxuICAgICAgICBsZXQgdG9wID0gMDtcclxuICAgICAgICBsZXQgbGVmdCA9IDA7XHJcbiAgICAgICAgbGV0IHJpZ2h0ID0gMDtcclxuICAgICAgICBsZXQgYm90dG9tID0gMDtcclxuICAgICAgICAvLyDmlbTkuKrmj5DnpLrkvY3nva5cclxuICAgICAgICBjb25zdCB0b29sdGlwU2l6ZSA9IHRoaXMudG9vbHRpcE5vZGUubmF0aXZlRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICBjb25zdCBhcnJvd1NpemUgPSB0aGlzLmFycm93Tm9kZS5uYXRpdmVFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG5cclxuICAgICAgICBzd2l0Y2ggKHRoaXMucmVjdGlmeVBsYWNlbWVudCkge1xyXG4gICAgICAgICAgICBjYXNlICd0b3AnOlxyXG4gICAgICAgICAgICAgICAgdG9wID0gaG9zdFBvc2l0aW9uLnRvcCAtIHRvb2x0aXBTaXplLmhlaWdodCAtIDI7XHJcbiAgICAgICAgICAgICAgICBsZWZ0ID0gaG9zdFBvc2l0aW9uLmxlZnQgKyAoaG9zdFBvc2l0aW9uLndpZHRoIC0gdG9vbHRpcFNpemUud2lkdGgpIC8gMjtcclxuICAgICAgICAgICAgICAgIHJpZ2h0ID0gbGVmdCArIHRvb2x0aXBTaXplLndpZHRoO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2xlZnQnOlxyXG4gICAgICAgICAgICAgICAgdG9wID0gaG9zdFBvc2l0aW9uLnRvcCArIChob3N0UG9zaXRpb24uaGVpZ2h0IC0gdG9vbHRpcFNpemUuaGVpZ2h0KSAvIDI7XHJcbiAgICAgICAgICAgICAgICBsZWZ0ID0gaG9zdFBvc2l0aW9uLmxlZnQgLSB0b29sdGlwU2l6ZS53aWR0aCAtIDI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAncmlnaHQnOlxyXG4gICAgICAgICAgICAgICAgdG9wID0gaG9zdFBvc2l0aW9uLnRvcCArIChob3N0UG9zaXRpb24uaGVpZ2h0IC0gdG9vbHRpcFNpemUuaGVpZ2h0KSAvIDI7XHJcbiAgICAgICAgICAgICAgICBsZWZ0ID0gaG9zdFBvc2l0aW9uLnJpZ2h0ICsgMjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdib3R0b20nOlxyXG4gICAgICAgICAgICAgICAgdG9wID0gaG9zdFBvc2l0aW9uLmJvdHRvbSArIGFycm93U2l6ZS5oZWlnaHQgKyAyO1xyXG4gICAgICAgICAgICAgICAgbGVmdCA9IGhvc3RQb3NpdGlvbi5sZWZ0ICsgKGhvc3RQb3NpdGlvbi53aWR0aCAtIHRvb2x0aXBTaXplLndpZHRoKSAvIDI7XHJcbiAgICAgICAgICAgICAgICByaWdodCA9IGxlZnQgKyB0b29sdGlwU2l6ZS53aWR0aDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICd0b3AtbGVmdCc6XHJcbiAgICAgICAgICAgICAgICB0b3AgPSBob3N0UG9zaXRpb24udG9wIC0gdG9vbHRpcFNpemUuaGVpZ2h0IC0gMjtcclxuICAgICAgICAgICAgICAgIGxlZnQgPSBob3N0UG9zaXRpb24ubGVmdDtcclxuICAgICAgICAgICAgICAgIHJpZ2h0ID0gbGVmdCArIHRvb2x0aXBTaXplLndpZHRoO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3RvcC1yaWdodCc6XHJcbiAgICAgICAgICAgICAgICB0b3AgPSBob3N0UG9zaXRpb24udG9wIC0gdG9vbHRpcFNpemUuaGVpZ2h0IC0gMjtcclxuICAgICAgICAgICAgICAgIGxlZnQgPSBob3N0UG9zaXRpb24ucmlnaHQgLSB0b29sdGlwU2l6ZS53aWR0aDtcclxuICAgICAgICAgICAgICAgIHJpZ2h0ID0gaG9zdFBvc2l0aW9uLnJpZ2h0O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3JpZ2h0LXRvcCc6XHJcbiAgICAgICAgICAgICAgICB0b3AgPSBob3N0UG9zaXRpb24udG9wO1xyXG4gICAgICAgICAgICAgICAgbGVmdCA9IGhvc3RQb3NpdGlvbi5yaWdodCArIDI7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFycm93Tm9kZS5uYXRpdmVFbGVtZW50LnN0eWxlLnRvcCA9ICcxMCUnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3JpZ2h0LWJvdHRvbSc6XHJcbiAgICAgICAgICAgICAgICB0b3AgPSBob3N0UG9zaXRpb24uYm90dG9tIC0gdG9vbHRpcFNpemUuaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgbGVmdCA9IGhvc3RQb3NpdGlvbi5yaWdodCArIDI7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFycm93Tm9kZS5uYXRpdmVFbGVtZW50LnN0eWxlLmJvdHRvbSA9ICcxMCUnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2JvdHRvbS1sZWZ0JzpcclxuICAgICAgICAgICAgICAgIHRvcCA9IGhvc3RQb3NpdGlvbi5ib3R0b20gKyBhcnJvd1NpemUuaGVpZ2h0ICsgMjtcclxuICAgICAgICAgICAgICAgIGxlZnQgPSBob3N0UG9zaXRpb24ubGVmdDtcclxuICAgICAgICAgICAgICAgIHJpZ2h0ID0gbGVmdCArIHRvb2x0aXBTaXplLndpZHRoO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2JvdHRvbS1yaWdodCc6XHJcbiAgICAgICAgICAgICAgICB0b3AgPSBob3N0UG9zaXRpb24uYm90dG9tICsgYXJyb3dTaXplLmhlaWdodCArIDI7XHJcbiAgICAgICAgICAgICAgICBsZWZ0ID0gaG9zdFBvc2l0aW9uLnJpZ2h0IC0gdG9vbHRpcFNpemUud2lkdGg7XHJcbiAgICAgICAgICAgICAgICByaWdodCA9IGhvc3RQb3NpdGlvbi5yaWdodDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdsZWZ0LXRvcCc6XHJcbiAgICAgICAgICAgICAgICB0b3AgPSBob3N0UG9zaXRpb24udG9wO1xyXG4gICAgICAgICAgICAgICAgbGVmdCA9IGhvc3RQb3NpdGlvbi5sZWZ0IC0gdG9vbHRpcFNpemUud2lkdGggLSAyO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hcnJvd05vZGUubmF0aXZlRWxlbWVudC5zdHlsZS50b3AgPSAnMTAlJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdsZWZ0LWJvdHRvbSc6XHJcbiAgICAgICAgICAgICAgICB0b3AgPSBob3N0UG9zaXRpb24uYm90dG9tIC0gdG9vbHRpcFNpemUuaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgbGVmdCA9IGhvc3RQb3NpdGlvbi5sZWZ0IC0gdG9vbHRpcFNpemUud2lkdGggLSAyO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hcnJvd05vZGUubmF0aXZlRWxlbWVudC5zdHlsZS5ib3R0b20gPSAnMTAlJztcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IG92ZXJSZXN1bHQ7XHJcbiAgICAgICAgbGV0IGFycm93TGVmdCA9IDA7XHJcbiAgICAgICAgbGV0IGFycm93VG9wID0gMFxyXG4gICAgICAgIHN3aXRjaCAodGhpcy5yZWN0aWZ5UGxhY2VtZW50KSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ3RvcCc6XHJcbiAgICAgICAgICAgIGNhc2UgJ3RvcC1sZWZ0JzpcclxuICAgICAgICAgICAgY2FzZSAndG9wLXJpZ2h0JzpcclxuICAgICAgICAgICAgY2FzZSAnYm90dG9tJzpcclxuICAgICAgICAgICAgY2FzZSAnYm90dG9tLWxlZnQnOlxyXG4gICAgICAgICAgICBjYXNlICdib3R0b20tcmlnaHQnOlxyXG4gICAgICAgICAgICAgICAgb3ZlclJlc3VsdCA9IHRoaXMuaXNPdmVyQm91bmRpbmcoJ2xlZnQnLCBsZWZ0KTtcclxuICAgICAgICAgICAgICAgIGlmIChvdmVyUmVzdWx0LmlzT3Zlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGxlZnQgPSBvdmVyUmVzdWx0Lm5ld1ZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBvdmVyUmVzdWx0ID0gdGhpcy5pc092ZXJCb3VuZGluZygncmlnaHQnLCByaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG92ZXJSZXN1bHQuaXNPdmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQgPSBvdmVyUmVzdWx0Lm5ld1ZhbHVlIC0gdG9vbHRpcFNpemUud2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYXJyb3dMZWZ0ID0gbGVmdCAtIGhvc3RQb3NpdGlvbi5sZWZ0IC0gaG9zdFBvc2l0aW9uLndpZHRoICogMC41ICsgYXJyb3dTaXplLndpZHRoICogMC41O1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucmVjdGlmeVBsYWNlbWVudC5pbmRleE9mKCctbGVmdCcpID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFycm93TGVmdCArPSBob3N0UG9zaXRpb24ud2lkdGggKiAwLjQ7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucmVjdGlmeVBsYWNlbWVudC5pbmRleE9mKCctcmlnaHQnKSA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBhcnJvd0xlZnQgLT0gaG9zdFBvc2l0aW9uLndpZHRoICogMC40O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5hcnJvd05vZGUubmF0aXZlRWxlbWVudC5zdHlsZS5sZWZ0ID0gTWF0aC5hYnMoYXJyb3dMZWZ0KSArICdweCc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIG92ZXJSZXN1bHQgPSB0aGlzLmlzT3ZlckJvdW5kaW5nKCd0b3AnLCB0b3ApO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChvdmVyUmVzdWx0LmlzT3Zlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvcCA9IG92ZXJSZXN1bHQubmV3VmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIG92ZXJSZXN1bHQgPSB0aGlzLmlzT3ZlckJvdW5kaW5nKCdib3R0b20nLCBib3R0b20pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvdmVyUmVzdWx0LmlzT3Zlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3AgPSBvdmVyUmVzdWx0Lm5ld1ZhbHVlIC0gdG9vbHRpcFNpemUuaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGFycm93VG9wID0gdG9wIC0gaG9zdFBvc2l0aW9uLnRvcCAtIGhvc3RQb3NpdGlvbi5oZWlnaHQgKiAwLjUgKyBhcnJvd1NpemUuaGVpZ2h0ICogMC41OztcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlY3RpZnlQbGFjZW1lbnQuaW5kZXhPZignLXRvcCcpID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFycm93VG9wICs9IGhvc3RQb3NpdGlvbi5oZWlnaHQgKiAwLjQ7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucmVjdGlmeVBsYWNlbWVudC5pbmRleE9mKCctYm90dG9tJykgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXJyb3dUb3AgLT0gaG9zdFBvc2l0aW9uLmhlaWdodCAqIDAuNDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuYXJyb3dOb2RlLm5hdGl2ZUVsZW1lbnQuc3R5bGUudG9wID0gTWF0aC5hYnMoYXJyb3dUb3ApICsgJ3B4JztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy50b29sdGlwTm9kZS5uYXRpdmVFbGVtZW50LnN0eWxlLnRvcCA9IHRvcCArICdweCc7XHJcbiAgICAgICAgdGhpcy50b29sdGlwTm9kZS5uYXRpdmVFbGVtZW50LnN0eWxlLmxlZnQgPSBsZWZ0ICsgJ3B4JztcclxuXHJcbiAgICB9XHJcblxyXG4gICAgLyogXHJcbiAgICAqMTLkuKrkvY3nva7lkI3op6PmnpAgXHJcbiAgICAqIOWboOihqOWNleeUn+aIkOayoeacieaOkumZpGZhY3Rvcnks6ICM5LiU5L2/55So5LqGW2NsYXNzXSzlj6rog73lnKjmraTlpITlj5jmm7RcclxuICAgICovXHJcbiAgICBvZmZzZXREaXJlY3Rpb24odHBsYWNlbWVudCA9ICcnKSB7XHJcbiAgICAgICAgaWYgKCF0cGxhY2VtZW50KSB7XHJcbiAgICAgICAgICAgIHRwbGFjZW1lbnQgPSB0aGlzLnBsYWNlbWVudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRwbGFjZW1lbnQuaW5kZXhPZignLScpICE9PSAtMSkge1xyXG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IHRwbGFjZW1lbnQuaW5kZXhPZignLScpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHBsYWNlbWVudC5zdWJzdHJpbmcoMCwgaW5kZXgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHBsYWNlbWVudDtcclxuICAgIH1cclxufVxyXG4iXX0=