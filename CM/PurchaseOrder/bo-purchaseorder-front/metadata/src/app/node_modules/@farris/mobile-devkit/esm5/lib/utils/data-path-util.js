import { BindingPropertyType, PropertyUtil } from '../binding-data/index';
/**
 * 路径处理工具类（处理/PathNode1/PathNode2/...格式的路径）
 */
var DataPathUtil = /** @class */ (function () {
    function DataPathUtil() {
    }
    /**
     * 转换成BindingData可识别的路径
     */
    DataPathUtil.convertToBindingPathArray = function (path) {
        var bindingPathArray = path.split('/').filter(function (part) {
            return part !== '';
        });
        return bindingPathArray;
    };
    /**
     * 转换为Entity可识别的路径
     * 根：[]
     * 主表：['id:xxx', 'name'],
     * 关联：['id:xxx', 'deptInfo', 'id:xxx', 'name']
     * UDT: ['id:xxx', 'updateInfo', ':', 'createdOn']
     * 从表：['id:xxx', 'edus', 'id:xxx', 'name'],
     * 从从表：['id:xxx', 'edus', 'id:xxx', 'grades', 'id:xxx', 'name']
     */
    DataPathUtil.convertToEntityPathArray = function (path, bindingData) {
        var _this = this;
        var bindingPathArray = this.convertToBindingPathArray(path);
        var entityPathArray = [];
        if (bindingPathArray.length === 0) {
            return entityPathArray;
        }
        // 根节点
        var currentBindingObject = bindingData.list.currentItem;
        entityPathArray.push(this.createPrimaryKeyPath(currentBindingObject.primaryKey, currentBindingObject.primaryKeyValue));
        bindingPathArray.forEach(function (propName) {
            var propInfo = PropertyUtil.getPropertyByName(currentBindingObject.properties, propName);
            switch (propInfo.type) {
                case BindingPropertyType.Plain:
                    entityPathArray.push(propName);
                    break;
                case BindingPropertyType.Object:
                    currentBindingObject = currentBindingObject[propName];
                    entityPathArray.push(propName);
                    entityPathArray.push(_this.createPrimaryKeyPath(currentBindingObject.primaryKey, currentBindingObject.primaryKeyValue));
                    break;
                case BindingPropertyType.List:
                    var currentBindingList = currentBindingObject[propName];
                    currentBindingObject = currentBindingList.currentItem;
                    entityPathArray.push(propName);
                    entityPathArray.push(_this.createPrimaryKeyPath(currentBindingObject.primaryKey, currentBindingObject.primaryKeyValue));
                    break;
                default:
                    break;
            }
        });
        return entityPathArray;
    };
    /**
     * 转换为RestUrl里的路径
     *
     * 返回结果：
     * 主表（/）：/
     * 从表（/jiwtEdus）：/xxx/jiwtEdus
     * 从从表（/jiwtEdus/jiwtGrades）： /xxx/jiwtEdus/xxx/jiwtGrades
     */
    DataPathUtil.convertToRestUrl = function (path, bindingData) {
        var bindingPathArray = this.convertToBindingPathArray(path);
        var restPathArray = [];
        var currentBindingObject = bindingData.list.currentItem;
        restPathArray.push(currentBindingObject.primaryKeyValue);
        bindingPathArray.forEach(function (propName) {
            var propInfo = PropertyUtil.getPropertyByName(currentBindingObject.properties, propName);
            if (propInfo.type !== BindingPropertyType.List) {
                throw new Error(propInfo.name + "\u4E0D\u662F\u5B50\u8868\u5BF9\u5E94\u7684\u5C5E\u6027");
            }
            var currentBindingList = currentBindingObject[propName];
            currentBindingObject = currentBindingList.currentItem;
            restPathArray.push(propName);
            restPathArray.push(currentBindingObject.primaryKeyValue);
        });
        // 移除最后一个主键
        restPathArray.pop();
        return '/' + restPathArray.join('/');
    };
    /**
     * 获取叶子节点的Path
     */
    DataPathUtil.getLeafPath = function (path) {
        var pathArray = DataPathUtil.convertToBindingPathArray(path);
        return pathArray.pop();
    };
    /**
     * 获取父路径
     */
    DataPathUtil.getParentPath = function (path) {
        var pathArray = DataPathUtil.convertToBindingPathArray(path);
        pathArray.pop();
        return '/' + pathArray.join('/');
    };
    /**
     * 创建路径中的主键部分
     */
    DataPathUtil.createPrimaryKeyPath = function (primaryKey, primaryKeyValue) {
        return primaryKey + ":" + primaryKeyValue;
    };
    return DataPathUtil;
}());
export { DataPathUtil };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0YS1wYXRoLXV0aWwuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL21vYmlsZS1kZXZraXQvIiwic291cmNlcyI6WyJsaWIvdXRpbHMvZGF0YS1wYXRoLXV0aWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFlLG1CQUFtQixFQUFFLFlBQVksRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBQ3ZGOztHQUVHO0FBQ0g7SUFBQTtJQXNIQSxDQUFDO0lBcEhDOztPQUVHO0lBQ1csc0NBQXlCLEdBQXZDLFVBQXdDLElBQVk7UUFDbEQsSUFBTSxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxVQUFDLElBQVk7WUFDM0QsT0FBTyxJQUFJLEtBQUssRUFBRSxDQUFDO1FBQ3JCLENBQUMsQ0FBQyxDQUFDO1FBQ0gsT0FBTyxnQkFBZ0IsQ0FBQztJQUMxQixDQUFDO0lBRUQ7Ozs7Ozs7O09BUUc7SUFDVyxxQ0FBd0IsR0FBdEMsVUFBdUMsSUFBWSxFQUFFLFdBQXdCO1FBQTdFLGlCQXlDQztRQXhDQyxJQUFNLGdCQUFnQixHQUFhLElBQUksQ0FBQyx5QkFBeUIsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN4RSxJQUFNLGVBQWUsR0FBYSxFQUFFLENBQUM7UUFFckMsSUFBSSxnQkFBZ0IsQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFO1lBQ2pDLE9BQU8sZUFBZSxDQUFDO1NBQ3hCO1FBRUQsTUFBTTtRQUNOLElBQUksb0JBQW9CLEdBQUcsV0FBVyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUM7UUFDeEQsZUFBZSxDQUFDLElBQUksQ0FDbEIsSUFBSSxDQUFDLG9CQUFvQixDQUFDLG9CQUFvQixDQUFDLFVBQVUsRUFBRSxvQkFBb0IsQ0FBQyxlQUFlLENBQUMsQ0FDakcsQ0FBQztRQUVGLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxVQUFDLFFBQWdCO1lBQ3hDLElBQU0sUUFBUSxHQUFHLFlBQVks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QVMsQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUNoQixPQUFPLEdBQUcsR0FBRyxTQUFTLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ25DLENBQUM7SUFFRDs7T0FFRztJQUNZLGlDQUFvQixHQUFuQyxVQUFvQyxVQUFrQixFQUFFLGVBQXVCO1FBQzdFLE9BQVUsVUFBVSxTQUFJLGVBQWlCLENBQUM7SUFDNUMsQ0FBQztJQUNILG1CQUFDO0FBQUQsQ0FBQyxBQXRIRCxJQXNIQztBQUVELE9BQU8sRUFBRSxZQUFZLEVBQUUsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJpbmRpbmdEYXRhLCBCaW5kaW5nUHJvcGVydHlUeXBlLCBQcm9wZXJ0eVV0aWwgfSBmcm9tICcuLi9iaW5kaW5nLWRhdGEvaW5kZXgnO1xyXG4vKipcclxuICog6Lev5b6E5aSE55CG5bel5YW357G777yI5aSE55CGL1BhdGhOb2RlMS9QYXRoTm9kZTIvLi4u5qC85byP55qE6Lev5b6E77yJXHJcbiAqL1xyXG5jbGFzcyBEYXRhUGF0aFV0aWwge1xyXG5cclxuICAvKipcclxuICAgKiDovazmjaLmiJBCaW5kaW5nRGF0YeWPr+ivhuWIq+eahOi3r+W+hFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgY29udmVydFRvQmluZGluZ1BhdGhBcnJheShwYXRoOiBzdHJpbmcpOiBzdHJpbmdbXSB7XHJcbiAgICBjb25zdCBiaW5kaW5nUGF0aEFycmF5ID0gcGF0aC5zcGxpdCgnLycpLmZpbHRlcigocGFydDogc3RyaW5nKSA9PiB7XHJcbiAgICAgIHJldHVybiBwYXJ0ICE9PSAnJztcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGJpbmRpbmdQYXRoQXJyYXk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDovazmjaLkuLpFbnRpdHnlj6/or4bliKvnmoTot6/lvoRcclxuICAgKiDmoLnvvJpbXVxyXG4gICAqIOS4u+ihqO+8mlsnaWQ6eHh4JywgJ25hbWUnXSxcclxuICAgKiDlhbPogZTvvJpbJ2lkOnh4eCcsICdkZXB0SW5mbycsICdpZDp4eHgnLCAnbmFtZSddXHJcbiAgICogVURUOiBbJ2lkOnh4eCcsICd1cGRhdGVJbmZvJywgJzonLCAnY3JlYXRlZE9uJ11cclxuICAgKiDku47ooajvvJpbJ2lkOnh4eCcsICdlZHVzJywgJ2lkOnh4eCcsICduYW1lJ10sXHJcbiAgICog5LuO5LuO6KGo77yaWydpZDp4eHgnLCAnZWR1cycsICdpZDp4eHgnLCAnZ3JhZGVzJywgJ2lkOnh4eCcsICduYW1lJ11cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGNvbnZlcnRUb0VudGl0eVBhdGhBcnJheShwYXRoOiBzdHJpbmcsIGJpbmRpbmdEYXRhOiBCaW5kaW5nRGF0YSk6IHN0cmluZ1tdIHtcclxuICAgIGNvbnN0IGJpbmRpbmdQYXRoQXJyYXk6IHN0cmluZ1tdID0gdGhpcy5jb252ZXJ0VG9CaW5kaW5nUGF0aEFycmF5KHBhdGgpO1xyXG4gICAgY29uc3QgZW50aXR5UGF0aEFycmF5OiBzdHJpbmdbXSA9IFtdO1xyXG5cclxuICAgIGlmIChiaW5kaW5nUGF0aEFycmF5Lmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm4gZW50aXR5UGF0aEFycmF5O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOagueiKgueCuVxyXG4gICAgbGV0IGN1cnJlbnRCaW5kaW5nT2JqZWN0ID0gYmluZGluZ0RhdGEubGlzdC5jdXJyZW50SXRlbTtcclxuICAgIGVudGl0eVBhdGhBcnJheS5wdXNoKFxyXG4gICAgICB0aGlzLmNyZWF0ZVByaW1hcnlLZXlQYXRoKGN1cnJlbnRCaW5kaW5nT2JqZWN0LnByaW1hcnlLZXksIGN1cnJlbnRCaW5kaW5nT2JqZWN0LnByaW1hcnlLZXlWYWx1ZSlcclxuICAgICk7XHJcblxyXG4gICAgYmluZGluZ1BhdGhBcnJheS5mb3JFYWNoKChwcm9wTmFtZTogc3RyaW5nKSA9PiB7XHJcbiAgICAgIGNvbnN0IHByb3BJbmZvID0gUHJvcGVydHlVdGlsLmdldFByb3BlcnR5QnlOYW1lKGN1cnJlbnRCaW5kaW5nT2JqZWN0LnByb3BlcnRpZXMsIHByb3BOYW1lKTtcclxuICAgICAgc3dpdGNoIChwcm9wSW5mby50eXBlKSB7XHJcbiAgICAgICAgY2FzZSBCaW5kaW5nUHJvcGVydHlUeXBlLlBsYWluOlxyXG4gICAgICAgICAgZW50aXR5UGF0aEFycmF5LnB1c2gocHJvcE5hbWUpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBCaW5kaW5nUHJvcGVydHlUeXBlLk9iamVjdDpcclxuICAgICAgICAgIGN1cnJlbnRCaW5kaW5nT2JqZWN0ID0gY3VycmVudEJpbmRpbmdPYmplY3RbcHJvcE5hbWVdO1xyXG4gICAgICAgICAgZW50aXR5UGF0aEFycmF5LnB1c2gocHJvcE5hbWUpO1xyXG4gICAgICAgICAgZW50aXR5UGF0aEFycmF5LnB1c2goXHJcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlUHJpbWFyeUtleVBhdGgoY3VycmVudEJpbmRpbmdPYmplY3QucHJpbWFyeUtleSwgY3VycmVudEJpbmRpbmdPYmplY3QucHJpbWFyeUtleVZhbHVlKVxyXG4gICAgICAgICAgKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgQmluZGluZ1Byb3BlcnR5VHlwZS5MaXN0OlxyXG4gICAgICAgICAgY29uc3QgY3VycmVudEJpbmRpbmdMaXN0ID0gY3VycmVudEJpbmRpbmdPYmplY3RbcHJvcE5hbWVdO1xyXG4gICAgICAgICAgY3VycmVudEJpbmRpbmdPYmplY3QgPSBjdXJyZW50QmluZGluZ0xpc3QuY3VycmVudEl0ZW07XHJcbiAgICAgICAgICBlbnRpdHlQYXRoQXJyYXkucHVzaChwcm9wTmFtZSk7XHJcbiAgICAgICAgICBlbnRpdHlQYXRoQXJyYXkucHVzaChcclxuICAgICAgICAgICAgdGhpcy5jcmVhdGVQcmltYXJ5S2V5UGF0aChjdXJyZW50QmluZGluZ09iamVjdC5wcmltYXJ5S2V5LCBjdXJyZW50QmluZGluZ09iamVjdC5wcmltYXJ5S2V5VmFsdWUpXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBlbnRpdHlQYXRoQXJyYXk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDovazmjaLkuLpSZXN0VXJs6YeM55qE6Lev5b6EXHJcbiAgICpcclxuICAgKiDov5Tlm57nu5PmnpzvvJpcclxuICAgKiDkuLvooajvvIgv77yJ77yaL1xyXG4gICAqIOS7juihqO+8iC9qaXd0RWR1c++8ie+8mi94eHgvaml3dEVkdXNcclxuICAgKiDku47ku47ooajvvIgvaml3dEVkdXMvaml3dEdyYWRlc++8ie+8miAveHh4L2ppd3RFZHVzL3h4eC9qaXd0R3JhZGVzXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBjb252ZXJ0VG9SZXN0VXJsKHBhdGg6IHN0cmluZywgYmluZGluZ0RhdGE6IEJpbmRpbmdEYXRhKTogc3RyaW5nIHtcclxuICAgIGNvbnN0IGJpbmRpbmdQYXRoQXJyYXk6IHN0cmluZ1tdID0gdGhpcy5jb252ZXJ0VG9CaW5kaW5nUGF0aEFycmF5KHBhdGgpO1xyXG4gICAgY29uc3QgcmVzdFBhdGhBcnJheTogc3RyaW5nW10gPSBbXTtcclxuXHJcbiAgICBsZXQgY3VycmVudEJpbmRpbmdPYmplY3QgPSBiaW5kaW5nRGF0YS5saXN0LmN1cnJlbnRJdGVtO1xyXG4gICAgcmVzdFBhdGhBcnJheS5wdXNoKGN1cnJlbnRCaW5kaW5nT2JqZWN0LnByaW1hcnlLZXlWYWx1ZSk7XHJcblxyXG4gICAgYmluZGluZ1BhdGhBcnJheS5mb3JFYWNoKChwcm9wTmFtZTogc3RyaW5nKSA9PiB7XHJcbiAgICAgIGNvbnN0IHByb3BJbmZvID0gUHJvcGVydHlVdGlsLmdldFByb3BlcnR5QnlOYW1lKGN1cnJlbnRCaW5kaW5nT2JqZWN0LnByb3BlcnRpZXMsIHByb3BOYW1lKTtcclxuICAgICAgaWYgKHByb3BJbmZvLnR5cGUgIT09IEJpbmRpbmdQcm9wZXJ0eVR5cGUuTGlzdCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgJHtwcm9wSW5mby5uYW1lfeS4jeaYr+WtkOihqOWvueW6lOeahOWxnuaAp2ApO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IGN1cnJlbnRCaW5kaW5nTGlzdCA9IGN1cnJlbnRCaW5kaW5nT2JqZWN0W3Byb3BOYW1lXTtcclxuICAgICAgY3VycmVudEJpbmRpbmdPYmplY3QgPSBjdXJyZW50QmluZGluZ0xpc3QuY3VycmVudEl0ZW07XHJcbiAgICAgIHJlc3RQYXRoQXJyYXkucHVzaChwcm9wTmFtZSk7XHJcbiAgICAgIHJlc3RQYXRoQXJyYXkucHVzaChjdXJyZW50QmluZGluZ09iamVjdC5wcmltYXJ5S2V5VmFsdWUpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8g56e76Zmk5pyA5ZCO5LiA5Liq5Li76ZSuXHJcbiAgICByZXN0UGF0aEFycmF5LnBvcCgpO1xyXG4gICAgcmV0dXJuICcvJyArIHJlc3RQYXRoQXJyYXkuam9pbignLycpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6I635Y+W5Y+25a2Q6IqC54K555qEUGF0aFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0TGVhZlBhdGgocGF0aDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIGNvbnN0IHBhdGhBcnJheSA9IERhdGFQYXRoVXRpbC5jb252ZXJ0VG9CaW5kaW5nUGF0aEFycmF5KHBhdGgpO1xyXG4gICAgcmV0dXJuIHBhdGhBcnJheS5wb3AoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiOt+WPlueItui3r+W+hFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0UGFyZW50UGF0aChwYXRoOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgY29uc3QgcGF0aEFycmF5ID0gRGF0YVBhdGhVdGlsLmNvbnZlcnRUb0JpbmRpbmdQYXRoQXJyYXkocGF0aCk7XHJcbiAgICBwYXRoQXJyYXkucG9wKCk7XHJcbiAgICByZXR1cm4gJy8nICsgcGF0aEFycmF5LmpvaW4oJy8nKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWIm+W7uui3r+W+hOS4reeahOS4u+mUrumDqOWIhlxyXG4gICAqL1xyXG4gIHByaXZhdGUgc3RhdGljIGNyZWF0ZVByaW1hcnlLZXlQYXRoKHByaW1hcnlLZXk6IHN0cmluZywgcHJpbWFyeUtleVZhbHVlOiBzdHJpbmcpIHtcclxuICAgIHJldHVybiBgJHtwcmltYXJ5S2V5fToke3ByaW1hcnlLZXlWYWx1ZX1gO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IHsgRGF0YVBhdGhVdGlsIH07XHJcbiJdfQ==