{"version":3,"file":"farris-ui-datagrid.umd.js","sources":["../../../../node_modules/tslib/tslib.es6.js","ng://@farris/ui-datagrid/lib/types/data-column.ts","ng://@farris/ui-datagrid/lib/types/constant.ts","ng://@farris/ui-datagrid/lib/services/state.ts","ng://@farris/ui-datagrid/lib/utils/utils.ts","ng://@farris/ui-datagrid/lib/services/datagrid-columns.helper.ts","ng://@farris/ui-datagrid/lib/services/datagrid-facade.service.ts","ng://@farris/ui-datagrid/lib/services/datagrid.service.ts","ng://@farris/ui-datagrid/lib/services/rest.service.ts","ng://@farris/ui-datagrid/lib/types/datagrid-validator.ts","ng://@farris/ui-datagrid/lib/services/validator-messager.service.ts","ng://@farris/ui-datagrid/lib/services/domhandler.ts","ng://@farris/ui-datagrid/lib/services/datagrid-filter.service.ts","ng://@farris/ui-datagrid/lib/pagination/ngx-pagination.module.ts","ng://@farris/ui-datagrid/lib/pagination/pagination.service.ts","ng://@farris/ui-datagrid/lib/scrollbar/scrollbar.interfaces.ts","ng://@farris/ui-datagrid/lib/scrollbar/scrollbar.directive.ts","ng://@farris/ui-datagrid/lib/scrollbar/scrollbar.component.ts","ng://@farris/ui-datagrid/lib/scrollbar/arrow/scrollbar-arrows.component.ts","ng://@farris/ui-datagrid/lib/scrollbar/scrollbar.module.ts","ng://@farris/ui-datagrid/lib/components/columns/column-cell-edit.directive.ts","ng://@farris/ui-datagrid/lib/components/columns/datagrid-column.directive.ts","ng://@farris/ui-datagrid/lib/components/filter-toolbar/smart-filter-toolbar.component.ts","ng://@farris/ui-datagrid/lib/plugins/smart-filter/controlData/filter-control.options.ts","ng://@farris/ui-datagrid/lib/services/datagrid-smart-filter.service.ts","ng://@farris/ui-datagrid/lib/services/selection-mode.service.ts","ng://@farris/ui-datagrid/lib/datagrid.component.ts","ng://@farris/ui-datagrid/lib/plugins/smart-filter/datagrid-smart-filter.component.ts","ng://@farris/ui-datagrid/lib/plugins/smart-filter/datagrid-smart-filter.module.ts","ng://@farris/ui-datagrid/lib/utils/format-cell-data.pipe.ts","ng://@farris/ui-datagrid/lib/components/body/datagrid-body.component.ts","ng://@farris/ui-datagrid/lib/components/body/datagrid-row-hover.directive.ts","ng://@farris/ui-datagrid/lib/components/body/datagrid-row.directive.ts","ng://@farris/ui-datagrid/lib/components/editors/cell-editor.directive.ts","ng://@farris/ui-datagrid/lib/utils/safe.pipe.ts","ng://@farris/ui-datagrid/lib/components/body/datagrid-cell.component.ts","ng://@farris/ui-datagrid/lib/components/body/datagrid-cell-editable.directive.ts","ng://@farris/ui-datagrid/lib/components/body/datagrid-rows.component.ts","ng://@farris/ui-datagrid/lib/components/editors/text-editor.component.ts","ng://@farris/ui-datagrid/lib/components/header/datagrid-header.component.ts","ng://@farris/ui-datagrid/lib/components/header/datagrid-resize-column.directive.ts","ng://@farris/ui-datagrid/lib/components/footer/datagrid-footer.component.ts","ng://@farris/ui-datagrid/lib/components/pager/pager.component.ts","ng://@farris/ui-datagrid/lib/components/loading.component.ts","ng://@farris/ui-datagrid/lib/components/pager/selected-list/selected-list.component.ts","ng://@farris/ui-datagrid/lib/components/pager/selected-item.pipe.ts","ng://@farris/ui-datagrid/lib/datagrid-error-handler.ts","ng://@farris/ui-datagrid/lib/components/checkbox/datagrid-checkbox.component.ts","ng://@farris/ui-datagrid/lib/components/checkbox/datagrid-header-checkbox.component.ts","ng://@farris/ui-datagrid/lib/utils/rowid.pipe.ts","ng://@farris/ui-datagrid/lib/utils/format-group-row.pipe.ts","ng://@farris/ui-datagrid/lib/components/body/fixed-left-rows.component.ts","ng://@farris/ui-datagrid/lib/utils/rexplaceX.pipe.ts","ng://@farris/ui-datagrid/lib/components/body/datagrid-grouprow.directive.ts","ng://@farris/ui-datagrid/lib/utils/show-required-label.pipe.ts","ng://@farris/ui-datagrid/lib/utils/disable-row.pipe.ts","ng://@farris/ui-datagrid/lib/utils/select-row.pipe.ts","ng://@farris/ui-datagrid/lib/utils/field-value.pipe.ts","ng://@farris/ui-datagrid/lib/components/tooltip/cell-tooltip.directive.ts","ng://@farris/ui-datagrid/lib/components/tooltip/tip-message.pipe.ts","ng://@farris/ui-datagrid/lib/components/filter-toolbar/filter-toolbar.component.ts","ng://@farris/ui-datagrid/lib/components/header/header-style.directive.ts","ng://@farris/ui-datagrid/lib/components/auto-height/auto-height.component.ts","ng://@farris/ui-datagrid/lib/utils/row-is-selected.pipe.ts","ng://@farris/ui-datagrid/lib/utils/row-is-checked.pipe.ts","ng://@farris/ui-datagrid/lib/components/auto-height/auto-height.directive.ts","ng://@farris/ui-datagrid/lib/components/body/datagrid-row-dblclick.directive.ts","ng://@farris/ui-datagrid/lib/components/footer/datagrid-footer-cell.styler.directive.ts","ng://@farris/ui-datagrid/lib/components/header/drag-drop-column.service.ts","ng://@farris/ui-datagrid/lib/components/header/datagrid-drag-column.directive.ts","ng://@farris/ui-datagrid/lib/components/header/datagrid-drop-column.directive.ts","ng://@farris/ui-datagrid/lib/components/body/datagrid-group-footer-styler.directive.ts","ng://@farris/ui-datagrid/lib/utils/cell-readonly.pipe.ts","ng://@farris/ui-datagrid/lib/datagrid.module.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @Date: 2019-08-06 07:43:07\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-11-11 09:52:46\r\n * @Company: Inspur\r\n * @Version: v0.0.1\r\n */\r\nimport { TemplateRef } from '@angular/core';\r\nimport { ColumnFormatter } from '@farris/ui-common/column';\r\nimport { DatagridValidator } from './datagrid-validator';\r\nimport { Compare } from '@farris/ui-common/types';\r\n\r\nexport interface CustomStyle {\r\n    cls?: string;\r\n    style?: {\r\n        [key: string]: string;\r\n    };\r\n}\r\n\r\nexport type MoveDirection = 'left' | 'right' | 'up' | 'down';\r\ntype TooltipContentFn = (value: any, rowData: any, column: any) => string;\r\ntype TooltipContent = string | TooltipContentFn;\r\nexport type HeaderStyleFn = (column: DataColumn) => CustomStyle;\r\ntype HeaderStyle = string | { [cssKey: string]: string } | HeaderStyleFn;\r\n\r\ntype ColumnFormatterFn = (value, rowData, rowIndex) => any;\r\ntype ColumnFormatterType = ColumnFormatterFn | ColumnFormatter;\r\nexport interface DataColumn {\r\n    dataType?: string;\r\n    id?: string;\r\n    parentId?: any;\r\n    field: string;\r\n    title: string;\r\n    width: number;\r\n    /** è®°å½åå§å®ä¹å®½åº¦ */\r\n    originalWidth?: number;\r\n    /** æ é¢å¯¹é½æ¹å¼ */\r\n    halign?: 'left' | 'center' | 'right';\r\n    /** ææ¬å¯¹é½æ¹å¼ */\r\n    align?: 'left' | 'center' | 'right';\r\n    /** åç´å¯¹é½æ¹å¼ */\r\n    valign?: 'top' | 'middle' | 'bottom';\r\n\r\n    formatter?: ColumnFormatterType;\r\n    styler?: (value, rowData, rowIndex) => CustomStyle;\r\n    /** è¡¨å¤´èªå®ä¹æ ·å¼ */\r\n    headerStyler?: HeaderStyle;\r\n    /** å·¦ä¾§è¾¹è· */\r\n    left?: number;\r\n    /** å³ä¾§è¾¹è· */\r\n    right?: number;\r\n    /** æ¯å¦åºå® */\r\n    fixed?: 'left' | 'right' | 'center';\r\n    /** æ¯å¦æ¾ç¤º */\r\n    visible?: boolean | any;\r\n    /** åªè¯» */\r\n    readonly?: boolean | any;\r\n\r\n    editor?: GridEditor;\r\n    /** ååæ ¼èªå®ä¹æ¨¡æ¿ */\r\n    template?: TemplateRef<any>;\r\n    /** è¡¨å³æ¨¡æ¿ */\r\n    headerTemplate?: TemplateRef<any>;\r\n    /** ç¼è¾å¨æ¨¡æ¿ */\r\n    editorTemplate?: TemplateRef<any>;\r\n    /** é¼ æ ç§»å¨è³ååæ ¼åï¼æ¾ç¤ºæ¬æµ®æ¶æ¯ */\r\n    showTips?: boolean;\r\n    /** ååæ ¼æç¤ºæ¨¡å¼ï¼\r\n     *  allwaysï¼ é¼ æ æ»è¿å³æ¾ç¤º\r\n     *  auto: ååæ ¼å®½åº¦ä¸å¤æ¶æä¼æ¾ç¤º\r\n     */\r\n    tipMode?: 'allways' | 'auto';\r\n    tipContent?: TooltipContent;\r\n    tipOptions?: any;\r\n    /** True to allow the column can be sorted. */\r\n    sortable?: boolean;\r\n    order?: 'asc' | 'desc';\r\n    sorter?: (r1: any, r2: any) => 0 | 1 | -1;\r\n    /** True to allow the column can be resized. */\r\n    resizable?: boolean;\r\n    rowspan?: number;\r\n    /** ååå¹¶ */\r\n    colspan?: number;\r\n    /** ååå¹¶åå§å¼  */\r\n    origianlColSpan?: number;\r\n    index?: number;\r\n    footer?: GridFooterRow;\r\n    /** åè®¸åç»ï¼é»è®¤ä¸º true */\r\n    allowGrouping?: boolean;\r\n    groupFooter?: GridFooterRow;\r\n    validators?: DatagridValidator[];\r\n    // è¿æ»¤è¡\r\n    filter?: ColumnFilter | any;\r\n    /** æ¯å¦å¤è¯­å­æ®µ */\r\n    isMultilingualField?: boolean;\r\n\r\n    /** ç©ºæ ¼é®ååºåè°å½æ° */\r\n    onSpaceHandler?: (e) => any;\r\n    /** åè½¦ååºåè°å½æ° */\r\n    onEnterHandler?: (e) => any;\r\n}\r\n\r\nexport enum ColumnFilterType {\r\n    string = 0,\r\n    number = 1,\r\n    boolean = 2,\r\n    date = 3,\r\n    time = 4,\r\n    datetime = 5,\r\n    enum = 6,\r\n    fromdata = 7\r\n}\r\n/** Client Filter Type */\r\nexport interface FilterCondition {\r\n    operator1?: Compare;\r\n    value1?: any;\r\n    relation?: 'and' | 'or' | '';\r\n    operator2?: Compare;\r\n    value2?: any;\r\n}\r\n\r\nexport interface ColumnFilter {\r\n    type?: ColumnFilterType;\r\n    enableOperator?: boolean;\r\n    options?: any;\r\n}\r\n\r\nexport interface GridEditor {\r\n    type: string;\r\n    options?: any;\r\n    validators?: DatagridValidator[];\r\n}\r\n\r\nexport interface ColumnGroup {\r\n    /** å·¦ä¾§åºå®åæ»å®½åº¦ */\r\n    leftFixedWidth?: number;\r\n    /** å·¦ä¾§åºå®åéå */\r\n    leftFixed?: DataColumn[];\r\n    /** éåºå®åéå */\r\n    normalColumns?: DataColumn[];\r\n    /** å³ä¾§åºå®åéå */\r\n    rightFixed?: DataColumn[];\r\n\r\n    columns?: DataColumn[];\r\n    /** å³ä¾§åºå®åå®½åº¦ */\r\n    rightFixedWidth?: number;\r\n    /** æ­£å¸¸å®½åº¦ */\r\n    normalWidth?: number;\r\n    /** ææåå®½åº¦ä¹å */\r\n    totalWidth?: number;\r\n    /** ç¨æ·è®¾ç½®çåå®½ä¹å */\r\n    originalTotalWidth?: number;\r\n}\r\n\r\nexport interface PaginationInfo {\r\n    enable?: boolean;\r\n    pageList?: number[];\r\n    pageSize?: number;\r\n    pageIndex?: number;\r\n    total?: number;\r\n}\r\n\r\nexport enum CalculationType {\r\n    /** æ  */\r\n    none = -1,\r\n    /** æå¤§å¼ */\r\n    max = 0,\r\n    /** æå°å¼ */\r\n    min,\r\n    /** æ±å */\r\n    sum,\r\n    /** å¹³åæ° */\r\n    average,\r\n    /** æ»è®°å½æ° */\r\n    count\r\n}\r\n\r\nexport interface GridFooterRow {\r\n    options?: {\r\n        /** è®¡ç®ç±»å */\r\n        calculationType?: CalculationType,\r\n        /** éæææ¬ï¼ç´æ¥éå å°TD ä¸­ */\r\n        text?: string;\r\n    };\r\n    /** ææ¬å¯¹é½æ¹å¼ */\r\n    align?: 'left' | 'center' | 'right';\r\n    /** æ°æ®æ ¼å¼å */\r\n    formatter?: (value, rowData, rowIndex) => any | ColumnFormatter;\r\n    /** ååæ ¼æ ·å¼ */\r\n    styler?: (value, rowData, rowIndex) => CustomStyle;\r\n    rowspan?: number;\r\n    colspan?: number;\r\n    visible?: boolean;\r\n}\r\n\r\n\r\nexport const defaultPaginationInfo: PaginationInfo = {\r\n    enable: true,\r\n    pageIndex: 1,\r\n    pageSize: 10\r\n};\r\n","/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @Date: 2019-08-06 07:43:07\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-11-11 10:48:38\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\n\r\nimport { InjectionToken } from '@angular/core';\r\nexport const GRID_EDITORS = new InjectionToken('Farris DataGrid Editors.');\r\nexport const GRID_VALIDATORS = new InjectionToken('Farris DataGrid Validators.');\r\nexport const GRID_FILTER_ROW = new InjectionToken('Farris DataGrid Filter-Row Component.');\r\n\r\nexport const GRID_SETTINGS_PANEL = new InjectionToken('Farris DataGrid Setting Panel Component.');\r\nexport const GRID_SETTINGS_SERVICE = new InjectionToken('Farris DataGrid Setting Service.');\r\nexport const GRID_SETTINGS_HTTP = new InjectionToken(' Datagrid Settings HttpClient.');\r\n\r\nexport const SCROLL_Y_ACTION = 'psScrollY';\r\nexport const SCROLL_X_ACTION = 'psScrollX';\r\nexport const SCROLL_UP_ACTION = 'psScrollUp';\r\nexport const SCROLL_DOWN_ACTION = 'psScrollDown';\r\nexport const SCROLL_LEFT_ACTION = 'psScrollLeft';\r\nexport const SCROLL_RIGHT_ACTION = 'psScrollRight';\r\nexport const SCROLL_Y_REACH_END_ACTION = 'psYReachEnd';\r\nexport const SCROLL_Y_REACH_START_ACTION = 'psYReachStart';\r\nexport const SCROLL_X_REACH_END_ACTION = 'psXReachEnd';\r\nexport const SCROLL_X_REACH_START_ACTION = 'psXReachStart';\r\n\r\nexport const DATAGRID_SETTING_FIELDNAME = '_DATAGRID_CONTROL_PANEL_';\r\n\r\n/** å·¦ä¾§åºå®åé´å½±æ ·å¼åç§° */\r\nexport const FIXED_LEFT_SHADOW_CLS = 'f-datagrid-fixed-left-shadow';\r\nexport const FIXED_RIGHT_SHADOW_CLS = 'f-datagrid-fixed-right-shadow';\r\n\r\nexport const ROW_HOVER_CLS = 'f-datagrid-row-hover';\r\n\r\nexport const ROW_SELECTED_CLS = 'f-datagrid-row-selected';\r\n\r\nexport const CELL_SELECTED_CLS = 'f-datagrid-cell-selected';\r\n\r\nexport const CELL_EDITING_CLS = 'f-datagrid-cell-editing';\r\n\r\n/** è¡é«å°ºå¯¸å®ä¹ */\r\nexport const SIZE_TYPE = {\r\n    sm: {\r\n        row: 29,      // è¡é«\r\n        header: 34,   // è¡¨å¤´è¡é«\r\n        pager:  40    // åé¡µæ¡é«åº¦\r\n    },\r\n    md: {\r\n        row: 36,\r\n        header: 40,\r\n        pager:  44\r\n    },\r\n    lg: {\r\n        row: 46,\r\n        header: 40,\r\n        pager:  44\r\n    },\r\n    xl: {\r\n        row: 60,\r\n        header: 40,\r\n        pager:  44\r\n    },\r\n};\r\n\r\n/** åè®¸ç¼è¾æ¶ï¼éç®æ¾ç¤ºå¯ç¼è¾ååæ ¼çæ ·å¼ */\r\nexport const ALLOW_EDIT_CELL_HIGHLIGHT_CLS = {\r\n    datagrid: 'highlight-allowedit-cell',\r\n    textarea: 'cell-textarea',\r\n    textbox: 'cell-textbox',\r\n    checkbox: 'cell-checkbox',\r\n    datepicker: 'cell-datepicker',\r\n    'input-group': 'cell-input-group',\r\n    select: 'cell-combolist',\r\n    lookup: 'cell-lookup',\r\n    numberbox: 'cell-numberbox',\r\n    combolist: 'cell-combolist',\r\n    'combo-lookup': 'cell-combolist',\r\n    switch: 'cell-switch',\r\n    timepicker: 'cell-timepicker',\r\n    'language-textbox': 'cell-language-textbox',\r\n    'enum-editor': 'cell-enum-editor'\r\n};\r\n\r\n\r\nexport const TR_PREFIX = 'row_';\r\nexport const TR_ID_PREFIX = '#row_';\r\n","/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @Date: 2019-08-12 07:47:12\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-11-19 20:30:44\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\nimport { ColumnGroup, DataColumn, FilterCondition} from './../types';\r\nimport { EntityFilter } from '@farris/ui-common/types';\r\n\r\nexport interface RowDataChanges {[id: string]: any; }\r\n\r\nexport interface FarrisDatagridState {\r\n    [key: string]: any;\r\n    width?: number;\r\n    height?: number;\r\n    rowHeight?: number;\r\n    idField?: string;\r\n    data?: any;\r\n    /** å½åé¡µæ°æ® */\r\n    currentPageData?: any;\r\n    originalData?: any;\r\n    showHeader?: boolean;\r\n    headerHeight?: number;\r\n    pageIndex?: number;\r\n    pageSize?: number;\r\n    pagerHeight?: number;\r\n    pagination?: boolean;\r\n    columns: Array<DataColumn> | Array<DataColumn>[];\r\n    flatColumns?: Array<DataColumn>;\r\n    fitColumns: boolean;\r\n    autoFitColumns?: boolean;\r\n    showLineNumber?: boolean;\r\n    showCheckbox?: boolean;\r\n    checkboxColumnWidth: number;\r\n    multiSelect?: boolean;\r\n    /** å½å¯ç¨å¤éæ¶ï¼ç¹å»è¡éä¸­ï¼åªåè®¸ä¸åªæä¸è¡è¢«éä¸­ã */\r\n    onlySelectSelf: boolean;\r\n    selectOnCheck: boolean;\r\n    checkOnSelect: boolean;\r\n    selections?: SelectedRow[];\r\n    checkedRows?: SelectedRow[];\r\n    currentRow?: SelectedRow;\r\n    currentCell?: CellInfo;\r\n    columnsGroup: ColumnGroup;\r\n    virtualized?: boolean;\r\n    showFooter?: boolean;\r\n    /** æ¯å¦å¯ç¨å¼æ­¥èæå è½½æ°æ®: false - å®¢æ·ç«¯åå­ä¸­åæ°ï¼true - è¿ç«¯æå¡å¨å è½½æ°æ®, é»è®¤å¼ä¸º false */\r\n    virtualizedAsyncLoad?: boolean;\r\n    virtual?: VirtualizedState;\r\n    sortName?: string;\r\n    sortOrder?: string;\r\n    multiSort?: boolean;\r\n    remoteSort?: boolean;\r\n    /** æå¡å¨ç«¯è¿æ»¤ */\r\n    remoteFilter?: boolean;\r\n    /** è¿æ»¤æ¡ä»¶ */\r\n    conditions?: EntityFilter | FilterCondition;\r\n    changes: RowDataChanges;\r\n    // å¯ç¨è¡åç»\r\n    groupRows?: boolean;\r\n    // åç»å­æ®µ\r\n    groupField?: string;\r\n    // åç»åè®¡è¡\r\n    groupFooter?: boolean;\r\n    /** æ¾ç¤ºåç»å */\r\n    showGroupColumn?: boolean;\r\n    mergeCell?: boolean;\r\n    enableClientSortForMergeCell?: boolean;\r\n    /** å­å¨ç»ä»¶åå§æ¶çç¸å³å±æ§è®¾ç½® */\r\n    initialOptions?: any;\r\n}\r\n\r\nexport interface VirtualizedState {\r\n    /** èæå è½½ä¸ä¸æ¾ç¤ºåé¡µæ¡æ¶ï¼è®°å½å è½½æ°è®°å½æ¶çç´¢å¼å¼ */\r\n    rowIndex: number;\r\n    /** æ°æ®æ¾ç¤ºçç´¢å¼å¼ */\r\n    startIndex?: number;\r\n    scrollTop?: number;\r\n    virtualRows?: any;\r\n    topHideHeight?: number;\r\n    bottomHideHeight?: number;\r\n    /** é¡µèæ°æ® */\r\n    footer?: any[];\r\n    /** æ¯å¦ç±æ»å¨æ¡è§¦å */\r\n    isScrollChange?: boolean;\r\n}\r\n\r\nexport interface SelectedRow {\r\n    index: number;\r\n    id: any;\r\n    data: any;\r\n    /** ä¸­é´ä½ç½®è¡å¼ç¨ */\r\n    dr?: any;\r\n    /** å·¦ä¾§ä½ç½®è¡å¼ç¨ */\r\n    drl?: any;\r\n    /** å³ä¾§ä½ç½®è¡å¼ç¨ */\r\n    drr?: any;\r\n    editors?: any[];\r\n}\r\n\r\nexport const initDataGridState: FarrisDatagridState = {\r\n    idField: 'id',\r\n    showLineNumber: false,\r\n    selections: [],\r\n    checkedRows: [],\r\n    currentRow: null,\r\n    columnsGroup: null,\r\n    columns: [],\r\n    fitColumns: false,\r\n    onlySelectSelf: true,\r\n    selectOnCheck: true,\r\n    checkOnSelect: true,\r\n    pageIndex: 1,\r\n    pageSize: 20,\r\n    pagerHeight: 40,\r\n    checkboxColumnWidth: 36,\r\n    pagination: false,\r\n    virtual: {\r\n        rowIndex: 0,\r\n        scrollTop: 0,\r\n        topHideHeight: 0,\r\n        bottomHideHeight: 0,\r\n        isScrollChange: false\r\n    },\r\n    sortName: undefined,\r\n    sortOrder: undefined,\r\n    multiSort: false,\r\n    remoteSort: true,\r\n    changes: null,\r\n    showGroupColumn: false\r\n};\r\n\r\nexport interface CellInfo {\r\n    isEditing?: boolean;\r\n    rowData?: any;\r\n    rowId?: any;\r\n    rowIndex?: number;\r\n    field?: string;\r\n    cellElement?: any;\r\n    cellRef?: any;\r\n    editor?: any;\r\n    column?: any;\r\n    cellEditorRef?: any;   //  GridCellEditorDirective\r\n    lastRow?: boolean;\r\n}\r\n\r\nexport interface DataResult {\r\n    footer?: any[];\r\n    items: any[];\r\n    total?: number;\r\n    pageIndex?: number;\r\n    pageSize?: number;\r\n}\r\n/** è¡ç´¢å¼ */\r\nexport const ROW_INDEX_FIELD = '__row_index__';\r\n/** æ¯å¦ä¸ºåç»è¡ */\r\nexport const IS_GROUP_ROW_FIELD = '__group__';\r\n/** å¼ç¨çåç»è¡å±æ§ */\r\nexport const GROUP_ROW_FIELD = '__group_parent_id__';\r\n/** æ¯å¦ä¸ºåç»åè®¡è¡ */\r\nexport const IS_GROUP_FOOTER_ROW_FIELD = '__group_footer__';\r\nexport const GROUP_VISIBLE_FIELD = '__group_visible__';\r\nexport const GROUP_LEVEL_FIELD = '__group_level__';\r\n\r\n\r\nexport interface DatagridGroupRow {\r\n    /** æ è¯æ­¤æ°æ®è¡ä¸ºåç»è¡ */\r\n    [IS_GROUP_ROW_FIELD]: boolean;\r\n    /** åç»ç­çº§ */\r\n    level: number;\r\n    /** æå¨è¡æ°æ® */\r\n    data: any;\r\n    /** åç»å­æ®µå¼ */\r\n    value: any;\r\n    /** åç»è¡æ¯å¦å¯è§ */\r\n    [GROUP_VISIBLE_FIELD]: boolean;\r\n    /** æ¯å¦å±å¼åç»è¡ */\r\n    expanded: boolean;\r\n    /** åç»å­æ®µ */\r\n    field: string;\r\n    colspan: number;\r\n    /** åç»æ»è®°å½æ° */\r\n    total: number;\r\n    /** åç»æ°æ®è¡ */\r\n    rows: any;\r\n    /** ç¶çº§åç»è¡ */\r\n    [GROUP_ROW_FIELD]: any;\r\n}\r\n\r\n\r\nexport const IgnoreProperties = [\r\n    'afterEdit',\r\n    'app',\r\n    'beforeCheck',\r\n    'beforeClickCell',\r\n    'beforeEdit',\r\n    'beforeSelect',\r\n    'beforeSortColumn',\r\n    'beforeUncheck',\r\n    'beforeUnselect',\r\n    'beginEdit',\r\n    'cancelEdited',\r\n    'cd',\r\n    'cellClick',\r\n    'checkAll',\r\n    'checkValuesChange',\r\n    'checked',\r\n    'checkedChange',\r\n    'clientFilterService',\r\n    'colFormatSer',\r\n    'columnMoved',\r\n    'columnSorted',\r\n    'dataChange',\r\n    'dblclickRow',\r\n    'destroy$',\r\n    'dfs',\r\n    'dgColumns',\r\n    'dgContainer',\r\n    'dgPager',\r\n    'dgs',\r\n    'domSanitizer',\r\n    'editors',\r\n    'el',\r\n    'endEdit',\r\n    'farrisInstances',\r\n    'filterChanged',\r\n    'footerTemplate',\r\n    'groupFieldChange',\r\n    'groupFields$',\r\n    'inject',\r\n    'lastCellEnterHandle',\r\n    'loadSuccess',\r\n    'localeService',\r\n    'longTextArea',\r\n    'rowAppended',\r\n    'rowClick',\r\n    'rowDeleted',\r\n    'render2',\r\n    'pageSizeChanged',\r\n    'onDocumentMouseDown',\r\n    'pageChanged',\r\n    'resizeProxy',\r\n    'resizeProxyBg',\r\n    'ro',\r\n    'rowUpdated',\r\n    'scrollInstance',\r\n    'scrollY',\r\n    'scrollYLoad',\r\n    'selectAll',\r\n    'selectChanged',\r\n    'sms',\r\n    'selectValueChange',\r\n    'selectValuesChange',\r\n    'settingService',\r\n    'smartFilterService',\r\n    'subscriptions',\r\n    'trackByRows',\r\n    'unCheckAll',\r\n    'unChecked',\r\n    'unSelect',\r\n    'unSelectAll',\r\n    'zone',\r\n    '__component_type__',\r\n    '__pagination',\r\n    '_active_datagrid_cls',\r\n    '_autoFitColumns',\r\n    '_blured_datagrid_cls',\r\n    '_columns',\r\n    '_custom_datagrid_cls',\r\n    '_editable',\r\n    '_fields',\r\n    '_fit',\r\n    '_fitColumns',\r\n    '_footerData',\r\n    '_groupField',\r\n    '_isResized',\r\n    '_loading',\r\n    '_lockPagination',\r\n    '_selectedRow',\r\n    '_showRowGroupPanel',\r\n    '_sizeType',\r\n    '_total',\r\n];\r\n","/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @Date: 2019-08-06 07:43:53\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-11-19 20:31:27\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\nexport class Utils {\r\n\r\n    static uuid() {\r\n        function S4() {\r\n            // tslint:disable-next-line: no-bitwise\r\n            return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\r\n        }\r\n        return (S4() + S4() + '-' + S4() + '-' + S4() + '-' + S4() + '-' + S4() + S4() + S4());\r\n    }\r\n\r\n\r\n    /**\r\n     * è·åå¯¹è±¡ä¸­æå®å­æ®µçå¼ã field: å¯ä»¥ä¸ºå¸¦æå±çº§ç»æçè·¯å¾ï¼å¦ï¼ user.firstName | name ç­\r\n     */\r\n    static getValue(field: string, data: any, safe = false) {\r\n        if (!data) {\r\n            return  '';\r\n        }\r\n        let resultVal = '';\r\n        if (field.indexOf('.') === -1 || data.hasOwnProperty(field)) {\r\n            resultVal = data[field];\r\n        } else {\r\n            resultVal = field.split('.').reduce((obj, key) => {\r\n                if (obj) {\r\n                    return obj[key];\r\n                } else {\r\n                    return null;\r\n                }\r\n            }, data);\r\n        }\r\n\r\n        if (safe) {\r\n            return this.escapeValue(resultVal);\r\n        }\r\n        return resultVal;\r\n    }\r\n\r\n    static setValue( field: string, val: any, obj: { [key: string]: any }, nest = true) {\r\n        if (field) {\r\n            if (field.indexOf('.') > -1 && nest) {\r\n                let lastObj = null;\r\n                const _fields = field.split('.');\r\n                _fields.reduce( (c, p) => {\r\n                    lastObj = c;\r\n                    return c[p];\r\n                }, obj);\r\n\r\n                if (lastObj) {\r\n                    lastObj[_fields.pop()] = val;\r\n                }\r\n            } else {\r\n                obj[field] = val;\r\n            }\r\n        }\r\n    }\r\n\r\n    /** è·åå¤è¯­å¼ */\r\n    static getMultilingualValue(valObj, localeId) {\r\n        if (valObj && typeof valObj === 'object' && Object.keys(valObj).length > 0) {\r\n            localeId = localeId || 'zh-CHS';\r\n            const val = valObj[localeId];\r\n            if (val !== undefined) {\r\n                return val;\r\n            } else {\r\n                return '';\r\n            }\r\n        } else {\r\n            return '';\r\n        }\r\n    }\r\n\r\n\r\n    static escapeValue(val: any) {\r\n        if (val === null || val === undefined || val === '') {\r\n            return '';\r\n        }\r\n\r\n        const escapeHTML = (unsafe_str) => {\r\n            return unsafe_str\r\n                .replace(/&/g, '&amp;')\r\n                .replace(/</g, '&lt;')\r\n                .replace(/>/g, '&gt;')\r\n                .replace(/\\\"/g, '&quot;')\r\n                .replace(/\\'/g, '&#39;')\r\n                .replace(/\\//g, '&#x2F;');\r\n                // .replace('src','drc');\r\n        };\r\n\r\n        if (typeof val === 'string') {\r\n            return escapeHTML(val);\r\n        }\r\n\r\n        return val;\r\n    }\r\n\r\n    static eventPath(evt: any) {\r\n        const path = (evt.composedPath && evt.composedPath()) || evt.path;\r\n        const target = evt.target;\r\n\r\n        if (path != null) {\r\n            return (path.indexOf(window) < 0) ? path.concat(window) : path;\r\n        }\r\n\r\n        if (target === window) {\r\n            return [window];\r\n        }\r\n\r\n        const getParents = (node, memo = undefined) => {\r\n            memo = memo || [];\r\n            const parentNode = node.parentNode;\r\n\r\n            if (!parentNode) {\r\n                return memo;\r\n            } else {\r\n                return getParents(parentNode, memo.concat(parentNode));\r\n            }\r\n        };\r\n\r\n        return [target].concat(getParents(target), window);\r\n    }\r\n\r\n    static hasDialogOpen() {\r\n        // return document.body.classList.value.indexOf('modal-open') > -1;\r\n        // å¼å®¹IE 11\r\n        return document.body.className.indexOf('modal-open') > -1;\r\n    }\r\n\r\n    static on(el, evt, fn, opts: any = {}) {\r\n        const delegatorFn = e => e.target.matches(opts.target) && fn.call(e.target, e);\r\n        el.addEventListener(evt, opts.target ? delegatorFn : fn, opts.options || false);\r\n        return () => {\r\n            el.removeEventListener(evt, delegatorFn, opts);\r\n        };\r\n    }\r\n\r\n    static off(el, evt, fn= () => {}, opts: any = {}) {\r\n        el.removeEventListener(evt, fn, opts);\r\n    }\r\n    /** è·åå­ç¬¦é¿åº¦ï¼ä¸­ææ±å­å 2ä¸ªå­ç¬¦ */\r\n    static getBLen(str) {\r\n        if (str == null) {\r\n            return 0;\r\n        }\r\n        if (typeof str !== 'string') {\r\n          str += '';\r\n        }\r\n        return str.replace(/[^\\x00-\\xff]/g, '01').length;\r\n    }\r\n\r\n    // static difference(first: any[], second: any[]): any[] {\r\n    //     return first.filter(item => !second.includes(item));\r\n    // }\r\n\r\n    // static getDiffItems(arr1, arr2) {\r\n    //     const diff1 = Utils.difference(arr1, arr2);\r\n    //     const diff2 = Utils.difference(arr2, arr1);\r\n\r\n    //     return diff1.concat(diff2);\r\n    // }\r\n\r\n    static getWhenEmptyText(col: any, localeId) {\r\n\r\n        const EMPTY_INPUT_TEXT = {\r\n            'zh-CHS': 'è¯·è¾å¥',\r\n            'zh-CHT': 'è«è¼¸å¥',\r\n            en: 'Please input'\r\n        };\r\n\r\n        const EMPTY_SELECT_TEXT = {\r\n            'zh-CHS': 'è¯·éæ©',\r\n            'zh-CHT': 'è«é¸æ',\r\n            en: 'Please select'\r\n        };\r\n\r\n\r\n        if (col.editor) {\r\n            switch (col.editor.type) {\r\n                case 'datepicker':\r\n                case 'select':\r\n                case 'lookup':\r\n                case 'combolist':\r\n                case 'combo-lookup':\r\n                    return  EMPTY_SELECT_TEXT[localeId];\r\n                default:\r\n                    return EMPTY_INPUT_TEXT[localeId];\r\n            }\r\n        }\r\n\r\n        // æ§å¶é¢æ¿å\r\n        if (col.field === '_datagrid-setting-control_') {\r\n            return '';\r\n        }\r\n\r\n        return EMPTY_INPUT_TEXT[localeId];\r\n    }\r\n}\r\n\r\n","import { DataColumn, ColumnFilterType } from './../types/data-column';\r\nimport { bindCallback, of } from 'rxjs';\r\n\r\nexport class DatagridColumnsHelper {\r\n\r\n    static gridInstance = null;\r\n\r\n    /** è·åæ»åæ° */\r\n    private static getColumnTotal(firstCols: any[]) {\r\n        let total = 0;\r\n        firstCols.forEach(n => {\r\n            total += (n.colspan || 1);\r\n        });\r\n        return total;\r\n    }\r\n\r\n    // æ¥æ¾æªèµå¼é¡¹çç´¢å¼\r\n    private static findUndefinedItem(arr) {\r\n        for (let i = 0; i < arr.length; i++) {\r\n            if (arr[i] == undefined) {\r\n                return i;\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n\r\n    private static getColumnFields(columns) {\r\n        const aa = [];\r\n        // æ ¹æ®ç¬¬ä¸è¡è®¡ç®æ»åæ°\r\n        const colTotal = DatagridColumnsHelper.getColumnTotal(columns[0]);\r\n        // åå»ºç©ºæ°ç»\r\n        for (let i = 0; i < columns.length; i++) {\r\n            aa[i] = new Array(colTotal);\r\n        }\r\n        for (let i = 0; i < columns.length; i++) {\r\n            columns[i].forEach(col => {\r\n                let k = DatagridColumnsHelper.findUndefinedItem(aa[i]);\r\n                if (k >= 0) {\r\n                    const field = col.field || col.id || '';\r\n                    for (let c = 0; c < (col.colspan || 1); c++) {\r\n                        for (let r = 0; r < (col.rowspan || 1); r++) {\r\n                            aa[i + r][k] = field;\r\n                        }\r\n                        k++;\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        return aa;\r\n    }\r\n\r\n    static columnIsVisible(col: any, ins: any) {\r\n        if (col.visible === undefined) {\r\n            col.visible = true;\r\n        }\r\n\r\n        const t = typeof col.visible;\r\n        if (t === 'boolean') {\r\n            return col.visible;\r\n        } else if ( t === 'function') {\r\n            return col.visible({instance: ins, column: col});\r\n        } else {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    static getFields(columns) {\r\n        // ç§»é¤éèçå\r\n        const _cols = columns.map(cols => {\r\n            cols = cols.filter(col => DatagridColumnsHelper.columnIsVisible(col, DatagridColumnsHelper.gridInstance));\r\n            return cols;\r\n        });\r\n\r\n        const fields =  DatagridColumnsHelper.getColumnFields(_cols);\r\n        return fields.length ? fields[fields.length - 1] : fields;\r\n    }\r\n\r\n    static getFilterEnumOptions(column: DataColumn) {\r\n        let enumSetting = null;\r\n        if (column.filter.type === ColumnFilterType.enum) {\r\n            const fmt = column.formatter as any;\r\n            if (fmt) {\r\n                enumSetting = fmt.options;\r\n            } else {\r\n                if (column.filter.options) {\r\n                    enumSetting = column.filter.options;\r\n                }\r\n            }\r\n        }\r\n\r\n        return enumSetting;\r\n    }\r\n\r\n    static getEnumText(enumOpts: any, value1: any) {\r\n        if (!enumOpts) {\r\n            return  '';\r\n        }\r\n        const { valueField, textField, data } = enumOpts;\r\n        let str = '';\r\n        if (value1) {\r\n            str += ` ${value1.map(v => {\r\n                const enumItem = data.find(d => d[valueField] === v);\r\n                return enumItem[textField];\r\n            }).join(',')}`;\r\n        }\r\n        return str;\r\n    }\r\n\r\n    static columnVisibleAsObservable(col: DataColumn) {\r\n        if (typeof col.visible === 'function') {\r\n            const visibleAsObservable = bindCallback(col.visible);\r\n            return visibleAsObservable();\r\n        }\r\n        return of(col.visible);\r\n    }\r\n\r\n    static getParentColumns(col: DataColumn, allCols) {\r\n        const arr = [];\r\n        const _getParents = (c) => {\r\n            if (c && c.parentId) {\r\n                const parentCol = allCols.find(n => n.id === c.parentId);\r\n                // arr.splice(0, 0, parentCol);\r\n                arr.push(parentCol);\r\n                _getParents(parentCol);\r\n            }\r\n        };\r\n        _getParents(col);\r\n        return arr;\r\n    }\r\n\r\n    static getChildColumns(col: DataColumn, allCols) {\r\n        const arr = [];\r\n        const _getChilds = (c) => {\r\n            if (c && c.parentId) {\r\n                const childs = allCols.filter(n => n.parentId === c.id);\r\n                arr.splice(0, 0, ...childs);\r\n                childs.forEach(child => {\r\n                    _getChilds(child);\r\n                });\r\n            }\r\n        };\r\n        _getChilds(col);\r\n        return arr;\r\n    }\r\n\r\n    // æ£æ¥å¤è¡¨å¤´æ¶ï¼è®¾è®¡å¨ä¸­å°åè®¾ä¸ºéè\r\n    static checkGroupHeaderColumnVisible(allCols) {\r\n        const hiddenFields = allCols.filter(n => n.visible === false).map(n => n.field);\r\n        hiddenFields.forEach(field => {\r\n            const _col = allCols.find(col => col.field === field || col.id === field);\r\n            if (_col) {\r\n                const parents = DatagridColumnsHelper.getParentColumns(_col, allCols);\r\n\r\n                parents.forEach(p => {\r\n                    const _childs = allCols.filter(n => n.parentId === p.id && (n.visible || n.visible === undefined) );\r\n                    p.colspan = _childs.reduce(( r, c ) => {\r\n                        r = r + (c.colspan || 1);\r\n                        return r;\r\n                    }, 0);\r\n                    p.visible = !!p.colspan;\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    // å¤è¡¨å¤´ä¸ä»æä¸åæ¾ç¤º\r\n    static onlyOneColumn() {\r\n\r\n    }\r\n}\r\n","/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @Date: 2019-08-06 07:43:53\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-11-20 07:39:45\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\n\r\nimport { Injectable, EventEmitter } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { BehaviorSubject, Observable, of, merge, Subject } from 'rxjs';\r\nimport { map, distinctUntilChanged, filter, switchMap, auditTime, debounceTime, debounce } from 'rxjs/operators';\r\nimport { DataColumn, ColumnGroup, CalculationType } from '../types';\r\nimport { FarrisDatagridState, initDataGridState, DataResult, CellInfo, VirtualizedState, SelectedRow,\r\n        RowDataChanges, ROW_INDEX_FIELD, IS_GROUP_ROW_FIELD, GROUP_ROW_FIELD, IS_GROUP_FOOTER_ROW_FIELD, GROUP_VISIBLE_FIELD, GROUP_LEVEL_FIELD } from './state';\r\nimport { VirtualizedLoaderService } from './virtualized-loader.service';\r\nimport { DatagridRow } from '../types/datagrid-row';\r\nimport { cloneDeep, groupBy, sumBy, maxBy, minBy, meanBy, isPlainObject, flatten } from 'lodash-es';\r\nimport { Utils } from '../utils/utils';\r\nimport { DatagridColumnsHelper } from './datagrid-columns.helper';\r\nimport { BigNumber } from 'bignumber.js';\r\n@Injectable()\r\nexport class DatagridFacadeService {\r\n\r\n    localId = 'zh-CHS';\r\n\r\n    protected _state: FarrisDatagridState;\r\n    // public virtualizedService: VirtualizedLoaderService;\r\n\r\n    store = new BehaviorSubject<FarrisDatagridState>(null);\r\n\r\n    virtualRowSubject = new BehaviorSubject<any>(null);\r\n    gridSizeSubject = new Subject<any>();\r\n    errorSubject = new Subject();\r\n    private selectRowSubject = new Subject<any>();\r\n    private unSelectRowSubject = new Subject<any>();\r\n    private columnResizeSubject = new Subject<any>();\r\n    private clearSelectionSubject = new Subject();\r\n    private checkRowSubject = new Subject<any>();\r\n    private unCheckRowSubject = new Subject<any>();\r\n    private clearCheckedsSubject = new Subject<any>();\r\n    private clearAllSubject = new Subject<any>();\r\n    private checkAllSubject = new Subject();\r\n    private unCheckAllSubject =  new Subject();\r\n    private selectAllSubject = new Subject();\r\n    private selectCellSubject = new Subject();\r\n\r\n    error$ = this.errorSubject.asObservable();\r\n    selectRow$ = this.selectRowSubject.asObservable();\r\n    unSelectRow$ =  this.unSelectRowSubject.asObservable();\r\n    columnResize$ = this.columnResizeSubject.asObservable();\r\n    clearSelections$ = this.clearSelectionSubject.asObservable();\r\n    checkRow$ = this.checkRowSubject.asObservable();\r\n    unCheckRow$ = this.unCheckRowSubject.asObservable();\r\n    clearCheckeds$ = this.clearCheckedsSubject.asObservable();\r\n    clearAll$ = this.clearAllSubject.asObservable();\r\n    checkAll$ = this.checkAllSubject.asObservable();\r\n    unCheckAll$ = this.unCheckAllSubject.asObservable();\r\n    selectAll$ = this.selectAllSubject.asObservable();\r\n    currentCell$ = this.selectCellSubject.asObservable();\r\n    editCell$ = new EventEmitter();\r\n    clientSort$ = new EventEmitter();\r\n    rowAppend$ = new EventEmitter();\r\n    rowUpdate$ = new EventEmitter();\r\n    rowDelete$ = new EventEmitter();\r\n\r\n    updateCheckboxState$ = new EventEmitter();\r\n\r\n    readonly state$ = this.store.asObservable().pipe(\r\n        filter( (state: any) => state)\r\n    );\r\n\r\n    readonly columnGroup$ = this.gridSizeSubject.asObservable().pipe(\r\n        filter( (state: any) => state),\r\n        map((state: FarrisDatagridState) => state.columnsGroup),\r\n        switchMap((colgroup: any) => {\r\n            return of( colgroup);\r\n        }),\r\n        distinctUntilChanged()\r\n    );\r\n\r\n    gridSize$ = this.gridSizeSubject.asObservable().pipe(\r\n        filter( (state: any) => state),\r\n        map((state: FarrisDatagridState) => {\r\n            const { headerHeight, pagerHeight, width, columnsGroup, height, rowHeight } = {...state};\r\n            return { headerHeight, pagerHeight, width, columnsGroup, height, rowHeight };\r\n        }),\r\n        distinctUntilChanged()\r\n    );\r\n\r\n    readonly data$ = this.virtualRowSubject.pipe(\r\n        filter(vs => vs),\r\n        switchMap((vs: VirtualizedState) => {\r\n            return of({\r\n                index: vs.startIndex || 0,\r\n                rows: vs.virtualRows || [],\r\n                top: vs.topHideHeight,\r\n                bottom: vs.bottomHideHeight,\r\n                scrolling: vs.isScrollChange\r\n            });\r\n        }),\r\n        distinctUntilChanged()\r\n    );\r\n\r\n    difference = (first: any[], second: any[]) => first.filter(item => !second.includes(item));\r\n    differenceBy = (a, b, fn) => {\r\n        const s = new Set(b.map(fn));\r\n        return a.map(fn).filter(el => !s.has(el));\r\n    }\r\n\r\n    constructor(private http: HttpClient) {\r\n        this._state =  cloneDeep(initDataGridState);\r\n    }\r\n\r\n    updateVirthualRows(scrolltop: number, isScrollChange = false) {\r\n        const virtual = this.getVirthualRows(scrolltop);\r\n        virtual.isScrollChange = isScrollChange;\r\n        this.updateState({virtual}, false);\r\n        this.virtualRowSubject.next(virtual);\r\n    }\r\n\r\n    getVirthualRows(scrolltop): VirtualizedState {\r\n        if (scrolltop === undefined) {\r\n            scrolltop = 0;\r\n        }\r\n\r\n        const data =  this._state.data || [];\r\n        const virtual = {rowIndex: 0, virtualRows: data, topHideHeight: 0, bottomHideHeight: 0 };\r\n\r\n        if (data.length === 0 || (this._state.autoHeight && !this._state.groupRows)) {\r\n            virtual.virtualRows = data;\r\n            return virtual;\r\n        }\r\n\r\n        if (this._state.flatColumns && this._state.flatColumns.length) {\r\n            // data = this._state.data;\r\n\r\n            // if (!this._state.groupRows) {\r\n            //     if (this._state.virtual && this._state.virtualized) {\r\n            //         this.virtualizedService.state = this._state;\r\n            //         const rows = this.virtualizedService.getRows(scrolltop);\r\n            //         virtual = { ...this._state.virtual, ...rows };\r\n            //     } else {\r\n            //         virtual.virtualRows = data;\r\n            //     }\r\n            // } else {\r\n            //     // è¡åç»æ°æ®å¤ç\r\n            //     const groupRows = this.groupRows2(cloneDeep(data));\r\n            //     virtual.virtualRows = groupRows;\r\n            // }\r\n            if (this._state.groupRows) {\r\n                // è¡åç»æ°æ®å¤ç\r\n                const groupRows = this.groupRows2(cloneDeep(data));\r\n                virtual.virtualRows = groupRows;\r\n            }\r\n        }\r\n\r\n        if (this._state.mergeCell && this._state.enableClientSortForMergeCell) {\r\n            virtual.virtualRows = this.sort(virtual.virtualRows);\r\n        }\r\n\r\n        return virtual;\r\n    }\r\n\r\n    // getDeltaTopHeight(scrolTop, firstIndex) {\r\n    //     const {rowsLength: viewRowsCount, top, bottom} = this.virtualizedService.getRowsCount(scrolTop, this._state.pageSize, firstIndex);\r\n    //     const gridContainerRowsCount = this.virtualizedService.displayRowsCount();\r\n    //     let deltaTopHeight = 0;\r\n    //     if (viewRowsCount < gridContainerRowsCount) {\r\n    //         deltaTopHeight = (gridContainerRowsCount - viewRowsCount) * this._state.rowHeight - this._state.headerHeight;\r\n    //     }\r\n\r\n    //     return deltaTopHeight;\r\n    // }\r\n\r\n    getData(original = false) {\r\n        if (original) {\r\n            return this._state.originalData || [];\r\n        }\r\n        return this._state.data || [];\r\n    }\r\n\r\n    getState() {\r\n        return this._state;\r\n    }\r\n\r\n    getVirtualState() {\r\n        return this._state.virtual;\r\n    }\r\n\r\n    getPageInfo() {\r\n        const { pageIndex, pageSize } = {...this._state};\r\n        return { pageIndex, pageSize };\r\n\r\n    }\r\n\r\n    initState(state: Partial<FarrisDatagridState>) {\r\n        this.updateState(state, false);\r\n        this._state.originalData = cloneDeep(this._state.data);\r\n        this.initColumns();\r\n\r\n        this.gridSizeSubject.next(this._state);\r\n        this.updateVirthualRows(0);\r\n    }\r\n\r\n\r\n    /** å è½½æ°æ®\r\n     * @param data: æ°æ®åè¡¨\r\n     * @param updateOriginalData æ¯å¦æ´æ°åå§æ°æ®, é»è®¤ä¸º true\r\n     */\r\n    loadData(data: any, updateOriginalData = true, sortable = false) {\r\n        data = data || [];\r\n        this.updateState({ data }, false);\r\n\r\n        if (updateOriginalData) {\r\n            this._state.originalData = cloneDeep(this._state.data);\r\n        }\r\n        if (sortable && this._state.sortName) {\r\n            const sortedData = this.sort(this._state.data);\r\n            this.updateState({ data: sortedData }, false);\r\n        } else {\r\n            // this.updateState({ data: this._state.originalData }, false);\r\n        }\r\n\r\n        this.updateVirthualRows(this._state.virtual.scrollTop || 0);\r\n    }\r\n\r\n    /** å¤åæå®è¡çæ°æ® */\r\n    resetRow(rowId: any) {\r\n        const origData = this._state.originalData;\r\n        if (origData) {\r\n            const origRowData = origData.find(r => this.primaryId(r) === rowId);\r\n            this.getCurrentRow().data = cloneDeep(origRowData);\r\n            this.updateRow(rowId, origRowData);\r\n        }\r\n    }\r\n\r\n    // loadDataForVirtual(data: any) {\r\n    //     this.updateState({ data }, false);\r\n    //     // this.virtualizedService.state = this._state;\r\n    //     const virtual = { ...this._state.virtual, ...this.virtualizedService.reload() };\r\n    //     this.virtualRowSubject.next(virtual);\r\n    //     this.updateState({virtual});\r\n    // }\r\n\r\n    fetchData(url: string): Observable<DataResult> {\r\n        return this.http.get(url).pipe(\r\n            map( r => r as DataResult )\r\n        );\r\n    }\r\n\r\n    setTotal(total: number) {\r\n        this.updateState( {total}, false );\r\n    }\r\n\r\n    updateProperty(property: string, value: any) {\r\n        this.updateState({ [property]: value }, false);\r\n    }\r\n\r\n    setPagination(pageIndex: number, pageSize: number, total: number) {\r\n        this.updateState( { pageIndex, pageSize, total }, false);\r\n    }\r\n\r\n    setScrollTop(scrollTop: number) {\r\n        const virtual = { ...this._state.virtual, scrollTop};\r\n        this.updateState({virtual}, false);\r\n    }\r\n\r\n    isMultiSelect() {\r\n        return this._state.multiSelect;\r\n    }\r\n\r\n    private _isRowSelected(id: any) {\r\n        if (!id || !this._state.currentRow) {\r\n            return false;\r\n        } else {\r\n            return this._state.currentRow.id.toString() === id.toString();\r\n        }\r\n    }\r\n\r\n    isRowSelected(id: any, selections = null) {\r\n        const flag = this._isRowSelected(id);\r\n        if (!this.isMultiSelect() || this._state.onlySelectSelf) {\r\n           return flag;\r\n        } else {\r\n            if (!selections) {\r\n                selections = this._state.selections;\r\n            }\r\n\r\n            if (this._canCancelSelectWhenMulti()) {\r\n                return flag;\r\n            }\r\n\r\n            if (!selections || selections.length === 0) {\r\n                return false;\r\n            } else {\r\n                return selections.findIndex(sr => sr.id == id) > -1;\r\n            }\r\n        }\r\n    }\r\n\r\n    isRowChecked(id: any, checkeds = null) {\r\n        if (!checkeds) {\r\n            checkeds = this.getCheckeds();\r\n        }\r\n        if (!id || !checkeds.length) {\r\n            return false;\r\n        }\r\n\r\n        return checkeds.findIndex(sr => sr.id.toString() === id.toString()) > -1;\r\n    }\r\n\r\n    isCheckAll() {\r\n        const allRows = this.getAllRowsForLive().map(r => this.primaryId(r));\r\n        const checkIds = this._state.checkedRows.map(r => r.id);\r\n        if (this.difference(allRows, checkIds).length) {\r\n            return false; // this._state.checkedRows.length === allRows.length;\r\n        } else {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    getCurrentPageCheckeds() {\r\n        const allRows = this.getAllRowsForLive().map(r => this.primaryId(r));\r\n        return this._state.checkedRows.filter(n => allRows.indexOf(n.id) > -1);\r\n    }\r\n\r\n    getCurrentRow() {\r\n        return this._state.currentRow || undefined;\r\n    }\r\n\r\n    getSelections() {\r\n        // å¦ææ°æ®æºåäºï¼éè¦éæ°è®¡ç®\r\n        const data = this._state.data;\r\n        if (this._state.selections && this._state.selections.length) {\r\n            if (!data || !data.length) {\r\n                this._state.selections = [];\r\n            } else {\r\n                const temp: any[] = data.map(n => this.primaryId(n));\r\n                this._state.selections = this._state.selections.filter(n => {\r\n                    return temp.includes(n.id);\r\n                });\r\n            }\r\n        }\r\n        return this._state.selections || [];\r\n    }\r\n\r\n    private getCheckedRowsFromSource() {\r\n        return (this._state.checkedRows || []).map(n => {\r\n            const d = this.findRow(n.id);\r\n            if (d && d.data) {\r\n                n.data = d.data;\r\n            }\r\n            return n;\r\n        });\r\n    }\r\n\r\n    getCheckeds(fromDataSource = false) {\r\n        if (fromDataSource) {\r\n            this._state.checkedRows = this.getCheckedRowsFromSource();\r\n        }\r\n\r\n        return this._state.checkedRows || [];\r\n    }\r\n\r\n    updateCheckedData(rowid: any, rowData: { [key: string]: string }) {\r\n        const checkeds = this.getCheckeds();\r\n        if (checkeds.length) {\r\n            const item = checkeds.find(n => this.primaryId(n) == rowid);\r\n            if (item) {\r\n                Object.keys(rowData).forEach(k => {\r\n                    Utils.setValue(k, rowData[k], item.data);\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    setCheckedRows(ids: string[], checked = true) {\r\n        if (ids && ids.length) {\r\n            let checkeds = this._state.checkedRows || [];\r\n\r\n            ids.forEach(id => {\r\n                const row = this.findRow(id);\r\n                if (checked && row) {\r\n                    if ( !this.isRowChecked(id, checkeds)) {\r\n                        const srow = { id: this.primaryId(row.data), data: row.data, index: row.index };\r\n                        checkeds.push(srow);\r\n                    }\r\n                } else {\r\n                    if (!this._state.enableMorePageSelect || !checked) {\r\n                        checkeds = checkeds.filter(sr => sr.id !== id);\r\n                    }\r\n                }\r\n            });\r\n            this._state.checkedRows = checkeds;\r\n        } else {\r\n            this._clearCheckeds();\r\n        }\r\n    }\r\n\r\n    checkRecord(id: any, checked = true) {\r\n        if (id) {\r\n            const row = this.findRow(id);\r\n            if (row) {\r\n                const {index: rowIndex, data: rowData} = {...row};\r\n                if (checked) {\r\n                    this.checkRow(rowIndex, rowData);\r\n                } else {\r\n                    this.unCheckRow(rowIndex, rowData);\r\n                }\r\n            } else {\r\n                this.errorSubject.next(`æªæ¾å°IDä¸º${id}çæ°æ®ã`);\r\n            }\r\n        } else {\r\n            this.errorSubject.next(`åæ°id ä¸è½ä¸ºç©ºã`);\r\n        }\r\n    }\r\n\r\n    checkRow(rowIndex: number, rowData: any, grid: any = null) {\r\n        if (!this._state.multiSelect) {\r\n            this._clearCheckeds();\r\n        }\r\n\r\n        const id = this.primaryId(rowData);\r\n        const checkeds = this._state.checkedRows || [];\r\n\r\n        const srow = { id, data: rowData, index: rowIndex };\r\n        if (id && !this.isRowChecked(id, checkeds)) {\r\n            checkeds.push(srow);\r\n            this._state.checkedRows = checkeds;\r\n\r\n            if (this._state.selectOnCheck) {\r\n                if (grid && grid.instance && grid.instance.beforeSelect) {\r\n                    grid.instance.beforeSelect({ rowIndex, rowData, gridInstance: grid.instance }).subscribe((e) => {\r\n                        if (e) {\r\n                            this.selectRow(rowIndex, rowData);\r\n                        }\r\n                    });\r\n                } else {\r\n                    this.selectRow(rowIndex, rowData);\r\n                }\r\n            }\r\n\r\n            this.checkRowSubject.next(srow);\r\n        }\r\n\r\n        this.updateCheckboxState$.emit({...srow, checked: true});\r\n    }\r\n\r\n    unCheckRow(rowIndex: number, rowData: any, grid: any = null) {\r\n        const id = this.primaryId(rowData);\r\n        let checkeds = this._state.checkedRows || [];\r\n        const srow = { id, data: rowData, index: rowIndex };\r\n        if (this.isRowChecked(id, checkeds)) {\r\n            checkeds = checkeds.filter(sr => '' + sr.id !== '' + id);\r\n            this._state.checkedRows = checkeds;\r\n\r\n            if (this._state.selectOnCheck) {\r\n                if (grid && grid.instance && grid.instance.beforeUnselect) {\r\n                    grid.instance.beforeUnselect({ rowIndex, rowData, gridInstance: grid.instance }).subscribe((e) => {\r\n                        if (e) {\r\n                            this.unSelectRow(rowIndex, rowData);\r\n                        }\r\n                    });\r\n                } else  {\r\n                    this.unSelectRow(rowIndex, rowData);\r\n                }\r\n            }\r\n\r\n            this.unCheckRowSubject.next(srow);\r\n        }\r\n\r\n        this.updateCheckboxState$.emit({...srow, checked: false});\r\n    }\r\n\r\n    setCurrentPageData(data: any) {\r\n        this._state.currentPageData = data;\r\n    }\r\n\r\n    getCurrentPageData() {\r\n        return this._state.currentPageData || [];\r\n    }\r\n\r\n\r\n    /** è·åææå¯ä»¥æä½çè¡ */\r\n    private getAllRowsForLive() {\r\n        let allData = this._state.data || [];\r\n\r\n        if (this._state.pagination && !this._state.pagerOnServer) {\r\n            // è·åå½åé¡µæ°æ®\r\n            allData = this.getCurrentPageData();\r\n        }\r\n\r\n        // æé¤æç¦ç¨çè¡\r\n        if (this._state.disableRow) {\r\n            allData = allData.filter((n, i) => !this._state.disableRow(n, i));\r\n        }\r\n        return allData;\r\n    }\r\n\r\n    checkAll() {\r\n        this._state.checkedRows = this._state.checkedRows || [];\r\n        const allData = this.getAllRowsForLive();\r\n        const allCheckeds = allData.map( (r, i) => {\r\n            return {\r\n                id: this.primaryId(r),\r\n                index: i,\r\n                data: r\r\n            };\r\n        });\r\n\r\n        if (!this._state.checkedRows.length) {\r\n            this._state.checkedRows = allCheckeds;\r\n        } else {\r\n            const _checkeds = [];\r\n            allCheckeds.forEach(element => {\r\n                if (!this._state.checkedRows.find(n => n.id == element.id)) {\r\n                    _checkeds.push(element);\r\n                }\r\n            });\r\n\r\n            this._state.checkedRows = this._state.checkedRows.concat(_checkeds);\r\n        }\r\n\r\n\r\n        if (this._state.selectOnCheck && !this._state.onlySelectSelf) {\r\n            this._state.selections = [];\r\n            this._state.selections = allData.map( (r, i) => {\r\n                return {\r\n                    id: this.primaryId(r),\r\n                    index: i,\r\n                    data: r\r\n                };\r\n            });\r\n        }\r\n\r\n        this.checkAllSubject.next(this._state.checkedRows);\r\n    }\r\n\r\n    selectAll() {\r\n        this._state.selections = [];\r\n\r\n        const allData = this.getAllRowsForLive();\r\n\r\n        this._state.selections = allData.map( (r, i) => {\r\n            return {\r\n                id: this.primaryId(r),\r\n                index: i,\r\n                data: r\r\n            };\r\n        });\r\n\r\n        if (this._state.checkOnSelect) {\r\n            this._state.checkedRows = [];\r\n            this._state.checkedRows = allData.map( (r, i) => {\r\n                return {\r\n                    id: this.primaryId(r),\r\n                    index: i,\r\n                    data: r\r\n                };\r\n            });\r\n        }\r\n\r\n        this.selectAllSubject.next(this._state.selections);\r\n    }\r\n\r\n    findRow(id): {index: number, data: any} {\r\n        if (this._state.data && this._state.data.length) {\r\n            let index = -1;\r\n            const data = this._state.data.find( (n, i) => {\r\n                const r = this.primaryId(n) == id;\r\n                if (r) {\r\n                    index = i;\r\n                }\r\n                return r;\r\n            });\r\n            if (index === -1) {\r\n                return null;\r\n            }\r\n            return {index, data};\r\n        }\r\n        return null;\r\n    }\r\n\r\n    findRowIndex(id) {\r\n        if (this._state.data && this._state.data.length) {\r\n            return this._state.data.findIndex(n => this.primaryId(n) === id);\r\n        }\r\n        return -1;\r\n    }\r\n    /**\r\n     * è®¾ç½®éä¸­è¡ï¼ä¸è§¦ågrid éä¸­äºä»¶ï¼åæ¶éä¸­äºä»¶\r\n     */\r\n    setSelectRow(id: string, select = true) {\r\n        const row = this.findRow(id);\r\n        const {index: rowIndex, data: rowData} = {...row};\r\n        const srow = { id, data: rowData, index: rowIndex };\r\n\r\n        if (this.isMultiSelect()) {\r\n            if (select) {\r\n                this.selectRowForMulti(srow, false);\r\n            } else {\r\n                this.unSelectRowForMulti(srow, false);\r\n            }\r\n        }\r\n\r\n        const _sr = select ? srow : null;\r\n        this.updateState({ currentRow: _sr}, false);\r\n    }\r\n\r\n    selectRecord(id: any, select = true) {\r\n        if (id) {\r\n            const row = this.findRow(id);\r\n            if (row) {\r\n                const {index: rowIndex, data: rowData} = {...row};\r\n                if (select) {\r\n                    this.selectRow(rowIndex, rowData);\r\n                } else {\r\n                    this.unSelectRow(rowIndex, rowData);\r\n                }\r\n            } else {\r\n                this.errorSubject.next(`æªæ¾å°IDä¸º${id}çæ°æ®ã`);\r\n            }\r\n        } else {\r\n            this.errorSubject.next(`åæ°id ä¸è½ä¸ºç©ºã`);\r\n        }\r\n    }\r\n\r\n    selectRow(rowIndex: number, rowData: any, gridOpts = null) {\r\n        const isMultiSelect = this.isMultiSelect();\r\n        const id = this.primaryId(rowData);\r\n        const srow = { id, data: rowData, index: rowIndex };\r\n\r\n        if (!this.isRowSelected(id) || !this._state.currentRow) {\r\n            if (!isMultiSelect) {\r\n                this.updateState({ currentRow: srow }, false);\r\n                this.selectRowSubject.next(this._state.currentRow);\r\n\r\n                if (this._state.showCheckbox && this._state.checkOnSelect) {\r\n                    this._state.checkedRows = [ srow ];\r\n\r\n                    if (gridOpts && gridOpts.instance && gridOpts.instance.beforeCheck) {\r\n                        gridOpts.instance.beforeCheck({ rowIndex, rowData, gridInstance: gridOpts.instance }).subscribe(() => {\r\n                            this.checkRowSubject.next(srow);        \r\n                        })\r\n                    } else {\r\n                        this.checkRowSubject.next(srow);\r\n                    }\r\n                }\r\n            } else {\r\n                this.selectRowForMulti(srow, true, gridOpts);\r\n            }\r\n        }\r\n    }\r\n\r\n    private selectRowForMulti(srow: { id: any, data: any, index: any }, emit = true, gridOpts = null) {\r\n        if (this._state.onlySelectSelf) {\r\n            this._clearSelections();\r\n            this.updateState({ currentRow: srow, selections: [srow] }, false);\r\n        } else {\r\n            this._state.selections = this._state.selections || [];\r\n            this._state.selections = this._state.selections.filter(sr => sr.id !== srow.id);\r\n            this._state.selections.push(srow);\r\n        }\r\n        if (emit) {\r\n            this.selectRowSubject.next(srow);\r\n        }\r\n\r\n        if (this._state.checkOnSelect) {\r\n            this.checkRow(srow.index, srow.data, gridOpts);        \r\n        }\r\n    }\r\n\r\n    private unSelectRowForMulti(srow: { id: any, data: any, index: any }, emit = true, gridOpts = null) {\r\n        this._state.selections = this._state.selections.filter(sr => sr.id !== srow.id);\r\n\r\n        if (this._canCancelSelectWhenMulti() || (this._state.currentRow && this._state.currentRow.id === srow.id)) {\r\n            this.updateState({ currentRow: null });\r\n        }\r\n\r\n        if (this._state.checkOnSelect) {\r\n            this.unCheckRow(srow.index, srow.data, gridOpts);\r\n        }\r\n\r\n        if (emit) {\r\n            this.unSelectRowSubject.next(srow);\r\n        }\r\n\r\n    }\r\n\r\n    unSelectRow(rowIndex: number, rowData: any, gridOpts = null) {\r\n        const id = this.primaryId(rowData);\r\n        const isMultiSelect = this.isMultiSelect();\r\n        const srow = {id, index: rowIndex, data: rowData};\r\n        if (!isMultiSelect) {\r\n            if (this._state.currentRow) {\r\n                this.updateState({ currentRow: null });\r\n                this.unSelectRowSubject.next(srow);\r\n                if (this._state.showCheckbox) {\r\n                    this.unCheckRow(srow.index, srow.data, gridOpts);\r\n                }\r\n            }\r\n        } else {\r\n            this.unSelectRowForMulti(srow, true, gridOpts);\r\n        }\r\n    }\r\n\r\n    private _canCancelSelectWhenMulti() {\r\n        return !this._state.keepSelect && this._state.onlySelectSelf;\r\n    }\r\n\r\n    private _clearSelections(excludeIds?: string[]) {\r\n        this._state.currentRow = null;\r\n\r\n        if (!excludeIds || !excludeIds.length ) {\r\n            this._state.selections = [];\r\n        } else {\r\n            this._state.selections = this._state.selections.filter(n => {\r\n                return excludeIds.findIndex(i => i == n.id) > -1;\r\n            });\r\n        }\r\n    }\r\n\r\n    private _clearCheckeds(rows = []) {\r\n        if (!rows.length) {\r\n            this._state.checkedRows = [];\r\n        } else {\r\n            this._state.checkedRows = this._state.checkedRows.filter(n => rows.findIndex(r => this.primaryId(r) === n.id) == -1);\r\n        }\r\n    }\r\n\r\n    clearSelections(excludeIds?: string[]) {\r\n        const rows = this._state.selections;\r\n        excludeIds = excludeIds || [];\r\n        this._clearSelections(excludeIds);\r\n        const unCheckRows = rows.filter(n => excludeIds.findIndex(i => i == n.id) == -1);\r\n        if (this._state.checkOnSelect || (!this._state.multiSelect && this._state.showCheckbox)) {\r\n            // this._state.checkedRows = [];\r\n            // this.clearCheckedsSubject.next(rows);\r\n            this._state.checkedRows = this._state.checkedRows.filter(n => {\r\n                return !rows.find(t1 => t1.id == n.id && excludeIds.findIndex(i => i == n.id) == -1);\r\n            });\r\n            this.clearCheckedsSubject.next(unCheckRows);\r\n        }\r\n        this.clearSelectionSubject.next(unCheckRows);\r\n    }\r\n\r\n    clearCheckeds(clearAll = true) {\r\n        const rows = this.getAllRowsForLive();\r\n        const _rows = clearAll ? [] : rows;\r\n        this._clearCheckeds(_rows);\r\n        if (this._state.selectOnCheck) {\r\n           this._clearSelections();\r\n        }\r\n        this.clearCheckedsSubject.next(rows);\r\n    }\r\n\r\n    clearAll() {\r\n        this._clearCheckeds();\r\n        this._clearSelections();\r\n        this.clearAllSubject.next();\r\n    }\r\n\r\n    setMultiSelect(flag: boolean) {\r\n        this._state.multiSelect = flag;\r\n    }\r\n\r\n    setCheckOnSelect(flag: boolean) {\r\n        this._state.checkOnSelect = flag;\r\n    }\r\n\r\n    setSelectOnCheck(flag: boolean) {\r\n        this._state.selectOnCheck = flag;\r\n    }\r\n\r\n    setCurrentCell(dr: DatagridRow, field: string, cellElement?: any, cellRef?: any ) {\r\n        const { rowIndex, rowData } = {...dr};\r\n        let currentCell = {...this._state.currentCell, rowIndex, rowData, field, rowId: this.primaryId(rowData), cellElement };\r\n\r\n        if (field !== this._state.ControlPanelFeild) {\r\n            if (cellRef) {\r\n                currentCell.cellRef = cellRef;\r\n            }\r\n\r\n            if (field) {\r\n                currentCell.column = this.getColumn(field);\r\n            }\r\n\r\n            const isLastRow = rowIndex === this.getData().length - 1;\r\n            currentCell['lastRow'] = isLastRow;\r\n        } else {\r\n            currentCell = null;\r\n        }\r\n        this._state.currentCell = null;\r\n        this.updateState({currentCell}, false);\r\n        this.selectRow(rowIndex, rowData);\r\n        if (this._state.currentRow) {\r\n            this._state.currentRow.dr = dr;\r\n        }\r\n        this.selectCellSubject.next(currentCell);\r\n    }\r\n\r\n    cancelSelectCell() {\r\n        if (this._state.currentCell) {\r\n            this._state.currentCell = null;\r\n            this.updateState({currentCell: null}, false);\r\n            this.selectCellSubject.next(null);\r\n        }\r\n    }\r\n\r\n    primaryId(rowData: any) {\r\n        return rowData[this._state.idField];\r\n    }\r\n\r\n    getCurrentCell() {\r\n        return this._state.currentCell;\r\n    }\r\n\r\n    editCell() {\r\n        if (this._state.currentCell) {\r\n            if (!this._state.currentCell.isEditing) {\r\n                const cei = { ...this._state.currentCell, isEditing: true };\r\n                this.updateState({ currentCell: cei }, false);\r\n                this.selectCellSubject.next(cei);\r\n                // this.editCell$.next(cei);\r\n            }\r\n        }\r\n    }\r\n\r\n    endEditCell() {\r\n        if (this._state.currentCell && this._state.currentCell.isEditing) {\r\n            const cei = { ...this._state.currentCell, isEditing: false };\r\n            this.updateState({ currentCell: cei }, false);\r\n            this.selectCellSubject.next(cei);\r\n            // this.editCell$.next(cei);\r\n        }\r\n    }\r\n\r\n    appendRow(rowData: any) {\r\n        if (rowData && this.primaryId(rowData)) {\r\n            const pid = this.primaryId(rowData);\r\n            if (this.findRowIndex(pid) === -1) {\r\n                this._state.data.push(rowData);\r\n                const newData = [...this._state.data];\r\n                this.updateState({data: newData}, false);\r\n                this._state.originalData = cloneDeep(this._state.data);\r\n                this.refresh();\r\n                this.rowAppend$.emit(rowData);\r\n            } else {\r\n                throw new Error(`ä¸»é®ID å·²å­å¨ï¼ID: ${pid}`);\r\n            }\r\n        } else {\r\n            throw new Error(`ä¸»é®æ è¯å­æ®µä¸è½ä¸ºç©ºã`);\r\n        }\r\n    }\r\n\r\n    updateRow(rowid: any, rowData: any) {\r\n        const row = this.findRow(rowid);\r\n        if (row && row.data) {\r\n            if (rowData) {\r\n                const keys = Object.keys(rowData);\r\n                keys.forEach(field => {\r\n                    Utils.setValue(field, rowData[field], row.data);\r\n                });\r\n                // æ´æ°å·²å¾éçæ°æ®\r\n                this.updateCheckedData(rowid, rowData);\r\n                this.rowUpdate$.emit(row);\r\n            }\r\n        }\r\n    }\r\n\r\n    deleteRow(rowid) {\r\n        const row = this.findRow(rowid);\r\n        if (row) {\r\n            const newData = this.removeRow(this._state.data, rowid);\r\n            this.updateState({data: newData}, false);\r\n            this._state.originalData = cloneDeep(this._state.data);\r\n            this.refresh();\r\n            this.rowDelete$.emit(rowid);\r\n            return row;\r\n        }\r\n    }\r\n    /**\r\n     * ä»æ°ç»ä¸­å é¤æå®çID\r\n     * @param data æ°ç»\r\n     * @param rowId è¦å é¤çID\r\n     */\r\n    removeRow(data, rowId) {\r\n        const newData = data.filter(n => {\r\n            const id = this.primaryId(n);\r\n            return rowId !== id;\r\n        });\r\n\r\n        return newData;\r\n    }\r\n\r\n    isCellSelected(cellInfo: CellInfo) {\r\n        const cc = this.getCurrentCell();\r\n        if (!cc) {\r\n            return false;\r\n        } else {\r\n            if ( this._state.currentRow.index === cc.rowIndex) {\r\n                return cc.field === cellInfo.field;\r\n            }\r\n            return false;\r\n        }\r\n    }\r\n\r\n    protected updateState(state: Partial<FarrisDatagridState>, emit = true) {\r\n        const newState = { ...this._state, ...state };\r\n        this._state = newState;\r\n        if (emit) {\r\n            this.store.next(this._state);\r\n        }\r\n    }\r\n\r\n    resize(newSize?: {width: number, height: number, [key: string]: any}) {\r\n        if (newSize) {\r\n            this.updateState(newSize, false);\r\n        }\r\n        this.resetColumnsSize();\r\n        if (!this._state.groupRows) {\r\n            this.updateVirthualRows(this._state.virtual.scrollTop);\r\n        }\r\n    }\r\n\r\n    fitColumns(fit) {\r\n        this.updateState({fitColumns: fit}, false);\r\n        // const r = this.useUserSetColumnSize();\r\n        // this.setFitColumnsWidth(this._state.columnsGroup, true, r);\r\n        // this.gridSizeSubject.next(this._state);\r\n        this.resetColumnsSize();\r\n    }\r\n\r\n    private useUserSetColumnSize() {\r\n        if (this._state.autoFitColumns) {\r\n            const gridWidth = this._state.width;\r\n            const userSetColumnWidth = this._state.columnsGroup.originalTotalWidth;\r\n            return userSetColumnWidth > gridWidth;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    private resetColumnsSize() {\r\n        if (this._state.fitColumns) {\r\n            // 20200421\r\n            const r = this.useUserSetColumnSize();\r\n            this.setFitColumnsWidth(this._state.columnsGroup, r, r);\r\n        }\r\n        this.gridSizeSubject.next(this._state);\r\n    }\r\n\r\n    /**\r\n     * æ´æ°åè®¾ç½®\r\n     * @param columns æ°çåéå\r\n     * @param restitute æ¯å¦è¿ååå§å®½åº¦ é»è®¤ä¸º false\r\n     */\r\n    updateColumns(columns, restitute = false, emit = false) {\r\n        this._state.columns = columns;\r\n        this.initColumns(emit, restitute);\r\n        this.resizeColumns(restitute);\r\n    }\r\n\r\n\r\n    getGroupColumns(columns) {\r\n        let arr = [];\r\n        const allCols = this.getAllFlatColumns();\r\n        columns.forEach(c => {\r\n            if (!c.colspan || c.colspan == 1)            {\r\n                if (!arr.find(n => n.field === c.field)) {\r\n                    arr.push(c);\r\n                }\r\n            } else {\r\n                 arr = arr.concat(this.getGroupColumns(allCols.filter(n => n.parentId == c.id\t)));\r\n            }\r\n        });\r\n        return arr;\r\n    }\r\n\r\n\r\n\r\n    initColumns(emit = false, restColumnWidth = false) {\r\n        const columns = this._state.flatColumns;\r\n        let colgroup: any = {\r\n            leftFixed: [],\r\n            rightFixed: [],\r\n            normalColumns: [],\r\n            columns: []\r\n        };\r\n        if (columns && columns.length) {\r\n            const leftFixedCols = this.getFixedCols('left');\r\n            const rightFixedCols = this.getFixedCols('right');\r\n            const normalCols = this.getFixedCols();\r\n\r\n            columns.forEach(c => {\r\n                if (!c.originalWidth) {\r\n                    c.originalWidth = c.width;\r\n                }\r\n            });\r\n\r\n            colgroup = {\r\n                leftFixed: leftFixedCols,\r\n                rightFixed: rightFixedCols,\r\n                normalColumns: normalCols,\r\n                columns: leftFixedCols.concat(normalCols).concat(rightFixedCols)\r\n            };\r\n\r\n            this.initColumnsWidth(colgroup, restColumnWidth);\r\n\r\n            if (this._state.fitColumns) {\r\n                this.setFitColumnsWidth(colgroup, true);\r\n            }\r\n\r\n            this.updateState({ columnsGroup: colgroup }, emit);\r\n        } else {\r\n            colgroup.leftFixedWidth = 0;\r\n            colgroup.rightFixedWidth = 0;\r\n            colgroup.normalWidth = 0;\r\n            colgroup.totalWidth = 0;\r\n            this.updateState({ columnsGroup: colgroup }, emit);\r\n        }\r\n    }\r\n\r\n    getColumnIndex(field: string, fixed: 'right'| '' | 'left' | 'center' = '') {\r\n        const colgroup = this._state.columnsGroup;\r\n        if (!fixed || this._state.fast) {\r\n            return colgroup.normalColumns.findIndex(n => n.field === field);\r\n        } else {\r\n            if (fixed === 'left') {\r\n                return colgroup.leftFixed.findIndex(n => n.field === field);\r\n            } else if (fixed === 'right') {\r\n                return colgroup.rightFixed.findIndex(n => n.field === field);\r\n            }\r\n        }\r\n    }\r\n\r\n    columnResizeEnd() {\r\n        // const colgroup = this._state.columnsGroup;\r\n        // this.initColumnsWidth(colgroup, false);\r\n        // this.updateState({ columnsGroup:  {...colgroup} }, false);\r\n        // this.gridSizeSubject.next(this._state);\r\n        this.resizeColumns();\r\n    }\r\n\r\n\r\n    resizeColumns(restitute = false) {\r\n        const colgroup = this._state.columnsGroup;\r\n        this.initColumnsWidth(colgroup, restitute);\r\n        if (this._state.fitColumns) {\r\n            const r = this.useUserSetColumnSize();\r\n            if (r) {\r\n                this.setFitColumnsWidth(colgroup, restitute, r);\r\n            } else {\r\n                this.setFitColumnsWidth(colgroup, restitute);\r\n            }\r\n        }\r\n        this.updateState({ columnsGroup:  {...colgroup} }, false);\r\n        this.gridSizeSubject.next(this._state);\r\n    }\r\n\r\n    getAllFlatColumns() {\r\n        return flatten<DataColumn>(this._state.columns);\r\n    }\r\n\r\n    getColumn(fieldName: string) {\r\n        return this.getAllFlatColumns().find(n => n.field === fieldName);\r\n    }\r\n\r\n    setFitColumnsWidth(colgroup: ColumnGroup, restitute = false, useUserSetColumnSize = false) {\r\n        if (!colgroup) {\r\n            return;\r\n        }\r\n        colgroup.normalWidth = this._state.width - colgroup.leftFixedWidth - colgroup.rightFixedWidth;\r\n\r\n        if (!colgroup.normalWidth || colgroup.normalWidth < 0 ) {\r\n            return;\r\n        }\r\n\r\n\r\n        if (useUserSetColumnSize) {\r\n            colgroup.totalWidth = colgroup.originalTotalWidth;\r\n            if (restitute) {\r\n                colgroup.normalColumns.forEach( col => {\r\n                    col.width = col.originalWidth;\r\n                });\r\n            }\r\n            // æ´æ° normalColumns width\r\n            colgroup.normalWidth = colgroup.normalColumns.reduce((totalWidth, col) => {\r\n                if (!restitute && col.width) {\r\n                    return totalWidth += col.width;\r\n                } else {\r\n                    return totalWidth += col.originalWidth;\r\n                }\r\n            }, 0);\r\n\r\n            colgroup.totalWidth = colgroup.leftFixedWidth + colgroup.rightFixedWidth + colgroup.normalWidth;\r\n        } else {\r\n            const minWidth = colgroup.normalColumns.reduce((totalWidth, col) => {\r\n                if (!restitute) {\r\n                    return totalWidth += col.width;\r\n                } else {\r\n                    return totalWidth += col.originalWidth;\r\n                }\r\n            }, 0);\r\n\r\n            colgroup.normalWidth = colgroup.normalWidth - 2;\r\n\r\n            colgroup.normalColumns.forEach( col => {\r\n                if (!restitute) {\r\n                    // col.width = Math.floor( col.width / minWidth * colgroup.normalWidth );\r\n                    col.width = Number((col.width / minWidth * colgroup.normalWidth ).toFixed(2));\r\n                } else {\r\n                    // col.width = Math.floor( col.originalWidth / minWidth * colgroup.normalWidth );\r\n                    col.width =  Number(( col.originalWidth / minWidth * colgroup.normalWidth ).toFixed(2));\r\n                }\r\n            });\r\n            colgroup.totalWidth = colgroup.leftFixedWidth + colgroup.rightFixedWidth + colgroup.normalWidth;\r\n        }\r\n\r\n    }\r\n\r\n    private getFixedCols(direction: 'left' | 'right' | '' = '') {\r\n        let cols = [];\r\n        if (!direction) {\r\n            cols = this._state.flatColumns.filter(col => !col.fixed);\r\n        } else {\r\n            cols = this._state.flatColumns.filter(col => col.fixed === direction);\r\n        }\r\n\r\n        // å¤è¡¨å¤´ï¼éæ°è®¡ç®åçé¡ºåº\r\n        if (this._state.columns.length > 1 && cols.length) {\r\n            const fields = DatagridColumnsHelper.getFields(this._state.columns);\r\n            const newcols = [];\r\n            fields.forEach(f => {\r\n                const c =  cols.find(col => (col.field || '' ) === f);\r\n                if (c) {\r\n                    newcols.push(c);\r\n                }\r\n            });\r\n            return newcols;\r\n        }\r\n\r\n        return cols;\r\n    }\r\n\r\n    // restitute: è¿ååå§å®½åº¦ï¼é»è®¤ false\r\n    private initColumnsWidth(colgroup: ColumnGroup,  restitute = false) {\r\n        let offset = 0;\r\n        offset = this._state.showLineNumber ? offset + this._state.lineNumberWidth : offset;\r\n        offset = this._state.showCheckbox ? offset + this._state.checkboxColumnWidth : offset;\r\n\r\n        const getColsWidth = (cols, val, reset) => {\r\n            return cols.reduce((r, c) => {\r\n                c.left = r;\r\n                if (!reset) {\r\n                    return r + c.width;\r\n                } else {\r\n                    return r + c.originalWidth;\r\n                }\r\n            }, val);\r\n        };\r\n\r\n        colgroup.leftFixedWidth = offset;\r\n        if (colgroup.leftFixed && colgroup.leftFixed.length) {\r\n            colgroup.leftFixedWidth = getColsWidth(colgroup.leftFixed, offset, restitute);\r\n        }\r\n\r\n        colgroup.rightFixedWidth = 0;\r\n        if (colgroup.rightFixed && colgroup.rightFixed.length) {\r\n            colgroup.rightFixedWidth = getColsWidth(colgroup.rightFixed, 0, restitute);\r\n        }\r\n\r\n        colgroup.normalWidth = 0;\r\n        if (this._state.columns && this._state.columns.length) {\r\n            colgroup.normalWidth = getColsWidth(colgroup.normalColumns, 0, restitute);\r\n            colgroup.originalTotalWidth = getColsWidth(colgroup.normalColumns, 0, true);\r\n        }\r\n\r\n        colgroup.totalWidth = colgroup.leftFixedWidth + colgroup.rightFixedWidth + colgroup.normalWidth;\r\n\r\n    }\r\n\r\n    showCheckbox(isShow = true) {\r\n        const colgroup = this._state.columnsGroup;\r\n        this.updateState({showCheckbox: isShow}, false);\r\n        if (isShow) {\r\n            colgroup.leftFixedWidth = colgroup.leftFixedWidth + this._state.checkboxColumnWidth;\r\n        } else {\r\n            colgroup.leftFixedWidth = colgroup.leftFixedWidth - this._state.checkboxColumnWidth;\r\n        }\r\n\r\n        this.columnResizeSubject.next(colgroup);\r\n    }\r\n\r\n    hideCheckbox() {\r\n        this.showCheckbox(false);\r\n    }\r\n\r\n    showLineNumber(isShow = true) {\r\n        const colgroup = this._state.columnsGroup;\r\n        this.updateState({showLineNumber: isShow}, false);\r\n        if (isShow) {\r\n            colgroup.leftFixedWidth = colgroup.leftFixedWidth + this._state.lineNumberWidth;\r\n        } else {\r\n            colgroup.leftFixedWidth = colgroup.leftFixedWidth - this._state.lineNumberWidth;\r\n        }\r\n\r\n        this.columnResizeSubject.next(colgroup);\r\n    }\r\n\r\n    hideLineNumber() {\r\n        this.showLineNumber(false);\r\n    }\r\n\r\n    setSortInfo(sortName, sortOrder) {\r\n        sortName = sortName || '';\r\n        sortOrder = sortOrder || '';\r\n        const fields = sortName.split(',');\r\n        const orders = sortOrder.split(',');\r\n        // if (!this._state.multiSort) {\r\n        const colgroup = this._state.columnsGroup;\r\n\r\n        const updateFieldOrder = (cols: DataColumn[]) => {\r\n            if (!cols || !cols.length) {\r\n                return;\r\n            }\r\n            cols.forEach( col => {\r\n                col.order = undefined;\r\n                const i = fields.findIndex(f => f === col.field);\r\n                if (i > -1) {\r\n                    col.order = orders[i];\r\n                }\r\n            });\r\n        };\r\n\r\n        updateFieldOrder(colgroup.normalColumns);\r\n        updateFieldOrder(colgroup.leftFixed);\r\n        updateFieldOrder(colgroup.rightFixed);\r\n        // }\r\n\r\n        this.updateState({sortName, sortOrder}, false);\r\n    }\r\n\r\n    orderBy(arr, props: any[], orders: any[]) {\r\n        const colObj = props.reduce((c, n) => {\r\n            c[n] = this.getColumn(n);\r\n            return c;\r\n        }, {});\r\n\r\n        return [...arr].sort((a, b) =>\r\n            props.reduce((acc, prop, i) => {\r\n                if (acc === 0) {\r\n                    let valA = Utils.getValue(prop, a);\r\n                    let valB = Utils.getValue(prop, b);\r\n\r\n                    if (colObj[prop] && colObj[prop]['isMultilingualField']) {\r\n                        valA = Utils.getMultilingualValue(valA, this.localId);\r\n                        valB = Utils.getMultilingualValue(valB, this.localId);\r\n                    }\r\n\r\n                    if (valA === undefined || valA === null) {\r\n                        valA = '';\r\n                    }\r\n                    if (valB === undefined || valB === null) {\r\n                        valB = '';\r\n                    }\r\n\r\n                    const [p1, p2] = orders && orders[i] === 'desc' ? [valB, valA] : [valA, valB];\r\n                    if (typeof p1 === 'string') {\r\n                        acc = p1.localeCompare(p2);\r\n                    } else {\r\n                        acc = p1 > p2 ? 1 : p1 < p2 ? -1 : 0;\r\n                    }\r\n                }\r\n                return acc;\r\n            }, 0)\r\n        );\r\n    }\r\n\r\n    sort(data: any) {\r\n        const orders = this._state.sortOrder.split(',');\r\n        const fields = this._state.sortName.split(',');\r\n\r\n        if (this._state.mergeCell && this._state.mergeFields && this._state.mergeFields.length) {\r\n            const newOrders = [];\r\n            const newFields = [...this._state.mergeFields];\r\n            fields.forEach((f, i) => {\r\n                let k = newFields.indexOf(f);\r\n                if (k == -1) {\r\n                    newFields.push(f);\r\n                    k = newFields.length - 1;\r\n                }\r\n                newOrders[k] = orders[i];\r\n            });\r\n\r\n            return this.orderBy(data, newFields, newOrders);\r\n        }\r\n\r\n        return this.orderBy(data, fields, orders);\r\n    }\r\n\r\n\r\n    clientSort(data?: any) {\r\n        if (this._state.sortName) {\r\n            if (data) {\r\n                this.updateState({ data }, false);\r\n            }\r\n            const sortedData = this.sort(this._state.data);\r\n            this.loadData(sortedData, false);\r\n        } else {\r\n            this.clearSort();\r\n        }\r\n\r\n        this.clientSort$.emit({sortName: this._state.sortName, sortOrder: this._state.sortOrder});\r\n    }\r\n\r\n    clearSort() {\r\n        this.loadData(this._state.originalData, false);\r\n    }\r\n\r\n    loadFilterData(filterData: any[]) {\r\n        this.loadData(filterData, false);\r\n    }\r\n\r\n\r\n    //#region åæ´é\r\n\r\n    private hasRowChanges(rowid: any) {\r\n        const _changes = this._state.changes;\r\n        if (!_changes) {\r\n            return false;\r\n        }\r\n        return _changes[rowid];\r\n    }\r\n\r\n    appendChanges(changes: RowDataChanges) {\r\n        if (!changes) {\r\n            return;\r\n        }\r\n        const id = changes[this._state.idField];\r\n        if (!id) {\r\n            return;\r\n        }\r\n        const _id = '' + id;\r\n        if (!this.hasRowChanges(_id)) {\r\n            this._state.changes = this._state.changes || {};\r\n            this._state.changes[_id] = changes;\r\n        } else {\r\n            this._state.changes[_id] = Object.assign(this._state.changes[_id], changes);\r\n        }\r\n    }\r\n\r\n    acceptChanges() {\r\n        const changes = this._state.changes;\r\n        if (changes) {\r\n            const keys = Object.keys(changes);\r\n            keys.forEach(id => {\r\n                this.updateRow(id, changes[id]);\r\n            });\r\n            this._state.originalData = cloneDeep(this._state.data);\r\n        }\r\n    }\r\n    rejectChanges(rowid = null) {\r\n        const changes = this._state.changes;\r\n        if (changes) {\r\n            if (!rowid) {\r\n                this._state.data = cloneDeep(this._state.originalData);\r\n                this._state.changes = null;\r\n            } else {\r\n                const rowChanges =  this._state.changes['' + rowid];\r\n                if (rowChanges) {\r\n                    const orgiRow = this._state.originalData.find(r => this.primaryId(r) === rowid);\r\n                    this._state.data.forEach(r => {\r\n                        if (this.primaryId(r) === rowid) {\r\n                            r = cloneDeep(orgiRow);\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n\r\n            this.refresh();\r\n        }\r\n    }\r\n\r\n    getChanges() {\r\n        return this._state.changes;\r\n    }\r\n\r\n    refresh() {\r\n        const data = cloneDeep(this._state.data);\r\n        this.loadData(data);\r\n    }\r\n\r\n    //#endregion\r\n\r\n    /**\r\n     * æé åè®¡è¡\r\n     * @param data æ°æ®éå\r\n     */\r\n    getFooterData(data) {\r\n        if (!data || !data.length) {\r\n            return [];\r\n        }\r\n\r\n        // const columns = this._state.flatColumns;\r\n        const columns = flatten<DataColumn>(this._state.columns).filter((col: DataColumn) => !col.colspan);\r\n        const footerRow = {};\r\n\r\n        columns.forEach(col => {\r\n            if (col.footer && col.footer.options) {\r\n                const options = col.footer.options;\r\n                const text = options.text;\r\n                const typ = options.calculationType as CalculationType;\r\n\r\n                if (typ !== undefined && typ != -1) {\r\n                    const val = this.calculation(data, typ, col);\r\n                    footerRow[col.field] = val;\r\n                } else {\r\n                    footerRow[col.field] = text || '';\r\n                }\r\n            } else {\r\n                footerRow[col.field] = '';\r\n            }\r\n        });\r\n\r\n        return [footerRow];\r\n    }\r\n\r\n    private arrToGroup(items, fields: string[]) {\r\n        if (fields.length) {\r\n            const first = fields.shift();\r\n            const g1 = groupBy(items, (n) => Utils.getValue(first, n));\r\n            this.toGroup(g1, fields);\r\n            return g1;\r\n        }\r\n    }\r\n\r\n    private toGroup(g1, fieldArr) {\r\n        if (fieldArr.length) {\r\n            Object.keys(g1).forEach((k) => {\r\n                const items = g1[k];\r\n                const _nextFields = fieldArr.map((n) => n);\r\n                const _f = _nextFields.shift();\r\n                g1[k] = groupBy(items, (n) => Utils.getValue(_f, n));\r\n                if (_nextFields.length) {\r\n                    this.toGroup(g1[k], _nextFields);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    private groupRows2Flat(groupRows, initLevel, parent) {\r\n        let results = [];\r\n        if (initLevel === undefined) {\r\n            initLevel = 0;\r\n        }\r\n        const idfield = this._state.idField;\r\n        const columns = this._state.flatColumns;\r\n        const data = this._state.data;\r\n        const groupFieldArr = this._state.groupField.split(',');\r\n        const pid = parent ? parent[idfield] : null;\r\n        const colspan = this._state.columnsGroup.normalColumns.length;\r\n\r\n        const expandGroupRows = this._state.expandGroupRows;\r\n\r\n        Object.keys(groupRows).forEach((k, m) => {\r\n\r\n            const groupItem = { [idfield]: Utils.uuid(),\r\n                                [IS_GROUP_ROW_FIELD]: true, [GROUP_LEVEL_FIELD]: initLevel, data: { }, value: k,\r\n                                [GROUP_VISIBLE_FIELD]: true, expanded: expandGroupRows, field: groupFieldArr[initLevel],\r\n                                colspan, total: 0, rows: [], [GROUP_ROW_FIELD]: pid};\r\n\r\n            // TFS: 356955\r\n            if (parent) {\r\n                groupItem.rows = parent.rows.filter(n => !n[IS_GROUP_ROW_FIELD] &&\r\n                    !n[IS_GROUP_FOOTER_ROW_FIELD] &&  Utils.getValue(groupFieldArr[initLevel], n) === k);\r\n            } else {\r\n                groupItem.rows = data.filter(n => '' + Utils.getValue(groupFieldArr[initLevel], n) === k);\r\n            }\r\n\r\n            if (parent) {\r\n                parent.rows.push(groupItem);\r\n            }\r\n\r\n            groupItem.total = groupItem.rows.filter(n => !n[IS_GROUP_ROW_FIELD] && !n[IS_GROUP_FOOTER_ROW_FIELD]).length;\r\n\r\n            results.push(groupItem);\r\n            const items = groupRows[k];\r\n            if (isPlainObject(items)) {\r\n                const level = initLevel + 1;\r\n                results = results.concat(this.groupRows2Flat(items, level, groupItem));\r\n            } else {\r\n                groupItem.total = items.length;\r\n                items.map(n => {\r\n                    n[GROUP_ROW_FIELD] = groupItem[idfield];\r\n                    n[GROUP_VISIBLE_FIELD] = expandGroupRows;\r\n                    n[GROUP_LEVEL_FIELD] = groupItem[GROUP_LEVEL_FIELD] + 1;\r\n                    return n;\r\n                });\r\n                groupItem.rows = items;\r\n                results = results.concat(items);\r\n            }\r\n\r\n            if (this._state.groupFooter) {\r\n                const footerItem = {\r\n                    [IS_GROUP_FOOTER_ROW_FIELD]: true,\r\n                    [GROUP_ROW_FIELD]: groupItem[idfield],\r\n                    [GROUP_VISIBLE_FIELD]: expandGroupRows,\r\n                    [GROUP_LEVEL_FIELD]: initLevel,\r\n                    data: {}\r\n                };\r\n                groupItem.rows.push(footerItem);\r\n                results.push(footerItem);\r\n            }\r\n        });\r\n        return results;\r\n    }\r\n\r\n    /** æ´æ°åç»åè®¡è¡æ°æ® */\r\n    private updateGroupFooterData(groupFooterRow: any, columns: any, groupRows: any) {\r\n        columns.forEach(col => {\r\n            if (col.groupFooter && col.groupFooter.options) {\r\n                const options = col.groupFooter.options;\r\n                const text = options.text;\r\n                const typ = options.calculationType as CalculationType;\r\n\r\n                if (typ !== undefined && typ != -1) {\r\n                    const val = this.calculation(groupRows, typ, col);\r\n                    groupFooterRow.data[col.field] = val;\r\n                } else {\r\n                    groupFooterRow.data[col.field] = text || '';\r\n                }\r\n            } else {\r\n                groupFooterRow.data[col.field] = '';\r\n            }\r\n        });\r\n    }\r\n\r\n    /** å¤å­æ®µåç»\r\n     * groupField ä»¥éå·åéï¼ä»å·¦å°å³ä¾æ¬¡è¿è¡åç»\r\n     */\r\n    private groupRows2(data: any[]) {\r\n        if (data && data.length) {\r\n            const columns = this._state.flatColumns;\r\n            const groupField = this._state.groupField || '';\r\n\r\n            if (!groupField) {\r\n                return data;\r\n            }\r\n\r\n            const groupData = this.arrToGroup(data, groupField.split(','));\r\n            const result = this.groupRows2Flat(groupData, 0, null);\r\n\r\n            let k = 0;\r\n\r\n            const prow = (pid) => result.find(n => n[this._state.idField] === pid);\r\n\r\n            result.map((n, i) => {\r\n                if (!n[IS_GROUP_ROW_FIELD] && !n[IS_GROUP_FOOTER_ROW_FIELD]) {\r\n                    n[ROW_INDEX_FIELD] = k;\r\n                    k++;\r\n                }\r\n\r\n                // æ´æ°åè®¡è¡æ°æ®\r\n                if (n[IS_GROUP_FOOTER_ROW_FIELD]) {\r\n                    const rows = prow(n[GROUP_ROW_FIELD]).rows.filter((r: any) => !r[IS_GROUP_ROW_FIELD] && !r[IS_GROUP_FOOTER_ROW_FIELD]);\r\n                    this.updateGroupFooterData(n, columns, rows);\r\n                }\r\n\r\n                return n;\r\n            });\r\n            return result;\r\n        }\r\n\r\n        return [];\r\n    }\r\n\r\n    showGroupFooter(groupFooter) {\r\n        this.updateState({groupFooter}, false);\r\n        this.updateVirthualRows(0);\r\n    }\r\n\r\n    updateGroupFooter(groupRowId: string) {\r\n        const groupRow = this._state.virtual.virtualRows.find((n: any) => {\r\n            return n['id'] === groupRowId;\r\n        });\r\n\r\n        if (groupRow) {\r\n            const groupRows = groupRow.rows;\r\n            const groupFooterRows = groupRows.filter((n: any) => n['__group_footer__']);\r\n            const columns = this._state.flatColumns;\r\n\r\n            const rows = groupRows.filter((n: any) => !n['__group_footer__']);\r\n\r\n            groupFooterRows.forEach((n: any) => {\r\n                this.updateGroupFooterData(n, columns, rows);\r\n            });\r\n        }\r\n    }\r\n\r\n    private calculation(data: any, typ: CalculationType, col: any) {\r\n        let val: any = '';\r\n        // TFS: 357000\r\n        // http://10.24.1.11:8080/tfs/GSP/GSPCloud/web/_queries?id=357000&triage=true&fullScreen=false&_a=edit\r\n        if (!data || !data.length) {\r\n            return '';\r\n        }\r\n        const field = col.field;\r\n        const arr = data.map((o) => Utils.getValue(field, o) || 0);\r\n        switch (typ) {\r\n            case CalculationType.sum:\r\n                // val = sumBy(data, (o) => Utils.getValue(field, o));\r\n                val = BigNumber.sum.apply(null, arr).toFixed();\r\n                break;\r\n            case CalculationType.max:\r\n                // const maxObj = maxBy(data, (o) => Utils.getValue(field, o));\r\n                // val = Utils.getValue(field, maxObj);\r\n                val = BigNumber.max.apply(null, arr).toFixed();\r\n                break;\r\n            case CalculationType.min:\r\n                // const minObj = minBy(data, (o) => Utils.getValue(field, o));\r\n                // val = Utils.getValue(field, minObj);\r\n                val = BigNumber.min.apply(null, arr).toFixed();\r\n                break;\r\n            case CalculationType.average:\r\n                // val = meanBy(data, (o) => Utils.getValue(field, o));\r\n                val = BigNumber.sum.apply(null, arr).div(arr.length).toFixed();\r\n                break;\r\n            case CalculationType.count:\r\n                val = data.length;\r\n                break;\r\n        }\r\n        return val;\r\n    }\r\n\r\n    //#region ç»ä»¶åå§å±æ§\r\n\r\n    setinitialOptions(opts: {[key: string]: any}) {\r\n        this._state.initialOptions = {};\r\n        // åç»\r\n        this._state.initialOptions['groupField'] = opts.groupField;\r\n\r\n        // æåº\r\n        this._state.initialOptions['sort'] = {\r\n            sortName: opts.sortName,\r\n            sortOrder: opts.sortOrder\r\n        };\r\n        // åæ¾ç¤ºéèãå¯¹é½æ¹å¼\r\n        if (opts.columns && opts.columns[0]) {\r\n            this._state.initialOptions['columnFields'] = (opts.columns[0] as any).map(n => {\r\n                return {\r\n                    width: n.width || 100,\r\n                    field: n.field,\r\n                    halign: n.halign,\r\n                    align: n.align,\r\n                    visible: n.visible,\r\n                    footer: cloneDeep(n.footer || {}),\r\n                    groupFooter: cloneDeep(n.groupFooter || {})\r\n                };\r\n            });\r\n        }\r\n    }\r\n\r\n    //#endregion\r\n}\r\n","import { Utils } from './../utils/utils';\r\nimport { EventEmitter } from '@angular/core';\r\n/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @Date: 2019-08-06 07:43:53\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-11-09 20:44:54\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\nimport { CellInfo } from './state';\r\nimport { Injectable } from '@angular/core';\r\nimport { Subject, BehaviorSubject } from 'rxjs';\r\nimport { RowEventParam, RowHoverEventParam } from '../types/event-params';\r\nimport { filter, map, debounceTime } from 'rxjs/operators';\r\nimport { CommonUtils, IdService } from '@farris/ui-common';\r\n\r\nexport type ScrollAction =\r\n    | 'psScrollY'\r\n    | 'psScrollX'\r\n    | 'psScrollUp'\r\n    | 'psScrollDown'\r\n    | 'psScrollLeft'\r\n    | 'psScrollRight'\r\n    | 'psYReachEnd'\r\n    | 'psYReachStart'\r\n    | 'psXReachEnd'\r\n    | 'psXReachStart';\r\n\r\nexport class DatagridService {\r\n    private scorllSubject = new Subject();\r\n    private scrollX = new BehaviorSubject(0);\r\n\r\n    private rowHoverSubject = new Subject<RowHoverEventParam>();\r\n    private rowSelectSubject = new Subject<Partial<RowHoverEventParam>>();\r\n\r\n    private dataSourceChangedSubject = new Subject();\r\n    /** ç¼è¾ååæ ¼ */\r\n    private editCellSubject = new Subject();\r\n    /** éä¸­ååæ ¼ */\r\n    private selectCellSubject = new Subject();\r\n    /** ç»æååç¼è¾ */\r\n    private endCellEdit = new Subject();\r\n    private changeCheckedRows = new Subject();\r\n    /** ç»æè¡ç¼è¾ */\r\n    // private endRowEdit = new BehaviorSubject(true);\r\n\r\n    public scorll$ = this.scorllSubject.asObservable();\r\n    public scrollX$ = this.scorll$.pipe(\r\n        filter((p: any) => p.type === 'psScrollX'),\r\n        map(t => t.x),\r\n        debounceTime(50)\r\n    );\r\n    public scrollY$ = this.scorll$.pipe(\r\n        filter((p: any) => p.type === 'psScrollY'),\r\n        map(t => t.x),\r\n        debounceTime(50)\r\n    );\r\n    public rowHover$ = this.rowHoverSubject.asObservable();\r\n    public rowClick$ = this.rowSelectSubject.asObservable();\r\n    public onDataSourceChange = this.dataSourceChangedSubject.asObservable();\r\n    public cellEdit$ = this.editCellSubject.asObservable();\r\n    public endCellEdit$ = this.endCellEdit.asObservable();\r\n    public checkedRowsTotalChanged$ = this.changeCheckedRows.asObservable();\r\n    public updateEmptyStyle$ = new EventEmitter();\r\n\r\n    public showGridHeader = new EventEmitter();\r\n    // åæ¶å¨é\r\n    public uncheckAll = new EventEmitter();\r\n    // å¨é¨éä¸­\r\n    public checkAll = new EventEmitter();\r\n\r\n    public columnResized = new EventEmitter();\r\n\r\n    public rowHeightChanged = new EventEmitter();\r\n\r\n    public loadVirtualData = new EventEmitter();\r\n    /** æ¾ç¤ºåºå®åéå½± */\r\n    public showFixedShadow = new EventEmitter();\r\n    // public endRowEdit$ = this.endRowEdit.asObservable();\r\n\r\n    public setSelecedRow = new EventEmitter();\r\n    public setCheckedRows = new EventEmitter();\r\n\r\n    public scrollToCurrentRow = new EventEmitter();\r\n\r\n    public columnsChanged = new EventEmitter();\r\n\r\n    public cellContentWrapChanged = new EventEmitter();\r\n\r\n    public onFilterChanged = new EventEmitter();\r\n    public clearFilter = new EventEmitter();\r\n    public filterTextChange = new EventEmitter();\r\n    public toggleFilterRow = new EventEmitter();\r\n\r\n    public refreshFooterData = new EventEmitter();\r\n\r\n    public disableHeader = new EventEmitter();\r\n    /** æ´æ°å¨éå¤éæ¡ç¶æ */\r\n    public changeCheckAllStatus = new EventEmitter();\r\n\r\n    public setScrollbarPosition = new EventEmitter();\r\n\r\n    public smartFilterBarExpand = new EventEmitter();\r\n    public smartFilterDataChange = new EventEmitter();\r\n\r\n    public scrollbarUpdate = new EventEmitter();\r\n\r\n    footerPositionChanged = new EventEmitter();\r\n\r\n    styleElement: HTMLStyleElement = null;\r\n    commonUtils: CommonUtils = null;\r\n\r\n    idService: IdService = null;\r\n\r\n    // ååæ ¼ç¼è¾å¨åå»ºå®æ\r\n    cellEditorCreated = new EventEmitter();\r\n    // ååæ ¼ç¼è¾å¨éæ¯\r\n    cellEditorDestory = new EventEmitter();\r\n    // ç¦ç¹è¡åæ¢\r\n    focusRowChanged = new EventEmitter();\r\n\r\n    constructor() { }\r\n\r\n    onScrollMove(x: number, action: ScrollAction) {\r\n        this.scorllSubject.next({ x, type: action });\r\n    }\r\n\r\n    dataSourceChanged() {\r\n        this.dataSourceChangedSubject.next();\r\n    }\r\n\r\n    onRowHover(rowIndex: number, rowData: any, mouseEnter: boolean) {\r\n        this.rowHoverSubject.next({ index: rowIndex, data: rowData, mouseenter: mouseEnter });\r\n    }\r\n\r\n    onRowClick(rowIndex: number, rowData: any) {\r\n        this.rowSelectSubject.next({ index: rowIndex, data: rowData });\r\n    }\r\n\r\n    onCellEdit(tdElement: any) {\r\n        this.editCellSubject.next(tdElement);\r\n    }\r\n\r\n    onEndCellEdit(cell: CellInfo) {\r\n        this.endCellEdit.next(cell);\r\n    }\r\n\r\n    onSelectCell(cell: CellInfo) {\r\n        this.selectCellSubject.next(cell);\r\n    }\r\n\r\n    onCheckedRowsCountChange() {\r\n        this.changeCheckedRows.next();\r\n    }\r\n\r\n    onRowHeightChange(rowHeight: number) {\r\n        this.rowHeightChanged.emit(rowHeight);\r\n    }\r\n\r\n    onLoadVirtualData(data: any) {\r\n        this.loadVirtualData.emit({ data });\r\n    }\r\n\r\n    onClearFilter() {\r\n        this.clearFilter.emit();\r\n        this.filterTextChange.emit('');\r\n    }\r\n\r\n    onFilterTextChange(txt: string) {\r\n        this.filterTextChange.emit(txt);\r\n    }\r\n\r\n    restoreScrollbarPosition() {\r\n        this.setScrollbarPosition.emit();\r\n    }\r\n\r\n    updateEmptyStyle() {\r\n        this.updateEmptyStyle$.emit();\r\n    }\r\n\r\n    groupBy = (arr, fn) => arr.map(typeof fn === 'function' ? fn : val => Utils.getValue(fn, val)).reduce((acc, val, i) => {\r\n        acc[val] = (acc[val] || []).concat(arr[i]);\r\n        return acc;\r\n    }, {})\r\n\r\n    getMergeCellInfo(data, mergeFields) {\r\n        const result = {};\r\n        let firstVal = null;\r\n        let currVal;\r\n\r\n        mergeFields.forEach((f, i) => {\r\n            if (i === 0) {\r\n                data.forEach((d, j) => {\r\n                    const item = { [f]: { show: true, rowspan: 1 } };\r\n                    if (!result[j]) {\r\n                        result[j] = item;\r\n                    } else {\r\n                        if (!result[j][f]) {\r\n                            result[j] = Object.assign(result[j], item);\r\n                        }\r\n                    }\r\n\r\n                    const _item = result[j];\r\n\r\n                    currVal = d[f];\r\n                    if (firstVal === null || firstVal !== currVal) {\r\n                        firstVal = currVal;\r\n                        _item[f].show = true;\r\n                        _item[f].startIndex = j;\r\n                    } else {\r\n                        const strIndex = result[j - 1][f].startIndex;\r\n                        _item[f].startIndex = strIndex;\r\n                        _item[f].show = false;\r\n                        result[strIndex][f].rowspan++;\r\n                    }\r\n                });\r\n            }\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    getMergeCellInfo0(data, field) {\r\n        const result = {};\r\n        let firstVal;\r\n        let currVal;\r\n        data.forEach((d, j) => {\r\n            const item = { [field]: { show: true, rowspan: 1, value: '' } };\r\n            if (!result[j]) {\r\n                result[j] = item;\r\n            }\r\n\r\n            const _item = result[j];\r\n            currVal = Utils.getValue(field, d);\r\n            _item[field].value = currVal;\r\n            if (firstVal === undefined || firstVal !== currVal) {\r\n                firstVal = currVal;\r\n                _item[field].show = true;\r\n                _item[field].startIndex = j;\r\n            } else {\r\n                const strIndex = result[j - 1][field].startIndex;\r\n                _item[field].startIndex = strIndex;\r\n                _item[field].show = false;\r\n                result[strIndex][field].rowspan++;\r\n            }\r\n        });\r\n        return result;\r\n    }\r\n\r\n    getMergeCellInfo2(data, mergeFields) {\r\n        let result = {};\r\n        let firstVal = null;\r\n        result = this.getMergeCellInfo0(data, mergeFields.splice(0, 1)[0]);\r\n\r\n        const groupData = this.groupBy(data, mergeFields[0]);\r\n        const groupKeys = Object.keys(groupData);\r\n        let startRowIndex = 0;\r\n        mergeFields.forEach((f, i) => {\r\n            groupKeys.forEach((k, j) => {\r\n                let currVal;\r\n                groupData[k].forEach((d, n) => {\r\n                    if (result[startRowIndex] && !result[startRowIndex][f]) {\r\n                        result[startRowIndex] = Object.assign(result[startRowIndex], { [f]: { show: true, rowspan: 1, value: '' } });\r\n                    }\r\n\r\n                    const _item = result[startRowIndex];\r\n                    currVal = Utils.getValue(f, d);\r\n                    _item[f].value = currVal;\r\n                    if (firstVal === null || firstVal !== currVal) {\r\n                        firstVal = currVal;\r\n                        _item[f].show = true;\r\n                        _item[f].startIndex = startRowIndex;\r\n                    } else {\r\n                        const strIndex = result[startRowIndex - 1][f].startIndex;\r\n                        _item[f].startIndex = strIndex;\r\n                        _item[f].show = false;\r\n                        result[strIndex][f].rowspan++;\r\n                    }\r\n\r\n                    startRowIndex++;\r\n                });\r\n            });\r\n        });\r\n        return result;\r\n    }\r\n\r\n\r\n    getMergeCellInfo3(data, mergeFields) {\r\n        let result = {};\r\n        const firstField = mergeFields.splice(0, 1)[0];\r\n        result = this.getMergeCellInfo0(data, firstField);\r\n        let prevGroupField = firstField;\r\n        // const groupData = this.groupBy(data, firstField);\r\n        // const groupKeys = Object.keys(groupData);\r\n        mergeFields.forEach((f, i) => {\r\n            let startRowIndex = 0;\r\n\r\n            let firstVal;\r\n            let currVal;\r\n\r\n            if (i > 0) {\r\n                prevGroupField = mergeFields[i - 1];\r\n            }\r\n\r\n            data.forEach((d, n) => {\r\n                if (result[startRowIndex] && !result[startRowIndex][f]) {\r\n                    result[startRowIndex] = Object.assign(result[startRowIndex], { [f]: { show: true, rowspan: 1, value: '' } });\r\n                }\r\n\r\n                const _item = result[startRowIndex];\r\n                currVal = Utils.getValue(f, d);\r\n                _item[f].value = currVal;\r\n\r\n                if (startRowIndex > 0) {\r\n                    const prevItem = result[startRowIndex - 1];\r\n                    const _c = Object.keys(_item).map(c => '' + _item[c].value).join(',');\r\n                    const _p = Object.keys(prevItem).map(p => '' + prevItem[p].value).join(',');\r\n\r\n                    if (_c !== _p) {\r\n                        firstVal = undefined;\r\n                    }\r\n                }\r\n\r\n                if ((firstVal === undefined || firstVal !== currVal)) {\r\n                    firstVal = currVal;\r\n                    _item[f].show = true;\r\n                    _item[f].startIndex = startRowIndex;\r\n                } else {\r\n                    const startIndex = result[startRowIndex - 1][f].startIndex;\r\n                    _item[f].startIndex = startIndex;\r\n                    _item[f].show = false;\r\n                    result[startIndex][f].rowspan++;\r\n                }\r\n\r\n                if (data.length - 1 > startRowIndex) {\r\n                    startRowIndex++;\r\n                }\r\n            });\r\n        });\r\n        return result;\r\n    }\r\n\r\n\r\n    getMergeInfo(rowIndex: number, field: string, mergeCellInfo: any) {\r\n        if (field && mergeCellInfo && mergeCellInfo[rowIndex] && mergeCellInfo[rowIndex][field]) {\r\n            return mergeCellInfo[rowIndex][field];\r\n        }\r\n        return null;\r\n    }\r\n\r\n    removeStyleSheet() {\r\n        if (this.styleElement) {\r\n            this.styleElement.remove();\r\n            this.styleElement = null;\r\n        }\r\n    }\r\n\r\n    createStyleElement(styleSheetId: string) {\r\n        this.styleElement = this._createStyleSheet(styleSheetId);\r\n    }\r\n\r\n    appendCssRules(rules: string[]) {\r\n        if (this.styleElement) {\r\n            this._appendCssRules(rules, this.styleElement.sheet);\r\n        }\r\n    }\r\n\r\n    removeCssRule(ruleName: string | Array<string>) {\r\n        if (this.styleElement) {\r\n            if (typeof ruleName === 'string') {\r\n                this._removeCssRule(ruleName, this.styleElement.sheet);\r\n            } else {\r\n                if (Array.isArray(ruleName)) {\r\n                    ruleName.forEach(n => {\r\n                        this._removeCssRule(n, this.styleElement.sheet);\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    private _createStyleSheet(styleSheetId: string): HTMLStyleElement {\r\n        const htmlHead = document.querySelector('head');\r\n\r\n        const styleEleId = styleSheetId;\r\n        let styleElement = null;\r\n        if (document.querySelector('#' + styleEleId)) {\r\n            styleElement = document.querySelector('#' + styleEleId);\r\n            styleElement.innerText = '';\r\n        } else {\r\n            styleElement = document.createElement('style');\r\n            styleElement.id = styleEleId;\r\n            styleElement.type = 'text/css';\r\n            // styleElement.sheet = new CSSStyleSheet();\r\n            htmlHead.appendChild(styleElement);\r\n        }\r\n\r\n        return styleElement;\r\n    }\r\n\r\n    private _appendCssRules(rules: string[], styleSheet) {\r\n        for (const rule of rules) {\r\n            const ruleName = rule.slice(0, rule.indexOf('{')).trim();\r\n            const removedCssRule = this._removeCssRule(ruleName, styleSheet);\r\n            if (styleSheet.addRule) {\r\n                let cssText = '';\r\n                if (removedCssRule) {\r\n                    cssText += removedCssRule.cssText.slice(removedCssRule.cssText.indexOf('{') + 1, removedCssRule.cssText.indexOf('}'));\r\n                }\r\n                cssText += rule.slice(rule.indexOf('{') + 1, rule.indexOf('}')).replace(/\"/g, '').replace(/,/g, ';') + ';';\r\n                styleSheet.addRule(ruleName, cssText, 0);\r\n            } else {\r\n                styleSheet.insertRule(rule, 0);\r\n            }\r\n        }\r\n    }\r\n\r\n    private _removeCssRule(ruleName: string, styleSheet) {\r\n\r\n        if (!styleSheet) {\r\n            return;\r\n        }\r\n\r\n        const cssRules = (styleSheet.cssRules || styleSheet.rules) as any;\r\n        let ii = 0;\r\n        let cssRule: any = false;\r\n\r\n        do {\r\n            cssRule = cssRules[ii];\r\n            if (cssRule) {\r\n                if (cssRule.selectorText.toLowerCase() == ruleName.toLowerCase()) {\r\n                    if (styleSheet.cssRules) {\r\n                        styleSheet.deleteRule(ii);\r\n                    } else {\r\n                        styleSheet.removeRule(ii);\r\n                    }\r\n\r\n                    return cssRule;\r\n                }\r\n            }\r\n            ii++;\r\n        } while (cssRule);\r\n    }\r\n\r\n    createConfigKey(gridID: string) {\r\n        const { host, hash, href, pathname } = location;\r\n        let formCode = '';\r\n        let menuId = '';\r\n        if (hash) {\r\n            const _searchArr = hash.split('?');\r\n            formCode = _searchArr[0];\r\n\r\n            const searchObj: any = {};\r\n            if (_searchArr[1]) {\r\n                _searchArr[1].split('&').map(n => {\r\n                    searchObj[n.split('=')[0]] = n.split('=')[1];\r\n                });\r\n            }\r\n\r\n            const catchFuncIdKEY = `${pathname}`;\r\n            if (searchObj && Object.keys(searchObj).length) {\r\n                menuId = searchObj.funcId || '';\r\n                if (menuId) {\r\n                    localStorage.setItem(catchFuncIdKEY, menuId);\r\n                }\r\n            }\r\n\r\n            if (!menuId) {\r\n                menuId = localStorage.getItem(catchFuncIdKEY);\r\n            }\r\n        }\r\n        const key = formCode + '_' + menuId + '_' + gridID;\r\n\r\n        if (!this.idService) {\r\n            this.idService = new IdService();\r\n        }\r\n\r\n        return this.idService.encrypt(key);\r\n    }\r\n\r\n\r\n    getCustomStyle(styler: any, args: any): { cls?: any, style?: any } {\r\n        if (typeof styler === 'object') {\r\n            return styler;\r\n        } else {\r\n            if (typeof styler === 'function') {\r\n                const p = args || [];\r\n                return styler(...p);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    findNextTr(nextTr, dir) {\r\n        const getNextElement = (target) => {\r\n            if (target && target.className.indexOf('f-datagrid-disable-row') == -1) {\r\n                return target;\r\n            }\r\n            return false;\r\n        };\r\n\r\n        const m = dir === 'down' ? 'nextElementSibling' : 'previousElementSibling';\r\n\r\n        const getEle = (t) => {\r\n            let n = null;\r\n            let next = true;\r\n            while (next) {\r\n                n = getNextElement(t);\r\n                if (n) {\r\n                    next = false;\r\n                } else {\r\n                    if (t && t[m]) {\r\n                        n = getNextElement(t[m]);\r\n                        if (n) {\r\n                            break;\r\n                        }\r\n                    } else {\r\n                        next = false;\r\n                    }\r\n                }\r\n            }\r\n            return n;\r\n        };\r\n\r\n        return getEle(nextTr);\r\n    }\r\n}\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { DataResult } from './state';\r\nimport { Observable } from 'rxjs';\r\nimport { InjectionToken } from '@angular/core';\r\n\r\nexport const DATAGRID_REST_SERVICEE = new InjectionToken<RestService>('DataGrid Request Data Service.');\r\n\r\nexport abstract class RestService {\r\n    abstract getData(url: string, param?: any): Observable<DataResult>;\r\n}\r\n\r\nexport class DefaultRestService implements RestService {\r\n    constructor(private http: HttpClient) {}\r\n    getData(url: string, param?: any): Observable<DataResult> {\r\n        return this.http.get<DataResult>(url, { params: param });\r\n    }\r\n}\r\n","/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @Date: 2019-08-21 10:37:53\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-08-22 19:15:49\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\n\r\nexport type DatagridValidatorType = 'required' | 'min' | 'max' |'minLength' |'maxLength' | 'email' | 'requriedTrue' | 'pattern' | string;\r\n\r\nexport interface DatagridValidator {\r\n    type: DatagridValidatorType;\r\n    value?: any;\r\n    messager?: string;\r\n}\r\n\r\nexport const DefaultDatagridValidatorMessager = {\r\n    required: 'æ­¤å­æ®µä¸è½ä¸ºç©ºã',\r\n    min: 'æå°å¼ä¸è½å°äº${0}',\r\n    max: 'æå¤§å¼ä¸è½å¤§äº${0}',\r\n    minlength: 'è³å°è¾å¥${0}ä¸ªå­ç¬¦',\r\n    maxlength: 'å­ç¬¦é¿åº¦ä¸è½å¤§äº${0}',\r\n    email: 'Email æ ¼å¼ä¸æ­£ç¡®',\r\n    requriedtrue: 'å¡å¿éä¸­',\r\n    pattern: 'è¾å¥çæ ¼å¼ä¸æ­£ç¡®ã'\r\n};\r\n\r\n\r\n","/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @Date: 2019-08-21 15:44:21\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-08-22 19:19:49\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\nimport { Injectable } from '@angular/core';\r\nimport { DatagridValidator } from '../types/datagrid-validator';\r\nimport { DefaultDatagridValidatorMessager as ddvm } from '../types/datagrid-validator';\r\n@Injectable()\r\nexport class ValidatorMessagerService {\r\n\r\n    getValidatorErrorMessage(validatorName: string, validators: DatagridValidator[]) {\r\n        validatorName = validatorName.toLowerCase();\r\n        const validator = validators.find(v => v.type.toLowerCase() === validatorName);\r\n        if (validator && validator.messager) {\r\n            return validator.messager;\r\n        } else {\r\n            return ddvm[validatorName] ? ddvm[validatorName] : 'éªè¯ä¸éè¿ï¼';\r\n        }\r\n    }\r\n\r\n}\r\n","/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @Date: 2019-08-06 07:43:07\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-08-21 15:13:50\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\nexport class DomHandler {\r\n    public static hasClass(element: any, className: string): boolean {\r\n        if (element.classList) {\r\n            return Array.from(element.classList).filter(n => n === className).length > 0;\r\n        } else {\r\n            return element.className.indexOf(className) > -1;\r\n        }\r\n    }\r\n\r\n    public static removeClass(element: any, className: string): void {\r\n        if (element.classList) {\r\n            element.classList.remove(className);\r\n        } else {\r\n            element.className = element.className.replace(new RegExp('(^|\\\\b)' + className.split(' ').join('|') + '(\\\\b|$)', 'gi'), ' ');\r\n        }\r\n    }\r\n\r\n    public static findSingle(element: any, selector: string): any {\r\n        if (element) {\r\n            return element.querySelector(selector);\r\n        }\r\n        return null;\r\n    }\r\n\r\n    public static getOffset(el) {\r\n        const rect = el.getBoundingClientRect();\r\n\r\n        return {\r\n            top: rect.top + document.body.scrollTop,\r\n            left: rect.left + document.body.scrollLeft\r\n        };\r\n    }\r\n\r\n    public static getOuterHeight(el, margin?) {\r\n        let height = el.offsetHeight;\r\n\r\n        if (margin) {\r\n            const style = getComputedStyle(el);\r\n            height += parseFloat(style.marginTop) + parseFloat(style.marginBottom);\r\n        }\r\n\r\n        return height;\r\n    }\r\n\r\n    public static getOuterWidth(el, margin?) {\r\n        let width = el.offsetWidth;\r\n\r\n        if (margin) {\r\n            const style = getComputedStyle(el);\r\n            width += parseFloat(style.marginLeft) + parseFloat(style.marginRight);\r\n        }\r\n\r\n        return width;\r\n    }\r\n}\r\n","import { LocaleService } from '@farris/ui-locale';\r\nimport { Injectable, Injector, EventEmitter, Optional } from '@angular/core';\r\nimport { Compare, FilterCondition } from '@farris/ui-common/types';\r\nimport { DatagridFacadeService } from './datagrid-facade.service';\r\nimport { Utils } from './../utils/utils';\r\nimport { DataColumn, ColumnFilterType, ColumnFilter, FilterCondition as ClientFilterCondition } from '../types/data-column';\r\nimport { DatagridColumnsHelper } from './datagrid-columns.helper';\r\n\r\n@Injectable()\r\nexport class DatagridFilterService {\r\n    removeField = new EventEmitter<string>();\r\n\r\n    constructor(private dfs: DatagridFacadeService, private localeSer: LocaleService, private inject: Injector) {\r\n    }\r\n\r\n    validateRowData(rowData: any, conditions: { [field: string]: ClientFilterCondition }) {\r\n        if (!conditions || Object.keys(conditions).length === 0) {\r\n            return true;\r\n        }\r\n        return this.checkAllFieldInRowData(rowData, conditions);\r\n    }\r\n\r\n    executeFilter(data: [], conditions: any): any[] {\r\n        if ( this.dfs.getState().enableSmartFilter) {\r\n            return this.executeSmartFilter(data, conditions);\r\n        }\r\n\r\n        if (data && data.length) {\r\n            return data.filter(n => this.validateRowData(n, conditions));\r\n        }\r\n        return data;\r\n    }\r\n\r\n    private getCompareResult(fieldDataValue: any, operator: Compare, targetValue: any) {\r\n        const op = parseInt('' + operator, 10);\r\n        switch (op) {\r\n            case Compare.Equal:\r\n                return fieldDataValue == targetValue;\r\n            case Compare.NotEqual:\r\n                return ('' + fieldDataValue).toLowerCase() !== ('' + targetValue).toLowerCase();\r\n            case Compare.Greater:\r\n                return fieldDataValue > targetValue;\r\n            case Compare.GreaterOrEqual:\r\n                return fieldDataValue >= targetValue;\r\n            case Compare.Less:\r\n                return fieldDataValue < targetValue;\r\n            case Compare.LessOrEqual:\r\n                return fieldDataValue <= targetValue;\r\n            case Compare.Like:\r\n                return ('' + fieldDataValue).toLowerCase().indexOf(targetValue.toLowerCase()) > -1;\r\n            case Compare.NotLike:\r\n                return ('' + fieldDataValue).toLowerCase().indexOf(targetValue.toLowerCase()) === -1;\r\n            case Compare.In:\r\n                targetValue = targetValue || [];\r\n                return targetValue.findIndex( n => n == fieldDataValue) > -1;\r\n            case 1001: // Empty\r\n                return fieldDataValue === '' || fieldDataValue === null;\r\n            case 1002:  // NotEmpty\r\n                return fieldDataValue !== '' && fieldDataValue !== null;\r\n            case 1003: // Null\r\n                return fieldDataValue === null;\r\n            case 1004: // NotNull\r\n                return fieldDataValue !== null;\r\n        }\r\n    }\r\n\r\n    private getRelationResult(result1: boolean, relation: 'and' | 'or', result2: boolean) {\r\n        const _relation = relation.toLowerCase();\r\n        if (_relation === 'and') {\r\n            return result1 && result2;\r\n        } else {\r\n            return result1 || result2;\r\n        }\r\n    }\r\n\r\n    private checkAllFieldResult(resultObj: { [key: string]: boolean }) {\r\n        if (!resultObj) {\r\n            return true;\r\n        }\r\n\r\n        return Object.values(resultObj).reduce((c, n) => {\r\n            return c && n;\r\n        }, true);\r\n    }\r\n\r\n    private checkAllFieldInRowData(rowData: any, conditions: { [field: string]: ClientFilterCondition }) {\r\n        // this.state = conditions;\r\n        let resultObj = null;\r\n        if (conditions) {\r\n            const fields = Object.keys(conditions);\r\n            resultObj = {};\r\n            fields.forEach(field => {\r\n                let fieldValue = Utils.getValue(field, rowData);\r\n                const columnObj = this.dfs.getColumn(field);\r\n                if (columnObj && columnObj.isMultilingualField) {\r\n                    fieldValue = Utils.getMultilingualValue(fieldValue, this.localeSer.localeId);\r\n                }\r\n\r\n                const where = conditions[field];\r\n                const { value1, operator1, relation, operator2, value2 } = where;\r\n                if (where) {\r\n                    const result = this.getCompareResult(fieldValue, operator1, value1);\r\n                    resultObj[field] = result;\r\n                    if (relation) {\r\n                        const result2 = this.getCompareResult(fieldValue, operator2, value2);\r\n                        resultObj[field] = this.getRelationResult(result, relation, result2);\r\n                    }\r\n                }\r\n\r\n            });\r\n        }\r\n\r\n        return this.checkAllFieldResult(resultObj);\r\n    }\r\n\r\n    removeFilterField(field) {\r\n        this.removeField.emit(field);\r\n    }\r\n\r\n    convertFilterCondition2String(conditions: any) {\r\n        if (!conditions) {\r\n            return '';\r\n        }\r\n        let str = '';\r\n        const andText = this.localeSer.getValue('datagrid.filter.and');\r\n        const orText = this.localeSer.getValue('datagrid.filter.or');\r\n        const and = `<span class='badge badge-success'>${andText}</span>`;\r\n        const and2 = `<span class='badge badge-info'>${andText}</span>`;\r\n        const or = `<span class='badge badge-warning'>${orText}</span>`;\r\n        const lbracket = `<b>ã</b>`;\r\n        const rbracket = `<b>ã</b>`;\r\n        const ellipsis = `[ <span class=\"ellipsis\" title=\"$title$\">  $value$<i class=\"f-icon f-icon-lookup\"></i></span> ]`;\r\n\r\n        str = Object.keys(conditions).reduce((c, r) => {\r\n            const filter = conditions[r];\r\n            const col = this.dfs.getColumn(r);\r\n            const t = `<b>${col.title}</b>`;\r\n\r\n            let s = ` ${t} ${this.getCompareString(filter.operator1)} ${Utils.escapeValue(filter.value1)}  `;\r\n            if (filter.operator1 == Compare.In) {\r\n                let txt = filter.value1;\r\n                let txt2 = txt;\r\n                if (col.filter.type === ColumnFilterType.enum) {\r\n                    const enumOpts = DatagridColumnsHelper.getFilterEnumOptions(col);\r\n                    txt = DatagridColumnsHelper.getEnumText(enumOpts, filter.value1);\r\n                    txt2 = txt.split(',').slice(0, 2).join(',');\r\n                } else {\r\n                    txt2 = txt.slice(0, 2).join(',');\r\n                }\r\n\r\n                s = ` ${t} ${this.getCompareString(filter.operator1)} [ ${txt} ]  `;\r\n                if (filter.value1.length > 2) {\r\n                    s = ` ${t} ${this.getCompareString(filter.operator1)} ${ellipsis.replace('$title$', txt).replace('$value$', txt2)}  `;\r\n                }\r\n            } else {\r\n                if (filter.operator1 == Compare.Equal && Array.isArray(filter.value1)) {\r\n                    if (!filter.value1.length) {\r\n                        s = ` ${t} ${this.getCompareString(filter.operator1)} ''  `;\r\n                    }\r\n                }\r\n            }\r\n            if (filter.relation) {\r\n                const s2 = `${t} ${this.getCompareString(filter.operator2)} ${filter.value2}`;\r\n                s = `${lbracket} ${s} ${filter.relation === 'and' ? and2 : or} ${s2} ${rbracket}`;\r\n            }\r\n            return `${c} <span class=\"filter-field filter-column-${r}\"> ${s} AND </span>`;\r\n        }, '');\r\n        const lastANDidx = str.lastIndexOf('AND');\r\n        let resultStr = str.substr(0, lastANDidx);\r\n        resultStr += str.substr(lastANDidx + 3);\r\n        return resultStr.replace(/AND/g, and).replace(/OR/g, or);\r\n    }\r\n\r\n    private getCompareString(operator: Compare) {\r\n        const op = parseInt('' + operator, 10);\r\n        let code = '';\r\n        switch (op) {\r\n            case Compare.Equal:\r\n            case Compare.NotEqual:\r\n            case Compare.Greater:\r\n            case Compare.GreaterOrEqual:\r\n            case Compare.Less:\r\n            case Compare.LessOrEqual:\r\n            case Compare.Like:\r\n            case Compare.NotLike:\r\n            case Compare.In:\r\n                code = Compare[op];\r\n                code = code[0].toLowerCase() + code.substr(1);\r\n                return this.localeSer.getValue('datagrid.filter.operators.' + code);\r\n            case 1001: // Empty\r\n                return ' ' + this.localeSer.getValue('datagrid.filter.operators.empty');\r\n            case 1002:  // NotEmpty\r\n                return ' ' + this.localeSer.getValue('datagrid.filter.operators.notEmpty');\r\n            case 1003: // Null\r\n                return ' ' + this.localeSer.getValue('datagrid.filter.operators.null');\r\n            case 1004: // NotNull\r\n                return ' ' + this.localeSer.getValue('datagrid.filter.operators.notNull');\r\n        }\r\n    }\r\n\r\n\r\n    convert2FilterArray(condition: { [field: string]: any }): FilterCondition[] {\r\n        const filterArr = [];\r\n        if (condition) {\r\n            const fields = Object.keys(condition);\r\n            if (fields && fields.length) {\r\n                fields.forEach(field => {\r\n                    const obj = { filterField: field, value: '', lbracket: '', rbracket: '', relation: 1, compare: 0 };\r\n                    const conditionVal = condition[field];\r\n                    if (typeof conditionVal === 'object') {\r\n                        obj.compare = conditionVal.operator1;\r\n                        obj.value = conditionVal.value1;\r\n                        filterArr.push(obj);\r\n                        if (conditionVal.value2) {\r\n                            obj.lbracket = '(';\r\n                            obj.relation = conditionVal.relation === 'and' ? 1 : 2;\r\n\r\n                            const obj2 = { filterField: field, value: '', lbracket: '', rbracket: ')', relation: 1, compare: 0 };\r\n                            obj2.compare = conditionVal.operator2;\r\n                            obj2.value = conditionVal.value2;\r\n\r\n                            filterArr.push(obj2);\r\n                        } else {\r\n                            if (conditionVal.operator2) {\r\n                                const op2 = parseInt('' + conditionVal.operator2, 10); //  Empty: 1001, NotEmpty: 1002\r\n                                if (op2 === 1001 || op2 === 1002) {\r\n                                    obj.lbracket = '(';\r\n                                    obj.relation = conditionVal.relation === 'and' ? 1 : 2;\r\n\r\n                                    const obj2 = { filterField: field, value: '', lbracket: '', rbracket: ')', relation: 1, compare: 0 };\r\n                                    obj2.compare = op2 === 1001 ? Compare.Equal : Compare.NotEqual;\r\n                                    obj2.value = '';\r\n\r\n                                    filterArr.push(obj2);\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    return obj;\r\n                });\r\n            }\r\n        }\r\n\r\n        if (filterArr.length) {\r\n            this.checkEnumTypeFilters(filterArr);\r\n            filterArr[filterArr.length - 1].relation = 0;\r\n        }\r\n\r\n        return filterArr;\r\n    }\r\n\r\n    private checkEnumTypeFilters(filterArr: FilterCondition[]) {\r\n        const enumFilters:{[key:string]: any[]} = { };\r\n        filterArr.forEach((f, i) => {\r\n            const enumFilterArr = this.convertEnumTypeFilter(f);\r\n            if (enumFilterArr && enumFilterArr.length) {\r\n                enumFilters[f.filterField] = enumFilterArr\r\n            }\r\n        });\r\n\r\n        const keys = Object.keys(enumFilters);\r\n        if (keys.length) {\r\n            keys.forEach((k) => {\r\n                const i = filterArr.findIndex(n => n.filterField === k);\r\n                filterArr.splice(i, 1, ...enumFilters[k]);\r\n            })\r\n        }\r\n\r\n        return filterArr;\r\n    }\r\n\r\n    // å°enum ç±»åçæ¡ä»¶è½¬æ¢å¤ä¸ªæ¡ä»¶\r\n    private convertEnumTypeFilter(filter: FilterCondition) : FilterCondition[] {\r\n        if (filter) {\r\n            const col = this.dfs.getColumn(filter.filterField) as DataColumn;\r\n            if (col && col.filter && col.filter.type ===  ColumnFilterType.enum)  {\r\n                if (Array.isArray(filter.value) && filter.value.length) {\r\n                    if (filter.value.length === 1) {\r\n                        filter.compare = Compare.Equal;\r\n                        filter.value = filter.value[0];\r\n                        return [];\r\n                    } else {\r\n                        // > 1\r\n                        let filterArr = filter.value.map((val: any) => {\r\n                            return {\r\n                                filterField: filter.filterField, \r\n                                value: val, \r\n                                lbracket: '',\r\n                                rbracket: '',\r\n                                relation: 2,  // or\r\n                                compare: 0\r\n                            }\r\n                        });\r\n                        filterArr[0].lbracket = '(';\r\n                        filterArr[filter.value.length -1].rbracket = ')';\r\n                        filterArr[filter.value.length -1].relation = 1;\r\n                        return filterArr;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return [];\r\n    }\r\n\r\n    createColumnFilterOptions(col: DataColumn) {\r\n        let filterTypeOptions: ColumnFilter = {\r\n            type: ColumnFilterType.string,\r\n            enableOperator: true\r\n        };\r\n        if (col.editor) {\r\n            switch (col.editor.type) {\r\n                case 'textarea':\r\n                case 'textbox':\r\n                case 'language-textbox':\r\n                    filterTypeOptions = {\r\n                        type: ColumnFilterType.string,\r\n                        enableOperator: true\r\n                    };\r\n                    break;\r\n                case 'checkbox':\r\n                case 'switch':\r\n                    filterTypeOptions = {\r\n                        type: ColumnFilterType.boolean,\r\n                        enableOperator: false\r\n                    };\r\n                    break;\r\n                case 'numberbox':\r\n                    filterTypeOptions = {\r\n                        type: ColumnFilterType.number,\r\n                        enableOperator: true\r\n                    };\r\n                    break;\r\n                case 'combolist':\r\n                case 'select':\r\n                    filterTypeOptions = {\r\n                        type: ColumnFilterType.enum,\r\n                        enableOperator: true,\r\n                        options: col.editor.options\r\n                    };\r\n                    break;\r\n                case 'datepicker':\r\n                    filterTypeOptions = {\r\n                        type: col['dataType'] === 'datetime' ? ColumnFilterType.datetime : ColumnFilterType.date,\r\n                        enableOperator: true,\r\n                        options: {\r\n                            dateFormat: col.editor.options.dateFormat,\r\n                            returnFormat: col.editor.options.returnFormat\r\n                        }\r\n                    };\r\n                    break;\r\n                case 'timepicker':\r\n                    filterTypeOptions = {\r\n                        type: ColumnFilterType.time,\r\n                        enableOperator: true\r\n                    };\r\n                    break;\r\n\r\n            }\r\n        } else if (col.formatter) {\r\n            if (typeof col.formatter === 'object' && Object.keys(col.formatter).length) {\r\n                const options: any = col.formatter['options'];\r\n                switch (col.formatter['type']) {\r\n                    case 'number':\r\n                        filterTypeOptions = {\r\n                            type: ColumnFilterType.number,\r\n                            enableOperator: true\r\n                        };\r\n                        break;\r\n                    case 'enum':\r\n                        filterTypeOptions = {\r\n                            type: ColumnFilterType.enum,\r\n                            enableOperator: true,\r\n                            options\r\n                        };\r\n                        break;\r\n                    case 'boolean':\r\n                        filterTypeOptions = {\r\n                            type: ColumnFilterType.boolean,\r\n                            enableOperator: false\r\n                        };\r\n                        break;\r\n                    case 'datetime':\r\n                        let tye = ColumnFilterType.datetime;\r\n                        let fmt = 'yyyy-MM-dd';\r\n                        let returnFmt = 'yyyy-MM-dd';\r\n                        if (options && options.format) {\r\n                            fmt = options.format;\r\n                            if (fmt.indexOf('HH:') == -1) {\r\n                                tye = ColumnFilterType.date;\r\n                            } else {\r\n                                returnFmt += ' HH:mm';\r\n                                if (fmt.indexOf('ss') > -1) {\r\n                                    returnFmt += ':ss';\r\n                                }\r\n                            }\r\n                        } else {\r\n                            tye = ColumnFilterType.date;\r\n                        }\r\n                        filterTypeOptions = {\r\n                            type: tye,\r\n                            enableOperator: true\r\n                        };\r\n\r\n                        filterTypeOptions.options = { dateFormat: fmt, returnFormat: returnFmt };\r\n                        break;\r\n                    default:\r\n                        filterTypeOptions = {\r\n                            type: ColumnFilterType.string,\r\n                            enableOperator: true\r\n                        };\r\n                }\r\n            }\r\n        } else {\r\n            filterTypeOptions = {\r\n                type: ColumnFilterType.string,\r\n                enableOperator: true\r\n            };\r\n        }\r\n        return filterTypeOptions;\r\n    }\r\n\r\n    //#region  Smart Filter\r\n\r\n    convertSmartFilter2EntityFilter(conditions: any[]) {\r\n        if (conditions && conditions.length) {\r\n            return conditions.map(n => {\r\n                return n;\r\n            });\r\n        }\r\n\r\n        return [];\r\n    }\r\n\r\n    private validateRowData2(rowData: any, conditions: any) {\r\n        if (!conditions || conditions.length === 0) {\r\n            return true;\r\n        }\r\n        return this.checkRowDataWithCondition(rowData, conditions);\r\n    }\r\n\r\n    private checkRowDataWithCondition(rowData: any, conditions) {\r\n        let resultObj = null;\r\n        if (conditions) {\r\n            resultObj = {};\r\n            conditions.forEach(condition => {\r\n                const field = condition.FilterField;\r\n                let fieldValue = Utils.getValue(field, rowData);\r\n                const columnObj = this.dfs.getColumn(field);\r\n                if (columnObj && columnObj.isMultilingualField) {\r\n                    fieldValue = Utils.getMultilingualValue(fieldValue, this.localeSer.localeId);\r\n                }\r\n\r\n                const where = condition;\r\n                const { Value, Relation, Compare: operator1 } = where;\r\n                if (where) {\r\n                    const r = this.getCompareResult(fieldValue, operator1, Value);\r\n                    if (resultObj[field] === undefined) {\r\n                        resultObj[field] = [ r ];\r\n                    } else {\r\n                        resultObj[field].push(r);\r\n                    }\r\n                }\r\n\r\n            });\r\n        }\r\n\r\n        // return this.checkAllFieldResult(resultObj);\r\n        const fields = Object.keys(resultObj);\r\n        const result = [];\r\n        fields.forEach( (f) => {\r\n            const _filters = conditions.filter(n => n.FilterField === f);\r\n            if (resultObj[f].length === 1) {\r\n                result.push(resultObj[f][0]);\r\n            } else {\r\n                if (_filters[0].Relation === 1 && resultObj[f].length === 2) {  // and\r\n                    result.push(resultObj[f][0] && resultObj[f][1]);\r\n                } else {  // or\r\n                    result.push(resultObj[f].indexOf(true) > -1);\r\n                }\r\n            }\r\n        });\r\n\r\n        return result.indexOf(false) === -1;\r\n    }\r\n\r\n    executeSmartFilter(data: [], conditions: any[]) {\r\n        if (data && data.length) {\r\n            return data.filter(n => this.validateRowData2(n, conditions));\r\n        }\r\n        return data;\r\n    }\r\n\r\n    //#endregion\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\n/**\r\n * @deprecated åé¨åç»ä»¶å·²åºå¼ï¼åé¡µç»ä»¶ä½¿ç¨farris-ui ä¸­çå¬å±ç»ä»¶\r\n */\r\n@NgModule({\r\n    declarations: [],\r\n    imports: [ CommonModule ],\r\n    exports: [],\r\n    providers: [\r\n    ],\r\n})\r\nexport class NgxPaginationModule {}\r\n","\r\nexport class PaginationService {}\r\n","import { InjectionToken } from '@angular/core';\r\n\r\nexport const SCROLLBAR_CONFIG = new InjectionToken(\r\n    'PERFECT_SCROLLBAR_CONFIG'\r\n);\r\n\r\nexport class Geometry {\r\n    public x: number;\r\n    public y: number;\r\n\r\n    public w: number;\r\n    public h: number;\r\n\r\n    constructor(x: number, y: number, w: number, h: number) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.w = w;\r\n        this.h = h;\r\n    }\r\n}\r\n\r\nexport class Position {\r\n    public x: number | 'start' | 'end';\r\n    public y: number | 'start' | 'end';\r\n\r\n    constructor(x: number | 'start' | 'end', y: number | 'start' | 'end') {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n}\r\n\r\nexport type ScrollbarEvent =\r\n    | 'psScrollY'\r\n    | 'psScrollX'\r\n    | 'psScrollUp'\r\n    | 'psScrollDown'\r\n    | 'psScrollLeft'\r\n    | 'psScrollRight'\r\n    | 'psYReachEnd'\r\n    | 'psYReachStart'\r\n    | 'psXReachEnd'\r\n    | 'psXReachStart';\r\n\r\nexport const ScrollbarEvents: ScrollbarEvent[] = [\r\n    'psScrollY',\r\n    'psScrollX',\r\n\r\n    'psScrollUp',\r\n    'psScrollDown',\r\n    'psScrollLeft',\r\n    'psScrollRight',\r\n\r\n    'psYReachEnd',\r\n    'psYReachStart',\r\n    'psXReachEnd',\r\n    'psXReachStart'\r\n];\r\n\r\nexport interface ScrollbarConfigInterface {\r\n    handlers?: string[];\r\n\r\n    wheelSpeed?: number;\r\n    swipeEasing?: boolean;\r\n\r\n    suppressScrollX?: boolean;\r\n    suppressScrollY?: boolean;\r\n\r\n    wheelPropagation?: boolean;\r\n    useBothWheelAxes?: boolean;\r\n\r\n    scrollingThreshold?: number;\r\n\r\n    minScrollbarLength?: number;\r\n    maxScrollbarLength?: number;\r\n\r\n    scrollXMarginOffset?: number;\r\n    scrollYMarginOffset?: number;\r\n}\r\n\r\nexport class ScrollbarConfig implements ScrollbarConfigInterface {\r\n    public handlers?: string[];\r\n\r\n    public wheelSpeed?: number;\r\n    public swipeEasing?: boolean;\r\n\r\n    public suppressScrollX?: boolean;\r\n    public suppressScrollY?: boolean;\r\n\r\n    public wheelPropagation?: boolean;\r\n    public useBothWheelAxes?: boolean;\r\n\r\n    public scrollingThreshold?: number;\r\n\r\n    public minScrollbarLength?: number;\r\n    public maxScrollbarLength?: number;\r\n\r\n    public scrollXMarginOffset?: number;\r\n    public scrollYMarginOffset?: number;\r\n\r\n    constructor(config: ScrollbarConfigInterface = {}) {\r\n        this.assign(config);\r\n    }\r\n\r\n    public assign(config: ScrollbarConfigInterface = {}) {\r\n        for (const key in config) {\r\n            this[key as keyof ScrollbarConfig] = config[key as keyof ScrollbarConfigInterface];\r\n        }\r\n    }\r\n}\r\n","import { AfterViewInit } from '@angular/core';\r\n/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @Date: 2019-07-29 08:14:22\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-10-10 15:11:09\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\nimport { PLATFORM_ID } from '@angular/core';\r\nimport { isPlatformBrowser } from '@angular/common';\r\n\r\nimport PerfectScrollbar from 'perfect-scrollbar';\r\n\r\nimport ResizeObserver from 'resize-observer-polyfill';\r\n\r\nimport { Subject, fromEvent, Observable, interval } from 'rxjs';\r\nimport { auditTime, takeUntil, debounceTime, throttle } from 'rxjs/operators';\r\n\r\nimport {\r\n    NgZone, Inject, Optional, ElementRef, Directive,\r\n    OnInit, DoCheck, OnChanges, OnDestroy, Input, Output, EventEmitter,\r\n    SimpleChanges, KeyValueDiffer, KeyValueDiffers\r\n} from '@angular/core';\r\n\r\nimport { Geometry, Position } from './scrollbar.interfaces';\r\n\r\nimport {\r\n    SCROLLBAR_CONFIG, ScrollbarConfig, ScrollbarConfigInterface,\r\n    ScrollbarEvent, ScrollbarEvents\r\n} from './scrollbar.interfaces';\r\n\r\n@Directive({\r\n    selector: '[scrollbar]',\r\n    exportAs: 'ngxScrollbar'\r\n})\r\nexport class ScrollbarDirective implements OnInit, OnDestroy, DoCheck, OnChanges, AfterViewInit {\r\n    instance: PerfectScrollbar | null = null;\r\n\r\n    private ro: ResizeObserver | null = null;\r\n\r\n    private timeout: number | null = null;\r\n    private animation: number | null = null;\r\n\r\n    private configDiff: KeyValueDiffer<string, any> | null = null;\r\n\r\n    private readonly ngDestroy: Subject<void> = new Subject();\r\n\r\n    @Input() disabled = false;\r\n\r\n    @Input('scrollbar') config?: ScrollbarConfigInterface;\r\n\r\n    @Output() psScrollY: EventEmitter<any> = new EventEmitter<any>();\r\n    @Output() psScrollX: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n    @Output() psScrollUp: EventEmitter<any> = new EventEmitter<any>();\r\n    @Output() psScrollDown: EventEmitter<any> = new EventEmitter<any>();\r\n    @Output() psScrollLeft: EventEmitter<any> = new EventEmitter<any>();\r\n    @Output() psScrollRight: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n    @Output() psYReachEnd: EventEmitter<any> = new EventEmitter<any>();\r\n    @Output() psYReachStart: EventEmitter<any> = new EventEmitter<any>();\r\n    @Output() psXReachEnd: EventEmitter<any> = new EventEmitter<any>();\r\n    @Output() psXReachStart: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n    constructor(private zone: NgZone, private differs: KeyValueDiffers,\r\n                public elementRef: ElementRef, @Inject(PLATFORM_ID) private platformId: any,\r\n                @Optional() @Inject(SCROLLBAR_CONFIG) private defaults: ScrollbarConfigInterface) { }\r\n\r\n    ngOnInit(): void {\r\n        if (!this.disabled && isPlatformBrowser(this.platformId)) {\r\n            const config = new ScrollbarConfig(this.defaults);\r\n\r\n            config.assign(this.config); // Custom configuration\r\n\r\n            this.zone.runOutsideAngular(() => {\r\n                setTimeout(() => {\r\n                    this.instance = new PerfectScrollbar(this.elementRef.nativeElement, config);\r\n                });\r\n            });\r\n\r\n            if (!this.configDiff) {\r\n                this.configDiff = this.differs.find(this.config || {}).create();\r\n\r\n                this.configDiff.diff(this.config || {});\r\n            }\r\n\r\n            this.zone.runOutsideAngular(() => {\r\n                this.ro = new ResizeObserver(() => {\r\n                    this.update();\r\n                });\r\n\r\n                if (this.elementRef.nativeElement.children[0]) {\r\n                    this.ro.observe(this.elementRef.nativeElement.children[0]);\r\n                }\r\n\r\n                this.ro.observe(this.elementRef.nativeElement);\r\n            });\r\n\r\n            this.zone.runOutsideAngular(() => {\r\n                ScrollbarEvents.forEach((eventName: ScrollbarEvent) => {\r\n                    const eventType = eventName.replace(/([A-Z])/g, (c) => `-${c.toLowerCase()}`);\r\n\r\n                    if (eventName.indexOf('X') > -1 || eventName.indexOf('Left') > -1 || eventName.indexOf('Right') > -1) {\r\n                        fromEvent<Event>(this.elementRef.nativeElement, eventType).subscribe((event: Event) => {\r\n                            this[eventName].emit(event);\r\n                        });\r\n                    } else {\r\n                        fromEvent<Event>(this.elementRef.nativeElement, eventType).pipe(\r\n                            takeUntil(this.ngDestroy)\r\n                        ).pipe(\r\n                            // debounceTime(20),\r\n                            // throttle(ev => interval(20)),\r\n                            auditTime(20),  // auditTime éé»æå®çæ¶é´ï¼å¨æ­¤æ¶é´åå¿½ç¥ææååºçå¼ï¼æ¶é´è¿åï¼ååºææ°çå¼\r\n                        )\r\n                        .subscribe((event: Event) => {\r\n                            this[eventName].emit(event);\r\n                        });\r\n                    }\r\n                });\r\n            });\r\n        }\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        // this.zone.runOutsideAngular(() => {\r\n        //     this.instance = new PerfectScrollbar(this.elementRef.nativeElement, this.config);\r\n        // });\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        if (isPlatformBrowser(this.platformId)) {\r\n            this.ngDestroy.next();\r\n            this.ngDestroy.complete();\r\n\r\n            if (this.ro) {\r\n                this.ro.disconnect();\r\n            }\r\n\r\n            if (this.timeout && typeof window !== 'undefined') {\r\n                window.clearTimeout(this.timeout);\r\n            }\r\n\r\n            this.zone.runOutsideAngular(() => {\r\n                if (this.instance) {\r\n                    this.instance.destroy();\r\n                }\r\n            });\r\n\r\n            this.instance = null;\r\n        }\r\n    }\r\n\r\n    ngDoCheck(): void {\r\n        if (!this.disabled && this.configDiff && isPlatformBrowser(this.platformId)) {\r\n            const changes = this.configDiff.diff(this.config || {});\r\n\r\n            if (changes) {\r\n                this.ngOnDestroy();\r\n\r\n                this.ngOnInit();\r\n            }\r\n        }\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        if (changes['disabled'] && !changes['disabled'].isFirstChange() && isPlatformBrowser(this.platformId)) {\r\n            if (changes['disabled'].currentValue !== changes['disabled'].previousValue) {\r\n                if (changes['disabled'].currentValue === true) {\r\n                    this.ngOnDestroy();\r\n                } else if (changes['disabled'].currentValue === false) {\r\n                    this.ngOnInit();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    public ps(): PerfectScrollbar | null {\r\n        return this.instance;\r\n    }\r\n\r\n    public update(): void {\r\n        if (typeof window !== 'undefined') {\r\n            if (this.timeout) {\r\n                window.clearTimeout(this.timeout);\r\n            }\r\n\r\n            this.timeout = window.setTimeout(() => {\r\n                if (!this.disabled && this.configDiff) {\r\n                    try {\r\n                        this.zone.runOutsideAngular(() => {\r\n                            if (this.instance) {\r\n                                this.instance.update();\r\n                            }\r\n                        });\r\n                    } catch (error) {\r\n                        // Update can be finished after destroy so catch errors\r\n                    }\r\n                }\r\n            }, 0);\r\n        }\r\n    }\r\n\r\n    public geometry(prefix: string = 'scroll'): Geometry {\r\n        return new Geometry(\r\n            this.elementRef.nativeElement[prefix + 'Left'],\r\n            this.elementRef.nativeElement[prefix + 'Top'],\r\n            this.elementRef.nativeElement[prefix + 'Width'],\r\n            this.elementRef.nativeElement[prefix + 'Height']\r\n        );\r\n    }\r\n\r\n    public position(absolute: boolean = false): Position {\r\n        if (!absolute && this.instance) {\r\n            return new Position(\r\n                this.instance.reach.x || 0,\r\n                this.instance.reach.y || 0\r\n            );\r\n        } else {\r\n            return new Position(\r\n                this.elementRef.nativeElement.scrollLeft,\r\n                this.elementRef.nativeElement.scrollTop\r\n            );\r\n        }\r\n    }\r\n\r\n    public scrollable(direction: string = 'any'): boolean {\r\n        const element = this.elementRef.nativeElement;\r\n\r\n        if (direction === 'any') {\r\n            return element.classList.contains('ps--active-x') ||\r\n                element.classList.contains('ps--active-y');\r\n        } else if (direction === 'both') {\r\n            return element.classList.contains('ps--active-x') &&\r\n                element.classList.contains('ps--active-y');\r\n        } else {\r\n            return element.classList.contains('ps--active-' + direction);\r\n        }\r\n    }\r\n\r\n    public scrollTo(x: number, y?: number, speed?: number): void {\r\n        if (!this.disabled) {\r\n            if (y == null && speed == null) {\r\n                this.animateScrolling('scrollTop', x, speed);\r\n            } else {\r\n                if (x != null) {\r\n                    this.animateScrolling('scrollLeft', x, speed);\r\n                }\r\n\r\n                if (y != null) {\r\n                    this.animateScrolling('scrollTop', y, speed);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    public scrollToX(x: number, speed?: number): void {\r\n        this.animateScrolling('scrollLeft', x, speed);\r\n    }\r\n\r\n    public scrollToY(y: number, speed?: number): void {\r\n        this.animateScrolling('scrollTop', y, speed);\r\n    }\r\n\r\n    public scrollToTop(offset?: number, speed?: number): void {\r\n        this.animateScrolling('scrollTop', (offset || 0), speed);\r\n    }\r\n\r\n    public scrollToLeft(offset?: number, speed?: number): void {\r\n        this.animateScrolling('scrollLeft', (offset || 0), speed);\r\n    }\r\n\r\n    public scrollToRight(offset?: number, speed?: number): void {\r\n        const left = this.elementRef.nativeElement.scrollWidth -\r\n            this.elementRef.nativeElement.clientWidth;\r\n\r\n        this.animateScrolling('scrollLeft', left - (offset || 0), speed);\r\n    }\r\n\r\n    public scrollToBottom(offset?: number, speed?: number): void {\r\n        const top = this.elementRef.nativeElement.scrollHeight -\r\n            this.elementRef.nativeElement.clientHeight;\r\n\r\n        this.animateScrolling('scrollTop', top - (offset || 0), speed);\r\n    }\r\n\r\n    public scrollToElement(qs: string, offset?: number, speed?: number): void {\r\n        const element = this.elementRef.nativeElement.querySelector(qs);\r\n\r\n        if (element) {\r\n            const elementPos = element.getBoundingClientRect();\r\n\r\n            const scrollerPos = this.elementRef.nativeElement.getBoundingClientRect();\r\n\r\n            if (this.elementRef.nativeElement.classList.contains('ps--active-x')) {\r\n                const currentPos = this.elementRef.nativeElement['scrollLeft'];\r\n\r\n                const position = elementPos.left - scrollerPos.left + currentPos;\r\n\r\n                this.animateScrolling('scrollLeft', position + (offset || 0), speed);\r\n            }\r\n\r\n            if (this.elementRef.nativeElement.classList.contains('ps--active-y')) {\r\n                const currentPos = this.elementRef.nativeElement['scrollTop'];\r\n\r\n                const position = elementPos.top - scrollerPos.top + currentPos;\r\n\r\n                this.animateScrolling('scrollTop', position + (offset || 0), speed);\r\n            }\r\n        }\r\n    }\r\n\r\n    private animateScrolling(target: string, value: number, speed?: number): void {\r\n        if (this.animation) {\r\n            window.cancelAnimationFrame(this.animation);\r\n\r\n            this.animation = null;\r\n        }\r\n\r\n        if (!speed || typeof window === 'undefined') {\r\n            this.elementRef.nativeElement[target] = value;\r\n        } else if (value !== this.elementRef.nativeElement[target]) {\r\n            let newValue = 0;\r\n            let scrollCount = 0;\r\n\r\n            let oldTimestamp = performance.now();\r\n            let oldValue = this.elementRef.nativeElement[target];\r\n\r\n            const cosParameter = (oldValue - value) / 2;\r\n\r\n            const step = (newTimestamp: number) => {\r\n                scrollCount += Math.PI / (speed / (newTimestamp - oldTimestamp));\r\n\r\n                newValue = Math.round(value + cosParameter + cosParameter * Math.cos(scrollCount));\r\n\r\n                // Only continue animation if scroll position has not changed\r\n                if (this.elementRef.nativeElement[target] === oldValue) {\r\n                    if (scrollCount >= Math.PI) {\r\n                        this.animateScrolling(target, value, 0);\r\n                    } else {\r\n                        this.elementRef.nativeElement[target] = newValue;\r\n\r\n                        // On a zoomed out page the resulting offset may differ\r\n                        oldValue = this.elementRef.nativeElement[target];\r\n\r\n                        oldTimestamp = newTimestamp;\r\n\r\n                        this.animation = window.requestAnimationFrame(step);\r\n                    }\r\n                }\r\n            };\r\n\r\n            window.requestAnimationFrame(step);\r\n        }\r\n    }\r\n}\r\n","import { Subject, merge, fromEvent } from 'rxjs';\r\nimport { mapTo, takeUntil, distinctUntilChanged } from 'rxjs/operators';\r\n\r\nimport { PLATFORM_ID } from '@angular/core';\r\nimport { isPlatformBrowser } from '@angular/common';\r\nimport {\r\n    NgZone, Inject, Component,\r\n    OnInit, OnDestroy, DoCheck, Input, Output, EventEmitter, HostBinding,\r\n    ViewChild, ViewEncapsulation, ChangeDetectorRef\r\n} from '@angular/core';\r\n\r\nimport { ScrollbarDirective } from './scrollbar.directive';\r\n\r\nimport {\r\n    ScrollbarEvent, ScrollbarEvents,\r\n    ScrollbarConfigInterface\r\n} from './scrollbar.interfaces';\r\n\r\n// styleUrls: [\r\n//     './scrollbar.component.css'\r\n// ],\r\n\r\n@Component({\r\n    selector: 'scrollbar',\r\n    exportAs: 'ngxScrollbar',\r\n    templateUrl: './scrollbar.component.html',\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\nexport class ScrollbarComponent implements OnInit, OnDestroy, DoCheck {\r\n    public states: any = {};\r\n\r\n    public indicatorX = false;\r\n    public indicatorY = false;\r\n\r\n    public interaction = false;\r\n\r\n    private scrollPositionX = 0;\r\n    private scrollPositionY = 0;\r\n\r\n    private scrollDirectionX = 0;\r\n    private scrollDirectionY = 0;\r\n\r\n    private usePropagationX = false;\r\n    private usePropagationY = false;\r\n\r\n    private allowPropagationX = false;\r\n    private allowPropagationY = false;\r\n\r\n    private stateTimeout: number | null = null;\r\n\r\n    private readonly ngDestroy: Subject<void> = new Subject();\r\n\r\n    private readonly stateUpdate: Subject<string> = new Subject();\r\n\r\n    @Input() disabled = false;\r\n\r\n    @Input() usePSClass = true;\r\n\r\n    @HostBinding('class.ps-show-limits')\r\n    @Input() autoPropagation = false;\r\n\r\n    @HostBinding('class.ps-show-active')\r\n    @Input() scrollIndicators = false;\r\n\r\n    @Input() config?: ScrollbarConfigInterface;\r\n\r\n    @Output() psScrollY: EventEmitter<any> = new EventEmitter<any>();\r\n    @Output() psScrollX: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n    @Output() psScrollUp: EventEmitter<any> = new EventEmitter<any>();\r\n    @Output() psScrollDown: EventEmitter<any> = new EventEmitter<any>();\r\n    @Output() psScrollLeft: EventEmitter<any> = new EventEmitter<any>();\r\n    @Output() psScrollRight: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n    @Output() psYReachEnd: EventEmitter<any> = new EventEmitter<any>();\r\n    @Output() psYReachStart: EventEmitter<any> = new EventEmitter<any>();\r\n    @Output() psXReachEnd: EventEmitter<any> = new EventEmitter<any>();\r\n    @Output() psXReachStart: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n    @ViewChild(ScrollbarDirective) directiveRef?: ScrollbarDirective;\r\n\r\n    constructor(private zone: NgZone, private cdRef: ChangeDetectorRef,\r\n                @Inject(PLATFORM_ID) private platformId: any) { }\r\n\r\n    ngOnInit(): void {\r\n        if (isPlatformBrowser(this.platformId)) {\r\n            this.stateUpdate\r\n                .pipe( takeUntil(this.ngDestroy))\r\n                .pipe(\r\n                    distinctUntilChanged((a, b) => (a === b && !this.stateTimeout))\r\n                )\r\n                .subscribe((state: string) => {\r\n                    if (this.stateTimeout && typeof window !== 'undefined') {\r\n                        window.clearTimeout(this.stateTimeout);\r\n\r\n                        this.stateTimeout = null;\r\n                    }\r\n\r\n                    if (state === 'x' || state === 'y') {\r\n                        this.interaction = false;\r\n\r\n                        if (state === 'x') {\r\n                            this.indicatorX = false;\r\n\r\n                            this.states.left = false;\r\n                            this.states.right = false;\r\n\r\n                            if (this.autoPropagation && this.usePropagationX) {\r\n                                this.allowPropagationX = false;\r\n                            }\r\n                        } else if (state === 'y') {\r\n                            this.indicatorY = false;\r\n\r\n                            this.states.top = false;\r\n                            this.states.bottom = false;\r\n\r\n                            if (this.autoPropagation && this.usePropagationY) {\r\n                                this.allowPropagationY = false;\r\n                            }\r\n                        }\r\n                    } else {\r\n                        if (state === 'left' || state === 'right') {\r\n                            this.states.left = false;\r\n                            this.states.right = false;\r\n\r\n                            this.states[state] = true;\r\n\r\n                            if (this.autoPropagation && this.usePropagationX) {\r\n                                this.indicatorX = true;\r\n                            }\r\n                        } else if (state === 'top' || state === 'bottom') {\r\n                            this.states.top = false;\r\n                            this.states.bottom = false;\r\n\r\n                            this.states[state] = true;\r\n\r\n                            if (this.autoPropagation && this.usePropagationY) {\r\n                                this.indicatorY = true;\r\n                            }\r\n                        }\r\n\r\n                        if (this.autoPropagation && typeof window !== 'undefined') {\r\n                            this.stateTimeout = window.setTimeout(() => {\r\n                                this.indicatorX = false;\r\n                                this.indicatorY = false;\r\n\r\n                                this.stateTimeout = null;\r\n\r\n                                if (this.interaction && (this.states.left || this.states.right)) {\r\n                                    this.allowPropagationX = true;\r\n                                }\r\n\r\n                                if (this.interaction && (this.states.top || this.states.bottom)) {\r\n                                    this.allowPropagationY = true;\r\n                                }\r\n\r\n                                this.cdRef.markForCheck();\r\n                            }, 500);\r\n                        }\r\n                    }\r\n\r\n                    this.cdRef.markForCheck();\r\n                    this.cdRef.detectChanges();\r\n                });\r\n\r\n            this.zone.runOutsideAngular(() => {\r\n                if (this.directiveRef) {\r\n                    const element = this.directiveRef.elementRef.nativeElement;\r\n\r\n                    fromEvent<WheelEvent>(element, 'wheel')\r\n                        .pipe(\r\n                            takeUntil(this.ngDestroy)\r\n                        )\r\n                        .subscribe((event: WheelEvent) => {\r\n                            if (!this.disabled && this.autoPropagation) {\r\n                                const scrollDeltaX = event.deltaX;\r\n                                const scrollDeltaY = event.deltaY;\r\n\r\n                                this.checkPropagation(event, scrollDeltaX, scrollDeltaY);\r\n                            }\r\n                        });\r\n\r\n                    fromEvent<TouchEvent>(element, 'touchmove')\r\n                        .pipe(\r\n                            takeUntil(this.ngDestroy)\r\n                        )\r\n                        .subscribe((event: TouchEvent) => {\r\n                            if (!this.disabled && this.autoPropagation) {\r\n                                const scrollPositionX = event.touches[0].clientX;\r\n                                const scrollPositionY = event.touches[0].clientY;\r\n\r\n                                const scrollDeltaX = scrollPositionX - this.scrollPositionX;\r\n                                const scrollDeltaY = scrollPositionY - this.scrollPositionY;\r\n\r\n                                this.checkPropagation(event, scrollDeltaX, scrollDeltaY);\r\n\r\n                                this.scrollPositionX = scrollPositionX;\r\n                                this.scrollPositionY = scrollPositionY;\r\n                            }\r\n                        });\r\n\r\n                    merge(\r\n                        fromEvent(element, 'ps-scroll-x')\r\n                            .pipe(mapTo('x')),\r\n                        fromEvent(element, 'ps-scroll-y')\r\n                            .pipe(mapTo('y')),\r\n                        fromEvent(element, 'ps-x-reach-end')\r\n                            .pipe(mapTo('right')),\r\n                        fromEvent(element, 'ps-y-reach-end')\r\n                            .pipe(mapTo('bottom')),\r\n                        fromEvent(element, 'ps-x-reach-start')\r\n                            .pipe(mapTo('left')),\r\n                        fromEvent(element, 'ps-y-reach-start')\r\n                            .pipe(mapTo('top')),\r\n                    )\r\n                        .pipe(\r\n                            takeUntil(this.ngDestroy)\r\n                        )\r\n                        .subscribe((state: string) => {\r\n                            if (!this.disabled && (this.autoPropagation || this.scrollIndicators)) {\r\n                                this.stateUpdate.next(state);\r\n                            }\r\n                        });\r\n                }\r\n            });\r\n\r\n            window.setTimeout(() => {\r\n                ScrollbarEvents.forEach((eventName: ScrollbarEvent) => {\r\n                    if (this.directiveRef) {\r\n                        this.directiveRef[eventName] = this[eventName];\r\n                    }\r\n                });\r\n            }, 0);\r\n        }\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        if (isPlatformBrowser(this.platformId)) {\r\n            this.ngDestroy.next();\r\n            this.ngDestroy.unsubscribe();\r\n\r\n            if (this.stateTimeout && typeof window !== 'undefined') {\r\n                window.clearTimeout(this.stateTimeout);\r\n            }\r\n        }\r\n    }\r\n\r\n    ngDoCheck(): void {\r\n        if (isPlatformBrowser(this.platformId)) {\r\n            if (!this.disabled && this.autoPropagation && this.directiveRef) {\r\n                const element = this.directiveRef.elementRef.nativeElement;\r\n\r\n                this.usePropagationX = element.classList.contains('ps--active-x');\r\n\r\n                this.usePropagationY = element.classList.contains('ps--active-y');\r\n            }\r\n        }\r\n    }\r\n\r\n    private checkPropagation(event: any, deltaX: number, deltaY: number): void {\r\n        this.interaction = true;\r\n\r\n        const scrollDirectionX = (deltaX < 0) ? -1 : 1;\r\n        const scrollDirectionY = (deltaY < 0) ? -1 : 1;\r\n\r\n        if ((this.usePropagationX && this.usePropagationY) ||\r\n            (this.usePropagationX && (!this.allowPropagationX ||\r\n                (this.scrollDirectionX !== scrollDirectionX))) ||\r\n            (this.usePropagationY && (!this.allowPropagationY ||\r\n                (this.scrollDirectionY !== scrollDirectionY)))) {\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n        }\r\n\r\n        if (!!deltaX) {\r\n            this.scrollDirectionX = scrollDirectionX;\r\n        }\r\n\r\n        if (!!deltaY) {\r\n            this.scrollDirectionY = scrollDirectionY;\r\n        }\r\n\r\n        this.stateUpdate.next('interaction');\r\n\r\n        this.cdRef.detectChanges();\r\n    }\r\n}\r\n","import { Component, EventEmitter, Input, OnChanges, OnInit, Output, SimpleChanges, ViewEncapsulation } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'scrollbar-arrows',\r\n    styleUrls: [\r\n        './scrollbar-arrows.css'\r\n    ],\r\n    templateUrl: './scrollbar-arrows.component.html',\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\n\r\nexport class ScrollbarArrowsComponent implements OnInit, OnChanges {\r\n\r\n    @Input() reachX: 'start'|'end' = 'start';\r\n    @Input() reachY: 'start'|'end' = 'start';\r\n\r\n\r\n    @Input() scrollbarXActive = false;\r\n    @Input() scrollbarYActive = false;\r\n\r\n    @Output() hasXScrollbar = new EventEmitter();\r\n    @Output() hasYScrollbar = new EventEmitter();\r\n\r\n    @Output() scrollMoveTo = new EventEmitter();\r\n\r\n    constructor() { }\r\n\r\n    ngOnInit() { }\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        if (changes.scrollbarYActive && !changes.scrollbarYActive.isFirstChange()) {\r\n            this.hasYScrollbar.emit(this.scrollbarYActive);\r\n        }\r\n    }\r\n\r\n\r\n    scrollTo($event: MouseEvent, dir: 'left'|'right'|'top'|'bottom') {\r\n        $event.stopPropagation();\r\n        this.scrollMoveTo.emit({ dir, event: $event });\r\n    }\r\n\r\n}","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { ScrollbarComponent } from './scrollbar.component';\r\nimport { ScrollbarDirective } from './scrollbar.directive';\r\nimport { ScrollbarArrowsComponent } from './arrow/scrollbar-arrows.component';\r\n\r\n@NgModule({\r\n    imports: [CommonModule],\r\n    declarations: [\r\n        ScrollbarComponent, ScrollbarDirective,\r\n        ScrollbarArrowsComponent,\r\n    ],\r\n    exports: [\r\n        CommonModule, ScrollbarComponent, ScrollbarDirective,\r\n        ScrollbarArrowsComponent,\r\n    ]\r\n})\r\nexport class ScrollbarModule {\r\n}\r\n","import { Directive, TemplateRef } from '@angular/core';\r\n\r\n@Directive({\r\n    selector: '[grid-cell-editor]',\r\n})\r\nexport class DatagridCellEditorDirective {\r\n    constructor(public template: TemplateRef<any>) {}\r\n}\r\n","import { OnInit, Directive, Input, ContentChild, AfterContentInit } from '@angular/core';\r\nimport { DatagridCellEditorDirective } from './column-cell-edit.directive';\r\n\r\n@Directive({\r\n    selector: 'farris-grid-column',\r\n})\r\nexport class DatagridColumnDirective implements OnInit, AfterContentInit {\r\n\r\n    @Input() field: string;\r\n    @Input() title: string;\r\n    @Input() width: number;\r\n    @Input() halign: 'left' | 'center' |'right' = 'left';\r\n    @Input() align: 'left' | 'center' |'right' = 'left';\r\n    @Input() formatter: (value, rowData, rowIndex) => any;\r\n    @Input() readonly = true;\r\n    @Input() editable = false;\r\n\r\n    @ContentChild(DatagridCellEditorDirective) editor: any;\r\n\r\n    constructor() { }\r\n\r\n    ngOnInit(): void { }\r\n\r\n    ngAfterContentInit() {\r\n    }\r\n}\r\n","import { Subject } from 'rxjs';\r\nimport { Component, EventEmitter, Input, OnInit, Output, ElementRef, Renderer2, Injector, OnChanges, SimpleChanges, ViewChild, Optional, OnDestroy } from '@angular/core';\r\nimport { DatagridComponent } from '../../datagrid.component';\r\nimport { takeUntil } from 'rxjs/operators';\r\n\r\n@Component({\r\n    selector: 'smart-filter-toolbar',\r\n    templateUrl: './smart-filter-toolbar.component.html',\r\n})\r\nexport class SmartFilterToolbarComponent implements OnInit, OnChanges, OnDestroy {\r\n    @Input() padding = '';\r\n    @Input() height = 40;\r\n    @Input() filterData = [];\r\n    @Output() clearFilters = new EventEmitter();\r\n    @Output() removeFilter = new EventEmitter();\r\n    @Output() filterChange = new EventEmitter();\r\n\r\n    @Output() resize = new EventEmitter();\r\n\r\n    @ViewChild('farrisFilter') filtebar: any;\r\n    sk = '';\r\n    dg: DatagridComponent;\r\n    destory$ = new Subject();\r\n    constructor(private el: ElementRef, private render: Renderer2, private inject: Injector) { }\r\n\r\n    ngOnInit(): void {\r\n        this.dg = this.inject.get<DatagridComponent>(DatagridComponent);\r\n        this.sk =  'smartfilter_' + this.dg.dgs.createConfigKey(this.dg.id);\r\n\r\n\r\n        this.dg.dgs.clearFilter.pipe(takeUntil(this.destory$)).subscribe(() => {\r\n            this.clearFilters.emit(null);\r\n        });\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this.destory$.next();\r\n        this.destory$.complete();\r\n    }\r\n\r\n    /** æ¡ä»¶ååäºä»¶ */\r\n    onQuery($event) {\r\n        const { data, filterItem } = $event;\r\n        if (data && data.length) {\r\n            const conditions = JSON.parse(data);\r\n            if (conditions && conditions.length)  {\r\n                this.filterChange.emit({conditions, filterItem});\r\n            }\r\n        }\r\n    }\r\n\r\n    /** æ¸é¤æææ¡ä»¶ */\r\n    onResetFilter($event) {\r\n        this.clearFilters.emit($event);\r\n    }\r\n\r\n    /** ç§»é¤åä¸ªæ¡ä»¶ */\r\n    onRemoveFilter($event) {\r\n        this.removeFilter.emit($event);\r\n    }\r\n\r\n    /** å±å¼æå äºä»¶ */\r\n    onResize($event) {\r\n        setTimeout(() => {\r\n            const smartFilterWrapper = this.el.nativeElement.querySelector('.f-filter-wrapper');\r\n            if (smartFilterWrapper) {\r\n                const h = smartFilterWrapper.offsetHeight;\r\n                if (h) {\r\n                    this.resize.emit(h + 6);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n}\r\n","export function TextFilterControl(col: any) {\r\n    return {\r\n        controltype: 'text'\r\n    };\r\n}\r\n\r\nexport function BooleanFilterControl(col: any) {\r\n    return {\r\n        controltype: 'bool-check',\r\n        // enumValues: [\r\n        //     {value: true, name: 'true'},\r\n        //     {value: false, name: 'false'}\r\n        // ]\r\n    };\r\n}\r\n\r\nexport function EnumFilterControl(col: any, enumopts: any) {\r\n    const valueField = enumopts.valueField || enumopts.idField;\r\n    const data = enumopts.data.map(n => {\r\n        return {\r\n            value:  n[valueField],\r\n            name: n[enumopts.textField]\r\n        };\r\n    });\r\n\r\n    return {\r\n        controltype: 'checkboxgroup',\r\n        enumValues: data,\r\n    };\r\n}\r\n\r\nexport function DateFilterControl(col, options: any) {\r\n    let tye = 'datetime';\r\n    let fmt = 'yyyy-MM-dd';\r\n    let returnFmt = 'yyyy-MM-dd';\r\n    if (options && options.format) {\r\n        fmt = options.format;\r\n        if (fmt.indexOf('HH:') == -1) {\r\n            tye = 'date';\r\n        } else {\r\n            returnFmt += ' HH:mm';\r\n            if (fmt.indexOf('ss') > -1) {\r\n                returnFmt += ':ss';\r\n            }\r\n        }\r\n    } else {\r\n        tye = 'date';\r\n    }\r\n\r\n    // all = 1, å¹´ææ¥\r\n    // noDate = 2,  å¹´æ\r\n    // noDateAndMonth = 3,  å¹´\r\n\r\n    return {\r\n        controltype: 'flexibleDate',\r\n        dateFormat: fmt,\r\n        single: false,\r\n        showType: 1,\r\n        showTime: tye === 'datetime'\r\n    };\r\n}\r\n\r\nexport function NumberFilterControl(col) {\r\n    return  {\r\n        controltype: 'flexibleNumber',\r\n        single: false\r\n    };\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Subject } from 'rxjs';\r\nimport { ColumnFilterType } from '../types/data-column';\r\n\r\nimport { BooleanFilterControl, DateFilterControl, EnumFilterControl,\r\n        NumberFilterControl, TextFilterControl } from '../plugins/smart-filter/controlData/filter-control.options';\r\n\r\n@Injectable()\r\nexport class DatagridSmartFilterService {\r\n    private conditions: any[] = [];\r\n    controlData: any = [];\r\n\r\n    filterChanged = new Subject();\r\n\r\n    removeFilter = new Subject();\r\n    clearAllFilter = new Subject();\r\n\r\n    constructor() { }\r\n\r\n\r\n    getColumnFilterData(col: any) {\r\n        let filterControlData: any = {\r\n            controltype: 'text',\r\n        };\r\n        if (col.filter !== undefined) {\r\n            if (typeof col.filter === 'boolean') {\r\n                if (col.formatter) {\r\n                    if (typeof col.formatter === 'object' && Object.keys(col.formatter).length) {\r\n                        const options: any = col.formatter['options'];\r\n                        switch (col.formatter['type']) {\r\n                            case 'number':\r\n                                return NumberFilterControl(col);\r\n                            case 'enum':\r\n                                return EnumFilterControl(col, options);\r\n                            case 'boolean':\r\n                                return BooleanFilterControl(col);\r\n                            case 'datetime':\r\n                                let tye = 'datetime';\r\n                                let fmt = 'yyyy-MM-dd';\r\n                                let returnFmt = 'yyyy-MM-dd';\r\n                                if (options && options.format) {\r\n                                    fmt = options.format;\r\n                                    if (fmt.indexOf('HH:') == -1) {\r\n                                        tye = 'date';\r\n                                    } else {\r\n                                        returnFmt += ' HH:mm';\r\n                                        if (fmt.indexOf('ss') > -1) {\r\n                                            returnFmt += ':ss';\r\n                                        }\r\n                                    }\r\n                                } else {\r\n                                    tye = 'date';\r\n                                }\r\n                                filterControlData = {\r\n                                    controltype: 'flexibleDate',\r\n                                    dateFormat: fmt,\r\n                                    single: false,\r\n                                    showType: 3,\r\n                                    showTime: tye === 'datetime'\r\n                                };\r\n                                break;\r\n                            default:\r\n                                return TextFilterControl(col);\r\n                        }\r\n                    }\r\n                }\r\n                return filterControlData;\r\n            } else {\r\n                switch (col.filter.type) {\r\n                    case ColumnFilterType.enum:\r\n                        return EnumFilterControl(col, col.filter.options);\r\n                    case ColumnFilterType.date:\r\n                    case ColumnFilterType.datetime:\r\n                        return DateFilterControl(col, col.filter.options);\r\n                    case ColumnFilterType.number:\r\n                        return NumberFilterControl(col);\r\n                    case ColumnFilterType.boolean:\r\n                        return BooleanFilterControl(col);\r\n                }\r\n            }\r\n        }\r\n\r\n        return filterControlData;\r\n    }\r\n\r\n\r\n\r\n    filterConditionChanged(e: {conditions: any[], controlData: any, from: 'toolbar' | 'panel'}) {\r\n        const items = e.conditions;\r\n\r\n        if (!this.conditions || !this.conditions.length) {\r\n            this.conditions.push(...items);\r\n            this.controlData.push({...e.controlData});\r\n        } else {\r\n            /// TODO, CONTROLDATA çç´¢å¼ä¸conditions çç´¢å¼å¾å¯è½ä¸æ¯1ä¸ª\r\n            if (e.from === 'toolbar') {\r\n                this.conditions = [...items];\r\n            } else {\r\n                this.conditions = this.conditions.filter(n => n.FilterField !== items[0].FilterField);\r\n                if (items.length === 1) {\r\n                    this.conditions.push({ ...items[0] });\r\n                } else {\r\n                    this.conditions.push(...items);\r\n                }\r\n            }\r\n\r\n            if (e.controlData) {\r\n                const ctrlIdx = this.controlData.findIndex(n => n.labelCode === e.controlData.labelCode);\r\n                if (ctrlIdx > -1) {\r\n                    this.controlData[ctrlIdx] = {...e.controlData};\r\n                } else {\r\n                    this.controlData.push({...e.controlData});\r\n                }\r\n            }\r\n        }\r\n\r\n        this.filterChanged.next({conditions: [...this.conditions], controlData: [...this.controlData] });\r\n    }\r\n\r\n    removeCondition(e, emitRemove = false) {\r\n        if (this.conditions && this.conditions.length) {\r\n            this.conditions = this.conditions.filter(n => n.FilterField !== e.labelCode);\r\n            this.controlData = this.controlData.filter(n => n.labelCode !== e.labelCode);\r\n        }\r\n        this.filterChanged.next({conditions: [...this.conditions], controlData: [...this.controlData] });\r\n        if (emitRemove) {\r\n            this.removeFilter.next(e);\r\n        }\r\n    }\r\n\r\n    clearAll() {\r\n        this.conditions = [];\r\n        this.controlData = [];\r\n        this.clearAllFilter.next(null);\r\n    }\r\n}\r\n","import { DatagridComponent } from './../datagrid.component';\r\nimport { Injectable } from '@angular/core';\r\nimport { delay } from 'rxjs/operators';\r\n\r\n@Injectable()\r\nexport class SelectionModeService {\r\n    dgRef: DatagridComponent = null;\r\n    private oldSettings: any = null;\r\n    private selectStartEvent: any = null;\r\n    private events = null;\r\n    constructor(grid: DatagridComponent) {\r\n        this.dgRef = grid;\r\n        if (this.dgRef.selectionMode === 'default') {\r\n            grid.zone.runOutsideAngular(() => {\r\n                this.removeEvents();\r\n                this.events = this.registerStopSelectionEvent();\r\n            });\r\n        }\r\n    }\r\n\r\n    destroy() {\r\n        this.dgRef = null;\r\n        this.removeEvents();\r\n    }\r\n\r\n    removeEvents() {\r\n        if (this.events && this.events.length) {\r\n            this.events.forEach(e => {\r\n                e();\r\n            });\r\n\r\n            this.events = null;\r\n        }\r\n    }\r\n\r\n    public toggleMode() {\r\n        if (this.dgRef) {\r\n            if (this.dgRef.selectionMode === 'default') {\r\n                this.enableWindowsSelectionMode();\r\n            } else {\r\n                this.restoreSettings();\r\n            }\r\n        }\r\n    }\r\n\r\n    public enableWindowsSelectionMode() {\r\n        if (this.dgRef) {\r\n            this.oldSettings = {\r\n                showCheckbox: this.dgRef.showCheckbox,\r\n                keepSelect: this.dgRef.keepSelect,\r\n                onlySelectSelf: this.dgRef.onlySelectSelf,\r\n                selectOnCheck: this.dgRef.selectOnCheck,\r\n                checkOnSelect: this.dgRef.checkOnSelect\r\n            };\r\n\r\n            this.dgRef.showCheckbox = true;\r\n            this.dgRef.keepSelect = true;\r\n            this.dgRef.onlySelectSelf = false;\r\n            this.dgRef.selectOnCheck = true;\r\n            this.dgRef.checkOnSelect = true;\r\n\r\n            this.dgRef.dfs.updateProperty('keepSelect', true);\r\n            this.dgRef.dfs.updateProperty('onlySelectSelf', false);\r\n            this.dgRef.dfs.updateProperty('selectOnCheck', true);\r\n            this.dgRef.dfs.updateProperty('checkOnSelect', true);\r\n        }\r\n    }\r\n\r\n    public restoreSettings() {\r\n        if (this.dgRef && this.oldSettings) {\r\n            this.dgRef.showCheckbox = this.oldSettings.showCheckbox;\r\n            this.dgRef.keepSelect = this.oldSettings.keepSelect;\r\n            this.dgRef.onlySelectSelf = this.oldSettings.onlySelectSelf;\r\n            this.dgRef.selectOnCheck = this.oldSettings.selectOnCheck;\r\n            this.dgRef.checkOnSelect = this.oldSettings.checkOnSelect;\r\n\r\n\r\n            this.dgRef.dfs.updateProperty('keepSelect', this.oldSettings.keepSelect);\r\n            this.dgRef.dfs.updateProperty('onlySelectSelf', this.oldSettings.onlySelectSelf);\r\n            this.dgRef.dfs.updateProperty('selectOnCheck', this.oldSettings.selectOnCheck);\r\n            this.dgRef.dfs.updateProperty('checkOnSelect', this.oldSettings.checkOnSelect);\r\n        }\r\n    }\r\n\r\n\r\n    private registerStopSelectionEvent() {\r\n        const kd = this.dgRef.render2.listen(document, 'keydown', (event: any) => {\r\n            if (event.ctrlKey || event.shiftKey) {\r\n                this.unselectable();\r\n            }\r\n        });\r\n\r\n        const ku = this.dgRef.render2.listen(document, 'keyup', (event: any) => {\r\n            if (event.ctrlKey || event.shiftKey || event.keyCode === 17 || event.keyCode === 16) {\r\n                this.enableSelectable();\r\n            }\r\n        });\r\n\r\n        return [ kd, ku];\r\n    }\r\n\r\n    private unselectable() {\r\n        this.dgRef.render2.setAttribute(this.dgRef.dgContainer.nativeElement, 'unselectable', 'on');\r\n        this.dgRef.render2.setAttribute(this.dgRef.dgContainer.nativeElement, 'onselectstart', 'return false');\r\n        this.dgRef.render2.setStyle(this.dgRef.dgContainer.nativeElement, '-moz-user-select', 'none');\r\n    }\r\n\r\n    private enableSelectable() {\r\n        this.dgRef.render2.removeAttribute(this.dgRef.dgContainer.nativeElement, 'unselectable');\r\n        this.dgRef.render2.removeAttribute(this.dgRef.dgContainer.nativeElement, 'onselectstart');\r\n        this.dgRef.render2.removeStyle(this.dgRef.dgContainer.nativeElement, '-moz-user-select');\r\n    }\r\n\r\n    beforRowClick(param: any) {\r\n        if (this.dgRef && this.dgRef.selectionMode === 'default') {\r\n            const isSelected = this.dgRef.dfs.isRowSelected(param.id);\r\n            const isCtrlKey = param.e.ctrlKey;\r\n            const isShiftKey = param.e.shiftKey;\r\n\r\n            this.dgRef.endEditing();\r\n\r\n            if (!isCtrlKey && !isShiftKey) {\r\n                if (!isSelected) {\r\n                    this.dgRef.clearCheckeds();\r\n                } else {\r\n                    // å¦ææå¤æ¡éï¼ç§»é¤å¶ä»éä¸­è¡\r\n                    const currentPagerIds = this.dgRef.getRows().map(n => n.id);\r\n                    const unCheckIDs = this.dgRef.checkValues.filter(i => currentPagerIds.includes(i) && i != param.id);\r\n                    const unSelectIds = this.dgRef.checkValues.filter(n => !currentPagerIds.includes(n));\r\n                    // const unCheckIDs = this.dgRef.checkValues.filter(n => n != param.id);\r\n                    if (unCheckIDs && unCheckIDs.length) {\r\n                        this.dgRef.unCheckRows(unCheckIDs, true);\r\n                        this.dgRef.clearSelections([param.id, ...unSelectIds]);\r\n                    }\r\n                }\r\n            } else {\r\n                if (isShiftKey) {\r\n                    let focusIndex = this.dgRef.focusRowIndex;\r\n                    if (focusIndex === -1) {\r\n                        focusIndex = 0;\r\n                    }\r\n\r\n                    const endIndex = param.rowIndex;\r\n                    let start = focusIndex;\r\n                    let end = endIndex;\r\n                    if (focusIndex > endIndex) {\r\n                        start = endIndex;\r\n                        end = focusIndex;\r\n                    }\r\n\r\n                    const data = this.dgRef.getRows();\r\n                    const checkedItems = [...data].splice(start, end - start + 1);\r\n                    const willCheckIds = checkedItems.map(n => {\r\n                        return this.dgRef.dfs.primaryId(n);\r\n                    });\r\n\r\n                    if (!isCtrlKey) {\r\n                        this.dgRef.clearCheckeds(false, false);\r\n                    }\r\n                    // this.dgRef.selectValues = willCheckIds;\r\n                    this.dgRef.checkRows(willCheckIds, true);\r\n                    return true;\r\n                }\r\n            }\r\n\r\n            if (isSelected && isCtrlKey) {\r\n                param.e.stopPropagation();\r\n                // æ§è¡åæ¶éæ©\r\n                this.dgRef.unCheckRow(param.id);\r\n                return true;\r\n            }\r\n            this.dgRef.beforeSelect(param).pipe(\r\n                delay(100)\r\n            ).subscribe((canSelect: boolean) => {\r\n                if (canSelect) {\r\n                    this.dgRef.dfs.selectRow(param.rowIndex, param.rowData);\r\n                    if (this.dgRef.selectedRow) {\r\n                        this.dgRef.selectedRow.dr = param.dr;\r\n                    }\r\n                }\r\n                this.dgRef.rowClick.emit({ data: param.rowData, grid: this.dgRef, dblclick: false });\r\n                this.dgRef.dgs.setSelecedRow.emit({ selected: true, id: this.dgRef.dfs.primaryId(param.rowData) });\r\n            });\r\n\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    endRowClick() {\r\n        if (this.dgRef && this.dgRef.selectionMode === 'default') {\r\n            this.dgRef.checkOnSelect = false;\r\n        }\r\n    }\r\n}\r\n\r\n","\r\n/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @Date: 2019-08-06 07:43:07\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-11-30 16:42:51\r\n * @QQ: 1055818239\r\n * @Version: v0.8.0\r\n * - 2021/04/07 å¢å  enableHighlightCell å±æ§ï¼æ¯æéä¸­ååæ ¼é«äº®\r\n */\r\n\r\nimport {\r\n    Component, OnInit, Input, ViewEncapsulation,\r\n    ContentChildren, QueryList, Output, EventEmitter, Renderer2, OnDestroy, OnChanges,\r\n    SimpleChanges, ChangeDetectionStrategy, ChangeDetectorRef, Injector, HostBinding,\r\n    AfterContentInit, NgZone, ElementRef, ViewChild, AfterViewInit, ApplicationRef, TemplateRef, HostListener, DoCheck\r\n} from '@angular/core';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\nimport { FormGroup, ValidatorFn } from '@angular/forms';\r\nimport ResizeObserver from 'resize-observer-polyfill';\r\nimport { of, Subscription, Observable, from, BehaviorSubject } from 'rxjs';\r\nimport { DataColumn, CustomStyle, MoveDirection, ColumnGroup, ColumnFilterType } from './types/data-column';\r\nimport { DatagridFacadeService } from './services/datagrid-facade.service';\r\nimport { DatagridColumnDirective } from './components/columns/datagrid-column.directive';\r\nimport { CellInfo, IgnoreProperties, SelectedRow } from './services/state';\r\nimport { RestService, DATAGRID_REST_SERVICEE } from './services/rest.service';\r\nimport { DatagridService } from './services/datagrid.service';\r\nimport { GRID_EDITORS, CELL_SELECTED_CLS, GRID_VALIDATORS, SIZE_TYPE, GRID_SETTINGS_SERVICE, GRID_SETTINGS_HTTP, CELL_EDITING_CLS, TR_PREFIX } from './types/constant';\r\nimport { DomHandler } from './services/domhandler';\r\nimport { Utils } from './utils/utils';\r\nimport { CommonUtils, DebugService, FarrisComponentInstanceService } from '@farris/ui-common';\r\nimport { ColumnFormatService } from '@farris/ui-common/column';\r\nimport { flatten, cloneDeep } from 'lodash-es';\r\nimport { ScrollbarDirective } from './scrollbar/scrollbar.directive';\r\nimport { LocaleService } from '@farris/ui-locale';\r\nimport { BeforEventParam, RowEditParam } from './types/event-params';\r\nimport { DatagridColumnsHelper } from './services/datagrid-columns.helper';\r\nimport { DatagridFilterService } from './services/datagrid-filter.service';\r\nimport { debounceTime, takeUntil } from 'rxjs/operators';\r\n\r\nimport { SmartFilterToolbarComponent } from './components/filter-toolbar/smart-filter-toolbar.component';\r\nimport { DatagridSmartFilterService } from './services/datagrid-smart-filter.service';\r\nimport { IdService } from '@farris/ui-common';\r\nimport { SelectionModeService } from './services/selection-mode.service';\r\nimport { ContextMenuItem } from '@farris/ui-context-menu';\r\nimport { HttpClient } from '@angular/common/http';\r\n@Component({\r\n    selector: 'farris-datagrid',\r\n    templateUrl: './datagrid.component.html',\r\n    encapsulation: ViewEncapsulation.None,\r\n    changeDetection: ChangeDetectionStrategy.OnPush,\r\n    providers: [\r\n        DatagridFacadeService,\r\n        DatagridService,\r\n        DatagridSmartFilterService\r\n    ],\r\n    exportAs: 'datagrid',\r\n    styles:[\r\n        `.f-datagrid-header table{\r\n            background-color: #F1F3F7;\r\n        }`\r\n    ]\r\n})\r\nexport class DatagridComponent implements OnInit, OnDestroy, OnChanges, AfterContentInit, AfterViewInit, DoCheck {\r\n    private auther = `Lucas Huang - QQ:1055818239`;\r\n    private version = '0.8.x';\r\n    __component_type__ = 'DatagridComponent';\r\n\r\n    /** å¯ç¨æ§è½ä¼åçï¼é»è®¤ä¸º false */\r\n    @Input() fast = false;\r\n\r\n    @HostBinding('style.position') pos = 'relative';\r\n    @HostBinding('class.f-datagrid-full') hostCls = false;\r\n    @HostBinding('class.f-datagrid-auto-height') get autoHeightCls() {\r\n        return this.autoHeight;\r\n    }\r\n    /** ä½¿ç¨ä¸»é¢ */\r\n    @Input() useThemes = true;\r\n    // ç¨äºå­å¨ç¨æ·ä¸ªæ§åè®¾ç½®\r\n    @Input() id = '';\r\n    /** èªå¨é«åº¦ - å¯ç¨æ­¤å±æ§åï¼å°±æ¯ä¸ä¸ªæ®æ®ééç table , ä¸è½ç¼è¾ï¼ä¸è½æåºï¼ä¸è½åé¡µï¼ä¸è½... å°±æ¯ä¸å¡è */\r\n    @Input() useHtmlTable = false;\r\n    /** èªå¨é«åº¦ */\r\n    @Input() autoHeight = false;\r\n    /** æ¾ç¤ºè¾¹æ¡ */\r\n    @Input() showBorder = false;\r\n    /** å¯ç¨æé©¬çº¿  */\r\n    @Input() striped = true;\r\n    /** å®½åº¦ */\r\n    @Input() width = 800;\r\n    /** é«åº¦ */\r\n    @Input() height = 300;\r\n\r\n    /** æ¾ç¤ºè¡¨å¤´ */\r\n    @Input() showHeader = true;\r\n    /** è¡¨å¤´-åè¡é«åº¦ */\r\n    @Input() headerHeight = 35;\r\n    /** è¡¨å¤´æè¡ */\r\n    @Input() headerWrap = false;\r\n    /** æ¾ç¤ºé¡µè */\r\n    @Input() showFooter = false;\r\n    /** é¡µèé»è®¤è¡é« */\r\n    @Input() footerHeight = 29;\r\n    /** é¡µèæ°æ®æ¥æº, é»è®¤ä¸º client */\r\n    @Input() footerDataFrom: 'server' | 'client' = 'client';\r\n    /** é¡µèåè®¡è¡æ¨¡æ¿ */\r\n    @Input() footerTemplate: TemplateRef<any>;\r\n    /** åè®¡è¡æ¾ç¤ºä½ç½®ï¼é»è®¤ä¸ºåºé¨ */\r\n    @Input() footerPosition: 'top' | 'bottom' | 'both' = 'bottom';\r\n    /** é¡µèè¡èªå®ä¹æ ·å¼ */\r\n    @Input() footerStyler: () => { cls?: string, style?: any };\r\n    /** è¡é« */\r\n    @Input() rowHeight = 29;\r\n\r\n    /**\r\n     * è®¾ç½®grid è¡é«å°ºå¯¸\r\n     * sm: å°ï¼md: æ­£å¸¸ï¼ lg: å¤§ï¼xl: è¶å¤§\r\n     */\r\n    private _sizeType: 'sm' | 'md' | 'lg' | 'xl' = 'sm';\r\n    get sizeType() {\r\n        return this._sizeType;\r\n    }\r\n    @Input() set sizeType(val) {\r\n        this._sizeType = val;\r\n    }\r\n\r\n    /** å¡«åå®¹å¨ */\r\n    private _fit = false;\r\n    @Input() get fit() {\r\n        return this._fit;\r\n    }\r\n    set fit(val: boolean) {\r\n        this._fit = val;\r\n        this.hostCls = val;\r\n    }\r\n    /** å¦æä¸ºçï¼åèªå¨å±å¼/æ¶ç¼©åçå¤§å°ä»¥éåç½æ ¼å®½åº¦å¹¶é²æ­¢æ°´å¹³æ»å¨ã */\r\n    private _fitColumns = false;\r\n    @Input() get fitColumns() {\r\n        return this._fitColumns;\r\n    }\r\n    set fitColumns(val: boolean) {\r\n        this._fitColumns = val;\r\n        this.setFitColumns(val);\r\n    }\r\n    /** æ ¹æ®gridçå®½åº¦èªå¨è°æ´åå®½åº¦ */\r\n    private _autoFitColumns = false;\r\n    @Input() get autoFitColumns() {\r\n        return this._autoFitColumns;\r\n    }\r\n    set autoFitColumns(val) {\r\n        this._autoFitColumns = val;\r\n        this.dfs.updateProperty('autoFitColumns', val);\r\n    }\r\n\r\n    /** ç¦ç¨ */\r\n    @Input() disabled = false;\r\n    /**\r\n     * æ»å¨æ¡æ¾ç¤ºæ¨¡å¼ï¼é»è®¤ä¸º auto\r\n     */\r\n    @Input() scrollBarShowMode: 'auto' | 'allways' = 'auto';\r\n    @Input() scrollBarOptions = {\r\n        width: 18,\r\n        height: 18\r\n    };\r\n    /** å½æ»å¨ä¸ç´æ¾ç¤ºæ¶ï¼æ¯å¦æ¾ç¤ºä¸¤ç«¯çç®­å¤´ */\r\n    @Input() showScrollArrow = false;\r\n\r\n    /** å¯æå¨åè®¾ç½®åå®½ */\r\n    @Input() resizeColumn = true;\r\n    /** æ¾ç¤ºè¡å· */\r\n    @Input() showLineNumber = false;\r\n    /** è¡å·è¡¨å¤´å­ç¬¦ */\r\n    @Input() lineNumberTitle = '';\r\n    /** è¡å·å®½åº¦ */\r\n    @Input() lineNumberWidth = 36;\r\n    /** é¼ æ æ»è¿ææå¼å³ï¼é»è®¤å¼å¯ */\r\n    @Input() rowHover = true;\r\n    /** åè®¸ç¼è¾æ¶ï¼åå»è¿å¥ç¼è¾ç¶æ; falseä¸ºåå»è¿å¥ç¼è¾ */\r\n    @Input() clickToEdit = true;\r\n\r\n    private _lockPagination = false;\r\n    /** éå®åé¡µæ¡ï¼éå®åé¡µç ç¹å»æ æ */\r\n    @Input() get lockPagination() {\r\n        return this._lockPagination;\r\n    }\r\n    set lockPagination(val: boolean) {\r\n        this._lockPagination = val;\r\n        if (this.dgPager) {\r\n            this.dgPager[val ? 'lock' : 'unlock']();\r\n        }\r\n    }\r\n\r\n    /** åé¡µä¿¡æ¯ */\r\n    private __pagination = true;\r\n    @Input() set pagination(val) {\r\n        if (this.__pagination !== val) {\r\n            this.__pagination = val;\r\n            this.dfs.updateProperty('pagination', val);\r\n            this.dgs.showGridHeader.emit();\r\n        }\r\n    }\r\n    get pagination() {\r\n        return this.__pagination;\r\n    }\r\n\r\n    /** åé¡µç»ä»¶èªå®ä¹åå®¹åºæ¨¡æ¿ */\r\n    @Input() pagerContentTemplate: TemplateRef<any> = null;\r\n    /** åé¡µæ¡å¯¹é½å±ç¤ºæ¹å¼ï¼ left, right, center   é»è®¤ä¸º right  */\r\n    @Input() pagerPos: 'left'|'center'| 'right' = 'right';\r\n\r\n    /** åé¡µæ¡æ¾ç¤ºæ¨¡å¼ï¼ default, simple */\r\n    @Input() pagerViewMode = 'default';\r\n    /** å¯ç¨æå¡å¨ç«¯åé¡µ */\r\n    @Input() pagerOnServer = true;\r\n    /** æ¯é¡µè®°å½æ° */\r\n    @Input() pageList = [10, 20, 30, 50, 100];\r\n    /** å½åé¡µç  */\r\n    @Input() pageIndex = 1;\r\n    /** æ¯é¡µè®°å½æ° */\r\n    @Input() pageSize = 20;\r\n    /** åé¡µåºé«åº¦ */\r\n    @Input() pagerHeight = 56;\r\n    /** æ¾ç¤ºæ¯é¡µè®°å½æ° */\r\n    @Input() showPageList = false;\r\n    /** æ¾ç¤ºåé¡µä¿¡æ¯ */\r\n    @Input() showPageInfo = true;\r\n    /** æ¾ç¤ºé¡µç  */\r\n    @Input() showPageNumber = true;\r\n    /** æ¾ç¤ºé¡µç æå¤§æ°é */\r\n    @Input() pagerLabelSize = 7;\r\n    /** æ¾ç¤ºè½¬è³æå®é¡µç è¾å¥æ¡ */\r\n    @Input() showGotoInput = false;\r\n    /** å¯ç¨è·¨é¡µå¤é */\r\n    @Input() enableMorePageSelect = false;\r\n    /** æ¾ç¤ºéä¸­åè¡¨ */\r\n    @Input() showSelectedList = false;\r\n    /** éä¸­åè¡¨ä¸­ï¼æ¯æ¡è®°å½æ¾ç¤ºçåå®¹ */\r\n    @Input() selectedItemFormatter: (data) => string;\r\n    /** ååæ ¼ä¿¡æ¯æç¤ºå»¶æ¶ï¼é»è®¤ 1000ms */\r\n    @Input() cellTipTimer = 1000;\r\n    /** grid åé¨å¤çåé¡µç¶æ */\r\n    @Input() controlPaginationState = true;\r\n    /** æ»è®°å½æ° */\r\n    private _total = 0;\r\n    get total() {\r\n        return this._total;\r\n    }\r\n\r\n    @Input() set total(val: number) {\r\n        this._total = val;\r\n        this.pagerOpts.totalItems = val;\r\n        if (!this.pagination) {\r\n            this.pagerOpts.itemsPerPage = val;\r\n        }\r\n        this.dfs.setTotal(val);\r\n    }\r\n    /** å¯ç¨éä¸­è¡ */\r\n    @Input() enableSelectRow = true;\r\n    /** å¯ç¨å¤é */\r\n    @Input() multiSelect = false;\r\n    /** å¯ç¨å¤éæ¶ï¼æ¯å¦æ¾ç¤ºcheckbox */\r\n    @Input() showCheckbox = false;\r\n    /** æ¾ç¤ºå¨écheckbox */\r\n    @Input() showAllCheckbox = false;\r\n    /** å½å¯ç¨å¤éæ¶ï¼ç¹å»è¡éä¸­ï¼åªåè®¸ä¸åªæä¸è¡è¢«éä¸­ã, é»è®¤ä¸º true */\r\n    @Input() onlySelectSelf = true;\r\n    /** å¯ç¨å¤éä¸æ¾ç¤ºcheckbox, éä¸­è¡åæ¶é©é, é»è®¤ä¸º false */\r\n    @Input() checkOnSelect = false;\r\n    /** å¯ç¨å¤éä¸æ¾ç¤ºcheckbox, é©éåéä¸­è¡, é»è®¤ä¸º false */\r\n    @Input() selectOnCheck = false;\r\n    /**\r\n     * è¡éä¸­æ¨¡å¼ï¼custom: èªå®ä¹ï¼ default: é»è®¤ ä»¿Windowsèµæºç®¡çå¨éä¸­\r\n     * æ³¨æï¼ æ­¤å±æ§ä»å¤éï¼æ¾ç¤ºå¤éæ¡ææ\r\n     * addTime: 2021-12-14 by LUCAS HUANG\r\n     */\r\n    @Input() selectionMode: 'custom' | 'default' = 'custom';\r\n    /**\r\n     * åå»è¡éä¸­åï¼å¨æ¬¡ç¹å»ä¸ä¼è¢«åæ¶éä¸­ç¶æ;\r\n     */\r\n    @Input() keepSelect = true;\r\n\r\n    /** æ°æ®ä¸ºç©ºæ¶çé«åº¦ */\r\n    @Input() emptyDataHeight = 240;\r\n    /** ç©ºæ°æ®æ¶ï¼æ¾ç¤ºçæç¤ºææ¬ */\r\n    @Input() emptyMessage = 'ææ æ°æ®';\r\n    /** æ æ°æ®æ¶çæ¨¡æ¿ */\r\n    @Input() emptyTemplate: TemplateRef<any> = null;\r\n\r\n    /** ä¸»é®å­æ®µ */\r\n    @Input() idField = 'id';\r\n    /** è¯·æ±æ°æ®æºçURL */\r\n    @Input() url: string;\r\n    /** æ°æ®æº */\r\n    @Input() data: any[];\r\n\r\n    /** é¡µèæ°æ® */\r\n    private _footerData: Observable<any> = of([]);\r\n    @Input() get footerData() {\r\n        return this._footerData;\r\n    }\r\n    set footerData(rows) {\r\n        if (rows && rows.subscribe) {\r\n            this._footerData = rows;\r\n        } else {\r\n            this._footerData = of(rows || []);\r\n        }\r\n        if (rows) {\r\n            this.setFooterHeight();\r\n        }\r\n        this.cd.detectChanges();\r\n    }\r\n\r\n    /** éªè¯ä¸éè¿æ¶å¯ä»¥ç»æç¼è¾ */\r\n    @Input() endEditByInvalid = true;\r\n\r\n    /** åéå */\r\n    private _columns = [];\r\n    @Input()\r\n    get columns() {\r\n        return this._columns;\r\n    }\r\n    set columns(values) {\r\n        this._columns = this.correctColumns(values);\r\n        this.dfs.updateProperty('columns', this._columns);\r\n    }\r\n\r\n    private _fields = [];\r\n    get fields() {\r\n        return this._fields;\r\n    }\r\n\r\n    @Input() set fields(cols) {\r\n        this._fields = cols;\r\n        this.columns = cols;\r\n        if (this.data) {\r\n            this.columnsChanged(false, true);\r\n        }\r\n    }\r\n    /** æ°æ®æè¡ï¼é»è®¤å¼ï¼true,å³å¨ä¸è¡æ¾ç¤ºï¼ä¸æè¡ã */\r\n    @Input() nowrap = true;\r\n    /** èæå è½½ */\r\n    @Input() virtualized = false;\r\n    /** æ¯å¦å¯ç¨å¼æ­¥å è½½æ°æ® */\r\n    @Input() virtualizedAsyncLoad = false;\r\n    /** è¡æ ·å¼ */\r\n    @Input() rowStyler: (rowData, rowIndex?: number) => { cls?: string, style?: any };\r\n    /** ç¼è¾æ¹å¼ï¼ row(æ´è¡ç¼è¾)ãcell(ååæ ¼ç¼è¾)ï¼é»è®¤ä¸º row */\r\n    @Input() editMode: 'row' | 'cell' = 'row';\r\n    /** ç¼è¾ç¶æ */\r\n    private _editable = false;\r\n    get editable() {\r\n        return this._editable;\r\n    }\r\n    @Input() set editable(v) {\r\n        if (this._editable !== v) {\r\n            this._editable = v;\r\n            this.cd.detectChanges();\r\n            this.dgs.updateEmptyStyle();\r\n        }\r\n    }\r\n    /** å¯ç¨å¯ç¼è¾ååæ ¼æ ·å¼ã */\r\n    @Input() enableEditCellStyle = false;\r\n\r\n    /** è¿å¥ç¼è¾ç¶ææ¶éæ¯å¦éä¸­ææ¬ï¼é»è®¤ä¸º false\r\n     * ä»ææ¬æ¡æ¯ææ­¤ç¹æ§\r\n     */\r\n    @Input() selectOnEditing = false;\r\n\r\n    /** ç¼è¾å¨é«åº¦ */\r\n    @Input() editorHeight = 30;\r\n    /** å¯ç¨è¿ç«¯æåº */\r\n    @Input() remoteSort = false;\r\n    /** æåºå­æ®µ */\r\n    @Input() sortName: string;\r\n    /** æåºæ¹å¼ asc | desc */\r\n    @Input() sortOrder: string;\r\n    /** åè®¸å¤åæåº */\r\n    @Input() multiSort: boolean;\r\n\r\n    @Input() hoverRowCls = 'f-datagrid-row-hover';\r\n\r\n    /** åè®¸ææ½åé¡ºåº */\r\n    @Input() enableDragColumn = false;\r\n\r\n    /** è¡åç»é¢æ¿é«åº¦ï¼é»è®¤ 50PX */\r\n    @Input() rowGroupPanelHeight = 50;\r\n    /** å¯ç¨åç»è¡ */\r\n    @Input() groupRows = false;\r\n    /** å¯ç¨è¡åç»åè®¡è¡ */\r\n    @Input() groupFooter = false;\r\n    /** åç»è¡æ¯å¦å±å¼ï¼é»è®¤ä¸º å±å¼  */\r\n    @Input() expandGroupRows = true;\r\n    /**\r\n     * åç»åè®¡è¡èªå®ä¹æ ·å¼ï¼\r\n     * åè®¸çå¼ä¸º\r\n     * - { cls: 'cssclassname, ', style: { color: 'red', border: 1px solid } }\r\n     * - (groupFooterRowData): { cls: 'cssclassname, ', style: { color: 'red', border: 1px solid } } => {}\r\n     */\r\n    @Input() groupFooterStyler: any;\r\n    /** åè®¡æ°æ®æ¾ç¤ºä½ç½®\r\n     * inGroupRow: ä¸åç»å¨åä¸è¡ï¼åå«ç¸å³åè®¡å­æ®µå¯¹é½\r\n     * groupFooterRow: å¨åç»æ°æ®æåå¢å ä¸è¡\r\n     * é»è®¤ä¸º groupFooterRow\r\n     */\r\n    @Input() groupSummaryPosition: 'inGroupRow' | 'groupFooterRow' = 'groupFooterRow';\r\n    /** åç»ä¿¡æ¯åå¹¶åæ°\r\n     * é»è®¤ä¸º 1\r\n     */\r\n    @Input() groupCellColSpan = 1;\r\n\r\n    /** åç»å­æ®µåç§°, å¤å­æ®µåç»ä»¥è±æéå·åé */\r\n    private _groupField = '';\r\n    groupFields$ = new BehaviorSubject([]);\r\n    get groupField() {\r\n        return this._groupField;\r\n    }\r\n    @Input() set groupField(val) {\r\n        this._groupField = val || '';\r\n\r\n        if (Array.isArray(this._groupField)) {\r\n            this._groupField = this._groupField.join(',');\r\n        }\r\n\r\n        if (this._groupField) {\r\n            this.groupFields$.next(this._groupField.split(','));\r\n        } else {\r\n            this.groupFields$.next([]);\r\n        }\r\n\r\n        this.dfs.updateProperty('groupField', this._groupField);\r\n    }\r\n    /** æ¾ç¤ºåç»å */\r\n    @Input() showGroupColumn = true;\r\n    /** åç»æ ¼å¼å */\r\n    @Input() groupFormatter: (groupRow: any) => any;\r\n    /** åç»è¡æ ·å¼ */\r\n    @Input() groupStyler: (groupRow: any) => { cls?: string, style?: any };\r\n\r\n    /** æ¾ç¤ºåç»åé¢æ¿ãé»è®¤ä¸º false */\r\n    private _showRowGroupPanel = false;\r\n    @Input() set showRowGroupPanel(val) {\r\n        this._showRowGroupPanel = val;\r\n    }\r\n    get showRowGroupPanel() {\r\n        return this.groupRows && this._showRowGroupPanel;\r\n    }\r\n\r\n    /** åå»è¡¨å¤´éåºåå®¹å®½åº¦ */\r\n    @Input() AutoColumnWidthUseDblclick = true;\r\n    /** è¡é©éåéä¸­ç¦ç¨è¡¨è¾¾å¼ */\r\n    @Input() disableRow: (row, index?: any) => boolean;\r\n    /** ä½¿ç¨åé¨è¿æ»¤å¨; é»è®¤ä¸º false */\r\n    @Input() useDefaultFilter = false;\r\n    /** è¿æ»¤å¾æ ä¸æåºå¾æ åå¹¶ï¼æ­¤å±æ§ä¸ enableFilterRow äºæ¥ */\r\n    @Input() enableSmartFilter = false;\r\n    /** æ¾ç¤ºè¿æ»¤è¡ */\r\n    @Input() enableFilterRow = false;\r\n    /** æå¡å¨ç«¯è¿æ»¤ */\r\n    @Input() remoteFilter = false;\r\n    /** å¯ç¨è¿æ»¤æ¡ä»¶æ¾ç¤ºæ¡ */\r\n    @Input() showFilterBar = false;\r\n    /** è¿æ»¤æ¡ä»¶æ±æ»æ¡é«åº¦ï¼é»è®¤ 32px  */\r\n    @Input() filterBarHeight = 32;\r\n    @Input() filterRowHeight = 40;\r\n    @Input() conditions: any = {};\r\n\r\n    @Input() selectValue = null;\r\n    @Input() checkValues = [];\r\n    @Input() selectValues = [];\r\n\r\n    /** åå¹¶ååæ ¼ï¼åæ¯æçºµååå¹¶ */\r\n    @Input() mergeCell = false;\r\n    @Input() mergeFields = [];\r\n    /** åå¹¶ååæ ¼æ°æ®å¯ç¨å®¢æ·ç«¯æåº */\r\n    @Input() enableClientSortForMergeCell = false;\r\n    /** ä½¿ç¨é«çº§æ§å¶é¢æ¿(åè®¾ç½®) */\r\n    @Input() useControlPanel = false;\r\n    /** å¯ç¨ç®æ´æ§å¶é¢æ¿æ¨¡å¼ãé»è®¤ä¸º false */\r\n    @Input() enableSimpleMode = false;\r\n    /** ç¹å»åè®¾ç½®å¾æ ï¼é»è®¤æå¼çæ§å¶é¢æ¿ */\r\n    @Input() controlPanelMode: 'advanced' | 'simple' = 'advanced';\r\n    /** å¯ç¨åè®¾ç½®æ¹æ¡ */\r\n    @Input() enableScheme = false;\r\n    /** ç³»ç»é¢å¶æ¹æ¡åç§° */\r\n    @Input() defaultSchemeName = 'ç³»ç»é¢å¶';\r\n\r\n    /** é»æ­¢click äºä»¶åæ³¡ */\r\n    @Input() stopPropagation = true;\r\n    /**\r\n     * (202105 å¼ç¨)\r\n     * ç¹å»ååæ ¼è¿è¡ç¼è¾ç¶ææ¶ï¼å³é­å¶ä»Gridçç¼è¾å¨ãé»è®¤ falseï¼\r\n     * å¤ä¸ªåè¡¨å­æ¶ï¼ä»æä¸ä¸ªåè¡¨ä¸­æç¼è¾ç¶æï¼å¶ä»åè¡¨ç»æç¼è¾\r\n     */\r\n    @Input() closeOtherGridEditor = false;\r\n    /** å½æ°æ®æºä¸ºç©ºæ¶ï¼æ¸ç©ºå·²éè®°å½ */\r\n    @Input() clearSelectionsWhenDataIsEmpty = true;\r\n    /** å¯ç¨å³é®èåï¼é»è®¤ä¸º false */\r\n    @Input() enableContextMenu = false;\r\n    /** å³é®èåæ°æ® */\r\n    @Input() contextMenus: ContextMenuItem[] = null;\r\n\r\n    @Output() selectValueChange = new EventEmitter();\r\n    @Output() checkValuesChange = new EventEmitter();\r\n    @Output() selectValuesChange = new EventEmitter();\r\n\r\n    @Input() beforeEdit: (param: RowEditParam) => Observable<boolean>;\r\n    @Output() beginEdit = new EventEmitter<RowEditParam>();\r\n    @Input() afterEdit: (rowIndex: number, rowData: any, column?: DataColumn, editor?: any) => Observable<boolean>;\r\n    @Output() endEdit = new EventEmitter<{ rowIndex: number, rowData: any, column?: DataColumn, value?: any }>();\r\n    @Output() cancelEdited = new EventEmitter<string>();\r\n\r\n    @Output() scrollY = new EventEmitter();\r\n\r\n    @Output() pageSizeChanged = new EventEmitter();\r\n    @Output() pageChanged = new EventEmitter();\r\n\r\n    @Output() loadSuccess = new EventEmitter();\r\n\r\n    @Output() filterChanged = new EventEmitter();\r\n\r\n    @Input() beforeSelect: (params: BeforEventParam) => Observable<boolean>;\r\n    @Input() beforeUnselect: (params: BeforEventParam) => Observable<boolean>;\r\n    @Input() beforeCheck: (params: BeforEventParam) => Observable<boolean>;\r\n    @Input() beforeUncheck: (params: BeforEventParam) => Observable<boolean>;\r\n    @Input() beforeSortColumn: (field: string, order: string, instance: DatagridComponent) => Observable<boolean>;\r\n    /** å¯ç¨éä¸­ååæ ¼é«äº®æ¾ç¤º */\r\n    @Input() enableHighlightCell = false;\r\n    /**  éä¸­çæ°æ®å§ç»ä»æ°æ®æºä¸­è·å. é»è®¤ä¸º false */\r\n    @Input() checkedRowsDataFromSource = false;\r\n    /** å½åååæ ¼ä¸ºåªè¯»æ¶ï¼ä½¿ç¨tab é®è·³å°ä¸ä¸ªååæ ¼æ¶ï¼æ¯å¦åè®¸è¿å¥ç¼è¾ç¶æï¼é»è®¤ä¸º false;\r\n     * é»è®¤æåµä¸ï¼å½åååæ ¼åªè¯»ï¼æTABè·³å°ä¸ä¸ªCELL æ¶ï¼éä¸­CELL ï¼åè½¦è¿å¥ç¼è¾ã\r\n     * å¼å¯åï¼ä¸ä¸ªååæ ¼èªå¨è¿å¥ç¼è¾ç¶æã\r\n     */\r\n    @Input() editcellWhenTabKeydwon = false;\r\n\r\n    /** ååæ ¼ç¹å»åäºä»¶ */\r\n    @Output() beforeClickCell = new EventEmitter<RowEditParam>();\r\n\r\n    @Output() dblclickRow = new EventEmitter();\r\n    @Output() selectChanged = new EventEmitter<SelectedRow>();\r\n    @Output() unSelect = new EventEmitter<SelectedRow>();\r\n    @Output() selectAll = new EventEmitter<SelectedRow[]>();\r\n    @Output() unSelectAll = new EventEmitter();\r\n    /** å¼æ­¥è¯·æ±èæå è½½ */\r\n    @Output() scrollYLoad = new EventEmitter<{ pager: number, pageSize: number }>();\r\n\r\n    @Output() checked = new EventEmitter<SelectedRow>();\r\n    @Output() unChecked = new EventEmitter<SelectedRow>();\r\n    @Output() checkAll = new EventEmitter<SelectedRow[]>();\r\n    @Output() unCheckAll = new EventEmitter<SelectedRow[]>();\r\n    @Output() checkedChange = new EventEmitter<SelectedRow[]>();\r\n\r\n    @Output() columnSorted = new EventEmitter<any>();\r\n\r\n    @Output() rowClick = new EventEmitter();\r\n    @Output() rowAppended = new EventEmitter();\r\n    @Output() rowDeleted = new EventEmitter();\r\n    @Output() rowUpdated = new EventEmitter();\r\n\r\n    @Output() dataChange = new EventEmitter();\r\n\r\n    /** æåä¸è¡çæåååæ ¼åè½¦å¤çäºä»¶ */\r\n    @Output() lastCellEnterHandle = new EventEmitter();\r\n\r\n    /** åç»å­æ®µååå */\r\n    @Output() groupFieldChange = new EventEmitter();\r\n    /** æå¨åæ¹ååæ¾ç¤ºä½ç½®åè§¦å */\r\n    @Output() columnMoved = new EventEmitter();\r\n    /** ååæ ¼ç¹å»äºä»¶ */\r\n    @Output() cellClick = new EventEmitter();\r\n\r\n    @ContentChildren(DatagridColumnDirective) dgColumns?: QueryList<DatagridColumnDirective>;\r\n    @ViewChild('dgPager') dgPager: any;\r\n    @ViewChild('resizeProxy') resizeProxy: ElementRef;\r\n    @ViewChild('resizeProxyBg') resizeProxyBg: ElementRef;\r\n    @ViewChild('datagridContainer') dgContainer: ElementRef;\r\n    @ViewChild('longTextArea') longTextArea: ElementRef;\r\n    @ViewChild('smartfiltertoolbar') smartFilterToolbar: SmartFilterToolbarComponent;\r\n    colGroup: ColumnGroup;\r\n\r\n    private _loading = false;\r\n    get loading() {\r\n        return this._loading;\r\n    }\r\n    set loading(val: boolean) {\r\n        this._loading = val;\r\n        if (!this.cd['destroyed']) {\r\n            this.cd.detectChanges();\r\n        }\r\n    }\r\n\r\n    get selections(): SelectedRow[] {\r\n        return this.dfs.getSelections();\r\n    }\r\n\r\n    get checkeds() {\r\n        return this.checkedRows;\r\n    }\r\n\r\n    get checkedRows() {\r\n        const chkeds = this.dfs.getCheckeds();\r\n        if (this.enableMorePageSelect) {\r\n            if (chkeds && chkeds.length) {\r\n                if (!this.checkedRowsDataFromSource) {\r\n                    return [...chkeds];\r\n                }\r\n                // ä»æ°æ®æºä¸­è·åææ°æ°æ®\r\n                return chkeds.map(n => {\r\n                    const d = this.dfs.findRow(n.id);\r\n                    if (d) {\r\n                        n.data = d.data;\r\n                    }\r\n                    return n;\r\n                });\r\n            }\r\n        } else {\r\n            if (this.data && this.data.length) {\r\n                const temp = this.data.map(n => n[this.idField]);\r\n                if (!this.checkedRowsDataFromSource) {\r\n                    return chkeds.filter(n => temp.includes(n.id));\r\n                }\r\n                // ä»æ°æ®æºä¸­è·åææ°æ°æ®\r\n                return chkeds.filter(n => temp.includes(n.id)).map(n => {\r\n                    const d = this.dfs.findRow(n.id);\r\n                    if (d) {\r\n                        n.data = d.data;\r\n                    }\r\n                    return n;\r\n                });\r\n            }\r\n        }\r\n        return [];\r\n    }\r\n\r\n    set checkedRows(rows: any[]) {\r\n        if (rows && rows.length) {\r\n            rows = rows.map(r => {\r\n                if (r.data) {\r\n                    return r;\r\n                }\r\n                return {\r\n                    id: r[this.idField],\r\n                    data: r\r\n                };\r\n            });\r\n        }\r\n\r\n        this.dfs.updateProperty('checkedRows', rows || []);\r\n        this.initSelectOrChecked();\r\n        this.cd.markForCheck();\r\n    }\r\n\r\n    private _selectedRow = null;\r\n    get selectedRow(): SelectedRow {\r\n        return this._selectedRow;\r\n    }\r\n    set selectedRow(row) {\r\n        if (row) {\r\n            if (this.selectValue != row.id) {\r\n                this._selectedRow = row;\r\n                this.selectValue = row.id;\r\n                this.selectValueChange.emit(row.id);\r\n                this.selectChanged.emit(row);\r\n            }\r\n        } else {\r\n            this.unSelect.emit(this._selectedRow);\r\n            this.selectValue = null;\r\n            this.selectValueChange.emit('');\r\n            this._selectedRow = null;\r\n        }\r\n        // this.cd.detectChanges();\r\n    }\r\n\r\n    ds = {\r\n        index: 0,\r\n        rows: [],\r\n        top: 0,\r\n        bottom: 0,\r\n        scrolling: false // æ¯å¦ç±æ»å¨æ¡è§¦å\r\n    };\r\n\r\n    pagerOpts: any = {};\r\n    restService: RestService;\r\n    editors: { [key: string]: any } = {};\r\n\r\n    validators: { name: string, value: ValidatorFn }[] = [];\r\n\r\n    currentCell: CellInfo;\r\n    flatColumns: DataColumn[];\r\n    footerWidth = 0;\r\n\r\n    clickDelay = 150;\r\n    private resizeColumnInfo = {\r\n        proxyLineEdge: 0,\r\n        startWidth: 0,\r\n        startX: 0,\r\n        left: 0\r\n    };\r\n\r\n    private ro: ResizeObserver | null = null;\r\n    subscriptions: Subscription[] = [];\r\n    realHeaderHeight = 0;\r\n    isSingleClick: boolean;\r\n\r\n    docuemntCellClickEvents: any;\r\n    documentCellClickHandler: any;\r\n    documentCellKeydownEvents: any;\r\n    documentCellKeydownHandler: any;\r\n\r\n    // å¼¹çªä¸­ä½¿ç¨æ¶ï¼çªå£ç¹å»äºä»¶å¤ç\r\n    private modalClickEvent = null;\r\n\r\n    // è¡éä¸­é®çäºä»¶\r\n    documentRowKeydownHandler: any;\r\n    // è¡ç¼è¾å¿«æ·é®\r\n    documentRowEditKeydownHanlder: any;\r\n    // document åå»æ¶ç»æè¡ç¼è¾\r\n    documentClickEndRowEditHandler: any;\r\n\r\n    pending = false;\r\n    public colFormatSer: ColumnFormatService;\r\n    scrollInstance: ScrollbarDirective = null;\r\n    // æ¬å°åæå¡\r\n    localeService: LocaleService;\r\n    // åå¹¶ååè¾å©ä¿¡æ¯\r\n    mergeCellInfo = {};\r\n    ignoreTarget = ['INPUT', 'SELECT', 'TEXTAREA'];\r\n    clientFilterService: DatagridFilterService = null;\r\n\r\n    settingService: any; // DatagridSettingsService;\r\n\r\n    /* æ§å¶åå­æ®µåç§°: _datagrid-setting-control_ */\r\n    ControlPanelFeild = '_datagrid-setting-control_';\r\n\r\n    private _isResized = false;\r\n\r\n    gridSize = { width: this.width + 'px', height: this.height + 'px' };\r\n    // å®¢æ·ç«¯è¿æ»¤æ¶ï¼æ¯å¦è¿æ»¤è¡åçåå\r\n    clientFilterChanged = false;\r\n    // style's ID\r\n    styleSheetId = '';\r\n\r\n    groupRowPanelPlaceholder = '';\r\n    commonUtils: CommonUtils = null;\r\n    smartFilterService: DatagridSmartFilterService = null;\r\n    smartFilterResult = { controlData: [], conditions: [] };\r\n    smartFilterBarHeight = 32;\r\n    private idService: IdService;\r\n    private _active_datagrid_cls = 'datagrid-active';\r\n    private _blured_datagrid_cls = 'datagrid-blurred';\r\n\r\n    // èªå®ä¹gridæ ·å¼ï¼åè¡¨åå§åï¼ä¼æ·»å ä¸ä¸ªèªå®ä¹åç§°çæ ·å¼\r\n    _custom_datagrid_cls = 'datagrid';\r\n    // å¤éä»¿ windows éæ©æ¨¡å¼\r\n    sms: SelectionModeService;\r\n    // ç¦ç¹è¡ç´¢å¼ï¼æ¯æ¬¡è¡ç¹å»åæ´æ°\r\n    focusRowIndex = -1;\r\n\r\n    private documentBodyMouseDown = null;\r\n    private farrisInstances: FarrisComponentInstanceService = null;\r\n    private currentPagerData = [];\r\n    private resizeTimer = null;\r\n    private debugSer: DebugService = null;\r\n\r\n    constructor(\r\n        public cd: ChangeDetectorRef,\r\n        public el: ElementRef,\r\n        public inject: Injector, public zone: NgZone,\r\n        public dfs: DatagridFacadeService,\r\n        public dgs: DatagridService,\r\n        private app: ApplicationRef,\r\n        protected domSanitizer: DomSanitizer,\r\n        public render2: Renderer2) {\r\n\r\n        this.styleSheetId = 'DATAGRID-' + Utils.uuid();\r\n\r\n        this.localeService = this.inject.get(LocaleService);\r\n        this.restService = this.inject.get<RestService>(DATAGRID_REST_SERVICEE, null);\r\n        this.colFormatSer = this.inject.get(ColumnFormatService);\r\n        this.commonUtils = this.inject.get(CommonUtils, null);\r\n        this.clientFilterService = new DatagridFilterService(dfs, this.localeService, inject);\r\n        this.farrisInstances = this.inject.get(FarrisComponentInstanceService, null);\r\n        this.debugSer = this.inject.get(DebugService, null);\r\n\r\n        if (!this.debugSer) {\r\n            this.debugSer = new DebugService();\r\n        }\r\n\r\n        if (this.debugSer.useDebugMode) {\r\n            this.debugSer.useDebugMode();\r\n        }\r\n\r\n        this.smartFilterService = this.inject.get(DatagridSmartFilterService, null);\r\n        this.idService = this.inject.get(IdService, null);\r\n        this.dfs.localId = this.localeService.localeId;\r\n\r\n        this.settingService = this.inject.get(GRID_SETTINGS_SERVICE, null);\r\n        if (this.settingService) {\r\n            const settingsHttp = this.inject.get(GRID_SETTINGS_HTTP, null);\r\n            this.settingService.httpRestService = settingsHttp;\r\n        }\r\n\r\n        const dataSubscription = this.dfs.data$.subscribe((dataSource: any) => {\r\n            this.cleanDom();\r\n            const ds = { ...dataSource };\r\n\r\n            if (this.conditions && Object.keys(this.conditions).length && !this.remoteFilter && this.useDefaultFilter) {\r\n                ds.rows = this.clientFilterService.executeFilter(ds.rows, this.conditions);\r\n            }\r\n\r\n            this.ds = ds;\r\n\r\n            if (this.ds.rows && this.ds.rows.length) {\r\n                this.data = this.dfs.getData();\r\n\r\n                if (this.mergeCell && this.mergeFields && this.mergeFields.length) {\r\n                    this.mergeCellInfo = this.dgs.getMergeCellInfo3(this.ds.rows, [...this.mergeFields]);\r\n                }\r\n\r\n                this.setPagerTotal();\r\n                this.loadSuccess.emit(this.ds.rows);\r\n            } else {\r\n                this.data = [];\r\n                if (this.clearSelectionsWhenDataIsEmpty) {\r\n                    this.clearAll();\r\n                }\r\n            }\r\n\r\n            if (!this.ds.scrolling) {\r\n                this.updateFooterData();\r\n            }\r\n            // æ§è½ä¼å\r\n            this.cd.detectChanges();\r\n        });\r\n        this.subscriptions.push(dataSubscription);\r\n\r\n        const columnGroupSubscription = this.dfs.columnGroup$.pipe(\r\n            debounceTime(60)\r\n        ).subscribe(cg => {\r\n            if (cg) {\r\n                this.colGroup = cg;\r\n                this.footerWidth = cg.totalWidth;\r\n\r\n                this.cd.detectChanges();\r\n            }\r\n        });\r\n        this.subscriptions.push(columnGroupSubscription);\r\n\r\n        this.subscriptions.push(\r\n            this.dfs.gridSize$.subscribe((cg: any) => {\r\n                if (cg && cg.columnsGroup) {\r\n                    this.colGroup = cg.columnsGroup;\r\n                    this.cd.detectChanges();\r\n                }\r\n            })\r\n        );\r\n\r\n        this.initEditorAndValidator();\r\n\r\n        const currentCellSubscription = this.dfs.currentCell$.subscribe((cell: any) => {\r\n            this.currentCell = cell;\r\n            if (cell && cell.cellRef) {\r\n                cell.cellRef.isEditing = cell.isEditing;\r\n            }\r\n            this.unbindMoveSelectRowEvent();\r\n            this.bindDocumentEditListener();\r\n        });\r\n\r\n\r\n        this.dfs.selectRow$.subscribe((sr: SelectedRow) => {\r\n            if (!this.currentCell) {\r\n                this.bindDocumentMoveSelectRowEvent();\r\n            }\r\n            this.selectedRow = sr;\r\n            // this.cd.detectChanges();\r\n            // this.selectChanged.emit(sr);\r\n        });\r\n\r\n        this.subscriptions.push(currentCellSubscription);\r\n\r\n        DatagridColumnsHelper.gridInstance = this;\r\n\r\n        const filterChangedSubscription = this.dgs.onFilterChanged.subscribe((conditions: any) => {\r\n            // æ´æ°ç¼å­è¿æ»¤æ¡ä»¶\r\n            this.conditions = conditions;\r\n            this.clientFilterChanged = true;\r\n            this.filterData(conditions);\r\n        });\r\n        this.subscriptions.push(filterChangedSubscription);\r\n        // this.initPaginationOptions();\r\n\r\n        const footerDataSubscription = this.dgs.refreshFooterData.subscribe(() => {\r\n            this.updateFooterData();\r\n            // this.cd.detectChanges();\r\n        });\r\n        this.subscriptions.push(footerDataSubscription);\r\n        this.dgs.commonUtils = this.commonUtils;\r\n\r\n\r\n        this.dgs.focusRowChanged.subscribe((e: any) => {\r\n            if (e) {\r\n                this.focusRowIndex = e.rowIndex;\r\n            }\r\n        });\r\n    }\r\n\r\n    setCurrentPagerData($data) {\r\n        this.currentPagerData = $data;\r\n    }\r\n\r\n    writeConsole(msg, type: 'info'|'log'|'warn'|'error' = 'warn') {\r\n        if (this.debugSer) {\r\n            if (this.debugSer[type]) {\r\n                this.debugSer[type](msg);\r\n            } else {\r\n                console[type](msg)\r\n            }\r\n        }\r\n    }\r\n\r\n    private updateFooterData() {\r\n        if ((this.showFooter || this.pagerContentTemplate ) && this.footerDataFrom === 'client' ) {\r\n            this.footerData = of(this.dfs.getFooterData(this.data));\r\n        }\r\n    }\r\n\r\n    //#region Ng Event\r\n\r\n    ngDoCheck() {\r\n        // if (!this.checkValues) {\r\n        //     this.checkValues = [];\r\n        // }\r\n    }\r\n\r\n    ngOnInit() {\r\n\r\n        this.sms = new SelectionModeService(this);\r\n\r\n        this.checkFilterStyle();\r\n\r\n        if (this.useThemes) {\r\n            this._checkSize();\r\n        }\r\n        this.checkOptions();\r\n        this.groupRowPanelPlaceholder = this.localeService.getValue('datagrid.groupRow.tips');\r\n        // this._flatColumns();\r\n        // this.setHeaderHeight();\r\n\r\n        if (this.smartFilterService) {\r\n\r\n            if (this.enableSmartFilter && this.showFilterBar) {\r\n                if (this.smartFilterResult && this.smartFilterResult.controlData && this.smartFilterResult.controlData.length) {\r\n                    this.filterBarHeight = this.smartFilterBarHeight;\r\n                } else {\r\n                    this.filterBarHeight = 0;\r\n                }\r\n            }\r\n\r\n            this.smartFilterService.filterChanged.subscribe((e: any) => {\r\n\r\n                if (!this.smartFilterResult && !e) {\r\n                    return;\r\n                }\r\n\r\n                if (JSON.stringify(this.smartFilterResult) !== JSON.stringify(e)) {\r\n                    this.smartFilterResult = e;\r\n                    this.clientFilterChanged = true;\r\n                    this.filterData(e.conditions);\r\n                    if (!this.smartFilterResult || (this.smartFilterResult.controlData && !this.smartFilterResult.controlData.length)) {\r\n                        this.onFilterBarResize(0);\r\n                    } else {\r\n                        if (!this.filterBarHeight) {\r\n                            this.onFilterBarResize(this.smartFilterBarHeight);\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n\r\n        // åå»ºèªå®ä¹style å®¹å¨\r\n        // \r\n\r\n        this.setHeaderHeight();\r\n        this.setPagerHeight();\r\n        this.initBeforeEvents();\r\n        if (this.fit) {\r\n            this.setGridNewSizeWhenFit();\r\n        }\r\n\r\n        this.initState();\r\n        if (this.el && this.farrisInstances) {\r\n            this.farrisInstances.add(this.el.nativeElement, this);\r\n        }\r\n        if (!this.data || !this.data.length) {\r\n            this.fetchData(1, this.pageSize).subscribe(res => {\r\n                if (!res) {\r\n                    return;\r\n                }\r\n                this.total = res.total;\r\n\r\n                if (res.footer) {\r\n                    this.footerData = res.footer;\r\n                }\r\n\r\n                this.loadData(res.items);\r\n            });\r\n        }\r\n\r\n        this.zone.runOutsideAngular(() => {\r\n            this.render2.addClass(this.dgContainer.nativeElement, this._custom_datagrid_cls);\r\n            this.ro = new ResizeObserver((e) => {\r\n                const target = e[0].target as any;\r\n                if (target.style.display === 'none') {\r\n                    return;\r\n                }\r\n\r\n                const _w = e[0].contentRect.width;\r\n                if (!_w) {\r\n                    return;\r\n                }\r\n                const _h = e[0].contentRect.height;\r\n                const _floowW = Math.floor(_w);\r\n                const _roundW = Math.floor(_w);\r\n                const _floorH = Math.floor(_h);\r\n                const _roundH = Math.round(_h);\r\n\r\n                if ((this.width === _floowW || this.width === _roundW) && (this.height === _floorH || this.height === _roundH)) {\r\n                    this.dgs.restoreScrollbarPosition();\r\n                    return;\r\n                }\r\n\r\n                if (this.resizeTimer) {\r\n                    clearTimeout(this.resizeTimer);\r\n                }\r\n                this.resizeTimer = setTimeout(() => {\r\n                    this.calculateGridSize(this.fit);\r\n                }, 100);\r\n            });\r\n\r\n            this.ro.observe(this.el.nativeElement.parentElement);\r\n\r\n\r\n            document.body.removeEventListener('mousedown', this.documentBodyMouseDown, true);\r\n            document.body.addEventListener('mousedown', this.documentBodyMouseDown = (e) => {\r\n                if (!this.isEditing()) {\r\n                    return;\r\n                }\r\n                const target = e.target as any;\r\n                if (target.closest('td.f-datagrid-cell') ||\r\n                    target.closest('.date-overlay-container') ||\r\n                    target.closest('.time-picker-overlay') ||\r\n                    target.closest('.language-textbox-panel') ||\r\n                    target.closest('.farris-notify') ||\r\n                    target.closest('.comboPanel')) {\r\n                    return;\r\n                }\r\n                this.onDocumentMouseDown(e);\r\n            }, true);\r\n\r\n        });\r\n\r\n        if (this.showFooter) {\r\n            if (this.footerTemplate) {\r\n                const footerDom = this.el.nativeElement.querySelector('.f-datagrid-footer');\r\n                if (footerDom) {\r\n                    this.footerHeight = this.el.nativeElement.querySelector('.f-datagrid-footer').offsetHeight;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (this.fit) {\r\n            if (this.el.nativeElement.parentElement) {\r\n                this.el.nativeElement.parentElement.style.position = 'relative';\r\n            }\r\n            this.calculateGridSize(this.fit);\r\n        }\r\n\r\n\r\n        // æ£æ¥æ¯å¦å¯ç¨ä»¿windowsèµæºç®¡çå¨ä¸­çå¤éæ¨¡å¼\r\n        if (this.selectionMode && this.selectionMode === 'default' && this.multiSelect) {\r\n            this.sms.enableWindowsSelectionMode();\r\n        }\r\n\r\n        this.setCellStyle();\r\n    }\r\n\r\n    ngAfterContentInit() {\r\n        if (this.dgColumns && this.dgColumns.length) {\r\n            this.columns = this.dgColumns.map(dgc => {\r\n                return { ...dgc };\r\n            });\r\n        }\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (changes.data && !changes.data.isFirstChange()) {\r\n            this.dfs.loadData(changes.data.currentValue);\r\n            this.dgs.dataSourceChanged();\r\n        }\r\n\r\n        if (changes.showCheckbox !== undefined && !changes.showCheckbox.isFirstChange()) {\r\n            this.dfs.showCheckbox(changes.showCheckbox.currentValue);\r\n        }\r\n\r\n        if (changes.showLineNumber !== undefined && !changes.showLineNumber.isFirstChange()) {\r\n            this.dfs.showLineNumber(changes.showLineNumber.currentValue);\r\n        }\r\n\r\n        if (changes.multiSelect !== undefined && !changes.multiSelect.isFirstChange()) {\r\n            this.dfs.setMultiSelect(changes.multiSelect.currentValue);\r\n        }\r\n\r\n        if (changes.checkOnSelect !== undefined && !changes.checkOnSelect.isFirstChange()) {\r\n            this.dfs.setCheckOnSelect(changes.checkOnSelect.currentValue);\r\n        }\r\n\r\n        if (changes.selectOnCheck !== undefined && !changes.selectOnCheck.isFirstChange()) {\r\n            this.dfs.setSelectOnCheck(changes.selectOnCheck.currentValue);\r\n        }\r\n\r\n        if (changes.onlySelectSelf !== undefined && !changes.onlySelectSelf.isFirstChange()) {\r\n            this.dfs.updateProperty('onlySelectSelf', changes.onlySelectSelf.currentValue);\r\n        }\r\n\r\n        if (changes.keepSelect !== undefined && !changes.keepSelect.isFirstChange()) {\r\n            this.dfs.updateProperty('keepSelect', changes.keepSelect.currentValue);\r\n        }\r\n\r\n        if (changes.headerWrap !== undefined && !changes.headerWrap.isFirstChange()) {\r\n            setTimeout(() => {\r\n                this.setHeaderHeight();\r\n                this.cd.detectChanges();\r\n                this.dfs.columnResizeEnd();\r\n            });\r\n        }\r\n\r\n        if (changes.nowrap !== undefined && !changes.nowrap.isFirstChange()) {\r\n            this.checkNowrap();\r\n            this.setRowHeight(false);\r\n            this.dgs.cellContentWrapChanged.emit();\r\n            this.dfs.updateProperty('nowrap', changes.nowrap.currentValue);\r\n        }\r\n\r\n        if (changes.multiSort !== undefined && !changes.multiSort.isFirstChange()) {\r\n            this.dfs.updateProperty('multiSort', changes.multiSort.currentValue);\r\n        }\r\n\r\n        if (changes.editable !== undefined && !changes.editable.isFirstChange()) {\r\n            this.dfs.updateProperty('editable', changes.editable.currentValue);\r\n            if (!changes.editable.currentValue) {\r\n                this.endCellEdit();\r\n            }\r\n            this.isSingleClick = null;\r\n\r\n            // if (this.editable) {\r\n            //     this.keepSelect = false;\r\n            // } else {\r\n            //     this.keepSelect = this.dfs._state.keepSelect;\r\n            // }\r\n            this.cd.detectChanges();\r\n        }\r\n\r\n        if (changes.showHeader !== undefined && !changes.showHeader.isFirstChange()) {\r\n            this.dfs.updateProperty('showHeader', changes.showHeader.currentValue);\r\n            this.headerHeightChange();\r\n            this.cd.detectChanges();\r\n        }\r\n\r\n        if (changes.showFilterBar !== undefined && !changes.showFilterBar.isFirstChange()) {\r\n            this.dfs.updateProperty('showFilterBar', changes.showFilterBar.currentValue);\r\n            this.dgs.showGridHeader.emit(this.realHeaderHeight);\r\n            // this.dgs.smartFilterBarExpand.emit();\r\n            let fh = 0;\r\n            if (this.conditions && this.conditions.length) {\r\n                fh = 32;\r\n            }\r\n            this.onFilterBarResize(fh);\r\n        }\r\n\r\n\r\n        if (changes.showFooter !== undefined && !changes.showFooter.isFirstChange()) {\r\n            this.dfs.updateProperty('showFooter', changes.showFooter.currentValue);\r\n            // this.cd.detectChanges();\r\n            this.calculateGridSize(this.fit);\r\n        }\r\n\r\n        if (changes.pagerOnServer !== undefined && !changes.pagerOnServer.isFirstChange()) {\r\n            this.dfs.updateProperty('pagerOnServer', changes.pagerOnServer.currentValue);\r\n            this.pagerOpts = Object.assign(this.pagerOpts, {\r\n                remote: this.pagerOnServer\r\n            });\r\n        }\r\n\r\n        if (changes.pageIndex !== undefined && !changes.pageIndex.isFirstChange()) {\r\n            this.dfs.updateProperty('pageIndex', changes.pageIndex.currentValue);\r\n            this.pagerOpts = Object.assign(this.pagerOpts, {\r\n                currentPage: this.pageIndex\r\n            });\r\n        }\r\n\r\n        if (changes.pageSize !== undefined && !changes.pageSize.isFirstChange()) {\r\n            this.dfs.updateProperty('pageSize', changes.pageSize.currentValue);\r\n            this.pagerOpts = Object.assign(this.pagerOpts, {\r\n                itemsPerPage: this.pageSize\r\n            });\r\n        }\r\n\r\n        if (changes.pageList !== undefined && !changes.pageList.isFirstChange()) {\r\n            this.dfs.updateProperty('pageList', changes.pageList.currentValue);\r\n            this.pagerOpts = Object.assign(this.pagerOpts, {\r\n                pageList: this.pageList\r\n            });\r\n        }\r\n\r\n        if (changes.columns !== undefined && !changes.columns.isFirstChange()) {\r\n            this.columnsChanged();\r\n        }\r\n\r\n        if (changes.sizeType !== undefined && !changes.sizeType.isFirstChange()) {\r\n            this._sizeType = changes.sizeType.currentValue;\r\n            this.setRowHeight(true);\r\n            this.dfs.updateProperty('rowHeight', this.rowHeight);\r\n            this.setFooterHeight();\r\n            this.refresh();\r\n            this.dgs.onRowHeightChange(this.rowHeight);\r\n        }\r\n\r\n        if (changes.rowHeight && !changes.rowHeight.isFirstChange()) {\r\n            this.setRowHeight(false);\r\n        }\r\n\r\n        if (changes.selectValue && !changes.selectValue.isFirstChange()) {\r\n            this.selectRow(this.selectValue, false);\r\n        }\r\n\r\n        if (changes.checkValues && !changes.checkValues.isFirstChange()) {\r\n            const checkIds = this.dfs.differenceBy(changes.checkValues.currentValue || [], changes.checkValues.previousValue || [], (v) => v);\r\n            if (checkIds && checkIds.length) {\r\n                this.checkRows(checkIds, false);\r\n            }\r\n\r\n            const uncheckIds = this.dfs.differenceBy(changes.checkValues.previousValue || [], changes.checkValues.currentValue || [], (v) => v);\r\n            if (uncheckIds && uncheckIds.length) {\r\n                this.unCheckRows(uncheckIds, false);\r\n            }\r\n\r\n            this.zone.runOutsideAngular(() => {\r\n                setTimeout(() => {\r\n                    this.checkValues = this.checkeds.map(r => r.id);\r\n                    this.checkValuesChange.emit(this.checkValues);\r\n                    this.checkedChange.emit(this.checkeds);\r\n\r\n                    this.updateAllCheckboxStatus();\r\n                }, 10);\r\n            });\r\n        }\r\n\r\n        if (changes.showGroupColumn && !changes.showGroupColumn.isFirstChange()) {\r\n            this.toggleVisibleColumn(this.groupField.split(','), changes.showGroupColumn.currentValue);\r\n            this.columnsChanged();\r\n        }\r\n\r\n        if (changes.autoFitColumns && !changes.autoFitColumns.isFirstChange()) {\r\n            this.dfs.updateProperty('autoFitColumns', changes.autoFitColumns.currentValue);\r\n        }\r\n\r\n        if (changes.groupRows && !changes.groupRows.isFirstChange()) {\r\n            this.dfs.updateProperty('groupRows', changes.groupRows.currentValue);\r\n            this.refresh();\r\n        }\r\n\r\n        if (changes.mergeCell && !changes.mergeCell.isFirstChange()) {\r\n            this.refresh();\r\n        }\r\n\r\n        if (changes.mergeFields && !changes.mergeFields.isFirstChange()) {\r\n            this.refresh();\r\n        }\r\n\r\n        if (changes.enableFilterRow && !changes.enableFilterRow.isFirstChange()) {\r\n            this.dfs.updateProperty('enableFilterRow', changes.enableFilterRow.currentValue);\r\n            if (this.showHeader) {\r\n                this.setHeaderHeight();\r\n                this.filterBarHeight = 32;\r\n                this.dgs.toggleFilterRow.emit(this.enableFilterRow);\r\n                this.dgs.showGridHeader.emit(this.realHeaderHeight);\r\n                this.cd.detectChanges();\r\n            }\r\n        }\r\n\r\n        if (changes.enableSmartFilter && !changes.enableSmartFilter.isFirstChange()) {\r\n            this.dfs.updateProperty('enableSmartFilter', changes.enableSmartFilter.currentValue);\r\n        }\r\n\r\n        if (changes.enableDragColumn && !changes.enableDragColumn.isFirstChange()) {\r\n            this.checkDragColumns();\r\n        }\r\n\r\n        if (changes.showRowGroupPanel && !changes.showRowGroupPanel.isFirstChange()) {\r\n            this.dgs.smartFilterBarExpand.emit();\r\n            this.dgs.showGridHeader.emit(this.realHeaderHeight);\r\n        }\r\n\r\n        if (changes.selectionMode && !changes.selectionMode.isFirstChange()) {\r\n            this.sms.toggleMode();\r\n        }\r\n    }\r\n\r\n    private checkFilterStyle() {\r\n        // è¿æ»¤è¡ä¸æºè½è¿æ»¤ åæ¶å¯ç¨æ¶ï¼å°è¿æ»¤è¡ç¦ç¨\r\n        if (this.enableFilterRow && this.enableSmartFilter) {\r\n            this.enableFilterRow = false;\r\n        }\r\n    }\r\n\r\n    private _checkSize() {\r\n        const themesKey = localStorage.getItem('gsp_rtf_themSKey');\r\n        let st: any = 'sm';\r\n        switch (themesKey) {\r\n            case 'default':\r\n                st = 'sm';\r\n                break;\r\n            case 'loose':\r\n                st = 'md';\r\n                break;\r\n        }\r\n\r\n        this.sizeType = st;\r\n    }\r\n\r\n    private checkDragColumns() {\r\n        if (this.isMultiHeader()) {\r\n            this.enableDragColumn = false;\r\n            // this.cd.detectChanges();\r\n        }\r\n    }\r\n\r\n    private checkOptions() {\r\n\r\n        this.gridSize = { width: this.width + 'px', height: this.height + 'px' };\r\n\r\n        if (!this.id) {\r\n            this.id = 'FarrisDataGrid' + Utils.uuid().replace(/-/g, '').substr(0, 10);\r\n            if (this.useControlPanel) {\r\n                this.useControlPanel = false;\r\n                this.writeConsole('å¯ç¨åéç½®å±æ§ï¼æªè®¾ç½®IDï¼æ­¤åè½å°ç¦ç¨ã');\r\n            }\r\n            this._custom_datagrid_cls = this.id;\r\n        } else {\r\n            this.styleSheetId = this.id + '_' + Utils.uuid().replace(/-/g, '').substr(0, 10);\r\n            this._custom_datagrid_cls = this.styleSheetId;\r\n        }\r\n        if (this.settingService && this.useControlPanel) {\r\n            this.settingService.registerGridInstance(this);\r\n        }\r\n\r\n        this.dgs.createStyleElement(this.styleSheetId);\r\n\r\n        if (!this.idField) {\r\n            throw new Error('The Datagrid\\'s idField can\\'t be Null. ');\r\n        }\r\n        this.checkNowrap();\r\n        this.checkSortInfo();\r\n        this.checkMergeCell();\r\n        this.setCheckboxBehavior();\r\n        this.initPaginationOptions();\r\n        if (!this.columns) {\r\n            this.columns = this.fields;\r\n        }\r\n\r\n        this.checkGroupHeaderColumns();\r\n\r\n        // TFS: 356956\r\n        this.checkGroupRowSetting();\r\n        this.checkColumnsType();\r\n\r\n        this.checkDragColumns();\r\n\r\n        const _defaultSetting = () => {\r\n            this._flatColumns();\r\n            // this.setHeaderHeight();\r\n            this.setRowHeight();\r\n        };\r\n\r\n\r\n        this.dfs.setinitialOptions({\r\n            columns: this.columns,\r\n            groupField: this.groupField,\r\n            sortName: this.sortName,\r\n            sortOrder: this.sortOrder\r\n        });\r\n\r\n        // å è½½ç¨æ·ä¸ªæ§åè®¾ç½® --ã åæ¾ç¤ºä¸åæåº\r\n        if (this.settingService && this.useControlPanel) {\r\n\r\n            const settings$ = this.settingService.getSettings(this.id);\r\n            if (!settings$) {\r\n                _defaultSetting();\r\n                return;\r\n            }\r\n            settings$.subscribe((sets) => {\r\n                if (sets) {\r\n                    this.userProfileSetting(sets);\r\n                    this.setRowHeight(false);\r\n                }\r\n\r\n                if (this.data && this.data.length) {\r\n                    this.dfs.updateProperty('data', this.data);\r\n                }\r\n\r\n                this.columnsChanged(this.groupRows && (this.data && !!this.data.length));\r\n            }, (err) => {\r\n                _defaultSetting();\r\n                this.writeConsole(err, 'error');\r\n            });\r\n        } else {\r\n            _defaultSetting();\r\n        }\r\n    }\r\n\r\n\r\n    refreshSelectedData() {\r\n        if (this.selectedRow && this.selectedRow.id) {\r\n            if (this.data && this.data.length) {\r\n                const rd = this.data.find(d => d[this.idField] === this.selectedRow.id);\r\n                this.selectedRow.data = rd;\r\n            } else {\r\n                this.selectedRow = null;\r\n            }\r\n        }\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.unsubscribes();\r\n\r\n        if (this.ro) {\r\n            if (this.el.nativeElement.parentElement) {\r\n                this.ro.unobserve(this.el.nativeElement.parentElement);\r\n            }\r\n            this.ro.disconnect();\r\n        }\r\n\r\n        if (this.documentRowKeydownHandler) {\r\n            this.documentRowKeydownHandler();\r\n        }\r\n\r\n        this.currentCell = null;\r\n        this.clientFilterService = null;\r\n\r\n        this.cleanDom();\r\n\r\n        // ç§»é¤å¨æçstyle\r\n        this.dgs.removeStyleSheet();\r\n\r\n        if (this.settingService && this.settingService.destroy) {\r\n            this.settingService.destroy(this.id);\r\n        }\r\n\r\n        if (this.sms) {\r\n            this.sms.destroy();\r\n            this.sms = null;\r\n        }\r\n\r\n        document.body.removeEventListener('mousedown', this.documentBodyMouseDown, true);\r\n\r\n        if (this.farrisInstances) {\r\n            this.farrisInstances.destroy(this.el.nativeElement);\r\n        }\r\n        this._selectedRow = null;\r\n        this.editors = {};\r\n        DatagridColumnsHelper.gridInstance = null;\r\n        this.unbindMoveSelectRowEvent();\r\n        this.unbindDocumentEditListener();\r\n    }\r\n\r\n\r\n    @HostListener('click', ['$event'])\r\n    onClick(event: MouseEvent): void {\r\n        if (this.showSelectedList && this.dgPager) {\r\n            this.dgPager.closeSelectedList();\r\n        }\r\n\r\n        if (this.pending) {\r\n            return;\r\n        }\r\n\r\n        const target = event.target as any;\r\n        if (target.nodeName === 'TEXTAREA' || target.nodeName === 'INPUT') {\r\n            event.stopPropagation();\r\n            return;\r\n        }\r\n        if (this.currentCell && this.currentCell.editor && this.currentCell.editor._editorClickEvent) {\r\n            event.stopPropagation();\r\n            return;\r\n        }\r\n\r\n        /*\r\n        this.endCellEdit(event);\r\n        this.dfs.cancelSelectCell();\r\n        */\r\n        if (this.stopPropagation) {\r\n            event.stopPropagation();\r\n            return;\r\n        }\r\n    }\r\n\r\n    private initPaginationOptions() {\r\n        this.pagerOpts = {\r\n            id: this.id ? this.id + '-pager_' + Utils.uuid() : 'farris-datagrid-pager_' + Utils.uuid(),\r\n            itemsPerPage: this.pagination ? this.pageSize : this.total,\r\n            currentPage: this.pageIndex,\r\n            totalItems: this.total,\r\n            pageList: this.pageList,\r\n            remote: this.pagerOnServer\r\n        };\r\n    }\r\n\r\n    private updatePagerOptions() {\r\n        this.pagerOpts = Object.assign(this.pagerOpts, {\r\n            itemsPerPage: this.pageSize,\r\n            currentPage: this.pageIndex,\r\n            totalItems: this.total\r\n        });\r\n    }\r\n\r\n    private setPagerTotal() {\r\n        const _total = this.data.length;\r\n        if (this.pagination && this.total === 0 && this.virtualized) {\r\n            this.pagerOpts.totalItems = _total;\r\n        } else {\r\n            if (!this.pagination) {\r\n                this.pagerOpts.itemsPerPage = _total;\r\n            }\r\n        }\r\n    }\r\n\r\n    private setFooterHeight(rows?: []) {\r\n        if (this.showFooter && !this.footerTemplate) {\r\n            rows = rows || this._footerData['value'];\r\n            this.footerHeight = rows.length * this.rowHeight;\r\n        }\r\n    }\r\n\r\n    customStyleKey() {\r\n        return `.${this._custom_datagrid_cls}`;\r\n    }\r\n\r\n    private setRowHeight(useSizeType = false) {\r\n        const _rowHeight = SIZE_TYPE[this._sizeType].row;\r\n        const _rh = 29;\r\n        if (useSizeType) {\r\n            this.rowHeight = _rowHeight;\r\n        } else {\r\n            this.rowHeight = _rowHeight > this.rowHeight ? _rowHeight : this.rowHeight;\r\n        }\r\n\r\n        const key1 = `${this.customStyleKey()}.f-datagrid-body-row, ${this.customStyleKey()} .f-datagrid-cell`;\r\n        const key2 = `${this.customStyleKey()} .f-datagrid-cell-content`;\r\n\r\n        this.dgs.removeCssRule(key1);\r\n        this.dgs.removeCssRule(key2);\r\n\r\n        if (this.rowHeight !== _rh && this.nowrap) {\r\n            const rowHeightCSS = [\r\n                `${key1} { height: ${this.rowHeight}px }`,\r\n                `${key2} { height: ${this.rowHeight}px; line-height: ${this.rowHeight}px }`\r\n            ];\r\n\r\n            this.dgs.appendCssRules(rowHeightCSS);\r\n        }\r\n    }\r\n\r\n    initSelectOrChecked() {\r\n        const _data = this.dfs.getCurrentPageData();\r\n        if (!this.enableMorePageSelect && this.multiSelect) {\r\n            // this.clearAll();\r\n            if (this.checkeds && this.checkeds.length) {\r\n                this.checkeds.forEach(r => {\r\n                    if (!_data.find(n => n[this.idField] == r.id)) {\r\n                        this.unCheckRow(r.id, false);\r\n                    }\r\n                });\r\n            } else {\r\n                this.clearCheckeds();\r\n            }\r\n        }\r\n\r\n        if (this.selectValue) {\r\n            if (_data.find(n => n[this.idField] == this.selectValue)) {\r\n                this.selectRow(this.selectValue, false);\r\n                this.refreshSelectedData();\r\n            }\r\n        }\r\n\r\n        if (this.multiSelect) {\r\n            if (this.checkValues && this.checkValues.length) {\r\n                const chkids = this.checkeds.map(r => r.id);\r\n                const diffIds = this.dfs.difference(chkids, this.checkValues);\r\n\r\n                if (diffIds.length) {\r\n                    this.checkRows(diffIds, false);\r\n                } else {\r\n                    this.checkValues = [];\r\n                }\r\n            } else {\r\n                this.checkValues = [];\r\n            }\r\n\r\n            this.checkValues = this.checkeds.map(r => r.id);\r\n\r\n            if (!this._isResized || this.virtualized) {\r\n                this.checkValuesChange.emit(this.checkValues);\r\n                this.checkedChange.emit(this.checkeds);\r\n            }\r\n            this.updateAllCheckboxStatus(_data);\r\n        }\r\n    }\r\n\r\n    private updateAllCheckboxStatus(_data?: any) {\r\n        if (!_data) {\r\n            _data = this.dfs.getCurrentPageData();\r\n        }\r\n\r\n        let checkAllStatus = 0;\r\n        if (this.showAllCheckbox) {\r\n            const allDataIDs = _data.map(r => r[this.idField]);\r\n            const newCheckValues = allDataIDs.filter(n => this.checkValues.includes(n));\r\n\r\n            if (newCheckValues && newCheckValues.length) {\r\n                const isSame = !this.dfs.difference(allDataIDs, this.checkValues).length;\r\n                if (!this.checkValues || !this.checkValues.length) {\r\n                    // æ²¡æéä¸­çæ°æ®\r\n                    checkAllStatus = 0;\r\n\r\n                } else if (isSame) { // this.checkValues.length === this.data.length ||\r\n                    // å¨é¨éä¸­\r\n                    checkAllStatus = 1;\r\n                } else if (!isSame) { // this.checkValues.length !== this.data.length &&\r\n                    // æéä¸­çæ°æ®ï¼ä½ä¸æ¯å¨é¨éä¸­\r\n                    checkAllStatus = 2;\r\n                }\r\n            }\r\n        }\r\n\r\n        this.dgs.changeCheckAllStatus.emit(checkAllStatus);\r\n    }\r\n\r\n    // å½åéå¹¶æ¾ç¤ºå¤éæ¡æ¶ï¼é»è®¤å° checkOnSelect, selectOnCheck è®¾ç½®ä¸º true;\r\n    private setCheckboxBehavior() {\r\n        if (!this.multiSelect && this.showCheckbox) {\r\n            // TFS: 380899\r\n            // this.checkOnSelect = true;\r\n            // this.selectOnCheck = true;\r\n        }\r\n    }\r\n\r\n    private _flatColumns() {\r\n        this.flatColumns = flatten<DataColumn>(this.columns).filter((col: DataColumn) => !col.colspan && this.columnIsVisible(col));\r\n        if (this.isMultiHeader() && this.fast) {\r\n            this.flatColumns = this.dfs.getGroupColumns(this.columns[0]);\r\n        }\r\n    }\r\n\r\n    columnIsVisible(col: DataColumn) {\r\n        return DatagridColumnsHelper.columnIsVisible(col, this);\r\n    }\r\n\r\n    // æ·»å åè®¾ç½®\r\n    private addControlCol() {\r\n        if (this.useControlPanel) {\r\n            const controlCol = this.columns[0].find(n => n.field === this.ControlPanelFeild);\r\n            if (!controlCol) {\r\n                const cp = { field: this.ControlPanelFeild, width: 24, rowspan: this.columns.length, fixed: 'right', visible: true };\r\n\r\n                // 2021-05-24 å¯ç¨è¿æ»¤è¡ååºé\r\n                // if (this.enableFilterRow) {\r\n                //     cp.rowspan += 1;\r\n                // }\r\n\r\n                this.columns[0].push(cp);\r\n            } else {\r\n                controlCol.visible = true;\r\n            }\r\n        }\r\n    }\r\n\r\n    private checkGroupHeaderColumns() {\r\n        if (this.isMultiHeader()) {\r\n            const allCols = flatten<DataColumn>(this.columns);\r\n            DatagridColumnsHelper.checkGroupHeaderColumnVisible(allCols);\r\n        }\r\n    }\r\n\r\n    // æ£æ¥åéå: [] -> [[]]\r\n\r\n    private correctColumns(values) {\r\n        if (values && values.length && !Array.isArray(values[0])) {\r\n            return [values];\r\n        } else {\r\n            return values || [];\r\n        }\r\n    }\r\n\r\n    private checkColumnsType() {\r\n        if (this.columns && this.columns.length) {\r\n            // if (!Array.isArray(this.columns[0])) {\r\n            //     this.columns = [ this.columns ];\r\n            // }\r\n\r\n            this.addControlCol();\r\n\r\n            this.columns.forEach((cols, columnsIndex) => {\r\n                cols.forEach((col: DataColumn, index) => {\r\n                    if (!col.field) {\r\n                        col.field = `farris-datagrid-column_${columnsIndex}_${index}`;\r\n                    }\r\n\r\n                    if (!col.valign) {\r\n                        col.valign = 'middle';\r\n                    }\r\n\r\n                    if (col.width === undefined || col.width === null) {\r\n                        col.width = 100;\r\n                    } else {\r\n                        if (typeof col.width === 'string') {\r\n                            col.width = parseInt(col.width, 10);\r\n                        }\r\n                    }\r\n\r\n                    // è®°å½åå§å®½åº¦\r\n                    if (!col.originalWidth) {\r\n                        col.originalWidth = col.width;\r\n                    }\r\n\r\n                    if (col.formatter && typeof col.formatter !== 'function' && Object.keys(col.formatter).length === 0) {\r\n                        col.formatter = null;\r\n                    }\r\n\r\n                    if (!this.showGroupColumn && this.groupRows) {\r\n                        this.toggleVisibleColumn(this.groupField.split(','), false);\r\n                    }\r\n                    // è¿æ»¤è¡æ£æ¥\r\n                    if (col.filter) {\r\n                        if (typeof col.filter === 'boolean') {\r\n                            if (col.field) {\r\n                                col.filter = this.clientFilterService.createColumnFilterOptions(col);\r\n                            } else {\r\n                                col.filter = false;\r\n                            }\r\n                        } else {\r\n                            if (!col.filter.options || !Object.keys(col.filter.options).length) {\r\n                                switch (col.filter.type) {\r\n                                    case ColumnFilterType.enum:\r\n                                        col.filter.options = col.formatter['options'];\r\n                                        break;\r\n                                    case ColumnFilterType.date:\r\n                                        col.filter.options = { dateFormat: 'yyyy-MM-dd', returnFormat: 'yyyy-MM-dd' };\r\n                                        break;\r\n                                    case ColumnFilterType.datetime:\r\n                                        col.filter.options = { dateFormat: 'yyyy-MM-dd HH:mm:ss', returnFormat: 'yyyy-MM-dd HH:mm:ss' };\r\n                                        break;\r\n                                }\r\n                            }\r\n\r\n                        }\r\n                    }\r\n\r\n                    // å¼å®¹ hidden 2021-05-31\r\n                    if (col['hidden'] !== undefined && col.visible === undefined) {\r\n                        if (typeof col['hidden'] === 'boolean') {\r\n                            col.visible = !col['hidden'];\r\n                        } else {\r\n                            if (typeof col['hidden'] === 'function') {\r\n                                col.visible = () => {\r\n                                    const r = col['hidden'].bind(this);\r\n                                    return !r;\r\n                                };\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n            });\r\n        }\r\n    }\r\n\r\n    private checkGroupRowSetting() {\r\n        // å¦æå¯ç¨åç»è¡ï¼ä½æªè®¾ç½®åç»å­æ®µæ¶ï¼å°å³é­åç»è¡åè½\r\n        // if (this.groupRows) {\r\n        //     if (!this.groupField) {\r\n        //         this.groupRows = false;\r\n        //     }\r\n        // }\r\n    }\r\n\r\n    private checkMergeCell() {\r\n        if (this.mergeCell) {\r\n            if (!this.mergeFields || !this.mergeFields.length) {\r\n                this.mergeCell = false;\r\n            } else {\r\n                this.virtualized = false;\r\n                this.virtualizedAsyncLoad = false;\r\n            }\r\n        }\r\n    }\r\n\r\n    private checkSortInfo() {\r\n        if (this.sortName) {\r\n            if (!this.sortOrder) {\r\n                this.sortOrder = this.sortName.split(',').map(() => 'asc').join(',');\r\n            }\r\n        }\r\n    }\r\n\r\n    private checkNowrap() {\r\n        // å¯ç¨æè¡åï¼èæå è½½ç¹æ§å¤±æ\r\n        if (!this.nowrap) {\r\n            this.virtualized = false;\r\n        }\r\n    }\r\n\r\n    setHeaderHeight() {\r\n        this.realHeaderHeight = 0;\r\n        if (this.showHeader) {\r\n            if (!this.headerWrap) {\r\n                this.realHeaderHeight = this.columns.length * this.headerHeight;\r\n            } else {\r\n                const gridHeaderEl = this.el.nativeElement.querySelector('.f-datagrid-header');\r\n                if (gridHeaderEl) {\r\n                    // const tables = gridHeaderEl.querySelectorAll('table');\r\n                    const trs = gridHeaderEl.querySelectorAll('table tr:not(.f-datagrid-filter-row)');\r\n                    trs.forEach(n => {\r\n                        n.style.height = 'auto';\r\n                        Array.from(n.children).forEach((a: any) => a.style.height = 'auto');\r\n                    });\r\n\r\n                    const h = Math.max(...Array.from(trs).map((n: any) => n.clientHeight));\r\n                    this.realHeaderHeight = h;\r\n                }\r\n            }\r\n\r\n            if (this.enableFilterRow) {\r\n                this.realHeaderHeight += this.filterRowHeight;\r\n            }\r\n        }\r\n        return this.realHeaderHeight;\r\n    }\r\n\r\n    // åéååå\r\n    columnsChanged(reloadData = true, useColumnSettingWidth = null) {\r\n        const _useColumnSettingWidth = useColumnSettingWidth === null ? this.fitColumns : useColumnSettingWidth;\r\n        this.checkColumnsType();\r\n\r\n        this._flatColumns();\r\n        this.headerHeightChange();\r\n        this.dfs.updateProperty('flatColumns', this.flatColumns);\r\n        this.dfs.updateColumns(this.columns, _useColumnSettingWidth, true);\r\n        // this.colGroup = this.dfs.getState().columnsGroup;\r\n        // å¨æååè®¡è¡\r\n        this.updateFooterData();\r\n        if (reloadData) {\r\n            this.refresh();\r\n        }\r\n\r\n        this.setCellStyle();\r\n\r\n        this.dgs.columnsChanged.emit({ scrollToLeft: reloadData });\r\n    }\r\n\r\n    // åå¤´åå\r\n    private headerHeightChange() {\r\n        this.setHeaderHeight();\r\n        this.dgs.showGridHeader.emit(this.realHeaderHeight);\r\n    }\r\n\r\n    /** å¤æ­æ¯å¦å¨å¼¹åºççªå£ä¸­ï¼è¿åundefind è¯´ææ²¡æå¨å¼¹åºççªå£ï¼å¦åè§ä¸ºå½ååè¡¨å¨å¼¹åºçªå£ä½¿ç¨ */\r\n    inDialog() {\r\n        return this.el.nativeElement.closest('.modal-body');\r\n    }\r\n\r\n    //#endregion\r\n\r\n    //#region Init\r\n    /** åå§ç¼è¾å¨ä¸éªè¯å¨ */\r\n    private initEditorAndValidator() {\r\n        const Editors = this.inject.get<any[]>(GRID_EDITORS, []);\r\n\r\n        if (Editors.length) {\r\n            Editors.forEach(ed => {\r\n                this.editors[ed.name] = ed.value;\r\n            });\r\n        }\r\n        const _validators = this.inject.get<any[]>(GRID_VALIDATORS, []);\r\n        if (_validators && _validators.length) {\r\n            // _validators.forEach(vr => {\r\n            //     this.validators[vr.name] = vr.value;\r\n            // });\r\n            this.validators = _validators;\r\n        }\r\n    }\r\n\r\n    setPagerHeight() {\r\n        if (!this.useHtmlTable) {\r\n            if (!this.pagination) {\r\n                this.pagerHeight = 0;\r\n            } else {\r\n                this.pagerHeight = this.dgPager && this.dgPager.outerHeight || 40;\r\n            }\r\n        }\r\n    }\r\n\r\n    private initState() {\r\n        this.data = this.data || [];\r\n\r\n        let sta = {};\r\n        Object.keys(this).forEach((k: string) => {\r\n            if (!IgnoreProperties.includes(k)) {\r\n                sta[k] = this[k];\r\n            }\r\n        });\r\n\r\n        this.dfs.initState({ ...sta, fitColumns: this.fitColumns, fit: this.fit, groupField: this._groupField });\r\n        sta = null;\r\n    }\r\n\r\n    private setFitColumns(fitColumns = true) {\r\n        if (this.columns) {\r\n            this.dfs.fitColumns(fitColumns);\r\n        }\r\n    }\r\n\r\n    private setGridNewSizeWhenFit() {\r\n        const parent = this.el.nativeElement.parentElement;\r\n        if (parent) {\r\n            const cmpRect = parent.getBoundingClientRect();\r\n\r\n            const padding = this.getElementPadding(parent);\r\n            const border = this.getElementBorderWidth(parent);\r\n\r\n            this.width = Math.floor(cmpRect.width - border.left - border.right - padding.left - padding.right);\r\n            this.height = Math.floor(cmpRect.height - border.top - border.bottom - padding.top - padding.bottom);\r\n\r\n            if (!this.height) {\r\n                this.height = this.dfs.getState().height || 300;\r\n            }\r\n\r\n            if (!this.width) {\r\n                this.width = this.dfs.getState().width || 800;\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    calculateGridSize(fit = true) {\r\n        if (this.useHtmlTable) {\r\n            return;\r\n        }\r\n        if (fit) {\r\n            this.setGridNewSizeWhenFit();\r\n            if (this.width && this.height) {\r\n                this._isResized = true;\r\n                this.gridSize = { width: this.width + 'px', height: this.height + 'px' };\r\n                this.dfs.resize({ width: this.width, height: this.height });\r\n                this._isResized = false;\r\n                if (!this.cd['destroyed']) {\r\n                    this.cd.detectChanges();\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    private initBeforeEvents() {\r\n        if (!this.beforeSelect) {\r\n            this.beforeSelect = () => of(true);\r\n        }\r\n        if (!this.beforeUnselect) {\r\n            this.beforeUnselect = () => of(true);\r\n        }\r\n\r\n        if (!this.beforeCheck) {\r\n            this.beforeCheck = () => of(true);\r\n        }\r\n\r\n        if (!this.beforeUncheck) {\r\n            this.beforeUncheck = () => of(true);\r\n        }\r\n\r\n        if (!this.beforeSortColumn) {\r\n            this.beforeSortColumn = () => of(true);\r\n        }\r\n\r\n        if (!this.beforeEdit) {\r\n            this.beforeEdit = () => of(true);\r\n        }\r\n\r\n        if (!this.afterEdit) {\r\n            this.afterEdit = () => of(true);\r\n        }\r\n    }\r\n\r\n    trackByRows = (index: number, row: any) => {\r\n        if (row) {\r\n            return row[this.idField] || index;\r\n        }\r\n        return index;\r\n    }\r\n\r\n    //#endregion\r\n\r\n    //#region å¿«æ·é®\r\n\r\n    private unbindMoveSelectRowEvent() {\r\n        if (this.documentRowKeydownHandler) {\r\n            this.documentRowKeydownHandler();\r\n            this.documentRowKeydownHandler = null;\r\n        }\r\n    }\r\n\r\n\r\n    private bindDocumentMoveSelectRowEvent() {\r\n        this.unbindMoveSelectRowEvent();\r\n        this.unbindDocumentEditListener();\r\n        this.documentRowKeydownHandler = this.render2.listen(document, 'keydown', (e: KeyboardEvent) => {\r\n            // e.preventDefault();\r\n            if (!this.isActived()) {\r\n                return;\r\n            }\r\n\r\n            // has loading\r\n            if (document.querySelectorAll('farris-loading').length) {\r\n                return;\r\n            }\r\n\r\n            if (e.target) {\r\n                const targetName = (e.target as any).nodeName;\r\n                if (this.ignoreTarget.indexOf(targetName) > -1) {\r\n                    return;\r\n                }\r\n            }\r\n\r\n            if (e.keyCode === 40 || e.keyCode === 38) {\r\n                e.preventDefault();\r\n            }\r\n\r\n            switch (e.keyCode) {\r\n                case 40:\r\n                    this.selectNextRow();\r\n                    break;\r\n                case 38:\r\n                    this.selectPrevRow();\r\n                    break;\r\n            }\r\n        });\r\n    }\r\n\r\n    private bindEditListenerInModal() {\r\n        // å¼¹çªä¸­äºä»¶å¤ç\r\n        if (Utils.hasDialogOpen()) {\r\n            const modalElement = this.inDialog();\r\n            if (modalElement) {\r\n                const _fmodal = modalElement.closest('.farris-modal');\r\n                if (_fmodal) {\r\n                    this.modalClickEvent = this.render2.listen(_fmodal, 'click', () => {\r\n                        this.endEditing();\r\n                        this.currentCell = null;\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    onDocumentMouseDown = (event) => {\r\n        if (this.pending) {\r\n            return false;\r\n        }\r\n\r\n        if (!event.target.closest('.f-datagrid')) {\r\n            this.activeDataGrid(false);\r\n        } else {\r\n            if (event.target.closest('.f-datagrid').id === this.id) {\r\n                return;\r\n            }\r\n        }\r\n\r\n        // if (this.editMode === 'row') {\r\n        //     this.endEditing();\r\n        // }\r\n\r\n        if (this.currentCell) {\r\n            if (Utils.hasDialogOpen()) {\r\n                const indlg = this.inDialog();\r\n                const currentTargetInDialog = event.target.closest('.modal-body');\r\n                if (indlg && currentTargetInDialog) {\r\n                    if (indlg != currentTargetInDialog) {\r\n                        return;\r\n                    }\r\n                } else {\r\n                    return;\r\n                }\r\n            }\r\n\r\n            if (this.currentCell.isEditing) {\r\n                // this.dfs.endEditCell();\r\n                this.currentCell.cellElement.closeEdit().subscribe(f => {\r\n                    if (f) {\r\n                        if (this.currentCell && this.currentCell.cellElement) {\r\n                            DomHandler.removeClass(this.currentCell.cellElement, CELL_SELECTED_CLS);\r\n                            DomHandler.removeClass(this.currentCell.cellElement, CELL_EDITING_CLS);\r\n                        }\r\n                        this.dfs.cancelSelectCell();\r\n                        this.unbindDocumentEditListener();\r\n                        this.currentCell = null;\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    private bindDocumentEditListener() {\r\n        this.unbindDocumentEditListener();\r\n /*\r\n        if (!this.documentCellClickHandler) {\r\n            this.bindEditListenerInModal();\r\n            this.documentCellClickHandler = (event) => {\r\n                if (this.pending) {\r\n                    return false;\r\n                }\r\n                if (this.currentCell) {\r\n                    if (Utils.hasDialogOpen()) {\r\n                        const indlg = this.inDialog();\r\n                        const currentTargetInDialog = event.target.closest('.modal-body');\r\n                        if (indlg && currentTargetInDialog) {\r\n                            if (indlg != currentTargetInDialog) {\r\n                                return;\r\n                            }\r\n                        } else {\r\n                            return;\r\n                        }\r\n                    }\r\n                    // DomHandler.removeClass(this.currentCell.cellElement, CELL_SELECTED_CLS);\r\n\r\n                    // if (this.currentCell.isEditing) {\r\n                    //     // this.dfs.endEditCell();\r\n                    //     this.currentCell.cellElement.closeEdit();\r\n                    // }\r\n                    // this.dfs.cancelSelectCell();\r\n                    // this.unbindDocumentEditListener();\r\n\r\n                    if (this.currentCell.isEditing) {\r\n                        // this.dfs.endEditCell();\r\n                        this.currentCell.cellElement.closeEdit().subscribe(f => {\r\n                            if (f) {\r\n                                DomHandler.removeClass(this.currentCell.cellElement, CELL_SELECTED_CLS);\r\n                                DomHandler.removeClass(this.currentCell.cellElement, CELL_EDITING_CLS);\r\n                                this.dfs.cancelSelectCell();\r\n                                this.unbindDocumentEditListener();\r\n                                this.currentCell = null;\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n            };\r\n            this.docuemntCellClickEvents = this.render2.listen(document, 'click', this.documentCellClickHandler);\r\n        }\r\n*/\r\n        if (!this.documentCellKeydownHandler) {\r\n            this.documentCellKeydownHandler = (event) => {\r\n                if (!event.target.closest('.f-datagrid') && event.target.nodeName !== 'BODY') {\r\n                    return;\r\n                }\r\n\r\n                if (this.isActived()) {\r\n                    this.onKeyDownEvent(event);\r\n                }\r\n            };\r\n\r\n            this.documentCellKeydownEvents = this.render2.listen(document, 'keydown', this.documentCellKeydownHandler);\r\n        }\r\n    }\r\n\r\n    private unbindDocumentEditListener() {\r\n        if (this.documentCellClickHandler) {\r\n            this.docuemntCellClickEvents();\r\n            this.documentCellClickHandler = null;\r\n        }\r\n\r\n        if (this.documentCellKeydownHandler) {\r\n            this.documentCellKeydownEvents();\r\n            this.documentCellKeydownHandler = null;\r\n        }\r\n\r\n        if (this.modalClickEvent) {\r\n            this.modalClickEvent();\r\n            this.modalClickEvent = null;\r\n        }\r\n    }\r\n\r\n    private onKeyDownEvent(e: any) {\r\n        // if (e.ctrlKey || e.shiftKey || !this.editable) {\r\n        //     return;\r\n        // }\r\n\r\n        // if (!e.target.closest('.f-datagrid')) {\r\n        //     return;\r\n        // }\r\n\r\n        if (this.disabled) {\r\n            return;\r\n        }\r\n        const keyCode = e.keyCode;\r\n\r\n\r\n        if (this.currentCell && !this.currentCell.isEditing) {\r\n            if ([13, 40, 37, 38, 39, 9].indexOf(keyCode) > -1) {\r\n                e.preventDefault();\r\n            }\r\n            switch (keyCode) {\r\n                case 32: // ç©ºæ ¼\r\n                    if (this.currentCell && this.currentCell.column.onSpaceHandler) {\r\n                        e.stopPropagation();\r\n                        this.currentCell.column.onSpaceHandler({ grid: this, cell: this.currentCell, event: e });\r\n                    }\r\n                    break;\r\n                case 13: // Enter\r\n                    if (this.currentCell) {\r\n                        const fn = this.currentCell.cellElement['editCell'];\r\n                        if (fn) {\r\n                            fn.apply(this.currentCell.cellElement);\r\n                        } else {\r\n                            if (this.currentCell.column.onEnterHandler) {\r\n                                e.stopPropagation();\r\n                                this.currentCell.column.onEnterHandler({ grid: this, cell: this.currentCell, event: e });\r\n                            }\r\n                        }\r\n                    }\r\n                    break;\r\n                case 40: // â\r\n                    this.selectNextCell('down', e);\r\n                    break;\r\n                case 38: // â\r\n                    this.selectNextCell('up', e);\r\n                    break;\r\n                case 39: // â\r\n                    this.selectNextCell('right', e);\r\n                    break;\r\n                case 37: // â\r\n                    this.selectNextCell('left', e);\r\n                    break;\r\n                case 9: // Tab\r\n                    if (e.shiftKey) {\r\n                        this.selectNextCell('left', e);\r\n                    } else {\r\n                        this.selectNextCell('right', e);\r\n                    }\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    private unsubscribes() {\r\n        this.subscriptions.forEach(ss => {\r\n            if (ss) {\r\n                ss.unsubscribe();\r\n                ss = null;\r\n            }\r\n        });\r\n\r\n        this.subscriptions = [];\r\n\r\n        if (this.docuemntCellClickEvents) {\r\n            this.docuemntCellClickEvents();\r\n        }\r\n    }\r\n\r\n    //#endregion\r\n\r\n    //#region Editing\r\n\r\n    isRowEditing() {\r\n        if (!this.selectedRow || this.selectedRow.index === -1) {\r\n            return false;\r\n        } else {\r\n            if (this.editMode === 'row') {\r\n                return this.selectedRow.editors && this.selectedRow.editors.length;\r\n            } else {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n\r\n    isCellEditing() {\r\n        if (this.currentCell && this.editMode === 'cell') {\r\n            if (!this.currentCell.editor && !this.currentCell.column.editorTemplate) {\r\n                this.currentCell.isEditing = false;\r\n            }\r\n            return this.currentCell.isEditing;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    isEditing() {\r\n        if (this.editMode === 'row') {\r\n            return this.isRowEditing();\r\n        } else {\r\n            return this.isCellEditing();\r\n        }\r\n    }\r\n\r\n    endEditing() {\r\n        if (this.editMode === 'row') {\r\n            this.endRowEdit();\r\n        } else if (this.editMode === 'cell') {\r\n            this.endCellEdit();\r\n        }\r\n    }\r\n\r\n    getEditors() {\r\n        return this.selectedRow.editors;\r\n    }\r\n\r\n    editCell(rowId: any, field: string) {\r\n        this.activeDataGrid();\r\n\r\n        const rowIndex = this.dfs.findRowIndex(rowId);\r\n        if (rowIndex > -1) {\r\n            this.endCellEdit();\r\n            const trId = TR_PREFIX + rowId;\r\n            const trDom = this.el.nativeElement.querySelector('#' + trId);\r\n\r\n            let tdDom = null;\r\n            if (trDom) {\r\n                tdDom = trDom.querySelector(`[field=\"${field}\"]`);\r\n            }\r\n            const col = this.getColumn(field);\r\n            if (!tdDom && col.fixed) {\r\n                if (col.fixed === 'left') {\r\n                    const trDomL = this.el.nativeElement.querySelector('#' + trId + '_fixedleft');\r\n                    tdDom = trDomL && trDomL.querySelector(`[field=\"${field}\"]`);\r\n                } else if (col.fixed === 'right') {\r\n                    const trDomR = this.el.nativeElement.querySelector('#' + trId + '_fixedright');\r\n                    tdDom = trDomR && trDomR.querySelector(`[field=\"${field}\"]`);\r\n                }\r\n            }\r\n\r\n            if (tdDom && tdDom['editCell']) {\r\n                this.currentCell = null;\r\n                tdDom.editCell();\r\n            }\r\n        }\r\n    }\r\n\r\n    endCellEdit(event?: any) {\r\n        // document.body.click();\r\n        if (this.currentCell) {\r\n            DomHandler.removeClass(this.currentCell.cellElement, CELL_SELECTED_CLS);\r\n            if (this.currentCell.isEditing) {\r\n                // this.dfs.endEditCell();\r\n                if (this.currentCell.cellEditorRef) {\r\n                    this.currentCell.cellEditorRef.hideCover();\r\n                }\r\n\r\n                const stopEdit = this.currentCell.cellElement.closeEdit();\r\n                if (stopEdit) {\r\n                    stopEdit.subscribe();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    editRow(rowId?: any) {\r\n        if (!this.editable || this.editMode !== 'row') { return false; }\r\n\r\n        if (rowId) {\r\n            this.selectRow(rowId);\r\n        }\r\n\r\n\r\n        if (!this.selectedRow || this.selectedRow.index === -1) {\r\n            this.writeConsole('Please select a row.');\r\n            return false;\r\n        }\r\n\r\n        const { index: rowIndex, data: rowData } = { ...this.selectedRow };\r\n\r\n        const beforeEditEvent = this.beforeEdit({ rowIndex, rowData, gridInstance: this });\r\n        if (!beforeEditEvent || !beforeEditEvent.subscribe) {\r\n            this.writeConsole('please return an Observable Type.');\r\n            return;\r\n        }\r\n\r\n        const trId = TR_PREFIX + rowId;\r\n        const trDom = this.el.nativeElement.querySelector('#' + trId);\r\n\r\n        if (!this.selectedRow.dr) {\r\n            trDom.click();\r\n        }\r\n\r\n        beforeEditEvent.subscribe((flag: boolean) => {\r\n            if (flag) {\r\n                if (this.selectedRow.dr) {\r\n                    const cells = this.selectedRow.dr.cells.toArray();\r\n                    if (!cells || !cells.length) {\r\n                        return;\r\n                    }\r\n\r\n                    cells.forEach(cell => {\r\n                        if (cell.column.editor) {\r\n                            cell.isEditing = true;\r\n                        }\r\n                    });\r\n                    this.selectedRow.dr.cd.detectChanges();\r\n                    setTimeout(() => {\r\n                        const editors = cells.map(cell => {\r\n                            if (cell.cellEditor) {\r\n                                return cell.cellEditor.componentRef;\r\n                            }\r\n                        }).filter(editor => editor);\r\n                        this.selectedRow.editors = editors;\r\n\r\n                        if (editors && editors.length) {\r\n                            if (editors[0].instance.inputElement) {\r\n                                editors[0].instance.inputElement.focus();\r\n                            }\r\n                        }\r\n\r\n                        // ç»å®é®çäºä»¶\r\n                        this.bindRowEditorKeydownEvent();\r\n                        if (!this.cd['destroyed']) {\r\n                            this.cd.detectChanges();\r\n                        }\r\n                        this.beginEdit.emit({ rowIndex, rowData, gridInstance: this, editor: editors });\r\n                    });\r\n                }\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    endRowEdit() {\r\n        if (!this.isRowEditing()) {\r\n            return { canEnd: true };\r\n        }\r\n\r\n        if (!this.selectedRow || this.selectedRow.index === -1) {\r\n            this.writeConsole('Please select a row.');\r\n            return;\r\n        }\r\n        const { index: rowIndex, data: rowData, dr } = { ...this.selectedRow };\r\n        const { editor: currentEditor, column } = { ...this.currentCell };\r\n        // blur\r\n        document.body.click();\r\n\r\n        if (this.pending) {\r\n            return { canEnd: false };\r\n        }\r\n\r\n        const rowForm = dr.form as FormGroup;\r\n        rowForm.markAsTouched();\r\n        if (rowForm.invalid && !this.endEditByInvalid) {\r\n            return { canEnd: false };\r\n        }\r\n\r\n        // afterEdit è¦ä¼ éç¸å³åæ°ï¼å¨ç¼è¾ç¶ææ¶ï¼ç§»å¨æ»å¨æ¡ä¼åºäº\r\n        const afterEditEvent = this.afterEdit(rowIndex, rowData, column, currentEditor);\r\n        if (!afterEditEvent || !afterEditEvent.subscribe) {\r\n            this.writeConsole('please return an Observable Type.');\r\n            return { canEnd: false };\r\n        }\r\n\r\n        afterEditEvent.subscribe((flag: boolean) => {\r\n            if (flag) {\r\n                this.closeAllCellEditor();\r\n\r\n                if (this.selectedRow.dr.form) {\r\n                    this.selectedRow.dr.rowData = Object.assign(this.selectedRow.dr.rowData, this.selectedRow.dr.form.value);\r\n                    this.dfs.updateRow(this.selectedRow.id, this.selectedRow.dr.rowData);\r\n                    this.cd.detectChanges();\r\n                }\r\n\r\n                let val = '';\r\n                if (currentEditor && currentEditor.formControl) {\r\n                    val = currentEditor.formControl.value;\r\n                }\r\n\r\n                this.endEdit.emit({ rowIndex, rowData, column, value: val });\r\n\r\n                this.dgs.refreshFooterData.emit();\r\n            }\r\n        });\r\n    }\r\n\r\n    cancelEdit(rowId: any, emit = true) {\r\n\r\n        if (!this.isEditing()) {\r\n            return;\r\n        }\r\n\r\n        this.closeAllCellEditor();\r\n        if (rowId) {\r\n            this.dfs.rejectChanges(rowId);\r\n        }\r\n\r\n        this.cd.detectChanges();\r\n        if (emit) {\r\n            this.cancelEdited.emit();\r\n        }\r\n    }\r\n\r\n    closeAllCellEditor() {\r\n        if (this.selectedRow && this.selectedRow.dr) {\r\n            const cells = this.selectedRow.dr.cells;\r\n            if (cells) {\r\n                cells.forEach(cell => cell.isEditing = false);\r\n                if (this.currentCell) {\r\n                    this.currentCell.isEditing = false;\r\n                }\r\n            }\r\n            this.selectedRow.editors = null;\r\n        }\r\n\r\n        // åæ¶é®çäºä»¶\r\n        this.unbindRowEditorKeydownEvent();\r\n    }\r\n\r\n    private rowEditTabKeydwonEvent(e: any) {\r\n        const keyCode = e.which || e.keyCode;\r\n\r\n        if (keyCode === 9) {  // tab\r\n            const td = e.target.closest('td');\r\n            const tr = e.target.closest('tr');\r\n            const nextTd = td.nextElementSibling;\r\n\r\n            const hasNoEditor = (_td: any) => {\r\n                return !_td.querySelector('input') && !_td.querySelector('textarea') && !_td.querySelector('select');\r\n            };\r\n\r\n            const editNextRow = () => {\r\n                const nextTr = tr.nextElementSibling;\r\n                if (nextTr) {\r\n                    nextTr.click();\r\n                    const nextRowid = nextTr.getAttribute('id').replace(TR_PREFIX, '');\r\n                    if (nextRowid) {\r\n                        this.editRow(nextRowid);\r\n                    }\r\n                }\r\n            };\r\n\r\n            if (nextTd) {\r\n                if (hasNoEditor(nextTd)) {\r\n                    const tds = tr.querySelectorAll('td');\r\n                    let tdIdx = -1;\r\n                    tds.forEach((t, i) => {\r\n                        if (t === nextTd) {\r\n                            tdIdx = i;\r\n                        }\r\n                    });\r\n                    let nextTrEdit = true;\r\n                    while (tdIdx < tds.length) {\r\n                        const _ntd = tds[tdIdx];\r\n                        if (hasNoEditor(_ntd)) {\r\n                            tdIdx++;\r\n                        } else {\r\n                            nextTrEdit = false;\r\n                            break;\r\n                        }\r\n                    }\r\n\r\n                    if (nextTrEdit) {\r\n                        editNextRow();\r\n                    }\r\n                }\r\n            } else {\r\n                editNextRow();\r\n            }\r\n        }\r\n\r\n        e.stopPropagation();\r\n    }\r\n\r\n    private bindRowEditorKeydownEvent() {\r\n        if (!this.documentRowEditKeydownHanlder) {\r\n            this.documentRowEditKeydownHanlder = this.render2.listen(document, 'keydown', this.rowEditTabKeydwonEvent.bind(this));\r\n        }\r\n        this.documentClickEndRowEditHandler = this.render2.listen(document, 'click', (e: any) => {\r\n            if (this.pending) {\r\n                return false;\r\n            }\r\n            if (Utils.hasDialogOpen()) {\r\n                return;\r\n            }\r\n\r\n            if (this.isRowEditing()) {\r\n\r\n                // this.endRowEdit();\r\n            }\r\n        });\r\n    }\r\n\r\n    private unbindRowEditorKeydownEvent() {\r\n        // åæ¶é®çäºä»¶\r\n        if (this.documentRowEditKeydownHanlder) {\r\n            this.documentRowEditKeydownHanlder();\r\n            this.documentRowEditKeydownHanlder = null;\r\n        }\r\n\r\n        if (this.documentClickEndRowEditHandler) {\r\n            this.documentClickEndRowEditHandler();\r\n            this.documentClickEndRowEditHandler = null;\r\n        }\r\n    }\r\n\r\n    //#endregion\r\n\r\n    //#region Load Data\r\n\r\n\r\n    private _clientFilter(conditions: any, excuteLocaleFilter = false) {\r\n        // å®¢æ·ç«¯è¿æ»¤\r\n        if (excuteLocaleFilter) {\r\n            const allClientData = this.dfs.getData(true);\r\n            if (conditions && Object.keys(conditions).length) {\r\n                const _data = this.clientFilterService.executeFilter(allClientData, conditions);\r\n                this.dfs.loadFilterData(_data);\r\n            } else {\r\n                this.loadData(allClientData, false, true);\r\n            }\r\n        }\r\n\r\n        if (!this.virtualized) {\r\n            this.scrollToTop();\r\n        }\r\n\r\n        this.filterChanged.emit(conditions);\r\n    }\r\n\r\n    private smartFilterData(conditions: any) {\r\n        if (this.remoteFilter) { // æå¡å¨ç«¯è¿æ»¤\r\n            const entityFilters = this.clientFilterService.convertSmartFilter2EntityFilter(conditions);\r\n            this.filterChanged.emit(entityFilters);\r\n        } else {\r\n            // å®¢æ·ç«¯è¿æ»¤\r\n            this._clientFilter(conditions, this.useDefaultFilter);\r\n        }\r\n\r\n    }\r\n\r\n    // smart fitler æ¸ç©ºæ¥è¯¢æ¡ä»¶\r\n    onClearSmartFilters($event) {\r\n        this.smartFilterResult = { conditions: [], controlData: [] };\r\n        this.conditions = [];\r\n        this.smartFilterData([]);\r\n        this.smartFilterService.clearAll();\r\n        setTimeout(() => {\r\n            this.onFilterBarResize(0);\r\n        });\r\n    }\r\n\r\n    onRemoveSmartFilterItem($event) {\r\n        if ($event) {\r\n            const e = { ...$event };\r\n            e['labelCode'] = $event.fieldCode;\r\n            this.smartFilterService.removeCondition(e, true);\r\n        }\r\n    }\r\n\r\n    onFilterBarResize($event) {\r\n        this.filterBarHeight = $event;\r\n\r\n        const smartFilterEl = this.el.nativeElement.querySelector('.f-datagrid-column-drop-panel');\r\n        if (smartFilterEl && !$event) {\r\n            smartFilterEl.style.top = '0px';\r\n        }\r\n        this.dgs.showGridHeader.emit(this.realHeaderHeight);\r\n        this.dgs.smartFilterBarExpand.emit();\r\n    }\r\n\r\n    onSmartFilterChange($event) {\r\n        const { conditions, filterItem } = $event;\r\n\r\n        this.smartFilterService.filterConditionChanged({ conditions, controlData: filterItem, from: 'toolbar' });\r\n\r\n        // this.smartFilterData(conditions);\r\n        this.dgs.smartFilterDataChange.emit(filterItem);\r\n    }\r\n\r\n    filterData(conditions?: any) {\r\n        if (!conditions) {\r\n            conditions = this.conditions;\r\n        } else {\r\n            this.conditions = conditions;\r\n        }\r\n\r\n        this.scrollToTop();\r\n\r\n        if (this.enableSmartFilter) {\r\n            this.smartFilterData(conditions);\r\n            return;\r\n        }\r\n\r\n        if (this.remoteFilter) {\r\n            const entityFilters = this.clientFilterService.convert2FilterArray(conditions);\r\n            this.filterChanged.emit(entityFilters);\r\n        } else {\r\n            // å®¢æ·ç«¯è¿æ»¤\r\n            this._clientFilter(conditions, true);\r\n        }\r\n    }\r\n    /** æ¸ç©ºè¿æ»¤æ¡ä»¶ */\r\n    clearCondition() {\r\n        this.dgs.onClearFilter();\r\n    }\r\n\r\n    loadData(data?: any, keepSortState = false, keepScrollPosition = true) {\r\n        if (this.loading) {\r\n            this.closeLoading(!this.pagination);\r\n        }\r\n        data = data || [];\r\n\r\n        if (keepScrollPosition && this.scrollInstance && this.scrollInstance.instance) {\r\n            const lst = this.scrollInstance.instance.lastScrollTop;\r\n            const lsl = this.scrollInstance.instance.lastScrollLeft;\r\n            this.dfs.updateProperty('scrollInfo', { y: lst, x: lsl });\r\n        } else {\r\n            this.dfs.updateProperty('scrollInfo', { y: 0, x: 0 });\r\n        }\r\n\r\n        if (this.pagination) {\r\n            this.dfs.setPagination(this.pageIndex, this.pageSize, this.total);\r\n            this.updatePagerOptions();\r\n\r\n            this.cd.detectChanges();\r\n        }\r\n\r\n        // éæ°å è½½æ°æ®æ¶ï¼ç§»é¤ææç¼è¾å\r\n        // this.closeAllCellEditor();\r\n\r\n        this.data = data;\r\n        if (keepSortState) {\r\n            if (this.remoteSort) {\r\n                this.dfs.loadData(data);\r\n            } else {\r\n                this.dfs.loadData(data, true, true);\r\n            }\r\n        } else {\r\n            this.dfs.loadData(data);\r\n        }\r\n\r\n        this.setPagerHeight();\r\n        this.dgs.dataSourceChanged();\r\n    }\r\n\r\n    loadVirtualData(data: any) {\r\n        if (this.groupRows) {\r\n            this.writeConsole('if you using GROUPROWS, please set [virtualized]=\"false\" [virtualizedAsyncLoad]=\"false\"');\r\n            return;\r\n        }\r\n        if (this.virtualizedAsyncLoad) {\r\n            this.dgs.onLoadVirtualData(data);\r\n        }\r\n    }\r\n\r\n    fetchData(pageIndex, pageSize) {\r\n        if (this.restService) {\r\n            this.showLoading();\r\n            const params = { pageIndex, pageSize };\r\n            if (this.sortName) {\r\n                params['sortName'] = this.sortName;\r\n            }\r\n            if (this.sortOrder) {\r\n                params['sortOrder'] = this.sortOrder;\r\n            }\r\n\r\n            return this.restService.getData(this.url, params);\r\n        }\r\n        return of(undefined);\r\n    }\r\n\r\n    refresh() {\r\n        this.dfs.refresh();\r\n    }\r\n\r\n    reload() {\r\n        this.fetchData(1, this.pageSize).subscribe(res => {\r\n            if (res) {\r\n                this.pageIndex = 1;\r\n                this.total = res.total;\r\n                this.loadData(res.items);\r\n            }\r\n        });\r\n    }\r\n\r\n    /** è·åå½åé¡µæ°æ® */\r\n    getRows() {\r\n        if (this.groupRows || this.virtualized) {\r\n            if (this.pagerOnServer) {\r\n                return this.ds.rows;\r\n            } else {\r\n                return this.currentPagerData;\r\n            }\r\n        } else {\r\n            if (this.pagerOnServer) {\r\n                return this.data;\r\n            } else {\r\n                return this.currentPagerData;\r\n            }\r\n        }\r\n    }\r\n\r\n    //#endregion\r\n\r\n    //#region Pagination\r\n\r\n    setPageIndex(pageIndex: number, detectChanges = true) {\r\n        this.pageIndex = pageIndex;\r\n        this.pagerOpts.currentPage = pageIndex;\r\n\r\n        if (detectChanges) {\r\n            this.cd.detectChanges();\r\n        }\r\n    }\r\n\r\n    // æ´æ°æ¯é¡µ\r\n    setPageList(pageList: number[], detectChanges = true) {\r\n        this.pageList = pageList;\r\n        this.pagerOpts.pageList = pageList;\r\n        if (detectChanges) {\r\n            this.cd.detectChanges();\r\n        }\r\n    }\r\n\r\n    onPageChange(pageIndex: number) {\r\n        if (this.lockPagination) {\r\n            return;\r\n        }\r\n\r\n        if (this.controlPaginationState) {\r\n            this.setPageIndex(pageIndex, false);\r\n        }\r\n\r\n\r\n        this.fetchData(pageIndex, this.pageSize).subscribe(res => {\r\n            if (res) {\r\n                this.loadData(res.items);\r\n            }\r\n        });\r\n        this.focusRowIndex = -1;\r\n        this.scrollToTop();\r\n        this.pageChanged.emit({ pageIndex, pageSize: this.pageSize });\r\n    }\r\n\r\n    onPageSizeChange(pageSize: number) {\r\n        if (this.lockPagination) {\r\n            return;\r\n        }\r\n        this.focusRowIndex = -1;\r\n        this.scrollToTop();\r\n        this.pageSize = pageSize;\r\n        this.pagerOpts.itemsPerPage = pageSize;\r\n\r\n        this.fetchData(1, pageSize).subscribe(res => {\r\n            if (res) {\r\n                this.pageIndex = 1;\r\n                this.loadData(res.items);\r\n            }\r\n        });\r\n        this.pageSizeChanged.emit({ pageSize, pageIndex: this.pageIndex });\r\n    }\r\n\r\n    onRemoveSelectedItem(id: any) {\r\n        if (this.dfs.findRowIndex(id) > -1) {\r\n            this.unCheckRow(id);\r\n            this.cd.detectChanges();\r\n        } else {\r\n            this.unCheckRow(id, false);\r\n            this.checkValues = this.checkeds.map(r => r.id);\r\n        }\r\n    }\r\n\r\n    onClearSelectedItem($event) {\r\n        // this.clearAll();\r\n        if (this.selectOnCheck) {\r\n            this.selectValue = '';\r\n        }\r\n        this.clearCheckeds(true);\r\n    }\r\n    //#endregion\r\n\r\n    //#region Loading\r\n    showLoading() {\r\n        this.loading = true;\r\n        this.cd.detectChanges();\r\n    }\r\n\r\n    closeLoading(detectChanges = true) {\r\n        this.loading = false;\r\n        if (detectChanges) {\r\n            this.cd.detectChanges();\r\n        }\r\n    }\r\n    //#endregion\r\n\r\n    //#region Dom\r\n\r\n    private replacePX2Empty(strNum: string) {\r\n        if (strNum) {\r\n            return Number.parseInt(strNum.replace('px', ''), 10);\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    renderCustomCls(cls: any, dom: any) {\r\n        if (cls) {\r\n            if (cls[0] === '!') {\r\n                const _cls = cls.slice(1).split(' ').filter(c => c);\r\n                _cls.forEach(c => {\r\n                    if (c) {\r\n                        this.render2.removeClass(dom, c);\r\n                    }\r\n                });\r\n            } else {\r\n                cls.split(' ').filter(c => c).forEach(c => {\r\n                    if (c) {\r\n                        this.render2.addClass(dom, c);\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    renderCustomStyle(cs: CustomStyle, dom: any, cssRuleText = null) {\r\n        if (!cs) {\r\n            return;\r\n        }\r\n        if (cs.cls) {\r\n            this.renderCustomCls(cs.cls, dom);\r\n        }\r\n\r\n        if (cs.style) {\r\n            if (!cssRuleText) {\r\n                cssRuleText = `${this.customStyleKey()} #${dom.id} ${JSON.stringify(cs.style)}`;\r\n            }\r\n\r\n            this.dgs.appendCssRules([cssRuleText]);\r\n        }\r\n    }\r\n\r\n    getBoundingClientRect(el: ElementRef) {\r\n        return el.nativeElement.getBoundingClientRect();\r\n    }\r\n\r\n    getElementPadding(el: HTMLElement) {\r\n        const style = getComputedStyle(el);\r\n        return {\r\n            top: this.replacePX2Empty(style.paddingTop),\r\n            left: this.replacePX2Empty(style.paddingLeft),\r\n            bottom: this.replacePX2Empty(style.paddingBottom),\r\n            right: this.replacePX2Empty(style.paddingRight)\r\n        };\r\n    }\r\n\r\n    getElementBorderWidth(el: HTMLElement) {\r\n        const style = getComputedStyle(el);\r\n        return {\r\n            top: this.replacePX2Empty(style.borderTopWidth),\r\n            bottom: this.replacePX2Empty(style.borderBottomWidth),\r\n            right: this.replacePX2Empty(style.borderRightWidth),\r\n            left: this.replacePX2Empty(style.borderLeftWidth)\r\n        };\r\n    }\r\n\r\n    formatData(field: any, data: any, formatter: any) {\r\n        const value = this.getFieldValue(field, data);\r\n        return this.colFormatSer.format(value, data, formatter);\r\n    }\r\n\r\n    getFieldValue(field, rowData) {\r\n        return Utils.getValue(field, rowData);\r\n    }\r\n\r\n    //#endregion\r\n\r\n    //#region Select\r\n    private canOperateCheckbox() {\r\n        return this.multiSelect && this.showCheckbox;\r\n    }\r\n\r\n\r\n\r\n    private findNextCell(field: string, dir: MoveDirection) {\r\n        let td = null;\r\n        if (this.currentCell && this.currentCell.cellElement) {\r\n            const fixed = this.dfs.getColumn(field).fixed || '';\r\n            let cellIndex = this.dfs.getColumnIndex(field, fixed);\r\n\r\n            if (fixed === 'left' || this.fast) {\r\n                if (this.showCheckbox) {\r\n                    cellIndex += 1;\r\n                }\r\n\r\n                if (this.showLineNumber) {\r\n                    cellIndex += 1;\r\n                }\r\n            }\r\n\r\n            const currCellEl = this.currentCell.cellElement;\r\n            if (dir === 'up') {\r\n                const prevTr = this.dgs.findNextTr(currCellEl.parentElement.previousElementSibling, 'up');\r\n                if (prevTr) {\r\n                    td = prevTr.children[cellIndex];\r\n                }\r\n            } else if (dir === 'down') {\r\n                const nextTr = this.dgs.findNextTr(currCellEl.parentElement.nextElementSibling, 'down');\r\n                if (nextTr) {\r\n                    td = nextTr.children[cellIndex];\r\n                }\r\n            } else if (dir === 'left') {\r\n                td = currCellEl.previousElementSibling;\r\n            } else if (dir === 'right') {\r\n                td = currCellEl.nextElementSibling;\r\n            }\r\n        }\r\n        return td;\r\n    }\r\n\r\n    selectNextCell(dir: MoveDirection, event: Event) {\r\n        const nextTd = this.findNextCell(this.currentCell.field, dir);\r\n\r\n        if (dir === 'up' && !nextTd) {\r\n            return;\r\n        }\r\n\r\n        if (nextTd && nextTd.className.indexOf('f-datagrid-cell-rownumber') == -1 && nextTd.className.indexOf('f-datagrid-cell-checkbox') == -1) {\r\n            if (event['code'] === 'Tab' && this.editable && this.editcellWhenTabKeydwon) {\r\n                nextTd['click'].apply(nextTd, [event]);\r\n            } else {\r\n                if (nextTd.selectCell) {\r\n                    if (this.selectionMode === 'default' ) {\r\n                        this.clearCheckeds();\r\n                    }\r\n                    nextTd['selectCell'](event, nextTd);\r\n                }\r\n            }\r\n            // nextTd['selectCell'](event, nextTd);\r\n            return nextTd;\r\n        } else {\r\n            const tr = this.currentCell.cellElement.parentElement;\r\n            let _next = tr.nextElementSibling;\r\n            if (dir === 'left') {\r\n                _next = tr.previousElementSibling;\r\n            }\r\n\r\n            const nextTr = this.dgs.findNextTr(_next, dir === 'left' ? 'up' : 'down');\r\n            if (nextTr && nextTr.tagName === 'TR') {\r\n                // nextTr.children.find(td => td.editCell).editCell();\r\n                let firstEditor = false;\r\n                let i = 0;\r\n                while (!firstEditor) {\r\n                    firstEditor = !!nextTr.children[i].selectCell;\r\n                    if (!firstEditor) {\r\n                        i++;\r\n                    }\r\n                }\r\n                if (nextTr.children[i] && nextTr.children[i].selectCell) {\r\n                    if (this.selectionMode === 'default' ) {\r\n                        this.clearCheckeds();\r\n                    }\r\n                    nextTr.children[i].selectCell(event, nextTr.children[i]);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    selectNextRow() {\r\n        if (this.selectedRow) {\r\n            const tr = this.selectedRow.dr.el.nativeElement;\r\n            if (tr.nextElementSibling) {\r\n                tr.nextElementSibling.click();\r\n            }\r\n        }\r\n    }\r\n    selectPrevRow() {\r\n        if (this.selectedRow) {\r\n            const tr = this.selectedRow.dr.el.nativeElement;\r\n            if (tr.previousElementSibling) {\r\n                tr.previousElementSibling.click();\r\n            }\r\n        }\r\n    }\r\n\r\n    removeCellSelectedCls() {\r\n        if (this.currentCell) {\r\n            DomHandler.removeClass(this.currentCell.cellElement, CELL_SELECTED_CLS);\r\n            this.render2.removeClass(this.currentCell.cellElement, CELL_EDITING_CLS);\r\n        }\r\n\r\n        const selectedCell = this.el.nativeElement.querySelectorAll('.' + CELL_SELECTED_CLS);\r\n        if (selectedCell.length) {\r\n            selectedCell.forEach(n => {\r\n                this.render2.removeClass(n, CELL_SELECTED_CLS);\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * éä¸­è¡\r\n     * @param id éä¸­è¡ID\r\n     * @param emit è§¦åselect äºä»¶\r\n     * @param toCurrentPosition æ»å¨æ¡å®ä½å°å½åéæ©ä¸­è¡\r\n     */\r\n    selectRow(id: any, emit = true, toCurrentPosition = false) {\r\n\r\n        this.removeCellSelectedCls();\r\n\r\n        if (!this.multiSelect && this.showCheckbox) {\r\n            this.clearCheckeds(false, false);\r\n        }\r\n\r\n        if (this.multiSelect && this.selectionMode === 'default') {\r\n            this.clearAll();\r\n        }\r\n\r\n        if (id && (!this.selectedRow || this.selectedRow.id != id)) {\r\n\r\n            const row = this.dfs.findRow(id);\r\n            if (row && this.disableRow) {\r\n                if (this.disableRow(row.data, row.index)) {\r\n                    return;\r\n                }\r\n            }\r\n\r\n            if (emit) {\r\n                this.dfs.selectRecord(id);\r\n            } else {\r\n                this.dfs.setSelectRow(id);\r\n                this.selectedRow = this.dfs.getCurrentRow();\r\n                if (this.checkOnSelect) {\r\n                    this.checkRows([id]);\r\n                }\r\n                this.dgs.setSelecedRow.emit({ id, selected: true });\r\n            }\r\n        } else {\r\n            if (this.checkOnSelect) {\r\n                this.checkRows([id]);\r\n            }\r\n        }\r\n\r\n        if (toCurrentPosition) {\r\n            this.scrollToCurrentRow();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * æ»å¨æ¡æ»å¨å°å½åè¡çä½ç½®\r\n     */\r\n    scrollToCurrentRow() {\r\n        this.dgs.scrollToCurrentRow.next();\r\n    }\r\n\r\n    unSelectRow(id: any, emit = true) {\r\n        if (id) {\r\n            this.closeAllCellEditor();\r\n\r\n            if (this.currentCell && this.currentCell.rowId == id) {\r\n                this.cancelSelectCell();\r\n            }\r\n\r\n            if (emit) {\r\n                this.dfs.selectRecord(id, false);\r\n            } else {\r\n                this.dfs.setSelectRow(id, false);\r\n                this.selectedRow = null;\r\n                this.dgs.setSelecedRow.emit({ id, selected: false });\r\n            }\r\n        }\r\n    }\r\n\r\n    selectAllRows() {\r\n        if (this.multiSelect) {\r\n            this.dfs.selectAll();\r\n        }\r\n    }\r\n\r\n    cancelSelectCell() {\r\n        if (this.currentCell) {\r\n            this.currentCell.cellElement.cancelSelected();\r\n            if (!this.currentCell.isEditing) {\r\n                this.currentCell = null;\r\n                this.dfs.cancelSelectCell();\r\n            }\r\n        }\r\n    }\r\n\r\n    clearSelections(excludeIds?: string[]) {\r\n        this.dfs.clearSelections(excludeIds);\r\n        this.selectedRow = null;\r\n        this.cancelSelectCell();\r\n        this.cd.detectChanges();\r\n    }\r\n\r\n    checkRow(id: any, emit = true) {\r\n        if (this.canOperateCheckbox()) {\r\n            if (emit) {\r\n                this.dfs.checkRecord(id);\r\n            } else {\r\n                this.checkRows([id]);\r\n            }\r\n        }\r\n    }\r\n\r\n    /** é©éè¡ï¼ä¸è§¦åéä¸­äºä»¶ */\r\n    checkRows(ids: any[], emit = false) {\r\n        if (ids && ids.length) {\r\n            this.dfs.setCheckedRows(ids, true);\r\n            this.dgs.setCheckedRows.next({ ids, checked: true });\r\n\r\n            if (this.selectionMode === 'default') {\r\n                this.dfs.updateProperty('selections', this.checkeds);\r\n            }\r\n\r\n            // this.cd.detectChanges();\r\n            if (emit) {\r\n                this.checkValues = this.checkeds.map(r => r.id);\r\n                this.checkValuesChange.emit(this.checkValues);\r\n                this.checkedChange.emit(this.checkeds);\r\n            }\r\n        }\r\n    }\r\n\r\n    /** åæ¶é©éï¼ä¸è§¦åéä¸­äºä»¶ */\r\n    unCheckRows(ids: any[], emit = false) {\r\n        if (ids && ids.length) {\r\n            this.dfs.setCheckedRows(ids, false);\r\n            this.dgs.setCheckedRows.next({ ids, checked: false });\r\n            // this.cd.detectChanges();\r\n            if (emit) {\r\n                this.checkValues = this.checkeds.map(r => r.id);\r\n                this.checkValuesChange.emit(this.checkValues);\r\n                this.checkedChange.emit(this.checkeds);\r\n            }\r\n        }\r\n    }\r\n\r\n    checkAllRows(emit = true) {\r\n        if (this.canOperateCheckbox()) {\r\n            this.dfs.checkAll();\r\n            this.dgs.checkAll.emit();\r\n            if (emit) {\r\n                this.checkAll.emit();\r\n            }\r\n        }\r\n    }\r\n\r\n    unCheckRow(id: any, emit = true) {\r\n        if (this.canOperateCheckbox()) {\r\n            if (this.currentCell && this.currentCell.rowId == id) {\r\n                this.cancelSelectCell();\r\n            }\r\n\r\n            if (emit) {\r\n                this.dfs.checkRecord(id, false);\r\n            } else {\r\n                this.unCheckRows([id]);\r\n            }\r\n        }\r\n    }\r\n    /** æ¸ç©ºé©éè¡ï¼é»è®¤åªæ¸ç©ºå½åé¡µçé©é\r\n     * clearAll: æ¸ç©ºææ é»è®¤ä¸º false; å¦åä»æ¸ç©ºå½åé¡µçé©éæ°æ®ã\r\n     */\r\n    clearCheckeds(clearAll = false, emitUnCheckAll = true) {\r\n        this.dfs.clearCheckeds(clearAll);\r\n        this.checkValues = [];\r\n        this.cancelSelectCell();\r\n        if (emitUnCheckAll) {\r\n            this.dgs.uncheckAll.emit();\r\n        }\r\n    }\r\n\r\n    clearAll() {\r\n        this.selectedRow = null;\r\n        this.checkValues = [];\r\n        this.dfs.clearAll();\r\n        this.dgs.uncheckAll.emit();\r\n    }\r\n\r\n    //#endregion\r\n\r\n    //#region Resize Column\r\n\r\n    private getResizeProxyPosLeft(e: MouseEvent) {\r\n        const target = e.target as any;\r\n        const dgRect = this.getBoundingClientRect(this.dgContainer);\r\n        const td = target.parentElement;\r\n        const tdLeft = td.getBoundingClientRect().left;\r\n        const deltaEdge = td.offsetWidth - (e.pageX - tdLeft);\r\n        this.resizeColumnInfo.proxyLineEdge = deltaEdge;\r\n        this.resizeColumnInfo.startWidth = td.offsetWidth;\r\n        this.resizeColumnInfo.startX = e.pageX;\r\n        this.resizeColumnInfo.left = tdLeft - dgRect.left - 1 + deltaEdge;\r\n        return e.pageX - dgRect.left - 1 + deltaEdge;\r\n    }\r\n\r\n    private toggleResizeProxy(show = true) {\r\n        let display = 'block';\r\n        if (!show) {\r\n            display = 'none';\r\n        }\r\n        this.render2.setStyle(this.resizeProxyBg.nativeElement, 'display', display);\r\n        this.render2.setStyle(this.resizeProxy.nativeElement, 'display', display);\r\n    }\r\n\r\n    onColumnResizeBegin(e: MouseEvent) {\r\n        if (this.resizeProxy) {\r\n            this.render2.setStyle(document.body, 'cursor', 'e-resize');\r\n            const proxy = this.resizeProxy.nativeElement;\r\n            const proxyPosLeft = this.getResizeProxyPosLeft(e);\r\n            this.render2.setStyle(proxy, 'left', proxyPosLeft + 'px');\r\n\r\n            let top = 0;\r\n            if ((this.enableFilterRow || this.enableSmartFilter) && this.showFilterBar) {\r\n                top += this.filterBarHeight;\r\n            }\r\n\r\n            if (this.showRowGroupPanel) {\r\n                top += this.rowGroupPanelHeight;\r\n            }\r\n\r\n            this.render2.setStyle(proxy, 'top', `${top}px`);\r\n\r\n            if (!this.autoHeight) {\r\n                this.render2.setStyle(proxy, 'height', (this.height - this.pagerHeight) + 'px');\r\n            } else {\r\n                let bottomH = 0;\r\n                if (this.pagination) {\r\n                    bottomH += this.pagerHeight;\r\n                }\r\n                if (this.showFooter) {\r\n                    bottomH += this.footerHeight;\r\n                }\r\n                this.render2.setStyle(proxy, 'height', `calc(100% - ${bottomH}px)`);\r\n            }\r\n            this.toggleResizeProxy();\r\n        }\r\n    }\r\n\r\n    onColumnResize(e: MouseEvent) {\r\n        const proxy = this.resizeProxy.nativeElement;\r\n        const dgRect = this.getBoundingClientRect(this.dgContainer);\r\n        const proxyPosLeft = e.pageX - dgRect.left - 1 + this.resizeColumnInfo.proxyLineEdge;\r\n        if (proxyPosLeft - this.resizeColumnInfo.left > 20) {\r\n            this.render2.setStyle(proxy, 'left', proxyPosLeft + 'px');\r\n        } else {\r\n            this.render2.setStyle(proxy, 'left', (this.resizeColumnInfo.left + 20) + 'px');\r\n        }\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n    }\r\n\r\n    onColumnResizeEnd(e: MouseEvent, col: DataColumn) {\r\n        this.render2.removeStyle(document.body, 'cursor');\r\n        this.toggleResizeProxy(false);\r\n        this.resizeColumnInfo.proxyLineEdge = 0;\r\n\r\n        let newColWidth = this.resizeColumnInfo.startWidth + e.pageX - this.resizeColumnInfo.startX;\r\n\r\n        if (newColWidth < 20) {\r\n            newColWidth = 20;\r\n        }\r\n\r\n        if (col.width > newColWidth) {\r\n            const t = col.width - newColWidth;\r\n            if (!this.fitColumns && this.scrollInstance.elementRef.nativeElement.scrollLeft) {\r\n                const moveLeft = this.scrollInstance.elementRef.nativeElement.scrollLeft - t;\r\n                this.scrollInstance.scrollToX(moveLeft);\r\n            }\r\n        }\r\n        col.width = newColWidth;\r\n\r\n        if (this.useControlPanel && this.settingService) {\r\n            this.settingService.saveUserConfig(this.id).subscribe(() => {\r\n                this.dfs.columnResizeEnd();\r\n                this.dgs.columnResized.emit();\r\n            });\r\n\r\n            return;\r\n        }\r\n\r\n        this.dfs.columnResizeEnd();\r\n        this.dgs.columnResized.emit();\r\n\r\n        this.updateFixedColumnCssForFastMode(col);\r\n    }\r\n\r\n    /** è¿ååå®½ */\r\n    restituteColumnsSize() {\r\n        this.dfs.resizeColumns(true);\r\n        this.dgs.columnResized.emit();\r\n    }\r\n\r\n    /** ååæ ¼åå®¹èªéåºåå®½ */\r\n    sizeToContent(col: DataColumn, th: ElementRef) {\r\n        if (!this.AutoColumnWidthUseDblclick) {\r\n            return false;\r\n        }\r\n        let longestText = '';\r\n        const items = this.data;\r\n\r\n        for (let i = items.length - 1; i >= 0; i--) {\r\n            // TFS: 356964 20200203\r\n            let value = Utils.getValue(col.field, items[i]);\r\n            if (value !== 0) {\r\n                value = value || '';\r\n            }\r\n            let text = '' + value;\r\n            if (col.formatter && value !== undefined) {\r\n                text = this.colFormatSer.format(value, items[i], col.formatter);\r\n            }\r\n\r\n            if (Utils.getBLen(text) > Utils.getBLen(longestText)) {\r\n                longestText = text;\r\n            } else {\r\n                this.longTextArea.nativeElement.innerHTML = text;\r\n                const w1 = this.longTextArea.nativeElement.offsetWidth;\r\n                this.longTextArea.nativeElement.innerHTML = longestText;\r\n                const w2 = this.longTextArea.nativeElement.offsetWidth;\r\n\r\n                if (w1 > w2) {\r\n                    longestText = text;\r\n                }\r\n            }\r\n        }\r\n\r\n        this.longTextArea.nativeElement.innerHTML = longestText;\r\n        const maxWidth = this.longTextArea.nativeElement.offsetWidth + 26;\r\n\r\n        this.longTextArea.nativeElement.innerHTML = th.nativeElement.innerText;\r\n        let thMinWidth = this.longTextArea.nativeElement.offsetWidth + 26;\r\n\r\n        if (col.sortable) {\r\n            thMinWidth += 24;\r\n        }\r\n\r\n        col.width = (maxWidth > thMinWidth ? maxWidth : thMinWidth);\r\n\r\n        const colIndex = this.flatColumns.findIndex(c => c.field === col.field);\r\n        if (colIndex === this.flatColumns.length - 1) {\r\n            col.width += 6;\r\n        }\r\n        this.dfs.resizeColumns();\r\n        this.dgs.columnResized.emit();\r\n    }\r\n\r\n    //#endregion\r\n\r\n    //#region Changes\r\n    getChanges() {\r\n        return this.dfs.getChanges();\r\n    }\r\n\r\n    acceptChanges() {\r\n        this.dfs.acceptChanges();\r\n    }\r\n\r\n    rejectChanges() {\r\n        this.dfs.rejectChanges();\r\n    }\r\n    //#endregion\r\n\r\n    //#region CRUD\r\n\r\n    appendRow(row: any) {\r\n        this.cancelEdit(null);\r\n        this.dfs.appendRow(row);\r\n        this.dataChange.emit(this.dfs.getData());\r\n        this.rowAppended.emit();\r\n    }\r\n\r\n    updateRow(rowId, newData: { [key: string]: any }) {\r\n        this.dfs.updateRow(rowId, newData);\r\n        this.dataChange.emit(this.dfs.getData());\r\n        this.rowUpdated.emit();\r\n    }\r\n\r\n    refreshRow(rowId) {\r\n        const row = this.dfs.findRow(rowId);\r\n        if (row && row.data) {\r\n            this.dfs.rowUpdate$.emit(row);\r\n        } else {\r\n            this.writeConsole('Can not found row by id. id: ' + rowId);\r\n        }\r\n    }\r\n\r\n\r\n    deleteRow(rowId?: any) {\r\n        this.cancelEdit(rowId, false);\r\n        if (!rowId) {\r\n            if (this.selectValue) {\r\n                rowId = this.selectValue;\r\n            } else {\r\n                throw new Error(`å é¤è¡æ¶ä¸»é®æ è¯ID ä¸è½ä¸ºç©ºã`);\r\n            }\r\n        }\r\n        const deleteRow = this.dfs.deleteRow(rowId);\r\n        this.dataChange.emit(this.dfs.getData());\r\n        this.currentCell = null;\r\n        this.dfs.updateProperty('currentCell', null);\r\n        this.cd.detectChanges();\r\n        this.rowDeleted.emit(deleteRow);\r\n    }\r\n\r\n    validateRow() { }\r\n\r\n    insertRow() { }\r\n\r\n    //#endregion\r\n\r\n    //#region Scrolling\r\n\r\n    scrollToLeft() {\r\n        if (this.scrollInstance) {\r\n            this.scrollInstance.scrollToLeft(0, 200);\r\n        }\r\n    }\r\n\r\n    scrollToRight() {\r\n        if (this.scrollInstance) {\r\n            this.scrollInstance.scrollToRight(0, 200);\r\n        }\r\n    }\r\n\r\n    scrollToTop() {\r\n        if (this.scrollInstance) {\r\n            this.scrollInstance.scrollToTop(0, 100);\r\n            this.dfs.updateProperty('scrollInfo', { y: 0, x: 0 });\r\n        }\r\n    }\r\n\r\n    scrollToBottom() {\r\n        if (this.scrollInstance) {\r\n            this.scrollInstance.scrollToBottom(0, 100);\r\n        }\r\n    }\r\n\r\n    //#endregion\r\n\r\n    private _setColumnReadonly(cols: DataColumn[], field: string, readonly = true) {\r\n        if (cols && cols.length && field) {\r\n            const col = cols.find(n => n.field === field);\r\n            if (col) {\r\n                col.readonly = readonly;\r\n            }\r\n        }\r\n    }\r\n\r\n    setColumnReadonly(field: string, readonly = true) {\r\n        this._setColumnReadonly(this.colGroup.leftFixed, field, readonly);\r\n        this._setColumnReadonly(this.colGroup.rightFixed, field, readonly);\r\n        this._setColumnReadonly(this.colGroup.normalColumns, field, readonly);\r\n    }\r\n\r\n    // æ¯å¦ä¸ºå¤è¡¨å¤´\r\n    isMultiHeader() {\r\n        return this.columns && this.columns.length > 1 && Array.isArray(this.columns[1]);\r\n    }\r\n\r\n    toggleVisibleColumn(fields: string[], visible = true) {\r\n        if (!this.isMultiHeader()) {\r\n            this.columns.forEach((cols: DataColumn[]) => {\r\n                fields.forEach(field => {\r\n                    const col = cols.find(c => c.field === field || c.id === field);\r\n                    if (col) {\r\n                        col.visible = visible;\r\n                    }\r\n                });\r\n            });\r\n        } else {\r\n            // å¤è¡¨å¤´\r\n            const allCols = flatten<DataColumn>(this.columns);\r\n\r\n            allCols.forEach(p => {\r\n                if (p.origianlColSpan === undefined) {\r\n                    p.origianlColSpan = p.colspan;\r\n                }\r\n            });\r\n\r\n            fields.forEach(field => {\r\n                const _col = allCols.find(col => col.field === field || col.id === field);\r\n                if (_col) {\r\n\r\n                    if (_col.visible === visible) {\r\n                        return;\r\n                    }\r\n\r\n                    _col.visible = visible;\r\n                    const parents = DatagridColumnsHelper.getParentColumns(_col, allCols);\r\n                    const childs = DatagridColumnsHelper.getChildColumns(_col, allCols);\r\n                    childs.forEach(c => {\r\n                        c.visible = visible;\r\n                    });\r\n                    if (visible && childs.length) {\r\n                        _col.colspan = _col.origianlColSpan;\r\n                    }\r\n\r\n                    const _colspan = _col.colspan || 1;\r\n                    parents.forEach(p => {\r\n                        if (!visible) {\r\n                            p.colspan = p.colspan - _colspan;\r\n                        } else {\r\n                            const _childs = allCols.filter(n => n.parentId === p.id && n.visible);\r\n                            p.colspan = _childs.reduce((r, c) => {\r\n                                r = r + (c.colspan || 1);\r\n                                return r;\r\n                            }, 0);\r\n                        }\r\n\r\n                        p.visible = !!p.colspan;\r\n                    });\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    getColumn(field: string) {\r\n        const allCols = flatten<DataColumn>(this.columns);\r\n        return allCols.find(n => n.field === field || n.id === field);\r\n    }\r\n\r\n    showColumn(field: string | string[]) {\r\n        if (typeof field === 'string') {\r\n            this.toggleVisibleColumn([field], true);\r\n        } else {\r\n            this.toggleVisibleColumn(field, true);\r\n        }\r\n        this.columnsChanged();\r\n    }\r\n\r\n    hideColumn(field: string | string[]) {\r\n        if (typeof field === 'string') {\r\n            this.toggleVisibleColumn([field], false);\r\n        } else {\r\n            this.toggleVisibleColumn(field, false);\r\n        }\r\n        this.columnsChanged();\r\n    }\r\n\r\n    updateColumn(field: string, columnObject: { [key: string]: any }, detectChange = true) {\r\n        this.columns.forEach((cols: DataColumn[]) => {\r\n            let column = cols.find(col => col.field === field);\r\n            if (column) {\r\n                column = Object.assign(column, columnObject);\r\n            }\r\n        });\r\n\r\n        if (detectChange) {\r\n            this.columnsChanged();\r\n        }\r\n    }\r\n\r\n    setColumnFormatter(field: string, formatter: any) {\r\n        this.columns.forEach((cols: DataColumn[]) => {\r\n            const column = cols.find(col => col.field === field);\r\n            if (column) {\r\n                column.formatter = formatter;\r\n            }\r\n        });\r\n\r\n        this.columnsChanged();\r\n    }\r\n\r\n    updateColumnFormatterOptions(field: string, formatterOptions: any) {\r\n        this.columns.forEach((cols: DataColumn[]) => {\r\n            const column = cols.find(col => col.field === field);\r\n            if (column && column.formatter) {\r\n                const colFormatter = column.formatter as any;\r\n                colFormatter.options = colFormatter.options || {};\r\n                colFormatter.options = Object.assign(colFormatter.options, formatterOptions || {});\r\n            }\r\n        });\r\n\r\n        this.columnsChanged();\r\n    }\r\n\r\n    setColumnTitle(field: string, title: string) {\r\n        this.columns.forEach((cols: DataColumn[]) => {\r\n            const column = cols.find(col => col.field === field);\r\n            if (column) {\r\n                column.title = title;\r\n            }\r\n        });\r\n\r\n        this.columnsChanged();\r\n    }\r\n\r\n    /**\r\n     * æåº\r\n     * @param sortName æåºå­æ®µï¼å¦ï¼ 'name,age'\r\n     * @param sortOrder æåºæ¹å¼ï¼å¦ï¼'desc, asc'\r\n     */\r\n    sort(sortName?: string, sortOrder?: string) {\r\n        if (sortName === null || sortName === '' || sortOrder === null || sortOrder === '') {\r\n            this.clearSort();\r\n        } else {\r\n            if (sortName && sortOrder) {\r\n                // this.updateSortInfo(sortName, sortOrder);\r\n                this.sortName = sortName;\r\n                this.sortOrder = sortOrder;\r\n                this.dfs.setSortInfo(this.sortName, this.sortOrder);\r\n            }\r\n\r\n            if (!this.remoteSort) {\r\n                this.dfs.clientSort();\r\n            }\r\n            this.onColumnSorted();\r\n        }\r\n    }\r\n\r\n    clearSort() {\r\n        this.sortName = '';\r\n        this.sortOrder = '';\r\n        this.dfs.setSortInfo('', '');\r\n        if (!this.remoteSort) {\r\n            if (this.data && this.data.length) {\r\n                this.dfs.clearSort();\r\n            }\r\n        }\r\n        this.onColumnSorted();\r\n    }\r\n\r\n    onColumnSorted() {\r\n        let params = null;\r\n        if (this.sortName && this.sortOrder) {\r\n            const orders = this.sortOrder.split(',');\r\n            params = this.sortName.split(',').reduce((r, n, i) => {\r\n                r[n] = orders[i] || 'asc';\r\n                return r;\r\n            }, {});\r\n        }\r\n\r\n        if (!this.remoteSort) {\r\n            this.dfs.clientSort();\r\n        }\r\n\r\n        this.columnSorted.emit(params);\r\n    }\r\n\r\n    updateSortInfo(newSortName, newSortOrder) {\r\n        const sortName = this.sortName;\r\n        const sortOrder = this.sortOrder;\r\n        let sortFields = [];\r\n        let sortOrders = [];\r\n        if (sortName) {\r\n            sortFields = sortName.split(',');\r\n            sortOrders = sortOrder.split(',');\r\n        }\r\n\r\n        const _sortFields = newSortName.split(',');\r\n        const _sortOrders = newSortOrder.split(',');\r\n\r\n\r\n        _sortFields.forEach((nField, nIndex) => {\r\n            const colOrder = _sortOrders[nIndex] || 'asc';\r\n            let newOrder = colOrder;\r\n            const i = sortFields.findIndex(n => n === nField);\r\n            if (i >= 0) {\r\n                const _order = sortOrders[i] === 'asc' ? 'desc' : 'asc';\r\n                newOrder = _order;\r\n                if (this.multiSort && newOrder === 'asc') {\r\n                    newOrder = undefined;\r\n                    sortFields.splice(i, 1);\r\n                    sortOrders.splice(i, 1);\r\n                } else {\r\n                    sortOrders[i] = _order;\r\n                }\r\n\r\n            } else {\r\n                if (this.multiSort) {\r\n                    sortFields.push(nField);\r\n                    sortOrders.push(colOrder);\r\n                } else {\r\n                    sortFields = [nField];\r\n                    sortOrders = [colOrder];\r\n                }\r\n            }\r\n        });\r\n\r\n        this.sortName = sortFields.join(',');\r\n        this.sortOrder = sortOrders.join(',');\r\n    }\r\n    /** åè®¾ç½® */\r\n    showControlPanel($event: MouseEvent) {\r\n        $event.stopPropagation();\r\n        const self = this;\r\n        if (this.useControlPanel && this.settingService) {\r\n            this.checkSettingHttp();\r\n            this.settingService.show(self);\r\n        }\r\n    }\r\n\r\n    checkSettingHttp() {\r\n        if (!this.settingService.httpRestService || !this.settingService.httpRestService.befRepository) {\r\n            const settingsHttp = this.inject.get(GRID_SETTINGS_HTTP, null);\r\n            this.settingService.httpRestService = settingsHttp;\r\n        }\r\n    }\r\n\r\n    disableHeader(flag = true) {\r\n        this.dgs.disableHeader.emit(flag);\r\n    }\r\n\r\n    /** è·åç¨æ·ä¸ªæ§åè®¾ç½® */\r\n    private userProfileSetting(settings) {\r\n\r\n        const { sortInfo, viewColumns, groupField, columnFormat } = settings;\r\n        let _sortName, _sortOrder;\r\n        if (sortInfo) {\r\n            const { sortName, sortOrder } = sortInfo;\r\n            _sortName = sortName;\r\n            _sortOrder = sortOrder\r\n            if (sortName && sortName.length) {\r\n                this.sortName = sortName.join(',');\r\n                if (sortOrder) {\r\n                    this.sortOrder = sortOrder.join(',');\r\n                }\r\n            }\r\n\r\n            this['__sortInfo'] = sortInfo;\r\n        }\r\n\r\n        if (viewColumns && viewColumns.length) {\r\n            this.columns = this.columns.map(cols => {\r\n                this.settingService.updateColumnFormat(cols, columnFormat, this);\r\n                return this.settingService.newVisibleOrderColumns(cols, viewColumns, columnFormat, this);\r\n            });\r\n\r\n            this.addControlCol();\r\n\r\n            this.columns.forEach(cols => {\r\n                cols.forEach(col => {\r\n                    if (_sortName && _sortName.length) {\r\n                        const i = _sortName.indexOf(col.field);\r\n                        if (i > -1) {\r\n                            col.order = _sortOrder[i];\r\n                        }\r\n                    }\r\n                });\r\n            });\r\n        }\r\n\r\n        if (this.groupRows && (groupField !== null && groupField !== undefined)) {\r\n            this.groupField = groupField;\r\n        }\r\n    }\r\n\r\n    // æ¯å¦ä¸ºå½åæ´»å¨çè¡¨æ ¼\r\n    private isActived() {\r\n        return DomHandler.hasClass(this.dgContainer.nativeElement, this._active_datagrid_cls);\r\n    }\r\n\r\n    // æ¸çæ æçDOM\r\n    private cleanDom() {\r\n        // æ¸ç TOOL-TIP\r\n        const tips = document.querySelectorAll('.datagrid-cell-tooltip');\r\n        if (tips && tips.length) {\r\n            tips.forEach(n => {\r\n                n.remove();\r\n            });\r\n        }\r\n    }\r\n\r\n    cellIsReadOnly(col: DataColumn, rowData) {\r\n        let readOnly = false;\r\n        if (this.disableRow) {\r\n            readOnly = this.disableRow(rowData);\r\n        }\r\n\r\n        if (!readOnly) {\r\n            if (col.readonly !== undefined) {\r\n                if (typeof col.readonly === 'boolean') {\r\n                    readOnly = col.readonly;\r\n                } else if (typeof col.readonly === 'function') {\r\n                    readOnly = col.readonly(rowData);\r\n                }\r\n            }\r\n        }\r\n        return readOnly;\r\n    }\r\n\r\n\r\n    private groupFieldChanged() {\r\n        this.columnsChanged();\r\n        if (this.settingService) {\r\n            this.checkSettingHttp();\r\n            this.settingService.saveUserConfig(this.id).subscribe();\r\n        }\r\n        this.groupFieldChange.emit({ newGroupField: this.groupField, grid: this });\r\n    }\r\n\r\n    removeGroupField(field: string) {\r\n        const fields = this.groupField.split(',');\r\n        const delIdx = fields.indexOf(field);\r\n        if (delIdx > -1) {\r\n            fields.splice(delIdx, 1).join(',');\r\n        }\r\n        this.groupField = fields.join(',');\r\n        this.toggleVisibleColumn([field], true);\r\n        this.groupFieldChanged();\r\n    }\r\n\r\n    clearAllGrouppingField($event) {\r\n        this.showLoading();\r\n        setTimeout(() => {\r\n            const fields = this.groupField.split(',');\r\n            this.groupField = '';\r\n            this.toggleVisibleColumn(fields, true);\r\n            this.groupFieldChanged();\r\n            this.closeLoading();\r\n        });\r\n    }\r\n\r\n    setGroupFields(groupFields) {\r\n        this.groupField = groupFields;\r\n        this.columnsChanged();\r\n    }\r\n\r\n    activeDataGrid(active = true) {\r\n        const grids = document.querySelectorAll('.f-datagrid.datagrid-active');\r\n        if (grids.length) {\r\n            grids.forEach(n => {\r\n                this.render2.removeClass(n, this._active_datagrid_cls);\r\n            });\r\n        }\r\n        if (active) {\r\n            this.render2.addClass(this.dgContainer.nativeElement, this._active_datagrid_cls);\r\n        }\r\n    }\r\n\r\n\r\n    onDatagridContainerFocus($event) {\r\n        if (!this.disabled) {\r\n            this.activeDataGrid();\r\n        }\r\n    }\r\n\r\n\r\n    private setShadowColumnForFastMode() {\r\n        if (this.fast) {\r\n            const fixedLeft = this.flatColumns.filter(n => n.fixed === 'left');\r\n            const fixedRight = this.flatColumns.filter(n => n.fixed === 'right');\r\n\r\n            if (fixedLeft && fixedLeft.length) {\r\n                let leftWidthTotal = 0;\r\n                if (this.showCheckbox) {\r\n                    leftWidthTotal += 36;\r\n                }\r\n                if (this.showLineNumber) {\r\n                    leftWidthTotal += this.lineNumberWidth;\r\n                }\r\n                fixedLeft.forEach((n, index) => {\r\n                    leftWidthTotal += index ? fixedLeft[index - 1].width : 0;\r\n                    n.left = leftWidthTotal;\r\n                });\r\n\r\n                fixedLeft[fixedLeft.length - 1]['leftShadowCol'] = true;\r\n\r\n                this.dfs.getColumn(fixedLeft[fixedLeft.length - 1].field)['leftShadowCol'] = true;\r\n            }\r\n\r\n            if (fixedRight && fixedRight.length) {\r\n                fixedRight[0]['rightShadowCol'] = true;\r\n                let rightWidthTotal = fixedRight.reduce((r, c) => {\r\n                    return r + c.width;\r\n                }, 0);\r\n\r\n                fixedRight.forEach((n, index) => {\r\n                    rightWidthTotal -= n.width;\r\n                    n.right = rightWidthTotal;\r\n                });\r\n\r\n                this.dfs.getColumn(fixedRight[0].field)['rightShadowCol'] = true;\r\n            }\r\n        }\r\n    }\r\n\r\n    // ååå¯¹é½æ¹å¼æ ·å¼å¨æçæ\r\n    private setCellStyle() {\r\n\r\n        if (!this.flatColumns || !this.flatColumns.length) {\r\n            return;\r\n        }\r\n\r\n        const cssarr = [];\r\n\r\n        const  verticalAlign = (column) => {\r\n            let va = 'center';\r\n            switch (column.valign) {\r\n                case 'top':\r\n                    va = 'flex-start';\r\n                    break;\r\n                case 'bottom':\r\n                    va = 'flex-end';\r\n                    break;\r\n                default:\r\n                    va = 'center';\r\n                    break;\r\n            }\r\n            return va;\r\n        };\r\n\r\n        const horizontalAlign = (column) => {\r\n            let ha = 'flex-start';\r\n            if (column.align === 'right') {\r\n                ha = 'flex-end';\r\n            } else if (column.align === 'center') {\r\n                ha = 'center';\r\n            }\r\n            return ha;\r\n        };\r\n\r\n        this.setShadowColumnForFastMode();\r\n\r\n        this.flatColumns.forEach(col => {\r\n            const css = `${this.customStyleKey()} .cell-text-align__${col.field} {align-items: ${verticalAlign(col)}, justify-content: ${horizontalAlign(col)}}`;\r\n            cssarr.push(css);\r\n\r\n            if (this.fast) {\r\n                if (col.fixed === 'left' || col.fixed === 'right') {\r\n                    let fixed = `${this.customStyleKey()} .f-datagrid-fast__fixed-${col.fixed}[field=\"${col.field}\"]{`;\r\n                    if (col.fixed === 'left') {\r\n                        fixed += `left: ${col.left}px}`;\r\n                    }\r\n\r\n                    if (col.fixed === 'right') {\r\n                        fixed += `right: ${col.right}px}`;\r\n                    }\r\n\r\n                    cssarr.push(fixed);\r\n                }\r\n            }\r\n        });\r\n\r\n        this.dgs.appendCssRules(cssarr);\r\n    }\r\n\r\n    private updateFixedColumnCssForFastMode(col: DataColumn) {\r\n        if (this.fast) {\r\n            // update css.\r\n            const colIndex = this.flatColumns.findIndex(n => n.field === col.field);\r\n            const nextColumn = this.flatColumns[colIndex + 1];\r\n            this.setShadowColumnForFastMode();\r\n            if (nextColumn && nextColumn.fixed) {\r\n                const ruleName =  `${this.customStyleKey()} .f-datagrid-fast__fixed-${nextColumn.fixed}[field=\"${nextColumn.field}\"]`;\r\n                const stylecss = ruleName + '{' + nextColumn.fixed + ':' + nextColumn[nextColumn.fixed] + 'px}';\r\n                this.dgs.appendCssRules([stylecss]);\r\n            }\r\n        }\r\n    }\r\n}\r\n","import { cloneDeep } from 'lodash-es';\r\nimport { IdService } from '@farris/ui-common';\r\nimport {\r\n    Component, OnInit, ViewChild, TemplateRef, Renderer2, ElementRef,\r\n    NgZone, Injector, Input, OnDestroy, HostListener, Optional\r\n} from '@angular/core';\r\nimport { FilterPanelService, FilterPanelComponent } from '@farris/ui-filter-panel';\r\nimport { DatagridComponent } from '../../datagrid.component';\r\nimport { DatagridSmartFilterService } from '../../services/datagrid-smart-filter.service';\r\n\r\n@Component({\r\n    selector: 'datagrid-smart-filter, [datagrid-smart-filter]',\r\n    templateUrl: 'datagrid-smart-filter.component.html',\r\n    providers: [\r\n        FilterPanelService\r\n    ]\r\n})\r\nexport class DatagridSmartFilterComponent implements OnInit, OnDestroy {\r\n    @Input() column;\r\n    @Input() filterData = null;\r\n    @Input() disabled = false;\r\n\r\n    @ViewChild('sort') sortTmp: TemplateRef<any>;\r\n\r\n    filterPanelRef: FilterPanelComponent;\r\n    private idService: IdService;\r\n    private smartFilterDataChanged$ = null;\r\n    private removeFilter$ = null;\r\n    private clearAllFilter$ = null;\r\n    private smartFilterEvents = [];\r\n    constructor(\r\n        private render: Renderer2, private el: ElementRef,\r\n        private zone: NgZone, private inject: Injector,\r\n        private filterPanelService: FilterPanelService,\r\n        private smartFilterSer: DatagridSmartFilterService,\r\n        @Optional() private dg: DatagridComponent\r\n        ) {\r\n            this.idService = this.inject.get(IdService, null);\r\n        }\r\n\r\n    ngOnInit() {\r\n\r\n        if (!this.removeFilter$) {\r\n            this.removeFilter$ = this.smartFilterSer.removeFilter.subscribe((e: any) => {\r\n                if (e && e.labelCode  === this.column.field) {\r\n                    this.filterData = null;\r\n                    this.render.removeClass(this.el.nativeElement, 'active');\r\n                }\r\n            });\r\n\r\n            this.smartFilterEvents.push(this.removeFilter$);\r\n        }\r\n\r\n        if (!this.clearAllFilter$) {\r\n            this.clearAllFilter$ = this.smartFilterSer.clearAllFilter.subscribe( () => {\r\n                this.filterData = null;\r\n                this.render.removeClass(this.el.nativeElement, 'active');\r\n            });\r\n\r\n            this.smartFilterEvents.push(this.clearAllFilter$);\r\n        }\r\n        if (this.dg && !this.smartFilterDataChanged$) {\r\n            this.smartFilterDataChanged$ = this.dg.dgs['smartFilterDataChange'].subscribe((e: any) => {\r\n                if (e && this.column.field === e.fieldCode) {\r\n                    this.filterData.value = e.value;\r\n                    this.filterData.control.single = e.control.single;\r\n                }\r\n            });\r\n            this.smartFilterEvents.push(this.smartFilterDataChanged$);\r\n        }\r\n\r\n        this.dg.dgs.clearFilter.subscribe(() => {\r\n            this.filterData = null;\r\n            this.render.removeClass(this.el.nativeElement, 'active');\r\n        });\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        if (this.filterPanelRef) {\r\n            this.filterPanelService.hidePanel();\r\n            this.filterPanelRef = null;\r\n        }\r\n\r\n        if (this.smartFilterEvents && this.smartFilterEvents.length) {\r\n            this.smartFilterEvents.forEach(n => {\r\n                n.unsubscribe();\r\n                n = null;\r\n            });\r\n\r\n            this.smartFilterEvents = [];\r\n        }\r\n    }\r\n\r\n\r\n\r\n    private getFilterData() {\r\n        const { field, title } = this.column;\r\n        if (!this.filterData) {\r\n            this.filterData = this.smartFilterSer.controlData.find(n => n.id === field);\r\n        }\r\n\r\n        if (!this.filterData) {\r\n            this.filterData = {\r\n                id: field,\r\n                labelCode: field,\r\n                code: field,\r\n                name: title,\r\n                control: this.smartFilterSer.getColumnFilterData(this.column),\r\n                placeHolder: '',\r\n                value: {\r\n                    value: ''\r\n                }\r\n            };\r\n        }\r\n\r\n        return cloneDeep(this.filterData);\r\n    }\r\n\r\n\r\n    private getPanelPosition($event) {\r\n        let x = $event.pageX - 33;\r\n        const y = $event.pageY +  9;\r\n        const targetRect = $event.target.getBoundingClientRect();\r\n        let moveArrow = 0;\r\n        if (window.innerWidth - x < 380) {\r\n            const i = 380 - (window.innerWidth - x);\r\n            x = x - i - 20;\r\n            moveArrow = targetRect.left - x;\r\n        }\r\n\r\n        return { x, y, moveArrow};\r\n    }\r\n\r\n    private hideFilterPanel() {\r\n        if (this.filterPanelRef) {\r\n            this.filterPanelService.hidePanel();\r\n            this.filterPanelRef = null;\r\n            if (!this.filterData ||  (this.filterData.control.controltype === 'bool-check' ? !this.filterData.value.value : !this.filterData.valueText)) {\r\n                this.render.removeClass(this.el.nativeElement, 'active');\r\n            }\r\n        }\r\n    }\r\n\r\n    private clearColumnFilter(e) {\r\n        this.filterData = null;\r\n        this.hideFilterPanel();\r\n        this.smartFilterSer.removeCondition(e);\r\n    }\r\n\r\n    showFilterPanel($event) {\r\n        $event.stopPropagation();\r\n\r\n        this.render.addClass(this.el.nativeElement, 'active');\r\n        const { x, y, moveArrow } = this.getPanelPosition($event);\r\n        this.filterPanelRef = this.filterPanelService.showPanel({\r\n            left: x,\r\n            top: y,\r\n            item: this.getFilterData(),\r\n            panelExtendTemplate: this.column.sortable ? this.sortTmp : null,\r\n            localStorageKey: 'smartfilter_' + this.dg.dgs.createConfigKey(this.dg.id),\r\n            target: $event.target\r\n        });\r\n\r\n        if (moveArrow) {\r\n            const arrowEl = this.filterPanelRef['el'].querySelector('.f-filter-panel-arrow');\r\n            if (arrowEl) {\r\n                this.render.setStyle(arrowEl, 'left', `${moveArrow}px`);\r\n            }\r\n        }\r\n\r\n        this.filterPanelRef.hidePanel.subscribe(e => {\r\n            this.hideFilterPanel();\r\n        });\r\n\r\n        this.filterPanelRef.filterSubmit.subscribe(e => {\r\n            \r\n            if (e.filter && e.filter.length) {\r\n                this.filterData = e.item || null;\r\n                this.hideFilterPanel();\r\n                this.smartFilterSer.filterConditionChanged({ conditions: e.filter, controlData: e.item , from: 'panel'});\r\n            } else {\r\n                this.clearColumnFilter(e.item);\r\n            }\r\n        });\r\n\r\n        this.filterPanelRef.clearFilter.subscribe((e: any) => {\r\n            this.clearColumnFilter(e);\r\n        });\r\n    }\r\n\r\n    @HostListener('click', ['$event'])\r\n    onClick($event) {\r\n        $event.stopPropagation();\r\n        if (this.disabled) {\r\n            return;\r\n        }\r\n        this.showFilterPanel($event);\r\n        return false;\r\n    }\r\n\r\n    onSort($event, order) {\r\n        $event.stopPropagation();\r\n\r\n        if (this.column.order === order) {\r\n            this.column.order = '';\r\n        } else {\r\n            this.column.order = order;\r\n        }\r\n\r\n        const sortName = this.dg.sortName;\r\n        const sortOrder = this.dg.sortOrder;\r\n        let sortFields = [];\r\n        let sortOrders = [];\r\n        if (sortName) {\r\n            sortFields = sortName.split(',');\r\n            sortOrders = sortOrder.split(',');\r\n        }\r\n\r\n        let newOrder =  this.column.order;\r\n        const i = sortFields.findIndex(n => n === this.column.field);\r\n        if (i >= 0) {\r\n            if (newOrder === '') {\r\n                newOrder = undefined;\r\n                sortFields.splice(i, 1);\r\n                sortOrders.splice(i, 1);\r\n            } else {\r\n                sortOrders[i] = newOrder;\r\n            }\r\n        } else {\r\n            if (this.dg.multiSort) {\r\n                sortFields.push(this.column.field);\r\n                sortOrders.push(newOrder);\r\n            } else {\r\n                sortFields = [this.column.field];\r\n                sortOrders = [newOrder];\r\n            }\r\n        }\r\n\r\n        this.hideFilterPanel();\r\n\r\n\r\n        this.dg.sortName = sortFields.join(',');\r\n        this.dg.sortOrder = sortOrders.join(',');\r\n        this.dg.dfs.setSortInfo(this.dg.sortName, this.dg.sortOrder);\r\n\r\n        this.dg.beforeSortColumn(this.dg.sortName, this.dg.sortOrder, this.dg).subscribe(() => {\r\n            this.dg.onColumnSorted();\r\n        });\r\n    }\r\n}\r\n","import { LocaleModule } from '@farris/ui-locale';\r\nimport { NgModule } from '@angular/core';\r\nimport { FilterPanelModule, FilterPanelComponent } from '@farris/ui-filter-panel';\r\nimport { DatagridSmartFilterComponent } from './datagrid-smart-filter.component';\r\n\r\n@NgModule({\r\n    declarations: [\r\n        DatagridSmartFilterComponent\r\n    ],\r\n    imports: [\r\n        FilterPanelModule,\r\n        LocaleModule.forRoot(),\r\n    ],\r\n    exports: [\r\n        DatagridSmartFilterComponent\r\n    ]\r\n})\r\nexport class DatagridSmartFilterModule { }\r\n","import { DatagridComponent } from './../datagrid.component';\r\nimport { LocaleService } from '@farris/ui-locale';\r\nimport { Pipe, PipeTransform, Injector, Optional, ElementRef, LOCALE_ID } from '@angular/core';\r\nimport { Utils } from './utils';\r\nimport { ColumnFormatService } from '@farris/ui-common/column';\r\nimport { DataColumn } from '../types/data-column';\r\n\r\n@Pipe({name: 'formatCellData', pure: false})\r\nexport class FormatCellDataPipe implements PipeTransform {\r\n\r\n    private localeService: LocaleService;\r\n    private dataGrid: DatagridComponent;\r\n    private elRef: ElementRef;\r\n    private localeId = 'ZH-CHS';\r\n    constructor(private cfs: ColumnFormatService, @Optional() private injector?: Injector) {\r\n        this.localeId = this.injector.get(LOCALE_ID);\r\n    }\r\n\r\n    transform(col: any, rowData: any, groupFooter = false, footer = false): any {\r\n        if (rowData && col && col.field) {\r\n            const value = Utils.getValue(col.field, rowData);\r\n            if (col.editor && col.editor.options && col.editor.options.isPassword && !col.formatter) {\r\n                return  value ? '******' : '';\r\n            }\r\n\r\n            let formatterFn = col.formatter;\r\n            if (groupFooter) {\r\n                formatterFn = col.groupFooter ? col.groupFooter.formatter : undefined;\r\n            } else if (footer) {\r\n                formatterFn = col.footer ? col.footer.formatter : undefined;\r\n                if (typeof formatterFn === 'object') {\r\n                    if (!formatterFn.options) {\r\n                        const opts = { type: formatterFn.type, options: formatterFn };\r\n                        formatterFn = opts;\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (!formatterFn) {\r\n                let resoultStr = value;\r\n                if (col.isMultilingualField) {\r\n                    resoultStr = this.getMultilingualValue(value);\r\n                } else {\r\n                    if (value !== null && value !== undefined && value !== '0' && typeof value === 'string') {\r\n                        if (value.indexOf('\\n') > -1) {\r\n                            // return value.replace(/\\n/g, '<br>');\r\n                            this.getDatagridInstance();\r\n                            if (this.dataGrid && this.dataGrid.nowrap) {\r\n                                resoultStr = value.replace(/\\n/g, ' ');\r\n                            }\r\n                        }\r\n                    }\r\n                    // value.replace(/ /g, '&ensp;');\r\n                }\r\n                return this.setPlaceHolderWhenEnableEditCellStyle(col, resoultStr, rowData, groupFooter || footer);\r\n            } else {\r\n                if (formatterFn) {\r\n                    if ( formatterFn.type === 'number') {\r\n                        if (!formatterFn.options || !Object.keys(formatterFn.options).length ) {\r\n                            formatterFn.options = {\r\n                                thousand: ',',\r\n                                precision: 2\r\n                            };\r\n                        }\r\n                    }\r\n                    if ( formatterFn.type === 'datetime') {\r\n                        if (formatterFn.options) {\r\n                            if (col.editor && col.editor.options) {\r\n                                const { dateRange, dateRangeDatesDelimiter } = col.editor.options;\r\n                                formatterFn.options = Object.assign({ dateRange, dateRangeDatesDelimiter }, formatterFn.options);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n\r\n\r\n                this.getDatagridInstance();\r\n                if (this.dataGrid) {\r\n                    const r = this.cfs.format(value, rowData, formatterFn, { utils: this.dataGrid.commonUtils });\r\n                    return this.setPlaceHolderWhenEnableEditCellStyle(col, r, rowData, groupFooter || footer);\r\n                } else {\r\n                    return this.cfs.format(value, rowData, formatterFn);\r\n                }\r\n            }\r\n        }\r\n\r\n        return '';\r\n    }\r\n\r\n    // è·åå¤è¯­æ°æ®\r\n    private getMultilingualValue(valObj) {\r\n        if (valObj && typeof valObj === 'object' && Object.keys(valObj).length > 0) {\r\n            if (this.injector) {\r\n                this.localeService = this.injector.get(LocaleService);\r\n            }\r\n            if (this.localeService) {\r\n                const localeId = this.localeService.localeId;\r\n                return Utils.getMultilingualValue(valObj, localeId);\r\n            } else {\r\n                return valObj['zh-CHS'];\r\n            }\r\n        } else {\r\n            return '';\r\n        }\r\n    }\r\n\r\n    // å¯ç¨æ è¯å¯ç¼è¾ååæ ¼æ¶ï¼åå®¹ä¸ºç©ºæ¶è®¾ç½®æç¤ºè¯­\r\n    private setPlaceHolderWhenEnableEditCellStyle(col, val, rowData, isFooter) {\r\n        this.getDatagridInstance();\r\n        if (this.dataGrid) {\r\n            /*\r\n            if (!this.dataGrid.editable || (val !== null && val !== undefined && val !== '') || isFooter || this.cellIsReadOnly(col, rowData)) {\r\n                if (this.elRef) {\r\n                    const span = this.elRef.nativeElement.querySelector('.cell-text-box');\r\n                    if (span && span.className.indexOf('cell-empty') > -1) {\r\n                        span.className = span.className.replace('cell-empty', ' ');\r\n                    }\r\n                }\r\n\r\n                return val;\r\n            }\r\n*/\r\n            if (this.dataGrid.enableEditCellStyle ) {\r\n\r\n                if (!this.dataGrid.editable || (val !== null && val !== undefined && val !== '') || isFooter || this.cellIsReadOnly(col, rowData)) {\r\n                    if (this.elRef) {\r\n                        const span = this.elRef.nativeElement.querySelector('.cell-text-box');\r\n                        if (span && span.className.indexOf('cell-empty') > -1) {\r\n                            span.className = span.className.replace('cell-empty', ' ');\r\n                        }\r\n                    }\r\n    \r\n                    return val;\r\n                }\r\n\r\n\r\n                if (this.elRef) {\r\n                    const span = this.elRef.nativeElement.querySelector('.cell-text-box');\r\n                    if (span && span.className.indexOf('cell-empty') === -1) {\r\n                        span.className = span.className + ' cell-empty';\r\n                    }\r\n                }\r\n                return Utils.getWhenEmptyText(col, this.localeId);\r\n            }\r\n\r\n            return val;\r\n        }\r\n\r\n        return val;\r\n    }\r\n\r\n    private getDatagridInstance() {\r\n        if (!this.dataGrid) {\r\n            this.dataGrid = this.injector.get(DatagridComponent, null);\r\n        }\r\n\r\n        if (!this.elRef) {\r\n            this.elRef = this.injector.get(ElementRef, null);\r\n        }\r\n    }\r\n\r\n    cellIsReadOnly(col: DataColumn, rowData) {\r\n        return this.dataGrid.cellIsReadOnly(col, rowData);\r\n    }\r\n}\r\n","\r\nimport { first, switchMap, delay, debounceTime, tap, takeUntil, filter } from 'rxjs/operators';\r\nimport { Subscription, interval, of, Subject } from 'rxjs';\r\nimport ResizeObserver from 'resize-observer-polyfill';\r\n/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @Date: 2019-08-12 07:47:12\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-11-26 10:21:25\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\nimport {\r\n    Component, OnInit, Input, ViewChild, Renderer2,\r\n    ElementRef, OnDestroy, ChangeDetectorRef, AfterViewInit, AfterViewChecked,\r\n    OnChanges, SimpleChanges, ChangeDetectionStrategy, NgZone, Injector, forwardRef, Inject, Optional, ApplicationRef, HostListener, Output, EventEmitter\r\n} from '@angular/core';\r\n\r\nimport { DatagridFacadeService } from '../../services/datagrid-facade.service';\r\nimport { ScrollbarDirective } from '../../scrollbar/scrollbar.directive';\r\nimport { ColumnGroup } from '../../types';\r\nimport { SelectedRow, DataResult, ROW_INDEX_FIELD, IS_GROUP_ROW_FIELD, GROUP_ROW_FIELD, IS_GROUP_FOOTER_ROW_FIELD } from '../../services/state';\r\nimport { SCROLL_X_ACTION, SCROLL_Y_ACTION, SCROLL_X_REACH_START_ACTION, SCROLL_X_REACH_END_ACTION, TR_PREFIX } from '../../types/constant';\r\nimport { DatagridService } from '../../services/datagrid.service';\r\nimport { DatagridComponent } from '../../datagrid.component';\r\nimport { FormatCellDataPipe } from '../../utils/format-cell-data.pipe';\r\nimport { ColumnFormatService } from '@farris/ui-common/column';\r\nimport { ContextMenuItem } from '@farris/ui-context-menu';\r\n\r\n@Component({\r\n    selector: 'datagrid-body',\r\n    templateUrl: './body.component.html',\r\n    changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class DatagridBodyComponent implements OnInit, OnDestroy, OnChanges, AfterViewInit, AfterViewChecked {\r\n    // èªå¨é«åº¦æ¶ï¼ç¦ç¨çºµåæ»å¨æ¡\r\n    psConfig = { swipeEasing: false, minScrollbarLength: 15, handlers: ['click-rail', 'drag-thumb', 'wheel', 'touch'], suppressScrollY: this.dg.autoHeight };\r\n\r\n    top: number;\r\n    height: number;\r\n    width: number;\r\n    colsWidth: number;\r\n    totalWidth: number;\r\n    leftFixedWidth: number;\r\n    rightFixedWidth: number;\r\n    rowHeight: number;\r\n    bodyStyle: any;\r\n    scrollTop = 0;\r\n    scrollLeft = 0;\r\n    deltaTopHeight = 0;\r\n    // wheelHeight = 0;\r\n    wheelWidth = 0;\r\n    private _fixedRightScrollLeft = 0;\r\n    get fixedRightScrollLeft() {\r\n        return this._fixedRightScrollLeft;\r\n    }\r\n    set fixedRightScrollLeft(val) {\r\n        this._fixedRightScrollLeft = val;\r\n    }\r\n\r\n    maxScrollLeft = 0;\r\n    showRightShadow = false;\r\n    @Input() footerHeight = 0;\r\n    @Input() canvasWidth;\r\n    @Input() columnsGroup: ColumnGroup;\r\n    // èæå è½½\r\n    @Input() topHideHeight = 0;\r\n    @Input() bottomHideHeight = 0;\r\n\r\n    @Input() startRowIndex = 0;\r\n    @Input() data: any;\r\n\r\n    @Output() dataChange = new EventEmitter();\r\n\r\n    @Input() scrollBarMode = 'auto';\r\n    @Input() contextMenuItems: ContextMenuItem[];\r\n\r\n    @Input() checkedRows = [];\r\n\r\n    /** æ§è½ä¼åçï¼é»è®¤ä¸º false */\r\n    @Input() fast = false;\r\n\r\n\r\n    @ViewChild('ps') ps?: ScrollbarDirective;\r\n    @ViewChild('mainRows') tableRowsCmp: any;\r\n    @ViewChild('rightRows') rightRowsCmp: any;\r\n    @ViewChild('fixedLeft') fixedLeftEl: ElementRef;\r\n    @ViewChild('fixedRight') fixedRightEl: ElementRef;\r\n    @ViewChild('main') mainArea: ElementRef;\r\n    @ViewChild('viewScrollContainer') viewScrollContainer: ElementRef;\r\n\r\n\r\n    visibleContextMenus = [];\r\n\r\n    currentRowId = undefined;\r\n\r\n    private _hoverRowIndex = -1;\r\n    get hoverRowIndex(): number {\r\n        return this._hoverRowIndex;\r\n    }\r\n    set hoverRowIndex(rowIdx: number) {\r\n        this._hoverRowIndex = rowIdx;\r\n        this.cd.detectChanges();\r\n    }\r\n\r\n    get selectedRows() {\r\n        return this.dg.selections;\r\n    }\r\n\r\n    private gridSizeSubscribe: Subscription;\r\n    private columnResizeSubscribe: Subscription;\r\n    private onDataSourceChangeSubscribe: Subscription;\r\n    private selectRowSubscribe: Subscription;\r\n    private unselectRowSubscribe: Subscription;\r\n    private selectAllSubscribe: Subscription;\r\n    private checkRowSubscribe: Subscription;\r\n    private clearSelectionsSubscribe: Subscription;\r\n    private checkAllSubscribe: Subscription;\r\n    private uncheckRowSubscribe: Subscription;\r\n    private clearCheckedsSubscribe: Subscription;\r\n\r\n    private subscriptions = [];\r\n\r\n    public dfs: DatagridFacadeService;\r\n    public dgs: DatagridService;\r\n    public ngZone: NgZone;\r\n    public render: Renderer2;\r\n\r\n    ///////////////////////////////////////////////////////////////////////////\r\n    private viewportH;\r\n    viewportW;\r\n    canvasHeight;\r\n    private minRowBuffer = 3;\r\n    private vScrollDir = 1;\r\n    private rowsCache = {};\r\n    private lastRenderedScrollTop = 0;\r\n    private lastRenderedScrollLeft = 0;\r\n    prevScrollTop = 0;\r\n    prevScrollLeft = 0;\r\n    rows = [];\r\n    blankTopHeight = 0;\r\n    blankBottomHeight = 0;\r\n\r\n    //////////////////////////////////////////////////////////////////////////\r\n\r\n    get scrollbarXHeight() {\r\n        if (this.dg && this.ps && this.ps.instance) {\r\n            const h = this.dg.scrollBarShowMode === 'allways' && this.ps.instance['scrollbarXActive'] ? 22 : 0;\r\n            if (this.ps.instance['scrollbarYActive'] && h) {\r\n                return h + 18; // + (this.dg.showScrollArrow && this.ps.instance['scrollbarYActive'] ? 18 : 0);\r\n            }\r\n\r\n        }\r\n    }\r\n    get scrollbarYWidth() {\r\n        if (this.dg && this.ps && this.ps.instance) {\r\n            return this.dg.scrollBarShowMode === 'allways' && this.ps.instance['scrollbarYActive'] && this.showRightShadow ? 18 : 0;\r\n        }\r\n    }\r\n\r\n    cellContentFormatter: FormatCellDataPipe = null;\r\n\r\n    // å½å¯ç¨å¤éä¸åè®¸å¤éä¸­ï¼åè¡¨ä¸è½ç¼è¾æ¶ï¼åéä¸­åç¦æ­¢è§¦åbody çclick äºä»¶\r\n    private __triggerBodyClickEvent = true;\r\n    private destroy$ = new Subject();\r\n    private _onMouseClick = null;\r\n    private _scrollTimer: any = 0;\r\n    private _scrollXTimer: any = 0;\r\n    private ro: ResizeObserver | null = null;\r\n    private resizeObserverTimer: any = 0;\r\n    constructor(\r\n        private injector: Injector,\r\n        private app: ApplicationRef,\r\n        @Optional() public dg: DatagridComponent,\r\n        private cd: ChangeDetectorRef, private el: ElementRef\r\n    ) {\r\n        this.dfs = this.injector.get(DatagridFacadeService);\r\n        this.dgs = this.injector.get(DatagridService);\r\n        this.ngZone = this.injector.get(NgZone);\r\n        this.render = this.injector.get(Renderer2);\r\n\r\n        const columnFormatService = this.injector.get(ColumnFormatService);\r\n        this.cellContentFormatter = new FormatCellDataPipe(columnFormatService, this.injector);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n\r\n        this.listenSubjects();\r\n        this.dg.scrollInstance = this.ps;\r\n        const s1 = this.dgs.showGridHeader.subscribe(headerHeight => {\r\n            this.updateContainerSize(headerHeight);\r\n        });\r\n        this.subscriptions.push(s1);\r\n\r\n        const s10 = this.dgs.footerPositionChanged.subscribe(() => {\r\n            this.updateContainerSize();\r\n        });\r\n        this.subscriptions.push(s10);\r\n\r\n        const s2 = this.dgs.rowHeightChanged.subscribe(() => {\r\n            this.cd.detectChanges();\r\n        });\r\n        this.subscriptions.push(s2);\r\n\r\n        const s3 = this.dfs.clientSort$.subscribe(() => {\r\n            this.checkScrollbarPosition(true);\r\n            this.cd.detectChanges();\r\n            // this.dg.columnSorted.emit();\r\n        });\r\n        this.subscriptions.push(s3);\r\n\r\n        const s5 = this.dg.dgs.columnsChanged.pipe(\r\n            delay(100)\r\n        ).subscribe((e: any) => {\r\n            if (e && e.scrollToLeft) {\r\n                this.ps.elementRef.nativeElement.scrollTo(0, 0);\r\n                this.ps.scrollToLeft(0, 100);\r\n            }\r\n        });\r\n        this.subscriptions.push(s5);\r\n        this.viewScrollContainer.nativeElement.addEventListener('click', this._onMouseClick = (e) => {\r\n            this.onMouseClick(e);\r\n        });\r\n    }\r\n\r\n    private updateContainerSize(headerHeight?: any) {\r\n        const hh = headerHeight || this.dg.realHeaderHeight;\r\n        this.setPositionTop(hh);\r\n        this.height = this.dg.height - this.top;\r\n        this.bodyStyle = this.getBodyStyle();\r\n        this.cd.detectChanges();\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (changes.data && !changes.data.isFirstChange()) {\r\n            this.bodyStyle = this.getBodyStyle();\r\n            this.dfs.setCurrentPageData(changes.data.currentValue);\r\n\r\n            const isDiffrentDataSource = !!changes.data.currentValue.map(n => n.id).filter(n => {\r\n                return !changes.data.previousValue.find(p => p.id === n)\r\n            }).length;\r\n\r\n            this.onDataChanged(isDiffrentDataSource);\r\n\r\n            if (!changes.data.currentValue || !changes.data.currentValue.length) {\r\n                setTimeout(() => {\r\n                    this.setPositionTop(this.dg.realHeaderHeight);\r\n                });\r\n            }\r\n        }\r\n\r\n        if (changes.footerHeight !== undefined && !changes.footerHeight.isFirstChange()) {\r\n            this.bodyStyle = this.getBodyStyle();\r\n        }\r\n\r\n        if (changes.scrollBarMode !== undefined && !changes.scrollBarMode.isFirstChange()) {\r\n            if (this.ps && this.ps.instance && this.scrollBarMode === 'allways' && this.ps.instance.scrollbarYActive) {\r\n                this.rightFixedWidth += this.showRightShadow ? 18 : 0;\r\n            } else {\r\n                this.rightFixedWidth = this.columnsGroup.rightFixedWidth;\r\n            }\r\n             \r\n            if (this.dg.scrollBarShowMode === 'allways' && this.ps && this.ps.instance && this.ps.instance.scrollbarXActive) {\r\n                this.blankBottomHeight += 22;\r\n            }\r\n        }\r\n\r\n        if (changes.showScrollArrow && !changes.showScrollArrow.isFirstChange()) {\r\n            this.ps && this.ps.update();\r\n        }\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.destroy$.next();\r\n        this.destroy$.complete();\r\n        this.cellContentFormatter = null;\r\n        this.dg.scrollInstance = null;\r\n        this.destroySubscriptions();\r\n        this.viewScrollContainer.nativeElement.removeEventListener('click', this._onMouseClick);\r\n\r\n        if (this.ro) {\r\n            this.ro.unobserve(this.viewScrollContainer.nativeElement);\r\n            this.ro.disconnect();\r\n        }\r\n\r\n        if (this.resizeObserverTimer) {\r\n            clearTimeout(this.resizeObserverTimer);\r\n        }\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        this.ro = new ResizeObserver((e) => {\r\n            if (this.viewScrollContainer.nativeElement.offsetParent) {\r\n                if (this.resizeObserverTimer) {\r\n                    clearTimeout(this.resizeObserverTimer);\r\n                }\r\n                this.resizeObserverTimer = setTimeout(() => {\r\n                    this.updateCanvasHeight();\r\n                    if (this.scrollBarMode === 'allways') {\r\n                        this.ps.update();\r\n                    }\r\n                    this.cd.detectChanges();\r\n                    this.dgs.scrollbarUpdate.emit({ scrollbarRef: this.ps.instance, rightWidth: this.rightFixedWidth });\r\n                }, 100);\r\n            }\r\n        });\r\n\r\n        this.ro.observe(this.viewScrollContainer.nativeElement);\r\n    }\r\n\r\n    ngAfterViewChecked() {\r\n    }\r\n\r\n    private setPositionTop(headerHeight: number) {\r\n        this.top = headerHeight;\r\n        if ((this.dg.enableFilterRow || this.dg.enableSmartFilter) && this.dg.showFilterBar) {\r\n            this.top += this.dg.filterBarHeight;\r\n        }\r\n\r\n        if (this.dg.showRowGroupPanel) {\r\n            this.top += this.dg.rowGroupPanelHeight;\r\n        }\r\n\r\n        if (this.dg.showFooter && (this.dg.footerPosition === 'top' || this.dg.footerPosition === 'both')) {\r\n            this.top += this.dg.footerHeight;\r\n        }\r\n    }\r\n\r\n    private checkScrollbarPosition(toTop = false) {\r\n        if (!this.dg.data || !this.dg.data.length) {\r\n            return;\r\n        }\r\n        const scrollBar: any = this.ps.instance;\r\n        const scrollElRef = this.ps.elementRef.nativeElement;\r\n        // scrollBar.update();\r\n        const lastScrollLeft = scrollBar ? scrollBar.lastScrollLeft : 0;\r\n        const lastScrollTop = scrollBar ? scrollBar.lastScrollTop : 0;\r\n\r\n        // const lastScrollLeft = this.scrollLeft;\r\n        // const lastScrollTop = this.scrollTop;\r\n\r\n        const scrollTop = scrollElRef.scrollTop;\r\n        const scrollLeft = scrollElRef.scrollLeft;\r\n\r\n        if (!toTop) {\r\n            if (scrollTop != lastScrollTop) {\r\n                this.ps.scrollToTop(lastScrollTop);\r\n                this.dgs.onScrollMove(lastScrollTop, SCROLL_Y_ACTION);\r\n            }\r\n        } else {\r\n            this.ps.scrollToTop();\r\n            this.dgs.onScrollMove(lastScrollTop, SCROLL_Y_ACTION);\r\n        }\r\n\r\n        this.scrollLeft = lastScrollLeft;\r\n        if (scrollLeft != lastScrollLeft) {\r\n            this.ps.scrollToX(lastScrollLeft);\r\n            this.dgs.onScrollMove(lastScrollLeft, SCROLL_X_ACTION);\r\n        } else {\r\n            if (lastScrollLeft) {\r\n                this.dgs.onScrollMove(lastScrollLeft, SCROLL_X_ACTION);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * æ°æ®åçååï¼éæ°å è½½æ°æ®æ¶æ§è¡\r\n     * éç½®æ»å¨æ¡ä½ç½®\r\n     */\r\n    private onDataChanged(isDiffrentDataSource = true) {\r\n        this.dg.setPagerHeight();\r\n        this.viewportH = this.getViewPortHeight();\r\n        this.bodyStyle = this.getBodyStyle();\r\n\r\n        /**\r\n         * update:\r\n         * node_modules\\perfect-scrollbar\\types\\perfect-scrollbar.d.ts\r\n         * lastScrollTop: number\r\n         */\r\n        if (this.ps && this.ps.instance && !this.dg.isEditing() && !this.dg.clientFilterChanged && !this.dg.autoHeight ) {\r\n            this.scrollTop = 0;\r\n            this.lastRenderedScrollTop = 0;\r\n            this.ps.scrollToTop();\r\n            this.scrollLeft = 0;\r\n            this.ps.scrollToLeft();\r\n        }\r\n\r\n        this.rowsCache = {};\r\n        const keepscrollPos = () => {\r\n            const scrollInfo = this.dg.dfs.getState().scrollInfo;\r\n            if (scrollInfo) {\r\n                if (scrollInfo.y) {\r\n                    this.scrollTop = scrollInfo.y;\r\n                    this.dg.scrollInstance.scrollToY(scrollInfo.y);\r\n                    this.dgs.onScrollMove(scrollInfo.y, SCROLL_Y_ACTION);\r\n                }\r\n\r\n                if (scrollInfo.x) {\r\n                    this.scrollLeft = scrollInfo.x;\r\n                    this.dg.scrollInstance.scrollToX(scrollInfo.x);\r\n                    this.dg.dgs.onScrollMove(scrollInfo.x, SCROLL_X_ACTION);\r\n                }\r\n            }\r\n        };\r\n\r\n        if (!this.dg.nowrap || this.dg.autoHeight) {\r\n            this.renderData(false);\r\n            setTimeout(() => {\r\n                this.updateRowHeight();\r\n            }, 100);\r\n        } else {\r\n            keepscrollPos();\r\n            this.renderData(false);            \r\n            this.ps.update();\r\n        }\r\n        if (isDiffrentDataSource) {\r\n            this.dg.initSelectOrChecked();\r\n        } else {\r\n            this.dg.refreshSelectedData();\r\n        }\r\n        this.dg.clientFilterChanged = false;\r\n        this.dataChange.emit(this.data);\r\n    }\r\n\r\n    private destroySubscriptions() {\r\n        if (this.subscriptions && this.subscriptions.length) {\r\n            this.subscriptions.forEach((sub: Subscription) => {\r\n                if (sub) {\r\n                    sub.unsubscribe();\r\n                    sub = null;\r\n                }\r\n            });\r\n\r\n            this.subscriptions = [];\r\n        }\r\n    }\r\n\r\n    private listenSubjects() {\r\n        this.destroySubscriptions();\r\n\r\n        this.gridSizeSubscribe = this.dfs.gridSize$.pipe(\r\n            takeUntil(this.destroy$)\r\n        ).pipe(\r\n            debounceTime(50)\r\n        ).subscribe(state => {\r\n            if (state) {\r\n                this.dg.setPagerHeight();\r\n                const hh = this.dg.setHeaderHeight();\r\n                this.setPositionTop(hh);\r\n\r\n                this.height = state.height - this.top;\r\n\r\n                const oldWidth = this.width;\r\n                this.width = Math.floor(state.width);\r\n                this.rowHeight = state.rowHeight;\r\n\r\n                if (this.dg.showBorder) {\r\n                    this.width -= 2;\r\n                }\r\n\r\n                this.viewportW = this.width;\r\n                this.viewportH = this.getViewPortHeight();\r\n                this.canvasHeight = this.getCanvasHeight();\r\n\r\n                this.ngZone.runOutsideAngular(() => {\r\n                    this.columnsGroup = state.columnsGroup;\r\n                    this.checkScrollbarPosition();\r\n                    // this.setFixedRightPosition();\r\n                    this.updateColumnSize(state.columnsGroup);\r\n\r\n                    this.dgs.showFixedShadow.emit({ showRightShadow: this.showRightShadow, x: this.fixedRightScrollLeft });\r\n                    this.renderData(false);\r\n                    \r\n                    if (this._scrollXTimer) {\r\n                        clearTimeout(this._scrollXTimer);\r\n                    }\r\n                    if (!this.dg.nowrap || this.dg.autoHeight) {\r\n                        this._scrollXTimer = setTimeout(() => {\r\n                            this.updateRowHeight();\r\n                            this.keepScrollbarPosition(oldWidth);\r\n                        }, 100);\r\n                    } else {\r\n                        this._scrollXTimer = setTimeout(() => {\r\n                            this.keepScrollbarPosition(oldWidth);\r\n                        }, 100);\r\n                    }\r\n                    // this.ps.update();\r\n                });\r\n\r\n                if (this.scrollBarMode === 'allways') {\r\n                    setTimeout(() => {\r\n                        if (!this.dg.showScrollArrow) {\r\n                            this.dgs.scrollbarUpdate.emit({ scrollbarRef: this.ps.instance, rightWidth: this.rightFixedWidth });\r\n                        }\r\n                        this.keepScrollbarPosition(oldWidth);\r\n                    }, 100);\r\n                }\r\n            }\r\n        });\r\n\r\n        this.subscriptions.push(this.gridSizeSubscribe);\r\n\r\n        this.columnResizeSubscribe = this.dfs.columnResize$.subscribe((cg: ColumnGroup) => {\r\n            this.updateColumnSize(cg);\r\n            this.cd.detectChanges();\r\n        });\r\n        this.subscriptions.push(this.columnResizeSubscribe);\r\n\r\n        this.dgs.setSelecedRow.subscribe((r: any) => {\r\n            if (r && r.selected) {\r\n                this.currentRowId = r.id;\r\n            } else {\r\n                this.currentRowId = undefined;\r\n            }\r\n        });\r\n        this.selectRowSubscribe = this.dfs.selectRow$.subscribe((row: SelectedRow) => {\r\n            if (row) {\r\n                this.currentRowId = row.id;\r\n                // 20210817 æ¹åé®ç§»å¨åå·æ°è§å¾ç¶æ\r\n                this.cd.detectChanges();\r\n            }\r\n        });\r\n        this.subscriptions.push(this.selectRowSubscribe);\r\n\r\n        this.unselectRowSubscribe = this.dfs.unSelectRow$.subscribe((prevRow: SelectedRow) => {\r\n            if (prevRow && prevRow.id === this.currentRowId) {\r\n                this.currentRowId = undefined;\r\n                this.dg.selectedRow = null;\r\n            }\r\n\r\n            if (!this.dg.editable && this.dg.multiSelect) {\r\n                this.__triggerBodyClickEvent = this.dg.selectionMode === 'default';\r\n            }\r\n\r\n            this.cd.detectChanges();\r\n        });\r\n        this.subscriptions.push(this.unselectRowSubscribe);\r\n\r\n        this.selectAllSubscribe = this.dfs.selectAll$.subscribe((rows: SelectedRow[]) => {\r\n            this.dg.selectAll.emit(rows);\r\n            this.cd.detectChanges();\r\n        });\r\n        this.subscriptions.push(this.selectAllSubscribe);\r\n\r\n        this.checkRowSubscribe = this.dfs.checkRow$.subscribe((row: SelectedRow) => {\r\n            this.dg.checked.emit(row);\r\n            this.checkedRowsChanged();\r\n            // this.cd.detectChanges();\r\n        });\r\n        this.subscriptions.push(this.checkRowSubscribe);\r\n\r\n        this.clearSelectionsSubscribe = this.dfs.clearSelections$.subscribe(() => {\r\n            this.currentRowId = undefined;\r\n            if (this.dg.checkOnSelect) {\r\n                this.checkedRowsChanged();\r\n            }\r\n            this.dg.unSelectAll.emit();\r\n        });\r\n        this.subscriptions.push(this.clearSelectionsSubscribe);\r\n\r\n        this.uncheckRowSubscribe = this.dfs.unCheckRow$.subscribe((prevRow: SelectedRow) => {\r\n            this.dg.unChecked.emit(prevRow);\r\n            this.checkedRowsChanged();\r\n            // this.cd.detectChanges();\r\n        });\r\n        this.subscriptions.push(this.uncheckRowSubscribe);\r\n\r\n        this.checkAllSubscribe = this.dfs.checkAll$.subscribe((rows: SelectedRow[]) => {\r\n            this.dg.checkAll.emit(rows);\r\n            this.checkedRowsChanged();\r\n            // this.cd.detectChanges();\r\n        });\r\n        this.subscriptions.push(this.checkAllSubscribe);\r\n\r\n        this.clearCheckedsSubscribe = this.dfs.clearCheckeds$.subscribe((rows: SelectedRow[]) => {\r\n            if (this.dg.selectOnCheck) {\r\n                this.currentRowId = undefined;\r\n            }\r\n            this.dg.unCheckAll.emit(rows);\r\n            this.checkedRowsChanged();\r\n            this.cd.detectChanges();\r\n        });\r\n        this.subscriptions.push(this.clearCheckedsSubscribe);\r\n\r\n        this.subscriptions.push(this.dgs.setScrollbarPosition.subscribe(() => {\r\n            this.checkScrollbarPosition();\r\n            this.updateScrollPosition(this.scrollLeft);\r\n        }));\r\n\r\n        this.dgs.columnResized.pipe(\r\n            delay(100)\r\n        ).subscribe((e: any) => {\r\n            if (!this.dg.nowrap ||\r\n                (this.dg.currentCell && this.dg.currentCell.isEditing && this.dg.currentCell.column &&\r\n                    this.dg.currentCell.column.editor && this.dg.currentCell.column.editor.type === 'textarea')) {\r\n                const trdoms = this.dg.dgContainer.nativeElement.querySelectorAll('.f-datagrid-body-row:not(f-datagrid-footer-row)');\r\n                trdoms.forEach(n => n.style.height = 'auto');\r\n\r\n                let trID = '';\r\n                if (e) {\r\n                    const rowId = e.id;\r\n                    trID = TR_PREFIX + rowId;\r\n                }\r\n\r\n                this.updateRowHeight(trID);\r\n                // trdoms.forEach(n => n.style.height = '');\r\n            }\r\n\r\n            if (this.dg.headerWrap) {\r\n                this.dg.setHeaderHeight();\r\n                this.dfs.columnResizeEnd();\r\n            }\r\n\r\n        });\r\n\r\n        this.dgs.cellContentWrapChanged.pipe(\r\n            delay(100)\r\n        ).subscribe(() => {\r\n            this.updateRowHeight();\r\n        });\r\n\r\n\r\n        this.dg.dfs.rowUpdate$.subscribe((row: { index: number, data: any }) => {\r\n            if (row && row.data) {\r\n                this.buildCustomCellStyle(row);\r\n            }\r\n        });\r\n    }\r\n\r\n    private keepScrollbarPosition(oldWidth: number) {\r\n        if (!this.cd['destroyed']) {\r\n            this.cd.detectChanges();\r\n        }\r\n\r\n        this.ps.update();\r\n\r\n        if (!this.ps.instance) {\r\n            return;   \r\n        }\r\n\r\n        const scrollReach = this.ps.instance.reach;\r\n        let t = this.width - oldWidth;\r\n        let scrollLeft = t;\r\n        if (scrollReach.x === 'start' || !this.ps.instance.lastScrollLeft) {\r\n            scrollLeft = 0;\r\n            this.ps.scrollToX(0);\r\n        } else if (scrollReach.x === 'end') {\r\n            this.ps.scrollToRight(0);\r\n            scrollLeft = this.ps.elementRef.nativeElement.scrollLeft;\r\n        } else {\r\n            scrollLeft = this.ps.instance.lastScrollLeft - t;\r\n            this.ps.elementRef.nativeElement.scrollLeft = scrollLeft;\r\n        }\r\n\r\n        this.updateScrollPosition(scrollLeft);\r\n\r\n    }\r\n\r\n\r\n    private updateColumnSize(cg: ColumnGroup) {\r\n        if (cg) {\r\n            this.columnsGroup = cg;\r\n            this.rightFixedWidth = this.columnsGroup.rightFixedWidth;\r\n            this.leftFixedWidth = this.columnsGroup.leftFixedWidth;\r\n            this.colsWidth = this.columnsGroup.normalWidth;\r\n\r\n            this.scrollLeft = this.ps.elementRef.nativeElement.scrollLeft;\r\n            this.maxScrollLeft = this.colsWidth + this.leftFixedWidth;\r\n            this.fixedRightScrollLeft = this.maxScrollLeft;\r\n            // grid å®¹å¨å®½åº¦\r\n            const dgContainerWidth = this.dg.dgContainer.nativeElement.offsetWidth;\r\n            // ææåå®½ä¹å\r\n            const allColsWidth = Math.floor(this.columnsGroup.totalWidth);\r\n\r\n            this.bodyStyle = this.getBodyStyle();\r\n            if (dgContainerWidth > allColsWidth || dgContainerWidth === allColsWidth) {\r\n                this.showRightShadow = false;\r\n            } else {\r\n                this.showRightShadow = true;\r\n                // å³ä¾§åºå®åçä½ç½®\r\n                this.fixedRightScrollLeft = this.width  + this.scrollLeft;\r\n            }\r\n\r\n\r\n            if (this.ps && this.ps.instance && this.dg.scrollBarShowMode === 'allways' && this.ps.instance.scrollbarYActive) {\r\n                if (this.showRightShadow) {\r\n                    this.rightFixedWidth += 18;\r\n                    this.fixedRightScrollLeft = this.fixedRightScrollLeft - this.rightFixedWidth;\r\n                } else {\r\n                    if (this.canvasWidth > this.totalWidth && this.canvasWidth - this.totalWidth  < 18) {\r\n                        this.rightFixedWidth += 18;\r\n                    }\r\n                }\r\n            }\r\n\r\n            this.totalWidth = this.columnsGroup.totalWidth;\r\n            if (this.scrollBarMode === 'allways' && !this.rightRowsCmp && !this.dg.useControlPanel) {\r\n                this.totalWidth += 18;\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n\r\n    // private setFixedRightPosition() {\r\n    //     this.rightFixedWidth = this.columnsGroup.rightFixedWidth;\r\n    //     this.leftFixedWidth = this.columnsGroup.leftFixedWidth;\r\n    //     this.colsWidth = this.columnsGroup.normalWidth;\r\n\r\n    //     this.scrollLeft = this.ps.elementRef.nativeElement.scrollLeft;\r\n    //     this.maxScrollLeft = this.colsWidth + this.leftFixedWidth;\r\n    //     // grid å®¹å¨å®½åº¦\r\n    //     const dgContainerWidth = this.dg.dgContainer.nativeElement.offsetWidth;\r\n    //     // ææåå®½ä¹å\r\n    //     const allColsWidth = Math.floor(this.columnsGroup.totalWidth);\r\n\r\n\r\n    //     this.bodyStyle = this.getBodyStyle();\r\n    //     if (dgContainerWidth > allColsWidth || dgContainerWidth === allColsWidth) {\r\n    //         this.showRightShadow = false;\r\n    //         this.fixedRightScrollLeft = this.maxScrollLeft;\r\n    //     } else {\r\n    //         this.showRightShadow = true;\r\n    //         // å³ä¾§åºå®åçä½ç½®\r\n    //         this.fixedRightScrollLeft = this.width - this.rightFixedWidth + this.scrollLeft;\r\n    //     }\r\n    // }\r\n\r\n    private buildCustomCellStyle(row: { index: number, data: any }) {\r\n\r\n        let rightTrs = [];\r\n        let leftTrs = [];\r\n        if (this.fixedRightEl) {\r\n            rightTrs = this.fixedRightEl.nativeElement.querySelectorAll('tr');\r\n        }\r\n\r\n        if (this.fixedLeftEl) {\r\n            leftTrs = this.fixedLeftEl.nativeElement.querySelectorAll('.fixed-left-row');\r\n        }\r\n\r\n        const trs = this.mainArea.nativeElement.querySelectorAll('tr.f-datagrid-body-row');\r\n\r\n        const updateCellStyle = (arr, col, style) => {\r\n            if (arr.length) {\r\n                const td = arr[row.index].querySelector(`[field=\"${col.field}\"]`);\r\n                if (td) {\r\n                    this.dg.renderCustomStyle(style, td);\r\n                }\r\n            }\r\n        };\r\n\r\n        this.dg.flatColumns.forEach(col => {\r\n            if (col.styler) {\r\n                const _rd = row.data;\r\n                const cs = col.styler(_rd[col.field], _rd, row.index);\r\n                if (cs && Object.keys(cs).length) {\r\n                    updateCellStyle(leftTrs, col, cs);\r\n                    updateCellStyle(rightTrs, col, cs);\r\n                    updateCellStyle(trs, col, cs);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    private checkedRowsChanged() {\r\n        this.dgs.onCheckedRowsCountChange();\r\n        const checkedRows = this.dg.checkeds;\r\n        this.dg.checkValues = checkedRows.map(r => r.id);\r\n        this.dg.checkValuesChange.emit(this.dg.checkValues);\r\n        this.dg.checkedChange.emit(checkedRows);\r\n    }\r\n\r\n    private getTrDomHeight() {\r\n        const list = [];\r\n        let rightTrs = [];\r\n        let leftTrs = [];\r\n        let trdoms = [];\r\n        if (this.fixedRightEl) {\r\n            rightTrs = this.fixedRightEl.nativeElement.querySelectorAll('tr');\r\n        }\r\n\r\n        if (this.fixedLeftEl) {\r\n            leftTrs = this.fixedLeftEl.nativeElement.querySelectorAll('.fixed-left-row');\r\n        }\r\n\r\n        if (this.mainArea) {\r\n            trdoms = this.mainArea.nativeElement.querySelectorAll('tr.f-datagrid-body-row');\r\n        }\r\n        trdoms.forEach((tr, i) => {\r\n            let t1 = 0;\r\n            const t2 = Math.ceil(tr.offsetHeight);\r\n            let t3 = 0;\r\n            if (leftTrs && leftTrs.length) {\r\n                t1 = Math.ceil(leftTrs[i].offsetHeight);\r\n            }\r\n\r\n            if (rightTrs && rightTrs.length) {\r\n                t3 = Math.ceil(rightTrs[i].offsetHeight);\r\n            }\r\n\r\n            const _h = Math.max(t1, t2, t3, this.dg.rowHeight);\r\n            list.push(_h);\r\n        });\r\n        return list;\r\n    }\r\n    /** åè®¸æ°æ®æè¡æ¶ï¼è®¡ç®è¡å·çè¡é« */\r\n    updateRowHeight(trDomId = null) {\r\n\r\n        if (this.fast) {\r\n            return;\r\n        }\r\n\r\n\r\n        if (!this.mainArea) {\r\n            return;\r\n        }\r\n\r\n        const dgBody = this.el.nativeElement.querySelector('div.f-datagrid-body');\r\n        if (dgBody) {\r\n            if (!this.dg.nowrap || this.dg.autoHeight) {\r\n                this.render.addClass(dgBody, 'data-wrap');\r\n            } else {\r\n                this.render.removeClass(dgBody, 'data-wrap');\r\n            }\r\n        }\r\n\r\n        let cssTextArr = [];\r\n\r\n        if (!trDomId) {\r\n            this.rows.forEach((r, i) => {\r\n                const rowId = this.dfs.primaryId(r);\r\n                const trID = TR_PREFIX + rowId;\r\n                const leftTrId = trID + '_fixedleft';\r\n                const rightTrId = trID + '_fixedright';\r\n\r\n                if (!this.dg.nowrap || this.dg.autoHeight) {\r\n                    const list = this.getTrDomHeight();\r\n                    const h = list[i];\r\n\r\n                    cssTextArr.push(`${this.dg.customStyleKey()} .f-datagrid-body.data-wrap #${leftTrId}{ height: ${h}px }`);\r\n                    cssTextArr.push(`${this.dg.customStyleKey()} .f-datagrid-body.data-wrap #${trID}{ height: ${h}px }`);\r\n                    cssTextArr.push(`${this.dg.customStyleKey()} .f-datagrid-body.data-wrap #${rightTrId}{ height: ${h}px }`);\r\n                } else {\r\n                    // cssTextArr.push(`${this.dg.customStyleKey()} .f-datagrid-body #${leftTrId}{ height: ${list[i]}px }`);\r\n                    // cssTextArr.push(`${this.dg.customStyleKey()} .f-datagrid-body #${trID}{ height: ${list[i]}px }`);\r\n                    // cssTextArr.push(`${this.dg.customStyleKey()} .f-datagrid-body #${rightTrId}{ height: ${list[i]}px }`);\r\n                    const key1 = `${this.dg.customStyleKey()} .f-datagrid-body #${leftTrId}`;\r\n                    const key2 = `${this.dg.customStyleKey()} .f-datagrid-body #${trID}`;\r\n                    const key3 = `${this.dg.customStyleKey()} .f-datagrid-body #${rightTrId}`;\r\n\r\n                    this.dgs.removeCssRule(key1);\r\n                    this.dgs.removeCssRule(key2);\r\n                    this.dgs.removeCssRule(key3);\r\n\r\n                }\r\n            });\r\n\r\n            this.dgs.appendCssRules(cssTextArr);\r\n        } else {\r\n            cssTextArr = [];\r\n            const domSel = '#' + trDomId;\r\n            const _arr = [];\r\n            if (this.fixedRightEl) {\r\n                const rtr = this.fixedRightEl.nativeElement.querySelector(domSel);\r\n                if (rtr) {\r\n                    _arr.push(Math.ceil(rtr.offsetHeight));\r\n                }\r\n            }\r\n\r\n            if (this.fixedLeftEl) {\r\n                const ltr = this.fixedLeftEl.nativeElement.querySelector(domSel);\r\n                if (ltr) {\r\n                    _arr.push(Math.ceil(ltr.offsetHeight));\r\n                }\r\n            }\r\n\r\n            if (this.mainArea) {\r\n                const tr = this.mainArea.nativeElement.querySelector(domSel);\r\n                if (tr) {\r\n                    _arr.push(Math.ceil(tr.offsetHeight));\r\n                }\r\n            }\r\n\r\n            const _h = Math.max(..._arr);\r\n\r\n            const leftTrId = trDomId + '_fixedleft';\r\n            const rightTrId = trDomId + '_fixedright';\r\n            if (!this.dg.nowrap || this.dg.autoHeight) {\r\n                cssTextArr.push(`${this.dg.customStyleKey()} .f-datagrid-body.data-wrap #${leftTrId}{ height: ${_h}px;}`);\r\n                cssTextArr.push(`${this.dg.customStyleKey()} .f-datagrid-body.data-wrap #${trDomId}{ height: ${_h}px;}`);\r\n                cssTextArr.push(`${this.dg.customStyleKey()} .f-datagrid-body.data-wrap #${rightTrId}{ height: ${_h}px;}`);\r\n            } else {\r\n                cssTextArr.push(`${this.dg.customStyleKey()} .f-datagrid-body #${leftTrId}{ height: ${_h}px }`);\r\n                cssTextArr.push(`${this.dg.customStyleKey()} .f-datagrid-body #${trDomId}{ height: ${_h}px }`);\r\n                cssTextArr.push(`${this.dg.customStyleKey()} .f-datagrid-body #${rightTrId}{ height: ${_h}px }`);\r\n            }\r\n\r\n            this.dgs.appendCssRules(cssTextArr);\r\n        }\r\n\r\n        this.updateCanvasHeight();\r\n\r\n        // ç§»é¤height: auto\r\n        const trdoms = this.dg.dgContainer.nativeElement.querySelectorAll('.f-datagrid-body-row:not(f-datagrid-footer-row)');\r\n        trdoms.forEach(n => n.style.height = '');\r\n\r\n        if (!this.cd['destroyed']) {\r\n            this.cd.detectChanges();\r\n        }\r\n\r\n    }\r\n\r\n\r\n    private getBodyStyle() {\r\n        let h = this.getViewPortHeight();\r\n        if (!this.data.length) {\r\n            if (this.dg.autoHeight) {\r\n                h = this.dg.emptyDataHeight;\r\n            }\r\n\r\n            if (this.dg.footerData && this.dg.showFooter) {\r\n                let fd = this.dg.footerData;\r\n                if (this.dg.footerData.subscribe) {\r\n                    fd = this.dg.footerData['value'];\r\n                }\r\n\r\n                if (fd && Array.isArray(fd) && fd.length) {\r\n                    h = h - this.dg.footerHeight;\r\n\r\n                    if (this.dg.footerPosition === 'both') {\r\n                        h = h - this.dg.footerHeight;\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            if (this.dg.showFooter && this.dg.footerPosition === 'both') {\r\n                h = h - this.dg.footerHeight;\r\n            }\r\n        }\r\n        return {\r\n            height: `${Math.floor(h)}px`\r\n        };\r\n    }\r\n\r\n    private updateScrollPosition(scrollLeft: any) {\r\n        this.scrollLeft = scrollLeft;\r\n\r\n        this.fixedRightScrollLeft = this.scrollLeft + this.width - this.rightFixedWidth;\r\n        if (this.fixedRightScrollLeft === this.maxScrollLeft || this.fixedRightScrollLeft > this.maxScrollLeft) {\r\n            this.fixedRightScrollLeft = this.maxScrollLeft;\r\n            this.showRightShadow = false;\r\n        } else {\r\n            this.showRightShadow = true;\r\n        }\r\n\r\n        if (this.fixedLeftEl) {\r\n            this.render.setStyle(this.fixedLeftEl.nativeElement, 'transform', `translate3d(${this.scrollLeft}px, 0px, 0px)`);\r\n        }\r\n\r\n        if (this.fixedRightEl) {\r\n            this.render.setStyle(this.fixedRightEl.nativeElement, 'transform', `translate3d(${this.fixedRightScrollLeft}px, 0px, 0px)`);\r\n        }\r\n    }\r\n\r\n    onScrollToX($event: any) {\r\n        const x = $event.target.scrollLeft;\r\n        this.updateScrollPosition(x);\r\n        // this.cd.detectChanges();\r\n        this.dgs.onScrollMove(x, SCROLL_X_ACTION);\r\n        this.dgs.showFixedShadow.emit({ showRightShadow: this.showRightShadow, x: this.fixedRightScrollLeft });\r\n    }\r\n\r\n    onScrollToY($event: any) {\r\n\r\n        if (this._scrollTimer) {\r\n            clearTimeout(this._scrollTimer);\r\n        }\r\n\r\n        this._scrollTimer = setTimeout(() => {\r\n            const y = $event.target.scrollTop;\r\n\r\n            if (this.dg.virtualized) {\r\n                this.handleScroll();\r\n            }\r\n\r\n            this.scrollTop = y;\r\n\r\n            this.dg.scrollY.emit(y);\r\n            this.dgs.onScrollMove(y, SCROLL_Y_ACTION);\r\n        }, 100);\r\n    }\r\n\r\n    onPsXReachStart($event: any) {\r\n        const x = $event.target.scrollLeft;\r\n        this.updateScrollPosition(x);\r\n        this.dgs.onScrollMove(x, SCROLL_X_REACH_START_ACTION);\r\n    }\r\n\r\n    onPsXReachEnd($event: any) {\r\n        this.showRightShadow = false;\r\n        // const x = $event.target.scrollLeft;\r\n        // this.updateScrollPosition(x);\r\n        // this.cd.detectChanges();\r\n        // // this.dgs.onShowFixedShadow(this.showRightShadow);\r\n        // this.dgs.onScrollMove(x, SCROLL_X_REACH_END_ACTION);\r\n    }\r\n\r\n    isChecked(rowData: any) {\r\n        if (rowData) {\r\n            return this.dfs.isRowChecked(rowData[this.dg.idField]);\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    isSelected(rowData: any) {\r\n        if (rowData) {\r\n            return this.dfs.isRowSelected(rowData[this.dg.idField]);\r\n        }\r\n        return false;\r\n    }\r\n\r\n    toggleGroupRow(row, open = true) {\r\n        row.expanded = open;\r\n        this.ps.update();\r\n    }\r\n\r\n\r\n\r\n    /** =================================== å ====== é ====== çº¿ =================================== */\r\n\r\n    /** è·åå¯è§åºåé«åº¦ */\r\n    private getViewPortHeight() {\r\n        let viewPortHeight = this.dg.height;\r\n        if (this.dg.showHeader) {\r\n            viewPortHeight = viewPortHeight - this.dg.realHeaderHeight;\r\n        }\r\n\r\n        if ((this.dg.enableFilterRow || this.dg.enableSmartFilter) && this.dg.showFilterBar) {\r\n            viewPortHeight -= this.dg.filterBarHeight;\r\n        }\r\n\r\n        if (this.dg.showRowGroupPanel) {\r\n            viewPortHeight -= this.dg.rowGroupPanelHeight;\r\n        }\r\n\r\n        if (this.dg.showFooter && this.data.length) {\r\n            viewPortHeight = viewPortHeight - this.dg.footerHeight;\r\n        }\r\n\r\n        if (this.dg.pagination) {\r\n            viewPortHeight = viewPortHeight - this.dg.pagerHeight - 2;\r\n        }\r\n\r\n        if (this.dg.showBorder) {\r\n            viewPortHeight -= 2;\r\n        }\r\n\r\n        this.viewportH = viewPortHeight;\r\n        return viewPortHeight;\r\n    }\r\n\r\n    // ä¸æè¡æ¶ï¼æææ°æ®çé«åº¦\r\n    private allRowsHeight() {\r\n        const rowHeightpatch = 1;  // this.dg.autoHeight ? 2 : 1;\r\n        const rowHeight = this.dg.rowHeight + rowHeightpatch;\r\n\r\n        let itemsCount = 0;\r\n        if (this.dg.groupSummaryPosition === 'inGroupRow') {\r\n            itemsCount = this.data.filter(n => !n['__group_footer__']).length;\r\n        } else {\r\n            itemsCount = this.data.length;\r\n        }\r\n\r\n        let h = itemsCount * rowHeight;\r\n\r\n        if (this.dg.autoHeight) {\r\n            h += itemsCount;\r\n        } else {\r\n            h += 2;\r\n        }\r\n\r\n        return h;\r\n    }\r\n\r\n    private getCanvasHeight() {\r\n        let canvasHeight = 0;\r\n\r\n        if (!this.data || !this.data.length) {\r\n            this.canvasHeight = 0;\r\n            return 0;\r\n        }\r\n\r\n        if (this.dg.nowrap) {\r\n            canvasHeight = this.allRowsHeight();\r\n        } else {\r\n            canvasHeight = this.getTrDomHeight().reduce((r, c) => r + c, 0);\r\n        }\r\n\r\n        if (!canvasHeight) {\r\n            canvasHeight = this.viewportH;\r\n        }\r\n\r\n        canvasHeight = canvasHeight + (this.dg.scrollBarShowMode === 'allways' && this.ps.instance['scrollbarXActive'] ? 18 : 0);\r\n\r\n        this.canvasHeight = canvasHeight;\r\n        return canvasHeight;\r\n    }\r\n\r\n    updateCanvasHeight() {\r\n        this.canvasHeight = this.getCanvasHeight();\r\n    }\r\n\r\n\r\n    private getRowFromPosition(y) {\r\n        return Math.floor(y / (this.dg.rowHeight + 1));\r\n    }\r\n\r\n    getVisibleRange(viewportTop?: number, viewportLeft?: number) {\r\n        if (viewportTop == null) {\r\n            viewportTop = this.scrollTop;\r\n        }\r\n        if (viewportLeft == null) {\r\n            viewportLeft = this.scrollLeft;\r\n        }\r\n\r\n        return {\r\n            top: this.getRowFromPosition(viewportTop),\r\n            bottom: this.getRowFromPosition(viewportTop + this.viewportH) + 1,\r\n            leftPx: viewportLeft,\r\n            rightPx: viewportLeft + this.viewportW\r\n        };\r\n    }\r\n\r\n    private getRenderedRange(viewportTop?: number, viewportLeft?: number) {\r\n        const range = this.getVisibleRange(viewportTop, viewportLeft);\r\n        const buffer = Math.round(this.viewportH / (this.dg.rowHeight + 1));\r\n        const minBuffer = this.minRowBuffer;\r\n\r\n        if (this.vScrollDir == -1) {\r\n            range.top -= buffer;\r\n            range.bottom += minBuffer;\r\n        } else if (this.vScrollDir == 1) {\r\n            range.top -= minBuffer;\r\n            range.bottom += buffer;\r\n        } else {\r\n            range.top -= minBuffer;\r\n            range.bottom += minBuffer;\r\n        }\r\n\r\n        range.top = Math.max(0, range.top);\r\n        range.bottom = Math.min(this.data.length - 1, range.bottom);\r\n\r\n        range.leftPx -= this.viewportW;\r\n        range.rightPx += this.viewportW;\r\n\r\n        range.leftPx = Math.max(0, range.leftPx);\r\n        range.rightPx = Math.min(this.canvasWidth, range.rightPx);\r\n\r\n        return range;\r\n    }\r\n\r\n    private renderRows(range) {\r\n        const rows = [];\r\n        const dataLength = this.data.length;\r\n\r\n        for (let i = range.top; i <= range.bottom; i++) {\r\n            if (this.rowsCache[i] || (i == dataLength)) {\r\n                continue;\r\n            }\r\n            rows.push(i);\r\n\r\n            // Create an entry right away so that appendRowHtml() can\r\n            // start populatating it.\r\n            this.rowsCache[i] = {\r\n                rowNode: null,\r\n\r\n                // ColSpans of rendered cells (by column idx).\r\n                // Can also be used for checking whether a cell has been rendered.\r\n                cellColSpans: [],\r\n\r\n                // Cell nodes (by column idx).  Lazy-populated by ensureCellNodesInRowsCache().\r\n                cellNodesByColumnIdx: [],\r\n\r\n                // Column indices of cell nodes that have been rendered, but not yet indexed in\r\n                // cellNodesByColumnIdx.  These are in the same order as cell nodes added at the\r\n                // end of the row.\r\n                cellRenderQueue: []\r\n            };\r\n        }\r\n\r\n        for (let i = 0, ii = rows.length; i < ii; i++) {\r\n            this.rowsCache[rows[i]].rowNode = this.data[rows[i]];\r\n        }\r\n\r\n        return Object.keys(this.rowsCache).map(n => this.rowsCache[n].rowNode);\r\n    }\r\n\r\n\r\n    private removeRowFromCache(row) {\r\n        const cacheEntry = this.rowsCache[row];\r\n        if (!cacheEntry) {\r\n            return;\r\n        }\r\n\r\n        delete this.rowsCache[row];\r\n    }\r\n\r\n    private cleanupRows(rangeToKeep) {\r\n        for (const i in this.rowsCache) {\r\n            if (i < rangeToKeep.top || i > rangeToKeep.bottom) {\r\n                this.removeRowFromCache(i);\r\n            }\r\n        }\r\n    }\r\n\r\n    hasYScrollbar(showYscrollbar: boolean) {\r\n        setTimeout(() => {\r\n            this.updateColumnSize(this.columnsGroup);\r\n            if (this.ps) {\r\n                this.ps.update();\r\n                this.cd.detectChanges();\r\n            }\r\n            this.dgs.scrollbarUpdate.emit({ scrollbarRef: this.ps.instance });\r\n        }, 60);\r\n    }\r\n\r\n    onClickScrollArrow($event) {\r\n        const { dir, event } = $event;\r\n        if (this.ps && this.ps.instance) {\r\n            const { x, y } = this.ps.instance.reach;\r\n    \r\n            switch(dir) {\r\n                case 'left':\r\n                    if (x!== 'start') {\r\n                        this.viewScrollContainer.nativeElement.scrollLeft = this.viewScrollContainer.nativeElement.scrollLeft - 40;\r\n                    }\r\n                    break;\r\n                case 'right':\r\n                    if (x!== 'end') {\r\n                        this.viewScrollContainer.nativeElement.scrollLeft = this.viewScrollContainer.nativeElement.scrollLeft + 40;\r\n                    }\r\n                    break;\r\n                case 'top':\r\n                    if (y !== 'start') {\r\n                        this.viewScrollContainer.nativeElement.scrollTop = this.viewScrollContainer.nativeElement.scrollTop - 40;\r\n                    }\r\n                    break;\r\n                case 'bottom':\r\n                    if (y !== 'end') {\r\n                        this.viewScrollContainer.nativeElement.scrollTop = this.viewScrollContainer.nativeElement.scrollTop + 40;\r\n                    }\r\n                    break;\r\n            }\r\n\r\n            this.ps.update();\r\n        }\r\n    }\r\n\r\n    private renderData(detectchanges = true) {\r\n        this.canvasHeight = this.getCanvasHeight();\r\n        if (!this.dg.virtualized || this.dg.autoHeight) {\r\n            this.rows = this.data;\r\n        } else {\r\n            const visible = this.getVisibleRange();\r\n            const rendered = this.getRenderedRange();\r\n\r\n            // remove rows no longer in the viewport\r\n            this.cleanupRows(rendered);\r\n\r\n            // render missing rows\r\n            this.rows = this.renderRows(rendered);\r\n            this.startRowIndex = rendered.top;\r\n           \r\n            this.lastRenderedScrollTop = this.scrollTop;\r\n            this.lastRenderedScrollLeft = this.scrollLeft;\r\n\r\n\r\n            \r\n            this.blankTopHeight = this.startRowIndex * (this.dg.rowHeight + 1);\r\n            this.blankBottomHeight = this.canvasHeight - this.blankTopHeight - (this.rows.length * (this.dg.rowHeight + 1));\r\n            if (this.dg.scrollBarShowMode === 'allways' && this.ps && this.ps.instance && this.ps.instance.scrollbarXActive) {\r\n                this.blankBottomHeight += 22;\r\n            }\r\n\r\n\r\n            if (detectchanges) {\r\n                this.cd.detectChanges();\r\n            }\r\n        }\r\n        \r\n    }\r\n\r\n    private handleScroll() {\r\n        this.scrollTop = this.ps.elementRef.nativeElement.scrollTop;\r\n        this.scrollLeft = this.ps.elementRef.nativeElement.scrollLeft;\r\n        return this._handleScroll();\r\n    }\r\n\r\n    private _handleScroll() {\r\n        const viewportContainer = this.viewScrollContainer.nativeElement;\r\n        let maxScrollDistanceY = viewportContainer.scrollHeight - viewportContainer.clientHeight;\r\n        let maxScrollDistanceX = viewportContainer.scrollWidth - viewportContainer.clientWidth;\r\n\r\n        // Protect against erroneous clientHeight/Width greater than scrollHeight/Width.\r\n        // Sometimes seen in Chrome.\r\n        maxScrollDistanceY = Math.max(0, maxScrollDistanceY);\r\n        maxScrollDistanceX = Math.max(0, maxScrollDistanceX);\r\n\r\n        // Ceiling the max scroll values\r\n        if (this.scrollTop > maxScrollDistanceY) {\r\n            this.scrollTop = maxScrollDistanceY;\r\n        }\r\n        if (this.scrollLeft > maxScrollDistanceX) {\r\n            this.scrollLeft = maxScrollDistanceX;\r\n        }\r\n\r\n        const vScrollDist = Math.abs(this.scrollTop - this.prevScrollTop);\r\n        const hScrollDist = Math.abs(this.scrollLeft - this.prevScrollLeft);\r\n\r\n        if (hScrollDist) {\r\n            this.prevScrollLeft = this.scrollLeft;\r\n\r\n            // $viewportScrollContainerX[0].scrollLeft = scrollLeft;\r\n            // if (hasFrozenColumns()) {\r\n            //     if (hasFrozenRows) {\r\n            //         $viewportTopR[0].scrollLeft = scrollLeft;\r\n            //     }\r\n            // } else {\r\n            //     if (hasFrozenRows) {\r\n            //         $viewportTopL[0].scrollLeft = scrollLeft;\r\n            //     }\r\n            // }\r\n        }\r\n\r\n        const lastScrollTop = this.lastRenderedScrollTop;\r\n\r\n        if (vScrollDist) {\r\n            this.vScrollDir = this.prevScrollTop < this.scrollTop ? 1 : -1;\r\n            this.prevScrollTop = this.scrollTop;\r\n\r\n            // if (hasFrozenColumns()) {\r\n            //     if (hasFrozenRows && !options.frozenBottom) {\r\n            //         $viewportBottomL[0].scrollTop = scrollTop;\r\n            //     } else {\r\n            //         $viewportTopL[0].scrollTop = scrollTop;\r\n            //     }\r\n            // }\r\n\r\n            // switch virtual pages if needed\r\n            if (vScrollDist < this.viewportH) {\r\n                this._scrollTo(this.scrollTop);\r\n            }\r\n        }\r\n\r\n        if (hScrollDist || vScrollDist) {\r\n            const dx = Math.abs(this.lastRenderedScrollLeft - this.scrollLeft);\r\n            const dy = Math.abs(lastScrollTop - this.scrollTop);\r\n            if (dx > 20 || dy > 20) {\r\n                // if rendering is forced or scrolling is small enough to be \"easy\", just render\r\n                if (dy < this.viewportH && dx < this.viewportW) {\r\n                    this.renderData();\r\n                } else {\r\n                    this.renderData();\r\n                }\r\n            }\r\n        }\r\n\r\n        if (hScrollDist || vScrollDist) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    private _scrollTo(y) {\r\n        const $viewportScrollContainerY = this.viewScrollContainer.nativeElement;\r\n        y = Math.max(y, 0);\r\n        y = Math.min(y, this.canvasHeight - this.viewportH);\r\n\r\n        const newScrollTop = y;\r\n\r\n        if (this.prevScrollTop != newScrollTop) {\r\n            this.vScrollDir = (this.prevScrollTop < newScrollTop) ? 1 : -1;\r\n            this.lastRenderedScrollTop = (this.scrollTop = this.prevScrollTop = newScrollTop);\r\n\r\n            // if (hasFrozenColumns()) {\r\n            //     $viewportTopL[0].scrollTop = newScrollTop;\r\n            // }\r\n\r\n            // if (hasFrozenRows) {\r\n            //     $viewportBottomL[0].scrollTop = $viewportBottomR[0].scrollTop = newScrollTop;\r\n            // }\r\n\r\n            // $viewportScrollContainerY.scrollTop = newScrollTop;\r\n        }\r\n    }\r\n\r\n    onMouseClick($event: MouseEvent) {\r\n        // document.body.click();\r\n        const target = $event.target as any;\r\n\r\n        if (target.nodeName === 'TEXTAREA' || target.nodeName === 'INPUT' ) {\r\n            return;\r\n        }\r\n\r\n\r\n        let td = target;\r\n        if (target.nodeName !== 'TD') {\r\n            td = target.closest('TD');\r\n        }\r\n\r\n        if (!this.dg.editable && this.__triggerBodyClickEvent) {\r\n            // è§£å³è¶é¾ç¹å»äºä»¶ï¼è¦åæ§è¡éä¸­è¡\r\n            if (td && td.selectCell ) {\r\n                $event.stopPropagation();\r\n                td.selectCell($event, td);  // æçè¯´å¯ä»¥å é¤çï¼ä½ä¸æ¢å¨å¦o(â§å£â¦)o\r\n            }\r\n            return;\r\n        }\r\n\r\n        if (this.dg.editMode === 'row') {\r\n            return;\r\n        }\r\n        if (!td && this.dg.currentCell) {\r\n            td = this.dg.currentCell.cellElement;\r\n            if (td && td.closeEdit) {\r\n                $event.stopPropagation();\r\n                td.closeEdit();\r\n                return;\r\n            }\r\n        }\r\n\r\n\r\n        if (td) {\r\n            // è¡ç¦ç¨æ¶\r\n            if (this.dg.disableRow && td.gridCellData) {\r\n                const { rowData, rowIndex } = td.gridCellData;\r\n                if (this.dg.disableRow(rowData, rowIndex)) {\r\n                    return;\r\n                }\r\n            }\r\n            $event.stopPropagation();\r\n            if (this.dg.editable && this.dg.editMode === 'cell' && td.edit) {\r\n                td.edit($event);\r\n            } else {\r\n                if (td.selectCell) {\r\n                    if (this.dg.selectionMode === 'default' && this.dg.multiSelect) {\r\n                        this.dg.clearCheckeds();\r\n                    }\r\n                    td.selectCell($event, td);\r\n                } else {\r\n                    this.dg.endCellEdit();\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    onBeforeShowContextMenu = (e: any) => {\r\n        // row_1_fixedleft  row_1  row_1_fixedright\r\n        const { contextMenuDom, event } = e;\r\n\r\n        if (event.target.closest('.datagrid-editor')) {\r\n            return of({show: false});\r\n        }\r\n\r\n\r\n        let rowID = event.target.id;\r\n\r\n        if (contextMenuDom) {\r\n            // æé¤åç»è¡ãåç»åè®¡è¡\r\n            if (contextMenuDom.className.indexOf('f-datagrid-group-row') === -1 && contextMenuDom.className.indexOf('f-datagrid-group-footer') === -1) {\r\n                rowID = contextMenuDom.id.replace('row_', '').replace('_fixedleft', '').replace('_fixedright', '');\r\n                const rowData = this.dfs.findRow(rowID);\r\n                const focusTargetWidth = this.viewportW > this.totalWidth ? this.totalWidth : this.viewportW;\r\n                return of({ show: true, data: { data: rowData.data, grid: this.dg}, focusTargetWidth });\r\n            }\r\n        }\r\n        return of({ show: false });\r\n    }\r\n}\r\n","\r\n/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @Date: 2019-08-06 07:43:07\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-09-26 17:17:32\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\nimport { Directive, Input, NgZone, OnInit, Renderer2, ElementRef, OnDestroy, Inject, forwardRef, ChangeDetectorRef, HostListener } from '@angular/core';\r\nimport { DatagridBodyComponent } from './datagrid-body.component';\r\nimport { DatagridComponent } from './../../datagrid.component';\r\nimport { Utils } from './../../utils/utils';\r\n@Directive({\r\n    selector: '[row-hover]',\r\n    exportAs: 'rowHover'\r\n})\r\nexport class DatagridRowHoverDirective implements OnInit, OnDestroy {\r\n\r\n    @Input() rowIndex: number;\r\n    @Input('row-hover') rowData: any;\r\n\r\n    private _mouseenter = null;\r\n    private _mouseleave = null;\r\n\r\n    constructor(\r\n        @Inject(forwardRef(() => DatagridComponent)) public dg: DatagridComponent,\r\n        @Inject(forwardRef(() => DatagridBodyComponent)) public dgb: DatagridBodyComponent,\r\n        private cd: ChangeDetectorRef,\r\n        private el: ElementRef, private zone: NgZone, private render: Renderer2) {\r\n    }\r\n\r\n    ngOnInit() {\r\n        if (this.dg.rowHover && !this.dg.fast) {\r\n            this.zone.runOutsideAngular( () => {\r\n                this._mouseenter = Utils.on(this.el.nativeElement, 'mouseenter', this.onmouseenter.bind(this), { target: '.f-datagrid-body-row', options: { capture: true }});\r\n                this._mouseleave = Utils.on(this.el.nativeElement, 'mouseleave', this.onmouseleave.bind(this), { target: '.f-datagrid-body-row', options: { capture: true }});\r\n            });\r\n        }\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        if (this._mouseenter) {\r\n            this._mouseenter();\r\n        }\r\n\r\n        if (this._mouseleave) {\r\n            this._mouseleave();\r\n        }\r\n    }\r\n\r\n    // @HostListener('mouseenter')\r\n    onmouseenter(event) {\r\n        this.setRowHoverCls(event);\r\n    }\r\n\r\n    // @HostListener('mouseleave')\r\n    onmouseleave(event) {\r\n        this.setRowHoverCls(event, false);\r\n    }\r\n\r\n    setRowHoverCls(event, hover = true) {\r\n        if (!this.dg.rowHover) {\r\n            return;\r\n        }\r\n\r\n        if (!event.target.matches('.f-datagrid-body-row')) {\r\n            return;\r\n        }\r\n\r\n        this.rowIndex = event.target.getAttribute('index');\r\n\r\n        const leftTableCls = 'f-datagrid-body-fixed-left';\r\n        const rightTableCls = 'f-datagrid-body-fixed-right';\r\n        const centerTableCls = 'f-datagrid-body-center';\r\n\r\n        const body = this.dg.el.nativeElement.querySelector('.f-datagrid-body');\r\n\r\n        if (!body) {\r\n            return;\r\n        }\r\n\r\n        const leftTableDom = body.querySelector(`.${leftTableCls}`);\r\n        const rightTableDom = body.querySelector(`.${rightTableCls}`);\r\n        const centerTableDom = body.querySelector(`.${centerTableCls}`);\r\n\r\n        const method = hover ? 'addClass' : 'removeClass';\r\n        const trSelector = `tr[index=\"${this.rowIndex}\"]`;\r\n        const dom = this.el.nativeElement.closest('div');\r\n        if (dom && dom.className) {\r\n            const trDom = centerTableDom.querySelector(trSelector);\r\n\r\n            if (!trDom) {\r\n                return;\r\n            }\r\n\r\n            if (trDom.className.indexOf('f-datagrid-disable-row') > -1) {\r\n                return;\r\n            }\r\n            let ltr = null;\r\n            let rtr = null;\r\n            if (rightTableDom) {\r\n                rtr = rightTableDom.querySelector(trSelector);\r\n            }\r\n            if (leftTableDom) {\r\n                ltr = leftTableDom.querySelector(trSelector);\r\n            }\r\n\r\n            if (leftTableDom && ltr) {\r\n                this.render[method](ltr, this.dg.hoverRowCls);\r\n            }\r\n            if (rightTableDom && rtr) {\r\n                this.render[method](rtr, this.dg.hoverRowCls);\r\n            }\r\n\r\n            this.render[method](trDom, this.dg.hoverRowCls);\r\n\r\n        }\r\n    }\r\n\r\n}\r\n","import { delay, filter, takeUntil } from 'rxjs/operators';\r\n\r\n/*\r\n* @Author: ç¯çç§æ(Lucas Huang)\r\n* @Date: 2019-08-12 07:47:12\r\n* @LastEditors: ç¯çç§æ(Lucas Huang)\r\n* @LastEditTime: 2019-11-27 13:31:43\r\n* @QQ: 1055818239\r\n* @Version: v0.0.1\r\n*/\r\nimport { Renderer2, Self, NgZone, SimpleChanges, OnChanges, ChangeDetectorRef, OnDestroy, Optional, ContentChildren, QueryList, ViewChildren } from '@angular/core';\r\nimport { Validators, FormBuilder, FormGroup } from '@angular/forms';\r\nimport { Subject, Subscription } from 'rxjs';\r\nimport {\r\n    Directive, Input, Output, EventEmitter, HostListener,\r\n    OnInit, ElementRef, AfterViewInit, Injector, Inject, forwardRef\r\n} from '@angular/core';\r\nimport { DatagridFacadeService } from '../../services/datagrid-facade.service';\r\nimport { DatagridComponent } from '../../datagrid.component';\r\nimport { DatagridCellComponent } from './datagrid-cell.component';\r\nimport { DatagridRow } from '../../types/datagrid-row';\r\nimport { DatagridValidator } from '../../types/datagrid-validator';\r\nimport { DatagridRowHoverDirective } from './datagrid-row-hover.directive';\r\nimport { Utils } from '../../utils/utils';\r\nimport { DatagridBodyComponent } from './datagrid-body.component';\r\nimport { FormatCellDataPipe } from '../../utils/format-cell-data.pipe';\r\nimport { ALLOW_EDIT_CELL_HIGHLIGHT_CLS } from '../../types/constant';\r\n\r\n\r\n@Directive({\r\n    selector: '[grid-row]',\r\n    exportAs: 'gridRow'\r\n})\r\nexport class DatagridRowDirective implements OnInit, AfterViewInit, DatagridRow, OnChanges, OnDestroy {\r\n    @Input() editable = false;\r\n    @Input('grid-row') rowData: any;\r\n    @Input() rowIndex: number;\r\n    @Output() clickHandler = new EventEmitter();\r\n    // ç¨äºæ´è¡ç¼è¾ï¼å¿å¨ï¼ï¼ï¼\r\n    @ContentChildren(forwardRef(() => DatagridCellComponent), { descendants: true }) cells: QueryList<DatagridCellComponent>;\r\n\r\n\r\n    get rowId() {\r\n        if (this.rowData) {\r\n            return this.dfs.primaryId(this.rowData);\r\n        }\r\n        return null;\r\n    }\r\n\r\n    get disabled() {\r\n        if (this.dg.disableRow) {\r\n            return this.dg.disableRow(this.rowData, this.rowIndex);\r\n        }\r\n        return false;\r\n    }\r\n\r\n\r\n    form: FormGroup = new FormGroup({});\r\n    private dfs: DatagridFacadeService;\r\n    private documentRowDblclickEvent: any = null;\r\n    private ngZone: NgZone;\r\n    private dgb: DatagridBodyComponent;\r\n    cd: ChangeDetectorRef;\r\n\r\n    columnsChangedSubscription: Subscription = null;\r\n    datasourceChangedSubscription: Subscription = null;\r\n    subscriptions: Subscription[] = [];\r\n    private destroy$ = new Subject();\r\n    constructor(\r\n        @Inject(forwardRef(() => DatagridComponent)) public dg: DatagridComponent,\r\n        private injector: Injector, private fb: FormBuilder, public el: ElementRef,\r\n        private render: Renderer2, @Optional() @Self() public drHover: DatagridRowHoverDirective) {\r\n        this.dfs = this.injector.get(DatagridFacadeService);\r\n        this.ngZone = this.injector.get(NgZone);\r\n        this.cd = this.injector.get(ChangeDetectorRef);\r\n        this.dgb = this.injector.get(DatagridBodyComponent);\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.datasourceChangedSubscription = this.dg.dgs.onDataSourceChange.pipe(\r\n            takeUntil(this.destroy$)\r\n        ).subscribe(() => {\r\n            this.renderCustomStyle();\r\n        });\r\n\r\n        this.columnsChangedSubscription = this.dg.dgs.columnsChanged.pipe(\r\n            takeUntil(this.destroy$)\r\n        ).subscribe(() => {\r\n            this.createControl();\r\n        });\r\n\r\n        const s$ = this.dg.dfs.rowUpdate$.pipe(\r\n            takeUntil(this.destroy$)\r\n        ).subscribe((row: { index: number, data: any }) => {\r\n            if (row && row.data) {\r\n                // this.rowData = cloneDeep(row.data);\r\n                if (this.dfs.primaryId(row.data) === this.rowId) {\r\n                    this.renderCustomStyle(row.data);\r\n                }\r\n                // this.cd.detectChanges();\r\n            }\r\n        });\r\n        this.subscriptions.push(s$);\r\n\r\n        const s1$ = this.dg.dgs.updateEmptyStyle$.pipe(\r\n            takeUntil(this.destroy$)\r\n        ).subscribe(() => {\r\n            this.updateCellEmptyStyle();\r\n        });\r\n        this.subscriptions.push(s1$);\r\n\r\n        const s2$ = this.dg.dfs.selectRow$.pipe(takeUntil(this.destroy$)).pipe(\r\n            filter((r: any) => {\r\n                return r.id === this.rowId;\r\n            })\r\n        ).subscribe(() => {\r\n            if (this.dg.selectedRow && !this.dg.selectedRow.dr) {\r\n                const p = this.getRowPosition();\r\n                if (p === 'left') {\r\n                    this.dg.selectedRow.drl = this;\r\n                } else if (p === 'right') {\r\n                    this.dg.selectedRow.drr = this;\r\n                } else {\r\n                    this.dg.selectedRow.dr = this;\r\n                }\r\n            }\r\n        });\r\n\r\n        this.subscriptions.push(s2$);\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.destroy$.next();\r\n        this.destroy$.complete();\r\n        if (this.columnsChangedSubscription) {\r\n            this.columnsChangedSubscription.unsubscribe();\r\n            this.columnsChangedSubscription = null;\r\n        }\r\n\r\n        if (this.datasourceChangedSubscription) {\r\n            this.datasourceChangedSubscription.unsubscribe();\r\n            this.datasourceChangedSubscription = null;\r\n        }\r\n\r\n        if (this.subscriptions && this.subscriptions.length) {\r\n            this.subscriptions.forEach(n => n.unsubscribe());\r\n            this.subscriptions = [];\r\n        }\r\n\r\n        if (this.form) {\r\n            this.form = null;\r\n        }\r\n\r\n        this.cells = null;\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (changes.rowData && !changes.rowData.isFirstChange()) {\r\n            this.updateCellEmptyStyle();\r\n        }\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        this.renderCustomStyle();\r\n        this.updateCellEmptyStyle();\r\n    }\r\n\r\n    private getRowPosition() {\r\n        const id = this.el.nativeElement.id;\r\n        if (id.indexOf('fixedleft') > -1) {\r\n            return 'left';\r\n        } else if (id.indexOf('fixedright') > -1) {\r\n            return 'right';\r\n        } else {\r\n            return 'center';\r\n        }\r\n    }\r\n\r\n\r\n    renderCustomStyle(rowData = null) {\r\n        if (this.dg.rowStyler) {\r\n            const _rd = rowData || this.rowData;\r\n            const trStyle = this.dg.rowStyler(_rd, this.rowIndex);\r\n            if (trStyle && Object.keys(trStyle).length) {\r\n                this.dg.renderCustomStyle(trStyle, this.el.nativeElement);\r\n            } else {\r\n                this.dg.dgs.removeCssRule(`#${this.dg.id} #${this.el.nativeElement.id}`);\r\n            }\r\n        }\r\n    }\r\n\r\n    @HostListener('click', ['$event'])\r\n    onRowClick(event: MouseEvent) {\r\n\r\n        if (event.target['className'] && event.target['className'].indexOf('checkbox-column') > -1) {\r\n            return;\r\n        }\r\n\r\n        if (!this.dg.enableSelectRow) {\r\n            return;\r\n        }\r\n\r\n        if (this.dg.disabled) {\r\n            return;\r\n        }\r\n\r\n        if (this.dg.currentCell && this.dg.currentCell.isEditing && this.rowId !== this.dg.currentCell.rowId ) {\r\n            return;\r\n        }\r\n\r\n\r\n        if (this.dg.disableRow) {\r\n            if (this.dg.disableRow(this.rowData, this.rowIndex)) {\r\n                event.stopPropagation();\r\n                return false;\r\n            }\r\n        }\r\n\r\n        // if (!this.dg.editable) {\r\n        //     event.stopPropagation();\r\n        // }\r\n\r\n        const rowId = this.dfs.primaryId(this.rowData);\r\n\r\n        if (!rowId) {\r\n            this.dg.writeConsole(`å¨ç¬¬ ${this.rowIndex + 1} è¡ï¼ä¸»é®å­æ®µ[${this.dg.idField}]çå¼ä¸º ç©ºï¼è¯·æ£æ¥ç¸å³æ°æ®ã`);\r\n        }\r\n\r\n        const beforEventParam = {\r\n            rowIndex: this.rowIndex,\r\n            rowData: this.rowData,\r\n            gridInstance: this.dg\r\n        };\r\n\r\n        if (!event.shiftKey) {\r\n            this.dg.dgs.focusRowChanged.emit({\r\n                rowIndex: this.rowIndex,\r\n                rowData: this.rowData\r\n            });\r\n        }\r\n        const useNewSelectionMode = this.dg.sms.beforRowClick({ ...beforEventParam, e: event, id: rowId, dr: this });\r\n        if (useNewSelectionMode) {\r\n            return;\r\n        }\r\n\r\n        if (!this.dfs.isRowSelected(rowId)) {\r\n            const canendedit = this.dg.endRowEdit();\r\n\r\n            if (!canendedit || canendedit.canEnd) {\r\n                this.dg.beforeSelect(beforEventParam).pipe( takeUntil(this.destroy$)).pipe(\r\n                    delay(100)\r\n                ).subscribe((canSelect: boolean) => {\r\n                    if (canSelect) {\r\n                        this.dg.removeCellSelectedCls();\r\n                        this.dfs.selectRow(this.rowIndex, this.rowData, {instance: this.dg});\r\n                        if (this.dg.selectedRow) {\r\n                            this.dg.selectedRow.dr = this;\r\n                        }\r\n                        const trCLS = this.el.nativeElement.className;\r\n                        if (trCLS.indexOf('f-datagrid-row-selected') === -1) {\r\n                            this.el.nativeElement.className = trCLS + ' f-datagrid-row-selected';\r\n                        }\r\n                        // this.drHover.setRowHoverCls(false);\r\n                        // this.dg.selectChanged.emit(this.dg.selectedRow);\r\n                        this.clickHandler.emit();\r\n                    }\r\n                    this.dg.rowClick.emit({ data: this.rowData, grid: this.dg, dblclick: false });\r\n                    this.dg.dgs.setSelecedRow.emit({ selected: true, id: this.dfs.primaryId(this.rowData) });\r\n                });\r\n            }\r\n        } else {\r\n            if (this.dg.selectedRow && !this.dg.selectedRow.dr) {\r\n                this.dg.selectedRow.dr = this;\r\n            }\r\n\r\n            if (!this.dg.keepSelect) {\r\n                this.dg.beforeUnselect(beforEventParam).pipe(\r\n                    takeUntil(this.destroy$),\r\n                ).subscribe((canUnselect: boolean) => {\r\n                    if (canUnselect) {\r\n                        // this.dg.unSelect.emit(this.dg.selectedRow);\r\n                        this.dfs.unSelectRow(this.rowIndex, this.rowData, {instance: this.dg});\r\n\r\n                        const trCLS = this.el.nativeElement.className;\r\n                        if (trCLS.indexOf('f-datagrid-row-selected') > -1) {\r\n                            this.el.nativeElement.className = trCLS.replace('f-datagrid-row-selected', '');\r\n                        }\r\n                    }\r\n                    this.dg.rowClick.emit({ data: this.rowData, grid: this.dg, dblclick: false });\r\n                    this.dg.dgs.setSelecedRow.emit();\r\n                });\r\n            } else {\r\n                this.dg.rowClick.emit({ data: this.rowData, grid: this.dg, dblclick: false });\r\n            }\r\n        }\r\n    }\r\n\r\n    initFormControl() {\r\n        this.form = this.fb.group({});\r\n        this.createControl();\r\n        this.form['bindingData'] = this.rowData;\r\n    }\r\n\r\n    createControl() {\r\n        if (this.dg && this.dg.flatColumns) {\r\n            this.dg.flatColumns.forEach(col => {\r\n                if (!col.editor && !col.editorTemplate) { return; }\r\n                if (!this.form.controls[col.field]) {\r\n                    const control = this.createFormControl(col);\r\n                    this.form.addControl(col.field, control);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    private createFormControl(col) {\r\n        return this.fb.control(\r\n            Utils.getValue(col.field, this.rowData),\r\n            {\r\n                validators: col.editor ? this.bindValidations(col.editor.validators) : null\r\n            }\r\n        );\r\n    }\r\n\r\n    private bindValidations(validators: DatagridValidator[]) {\r\n        const validations = [];\r\n        if (validators && validators.length) {\r\n\r\n            validators.forEach((v: DatagridValidator) => {\r\n                let validation = null;\r\n                switch (v.type) {\r\n                    case 'required':\r\n                        validation = Validators.required;\r\n                        break;\r\n                    case 'min':\r\n                        validation = Validators.min(v.value);\r\n                        break;\r\n                    case 'max':\r\n                        validation = Validators.max(v.value);\r\n                        break;\r\n                    case 'minLength':\r\n                        validation = Validators.minLength(v.value);\r\n                        break;\r\n                    case 'maxLength':\r\n                        validation = Validators.maxLength(v.value);\r\n                        break;\r\n                    case 'email':\r\n                        validation = Validators.email;\r\n                        break;\r\n                    case 'requiredTrue':\r\n                        validation = Validators.requiredTrue;\r\n                        break;\r\n                    case 'pattern':\r\n                        validation = Validators.pattern(v.value);\r\n                        break;\r\n                }\r\n                if (validation) {\r\n                    validations.push(validation);\r\n                } else {\r\n                    if (this.dg.validators && this.dg.validators.length) {\r\n                        const vfn = this.dg.validators.find(vr => vr.name === v.type);\r\n                        if (vfn) {\r\n                            validation = vfn.value(this.rowData);\r\n                            validations.push(validation);\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        return validations;\r\n    }\r\n\r\n\r\n    refresh() {\r\n        this.updateRowHeight();\r\n        this.updateCellEmptyStyle();\r\n    }\r\n\r\n    updateRowHeight() {\r\n        if (!this.dg.nowrap) {\r\n            const centerTr = this.dgb.mainArea.nativeElement.querySelector('tr[index=\"' + this.rowIndex + '\"]');\r\n            centerTr.style.height = 'auto';\r\n            const trHeight = centerTr.offsetHeight;\r\n            let leftTrDom = null;\r\n            let rightTrDom = null;\r\n            const heightSizeList = [trHeight];\r\n            if (this.dgb) {\r\n                if (this.dgb.fixedLeftEl) {\r\n                    leftTrDom = this.dgb.fixedLeftEl.nativeElement.querySelector('tr[index=\"' + this.rowIndex + '\"]');\r\n                    if (leftTrDom) {\r\n                        leftTrDom.style.height = 'auto';\r\n                        heightSizeList.push(leftTrDom.offsetHeight);\r\n                    }\r\n                }\r\n                if (this.dgb.fixedRightEl) {\r\n                    rightTrDom = this.dgb.fixedRightEl.nativeElement.querySelector('tr[index=\"' + this.rowIndex + '\"]');\r\n                    if (rightTrDom) {\r\n                        rightTrDom.style.height = 'auto';\r\n                        heightSizeList.push(rightTrDom.offsetHeight);\r\n                    }\r\n                }\r\n\r\n                const maxHeight = Math.max(...heightSizeList);\r\n\r\n                centerTr.style.height = `${maxHeight}px`;\r\n                if (leftTrDom) {\r\n                    leftTrDom.style.height = `${maxHeight}px`;\r\n                }\r\n\r\n                if (rightTrDom) {\r\n                    rightTrDom.style.height = `${maxHeight}px`;\r\n                }\r\n\r\n                this.cd.markForCheck();\r\n                this.dgb.updateCanvasHeight();\r\n            }\r\n        }\r\n    }\r\n\r\n    private updateCellEmptyStyle() {\r\n\r\n        if (!this.dg.enableEditCellStyle) {\r\n            return;\r\n        }\r\n\r\n        let rowIsDisabled = false;\r\n        if (this.dg.disableRow) {\r\n            rowIsDisabled = this.dg.disableRow(this.rowData, this.rowIndex);\r\n        }\r\n\r\n        const updateCellEmptyText = (cells) => {\r\n            if (cells.length) {\r\n\r\n                for (let k = 0; k < cells.length; k++) {\r\n                    const field = cells[k].getAttribute('field');\r\n                    if (field) {\r\n                        const col = this.dfs.getColumn(field);\r\n                        if (col) {\r\n\r\n                            if (!col.editor) {\r\n                                continue;\r\n                            }\r\n                            const cls = col.align === 'right' ? 'allow-edit-cell-left' : 'allow-edit-cell';\r\n                            const emptyicon_cls = ALLOW_EDIT_CELL_HIGHLIGHT_CLS[col.editor.type];\r\n                            const span = cells[k].querySelector('.cell-text-box');\r\n                            const colVal = Utils.getValue(field, this.rowData);\r\n                            const fmtVal = this.dg.colFormatSer.format(colVal, this.rowData, col.formatter);\r\n                            if (!this.dg.editable || rowIsDisabled || this.dg.cellIsReadOnly(col, this.rowData)) {\r\n                                cells[k].className = cells[k].className.replace(cls, '');\r\n                                cells[k].className = cells[k].className.replace(emptyicon_cls, '');\r\n                                if (span) {\r\n                                    if (span.className.indexOf('cell-empty') > -1) {\r\n                                        span.className = span.className.replace('cell-empty', '');\r\n                                    }\r\n\r\n                                    if (colVal === '' || colVal === null || colVal === undefined) {\r\n                                        span.innerHTML = '';\r\n                                    } else {\r\n                                        span.innerHTML = fmtVal;\r\n                                    }\r\n                                }\r\n                            } else {\r\n                                if (span) {\r\n                                    if (colVal === '' || colVal === null || colVal === undefined) {\r\n                                        if (span.className.indexOf('cell-empty') === -1) {\r\n                                            span.className = span.className + ' cell-empty';\r\n                                        }\r\n\r\n                                        span.innerHTML = Utils.getWhenEmptyText(col, this.dg.localeService.localeId);\r\n                                    } else {\r\n                                        span.innerHTML = fmtVal;\r\n                                    }\r\n                                }\r\n\r\n                                if (cells[k].className.indexOf('cell-readonly') > -1) {\r\n                                    cells[k].className = cells[k].className.replace('cell-readonly', '');\r\n                                }\r\n\r\n                                if (cells[k].className.indexOf(cls) === -1) {\r\n                                    this.render.addClass(cells[k], cls);\r\n                                }\r\n\r\n                                if (cells[k].className.indexOf(emptyicon_cls) === -1) {\r\n                                    this.render.addClass(cells[k], emptyicon_cls);\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        };\r\n\r\n\r\n        // if (this.dgb.fixedLeftEl) {\r\n        //     const leftTrDom = this.dgb.fixedLeftEl.nativeElement.querySelector('tr[index=\"' + this.rowIndex + '\"]');\r\n        //     if (leftTrDom) {\r\n        //         updateCellEmptyText(leftTrDom.querySelectorAll('td[field]'));\r\n        //     }\r\n        // }\r\n\r\n        const cells = this.el.nativeElement.querySelectorAll('td[field]:not([field=\"_datagrid-setting-control_\"])');\r\n        updateCellEmptyText(cells);\r\n    }\r\n}\r\n","import { ColumnFormatService } from '@farris/ui-common/column';\r\n/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @Date: 2019-07-29 08:14:22\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-10-11 11:38:58\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\nimport { DatagridComponent } from './../../datagrid.component';\r\nimport {\r\n    ComponentFactoryResolver,\r\n    ComponentRef,\r\n    Directive,\r\n    Input,\r\n    OnInit,\r\n    AfterViewInit,\r\n    ViewContainerRef,\r\n    Injector,\r\n    OnDestroy,\r\n    Inject,\r\n    forwardRef,\r\n    ApplicationRef\r\n} from '@angular/core';\r\nimport { FormGroup, FormBuilder } from '@angular/forms';\r\nimport { DataColumn } from '../../types';\r\n\r\n@Directive({\r\n    selector: '[cell-editor]',\r\n})\r\nexport class GridCellEditorDirective implements OnInit, AfterViewInit, OnDestroy {\r\n    @Input() column: DataColumn;\r\n    @Input() group: FormGroup;\r\n    @Input() rowData: any;\r\n    @Input() value: any;\r\n    @Input() height: any;\r\n    componentRef: ComponentRef<any>;\r\n    private cfs: ColumnFormatService = null;\r\n    private timer = null;\r\n    constructor(\r\n        private resolver: ComponentFactoryResolver,\r\n        private container: ViewContainerRef,\r\n        private app: ApplicationRef,\r\n        private fb: FormBuilder,\r\n        @Inject(forwardRef(() => DatagridComponent)) public dg: DatagridComponent\r\n    ) {\r\n        this.cfs = this.dg.inject.get(ColumnFormatService);\r\n    }\r\n\r\n    ngOnInit() {\r\n        if (this.column.editor) {\r\n            this.createCellEditor();\r\n        }\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        this.dg.dgs.cellEditorCreated.emit({ editorRef: this.componentRef, column: this.column, cellEditorRef: this});\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.dg.dgs.cellEditorDestory.emit({ editorRef: this.componentRef, column: this.column, cellEditorRef: this});\r\n        if (this.componentRef) {\r\n            this.componentRef.destroy();\r\n        }\r\n        this.componentRef = null;\r\n        if (this.timer) {\r\n            clearTimeout(this.timer);\r\n        }\r\n    }\r\n\r\n    private createCellEditor() {\r\n\r\n        const editorType = this.column.editor.type;\r\n\r\n        if (!this.dg.editors[editorType]) {\r\n            this.dg.writeConsole(`æ¾ä¸å°åç§°ä¸º ${editorType} å¯¹åºçç±»ã`, 'error');\r\n            return;\r\n        }\r\n\r\n        const factory = this.resolver.resolveComponentFactory(\r\n            this.dg.editors[editorType]\r\n        );\r\n        this.componentRef = this.container.createComponent(factory);\r\n\r\n        // this.componentRef.instance.dg = this.dg;\r\n        // this.app.attachView(this.componentRef.hostView);\r\n        this.componentRef.instance.column = this.column;\r\n        this.componentRef.instance.group = this.group;\r\n        this.componentRef.instance.height = this.height;\r\n        this.componentRef.instance.controlId = (this.dg.id || 'DATAGRID_EDITOR') + '_' + this.column.field;\r\n\r\n        this.updateControlValue();\r\n        this.componentRef.changeDetectorRef.markForCheck();\r\n        this.componentRef.changeDetectorRef.detectChanges();\r\n        // this.app.tick();\r\n        if (this.timer) {\r\n            clearTimeout(this.timer);\r\n        }\r\n        this.timer = setTimeout(() => {\r\n            if (this.componentRef.instance.instance) {\r\n                if (editorType === 'lookup') {\r\n                    if (!this.componentRef.instance.instance.changeDetector.destroyed) {\r\n                        this.componentRef.instance.instance.changeDetector.detectChanges();\r\n                    }\r\n                    // this.componentRef.instance['bindingData'] = this.rowData;\r\n                }\r\n                // if (editorType === 'textarea') {\r\n                //     const textareaEl = this.componentRef.instance.inputElement;\r\n                //     textareaEl.style.height = textareaEl.closest('tr').style.height;\r\n                // }\r\n            }\r\n        });\r\n    }\r\n\r\n    private updateControlValue() {\r\n        if (this.group) {\r\n            this.group['bindingData'] = this.rowData;\r\n            if (this.group.controls[this.column.field]) {\r\n                // if (this.column.editor.type === 'datepicker') {\r\n                //     const dateRef = this.componentRef.instance.instance;\r\n                //     if (dateRef) {\r\n                //         setTimeout(() => {\r\n                //             const { dateFormat } = dateRef.dateOpts;\r\n                //             const val = this.cfs.format(this.value, this.rowData, {type: 'datetime', options: { format: dateFormat}});\r\n                //             this.group.controls[this.column.field].setValue(val, { emitEvent: true });\r\n                //         });\r\n                //     }\r\n                // } else {\r\n                //     this.group.controls[this.column.field].setValue(this.value, { emitEvent: true });\r\n                // }\r\n\r\n                this.group.controls[this.column.field].setValue(this.value, { emitEvent: true });\r\n            }\r\n        }\r\n    }\r\n\r\n    hideCover() {\r\n        if (this.column.editor && (this.column.editor.type === 'combolist' || this.column.editor.type === 'combo-lookup')) {\r\n            this.componentRef.instance.hide(!1);\r\n        }\r\n    }\r\n}\r\n","/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @Date: 2019-08-12 10:11:59\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-08-12 10:12:05\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\n\r\nimport { Pipe, PipeTransform } from '@angular/core';\r\nimport { DomSanitizer, SafeHtml, SafeStyle, SafeScript, SafeUrl, SafeResourceUrl } from '@angular/platform-browser';\r\n\r\n@Pipe({\r\n    name: 'safe'\r\n})\r\nexport class SafePipe implements PipeTransform {\r\n\r\n    private dangerWords = ['<script', 'onerror', 'alert('];\r\n\r\n    constructor(protected sanitizer: DomSanitizer) { }\r\n\r\n    public transform(value: any, type: string): SafeHtml | SafeStyle | SafeScript | SafeUrl | SafeResourceUrl {\r\n        switch (type) {\r\n            case 'html': {\r\n                if (value === '' || value === null || value === undefined) {\r\n                    return value;\r\n                }\r\n                // if (!this.hasDanger(value)) {\r\n                //     return value;\r\n                // }\r\n                return this.sanitizer.bypassSecurityTrustHtml(value);\r\n            }\r\n            case 'style': return this.sanitizer.bypassSecurityTrustStyle(value);\r\n            case 'script': return this.sanitizer.bypassSecurityTrustScript(value);\r\n            case 'url': return this.sanitizer.bypassSecurityTrustUrl(value);\r\n            case 'resourceUrl': return this.sanitizer.bypassSecurityTrustResourceUrl(value);\r\n            default: throw new Error(`Invalid safe type specified: ${type}`);\r\n        }\r\n    }\r\n\r\n    private hasDanger(value) {\r\n        if (typeof value  === 'number' || typeof value === 'boolean') {\r\n            return false;\r\n        }\r\n\r\n        let r = 0;\r\n\r\n        this.dangerWords.forEach(n => {\r\n            if (value.indexOf(n) > -1) {\r\n                r++;\r\n            }\r\n        });\r\n\r\n        return r !== 0;\r\n    }\r\n\r\n}\r\n","import { FormGroup } from '@angular/forms';\r\n\r\n/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @Date: 2019-08-06 07:43:53\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-10-31 09:11:02\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\nimport { Component, OnInit, Input, Output, EventEmitter, OnChanges,\r\n    ViewChild, ElementRef, ChangeDetectionStrategy, ChangeDetectorRef, ViewContainerRef,\r\n    OnDestroy, Injector, Inject, forwardRef, AfterViewInit, SimpleChanges, Renderer2} from '@angular/core';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\nimport { Subject, Subscription } from 'rxjs';\r\nimport { filter } from 'rxjs/operators';\r\nimport { ColumnFormatService } from '@farris/ui-common/column';\r\nimport { DataColumn } from '../../types/data-column';\r\nimport { Utils } from '../../utils/utils';\r\nimport { DatagridFacadeService } from '../../services/datagrid-facade.service';\r\nimport { DatagridComponent } from '../../datagrid.component';\r\nimport { DatagridRowDirective } from './datagrid-row.directive';\r\nimport { CellInfo } from '../../services/state';\r\nimport { GridCellEditorDirective } from '../editors/cell-editor.directive';\r\nimport { DatagridService } from '../../services/datagrid.service';\r\nimport { SafePipe } from './../../utils/safe.pipe';\r\nimport { TR_PREFIX } from '../../types/constant';\r\n\r\n     // <ng-container *ngIf=\"!isEditing && !column.template\">\r\n        //     <ng-container *ngIf=\"column.formatter\">\r\n        //         <span *ngIf=\"cellFormatterIsFn\" [innerHtml]=\" column | formatCellData: rowData | safe: 'html'\"></span>\r\n        //         <span *ngIf=\"!cellFormatterIsFn\">{{  column | formatCellData: rowData }}</span>\r\n        //     </ng-container>\r\n        //     <span *ngIf=\"!column.formatter\" [class.grid-cell-nowrap]=\"dg.nowrap\" [class.grid-cell-wrap]=\"!dg.nowrap\">{{  column | formatCellData: rowData }}</span>\r\n        // </ng-container>\r\n        // <span *ngIf=\"!isEditing && !column.template\" cell-content [class.grid-cell-nowrap]=\"dg.nowrap\" [class.grid-cell-wrap]=\"!dg.nowrap\"\r\n        //     [rowData]=\"rowData\" [column]=\"column\" [nowrap]=\"dg.nowrap\"></span>\r\n@Component({\r\n    selector: 'grid-body-cell',\r\n    template: `\r\n    <div\r\n     [attr.cell-tooltip]=\"column.showTips && !isEditing\" [attr.tipMode]=\" column.tipMode || 'auto'\"\r\n     [attr.message]=\"column | tipmsg: rowData\"  [attr.position]=\" column?.tipOptions?.position || 'top-left'\"\r\n     [attr.tipWidth]=\"column?.tipOptions?.width\" [attr.tipHeight]=\"column?.tipOptions?.height\"\r\n     class=\"f-datagrid-cell-content cell-text-align__{{column.field}}\" #cellContainer\r\n    >\r\n        <ng-container *ngIf=\"!isEditing && !column.template\">\r\n            <ng-container *ngIf=\"column.formatter\">\r\n                <span class=\"cell-text-box\" *ngIf=\"cellFormatterIsFn\" [innerHtml]=\" column | formatCellData: rowData | safe: 'html'\"></span>\r\n                <span class=\"cell-text-box\" *ngIf=\"!cellFormatterIsFn\">{{  column | formatCellData: rowData }}</span>\r\n            </ng-container>\r\n            <span *ngIf=\"!column.formatter\" class=\"cell-text-box\" [class.grid-cell-nowrap]=\"dg.nowrap\" [class.grid-cell-wrap]=\"!dg.nowrap\">{{  column | formatCellData: rowData }}</span>\r\n        </ng-container>\r\n\r\n        <ng-container #cellTemplate *ngIf=\"!isEditing && column.template\" [ngTemplateOutlet]=\"column.template\" [ngTemplateOutletContext]=\"{$implicit: cellContext}\"></ng-container>\r\n        <ng-container #cellEditorTemplate *ngIf=\"isEditing && column.editorTemplate\" [ngTemplateOutlet]=\"column.editorTemplate\" [ngTemplateOutletContext]=\"{$implicit: cellContext}\"></ng-container>\r\n        <ng-container #editorTemplate *ngIf=\"isEditing && !column.editorTemplate\" cell-editor [height]=\"controlHeight\" [rowData]=\"rowData\" [value]=\"value\" [column]=\"column\" [group]=\"dr.form\"></ng-container>\r\n    </div>\r\n    `,\r\n    changeDetection: ChangeDetectionStrategy.Default\r\n})\r\nexport class DatagridCellComponent implements OnInit, OnDestroy, AfterViewInit, OnChanges {\r\n    @Input() width: number;\r\n    @Input() height: number;\r\n    @Input() cls = '';\r\n    @Input() column: DataColumn;\r\n    @Input() rowData: any;\r\n    @Input() rowIndex: number;\r\n    @Input() lastColumn = false;\r\n    // @ViewChild('celltip') celltip: DatagridCellTooltipDirective;\r\n\r\n    private _isEditing = false;\r\n    controlHeight = 'auto';\r\n    get isEditing() {\r\n        return this._isEditing;\r\n    }\r\n    @Input() set isEditing(v) {\r\n        if (this._isEditing === v) {\r\n            return;\r\n        }\r\n        this._isEditing = v;\r\n\r\n        if (v) {\r\n            if (!this.dr.form || !Object.keys(this.dr.form.controls).length ) {\r\n                this.dr.initFormControl();\r\n            }\r\n\r\n            if (this.column.editorTemplate && this.column.editorTemplate.elementRef) {\r\n                this.cellContext.formGroup = this.dr.form;\r\n\r\n                setTimeout(() => {\r\n\r\n                    if (this.el) {\r\n                        const input = this.el.nativeElement.querySelector('input,textarea');\r\n                        if (input) {\r\n                            input.focus();\r\n                        }\r\n                    }\r\n                }, 10);\r\n            }\r\n        }\r\n        if (this.column.editor && this.column.editor.type === 'textarea') {\r\n            if (!this.dg.nowrap) {\r\n                this.controlHeight = this.dr.el.nativeElement.offsetHeight;\r\n            }\r\n        }\r\n        if (!this.cd['destroyed']) {\r\n            this.cd.detectChanges();\r\n        }\r\n    }\r\n\r\n    @Input() isSelected = false;\r\n\r\n    @ViewChild('cellContainer') cellContainer: ElementRef;\r\n    @ViewChild('cellTemplate', {read: ViewContainerRef }) cellTemplateVcr: ViewContainerRef;\r\n\r\n\r\n    private _cellEditorTemplate = null;\r\n    @ViewChild('cellEditorTemplate', {read: ViewContainerRef })\r\n    get cellEditorTemplate(): ViewContainerRef {\r\n        return this._cellEditorTemplate;\r\n    }\r\n    set cellEditorTemplate(v) {\r\n        this._cellEditorTemplate = v;\r\n        if (v) {\r\n            this.dg.dgs.cellEditorCreated.emit({ editorRef: null, column: this.column, cellEditorRef: null, templateRef: v});\r\n        }\r\n    }\r\n\r\n    @ViewChild(GridCellEditorDirective) cellEditor;\r\n\r\n\r\n    @Output() cellClick = new EventEmitter();\r\n    @Output() cellDblClick = new EventEmitter();\r\n\r\n    cellContext: any = {};\r\n    get value() {\r\n        if (this.rowData && this.column && this.column.field) {\r\n            return Utils.getValue(this.column.field, this.rowData);\r\n        }\r\n        return '';\r\n    }\r\n\r\n    get formControl() {\r\n        if (this.cellEditor) {\r\n            return this.cellEditor.componentRef.instance.formControl;\r\n        } else if (this.column.editorTemplate) {\r\n            return this.dr.form.get(this.column.field);\r\n        }\r\n        return null;\r\n    }\r\n\r\n    // get verticalAlign() {\r\n    //     let va = 'center';\r\n    //     switch (this.column.valign) {\r\n    //         case 'top':\r\n    //             va = 'flex-start';\r\n    //             break;\r\n    //         case 'bottom':\r\n    //             va = 'flex-end';\r\n    //             break;\r\n    //         default:\r\n    //             va = 'center';\r\n    //             break;\r\n    //     }\r\n\r\n    //     return va;\r\n    // }\r\n\r\n    // get horizontalAlign() {\r\n    //     let ha = 'flex-start';\r\n    //     if (this.column.align === 'right') {\r\n    //         ha = 'flex-end';\r\n    //     } else if (this.column.align === 'center') {\r\n    //         ha = 'center';\r\n    //     }\r\n    //     return ha;\r\n    // }\r\n\r\n    // get cellStyle() {\r\n    //     // const w = this.lastColumn ? (this.column.width - 6) + 'px' : '100%';\r\n    //     // const style = {\r\n    //     //     width: w\r\n    //     // };\r\n    //     if (!this.isEditing) {\r\n    //         return Object.assign({}, {\r\n    //             'align-items': this.verticalAlign,\r\n    //             'justify-content': this.horizontalAlign\r\n    //         });\r\n    //     } else {\r\n    //         return Object.assign({}, {\r\n    //             'justify-content': this.horizontalAlign\r\n    //         });\r\n    //     }\r\n    // }\r\n\r\n    get cellFormatterIsFn() {\r\n        return typeof this.column.formatter === 'function' || this.column.formatter.type === 'boolean';\r\n    }\r\n\r\n    cellStyler: any = {};\r\n\r\n    private dfs: DatagridFacadeService;\r\n    private dgs: DatagridService;\r\n    private cellSubscription: Subscription;\r\n    private rowUpdateSubscription: Subscription;\r\n    private safePipe: SafePipe = null;\r\n    private render: Renderer2;\r\n    private ro: ResizeObserver = null;\r\n    canEdit = () => this.dg.editable && this.dg.editMode === 'cell' && this.column.editor;\r\n    constructor(\r\n        @Inject(forwardRef(() => DatagridComponent)) public dg: DatagridComponent,\r\n        @Inject(forwardRef(() => DatagridRowDirective)) public dr: DatagridRowDirective,\r\n        public el: ElementRef, public cd: ChangeDetectorRef, private injector: Injector,\r\n        public colFormatSer: ColumnFormatService,\r\n        private domSanitizer: DomSanitizer\r\n    ) {\r\n        this.dfs = this.injector.get(DatagridFacadeService);\r\n        this.dgs = this.injector.get(DatagridService);\r\n        this.safePipe = new SafePipe(this.domSanitizer);\r\n        this.render = this.injector.get(Renderer2);\r\n        // this.cellSubscription = this.dfs.currentCell$.pipe(\r\n        //     filter((cell: CellInfo) => {\r\n        //         return cell && this.column.editor && cell.rowIndex === this.rowIndex && cell.field === this.column.field;\r\n        //     })\r\n        // ).subscribe((cell: CellInfo) => {\r\n        //     if (cell && this.column.editor) {\r\n        //         this.isEditing = cell.isEditing;\r\n        //         cell.cellRef = this;\r\n        //         cell.column = this.column;\r\n\r\n        //         if (!this.cd['destroyed']) {\r\n        //             this.cd.detectChanges();\r\n        //         }\r\n        //     }\r\n        // });\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.initCellTemplateContext();\r\n    }\r\n\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (changes.rowData && !changes.rowData.isFirstChange()) {\r\n            this.initCellTemplateContext();\r\n            this.buildCustomCellStyle();\r\n\r\n            if (this.formControl) {\r\n                const val = Utils.getValue(this.column.field, this.rowData);\r\n                this.formControl.setValue(val);\r\n            }\r\n        }\r\n    }\r\n\r\n    private initCellTemplateContext() {\r\n        this.cellContext = {\r\n            field: this.column.field,\r\n            rowIndex: this.rowIndex,\r\n            rowData: this.rowData,\r\n            column: this.column,\r\n            instance: this,\r\n            formGroup: this.dr.form,\r\n            tools: {\r\n                utils: this.dg.commonUtils,\r\n                format: this.dg.colFormatSer,\r\n                number: this.dg.colFormatSer['numberhelper'],\r\n                date: this.dg.colFormatSer['datehelper']\r\n            },\r\n        };\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n        this.buildCustomCellStyle();\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        if (this.cellSubscription) {\r\n            this.cellSubscription.unsubscribe();\r\n            this.cellSubscription = null;\r\n        }\r\n\r\n        if (this.rowUpdateSubscription) {\r\n            this.rowUpdateSubscription.unsubscribe();\r\n            this.rowUpdateSubscription = null;\r\n        }\r\n\r\n\r\n        this.cellContext = null;\r\n    }\r\n\r\n\r\n    private buildCustomCellStyle(rowData = null) {\r\n        const td = this.el.nativeElement.parentNode;\r\n        if (!td.id) {\r\n            td.id = TR_PREFIX + this.dr.rowId + '_' + this.rowIndex + '-' + this.column.field;\r\n        }\r\n        td.id = td.id.replace(/\\./g, '_');\r\n\r\n        if (this.column.styler) {\r\n            const _rd = rowData || this.rowData;\r\n            const cs = this.column.styler(_rd[this.column.field], _rd, this.rowIndex);\r\n            if (cs && Object.keys(cs).length) {\r\n                this.dg.renderCustomStyle(cs, td);\r\n            }\r\n        } else {\r\n            this.dg.dgs.removeCssRule('#' + td.id);\r\n        }\r\n    }\r\n\r\n    updateValue(val?: any) {\r\n        if (this.dr.form) {\r\n            // this.rowData = Object.assign(this.rowData, this.dr.form.value);\r\n            Utils.setValue(this.column.field, val, this.rowData);\r\n            // this.rowData = {...this.rowData};\r\n            const rowid = this.rowData[this.dg.idField];\r\n            const item = this.dg.data.find(n => n[this.dg.idField] === rowid);\r\n            if (item) {\r\n                Utils.setValue(this.column.field, val, item);\r\n            }\r\n\r\n            this.dfs.updateCheckedData(rowid, { [this.column.field]: val });\r\n\r\n            if (!this.cd['destroyed']) {\r\n                this.cd.detectChanges();\r\n            }\r\n        }\r\n    }\r\n}\r\n","/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @Date: 2019-08-06 07:43:07\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-11-19 15:48:27\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\nimport { Directive, Input, ElementRef, Renderer2, OnInit, ContentChild, OnDestroy, Injector, forwardRef, Inject, AfterViewInit, NgZone, OnChanges, SimpleChanges } from '@angular/core';\r\nimport { FormControl } from '@angular/forms';\r\nimport { filter, map, switchMap, takeLast, debounceTime, takeUntil } from 'rxjs/operators';\r\nimport { DatagridService } from './../../services/datagrid.service';\r\nimport { DatagridCellComponent } from './datagrid-cell.component';\r\nimport { DatagridBodyComponent } from './datagrid-body.component';\r\nimport { DatagridRowDirective } from './datagrid-row.directive';\r\nimport { DataColumn } from './../../types/data-column';\r\nimport { DatagridFacadeService } from '../../services/datagrid-facade.service';\r\nimport { DatagridComponent } from '../../datagrid.component';\r\nimport { CELL_SELECTED_CLS, CELL_EDITING_CLS, ALLOW_EDIT_CELL_HIGHLIGHT_CLS } from '../../types/constant';\r\nimport { DomHandler } from '../../services/domhandler';\r\nimport { of, Subscription,  noop, Subject  } from 'rxjs';\r\nimport { Utils } from '../../utils/utils';\r\n\r\n@Directive({\r\n    selector: '[cell-editable]',\r\n    exportAs: 'cellEditable'\r\n})\r\nexport class DatagridCellEditableDirective implements OnInit, OnDestroy, OnChanges, AfterViewInit {\r\n    @Input('cell-editable') rowData: any;\r\n    @Input() column: DataColumn;\r\n\r\n    private clickTimer: any;\r\n\r\n    private cellclick: any;\r\n    private celldblclick: any;\r\n    private bindCellEventSubscription: Subscription;\r\n\r\n    private editorInputKeydownEvent: any;\r\n    editor: any;\r\n    formControl: FormControl;\r\n    cellEditorRef: any;\r\n    // get editor() {\r\n    //     if (this.dc.cellEditor) {\r\n    //         const _editor = this.dc.cellEditor.componentRef.instance;\r\n    //         this.dg.pending = _editor.pending;\r\n    //         return _editor;\r\n    //     }\r\n    //     return null;\r\n    // }\r\n\r\n    // get formControl() {\r\n    //     if (this.editor) {\r\n    //         return this.editor.formControl as FormControl;\r\n    //     }\r\n    //     return null;\r\n    // }\r\n\r\n    @ContentChild(DatagridCellComponent) dc: DatagridCellComponent;\r\n    private dgb: DatagridBodyComponent;\r\n    private dr: DatagridRowDirective;\r\n    private dfs: DatagridFacadeService;\r\n    private dgs: DatagridService;\r\n\r\n    // private _readonly$ = null;\r\n    private cellEditorCreatedSubscription = null;\r\n    private cellEditorDestorySubscription = null;\r\n    private destroy$ = new Subject();\r\n    constructor(\r\n        private injector: Injector, public el: ElementRef, private render: Renderer2,\r\n        @Inject(forwardRef(() => DatagridComponent)) public dg: DatagridComponent, public ngZone: NgZone) {\r\n        this.dgb = this.injector.get(DatagridBodyComponent);\r\n        this.dr = this.injector.get(DatagridRowDirective);\r\n        this.dfs = this.injector.get(DatagridFacadeService);\r\n        this.dgs = this.injector.get(DatagridService);\r\n\r\n\r\n        if (!this.cellEditorCreatedSubscription) {\r\n            this.cellEditorCreatedSubscription = this.dgs.cellEditorCreated.pipe(\r\n                takeUntil(this.destroy$)\r\n            ).pipe(\r\n                filter(({ column, editorRef, cellEditorRef, templateRef }) => {\r\n                    return column.field === this.column.field && this.dg.selectedRow.id === this.dr.rowId;\r\n                })\r\n            ).subscribe(({ editorRef, cellEditorRef, templateRef }) => {\r\n                if (editorRef) {\r\n                    this['editor'] = editorRef.instance;\r\n                    this['formControl'] = this.editor.formControl as FormControl;\r\n                    this.cellEditorRef = cellEditorRef;\r\n                    this.emitBeginEdit();\r\n                } else {\r\n                    this['formControl'] = this.dr.form.get(this.column.field) as FormControl;\r\n                    this.bindEditorInputEvent();\r\n                    this.dg.beginEdit.emit({ editor: null, column: this.column, rowData: this.rowData, gridInstance: this.dg, template: templateRef });\r\n                }\r\n\r\n            });\r\n        }\r\n\r\n\r\n        this.dg.dgs.cellEditorDestory.pipe(\r\n            takeUntil(this.destroy$)\r\n        ).pipe(\r\n            filter(({ column }) => {\r\n                return this.dg.selectedRow && column.field === this.column.field && this.dg.selectedRow.id === this.dr.rowId;\r\n            })\r\n        ).subscribe((e: any) => {\r\n            if (this.dg.editMode === 'cell') {\r\n                this.dg.selectedRow.editors = [];\r\n                if (this.dg.currentCell) {\r\n                    this.dg.currentCell.editor = null;\r\n                    this.dg.currentCell.cellEditorRef = null;\r\n                }\r\n            }\r\n            this.unBindEditorInputEvent();\r\n            this.cellEditorRef = null;\r\n            this.formControl = null;\r\n            this.editor = null;\r\n        });\r\n\r\n    }\r\n\r\n    ngOnInit() {\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (changes.rowData && !changes.rowData.isFirstChange()) {\r\n            this.setCellClsWithEditorType();\r\n        }\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        this.initCellEvent();\r\n        this.setCellClsWithEditorType();\r\n    }\r\n\r\n    private initCellEvent() {\r\n        // this.cellclick = this.render.listen(this.el.nativeElement, 'click', (e) => this.onClickCell(e));\r\n        if (this.column && (this.column.editor || this.column.editorTemplate)) {\r\n            if (!this.dg.clickToEdit) {\r\n                this.celldblclick = this.render.listen(this.el.nativeElement, 'dblclick', (e) => {\r\n                    this.onDblClickCell(e);\r\n                });\r\n            }\r\n            this.el.nativeElement.edit = (e) => this.onClickCell(e);\r\n            this.el.nativeElement.editCell = (e) => {\r\n                this.openCellEditor();\r\n            };\r\n        } else {\r\n            this.clickTimer = 0;\r\n        }\r\n        this.el.nativeElement.gridCellData = { rowData: this.rowData, rowIndex: this.dr.rowIndex };\r\n        this.el.nativeElement.closeEdit = () => this.closeEditingCell();\r\n        this.el.nativeElement.selectCell = (e, el) => {\r\n            if (this.dg.disableRow && this.dg.disableRow(this.rowData, this.dr.rowIndex)) {\r\n                return;\r\n            }\r\n\r\n            if (this.dg.currentCell && this.dg.currentCell.cellElement.id === el.id && !this.dg.keepSelect) {\r\n                this.dg.cancelSelectCell();\r\n            } else {\r\n                this.selectCell(this.column.field, el);\r\n                this.dg.cellClick.emit({ column: this.column, rowData: this.rowData, gridInstance: this.dg, event: e });\r\n            }\r\n        };\r\n        this.el.nativeElement.cancelSelected = () => {\r\n            // DomHandler.removeClass(this.el.nativeElement, CELL_SELECTED_CLS);\r\n            // DomHandler.removeClass(this.el.nativeElement, CELL_EDITING_CLS);\r\n            this.render.removeClass(this.el.nativeElement, CELL_SELECTED_CLS);\r\n            this.render.removeClass(this.el.nativeElement, CELL_EDITING_CLS);\r\n        };\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.destroy$.next();\r\n        this.destroy$.complete();\r\n\r\n        if (this.cellclick) {\r\n            this.cellclick();\r\n        }\r\n\r\n        if (this.celldblclick) {\r\n            this.celldblclick();\r\n        }\r\n\r\n        this.unBindEditorInputEvent();\r\n\r\n        if (this.bindCellEventSubscription) {\r\n            this.bindCellEventSubscription.unsubscribe();\r\n            this.bindCellEventSubscription = null;\r\n        }\r\n\r\n        if (this.cellEditorCreatedSubscription) {\r\n            this.cellEditorCreatedSubscription.unsubscribe();\r\n            this.cellEditorCreatedSubscription = null;\r\n        }\r\n\r\n        if (this.cellEditorDestorySubscription) {\r\n            this.cellEditorDestorySubscription.unsubscribe();\r\n            this.cellEditorDestorySubscription = null;\r\n        }\r\n\r\n        this.editor = null;\r\n        this.cellEditorRef = null;\r\n        this.formControl = null;\r\n\r\n        if (this.el) {\r\n            this.el.nativeElement.cancelSelected = noop;\r\n            this.el.nativeElement.selectCell = noop;\r\n            this.el.nativeElement.closeEdit = noop;\r\n            this.el.nativeElement.gridCellData = noop;\r\n            this.el.nativeElement.edit = noop;\r\n            this.el.nativeElement.selectCell = noop;\r\n            this.el = null;\r\n        }\r\n    }\r\n\r\n    private isDifferentCell() {\r\n        if (!this.dg.currentCell) {\r\n            return true;\r\n        } else {\r\n            if (!this.dg.selectedRow || this.dg.selectedRow.index !== this.dr.rowIndex) {\r\n                return true;\r\n            } else {\r\n                if (this.dr.rowIndex !== this.dg.currentCell.rowIndex) {\r\n                    return true;\r\n                } else {\r\n                    return this.dg.currentCell.field !== this.column.field;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private onClickCell(event: any) {\r\n        // å³é­å¶ä»Grid çç¼è¾å¨\r\n        document.body.click();\r\n\r\n        this.dg.beforeClickCell.emit({ rowIndex: this.dr.rowIndex, rowData: this.rowData, column: this.column, gridInstance: this.dg });\r\n\r\n        if (this.dr.disabled) {\r\n            return;\r\n        }\r\n\r\n        // 20210422\r\n        // if (this.dg.closeOtherGridEditor) {\r\n        //     document.body.click();\r\n        // }\r\n\r\n        if (this.dg.disabled) {\r\n            return;\r\n        } else {\r\n            if (!this.dg.editable || this.isReadonly()) {\r\n                if (this.dg.enableHighlightCell) {\r\n                    event.stopPropagation();\r\n                    this.dg.endEditing();\r\n                    this.selectCell(this.column.field);\r\n                }\r\n                return;\r\n            } else {\r\n                if (this.dg.editMode === 'row') {\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (this.dg.selectionMode === 'default' && event) {\r\n            if (event.ctrlKey || event.shiftKey) {\r\n                return;\r\n            }\r\n        }\r\n\r\n\r\n        event.stopPropagation();\r\n        if (event.target['nodeName'] === 'INPUT') {\r\n            return;\r\n        }\r\n\r\n\r\n        if (this.dg.clickToEdit && !this.dg.dblclickRow.observers.length) {\r\n            this.dg.clickDelay = 0;\r\n        }\r\n\r\n\r\n        this.render.addClass(this.dg.el.nativeElement, 'f-datagrid-unselect');\r\n\r\n        if (!this.dg.isSingleClick && this.dg.editMode) {\r\n            this.dg.isSingleClick = true;\r\n            this.clickTimer = setTimeout(() => {\r\n                if (this.dg.isSingleClick && this.dg.editable && this.dg.editMode === 'cell') {\r\n                    this.dg.isSingleClick = false;\r\n                    clearTimeout(this.clickTimer);\r\n                    // if (!this.closeEditingCell()) {\r\n                    //     return;\r\n                    // }\r\n                    this.closeEditingCell().pipe(takeUntil(this.destroy$)).subscribe((f: any) => {\r\n                        if (f) {\r\n                            if (this.dg.clickToEdit) {\r\n                                this.openCellEditor();\r\n                            } else {\r\n                                this.selectCell(this.column.field);\r\n                            }\r\n                            this.render.removeClass(this.dg.el.nativeElement, 'f-datagrid-unselect');\r\n                            event.preventDefault();\r\n                        }\r\n                    });\r\n                }\r\n            }, this.dg.clickDelay);\r\n        }\r\n    }\r\n\r\n    private onDblClickCell(event: MouseEvent) {\r\n        if (this.dg.disabled || this.isReadonly()) {\r\n            return;\r\n        }\r\n\r\n        if (event.target['nodeName'] === 'INPUT' || event.target['nodeName'] === 'TEXTAREA') {\r\n            return;\r\n        }\r\n        if (this.dg.editable && this.dg.editMode === 'cell') {\r\n            // if (!this.closeEditingCell()) {\r\n            //     return;\r\n            // }\r\n            this.closeEditingCell().pipe(takeUntil(this.destroy$)).subscribe(f => {\r\n                if (f) {\r\n                    setTimeout(() => {\r\n                        this.openCellEditor();\r\n                    });\r\n                }\r\n            });\r\n        }\r\n        if (this.clickTimer) {\r\n            this.dg.isSingleClick = false;\r\n            clearTimeout(this.clickTimer);\r\n            this.clickTimer = null;\r\n        }\r\n    }\r\n\r\n    isReadonly(col = this.column) {\r\n        if (this.dg.editable) {\r\n            // åä¸åå¹¶çååæ ¼ä¸åè®¸ç¼è¾\r\n            if (this.dg.mergeCell && this.dg.mergeFields.indexOf(col.field) > -1) {\r\n                return true;\r\n            }\r\n            return this.getReadonlyValue(col);\r\n        } else {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    private getReadonlyValue(col = this.column) {\r\n        if (col.readonly !== undefined) {\r\n            if (typeof col.readonly === 'boolean') {\r\n                return col.readonly;\r\n            } else if (typeof col.readonly === 'function') {\r\n                return col.readonly(this.rowData);\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    openCellEditor() {\r\n        // å½åè¡ç¦ç¨ï¼ä¸åè®¸ç¼è¾ã\r\n        if (this.dr.disabled) {\r\n            return;\r\n        }\r\n\r\n        if ((!this.column.editor && !this.column.editorTemplate) || !this.dg.editable || this.isReadonly()) {\r\n            if (this.dg.selectionMode === 'default' && this.dg.multiSelect) {\r\n                this.dg.clearCheckeds();\r\n            }\r\n            this.selectCell(this.column.field);\r\n            return;\r\n        }\r\n\r\n        const beforeEditEvent = this.dg.beforeEdit({ rowIndex: this.dr.rowIndex, rowData: this.rowData, column: this.column, gridInstance: this.dg });\r\n        if (!beforeEditEvent || !beforeEditEvent.subscribe) {\r\n            this.dg.writeConsole('please return an Observable Type.');\r\n            return;\r\n        }\r\n\r\n        if (this.dg.currentCell) {\r\n            if (!this.dg.currentCell.cellRef || this.dg.currentCell.cellRef.column.field !== this.column.field) {\r\n                this.dg.currentCell.cellRef = this.dc;\r\n            }\r\n        }\r\n\r\n\r\n        beforeEditEvent.pipe(takeUntil(this.destroy$)).subscribe((flag) => {\r\n            if (flag) {\r\n                if (this.isDifferentCell()) {\r\n\r\n                    if (this.dg.selectionMode === 'default' && this.dg.multiSelect) {\r\n                        this.dg.clearCheckeds();\r\n                    }\r\n\r\n                    this.selectCell(this.column.field);\r\n                }\r\n\r\n                this.dfs.editCell();\r\n                // this.emitBeginEdit();\r\n            } else {\r\n                this.selectCell(this.column.field);\r\n            }\r\n        });\r\n    }\r\n\r\n    private emitBeginEdit() {\r\n\r\n        const _cellEditorRef = this.cellEditorRef || this.dc.cellEditor;\r\n\r\n        this.render.removeClass(this.dg.el.nativeElement, 'f-datagrid-unselect');\r\n\r\n        if (this.dg.editMode === 'cell') {\r\n            this.dg.selectedRow.editors = [this.editor];\r\n            this.dg.currentCell.editor = this.editor;\r\n            this.dg.currentCell.cellEditorRef = _cellEditorRef;\r\n            this.bindEditorInputEvent();\r\n\r\n            this.render.addClass(this.el.nativeElement, CELL_EDITING_CLS);\r\n\r\n            // this.formControl.setValue(this.dc.value);\r\n            this.dg.beginEdit.emit({ editor: _cellEditorRef, column: this.column, rowData: this.rowData, gridInstance: this.dg });\r\n\r\n            if (this.column.editor.type === 'textarea' && this.column.editor.options && this.column.editor.options.editType === 'dialog') {\r\n                this.editor.showDialog();\r\n            }\r\n        }\r\n\r\n        if (this.dr && !this.dg.nowrap) {\r\n            this.dr.updateRowHeight();\r\n        }\r\n    }\r\n\r\n    closeEditingCell() {\r\n        if (!this.dg.isCellEditing()) {\r\n            return of(true);\r\n        }\r\n\r\n        let currentCell = null;\r\n        let editor: any = null;\r\n        if (this.dg.currentCell) {\r\n            // this.dg.currentCell.isEditing = false;\r\n            // this.dfs.getCurrentCell().isEditing = false;\r\n\r\n            currentCell = this.dg.currentCell.cellRef as DatagridCellComponent;\r\n            if (currentCell) {\r\n                if (!currentCell.isEditing) {\r\n                    return of(true);\r\n                }\r\n\r\n                if (currentCell.cellEditor && currentCell.cellEditor.componentRef && !currentCell.column.editorTemplate) {\r\n                    editor = currentCell.cellEditor.componentRef.instance;\r\n\r\n                    if (editor) {\r\n                        // æ§è¡blur äºä»¶\r\n                        if (editor.inputElement) {\r\n                            const domName = editor.inputElement.nodeName;\r\n                            const blurFn =  editor.options && editor.options.onBlur;\r\n                            if (blurFn) {\r\n                                if ((domName === 'INPUT' || domName === 'TEXTAREA') &&  this.dg['focusElement'] === editor.inputElement) {\r\n                                    blurFn({ editorRef: editor, rowData: currentCell.rowData});\r\n                                }\r\n                            }\r\n                            if (editor.inputElement.blur) {\r\n                                editor.inputElement.blur();\r\n                            }\r\n\r\n                            this.dg['focusElement'] = null;\r\n                        }\r\n\r\n                        if (editor.blur) {\r\n                            editor.blur();\r\n                        }\r\n\r\n                        if (editor.pending) {\r\n                            return of(false);\r\n                        }\r\n\r\n                        if (editor.formControl) {\r\n                            if (editor.formControl.pending) {\r\n                                return of(false);\r\n                            }\r\n\r\n                            if (editor.formControl && editor.formControl.invalid && !this.dg.endEditByInvalid) {\r\n                                return of(false);\r\n                            }\r\n                        } else {\r\n                            return of(true);\r\n                        }\r\n                    } else {\r\n                        return of(true);\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            return of(true);\r\n        }\r\n\r\n        this.dg.isSingleClick = false;\r\n        const _col_ = (editor || currentCell).column;\r\n        const afterEditEvent = this.dg.afterEdit(currentCell.rowIndex, currentCell.rowData, _col_, editor);\r\n        if (!afterEditEvent || !afterEditEvent.subscribe) {\r\n            this.dg.writeConsole('please return an Observable Type.');\r\n            return;\r\n        }\r\n\r\n        let cellEndEdit = of(undefined);\r\n\r\n        afterEditEvent.pipe(takeUntil(this.destroy$)).subscribe((flag: boolean) => {\r\n            if (flag) {\r\n                let val = currentCell.value;\r\n                if (currentCell && currentCell.formControl && val !== currentCell.formControl.value) {\r\n                    val = currentCell.formControl.value;\r\n                    currentCell.isEditing = false;\r\n                    currentCell.updateValue(val);\r\n                }\r\n                this.dfs.endEditCell();\r\n                this.dgs.onEndCellEdit(this.dfs.getCurrentCell());\r\n                this.unBindEditorInputEvent();\r\n                // ç§»é¤ç¼è¾æ ·å¼\r\n                this.render.removeClass(this.el.nativeElement, CELL_EDITING_CLS);\r\n\r\n                if (this.dg.selectedRow) {\r\n                    this.dg.selectedRow.editors = [];\r\n                }\r\n                // this.dg.selectedRow.data = this.rowData;\r\n                // æ´æ°è¡æ ·å¼æèååæ ¼æ ·å¼\r\n                this.dfs.rowUpdate$.next({ index: currentCell.rowIndex, data: currentCell.rowData, cellRef: currentCell });\r\n                this.dg.endEdit.emit({ rowIndex: currentCell.rowIndex, rowData: currentCell.rowData, column: _col_, value: val });\r\n\r\n                // æ´æ°footerData\r\n                this.dgs.refreshFooterData.emit();\r\n                cellEndEdit = of(true);\r\n                // å·æ°è¡æ°æ®\r\n                // this.dr.refresh();\r\n                if (this.dg.selectedRow && this.dg.selectedRow.dr) {\r\n                    this.dg.selectedRow.dr.refresh();\r\n                }\r\n\r\n            } else {\r\n                if (currentCell && currentCell.cellEditor) {\r\n                    editor = currentCell.cellEditor.componentRef.instance;\r\n                    editor.inputElement.focus();\r\n                    cellEndEdit = of(false);\r\n                } else {\r\n                    cellEndEdit = of(true);\r\n                }\r\n            }\r\n        });\r\n        return cellEndEdit;\r\n    }\r\n\r\n    cancelCellEditing() {\r\n        if (this.dg.currentCell && this.dg.currentCell.isEditing && this.dg.selectedRow.index > -1) {\r\n            // this.dfs.resetRow(this.dg.selectedRow.id);\r\n            this.dc.rowData = this.dg.selectedRow.data;\r\n            this.formControl.reset(Utils.getValue(this.column.field, this.dc.rowData));\r\n            this.closeEditingCell();\r\n        }\r\n    }\r\n\r\n\r\n    bindEditorInputEvent() {\r\n        const ceRef = this.cellEditorRef || this.dc.cellEditor;\r\n        let input = null;\r\n        if (ceRef) {\r\n            input = ceRef.componentRef.instance.inputElement;\r\n        } else {\r\n            if (this.column.editorTemplate) {\r\n                input = this.dc.el.nativeElement.querySelector('input,textarea');\r\n            }\r\n        }\r\n        if (input) {\r\n            input.focus();\r\n            if (this.dg.selectOnEditing && this.column.editorTemplate) {\r\n                setTimeout(() => {\r\n                    if (input.select) { input.select(); }\r\n                });\r\n            }\r\n\r\n            this.editorInputKeydownEvent = this.render.listen(input, 'keydown', (e) => {\r\n                this.onKeyDownForInput(e);\r\n            });\r\n        }\r\n    }\r\n\r\n    unBindEditorInputEvent() {\r\n        if (this.editorInputKeydownEvent) {\r\n            this.editorInputKeydownEvent();\r\n            this.editorInputKeydownEvent = null;\r\n        }\r\n    }\r\n\r\n    onKeyDownForInput(e: KeyboardEvent) {\r\n        const keyCode = e.keyCode;\r\n        if (e.altKey || e.ctrlKey) {\r\n            return;\r\n        }\r\n        if ((this.editor && this.editor.stopPropagation) || keyCode === 13 || this.column.editorTemplate) {\r\n            e.stopPropagation();\r\n        }\r\n\r\n        switch (keyCode) {\r\n            case 32:  // SPACE\r\n                if (this.column.editor.type === 'switch') {\r\n                    e.preventDefault();\r\n                    this.editor.instance.updateChecked(e, false);\r\n                }\r\n                break;\r\n            case 13:  // Enter\r\n                this.closeEditingCell().pipe(takeUntil(this.destroy$)).pipe(\r\n                    debounceTime(100)\r\n                ).subscribe(f => {\r\n                    if (f) {\r\n                        this.dg.dgContainer.nativeElement.focus();\r\n                        const enterParam = { gird: this.dg, cell: this.dg.currentCell, event: e };\r\n                        if (this.column.onEnterHandler) {\r\n                            this.column.onEnterHandler(enterParam);\r\n                        } else {\r\n                            const nextTd = this.dg.currentCell.cellElement.nextElementSibling;\r\n                            if (this.dg.currentCell.lastRow && !nextTd) {\r\n                                this.dg.lastCellEnterHandle.emit(enterParam);\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n                break;\r\n            case 27: // ESC\r\n                this.cancelCellEditing();\r\n                break;\r\n            case 9: // Tab\r\n                e.stopPropagation();\r\n                this.dg.clickDelay = 0;\r\n                if (e.shiftKey) {\r\n                    this.closeEditingCell().pipe(takeUntil(this.destroy$)).subscribe(f => {\r\n                        if (f) {\r\n                            this.movePrevCellAndEdit();\r\n                        }\r\n                    });\r\n                } else {\r\n                    this.closeEditingCell().pipe(takeUntil(this.destroy$)).subscribe(f => {\r\n                        if (f) {\r\n                            this.moveNextCellAndEdit(e);\r\n                        }\r\n                    });\r\n                    e.preventDefault();\r\n                }\r\n                break;\r\n            case 40: // â\r\n                /** éä¸­ä¸ä¸è¡ï¼ä¸å½ååè¿å¥ç¼è¾æ; ä»æ®éææ¬è¾å¥æ¡æ¯æ */\r\n                if (this.column.editor.type === 'textbox') {\r\n                    this.closeEditingCell().pipe(takeUntil(this.destroy$)).subscribe(f => {\r\n                        if (f) {\r\n                            this.selectNextRowAndEditCell(this.column.field, 'down');\r\n                        }\r\n                    });\r\n                    e.preventDefault();\r\n                }\r\n                break;\r\n            case 38: // â\r\n                /** éä¸­ä¸ä¸è¡ï¼ä¸å½ååè¿å¥ç¼è¾æ; ä»æ®éææ¬è¾å¥æ¡æ¯æ */\r\n                if (this.column.editor.type === 'textbox') {\r\n                    this.closeEditingCell().pipe(takeUntil(this.destroy$)).subscribe(f => {\r\n                        if (f) {\r\n                            this.selectNextRowAndEditCell(this.column.field, 'up');\r\n                        }\r\n                    });\r\n                    e.preventDefault();\r\n                }\r\n                break;\r\n        }\r\n    }\r\n\r\n    private selectCell(field: string, tdElement?: any) {\r\n        this.closeEditingCell().subscribe(t => {\r\n            if (!t) {\r\n                return;\r\n            }\r\n            tdElement = tdElement || this.el.nativeElement;\r\n            this.clearCellSelectedClass();\r\n\r\n            if (field !== this.dg.ControlPanelFeild) {\r\n                this.render.addClass(tdElement, CELL_SELECTED_CLS);\r\n            }\r\n\r\n            // this.dr.drHover.setRowHoverCls(false);\r\n            this.dfs.setCurrentCell(this.dr, field, tdElement, this.dc);\r\n            if (!this.dg.fast) {\r\n                this.moveScrollbar(tdElement);\r\n            }\r\n        });\r\n    }\r\n\r\n    private moveScrollbar(td: any) {\r\n        const tdPosLeft = td.offsetLeft + td.offsetWidth;\r\n        const containerWidth = this.dg.width - this.dgb.columnsGroup.leftFixedWidth;\r\n        const tdRect = td.getBoundingClientRect();\r\n        const scrollContainer = this.dgb.ps.elementRef.nativeElement;\r\n        const psContainer = scrollContainer.getBoundingClientRect();\r\n        const scrollTop = scrollContainer.scrollTop;\r\n        const scrollLeft = scrollContainer.scrollLeft;\r\n        const scrollbarXLeft = this.dgb.ps.elementRef.nativeElement.scrollLeft;\r\n        if (tdPosLeft > containerWidth) {\r\n            const x = tdPosLeft - containerWidth + 2;\r\n            if (x > scrollbarXLeft) {\r\n                this.dgb.ps.scrollToX(x);\r\n            }\r\n        } else {\r\n            if (tdRect.x < psContainer.x) {\r\n                const x = scrollLeft - tdRect.x;\r\n                this.dgb.ps.scrollToX(x);\r\n            }\r\n        }\r\n\r\n        const tdPosTop = tdRect.top - psContainer.top + tdRect.height;\r\n        if (tdPosTop > psContainer.height) {\r\n            const y = tdPosTop - psContainer.height;\r\n            this.dgb.ps.scrollToY(scrollTop + y);\r\n        } else {\r\n            if (tdRect.y < psContainer.y) {\r\n                this.dgb.ps.scrollToY(scrollTop - (psContainer.y - tdRect.y));\r\n            }\r\n        }\r\n    }\r\n\r\n    private moveNextCellAndEdit(event?: any) {\r\n        // if (!this.closeEditingCell()) {\r\n        //     return;\r\n        // }\r\n        const fieldIndex = this.dfs.getColumnIndex(this.column.field);\r\n        if (fieldIndex + 1 < this.dgb.columnsGroup.normalColumns.length) {\r\n            const nextColumn = this.dgb.columnsGroup.normalColumns[fieldIndex + 1];\r\n\r\n            const nextTd = this.dg.currentCell.cellElement.nextElementSibling;\r\n            if (nextColumn && ((!nextColumn.editor && !nextColumn.editorTemplate) || this.isReadonly(nextColumn))) {\r\n                if (nextTd) {\r\n                    nextTd.selectCell(event, nextTd);\r\n                }\r\n                return;\r\n            }\r\n\r\n            if (nextTd) {\r\n                nextTd.focus();\r\n                if (nextColumn.editor || nextColumn.editorTemplate) {\r\n                    nextTd.editCell();\r\n                    this.dgs.onCellEdit(nextTd);\r\n                }\r\n            }\r\n        } else {\r\n            // next row's first cell to editing\r\n            const nextTr = this.dg.currentCell.cellElement.parentElement.nextElementSibling;\r\n            if (nextTr && nextTr.tagName === 'TR') {\r\n                // nextTr.children.find(td => td.editCell).editCell();\r\n                let firstEditor = false;\r\n                let i = 0;\r\n                while (!firstEditor) {\r\n                    firstEditor = !!nextTr.children[i].editCell;\r\n                    if (!firstEditor) {\r\n                        i++;\r\n                    }\r\n                }\r\n                if (this.dg.selectionMode === 'default') {\r\n                    this.dg.clearCheckeds();\r\n                }\r\n                nextTr.children[i].editCell();\r\n            }\r\n        }\r\n    }\r\n\r\n    private movePrevCellAndEdit() {\r\n        // if (!this.closeEditingCell()) {\r\n        //     return;\r\n        // }\r\n        const fieldIndex = this.dfs.getColumnIndex(this.column.field);\r\n        if (fieldIndex - 1 >= 0) {\r\n            const nextColumn = this.dgb.columnsGroup.normalColumns[fieldIndex - 1];\r\n            if (nextColumn && this.isReadonly(nextColumn)) {\r\n                return;\r\n            }\r\n            const nextTd = this.dg.currentCell.cellElement.previousElementSibling;\r\n            if (nextTd) {\r\n                // this.selectCell(nextColumn.field, nextTd);\r\n                nextTd.focus();\r\n                if (nextColumn.editor) {\r\n                    // this.dfs.editCell();\r\n                    nextTd.click();\r\n                    this.dgs.onCellEdit(nextTd);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private selectNextRowAndEditCell(cellFieldName: string, dir: 'down' | 'up') {\r\n        const p = dir === 'down' ? 'nextElementSibling': 'previousElementSibling';\r\n        const nextTr = this.dg.currentCell.cellElement.parentElement[p];\r\n        if (nextTr && nextTr.tagName === 'TR') {\r\n            const td: any = Array.from(nextTr.children).find((td: any) => td.getAttribute('field') == cellFieldName);\r\n            if (td && td.editCell) {\r\n                if (this.dg.selectionMode === 'default' ) {\r\n                    this.dg.clearCheckeds();\r\n                }\r\n                td.editCell();\r\n            }\r\n        }\r\n    }\r\n\r\n    private clearCellSelectedClass() {\r\n        // if (this.dg.currentCell) {\r\n        //     DomHandler.removeClass(this.dg.currentCell.cellElement, CELL_SELECTED_CLS);\r\n        //     this.render.removeClass(this.dg.currentCell.cellElement, CELL_EDITING_CLS);\r\n\r\n        //     const selectedCell = this.dg.el.nativeElement.querySelectorAll('.' + CELL_SELECTED_CLS);\r\n        //     if (selectedCell.length) {\r\n        //         selectedCell.forEach(n => {\r\n        //             this.render.removeClass(n, CELL_SELECTED_CLS);\r\n        //         });\r\n        //     }\r\n        // }\r\n\r\n        this.dg.removeCellSelectedCls();\r\n    }\r\n\r\n    private setCellClsWithEditorType() {\r\n\r\n        // è®¾ç½®å½åéä¸­ååæ ¼æ ·å¼\r\n        if (this.dg.currentCell && this.dg.enableHighlightCell) {\r\n            if (this.dg.currentCell.field === this.column.field && this.dg.currentCell.rowId === this.rowData[this.dg.idField] && !this.dc.isEditing) {\r\n                this.clearCellSelectedClass();\r\n                this.render.addClass(this.el.nativeElement, CELL_SELECTED_CLS);\r\n            }\r\n        }\r\n\r\n\r\n        if (!this.dg.enableEditCellStyle) {\r\n            return;\r\n        }\r\n\r\n        const td = this.el.nativeElement;\r\n        this.cleanOtherEditorIcon(td);\r\n        // å½åè¡ç¦ç¨ï¼ä¸åè®¸ç¼è¾ã\r\n        if (this.dr.disabled) {\r\n            return;\r\n        }\r\n\r\n        if (!this.column.editor) {\r\n            return;\r\n        }\r\n\r\n        if (this.isReadonly()) {\r\n            return;\r\n        }\r\n\r\n        const editorType = this.column.editor.type;\r\n        const cls = this.column.align === 'right' ? 'allow-edit-cell-left' : 'allow-edit-cell';\r\n        this.render.addClass(td, cls);\r\n        this.render.addClass(td, ALLOW_EDIT_CELL_HIGHLIGHT_CLS[editorType]);\r\n    }\r\n\r\n    private cleanOtherEditorIcon(td) {\r\n        const values = Object.values(ALLOW_EDIT_CELL_HIGHLIGHT_CLS);\r\n        values.forEach(v => {\r\n            if (td.className.indexOf(v) > -1) {\r\n                td.className = td.className.replace('allow-edit-cell-left', '').replace('allow-edit-cell', '');\r\n                td.className = td.className.replace(v, '');\r\n            }\r\n        });\r\n    }\r\n}\r\n","\r\n\r\n/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @Date: 2019-08-06 07:43:07\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-11-20 08:19:06\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\nimport { Component, OnInit, Input, ViewChild, ElementRef, AfterViewInit, Injector, Inject, forwardRef } from '@angular/core';\r\nimport { ChangeDetectorRef, NgZone, OnDestroy } from '@angular/core';\r\nimport { Subject, Subscription } from 'rxjs';\r\nimport { DataColumn, SCROLL_X_ACTION, TR_ID_PREFIX } from '../../types';\r\nimport { DatagridComponent } from '../../datagrid.component';\r\nimport { DatagridBodyComponent } from './datagrid-body.component';\r\nimport ResizeObserver from 'resize-observer-polyfill';\r\nimport { IS_GROUP_ROW_FIELD, GROUP_ROW_FIELD, IS_GROUP_FOOTER_ROW_FIELD, GROUP_VISIBLE_FIELD, GROUP_LEVEL_FIELD } from '../../services/state';\r\nimport { takeUntil } from 'rxjs/operators';\r\n@Component({\r\n    selector: 'datagrid-rows',\r\n    templateUrl: './datagrid-rows.component.html',\r\n    // changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class DatagridRowsComponent implements OnInit, AfterViewInit, OnDestroy {\r\n\r\n    @Input() startRowIndex: number;\r\n    @Input() data: any;\r\n    @Input() columns: DataColumn[];\r\n    @ViewChild('tableEl') tableEl: ElementRef;\r\n    /** æ¯å¦ä¸ºå³ä¾§åºå®åãé»è®¤ä¸º false */\r\n    @Input() fixedRight = false;\r\n    /** æ¯å¦æå·¦ä¾§åºå®å */\r\n    @Input() hasFixedColumns = false;\r\n\r\n    isGroupRow = IS_GROUP_ROW_FIELD;\r\n    groupRow = GROUP_ROW_FIELD;\r\n    isGroupFooter = IS_GROUP_FOOTER_ROW_FIELD;\r\n    visible = GROUP_VISIBLE_FIELD;\r\n    groupLevelField = GROUP_LEVEL_FIELD;\r\n\r\n    filterConditions = '';\r\n\r\n\r\n    get groupSummaryDataInGroupRow() {\r\n        return this.dg.groupSummaryPosition === 'inGroupRow';\r\n    }\r\n\r\n    checkedRows = [];\r\n\r\n    private ro: ResizeObserver = null;\r\n    private scrollToCurrentRowSubscription: Subscription;\r\n    private subscriptions: Subscription[] = [];\r\n    private destroy$ = new Subject();\r\n    constructor(\r\n        public cd: ChangeDetectorRef,\r\n        @Inject(forwardRef(() => DatagridComponent)) public dg: DatagridComponent,\r\n        @Inject(forwardRef(() => DatagridBodyComponent)) public dgb: DatagridBodyComponent,\r\n        public el: ElementRef, private injector: Injector, private ngZone: NgZone) {\r\n\r\n    }\r\n\r\n    private listenEvent() {\r\n        const _s3 = this.dg.dgs.setSelecedRow.pipe(takeUntil(this.destroy$)).subscribe((r: any) => {\r\n            this.detectChanges();\r\n        });\r\n        this.subscriptions.push(_s3);\r\n\r\n        const _s4 = this.dg.dfs.rowAppend$.pipe(takeUntil(this.destroy$)).subscribe(() => {\r\n            this.detectChanges();\r\n        });\r\n        this.subscriptions.push(_s4);\r\n\r\n        const _s5 = this.dg.dfs.rowUpdate$.pipe(takeUntil(this.destroy$)).subscribe((row: { index: number; data: any; }) => {\r\n            if (row) {\r\n                if (this.dg.groupRows) {\r\n                    if (this.dg.groupFooter) {\r\n                        this.dg.dfs.updateGroupFooter(row.data[this.groupRow]);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        this.subscriptions.push(_s5);\r\n\r\n        this.scrollToCurrentRowSubscription = this.dg.dgs.scrollToCurrentRow.subscribe(() => {\r\n            this.scrollToFirstSelectedRow();\r\n            this.dg.scrollInstance.scrollToLeft();\r\n        });\r\n\r\n\r\n        this.dg.dfs.checkRow$.pipe(\r\n            takeUntil(this.destroy$)\r\n        ).subscribe( () => {\r\n            this.checkedRows = this.dg.dfs.getCheckeds();\r\n            this.detectChanges();\r\n        });\r\n\r\n        this.dg.dfs.clearCheckeds$.pipe(\r\n            takeUntil(this.destroy$)\r\n        ).subscribe( () => {\r\n            this.checkedRows =  this.dg.dfs.getCheckeds();\r\n            this.detectChanges();\r\n        });\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.listenEvent();\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.unSubscriptions();\r\n    }\r\n\r\n    private unSubscriptions() {\r\n        this.destroy$.next();\r\n        this.destroy$.complete();\r\n        if (this.scrollToCurrentRowSubscription) {\r\n            this.scrollToCurrentRowSubscription.unsubscribe();\r\n            this.scrollToCurrentRowSubscription = null;\r\n        }\r\n\r\n        if (this.subscriptions && this.subscriptions.length) {\r\n            this.subscriptions.forEach(n => n.unsubscribe);\r\n            this.subscriptions = [];\r\n        }\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        this.ngZone.runOutsideAngular(() => {\r\n            setTimeout(() => {\r\n                if (!this.dg.nowrap) {\r\n                    // this.dgb.updateRowHeight();\r\n                    this.dg.calculateGridSize();\r\n                }\r\n            }, 100);\r\n        });\r\n    }\r\n\r\n    getGroupColumn(field) {\r\n        return this.dg.flatColumns.find(col => col.field === field);\r\n    }\r\n\r\n    private detectChanges() {\r\n        if (!this.cd['destroyed']) {\r\n            this.cd.detectChanges();\r\n        }\r\n    }\r\n\r\n    trackByField(index, item) {\r\n        return item.field;\r\n    }\r\n\r\n    isElementInViewport(el) {\r\n        const container = this.dgb.ps.instance.element.getBoundingClientRect();\r\n        const box = el.getBoundingClientRect();\r\n        const top = (box.top <= container.height + container.top);\r\n        const bottom = (box.bottom <= (container.bottom));\r\n\r\n        return (top && bottom);\r\n    }\r\n\r\n    private scrollToFirstSelectedRow() {\r\n        if (this.dg.selectedRow) {\r\n            const rowIndex = this.dg.selectedRow.index;\r\n            const rowId = TR_ID_PREFIX + this.dg.selectedRow.id;\r\n            const tr: any = document.querySelector(rowId);\r\n\r\n            if (rowIndex === 0) {\r\n                if (this.dgb.ps && this.dgb.ps.instance) {\r\n                    if (this.dgb.ps.instance.element.scrollTop === 0) {\r\n                        return;\r\n                    } else {\r\n                        this.dg.scrollInstance.scrollToY(0);\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n\r\n            const { top, bottom } = this.dgb.getVisibleRange();\r\n            if (rowIndex === top || rowIndex === bottom) {\r\n                return;\r\n            } else {\r\n\r\n                if (rowIndex > top && rowIndex < bottom && tr && this.isElementInViewport(tr)) {\r\n                    return;\r\n                }\r\n            }\r\n\r\n            if (tr) {\r\n                if (tr.scrollIntoViewIfNeeded) {\r\n                    tr.scrollIntoViewIfNeeded(false);\r\n                } else {\r\n                    tr.scrollIntoView({ block: 'nearest', inline: 'nearest' });\r\n                }\r\n            } else {\r\n                const currentTrTop = rowIndex * this.dg.rowHeight;\r\n                if (currentTrTop) {\r\n                    this.dg.scrollInstance.scrollToY(currentTrTop);\r\n                }\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n\r\n    toggleGroupRow(row, index, open) {\r\n        row.expanded = open;\r\n        this.setGroupRowsVisible(row, open);\r\n    }\r\n\r\n    private setGroupRowsVisible(row, open) {\r\n        if (row.rows) {\r\n            const groupRows = row.rows.filter(n => n[IS_GROUP_ROW_FIELD]);\r\n            const footerRows = row.rows.filter(n => n[IS_GROUP_FOOTER_ROW_FIELD]);\r\n\r\n            if (footerRows && footerRows.length) {\r\n                footerRows.forEach(n => {\r\n                    n[this.visible] = open && row.expanded;\r\n                });\r\n            }\r\n\r\n            groupRows.forEach(t => {\r\n                t[this.visible] = open && row.expanded && row[this.visible];\r\n                this.setGroupRowsVisible(t, open);\r\n            });\r\n\r\n            if (!groupRows.length) {\r\n                row.rows.forEach(t => {\r\n                    t[this.visible] = open && row.expanded && row[this.visible];\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    private mergeInfo(field: string, rowIndex: number) {\r\n        return this.dg.dgs.getMergeInfo(rowIndex, field, this.dg.mergeCellInfo);\r\n    }\r\n\r\n    showCell(col: DataColumn, rowIndex: number) {\r\n        const mergeInfo = this.mergeInfo(col.field, rowIndex);\r\n        let show = true;\r\n        if (mergeInfo) {\r\n            show = mergeInfo.show;\r\n        }\r\n\r\n        return show;\r\n    }\r\n\r\n    getRowSpan(col: DataColumn, rowIndex: number) {\r\n        const mergeInfo = this.mergeInfo(col.field, rowIndex);\r\n        if (!mergeInfo) {\r\n            return 1;\r\n        }\r\n        if (this.showCell(col, rowIndex)) {\r\n            col.readonly = true;\r\n            return mergeInfo.rowspan;\r\n        } else {\r\n            return 1;\r\n        }\r\n    }\r\n\r\n    getGroupSummaryData(groupId: string) {\r\n        const row = this.data.find(n =>  n['__group_parent_id__'] === groupId && n['__group_footer__']);\r\n        if (row) {\r\n            return row.data;\r\n        }\r\n        return null;\r\n    }\r\n}\r\n\r\n\r\n","import { Component } from '@angular/core';\r\n\r\n/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @Date: 2019-09-06 08:30:18\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-09-06 08:34:35\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\n/** å¼å®¹èçæ¬ï¼xxxxxxx */\r\n@Component({\r\n    selector: 'grid-editor-textbox',\r\n    template: ''\r\n})\r\nexport class TextboxEditorComponent {}\r\n","import { QueryList, OnDestroy } from '@angular/core';\r\n/*\r\n* @Author: ç¯çç§æ(Lucas Huang)\r\n* @Date: 2019-08-06 07:43:53\r\n* @LastEditors: ç¯çç§æ(Lucas Huang)\r\n* @LastEditTime: 2019-11-20 20:14:11\r\n* @QQ: 1055818239\r\n* @Version: v0.0.1\r\n*/\r\n\r\nimport { ComponentFactoryResolver, ViewContainerRef, OnChanges, SimpleChanges, ComponentRef, ViewChildren } from '@angular/core';\r\n\r\nimport {\r\n    Component, OnInit, Input, Renderer2, ViewChild, ElementRef,\r\n    AfterViewInit, ViewEncapsulation, Injector, ChangeDetectorRef, Directive, Optional, NgZone\r\n} from '@angular/core';\r\n\r\nimport { DataColumn } from './../../types/data-column';\r\nimport { ColumnGroup } from '../../types/data-column';\r\nimport { DatagridService } from '../../services/datagrid.service';\r\nimport { SCROLL_X_ACTION, FIXED_LEFT_SHADOW_CLS, SCROLL_X_REACH_START_ACTION, FIXED_RIGHT_SHADOW_CLS, SCROLL_X_REACH_END_ACTION, GRID_FILTER_ROW } from '../../types/constant';\r\nimport { DatagridComponent } from '../../datagrid.component';\r\nimport { DatagridHeaderCheckboxComponent } from '../checkbox/datagrid-header-checkbox.component';\r\nimport { DatagridFacadeService } from '../../services/datagrid-facade.service';\r\nimport ResizeObserver from 'resize-observer-polyfill';\r\nimport { DatagridFilterService } from '../../services/datagrid-filter.service';\r\nimport { of, Observable, Subject } from 'rxjs';\r\nimport { takeUntil } from 'rxjs/operators';\r\n\r\n@Component({\r\n    selector: 'datagrid-header',\r\n    templateUrl: './header.component.html',\r\n    encapsulation: ViewEncapsulation.None,\r\n    exportAs: 'dgHeader'\r\n})\r\nexport class DatagridHeaderComponent implements OnInit, AfterViewInit, OnChanges, OnDestroy {\r\n    @Input() height = 35;\r\n    @Input() columns = [];\r\n    @Input() columnsGroup: ColumnGroup;\r\n    @Input() enableDragColumn = false;\r\n    @Input() wrapHeader = false;\r\n    @Input() enableFilterRow = false;\r\n\r\n    @Input() scrollbarMode = 'auto';\r\n\r\n    /** å¯ç¨æ§è½ä¼åç */\r\n    @Input() fast = false;\r\n\r\n\r\n    @ViewChild('header') header: ElementRef;\r\n    @ViewChild('headerContainer') headerColumnsTable: ElementRef;\r\n    @ViewChild('fixedLeft') fixedLeft: ElementRef;\r\n\r\n    private _chkall: DatagridHeaderCheckboxComponent;\r\n    @ViewChild('chkAll') set chkAll(v) {\r\n        this._chkall = v;\r\n    }\r\n\r\n    private fixedRight: ElementRef;\r\n    @ViewChild('fixedRight') set fr(val) {\r\n        if (val) {\r\n            this.fixedRight = val;\r\n        }\r\n    }\r\n\r\n    private dgs: DatagridService;\r\n    private dfs: DatagridFacadeService;\r\n    private ro: ResizeObserver | null = null;\r\n    private cfr: ComponentFactoryResolver;\r\n    private dfrs: DatagridFilterService;\r\n    private el: ElementRef;\r\n    rightFixedColumnWidth = 0;\r\n    normalColumnWidth = 0;\r\n\r\n    private cd: ChangeDetectorRef;\r\n    showOverlay = false;\r\n    disableSort = false;\r\n    private scrollX = 0;\r\n    showShadowCls = false;\r\n\r\n    top = 0;\r\n\r\n    // è¡å· ã å¤éæ¡ï¼å¨å¤è¡¨å¤´ä¸çåå¹¶è¡æ°\r\n    get rowSpan() {\r\n        // TFS 495872\r\n        // return this.columns.length + (this.dg.enableFilterRow ? 1 : 0);\r\n        return this.columns.length;\r\n    }\r\n\r\n    hasFixedLeftColumns = false;\r\n\r\n    private ps;\r\n    private destroy$ = new Subject();\r\n    lineNumberTitle = 'åºå·';\r\n    constructor(\r\n        private render2: Renderer2, private injector: Injector,\r\n        @Optional() public dg: DatagridComponent, private ngZone: NgZone) {\r\n        this.dfs = this.injector.get(DatagridFacadeService);\r\n        this.dgs = this.injector.get(DatagridService);\r\n        this.cfr = this.injector.get(ComponentFactoryResolver);\r\n        this.cd = this.injector.get(ChangeDetectorRef);\r\n        this.el = this.injector.get(ElementRef);\r\n        this.dfrs = this.dg.clientFilterService;\r\n\r\n\r\n        this.dgs.scorll$.pipe(\r\n            takeUntil(this.destroy$)\r\n        ).subscribe((d: any) => {\r\n\r\n            if (d.type === SCROLL_X_ACTION || d.type === SCROLL_X_REACH_END_ACTION || d.type === SCROLL_X_REACH_START_ACTION) {\r\n                this.scrollX = d.x;\r\n                this.render2.setStyle(this.headerColumnsTable.nativeElement, 'transform', `translate3d(-${d.x}px, 0px, 0px)`);\r\n                if (!this.dg.groupRows) {\r\n                    if (this.fixedLeft) {\r\n                        if (d.x) {\r\n                            this.render2.addClass(this.fixedLeft.nativeElement, FIXED_LEFT_SHADOW_CLS);\r\n                        } else {\r\n                            this.render2.removeClass(this.fixedLeft.nativeElement, FIXED_LEFT_SHADOW_CLS);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (d.type === SCROLL_X_REACH_START_ACTION) {\r\n                if (this.fixedLeft) {\r\n                    this.render2.removeClass(this.fixedLeft.nativeElement, FIXED_LEFT_SHADOW_CLS);\r\n                }\r\n            }\r\n        });\r\n\r\n        this.dgs.showFixedShadow.pipe(\r\n            takeUntil(this.destroy$)\r\n        ).subscribe((e: any) => {\r\n            if (this.fixedRight) {\r\n                this.setFixedColumnPosition(e.showRightShadow, e.x);\r\n            }\r\n        });\r\n\r\n        this.dgs.disableHeader.pipe(\r\n            takeUntil(this.destroy$)\r\n        ).subscribe((flag: any) => {\r\n            this.showOverlay = flag;\r\n            this.disableSort = flag;\r\n            this.cd.detectChanges();\r\n        });\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.dgs.checkedRowsTotalChanged$.pipe(\r\n            takeUntil(this.destroy$)\r\n        ).subscribe(() => {\r\n            if (this._chkall) {\r\n                const checkedsCount = this.dfs.getCurrentPageCheckeds().length;\r\n                const isCheckAll = this.dfs.isCheckAll();\r\n                const isIndeterminate = isCheckAll || !checkedsCount;\r\n                this._chkall.chk.nativeElement.indeterminate = !isIndeterminate;\r\n                const _checked = isCheckAll && checkedsCount > 0;\r\n                this._chkall.updateStatus(_checked);\r\n            }\r\n        });\r\n\r\n        this.dgs.uncheckAll.pipe(\r\n            takeUntil(this.destroy$)\r\n        ).subscribe(() => {\r\n            if (this.dg.showAllCheckbox && this._chkall) {\r\n                this._chkall.chk.nativeElement.indeterminate = false;\r\n                this._chkall.chk.nativeElement.checked = false;\r\n            }\r\n        });\r\n\r\n        this.dgs.checkAll.pipe(\r\n            takeUntil(this.destroy$)\r\n        ).subscribe(() => {\r\n            if (this._chkall) {\r\n                this._chkall.chk.nativeElement.checked = true;\r\n            }\r\n        });\r\n\r\n        this.dgs.scrollbarUpdate.pipe(\r\n            takeUntil(this.destroy$)\r\n        ).subscribe((ps: any) => {\r\n            this.ps = ps.scrollbarRef;\r\n            const rw = ps.rightWidth || 0;\r\n            if (!rw) {\r\n                this.rightFixedColumnWidth = this.getRightFixedColWidth(this.ps);\r\n            } else {\r\n                this.rightFixedColumnWidth = rw;\r\n            }\r\n            if (this.fixedRight) {\r\n                this.setFixedColumnPosition(this.showShadowCls, 0);\r\n            }\r\n            this.cd.detectChanges();\r\n        });\r\n\r\n\r\n        this.dgs.showGridHeader.pipe(\r\n            takeUntil(this.destroy$)\r\n        ).subscribe(() => {\r\n            this.setHeaderPosition();\r\n        });\r\n\r\n        this.dgs.smartFilterBarExpand.pipe(\r\n            takeUntil(this.destroy$)\r\n        ).subscribe(() => {\r\n            this.setHeaderPosition();\r\n        });\r\n\r\n        this.rightFixedColumnWidth = this.getRightFixedColWidth(this.ps);\r\n        this.hasFixedLeftColumns = this.columnsGroup && this.columnsGroup.leftFixed && !!this.columnsGroup.leftFixed.length;\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        setTimeout(() => {\r\n            this.setHeaderPosition();\r\n        });\r\n\r\n        this.lineNumberTitle = this.getLineNumberTitle();\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        // if (changes.scrollbarMode && !changes.scrollbarMode.isFirstChange()) {\r\n        //     this.rightFixedColumnWidth = this.getRightFixedColWidth(this.ps);\r\n        //     this.cd.detectChanges();\r\n        // }\r\n\r\n        if (changes.columnsGroup && !changes.columnsGroup.isFirstChange()) {\r\n            this.rightFixedColumnWidth = this.getRightFixedColWidth(this.ps);\r\n            this.hasFixedLeftColumns = this.columnsGroup && this.columnsGroup.leftFixed && !!this.columnsGroup.leftFixed.length;\r\n            // if (!this.dg.useControlPanel) {\r\n            //     this.fixedRight = null;\r\n            // }\r\n            this.cd.detectChanges();\r\n        }\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this.destroy$.next();\r\n        this.destroy$.complete();\r\n\r\n        this.fixedRight = null;\r\n    }\r\n\r\n    private getLineNumberTitle() {\r\n        if (this.dg.lineNumberTitle) {\r\n            return this.dg.lineNumberTitle;\r\n        } else {\r\n            return this.dg.localeService.getValue('datagrid.lineNumberTitle');\r\n        }\r\n    }\r\n\r\n    private getRightFixedColWidth(ps = null) {\r\n        if (!this.columnsGroup) {\r\n            return 0;\r\n        }\r\n\r\n\r\n        let w = this.columnsGroup.rightFixedWidth;\r\n\r\n        if (!ps) {\r\n            ps = this.dg.scrollInstance.instance;\r\n        }\r\n\r\n        if (ps && ps.scrollbarYActive && this.scrollbarMode === 'allways') {\r\n            return w += this.showShadowCls ? 18 : 0;\r\n        }\r\n        return w;\r\n    }\r\n\r\n    private setHeaderPosition() {\r\n        let top = 0;\r\n        if ((this.dg.enableFilterRow || this.dg.enableSmartFilter) && this.dg.showFilterBar) {\r\n            top += this.dg.filterBarHeight;\r\n        }\r\n\r\n        if (this.dg.showRowGroupPanel) {\r\n            top += this.dg.rowGroupPanelHeight;\r\n        }\r\n\r\n        this.top = top;\r\n        this.render2.setStyle(this.el.nativeElement, 'top', `${top}px`);\r\n    }\r\n\r\n    isShowShadow(fixedLeftWidth) {\r\n        const dgContainerWidth = this.dg.dgContainer.nativeElement.offsetWidth;\r\n        return dgContainerWidth < this.dg.colGroup.totalWidth;\r\n\r\n    }\r\n\r\n    isColspan(left, right, col, isdatafield = false) {\r\n        // if (this.fast) {\r\n        //     if (isdatafield) {\r\n        //         return !col.colspan;\r\n        //     } else {\r\n        //         return col.colspan;\r\n        //     }\r\n        // }\r\n        if (!left && !right) {\r\n            if (isdatafield) {\r\n                return !col.colspan && (!col.fixed || col.fixed === 'none');\r\n            } else {\r\n                return col.colspan && (!col.fixed || col.fixed === 'none');\r\n            }\r\n        } else if (left) {\r\n            if (isdatafield) {\r\n                return !col.colspan && col.fixed && col.fixed === 'left';\r\n            } else {\r\n                return col.colspan && col.fixed && col.fixed === 'left';\r\n            }\r\n        } else if (right) {\r\n            if (isdatafield) {\r\n                return !col.colspan && col.fixed && col.fixed === 'right';\r\n            } else {\r\n                return col.colspan && col.fixed && col.fixed === 'right';\r\n            }\r\n        }\r\n    }\r\n\r\n    setFixedColumnPosition(isShow, scrollLeft) {\r\n        this.showShadowCls = isShow;\r\n        const method = isShow ? 'addClass' : 'removeClass';\r\n        this.render2[method](this.fixedRight.nativeElement, FIXED_RIGHT_SHADOW_CLS);\r\n\r\n        const realWidth = this.columnsGroup.leftFixedWidth + this.columnsGroup.normalWidth + this.rightFixedColumnWidth;\r\n        const gridWidth = this.dg.width;\r\n        let l = this.dg.width - (this.dg.showBorder ? 2 : 0) - this.rightFixedColumnWidth;\r\n        if (gridWidth > realWidth) {\r\n            l = this.columnsGroup.leftFixedWidth + this.columnsGroup.normalWidth;\r\n        }\r\n\r\n        this.render2.setStyle(this.fixedRight.nativeElement, 'left', l + 'px');\r\n    }\r\n\r\n    onRowNumerColumnDblClick(e: MouseEvent, rntd: any) {\r\n        let maxRowNumber = this.dg.getRows().length;\r\n        if (this.dg.pagination) {\r\n            const pageSize = this.dg.pageSize;\r\n            const pageIndex = this.dg.pageIndex;\r\n            maxRowNumber = pageSize * pageIndex + pageSize;\r\n        }\r\n\r\n        this.dg.longTextArea.nativeElement.innerHTML = maxRowNumber;\r\n        const w1 = this.dg.longTextArea.nativeElement.offsetWidth;\r\n\r\n        const currentWidth = rntd.offsetWidth;\r\n\r\n        if (w1 > currentWidth) {\r\n            this.dg.lineNumberWidth = w1 + 10;\r\n            this.dfs.updateProperty('lineNumberWidth', this.dg.lineNumberWidth);\r\n            this.dfs.resizeColumns();\r\n        }\r\n    }\r\n\r\n    onSortColumnClick(e: MouseEvent, col: DataColumn) {\r\n        if (this.disableSort) {\r\n            return;\r\n        }\r\n\r\n        if (!col.sortable) {\r\n            return;\r\n        }\r\n        // ç»æç¼è¾\r\n        this.dg.cancelEdit(null);\r\n        const sortName = this.dg.sortName;\r\n        const sortOrder = this.dg.sortOrder;\r\n        let sortFields = [];\r\n        let sortOrders = [];\r\n        if (sortName) {\r\n            sortFields = sortName.split(',');\r\n            sortOrders = sortOrder.split(',');\r\n        }\r\n\r\n        const colOrder = col.order || 'asc';\r\n        let newOrder = colOrder;\r\n        const i = sortFields.findIndex(n => n === col.field);\r\n        if (i >= 0) {\r\n            const _order = sortOrders[i] === 'asc' ? 'desc' : 'asc';\r\n            newOrder = _order;\r\n            // if (this.dg.multiSort && newOrder === 'asc') {\r\n            if (newOrder === 'asc') {\r\n                newOrder = undefined;\r\n                sortFields.splice(i, 1);\r\n                sortOrders.splice(i, 1);\r\n            } else {\r\n                sortOrders[i] = _order;\r\n            }\r\n        } else {\r\n            if (this.dg.multiSort) {\r\n                sortFields.push(col.field);\r\n                sortOrders.push(colOrder);\r\n            } else {\r\n                sortFields = [col.field];\r\n                sortOrders = [colOrder];\r\n            }\r\n        }\r\n\r\n        col.order = newOrder;\r\n\r\n        this.dg.sortName = sortFields.join(',');\r\n        this.dg.sortOrder = sortOrders.join(',');\r\n        this.dfs.setSortInfo(this.dg.sortName, this.dg.sortOrder);\r\n\r\n        this.dg.beforeSortColumn(this.dg.sortName, this.dg.sortOrder, this.dg).subscribe(() => {\r\n            this.dg.onColumnSorted();\r\n        });\r\n    }\r\n}\r\n\r\n@Directive({\r\n    selector: '[filter-row-creator]'\r\n})\r\nexport class FilterRowCreateDirective implements OnInit, OnChanges, OnDestroy {\r\n    @Input() left: boolean;\r\n    @Input() right: boolean;\r\n\r\n    private dgs: DatagridService;\r\n    private dfs: DatagridFacadeService;\r\n    private cfr: ComponentFactoryResolver;\r\n    private dfrs: DatagridFilterService;\r\n    private filterRowType: any;\r\n    private filterRowRef: ComponentRef<any>;\r\n    private cd: ChangeDetectorRef;\r\n    constructor(private vc: ViewContainerRef, private injector: Injector,\r\n        public dg: DatagridComponent, private ngZone: NgZone) {\r\n\r\n        this.dfs = this.injector.get(DatagridFacadeService);\r\n        this.dgs = this.injector.get(DatagridService);\r\n        this.cfr = this.injector.get(ComponentFactoryResolver);\r\n        this.cd = this.injector.get(ChangeDetectorRef);\r\n        this.dfrs = this.dg.clientFilterService;\r\n\r\n        this.filterRowType = this.injector.get(GRID_FILTER_ROW, null);\r\n\r\n        this.dgs.clearFilter.subscribe(() => {\r\n            if (this.filterRowRef) {\r\n                this.filterRowRef.instance.clearFilterValue(false);\r\n            }\r\n        });\r\n        this.dgs.columnsChanged.subscribe(() => {\r\n            this.createFilterRow(true);\r\n        });\r\n\r\n\r\n        if (this.dfrs) {\r\n            this.dfrs.removeField.subscribe((f) => {\r\n                if (this.filterRowRef && f) {\r\n                    let flag = false;\r\n                    let _cols = [];\r\n                    if (this.left) {\r\n                        _cols = this.dg.colGroup.leftFixed || [];\r\n                    } else if (this.right) {\r\n                        _cols = this.dg.colGroup.rightFixed || [];\r\n                    } else {\r\n                        _cols = this.dg.colGroup.normalColumns || [];\r\n                    }\r\n\r\n                    flag = !!_cols.find(n => n.field === f);\r\n                    if (flag) {\r\n                        this.filterRowRef.instance.removeField(f);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.createFilterRow(true);\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n\r\n    }\r\n\r\n    ngOnDestroy() {\r\n    }\r\n\r\n    /** è¿æ»¤è¡ */\r\n    createFilterRow(rebuild = false) {\r\n        if (rebuild && this.filterRowRef) {\r\n            this.filterRowRef.destroy();\r\n            this.filterRowRef = null;\r\n        }\r\n\r\n        setTimeout(() => {\r\n            this._createFilterRow();\r\n            if (rebuild) {\r\n                this.cd.detectChanges();\r\n            }\r\n        });\r\n    }\r\n\r\n    private _createFilterRow() {\r\n        if (this.dg.enableFilterRow) {\r\n            if (!this.filterRowType) {\r\n                return;\r\n            }\r\n\r\n            let columnsData = this.dg.colGroup.normalColumns;\r\n            if (this.left) {\r\n                columnsData = this.dg.colGroup.leftFixed;\r\n            } else if (this.right) {\r\n                columnsData = this.dg.colGroup.rightFixed;\r\n            }\r\n\r\n            if (!this.filterRowRef && this.vc) {\r\n                const cf = this.cfr.resolveComponentFactory(this.filterRowType);\r\n                this.filterRowRef = this.vc.createComponent(cf);\r\n                this.filterRowRef.instance.fixedLeft = this.left;\r\n                this.filterRowRef.instance.columns = columnsData;\r\n                this.filterRowRef.instance.gridInstance = this.dg;\r\n                this.filterRowRef.instance.conditionChange.subscribe(n => {\r\n                    const conditions = n || {};\r\n                    this.dgs.onFilterChanged.emit(conditions);\r\n                });\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n","import { Directive, Input, NgZone, ElementRef, Renderer2, AfterViewInit, OnDestroy, Optional, HostListener } from '@angular/core';\r\nimport { DataColumn } from '../../types/data-column';\r\nimport { DatagridComponent } from './../../datagrid.component';\r\nimport { DatagridHeaderComponent } from './datagrid-header.component';\r\nimport { fromEvent } from 'rxjs';\r\nimport { buffer, debounceTime, map, filter, takeUntil } from 'rxjs/operators';\r\n/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @Date: 2019-08-10 09:04:53\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-11-20 17:09:09\r\n * @QQ: 1055818239\r\n * @Version: v0.0.12\r\n */\r\n@Directive({\r\n    selector: '[resize-column]',\r\n})\r\nexport class DatagridResizeColumnDirective implements AfterViewInit, OnDestroy {\r\n    @Input('resize-column') col: DataColumn;\r\n    resizer: HTMLSpanElement;\r\n    resizerMouseDownListener: any;\r\n    documentMouseMoveListener: any;\r\n    documentMouseUpListener: any;\r\n    dblclickListener: any;\r\n    private dg: DatagridComponent;\r\n    constructor(\r\n        @Optional() public dh: DatagridHeaderComponent,\r\n        public ngzone: NgZone, public el: ElementRef, public render: Renderer2\r\n    ) {\r\n        this.dg = this.dh.dg;\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        if (this.isEnable()) {\r\n            this.render.addClass(this.el.nativeElement, 'f-datagrid-header-cell-resize');\r\n\r\n            this.resizer = document.createElement('span');\r\n            this.resizer.className = 'column-resize-bar';\r\n            this.el.nativeElement.appendChild(this.resizer);\r\n\r\n            this.ngzone.runOutsideAngular(() => {\r\n                // this.resizerMouseDownListener = this.onMouseDown.bind(this);\r\n                // this.resizer.addEventListener('mousedown', this.resizerMouseDownListener);\r\n                const mouseUp$ = fromEvent(this.resizer, 'mouseup');\r\n                this.resizerMouseDownListener = fromEvent(this.resizer, 'mousedown').pipe(\r\n                    // debounceTime(260),\r\n                    takeUntil(mouseUp$)\r\n                ).subscribe((e: any) =>\r\n                    this.onMouseDown(e)\r\n                );\r\n            });\r\n\r\n            // const mouse$ = fromEvent(this.resizer, 'click');\r\n            // const buff$ = mouse$.pipe(\r\n            //     debounceTime(250)\r\n            // );\r\n\r\n            // const click$ = mouse$.pipe(\r\n            //     buffer(buff$),\r\n            //     map(list => {\r\n            //         return {event: list[0], count: list.length};\r\n            //     }),\r\n            //     filter(x => x.count === 2),\r\n            //     map(x => x.event),\r\n            //     takeUntil(mouseUp$)\r\n            // );\r\n\r\n            // click$.subscribe((e) => {\r\n            //     this.onDblClickHandler(e);\r\n            //     // this.onMouseUp(e);\r\n            // });\r\n        }\r\n    }\r\n\r\n    @HostListener('dblclick')\r\n    onDblClickHandler() {\r\n        if (this.col.field && this.col.field !== this.dg.ControlPanelFeild) {\r\n            const thRef = this.el;\r\n            this.dg.sizeToContent(this.col, thRef);\r\n        }\r\n        return false;\r\n    }\r\n\r\n    private isEnable() {\r\n        if (this.dg.resizeColumn) {\r\n\r\n            if ( this.col.field === this.dg.ControlPanelFeild) {\r\n                this.col.resizable = false;\r\n            }\r\n\r\n            if (this.col.resizable === undefined) {\r\n                this.col.resizable = true;\r\n            }\r\n\r\n            return this.col.resizable;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    bindDocumentEvents() {\r\n        this.ngzone.runOutsideAngular(() => {\r\n            this.documentMouseMoveListener = this.onMouseMove.bind(this);\r\n            document.addEventListener('mousemove', this.documentMouseMoveListener);\r\n\r\n            this.documentMouseUpListener = this.onMouseUp.bind(this);\r\n            document.addEventListener('mouseup', this.documentMouseUpListener);\r\n        });\r\n    }\r\n\r\n    unbindDocumentEvents() {\r\n        if (this.documentMouseMoveListener) {\r\n            document.removeEventListener('mousemove', this.documentMouseMoveListener);\r\n            this.documentMouseMoveListener = null;\r\n        }\r\n\r\n        if (this.documentMouseUpListener) {\r\n            document.removeEventListener('mouseup', this.documentMouseUpListener);\r\n            this.documentMouseUpListener = null;\r\n        }\r\n    }\r\n\r\n    onMouseDown(event: MouseEvent) {\r\n        event.stopPropagation();\r\n        this.dg.onColumnResizeBegin(event);\r\n        this.render.addClass(this.el.nativeElement, 'column-resizeing');\r\n        this.bindDocumentEvents();\r\n    }\r\n\r\n    onMouseMove(event: MouseEvent) {\r\n        this.dg.onColumnResize(event);\r\n    }\r\n\r\n    onMouseUp(event: MouseEvent) {\r\n        this.dg.onColumnResizeEnd(event, this.col);\r\n        this.render.removeClass(this.el.nativeElement, 'column-resizeing');\r\n        this.unbindDocumentEvents();\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        if (this.resizerMouseDownListener) {\r\n            // this.resizer.removeEventListener('mousedown', this.resizerMouseDownListener);\r\n            this.resizerMouseDownListener.unsubscribe();\r\n        }\r\n\r\n        this.unbindDocumentEvents();\r\n\r\n        if (this.dblclickListener) {\r\n            this.dblclickListener();\r\n        }\r\n\r\n        this.resizer = null;\r\n    }\r\n}\r\n","import { takeUntil } from 'rxjs/operators';\r\nimport { DatagridComponent } from './../../datagrid.component';\r\n/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @Date: 2019-08-12 15:01:21\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-11-09 15:24:45\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\nimport { Component, OnInit, Input, ElementRef, Renderer2, ViewChild, OnDestroy, Injector, Inject, forwardRef, OnChanges, SimpleChanges, ChangeDetectorRef } from '@angular/core';\r\nimport { DatagridService } from '../../services/datagrid.service';\r\nimport { FIXED_LEFT_SHADOW_CLS, FIXED_RIGHT_SHADOW_CLS, SCROLL_X_ACTION, SCROLL_X_REACH_START_ACTION } from '../../types/constant';\r\nimport { Subscription, Subject } from 'rxjs';\r\n\r\n@Component({\r\n    selector: 'datagrid-footer',\r\n    templateUrl: './datagrid-footer.component.html'\r\n})\r\nexport class DatagridFooterComponent implements OnInit, OnChanges, OnDestroy {\r\n    private _footerData = [];\r\n    @Input() get data() {\r\n        return this._footerData;\r\n    }\r\n    set data(val: any[]) {\r\n        this._footerData = val;\r\n    }\r\n\r\n    @Input() height: number;\r\n    @Input() width: number;\r\n    @Input() columns: any[];\r\n    @Input() columnsGroup: any;\r\n\r\n    /** æ¾ç¤ºä½ç½®ï¼é»è®¤ä¸º åºé¨ */\r\n    @Input() position: 'top' | 'bottom' = 'bottom';\r\n    /** æ¯å¦æå·¦ä¾§åºå®å */\r\n    @Input() hasFixedColumns = false;\r\n    @Input() fast = false;\r\n\r\n    @ViewChild('footerContainer') footerContainer: ElementRef;\r\n    @ViewChild('footerBody') footerBody: ElementRef;\r\n    @ViewChild('footerBody2') footerBody2: ElementRef;\r\n    @ViewChild('fixedLeft') fixedLeft: ElementRef;\r\n    private fixedRight: ElementRef;\r\n    @ViewChild('fixedRight') set fr(val) {\r\n        if (val) {\r\n            this.fixedRight = val;\r\n        }\r\n    }\r\n    scrollXSubscription: Subscription;\r\n\r\n    private dgs: DatagridService;\r\n    private scrollX = 0;\r\n    private showShadowCls = false;\r\n    rightFixedColumnWidth = 0;\r\n    private cdRef: ChangeDetectorRef = null;\r\n    private destroy$ = new Subject();\r\n    constructor(\r\n        private render: Renderer2, private injector: Injector,\r\n        @Inject(forwardRef(() => DatagridComponent)) public dg: DatagridComponent\r\n    ) {\r\n        this.dg = this.injector.get(DatagridComponent);\r\n        this.dgs = this.injector.get(DatagridService);\r\n        this.cdRef = this.injector.get(ChangeDetectorRef);\r\n\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.scrollEvents();\r\n        this.renderFooterStyle();\r\n        this.setFooterPosition(false);\r\n\r\n        this.rightFixedColumnWidth = this.getRightFixedColWidth();\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (changes.position) {\r\n            this.setFooterPosition(true);\r\n        }\r\n\r\n        if (changes.columnsGroup && !changes.columnsGroup.isFirstChange()) {\r\n            this.rightFixedColumnWidth = this.getRightFixedColWidth();\r\n        }\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.destroy$.next();\r\n        this.destroy$.complete();\r\n\r\n        if (this.scrollXSubscription) {\r\n            this.scrollXSubscription.unsubscribe();\r\n            this.scrollXSubscription = null;\r\n        }\r\n    }\r\n\r\n    private scrollEvents() {\r\n        this.dgs.showGridHeader.pipe(\r\n            takeUntil(this.destroy$)\r\n        ).subscribe(hh => {\r\n            this.setFooterPosition(false);\r\n        });\r\n\r\n        this.scrollXSubscription = this.dgs.scorll$.pipe(\r\n            takeUntil(this.destroy$)\r\n        ).subscribe((d: any) => {\r\n            this.scrollX = d.x;\r\n\r\n            if (this.fast) {\r\n                if (d.type === SCROLL_X_ACTION && this.footerBody2) {\r\n                    this.footerBody2.nativeElement.scrollLeft = d.x;\r\n                }\r\n            } else  {\r\n                if (d.type === SCROLL_X_ACTION) {\r\n                    if (!this.dg.footerTemplate) {\r\n                        this.render.setStyle(this.footerBody.nativeElement,  'transform', `translate3d(-${d.x}px, 0px, 0px)` );\r\n\r\n                        if (this.fixedLeft) {\r\n                            if (d.x) {\r\n                                this.render.addClass(this.fixedLeft.nativeElement, FIXED_LEFT_SHADOW_CLS);\r\n                            } else {\r\n                                this.render.removeClass(this.fixedLeft.nativeElement, FIXED_LEFT_SHADOW_CLS);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (d.type === SCROLL_X_REACH_START_ACTION) {\r\n                    if (this.fixedLeft) {\r\n                        this.render.removeClass(this.fixedLeft.nativeElement, FIXED_LEFT_SHADOW_CLS);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n\r\n        if (!this.fast) {\r\n\r\n            this.dgs.showFixedShadow.pipe(\r\n                takeUntil(this.destroy$)\r\n            ).subscribe((e: any) => {\r\n                if (this.fixedRight) {\r\n                    this.setFixedColumnPosition(e.showRightShadow, e.x);\r\n                }\r\n            });\r\n\r\n\r\n            this.dgs.scrollbarUpdate.pipe(\r\n                takeUntil(this.destroy$)\r\n            ).subscribe((ps: any) => {\r\n                this.rightFixedColumnWidth = this.getRightFixedColWidth(ps.scrollbarRef);\r\n                if (this.fixedRight) {\r\n                    this.setFixedColumnPosition(this.showShadowCls, 0);\r\n                }\r\n                if (this.cdRef) {\r\n                    this.cdRef.detectChanges();\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    private getRightFixedColWidth(ps = null) {\r\n        if (!this.columnsGroup) {\r\n            return 0;\r\n        }\r\n\r\n        let w = this.columnsGroup.rightFixedWidth;\r\n\r\n        if (!ps) {\r\n            ps = this.dg.scrollInstance.instance;\r\n        }\r\n\r\n        if (ps && ps.scrollbarYActive && this.dg.scrollBarShowMode === 'allways') {\r\n            // return w += 18;\r\n            return w += this.showShadowCls ? 18 : 0;\r\n        }\r\n        return w;\r\n    }\r\n\r\n    private setFooterPosition(emit = true) {\r\n        if (this.position === 'bottom') {\r\n            let positionBottom = 0;\r\n            if (this.dg.pagination) {\r\n                positionBottom = this.dg.pagerHeight || 40;\r\n            }\r\n            this.render.removeStyle(this.footerContainer.nativeElement, 'top');\r\n            this.render.setStyle(this.footerContainer.nativeElement, 'bottom', `${positionBottom}px`);\r\n        }\r\n        if (this.position === 'top') {\r\n            let positionTop = 0;\r\n            if (this.dg.showHeader) {\r\n                positionTop = this.dg.realHeaderHeight || 35;\r\n            }\r\n\r\n            if (this.dg.showRowGroupPanel) {\r\n                positionTop += this.dg.rowGroupPanelHeight;\r\n            }\r\n\r\n            if (this.dg.showFilterBar) {\r\n                positionTop += this.dg.filterBarHeight;\r\n            }\r\n\r\n            this.render.removeStyle(this.footerContainer.nativeElement, 'bottom');\r\n            this.render.setStyle(this.footerContainer.nativeElement, 'top', `${positionTop}px`);\r\n        }\r\n        if (emit) {\r\n            this.dgs.footerPositionChanged.emit();\r\n        }\r\n    }\r\n\r\n    private renderFooterStyle() {\r\n        if (this.dg.footerStyler) {\r\n\r\n            const trStyleAndCls = this.dgs.getCustomStyle(this.dg.footerStyler, null);\r\n\r\n            const cssRuleID = `${this.dg.customStyleKey()} .f-datagrid-footer`;\r\n            const cssRuleId2 = `${this.dg.customStyleKey()} .f-datagrid-footer .f-datagrid-body-fixed-left,${this.dg.customStyleKey()} .f-datagrid-footer .f-datagrid-body-fixed-right`;\r\n            const cssRuleId3 = `${this.dg.customStyleKey()}.f-datagrid-fast .f-datagrid-cell.f-datagrid-fast__fixed-left,${this.dg.customStyleKey()}.f-datagrid-fast .f-datagrid-cell.f-datagrid-fast__fixed-right`;\r\n\r\n            if (trStyleAndCls && Object.keys(trStyleAndCls).length) {\r\n                const cssRule = [];\r\n                if (trStyleAndCls.style) {\r\n                    cssRule.push(`${cssRuleID} ${JSON.stringify(trStyleAndCls.style)}`);\r\n                    cssRule.push(`${cssRuleId2} ${JSON.stringify(trStyleAndCls.style)}`);\r\n\r\n                    if (this.fast) {\r\n                        cssRule.push(`${cssRuleId3} ${JSON.stringify(trStyleAndCls.style)}`);\r\n                    }\r\n                }\r\n\r\n                this.dgs.appendCssRules(cssRule);\r\n\r\n                // this.dg.renderCustomStyle(trStyleAndCls, this.footerContainer.nativeElement, cssRule);\r\n            } else {\r\n                this.dgs.removeCssRule([cssRuleID, cssRuleId2]);\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    setFixedColumnPosition(isShow, scrollLeft) {\r\n        this.showShadowCls = isShow;\r\n        const method = isShow ? 'addClass' : 'removeClass';\r\n        this.render[method](this.fixedRight.nativeElement, FIXED_RIGHT_SHADOW_CLS);\r\n\r\n        const realWidth = this.columnsGroup.leftFixedWidth + this.columnsGroup.normalWidth + this.rightFixedColumnWidth;\r\n        const gridWidth = this.dg.width;\r\n        let l = this.dg.width - (this.dg.showBorder ? 2 : 0) - this.rightFixedColumnWidth;\r\n        if (gridWidth > realWidth) {\r\n            l = this.columnsGroup.leftFixedWidth + this.columnsGroup.normalWidth;\r\n        }\r\n        this.render.setStyle(this.fixedRight.nativeElement, 'left', l + 'px');\r\n    }\r\n}\r\n","import { Subscription } from 'rxjs';\r\nimport { DatagridComponent } from './../../datagrid.component';\r\nimport { NotifyService } from '@farris/ui-notify';\r\nimport { ChangeDetectorRef, Injector, Optional, OnChanges, SimpleChanges, TemplateRef } from '@angular/core';\r\n/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @Date: 2019-08-06 07:43:07\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-10-17 20:20:21\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\nimport { Component, OnInit, Input, Output, EventEmitter, ElementRef, AfterViewInit, ViewChild, HostBinding } from '@angular/core';\r\nimport { PaginationControlsComponent, PaginationControlsDirective } from '@farris/ui-pagination';\r\n\r\n@Component({\r\n    selector: 'datagrid-pager',\r\n    templateUrl: './page.component.html'\r\n})\r\nexport class DatagridPagerComponent implements OnInit, AfterViewInit, OnChanges {\r\n    @Input() pagerPos = 'right';\r\n    @Input() id = 'farris-datagrid-pager';\r\n    /** æ¾ç¤ºé¡µç çæ°é */\r\n    @Input() maxSize = 7;\r\n    /** æ¯å¦æ¾ç¤ºé¡µç  */\r\n    @Input() directionLinks = true;\r\n\r\n    @Input() autoHide = false;\r\n\r\n    @Input() responsive = false;\r\n    /** ä¸é¡µæ ç­¾ */\r\n    @Input() previousLabel = 'ä¸é¡µ';\r\n    /** ä¸é¡µæ ç­¾ */\r\n    @Input() nextLabel = 'ä¸é¡µ';\r\n    @Input() showPageList = false;\r\n    @Input() showPageInfo = true;\r\n    @Input() showPageNumber = true;\r\n    @Input() locked = false;\r\n\r\n    @Input() selectedData = [];\r\n    @Input() viewMode: 'default' | 'simple' = 'default';\r\n    @Input() listItemFormatter: (data) => string;\r\n\r\n    @Input() showSelectedList = false;\r\n\r\n    @Input() showGotoInput = false;\r\n\r\n    /** åé¡µæ¡èªå®ä¹åå®¹åºæ¨¡æ¿ */\r\n    @Input() contentTemplate: TemplateRef<any> = null;\r\n    @Input() data = null;\r\n\r\n    @Output() pageChange = new EventEmitter();\r\n    @Output() pageSizeChange = new EventEmitter();\r\n\r\n    @Output() removeSelectedItem = new EventEmitter();\r\n    @Output() clearSelectedItem = new EventEmitter();\r\n\r\n    @ViewChild('pagerContainer') pc: ElementRef;\r\n    @ViewChild('pager') pager: PaginationControlsComponent;\r\n\r\n    get pagination(): PaginationControlsDirective {\r\n        return this.pager.paginationDirective;\r\n    }\r\n\r\n\r\n    get pageSize() {\r\n        return this.pagination.getPageSize();\r\n    }\r\n\r\n    get total() {\r\n        return this.pagination.getTotalItems();\r\n    }\r\n\r\n    get outerHeight() {\r\n        if (this.pc) {\r\n            return this.pc.nativeElement.offsetHeight;\r\n        }\r\n        return 40;\r\n    }\r\n    styles = { opacity: 1 };\r\n\r\n    mouseInSelectedList = false;\r\n    openSelectedList = false;\r\n\r\n    private selectionDataChange$: Subscription = null;\r\n\r\n    private notifySer: NotifyService;\r\n\r\n    constructor(public el: ElementRef, private cd: ChangeDetectorRef, @Optional() private inject: Injector) {\r\n        if (this.inject) {\r\n            this.notifySer = this.inject.get<NotifyService>(NotifyService, null);\r\n        }\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.listenCheckDataChanged();\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        this.lockedStyles();\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (changes.selectedData && !changes.selectedData.isFirstChange()) {\r\n            if (!this.selectedData || !this.selectedData.length) {\r\n                this.closeSelectedList();\r\n            }\r\n        }\r\n\r\n        if (changes.showSelectedList && !changes.showSelectedList.isFirstChange()) {\r\n            this.listenCheckDataChanged();\r\n        }\r\n\r\n        if (changes.locked && !changes.locked.isFirstChange()) {\r\n            this.lockedStyles();\r\n        }\r\n    }\r\n\r\n    private listenCheckDataChanged() {\r\n        if (this.showSelectedList) {\r\n            const dg = this.inject.get(DatagridComponent, null);\r\n            if (dg) {\r\n                this.selectionDataChange$ = dg.checkedChange.subscribe((data: any) => {\r\n                    this.selectedData = data;\r\n                    if (!this.cd['destroyed']) {\r\n                        this.cd.detectChanges();\r\n                    }\r\n                });\r\n            }\r\n        } else {\r\n            if (this.selectionDataChange$) {\r\n                this.selectionDataChange$.unsubscribe();\r\n                this.selectionDataChange$ = null;\r\n            }\r\n        }\r\n    }\r\n\r\n    onPageChange(pageIndex: any) {\r\n        if (typeof pageIndex === 'object') {\r\n            pageIndex = pageIndex.pageIndex || 1;\r\n        }\r\n        this.pageChange.emit(Number.parseInt(pageIndex, 10));\r\n    }\r\n\r\n    onPageSizeChange(pageSize: any) {\r\n        this.pageSizeChange.emit(Number.parseInt(pageSize, 10));\r\n    }\r\n\r\n    lock() {\r\n        this.locked = true;\r\n        this.lockedStyles();\r\n    }\r\n    unlock() {\r\n        this.locked = false;\r\n        this.lockedStyles();\r\n    }\r\n\r\n    private lockedStyles() {\r\n        this.styles = { opacity: this.locked? 0.5 : 1 };\r\n        this.cd.detectChanges();\r\n    }\r\n\r\n    onMouseEnter($event) {\r\n        $event.stopPropagation();\r\n\r\n        if (this.locked) {\r\n            return;\r\n        }\r\n\r\n        this.mouseInSelectedList = true;\r\n        if (this.selectedData && this.selectedData.length) {\r\n            this.openSelectedList = !this.openSelectedList;\r\n        } else {\r\n            this.openSelectedList = false;\r\n        }\r\n    }\r\n\r\n\r\n    closeSelectedList() {\r\n        this.openSelectedList = false;\r\n        this.mouseInSelectedList = false;\r\n        if (!this.cd['destroyed']) {\r\n            this.cd.detectChanges();\r\n        }\r\n    }\r\n\r\n    onDelSelectedItem(id: any) {\r\n        this.removeSelectedItem.emit(id);\r\n    }\r\n\r\n    onClearSelected($event) {\r\n        this.clearSelectedItem.emit();\r\n        this.closeSelectedList();\r\n    }\r\n\r\n    onSelectListPanelClose($event) {\r\n        this.closeSelectedList();\r\n    }\r\n}\r\n","import { Component, OnInit, Input } from '@angular/core';\r\nimport { DomSanitizer, SafeHtml } from '@angular/platform-browser';\r\n\r\nconst loading_style_ring =\r\n`<svg width=\"100%\" height=\"100%\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\" preserveAspectRatio=\"xMidYMid\">\r\n  <circle cx=\"50\" cy=\"50\" fill=\"none\" r=\"30\" stroke=\"#2c7dff\" stroke-width=\"10\"></circle>\r\n  <circle cx=\"50\" cy=\"50\" fill=\"none\" r=\"30\" stroke=\"#d0eaff\" stroke-width=\"10\" stroke-linecap=\"square\" transform=\"rotate(178.821 50 50)\">\r\n      <animateTransform attributeName=\"transform\" type=\"rotate\"\r\n          calcMode=\"linear\" values=\"0 50 50;180 50 50;720 50 50\" keyTimes=\"0;0.5;1\" dur=\"1.6s\" begin=\"0s\"\r\n          repeatCount=\"indefinite\"></animateTransform>\r\n      <animate attributeName=\"stroke-dasharray\" calcMode=\"linear\"\r\n          values=\"9.42477796076938 179.0707812546182;150.79644737231007 37.6991118430775;9.42477796076938 179.0707812546182\"\r\n          keyTimes=\"0;0.5;1\" dur=\"1.6\" begin=\"0s\" repeatCount=\"indefinite\"></animate>\r\n  </circle>\r\n</svg>`;\r\n\r\n@Component({\r\n    selector: 'datagrid-loading',\r\n    template: `\r\n    <div style=\"width:100%;height:100%;position:absolute;top:0;left: 0;background:rgba(255,255,255,0);z-index: 90000000;pointer-events: unset;\">\r\n        <div style=\"width: 50px;height: 50px;position: relative;top: 50%;margin-top: -25px;left: 50%;margin-left: -25px;\"\r\n        [innerHTML]=\"loading\" >\r\n        </div>\r\n    </div>\r\n    `\r\n})\r\nexport class DataGridLoadingComponent implements OnInit {\r\n\r\n    @Input() loading: any;\r\n\r\n    constructor(private domSanitizer: DomSanitizer) { }\r\n\r\n    ngOnInit(): void {\r\n        if (this.loading) {\r\n            this.loading = this.domSanitizer.bypassSecurityTrustHtml(this.loading);\r\n        } else {\r\n            this.loading = this.domSanitizer.bypassSecurityTrustHtml(loading_style_ring);\r\n        }\r\n    }\r\n\r\n\r\n}\r\n","import { debounce } from 'rxjs/operators';\r\nimport { Component, OnInit, EventEmitter, Output, Input, OnChanges, SimpleChanges } from '@angular/core';\r\nimport { interval } from 'rxjs';\r\n\r\n@Component({\r\n    selector: 'pager-selected-list',\r\n    templateUrl: './selected-list.component.html',\r\n})\r\nexport class PagerSelectedListComponent implements OnInit, OnChanges {\r\n\r\n    @Input() data = [];\r\n\r\n    @Output() close = new EventEmitter();\r\n    @Output() remove = new EventEmitter();\r\n    @Output() clear = new EventEmitter();\r\n\r\n    constructor() { }\r\n\r\n    ngOnInit(): void { }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n    }\r\n\r\n    onClose($event: MouseEvent) {\r\n        $event.stopPropagation();\r\n        this.close.emit();\r\n    }\r\n\r\n    onRemoveClick($event: MouseEvent, id: any) {\r\n        $event.stopPropagation();\r\n        this.remove.emit(id);\r\n    }\r\n\r\n    onClearClick($event: MouseEvent) {\r\n        $event.stopPropagation();\r\n        this.clear.emit();\r\n    }\r\n\r\n    onClick($event: MouseEvent) {\r\n        $event.stopPropagation();\r\n        return false;\r\n    }\r\n\r\n    trackByFn = (index, item) => {\r\n        return item.id;\r\n    }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({name: 'selectedItem'})\r\nexport class SelectedItemPipe implements PipeTransform {\r\n    transform(data: any, formatter: any): any {\r\n        if (data) {\r\n            if (formatter) {\r\n                data = data.map( d => {\r\n                    return {id: d.id, text:  formatter(d.data) };\r\n                });\r\n            } else  {\r\n                data = data.map(d => {\r\n                    const txt = [];\r\n                    const keys = Object.keys(d.data);\r\n                    keys.forEach(k => {\r\n                        txt.push(d.data[k]);\r\n                    });\r\n                    return {id: d.id, text: txt.join(', ') };\r\n                });\r\n            }\r\n\r\n            return data;\r\n        }\r\n    }\r\n}\r\n","import { ErrorHandler, Injector } from '@angular/core';\r\n\r\nexport class DatagridErrorHandler implements ErrorHandler {\r\n    handleError(error: any): void {\r\n        console.error(error);\r\n    }\r\n}\r\n\r\nexport class Éµs implements ErrorHandler {\r\n    handleError(error: any): void {\r\n        console.error(error);\r\n    }\r\n}\r\n","import { Subject, Subscription } from 'rxjs';\r\n/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @Date: 2019-08-06 07:43:07\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-10-30 16:08:56\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\nimport { DatagridComponent } from './../../datagrid.component';\r\nimport { Component, OnInit, Input, ViewChild, ElementRef, Injector, Inject, forwardRef, ChangeDetectorRef, OnDestroy, OnChanges, SimpleChanges } from '@angular/core';\r\nimport { DatagridFacadeService } from './../../services/datagrid-facade.service';\r\nimport { filter, map, takeUntil } from 'rxjs/operators';\r\n\r\n@Component({\r\n    selector: 'datagrid-checkbox',\r\n    template: ` <div class=\"custom-control custom-checkbox f-checkradio-single\">\r\n        <input type=\"checkbox\" #chk class=\"custom-control-input\" [disabled]=\"disabled\" [checked]=\"checked\">\r\n        <label class=\"custom-control-label\" (click)=\"handleClick($event)\"></label>\r\n    </div>`,\r\n    styles: [\r\n        `\r\n        :host {\r\n            vertical-align: middle;\r\n        }\r\n        :host .custom-checkbox {\r\n            opacity: 1;\r\n            float: none;\r\n            top: 2px;\r\n        }\r\n        `\r\n    ]\r\n})\r\nexport class DatagridCheckboxComponent implements OnInit, OnDestroy, OnChanges {\r\n    @Input() rowData: any;\r\n    @Input() rowIndex: any;\r\n    @Input() checked: boolean;\r\n    @Input() disabled: boolean;\r\n\r\n    @Input() indeterminate = false;\r\n    @ViewChild('chk') chk: ElementRef;\r\n\r\n    private dfs: DatagridFacadeService;\r\n    private cd: ChangeDetectorRef;\r\n\r\n    checked$ = null;\r\n    private destroy$ = new Subject();\r\n    subscriptions: Subscription[] = [];\r\n    constructor(private injector: Injector, @Inject(forwardRef(() => DatagridComponent)) public dg: DatagridComponent) {\r\n        this.dfs = this.injector.get(DatagridFacadeService);\r\n        this.cd = this.injector.get(ChangeDetectorRef);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        if (this.indeterminate) {\r\n            this.chk.nativeElement.indeterminate = true;\r\n        }\r\n        this.listenSubjects();\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (changes.checked && !changes.checked.isFirstChange()) {\r\n            this.changeCheckedStatus(changes.checked.currentValue);\r\n        }\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.destroy$.next();\r\n        this.destroy$.complete();\r\n\r\n        if (this.subscriptions && this.subscriptions.length) {\r\n            this.subscriptions.forEach(n => n.unsubscribe());\r\n            this.subscriptions = [];\r\n        }\r\n    }\r\n\r\n    private listenSubjects() {\r\n        const rid = this.dfs.primaryId(this.rowData);\r\n        this.subscriptions.push(\r\n            this.dg.checkAll.pipe(\r\n                takeUntil(this.destroy$)\r\n            ).subscribe(() => {\r\n                let flag = true;\r\n                if (this.dg.disableRow) {\r\n                    flag = !this.dg.disableRow(this.rowData, this.rowIndex);\r\n                    if (!flag) {\r\n                        flag = this.dg.dfs.isRowChecked(rid);\r\n                    }\r\n                }\r\n                this.changeCheckedStatus(flag);\r\n            })\r\n        );\r\n\r\n        this.subscriptions.push(\r\n            this.dg.unCheckAll.pipe(\r\n                takeUntil(this.destroy$)\r\n            ).subscribe((e: any) => {\r\n                if (e && e.length) {\r\n                    if (e.find(n => n[this.dg.idField] === this.rowData[this.dg.idField])) {\r\n                        this.changeCheckedStatus(false);\r\n                    }\r\n                } else {\r\n                    this.changeCheckedStatus(false);\r\n                }\r\n            })\r\n        );\r\n\r\n        const _setcheckrows = this.dg.dgs.setCheckedRows.pipe(\r\n            takeUntil(this.destroy$)\r\n        ).pipe(\r\n            filter((r: any) => {\r\n                return r.ids.includes(rid) || r.ids.includes('' + rid);\r\n            }),\r\n            map((r: any) => {\r\n                const flag = r.ids.includes(rid) || r.ids.includes('' + rid);\r\n                if (flag) {\r\n                    return flag && r.checked;\r\n                }\r\n                return false;\r\n            }),\r\n        ).subscribe(r => {\r\n            this.checked = r;\r\n            this.changeCheckedStatus(r);\r\n        });\r\n        this.subscriptions.push(_setcheckrows);\r\n\r\n        this.dfs.updateCheckboxState$.pipe(\r\n            takeUntil(this.destroy$),\r\n        ).pipe(\r\n            filter((r: any) => {\r\n                return r.id === rid;\r\n            }),\r\n            map((r: any) => {\r\n                return !!r.checked;\r\n            })\r\n        ).subscribe((r: any) => {\r\n            this.checked = r;\r\n            this.changeCheckedStatus(r);\r\n        });\r\n    }\r\n\r\n    handleClick(event: MouseEvent) {\r\n        if (!this.disabled) {\r\n            const beforEventParam = {\r\n                rowIndex: this.rowIndex,\r\n                rowData: this.rowData,\r\n                gridInstance: this.dg\r\n            };\r\n            this.dg.endCellEdit();\r\n            const _checked = this.chk.nativeElement.checked;\r\n            if (!_checked) {\r\n                this.dg.beforeCheck(beforEventParam).subscribe((canCheck: boolean) => {\r\n                    if (canCheck) {\r\n                        this.dfs.checkRow(this.rowIndex, this.rowData, { instance: this.dg});\r\n                        this.checked = true;\r\n                        this.changeCheckedStatus(true);\r\n                    }\r\n                });\r\n            } else {\r\n                this.dg.beforeUncheck(beforEventParam).subscribe((canUncheck: boolean) => {\r\n                    if (canUncheck) {\r\n                        this.dfs.unCheckRow(this.rowIndex, this.rowData, { instance: this.dg});\r\n                        this.checked = false;\r\n                        this.changeCheckedStatus(false);\r\n                        if (this.dg.showSelectedList) {\r\n                            this.dg.cd.detectChanges();\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n            // this.checked = !this.checked;\r\n            // this.cd.detectChanges();\r\n        }\r\n        event.stopPropagation();\r\n    }\r\n\r\n    private changeCheckedStatus(status: boolean) {\r\n        this.chk.nativeElement.checked = status;\r\n    }\r\n\r\n}\r\n","import { takeUntil } from 'rxjs/operators';\r\nimport { DatagridComponent } from './../../datagrid.component';\r\n/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @Date: 2019-08-06 07:43:07\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-09-18 10:30:21\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\nimport { Component, OnInit, Input, ViewChild, ElementRef, Injector, OnDestroy } from '@angular/core';\r\nimport { DatagridFacadeService } from './../../services/datagrid-facade.service';\r\nimport { Subject } from 'rxjs';\r\n\r\n@Component({\r\n    selector: 'datagrid-header-checkbox',\r\n    template: ` <div class=\"custom-control custom-checkbox f-checkradio-single\">\r\n        <input type=\"checkbox\" #chk class=\"custom-control-input\" [disabled]=\"disabled\" [checked]=\"checked\">\r\n        <label class=\"custom-control-label\" (click)=\"handleClick($event)\"></label>\r\n    </div>`,\r\n    styles: [\r\n        `\r\n        :host {\r\n            vertical-align: middle;\r\n        }\r\n        :host .custom-checkbox {\r\n            opacity: 1;\r\n            float: none;\r\n            top: 2px;\r\n        }\r\n        `\r\n    ]\r\n})\r\nexport class DatagridHeaderCheckboxComponent implements OnInit, OnDestroy {\r\n    @Input() checked: boolean;\r\n    @Input() disabled: boolean;\r\n\r\n    @Input() indeterminate = false;\r\n\r\n    @ViewChild('chk') chk: ElementRef;\r\n    private dfs: DatagridFacadeService;\r\n    private dg: DatagridComponent;\r\n    private destroy$ = new Subject();\r\n    constructor(private injector: Injector) {\r\n        this.dfs = this.injector.get(DatagridFacadeService);\r\n        this.dg = this.injector.get(DatagridComponent);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        if (this.indeterminate) {\r\n            this.chk.nativeElement.indeterminate = true;\r\n        }\r\n\r\n        this.dg.dgs.changeCheckAllStatus.pipe(\r\n            takeUntil(this.destroy$)\r\n        ).subscribe((status: number) => {\r\n            if (status === 2) {\r\n                this.chk.nativeElement.indeterminate = true;\r\n            } else {\r\n                this.chk.nativeElement.indeterminate = false;\r\n                this.updateStatus(!!status);\r\n            }\r\n        });\r\n    }\r\n    ngOnDestroy() {\r\n        this.destroy$.next();\r\n        this.destroy$.complete();\r\n    }\r\n\r\n    updateStatus(checked: boolean) {\r\n        this.checked = checked;\r\n        this.chk.nativeElement.checked = checked;\r\n    }\r\n\r\n\r\n    handleClick(event: MouseEvent) {\r\n        if (!this.dg.data || !this.dg.data.length) {\r\n            return;\r\n        }\r\n\r\n        if (!this.disabled) {\r\n            this.checked = !this.checked;\r\n\r\n            this.indeterminate = false;\r\n            this.chk.nativeElement.indeterminate = false;\r\n            if (this.checked) {\r\n                this.dfs.checkAll();\r\n                this.chk.nativeElement.checked = true;\r\n                // this.dg.checkAll.emit();\r\n            } else {\r\n                this.dfs.clearCheckeds(!this.dg.enableMorePageSelect);\r\n\r\n                if (this.dg.selectedRow && this.dg.checkOnSelect && this.dg.selectOnCheck) {\r\n                    this.dg.unSelectRow(this.dg.selectedRow.id);\r\n                }\r\n                this.chk.nativeElement.checked = false;\r\n                // this.dg.unCheckAll.emit();\r\n            }\r\n        }\r\n        event.stopPropagation();\r\n    }\r\n\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { TR_PREFIX } from './../types/constant';\r\nimport { DatagridFacadeService } from '../services/datagrid-facade.service';\r\n\r\n@Pipe({name: 'rowDataId'})\r\nexport class RowDataIdPipe implements PipeTransform {\r\n\r\n    constructor(private dfs: DatagridFacadeService) {}\r\n\r\n    transform(rowData: any, fixedRight = false, fixedLeft = false): any {\r\n        if (rowData) {\r\n            let rowID = TR_PREFIX + this.dfs.primaryId(rowData);\r\n            if (fixedRight) {\r\n                rowID += '_fixedright';\r\n            } else if (fixedLeft) {\r\n                rowID += '_fixedleft';\r\n            }\r\n            return rowID;\r\n        }\r\n        return null;\r\n    }\r\n}\r\n","import { Optional, Pipe, PipeTransform } from '@angular/core';\r\nimport { DatagridFacadeService } from './../services/datagrid-facade.service';\r\n\r\n@Pipe({name: 'formatGroupRow'})\r\nexport class FormatGroupRowPipe implements PipeTransform {\r\n\r\n    constructor(@Optional() private dfs: DatagridFacadeService) {}\r\n\r\n\r\n    transform(row: any, col: any, fn?: any): any {\r\n        if (row) {\r\n            let val = row['value'];\r\n            if (!col && this.dfs) {\r\n                col = this.dfs.getColumn(row.field);\r\n            }\r\n\r\n            if (col && col.formatter) {\r\n                if (col.formatter.type === 'enum') {\r\n                    const enumOpts: {valueField: string, textField: string, data: any} = col.formatter.options;\r\n                    const { valueField, textField, data } = {...enumOpts};\r\n                    const enumItem = data.find(item => item[valueField] === row['value']);\r\n                    val = enumItem ? enumItem[textField] : '';\r\n                }\r\n            }\r\n\r\n            return fn ? fn(row) : val;\r\n        }\r\n\r\n        return '';\r\n    }\r\n}\r\n","import { takeUntil } from 'rxjs/operators';\r\nimport { Component, OnInit, ChangeDetectorRef, ElementRef, Injector, NgZone, Input, Output, EventEmitter, OnDestroy, OnChanges, SimpleChanges, Renderer2 } from '@angular/core';\r\nimport { Subscription, Subject } from 'rxjs';\r\nimport { DatagridService } from './../../services/datagrid.service';\r\nimport { DatagridComponent } from '../../datagrid.component';\r\nimport { DatagridBodyComponent } from './datagrid-body.component';\r\nimport { ROW_INDEX_FIELD, IS_GROUP_ROW_FIELD, GROUP_ROW_FIELD, IS_GROUP_FOOTER_ROW_FIELD, GROUP_VISIBLE_FIELD } from '../../services/state';\r\nimport { DatagridFacadeService } from '../../services/datagrid-facade.service';\r\n\r\n\r\n@Component({\r\n    selector: 'fixed-left-rows',\r\n    templateUrl: 'fixed-left-rows.component.html'\r\n})\r\n\r\nexport class FixedLeftRowsComponent implements OnInit, OnDestroy {\r\n\r\n    @Input() columns = [];\r\n    @Output() toggle = new EventEmitter();\r\n    @Input() checkedRows = [];\r\n    @Input() selectedRows = [];\r\n    @Input() data = [];\r\n\r\n    /** å¯ç¨åç»æ¶ï¼æ°æ®æºä¸­èªå¨è®¾ç½®è¡ç´¢å¼å­æ®µ */\r\n    groupRowIndex = ROW_INDEX_FIELD;\r\n    isGroupRow = IS_GROUP_ROW_FIELD;\r\n    groupRow = GROUP_ROW_FIELD;\r\n    isGroupFooter = IS_GROUP_FOOTER_ROW_FIELD;\r\n    visible = GROUP_VISIBLE_FIELD;\r\n\r\n    filterConditions = '';\r\n\r\n    subscriptions: Subscription[] = [];\r\n\r\n    dgs: DatagridService = null;\r\n    render2: Renderer2;\r\n    private destroy$ = new Subject();\r\n    constructor(\r\n        private cd: ChangeDetectorRef,\r\n        public dg: DatagridComponent,\r\n        public dgb: DatagridBodyComponent,\r\n        public dfs: DatagridFacadeService,\r\n        public el: ElementRef, private injector: Injector, private ngZone: NgZone) {\r\n            this.dgs = this.injector.get(DatagridService);\r\n            this.render2 = this.injector.get(Renderer2);\r\n        }\r\n\r\n    private listenSubject() {\r\n        // const _selectrow = this.dfs.selectRow$.subscribe(() => {\r\n        //     this.detectChanges();\r\n        // });\r\n        // this.subscriptions.push(_selectrow);\r\n\r\n        // const _unselectrow = this.dfs.unSelectRow$.subscribe(() => {\r\n        //     this.detectChanges();\r\n        // });\r\n        // this.subscriptions.push(_unselectrow);\r\n\r\n        const _setselectrow = this.dgs.setSelecedRow.pipe(\r\n            takeUntil(this.destroy$)\r\n        )\r\n        .subscribe((r: any) => {\r\n            this.detectChanges();\r\n        });\r\n        this.subscriptions.push(_setselectrow);\r\n\r\n        this.dfs.checkRow$.pipe(\r\n            takeUntil(this.destroy$)\r\n        ).subscribe( () => {\r\n            this.checkedRows = this.dfs.getCheckeds();\r\n            this.detectChanges();\r\n        });\r\n\r\n        this.dfs.clearCheckeds$.pipe(\r\n            takeUntil(this.destroy$)\r\n        ).subscribe( () => {\r\n            this.checkedRows = this.dfs.getCheckeds();\r\n            this.detectChanges();\r\n        });\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.listenSubject();\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.destroy$.next();\r\n        this.destroy$.complete();\r\n        if (this.subscriptions && this.subscriptions.length) {\r\n            this.subscriptions.forEach(n => n.unsubscribe());\r\n            this.subscriptions = [];\r\n        }\r\n    }\r\n\r\n\r\n    private detectChanges() {\r\n        if (!this.cd['destroyed']) {\r\n            // this.cd.markForCheck();\r\n            this.cd.detectChanges();\r\n        }\r\n\r\n    }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n/**\r\n * ä½¿ç¨è¯´æ\r\n * let message = \"ä»å¤©å¤©æ° {0}ï¼å¤å¤å¥½ {1}ã\"\r\n * template:\r\n * <h1>{{ message| replaceX: 'æ´æ', 'é£å' }}</h1>\r\n * resule:\r\n * <h1>ä»å¤©å¤©æ° æ´æï¼å¤å¤å¥½ é£åã</h1>\r\n */\r\n@Pipe({name: 'replaceX'})\r\nexport class ReplaceXPipe implements PipeTransform {\r\n    transform(value: any, ...args: any[]) {\r\n        args.forEach((v, i) => {\r\n            value = value.replace(`{${i}}`, v);\r\n        });\r\n\r\n        return value;\r\n    }\r\n}\r\n","import { Directive, Input, Injector, Renderer2, ElementRef, OnInit } from '@angular/core';\r\nimport { DatagridComponent } from './../../datagrid.component';\r\n\r\n@Directive({\r\n    selector: '[group-row]',\r\n})\r\nexport class DatagridGroupRowDirective implements OnInit {\r\n    @Input('group-row') groupRow;\r\n\r\n    constructor(private injector: Injector, private render: Renderer2, private el: ElementRef, private dg: DatagridComponent) {\r\n\r\n    }\r\n\r\n    ngOnInit() {\r\n        if (this.dg.groupStyler) {\r\n            const styler = this.dg.groupStyler(this.groupRow);\r\n            const tr = this.el.nativeElement;\r\n            if (!tr.id) {\r\n                tr.id = 'group-tr_' + this.groupRow.id;\r\n            }\r\n            this.dg.renderCustomStyle(styler, tr);\r\n        }\r\n    }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({name: 'showStar'})\r\nexport class ShowRequiredStarPipe implements PipeTransform {\r\n    transform(validators: any): any {\r\n        if (validators && validators.length) {\r\n            const isRequired = validators.find(v => v.type === 'required');\r\n            return isRequired;\r\n        }\r\n        return false;\r\n    }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({name: 'disableRow'})\r\nexport class DisableRowPipe implements PipeTransform {\r\n    transform(rowData: any, rowIndex: number, disableRowFn: (row, index) => {}): any {\r\n        if (disableRowFn) {\r\n            return disableRowFn(rowData, rowIndex);\r\n        }\r\n\r\n        return false;\r\n    }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { DatagridFacadeService } from './../services/datagrid-facade.service';\r\n\r\n@Pipe({name: 'selectedRow'})\r\nexport class SelectedRowPipe implements PipeTransform {\r\n    constructor(private dfs: DatagridFacadeService) {}\r\n    transform(rowId: any): any {\r\n        return this.dfs.isRowSelected(rowId);\r\n    }\r\n}\r\n","import { Utils } from './utils';\r\nimport { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({name: 'fieldvalue'})\r\nexport class FieldValuePipe implements PipeTransform {\r\n    transform(field: any, rowdata: any, safe = false): any {\r\n        return Utils.getValue(field, rowdata, safe);\r\n    }\r\n}\r\n","import { DatagridComponent } from './../../datagrid.component';\r\nimport { Utils } from './../../utils/utils';\r\nimport { OnDestroy, Input, HostListener, ElementRef, Directive, Injector, OnInit, NgZone, Renderer2 } from '@angular/core';\r\nimport { CommonUtils } from '@farris/ui-common';\r\nimport { DomHandler } from '../../services/domhandler';\r\n\r\n@Directive({\r\n    selector: '[cell-tooltip]',\r\n    exportAs: 'cellTooltip'\r\n})\r\nexport class DatagridCellTooltipDirective implements OnInit, OnDestroy {\r\n    @Input('cell-tooltip') enable: boolean;\r\n    @Input() position: 'top' | 'bottom' | 'left' | 'right' | 'top-left' | 'top-center' | 'top-right' = 'top-left';\r\n    @Input() positionStyle: string;\r\n    @Input() tooltipStyleClass: string;\r\n    @Input() message: string;\r\n    @Input() delay = 1000;\r\n\r\n    @Input() cls = '';\r\n    @Input() type: 'danger' | 'success' | 'info' | 'warning' = 'info';\r\n    @Input() tipMode: 'allways' | 'auto' = 'auto';\r\n\r\n    // @HostBinding('style.width') cmpWidth = '100%';\r\n\r\n    container: any;\r\n    private commonUtils: CommonUtils;\r\n    private showTipTimer = null;\r\n\r\n\r\n    private _mouseenter = null;\r\n    private _mouseleave = null;\r\n    private _mouseclick = null;\r\n    private ngZone: NgZone = null;\r\n    private render: Renderer2 = null;\r\n    private dg: DatagridComponent;\r\n    constructor(private el: ElementRef, private injector: Injector) {\r\n        if (this.injector) {\r\n            this.commonUtils = this.injector.get(CommonUtils, new CommonUtils());\r\n            this.ngZone = this.injector.get(NgZone);\r\n            this.render = this.injector.get(Renderer2);\r\n\r\n            this.dg = this.injector.get(DatagridComponent);\r\n        } else {\r\n            this.commonUtils = new CommonUtils();\r\n        }\r\n    }\r\n\r\n    ngOnInit() {\r\n        if (this.ngZone) {\r\n            this.ngZone.runOutsideAngular(() => {\r\n                this._mouseenter = Utils.on(this.el.nativeElement, 'mouseenter', this.onMouseEnter.bind(this), { target: '.f-datagrid-cell-content', options: { capture: true }});\r\n                this._mouseleave = Utils.on(this.el.nativeElement, 'mouseleave', this.onMouseLeave.bind(this), { target: '.f-datagrid-cell-content', options: { capture: true }});\r\n                this._mouseclick = Utils.on(this.el.nativeElement, 'mousedown', this.onClick.bind(this));\r\n            });\r\n        }\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.hide();\r\n        if (this._mouseenter) {\r\n            this._mouseenter();\r\n        }\r\n\r\n        if (this._mouseleave) {\r\n            this._mouseleave();\r\n        }\r\n\r\n        if (this._mouseclick) {\r\n            this._mouseclick();\r\n        }\r\n\r\n        // this.dg = null;\r\n    }\r\n\r\n    onMouseEnter($event) {\r\n\r\n        const cellTiptimer = this.dg ? this.dg.cellTipTimer : 1000;\r\n\r\n        if (this.showTipTimer) {\r\n            clearTimeout(this.showTipTimer);\r\n            this.showTipTimer = null;\r\n        }\r\n        this.showTipTimer = setTimeout(() => {\r\n            this.show($event);\r\n        }, cellTiptimer);\r\n    }\r\n\r\n    onMouseLeave() {\r\n        this.hide();\r\n    }\r\n\r\n    onClick(e: MouseEvent) {\r\n        // e.stopPropagation();\r\n        this.hide();\r\n    }\r\n\r\n    private getTextContainer() {\r\n        return DomHandler.findSingle(this.container, '.f-tooltip-text');\r\n    }\r\n\r\n    private donotShowTips(target: any) {\r\n        const tdWidth = target.offsetWidth;\r\n        const tagetSty =  window.getComputedStyle(target);\r\n        const txtWidth = this.commonUtils.getTextWidth(this.message, tagetSty.font);\r\n        const { paddingLeft, paddingRight } = tagetSty;\r\n        const _width = tdWidth - (Number(paddingLeft.replace('px', '')) || 0) - (Number(paddingRight.replace('px', '')) || 0);\r\n\r\n        let tr = target.closest('tr');\r\n        if (tr) {\r\n            const trId = tr.id;\r\n            tr = document.querySelector('#'+ trId);\r\n        }\r\n\r\n        if (this.tipMode === 'auto') {\r\n            if (tr) {\r\n                return _width && _width > txtWidth;\r\n            }\r\n            return true;\r\n        } else {\r\n            return tr ? false : true;\r\n        }\r\n    }\r\n\r\n    hide() {\r\n        if (this.showTipTimer) {\r\n            clearTimeout(this.showTipTimer);\r\n            this.showTipTimer = null;\r\n        }\r\n\r\n        if (this.container && this.container.parentElement) {\r\n            document.body.removeChild(this.container);\r\n        }\r\n        this.container = null;\r\n    }\r\n\r\n    show($event: MouseEvent) {\r\n        const cellEl = $event.target as any;\r\n        this.enable = cellEl.getAttribute('cell-tooltip') === 'true';\r\n        this.message = cellEl.getAttribute('message');\r\n        this.tipMode = cellEl.getAttribute('tipMode') || 'auto';\r\n\r\n        if (!this.enable || !this.message) {\r\n            return;\r\n        }\r\n\r\n        const tipWidth = cellEl.getAttribute('tipWidth');\r\n        const tipHeight = cellEl.getAttribute('tipHeight');\r\n        this.position = cellEl.getAttribute('position') || 'top-left';\r\n\r\n        // æ£æ¥ä¸åå®¹å®½åº¦æ¯å¦è¶åºåå®½\r\n        if (this.donotShowTips($event.target)) {\r\n            return;\r\n        }\r\n\r\n        // const boxEl = this.el.nativeElement;\r\n        const boxEl = $event.target;\r\n        const elSize = this.getBoxSizeObj(boxEl);\r\n\r\n\r\n        /** å¦æå­å¨åä¸æ°å»ºï¼åªéè¦ä¿®æ¹éé¢çåå®¹ */\r\n        if (!this.container) {\r\n            this.create(elSize);\r\n        } else {\r\n            DomHandler.findSingle(this.container, '.f-tooltip-text').innerHTML = this.message;\r\n        }\r\n\r\n        this.container.style.maxWidth = `${window.innerWidth - 30}px`;\r\n        this.container.style.minWidth = '35px';\r\n\r\n        if (tipWidth) {\r\n            this.container.style.width = tipWidth;\r\n        }\r\n\r\n        if (tipHeight) {\r\n            this.container.style.height = tipHeight;\r\n        }\r\n\r\n\r\n        const offset = DomHandler.getOffset(boxEl);\r\n        const targetTop = offset.top;\r\n        const targetLeft = offset.left;\r\n        let left: number;\r\n        let top: number;\r\n        this.container.style.display = 'block';\r\n\r\n        this.changeTooltipPosition(boxEl);\r\n        const arrow = DomHandler.findSingle(this.container, '.f-tooltip-arrow');\r\n        const tooltipSize = this.getTooltipSize();\r\n\r\n        // æ£æ¥åå®¹é«åº¦\r\n        if (window.innerHeight - 10 < tooltipSize.height) {\r\n            this.container.style.height = `${window.innerHeight - 20}px`;\r\n\r\n            tooltipSize.height = window.innerHeight - 25;\r\n            const textContainer = this.getTextContainer();\r\n            textContainer.style.height = `${tooltipSize.height}px`;\r\n            textContainer.style.overflow = 'hidden';\r\n        }\r\n\r\n\r\n        const n = this.updateArrowPosition(arrow, offset, $event);\r\n        switch (this.position) {\r\n            case 'right':\r\n                left = targetLeft + elSize.width;\r\n                top = n;\r\n                break;\r\n            case 'left':\r\n                left = targetLeft - tooltipSize.width;\r\n                top = n;\r\n                break;\r\n            case 'top-left':\r\n                top = targetTop - tooltipSize.height - 7;\r\n                left = n;\r\n                break;\r\n        }\r\n\r\n        if (left) {\r\n            this.container.style.left = left + 'px';\r\n        }\r\n\r\n        this.container.style.top = top + 'px';\r\n        this.container.style.zIndex = 999999;\r\n    }\r\n\r\n    private updateArrowPosition(arrow: any, elOffset: { top, left }, $event: any) {\r\n        const tooltipSize = this.getTooltipSize();\r\n        if (this.position === 'left' || this.position === 'right') {\r\n            const targetTop = elOffset.top;\r\n            const halfHeight = tooltipSize.height / 2;\r\n            let top = 10;\r\n            if (targetTop > halfHeight && window.innerHeight - targetTop > halfHeight) {\r\n                top = targetTop - tooltipSize.height / 2;\r\n            }\r\n\r\n            // è°æ´ç®­å¤´çä½ç½®\r\n            if (arrow) {\r\n                arrow.style.top = `${targetTop - top}px`;\r\n            }\r\n\r\n            return top;\r\n        } else if (this.position === 'top-left') {\r\n            let left = $event.pageX - tooltipSize.width / 2;\r\n\r\n            if (left < 10) {\r\n                left = elOffset.left;\r\n            }\r\n\r\n            if (left + tooltipSize.width > window.innerWidth) {\r\n                left = window.innerWidth - tooltipSize.width - 20;\r\n            }\r\n            // è°æ´ç®­å¤´çä½ç½®\r\n            if (arrow) {\r\n                if ($event.pageX - left > 28) {\r\n                    if ($event.pageX - left + 28 > tooltipSize.width) {\r\n                        arrow.style.left = `${tooltipSize.width - 28 }px`;\r\n                    } else {\r\n                        arrow.style.left = `${$event.pageX - left }px`;\r\n                    }\r\n                }\r\n            }\r\n\r\n            return left;\r\n        }\r\n    }\r\n\r\n    create(elSize: any) {\r\n        let styleClass = this.tooltipCls();\r\n        this.container = document.createElement('div');\r\n        if (this.tooltipStyleClass) {\r\n            styleClass += ' ' + this.tooltipStyleClass;\r\n        }\r\n        this.container.className = styleClass;\r\n\r\n        const tooltipArrow = document.createElement('div');\r\n        tooltipArrow.className = 'f-tooltip-arrow ';\r\n        this.container.appendChild(tooltipArrow);\r\n\r\n        const tooltipText = document.createElement('div');\r\n        tooltipText.className = 'f-tooltip-text ';\r\n        tooltipText.innerHTML = this.message;\r\n\r\n        const maxWidth = window.innerWidth - 50;\r\n        tooltipText.style.maxWidth = `${maxWidth}px`;\r\n\r\n        tooltipText.style.wordBreak = 'break-all';\r\n        this.container.style.textAlign = 'center';\r\n\r\n        if (this.positionStyle) {\r\n            this.container.style.position = this.positionStyle;\r\n        }\r\n\r\n        this.container.appendChild(tooltipText);\r\n        document.body.appendChild(this.container);\r\n    }\r\n\r\n    private tooltipCls() {\r\n        return 'datagrid-cell-tooltip f-tooltip ' + this.getThemeCls() + ' f-tooltip-' + this.position + ' ' + this.cls;\r\n    }\r\n\r\n    private getThemeCls() {\r\n        if (this.type) {\r\n            return 'f-tooltip-' + this.type;\r\n        }\r\n        return '';\r\n    }\r\n\r\n    /** è·åå®¿ä¸»å°ºå¯¸ */\r\n    private getBoxSizeObj(boxEl) {\r\n        const p = boxEl.getBoundingClientRect();\r\n        return {\r\n            width: DomHandler.getOuterWidth(boxEl),\r\n            height: DomHandler.getOuterHeight(boxEl),\r\n            left: p.left,\r\n            right: p.right,\r\n            top: p.top,\r\n            bottom: p.bottom\r\n        };\r\n    }\r\n\r\n    /** è·åtooltip å®¹å¨å°ºå¯¸ */\r\n    private getTooltipSize() {\r\n        return {\r\n            width: DomHandler.getOuterWidth(this.container),\r\n            height: DomHandler.getOuterHeight(this.container)\r\n        };\r\n    }\r\n\r\n    /** è·åçªå£å°ºå¯¸ */\r\n    private getWindowSize() {\r\n        return {\r\n            width: window.innerWidth,\r\n            height: window.innerHeight\r\n        };\r\n    }\r\n\r\n    /** æ ¹æ®åå®¹çå¤å°ï¼èªå¨æ´æ¹tooltip çä½ç½® */\r\n    private changeTooltipPosition(boxEl: any) {\r\n        const boxSize = this.getBoxSizeObj(boxEl);\r\n        const tooltip = this.getTooltipSize();\r\n        const winSize = this.getWindowSize();\r\n\r\n        this.container.className = this.tooltipCls();\r\n\r\n        if (tooltip.width < winSize.width && tooltip.height < boxSize.top) {\r\n            // this.position = 'top-left';\r\n            return;\r\n        } else {\r\n            const elOffset = DomHandler.getOffset(boxEl);\r\n            const elLeft = elOffset.left;\r\n            const elRight = winSize.width - elLeft - boxSize.width;\r\n\r\n            if (elLeft > elRight) {\r\n                this.position = 'left';\r\n            } else {\r\n                this.position = 'right';\r\n            }\r\n\r\n            const toolTipTextWidth = elLeft > elRight ? elLeft : elRight;\r\n            const textEl = this.getTextContainer();\r\n            textEl.style.maxWidth = `${toolTipTextWidth - 30}px`;\r\n            this.container.style.maxWidth = `${toolTipTextWidth}px`;\r\n        }\r\n    }\r\n\r\n\r\n}\r\n","import { Pipe, PipeTransform, Injector } from '@angular/core';\r\nimport { ColumnFormatService } from '@farris/ui-common/column';\r\nimport { Utils } from './../../utils/utils';\r\nimport { DataColumn } from './../../types/data-column';\r\n\r\n@Pipe({ name: 'tipmsg' , pure: false})\r\nexport class CellTootipMessagePipe implements PipeTransform {\r\n\r\n    private colFormatSer: ColumnFormatService;\r\n    constructor( private injector: Injector) {\r\n    }\r\n\r\n    transform(col: any, ...args: any[]) {\r\n        if (col.showTips) {\r\n            this.colFormatSer = this.injector.get(ColumnFormatService);\r\n            const msg = this.getCellTooltipContent(col, args[0]);\r\n            return msg;\r\n        }\r\n        return '';\r\n    }\r\n\r\n    private getCellTooltipContent(col: DataColumn, rowData) {\r\n        let txt = Utils.getValue(col.field, rowData);\r\n        if (col.tipContent) {\r\n            if ( typeof col.tipContent === 'string') {\r\n                txt = col.tipContent;\r\n            } else {\r\n                if (typeof col.tipContent === 'function') {\r\n                    txt = col.tipContent(txt, rowData, col);\r\n                }\r\n            }\r\n        } else {\r\n            if (col.formatter && (typeof col.formatter === 'function' ||\r\n                (typeof col.formatter === 'object' && Object.keys(col.formatter).length))) {\r\n                txt = this.colFormatSer.format(txt, rowData, col.formatter);\r\n            } else {\r\n                txt = Utils.escapeValue(txt);\r\n            }\r\n        }\r\n        return txt;\r\n    }\r\n}\r\n","import { takeUntil } from 'rxjs/operators';\r\nimport { LocaleService } from '@farris/ui-locale';\r\nimport { Subject, Subscription } from 'rxjs';\r\nimport { Component, OnInit, ViewEncapsulation, Injector, ChangeDetectorRef, ElementRef, ViewChild, Renderer2, Input, NgZone, OnDestroy, Optional, Host } from '@angular/core';\r\nimport { DatagridService } from './../../services/datagrid.service';\r\nimport { DatagridFilterService } from './../../services/datagrid-filter.service';\r\nimport {  } from './../../services/datagrid-facade.service';\r\nimport ResizeObserver from 'resize-observer-polyfill';\r\nimport { DatagridComponent } from '../../datagrid.component';\r\n\r\n@Component({\r\n    selector: 'filter-toolbar',\r\n    template: `\r\n        <div class=\"f-datagrid-filter-toolbar-panel\" #filterPanel [class.show]=\"openFilterPanel\" style=\"width: auto\">\r\n            <span class=\"filter-text\" #filterPanelText [innerHTML]=\"filterText\"></span>\r\n        </div>\r\n        <div class=\"f-datagrid-filter-toolbar\" #filterToolbar>\r\n            <span class=\"title\">{{'datagrid.filter.title'| locale}}ï¼</span>\r\n            <span #filterbarTxt class=\"filter-text\" [innerHTML]=\"filterText\"> </span>\r\n            <span class=\"filter-action\" *ngIf=\"filterText !== empty \">\r\n                <span *ngIf=\"showExpand\" class=\"f-icon filter-action-item\"\r\n                    [class.f-icon-arrow-chevron-up]=\"openFilterPanel\"\r\n                    [class.f-icon-arrow-chevron-down]=\"!openFilterPanel\"\r\n                (click)=\"showFilterTextPanel()\" title=\"{{'datagrid.filter.more'|locale}}\"></span>\r\n                <span title=\"{{'datagrid.filter.clearAll'|locale}}\" class=\"f-icon f-icon-x filter-action-item filter-clear\" (click)=\"clearFilter($event)\"></span>\r\n                <span title=\"refresh\" class=\"f-icon f-icon-reload-sm filter-action-item filter-refresh\" style=\"color: #388fff\" (click)=\"refreshFilter($event)\"></span>\r\n                <span *ngIf=\"enableFilterSetting\" class=\"f-icon f-icon-cog filter-action-item\" title=\"{{'datagrid.filter.setting'|locale}}\"></span>\r\n            </span>\r\n        </div>\r\n    `,\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\nexport class DatagridFilterToolbarComponent implements OnInit, OnDestroy {\r\n    empty = '[ æ  ]';\r\n    filterText = this.empty;\r\n\r\n    openFilterPanel = false;\r\n    showExpand = false;\r\n\r\n    @Input() enableFilterSetting = false;\r\n\r\n    @ViewChild('filterPanel') filterPanelRef: ElementRef;\r\n    @ViewChild('filterPanelText') filterPanelTextRef: ElementRef;\r\n    @ViewChild('filterbarTxt') filterTextRef: ElementRef;\r\n    @ViewChild('filterToolbar') filterToolbarRef: ElementRef;\r\n\r\n    get toolbarWidth() {\r\n        return this.filterToolbarRef.nativeElement.offsetWidth;\r\n    }\r\n\r\n    get filterTextContainerWidth() {\r\n        let actionW = 52;\r\n        if (this.enableFilterSetting) {\r\n            actionW = 65;\r\n        }\r\n        return this.toolbarWidth - 85 - actionW;\r\n    }\r\n\r\n    get filterTextRealWidth() {\r\n        this.render.setStyle(this.filterPanelTextRef.nativeElement, 'white-space', 'nowrap');\r\n        const w = this.filterPanelTextRef.nativeElement.scrollWidth;\r\n        this.render.setStyle(this.filterPanelTextRef.nativeElement, 'white-space', 'normal');\r\n        return w;\r\n    }\r\n\r\n    filterChangeSubscription: Subscription;\r\n    windowResizeHandler = null;\r\n    ro: ResizeObserver = null;\r\n    private destory$ = new Subject();\r\n    private dfrs: DatagridFilterService;\r\n    private dg: DatagridComponent;\r\n    constructor(\r\n        private inject: Injector,\r\n        private el: ElementRef,\r\n        private cd: ChangeDetectorRef,\r\n        private dgs: DatagridService,\r\n        private render: Renderer2,\r\n        private ngZone: NgZone,\r\n        private localeSer: LocaleService,\r\n      ) {\r\n            this.empty = this.localeSer.getValue('datagrid.filter.nofilter');\r\n            this.filterText = this.empty;\r\n        }\r\n\r\n    ngOnInit(): void {\r\n        this.dg = this.inject.get<DatagridComponent>(DatagridComponent);\r\n        this.dfrs = this.dg.clientFilterService;\r\n\r\n        this.dgs.clearFilter.pipe(takeUntil(this.destory$)).subscribe(() => {\r\n            this.filterText = this.empty;\r\n            this.openFilterPanel = false;\r\n            this.dgs.onFilterTextChange(this.filterText);\r\n            this.cd.detectChanges();\r\n        });\r\n\r\n        this.filterChangeSubscription = this.dgs.onFilterChanged.pipe(takeUntil(this.destory$)).subscribe((n) => {\r\n            this.filterText = this.dfrs.convertFilterCondition2String(n);\r\n            if (!this.filterText) {\r\n                this.filterText = this.empty;\r\n            }\r\n\r\n            this.updateExpandState();\r\n            setTimeout(() => {\r\n                this.bindEvent();\r\n            }, 100);\r\n            if (!this.showExpand) {\r\n                this.openFilterPanel = false;\r\n            }\r\n            this.cd.detectChanges();\r\n            this.dgs.onFilterTextChange(this.filterText);\r\n        });\r\n\r\n        this.ngZone.runOutsideAngular(() => {\r\n\r\n            this.ro = new ResizeObserver(() => {\r\n                setTimeout(() => {\r\n                    this.updateExpandState();\r\n                    this.cd.detectChanges();\r\n                }, 100);\r\n            });\r\n\r\n            this.ro.observe(this.el.nativeElement.closest('div.f-datagrid'));\r\n        });\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.destory$.next();\r\n        this.destory$.complete();\r\n        this.ro.disconnect();\r\n        if (this.filterChangeSubscription) {\r\n            this.filterChangeSubscription.unsubscribe();\r\n            this.filterChangeSubscription = null;\r\n        }\r\n        if (this.windowResizeHandler) {\r\n            this.windowResizeHandler();\r\n            this.windowResizeHandler = null;\r\n        }\r\n    }\r\n\r\n    private bindEvent() {\r\n        this.ngZone.runOutsideAngular(() => {\r\n            const filterFields = this.filterToolbarRef.nativeElement.querySelectorAll('.filter-field');\r\n            this.bindFilterFieldHandler(filterFields);\r\n\r\n            const dropdownFilterFields = this.filterPanelTextRef.nativeElement.querySelectorAll('.filter-field');\r\n            this.bindFilterFieldHandler(dropdownFilterFields, false);\r\n        });\r\n    }\r\n\r\n    private bindFilterFieldHandler(filterFields: any, hidePanel = true) {\r\n        if (filterFields && filterFields.length) {\r\n            filterFields.forEach(ff => {\r\n                this.render.listen(ff, 'click', () => {\r\n                    this.removeFilterField(ff, hidePanel);\r\n                });\r\n            });\r\n        }\r\n    }\r\n\r\n    private removeFilterField(ff: any, hidePanel = true) {\r\n        const field = ff.classList[1].replace('filter-column-', '');\r\n        delete this.dg.conditions[field];\r\n        this.dfrs.removeFilterField(field);\r\n        ff.remove();\r\n        if (hidePanel) {\r\n            this.openFilterPanel = false;\r\n            this.updateExpandState();\r\n        }\r\n    }\r\n\r\n    private updateExpandState() {\r\n        this.showExpand = this.isShowExpand();\r\n    }\r\n\r\n    isShowExpand() {\r\n\r\n        if (this.filterTextContainerWidth > this.filterTextRealWidth) {\r\n            return false;\r\n        } else if (this.filterTextRealWidth > this.filterTextContainerWidth) {\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    clearFilter($event) {\r\n        this.filterText = this.empty;\r\n        this.dgs.onClearFilter();\r\n        this.dgs.onFilterChanged.emit({});\r\n        return false;\r\n    }\r\n\r\n    refreshFilter($event) {\r\n        this.dg.filterData();\r\n        return false;\r\n    }\r\n\r\n    showFilterTextPanel() {\r\n        this.openFilterPanel = !this.openFilterPanel;\r\n        this.cd.detectChanges();\r\n    }\r\n}\r\n","import { Directive, ElementRef, Renderer2, Injector, Input, OnInit } from '@angular/core';\r\nimport { DataColumn, HeaderStyleFn } from './../../types/data-column';\r\n\r\n@Directive({\r\n    selector: '[header-style]',\r\n    exportAs: 'HeaderStyler'\r\n})\r\nexport class HeaderStyleDirective implements OnInit {\r\n    @Input('header-style') column: DataColumn;\r\n\r\n    constructor(private el: ElementRef, private render: Renderer2, private inject: Injector) {}\r\n\r\n    ngOnInit() {\r\n        this.renderCss2Element();\r\n    }\r\n\r\n    private renderCss2Element() {\r\n        if (this.column && this.column.headerStyler) {\r\n            const styler = this.column.headerStyler;\r\n            const dom = this.el.nativeElement;\r\n            const st = typeof this.column.headerStyler;\r\n\r\n            if (st === 'string') {\r\n                this.render.addClass(this.el.nativeElement, styler as string);\r\n            } else if (st === 'function') {\r\n                const r = (this.column.headerStyler as HeaderStyleFn)(this.column);\r\n                if (r.cls) {\r\n                    this.render.addClass(this.el.nativeElement, r.cls);\r\n                }\r\n                if (r.style) {\r\n                    this.renderStyle(dom, r.style);\r\n                }\r\n            } else if (st === 'object' && Object.keys(st).length) {\r\n                this.renderStyle(dom, styler);\r\n            }\r\n        }\r\n    }\r\n\r\n    private renderStyle(targetEl: any, styleObj: any) {\r\n        const cssKeys = Object.keys(styleObj);\r\n        cssKeys.forEach(k => {\r\n            this.render.setStyle(targetEl, k, styleObj[k]);\r\n        });\r\n    }\r\n\r\n}\r\n","import { DatagridComponent } from './../../datagrid.component';\r\nimport { Component, OnInit, Injector, Input } from '@angular/core';\r\n\r\n\r\n/**\r\n * èªå¨é«åº¦\r\n * ç¦ç¨åé¡µï¼ç¦ç¨åºå®è¡¨å¤´ï¼ç¦ç¨èæå è½½ï¼ç¦ç¨åºå®å\r\n * æ¯æååæ ¼ç¼è¾, æ¯ææåº, æ¯ææå¨åå®½\r\n */\r\n\r\n@Component({\r\n    selector: 'auto-height',\r\n    templateUrl: './auto-height.component.html'\r\n})\r\nexport class AutoHeightComponent implements OnInit {\r\n\r\n    @Input() columns: any[];\r\n    @Input() columnsGroup: any;\r\n    @Input() data: any;\r\n\r\n    constructor(public dg: DatagridComponent, private inject: Injector) { }\r\n\r\n    ngOnInit(): void { }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { DatagridFacadeService } from '../services/datagrid-facade.service';\r\n\r\n@Pipe({name: 'rowIsSelected', pure: false})\r\nexport class RowIsSelectedPipe implements PipeTransform {\r\n    constructor(private dfs: DatagridFacadeService) {}\r\n    transform(rowData: any, selections?: any[]): any {\r\n        if (!rowData) {\r\n            return false;\r\n        }\r\n        const id = this.dfs.primaryId(rowData);\r\n\r\n        if (id) {\r\n            return this.dfs.isRowSelected(id, selections);\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { DatagridFacadeService } from './../services/datagrid-facade.service';\r\n\r\n@Pipe({name: 'rowIsChecked', pure: false})\r\nexport class RowIsCheckedPipe implements PipeTransform {\r\n    constructor(private dfs: DatagridFacadeService) {}\r\n    transform(rowData: any, checkeds: any[]): any {\r\n        if (!rowData) {\r\n            return false;\r\n        }\r\n\r\n        const id = this.dfs.primaryId(rowData);\r\n        if (id) {\r\n            return this.dfs.isRowChecked(id, checkeds);\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n}\r\n","import { DatagridComponent } from '../../datagrid.component';\r\nimport { Component, Directive, OnInit, Injector, Input, ElementRef, AfterViewInit, OnChanges, SimpleChanges, DoCheck } from '@angular/core';\r\n\r\n@Directive({\r\n    selector: '[auto-height]',\r\n})\r\nexport class AutoHeightDirective implements OnInit, AfterViewInit, OnChanges, DoCheck {\r\n\r\n    @Input('auto-height') autoHeight = false;\r\n    /** æ°æ®åè¡¨æ»é«åº¦ */\r\n    @Input() wheelHeight: number;\r\n\r\n    private _timer = null;\r\n\r\n    constructor(public dg: DatagridComponent, private inject: Injector, private el: ElementRef) { }\r\n\r\n    ngOnInit(): void {\r\n        // this.updateDatagridHeight(this.wheelHeight);\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        this.updateDatagridHeight(this.wheelHeight);\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (changes.wheelHeight) {\r\n            this.updateDatagridHeight(this.wheelHeight);\r\n        }\r\n    }\r\n\r\n    ngDoCheck() {\r\n        // this.checkScrollbarPosition();\r\n    }\r\n\r\n    private updateDatagridHeight(wheelHeight) {\r\n        if (this.el && this.el.nativeElement && this.el.nativeElement.parentElement) {\r\n            if (this.autoHeight) {\r\n                if (!wheelHeight) {\r\n                    wheelHeight = 240;\r\n\r\n                    if (!this.dg.ds || !this.dg.ds.rows || !this.dg.ds.rows.length) {\r\n                        wheelHeight = (!this.dg.emptyDataHeight || this.dg.emptyDataHeight < 0 ) ? 240 : this.dg.emptyDataHeight;\r\n                    }\r\n                }\r\n                let h =  parseInt(wheelHeight, 10);\r\n\r\n                if (this.dg.showHeader) {\r\n\r\n                    if (!this.dg.realHeaderHeight) {\r\n                        h += this.dg.setHeaderHeight();\r\n                    } else {\r\n                        h += this.dg.realHeaderHeight;\r\n                    }\r\n                }\r\n\r\n                if (this.dg.showFooter) {\r\n                    h += this.dg.footerHeight;\r\n                }\r\n\r\n                if (this.dg.pagination) {\r\n                    const ph = this.dg.pagerHeight || 40;\r\n                    h += ph;\r\n                }\r\n\r\n                if (this.dg.showFilterBar) {\r\n                    h += this.dg.filterBarHeight;\r\n                }\r\n\r\n                const wh =  `${wheelHeight}px`;\r\n\r\n                this.el.nativeElement.parentElement.style.height = wh;\r\n                this.el.nativeElement.parentElement.parentElement.style.height = wh;\r\n\r\n\r\n                if (this.dg.dgContainer) {\r\n\r\n                    const dgHeight = `${h}px`;\r\n                    // æ´æ°grid æå¤å±çé«åº¦\r\n                    this.dg.dgContainer.nativeElement.style.height = dgHeight;\r\n                    // farris-datagrid å¢å é«åº¦\r\n                    this.dg.el.nativeElement.style.height = dgHeight;\r\n\r\n                    this.dg.height = h;\r\n                } else {\r\n                    this.dg.el.nativeElement.querySelector('.f-datagrid').style.height = `${h}px`;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n","import { Directive, ElementRef, Injector, OnInit, NgZone, Renderer2, OnDestroy, HostListener } from '@angular/core';\r\nimport { DatagridComponent } from '../../datagrid.component';\r\nimport { TR_PREFIX } from '../../types/constant';\r\nimport { Utils } from '../../utils/utils';\r\n\r\n@Directive({\r\n    selector: '[row-dblclick]',\r\n})\r\nexport class DatagridRowDblClickDirective implements OnInit, OnDestroy {\r\n\r\n\r\n    constructor(private el: ElementRef, private injector: Injector, private ngZone: NgZone, private render: Renderer2,\r\n                public dg: DatagridComponent) {\r\n\r\n    }\r\n\r\n    ngOnInit() {\r\n\r\n    }\r\n\r\n    ngOnDestroy() {\r\n\r\n    }\r\n\r\n\r\n    @HostListener('dblclick', ['$event'])\r\n    dblclickRowEvent(event: any) {\r\n\r\n        const tr = event.target.closest('tr');\r\n\r\n        const rowid = tr.id.replace(TR_PREFIX, '').replace('_fixedright', '').replace('_fixedleft', '');\r\n        const rowIndex = tr.getAttribute('index');\r\n        const rowData = this.dg.dfs.findRow(rowid);\r\n\r\n        if (this.dg.disableRow) {\r\n            if (this.dg.disableRow(rowData.data, rowData.index)) {\r\n                event.stopPropagation();\r\n                return false;\r\n            }\r\n        }\r\n\r\n        if (this.dg.editable) {\r\n            if (this.dg.editMode === 'row' && this.dg.clickToEdit) {\r\n                this.dg.editRow(rowid);\r\n            } else {\r\n                this.dg.isSingleClick = false;\r\n                this.dg.dblclickRow.emit({ rowData, id: rowid, index: rowIndex, grid: this.dg, dblclick: true });\r\n            }\r\n        } else {\r\n            this.dg.dblclickRow.emit({ rowData, id: rowid, index: rowIndex, grid: this.dg,  dblclick: true });\r\n        }\r\n\r\n        event.stopPropagation();\r\n        event.preventDefault();\r\n    }\r\n}\r\n","import { Directive, ElementRef, Renderer2, Injector, Input, OnInit, AfterViewInit } from '@angular/core';\r\nimport { DatagridComponent } from '../../datagrid.component';\r\n\r\n@Directive({\r\n    selector: '[footer-cell-styler]',\r\n})\r\nexport class FooterCellStylerDirective implements OnInit, AfterViewInit {\r\n    @Input() column: any;\r\n    @Input() rowData: any;\r\n    @Input() rowIndex: any;\r\n    @Input() isGroupFooter = false;\r\n\r\n    constructor(private el: ElementRef, private render: Renderer2, private inject: Injector, public dg: DatagridComponent) { }\r\n\r\n\r\n    ngOnInit() {\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        if (this.isGroupFooter) {\r\n            this.setGroupFooterCellStyle(this.column);\r\n        } else {\r\n            this.buildCustomCellStyle(this.column, this.rowData);\r\n        }\r\n    }\r\n\r\n    private buildCustomCellStyle(column, rowData) {\r\n\r\n        const tr = this.el.nativeElement.parentNode;\r\n        if (!tr.id) {\r\n            tr.id = 'footer-row-' + this.dg.dfs.primaryId(rowData);\r\n        }\r\n\r\n        if (!this.el.nativeElement.id) {\r\n            this.el.nativeElement.id = 'footer-td_' + this.rowIndex + '_' + this.column.field;\r\n        }\r\n\r\n        if (column && column.footer && column.footer.styler) {\r\n            const _rd = rowData;\r\n            const styler = column.footer.styler;\r\n            const cs = styler(_rd[column.field], _rd);\r\n            if (cs && Object.keys(cs).length) {\r\n                this.dg.renderCustomStyle(cs, this.el.nativeElement);\r\n            } else {\r\n                this.dg.dgs.removeCssRule('#' + this.el.nativeElement.id);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    private setGroupFooterCellStyle(col: any) {\r\n        // åç»åè®¡è¡èªå®ä¹æ ·å¼ 20210909\r\n        if (col.groupFooter && col.groupFooter.styler) {\r\n            const val = this.dg.commonUtils.getValue(col.field, this.rowData);\r\n            const _customStyles = this.dg.dgs.getCustomStyle(col.groupFooter.styler, [val, this.rowData]);\r\n            if (_customStyles) {\r\n                this.dg.renderCustomCls(_customStyles.cls, this.el.nativeElement);\r\n                if (_customStyles.style) {\r\n                    Object.keys(_customStyles.style).forEach(n => {\r\n                        this.el.nativeElement.style[n] = _customStyles.style[n];\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class DragDropColumnService {\r\n    private initColumns;\r\n    constructor() {}\r\n\r\n    /** åç´ ä½ç½®è°æ´\r\n     * arr: æ°ç»\r\n     * newIndex: æ°ä½ç½®ç´¢å¼\r\n     * removedIndex: èä½ç½®ç´¢å¼\r\n     */\r\n    moveItem(arr, newIndex, removedIndex) {\r\n        const removedItem = arr.splice(removedIndex, 1);\r\n        arr.splice(newIndex, 0, ...removedItem);\r\n        return arr;\r\n    }\r\n\r\n    backupColumns(columns) {\r\n        this.initColumns = columns.map( cols => {\r\n            return cols.map( n => {\r\n                return {\r\n                    id: n.id,\r\n                    field: n.field\r\n                };\r\n            });\r\n        });\r\n    }\r\n}\r\n","\r\nimport { Directive, NgZone, Injector, Renderer2, ElementRef, AfterViewInit, Input, OnChanges, SimpleChanges, OnDestroy } from '@angular/core';\r\nimport { dropHandlers, smoothDnD as SmoothDnDForHeader, DropResult, ContainerOptions, constants } from '@farris/smooth-dnd';\r\nimport { DatagridComponent } from '../../datagrid.component';\r\nimport { DatagridHeaderComponent } from './datagrid-header.component';\r\nimport { DragDropColumnService } from './drag-drop-column.service';\r\n\r\n\r\nconst { wrapperClass, animationClass } = constants;\r\nSmoothDnDForHeader.dropHandler = dropHandlers.reactDropHandler().handler;\r\nSmoothDnDForHeader.wrapChild = false;\r\n\r\nexport interface DragStartEndInfo {\r\n    isSource: boolean;\r\n    payload: any;\r\n    willAcceptDrop: boolean;\r\n}\r\n\r\n@Directive({\r\n    selector: '[drag-column]',\r\n    providers: [\r\n        DragDropColumnService\r\n    ]\r\n})\r\nexport class DragColumnDirective implements AfterViewInit, OnChanges, OnDestroy {\r\n    private container: any;\r\n    @Input('drag-column') enableDrag = true;\r\n    @Input() groupName = '';\r\n\r\n    @Input() options: ContainerOptions = {\r\n        groupName: this.groupName,\r\n        orientation: 'horizontal',\r\n        behaviour: 'move',\r\n        dragHandleSelector: '.drag-column-bar',\r\n        dragClass: 'drag-column-moving',\r\n        dropPlaceholder: {\r\n            className: 'drop-group-field',\r\n        },\r\n        getGhostParent: () => {\r\n            return document.body;\r\n        },\r\n        getChildPayload: this.getChildPayload.bind(this),\r\n        shouldAcceptDrop: (sourceContainerOptions, payload) => {\r\n            if (typeof payload === 'number') {\r\n                return false;\r\n            }\r\n\r\n            if (sourceContainerOptions.groupName !== this.groupName) {\r\n                return false;\r\n            }\r\n\r\n            return !this.dg.isMultiHeader();\r\n        },\r\n        onDropReady: (dropResult: DropResult) => {\r\n            this.ngzone.run(() => {\r\n                this.onDropReady(dropResult);\r\n            });\r\n        },\r\n        onDrop: (dropResult: DropResult) => {\r\n            this.ngzone.run(() => {\r\n                this.onDrop(dropResult);\r\n            });\r\n        },\r\n        onDragEnter: () => {\r\n            this.ngzone.run(() => {\r\n                this.onDragEnter();\r\n            });\r\n        },\r\n        onDragStart: (info: DragStartEndInfo) => {\r\n            this.ngzone.run(() => {\r\n                this.onDragStart(info);\r\n            });\r\n        },\r\n        onDragEnd: (info: DragStartEndInfo) => {\r\n            this.ngzone.run(() => {\r\n                this.onDragEnd(info);\r\n            });\r\n        }\r\n    };\r\n\r\n    constructor(private ngzone: NgZone, private injector: Injector, private render: Renderer2,\r\n                private el: ElementRef, private header: DatagridHeaderComponent, private dg: DatagridComponent,\r\n                private dndSer: DragDropColumnService) { }\r\n\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (changes.enableDrag && !changes.enableDrag.isFirstChange()) {\r\n            if (this.enableDrag) {\r\n                this.initDnD();\r\n            } else {\r\n                this.disposeDnd();\r\n            }\r\n        }\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        this.initDnD();\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.disposeDnd();\r\n    }\r\n\r\n    private disposeDnd() {\r\n        if (this.container) {\r\n            this.container.dispose();\r\n            this.container = null;\r\n        }\r\n    }\r\n\r\n    private initDnD() {\r\n        if (this.dg.editable) {\r\n            return;\r\n        }\r\n        if (this.groupName === 'left' || this.groupName === 'right') {\r\n            const { left, right } = this.columnsGroup();\r\n            if (!left.length || !right.length || (right.length === 1 && right[0].field === '_datagrid-setting-control_')) {\r\n                return;\r\n            }\r\n        }\r\n\r\n\r\n        this.options.groupName = this.groupName;\r\n        this.disposeDnd();\r\n\r\n\r\n        if (this.enableDrag) {\r\n            this.container = SmoothDnDForHeader(\r\n                this.el.nativeElement,\r\n                this.options\r\n            );\r\n\r\n            this.dndSer.backupColumns(this.header.columns);\r\n        }\r\n    }\r\n\r\n    private getChildPayload(index) {\r\n        if (this.groupName === 'left') {\r\n            if (this.dg.showCheckbox) {\r\n                index--;\r\n            }\r\n            if (this.dg.showLineNumber) {\r\n                index--;\r\n            }\r\n        }\r\n\r\n        const groupColumns = this.columnsGroup();\r\n\r\n        if (this.groupName === 'left') {\r\n            return groupColumns.left.filter((n, i) => this.dg.columnIsVisible(n))[index];\r\n        }\r\n\r\n        return groupColumns.middle.filter((n, i) => this.dg.columnIsVisible(n))[index];\r\n    }\r\n\r\n    onDropReady(dropResult) {\r\n    }\r\n\r\n    private onDrop(dropResult: DropResult) {\r\n        const { addedIndex, payload, removedIndex } = dropResult;\r\n        if (addedIndex === null) {\r\n            return;\r\n        }\r\n\r\n        const groupColumns = this.columnsGroup();\r\n\r\n        const cols = this.dg.columns[0];\r\n        const currIndex = cols.findIndex(n => n.field === payload.field);\r\n\r\n        let newIndex = addedIndex;\r\n\r\n        const moveColumn = (columns: any) => {\r\n            if (columns) {\r\n                const targetColumn = columns.filter(n => n.visible || n.visible === undefined)[newIndex];\r\n                if (targetColumn) {\r\n                    const realTagetIndex = cols.findIndex(n => n.field === targetColumn.field);\r\n                    this.dg.columns[0] = this.dndSer.moveItem(this.dg.columns[0], realTagetIndex, currIndex);\r\n\r\n                    return true;\r\n                }\r\n            }\r\n\r\n            return false;\r\n        };\r\n\r\n        let columns = [];\r\n        if (this.groupName === 'left') {\r\n            if (this.dg.showCheckbox) {\r\n                newIndex--;\r\n            }\r\n            if (this.dg.showLineNumber) {\r\n                newIndex--;\r\n            }\r\n            columns = groupColumns.left;\r\n        } else if (this.groupName === 'center') {\r\n            columns = groupColumns.middle;\r\n        } else if (this.groupName === 'right') {\r\n            columns = groupColumns.right;\r\n        }\r\n\r\n        if (moveColumn(columns)) {\r\n            this.dg.columnsChanged(false);\r\n\r\n            if (this.dg.useControlPanel && this.dg.settingService) {\r\n                this.dg.settingService.saveUserConfig(this.dg.id);\r\n            }\r\n\r\n            this.dg.columnMoved.emit({ newColumns: this.dg.columns, grid: this.dg });\r\n        }\r\n    }\r\n\r\n    private onDragStart(info) {\r\n    }\r\n\r\n    private onDragEnd(info) {\r\n    }\r\n\r\n\r\n    private onDragEnter() {\r\n    }\r\n\r\n\r\n    private columnsGroup() {\r\n        const leftColumns = this.dg.columns[0].filter(n => n.fixed === 'left');\r\n        const rightColumns = this.dg.columns[0].filter(n => n.fixed === 'right');\r\n        const middleColumns = this.dg.columns[0].filter(n => n.fixed !== 'right' && n.fixed !== 'left');\r\n\r\n        return {\r\n            left: leftColumns,\r\n            right: rightColumns,\r\n            middle: middleColumns\r\n        };\r\n    }\r\n}\r\n\r\n","\r\nimport { Directive, NgZone, Injector, Renderer2, ElementRef, AfterViewInit, Input, OnDestroy } from '@angular/core';\r\nimport { dropHandlers, smoothDnD, DropResult, ContainerOptions, constants } from '@farris/smooth-dnd';\r\nimport { DatagridComponent } from './../../datagrid.component';\r\nimport { DragStartEndInfo } from './datagrid-drag-column.directive';\r\nimport { DragDropColumnService } from './drag-drop-column.service';\r\n\r\n\r\nsmoothDnD.dropHandler = dropHandlers.reactDropHandler().handler;\r\nsmoothDnD.wrapChild = false;\r\nconst { wrapperClass, animationClass } = constants;\r\n\r\n@Directive({\r\n    selector: '[drop-column]',\r\n    providers: [\r\n        DragDropColumnService\r\n    ]\r\n})\r\nexport class DropColumnDirective implements AfterViewInit, OnDestroy {\r\n    @Input() options: ContainerOptions = {\r\n        orientation: 'horizontal',\r\n        behaviour: 'move',\r\n        dragHandleSelector: '.group-field',\r\n        dropPlaceholder: {\r\n            className: 'drop-group-field',\r\n        },\r\n        getGhostParent: () => {\r\n            return document.body;\r\n        },\r\n        shouldAcceptDrop: (sourceContainerOptions, payload) => {\r\n            if (typeof payload === 'number') {\r\n                return true;\r\n            }\r\n\r\n            if (this.getGroupFields().length < 3) {\r\n                return payload.allowGrouping === undefined || payload.allowGrouping;\r\n            }\r\n            return false;\r\n        },\r\n        getChildPayload: (index) => {\r\n            return index;\r\n        },\r\n        // dragClass: 'drag-column-moving',\r\n        onDropReady: (dropResult: DropResult) => {\r\n            this.ngzone.run(() => {\r\n                this.onDropReady(dropResult);\r\n            });\r\n        },\r\n        onDrop: (dropResult: DropResult) => {\r\n            this.ngzone.run(() => {\r\n                this.onDrop(dropResult);\r\n            });\r\n        },\r\n        onDragEnter: () => {\r\n            this.ngzone.run(() => {\r\n                this.onDragEnter();\r\n            });\r\n        },\r\n        onDragStart: (info: DragStartEndInfo) => {\r\n            this.ngzone.run(() => {\r\n                this.onDragStart(info);\r\n            });\r\n        },\r\n        onDragEnd: (info: DragStartEndInfo) => {\r\n            this.ngzone.run(() => {\r\n                this.onDragEnd(info);\r\n            });\r\n        }\r\n    };\r\n\r\n    private container: any;\r\n    constructor(private ngzone: NgZone, private injector: Injector, private render: Renderer2, private el: ElementRef,\r\n                private dg: DatagridComponent, private dndSer: DragDropColumnService) { }\r\n\r\n    ngAfterViewInit() {\r\n        this.initDnD();\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.disposeDnd();\r\n    }\r\n\r\n    private disposeDnd() {\r\n        if (this.container) {\r\n            this.container.dispose();\r\n            this.container = null;\r\n        }\r\n    }\r\n\r\n    private initDnD() {\r\n        this.disposeDnd();\r\n        if (this.dg.showRowGroupPanel) {\r\n            this.container = smoothDnD(\r\n                this.el.nativeElement,\r\n                this.options\r\n            );\r\n        }\r\n    }\r\n\r\n    private onDropReady(dropResult) {\r\n    }\r\n\r\n    private getGroupFields() {\r\n        return this.dg.groupField ? this.dg.groupField.split(',') : [];\r\n    }\r\n\r\n\r\n    private onDrop(dropResult: DropResult) {\r\n        const { addedIndex, payload, removedIndex } = dropResult;\r\n\r\n        if (addedIndex === null) {\r\n            return;\r\n        }\r\n\r\n        const newGroupFields = this.getGroupFields();\r\n\r\n        if (removedIndex === null) {\r\n            if (!newGroupFields.some((v) => v === payload.field)) {\r\n                // newGroupFields.splice(0, 0, payload.field);\r\n                newGroupFields.push(payload.field);\r\n            }\r\n        } else {\r\n            this.dndSer.moveItem(newGroupFields, addedIndex, removedIndex);\r\n        }\r\n        this.dg.groupField = newGroupFields.join(',');\r\n        // this.dg.toggleVisibleColumn([this.dg.groupField], false);\r\n\r\n        if (this.dg.useControlPanel && this.dg.settingService) {\r\n            this.dg.checkSettingHttp();\r\n            this.dg.settingService.saveUserConfig(this.dg.id).subscribe( () => {\r\n                this.dg.columnsChanged();\r\n            });\r\n        } else {\r\n            this.dg.columnsChanged();\r\n        }\r\n\r\n        this.dg.groupFieldChange.emit({ newGroupField: this.dg.groupField, grid: this.dg });\r\n    }\r\n\r\n    private onDragStart(info) {\r\n    }\r\n\r\n    private onDragEnd(info) {\r\n    }\r\n\r\n\r\n    private onDragEnter() {\r\n    }\r\n}\r\n","import { Directive, ElementRef, Renderer2, Injector, Input, OnInit, AfterViewInit } from '@angular/core';\r\nimport { DatagridComponent } from '../../datagrid.component';\r\n\r\n@Directive({\r\n    selector: '[group-footer-row-styler]',\r\n})\r\nexport class GroupFooterRowStylerDirective implements OnInit, AfterViewInit {\r\n    @Input() column: any;\r\n    @Input('group-footer-row-styler') rowData: any;\r\n    @Input() rowIndex: any;\r\n\r\n    constructor(private el: ElementRef, private render: Renderer2, private inject: Injector, public dg: DatagridComponent) { }\r\n\r\n\r\n    ngOnInit() {\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        this.buildCustomGroupFooterRowStyle(this.rowData);\r\n    }\r\n\r\n    private buildCustomGroupFooterRowStyle(rowData) {\r\n\r\n        if (this.dg.groupFooterStyler) {\r\n\r\n            const cs = this.dg.dgs.getCustomStyle(this.dg.groupFooterStyler, [rowData]);\r\n            if (cs) {\r\n                this.dg.renderCustomCls(cs.cls, this.el.nativeElement);\r\n                if (cs.style) {\r\n                    Object.keys(cs.style).forEach(n => {\r\n                        this.el.nativeElement.style[n] = cs.style[n];\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({\r\n    name: 'cellReadonly'\r\n})\r\nexport class CellIsReadonlyPipe implements PipeTransform {\r\n    transform(col: any, ...args: any[]): any {\r\n        return this.isReadonly(col, args[0], args[1]);\r\n    }\r\n\r\n    private isReadonly(col, rowData, dg) {\r\n        if (dg.editable) {\r\n            // åä¸åå¹¶çååæ ¼ä¸åè®¸ç¼è¾\r\n            if (dg.mergeCell && dg.mergeFields.indexOf(col.field) > -1) {\r\n                return true;\r\n            }\r\n            return this.getReadonlyValue(col, rowData);\r\n        } else {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    private getReadonlyValue(col, rowData) {\r\n        if (col.readonly !== undefined) {\r\n            if (typeof col.readonly === 'boolean') {\r\n                return col.readonly;\r\n            } else if (typeof col.readonly === 'function') {\r\n                return col.readonly(rowData);\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n}\r\n","\r\n\r\n\r\n/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @Date: 2019-08-06 07:43:53\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-10-28 09:28:28\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\nimport { NgModule, ModuleWithProviders, Provider, ErrorHandler } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { CommonModule } from '@angular/common';\r\nimport { HttpClientModule } from '@angular/common/http';\r\n\r\nimport { DataColumnModule } from '@farris/ui-common/column';\r\nimport { LocaleModule } from '@farris/ui-locale';\r\nimport { NotifyModule } from '@farris/ui-notify';\r\nimport { PaginationModule } from '@farris/ui-pagination';\r\nimport { SimpleFilterModule } from '@farris/ui-filter';\r\n// import { FilterPanelModule, FilterPanelComponent } from '@farris/ui-filter-panel';\r\n\r\nimport { DatagridSmartFilterModule } from './plugins/smart-filter/datagrid-smart-filter.module';\r\n\r\nimport { DatagridComponent } from './datagrid.component';\r\nimport { NgxPaginationModule } from './pagination/ngx-pagination.module';\r\nimport { DatagridPagerComponent } from './components/pager/pager.component';\r\nimport { DataGridLoadingComponent } from './components/loading.component';\r\nimport { DatagridHeaderComponent, FilterRowCreateDirective } from './components/header/datagrid-header.component';\r\nimport { DatagridCellEditableDirective } from './components/body/datagrid-cell-editable.directive';\r\nimport { DatagridCellComponent } from './components/body/datagrid-cell.component';\r\nimport { DatagridRowDirective } from './components/body/datagrid-row.directive';\r\nimport { DatagridBodyComponent } from './components/body/datagrid-body.component';\r\nimport { DatagridCellEditorDirective } from './components/columns/column-cell-edit.directive';\r\nimport { DatagridColumnDirective } from './components/columns/datagrid-column.directive';\r\nimport { GridCellEditorDirective } from './components/editors/cell-editor.directive';\r\nimport { ScrollbarModule } from './scrollbar/scrollbar.module';\r\nimport { ScrollbarConfigInterface, SCROLLBAR_CONFIG } from './scrollbar/scrollbar.interfaces';\r\n\r\nimport { DatagridRowHoverDirective } from './components/body/datagrid-row-hover.directive';\r\nimport { DatagridRowsComponent } from './components/body/datagrid-rows.component';\r\nimport { DatagridCheckboxComponent } from './components/checkbox/datagrid-checkbox.component';\r\nimport { DatagridHeaderCheckboxComponent } from './components/checkbox/datagrid-header-checkbox.component';\r\nimport { DatagridResizeColumnDirective } from './components/header/datagrid-resize-column.directive';\r\nimport { DatagridFooterComponent } from './components/footer/datagrid-footer.component';\r\nimport { SafePipe } from './utils/safe.pipe';\r\nimport { FormatCellDataPipe } from './utils/format-cell-data.pipe';\r\nimport { RowDataIdPipe } from './utils/rowid.pipe';\r\nimport { FormatGroupRowPipe } from './utils/format-group-row.pipe';\r\nimport { FixedLeftRowsComponent } from './components/body/fixed-left-rows.component';\r\n\r\n/** å¼å®¹ä¸èçæ¬ */\r\nimport { TextboxEditorComponent } from './components/editors/text-editor.component';\r\n\r\nimport { ReplaceXPipe } from './utils/rexplaceX.pipe';\r\nimport { DatagridGroupRowDirective } from './components/body/datagrid-grouprow.directive';\r\nimport { ShowRequiredStarPipe } from './utils/show-required-label.pipe';\r\nimport { DisableRowPipe } from './utils/disable-row.pipe';\r\nimport { SelectedRowPipe } from './utils/select-row.pipe';\r\nimport { FieldValuePipe } from './utils/field-value.pipe';\r\nimport { DatagridCellTooltipDirective } from './components/tooltip/cell-tooltip.directive';\r\nimport { CellTootipMessagePipe } from './components/tooltip/tip-message.pipe';\r\nimport { DatagridFilterToolbarComponent } from './components/filter-toolbar/filter-toolbar.component';\r\nimport { HeaderStyleDirective } from './components/header/header-style.directive';\r\nimport { AutoHeightComponent } from './components/auto-height/auto-height.component';\r\nimport { RowIsSelectedPipe } from './utils/row-is-selected.pipe';\r\nimport { RowIsCheckedPipe } from './utils/row-is-checked.pipe';\r\nimport { DatagridErrorHandler } from './datagrid-error-handler';\r\nimport { AutoHeightDirective } from './components/auto-height/auto-height.directive';\r\nimport { ValidatorMessagerService } from './services/validator-messager.service';\r\nimport { PagerSelectedListComponent } from './components/pager/selected-list/selected-list.component';\r\nimport { SelectedItemPipe } from './components/pager/selected-item.pipe';\r\nimport { DatagridRowDblClickDirective } from './components/body/datagrid-row-dblclick.directive';\r\nimport { FooterCellStylerDirective } from './components/footer/datagrid-footer-cell.styler.directive';\r\nimport { DragColumnDirective } from './components/header/datagrid-drag-column.directive';\r\nimport { DropColumnDirective } from './components/header/datagrid-drop-column.directive';\r\nimport { SmartFilterToolbarComponent } from './components/filter-toolbar/smart-filter-toolbar.component';\r\n\r\nimport { FarrisContextMenuModule } from '@farris/ui-context-menu';\r\nimport { GroupFooterRowStylerDirective } from './components/body/datagrid-group-footer-styler.directive';\r\nimport { CellIsReadonlyPipe } from './utils/cell-readonly.pipe';\r\n\r\nconst DEFAULT_PERFECT_SCROLLBAR_CONFIG: ScrollbarConfigInterface = {\r\n    minScrollbarLength: 20\r\n};\r\n\r\n@NgModule({\r\n    imports: [\r\n        CommonModule,\r\n        FormsModule,\r\n        ReactiveFormsModule,\r\n        HttpClientModule,\r\n        PaginationModule,\r\n        NgxPaginationModule,\r\n        ScrollbarModule,\r\n        LocaleModule.forRoot(),\r\n        DataColumnModule.forRoot(),\r\n        NotifyModule.forRoot(),\r\n        SimpleFilterModule,\r\n        DatagridSmartFilterModule,\r\n        FarrisContextMenuModule\r\n    ],\r\n    declarations: [\r\n        SafePipe,\r\n        FormatCellDataPipe,\r\n        RowDataIdPipe,\r\n        FormatGroupRowPipe,\r\n        ShowRequiredStarPipe,\r\n        FieldValuePipe,\r\n        ReplaceXPipe,\r\n        DisableRowPipe,\r\n        SelectedRowPipe,\r\n        CellIsReadonlyPipe,\r\n        CellTootipMessagePipe,\r\n        DatagridComponent,\r\n        DatagridHeaderComponent,\r\n        DatagridFooterComponent,\r\n        DatagridResizeColumnDirective,\r\n        DatagridCellEditableDirective,\r\n        DatagridCellComponent,\r\n        DatagridRowDirective,\r\n        DatagridBodyComponent,\r\n        DatagridPagerComponent,\r\n        DatagridCellEditorDirective,\r\n        DatagridColumnDirective,\r\n        DatagridRowsComponent,\r\n        FixedLeftRowsComponent,\r\n        DatagridRowHoverDirective,\r\n        DataGridLoadingComponent,\r\n        DatagridCheckboxComponent,\r\n        DatagridHeaderCheckboxComponent,\r\n        GridCellEditorDirective,\r\n        TextboxEditorComponent,\r\n        DatagridGroupRowDirective,\r\n        DatagridCellTooltipDirective,\r\n        DatagridFilterToolbarComponent,\r\n        HeaderStyleDirective,\r\n        AutoHeightDirective,\r\n        AutoHeightComponent,\r\n        RowIsSelectedPipe,\r\n        RowIsCheckedPipe,\r\n        SelectedItemPipe,\r\n        PagerSelectedListComponent,\r\n        DatagridRowDblClickDirective,\r\n        FooterCellStylerDirective,\r\n        DragColumnDirective,\r\n        DropColumnDirective,\r\n        FilterRowCreateDirective,\r\n        SmartFilterToolbarComponent,\r\n        GroupFooterRowStylerDirective,\r\n    ],\r\n    providers: [\r\n        { provide: ErrorHandler, useClass: DatagridErrorHandler },\r\n        {\r\n            provide: SCROLLBAR_CONFIG,\r\n            useValue: DEFAULT_PERFECT_SCROLLBAR_CONFIG\r\n        },\r\n        ValidatorMessagerService\r\n    ],\r\n    exports: [\r\n        SafePipe,\r\n        DatagridComponent,\r\n        DatagridHeaderComponent,\r\n        DatagridColumnDirective,\r\n        DatagridCellEditorDirective,\r\n        DatagridCellEditableDirective,\r\n        DatagridRowHoverDirective,\r\n        DatagridResizeColumnDirective,\r\n        TextboxEditorComponent,\r\n        FormatCellDataPipe,\r\n        RowDataIdPipe,\r\n        ReplaceXPipe,\r\n        FieldValuePipe,\r\n        CellTootipMessagePipe,\r\n        ShowRequiredStarPipe,\r\n        DatagridCellTooltipDirective,\r\n        DatagridFilterToolbarComponent,\r\n        RowIsSelectedPipe,\r\n        RowIsCheckedPipe,\r\n        DatagridRowDblClickDirective,\r\n        FooterCellStylerDirective,\r\n        DragColumnDirective,\r\n        DropColumnDirective,\r\n        FilterRowCreateDirective,\r\n        SmartFilterToolbarComponent,\r\n        DatagridSmartFilterModule,\r\n        GroupFooterRowStylerDirective,\r\n        FarrisContextMenuModule,\r\n        CellIsReadonlyPipe\r\n    ],\r\n    entryComponents: [\r\n        // FilterPanelComponent\r\n    ]\r\n})\r\nexport class DatagridModule {\r\n    static forRoot(editors?: Provider[]): ModuleWithProviders {\r\n        return {\r\n            ngModule: DatagridModule,\r\n            providers: editors || []\r\n        };\r\n    }\r\n}\r\n"],"names":["InjectionToken","bindCallback","of","BehaviorSubject","Subject","EventEmitter","filter","map","switchMap","distinctUntilChanged","cloneDeep","flatten","tslib_1.__spread","groupBy","isPlainObject","BigNumber","Injectable","HttpClient","debounceTime","tslib_1.__values","IdService","ddvm","Compare","LocaleService","Injector","NgModule","CommonModule","isPlatformBrowser","fromEvent","takeUntil","auditTime","Directive","NgZone","KeyValueDiffers","ElementRef","Inject","PLATFORM_ID","Optional","Input","Output","merge","mapTo","Component","ViewEncapsulation","ChangeDetectorRef","HostBinding","ViewChild","TemplateRef","ContentChild","Renderer2","delay","ColumnFormatService","CommonUtils","FarrisComponentInstanceService","DebugService","ChangeDetectionStrategy","ApplicationRef","DomSanitizer","ContentChildren","HostListener","FilterPanelService","FilterPanelModule","LocaleModule","LOCALE_ID","Pipe","forwardRef","FormGroup","Validators","FormBuilder","Self","ComponentFactoryResolver","ViewContainerRef","noop","NotifyService","SmoothDnDForHeader","dropHandlers","smoothDnD","wrapperClass","animationClass","FormsModule","ReactiveFormsModule","HttpClientModule","PaginationModule","DataColumnModule","NotifyModule","SimpleFilterModule","FarrisContextMenuModule","ErrorHandler"],"mappings":"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"}