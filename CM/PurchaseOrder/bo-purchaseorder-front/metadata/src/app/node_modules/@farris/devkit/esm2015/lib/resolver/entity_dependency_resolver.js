import { Injectable } from '@angular/core';
import { Repository } from '../repository/index';
import { ExpressionUtil } from '../utils/expression_util';
import { ENTITY_TEMPLATE } from './types';
export class EntityDependencyResolver {
    constructor(repository) {
        this.repository = repository;
        this.entityTypeInfo = this.repository && this.repository.entityTypeInfo || null;
    }
    /**
     * 解析用户表达式中的实体依赖
     * @param expr 用户配置的完整表达式
     * @returns
     */
    resolve(expr) {
        const groupFunctionDependencies = ExpressionUtil.getGroupFunctionDependency(expr, this.repository.entityTypeInfo);
        const entityDependencies = this.getEntityDependency(expr);
        // 去除错误的到子表的依赖
        if (groupFunctionDependencies && groupFunctionDependencies.length > 0 && entityDependencies && entityDependencies.length > 0) {
            groupFunctionDependencies.forEach((dep) => {
                const index = entityDependencies.findIndex(item => dep.startsWith(item));
                if (index !== -1) {
                    entityDependencies.splice(index, 1);
                }
            });
        }
        // 去重
        const merged = [...groupFunctionDependencies, ...entityDependencies];
        const deps = [...new Set(merged)];
        return deps;
    }
    /**
     * 获取合法的实体属性表达式
     * @param entityPropertyExpression 实体属性表达式
     * @returns
     */
    getValidEntityPropertyExpression(entityPropertyExpression) {
        const propPaths = entityPropertyExpression.split('.');
        let propInfo = null;
        try {
            propInfo = this.entityTypeInfo.getPropInfoByPath(propPaths);
        }
        catch (e) { }
        if (!propInfo) {
            if (propPaths.length > 1) {
                propPaths.pop();
                return this.getValidEntityPropertyExpression(propPaths.join('.'));
            }
            else {
                return null;
            }
        }
        else {
            return entityPropertyExpression.split('.');
        }
    }
    /**
     * 获取所有实体依赖
     * @param expr 表达式字符串
     * @returns
     */
    getEntityDependency(expr) {
        const deps = [];
        if (this.entityTypeInfo) {
            // 使用正则匹配出所有实体
            const regex = new RegExp(`[\\'\\"]?\\s*(${this.entityTypeInfo.entityInfo.nodeCode}|${this.entityTypeInfo.entityInfo.originalCode})[\\.\\[\\]a-zA-Z0-9_]+\\s*[\\'\\"]?`, 'g');
            const entityPropertyExpressions = expr.match(regex);
            if (Array.isArray(entityPropertyExpressions) && entityPropertyExpressions.length > 0) {
                // 解析出所有实体相关的字符串，以主实体名字开头，包含主实体属性或子表
                entityPropertyExpressions.forEach((item) => {
                    if (item.indexOf('.') === -1) {
                        return;
                    }
                    // 去空格
                    item = item.trim().replace(/\"/g, '');
                    const paths = ExpressionUtil.convertToNodeCode(item, this.repository.entityTypeInfo);
                    item = paths.join('.');
                    // 截去主实体及点
                    item = item.substr(item.indexOf('.') + 1);
                    const dep = this.getValidEntityPropertyExpression(item);
                    if (dep && Array.isArray(dep) && dep.length > 0) {
                        // 此处必须加上主实体的名字来区分依赖的是实体还是其他类型的数据
                        dep.splice(0, 0, ENTITY_TEMPLATE);
                        deps.push(dep.join('/'));
                    }
                });
            }
        }
        else {
        }
        return deps;
    }
}
EntityDependencyResolver.decorators = [
    { type: Injectable }
];
/** @nocollapse */
EntityDependencyResolver.ctorParameters = () => [
    { type: Repository }
];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZW50aXR5X2RlcGVuZGVuY3lfcmVzb2x2ZXIuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL2RldmtpdC8iLCJzb3VyY2VzIjpbImxpYi9yZXNvbHZlci9lbnRpdHlfZGVwZW5kZW5jeV9yZXNvbHZlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRTNDLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUNqRCxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sMEJBQTBCLENBQUM7QUFDMUQsT0FBTyxFQUFFLGVBQWUsRUFBOEIsTUFBTSxTQUFTLENBQUM7QUFHdEUsTUFBTSxPQUFPLHdCQUF3QjtJQUVuQyxZQUFvQixVQUEyQjtRQUEzQixlQUFVLEdBQVYsVUFBVSxDQUFpQjtRQUM3QyxJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQyxVQUFVLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxjQUFjLElBQUksSUFBSSxDQUFDO0lBQ2xGLENBQUM7SUFDRDs7OztPQUlHO0lBQ0ksT0FBTyxDQUFDLElBQVk7UUFDekIsTUFBTSx5QkFBeUIsR0FBRyxjQUFjLENBQUMsMEJBQTBCLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsY0FBYyxDQUFDLENBQUM7UUFDbEgsTUFBTSxrQkFBa0IsR0FBRyxJQUFJLENBQUMsbUJBQW1CLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDMUQsY0FBYztRQUNkLElBQUkseUJBQXlCLElBQUkseUJBQXlCLENBQUMsTUFBTSxHQUFHLENBQUMsSUFBSSxrQkFBa0IsSUFBSSxrQkFBa0IsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO1lBQzVILHlCQUF5QixDQUFDLE9BQU8sQ0FBQyxDQUFDLEdBQVcsRUFBRSxFQUFFO2dCQUNoRCxNQUFNLEtBQUssR0FBRyxrQkFBa0IsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLEVBQUUs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QyxPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksR0FBRyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7d0JBQy9DLGlDQUFpQzt3QkFDakMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLGVBQWUsQ0FBQyxDQUFDO3dCQUNsQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztxQkFDMUI7Z0JBQ0gsQ0FBQyxDQUFDLENBQUM7YUFDSjtTQUNGO2FBQU07U0FDTjtRQUNELE9BQU8sSUFBSSxDQUFDO0lBQ2QsQ0FBQzs7O1lBcEZGLFVBQVU7Ozs7WUFKRixVQUFVIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBEYXRhVHlwZUluZm8gfSBmcm9tICcuLi9jb3JlL2luZGV4JztcclxuaW1wb3J0IHsgUmVwb3NpdG9yeSB9IGZyb20gJy4uL3JlcG9zaXRvcnkvaW5kZXgnO1xyXG5pbXBvcnQgeyBFeHByZXNzaW9uVXRpbCB9IGZyb20gJy4uL3V0aWxzL2V4cHJlc3Npb25fdXRpbCc7XHJcbmltcG9ydCB7IEVOVElUWV9URU1QTEFURSwgR1JPVVBfRlVOQ1RJT05TLCBJUmVzb2x2ZXIgfSBmcm9tICcuL3R5cGVzJztcclxuXHJcbkBJbmplY3RhYmxlKClcclxuZXhwb3J0IGNsYXNzIEVudGl0eURlcGVuZGVuY3lSZXNvbHZlciBpbXBsZW1lbnRzIElSZXNvbHZlciB7XHJcbiAgcHJpdmF0ZSBlbnRpdHlUeXBlSW5mbzogRGF0YVR5cGVJbmZvO1xyXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgcmVwb3NpdG9yeTogUmVwb3NpdG9yeTxhbnk+KSB7XHJcbiAgICB0aGlzLmVudGl0eVR5cGVJbmZvID0gdGhpcy5yZXBvc2l0b3J5ICYmIHRoaXMucmVwb3NpdG9yeS5lbnRpdHlUeXBlSW5mbyB8fCBudWxsO1xyXG4gIH1cclxuICAvKipcclxuICAgKiDop6PmnpDnlKjmiLfooajovr7lvI/kuK3nmoTlrp7kvZPkvp3otZZcclxuICAgKiBAcGFyYW0gZXhwciDnlKjmiLfphY3nva7nmoTlrozmlbTooajovr7lvI9cclxuICAgKiBAcmV0dXJucyBcclxuICAgKi9cclxuICBwdWJsaWMgcmVzb2x2ZShleHByOiBzdHJpbmcpOiBzdHJpbmdbXSB7XHJcbiAgICBjb25zdCBncm91cEZ1bmN0aW9uRGVwZW5kZW5jaWVzID0gRXhwcmVzc2lvblV0aWwuZ2V0R3JvdXBGdW5jdGlvbkRlcGVuZGVuY3koZXhwciwgdGhpcy5yZXBvc2l0b3J5LmVudGl0eVR5cGVJbmZvKTtcclxuICAgIGNvbnN0IGVudGl0eURlcGVuZGVuY2llcyA9IHRoaXMuZ2V0RW50aXR5RGVwZW5kZW5jeShleHByKTtcclxuICAgIC8vIOWOu+mZpOmUmeivr+eahOWIsOWtkOihqOeahOS+nei1llxyXG4gICAgaWYgKGdyb3VwRnVuY3Rpb25EZXBlbmRlbmNpZXMgJiYgZ3JvdXBGdW5jdGlvbkRlcGVuZGVuY2llcy5sZW5ndGggPiAwICYmIGVudGl0eURlcGVuZGVuY2llcyAmJiBlbnRpdHlEZXBlbmRlbmNpZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICBncm91cEZ1bmN0aW9uRGVwZW5kZW5jaWVzLmZvckVhY2goKGRlcDogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgY29uc3QgaW5kZXggPSBlbnRpdHlEZXBlbmRlbmNpZXMuZmluZEluZGV4KGl0ZW0gPT4gZGVwLnN0YXJ0c1dpdGgoaXRlbSkpO1xyXG4gICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcclxuICAgICAgICAgIGVudGl0eURlcGVuZGVuY2llcy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvLyDljrvph41cclxuICAgIGNvbnN0IG1lcmdlZCA9IFsuLi5ncm91cEZ1bmN0aW9uRGVwZW5kZW5jaWVzLCAuLi5lbnRpdHlEZXBlbmRlbmNpZXNdO1xyXG4gICAgY29uc3QgZGVwcyA9IFsuLi5uZXcgU2V0KG1lcmdlZCldO1xyXG4gICAgcmV0dXJuIGRlcHM7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIOiOt+WPluWQiOazleeahOWunuS9k+WxnuaAp+ihqOi+vuW8j1xyXG4gICAqIEBwYXJhbSBlbnRpdHlQcm9wZXJ0eUV4cHJlc3Npb24g5a6e5L2T5bGe5oCn6KGo6L6+5byPXHJcbiAgICogQHJldHVybnMgXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBnZXRWYWxpZEVudGl0eVByb3BlcnR5RXhwcmVzc2lvbihlbnRpdHlQcm9wZXJ0eUV4cHJlc3Npb246IHN0cmluZyk6IHN0cmluZ1tdIHtcclxuICAgIGNvbnN0IHByb3BQYXRocyA9IGVudGl0eVByb3BlcnR5RXhwcmVzc2lvbi5zcGxpdCgnLicpO1xyXG4gICAgbGV0IHByb3BJbmZvID0gbnVsbDtcclxuICAgIHRyeSB7XHJcbiAgICAgIHByb3BJbmZvID0gdGhpcy5lbnRpdHlUeXBlSW5mby5nZXRQcm9wSW5mb0J5UGF0aChwcm9wUGF0aHMpO1xyXG4gICAgfSBjYXRjaCAoZSkgeyB9XHJcbiAgICBpZiAoIXByb3BJbmZvKSB7XHJcbiAgICAgIGlmIChwcm9wUGF0aHMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgIHByb3BQYXRocy5wb3AoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRWYWxpZEVudGl0eVByb3BlcnR5RXhwcmVzc2lvbihwcm9wUGF0aHMuam9pbignLicpKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIGVudGl0eVByb3BlcnR5RXhwcmVzc2lvbi5zcGxpdCgnLicpO1xyXG4gICAgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiDojrflj5bmiYDmnInlrp7kvZPkvp3otZZcclxuICAgKiBAcGFyYW0gZXhwciDooajovr7lvI/lrZfnrKbkuLJcclxuICAgKiBAcmV0dXJucyBcclxuICAgKi9cclxuICBwcml2YXRlIGdldEVudGl0eURlcGVuZGVuY3koZXhwcjogc3RyaW5nKTogc3RyaW5nW10ge1xyXG4gICAgY29uc3QgZGVwcyA9IFtdO1xyXG4gICAgaWYgKHRoaXMuZW50aXR5VHlwZUluZm8pIHtcclxuICAgICAgLy8g5L2/55So5q2j5YiZ5Yy56YWN5Ye65omA5pyJ5a6e5L2TXHJcbiAgICAgIGNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cChgW1xcXFwnXFxcXFwiXT9cXFxccyooJHt0aGlzLmVudGl0eVR5cGVJbmZvLmVudGl0eUluZm8ubm9kZUNvZGV9fCR7dGhpcy5lbnRpdHlUeXBlSW5mby5lbnRpdHlJbmZvLm9yaWdpbmFsQ29kZX0pW1xcXFwuXFxcXFtcXFxcXWEtekEtWjAtOV9dK1xcXFxzKltcXFxcJ1xcXFxcIl0/YCwgJ2cnKTtcclxuICAgICAgY29uc3QgZW50aXR5UHJvcGVydHlFeHByZXNzaW9uczogUmVnRXhwTWF0Y2hBcnJheSA9IGV4cHIubWF0Y2gocmVnZXgpO1xyXG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShlbnRpdHlQcm9wZXJ0eUV4cHJlc3Npb25zKSAmJiBlbnRpdHlQcm9wZXJ0eUV4cHJlc3Npb25zLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAvLyDop6PmnpDlh7rmiYDmnInlrp7kvZPnm7jlhbPnmoTlrZfnrKbkuLLvvIzku6XkuLvlrp7kvZPlkI3lrZflvIDlpLTvvIzljIXlkKvkuLvlrp7kvZPlsZ7mgKfmiJblrZDooahcclxuICAgICAgICBlbnRpdHlQcm9wZXJ0eUV4cHJlc3Npb25zLmZvckVhY2goKGl0ZW06IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgaWYgKGl0ZW0uaW5kZXhPZignLicpID09PSAtMSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAvLyDljrvnqbrmoLxcclxuICAgICAgICAgIGl0ZW0gPSBpdGVtLnRyaW0oKS5yZXBsYWNlKC9cXFwiL2csICcnKTtcclxuICAgICAgICAgIGNvbnN0IHBhdGhzID0gRXhwcmVzc2lvblV0aWwuY29udmVydFRvTm9kZUNvZGUoaXRlbSwgdGhpcy5yZXBvc2l0b3J5LmVudGl0eVR5cGVJbmZvKTtcclxuICAgICAgICAgIGl0ZW0gPSBwYXRocy5qb2luKCcuJyk7XHJcbiAgICAgICAgICAvLyDmiKrljrvkuLvlrp7kvZPlj4rngrlcclxuICAgICAgICAgIGl0ZW0gPSBpdGVtLnN1YnN0cihpdGVtLmluZGV4T2YoJy4nKSArIDEpO1xyXG4gICAgICAgICAgY29uc3QgZGVwID0gdGhpcy5nZXRWYWxpZEVudGl0eVByb3BlcnR5RXhwcmVzc2lvbihpdGVtKTtcclxuICAgICAgICAgIGlmIChkZXAgJiYgQXJyYXkuaXNBcnJheShkZXApICYmIGRlcC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIC8vIOatpOWkhOW/hemhu+WKoOS4iuS4u+WunuS9k+eahOWQjeWtl+adpeWMuuWIhuS+nei1lueahOaYr+WunuS9k+i/mOaYr+WFtuS7luexu+Wei+eahOaVsOaNrlxyXG4gICAgICAgICAgICBkZXAuc3BsaWNlKDAsIDAsIEVOVElUWV9URU1QTEFURSk7XHJcbiAgICAgICAgICAgIGRlcHMucHVzaChkZXAuam9pbignLycpKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgIH1cclxuICAgIHJldHVybiBkZXBzO1xyXG4gIH1cclxuXHJcbn0iXX0=