import { Injectable } from '@angular/core';
import { ViewModel } from '@farris/devkit';
import { of } from 'rxjs';
export class RemoteSummaryService {
    constructor(viewModel) {
        this.viewModel = viewModel;
    }
    /**
     * 服务器端合计
     * @param methodName 服务器端合计自定义动作名称
     * @param filters 过滤条件
     */
    summary(methodName, filters) {
        const repository = this.viewModel.frameContext.repository || null;
        if (repository) {
            const proxy = repository.proxy;
            if (proxy && typeof proxy[methodName] === 'function') {
                return proxy[methodName](filters);
            }
        }
        return of(null);
    }
}
RemoteSummaryService.decorators = [
    { type: Injectable }
];
/** @nocollapse */
RemoteSummaryService.ctorParameters = () => [
    { type: ViewModel }
];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVtb3RlLXN1bW1hcnkuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvY29tbWFuZC1zZXJ2aWNlcy8iLCJzb3VyY2VzIjpbImxpYi9yZW1vdGUtc3VtbWFyeS5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDM0MsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBRTNDLE9BQU8sRUFBRSxFQUFFLEVBQWMsTUFBTSxNQUFNLENBQUM7QUFHdEMsTUFBTSxPQUFPLG9CQUFvQjtJQUMvQixZQUFvQixTQUFvQjtRQUFwQixjQUFTLEdBQVQsU0FBUyxDQUFXO0lBQUksQ0FBQztJQUM3Qzs7OztPQUlHO0lBQ0ksT0FBTyxDQUFDLFVBQWtCLEVBQUUsT0FBWTtRQUM3QyxNQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLFlBQVksQ0FBQyxVQUFnQyxJQUFJLElBQUksQ0FBQztRQUN4RixJQUFJLFVBQVUsRUFBRTtZQUNkLE1BQU0sS0FBSyxHQUFHLFVBQVUsQ0FBQyxLQUFLLENBQUM7WUFDL0IsSUFBSSxLQUFLLElBQUksT0FBTyxLQUFLLENBQUMsVUFBVSxDQUFDLEtBQUssVUFBVSxFQUFFO2dCQUNwRCxPQUFPLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQyxPQUFPLENBQW9CLENBQUM7YUFDdEQ7U0FDRjtRQUNELE9BQU8sRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ2xCLENBQUM7OztZQWpCRixVQUFVOzs7O1lBSkYsU0FBUyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFZpZXdNb2RlbCB9IGZyb20gJ0BmYXJyaXMvZGV2a2l0JztcbmltcG9ydCB7IEJlZlJlcG9zaXRvcnkgfSBmcm9tICdAZmFycmlzL2JlZic7XG5pbXBvcnQgeyBvZiwgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xuXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgUmVtb3RlU3VtbWFyeVNlcnZpY2Uge1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHZpZXdNb2RlbDogVmlld01vZGVsKSB7IH1cbiAgLyoqXG4gICAqIOacjeWKoeWZqOerr+WQiOiuoVxuICAgKiBAcGFyYW0gbWV0aG9kTmFtZSDmnI3liqHlmajnq6/lkIjorqHoh6rlrprkuYnliqjkvZzlkI3np7BcbiAgICogQHBhcmFtIGZpbHRlcnMg6L+H5ruk5p2h5Lu2XG4gICAqL1xuICBwdWJsaWMgc3VtbWFyeShtZXRob2ROYW1lOiBzdHJpbmcsIGZpbHRlcnM6IGFueSkge1xuICAgIGNvbnN0IHJlcG9zaXRvcnkgPSB0aGlzLnZpZXdNb2RlbC5mcmFtZUNvbnRleHQucmVwb3NpdG9yeSBhcyBCZWZSZXBvc2l0b3J5PGFueT4gfHwgbnVsbDtcbiAgICBpZiAocmVwb3NpdG9yeSkge1xuICAgICAgY29uc3QgcHJveHkgPSByZXBvc2l0b3J5LnByb3h5O1xuICAgICAgaWYgKHByb3h5ICYmIHR5cGVvZiBwcm94eVttZXRob2ROYW1lXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gcHJveHlbbWV0aG9kTmFtZV0oZmlsdGVycykgYXMgT2JzZXJ2YWJsZTxhbnk+O1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb2YobnVsbCk7XG4gIH1cbn1cbiJdfQ==