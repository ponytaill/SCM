import { Injectable } from '@angular/core';
import { FrameContext, BindingList } from '@farris/devkit';
/**
 * 实体遍历服务
 * @todo
 * 实体层没有封装相关方法，临时通过BindingData来获取数据
 */
class EntityTraversingService {
    constructor(frameContext) {
        this.frameContext = frameContext;
    }
    get bindingData() {
        return this.frameContext.bindingData;
    }
    /**
     * 获取值
     */
    getPropValue(path) {
        return this.bindingData.getValue(path);
    }
    /**
     * 获取实体数据
     */
    getEntityData(path) {
        let bindingObj;
        const bindingListOrObject = this.bindingData.getValue(path);
        if (bindingListOrObject instanceof BindingList === true) {
            bindingObj = bindingListOrObject.currentItem;
        }
        else {
            bindingObj = bindingListOrObject;
        }
        return bindingObj.toJSON();
    }
    /**
     * 获取实体列表数据
     */
    getEntityListData(path) {
        const bindingList = this.bindingData.getValue(path);
        return bindingList.toJSON();
    }
}
EntityTraversingService.decorators = [
    { type: Injectable }
];
/** @nocollapse */
EntityTraversingService.ctorParameters = () => [
    { type: FrameContext }
];
export { EntityTraversingService };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZW50aXR5LXRyYXZlcnNpbmcuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvY29tbWFuZC1zZXJ2aWNlcy8iLCJzb3VyY2VzIjpbImxpYi9lbnRpdHktc2VydmljZXMvZW50aXR5LXRyYXZlcnNpbmcuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzNDLE9BQU8sRUFBRSxZQUFZLEVBQWUsV0FBVyxFQUFpQixNQUFNLGdCQUFnQixDQUFDO0FBRXZGOzs7O0dBSUc7QUFDSCxNQUNNLHVCQUF1QjtJQU0zQixZQUFvQixZQUEwQjtRQUExQixpQkFBWSxHQUFaLFlBQVksQ0FBYztJQUM5QyxDQUFDO0lBTEQsSUFBWSxXQUFXO1FBQ3JCLE9BQU8sSUFBSSxDQUFDLFlBQVksQ0FBQyxXQUFXLENBQUM7SUFDdkMsQ0FBQztJQUtEOztPQUVHO0lBQ0ksWUFBWSxDQUFDLElBQWM7UUFDaEMsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUN6QyxDQUFDO0lBRUQ7O09BRUc7SUFDSSxhQUFhLENBQUMsSUFBYztRQUNqQyxJQUFJLFVBQXlCLENBQUM7UUFDOUIsTUFBTSxtQkFBbUIsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUM1RCxJQUFJLG1CQUFtQixZQUFZLFdBQVcsS0FBSyxJQUFJLEVBQUU7WUFDdkQsVUFBVSxHQUFHLG1CQUFtQixDQUFDLFdBQVcsQ0FBQztTQUM5QzthQUFNO1lBQ0wsVUFBVSxHQUFHLG1CQUFtQixDQUFDO1NBQ2xDO1FBQ0QsT0FBTyxVQUFVLENBQUMsTUFBTSxFQUFFLENBQUM7SUFDN0IsQ0FBQztJQUVEOztPQUVHO0lBQ0ksaUJBQWlCLENBQUMsSUFBYztRQUNyQyxNQUFNLFdBQVcsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQWdCLENBQUM7UUFDbkUsT0FBTyxXQUFXLENBQUMsTUFBTSxFQUFFLENBQUM7SUFDOUIsQ0FBQzs7O1lBckNGLFVBQVU7Ozs7WUFQRixZQUFZOztBQWdEckIsT0FBTyxFQUFFLHVCQUF1QixFQUFFLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBGcmFtZUNvbnRleHQsIEJpbmRpbmdEYXRhLCBCaW5kaW5nTGlzdCwgQmluZGluZ09iamVjdCB9IGZyb20gJ0BmYXJyaXMvZGV2a2l0JztcblxuLyoqXG4gKiDlrp7kvZPpgY3ljobmnI3liqFcbiAqIEB0b2RvXG4gKiDlrp7kvZPlsYLmsqHmnInlsIHoo4Xnm7jlhbPmlrnms5XvvIzkuLTml7bpgJrov4dCaW5kaW5nRGF0YeadpeiOt+WPluaVsOaNrlxuICovXG5ASW5qZWN0YWJsZSgpXG5jbGFzcyBFbnRpdHlUcmF2ZXJzaW5nU2VydmljZSB7XG5cbiAgcHJpdmF0ZSBnZXQgYmluZGluZ0RhdGEoKTogQmluZGluZ0RhdGEge1xuICAgIHJldHVybiB0aGlzLmZyYW1lQ29udGV4dC5iaW5kaW5nRGF0YTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgZnJhbWVDb250ZXh0OiBGcmFtZUNvbnRleHQpIHtcbiAgfVxuXG4gIC8qKlxuICAgKiDojrflj5blgLxcbiAgICovXG4gIHB1YmxpYyBnZXRQcm9wVmFsdWUocGF0aDogc3RyaW5nW10pOiBhbnkge1xuICAgIHJldHVybiB0aGlzLmJpbmRpbmdEYXRhLmdldFZhbHVlKHBhdGgpO1xuICB9XG5cbiAgLyoqXG4gICAqIOiOt+WPluWunuS9k+aVsOaNrlxuICAgKi9cbiAgcHVibGljIGdldEVudGl0eURhdGEocGF0aDogc3RyaW5nW10pOiBhbnkge1xuICAgIGxldCBiaW5kaW5nT2JqOiBCaW5kaW5nT2JqZWN0O1xuICAgIGNvbnN0IGJpbmRpbmdMaXN0T3JPYmplY3QgPSB0aGlzLmJpbmRpbmdEYXRhLmdldFZhbHVlKHBhdGgpO1xuICAgIGlmIChiaW5kaW5nTGlzdE9yT2JqZWN0IGluc3RhbmNlb2YgQmluZGluZ0xpc3QgPT09IHRydWUpIHtcbiAgICAgIGJpbmRpbmdPYmogPSBiaW5kaW5nTGlzdE9yT2JqZWN0LmN1cnJlbnRJdGVtO1xuICAgIH0gZWxzZSB7XG4gICAgICBiaW5kaW5nT2JqID0gYmluZGluZ0xpc3RPck9iamVjdDtcbiAgICB9XG4gICAgcmV0dXJuIGJpbmRpbmdPYmoudG9KU09OKCk7XG4gIH1cblxuICAvKipcbiAgICog6I635Y+W5a6e5L2T5YiX6KGo5pWw5o2uXG4gICAqL1xuICBwdWJsaWMgZ2V0RW50aXR5TGlzdERhdGEocGF0aDogc3RyaW5nW10pOiBhbnlbXSB7XG4gICAgY29uc3QgYmluZGluZ0xpc3QgPSB0aGlzLmJpbmRpbmdEYXRhLmdldFZhbHVlKHBhdGgpIGFzIEJpbmRpbmdMaXN0O1xuICAgIHJldHVybiBiaW5kaW5nTGlzdC50b0pTT04oKTtcbiAgfVxuXG59XG5cbmV4cG9ydCB7IEVudGl0eVRyYXZlcnNpbmdTZXJ2aWNlIH07XG4iXX0=