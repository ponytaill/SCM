/**
 * @fileoverview added by tsickle
 * Generated from: lib/bill-tracker/components/basic-info/basic-info.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { ChangeDetectorRef, Component, ComponentFactoryResolver, Inject, Injector, Input, LOCALE_ID, Optional, ReflectiveInjector, ViewContainerRef } from "@angular/core";
import { BillDataTable, BillSchemaTable, DataType } from "@edp-aif/common-api";
import { JointQueryMode } from "@edp-bif/common-api";
import { LoadingService } from "@farris/ui-loading";
import { MessagerService } from "@farris/ui-messager";
import { BsModalService } from "@farris/ui-modal";
import { NotifyService } from "@farris/ui-notify";
import { FrameworkService } from "@gsp-sys/rtf-common";
import { BillDataInfo } from "../../../entity/tracking/BillDataInfo";
import { BillInfo } from "../../../entity/tracking/BillInfo";
import { BillTrackerLocalePipe } from "../../pipe/bill-tracker-locale.pipe";
import { BillTrackerDataInfoService } from "../../services/bill-tracker-data-info.service";
import { BillTrackerInternalUiService } from "../../services/bill-tracker-internal-ui.service";
var BasicInfoComponent = /** @class */ (function () {
    function BasicInfoComponent(framework, dataInfoService, notify, messager, loading, modal, localePipe, vcr, inj, cfr, cdr, localeId) {
        this.framework = framework;
        this.dataInfoService = dataInfoService;
        this.notify = notify;
        this.messager = messager;
        this.loading = loading;
        this.modal = modal;
        this.localePipe = localePipe;
        this.vcr = vcr;
        this.inj = inj;
        this.cfr = cfr;
        this.cdr = cdr;
        this.localeId = localeId;
        this.fieldsWithValue = [];
        this.childSchemaTables = [];
        this.childDataTableMap = {};
        this.dateType = DataType;
        this.secTitle = "";
        this.localeId = localeId || this.inj.get(LOCALE_ID);
        /** @type {?} */
        var inject = ReflectiveInjector.resolveAndCreate([
            BillTrackerInternalUiService
        ], this.inj);
        this.internalUiService = inject.get(BillTrackerInternalUiService, null);
    }
    /**
     * @return {?}
     */
    BasicInfoComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        // 设置section标题
        this.secTitle = this.localePipe.transform("basicInfo");
        // 表名解析
        this.secTitle = this.dataInfoService.getTableLabel(this.billInfo, this.schemaTable, this.localeId);
        // 获取带值的字段信息
        this.fieldsWithValue = this.dataInfoService.getBasicInfoFieldsWithValue(this.billInfo, this.schemaTable, this.dataTable);
        // 按order排序
        this.fieldsWithValue = this.dataInfoService.sortFieldsByOrder(this.fieldsWithValue);
        //主表数据
        /** @type {?} */
        var r = this.dataTable.GetRowList()[0];
        // 子表列表
        this.childSchemaTables = this.dataInfoService.getChildTables(this.billInfo, this.schemaTable);
        this.childDataTableMap = r.GetChildTableMap();
        if (this.billInfo.jointQueryParameters != null) {
            /** @type {?} */
            var jointQueryParameters = JSON.parse(this.billInfo.jointQueryParameters);
            this.hasLink = (this.billInfo.jointQueryMode == JointQueryMode.APP && jointQueryParameters.funcId != null)
                || (this.billInfo.jointQueryMode == JointQueryMode.URL && jointQueryParameters.url != null);
        }
        else {
            this.hasLink = false;
        }
    };
    /**
     * @return {?}
     */
    BasicInfoComponent.prototype.clickLink = /**
     * @return {?}
     */
    function () {
        this.internalUiService.openBillDetailWithFields(this.billInfo, this.billDataInfo, this.fieldsWithValue);
        event.stopPropagation();
        return false;
    };
    BasicInfoComponent.decorators = [
        { type: Component, args: [{
                    selector: "lib-bill-tracker-main-table",
                    template: "<farris-section class=\"f-section-form f-section-in-mainsubcard\" [mainTitle]=\"secTitle\">\r\n    <div class=\"f-form-layout farris-form farris-form-controls-inline\">\r\n        <ng-container *ngFor=\"let field of fieldsWithValue; let i = index\">\r\n            <div class=\"col-12 col-md-6 col-xl-3 col-el-2\" *ngIf=\"field.show\">\r\n                <!-- \u4EC5\u663E\u793Ashow\u5C5E\u6027\u4E3Atrue\u7684\u5B57\u6BB5 -->\r\n                <!-- <div class=\"farris-group-wrap\" *ngIf=\"!(hasLink && i==0); else linkTemp\"> -->\r\n                <div class=\"farris-group-wrap\">\r\n                    <!-- \u975E\u5E03\u5C14\u503C\u4F7F\u7528\u6587\u672C\u6846 -->\r\n                    <div class=\"form-group farris-form-group\" *ngIf=\"field.dataType!=dateType.Boolean\">\r\n                        <label class=\"col-form-label\">\r\n                            <span class=\"farris-label-text\" title=\"{{field | billTrackerFieldLabel}}\">\r\n                                {{field | billTrackerFieldLabel}}\r\n                            </span>\r\n                        </label>\r\n                        <div class=\"farris-input-wrap\">\r\n                            <div class=\"f-component-text\" *ngIf=\"field.dataType!=dateType.Boolean\">\r\n                                <span class=\"f-form-control-text\" title=\"{{field.fieldValue}}\">\r\n                                    {{field.fieldValue}}\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <!-- \u5E03\u5C14\u503C\u4F7F\u7528\u590D\u9009\u6846 -->\r\n                    <div class=\"form-group farris-form-group\" *ngIf=\"field.dataType==dateType.Boolean\">\r\n                        <label class=\"col-form-label\">\r\n                            <span class=\"farris-label-text\" title=\"{{field | billTrackerFieldLabel}}\">\r\n                                {{field | billTrackerFieldLabel}}\r\n                            </span>\r\n                        </label>\r\n                        <div class=\"farris-input-wrap\">\r\n                            <div class=\"custom-control custom-checkbox\">\r\n                                <input class=\"custom-control-input\" type=\"checkbox\" readonly\r\n                                    [checked]=\"field.fieldValue\" />\r\n                                <label class=\"custom-control-label\"></label>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <!-- \u6709\u8054\u67E5\u914D\u7F6E\u65F6\uFF0C\u9ED8\u8BA4\u53D6\u7B2C\u4E00\u4E2A\u5B57\u6BB5\u4F5C\u4E3A\u8D85\u94FE\u63A5 -->\r\n                <!-- <ng-template #linkTemp> -->\r\n                <!-- <div class=\"farris-group-wrap\"> -->\r\n                <!-- \u975E\u5E03\u5C14\u503C\u94FE\u63A5\u5728value\u4E0A -->\r\n                <!-- <div class=\"form-group farris-form-group\" *ngIf=\"field.dataType!=dateType.Boolean\">\r\n                            <label class=\"col-form-label\">\r\n                                <span class=\"farris-label-text\" title=\"{{field | billTrackerFieldLabel}}\">\r\n                                    {{field | billTrackerFieldLabel}}\r\n                                </span>\r\n                            </label>\r\n                            <div class=\"farris-input-wrap\">\r\n                                <div class=\"f-component-text\">\r\n                                    <span class=\"f-form-control-text\" title=\"{{field.fieldValue}}\">\r\n                                        <a href=\"javascript:void(0);\" (click)=\"clickLink()\">{{field.fieldValue}}</a>\r\n                                    </span>\r\n                                </div>\r\n                            </div>\r\n                        </div> -->\r\n\r\n                <!-- \u5E03\u5C14\u503C\u94FE\u63A5\u5728label\u4E0A -->\r\n                <!-- <div class=\"form-group farris-form-group\" *ngIf=\"field.dataType==dateType.Boolean\">\r\n                            <label class=\"col-form-label\">\r\n                                <span class=\"farris-label-text\" title=\"{{field | billTrackerFieldLabel}}\">\r\n                                    <a href=\"javascript:void(0);\" (click)=\"clickLink()\">\r\n                                        {{field | billTrackerFieldLabel}}\r\n                                    </a>\r\n                                </span>\r\n                            </label>\r\n                            <div class=\"farris-input-wrap\">\r\n                                <div class=\"farris-input-wrap\">\r\n                                    <div class=\"custom-control custom-checkbox\">\r\n                                        <input class=\"custom-control-input\" type=\"checkbox\" readonly\r\n                                            [checked]=\"field.fieldValue\" />\r\n                                        <label class=\"custom-control-label\"></label>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div> -->\r\n                <!-- </div> -->\r\n                <!-- </ng-template> -->\r\n            </div>\r\n        </ng-container>\r\n    </div>\r\n</farris-section>\r\n<lib-bill-tracker-child-info-list [childSchemaTables]=\"childSchemaTables\" [childDataTableMap]=\"childDataTableMap\"\r\n    [billInfo]=\"billInfo\">\r\n</lib-bill-tracker-child-info-list>"
                }] }
    ];
    /** @nocollapse */
    BasicInfoComponent.ctorParameters = function () { return [
        { type: FrameworkService },
        { type: BillTrackerDataInfoService },
        { type: NotifyService },
        { type: MessagerService },
        { type: LoadingService },
        { type: BsModalService },
        { type: BillTrackerLocalePipe },
        { type: ViewContainerRef },
        { type: Injector },
        { type: ComponentFactoryResolver },
        { type: ChangeDetectorRef },
        { type: String, decorators: [{ type: Optional }, { type: Inject, args: [LOCALE_ID,] }] }
    ]; };
    BasicInfoComponent.propDecorators = {
        schemaTable: [{ type: Input, args: ["schemaTable",] }],
        dataTable: [{ type: Input, args: ["dataTable",] }],
        billInfo: [{ type: Input, args: ["billInfo",] }],
        billDataInfo: [{ type: Input, args: ["billDataInfo",] }]
    };
    return BasicInfoComponent;
}());
export { BasicInfoComponent };
if (false) {
    /** @type {?} */
    BasicInfoComponent.prototype.schemaTable;
    /** @type {?} */
    BasicInfoComponent.prototype.dataTable;
    /** @type {?} */
    BasicInfoComponent.prototype.billInfo;
    /** @type {?} */
    BasicInfoComponent.prototype.billDataInfo;
    /** @type {?} */
    BasicInfoComponent.prototype.fieldsWithValue;
    /** @type {?} */
    BasicInfoComponent.prototype.childSchemaTables;
    /** @type {?} */
    BasicInfoComponent.prototype.childDataTableMap;
    /** @type {?} */
    BasicInfoComponent.prototype.hasLink;
    /** @type {?} */
    BasicInfoComponent.prototype.dateType;
    /** @type {?} */
    BasicInfoComponent.prototype.secTitle;
    /** @type {?} */
    BasicInfoComponent.prototype.internalUiService;
    /** @type {?} */
    BasicInfoComponent.prototype.framework;
    /** @type {?} */
    BasicInfoComponent.prototype.dataInfoService;
    /** @type {?} */
    BasicInfoComponent.prototype.notify;
    /** @type {?} */
    BasicInfoComponent.prototype.messager;
    /** @type {?} */
    BasicInfoComponent.prototype.loading;
    /** @type {?} */
    BasicInfoComponent.prototype.modal;
    /** @type {?} */
    BasicInfoComponent.prototype.localePipe;
    /** @type {?} */
    BasicInfoComponent.prototype.vcr;
    /** @type {?} */
    BasicInfoComponent.prototype.inj;
    /** @type {?} */
    BasicInfoComponent.prototype.cfr;
    /** @type {?} */
    BasicInfoComponent.prototype.cdr;
    /** @type {?} */
    BasicInfoComponent.prototype.localeId;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFzaWMtaW5mby5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZWRwLWJpZi9ydW50aW1lLWFwaS8iLCJzb3VyY2VzIjpbImxpYi9iaWxsLXRyYWNrZXIvY29tcG9uZW50cy9iYXNpYy1pbmZvL2Jhc2ljLWluZm8uY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUFFLGlCQUFpQixFQUFFLFNBQVMsRUFBRSx3QkFBd0IsRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQVUsUUFBUSxFQUFFLGtCQUFrQixFQUFFLGdCQUFnQixFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ25MLE9BQU8sRUFBMkIsYUFBYSxFQUF3RSxlQUFlLEVBQXVCLFFBQVEsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ25NLE9BQU8sRUFBa0csY0FBYyxFQUFpRCxNQUFNLHFCQUFxQixDQUFDO0FBQ3BNLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUNwRCxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDdEQsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBQ2xELE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUNsRCxPQUFPLEVBQXVCLGdCQUFnQixFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDNUUsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLHVDQUF1QyxDQUFDO0FBQ3JFLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxtQ0FBbUMsQ0FBQztBQUU3RCxPQUFPLEVBQUUscUJBQXFCLEVBQUUsTUFBTSxxQ0FBcUMsQ0FBQztBQUM1RSxPQUFPLEVBQUUsMEJBQTBCLEVBQUUsTUFBTSwrQ0FBK0MsQ0FBQztBQUMzRixPQUFPLEVBQUUsNEJBQTRCLEVBQUUsTUFBTSxpREFBaUQsQ0FBQztBQW1CL0Y7SUE2QkksNEJBQ1cs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QUFnQzs7SUFDaEMscUNBQThCOztJQUM5QixtQ0FBNEI7O0lBQzVCLHdDQUF3Qzs7SUFDeEMsaUNBQTRCOztJQUM1QixpQ0FBb0I7O0lBQ3BCLGlDQUFvQzs7SUFDcEMsaUNBQTZCOztJQUM3QixzQ0FBc0QiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDaGFuZ2VEZXRlY3RvclJlZiwgQ29tcG9uZW50LCBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsIEluamVjdCwgSW5qZWN0b3IsIElucHV0LCBMT0NBTEVfSUQsIE9uSW5pdCwgT3B0aW9uYWwsIFJlZmxlY3RpdmVJbmplY3RvciwgVmlld0NvbnRhaW5lclJlZiB9IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XHJcbmltcG9ydCB7IEJpbGxEYXRhLCBCaWxsRGF0YUZpZWxkLCBCaWxsRGF0YVRhYmxlLCBCaWxsU2NoZW1hLCBCaWxsU2NoZW1hRmllbGQsIEJpbGxTY2hlbWFGaWVsZEJhc2UsIEJpbGxTY2hlbWFTdWJGaWVsZCwgQmlsbFNjaGVtYVRhYmxlLCBCcG1uTW9kZWxKc29uSGVscGVyLCBEYXRhVHlwZSB9IGZyb20gXCJAZWRwLWFpZi9jb21tb24tYXBpXCI7XHJcbmltcG9ydCB7IEJpbGxUcmFja2VyU2NoZW1hRmllbGRDb250ZW50LCBCaWxsVHJhY2tpbmdEYXRhU2hvd25Nb2RlLCBCaWxsVHJhY2tpbmdTZXR0aW5ncywgZnVsbFBhdGhQcmVmaXgsIEpvaW50UXVlcnlNb2RlLCBKb2ludFF1ZXJ5UGFyYW1ldGVycywgSm9pbnRRdWVyeVBhcmFtZXRlclR5cGUgfSBmcm9tIFwiQGVkcC1iaWYvY29tbW9uLWFwaVwiO1xyXG5pbXBvcnQgeyBMb2FkaW5nU2VydmljZSB9IGZyb20gXCJAZmFycmlzL3VpLWxvYWRpbmdcIjtcclxuaW1wb3J0IHsgTWVzc2FnZXJTZXJ2aWNlIH0gZnJvbSBcIkBmYXJyaXMvdWktbWVzc2FnZXJcIjtcclxuaW1wb3J0IHsgQnNNb2RhbFNlcnZpY2UgfSBmcm9tIFwiQGZhcnJpcy91aS1tb2RhbFwiO1xyXG5pbXBvcnQgeyBOb3RpZnlTZXJ2aWNlIH0gZnJvbSBcIkBmYXJyaXMvdWktbm90aWZ5XCI7XHJcbmltcG9ydCB7IEFwcE9wdGlvbnMsIEFwcFR5cGUsIEZyYW1ld29ya1NlcnZpY2UgfSBmcm9tIFwiQGdzcC1zeXMvcnRmLWNvbW1vblwiO1xyXG5pbXBvcnQgeyBCaWxsRGF0YUluZm8gfSBmcm9tIFwiLi4vLi4vLi4vZW50aXR5L3RyYWNraW5nL0JpbGxEYXRhSW5mb1wiO1xyXG5pbXBvcnQgeyBCaWxsSW5mbyB9IGZyb20gXCIuLi8uLi8uLi9lbnRpdHkvdHJhY2tpbmcvQmlsbEluZm9cIjtcclxuaW1wb3J0IHsgQmlsbFRyYWNrZXJDb25zdGFudCB9IGZyb20gXCIuLi8uLi9jb25maWcvYmlsbC10cmFja2VyLWNvbnN0YW50XCI7XHJcbmltcG9ydCB7IEJpbGxUcmFja2VyTG9jYWxlUGlwZSB9IGZyb20gXCIuLi8uLi9waXBlL2JpbGwtdHJhY2tlci1sb2NhbGUucGlwZVwiO1xyXG5pbXBvcnQgeyBCaWxsVHJhY2tlckRhdGFJbmZvU2VydmljZSB9IGZyb20gXCIuLi8uLi9zZXJ2aWNlcy9iaWxsLXRyYWNrZXItZGF0YS1pbmZvLnNlcnZpY2VcIjtcclxuaW1wb3J0IHsgQmlsbFRyYWNrZXJJbnRlcm5hbFVpU2VydmljZSB9IGZyb20gXCIuLi8uLi9zZXJ2aWNlcy9iaWxsLXRyYWNrZXItaW50ZXJuYWwtdWkuc2VydmljZVwiO1xyXG5cclxuZGVjbGFyZSBtb2R1bGUgJ0BlZHAtYWlmL2NvbW1vbi1hcGkvbGliL2JpbGxraXQnIHtcclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgS2l0RmllbGQge1xyXG4gICAgICAgIGZpZWxkVmFsdWU/OiBhbnk7XHJcbiAgICAgICAgY2FwdGlvblBhdGg/OiBzdHJpbmc7XHJcbiAgICAgICAgZmllbGRQYXRoPzogc3RyaW5nO1xyXG4gICAgICAgIGRpc3BsYXlOYW1lPzogc3RyaW5nO1xyXG4gICAgICAgIG9yZGVyPzogbnVtYmVyO1xyXG4gICAgICAgIHNob3c/OiBib29sZWFuO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgQmlsbFNjaGVtYVRhYmxlIHtcclxuICAgICAgICBmdWxsUGF0aD86IHN0cmluZztcclxuICAgICAgICBzaG93PzogYm9vbGVhbjtcclxuICAgICAgICBvcmRlcj86IG51bWJlcjtcclxuICAgIH1cclxufVxyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgICBzZWxlY3RvcjogXCJsaWItYmlsbC10cmFja2VyLW1haW4tdGFibGVcIixcclxuICAgIHRlbXBsYXRlVXJsOiAnLi9iYXNpYy1pbmZvLmNvbXBvbmVudC5odG1sJyxcclxuICAgIHN0eWxlVXJsczogW11cclxufSlcclxuZXhwb3J0IGNsYXNzIEJhc2ljSW5mb0NvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XHJcbiAgICBASW5wdXQoXCJzY2hlbWFUYWJsZVwiKVxyXG4gICAgcHVibGljIHNjaGVtYVRhYmxlOiBCaWxsU2NoZW1hVGFibGU7XHJcblxyXG4gICAgQElucHV0KFwiZGF0YVRhYmxlXCIpXHJcbiAgICBwdWJsaWMgZGF0YVRhYmxlOiBCaWxsRGF0YVRhYmxlO1xyXG5cclxuICAgIEBJbnB1dChcImJpbGxJbmZvXCIpXHJcbiAgICBwdWJsaWMgYmlsbEluZm86IEJpbGxJbmZvO1xyXG5cclxuICAgIEBJbnB1dChcImJpbGxEYXRhSW5mb1wiKVxyXG4gICAgcHVibGljIGJpbGxEYXRhSW5mbzogQmlsbERhdGFJbmZvO1xyXG5cclxuICAgIGZpZWxkc1dpdGhWYWx1ZTogKEJpbGxTY2hlbWFGaWVsZCB8IEJpbGxTY2hlbWFTdWJGaWVsZClbXSA9IFtdO1xyXG4gICAgY2hpbGRTY2hlbWFUYWJsZXM6IEJpbGxTY2hlbWFUYWJsZVtdID0gW107XHJcbiAgICBjaGlsZERhdGFUYWJsZU1hcDoge1xyXG4gICAgICAgIFtrZXk6IHN0cmluZ106IEJpbGxEYXRhVGFibGU7XHJcbiAgICB9ID0ge307XHJcbiAgICBoYXNMaW5rOiBib29sZWFuO1xyXG4gICAgZGF0ZVR5cGUgPSBEYXRhVHlwZTtcclxuICAgIHNlY1RpdGxlOiBzdHJpbmcgPSBcIlwiO1xyXG5cclxuICAgIGludGVybmFsVWlTZXJ2aWNlOiBCaWxsVHJhY2tlckludGVybmFsVWlTZXJ2aWNlO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHB1YmxpYyBmcmFtZXdvcms6IEZyYW1ld29ya1NlcnZpY2UsXHJcbiAgICAgICAgcHVibGljIGRhdGFJbmZvU2VydmljZTogQmlsbFRyYWNrZXJEYXRhSW5mb1NlcnZpY2UsXHJcbiAgICAgICAgcHVibGljIG5vdGlmeTogTm90aWZ5U2VydmljZSxcclxuICAgICAgICBwdWJsaWMgbWVzc2FnZXI6IE1lc3NhZ2VyU2VydmljZSxcclxuICAgICAgICBwdWJsaWMgbG9hZGluZzogTG9hZGluZ1NlcnZpY2UsXHJcbiAgICAgICAgcHVibGljIG1vZGFsOiBCc01vZGFsU2VydmljZSxcclxuICAgICAgICBwdWJsaWMgbG9jYWxlUGlwZTogQmlsbFRyYWNrZXJMb2NhbGVQaXBlLFxyXG4gICAgICAgIHB1YmxpYyB2Y3I6IFZpZXdDb250YWluZXJSZWYsXHJcbiAgICAgICAgcHVibGljIGluajogSW5qZWN0b3IsXHJcbiAgICAgICAgcHVibGljIGNmcjogQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLFxyXG4gICAgICAgIHB1YmxpYyBjZHI6IENoYW5nZURldGVjdG9yUmVmLFxyXG4gICAgICAgIEBPcHRpb25hbCgpIEBJbmplY3QoTE9DQUxFX0lEKSBwdWJsaWMgbG9jYWxlSWQ6IHN0cmluZyxcclxuICAgICkge1xyXG4gICAgICAgIHRoaXMubG9jYWxlSWQgPSBsb2NhbGVJZCB8fCB0aGlzLmluai5nZXQoTE9DQUxFX0lEKTtcclxuXHJcbiAgICAgICAgY29uc3QgaW5qZWN0ID0gUmVmbGVjdGl2ZUluamVjdG9yLnJlc29sdmVBbmRDcmVhdGUoW1xyXG4gICAgICAgICAgICBCaWxsVHJhY2tlckludGVybmFsVWlTZXJ2aWNlXHJcbiAgICAgICAgXSwgdGhpcy5pbmopO1xyXG4gICAgICAgIHRoaXMuaW50ZXJuYWxVaVNlcnZpY2UgPSBpbmplY3QuZ2V0KEJpbGxUcmFja2VySW50ZXJuYWxVaVNlcnZpY2UsIG51bGwpO1xyXG4gICAgfVxyXG5cclxuICAgIG5nT25Jbml0KCk6IHZvaWQge1xyXG4gICAgICAgIC8vIOiuvue9rnNlY3Rpb27moIfpophcclxuICAgICAgICB0aGlzLnNlY1RpdGxlID0gdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybShcImJhc2ljSW5mb1wiKTtcclxuICAgICAgICAvLyDooajlkI3op6PmnpBcclxuICAgICAgICB0aGlzLnNlY1RpdGxlID0gdGhpcy5kYXRhSW5mb1NlcnZpY2UuZ2V0VGFibGVMYWJlbCh0aGlzLmJpbGxJbmZvLCB0aGlzLnNjaGVtYVRhYmxlLCB0aGlzLmxvY2FsZUlkKTtcclxuXHJcbiAgICAgICAgLy8g6I635Y+W5bim5YC855qE5a2X5q615L+h5oGvXHJcbiAgICAgICAgdGhpcy5maWVsZHNXaXRoVmFsdWUgPSB0aGlzLmRhdGFJbmZvU2VydmljZS5nZXRCYXNpY0luZm9GaWVsZHNXaXRoVmFsdWUodGhpcy5iaWxsSW5mbywgdGhpcy5zY2hlbWFUYWJsZSwgdGhpcy5kYXRhVGFibGUpO1xyXG4gICAgICAgIC8vIOaMiW9yZGVy5o6S5bqPXHJcbiAgICAgICAgdGhpcy5maWVsZHNXaXRoVmFsdWUgPSB0aGlzLmRhdGFJbmZvU2VydmljZS5zb3J0RmllbGRzQnlPcmRlcih0aGlzLmZpZWxkc1dpdGhWYWx1ZSk7XHJcblxyXG4gICAgICAgIC8v5Li76KGo5pWw5o2uXHJcbiAgICAgICAgY29uc3QgciA9IHRoaXMuZGF0YVRhYmxlLkdldFJvd0xpc3QoKVswXTtcclxuICAgICAgICAvLyDlrZDooajliJfooahcclxuICAgICAgICB0aGlzLmNoaWxkU2NoZW1hVGFibGVzID0gdGhpcy5kYXRhSW5mb1NlcnZpY2UuZ2V0Q2hpbGRUYWJsZXModGhpcy5iaWxsSW5mbywgdGhpcy5zY2hlbWFUYWJsZSk7XHJcbiAgICAgICAgdGhpcy5jaGlsZERhdGFUYWJsZU1hcCA9IHIuR2V0Q2hpbGRUYWJsZU1hcCgpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5iaWxsSW5mby5qb2ludFF1ZXJ5UGFyYW1ldGVycyAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGpvaW50UXVlcnlQYXJhbWV0ZXJzOiBKb2ludFF1ZXJ5UGFyYW1ldGVycyA9IEpTT04ucGFyc2UodGhpcy5iaWxsSW5mby5qb2ludFF1ZXJ5UGFyYW1ldGVycyk7XHJcbiAgICAgICAgICAgIHRoaXMuaGFzTGluayA9ICh0aGlzLmJpbGxJbmZvLmpvaW50UXVlcnlNb2RlID09IEpvaW50UXVlcnlNb2RlLkFQUCAmJiBqb2ludFF1ZXJ5UGFyYW1ldGVycy5mdW5jSWQgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHx8ICh0aGlzLmJpbGxJbmZvLmpvaW50UXVlcnlNb2RlID09IEpvaW50UXVlcnlNb2RlLlVSTCAmJiBqb2ludFF1ZXJ5UGFyYW1ldGVycy51cmwgIT0gbnVsbCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5oYXNMaW5rID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNsaWNrTGluaygpIHtcclxuICAgICAgICB0aGlzLmludGVybmFsVWlTZXJ2aWNlLm9wZW5CaWxsRGV0YWlsV2l0aEZpZWxkcyh0aGlzLmJpbGxJbmZvLCB0aGlzLmJpbGxEYXRhSW5mbywgdGhpcy5maWVsZHNXaXRoVmFsdWUpO1xyXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufSJdfQ==