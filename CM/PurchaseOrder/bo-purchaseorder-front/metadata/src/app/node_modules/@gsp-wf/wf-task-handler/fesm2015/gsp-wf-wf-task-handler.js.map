{"version":3,"file":"gsp-wf-wf-task-handler.js.map","sources":["ng://@gsp-wf/wf-task-handler/lib/service/task.service.ts","ng://@gsp-wf/wf-task-handler/lib/entity/task-action.ts","ng://@gsp-wf/wf-task-handler/lib/service/i18n/en.ts","ng://@gsp-wf/wf-task-handler/lib/service/i18n/zh-cht.ts","ng://@gsp-wf/wf-task-handler/lib/service/i18n/zh-chs.ts","ng://@gsp-wf/wf-task-handler/lib/service/i18n/index.ts","ng://@gsp-wf/wf-task-handler/lib/service/i18n/i18n.service.ts","ng://@gsp-wf/wf-task-handler/lib/entity/task-entity.ts","ng://@gsp-wf/wf-task-handler/lib/entity/complete-context.ts","ng://@gsp-wf/wf-task-handler/lib/entity/complete-response.ts","ng://@gsp-wf/wf-task-handler/lib/entity/task-center-config.ts","ng://@gsp-wf/wf-task-handler/lib/entity/workitem-execute-param.ts","ng://@gsp-wf/wf-task-handler/lib/entity/urge-handle.ts","ng://@gsp-wf/wf-task-handler/lib/entity/batchVerifysigned.ts","ng://@gsp-wf/wf-task-handler/lib/entity/wfContext.ts","ng://@gsp-wf/wf-task-handler/lib/components/urge-handle/urge-handle.component.ts","ng://@gsp-wf/wf-task-handler/lib/entity/add-sign.ts","ng://@gsp-wf/wf-task-handler/lib/components/task-execute/task-execute.component.ts","ng://@gsp-wf/wf-task-handler/lib/entity/start-process-payload.ts","ng://@gsp-wf/wf-task-handler/lib/entity/postMessage.ts","ng://@gsp-wf/wf-task-handler/lib/entity/process-cache.ts","ng://@gsp-wf/wf-task-handler/lib/submit/process-selector/process-selector.component.ts","ng://@gsp-wf/wf-task-handler/lib/wf-task-handler.service.ts","ng://@gsp-wf/wf-task-handler/lib/service/i18n/translate.pipe.ts","ng://@gsp-wf/wf-task-handler/lib/components/task-assigninfo/task-assigninfo.component.ts","ng://@gsp-wf/wf-task-handler/lib/components/assignee-info/assignee-info.component.ts","ng://@gsp-wf/wf-task-handler/lib/throttleTime/throttleClickDirective.ts","ng://@gsp-wf/wf-task-handler/lib/entity/attachment.ts","ng://@gsp-wf/wf-task-handler/lib/entity/comment.ts","ng://@gsp-wf/wf-task-handler/lib/components/task-comment/task-comment.component.ts","ng://@gsp-wf/wf-task-handler/lib/wf-task-handler.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { HttpService } from '@ecp-caf/caf-common';\r\nimport { Observable, forkJoin } from 'rxjs';\r\nimport { AssignParameter } from '../entity/complete-response';\r\nimport { CompleteContext } from '../entity/complete-context';\r\nimport { BatchVerifySignedContext } from '../entity/batchVerifysigned';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { CancelSubmitPayload, StartProcessPayload } from '../entity/start-process-payload';\r\nimport { PostMessage } from '../entity/postMessage';\r\nimport { FileDeleteEntity, FileUploadEntity, GspDocUploadEntity } from '../entity/attachment';\r\nimport { WorkItemExecuteParam } from '../entity/workitem-execute-param';\r\nimport { UrgeHandleContext, UrgeHandleSimulateContext } from '../entity/urge-handle';\r\nimport { AddSignPayload } from '../entity/add-sign';\r\n\r\n@Injectable()\r\nexport class TaskService {\r\n\r\n    constructor(\r\n        private httpSvc: HttpService,\r\n        private message: MessagerService,\r\n    ) { }\r\n\r\n    getUsersByIds(ids: string[]): Observable<any> {\r\n        var pathUrl = '/api/runtime/sys/v1.0/users';\r\n        return forkJoin(ids.map(id => this.httpSvc.get(pathUrl + `/${id}` + `?mode=0002`)));\r\n    }\r\n    /**\r\n     * è·åå·¥ä½é¡¹æä½åè¡¨\r\n     */\r\n    getWorkItemActions(workItemId: string): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/workItems/${workItemId}/actions`;\r\n        return this.httpSvc.get(url);\r\n    }\r\n\r\n    /**\r\n     * æ§è¡å®¡æ¹æä½\r\n     * @param context æ§è¡å®¡æ¹ä¸ä¸æ\r\n     */\r\n    complete(context: CompleteContext): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/workItems/complete`;\r\n        return this.httpSvc.post(url, context);\r\n    }\r\n\r\n    /**\r\n     * æ§è¡å®¡æ¹é¢è§£æ\r\n     * @param context æ§è¡å®¡æ¹ä¸ä¸æ\r\n     */\r\n    completeSimulate(context: CompleteContext): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/workItems/complete-simulation`;\r\n        return this.httpSvc.post(url, context);\r\n    }\r\n\r\n    /**\r\n     * è·åè·³è½¬æ´»å¨ä¿¡æ¯\r\n     * @param workItemId å·¥ä½é¡¹Id\r\n     * @param action å¨ä½ç¼å·\r\n     */\r\n    getDestinationScope(workItemId: string, action: string): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/workItems/${workItemId}/nextNodes/${action}`;\r\n        return this.httpSvc.get(url);\r\n    }\r\n\r\n    /**\r\n     * æ ¹æ®èç¹IDè·åæå®åä¸èçç»æ\r\n     * @param workItemId\r\n     * @param nodeId è¯´æï¼nodeIds=[\"node1\",\"node2\",Â·Â·Â·]\r\n     * @returns ææ´¾ä¿¡æ¯çæ°ç» re: FlowNodeInfo[]\r\n     */\r\n    getSimulationAssigneeInfo(workItemId: string, nodeId: string): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/workItems/${workItemId}/simulation-assigneeInfo?nodeIds=[${nodeId}]`;\r\n        return this.httpSvc.get(url);\r\n    }\r\n\r\n    /**\r\n     * æ§è¡å¾è¯¢ãç¥ä¼\r\n     * @param context ä¸ä¸æ\r\n     */\r\n    addSign(context: any): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/workItems/counterSignAdd`;\r\n        return this.httpSvc.post(url, context);\r\n    }\r\n\r\n    /**\r\n     * å·²é\r\n     * @param context åæ°\r\n     */\r\n    readTask(context: WorkItemExecuteParam): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/workItems/read`;\r\n        return this.httpSvc.post(url, context);\r\n    }\r\n\r\n    /**\r\n     * æ¥è¯¢åæ®ä¿¡æ¯\r\n     * @param workItemId å·¥ä½é¡¹Id\r\n     */\r\n    getAppInfo(workItemId: string): Observable<any> {\r\n        const formParUrl = `/api/runtime/wf/v1.0/workItems/${workItemId}/formInfo`;\r\n        return this.httpSvc.get(formParUrl);\r\n    }\r\n\r\n    /**\r\n     * è·åææ´¾ä¿¡æ¯\r\n     * @param taskId å·¥ä½é¡¹Id\r\n     * æ­¤æ¥å£åªè¿åä¸ä¸ªAssignInfoç±»åºåååçä¿¡æ¯ï¼ä¸æ¯å¤ä¸ª\r\n     */\r\n    getAssigneeInfo(taskId: string): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/workItems/${taskId}/assigneeInfo`;\r\n        return this.httpSvc.get(url);\r\n    }\r\n\r\n    /**\r\n     * è·åå ç­¾ç§»äº¤èå´è®¾ç½®\r\n     * @param workItemId\r\n     * @param actionCode\r\n     */\r\n    getOrganizationScope(workItemId: string, actionCode: string): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/workItems/${workItemId}/organizationScope/${actionCode}`;\r\n        return this.httpSvc.get(url);\r\n    }\r\n\r\n    /**\r\n     * æ ¹æ®æµç¨å®ä¾IDåä»»å¡ç¶æåçä»»å¡\r\n     * @param procInstId æµç¨å®ä¾id\r\n     * @param state ä»»å¡ç¶æ 2æ5\r\n     */\r\n    getTaskByProcInstId(procInstId: string, state: number): Observable<any> {\r\n        const url = `/api/runtime/task/v1.0/tasks/processInstanceId?procInstId=${procInstId}&state=${state}`;\r\n        return this.httpSvc.get(url);\r\n    }\r\n\r\n    /**\r\n     * æ ¹æ®workitemIDè·åä»»å¡å®ä½\r\n     * @param workItemId\r\n     */\r\n    getTaskByWorkItemId(workItemId: string): Observable<any> {\r\n        const url = `/api/runtime/task/v1.0/tasks/sourceId/${workItemId}`;\r\n        return this.httpSvc.get(url);\r\n    }\r\n\r\n    /**\r\n     * æ ¹æ®å·¥ä½é¡¹IDææ´¾ä»»å¡\r\n     * @param assigneesPa ææ´¾åæ°\r\n     */\r\n    assignNextUsersByWorkItemId(assigneesPa: AssignParameter): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/workItems/assignUser`;\r\n        return this.httpSvc.post(url, assigneesPa);\r\n    }\r\n\r\n    /**\r\n     * åå\r\n     * @param workItemId task id\r\n     * @param comment comment\r\n     */\r\n    retrieve(context: { workItemId: string, comment?: string }): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/workItems/retrieve`;\r\n        return this.httpSvc.post(url, context);\r\n    }\r\n\r\n    /**\r\n     * ä»»å¡ç§»äº¤\r\n     * @param taskId å·¥ä½é¡¹Id\r\n     * @param targetUId ç®æ ç¨æ·Id\r\n     */\r\n    transfer(transferContext: any): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/workItems/transfer`;\r\n        return this.httpSvc.post(url, transferContext);\r\n    }\r\n\r\n    /**\r\n     * ä»»å¡è¯è®º\r\n     * @param taskId å·¥ä½é¡¹Id\r\n     * @param targetUId ç®æ ç¨æ·Id\r\n     */\r\n    comment(commentContext: any): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/workItems/comment`;\r\n        return this.httpSvc.post(url, commentContext);\r\n    }\r\n\r\n    /**\r\n     * é¢ç¨ä»»å¡\r\n     * @param taskId å·¥ä½é¡¹Id\r\n     */\r\n    claim(taskId: string, comment: string): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/workItems/claim`;\r\n        const options = {\r\n            workItemId: taskId,\r\n            comment: comment\r\n        };\r\n        return this.httpSvc.post(url, options);\r\n    }\r\n\r\n    /**\r\n     * åæ¶é¢ç¨\r\n     * @param taskId ä»»å¡Id\r\n     */\r\n    unClaim(taskId: string, comment: string): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/workItems/unclaim`;\r\n        const options = {\r\n            workItemId: taskId,\r\n            comment: comment\r\n        };\r\n        return this.httpSvc.post(url, options);\r\n    }\r\n\r\n    /**\r\n     * æ¥éæç¤º\r\n     * @param error\r\n     */\r\n    error(error: any) {\r\n        if (error && error.error && error.error.Message) {\r\n            var message = error.error.Message;\r\n            this.message.warning(message);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * å¯å¨æµç¨æ¥å£\r\n     * @param payload APIæéçä¸ä¸æåæ°\r\n     */\r\n    startProcess(payload: StartProcessPayload): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/processInstances/startProcess`;\r\n        return this.httpSvc.post(url, payload);\r\n    }\r\n\r\n    /**\r\n     * å¯å¨æµç¨é¢è§£æ\r\n     * @param payload APIæéçä¸ä¸æåæ°\r\n     */\r\n    startProcessSimulate(payload: StartProcessPayload): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/processInstances/startProcess-simulation`;\r\n        return this.httpSvc.post(url, payload);\r\n    }\r\n\r\n    /**\r\n     * åæ¶æäº¤\r\n     * @param param åæ°\r\n     */\r\n    cancelSubmit(param: CancelSubmitPayload): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/processInstances/cancelSubmit`;\r\n        return this.httpSvc.post(url, param);\r\n    }\r\n\r\n    static newId() {\r\n        const S4 = () => (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\r\n        return (S4() + S4() + '-' + S4() + '-' + S4() + '-' + S4() + '-' + S4() + S4() + S4());\r\n    }\r\n\r\n\r\n    getCommentList(): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/commonComments`;\r\n        return this.httpSvc.get(url);\r\n    }\r\n\r\n    addComment(): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/commonComments`;\r\n        return this.httpSvc.post(url, {});\r\n    }\r\n\r\n    /**\r\n       * è·åä»»å¡ä¸­å¿éç½®é¡¹\r\n       * @param code éç½®é¡¹çCode\r\n       */\r\n    getTaskCenterConfigByCode(code: string, ownerType?: string, ownerId?: string): Observable<any> {\r\n        let url = `/api/runtime/task/v1.0/task-center-setting/code?code=${code}`;\r\n        ownerType && (url += `&ownerType=${ownerType}`);\r\n        ownerId && (url += `&ownerId=${ownerId}`);\r\n        return this.httpSvc.get(url);\r\n    }\r\n\r\n    /**\r\n     * æ·»å ç¨æ·çº§å«èªå®ä¹éç½®\r\n     * @param code éç½®é¡¹ç¼å·\r\n     */\r\n    addTaskCenterConfig(code: string, currentValue: string): Observable<any> {\r\n        let url = `/api/runtime/task/v1.0/task-center-setting/add?configCode=${code}&currentValue=${currentValue}`;\r\n        return this.httpSvc.post(url, null);\r\n    }\r\n\r\n    /**\r\n     * è·åå¨é¨ç¨æ·çº§å«éç½®\r\n     * @returns\r\n     */\r\n    getAllUserConfig(): Observable<any> {\r\n        let url = `/api/runtime/task/v1.0/task-center-setting/all`;\r\n        return this.httpSvc.get(url);\r\n    }\r\n\r\n    /**\r\n     * çæ­£ä¸ä¼ éä»¶\r\n     * @param files\r\n     */\r\n    uploadAttachment(files: FileUploadEntity): Observable<any> {\r\n        let url = `/api/runtime/dfs/v1.0/doc/commit`;\r\n        return this.httpSvc.put(url, files);\r\n    }\r\n\r\n    /**\r\n     * å é¤éä»¶\r\n     * @param fileDeleteEntity\r\n     */\r\n    deleteAttachment(fileDeleteEntity: FileDeleteEntity): Observable<any> {\r\n        let url = `/api/runtime/dfs/v1.0/doc`;\r\n        return this.httpSvc.delete(url, fileDeleteEntity);\r\n    }\r\n\r\n    /**\r\n     * ç­¾åå¾çï¼éä»¶ç¸å³\r\n     */\r\n    uploadSignature(gspDocUploadEntity: GspDocUploadEntity): Observable<any> {\r\n        let url = `/api/runtime/dfs/v1.0/doc`;\r\n        let header = this.httpSvc.setHeader({\r\n            body: gspDocUploadEntity,\r\n            responseType: 'text'\r\n        })\r\n        return this.httpSvc.request('Post', url, header);\r\n    }\r\n\r\n    /**\r\n     * åå»ºåç \r\n     */\r\n    createNM() {\r\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\r\n            const r = Math.random() * 16 | 0, v = c === 'x' ? r : (r & 0x3 | 0x8);\r\n            return v.toString(16);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * è·åå½åç¨æ·ä¿¡æ¯\r\n     */\r\n    getUserInfo(): Observable<any> {\r\n        let url = `/api/runtime/sys/v1.0/userinfos?infoType=user`;\r\n        return this.httpSvc.get(url);\r\n    }\r\n\r\n    /**\r\n     * è·åç¨æ·ææç­¾å\r\n     */\r\n    getUserSign(userId: string): Observable<any> {\r\n        let url = `/api/runtime/dfs/v1.0/formdoc/fileinfo/form?formid=${userId}&rootid=taskcentersignature`;\r\n        return this.httpSvc.get(url);\r\n    }\r\n\r\n\r\n    /**\r\n     * è§£ææä»¶ç±»åï¼ç»åºç¼©ç¥å¾\r\n     * @param attachmentInfo\r\n     */\r\n    createItem(attachmentInfo: any) {\r\n        var pos = attachmentInfo.fileName.lastIndexOf(\".\");\r\n        var type = attachmentInfo.fileName.substring(pos + 1);\r\n        type = (type == '' ? 'Default' : type.toLowerCase());\r\n        var docLib = 'doc-docx-htm-html-js-pdf-ppt-pptx-rar-zip-txt-xls-xlsx';\r\n        var videoLib = 'wav-aif-aiff-au-mp1-mp2-mp3-ra-rm-ram-mid-rmi';\r\n        var audioLib = 'avi-rm-rmvb-mpeg-mpg-dat-mov-qt-asf-wm-mp4';\r\n        var imgLib = 'webp-baibmp-dupcx-tif-gif-jpeg-tga-exif-fpx-svg-psd-cdr-pcd-dxf-ufo-eps-ai-png-hdri-raw-wmf-flic-emf-ico-jpg';\r\n        if (docLib.indexOf(type) >= 0) {\r\n            type = type.toLowerCase();\r\n        } else if (videoLib.indexOf(type) >= 0) {\r\n            type = 'video';\r\n        } else if (audioLib.indexOf(type) >= 0) {\r\n            type = 'audio';\r\n        } else if (imgLib.indexOf(type) >= 0) {\r\n            type = 'picture';\r\n        } else {\r\n            type = 'default';\r\n        }\r\n        return type;\r\n    }\r\n\r\n    /**\r\n     * æ³¨åä¸»é¢ï¼å¹¶è·åå½åä¸»é¢å¯ä¸æ è¯token\r\n     * @param subjectCode ä¸»é¢ç¼ç ï¼éå¯ä¸æ è¯ï¼tokenä¸ºå¯ä¸æ è¯\r\n     * @param token ä¸»é¢å¯ä¸æ è¯ã\r\n     * @returns ä¸»é¢çå¯ä¸æ è¯ã\r\n     */\r\n    subjectRegister(subjectCode: string, token: string) {\r\n        return (window as any).gspframeworkService.rtf.broadcast.subjectRegister(subjectCode, { funcId: token });\r\n    }\r\n\r\n    /**\r\n     * éè¿æä¸ªtokenåéæ¶æ¯\r\n     * @param subjectToken ä¸»é¢å¯ä¸çtokenæ è¯\r\n     * @param message è¦åéçæ¶æ¯\r\n     */\r\n    subjectNotify(subjectToken: string, message: any) {\r\n        (window as any).gspframeworkService.rtf.broadcast.notify(subjectToken, message);\r\n    }\r\n\r\n    /**\r\n     * æ·»å è§å¯èï¼å¹¶çå¬æ¶æ¯\r\n     * @param subjectToken ä¸»é¢token\r\n     * @param observerToken å½åçå¬ä¸»é¢çè§å¯èå¯ä¸æ è¯tokenãæ­¤å¤åºå®\r\n     * @param handler çå¬å°æ¶æ¯åæ§è¡çå¨ä½\r\n     */\r\n    subjectResponse(subjectToken: string, observerToken: string, handler: (value: any) => void) {\r\n        (window as any).gspframeworkService.rtf.broadcast.response(subjectToken, observerToken, handler);\r\n    }\r\n\r\n    /**\r\n     * è·åå¬åæ¨¡æç»æ\r\n     * @param context åæ°\r\n     * @returns\r\n     */\r\n    urgeHandleSimulate(context: UrgeHandleSimulateContext): Observable<any> {\r\n        let url = `/api/runtime/wf/v1.0/processInstances/getUrgeHandleInfo`;\r\n        return this.httpSvc.post(url, context);\r\n    }\r\n\r\n    /**\r\n     * æ§è¡å¬å\r\n     * @param context åæ°\r\n     * @returns\r\n     */\r\n    urgeHandle(context: UrgeHandleContext): Observable<any> {\r\n        let url = `/api/runtime/wf/v1.0/processInstances/urgeHandle`;\r\n        return this.httpSvc.post(url, context);\r\n    }\r\n\r\n    /**æ¹éæ°å­ç­¾å\r\n     * @param context åæ°\r\n     */\r\n    batchVerifySigned(context: BatchVerifySignedContext): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/workItems/batchVerifySigned`;\r\n        return this.httpSvc.post(url, context);\r\n    }\r\n\r\n    /**\r\n     * è·åç¨æ·å¸®å©åç«¯éç½®\r\n     * @returns \r\n     */\r\n    getWfUserHelpConfig(): Observable<any> {\r\n        const url = `/platform/runtime/wf/web/wf-user-help/config.json?v=` + new Date().getTime();\r\n        return this.httpSvc.get(url);\r\n    }\r\n\r\n    /**\r\n     * è·åå ç­¾éç½®\r\n     */\r\n    getAdhocConfig(workItemId: string): Observable<any> {\r\n        let url = `/api/runtime/wf/v1.0/workItems/${workItemId}/adhocConfig/AddSignBehind`;\r\n        return this.httpSvc.get(url);\r\n    }\r\n    /**\r\n     * å ç­¾æäº¤\r\n     */\r\n    adhocAssignee(payload: AddSignPayload) {\r\n        let url = `/api/runtime/wf/v1.0/workItems/adhocAssignee`;\r\n        return this.httpSvc.post(url, payload);\r\n    }\r\n    /**\r\n     * åæ¶å¾è¯¢\r\n     */\r\n    cancelConsult(payload: WorkItemExecuteParam) {\r\n        let url = `/api/runtime/wf/v1.0/workItems/cancelConsult`;\r\n        return this.httpSvc.post(url, payload);\r\n    }\r\n}\r\n","/**\r\n * ä¸å¡å¨ä½åæ°\r\n */\r\nexport class ActionParameter {\r\n    /**\r\n     * åæ°ç¼å·\r\n     */\r\n    code: string;\r\n    /**\r\n     * åæ°å¼\r\n     */\r\n    value: string;\r\n}\r\n/**\r\n * ä»»å¡å¨ä½å®ä¹\r\n */\r\nexport class TaskActionDef {\r\n    /**\r\n     * id\r\n     */\r\n    id: string;\r\n    /**\r\n     * å¨ä½ç¼å·\r\n     */\r\n    code: string;\r\n    /**\r\n     * å¨ä½æ¾ç¤ºåç§°\r\n     */\r\n    name: string;\r\n    /**\r\n     * å¨ä½å®ç°\r\n     */\r\n    impl: string;\r\n    /**\r\n     * æ¯å¦æ¹éæä½\r\n     */\r\n    isBatchAction: boolean;\r\n    /**\r\n     * æ¯å¦æ¯èæ¥æä½\r\n     */\r\n    isHyperlinkAction: boolean;\r\n    /**\r\n     * æ¯å¦ä¸»æä½\r\n     */\r\n    isPrimaryAction: boolean;\r\n    /**\r\n     * å¨ä½æåºå·\r\n     */\r\n    sortOrder: number;\r\n    /**\r\n     * ç±»åid\r\n     */\r\n    typeId: string;\r\n    /**\r\n     * åäºä»¶\r\n     */\r\n    preEvents?: ActionEvent[];\r\n    /**\r\n     * åäºä»¶\r\n     */\r\n    postEvents?: ActionEvent[];\r\n}\r\n/**\r\n * ä»»å¡å¨ä½å®ä¹\r\n */\r\nexport class TaskAction extends TaskActionDef {\r\n    /**\r\n     * ä»»å¡å¨ä½å®ä¹ç¼å·\r\n     */\r\n    code: string;\r\n    /**\r\n     * åæ°åè¡¨\r\n     */\r\n    parameters: ActionParameter[];\r\n}\r\n\r\nexport class ActionEvent {\r\n    /**\r\n     * ID\r\n     */\r\n    id: string;\r\n    /**\r\n     * ä»»å¡åç±»\r\n     */\r\n    taskCategoryId: string;\r\n    /**\r\n     * å¨ä½ç¼å·\r\n     */\r\n    actionCode: string;\r\n    /**\r\n     * å®ç°\r\n     */\r\n    eventImpl: string;\r\n    /**\r\n     * æåº\r\n     */\r\n    sortOrder: number;\r\n    /**\r\n     * ç»ç«¯ï¼webï¼app\r\n     */\r\n    terminal: string;\r\n    /**\r\n     * ç±»åï¼Pre,Post\r\n     */\r\n    type: string;\r\n    /**\r\n     * æ¯å¦ä¸ºæ¹éæ©å±\r\n     */\r\n    batch: boolean;\r\n}\r\n","export const en = {\r\n  static: {\r\n    assignee: {\r\n      title: 'Select Operator',\r\n      noAssignee: 'Please select at least one approver.',\r\n      successAssign: 'Operate successfully.',\r\n    },\r\n    transfer: {\r\n      title: 'Select transfer person',\r\n      selectHandover: 'Please select transfer persons.',\r\n      successTransfer: 'Transfer successfully.'\r\n    },\r\n    comment: {\r\n      successComment: 'Comment success.'\r\n    },\r\n    columnName: {\r\n      name: 'Name',\r\n      code: 'Code',\r\n      department: 'Department',\r\n    },\r\n    title: 'Approval confirmation',\r\n    inputLabel: 'Approval comments',\r\n    inputHolder: 'Please enter an approval opinion',\r\n    selectActivity: 'Please select approve note',\r\n    addSignee: 'Add signee',\r\n    footOk: 'OK',\r\n    footCancel: 'Cancel',\r\n    selectUser: 'Select User',\r\n    hideComment: 'Hide comment',\r\n  },\r\n  cueWords: {\r\n    successClaim: 'Claim successfully.',\r\n    successUnClaim: 'Cancel to claim successfully.',\r\n    successRetrieve: 'Retrieve successfully.',\r\n    successPass: 'Approved successfully.',\r\n    successBack: 'Dismissed successfully.',\r\n    successRefuse: 'Veto successfully.',\r\n    success: 'Operate successfully.',\r\n    inputOpinion: 'Please input your opinion',\r\n    selectNode: 'Please select target nodes',\r\n    select: 'Please select',\r\n    processor: 'processor',\r\n    attachmentsRequired: 'Please upload the attachment',\r\n    assignUser: 'Assign user'\r\n  },\r\n  task: {\r\n    selectPlaceholder: 'Please select',\r\n    passComment: 'Pass',\r\n    processAlone: 'Please handle it separately',\r\n    urgeText: 'Receiver',\r\n    backNodeText: 'Back node',\r\n    selectProcessor: 'Please select the user',\r\n    notFoundBill: 'This document cannot be processed on the computer. Please try to process it on the mobile terminal',\r\n    nextNodeText: 'Next node',\r\n    assignText: 'Assign to',\r\n    noUser: 'No one',\r\n    title: 'Handle Task',\r\n    noTask: 'There is no task.',\r\n    commentTooLong: 'Comment is too long',\r\n    activityName: 'processor',\r\n    receiver: 'receiver',\r\n    urgeComment: \"Please input your comment\",\r\n    noUrgeUsers: \"There is no user to urge handle\",\r\n    noUrgeSubject: \"no urge subject\",\r\n    noUrgeContent: \"no urge content\",\r\n    person: \" people\",\r\n    addSign: \"Add sign\",\r\n  },\r\n  startProcess: {\r\n    selectProcess: 'Please select process',\r\n    title: 'Select process',\r\n    selectNode: 'Please select next node',\r\n    submitSuccess: 'Start process successfully',\r\n    submitFailed: 'Start process failed',\r\n    cancelSubmitSuccess: 'Cancel submit successfully',\r\n    cancelSubmitFailed: 'Cancel submit failed',\r\n    dataIdIsNull: 'Please select a data',\r\n    dataIdIsEmpty: 'Please select a data',\r\n    bizDefKeyIsNull: 'Biz definition key is null',\r\n    success: 'Success',\r\n    row: '',\r\n    failed: ', failed',\r\n    node: 'node, ',\r\n    noUser: 'no suitable handler was found'\r\n  },\r\n  batchSubmit: {\r\n    row: '',\r\n    success: 'Success',\r\n    error: 'Error',\r\n    failed: 'Failed',\r\n    validationFailed: 'Signature verification failed',\r\n    single: 'Failed tasks please process it singly'\r\n  },\r\n  batchStartProcess: {\r\n    row: '<br/>',\r\n    success: 'Success',\r\n    error: 'Error',\r\n    failed: 'Failed',\r\n    single: 'Failed tasks please process it singly'\r\n  },\r\n  comment: {\r\n    static: {\r\n      title: 'Approval comments',\r\n      add: 'Add',\r\n      delete: 'Delete',\r\n      save: 'Save',\r\n      cancel: 'Cancel',\r\n      content: 'Content',\r\n      order: 'Order',\r\n      inputLabel: 'Comments',\r\n      manage: 'Comments management',\r\n      attachmentUpload: 'Attachment',\r\n      repeatFile: 'Contains repeat files:',\r\n      type: 'Type',\r\n      operate: 'Operate',\r\n      confirm: 'Confirm',\r\n      clickToAdd: 'Click to add',\r\n      public: 'public',\r\n      private: 'private',\r\n      messageSubject: 'message subject',\r\n      messageContent: 'message content'\r\n    },\r\n    attachment: {\r\n      tips: 'click to upload attachments'\r\n    },\r\n    signature: {\r\n      title: 'Signature',\r\n      reset: 'Reset',\r\n      ok: 'OK',\r\n      sign: 'Sign, ',\r\n      upload: 'Upload',\r\n      tips: 'click to sign or upload a picture',\r\n      dialogTitle: 'Signature',\r\n      note1: '',\r\n      note2: 'or',\r\n      note3: '',\r\n      disable: 'disable signature'\r\n    }\r\n  },\r\n  addSign: {\r\n    allowSignToSign: 'Allow',\r\n    multiInstanceType: 'Multi instance type',\r\n    parallel: 'parallel',\r\n    preempt: 'preempt',\r\n    sequential: 'sequential'\r\n  },\r\n  backWardConfig: {\r\n    allowResubmitToThisNode:',resubmit to this node'\r\n  }\r\n};\r\n","export const zh_CHT = {\r\n  static: {\r\n    assignee: {\r\n      title: 'è«é¸æç¨æ¶',\r\n      noAssignee: 'è«é¸æè¾¦çäººå¡',\r\n      successAssign: 'æä½æå',\r\n    },\r\n    transfer: {\r\n      title: 'è«é¸æç¨æ¶',\r\n      selectHandover: 'è«é¸æç¨æ¶',\r\n      successTransfer: 'ä»»åç§»äº¤æå'\r\n    },\r\n    columnName: {\r\n      name: 'åç¨±',\r\n      code: 'ç·¨è',\r\n      department: 'çµç¹ä¿¡æ¯',\r\n    },\r\n    comment: {\r\n      successComment: 'ä»»åè©è«æå'\r\n    },\r\n    title: 'å¯©æ¹ç¢ºèª',\r\n    inputLabel: 'å¯©æ¹æè¦',\r\n    inputHolder: 'è«è¼¸å¥å¯©æ¹æè¦',\r\n    selectActivity: 'ä¸ä¸ç°ç¯',\r\n    addSignee: 'å ç°½äººå¡',\r\n    footOk: 'ç¢ºå®',\r\n    footCancel: 'åæ¶',\r\n    selectUser: 'é¸æç¨æ¶',\r\n    hideComment: 'æè¦é±è',\r\n  },\r\n  cueWords: {\r\n    successClaim: 'é ç¨æå',\r\n    successUnClaim: 'åæ¶é ç¨æå',\r\n    successRetrieve: 'ä»»åååæå',\r\n    successPass: 'å¯©æ¹éé',\r\n    successBack: 'é§åæå',\r\n    successRefuse: 'å¦æ±ºæå',\r\n    success: 'æä½æå',\r\n    inputOpinion: 'è«è¼¸å¥å¯©æ¹æè¦',\r\n    selectNode: 'è«é¸æä¸ä¸ç°ç¯',\r\n    select: 'è«é¸æ',\r\n    processor: 'è¾¦çäºº',\r\n    attachmentsRequired: 'è«ä¸å³éä»¶',\r\n    assignUser: 'ææ´¾'\r\n  },\r\n  task: {\r\n    selectPlaceholder: 'è«é¸æ',\r\n    passComment: 'éé',\r\n    processAlone: 'è«å®ç¨èç',\r\n    urgeText: 'æ¥æ¶äººå',\r\n    backNodeText: 'é§åç¯é»',\r\n    selectProcessor: 'è«é¸æè¾¦çäººå¡',\r\n    notFoundBill: 'è©²å®æä¸æ¯æå¨é»è¦ç«¯è¾¦çï¼è«åè©¦å»ç§»åç«¯é²è¡è¾¦ç',\r\n    nextNodeText: 'ä¸ä¸ç°ç¯',\r\n    assignText: 'è¾¦çäººå¡',\r\n    noUser: 'ç¡',\r\n    title: 'ä»»åè¾¦ç',\r\n    noTask: 'æªæ¾å°å°æçä»»å',\r\n    commentTooLong: 'å¯©æ¹æè¦è¶é·',\r\n    activityName: 'è¾¦çäººå¡',\r\n    receiver: \"æ¥æ¶äººå¡\",\r\n    urgeComment: \"è«è¼¸å¥å¬è¾¦ä¿¡æ¯\",\r\n    noUrgeUsers: \"æ²æç¬¦åæ¢ä»¶çå¬è¾¦ç¨æ¶\",\r\n    noUrgeSubject: \"æ¶æ¯ä¸»é¡æªéç½®\",\r\n    noUrgeContent: \"æ¶æ¯å§å®¹æªéç½®\",\r\n    person: \"äººå\",\r\n    addSign: \"å ç­¾\",\r\n  },\r\n  startProcess: {\r\n    selectProcess: 'è«é¸ææµç¨',\r\n    title: 'é¸ææµç¨',\r\n    selectNode: 'è«é¸æä¸ä¸ç°ç¯',\r\n    submitSuccess: 'æäº¤å¯©æ¹æå',\r\n    submitFailed: 'æäº¤å¯©æ¹å¤±æ',\r\n    cancelSubmitSuccess: 'åæ¶æäº¤æå',\r\n    cancelSubmitFailed: 'åæ¶æäº¤å¤±æ',\r\n    dataIdIsNull: 'è«é¸æä¸æ¢æ¸æ',\r\n    dataIdIsEmpty: 'è«é¸æä¸æ¢æ¸æ',\r\n    bizDefKeyIsNull: 'æµç¨åé¡IDä¸è½çºç©º',\r\n    success: 'åæ¶æå',\r\n    row: 'æ¢<br/>',\r\n    failed: 'åæ¶å¤±æ',\r\n    node: 'ç¯é»ï¼',\r\n    noUser: 'æ²ææ¾å°åé©çè¾¦çäºº'\r\n  },\r\n  batchSubmit: {\r\n    row: 'æ¢ï¼<br/>',\r\n    success: 'è¾¦çæå',\r\n    error: 'è¾¦çå¤±æ',\r\n    failed: 'éè¦äº¤äº',\r\n    single: 'å¤±æçä»»åè«å®ç¨èç'\r\n  },\r\n  batchStartProcess: {\r\n    row: 'æ¢ï¼<br/>',\r\n    success: 'æäº¤æå',\r\n    error: 'æäº¤å¤±æ',\r\n    failed: 'éè¦äº¤äº',\r\n    validationFailed: 'é©ç°½å¤±æ',\r\n    single: 'å¤±æçå®æè«å®ç¨èç'\r\n  },\r\n  comment: {\r\n    static: {\r\n      title: 'å¸¸ç¨æè¦ç®¡ç',\r\n      add: 'æ°å¢',\r\n      delete: 'åªé¤',\r\n      save: 'ä¿å­',\r\n      cancel: 'åæ¶',\r\n      content: 'å¸¸ç¨æè¦',\r\n      order: 'é åº',\r\n      inputLabel: 'å¸¸ç¨æè¦',\r\n      manage: 'æè¦ç®¡ç',\r\n      attachmentUpload: 'éä»¶',\r\n      repeatFile: 'åå«éå¾©æä»¶ï¼',\r\n      type: 'é¡å¥',\r\n      operate: 'æä½',\r\n      confirm: 'ç¢ºèª',\r\n      clickToAdd: 'æ°å¢å¸¸ç¨æè¦',\r\n      public: 'å¬æ',\r\n      private: 'åäºº',\r\n      messageSubject: 'æ¶æ¯ä¸»é¡',\r\n      messageContent: 'æ¶æ¯å§å®¹'\r\n    },\r\n    attachment: {\r\n      tips: 'é»æä¸å³éä»¶'\r\n    },\r\n    signature: {\r\n      title: 'ç°½å',\r\n      reset: 'æ¸ç©º',\r\n      ok: 'ç¢ºå®',\r\n      sign: 'æå¯«ç°½åï¼',\r\n      upload: 'ä¸å³åç',\r\n      tips: 'é»æè¨­ç½®ç°½å',\r\n      dialogTitle: 'é»å­ç°½å',\r\n      note1: 'é»å­ç°½åå¯',\r\n      note2: 'ä¹å¯éé',\r\n      note3: 'é²è¡è¨­ç½®',\r\n      disable: 'ä¸åç¨ç°½å'\r\n    }\r\n  },\r\n  addSign: {\r\n    allowSignToSign: 'åè¨±å',\r\n    multiInstanceType: 'å¤äººå¯©æ¹æ¹å¼',\r\n    parallel: 'ä¸¦è¡æç°½',\r\n    preempt: 'ä»»æäººèç',\r\n    sequential: 'æé åºä¾æ¬¡èç'\r\n  },\r\n  backWardConfig: {\r\n    allowResubmitToThisNode:'ååæ¬¡æäº¤æ¶ç´æ¥åå°æ¬èç¹'\r\n  }\r\n};\r\n","export const zh_CHS = {\r\n  static: {\r\n    assignee: {\r\n      title: 'è¯·éæ©ç¨æ·',\r\n      noAssignee: 'è¯·éæ©åçäººå',\r\n      successAssign: 'æä½æå',\r\n    },\r\n    transfer: {\r\n      title: 'è¯·éæ©ç¨æ·',\r\n      selectHandover: 'è¯·éæ©ç¨æ·',\r\n      successTransfer: 'ä»»å¡ç§»äº¤æå'\r\n    },\r\n    columnName: {\r\n      name: 'åç§°',\r\n      code: 'ç¼å·',\r\n      department: 'ç»ç»ä¿¡æ¯',\r\n    },\r\n    comment: {\r\n      successComment: 'ä»»å¡è¯è®ºæå'\r\n    },\r\n    title: 'å®¡æ¹ç¡®è®¤',\r\n    inputLabel: 'å®¡æ¹æè§',\r\n    inputHolder: 'è¯·è¾å¥å®¡æ¹æè§',\r\n    selectActivity: 'ä¸ä¸ç¯è',\r\n    footOk: 'ç¡®å®',\r\n    footCancel: 'åæ¶',\r\n    selectUser: 'éæ©ç¨æ·',\r\n    hideComment: 'æè§éè',\r\n  },\r\n  cueWords: {\r\n    successClaim: 'é¢ç¨æå',\r\n    successUnClaim: 'åæ¶é¢ç¨æå',\r\n    successRetrieve: 'ä»»å¡ååæå',\r\n    successPass: 'å®¡æ¹éè¿',\r\n    successBack: 'é©³åæå',\r\n    successRefuse: 'å¦å³æå',\r\n    success: 'æä½æå',\r\n    inputOpinion: 'è¯·è¾å¥å®¡æ¹æè§',\r\n    selectNode: 'è¯·éæ©ä¸ä¸ç¯è',\r\n    select: 'è¯·éæ©',\r\n    processor: 'åçäºº',\r\n    attachmentsRequired: 'è¯·ä¸ä¼ éä»¶',\r\n    assignUser: 'ææ´¾'\r\n  },\r\n  task: {\r\n    selectPlaceholder: 'è¯·éæ©',\r\n    passComment: 'éè¿',\r\n    processAlone: 'è¯·åç¬å¤ç',\r\n    urgeText: 'æ¥æ¶äººå',\r\n    backNodeText: 'é©³åèç¹',\r\n    selectProcessor: 'è¯·éæ©åçäººå',\r\n    notFoundBill: 'è¯¥åæ®ä¸æ¯æå¨çµèç«¯åçï¼è¯·å°è¯å»ç§»å¨ç«¯è¿è¡åç',\r\n    nextNodeText: 'ä¸ä¸ç¯è',\r\n    assignText: 'åçäººå',\r\n    noUser: 'æ ',\r\n    title: 'ä»»å¡åç',\r\n    noTask: 'æªæ¾å°å¯¹åºçä»»å¡',\r\n    commentTooLong: 'å®¡æ¹æè§è¶é¿',\r\n    activityName: 'åçäººå',\r\n    receiver: \"æ¥æ¶äººå\",\r\n    urgeComment: \"è¯·è¾å¥å¬åä¿¡æ¯\",\r\n    noUrgeUsers: \"æ²¡æç¬¦åæ¡ä»¶çå¬åç¨æ·\",\r\n    noUrgeSubject: \"æ¶æ¯ä¸»é¢æªéç½®\",\r\n    noUrgeContent: \"æ¶æ¯åå®¹æªéç½®\",\r\n    person: \"äººå\",\r\n    addSign: \"å ç­¾\",\r\n  },\r\n  startProcess: {\r\n    selectProcess: 'è¯·éæ©æµç¨',\r\n    title: 'éæ©æµç¨',\r\n    selectNode: 'è¯·éæ©ä¸ä¸ç¯è',\r\n    submitSuccess: 'æäº¤å®¡æ¹æå',\r\n    submitFailed: 'æäº¤å®¡æ¹å¤±è´¥',\r\n    cancelSubmitSuccess: 'åæ¶æäº¤æå',\r\n    cancelSubmitFailed: 'åæ¶æäº¤å¤±è´¥',\r\n    dataIdIsNull: 'è¯·éæ©ä¸æ¡æ°æ®',\r\n    dataIdIsEmpty: 'è¯·éæ©ä¸æ¡æ°æ®',\r\n    bizDefKeyIsNull: 'æµç¨åç±»IDä¸è½ä¸ºç©º',\r\n    success: 'åæ¶æå',\r\n    row: 'æ¡<br/>',\r\n    failed: 'åæ¶å¤±è´¥',\r\n    node: 'èç¹ï¼',\r\n    noUser: 'æ²¡ææ¾å°åéçåçäºº'\r\n  },\r\n  batchSubmit: {\r\n    row: 'æ¡ï¼<br/>',\r\n    success: 'åçæå',\r\n    error: 'åçå¤±è´¥',\r\n    failed: 'éè¦äº¤äº',\r\n    single: 'å¤±è´¥çä»»å¡è¯·åç¬å¤ç'\r\n  },\r\n  batchStartProcess: {\r\n    row: 'æ¡ï¼<br/>',\r\n    success: 'æäº¤æå',\r\n    error: 'æäº¤å¤±è´¥',\r\n    failed: 'éè¦äº¤äº',\r\n    validationFailed: 'éªç­¾å¤±è´¥',\r\n    single: 'å¤±è´¥çåæ®è¯·åç¬å¤ç'\r\n  },\r\n  comment: {\r\n    static: {\r\n      title: 'å¸¸ç¨æè§ç®¡ç',\r\n      add: 'æ°å¢',\r\n      delete: 'å é¤',\r\n      save: 'ä¿å­',\r\n      cancel: 'åæ¶',\r\n      content: 'å¸¸ç¨æè§',\r\n      order: 'é¡ºåº',\r\n      inputLabel: 'å¸¸ç¨æè§',\r\n      manage: 'æè§ç®¡ç',\r\n      attachmentUpload: 'éä»¶',\r\n      repeatFile: 'åå«éå¤æä»¶ï¼',\r\n      type: 'ç±»å«',\r\n      operate: 'æä½',\r\n      confirm: 'ç¡®è®¤',\r\n      clickToAdd: 'æ°å¢å¸¸ç¨æè§',\r\n      public: 'å¬æ',\r\n      private: 'ä¸ªäºº',\r\n      messageSubject: 'æ¶æ¯ä¸»é¢',\r\n      messageContent: 'æ¶æ¯åå®¹'\r\n    },\r\n    attachment: {\r\n      tips: 'ç¹å»ä¸ä¼ éä»¶'\r\n    },\r\n    signature: {\r\n      title: 'ç­¾å',\r\n      reset: 'æ¸ç©º',\r\n      ok: 'ç¡®å®',\r\n      sign: 'æåç­¾åï¼',\r\n      upload: 'ä¸ä¼ å¾ç',\r\n      tips: 'ç¹å»è®¾ç½®ç­¾å',\r\n      dialogTitle: 'çµå­ç­¾å',\r\n      note1: 'çµå­ç­¾åå¯',\r\n      note2: 'ä¹å¯éè¿',\r\n      note3: 'è¿è¡è®¾ç½®',\r\n      disable: 'ä¸å¯ç¨ç­¾å'\r\n    }\r\n  },\r\n  addSign: {\r\n    allowSignToSign: 'åè®¸å',\r\n    multiInstanceType: 'å¤äººå®¡æ¹æ¹å¼',\r\n    parallel: 'å¹¶è¡ä¼ç­¾',\r\n    preempt: 'ä»»æäººå¤ç',\r\n    sequential: 'æé¡ºåºä¾æ¬¡å¤ç'\r\n  },\r\n  backWardConfig: {\r\n    allowResubmitToThisNode:'ååæ¬¡æäº¤æ¶ç´æ¥åå°æ¬èç¹'\r\n  }\r\n};\r\n","import { en } from './en';\r\nimport { zh_CHT } from './zh-cht';\r\nimport { zh_CHS } from './zh-chs';\r\n\r\nexport const translate = {\r\n    'zh-CHS': zh_CHS,\r\n    'en': en,\r\n    'zh-CHT': zh_CHT\r\n};\r\n","import { Pipe, PipeTransform, Injectable } from '@angular/core';\r\nimport { Observable, of } from 'rxjs';\r\nimport { translate } from './index';\r\n\r\n@Injectable()\r\nexport class I18nService {\r\n    defaultLang: string;\r\n    langData: any;\r\n    constructor() {\r\n        this.defaultLang = localStorage.getItem('languageCode');\r\n        if (!this.defaultLang) {\r\n            this.langData = translate['zh-CHS'];\r\n        } else {\r\n            this.langData = translate[this.defaultLang];\r\n        }\r\n    }\r\n\r\n    getValue(name: string): any {\r\n        if (!name) {\r\n            return '';\r\n        }\r\n        let resultVal = '';\r\n        if (name.indexOf('.') === -1) {\r\n            resultVal = this.langData[name];\r\n        } else {\r\n            resultVal = name.split('.').reduce((obj, key) => {\r\n                if (obj) {\r\n                    return obj[key];\r\n                } else {\r\n                    return null;\r\n                }\r\n            }, this.langData);\r\n        }\r\n        return resultVal;\r\n    }\r\n}\r\n","import { TaskAction, ActionParameter } from './task-action';\r\n\r\n/**\r\n * ä»»å¡ç¶æ\r\n */\r\nexport enum TaskState {\r\n    /**\r\n     * å¾å\r\n     */\r\n    todo = 2,\r\n    /**\r\n     * å·²å\r\n     */\r\n    done = 5,\r\n}\r\n/**\r\n * ä»»å¡å®ä½å®ä¹\r\n */\r\nexport class TaskEntity {\r\n\r\n    id: string;\r\n\r\n    name: string;\r\n\r\n    categoryId: string;\r\n\r\n    state: TaskState;\r\n\r\n    startTime: Date;\r\n\r\n    endTime?: Date;\r\n\r\n    dueDate?: string;\r\n\r\n    targetDate?: string;\r\n\r\n    owner: string;\r\n\r\n    executor: string;\r\n\r\n    sourceId: string;\r\n\r\n    description: string;\r\n\r\n    taskType: number;\r\n\r\n    priority: number;\r\n\r\n    submitter: string;\r\n\r\n    processInstanceId: string;\r\n\r\n    fStr1: string;\r\n    fStr2: string;\r\n    fStr3: string;\r\n    fStr4: string;\r\n    fStr5: string;\r\n    fStr6: string;\r\n    fStr7: string;\r\n    fStr8: string;\r\n\r\n    fTime1?: Date;\r\n    fTime2?: Date;\r\n    fTime3?: Date;\r\n    fTime4?: Date;\r\n\r\n    fDec1: number;\r\n    fDec2: number;\r\n    fDec3: number;\r\n    fDec4: number;\r\n\r\n    fText1: string;\r\n    fText2: string;\r\n    fText3: string;\r\n    fText4: string;\r\n\r\n    actions: TaskAction[];\r\n    refBizId: string;\r\n    conclusionValue: string;\r\n}\r\n","import { FlowNodeInfo } from './start-process-payload';\r\n\r\nexport class CompleteContext {\r\n\r\n    workItemId: string;\r\n\r\n    conclusionValue: string;\r\n\r\n    comment: string;\r\n\r\n    signAssignees: string[];\r\n\r\n    nextFlowNodes: FlowNodeInfo[];\r\n\r\n    addendum: Addendum;\r\n\r\n    verifySigned?: VerifySigned;\r\n\r\n    dynamicBackWardRule: string;\r\n}\r\n\r\nexport class Addendum {\r\n\r\n    signature: string;\r\n\r\n    attachment: string;\r\n}\r\n\r\nexport class VerifySigned {\r\n\r\n    certBase64Info: string;\r\n\r\n    msg: string[];\r\n\r\n    signedmsg: string;\r\n\r\n    useCase: string;\r\n}\r\n","import { OrganizationScope } from './organization-scope';\r\nimport { User } from './user';\r\nimport { FlowNodeInfo } from './start-process-payload';\r\nimport { ProcessDefinition } from './execution-response';\r\nimport { Addendum } from './complete-context';\r\n\r\n/**\r\n * æå®åä¸èä¿¡æ¯ï¼éè¦æå®åä¸èçæ´»å¨ãå¾æå®ç¨æ·åè¡¨\r\n */\r\nexport class AssigneeInfo {\r\n\r\n    /**\r\n     * å·¥ä½é¡¹ID\r\n     */\r\n    workItemId: string;\r\n\r\n    /**\r\n     * åä¸èåè¡¨\r\n     */\r\n    assigneeIds: string[];\r\n\r\n    /**\r\n     * åä¸èç¨æ·åè¡¨\r\n     */\r\n    assigneeUsers: User[];\r\n\r\n    /**\r\n     * æ¯å¦åè®¸ææ´¾\r\n     */\r\n    selectAssignee: boolean;\r\n\r\n    /**\r\n     * æ¯å¦å¤é\r\n     */\r\n    multiSelect: boolean;\r\n\r\n    /**\r\n     * æ¯å¦åè®¸å¨åææ´¾\r\n     */\r\n    allowGlobalAssign: boolean;\r\n\r\n    /**\r\n     * ææ´¾èå´\r\n     */\r\n    organizationScope: OrganizationScope[];\r\n}\r\n\r\n/**\r\n * æ ¹æ®æµç¨æå®ä¸ä¸æ­¥åä¸èåæ°\r\n */\r\nexport class AssignParameter {\r\n\r\n    workItemId: string;\r\n\r\n    assigneeIds: string[];\r\n\r\n    comment: string;\r\n\r\n    addendum?: Addendum;\r\n}\r\n\r\n\r\n/**\r\n * å®æå·¥ä½é¡¹è¿åç»æ\r\n */\r\nexport class CompleteResponse {\r\n\r\n    dataId: string;\r\n\r\n    needInteraction: boolean;\r\n\r\n    nextAssigneeInfos: AssigneeInfo[];\r\n\r\n    procInstId: string;\r\n\r\n    nextFlowNodes: FlowNodeInfo[];//æäº¤åå¹¶è¡çæåµ\r\n\r\n    procDefs: ProcessDefinition[];\r\n}\r\n\r\n","/**\r\n * ä»»å¡ä¸­å¿éç½®\r\n */\r\nexport class TaskCenterConfig {\r\n\r\n    id: string;\r\n\r\n    configCode: string;\r\n\r\n    configName: string;\r\n\r\n    configNote: string;\r\n\r\n    defaultValue: string;\r\n\r\n    currentValue: string;\r\n\r\n    displayText: string;\r\n\r\n    ownerId: string;\r\n\r\n    ownerType: string;\r\n\r\n    creator: string;\r\n\r\n    createTime: string;\r\n\r\n    lastModifier: string;\r\n\r\n    lastModifiedTime: string;\r\n\r\n}\r\n\r\n/**\r\n * ä»»å¡ä¸­å¿èªå®ä¹éç½®é¡¹Code\r\n */\r\nexport enum ConfigCode {\r\n\r\n    If_Show_Submit_Dialog = 'If_Show_Submit_Dialog',\r\n\r\n    Info_After_Submit = 'Info_After_Submit',\r\n\r\n    Info_After_Cancel_Submit = 'Info_After_Cancel_Submit',\r\n\r\n    If_Use_Sign_By_Default = 'If_Use_Sign_By_Default',\r\n\r\n    If_Show_Attachment = 'If_Show_Attachment',\r\n\r\n    If_Show_Signature = 'If_Show_Signature',\r\n\r\n    Default_Approval_Comment = 'Default_Approval_Comment',\r\n\r\n    If_Store_Comment = 'If_Store_Comment',\r\n\r\n    User_Help_Type = 'User_Help_Type',\r\n\r\n    If_Can_Edit_Signature = 'If_Can_Edit_Signature'\r\n}\r\n\r\n/**\r\n * éç½®é¡¹çæçº§å«\r\n */\r\nexport enum OwnerType {\r\n\r\n    User = 'user',//ç¨æ·çº§\r\n\r\n    Category = 'category',//ä»»å¡åç±»çº§å«\r\n\r\n    BizDefKey = 'bizdefkey',//æµç¨åç±»çº§å«\r\n\r\n    All = 'all',//å¨å±çº§å«\r\n}","import { Addendum } from \"./complete-context\";\r\n\r\n/**\r\n * ä»»å¡åçåæ°\r\n */\r\nexport class WorkItemExecuteParam {\r\n\r\n    workItemId: string;\r\n\r\n    comment: string;\r\n\r\n    addendum: Addendum;\r\n\r\n    hideComment?: boolean;\r\n}\r\n\r\n/**\r\n * å ç­¾ãå¾è¯¢ãç¥ä¼åæ°\r\n */\r\nexport class CounterSignParam extends WorkItemExecuteParam {\r\n\r\n    action: string;//AddSignFrontãAddSignBehindãNotify\r\n\r\n    assignees: string[];\r\n\r\n}","import {User} from \"./user\";\r\n\r\n/**\r\n * å¬åæ¨¡ææ¥å£è¯·æ±body\r\n */\r\nexport class UrgeHandleSimulateContext {\r\n\r\n  procInstId: string;\r\n\r\n}\r\n\r\n/**\r\n * å¬åæ¨¡æè¿åå®ä½\r\n */\r\nexport class UrgeHandleResponse {\r\n\r\n  urgeUsers: UrgeUser[];\r\n\r\n}\r\n\r\n/**\r\n * å¬åç¨æ·è¿åå®ä½\r\n */\r\nexport class UrgeUser extends User {\r\n\r\n  urgeInfos: UrgeInfo[];\r\n\r\n  anonymousText: string;\r\n\r\n  sendTypes: string;\r\n\r\n}\r\n\r\n/**\r\n * æ§è¡å¬åè¯·æ±body\r\n */\r\nexport class UrgeHandleContext {\r\n\r\n  procInstId: string;\r\n\r\n  urgeUsers: UrgeUser[];\r\n\r\n  urgeMessageSubject: string;\r\n\r\n  urgeMessageContent: string;\r\n\r\n  addReminder: boolean;\r\n\r\n}\r\n\r\nexport class UrgeInfo {\r\n\r\n  workItemId: string;\r\n\r\n  activityInstanceId: string;\r\n\r\n  sendTypes: string;\r\n\r\n  urgeMessageSubject: string;\r\n\r\n  urgeMessageContent: string;\r\n\r\n  addReminder: boolean;\r\n\r\n  subjectEditable: boolean;\r\n\r\n  contentEditable: boolean;\r\n}\r\n","export class BatchVerifySignedContext {\r\n\r\n  verifySigned: VerifySigned;\r\n\r\n}\r\nexport class VerifySigned {\r\n\r\n  certBase64Info: string;\r\n\r\n  msg: string[];\r\n\r\n  signedmsg: string;\r\n\r\n  useCase: string;\r\n\r\n}\r\n","/**\r\n * å·¥ä½æµä¸ä¸æ\r\n */\r\nexport class WfContext {\r\n\r\n    processCategoryId: string;\r\n    \r\n}","import { Component, Input, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'urge-handle',\r\n  templateUrl: './urge-handle.component.html',\r\n  styleUrls: ['./urge-handle.component.css', '../task-execute/task-execute.component.css']\r\n})\r\nexport class UrgeHandleComponent implements OnInit {\r\n\r\n  @Input() placeholder = '';\r\n  @Input() showMessageSubject = false;// æ¯å¦æ¾ç¤ºæ¶æ¯ä¸»é¢\r\n  @Input() textAreaHeight: number;//æå­æ¡çé«åº¦\r\n  @Input() urgeMessageSubject: string; // æ¶æ¯ä¸»é¢ææ¬\r\n  @Input() urgeMessageContent: string; // æ¶æ¯åå®¹ææ¬\r\n  @Input() subjectEditable: boolean = false; // æ¶æ¯ä¸»é¢æ¯å¦å¯ç¼è¾\r\n  @Input() contentEditable: boolean = false; // æ¶æ¯åå®¹æ¯å¦å¯ç¼è¾\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n","import { BasePayload } from \"./base-payload\";\r\nimport { OrganizationScope } from \"./organization-scope\";\r\n\r\n/**\r\n * å ç­¾æ¨¡ææ¥å£è¿å\r\n */\r\nexport class AddSignSimulateResponse {\r\n    /**\r\n     * ç»ç»\r\n     */\r\n    organization: OrganizationScope;\r\n    /**\r\n     * å¤äººä¼ç­¾æ¹å¼\r\n     */\r\n    multiInstanceType: MultiInstanceType;\r\n    /**\r\n     * æ¯å¦åè®¸åå ç­¾\r\n     */\r\n    showSignToSign: boolean;\r\n}\r\n\r\n/**\r\n *  å¤äººä¼ç­¾æ¹å¼\r\n */\r\nexport enum MultiInstanceType {\r\n    /**\r\n     * æ¢å \r\n     */\r\n    Preempt = 'Preempt',\r\n    /**\r\n     * å¹¶è¡\r\n     */\r\n    Parallel = 'Parallel',\r\n    /**\r\n     * ä¸²è¡\r\n     */\r\n    Sequential = 'Sequential'\r\n\r\n}\r\n\r\n/**\r\n * å ç­¾æäº¤çpayload\r\n */\r\nexport class AddSignPayload extends BasePayload {\r\n\r\n    /**\r\n     * å ç­¾æ¹å¼ï¼åå ç­¾ãåå ç­¾ãå¹¶å ç­¾ï¼å½åä¼ç­¾ï¼ãå¾è¯¢/åå\r\n     */\r\n    actionCode: string;\r\n\r\n    /**\r\n     * å¤äººä¼ç­¾æ¹å¼ï¼æ¢å  Preemptãå¹¶è¡ä¼ç­¾ Parallelãä¸²è¡ä¼ç­¾Sequential\r\n     */\r\n    multiInstanceType: string;\r\n\r\n    /**\r\n     * ä¼ç­¾ç­ç¥ï¼å¨åéè¿allPassãä¸äººéè¿onePass\r\n     */\r\n    counterSignRule: string;\r\n\r\n    /**\r\n     * åçè§å\r\n     * allææç¨æ·é½åç\r\n     * complianceç¬¦åè§åå¾ä¸æµè½¬\r\n     */\r\n    completedRule: string;\r\n\r\n    /**\r\n     * å ç­¾äººå\r\n     */\r\n    signAssignees: string[];\r\n\r\n    /**\r\n     * å ç­¾èç¹åç§°\r\n     */\r\n    activityName: string;\r\n\r\n    /**\r\n     * åè®¸åå ç­¾\r\n     */\r\n    allowSignToSign: boolean;\r\n\r\n\r\n}","import {\r\n  Component,\r\n  OnInit,\r\n  ViewChild,\r\n  TemplateRef,\r\n  HostBinding,\r\n  Injector,\r\n  AfterViewInit,\r\n  ChangeDetectorRef,\r\n  Input\r\n} from '@angular/core';\r\nimport { Addendum, VerifySigned, CompleteContext } from '../../entity/complete-context';\r\nimport { TaskService } from '../../service/task.service';\r\nimport { SysFarrisLookupComponent } from '@gsp-sys/sysmgr-ui';\r\nimport { NotifyService } from '@farris/ui-notify';\r\nimport { I18nService } from '../../service/i18n/i18n.service';\r\nimport { CompleteResponse, AssignParameter, AssigneeInfo } from '../../entity/complete-response';\r\nimport { Observable, BehaviorSubject, Subject } from 'rxjs';\r\nimport { TaskAction } from '../../entity/task-action';\r\nimport { WfTaskHandlerService } from '../../wf-task-handler.service';\r\nimport { TaskEntity } from '../../entity/task-entity';\r\nimport { SubmitResult, ActionBaseImplComponent, ActionEvent, TaskEventResult, TaskEventContext, ActionOrigin } from '@gsp-wf/task-impl-api';\r\nimport { LoadingService } from '@farris/ui-loading';\r\nimport { OrganizationScope } from '../../entity/organization-scope';\r\nimport { FlowNodeInfo, Assignee } from '../../entity/start-process-payload';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { AssignInfoHelpEntity } from '../../entity/assignInfoHelp';\r\nimport { SimulateResponse } from '../../entity/simulate-response';\r\nimport { BillMethodConfig, FormEventMessage } from '../../entity/formAction';\r\nimport { ConfigCode, TaskCenterConfig, OwnerType } from '../../entity/task-center-config';\r\nimport { CounterSignParam, WorkItemExecuteParam } from '../../entity/workitem-execute-param';\r\nimport { UrgeHandleContext, UrgeHandleResponse, UrgeHandleSimulateContext } from '../../entity/urge-handle';\r\nimport { BatchVerifySignedContext } from '../../entity/batchVerifysigned';\r\nimport { WfContext } from '../../entity/wfContext';\r\nimport { UrgeHandleComponent } from \"../urge-handle/urge-handle.component\";\r\nimport { AddSignPayload, AddSignSimulateResponse, MultiInstanceType } from '../../entity/add-sign';\r\n\r\ndeclare var System: any;\r\ndeclare const gspCA: any;\r\n\r\n@Component({\r\n  selector: 'lib-task-execute',\r\n  templateUrl: './task-execute.component.html',\r\n  styleUrls: ['./task-execute.component.css'],\r\n})\r\nexport class TaskExecuteComponent extends ActionBaseImplComponent implements OnInit, AfterViewInit {\r\n\r\n  /**\r\n   * æ¶æ¯çå¬å¤çæ¹æ³\r\n   */\r\n  private static func = null;\r\n  task: TaskEntity;//å½åä»»å¡\r\n  workItemId: string; // å·¥ä½é¡¹ID\r\n  processInstanceId: string; // æµç¨å®ä¾ID\r\n  actionEntity = new TaskAction(); // å¨ä½å®ä½\r\n  comment = ''; // å®¡æ¹æè§\r\n  wfCacheComment: string;//ç¼å­çæè§\r\n  currentDefaultValue: string;//å½åå¨ä½çé»è®¤æè§\r\n\r\n  ifSelectNode = false; // æ¯å¦æ¾ç¤ºéæ©ä¸ä¸ç¯è\r\n  ifSelectUser = false; // æ¯å¦æ¾ç¤ºä¸ä¸ç¯èå¤çäºº\r\n  ifAssignUser = false; // æ¯å¦æ¾ç¤ºåçäººåæ¡\r\n  ifUrgeType = false; // æ¯å¦æ¾ç¤ºæ¥æ¶äººæ¡ï¼å¬åæ¶æ¯æ¥æ¶äººï¼\r\n  ifShowCommentToMySelf = false;// æ¯å¦æ¾ç¤ºå®¡æ¹è®°å½ä»èªå·±å¯è§\r\n\r\n  singleSelect = false; // ç¨æ·å¸®å©æ¯å¦åéï¼é»è®¤å¤é\r\n  selectTargetAble = false; // æ¯å¦åè®¸éæ©ä¸ä¸ç¯è\r\n  hideComment = false;//å®¡æ¹è®°å½ä»èªå·±å¯è§\r\n\r\n  filter = { notGetCurrentUser: true, notGetStopUser: true, orderField: 'order', withAllOrg: true, orgId: '' }; // ç³»ç»ç¨æ·å¸®å©æ¯å¦è¿æ»¤å½åäºº\r\n  selectedUsers: string[] = []; // ç¨æ·å¸®å©éæ©åçIdæ°ç»\r\n\r\n  selectedUserNgModule: string; // éæ©å¤çäººçplaceholder\r\n\r\n  @ViewChild('taskExecuteButtons') buttons: TemplateRef<any>; // ç¡®è®¤åæ¶æé®\r\n  @ViewChild(SysFarrisLookupComponent) sysUserHelp: SysFarrisLookupComponent; // ç³»ç»ç¨æ·å¸®å©\r\n  @ViewChild(UrgeHandleComponent) urgeHandleComponent: UrgeHandleComponent;\r\n\r\n  subject = new BehaviorSubject<SubmitResult>(null);\r\n  submitResult: SubmitResult = { result: true, isClose: true }; // å¨ä½æ§è¡å®æåè¿åçå®ä½ç»æ\r\n  bindingData: { id?: string, name?: string } = {}; // ç³»ç»å¸®å©å¤éæ¶ç¨å°\r\n\r\n  selectNodeText: string = this.i18nService.getValue('task.nextNodeText'); // ä¸ä¸ç¯èæ¾ç¤ºçæå­,\"ä¸ä¸ç¯è\"\r\n  selectUserText: string; // å¤çäººåæ¾ç¤ºæå­\r\n  commentPlaceHolder: string = this.i18nService.getValue('static.inputHolder');//å®¡æ¹æè§æ¡placeholder\r\n  showAttachment: boolean = true;//æ¯å¦æ¾ç¤ºéä»¶ä¸ä¼ \r\n  showSign: boolean = true;//æ¯å¦æ¾ç¤ºç­¾å\r\n  showCommonComment: boolean = true;//æ¯å¦æ¾ç¤ºå¸¸ç¨æè§\r\n  textAreaHeight: number = 84;//æå­æ¡çé«åº¦\r\n\r\n  nodePlaceholder: string; // éæ©ä¸ä¸ç¯èçplaceholder\r\n\r\n  selectedNodeId: string; // éæ©çä¸ä¸ç¯èIDï¼å¹¶è¡åæ¯æ¯ï¼éå·éå¼ç\r\n  destNodes: { id: string, name: string }[] = []; // åéä¸ä¸ç¯è\r\n\r\n  dialogHeight = 270; // å¼¹æ¡çé«åº¦\r\n  dialogHeightBase = 66;\r\n\r\n  addendum = new Addendum(); // éä»¶ãç­¾åä¿¡æ¯\r\n  groupIcon = '<i class=\"f-icon f-icon-lookup\"></i>';\r\n\r\n  assignInfos: AssignInfoHelpEntity[] = [{ // èç¹è¿åçææ´¾ä¿¡æ¯ï¼å¤ä¸ªï¼\r\n    selectedAssignees: [],\r\n    assigneeInfo: null,\r\n    assignees: [],\r\n    activityName: '',\r\n    dependency: '',\r\n    anonymous: false,\r\n    anonymousText: null,\r\n    resolved: false,\r\n  }];\r\n\r\n  response: SimulateResponse; // ä¿å­æ¨¡æå®¡æ¹åè¿åçåå®¹ï¼éæ©èç¹æ¶ä½¿ç¨\r\n  urgeHandleResponse: UrgeHandleResponse;//ä¿å­å¬åæ¨¡æåè¿åçåå®¹\r\n\r\n  formObject: any; // è¡¨åå¯¹è±¡\r\n  ifRegistered = false; // è¡¨åæ¯å¦æ³¨å\r\n  billMethodConfigs: BillMethodConfig[] = []; // è¡¨åå¨ä½éç½®åè¡¨\r\n  configList: TaskCenterConfig[] = []; //ä»»å¡ä¸­å¿éç½®é¡¹\r\n\r\n  verifySigned: VerifySigned = new VerifySigned(); // æ°å­éªç­¾åæ°\r\n  submitDisable: boolean = false; // æäº¤æé®æ¯å¦ç¦ç¨\r\n\r\n  //å ç­¾ä½¿ç¨\r\n  addSign = {\r\n    showSignToSign: false,\r\n    allowSignToSIgn: false,\r\n    showMultiInstanceType: false,\r\n    multiInstanceType: [\r\n      { value: 'Parallel', name: this.i18nService.getValue('addSign.parallel') },\r\n      { value: 'Sequential', name: this.i18nService.getValue('addSign.sequential') },\r\n      { value: 'Preempt', name: this.i18nService.getValue('addSign.preempt') },\r\n    ],\r\n    originMultiInstType: '',\r\n    curMultiInstType: MultiInstanceType.Parallel.toString()\r\n  }\r\n  //å¨æé©³åéç½®\r\n  showBackWardConfig = {\r\n    dynamicBackWardRuleAble: false,\r\n    enable: false,\r\n  }\r\n\r\n  /**\r\n   * ä»»å¡å¬åæ¶ä½¿ç¨\r\n   */\r\n  showUrgeMessageSubject: boolean = false; // æ¯å¦æ¾ç¤ºå¬åæ¶æ¯ä¸»é¢ï¼å¬åæ¶ä½¿ç¨ï¼\r\n  urgeMessageSubject: string; // å¬åæ¶æ¯ä¸»é¢ææ¬\r\n  urgeMessageContent: string; // å¬åæ¶æ¯åå®¹ææ¬\r\n  addReminder: boolean; // æ¯å¦æ¾ç¤ºå¬åäººæ¶æ¯\r\n  subjectEditable: boolean; // ä¸»é¢å¯ç¼è¾\r\n  contentEditable: boolean; // åå®¹å¯ç¼è¾\r\n\r\n  wfContext = new WfContext();//å·¥ä½æµä¸ä¸æ\r\n\r\n  @HostBinding('class') cls = '';\r\n\r\n  POST_MESSAGE_TARGET = window.document.location.origin;\r\n  private messageSubject;\r\n\r\n\r\n  constructor(\r\n    private taskService: TaskService,\r\n    private notify: NotifyService,\r\n    private i18nService: I18nService,\r\n    private handlerService: WfTaskHandlerService,\r\n    private loadingService: LoadingService,\r\n    private message: MessagerService,\r\n    private injector: Injector,\r\n    private cd: ChangeDetectorRef,\r\n  ) {\r\n    super();\r\n    // å¦æå­å¨æ¶æ¯çå¬ï¼åå æ\r\n    if (TaskExecuteComponent.func) {\r\n      window.removeEventListener('message', TaskExecuteComponent.func, false);\r\n    }\r\n    this.addMessageListener();\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n  }\r\n\r\n  ngOnInit() {\r\n    const load = this.loadingService.show();\r\n    this.taskService.getAllUserConfig().subscribe((configList: TaskCenterConfig[]) => {\r\n      load.close();\r\n      this.configList = configList;\r\n      const comment = configList.find(c => c.configCode === ConfigCode.Default_Approval_Comment);\r\n      const if_store_comment = configList.find(c => c.configCode === ConfigCode.If_Store_Comment);\r\n      let passComment: string;\r\n      let backComment: string;\r\n      if (comment && comment.currentValue) {\r\n        passComment = JSON.parse(comment.currentValue).pass;\r\n        backComment = JSON.parse(comment.currentValue).back;\r\n        if (this.actionEntity.code === 'Pass') {\r\n          this.comment = passComment;\r\n        }\r\n        if (this.actionEntity.code === 'Back') {\r\n          this.comment = backComment;\r\n        }\r\n      }\r\n      if (if_store_comment && if_store_comment.currentValue === 'true') {\r\n        if (this.wfCacheComment) {\r\n          if (this.actionEntity.code == 'Back' && this.wfCacheComment == passComment) {\r\n          } else {\r\n            this.comment = this.wfCacheComment;\r\n          }\r\n        }\r\n      }\r\n    }, () => {\r\n      load.close();\r\n    })\r\n    // ä»ä»»å¡åççé¢æå¼æ¶ï¼ææ³¨åæå¡\r\n    if (this.origin === ActionOrigin.TaskForm) {\r\n      this.initFormEvent();\r\n\r\n      // è·åè¡¨åæä½éç½®\r\n      this.taskService.getAppInfo(this.workItemId).subscribe((re: any) => {\r\n        if (re && re.billMethodConfigs && re.billMethodConfigs.length) {\r\n          this.billMethodConfigs = re.billMethodConfigs;\r\n        }\r\n      });\r\n    }\r\n    let context = new UrgeHandleSimulateContext();\r\n    context.procInstId = this.processInstanceId;\r\n  }\r\n\r\n  private addMessageListener() {\r\n    window.addEventListener('message', this.eventHandler, false);\r\n    TaskExecuteComponent.func = this.eventHandler;\r\n  }\r\n\r\n  /**\r\n   * çå¬äºä»¶å¤ç\r\n   */\r\n  eventHandler = (event) => {\r\n    this.messageSubject.next(event);\r\n  }\r\n\r\n  /**\r\n   * éåç¶ç±»æ¹æ³\r\n   * @param task\r\n   */\r\n  setTask(task: TaskEntity) {\r\n    if (task) {\r\n      this.task = task;\r\n      this.workItemId = task.sourceId;\r\n      this.processInstanceId = task.processInstanceId;\r\n      this.wfContext.processCategoryId = task.categoryId;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * éåç¶ç±»æ¹æ³\r\n   * @param action\r\n   */\r\n  setAction(action: TaskAction) {\r\n    if (action) {\r\n      this.actionEntity = action;\r\n      if (this.task) {// åä¸ªãæ¹éé½setActionï¼åä¸ªææ§è¡æ¨¡æ\r\n        this.execute(this.actionEntity);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * åäºä»¶åå§åï¼å°æå¡æ³¨åå°windowä¸ï¼ä¾è¡¨åè°ç¨\r\n   * ä»»å¡åççé¢çwindowï¼è¡¨åçwindow.parent\r\n   */\r\n  private initFormEvent() {\r\n    // å®¡æ¹åäºä»¶\r\n    const actionToken = this.workItemId + 'action';\r\n    const subjectCode = 'FormSubjectCode';\r\n    (window as any).gspWfEventService = (window as any).gspWfEventService || {};\r\n    (window as any).gspWfEventService.register = (formObject: any) => {\r\n      this.taskService.subjectRegister(subjectCode, actionToken);\r\n      this.ifRegistered = true;\r\n      this.formObject = formObject;\r\n    };\r\n\r\n    (window as any).gspWfEventService.notify = (value: FormEventMessage) => {\r\n      if (this.ifRegistered) {\r\n        this.taskService.subjectNotify(actionToken, value);\r\n      } else {// è¡¨åä¸æ³¨åï¼ä¹å¯ç´æ¥è°ç¨notify\r\n        const simulateToken = this.workItemId + 'simulate';\r\n        this.taskService.subjectRegister(subjectCode, simulateToken);\r\n        this.taskService.subjectResponse(simulateToken, '', (value: FormEventMessage) => {\r\n          value && value.dataChanged && this.completeSimulate();\r\n        });\r\n        this.taskService.subjectNotify(simulateToken, value);\r\n      }\r\n    };\r\n  }\r\n\r\n  /**\r\n   * ç¹å»æäº¤çæ¶åï¼æ§è¡è¡¨åçåäºä»¶\r\n   */\r\n  private beforeCompleteSubmit() {\r\n    const passPreActions = this.billMethodConfigs.filter(action => action.action === this.actionEntity.code && action.executionTime === 'Pre').sort((x, y) => x.sortOrder - y.sortOrder);\r\n    // å¦æè¡¨åæ³¨åäºäºä»¶\r\n    if (passPreActions && passPreActions.length) {\r\n      this.executeFormActions([...passPreActions]);\r\n    }\r\n    // æ²¡æå®ä¹ååäºä»¶ï¼ç´æ¥æäº¤\r\n    else {\r\n      this.completeSubmit();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param formActions è¡¨åä¸­è¦æ§è¡çå¨ä½\r\n   */\r\n  private executeFormActions(formActions: BillMethodConfig[]) {\r\n    if (formActions.length > 0) {\r\n      this.messageSubject = new Subject<any>();\r\n      this.messageSubject.subscribe((re: any) => {\r\n        console.log(re.data);\r\n        const data = re.data.data;\r\n        if (data.result === true) {\r\n          if (data.dataChanged === true) {// å¦æéè¦é¢è§£æï¼åé¢è§£æåç»§ç»­æ§è¡\r\n            this.completeSimulate().subscribe((r) => {\r\n              if (r) {// é¢è§£ææ­£ç¡®\r\n                this.executeFormActions(formActions);\r\n              } else {// é¢è§£æéè¯¯\r\n                this.subject.next({ result: false, isClose: false }); // ä»»å¡åççé¢ä¸å³é­\r\n              }\r\n            });\r\n          } else {// ä¸éè¦é¢è§£æï¼ç»§ç»­æ§è¡\r\n            this.executeFormActions(formActions);\r\n          }\r\n        } else {\r\n          this.subject.next({ result: false, isClose: false }); // ä»»å¡åççé¢ä¸å³é­\r\n          throw new Error('å®¡æ¹åè¡¨åæä½æ§è¡å¤±è´¥ï¼');\r\n        }\r\n      });\r\n      // æ§è¡è¡¨åå¨ä½\r\n      const formAction = formActions.shift();\r\n      this.sendMessage(this.workItemId, formAction);\r\n    } else {\r\n      this.completeSubmit();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * é¢è§£æ\r\n   * @param action\r\n   */\r\n  execute(action: TaskAction) {\r\n    switch (action.code) {\r\n      case 'AssignUser': // ææ´¾ åç¬åæ°\r\n        this.assignSimulate();\r\n        break;\r\n      case 'Claim': // é¢ç¨\r\n        this.showAttachment = false;\r\n        break;\r\n      case 'Unclaim': // åæ¶é¢ç¨\r\n        break;\r\n      case 'Retrieve': // åå\r\n        break;\r\n      case 'Transfer': // ç§»äº¤ åç¬åæ°\r\n        this.transferSimulate();\r\n        break;\r\n      case 'AddSign': // å ç­¾\r\n        this.addSignSimulate();\r\n        break;\r\n      case 'AddSignFront': // å¾è¯¢\r\n        this.addSignFrontSimulate();\r\n        break;\r\n      case 'Notify': //ç¥ä¼\r\n        this.notifySimulate();\r\n        break;\r\n      case 'Refuse': // å¦å³\r\n        break;\r\n      case 'Obsolete': // ä½åº\r\n        break;\r\n      case 'Comment': // è¯è®º\r\n        break;\r\n      case 'ReadTask': // å·²é\r\n        this.ifShowCommentToMySelf = true;\r\n        this.dialogHeight = 340;\r\n        break;\r\n      case 'UrgeHandle'://å¬å\r\n        this.urgeHandleSimulate();\r\n        break;\r\n      case 'CancelConsult'://åæ¶å¾è¯¢\r\n        break;\r\n      default: // éè¿ é©³å éæ°æäº¤ å¶ä»èªå®ä¹çå¨ä½\r\n        this.completeSimulate();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * çæ­£å°æäº¤\r\n   * éåç¶ç±»æ¹æ³\r\n   */\r\n  submit(): Observable<SubmitResult> {\r\n    switch (this.actionEntity.code) {\r\n      case 'AssignUser': // ææ´¾ åç¬åæ°\r\n        this.assignSubmit();\r\n        break;\r\n      case 'Claim': // é¢ç¨\r\n        this.claimSubmit();\r\n        break;\r\n      case 'Unclaim': // åæ¶é¢ç¨\r\n        this.unClaimSubmit();\r\n        break;\r\n      case 'Retrieve': // åå\r\n        this.retrieveSubmit();\r\n        break;\r\n      case 'Transfer': // ç§»äº¤ åç¬åæ°\r\n        this.transferSubmit();\r\n        break;\r\n      case 'AddSign': // å ç­¾\r\n        this.addSignSubmit();\r\n        break;\r\n      case 'AddSignFront': // å¾è¯¢\r\n        this.addSignFrontSubmit();\r\n        break;\r\n      case 'Comment': // è¯è®º\r\n        this.commentSubmit();\r\n        break;\r\n      case 'Notify': //ç¥ä¼\r\n        this.notifySubmit();\r\n        break;\r\n      case 'ReadTask': // å·²é\r\n        this.readSubmit();\r\n        break;\r\n      case 'UrgeHandle'://å¬å\r\n        this.urgeHandleSubmit();\r\n        break;\r\n      case 'CancelConsult'://åæ¶å¾è¯¢\r\n        this.cancelConsultSubmit();\r\n        break;\r\n      default: // éè¿ é©³å å¦å³ ä½åº éæ°æäº¤ å¶ä»èªå®ä¹å¨ä½\r\n        this.beforeCompleteSubmit();\r\n    }\r\n    return this.subject.asObservable();\r\n  }\r\n\r\n  /**\r\n   * æ¹éåç\r\n   * @param tasks æ¹éä»»å¡åè¡¨\r\n   */\r\n  batchSubmit(tasks: TaskEntity[]): Observable<SubmitResult> {\r\n    let filterNum = 0;\r\n    const subject = new BehaviorSubject<SubmitResult>(null);\r\n    const successSubmit: SubmitResult = { result: true, isClose: true };\r\n    if ((this.actionEntity.code === 'Back' || this.actionEntity.code === 'Refuse') && !this.comment) {// æ¹éæè§æ¯å¦å¿å¡«ä¸æ¯ææ ¹æ®å®¡æ¹é¡¹éç½®æä½ï¼æ¹éé©³åæè§å¿å¡«\r\n      this.notify.warning(this.i18nService.getValue('cueWords.inputOpinion'));\r\n      subject.next({ result: false, isClose: false });\r\n    } else if (this.comment.length > 300) {\r\n      this.notify.warning(this.i18nService.getValue('task.commentTooLong'));\r\n      subject.next({ result: false, isClose: false });\r\n    } else {\r\n      const noActionTasks = tasks.filter(t => t.actions.findIndex(a => a.code === this.actionEntity.code) === -1);\r\n      if (noActionTasks && noActionTasks.length > 0) {\r\n        for (const a of noActionTasks) {\r\n          filterNum++;\r\n          if (filterNum === tasks.length) {\r\n            subject.next(successSubmit);\r\n            this.showBatchSubmitInfo(0, filterNum, 0, 0);\r\n          }\r\n        }\r\n      }\r\n      let actTasks = tasks.filter(t => t.actions.some(a => a.code === this.actionEntity.code));\r\n      if (actTasks && actTasks.length > 0) {\r\n        this.executeBatchEvent([...this.actionEntity.preEvents.filter(e => e.batch)], actTasks, this.actionEntity, (re: TaskEventResult) => {\r\n          if (re && re.result) {\r\n            if (re.passTasks) {\r\n              const backTasks = actTasks.filter(t => re.passTasks.findIndex(id => id === t.id) === -1);\r\n              if (backTasks && backTasks.length > 0) {\r\n                for (const t of backTasks) {\r\n                  filterNum++;\r\n                  if (filterNum === tasks.length) {\r\n                    subject.next(successSubmit);\r\n                    this.showBatchSubmitInfo(0, filterNum, 0, 0);\r\n                  }\r\n                }\r\n              }\r\n              actTasks = actTasks.filter(t => re.passTasks.findIndex(id => id === t.id) > -1);\r\n            }\r\n            if (actTasks.length > 0) {\r\n              const batchVerifySignedcontext = new BatchVerifySignedContext();\r\n              this.batchverifySubmit(actTasks, filterNum, batchVerifySignedcontext).subscribe((r: any) => {\r\n                if (r && r.successSubmit && r.successSubmit.result) {\r\n                  this.executeBatchEvent([...this.actionEntity.postEvents.filter(e => e.batch)], r.successHandleTasks, this.actionEntity, () => {\r\n                    subject.next(r.successSubmit);\r\n                  }, { result: true, passTasks: r.successHandleTasks.map(t => t.id) });\r\n                }\r\n              });\r\n            }\r\n          } else {\r\n            subject.next({ result: false, isClose: false });\r\n          }\r\n        }, { result: true, passTasks: actTasks.map(t => t.id) });\r\n      }\r\n    }\r\n    return subject.asObservable();\r\n  }\r\n\r\n\r\n  private batchverifySubmit(tasks: TaskEntity[], filterNum: number = 0, batchVerifySignedcontext: BatchVerifySignedContext): Observable<any> {\r\n    const subject = new Subject();\r\n    const verifyTasks = tasks.filter(t => {\r\n      const action = t.actions.find(a => a.code === this.actionEntity.code);\r\n      if (!action) {\r\n        return false;\r\n      } else {\r\n        if (action.parameters.some(p => p.code === 'CertificationNecessary' && p.value === 'true')) {\r\n          return true;\r\n        } else {\r\n          return false;\r\n        }\r\n      }\r\n    });\r\n    const verifyTasksNum = verifyTasks.length;\r\n    if (verifyTasks.length > 0) {\r\n      const that = this;\r\n      if (\r\n        (window as any).gspframeworkService &&\r\n        (window as any).gspframeworkService.rtf\r\n      ) {\r\n        (window as any).gspframeworkService.rtf.caEvent.on(\r\n          (window as any).gspframeworkService.rtf.caEvent.signedMsgOverToken(),\r\n          'signedMsgOver',\r\n          function signMsgOver(signedData) {\r\n            if (signedData && signedData[0] === 'true' && signedData.length > 0) {\r\n              // è¯ä¹¦å¯¹è±¡\r\n              const cert = gspCA.getCurCert();\r\n              // éªç­¾åæ°\r\n              that.verifySigned = {\r\n                // è¦éªè¯çè¯ä¹¦base64ç¼ç çå­ç¬¦æµ(certkey)\r\n                certBase64Info: gspCA.getCertBase64(cert),\r\n                // ç­¾ååä¿¡æ¯\r\n                msg: ['BatchDigitalSignature'],\r\n                // è¦ç­¾ååä¿¡æ¯\r\n                signedmsg: signedData[1][0],\r\n                // ç¨æ·ä½¿ç¨åºæ¯ï¼ç®åæªä½¿ç¨ï¼å¯ä»¥ä¸ºç©º\r\n                useCase: null,\r\n              };\r\n              batchVerifySignedcontext.verifySigned = that.verifySigned;\r\n              that.taskService.batchVerifySigned(batchVerifySignedcontext).subscribe(() => {\r\n                const verifyTasksNum = 0;\r\n                that.batchComplete(tasks, filterNum, verifyTasksNum).subscribe(re => {\r\n                  subject.next(re);\r\n                });\r\n              }, (error) => {\r\n                const otherTasks = tasks.filter(t => verifyTasks.findIndex(task => task.id === t.id) === -1);\r\n                that.batchComplete(otherTasks, filterNum, verifyTasksNum).subscribe(re => {\r\n                  subject.next(re);\r\n                });\r\n              });\r\n            } else {\r\n              that.notify.error(signedData[1]);\r\n              subject.next({ successSubmit: { result: false, isClose: false }, successHandleTasks: new Array() });\r\n            }\r\n          }\r\n        );\r\n      }\r\n      const msg = ['BatchDigitalSignature'];\r\n      gspCA.getSignedMsg(msg);\r\n    } else {\r\n      this.batchComplete(tasks, filterNum, verifyTasksNum).subscribe(re => {\r\n        subject.next(re);\r\n      });\r\n    }\r\n    return subject.asObservable();\r\n  }\r\n\r\n  private batchComplete(tasks: TaskEntity[], filterNum: number = 0, verifyTasksNum: number): Observable<any> {\r\n    const subject = new Subject<any>();\r\n    let successNum = 0;\r\n    let failedNum = 0;\r\n    let errorNum = 0;\r\n    const successSubmit: SubmitResult = { result: true, isClose: true };\r\n    const successHandleTasks = new Array();\r\n\r\n    const load = this.loadingService.show();\r\n    for (const task of tasks) {\r\n      const context = new CompleteContext();\r\n      context.workItemId = task.sourceId;\r\n      context.conclusionValue = this.actionEntity.code;\r\n      context.comment = this.comment;\r\n      context.addendum = this.addendum;\r\n      this.taskService.completeSimulate(context).subscribe((response: SimulateResponse) => {\r\n        if (response && response.needInteraction === true) {// éè¦äº¤äº\r\n          failedNum++;\r\n          if (successNum + failedNum + errorNum === tasks.length) {\r\n            load.close();\r\n            subject.next({ successSubmit, successHandleTasks });\r\n            this.showBatchSubmitInfo(successNum, failedNum + filterNum, errorNum, verifyTasksNum);\r\n          }\r\n        } else {// ä¸éè¦äº¤äº\r\n          this.taskService.complete(context).subscribe(() => {// æ§è¡æå\r\n            successNum++;\r\n            successHandleTasks.push(task);\r\n            if (successNum + failedNum + errorNum === tasks.length) {\r\n              load.close();\r\n              subject.next({ successSubmit, successHandleTasks });\r\n              this.showBatchSubmitInfo(successNum, failedNum + filterNum, errorNum, verifyTasksNum);\r\n            }\r\n          }, () => {// æ§è¡æ¥é\r\n            errorNum++;\r\n            if (successNum + failedNum + errorNum === tasks.length) {\r\n              load.close();\r\n              subject.next({ successSubmit, successHandleTasks });\r\n              this.showBatchSubmitInfo(successNum, failedNum + filterNum, errorNum, verifyTasksNum);\r\n            }\r\n          });\r\n        }\r\n      }, () => {// ä»»å¡æ¨¡æè¯·æ±æ¥é\r\n        errorNum++;\r\n        if (successNum + failedNum + errorNum === tasks.length) {\r\n          load.close();\r\n          subject.next({ successSubmit, successHandleTasks });\r\n          this.showBatchSubmitInfo(successNum, failedNum + filterNum, errorNum, verifyTasksNum);\r\n        }\r\n      });\r\n    }\r\n    return subject.asObservable();\r\n  }\r\n\r\n  /**\r\n   * æ¹éæäº¤æç¤ºä¿¡æ¯\r\n   * @param successNum æåæ¡æ°\r\n   * @param failedNum éè¦äº¤äºçæ¡æ°\r\n   * @param errorNum æ§è¡æ¥éçæ¡æ°\r\n   * @param verifyTasksNum éè¦æ°å­ç­¾åçæ¡æ°\r\n   */\r\n  private showBatchSubmitInfo(successNum: number, failedNum: number, errorNum: number, verifyTasksNum: number) {\r\n    let message = '';\r\n    if (successNum && !failedNum && !errorNum && !verifyTasksNum) {// æ¹éå¨é¨æå\r\n      this.notify.success(this.i18nService.getValue('cueWords.success'));\r\n    } else {// éå¨é¨æå\r\n      successNum && (message += this.i18nService.getValue('batchSubmit.success') + `ã${successNum}ã` + this.i18nService.getValue('batchSubmit.row'));\r\n      errorNum && (message += this.i18nService.getValue('batchSubmit.error') + `ã${errorNum}ã` + this.i18nService.getValue('batchSubmit.row'));\r\n      failedNum && (message += this.i18nService.getValue('batchSubmit.failed') + `ã${failedNum}ã` + this.i18nService.getValue('batchSubmit.row'));\r\n      verifyTasksNum && (message += this.i18nService.getValue('batchSubmit.validationFailed') + `ã${verifyTasksNum}ã` + this.i18nService.getValue('batchSubmit.row'));\r\n      message += this.i18nService.getValue('batchSubmit.single');\r\n      this.message.show('warning', message, { safeHtml: false });\r\n    }\r\n  }\r\n\r\n  private executeBatchEvent(events: ActionEvent[], entities: Array<TaskEntity>, action: TaskAction, handler: any, result?: TaskEventResult) {\r\n    if (this.injector) {\r\n      if (events && events.length > 0 && entities && entities.length > 0) {\r\n        const event = events.shift();\r\n        const url = event.eventImpl.split('#')[0];\r\n        const func = event.eventImpl.split('#')[1];\r\n        System.import(url + '?v=' + new Date().getTime().toString())\r\n          .then((moduleFactories: any) => {\r\n            const moduleFactory: any = Object.values(moduleFactories)[0];\r\n            const moduleRef = moduleFactory.create(this.injector);\r\n            const context: TaskEventContext = {\r\n              action,\r\n              taskList: entities,\r\n              origin: 'TaskCenter',\r\n              preEventResult: result\r\n            };\r\n            moduleRef.instance[func].apply(moduleRef.instance, [context]).subscribe((re: TaskEventResult) => {\r\n              if (re && re.result) {\r\n                this.executeBatchEvent(events, entities, action, handler, re);\r\n              } else {\r\n                handler(re);\r\n              }\r\n            });\r\n          });\r\n      } else {\r\n        handler(result);\r\n      }\r\n    } else {\r\n      handler(result);\r\n    }\r\n  }\r\n\r\n\r\n  private assignSimulate() {\r\n    this.showAttachment = false;\r\n    this.ifAssignUser = true;\r\n    this.dialogHeight += this.dialogHeightBase;\r\n    this.taskService.getAssigneeInfo(this.workItemId).subscribe((info: FlowNodeInfo) => {\r\n      this.assignInfos = [{\r\n        selectedAssignees: info.selectedAssignees,\r\n        assigneeInfo: info.assigneeInfo,\r\n        assignees: info.selectedAssignees.map(user => { return { id: user.id, name: user.name }; }),\r\n        activityName: info.activityDefinitionName,\r\n        dependency: info.dependency,\r\n        anonymous: info.anonymous,\r\n        anonymousText: info.anonymousText,\r\n        resolved: info.resolved,\r\n      }];\r\n    }, (error) => {\r\n      this.taskService.error(error);\r\n    });\r\n  }\r\n\r\n  private transferSimulate() {// ç§»äº¤\r\n    this.ifSelectUser = true;\r\n    this.selectUserText = this.actionEntity.name + this.i18nService.getValue('task.person');\r\n    this.singleSelect = true;\r\n    this.dialogHeight += this.dialogHeightBase;\r\n    this.getOrganizationScope();\r\n\r\n  }\r\n\r\n  private addSignFrontSimulate() {// å¾è¯¢\r\n    this.ifSelectUser = true;\r\n    this.selectUserText = this.actionEntity.name + this.i18nService.getValue('task.person');\r\n    this.dialogHeight += this.dialogHeightBase;\r\n    this.getOrganizationScope();\r\n\r\n  }\r\n\r\n  private addSignSimulate() {// å ç­¾\r\n    this.ifSelectUser = true;\r\n    this.selectUserText = this.actionEntity.name + this.i18nService.getValue('task.person');\r\n    this.dialogHeight += this.dialogHeightBase * 2;\r\n    const load = this.loadingService.show();\r\n    this.taskService.getAdhocConfig(this.workItemId).subscribe((response: AddSignSimulateResponse) => {\r\n      load.close();\r\n      this.addSign.showSignToSign = response.showSignToSign;\r\n      this.addSign.originMultiInstType = response.multiInstanceType;\r\n      if (response.organization) {\r\n        this.filter.orgId = response.organization.id;\r\n        this.filter.withAllOrg = response.organization.includeChildren;\r\n      }\r\n    }, error => {\r\n      load.close();\r\n      this.taskService.error(error);\r\n    })\r\n  }\r\n\r\n  private notifySimulate() {//ç¥ä¼\r\n    this.ifSelectUser = true;\r\n    this.selectUserText = this.actionEntity.name + this.i18nService.getValue('task.person');\r\n    this.dialogHeight += this.dialogHeightBase;\r\n    this.singleSelect = false;\r\n    this.getOrganizationScope();\r\n  }\r\n\r\n  private getOrganizationScope() {\r\n    const load = this.loadingService.show();\r\n    this.taskService.getOrganizationScope(this.workItemId, this.actionEntity.code).subscribe((orgList: OrganizationScope[]) => {\r\n      load.close();\r\n      if (orgList.length) {// å¨åä¼è¿åç©ºæ°ç»\r\n        this.filter.orgId = orgList[0].id;\r\n        this.filter.withAllOrg = orgList[0].includeChildren;\r\n      }\r\n    }, error => {\r\n      load.close();\r\n      this.taskService.error(error);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * å¬åæ¨¡æ\r\n   */\r\n  private urgeHandleSimulate() {\r\n    this.ifSelectNode = false;\r\n    this.ifSelectUser = false;\r\n    this.ifAssignUser = false;\r\n    this.ifUrgeType = true;\r\n    this.commentPlaceHolder = this.i18nService.getValue('task.urgeComment');\r\n    this.showCommonComment = false;\r\n    this.showAttachment = false;\r\n    this.showUrgeMessageSubject = true;\r\n    this.showSign = false;\r\n    this.dialogHeight += this.dialogHeightBase * 2;\r\n    const load = this.loadingService.show();\r\n    let context = new UrgeHandleSimulateContext();\r\n    context.procInstId = this.processInstanceId;\r\n    this.taskService.urgeHandleSimulate(context).subscribe((re: UrgeHandleResponse) => {\r\n      load.close();\r\n      this.urgeHandleResponse = re;\r\n      if (re && re.urgeUsers && re.urgeUsers.length) {\r\n        this.urgeMessageSubject = re.urgeUsers[0].urgeInfos[0].urgeMessageSubject;\r\n        this.urgeMessageContent = re.urgeUsers[0].urgeInfos[0].urgeMessageContent;\r\n        this.subjectEditable = re.urgeUsers[0].urgeInfos[0].subjectEditable;\r\n        this.contentEditable = re.urgeUsers[0].urgeInfos[0].contentEditable;\r\n        this.addReminder = re.urgeUsers[0].urgeInfos[0].addReminder;\r\n        let urgeUsers = re.urgeUsers;\r\n        let assignInfo = new AssigneeInfo();\r\n        urgeUsers.forEach(user => {\r\n          if (user.anonymousText) {\r\n            user.name = user.anonymousText;\r\n            user.code = '';\r\n            user.orgName = '';\r\n          }\r\n        })\r\n        assignInfo.assigneeUsers = urgeUsers;\r\n        assignInfo.selectAssignee = urgeUsers.length > 1 ? true : false;\r\n        assignInfo.multiSelect = true;\r\n        this.assignInfos[0].assigneeInfo = assignInfo;\r\n        this.assignInfos[0].assignees = urgeUsers.length == 1 ? urgeUsers : [];\r\n      } else {\r\n        this.notify.warning(this.i18nService.getValue('task.noUrgeUsers'));\r\n      }\r\n    }, error => {\r\n      load.close();\r\n      this.taskService.error(error);\r\n    })\r\n\r\n  }\r\n\r\n  /**\r\n   * é¢è§£æ\r\n   * éè¿ãé©³åãéæ°æäº¤ãå¶ä»èªå®ä¹å¨ä½\r\n   */\r\n  private completeSimulate(): Observable<any> {\r\n    const subject = new Subject();\r\n    this.ifSelectNode = true;\r\n    this.ifAssignUser = true;\r\n    this.dialogHeight += this.dialogHeightBase * 2;\r\n\r\n    if (this.actionEntity.parameters && this.actionEntity.parameters.length) {// æ¯å¦åè®¸å ç­¾\r\n      this.actionEntity.parameters.forEach((p) => {\r\n        if (p.code === 'AddSignBehindAble' && p.value === 'true') {\r\n          this.ifSelectUser = true;\r\n          this.selectUserText = this.i18nService.getValue('task.addSign') + this.i18nService.getValue('task.person');\r\n          this.dialogHeight += this.dialogHeightBase;\r\n          const load = this.loadingService.show();\r\n          //è·åå ç­¾èå´\r\n          this.taskService.getOrganizationScope(this.workItemId, 'AddSignBehind').subscribe((orgList: OrganizationScope[]) => {\r\n            load.close();\r\n            if (orgList.length) {// å¨åä¼è¿åç©ºæ°ç»\r\n              this.filter.orgId = orgList[0].id;\r\n              this.filter.withAllOrg = orgList[0].includeChildren;\r\n            }\r\n          }, error => {\r\n            this.taskService.error(error);\r\n          });\r\n        }\r\n      });\r\n    }\r\n    if (this.actionEntity.code === 'Back') {\r\n      this.selectNodeText = this.i18nService.getValue('task.backNodeText');\r\n    }\r\n\r\n    const context = new CompleteContext();\r\n    context.workItemId = this.workItemId;\r\n    context.conclusionValue = this.actionEntity.code;\r\n\r\n    const load = this.loadingService.show();\r\n    this.taskService.completeSimulate(context).subscribe((response: SimulateResponse) => {\r\n      load.close();\r\n      this.clearSimulateResult();\r\n      this.response = response;\r\n      this.showBackWardConfig.dynamicBackWardRuleAble = response.dynamicBackWardRuleAble;\r\n      if (!response.simulationPaths.length) {// æ¨¡æè¿åè·¯å¾ä¸ºç©ºæ¶\r\n        this.ifSelectNode = false;\r\n        this.ifAssignUser = false;\r\n      } else {// æ¨¡æè¿åäºè·¯å¾\r\n        this.destNodes = response.simulationPaths && response.simulationPaths.map(path => ({\r\n          id: path.nodeInfoList.map(node => node.activityDefinitionId).join('ï¼'),\r\n          name: path.nodeInfoList.map(node => node.activityDefinitionName).join('ï¼')\r\n        }));\r\n        // å¤çé»è®¤åæ¯ï¼æ é»è®¤åæ¯è¿å-1\r\n        const defaultIndex = response.simulationPaths.findIndex(a => a.default);\r\n        if (defaultIndex > -1) {\r\n          this.selectedNodeId = this.destNodes[defaultIndex].id;\r\n          this.nodePlaceholder = this.destNodes[defaultIndex].name.indexOf('ï¼') > -1 ? response.simulationPaths[defaultIndex].name : this.destNodes[defaultIndex].name;\r\n          this.setAssignInfo(response.simulationPaths[defaultIndex].nodeInfoList);\r\n        } else {\r\n          this.nodePlaceholder = this.i18nService.getValue('task.selectPlaceholder');\r\n        }\r\n      }\r\n      subject.next(true);\r\n    }, error => {\r\n      load.close();\r\n      subject.next(false);\r\n      this.taskService.error(error);\r\n    });\r\n    return subject.asObservable();\r\n  }\r\n\r\n  /**\r\n   * æ¸ç©ºé¢è§£æç»æ\r\n   */\r\n  private clearSimulateResult() {\r\n    this.assignInfos = [{// éæ°é¢è§£ææ¶æ¸ç©º\r\n      selectedAssignees: [],\r\n      assigneeInfo: null,\r\n      assignees: [],\r\n      activityName: '',\r\n      dependency: '',\r\n      anonymous: false,\r\n      anonymousText: '',\r\n      resolved: false,\r\n    }];\r\n    this.destNodes = []; // éæ°é¢è§£ææ¶æ¸ç©º\r\n    this.nodePlaceholder = '';\r\n    this.selectedNodeId = '';\r\n  }\r\n  /**\r\n   * è®¾ç½®å½åææ´¾ä¿¡æ¯å¸®å©åæ°\r\n   */\r\n  private setAssignInfo(nodeInfoList: FlowNodeInfo[]) {\r\n    this.assignInfos = [];\r\n    this.selectedNodeId.split('ï¼').forEach(nodeId => {\r\n      const node = nodeInfoList.find(node => node.activityDefinitionId === nodeId);\r\n      if (node) {\r\n        this.assignInfos.push({\r\n          selectedAssignees: node.selectedAssignees,\r\n          assigneeInfo: node.assigneeInfo,\r\n          assignees: node.selectedAssignees.map(user => { return { id: user.id, name: user.name }; }),\r\n          activityName: node.activityDefinitionName,\r\n          dependency: node.dependency,\r\n          anonymous: node.anonymous,\r\n          anonymousText: node.anonymousText,\r\n          resolved: node.resolved,\r\n        });\r\n      } else {\r\n        this.assignInfos.push({\r\n          selectedAssignees: [],\r\n          assigneeInfo: null,\r\n          assignees: [],\r\n          activityName: '',\r\n          dependency: '',\r\n          anonymous: false,\r\n          anonymousText: '',\r\n          resolved: false,\r\n        });\r\n      }\r\n    });\r\n    this.cd.detectChanges();\r\n  }\r\n\r\n  /**\r\n   * ç¹å»ç¡®å®åæ¹æ³\r\n   */\r\n  private assignSubmit() {\r\n    if (this.comment.length > 300) {\r\n      this.notify.warning(this.i18nService.getValue('task.commentTooLong'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else if (!this.assignInfos[0].assignees.length) {\r\n      this.notify.warning(this.i18nService.getValue('static.assignee.noAssignee'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else {\r\n      const context: AssignParameter = {\r\n        workItemId: this.workItemId,\r\n        assigneeIds: this.assignInfos[0].assignees.map(user => user.id),\r\n        comment: this.comment,\r\n        addendum: this.addendum\r\n      };\r\n      this.taskService.assignNextUsersByWorkItemId(context).subscribe(() => {\r\n        this.notify.success(this.i18nService.getValue('static.assignee.successAssign'));\r\n        this.subject.next(this.submitResult);\r\n      }, (error) => {\r\n        this.subject.next({ result: false, isClose: false });\r\n        this.taskService.error(error);\r\n      });\r\n    }\r\n  }\r\n\r\n  private claimSubmit() {\r\n    if (this.comment.length > 300) {\r\n      this.notify.warning(this.i18nService.getValue('task.commentTooLong'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else {\r\n      this.taskService.claim(this.workItemId, this.comment).subscribe(() => {\r\n        this.notify.success(this.i18nService.getValue('cueWords.successClaim')),\r\n          this.submitResult.isClose = false;\r\n        this.subject.next(this.submitResult);\r\n      }, (error) => {\r\n        this.subject.next({ result: false, isClose: false });\r\n        this.taskService.error(error);\r\n      });\r\n    }\r\n  }\r\n\r\n  private unClaimSubmit() {\r\n    if (this.comment.length > 300) {\r\n      this.notify.warning(this.i18nService.getValue('task.commentTooLong'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else {\r\n      this.taskService.unClaim(this.workItemId, this.comment).subscribe(() => {\r\n        this.notify.success(this.i18nService.getValue('cueWords.successUnClaim')),\r\n          this.subject.next(this.submitResult);\r\n      }, (error) => {\r\n        this.subject.next({ result: false, isClose: false });\r\n        this.taskService.error(error);\r\n      });\r\n    }\r\n  }\r\n\r\n  private retrieveSubmit() {\r\n    if (this.comment.length > 300) {\r\n      this.notify.warning(this.i18nService.getValue('task.commentTooLong'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else {\r\n      const retrieveContext = {\r\n        workItemId: this.workItemId,\r\n        comment: this.comment\r\n      };\r\n      this.taskService.retrieve(retrieveContext).subscribe(() => {\r\n        this.notify.success(this.i18nService.getValue('cueWords.successRetrieve'));\r\n        this.subject.next(this.submitResult);\r\n      }, (error) => {\r\n        this.subject.next({ result: false, isClose: false });\r\n        this.taskService.error(error);\r\n      });\r\n    }\r\n  }\r\n\r\n  private transferSubmit() {\r\n    if (this.comment.length > 300) {\r\n      this.notify.warning(this.i18nService.getValue('task.commentTooLong'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else if (this.selectedUsers.length === 0) {\r\n      this.notify.warning(this.i18nService.getValue('task.selectPlaceholder') + this.selectUserText);\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else {\r\n      const context = {\r\n        workItemId: this.workItemId,\r\n        assignee: this.selectedUsers[0],\r\n        comment: this.comment,\r\n        addendum: this.addendum\r\n      };\r\n      this.submitDisable = true; // ç¦ç¨æäº¤æé®\r\n      this.taskService.transfer(context).subscribe(() => {\r\n        this.notify.success(this.i18nService.getValue('static.transfer.successTransfer'));\r\n        this.subject.next(this.submitResult);\r\n      }, (error) => {\r\n        this.subject.next({ result: false, isClose: false });\r\n        this.taskService.error(error);\r\n      });\r\n    }\r\n  }\r\n\r\n  private commentSubmit() { // è¯è®º\r\n    if (!this.comment || this.comment.length === 0) {\r\n      this.notify.warning(this.i18nService.getValue('cueWords.inputOpinion'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else if (this.comment.length > 300) {\r\n      this.notify.warning(this.i18nService.getValue('task.commentTooLong'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else {\r\n      const context = {\r\n        workItemId: this.workItemId,\r\n        comment: this.comment,\r\n        addendum: this.addendum\r\n      };\r\n      this.taskService.comment(context).subscribe(() => {\r\n        this.notify.success(this.i18nService.getValue('static.comment.successComment'));\r\n        this.submitResult.isClose = false;\r\n        this.subject.next(this.submitResult);\r\n      }, (error) => {\r\n        this.subject.next({ result: false, isClose: false });\r\n        this.taskService.error(error);\r\n      });\r\n      this.comment = '';\r\n    }\r\n  }\r\n\r\n  private addSignFrontSubmit() {\r\n    if (this.comment.length > 300) {\r\n      this.notify.warning(this.i18nService.getValue('task.commentTooLong'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else if (this.selectedUsers.length === 0) {\r\n      this.notify.warning(this.i18nService.getValue('task.selectPlaceholder') + this.selectUserText);\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else {\r\n      const context = {\r\n        workItemId: this.workItemId,\r\n        action: this.actionEntity.code,\r\n        assignees: this.selectedUsers,\r\n        comment: this.comment,\r\n        addendum: this.addendum\r\n      };\r\n      this.submitDisable = true; // ç¦ç¨æäº¤æé®\r\n      this.taskService.addSign(context).subscribe(() => {\r\n        this.notify.success(this.i18nService.getValue('cueWords.success'));\r\n        this.subject.next(this.submitResult);\r\n      }, (error) => {\r\n        this.subject.next({ result: false, isClose: false });\r\n        this.taskService.error(error);\r\n      });\r\n    }\r\n  }\r\n\r\n  private addSignSubmit() {// å ç­¾æäº¤\r\n    if (this.comment.length > 300) {\r\n      this.notify.warning(this.i18nService.getValue('task.commentTooLong'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else if (this.selectedUsers.length === 0) {\r\n      this.notify.warning(this.i18nService.getValue('task.selectPlaceholder') + this.selectUserText);\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else {\r\n      let payload: AddSignPayload = {\r\n        workItemId: this.workItemId,\r\n        comment: this.comment,\r\n        conclusionValue: \"Pass\",\r\n        signAssignees: this.selectedUsers,\r\n        actionCode: \"AddSignBehind\",\r\n        multiInstanceType: this.addSign.showMultiInstanceType ? this.addSign.curMultiInstType : this.addSign.originMultiInstType,\r\n        counterSignRule: 'allPass',\r\n        completedRule: 'all',\r\n        allowSignToSign: this.addSign.allowSignToSIgn,\r\n        activityName: '',\r\n        addendum: this.addendum\r\n      };\r\n\r\n      const load = this.loadingService.show();\r\n      this.taskService.adhocAssignee(payload).subscribe(re => {\r\n        this.notify.success(this.i18nService.getValue('cueWords.success'));\r\n        this.subject.next({ result: true, isClose: true });\r\n        load.close();\r\n      }, error => {\r\n        load.close();\r\n        this.subject.next({ result: false, isClose: false });\r\n        this.taskService.error(error);\r\n      })\r\n\r\n    }\r\n\r\n  }\r\n\r\n  private readSubmit() {//å·²éæäº¤\r\n    if (this.comment.length > 300) {\r\n      this.notify.warning(this.i18nService.getValue('task.commentTooLong'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else {\r\n      const context: WorkItemExecuteParam = {\r\n        workItemId: this.workItemId,\r\n        comment: this.comment,\r\n        addendum: this.addendum,\r\n        hideComment: this.hideComment\r\n      }\r\n      this.taskService.readTask(context).subscribe(() => {\r\n        this.notify.success(this.i18nService.getValue('cueWords.success'));\r\n        this.subject.next({ result: true, isClose: true });\r\n      }, error => {\r\n        this.taskService.error(error);\r\n        this.subject.next({ result: false, isClose: false });\r\n      })\r\n    }\r\n\r\n  }\r\n\r\n  private notifySubmit() {//ç¥ä¼æäº¤\r\n    if (this.comment.length > 300) {\r\n      this.notify.warning(this.i18nService.getValue('task.commentTooLong'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else if (this.selectedUsers.length === 0) {\r\n      this.notify.warning(this.i18nService.getValue('task.selectPlaceholder') + this.selectUserText);\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else {\r\n      const context: CounterSignParam = {\r\n        workItemId: this.workItemId,\r\n        comment: this.comment,\r\n        addendum: this.addendum,\r\n        action: this.actionEntity.code,\r\n        assignees: this.selectedUsers,\r\n      };\r\n      this.taskService.addSign(context).subscribe(() => {\r\n        this.notify.success(this.i18nService.getValue('cueWords.success'));\r\n        this.subject.next({ result: true, isClose: false });\r\n      }, (error) => {\r\n        this.subject.next({ result: false, isClose: false });\r\n        this.taskService.error(error);\r\n      });\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * å¬åæäº¤\r\n   */\r\n  private urgeHandleSubmit() {\r\n    if (this.comment.length > 300) {\r\n      this.notify.warning(this.i18nService.getValue('task.commentTooLong'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else if (!this.urgeHandleResponse.urgeUsers || !this.urgeHandleResponse.urgeUsers.length) {//æ²¡æç¬¦åæ¡ä»¶çå¬åç¨æ·\r\n      this.notify.warning(this.i18nService.getValue('task.noUrgeUsers'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else if (!this.assignInfos[0].assignees.length) {//æ²¡æéäºº\r\n      this.notify.warning(this.i18nService.getValue('task.selectPlaceholder') + this.i18nService.getValue('task.receiver'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else if (!this.urgeHandleComponent.urgeMessageSubject) {\r\n      this.notify.warning(this.i18nService.getValue('task.noUrgeSubject'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else if (!this.urgeHandleComponent.urgeMessageContent) {\r\n      this.notify.warning(this.i18nService.getValue('task.noUrgeContent'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else {\r\n      let context = new UrgeHandleContext();\r\n      context.procInstId = this.processInstanceId;\r\n      context.urgeUsers = this.urgeHandleResponse.urgeUsers.filter(a => this.assignInfos[0].assignees.some(b => b.id == a.id));\r\n      context.urgeMessageSubject = this.urgeHandleComponent.urgeMessageSubject;\r\n      context.urgeMessageContent = this.urgeHandleComponent.urgeMessageContent;\r\n      context.addReminder = this.addReminder;\r\n      const load = this.loadingService.show();\r\n      this.taskService.urgeHandle(context).subscribe(re => {\r\n        this.notify.success(this.i18nService.getValue('cueWords.success'));\r\n        this.subject.next({ result: true, isClose: false });\r\n        load.close();\r\n      }, error => {\r\n        load.close();\r\n        this.subject.next({ result: false, isClose: false });\r\n        this.taskService.error(error);\r\n      })\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * åæ¶å¾è¯¢æäº¤\r\n   */\r\n  private cancelConsultSubmit() {\r\n    let context = new WorkItemExecuteParam();\r\n    context.workItemId = this.workItemId;\r\n    context.comment = this.comment;\r\n    context.addendum = this.addendum;\r\n    const load = this.loadingService.show();\r\n    this.taskService.cancelConsult(context).subscribe(() => {\r\n      load.close();\r\n      this.notify.success(this.i18nService.getValue('cueWords.success'));\r\n      this.subject.next({ result: true, isClose: false });\r\n    }, error => {\r\n      load.close();\r\n      this.subject.next({ result: false, isClose: false });\r\n      this.taskService.error(error);\r\n    })\r\n\r\n  }\r\n\r\n  private completeSubmit() {// éè¿ãé©³åãå¶ä»ç¬¬ä¸æ¹å¨ä½\r\n    const context: CompleteContext = {\r\n      workItemId: this.workItemId,\r\n      conclusionValue: this.actionEntity.code,\r\n      comment: this.comment,\r\n      signAssignees: this.selectedUsers,\r\n      nextFlowNodes: [],\r\n      addendum: this.addendum,\r\n      //å¨æé©³åè§å\r\n      dynamicBackWardRule: this.showBackWardConfig.dynamicBackWardRuleAble ? (this.showBackWardConfig.enable ? 'backToThisNode' : 'sequence') : ''\r\n    };\r\n\r\n    if (context.signAssignees.length || !this.response || !this.response.simulationPaths.length) {// å ç­¾ or ä»¿çè¿åä¸ºç©ºï¼ç´æ¥å¾ä¸èµ°\r\n      this.completeTask(context);\r\n    } else {\r\n      if (this.selectedNodeId) {// å ç­¾æ¶ï¼éæ©ä¸ä¸ç¯èè¢«ç¦ç¨ï¼destNodeIdä¸ºundefined\r\n        const nextFlowNodes: FlowNodeInfo[] = [];\r\n        const nodes: string[] = this.selectedNodeId.split('ï¼');\r\n        for (let i = 0; i < nodes.length; i++) {\r\n          const nextFlowNode: FlowNodeInfo = {\r\n            activityDefinitionId: nodes[i],\r\n            activityDefinitionName: this.assignInfos[i].activityName,\r\n            dependency: this.assignInfos[i].dependency,\r\n            selectedAssignees: this.assignInfos[i].assigneeInfo ? this.assignInfos[i].assignees : [],\r\n            assigneeInfo: null,\r\n            resolved: false,\r\n            anonymous: this.assignInfos[i].anonymous,\r\n            anonymousText: this.assignInfos[i].anonymousText\r\n          };\r\n          //èç¹æ¾ä¸å°äººï¼ä¸å¼å¸¸æç¤ºæ¶ï¼å¹¶è¡ç½å³æä¸å¤ç\r\n          if (this.response && this.response.simulationPaths.length && !this.response.simulationPaths[0].id.startsWith('ParallelGateway')) {\r\n            if (nodes.length == 1 && nodes[i].startsWith('UserActivity') && this.assignInfos[i].resolved && !this.assignInfos[i].assigneeInfo && !this.assignInfos[i].selectedAssignees.length) {\r\n              const str = this.assignInfos[i].activityName + this.i18nService.getValue('startProcess.node') + this.i18nService.getValue('startProcess.noUser');\r\n              this.notify.warning(str);\r\n              this.subject.next({ result: false, isClose: false });\r\n              return;\r\n            }\r\n          }\r\n          nextFlowNodes.push(nextFlowNode);\r\n        }\r\n        context.nextFlowNodes = nextFlowNodes;\r\n      }\r\n\r\n      if (this.destNodes.length > 1 && context.nextFlowNodes.length <= 0) {// ç¨æ·æ²¡éæ©è·³è½¬èç¹ï¼ä¸åè®¸æäº¤\r\n        this.notify.warning(this.i18nService.getValue('cueWords.selectNode'));\r\n        this.subject.next({ result: false, isClose: false });\r\n      } else if (this.assignInfos.filter(info => info.assigneeInfo && info.assigneeInfo.selectAssignee && !info.assignees.length).length) {\r\n        this.notify.warning(this.i18nService.getValue('task.selectProcessor'));\r\n        this.subject.next({ result: false, isClose: false });\r\n      } else {\r\n        this.completeTask(context);\r\n      }\r\n    }\r\n  }\r\n\r\n  private completeTask(completeContext: CompleteContext) {\r\n    const attachmentNecessary = this.actionEntity.parameters.find(entity => entity.code === 'AttachmentNecessary');\r\n    const certificationNecessary = this.actionEntity.parameters.find(entity => entity.code === 'CertificationNecessary');\r\n    const commentNecessary = this.actionEntity.parameters.find(entity => entity.code === 'CommentNecessary');\r\n    if (attachmentNecessary && attachmentNecessary.value === 'true' && (!completeContext.addendum.attachment || completeContext.addendum.attachment === '[]')) {\r\n      this.notify.warning(this.i18nService.getValue('cueWords.attachmentsRequired'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else if (commentNecessary && commentNecessary.value === 'true' && !completeContext.comment) {\r\n      this.notify.warning(this.i18nService.getValue('cueWords.inputOpinion'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else if (this.comment.length > 300) {\r\n      this.notify.warning(this.i18nService.getValue('task.commentTooLong'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else {\r\n      if (certificationNecessary && certificationNecessary.value === 'true') {\r\n        this.verifySignature(() => {\r\n          completeContext.verifySigned = this.verifySigned;\r\n          this.taskComplete(completeContext);\r\n        });\r\n        const msg = [this.workItemId];\r\n        gspCA.getSignedMsg(msg);\r\n      } else {\r\n        this.taskComplete(completeContext);\r\n      }\r\n    }\r\n  }\r\n\r\n  private executeFormActionsAfterCompleteTask(hander: any) {\r\n    const postActions = this.billMethodConfigs.filter(action => action.action === this.actionEntity.code && action.executionTime === 'Post').sort((x, y) => x.sortOrder - y.sortOrder);\r\n    // å¦æè¡¨åæ³¨åäºäºä»¶\r\n    if (this.ifRegistered && this.formObject && postActions.length) {\r\n      this.executePostFormActions(postActions, hander);\r\n    } else {\r\n      hander();\r\n    }\r\n  }\r\n\r\n  private executePostFormActions(formActions: BillMethodConfig[], hander: any) {\r\n    if (formActions.length > 0) {\r\n      this.messageSubject = new Subject<any>();\r\n      this.messageSubject.subscribe((re: any) => {\r\n        console.log(re.data);\r\n        const data = re.data.data;\r\n        if (data.result === true) {\r\n          this.executePostFormActions(formActions, hander);\r\n        } else {\r\n          this.subject.next({ result: false, isClose: false }); // ä»»å¡åççé¢ä¸å³é­\r\n          throw new Error('å®¡æ¹åè¡¨åæä½æ§è¡å¤±è´¥ï¼');\r\n        }\r\n      });\r\n      // æ§è¡è¡¨åå¨ä½\r\n      const formAction = formActions.shift();\r\n      this.sendMessage(this.workItemId, formAction);\r\n    } else {\r\n      hander();\r\n    }\r\n  }\r\n\r\n  //å¸®å©éäººå\r\n  afterConfirmForTransfer(data: Assignee[]) {\r\n    if (data && data.length) {\r\n      this.selectedUsers = data.map(user => user.id);\r\n      this.selectedUserNgModule = data.map(user => user.name).join();\r\n    } else {\r\n      this.selectedUsers = [];\r\n    }\r\n    if (this.actionEntity.code == 'AddSign' && this.addSign.originMultiInstType == MultiInstanceType.Preempt.toString() && this.selectedUsers.length > 1) {\r\n      this.addSign.showMultiInstanceType = true;\r\n    } else {\r\n      this.addSign.showMultiInstanceType = false;\r\n    }\r\n  }\r\n\r\n  cancel(): Observable<SubmitResult> {\r\n    this.submitResult.isClose = false;\r\n    this.subject.next(this.submitResult);\r\n    return this.subject.asObservable();\r\n  }\r\n\r\n  getSubject() {\r\n    return this.subject.asObservable();\r\n  }\r\n\r\n  // ä¸ä¸ç¯èéæ©åäºä»¶\r\n  selectNodeChange(data: any) {\r\n    this.selectedNodeId = data && data.data && data.data.id;\r\n    if (this.response.simulationPaths[data.index].nodeInfoList.every(node => node.resolved === true)) {// å·²é¢è§£æåä¸è\r\n      this.setAssignInfo(this.response.simulationPaths[data.index].nodeInfoList);\r\n    } else {\r\n      const nodeIds = this.selectedNodeId.split('ï¼').map(node => `\"${node}\"`).join(); // æ³¨æä¸ä¸ªä¸­æéå·ä¸ä¸ªè±æéå·\r\n      const load = this.loadingService.show();\r\n      this.taskService.getSimulationAssigneeInfo(this.workItemId, nodeIds).subscribe((nodeInfoList: FlowNodeInfo[]) => {\r\n        load.close();\r\n        this.setAssignInfo(nodeInfoList);\r\n      }, error => {\r\n        load.close();\r\n        this.taskService.error(error);\r\n      });\r\n    }\r\n  }\r\n\r\n  // ä¸ä¸ç¯èæ¸ç©ºåäºä»¶\r\n  selectNodeClear() {\r\n    this.selectedNodeId = null;\r\n    this.assignInfos = [{\r\n      selectedAssignees: [],\r\n      assigneeInfo: null,\r\n      assignees: [],\r\n      activityName: '',\r\n      dependency: '',\r\n      anonymous: false,\r\n      anonymousText: '',\r\n      resolved: false,\r\n    }];\r\n  }\r\n\r\n  afterConfirmForAssign(data: Assignee[], index: number) {\r\n    this.assignInfos[index].assignees = data;\r\n  }\r\n\r\n  /**\r\n   * ä¸ä¼ éä»¶åäºä»¶\r\n   */\r\n  addAttachment(data: any) {\r\n    this.addendum.attachment = JSON.stringify(data);\r\n  }\r\n\r\n  /**\r\n   * æåç­¾ååäºä»¶\r\n   */\r\n  addSignature(data: any) {\r\n    if (data) {\r\n      const signInfo = {\r\n        id: data,\r\n        waterMarking: null\r\n      };\r\n      this.addendum.signature = JSON.stringify(signInfo);\r\n    } else {\r\n      this.addendum.signature = '';\r\n    }\r\n  }\r\n\r\n  // ä»¥æå¡æ¹å¼æå¼ç»ä»¶æ¶ï¼å·¦å³å ä¸padding\r\n  addPadding() {\r\n    this.cls = 'f-utils-fill-flex-column h-100 px-4 py-2';\r\n  }\r\n\r\n\r\n  private sendMessage(workItemId: string, action: BillMethodConfig) {\r\n    if (this.iframe) {\r\n      const iframeWindow = this.iframe.nativeElement.contentWindow;\r\n      const message = {\r\n        target: workItemId,\r\n        data: {\r\n          command: action.method,\r\n          arguments: action.methodParameters\r\n        }\r\n      };\r\n      iframeWindow.postMessage(message, this.POST_MESSAGE_TARGET);\r\n    } else {\r\n      throw new Error('è¡¨åå°æªå è½½!');\r\n    }\r\n  }\r\n\r\n  // æäº¤å®¡æ¹åçæ°å­ç­¾ååéªç­¾\r\n  verifySignature(handler: any) {\r\n    const that = this;\r\n    if (\r\n      (window as any).gspframeworkService &&\r\n      (window as any).gspframeworkService.rtf\r\n    ) {\r\n      (window as any).gspframeworkService.rtf.caEvent.on(\r\n        (window as any).gspframeworkService.rtf.caEvent.signedMsgOverToken(),\r\n        'signedMsgOver',\r\n        function signMsgOver(signedData) {\r\n          if (signedData && signedData[0] === 'true' && signedData.length > 0) {\r\n            // è¯ä¹¦å¯¹è±¡\r\n            const cert = gspCA.getCurCert();\r\n            // éªç­¾åæ°\r\n            that.verifySigned = {\r\n              // è¦éªè¯çè¯ä¹¦base64ç¼ç çå­ç¬¦æµ(certkey)\r\n              certBase64Info: gspCA.getCertBase64(cert),\r\n              // ç­¾ååä¿¡æ¯\r\n              msg: [that.workItemId],\r\n              // è¦ç­¾ååä¿¡æ¯\r\n              signedmsg: signedData[1][0],\r\n              // ç¨æ·ä½¿ç¨åºæ¯ï¼ç®åæªä½¿ç¨ï¼å¯ä»¥ä¸ºç©º\r\n              useCase: null,\r\n            };\r\n            handler();\r\n          } else {\r\n            that.loadingService.close();\r\n            that.subject.next({ result: false, isClose: false });\r\n            that.notify.error(signedData[1]);\r\n            throw new Error(signedData[1]);\r\n          }\r\n        }\r\n      );\r\n    }\r\n  }\r\n\r\n  // éè¿ãé©³åãå¶ä»ç¬¬ä¸æ¹å¨ä½\r\n  taskComplete(completeContext: CompleteContext) {\r\n    this.taskService.complete(completeContext).subscribe((cr: CompleteResponse) => {\r\n      this.executeFormActionsAfterCompleteTask(() => {\r\n        if (cr.needInteraction) {// éè¿åææ´¾åºæ¯\r\n          if (this.origin == ActionOrigin.TaskCenter) {\r\n            this.subject.next({ result: true, isClose: false });\r\n          } else {\r\n            this.subject.next({ result: false, isClose: false });//å³æloading\r\n          }\r\n          this.notify.info(this.i18nService.getValue('cueWords.select')\r\n            + 'ã' + cr.nextFlowNodes[0].activityDefinitionName + 'ã'\r\n            + this.i18nService.getValue('cueWords.processor'));\r\n          let task = new TaskEntity();\r\n          let action = new TaskAction();\r\n          task.sourceId = cr.nextFlowNodes[0].assigneeInfo.workItemId;\r\n          action.code = 'AssignUser';\r\n          action.name = this.i18nService.getValue('cueWords.assignUser');\r\n          this.handlerService.execute(task, action).subscribe(re => {\r\n            if (re) {\r\n              this.subject.next({ result: true, isClose: true });\r\n            }\r\n          });\r\n        } else {\r\n          if (completeContext.conclusionValue === 'Pass') {\r\n            this.notify.success(this.i18nService.getValue('cueWords.successPass'));\r\n          } else if (completeContext.conclusionValue === 'Back') {\r\n            this.notify.success(this.i18nService.getValue('cueWords.successBack'));\r\n          } else {\r\n            this.notify.success(this.i18nService.getValue('cueWords.success'));\r\n          }\r\n          this.subject.next({ result: true, isClose: true });\r\n        }\r\n      });\r\n    }, (error) => {\r\n      this.subject.next({ result: false, isClose: false });\r\n      this.taskService.error(error);\r\n    }\r\n    );\r\n  }\r\n\r\n}\r\n","import { AssigneeInfo } from './complete-response';\r\nimport { User } from './user';\r\n\r\n/**\r\n * æäº¤å®¡æ¹ä¸ä¸æåæ°\r\n */\r\nexport class StartProcessPayload {\r\n\r\n    /**\r\n     * éæºçæçID æ æä¹\r\n     */\r\n    id: string;\r\n\r\n    /**\r\n     * æµç¨å®ä¹ID\r\n     */\r\n    processDefinitionId: string;\r\n\r\n    /**\r\n     * æµç¨å®ä¹Key\r\n     */\r\n    processDefinitionKey: string;\r\n\r\n    /**\r\n     * æµç¨åç±»ID\r\n     */\r\n    bizDefKey: string;\r\n\r\n    /**\r\n     * æ°æ®æ¨¡åIDï¼BEä¸çèç¹IDï¼\r\n     */\r\n    dataModelId: string;\r\n\r\n    /**\r\n     * åæ®åç \r\n     */\r\n    dataId: string;\r\n\r\n    /**\r\n     * æµç¨å®ä¾åç§°ï¼å¯ç©º\r\n     */\r\n    name: string;\r\n\r\n    /**\r\n     * æµç¨åèµ·äºº\r\n     */\r\n    startUserId: string;\r\n\r\n    /**\r\n     * ä¸ä¸ç¯è\r\n     */\r\n    nextFlowNodes: FlowNodeInfo[];\r\n\r\n    /**\r\n     * åæ°\r\n     */\r\n    variables: any;\r\n\r\n    /**\r\n     * æ¯å¦å¸¦è¿åå¼\r\n     */\r\n    withResponse: boolean;\r\n\r\n}\r\n\r\nexport class FlowNodeInfo {\r\n\r\n    activityDefinitionId: string;\r\n\r\n    activityDefinitionName: string;\r\n\r\n    dependency: string;//åç½®ä¾èµï¼æ§è¡æäº¤æ¶ä¼ ç»åç«¯\r\n\r\n    selectedAssignees: User[];\r\n\r\n    assigneeInfo: AssigneeInfo;\r\n\r\n    resolved: boolean;//åä¸èæ¯å¦è§£æ\r\n\r\n    anonymous: boolean;\r\n\r\n    anonymousText: string;\r\n\r\n}\r\n\r\nexport class Assignee {\r\n\r\n    id: string;\r\n\r\n    name: string;\r\n\r\n}\r\n\r\nexport class CancelSubmitPayload {\r\n\r\n    procInstId: string;//å¯ä»¥åç¬æ ¹æ®æµç¨å®ä¾IDåæ¶\r\n\r\n    dataId: string;//ä¹å¯ä»¥æ ¹æ®dataId+bizDefKeyåæ¶\r\n\r\n    bizDefKey: string;\r\n}\r\n","/**\r\n * è·¨iframeéä¿¡ï¼æ¶æ¯ç±»åæä¸¾ç±»\r\n */\r\nexport enum MessageType {\r\n\r\n    SubmitSuccess = 'SubmitSuccess',//æäº¤æåï¼è¦æ±iframeå¤å¼¹åºæç¤º\r\n\r\n    SubmitFailed = 'SubmitFailed',//æäº¤å¤±è´¥ï¼å¤±è´¥ä¿¡æ¯\r\n\r\n    InfoSelectProcess = 'InfoSelectProcess',//æç¤ºéæ©æµç¨\r\n\r\n    InfoSelectNode = 'InfoSelectNode',//æç¤ºéæ©èç¹\r\n\r\n    InfoSelectParticipant = 'InfoSelectParticipant',//æç¤ºéæ©åçäºº\r\n\r\n    Cancel = 'Cancel',//ç¹å»åæ¶ï¼iframeå¤å³é­å¼¹çª\r\n}\r\n\r\n/**\r\n * è·¨iframeéä¿¡ï¼æ¶æ¯ç±»\r\n */\r\nexport class PostMessage {\r\n\r\n    type: MessageType;\r\n\r\n    message: any;\r\n}","/**\r\n * æäº¤å®¡æ¹æ¶ï¼è®°ä¸éæ©çæµç¨\r\n */\r\nexport class StartProcessCache {\r\n\r\n    selectedProcessList: SelectedProcessItem[];\r\n\r\n}\r\n\r\n/**\r\n * æäº¤å®¡æ¹æ¶ï¼è®°ä¸éæ©çæµç¨\r\n */\r\nexport class SelectedProcessItem {\r\n\r\n    /**\r\n     * æµç¨åç±»id\r\n     */\r\n    processCategory: string;\r\n\r\n    /**\r\n     * æµç¨å®ä¹id\r\n     */\r\n    processDefinitionId: string;\r\n\r\n    /**\r\n     * æµç¨å®ä¹åç§°\r\n     */\r\n    processDefinitionName: string;\r\n\r\n    /**\r\n     * è®°å½æ¶é´\r\n     */\r\n    logTime: Date = new Date();\r\n\r\n    constructor(processCategoryId: string, processDefinitionId: string, processDefinitionName: string) {\r\n        this.processCategory = processCategoryId;\r\n        this.processDefinitionId = processDefinitionId;\r\n        this.processDefinitionName = processDefinitionName;\r\n        this.logTime = new Date();\r\n\r\n    }\r\n\r\n}","import { Component, OnInit, ViewChild, TemplateRef, Input, Injector } from '@angular/core';\r\nimport { TaskService } from '../../service/task.service';\r\nimport { StartProcessPayload, FlowNodeInfo, Assignee } from '../../entity/start-process-payload';\r\nimport { ExecutionResponse } from '../../entity/execution-response';\r\nimport { LoadingService } from '@farris/ui-loading'\r\nimport { Observable, Subject } from 'rxjs';\r\nimport { NotifyService } from '@farris/ui-notify';\r\nimport { I18nService } from '../../service/i18n/i18n.service';\r\nimport { ComboListComponent } from '@farris/ui-combo-list';\r\nimport { MessageType } from '../../entity/postMessage';\r\nimport { MessagerService } from '@farris/ui-messager'\r\nimport { SimulateResponse, SimulationPath } from '../../entity/simulate-response';\r\nimport { AssignInfoHelpEntity } from '../../entity/assignInfoHelp';\r\nimport { WfTaskHandlerService } from '../../wf-task-handler.service';\r\nimport { ConfigCode } from '../../entity/task-center-config';\r\nimport { WfContext } from '../../entity/wfContext';\r\nimport { TaskEntity } from '../../entity/task-entity';\r\nimport { TaskAction } from '../../entity/task-action';\r\nimport { SelectedProcessItem, StartProcessCache } from '../../entity/process-cache';\r\n\r\n@Component({\r\n  selector: 'lib-process-selector',\r\n  templateUrl: './process-selector.component.html',\r\n  styleUrls: ['../../components/task-execute/task-execute.component.css'],\r\n})\r\nexport class ProcessSelectorComponent implements OnInit {\r\n\r\n  // task center-uiä¸­start-process-menuä½¿ç¨äºæ­¤éæ©å¨ï¼æé æ¹æ³æ¹å¨æ¶ï¼ééæ°ç¼è¯\r\n  constructor(\r\n    private taskService: TaskService,\r\n    private loadingService: LoadingService,\r\n    private notify: NotifyService,\r\n    private i18nService: I18nService,\r\n    private messager: MessagerService,\r\n    private injector: Injector,\r\n    private handlerService: WfTaskHandlerService\r\n  ) {\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  destProcesses: { id: string, name: string }[] = [];//åéæµç¨\r\n  destNodes: { id: string, name: string }[] = [];//åéä¸ä¸ç¯è\r\n  response: SimulateResponse;//ä¿å­æ¨¡ææµç¨åè¿åçåå®¹ï¼éæ©èç¹æ¶ä½¿ç¨\r\n  assignInfos: AssignInfoHelpEntity[] =\r\n    [{\r\n      selectedAssignees: [],\r\n      assigneeInfo: null,\r\n      assignees: [],\r\n      activityName: '',\r\n      dependency: '',\r\n      anonymous: false,\r\n      anonymousText: null,\r\n      resolved: false,\r\n    }];//èç¹è¿åçææ´¾ä¿¡æ¯ï¼å¤ä¸ªï¼\r\n\r\n  selectedProcessId: string;//éæ©çæµç¨å®ä¹ID\r\n  selectedNodeId: string; //éæ©çä¸ä¸ç¯èIDï¼åç»­ç¯èidçæ¼æ¥\r\n  payload = new StartProcessPayload;//ä¿å­è¡¨åä¸ä¼ æ¥çpayload\r\n  subject = new Subject();//è¿åbool\r\n  subjectWithResponse = new Subject<any>();//è¿åæµç¨ä¸ä¸æ\r\n  subjectCancel = new Subject();//ç¹å»åæ¶åçsubject\r\n  submitDisable: boolean = false;//æäº¤æé®æ¯å¦ç¦ç¨\r\n  _dataId: string;\r\n  _bizDefKey: string;\r\n  showButtons: boolean = false;\r\n  curLanguage: string = localStorage.getItem('languageCode') || 'zh-CHS';//ç³»ç»å½åè¯­è¨\r\n  nodePlaceholder: string;//ä¸ä¸ç¯èçplaceholder\r\n  processPlaceholder: string;//éæ©æµç¨çplaceholder\r\n  wfContext = new WfContext();//å·¥ä½æµä¸ä¸æ\r\n\r\n  @ViewChild('nodeCombo') nodeCombo: ComboListComponent\r\n  @ViewChild('buttons') buttons: TemplateRef<any>;//ç¡®è®¤åæ¶æé®\r\n  @Input() openFromIframe: boolean = false;//æ¯å¦ä»iframeæå¼ï¼åºç¨IDPæäº¤å®¡æ¹éæ\r\n\r\n  @Input()\r\n  set dataId(dataId: string) {\r\n    if (!dataId) {\r\n      throw new Error(\"dataIdä¸ºç©º\");\r\n    }\r\n    this._dataId = dataId;\r\n  }\r\n\r\n  @Input()\r\n  set bizDefKey(bizDefKey: string) {\r\n    if (!bizDefKey) {\r\n      throw new Error(\"æµç¨åç±»idä¸ºç©º\");\r\n    }\r\n    this.showButtons = true;\r\n    this._bizDefKey = bizDefKey;\r\n    var payload = new StartProcessPayload();\r\n    payload.dataId = this._dataId;\r\n    payload.bizDefKey = this._bizDefKey;\r\n    this.setParam(payload);\r\n  }\r\n\r\n  setParam(param: StartProcessPayload): Observable<any> {\r\n    let subject = new Subject<any>();\r\n    if (!param) { return; }\r\n    this.payload.id = param.id;\r\n    this.payload.processDefinitionId = param.processDefinitionId;\r\n    this.payload.processDefinitionKey = param.processDefinitionKey;\r\n    this.payload.bizDefKey = param.bizDefKey;\r\n    this.payload.dataModelId = param.dataModelId;\r\n    this.payload.dataId = param.dataId;\r\n    this.payload.name = param.name;\r\n    this.payload.startUserId = param.startUserId;\r\n    this.payload.nextFlowNodes = [];\r\n    this.wfContext.processCategoryId = param.bizDefKey;\r\n    this.startProcessSimulate(this.payload, subject);\r\n    return subject.asObservable();\r\n  }\r\n\r\n  startProcessSimulate(payload: StartProcessPayload, subject: Subject<any>) {\r\n    const load = this.loadingService.show();\r\n    this.taskService.startProcessSimulate(payload).subscribe((response: SimulateResponse) => {\r\n      load.close();\r\n      subject.next(true);\r\n      this.response = response;\r\n      this.destProcesses = response.procDefs.map(process => ({ id: process.procDefId, name: process.procDefName + `(v${process.version}.0)` }));//å¢å æµç¨ççæ¬ä¿¡æ¯\r\n      if (this.destProcesses.length === 1) {//åªæä¸ä¸ªåéæµç¨æ¶\r\n        this.selectedProcessId = this.destProcesses[0].id;\r\n        this.setNextNode(response);\r\n        this.processPlaceholder = this.destProcesses[0].name;\r\n      } else {//å¤ä¸ªæµç¨æ¶ï¼åä¸ä¸æ¬¡éæ©ç\r\n        const selectedProcessId = this.getSelectedProcessCache(this.payload.bizDefKey);\r\n        if (selectedProcessId && this.destProcesses.findIndex(p => p.id === selectedProcessId.processDefinitionId) > -1) {\r\n          this.getDestNodes(selectedProcessId.processDefinitionId);\r\n          this.processPlaceholder = selectedProcessId.processDefinitionName;\r\n        } else {\r\n          this.processPlaceholder = this.i18nService.getValue('task.selectPlaceholder');\r\n        }\r\n      }\r\n    }, error => {\r\n      load.close();\r\n      subject.error(error);\r\n      this.taskService.error(error);\r\n    })\r\n  }\r\n\r\n  /**\r\n   * éæ©æä¸ªæµç¨å\r\n   * @param data\r\n   */\r\n  selectProcessChange(data: any) {\r\n    this.nodeCombo.onClear();\r\n    this.getDestNodes(data.data.id);\r\n  }\r\n\r\n  /**\r\n   * æ ¹æ®éæ©çæµç¨å®ä¹idè·åä¸ä¸ç¯èä¿¡æ¯\r\n   * @param selectedProcessId \r\n   */\r\n  private getDestNodes(selectedProcessId: string) {\r\n    this.selectedProcessId = selectedProcessId;\r\n    this.destNodes = [];\r\n    this.nodePlaceholder = '';\r\n    this.clearAssignInfos();\r\n\r\n    var payload = new StartProcessPayload();\r\n    payload.processDefinitionId = this.selectedProcessId;\r\n    payload.dataId = this.payload.dataId;\r\n\r\n    const load = this.loadingService.show();\r\n    this.taskService.startProcessSimulate(payload).subscribe((response: SimulateResponse) => {\r\n      load.close();\r\n      this.response = response;\r\n      this.setNextNode(response);\r\n    }, error => {\r\n      load.close();\r\n      this.taskService.error(error);\r\n    })\r\n  }\r\n\r\n  /**\r\n   * éæ©èç¹åäºä»¶\r\n   */\r\n  selectNodeChange(data: any) {\r\n    this.clearAssignInfos();\r\n    this.selectedNodeId = data.data.id;\r\n    const nodeNames = data.data.name.split('ï¼');\r\n\r\n    if (this.response.simulationPaths[data.index].nodeInfoList.every(node => node.resolved === true)) {//å·²é¢è§£æåä¸è\r\n      this.setAssignInfo(this.response.simulationPaths[data.index]);\r\n    } else {//æªé¢è§£æåä¸è\r\n      let payload = new StartProcessPayload();\r\n      payload.processDefinitionId = this.selectedProcessId;\r\n      payload.dataId = this.payload.dataId;\r\n      payload.nextFlowNodes = [];\r\n\r\n      this.selectedNodeId.split('ï¼').forEach((nodeId, index) => {\r\n        let nextFlowNode = new FlowNodeInfo();\r\n        nextFlowNode.activityDefinitionId = nodeId;\r\n        nextFlowNode.activityDefinitionName = nodeNames[index];\r\n        payload.nextFlowNodes.push(nextFlowNode);\r\n      });\r\n\r\n      const load = this.loadingService.show();\r\n      this.taskService.startProcessSimulate(payload).subscribe((response: SimulateResponse) => {\r\n        load.close();\r\n        this.setAssignInfo(response.simulationPaths[0]);//éæ©çä¸ä¸ç¯èåºè¯¥å¨åä¸æ¡è·¯å¾ä¸ï¼æåsimulationPaths[0]\r\n      }, error => {\r\n        load.close();\r\n        this.taskService.error(error);\r\n      })\r\n    }\r\n  }\r\n\r\n  /**\r\n * å®ç°çæ­£çæäº¤\r\n */\r\n  startProcessSubmit() {\r\n    if (!this.selectedProcessId) {\r\n      this.openFromIframe ? this.messager.warning(this.i18nService.getValue('startProcess.selectProcess')) :\r\n        this.notify.warning(this.i18nService.getValue('startProcess.selectProcess'));\r\n      return;\r\n    }\r\n    if (!this.selectedNodeId) {\r\n      this.openFromIframe ? this.messager.warning(this.i18nService.getValue('startProcess.selectNode')) :\r\n        this.notify.warning(this.i18nService.getValue('startProcess.selectNode'));\r\n      return;\r\n    }\r\n    if (this.assignInfos.filter(info => (info.assigneeInfo || info.selectedAssignees.length) && !info.assignees.length).length) {//ç©ºåä¸èç­ç¥æ¶ï¼ä¸æç¤ºéäºº\r\n      this.openFromIframe ? this.messager.warning(this.i18nService.getValue('task.selectProcessor')) :\r\n        this.notify.warning(this.i18nService.getValue('task.selectProcessor'));\r\n      return;\r\n    }\r\n\r\n    const nodes: string[] = this.selectedNodeId.split('ï¼');\r\n    for (let i = 0; i < nodes.length; i++) {\r\n      let nextFlowNode: FlowNodeInfo = {\r\n        activityDefinitionId: nodes[i],\r\n        activityDefinitionName: this.assignInfos[i].activityName,\r\n        dependency: this.assignInfos[i].dependency,\r\n        selectedAssignees: this.assignInfos[i].assigneeInfo ? this.assignInfos[i].assignees : [],\r\n        assigneeInfo: null,\r\n        resolved: false,\r\n        anonymous: false,\r\n        anonymousText: ''\r\n      }\r\n      //èç¹æ¾ä¸å°äººï¼ä¸å¼å¸¸æç¤ºï¼åç«¯æ§å¶ä½ï¼ä¸åè®¸èµ°æäº¤è¯·æ±ï¼æä»¶äºå¡é®é¢ï¼ãå¹¶è¡åºæ¯ä¸æä¸å¤ç\r\n      if (this.response && this.response.simulationPaths.length && !this.response.simulationPaths[0].id.startsWith('ParallelGateway')) {\r\n        if (nodes.length == 1 && nodes[i].startsWith('UserActivity') && this.assignInfos[i].resolved && !this.assignInfos[i].assigneeInfo && !this.assignInfos[i].selectedAssignees.length) {\r\n          const str = this.assignInfos[i].activityName + this.i18nService.getValue('startProcess.node') + this.i18nService.getValue('startProcess.noUser');\r\n          this.openFromIframe ? this.messager.warning(str) : this.notify.warning(str);\r\n          return;\r\n        }\r\n      }\r\n      this.payload.nextFlowNodes.push(nextFlowNode);\r\n    }\r\n    this.payload.processDefinitionId = this.selectedProcessId;\r\n    this.submitDisable = true;\r\n    const load = this.loadingService.show();\r\n    this.taskService.startProcess(this.payload).subscribe((response: ExecutionResponse) => {\r\n      load.close();\r\n      this.submitDisable = false;\r\n      this.subject.next(true);\r\n      this.subjectWithResponse.next(response);\r\n      let messageAfterSubmit = this.i18nService.getValue('startProcess.submitSuccess');\r\n      if (this.openFromIframe) {\r\n        (window.parent as any).gspWfService.eventHandler({ data: { type: MessageType.SubmitSuccess, message: messageAfterSubmit } });\r\n      } else {\r\n        this.handlerService.handleSubmitMessage(ConfigCode.Info_After_Submit, this.payload.bizDefKey);\r\n      }\r\n      if (!this.openFromIframe && response.needInteraction) {//æäº¤å®¡æ¹åéè¦ææ´¾åºæ¯\r\n        this.notify.info(this.i18nService.getValue('cueWords.select')\r\n          + response.nextFlowNodes[0].activityDefinitionName\r\n          + this.i18nService.getValue('cueWords.processor'));\r\n        let task = new TaskEntity();\r\n        let action = new TaskAction();\r\n        task.sourceId = response.nextFlowNodes[0].assigneeInfo.workItemId;\r\n        action.code = 'AssignUser';\r\n        action.name = this.i18nService.getValue('cueWords.assignUser');\r\n        this.handlerService.execute(task, action).subscribe(re => { });\r\n      }\r\n      this.setSelectedProcessCache();\r\n    }, (error) => {\r\n      load.close();\r\n      this.payload.nextFlowNodes = [];\r\n      this.submitDisable = false;\r\n      this.subject.next(false);//å·²ç»æäººç¨äºè¿ä¸ªsubjectï¼æäº¤å¤±è´¥çè¯è¿åfalse by fangpengfei@20210324\r\n      this.taskService.error(error);\r\n    })\r\n  }\r\n\r\n  /**\r\n   * éæ©æµç¨æ¸ç©º\r\n   */\r\n  selectProcessClear() {\r\n    this.selectedProcessId = '';\r\n    this.destNodes = [];\r\n    this.nodePlaceholder = '';\r\n    this.selectedNodeId = '';\r\n    this.clearAssignInfos();\r\n    this.response = null;\r\n  }\r\n\r\n  /**\r\n   * éæ©èç¹æ¸ç©º\r\n   */\r\n  selectNodeClear() {\r\n    this.selectedNodeId = '';\r\n    this.clearAssignInfos();\r\n  }\r\n\r\n  /**\r\n   * ç¨æ·å¸®å©éäºº\r\n   */\r\n  afterConfirm(data: Assignee[], index: number) {\r\n    this.assignInfos[index].assignees = data;\r\n  }\r\n\r\n  /**\r\n   * å¼¹æ¡ç¹å»åæ¶\r\n   */\r\n  cancel() {\r\n    if (this.openFromIframe) {\r\n      (window.parent as any).gspWfService.eventHandler({ data: { type: MessageType.Cancel, message: '' } });\r\n    } else {\r\n      this.subjectCancel.next(false);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * è·åæäº¤å®¡æ¹åè¿åå¼ï¼boolåï¼å¼å®¹åå²ï¼\r\n   */\r\n  getSubject() {\r\n    return this.subject.asObservable();\r\n  }\r\n  /**\r\n   * è·åæäº¤å®¡æ¹åè¿åå¼ï¼å®ä½åï¼å¸¦æµç¨ä¸ä¸æï¼\r\n   */\r\n  getSubjectWithResponse() {\r\n    return this.subjectWithResponse.asObservable();\r\n  }\r\n  /**\r\n   * ç¹å»åæ¶åçsubjectï¼å³é­çªå£ä½¿ç¨\r\n   * @returns\r\n   */\r\n  getSubjectCancel() {\r\n    return this.subjectCancel.asObservable();\r\n  }\r\n\r\n  /**\r\n   * è®¾ç½®ä¸ä¸ç¯è\r\n   */\r\n  private setNextNode(response: SimulateResponse) {\r\n    this.destNodes = response.simulationPaths && response.simulationPaths.map(path => ({\r\n      id: path.nodeInfoList.map(node => node.activityDefinitionId).join('ï¼'),\r\n      name: path.nodeInfoList.map(node => node.activityDefinitionName).join('ï¼')\r\n    }));\r\n    //å¤çé»è®¤åæ¯ï¼æ é»è®¤åæ¯è¿å-1\r\n    const defaultIndex = response.simulationPaths.findIndex(a => a.default);\r\n    if (defaultIndex > -1) {\r\n      this.selectedNodeId = this.destNodes[defaultIndex].id;\r\n      this.nodePlaceholder = this.destNodes[defaultIndex].name.indexOf('ï¼') > -1 ? response.simulationPaths[defaultIndex].name : this.destNodes[defaultIndex].name;\r\n      this.setAssignInfo(response.simulationPaths[defaultIndex]);\r\n    } else {\r\n      this.nodePlaceholder = this.i18nService.getValue('task.selectPlaceholder');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * è®¾ç½®å½åææ´¾ä¿¡æ¯å¸®å©åæ°\r\n   */\r\n  private setAssignInfo(simulationPaths: SimulationPath) {\r\n    this.assignInfos = [];\r\n    this.selectedNodeId.split('ï¼').forEach(nodeId => {\r\n      const node = simulationPaths.nodeInfoList.find(node => node.activityDefinitionId === nodeId);\r\n      if (node) {\r\n        this.assignInfos.push({\r\n          selectedAssignees: node.selectedAssignees,\r\n          assigneeInfo: node.assigneeInfo,\r\n          assignees: node.selectedAssignees.map(user => { return { id: user.id, name: user.name } }),\r\n          activityName: node.activityDefinitionName,\r\n          dependency: node.dependency,\r\n          anonymous: node.anonymous,\r\n          anonymousText: node.anonymousText,\r\n          resolved: node.resolved\r\n        })\r\n      } else {\r\n        this.assignInfos.push({\r\n          selectedAssignees: [],\r\n          assigneeInfo: null,\r\n          assignees: [],\r\n          activityName: '',\r\n          dependency: '',\r\n          anonymous: false,\r\n          anonymousText: '',\r\n          resolved: false,\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * æ¸ç©ºå½åææ´¾ä¿¡æ¯å¸®å©åæ°\r\n   */\r\n  private clearAssignInfos() {\r\n    this.assignInfos = [{\r\n      selectedAssignees: [],\r\n      assigneeInfo: null,\r\n      assignees: [],\r\n      activityName: '',\r\n      dependency: '',\r\n      anonymous: false,\r\n      anonymousText: '',\r\n      resolved: false,\r\n    }];\r\n  }\r\n\r\n  /**\r\n   * è·åæµè§å¨ç¼å­ï¼ä¸æ¬¡æµç¨éæ©çç»æ\r\n   */\r\n  private getSelectedProcessCache(processCategoryId: string) {\r\n    let browserCache = JSON.parse(localStorage.getItem(\"gspWfStartProcess\")) as StartProcessCache;\r\n    if (browserCache && browserCache.selectedProcessList) {\r\n      return browserCache.selectedProcessList.find(a => a.processCategory == processCategoryId);\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  /**\r\n   * æµè§å¨ç¼å­è®°ä¸æµç¨éæ©çç»æ\r\n   */\r\n  private setSelectedProcessCache() {\r\n    const processCategoryId = this.payload.bizDefKey;\r\n    const processDefinitionId = this.payload.processDefinitionId;\r\n    let process = this.destProcesses.find(a => a.id == processDefinitionId);\r\n    const processDefinitionName = process && process.name;\r\n\r\n    let browserCache = JSON.parse(localStorage.getItem(\"gspWfStartProcess\")) as StartProcessCache;\r\n    if (browserCache && browserCache.selectedProcessList) {\r\n      let selectedProcessList = browserCache.selectedProcessList;\r\n      if (selectedProcessList.findIndex(a => a.processCategory == processCategoryId) > -1) {\r\n        selectedProcessList.map(item => {\r\n          if (item.processCategory == processCategoryId) {\r\n            item.processDefinitionId = processDefinitionId;\r\n            item.processDefinitionName = processDefinitionName;\r\n            item.logTime = new Date();\r\n          }\r\n        });\r\n        browserCache.selectedProcessList = selectedProcessList;\r\n        localStorage.setItem(\"gspWfStartProcess\", JSON.stringify(browserCache));\r\n      } else {\r\n        let item = new SelectedProcessItem(processCategoryId, processDefinitionId, processDefinitionName);\r\n        selectedProcessList.push(item);\r\n        browserCache.selectedProcessList = selectedProcessList;\r\n        localStorage.setItem(\"gspWfStartProcess\", JSON.stringify(browserCache));\r\n      }\r\n    } else {\r\n      let browserCache = new StartProcessCache();\r\n      let selectedProcessList = [];\r\n      let item = new SelectedProcessItem(processCategoryId, processDefinitionId, processDefinitionName);\r\n      selectedProcessList.push(item);\r\n      browserCache.selectedProcessList = selectedProcessList;\r\n      localStorage.setItem(\"gspWfStartProcess\", JSON.stringify(browserCache));\r\n\r\n    }\r\n\r\n  }\r\n\r\n}\r\n","import { Injectable, Injector, ComponentFactoryResolver, ApplicationRef } from '@angular/core';\r\nimport { WfApprovalLogsService } from '@gsp-wf/wf-approval-logs'\r\nimport { ForecastProcessPayload, WFFlowchartService } from '@gsp-wf/ui-flowchart';\r\nimport { BsModalService, ModalOptions } from '@farris/ui-modal';\r\nimport { Observable, Subject, of } from 'rxjs';\r\nimport { TaskService } from './service/task.service';\r\nimport { TaskAction } from './entity/task-action';\r\nimport { AssigneeInfo } from './entity/complete-response';\r\nimport { NotifyService } from '@farris/ui-notify';\r\nimport { I18nService } from './service/i18n/i18n.service';\r\nimport { FrameworkService, AppOptions } from '@gsp-sys/rtf-common';\r\nimport { BizFormResult, FormParameter } from './entity/bizform';\r\nimport { TaskEntity } from './entity/task-entity';\r\nimport { TaskExecuteComponent } from './components/task-execute/task-execute.component';\r\nimport { switchMap } from 'rxjs/operators';\r\nimport { StartProcessPayload, CancelSubmitPayload } from './entity/start-process-payload';\r\nimport { ProcessSelectorComponent } from './submit/process-selector/process-selector.component';\r\nimport { ExecutionResponse } from './entity/execution-response';\r\nimport { LoadingService } from '@farris/ui-loading';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { BatchCancelNumber, BatchSubmitNumber } from './entity/batchNumber';\r\nimport { SimulateResponse } from './entity/simulate-response';\r\nimport { ConfigCode, OwnerType } from './entity/task-center-config';\r\n\r\n@Injectable()\r\nexport class WfTaskHandlerService {\r\n\r\n  subject = new Subject<any>();\r\n  private loading: LoadingService;\r\n  private message: MessagerService;\r\n  private curLanguage: string = localStorage.getItem('languageCode') || 'zh-CHS';//ç³»ç»å½åè¯­è¨\r\n  private batchSubmitNum: BatchSubmitNumber = {//æ¹éæäº¤æ°é\r\n    successNum: 0,\r\n    failedNum: 0,\r\n    errorNum: 0,\r\n  };\r\n  private batchCancelNum: BatchCancelNumber = {//æ¹éåæ¶æäº¤æ°é\r\n    successNum: 0,\r\n    errorNum: 0\r\n  }\r\n\r\n  constructor(\r\n    private logService: WfApprovalLogsService,\r\n    private flowchartService: WFFlowchartService,\r\n    private injector: Injector,\r\n    private resolver: ComponentFactoryResolver,\r\n    private modalService: BsModalService,\r\n    private taskService: TaskService,\r\n    private notify: NotifyService,\r\n    private i18nService: I18nService,\r\n    private frameworkService: FrameworkService,\r\n    private appRef: ApplicationRef,\r\n  ) {\r\n    this.loading = this.injector.get(LoadingService);\r\n    this.message = this.injector.get(MessagerService);\r\n  }\r\n\r\n  /**\r\n   * å¤çåæ¡ä»»å¡\r\n   * @param entity ä»»å¡å®ä½\r\n   * @param action ä»»å¡å¨ä½\r\n   */\r\n  execute(task: TaskEntity, action: TaskAction): Observable<any> {\r\n    switch (action.code) {\r\n      case 'ViewBizLog'://å®¡æ¹æ¥å¿\r\n        this.logService.showByDataId(task.refBizId);\r\n        break;\r\n      case 'ViewFlowChart'://æ¥çæµç¨\r\n        this.flowchartService.viewFlowChart(task.processInstanceId);\r\n        break;\r\n      case 'ViewExecuteForm':// èæ¥åæ®\r\n        this.openApp(task, action);\r\n        break;\r\n      default: //åçç±»ä»»å¡\r\n        this.complete(task, action);\r\n    }\r\n    return this.subject.asObservable();\r\n  }\r\n\r\n  assignByInfo(assigneeInfo: AssigneeInfo, openFromIframe: boolean): Observable<any> {\r\n    const assignSubject = new Subject<any>();\r\n    return assignSubject.asObservable();\r\n  }\r\n\r\n  private complete(task: TaskEntity, action: TaskAction) {\r\n    const compFactory = this.resolver.resolveComponentFactory(TaskExecuteComponent);\r\n    const compRef = compFactory.create(this.injector);\r\n    compRef.instance.setTask(task);\r\n    compRef.instance.setAction(action);\r\n    compRef.instance.addPadding();\r\n    const modalConfig: ModalOptions = {\r\n      title: action.name ? action.name : this.i18nService.getValue('task.title'),\r\n      width: 550,\r\n      height: compRef.instance.dialogHeight,\r\n      showButtons: true,\r\n      buttons: compRef.instance.buttons\r\n    };\r\n    const dialog = this.modalService.show(compRef, modalConfig);\r\n    compRef.instance.getSubject().subscribe(re => {\r\n      re && re.result && this.subject.next(true);\r\n      re && re.result && dialog.close();\r\n    })\r\n  }\r\n\r\n  /**\r\n   * æå¼å®¡æ¹èæ¥çé¢\r\n   * @param entity ä»»å¡å®ä½\r\n   * @param action å¨ä½å®ä½\r\n   */\r\n  openApp(entity: TaskEntity, action: TaskAction) {\r\n    const taskId = entity.sourceId;\r\n    const getFormInfoLoading = this.loading.show();\r\n    this.taskService.getAppInfo(taskId).subscribe((formInfo: BizFormResult) => {\r\n      getFormInfoLoading.close();\r\n\r\n      if (!formInfo) {\r\n        this.notify.info(this.i18nService.getValue('task.notFoundBill'));\r\n        return;\r\n      }\r\n      const options: AppOptions = {\r\n        appType: 'menu',\r\n        funcId: '',\r\n        appId: '',\r\n        appEntrance: '',\r\n        tabId: taskId,\r\n        isNewTab: true\r\n      };\r\n      // ä¼ å·¥ä½æµä¸ä¸æåæ°\r\n      const parameters = new Map<string, any>();\r\n      // åè½èåæåµ\r\n      if (formInfo.appId) {\r\n        // é»è®¤èæ¥å®¡æ¹çé¢\r\n        if (formInfo.formType === '1') {//è¡¨ååµæµç¨\r\n          parameters.set('workItemId', taskId);\r\n          parameters.set('procInstId', action.parameters[0].value);\r\n          parameters.set('taskState', entity.state);\r\n          parameters.set('isAssign', entity.actions.some(action => action.code === 'AssignUser'));\r\n          formInfo.parameters.forEach((item: FormParameter) =>\r\n            parameters.set(item.code, item.value)\r\n          );\r\n          options.funcId = formInfo.appId;\r\n        } else {//æµç¨åµè¡¨å\r\n          options.funcId = 'WF0120';\r\n          parameters.set('taskId', entity.id);\r\n          parameters.set('taskState', entity.state);\r\n        }\r\n      } else if (formInfo.url) {//è¡¨åæ ¼å¼\r\n        options.funcId = 'WF0120';\r\n        parameters.set('taskId', entity.id);\r\n        parameters.set('taskState', entity.state);\r\n      } else {\r\n        this.notify.info(this.i18nService.getValue('task.notFoundBill'));\r\n        return;\r\n      }\r\n      options.entityParams = parameters;\r\n      options.queryStringParams = parameters;//å¼å®¹IDPè¡¨å\r\n      const openMenuLoading = this.loading.show();\r\n      this.frameworkService.openMenu$(options).subscribe(() => {\r\n        openMenuLoading.close();\r\n      });\r\n    }, error => {\r\n      getFormInfoLoading.close();\r\n      this.taskService.error(error);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * è¿åå¨ä½åè¡¨ï¼è¡¨ååµæµç¨ç¨å°\r\n   * @param workItemId \r\n   */\r\n  refreshActions(workItemId: string): Observable<any> {\r\n    return this.taskService.getWorkItemActions(workItemId).pipe(\r\n      switchMap((actionList: any[]) => {\r\n        return of(actionList.filter(action =>\r\n          action.code !== 'ViewBizLog' &&\r\n          action.code !== 'ViewFlowChart' &&\r\n          action.code !== 'ViewExecuteForm'\r\n        ));\r\n      })\r\n    );\r\n  }\r\n\r\n  /**\r\n   * æ ¹æ®æµç¨å®ä¾IDåå¨ä½Codeåçä»»å¡ï¼ææªç¨å° by fangpengfei@2020.06.22ï¼\r\n   * @param procInstId æµç¨å®ä¾ID\r\n   * @param state ä»»å¡ç¶æ\r\n   * @param actionCode å¨ä½Code\r\n   */\r\n  executeByProcInstId(procInstId: string, state: number, actionCode: string): Observable<any> {\r\n    var action = new TaskAction();\r\n    action.code = actionCode;\r\n    const subject = new Subject();\r\n    this.taskService.getTaskByProcInstId(procInstId, state).subscribe((task: TaskEntity) => {\r\n      if (task) {\r\n        this.execute(task, action).subscribe(re => {\r\n          subject.next(re);\r\n        })\r\n      } else {\r\n        this.notify.info(this.i18nService.getValue('task.noTask'));\r\n      }\r\n    })\r\n    return subject.asObservable();\r\n  }\r\n\r\n  /**\r\n   * æ ¹æ®workItemId åçä»»å¡\r\n   * @param workItemId å·¥ä½é¡¹ID\r\n   * @param action å¨ä½å®ä½\r\n   */\r\n  executeByWorkItemId(workItemId: string, action: TaskAction): Observable<any> {\r\n    let task = new TaskEntity();\r\n    task.sourceId = workItemId;\r\n    return this.execute(task, action);\r\n  }\r\n\r\n  /**\r\n   * æäº¤å®¡æ¹\r\n   * @param payload ä¸ä¸æåæ°\r\n   * @returns subject trueï¼æäº¤æåï¼falseï¼æäº¤å¤±è´¥ \r\n   */\r\n  startProcess(payload: StartProcessPayload): Observable<any> {\r\n    const subject = new Subject();\r\n    const configLoad = this.loading.show();\r\n    this.taskService.getTaskCenterConfigByCode(ConfigCode.If_Show_Submit_Dialog, OwnerType.BizDefKey, payload.bizDefKey).subscribe(re => {\r\n      configLoad.close();\r\n      if (re && re.currentValue === 'false') {//èªå®ä¹æ éå¼¹æ¡\r\n        const simulateLoad = this.loading.show();\r\n        this.taskService.startProcessSimulate(payload).subscribe((response: SimulateResponse) => {//é¢è§£æ\r\n          simulateLoad.close();\r\n          if (!response || response.needInteraction === false) {//é¢è§£ææ éäº¤äº\r\n            const executeLoad = this.loading.show();\r\n            this.taskService.startProcess(payload).subscribe((response: ExecutionResponse) => {//æ§è¡\r\n              executeLoad.close();\r\n              subject.next(response);\r\n              this.handleSubmitMessage(ConfigCode.Info_After_Submit, payload.bizDefKey);\r\n            }, error => {//æ§è¡æ¥é\r\n              executeLoad.close();\r\n              subject.next(null);\r\n              this.taskService.error(error);\r\n            });\r\n          } else {//é¢è§£æéè¦äº¤äº\r\n            this.showStartProcessDialog(payload).subscribe(re => {\r\n              subject.next(re);\r\n            });\r\n          }\r\n        }, error => {//é¢è§£ææ¥é\r\n          simulateLoad.close();\r\n          subject.next(null);\r\n          this.taskService.error(error);\r\n        })\r\n      } else {//æ æ¯å¦å¼¹æ¡éç½®\r\n        this.showStartProcessDialog(payload).subscribe(re => {\r\n          subject.next(re);\r\n        });\r\n      }\r\n    }, error => {//è·åéç½®åºé\r\n      configLoad.close();\r\n      this.taskService.error(error);\r\n    })\r\n    return subject.asObservable();\r\n  }\r\n\r\n  /**\r\n   * æäº¤å®¡æ¹å¼¹æ¡\r\n   * @param payload åæ°\r\n   * @param withResponse æ¯å¦å¸¦è¿åå¼\r\n   */\r\n  private showStartProcessDialog(payload: StartProcessPayload): Observable<any> {\r\n    const subject = new Subject();\r\n    const compFactory = this.resolver.resolveComponentFactory(ProcessSelectorComponent);\r\n    const compRef = compFactory.create(this.injector);\r\n    compRef.instance.setParam(payload).subscribe(() => {\r\n      const modalConfig: ModalOptions = {\r\n        title: this.i18nService.getValue('startProcess.title'),\r\n        width: 520,\r\n        height: 338,\r\n        showButtons: true,\r\n        buttons: compRef.instance.buttons\r\n      };\r\n      const dialog = this.modalService.show(compRef, modalConfig);\r\n      if (payload.withResponse === true) {//åé¨ä½¿ç¨\r\n        compRef.instance.getSubjectWithResponse().subscribe(re => {\r\n          subject.next(re);\r\n          dialog.close();\r\n        });\r\n        compRef.instance.getSubjectCancel().subscribe(() => {\r\n          dialog.close();\r\n        });\r\n      } else {//å·²æä¸å¡ç»è°ç¨\r\n        compRef.instance.getSubject().subscribe(re => {\r\n          subject.next(re);\r\n          dialog.close();\r\n        });\r\n        compRef.instance.getSubjectCancel().subscribe(re => {\r\n          subject.next(re);\r\n          dialog.close();\r\n        });\r\n      }\r\n    });\r\n    return subject.asObservable();\r\n  }\r\n\r\n  /**\r\n   * åæ¶æäº¤\r\n   * @payload payload åæ°\r\n   */\r\n  cancelSubmit(payload: CancelSubmitPayload): Observable<any> {\r\n    const subject = new Subject();\r\n    const load = this.loading.show();\r\n    this.taskService.cancelSubmit(payload).subscribe(() => {\r\n      load.close();\r\n      subject.next(true);\r\n      this.handleSubmitMessage(ConfigCode.Info_After_Cancel_Submit, payload.bizDefKey);\r\n    }, error => {\r\n      load.close();\r\n      subject.error(false);\r\n      this.taskService.error(error);\r\n    })\r\n    return subject.asObservable();\r\n  }\r\n\r\n  /**\r\n   * æäº¤å®¡æ¹\r\n   * @param dataId è¡¨åid\r\n   * @param bizDefKey å¥å£åæ®id\r\n   * @param options èªå®ä¹éç½®\r\n   */\r\n  submitWithBizDefKey(dataId: string, bizDefKey: string): Observable<any> {\r\n    if (!dataId) {\r\n      this.notify.warning(this.i18nService.getValue('startProcess.dataIdIsNull'));\r\n      return;\r\n    }\r\n    if (!bizDefKey) {\r\n      this.message.error(this.i18nService.getValue('startProcess.bizDefKeyIsNull'));\r\n      return;\r\n    }\r\n\r\n    var payload = new StartProcessPayload();\r\n    payload.dataId = dataId;\r\n    payload.bizDefKey = bizDefKey;\r\n    payload.withResponse = true;\r\n\r\n    return this.startProcess(payload);\r\n  }\r\n\r\n  /**\r\n   * åæ¶æäº¤å®¡æ¹\r\n   * @param dataId è¡¨åid\r\n   * @param bizDefKey å¥å£åæ®id\r\n   * @param options èªå®ä¹éç½®\r\n   */\r\n  cancelSubmitWithDataId(dataId: string, bizDefKey: string): Observable<any> {\r\n    if (!dataId) {\r\n      this.notify.warning(this.i18nService.getValue('startProcess.dataIdIsNull'));\r\n      return;\r\n    }\r\n    if (!bizDefKey) {\r\n      this.message.error(this.i18nService.getValue('startProcess.bizDefKeyIsNull'));\r\n      return;\r\n    }\r\n    var cancelSubmitPayload = new CancelSubmitPayload();\r\n    cancelSubmitPayload.dataId = dataId;\r\n    cancelSubmitPayload.bizDefKey = bizDefKey;\r\n    return this.cancelSubmit(cancelSubmitPayload);\r\n  }\r\n\r\n  /**\r\n   * æ¹éæäº¤å®¡æ¹\r\n   * @param dataIds è¡¨åIDéå\r\n   * @param bizDefKey å¥å£åæ®id\r\n   */\r\n  batchSubmitWithBizDefKey(dataIds: string[], bizDefKey: string): Observable<any> {\r\n    if (!dataIds || !dataIds.length) {\r\n      this.notify.warning(this.i18nService.getValue('startProcess.dataIdIsEmpty'));\r\n      return;\r\n    }\r\n    if (!bizDefKey) {\r\n      this.message.error(this.i18nService.getValue('startProcess.bizDefKeyIsNull'));\r\n      return;\r\n    }\r\n    if (dataIds.length === 1) {\r\n      var startPayload = new StartProcessPayload()\r\n      startPayload.bizDefKey = bizDefKey;\r\n      startPayload.dataId = dataIds[0];\r\n      return this.startProcess(startPayload);\r\n    }\r\n\r\n    const subject = new Subject();\r\n    const load = this.loading.show();\r\n    this.batchSubmitNum.successNum = 0;\r\n    this.batchSubmitNum.failedNum = 0;\r\n    this.batchSubmitNum.errorNum = 0;\r\n    this.batchSubmitHelpFunction([...dataIds], bizDefKey, () => {\r\n      load.close();\r\n      subject.next(true);\r\n    });\r\n    return subject.asObservable();\r\n  }\r\n\r\n  /**\r\n   * æ¹éæäº¤å®¡æ¹è¾å©å½æ°\r\n   */\r\n  private batchSubmitHelpFunction(dataIds: string[], bizDefKey: string, handler: Function) {\r\n    if (dataIds && dataIds.length > 0) {\r\n      const dataId = dataIds.shift();//å¼ç¨ç±»åè½¬æ¢\r\n      let startPayload = new StartProcessPayload()\r\n      startPayload.bizDefKey = bizDefKey;\r\n      startPayload.dataId = dataId;\r\n      startPayload.variables = { simulate: true };\r\n      this.taskService.startProcess(startPayload).subscribe((response: ExecutionResponse) => {\r\n        if (response.needInteraction) {//éè¦äº¤äº\r\n          this.batchSubmitNum.failedNum++;\r\n          this.batchSubmitHelpFunction(dataIds, bizDefKey, handler);\r\n        } else {//ä¸éè¦äº¤äº\r\n          startPayload.variables = { simulate: false };\r\n          this.taskService.startProcess(startPayload).subscribe((response: ExecutionResponse) => {\r\n            this.batchSubmitNum.successNum++;\r\n            this.batchSubmitHelpFunction(dataIds, bizDefKey, handler);\r\n          }, () => {//å®éæäº¤æ¥é\r\n            this.batchSubmitNum.errorNum++;\r\n            this.batchSubmitHelpFunction(dataIds, bizDefKey, handler);\r\n          })\r\n        }\r\n      }, () => {//æ¨¡ææäº¤æ¥é\r\n        this.batchSubmitNum.errorNum++;\r\n        this.batchSubmitHelpFunction(dataIds, bizDefKey, handler);\r\n      })\r\n    } else {//æ¹éæ§è¡å®æ¯\r\n      this.showBatchSubmitInfo(this.batchSubmitNum, bizDefKey);\r\n      handler();//æ§è¡åè°å½æ°\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * æ¹éåæ¶æäº¤å®¡æ¹\r\n   * @param dataIds è¡¨åIDéå\r\n   * @param bizDefKey å¥å£åæ®id\r\n   */\r\n  batchCancelSubmitWithDataId(dataIds: string[], bizDefKey: string): Observable<any> {\r\n    if (!dataIds || !dataIds.length) {\r\n      this.notify.warning(this.i18nService.getValue('startProcess.dataIdIsEmpty'));\r\n      return;\r\n    }\r\n    if (!bizDefKey) {\r\n      this.message.error(this.i18nService.getValue('startProcess.bizDefKeyIsNull'));\r\n      return;\r\n    }\r\n    if (dataIds.length === 1) {\r\n      return this.cancelSubmitWithDataId(dataIds[0], bizDefKey);\r\n    }\r\n    const subject = new Subject();\r\n    const load = this.loading.show();\r\n    this.batchCancelNum.successNum = 0;\r\n    this.batchCancelNum.errorNum = 0;\r\n    this.batchCancelHelpFunction([...dataIds], bizDefKey, () => {\r\n      load.close();\r\n      subject.next(true);\r\n    });\r\n    return subject.asObservable();\r\n  }\r\n\r\n  /**\r\n   * æ¹éåæ¶è¾å©å½æ°\r\n   */\r\n  private batchCancelHelpFunction(dataIds: string[], bizDefKey: string, handler: Function) {\r\n    if (dataIds && dataIds.length) {\r\n      const dataId = dataIds.shift();//å¼ç¨ç±»åè½¬æ¢\r\n      let cancelPayload = new CancelSubmitPayload();\r\n      cancelPayload.dataId = dataId;\r\n      cancelPayload.bizDefKey = bizDefKey;\r\n      this.taskService.cancelSubmit(cancelPayload).subscribe(() => {//åæ¶æå\r\n        this.batchCancelNum.successNum++;\r\n        this.batchCancelHelpFunction(dataIds, bizDefKey, handler);\r\n      }, () => {//åæ¶å¤±è´¥\r\n        this.batchCancelNum.errorNum++;\r\n        this.batchCancelHelpFunction(dataIds, bizDefKey, handler);\r\n      })\r\n    } else {\r\n      this.showBatchCancelSubmitInfo(this.batchCancelNum, bizDefKey);\r\n      handler();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * å­è¡¨æäº¤å®¡æ¹\r\n   * @param parentDataId ä¸»è¡¨id\r\n   * @param childDataId å­è¡¨id\r\n   * @param bizDefKey å¥å£åæ®id\r\n   */\r\n  childSubmit(parentDataId: string, childDataId: string, bizDefKey: string): Observable<any> {\r\n    if (!parentDataId || !childDataId) {\r\n      this.notify.warning(this.i18nService.getValue('startProcess.dataIdIsNull'));\r\n      return;\r\n    }\r\n    if (!bizDefKey) {\r\n      this.message.error(this.i18nService.getValue('startProcess.bizDefKeyIsNull'));\r\n      return;\r\n    }\r\n    var startProcessPayload = new StartProcessPayload();\r\n    startProcessPayload.dataId = `${parentDataId},${childDataId}`;\r\n    startProcessPayload.bizDefKey = bizDefKey;\r\n    return this.startProcess(startProcessPayload);\r\n  }\r\n\r\n  /**\r\n   * å­è¡¨åæ¶æäº¤å®¡æ¹\r\n   * @param parentDataId ä¸»è¡¨id\r\n   * @param childDataId å­è¡¨id\r\n   * @param bizDefKey å¥å£åæ®id\r\n   */\r\n  childCancelSubmit(parentDataId: string, childDataId: string, bizDefKey: string): Observable<any> {\r\n    if (!parentDataId || !childDataId) {\r\n      this.notify.warning(this.i18nService.getValue('startProcess.dataIdIsNull'));\r\n      return;\r\n    }\r\n    if (!bizDefKey) {\r\n      this.message.error(this.i18nService.getValue('startProcess.bizDefKeyIsNull'));\r\n      return;\r\n    }\r\n    var cancelSubmitPayload = new CancelSubmitPayload();\r\n    cancelSubmitPayload.dataId = `${parentDataId},${childDataId}`;\r\n    cancelSubmitPayload.bizDefKey = bizDefKey;\r\n    return this.cancelSubmit(cancelSubmitPayload);\r\n  }\r\n\r\n  /**\r\n   * å­è¡¨æ¹éæäº¤å®¡æ¹\r\n   * @param parentDataId ä¸»è¡¨id\r\n   * @param childDataIds å­è¡¨idéå\r\n   * @param bizDefKey å¥å£åæ®id\r\n   */\r\n  childBatchSubmit(parentDataId: string, childDataIds: string[], bizDefKey: string): Observable<any> {\r\n    if (!parentDataId || !childDataIds) {\r\n      this.notify.warning(this.i18nService.getValue('startProcess.dataIdIsNull'));\r\n      return;\r\n    }\r\n    if (!bizDefKey) {\r\n      this.message.error(this.i18nService.getValue('startProcess.bizDefKeyIsNull'));\r\n      return;\r\n    }\r\n    const dataIds = childDataIds.map(childDataId => `${parentDataId},${childDataId}`);\r\n    return this.batchSubmitWithBizDefKey(dataIds, bizDefKey);\r\n  }\r\n\r\n  /**\r\n   * å­è¡¨æ¹éåæ¶æäº¤å®¡æ¹\r\n   * @param parentDataId ä¸»è¡¨id\r\n   * @param childDataIds å­è¡¨idéå\r\n   * @param bizDefKey å¥å£åæ®id\r\n   */\r\n  childBatchCancelSubmit(parentDataId: string, childDataIds: string[], bizDefKey: string): Observable<any> {\r\n    if (!parentDataId || !childDataIds) {\r\n      this.notify.warning(this.i18nService.getValue('startProcess.dataIdIsNull'));\r\n      return;\r\n    }\r\n    if (!bizDefKey) {\r\n      this.message.error(this.i18nService.getValue('startProcess.bizDefKeyIsNull'));\r\n      return;\r\n    }\r\n    const dataIds = childDataIds.map(childDataId => `${parentDataId},${childDataId}`);\r\n    return this.batchCancelSubmitWithDataId(dataIds, bizDefKey);\r\n  }\r\n\r\n  /**\r\n * æ¹éæäº¤æç¤ºä¿¡æ¯\r\n * @param successNum æåæ¡æ°\r\n * @param failedNum éè¦äº¤äºçæ¡æ°\r\n * @param errorNum æ§è¡æ¥éçæ¡æ°\r\n */\r\n  private showBatchSubmitInfo(num: BatchSubmitNumber, bizDefKey: string) {\r\n    if (num.successNum && !num.failedNum && !num.errorNum) {//æ¹éå¨é¨æå\r\n      this.taskService.getTaskCenterConfigByCode(ConfigCode.Info_After_Submit, OwnerType.BizDefKey, bizDefKey).subscribe((config: any) => {\r\n        if (this.curLanguage === 'en') {\r\n          this.notify.success(JSON.parse(config.currentValue).en);\r\n        }\r\n        if (this.curLanguage === 'zh-CHS') {\r\n          this.notify.success(JSON.parse(config.currentValue).zh_CHS);\r\n        }\r\n      })\r\n    } else {//éå¨é¨æå\r\n      let message = '';\r\n      num.successNum && (message += this.i18nService.getValue('batchStartProcess.success') + `ã${num.successNum}ã` + this.i18nService.getValue('batchStartProcess.row'));\r\n      num.errorNum && (message += this.i18nService.getValue('batchStartProcess.error') + `ã${num.errorNum}ã` + this.i18nService.getValue('batchStartProcess.row'));\r\n      num.failedNum && (message += this.i18nService.getValue('batchStartProcess.failed') + `ã${num.failedNum}ã` + this.i18nService.getValue('batchStartProcess.row'));\r\n      message += this.i18nService.getValue('batchStartProcess.single');\r\n      this.message.show('warning', message, { safeHtml: false });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * æ¹éåæ¶æäº¤æç¤ºä¿¡æ¯\r\n   */\r\n  private showBatchCancelSubmitInfo(num: BatchCancelNumber, bizDefKey: string) {\r\n    if (num.successNum && !num.errorNum) {//æ¹éå¨é¨æå\r\n      this.taskService.getTaskCenterConfigByCode(ConfigCode.Info_After_Cancel_Submit, OwnerType.BizDefKey, bizDefKey).subscribe((config: any) => {\r\n        if (this.curLanguage === 'en') {\r\n          this.notify.success(JSON.parse(config.currentValue).en);\r\n        }\r\n        if (this.curLanguage === 'zh-CHS') {\r\n          this.notify.success(JSON.parse(config.currentValue).zh_CHS);\r\n        }\r\n      })\r\n    } else {\r\n      let message = '';\r\n      num.successNum && (message += this.i18nService.getValue('startProcess.success') + `ã${num.successNum}ã` + this.i18nService.getValue('startProcess.row'));\r\n      num.errorNum && (message += this.i18nService.getValue('startProcess.failed') + `ã${num.errorNum}ã` + this.i18nService.getValue('startProcess.row'));\r\n      this.message.show('warning', message, { safeHtml: false });\r\n    }\r\n  }\r\n\r\n  handleSubmitMessage(code: string, ownerId: string) {\r\n    const load = this.loading.show();\r\n    this.taskService.getTaskCenterConfigByCode(code, OwnerType.BizDefKey, ownerId).subscribe(re => {\r\n      load.close();\r\n      if (re && re.currentValue) {\r\n        let message = '';\r\n        const currentValue = JSON.parse(re.currentValue);\r\n        this.curLanguage === 'zh-CHS' && (message = currentValue.zh_CHS);\r\n        this.curLanguage === 'en' && (message = currentValue.en);\r\n        this.curLanguage === 'zh-CHT' && (message = currentValue.zh_CHT);\r\n        this.notify.success(message);\r\n      } else {\r\n        code === ConfigCode.Info_After_Submit && this.notify.success(this.i18nService.getValue('startProcess.submitSuccess'));\r\n        code === ConfigCode.Info_After_Cancel_Submit && this.notify.success(this.i18nService.getValue('startProcess.cancelSubmitSuccess'));\r\n      }\r\n    }, error => {\r\n      load.close();\r\n      this.taskService.error(error);\r\n    })\r\n  }\r\n\r\n  /**\r\n   * è¡¨åä¸è§¦åæµç¨é¢è§£ææä½\r\n   * å·²å°è£ä¸ºè¡¨åçå½ä»¤æä½\r\n   */\r\n  processSimulate(): Observable<any> {\r\n    const subject = new Subject();\r\n    const gspWfEventService = (window as any).parent.gspWfEventService;\r\n    gspWfEventService.simulate(() => {\r\n      subject.next(true);\r\n    });\r\n    return subject.asObservable();\r\n  }\r\n\r\n  /**\r\n   * æ ¹æ®åæ®idæ¥çæµç¨å¾\r\n   * å·²å°è£ä¸ºè¡¨åå½ä»¤åæä½\r\n   */\r\n  viewFlowChartByDataId(dataId: string) {\r\n    if (dataId) {\r\n      this.flowchartService.viewFlowChartByDataId(dataId);\r\n    } else {\r\n      console.error(\"æ¥çæµç¨å¾ï¼è¡¨åidä¸ºç©º\");\r\n    }\r\n  }\r\n\r\n  /**\r\n   * æ¥çæµç¨å¾ï¼æ°ï¼æ¯æé¢è§ï¼\r\n   * å·²å°è£ä¸ºè¡¨åå½ä»¤åæä½\r\n   * @param bizDefKey æµç¨åç±»id\r\n   * @param dataId è¡¨åæ°æ®id\r\n   */\r\n  viewFlowChartWithForecast(bizDefKey: string, dataId: string) {\r\n    let payload = new ForecastProcessPayload();\r\n    payload.bizDefKey = bizDefKey;\r\n    payload.dataId = dataId;\r\n    this.flowchartService.viewProcess(payload);\r\n  }\r\n\r\n\r\n\r\n}\r\n","import { Pipe, PipeTransform, Optional } from '@angular/core';\r\nimport { I18nService } from './i18n.service';\r\n\r\n@Pipe({ name: 'translate' })\r\nexport class TranslatePipe implements PipeTransform {\r\n    constructor(@Optional() public i18nService: I18nService) { }\r\n    transform(name: any, defaultVal = ''): any {\r\n        if (this.i18nService) {\r\n            const r = this.i18nService.getValue(name);\r\n            return r ? r : defaultVal;\r\n        } else {\r\n            return defaultVal;\r\n        }\r\n    }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'lib-task-assigninfo',\r\n  templateUrl: './task-assigninfo.component.html',\r\n  styleUrls: ['./task-assigninfo.component.css']\r\n})\r\n\r\n/**\r\n * ç»ä»¶å·²å¼ç¨\r\n */\r\nexport class TaskAssigninfoComponent implements OnInit {\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n","import { Component, OnInit, Input, Output, ViewChild, TemplateRef, EventEmitter, ElementRef, AfterViewInit, ChangeDetectorRef, Injector } from '@angular/core';\r\nimport { AssigneeInfo } from '../../entity/complete-response';\r\nimport { I18nService } from '../../service/i18n/i18n.service';\r\nimport { DialogComponent } from '@farris/ui-dialog';\r\nimport { DataTableComponent } from '@farris/ui-datatable';\r\nimport { SysFarrisLookupComponent } from '@gsp-sys/sysmgr-ui';\r\nimport { NotifyService } from '@farris/ui-notify';\r\nimport { User } from '../../entity/user';\r\nimport { Assignee } from '../../entity/start-process-payload';\r\nimport { TaskService } from '../../service/task.service';\r\nimport { WfContext } from '../../entity/wfContext';\r\n\r\ndeclare let System: any;\r\n\r\n@Component({\r\n  selector: 'lib-assignee-info',\r\n  templateUrl: './assignee-info.component.html',\r\n  styleUrls: ['../task-execute/task-execute.component.css'],\r\n})\r\nexport class AssigneeInfoComponent implements OnInit, AfterViewInit {\r\n\r\n  bindingData: { id?: string, name?: string } = {};//ç³»ç»å¸®å©å¤éæ¶ç¨å°\r\n  myHelpBindingData: { id?: string, name?: string } = {};//èªå·±çå¸®å©å¤éæ¶ç¨å°\r\n  assignUserNgModule: string;\r\n  _assigneeInfo: AssigneeInfo;\r\n  _selectedAssignees: User[];//å·²ç»éä¸­çææ´¾äºº\r\n  assignees: Assignee[] = [];//è¿åéä¸­äººçIDæ°ç»\r\n  searchAssignUserList = [];//éå¨åææ´¾çç¨æ·æ°æ®ï¼æç´¢ç¨\r\n  anonymous = false; // æ¯å¦å¿å\r\n  anonymousText = ''; // å¿åæ¾ç¤ºææ¬\r\n\r\n  @Input() disabled: boolean = false;//åçäººåè¾å¥æ¡æ¯å¦ç¦ç¨\r\n  @Input() placeholder: string;\r\n  @Input() singleSelect: boolean;\r\n  @Input() filter = { notGetCurrentUser: false, notGetStopUser: true, orderField: \"order\", withAllOrg: true, orgId: '' }\r\n  @Input() ifShowBlank: boolean = true;//åçäººä¸ºç©ºæ¶ï¼æ¯å¦æ¾ç¤ºéäººæ¡\r\n  @Input() openFromIframe: boolean = false;//æ¯å¦ä»iframeæå¼ï¼åºç¨IDPæäº¤å®¡æ¹éæ\r\n  @Input() activityName: string;//èç¹åç§°\r\n  @Input() allowGlobalAssign: boolean;//æ¯å¦å¨åææ´¾\r\n  @Input() wfContext: WfContext;//å·¥ä½æµä¸ä¸æ\r\n\r\n  @ViewChild('allUserDialog') myUserHelp: DialogComponent;\r\n  @ViewChild('taskExecuteButtons') buttons: TemplateRef<any>;//ç¡®è®¤åæ¶æé®\r\n  @ViewChild('allUserTable') myUserHelpTable: DataTableComponent;\r\n  @ViewChild('allUserTable', { read: ElementRef }) dataTableEle: ElementRef;//ä¸ºdatatableå¢å é«åº¦\r\n\r\n  @ViewChild(SysFarrisLookupComponent) sysUserHelp: SysFarrisLookupComponent;//ç³»ç»ç¨æ·å¸®å©\r\n  @ViewChild('sysUserHelp', { read: ElementRef }) sysUserHelpEle: ElementRef; //ç³»ç»ç¨æ·å¸®å©DOMåç´ \r\n  @ViewChild('allUserDialog', { read: ElementRef }) myUserHelpEle: ElementRef;//èªå·±çå¸®å©DOMåç´ \r\n\r\n  @Output() afterConfirm = new EventEmitter<Assignee[]>();\r\n  groupIcon = '<i class=\"f-icon f-icon-plus-circle\" style=\"color: #2B87FF\"></i>';\r\n  extendUserHelp: boolean = false;//ç¨æ·å¸®å©æ¯å¦æ©å±\r\n  extendUserHelpUrl: string;//æ©å±å¸®å©çurl\r\n\r\n  columns = [\r\n    { title: this.i18nService.getValue('static.columnName.code'), field: 'Code', width: 80 },\r\n    { title: this.i18nService.getValue('static.columnName.name'), field: 'Name', width: 90 },\r\n    { title: this.i18nService.getValue('static.columnName.department'), field: 'OrgName', width: 180 }\r\n  ];\r\n\r\n  originAssignUserList: {//éå¨åææ´¾çç¨æ·æ°æ®\r\n    ID: string,\r\n    Code: string,\r\n    Name: string,\r\n    OrgId: string,\r\n    OrgName: string\r\n  }[];\r\n\r\n  constructor(\r\n    private i18nService: I18nService,\r\n    private notify: NotifyService,\r\n    private cd: ChangeDetectorRef,\r\n    private taskService: TaskService,\r\n    private injector: Injector\r\n  ) {\r\n    //æ¯å¦ä½¿ç¨farrisç¨æ·å¸®å©\r\n    this.taskService.getWfUserHelpConfig().subscribe((re: any) => {\r\n      if (re && re.userHelpConfig && re.userHelpConfig.isExtend == 'true') {\r\n        this.extendUserHelp = true;\r\n        this.extendUserHelpUrl = re.userHelpConfig.url + '?v=' + new Date().getTime().toString();\r\n      }\r\n    }, error => {\r\n      console.error(error);\r\n    })\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    // ä¸ºdata tableå¢å é«åº¦\r\n    let ele = this.dataTableEle.nativeElement as HTMLElement;\r\n    let body = ele && ele.querySelector('div.farris-datatable-container > div > div.farris-table-scorllable-body') as HTMLElement;\r\n    body && (body.style.height = '290px');\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  @Input()\r\n  set assigneeInfo(info: AssigneeInfo) {\r\n    this.disabled = false;\r\n    this.placeholder = null;//æ¸ç©º\r\n    this.assignUserNgModule = null;//æ¸ç©º\r\n    this._assigneeInfo = info;//å¯ä»¥ä¼ null\r\n    if (!this._assigneeInfo) {\r\n      this.disabled = true;\r\n    } else {\r\n      if (this._assigneeInfo.selectAssignee) {\r\n        this.disabled = false;\r\n        this.placeholder = this.i18nService.getValue('task.selectPlaceholder');//è¯·éæ©\r\n      } else {\r\n        this.disabled = true;\r\n        if (this._assigneeInfo.assigneeUsers && this._assigneeInfo.assigneeUsers.length) {\r\n          this.placeholder = this.anonymous ? this.anonymousText : this._assigneeInfo.assigneeUsers.map(user => user.name).join();//è§£æäººå\r\n        } else {\r\n          this.placeholder = this.i18nService.getValue('task.noUser');//æ \r\n        }\r\n      }\r\n      this.singleSelect = !this._assigneeInfo.multiSelect;\r\n      this.allowGlobalAssign = this._assigneeInfo.allowGlobalAssign;\r\n      if (this._assigneeInfo.organizationScope && this._assigneeInfo.organizationScope.length) {\r\n        const orgList = this._assigneeInfo.organizationScope[0];\r\n        this.filter.orgId = orgList.id;\r\n        this.filter.withAllOrg = orgList.includeChildren;\r\n      }\r\n    }\r\n  }\r\n\r\n  @Input()\r\n  set setAnonymous(anonymous: boolean) {\r\n    this.anonymous = anonymous;\r\n  }\r\n\r\n  @Input()\r\n  set setAnonymousText(anonymousText: string) {\r\n    this.anonymousText = anonymousText;\r\n  }\r\n\r\n  /**\r\n   * å·²éä¸­çäººï¼å¸®å©ä¸å¯ç¨ï¼\r\n   */\r\n  @Input()\r\n  set selectedAssignees(selectedAssignees: User[]) {\r\n    !this._assigneeInfo && (this.placeholder = null);\r\n    this._selectedAssignees = selectedAssignees;\r\n    selectedAssignees.length && (this.placeholder = this.anonymous ? this.anonymousText : selectedAssignees.map(user => user.name).join());\r\n  }\r\n\r\n  /**\r\n   * éæ©åä¸è\r\n   */\r\n  clickAssignUser() {\r\n    if (this.extendUserHelp && !this.openFromIframe) {\r\n      this.showExtendUserHelp();\r\n    } else {\r\n      this.showSysUserHelp();\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * å è½½æ©å±å¸®å©\r\n   */\r\n  private showExtendUserHelp() {\r\n    System.import(this.extendUserHelpUrl).then((moduleFactories: any) => {\r\n      const moduleFactory: any = Object.values(moduleFactories)[0];\r\n      const moduleRef = moduleFactory.create(this.injector);\r\n      let context = {\r\n        singleSelect: this.singleSelect,\r\n        allowGlobalAssign: this.allowGlobalAssign,\r\n        assigneeUsers: this._assigneeInfo && this._assigneeInfo.assigneeUsers && this._assigneeInfo.assigneeUsers.length ? this._assigneeInfo.assigneeUsers : [],\r\n        filter: this.filter,\r\n        selectedUsers: this.assignees,\r\n        wfContext: this.wfContext\r\n      }\r\n      moduleRef.instance.showHelp(context).subscribe(re => {\r\n        let userList = re.userList;\r\n        if (userList && userList.length) {\r\n          this.assignees = userList.map(user => { return { id: user.id, name: user.name } });\r\n          this.assignUserNgModule = this.assignees.map(user => user.name).join();\r\n        } else {\r\n          this.assignees = [];\r\n          this.assignUserNgModule = '';\r\n        }\r\n        this.afterConfirm.emit(this.assignees);\r\n        this.cd.detectChanges();\r\n      }, error => {\r\n        console.error(error);\r\n      });\r\n    }, error => {\r\n      console.error(error);\r\n    });\r\n  }\r\n\r\n  showSysUserHelp() {\r\n    if (this._assigneeInfo && this._assigneeInfo.assigneeUsers && this._assigneeInfo.assigneeUsers.length) {\r\n      this.getAssignUsersByIds();\r\n      this.myUserHelp.show();\r\n      setTimeout(() => {\r\n        this.cd.detectChanges();//éæ°é¢è§£æå\r\n        this.openFromIframe && this.openMyUserHelpOutIframe();\r\n      }, 100);\r\n    } else if (this.allowGlobalAssign) {\r\n      //éä¸­çäººä¿æéä¸­\r\n      this.bindingData = { id: this.assignees.map(a => a.id).join(), name: this.assignees.map(a => a.name).join() };\r\n      this.sysUserHelp.showHelp();\r\n      setTimeout(() => {\r\n        this.cd.detectChanges();//éæ°é¢è§£æå\r\n        this.openFromIframe && this.beforeOpenSysUserHelpOutIframe();\r\n      }, 100);\r\n    }\r\n\r\n  }\r\n\r\n  //èªå·±çç¨æ·å¸®å©å¨iframeå¤æå¼\r\n  private openMyUserHelpOutIframe() {\r\n    var myUserHelpDialog = this.myUserHelpEle.nativeElement as HTMLElement;\r\n    top.document.body.append(myUserHelpDialog);//å¼¹å°é¡¶çº§windowä¸ï¼ä¸ç¨å è½½farrisæ ·å¼\r\n\r\n    //æå¸®å©çé»è²é®ç½©å»æ\r\n    var backdrop = window.document.querySelector(\"body > bs-modal-backdrop\");\r\n    backdrop.remove();\r\n\r\n    var secondDiv = (myUserHelpDialog.firstChild as HTMLElement).firstChild as HTMLElement;//farris-dialogä¸çç¬¬äºçº§div\r\n    secondDiv.style.width = '850px';\r\n    secondDiv.style.height = '520px';\r\n    secondDiv.style.marginLeft = '-425px';\r\n    secondDiv.style.marginTop = '-260px';\r\n  }\r\n\r\n  private beforeOpenSysUserHelpOutIframe() {\r\n    this.sysUserHelp.farrisLookUp.dialog.reSize({ width: 850, height: 520 });\r\n    const sysUserHelpDialog = this.sysUserHelp.farrisLookUp.dialog.el.nativeElement as HTMLElement;\r\n    sysUserHelpDialog.parentElement.removeChild(sysUserHelpDialog);\r\n    this.sysUserHelp.farrisLookUp.draggable = false;\r\n    this.sysUserHelp.farrisLookUp.resizable = false;\r\n    this.sysUserHelp.farrisLookUp.showMaxButton = false;\r\n    this.sysUserHelp.farrisLookUp.dialogOpened.subscribe(() => {\r\n      setTimeout(() => {//å¦åä¸é¢çquerySelectorä¼æ¾ä¸å°\r\n        this.openSysUserHelpOutIframe();\r\n      }, 200)\r\n    });\r\n  }\r\n\r\n  //ç³»ç»ç¨æ·å¸®å©å¨iframeå¤æå¼\r\n  private openSysUserHelpOutIframe() {\r\n    var sysUserHelpDialog = this.sysUserHelp.farrisLookUp.dialog.el.nativeElement as HTMLElement;\r\n    this.sysUserHelp.farrisLookUp.dialog.reSize({ width: 850, height: 520 });\r\n    top.document.body.append(sysUserHelpDialog);\r\n  }\r\n\r\n  //ç³»ç»ç¨æ·å¸®å©éäºº\r\n  afterUsersSelect(data: any) {\r\n    if (data) {\r\n      data = this.singleSelect ? [data] : data;\r\n      this.assignees = data.map(user => { return { id: user.id, name: user.name } });\r\n      this.assignUserNgModule = data.map(user => user.name).join();\r\n      this.afterConfirm.emit(this.assignees);\r\n      this.cd.detectChanges();\r\n    }\r\n  }\r\n\r\n  //æ ¹æ®assigneeInfo.assigneeIdsè·åææ´¾äººcodeãnameç­ä¿¡æ¯\r\n  getAssignUsersByIds() {\r\n    this.originAssignUserList = this._assigneeInfo.assigneeUsers.map(user => {\r\n      return {\r\n        ID: user.id,\r\n        Name: user.name,\r\n        Code: user.code,\r\n        OrgId: user.orgId,\r\n        OrgName: user.orgNamePath\r\n      };\r\n    }),\r\n      this.searchAssignUserList = this.originAssignUserList;\r\n  }\r\n\r\n  //éå¨åææ´¾æç´¢\r\n  myUserHelpSearch(event) {\r\n    if (event.value) {\r\n      const value = event.value;\r\n      this.searchAssignUserList = this.originAssignUserList.filter(user =>\r\n        (user.Name) && user.Name.includes(value) ||\r\n        (user.Code) && user.Code.includes(value)\r\n      );\r\n    } else {\r\n      this.getAssignUsersByIds();\r\n    }\r\n  }\r\n\r\n  //éå¨åææ´¾éäºº\r\n  myUserHelpAfterSelect() {\r\n    if (this.myUserHelpTable.selections === undefined) {\r\n      this.notify.warning(this.i18nService.getValue('static.assignee.noAssignee'));\r\n      return;\r\n    }\r\n    const selectedUsers = this.singleSelect ? [this.myUserHelpTable.selections] : this.myUserHelpTable.selections;\r\n    this.assignUserNgModule = selectedUsers.map(user => user.Name).join();\r\n    this.assignees = selectedUsers.map(user => { return { id: user.ID, name: user.Name } });\r\n    this.afterConfirm.emit(this.assignees);\r\n    this.cd.detectChanges();\r\n    this.myUserHelp.close();\r\n  }\r\n\r\n  //éå¨åææ´¾ç¹å»åæ¶åäºä»¶\r\n  myUserHelpCancel() {\r\n    this.myUserHelp.close();\r\n  }\r\n\r\n  //æ¸é¤\r\n  assignUserClear() {\r\n    this.assignees = [];\r\n    this.assignUserNgModule = null;\r\n    this.afterConfirm.emit([]);\r\n    this.bindingData = {};\r\n  }\r\n\r\n}\r\n","import { Directive, EventEmitter, HostListener, OnInit, Output, OnDestroy } from '@angular/core';\r\nimport { Subject, Subscription } from 'rxjs';\r\nimport { throttleTime } from 'rxjs/operators';\r\n/**\r\n * ç¹å»èæµå¨ï¼é¿åè¿ç»­ç¹å»\r\n */\r\n@Directive({\r\n  selector: '[directive-throttle]'\r\n})\r\nexport class ThrottleClickDirective implements OnInit, OnDestroy {\r\n  // ä¸å®çæ¶é´ååªæ§è¡ç¬¬ä¸ä¸ªäºä»¶\r\n  private THROTTLE_TIME: number = 2000;\r\n  private subject = new Subject<MouseEvent>();\r\n  private click: Subscription;\r\n  // äºä»¶æ¹æ³\r\n  @Output() throttleClick = new EventEmitter();\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n    const result = this.subject.pipe(\r\n      throttleTime(this.THROTTLE_TIME)\r\n    );\r\n    this.click = result.subscribe(e => {\r\n      this.throttleClick.emit(e)\r\n    })\r\n\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.click.unsubscribe();\r\n  }\r\n\r\n  @HostListener('click', ['$event'])\r\n  onClick(evt: MouseEvent) {\r\n    this.subject.next(evt);\r\n  }\r\n}","\r\n/**\r\n * æ§è¡ä¸ä¼ éä»¶å®ä½\r\n */\r\nexport class FileUploadEntity {\r\n\r\n    rootId: string;\r\n\r\n    metadataIdList: string[];\r\n}\r\n\r\n/**\r\n * æ§è¡å é¤éä»¶æéå®ä½\r\n */\r\nexport class FileDeleteEntity {\r\n\r\n    rootId: String;\r\n\r\n    metadataId: String;\r\n\r\n    mode: String;\r\n}\r\n\r\nexport class GspDocUploadEntity {\r\n\r\n    filePath: string;\r\n\r\n    metadata: GspDocMetadata;\r\n\r\n    fileContent: string;\r\n\r\n    mode: string;\r\n}\r\n\r\nexport class GspDocMetadata {\r\n\r\n    id: string;\r\n\r\n    fileName: string;\r\n\r\n    rootId: string;\r\n\r\n    docType: string;\r\n}","import { TaskService } from \"../service/task.service\";\r\n\r\nexport class CommonComment {\r\n    id: string;\r\n    userId?: string;\r\n    message: string;\r\n    sortOrder?: number;\r\n    static newEntity(): CommonComment {\r\n        return {\r\n            id: TaskService.newId(),\r\n            message: ''\r\n        };\r\n    }\r\n}\r\n","import { Component, OnInit, Input, ViewChild, forwardRef, Output, EventEmitter, TemplateRef } from '@angular/core';\r\nimport { DialogComponent } from '@farris/ui-dialog';\r\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\r\nimport { FDropdownDirective } from '@farris/ui-dropdown';\r\nimport { UploadDialogService } from '@gsp-svc/formdoc-upload';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { FileDeleteEntity, FileUploadEntity, GspDocMetadata, GspDocUploadEntity } from '../../entity/attachment';\r\nimport { SignHereComponent } from '@gsp-wf/wf-sign';\r\nimport { AvatarComponent } from '@farris/ui-avatar';\r\nimport { DownloadService } from '@gsp-svc/file-load';\r\nimport { TaskService } from '../../service/task.service';\r\nimport { CommonComment } from '../../entity/comment';\r\nimport { forkJoin, Observable, of } from 'rxjs';\r\nimport { HttpService } from '@ecp-caf/caf-common';\r\nimport { DataColumn, DatagridComponent } from '@farris/ui-datagrid';\r\nimport { I18nService } from '../../service/i18n/i18n.service';\r\nimport { EditorTypes } from '@farris/ui-datagrid-editors';\r\nimport { LoadingService } from '@farris/ui-loading';\r\nimport { ConfigCode, TaskCenterConfig } from '../../entity/task-center-config';\r\nimport { NotifyService } from '@farris/ui-notify';\r\n\r\n@Component({\r\n  selector: 'wf-comment',\r\n  templateUrl: './task-comment.component.html',\r\n  styleUrls: ['./task-comment.component.scss'],\r\n  providers: [{\r\n    provide: NG_VALUE_ACCESSOR,\r\n    useExisting: forwardRef(() => TaskCommentComponent),\r\n    multi: true\r\n  },]\r\n})\r\nexport class TaskCommentComponent implements OnInit, ControlValueAccessor {\r\n\r\n  @Input() showAttachment: boolean = true;//æ¯å¦æ¾ç¤ºéä»¶ä¸ä¼ ï¼ç»ä»¶æ§å¶\r\n  @Input() showSign: boolean = true;//æ¯å¦æ¾ç¤ºç­¾åï¼ç»ä»¶æ§å¶ï¼ä¸åå¨ä½å¯è½ä¼ä¸æ¾ç¤ºï¼\r\n  @Input() showCommonComment = true;//æ¯å¦æ¾ç¤ºå¸¸ç¨æè§\r\n  @Input() comment: string;\r\n  @Input() placeholder = '';\r\n  @Input() processInstanceId: string;\r\n  @Input() textAreaHeight: number = 120;//æå­æ¡çé«åº¦\r\n\r\n  @Input()\r\n  set TaskCenterConfig(configList: TaskCenterConfig[]) {\r\n    const attachment = configList.find(a => a.configCode == ConfigCode.If_Show_Attachment);\r\n    const sign = configList.find(a => a.configCode == ConfigCode.If_Show_Signature);\r\n    const enableSign = configList.find(a => a.configCode == ConfigCode.If_Use_Sign_By_Default);\r\n    const editSign = configList.find(a => a.configCode === ConfigCode.If_Can_Edit_Signature);\r\n    if ((window as any).gspframeworkService.common) {\r\n      this.curUserId = (window as any).gspframeworkService.common.userInfos.get().userId;\r\n    } else {\r\n      this.curUserId = (window as any).parent.gspframeworkService.common.userInfos.get().userId;\r\n    }\r\n    attachment && attachment.currentValue === 'true' && (this.ifShowAttachment = true);\r\n    sign && sign.currentValue === 'true' && (this.ifShowSign = true);\r\n    enableSign && enableSign.currentValue === 'false' && (this.ifEnableSign = false);\r\n    editSign && editSign.currentValue === 'false' && (this.ifCanEditSign = false);\r\n    if (this.ifShowSign && this.ifEnableSign) {\r\n      this.getUserSign(this.curUserId);\r\n    }\r\n  }\r\n\r\n  @Output() attachment = new EventEmitter();//éä»¶\r\n  @Output() signature = new EventEmitter();//ä¸ä¼ ç­¾åä¹åï¼åéç­¾åid\r\n  @ViewChild('commentDialog') commentDialog: DialogComponent;//å¸¸ç¨æè§ç®¡ç\r\n  @ViewChild('signDialog') signDialog: DialogComponent;//æåç­¾åå¼¹æ¡\r\n  @ViewChild('dropdownEl') dropDownEl: FDropdownDirective;//è§£å³éæ©æè§åï¼ä¸æèåæ æ³æ¶æçé®é¢\r\n  @ViewChild('wfSignHere') signaturePad: SignHereComponent;//æåç­¾åç»ä»¶\r\n  @ViewChild('farrisAvatar') farrisAvatar: AvatarComponent;//å¤´åç»ä»¶ï¼ç¨ä½ç­¾åå¾çä¸ä¼ \r\n  @ViewChild('dataGrid') dataGrid: DatagridComponent;\r\n  @ViewChild('commentTypeCell') commentTypeCell: TemplateRef<any>;//å¸¸ç¨æè§ç±»å«æ¨¡æ¿\r\n  @ViewChild('commentOperateCell') commentOperateCell: TemplateRef<any>;//å¸¸ç¨æè§å é¤\r\n\r\n  private _value = '';\r\n  attachmentList: any[] = [];\r\n  ifShowAttachment: boolean = false;//ä»»å¡ä¸­å¿éç½®ï¼æ¯å¦æ¾ç¤ºéä»¶ä¸ä¼ \r\n  ifShowSign: boolean = false;//ä»»å¡ä¸­å¿éç½®ï¼æ¯å¦æ¾ç¤ºæåç­¾å\r\n  curUserId: string;//å½åç¨æ·id\r\n  signatureImage: string;//ç­¾åå¾ççbase64å¼\r\n  tmpSignatureImage: string;//ä¸´æ¶ä¿å­ä¸ä¼ çå¾ç\r\n  downloadService = new DownloadService();\r\n  ifUseSign: boolean = false;//æ¯å¦ä½¿ç¨æå\r\n  ifUseImg: boolean = true;//æ¯å¦ä½¿ç¨ä¸ä¼ å¾ç\r\n  ifEnableSign: boolean = true;//æ¯å¦é»è®¤å¯ç¨ç­¾å\r\n  ifUploadImg: boolean = false;//æ¯å¦ä¸ä¼ è¿å¾ç\r\n  ifCanEditSign: boolean = true;//æ¯å¦åè®¸ç¼è¾ç­¾å\r\n  originSignId: string;//åå§çç­¾åid\r\n\r\n  commentList: CommonComment[] = [];\r\n  originCommentList: CommonComment[] = [];\r\n\r\n  commentColumns: DataColumn[] = [];\r\n\r\n  set value(v) {\r\n    if (this._value !== v) {\r\n      this._value = v;\r\n      this.onModelChange(v);\r\n    }\r\n\r\n  }\r\n  get value() {\r\n    return this._value;\r\n  }\r\n\r\n  onModelChange = (obj: any) => { };\r\n  onModelTouched = (obj: any) => { };\r\n\r\n  constructor(\r\n    private taskService: TaskService,\r\n    private httpSvc: HttpService,\r\n    private uploadDialog: UploadDialogService,\r\n    private messageService: MessagerService,\r\n    private i18nService: I18nService,\r\n    private loadingService: LoadingService,\r\n    private notify: NotifyService,\r\n  ) {\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.commentColumns = [{\r\n      field: 'message',\r\n      width: 100,\r\n      title: this.i18nService.getValue('comment.static.content'),\r\n      editor: { type: EditorTypes.TEXTBOX, options: {} },\r\n    }, {\r\n      field: 'userId',\r\n      width: 20,\r\n      title: this.i18nService.getValue('comment.static.type'),\r\n      template: this.commentTypeCell\r\n    }, {\r\n      field: 'operate',\r\n      width: 20,\r\n      title: this.i18nService.getValue('comment.static.operate'),\r\n      template: this.commentOperateCell\r\n    }];\r\n    // è·åå¸¸ç¨æè§åè¡¨\r\n    this.loadComments();\r\n  }\r\n\r\n  onEditComment() {\r\n    this.dropDownEl.close();\r\n    this.commentDialog.show();\r\n  }\r\n\r\n  loadComments() {\r\n    this.taskService.getCommentList().subscribe((data: any[]) => {\r\n      this.commentList = data;\r\n      this.originCommentList = [...data];\r\n    });\r\n  }\r\n\r\n  /**\r\n   * ControlValueAccessorå¿é¡»å®ç°çæ¹æ³\r\n   */\r\n  writeValue(value: string) {\r\n    if (value !== this.value) {\r\n      this.value = value;\r\n    }\r\n  }\r\n\r\n  registerOnChange(fn) {\r\n    this.onModelChange = fn;\r\n  }\r\n\r\n  registerOnTouched(fn) {\r\n    this.onModelTouched = fn;\r\n  }\r\n\r\n  /**\r\n   * éæ©ä¸æ¡å¸¸ç¨æè§åäºä»¶\r\n   */\r\n  buttonClick(data: any) {\r\n    this.dropDownEl.close();\r\n    this.value = data;\r\n  }\r\n\r\n  /**\r\n   * ä¸ä¼ éä»¶\r\n   */\r\n  uploadAttachment() {\r\n    let isRepeat = false;\r\n    this.uploadDialog.uploadFile(this.processInstanceId, 'wf_attachment').then(re => {\r\n      for (let i of (re as any[])) {\r\n        isRepeat = false;\r\n        for (let attach of this.attachmentList) {\r\n          if (attach.fileName === i.fileName) {\r\n            this.messageService.info('åå«éå¤æä»¶' + i.fileName);\r\n            isRepeat = true;\r\n            break;\r\n          }\r\n        }\r\n        if (!isRepeat) {\r\n          this.attachmentList.push(i);\r\n        }\r\n      }\r\n      this.attachment.emit(this.attachmentList);\r\n      //æ§è¡ä¸ä¼ éä»¶\r\n      let files = new FileUploadEntity();\r\n      files.rootId = \"wf_attachment\";\r\n      files.metadataIdList = [];\r\n      this.attachmentList.forEach(a => {\r\n        files.metadataIdList.push(a.metadataId);\r\n      })\r\n      files.metadataIdList.length && this.taskService.uploadAttachment(files).subscribe(() => { });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * å é¤éä»¶\r\n   */\r\n  attachmentDelete(attachment) {\r\n    var gspDocDeleteEntity: FileDeleteEntity = {\r\n      rootId: \"wf_attachment\",\r\n      metadataId: attachment.metadataId,\r\n      mode: \"Formal\"\r\n    }\r\n    let index = this.attachmentList.indexOf(attachment);\r\n    if (index > -1) {\r\n      this.attachmentList.splice(index, 1);\r\n    }\r\n    this.attachment.emit(this.attachmentList);\r\n    this.taskService.deleteAttachment(gspDocDeleteEntity).subscribe(() => { });\r\n  }\r\n\r\n  /**\r\n   * è·åä¸åæ ¼å¼éä»¶çç¼©ç¥å¾\r\n   */\r\n  imageUrl(attachmentInfo) {\r\n    const url = '/platform/runtime/wf/webapp/mobiletaskcenter/assets/accessory/';\r\n    return url + this.taskService.createItem(attachmentInfo) + '.svg';\r\n  }\r\n\r\n  /**\r\n   * å±ç¤ºæåç­¾ådialog\r\n   */\r\n  showSignDialog() {\r\n    this.signDialog.show();\r\n    if (!this.ifEnableSign) {\r\n      this.getUserSign(this.curUserId);\r\n    }\r\n  }\r\n\r\n  /**\r\n * ç¹å»å é¤ç­¾å\r\n */\r\n  clickToDeleteImage() {\r\n    this.signatureImage = '';\r\n    this.signature.emit(null);\r\n    const load = this.loadingService.show();\r\n    this.taskService.addTaskCenterConfig(ConfigCode.If_Use_Sign_By_Default, 'false').subscribe(re => {\r\n      load.close();\r\n    }, () => {\r\n      load.close();\r\n    })\r\n  }\r\n\r\n  clickToUseSign() {\r\n    this.ifUseImg = false;\r\n    this.ifUseSign = true;\r\n    const canvas: any = this.signaturePad.canvasDiv.nativeElement.querySelector('canvas');\r\n    canvas.height = 252;\r\n    canvas.width = 665;\r\n  }\r\n\r\n  clickToUploadImg() {\r\n    this.farrisAvatar.onClick();\r\n  }\r\n\r\n  clickToConfirm() {\r\n    let image: any;\r\n    if (this.signaturePad && this.signaturePad.isDraw) {//å¦æç­¾è¿å\r\n      image = this.signaturePad.confirm();\r\n    } else if (this.ifUploadImg) {//å¦æä¸ä¼ è¿å¾ç\r\n      image = this.tmpSignatureImage;\r\n    }\r\n    if (image) {\r\n      this.uploadSignatureImg(image);\r\n    } else {\r\n      if (this.tmpSignatureImage) {\r\n        this.signatureImage = this.tmpSignatureImage;\r\n        this.signature.emit(this.originSignId);\r\n        if (!this.ifEnableSign) {\r\n          const load = this.loadingService.show();\r\n          this.taskService.addTaskCenterConfig(ConfigCode.If_Use_Sign_By_Default, 'true').subscribe(re => {\r\n            load.close();\r\n          }, () => {\r\n            load.close();\r\n          })\r\n        }\r\n      }\r\n      this.signDialog.close();\r\n    }\r\n  }\r\n\r\n  clickToReset() {\r\n    this.ifUseSign = false;\r\n    this.ifUseImg = true;\r\n    this.signatureImage = '';\r\n    this.tmpSignatureImage = '';\r\n    this.signature.emit('');\r\n  }\r\n\r\n  clickToCancel() {\r\n    this.signDialog.close();\r\n  }\r\n\r\n  /**\r\n   * ä¸ä¼ å¾çåäºä»¶\r\n   * event.base64 æ¯å¾çä¿¡æ¯,event.nameæ¯å¸¦åç¼çå¾çåï¼event.typeå¦image/jpeg\r\n   */\r\n  imgChange(event: any) {\r\n    this.ifUseImg = true;\r\n    this.ifUseSign = false;\r\n    this.ifUploadImg = true;\r\n    const image = event.base64;\r\n    this.tmpSignatureImage = image;\r\n    this.signatureImage = image;\r\n  }\r\n\r\n  private uploadSignatureImg(image: any) {\r\n    var uploadSignature = new GspDocUploadEntity();\r\n    uploadSignature.fileContent = image.split(',')[1];\r\n    uploadSignature.filePath = this.curUserId;\r\n    uploadSignature.mode = \"Formal\";\r\n    uploadSignature.metadata = new GspDocMetadata();\r\n    uploadSignature.metadata.id = this.taskService.createNM();\r\n    uploadSignature.metadata.fileName = this.taskService.createNM() + \".png\";\r\n    uploadSignature.metadata.rootId = \"taskcentersignature\";\r\n    uploadSignature.metadata.docType = \"png\";\r\n    const load = this.loadingService.show();\r\n    this.taskService.uploadSignature(uploadSignature).subscribe(signId => {\r\n      load.close();\r\n      this.originSignId = signId;\r\n      this.signature.emit(signId);\r\n      this.signatureImage = image;\r\n      this.signDialog.close();\r\n    }, error => {\r\n      load.close();\r\n      this.messageService.error('ä¸ä¼ ç­¾åå¤±è´¥');\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * è·åç¨æ·çæè¿ä¸æ¬¡ç­¾å\r\n   */\r\n  private getUserSign(userId: string) {\r\n    const load = this.loadingService.show();\r\n    this.taskService.getUserSign(userId).subscribe(result => {\r\n      load.close();\r\n      if (result && result.length) {\r\n        var sign;\r\n        if (result.length == 1) {\r\n          sign = result[0];\r\n        } else {\r\n          const list = result.filter(a => a && a.lastModifiedTime);\r\n          sign = list.reduce(function (a, b) {\r\n            return a.lastModifiedTime > b.lastModifiedTime ? a : b;\r\n          })\r\n        }\r\n        this.signature.emit(sign.id);\r\n        this.signatureImage = this.downloadService.getDownloadUrl(sign.id, 'taskcentersignature');\r\n        this.tmpSignatureImage = this.signatureImage;\r\n      }\r\n    }, error => {\r\n      console.error(error);\r\n      load.close();\r\n    })\r\n  }\r\n\r\n  /**\r\n   * æ°å¢ä¸æ¡å¸¸ç¨æè§\r\n   */\r\n  add() {\r\n    const newEntity = CommonComment.newEntity();\r\n    newEntity.sortOrder = this.commentList.length + 1;\r\n    this.commentList = this.commentList.concat(newEntity);\r\n  }\r\n\r\n  /**\r\n   * å é¤ä¸æ¡æè§ data.rowData\r\n   */\r\n  clickToDeleteComment(data: any) {\r\n    if (data.rowData.userId !== '*') {\r\n      this.commentList = this.commentList.filter(c => c.id != data.rowData.id)\r\n      this.dataGrid.loadData(this.commentList);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * å¸¸ç¨æè§ä¿å­\r\n   */\r\n  save() {\r\n    this.dataGrid.endCellEdit();\r\n    this.httpSave().subscribe(r => {\r\n      this.loadComments();\r\n      this.commentDialog.close();\r\n    });\r\n  }\r\n\r\n  /**\r\n   * è°ç¨æ¥å£æ§è¡æ°å¢å é¤ãä¿®æ¹\r\n   */\r\n  private httpSave(): Observable<any> {\r\n    const url = `/api/runtime/wf/v1.0/commonComments`;\r\n    const originCommentIds = this.originCommentList.filter(o => o.userId !== '*').map(d => d.id);\r\n    //å é¤ç\r\n    const deleteIds = originCommentIds.filter(id => this.commentList.findIndex(c => c.id === id) < 0);\r\n\r\n    return forkJoin(deleteIds.map(id => this.httpSvc.delete(url + `/${id}`, null))\r\n      .concat(this.commentList.map(add => this.httpSvc.post(url, add))));\r\n  }\r\n\r\n  /**\r\n * webç«¯æå¼éä»¶é¢è§\r\n */\r\n  attachmentPreview(metadataId) {\r\n    const options = {\r\n      appType: \"app\",\r\n      funcId: \"\",\r\n      tabName: \"ææ¡£å¨çº¿é¢è§\",\r\n      appId: \"6ccb476b-f2ba-df8f-6f47-d37d100c56e2\",\r\n      appEntrance: \"docviewertab\",\r\n      tabId: new Date().getTime(),\r\n      entityParams: {\r\n        metadataIdList: [metadataId],\r\n        rootId: \"wf_attachment\",\r\n        metadataId: null,\r\n        viewOptions: {\r\n          showHeader: true,\r\n          showPaging: true,\r\n          showThumbnails: true,\r\n          showDownload: true,\r\n          showSearch: true,\r\n          showZoom: true,\r\n          showPrint: true,\r\n          showSecondaryToolBar: true,\r\n        },\r\n      },\r\n    };\r\n    (window as any).gspframeworkService.rtf.func.openMenu(options);\r\n  }\r\n\r\n  /**\r\n   * ç³»ç»é¢ç½®çä¸åè®¸ç¼è¾å é¤\r\n   * @param data data.rowDataä¸ºå®ä½æ°æ®\r\n   * @returns\r\n   */\r\n  beforeEdit = (data: any) => {\r\n    if (data.rowData.userId == '*') {\r\n      return of(false);\r\n    }\r\n    return of(true);\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { DataTableModule } from '@farris/ui-datatable';\r\nimport { FarrisDialogModule } from '@farris/ui-dialog';\r\nimport { PaginationModule } from '@farris/ui-pagination';\r\nimport { NotifyModule } from '@farris/ui-notify';\r\nimport { ComboListModule } from '@farris/ui-combo-list';\r\nimport { MessagerModule } from '@farris/ui-messager';\r\nimport { LoadingModule } from '@farris/ui-loading';\r\nimport { InputGroupModule } from '@farris/ui-input-group';\r\nimport { DatagridModule } from '@farris/ui-datagrid';\r\nimport { DatagridEditorsModule, EditorProviders } from '@farris/ui-datagrid-editors';\r\nimport { FarrisFormsModule } from '@farris/ui-forms';\r\nimport { SwitchModule } from '@farris/ui-switch';\r\n\r\nimport { WfApprovalLogsModule } from '@gsp-wf/wf-approval-logs';\r\nimport { UiFlowchartModule } from '@gsp-wf/ui-flowchart'\r\nimport { TaskImplApiModule } from '@gsp-wf/task-impl-api';\r\nimport { AvatarModule } from '@farris/ui-avatar';\r\nimport { FDropdownDirectiveTypeModule } from '@farris/ui-dropdown';\r\nimport { WfSignModule } from '@gsp-wf/wf-sign';\r\n\r\nimport { SysManagerUIModule } from '@gsp-sys/sysmgr-ui';\r\nimport { CommonSharedModule } from '@gsp-sys/rtf-common';\r\nimport { SessionService, HttpService, CacheService } from '@ecp-caf/caf-common';\r\nimport { FrameworkService, FrmEventBus, FuncsService } from '@gsp-sys/rtf-common';\r\n\r\nimport { TaskService } from './service/task.service';\r\nimport { TranslatePipe } from './service/i18n/translate.pipe';\r\nimport { I18nService } from './service/i18n/i18n.service';\r\nimport { WfTaskHandlerService } from './wf-task-handler.service';\r\nimport { TaskExecuteComponent } from './components/task-execute/task-execute.component'\r\nimport { TaskAssigninfoComponent } from './components/task-assigninfo/task-assigninfo.component';\r\nimport { ProcessSelectorComponent } from './submit/process-selector/process-selector.component';\r\nimport { AssigneeInfoComponent } from './components/assignee-info/assignee-info.component';\r\nimport { ThrottleClickDirective } from './throttleTime/throttleClickDirective';\r\nimport { TaskCommentComponent } from './components/task-comment/task-comment.component';\r\nimport { UrgeHandleComponent } from './components/urge-handle/urge-handle.component';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    TranslatePipe,\r\n    TaskExecuteComponent,\r\n    TaskAssigninfoComponent,\r\n    ProcessSelectorComponent,\r\n    AssigneeInfoComponent,\r\n    ThrottleClickDirective,\r\n    TaskCommentComponent,\r\n    UrgeHandleComponent,\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    DataTableModule,\r\n    FarrisDialogModule,\r\n    PaginationModule,\r\n    NotifyModule,\r\n    ComboListModule,\r\n    SysManagerUIModule,//ç¨æ·å¸®å©\r\n    WfApprovalLogsModule,\r\n    UiFlowchartModule,\r\n    CommonSharedModule,\r\n    LoadingModule,\r\n    TaskImplApiModule,\r\n    MessagerModule,\r\n    InputGroupModule,\r\n    WfSignModule,//æåç­¾å\r\n    AvatarModule,//ç­¾åä¸ä¼ å¾ç\r\n    FDropdownDirectiveTypeModule,//ä¸æèå\r\n    DatagridModule,//å¸¸ç¨æè§ç®¡çfarrisè¡¨æ ¼\r\n    DatagridEditorsModule,\r\n    DatagridModule.forRoot([\r\n      ...EditorProviders\r\n    ]),\r\n    FarrisFormsModule,\r\n    SwitchModule\r\n  ],\r\n  providers: [\r\n    TaskService,\r\n    I18nService,\r\n    WfTaskHandlerService,\r\n    FrameworkService,//æ¡æ¶æ²¡æä¾module\r\n    SessionService,\r\n    HttpService,\r\n    CacheService,\r\n    FrmEventBus,\r\n    FuncsService,\r\n  ],\r\n  exports: [\r\n    TaskExecuteComponent,\r\n    TaskAssigninfoComponent,\r\n    ProcessSelectorComponent\r\n  ],\r\n  entryComponents: [\r\n    TaskExecuteComponent,\r\n    TaskAssigninfoComponent,\r\n    ProcessSelectorComponent,\r\n  ]\r\n})\r\nexport class WfTaskHandlerModule { }\r\n"],"names":[],"mappings":"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"}
